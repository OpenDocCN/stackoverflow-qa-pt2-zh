# StackOverflow 问答 13972000-13972999

# git - 使用 netbeans 推送到 github

> ID：13972002
> 
> 赞同：1
> 
> 时间：2012-12-20T12:13:51.580
> 
> 标签：git, netbeans, github, netbeans-7

我是使用 gitHub 的新手，我在 macosx 上使用 netBeans。

我在推动这个项目时遇到了麻烦。我收到以下错误：

```
https://Username@github.com/xxxfolder/xxxproject.git:git-receive-pack not permitted 
```

我尝试使用许多东西，例如尝试以 ssh 登录。但它没有用。

我将权限更改为当地代表。到 777 以防万一选项 -R 仍然无法正常工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T15:32:02.873

我解决了。

如果其他人遇到此问题，只需验证用户是否在 GitHub 的存储库设置中添加为协作者即可。

如果这不起作用，请尝试在 ssh 上执行此操作，并记得检查 gitHub 中提到的地址，因为它与 Https 协议的地址不同。

# python - 一种更pythonic的方式

> ID：13972004
> 
> 赞同：1
> 
> 时间：2012-12-20T12:14:03.083
> 
> 标签：python, graph, dictionary

有没有更好的方法来编写这个函数？

```
def highest_strength(G):
    highest_strength = None
    highest_strength_val = 1
    for node1 in G:
        for node2 in G[node1]:
            val = G[node1][node2]
            if val > highest_strength_val:
                highest_strength_val = val
                highest_strength = (node1, node2)
    return highest_strength 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T12:19:20.140

非常简单：

```
def highest_strength(graph):
    return max((s, x, y) for x, links in graph.items() for y, s in links.items()) 
```

它是如何工作的：

```
>>> highest_strength(graph)
(4, 'c', 'b') 
```

扩展版：

```
def highest_strength(G):
    best_strength, best_link = None, (None, None)
    for x, links in G.items():
        for y, v in links.items():
            if v > best_strength:
                best_strength, best_link = v, (x, y)
    return best_link 
```

# objective-c - int 属性出现无法识别的选择器

> ID：13972005
> 
> 赞同：3
> 
> 时间：2012-12-20T12:14:03.623
> 
> 标签：objective-c, ios, properties, cocos2d-iphone, unrecognized-selector

我有一个名为 Projectile 的类（它继承自 Cocos2D CCSprite 类，但我怀疑这与问题有关）。它所包含的只是一个名为“type”的 int，我已将其制成一个属性。

弹丸.h：

```
@interface Projectile : CCSprite{

int type;

}

@property int type;

@end 
```

弹丸.m：

```
#import "Projectile.h"

@implementation Projectile

@synthesize type;

@end 
```

现在我要做的就是在我的游戏的主类中设置该属性，如下所示：

```
-(BOOL)ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event{

Projectile *newProjectile = [CCSprite spriteWithSpriteFrameName:@"Bullet.png"];

newProjectile.position = spaceShip.position;

newProjectile.type = kLaser;               // defined earlier as #define kLaser 1

[objectsSpriteSheet addChild:newProjectile z:kProjectileZValue];

[projectiles addObject:newProjectile];

return YES;

} 
```

每次我运行它时，它都会在 newProjectile.type = kLaser 行上崩溃：

```
-[CCSprite setType:]: unrecognized selector sent to instance 0x1ed82f10 
```

出错似乎太简单了，Xcode 清楚地知道该属性，因为它会自动完成它并且不会给我一个错误说它不存在。

我在其他地方也有非常相似的代码，可以完美执行。

如果有人能对此有所了解，我将不胜感激，我相信我可以通过另一种方式解决它，但我想了解为什么如果可能的话这不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T12:18:03.300

嗯，是的，当你说的时候`Projectile *newProjectile = [CCSprite spriteWithSpriteFrameName:@"Bullet.png"];`，newProjectile 将是一个 CCSprite 类型的对象，它没有那个属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T12:20:24.140

此行导致问题：

```
Projectile *newProjectile = [CCSprite spriteWithSpriteFrameName:@"Bullet.png"]; 
```

将其更改为：

```
Projectile *newProjectile = [Projectile spriteWithSpriteFrameName:@"Bullet.png"]; 
```

您正在创建实例`CCSprite`并将其分配给它的子类。`CCSprite`该类没有类型之类的属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T12:19:36.720

我不确定，但试试这个：

```
Projectile *newProjectile = (Projectile *)[CCSprite spriteWithSpriteFrameName:@"Bullet.png"]; 
```

# entity-framework - Linq 到具有 NameValueCollection 的实体

> ID：13972006
> 
> 赞同：0
> 
> 时间：2012-12-20T12:14:05.723
> 
> 标签：entity-framework, linq-to-entities, namevaluecollection

处理不能在 LINQ to Entities 查询中使用 NameValueCollection 或 Dictionary 的问题的最佳方法是什么？

我知道您可以将该值分配给一个临时字符串变量，然后在您的查询中使用它......但是还有其他方法吗？

我从 ASP.Net 的 Request.Params NameValueCollection 获得所有输入，并且为每个值引入一个新的字符串变量以便我可以在数据库查询中使用它是很麻烦的......

```
using (ModelContext db = new ModelContext()) {
    NameValueCollection c = new NameValueCollection();

    c["Name"] = "Foo";

    var query = from p in db.Customers
            where p.Name == c["Name"]
            select p;

    // Exception:
    //  LINQ to Entities does not recognize the method
    //  'System.String get_Item ...'
    foreach (Customer customer in query)
        Console.WriteLine(customer.Name);
} 
```

# c# - 如何从画布后面的代码中打开图像并让用户在此图像上绘图

> ID：13972012
> 
> 赞同：1
> 
> 时间：2012-12-20T12:14:30.227
> 
> 标签：c#, asp.net, image, html, canvas

我是 HTML5 的初学者。

我想做的是：

上传一张图片，`canvas`然后允许用户在这张图片上画画，这样我就可以把这张图片保存在我的数据库中。

我学会了如何通过这一[课画画](http://www.codicode.com/art/how_to_draw_on_a_html5_canvas_with_a_mouse.aspx)

* * *

但我不知道如何在 Canvas 中打开图像，然后让用户在此图像上绘图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T12:32:35.990

如果我的理解是正确的：您想从数据库中检索图像，将其显示给用户以在其上绘制，然后将其上传回服务器以再次存储在数据库中！

1 - 创建一个 IHttpHandler (.ashx) 以从数据库中返回图像

```
public class ImageHandler : IHttpHandler 
{ 
  public bool IsReusable { get { return true; } } 
  public void ProcessRequest(HttpContext ctx) 
  { 
    var myImage = function_to_read_the_image();
    ctx.Response.ContentType = "image/png"; 
    ctx.Response.OutputStream.Write(myImage); 
  } 
} 
```

将此保存为 getImage.ashx

2 - 在您引用的教程的 InitThis() 函数中添加这些行***ctx = document.getElementById('myCanvas').getContext("2d");*** 在画布上显示图片

```
var image = new Image();
image.src = 'http://www.site.com/getImage.ashx';
$(image).load(function () {
    ctx.drawImage(image, 0, 0);
}); 
```

您还可以添加宽度和高度来拉伸图像或填充画布：

```
ctx.drawImage(image, 0, 0, 500, 200); 
```

3 - 使用画布的 toDataURL 函数再次将最终绘图上传到服务器，并将图像保存到数据库。

将画布图像数据发送到服务器：

```
var Pic = document.getElementById("myCanvas").toDataURL("image/png");
Pic = Pic.replace(/^data:image\/(png|jpg);base64,/, "")
$.ajax({
    type: 'POST',
    url: 'Save_Picture.aspx/UploadPic',
    data: '{ "imageData" : "' + Pic + '" }',
    contentType: 'application/json; charset=utf-8',
    dataType: 'json',
    success: function (msg) {
        alert("done, Image Uploaded.");
    }
}); 
```

读取和保存图像服务器端：

```
 using System;
   using System.Web;
   using System.IO;
   using System.Web.Script.Services;
   using System.Web.Services;
   [ScriptService]
    public partial class Save_Picture : System.Web.UI.Page
    {
        [WebMethod()]
        public static void UploadPic (string imageData)
        {
            byte[] data = Convert.FromBase64String(imageData);
            // save it in a file or database ...
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T12:18:13.117

1.  将图像加载到画布中：

    ```
    var image = new Image();
    image.addEventListener("load", function() {
        ctx.drawImage(image, x, y);
    });
    image.src = 'http://server/image.jpg'; 
    ```

2.  让用户使用您在问题中链接到的功能在此图像上绘图。

# javascript - Titanium 选项卡式 iPhone 应用程序中的内存泄漏

> ID：13972019
> 
> 赞同：2
> 
> 时间：2012-12-20T12:15:04.907
> 
> 标签：javascript, iphone, memory-leaks, titanium, titanium-mobile

这让我头疼了几个星期——希望有人能帮忙。我正在使用 Titanium 移动设备中的 2.1.4 SDK 为 iOs 5.0 构建应用程序。我的应用程序从数据库中提取数据，并使用标签和表格将其显示在可滚动视图中。我注意到它会在一段时间后崩溃，并且根据工具，可滚动视图中的视图以及标签和表格视图永远不会从内存中释放。我使用了很多 commonJS，我的代码看起来像这样（精简）：

**ApplicationWindow 模块，我从 app.js 调用**

```
function ApplicationWindow(title) {
var self = Ti.UI.createWindow({
    title:title,
    backgroundColor:'white'
});

var button = Ti.UI.createButton({
    height:44,
    width:200,
    title:L('openWindow'),
    top:20
});
self.add(button);

var QuizWindow = require('/ui/common/QuizWindow');

button.addEventListener('click', function() {
    //containingTab attribute must be set by parent tab group on
    //the window for this work
    qw = new QuizWindow({title: 'KCT', backgroundColor: 'white', navBarHidden: true, tabBarHidden: true});
    self.containingTab.open(qw);
});

return self;
};

module.exports = ApplicationWindow; 
```

**然后我调用 QuizWindow 模块：**

```
function QuizWindow(args){
var instance = Ti.UI.createWindow(args);
var QuestionView = require('/ui/common/QuestionView');

var db = Ti.Database.install("/kct.sqlite","kct");
var q = db.execute("SELECT * FROM questions");

var sv = Ti.UI.createScrollableView({
    bottom: 40
});

while(q.isValidRow()){
    var id = q.fieldByName("qid");
    var question = q.fieldByName("q");
    var set = q.fieldByName("set");
    var info = q.fieldByName("info");

    var v = new QuestionView(id,set,question,info);
    sv.addView(v);
    q.next();
}

q.close();
db.close();

var button = Ti.UI.createButton({
    height:44,
    width:200,
    title:"Close",
    bottom:10
});

button.addEventListener('click', function() {
    instance.close({animation: true});
});

instance.add(sv);
instance.add(button);
return instance;
};
module.exports = QuizWindow; 
```

**这是问题视图：**

```
function QuestionView (id,set,question,infolert) {
var qview = Ti.UI.createView({
    top: 0,
    width: 'auto',
    height: 'auto',
    backgroundColor: 'white',
    questionSet: set,
    questionID: id,
    info: infolert,
    isAnswered: false       
});

var qLabel = gui.Header(question);
qLabel.top = 5;
qLabel.left = 10;
qLabel.right = 10;
qLabel.color = "#3B3B3B";
qLabel.font = {fontSize: gui.defaultFontSize+4, fontWeight: 'bold'};

var dcalc = (qLabel.text.length / 30) * ((gui.defaultFontSize+4)*1.2) + 5;

var answView = Ti.UI.createTableView({
    backgroundColor: 'white',
    top: dcalc,
    _parent: qview
});

var changeheight = function(e) {
    var lheight = e.source.rect.height;
    if(lheight && lheight > 10) answView.top = lheight + 5;
    return;
};

qLabel.addEventListener('postlayout', changeheight);

qview.add(qLabel);
qview.add(answView);

return qview;

}
 module.exports = QuestionView; 
```

我最初有一些代码可以从数据库中提取数据以获取答案，并用它填充 tableView，但为了简洁起见，我将其删除。即使没有它，也没有任何东西被释放。我真的很茫然，任何建议都值得赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:21:08.577

你可以看看我的 Gist。通过使用它，您可以极大地解决内存问题。只需在您的项目中包含该类并像这样使用它。

[https://gist.github.com/3898340](https://gist.github.com/3898340)

```
var mem = new MemoryClean();
    mem.clean(tableView);
    mem.clean(headerView);
    mem.clean(footerView);
    mem = null; 
```

这是我一直在使用的。

```
function openAppointments(e) {
    var mem = new MemoryClean();
    mem.clean(headerView);
    mem.clean(footerView);
    mem = null;
    win.close();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T12:50:00.337

最后，我解决了。是这样的：

```
var answView = Ti.UI.createTableView({
    (...)
    _parent: qview
}); 
```

引用答案表中的视图会阻止它及其所有子项被释放。一旦我删除了它，它们只需关闭窗口即可释放。希望这对某人有用。

# java - 如何将jasper报告从xalan切换到saxon？

> ID：13972022
> 
> 赞同：3
> 
> 时间：2012-12-20T12:15:10.400
> 
> 标签：java, jasper-reports, saxon, xalan

我们在项目中使用 jasperreports 4.1.1，它工作正常，但最近我们决定切换到 xslt 2.0，我做的第一件事 - 我将 xalan（没有 xslt 2.0 实现）更改为 saxon。但是我运行的第一份报告给了我 NoClassDefFoundError：

```
java.lang.NoClassDefFoundError: org/apache/xpath/CachedXPathAPI
    at net.sf.jasperreports.engine.util.xml.XalanXPathExecuter.<init>(XalanXPathExecuter.java:45)
    at net.sf.jasperreports.engine.util.xml.XalanXPathExecuterFactory.getXPathExecuter(XalanXPathExecuterFactory.java:39)
    at net.sf.jasperreports.engine.util.xml.JRXPathExecuterUtils.getXPathExecuter(JRXPathExecuterUtils.java:85)
    at net.sf.jasperreports.engine.data.JRXmlDataSource.<init>(JRXmlDataSource.java:172)
    at net.sf.jasperreports.engine.query.JRXPathQueryExecuter.createDatasource(JRXPathQueryExecuter.java:91) 
```

我们没有对 xalan 的任何显式绑定，但 jaspereports 具有以下属性：

```
# Apache Xalan XPath executers are used by default
net.sf.jasperreports.xpath.executer.factory=net.sf.jasperreports.engine.util.xml.XalanXPathExecuterFactory 
```

我想这个属性会导致 jasper 使用 xalan，但我不明白我可以改变它：我查看了包**net.sf.jasperreports.engine.util.xml**并且我没有找到任何与 saxon 相关的内容。jasper 是否仅适用于 xalan xslt 处理器？如果不是那么如何改变它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T07:07:40.233

Jasper 是非常可配置的。我相信您可以简单地编写自己的 XPathExecutionFactory 并使用适当的环境变量将其插入 Jasper。如果我需要 saxon 来做其他事情，我个人只会并行部署 xalan 和 saxon。

# r - 在 R 中处理 ASCII

> ID：13972024
> 
> 赞同：4
> 
> 时间：2012-12-20T12:15:20.240
> 
> 标签：r, ascii, file-handling

我有一些来自人口普查的微数据文件存储为 .txt 并以 ASCII 编码。当我在文本编辑器中打开它们时，我会得到类似： `1100015110001500100100003624008705865085282310200600101011022022 14 444231`等。

由于我对 ASCII 数据的制表没有经验，我想知道是否有任何方法可以使用 R 和/或我需要什么类型的补充软件来完成这项工作。

实际上，起初我想“正常”地查看我的数据，也就是说，如果可能的话，将其视为一个表格（文件大小在 40mb 和 500mb 之间变化）。然后我想做一些简单的计算，稍后将结果存储为 csv。在其他情况下使用它。

谁能给我一些建议？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T13:12:55.290

这个巴西人口普查网站提供了一个 SAS 输入脚本。仅使用 SAS 导入脚本导入 ASCII 数据集的最快方法是使用[SAScii 包](http://cran.r-project.org/package=SAScii)。[您可以在这个压缩文件](ftp://ftp.ibge.gov.br/Trabalho_e_Rendimento/Pesquisa_Mensal_de_Emprego/Microdados/documentacao/Documentacao.zip)中找到 SAS 导入脚本——它是 INPUT.txt。请注意，这些 SAS 导入指令的 INPUT 块直到第四行才开始，因此您的`beginline`参数将为 4。首先测试您是否正确读取了 SAS 脚本`?parse.SAScii`

```
library(SAScii)
parse.SAScii( "INPUT.txt" , beginline = 4 ) 
```

一旦您看到正确打印了列名和宽度，您就可以使用该`?read.SAScii`函数将您的文本文件直接读入 R 数据框

```
x <- read.SAScii( "filename.txt" , "INPUT.txt" , beginline = 4 )
head( x ) 
```

如果您的文件太大而无法完全读入 RAM，则可以将其读入 SQLite 数据库。使用`read.SAScii.sqlite()`不是在 SAScii 包中而是在[我的 github 帐户](https://github.com/ajdamico/usgsd/blob/master/SQLite/read.SAScii.sqlite.R)中找到的函数——它只是 read.SAScii() 函数的一个轻微变化，但它不会使 RAM 过载。[您可以在这个美国政府调查数据集网站](http://www.asdfree.com/search/label/area%20resource%20file%20%28arf%29)的下载脚本中看到它的使用示例。

有关 SAScii 包的更多详细信息，请查看[此概述](http://blog.revolutionanalytics.com/2012/07/importing-public-data-with-sas-instructions-into-r.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-02T21:29:02.260

一个很好的替代方案是 package `readr`，这是一种读取固定列宽数据的[极快解决方案。](https://stackoverflow.com/questions/24715894/faster-way-to-read-fixed-width-files-in-r)更多信息在`readr` [这里](http://blog.revolutionanalytics.com/2015/04/new-packages-for-reading-data-into-r-fast.html)。

因此`read.SAScii`，您可以使用基于`readr`. 像这样：

```
# Load Packages
  library(readr)
  library(SAScii)
  library(data.table)

# Parse input file
  dic_pes2013 <- parse.SAScii("INPUT.txt")

  setDT(dic_pes2013) # convert to data.table

# read to data frame
  pesdata2 <- read_fwf("./Dados/PES2013.txt", 
                       fwf_widths(dput(dic_pes2013[,width]),
                                  col_names=(dput(dic_pes2013[,varname]))),
                                  progress = interactive()
                                  ) 
```

我刚刚在 1.2 分钟内读取了包含 243 个变量的 240 万条记录（文件`Amostra_Pessoas_35_outras.txt`）。

附言。如果您没有这些`input.txt`文件，[这里](https://pt.stackoverflow.com/questions/89417/arquivos-de-leitura-em-ascii-do-censo-demografico-2010/90437#90437)是关于如何创建它们的简短脚本。

**请注意，某些变量有小数**，这在此处发布的答案提供的解决方案中未包含（至少到目前为止）。考虑到这一点，我会[在此处](https://github.com/rafapereirabr/Brazilian_Census_2010)`R`推荐此脚本，它将帮助您下载 2010 年巴西人口普查数据集，将它们读入数据框并将它们保存为文件。`.csv`

# flash - Flash ActiveX 控件在 x64 中引发浮点异常

> ID：13972029
> 
> 赞同：0
> 
> 时间：2012-12-20T12:15:41.923
> 
> 标签：flash, com, activex, atl, floating-point-exceptions

我有一个使用 Flash 播放器主动 x 控件的 MFC 对话。我在 x86 程序中没有问题，但是当为 x64 构建时，我开始在对话的消息循环中抛出浮点异常。我可以处理其中的第一个，但不是全部。

控件的创建在 OnInitDialog() 中完成

```
typedef HRESULT (WINAPI *LPAtlAxWinInit)();
typedef HRESULT (WINAPI *LPAtlAxGetControl)(HWND hwnd, IUnknown** unk);
#define MsgLoopWhile(a) while(a) { GetMessage(&msg,0,0,0); DispatchMessage(&msg); }

LPAtlAxWinInit AtlAxWinInit = (LPAtlAxWinInit)GetProcAddress(
         LoadLibrary(_T("atl")),"AtlAxWinInit");
LPAtlAxGetControl AtlAxGetControl = (LPAtlAxGetControl)GetProcAddress(
         LoadLibrary(_T("atl")),"AtlAxGetControl"); 
HRESULT hr = AtlAxWinInit();
if (FAILED(hr))
    return FALSE;
m_hFlashWnd = CreateWindow(_T("AtlAxWin"), m_strFileName, WS_CHILD|WS_VISIBLE, 0, 0, 0, 0, this->GetSafeHwnd(), 0, 0, 0);

if(!m_hFlashWnd)
{
    ::AfxMessageBox(LoadStr(IDS_FLASH_NOT_INSTALLED));
    ::PostMessage(WM_CLOSE);
    return FALSE;
}

CComQIPtr<IUnknown, &IID_IUnknown> pComI = NULL;
hr = AtlAxGetControl(m_hFlashWnd, &pComI);
if (FAILED(hr))
    return FALSE;

MSG msg;
CComQIPtr<IWebBrowser2> pComBrow = pComI;
CComPtr<IDispatch> pDisp;
if(pComBrow) 
    MsgLoopWhile( !pComBrow->get_Document(&pDisp) && !pDisp );         // Document loading loop
CComQIPtr<IHTMLDocument2> pComHtml = pDisp;
CComPtr<IHTMLElementCollection> pElems;
hr = pComHtml ? pComHtml->get_embeds(&pElems) : -1;
if(SUCCEEDED(hr))
{
    CComVariant id;
    pDisp = NULL;
    MsgLoopWhile( pElems && !pElems->item(id,id,&pDisp) && !pDisp );
} 
```

异常在最后一个循环中抛出。

重置异常标志或使用 SEH 处理程序不起作用

cal栈如下

> mshtml.dll!CLayout::GetElementLayoutTransform()
> mshtml.dll!CLayout::CalcSize()
> mshtml.dll!CLayout::CalcTopLayoutSize()
> mshtml.dll!CView::EnsureSize()
> mshtml.dll!CView::EnsureView()
> mshtml.dll!CDoc::RunningToInPlace()
> mshtml.dll!CServer::Show()
> ieframe.dll!CDocObjectHost::_ShowMsoView()
> ieframe.dll!CDocObjectHost::ActivateMe()
> mshtml.dll!CServer::ActivateView()
> mshtml.dll!CServer::DoUIActivate()
> mshtml.dll!CServer::DoVerb()
> mshtml.dll!CMarkup::Navigate()
> ieframe.dll!CDocObjectHost::_ActivateMsoView()
> ieframe.dll!CDocObjectHost::UIActivate()
> ieframe.dll!CDocObjectView::UIActivate()
> ieframe.dll!CBaseBrowser2::_UIActivateView()
> ieframe.dll!CBaseBrowser2::v_ActivatePendingView()
> ieframe.dll!CWebBrowserSB::v_ActivatePendingView()
> ieframe.dll!CBaseBrowser2::_ExecShellDocView()
> ieframe.dll!CBaseBrowser2::Exec()
> ieframe.dll!CWebBrowserSB::Exec()
> ieframe.dll!CDocObjectHost::_OnReadyState()
> ieframe.dll!CDocObjectHost::_OnChangedReadyState()
> ieframe.dll!CDocObjectHost::OnChanged()
> mshtml.dll!CBase::FirePropertyNotify()
> mshtml.dll!CMarkup::SetReadyState()
> mshtml.dll!CMarkup::SetInteractiveInternal()
> mshtml.dll!CMarkup::RequestReadystateInteractive()
> mshtml.dll!CMarkup::BlockScriptExecutionHelper()
> mshtml.dll!CHtmPost::Exec()
> user32.dll!DefWindowProcWorker()

# java - 关联枚举和在泛型中使用

> ID：13972037
> 
> 赞同：1
> 
> 时间：2012-12-20T12:16:34.577
> 
> 标签：java, generics, enums

我需要为国家和州创建枚举。

1.  创建和关联这些枚举的最合适方法是什么（因为在 X 国可以有状态 P、Q、R 等）？

2.  如果我有一个使用 Country 类型参数化的泛型类，我可以声明一个方法来接受仅适用于特定国家的 State 吗？

例如：

```
public abstract class TestClass <T extends Country> {
    public void addState(T.State state);
    public List<T.State> getSelectedStates();
} 
```

**编辑 1：**为了便于维护，我希望每个国家都有一个单独的州枚举，而不是一个包含所有国家数百个州的州枚举。请给出意见。

**编辑2：**我使用以下解决方案来解决与此非常相似的问题。

**解决方案：**正如@Bohemian 建议的那样，

```
interface Country { }
interface State<T extends Country> { }

public class Countries {
    public static class USA implements Country { }
    public static class India implements Country { }
}

enum UsaStateEnum implements State<Countries.USA> {
    NY, MA, MD, CA
}

enum IndiaStateEnum implements State<Countries.India> {
    DEL, BLR
}

class GenericClass<T extends Country> {

    List<State<T>> states;

    public void addState(State<T> state) {
        if (states == null) {
            states = new ArrayList<State<T>>();
        }
        states.add(state);
    }

    public List<State<T>> getSelectedStates() {
        return states;
    }
}

public class NestedEnumTest {
    public static void main(String[] args) {
        GenericClass<Countries.USA> obj = new GenericClass<Countries.USA>();
        obj.addState(UsaStateEnum.MA);
        // obj.addState(IndiaStateEnum.DEL); // NOT ALLOWED

        List<State<Countries.USA>> states = obj.getSelectedStates();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:18:07.497

您可以使枚​​举实现如下接口：

```
public enum MyEnum implements MyInterface<MyType> {
    // ...
} 
```

除了实现接口`enum`s 还不支持继承，但如果您希望在您`enum`的 s 中具有通用功能，您可以随时将例如一些**策略**对象组合到它们中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T12:34:38.107

要回答第 1 部分，您可以定义两个枚举，其中一个引用另一个，如下所示：

```
public enum State {
    A, B, C, D, E
}

public enum Country {
    USA(State.A, State.B),
    UK(State.C, State.D);

    private final List<State> states;

    Country(State... states) {
        this.states = Arrays.asList(states);
    }

    public List<State> getStates() {
        return states;
    }
} 
```

要回答第 2 部分，“不” - 没有办法将特定类的实例限制为子集。

如果您为每个国家/地区定义一个单独的类并为其拥有的州定义一个单独的枚举，您可以，但这似乎不是一个好主意。

# jquery - 使用ajax从文本文件中的特定div加载文本

> ID：13972038
> 
> 赞同：1
> 
> 时间：2012-12-20T12:16:38.820
> 
> 标签：jquery, ajax

当用户将鼠标悬停在特定的文本字符串上时，我正在使用[jquery hovercard 插件从使用 ajax 的文本文件中提取文本 - 这一切都很好，（下面的代码）。](http://designwithpc.com/Plugins/Hovercard)

现在我想做的是在文本文件中有许多不同的 div（如下所示），并根据悬停在哪个文本字符串上拉入相关的 div。这对 Jquery/Ajax 是否可行，如果可以，请问您是如何做到的？

*//文本文件内容*

```
<div id="John_Resig">
<div class="contact">John Resig</div>
<p><strong>Testing testing testing!</strong></p>
<p>And on another line of text : )</p>
</div>

<div id="Tim_Berners_Lee">
<div class="contact">Tim Berners-Lee</div>
<p><strong>Testing testing testing!</strong></p>
<p>And on another line of text : )</p>
</div> 
```

*//jQuery/Ajax 代码*

```
$(document).ready(function () {
var hoverHTMLDemoAjax = '<div class="demo-cb-tweets"></div>';
$(".demo-ajax").hovercard({
    detailsHTML: hoverHTMLDemoAjax,
    width: 350,
    delay: 500,
    cardImgSrc: 'http://ejohn.org/files/short.sm.jpg',
    onHoverIn: function () {
        $.ajax({
            url : "helloworld.txt",
            type: 'GET',
            dataType: "text",
            beforeSend: function () {
                $(".demo-cb-tweets").prepend('<p class="loading-text">Loading latest tweets...</p>');
            },
            success: function (data) {
                $(".demo-cb-tweets").empty();
                $(".demo-cb-tweets").html(data);
            },
            complete: function () {
                $('.loading-text').remove();
            }
        });
    }
}); 
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T13:12:06.950

由于您的文本文件包含 html 标记，因此您可以使用 jQuery 进行操作。

```
success: function (data) {
    var people = $(data),
        john = people.filter('#John_Resig');

    $(".demo-cb-tweets").empty().append(john);
} 
```

在 jQuery 对象中包装一串 html 会将其转换为 jQuery 对象，然后您可以使用该对象并将其插入到 dom 中，即：`$('<div>Test</div>').addClass('test-class').appendTo('body');`

**编辑：**提取名称：

您可以以相同的方式从文本文件中提取名称。例如，在页面加载时，如果您对将一直初始化的文本文件进行 ajax 调用。以下代码将获取您的文本文件，并遍历每个容器元素（在您的示例中，John_Resig 和 Tim_Berners_Lee）：

```
success: function (data) {
    var people = $(data);

    people.each(function (i, person) {
        var name;
        if (person.nodeType !== 3) { // Your text file example had a blank line between the containing div elements... which loads as a nodeType of 3, so we'll want to skip those.
            name = $('.contact', person).text(); // This would grab the text inside of the div with the class 'contact'.
            // do stuff with that name here...

        }
    });
} 
```

# mysql - 简单查询以获得准确结果

> ID：13972042
> 
> 赞同：0
> 
> 时间：2012-12-20T12:16:49.290
> 
> 标签：mysql, sql, oledb

尊敬的用户，

我一张名为 Employee 的表如下

```
EmpId | EmpName | ManagerId
 1        Smith    10
 2        John     11
 10       Ted       2
 11       Lowson    1 
```

每个员工都有一个经理。每个经理都是员工。

现在，我想编写一个查询，以便所有员工姓名及其经理姓名。

我试过这样的东西>>>

```
select a.EmpName,b.EmpName from Employee a,b where b.ManagerId=a.EmpId 
```

但失败了。

请指导我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T12:20:25.910

试试这个 ：：

```
select 
t1.EmpName as EmoName, t2.EmpName as ManagerName
from   Employee t1 
LEFT join Employee t2 on t1.ManagerId = t2.EmpId 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T12:23:14.927

试试这个，，

```
select 
t1.EmpName as EmoName, t2.EmpName as ManagerName
from   Employee t1 
LEFT join Employee t2 on t1.ManagerId = t2.EmpId 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T12:19:21.410

听起来像家庭作业：

您的陈述错过了该`FROM`条款。你应该继续阅读`JOINs`。您必须将表连接到自身才能为每个员工获取经理。另一个提示（因为在那一点上所有其他答案都失败了）：你需要一个`LEFT JOIN`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T12:20:26.330

在其最基本的...

```
select emp.EmpName, mgr.EmpName
from Employee emp, Employee mgr
where emp.ManagerId = mgr.EmpId 
```

您很可能需要比这更复杂的东西来掩盖例如没有经理的员工，但这个查询对您来说是一个开始。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T12:23:20.017

```
select 
 group_concat(t2.EmpName SEPARATOR ',') AS empName,t1.ManagerId from 
  Employee t1 join Employee t2 on t1.ManagerId = t2.EmpId
  where t1.ManagerId = 0
 group by t1.ManagerId 
```

你会得到结果

EmpName (Lowson,Td,Jon) 经理 (MangerName)

所以结果只会在一行中

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-20T12:37:08.803

试试这个你错过了什么

```
select a.EmpName,b.EmpName from Employee a, Employee b where b.ManagerId=a.EmpId 
```

# jquery - Mac 和 Win 中奇怪的 jQuery 行为

> ID：13972046
> 
> 赞同：0
> 
> 时间：2012-12-20T12:16:58.883
> 
> 标签：jquery, firefox

我有简单的点击复选框

```
jQuery('#some_div .checkbox').click(function(){
    console.log(jQuery(this));
    console.log(jQuery(this).val());
    //....
<input type="checkbox" value="15" class="checkbox" > 
```

但在 Windows 上，这不起作用。

Mac 火狐 17.0.1
![苹果电脑](../Images/c06e47858672d957486acf440af6c2c5.png)

赢得火狐 17.0.1
![赢](../Images/5d331bb17ff8d7dbcf0cf24f0a912d66.png)

在 IE 中也一样。铬工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:41:11.000

我的猜测是您没有使用正确的事件侦听器。您应该使用`.select()`而不是`.click()`.

# authorization - 仅在 facebookSessionLoginBehavior.ForcingWebView 等网络上登录并请求许可，但也需要授权

> ID：13972047
> 
> 赞同：1
> 
> 时间：2012-12-20T12:17:03.343
> 
> 标签：authorization, behavior, facebook-login, login-control, facebook-authorization

我不确定这是否是正确的地方，但这是我的问题。我正在统一为 ipad 做游戏，我正在使用 prime31 的社交网络插件。

*情况：*

当您到达关卡结束时，游戏会为您提供分数并询问您是否要将其提交到 Facebook。如果你这样做了，我的脚本我已经完成了一个系统来检查你是否登录，如果你没有登录，它会要求你登录，然后系统检查应用程序是否具有发布权限，如果没有，它会询问你。如果所有这些都是真的，它会直接在你的墙上发布一条消息。所以希望询问部分只需要完成一次。

*问题：*

当 ipad 在游戏和 facebook 应用程序之间交换登录时，ipad 会关闭游戏以节省内存。我试图减少场景，但很难减少它。所以我想也许我应该在游戏中打开那个 facebook 登录和授权。为此，我正在使用这条线：

setSessionLoginBehavior（FacebookSessionLoginBehavior.ForcingWebView）；

它完全符合我的要求，并没有真正崩溃。但问题是它只适用于登录，当我询问发布权限时，它会切换到 facebook 应用程序来询问权限并因此崩溃。

那么如何以与 FacebookSessionLoginBehavior.ForcingWebView 相同的方式请求权限。

非常感谢您的帮助。

鲍里斯

# ios - dispatch_sync 总是在主线程上调度一个块

> ID：13972048
> 
> 赞同：10
> 
> 时间：2012-12-20T12:17:07.723
> 
> 标签：ios, objective-c, cocoa-touch, cocoa, grand-central-dispatch

我正在使用 dispatch_sync 执行一个块并且该块被正确执行。但是这个块是在主线程上执行的。根据苹果文档：

> 串行队列（也称为私有调度队列）按添加到队列的顺序一次执行一项任务。**当前正在执行的任务在由调度队列管理的不同线程上运行（可能因任务而异）。**

这意味着（或我所理解的）正在执行的当前进程将在单独的线程上运行。

下面是我用来判断发生了什么的代码。**它在 NSURLConnection 的didReceiveData:**委托方法中被调用（我知道我不应该在 didReceiveData: 委托方法中这样做——但这只是一个关注 dispatch_sync 的示例）。以下是我可以假设的不同方式来证明我的结论：

1.  **在全局并发队列**上使用 dispatch_sync

     **```
     dispatch_sync(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

            if ([NSThread isMainThread]) {
                NSLog(@"Main Thread");
            }
            else
                NSLog(@"Not on Main Thread");

            //Some Process
        }); 
    ```** 

 **输出 -

```
 Main Thread
         Main Thread 
         Main Thread
         // Main Thread printed till didReceiveData: gets called 
```

* * *

2.  在使用 dispatch_queue_create 的自创建队列上使用**dispatch_sync**

    ```
    // Create queue somewhere else like this
    dispatch_queue_t newQueue = dispatch_queue_create("WriteQueue", DISPATCH_QUEUE_SERIAL);

       dispatch_sync(newQueue, ^{

            if ([NSThread isMainThread]) {
                NSLog(@"Main Thread");
            }
            else
                NSLog(@"Not on Main Thread");

            //Some Process
        }); 
    ```

输出 -

```
 Main Thread
         Main Thread 
         Main Thread
         // Main Thread printed till didReceiveData: gets called 
```

* * *

我在这里有点惊讶，块总是在主线程上执行，或者我错过了什么。因为它似乎与我认为的 Apple Doc 背道而驰。有谁知道这是怎么一回事？

***更新***：根据其他讨论，我知道 dispatch_sync 在同一个线程上执行一个块（大多数时候），那么为什么苹果文档的语句在某些方面是矛盾的。为什么苹果会说“*当前正在执行的任务在由调度队列管理的不同线程（可能因任务而异）上运行*。” 还是我还缺少什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-20T12:20:37.423

dispatch_sync() 在同一个线程上分派块，这很正常。

**编辑**

Apple 的文档不仅这样说，还这样说：

> 作为一种优化，此函数在可能的情况下调用当前线程上的块。

作为旁注（我知道你在谈论同步版本，但让我们更精确一点）我会说 dispatch_async() 也可能导致多个块在同一个线程中执行。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-20T12:20:59.680

对于背景块，使用

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    // background code
}); 
```

注意它是 _async 而不是 _sync

编辑：同样，要在主线程上执行某些操作，请使用

```
dispatch_async(dispatch_get_main_queue(), ^{
    // main thread code
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-08-14T01:41:45.503

重要的是要认识到 Grand Central Dispatch 可以保证提交到主队列的块将在主线程上运行，但提交到任何其他队列的块不能保证块将在哪个线程上执行。

> 不保证将在哪个线程上调用块；但是，可以保证一次只调用一个提交到 FIFO 调度队列的块。

Grand Central Dispatch 管理线程池并尽可能重用现有线程。如果主线程可用于工作（即空闲），则可以在该线程上执行一个块。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-06T03:34:33.527

以下是在 Swift 中执行此操作的方法：

```
runThisInMainThread { () -> Void in
    // Runs in the main thread
}

func runThisInMainThread(block: dispatch_block_t) {
    dispatch_async(dispatch_get_main_queue(), block)
} 
```

它作为标准功能包含在我的仓库中，请查看：[https ://github.com/goktugyil/EZSwiftExtensions](https://github.com/goktugyil/EZSwiftExtensions)**

# import - 显示名称重复错误 - Dynamics CRM 导入

> ID：13972049
> 
> 赞同：0
> 
> 时间：2012-12-20T12:17:11.660
> 
> 标签：import, dynamics-crm, crm, dynamics-crm-4

我正在使用 CSV 文件中的数据映射导入 CRM，但遇到了一个错误：

> Microsoft Dynamics CRM 中有两列具有相同的显示名称。在导入之前更改 Microsoft Dynamics CRM 中某一列的显示名称。

修复了一些实际的重复项后，我能找到的唯一剩余的重复项是 for`timezoneruleversionnumber`并且`utcconversiontimezonecode`它们都有空的显示名称并且都是系统字段（因此它们是不可编辑的）。

有人对我有解决方法或解决方案吗？

* * *

此外，可能不相关，但是上周我们的 CRM 专家（无法联系）完成了此导入工作，因此他是否有解决方法或者是否添加了字段（可能是自动添加的）是一个谜。

我在网上找到了一些其他人遇到相同问题的帖子（[此处](http://msgroups.net/microsoft.public.crm/attributes-havings-same-display-name-in/189466)），但这些似乎都没有得到解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:43:47.050

事实证明，1:N 属性和普通属性之间存在重复，现在已修复，系统字段中的重复（空）名称**不会**阻止导入。

# java - 如何在 ServletContextListener 中获取对 Quartz 调度程序的引用？（支柱 2）

> ID：13972054
> 
> 赞同：0
> 
> 时间：2012-12-20T12:17:25.850
> 
> 标签：java, quartz-scheduler

```
 public class TomcatStopListener implements ServletContextListener {

  public void contextDestroyed(ServletContextEvent arg0) {

   // How to get reference of already running Quartz Scheduler  here??

      }  

} 
```

在tomcat服务器停止时，我想停止quartz调度程序以避免错误，我知道scheduler.shutdown(); 但是我怎样才能在这里获得对调度程序的引用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:23:45.473

如果您习惯于`QuartzInitializerServlet`初始化 Quartz，那么您可以执行类似的操作

```
 StdSchedulerFactory factory = (StdSchedulerFactory) ctx
            .getAttribute(QuartzFactoryServlet.QUARTZ_FACTORY_KEY); 
```

在您的`contextDestroyed`方法中，`ctx`您的 ServletContext 在哪里。StdSchedulerFactory 实例存储在 ServletContext 中。

有关更多信息，请参阅[Quartz Initializer Servlet](http://quartz-scheduler.org/api/2.0.0/org/quartz/ee/servlet/QuartzInitializerServlet.html)

# ruby-on-rails - 拯救“nil:nilClass 的未定义方法‘xyz’”错误

> ID：13972056
> 
> 赞同：2
> 
> 时间：2012-12-20T12:17:32.197
> 
> 标签：ruby-on-rails, ruby

我有以下表演动作：

```
def show
  @name = params[:id]
  rescue ActiveRecord::RecordNotFound
  redirect_to :action => 'index'     
  @rpm = FedoraRpm.find_by_name(@name, :include => :rpm_comments)
  @page_title = @rpm.name
end 
```

即使我在那里添加了救援语句，它似乎也不起作用，当我尝试查看不存在的 URL 时出现此错误：

`undefined method 'name' for nil:NilClass`

我知道这可能与`@page_title`变量有关，但我该如何解决呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T12:21:50.510

```
@rpm = FedoraRpm.find_by_name(@name, :include => :rpm_comments) 
```

如果找不到结果，则返回 nil。这可能是你的情况。然后，您尝试调用`name`一个 nil 对象。

如果您希望查询返回 nil 值，请确保相应地更改您的代码。

救援声明在那里没有任何意义。如果您想在使用时丢失记录的情况下重定向

```
def show
  @name = params[:id]
  @rpm = FedoraRpm.find_by_name!(@name, :include => :rpm_comments)
  @page_title = @rpm.name
rescue ActiveRecord::RecordNotFound
  redirect_to :action => 'index'     
end 
```

注意我使用了 bang 版本的取景器。

```
@rpm = FedoraRpm.find_by_name!(@name, :include => :rpm_comments) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T12:22:13.340

你肯定会的。有2个原因：

1.  您使用的救援语句在错误发生或可能发生的地方之前
2.  您指向特殊类型的错误**ActiveRecord::RecordNotFound**，只有当您使用**find**方法或添加 ! 在**find_by_name的末尾**

所以你应该把救援线移到方法的底部，比如：

```
def show
  @name = params[:id]
  @rpm = FedoraRpm.find_by_name!(@name, :include => :rpm_comments)
  @page_title = @rpm.name
rescue ActiveRecord::RecordNotFound
  redirect_to :action => 'index'     
end 
```

注意我已经添加了！标记到 find_by_name 的末尾，它会触发一个记录未找到的异常，在你的情况下它只会返回**nil**，所以你在尝试从 nil 获取 .name 时会遇到错误

# php - 带有智能和友好 URL 的轻量级 PHP 框架

> ID：13972058
> 
> 赞同：1
> 
> 时间：2012-12-20T12:17:32.460
> 
> 标签：php, templates, frameworks, smarty, friendly-url

我正在寻找具有 smarty 支持的轻型 PHP 框架（没有复杂的架构、mvc/mvvm 等）。

但我也想友好的网址。例如，请求`http://www.myhost.com/somepage`应该加载 smarty-template `somepage.tpl`。有一些标准的解决方案吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T12:20:10.940

您可以使用 Smarty 模板使用 CodeIgniter... 它非常轻巧且对 url 友好.. 并且对于 MVC 初学者来说非常容易编写代码，

CodeIgniter 的文档非常清晰和简单，

[CodeIgniter 文档](http://ellislab.com/codeigniter/user-guide/)

查看以下链接以了解如何将 smarty 与 CodeIgniter 集成，

[将 Smarty 与 CodeIgniter 集成](http://www.coolphptools.com/codeigniter-smarty)

# http - 零大小回复错误 - Squid 没有收到此请求的任何数据

> ID：13972067
> 
> 赞同：0
> 
> 时间：2012-12-20T12:17:57.593
> 
> 标签：http, jboss

我有一个在 JBoss 4.2.3 中运行的应用程序，它同时用于许多客户端。

我的一些客户就此错误请求支持：

```
Zero Sized Reply
Squid did not receive any data for this request 
```

有谁知道为什么会这样？这是否发生在另一层，假设网络层。我认为这甚至没有到达应用服务器层。

此错误仅发生在生产环境中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T09:28:41.160

有两件事浮现在脑海。

首先，您可以尝试使用其他浏览器吗？

您是否尝试过清空缓存/cookie？

阅读您的帖子，我觉得可能是这样，因为如果您使用不同的帐户，它们会有所不同。

# c# - 另一个后台工作者

> ID：13972082
> 
> 赞同：2
> 
> 时间：2012-12-20T12:19:00.917
> 
> 标签：c#, wpf, multithreading, backgroundworker

关于如何使用后台工作人员，我查看了[msdn和堆栈交换的类似问题。](http://msdn.microsoft.com/en-us/library/cc221403%28v=vs.95%29.aspx)

基本上，我的函数上传程序完成了实际工作，但我想要一个线程来更改 ui 的元素（进度条等），并在我发送事件以更改进度时。我尝试过的如下（经过严格编辑），它不起作用，并且在调用 runworkerasync 后程序似乎中断了。是否有一些简单的错误或者将我的命令“发送到另一个线程”是错误的？

```
BackgroundWorker backgroundUpload = new System.ComponentModel.BackgroundWorker(); 
```

第一个是调用：

```
 if (backgroundUpload.IsBusy != true)
        {
            backgroundUpload.RunWorkerAsync(work);
                 // a command here for debug purposes (eg a message box) will run
        }
        else
        { //it doesn't go here, this isn't the error} 
```

然后做的工作，它似乎永远不会到达这里。

```
 private void backgroundUpload_DoWork(object sender, DoWorkEventArgs e)
    {
        BackgroundWorker worker = sender as BackgroundWorker;
        e.Result = UploadProgram((Workload)e.Argument, worker, e); //workload is one of my enums
    } 
```

似乎也从来没有到过这里。

```
bool UploadProgram(Workload work, BackgroundWorker worker, DoWorkEventArgs e)
    {
    }

    //also there is progress changed and run worker complete. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T12:22:06.037

您是否将事件处理程序订阅到该事件？

```
BackgroundWorker backgroundUpload = new System.ComponentModel.BackgroundWorker();
backgroundUpload.DoWork += backgroundUpload_DoWork; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T12:22:09.283

愚蠢的问题，但你确定你订阅了这个活动吗？

`backgroundUpload.DoWork += backgroundUpload_DoWork;`

[这是一个完整的例子，下载一个文件](http://msdn.microsoft.com/en-us/library/ms229675.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T12:28:03.780

在您的代码中缺少让 BackgroundWorker 与 UI 通信所需的管道

您需要确保正确设置了这些属性和事件

```
 .....
 backgroundUpload.DoWork += backgroundUpload_DoWork
 backgroundUpload.ProgressChanged += backgroundUpload_ProgressChanged;
 backgroundUpload.WorkerReportsProgress = true;
 ..... 
```

您需要在更新进度条的 UI 线程上运行的事件处理程序

```
private void backgroundUpload_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
    progressBar.Value = (e.ProgressPercentage.ToString() + "%");
} 
```

当您上传文件时，请致电

```
 worker.ReportProgress(percentComplete); 
```

# smooth-streaming - 通过应用程序平滑流式传输

> ID：13972085
> 
> 赞同：1
> 
> 时间：2012-12-20T12:19:08.150
> 
> 标签：smooth-streaming

我可以在不使用浏览器的情况下使用流畅的流媒体在 Android、iOS、Windows 手机上加载音乐和视频吗？（通过申请）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:31:14.427

如果您有兴趣开发将从 Internet 流式传输内容的应用程序，那么您可以使用适用于 WindowsPhone 的[SmoothStreamingClient](http://www.iis.net/downloads/microsoft/smooth-streaming-client-sdk)。iOS 还应该原生支持 SmoothStreaming。

关于Android我不太确定。

# linux - SED - 替换占位符之间的文本

> ID：13972095
> 
> 赞同：1
> 
> 时间：2012-12-20T12:19:30.917
> 
> 标签：linux, bash, unix, sed, terminal

我需要你们中的一些 SED 向导来帮助菜鸟....

我正在使用 SED 替换某些占位符之间的文本。问题是它们位于不同的行上（而 SED 显然讨厌这样）。

我需要替换的文本在“#SO”和“#EO”之间，如下所示：

```
#SO
I need to replace this text
#EO 
```

我想出了这个：

```
sed -ni '1h; 1!H; ${ g; s/#SO\(.*\)#EO Test/1/REPLACEMENT/ p }' foo.txt 
```

我刚刚开始掌握 SED，所以我可能完全错了，但任何建议都会很棒。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T12:31:18.023

`sed`如下图使用：

```
$ cat file
line 1
line 2
#SO
I need to replace this text
#EO
line 3

$  sed -n '/#SO/{p;:a;N;/#EO/!ba;s/.*\n/REPLACEMENT\n/};p' file
line 1
line 2
#SO
REPLACEMENT
#EO
line 3 
```

这个怎么运作：

```
/#SO/{                       # when "#SO" is found
  p                          # print
  :a                         # create a label "a"
    N                        # store the next line
  /#EO/!ba                   # goto "a" and keep looping and storing lines until "#EO" is found
  s/.*\n/REPLACEMENT\n/      # perform the replacement on the stored lines
}
p                            # print 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-18T06:34:10.933

这应该有效：

```
sed -n '/#SO/,/#EO/{s/.*/REPLACEMENT/;}' file 
```

更多详细信息请参见此[链接](https://unix.stackexchange.com/questions/76105/how-to-sed-a-range-of-lines)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T12:31:13.267

您可以使用模式来指定 sed 可以处理的行范围。
见[http://www.grymoire.com/Unix/Sed.html#uh-29](http://www.grymoire.com/Unix/Sed.html#uh-29)

```
sed -n '/#SO/,/#EO/ s/.*/changed/' file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T14:00:55.420

这是你想要的吗：

```
$ cat file
#SO
I need to replace this text
#EO

$ awk '/#EO/{f=0} {print f ? "replacement text" : $0} /#SO/{f=1}' file
#SO
replacement text
#EO 
```

如果没有，请显示一些更具代表性的输入。

# asp.net - 最后接受多次的电子邮件 ID (.com)

> ID：13972096
> 
> 赞同：3
> 
> 时间：2012-12-20T12:19:33.343
> 
> 标签：asp.net, regex, validation, email

我正在一个网站上工作，在那里我编写了以下正则表达式来验证电子邮件 ID，并在正则表达式验证器中使用了该正则表达式。正则表达式是

```
\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)* 
```

它像我预期的那样接受有效的电子邮件 ID。但是当我的 QA 进行负面输入测试时，`ak@gmail.com.com.com.com`它允许并说电子邮件 ID 是有效的。我到处搜索，几乎在各个方面都尝试过解决这个问题。任何人都可以帮我限制像上面这样的邮件ID。实际上，`ak@gmail.co.in`可以接受类似的电子邮件ID，但是当最后一个字符串`.`重复时出现问题。请帮忙。我正在使用点网 2005。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:38:10.753

[RFC822](http://www.ietf.org/rfc/rfc0822.txt)中指定的有效电子邮件格式非常复杂，正则表达式可能不是解析和验证它们[的最佳工具。](http://ex-parrot.com/~pdw/Mail-RFC822-Address.html)如果您仍然想使用正则表达式，您应该考虑检查[Validate email address in Javascript 的答案？](https://stackoverflow.com/questions/46155/validate-email-address-in-javascript)或[在 c# 中使用正则表达式解析电子邮件](https://stackoverflow.com/questions/6056165/parse-email-with-regex-in-c-sharp)。

TL; DR：不要使用正则表达式来验证电子邮件地址。而是使用真正的 RFC822 解析器，并检查域中是否存在 DNS MX 记录，并可能尝试使用可用于验证电子邮件已收到且用户拥有该地址的链接向该地址发送电子邮件.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T12:39:19.643

`ak@gmail.com.com.com.com`在语法上是正确的。但是，没有 MX 记录`gmail.com.com.com.com`，这使其无法访问，但并非无效。

如果您想检查这一点，您应该首先检查语法（使用您拥有的正则表达式），然后查找主机名的 MX 记录。

我还想指出，您使用的正则表达式*非常*糟糕，并且会使许多有效的邮件地址无效。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-20T12:38:50.373

添加以下表达式以检查电子邮件

```
 ValidationExpression="\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*" 
```

# javascript - 在超时、成功返回或超过最大尝试次数时多次尝试函数

> ID：13972097
> 
> 赞同：1
> 
> 时间：2012-12-20T12:19:34.623
> 
> 标签：javascript, settimeout

我想知道是否可以在 Javascript 中调用一个函数最多 N 次来获得一个真实的值。如果返回是 ，它应该立即返回`true`。无论 N 次后的返回值如何，它至少应该返回。

我阅读了一些现有资源，发现这是*不可能*的，但通常使用回调函数完成。是否有任何模式/最佳实践/示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:19:34.623

我想出了以下实现：

```
multitry = function(time, tries, func, callback) {
    counter = 0;
    timer = setInterval(function() {
        ((success = func(++counter)) || (counter >= tries))
            && !clearInterval(timer) 
            && callback(success, counter)      
        ;
    }, time);
}; 
```

例如，如果标签编辑已启用，则每 250 毫秒尝试 30 次，您可以运行以下命令：

```
javascript:(function(){
    multitry = function(time, tries, func, callback) {
        counter  = 0;
        timer    = setInterval(function() {
            counter++;
            var value = func(counter);
            if (value || counter >= tries) {
                clearInterval(timer);
                callback(value, counter);
            }
        }, time);
    };
    multitry(
        250, 
        30, 
        function() {
            return $('#tagnames').length;
        }, 
        function (success) {
            console.log('Tag editor did open:', success);
        }
    );
}()); 
```

# c# - MSBuild 脚本中覆盖的 AfterBuild 目标未执行

> ID：13972101
> 
> 赞同：5
> 
> 时间：2012-12-20T12:19:59.823
> 
> 标签：c#, .net, build, msbuild

我有一个非常简单的 MSBuild 脚本，可以构建一堆 .sln 文件：

```
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <!-- Builds all *.sln files under this repository. -->
    <ItemGroup>
        <SolutionFiles Include="**/*.sln" />
    </ItemGroup>

    <Target Name="Build">
        <MSBuild Projects="@(SolutionFiles)" Targets="Rebuild" />
    </Target>   

    <Target Name="AfterBuild">
        <Message Text="After Build" />
    </Target>

    <Target Name="AfterRebuild">
        <Message Text="After Rebuild" />
    </Target>   

</Project> 
```

AfterBuild/AfterRebuild 目标应该做其他事情，我现在只是在测试它们。

我希望在每个项目构建后触发这些目标，但这些目标不会被触发。

难道我做错了什么？

编辑：由于每个项目都定义了自己的 AfterBuild 目标，我想这种方式不会真正起作用。我尝试将*AfterBuild*和*AfterRebuild*目标放在它们自己的文件 (custom.targets) 中，并使用 / *p:CustomAfterMicrosoftCommonTargets* =custom.targets 运行 MSBuild。这也没有奏效。

有什么建议么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-01-22T20:21:15.607

您必须`<Import Project="MyCommon.proj" />`在`Microsoft.*.targets`. 因为`AfterBuild`定义在`Microsoft.*.targets`

它实际上记录在每个项目文件中。

```
<Import Project="$(MSBuildBinPath)\Microsoft.CSharp.targets" />
<!-- To modify your build process, add your task inside one of the targets below and    uncomment it. -->
Other similar extension points exist, see Microsoft.Common.targets.
<Target Name="BeforeBuild">
</Target>
<Target Name="AfterBuild">
</Target> 
```

像这样导入您的自定义或常见目标：

```
<Import Project="$(MSBuildBinPath)\Microsoft.CSharp.targets" />
<Import Project="$(MyBuildRoot)\Common.targets" /> 
```

你甚至可以覆盖`OutputPath`和`IntermediateOutputPath`. 但它们必须先导入`Microsoft.CSharp.targets`。否则，它们将不会被 中定义的目标正确处理`Microsoft.CSharp.targets`。

## 例子

### Common.props

```
<PropertyGroup>
  <DocumentationFile></DocumentationFile> <!-- disables xml-doc generate -->
  <ProjectRootPath>$(MSBuildThisFileDirectory)</ProjectRootPath>
</PropertyGroup>

<PropertyGroup Condition="$(BuildInOnePlace)!=''">
  <BaseIntermediateOutputPath>$(ProjectRootPath)obj/<BaseIntermediateOutputPath>
  <BaseOutputPath>$(ProjectRootPath)bin/<BaseOutputPath>
</PropertyGroup>

<PropertyGroup Condition="$(BuildInOnePlace)==''">
  <BaseIntermediateOutputPath>obj/<BaseIntermediateOutputPath>
  <BaseOutputPath>bin/<BaseOutputPath>
</PropertyGroup>

<PropertyGroup>
  <OutputPath>$(BaseOutputPath)$(Configuration)/</OutputPath>
  <IntermediateOutputPath>$(BaseOutputPath)$(Configuration)/</IntermediateOutputPath>
</PropertyGroup> 
```

### 公共目标

```
<Target Name="AfterBuild">
  <Message Text="$(ProjectName): $(OutputPath)" />
</Target> 
```

### 子项目1\子项目1.csproj

```
...
<Import Project="../Common.props" />
<Import Project="$(MSBuildBinPath)\Microsoft.CSharp.targets" />
<Import Project="../Common.targets" />
... 
```

### 子项目2\子项目2.csproj

```
...
<Import Project="../Common.props" />
<Import Project="$(MSBuildBinPath)\Microsoft.CSharp.targets" />
<Import Project="../Common.targets" />
... 
```

# dropbox-api - 什么是 REST API 将 Dropbox 帐户与移动设备解除关联？

> ID：13972110
> 
> 赞同：0
> 
> 时间：2012-12-20T12:20:31.337
> 
> 标签：dropbox-api

我想在 J2ME 中实现 Dropbox 应用程序。Dropbox 的授权过程包括嵌入在源代码中的消费者密钥和秘密，将包含在最初的步骤 /oauth/request_token 中。在下一步中，相应的用户名和密码将在 web 中给出并允许/拒绝该帐户的访问。

在这种情况下，如果我们要访问不同的 dropobox 帐户，就会出现问题。

是否有任何 REST API 可以取消此应用与保管箱帐户的链接？是否可以与多个 Dropbox 帐户关联/取消关联？对这个问题有任何想法吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T05:41:33.187

如果您不再想访问关联的帐户，您可以丢弃您为该帐户获得的访问令牌。然后，您可以再次通过 OAuth 流程，您将获得新帐户的新访问令牌。

如果您的应用程序尚未获得“生产”批准，则默认情况下只能与您自己的 Dropbox 帐户一起使用。但是您可以通过访问[dropbox.com/developers/apps](https://www.dropbox.com/developers/apps)，点击您的应用的“选项”，然后点击“启用其他用户”来启用 5 个额外的用户。

如果您想要更多，则必须申请“生产”状态。

# solr - solr 查询未找到单词

> ID：13972111
> 
> 赞同：1
> 
> 时间：2012-12-20T12:20:36.700
> 
> 标签：solr, schema, wildcard

我有一个包含

```
... Sie kennen zentrale Stationen des Lebenswegs Muhammads. • Sie ke ... 
```

我已经这样配置了

```
 <fieldType name="text" class="solr.TextField" positionIncrementGap="100">
        <analyzer>
            <tokenizer class="solr.WhitespaceTokenizerFactory" />
            <filter class="solr.WordDelimiterFilterFactory" 
                    generateWordParts="1" generateNumberParts="0" catenateWords="1"
                    catenateNumbers="1" catenateAll="0" splitOnCaseChange="1"
                    splitOnNumerics="0" stemEnglishPossessive="0"/>
            <filter class="solr.LowerCaseFilterFactory" />
            <filter class="solr.ReversedWildcardFilterFactory" />
            <filter class="solr.LengthFilterFactory" min="1" max="100" />
        </analyzer>
    </fieldType> 
```

但

```
q=volltext:lebenswegs
q=volltext:Lebenswegs 
```

没有结果，为什么？

```
q=volltext:lebensweg* 
```

找到文档

我正在使用 solr 1.4

编辑：

拆分配置

```
 <fieldType name="text" class="solr.TextField" positionIncrementGap="100">
        <analyzer type="index">
            <tokenizer class="solr.WhitespaceTokenizerFactory" />
            <filter class="solr.WordDelimiterFilterFactory" 
                    generateWordParts="1" generateNumberParts="0" catenateWords="1"
                    catenateNumbers="1" catenateAll="0" splitOnCaseChange="1"
                    splitOnNumerics="0" stemEnglishPossessive="0"/>
            <filter class="solr.LowerCaseFilterFactory" />
            <filter class="solr.ReversedWildcardFilterFactory" />
            <filter class="solr.LengthFilterFactory" min="1" max="100" />
        </analyzer>
        <analyzer type="query">
            <tokenizer class="solr.WhitespaceTokenizerFactory" />
            <filter class="solr.WordDelimiterFilterFactory" 
                    generateWordParts="1" generateNumberParts="0" catenateWords="1"
                    catenateNumbers="1" catenateAll="0" splitOnCaseChange="1"
                    splitOnNumerics="0" stemEnglishPossessive="0"/>
            <filter class="solr.LowerCaseFilterFactory" />
            <filter class="solr.LengthFilterFactory" min="1" max="100" />
        </analyzer>
    </fieldType> 
```

导致相同的结果

![分析结果](../Images/1e7e1e7320be0e186b1868d65bd8fd7b.png)

分析器似乎匹配，但我的查询结果为空

查询调试：

```
<lst name="debug">
 <str name="rawquerystring">volltext:Lebenswegs</str>
 <str name="querystring">volltext:Lebenswegs</str>
 <str name="parsedquery">volltext:lebenswegs</str>
 <str name="parsedquery_toString">volltext:lebenswegs</str>
 <lst name="explain"/>
 <str name="QParser">LuceneQParser</str>
 <lst name="timing">
  <double name="time">1.0</double>
  <lst name="prepare">
    <double name="time">1.0</double>
    <lst name="org.apache.solr.handler.component.QueryComponent">
     <double name="time">0.0</double>
    </lst>
    <lst name="org.apache.solr.handler.component.FacetComponent">
     <double name="time">0.0</double>
    </lst>
    <lst name="org.apache.solr.handler.component.MoreLikeThisComponent">
     <double name="time">0.0</double>
    </lst>
    <lst name="org.apache.solr.handler.component.HighlightComponent">
     <double name="time">0.0</double>
    </lst>
    <lst name="org.apache.solr.handler.component.StatsComponent">
     <double name="time">0.0</double>
    </lst>
    <lst name="org.apache.solr.handler.component.DebugComponent">
     <double name="time">1.0</double>
    </lst>
  </lst>
  <lst name="process">
    <double name="time">0.0</double>
    <lst name="org.apache.solr.handler.component.QueryComponent">
     <double name="time">0.0</double>
    </lst>
    <lst name="org.apache.solr.handler.component.FacetComponent">
     <double name="time">0.0</double>
    </lst>
    <lst name="org.apache.solr.handler.component.MoreLikeThisComponent">
     <double name="time">0.0</double>
    </lst>
    <lst name="org.apache.solr.handler.component.HighlightComponent">
     <double name="time">0.0</double>
    </lst>
    <lst name="org.apache.solr.handler.component.StatsComponent">
     <double name="time">0.0</double>
    </lst>
    <lst name="org.apache.solr.handler.component.DebugComponent">
     <double name="time">0.0</double>
    </lst>
  </lst>
 </lst>
</lst> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:27:47.230

可能唯一的原因可能是：-

```
<filter class="solr.ReversedWildcardFilterFactory" /> 
```

[文档](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.ReversedWildcardFilterFactory)：-

> 反转标记以提供更快的前导通配符和前缀查询的过滤器。**将此过滤器添加到索引分析器，而不是查询分析器**。标准 Solr 查询解析器 (SolrQuerySyntax) 将使用它来反转通配符和前缀查询以提高性能（例如，将 myfield: *foo 转换为 myfield:oof*）。为避免冲突和错误匹配，反向标记使用不应出现在索引文本中的前缀进行索引。

因此，它似乎适用于通配符，但不适用于普通查询。
您可以尝试将其从查询分析器中删除并检查。

# python-2.7 - Tkinter（Python）中的while循环

> ID：13972115
> 
> 赞同：0
> 
> 时间：2012-12-20T12:20:45.970
> 
> 标签：python-2.7, tkinter

这只是一直冻结。while 循环没有运行，我认为这就是问题所在

```
from Tkinter import*

def reveal():
    counter=0
    lowest=0
    Stotal=0
    i=0

    cost=float(cost_ent.get())
    if cost>0:
        lowest=cost
        counter+=1
        Stotal=cost+Stotal
    else:
        message="Invalid Number"
        txt.insert(0.0, message)
    while i==0:
        cost=float(cost_ent.get())
        if cost>0:
            counter+=1
            Stotal=cost+Stotal
            if cost<lowest:
                lowest=cost
        else:
            message="Invalid Number"
            txt.insert(0.0, message)

    message="The number of items:",counter,"\n"
    txt.insert (0.0, message)
    message="The subtotal is:",Stotal,"\n"
    txt.insert(0.0, message)
    message="The lowest item is:",lowest,"\n"
    txt.insert(0.0, message)
    message="The discount is:", discount,"\n"
    txt.insert(0.0, message)
    message="Before tax:", Stotal-discount,"\n"
    txt.insert(0.0, message)
    tax=Stotal*tax
    message="The tax is:",tax,"\n"
    txt.insert(0.0, message)
    message="The total is:",Stotal+tax,"\n"
    txt.insert(0.0, message)

    txt.delete(0.0, END)
root=Tk()
root.title("BOXING DAY SALE !!!!!!")
root.geometry("600x400")
app=Frame(root)
app.grid()

instl_lbl=Label(app,text = "Enter item cost")
instl_lbl.grid(row=1, column=1, sticky=W)
cost_ent=Entry(app)
cost_ent.grid(row=1, column=2, sticky=W)

bttn=Button(app, text="Enter", command=reveal)
bttn.grid(row=2, column=2, sticky=W)

txt=Text (app, width=50, height=10, wrap=WORD)
txt.grid(row=4, column=2, sticky=W)

root.mainloop() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-11T20:49:50.847

这段代码是问题所在：

```
while i==0:
    cost=float(cost_ent.get())
    if cost>0:
        counter+=1
        Stotal=cost+Stotal
        if cost<lowest:
            lowest=cost
    else:
        message="Invalid Number"
        txt.insert(0.0, message) 
```

`i`永远不会改变。它始终为零，因此循环永远不会终止。

（您也有一个错误，即您将`0.0`其用作起始索引，但 tkinter 文本索引应该是字符串，并且行号从一开始计数，而不是零。）

# php - php 数据到 jQuery 变量

> ID：13972118
> 
> 赞同：0
> 
> 时间：2012-12-20T12:21:08.687
> 
> 标签：php, jquery

请参阅

```
<?php
if($_POST['submit'])
{
$beg=$_POST['basic'];
}

if($_POST['inter'])
{
$int=$_POST['int'];
}

if($_POST['advance'])
{
$adv=$_POST['adv'];
}
?>

function refreshPrices() {

   var beg=<?php echo $beg; ?>;
   var inte=<?php echo $int; ?>;
   var advn=<?php echo $adv; ?>;

    var currentTotalValue = 0;
    currentTotalValue = currentTotalValue + parseInt(beg) + parseInt(inte) + parseInt(advn);
    $("#results div").each(function() {
        if (!isNaN(parseInt($(this).find("span").text().substring(1)))) {
            currentTotalValue += parseInt($(this).find("span").text().substring(1));
        }
    });

    $("#totalValue").text("$" + currentTotalValue)
} 
```

如果我从 php 添加一个变量并将它们添加到 jQuery 函数中的当前总数，它工作正常，但如果我添加 3 个变量并将它们添加到 jQuery 总数，它就不起作用。在我的 html 中，我有 3 个具有不同隐藏值的按钮，只是为了将它们发布到第二页，无论它将添加到 jQuery 总数中的值如何。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T12:36:06.420

只需使用

```
json_encode(array($val,$val2,$val3)) 
```

并将其打印到您的 js-file 到一个新数组中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T12:29:58.197

它不起作用的原因很简单。您创建了无效的 javascript。

假设`$int = null;`在这种情况下`echo $int;`不会打印任何内容并且`var inte = ;`无效，因此它“不起作用”。只要`$int`和其他变量是用户输入的，结果可能会更糟。因此，首先验证您的输入并具有默认值，以便在内容中您拥有有效的 javascript。

```
var beg=<?php echo (is_string($beg)) ? $beg : defaultValue; ?>; 
```

# java - 尝试获取大型附件时出现异常

> ID：13972121
> 
> 赞同：2
> 
> 时间：2012-12-20T12:21:24.027
> 
> 标签：java, mailing

我正在使用 saaj 通过我的 java servlet（由 apache 和 tomcat 托管）获取附件。

尝试调用时`message.getAttachments();`（其中 message 是 SOAPMessage 对象）：

*   如果附件很小（几 KB） - 它可以工作

*   如果附件很大（几 MB） - 它会引发以下异常：

    ```
     java.lang.RuntimeException: org.jvnet.mimepull.MIMEParsingException: java.io.IOException: The system cannot find the path specified
        at com.sun.xml.messaging.saaj.soap.MessageImpl.getAttachments(MessageImpl.java:826)
        at MyCode.MyServlet.doPost(MyServlet.java:215)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:710)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:263)
        at org.apache.jk.server.JkCoyoteHandler.invoke(JkCoyoteHandler.java:190)
        at org.apache.jk.common.HandlerRequest.invoke(HandlerRequest.java:283)
        at org.apache.jk.common.ChannelSocket.invoke(ChannelSocket.java:767)
        at org.apache.jk.common.ChannelSocket.processConnection(ChannelSocket.java:697)
        at org.apache.jk.common.ChannelSocket$SocketConnection.runIt(ChannelSocket.java:889)
        at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:690)
        at java.lang.Thread.run(Unknown Source)
    Caused by: org.jvnet.mimepull.MIMEParsingException: java.io.IOException: The system cannot find the path specified
        at org.jvnet.mimepull.MemoryData.createNext(MemoryData.java:93)
        at org.jvnet.mimepull.Chunk.createNext(Chunk.java:59)
        at org.jvnet.mimepull.DataHead.addBody(DataHead.java:82)
        at org.jvnet.mimepull.MIMEPart.addBody(MIMEPart.java:192)
        at org.jvnet.mimepull.MIMEMessage.makeProgress(MIMEMessage.java:235)
        at org.jvnet.mimepull.MIMEMessage.parseAll(MIMEMessage.java:176)
        at org.jvnet.mimepull.MIMEMessage.getAttachments(MIMEMessage.java:101)
        at com.sun.xml.messaging.saaj.packaging.mime.internet.MimePullMultipart.parseAll(MimePullMultipart.java:118)
        at com.sun.xml.messaging.saaj.packaging.mime.internet.MimePullMultipart.parse(MimePullMultipart.java:129)
        at com.sun.xml.messaging.saaj.packaging.mime.internet.MimeMultipart.getCount(MimeMultipart.java:199)
        at com.sun.xml.messaging.saaj.soap.MessageImpl.initializeAllAttachments(MessageImpl.java:1384)
        at com.sun.xml.messaging.saaj.soap.MessageImpl.getAttachments(MessageImpl.java:824)
        ... 22 more
    Caused by: java.io.IOException: The system cannot find the path specified
        at java.io.WinNTFileSystem.createFileExclusively(Native Method)
        at java.io.File.createTempFile(Unknown Source)
        at java.io.File.createTempFile(Unknown Source)
        at org.jvnet.mimepull.MemoryData.createNext(MemoryData.java:87)
        ... 33 more 
    ```

我该如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T13:42:50.380

产生异常的 MimePull 的源代码是这样说的：

```
if (!config.isOnlyMemory() && dataHead.inMemory >= config.memoryThreshold) {
         try {
             String prefix = config.getTempFilePrefix();
             String suffix = config.getTempFileSuffix();
             File dir = config.getTempDir();
             File tempFile = (dir == null)
                     ? File.createTempFile(prefix, suffix) // here your code crashes
                     : File.createTempFile(prefix, suffix, dir);
             LOGGER.fine("Created temp file = "+tempFile);
             dataHead.dataFile = new DataFile(tempFile);
         } catch(IOException ioe) {
             throw new MIMEParsingException(ioe);
         } 
```

它尝试打开一个临时文件，因为已超过内存大小阈值。
它被称为

```
at MyCode.MyServlet.doPost(MyServlet.java:215) 
```

看起来您正在使用 SAAJ 接收消息并启用了 MimePull 插件（使用`-Dsaaj.use.mimepull=true`标志）。它应该允许接收更大的文件，因为 MimePull 实现使用临时文件作为后备。

现在似乎坏消息是，您无法通过您的 SAAJ 配置来配置 MimePull 阅读器。好消息可能是您可以`File.createTempFile(...)`通过系统属性调整逻辑`java.io.tmpdir`。

尝试从`-Djava.io.tmpdir=/path/to/tmpdir`.

否则可能会尝试使用[MimePull](http://mimepull.java.net/)直接使用消息，我自己从来没有这样做过，所以不要问我这个问题。;-)

**编辑：**或者如果您不希望附件吸收所有内存，则
通过设置完全关闭 MimePull 。`-Dsaaj.use.mimepull=false`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-08T06:29:03.747

我们通过将 Jersey-Libs 版本从 1.13 更改为 1.19 解决了这个问题。看来1.13有问题。

# vmware - VMware vSphere ESXi 5.1 安装是否会擦除磁盘中的所有数据？

> ID：13972128
> 
> 赞同：0
> 
> 时间：2012-12-20T12:21:49.360
> 
> 标签：vmware, virtualization, vsphere, esxi

分配给我的一项任务是使用 VMware vSphere 产品（ESXi 和 vSphere Client）对实验室进行虚拟化。我花了几天时间了解有关 vSphere 的知识，最后决定亲自动手……安装开始时，我非常小心地进行，并从安装程序中收到了以下警告消息：

警告：此磁盘将被重新分区。

我从这条警告消息中了解到，我的所有硬盘都将被重新分区并明显格式化，并且我的所有数据都将丢失。

我正要确认，突然意识到“重新分区”意味着我在磁盘上的所有数据都将消失，这是我真正不喜欢面对的。

我的问题是我想在一台具有单个硬盘和 4 个分区（3 个主分区，1 个扩展分区）的机器上安装 VMware ESXi 5.1。所有三个主分区都托管一个操作系统；意味着每个主分区上已经安装了 3 个操作系统。

所以我想在一个主分区上安装 VMware ESXi，我准备在那个主分区上丢失操作系统，但我不想在扩展分区上丢失我的其他 2 个操作系统和数据。

如何在不丢失数据的情况下将 VMware ESXi 5.1 与其他操作系统一起安装？？？可能吗？？？如果是，请指导我，如果不是，请给我一些建议。

我在谷歌搜索后来到这里。;-(

万分感谢…………

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T12:44:07.930

不幸的是，如果您只有一个本地磁盘，ESX 安装将重新格式化并重新分区该驱动器。 **不过也有一些好消息！**

相反，您可以下载 ESXi，它是一个免费的虚拟机管理程序，被认为是“可安装的”。因此，您可以将 ESXi 软件放到外部 HD 或 USB 记忆棒之类的东西上，您将能够使用您选择的任何外部驱动器启动 ESXi 服务器。这还允许您将本地磁盘上的分区保留在原位，同时将该磁盘的剩余空间用于 VM 数据存储。

这是来自 VMware 的一个很棒的链接，它向您展示了如何做到这一点，尽情享受吧！

[http://kb.vmware.com/selfservice/microsites/search.do?language=en_US&cmd=displayKC&externalId=1020655](http://kb.vmware.com/selfservice/microsites/search.do?language=en_US&cmd=displayKC&externalId=1020655)

# emacs - 如何更改 emacs 用作文件/文件夹指示器的图像

> ID：13972129
> 
> 赞同：0
> 
> 时间：2012-12-20T12:21:51.757
> 
> 标签：emacs, elisp

我想更改 Emacs 用来指示文件夹和文件的图标（在脏树中）。有关示例，请参见下图：

[我希望图标看起来如何的示例 http://cezar.halmagean.ro/snaps/dirtree.png](http://cezar.halmagean.ro/snaps/dirtree.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-05T01:46:25.113

虽然我看不到您引用的图像，但要使用 ASCII 而不是文件夹图标 - 打开 ditree.el 并将 'folder' 替换为 'ascii'

```
(define-derived-mode dirtree-mode tree-mode "Dir-Tree"
  "A mode to display tree of directory"
  (tree-widget-set-theme "folder")) 
```

像这样：

```
(define-derived-mode dirtree-mode tree-mode "Dir-Tree"
  "A mode to display tree of directory"
  (tree-widget-set-theme "ascii")) 
```

另见：[http ://emhacks.sourceforge.net/tw-shots.html](http://emhacks.sourceforge.net/tw-shots.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T20:23:15.913

你会想要自定义`tree-widget-theme`或摆弄一些`tree-widget-themes-*`变量，也许为它创建你自己的主题（它的主题只是一个包含诸如“open.png”、“leaf.png”之类的文件的目录，......

# symfony - 教义计数器缓存

> ID：13972138
> 
> 赞同：1
> 
> 时间：2012-12-20T12:22:22.387
> 
> 标签：symfony, doctrine-orm

在 Doctrine 中实现计数器缓存的最佳方法是什么？

在 Ruby on Rails 中：[http ://railscasts.com/episodes/23-counter-cache-column](http://railscasts.com/episodes/23-counter-cache-column)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:50:17.197

我认为目前没有办法做到这*一点*。

如果必须这样做，我会首先尝试使用类似于[Gedmo 的 Doctrine Extensions 的](https://github.com/l3pp4rd/DoctrineExtensions)[事件侦听](https://doctrine-orm.readthedocs.org/en/latest/reference/events.html)器。

每当从关系中添加或删除实体时，侦听器都会更新负责跟踪计数的字段。

# jquery-ui - jQuery ui 自动完成组合框下拉位置

> ID：13972139
> 
> 赞同：2
> 
> 时间：2012-12-20T12:22:22.277
> 
> 标签：jquery-ui, drop-down-menu, autocomplete, combobox, position

我在我的项目中使用 jQuery ui 自动完成组合框。此小部件或插件位于页面的“粘滞页脚”。这工作正常。由于自动完成组合框位于页脚条上，因此当自动完成下拉菜单打开时，它会跳出页面。

请看这个截图[http://prntscr.com/mpa11](http://prntscr.com/mpa11)

我希望这个下拉菜单应该出现在输入字段的顶部而不是输入字段的底部。

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T09:06:25.940

好吧，没有人回答，但我已经解决了这个问题。我刚刚在组合框的源文件中添加了位置属性，它解决了这个问题。

```
 position: {
                        my: "left top",
                        at: "left bottom",
                        collision: "fit flip"
                    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-24T07:07:18.323

完美，这对我有帮助。只是为了更清楚一点，位置是自动完成的参数：

```
this.input = $( "<input>" )
    .insertAfter( this.element )
      .val( value )
      .attr( "title", "" )
      .addClass( "custom-combobox-input" )
      .autocomplete({
          position:{
            collision:"fit flip"  
          },
        delay: 0,
        minLength: 0,
          select:function(event,ui){
            this.value = ui.item.value;
            if(that.options.script){
                        that.options.script();
                    }
            $(this).blur();
          },search:function(event,ui){
            if(event.originalEvent){
                            if(that.options.script){
                            that.options.script();
                        }
                    }
                      },
        source: this.options.source?this.options.source:[]
      }).focus(function(){
          $(this).autocomplete( "search", "" );
      })
      .tooltip({
        tooltipClass: "ui-state-highlight"
      }); 
```

# php - php代码在修改后将从mysql数据库填充的数据行插入其他mysql数据库

> ID：13972145
> 
> 赞同：0
> 
> 时间：2012-12-20T12:22:34.977
> 
> 标签：php

我正在尝试制作考勤表。在我的代码中，我从现有数据库中检索名称并使用出勤选择下拉列表填充到 html 表中。填充下拉列表后，html 表中的所有数据会自动保存到新数据库中，而无需选择提交按钮。并且考勤状态在数据库中显示为空值，但其他字段保存成功。请仔细阅读我的代码并提出您宝贵的建议以纠正问题。

```
<form enctype="multipart/form-data" name="f1" method="POST" ACTION="<?php echo $PHP_SELF;?>">

//call from the previous php page
    <?  $back_page ="recordentry.php";
    $date=$_POST['date'];
$course=$_POST['course'];
$period=$_POST['period'];
$batch=$_POST['batch'];
$subject=$_POST['subject'];
if(empty($_POST['other']))
{
$faculty=$_POST['faculty'];
}
else

{
    $faculty=$_POST['other'];
}
?>
<p>Current Date & Time : <? echo $date ?></p>

<?

$db="contact";
//mysql_connect(localhost,$_POST['username'],$_POST['pass']);
$link = mysql_connect("localhost", "root", "");
if (! $link)
die("Couldn't connect to MySQL");

mysql_select_db($db , $link)
or die("Couldn't open $db: ".mysql_error());

$result=mysql_query("SELECT name,uic FROM student where batch='$batch' AND course='$course' order by name")
or die("SELECT ERROR: ".mysql_error());
$userinfo = array();
echo "<table border='1' align='center'><tr><th>Name</th><th>Unique Identification Code</th><th>Attendance(select only the Absentees)</th></tr>";

while($row = mysql_fetch_array($result)){
//Display the results in different cells

echo "<tr><td align=center>" . $row['name'] . "</td><td align=center>" . $row['uic'] . "</td><td align=center><select name='attendance' style='background-color:#FFC'>
      <option>Present
       <option>Absent
       </select></td></tr>";
//$userinfo = array('name' => $row['name'], 'uic' => $row['uic'], 'attendance' => $row['attendance']);
$row_name=$row['name'];
$row_uic=$row['uic'];
$row_attn=mysql_real_escape_string($_POST['attendance']);
$userinfo[] = array("name"=> $row_name , "uic"=> $row_uic, "a_status"=> $row_attn);
}
//echo"<tr><td><input type='submit' value='Submit' name='submit_button' />";
echo"</table>";

mysql_close($link);
  //form HAS been submitted
?>

<table align="center">
<tr><td><input type="submit" value="Submit" name="submitbtn" ></td><td><input type="reset" value="reset"></td></tr>
</table>

</form>

<?
if($_SERVER['REQUEST_METHOD']=='POST')
{

 foreach ($userinfo as $value)

 {
$name = $value[name];  
 $uic = $value[uic];  
 $a_status = $value[a_status];

$db="contact";
$link = mysql_connect("localhost", "root", "");
//$link = mysql_connect("localhost",$_POST['username'],$_POST['password']);
if (! $link)
die("Couldn't connect to MySQL");
mysql_select_db($db , $link) or die("Select Error: ".mysql_error());

$result=mysql_query("INSERT INTO attendance(date, course, period, batch, subject, faculty, name, uic, attendance) VALUES 
('$date', '$course', '$period', '$batch', '$subject', '$faculty', '$name', '$uic', '$a_status')")
  or die("Insert Error: ".mysql_error());

mysql_close($link);

  }

}
?> 
```

除考勤外的所有数据都成功保存到数据库中。出勤给出空值。同样，在单击提交按钮之前保存数据。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:28:11.493

我不确定这是否是您要查找的内容，但是您在哪里写：

```
$a_status = $value[a_status]; 
```

应该是

```
$a_status = $value['a_status']; 
```

此外，您的 html 是：

```
<select name='attendance' style='background-color:#FFC'>
    <option>Present
    <option>Absent
</select> 
```

但它应该是：

```
<select name='attendance' style='background-color:#FFC'>
    <option value="present">Present</option>
    <option value="absent">Absent</option>
</select> 
```

使用选择框时，'value' 属性是 $_POST['attendance'] 中的值，而不是 'option' 标记内的值。

此外，此代码不安全，因为它使用 SQL 注入。

此外，您可以将表单发送到您的 POST 逻辑的不同页面。将两者结合在一个文件中可能会令人困惑。

一个文件来读取数据库并输出数据。

一个文件来处理表单逻辑并插入数据。

使用以下命令将发布数据发送到单独的文件：

```
<form action="/path/to/file.php"></form> 
```

你也应该把你的数据库连接放在一个函数中，比如：

```
function db_connect()
{
    $link = mysql_connect("localhost", "root", "");

    if (! $link)
        die("Couldn't connect to MySQL");

    mysql_select_db($db , $link)
        or die("Couldn't open $db: ".mysql_error());

    return $link;
} 
```

并像这样使用它：

```
$db_handle = db_connect();

$result = mysql_query("SELECT name FROM student", $db_handle); 
```

这样您就不会一遍又一遍地重复相同的代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T13:28:13.820

乍一看，我猜问题是这样的：

```
$name = $value[name];
$uic = $value[uic];
$a_status = $value[a_status]; 
```

您应该像这样访问数组的值：

```
$name = $value['name'];
$uic = $value['uic'];
$a_status = $value['a_status']; 
```

# android - android无法从对话框中获取文件大小

> ID：13972147
> 
> 赞同：5
> 
> 时间：2012-12-20T12:22:39.337
> 
> 标签：android, dialog

我有以下方法来确定文件大小：

```
 public static long getSize(String path) {

    File file = new File(path);

    if (file.exists()) {
        long size = file.length();

        return size;
    } else {
        Log.e("zero size", "the file size is zero!");
        return 0;

    } 
```

现在我想用以下方法显示一个对话框（代码不完整）：

```
 public void gimmeDialog(String path_to_file) {

    final Dialog dialog = new Dialog(this);
    dialog.setContentView(R.layout.dialog);
    dialog.setTitle("Confirm");

    TextView text = (TextView) dialog.findViewById(R.id.txtUploadInfo);

    Button dialogButtonOK = (Button) dialog.findViewById(R.id.btnDialogOK);

    long uploadSize = Send.getSize(path_to_file) / 1024 / 1024;

    text.setText("You are about to upload "
            + Long.toString(uploadSize)
            + " MB. You must accept the terms of service before you can proceed");

    dialogButtonOK.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            dialog.dismiss();
        }
    });

    dialog.show();
} 
```

问题是 uploadSize 始终为零，尽管方法 getSize() 在对话框函数外部调用时返回正确的文件大小。给定的字符串路径是正确的。可能是什么原因？

PS发送是我的班级名称

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T12:38:37.387

您正在进行整数除法，如果分子小于分母，则结果为 0。

尝试双除法：

```
double uploadSize = 1.0 * Send.getSize(path_to_file) / 1024 / 1024; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T12:33:47.903

调用 getSize() 并在对话框函数外部设置一个变量，该变量可在对话框函数内部访问。或者将其作为变量传递给函数。

这并不能真正解释问题，但确实解决了问题。

# html - 使用隐藏的 div 进行布局

> ID：13972148
> 
> 赞同：1
> 
> 时间：2012-12-20T12:22:40.303
> 
> 标签：html, css, css-position, positioning

我只是想知道为了获得我想要的布局而放置空 div 是否有任何缺点。有没有其他方法可以隐藏 div，因为我知道它会增加混乱的代码。

有关我要演示的内容，请参见下面的图片：

![在此处输入图像描述](../Images/b8ec54d055134acc6bca7e454eae11d1.png)

![在此处输入图像描述](../Images/fbe81476295ffd1b50ec8a141d41d24d.png)

如您所见，左侧的项目符号点与 h2 元素处于同一水平，但是当我在项目符号点之前添加 h2 元素时，它会将它们降低到段落的水平（这就是我想要的）。显然我可以使这个 h2 元素不可见，从而达到我想要的效果，但是有没有更专业的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T12:23:59.680

但你为什么要这样做？房产有什么`margin-top`用？

我在这里简要介绍一下，你应该先学习`floats`而不是 go for `positioning`，还要学习什么`block`和`inline`元素，你有很多 CSS 的东西，`margins,`paddings 等等，看看[box-model](http://css-tricks.com/the-css-box-model/)，这样你就不会了以后不要拉头发

如果你想坚持一个肮脏的标记而不是空的`div's`并且`br`是你的选择，但是你不会从顶部得到一个特定的高度，`br`所以你需要使用一个空的 div 但不要使用这个

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T12:26:13.360

如果你想在没有 CSS 的情况下添加额外的空间，你可以使用`<br/>` 标签——它绝对比空的 div 好得多，这是混乱和不好的做法。

不过，CSS 确实是最好的方法。

给 h2 一个宽度，使其占据整个行的其余部分。然后项目符号列表将自动下降到与左侧段落相同的高度。
或者，给项目符号列表一个 margin-top 或 padding-top。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T12:26:30.580

有两个建议可以快速解决：

1.  项目符号点元素上的 Margin-top 或。

2.  添加一个带有不间断空格的 H2，例如

    ```
     <h2>&nbsp;</h2> 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T15:17:30.813

我建议您使用`margin-top`第二个 div 或`margin-bottom`第一个。

例子：如果隐藏的 div 的高度是 100px，你最好写：`<div style="margin-bottom:100px">...</div>`

# c# - 在 C# 中使用 Word 互操作中的 TCSCConverter

> ID：13972150
> 
> 赞同：2
> 
> 时间：2012-12-20T12:22:52.387
> 
> 标签：c#, ms-word

我试图制作一个将所选文本转换为繁体中文的按钮

```
private void totradbutton_Click(object sender, RibbonControlEventArgs e)
{
    Word.Range currentRange = Globals.ThisAddIn.Application.Selection.Range;
currentRange.TCSCConverter(Word.WdTCSCConverterDirection.wdTCSCConverterDirectionSCTC,true,true); 
} 
```

但是，当按钮在某些选定文本上运行时，文本不会更改为繁体中文。我已经尝试过简化、传统和混合，但仍然没有任何反应。我已经放了一个消息框来检查代码是否运行，它是。的返回类型`TCSCConverter`是`void`，因此它不返回转换后的形式。

手册页 [http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.range.tcscconverter.aspx](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.range.tcscconverter.aspx)似乎不太有启发性。

currentRange.text 似乎没有任何变化

请有人向我解释我的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:09:27.890

虽然我无法确定它为什么不起作用，但一种解决方法是使用Assembly `strConv`中的功能：</p>`Microsoft.VisualBasic`

```
currentRange.Text = Microsoft.VisualBasic.Strings.StrConv(currentRange.Text, VbStrConv.TraditionalChinese); 
```

这对于已经转换的文本或分段符似乎没有问题，尽管可能还有其他我没有发现的问题。

# scheme - 方案中的快速排序

> ID：13972151
> 
> 赞同：0
> 
> 时间：2012-12-20T12:22:55.803
> 
> 标签：scheme

请问，我的代码有什么不好的？我该如何修改？

```
(define pivot (lambda (l)
  (cond ((null? l) 'done)
    ((null? (cdr l)) 'done)
        ((<= (car l) (cadr l)) (pivot (cdr l)))
        (#t (car l)))))

(define (quicksort l)
 (let ((piv (pivot l)))
   (if (equal? piv 'done) l
     (let ((parts (partition piv l () ())))
       (append (quicksort (car parts)) 
               (quicksort (cadr parts))))))) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T14:03:09.600

一些 Scheme 解释器定义了一个`partition`过程，但它接收一组不同的参数，所以我假设您定义了自己的版本。`quicksort`问题中显示的实现*可能*有效，但该`partition`过程几乎肯定是错误的。没有代码很难说...

# android - Jquery mobile中的背景图像

> ID：13972154
> 
> 赞同：2
> 
> 时间：2012-12-20T12:23:01.200
> 
> 标签：android, jquery, html, jquery-mobile

我正在为安卓手机创建一个网络 abb。我有一张图片，它应该是所有页面的背景。我必须对所有页面使用幻灯片过渡。如果我在 CSS 中添加背景 url 选项，它不会覆盖整个屏幕。有什么方法可以使图像完全适合所有屏幕分辨率。

请帮帮我。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:38:33.790

我建议你使用css背景。

尽管如此，还有其他解决方案，但它们不会在旧的移动设备上运行（或运行良好）。原因，每个 jquery 解决方案都使用 position:fixed ，这可能会导致较旧的 android 设备出现问题。

如果您仍然愿意尝试看看这个：

[jQuery插件1](http://www.buildinternet.com/project/supersized/)

[jQuery插件2](https://github.com/weightshift/The-Personal-Page)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T12:27:32.217

当你设置你的 img 背景时试试这个。告诉我它是否有效。

```
background-size:100% 100%; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T12:34:00.017

在css中设置这样的背景大小......

```
background-size: cover; 
```

它会自动适应屏幕。

# android - 从IOS到安卓的步进器

> ID：13972164
> 
> 赞同：0
> 
> 时间：2012-12-20T12:23:28.800
> 
> 标签：android, button

我有一个适用于 iphone 的应用程序，我必须为 android 制作它，我需要制作一个步进器，如图所示，我知道我可以制作两个按钮来增加和减少值，但我想要一些已经存在的东西，如果它存在![在此处输入图像描述](../Images/7c0b34c80e6b6ecafdc94be71800e2f0.png)

(onclick + value++ ,onclick - value--)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T12:30:06.013

看看 ZoomButtonsController 小部件，它有外观，你只需要修改[bahaviour 如何使用 Android ZoomButtonsController？](https://stackoverflow.com/questions/4358691/how-do-i-use-android-zoombuttonscontroller)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-17T14:14:11.463

我不知道这是否与您现在的用例有关。但很长一段时间以来，我一直在寻找非常相似的东西。[在这里](https://github.com/DanielMartinus/Stepper-Touch)，我找到了一个实现材料设计并很好地解决我的用例的库。

希望这对您有所帮助。或其他人。

# c++ - 以编程方式按 Win+X、Alt-Tab

> ID：13972165
> 
> 赞同：6
> 
> 时间：2012-12-20T12:23:29.750
> 
> 标签：c++, windows-8, keyboard, sendinput

我正在尝试在 Windows 8 上模拟 Win+X 的按键事件，该事件应该会弹出一个小菜单，但我无法通过使用 SendInput 使其工作。对于任何其他组合键（例如 Win+R、Win+E、Win+D），它都有效，但不适用于 Win+X。我注意到 Synergy+ 有同样的问题，但 Windows 屏幕键盘没有。我还查看了屏幕键盘使用的 SendInput 参数，但如果我在应用程序中使用完全相同的参数，我仍然无法获得菜单。

所以我的问题是，我该如何让它工作？或者有没有其他方法来显示这个菜单？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T15:15:03.117

我最近在我们的应用程序中添加了对此的支持。很高兴我们击败了我们的竞争对手！

Windows 8 中有新的 UIPI 限制。最常用的被阻止快捷方式是`Alt`+ `Tab`，因此您需要解决此问题。

您必须`uiAccess="true"`在清单中标记您的二进制文件。（有关如何执行此操作的更多详细信息，请 google。）此清单可防止启动二进制文件，除非使用 Microsoft 批准的代码签名证书进行签名并安装在“安全位置”（system32 或 Program Files/Program Files (x86)） .

如果您从任何助手启动程序： uiAccess 二进制文件无法`CreateProcess`从中等完整性进程启动（清单将其标记为需要“高”完整性）。相反，最简单的方法是使用`ShellExecute`“open”启动它，让 shell 提升它。如果 using `CreateProcessAsUser`，则必须设置`TokenUIAccess`为 1 using `SetTokenInformation`，否则启动将失败。

最后的附带条件：请注意，uiAccess 非常严格地限制了进程可以执行的操作。您无法从正常（中等完整性）进程接收 UI 输入，因此其他应用程序无法与您的窗口交互。如果您尚未遵循将 UI 分离到单独进程中的良好做法，那么这将是这样做的一个很好的理由。或者，可以将需要 uiAccess 的任务放入一个小的、自包含的辅助二进制文件中，并与非 UI 进程完全分离。您的主应用程序可以将其作为高完整性帮助进程运行，该进程会根据需要发送指令以执行这些特定任务（例如`SendInput`）。

最后，`SendInput`会工作。

# android - Android 定时器任务线程安全

> ID：13972173
> 
> 赞同：4
> 
> 时间：2012-12-20T12:23:58.753
> 
> 标签：android, multithreading

我有一个启动新线程的类，它们使用处理程序在 ui 线程中写入一个数组，它们是线程安全的。

如果我从计时器任务启动这些线程怎么办，它们仍然是 ui 线程安全的吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T12:27:19.333

如果`Handler`对象绑定到 UI 线程，则更新中的数组是安全的`Handler`（假设数组也绑定到 UI 线程）。

检查[`Handler`文档](http://developer.android.com/reference/android/os/Handler.html)，尤其是这部分：

> Handler 允许您发送和处理与线程的 MessageQueue 关联的 Message 和 Runnable 对象。每个 Handler 实例都与单个线程和该线程的消息队列相关联。当您创建一个新的处理程序时，它会绑定到创建它的线程的线程/消息队列——从那时起，它会将消息和可运行对象传递到该消息队列并在它们从消息中出来时执行它们队列。
> 
> 处理程序有两个主要用途：（1）安排消息和可运行文件在未来某个时间点执行；(2) 将要在与您自己的线程不同的线程上执行的操作排入队列。

它声明`Handler`代码在它所属的线程上执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T12:28:16.700

如果您运行的线程是正确的线程安全的，那么无论从 UI 线程、an`AsyncTask`还是`TimerTask`.

# c# - 在基于 LAN 的 Windows 应用程序中为每个用户维护 UserLog

> ID：13972178
> 
> 赞同：0
> 
> 时间：2012-12-20T12:24:14.993
> 
> 标签：c#, .net, winforms, desktop-application

我有一个基于 LAN 的应用程序，并且有一个维护每个用户活动的概念，该用户日志应该只对管理员可见，并且要维护每个用户的插入、更新和删除活动的记录。

我已经开发了整个应用程序，但我仍然对如何在我的应用程序中开发这个概念感到困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:04:27.520

我认为您正在寻找数据库中的历史记录。 [这个 SO question](https://stackoverflow.com/questions/7950768/logging-changes-for-every-column-in-a-table)有很好的答案和其他链接，可以帮助您入门。

# javascript - 使用 Javascript 获取文档模式

> ID：13972182
> 
> 赞同：0
> 
> 时间：2012-12-20T12:25:02.123
> 
> 标签：javascript, internet-explorer

我想获得 Internet Explorer 的文档模式。目前我尝试过这样的事情：

```
navigator.userAgent.indexOf("MSIE 7.0"); 
```

这确实有效，当 IE 启动并且它处于文档模式 7.0 时

但如果我在浏览器中将其更改为 8.0，例如，该方法

```
navigator.userAgent; 
```

仍然得到结果，在文档模式 7.0 中显示。所以即使我说

```
navigator.userAgent.indexOf("MSIE 8.0"); 
```

从文档模式 7.0 切换到 8.0 后，此索引将为 -1。

似乎我无法将 navigator.userAgent 更改为 7.0 之后的任何其他内容，因为它总是以这个值启动。即使这样，如果我添加这样的元标记

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/> 
```

对于 .html，它确实以文档模式 7.0 启动，并且在切换文档模式后，一旦 navigator.userAgent 更改为文档模式 8.0，但它保持此模式。

所以现在我的问题是，有没有办法获得 Internet Explorer 的文档模式，即使他在旁边时确实改变了它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T12:42:21.513

改变`browser mode`除了`document mode`。Navigator 对象提供有关当前浏览器的信息。[您可以在此处](http://blogs.msdn.com/b/ie/archive/2010/10/19/testing-sites-with-browser-mode-vs-doc-mode.aspx)找到更多信息。

# c - 当用户输入“。”时停止`scanf` 点

> ID：13972184
> 
> 赞同：0
> 
> 时间：2012-12-20T12:25:02.080
> 
> 标签：c, scanf, getch

我在搞乱下面的函数，我想在用户输入点字符时结束输入捕获。似乎`getche()`没有做它打算做的事情：

```
void Encode(FILE *fp)
{
    char chWord[100]; 
    char *chP;

    printf("Enter a word or a sentence, close it by a \".\"\r\n");
    scanf("%s",chWord);

    if (chWord != '.')
    {
        for (chP = chWord; *chP != '\0'; chP++) //to print each digit till end of string \0
        {
            printf("%d ",*chP+10);
            fprintf(fp, "%d ",*chP+10);     
        }
    }
} 
```

**更新**

看来我还不够清楚。我想要做的是当用户输入一个点时它应该像按下 ENTER 键一样，所以程序进入下一步。某种模拟 ENTER 键。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T12:29:28.807

```
 if (chWord != '.') 
```

应该

```
 if (*chWord != '.') 
```

您正在将 char 指针与 char 进行比较，而不是将 char 与另一个 char 进行比较。

请注意，此代码写入输入“.123”的方式将跳过打印段。不确定这是否适合您。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T12:29:39.230

函数族`scanf`接受（负）字符集作为格式说明符。

您可以`scanf("%[abc]", chWord);`只接受由字母 abc 组成的字符串。

您还可以指定*不*接受哪些字符。所以`scanf ("%[^.]", chWord);`将接受一个由点组成的*字符串*。

**编辑**

我忘了提到，点将保留在输入流缓冲区中，因此要在其`scanf`自身期间读取并忽略它（而不是刷新缓冲区或执行 a `getchar`），只需将其添加到格式字符串的末尾即可。IE：

```
scanf ("%[^.].", chWord); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T13:03:59.287

好的，根据您的更新退出整个答案...

答案是**否定**的，没有办法用 scanf 或标准 C 中的任何东西来做你想做的事情。您正在尝试做的是平台（可能还有编译器）特定的。

如果你想把它`'.'`当作一个回车键，你必须自己做魔法。所以，既然你没有提到你是否使用任何特定的操作系统或编译器，我会给你第一个想到的例子。

这适用于 Windows MS VS：

```
#include <Windows.h>
#include <conio.h>
#include <stdio.h>
#include <stdlib.h>

int main()
{
    char key = 0;
    int counter = 0;
    char chWord[100] = {0};
    while(counter < 100) {
       while(!_kbhit()) {    //While no key has been hit
           Sleep(1);         //Sleep for 1 ms
       }
       key = _getch();       //Get the value of the key that was hit
       if(key == '.')        //if it was a .
         break;              //act as if it were an "enter" key and leave
       else
         chWord[counter] = key;
       counter++;
    }
    chWord[99] = '\0';
    printf("The string was %s\n", chWord);
    return 0;
} 
```

# c# - 正则表达式帮助查找文本未在 xml 中链接

> ID：13972186
> 
> 赞同：1
> 
> 时间：2012-12-20T12:25:06.103
> 
> 标签：c#, regex

我需要一些正则表达式帮助在 c# 中查找非链接章节

在下面的示例中，第 7 章已链接，但第 6 章和第 II 章未链接我想找到未链接的人（代码中列出了其他一些情况）。

xml 示例：

```
...
<p class="text_noindent"><a id="page_47"/>Much of this will
be explained further in the <a xref="ch007">chapter 7</a>context of the charity fashion
show described in Chapter 6\. Chapters II</p>
... 
```

我找到这个的代码是

```
Regex.Matches(chk.Replace("(", "").Replace(")", ""), "[^<>/\"]\\s*(figure|table|fig.|tab.|chapters|chapter|chap.|cap.|part|figures|tables|chapters|figs.|tabs.)\\s[0-9]+[^a-zA-Z0-9]", RegexOptions.IgnoreCase);
Regex.Matches(chk.Replace("(", "").Replace(")", ""), "[^<>/\"]\\s*(figure|table|fig.|tab.|chapters|chapter|chap.|cap.|part|figures|tables|chapters|figs.|tabs.)\\s(XC|XL|L?X{0,3})(IX|IV|V?I{0,3})[^a-zA-Z0-9]", RegexOptions.IgnoreCase); 
```

但它的选择选项，如 scape 1、stab stable ... 等等，任何人也可以建议我最好的解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:41:07.613

使用正则表达式时，您应该像这样使用@：

```
String _s = @"\s*"; 
```

例如。

我让您相应地更改自己的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T13:38:07.843

选择整个单词的更好选择是用 包围模式`\b`，像这样

```
\b(chap|chapter|etc)\s+[0-9]+\b 
```

这也将排除标点符号等，因此您无需排除`[^<>"]`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T12:35:39.553

很可能您正在尝试使用 匹配空格`\s*`，但 Visual Studio 向您显示错误“无法识别的转义序列”，因此您以这种方式对其进行了转义`\\s*`，这意味着完全不同。尝试使用`[ ]*?`或只使用空格

# macos - Adobe Air 键盘本机扩展 (OSX)

> ID：13972189
> 
> 赞同：0
> 
> 时间：2012-12-20T12:25:16.893
> 
> 标签：macos, air, air-native-extension

我想制作一个 adobe air 桌面 (OSX) 应用程序，它可以控制 Keynote（向右和向左滑动）。我找到了制作本机扩展的最简单方法，即“按下”左右箭头键。我发现这个：[Simulating key press events in Mac OS X](https://stackoverflow.com/questions/2379867/simulating-key-press-events-in-mac-os-x)

好的，它在 CocoaApplication 中工作，但我需要为 NA 创建一个静态库 (.a)。但问题是：

我无法将 Cocoa.framework 库添加到我的项目中。任何想法，我怎么能用这个？或者有什么其他技巧吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:34:15.227

我的失败！我没有制作 Cocoa Touch 静态库，Cocoa 静态库

# hibernate - 如何使用延迟加载和分页查询 Primefaces 数据表的数据

> ID：13972193
> 
> 赞同：24
> 
> 时间：2012-12-20T12:25:48.097
> 
> 标签：hibernate, jpa, primefaces, pagination, lazy-loading

在我的 JSF 数据表中，我实现了延迟加载，当我对记录进行分页时，执行下一组记录大约需要 4 或 5 秒，实际上执行结果应该不到一秒。

这发生在我实现它的方式上，不知道我该如何解决这个问题。

扩展 LazyDataModel 的 DataModel 类

```
@Override
public List<Request> load(int startingAt, int maxPerPage, String sortField,
                          SortOrder sortOrder, Map<String, String> filters)
{
    requestList = requestService.getRequest(startingAt, maxPerPage,
                                            sortField, sortOrder, filters);
    this.setRowCount(requestList.size());
    if (requestList.size() > maxPerPage)
    {
        System.out.println("executing");
        return requestList.subList(startingAt, startingAt + maxPerPage);
    }
    else
    {
        System.out.println("executing else ");
        return requestList;
    }

    return requestList;
} 
```

在道课上

```
@Override
public List<Request> getRequest(int startingAt, int maxPerPage,
                                String sortField, SortOrder sortOrder, Map<String, String> filters)
{
    Criteria criteria = sessionFactory.getCurrentSession().createCriteria(
                            Request.class);
    criteria.addOrder(Order.desc("requestNo"));
    for (Map.Entry<String, String> entry : filters.entrySet())
    {
        if (entry.getValue() != null)
        {
            criteria.add(Restrictions.ilike("requestNo",
                                            "%" + entry.getValue() + "%"));
        }
    }
    //criteria.setMaxResults(maxPerPage);
    //criteria.setFirstResult(startingAt);
    return criteria.list();
} 
```

有人能解释一下是什么导致了分页记录的延迟吗？

如果我删除以下

```
if (requestList.size() > maxPerPage)
{
    System.out.println("executing");
    return requestList.subList(startingAt, startingAt + maxPerPage);
}
else
{
    System.out.println("executing else ");
    return requestList;
} 
```

并执行，然后它会毫无延迟地完美执行，但问题`this.setRowCount(requestList.size());`始终是 5，这是我每页的默认记录数。

更新 2

```
@Override
    public List<Request> load(int startingAt, int maxPerPage, String sortField,
            SortOrder sortOrder, Map<String, String> filters) {
        requestList = requestService.getRequest(startingAt, maxPerPage,
                sortField, sortOrder, filters);
        this.setRowCount(requestService.getRequestCount());
        if (requestService.getRequestCount() > maxPerPage) {
            try {

                return requestList.subList(startingAt, startingAt + maxPerPage);
            } catch (IndexOutOfBoundsException e) {
                //e.printStackTrace();
                return requestList.subList(startingAt, startingAt
                        + (requestService.getRequestCount() % maxPerPage));
            }
        } else {
            return requestList;
        }       
    } 
```

使用不同的查询来获取结果集的计数，使用以下

```
@Override
    public int count() {
        int count = ((Long) sessionFactory.getCurrentSession()
                .createQuery("select count(*) from Request").uniqueResult())
                .intValue();
        System.out.println(" count size " + count);
        return count;
    } 
```

和我的道

```
@Override
        public List<Request> getRequest(int startingAt, int maxPerPage,
                String sortField, SortOrder sortOrder, Map<String, String> filters) {
            Criteria criteria = sessionFactory.getCurrentSession().createCriteria(
                    Request.class);
            criteria.addOrder(Order.desc("requestNo"));
            for (Map.Entry<String, String> entry : filters.entrySet()) {
                if (entry.getValue() != null) {
                    criteria.add(Restrictions.ilike("requestNo",
                            "%" + entry.getValue() + "%"));         }
            }
             criteria.setMaxResults(maxPerPage);
             criteria.setFirstResult(startingAt);       
                return criteria.list(); 

        } 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-20T14:05:24.840

在非常大的结果列表的情况下，Java 端**计数**和**子列表**操作可能会对内存使用造成危险，因此也会影响性能。

相反，我通常采用以下方法：**使用 2 个查询**，一个用于计算过滤后的结果集（我让 db 进行计数），另一个用于检索分页的结果集（我让 db 提取子列表）。即使表格包含数百万行，我也从未经历过明显的延迟。

下面是一个带有排序和过滤的具体示例。所有代码都使用 JPA 标准（没有 Hibernate 或 Spring 自定义特性）的`CriteriaQuery`方法在这种情况下特别指出。

**MyBean 类**

```
@ManagedBean
@ViewScoped
public class MyBean {
    @EJB
    private MyObjFacade myObjFacade;
    private LazyDataModel<MyObjType> model;        // getter and setter

    @PostConstruct
    public void init() {
        model = new LazyDataModel<MyObjType> () {

            @Override
            public List<MyObjType> load(int first, int pageSize, String sortField, SortOrder sortOrder, Map<String, String> filters) {
                model.setRowCount(myObjFacade.count(filters));
                return myObjFacade.getResultList(first, pageSize, sortField, sortOrder, filters);
            }
        };
        model.setRowCount(myObjFacade.count(new HashMap<String, String> ()));
    }
} 
```

**MyObjFacade 类**

```
@Stateless
public class MyObjFacade {
    @PersistenceContext
    private EntityManager em;
    @EJB
    private MyObjFacade myObjFacade;

    private Predicate getFilterCondition(CriteriaBuilder cb, Root<MyObjType> myObj, Map<String, String> filters) {
        Predicate filterCondition = cb.conjunction();
        String wildCard = "%";
        for (Map.Entry<String, String> filter : filters.entrySet()) {
            String value = wildCard + filter.getValue() + wildCard;
            if (!filter.getValue().equals("")) {
                javax.persistence.criteria.Path<String> path = myObj.get(filter.getKey());
                filterCondition = cb.and(filterCondition, cb.like(path, value));
            }
        }
        return filterCondition;
    }

    public int count(Map<String, String> filters) {
        CriteriaBuilder cb = getEntityManager().getCriteriaBuilder();
        CriteriaQuery<Long> cq = cb.createQuery(Long.class);
        Root<MyObjType> myObj = cq.from(MyObjType.class);
        cq.where(myObjFacade.getFilterCondition(cb, myObj, filters));
        cq.select(cb.count(myObj));
        return em.createQuery(cq).getSingleResult().intValue();
    }

    public List<MyObjType> getResultList(int first, int pageSize, String sortField, SortOrder sortOrder, Map<String, String> filters) {
        CriteriaBuilder cb = getEntityManager().getCriteriaBuilder();
        CriteriaQuery<MyObjType> cq = cb.createQuery(MyObjType.class);
        Root<MyObjType> myObj = cq.from(MyObjType.class);
        cq.where(myObjFacade.getFilterCondition(cb, myObj, filters));
        if (sortField != null) {
            if (sortOrder == SortOrder.ASCENDING) {
                cq.orderBy(cb.asc(myObj.get(sortField)));
            } else if (sortOrder == SortOrder.DESCENDING) {
                cq.orderBy(cb.desc(myObj.get(sortField)));
            }
        }
        return em.createQuery(cq).setFirstResult(first).setMaxResults(pageSize).getResultList();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T14:59:56.267

我不确定这在这种情况下是否相关，但除了@perissf 的观察，我会担心以下问题：

```
if (entry.getValue() != null)
{
    criteria.add(Restrictions.ilike("requestNo",
                                    "%" + entry.getValue() + "%"));
} 
```

因为这将解析为类似于

```
WHERE UPPER(request_no) LIKE '%VALUE%' 
```

这将进行全表扫描，因为`request_no`在这种情况下无法使用索引，这对于具有大量行的表来说非常慢，原因有两个：

*   `UPPER(request_no)`需要一个功能索引。
*   `like '%anything'``request_no`无论是否存在功能索引，都必须查看每个值。

# javascript - 选择下一个相邻元素 JQuery

> ID：13972194
> 
> 赞同：0
> 
> 时间：2012-12-20T12:25:51.497
> 
> 标签：javascript, jquery, html

我有一组文件输入字段，我希望除第一个之外的所有字段都被禁用。

当第一个被设置（onchanged）时，下一个文件字段被解锁。

我该怎么做呢？我努力了：

```
$('#topperform input').change(function(){

$(this).next('label').css('color', 'red') ;

}) 
```

什么都不做。

我的 HTML：

```
<form id="topperform" method="post">
<label>Main image <input type="file" /></label>
<label>2nd image <input type="file" /></label>
<label>3rd image <input type="file" /></label>
<label>4th image <input type="file" /></label>
<label>5th image <input type="file" /></label>
<label>6th image <input type="file" /></label>
<label>7th image <input type="file" /></label>
<label>8th image <input type="file" /></label>
<label>9th image <input type="file" /></label>
<label>10th image <input type="file" /></label>
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T12:32:43.213

***[检查工作演示](http://jsfiddle.net/MVmr6/)***：

```
var inputs = $('#topperform').find('input');

inputs.not(':first').prop('disabled',true);

inputs.change(function() {
    $(this).parent().next().find('input').prop('disabled', false);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T12:39:45.473

HTML

```
<form id="topperform" method="post">
<label>Main image <input type="file"/></label>
<label>2nd image <input type="file" disabled = "disabled" /></label>
<label>3rd image <input type="file" disabled = "disabled"  /></label>
<label>4th image <input type="file" disabled = "disabled" /></label>
<label>5th image <input type="file" disabled = "disabled" /></label>
<label>6th image <input type="file" disabled = "disabled" /></label>
<label>7th image <input type="file" disabled = "disabled" /></label>
<label>8th image <input type="file" disabled = "disabled" /></label>
<label>9th image <input type="file" disabled = "disabled" /></label>
<label>10th image <input type="file" disabled = "disabled" /></label>
</form>​​​​​​​​​​​​​​ 
```

Javascript

```
 $('#topperform').find('input').change(function() {
     $(this).parent().next().find('input').prop('disabled', false);
 });​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T12:31:44.923

```
$(this).parent().next('label').css('color', 'red'); 
```

`$(this)`是输入，您需要输入父级的下一个兄弟（标签）。

**[工作样本](http://fiddle.jshell.net/N3R6v/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T12:32:55.997

使用 css-classes 检查条目的当前状态。当您刚刚将标签元素的类设置为“禁用”（例如；）时，您会在编辑输入字段后从标签中删除此类。并通过选择它来启用下一个字段： $('.disabled')

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T12:34:31.810

I suggest to add ids to the inputs (`f1` for the first...`f10` for the last). After that you can use this script:

```
$('#topperform input').attr('disabled', 'disabled');
$('#topperform input').change(function () {
    var id = parseInt(this.id.replace(/^f/, ''), 10);
    $('#f' + (id + 1)).removeAttr('disabled');
});
$('#f1').removeAttr('disabled');
​ 
```

Here is an example: [http://jsfiddle.net/VpGbH/](http://jsfiddle.net/VpGbH/)

In my opinion this makes the best balance between readability and performance.

# c# - MATLAB NET.ASSEMBLY 与 C#

> ID：13972196
> 
> 赞同：2
> 
> 时间：2012-12-20T12:25:57.880
> 
> 标签：c#, matlab

我在 Matlab 中开发一个应用程序，它使用 NET.addAssembly 调用一个 C# dll 来分析文件。我在 Matlab 中创建了一个结构，其中包含要分析的文件类型的一些特征：

```
File = struct('Name','File Name','HeaderLines',14,'ColName','ID','ColIdx',[]...); 
```

我想将此结构发送到我的 C# dll，它将读取文件并填充结构的一些功能并将其发送回 Matlab。

有可能这样做吗？因为目前我收到错误：“没有找到匹配签名的方法'xxx'。

您能否确认 Matlab 结构在 NET 中是否兼容？哪个对象更适合这个目的？我在哪里可以找到示例 Matlab - NET 程序集？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:20:44.103

如果要将结构从 matlab 发送到 c#，可以在 c# 程序集中声明它。然后您可以在 matlab 中创建此结构类型的新引用，填充它，并将其发送到 ac# 函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T13:14:33.250

您不能将 MATLAB 结构传递给 .NET 程序集的方法。将相关信息存储在 MATLAB 数组或元胞数组中，并设计您的 C# 以接受这种形式的信息。

有关使用 MATLAB 中的 .NET 库的示例，请参阅文档部分用户指南->外部接口->使用 MATLAB 中的 .NET 库，尤其是 和 部分`Handling .NET Data in MATLAB`，`Using Arrays with .NET Applications`其中介绍了如何将数据传入和传出 .NET 程序集。

# sql - Oracle SQL：从具有嵌套表的表中选择

> ID：13972198
> 
> 赞同：8
> 
> 时间：2012-12-20T12:26:07.067
> 
> 标签：sql, oracle, oracle10g, nested-table

我想知道如何从具有类型列的表中进行选择语句？该列的类型定义为：

```
create or replace TYPE "MYCOL" as table of MYTYPE; 
create or replace TYPE "MYTYPE" as OBJECT
( myid Number, myname Varchar2); 
```

**UPD1** 表定义为

```
CREATE TABLE "T_TABLE" 
   (    "ID" NUMBER NOT NULL ENABLE, "NAME" "MYCOL" ) 
```

如果我选择此列，`select * from T_TABLE` 我将得到此非信息性结果：

```
1, MYSCHEMA.MYCOL([MYSCHEMA.MYTYPE],[MYSCHEMA.MYTYPE]) 
```

我只想解开这些类型。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-20T13:00:19.263

试试这样：

```
select t."ID", tt.myid, tt.myname 
from "T_TABLE" t, table(t."NAME") tt; 
```

[这是一个 sqlfiddle 演示](http://www.sqlfiddle.com/#!4/4d847/1)

# python - 如何在 ModelForm 的自定义表单字段中预填充值

> ID：13972201
> 
> 赞同：2
> 
> 时间：2012-12-20T12:26:15.117
> 
> 标签：python, django, custom-fields, modelform

假设我有一个模型如下。

# 模型.py

```
class Profile(models.Model):
    user = models.OneToOneField(User)
    middle_name = models.CharField(max_length=30, blank=True, null=True) 
```

我`email`在 ModelForm 中有一个自定义字段，如下所示

# 表格.py

```
class ProfileForm(ModelForm):
    email = forms.CharField()
    class Meta:
         model = models.Profile

    fields = ('email', 'middle_name') 
```

在设置上述模型表单的实例时，数据会预填充到编辑模板的表单中，如下所示。

# 视图.py

```
def edit_profile(request):
    profile = models.Profile.objects.get(user=request.user)
    profileform = forms.ProfileForm(instance=profile)
    return render_to_response('edit.html', { 'form' : 'profileform' }, context_instance=RequestContext(request)) 
```

现在在表单中，我为 Profile 模型下的所有字段预填充了所有值，但自定义字段为空，这很有意义。

但是有没有办法可以预填充自定义字段的值？也许是这样的：

```
email = forms.CharField(value = models.Profile.user.email) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T12:33:38.637

我可以建议别的吗？如果它与该模型无关，我不喜欢`email`在 ModelForm 中拥有该字段。`Profile`

相反，如果只拥有两个表单并将初始数据传递给包含的自定义表单，怎么样`email`？所以事情看起来像这样：

# 表格.py

```
# this name may not fit your needs if you have more fields, but you get the idea
class UserEmailForm(forms.Form):
    email = forms.CharField() 
```

# 视图.py

```
profile = models.Profile.objects.get(user=request.user)
profileform = forms.ProfileForm(instance=profile)
user_emailform = forms.UserEmailForm(initial={'email': profile.user.email}) 
```

然后，您正在验证配置文件和用户电子邮件表单，但除此之外的事情基本相同。

我假设您没有在 Profile ModelForm 和此 UserEmailForm 之间共享逻辑。如果您需要配置文件实例数据，您可以随时将其传递到那里。

我更喜欢这种方法，因为它不那么神奇，并且如果您在一年内回顾您的代码，您不会想知道为什么，在简短的扫描中，为什么它在该模型上不作为字段存在时`email`的一部分。`ModelForm`

# android - Android HttpUrlConnection 发布图像 - 内容长度应指什么？

> ID：13972202
> 
> 赞同：2
> 
> 时间：2012-12-20T12:26:17.040
> 
> 标签：android, httpurlconnection, image-uploading, http-status-codes

我意识到这个问题与这个问题相似，[但](https://stackoverflow.com/questions/6354928/java-httpurlconnection-content-length-computation)我认为我的情况不同，因为我正在尝试发布图像。

我正在从 Android 活动将图像上传到服务器，并且在某些设备上上传时收到“411 - 所需长度”的错误报告。我无法在此处重现该错误，但用户在与我们能够在不同国家/地区测试的设备不同的设备上报告了此错误。

我们在附加了一些参数的 URL 上打开一个 HttpUrlConnection。这些是字符串和 UUID。它看起来像这样：

```
http://ourdomainname.net/OurMobileServices/ImageUploadhandler.ashx?filename=image20121220_120734_-901992324.jpeg&username=testusername&note=&uploadid=b4a1c35b-b869-4f7e-a645-6a4a180f0985&taskid=7f02deb8-c078-45c4-bc37-99e418e8cdf9 
```

然后我们使用 getOutputStream 获取一个 OutputStream，我们将图像文件字节写入其中。

我一直在寻找有关 411 错误的信息并在 HttpUrlConnection 对象上设置内容长度。似乎我可以将内容长度设置为请求属性，例如：

```
connection.setRequestProperty("Content-Length", String.valueOf(<mycomputedInt>)); 
```

或者我可以使用：

```
connection.setFixedLengthStreamingMode() 
```

里面有内容长度编号。

我的问题是：内容长度应该测量什么？是指：

a) 包括参数的整个 URL？

b) URL 编码的参数？

c）我正在上传的图像的字节数组的长度？

d) 图像字节数组的长度，以及 URL 编码的参数？

e) 完全不同的东西？

如果需要，我可以发布代码或更详细的信息 - 我对此感到很困惑，并且无法在本地重现错误。我可以从模拟器、手机和平板电脑上传图片。任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T12:46:13.777

Content-Length 应该是您写入 OutputStream 的任何内容的长度。所以在这种情况下，答案是 C。

我认为[这个站点](http://www.jmarshall.com/easy/http/#structure)非常清楚地解释了 HTTP 请求的结构，您可能会发现它很有帮助。

# maven - Maven 和 Netbeans - 网页未显示

> ID：13972205
> 
> 赞同：1
> 
> 时间：2012-12-20T12:26:22.920
> 
> 标签：maven, web-applications, netbeans

我有一个 maven Web 应用程序（使用 Netbeans），我在 ${basedir}/src/main/webapp 中有一些网页，但我无法在 Netbeans 项目资源管理器中看到它们，尽管它们存在于磁盘上并显示部署后在浏览器上。为了查看网页，我必须如何配置 Netbeans（或者可能是一些 POM 设置）？

提前谢谢了！

# asp.net-mvc-3 - ASP.NET MVC3 使用重定向到操作

> ID：13972211
> 
> 赞同：-1
> 
> 时间：2012-12-20T12:26:53.357
> 
> 标签：asp.net-mvc-3

我想在此代码上使用重定向到动作结果，它给出一个空值，但我有几个 if 语句，并且代码变得越来越复杂，需要一个解决方案来解决我如何使用输出空值的重定向到动作，请帮忙？

```
 public ActionResult Convert(double temperature, string convertTo)
    {
        ViewBag.Temperature = temperature;
        ViewBag.ConvertTo = convertTo;

        if (convertTo.Equals("Celsius"))
        { ViewBag.ConvertedTemperature = this.FahrenheitToCelsius(temperature); }

        else

            { ViewBag.ConvertedTemperature = this.CelsiusToFahrenheit(temperature); }
            return View("Convert");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T14:07:09.637

错误消息真的很有帮助。但似乎您需要使温度参数为空，如下所示：

```
public ActionResult Convert(double? temperature, string convertTo) 
```

然后你可以检查 null 并返回 RedirectToAction：

```
if (temperature == null)
    return RedirectToAction("ActionName", "ControllerName"); 
```

您还需要执行以下操作以获取转换方法中的温度值：

```
temperature.Value 
```

希望这可以帮助。

# oop - 我糟糕的设计和丰富的吸气剂

> ID：13972212
> 
> 赞同：0
> 
> 时间：2012-12-20T12:26:59.490
> 
> 标签：oop, design-patterns

我正面临一个相当烦人的软件设计问题，它已经困扰了我很长一段时间了。问题是对象的初始化，并且使用了很多 getter 来实现这一点。我偶然发现了 Allen Holub [1] 的一篇文章，关于为什么很多 getter 和 setter 通常表明设计不佳。我在下面列出了其他几篇文章，它们也讨论了这个设计问题。

现在关于我的问题。我目前正在研究流体模拟。我有一个 Simulation 类，其中包含与模拟流体相关的函数和变量。起初，这个类只有一个名为 timeStep() 的公共函数，它执行模拟的时间步长。现在，我想模拟几个众所周知的流程，可以将它们视为场景。这通常归结为正确初始化模拟。例如，我有 Taylor-Green 涡流。模拟不需要知道它是在模拟一个特定的流，它只需要执行模拟算法，所以我创建了一个单独的类 TaylorGreenVortex。TaylorGreenVortex 类必须以与 Taylor-Green 涡流相对应的方式初始化 Simulation。现在麻烦来了：Taylor-Green 涡流的初始化方程需要许多变量，这些变量也是模拟所需的，因此存在于该类中。所以，结果是我在 Simulation 类中添加了很多 getter 来获取这些变量。然而，这也是不希望的，因为所有这些吸气剂使 Simulation 类非常暴露，并且还在 Simulation 和 TaylorGreenVortex 之间产生了高度耦合。此外，初始化器（TaylorGreenVortex）先构造一个 Simulation 对象，这样它就可以得到相关的变量，然后再重新设置 Simulation 对象的其他变量，这样它就会模拟一个 Taylor-Green 涡流，这也很烦人。结果是我在 Simulation 类中添加了很多 getter 来获取这些变量。然而，这也是不希望的，因为所有这些吸气剂使 Simulation 类非常暴露，并且还在 Simulation 和 TaylorGreenVortex 之间产生了高度耦合。此外，初始化器（TaylorGreenVortex）先构造一个 Simulation 对象，这样它就可以获取相关变量，然后再重新设置 Simulation 对象的其他变量，这样它就会模拟一个 Taylor-Green 涡流，这也很烦人。结果是我在 Simulation 类中添加了很多 getter 来获取这些变量。然而，这也是不希望的，因为所有这些吸气剂使 Simulation 类非常暴露，并且还在 Simulation 和 TaylorGreenVortex 之间产生了高度耦合。此外，初始化器（TaylorGreenVortex）先构造一个 Simulation 对象，这样它就可以获取相关变量，然后再重新设置 Simulation 对象的其他变量，这样它就会模拟一个 Taylor-Green 涡流，这也很烦人。

我考虑过几种解决方案，但所有这些解决方案都没有真正解决问题，而只是将问题转移到不同的类或使设计变得更糟。例如，如果我遵循“信息专家”模式，那么我应该删除 TaylorGreenVortex 类并将其所有功能移至 Simulation 类。然而，当模拟必须支持许多不同的流程时，这会使模拟类变得庞大。我还可以引入某种 Data 类，它具有 TaylorGreenVortex 和 Simulation 所需的变量，但是我必须在这个 Data 类中添加很多 getter，以便 Simulation 和 TaylorGreenVortex 从 Data 中获取变量。您对清洁解决方案有何建议？如果您知道与问题相关的特定设计模式，您能否具体解释一下如何在上述情况下应用它？提前致谢。

1.  [http://www.javaworld.com/javaworld/jw-09-2003/jw-0905-toolbox.html](http://www.javaworld.com/javaworld/jw-09-2003/jw-0905-toolbox.html)
2.  [http://martinfowler.com/bliki/GetterEradicator.html](http://martinfowler.com/bliki/GetterEradicator.html)
3.  [http://pragprog.com/articles/tell-dont-ask](http://pragprog.com/articles/tell-dont-ask)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T12:44:06.737

为了提供更好的建议，我想我应该看到代码，但从描述中听起来你需要一个[builder](http://www.oodesign.com/builder-pattern.html)。但是`TaylorGreenVortex`，您描述的课程似乎在做建造者的工作，所以也许它不是您要找的，这让我有点困惑。恕我直言，拥有一个负责模拟的类和知道如何配置该模拟以表示不同场景的不同构建器类是一个很好的设计。我会首先在`Simulation`类中有一个构造函数，它接受模拟所需的所有参数，然后让每个特定的构建器根据特定的模拟需要传递构造函数参数。如果参数太多，那么您可能会认为有些东西您没有建模并且`Simulation`类有多个职责（参见[SRP](http://www.oodesign.com/single-responsibility-principle.html)）。在这种情况下，您可能想要重构`Simulation`该类，但同样，如果不查看代码就很难判断:(。您能发布一些片段吗？

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T12:57:17.220

我对主题或您的设计知之甚少，因此我无法完全评论您要实现的目标（请提供更多片段），但*听起来*您正试图将状态（`Simulation`）保持在一个位置以及如何处理`TaylorGreenVortexFlow`另一个状态（ ），并且在两者**需要**交互时遇到问题将它们解耦。

`Simulation`您是否完全放弃了从公共对象继承的想法？重写`timeStep()`函数以反映泰勒-格林涡流期间发生的情况？如果由于缺少正确的传递引用而使用 Java，这可能是您唯一明智的选择。

# iphone - JSON 对象到 NSArray

> ID：13972213
> 
> 赞同：3
> 
> 时间：2012-12-20T12:27:02.263
> 
> 标签：iphone, objective-c, sdk

我必须遵循来自服务器的 JSON 响应：

```
 {
  "theSet": [

  ],
  "Identifikation": 1,
  "Name": "Casper",
  "Adress": "Lovis 23",
  "Location": "At home",
  "Information": "The first, the second and the third",
  "Thumbnail": "none",
 } 
```

我正在检索数据，如下所示：

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection {

    NSLog(@"connectionDidFinishLoading");

    NSLog(@"Succeeded! Received %d bytes of data",[data length]);

    NSError *myError = nil;

     NSDictionary *res = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableLeaves error:&myError];

      news = [NSArray arrayWithObjects:[res allKeys], [res allValues], nil];

      NSLog(@"%@", news);

    //[mainTableView reloadData];
} 
```

然后我想将所有 JSON 数据插入到一个数组中，这样我就可以在我的 tableview 中显示数据。

我的表格视图代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"MainCell"];

    if(cell == nil){
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"MainCell"];
    }

    cell.textLabel.text = [[news objectAtIndex:indexPath.row] objectForKey:@"Name"];
    cell.detailTextLabel.text = [[news objectAtIndex:indexPath.row] objectForKey:@"Adress"];

    return cell;
} 
```

但是我的应用程序因错误而崩溃：

```
-[__NSArrayI objectForKey:]: unrecognized selector sent to instance. 
```

如何将 JSON 对象插入 NSArray，以便在我的 tableview 中显示它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T12:31:37.937

编辑：

我再次查看了您的代码，我之前的回答是错误的。

生成时`news`，您将 2 个`NSArray`对象放入其中。第一个包含所有键，第二个包含 JSON 中的所有值。

为了在 JSON 中显示每个对象的名称，您应该简单地做

```
news = [res allKeys];
jsonResult = res; 
```

// 如果您想使用这些值，请存储您的 json！

请注意，它们将是无序的。在您的手机上，您可以执行以下操作：

```
NSString *key = [news objectAtIndex:indexPath.row];
cell.textLabel.text = key;

id object = [jsonResult valueForKey:key];
cell.detailTextLabel.text = // do something depending on your json type which can have different values 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T12:32:20.157

你遇到的错误

`[__NSArrayI objectForKey:]: unrecognized selector sent to instance.`

告诉你你需要知道的一切。

这说不`NSArray`明白`objectForKey`。如果您阅读 Apple 提供的[文档](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html)，您将看到这一点。

你的代码

`cell.textLabel.text = [[news objectAtIndex:indexPath.row] objectForKey:@"Name"];`

期望`news`NSArray 返回一个响应的对象`objectForKey`- 很可能是一个`NSDictionary`. 您用于提取 JSON 数据的代码

```
NSDictionary *res = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableLeaves error:&myError];
news = [NSArray arrayWithObjects:[res allKeys], [res allValues], nil]; 
```

只是获取所有字典并将键提取到数组中。

您需要查看这些代码行 - 这就是您出错的地方。

查看[NSJSONSerialization 参考](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)及其链接的相关示例代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T15:02:44.470

我自己找到了一个简单的解决方案，更适合我的项目：

我刚刚做了以下事情：

```
 NSDictionary *res = [NSJSONSerialization JSONObjectWithData:data options:0 error:&myError];

NSArray news = [NSArray arrayWithObject:res]; 
```

并且我可以使用以下代码在我的表格视图中显示 JSON 内容。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"MainCell"];

    if(cell == nil){
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"MainCell"];
    }

    cell.textLabel.text = [[news objectAtIndex:indexPath.row] valueForKey:@"name"];

    cell.detailTextLabel.text = [[news objectAtIndex:indexPath.row] objectForKey:@"Location"];

    return cell;
} 
```

# c# - 为主机和客户端提供 Windows 服务托管的 WCF

> ID：13972216
> 
> 赞同：0
> 
> 时间：2012-12-20T12:27:16.350
> 
> 标签：c#, .net, wcf

我有一个带有 Windows 服务托管的 WCF，用于后台数据库操作。我已经将客户端部分也包含在带有计时器的同一个 Windows 服务中，而不是为客户端部分创建单独的 Windows 服务。我想知道这种方法有什么缺点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T14:36:22.670

必须同意@Kek 如果没有外部调用者，为什么还要有 WCF 服务:) 除了与使用 2 个 Windows 服务相比没有真正的缺点之外，您的方法使用更少的内存并且只有一个服务需要管理（开始，停止等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T07:26:37.613

在大多数情况下，我同意@Tommy Grovnes：如果事情做得正确，没有缺点。不过我想指出一点：

如果服务和客户端在同一个进程中，当然后者依赖于前者……你可能会想直接调用服务方法（实际上不使用WCF）……尽量不要那样做。

如果这样做，您的数据不会被序列化：因此它更快，但与另一个进程中的客户端相比，它的行为方式可能不完全相同。

如果您使用诸如 EF 自我跟踪实体之类的机制，则尤其如此。这些实体在反序列化时会更改其状态。当您实际从另一个进程调用您的服务时，避免序列化可能会导致意外错误。

# python - Python：Django：我如何找到用户的纬度和经度，以便我可以显示用户的位置？

> ID：13972218
> 
> 赞同：1
> 
> 时间：2012-12-20T12:27:19.207
> 
> 标签：python, django

有没有可能在 django.xml 中找到用户的位置。我的意思是有什么办法可以得到纬度和经度，然后是位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T12:57:12.230

我不相信 Django 可以直接做到这一点，你可以用 Django 做的是请求用户的 IP，并从外部使用免费的网络服务，请求纬度和经度，然后是位置

例如......简单的python代码：

```
IP_URL = "http://api.hostip.info/?ip="
def get_coords(ip):
    url = IP_URL + ip
    respond = None
    try:
        respond = urlib2.urlopen(url).read()
    execept URLError:
        return

    if respond:
        #Parse de returned XML Here, you can use MiniDom 
```

顺便说一句，如果用户在美国，api.hostip.info 工作得很好。外面不太好……但你明白了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T12:37:19.930

要么你自己找一些地理 ip 表来查找，要么你使用 html5 中的位置库。

喜欢这里：[http ://html5demos.com/geo](http://html5demos.com/geo)

这个演示实际上向您展示了一张地图，但 javascript 查询实际上为您提供了纬度和经度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-27T08:13:28.627

[IP API](http://ip-api.com/docs/api:json)是一种非常好的方法。比这里提到的其他人更准确。 ![在此处输入图像描述](../Images/657b5f9dbfb29acc427c1791007ce2e2.png)

# android - Android OpenGL ES，使用 2D 纹理的奇怪质量

> ID：13972220
> 
> 赞同：1
> 
> 时间：2012-12-20T12:27:40.983
> 
> 标签：android, opengl-es, textures

经过长时间的搜索，我没有找到任何解决我的问题的方法，所以这里是：

我有以下精灵：

http://i46.tinypic.com/rmji2d.png"">

但在我使用 OpenGLSurface 的游戏中，使用 2d 纹理它看起来像这样：

http://i47.tinypic.com/2wqb9qs.png"">

我在纹理中使用的选项如下：

```
public void onSurfaceCreated(GL10 gl, EGLConfig confid) {
gl.glEnable(GL10.GL_TEXTURE_2D);
gl.glShadeModel(GL10.GL_SMOOTH);
gl.glClearColor(255,255, 255,0);
gl.glClearDepthf(1.0f);
gl.glEnable(GL10.GL_BLEND);
gl.glDisable(GL10.GL_DEPTH_TEST);
gl.glBlendFunc(GL10.GL_SRC_ALPHA, GL10.GL_ONE_MINUS_SRC_ALPHA); 
```

}

```
 public void loadTextures(GL10 gl, Context context) {
 gl.glGenTextures(textureCount, textures, 0);
    for (int loop = 0; loop < textureCount; loop++) {
        gl.glBindTexture(GL10.GL_TEXTURE_2D, textures[loop]);
        gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MAG_FILTER,
                GL10.GL_LINEAR);
        gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MIN_FILTER,
                GL10.GL_LINEAR);
        gl.glHint(GL10.GL_PERSPECTIVE_CORRECTION_HINT, // OpenGL docs.
                GL10.GL_NICEST);
        GLUtils.texImage2D(GL10.GL_TEXTURE_2D, 0, bitmap[loop], 0);
        bitmap[loop].recycle();
    }
} 
```

**仅仅是因为我正在缩放图像，使其更短而变得如此奇怪吗？我能做些什么来获得更好的图形吗？**

添加了抽奖：

```
public void draw(GL10 gl) {
    gl.glBindTexture(GL10.GL_TEXTURE_2D, textures[0]);
    for (int loop = 0; loop < sprites.size(); loop++) {
        gl.glPushMatrix();
        try {
            DevQuestSprite sprite = sprites.get(loop);
            sprite.update(screenHeight); // update enemy
            gl.glBindTexture(GL10.GL_TEXTURE_2D, textures[sprite.curSprite]);
            float transx = (wRatio * sprite.x);
            float transy = (screenHeight * wRatio) - (wRatio * sprite.y)
                    - 1 / hRatio;
            gl.glTranslatef(transx, transy, 0.0f);

            sprite.draw(gl);
        } catch (NullPointerException e) {
        }
        gl.glPopMatrix();
    }
} 
```

# android - GridView 垃圾回收

> ID：13972222
> 
> 赞同：3
> 
> 时间：2012-12-20T12:27:46.947
> 
> 标签：android

我有一个显示位图的简单网格视图。由于垃圾收集，视图非常糟糕。我有在列表视图中进行垃圾收集的经验，并且有一个相当重的运行顺利。但是我无法理解这里发生了什么。当我抛出视图时，UI 线程被阻塞了很多。堆栈跟踪看起来像这样

> 12-20 13:22:46.187: D/dalvikvm(17979): WAIT_FOR_CONCURRENT_GC 阻塞 106ms 12-20 13:22:46.187: D/dalvikvm(17979): WAIT_FOR_CONCURRENT_GC 阻塞 106ms 12-20 13:22:46.187: （17979）：WAIT_FOR_CONCURRENT_GC 阻塞 106 毫秒 12-20 13:22:46.187：D/dalvikvm（17979）：WAIT_FOR_CONCURRENT_GC 阻塞 106 毫秒 12-20 13:22:46.187：D/dalvikvm（17979）：WAIT_FOR_CONCURRENT_20 阻塞 13:77 22:46.187: D/dalvikvm(17979): WAIT_FOR_CONCURRENT_GC 阻塞 107 毫秒 12-20 13:22:46.191: D/dalvikvm(17979): WAIT_FOR_CONCURRENT_GC 阻塞 108 毫秒 12-20 13:22:46.191: D/dalvikITFOR_CURRENT9_GC_WAITFOR_CONCURRENT9:99阻塞 108ms 12-20 13:22:46.191: D/dalvikvm(17979): WAIT_FOR_CONCURRENT_GC 阻塞 109ms 12-20 13:22:46.191: D/dalvikvm(17979): WAIT_FOR_CONCURRENT_GC 阻塞 108ms 12-20 13:22:46 /dalvikvm（17979）：WAIT_FOR_CONCURRENT_GC 阻塞 108ms 12-20 13:22:46.191：D/dalvikvm(17979)：WAIT_FOR_CONCURRENT_GC 阻塞 109ms 12-20 13:22:46.191：D/dalvikvm(17979)：WAIT_FOR_CONCURRENT191_GC 阻塞 3:22:46。 D/dalvikvm(17979): WAIT_FOR_CONCURRENT_GC 阻塞 110ms 12-20 13:22:46.195: D/dalvikvm(17979): WAIT_FOR_CONCURRENT_GC 阻塞 111ms 12-20 13:22:46.195: D/dalvikvm(17979): WAIT110_CURRENT-_GC 20 13:22:46.195: D/dalvikvm(17979): WAIT_FOR_CONCURRENT_GC 阻塞 111ms 12-20 13:22:46.195: D/dalvikvm(17979): WAIT_FOR_CONCURRENT_GC 阻塞 110ms 12-20 13:22:46.195: D/dalvikvm(17979 ): WAIT_FOR_CONCURRENT_GC 阻塞了 114 毫秒D/dalvikvm(17979): WAIT_FOR_CONCURRENT_GC 阻塞 110ms 12-20 13:22:46.195: D/dalvikvm(17979): WAIT_FOR_CONCURRENT_GC 阻塞 111ms 12-20 13:22:46.195: D/dalvikvm(17979): WAIT110_CURRENT-_GC 20 13:22:46.195: D/dalvikvm(17979): WAIT_FOR_CONCURRENT_GC 阻塞 111ms 12-20 13:22:46.195: D/dalvikvm(17979): WAIT_FOR_CONCURRENT_GC 阻塞 110ms 12-20 13:22:46.195: D/dalvikvm(17979 ): WAIT_FOR_CONCURRENT_GC 阻塞了 114 毫秒D/dalvikvm(17979): WAIT_FOR_CONCURRENT_GC 阻塞 110ms 12-20 13:22:46.195: D/dalvikvm(17979): WAIT_FOR_CONCURRENT_GC 阻塞 111ms 12-20 13:22:46.195: D/dalvikvm(17979): WAIT110_CURRENT-_GC 20 13:22:46.195: D/dalvikvm(17979): WAIT_FOR_CONCURRENT_GC 阻塞 111ms 12-20 13:22:46.195: D/dalvikvm(17979): WAIT_FOR_CONCURRENT_GC 阻塞 110ms 12-20 13:22:46.195: D/dalvikvm(17979 ): WAIT_FOR_CONCURRENT_GC 阻塞了 114 毫秒WAIT_FOR_CONCURRENT_GC 阻塞了 114 毫秒WAIT_FOR_CONCURRENT_GC 阻塞了 114 毫秒

我正在使用的适配器是这样的......

公共类 PhotoSelectorAdapter 扩展 BaseAdapter {

```
private Context context;
private String[] paths;
private final Executor executor = Executors.newFixedThreadPool(20);

public PhotoSelectorAdapter(Context context, String[] paths) {
    this.context = context;
    this.paths = paths;
}

public int getCount() {
    return paths.length;
}

public Object getItem(int position) {
    return null;
}

public long getItemId(int position) {
    return 0;
}

public View getView(int position, View convertView, ViewGroup parent) {
    ImageView imageView;
    ImageGetter imageGetter;
    if (convertView == null) {
        imageView = new ImageView(context);
        imageView.setLayoutParams(new GridView.LayoutParams(150, 150));
        imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
        imageView.setPadding(8, 8, 8, 8);
    } else {
        imageView = (ImageView) convertView;
        imageView.setImageBitmap(null);
        imageGetter = (ImageGetter) imageView.getTag();
       if (imageGetter != null) {
            imageGetter.cancel(true);
        }
    }
    imageGetter = new ImageGetter(context, paths[position], imageView);
    executor.execute(imageGetter.future());
    imageView.setTag(imageGetter);
    return imageView;
}

class ImageGetter extends RoboAsyncTask<Bitmap> {

    private WeakReference<ImageView> imageViewReference;
    private String path;
    BitmapFactory.Options options = new BitmapFactory.Options();

    protected ImageGetter(Context context, String path, ImageView imageView) {
        super(context);
        this.path = path;
        this.imageViewReference = new WeakReference<ImageView>(imageView);
    }

    @Override
    public Bitmap call() throws Exception {
        options.inSampleSize = 10;
        return BitmapFactory.decodeFile(path, options);
    }

    @Override
    protected void onSuccess(Bitmap bitmap) throws Exception {
        super.onSuccess(bitmap);
        if (future.isCancelled()) {
            bitmap = null;
        } else {
            if (imageViewReference != null) {
                ImageView imageView = imageViewReference.get();
                if (imageView != null) {
                    imageView.setImageBitmap(bitmap);
                }
            }
        }
    }
} 
```

我为避免垃圾收集而采取的步骤是

*   位图的样本大小为 10
*   如果不再需要任务，则取消它，以希望不创建不必要的位图

到底是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T14:23:12.157

你的图片有多大？即使在后台完成，同时解码太多也可能太多了。如果您创建了内存中的缩略图缓存，则可能会减少垃圾邮件。您还可以将缩略图保存到磁盘，并在内存缓存已满时让缓存从那里加载它们。

# database - 替换 Oracle 11g 触发器会自动启用它

> ID：13972232
> 
> 赞同：2
> 
> 时间：2012-12-20T12:28:10.547
> 
> 标签：database, oracle, triggers, oracle11g

我正在开发的一些软件使用 Oracle 中的触发器。我们有一整套当前在数据库中创建和禁用。当运行 CREATE 或 REPLACE 来修改已经存在的触发器时，该触发器会自动启用。我知道 CREATE 会自动启用某些东西，但是为什么要替换呢？

然而，奇怪的是，这只发生在我们的一个数据库上，其他的都很好。数据库中是否有可能导致这种情况的设置或正在启用 REPLACE 的预期行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:37:56.130

我认为该`OR REPLACE`子句被认为是命令的修饰符，`CREATE`而不是命令本身。[CREATE TRIGGER](http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_7004.htm)命令就是为此而设计的：

> 使用 CREATE TRIGGER 语句创建和启用数据库触发器 [...]
> 创建触发器时，数据库会自动启用它。随后可以使用 ALTER TRIGGER 或 ALTER TABLE 语句的 DISABLE 和 ENABLE 子句禁用和启用触发器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T12:37:21.217

启用和禁用触发器对于应用程序来说不是“正常”的事情，因此您可能会被这个软件误导。通常，如果您创建的一段代码具有有效的语法并且可以编译，那么它将在创建时启用。“create or replce”只是一种方便，可以先修改代码项而不删除它（并可能导致不良的副作用，例如删除它的特权）。在编译方面它与 create 没有什么不同。

现在您可以做的是“创建或替换触发器...禁用时...”，这当然会将其创建为禁用。

# delphi - 施乐 postscript 打印机用于软件开发

> ID：13972233
> 
> 赞同：0
> 
> 时间：2012-12-20T12:28:10.000
> 
> 标签：delphi, printing, postscript

几个月前，我在网上寻找一个 postscript 驱动程序，我遇到了一个 xerox postscript 驱动程序，当时它是免版税的。我需要它在 Delphi 中开发一个模块，从外部程序打印然后使用从它生成的 ps 执行一些其他转换。

问题是今天，我有时间在这个项目上工作，我再也找不到那个驱动程序了。

有人知道我在哪里可以找到它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T13:20:41.327

*任何*PostScript 驱动程序都应该可以工作。安装带有驱动程序的打印机，然后将打印机配置为“打印到文件”。系统将提示您输入文件名，输出将是 PostScript。物理打印机不需要存在；从操作系统附带的驱动程序中选择支持您想要的最高级功能的驱动程序。

# django - 嵌入 django-postman 模板

> ID：13972235
> 
> 赞同：1
> 
> 时间：2012-12-20T12:28:13.307
> 
> 标签：django, django-views

我有一个页面显示 2 种类型的信息：一般（前用户名/当前用户的全名）和特定（如果页面是“朋友”，则为朋友列表）。当转到另一个 url 时，一般信息保持不变，而具体信息会发生变化（“位置”页面的位置列表）。

到目前为止，我使用视图层次结构实现了这一点：基本视图负责一般信息，而子视图负责细节。

在模板中，我使用“扩展”：基本模板 -> 通用信息，扩展基本模板的特定模板 -> 特定信息。

一切正常。

现在我决定使用 django-postman，并且我想将 postman 模板嵌入到基本模板中。

我的问题是：最好的方法是什么？

到目前为止，我能找到的唯一解决方案是使用“扩展”并添加代码，将我需要的内容添加到 django-postman 视图的上下文中。我根本不喜欢这个解决方案。

有没有更优雅的方式？

# java - 如何拥有最小化的子面板？

> ID：13972239
> 
> 赞同：2
> 
> 时间：2012-12-20T12:28:19.830
> 
> 标签：java, swing, jpanel, panel

如何提供最小化的子面板？

![在此处输入图像描述](../Images/89fb4d57c1cea43947e8852483ecc3c2.png)

正如您在一个窗格中的图像中看到的那样，有 4 个菜单（不知道它们是什么），当单击标题旁边的箭头时，它们可以最小化。我不确定这是 Swing 组件还是易于实现。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T12:36:16.907

[http://www.coderanch.com/t/344454/GUI/java/Accordion-Widget](http://www.coderanch.com/t/344454/GUI/java/Accordion-Widget)

或者

[https://blogs.oracle.com/geertjan/entry/pluggable_accordion](https://blogs.oracle.com/geertjan/entry/pluggable_accordion)

您也可以尝试通过“java swing手风琴”找到

# javascript - Node Jsdom 爬取谷歌的反向图片搜索

> ID：13972240
> 
> 赞同：3
> 
> 时间：2012-12-20T12:28:36.310
> 
> 标签：javascript, node.js, httprequest, scrape, jsdom

我想以编程方式查找给定图像 URL 的类似图像的 URL 列表。我找不到任何免费的图片搜索 API，所以我试图通过抓取 Google 的[Search by Image](http://www.google.ca/insidesearch/features/images/searchbyimage.html)来做到这一点。

如果我有图片 URL，请说[http://i.imgur.com/oLmwq.png](http://i.imgur.com/oLmwq.png)，然后导航到[https://www.google.com/searchbyimage?&image_url=http://i.imgur.com/oLmwq .png](https://www.google.com/searchbyimage?&image_url=http://i.imgur.com/oLmwq.png)提供相关的图像和信息。

如何[`jsdom.env`](https://github.com/tmpvar/jsdom#easymode)生成浏览器从上述 URL 获取的 HTML？

这是我尝试过的（*CoffeeScript*）：

```
jsdom = require 'jsdom'
url = 'https://www.google.com/searchbyimage?&image_url=http://i.imgur.com/oLmwq.png'
jsdom.env
    html: url
    scripts: [ "http://code.jquery.com/jquery.js" ]
    features:
        FetchExternalResources: ['script']
        ProcessExternalResources: ['script']
    done: (errors, window) ->
        console.log window.$('body').html() 
```

您可以看到 HTML 与我们想​​要的不匹配。这是 Jsdom 的 HTTP 标头的问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T00:19:41.180

对于这样的任务，我发现[request](https://github.com/mikeal/request) + [Cheerio](https://github.com/MatthewMueller/cheerio)比 jsdom 更容易。我看到您已经找到了答案，但我想我会提到它作为替代解决方案。

例子：

```
var request = require('request'),
    cheerio = require('cheerio');

var google = 'https://www.google.com/searchbyimage';
var image = 'http://i.imgur.com/oLmwq.png';

var options = {
  url: google,
  qs: { image_url: image },
  headers: { 'user-agent': 'Mozilla/5.0 (X11; Linux i686) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11' }
};

request(options, function (err, res, body) {
  var $ = cheerio.load(body);
  …
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T14:14:06.410

问题是 Jsdom 的 User-Agent HTTP 标头。一旦设置好一切（几乎）工作：

```
jsdom = require 'jsdom'
url = 'https://www.google.com/searchbyimage?&image_url=http://i.imgur.com/oLmwq.png'
jsdom.env
    html: url
    headers:
        'User-Agent': 'Mozilla/5.0 (X11; Linux i686) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11'
    scripts: [ "http://code.jquery.com/jquery.js" ]
    features:
        FetchExternalResources: ['script']
        ProcessExternalResources: ['script']

    done: (errors, window) ->
        $ = window.$
        $('#iur img').parent().each (index, elem) ->
            href = $(elem).attr 'href'
            url = href.split('?')[1].split('&')[0].split('=')[1]
            console.log url 
```

这给了我们一个[很好的视觉相似图像列表](https://gist.github.com/raw/4358997/3189d070eb081d282a18d1556c541e2c28182879/images.txt)。现在唯一的问题是 Jsdom 返回结果后会抛出错误：

```
timers.js:103
            if (!process.listeners('uncaughtException').length) throw e;
                                                                      ^
TypeError: Cannot call method 'call' of undefined
    at new <anonymous> (/project-root/node_modules/jsdom/lib/jsdom/browser/index.js:54:13)
    at _.Zl (https://www.google.com/xjs/_/js/s/c,sb,cr,cdos,jsa,ssb,sf,tbpr,tbui,rsn,qi,ob,mb,lc,hv,cfm,klc,kat,aut,esp,bihu,amcl,kp,lu,m,rtis,shb,sfa,hsm,pcc,csi/rt=j/ver=3w99aWPP0po.en_US./d=1/sv=1/rs=AItRSTPrAylXrfkOPyRRY-YioThBMqxW2A:1238:93)
    at _.jm (https://www.google.com/xjs/_/js/s/c,sb,cr,cdos,jsa,ssb,sf,tbpr,tbui,rsn,qi,ob,mb,lc,hv,cfm,klc,kat,aut,esp,bihu,amcl,kp,lu,m,rtis,shb,sfa,hsm,pcc,csi/rt=j/ver=3w99aWPP0po.en_US./d=1/sv=1/rs=AItRSTPrAylXrfkOPyRRY-YioThBMqxW2A:1239:399)
    at _.km (https://www.google.com/xjs/_/js/s/c,sb,cr,cdos,jsa,ssb,sf,tbpr,tbui,rsn,qi,ob,mb,lc,hv,cfm,klc,kat,aut,esp,bihu,amcl,kp,lu,m,rtis,shb,sfa,hsm,pcc,csi/rt=j/ver=3w99aWPP0po.en_US./d=1/sv=1/rs=AItRSTPrAylXrfkOPyRRY-YioThBMqxW2A:1241:146)
    at Object._onTimeout (https://www.google.com/xjs/_/js/s/c,sb,cr,cdos,jsa,ssb,sf,tbpr,tbui,rsn,qi,ob,mb,lc,hv,cfm,klc,kat,aut,esp,bihu,amcl,kp,lu,m,rtis,shb,sfa,hsm,pcc,csi/rt=j/ver=3w99aWPP0po.en_US./d=1/sv=1/rs=AItRSTPrAylXrfkOPyRRY-YioThBMqxW2A:1248:727)
    at Timer.list.ontimeout (timers.js:101:19) 
```

# javascript - 如何从javascript同步调用indexeddb方法

> ID：13972243
> 
> 赞同：3
> 
> 时间：2012-12-20T12:28:40.927
> 
> 标签：javascript, asynchronous, synchronous, indexeddb

我在java脚本中有一个方法说**method1 ，它有另一种方法说****method2**调用。**method2**在 method2() 调用之后返回一个在 method1 中需要的值。

```
var userObj={"first": [{'Key':'1',
               'value':'student',},
                          {'Key':'2',
               'value':'Teacher',}
                 ],
        "second":[{'Key':'1',
               'class':'theory',},
                          {'Key':'2',
               'value':'lab',}
                 ]

            };

function method1(){
    var dataArray =method2(userObj.first);  
    alert("dataArray size -"+dataArray.length);
}

function method2(firstData) {

        var dataArray = new Array();
        $.indexedDB("SelfAssessment").objectStore("First_Sheet", "readonly").each(function(elem) {
            dataArray .push(elem.value);
        }).done(function() {
            alert("inside first Data");
            return dataArray ;
        });
        return dataArray ;

    } 
```

在上面的代码中，method2 返回我必须在 method1 中使用的 dataArray。那么该怎么做呢？

因为，method2 是异步调用，所以我在“方法 2 内的警报”之前得到“第一个警报”。如何以顺序的方式得到这个？

请帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T14:43:42.260

没有`method2`返回值。相反，传递一个回调函数，`method2`一旦获取到值就会执行：

```
function method2(firstData, completionCallback) {

    var dataArray = new Array();
    $.indexedDB("SelfAssessment").objectStore("First_Sheet", "readonly").each(function(elem) {
        dataArray.push(elem.value);
    }).done(function() { completionCallback(dataArray) });
} 
```

并像这样调用它：

```
function method1(){
    method2(userObj.first, function(dataArray) {
        // inside a function that is called by method2 when the value is fetched
        alert("dataArray size -"+dataArray.length);

        // do everything with dataArray inside this function
    }); 
} 
```

# php - 是否有任何已部署源代码的认证实体？

> ID：13972244
> 
> 赞同：2
> 
> 时间：2012-12-20T12:28:43.753
> 
> 标签：php, web-applications, deployment, web-deployment, sign

我的问题是关于部署的。我们遇到很多麻烦，客户说他们要求修改的东西被修改了，几天后又被撤消了。我们怀疑我们的（第三方）服务器可能正在使用旧版本的代码恢复备份。在内部我们使用SVN，但它对客户端没有任何意义，并且我们无法控制部署后的文件。

所以，我们想要一个服务，它会签署我们的部署并在网站上放置一个带有最新修改日期的徽章。并且，如果可能的话，使用文件的 snapshop 或 MD5。

不知道有没有这样的服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:31:38.780

您可以使用 SVN 关键字替换来完成此[http://svnbook.red-bean.com/en/1.7/svn.advanced.props.special.keywords.html](http://svnbook.red-bean.com/en/1.7/svn.advanced.props.special.keywords.html)

因此，例如，您可以使用`$Data$`which 将`$Date: 2006-03-15 02:33:03 -0500 (Wed, 15 Mar 2006) $`在提交时扩展。然后，您可以在 PHP 中解析它并将其显示在您想要的页面上。

[如果您在底部看到svnrev div](https://stackoverflow.com/questions/13972244/are-there-any-certifying-entity-for-deployed-source-code/13972297#svnrev) ，认为 stackoverflow 可能会做类似的事情。

# c++ - 使用 boost 属性树解析 JSON

> ID：13972252
> 
> 赞同：9
> 
> 时间：2012-12-20T12:29:18.913
> 
> 标签：c++, json, boost, boost-propertytree, boost-foreach

我正在构建一个从 themoviedb.com 获取电影信息的应用程序。该信息以 JSON 文件的形式提供。我正在尝试使用 boost 属性树来存储信息。但是有一个小问题。

我通过以下代码说明问题：

```
#include <vector>
#include <boost/property_tree/ptree.hpp>
#include <boost/property_tree/json_parser.hpp>
#include <boost/foreach.hpp>

using namespace std;
using boost::property_tree::ptree;

class single_t{
    int             sID;
    string          sName;
public:
    void            setID(int ID){sID=ID;}
    int             getID(){return sID;}
    void            setName(string Name){sName=Name;}
    string          getName(){return sName;}
};

typedef vector<single_t*> multiple_t;

class foo{
    string          fTitle;
    multiple_t      fItems;
public:
    string          getTitle(){return fTitle;}
    void            setTitle(string Title){fTitle=Title;}
    multiple_t      getItems(){return fItems;}
    void            setItems(multiple_t Items){fItems = Items;}
    void            setItems(single_t Item){fItems.push_back(&Item);}
};

int main () {
    try{
        string response = "{\"title\":\"Foo\",\"items\":[{\"id\":123,\"name\":\"test1\"},{\"id\":456,\"name\":\"test2\"}]}";

        ptree pt;
        stringstream ss; ss << response;
        read_json(ss, pt);
        foo results;
        results.setTitle(pt.get<string>("title"));
        BOOST_FOREACH(ptree::value_type &v,pt.get_child("items")){
            single_t result;
            result.setID(v.second.get<int>("id"));
            result.setName(v.second.get<string>("name"));
            results.setItems(result);
        }
        cout << "Tilte: " << results.getTitle() << endl;
        cout << "Items:" << endl;
        for (int i=0; i!=results.getItems().size(); i++) {
            cout << "\tID: " << results.getItems()[i]->getID()<< endl;
            cout << "\tName: " << results.getItems()[i]->getName()<< endl;
        }
    }
    catch (exception& e)
    {
        cout << "Exception: " << e.what();
    }

} 
```

但是当我运行它时，我得到以下输出：

```
Tilte: Foo
Items:
  ID: 456
  Name: test2
  ID: 456
  Name: test2 
```

有谁知道我做错了什么？我猜它在 BOOST_FOREACH 代码中。

PS：将 Xcode 4.5.2 与 LLVM GCC 4.2 编译器一起使用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T12:35:44.137

问题不`property_tree`在于，问题在于您尝试将指向局部变量的指针存储在向量中。您可以按值保存，或使用一些智能指针（例如`boost::shared_ptr`）。

问题：

```
void            setItems(single_t Item){fItems.push_back(&Item);} 
```

退出此函数后，局部变量`Item`将被销毁，因此您有悬空指针。

# objective-c - 是否保留代表？

> ID：13972259
> 
> 赞同：8
> 
> 时间：2012-12-20T12:29:35.723
> 
> 标签：objective-c, ios, xcode

我知道，代表永远不会被保留！曾经！

但是谁能解释我为什么永远不会保留代表？...

提前感谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-20T12:33:58.370

这是一个内存管理的事情。

Objective-C 使用引用计数来保持内存清洁。这确实意味着它无法检测到循环关系。

例子：

*   对象 A 拥有对象 B。对象 B 由对象 A 保留。
*   对象 B 有一个对象 A 的委托。对象 A 由对象 B 保留。
*   对象 C 拥有对象 A。对象 A 由对象 C 保留。
*   对象 A 现在的 retainCount 为 2，对象 B 的 retainCount 为 1
*   对象 C 被释放，并释放对象 A
*   对象 A 和 B 现在的 retainCount 为 1，因为它们彼此拥有。系统不会释放它们，因为 retainCount 仍然是 1（仍然由另一个对象拥有）
*   内存泄漏！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T12:32:30.907

由你决定。如果您声明将其保留（`strong`在 ARC 中），它将被保留。

规则是不要保留它，因为它已经在其他地方保留了，更重要的是**您将避免保留周期**。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T12:34:56.273

要扩展 djromero 的答案：

如果您有 a`UIViewController`其中包含 a `UITableView`，则控制器很可能会保留该表，它将是它的委托/数据源。如果表保留了委托/数据源，那么它们将相互保留，因此永远不会被释放。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T12:33:37.393

整个想法是委托应该总是比将其分配为委托的对象寿命长。因此，webview 将在分配的委托之前发布。

# visual-studio-2012 - VS 2012 / Powershell 在获得 Windows 商店开发者许可证时冻结

> ID：13972273
> 
> 赞同：0
> 
> 时间：2012-12-20T12:30:12.737
> 
> 标签：visual-studio-2012, windows-store

我刚刚安装了 Windows 8 和 Visual Studio 2012。现在我想创建一个 Windows 商店应用程序。

但是每次我尝试获得开发人员许可证时，一切都冻结了......

示例 PowerShell：

1.  Show-WindowsDeveloperLicenseRegistration
2.  “接受”对话框
3.  登录
4.  对话框“获取许可证”（我使用的是德语版本，所以信息可能不同）
5.  对话框关闭，PowerShell 控制台仍处于冻结状态

同样的事情发生在 Visual Studio 中（后台进程没有响应）。任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T13:35:05.967

我搜索了几个小时，但我找到的唯一解决方案是删除 Visual Studio 并完全重新安装它......

# c# - Windows Phone 7 - 更新数据库而不更改用户数据

> ID：13972274
> 
> 赞同：0
> 
> 时间：2012-12-20T12:30:13.707
> 
> 标签：c#, database, windows-phone-7

我正在使用数据库中的数据创建应用程序。数据库有几列，我想按用户更改一列。那将是具有布尔值 (true|false) 的列。默认情况下，所有行都有 false 值。用户可以将其更改为 true。现在我已经创建了很多行，但有一天我更新了我的应用程序，我想添加更多行。所以现在我正在计划如何使用户更改的行保持真实，但用户仍然可以通过更新获得新数据。我怎样才能做到这一点？有没有这方面的文章？

# asp.net-mvc-3 - MVC3 razor 确认邮件

> ID：13972277
> 
> 赞同：0
> 
> 时间：2012-12-20T12:30:24.863
> 
> 标签：asp.net-mvc-3, sql-server-2008, razor

我正在将确认邮件发送到注册表，我正在关注此 URL

[http://blogs.microsoft.co.il/blogs/shair/archive/2011/12/06/email-confirmation-asp-net-mvc-web-application.aspx#comments](http://blogs.microsoft.co.il/blogs/shair/archive/2011/12/06/email-confirmation-asp-net-mvc-web-application.aspx#comments)

```
but i am getting error like "Unable to connect to the sqlserverdatabase" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:01:29.300

很明显，您似乎无法访问您的 sql server 数据库。

尝试使用同一用户连接 sql management studio。您的权限似乎有问题，或者您的连接详细信息可能有错字。

# sql - 以下列方式创建 SQL Server 存储过程的缺点是什么？

> ID：13972280
> 
> 赞同：5
> 
> 时间：2012-12-20T12:30:44.850
> 
> 标签：sql, sql-server, tsql, stored-procedures

我们将所有数据库对象作为可重新运行的脚本（视图、函数、触发器和存储过程等...）签入源代码控制

在部署时，我们需要确保所有脚本都是可重新运行和可重复的，以便将存储过程创建/更新到最新版本。

以以下方式创建脚本是否有任何缺点。

```
IF NOT EXISTS 
(
    SELECT      * 
    FROM        INFORMATION_SCHEMA.ROUTINES
    WHERE       ROUTINE_SCHEMA = 'dbo'
    AND         ROUTINE_NAME = 'MyStoredProcedure'
)
BEGIN
    EXEC ('CREATE PROCEDURE [dbo].[MyStoredProcedure] AS SELECT 1')
    -- ALSO DO ANY INITIAL GRANT PRIVILEGE SCRIPTING HERE
END
GO
ALTER PROCEDURE [dbo].[MyStoredProcedure] (
    @param1 INT,
    @param2 NVARCHAR(50) = 'Default String'
)
AS
BEGIN
    -- DO SOMETHING WITH @param1 AND @param2
    SELECT 1;
END
GO 
```

本质上，脚本会检查对象是否存在于相关系统视图中，如果不存在，则某些动态 sql 会将其创建为存根，以解决`CREATE PROCEDURE/GO`条件块中不允许出现的语句问题。然后它通过`ALTER`.

所以好处对我来说是显而易见的，我只是想知道这样做有什么缺点......除了编写稍微冗长的脚本的轻微开销之外。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T12:57:19.903

这里是 10 年的 SQL Server 开发人员/架构师，除了创建执行此操作的脚本的（相对轻微的）前期成本之外，我想不出任何缺点。

如果您担心在过程更改时不会重新编译在创建时编译为微不足道的计划，您可以为每个计划添加对 SP_RECOMPILE 的显式调用，但我从来没有遇到过 SQL Server 的这个问题（我有它与 DB2），所以我认为这是过度谨慎。

这是一个有趣且我认为有用的方法。

# rest - 批量更新的宁静服务

> ID：13972281
> 
> 赞同：1
> 
> 时间：2012-12-20T12:30:46.127
> 
> 标签：rest

我有一个我们打算用来批准交易的网络服务。

这是一个批处理过程，但我们认为 PUT 是最合适的方法，但认为它通常应该保留给单个事务。

我们是否应该在此过程中坚持使用 PUT 并传递类似于以下内容的有效负载：

```
{
    "Transactions": [
        {
            "TxId": "gtx-32",
            "VendorUserId" "76",
            "Status": "A"
        },
        {
            "TxId": "gtx-76",
            "VendorUserId" "76",
            "Status": "D"
        }
    ]
} 
```

以上会将 TxId: gtx-32 设置为状态 A 和 TxId: gtx-76 设置为状态 D

然后，我们将回复那些具有更新状态的交易的 json 对象。

如果任何一个事务请求更新到无效状态，则响应将简单地具有针对事务的“旧”状态（我们是否应该在其中包含错误消息？）。

如果 PUT 不是在这里采用的正确方法，我们欢迎对替代方案提出建议。

我们知道这实际上只是记录的部分更新，因此不是真正的 PUT，但这绝对是更新......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T12:41:55.480

这个`PUT`动词的意思是“把这个文件放在这里”。重要的是，`PUT`请求的 URL 旨在成为文档应该“存储”的位置，即`GET`URL 上的 a 将返回最后放置在那里的文档。

在您的情况下，除非您将您的批次信息“上传”到特定位置并且可以将您的批次视为自身的文档，`PUT`否则可能不是您的意思。

相反，您可能应该使用更通用的`POST`，旨在用于要求现有资源**处理**请求中包含的文档。然后响应表示处理操作的结果。

`POST`可能是 HTTP 协议中最通用的动词。“过程”可以是你需要的任何东西，所以当你没有发现任何其他动词反映你想要执行的活动时，通常最好选择它。

# android - 如何从父活动中调用正在运行的子活动的方法？

> ID：13972283
> 
> 赞同：4
> 
> 时间：2012-12-20T12:30:48.793
> 
> 标签：android, methods, parent

我正在开发一个在 MainActivity.java 中创建的具有 3 个选项卡的 android 应用程序。每个选项卡都有自己的活动。在这些活动中，我有一个名为“Refresh()”的方法来更新该选项卡中的列表视图。当用户单击按钮时，会调用方法“refreshTab(View v)”。

```
// Tab refreshen
public void refreshTab (View v) {
    Activity MyActivity = this.getCurrentActivity();        
    MyActivity.Refresh();       
} 
```

这是抛出“Activity 类型的方法 Refresh() 未定义。但是，“MyActivity”充满了选项卡活动。我该如何让它工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T12:34:03.257

您需要将活动转换为您的活动类型。现在您正在尝试调用没有“刷新”功能的 Android 类活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T12:43:05.520

您的按钮处理程序有点过于复杂（即使它只有两行）......

只需执行以下操作：

```
// Tab refreshen
public void refreshTab (View v) {  
    Refresh();       
} 
```

如果您定义的方式`OnClickListener`是直接内联的（但仍在您的活动类中），您可能需要添加一点方向，`MyClassType`您的类的名称在哪里 extends `Activity`：

```
// Tab refreshen
public void refreshTab (View v) {  
    MyClassType.this.Refresh();       
} 
```

# php - 选择在另一个表中具有一组值的行

> ID：13972284
> 
> 赞同：2
> 
> 时间：2012-12-20T12:30:55.927
> 
> 标签：php, mysql

我有以下问题。

我在我的项目中有用户过滤器，我想从数据库中选择只有在表仪器中具有 $fm_instrument 指定的所有仪器的用户。

表用户：

```
id_user   |  user_type   |
--------------------------
|    1    |      2       | 
```

表仪器如下所示：

```
| id_user_instrument   |  id_user     | instrument_title |
----------------------------------------------------------
|            1         |      1       |        organ     |
|            2         |      1       |        flute     |
|            3         |      1       |        piano     | 
```

示例：过滤器返回 $fm_instrument='flute,organ'

我这样做：

```
if(isset($fm_instrument) && $fm_instrument != '')
{
$instrument_arr = explode(',',$fm_instrument);
$instrument_sql = '';
foreach ($instrument_arr as $i=>$val) // pro kazdy nastroj
{
    if($i != 0) {$instrument_sql.=" AND ";}
    $instrument_sql .= " (  instrument_title='".$val."' ) ";
}
$instrument_sql_part = " AND ($instrument_sql)";
}    

$user_sql ="SELECT * FROM `user` AS pu 
LEFT JOIN instrument AS i USING(`id_user`) WHERE user_type=2 $instrument_sql_part "; 
```

但它不适用于一种以上的乐器。

我确信使用正确的 mysql_query 有更简单的解决方案，但我对 mysql 的了解并不是那么好。

谢谢你对我的耐心。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T12:38:18.433

你应该试试这个

```
SELECT 
  *
FROM 
  users
WHERE
  user_type = 2
AND
  id_user IN 
    ( SELECT 
        id_user 
      FROM (
        SELECT 
          id_user, 
          GROUP_CONCAT( instrument_title ) instrument_titles
        FROM 
          instrument 
        WHERE 
          FIND_IN_SET( instrument_title, 'flute,organ' )
        GROUP BY 
          id_user ) tmp
      WHERE 
        LENGTH( instrument_titles ) = LENGTH( 'flute,organ' ) ); 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/2b94b/11/0)

# python - matplotlib中线图的线颜色随数据索引而变化？

> ID：13972287
> 
> 赞同：7
> 
> 时间：2012-12-20T12:30:58.153
> 
> 标签：python, matplotlib, plot, line, colorbar

所以我有一个二维数据数组，可以在同一轴上生成许多时间序列图。目前，每条线的颜色只是循环显示，没有任何意义。

我想以某种方式将每行的颜色映射到其数据的索引 - 因此一组具有低索引的数据显示为红色，然后在高索引处褪色为蓝色。

澄清一下，每条线都应该是相同的颜色，不会随着时间的推移而褪色。差异应该在每一行之间。

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-20T13:44:37.407

通常您将颜色图传递给绘图函数，但您也可以将数字或数组传递给颜色图并获取颜色作为回报。

因此，要根据变量为每一行着色，请执行以下操作：

```
numlines = 20

for i in np.linspace(0,1, numlines):
    plt.plot(np.arange(numlines),np.tile([i],numlines), linewidth=4, color=plt.cm.RdYlBu(i)) 
```

![在此处输入图像描述](../Images/324f939a03241797b079efac2bf47d98.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T12:38:25.163

`plot(x,y,'r')` 对于红线

`plot(x,y,'b')` 对于蓝线

* * *

一个像样的圣诞节需要更多颜色吗？见[这里](http://matplotlib.org/api/colors_api.html)。

* * *

**更新**：

如您所问，手动设置颜色的行太多。那么这个怎么样：

```
from matplotlib.pyplot import *

x = list(range(10))
amount = 20

for i in range(amount):
    y = [j-i for j in x]
    c = [float(i)/float(amount), 0.0, float(amount-i)/float(amount)] #R,G,B
    plot(x, y, color=c)
show() 
```

它给：

![在此处输入图像描述](../Images/94ae6bd1fcbb944f83507b60f4be8665.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T13:40:22.270

在这里，我使用 rgb 颜色来获得 200 种不同颜色的数组。我没有时间按强度对它们进行排序，但是对数组进行一些打印输出，您可能会弄清楚如何。一个想法是按（排序的）元组之和的索引进行排序。

```
#colorwheel
import matplotlib.pyplot as plt
from itertools import permutations
from random import sample
import numpy as np

#Get the color-wheel
Nlines = 200
color_lvl = 8
rgb = np.array(list(permutations(range(0,256,color_lvl),3)))/255.0
colors = sample(rgb,Nlines)

#Plots
x = np.linspace(0,2*np.pi)

for i in range(Nlines):
    plt.plot(i*np.cos(x),i*np.sin(x),color=colors[i]) #color from index
plt.savefig("SO_colorwheel.png")
plt.show() 
```

给![在此处输入图像描述](../Images/7b46ba85b7085b880bdeb7def3e6c097.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-01-22T20:28:33.743

如果有人仍在寻找一种方法来使用一些颜色图沿路径为曲线着色，而不使用 a `scatter`，我认为更好的方法是将其拆分为段并调用`colormap`颜色

```
import matplotlib.pyplot as plt
import numpy as np

def plot_colored(x, y, c, cmap=plt.cm.jet, steps=10):
    c = np.asarray(c)
    c -= c.min()
    c /= c.max()
    it=0
    while it<с.size-steps:
        x_segm = x[it:it+steps+1]
        y_segm = y[it:it+steps+1]
        c_segm = cmap( c[it+steps//2] )
        plt.plot(x_segm, y_segm, c=c_segm)
        it += steps

# sample track
t = np.r_[0:10:1000j]
x = t**.25*np.sin(2*np.pi*t)
y = t**.25*np.cos(2*np.pi*t)

plt.figure()
plot_colored(x, y, t) 
```

（较小的步长使其更平滑但更慢） ![例子](../Images/baa7c11fb26fb81540fd0df0d4b8d1fb.png)

# ruby-on-rails - 更改关系列表而不保存它

> ID：13972288
> 
> 赞同：0
> 
> 时间：2012-12-20T12:31:04.347
> 
> 标签：ruby-on-rails, model-associations

我想更改关系列表而不保存它。

```
foo = Foo.first
foo.bars = []
foo.bars.reload
foo.bars
#=> [<Bar...>, ...] 
```

我想要这段代码而不做数据库事务（重新加载除外），它可能在一个块或一个 gem 中，......但我不想做任何回滚。

我知道下面的代码可以工作，但我需要保持关系在不同的函数中进行修改和验证，所以这不是我想要的。

```
foo = Foo.first
@bars = foo.bars
@bars = []
foo.bars
#=> [<Bar...>, ...] 
```

如果您需要更多信息，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T10:12:06.690

尝试使用另一个变量来克隆关系以供以后使用。

使用两个单独的对象，您可以修改一个并使用第二个的关系，然后保存您需要的对象。

```
# rails < 3.1
new_record = old_record.clone

#rails >= 3.1
new_record = old_record.dup 
```

# wpf - 如何引发绑定到 ListBox 项的 WPF 命令？

> ID：13972289
> 
> 赞同：0
> 
> 时间：2012-12-20T12:31:06.987
> 
> 标签：wpf, xaml, data-binding, command

我的 Excel 加载项项目中有一个 WPF `UserControl`。这个控件有一个`ListBox`和一个`StackPanel`带有两个按钮。`ListBox`由项目组成，每个项目对应一个 Excel 工作簿工作表。此外，我们有两个命令来隐藏/显示工作表，然后`CheckBox`选中/取消选中 es。这部分很好。

问题是如何将这些现有命令绑定到下面堆栈面板中的按钮。有必要我们可以在 ListBox 中多选几个项目，然后单击按钮并获得结果。

XAML 代码：

```
<UserControl x:Class="ListsAddin.ListManagementControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <UserControl.Resources>
        <Style x:Key="CheckBoxStyle" TargetType="{x:Type CheckBox}">                
                <Trigger Property="IsChecked" Value="True">
                    <Setter Property="Command" Value="{Binding HideSheetCommand}"/>
                </Trigger>

                <Trigger Property="IsChecked" Value="False">
                    <Setter Property="Command" Value="{Binding ShowSheetCommand}"/>
                </Trigger>               
            </Style.Triggers>
        </Style>
    </UserControl.Resources>

    <StackPanel >
        <ListBox Name="lb" ItemsSource="{Binding lst}" Margin="0,0,0,7" >

            <ListBox.ItemTemplate>    
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <Label Content="{Binding Path=SheetName}"/>
                        <CheckBox IsChecked="{Binding Path=IsHidden}"
                  Style="{StaticResource CheckBoxStyle}"/>
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>

        <StackPanel>
            <Button Content="HideSheet"  Command="{ ?? }"/>
            <Button Content="ShowSheet" Command="{ ?? }" />
        </StackPanel>
    </StackPanel>
</UserControl> 
```

# c++ - 对于浮点值 a：对于 a 的有限值，a*0.0 == 0.0 是否总是评估为真？

> ID：13972293
> 
> 赞同：10
> 
> 时间：2012-12-20T12:31:22.897
> 
> 标签：c++, c, floating-point, ieee-754

我一直假设以下测试对于有限值（无 INF，无 NAN）总是会成功`somefloat`：

```
assert(somefloat*0.0==0.0); 
```

在[Multiply by 0 optimization](https://stackoverflow.com/questions/4956033/multiply-by-0-optimization)中指出，`double a=0.0`严格`double a=-0.0`来说并不是同一件事。

所以我想知道这是否会导致某些平台出现问题，例如上述测试的结果是否取决于`a`蜜蜂的正面或负面。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-20T12:36:53.930

如果您的实现使用 IEEE 754 算术（大多数都使用），那么正零和负零将比较相等。由于对于有限的表达式的左侧只能是正零或负零`a`，因此断言将始终为真。

如果它使用某种其他类型的算术，那么只有实现者，并希望实现特定的文档，可以告诉你。可以说（见评论）标准的措辞可以被认为暗示它们在任何情况下都必须比较相等，当然没有理智的实现会这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T12:33:37.440

-0.0 == 0.0 根据双重比较规则。

对于*非有限*值 (+-Inf, Nan) somefloat*0.0 != 0.0。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T12:37:03.150

`assert`只要`somefloat`不是无穷大或 NaN ，您就永远不会失败。在不支持无穷大或 NaN 的系统上，编译器可以简单地对其进行优化。

# zend-framework2 - Zend Framework 2 设置主体

> ID：13972294
> 
> 赞同：0
> 
> 时间：2012-12-20T12:31:23.470
> 
> 标签：zend-framework2

有没有办法在 Zend Framework 2 中设置主体？在 Zend Framework 1 中，我可以这样做

```
$this->getResponse()->setBody('Hello World') 
```

我找到了一种在 Zend Framework 2 中设置内容的方法，但这也覆盖了布局，这不是我想要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:16:51.263

这是另一种方法来做到这一点......

# ModuleName/src/ModuleName/Controller/IndexController.php

```
<?PHP
namespace ModuleName\Controller;

use Zend\Mvc\Controller\AbstractActionController;
use Zend\View\Model\ViewModel;

class IndexController extends AbstractActionController
{
    protected $helloWorldTable;

    public function indexAction()
    {
        return new ViewModel(array(
            'foo' => 'Hello World From Zend Framework 2!',
        ));
    }
} 
```

# ModuleName/view/ModuleName/index/index.phtml

```
<?PHP
$this->headTitle('Some Site...');
echo "$hello";
?> 
```

# 应用程序/视图/布局/layout.phtml

文档类型（）；?>

```
<html lang="en">
    <head>
        <meta charset="utf-8">
        <?php echo $this->headMeta()->appendName('viewport', 'width=device-width, initial-scale=1.0') ?>

        <!-- Le styles -->
        <?php echo $this->headLink(array('rel' => 'shortcut icon', 'type' => 'image/vnd.microsoft.icon', 'href' => $this->basePath() . '/images/favicon.ico')) ?>

        <!-- Scripts -->
        <?php echo $this->headScript()->prependFile($this->basePath() . '/js/html5.js', 'text/javascript', array('conditional' => 'lt IE 9',))
                                      ->prependFile($this->basePath() . '/js/bootstrap.min.js')
                                      ->prependFile($this->basePath() . '/js/jquery.min.js') ?>

    </head>
    <body>
        <div class="navbar navbar-inverse navbar-fixed-top">
            <div class="navbar-inner">
                <div class="container">
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>
                    <a class="brand" href="<?php echo $this->url('index') ?>"><?php echo $this->translate('Spamus') ?></a>
                    <div class="nav-collapse collapse">
                        <ul class="nav">
                            <li class="active"><a href="<?php echo $this->url('index') ?>"><?php echo $this->translate('Home') ?></a></li>
                        </ul>
                    </div><!--/.nav-collapse -->
                </div>
            </div>
        </div>
        <div class="container">
            <?php echo $this->content; ?>
            <hr>
            <footer>
                <p>&copy; 2012 - 2013 by YourSite <?php echo $this->translate('All rights reserved.') ?></p>
            </footer>
        </div> <!-- /container -->
        <?php echo $this->inlineScript() ?>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-21T07:38:48.023

无论您在控制器中更改了响应体，当 zf2 MvcEvent::EVENT_RENDER 触发时，都会重建一个新的响应体。所以正确的方法是在MvcEvent::EVENT_RENDER**之后更改响应正文。**

将此添加到您的控制器：

```
 $this->getServiceLocator()->get('Application')->getEventManager()->attach(\Zend\Mvc\MvcEvent::EVENT_RENDER, function($event){
     $event->getResponse()->setContent('foobar');
 }, -10000); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-21T14:08:11.140

我终于得到了解决方案。要更改布局中的内容，只需输入控制器的操作

```
$this->layout()->content = 'foobar'; 
```

# sharepoint-2010 - 使用 Microsoft.Sharepoint.Client.Taxonomy.dll 从 Sharepoint 2010 Server 获取 TaxonomySession TermStore TermSet Term

> ID：13972295
> 
> 赞同：0
> 
> 时间：2012-12-20T12:31:26.093
> 
> 标签：sharepoint-2010, client, taxonomy

我正在编写一个 c++/c#客户端应用程序以与使用分类法的 Sharepoint 2010 站点
[通信/1/9/E1987F6C-4D0A-4918-AEFE-12105B59FF6A/sharepointclientcomponents_x64.msi](http://download.microsoft.com/download/E/1/9/E1987F6C-4D0A-4918-AEFE-12105B59FF6A/sharepointclientcomponents_x64.msi)

客户端用户可以通过从分类术语集中收集的值的下拉列表中选择值来在表单中输入值。为了获取 TermSet，我必须首先获得一个 TaxonomySession：

```
TaxonomySession taxonomySession = TaxonomySession.GetTaxonomySession(clientContext);
clientContext.Load(taxonomySession, 
    ts => ts.TermStores.Include(
    store => store.Name,
    store => store.Groups.Include(
    group => group.Name))
);
try
{
    clientContext.ExecuteQuery();
}
catch (Exception e)
{
    string err = e.Message; // Cannot find proxy for type with id "{981cbc68-9edc-4f8d-872f-71146fcbb84f}"
} 
```

我不确定原因是否是对 Sharepoint 2010 服务器使用 Microsoft.Sharepoint.Client.Taxonomy.dll (Sharepoint 2013) 是非法的，还是我做错了什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T16:41:58.390

针对 Sharepoint 2010 服务器使用 Microsoft.Sharepoint.Client.Taxonomy.dll (Sharepoint 2013) 只会呈现错误。

sharepoint 2010 (Microsoft.Sharepoint.Taxonomy.dll) 有一个服务端 dll，但是您必须在场中的一台 sharepoint 计算机上。（我认为需要 .NET 3.5，在 .NET 4.0 中不起作用）

# c# - 将文件记录到 C# 中的 Excel 工作表

> ID：13972298
> 
> 赞同：2
> 
> 时间：2012-12-20T12:31:43.893
> 
> 标签：c#, .net, regex, visual-studio-2010, logging

我有一个类似于下面的日志文件，我想将此日志文件转换为 excel 表。

样本日志文件

```
DateTime: 2012-12-10 20:27:10
Command: ALTER INDEX [Mypageviews] ON [WhosOff].[dbo].[PageViews] REORGANIZE WITH (LOB_COMPACTION = ON)
Comment: ObjectType: Table, IndexType: NonClustered, ImageText: N/A, NewLOB: No, FileStream: N/A, AllowPageLocks: Yes, PageCount: 7639, Fragmentation: 8.1817
Outcome: Succeeded
Duration: 00:00:41
DateTime: 2012-12-10 20:27:51

DateTime: 2012-12-10 20:27:52
Command: ALTER INDEX [MyVisitKeys] ON [WhosOff].[dbo].[Visit] REBUILD WITH (SORT_IN_TEMPDB = OFF, ONLINE = ON)
Comment: ObjectType: Table, IndexType: NonClustered, ImageText: N/A, NewLOB: No, FileStream: N/A, AllowPageLocks: Yes, PageCount: 7229, Fragmentation: 94.4667
Outcome: Succeeded
Duration: 00:00:06
DateTime: 2012-12-10 20:27:58 
```

我希望使用 C# 将上述日志文本文件转换为 excel 表中的以下格式。输出

```
StartTime             IndexName     Dbnanme Tbname
2012-12-10 20:27:10  MyPageviews    WhosOff PageViews
2012-12-10 20:27:52  MyVisitKeys    WhoOff  Visit 
```

谁能告诉我如何编写程序来实现上述输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:39:25.460

在我看来，最简单的方法是将其转换为[CSV 格式](http://en.wikipedia.org/wiki/Comma-separated_values)。所有版本的excel都能很好的识别。但要小心日期、时间、小数和所有其他特定于语言环境的格式化值。Excel 将尝试将所有这些值转换为其内部表示，这只有在计算机区域设置中表示的值才会成功

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T12:40:25.430

我认为您需要将输入解析为有意义的内容，这将是您问题中最复杂的部分。

但是，一旦您拥有某种结构的数据，最基本的方法就是创建一个分隔文本文件（例如 csv），然后可以将其导入 Excel。

为此，只需在每个列值之间放置一个逗号（或您选择的任何分隔符），并将每一行放在一个新行上。

还有更优雅和复杂的解决方案，例如以 Open Office 格式输出 xml 文档，或者访问 Excel 对象模型。正如我所说的，每一个都更优雅，但学习曲线会更陡峭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T12:38:20.703

您可以尝试实现[SmartXls](http://www.smartxls.com/ "SmartXLS")。在那里，您可以轻松地从例如 DataTable 构建 Excel 文件。

否则，请尝试使用 html 表创建文件，将其另存为 .xls 并在 Excel 中打开。或者为什么不只是 .csv 格式？

我没有解析和转换的具体代码示例，但它似乎对大多数人来说足够简单易懂？以下是一些可能有帮助的参考资料：

*   [在 C# 中读取文本文件](http://www.csharp-station.com/HowTo/ReadWriteTextFile.aspx "在 C# 中读取文件")
*   [C# 中的数据表](http://www.dotnetperls.com/datatable "C# 中的数据表")

# javascript - 使 tablesorter 表缩小以适合页面

> ID：13972301
> 
> 赞同：1
> 
> 时间：2012-12-20T12:32:07.547
> 
> 标签：javascript, html, ajax, tablesorter

我有一个由 ajax 和 js 动态填充的 tablesorter 插件表，它工作正常，除了它没有调整任何具有输入标签的单元格宽度。为了澄清起见，我的表格具有用户可以更改的输入单元格以及可更改的下拉列表。填充表格后，最后一列将被保留。有没有办法调整它以便用户可以看到整个表格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:52:55.770

确保该`widthFixed`选项设置为，`false`因为如果`true`您正在动态填充表格，则列宽将以像素为单位设置。

* * *

您是否为输入添加了css？尝试包括 box-sizing 设置：

```
.tablesorter input {
  width: 100%;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T12:48:37.367

尝试在 css 中的桌子上设置一个类，如下所示

```
table { width: 100%; } 
```

# c# - 如何在 wp7 中同时使用 LowprofileImageLoader 和 Image Place holder？

> ID：13972302
> 
> 赞同：0
> 
> 时间：2012-12-20T12:32:09.607
> 
> 标签：c#, windows-phone-7

我们如何在 wp7 应用程序中同时使用 LowprofileImageLoader 和 Image Place holder？我已经浏览了[这个](http://blogs.msdn.com/b/delay/archive/2010/09/02/keep-a-low-profile-lowprofileimageloader-helps-the-windows-phone-7-ui-thread-stay-responsive-by-loading-images-in-the-background.aspx)和[这个](http://blogs.msdn.com/b/delay/archive/2011/09/08/know-your-place-in-life-free-placeimage-control-makes-it-easy-to-add-placeholder-images-to-any-wpf-silverlight-or-windows-phone-application.aspx)链接，但无法一起使用。但是人们在评论中说他们可以通过更改 PlaceImage.cs 中的以下代码来使用两者：

```
if (null != _frontImage)

       {

           if (!System.ComponentModel.DesignerProperties.GetIsInDesignMode(this))

           {

               Delay.LowProfileImageLoader.SetUriSource(this, ((BitmapImage)this.Source).UriSource);

           }

       } 
```

但是当我这样做时，我得到了无效的参数错误。有人可以建议我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:27:34.150

它应该是：

```
if (null != _frontImage)
{
    if (!System.ComponentModel.DesignerProperties.GetIsInDesignMode(this))
    {
        Delay.LowProfileImageLoader.SetUriSource(_frontImage, ((BitmapImage) this.Source).UriSource);
    }
} 
```

您要设置的是 _frontImage 的 UriSource。

# selenium - 在 Sauce.io phpunit selenium 测试中动态设置 $browsers 静态属性

> ID：13972304
> 
> 赞同：5
> 
> 时间：2012-12-20T12:32:16.987
> 
> 标签：selenium, phpunit, saucelabs

我正在使用 SauceLabs 设置一些浏览器测试。我已经能够在本地和通过 Sauce 运行测试，所以我现在尝试将它与我的 Jenkins 安装集成以自动触发构建和浏览器测试。

其中大部分都有效，但我有一个小问题。为了可以在本地和通过 Sauce 运行测试，我想在 phpUnit setup() 函数期间设置 $browsers 静态属性，而不是对其进行硬编码。这似乎不可能。

我正在使用 Sausage 绑定，我的 TestCase 看起来与此演示非常相似：[https ://github.com/jlipps/sausage/blob/master/WebDriverDemo.php](https://github.com/jlipps/sausage/blob/master/WebDriverDemo.php)

我曾尝试在 setUp() 中更新 $browsers 数组，但它似乎从未生效。例如。

```
public function setUp()
{   
    self::$browsers = array(
        'browserName' => getenv('SELENIUM_BROWSER'),
        'desiredCapabilities' => array(
            'version' => getenv('SELENIUM_VERSION'),
            'platform' => getenv('SELENIUM_PLATFORM'),
         )
     );
} 
```

有没有办法从 Jenkins 传递浏览器详细信息，以便测试用例更加灵活？我觉得我在这里遗漏了一些简单的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-30T00:42:31.353

在花了相当多的时间挖掘源代码之后，我找到了“多浏览器”场景的解决方案。chapmatic 关于多个浏览器的断言和给定的答案确实是正确的：如果您在 $browsers 数组中定义了多个浏览器，它不适用于并行测试并且多次运行同一个浏览器。该解决方案仍使用环境变量，但您仍必须使用 $browsers 数组。

因此，首先确保在抽象测试类中定义了 $browsers 数组。然后，假设您定义了 env var BROWSER 并为其分配要测试的浏览器。您可以在扩展 Sauce\Sausage\WebDriverTestCase 的抽象测试类中设置以下静态函数：

```
 public static function browserSetup()
    {   
        switch (getenv('BROWSER')) {
            case 'firefox':
                self::$browsers = array(
                    array(
                        'browserName' => 'firefox',
                        'desiredCapabilities' => array(
                            'platform' => 'self::WIN_VERSION',
                            'version' => self::FIREFOX_VERSION,
                        )   
                    )   
                );  
                break;

            case 'safari':
                //safari desiredCapabilities
               break;

            case 'explorer':
                //ie desiredCapabilities
               break;

           case 'chrome':
             //chrome desiredCapabilities

           default: //This will just use the default $browsers array you defined
         return;
    } 
```

现在定义了 browserSetup()，您必须确保在设置测试套件之前调用它，以便将测试设置为仅在您在 BROWSER 环境变量中指定的浏览器上运行。再来看看PHPUnit_Extensions_Selenium2TestCase，它是Sauce\Sausage\WebDriverTestCase所消耗的；PHPUnit_Extensions_Selenium2TestCase 定义了以下方法：

```
public static function suite($className)
{   
    return PHPUnit_Extensions_SeleniumTestSuite::fromTestCaseClass($className);
} 
```

调用此方法以使用您在 $browsers 数组中指定的所有浏览器设置测试套件，因此您需要在抽象测试类中覆盖此方法，确保在调用 fromTestCaseClass() 之前调用 browserSetup()：

```
public static function suite($className)
{   
    self::browserSetup();
    return PHPUnit_Extensions_SeleniumTestSuite::fromTestCaseClass($className);
} 
```

现在，如果您使用要测试的浏览器定义环境变量 BROWSER，您可以启动您的测试套件，并且您的 $browsers 数组将被您为 BROWSER 环境变量中定义的单个浏览器指定的设置正确覆盖。确保 jenkins 在 Build->Execute shell 部分中正确设置了这个环境变量，一切顺利。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T09:45:35.537

好的，所以我解决了这个问题。如果其他人有同样的问题，这就是我的解决方法。

在 Jenkins 运行的 ANT 脚本（依次运行 PHPUnit）中，我包含了一个 config.xml 文件。这会设置一个配置（环境）变量`sauce`，调用`true`

```
<phpunit> 
    <php>
        <env name="sauce" value="true" />
    </php>
</phpunit> 
```

现在的诀窍是不实际使用 $browsers 静态数组，而是使用该`setupSpecificBrowser`方法。所以，现在在我的测试的 setUp() 函数中，我只需打开 sauce env 变量，如果它存在，那么我知道我们正在从 Jenkins 运行，所以我使用它提供的变量。

```
 if( getenv('sauce') == true) {
        $browser =  array(
                'browserName' => getenv('SELENIUM_BROWSER'),
                'desiredCapabilities' => array(
                        'version' => getenv('SELENIUM_VERSION'),
                        'platform' => getenv('SELENIUM_PLATFORM'),
                )
        );
    } else {
        $browser =  array(
                'browserName' => 'firefox',
                'local' => true,
                'sessionStrategy' => 'isolated'
        );
    }
    $this->setupSpecificBrowser($browser); 
```

AFAIK似乎没有任何文档，我只是通过查看代码来工作的。乐趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-18T15:15:07.140

还要注意，事后设置浏览器会停止并行测试。此外，如果您开始使用三个不同的浏览器（在 $browsers 静态数组中）并将浏览器设置为 chrome，那么您现在将拥有三台运行 chrome 的机器。

# mongodb - 如何将 MongoDB.Bson.dll 和 MongoDB.Driver.dll 连接到 Windows Phone 项目？

> ID：13972306
> 
> 赞同：0
> 
> 时间：2012-12-20T12:32:18.093
> 
> 标签：mongodb, windows-phone-7, mongodb-.net-driver

我在我的 Windows Phone 项目中使用 MongoDb，我想连接 MongoDB.Bson.dll 和 MongoDB.Driver.dll。但我有错误“无法添加链接，因为该项目不是使用运行时 Windows Phone 构建的。项目 Windows Phone 只能使用程序集 Windows Phone”。我用按钮添加参考添加..我做错了什么？先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-01T19:01:43.777

看看[https://stackoverflow.com/questions/16151351/how-can-i-use-mongodb-in-windows-phone-project](https://stackoverflow.com/questions/16151351/how-can-i-use-mongodb-in-windows-phone-project)。Windows Phone 没有 MongoDB 驱动程序，您需要使用服务器端 API 包装 MongoDB，并使 Windows Phone 应用程序与 API 通信。

# java - Log4j 不在控制台上打印调试日志

> ID：13972310
> 
> 赞同：0
> 
> 时间：2012-12-20T12:32:38.390
> 
> 标签：java, log4j, configuration-files

这是我的 log4j.xml

```
<!-- ============================== -->
<!-- Append messages to the console -->
<!-- ============================== -->

<!--  DAILY ROLLING -->
<appender name="file" class="org.apache.log4j.RollingFileAppender">
    <param name="MaxFileSize" value="10240KB" />
    <!-- Keep one backup file -->
    <param name="MaxBackupIndex" value="10" />
    <param name="ImmediateFlush" value="true" />
    <param name="Append" value="true" />
    <param name="File" value="/usr/local/xmld/log/xmld-core.log" />
    <layout class="org.apache.log4j.PatternLayout">
        <param name="ConversionPattern" value="XMLD2[%t] [loadId(%X{loadID}) - %X{customer} - %X{configuration} - %X{filename}]: %-5p - %d{yyyy-MM-dd HH:mm:ss,SSS} (%F:%M:%L) %m%n" />
    </layout>
</appender>

<!--  SYSLOG -->
<appender name="syslog" class="org.apache.log4j.net.SyslogAppender">
    <param name="syslogHost" value="${hostName}" />
    <param name="facility" value="LOCAL6" />
    <param name="facilityPrinting" value="false" />
    <layout class="org.apache.log4j.PatternLayout">
        <param name="ConversionPattern" value="XMLD2[%t] [loadId(%X{loadID}) - %X{customer} - %X{configuration} - %X{filename}]: %-5p - %d{yyyy-MM-dd HH:mm:ss,SSS} (%F:%M:%L) %m%n" />
    </layout>
</appender>

<appender name="console" class="org.apache.log4j.ConsoleAppender">
    <layout class="org.apache.log4j.PatternLayout">
        <param name="ConversionPattern" value="XMLD2[%t] ${hostName} [loadId(%X{loadID}) - %X{customer} - %X{configuration} - %X{filename}]: %-5p - %d{yyyy-MM-dd HH:mm:ss,SSS} (%F:%M:%L) %m%n" />
        <!-- %d (%c{1})[%5p] %m%n -->
    </layout>
</appender>

<!-- ====== Categories ===== -->
<!-- core -->
<logger name="com.my.xmldelivery2.core">
    <level value="DEBUG" />
    <appender-ref ref="syslog" />
    <appender-ref ref="console" />
    <appender-ref ref="file" />
</logger>

<logger name="com.my.commons.utils">
    <level value="DEBUG" />
    <appender-ref ref="syslog" />
    <appender-ref ref="console" />
    <appender-ref ref="file" />
</logger>

<!-- hibernate -->
<logger name="org.hibernate">
    <level value="INFO" />
    <appender-ref ref="syslog" />
    <appender-ref ref="console" />
    <appender-ref ref="file" />
</logger>

<!-- Apache VFS2 -->
<logger name="org.apache.commons.vfs2">
    <level value="INFO" />
    <appender-ref ref="syslog" />
    <appender-ref ref="console" />
    <appender-ref ref="file" />
</logger> 
```

该软件包`com.my.commons.utils`是一个依赖项，而`com.my.xmldelivery2.core`我的软件是。这是之后生成的log4j.xml `maven install`。

但是在控制台日志中，我看不到有关 utils 包的任何信息。包名是正确的。我真的不明白我做错了什么。不得不说，前两个包中也用到了最后两个包。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T12:54:08.470

尝试这个：

1）添加根记录器配置，所有日志事件都填充到根：

```
<root>
   <level value="DEBUG" />
    <appender-ref ref="syslog" />
    <appender-ref ref="console" />
    <appender-ref ref="file" />
</root> 
```

2）删除所有调试记录器配置

3) 只配置 INFO 级别。DEBUG 不会传递给根

```
<!-- hibernate -->
<logger name="org.hibernate">
    <level value="INFO" />
</logger>

<!-- Apache VFS2 -->
<logger name="org.apache.commons.vfs2">
    <level value="INFO" />
</logger> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T12:41:51.743

首先，如果`com.my.commons.utils`包在依赖项中，您能否通过类名的名称*确定*该依赖项中的类使用记录器？如果`com.my.commons.utils.MyClass`使用名为 的记录器`MyFancyLogger`，则不会打印任何内容。

因此，假设`utils`包内的类遵循“记录器名称匹配类名”的做法：您的*任何*Log4J 指令似乎都有效吗？你确定你`log4j.xml`的确实生效了吗？

在任何情况下，您都可以使用`-Dlog4j.debug=true`系统属性来准确查看幕后发生的事情。

# asp.net - 如何从 ASP.NET 中的 Exchange Web 服务托管 API 2.0 更新约会

> ID：13972311
> 
> 赞同：1
> 
> 时间：2012-12-20T12:32:40.050
> 
> 标签：asp.net, exchange-server, exchangewebservices

我正在使用 EWS 托管 API 2.0 创建 Appontment。它工作正常。但也想更新现有约会。我读到我需要约会 ID 来指定应该编辑哪个约会。但是身份证在哪里？

这是我创建约会的方式：

```
 'Creates the Appointment
        Dim appointment As New EWS.Appointment(esb)
        appointment.Subject = txtThema.Text
        appointment.Body = txtBemerkung.Text
        appointment.Start = Von
        appointment.End = Bis
        appointment.Location = lbRaumInfo.Text

        'Adds the Attendees
        For i = 1 To emaillist.Length - 1
            appointment.RequiredAttendees.Add(emaillist(i))
        Next

        'Sending
        appointment.Save(EWS.SendInvitationsMode.SendToAllAndSaveCopy) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T04:07:07.900

[`AppointmentItem`](http://msdn.microsoft.com/en-us/library/microsoft.exchange.webservices.data.appointment%28v=exchg.80%29.aspx)可以通过`ItemSchema's` [`Id`property](http://msdn.microsoft.com/en-us/library/microsoft.exchange.webservices.data.item.id%28v=exchg.80%29.aspx)检索的临时唯一 ID 。它应该在保存后出现`AppointmentItem`。

```
ItemId id = appointment.Id; 
```

[如果移动或复制](http://social.technet.microsoft.com/Forums/en-US/exchangesvrdevelopmentlegacy/thread/ae5560c1-a656-4ab2-b350-5862d14bcb09/)，则[`ItemId`可以更改`AppointmentItem`](http://social.technet.microsoft.com/Forums/en-US/exchangesvrdevelopmentlegacy/thread/ae5560c1-a656-4ab2-b350-5862d14bcb09/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T08:44:40.797

A way to do it, is to use the Unique ID as suggested by SilverNinja, and as he said that this is not permanent ID and it can be changed once the appointment is moved to different folder (like if it has been deleted for example).

A way to deal with this problem is to create an extended property, and put guid for the appointment, and it wont change unless you made a copy from another appointment (after all it is just a property)

I have it in C# , but I am sure it is pretty easy to convert to VB

```
private static readonly PropertyDefinitionBase AppointementIdPropertyDefinition = new ExtendedPropertyDefinition(DefaultExtendedPropertySet.PublicStrings, "AppointmentID", MapiPropertyType.String);
public static PropertySet PropertySet = new PropertySet(BasePropertySet.FirstClassProperties, AppointementIdPropertyDefinition);

//Setting the property for the appointment 
 public static void SetGuidForAppointement(Appointment appointment)
{
    try
    {
        appointment.SetExtendedProperty((ExtendedPropertyDefinition)AppointementIdPropertyDefinition, Guid.NewGuid().ToString());
        appointment.Update(ConflictResolutionMode.AlwaysOverwrite, SendInvitationsOrCancellationsMode.SendToNone);
    }
    catch (Exception ex)
    {
        // logging the exception
    }
}

//Getting the property for the appointment
 public static string GetGuidForAppointement(Appointment appointment)
{
    var result = "";
    try
    {
        appointment.Load(PropertySet);
        foreach (var extendedProperty in appointment.ExtendedProperties)
        {
            if (extendedProperty.PropertyDefinition.Name == "AppointmentID")
            {
                result = extendedProperty.Value.ToString();
            }
        }
    }
    catch (Exception ex)
    {
     // logging the exception
    }
    return result;
} 
```

# junit - spock：在任何测试类执行之前需要一个钩子来执行一些设置步骤

> ID：13972315
> 
> 赞同：3
> 
> 时间：2012-12-20T12:33:07.143
> 
> 标签：junit, spock

我有几个 Spock 测试类组合在一个包中。我正在使用 Junit 4.10。每个测试类都包含几个特征测试方法。

我想在运行任何测试用例之前执行一些设置步骤（例如将数据加载到数据库中，启动 Web 服务器），但仅在测试开始时执行一次。

我希望这个“OneTimeSetup”方法只被调用一次，是否：

*   我运行包中的所有测试类（例如，如果它们被分组在一个测试套件中）
*   我运行了一些测试课程
*   我只运行一个测试类
*   我只在测试类中运行某个功能方法

从阅读 SO 上的其他帖子来看，这似乎是 TestNG 的 @BeforeSuite 所做的。

我知道 Spock 的 setupSpec() 和 cleanupSpec() 方法，但它们只在给定的测试类中工作。我正在寻找类似“setupTestSuite()”的东西。如何在 Spock 中实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T00:25:03.183

您可以编写一个全局扩展，使用一个 JUnit 测试套件，在一个助手类（比如 from ）中调用一个静态方法，它只`setupSpec`完成一次工作，或者让构建工具完成这项工作。

# c++ - C ++将指针转换为对函数参数中基类指针的引用

> ID：13972318
> 
> 赞同：2
> 
> 时间：2012-12-20T12:33:13.007
> 
> 标签：c++, pointers, pass-by-reference

我正在尝试使用其构造函数创建嵌套类的构造函数，该构造函数继承自父嵌套类。基本上：

```
DerivedList<T>::DerivedNested::DerivedNested(DerivedNode*& ptr)
  : BaseList<T>::BaseNested::BaseNested(ptr)
{} 
```

我的 BaseNested 的构造函数原型是这样的：

```
BaseList<T>::BaseNested::BaseNested(BaseNode*& ptr) 
```

（并且需要通过引用获取 ptr 参数，因为它需要在其代码中的所述指针的地址）

我想我必须将我的 DerivedNode* 转换为 BaseNode*，但是： static_cast::BaseNode*>(ptr) 找不到匹配的函数，因为它不是参考，而 static_cast::BaseNode*&>(ptr)给出一个无效的转换错误。

dynamic_cast 也是如此。reinterpret_cast 编译，但在执行期间给出了不正确的内容。

有谁知道我如何调用该父构造函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T12:40:43.170

如果您认为需要引用，那可能是因为您想稍后修改指针。问题是派生类中的指针类型是`DerivedNode*`,`BaseNode*`基类中。如果基类影响`DerivedNode2*`到它的指针怎么办？

您应该使用 setter，或将逻辑从基类移至派生类。

# c# - ServicePointManager.ServerCertificateValidationCallback 未命中

> ID：13972320
> 
> 赞同：6
> 
> 时间：2012-12-20T12:33:20.197
> 
> 标签：c#, servicepointmanager

我有以下代码。

```
public void Submit(string XML)
{
ServicePointManager.ServerCertificateValidationCallback = ValidateCertificate;
TestWS.CW serv = new TestWS.CW();
string s = serv.Check(XML);
}

private static bool ValidateCertificate(object sender, X509Certificate cert, X509Chain chain, System.Net.Security.SslPolicyErrors sslPolicyErrors)
{
return true;
} 
```

但是代码永远不会进入`ValidateCertificate`方法....如果我提交标准`HttpsWebRequest`但如果我使用网络服务它不起作用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-03T19:21:17.977

将其粘贴在您的启动代码中，以便在某处进行 HTTP 处理...

```
ServicePointManager.ServerCertificateValidationCallback = delegate { return true; }; 
```

这对我有用，但我只对调试版本这样做......

# php - Yodlee-SDK API 实现

> ID：13972322
> 
> 赞同：1
> 
> 时间：2012-12-20T12:33:25.647
> 
> 标签：php, api, soap, soap-client, yodlee

我已经与 yodlee 签署了保密协议，并且我已经获得了所有的 SDK 文件（java、jar 和其他相关文档）。

我是一名 PHP 程序员，据我了解：

Yodlee 就像一个引擎（几乎像 Twitter 或 Facebook），我们需要利用 API 来构建不同的应用程序

我浏览的文件没有足够的信息。

他们使用 SOAP-API，我需要使用这个 API。

上网好几天了，终于在这里发了一个问题。

我的问题很简单

1.  我必须使用soap-api将用户从我的php表单注册到yodlee - >这可能吗
2.  如果否，是否可以从我的门户网站登录到 yodlee 并访问 fin.apps。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T00:17:05.850

#1 是可能的。其他客户已经这样做了。您只需从 php.ini 调用 Web 服务操作。我们有 php 示例代码。请与销售代表讨论如何访问示例应用程序和 Yodlee SDK 开发者论坛。

# 2 是不可能的。

# c - MSVC 有类似 __builtin_va_arg_pack 的东西吗？

> ID：13972329
> 
> 赞同：1
> 
> 时间：2012-12-20T12:33:54.460
> 
> 标签：c, visual-c++, gcc

Visual C++ 有类似的东西[`__builtin_va_arg_pack`](http://gcc.gnu.org/onlinedocs/gcc-4.7.2/gcc/Constructing-Calls.html)吗？

> 此内置函数表示内联函数的所有匿名参数。它只能用于始终内联的内联函数，从不编译为单独的函数，例如使用 **属性**(( **always_inline** )) 或**属性**(( **gnu_inline** )) 外部内联函数的函数。它只能作为最后一个参数传递给带有可变参数的其他函数。当不希望使用预处理器宏时，这对于为可变参数函数编写小型包装内联很有用。例如：
> 
> ```
>  extern int myprintf (FILE *f, const char *format, ...);
>       extern inline __attribute__ ((__gnu_inline__)) int
>       myprintf (FILE *f, const char *format, ...)
>       {
>         int r = fprintf (f, "myprintf: ");
>         if (r < 0)
>           return r;
>         int s = fprintf (f, format, __builtin_va_arg_pack ());
>         if (s < 0)
>           return s;
>         return r + s;
>       } 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:37:24.383

从来没听说过。但是这里不需要使用 gcc 扩展，使用 vfprintf 代替：

```
 int myprintf (FILE *f, const char *format, ...)
  {
    va_list ap;
    va_start(ap, format);
    int r = fprintf (f, "myprintf: ");
    if (r < 0)
      return r;
    int s = vfprintf (f, format, ap);
    va_end(ap);
    if (s < 0)
      return s;
    return r + s;
  } 
```

# objective-c - Objective-C 循环遍历数组并打印到屏幕

> ID：13972334
> 
> 赞同：1
> 
> 时间：2012-12-20T12:34:03.667
> 
> 标签：objective-c, xcode

我今天刚开始学习 Objective-C 和 XCode。

我做了一个

```
NSMutableArray 
```

包含一堆字符串。

我正在像这样循环遍历我的数组：

```
for (NSString *test in array) {
} 
```

现在，我如何设法在屏幕上显示这些值中的每一个，并在彼此下方显示？我不确定哪个 UI 元素合适，以及如何实际使用该元素（我还不知道它是什么元素，但​​到目前为止我只了解 TextField、Button 和 Label）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T12:35:18.927

使用 UILabel 并将 numberOfLines 设置为 0 以获得无限行。

```
UILabel *myLabel = [[UILabel alloc] initWithFrame:CGRectMake(10, 10, 300, 200)];
myLabel.numberOflines = 0;
[self.view addSubview:myLabel];

NSString *testText = @"";
for (NSString *test in array) {
    testText = [testText stringByAppendingFormat:@"%@\n", text];
}
myLabel.text = testText; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T12:38:25.333

您最好在索引路径处设置 UITableView 的行数将是您的 [array count]；并在每个单元格处显示 [array objectAtIndex:indexPath.row]; 如果您需要整个代码，请告诉我

```
-(NSInteger) tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return array.count;
}
- (UITableViewCell*) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1
                                      reuseIdentifier:CellIdentifier];
    }

    cell.text = [array objectAtIndex:indexPath.row];
    return cell;
} 
```

# php - PHP合并数组是simular

> ID：13972335
> 
> 赞同：-1
> 
> 时间：2012-12-20T12:34:04.660
> 
> 标签：php

如何修改以下代码，以便将具有相同数据的单元格合并在一起（在本例中为相同的十六进制）。目前它的最大宽度为 2。

```
 function generateArray($from, $until, $spread){
        $from = array(hexdec(substr($from,0,2)),hexdec(substr($from,2,2)),hexdec(substr($from,4,2)));
        $until = array(hexdec(substr($until,0,2)),hexdec(substr($until,2,2)),hexdec(substr($until,4,2)));
        $red=($until[0]-$from[0])/($spread-1);
        $green=($until[1]-$from[1])/($spread-1);
        $blue=($until[2]-$from[2])/($spread-1);

        for($i=0;$i<$spread;$i++){
            $newred=dechex($from[0]+round($i*$red));
            if(strlen($newred)<2) $newred="0".$newred;

            $newgreen=dechex($from[1]+round($i*$green));
            if(strlen($newgreen)<2) $newgreen="0".$newgreen;

            $newblue=dechex($from[2]+round($i*$blue));
            if(strlen($newblue)<2) $newblue="0".$newblue;

            // Check if current hex is same as previous
            if($i >= 1 && (isset($return[$i-1]) && $return[$i-1]['hex'] == "#".$newred.$newgreen.$newblue)){
                $return[$i-1]['width']++;
            } else {
                $return[$i] = array(
                        'hex' => "#".$newred.$newgreen.$newblue,
                        'width' => 1
                );
            }

        }

        return $return;
    } 
```

输出：

```
<table cellspacing="0" cellpadding="0">
<tr>
    <td bgcolor='#ffffff' width='2'></td>
<td bgcolor='#ffffff' width='1'></td>
<td bgcolor='#fefefe' width='2'></td>
<td bgcolor='#fefefe' width='2'></td>
<td bgcolor='#fdfdfd' width='2'></td>
<td bgcolor='#fdfdfd' width='2'></td>
<td bgcolor='#fcfcfc' width='2'></td>
<td bgcolor='#fcfcfc' width='2'></td>
<td bgcolor='#fbfbfb' width='2'></td>
<td bgcolor='#fbfbfb' width='2'></td>
<td bgcolor='#fafafa' width='2'></td>
<td bgcolor='#fafafa' width='2'></td>
<td bgcolor='#f9f9f9' width='2'></td>
<td bgcolor='#f9f9f9' width='1'></td>
<td bgcolor='#f8f8f8' width='1'></td>
<td bgcolor='#f6f6f6' width='1'></td>
<td bgcolor='#f3f3f3' width='1'></td>
<td bgcolor='#f1f1f1' width='1'></td>
<td bgcolor='#eeeeee' width='1'></td>
<td bgcolor='#ececec' width='1'></td>
<td bgcolor='#eaeaea' width='1'></td>
<td bgcolor='#e7e7e7' width='1'></td>
<td bgcolor='#e5e5e5' width='1'></td>
<td bgcolor='#e3e3e3' width='1'></td>
<td bgcolor='#e0e0e0' width='1'></td>
<td bgcolor='#dedede' width='1'></td>
<td bgcolor='#dbdbdb' width='1'></td>
<td bgcolor='#d9d9d9' width='1'></td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:47:01.167

只需使用输出数组：

```
$ret = array(); 
```

并且每个十六进制代码都将是您的输出数组的索引：

```
$ret[$HEX] = $width; 
```

如果您的 $HEX 索引始终已设置，只需增加您的“宽度”值。

```
if(isset($ret[$HEX]))
{
    $ret[$HEX] ++;
}
else
{
    $ret[$HEX] = 1;
} 
```

要显示您的桌子，请使用：foreach：

```
foreach(generateArr(...) as $hex => $width)
{
    echo sprintf
    (
        '<td bgcolor="#%s" width"%s">&nbsp;</td>',
        $hex,$width
    );
} 
```

# objective-c - Objective-c 套接字 - 无法正确接收 udp 消息中的字符串

> ID：13972337
> 
> 赞同：1
> 
> 时间：2012-12-20T12:34:08.673
> 
> 标签：objective-c, sockets, nsstring

当动态创建此字符串时（当我将其值设置为等于我的代码中的另一个变量之一时），我无法接收使用 UDP 数据包发送的字符串。不同的是，当我在创建这个字符串时为字符串设置了一个常量值时，这个问题不会出现。这是我用于发送字符串的方法：

```
- (void) sendUDPMessage {
 int sockfd;
 struct sockaddr_in server_addr;
 char myBroad[]="255.255.255.255";
 struct hostent *hptr = gethostbyname(myBroad);
 sockfd = socket(AF_INET, SOCK_DGRAM, 0);
 bzero(&server_addr, sizeof(struct in_addr));
 server_addr.sin_family = AF_INET;
 server_addr.sin_port = htons(15000);
 server_addr.sin_addr.s_addr = htonl(INADDR_BROADCAST);
 memcpy(&server_addr.sin_addr, hptr->h_addr_list[0], sizeof(struct in_addr));
 int opt = 1;
 setsockopt(sockfd, SOL_SOCKET, SO_BROADCAST, &opt, sizeof(int));
 NSString *string = [NSString stringWithFormat:@"%@ %@",user.name,user.surname];
 sendto(sockfd, &string, sizeof(string), 0, (struct sockaddr*)&server_addr, sizeof server_addr);
 NSLog(@"message sent : %@",string);
} 
```

这是接收 udp 数据包的方法：

```
- (void) server {
 int serverfd;
 struct sockaddr_in server_addr;
 struct sockaddr_in client_addr;
 serverfd = socket(AF_INET, SOCK_DGRAM, 0);
 bzero(&server_addr, sizeof(struct sockaddr_in));
 server_addr.sin_family = AF_INET;
 server_addr.sin_port = htons(15000);
 server_addr.sin_addr.s_addr = htonl(INADDR_ANY);
 bind(serverfd, (struct sockaddr *) &server_addr, sizeof(struct sockaddr_in));
 socklen_t clisize = sizeof(struct sockaddr_in);
 bzero(&client_addr, clisize);
 while (1) {
    NSString *string=@"";
    NSLog(@"wainting for messages");
    recvfrom(serverfd, &string, 200, 0, (struct sockaddr *) &sin, &clisize);
    NSLog(@"message received : %@",string);
 }
} 
```

如果我定义 NSString * string = @"hello!"; 我可以正确接收字符串的内容。当我尝试发送 NSObject 时也存在同样的问题。我错过了什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:38:19.747

如果您的目标是将套接字用于某些实际目的，您应该尝试 GCDAsyncSocket（和相关类）。

如果这只是为了深入了解套接字的工作原理（和/或如果您也想在 C 项目中使用它），那么这里是您的代码的固定版本：

```
- (void) sendUDPMessage {
 int sockfd;
 struct sockaddr_in server_addr;
 char myBroad[]="255.255.255.255";
 struct hostent *hptr = gethostbyname(myBroad);
 sockfd = socket(AF_INET, SOCK_DGRAM, 0);
 bzero(&server_addr, sizeof(struct in_addr));
 server_addr.sin_family = AF_INET;
 server_addr.sin_port = htons(15000);
 server_addr.sin_addr.s_addr = htonl(INADDR_BROADCAST);
 memcpy(&server_addr.sin_addr, hptr->h_addr_list[0], sizeof(struct in_addr));
 int opt = 1;
 setsockopt(sockfd, SOL_SOCKET, SO_BROADCAST, &opt, sizeof(int));
 NSString *string = [NSString stringWithFormat:@"%@ %@",user.name,user.surname];

 // sendto(sockfd, &string, sizeof(string), 0, (struct sockaddr*)&server_addr, sizeof server_addr);
 // get a pointer to the raw string bytes in UTF-8 encoding:
 const char *bytes = string.UTF8String;
 // send the bytes, using strlen() to get the number of bytes in the UTF-8 string
 // Note! this may not be equal to string.length, which gives the number of UTF-8 chars.
 sendto(sockfd, bytes, strlen(bytes), 0, (struct sockaddr*)&server_addr, sizeof server_addr);

 NSLog(@"message sent : %@",string);
} 
```

这是接收 udp 数据包的方法：

```
- (void) server {
 int serverfd;
 struct sockaddr_in server_addr;
 struct sockaddr_in client_addr;
 serverfd = socket(AF_INET, SOCK_DGRAM, 0);
 bzero(&server_addr, sizeof(struct sockaddr_in));
 server_addr.sin_family = AF_INET;
 server_addr.sin_port = htons(15000);
 server_addr.sin_addr.s_addr = htonl(INADDR_ANY);
 bind(serverfd, (struct sockaddr *) &server_addr, sizeof(struct sockaddr_in));
 socklen_t clisize = sizeof(struct sockaddr_in);
 bzero(&client_addr, clisize);

while (1) {
    NSLog(@"waiting for messages");
    char buf[1024]; // this is a static buffer to receive raw bytes
    int bytesread = recvfrom(serverfd, buf, 1024, 0, (struct sockaddr *) &sin, &clisize);
    if ( bytesread > 0 )
    {
        NSString *string = [[NSString alloc] initWithBytes:buf length:bytesread encoding:NSUTF8StringEncoding];
        NSLog(@"message received : %@",string);
        // for non-arc projects don't forget to release string
    }
}
} 
```

（未经测试）

此代码中仍然存在各种问题，这仅用作快速演示。例如，应该检查所有返回值，应该处理所有错误，你应该知道调用可能会阻塞（除非你特别阻止这种情况），你应该在创建之前接收整个消息`NSString`（例如，如果接收到的数据包大于缓冲区；你不能天真地做这件事，因为 UTF-8 有多字节字符）

你被警告了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T13:15:48.863

您的代码正在尝试发送和接收 NSString 对象。NSString 不是字符序列。它是一个对象。对象的内容对接收者没有意义。您需要发送字符串中包含的字符。

在发送端，您需要发送 NSString 中包含的字符（通过`UTF8String:`or获得`cStringUsingEncoding:`）。在接收端，您需要接收文本，然后使用`+stringWithUTF8String:`or创建一个 NSString`+stringWithCString:encoding:`

# r - 根据字符的出现拆分字符串

> ID：13972338
> 
> 赞同：2
> 
> 时间：2012-12-20T12:34:10.983
> 
> 标签：r, substr

我的任务是从字符串中拆分并提取部分，直到出现第四个下划线。我现在正在使用 R，但我是编程之类的初学者。

输入如下所示：

```
6_10_36_0_1
6_10_38_16_15
6_100_76_16_18.1 
```

我需要的结果如下所示：

```
6_10_36_0
6_10_38_16
6_100_76_16 
```

我的想法如下：

```
substr(data$x, 0, XXX) 
```

虽然 XXX 定义了第四个下划线之前的位置，但可能使用 grep 或 strsplit？

抱歉，如果我问了一个愚蠢且易于回答的问题。但是，我没有找到适合已经发布的答案。

* * *

编辑：

```
> bestand$ID<-sub("(_[0-9.]+$)", "", bestand$x)
Fehler in `$<-.data.frame`(`*tmp*`, "ID", value = character(0)) : 
  replacement has 0 rows, data has 36513
> gsub("(_[0-9.]+$)", "", "6_100_63_8_2")
[1] "6_100_63_8"
> 
```

显然该命令有效，但它不适用于矩阵..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T12:40:30.263

您可以使用正则表达式替换为null，在php中我们这样做

```
$string = '6_10_36_0_1';
$newstring =preg_replace('/(_[0-9.]+$)/', '', $string); 
```

编辑（我不完全了解 r 但大致是这样的）

```
sub("(_[0-9.]+$)", "", 'your strings or array of strings')

gsub("(_[0-9.]+$)", "", 'your strings or array of strings') 
```

教程在[这里](http://www.regular-expressions.info/rlanguage.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T21:52:02.290

该`stringr` [软件包](http://cran.r-project.org/web/packages/stringr/index.html)有许多用于此类工作的便捷快捷方式：

```
# input data   
data <- read.table(text = "6_10_36_0_1
6_10_38_16_15
6_100_76_16_18.1")

# load library
library(stringr)

# prepare regular expression
regexp <- "([[:digit:]]+_){3}[[:digit:]]+"

# process string
(str_extract(data$V1, regexp)) 
```

这给出了预期的结果：

```
[1] "6_10_36_0"   "6_10_38_16"  "6_100_76_16" 
```

稍微解释`regexp`一下：

`[[:digit:]]`是 0 到 9 之间的任意数字

`+`表示前一项（在本例中为数字）将匹配一次或多次

`_`是下划线，原样

`{3}`表示重复前一个字符串三遍

这个页面对于这种字符串处理也非常有用：[http ://en.wikibooks.org/wiki/R_Programming/Text_Processing](http://en.wikibooks.org/wiki/R_Programming/Text_Processing)

# c# - C#、combox、switch int.Parse 导致错误

> ID：13972342
> 
> 赞同：0
> 
> 时间：2012-12-20T12:34:18.153
> 
> 标签：c#, parsing, combobox, switch-statement

我正在尝试使用组合框编写一个简单的程序。但是当程序运行时，下拉菜单中没有可用的选项。此外，我认为当我尝试在程序开始时将整数解析为文本时，问题就开始了。但是我还不够熟练来解决这个问题:(。以下是我的代码和来自 Visual Studio 的错误：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace testerv1._01
{
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void btnBuyEU_Click(object sender, EventArgs e)
    {
        int n = int.Parse(cbxBuyEU.Text);
        int price = 0;
        switch (n)
        {
            case 1:
                price += 25;
                break;
            case 2:
                price += 25;
                goto case 1;
            case 3:
                price += 50;
                goto case 1;
            default:
                MessageBox.Show("you made a wrong choice..");
                break;
        }
        if (price != 0)
        {
            MessageBox.Show("deposit "+ price +"");
        }
        MessageBox.Show("thank you and good buy");

    }
}
} 
```

这是错误：

```
System.FormatException was unhandled
Message=Input string was not in a correct format.
Source=mscorlib
StackTrace:
   at System.Number.StringToNumber(String str, NumberStyles options, NumberBuffer& number, NumberFormatInfo info, Boolean parseDecimal)
   at System.Number.ParseInt32(String s, NumberStyles style, NumberFormatInfo info)
   at System.Int32.Parse(String s)
   at testerv1._01.Form1.btnBuyEU_Click(Object sender, EventArgs e) in C:\Documents and Settings\jjj\my documents\visual studio 2010\Projects\testerv1.01\testerv1.01    \Form1.cs:line 21
   at System.Windows.Forms.Control.OnClick(EventArgs e)
   at System.Windows.Forms.Button.OnClick(EventArgs e)
   at System.Windows.Forms.Button.OnMouseUp(MouseEventArgs mevent)
   at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
   at System.Windows.Forms.Control.WndProc(Message& m)
   at System.Windows.Forms.ButtonBase.WndProc(Message& m)
   at System.Windows.Forms.Button.WndProc(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
   at System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW(MSG& msg)
   at System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(IntPtr dwComponentID, Int32 reason, Int32 pvLoopData)
   at System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)
   at System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context)
   at System.Windows.Forms.Application.Run(Form mainForm)
   at testerv1._01.Program.Main() in C:\Documents and Settings\jjj\my documents\visual studio 2010\Projects\testerv1.01\testerv1.01\Program.cs:line 18
   at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
   at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
   at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
   at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T12:36:51.030

错误信息很清楚，输入的字符串值无效。

您应该使用`TryParse`来检查该值是否有效。`Parse`假设参数是一个有效的整数，这在您的情况下是不正确的。

```
int outValue;
if (int.TryParse(cbxBuyEU.Text, out outValue))
{
    // Then the value is OK and outValue contains the parsed value
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T12:36:21.090

```
int n = Convert.ToInt32(cbxBuyEU.Text) 
```

# ruby - Does Ruby offer an equivalent of Perl's use strict?

> ID：13972345
> 
> 赞同：6
> 
> 时间：2012-12-20T12:34:30.820
> 
> 标签：ruby, perl

I mean, there is no `my` in Ruby. I found `use strict` in Perl to provide very good anti-typo protection.

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-20T12:38:25.213

> 严格的编译指示在 Perl 中做了三件事。其中两项是
> 禁止使用符号引用和“裸词”。Ruby 不
> 支持这些特性，所以这不是问题。
> 
> strict pragma 的另一个特点是避免在
> 每次提到一个全局变量时创建随机全局变量。在 Ruby 中，全局变量看起来
> 与其他变量（前导 $）不同，所以这不是一个真正
> 的问题。局部变量需要在使用前赋值，因为
> 这是 Ruby 的声明方法。这解决了
> Perl 的严格 pragma 处理的相同问题。

来源：[https ://groups.google.com/forum/?fromgroups#!topic/ruby-talk-google/PiRnWplvGDw](https://groups.google.com/forum/?fromgroups#!topic/ruby-talk-google/PiRnWplvGDw)

# geometry - Difference between geometry and geography in ST_Azimuth function of PostGIS

> ID：13972349
> 
> 赞同：0
> 
> 时间：2012-12-20T12:34:41.807
> 
> 标签：geometry, postgis, geography, azimuth

I would like to ask what is the difference between geometry and geography using the PostGIS function `ST_Azimuth`.

When I execute the following query:

```
SELECT degrees( ST_Azimuth(ST_MakePoint(21.304116745663165, 38.68607570952619), ST_MakePoint(21.286237118117278,38.71455640443629)) ) 
```

I get `327.880195438529` degrees.

But when I cast the geometries to geography as the following query :

```
SELECT degrees( ST_Azimuth(ST_MakePoint(21.304116745663165, 38.68607570952619)::geography, ST_MakePoint(21.286237118117278,38.71455640443629)::geography) ) 
```

I get `333.810802282843` degrees.

Does the cast to geography give a more accurate result? Or a different calculation is made?

My geometries have SRID=4326.

Thank you in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:49:16.957

在我看来，地理似乎为您提供了 WGS84 地球上的点对点方位角（因此是一个近似球面），而几何则为您提供了平面上的点对点方位角。

所以，是的，进行了不同的计算。

# jquery-ui - $.jgrid.stripHtml 不是函数错误...！

> ID：13972352
> 
> 赞同：0
> 
> 时间：2012-12-20T12:35:08.220
> 
> 标签：jquery-ui

```
 In my application i am using jqgrid to create the table , but sometimes it works fine &  sometime not..showing $.jgrid.stripHtml is not a function .its very strange kind of situation here which i am not able to understand where i am wrong. 
```

// 我正在使用 jquery 1.3 插件进行 ui 开发请给我任何解决方案来摆脱这个问题谢谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T22:35:43.850

你看到这个帖子了吗？您需要在 jqgrid 脚本之前加载语言文件。

[http://www.trirand.com/blog/?page_id=393/help/tabletogrid-error-striphtml-is-not-a-function](http://www.trirand.com/blog/?page_id=393/help/tabletogrid-error-striphtml-is-not-a-function)

# c# - 我可以直接在 Cassini 网络服务器和托管的 ASP.NET 子应用程序之间传递数据吗？

> ID：13972353
> 
> 赞同：0
> 
> 时间：2012-12-20T12:35:07.970
> 
> 标签：c#, asp.net, winforms

我有一个应用程序，由于各种原因，它被创建为“CD 上的网站”项目。它使用 Cassini 作为网络服务器（作为主应用程序内的线程运行）和 C# .NET 浏览器应用程序（使用 WebBrowserEx 控件）。

应用程序现在必须使用条码扫描器，我无法从应用程序的 ASP.NET 部分轻松地与之交互，因此我正在考虑为条码扫描器使用普通的 WinForms 对话框，但随后我需要将数据传递给ASP.NET 应用程序。

我怎样才能做到这一点？

我意识到我可以将扫描的条形码放在 URL（作为 CSV）中，但这似乎有点乱。有没有办法可以直接将数据插入 ASP.NET 会话，或者直接调用托管 ASP.NET 应用程序中的方法，或者这不可能？我只是想考虑将数据传回 ASP.NET 应用程序的最干净的方法......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:26:24.203

将 WCF 服务添加到 ASP.NET 应用程序，并在 Forms 应用程序中使用它。

# android - android wifi信号强度不正常

> ID：13972357
> 
> 赞同：0
> 
> 时间：2012-12-20T12:35:20.857
> 
> 标签：android, android-wifi

我在 wpa_supplicant 中使用以下代码来获取 Android 中 wifi 的信号强度。我能够获得链接速度，但信号强度始终显示 -110dB，尽管路由器距离 1 米。

**代码：**

```
 if ((os_strcasecmp(cmd, "rssi") == 0) || (os_strcasecmp(cmd, "rssi-approx") == 0)) {
        struct iwreq wrq;
        struct iw_statistics stats;
        signed int rssi;
        wpa_printf(MSG_DEBUG, ">>>. DRIVER AWEXT RSSI ");
        wrq.u.data.pointer = (caddr_t) &stats;
        wrq.u.data.length = sizeof(stats);
        wrq.u.data.flags = 1; /* Clear updated flag */
        os_strncpy(wrq.ifr_name, drv->wext->ifname, IFNAMSIZ);

        if (ioctl(drv->wext->ioctl_sock, SIOCGIWSTATS, &wrq) < 0) {
            perror("ioctl[SIOCGIWSTATS]");
            ret = -1;
        } else {
            if (stats.qual.updated & IW_QUAL_DBM) {
                /* Values in dBm, stored in u8 with range 63 : -192 */
                rssi = ( wrq.u.qual.level > 63 ) ?
                    wrq.u.qual.level - 0x100 :
                    wrq.u.qual.level;
            } else {
                rssi = wrq.u.qual.level;
            }

            if (drv->ssid_len != 0 && drv->ssid_len < buf_len) {
                os_memcpy((void *) buf, (void *) (drv->ssid),
                        drv->ssid_len );
                ret = drv->ssid_len;
                ret += snprintf(&buf[ret], buf_len-ret,
                        " rssi %d\n", rssi);
                if (ret < (int)buf_len) {
                    return( ret );
                }
                ret = -1;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:16:02.287

以下代码将提供 wifi 强度的 RSSI 值...

希望对你有帮助.....

```
public class Wifi2 extends Activity{

    Context context; 

  @Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    context=this;
}   

  @Override
  public void onResume() {
      super.onResume();
      //Note: Not using RSSI_CHANGED_ACTION because it never calls me back.
      IntentFilter rssiFilter = new IntentFilter(WifiManager.SCAN_RESULTS_AVAILABLE_ACTION);
      this.registerReceiver(myRssiChangeReceiver, rssiFilter);

      WifiManager wifiMan=(WifiManager)context.getSystemService(Context.WIFI_SERVICE);
      wifiMan.startScan();
  }

      @Override
  public void onPause() {
      super.onPause();
      this.unregisterReceiver(myRssiChangeReceiver);

  }
  /**
   * Broadcast receiver to update 
   * s
   */
  private BroadcastReceiver myRssiChangeReceiver
          = new BroadcastReceiver(){
      @Override
      public void onReceive(Context arg0, Intent arg1) {
          WifiManager wifiMan=(WifiManager)context.getSystemService(Context.WIFI_SERVICE);
          wifiMan.startScan();
          int newRssi = wifiMan.getConnectionInfo().getRssi();
          Toast.makeText(context, ""+newRssi, Toast.LENGTH_SHORT).show();

  }};

} 
```

# c# - 读取 RSS 提要中的非标准标签

> ID：13972361
> 
> 赞同：0
> 
> 时间：2012-12-20T12:36:02.043
> 
> 标签：c#, rss, syndication-item

我正在尝试为法拉利网站编写一个 RSS 提要，但我无法使用 SyndicationItem 阅读全部内容。问题是 getContent() 方法只读取和`<link>`元素（它们都是 的子元素）。我还需要阅读元素的内容，它的子元素。我必须修改这个查询：`<title>``<description>``<item>``<textnews>``<item>`

```
feed.LoadFromXml(feedXML);
// Query LINQ per effettuare il mapping
return feed.Items.ToList().Select(x =>
    new FeedItem
    {

        Title = x.Title.ExtractText(),
        Uri = x.GetUri(),
        Id = (x.ItemUri != null) ? x.ItemUri.ToString() : x.Title.ExtractText(),
        PubDate = x.PublishedDate.ToLocalTime().DateTime,
        Content = x.GetContent(),
        PlainTextContent = x.GetContent().ToPlainText(),
        Subtitle = string.Empty,
        ContentType = x.GetContentType(),
    }).ToList(); 
```

你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:58:42.757

您需要将文档解析为 XDocument，然后解析每个节点。例如：

```
var doc = XDocument.Load(aString);
var news = doc.Element("textnews").InnerText; 
```

# extjs - 如何更新 extjs treegrid 上的记录和子项？

> ID：13972371
> 
> 赞同：0
> 
> 时间：2012-12-20T12:36:18.640
> 
> 标签：extjs

我有一个treegrid，我只想更新一个节点及其子节点。所以我试过这样：

```
store.load({
  node: store.getNodeById(1)
}); 
```

这会更新子节点，但不会更新节点本身。那么如何更新节点和子节点？如果它只需要对数据库的一个请求，那将是最好的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T14:40:52.357

没有任何方法可以通过配置来做到这一点，它只是作为设计工作。您可以做的是加载节点的子节点后的一个小技巧，以便操纵树节点以手动更新节点本身。

查看图片。他们表现出您期望的行为。

![在此处输入图像描述](../Images/5313949c0f35d66d69f496af991ffa6d.png) ![在此处输入图像描述](../Images/9a8c1ffeb14a710173f4f1b6844e19b6.png)

这在 jsfiddle 中可以正常工作：http: [//jsfiddle.net/lontivero/jBTWn/3/](http://jsfiddle.net/lontivero/jBTWn/3/)

基本上，正如我刚才所说，这个想法是在加载孩子之后操纵树。在我的示例中，这是通过以下方式完成的：

```
 var node = store.getNodeById(1);

        store.load({
            node: node,
            callback: function(newRecord) {
                var parent = node.parentNode;
                parent.insertBefore(newRecord[0], node);
                parent.removeChild(node);
            },
            params: {
                json: Ext.JSON.encode(updated_data)
            }
        }); 
```

祝你好运！

# c# - 如何使用 LinQ 从数据集中选择多个列到字符串列表中

> ID：13972375
> 
> 赞同：3
> 
> 时间：2012-12-20T12:36:28.040
> 
> 标签：c#, linq, c#-4.0, multiple-columns

好的，现在下面的工作正常

```
 List<string> lstKnownMoves = dsAttacksTemp.Tables[0].Rows.
Cast<DataRow>().Select(r => r["Column1"].ToString()).ToList(); 
```

但我想让它像下面一样工作而不工作

```
 List<string> lstKnownMoves = dsAttacksTemp.Tables[0].Rows.
Cast<DataRow>().Select(r => r["Column1"].ToString(),r => r["Column2"].ToString(),r => r["Column3"].ToString()).ToList(); 
```

因此，我想将多列添加到列表中，而不是 1 个数据集数据行列。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T12:42:47.000

如果您只是将字段的内容转储到列表中，则可以使用[SlectMany 。](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.selectmany.aspx)

```
List<string> lstKnownMoves = dsAttacksTemp.Tables[0].Rows
 .Cast<DataRow>()
 .SelectMany(r => new string[]{
                    r["Column1"].ToString(),
                    r["Column2"].ToString(),
                    r["Column3"].ToString()})
 .ToList(); 
```

但是，如果您想将字段提取到另一个对象中，您可以执行以下操作：

```
class KnownMove {
   public string Column1 {get; set;}
   public string Column2 {get; set;}
   public string Column3 {get; set;}
}

List<KnownMove > lstKnownMoves = dsAttacksTemp.Tables[0].Rows
 .Cast<DataRow>()
 .SelectMany(r => new KnownMove{
                    Column1 = r["Column1"].ToString(),
                    Column2 = r["Column2"].ToString(),
                    Column3 = r["Column3"].ToString()})
 .ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T12:39:40.343

好吧，假设您希望能够单独访问每一列，您会希望返回一个字符串数组。

```
 List<string[]> lstKnownMoves = dsAttacksTemp.Tables[0].Rows
                          .Cast<DataRow>().Select(r => new[] 
                               { 
                                  r["Column1"].ToString(),  
                                  r["Column2"].ToString(), 
                                  r["Column3"].ToString() 
                               }).ToList(); 
```

然后对于每一行，可以通过索引获取一列的字符串值：

```
 foreach(var item in lstKnownMoves) 
      Console.WriteLine("Column1: {0} Column2: {1} Column3: {2}", item); 
```

如果您基本上想要一个列映射，并且不想像所选答案那样创建一个类来充当元组，您可以使用`List<dynamic>`：

```
 List<dynamic> lstKnownMoves = dsAttacksTemp.Tables[0].Rows
                          .Cast<DataRow>().Select(r => new 
                               { 
                                  Column1 = r["Column1"].ToString(),  
                                  Column2 = r["Column2"].ToString(), 
                                  Column3 = r["Column3"].ToString() 
                               }).ToList<dynamic>();

 foreach(var item in lstKnownMoves) 
      Console.WriteLine("Column1: {0} Column2: {1} Column3: {2}", 
          item.Column1, item.Column2, item.Column3); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T12:40:38.473

我假设您想要一个具有多个字符串属性的对象列表，而不是字符串数组列表。

```
List<object> lstKnownMoves = dsAttacksTemp.Tables[0].Rows.
Cast<DataRow>().Select(r => new { 
 Col1 = r["Column1"].ToString(), 
 Col2 = r["Column2"].ToString(), 
 Col3 = r["Column3"].ToString()
}).ToList(); 
```

这样，您将获得一个`List<T>`where`T`是具有 3 个字符串属性的匿名对象，即`Col1`,`Col2`和`Col3`. 我想这就是你所要求的。

# objective-c - 无法将动作 cancelAction: 连接到 NSViewController 类的目标

> ID：13972377
> 
> 赞同：0
> 
> 时间：2012-12-20T12:36:29.683
> 
> 标签：objective-c, cocoa, nsviewcontroller

我是mac开发的新手。我使用`NSTabView`al 开发了一个应用程序，对我来说效果很好。

但后来我想更改 UI，所以我`NSSplitView`在此使用了我能够显示 xib，但按钮操作没有发生，并且出现错误：

> **无法将动作 cancelAction: 连接到 NSViewController 类的目标**“。

```
- (IBAction)cancelAction:(id)sender
{
    [self enableNewProductAction];
} 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:35:58.497

在某处，您的 XIB 文件中将有一个对象，其类设置为`NSTableView`而不是您的自定义子类。找到它并改变它，你就会被设置。

# c# - ASP.NET MVC ViewModel 的日期时间？给出：操作可能会破坏运行时

> ID：13972382
> 
> 赞同：0
> 
> 时间：2012-12-20T12:36:48.907
> 
> 标签：c#, asp.net-mvc-4, runtime, verificationexception

好吧，标题很好地总结了它，**我知道我应该提供足够的信息来让这个问题尽可能容易回答，但我完全不知道是什么原因造成的，我只知道它是如何发生的.**

我在这里的目标是找到在相同或相似情况下遇到此问题的人。

**场景：** 我有一个视图模型类，一切正常，但是有一个 Datetime 属性，它为我提供了 Datetime (01/01/0001) 的默认值，所以我将它设为 Nullable，然后我得到了这个错误。

我知道有很多不同的方法可以通过使其可空来实现我的意图，但我担心如果我不找出问题所在或导致它的原因，以后可能会在更复杂的情况下再次发生重要甚至更糟的是，我没有 B 计划。

对此的任何想法将不胜感激，如果您希望我在问题中包含其他内容，请告诉我，我会立即对其进行编辑，老实说，我不知道在这种特殊情况下显示什么重要.

谢谢！

# ios - 检测通过 ALAsset 添加的新图像

> ID：13972384
> 
> 赞同：0
> 
> 时间：2012-12-20T12:36:50.887
> 
> 标签：ios, alassetslibrary

有没有办法通过`ALAsset`库检查新图像，就像昨天我从 iPhone 中获取所有图像现在我想获取或检测今天添加的新图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T13:46:11.773

没有公共 API 可以对 AssetsLibrary 执行自定义提取。我认为解决这个问题的唯一方法是枚举整个库，并检查每个项目的元数据，看看它是否是在最后一次检查日期之后创建的。例如：

```
[assetsGroup enumerateUsingBlock:^(ALAsset *result, NSUInteger index, BOOL *stop) {
    NSDate *date = [result valueForProperty:ALAssetPropertyDate];
    if ([date laterDate:lastCheckedDate] == date) {
        // this is a new asset
    }
}]; 
```

# javascript - 在 Firefox 中打开 IndexedDB 时出现 InvalidStateError

> ID：13972385
> 
> 赞同：8
> 
> 时间：2012-12-20T12:36:51.200
> 
> 标签：javascript, firefox, indexeddb

在 Firefox 17.0.1 中，当我尝试打开 IndexedDB 数据库时，Firebug 控制台向我显示*InvalidStateError*异常。也引发了事件，`request.onerror`但*未定义*。`event.target.errorCode`

 *```
if (window.indexedDB) {
    var request = window.indexedDB.open('demo', 1);
    request.onsuccess = function(event) {
        // not raised
    };
    request.onupgradeneeded = function(event) {
        // not raised
    };
    request.onerror = function(event) {
        // raised with InvalidStateError
    };
} 
```

有人在 Firefox 中使用过 IndexedDB 吗？

**更新**

Firefox 18.0.1 具有相同的行为。[完整的源代码](http://dajbych.net/IndexedDb.html)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-08-14T10:51:23.270

我回答是因为问题仍然存在（在 Firefox 54 中）。如果您：

*   在私人模式下使用 Firefox
*   或在不同的 Firefox 版本之间切换 ( [https://bugzilla.mozilla.org/show_bug.cgi?id=1236557](https://bugzilla.mozilla.org/show_bug.cgi?id=1236557) , [https://bugzilla.mozilla.org/show_bug.cgi?id=1331103](https://bugzilla.mozilla.org/show_bug.cgi?id=1331103) )

为了防止*InvalidStateError*，*try catch*不起作用（但对其他错误很有用，例如禁用的 cookie），您需要*event.preventDefault()*。是的，我知道，太容易成为现实。:)

```
if (window.indexedDB) {
    var request = window.indexedDB.open('demo', 1);
    request.onsuccess = function(event) {
        // not raised
    };
    request.onupgradeneeded = function(event) {
        // not raised
    };
    request.onerror = function(event) {
        // raised with no InvalidStateError
        if (request.error && request.error.name === 'InvalidStateError') {
            event.preventDefault();
        }
    };
} 
```

荣誉转到[https://bugzilla.mozilla.org/show_bug.cgi?id=1331103#c3](https://bugzilla.mozilla.org/show_bug.cgi?id=1331103#c3)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T15:49:43.720

我很确定您得到的错误是版本错误，这意味着数据库的当前版本高于您打开数据库的版本。如果您查看 event.target.error，您会看到名称将包含“VersionError”。

另一种可能性是您将看到“AbortError”，这意味着 VERSION_CHANGE 事务已中止。这意味着 onupgradeneeded 事件中有错误导致中止。如果您正在创建一个已经存在的对象存储，您可以得到这个。

如果不提供有关您收到的错误的更多信息，我也看不到其他可能性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T20:13:50.323

您需要在单独的事务中创建对象存储，您将打开数据库和创建对象存储事务集中到同一个事件中。

此外，您的对象存储不能同时拥有`autoincrement`和`path`as 选项。你必须选择一个或另一个。

这是将使您的示例运行的代码：

```
 function initDB() {
        if (window.indexedDB) {
            var request = window.indexedDB.open('demo', 1);
            request.onsuccess = function(event) {
                db = event.target.result;
                createObjectStore();
            };
            request.onupgradeneeded = function(event) {
                db = event.target.result;
                $('#messages').prepend('blah blah<br/>');
            };
            request.onerror = function(event) {
                $('#messages').prepend('Chyba databáze #' + event.target.errorCode + '<br/>');
            };
        }
    }

    function createObjectStore() {
        db.close();
        var request = window.indexedDB.open('demo', 2);
        request.onsuccess = function(event) {
            db = event.target.result;
            showDB();
        };
        request.onupgradeneeded = function(event) {
            db = event.target.result;
            $('#messages').prepend('yeah yeah yeah<br/>');
            var store = db.createObjectStore('StoreName', { keyPath: 'id' });
            store.createIndex('IndexName', 'id', { unique: true });
        };
        request.onerror = function(event) {
            $('#messages').prepend('Chyba databáze #' + event.target.errorCode + '<br/>');
        };
    } 
```

如果您开始遇到困难，可以查看我为 Firefox 插件 SDK 编写的一些 indexeddb 代码。代码比您需要的更复杂，但您将能够看到所有需要发生的事件、错误和事务顺序。[https://github.com/clarkbw/indexed-db-storage](https://github.com/clarkbw/indexed-db-storage)

祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-08T12:56:18.397

如果在 FireFox 设置的隐私选项卡中将浏览器设置为“不存储历史记录”，那么在使用 IndexedDB 时，FireFox 也会抛出“InvalidStateError”。

我相信当设置该设置时，FireFox 基本上以隐身模式运行。在私有模式下运行 FireFox 时，IndexedDB 不可用。*

# iphone - 如何在覆盖视图下方缩放 MapView 注释？

> ID：13972391
> 
> 赞同：1
> 
> 时间：2012-12-20T12:37:14.600
> 
> 标签：iphone, cocoa, android-mapview, mapkit, mkannotation

我需要缩放覆盖视图下方的地图注释。

我使用[这种方法](https://stackoverflow.com/a/7141612/599743)放大到 2 个注释。

我似乎找不到适合覆盖视图下方的 2 个注释的方法，因为：

*   设置地图 edgePadding 将隐藏底部引脚
*   设置地图中心将隐藏底部图钉
*   我猜设置 latitudeDelta 会起作用，但是如果引脚水平平行，则没有必要+它会因不同的情况而变得混乱。

所以我想知道这个问题是否有一个我可能错过的优雅解决方案？

![问题](../Images/b241f79b78a78a6daa74bc21c5204c98.png)

此叠加层还隐藏了注释标注，我想如果我有第一个问题的解决方案，这可以解决。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T17:18:33.787

也许您应该尝试使用此代码来处理 Annotations 的完美匹配：

```
- (void)zoomMapViewToFitAnnotations:(MKMapView *)mapView animated:(BOOL)animated
{ 
    NSArray *annotations = mapView.annotations;
    int count = [mapView.annotations count];
    if ( count == 0) { return; } //return if no annotations

    //convert NSArray of id <MKAnnotation> into an MKCoordinateRegion that can be used to set the map size
    //can't use NSArray with MKMapPoint because MKMapPoint is not an id
    MKMapPoint points[count]; //C array of MKMapPoint struct
    for( int i=0; i<count; i++ ) //load points C array by converting coordinates to points
    {
        CLLocationCoordinate2D coordinate = [(id <MKAnnotation>)[annotations objectAtIndex:i] coordinate];
        points[i] = MKMapPointForCoordinate(coordinate);
    }
    //create MKMapRect from array of MKMapPoint
    MKMapRect mapRect = [[MKPolygon polygonWithPoints:points count:count] boundingMapRect];
    //convert MKCoordinateRegion from MKMapRect
    MKCoordinateRegion region = MKCoordinateRegionForMapRect(mapRect);

    //add padding so pins aren't scrunched on the edges
    region.span.latitudeDelta  *= ANNOTATION_REGION_PAD_FACTOR;
    region.span.longitudeDelta *= ANNOTATION_REGION_PAD_FACTOR;
    //but padding can't be bigger than the world
    if( region.span.latitudeDelta > MAX_DEGREES_ARC ) { region.span.latitudeDelta  = MAX_DEGREES_ARC; }
    if( region.span.longitudeDelta > MAX_DEGREES_ARC ){ region.span.longitudeDelta = MAX_DEGREES_ARC; }

    //and don't zoom in stupid-close on small samples
    if( region.span.latitudeDelta  < MINIMUM_ZOOM_ARC ) { region.span.latitudeDelta  = MINIMUM_ZOOM_ARC; }
    if( region.span.longitudeDelta < MINIMUM_ZOOM_ARC ) { region.span.longitudeDelta = MINIMUM_ZOOM_ARC; }
    //and if there is a sample of 1 we want the max zoom-in instead of max zoom-out
    if( count == 1 )
    { 
        region.span.latitudeDelta = MINIMUM_ZOOM_ARC;
        region.span.longitudeDelta = MINIMUM_ZOOM_ARC;
    }
    [mapView setRegion:region animated:animated];
} 
```

因此，您必须定义填充、最大度数弧和最小缩放弧。对于前。应该是这样的：

```
#define MINIMUM_ZOOM_ARC 0.05 //approximately 1 miles (1 degree of arc ~= 69 miles)
#define ANNOTATION_REGION_PAD_FACTOR 1.25
#define MAX_DEGREES_ARC 360 
```

希望你会喜欢它，干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T13:41:39.653

如果您想要覆盖上的触摸点，请为覆盖设置禁用用户交互。

为了设置缩放级别，我在绘制点后做了一些调整。您可以计算经纬度的平均值，然后根据叠加层的大小调整经度经度。这是我所做的：

```
 float latAvg,longAvg;

            latAvg = (location1.latitude + location.latitude)/2;
            longAvg = (location1.longitude + location.longitude)/2;
            MKCoordinateSpan span;// = MKCoordinateSpanMake(0.006, 0.006);

            span.latitudeDelta = fabs(location1.latitude - location.latitude);
            span.longitudeDelta = fabs(location1.longitude - location.longitude);

//Then adjust the lat longs delta according to your need.

            span.latitudeDelta = span.latitudeDelta + 0.0010;
            span.longitudeDelta = span.longitudeDelta + 0.0010;

            CLLocationCoordinate2D locationLatlng;
            locationLatlng.latitude = latAvg;
            locationLatlng.longitude = longAvg;

            MKCoordinateRegion viewRegion = MKCoordinateRegionMake(locationLatlng, span);

            [map setRegion:viewRegion animated:YES];

            [map regionThatFits:viewRegion]; 
```

# android - Activity#setTitle 有效，但 Activity#getWindow()#setTitle 无效

> ID：13972394
> 
> 赞同：0
> 
> 时间：2012-12-20T12:37:20.420
> 
> 标签：android

在活动中，我可以使用以下方法更改标题：

```
setTitle("new title"); 
```

这种方式有效。但是，我也可以获取窗口 - 使用 getWindow - 并调用它的 getTitle 方法：

```
getWindow().setTitle("new title"); 
```

这种方式行不通。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-27T19:26:30.347

我在第 10 级时遇到了同样的问题。要解决它，请检查您的**Activity**是否扩展了**ActionBarActivity**。

如果是这样，请改为使用：

```
setTitle("title"); 
```

利用：

```
getSupportActionBar().setTitle("title"); 
```

它对我有用。:D

# java - statement.executeUpdate() 总是返回 1

> ID：13972397
> 
> 赞同：1
> 
> 时间：2012-12-20T12:37:32.247
> 
> 标签：java, sql, oracle, jdbc

我对 JDBC executeUpdate() 方法有疑问。无论是否更新一行，它总是返回 1。据我了解，它应该返回 0 的方法是没有更改任何行。

这是我的代码示例：

```
try {
conn = pool.getConnection();
        PreparedStatement ps = conn.prepareStatement("{CALL UPDATE_USER (?,?,?)}");
        ps.setString(1, field.toString());
        ps.setString(2, change);
        ps.setString(3, userID);
        int updated = ps.executeUpdate();
        System.out.println(updated);
        if(updated==0){
            throw new NoUserException();
        }
        ps.close();
    } catch (SQLException e) {
        log.error("An error occurred while creating the connection");
        e.printStackTrace();
    } finally {
        pool.returnConnection(conn);
    } 
```

这可能是因为我使用的是准备好的语句或存储过程吗？

这是存储过程：

```
create or replace
PROCEDURE UPDATE_USER
(
  updateColumn IN user_tab_columns.column_name%type,
  changeStr IN VARCHAR2,
  unID IN VARCHAR2
)
IS
BEGIN
  EXECUTE IMMEDIATE
    'UPDATE
      users
SET ' || updateColumn || '= :1
WHERE
  uniqueID = :2'
  USING changeStr, unID; 
END; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T13:10:57.197

它无法从存储的过程执行中获取信息。如果您想获取行数（或其他任何内容），请将 PROCEDURE 切换到 FUNCTION，在此函数中添加 return 子句，并将您的调用更改为类似 ? = CALL ... 使用函数内部的 sql%rowcount 进行测试以获得受影响的行数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T13:23:54.290

你可以使用[Callable 声明](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/CallableStatement.htmlto%20execute)一个过程或函数。并将受影响的行数作为返回参数返回

# javascript - 在控制器初始化之前查看和存储加载

> ID：13972398
> 
> 赞同：2
> 
> 时间：2012-12-20T12:37:36.043
> 
> 标签：javascript, extjs, sencha-touch, sencha-touch-2

我正在构建 Sencha touch 2.1 应用程序。

在我的应用程序中，我有一个全局变量，它保持对我的控制器类的引用。此引用用于在加载其中一个商店时执行控制器功能，但是当我将其部署在慢速远程服务器上并在此全局变量获取控制器对象的引用之前触发商店的负载时，问题就来了。为了在存储加载之前提供此参考，我尝试将初始化逻辑放入控制器的 init 方法中

```
init : function(){
    bossController = this.getApplication().getController('Boss');
}, 
```

在控制器的 init 方法中，但在调用此 init 之前加载了视图和存储，因此我收到此错误：

```
Cannot call method 'loadMagazines' of undefined 
```

这是我在商店中的加载监听器：

```
listeners:{
        load: function( me, records, successful, operation, eOpts ){ 
            bossController.loadMagazines(this, records);
        }
} 
```

我尝试在 app.js 的 launch() 方法而不是控制器的 init 方法中初始化这个变量，但这也不起作用。

请注意，当我将代码放在本地 apache 中并使用我的 chrome 浏览器访问它时，这两种方法都可以正常工作，但是当我将它放在慢速远程服务器上时它们不起作用。

**编辑**

这就是应用程序流程发生的方式 0。所有模型、视图、存储和控制器都在 app.js 中定义

1.  app.js 中的启动函数将主视图添加到视口。

2.  主视图创建杂志视图并将其添加到自身。

3.  在杂志视图的初始化方法中，商店被装箱并加载。

4.  在商店的加载监听器中，使用了控制器。

这是我的看法：

```
Ext.define('myshop.view.MagazinePanel', {
extend : 'Ext.Panel',
requires : [ 
    'myshop.model.MagazinePage',
    'myshop.store.MagazineStore',
    'Ext.XTemplate',
    'Ext.data.Store'
],
alias : 'widget.magazinepanelview',
xtype : 'magazinepanelview',
config : {
    layout : 'hbox',
    id : 'hc',
    scrollable: 'horizontal',
    directionLock : true,
    masked: {
        xtype: 'loadmask',
        message: 'Loading'
    },
inline: {
        wrap: false
    },
    items : [{
        xtype : 'panel',
        html : ''
    }]
},
initialize: function() {
    var me = this;
    var myStore = Ext.create('myshop.store.MagazineStore');
        myStore.load({
            callback: function(records, operation, success) {
                me.setMasked(false);
            },
            scope: this
        });
    this.callParent();
}
}); 
```

这是商店：

```
Ext.define('myshop.store.MagazineStore',{
extend:'Ext.data.Store',
requires: [
           'myshop.model.MagazinePage',
           'Ext.data.proxy.JsonP'
       ],
config:{
    storeId : 'ms',
    model:'myshop.model.MagazinePage',
    autoLoad :false,
    pageSize: 30,
    proxy : {
        type: 'jsonp',
        url: Properties.PORTAL_SERVICE_BASE_URL+'test/categories/list',
        callbackKey: 'callback',
        startParam: false, //to remove param "start" and making it constant
        extraParams: {
            start : 0,
            _type : 'json'
        },
        reader: {
            type: 'json',
            rootProperty: 'categories.data',
            totalProperty: 'categories.status.totalCount'
        }
    },
    listeners:{
        load: function( me, records, successful, operation, eOpts ){ 
            bossController.loadMagazines(this, records);
        }
    }
}
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:47:01.100

您的示例代码中缺少一些部分，因此只是提示/猜测。我猜您的商店具有`autoLoad`true 属性，因此在初始化后立即加载。关闭它并尝试这样的事情。

```
init : function(){
    bossController = this.getApplication().getController('Boss'); // bossController where is this var defined? 
    // fire a ready event
    // or
    Ext.StoreMgr.lookup('YourStoreName').load();
} 
```

或者提供有关商店、加载者、加载时间和范围的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T13:04:16.023

您不能将您的 loadMagazines 函数放在控制器中显式 load() 函数的成功回调中，并按照@sra 的建议禁用 autoLoad 吗？

就像是：

```
//in controller
init: function() {
    myStore.load({
        callback: function(recs, op, success) {
            // do the load magazines thing
        }
    })
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T11:21:24.800

加载数据应该做控制器而不是视图。

```
 Ext.define("myshop.controller.Boss", {
    extend: 'Ext.app.Controller',

    config: {
        refs: {
            magazinePanel: '#hc'
        },
        control: {
            magazinePanel: {
                initialize: 'initializeMagazinePanel'
            }
        }
    },

    initializeMagazinePanel: function() {
        var me = this;
        var myStore = Ext.create('myshop.store.MagazineStore', {
            listeners:{
                scope: this,
                load: this.onMagazineStoreLoad
            }
        });
        myStore.load();
    },

    onMagazineStoreLoad: function(me, records, successful, operation, eOpts) {
        this.getMagazinePanel().setMasked(false);
        this.loadMagazines(records)
    },

    loadMagazines: function(records) {
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-17T21:09:43.850

我很好奇我在这里建议的内容：[getController() 不会加载文件，也不会触发 init，而 lauch](https://stackoverflow.com/questions/16613014/getcontroller-doesnt-load-file-and-doesnt-fire-init-and-lauch)对此也有帮助。您可以从 app.js 中删除视图和存储并将其放入控制器本身。我认为应该只在定义控制器之后才定义视图和存储。

# android - 谷歌地图 v2 标记动画

> ID：13972401
> 
> 赞同：8
> 
> 时间：2012-12-20T12:37:37.253
> 
> 标签：android, google-maps-api-3, android-maps, google-maps-api-2

有谁知道这个动画的实现如何在 google map api v2 中实现。 [在这里查看。](http://econym.org.uk/gmap/example_cartrip.htm) 我想知道这是怎么做到的。如果有人对此有任何示例代码，请告诉我。

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-05T14:09:24.667

我找到了一个适合我的[解决方案：](https://stackoverflow.com/a/14079312/1472887)

```
final LatLng target = NEW_LOCATION;

final long duration = 400;
final Handler handler = new Handler();
final long start = SystemClock.uptimeMillis();
Projection proj = map.getProjection();

Point startPoint = proj.toScreenLocation(marker.getPosition());
final LatLng startLatLng = proj.fromScreenLocation(startPoint);

final Interpolator interpolator = new LinearInterpolator();
handler.post(new Runnable() {
    @Override
    public void run() {
        long elapsed = SystemClock.uptimeMillis() - start;
        if (elapsed > duration) {
            elapsed = duration;
        }
        float t = interpolator.getInterpolation((float) elapsed / duration);
        double lng = t * target.longitude + (1 - t) * startLatLng.longitude;
        double lat = t * target.latitude + (1 - t) * startLatLng.latitude;
        marker.setPosition(new LatLng(lat, lng));
        if (t < 1.0) {
            // Post again 10ms later.
            handler.postDelayed(this, 10);
        } else {
            // animation ended
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-20T12:43:52.277

`Marker`欢迎您随时通过调用来更改 a 的位置`setPosition()`。欢迎您使用或on应用`CameraUpdate`对象，随时更改“相机”的位置（即地图的中心和缩放级别）。将这些与光定时循环（例如，使用）结合起来应该可以让您实现类似的动画效果。`moveTo()``animateTo()``GoogleMap``postDelayed()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T23:45:37.427

好消息是他的 Google Map API v2 提供了新的相机控件。 您可以在 Android 开发人员团队的 Youtube 频道上直接[查看](https://www.youtube.com/watch?v=97HLa739rXU&list=PLWz5rJ2EKKc_5ci9j-iwC3P9Va3Y32-aL)新功能以及如何使用它们。

它还提供动画、倾斜、方位……但我认为该视频非常详细，并且还讨论了您示例中的应用程序。

玩得开心，完成应用后给我一个链接。

# java - onActivityResult 仅被识别为变量

> ID：13972405
> 
> 赞同：4
> 
> 时间：2012-12-20T12:37:53.023
> 
> 标签：java, android, android-intent, methods

在创建 onActivityResult 方法时，Eclipse 仅出于某种未宣布的原因将其识别为变量。

```
protected void onActivityResult(int resultCode, int requestCode, Intent data){

    super.onActivityResult(requestCode, resultCode, data);
    if(resultCode == Class_2.RESULT_CODE && requestCode == REQUEST_CODE) {
        if (data.hasExtra("returnKey1")) {
            int number = number + getIntent().getExtras().getInt("returnKey1");
        }
    }
} 
```

在“ *onActivityResult* ”上，它只是给了我一个错误，并且消息“ *void 是变量 onActivityResult 的无效类型*”有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T12:40:10.623

我不知道你班上还有什么，但试着改变

```
protected void onActivityResult(int resultCode; int requestCode; Intent data) 
```

至

```
protected void onActivityResult(int resultCode, int requestCode, Intent data) 
```

您还应该调用：

```
super.onActivityResult(requestCode, resultCode, data); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T12:40:18.990

把这个放到方法中

```
super.onActivityResult(requestCode, resultCode, data); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T12:41:03.183

使用此模板覆盖`onActivityResult`Activity

```
@Override
protected void onActivityResult(int resultCode, int requestCode, Intent data)
{                   
    super.onActivityResult(requestCode, resultCode, data);

    // do your work here
} 
```

`";"`并从参数中 删除 semi-con`onActivityResult`并确保您也在`onActivityResult`Activity 类中覆盖方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T12:45:02.407

当您使用分号`;`分隔其参数时，您的方法声明不正确，而它应该只是冒号`,`。所以应该是：

```
protected void onActivityResult(int resultCode, int requestCode, Intent data) 
```

代替

```
protected void onActivityResult(int resultCode; int requestCode; Intent data) 
```

# ruby-on-rails - 大礼包中的动态过滤器

> ID：13972410
> 
> 赞同：0
> 
> 时间：2012-12-20T12:37:58.757
> 
> 标签：ruby-on-rails, dynamic, filter, spree

我使用`spree(v. 0.70.5)`一个我需要实现产品的动态过滤器。当前分类单元定义的过滤器选项。

我应该怎么办？

# bash - 用于移动除目录之外的所有旧文件的 bash 脚本

> ID：13972413
> 
> 赞同：0
> 
> 时间：2012-12-20T12:38:08.787
> 
> 标签：bash

我是 bash 脚本的新手，想创建 bash 脚本，该脚本仅根据脚本中定义的天数将旧文件（而不是目录）从源目录移动到目标目录。

```
#!/bin/bash

echo "Enter Your Source Directory"
read soure

echo "Enter Your Destination Directory"
read destination 

echo "Enter Days"
read days

find $soure -mtime -$days -exec mv {} $destination \;
echo "Files which were $days Days old moved from $soure to $destination" 
```

我可以移动文件，但它也保留了我不想要的特定要求的目录结构。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:41:43.333

可能是您的文件名包含空格，那么该`mv`命令将是错误的。试试这个。

```
find $soure -mtime -$days -exec mv "{}" $destination \; 
```

更多的建议可能是使用 identifiers `$1`，`$2`而`$3`不是这个`read`替代方案，因为它更容易与 tab 完成一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T14:38:52.250

添加`-type f`以确保您只移动文件，而不是目录

```
find "$shore" -type f -mtime -$days -exec mv "{}" "$destination" \; 
```

# c#-4.0 - 从 .NET 缓存中获取最多信息

> ID：13972415
> 
> 赞同：3
> 
> 时间：2012-12-20T12:38:11.560
> 
> 标签：c#-4.0, caching

我正在尝试尽可能多地检索有关 .NET 缓存使用的信息。

使用该`Cache`对象，我们可以检索 3 个参数

*   `Count`
*   `EffectivePercentagePhysicalMemoryLimit`
*   `EffectivePrivateBytesLimit`

但是其余的呢？

我在哪里可以获得诸如“服务器中的可用内存”、“使用的缓存内存”等信息……

[ASP Allience](http://aspalliance.com/)中有一个名为**Cache Manager**的旧项目，但它不再可用，我只能找到它的图像，它确实显示如下：

![在此处输入图像描述](../Images/ac214a40cb36d6caeba80fd699a8a264.png)

我正在查看文档并阅读新的 .NET 4 条目，`System.Runtime.Cache`例如[`CacheMemoryLimit`](http://msdn.microsoft.com/en-us/library/system.runtime.caching.memorycache.cachememorylimit.aspx)和[PhysicalMemoryLimit](http://msdn.microsoft.com/en-us/library/system.runtime.caching.memorycache.physicalmemorylimit.aspx)，但我找不到关于如何使用它的真实示例......

有没有人有缓存信息的包装器？或者知道如何使用这种可用的新方法？

我当前的缓存实现是：

```
public class InMemoryCache : ICacheService
{
    private int minutes = 15;

    public T Get<T>(string cacheID, Func<T> getItemCallback) where T : class
    {
        T item = HttpRuntime.Cache.Get(cacheID) as T;
        if (item == null)
        {
            item = getItemCallback();
            HttpRuntime.Cache.Insert(
                cacheID,
                item,
                null,
                DateTime.Now.AddMinutes(minutes),
                System.Web.Caching.Cache.NoSlidingExpiration);
        }
        return item;
    }

    public void Clear()
    {
        IDictionaryEnumerator enumerator = HttpRuntime.Cache.GetEnumerator();

        while (enumerator.MoveNext())
            HttpRuntime.Cache.Remove(enumerator.Key.ToString());
    }

    public Dictionary<string, string> Stats()
    {
        var cache = HttpRuntime.Cache;
        var r = new Dictionary<string, string>();

        r.Add("Count", cache.Count.ToString());
        r.Add("EffectivePercentagePhysicalMemoryLimit", cache.EffectivePercentagePhysicalMemoryLimit.ToString());
        r.Add("EffectivePrivateBytesLimit", cache.EffectivePrivateBytesLimit.ToString());

        return r;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-02T00:20:37.667

看看这个： [https ://www.youtube.com/watch?v=Dz_7hukyejQ](https://www.youtube.com/watch?v=Dz_7hukyejQ)

这是基于 100% 托管的自定义内存管理器，该管理器在大小为 256 mb 的 byte[] 段中存储缓存项目。这允许存储数以百万计的对象而不会减慢任何速度，因为 GC 看不到“对象”，因为它们驻留在 byte[] 中。

该视频展示了如何查看缓存的运行情况并查看有多少对象、页面、优先级等...

这是代码：

[https://github.com/aumcode/nfx/tree/master/Source/NFX/ApplicationModel/Pile](https://github.com/aumcode/nfx/tree/master/Source/NFX/ApplicationModel/Pile)

即缓存主界面：

[https://github.com/aumcode/nfx/blob/master/Source/NFX/ApplicationModel/Pile/ICache.cs](https://github.com/aumcode/nfx/blob/master/Source/NFX/ApplicationModel/Pile/ICache.cs)

您可以使用内存限制和条目优先级来命名表、基于年龄或绝对时间戳过期

# python - 下载后将动画gif更改为静态gif

> ID：13972423
> 
> 赞同：0
> 
> 时间：2012-12-20T12:38:25.803
> 
> 标签：python, scrapy

我正在使用scrapy使用图像管道从站点下载图像。

图像已下载，但动画 gif 已变为静态 gif。这些图像不再是动画。

下载后如何保留动画gif

这是我的管道

```
class MyImagesPipeline(ImagesPipeline):

    #Name download version
    def image_key(self, url):
        image_guid = url.split('/')[-1]
        return 'full/%s' % (image_guid)

    def get_media_requests(self, item, info):
            if item['image_urls']:
            for image_url in item['image_urls']:
            yield Request(image_url) 
```

# php - 如何根据表列中的最大值从 Mysql 返回行？

> ID：13972424
> 
> 赞同：1
> 
> 时间：2012-12-20T12:38:27.860
> 
> 标签：php, mysql, arrays, highest

我有一个应该在数据库中搜索最高“分数”的功能。Db 的结构如下：

```
----------------------------------------
|  id  |  UrlId  |  Article  |  Score  |
---------------------------------------- 
```

我可以正确获得最高分，但我不知道如何根据最高分返回完整对象。我不愿意遍历整个表并测试'score'的值以查看哪个是最高的（尽管在我输入时我怀疑我无论如何都在这样做），因为数据库可能有 10000 条记录。我确信这很简单，但是我有“愚蠢的，我今天不能动脑” 有谁知道更优雅的解决方案？

我的最终结果必须是这样的：如果有 4 个 UrlId;s 具有相同的最高分，用户将需要查看：

UrlId example1 20（分数）

UrlId example2 20（分数）

UrlId example3 20（分数）

UrlId example4 20（分数）

不会显示所有其他结果。

```
function gethappiestBlog() {
  $happiestBlogs = /* This is the data that I loop through, this is correct */
  $happinessArray = array();
  foreach($happiestBlogs as $happiestBlog) {
    $happinessArray[]= $happiestBlog->Score;
  }
  $maxHappy = max($happinessArray);
  echo $maxHappy; 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T12:48:15.363

```
SELECT fieldlist
FROM `tableName`
WHERE `score` = (SELECT MAX(`score`) FROM `tableName`) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-20T12:46:34.347

你不能用查询吗？

```
SELECT * 
  FROM table_name 
 ORDER BY score 
  DESC LIMIT 1; 
```

如果您需要多个分数，则可以使用子查询：

```
SELECT * 
  FROM table_name 
 WHERE score = 
       (SELECT score
          FROM table_name 
         ORDER BY score 
          DESC LIMIT 1;
       ); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-20T12:48:03.963

试试这个。

```
$dbh=new PDO(DSN,USERNAME,PASSWORD);
$stmt=$dbh->prepare("SELECT * FROM TABLE_NAME ORDER BY Score DESC");
$stmt->execute();
while($happiestBlog=$stmt->fetch(PDO::FETCH_OBJ)):

    echo $happiestBlog->Score;

endwhile; 
```

在这里`ORDER BY Score DESC`获取第一个具有最高分数的行。

# php - 使用 SLIM PHP 框架的空白页面

> ID：13972425
> 
> 赞同：0
> 
> 时间：2012-12-20T12:38:29.657
> 
> 标签：php, apache2, slim

我目前正在使用最新的 Slim 版本开发一个 Web 应用程序。一切都在我的专业计算机上完美运行（在 Ubuntu 12.04 上运行），但我想在假期在家从事该项目。因此，我已将项目复制到我的个人计算机上（在 mac os x 10.6.8 上运行）。问题是我总是得到空白页。它看起来不是一个重写问题，因为即使使用丑陋的地址，它也不起作用。

请在下面找到可能对解决问题有用的文件和信息。

文件夹结构（/Users/Yoann/Sites/DS）

```
-.htaccess 
- index.php
- vendor/
- utils/
- services/ 
```

utils 和 services 目录包含一些 php 类，对解决我的问题没有兴趣。

.htaccess

```
RewriteEngine On 
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteRule ^(.*)$ /index.php [QSA,L] 
```

index.php（示例）

```
<?php

require_once 'vendor/autoload.php';
function autoload_class_multiple_directory($class_name) 
{
    # List all the class directories in the array.
    $array_paths = array(
        'utils/', 
        'services/'
    );

    foreach($array_paths as $path)
    {
        $file = sprintf('./%s%s.class.php',  $path, strtolower($class_name));
        if(is_file($file)) 
        {         
            include_once $file;
        } 
    }
}

spl_autoload_register('autoload_class_multiple_directory');

error_reporting(E_ALL);
ini_set('display_errors','On');

$app = new \Slim\Slim(array(
    "MODE" => "debug"
));

/* **********************************
 *          ROUTE DEFINITIONS
 * **********************************/
$arrDs = array("generator" => new Generator(),
               "average" => new Average()
               );

$app->get('/', function () use ($app,$arrDs){
    echo "dans la fonction de base !!! <br/>";
    foreach ($arrDs as $name => $obj){
        echo $name ."<br/>";
    }
});

$app->run();
?> 
```

我正在使用定义为的虚拟主机

```
<VirtualHost *:80>
ServerAdmin [email blocked]
DocumentRoot "/Users/Yoann/Sites/DS"
ServerName ds.local
ErrorLog "/private/var/log/apache2/ds-error_log" 
CustomLog "/private/var/log/apache2/ds-access_log" combined

  <Directory "/Users/Yoann/Sites/DS">
        AllowOverride All
        Order allow,deny
        Allow from all
    </Directory>
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:54:59.717

在开发环境中，始终将 error_reporting 设置为 E_ALL 并将 display_errors 设置为 true。

```
php.ini:
display_errors = On
error_reporting = E_ALL 
```

您将看到所有错误、警告等...

# ruby-on-rails - 在 RoR 中随机选择不同的数据库

> ID：13972429
> 
> 赞同：4
> 
> 时间：2012-12-20T12:38:54.870
> 
> 标签：ruby-on-rails, ruby, activerecord

我需要从 db 中选择随机记录。在我在开发中使用的 Sqlite3 中，有一个名为 Random() 的函数。然而，在 Postgresql 中它被称为 Rand()。我不记得MySql，但可能在那里这样称呼它。

所以如果我有一个代码（对于 Sqlite3）

```
data = Items.where(pubshied: is_pubshied).order("RANDOM()").limit(count) 
```

如何确保它适用于不同的数据库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T12:46:27.003

Rails 不支持这个开箱即用。我相信我通过模型扩展实现了这一点（我不再使用它，因为我强制使用 Postgresql），但是这样的事情可以工作：

```
module Randomize
  extend ActiveSupport::Concern

  included do
    scope :random, -> { order(rand_cmd) }
  end

  module ClassMethods
    def rand_cmd
      if connection.adapter_name =~ /mysql/i
        'rand()'
      else
        'random()'
      end
    end
  end
end 
```

然后你可以做

```
class Item
  include Randomize
end

Item.where(...).random.limit(...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T14:06:46.087

对于一种高性能的、非适配器特定的随机排序方式，填充一个随机列，在其上放置一个索引并将其命名为：

```
Foo.order("random_column > #{rand}").limit(1) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-20T13:24:34.653

从 waldyr.ar 在他的评论中提到的帖子的评论中：[https](https://stackoverflow.com/a/12038506/16784) ://stackoverflow.com/a/12038506/16784 。

Tl；博士：您可以使用`Items.all.sample(count)`. 当然，这会检索整个表，对于大表可能没有用。

# shell - 复制标准输入，运行两个任务，同时保留输出行的顺序？

> ID：13972430
> 
> 赞同：0
> 
> 时间：2012-12-20T12:38:58.107
> 
> 标签：shell, tee

我想编写一个单行命令来使用相同的标准输入副本执行两项任务。这是示例：

```
% echo "Victor\nHugo" | tee >(wc -l) | grep "V" 
```

结果最终将保存到一个文件中，由我的程序处理。我期望得到的是：

```
2
Victor 
```

但是，有时，如果`wc`碰巧更慢，输出顺序可能会颠倒：

```
% echo "Victor\nHugo" | tee >(sleep 1s; wc -l) | grep "V"
Victor
2 
```

也许我不应该这样使用`tee`？你有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T12:45:29.483

您可以使用带有 awk 的单个管道：

```
printf "Victor\nHugo\n" \
| awk '{a[NR]=$0} END {print NR; for(i=1;i<=NR;i++) if (a[i]~/^V/) print a[i];}' 
```

它不漂亮。输入数据集越大，它就越需要内存。但它会提供您期望的输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T12:46:44.157

对于这个例子，我认为最清晰的方法是经典的 preocedural 风格：

```
names="Victor\nHugo\n"
printf $names | wc -l
printf $names | grep "V" 
```

# android - 如何在android中使用kSoap2在AsyncTask中获取soapObjet返回

> ID：13972431
> 
> 赞同：1
> 
> 时间：2012-12-20T12:38:57.687
> 
> 标签：android, android-asynctask, asmx

我想调用 ASMX web 服务， **如何从 doInBackground 取回活动中的 SoapObject 或 List** ，web 服务工作正常，它在日志文件上显示值，我的代码是，文件我调用 web 服务

```
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;
import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;
import org.xmlpull.v1.XmlPullParserException;
import android.util.Log;

public class WebserviceMainCategory {

    static String SOAP_ACTION = "http://tempuri.org/loadProductCatagory";
    static String METHOD_NAME = "loadProductCatagory";
    static String NAME_SPACE = "http://tempuri.org/";
    static String URL = "http://74.53.87.146/seharwebservice/Service.asmx";
    public  List<String> main_items = new ArrayList<String>();

    public static String[] namess ;
    static int s ;
    public static SoapObject soap;

    public  SoapObject webServiceMain_list() {

        SoapObject request = new SoapObject(NAME_SPACE, METHOD_NAME);

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                SoapEnvelope.VER11);
        envelope.dotNet = true;

        envelope.implicitTypes = true;
        envelope.setAddAdornments(false);
        envelope.setOutputSoapObject(request);

        HttpTransportSE httpTransportSe = new HttpTransportSE(URL);
        httpTransportSe.debug = true;

        try {

            httpTransportSe.call(SOAP_ACTION, envelope);

            Object result = envelope.getResponse();

            soap = (SoapObject) result;

            /*
            SoapObject result2nd = (SoapObject) result;
            s = result2nd.getPropertyCount();
                        //String[]arrayLis = new String[s];

                        namess = new String[s];
                        for(int i=0; i<result2nd.getPropertyCount(); i++)
                        {
                            Log.d("ddd", result2nd.getPropertyAsString(i));
                            namess[i]=result2nd.getPropertyAsString(i);
                            Log.d("array", namess[i]);
                            main_items.add(result2nd.getPropertyAsString(i));
                        }
                    */

        } catch (IOException e) {
            e.printStackTrace();

        } catch (XmlPullParserException e) {
            e.printStackTrace();
        }
        return soap;    
    }

} 
```

我在哪里创建 AsyncTask 类

```
class Main_itemsList extends AsyncTask<Void, Void,  SoapObject> {

    @Override
    protected SoapObject doInBackground(Void... params) {
        WebserviceMainCategory mAuth = new WebserviceMainCategory();

        return  mAuth.webServiceMain_list();

    }

    public void execute(SoapObject aa) {

    }
    } 
```

如何在主要活动中获得响应，

喜欢我活动中的代码

SoapObject 肥皂 = 新 Main_itemsList().execute();

我们的

ListArray aa = new Main_itemsList().execute();

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:10:11.030

你这样做

```
private SoapObject aa;
class Main_itemsList extends AsyncTask<Void, Void, SoapObject> {
    @Override
    protected SoapObject doInBackground(Void... params) {
        // this is executed in a background thread.
        // the result is returned to the UI thread via onPostExecute
        WebserviceMainCategory mAuth = new WebserviceMainCategory();
        return  mAuth.webServiceMain_list();
    }
    @Override
    protected void onPostExecute(SoapObject result) {
        // aa is inside your Activity / Fragment which
        // contains this class
        aa = result;
    }
}

// you just need to start the task somewhere
public void onSomething() {
    // this will set "aa" when it's done.
    new Main_itemsList().execute();
} 
```

如果您启动`AsyncTask`它，它将执行您`doInBackground`在后台线程中定义的任何操作。您返回的结果将被传输回 UI 线程以`onPostExecute`. 在那里，您获取结果并将其“发布”到您的活动或片段。

# batch-file - 使用 Dos 命令读取文本文件中的 %date% 输出

> ID：13972432
> 
> 赞同：0
> 
> 时间：2012-12-20T12:38:58.683
> 
> 标签：batch-file

我的要求是我正在使用 dos 命令创建一个文本来存储日期

```
Echo %date% > Sample.txt 
```

现在我应该阅读`Sample.txt`以检查日期值并根据当前日期我应该调用另一个批处理文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:44:11.763

该线程思考您的问题并至少有一个解决方案： [http ://www.computerhope.com/forum/index.php?topic=112106.0](http://www.computerhope.com/forum/index.php?topic=112106.0)

1.  用今天的日期创建另一个文件
2.  将文件与 FC 进行比较
3.  使用 FIND 检查 FC 的输出是否显示没有差异
4.  使用 FIND 返回的错误级别来分支您的批处理文件

    FC c:\Download\TodayFile.txt c:\Yesterday\File.txt /L | FIND "FC: no dif" > nul
    IF ERRORLEVEL 1 goto different
    echo 文件是一样的。
    goto end
    : different echo 文件不同。
    ：结尾

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T12:45:45.450

写

```
@echo off
for /F "usebackq tokens=1,2 delims==" %%i in (`wmic os get LocalDateTime /VALUE 2^>NUL`) do if '.%%i.'=='.LocalDateTime.' set ldt=%%j
set ldt=%ldt:~0,4%-%ldt:~4,2%-%ldt:~6,2% %ldt:~8,2%:%ldt:~10,2%:%ldt:~12,6%
echo %ldt% > test.txt 
```

读

```
 @echo off
    for /f %%a in (test.txt) do (
    echo %%a
    pause
    ) 
```

# android - 安卓应用支持多种语言

> ID：13972434
> 
> 赞同：4
> 
> 时间：2012-12-20T12:39:14.263
> 
> 标签：android, google-play

如果我想上传我的 Android 应用程序以支持多种语言，我是否必须上传多个 .apk，每个都针对我想要支持的语言设计，或者我是否将它们全部实现到一个 .apk 文件中？

*注意*：我的应用程序是一个游戏，在 UI 中实际上并不包含任何字符串。UI 是使用 Photoshop 制作的，例如带有文本的按钮等。

如果我将所有语言打包到一个 .apk 文件中，我如何检查应用程序应该使用哪种语言？

**更新：**

我所有的图像都存储在我项目的资产文件夹中。我将如何本地化它们？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T12:41:14.150

不，您不需要创建多个 APK，只需使用本地化的单个 APK，请参阅此[http://developer.android.com/training/basics/supporting-devices/languages.html](http://developer.android.com/training/basics/supporting-devices/languages.html) 和此[http://developer.android .com/guide/topics/resources/localization.html](http://developer.android.com/guide/topics/resources/localization.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T12:46:29.877

在给出你的问题答案之前，我告诉你关于 android 中的多语言基本上在 android 应用程序中的区域工作意味着如果我在美国有设备 -> 安装一个应用程序 -> 一旦安装，如果应用程序是为多语言支持而开发的，那么它会自动呈现那些细绳。

-> 现在的问题是如何以多语言构建应用程序，您必须为您的应用程序支持的每种语言定义 string.xml。

--例如：res/values <= default --for西班牙语：res/values-es

--对于您的问题答案：如果您用静态方式定义图像，则它不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T12:48:30.843

对于具有包含文本的图像的游戏，您可以使用与普通字符串相同的方法。

可以说，对于字符串，您将在下面有一个 strings.xml 文件

```
values-en
values-es
values-de
values-fr 
```

然后对于您可以使用的图像（注意限定符优先级）

```
drawable-es-hdpi
drawable-en-hdpi
drawable-de-hdpi
drawable-fr-hdpi 
```

但是，这将使您的应用程序更大。

我通常做的是使用背景以编程方式生成图像，然后在其上使用一些自定义字体渲染文本。即使图像是要在 3D 引擎上使用的纹理，它也可以正常工作，我相信这是一种更合理的方法。

# jquery - 将剔除数据驱动表添加到剔除数据驱动手风琴窗格

> ID：13972436
> 
> 赞同：0
> 
> 时间：2012-12-20T12:39:21.430
> 
> 标签：jquery, json, knockout.js

我正在尝试创建一种我想在我的应用程序中使用的通用控件。这将是一个标准的手风琴（我使用了 Twitter Bootstrap），这取决于我从服务器接收到的 JSON 数据，将创建多少手风琴部分。在每个手风琴部分中，我想添加一个普通的 HTML 表，该表也使用从服务器获取的 JSON 数据构建。一切都将在客户端运行，接受 Ajax 的初始发布以获取 JSON 信息。所以我相信某种 HTML 模板是必需的？

这就是我到目前为止所拥有的。JSON数据：

```
 var data = {
        "d": [
    {
        "__type": "Warehouse.Tracntrace.Members_Only.DLL.StockMovement.AvailibleStock",
        "WarehouseID": 1,
        "ProductSKUID": 1,
        "ProductSKUName": "Decoder 1132",
        "WarehouseName": "SoftwareDevelopmentTest",
        "Status": "Staging",
        "QtyUnassigned": 10
    },
    {
        "__type": "Warehouse.Tracntrace.Members_Only.DLL.StockMovement.AvailibleStock",
        "WarehouseID": 1,
        "ProductSKUID": 2,
        "ProductSKUName": "Decoder 1131",
        "WarehouseName": "SoftwareDevelopmentTest",
        "Status": "Staging",
        "QtyUnassigned": 5
    }
]
    };

    var data2 = {
        "d": [
    {
        "__type": "Warehouse.Tracntrace.Members_Only.DLL.StockMovement.StockReturnMethod",
        "WarehouseID": 1,
        "ProductSKUID": 2,
        "LotID": 2,
        "LotName": "TestLot2",
        "AreaID": 8,
        "AreaName": "TestArea3L2",
        "BinID": 18,
        "BinName": "Area8Bin2"
    },
    {
        "__type": "Warehouse.Tracntrace.Members_Only.DLL.StockMovement.StockReturnMethod",
        "WarehouseID": 1,
        "ProductSKUID": 2,
        "LotID": 3,
        "LotName": "TestLot3",
        "AreaID": 11,
        "AreaName": "TestArea2L3",
        "BinID": 20,
        "BinName": "Area10Bin1"
    },
    {
        "__type": "Warehouse.Tracntrace.Members_Only.DLL.StockMovement.StockReturnMethod",
        "WarehouseID": 1,
        "ProductSKUID": 2,
        "LotID": 4,
        "LotName": "TestLot4",
        "AreaID": 15,
        "AreaName": "TestArea2L4",
        "BinID": 24,
        "BinName": "Area14Bin1"
    },
     {
         "__type": "Warehouse.Tracntrace.Members_Only.DLL.StockMovement.StockReturnMethod",
         "WarehouseID": 1,
         "ProductSKUID": 1,
         "LotID": 2,
         "LotName": "TestLot2",
         "AreaID": 8,
         "AreaName": "TestArea3L2",
         "BinID": 18,
         "BinName": "Area8Bin2"
     },
    {
        "__type": "Warehouse.Tracntrace.Members_Only.DLL.StockMovement.StockReturnMethod",
        "WarehouseID": 1,
        "ProductSKUID": 1,
        "LotID": 3,
        "LotName": "TestLot3",
        "AreaID": 11,
        "AreaName": "TestArea2L3",
        "BinID": 20,
        "BinName": "Area10Bin1"
    },
    {
        "__type": "Warehouse.Tracntrace.Members_Only.DLL.StockMovement.StockReturnMethod",
        "WarehouseID": 1,
        "ProductSKUID": 1,
        "LotID": 4,
        "LotName": "TestLot4",
        "AreaID": 15,
        "AreaName": "TestArea2L4",
        "BinID": 24,
        "BinName": "Area14Bin1"
    }
]
    }; 
```

我刚刚使用了 2 个 AJAX 调用从我的服务器获取此信息，如您所见，这两个数据集之间存在相似性（两者都可以通过 ProductSKUID 和 WarehouseID 相互关联）。

接下来，我有我的 KnockoutJS 和 Standard JQuery 来构建手风琴的功能，方法是使用 innerHTML 方法创建手风琴并在手风琴内创建 HTML 表。

```
 var ProductViewmodel;
    //debugger; 

    //Binds ViewModel
    function bindProductModel(Products) {
        var self = this;
        self.items = ko.mapping.fromJS([]);
        ProductViewmodel = ko.mapping.fromJS(Products.d, self.items);
        console.log(ProductViewmodel());

    }

    //Binds First DataSet
    function bindModel(vm, data) {
        var self = this;
        vm.Locations = ko.mapping.fromJS(data.d);
        console.log(ProductViewmodel());
    }

    //Create Table In Accordion PANE based on Data
    //This Creates The Table in Each Accordion Pane
    function InjectBody() {
        var bodyContainer = document.getElementById('injectbody');
        var body = bodyContainer.innerHTML;
        body = body + '<table class="table table-striped"><thead><tr><th>#</th><th>Lot</th><th>Area</th><th>Bin</th><th>Qty To Assign</th></tr></thead><tbody data-bind="foreach: Locations"><tr><td id="Assign"><input type="checkbox" /></td><td id="Lot" data-bind="text: LotName"></td><td id="Area" data-bind="text: AreaName"></td><td id="Bin" data-bind="text: BinName"></td><td id="QtyToAssign"><input type="text" /></td></tr></tbody></table>';
        bodyContainer.innerHTML = body;
    }

    //Create Accordian Panes
    //This Creates The Hyperlink Based On JSON DATA
    function BuildLinkFromJSON() {
        var link;
        link = '<a data-bind="foreach: items" class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#collapse"><span data-bind="text: ProductSKUName"></span></a>';
        //This Creates The Table in Each Accordion Pane
        InjectBody();
        return link;
    }

    //Create Accordian Header
    //This Creates Each Header in the Accordian
    function BuildAccordian() {
        //This Creates The Hyperlink Based On JSON DATA
        var link = BuildLinkFromJSON();
        var eventsContainer = document.getElementById('accordion');
        var events = eventsContainer.innerHTML;
        events = events + '<div class="accordion-group"><div class="accordion-heading">' + link + '</div><div id="collapseOne" class="accordion-body collapse in"><div class="accordion-inner"><div id="injectbody"></div></div></div>';
        eventsContainer.innerHTML = events;
    }

    //Starting Function
    //This Creates the ProductViewModel Binding of both DataSets
    $(document).ready(function () {
        bindProductModel(data);
        bindModel(ProductViewmodel()[0], data2);
        ko.applyBindings(ProductViewmodel);

    }) 
```

好吧，它似乎完全失败了，我不确定该怎么做才能修复它......我已经创建了这个[Fiddle](http://jsfiddle.net/Fumunchu/WjVEM/)，但甚至没有给出输出。任何帮助将不胜感激！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:41:27.760

当我为 KO 自定义“控件”时，我使用字符串模板源并在脚本中为“控件”编写 HTML。你可以查看我正在进行的工作 KO Combobox 了解如何做到这一点

[https://github.com/AndersMalmgren/Knockout.Combobox/blob/master/src/knockout.combobox.js](https://github.com/AndersMalmgren/Knockout.Combobox/blob/master/src/knockout.combobox.js)

查看模板部分

```
//string template source engine
var stringTemplateSource = function (template) {
    this.template = template;
};

stringTemplateSource.prototype.text = function () {
    return this.template;
};

var stringTemplateEngine = new ko.nativeTemplateEngine();
stringTemplateEngine.makeTemplateSource = function (template) {
    return new stringTemplateSource(template);
};

var template= '<div data-bind="with: model">\
   <span data-bind="text: data"></span>\
</div>'; 
```

并从自定义绑定应用模板

```
ko.bindingHandlers.myBinding = {
    init: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        var model = new MyBindingViewModel(valueAccessor());
        ko.renderTemplate(template, bindingContext.createChildContext(model), { templateEngine: stringTemplateEngine }, element, "replaceChildren");

        return { controlsDescendantBindings: true };
    }
}; 
```

您现在可以像使用视图中的普通绑定一样使用自定义绑定

```
<div data-bind="myBinding: model"></div> 
```

# java - Process.exitValue() 和 Process.destroy() 功能

> ID：13972442
> 
> 赞同：9
> 
> 时间：2012-12-20T12:39:40.830
> 
> 标签：java, windows, process, processbuilder

我一直在尝试`Process`并`ProcessBuilder`使用此 SSCCE。

```
 import java.io.IOException;
        public class TestProcess {
            public static void main(String[] args) {
                Process process = null;
                ProcessBuilder pb = new ProcessBuilder("notepad.exe");

                try {
                    process = pb.start();
                } catch (IOException e) {e.printStackTrace();}

                //have some time to close notepad
                try {
                    Thread.sleep(10*1000);
                } catch (InterruptedException ignored) {}

                try {
                    System.out.println(process.exitValue());
                 } catch (IllegalThreadStateException e) {
                    System.out.println(e);
                 }

                 if (process != null)
                     process.destroy();

                 /*try {
                     Thread.sleep(0, 1);
                 } catch (InterruptedException ignored) {}*/

                 System.out.println(process.exitValue());
             }
         } 
```

1.  如果我在 10 秒超时之前运行此代码并关闭记事本。`destroy()`尝试停止已终止的进程时调用未显示任何问题。**为什么？**
2.  如果运行此代码并且根本不关闭记事本（带有注释的第二次睡眠）

似乎destroy是异步调用（**只是发送一个信号？**），这会导致第二个异常`exitValue()`

```
 java.lang.IllegalThreadStateException: process has not exited
 Exception in thread "main" java.lang.IllegalThreadStateException: process has not exited
        at java.lang.ProcessImpl.exitValue(ProcessImpl.java:246)
        at TestProcess.main(TestProcess.java:30) 
```

1.  如果我运行此代码并且根本不关闭记事本（带有未注释的第二次睡眠）`exitValue`，那么即使睡眠值只有 1 毫秒，第二次也不会抛出异常。**是因为`sleep()`开销本身吗？** 第二个`exitValue`将返回 1。

PS。我从 Windows 7 和 Eclipse 运行它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-18T19:07:02.840

`ProcessImpl.java`关于`destroy`方法调用本机函数`terminateProcess`：

```
public void destroy() { terminateProcess(handle); }

private static native void terminateProcess(long handle); 
```

`terminateProcess`取决于平台，对于 Windows，您可以在[此处](http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/windows/native/java/lang/ProcessImpl_md.c#l435)找到源代码。它只是调用 Windows TerminateProcess 函数（该函数的链接在以前的答案中，或者你可以用谷歌搜索它）`uExitCode=1`- 这就是为什么销毁进程的退出代码是`1`.

在 linux 中看起来像是使用了类似的[东西](http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/solaris/native/java/lang/UNIXProcess_md.c#l720)。并且作为证明下一个代码`143`在 ubuntu 中返回，对应于`SIGTERM`（[https://stackoverflow.com/a/4192488/3181901](https://stackoverflow.com/a/4192488/3181901)）：

```
public static void main(final String[] args) throws IOException, InterruptedException {
    final Process process = Runtime.getRuntime().exec(args[0]);
    process.destroy();
    Thread.sleep(1000);
    System.out.println(process.exitValue());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T13:17:13.360

我期待destroy() 方法正在调用本机Windows 函数TerminateProcess。查看[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686714%28v=vs.85%29.aspx)，我发现了这一点：

> TerminateProcess 是异步的；它启动终止并立即返回。如果您需要确保进程已终止，请使用进程句柄调用 WaitForSingleObject 函数。

所以我认为它解释了destroy确实是异步的。

同一来源的另一个摘录：

> TerminateProcess 函数用于无条件地导致进程退出。

我想“无条件地”可以解释为什么在终止进程上调用 destroy() 不会失败。

希望这有帮助。（真的很有趣的问题！）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T13:17:30.167

1.  为什么*会*显示问题？您正试图破坏一个已经被破坏的进程。的规范`Process.destroy()`并没有说明如果没有什么可以破坏会发生什么，所以假设如果没有什么可以破坏，那么就没有什么可抱怨的，这是合乎逻辑的（我想）。与`Thread.join()`相比，如果线程已经结束，它不仅会死掉。

2.  杀死进程的唯一方法是向它发送信号。在某些操作系统上，还有其他更“暴力”的方式（例如，在某些平台上，可以简单地从操作系统的正在运行的进程列表中删除该进程。结果是未定义的，并且通常以丑陋的方式结束），但至少对于我所知道的平台，它实际上都是关于发送信号的。

3.  实际上，可能是因为调用`Thread.sleep()`. 尝试增加超时值。

# python - Scipy：Hermite 函数与正交权重的集成

> ID：13972450
> 
> 赞同：2
> 
> 时间：2012-12-20T12:40:07.500
> 
> 标签：python, numpy, scipy, signal-processing, numerical-integration

我想使用 scipy.integrate.quad 集成两个时移和频移 Hermite 函数的乘积。

但是，由于包含大阶多项式，因此会出现数值错误。这是我的代码：

```
import numpy as np
import scipy.integrate
import scipy.special as sp
from math import pi

def makeFuncs():
    # Create the 0th, 4th, 8th, 12th and 16th order hermite function
    return [lambda t, n=n: np.exp(-0.5*t**2)*sp.hermite(n)(t) for n in np.arange(5)*4]

def ambgfun(funcs, i, k, tau, f):
    # Integrate f1(t)*f2(t+tau)*exp(-j2pift) over t from -inf to inf
    f1 = funcs[i]
    f2 = funcs[k]
    func = lambda t: np.real(f1(t) * f2(t+tau) * np.exp(-1j*(2*pi)*f*t))
    return scipy.integrate.quad(func, -np.inf, np.inf)

def main():
    f = makeFuncs()

    print "A00(0,0):", ambgfun(f, 0, 0, 0, 0)
    print "A01(0,0):", ambgfun(f, 0, 1, 0, 0)
    print "A34(0,0):", ambgfun(f, 3, 4, 0, 0)

if __name__ == '__main__':
    main() 
```

Hermite 函数是正交的，因此所有积分都应为零。但是，它们不是，如输出所示：

```
A00(0,0): (1.7724538509055159, 1.4202636805184462e-08)
A01(0,0): (8.465450562766819e-16, 8.862237123626351e-09)
A34(0,0): (-10.1875, 26.317246925873935) 
```

我怎样才能使这个计算更准确？来自 scipy 的 hermite 函数包含一个权重变量，该变量应用于高斯求积，如文档 ( [http://docs.scipy.org/doc/scipy/reference/special.html#orthogonal-polynomials](http://docs.scipy.org/doc/scipy/reference/special.html#orthogonal-polynomials) ) 中所给出。但是，我没有在文档中找到如何使用这些权重的提示。

我希望你能帮忙:)

谢谢，马克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T19:42:19.330

答案是你得到的结果在数值上尽可能接近于零。我不认为如果你使用浮点数真的有可能得到更好的结果——你在数值积分方面面临着一个普遍的问题。

考虑一下：

```
import numpy as np
from scipy import integrate, special
f = lambda t: np.exp(-t**2) * special.eval_hermite(12, t) * special.eval_hermite(16, t)

abs_ig, abs_err = integrate.quad(lambda t: abs(f(t)), -np.inf, np.inf)
ig, err = integrate.quad(f, -np.inf, np.inf)

print ig
# -10.203125
print abs_ig
# 2.22488114805e+15
print ig / abs_ig, err / abs_ig
# -4.58591912155e-15  1.18053770382e-14 
```

因此，被积函数的值已被计算为与浮点 epsilon 相当的精度。由于在减去大幅度振荡被积函数的值时存在舍入误差，因此实际上不可能得到更好的结果。

那么如何进行呢？根据我的经验，您现在需要做的不是从数字上而是从分析上解决问题。重要的是，Hermite 多项式乘以权重函数的傅里叶变换是已知的，因此您可以一直在傅里叶空间中工作。

# macos - WINeskin 不会模拟 iso

> ID：13972451
> 
> 赞同：0
> 
> 时间：2012-12-20T12:40:08.567
> 
> 标签：macos, wrapper, wine

我正在尝试在葡萄酒皮上玩一个旧游戏。但它需要插入/模拟 CD 才能运行。此游戏没有 NO-CD 补丁（Last Call - 你作为调酒师玩的那个）。

我读过你必须在启动应用程序后立即设置 wine 来模拟 iso。

WineskinStartupScript

```
hdiutil mount "$CONTENTSFOLD/Resources/drive_c/LASTCALL.iso" 
```

和

WineskinShutdownScript 和 WineskinQuitScript

```
hdiutil detach /Volumes/LASTCALL 
```

但是游戏还是会说cd没有插入。我做错什么了吗？

顺便说一句，我在 OS X Lion 上...

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:49:26.250

我不知道为什么这不起作用，但是有一个更简单的方法：在 Wineskin 中创建一个 drive_d，并将 ISO 文件的所有内容复制到 drive_d 文件夹中。

新用户很难创建 drive_d，因此您可能更愿意使用[Gamma Studio](http://sourceforge.net/projects/gammastudio/)创建它。这可能会奏效。

# apache-camel - 在暂停状态下启动骆驼路线

> ID：13972455
> 
> 赞同：0
> 
> 时间：2012-12-20T12:40:18.137
> 
> 标签：apache-camel

有没有办法建立以暂停模式开始的骆驼路线？我希望在启动时说“declutch”，然后在某个阶段通过调用快速开始处理消息`resumeRoute(routeId)`

我也许可以创建路由，然后在创建路由后快速调用`suspendRoute(routeId)`，但在那个阶段，它可能会消耗一些消息（例如在 JMS 路由或轮询消费者路由的情况下）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T00:44:48.080

通常，您只需使用[autostartup(false)](http://camel.apache.org/configuring-route-startup-ordering-and-autostartup.html)禁用路由...

我假设您在问，因为您需要启动（加热）路线，但不活动。在这种情况下，您应该能够使用自定义[路由策略](http://camel.apache.org/routepolicy.html)和一些外部变量来获得这种行为

# iphone - 检索 iOS 设备标识符

> ID：13972459
> 
> 赞同：5
> 
> 时间：2012-12-20T12:40:28.947
> 
> 标签：iphone, ios, uniqueidentifier

有没有办法在 iOS SDK 中获取 iOS 设备标识符？我想访问由 Xcode 在**Organizer - Devices**部分提供的标识符，例如：21xb1fxef5x2052xec31x3xd3x48ex5e437xe593

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-20T12:46:16.397

看起来您仍然可以在 iOS 6 下访问 UDID，但自 iOS 5.0 以来**已弃用它**，您不应该使用它（无论如何您都会收到警告）

```
[UIDevice currentDevice].uniqueIdentifier 
```

如果您需要唯一标识符，您应该使用：

```
[UIDevice currentDevice].identifierForVendor 
```

或者如果它与某种广告有关，那么：

```
// from  AdSupport.framework
[ASIdentifierManager sharedManager].advertisingIdentifier 
```

然而，这两个新属性仅在 iOS >= 6.0 下可用，而且 AdvertisingIdentifier 也不是真正唯一的（我从中得到了很多重复项）。

我想如果你也不想支持 iOS < 6，你可以这样做：

```
UIDevice *device = [UIDevice currentDevice];
NSString *ident = nil;
if ([device respondsToSelector:SEL(identifierForVendor)]) {
    ident = [device.identifierForVendor UUIDString];
} else {
    ident = device.uniqueIdentifier;
} 
```

但我不确定苹果在审查期间会如何回应。

~~您还可以使用一些 3rd 方解决方案，例如[openUDID](https://github.com/ylechelle/OpenUDID)或[secureUDID](http://www.secureudid.org)~~。不推荐使用开放和安全的 UDID - 将标识符用于供应商/广告。

* * *

更新

~~另一种可能性是使用 MAC 地址作为唯一哈希的基础，例如，您可以使用来自[ODIN1](http://code.google.com/p/odinmobile/wiki/ODIN1)的代码-[源代码在这里](http://odinmobile.googlecode.com/svn/Sample%20Code/iOS/trunk/)~~

自 iOS7 起，MAC 地址不再可用。（可以阅读它，但它总是相同的虚拟地址 02:00:00:00:00:00）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-20T12:51:40.277

从[苹果文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIDevice_Class/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/occ/instp/UIDevice/uniqueIdentifier)：

> 基于各种硬件细节的每个设备唯一的字母数字字符串。（只读）（iOS 5.0 已弃用。酌情使用此类的 identifierForVendor 属性或 ASIdentifierManager 类的 adsIdentifier 属性，或使用 NSUUID 类的 UUID 方法创建 UUID 并将其写入用户默认数据库。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-29T09:24:31.343

```
NSString* identifier = nil;
if( [UIDevice instancesRespondToSelector:@selector(identifierForVendor)] ) {
  // iOS 6+
  identifier = [[[UIDevice currentDevice] identifierForVendor] UUIDString];
} else {
  // before iOS 6, so just generate an identifier and store it
  identifier = [[NSUserDefaults standardUserDefaults] objectForKey:@"identiferForVendor"];
  if( !identifier ) {
    CFUUIDRef uuid = CFUUIDCreate(NULL);
    identifier = (__bridge_transfer NSString*)CFUUIDCreateString(NULL, uuid);
    CFRelease(uuid);
    [[NSUserDefaults standardUserDefaults] setObject:identifier forKey:@"identifierForVendor"];
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T12:59:20.820

您可以找到唯一的设备标识符

```
[[UIDevice currentDevice] uniqueIdentifier] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T13:23:44.960

```
+ (NSString *)uuid
{
    NSString *uuidString = nil;
    CFUUIDRef uuid = CFUUIDCreate(NULL);
    if (uuid) {
        uuidString = (NSString *)CFUUIDCreateString(NULL, uuid);
        CFRelease(uuid);
    }
    return [uuidString autorelease];
} 
```

它可以 100% 工作，即使在模拟器上也是如此......

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-20T12:45:06.323

就在这里。

```
[[UIDevice currentDevice] uniqueIdentifier] 
```

编辑：但是这在 iOS 5 中已被弃用。此标识符不应再在 iOS 5 中使用。阅读[此 SO](https://stackoverflow.com/questions/7894258/the-ios-5-changed-the-uniqueidentifier-code)帖子了解更多详细信息。

# objective-c - 在 textFieldShouldReturn 之后调用方法

> ID：13972461
> 
> 赞同：2
> 
> 时间：2012-12-20T12:40:30.370
> 
> 标签：objective-c, cocoa-touch, uiviewcontroller, uitextview, uiactivityindicatorview

我想在键盘被关闭后调用我的登录方法 - 因为我想启动动画并将 UIView alpha 更改为 0.5 直到响应。

```
- (BOOL)textFieldShouldReturn:(UITextField *)theTextField {
    if (theTextField == self.passwordText){
        //hide the keyboard
        [theTextField resignFirstResponder];

        [self validateCredentialsRemotely];

    }else{
         [self.passwordText becomeFirstResponder];
    }
    return YES;
} 
```

在调用该方法**之前**键盘不会被关闭，`validateCredentialsRemotely`并且在显示键盘时屏幕会冻结。我希望它首先被解雇，然后调用该方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T12:51:27.583

使用此通知..

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillShow:) name:UIKeyboardWillShowNotification object:nil];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillHide:) name:UIKeyboardWillHideNotification object:nil]; 
```

在 keyboardWillHide 方法中调用您的 validateCredentialsRemotely 方法，这可能会解决您的第一个问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T12:50:31.090

试试这个！

```
- (BOOL)textFieldShouldReturn:(UITextField *)theTextField {
if (theTextField == self.passwordText){
    //hide the keyboard
    [theTextField resignFirstResponder];

    [self performSelector:@selector(doAnim) withObject:nil afterDelay:0];

    }else{
        [self.passwordText becomeFirstResponder];
    }
    return YES;
}
- (void)doAnim {
    //start animation
    self.view.alpha =0.5;
    [activityWheel startAnimating];
    //validate user
    [self validateCredentialsRemotely];
    //end animation
    [activityWheel stopAnimating];
    self.view.alpha =1;
} 
```

# c++ - 为什么在 C++ 中隐式传播方法的“虚拟性”？

> ID：13972462
> 
> 赞同：12
> 
> 时间：2012-12-20T12:40:36.570
> 
> 标签：c++, templates, polymorphism, virtual, type-erasure

删除阻止方法虚拟性传播的能力的原因是什么？

让我更清楚一点：在 C++ 中，无论您在派生类中编写“virtual void foo()”还是“void foo()”，只要在基类中声明 foo 为虚拟，它就会是虚拟的。

这意味着通过派生* 指针调用 foo() 将导致虚拟表查找（以防派生2 函数覆盖 foo），即使程序员不希望这种行为。

让我举一个例子（对我来说看起来很明显）来说明停止虚拟传播是如何有用的：

```
template <class T>
class Iterator // Here is an iterator interface useful for defining iterators
{              // when implementation details need to be hidden
public:
    virtual T& next() { ... }
    ...
};

template <class T>
class Vector
{
public:
    class VectIterator : public Iterator<T>
    {
    public:
        T& next() { ... }
        ...
    };
    ...
}; 
```

在上面的示例中，可以使用 Iterator 基类以更清晰和面向对象的方式实现“类型擦除”的一种形式。（有关类型擦除的示例，请参见[http://www.artima.com/cppsource/type_erasure.html 。）](http://www.artima.com/cppsource/type_erasure.html)

但是，在我的示例中，可以直接使用 Vector::VectIterator 对象（在大多数情况下都会这样做），以便在不使用接口的情况下访问真实对象。

如果没有传播虚拟性，即使从指针或引用调用 Vector::VectIterator::next() 也不会是虚拟的，并且能够内联并高效运行，就像 Iterator 接口不存在一样。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-20T12:44:57.703

C++11`final`为此添加了上下文关键字。

```
class VectIterator : public Iterator<T>
{
public:
    T& next() final { ... }
    ...
};

struct Nope : VecIterator {
    T& next() { ... } // ill-formed
}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T14:04:41.163

简单的答案是：不要混合具体和抽象接口！在您的示例中，显而易见的方法是使用委托给函数的非`virtual`函数，例如. 派生类可能会覆盖委托给非函数。由于这些功能很可能在委派中不涉及任何成本。`next()``virtual``do_next()``do_next()``virtual``next()``next()``inline`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T14:43:55.983

在我看来，这种传播的一个很好的原因是`virtual`析构函数。在 C++ 中，当你有一个带有一些`virtual`方法的基类时，你应该定义析构函数`virtual`。这是因为某些代码可能有一个基类指针，该指针实际上指向派生类，然后尝试删除该指针（有关更多详细信息，请参阅此[问题](https://stackoverflow.com/questions/461203/when-to-use-virtual-destructors)）。通过在基类中定义析构函数，`vritual`您可以确保所有指向派生类的基类指针（在任何继承级别）都将正确删除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T16:01:25.207

我认为原因是通过继承结构中途删除虚拟性真的会令人困惑（我在下面有一个复杂性的例子）。

但是，如果您关心的是删除一些虚拟呼叫的微优化，那么我不会担心。只要您内联虚拟子方法的代码，并且您的迭代器是通过值而不是引用传递的，一个好的优化编译器就*已经*能够在编译时看到动态类型并为您内联整个事情，尽管它是一个虚拟方法！

但为了完整起见，请使用可以去虚拟化的语言考虑以下内容：

```
class A
{
public:
    virtual void Foo() { }
};

class B : public A
{
public:
    void Foo() { } // De-virtualize
};

class C: public B
{
public:
    void Foo() { } // not virtual
};

void F1(B* obj)
{
    obj->Foo();
    static_cast<A*>(obj)->Foo();
}

C test_obj;
F1(test_obj);   // Which two methods are called here? 
```

您可以为将调用哪些方法制定规则，但明显的选择会因人而异。仅仅传播方法的虚拟性要简单得多。

# objective-c - 点击 Return 时转到下一个文本字段

> ID：13972465
> 
> 赞同：2
> 
> 时间：2012-12-20T12:40:43.823
> 
> 标签：objective-c, cocoa-touch, ios5

我编写了一个`textFieldDone:`方法，假设在点击 Return 按钮时将光标移动到下一个文本字段。

```
- (IBAction)textFieldDone:(id)sender {
     [nextTextField becomeFirstResponder];
     NSLog(@"in : textFieldDone");
} 
```

我已将第一个文本字段的“退出时结束”事件连接到文件所有者并选择了该`textFieldDone:`方法。我还将文件所有者指定为文本字段的代表（因为我需要相应地向上/向下滚动视图，以便键盘不会隐藏文本字段）。

当我在模拟器上运行应用程序并点击返回按钮时，第一个文本字段退出第一响应者，在日志中我看到程序没有通过该`textFieldDone:`方法，但它确实通过了该`textFieldDidEndEditing:`方法。

我以前用过那个方法，没有问题。

是因为文件的所有者是文本字段的代表吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T12:49:21.257

你需要写在

```
- (BOOL) textFieldShouldReturn:(UITextField*) textField 
```

转到下一个文本字段。

示例代码：

```
-(BOOL) textFieldShouldReturn:(UITextField*) textField 
{
    if (textField == txt1)
    {
        [txt1 resignFirstResponder];
        [txt2 becomeFirstResponder];
    }
    if (textField == txt2)
    {
        [txt2 resignFirstResponder];
    }
    return YES;
} 
```

不要忘记将委托添加`UITextFieldDelegate`到您的 UITextfield。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T12:42:58.670

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField
{
    if ([textField isEqual:txt1]) 
    {
        [txt2 becomeFirstResponder];
    }
    return true;    
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T12:58:37.800

上面的答案是正确的，但是为了使这个更通用，您应该使用 tag 选项

```
UITextField *txt1;
txt1.tag=1;
UITextField *txt2;
txt2.tag=2;
UITextField *txt3;
txt3.tag=3;
- (BOOL)textFieldShouldReturn:(UITextField *)textField
{
    if ([[textField superview] viewWithTag:textField.tag+1])
        {
        [[[textField superview] viewWithTag:textField.tag+1] becomeFirstResponder];
        }
    else{  [textField resignFirstResponder];
    }
    return true;
} 
```

注意：不要`textField`与标签 0 一起使用。因为`subViews`默认情况下所有标签都具有标签=0。

# javascript - 需要一个标识符，而是看到')'

> ID：13972467
> 
> 赞同：5
> 
> 时间：2012-12-20T12:40:58.080
> 
> 标签：javascript, jslint

我收到此错误，

```
 Expected an identifier and instead saw ')'. 
```

在这行代码中。任何如何解决它？

```
 for (; index < nPageFullItemCnt; index++) {
        strIndex = "0" + index;
        keyIndex = "popup_item_" + strIndex.substr(strIndex.length - 2, 2);
        keyItem = document.getElementById(keyIndex);

        setPopupKeyText(keyIndex, " ");

        keyItem.className = "popupLangItemNone";
        keyItem.langId = "";
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T12:43:22.663

您没有将第一个参数传递给`for()`循环：

```
for (index = 0; index < nPageFullItemCnt; index++) 
{
    /* .. */
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T12:44:21.393

这一点：

```
for (; index 
```

导致该错误。如果您这样做，代码应该验证：

```
for (0; index 
```

（因为我假设您没有故意传递第一个参数）

`while`但是，如果您不打算使用循环中的[`[initialization]; [condition]; [final-expression]`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for#Syntax)属性，我建议使用循环而不是 for `for`。

```
while(index < nPageFullItemCnt){
    // Do stuff;
    index++;
} 
```

从技术上讲，这 3 个参数都是可选的，但是如果缺少某些代码验证器，它们可能会抛出错误。

# android - 如何为gridview增加价值

> ID：13972475
> 
> 赞同：0
> 
> 时间：2012-12-20T12:41:23.367
> 
> 标签：android

单击按钮时，我需要将数据添加到 gridview 表中。我的代码：

```
 String[] data = {"a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k"};
    GridView gvMain;
    ArrayAdapter<String> adapter;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.smena); 
          adapter = new ArrayAdapter<String>(this, R.layout.item, R.id.tvText, data);
                gvMain = (GridView) findViewById(R.id.gridView1);
                gvMain.setAdapter(adapter);
           Button but1=(Button) findViewById(R.id.button1);
            but1.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View arg0) {

                     ButtonOn (1);
                }
            });
    }

    public void ButtonOn (int Art){
        adapter.add("1");
        gvMain.setAdapter(adapter);
    } 
```

当我单击按钮时，我的应用程序意外停止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:48:23.077

ArrayAdapter 将数组转换为无法修改的 AbstractList（列表）。在初始化 ArrayAdapter 时使用 ArrayList 而不是使用数组。

```
String[] data = { "a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k" };

    ArrayList<String> lst = new ArrayList<String>();
    GridView gvMain;

    ArrayAdapter<String> adapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.smena);

        lst.addAll(Arrays.asList(data));        
        adapter = new ArrayAdapter<String>(this, R.layout.title_bar, R.id.editText1,lst);

        gvMain = (GridView) findViewById(R.id.gridView1);
        gvMain.setAdapter(adapter);

        Button but1 = (Button) findViewById(R.id.button1);
        but1.setOnClickListener(new OnClickListener() {

            public void onClick(View arg0) {

                ButtonOn(1);
            }
        });
    }

    public void ButtonOn(int Art) {
        lst.add("1");       
        gvMain.setAdapter(adapter);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T12:49:59.203

```
Try This Code   

 String[] items = {"a","b","c","d","e","f"};

            Button b = (Button)findViewById(R.id.button1);

            b.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    GridView gridView = (GridView)findViewById(R.id.gridView1);

                    gridView.setAdapter(new ArrayAdapter<String>(getApplicationContext(), android.R.layout.simple_list_item_1, items));

(or)

gridView.setAdapter(new ArrayAdapter<String>(getApplicationContext(),R.layout.cust,  R.id.textView1, items));

                }
            }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T13:15:09.397

LogCat 显示什么样的错误...

如果它向您显示“空指针异常”或“无法启动活动”，那么您应该尝试在单个活动中膨胀所有项目，或者将数据正确地指向您的活动并在新活动中显示 GridView。

希望你能理解我的想法。更重要的是，不建议将活动用作活动的内容，因为它们会消耗更多的内存。我知道有很多教程都遵循相同但隐藏了缺点。

# objective-c - CLLocationManager 仅在模拟器上更新而不在设备上更新

> ID：13972478
> 
> 赞同：-2
> 
> 时间：2012-12-20T12:41:50.940
> 
> 标签：objective-c, ios, cllocationmanager, cllocation, mkmapview

在这里，我们必须使用位置管理器更新当前位置，它在模拟器上正确更新，但在设备上不更新仅重复 4 或 5 次。为什么位置不经常更新，请帮我解决这个问题

这里我使用的代码如下所示

```
CLLocationManager *locationManager = [[CLLocationManager alloc] init];
    locationManager.delegate = self;
    locationManager.distanceFilter = kCLDistanceFilterNone;
    locationManager.desiredAccuracy = kCLLocationAccuracyBestForNavigation;
    [locationManager startUpdatingLocation]; 
```

委托方式：

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation: (CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation{

    NSLog(@"newLocation: %@",newLocation);
} 
```

这是委托方法被调用了四五次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:11:52.723

如果您将位置精度用作“ `kCLLocationAccuracyBestForNavigation`”，则您的设备应保持插入状态。

最好将其设置为' `kCLLocationAccuracyBest`'。也移动到相当远的距离以击中代表。最初它会命中 4-5 次以找到您。确定您的位置后，当您的位置发生变化时，它将致电代表。

因此，在委托中以附加模式在存储在文档目录中的文件中写入一些内容。将纬度/经度和时间详细信息记录到其中。现在移动一段距离。

加入手机并从文档目录中获取文件。它必须记录所需的详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T05:27:12.300

在这里，我使用这个委托方法解决了这个问题

```
- (void)locationManager:(CLLocationManager *)manager
     didUpdateLocations:(NSArray *)locations{
} 
```

# ios - UIPageviewcontroller 正在丢失手势

> ID：13972480
> 
> 赞同：-1
> 
> 时间：2012-12-20T12:41:55.237
> 
> 标签：ios

我`UIScrollView`在`UIPageViewController`. 有时`UIPageViewController`没有接触，页面没有转动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:51:14.900

```
 I think this may help you  

      //*-- pagecontrol
            pageControl.frame = CGRectMake(0,390,320,30);
            pageControl.numberOfPages = 2;
            pageControl.currentPage = 0;
            [self.view addSubview:pageControl];
            pageControl.backgroundColor = [UIColor darkGrayColor];

          //*-- Gesture 
            self.pinchGestureRecognizer = [[UIPinchGestureRecognizer alloc] initWithTarget:self action:@selector(pinchGesture:)];
            self.tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleSingleTap:)];
            tapGesture.numberOfTapsRequired = 1;
            [imageview addGestureRecognizer:self.pinchGestureRecognizer];
            [imageview addGestureRecognizer:self.tapGesture];

    //delegate
        - (void)scrollViewDidScroll:(UIScrollView *)scrollView {
            CGFloat pageWidth = self.scrollView.frame.size.width;
            float fractionalPage = self.scrollView.contentOffset.x / pageWidth;
            NSInteger page = lround(fractionalPage);
            self.pageControl.currentPage = page;

        }

 (void)changePage:(id)sender
{

    //*--  Change the scroll view

    CGRect frame = scrollView.frame;
    frame.origin.x = frame.size.width * pageControl.currentPage;
    frame.origin.y = 0;
    [scrollView scrollRectToVisible:frame animated:YES];
} 
```

写下手势动作

# php - 页面出现div前需要getElementById

> ID：13972489
> 
> 赞同：0
> 
> 时间：2012-12-20T12:42:28.733
> 
> 标签：php, javascript, css, html, getelementbyid

我需要使用一段 javascript 来查找当前的 css 样式，但在打开 div 之前。

我的代码如下：如果我将它添加到实际 div (slidingDiv) 的开头下方，这将有效

但是，我需要它在 div 之前工作，因为它将用于控制显示哪个按钮。根据 div 是显示还是隐藏，将显示不同的按钮。

非常感谢

皮特

```
<script>
if(document.getElementById('slidingDiv').style.display == 'none') alert('none');
else alert('show');
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T12:46:03.910

`<div>`如果您的意思是您需要在源代码顺序中出现之前编写 JavaScript 代码块，则通过将其附加到以下位置来延迟 JavaScript `window.onload`：

```
<script>
    window.onload = function() {
        if (document.getElementById('slidingDiv').style.display == 'none') {
            alert('none');
        }
        else {
            alert('show');
        }
    };
</script>
<div id="slidingDiv"></div> 
```

如果您使用的是 jQuery，那么它会更容易：

```
<script>
    $(document).ready(function() {
        if ($('#slidingDiv').not(':visible')) {
            alert('none');
        }
        else {
            alert('show');            
        }
    });
</script>
<div id="slidingDiv"></div> 
```

尽管最佳做法是将所有 JavaScript 文件放在页面底部，以便页面首先加载内容，然后再进行任何渐进增强，否则您在加载时必须等待页面完成加载任何花哨的 JavaScript 效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T12:52:52.180

只需使用“display：none;”隐藏css中的两个按钮 把你的代码放在你的slidingDiv和按钮下面。

你真正应该做的是寻找准备好的dom（然后你可以把你的javascript代码放在任何地方——当然它应该仍然在页面的底部）。

如果您不想自己编写 domready 并且不想在页面中包含 jquery，那么有非常聪明的 domready 实现，例如[这个](https://github.com/ded/domready)

你会这样使用它：

```
domready(function () {
  if (document.getElementById('slidingDiv').style.display == 'none') {
    alert('none');
  }
  else {
    alert('show');
  }
}); 
```

编辑：要将内容附加到您的html，您可以设置[innerHTML](https://developer.mozilla.org/en-US/docs/DOM/element.innerHTML)

```
domready(function () {
  var appendDiv = document.getElementById('someDivToAppend');
  if (document.getElementById('slidingDiv').style.display == 'none') {
    appendDiv.innerHTML('<p>hidden</p>');
  }
  else {
    appendDiv.innerHTML('<p>shown</p>');
  }
}); 
```

或者你可以使用[document.createElement](https://developer.mozilla.org/en-US/docs/DOM/document.createElement)，[appendChild](https://developer.mozilla.org/en-US/docs/DOM/Node.appendChild) -way

```
domready(function () {
  var appendDiv = document.getElementById('someDivToAppend')
    , newElement = document.createElement('div')

  if (document.getElementById('slidingDiv').style.display == 'none') {
    newElement.text = 'hidden';
  }
  else {
    newElement.text = 'shown';
  }
  appendDiv.appendChild(newElement);
}); 
```

使用[MDN-DOCS](https://developer.mozilla.org/en-US/docs/JavaScript)！

# javascript - 未设置大写字符的 Ember 模型属性

> ID：13972491
> 
> 赞同：0
> 
> 时间：2012-12-20T12:42:45.693
> 
> 标签：javascript, ember.js, ember-data

我刚开始玩 ember 和 ember-data，我的后脑勺因抓挠而发红。我将最新的 ember 和 ember-data 与 RESTAdapter 一起使用，并从休息服务获取 json 数据。

我的问题是模型上的某些属性根本没有设置。在控制台中运行类似**App.store.find(App.Version,2).get('siteId')**的东西只会返回 null。

我发现这仅适用于包含大写字符的属性。当将 rest 服务更改为仅提供小写字符时（当然，并修复了相应的 ember 模型），所有属性都已正确设置。这是故意的，还是我搞砸了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T18:45:11.393

Ember Data 的 RESTAdapter 期望从服务器以某种方式完成命名。这可以通过以下方式更改：

`App.Adapter.map('App.Version', { site_id: { key: 'SITEID' } });`

在以下链接中有一些关于此的详细信息：

[https://github.com/emberjs/data/blob/master/BREAKING_CHANGES.md](https://github.com/emberjs/data/blob/master/BREAKING_CHANGES.md)

具体看修订版 3 和 5。

# android - Android Webview在html表格中垂直居中切片图像

> ID：13972494
> 
> 赞同：2
> 
> 时间：2012-12-20T12:42:50.107
> 
> 标签：android, html, css

我的 android 项目正在 webview 中加载一个 html 文件，其中包含一个带有切片图像的表格。加载 webview 时，图像对齐到手机屏幕的左上角。图像可以缩放到手机屏幕的宽度。如何在屏幕内垂直居中图像？

代码：

```
 WebView browser = (WebView) actividad.findViewById(R.id.webView_map);
 browser.getSettings().setLoadWithOverviewMode(true);
 browser.getSettings().setUseWideViewPort(true);
 browser.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);

 browser.getSettings().setBuiltInZoomControls(true);
 browser.getSettings().setDefaultZoom(WebSettings.ZoomDensity.FAR);

 browser.setPadding(0, 0, 0, 0);
 browser.setInitialScale(getScale());   
 browser.loadUrl(imageHtml);

 private final static int MAP_WIDTH = 2500;
 private int getScale(){
    Display display = ((WindowManager)  actividad.getSystemService(Context.WINDOW_SERVICE)).
        getDefaultDisplay();          
    DisplayMetrics dm = new DisplayMetrics();
    display.getMetrics(dm);

    Double val = Double.valueOf(dm.widthPixels)/Double.valueOf(MAP_WIDTH);
    val = val * 100d;
    return val.intValue();
  } 
```

HTML：

```
 <html>
 <head>
 <link rel="stylesheet" type="text/css" href="mapa.css" />
 </head>
 <body>
 <div class="wrapper">
 <table cellpadding="0" border="0" cellspacing="0">
<tr>
<td><img alt=" " src="mapa_general/mapa_general_0_0.png"  style=" border-width: 0px;"></td>
<td><img alt=" " src="mapa_general/mapa_general_0_1.png" style=" border-width: 0px;"></td>
</tr>
<tr>
<td><img alt=" " src="mapa_general/mapa_general_1_0.png" style=" border-width: 0px;"></td>
<td><img alt=" " src="mapa_general/mapa_general_1_1.png" style=" border-width: 0px;"></td>
</tr>
</table>
</div>
</body>
</html> 
```

CSS：

```
body, html { 
 height: 100%; 
 width: 100%; 
}

body { 
  display: table; 
}

#wrapper { 
  display: table-cell; 
  vertical-align: middle;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:18:07.310

尝试这个

```
body {
    height: 100%;
    width: 100%;
    display: -webkit-box;
    display: box;
    -webkit-box-orient: vertical;
    box-orient: vertical;
    -webkit-box-align: stretch;
    box-align: stretch;
    -webkit-box-direction: normal;
    box-direction: normal;
    -webkit-box-pack: center;
    box-pack: center;
}

#wrapper {
    -webkit-box-flex: 0;
    box-flex: 0;
    -webkit-box-ordinal-group: 1;
    box-ordinal-group: 1;
    text-align: center;
} 
```

# delphi - 当一个类已经扩展了一个类和一个接口时如何继承另一个类

> ID：13972498
> 
> 赞同：2
> 
> 时间：2012-12-20T12:43:02.617
> 
> 标签：delphi, oop, class, inheritance, interface

我使用 Delphi 2006，我有一个名为的复杂类`TMyClassTest`，它有许多方法其中一些方法创建非可视组件并分配这些组件的事件处理程序并运行这些组件的方法。

我也有两个实现相同接口的类，如下所示：

```
TMyClass1 = class(Class1, Interface1)
   ... //procedures from the Interface1
   procedure MyClass1Proc1;
 end;

TMyClass2 = class(Class2, Interface1)
   ... //procedures from the Interface1
   procedure MyClass2Proc1;
   procedure MyClass2Proc2
 end; 
```

现在我也需要 TMyClass1 和 TMyClass2 来“继承” TMyClassTest。更多... Interface1 必须包含（除了它的方法之外）来自 MyClassTest 的所有方法。如何避免在两个类（TMyClass1 和 TMyClass2）上实现（如复制/粘贴） TMyClassTest 中的所有程序？我不想在三个不同的地方保留相同的代码。

根据 Arioch 的评论，我创建了一个解决方案，例如：（参见[http://docwiki.embarcadero.com/RADStudio/XE3/en/Implementing_Interfaces#Implementing_Interfaces_by_Delegation_.28Win32_only.29](http://docwiki.embarcadero.com/RADStudio/XE3/en/Implementing_Interfaces#Implementing_Interfaces_by_Delegation_.28Win32_only.29)）

```
 type
      IMyInterface = interface
        procedure P1;
        procedure P2;
      end;
      TMyImplClass = class
        procedure P1;
        procedure P2;
      end;
      TMyClass1 = class(Class1, IMyInterface)
        FMyImplClass: TMyImplClass;
        property MyImplClass: TMyImplClass read FMyImplClass implements IMyInterface;
        procedure IMyInterface.P1 = MyP1;
        procedure MyP1;
      end;
      TMyClass2 = class(TInterfacedObject, IMyInterface)
        FMyImplClass: TMyImplClass;
        property MyImplClass: TMyImplClass read FMyImplClass implements IMyInterface;
        procedure P3;
        procedure P4;
      end;
    procedure TMyImplClass.P1;
         // ...
    procedure TMyImplClass.P2;
         // ...
    procedure TMyClass1.MyP1;
         // ...
    procedure TMyClass2.P3;
         // ...
    procedure TMyClass2.P4;
         // ...
    var
      MyClass: TMyClass1;
      MyInterface: IMyInterface;
    begin
      MyClass := TMyClass1.Create;
      MyClass.FMyImplClass := TMyImplClass.Create; //Error !!!! FMyImplClass is a read only    property !!!
      MyInterface := MyClass;
      MyInterface.P1;   // calls TMyClass1.MyP1;
      MyInterface.P2;   // calls TImplClass.P2;
    end; 
```

`MyClass.FMyImplClass := TMyImplClass.Create;`因为我在尝试创建`FMyImplClass`声明构造函数时遇到错误，`TMyClass1`但`TMyClass2`不能正常工作。还有其他方法可以创建`FMyImplClass`吗？

现在我尝试了一个似乎可以正常工作的解决方案。会不会有一些隐藏的影响？

```
 type
      IMyInterface = interface
        procedure P1;
        procedure P2;
        procedure CreateFMyImplClass;
      end;
      TMyImplClass = class
        procedure P1;
        procedure P2;
      end;
      TMyClass1 = class(Class1, IMyInterface)
        FMyImplClass: TMyImplClass;
        property MyImplClass: TMyImplClass read FMyImplClass implements IMyInterface;
        procedure IMyInterface.P1 = MyP1;
        procedure MyP1;
        procedure CreateFMyImplClass;
      end;
      TMyClass2 = class(TInterfacedObject, IMyInterface)
        FMyImplClass: TMyImplClass;
        property MyImplClass: TMyImplClass read FMyImplClass implements IMyInterface;
        procedure P3;
        procedure P4;
        procedure CreateFMyImplClass;
      end;
    procedure TMyImplClass.P1;
         // ...
    procedure TMyImplClass.P2;
         // ...
    procedure TMyClass1.MyP1;
         // ...
    procedure TMyClass1.CreateFMyImplClass;
    begin
     FMyImplClass := TMyImplClass.Create;
    end;
    procedure TMyClass2.P3;
         // ...
    procedure TMyClass2.P4;
         // ...
    procedure TMyClass2.CreateFMyImplClass;
    begin
     FMyImplClass := TMyImplClass.Create;
    end;
    var
      MyInterface: IMyInterface;
    begin
      if WantRemote then
         MyInterface := TMyClass1.Create
      else
         MyInterface := TMyClass2.Create;
      MyInterface.CreateFMyImplClass;   // create FMyImplClass ;
      MyInterface.P2;   // calls TImplClass.P2;
    end; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T09:59:28.433

Delphi 没有类似 Scala 的特征或类似 Python 的 mixin，也不支持像 C++ 那样的多重继承。

如果你不能 make`Class1`和`Class2`继承 from `TMyClassTest`，那么也许你必须依赖*接口委托*：`TMyClassX`不再`Interface1`直接实现，而是添加一个字段并将它们`TMyClassTest`委托`Interface1`给这个字段。

我觉得你最好

1.  将这些新的常用功能移动到某种`Interface0`类型
2.  使`Interface1`继承自`Interface0`
3.  做一些`TMyClassesBaseCommonTrait`课程，实施`Interface0`
4.  创建两个子类`TMyClass1InternalEngine(TMyClassesBaseCommonTrait)`并`TMyClass2InternalEngine(TMyClassesBaseCommonTrait)`实现（以不同的，特定的方式， API`TMyClassX`的其余部分`Interface1(Interface0)`
5.  具有类型为 doign 实实现`TMyClassX`的类内部私有字段`TMyClass2InternalEngine`

谷歌的“delphi interface delegate”将此显示为顶部链接：[Delphi：如何将接口实现委托给子对象？](https://stackoverflow.com/questions/3483680)

# php - 获取 iframe 中的当前 url

> ID：13972502
> 
> 赞同：1
> 
> 时间：2012-12-20T12:43:12.180
> 
> 标签：php, iframe

是否可以使用按钮和 iframe 窗口创建页面，当用户单击按钮时，它会将他带到 iframe 窗口的当前 url？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T12:47:40.460

`document.location = document.getElementById("iframe_id").contentWindow.location`假设您从同一个域提供 Javascript，否则您将遇到[XSS 漏洞](https://stackoverflow.com/questions/938180/get-current-url-from-iframe)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T12:59:09.157

正如“DaveRandom”提到的那样，这是正确的

top.location.href = window.location.href

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T12:51:07.737

```
<html>
    <head>
        <script type="text/javascript">
            function FrameUrl()
            {
                alert('url = ' + document.frames['frame1'].location.href);
            }
        </script>
    </head>
    <body>
        <a href="#" onclick="FrameUrl();">Find the iFrame URL</a>
        <iframe name="frame1" src="http://www.facebook.com" width="100%" height="400"></iframe>
    </body>
</html> 
```

# magento - 自定义菜单在服务器上的 magento 中给出 404

> ID：13972505
> 
> 赞同：0
> 
> 时间：2012-12-20T12:43:32.313
> 
> 标签：magento, magento-1.7

我在 magento admin 的 admin 选项卡中创建了一个自定义菜单。它在本地主机上运行良好，但是当我在服务器上部署我的代码时，它给出了 404 page not found 错误。那里可能有什么问题！

```
<?xml version="1.0"?>

<config>
    <modules>
        <Inchoo_CoffeeFreak>
            <version>0.1.0</version>
        </Inchoo_CoffeeFreak>
    </modules> 

    <global>
        <blocks>
            <coffefreakblock1>
                <class>Inchoo_CoffeeFreak_Block</class>
            </coffefreakblock1>  
            <coffefreakblock2>
                <class>Inchoo_CoffeeFreak_Block_EditSpecial</class>
            </coffefreakblock2> 
        </blocks>
        <helpers>
            <coffefreakhelper1>
                <class>Inchoo_CoffeeFreak_Helper</class>
            </coffefreakhelper1>
        </helpers>  
    </global>    

    <admin>
        <routers>
           <samplerouter1>
                <use>admin</use>
                <args>
                    <module>Inchoo_CoffeeFreak_AdminControllersHere</module>
                    <frontName>print</frontName>
                    <modules>
                        <sintax after="Inchoo_CoffeeFreak_AdminControllersHere">Mage_Adminhtml</sintax>
                    </modules>
                </args>
           </samplerouter1>           
         </routers>     
    </admin>

    <adminhtml>

        <menu>
             <mymenu1 translate="title" module="coffefreakhelper1">
                <title>PrintInfo</title>
                <sort_order>20</sort_order>
                <children>
                <!-- Note the misleading "module" attribute. 
                    It actualy refers to one of the declared helpers -->

                    <myitem1 translate="title" module="coffefreakhelper1">
                        <title>Add/Change Config</title>
                        <action>samplerouter1/settings</action>
                        <sort_order>1</sort_order>                        
                    </myitem1>    
                </children>
             </mymenu1>
        </menu>
    </adminhtml>    

</config> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T20:19:24.507

您的服务器可能在区分大小写的 Linux 上运行，因此您需要检查您的模块文件和文件夹是否应符合 Magento 标准，如控制器不应`IndexController`等`indexController`。

并且您的本地主机在不区分大小写的窗口上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T12:46:39.833

通常这是您登录时。注销并再次登录。然后它应该工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T13:18:21.790

假设缓存已关闭/清除

1）注销并重新登录

如果您仍然收到 404 错误

2）检查你的服务器错误日志，你可能错过了你的模块帮助文件

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T07:38:49.440

登录/退出，清除缓存，应该是解决方案。

但是您可以尝试以下几点（尽管它可能会很愚蠢）。

**1)**检查您的 xml 内容。（与您的 localhost xml 逐行）
**2)**拼写很重要（希望`<sintax>`您的 xml 拼写正确）
**3)**删除不需要的空格（如`<global>`标签前）和注释。
**4）**标签的打开和关闭。
**5)**适当的缩进（如果存在缺陷，这将有助于找到您的缺陷）
**6)** Atlast 直接在您的服务器中复制相同的 localhost xml 文件。

我真的希望这将帮助您找到错误。

# c# - 在两个应用程序之间传递数据

> ID：13972511
> 
> 赞同：-4
> 
> 时间：2012-12-20T12:43:58.327
> 
> 标签：c#, .net, winforms

我正在处理 Windows 窗体。我有两个应用程序，一个是父母，另一个是孩子。在我的主应用程序中，我有一个包含一堆记录的网格。用户需要选择一条记录并单击按钮，我需要将该选定记录的数据作为参数发送到子应用程序，例如，

```
Process.Start("path to child exe","selected record's data"); 
```

之后我会将发送的数据发送到子应用程序，

```
Environment.GetEnvironmentVariables()[0]; 
```

现在，当处理完从父级发送的数据时，子应用程序需要自动关闭。之后，在父应用程序中，gridview 的选定行需要向前移动一行并将选定的行信息发送到子应用程序，并且该过程需要迭代，直到它遍历主应用程序中我的 gridview 中的所有记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T13:04:57.890

好吧，首先你会注意到；

```
Process.Start() 
```

返回对`System.Diagnostics.Process`具有`Exited`事件的对象的引用。然后，您可以挂钩一个处理程序，该处理程序将继续执行另一行并再次重新启动该过程：

```
var process = Process.Start("path to child exe","selected record's data");
process.Exited += (sender, args) => 
{
   // do your stuff
} 
```

然后，我建议检查其他选项来执行此操作：

*   这是一个 .net 托管应用程序吗？您可以只在项目中引用 .exe 程序集并通过提供的接口调用必要的方法吗？
*   如果这是一个非托管的 Windows 应用程序，您仍然可以调用它的方法。为此使用**DllImport**：

    `[DllImport(LibraryName, EntryPoint = FunctionName)]`

    `private static extern int Function(string param);`

然后你就可以从你的代码中调用**Function了。**谷歌了解详情。

另外，看看：[如何在 C# 中调用托管 DLL 文件？](https://stackoverflow.com/questions/6830610/how-to-call-a-managed-dll-file-in-c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T13:20:34.487

假设您不需要将数据从子应用程序传回主应用程序：

在您的主应用程序中创建一个递归方法以使用参数启动子应用程序。在我的示例`listBox1`中包含一个数据项列表：

```
private void button1_Click(object sender, EventArgs e)
{
    listBox1.SelectedIndex = 0;
    startChild((string)listBox1.SelectedItem);
}

void startChild(string data)
{
    ProcessStartInfo psi = new ProcessStartInfo("child.exe", data);
    Process p = Process.Start(psi);
    p.WaitForExit();
    if (p.HasExited)
    {
        if ((listBox1.SelectedIndex + 1) < listBox1.Items.Count)
        {
            listBox1.SelectedIndex++;
            startChild((string)listBox1.SelectedItem);
        }
    }
} 
```

然后在您的 Child 应用程序中获取参数并处理它们：

```
public Child()
{
    InitializeComponent();
    var data = Environment.GetCommandLineArgs()[1];
    ProcessDataAndExit(data);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-20T13:01:23.443

通过命令行参数传递数据可能会变得混乱。使用套接字会更健壮。

这可能会有所帮助：[.NET 中的套接字编程简介](http://www.codeproject.com/Articles/10649/An-Introduction-to-Socket-Programming-in-NET-using)

# java - 使用字段中的空值轮询时删除

> ID：13972516
> 
> 赞同：0
> 
> 时间：2012-12-20T12:44:17.860
> 
> 标签：java, spring, jakarta-ee, spring-mvc, spring-integration

代码 ：

```
<int-jdbc:inbound-channel-adapter
        query="SELECT USER_ID,BOOK_ID FROM BOOK WHERE ROWNUM &lt;= 11"
        channel="index-back-data" data-source="dataSource"
        max-rows-per-poll="10"
        update=" ? "
        row-mapper="DataRowMapper">
    <int:poller fixed-delay="10000" />
</int-jdbc:inbound-channel-adapter> 
```

问题 ：

在轮询 BOOK 表时，我可能会将 bookid 设为 null 那么如何使用 update 属性将其删除？

我们可以在更新中使用条件删除作为 `:bookId != null ? 'DELETE FROM BOOK WHERE USER_ID = :userId AND BOOK_ID = :bookId : DELETE FROM BOOK WHERE USER_ID = :userId AND BOOK_ID IS NULL`

任何帮助将不胜感激 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:19:57.127

我认为如果您允许在 book 表中存在主键为空的行，您可能会遇到数据完整性问题。这有点社论，那么：

```
update="DELETE FROM BOOK WHERE (USER_ID = :userId AND BOOK_ID = :bookId) OR (USER_ID = :userId AND BOOK_ID is null)" 
```

# c# - 上下文菜单取决于列表框项目类型

> ID：13972517
> 
> 赞同：2
> 
> 时间：2012-12-20T12:44:18.123
> 
> 标签：c#, wpf, listbox, contextmenu, converter

通过选择项目`ContextMenu`是个好主意还是有更好的方法？`ListBox``Converter`

*为了清楚起见，我将描述我的情况：*

我有一个列表框控件。作为这个 Lisbox 的**ItemsSource**是`ObservableCollection<MyClass>`

我将 Listbox 的 ItemContainerStyle 的 ContextMenu 设置为如下所示：

```
<Setter Property="ContextMenu" Value="{Binding Converter={StaticResource contextMenuConverter}}"/ > 
```

在*ContextMenuConverter*我检查 MyClass 类的一些属性并`ContextMenu`相应地选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-19T15:55:32.863

呃，不，那其实还不错。

另一种选择是将 绑定`SelectedItem`到您的`ViewModel`，将属性绑定到相同的，并在更改时`ContextMenu`返回一个新的，基于.`ContextMenu``SelectedItem``SelectedItem`

但是，坦率地说，我更喜欢你的解决方案。它的清洁剂。

# python - 如何使用 for 循环将新条目添加到 python 字典？

> ID：13972525
> 
> 赞同：0
> 
> 时间：2012-12-20T12:44:58.373
> 
> 标签：python, loops, dictionary, for-loop

我正在尝试创建一个 for 循环，它将新条目添加到我的字典中，其格式应为 {1:0.5, 2:0.5, 3:0.5 ....}

我需要让它这样做200次。但由于某种原因，我的代码打印出一个空字典：

```
initial_dict = {}

for i in initial_dict.copy():
    if len(i) < 200:
        initial_dict.update({i: 0.5})

print initial_dict 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T12:46:58.347

```
>>> d = {}
>>> for i in range(1, 201):
...     d[i] = 0.5
... 
>>> d 
```

或使用[dict comprehensions](http://www.python.org/dev/peps/pep-0274/)的较短形式：

```
>>> { i: 0.5 for i in range(1, 201) } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T12:47:05.163

使用 dict 理解：

```
initial_dict = {i:0.5 for i in range(1, 201)} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T12:47:45.213

使用`dict.fromkeys()`：

帮助`dict.fromkeys()`：

> dict.fromkeys(S[,v]) -> 新的字典，键来自 S，值等于 v。v 默认为 None。

```
dic=dict.fromkeys(range(1,201),0.5) 
```

例子：

```
In [11]: dic=dict.fromkeys(range(1,10),0.5)

In [12]: dic
Out[12]: {1: 0.5, 2: 0.5, 3: 0.5, 4: 0.5, 5: 0.5, 6: 0.5, 7: 0.5, 8: 0.5, 9: 0.5} 
```

`dict.fromkeys()`也比`dict comprehension`:

```
In [17]: %timeit { i: 0.5 for i in range(1, 201) }
10000 loops, best of 3: 35.8 us per loop

In [18]: %timeit dict.fromkeys(range(1,201),0.5)
10000 loops, best of 3: 21.6 us per loop 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T12:47:50.173

```
In [1]: dict.fromkeys(range(10), 0.5)
Out[1]: 
{0: 0.5,
 1: 0.5,
 2: 0.5,
 3: 0.5,
 4: 0.5,
 5: 0.5,
 6: 0.5,
 7: 0.5,
 8: 0.5,
 9: 0.5} 
```

目前尚不清楚您是在构建这样的新字典，还是需要使用这些键/值更新现有字典。如果是后者，只需写：

```
initial_dict.update(dict.fromkeys(range(200), 0.5)) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-20T12:48:05.677

`initial_dict`是空的，所以我不明白您希望如何迭代它的副本。那个循环甚至永远不会进入。

如果你只想创建一个包含 1 到 200 键的字典，你可以这样做：

```
dict.fromkeys(xrange(1,201), 0.5) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-20T12:48:18.980

你可以这样写：

```
initial_dict = {}
for i in range(1, 200): 
  initial_dict .setdefault(i, 0.5) 
```

部分缺少输出：

```
>>> initial_dict
{1: 0.5, 2: 0.5, 3: 0.5, 4: 0.5, 5: 0.5, 6: 0.5, 7: 0.5, 8: 0.5, 9: 0.5, 
```

第二种方式（更好）：

```
>>> for i in range(1, 200):
...     initial_dict[i] = 0.5 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-20T12:48:07.407

对于 python 2.7 或 3.x 而不是循环，您可以将其放在一行中：

```
dct = {x: 0.5 for x in range(1, 201)} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-20T13:19:55.553

最简单的方法：

```
my_dict = {}
for i in range(1, 201): # second argument is exclusive
   my_dict[i] = 0.5 
```

# actionscript-3 - 为什么 Context 会变成 GCRoot？

> ID：13972535
> 
> 赞同：3
> 
> 时间：2012-12-20T12:45:45.180
> 
> 标签：actionscript-3, garbage-collection, robotlegs

我非常感谢 Robotlegs，但最近我遇到了一个 GC 问题。我只是将引用设置为 null 来处理上下文对象失败。在 FB 配置文件工具的帮助下，我发现上下文对象似乎是一个“GC Root”。为了弄清楚这一点，我编写了一个简单的类，它创建了一个上下文 obj 并使其无法访问。这是该类的详细信息：

```
public class MemoryLeak extends Sprite{
    public function MemoryLeak()
    {
        makeAndDrop();
    }

    public function makeAndDrop():void{
        var _context = new Context(this);
        _context = null;
    }
} 
```

当我运行这个类时，我希望它被 GC 处理，但它不起作用（大多数时候，不是每次）。配置文件工具告诉我这个实例是一个 GCRoot。我读过一些关于 GC 的文章，但很少有人提到 GCRoot 本身。谁能告诉我为什么，非常感谢！

PS：我尝试在 makeAndDrop() 之后调用 System.gc() 两次，但没有成功。事实上，我对“是 GCRoot”问题（由 fb 配置文件暗示）更感兴趣，如果你告诉我它可能会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T03:12:31.243

我认为 Context 可能会[监听](http://www.developria.com/2010/08/rethinking-addeventlistener-an.html)，`this`以便它可以对任何添加的孩子执行依赖注入或为他们创建调解器。有人希望在您与 mediatorMap 或 viewMap 交谈之前不会附加侦听器，但我认为 RL 作者很可能不会考虑在一段时间内您需要视图上的上下文的用例比 View 的实际寿命短。

# log4j - log4j kafka appender 不使用定义的 ConversionPattern

> ID：13972537
> 
> 赞同：0
> 
> 时间：2012-12-20T12:45:48.097
> 
> 标签：log4j, apache-kafka, apache-storm

我正在运行一个使用 log4j 进行日志记录的 Storm 集群。除了标准的基于文件的日志记录之外，我还想添加一个 kafka appender。

我的 log4j 配置文件如下所示：

```
log4j.rootLogger=INFO, A1

log4j.appender.A1 = org.apache.log4j.DailyRollingFileAppender
log4j.appender.A1.File = /var/log/storm/logs/${logfile.name}
log4j.appender.A1.Append = true
log4j.appender.A1.DatePattern = '.'yyy-MM-dd
log4j.appender.A1.layout = org.apache.log4j.PatternLayout
log4j.appender.A1.layout.ConversionPattern = %d{yyyy-MM-dd HH:mm:ss} %c{1} [%p] %m%n

log4j.appender.KAFKA=kafka.producer.KafkaLog4jAppender
log4j.appender.KAFKA.Host=<kafka.ip>
log4j.appender.KAFKA.Port=9092
log4j.appender.KAFKA.Topic=storm_log
log4j.appender.KAFKA.SerializerClass=kafka.producer.DefaultStringEncoder
log4j.appender.KAFKA.layout=org.apache.log4j.PatternLayout
log4j.appender.KAFKA.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss} %c{1} [%p] %m%n

log4j.logger.my.package.name=INFO, KAFKA 
```

一切正常，除了 kafka appender 不使用定义的 ConversionPattern，即使该定义与文件 appender 中的定义完全相同，它按预期工作。我必须如何更改配置才能使 kafka appender 工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T22:58:47.910

我对 Kafka 0.7 版也有同样的问题。

在 0.7.1 版中对 KafkaLog4jAppender 进行了一些更改，升级后，ConversionPattern 对我来说可以正常工作，其配置类似于上述配置。

# c# - 使用多个更新面板和专用于特定更新面板的计时器

> ID：13972540
> 
> 赞同：1
> 
> 时间：2012-12-20T12:46:10.087
> 
> 标签：c#, timer, c#-3.0, updatepanel

我在母版页上有如下代码：

```
<asp:Timer ID="Timer1" runat="server" Interval="10000" ontick="Timer1_Tick"></asp:Timer> 
    <asp:UpdatePanel ID="updateNotifications" runat="server" UpdateMode="Conditional">
     <Triggers>
        <asp:AsyncPostBackTrigger ControlID="Timer1" EventName="Tick" />
     </Triggers>
     <ContentTemplate>                                                        
        //Content                         
    </ContentTemplate>                        
   </asp:UpdatePanel> 
```

这工作正常并以定义的间隔刷新内容，但它也会更新内容页面上的所有更新面板。我只需要刷新此更新面板中的内容。我也试过了`UpdateMode="Conditional"`，`UpdateMode="Always"`但没有帮助。

# python - 没有使用 Python/C API 的名为 ctypes 的模块

> ID：13972547
> 
> 赞同：2
> 
> 时间：2012-12-20T12:46:29.280
> 
> 标签：python, c, ctypes, python-c-api

我有*PythonCode.py*：

```
import os, ctypes
print "ctypes are imported" 
```

和*CCode.c*：

```
...
PySys_SetPath(path_to_PythonCode);
PyObject *pModule = PyImport_ImportModule("PythonCode");
if (!pModule) {
  PyErr_Print();
  return;
}
... 
```

`PyErr_Print()`印刷：

```
Traceback (most recent call last):   File ".../PythonCode.py", line 1,
  in <module> import os, ctypes
ImportError: No module named ctypes 
```

在终端中执行 Python 代码显示 ctypes 确实存在：

```
$ python --version
Python 2.7.1
$ python PythonCode.py
ctypes are imported 
```

为什么 Python/C API 不能导入 ctypes？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T14:55:11.183

您将默认`sys.path`列表替换为单个路径。相反，您可以插入新路径：

```
PyObject *sys_path, *path;

sys_path = PySys_GetObject("path");
if (sys_path == NULL || !PyList_Check(sys_path)) {   
    /* ZOMG! That's so wrong... */
    return;
}
path = PyString_FromString(path_to_PythonCode);
PyList_Insert(sys_path, 0, path);
Py_DECREF(path); 
```

# processing - 使用 processing.js 向网页添加处理代码

> ID：13972552
> 
> 赞同：-1
> 
> 时间：2012-12-20T12:46:37.940
> 
> 标签：processing, processing.js

我创建了一个处理代码（.pde 文件）来制作一个时间序列（咖啡生产 v/s 时间），它从 excel 文件（.tsv 表）中获取其数据。谁能告诉我如何将其包含到我的网页中？我尝试过使用 processing.js，但它在浏览器中没有显示任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T18:42:05.660

如果没有其他信息，您可能会将 .tsv 文件放在“数据”目录中，但没有从“./data/myfile.tsv”显式加载它，而是依靠处理来自动解析。如果您打算在线使用您的草图，请始终在文件位置中包含“data/”，因为浏览器解析的位置相对于“页面现在所在的位置”。

# javascript - Jquery 如何从我的 json 数组中获取数据

> ID：13972555
> 
> 赞同：0
> 
> 时间：2012-12-20T12:46:42.513
> 
> 标签：javascript, jquery, json

> **可能重复：**
> [我有一个嵌套的数据结构/JSON，我怎样才能访问一个特定的值？](https://stackoverflow.com/questions/11922383/i-have-a-nested-data-structure-json-how-can-i-access-a-specific-value)

请在我的 ajax 端获取以下 json 字符串：

```
 {
    "products": [
        {
            "id":            48,
            "quantity":      1,
            "priceByLine":   "950,00 €",
            "name":          "Filtre Mixte",
            "price":         "950,00 €"

        }],   

    "total": "950,00 €",
    "productTotal": "950,00 €"
   } 
```

要获得**总价**，我只需要做：

```
alert(data.total); 
```

但是当我想获得 ID 时，我会：

```
alert(data.products.id); 
```

它给了我**undefined**！

请问各位高手，我该怎么办才能拿到身份证？

提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:47:57.333

Products 是一个包含一个对象类型元素的数组。因此，您应该输入：

`alert(data.products[0].id);`

如果结构是：您的陈述将是有效的：

```
{
"products": 
    {
        "id":            48,
        "quantity":      1,
        "priceByLine":   "950,00 €",
        "name":          "Filtre Mixte",
        "price":         "950,00 €"

    },   

"total": "950,00 €",
"productTotal": "950,00 €"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T12:49:49.910

嗯，`data.products`是一个数组，所以你不能得到`id`那个数组，你需要尝试查找其中每个元素的属性。

例如，这会给你一个结果：

```
 alert(data.products[0].id); 
```

但是，您可以尝试遍历该数据：

```
 data.products.forEach(function(product) {
      alert(product.id);
 }); 
```

请注意，上述`forEach`内容不适用于糟糕的旧浏览器（包括 IE8），但它适用于任何现代浏览器。如果您需要支持较旧的循环，请使用[for 循环。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T12:49:55.187

我不确定，但如果你试试这个：

```
alert(data.products[0].id); 
```

因为 products 键似乎是一个数组，但只有一行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T12:49:24.693

试试这个..因为你的产品在数组中

```
alert(data.products[0].id); 
```

# postgresql - 在 Postgres 中添加 NOT VALID 外键

> ID：13972559
> 
> 赞同：1
> 
> 时间：2012-12-20T12:46:59.277
> 
> 标签：postgresql, foreign-keys, ddl

示例架构：[http ://sqlfiddle.com/#!1/3d410](http://sqlfiddle.com/#!1/3d410)

我已经有一个表，我想在表中添加一个新的、无效的外键。添加 NOT VALID 外键的正确语法是什么？

```
CREATE TABLE junks (
  id serial PRIMARY KEY,
  name text
);

CREATE TABLE trunks (
  id serial PRIMARY KEY,
  name text
  -- no fk
);

-- and the below does not work!

--ALTER TABLE trunks ADD junk serial REFERENCES junks(id) NOT VALID; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T13:06:28.487

您首先添加列：

```
alter table trunks add column junk serial; 
```

然后将约束添加到表中：

```
alter table trunks add constraint the_constraint_name
    FOREIGN KEY (junk)
    REFERENCES junks (id)
    not valid; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T13:12:07.743

这有效：

```
ALTER TABLE trunks ADD CONSTRAINT FK_junk_id 
  FOREIGN KEY (id) 
  REFERENCES junks(id) 
  NOT VALID
; 
```

参见，例如：[http ://www.postgresql.org/docs/devel/static/ddl-alter.html#AEN2758](http://www.postgresql.org/docs/devel/static/ddl-alter.html#AEN2758)

# php - 如何从数据库中检索和打印 ip2long IP？

> ID：13972562
> 
> 赞同：0
> 
> 时间：2012-12-20T12:47:02.743
> 
> 标签：php, printing, ip, echo

今天的第三个问题对不起。

我想出了如何将 IP 地址插入 sql (woohoo)，它成功了。

```
if (empty($userid)) {
    $names= array('Goat', 'Goat Toucher', 'Goat Fondler', 'Goat Farmer', 'Goat Keeper', 'Goat Herder', 'Goat Stalker', 'Goat Lover', 'Ettamogah', 'Bungle Bungle', 'Teapot', 'Fuzzyface', 'Walker', 'Stroker', 'Eggtrump', 'Ghoul', 'Who', 'of Doom', 'of Mercy', 'of JFC', 'From Above', 'Strangler', 'Pooper', 'Servant', 'Bunny', 'Layer', 'Slayer', 'Hu Wong', 'Phu King Phat', 'Entombed', 'Orama', 'Wobbly Finger', 'Crooked Toe', 'Up the Duff', 'Lover', 'Geek', 'Freak', 'Jelly Bottom', 'Invader', 'Impaler', 'Arouser', 'Handler', 'Googly Eyes', 'Buddha Belly', 'Big Nose', 'No Nose', 'Ogre', 'Pink', 'Princess', 'Angel', 'Devil', 'Demon', 'Thunder Thighs', 'Sugar Lips', 'Cupcake', 'Sweetiechops', 'Midget', 'Loony', 'Anonymous');
            $random = rand(0,count($names)-1);
            $name= $names[$random];
    $ip=$_SERVER["REMOTE_ADDR"];
    $ip = ip2long($ip);
    $sql = ("insert into cometchat_guests (name,lastactivity,ip) values ('Guest    ".mysql_real_escape_string($name)."','".getTimeStamp()."','".$ip."')");
    $query = mysql_query($sql);
    $userid = mysql_insert_id();
    setcookie($cookiePrefix.'guest', base64_encode($userid), time()+3600*24*365, "/");
}

return $userid; 
```

现在..我需要打印它。

```
SELECT INET_NTOA(ip) FROM 'user' WHERE 1 
```

我在后面放什么？

```
SELECT INET_NTOA(ip) FROM 'user' WHERE 1 = $uid or

SELECT INET_NTOA(ip) FROM 'user' WHERE 1 echo $ip 
```

什么？PHP让我头疼哈哈，但我学习很开心！

这是我需要打印的地方：

```
if($owner == 1 || in_array($userid,$moderatorUserIDs))
        SELECT INET_NTOA(ip) FROM 'cometchat_guests' WHERE 1 {
    $options="<input type=button value='".$chatrooms_language[40]."'     onClick=javascript:".$caller."kickUser($uid,0);$close class='invitebutton'>
    <input type=button value='".$chatrooms_language[41]."'     onClick=javascript:".$caller."banUser($uid,0);$close class='invitebutton'>".$options;
} 
```

好的，所以我想我明白了

__

```
if($owner == 1 || in_array($userid,$moderatorUserIDs)) {

    $options="<input type=button value='".$chatrooms_language[40]."'     onClick=javascript:".$caller."kickUser($uid,0);$close class='invitebutton'>
    <input type=button value='".$chatrooms_language[41]."'     onClick=javascript:".$caller."banUser($uid,0);$close class='invitebutton'>".$options;
$sql = getGuestDetails($uid);
$sql = "SELECT INET_NTOA(ip) FROM 'cometchat_guests' WHERE 'userid' = 1";
$result = mysql_query($sql);
while($rows = mysql_fetch_assoc($result)) 
```

试过了。。不行。。那里什么都没有，只是一片空白。我要尖叫了！我很快就开始讨厌 PHP。为什么不直接打印 OMG

# bash - Bash 脚本“mv”复制？

> ID：13972565
> 
> 赞同：2
> 
> 时间：2012-12-20T12:47:14.187
> 
> 标签：bash, mv

我正在编写我的第一个 Bash 脚本，这让我很困惑：

```
sdir="/Applications/MAMP/htdocs"

echo "... downloading skeleton ..."
  wget -q -P $sdir --no-check-certificate https://github.com/xxx/master.zip
  unzip -q $sdir/master.zip -d $sdir
  rm -f $sdir/master.zip
echo "... downloading finished ..."
  mv $sdir/Unzipped-master-folder $sdir/master
echo "... created new dir mdir/ ..." 
```

我正在下载压缩的主文件，将其解压缩到我的源目录中（这会创建一个文件夹“Unzipped-master-folder”）。当我想用 mv 将其重命名为“master”时，我得到了一个新文件夹“master”，但旧文件夹仍然存在，就好像 mv 被复制并忘记清理一样。

在执行 mv 之前，我已经插入了 5 秒的睡眠延迟，但无济于事。

**编辑：没关系，我犯了愚蠢的错误，在脚本的更下方，我再次将文件夹复制到目录中。mv 按预期工作并删除旧文件夹。**

# java - 如何查找哪个 java bean 属性具有已知的注释

> ID：13972571
> 
> 赞同：0
> 
> 时间：2012-12-20T12:47:41.213
> 
> 标签：java, reflection, annotations

我有一系列不相关的课程。每个类都有一个属性和 @PrimaryKey（带有 getter 和 setter），可以是任何类型。如何使用反射来查找任何类的实例的哪个属性具有 @PrimaryKey 注释 - 这样我就可以将其值作为字符串获取。

代码不知道它传递的是哪种类型的类 - 它只是“对象”类型

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T12:51:37.620

你可以这样做：

```
for (Field field : YourClass.class.getDeclaredFields()) {
    try {
        Annotation annotation = field.getAnnotation(PrimaryKey.class);
        // what you want to do with the field
    } catch (NoSuchFieldException e) {
        // ...
    }
} 
```

如果你正在使用你的类的实例，那么你可以这样做来获取它的`class`对象：

```
Class<?> clazz = instance.getClass(); 
```

所以第一行变成了这样：

```
instance.getClass().getDeclaredFields() 
```

如果您遇到麻烦，您可以随时查看官方[文档](http://docs.oracle.com/javase/tutorial/reflect/index.html)。我相信它非常好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T12:52:03.163

您可以获取一个类的所有字段，然后迭代并找到哪个字段有您的注释：

```
Field[] fields = YourClass.class.getDeclaredFields();
for (Field field : fields) {
    Annotation annot = field.getAnnotation(PrimaryKey.class);  
    if (annot != null) {
        System.out.println("Found! " + field);
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-20T13:00:13.090

首先，您需要找到所有可能在其成员中具有注释的类。这可以使用 Spring Framework 来完成`ClassUtils`：

```
 public static void traverse(String classSearchPattern, TypeFilter typeFilter) {
    ClassLoader classLoader = ClassUtils.getDefaultClassLoader();
    ResourcePatternResolver resourceResolver = new    PathMatchingResourcePatternResolver(classLoader);

    Resource[] resources = null;
    try {
        resources = resourceResolver.getResources(classSearchPattern);
    } catch (IOException e) {
        throw new FindException(
                "An I/O problem occurs when trying to resolve resources matching the pattern: "
                        + classSearchPattern, e);
    }

    MetadataReaderFactory metadataReaderFactory = new SimpleMetadataReaderFactory();

    for (Resource resource : resources) {
        try {
            MetadataReader metadataReader = metadataReaderFactory.getMetadataReader(resource);

            if (typeFilter.match(metadataReader, metadataReaderFactory)) {
                String className = metadataReader.getClassMetadata().getClassName();
                Class<?> annotatedClass = classLoader.loadClass(className);

        // CHECK IF THE CLASS HAS PROPERLY ANNOTATED FIELDS AND 
        // DO SOMETHING WITH THE CLASS FOUND... E.G., PUT IT IN SOME REGISTRY 

            }
        } catch (Exception e) {
            throw new FindException("Failed to analyze annotation for resource: " + resource, e);
        }
    }
} 
```

# java - 如何将图表放入 ScrollViewer？

> ID：13972575
> 
> 赞同：1
> 
> 时间：2012-12-20T12:47:55.903
> 
> 标签：java, android, teechart

考虑`LinearLayout`带有一些 UI 项的 a 和一个`TChart`. 如果我把这个布局放在里面，`ScrollViewer`我会期待滚动行为。但是，图表似乎会自动调整大小以适应可用空间。

向其中添加图表时如何使布局可滚动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:36:24.680

您应该将根标签设置为滚动视图，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView>
<LinearLayout 
android:orientation="vertical">
here will come your all UI items
</LinearLayout>
TChart
</ScrollView> 
```

或者

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView>
<LinearLayout 
android:orientation="vertical">
here will come your all UI items
TChart
</LinearLayout>
</ScrollView> 
```

您还可以下载并嵌入图表小部件，该小部件可作为外部小部件使用。并且不能作为 android 项目中的内置小部件使用。

# c# - Lambda 表达式定义（学究）？

> ID：13972580
> 
> 赞同：2
> 
> 时间：2012-12-20T12:48:07.063
> 
> 标签：c#, .net, delegates, lambda

通过简单介绍一本书（领先一本书），有一件事引起了我的注意——lambda表达式定义：

> lambda 表达式是代替委托实例编写的未命名方法。

*代替委托实例？？？*

委托实例是引用/封装目标方法的*对象：*

在以下示例中，右侧（lambda 表达式所在的位置）不是委托实例。这是一种方法。

`TransformerDelegate t = SquareMethod;`

所以定义应该已经更正/提及：

> lambda 表达式是代替委托变量引用的方法（！）编写的未命名方法。

```
TransformerDelegate sqr = x => x * x;
                              ^
                              |
               ---------------+
               |

            this is the location for method/anonymous methods. 
```

你明白我的意思吗？我对吗？

ps我*确实*理解了msdn的：（但想看看这本书是否犯了错误）

> lambda 表达式是一个匿名函数，可以包含表达式和语句，并可用于创建委托或表达式树类型。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T12:58:08.547

lambda 表达式的值*是*一个委托实例。

所以这本书可能指的是这样的代码：

```
MySquareDelegate f1 = x => x * x;
MySquareDelegate f2 = new MySquareDelegate(MySquareMethod);
MySquareDelegate f3 = MySquareMethod;  // just shorthand for the previous line 
```

用 1 句话解释很棘手，你自己的版本

> lambda 表达式是代替委托变量引用的方法（！）编写的未命名方法。

正在谈论“方法而不是方法”，原来是关于“方法而不是委托实例”，其中方法被隐式转换为委托实例。至少两者似乎都不完整。

lambda 的定义还应该包括它是一个*内联*方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T20:13:44.010

其他答案忽略了 lambda 表达式不一定代表方法的事实。有时，它们代表表达式树。

编译器根据上下文将 lambda 表达式隐式转换为一种或另一种类型的对象。

要指定方法，您需要指定参数和主体。在 lambda 表达式中，它们由 . 分隔`=>`。例子：

```
 ()     => 4;               //empty parameter list
    x      => x.ToString();    //one parameter
    (a, b) => a.Equals(b);     //two parameters
//  ^^^^^^    ^^^^^^^^^^^^
//  |                    |
//  parameter list       body 
```

这些 lambda 表达式可以分别转换为`Func<int>`、`Func<object, string>`和`Func<object, object, bool>`。也可以分别转换为`Expression<Func<int>>`、`Expression<Func<object, string>>`和`Expression<Func<object, object, bool>>`。

匿名方法：

```
delegate (object p, object q) { return string.Concat(p, q); }
//       ^^^^^^^^^^^^^^^^^^^^ ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
//       parameter list       body 
```

以下是 lambda 转换的两个示例：

```
Func<object, object, bool> aDelegate = (o1, o2) => object.Equals(o1, o2);
Expression<Func<object, object, bool>> anExpressionTree = (o1, o2) => object.Equals(o1, o2); 
```

在方法组转换中，参数和方法体由重载决议指定。为了简化一点，编译器查看具有指定名称的方法并根据上下文选择正确的重载。例如，考虑 SquareMethod 的这些重载：

```
int SquareMethod(int a) { return a * a; }
double SquareMethod(double a) { return a * a; } 
```

这些语句涉及方法组转换和重载解析：

```
Func<int, int> squareAnInt = SquareMethod;
Func<double, double> squareADouble = SquareMethod; 
```

最后，语句 lambda 不能转换为表达式树：

```
Action<object> anAction = o => { Console.WriteLine(o); };
Func<object, int> aFunc = o =>
    {
        var s = (o ?? "").ToString();
        Console.WriteLine(s);
        return s.Length;
    }; 
```

C# 语言规范（有些混乱）使用术语“匿名函数”来涵盖 lambda 表达式和匿名方法。匿名函数可以隐式转换为兼容的委托类型，方法组也可以。因此，如果我们有一个名为 的委托类型`DelegateType`，以及这样的声明/赋值：

```
DelegateType d = [something]; 
```

然后`[something]`可以是方法组或匿名函数。换句话说，它可以是方法组、匿名方法或 lambda 表达式。

因此，您对本书文字的更正最好说“代替方法组”，但我会说

> lambda 表达式是一种未命名的方法，与命名方法组一样，可用于创建委托实例。

我还可以补充

> 在某些情况下，可以使用 lambda 表达式来创建表达式树而不是委托实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T13:00:16.517

基本上，委托只不过是一个知道如何调用特定方法的**对象。**因此，委托**实例**实际上充当调用者的委托：调用者调用委托，然后委托调用目标方法。

# batch-file - 如何在批处理文件中设置参数等于 VB6 变量

> ID：13972582
> 
> 赞同：2
> 
> 时间：2012-12-20T12:48:06.563
> 
> 标签：batch-file, vb6, vbscript, imagemagick, dos

在我的批处理文件中，我调用了一个 VBScript 并向它传递了 3 个参数。参数为“IPADDRESS”“PicName”和“Storage”，如下图：

批处理文件：

```
 set Pathname="C:\User\username\locationOfFile 
        cd /d %Pathname%
        cscript.exe C:\User\username\locationOfFile\myScript.vbs IPADDRESS PicName Storage 
```

在我的 VB6 程序中，定义了参数值。

比如说 IPADDRESS = "170.190.xxx.xxx"

有没有办法可以读取批处理文件并根据 VB6 表单中的声明使用 IPADDRESS 的值？变量 IPADDRESS、PicName 和 Storage 将根据 VB6 程序与之交谈的外部应用程序不断变化，因此我无法在批处理中静态设置它（ ....\myScript.vbs 170.190.xxx.xxx pic1 C:\贮存）

我的 VBScript 如下：

```
 Option explicit

   if WScript.Arguments.Count <> 3 then
      WScript.Echo "Missing parameters"
   else

   Dim imageMagick
   Set imageMagick = CreateObject("ImageMagickObject.MagickImage.1")

   Dim cam_add 
   Dim annotate 
   Dim filename 
   Dim cmd
   Dim WshShell
   Dim return

   cam_add = """http://" & WScript.Arguments(0) &"/image"""
   annotate = """" & WScript.Arguments(1) & " - """ '& Date
   filename = """" & WScript.Arguments(2) & WScript.Arguments(1) & ".jpg"""
   cmd = "convert " & cam_add & " -fill gold -pointsize 45 -gravity southwest -annotate         0x0+25+25 " & annotate & " -trim +repage -verbose " & filename

   WScript.Echo cmd

   Set WshShell = WScript.CreateObject("WScript.Shell")

   WshShell.CurrentDirectory = "C:\Program Files\ImageMagick-6.8.0-Q16\"

   return = WshShell.Run(cmd) 

   end if 
```

总之，我需要像这样设置批处理：

cscript.exe C:\User\username\locationOfFile\myScript.vbs IPADDRESS PicName 存储

所以参数值可以根据我的 VB6 表单中的设置来使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T13:14:38.117

如果您要：

```
shell "the.bat " & IPADDRESS & " " & PicName & " " & Storage 
```

然后在`the.bat`每个空格分隔的参数中都可以通过`%N`where`N`是序数获得；so`%1`将包含 的值`IPADDRESS`，`%2`将包含`PicName`' 的值，依此类推。

然后转发到 VBScript：

```
cscript.exe C:\User\username\locationOfFile\myScript.vbs %1 %2 %3 
```

（如果任何变量包含空格，您需要在传递给 bat 文件之前“引用”它们）

（您也可以只`chdir(..)`在 VB6 中直接运行 CScript）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T00:41:04.217

对于这么简单的事情，无论如何都不需要批处理文件。毕竟，您有一个*完整的脚本*可以使用。

您甚至可以从里面设置 CD，或者在 VB6 程序中设置它，如下所示：

```
Option Explicit

Private Sub Main()
    Dim CD As String
    Dim IPADDRESS  As String
    Dim PicName As String
    Dim Storage As String
    Dim OrigCD As String

    CD = "D:\Photo Archives"
    IPADDRESS = "127.0.0.1"
    PicName = "Fudd"
    Storage = "C:\Storage"

    'Cache CD so we can restore it.
    'Change CD and drive so it is inherited.
    OrigCD = CurDir$()
    ChDir CD
    ChDrive CD

    Shell "cscript """ _
        & App.Path & "\test.vbs "" """ _
        & IPADDRESS & """ """ _
        & PicName & """ """ _
        & Storage & """", _
          vbNormalFocus

    'Restore CD and drive.
    ChDir OrigCD
    ChDrive OrigCD

    'Rest of program.
End Sub 
```

脚本示例：

```
Option Explicit

Private CD

Private Sub Msg(ByVal Text)
    With WScript
        .StdOut.WriteLine Text
        .StdOut.Write "Press ENTER to continue..."
        .StdIn.ReadLine
    End With
End Sub

If WScript.Arguments.Count <> 3 Then
    Msg "Missing parameters"
    WScript.Quit
End If

'Show the CD and the arguments.
With CreateObject("WScript.Shell")
    CD = .CurrentDirectory
End With
With WScript.Arguments
    Msg CD & vbNewLine _
      & """" & .Item(0) _
      & """ """ & .Item(1) _
      & """ """ & .Item(2) & """"
End With 
```

但它甚至看起来都不需要脚本。您可以从 VB6 程序内部构建命令、设置 CD/驱动器和 Shell() 构建的命令字符串。

# javascript - 我在 JavaScript 中从表单重新提交数据时遇到问题

> ID：13972588
> 
> 赞同：2
> 
> 时间：2012-12-20T12:48:22.403
> 
> 标签：javascript, html, forms

我有以下情况：

*   用户填写 HTML 表单
*   用户按下提交按钮
*   出乎意料的坏事发生了
*   服务器使用重试按钮检索错误页面。此页面不再具有原始表单。当用户单击重试按钮时，我希望重新提交最后一个帖子数据

我什至不知道这是否可能。我正在`retry`按钮上尝试这个： `window.location.reload(true);`

结果是：

*   在 Firefox 上，它可以完美运行。它重新发布数据并向用户显示生成的 HTML。
*   在谷歌浏览器上它不会重新发布数据，它在同一个 URL 上使用 GET，我会看看 Fiddler 以确保
*   IE 9 重新发布数据，但作为回报显示空白屏幕。如果我重新加载它将显示正确的页面。

我希望他们每个人都像 Firefox 一样工作。我想问题出在这个错误页面中没有原始表单。

我可以在 JavaScript 中做些什么来使它们都具有正确的行为吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T12:55:23.853

您应该在重试表单中包含发布数据。将发布数据包装在 a 中`<form>`并重新提交表单。

形式：

```
<form id="retryform" name="retryform" action="postfile.html" method="post">
    <!-- post data -->
</form> 
```

JS：

```
document.getElementById('retryform').submit();
// or
document.forms["retryform"].submit();
// or
document.retryform.submit(); 
```

# c# - 获取返回无效虚拟路径的 asp.net Web 应用程序的文件列表

> ID：13972589
> 
> 赞同：0
> 
> 时间：2012-12-20T12:48:22.440
> 
> 标签：c#, asp.net

我正在尝试在我的 .net Web 应用程序中的文件系统上的文件夹中获取文件列表。当我运行该应用程序时，我收到一条错误消息，指出该目录“不是有效的虚拟路径”。如何让它返回位于我的 WebApp 目录中的文件（它们位于 {webapp root}\docs\custFiles 中）。

```
try
{
    List<string> custFiles = new List<string>();
    StringBuilder dir = new StringBuilder(@"~\docs\custFiles\");
    dir.Append(custNo + @"\");
    string directory = HttpContext.Current.Server.MapPath(dir.ToString());
    bool IsExists = System.IO.Directory.Exists(directory);
    if (!IsExists)
    {
        string[] fileList = Directory.GetFiles(directory);
        custFiles = (fileList.ToList());
    }

    return custFiles;
}
catch (Exception ex)
{
    throw ex;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:57:16.597

问题是这一行：

```
bool IsExists = System.IO.Directory.Exists(Server.MapPath(directory)); 
```

因为您已经在此处构建了目录名称：

```
string directory = HttpContext.Current.Server.MapPath(dir.ToString()); 
```

您可以在没有 Server.MapPath 的情况下使用 Exists 调用：

```
bool IsExists = System.IO.Directory.Exists(directory); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T13:14:23.997

好吧，您通过的虚拟路径似乎有问题。相反，试试这个。

```
String directory=Server.MapPath("~/docs/custFiles");
if(System.IO.Directory.Exists(directory))
{
   //do your coding..
} 
```

# django - 为我的所有模型添加属性

> ID：13972594
> 
> 赞同：3
> 
> 时间：2012-12-20T12:48:46.893
> 
> 标签：django, django-admin

我想在我的管理员索引中将我的模型分成不同的块（见[这个问题](https://stackoverflow.com/q/13957711/326849)）。

为了实现这一点，我想为我的所有模型添加一个属性“admin_group”。然后我将覆盖`AdminSite.app_index`并创建一个自定义`admin/app_index.html`以按“admin_group”对模型进行分组，并在我的管理员索引中的不同块中显示它们。

我可以在我的模型中添加一个属性“admin_group”，如下所示：

```
class model1(models.Model):
    # ...
    admin_group = "group1"

class model2(models.Model):
    # ...
    admin_group = "group1"

class model3(models.Model):
    # ...
    admin_group = "group2" 
```

但我想知道是否有更清洁的解决方案。

注意：我不想使用 Meta 选项`app_label`，因为它会弄乱数据库请求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T13:58:43.423

您可以使用该组字段创建一个父类，并使用父类继承您的所有模型类。

```
class Parent(models.Model):
    GROUP_CHOICES = [
        (u'1', u'Group1'),
        (u'2', u'Group2'),
        ...
       ]
   admin_group = models.CharField(_("Admin group"), max_length=1, choices = GROUP_CHOICES)

class model1(Parent):
    # ...

class model2(Parent):
    # ... 
```

`model1`现在`model2`有`admin_group`领域。

# web-services - Bean 更改不会反映在 CXF Restful Web 服务上

> ID：13972600
> 
> 赞同：1
> 
> 时间：2012-12-20T12:49:05.143
> 
> 标签：web-services, jakarta-ee, jaxb, cxf, jax-rs

我已经实现了一个[CXF restful webservice](http://cxf.apache.org/docs/jax-rs.html)。`Error`调用 web服务时抛出一些没有默认构造函数的对象。

**错误：**

```
WARNING: javax.xml.bind.MarshalException
 - with linked exception:
[javax.xml.bind.JAXBException: class com.v4common.shared.beans.m2.Training nor any of its super class is known to this context.]
    at com.sun.xml.bind.v2.runtime.MarshallerImpl.write(MarshallerImpl.java:326)
    at com.sun.xml.bind.v2.runtime.MarshallerImpl.marshal(MarshallerImpl.java:178)
    at org.apache.cxf.jaxrs.provider.json.JSONProvider.marshal(JSONProvider.java:469)
    at org.apache.cxf.jaxrs.provider.json.JSONProvider.marshal(JSONProvider.java:517)
    at org.apache.cxf.jaxrs.provider.json.JSONProvider.writeTo(JSONProvider.java:361)
    at org.apache.cxf.jaxrs.utils.JAXRSUtils.writeMessageBody(JAXRSUtils.java:1173)
    at org.apache.cxf.jaxrs.interceptor.JAXRSOutInterceptor.serializeMessage(JAXRSOutInterceptor.java:259)
    at org.apache.cxf.jaxrs.interceptor.JAXRSOutInterceptor.processResponse(JAXRSOutInterceptor.java:155)
    at org.apache.cxf.jaxrs.interceptor.JAXRSOutInterceptor.handleMessage(JAXRSOutInterceptor.java:86)
    at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:271)
    at org.apache.cxf.interceptor.OutgoingChainInterceptor.handleMessage(OutgoingChainInterceptor.java:77)
    at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:271)
    at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:121)
    at org.apache.cxf.transport.http.AbstractHTTPDestination.invoke(AbstractHTTPDestination.java:238)
    at org.apache.cxf.transport.servlet.ServletController.invokeDestination(ServletController.java:222)
    at org.apache.cxf.transport.servlet.ServletController.invoke(ServletController.java:163)
    at org.apache.cxf.transport.servlet.ServletController.invoke(ServletController.java:137)
    at org.apache.cxf.transport.servlet.CXFNonSpringServlet.invoke(CXFNonSpringServlet.java:158)
    at org.apache.cxf.transport.servlet.AbstractHTTPServlet.handleRequest(AbstractHTTPServlet.java:239)
    at org.apache.cxf.transport.servlet.AbstractHTTPServlet.doGet(AbstractHTTPServlet.java:164)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    at org.apache.cxf.transport.servlet.AbstractHTTPServlet.service(AbstractHTTPServlet.java:215)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:487)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1097)
    at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:66)
    at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:118)
    at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:113)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1088)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:360)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:729)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:405)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.handler.RequestLogHandler.handle(RequestLogHandler.java:49)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:324)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:505)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:829)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:513)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:211)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:380)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:395)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:488)
Caused by: javax.xml.bind.JAXBException: class com.v4common.shared.beans.m2.Training nor any of its super class is known to this context.
    at com.sun.xml.bind.v2.runtime.XMLSerializer.reportError(XMLSerializer.java:247)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.reportError(XMLSerializer.java:262)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.childAsXsiType(XMLSerializer.java:653)
    at com.sun.xml.bind.v2.runtime.property.SingleElementNodeProperty.serializeBody(SingleElementNodeProperty.java:158)
    at com.sun.xml.bind.v2.runtime.ClassBeanInfoImpl.serializeBody(ClassBeanInfoImpl.java:358)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.childAsSoleContent(XMLSerializer.java:593)
    at com.sun.xml.bind.v2.runtime.ClassBeanInfoImpl.serializeRoot(ClassBeanInfoImpl.java:340)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.childAsRoot(XMLSerializer.java:494)
    at com.sun.xml.bind.v2.runtime.MarshallerImpl.write(MarshallerImpl.java:323)
    ... 43 more
Caused by: javax.xml.bind.JAXBException: class com.v4common.shared.beans.m2.Training nor any of its super class is known to this context.
    at com.sun.xml.bind.v2.runtime.JAXBContextImpl.getBeanInfo(JAXBContextImpl.java:588)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.childAsXsiType(XMLSerializer.java:648)
    ... 49 more 
```

但现在我也在其中创建了默认结构。即`Training`，但这些变化并没有反映出来，因为我仍然面临同样的问题。

所以我有一个疑问，是否曾经`webservice`创建过最初的 bean 结构，如果我们更改了它，那么是否需要进行任何其他更改？

我找到了一个解决方案[链接](http://www-01.ibm.com/support/docview.wss?uid=swg21307866)，

```
When the second generation happens, the ObjectFactory is overwritten. 
The new file does not contain references to the classes from the first 
generation and the JAXB runtime cannot configure itself properly. 
```

但我是新手。我无法理解这些术语`wsimport`，`xjc`我该如何执行它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T07:23:24.423

借助此注解`@XmlSeeAlso({ Training.class})`，JAXB 实现将能够正确绑定`Training`并对其进行修改。

# java - 为什么有人会在部署时选择/更改特定的日志框架？

> ID：13972601
> 
> 赞同：0
> 
> 时间：2012-12-20T12:49:08.973
> 
> 标签：java, logging, slf4j

我正在阅读有关使用 java 进行日志记录的内容并遇到了这个问题：[在此处输入链接描述](http://www.slf4j.org/index.html) 它在这里谈到了 slf4j 的一个优势：
可以在部署时选择他的日志框架 ==> 可以在部署时插入所需的日志框架在类路径中插入适当的 jar 文件（绑定）。有人可以向我解释为什么以及在哪里需要这个吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T12:53:45.907

您正在编写一个通用库，它使用 SLF4J 生成日志。

公司 A 使用它，并且已经将其所有 IT 基础设施配置为使用 log4J。他们很高兴您的 API 也可以使用 log4J 进行日志记录。

公司 B 也使用它，并且已经将其所有 IT 基础设施配置为使用 java util logging。他们很高兴您的 API 也可以使用 java util logging 来记录。

公司 C 也使用它，并且已经将其所有 IT 基础设施配置为使用 logback。他们很高兴您的 API 也可以使用 logback 进行日志记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T12:53:50.967

我可以想到以下场景：

*   Websphere 使用 JCL 日志记录，如果也使用 JCL，那么您可以在运行时设置/修改日志级别和过滤器。
*   Appserver X 更适合 Log4J，所以使用它可能会更好......

使用 SLF4J，您无需重构底层日志​​框架的代码即可使用...

# java - 在 Spring 中，如何指定 BindingResult 实现

> ID：13972607
> 
> 赞同：0
> 
> 时间：2012-12-20T12:49:29.603
> 
> 标签：java, spring, spring-mvc

我想在控制器中指定 BindingResult 的实现类型。有没有办法做到这一点？目前，Spring 似乎必须自己确定实现类型（恰好是 BeanPropertyBindingResult）。我怀疑我在某处缺少配置，或者我只需要在控制器的方法签名中指定实际类型。

例子：

```
/**
 * {@inheritDoc}
 */
@Override
public ModelAndView continue(@ModelAttribute("model") @Valid final T model, final BindingResult results) { ... } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:25:07.180

您不需要自定义**BindingResult**来完成您想做的事情。您需要实现**BindingErrorProcessor**并在**WebDataBinder**中使用它。它负责将错误添加到**BindingResult**并允许您使用自定义**错误**实现。这是您在控制器中使用它的方式...

```
@Controller
public class MyFormController {
    ...

    @InitBinder
    public void initBinder(WebDataBinder binder) {
        binder.setBindingErrorProcessor(new MyCustomBindingErrorProcessor());
    }
} 
```

混合绑定和验证是不好的做法，类应该有一个单一的责任。您不应该在 BindingResult 本身中进行验证。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-20T12:54:11.247

你必须在前面添加 ModelAndView `@ModelAttribute`：

```
public ModelAndView continue(ModelAndView model, @ModelAttribute("model") ObjectType objectName){
} 
```

# c# - 如何在 WebBrowser 控件中搜索文本

> ID：13972610
> 
> 赞同：0
> 
> 时间：2012-12-20T12:49:52.767
> 
> 标签：c#, winforms, web

> 嗨，我们有一个要求，比如在 windows7/vista“预览窗格”中预览文档，并且必须在 Winforms 中实现搜索功能。为此，我已将 Ms office 文档、Excel Sheets 和 Power Point 文档加载到 Webbrowser html 格式的控件。现在我们需要在该 webbrowser 控件中实现搜索功能。为此，我们使用以下代码实现了搜索功能

```
public bool FindNext(string text, WebBrowser webBrowser1)
        {

            IHTMLDocument2 doc = webBrowser1.Document.DomDocument as IHTMLDocument2;

            IHTMLSelectionObject sel =doc.selection;// (IHTMLSelectionObject)doc.selection;
            IHTMLTxtRange rng = sel.createRange() as IHTMLTxtRange;

            rng.collapse(false); // collapse the current selection so we start from the end of the previous range
            if (rng.findText(text, 1000000, 0))
            {
                rng.select();
                return true;
            }
            else
                FindFirst(text, webBrowser1);
            return false;
        } 
```

> 此代码适用于在 word Document 中搜索所有出现的字符串值。但是，当涉及到 Excel 和 PPt 文档时，此代码无法正常工作。它仅找到字符串的第一次出现，其他出现找不到。在调试时我发现，对于 word 文档“IHTMLDocument2”对象将 html 内容存储在“innerHTML”和“innerText”中，并带有一些值。但是对于 Excel，它仅通过使用框架将文本存储在“innerHTML”中，并且工作表被引用到本地临时 .html 文件，并且它没有任何“innerText”内容显示为空。
> 
> ```
>  Please provide the solution to search the text in webbrowser control which loaded the html content, that is converted from 
> ```
> 
> Excel、PPT 转为 html 类型并在 webbrowser 控件中显示。
> 
> 如果您有任何疑问，请随时问我。
> 
> 谢谢你。

# r - 在 R 中具有 9 个 else 条件的 if 语句

> ID：13972614
> 
> 赞同：6
> 
> 时间：2012-12-20T12:50:01.630
> 
> 标签：r

我有一个函数，它查看 9 种不同的可能性并相应地选择一个具有以下形式的动作：

我正在做的是查找一个向量，并为向量中的每个条目决定

```
IF the value in the vector is 1 THEN start function B
IF the value in the vector is 2 THEN start function C
IF the value in the vector is 3 THEN start function D
IF the value in the vector is 4 THEN start function E 
```

等等

我想用 R 写这个。我是否只为每个案例都加上“else”？

我尝试`switch`过以下方式：

```
condition<-6
FUN<-function(condition){
    switch(condition,
    1 = random1(net)
    2 = random2(net)
    3 = random3(net)
    4 = random4(net)
    5 = random5(net)
    6 = random6(net)
    7 = random7(net)
    8 = random8(net)
    9 = random9(net)
    10= random10(net))
} 
```

其中随机 1 到 10 是使用变量“net”的函数

并且该`switch`命令试图做的是检查“条件”的值，如果它是上面例子中的 6，那么它运行该函数：`random6(net)`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T14:20:39.493

两个答案都为您指出了正确的工具，但恕我直言，事情应该这样写。到目前为止，OP 和两种解决方案都在创建使用全局变量 ( `net`) 的函数，这不是最佳实践。

假设`randomX`是一个参数的函数`net`，即：

```
random1 <- function(net){ [...] }
random2 <- function(net){ [...] }
[etc.] 
```

然后你需要做：

```
FUN <- switch(condition,
              '1' = random1,
              '2' = random2,
              [etc.]) 
```

或更好：

```
FUN.list <- list(random1, random2, [etc.])
FUN <- FUN.list[[condition]] 
```

在这两种情况下，输出都是一个作为输入的函数`net`（就像`randomX`），因此您可以通过执行以下操作对其进行评估：

`FUN(net)`

另请注意，您可以使用第二种方法一次性完成所有操作：

```
FUN.list[[condition]](net) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-20T13:56:24.507

另一种解决方案是将要调用的所有函数打包到一个列表中`randoms`，然后根据以下内容选择一个列表项`condition`：

```
randoms <- list(random1, random2, random3, random4, random5, random6, random7, random8, random9, random10)
FUN <- function(condition) {
  randoms[[condition]](net)
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-20T12:54:39.953

使用`switch`函数如下：

```
foo <- function(condition){
  switch(condition,
         '1' = print('B'),
         '2' = print('C'),
         '3' = print('D'),
         '4' = print('E'))
}

> foo(1)
[1] "B"
> foo(2)
[1] "C"
> foo(3)
[1] "D"
> foo(4)
[1] "E" 
```

更多细节在`?switch`

根据您的示例：

```
condition<-6
FUN<-function(condition){
    switch(condition,
    '1' = random1(net), # Maybe you're missing some commas here
    '2' = random2(net), # and here
    '3' = random3(net), # and here
    '4' = random4(net)
    ....) # all the way to '10' = random10(net)
} 
```

这会成功的

这对我很有效：

```
Foo <- function(condition){
  x <- 1:20
  switch(condition,
         '1' = mean(x),
         '2' = var(x),
         '3' = sd(x))
}

> Foo(1)
[1] 10.5
> Foo(2)
[1] 35
> Foo(3)
[1] 5.91608 
```

# java - Primitives/Objects 声明，默认初始化值

> ID：13972617
> 
> 赞同：4
> 
> 时间：2012-12-20T12:50:21.997
> 
> 标签：java, initialization, default

声明原语/对象时，它们是否已初始化？

哪些是默认值？

*类成员*和*本地字段*的行为是什么？

类成员的对象声明呢？

* * *

如下所述，这些是默认值：

> ```
> Data Type - Default Value (for fields)
> 
> byte  0
> short 0
> int   0
> long  0L
> float 0.0f
> double    0.0d
> char  '\u0000'
> String (or any object)    null
> boolean   false 
> ```

请注意，对象被初始化为*null*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T12:53:28.683

的默认值`int`is`0`和 that 是它在 JavaSE 和 JavaEE 中都将具有的值，除非它被分配了另一个值。

Java（或任何其他原语）中不能有未初始化的`int`类成员。

在您的示例中，您显示的`int`是类成员，在另一个示例中，它是局部变量，这就是区别。

对于`class members`JVM 将放置默认值，因为`local variables`它使您在访问变量之前分配和初始值。

您可以查看[原始数据类型](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)`Default Values`中的部分以获取有关类成员默认值的更多信息。

# c# - 检查列表是否包含大于 C# 中的值的项目

> ID：13972621
> 
> 赞同：6
> 
> 时间：2012-12-20T12:50:30.397
> 
> 标签：c#, .net, linq, list, contains

我需要检查 List 是否包含大于特定值的值。我怎么能这样做？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-20T12:51:38.293

使用 LINQ：

```
bool contains = yourList.Any(z => z.YouProperty > yourValue); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-20T12:54:43.383

您可以使用[`Enumerable.Any<TSource`](http://msdn.microsoft.com/en-us/library/bb337697.aspx)> 方法。它返回`boolean`。

> 确定序列是否包含任何元素。

```
Return Value
Type: System.Boolean
true if the source sequence contains any elements; otherwise, false.

List.Any(a => a.Property > Value); 
```

# extjs - 从 ExtJs 表单中检索 DisplayField 值

> ID：13972624
> 
> 赞同：0
> 
> 时间：2012-12-20T12:50:50.553
> 
> 标签：extjs

**嗨**，

我已经使用包含 DisplayFields 的 Jsp 开发了一个 extjs 表单。现在我想将 DisplayField 值检索到控制器或 Servlet 中。

代码的任何提示都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:19:07.740

一些要查看的代码会有所帮助，但假设您有一个 id 为“myDisplayField”的显示字段，您可以以最简单的形式使用：

```
var theValue = Ext.getCmp('myDisplayField').getValue(); 
```

# html - 添加过期标头

> ID：13972629
> 
> 赞同：52
> 
> 时间：2012-12-20T12:51:30.173
> 
> 标签：html, yslow, expires-header

```
Add Expires headers
There are 21 static components without a far-future expiration date.

    http://static.doers.lk/examples-offline.css
    http://static.doers.lk/kendo.common.min.css
    http://static.doers.lk/kendo.default.min.css
    http://static.doers.lk/style.css
    http://static.doers.lk/jquery.min.js
    http://static.doers.lk/kendo.web.min.js
    http://static.doers.lk/console.js
    http://static.doers.lk/sprite.png
    https://fbexternal-a.akamaihd.net/safe_image.php?...
    https://fbexternal-a.akamaihd.net/safe_image.php?...
    https://fbexternal-a.akamaihd.net/safe_image.php?...
    https://fbexternal-a.akamaihd.net/safe_image.php?...
    https://fbexternal-a.akamaihd.net/safe_image.php?...
    https://fbexternal-a.akamaihd.net/safe_image.php?...
    https://fbexternal-a.akamaihd.net/safe_image.php?...
    https://fbexternal-a.akamaihd.net/safe_image.php?...
    https://fbexternal-a.akamaihd.net/safe_image.php?...
    https://fbexternal-a.akamaihd.net/safe_image.php?...
    https://fbexternal-a.akamaihd.net/safe_image.php?...
    https://fbexternal-a.akamaihd.net/safe_image.php?...
    http://static.doers.lk/favicon.PNG 
```

使用 yahoo YSLOW 测试站点时，它会显示上述消息。所以我不知道如何添加过期标头。任何帮助，将不胜感激？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-12-20T12:54:04.727

添加这些标头的最简单方法是`.htaccess`向您的服务器添加一些配置的文件。如果资产托管在您无法控制的服务器上，则您无能为力。

请注意，某些托管服务提供商不允许您使用`.htaccess`文件，因此如果它似乎不起作用，请检查他们的条款。

HTML5Boilerplate 项目有一个很好的`.htaccess`文件，涵盖了必要的设置。[在他们的Github 存储库](https://github.com/h5bp/html5-boilerplate/blob/dac15682b35ad69f519205e1b82694d0cab189ca/.htaccess#L192)中查看文件的相关部分

这些是重要的位

```
# ----------------------------------------------------------------------
# Expires headers (for better cache control)
# ----------------------------------------------------------------------

# These are pretty far-future expires headers.
# They assume you control versioning with filename-based cache busting
# Additionally, consider that outdated proxies may miscache
# www.stevesouders.com/blog/2008/08/23/revving-filenames-dont-use-querystring/

# If you don't use filenames to version, lower the CSS and JS to something like
# "access plus 1 week".

<IfModule mod_expires.c>
  ExpiresActive on

# Your document html
  ExpiresByType text/html "access plus 0 seconds"

# Media: images, video, audio
  ExpiresByType audio/ogg "access plus 1 month"
  ExpiresByType image/gif "access plus 1 month"
  ExpiresByType image/jpeg "access plus 1 month"
  ExpiresByType image/png "access plus 1 month"
  ExpiresByType video/mp4 "access plus 1 month"
  ExpiresByType video/ogg "access plus 1 month"
  ExpiresByType video/webm "access plus 1 month"

# CSS and JavaScript
  ExpiresByType application/javascript "access plus 1 year"
  ExpiresByType text/css "access plus 1 year"
</IfModule> 
```

他们已经[记录了该文件的作用](https://github.com/h5bp/html5-boilerplate/blob/v4.0.2/doc/htaccess.md)，最重要的一点是您需要在 CSS 和 Javascript 文件更改时重命名它们，因为一旦它们被缓存，您的访问者的浏览器将不会在一年内再次检查它们。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-07-31T05:26:25.983

试试这个解决方案，它对我来说很好用

```
## EXPIRES CACHING ##
<IfModule mod_expires.c>
ExpiresActive On
ExpiresByType image/jpg "access 1 year"
ExpiresByType image/jpeg "access 1 year"
ExpiresByType image/gif "access 1 year"
ExpiresByType image/png "access 1 year"
ExpiresByType text/css "access 1 month"
ExpiresByType text/html "access 1 month"
ExpiresByType application/pdf "access 1 month"
ExpiresByType text/x-javascript "access 1 month"
ExpiresByType text/css "access plus 1 year"
ExpiresByType application/x-shockwave-flash "access 1 month"
ExpiresByType image/x-icon "access 1 year"
ExpiresDefault "access 1 month"
</IfModule>

<IfModule mod_headers.c>
  <FilesMatch "\.(js|css|xml|gz)$">
    Header append Vary: Accept-Encoding
  </FilesMatch>
</IfModule>

<ifModule mod_gzip.c>
mod_gzip_on Yes
mod_gzip_dechunk Yes
mod_gzip_item_include file .(html?|txt|css|js|php|pl)$
mod_gzip_item_include handler ^cgi-script$
mod_gzip_item_include mime ^text/.*
mod_gzip_item_include mime ^application/x-javascript.*
mod_gzip_item_exclude mime ^image/.*
mod_gzip_item_exclude rspheader ^Content-Encoding:.*gzip.*
</ifModule>

<IfModule mod_deflate.c>
SetOutputFilter DEFLATE
AddOutputFilterByType DEFLATE text/html text/css text/plain text/xml text/x-js text/js 
</IfModule>

## EXPIRES CACHING ## 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-20T12:53:40.200

您可以将它们添加到您的 htaccess 文件或 vhost 配置中。

见这里：[http ://httpd.apache.org/docs/2.2/mod/mod_expires.html](http://httpd.apache.org/docs/2.2/mod/mod_expires.html)

但除非您拥有这些域名.. 它们是我们的您的控制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-18T13:04:13.787

```
<IfModule mod_expires.c>
    # Enable expirations
    ExpiresActive On 

    # Default directive
    ExpiresDefault "access plus 1 month"

    # My favicon
    ExpiresByType image/x-icon "access plus 1 year"

    # Images
    ExpiresByType image/gif "access plus 1 month"
    ExpiresByType image/png "access plus 1 month"
    ExpiresByType image/jpg "access plus 1 month"
    ExpiresByType image/jpeg "access plus 1 month"

    # CSS
    ExpiresByType text/css "access plus 1 month"

    # Javascript
    ExpiresByType application/javascript "access plus 1 year"
</IfModule> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-27T16:28:44.373

在 ASP.NET 中也有类似的对象，可以使用 WebFormsUserControls 中的 Caching Portions 来缓存页面对象一段时间，节省服务器资源。这也称为片段缓存。
如果将此代码包含在用户控件的顶部，则该控件的版本将在输出缓存中存储 150 秒。您可以创建自己的控件，该控件将包含所需特定资源的过期标头。

```
<%@ OutputCache Duration="150" VaryByParam="None" %> 
```

这篇文章完全解释了它： **[ASP.NET 页面的缓存部分](https://docs.microsoft.com/en-us/previous-versions/dotnet/netframework-1.1/h30h475z(v=vs.71))**

# java - 具有继承映射的一对多的 JPA 映射

> ID：13972633
> 
> 赞同：4
> 
> 时间：2012-12-20T12:51:38.907
> 
> 标签：java, hibernate, jakarta-ee, jpa, annotations

我有一个场景。

```
@Entity
@Table(name = "someTable")
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
@Access(AccessType.FIELD)
@DiscriminatorColumn(name = "someDisc")
public abstract class AbstractClass{} 
```

和

```
@Entity
@Access(AccessType.FIELD)
@DiscriminatorValue("1")
public class Child1 extends AbstractClass{
}

@Entity
@Access(AccessType.FIELD)
@DiscriminatorValue("2")
public class Child2 extends AbstractClass{
} 
```

现在在第三张桌子我想要这样的东西

```
@Entity
@Table
public class ThridTable{

    @OneToMany(cascade = CascadeType.ALL, fetch = EAGER, orphanRemoval = true)
    @JoinColumn(name = "foreinKeyCol", nullable = false)
    @OrderColumn(name = "orderCol")
    private List<Child2> child2 = new ArrayList<>();

    @OneToMany(cascade = CascadeType.ALL, fetch = EAGER, orphanRemoval = true)
    @JoinColumn(name = "foreinKeyCol", nullable = false)
    @OrderColumn(name = "orderCol")
    private List<Child1> child1 = new ArrayList<>();

//more setters/getters
} 
```

现在虽然它可以很好地保存并且值正在正确保存在表中。使用 ThridTable 对象获取对象时遇到的问题。生成的查询不区分两个实例，即同一表中的 child1 和 child2，并尝试更新 child 1 中 child2 的对象。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T13:37:37.257

如果您使用的是休眠，则可以向映射添加`@Where`条件。`@OneToMany`

例如：

```
@OneToMany(cascade = CascadeType.ALL, fetch = EAGER, orphanRemoval = true)
@JoinColumn(name = "foreinKeyCol", nullable = false)
@OrderColumn(name = "orderCol")
@Where(clause="someDisc=1")
private List<Child1> child1 = new ArrayList<>(); 
```

看看 api： [http ://docs.jboss.org/hibernate/core/4.1/javadocs/org/hibernate/annotations/Where.html](http://docs.jboss.org/hibernate/core/4.1/javadocs/org/hibernate/annotations/Where.html)

和： [http ://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/#entity-hibspec-collection](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/#entity-hibspec-collection)

# html - HTML5 视频循环在 Chrome 中不起作用（来自 Cloudfront）

> ID：13972634
> 
> 赞同：0
> 
> 时间：2012-12-20T12:51:38.653
> 
> 标签：html, google-chrome, video, amazon-cloudfront

我的测试页面中有以下 HTML5 视频元素：

```
<video width="1280" height="720" loop="loop">
  <source src="http://d1dsyb3mv0b0i6.cloudfront.net/test/lines.mp4" type="video/mp4" />
  Your browser does not support the video element.
</video> 
```

我希望它循环播放，所以我设置了`loop="loop"`（我也简单地尝试`loop`了），但由于某种原因，Chrome 23 在结束时不会重新启动视频。我专门将视频移至 Cloudfront 下载分发版，以获得服务器上的部分内容请求支持，这应该是 Chrome 执行循环播放所必需的，但不幸的是，这似乎没有什么不同。请注意，在 Safari 中一切正常。再说一次，Safari 循环播放本地视频文件也没有问题，因此它不需要支持部分内容请求的服务器。

它似乎与 Cloudfront 相关，因为这部电影确实循环正确：`http://media.w3.org/2010/05/sintel/trailer.mp4`.

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T14:07:08.480

您需要正确设置`content-type`S3 对象上的元数据以反映文件的正确 MIME 类型。与其他浏览器相比，Chrome 往往对此更加挑剔。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-16T19:11:35.590

循环对我有用，但尝试用命令替换循环：

```
autoplay onended="this.currentTime=0" 
```

或者

```
autoplay onended="this.load()" 
```

第二个选项会在重新加载期间导致闪烁。第一个运行顺利，但 currentTime 的行为可能会有所不同，具体取决于其他设置。希望有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T14:04:35.280

我也已经上传`trailer.mp4`到 Cloudfront (S3) 并且**确实**有效。这个 mp4 甚至可以在本地文件系统中工作，所以与我想的不同，我不需要专门从支持部分内容请求的服务器播放视频。因此，视频似乎与`lines.mp4`视频有所不同`trailer.mp4`。我很想知道有什么区别使这个视频不能被 Chrome 循环播放，而它在 Safari 中循环很好......

# batch-file - Jenkins 总是认为使用批处理/bat 构建成功

> ID：13972636
> 
> 赞同：32
> 
> 时间：2012-12-20T12:51:41.870
> 
> 标签：batch-file, jenkins

我刚刚加入了一家使用批处理文件构建 C++ 项目的公司。批处理做了各种各样的事情（更新 svn，现在由 jenkins 完成），创建构建文件夹，构建后删除不必要的文件，将库文件复制到构建文件夹等。

我的问题是詹金斯总是认为构建成功，即使它不是。当出现问题时，.bat 文件会创建一个名为 errormake.txt 的文件。如何让詹金斯阅读并将构建标记为失败？

另外，有什么方法可以找到从 .bat 文件中创建的构建文件夹 Jenkins（当我调用批处理文件时可能会发送一个变量）？

这是我目前用来调用 .bat 文件的单行代码：

```
call "C:\Source\BuildVersion\AppName\build_version.bat" 
```

编辑：此外，这个项目被分成几个 SVN 存储库。`%SVN_REVISION%`为空白。如何`%SVN_REVISION%`从第一个存储库（主要存储库）中获取正确的？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-12-21T17:04:08.373

回答你的每一个问题——

*   **Jenkins 总是返回“SUCCESS”，即使作业实际上失败了**：

    Jenkins 根据在每个“*执行 windows 批处理命令*”块中运行的*最后一个命令*的返回码设置作业的状态。 如果您的最后一条命令是， Jenkins 认为一切正常 （如果 ' ' 命令运行良好......）
     *`copy some.log D:`

    `copy`*

     *根据您的操作系统，使用`EXIT xx`or ， 其中 'xx' 是大于零的整数。`EXIT /B xx`* 
**   **如何根据日志文件让 Jenkins 将构建标记为失败**：

    使用**[sdmythos_gr](https://stackoverflow.com/users/525376/sdmythos-gr)**提到的**[Text-finder Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Text-finder+Plugin)**。

    *   **有什么办法可以找出詹金斯创建的构建文件夹**：

    对于在 Jenkins 下运行的每个脚本，有一些参数可用作环境变量
    - 请参阅此处以获取这些参数的列表：
    [**Jenkins 环境变量**](https://wiki.jenkins-ci.org/display/JENKINS/Building+a+software+project#Buildingasoftwareproject-JenkinsSetEnvironmentVariables)。

    对于你的问题：

    *   `%WORKSPACE%`- 工作区的绝对路径
    *   `%BUILD_NUMBER%`- 当前版本号，例如“153”
    *   `%BUILD_ID%`- 当前构建 id，例如“2005-08-22_23-59-59”
        (YYYY-MM-DD_hh-mm-ss)

        *   **如何从第一个存储库中获取正确的 %SVN_REVISION%**：

    这个答案来自同一个链接：

    *   `%SVN_REVISION%`- 对于基于 Subversion 的项目，
        此变量包含模块的修订号。
        **如果您指定了多个模块，则不会设置**。*

 *希望有帮助

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-20T15:13:41.173

Jenkins 使用 windows 错误代码来了解构建是否失败。当您的构建失败时，您应该返回一个不同于 0 的值，例如“exit /B 1”。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-09-11T23:55:48.910

在“较新”版本的 Windows 上（我在 Server 2012 R2 上测试过），将以下内容放在每个 Windows 批处理命令的末尾：

```
@EXIT /b %ERRORLEVEL% 
```

这会将 cmd.exe 收到的错误代码传递回调用者（即 Jenkins）。“@”关闭回显，这样您就不会弄乱您的日志。

如果您在命令中有多行并且想要在第一次失败后停止，请将以下内容放在您要检查的每一行之后（是的，这并不漂亮）：

```
@IF NOT %ERRORLEVEL% == 0 EXIT /b %ERRORLEVEL% 
```

例如：

```
step1.exe
@IF NOT %ERRORLEVEL% == 0 EXIT /b %ERRORLEVEL%
step2.exe
@IF NOT %ERRORLEVEL% == 0 EXIT /b %ERRORLEVEL%
call "C:\Source\BuildVersion\AppName\build_version.bat"
@EXIT /b %ERRORLEVEL% 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-20T15:17:42.763

我也将回答你的部分问题。

您可以使用 Jenkins 的 Text Finder 插件。 [https://wiki.jenkins-ci.org/display/JENKINS/Text-finder+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Text-finder+Plugin)

您可以根据文件的内容或控制台输出在构建结束时将构建标记为不稳定或失败。

也许这可以帮助...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-18T11:35:34.860

我知道这个问题已经很老了，但可能对某些人有用。要执行您的 bat 文件，而不是使用以下行，

```
call "C:\Source\BuildVersion\AppName\build_version.bat" 
```

您可以使用以下格式，

```
<someRelativeOrAbsolutePath>\<.batFileName> <param1> <param2> <and so on> 
```

在 Jenkins的**Build部分的****Execute Windows Batch Command**中以这种方式执行命令将使用该命令的最后一个返回码。将取决于此。而且您不必修改脚本来返回一些基于条件的错误代码。**`${BUILD_STATUS}`**

 *** * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-27T20:19:53.247

正如其他用户所说，您的批处理文件应使用“exit /B 1”。这是一个技巧，可以将您的调用链接在一起，导致 Jenkins 在失败时返回失败：

```
call a.bat &&^
echo "a success" &&^
call b.bat &&^
echo "b success" 
```

“&&”表示下一个动作应该只在成功时运行（退出代码 0）。“^”让我们将命令分成多行。这种方法的缺点是构建进度条不能准确显示。***

# design-patterns - Sencha ExtJS：MVC 或没有 MVC

> ID：13972642
> 
> 赞同：0
> 
> 时间：2012-12-20T12:52:31.507
> 
> 标签：design-patterns, extjs4, extjs4.1

我们已经开始使用 ExtJS 作为演示工具构建 RIA，现在我的问题是使用 ExtJS 4.x 我们可以将 JS 代码分解为常规方式或 MVC 方式。

在什么情况下应该采用哪种方法？

我们将使用 JavaEE REST Web 服务 (json) 作为数据源。是的，我们的应用程序将是数据密集型和模块化的（具有多个高级模块，不少于十几个）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T13:00:09.867

如果您从一开始就实施代码，我看不出为什么不使用建议的和众所周知的做法，如 MVC 模式。

Sencha团队也推荐它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T13:17:53.250

我建议使用 MVC 方法来更好地分离代码和应用程​​序的特定功能。

它允许新开发人员知道在哪里寻找特定功能（加速采用）以及在哪里放置新功能。

Ext 加载器使处理许多文件变得容易，如果您觉得文件太多是个问题，那么在部署之前将它们压缩成一个文件。

在我的书中，许多较小的文件总是比较少的大文件更受欢迎。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-22T03:15:26.367

我总是选择使用 ExtJS 4（或与此相关的任何框架）进行 MVC 开发的模块化方法。ExtJs 4 文档可以让从未构建过多个企业级单页 Web 应用程序的人相信，可以与 ExtJS 一起使用的唯一设计模式是：

1.  控制器文件夹中的所有控制器
2.  模型文件夹中的所有模型
3.  商店文件夹中的所有商店
4.  视图文件夹中的所有视图

但是任何有足够多年经验的人都可能会告诉你，这是一种糟糕的设计模式。

模块化 MVC 设计模式将通过依赖本地和全局级别的事件来放大关注点的强解耦。它将 Web 应用程序拆分为可管理的小部分（基于用户凭据从底层传递的 JSON 配置对象将小应用程序组合在一起以构成大型应用程序）。它允许在不破坏其他现有功能的情况下向大型应用程序添加新功能。它使错误修复成为一项更集中的任务。它还创建了一种通用模式，使事前或事后的单元测试变得非常容易。

我还没有看到很多关于使用 ExtJS 4 实现模块化设计模式的文章。我从 6 年的使用 ESRI 的 Javascript API 编程中学会了如何做到这一点。它让我的生活变得轻松多了。它使企业级单页 Web 应用程序的 Javascript 开发变得有趣。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T17:30:44.690

答案主要取决于您的 Ext JS 能力水平。如果您对该框架感到满意并了解动态加载的工作原理，那么您可能会很好地使用 MVC。

但是，如果您刚开始使用 Ext JS（或者，需要任何第三方工具的更高水平的成熟度），您可能应该坚持使用普通的 Ext JS。您可以使用 MVC 做的所有事情都可以不用，而且 MVC 引入了一种新的结构化文件模式，这将增加学习曲线。

您的决定还应考虑访问 Ext JS 4.x 的更高版本。如果您能获得 4.1.3（甚至是新的 4.2 beta），那么与使用 4.1.0 或更早版本相比，使用 MVC 会取得更大的成功。根据发行说明，仅在 MVC 中就有 14 个错误在 4.1.2 和 4.1.3 中得到修复。

# python - 使用python将包含不同关键字的行提取到字典中

> ID：13972644
> 
> 赞同：0
> 
> 时间：2012-12-20T12:52:42.040
> 
> 标签：python, parsing

所以有一个输入文件到脚本，如下所示：

```
20248109|Generic|1|xxx|2|yyy|LINEA|68.66|68.67|True|2920958141272
.
.
.
21248109|Generic|3|xxx|4|www|LINEB|7618|7622|True|2920958281071.97 
```

希望python脚本遍历并将LINEA放入字典中，如下所示`{{1:[68.66,68.67]},{3:[7618,7622]}}`

据我所知，这是：

```
Key = ["LINEA", "LINEB"]
fin = open(path)
test = []
for line in fin.readlines():
    if True in [item in line for item in Key]:
       test.append(line) 
```

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T12:58:19.300

首先，您应该使用该`csv`模块：

```
import csv
with open(path, "rb") as infile:
    reader = csv.reader(infile, delimiter="|") 
```

然后，您可以遍历这些行：

```
test = []
for row in reader:
    if row[6] in Key:
        test.append({int(row[2]): row[7:9]}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T12:57:03.683

我会这样做：

```
keys = ["LINEA", "LINEB"]
with open(path) as fin
    answer = {line.partition("Generic|")[-1]:line for line in fin if any(key in line for key in keys)} 
```

要直接编辑您的答案，您实际上非常接近：

```
Key = ["LINEA", "LINEB"]
fin = open(path)
test = {} # dictionary
for line in fin.readlines():
    if True in [item in line for item in Key]:
       dict_key = line.partition("Generic|")[-1]
       test[dict_key] = line 
```

# c# - 可视报表查看器上的嵌入字体

> ID：13972645
> 
> 赞同：4
> 
> 时间：2012-12-20T12:52:42.750
> 
> 标签：c#, visual-studio, report

使用**Visual Studio 2012 Ultimate C#.NET4.5**

好吧，这已经让我的大脑腐烂了，我对一些代码进行了一些调整，以**将字体嵌入**到我的应用程序中。到目前为止效果很好，所以我的客户端机器不再需要字体。

到目前为止，这是我的代码：

```
//add font
    [DllImport("gdi32.dll", ExactSpelling = true)]
    private static extern IntPtr AddFontMemResourceEx(byte[] pbFont, int cbFont, IntPtr pdv, out uint pcFonts);
    /****/
    //Dispose Font
    [DllImport("gdi32.dll", ExactSpelling = true)]
    internal static extern bool RemoveFontMemResourceEx(IntPtr fh);
    /****/
    static private IntPtr m_fh = IntPtr.Zero;
    static private PrivateFontCollection m_pfc = null;

public Font GtSpecialFont(float size)
    {
        Font fnt = null;

        if (null == m_pfc)
        {
            Stream stmFnt = Assembly.GetExecutingAssembly().GetManifestResourceStream("NewLabelPrinter.Resources.FREE3OF9.TTF"); // always returns null?

            if (null != stmFnt)
            {
                byte[] rgbyt = new byte[stmFnt.Length];
                stmFnt.Read(rgbyt, 0, rgbyt.Length);

                uint cFonts;
                AddFontMemResourceEx(rgbyt, rgbyt.Length, IntPtr.Zero, out cFonts);

                IntPtr pbyt = Marshal.AllocCoTaskMem(rgbyt.Length);
                if (null != pbyt)
                {
                    Marshal.Copy(rgbyt, 0, pbyt, rgbyt.Length);
                    m_pfc = new PrivateFontCollection();
                    m_pfc.AddMemoryFont(pbyt, rgbyt.Length);
                    Marshal.FreeCoTaskMem(pbyt);

                }
            }
        }
        try
        {
            if (m_pfc.Families.Length > 0)
            {
                fnt = new Font(m_pfc.Families[0], size);
            }
        }
        catch (Exception rdf)
        {
            MessageBox.Show("", rdf.ToString());
        }

        return fnt;
    }

 private void myFont()
    {
        txtBarCal.Font = GtSpecialFont(48.0f);
        txtBarCodeOLD.Font = GtSpecialFont(48.0f);
        txtBarCV.Font = GtSpecialFont(48.0f);
        txtBarBK.Font = GtSpecialFont(48.0f);
        txtNewBar.Font = GtSpecialFont(48.0f);
    } 
```

正如你所看到的，这段代码非常好，我很喜欢它完美地工作。现在我的表单终于可以在我的客户不需要它们的情况下拥有字体了。

有一个小问题，我到底如何使用它来设置 Visual Studio**报告文本框字体**？？？？报告没有代码，所以我完全不知所措！

好吧，我希望某个地方的某个人知道一些事情，我能想到的唯一事情就是与使用表达式和/或可能的参数有关。

非常感谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T22:48:31.750

你有一些机会来完成这项工作。您的代码使该字体可用于任何使用 GDI 呈现的代码以及任何使用 GDI+ 呈现的代码。由于 GDI 可能是 ReportViewer 用来呈现报表的一个，它是一段相当古老的代码。唯一真正的要求是确保此代码在显示报告之前运行。

但是，出于显而易见的原因，您不能依赖的一件事是您的代码返回的字体。要解决此问题，您必须通过姓氏来引用报告中的字体。为了使它工作*，*您必须在您的开发机器上实际安装字体，以便您可以在报表设计器中选择它。在用户的机器上，该字体名称应该足以从内存字体中选择字体。

没有保证，只有不错的赔率。

请确保您修复了此代码中的错误，这也可能是您在报告中遇到问题的原因，调用 AddMemoryFont() 后释放字体的内存是不正确的。只要应用程序可以使用该字体，您就必须保留它。故障模式非常不稳定，因为它很有可能不被注意到，背景答案[就在这里](https://stackoverflow.com/a/11180350/17034)。简而言之：只是不要调用 FreeCoTaskMem()。窗户会清理干净。

# java - 在活动中设置计时器的最有效方法

> ID：13972647
> 
> 赞同：0
> 
> 时间：2012-12-20T12:52:50.700
> 
> 标签：java, android, timer, sharedpreferences, runnable

我想要一个计时器来计算用户完成任务所需的时间。从关于 stackoverflow 的其他问题中，我设计了以下方法（参见下面的代码）。我的问题-> 有没有更有效的方法来做到这一点？好像有点麻烦。

```
 private Timer myTimer;
private SharedPreferences prefs;
private String prefName = "MyPref";
private static final String TIMER_KEY = "timer";
private static final String FINAL_TIMER_KEY = "final timer";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.crossword1);

    //Start the timer ticking
    myTimer = new Timer();
    myTimer.schedule(new TimerTask() {          
        @Override
        public void run() {
            TimerMethod();
        }

    }, 0, 1000);
}

       private void TimerMethod()
{
    this.runOnUiThread(Timer_Tick);
}

   private Runnable Timer_Tick = new Runnable() {
    public void run() {

        //here i plan on using a shared preference to keep track of the time
        //so each "Timer_Tick" would get the latest "TIMER_KEY", add a second to it 
        //and then re-store it in the shared preferences

    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:11:49.797

通过使用以下代码，您可以将时间打印为文本视图以及背景。

```
private Long startTime;
private Handler handler = new Handler();  
startTime = System.currentTimeMillis();

handler.removeCallbacks(updateTimer);
handler.postDelayed(updateTimer, 1000);

private Runnable updateTimer = new Runnable() {
    public void run() {
        final TextView time = (TextView) findViewById(R.id.timer);
        Long spentTime = System.currentTimeMillis() - startTime;
        //計算目前已過分鐘數
        Long minius = (spentTime/1000)/60;
        //計算目前已過秒數
        Long seconds = (spentTime/1000) % 60;
        time.setText(minius+":"+seconds);
        handler.postDelayed(this, 1000);
    }
}; 
```

# html - 词内断词

> ID：13972654
> 
> 赞同：5
> 
> 时间：2012-12-20T12:53:03.817
> 
> 标签：html, css

我有这个 html

```
<div class="externalWidth">
    <div class="container">
        <div class="element">this_is_a_really_long_text_without_spaces</div>
        <div class="element noWrap">:-)</div>
    </div>
</div>

<div class="externalWidth">
    <div class="container">
        <div class="element ">this is a really long text without spaces</div>
        <div class="element noWrap">:-)</div>
    </div>
</div> 
```

这个CSS

```
.externalWidth { width: 200px; }
.container { margin-bottom:10px; display:inline-table; height:40px; width:100%; }
.element { display:table-cell; }
.noWrap { white-space:nowrap; } 
```

我制作了一个[jsfiddle](http://jsfiddle.net/gurumusch/XUqSU/6/)来演示它。两个 s 中的文本`.element`都是从服务器读取并通过[knockout](http://knockoutjs.com/)绑定的。我希望它看起来如下：

*   第二个`.element`应该有尽可能多的空间
*   第一个`.element`应该有剩余空间。如果可能，它应该分成多行。

一切正常，但长词会导致整个表格扩大。如有必要，是否有可能在言语中打破？

我也尝试过`table-layout:fixed;`，但这产生了两个`100px`列。

编辑：谢谢。`word-break: break-all;`做了我需要的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T12:59:48.580

使用 CSS`word-break`属性

试试这个**[演示](http://jsbin.com/apalof/1)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T12:56:25.020

您可以“预处理”您的内容（在服务器上或在 JS 中，如果您不能在服务器上执行此操作）以将软连字符注入很长的单词中。 `&shy;`是要使用的实体，这将允许现代浏览器根据需要在软连字符处中断，但是当不需要时，字母中不会有可见的间隙。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T13:00:15.970

```
word-wrap: break-word;
word-break: break-all; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T13:09:35.700

要添加预处理选项，您可以使用 html 标签`<wbr/>`，即分词。它与软连字符 ( `&shy;`) 的作用相同，但在断开时不会添加*难看*的连字符 :)[这里有一个分叉的小提琴](http://jsfiddle.net/AF5Gn/)供您使用。

只需在每个下划线后插入标签。在 JavaScript 中：

```
str.replace(/_/, "_<wbr>"); 
```

# .net - 我可以在哪里/如何存储 SQL Server 连接字符串，以便远程应用程序可以安全地使用它？

> ID：13972655
> 
> 赞同：4
> 
> 时间：2012-12-20T12:53:08.723
> 
> 标签：.net, sql-server

我们现在在许多机器上运行 .net 应用程序。db 连接字符串存储在每个设置 XML 文件中。每个应用程序都会启动并作为第一步从其设置文件中加载此字符串。它工作得很好，但是如果我们不得不更改我们的登录信息，那么找到我们多年来存储它的所有地方将是一场噩梦。此外，对于虚拟机，我们一直在添加新机器，最好简单地部署 exes/dll 并让应用程序自动安全地获取连接字符串。

我考虑加密字符串并将其放在我们的 Web 服务器上，以便远程应用程序可以通过 http 和 dns 名称获取它并解密它，但这相当简单，因为安全性对于这条信息非常重要，所以我需要非常小心。

所以问题是，您如何安全地将连接字符串抽取到远程应用程序，以便在启动时他们会知道到达数据库？一旦他们能够做到这一点，他们就可以从数据库中的配置表中获取附加设置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T12:58:21.337

您信任系统的哪些部分？您必须 100% 信任客户端，因为一旦他们拥有连接字符串（他们必须拥有），他们就可以连接到他们想要的任何数据库。您还必须信任服务器。

所以看起来你信任每个人。这使得保护系统变得容易：无论您如何分配连接字符串，它已经是安全的。

在保存和分发密码和连接字符串时，我看到了很多迷信。许多人不愿意将它们以明文形式发送和存储。这是不合理的，因为客户最终*确实*清楚这一点。这是不可能防止的。

所以我的建议是：制作一个提供以下 API 的简单 Web 服务：

```
string GetConfigSetting(string name) 
```

客户端可以向该服务请求连接字符串。该服务非常简单，以至于它的界面可能永远不会改变。

在这种情况下，加密没有什么意义。客户端应用程序可以很容易地被反编译以访问任何解密例程。此外，客户端最终必须解密该秘密。此时，控制客户端计算机的攻击者可以明文读取秘密。

# sql-server - 存储函数返回 NULL 而不是 DATETIME

> ID：13972658
> 
> 赞同：0
> 
> 时间：2012-12-20T12:53:16.223
> 
> 标签：sql-server, sql-server-2008

我创建了以下功能

```
CREATE  FUNCTION sf_GetTrainingDate (@ID_ITEM int,@EMPLOYEE VARCHAR)
RETURNS DATETIME AS

BEGIN
 --(1)
 DECLARE @RESULT DATETIME
 DECLARE @DATE DATETIME
 DECLARE @REPEAT_INTERVAL INT 
 SET @DATE = (/*subquery returning a date in datetime format*/)
 SET @REPEAT_INTERVAL = (/*subquery returning a datetime */)
  WHILE @DATE <= getdate()
  BEGIN
  SET @DATE=dateadd(month,@REPEAT_INTERVAL,@DATE)
  IF @DATE > GETDATE()
  BREAK
  ELSE
  CONTINUE
  END
 SET @RESULT = @DATE     
 RETURN @RESULT
 --(2)
END 
```

代码工作正常，我的意思是如果我使用一些 PRINT 命令仅运行从 (1) 到 (2) 的部分来读取 @DATE 的值，一切都很好，但是当我使用存储的函数时，它返回 NULL 而不是日期.

你能帮我一把吗？

# php - Magento中的网格布局

> ID：13972662
> 
> 赞同：1
> 
> 时间：2012-12-20T12:53:31.607
> 
> 标签：php, magento, gridview

我在我的模块中创建了一个自定义选项卡并成功显示了一个网格输出，但我的问题是我们如何在一页中显示两个网格序列化程序块？我试图用这段代码调用两个序列化程序块。

```
public function customgridAction()

{
   $this->loadLayout();
    $this->getLayout()->getBlock('regionpage.productgrid')->setProductsGrid($this->getRequest()->getPost('products_grid', null));
    $this->getLayout()->getBlock('regionpage.articlegrid')->setArticlesGrid($this->getRequest()->getPost('articles_grid', null));
    $this->renderLayout();
} 
```

这就是我的布局 xml 的样子

```
<regionpage_adminhtml_regionpage_customgrid>
<block type="core/text_list" name="root">
    <block type="regionpage/adminhtml_regionpage_edit_tab_productgrid" name="regionpage.productgrid"/>
    <block type="adminhtml/widget_grid_serializer" name="regionpage_productgrid">
        <reference name="regionpage_productgrid">
            <action method="initSerializerBlock">
                <grid_block_name>regionpage.productgrid</grid_block_name>
                <data_callback>getSelectedProducts</data_callback>
                <hidden_input_name>links[productgrid]</hidden_input_name>
                <reload_param_name>products_grid</reload_param_name>
            </action>
            <action method="addColumnInputName">
                <input_name>position</input_name>
            </action>
        </reference>
    </block>
</block> 
```

```
 <regionpage_adminhtml_regionpage_customgrid>
    <block type="core/text_list" name="root">
        <block type="regionpage/adminhtml_regionpage_edit_tab_articlegrid" name="regionpage.articlegrid"/>
        <block type="adminhtml/widget_grid_serializer" name="regionpage_articlegrid">
            <reference name="regionpage_articlegrid">
                <action method="initSerializerBlock">
                    <grid_block_name>regionpage.articlegrid</grid_block_name>
                    <data_callback>getSelectedArticles</data_callback>
                    <hidden_input_name>links[articlegrid]</hidden_input_name>
                    <reload_param_name>articles_grid</reload_param_name>
                </action>
                <action method="addColumnInputName">
                    <input_name>position</input_name>
                </action>
            </reference>
        </block>
    </block>
 </regionpage_adminhtml_regionpage_customgrid> 
```

但它输出最后一个块而不是两个块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-28T05:04:49.813

好吧，我想我已经破解了。

问题似乎是当您使用包装块时

```
<block type="core/text_list" name="root"> 
```

一旦您定义了一个名称为“root”的块，如果稍后出现另一个具有相同名称的块，它将被覆盖。（如果我错了请纠正我）

您可以尝试两种解决方案。

1.  将两个 xml 合并为一个部分

这将使您的xml如下

```
<regionpage_adminhtml_regionpage_customgrid>
    <block type="core/text_list" name="root">
    <block type="regionpage/adminhtml_regionpage_edit_tab_productgrid" name="regionpage.productgrid"/>
    <block type="adminhtml/widget_grid_serializer" name="regionpage_productgrid">
        <reference name="regionpage_productgrid">
            <action method="initSerializerBlock">
                <grid_block_name>regionpage.productgrid</grid_block_name>
                <data_callback>getSelectedProducts</data_callback>
                <hidden_input_name>links[productgrid]</hidden_input_name>
                <reload_param_name>products_grid</reload_param_name>
            </action>
            <action method="addColumnInputName">
                <input_name>position</input_name>
            </action>
        </reference>
    </block>
    <block type="regionpage/adminhtml_regionpage_edit_tab_articlegrid" name="regionpage.articlegrid"/>
        <block type="adminhtml/widget_grid_serializer" name="regionpage_articlegrid">
            <reference name="regionpage_articlegrid">
                <action method="initSerializerBlock">
                    <grid_block_name>regionpage.articlegrid</grid_block_name>
                    <data_callback>getSelectedArticles</data_callback>
                    <hidden_input_name>links[articlegrid]</hidden_input_name>
                    <reload_param_name>articles_grid</reload_param_name>
                </action>
                <action method="addColumnInputName">
                    <input_name>position</input_name>
                </action>
            </reference>
        </block>
    </block>
</regionpage_adminhtml_regionpage_customgrid> 
```

2.  在第二部分中简单地替换以下部分

使用参考节点，这将使您的第二部分看起来像

```
<regionpage_adminhtml_regionpage_customgrid>
    <reference name="root">
    <block type="regionpage/adminhtml_regionpage_edit_tab_articlegrid" name="regionpage.articlegrid"/>
        <block type="adminhtml/widget_grid_serializer" name="regionpage_articlegrid">
            <reference name="regionpage_articlegrid">
                <action method="initSerializerBlock">
                    <grid_block_name>regionpage.articlegrid</grid_block_name>
                    <data_callback>getSelectedArticles</data_callback>
                    <hidden_input_name>links[articlegrid]</hidden_input_name>
                    <reload_param_name>articles_grid</reload_param_name>
                </action>
                <action method="addColumnInputName">
                    <input_name>position</input_name>
                </action>
            </reference>
        </block>
    </reference>
</regionpage_adminhtml_regionpage_customgrid> 
```

这是一个magento堆栈交换答案[https://magento.stackexchange.com/questions/3376/grid-layout-in-magento/3804#3804](https://magento.stackexchange.com/questions/3376/grid-layout-in-magento/3804#3804)

# javascript - 为每隔几秒播放的动画添加声音

> ID：13972668
> 
> 赞同：0
> 
> 时间：2012-12-20T12:54:02.700
> 
> 标签：javascript, jquery, html, css

我在下面有这个铃铛，每隔几秒就会有一次动画。

演示
[http://inspectelement.com/demos/css3/bell](http://inspectelement.com/demos/css3/bell)

代码
[http://inspectelement.com/tutorials/ring-a-bell-with-css-keyframe-animations](http://inspectelement.com/tutorials/ring-a-bell-with-css-keyframe-animations)

我想添加一个我拥有的声音铃声，并且我希望仅在每次动画开始时播放声音。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:18:18.047

尝试这个：

```
var soundFile = 'sound.wav';
playSound(soundFile);
setInterval(function () {
    playSound(soundFile);
}, 8000);

function playSound(audio) {
    var soundElement = '<audio style="display:none; width: 0px; height: 0px;" id="audioNotifier" src="' + audio + '" controls preload="auto" autobuffer></audio>';
    $('#audioContainer').html(soundElement);
    $('#audioNotifier')[0].play();
} 
```

首先是超时。每 8 秒`playSound`调用一次该函数。 `playSound`在音频容器中设置 HTML5 音频播放器并播放音频。音频容器只是一个 DOM 元素，没什么特别的。声音文件的 url 应作为参数传递给`playSound`.

# c# - 延迟函数中的 System.IO.FileNotFoundException

> ID：13972669
> 
> 赞同：1
> 
> 时间：2012-12-20T12:54:03.223
> 
> 标签：c#, exception, timer, timeout, windows-phone-8

在我的 winphone 应用程序中，我遇到了一个奇怪的情况，我得到了一个`System.IO.FileNotFoundException`与文件无关的代码。

我有一个管理延迟函数调用的类：

```
// Delayed function manager
namespace Test
{
    public static class At
    {
        private readonly static TimerCallback timer = 
            new TimerCallback(At.ExecuteDelayedAction);

        public static void Do(Action action, TimeSpan delay,
            int interval = Timeout.Infinite)
        {
            var secs = Convert.ToInt32(delay.TotalMilliseconds);
            new Timer(timer, action, secs, interval);
        }

        public static void Do(Action action, int delay, 
            int interval = Timeout.Infinite)
        {
            Do(action, TimeSpan.FromMilliseconds(delay), interval);
        }

        public static void Do(Action action, DateTime dueTime, 
            int interval = Timeout.Infinite)
        {
            if (dueTime < DateTime.Now) return;
            else Do(action, dueTime - DateTime.Now, interval);
        }

        private static void ExecuteDelayedAction(object o)
        {
            (o as Action).Invoke();
        }
    }
} 
```

还有一个管理 ProgressIndicator 状态的类：

```
namespace Test
{
    public class Indicator
    {
        public DependencyObject ThePage;
        public ProgressIndicator Progressor;
        public Indicator(DependencyObject page)
        {
            ThePage = page;
            Progressor = new ProgressIndicator();
            SystemTray.SetProgressIndicator(ThePage, Progressor);
        }

        // If set(true) then set(false) in one second to remove ProgressIndicator
        public void set(bool isOn)
        {
            Progressor.IsIndeterminate = Progressor.IsVisible = isOn; // Exception happens on this line
            if (isOn) At.Do(delegate { this.set(false); }, 1000);
        }
    }
} 
```

当我尝试`set(true)`在代码中运行方法时，出现以下异常：

```
An exception of type 'System.IO.FileNotFoundException' occurred in mscorlib.ni.dll and wasn't handled before a managed/native boundary
A first chance exception of type 'System.UnauthorizedAccessException' occurred in System.Windows.ni.dll 
```

为什么会发生这种情况，如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T12:58:11.803

看起来您的实际问题是权限，`FileNotFound`异常可能是由于无法读取文件位置目录而发生的。

我没有任何 Windows Phone 开发经验，但是，我认为无论在哪里`System.Windows.ni.dll`居住都需要比您运行应用程序的权限更高的权限。

**更新**

根据您的调用堆栈错误消息 - “*无效的跨线程访问*”，问题是您尝试从不是 UI 线程的另一个线程访问/更新 GUI 组件。尝试将您的代码更改为：

```
Deployment.Current.Dispatcher.BeginInvoke(()=>
{ 
    Progressor.IsIndeterminate = Progressor.IsVisible = isOn;
    if (isOn) 
        At.Do(delegate { this.set(false); }, 1000);
}

}); 
```

# android - 在android中删除或隐藏通知栏

> ID：13972672
> 
> 赞同：3
> 
> 时间：2012-12-20T12:54:05.160
> 
> 标签：android, notifications

我正在开发一个应用程序，当应用程序打开时，可能会显示任何未接来电通知，我如何隐藏或删除通知栏以及有什么方法可以实现它。我已经在我的应用程序中放入了如下所有代码，

```
requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                                WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

和

```
android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen" 
```

但我使用广播接收器打开一个活动文件，然后在未接来电或消息到达时看到通知

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T12:59:06.883

您可以使用以下代码：

```
public class FullScreen
    extends android.app.Activity
{
    @Override
    public void onCreate(android.os.Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                                WindowManager.LayoutParams.FLAG_FULLSCREEN);

        setContentView(R.layout.main);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T12:03:39.137

我遇到了和你一样的问题，但是我在来电和去电时都遇到了这个问题。我找到了来电/未接来电的解决方案，但还没有找到去电的解决方案。

您要做的是以下内容：

1.创建一个 BroadCastReceiver 类以收听具有最高优先级的来电：

a.在 Manifest.xml 中添加：

```
 <receiver android:name=".MyPhoneBroadcastReceiver">
        <intent-filter android:priority="99999">
            <action android:name="android.intent.action.PHONE_STATE" />
        </intent-filter>
    </receiver> 
```

b.那么类

```
@Override
public void onReceive(final Context context, Intent intent) {

    Bundle extras = intent.getExtras();

    if (extras != null) {

        String state = extras.getString(TelephonyManager.EXTRA_STATE);          
        final String incomingNumber = extras.getString("incoming_number");

        Handler callActionHandler = new Handler();

        Runnable runRingingActivity = new Runnable(){
            @Override
            public void run() {
                 //Notice the intent, cos u will add intent filter for your class(CustomCallsReceiver)
                Intent intentPhoneCall = new Intent("android.intent.action.ANSWER");
                intentPhoneCall.putExtra("INCOMING_NUM", incomingNumber);
                intentPhoneCall.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                context.startActivity(intentPhoneCall);
            }
        };
        if (state.equals(TelephonyManager.EXTRA_STATE_RINGING)) {
            //increase the delay amount if problem occur something like -the screen didn't show up- that's the key about this method(the delay).
            callActionHandler.postDelayed(runRingingActivity, 100);    
        }
        if (state.equals(TelephonyManager.EXTRA_STATE_IDLE)) {
            callActionHandler.removeCallbacks(runRingingActivity);
        }

    }
} 
```

2.a.在 Manifest.xml 文件中，为您将用作客户呼叫接收器的类添加此意图过滤器。

```
 <activity android:name="CustomCallsReceiver" android:noHistory="true" android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="android.intent.action.ANSWER" />
             <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>    
    </activity> 
```

2.b.CustomeCallsReceiver 类：

```
public class CustomCallsReceiver extends Activity {

private String TAG = "CustomCallsReceiver";
String incomingNumber, caller;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.custome_calls_receiver);

    TextView number = (TextView) findViewById(R.id.number);
    number.setGravity(Gravity.CENTER);

    incomingNumber = getIntent().getExtras().getString("INCOMING_NUM");
    caller = getCallerName(incomingNumber);

    if (caller != null) {
        number.setText(caller + "\n" + incomingNumber);  }  } 
```

3.最后当然不要忘记在 Manifest.XML 文件中添加非标题或通知栏的主题

```
 <application
    android:theme="@android:style/Theme.NoTitleBar.Fullscreen"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T12:58:56.973

您需要在 Android manifest .xml 中设置主题...。

```
 android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen" 
```

希望对你有帮助..

如果您将此设置为应用程序主题，它将使您的应用程序的所有页面生效..

```
 <application
         android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen" 
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
         > 
```

# android - 我们如何获得进度条/搜索条的结束位置？

> ID：13972676
> 
> 赞同：1
> 
> 时间：2012-12-20T12:54:15.850
> 
> 标签：android

我创建了一个音频播放器并想多次播放音频，但是一旦它第一次完成，进度条就会卡在最后。我试图通过

```
boolean atEnd = audioStreamer.getMediaPlayer().getDuration()
                - audioStreamer.getMediaPlayer().getCurrentPosition() == 0; 
```

但它每次都给假。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T13:15:26.837

您可以简单地设置`OnCompletionListener`[1]。

```
audioStreamer.getMediaPlayer().
       setOnCompletionListener(
            new MediaPlayer.OnCompletionListener() {
                  public void onCompletion(MediaPlayer mp) {
                    Log.d("MediaPlayer", "end reached");
                  }
            }
       ); 
```

[1]

> 注册在播放期间到达媒体源末尾时要调用的回调。

# google-apps-script - 使用单个按钮切换小部件可见性

> ID：13972683
> 
> 赞同：-1
> 
> 时间：2012-12-20T12:54:51.230
> 
> 标签：google-apps-script

当单击按钮时，以下代码应将在文本框中找到的真/假的倒数写回文本框 - 但它不能正常工作。它将以一种方式正常工作，但不能以另一种方式正常工作（工作的方式是最后定义的 ClickHandler）。我也尝试过使用 validateNotMatches，但没有任何乐趣。

如果我更改代码以便更新标签的文本而不是文本框的文本，那么效果很好。

我知道建议的解决方法，例如使用两个按钮，但*我只想知道我做错了什么，或者这看起来像 GAS 中的错误*。谢谢。

```
function doGet(e)
{
  var app = UiApp.createApplication();

  var tb = app.createTextBox().setText('true');
  var button = app.createButton('button');
  var label = app.createLabel().setText('-');

  button.addClickHandler(app.createClientHandler()
                  .validateMatches(tb, 'true')
                  //.forTargets(label).setText('false')
                  .forTargets(tb).setText('false')
                 );
  button.addClickHandler(app.createClientHandler()
                  .validateMatches(tb, 'false')
                  //.forTargets(label).setText('true')
                  .forTargets(tb).setText('true')
                 );

  return app.add(app.createHorizontalPanel().add(tb).add(button).add(label));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T23:48:34.133

这不是错误......两个事件都会触发。验证发生在小部件的当前状态，而不是触发事件时的状态，因此在您将其翻转为“false”后，第二个处理程序将验证并将其翻转回“true”。

# python - Python中的国际字符

> ID：13972687
> 
> 赞同：2
> 
> 时间：2012-12-20T12:55:19.420
> 
> 标签：python, encoding, utf-8

我目前正在编写一个 Python 脚本，该脚本获取日志文件列表（来自搜索引擎）并生成一个包含其中所有查询的文件，以供以后分析。该脚本的另一个特点是它删除了最常用的单词，我也实现了这一点，但我遇到了一个我似乎无法克服的问题。只要查询不包含特殊字符，单词的删除就会按预期工作。由于搜索日志使用丹麦语，因此字符 æ、ø 和 å 将定期出现。

搜索主题我现在知道我需要将这些编码为 UTF-8，我在获取查询时正在这样做：

```
tmp = t_query.encode("UTF-8").lower().split() 
```

t_query 是查询，我将其拆分以便稍后将每个单词与我的禁用单词列表进行比较。如果我不使用编码，我会收到错误：

```
UnicodeDecodeError: 'ascii' codec can't decode byte 0xe6 in position 1: ordinal not in range(128) 
```

**编辑：**我也尝试使用解码，但得到以下错误：

```
UnicodeEncodeError: 'ascii' codec can't encode character u'\xa7' in position 3: ordinal not in range(128) 
```

我遍历这样的词：

```
for i in tmp:
    if i in words_to_filter:
        tmp.remove(i) 
```

如前所述，这对于不包括特殊字符的单词非常有效。我尝试将 i 与当前的禁用词一起打印，并将得到例如：

```
fÃ¦rdelsloven - færdelsloven 
```

其中第一个单词是 tmp 中的第 i 个元素。禁言词中的最后一个词。显然出了点问题，但我无法找到解决方案。我已经尝试了很多在谷歌和这里找到的建议，但到目前为止没有任何效果。

**编辑 2：**如果有所不同，我尝试在使用和不使用编解码器的情况下加载日志文件：

```
with codecs.open(file_name, "r", "utf-8") as f_src:
    jlogs = map(json.loads, f_src.readlines()) 
```

如果重要的话，我正在 Windows 环境中运行 Python 2.7.2。该脚本应该能够在其他平台（即 Linux 和 Mac OS）上运行。

如果你们中的一个人能够帮助我，我将不胜感激。

最好的问候卡斯帕

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T12:57:59.323

如果你正在阅读文件，你想要`decode`它们。

```
tmp = t_query.decode("UTF-8").lower().split() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T10:15:39.077

给定一个每行带有 json 对象的 utf-8 文件，您可以读取所有对象：

```
with open(filename) as file:
    jlogs = [json.loads(line) for line in file] 
```

除了嵌入换行符处理之外，上面的代码应该产生与你相同的结果：

```
with codecs.open(file_name, "r", "utf-8") as f_src:
    jlogs = map(json.loads, f_src.readlines()) 
```

此时*所有字符串`jlogs`都是 Unicode，你不需要做任何事情来处理“特殊”字符*。只要确保您没有在代码中混合字节和 Unicode 文本。

*   从字节中获取 Unicode 文本：`some_bytes.decode(character_encoding)`
*   从 Unicode 文本中获取字节：`some_text.encode(character_encoding)`

不要编码字节/解码 Unicode。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T13:55:32.567

如果编码正确并且您只想忽略可以使用的意外字符`errors='ignore'`或`errors='replace'`传递给`codecs.open`函数的参数。

```
with codecs.open(file_name, encoding='utf-8', mode='r', errors='ignore') as f:
    jlogs = map(json.loads, f.readlines()) 
```

文档中的详细信息：http: [//docs.python.org/2/howto/unicode.html#reading-and-writing-unicode-data](http://docs.python.org/2/howto/unicode.html#reading-and-writing-unicode-data)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-02T11:18:45.153

我终于解决了。由于 Lattyware Python 3.x 似乎做得更好。在更改版本并将 Python 文件编码为 Unicode 后，它按预期工作。

# angularjs - 如何使用角度过滤器根据复选框值过滤文本？

> ID：13972690
> 
> 赞同：1
> 
> 时间：2012-12-20T12:55:28.327
> 
> 标签：angularjs

```
View By :
<input type="checkbox" name="filter" />All
<input type="checkbox" name="filter" />name
<input type="checkbox" name="filter" />type

<span class="displayphones">{{ phone | filter:? }}</span> 
```

这里我有 3 个复选框，默认情况下它必须显示所有。在选择复选框时，它

应该显示适当的结果，但我不知道如何将复选框值传递给过滤器而不像这样重复 ng-model

```
View By :
<input type="checkbox" name="filter" ng-model="all" />All
<input type="checkbox" name="filter" ng-model="name" />name
<input type="checkbox" name="filter" ng-model="type" />type

<span class="displayphones">{{ phone | filter:all:name:type }}</span> 
```

有没有可能以其他方式做到这一点？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T15:47:54.377

您可以使用 data-ng-true-value 来完成您想要的。它甚至可以用于复选框：

```
<input type="checkbox" data-ng-model="myCheckboxGroup" data-ng-true-value="1" /><br >
<input type="checkbox" data-ng-model="myCheckboxGroup" data-ng-true-value="2" /><br >
<input type="checkbox" data-ng-model="myCheckboxGroup" data-ng-true-value="3" /><br >

{{myCheckboxGroup}} 
```

这里是它的文档：http://docs.angularjs.org/api/ng.directive: [input.checkbox](http://docs.angularjs.org/api/ng.directive:input.checkbox)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T22:37:32.320

控制器：

```
function MyCtrl($scope) {
   $scope.filters = [ 
      {name: 'All',  selected: false},
      {name: 'name', selected: false},
      {name: 'type', selected: false}];    
}​ 
```

看法：

```
<div ng-controller="MyCtrl">
   <div ng-repeat="filter in filters">
      <input type="checkbox" ng-model="filter.selected" name="filter">{{filter.name}}
   </div>
   debug: {{filters}}
   <br><span class="displayphones">{{ phone | customFilter:filters }}</span> 
```

我不知道你的手机数据是什么样的，所以过滤器的实现留给读者练习：

```
myApp.filter('customFilter', function() {
    return function(phone, filters) {
       ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T14:40:35.957

您没有正确使用它的原因可能是因为您没有为您的用例使用正确的 UI 元素。正确的 UI 元素将是单选输入而不是复选框。单选组是一个开关，而复选框不是。

如果您使用无线电输入，同样很容易实现：

```
<input type="radio" ng-model="filterType" value="All" />All
<input type="radio" ng-model="filterType" value="name" />name
<input type="radio" ng-model="filterType" value="type" />type

<span class="displayphones">{{ phone | filter:filterType }}</span> 
```

这就对了。现在你可以走了。希望这可以帮助。如果您真的想使用复选框，那么它会比这更复杂一些。

# svn - svn-dump-reloc 在 windows 命令提示符下使用

> ID：13972693
> 
> 赞同：0
> 
> 时间：2012-12-20T12:55:37.067
> 
> 标签：svn

我想在 SVNDUMP 中使用“svn-dump-reloc”命令进行重组。我可以从以下位置获取脚本， [http://search.cpan.org/~salva/SVN-DumpReloc-0.02/bin/svn-dump-reloc](http://search.cpan.org/~salva/SVN-DumpReloc-0.02/bin/svn-dump-reloc)

我想知道，如何部署这个脚本来使用这个命令

或者

请让我知道，在 Windows 环境中使用此命令“svn-dump-reloc”的任何其他来源。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T06:20:40.900

我得到的分辨率如下：

当前文件夹结构如下：

项目 -- 分支 -- 标签 -- 树干 -- SubProject1 > (文件和文件夹) -- SubProject2 > (folder1, folder2) -- ReleaseNotes

像标准SVN布局一样重组如下：

项目--分支--标签--trunk (移动到trunk) SubProject1 > (files and folder) (移动到trunk) SubProject2 > (folder1, folder2) (移动到trunk) ReleaseNotes

请按照以下步骤操作：

1.  下载“SVN-DumpReloc-0.02”安装“ActivePerl 5.16.1 Build 1601”MSI

2.  在 GIT MingW 编辑器中，执行命令 "cd c:/SVN-DumpReloc-0.02" 执行命令 "perl Makefile.PL" 结果："writing Make file for SVN::DumpReloc"

注意：之后，应该必须执行“make install”命令，但它会引发 try rule 的错误......等等......并且没有工作。因此，可以跳过执行“make install”（下载的实用程序“GNUWin32”允许在 Windows 中执行 make 命令）

3.

=>cat svn.dump | "c:/SVN-DumpReloc-0.02/bin/svn-dump-reloc" SubProject1 主干/SubProject1 > svn.fixed.dump

=>cat svn.fixed.dump | "c:/SVN-DumpReloc-0.02/bin/svn-dump-reloc" SubProject2 主干/SubProject2 > svn1.fixed.dump

=>cat svn1.fixed.dump | "c:/SVN-DumpReloc-0.02/bin/svn-dump-reloc" 发行说明 trunk/SubProject2 > svn2.fixed.dump

为每个重定位迭代.. 只需确保为“svn-dump-reloc”提供完整路径。

4\. 现在，转储文件已更新以重组文件夹，您可以通过将转储加载到 SVN 来验证

谢谢达瓦尔索尼

# java - 如何实现自定义 nebula GridHeaderRenderer 实现？

> ID：13972698
> 
> 赞同：1
> 
> 时间：2012-12-20T12:55:52.383
> 
> 标签：java, grid, swt, jface, nebula

这里似乎没有足够的文档可以使用，当我创建一个 GridHeaderRenderer 时，有三种方法可以实现，但是 measure 和 notify 方法对我来说是一个谜，而在油漆上我不知道如何我必须使用的空间很大。

我知道用户可以更改标头的大小，那么我如何立即找出实际大小，我从“测量”中提供什么以及通知呢？

如果有人有示例实现，会有很大帮助吗？我必须绘制和图像并写入标题文本。

# android - 在android中解析Plist文件

> ID：13972706
> 
> 赞同：1
> 
> 时间：2012-12-20T12:56:39.810
> 
> 标签：android

在我的项目中使用 android 解析 plist 文件。我从互联网上下载了很多示例，还显示了堆栈溢出的答案。

但我无法解析我的 plist 文件。

请告诉我如何在 droid 中开始 plist 解析？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-17T09:11:42.253

您可以使用[xmlwise](https://code.google.com/p/xmlwise/)，它使用起来相当简单。

```
Map<String, Object> properties = Plist.fromXml(xmlString); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T12:57:49.390

有一个名为[android-plist-parser](https://github.com/tenaciousRas/android-plist-parser)的解析器库。

示例代码（来自项目测试）：

```
PListXMLHandler handler = new PListXMLHandler();
parser.setHandler(handler);
parser.parse(/* plist content as String */);
PList actualPList = ((PListXMLHandler) parser.getHandler()).getPlist();
// use actualPList 
```

# php - WEBPAGE 在 form_validation set_Rules codeigniter 之后加载错误

> ID：13972707
> 
> 赞同：0
> 
> 时间：2012-12-20T12:56:41.730
> 
> 标签：php, codeigniter, validation

在 form_validation 中的 set_rules 之后是可能的，如下所示：

```
$this->form_validation->set_rules('empfact', 'Nome da Empresa','trim|required|xss_clean'); 
```

这个动作修改了我的网页布局？无论如何这可能吗？

因为我遇到了问题，并且在此操作（set_rules）之后出现了问题。

问题是：在我提交表单和 set_rules 后，我的网页在页面顶部加载一个空格，高度为 +/- 10 像素。

另外：在 IE 中（仅在 IE 中）执行此操作后，我的网页加载时没有一些图像并左对齐。

有任何想法吗？

表单控制器

```
<?php

class Form extends CI_Controller {

function __construct()
{
    parent::__construct();
}

function index()
{

    $this->form_validation->set_rules('email', 'Email', 'trim|required|valid_email|matches[emailconf]|callback_value_email|xss_clean');
$this->form_validation->set_rules('emailconf', 'Confirmação de Email', 'trim|required|xss_clean');
    $this->form_validation->set_rules('passwd', 'Password', 'trim|required|matches[passconf]|xss_clean');
    $this->form_validation->set_rules('passconf', 'Password Confirmation', 'trim|required|xss_clean');
    $this->form_validation->set_rules('empfact', 'Nome da Empresa', 'trim|required|xss_clean');
    $this->form_validation->set_rules('contr', 'Nº Contribuinte', 'trim|required|xss_clean');
    $this->form_validation->set_rules('nome', 'Nome', 'trim|required|xss_clean');
    $this->form_validation->set_rules('apelido', 'Apelido', 'trim|required|xss_clean');
    $this->form_validation->set_rules('morada', 'Morada', 'trim|required|xss_clean');
    $this->form_validation->set_rules('codpostal', 'Código Postal', 'trim|required|xss_clean');
    $this->form_validation->set_rules('localidade', 'Localidade', 'trim|required|xss_clean');
    $this->form_validation->set_rules('telefone', 'Telefone', 'trim|required|xss_clean');
    $this->form_validation->set_rules('telemovel', 'Telemóvel', 'trim|required|xss_clean');
    if ($this->form_validation->run() == FALSE)
    {
        $this->load->view('header');
        $this->load->view('myform');
        $this->load->view('footer');
    }
    else
    {
        $this->load->view('header');
        $this->load->view('formsuccess');
        $this->load->view('footer');
    }
}

public function value_email($str)
{
    $this->load->model('carfinder_model');

    // Validate exists
    $result = $this->carfinder_model->confirmExistence('email', $str);

    // Now we verify the result
    if(! $result)
    {
            return TRUE;
        }
        else
        {
            $this->form_validation->set_message('value_email', 'O e-mail escolhido já está registado');
            return FALSE;
        }
    }   
}
?> 
```

我的表单视图

```
<!-- content -->
<section id="content">
<div class="wrapper">
    <div class="indent-bot-12">
        <h2 class="indent-bot-2">Registe-se agora no CarFinder-PRO.pt</h2>
        <ul class="list-box">
            <li>
                <h3 class="indent-bot-7">Para utilizar os serviços CarFinder-PRO.pt, é necessário registar-se. O registo permite-lhe aceder à listagem dos veículos, reservá-los e encomendá-los. O registo é rápido e gratuito.</h3>
                <p class="indent-bot-15">*O registo é exclusivo a comerciantes profissionais. Após o registo a sua conta só será ativada depois de passar o processo de validação. Todos os campos são de preenchimento obrigatório.</p>
            </li>
            <?php if(validation_errors())
            {
                echo '<li>';
                    echo '<div class="val-errors">';
                            echo '<div class="val-image">';
                                echo '<img src="../../images/stopp.png" alt="" />';
                            echo '</div>';
                            echo '<div class="val-text">';
                                echo validation_errors();
                            echo '</div>';
                    echo '</div>';
                echo '</li>';
            }?>
            <li>
                <?php echo form_open('form'); ?>
                <p class="indent-bot-15">*Dados de Acesso</p>

                    <b><label for="email"><?php if(form_error('email')) { echo '<div class="imgset"><img src="../../images/markerred.jpg" alt="" /></div>'; } ?> Email</label></b>
                    <input type="text" name="email" value="<?php if(! form_error('email')) { echo set_value('email'); } ?>" size="40" />
                    <br />

                    <b><label for="emailconf"><?php if(form_error('email')) { echo '<div class="imgset"><img src="../../images/markerred.jpg" alt="" /></div>'; } ?> Confirmar Email</label></b>
                    <input type="text" name="emailconf" value="<?php if(! form_error('email')) { echo set_value('emailconf'); } ?>" size="40" />
                    <br />
                    <!-- <h5>Username</h5>
                    <php echo form_error('username'); ?>
                    <input type="password" name="username" value="<php echo set_value('username'); ?>" onfocus='this.value="";' onblur='if (this.value=="") this.value = "E-mail:";' size="50" /> -->

                    <b><label for="passwd"><?php if(form_error('passwd')) { echo '<div class="imgset"><img src="../../images/markerred.jpg" alt="" /></div>'; } ?> Password</label></b>
                    <input type="password" name="passwd" value autocomplete="off" size="25" />
                    <br />

                    <b><label for="passconf"><?php if(form_error('passwd')) { echo '<div class="imgset"><img src="../../images/markerred.jpg" alt="" /></div>'; } ?> Confirmar Password</label></b>
                    <input type="password" name="passconf" value autocomplete="off" size="25" />
                    <br />
            </li>
            <li>
            <p class="indent-bot-15">*Dados Pessoais</p>
                    <b><label for="empfact"><?php if(form_error('empfact')) { echo '<div class="imgset"><img src="../../images/markerred.jpg" alt="" /></div>'; } ?> Nome da Empresa</label></b>
                    <input type="text" name="empfact" value="<?php if(! form_error('empfact')) { echo set_value('empfact'); } ?>" size="40" />
                    <br />

                    <b><label for="contr"><?php if(form_error('contr')) { echo '<div class="imgset"><img src="../../images/markerred.jpg" alt="" /></div>'; } ?> Nº Contribuinte</label></b>
                    <input type="text" name="contr" value="<?php if(! form_error('contr')) { echo set_value('contr'); } ?>" size="25" />
                    <br />

                    <b><label for="nome"><?php if(form_error('nome')) { echo '<div class="imgset"><img src="../../images/markerred.jpg" alt="" /></div>'; } ?> Nome</label></b>
                    <input type="text" name="nome" value="<?php if(! form_error('nome')) { echo set_value('nome'); } ?>" size="40" />
                    <br />

                    <b><label for="apelido"><?php if(form_error('apelido')) { echo '<div class="imgset"><img src="../../images/markerred.jpg" alt="" /></div>'; } ?> Apelido</label></b>
                    <input type="text" name="apelido" value="<?php if(! form_error('apelido')) { echo set_value('apelido'); } ?>" size="40" />
                    <br />

                    <b><label for="morada"><?php if(form_error('morada')) { echo '<div class="imgset"><img src="../../images/markerred.jpg" alt="" /></div>'; } ?> Morada</label></b>
                    <input type="text" name="morada" value="<?php if(! form_error('morada')) { echo set_value('morada'); } ?>" size="40" />
                    <br />

                    <b><label for="codpostal"><?php if(form_error('codpostal')) { echo '<div class="imgset"><img src="../../images/markerred.jpg" alt="" /></div>'; } ?> Código Postal</label></b>
                    <input type="text" name="codpostal" value="<?php if(! form_error('codpostal')) { echo set_value('codpostal'); } ?>" size="40" />
                    <br />

                    <b><label for="localidade"><?php if(form_error('localidade')) { echo '<div class="imgset"><img src="../../images/markerred.jpg" alt="" /></div>'; } ?> Localidade</label></b>
                    <input type="text" name="localidade" value="<?php if(! form_error('localidade')) { echo set_value('localidade'); } ?>" size="40" />
                    <br />

                    <b><label for="telefone"><?php if(form_error('telefone')) { echo '<div class="imgset"><img src="../../images/markerred.jpg" alt="" /></div>'; } ?> Telefone</label></b>
                    <input type="text" name="telefone" value="<?php if(! form_error('telefone')) { echo set_value('telefone'); } ?>" size="25" />
                    <br />

                    <b><label for="telemovel"><?php if(form_error('telemovel')) { echo '<div class="imgset"><img src="../../images/markerred.jpg" alt="" /></div>'; } ?> Telemóvel</label></b>
                    <input type="text" name="telemovel" value="<?php if(! form_error('telemovel')) { echo set_value('telemovel'); } ?>" size="25" />
                    <br />

                <br /><br />*Ao clicar no botão Registar, declara que aceita as <a href="#">Condições Gerais de Utilização</a> da CarFinder bem como os seus <a href="#">Termos e Condições</a>.
                <br /><br />
                <div><input class="button-registo" type="submit" value="Registar" /></div>
                <br />
                </form>
            </li>
        </ul>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T22:14:08.083

最后，我发现了问题。这是一个非常愚蠢的问题，但也许这个 POST 将来对其他程序员有用。

我选择在 NOTEPAD++ 中以 UTF-8（标准为 ANSI）进行文本编码<-这就是问题所在。

现在一切正常，

泰所有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T17:25:35.123

我相信你会在你的 CSS 中找到答案/问题。

您还根据 form(myform) 是否经过验证加载两个不同的视图。因此，您实际上并没有在提交表单时重新加载，而是在加载新视图（formsuccess），并且可能引入了不同的元素嵌套、CSS 等。

通过仅加载一个视图 (myform) 来调试您的页面。暂时关闭条件语句，然后担心 myform。CodeIgniter 中的表单验证可以通过一个视图来完成。这就是为什么用户手册建议`php`我在您的标记中看到的那些内联函数调用。尝试让该页面正常工作。然后担心转储到“成功”页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T13:54:28.530

也许你可以留下一个空的“div”来保存这样的视图中的错误：

```
<div class="container">
    <?php echo form_error('empfact','<div class="error">','</div>'); ?>
</div> 
```

# jboss - JBoss 6.0.0 战争重新部署期间空白页 3 秒

> ID：13972708
> 
> 赞同：1
> 
> 时间：2012-12-20T12:57:00.013
> 
> 标签：jboss, delay, war, web-deployment, jboss-web

我有以下问题。我正在使用 Jboss 6.0.0。我需要每天更新 24/7 运行的应用程序（仅 WAR 文件）。在重新部署期间，服务器以空白页（0 字节）响应。大约需要 3 秒。

> 13:25:39,001 INFO [org.jboss.web.tomcat.service.deployers.TomcatDeployment] 取消部署，ctxPath=/ 13:25:42,021 INFO [org.jboss.web.tomcat.service.deployers.TomcatDeployment] 部署，ctxPath =/

这显然是最不利的情况，因为此时发送表单的用户会丢失所有输入的数据。

我试图找到一个设置各种配置选项（autoDeploy、unloadDelay、可重新加载的上下文属性）的解决方案，但没有成功。

是否有我遗漏的东西，或者这是正常行为，服务器不区分重新部署和单独的取消部署和部署操作。如果它能够区分它们并且容器在重新部署期间将请求排队直到初始化 servlet 的下一个实例，那将是理想的。

环境细节：JBoss 6.0.0 Final 单实例（也在 Tomcat 7.0.28 上尝试过 - 效果相同） 2 x 四核 32 gb ram

WAR：虚拟主机上的网络上下文 War 文件大小 ~ 20mb 类数 ~ 1,5k 文件数 ~ 7k

我试图清理文件，我下降到 700kb（我删除了所有的 img / js / css 等和所有的 lib/），时间缩短到 ~ 2 秒。

提前致谢

# yii - 使寻呼机出现在列表顶部

> ID：13972709
> 
> 赞同：2
> 
> 时间：2012-12-20T12:57:02.213
> 
> 标签：yii

在 YII 我有：

```
$dataProvider = new CArrayDataProvider ($auctions , 
  array(
    'pagination'=>array(
      'pageSize'=> 12,
  ),
));

$this->widget('zii.widgets.CListView', array(
  'dataProvider'=> $dataProvider,
  'itemView' => '_frontpageAuction',
  'summaryText' => '',
  'emptyText' => '
    No auctions available to display.
  ', 
)); 
```

如何更改它以使寻呼机不会出现在网格的底部，而是出现在顶部？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T13:47:05.390

使用[`template`CListView 的属性](http://www.yiiframework.com/doc/api/1.1/CListView#template-detail)：

```
$this->widget('zii.widgets.CListView', array(
    'dataProvider'=> $dataProvider,
    'itemView' => '_frontpageAuction',
    'summaryText' => '',
    'emptyText' => '
          No auctions available to display.
    ',
    'template'=>'{pager}{items}' 
)); 
```

* * *

还：

> 这些标记被识别：{summary}、{sorter}、{items} 和 {pager}。它们将被摘要文本、排序链接、数据项列表和寻呼机替换。

[CGridView 也`template`](http://www.yiiframework.com/doc/api/1.1/CBaseListView#template-detail)有一个类似的属性：

# c++ - 如何发送矢量 > 通过 MapViewOfFile

> ID：13972712
> 
> 赞同：1
> 
> 时间：2012-12-20T12:57:04.317
> 
> 标签：c++, winapi, file-mapping, filemap

我在父进程中有以下代码：

```
vector<vector<double> > matrix(n); /* matrix NxM */
/* pushing data */
HANDLE hMapping = CreateFileMapping(INVALID_HANDLE_VALUE,
    0, PAGE_READWRITE, 0, 2*sizeof(int) + sizeof(double)*n*m, lpName);

LPVOID lp = MapViewOfFile(hMapping, FILE_MAP_WRITE, 0, 0, 0);

mat_tmp* tmp = (mat_tmp*)lp;
tmp->n = n; tmp->m = m;
tmp->vv = vector<vector<double> >(matrix.begin(), matrix.end()); 
```

在一个子进程中，我试图接收这个向量>，但我的子进程每次都会终止。

```
LPTSTR lpName = _tcsdup(TEXT(map_name));
HANDLE hMapping = CreateFileMapping(INVALID_HANDLE_VALUE,
    0, PAGE_READWRITE, 0, 2*sizeof(int) + sizeof(double)*n*m, lpName);
LPVOID lp = MapViewOfFile(hMapping, FILE_MAP_WRITE, 0, 0, 0);

mat_tmp * tmp = (mat_tmp*)lp;
vector<vector<double> > matrix(tmp->vv.begin(), tmp->vv.end()); 
```

当我尝试使用`matrix`子进程中的数据时发生错误。小结构如下：

```
struct mat_tmp
{
    int n; int m; vector<vector<double> > vv;
}; 
```

如何在孩子身上正确接收我的载体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:15:21.007

它不会按照您目前的方式工作。映射的内存将包含 n 和 m 以及向量类的内部结构，这可能是几个指针，具体取决于您的 STL 实现。紧随其后的是一堆垃圾。您将无法从其他进程安全地访问这些指针，因为它位于不同的地址空间中。

您需要将向量指向的内存实际复制到映射内存中并在另一侧重建向量。

此外，您需要的内存大小不会是 sizeof(int)*n*m。看起来你想在结构中有 2 个整数 n & m 和一个 n*m 双打的集合。

因此，分配 2*sizeof(int) + n*m*sizeof(double)。将 n & m 复制到内存中，然后将矩阵的行复制到其中。在接收端，读取 n & m，然后将数据反序列化为向量向量。

也许使结构像这样：

```
struct mat_tmp
{
    int n; int m; double vv[1];
}; 
```

然后，直接复制到共享内存中：

```
double* dst = tmp.vv;
for (size_t y = 0; y < matrix.size(); ++y) {
   memcpy(dst, &(matrix[y][0]), matrix[y].size()*sizeof(double));
   dst += matrix[y].size();
} 
```

另一方面，

```
dst_matrix.resize(n);
for (size_t y = 0; y < n; ++y) {
    dst_matrix[y].resize(m);
    memcpy(&(dst_matrix[y][0]), tmp + (y * m), m * sizeof(double));
} 
```

所有未经测试，可以做得更优化，但希望它更好地解释你需要做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-14T02:00:12.200

您需要覆盖向量的默认分配器对象，以便它完全在 MapView 的内存空间中工作，因为默认分配器对象将使用堆内存进行所有分配。Bjarne Stroustrup（C++ 的创建者）写了一篇非常古老的 Dr.Dobbs 文章，它准确地讲述了如何完成这项任务：

[http://www.drdobbs.com/creating-stl-containers-in-shared-memory/184401639](http://www.drdobbs.com/creating-stl-containers-in-shared-memory/184401639)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T13:26:18.930

这不起作用，向量只会保存一个指针，实际数据是堆分配的。您的 memcpy 仅复制指针，这在收件人一侧无效。

# php - 上传、处理、存储和交付用户提供的文件和图像

> ID：13972714
> 
> 赞同：6
> 
> 时间：2012-12-20T12:57:10.390
> 
> 标签：php, javascript, jquery, html, ajax

在 Web 开发人员生活的后期或早期，您将不得不处理用户上传的文件和图像。

常见问题：

**如何上传？**

现代网络浏览器和技术允许通过多种方式将用户提供的文件上传到我的服务器。什么是最佳实践，我必须考虑什么？

**我该如何处理？**

上传完成后，我需要了解安全性以及文件的进一步处理

**我如何存储和交付？**

是否有关于如何存储上传文件的最佳实践？

免责声明：我在下面的答案中花了将近 30 分钟，最初的问题已被删除，所以我决定询问用户在处理用户提供的文件时可能面临的一般问题。看我的回答，您可以自由贡献并添加您的想法和经验

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-20T12:57:37.460

每个步骤都没有“最佳”方法，而是各种技术和库中的一大堆既定方法和最佳实践，可以帮助您实现用户友好的上传、安全性和速度。

对于另一个不幸被删除的问题，我写了这个小指南。

用户贡献的文件或图像在其生命周期中经历了几个阶段：

1.  上传本身
2.  验证
3.  存储处理（例如类型转换、调整大小、生成缩略图……）
4.  存储
5.  前端交付

这将解决所有步骤并尽可能提供示例

**1\. 上传**

现代网络浏览器提供了几种上传文件的方法。

最简单的方法是创建一个带有简单`<input type="file" name="userFile" />`标签的表单。提交表单后，文件将使用 POST 发送，并且可以使用PHP 中的[$_FILES](http://php.net/manual/en/reserved.variables.files.php) [超全局访问](http://php.net/manual/en/language.variables.superglobals.php)

**1.1。HTML 中的简单表单**

```
<form action="upload.php" method="post" enctype="multipart/form-data">
    <input type="file" name="userFile1" />
    <input type="file" name="userFile2" />
    <input type="submit" value="upload files" />
</form> 
```

当提交表单时，会向upload.php 发送一个POST 请求。这种上传方式不是很友好。您的用户将看不到上传的任何进度，并且上传多个文件会很痛苦

**1.2\. Javascript ajax 上传**

在此解决方案中，POST 使用 javascript 异步完成

[http://www.saaraan.com/2012/05/ajax-image-upload-with-progressbar-with-jquery-and-php](http://www.saaraan.com/2012/05/ajax-image-upload-with-progressbar-with-jquery-and-php)

**1.3\. HTML 5 上传**

现代浏览器支持 HTML5，它允许非常漂亮且用户友好的上传遮罩，带有进度条和预览 - 边框是您自己的创意

例如，我非常喜欢这个演示：[http ://html5demos.com/dnd-upload](http://html5demos.com/dnd-upload)

**在服务器端**

无论您决定使用哪种上传技术，上传最终都会以 HTTP POST 的形式发送到您的脚本。所有进一步的处理都将在服务器上完成。

PHP 将文件复制到临时路径 ( [upload_tmp_dir](http://php.net/manual/en/ini.core.php#ini.upload-tmp-dir) )

您可以在 php.ini 中或使用[ini_set](http://php.net/manual/en/function.ini-set.php)即时调整一些其他与上传相关的设置：http : [//php.net/manual/en/ini.core.php#ini.sect.file-上传](http://php.net/manual/en/ini.core.php#ini.sect.file-uploads)

上传.php

```
<pre>
<?php
print_r( $_FILES ); 
```

这是`$_FILES`成功上传后超全局的样子。

*   名称：原名
*   type：浏览器提供的 mime 类型
*   大小：以字节为单位的大小
*   tmp_name：服务器上的临时文件名
*   错误：[此处描述的](http://php.net/manual/en/features.file-upload.errors.php)错误代码，当一切都进入文件时为 0

每个文件都有自己的索引

```
Array
( 
    [userFile1] => Array
    (
         [name] => i_love_ponies.png
         [type] => image/png
         [size] => 42233
         [tmp_name] => /tmp/_x123tfsdayx134
         [error] => 0
    )
    [userFile2] => Array
    (
         [name] => ponies_run_my_server.png
         [type] => image/png
         [size] => 12325
         [tmp_name] => /tmp/_x3123asdad3ssy
         [error] => 0
    )
) 
```

**一些额外的提示**

如果您期待大文件，请考虑 webserver 和 php 执行超时。如果上传需要 10 分钟，您不希望您的用户最终出错。

在 PHP 中，您可以增加[max_execution_time](http://php.net/manual/en/info.configuration.php#ini.max-execution-time)

**2\. 验证**

您可能想问的问题

***我是否只想允许特定文件 - 我收到什么样的文件？***

您在`$_FILES`数组中找到的类型由浏览器设置。如果您想确定上传的是哪种类型，您可以使用PHP的[fileinfo 扩展名。](http://php.net/manual/en/function.finfo-file.php)

此示例将检查上传本身是否成功，并将允许类型的文件写入新数组以进行进一步处理

```
$allowedTypes = array(
   'image/png'
   'image/gif'
   'image/jpeg'
);

$useFiles = array();

$finfo = new finfo(FILEINFO_MIME_TYPE);
foreach ( $_FILES as $index => $file )
{
    if ( $file['error'] === UPLOAD_ERR_OK ) {
        $type = $finfo->file( $file['tmp_name'] );
        if ( in_array( $type, $allowedTypes ) ) {
             $useFiles[$index] = $file;
        }
    }
} 
```

***我要设置最大文件大小 - 大小是多少？***

在这种情况下，您可以放心地依赖该`$_FILES['key']['size']`值，即字节大小。您不应该仅仅依赖客户端设置的文件大小限制

***如果谈论图像，我是否要缩放或创建缩略图 - 图像尺寸是多少？***

查看[getimagesize](http://php.net/manual/en/function.getimagesize.php)以确定图像尺寸

**3\. 加工**

在将文件保存到最终位置之前，您可能需要对其进行一些处理。那是你可以的时候

*   [更改图像大小以供以后显示](http://php.net/manual/en/function.imagecopyresized.php)
*   [创建缩略图](https://stackoverflow.com/questions/2894732/trying-to-generate-proportionally-cropped-thumbnails-at-a-fixed-width-height-wit)
*   [添加水印或品牌](https://stackoverflow.com/questions/1726894/php-watermarking)
*   转换成另一种类型。此处没有链接，因为这可以是任何类型，我相信您会找到将 .xxx 转换为 .yyy 的解决方案 :)

用于图像处理的常用库是[gd lib](http://php.net/manual/en/book.image.php)和[imagick](http://php.net/manual/en/book.imagick.php)。我个人更喜欢 gd lib。它需要更多的手动工作，但速度更快，并且默认情况下与大多数安装一起提供，或者附加安装很简单。Imagemagick 原生拥有非常庞大的图像处理功能池

**4\. 存储您的数据**

现在是时候谈谈存储了。首先是一种将临时文件复制到临时或最终位置的保存方式。

你应该使用[move_uploaded_file](http://php.net/manual/en/function.move-uploaded-file.php)

```
move_uploaded_file( $useFiles['tmp_name'], $destination ); 
```

同样，存储没有“最佳方式”，这取决于您的环境、文件和使用。我会讲几个

***4.1。服务器文件系统***

这可能是存储文件最常用和最简单的方法。您可以简单地使用已经运行的网络服务器静态地提供文件。这通常是文档根目录中的一个位置。

为了让您的生活更轻松，您可以将文件名保存到数据库中 - 最好引用或由连接的数据（如用户或位置）引用。

出于各种原因，您不应将所有文件保存到同一个文件夹中。

您必须为每个文件生成一个唯一名称，否则您会用新文件覆盖现有文件。随着节点中文件数量的增加，通常的文件系统也变得越来越慢。当请求传递文件时，这将导致响应时间变慢。

您可以将其保存到每个用户的文件夹中

```
/uploaded/user-id/file.jpg 
```

如果您希望每个用户有很多文件，您可以拆分 filname 的校验和以获得更深的文件夹结构

例如

```
$path =  $_SERVER['DOCUMENT_ROOT'] . '/uploaded/' . $userId . '/' . chunk_split( md5( $useFiles['index']['name'] ), 12, '/' ); 
```

会导致

```
/var/www/htdocs/uploaded/1/97e262286853/d52aa8c58eb7/f0431f03/ 
```

***4.2\. 数据库***

您可以使用 blob 类型将文件存储到 MySQL 数据库中。我一般不推荐这个

***4.3\. 内容分发网络***

如果您预计全球会有大量流量，您可能需要考虑将文件存储在带有 Cloudfront的[Amazon S3等 CDN 上。](http://aws.amazon.com/s3/)

S3 是一种便宜、可靠的存储设备，可存储高达 5TB 的文件（据我所知）

[http://www.9lessons.info/2012/08/upload-files-to-amazon-s3-php.html](http://www.9lessons.info/2012/08/upload-files-to-amazon-s3-php.html)

您不必担心文件备份、可用硬盘大小、交付速度等[。Cloudfront](http://aws.amazon.com/cloudfront/)在 S3 之上添加了一个 CDN 层，边缘位置遍布全球

# iphone - 获得过多的内存分配而没有泄漏，应用程序更容易在 ipad 上崩溃

> ID：13972723
> 
> 赞同：0
> 
> 时间：2012-12-20T12:57:35.097
> 
> 标签：iphone, objective-c, ios6

我有这段代码可以获取两个不同视频中的两个视频帧。我将它们合并成单帧，然后用合并的帧创建电影。但问题是由于内存警告导致应用程序崩溃。这是我的代码：

```
NSString *filePath = [NSHomeDirectory() stringByAppendingPathComponent:[NSString stringWithFormat:@"/Documents/movie.mp4"]];
NSURL *outputURL = [NSURL fileURLWithPath:filePath];
player = [[MPMoviePlayerController alloc]initWithContentURL:outputURL];
float frame = 0.00;
int count = 10;  

NSFileManager *fileManager = [NSFileManager defaultManager];
NSString *docPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
docPath = [docPath stringByAppendingPathComponent:@"OutPut"];
BOOL success = [fileManager fileExistsAtPath:docPath];

if (success) {
    [fileManager removeItemAtPath:docPath error:nil];
}

[fileManager createDirectoryAtPath:docPath withIntermediateDirectories:YES attributes:nil error:nil];

for (frame = (frameStartTime); frame < (frameStartTime+5); frame+=0.033) {
    UIImage * singleFrameImage = [player thumbnailImageAtTime:frame timeOption:MPMovieTimeOptionExact];
    [player pause];
    NSString *imageName = [NSString stringWithFormat:@"export2%d.png",count];
    NSString * file = [[NSBundle mainBundle]pathForResource:imageName ofType:nil];
    UIImage *overlayImage = [UIImage imageWithData:[NSData dataWithContentsOfFile:file]];

    count = count + 1;
    NSString *imagePath = [NSString stringWithFormat:@"%@/%@", docPath, imageName];
    if (overlayImage) {
        UIImage *  outImage = [self mergeImage:singleFrameImage withImage:overlayImage];
        NSData *imgData = [[NSData alloc] initWithData:UIImagePNGRepresentation(outImage)];
        [fileManager createFileAtPath:imagePath contents:imgData attributes:nil];
        [imgData release];
    }
    else {
        NSData *imgData = UIImagePNGRepresentation(singleFrameImage);
        [fileManager createFileAtPath:imagePath contents:imgData attributes:nil];               
    }
    [outputFramesArray addObject:imagePath];
}

[player release];

if([fileManager fileExistsAtPath:filePath]) {
    [fileManager removeItemAtPath:filePath error:nil];    
}

NSString *path = [NSHomeDirectory() stringByAppendingPathComponent:[NSString stringWithFormat:@"/Documents/movie1.mp4"]];
NSLog(@"filePath %@", path);

if ([[NSFileManager defaultManager] fileExistsAtPath:path]) {
    [[NSFileManager defaultManager] removeItemAtPath:path error:nil];
}

[self writeImageAsMovie:outputFramesArray toPath:path size:CGSizeMake(480, 320) duration:10];
NSLog(@"hello Your layering is completed");
[outputFramesArray removeAllObjects];
[outputFramesArray release]; 
```

工具中的分配在此行中最大 (90%)：

```
NSData *imgData = [[NSData alloc] initWithData:UIImagePNGRepresentation(outImage)]; 
```

在我的整个应用程序中，仅此代码点的分配级别就达到了 130MB。

你们中的任何人都可以提出任何解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:04:48.577

这很可能是因为您在循环中消耗了内存，并且当前堆栈中分配的内存变得太大，然后您才返回到取消分配的主循环。

阅读这篇[博文](http://www.galloway.me.uk/2012/02/a-look-under-arcs-hood-episode-3/)了解更多详情。

做这个：

```
...
for (frame = (frameStartTime); frame < (frameStartTime+5); frame+=0.033)
{
    @autoreleasepool {
        // Do whatever you do in your for loop...
    }
}
... 
```

它将创建一个本地池，在每次迭代时都会被耗尽。

# java - Java 标签更新 META

> ID：13972728
> 
> 赞同：0
> 
> 时间：2012-12-20T12:57:43.193
> 
> 标签：java, tags, jsp-tags, meta

我有一个基本的 Java 标记（称为 PluginTag），它扩展了 TagSupport。此标记使用 JspWriter 实例向调用 JSP 添加一些行为，例如

```
 this.pageContext.setAttribute("plugins", someBehaviour); 
```

我想扩展这个标签，以便将 HTML 元数据注入到 html 文档的 HEAD 中。正如所解释的，该标签有一个 JspWriter，没有太多其他的......

此外，在调用 PluginTag 时，另一个标签将写出 HEAD 和任何 META 数据。诀窍是我不能更新这个标签来做我的工作——无论如何，如果可能的话，我希望 PluginTag 处理我的 META 数据。

我看到了一些类似 apache HtmlElement 的东西，但不认为它们适用于标签的上下文。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:12:49.957

无法访问在自定义标签之外形成的 HTML 文档。原因是之前形成的 HTML 可能已经被刷新到用户代理，而其他的还没有形成。

另一种将更改发送到客户端并呈现 HTML 文档的方法是使用自定义标记，其中包含一些更改所需 HTML 文档元素的 JavaScript。

# html - SVG 无法识别指针事件：无

> ID：13972730
> 
> 赞同：6
> 
> 时间：2012-12-20T12:57:52.000
> 
> 标签：html, css, svg

我有一个带有透明背景图像集的顶层，并且希望忽略所有指针事件。所以最初我的这个设置`<div style="pointer-events"></div>`很好用，但后来我发现 IE 不支持这个。

进一步阅读我发现有几个地方说 IE 确实支持`<svg>`with `pointer-events:none`，但我无法让它工作（我以前从未使用过 SVG 标签，所以我可能做错了）。

请看这个我希望实现的非常简化的小提琴。[http://jsfiddle.net/AGVTM/](http://jsfiddle.net/AGVTM/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T17:37:24.370

根（最顶部）`<svg>`元素将不支持`pointer-events: none`. 这背后的原因是它可能是一个安全漏洞，您可以使用 SVG 覆盖 Facebook Like 按钮，并让点击通过，如本示例[http://jsfiddle.net/rVxTn/](http://jsfiddle.net/rVxTn/)

如果 SVG 元素不是根元素，则应通过单击。此示例应适用于 IE9（未经测试）

[http://jsfiddle.net/DLEsn/](http://jsfiddle.net/DLEsn/)

但是，这并不能解决您的问题，因为您不能将 HTML 元素放入 SVG 元素中。

我以前多次遇到过这个问题，我不得不以不同的方式解决它。我建议您使用实际问题（可能还有屏幕截图）打开一个新问题，看看如何解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-06T23:38:00.857

# 根本原因

**绝对定位的 SVG 不会将点击传播到 IE9 中的 HTML 元素。**

请参阅此 webkit 测试用例讨论：[REGRESSION(r66731): pointer-events are broken in some cases](https://bugs.webkit.org/show_bug.cgi?id=45467)和相应[的最小测试用例](https://bug-45467-attachments.webkit.org/attachment.cgi?id=94332)。*意思是，有趣的是，这个错误几乎也进入了 WebKit，但及时得到了修复。*

在 IE 9 的情况下，结果：

> IE 9.0.8112.16421 = 未通过测试 1：浮动；通过测试 2：内联

# 解决方法

请参阅有关模拟的 StackOverflow 帖子`pointer-events: none`—<a href="https://stackoverflow.com/questions/9385213/how-to-make-internet-explorer-emulate-pointer-eventsnone">如何让 Internet Explorer 模拟指针事件：没有任何？

他们特别讨论了非 SVG 前端元素，但是将点击转发到底层元素的技术也可能适用于您的情况。

# java - 使用属性文件编写 POM 版本

> ID：13972731
> 
> 赞同：0
> 
> 时间：2012-12-20T12:57:52.133
> 
> 标签：java, xml, maven, pom.xml

我想在文本文件中写入 POM 版本和时间戳。

因此，我在一个文件夹中创建了一个属性文件`src/main/resources/version`：

```
product.version = ${project.version} 
```

并添加到我的`pom.xml`：

```
<resource>
    <directory>${basedir}/src/main/resources/version</directory>
    <filtering>true</filtering>
</resource> 
```

我的输出文本文件是这样说的：

```
Version = ${project.version}
Timestamp = 277466182879304 
```

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:01:50.450

变量被称为`${project.version}`，而不是`${pom.version}`

**[编辑]**可以将旧版本的 m2e 插件配置为在 Eclipse 构建项目时不运行 Eclipse 的资源复制目标。这意味着对于`main()`从 Eclipse 启动的单元测试和方法，资源不会更新，您会看到一些旧值。

还要确保在从命令行运行 Maven 时强制完全重建项目；否则，Eclipse 会感到困惑，你会得到奇怪的错误。

如果你有这样的问题，首先从命令行运行 Maven，看看是 Maven 还是 m2e（配置）问题。

下一步是在 Eclipse 中使用`Run as.../Maven install`. 这将使用 Maven 构建项目，并且没有 m2e 快捷方式。

如果这些工作，这是 m2e 的效果，它试图减少一些角落以保持 Eclipse 响应。确保您拥有最新版本的 m2e (1.2.0)。它应该解决这个问题。如果仍然无法正常工作，请提交错误报告。

这对我有用：`version.properties`包含

```
version=${project.version}
timestamp=${build.time} 
```

由于 Maven 3.x 中的错误，我必须使用插件来获得正确的构建时间戳：

```
 <plugin>
                            <groupId>com.keyboardsamurais.maven</groupId>
                            <artifactId>maven-timestamp-plugin</artifactId>
                            <configuration>
                                    <propertyName>build.time</propertyName>
                                    <timestampPattern>yyyy.MM.dd HH:mm:ss</timestampPattern>
                            </configuration>
                            <executions>
                                    <execution>
                                            <goals>
                                                    <goal>create</goal>
                                            </goals>
                                    </execution>
                            </executions>
                    </plugin> 
```

# iphone - 从 TiUIView 获取 UIView

> ID：13972733
> 
> 赞同：0
> 
> 时间：2012-12-20T12:57:55.223
> 
> 标签：iphone, objective-c, titanium

我正在为 Titanium 中的 iOS 开发一个自定义模块。在该模块中，我需要获取一个`UIView`对象。例如，用户正在使用`Ti.UI.createView`javascript 中的方法创建视图，那么我需要解决方案来获取该视图，就像`UIView`在我的模块 Objective-C 代码中一样。

javascript:

```
MyModule.getView({ view: sampleView }); 
```

目标-c：

```
-(void)getView:(id)args{
    //some objective-C code to get UIView from args
} 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T07:45:23.653

这是答案，对我有用

javascript:

```
MyModule.getView( view ); 
```

目标-c：

```
-(void)getView:(id)args {
   TiUIViewProxy* viewProxy = (TiUIViewProxy*)[args objectAtIndex:0];
   UIView *view = (UIView*)[viewProxy view];
} 
```

`view`实际上将是一个 TiUIView 类对象，它继承自 UIView 。

# arrays - 将文本文件中的特定列放入数组中

> ID：13972737
> 
> 赞同：0
> 
> 时间：2012-12-20T12:58:10.923
> 
> 标签：arrays, import, text-files, multidimensional-array

我需要实现的是从包含两列双精度的文本文件中导入数据，如下所示：

```
201.0176    1.06E+03
201.7557    1.11E+01
202.0201    2.02E+02
202.2064    9.76E+00
202.8342    1.11E+01
203.0161    2.02E+02
203.1638    9.61E+00
203.3843    1.13E+01 
```

这些数据大约有 50,000 行。我希望将每列导入一个单独的数组，但我无法弄清楚如何在单独的列之间进行识别。我尝试了以下方法：

```
public class CodeTests {

    public static ArrayList assignArray(String filePath) throws FileNotFoundException {
        Scanner s = new Scanner(new File(filePath));
            ArrayList<Double> list = new ArrayList<Double>();
            while (s.hasNext()){
                list.add(s.nextDouble());
            }
            s.close();
            return list;
    }

    public static void main(String[] args) throws IOException {
        /*
         * 
         */
        ArrayList arrayMZ;
        arrayMZ = assignArray("F:/Stuff/Work/Work from GSK/From Leeds/ja_CIDFragmenter/testFile.txt");

        for(int i = 0; i < arrayMZ.size(); i++)
            System.out.println(arrayMZ.get(i));
        System.out.println("End");
    }
} 
```

从运行这个我得到输出：

```
run:
201.0176
1060.0
201.7557
11.1
202.0201
202.0
202.2064
9.76
202.8342
11.1
203.0161
202.0
203.1638
9.61
203.3843
11.3
End
BUILD SUCCESSFUL (total time: 1 second) 
```

谁能帮我把这些列分成两个数组，甚至分成一个二维数组，放在 array[0] 的列下，第一个数据列在里面，array[1] 在第二个。IE ：

```
 [0]         [1]
201.0176    1.06E+03
201.7557    1.11E+01
202.0201    2.02E+02
202.2064    9.76E+00
202.8342    1.11E+01
203.0161    2.02E+02
203.1638    9.61E+00
203.3843    1.13E+01 
```

我试图尽可能清楚地说明这一点，但如果还有其他问题，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:19:27.173

你可以这样做：

```
public static ArrayList[] assignArray(String filePath) throws FileNotFoundException {
    Scanner s = new Scanner(new File(filePath));
        ArrayList[] list = new ArrayList[2];
        ArrayList<Double> col1 = new ArrayList<Double>();
        ArrayList<Double> col2 = new ArrayList<Double>();
        while (s.hasNext()){
            String[] data = s.nextLine().split("\\s+"); 
            col1.add(Double.parseDouble(data[0]));
            col2.add(Double.parseDouble(data[1]));
        }
        s.close();
        list[0] = col1;
        list[1] = col2;
        return list;
} 
```

并使用您的数据获取两个 ArrayList 的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T13:06:41.590

就像是：

```
for(int i = 0; i < arrayMZ.size() / 2; i+=2)
    System.out.printf("%.4f\t%E\n", arrayMZ.get(i), arrayMZ.get(i + 1)); 
```

# javascript - 滚动时如何使div隐藏在固定div后面

> ID：13972741
> 
> 赞同：2
> 
> 时间：2012-12-20T12:58:22.870
> 
> 标签：javascript, jquery, html, css

我制作了一个网站，其中有一个导航侧边栏，其位置固定在左侧，内容在右侧。现在，当我缩小浏览器窗口宽度时，会引入一个水平滚动条。当我使用它来滚动内容时，内容溢出在固定的左侧边栏上方。我希望内容位于侧栏后面，以免其折叠。请访问该网站。谢谢你。

[链接到网站](http://s133036305.onlinehome.us/#home)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:00:48.653

在css中，将背景颜色设置为`#navigation`白色并赋予它更高的z-index ...

```
#navigation {
    background-color: white;
    z-index: 100;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T13:02:12.460

设置背景颜色和 z-index

```
.navigation {
    z-index:100;
    background-color: white;
} 
```

阅读有关[z-index的更多信息](http://www.w3schools.com/cssref/pr_pos_z-index.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T13:11:59.673

你需要哟使用**z-index 属性**

*z-index 属性指定元素的堆叠顺序。具有较大堆栈顺序的元素始终位于具有较低堆栈顺序的元素之前*。

**注意：** *z-index 仅适用于定位元素（位置：绝对、位置：相对或位置：固定）。*

更多在[z-index](http://www.w3schools.com/cssref/pr_pos_z-index.asp)

```
#navigation {
    background-color: white;
    z-index: 100;
} 
```

# r - ffdfappend 来自 ffbase

> ID：13972746
> 
> 赞同：1
> 
> 时间：2012-12-20T12:58:42.420
> 
> 标签：r

朋友们。

由于我的数据量很大，我正在使用 ff 和 ffbase 包。我的问题是关于 ffdfappend()。我有不同的 ffsf 文件保存为 .csv。我需要做的是加载所有文件并应用 ffdfd 函数来创建一个大的 ffdf 文件。我这样做是一个循环：

```
files<-list.files()  
for (i in 1:length(files)){
fdata = read.csv.ffdf(file=files[i], first.rows=400, colClasses=NA)   
colnames(fdata)<-c('fecha','juliano','UTM_X','UTM_Y','temp','pp','f_ocur', 'altitud')  
if (i == 1){data=fdata} else {data<-ffdfappend(data, fdata, adjustvmode=F)}  
delete(fdata); rm(fdata)
} 
```

我可以轻松读取文件夹中的文件。问题是当我想将它们“附加”到一个 ffdf 对象中时。R告诉我这个：

```
Error en sort.list(y) : 'x' must be atomic for 'sort.list'  
Have you called 'sort' on a list?*** 
```

我不明白在告诉我什么，所以我无法解决问题。

```
str(files)
chr [1:6] "102c1b481014.csv" "102c2211788.csv" "102c32963052.csv" "102c32f1798.csv" "102c3a2517f1.csv" "102c4e7513f0.csv" 
```

如果有人可以帮助我理解或解决这个问题，我将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T13:46:53.323

ffdfappend 基本上用于将 data.frame 附加到 ffdf。我不知道这是否是一个选项，但是在附加到 ffdf 之前将每个 data.frame 加载到 RAM 中会起作用，如下所示。

```
files<-list.files()  
for (i in 1:length(files)){
  fdata = read.csv.ffdf(file=files[i], first.rows=400, colClasses=NA)   
  colnames(fdata)<-c('fecha','juliano','UTM_X','UTM_Y','temp','pp','f_ocur', 'altitud')  
  if (i == 1){data=fdata} else {data<-ffdfappend(data, fdata[,], adjustvmode=TRUE)}  
  delete(fdata); rm(fdata)
} 
```

另一种选择是使用 read.csv.ffdf 的 x 参数。如下所示。但是您的数据确实需要具有相同的结构。

```
files<-list.files()  
fdata = read.csv.ffdf(file=files[1], first.rows=400, colClasses=NA)
for (i in 2:length(files)){
  fdata = read.csv.ffdf(x = fdata, file=files[i], first.rows=400, colClasses=NA)   
} 
```

# php - 如果在第 1 行匹配，则在第 2 行抓取内容

> ID：13972750
> 
> 赞同：0
> 
> 时间：2012-12-20T12:59:02.313
> 
> 标签：php, regex, variables, preg-match

下面的代码选择包含单词“Homepage：”的每一行，并提取分号后面的内容。但是，我想要的是，如果与“主页：”一词匹配，则应抓取下一行的内容并将其放入变量中。

那怎么可能呢？

```
if (preg_match( '/Homepage:/', $text, $match )) {
    $pieces = explode(':', $text);
    $urls[] = trim($pieces[1]);
} 
```

**例子：**

```
Homepage:    <--- if match
http://www.fooland.com    <--- grab this and put in variable 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T13:02:51.367

```
if (preg_match('/Homepage:.*\n(.*)/', $subject, $regs)) {
    $result = $regs[1];
} 
```

**解释：**

```
Homepage: # Match Homepage:
.*        # Match any characters except linebreaks
\n        # Match a linebreak
(.*)      # Match and capture the contents of the entire line 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T13:05:50.227

您可以尝试在 php 中使用**explode()**

```
$urlResult = explode(':', $url)
echo $urlResult[0]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T13:02:16.937

你可以试试正则表达式`'/Homepage:\n/'`

# delphi - 为什么我的应用程序中的 Cardinal 类型发生了变化？

> ID：13972762
> 
> 赞同：3
> 
> 时间：2012-12-20T12:59:53.800
> 
> 标签：delphi, delphi-2006, delphi-3

我在这里有一个程序，它在 Delphi 3 中运行良好，我在 Turbo Delphi 2006 上编译和测试，发现了一个问题。问题是这样的：我使用“基本”数据类型作为某些东西的索引。它在 Delphi 3 中工作，但我发现值比 Turbo Delphi 2006 编译版本中的值大约 128-256 左右，具体取决于具体数据。将这些数据类型更改为“longint”解决了问题，因此程序可以在两个编译器上正常工作。

**问题：这是为什么？**

我的理解是 Cardinal 数据类型只是典型的无符号整数数据。这与它们在本程序中的应用是一致的，特别是Delphi 3 编译正确的事实证明了这一点。那么为什么 Turbo Delphi 2006 编译不起作用呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T13:12:49.400

在 Delphi 中，无符号类型只是下一个更大的有符号类型的子范围类型。在 Delphi 3 中，没有 64 位类型，因此 Cardinal 没有下一个更大的类型作为子范围。由于语言的技术限制，Cardinal 是 Delphi 3 中的签名类型。Delphi 4 引入了 Int64，并且 Cardinal 被设为该类型的无符号子范围（然后限制是它不是无符号的 64 位类型）。

简而言之，你从来没有得到真正的无符号行为。现在您已经升级了，您已经暴露了代码中一直存在的长期存在的问题。

您编译的代码并不能证明您的代码是正确的。Delphi 3 不能强制执行需要它实际上没有的类型的规则。

# c++ - 无法弄清楚我的代码有什么问题

> ID：13972763
> 
> 赞同：0
> 
> 时间：2012-12-20T13:00:02.240
> 
> 标签：c++, debugging, memory-dump

我有一个我设法从我的 DLL 创建的转储文件，该文件是为任何未处理的异常创建的。

当我用 n = 4 做类似的事情`int* tt = new int[4]; return int[n];`时，我会得到转储文件，并可以打开它，看看错误是在哪一行引起的。这对于直接从发布 exe 和发布 DLL 都是可能的。

现在这是一个简单的错误，我输入它只是为了测试我的内存转储创建。

我现在有一个 900kb 的转储文件，事件日志显示错误来自我的 .DLL，但如果我打开该文件，它不会显示任何源代码。

调用堆栈是

> KERNELBASE.dll！的RaiseException（）+ 0x3D之间字节
> clr.dll！RaiseTheExceptionInternalOnly（）+ 0x18f字节
> clr.dll！IL_Throw（）+ 0xe2字节
> 000007fe81f65fd7（）
> 00000000034d1610（）
> 000000002d06ecb8（）
> 436f93ce00050011（）
> 436f93cf00110012（）
> 000000002d06ec50（）
> 00006d930c4f7680（ )
> clr.dll!InlinedCallFrame::`vftable'()
> 000000002d06f3d8()

这根本无法帮助我弄清楚我的错误来自 DLL 中的哪个位置。调试的另一个问题是，它只发生在实时 PC 上，但从不在我的调试系统上。谁能帮我找到一种方法来调试它？它似乎发生在调用 DLL 时，但是：不是每次，只是像每 2 次一样（有时是第一次尝试，有时是第 5 次）。我完全迷失了这里发生的事情。

编辑：使用加载的 Microsoft 符号更新了调用堆栈，但我仍然不知道这可能来自哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T13:05:07.640

您需要加载 kernelbase.dll 的符号。可能还有 clr.dll。

大概你正在使用视觉工作室？将其设置为从 microsoft 符号服务器访问符号：http: [//msdn.microsoft.com/en-us/library/b8ttk8zy (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/b8ttk8zy(v=vs.80).aspx)

您可能需要右键单击调用堆栈中的项目并告诉它加载符号。

此外，请务必为您制作的任何软件版本保留一份 pdb 文件的副本。

# mysql - 创建为 Select 并添加一个额外的列

> ID：13972768
> 
> 赞同：0
> 
> 时间：2012-12-20T13:00:15.753
> 
> 标签：mysql, database

我想创建一个 MySQL 表作为另一个表的副本，如下所示：

```
CREATE TABLE new_tbl SELECT * FROM orig_tbl; 
```

扭曲的是，如果可能的话，我希望在创建时添加另一个空列，该列将在以后填充。

我知道我可以像上面那样创建它并在之后使用 ALTER TABLE，但我的想法是，鉴于大量数据，ALTER 会花费很长时间（如果这是错误的，请与我相矛盾），这可能是如果我想要的可以保存。

所以，假设我想要一个额外的`extra_col - varchar(64)`，我的原始查询是什么？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T13:01:28.073

如[`CREATE TABLE ... SELECT`语法](http://dev.mysql.com/doc/en/create-table-select.html)中所述：

> `SELECT`您可以通过在语句末尾添加语句来从另一个表创建一个表`CREATE TABLE`：
> 
> ```
> CREATE TABLE ***new_tbl*** SELECT * FROM ***orig_tbl***;
> ```
> 
> MySQL 为`SELECT`.
> 
> `[ deletia ]`
> 
> 请注意，`SELECT`语句中的列附加到表格的右侧，而不是重叠在表格上。
> 
> `[ deletia ]`
> 
> 在由 生成的表中`CREATE TABLE ... SELECT`，仅在`CREATE TABLE`部分中命名的列排在第一位。在这两个部分中或仅在该`SELECT`部分中命名的列紧随其后。`SELECT`还可以通过指定部件中的列来覆盖列的数据类型`CREATE TABLE`。

所以：

```
CREATE TABLE new_tbl (
  extra_col VARCHAR(64)
) SELECT * FROM orig_tbl 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-06-03T20:26:07.430

@ user1703809如果您想通过将额外列放在 Select 语句中将添加的列放在末尾，您有一个解决方法：

```
CREATE |TEMPORARY| TABLE IF NOT EXISTS new_tbl 
SELECT *, REPEAT('-',64) extra_col
FROM orig_tbl; 
```

这将创建带有添加列“extra_col”的新表 - varchar(64)。此外，如果适合您，您可以将表创建为临时表，如果您只想创建一个空表以供进一步使用，只需在语句末尾添加“LIMIT 0”即可。此外，通过这种方式，您可以在 Select 语句的字段列表的任何位置添加一列。你问这个问题已经有一段时间了，但我仍然希望能有所帮助。

# wordpress - 需要使用 SMS 集成注册 Wordpress 时事通讯

> ID：13972770
> 
> 赞同：-1
> 
> 时间：2012-12-20T13:00:17.013
> 
> 标签：wordpress

我需要一个带有 SMS 集成的 Wordpress 通讯注册。是否有任何插件或方法可以将此功能添加到 Wordpress？

我希望管理员具有通过电子邮件发送时事通讯以及通过 SMS 向手机发送通知的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-28T06:52:28.303

就我的客户而言，我使用了 Gravity 表单和第 3 方 SMS 网关。

第 3 方为您提供了需要插入到 function.php 文件中的一段 PHP 代码以及重力表单钩子和函数。

如果您需要更多详细信息。

# java - Java POST 应用程序/json

> ID：13972775
> 
> 赞同：2
> 
> 时间：2012-12-20T13:00:43.910
> 
> 标签：java, json, spring

> **可能重复：**
> [通过 JSON 中的 RestTemplate 的 POST 请求](https://stackoverflow.com/questions/4075991/post-request-via-resttemplate-in-json)

所以，我正在尝试使用 API（使用 spring）做一个 cURL 代码 POST。问题是我尝试了 3 种不同的方法，但都没有奏效。我收到 412 错误。

这是卷曲代码：

```
curl -i -H "Accept: application/json" -H "Content-Type: application/json"
-X POST -u user:password -d '{ "external_id":"PES001", "name":"João da Silva",   "email":"joao@empresa.com.br", "login":"joao@empresa.com.br", "password":"123456", "phone _number":"555199999999" }' https://xxxxxxxxx 
```

这是我的java代码：

```
HttpHeaders createHeaders( )
{
    return new HttpHeaders()
    {
        {
            String auth = "xxxxxxxxx@xxxxxxxxx" + ":" + "xxxxxxxxx";
            byte[] encodedAuth = Base64.encode(
                                     auth.getBytes(Charset.forName("US-ASCII")) );
            String authHeader = "Basic " + new String( encodedAuth );
            set( "Authorization", authHeader );
        }
    };
}

@RequestMapping(value = "/createuser", method = RequestMethod.GET)
@ResponseBody
public ResponseEntity<String>  sendCreateUser()
{

    RestTemplate restTemplate = new RestTemplate();

    //      HttpComponentsClientHttpRequestFactory requestFactory = (HttpComponentsClientHttpRequestFactory) restTemplate.getRequestFactory();
    //              DefaultHttpClient httpClient =
    //          (DefaultHttpClient) requestFactory.getHttpClient();
    //              httpClient.getCredentialsProvider().setCredentials(
    //          new AuthScope("https://xxxxxxxxx",443, AuthScope.ANY_REALM),
    //          new UsernamePasswordCredentials("xxxxx", "xxxxxx"));

    HttpHeaders httpHeaders = createHeaders();

    List<MediaType> acceptableMediaTypes = new ArrayList<MediaType>();
    acceptableMediaTypes.add(MediaType.APPLICATION_JSON);
    httpHeaders.setAccept(acceptableMediaTypes);
    httpHeaders.setContentType(MediaType.APPLICATION_JSON);

    // restTemplate.setMessageConverters(messageConverters);
    // handler para controlar as requisições
    //  restTemplate.setErrorHandler(new UmovErrorHandler());

    List<String> criarValor = new ArrayList<String>();
    criarValor.add("external_id : TST5");
    criarValor.add("name : Teste5");
    criarValor.add("email : teste5@empresa.com.br");
    criarValor.add("login : teste5@empresa.com.br");
    criarValor.add("password : 123456");
    criarValor.add("phone_number : 555199999995");

    MultiValueMap<String, String> values = new LinkedMultiValueMap<String, String>();
    values.put("data", criarValor);

    MultiValueMap<String, String> map = new LinkedMultiValueMap<String, String>();
    String outputBytes = "{'external_id': 'TST5644235',  'name': 'Test5443435e5',  'email': 't5454este43435@empresa.com.br',  'login': 'teste54545@empresa.com.br',  'password': '1234545456',  'phone_number': '555545199999995'}";
    map.add("data", outputBytes);
    //      map.add("external_id","TST5");
    //      map.add("name","Teste5");
    //      map.add("email","teste5@empresa.com.br");
    //      map.add("login","teste5@empresa.com.br");
    //      map.add("password","123456");
    //      map.add("phone_number","555199999995");

    HttpEntity<MultiValueMap<String, String>> request = new HttpEntity<MultiValueMap<String, String>>(map, httpHeaders);

    List<HttpMessageConverter<?>> messageConverters = new ArrayList<HttpMessageConverter<?>>();
    MappingJacksonHttpMessageConverter teste = new MappingJacksonHttpMessageConverter();

    messageConverters.add(new MappingJacksonHttpMessageConverter());
    messageConverters.add(new FormHttpMessageConverter());
    restTemplate.setMessageConverters(messageConverters);

    String teste22 =  restTemplate.postForObject("https://xxxxxxxxx", request, String.class);
    String test32 = null;

    //  integrationService.putSendPlanejamento(osOperacao);
    return null;
} 
```

如您所见，此代码中列出了我尝试过的所有 3 种方法。有人可以帮帮我吗 ？

# xcode - 如何从 Phonegap/Cordova 项目中删除默认本地化？

> ID：13972777
> 
> 赞同：12
> 
> 时间：2012-12-20T13:00:47.597
> 
> 标签：xcode, cordova

我刚刚有一个 Phonegap/Cordova iPhone 应用程序被批准用于应用程序商店，但我注意到它声称可以在包括北萨米语在内的许多其他语言中使用。我在本地化下找到了 xcode 中的语言列表并尝试删除它们，但如果我重新启动 xcode，它们会重新出现。

我也尝试过删除资源文件夹中的 lproj 文件夹，但这也无济于事。

我不知道下一步该做什么，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-06-28T14:44:14.813

这是我如何做到这一点的分步指南。（订单事项）

首先进入`Resources`Phonegap项目中的文件夹。在这个文件夹中有几个以 . 结尾的文件夹`*.lproj`。删除所有这些，除了`en.lproj`（假设您的语言是英语）。

![资源文件夹](../Images/53b54886fa2f472135f2cbea5513ba18.png)

即使您从硬盘中删除了这些文件，它们仍然在 Xcode 中链接。`*.xcodeproj`再次从侧栏中打开并删除所有文件夹。

![Xcode](../Images/5214c591d4432479b440e716a5380c95.png)

通常这应该足够了，但是如果您仍然遇到问题，请转到应用程序的项目选项卡（而不是目标），然后在 info 下您可以找到并删除所有当前的本地化。

![Xcode 本地化](../Images/27dbd517e63119d43d6ca469af150425.png)

哦，顺便说一句，如果这还不够，您可以在 iTunesConnect 中查看应用程序二进制文件的详细信息，以在发布应用程序之前验证它是否有效。

![iTC](../Images/7871fb7f10d6d8a8ab2d49d3f1d45a95.png)

# api - 我在哪里可以找到 OpenStreetMap API 0.6 的数字限制？

> ID：13972778
> 
> 赞同：1
> 
> 时间：2012-12-20T13:00:48.813
> 
> 标签：api, openstreetmap, numeric-limits

我正在尝试使用 OpenStreetMap API 0.6。API 是直截了当的，但我无法从他们的文档中找到任何数字范围限制信息。

我能找到的关于数字范围限制的唯一提及是here。

1.  元素 ID 为非负数，[http://wiki.openstreetmap.org/wiki/OSM_XML](http://wiki.openstreetmap.org/wiki/OSM_XML)
2.  ID 是整数，[http://wiki.openstreetmap.org/wiki/Data_Primitives](http://wiki.openstreetmap.org/wiki/Data_Primitives)

因为我的代码是针对移动平台的，所以我想针对内存空间优化我的代码。现在我在很多情况下都使用 64 位整数（实际上这也只是一个假设），这在考虑数据量时并不好。

我在哪里可以找到数字限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T07:20:13.677

节点/方式/关系的 ID 必须是 64 位。预计 32 位节点 ID 将在 2013 年第一季度和第二季度之间用完。

此外，任何 ID 都没有上限，因为它们永远不会被重复使用。

最近关于 64 位节点 ID 问题的讨论是[这个](http://lists.openstreetmap.org/pipermail/dev/2012-December/026354.html)。

更新：仅作记录，自 2013 年 2 月以来，OSM 现在*的*节点 ID 大于 32 位。

# c# - ASP.Net MVC 模型绑定我做错了什么？

> ID：13972779
> 
> 赞同：1
> 
> 时间：2012-12-20T13:00:51.083
> 
> 标签：c#, asp.net-mvc, model-binding

当我尝试访问发布的模型时，我得到了一个 NullReference。我究竟做错了什么？我已经尝试了我能想到的一切，但我一定错过了一些简单的东西？这是我的相关代码：

**控制器**

```
 public ActionResult EditQuestion(int id)
    {
        IFeedbackRepository rep = DAL.RepositoryFactory.GetFeedbackRepository();
        var q = rep.GetQuestion(id);
        SurveyQuestionEditModel question = new SurveyQuestionEditModel()
        {
            Id=q.Id,
            IsFreeText=q.FreeTextResponse,
            SurveyId=q.SurveyId,
            Question=q.Question,
            Category=q.Category
        };
        return View(question);
    }

    [HttpPost]
    public ActionResult EditQuestion(SurveyQuestionEditModel question)
    {
        IFeedbackRepository rep = DAL.RepositoryFactory.GetFeedbackRepository();
        rep.UpdateSurveyQuestion(question.Id, question.Question, question.IsFreeText, question.Category);
        return RedirectToAction("Edit", new { id = question.SurveyId });
    } 
```

**ASPX 的相关部分：**

```
 <fieldset>            
            <%: Html.HiddenFor(model => model.Id) %>
            <%: Html.HiddenFor(model => model.SurveyId) %>

        <div class="editor-label">
            <%: Html.LabelFor(model => model.Question) %>
        </div>
        <div class="editor-field">
            <%: Html.TextBoxFor(model => model.Question) %> 
```

**这创造了：**

```
 <form action="/feedback/Survey/EditQuestion" method="post">

    <fieldset>
        <legend></legend>

            <input id="Id" name="Id" type="hidden" value="72" />
            <input id="SurveyId" name="SurveyId" type="hidden" value="4" />

        <div class="editor-label">
            <label for="Question">Question</label>
        </div>
        <div class="editor-field">
            <input id="Question" name="Question" type="text" value="Test" />

        </div>

        <div class="editor-label">
            <label for="Category">Question Category</label>
        </div>
        <div class="editor-field">
            <input id="Category" name="Category" type="text" value="Test" />

        </div>

        <div class="editor-label">
            <label for="IsFreeText">Does this question require a free text response?</label>
        </div>
        <div class="editor-field">
            <input checked="checked" id="IsFreeText" name="IsFreeText" type="checkbox" value="true" /><input name="IsFreeText" type="hidden" value="false" />

        </div>

        <p>
            <input type="submit" value="Save" />
        </p>
    </fieldset>

</form> 
```

**这是模型类：**

```
 public class SurveyQuestionEditModel
    {

        public int Id { get; set; }

        [DisplayName("Question")]
        [Required]
        [MinLength(4)]
        public string Question { get; set; }

        [DisplayName("Does this question require a free text response?")]
        public bool IsFreeText { get; set; }

        public int SurveyId { get; set; }

        [DisplayName("Question Category")]
        [Required]
        public string Category { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T13:20:30.770

看起来像这个问题：[提交表单时模型为空](https://stackoverflow.com/questions/13968452/model-is-null-when-form-submitted/13969007#13969007)

在此处替换您的参数名称：

```
public ActionResult EditQuestion(SurveyQuestionEditModel question) 
```

# c - sprintf中的奇怪符号

> ID：13972780
> 
> 赞同：1
> 
> 时间：2012-12-20T13:00:55.000
> 
> 标签：c

我在 C 代码中有以下定义：

```
#define set_str(r,s) sprintf(r, "%-.*s", (int)sizeof(r)-1,s) 
```

我尝试在我的代码中调用函数 set_str 以了解符号的含义，但它没有给出任何特殊格式或任何东西，变量只是按原样复制。谁能告诉我这是什么意思？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T13:02:38.080

它只是格式化的输出和一些字符。

`%`--> 表示后面的字符`%`是占位符，将被相应的参数替换。

```
But here few things came into picture that's why you are confused. 
```

`.`--> 准确的`*`意思是`sizeof(r)-1`占用空间

`*`--> 它将指定要打印的字符的大小或宽度，`*`并将替换为`sizeof(r)-1`.

`-`--> 用于左调整或对齐。

last `s`--> 将被替换`s`为字符串。

也`sprintf()`意味着打印到缓冲区。在这种情况下，它是`r`.

**编辑**：如果是`.`，请参阅此一般打印场景。

```
printf("%sx.yz",args); 
// just forget about the `args` it can be as many as the format specifiers,
// it's an example for one argument.

s = sign, can be `+` or `-`.`+` means right adjustment `-`means left adjustment. 
x = At least `x` characters wide.
y = Exactly `y` charactes wide.
z = format specifier like `s`,`d`,`f` and so on as for corresponding arguments. ` 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T13:17:37.713

指定宽度的想法`sizeof(r) -1`是`sprintf()`确保目标缓冲区不会溢出。

`r`当是指针时，这将不起作用，因为`sizeof(char*)`不会给出为其分配的字符大小。

例如，如果`r`按以下方式分配，上述宏将无法按预期工作。

```
char *r = malloc(50); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T13:09:32.730

`-`正如@Omkant 所说，用于向左调整，`.`对于小数和下面的帖子将更好地描述`*`..

[%*s 格式说明符是什么意思？](https://stackoverflow.com/questions/1000556/what-does-the-s-format-specifier-mean)

# java - 返回演员表子类

> ID：13972791
> 
> 赞同：0
> 
> 时间：2012-12-20T13:01:24.500
> 
> 标签：java, inheritance

我有一个超类`Entity`，还有像`Post`等子类`Comment`。

我想添加`Entity`一个通用方法，该方法将在子类中返回一个演员表。所以例如我想这样称呼：

```
List<Post> posts = Post.findAll(); 
```

我试过这个：

```
public class Entity {
    public static List<?> findAll() {
        return ???;
    }
} 
```

但我认为语法不是我所追求的，因为当我这样做时：

```
for(Post post : Post.findAll()) {

} 
```

它给出了错误`Type mismatch`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T13:03:51.857

```
public class Entity<T> {
    public List<T> findAll() {
        return ???;
    }
} 
```

和

```
public class Post extends Entity<Post> { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T13:42:18.043

如果您想要一个泛型方法而不是泛型类，您可以尝试以下方法：

```
public class Entity {
    static <T extends Entity> List<T> findAll(Class<T> type){
        List<T> list = new ArrayList<T>();

        //populate your list  

        return list;
    }
} 
```

你可以像这样使用它：
`List<Post> list = Entity.findAll(Post.class);`

# liferay-6 - Liferay：saxReaderUtil 结果

> ID：13972797
> 
> 赞同：0
> 
> 时间：2012-12-20T13:01:53.457
> 
> 标签：liferay-6, saxparser, liferay-velocity

在从 Liferay 网络内容文章中获取结果时，使用 SAX 阅读器和 Velocity ，结果数限制为 5！

$saxReaderUtil.readURL("http://$request.theme-display.url-portal/c/journal/get_articles?groupId=10157&type=typeOne&approved=true&orderBy=display-date

如何获取所有元素？

我正在使用 Liferay 6.0.6

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T22:40:59.980

通过添加 delta 参数。$saxReaderUtil.readURL("http://$request.theme-display.url-portal/c/journal/get_articles?groupId=10157&type=typeOne&approved=true&orderBy=display-date& **delta** =100"); 在这里，请求将带来 100 个结果。

# ios - 从没有父视图的 UIView 获取图像

> ID：13972798
> 
> 赞同：2
> 
> 时间：2012-12-20T13:01:57.237
> 
> 标签：ios, uiview

我有一个`UIView`由其他子视图组成的。

这`UIView`不是应用程序中任何其他视图的子视图。

我可以从中获得图像（`UIImage`）`UIView`吗？还是应该从显示的视图中引用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T09:11:33.123

您不需要显示它。只需将该视图对象传递给此函数，您就会得到图像

```
+ (UIImage *) imageWithView:(UIView *)view
{
    UIGraphicsBeginImageContextWithOptions(view.bounds.size, view.opaque, 0.0);
    [view.layer renderInContext:UIGraphicsGetCurrentContext()];

    UIImage * img = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();

    return img;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-20T08:34:57.650

```
func imageWithView (view: UIView)->UIImage
{
    UIGraphicsBeginImageContextWithOptions(view.bounds.size, false, 0.0)
    view.layer.renderInContext(UIGraphicsGetCurrentContext())
    newImage = UIGraphicsGetImageFromCurrentImageContext()
    UIGraphicsEndImageContext()
    return newImage
} 
```

这是`swift`版本

# eclipse - 将 JDBC 添加到 Eclipse 中的动态 Web 项目

> ID：13972799
> 
> 赞同：0
> 
> 时间：2012-12-20T13:02:05.797
> 
> 标签：eclipse, jsp, jdbc

我正在使用 JSP，在将 JDBC 驱动程序添加到当前项目时遇到问题。我试图建立一个 jdbc 库的路径以及将 JDBC jar 直接复制并粘贴到“lib”文件夹中，但没有任何效果，我不断收到“没有找到适合 jdbc:mysql://localhost:3306/mydb 的驱动程序”错误. 难道我做错了什么？还有其他方法可以添加jdbc吗？

jar在图中出现如下：![在此处输入图像描述](../Images/1f84091abab508809dbd2cebfc1a106a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T14:24:49.373

您是否正确加载了课程？尝试这个：

```
Class.forName("com.mysql.jdbc.Driver"); 
```

就在创建连接之前。

# sql-server-ce - SQL Server Compact Edition 查询日志

> ID：13972804
> 
> 赞同：0
> 
> 时间：2012-12-20T13:02:21.013
> 
> 标签：sql-server-ce

需要记录应用程序对 SQL Server CE 数据库执行的所有查询（不需要记录警告/错误）。类似于 MySQL 的日志应该做的事情。有没有可能对此有所帮助的解决方案？

不，由于缺少源代码，我无法调试该应用程序。

编辑：该应用程序在 Cassini 下运行，因此这里也没有使用花哨的 IIS 工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:05:12.900

[SQL Server Compact Edition 服务器代理](http://msdn.microsoft.com/en-us/library/ms173017%28v=sql.90%29.aspx)可能有助于记录错误和警告，但 SQL CE 没有事务日志，因此如果没有一些手动更改跟踪，则无法进行事务记录

# javascript - 确定对象何时仅具有某些属性

> ID：13972808
> 
> 赞同：1
> 
> 时间：2012-12-20T13:02:36.267
> 
> 标签：javascript

我正在创建一个对象，用于通过 ajax 将数据传送回服务器。

根据服务器更新应包含的数据将属性添加到对象。其中两个属性在每个更新对象中`FruitID`，并且`PeachID`

但是，当更新对象为 ajax 调用呈现自身并且只有这两个属性时，我想取消调用。

如何确定一个对象只包含某些属性？

感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:06:24.820

听起来你想使用[hasOwnProperty](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/hasOwnProperty)

```
if (myObject.hasOwnProperty("FruitID")) { ... } 
```

另一种选择可能是使用`Object.keys`，但它仅在现代浏览器中受支持。不过，进行比较会更容易，看看是否只有这些属性存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T13:07:30.873

```
var obj = {a:"property 1",b:"property 2"} // Or whatever object you want to check.

if(Object.keys(obj).length == 2     // If the object only has 2 keys,
    && obj["FruitID"]   // And FruitID exists as property of the object,
    && obj["PeachID"]){ // And PeachID exists as property of the object,
    // The object only contains FruitID & PeachID;
} 
```

或者将其包装在一个函数中：

```
function isBaseObject(obj){
    return !!(Object.keys(obj).length == 2 && obj["FruitID"] && obj["PeachID"]); // !! to cast the output to a boolean
}

isBaseObject({FruitID:"property 1",PeachID:"property 2"})
//true
isBaseObject({FruitID:"property 1",PeachID:"property 2", a:1})
//false
isBaseObject({a:1})
//false 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T13:07:34.113

你需要使用`hasOwnProperty`.

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/hasOwnProperty](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/hasOwnProperty)

```
o = new Object();
o.prop = 'exists';

o.hasOwnProperty('prop');   //returns true 
```

# objective-c - 根据字符串的长度更新 NSTextField 的宽度

> ID：13972812
> 
> 赞同：5
> 
> 时间：2012-12-20T13:02:50.487
> 
> 标签：objective-c, xcode, macos, cocoa, nstextfield

我想制作一个标签，根据它将显示的字符串值的大小来改变它的大小。目前我正在这样做：

```
[tfScroll setStringValue:strScoller];
[tfScroll sizeToFit]; 
```

但是，这是行不通的。我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-01T19:30:38.470

如果你的 tfScroll 是 NSTextField：

```
CGRect frame = tfScroll.frame;
frame.size.width = tfScroll.attributedStringValue.size.width+somepoints;//(somepoints=8)
tfScroll.frame = frame; 
```

我没有找到 NSTextfield.contentSize。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T13:41:25.223

如果您尝试调整字段的高度，这可能有效：

```
CGRect frame = tfScroll.frame;
frame.size.height = tfScroll.contentSize.height;
tfScroll.frame = frame; 
```

# javascript - 优化 Jquery 代码 - 单击时添加和删除类

> ID：13972815
> 
> 赞同：1
> 
> 时间：2012-12-20T13:03:06.327
> 
> 标签：javascript, jquery, optimization

我目前正在学习 js 和 jquery 来帮助我进行设计，我遇到的一个常见问题是我可以让它做我想做的事情，但我不知道它的编码方式是否有效. 谁能看到更好的编码方式：

```
$(".cal-check a").click(function(e) {
e.preventDefault();
$(".agenda").addClass("active");
});

$(".agenda .close-panel").click(function(e) {
e.preventDefault();
$(".agenda").removeClass("active");
}); 
```

我想单击一个日历事件，然后它将活动的课程添加到日历中称为议程的另一个课程中，然后它会调出议程。然后我通过单击关闭面板元素将其删除。非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:05:05.373

您可以像这样缓存 .agenda 选择器：

```
var $agenda = $(".agenda");

$(".cal-check a").click(function(e) {
    e.preventDefault();
    $agenda.addClass("active");
});

$agenda.find(".close-panel").click(function(e) {
    e.preventDefault();
    $agenda.removeClass("active");
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T13:08:46.223

我建议不要更改类，这通常会在浏览器上相当密集，因为一个类更改将意味着所有类都必须重新解析。这对于更具侵略性的东西（如动画）通常是非常糟糕的，但如果您有性能方面的考虑，您应该考虑到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T13:10:17.347

我认为这已经很有效了。将来可能会有所帮助的事情是尝试尽可能少地潜入 DOM。在这个小例子中，它不会有所作为，但例如为议程类创建一个变量，而不是每次都使用 jquery 来获取它。

```
var agendaClass = $(".agenda");

$(".cal-check a").click(function(e) {
e.preventDefault();
agendaClass .addClass("active");
});

$(".agenda .close-panel").click(function(e) {
e.preventDefault();
agendaClass .removeClass("active");
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T13:32:35.300

这应该足够有效。如何优化代码很大程度上取决于您的 DOM 结构。

在幕后，带有 Sizzle 搜索引擎的 jQuery 将使用内置方法进行 DOM 搜索，如果这些方法可用的话（原生搜索总是比使用 JS 完成的搜索更快）。在您的情况下，一切都应该没问题，尤其是在现代浏览器中，因为它们具有[querySelectorAll](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelectorAll)并且选择`.cal-check a`器`.agenda`将使用该内置方法执行。此外，还有[getElementByClassName](http://caniuse.com/#feat=getelementsbyclassname)可用于查找`.agenda`.

大多数现代浏览器都支持这两种方法（只要链接有支持的浏览器列表），因此使用选择器谈论 IE8+、Firefox 和 Chrome 等浏览器将足够快。同时 IE7 没有上述功能，Sizzle 将被迫通过无数元素来寻找你正在寻找的元素。也许您可以限制指定某个具有 id 的容器的数量，在这种情况下，它只会查看该元素的内部： `$("#someId .agenda")`例如。您可能还需要添加一些标签：`$("#someId div.agenda")`. 这样，您将限制在`#someId`(getElementById) 内部使用 div（可以使用 getElementsByTagName）搜索的元素数量。这样你就可以提高 IE7 和其他不支持的旧浏览器的`getElementByClassName`速度`querySelector`

另外，您可以缓存搜索结果，因为这里已经提到过。

# asp.net - 如何在 Visual Studio 2008 中使用断点调试 sharepoint 2007 功能

> ID：13972818
> 
> 赞同：-3
> 
> 时间：2012-12-20T13:03:16.213
> 
> 标签：asp.net, visual-studio, debugging, sharepoint

嗨，我在 sharepoint 中开发了一个小代码，它将一个列表项复制到另一个列表，当我在 Visual Studio 中调试以跟踪错误时，断点没有触发。最初它工作正常，但后来我不知道发生了什么，它不工作，我做了所有的方法，比如（1）在 web.config 文件中修改，（2）放置 GAC（3）将 PDF 添加到 GAC MSIL 文件夹（4）将进程附加到托管代码（5）我有在我的应用程序的虚拟目录中复制了 DLL 和 PDB 文件，尝试了所有方法，但没有成功..如果有人有解决这个问题的方法，请告诉我，如果我得到一个，我会很高兴..我输了这个问题三天

谢谢巴鲁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T15:05:51.053

确保在每次构建后执行 IIS 重置。GAC 代码被缓存。

在 VS Post-Build 活动中，我的项目中有这个。

```
"C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bin\NETFX 4.0 Tools\x64\gacutil.exe"  /i $(TargetPath) 
```

iis重置

这将为您执行任务。然后只需刷新站点并附加到网站的 w3wp.exe。

# jquery-mobile - 在页面外应用主题

> ID：13972819
> 
> 赞同：0
> 
> 时间：2012-12-20T13:03:23.447
> 
> 标签：jquery-mobile

我正在尝试学习 jquery mobile 并且在过去的几天里一直在玩它并且事情进展顺利，但我不确定我是否采取了正确的方法。

我尝试制作一个与 facebook 应用程序具有类似 UI 的网站。页面标题的右上角和左上角是使页面像抽屉一样滑出的按钮。

左上角的按钮将页面向右滑出以显示菜单，而右上角的按钮将向左滑出以显示要填写的表格。

我所做的是在页面外创建 div 并使用 javascript 滑出活动页面，根据按下的按钮显示菜单或表单：

```
<body>

  <div id="my-menu">
    <ul>
      <li><a href="page1.html">Menu Item 1</a></li>
    </ul>
  </div> <!-- end of my-menu -->

  <div id="my-form">
    <form method="post" action="form-action.php">
      <!-- form elements -->
    </form>
  </div> <!-- end of my-form -->

  <div data-role="page" id="home">
    <div data-role="header">
    </div>

    <div data-role="content">
    </div>
  </div> <!-- end of home -->

</body> 
```

我使用自己的 CSS 来设置菜单样式，但我也注意到我的主题并未应用于“my-form”，但“主页”页面中的所有元素都已正确设置样式。

我不能将表单放在“主页”页面内，因为我无法实现我用菜单完成的滑动抽屉效果。

我是否想将自己的样式应用于页面外部的表单，或者有没有办法将 jquery 移动主题应用于页面外部的元素？

这将是实现这种用户界面的最佳方法，还是有更好的方法使用 jquery mobile 中可用的功能？

由于这将是我的应用程序 UI，这是否意味着我只需将相同的代码复制到所有页面？还是有更好的方法来做到这一点？

我想对这个用例使用最佳实践，所以请提供任何建议！在此先感谢您的帮助！

顺便说一句，我根据这篇博文制作了幻灯片菜单：http: [//blog.aldomatic.com/facebook-style-slide-out-menu-in-jquery-mobile/](http://blog.aldomatic.com/facebook-style-slide-out-menu-in-jquery-mobile/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:51:25.860

**解决方案1：**

正如我在评论中告诉你的，jQM 样式不能在页面容器之外应用，但这不应该阻止你使用它的 css。

如果您使用的是 firefox，请使用 firebug 插件并查看每个 jQM 页面元素，复制其结构和 css。使用它在页面容器外创建样式。

还有一件事，新元素将被样式化，但它们没有功能，你需要自己重做。

**解决方案2：**

在页面加载时将您的内容放在 data-role="page" div 中，让 jQuery Mobile 设置页面样式，然后将您的内容 div 移出 data-role="page" div 成为 body 标记的子项.

# .net - 仅在实际构建项目时运行 MSBuild 目标

> ID：13972820
> 
> 赞同：7
> 
> 时间：2012-12-20T13:03:26.573
> 
> 标签：.net, build, msbuild, build-process, msbuild-4.0

我有一个构建 * */* .sln 文件的 MSBuild 文件（构建所有存在的 .sln 文件）。

构建使用*Build*目标，因此如果没有对输入文件进行任何更改，则不应再次构建任何项目。

**仅当**项目实际上再次构建时，我才想执行一些自定义目标。

如何才能做到这一点？

无论编译/构建是否实际发生，都始终调用**AfterBuild**和**AfterCompile 。**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-20T14:53:13.837

基本上你想要与例如相同的行为`PostBuildEvent`，所以我查找了`Microsoft.Common.Targets`它是如何做到的（这个文件*总是*提供了一个很好的洞察力来了解 msbuild 应该如何使用）。这是解决方案：

```
<PropertyGroup>
  <RunPostBuildEvent>OnOutputUpdated</RunPostBuildEvent>
</PropertyGroup>
<Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />
<Target Name="RunWhenBuild" AfterTargets="CoreBuild"       
        Condition="'$(_AssemblyTimestampBeforeCompile)'!='$(_AssemblyTimestampAfterCompile)'">
  <Message Importance="high" Text="RunWhenBuild!!"/>
</Target> 
```

这就是发生的事情：当有一个以目标的依赖值命名的属性时，最终`RunPostBuildEvent`将记录输出文件在构建之前和之后的时间戳。如果它们相等，则不会生成输出。所以剩下的就是让你的目标运行并检查这些时间戳。`OnOutputUpdated``CoreBuild``CoreBuild`

# android - android中适配器的使用

> ID：13972825
> 
> 赞同：0
> 
> 时间：2012-12-20T13:03:55.717
> 
> 标签：android, android-adapter, android-adapterview

Android中的适配器有什么用？？我用谷歌搜索但找不到明确的解决方案。谁能解释一下适配器是什么以及它在 Android 中的用途。如果有人知道有关此主题的任何链接，请提供给我..这将非常有用..在此先感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T13:16:53.060

适配器用于向微调器、单选按钮等提供数据。例如，您可以以编程方式创建微调器，然后在没有数据的情况下创建微调器，现在只有使用适配器我们才能向微调器提供数据，这是主要的适配器的优势。

```
hope it will help to u. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T13:10:15.407

适配器基本上是 UI 组件和将数据填充到 UI 组件中的数据源之间的桥梁。

像列表视图一样，使用列表适配器从数据源数组中填充

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T14:02:19.007

适配器用作数据层和 UIComponent 之间的桥梁。例如，如果您有一些关于 Customer Offers 的数据并且您想在 ListView 中显示它们，您可以使用适配器来做到这一点。您的适配器应该响应（实施）一些关键方法。获取视图（），获取计数（），获取项目，......；当 ListView 想要显示它向适配器询问的数据时，项目的计数，然后对于屏幕中可见的项目，它会向适配器询问“行视图”。重要的一点是，ListView 通过使用适配器和内部回收来管理抓取的视图并防止创建许多视图。方法 Adapter.getView(int position, View convertView, ViewGroup parent) 中的参数 Convert View 是一个抓取的视图。

# java - 页面滚动时滚动模态

> ID：13972827
> 
> 赞同：0
> 
> 时间：2012-12-20T13:03:59.293
> 
> 标签：java, php, javascript, jquery, html

我在页面中有一个叠加层，请检查链接。

[滑块演示](http://vignesh.gvignesh.org/slide/)

页面加载后，它将进入。然后，当您向下滚动页面时，叠加层保持不变。它还应该随着页面滚动到该 URL 中提到的某种程度而向上滚动。然后，当用户向后滚动时，它应该会再次出现。
我正在使用此代码来执行此操作， `slideme()`将叠加层带入并`reset()`使其返回。

希望我的问题很清楚。提前致谢。

```
$(document).ready(function()
{
    SlideMe();

    $('body').keypress(function(e)
    {
        if(e.keyCode == 27)
        {
            reset();
        }
 });

    });
    function SlideMe()
    {   
        if(document.getElementById('hdnFBStats').value == 1)
        {
            document.getElementById('hdnFBStats').value =0;
            reset();
            return false;
        }

        $lngDocWidth = ($(document).width()/3)+32;

        $('#overlay').fadeIn('fast',function(){
            $("#fb").animate({marginRight:$lngDocWidth}, 1500);         
        });

        $("#feedbackimg").css("margin-right", '100px');
        $("#feedbackimg").css("float", 'right');

        document.getElementById('hdnFBStats').value= 1;
    }

    function reset()
    {
        $("#fb").css('margin-right', '0px');
        $('#overlay').fadeOut('fast');
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T13:14:19.833

我认为你只需要修改你的CSS。
只需将样式设置`position`为`absolute`而不是`fixed`.

```
#fb {
    position: absolute;
    right: -505px;
    top: 150px;
    z-index: 101;
} 
```

编辑：希望这可以帮助你。

```
 function thisfunc(evt) {
    if(window.pageYOffset>=400) { 
       // if(sent to right) { 
       //send to right 
       //}
    }
    else {
       // if(sent to middle) {
       //send to middle and restore
       //}
    }
    }
    document.onscroll=thisfunc; 
```

# c# - 我无法获得我的 ANID？

> ID：13972829
> 
> 赞同：9
> 
> 时间：2012-12-20T13:03:59.697
> 
> 标签：c#, windows-phone, windows-phone-8

我已添加到 WMAppManifest.xml：

*   `<Capability Name="ID_CAP_IDENTITY_DEVICE" />`
*   `<Capability Name="ID_CAP_IDENTITY_USER" />`

那么为什么我总是从以下位置获取空字符串：

```
 public static string GetWindowsLiveAnonymousID()
        {
            int ANIDLength = 32;
            int ANIDOffset = 2;

            string result = string.Empty;
            object anid;
            if (UserExtendedProperties.TryGetValue("ANID", out anid))
            {
                if (anid != null && anid.ToString().Length >= (ANIDLength + ANIDOffset))
                {
                    result = anid.ToString().Substring(ANIDOffset, ANIDLength);
                }
            }

            return result;
        } 
```

它似乎不能很好地处理 TryGetValue ......有人有线索吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-20T14:24:17.847

[它在 Windows Phone 8 中称为 ANID2。](http://msdn.microsoft.com/en-US/library/windowsphone/develop/microsoft.phone.info.userextendedproperties.aspx)

> UserExtendedProperties API 公开了两个属性：ANID 和 ANID2。
> 
> *   ANID*只能*从使用 Microsoft Advertising SDK for Windows Phone 的 Windows Phone OS 7.0 和 Windows Phone OS 7.1 应用程序访问。
>     
>     
> *   ANID2*只能*从 Windows Phone 8 应用程序访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-14T19:49:51.237

用于*Win Phone 8*应用程序

```
string anid = UserExtendedProperties.GetValue("ANID2") as string; 
```

还要确保从**WMAppManifest检查这些**

```
<Capability Name="ID_CAP_IDENTITY_DEVICE" />
<Capability Name="ID_CAP_IDENTITY_USER" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T14:27:17.330

我似乎记得，出于安全原因，您不能再在 windows phone 8 设备上请求 ANID。同样的方式你不能再在 W8 设备上请求 MAC 地址了。在本地存储 Guid.NewGuid() 并以这种方式识别。

# sql - 从多列创建多行和单列

> ID：13972830
> 
> 赞同：1
> 
> 时间：2012-12-20T13:04:02.400
> 
> 标签：sql, unpivot

我正在使用 SQL（在 SAS 中）。我有一个如下所示的数据集（表）：

```
Y1 Y2 Y3
100 200 300
```

我想返回的是两列，如下所示：

```
年值
1 100
2 200
3 300
```

实现这一目标的 SQL 查询是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T13:06:47.113

尝试 ：

```
SELECT y1 FROM yourtable
UNION ALL
SELECT y2 FROM yourtable
UNION ALL
SELECT y3 FROM yourtable 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T13:17:14.627

在 SQL Server 2005+ 中，您可以使用以下[`UNPIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)功能：

```
select replace(col, 'Y', '') year,
  value
from yourtable
unpivot
(
  value
  for col in (Y1, Y2, Y3)
) unpiv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/d8200/1)

`UNION ALL`这与使用查询的过程相同：

```
select 1 Year, Y1 value
from yourtable
union all
select 2 Year, Y2 value
from yourtable
union all
select 3 Year, Y3 value
from yourtable 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/d8200/3)

两者都会产生相同的结果：

```
| YEAR | VALUE |
----------------
|    1 |   100 |
|    2 |   200 |
|    3 |   300 | 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T13:16:04.420

假设在 ID 的行上有一个主键：

```
 ID   Y1  Y2  Y3
  1  100 200 300 
```

那么这种事情应该有效

```
SELECT MOCKTABLE.* FROM (
   SELECT 1 AS Year, Y1 AS VALUE FROM x WHERE ID = y
   UNION ALL
   SELECT 2 AS Year, Y2 AS VALUE FROM x WHERE ID = y
   UNION ALL
   SELECT 3 AS Year, Y3 AS VALUE FROM x WHERE ID = y
) MOCKTABLE 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T13:54:23.320

取消透视列的一般方法是创建一个笛卡尔积，其中包含一个表，其中包含与输出中所需列一样多的行。如何获得这个“表”取决于您使用的 RDBMS。这是一个 Oracle 示例：

```
select
r "Year",
case r when 1 then y1 when 2 then y2 when 3 then y3 else null end "Value"
from
t1, (select level r from dual connect by level <= 3) 
```

这使：

```
Year  Value
1   100
2   200
3   300 
```

只是另一种方法...

# jquery - 3 秒 jQuery 计数器

> ID：13972832
> 
> 赞同：0
> 
> 时间：2012-12-20T13:04:14.220
> 
> 标签：jquery, jquery-countdown

我的 JS 代码：

```
 var counter = 3;
    var timer = setInterval(function () {counter--;  if (counter == 0) {clearInterval(interval);}}, 1000);

    $('#msg').hide().html('Page will refresh in ' + timer).slideDown('fast'); 
```

为什么它不起作用？这是我得到的回复：“页面将在 14522 刷新”

我正在尝试进行 3 秒倒计时。我不想在那之后采取任何行动。那么问题出在哪里？求救！

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T13:07:09.890

首先，您要`counter`在屏幕上显示，而不是`timer`. 其次，您需要在每次计数器更改时更新消息：

```
var timer = setInterval(function () {
    counter--;
    $('#msg').html('Page will refresh in ' + counter);
    if (counter == 0) {
        clearInterval(interval);
    }
}, 1000); 
```

# c# - 使用 Linq 检索数据库值时出现异常

> ID：13972839
> 
> 赞同：1
> 
> 时间：2012-12-20T13:04:44.197
> 
> 标签：c#, .net, sql

当我得到 System.ArgumentNullException 时，我正在使用 Visual Studio 2012 并想做一个 sql 查询（使用实体框架 5）：

堆栈跟踪：

```
System.ArgumentNullException was unhandled
  HResult=-2147467261
  Message=Value cannot be null.
Parameter name: source
  Source=System.Core
  ParamName=source
  StackTrace:
   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)
   at Model.RavenDB.ThreadProvider_Raven.Get(Eid item, Rid forum) in c:\Users\fm\Desktop\121219scraper-mssql\Model.RavenDB\ThreadProvider_Raven.cs:line 52
   at Model.RavenDB.ThreadProvider_Raven.Exsist(Eid item, Rid forum, Nullable`1& out_Item) in c:\Users\fm\Desktop\121219scraper-mssql\Model.RavenDB\ThreadProvider_Raven.cs:line 90
   at Scraper.DT_Category.Download() in c:\Users\fm\Desktop\121219scraper-mssql\Scraper\1 (independent)\Download tasks\DT_Category.cs:line 115
   at Scraper.DQ_ParticularForum.QueueReader(Object _this) in c:\Users\fm\Desktop\121219scraper-mssql\Scraper\1 (independent)\DQ_ParticularForum.cs:line 72
   at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart(Object obj)
  InnerException: 
```

询问：

```
using (var context = new Model.MsSql.Context())
{ 
    var t = context.Threads.FirstOrDefault(s => s.ForumId == (short)forum && s.ExternalId == (int)item);
    ...
} 
```

模型：

```
namespace Model.MsSql
{
    public class Context : DbContext
    {
        public DbSet<Message> Messages;
        public DbSet<Thread> Threads;
    }

    public class Message
    {
        public int ExternalId;
        public short ForumId;
    }

    public class Thread
    {
        public int ExternalId;
        public short ForumId;
    }
} 
```

我确定我错过了一些明显的东西，但任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T13:13:19.533

扩展方法`context.Threads.FirstOrDefault(predicate)`实际上是一个简单`static`的方法：它与`Queryable.FirstOrDefault<Thread>(context.Threads, predicate)`.

在您的情况下，`context.Thread`is `null`，因此[FirstOrDefault](http://msdn.microsoft.com/en-us/library/bb301896.aspx)按预期抛出异常。

您应该在您的构造函数中实例化您的`DbSet<>`属性`Context`：

```
public class Context : DbContext
{
    public Context()
    {
        this.Messages = ...
        this.Threads = ...
    }

    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T13:16:31.960

如果源为空，则发生这种情况，在您的情况下 context.Threads 出于某种原因为空，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/bb340482.aspx)

# javascript - 有没有办法为下拉菜单设置 `selected` 标志而不是 val()？

> ID：13972843
> 
> 赞同：0
> 
> 时间：2012-12-20T13:04:50.973
> 
> 标签：javascript, jquery

选择值让我感到困惑。当用户在我的应用程序中编辑一行时，我使用 jquery 克隆一个标签（称为 empty-X）并将其放在模式窗口上，以便用户可以编辑这些值。同时，我从服务器获取了一个 json 对象（数据），并在模式窗口中填写了数据库中的当前字段：

```
empty_X.find('#id_deals-1-currency').val(data[0].fields['currency']); 
```

现在，当模式显示时，用户可以看到如何在下拉列表中选择正确的货币。

然而，当我用 Firebug 检查这个元素的 HTML 时，我得到了一张不同的图片，似乎没有被选中。

```
<select id="id_deals-1-currency" name="deals-1-currency">
 <option selected="selected" value="">---------</option>
 <option value="1">USD - $</option>
 <option value="2">EUR - €&lt;/option>
 <option value="3">GBP - £</option>
</select> 
```

然而，当我将表单发送到服务器时，没有验证错误，并且货币与之前通过 val() 设置的值相同。生活很好。

虽然这本身有效，但存在一个问题。如果用户想回到编辑模式并在保存之前再次验证货币怎么办？

在这种情况下，我不能再从数据库中加载值了。他以前的局部变化现在很重要。我必须在模式窗口中克隆当前带有货币的记录，以便用户可以看到他之前更改的内容并进行验证。现在的问题是用户看不到他在上一步中更改的货币。事实上，他会看到一个空的下拉菜单。

我在这里有什么选择？有没有办法将`selected`标志设置为实际选择而不是使用`val()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:09:19.703

克隆 a`<select>`时，具有 'selected' 属性的选项成为克隆对象中的当前选项 - 而不是实际的当前对象（根据 value 属性）。

为了解决这个问题，您可以从返回的值中找到当前选定的选项，`val()`然后在克隆它之前将选定的属性应用于它。这样您就不需要在克隆后设置值。

**演示：http:** [//jsfiddle.net/DqADq/](http://jsfiddle.net/DqADq/)

**代码**：（`.x1`是`<select>`）

```
// simple cloning
$('.x1:first').clone().appendTo('.out');

// setting selected attr before cloning
var v = $('.x1:first').val();
$('.x1:first option').removeAttr('selected'); // remove 'selected' from all options
$('.x1:first option').each(function() {
    if($(this).attr('value') == v)  {
        $(this).attr('selected', true); // apply 'selected' to current option
    }
});
$('.x1:first').clone().appendTo('.out'); 
```

# css - HTML表格双向对齐

> ID：13972844
> 
> 赞同：1
> 
> 时间：2012-12-20T13:04:53.300
> 
> 标签：css, html, html-table

我有一个有两列的表：

```
<table border="1" bordercolor="#FFCC00" style="background-color:#FFFFCC" width="250" cellpadding="3" cellspacing="3">
    <tr>
        <td>Table Cell</td>
        <td>Table Cell</td>
    </tr>
    <tr>
        <td>Table Cell</td>
        <td>Table Cell</td>
    </tr>
    <tr>
        <td>Table Cell</td>
        <td>Table Cell</td>
    </tr>
    <tr>
        <td>Table Cell</td>
        <td>Table Cell</td>
    </tr>
    <tr>
        <td>Table Cell</td>
        <td>Table Cell</td>
    </tr>
    <tr>
        <td>Table Cell</td>
        <td>Table Cell</td>
    </tr>
    <tr>
        <td>Table Cell</td>
        <td>Table Cell</td>
    </tr>
    <tr>
        <td>Table Cell</td>
        <td>Table Cell</td>
    </tr>
    <tr>
        <td>Table Cell</td>
        <td>Table Cell</td>
    </tr>
    <tr>
        <td>Table Cell</td>
        <td>Table Cell</td>
    </tr>
    <tr>
        <td>Table Cell</td>
        <td>Table Cell</td>
    </tr>
    <tr>
        <td>Table Cell</td>
        <td>Table Cell</td>
    </tr>
    <tr>
        <td>Table Cell</td>
        <td>Table Cell</td>
    </tr>
    <tr>
        <td>Table Cell</td>
        <td>Table Cell</td>
    </tr>
</table>
<p style="font-family:verdana,arial,sans-serif;font-size:10px;"><a href="http://www.quackit.com/html/html_table_tutorial.cfm" target="_top">HTML Tables</a></p> 
```

我的文字有问题。如何将左侧文本与左侧对齐，将右侧文本与右侧对齐？还有其他方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T13:06:34.603

下面的 CSS 将采用`td`每行中的第二个并将`text-align`CSS 属性设置为向右对齐。

```
td:first-child+td {
    text-align: right;
} 
```

您当然可以（并且可能应该）向您的表格和此规则添加一个类，以便它仅适用于您要以这种方式对齐的特定表格。

您还可以使用它来选择第二列中的单元格：

```
td:nth-child(2) 
```

但请记住，由于它是一个 CSS3 属性，它不像我的第一个示例那样被广泛支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T13:08:36.457

CSS：

```
table tr td:first-child {
    text-align:left;
}

table tr td:nth-child(1) { // or :last-child
    text-align:right;
} 
```

请注意，这些是 CSS3 选择器，因此不能在旧浏览器上按原样工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T13:07:04.413

使用类：

```
td.leftSide {
    text-align:left;
}

td.rightSide {
    text-align:right;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T13:10:43.923

有多种方法可以做到这一点。一种是使用[`:first-child`](https://developer.mozilla.org/en-US/docs/CSS/%3afirst-child)和[`:last-child`](https://developer.mozilla.org/en-US/docs/CSS/%3alast-child)伪类：

```
td:last-child {
    text-align: right;
}
td:first-child {
    text-align: left;
} 
```

[示例小提琴](http://jsfiddle.net/FvGcM/)

# mongodb - 多更新在 MongoDB 中不起作用

> ID：13972846
> 
> 赞同：4
> 
> 时间：2012-12-20T13:05:03.050
> 
> 标签：mongodb

我有一个从 CSV 填充的集合，但是记录中有一些我不再需要的字段，所以我想删除它们，但它似乎没有做任何事情。这是来自 CLI：

```
> db.stops.update({}, { $unset: {stop_lat: 1, stop_lon: 1} }, { multi: 1 })
> db.stops.findOne({stop_id: 1000})

{
  "_id" : ObjectId("50d30386884be8bf2a6c208a"),
  "stop_id" : 1000,
  // some other fields
  "stop_lat" : -27.339115,
  "stop_lon" : 153.043884,
} 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-20T13:13:26.977

你的语法不正确。**2.2 之前版本**的 CLI 中的更新操作如下所示：

> 更新（标准，更新，更新插入，**多个**）

更正后它可以工作：

```
> db.stops.update({}, { $unset: {stop_lat: 1, stop_lon: 1} }, false, true)
> db.stops.findOne({stop_id: 1000})
{ "_id" : ObjectId("50d30386884be8bf2a6c208a"), "stop_id" : 1000 } 
```

编辑：正如 Sammaye 指出的那样，您使用的语法在最新的稳定版本的 mongod 上有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-13T14:00:30.367

使用节点本机驱动程序时我遇到了同样的问题。

`{multi:1}`不工作

`{multi:true}`做

有点奇怪

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-26T10:17:29.217

> 请尝试这种方式：

2.0 以上版本的 CLI 如下所示：

*更新（标准、更新、更新插入、多个）*

**例子 ：**

*db.collectionname.update({condition},{ $set:{ groupid:'541ae260514ca0b76981222f'}},false,{ multi: true });*

# c# - asp .net gridview ，即使总页数为一，我也希望页面出现

> ID：13972851
> 
> 赞同：0
> 
> 时间：2012-12-20T13:05:23.003
> 
> 标签：c#, asp.net, gridview

我正在开发一个 asp .ne 项目并且有一个 gridview，根据用户选择相同的 gridview 数据绑定不同数量的数据。有时它有 10 页，有时只有一页。当页面总数只有一个时，不会出现寻呼机行，但是 onRowDataBound 事件我有一个 if 语句来检查是否存在 PagerRow 并成功通过它。即使总页数只有一个，我如何显示寻呼机行？

它通过以下语句或 RowDataBound 事件

```
 if (e.Row.RowType == DataControlRowType.Pager)
    {
        e.Row.Visible = true;
    } 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:08:14.273

覆盖 OnPreRender 事件处理程序，然后添加以下代码：

```
 protected void MyGridView_PreRender(object sender, EventArgs e)
 {
          GridViewRow pagerRow = (GridViewRow) this.BottomPagerRow;

          if(pagerRow != null && pagerRow.Visible == false)
          pagerRow.Visible = true;
 } 
```

# c# - 此 C# 代码登录 youtube 的说明

> ID：13972852
> 
> 赞同：0
> 
> 时间：2012-12-20T13:05:24.210
> 
> 标签：c#, oop, syntax

我从stackoverflow的某个地方得到了这段代码。我无法理解。它用于登录 youtube。我是 C# 和 OOPS 的新手。所以任何人都可以向我解释一些事情：

1) 在第 3 行

```
 HttpWebRequest request = GetNewRequest("https://accounts.google.com/ServiceLoginAuth", cookies); 
```

HttpWebRequest 是一个类，request 是一个对象。但是为什么在那之后不使用 New 关键字呢？这是什么“GetNewRequest”？它是一种方法吗？大多数时候，我们使用带有 New 关键字的类的构造函数。那么我可以得出结论，我可以在那里使用该类的任何方法吗？有没有必要使用new关键字和构造函数？

2) 在第 6 行

```
Dictionary<string, string> parameters = new Dictionary<string, string> 
```

字典是类，参数是对象。但这是什么`<string, string>`？我从来没有见过参数可以传递给一个类。

3) 在第 7 行

```
{
        {"continue","https%3A%2F%2Fwww.youtube.com%2Fsignin%3Faction_handle_signin%3Dtrue%26feature%3Dsign_in_button%26nomobiletemp%3D1%26hl%3Den_US%26next%3D%252F"},
        {"service","youtube"},{"uilel","3"},{"dsh","157212168103955870"},{"hl","en_US"},
        {"GALX","PTqcwpZb2aE"},{"pstMsg","1"},{"dnConn",""}, {"checkConnection","youtube%3A248%3A1"}, 
        {"checkedDomains","youtube"}, {"timeStmp",""}, {"secTok",""}, {"Email","username"}, {"Passwd","password"}, 
        {"signIn","Sign+in"}, {"PersistentCookie","yes"}, {"rmShown","1"}}; 
```

我看不懂这是什么？它不适合我在 C# 中阅读的任何语法。这是我以前从未见过的。

**完整代码**

```
public void Login()
{
    HttpWebRequest request = GetNewRequest("https://accounts.google.com/ServiceLoginAuth", cookies);
    request.Referer = "https://accounts.google.com/ServiceLogin?passive=true&continue=https%3A%2F%2Fwww.youtube.com%2Fsignin%3Faction_handle_signin%3Dtrue%26feature%3Dsign_in_button%26nomobiletemp%3D1%26hl%3Den_US%26next%3D%252F&uilel=3&hl=en_US&service=youtube";
    request.Host = "accounts.google.com";
    Dictionary<string, string> parameters = new Dictionary<string, string>{
        {"continue","https%3A%2F%2Fwww.youtube.com%2Fsignin%3Faction_handle_signin%3Dtrue%26feature%3Dsign_in_button%26nomobiletemp%3D1%26hl%3Den_US%26next%3D%252F"},
        {"service","youtube"},{"uilel","3"},{"dsh","157212168103955870"},{"hl","en_US"},
        {"GALX","PTqcwpZb2aE"},{"pstMsg","1"},{"dnConn",""}, {"checkConnection","youtube%3A248%3A1"}, 
        {"checkedDomains","youtube"}, {"timeStmp",""}, {"secTok",""}, {"Email","username"}, {"Passwd","password"}, 
        {"signIn","Sign+in"}, {"PersistentCookie","yes"}, {"rmShown","1"}};
    HttpWebResponse response = MakeRequest(request, cookies, parameters);
    response.Close();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T13:12:41.753

1.  `GetNewRequest`将是一个实际创建并返回`HttpWebRequest`. 因此，`new`在调用`GetNewRequest`. `new`仅当您在声明所在的同一行中调用类型的构造函数时才需要。
2.  之后的`<string, string>`声明`Dictionary`指定了键和值类型，因为`Dictionary<TKey, TValue>`它是[泛型类型](http://msdn.microsoft.com/en-us/library/0x6a29h6%28v=vs.80%29.aspx)。
3.  这是一种使用键/值对列表初始化字典的方法。这只是语法糖。请参阅[对象初始化](http://msdn.microsoft.com/en-us/library/vstudio/bb384062.aspx)。它只是为了让您的生活更轻松/代码更简洁。该代码相当于更详细的代码：

_

```
Dictionary<string, string> parameters = new Dictionary<string, string>();
parameters.Add("continue","https%3A%2F%2Fwww.youtube.com%2Fsignin%3Faction_handle_signin%3Dtrue%26feature%3Dsign_in_button%26nomobiletemp%3D1%26hl%3Den_US%26next%3D%252F");
parameters.Add("service","youtube");
// etc. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T13:14:47.103

1.  `GetNewRequest`是您发布的代码中未定义的方法。
2.  `Dictionary<string, string>`和符号用于泛型， `<`有关介绍，请参阅[http://msdn.microsoft.com/en-us/library/ms379564%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/ms379564%28v=vs.80%29.aspx)。`>`
3.  是初始化字典值的语法，见[http://msdn.microsoft.com/en-us/library/bb384062.aspx](http://msdn.microsoft.com/en-us/library/bb384062.aspx)

# asp.net-mvc - 调试对 WebAPI 的未处理 HTTP 请求

> ID：13972859
> 
> 赞同：2
> 
> 时间：2012-12-20T13:05:53.720
> 
> 标签：asp.net-mvc, iis-7, asp.net-web-api

我正在从控制台客户端调用我的 WebApi 服务器方法，并且大多数调用都有效。
有些没有。
我的路由看起来不错，但显然有一个错误。
有没有办法在某处设置断点（早于我的控制器方法），这将允许我跟踪错误的来源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T14:23:00.133

在被调用的控制器中必须有两个与路由引擎“相同”的方法。例如

```
public class FooController
{
    public void Get1() { }
    public void Get2() { }
} 
```

如果您尝试拨打电话`somedomain.com/api/foo`，您将收到 500 服务器错误

> 找到与请求匹配的多个操作：\r\nSystem.Net.Http.HttpResponseMessage

请记住，在 WebApi（默认情况下）中没有`{action}`路由的一部分：

> {控制器}/{id}

这意味着 API 有一个调用方法的约定。

[看这篇](http://www.cloudydeveloper.com/differences-between-asp-net-web-api-and-asp-net-mvc-routing/)文章解释更多

# c++ - 是否可以在向量上分配 boost::multi_index 或 boost::intrusive 项？

> ID：13972860
> 
> 赞同：0
> 
> 时间：2012-12-20T13:06:05.803
> 
> 标签：c++, boost, multi-index

是否可以在向量上分配 boost::multi_index 项并在该向量中使用索引（4 字节）而不是指针（8 字节）到处（包括 boost::multi_index 的内部结构）以节省内存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T08:06:40.480

有*可能*：Boost.MultiIndex 支持特殊分配器，其关联`Allocator::pointer`类型可以不同于常规指针，前提是它模拟随机访问迭代器，如此[处](http://www.boost.org/libs/multi_index/doc/reference/multi_index_container.html#instantiation_types)所述（这样做主要是[为了支持 Boost.Interprocess 分配器](http://www.boost.org/libs/multi_index/doc/tutorial/creation.html#special_allocator)。）通过一些工作，您可能会制作一个分配器，它使用一个向量作为它的竞技场并使用一个 4 字节的对象来索引它。不过，这看起来并不容易。

# ios - iOS 6 Map 使用太多 TCP 连接？

> ID：13972861
> 
> 赞同：0
> 
> 时间：2012-12-20T13:06:05.350
> 
> 标签：ios, ios-simulator, mapkit

我遇到了著名的“打开的文件太多”问题，并试图找出我的应用程序打开了哪些文件。看来要怪的是MapKit！

我在 iOS 6 模拟器中运行了我的应用程序，并**打开了 "Debug > Location > Freeway Drive"**。然后用来`lsof -i | grep MyAppName`获取打开的 TCP 连接。这就是我得到的：

```
iWasteBul 36816 ivanzhu    1u  IPv4 0xf7ae68a3a8b239af      0t0  TCP localhost:49504->localhost:49503 (ESTABLISHED)
iWasteBul 36816 ivanzhu    2u  IPv4 0xf7ae68a3a8b239af      0t0  TCP localhost:49504->localhost:49503 (ESTABLISHED)
iWasteBul 36816 ivanzhu    4u  IPv4 0xf7ae68a3a8b239af      0t0  TCP localhost:49504->localhost:49503 (ESTABLISHED)
iWasteBul 36816 ivanzhu    5u  IPv4 0xf7ae68a3a849b407      0t0  TCP localhost:49505->localhost:49503 (ESTABLISHED)
iWasteBul 36816 ivanzhu    6u  IPv4 0xf7ae68a3a62634ff      0t0  TCP localhost:49506->localhost:49503 (ESTABLISHED)
iWasteBul 36816 ivanzhu   30u  IPv4 0xf7ae68a3a84350e7      0t0  TCP 192.168.1.108:50151->123.103.0.159-bj-cnc:https (ESTABLISHED)
iWasteBul 36816 ivanzhu   31u  IPv4 0xf7ae68a3a939f407      0t0  TCP 192.168.1.108:50148->123.103.0.159-bj-cnc:https (ESTABLISHED)
iWasteBul 36816 ivanzhu   32u  IPv4 0xf7ae68a3a939f407      0t0  TCP 192.168.1.108:50148->123.103.0.159-bj-cnc:https (ESTABLISHED)
iWasteBul 36816 ivanzhu   33u  IPv4 0xf7ae68a3a3482f57      0t0  TCP 192.168.1.108:50149->123.103.0.159-bj-cnc:https (ESTABLISHED)
iWasteBul 36816 ivanzhu   34u  IPv4 0xf7ae68a3a3482f57      0t0  TCP 192.168.1.108:50149->123.103.0.159-bj-cnc:https (ESTABLISHED)
iWasteBul 36816 ivanzhu   35u  IPv4 0xf7ae68a3a8540277      0t0  TCP 192.168.1.108:50150->123.103.0.159-bj-cnc:https (ESTABLISHED)
iWasteBul 36816 ivanzhu   36u  IPv4 0xf7ae68a3a8540277      0t0  TCP 192.168.1.108:50150->123.103.0.159-bj-cnc:https (ESTABLISHED)
iWasteBul 36816 ivanzhu   37u  IPv4 0xf7ae68a3a84350e7      0t0  TCP 192.168.1.108:50151->123.103.0.159-bj-cnc:https (ESTABLISHED)
iWasteBul 36816 ivanzhu   38u  IPv4 0xf7ae68a3a89f468f      0t0  TCP 192.168.1.108:50157->123.103.0.159-bj-cnc:https (ESTABLISHED)
iWasteBul 36816 ivanzhu   39u  IPv4 0xf7ae68a3a89f3f57      0t0  TCP 192.168.1.108:50152->123.103.0.159-bj-cnc:https (ESTABLISHED)
iWasteBul 36816 ivanzhu   40u  IPv4 0xf7ae68a3a89f3f57      0t0  TCP 192.168.1.108:50152->123.103.0.159-bj-cnc:https (ESTABLISHED)
iWasteBul 36816 ivanzhu   41u  IPv4 0xf7ae68a3a75bcdc7      0t0  TCP 192.168.1.108:50153->123.103.0.159-bj-cnc:https (ESTABLISHED)
iWasteBul 36816 ivanzhu   42u  IPv4 0xf7ae68a3a75bcdc7      0t0  TCP 192.168.1.108:50153->123.103.0.159-bj-cnc:https (ESTABLISHED)
iWasteBul 36816 ivanzhu   43u  IPv4 0xf7ae68a3a90729af      0t0  TCP 192.168.1.108:50154->123.103.0.159-bj-cnc:https (ESTABLISHED)
iWasteBul 36816 ivanzhu   44u  IPv4 0xf7ae68a3a90729af      0t0  TCP 192.168.1.108:50154->123.103.0.159-bj-cnc:https (ESTABLISHED)
iWasteBul 36816 ivanzhu   45u  IPv4 0xf7ae68a3a94b2ccf      0t0  TCP 192.168.1.108:50155->123.103.0.159-bj-cnc:https (ESTABLISHED)
iWasteBul 36816 ivanzhu   46u  IPv4 0xf7ae68a3a94b2ccf      0t0  TCP 192.168.1.108:50155->123.103.0.159-bj-cnc:https (ESTABLISHED)
iWasteBul 36816 ivanzhu   47u  IPv4 0xf7ae68a3a4eac0e7      0t0  TCP 192.168.1.108:50156->123.103.0.159-bj-cnc:https (ESTABLISHED)
iWasteBul 36816 ivanzhu   48u  IPv4 0xf7ae68a3a4eac0e7      0t0  TCP 192.168.1.108:50156->123.103.0.159-bj-cnc:https (ESTABLISHED)
iWasteBul 36816 ivanzhu   49u  IPv4 0xf7ae68a3a89f468f      0t0  TCP 192.168.1.108:50157->123.103.0.159-bj-cnc:https (ESTABLISHED)
iWasteBul 36816 ivanzhu   50u  IPv4 0xf7ae68a3a94754ff      0t0  TCP 192.168.1.108:50167->123.103.0.159-bj-cnc:https (ESTABLISHED)
iWasteBul 36816 ivanzhu   51u  IPv4 0xf7ae68a3a849accf      0t0  TCP 192.168.1.108:50158->123.103.0.159-bj-cnc:https (ESTABLISHED)
iWasteBul 36816 ivanzhu   52u  IPv4 0xf7ae68a3a849accf      0t0  TCP 192.168.1.108:50158->123.103.0.159-bj-cnc:https (ESTABLISHED)
iWasteBul 36816 ivanzhu   53u  IPv4 0xf7ae68a3a76c868f      0t0  TCP 192.168.1.108:50159->123.103.0.159-bj-cnc:https (ESTABLISHED)
iWasteBul 36816 ivanzhu   55u  IPv4 0xf7ae68a3a76c868f      0t0  TCP 192.168.1.108:50159->123.103.0.159-bj-cnc:https (ESTABLISHED)
iWasteBul 36816 ivanzhu   56u  IPv4 0xf7ae68a3a66a1277      0t0  TCP 192.168.1.108:50160->123.103.0.159-bj-cnc:https (ESTABLISHED)
iWasteBul 36816 ivanzhu   57u  IPv4 0xf7ae68a3a66a1277      0t0  TCP 192.168.1.108:50160->123.103.0.159-bj-cnc:https (ESTABLISHED)
iWasteBul 36816 ivanzhu   58u  IPv4 0xf7ae68a3a93d7f57      0t0  TCP 192.168.1.108:50161->123.103.0.159-bj-cnc:https (ESTABLISHED)
iWasteBul 36816 ivanzhu   59u  IPv4 0xf7ae68a3a93d7f57      0t0  TCP 192.168.1.108:50161->123.103.0.159-bj-cnc:https (ESTABLISHED) 
```

而且该列表不断增长，以至于我的代码在尝试写入文件时开始出现“打开的文件过多”错误。

我在 iOS 5.1 模拟器上做了同样的测试，看起来还不错（没有额外的连接）：

```
iWasteBul 37547 ivanzhu    1u  IPv4 0xf7ae68a3a8a00dc7      0t0  TCP localhost:51490->localhost:51489 (ESTABLISHED)
iWasteBul 37547 ivanzhu    2u  IPv4 0xf7ae68a3a8a00dc7      0t0  TCP localhost:51490->localhost:51489 (ESTABLISHED)
iWasteBul 37547 ivanzhu    4u  IPv4 0xf7ae68a3a8a00dc7      0t0  TCP localhost:51490->localhost:51489 (ESTABLISHED)
iWasteBul 37547 ivanzhu    5u  IPv4 0xf7ae68a3a8a0cdc7      0t0  TCP localhost:51491->localhost:51489 (ESTABLISHED)
iWasteBul 37547 ivanzhu    6u  IPv4 0xf7ae68a3a8a014ff      0t0  TCP localhost:51492->localhost:51489 (ESTABLISHED) 
```

为了确保这不是我的应用程序的问题，我杀死了模拟器中所有正在运行的应用程序，启动内置的“地图”应用程序，并得到了相同的结果。但我无法在 iOS 5.1 模拟器中进行相同的测试，因为其中没有安装“地图”应用程序。

我的问题是：

1.  我是否使用正确的工具来打开 TCP 连接？
2.  它是 iOS 6 模拟器（和潜在的设备）中的错误吗？
3.  如何处理？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T03:01:06.517

Ivan，我可以告诉你它存在于 iOS 6.0.1 中。我运行一个论坛，每天几次，我收到来自服务器的 DDoS 保护模块的电子邮件，某某 IP 被“阻止太多连接”，50 或更多但通常接近 80。

这些人之间唯一的共同点是他们使用的是运行 iOS 6.0.1 的 iPad。我只看到了一个 6.0.2 连接，因此无法验证问题是否在 6.0.2 中得到解决。

# jquery - 我想通过轻松动画向下滚动到网页底部

> ID：13972864
> 
> 赞同：0
> 
> 时间：2012-12-20T13:06:19.093
> 
> 标签：jquery, html

我想在单击链接时轻松地滚动到网页底部。在我的主页底部，我插入了一个名为 wall 的 div 类。我的菜单为 Home、Wall、联系人、概述。如果我从主页单击“墙”，它应该向下滚动到页面底部（记住 div 类墙在同一个主页上。）当我在另一个页面上时说联系人，当我单击菜单中的墙时，主页页面应该被加载，然后应该向下滚动（介意如果点击主页，页面打开并且从不滚动）。有什么办法吗？我用html5设计了网站并使用了以下

```
 <script type="text/javascript">

     function pageScroll() {
            window.scrollBy(0,50); // horizontal and vertical scroll increments
            scrolldelay = setTimeout('pageScroll()',20); 
// scrolls every 20 milliseconds
    }

      </script>
    <body onload="pageScroll()"> 
```

但问题是页面向下滚动并且永远不会让滚动停止。即使我们向上滚动它也会返回到底部......有没有办法只滚动一次？

我几乎不知道拼写 jquery ...需要帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T13:14:26.653

这很简单

```
$('html, body').animate({ 
    scrollTop: $(document).height()-$(window).height()
}); 
```

并滚动到特定的 Id 使用以下

```
$("html, body").animate({ 
    scrollTop: $("#theID").scrollTop() 
}, 1000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T13:19:42.033

从字面上看，在谷歌上搜索“使用缓动 jquery 滚动”后的第一个结果是 [“使用 JQuery 平滑垂直或水平页面滚动”](http://tympanus.net/codrops/2010/06/02/smooth-vertical-or-horizontal-page-scrolling-with-jquery/)，这正是您所要求的。研究该页面的内容，并记得在提出问题之前进行研究。

* * *

[这是该页面的垂直滚动](http://tympanus.net/Tutorials/WebsiteScrolling/index_vertical.html)示例，这是完成所有工作的 javascript 代码。

```
$(function() {
    $('ul.nav a').bind('click',function(event){
        var $anchor = $(this);

        $('html, body').stop().animate({
            scrollTop: $($anchor.attr('href')).offset().top
        }, 1500,'easeInOutExpo');
        /*
        if you don't want to use the easing effects:
        $('html, body').stop().animate({
            scrollTop: $($anchor.attr('href')).offset().top
        }, 1000);
        */
        event.preventDefault();
    });
}); 
```

* * *

如果您是 JQuery 新手并且不知道从哪里开始，我建议您从他们的[教程页面](http://docs.jquery.com/Main_Page)开始学习基础知识。我还想指出，建议使用[不显眼的 javascript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)，否则在 HTML 中混合 javascript 函数调用会变得混乱。

另外，我不确定您是否知道，但是如果您想将[javascript 文件链接](http://www.mkyong.com/javascript/how-to-link-an-external-javascript-file/)到您的 html，您可以在头部或正文中执行此操作：

```
<script type="text/javascript" src="external_javascript.js"></script> 
```

快乐编码！

# mysql - 如何从mysql中的两个未连接的表中进行选择

> ID：13972868
> 
> 赞同：0
> 
> 时间：2012-12-20T13:06:22.463
> 
> 标签：mysql

我有两个没有公共列的表。但是有关系。我有表1，表2。表1如下：

```
t1.ID | t1.Name | t1.Number 
```

其中 Name 是唯一值。

表2如下：

```
t2.ID | t2.Number1 | t2.Number2 | t2.Country 
```

我的查询如下：

```
select t1.Name, t1.Number, t2.country
from db.t1, db.t2
where t1.Number between t2.Number1 AND t2.Number2 
```

查询的结果是我得到了每条记录两次。但是，当我添加：

```
group by t1.Name 
```

我得到了正确的结果（每条记录一次）。我不想使用分组依据。如何进行正确的查询，我是否可以在没有 group by 的情况下两次获得相同的记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:10:34.127

尝试使用`DISTINCT`：

```
SELECT DISTINCT 1.Name, t1.Number, t2.country
FROM db.t1, db.t2
WHERE t1.Number BETWEEN t2.Number1 AND t2.Number2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T13:08:26.177

至少应该有两个表共有的一列。否则你只会得到重复的值。

至少据我所知是这样的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T13:09:51.687

```
select t1.Name ,t1.Number from t1
union
select t2.Number1 ,t2.Number2 from t2 
```

在这种情况下，您可以使用联合。

# windows-phone-7 - Windows Phone 8 中的自动暗/亮图标支持

> ID：13972876
> 
> 赞同：19
> 
> 时间：2012-12-20T13:06:40.717
> 
> 标签：windows-phone-7, windows-phone-8, windows-phone

我认为这是一个非常普遍的问题，但我找不到适合我的解决方案。众所周知，WP 支持深色和浅色主题。用户可以更改主题，并且有一些方法可以覆盖他的决定并以您选择的颜色主题显示所有内容。但是，我只是想对这两种主题类型做出反应，我想以正确的颜色显示图标。

如果您使用应用程序栏，您可以从许多内置图标中进行选择，这些图标会自动从浅色变为深色，反之亦然。

为什么不支持普通图像？例如：我想显示一个电话图标。我从内置图标中选择了一个，并将其从 Microsoft SDK 文件夹复制到我项目的 Image 文件夹中。如果用户使用深色主题，一切都会好起来的，因为白色电话图标将在黑色背景上可见。但是如果他切换到浅色主题，图标将不可见，因为它是白底白字。

我完全了解文本框或背景颜色的样式资源，它们使用手机的重音或主题颜色。但为什么不支持我作为图像添加到 XAML 页面的简单图标？

当然，如果用户处于深色或浅色模式，我可以在页面的构造函数中检测到。然后我会加载黑色或白色版本的电话图标。但是每次我访问该页面时都会进行此检查并减慢一切。每次我添加主题感知图像时，手动添加主题检查也很烦人。

有没有只适用于 XAML 的解决方案？或者至少易于维护？为什么我不能从一开始就使用 SDK 中的内置图像？它们已经提供深色和浅色版本，并且已经在应用程序栏中使用。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-12-20T18:04:41.867

如果您希望图标在操作栏中发挥作用，只需为白色（如果是深色主题）和黑色（如果是浅色主题），那么您可以将图像作为不透明蒙版添加到矩形中，如下所示：

```
<Rectangle Fill="{StaticResource PhoneForegroundBrush}" Width="48" Height="48" >
    <Rectangle.OpacityMask>
        <ImageBrush ImageSource="/Images/my.icon.png" />
    </Rectangle.OpacityMask>
</Rectangle> 
```

其中 my.icon.png 是白色图像，就像您可以为操作栏选择的图像一样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T13:17:34.223

您可以使用矢量图形而不是位图图标，并使用主题感知画笔来绘制它们。

如果您希望应用程序响应主题的切换，您需要以任何方式响应它。

我在返回所选主题的视图的基类中添加了一个属性。这样我就可以使用/绑定到该值。

也可以使用将资源的逻辑名称转换为主题特定资源名称的 ValueConverter。

**编辑**

看看这个：[Windows Phone 7 上的自定义浅色/深色主题资源](http://blog.richardszalay.com/2011/06/11/practical-support-for-light-dark-themes-on-windows-phone-7/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T15:42:02.917

检测主题（我认为[支持深色和浅色主题](http://timdams.com/2011/06/21/creating-a-wp7-app-supporting-dark-and-light-themes/)是最好的解决方案），然后相应地设置图像。如果您经常这样做，那么您可以提供两个图像源并使用正确的图像源的自定义控件将很容易创建。

**编辑：**这是关于这个主题的另一篇好文章。[新的屏幕分辨率](http://vdcruijsen.net/2012/11/8-days-of-windows-phone-8-day-4-new-screen-resolutions/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T13:10:40.070

您选择一个白色前景图标使用它。它适用于 Light 和 Dark 主题。这就是我一直在做的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T13:41:58.777

[Coding 4 Fun](http://coding4fun.codeplex.com/)控制工具包包括一个模仿应用程序栏按钮的圆形按钮，包括根据主题更新前景色。代码是开源的，所以也许你可以在那里找到答案。或者，作为 hack，您可以使用 RoundButton 控件，关闭边框，并且不提供`Click`事件。

# c# - 是否可以使 DataSet 自动与 SQLite 数据库同步？

> ID：13972885
> 
> 赞同：1
> 
> 时间：2012-12-20T13:07:09.047
> 
> 标签：c#, .net, sqlite, ado.net

我正在尝试学习使用 SQLite，但我感到非常沮丧和困惑。我已经找到了 System.Data.SQLite，这显然是 C# 中用于 SQLite 的东西。

该网站没有任何文档。从 2010 年起显然已经过时的“原始网站”也没有文档。我可以找到一些博客教程，但据我所知，他们的操作方法基本上是：

1.  初始化数据库连接。
2.  将 SQL 语句馈送到连接中。
3.  取出来自连接的东西。
4.  关闭连接。

我不想在我的 C# 代码中编写 SQL 语句，它们很丑陋，而且我没有从 IDE 获得任何帮助，因为我必须将 SQL 代码放在字符串中。

我不能只是：

*   创建一个`DataSet`.
*   告诉`DataSet`它它应该对应于 SQLite 数据库`MyDB.sqlite`。
*   `DataSet`使用其成员函数来操作。
*   不用担心 SQLite，因为它会`DataSet`自动与磁盘上的 SQLite 数据库保持同步。

我知道我可以`DataSet`用数据库的内容填充 a，但如果我想访问整个数据库，我将不得不用它的`DataSet`所有内容填充。如果我的数据库是 1 GB，我刚刚用完了 1 GB 的 RAM（更不用说一次写入所有这些所需的时间）。

我不能简单地建立一个 SQLite 数据库连接并假装它只是一个普通的`DataSet`（可能需要偶尔询问它是否已经完成同步）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T14:22:42.040

这个问题的答案是否定的。
不，您不能简单地将 SQLite 连接假装它只是一个数据集。

如果您不想编写 SQL 语句，请考虑使用实体框架。
[将 SQLite 嵌入式数据库与实体框架和 Linq-to-SQL 一起使用](http://www.codeproject.com/Articles/236918/Using-SQLite-embedded-database-with-entity-framewo)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T13:11:04.673

您不应该将 a`DataSet`视为数据库。这只是查询的结果。

您查询数据库以获取数据*子集*（您永远不需要数据库中的所有数据），并且该子集用于填充您的`DataSet`.

您需要手动同步更改，因为`DataSet`不知道哪些更新应该是哪个事务的一部分。这是您的系统知识。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T13:10:36.053

DataSet 是内存缓存，只有在开发人员允许时才会同步到底层数据存储。您可以放置​​一个计时器包装器并按计划执行，但您仍然需要手动保持数据集和数据存储同步。

不建议存储 1GB 以上的数据，因为内存使用率会很高，性能会很低。你也不想通过网络发送这么多的数据，或者上帝禁止互联网连接。

为什么要在内存中保留 1GB 的数据？

# javascript - 翻转布尔变量的简写

> ID：13972887
> 
> 赞同：32
> 
> 时间：2012-12-20T13:07:18.813
> 
> 标签：javascript, boolean, flip, shorthand

如何在javascript中翻转布尔变量的值，而不必两次包含变量名？所以

```
foobarthings[foothing][barthing] = !foobarthings[foothing][barthing]; 
```

不用写`foobarthings[foothing][barthing]`两次。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-20T13:08:40.453

没有比您目前拥有的更短的方法了。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-20T13:21:24.013

你可以这样做：

```
foo ^= 1 
```

但这确实在 0 和 1 之间切换 foo，而不是 true 和 false。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-20T13:20:44.577

```
var value = true;
alert(value);
value ^= true;
alert(value);​ 
```

你可以在这里得到 1 或 0

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-08-15T14:39:27.697

要在 JS 中翻转布尔变量的值，您需要如下语法：

```
return !foo; 
```

真的就是这么简单...

或者你可以做`(foo ^= 1) == true`（​​必须是==不是===）

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-12-20T13:13:15.807

您可以在执行它或检查条件的地方只使用 foo 和 !foo 。

# ruby-on-rails - 使用延迟作业在邮件程序中引发 MissingTemplate 异常

> ID：13972889
> 
> 赞同：1
> 
> 时间：2012-12-20T13:07:26.583
> 
> 标签：ruby-on-rails, ruby, exception, exception-handling, delayed-job

我使用延迟作业在我的应用程序中执行后台任务。它做一些事情，然后发送邮件。这是作为延迟作业执行的代码块的示例。

```
def task
 # do stuff
 AppMailer.post.some_template(@variable)
end 
```

这一直工作正常，我在正确的目录 some_template.text.plain.erb 中有一个模板。我已经开始看到这会引发 MissingTemplate 异常，这会停止延迟的作业并在给定时间后再次尝试（正如预期的那样，延迟作业中引发异常时）。有些情况会失败 2 或 3 次然后交付成功，其他情况不会引发异常。如何在下次尝试时成功找到不存在的模板？

错误正在寻找模板`.erb`是`plain.text.erb`导致此问题的原因。任何想法为什么这会导致间歇性问题？我尝试将邮件的发送包装在救援块中，因为我宁愿不发送邮件也不愿引发异常。

```
def task
 # do stuff
 begin
 AppMailer.post.some_template(@variable)
 rescue ActionView::MissingTemplate => e
 # do stuff
 end
end 
```

但是仍然会引发异常。延迟的工作是否会阻止此救援块的工作？

这是堆栈跟踪

```
 Error:
    Missing template app_mailer/some_template.erb in view path app/views:vendor/plugins/tolk/app/views
    /data/app/shared/bundled_gems/ruby/1.8/gems/actionpack-2.3.14/lib/action_view/paths.rb:74:in `find_template'
    /data/app/shared/bundled_gems/ruby/1.8/gems/actionpack-2.3.14/lib/action_view/base.rb:264:in `render'
    /data/app/shared/bundled_gems/ruby/1.8/gems/actionmailer-2.3.14/lib/action_mailer/base.rb:600:in `render'
    /data/app/shared/bundled_gems/ruby/1.8/gems/actionmailer-2.3.14/lib/action_mailer/base.rb:586:in `render_message'
    /data/app/shared/bundled_gems/ruby/1.8/gems/actionmailer-2.3.14/lib/action_mailer/base.rb:526:in `create!'
    /data/app/shared/bundled_gems/ruby/1.8/gems/actionmailer-2.3.14/lib/action_mailer/base.rb:485:in `initialize'
    /data/app/shared/bundled_gems/ruby/1.8/gems/actionmailer-2.3.14/lib/action_mailer/base.rb:427:in `new'
    /data/app/shared/bundled_gems/ruby/1.8/gems/actionmailer-2.3.14/lib/action_mailer/base.rb:427:in `method_missing'
    /data/app/releases/20121127213524/app/models/mail_delivery.rb:55:in `send'
    /data/app/releases/20121127213524/app/models/mail_delivery.rb:55:in `serialize_mail'
    /data/app/shared/bundled_gems/ruby/1.8/gems/activesupport-2.3.14/lib/active_support/callbacks.rb:178:in `send'
    /data/app/shared/bundled_gems/ruby/1.8/gems/activesupport-2.3.14/lib/active_support/callbacks.rb:178:in `evaluate_method'
    /data/app/shared/bundled_gems/ruby/1.8/gems/activesupport-2.3.14/lib/active_support/callbacks.rb:166:in `call'
    /data/app/shared/bundled_gems/ruby/1.8/gems/activesupport-2.3.14/lib/active_support/callbacks.rb:93:in `run'
    /data/app/shared/bundled_gems/ruby/1.8/gems/activesupport-2.3.14/lib/active_support/callbacks.rb:92:in `each'
    /data/app/shared/bundled_gems/ruby/1.8/gems/activesupport-2.3.14/lib/active_support/callbacks.rb:92:in `send'
    /data/app/shared/bundled_gems/ruby/1.8/gems/activesupport-2.3.14/lib/active_support/callbacks.rb:92:in `run'
    /data/app/shared/bundled_gems/ruby/1.8/gems/activesupport-2.3.14/lib/active_support/callbacks.rb:276:in `run_callbacks'
    /data/app/shared/bundled_gems/ruby/1.8/gems/activerecord-2.3.14/lib/active_record/callbacks.rb:344:in `callback'
    /data/app/shared/bundled_gems/ruby/1.8/gems/activerecord-2.3.14/lib/active_record/callbacks.rb:265:in `create'
    /data/app/shared/bundled_gems/ruby/1.8/gems/activerecord-2.3.14/lib/active_record/base.rb:2927:in `create_or_update_without_callbacks'
    /data/app/shared/bundled_gems/ruby/1.8/gems/activerecord-2.3.14/lib/active_record/callbacks.rb:250:in `create_or_update'
    /data/app/shared/bundled_gems/ruby/1.8/gems/activerecord-2.3.14/lib/active_record/base.rb:2577:in `save_without_validation'
    /data/app/shared/bundled_gems/ruby/1.8/gems/activerecord-2.3.14/lib/active_record/validations.rb:1089:in `save_without_dirty'
    /data/app/shared/bundled_gems/ruby/1.8/gems/activerecord-2.3.14/lib/active_record/dirty.rb:79:in `save_without_transactions'
    /data/app/shared/bundled_gems/ruby/1.8/gems/activerecord-2.3.14/lib/active_record/transactions.rb:229:in `send'
    /data/app/shared/bundled_gems/ruby/1.8/gems/activerecord-2.3.14/lib/active_record/transactions.rb:229:in `with_transaction_returning_status'
    /data/app/shared/bundled_gems/ruby/1.8/gems/activerecord-2.3.14/lib/active_record/connection_adapters/abstract/database_statements.rb:136:in `transaction'
    /data/app/shared/bundled_gems/ruby/1.8/gems/activerecord-2.3.14/lib/active_record/transactions.rb:182:in `transaction_without_trace_ActiveRecord_self_name_transaction'
    /data/app/shared/bundled_gems/ruby/1.8/gems/newrelic_rpm-3.4.0.1/lib/new_relic/agent/method_tracer.rb:491:in `transaction'
    /data/app/shared/bundled_gems/ruby/1.8/gems/newrelic_rpm-3.4.0.1/lib/new_relic/agent/method_tracer.rb:242:in `trace_execution_scoped'
    /data/app/shared/bundled_gems/ruby/1.8/gems/newrelic_rpm-3.4.0.1/lib/new_relic/agent/method_tracer.rb:486:in `transaction'
    /data/app/shared/bundled_gems/ruby/1.8/gems/activerecord-2.3.14/lib/active_record/transactions.rb:228:in `with_transaction_returning_status'
    /data/app/shared/bundled_gems/ruby/1.8/gems/activerecord-2.3.14/lib/active_record/transactions.rb:196:in `save'
    /data/app/shared/bundled_gems/ruby/1.8/gems/activerecord-2.3.14/lib/active_record/transactions.rb:208:in `rollback_active_record_state!'
    /data/app/shared/bundled_gems/ruby/1.8/gems/activerecord-2.3.14/lib/active_record/transactions.rb:196:in `save'
    /data/app/shared/bundled_gems/ruby/1.8/gems/activerecord-2.3.14/lib/active_record/base.rb:727:in `create'
    /data/app/releases/20121127213524/app/models/mail_delivery.rb:88:in `method_missing'
    /data/app/releases/20121127213524/lib/job_manifest.rb:670:in `notify_user_of_upload_without_audit'
    /data/app/releases/20121127213524/lib/job_manifest.rb:6:in `send'
    /data/app/releases/20121127213524/lib/job_manifest.rb:6:in `notify_user_of_upload_with_audit'
    /data/app/releases/20121127213524/lib/job_manifests/app_send_job.rb:43:in `notify_user_of_upload'
    /data/app/releases/20121127213524/lib/job_manifests/app_send_job.rb:43:in `extended'
    /data/app/releases/20121127213524/lib/job_manifest.rb:102:in `preflight_completed_changed_delayed'
    /data/app/shared/bundled_gems/ruby/1.8/gems/delayed_job-2.0.7/lib/delayed/performable_method.rb:35:in `send'
    /data/app/shared/bundled_gems/ruby/1.8/gems/delayed_job-2.0.7/lib/delayed/performable_method.rb:35:in `perform'
    /data/app/shared/bundled_gems/ruby/1.8/gems/delayed_job-2.0.7/lib/delayed/backend/base.rb:74:in `invoke_job'
    /data/app/shared/bundled_gems/ruby/1.8/gems/delayed_job-2.0.7/lib/delayed/worker.rb:122:in `run'
    /usr/lib64/ruby/1.8/timeout.rb:67:in `timeout'
    /data/app/shared/bundled_gems/ruby/1.8/gems/delayed_job-2.0.7/lib/delayed/worker.rb:122:in `run'
    /usr/lib64/ruby/1.8/benchmark.rb:308:in `realtime'
    /data/app/shared/bundled_gems/ruby/1.8/gems/delayed_job-2.0.7/lib/delayed/worker.rb:121:in `run'
    /data/app/shared/bundled_gems/ruby/1.8/gems/delayed_job-2.0.7/lib/delayed/worker.rb:173:in `reserve_and_run_one_job'
    /data/app/shared/bundled_gems/ruby/1.8/gems/delayed_job-2.0.7/lib/delayed/worker.rb:106:in `work_off'
    /data/app/shared/bundled_gems/ruby/1.8/gems/delayed_job-2.0.7/lib/delayed/worker.rb:105:in `times'
    /data/app/shared/bundled_gems/ruby/1.8/gems/delayed_job-2.0.7/lib/delayed/worker.rb:105:in `work_off'
    /data/app/shared/bundled_gems/ruby/1.8/gems/delayed_job-2.0.7/lib/delayed/worker.rb:80:in `start'
    /usr/lib64/ruby/1.8/benchmark.rb:308:in `realtime'
    /data/app/shared/bundled_gems/ruby/1.8/gems/delayed_job-2.0.7/lib/delayed/worker.rb:79:in `start'
    /data/app/shared/bundled_gems/ruby/1.8/gems/delayed_job-2.0.7/lib/delayed/worker.rb:76:in `loop'
    /data/app/shared/bundled_gems/ruby/1.8/gems/delayed_job-2.0.7/lib/delayed/worker.rb:76:in `start'
    /data/app/shared/bundled_gems/ruby/1.8/gems/delayed_job-2.0.7/lib/delayed/command.rb:100:in `run'
    (eval):1
    /data/app/current/script/runner:3:in `eval'
    /data/app/shared/bundled_gems/ruby/1.8/gems/rails-2.3.14/lib/commands/runner.rb:48
    /data/app/current/script/runner:3:in `require'
    /data/app/current/script/runner:3 
```

我知道这里有几个问题，但任何建议都将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T14:25:41.430

仅从您发布的内容很难说，但是对于延迟的作业邮件错误，我通常会检查两件事：

1.  当您部署新代码时，您的工作人员正在重新启动，以便他们使用您的应用程序的最新版本。

2.  您传递给 Mailer 方法的参数是否用于检索记录？如果是这样，请注意记录在创建的工作和正在工作的工作之间不会更改或消失。如果是这种情况，请考虑准确传递构建邮件所需的属性。

# ruby - 重构字符串 .gsub

> ID：13972892
> 
> 赞同：0
> 
> 时间：2012-12-20T13:07:41.200
> 
> 标签：ruby, regex

由于不是正则表达式的专家，我认为可以优化下一个代码。我将不胜感激任何帮助。

```
line = ".ui-icon-arrowrefresh-1-s { background-position: -176px -3px; }"

line.gsub!(/-?\d+px/) do |match|
  match.gsub(/-?\d+/) do |i|
    i.to_i + 4
  end
end

#=> ".ui-icon-arrowrefresh-1-s { background-position: -172px 1px; }" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T13:14:17.977

```
line.gsub(/-?\d+(?=px)/){|s| s.to_i+4} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T13:47:27.590

你真的不需要任何前瞻或分组：

```
line.gsub(/-?\d+px/){|s| "#{s.to_i+4}px"}
#=> ".ui-icon-arrowrefresh-1-s { background-position: -172px 1px; }" 
```

# c++ - 查找 QGraphicsItem 的轮廓

> ID：13972896
> 
> 赞同：0
> 
> 时间：2012-12-20T13:07:49.587
> 
> 标签：c++, qt4, geometry, qgraphicsitem

我有自己的 QGraphicsLineItem 类型的派生类，我在其中重写paint() 以将其呈现为箭头。

我的测试线是160、130、260、230

我的paint() 实现：

```
void MyQGraphicsLineItem::paint( QPainter* aPainter, const QStyleOptionGraphicsItem*     aOption, QWidget* aWidget /*= nullptr*/ )
{
Q_UNUSED( aWidget );

aPainter->setClipRect( aOption->exposedRect );

// Get the line and its angle
QLineF cLine = line();
const qreal cLineAngle = cLine.angle();

// Create two copies of the line
QLineF head1 = cLine;
QLineF head2 = cLine;

// Shorten each line and set its angle relative to the main lines angle
// this gives up the "arrow head" lines
head1.setLength( 12 );
head1.setAngle( cLineAngle+-32 );

head2.setLength( 12 );
head2.setAngle( cLineAngle+32 );

// Draw shaft
aPainter->setPen( QPen( Qt::black, 1, Qt::SolidLine ) );
aPainter->drawLine( cLine );

// Draw arrow head
aPainter->setPen( QPen( Qt::red, 1, Qt::SolidLine ) );
aPainter->drawLine( head1 );
aPainter->setPen( QPen( Qt::magenta, 1, Qt::SolidLine ) );
aPainter->drawLine( head2 );
} 
```

这会绘制一个如下所示的箭头：

![在此处输入图像描述](../Images/cdabc5b7db01e31b832f2121d8019e6c.png)

我想做的是能够计算这个项目的“轮廓”，这样我就可以从数据中绘制一个填充的 QPolygon。

我不能使用任何快捷方式，例如用不同的笔宽绘制两条线，因为我希望轮廓是动画的“虚线”（又名行军蚂蚁）。

我确信这很容易计算，但我的数学技能非常糟糕 - 我尝试通过执行以下操作来创建平行线：

1.  存储线角度。
2.  将角度设置为 0。
3.  复制该行。
4.  在副本上使用 QLineF::translate()。
5.  将两条线的角度设置回您存储在 1 中的值 - 这会导致每条线的起点和终点位置错位。

希望有人能让我走上正确的轨道，从这条线创建一个厚的 QPolygonF（或其他任何有意义的东西），然后可以为绘画设置轮廓和填充。

此外，我计划在我的场景中拥有 1000 个这样的解决方案，因此理想情况下，我还想要一个不会花费太多执行时间或具有简单优化方法的解决方案。

![在此处输入图像描述](../Images/2266772b7acae5bba3c4c3ee79a488f2.png)

这张图片是我想要实现的 - 想象一下红线是一条 qt 虚线，而不是我非常糟糕的 mspaint 尝试绘制它！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T13:01:53.703

即使稍后在场景中移动和旋转箭头，此解决方案也有效：

箭头.h

```
#ifndef ARROW_H
#define ARROW_H

#include <QGraphicsLineItem>
#include <QObject>
#include <QtCore/qmath.h>

class Arrow : public QGraphicsLineItem, public QObject
{
public:
    Arrow(qreal x1, qreal y1, qreal x2, qreal y2, QGraphicsItem* parent = 0);
    virtual ~Arrow();

    QPointF      objectEndPoint1();
    QPointF      objectEndPoint2();

    void setObjectEndPoint1(qreal x1, qreal y1);
    void setObjectEndPoint2(qreal x2, qreal y2);

protected:
    void paint(QPainter*, const QStyleOptionGraphicsItem*, QWidget*);
    void timerEvent(QTimerEvent* event);

private:
    inline qreal pi() { return (qAtan(1.0)*4.0); }
    inline qreal radians(qreal degrees) { return (degrees*pi()/180.0); }

    void createArrow(qreal penWidth);

    QPainterPath arrowPath;
    QPainterPath strokePath;
    QPainterPath fillPath;

    int timerID_Anim;
    int animFrame;
    qreal animLength;
    QVector<qreal> dashPattern;
};

#endif 
```

箭头.cpp

```
#include "arrow.h"
#include <QPen>
#include <QPainter>
#include <QTimerEvent>

Arrow::Arrow(qreal x1, qreal y1, qreal x2, qreal y2, QGraphicsItem* parent) : QGraphicsLineItem(0, 0, x2, y2, parent)
{
    setFlag(QGraphicsItem::ItemIsSelectable, true);

    setObjectEndPoint1(x1, y1);
    setObjectEndPoint2(x2, y2);

    qreal dashLength = 3;
    qreal dashSpace = 3;
    animLength = dashLength + dashSpace;
    dashPattern << dashLength << dashSpace;

    createArrow(1.0);

    animFrame = 0;
    timerID_Anim = startTimer(100);
}

Arrow::~Arrow()
{
}

void Arrow::timerEvent(QTimerEvent* event)
{
    if(event->timerId() == timerID_Anim)
    {
        animFrame++;
        if(animFrame >= animLength) animFrame = 0;
    }

    update(); //This forces a repaint, even if the mouse isn't moving
}

void Arrow::createArrow(qreal penWidth)
{
    QPen arrowPen = pen();
    arrowPen.setWidthF(penWidth);
    arrowPen.setDashPattern(dashPattern);
    setPen(arrowPen);

    QPointF p1 = line().p1();
    QPointF p2 = line().p2();
    qreal angle = line().angle();
    qreal arrowHeadAngle = 32.0;
    qreal length = line().length();
    qreal arrowHeadLength = length/10.0;
    QLineF arrowLine1(p1, p2);
    QLineF arrowLine2(p1, p2);
    arrowLine1.setAngle(angle + arrowHeadAngle);
    arrowLine2.setAngle(angle - arrowHeadAngle);
    arrowLine1.setLength(arrowHeadLength);
    arrowLine2.setLength(arrowHeadLength);

    QPainterPath linePath;
    linePath.moveTo(p1);
    linePath.lineTo(p2);
    QPainterPath arrowheadPath;
    arrowheadPath.moveTo(arrowLine1.p2());
    arrowheadPath.lineTo(p1);
    arrowheadPath.lineTo(arrowLine2.p2());
    arrowheadPath.lineTo(p1);
    arrowheadPath.lineTo(arrowLine1.p2());

    arrowPath = QPainterPath();
    arrowPath.addPath(linePath);
    arrowPath.addPath(arrowheadPath);
}

void Arrow::paint(QPainter* painter, const QStyleOptionGraphicsItem* /*option*/, QWidget* /*widget*/)
{
    QPen paintPen = pen();

    QPainterPathStroker stroker;
    stroker.setWidth(paintPen.widthF());
    stroker.setCapStyle(Qt::FlatCap);
    stroker.setJoinStyle(Qt::MiterJoin);

    strokePath = stroker.createStroke(arrowPath);
    strokePath = strokePath.simplified();

    stroker.setDashOffset(animFrame);
    stroker.setDashPattern(dashPattern);
    fillPath = stroker.createStroke(strokePath);

    paintPen.setDashOffset(animFrame);
    painter->fillPath(fillPath, QBrush(QColor(255,0,0)));
    painter->fillPath(strokePath, QBrush(QColor(0,255,0)));  
}

QPointF Arrow::objectEndPoint1()
{
    return scenePos();
}

QPointF Arrow::objectEndPoint2()
{
    QLineF lyne = line();
    qreal rot = radians(rotation());
    qreal cosRot = qCos(rot);
    qreal sinRot = qSin(rot);
    qreal x2 = lyne.x2();
    qreal y2 = lyne.y2();
    qreal rotEnd2X = x2*cosRot - y2*sinRot;
    qreal rotEnd2Y = x2*sinRot + y2*cosRot;

    return (scenePos() + QPointF(rotEnd2X, rotEnd2Y));
}

void Arrow::setObjectEndPoint1(qreal x1, qreal y1)
{
    QPointF endPt2 = objectEndPoint2();
    qreal x2 = endPt2.x();
    qreal y2 = endPt2.y();
    qreal dx = x2 - x1;
    qreal dy = y2 - y1;
    setRotation(0);
    setLine(0, 0, dx, dy);
    setPos(x1, y1);
}

void Arrow::setObjectEndPoint2(qreal x2, qreal y2)
{
    QPointF endPt1 = scenePos();
    qreal x1 = endPt1.x();
    qreal y1 = endPt1.y();
    qreal dx = x2 - x1;
    qreal dy = y2 - y1;
    setRotation(0);
    setLine(0, 0, dx, dy);
    setPos(x1, y1);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T17:43:08.013

我几乎忘记了这个问题，这是我的 PyQt 解决方案，我不确定是否有任何方法可以提高它的性能。

类箭头项（QGraphicsLineItem）：

```
def __init__(self,  x, y , w, h,  parent = None):
    super(ArrowItem, self).__init__( x, y, w, h,  parent)
    self.init()

def paint(self, painter, option, widget):
    painter.setClipRect( option.exposedRect )
    painter.setBrush( Qt.yellow )

    if self.isSelected():
        p = QPen( Qt.red, 2, Qt.DashLine )
        painter.setPen( p )
    else:
        p = QPen( Qt.black, 2, Qt.SolidLine )
        p.setJoinStyle( Qt.RoundJoin )
        painter.setPen( p )

    painter.drawPath( self.shape() )

def shape(self):
    # Calc arrow head lines based on the angle of the current line
    cLine = self.line()

    kArrowHeadLength = 13
    kArrowHeadAngle = 32

    cLineAngle = cLine.angle()
    head1 = QLineF(cLine)
    head2 = QLineF(cLine)
    head1.setLength( kArrowHeadLength )
    head1.setAngle( cLineAngle+-kArrowHeadAngle )
    head2.setLength( kArrowHeadLength )
    head2.setAngle( cLineAngle+kArrowHeadAngle )

    # Create paths for each section of the arrow
    mainLine = QPainterPath()
    mainLine.moveTo( cLine.p2() )
    mainLine.lineTo( cLine.p1() )

    headLine1 = QPainterPath()
    headLine1.moveTo( cLine.p1() )
    headLine1.lineTo( head1.p2() )

    headLine2 = QPainterPath()
    headLine2.moveTo( cLine.p1() )
    headLine2.lineTo( head2.p2() )

    stroker = QPainterPathStroker()
    stroker.setWidth( 4 )

    # Join them together
    stroke = stroker.createStroke( mainLine )
    stroke.addPath( stroker.createStroke( headLine1 ) )
    stroke.addPath( stroker.createStroke( headLine2 ) )

    return stroke.simplified()

def boundingRect(self):
    pPath = self.shape()
    bRect = pPath.controlPointRect()
    adjusted = QRectF( bRect.x()-1, bRect.y()-1, bRect.width()+2, bRect.height()+2 )
    return adjusted 
```

..当然将项目设置为可移动/可选择。

所以你可以看到获得“轮廓”所需的类是 QPainterPathStroker。

[http://doc.qt.io/qt-5/qpainterpathstroker.html#details](http://doc.qt.io/qt-5/qpainterpathstroker.html#details)

# c# - 奇怪的 ASP.NET 表单身份验证问题

> ID：13972897
> 
> 赞同：1
> 
> 时间：2012-12-20T13:07:53.737
> 
> 标签：c#, asp.net, authentication, login, forms-authentication

在我的 default.aspx 上是一个登录页面：

默认.aspx：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="Portal.Default"
    MasterPageFile="Portal.Master" Title="Login" %>

<asp:Content runat="server" ContentPlaceHolderID="MainContentPlaceHolder">
    <div class="block" id="login">
        <h2>Login</h2>
        <asp:Label style="top: 15px;left: 11px" runat="server" Text="User Name :" CssClass="label" />
        <asp:TextBox ID="txtLoginUserName" Style="top: 15px;left: 17px; width:100px" runat="server"  CssClass="textbox" />
        <asp:Label style="top: 20px;left: 19px;" runat="server" Text="Password :" CssClass="label" />
        <asp:TextBox ID="txtLoginPassword" Style="top: 20px;left: 25px; width:100px;"  runat="server" TextMode="Password" CssClass="textbox" />
        <asp:Button ID="btnLogin" Style="top:30px;left: 91px" CssClass="button" runat="server" Text="Login" OnClick="BtnSubmitClick" />
    </div>
</asp:Content> 
```

后面的代码：

```
using System;
using System.Linq;
using System.Web.Security;

namespace Portal
{
    public partial class Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            Page.Form.DefaultFocus = txtLoginUserName.ClientID;
        }

        protected void BtnSubmitClick(object sender, EventArgs e)
        {
            using (var db = new DbContext())
            {
                if (db.Users.Any(x => x.Username == txtLoginUserName.Text && x.Password == txtLoginPassword.Text))
                {
                    FormsAuthentication.RedirectFromLoginPage(txtLoginUserName.Text, true);
                }
                else
                {
                    ClientScript.RegisterStartupScript(GetType(), "myalert", "alert('* invalid credentials, please try again');", true);
                }
            }
        }
    }
} 
```

网络配置：

```
<?xml version="1.0" encoding="utf-8"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>

  <location path="default.aspx">
    <system.web>
      <authorization>
        <allow users="?" />
      </authorization>
    </system.web>
  </location>

  <location path="Styles">
    <system.web>
      <authorization>
        <allow users="?" />
      </authorization>
    </system.web>
  </location>

  <location path="Console.aspx">
    <system.web>
      <authorization>
        <allow users="*" />
      </authorization>
    </system.web>
  </location>

  <location path="Options.aspx">
    <system.web>
      <authorization>
        <allow users="*" />
      </authorization>
    </system.web>
  </location>

  <system.web>

    <authorization>
      <deny users="?" />
    </authorization>

    <authentication mode="Forms">
      <forms name="Portal" loginUrl="default.aspx" defaultUrl="console.aspx" />
    </authentication>

    ...

  </system.web>

</configuration> 
```

问题是当我访问我的网站时，`http://www.myhostname.com/default.aspx`它没有带我去`http://myhostname.com/default.aspx?ReturnUrl=%2f`哪个奇怪的地方，所以我输入用户名和密码，点击登录...一切都变成空白...网址更改为`http://www.myhostname.com`，我输入所有内容第二次...之后它登录...并转到`console.aspx`

为什么这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:40:56.847

如指定here

[http://msdn.microsoft.com/en-US/library/s09bfdt2(v=vs.80).aspx](http://msdn.microsoft.com/en-US/library/s09bfdt2(v=vs.80).aspx)

```
FormsAuthentication.RedirectFromLoginPage 
```

将经过身份验证的用户重定向回最初请求的 URL 或默认 URL。

```
ReturnUrl=%2f 
```

用于您的第一次登录和第二次的默认网址

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T14:49:08.213

我这样解决了这个问题：

1.  将 default.aspx 重命名为 login.aspx 并更新了所有参考。
2.  将 console.aspx 重命名为 default.aspx 并更新了所有参考。

现在我将 web.config 更改为看起来更简单，如下所示：

```
<?xml version="1.0"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
  <system.web>

    <authorization>
      <deny users="?"/>
    </authorization>

    <authentication mode="Forms">
    </authentication>

    ...

  </system.web>  
</configuration> 
```

现在它可以在第一次登录时使用，我对所有这些简化都很满意：D

# c# - 无法将 PLAINTEXT 签名与 DotNetOpenAuth ServiceProvider 一起使用

> ID：13972898
> 
> 赞同：70
> 
> 时间：2012-12-20T13:08:01.240
> 
> 标签：c#, asp.net, dotnetopenauth

我正在使用（NuGet 包）构建[`OAuth 1.0(a)`](http://oauth.net/core/1.0a)授权服务器。服务器托管在 ASP.NET 应用程序中，但这与问题无关。[`DotNetOpenAuth`](http://www.dotnetopenauth.net/)`DotNetOpenAuth.OAuth.ServiceProvider, version = 4.1.4.12333`

我[`ServiceProvider`](https://github.com/AArnott/dotnetopenid/blob/master/src/DotNetOpenAuth.OAuth.ServiceProvider/OAuth/ServiceProvider.cs)的配置如下：

```
private ServiceProvider GetServiceProvider()
{
    var baseUri = "http://myauth.com";
    return new ServiceProvider(
        new ServiceProviderDescription
        {
            UserAuthorizationEndpoint = new MessageReceivingEndpoint(
                new Uri(baseUri + "/get_request_token"), 
                HttpDeliveryMethods.GetRequest
            ),
            RequestTokenEndpoint = new MessageReceivingEndpoint(
                new Uri(baseUri + "/authorize"), 
                HttpDeliveryMethods.PostRequest
            ),
            AccessTokenEndpoint = new MessageReceivingEndpoint(
                new Uri(baseUri + "/get_token"), 
                HttpDeliveryMethods.PostRequest
            ),
            ProtocolVersion = ProtocolVersion.V10a,
            TamperProtectionElements = new ITamperProtectionChannelBindingElement[] 
            {
                new PlaintextSigningBindingElement(),
                new HmacSha1SigningBindingElement(),
            },
        },
        tokenManager,
        new OAuthServiceProviderMessageFactory(tokenManager)
    );
} 
```

我的端点的相关部分`get_request_token`如下所示：

```
var serviceProvider = GetServiceProvider();
var tokenRequest = serviceProvider.ReadTokenRequest(); 
```

现在，当消费者向此端点发送以下请求时：

```
GET /get_request_token?oauth_nonce=C5657420BCE5F3224914304376B5334696B09B7FFC17C105A7F9629A008869DC&oauth_timestamp=1356006599&oauth_consumer_key=sampleconsumer&oauth_signature_method=plaintext&oauth_signature=samplesecret%26&oauth_version=1.0&oauth_callback=http%3a%2f%2flocalhost%3a30103%2fCustomOAuth1 HTTP/1.1

Host: localhost:8180
Connection: close 
```

（为清楚起见而打断）：

```
oauth_nonce=C5657420BCE5F3224914304376B5334696B09B7FFC17C105A7F9629A008869DC
oauth_timestamp=1356006599
oauth_consumer_key=sampleconsumer
oauth_signature_method=plaintext
oauth_signature=samplesecret%26
oauth_version=1.0
oauth_callback=http%3a%2f%2flocalhost%3a30103%2fCustomOAuth1 
```

该`serviceProvider.ReadTokenRequest()`方法抛出异常：

```
The UnauthorizedTokenRequest message required protections {All} but the channel could only apply {Expiration, ReplayProtection}.
   at DotNetOpenAuth.Messaging.Channel.ProcessIncomingMessage(IProtocolMessage message)
   at DotNetOpenAuth.Messaging.Channel.ReadFromRequest(HttpRequestBase httpRequest)
   at DotNetOpenAuth.Messaging.Channel.TryReadFromRequest[TRequest](HttpRequestBase httpRequest, TRequest& request)
   at DotNetOpenAuth.OAuth.ServiceProvider.ReadTokenRequest(HttpRequestBase request)
   at DotNetOpenAuth.OAuth.ServiceProvider.ReadTokenRequest()
   at OAuthServers.OAuth1.Services.OAuth1Service.Any(GetRequestTokenRequest request)
   at lambda_method(Closure , Object , Object )
   at ServiceStack.ServiceHost.ServiceRunner`1.Execute(IRequestContext requestContext, Object instance, TRequest request) 
```

另一方面，如果客户端发送以下请求：

```
GET /get_request_token?oauth_callback=http%3a%2f%2flocalhost%3a65271%2foauth1%2fHandleAccessToken&oauth_consumer_key=sampleconsumer&oauth_nonce=rGFvxlWm&oauth_signature_method=HMAC-SHA1&oauth_signature=HV%2f5Vq%2b0cF3NrtiISE9k4jmgCrY%3d&oauth_version=1.0&oauth_timestamp=1356007830 HTTP/1.1

Host: localhost:8180
Connection: close 
```

（为清楚起见而打断）：

```
oauth_callback=http%3a%2f%2flocalhost%3a65271%2foauth1%2fHandleAccessToken
oauth_consumer_key=sampleconsumer
oauth_nonce=rGFvxlWm
oauth_signature_method=HMAC-SHA1
oauth_signature=HV%2f5Vq%2b0cF3NrtiISE9k4jmgCrY%3d
oauth_version=1.0
oauth_timestamp=1356007830 
```

它成功了。

如您所见，这两个请求之间的唯一区别是`oauth_signature_method`正在使用。在第一种情况下`PLAINTEXT`使用，而在第二种情况下`HMAC-SHA1`。

是否可以让 DotNetOpenAuth 接受`PLAINTEXT`请求令牌端点的签名方法以及 GET 动词（即使[`OAuth 1.0(a) specification`](http://oauth.net/core/1.0a/#rfc.section.6.1.1)建议将此端点使用 POST）？是否有一些配置选项可以*放宽*服务器上的这个要求？

目前修改客户端不是我的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-20T12:34:52.217

以下代码块可以帮助您生成纯文本签名

```
public static string GetSignature(OAuthSignatureMethod signatureMethod,             AuthSignatureTreatment signatureTreatment, string signatureBase, string consumerSecret, string tokenSecret)
{
    if (tokenSecret.IsNullOrBlank())
    {
        tokenSecret = String.Empty;
    }

    consumerSecret = UrlEncodeRelaxed(consumerSecret);
    tokenSecret = UrlEncodeRelaxed(tokenSecret);

    string signature;
    switch (signatureMethod)
    {
        case OAuthSignatureMethod.HmacSha1:
        {
            var crypto = new HMACSHA1();
            var key = "{0}&{1}".FormatWith(consumerSecret, tokenSecret);

            crypto.Key = _encoding.GetBytes(key);
            signature = signatureBase.HashWith(crypto);

            break;
        }
        case OAuthSignatureMethod.PlainText:
        {
            signature = "{0}&{1}".FormatWith(consumerSecret, tokenSecret);

            break;
        }
        default:
            throw new NotImplementedException("Only HMAC-SHA1 is currently supported.");
        }

        var result = signatureTreatment == OAuthSignatureTreatment.Escaped
            ? UrlEncodeRelaxed(signature)
            : signature;

        return result;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-18T17:09:49.143

OAuth 身份验证分三步完成：

1.  消费者获得未经授权的请求令牌。

2.  用户授权请求令牌。

3.  消费者将请求令牌交换为访问令牌。

所以这就是它的样子：

```
public class InMemoryTokenManager : IConsumerTokenManager, IOpenIdOAuthTokenManager
{
private Dictionary<string, string> tokensAndSecrets = new Dictionary<string, string>();

public InMemoryTokenManager(string consumerKey, string consumerSecret)
{
    if (String.IsNullOrEmpty(consumerKey))
    {
        throw new ArgumentNullException("consumerKey");
    }

    this.ConsumerKey = consumerKey;
    this.ConsumerSecret = consumerSecret;
}

public string ConsumerKey { get; private set; }

public string ConsumerSecret { get; private set; }

#region ITokenManager Members

public string GetConsumerSecret(string consumerKey)
{
    if (consumerKey == this.ConsumerKey)
    {
        return this.ConsumerSecret;
    }
    else
    {
        throw new ArgumentException("Unrecognized consumer key.", "consumerKey");
    }
}

public string GetTokenSecret(string token)
{
    return this.tokensAndSecrets[token];
}

public void StoreNewRequestToken(UnauthorizedTokenRequest request, ITokenSecretContainingMessage response)
{
    this.tokensAndSecrets[response.Token] = response.TokenSecret;
}

public void ExpireRequestTokenAndStoreNewAccessToken(string consumerKey, string requestToken, string accessToken, string accessTokenSecret)
{
    this.tokensAndSecrets.Remove(requestToken);
    this.tokensAndSecrets[accessToken] = accessTokenSecret;
}

/// <summary>
/// Classifies a token as a request token or an access token.
/// </summary>
/// <param name="token">The token to classify.</param>
/// <returns>Request or Access token, or invalid if the token is not recognized.</returns>
public TokenType GetTokenType(string token)
{
    throw new NotImplementedException();
}

#endregion

#region IOpenIdOAuthTokenManager Members

public void StoreOpenIdAuthorizedRequestToken(string consumerKey, AuthorizationApprovedResponse authorization)
{
    this.tokensAndSecrets[authorization.RequestToken] = string.Empty;
}

#endregion
} 
```

# objective-c - 返回不可变对象的首选方式

> ID：13972902
> 
> 赞同：10
> 
> 时间：2012-12-20T13:08:11.933
> 
> 标签：objective-c, types, immutability, mutable

如果我有一个看起来像这样的方法：

```
- (NSDictionary *)removeDataInDictionary:(NSDictionary *)dictionary {

    NSMutableDictionary *mutableDictionary = [dictionary mutableCopy];
    [mutableDictionary removeObjectForKey:@"key"];

    // Return option 1
    return [NSDictionary dictionaryWithDictionary:mutableDictionary];

    // Return option 2
    return (NSDictionary *) mutableDictionary;
} 
```

选项 1 在代码方面是否“更好”，因为它真的会返回 a`NSDictionary`而选项 2 实际上会返回`NSMutableDictionary`伪装成 a 的`NSDictionary`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T13:11:55.087

返回选项 1 将创建一个不可变`NSDictionary`对象，如果您不希望以任何方式对其进行编辑，则可以这样做。

返回选项 2 将返回一个`NSMutableDictionary`反正。将其转换为 a`NSDictionary`不会有任何区别

但是：当调用此方法时，您会看到它返回 an `NSDictionary`，因此您必须将其视为外部对象，因此除非您检查对象类然后将其强制转换为方法外部的 NSMutableDictionary，否则它在外部看起来是不可变的。

# c# - 在导入此 dll 的类之外调用导入的 dll 中的方法

> ID：13972906
> 
> 赞同：0
> 
> 时间：2012-12-20T13:08:20.450
> 
> 标签：c#, dll

我正在尝试从另一个类调用一个方法，该方法位于我导入的 dll 中。有没有办法做到这一点？先感谢您！澄清一下：有一个名为“TTSManager”的类。在这个类中导入了一个 dll。还有一个类“TTSdotNET”，在这个类中，我想在 dll 中调用一个方法，但该方法不可访问。我希望有人能帮助我。PS我在C#“TTSManager”中编码：使用UnityEngine；使用 System.Collections；使用系统；使用 System.Runtime.InteropServices；

```
public class TTSManager : MonoBehaviour 
{
[DllImport ("SpeakerLib")]
private static extern void SpeakToSpeaker(string tts);  
[DllImport ("SpeakerLib")]
private static extern void SpeakToFile(string tts, string fileName, string fileFormat);                                     [DllImport ("SpeakerLib")]
private static extern void ReleaseSpeaker();

private static TTSManager instance = null;

private TTSManager(){}

public static TTSManager getInstance
{
    get
    {
        if(instance == null)
        {
            instance = new TTSManager();
        }
        return instance;
    }
}

// Use this for initialization
void Start () 
{

}

// Update is called once per frame
void Update () 
{

}
} 
```

“TTSdotNET”：

```
public class TTSdotNet : MonoBehaviour 
{
 void Update () 
 {
  if (Input.GetKey(KeyCode.F10))
  {
   SpeakToSpeaker("hello world i feel uncomfortable.");
  }
 }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T13:22:10.107

我倾向于为 DLL 导入创建一个单独的静态类。除了导入函数之外，我主要还为每个 DLL 函数调用创建包装器方法。

例子：

```
internal static class NativeCalls
{
    [DllImport ...]
    private static extern int SomeFunctionCall(...);

    public static int SomeFunction(...)
    {
        return SomeFunctionCall(...);
    }
} 
```

这样，任何类都可以访问 DLL，您的问题就解决了。

# sockets - 异步套接字编程中的 if 条件

> ID：13972919
> 
> 赞同：0
> 
> 时间：2012-12-20T13:09:58.357
> 
> 标签：sockets

如何在异步套接字编程中使用 if 条件。

例如，如果客户端发送“hello”，则服务器响应为“hi”，如果客户端发送“how r u”，则服务器发送“我很好”。我有这段代码，我正在尝试这样做，但它不起作用。请告诉我需要在哪里更改我的代码。提前致谢 这是服务器代码

公共类 StateObject { 公共套接字工作套接字 = null;

```
 public const int BufferSize = 1024;

        public byte[] buffer = new byte[BufferSize];

        public StringBuilder sb = new StringBuilder();

    }
    public class AsynchronousSocketListener
    {

        public static ManualResetEvent allDone = new ManualResetEvent(false);

        public AsynchronousSocketListener()
        {

        }

        public static void StartListening()
        {
            byte[] bytes = new Byte[1024];

            IPHostEntry ipHostInfo = Dns.Resolve(Dns.GetHostName());

            IPAddress ipAddress = ipHostInfo.AddressList[0];

            IPEndPoint localEndPoint = new IPEndPoint(ipAddress, 8888);

            Socket listener = new Socket(AddressFamily.InterNetwork,SocketType.Stream, ProtocolType.Tcp);

            try
            {

                listener.Bind(localEndPoint);

                listener.Listen(100);

                while (true)
                {
                    allDone.Reset();

                    Console.WriteLine("Waiting for a connection...");

                    listener.BeginAccept(new AsyncCallback(AcceptCallback),listener);

                    allDone.WaitOne();

                }

            }
            catch (Exception e)
            {

                Console.WriteLine(e.ToString());

            }

            Console.WriteLine("\nPress ENTER to continue...");

            Console.Read();

        }

        public static void AcceptCallback(IAsyncResult ar)
        {
            allDone.Set();

            Socket listener = (Socket)ar.AsyncState;

            Socket handler = listener.EndAccept(ar);

            StateObject state = new StateObject();

            state.workSocket = handler;

            handler.BeginReceive(state.buffer, 0, StateObject.BufferSize, 0,new AsyncCallback(ReadCallback), state);

        }

        public static void ReadCallback(IAsyncResult ar)
        {

            String content = String.Empty;

            StateObject state = (StateObject)ar.AsyncState;

            Socket handler = state.workSocket;

            int bytesRead  = handler.EndReceive(ar);

            if (bytesRead > 0)
           {
                state.sb.Append(Encoding.ASCII.GetString(state.buffer, 0, bytesRead));

                content = state.sb.ToString();

                if (content.IndexOf("<EOF>") > -1)
                {
                    if (content == "hello")
                    {
                        Console.WriteLine(content);
                        Send(handler, content);
                    }
                    else if (content == "How r u")
                    {
                        Console.WriteLine(content);
                        Send2(handler, content);
                    }
                }
                else
                {

                    handler.BeginReceive(state.buffer, 0, StateObject.BufferSize, 0,new AsyncCallback(ReadCallback), state);

                }

            }

        }

        private static void Send(Socket handler, String data)
        {
            data = "Hi";

            byte[] byteData = Encoding.ASCII.GetBytes(data);

            handler.BeginSend(byteData, 0, byteData.Length, 0,new AsyncCallback(SendCallback), handler);

        }

        private static void Send2(Socket handler, String data)
        {
            data = "fine";

            byte[] byteData = Encoding.ASCII.GetBytes(data);

            handler.BeginSend(byteData, 0, byteData.Length, 0, new AsyncCallback(SendCallback), handler);

        }

        private static void SendCallback(IAsyncResult ar)
        {

            try
            {
                Socket handler = (Socket)ar.AsyncState;

                int bytesSent = handler.EndSend(ar);

                Console.WriteLine("Sent {0} bytes to client.", bytesSent);

                handler.Shutdown(SocketShutdown.Both);     

                 handler.Close();

            }
            catch (Exception e)
            {

                Console.WriteLine(e.ToString());

            }

        }

        public static int Main(String[] args)
        {

            StartListening();

            return 0;

        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:18:09.783

`content == "How r u"`并`content == "hello"`通过比较那里的引用来检查对象是否相等。`content`并且您的 const 字符串不在同一个内存中（不是相同的对象）。

来比较一下内容调用`content.compareTo("How r u")==0`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T07:43:47.277

我解决了。我只需要把 < eof > 放在 'hello' 的末尾，就像 "hello< eof >" 和你的方式一样。它现在的工作。

# linux - Log4perl 配置不起作用

> ID：13972925
> 
> 赞同：2
> 
> 时间：2012-12-20T13:10:21.973
> 
> 标签：linux, perl, logging, log4perl

我在我的 Linux 机器上安装了 Log4perl，并具有以下内容`/path/to/log4perl.conf`：

```
log4perl.logger.Fizz = INFO, FizzAppender
log4perl.logger.Buzz = INFO, BuzzAppender

log4perl.appender.FizzAppender = Log::Dispatch::FileRotate
log4perl.appender.FizzAppender.filename = /my/logs/fizz-log.txt
log4perl.appender.FizzAppender.max = 1
log4perl.appender.FizzAppender.DatePattern = yyyy-MM-dd
log4perl.appender.FizzAppender.TZ = EST
log4perl.appender.FizzAppender.layout = Log::Log4perl::Layout::PatternLayout
log4perl.appender.FizzAppender.layout.ConversionPattern = %d %m %n

log4perl.appender.BuzzAppender = Log::Dispatch::FileRotate
log4perl.appender.BuzzAppender.filename = /my/logs/buzz-log.txt
log4perl.appender.BuzzAppender.max = 1
log4perl.appender.BuzzAppender.DatePattern = yyyy-MM-dd
log4perl.appender.BuzzAppender.TZ = EST
log4perl.appender.BuzzAppender.layout = Log::Log4perl::Layout::PatternLayout
log4perl.appender.BuzzAppender.layout.ConversionPattern = %d %m %n 
```

在我的每个 perl 脚本中（每个脚本使用不同的附加程序和日志到不同的日志文件）：

```
use Log::Log4perl;

my $log_conf = "/path/to/log4perl.conf";
Log::Log4perl::init($log_conf);

# In one script the logger is a "Fizz" logger (like below), and in the other
# script the logger is a "Buzz" logger.
my $logger = Log::Log4perl->get_logger("Fizz");

$logger->info("This should work."); 
```

即使每个脚本使用不同的 appender 并记录到不同的文件，它们都应该具有相同的行为：

*   每个日志每天轮换一次，旧的（轮换的）日志被删除

我已经让这个脚本运行了超过 24 小时，而且我没有*看到*在`/my/logs/`.

所以我问：**我的`log4perl.conf`不正确吗？如果不是，我该怎么做才能诊断问题？**我是否在 perl 脚本中错误地初始化了库？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T02:21:59.877

我认为您需要将参数添加`mode`到`log4perl.conf`文件中：

```
log4perl.appender.FizzAppender.mode = truncate
log4perl.appender.BuzzAppender.mode = truncate 
```

为了加快速度，我将您的 DatePattern 更改为以下内容：

```
log4perl.appender.FizzAppender.DatePattern = yyyy-MM-dd-HH-MM
log4perl.appender.BuzzAppender.DatePattern = yyyy-MM-dd-HH-MM 
```

这是使用您的`log4perl.conf`文件的测试。`Perl`我已经创建了您的脚本的 2 个副本：

*   log4perl_Buzz.pl
*   log4perl_Fizz.pl

我在脚本中添加了一个循环，以便他们每秒将一条消息记录到各自的日志文件中：

```
while (1) {
  $logger->info("This should work.");
  sleep 1;
} 
```

我同时运行它们，并使用 a 查看以下结果`watch ls -l`：

```
Every 2.0s: ls -l                    Thu Dec 20 21:16:51 2012

total 12
-rwxrwxr-x 1 saml saml 358 Dec 20 20:15 log4perl_Buzz.pl
-rw-rw-r-- 1 saml saml 978 Dec 20 21:07 log4perl.conf
-rwxrwxr-x 1 saml saml 358 Dec 20 20:15 log4perl_Fizz.pl 
```

在我运行 2 个脚本之后：

```
Every 2.0s: ls -l                    Thu Dec 20 21:17:56 2012

total 20
-rw-rw-r-- 1 saml saml  39 Dec 20 21:17 buzz-log.txt
-rw-rw-r-- 1 saml saml  39 Dec 20 21:17 fizz-log.txt
-rwxrwxr-x 1 saml saml 358 Dec 20 20:15 log4perl_Buzz.pl
-rw-rw-r-- 1 saml saml 978 Dec 20 21:07 log4perl.conf
-rwxrwxr-x 1 saml saml 358 Dec 20 20:15 log4perl_Fizz.pl 
```

约 2 分钟后：

```
Every 2.0s: ls -l                    Thu Dec 20 21:19:05 2012

total 28
-rw-rw-r-- 1 saml saml  195 Dec 20 21:19 buzz-log.txt
-rw-rw-r-- 1 saml saml 2340 Dec 20 21:18 buzz-log.txt.1
-rw-rw-r-- 1 saml saml  234 Dec 20 21:19 fizz-log.txt
-rw-rw-r-- 1 saml saml 2301 Dec 20 21:18 fizz-log.txt.1
-rwxrwxr-x 1 saml saml  358 Dec 20 20:15 log4perl_Buzz.pl
-rw-rw-r-- 1 saml saml  978 Dec 20 21:07 log4perl.conf
-rwxrwxr-x 1 saml saml  358 Dec 20 20:15 log4perl_Fizz.pl 
```

这是我`log4perl.conf`为那些在家玩的人提供的版本 8-)。

```
log4perl.logger.Fizz = INFO, FizzAppender
log4perl.logger.Buzz = INFO, BuzzAppender

log4perl.appender.FizzAppender = Log::Dispatch::FileRotate
log4perl.appender.FizzAppender.filename = fizz-log.txt
log4perl.appender.FizzAppender.max = 1
log4perl.appender.FizzAppender.DatePattern = yyyy-MM-dd-HH-MM
log4perl.appender.FizzAppender.TZ = EST
log4perl.appender.FizzAppender.layout = Log::Log4perl::Layout::PatternLayout
log4perl.appender.FizzAppender.layout.ConversionPattern = %d %m %n
log4perl.appender.FizzAppender.mode = truncate

log4perl.appender.BuzzAppender = Log::Dispatch::FileRotate
log4perl.appender.BuzzAppender.filename = buzz-log.txt
log4perl.appender.BuzzAppender.max = 1
log4perl.appender.BuzzAppender.DatePattern = yyyy-MM-dd-HH-MM
log4perl.appender.BuzzAppender.TZ = EST
log4perl.appender.BuzzAppender.layout = Log::Log4perl::Layout::PatternLayout
log4perl.appender.BuzzAppender.layout.ConversionPattern = %d %m %n
log4perl.appender.BuzzAppender.mode = truncate 
```

这些是解决这个问题的有用资源：

*   [CPAN 上的 Log::Dispatch::FileRotate](http://search.cpan.org/dist/Log-Dispatch-FileRotate/FileRotate.pm)
*   [log4perl 常见问题](http://log4perl.sourceforge.net/releases/Log-Log4perl/docs/html/Log/Log4perl/FAQ.html)
*   [使用 log4perl 限制日志大小 - stackoverflow](https://stackoverflow.com/questions/11648566/limiting-log-size-with-log4perl)

# php - 记录 curl 响应的最有效方法 (html)

> ID：13972931
> 
> 赞同：0
> 
> 时间：2012-12-20T13:10:36.900
> 
> 标签：php, mysql, curl

我有一个使用 curl 登录网站的 php 脚本。我需要记录所有 http 响应，以便跟踪错误。

问题：每次登录都包含多个 http 请求/响应，总计约 26 000 行。将其保存在文本文件中使我很难找到所需的内容。

将所有内容记录在 mysql 数据库中是否合理？

澄清：将大型 html 文档存储在 mysql 数据库中是个好主意吗？在 mysql 中存储 html/javascript/css 是否存在任何问题？什么数据类型合适？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:17:07.937

这取决于上下文。

文件系统通常是存储大中型数据集的更好地方，您不会经常在其中更新/搜索。OTOH PHP（大多数语言都会想到它）不支持复杂的锁定机制来优雅地处理对文件的并发访问。

> 每个登录由多个 http 请求/响应组成，总共约 26 000 行

多少请求？

> 将其保存在文本文件中使我很难找到所需的内容。

为什么在获得 HTTP 响应时不提取所需的位？

为什么您认为将其转储到数据库中会帮助您提取所需的位？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T13:13:34.417

您可以将所有文本记录到任何文件中，然后使用 grep 过滤您需要的任何内容

如果您将所有数据写入数据库，则会导致硬件负载更高，然后只需将所有数据都记录到文件中

# css - CSS3 箭头在 webkit 中不起作用

> ID：13972934
> 
> 赞同：0
> 
> 时间：2012-12-20T13:10:44.620
> 
> 标签：css, webkit

试图让 CSS3 箭头在 webkit 浏览器中工作，但我想我错过了一些东西，代码在 Firefox 中工作。

```
<div class="box">
    <h3>Box Inside</h3>
</div>​

.box {
    padding: 20px;
    border: 2px solid #DDDDDD;
    width: 150px;
    text-align: center;
    position:relative;
}

.box:after {
    background: none repeat scroll 0 0 #FFFFFF;
    border-color: transparent transparent transparent #fff;
    border-style: solid;
    border-width: 9px;
    content: "";
    display: block;
    height: 0;
    position: absolute;
    right: -12%;
    top: 10px;
    width: 0; 
```

}​</p>

示例：http: [//jsfiddle.net/fJkH8/](http://jsfiddle.net/fJkH8/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:34:20.060

试试这个，这适用于 Firefox 和 chrome： [http ://cssarrowplease.com/](http://cssarrowplease.com/)

# jquery - 如何找到 $(this) 所指的数字元素？

> ID：13972935
> 
> 赞同：1
> 
> 时间：2012-12-20T13:10:53.127
> 
> 标签：jquery

```
<table>
    <tr>
        <th>
            Title
        </th>
        <th>
            Author
        </th>
    <tr>
</table> 
```

这是基本表

```
$("th").click(function(){
    $(this).method();
}); 
```

我想要做的就是在点击标签时调用一个方法，但我想知道点击了哪个标签。因此，如果单击标题，我希望它返回 0，因为它是第一个元素，如果单击作者，则返回 1，因为它是第二个元素。

我尝试将 data-val= 放在 th 标记上，但这没有验证，所以我删除了它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T13:12:52.533

你需要的正是你上面所拥有的，但是使用`$(this).index()`. 这是一个工作小提琴......

[http://jsfiddle.net/WNVbn/](http://jsfiddle.net/WNVbn/)

# android - Android Html.fromHtml() 在嵌套文本样式上无法正常工作

> ID：13972940
> 
> 赞同：6
> 
> 时间：2012-12-20T13:11:03.877
> 
> 标签：android, html

我想显示 HTML

```
"<html><body><font color=\"black\">
In the name of <font color=\"blue\"><b> God</b></font>
the compassionate, the merciful</font></body><html>" 
```

在文本视图中。所以我用过`Html.fromHtml()`，但输出与浏览器不同。

不同之处在于“上帝”一词在 TextView 中不会以蓝色出现。

代码：

```
textView.setText("<html><body><font color=\"black\">
  In the name of <font color=\"blue\"><b> God</b></font>
  the compassionate, the merciful</font></body><html>"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:16:18.380

[Html.fromHtml(String)](http://developer.android.com/reference/android/text/Html.html#fromHtml%28java.lang.String%29)不支持所有 HTML 标签

允许的 HTML 标签列表：

*   br
*   p
*   div
*   时间
*   b
*   强的
*   一世
*   东风
*   大的
*   小的
*   字体
*   块引用
*   tt
*   一个
*   支持
*   子

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-28T04:59:06.883

试试这样：

```
textView.setText(Html.fromHtml("<html><body>In the name of<font color=blue><b> God </b></font>the compassionate, the merciful</body><html>")); 
```

> 注意：**黑色**是默认颜色，因此您不必使用`<font>`黑色标签。

如果您想以正确的方式使用完整的标签，例如（例如 for`GRAY`和`BLUE`）：

```
textView.setText(Html.fromHtml("<html><body><font color=gray>In the name of </font><font color=blue><b> God </b></font><font color=gray>the compassionate, the merciful</font></body><html>")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-27T05:55:39.797

看起来这个问题在`HtmlCompat`. 所以尝试使用它而不是旧的 deprecated `Html`：

```
import androidx.core.text.HtmlCompat;

....

HtmlCompat.fromHtml(stringVar, HtmlCompat.FROM_HTML_MODE_LEGACY); 
```

# asp.net-mvc-3 - asp.net mvc 下拉列表绑定

> ID：13972943
> 
> 赞同：0
> 
> 时间：2012-12-20T13:11:07.200
> 
> 标签：asp.net-mvc-3, asp.net-mvc-4

下面是我的模型。我在 mvc 的表中创建下拉列表，但出现此错误

```
public class UserRegisterModel
{
    [Required]
    [Display(Name = "User name")]
    public string UserName { get; set; }

    [Required]
    [DataType(DataType.Password)]
    [Display(Name = "Password")]
    public string Password { get; set; }

    public IEnumerable<Role> Roles { get; set; } 
    public SelectList RoleSelectList { get; set; } 
    public Role Role { get; set; } 

    private List<Role> GetRoles() 
    { 
        List<Role> roles = new List<Role>(); 

        roles.Add(new Role() { Value = "c", RoleCode = "Corporate" }); 
        roles.Add(new Role() { Value = "d", RoleCode = "Divisional" }); 
        roles.Add(new Role() { Value = "r", RoleCode = "Regional" }); 
        roles.Add(new Role() { Value = "f", RoleCode = "Facility" }); 
        roles.Add(new Role() { Value = "s", RoleCode = "Resource" }); 
        return roles; 
    }

    public UserRegisterModel() 
    { 
        this.Roles = GetRoles(); 
        this.RoleSelectList = new SelectList(Roles, "Value", "RoleCode"); 
    } 

    public IEnumerable<UserAccinfo> UserAccounts { get; set; } 

}
public class UserAccinfo
{
    public string accountno { get; set; }
    public IEnumerable<Brand> Brands { get; set; }
    public SelectList BrandSelectList { get; set; }
    public Brand Brand { get; set; }

    private List<Brand> GetBrands() 
    {
        List<Brand> brands = new List<Brand>();

        brands.Add(new Brand() { BrandValue = "c", BrandCode = "Corporate" });
        brands.Add(new Brand() { BrandValue = "d", BrandCode = "Divisional" });
        brands.Add(new Brand() { BrandValue = "r", BrandCode = "Regional" });
        brands.Add(new Brand() { BrandValue = "f", BrandCode = "Facility" });
        brands.Add(new Brand() { BrandValue = "s", BrandCode = "Resource" });
        return brands; 
    }

    public UserAccinfo() 
    {
        this.Brands = GetBrands();
        this.BrandSelectList = new SelectList(Brands, "BrandValue", "BrandCode"); 
    } 
}
public class Brand
{
    public string BrandCode { get; set; }
    public string BrandValue { get; set; }
} 
public class Role 
{ 
    public string RoleCode { get; set; } 
    public string Value { get; set; } 
} 
```

如何在 mvc 视图中绑定第二个下拉列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-06T05:42:40.230

在控制器中：

```
public ActionResult Index()
{
        UserRegisterModel UserRegisterModel = new UserRegisterModel();
        UserAccinfo UserAccinfo = new UserAccinfo();

        ViewBag.Brands = UserAccinfo.BrandSelectList;
        ViewBag.Roles = UserRegisterModel.RoleSelectList;
        return View();
} 
```

和 Index.cshtml

```
@Html.DropDownList("Brands");
@Html.DropDownList("Roles"); 
```

如果您想在选定品牌时更改角色，您可以这样做。

在控制器中添加一个 JsonResult：

```
public JsonResult LoadRoles(string v)
    {
        UserRegisterModel UserRegisterModel = new UserRegisterModel();
        List<KeyValuePair<string, string>> items = new List<KeyValuePair<string, string>>();
        if (!string.IsNullOrWhiteSpace(v))
        {
            var roles = UserRegisterModel.RoleSelectList.Where(x => x.Value == v);
            if (roles.Count() > 0)
            {
                foreach (var r in roles)
                {
                    items.Add(new KeyValuePair<string, string>(r.Value,r.Text));
                }
            }
        }
        return Json(items);
    } 
```

索引.cshtml

```
<script>

    $(function () {
        //When Brands change
        $("#Brands").change(function () {
            $.ajax({
                //Call postback
                url: '@Url.Action("LoadRoles", "Home")',
                data: { v: $(this).val() },
                type: 'post',
                cache: false,
                dataType: 'json',
                success: function (data) {
                    if (data.length > 0) {
                        $('#Roles').empty();
                        //add result to downlist
                        $.each(data, function (i, item) {
                            $('#Roles').append($('<option></option>').val(item.Key).text(item.Value));
                        });
                    }
                }
            });
        });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-15T08:49:27.417

```
 public ActionResult  AllUsers() {
   List<Users> users = userRep.GetUsers();
  var listUsers = (from u in users.AsEnumerable()
                       select new SelectListItem
                      {
                         Text = u.UserName,
                         Value = u.UserId.ToString(),
                         Selected = (u.UserId==6)
                      }).AsEnumerable();
    // ViewBag.ListItems = listUsers; 
     ViewData["tempEmpList"]=listUsers
    //ViewBag.SelectedItem = 2;
      return View(); } 
```

在视图中

@Html.DropDownList("SelectedEmployee", new SelectList((IEnumerable) ViewData["tempEmpList"], "Id", "Name"))**

# javascript - 我如何在 javascript 中将 0.099 转换为 0.1

> ID：13972947
> 
> 赞同：1
> 
> 时间：2012-12-20T13:11:16.410
> 
> 标签：javascript

我试图将数字 0.099 转换为 0.1，但如果我使用 Math.ceil 或 Math.round 它会给我 0 而不是 0.1。

难道我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T13:13:28.587

你可以做

```
var n2 = Math.round(n1*10)/10; 
```

那假设您真的想要另一个数字而不是字符串。如果您想将您的号码格式化为字符串，请执行

```
var s = n1.toFixed(1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T13:14:46.293

`Math.ceil((0.099*10))/10`如果你总是想把它四舍五入，你可以这样做。
所以`Math.ceil((0.049*10))/10`也变成0.1

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T13:18:51.633

进行四舍五入的通用方法：

> 数字((.099).toFixed(1));

toFixed 的参数是`number of decimal places`您想要的。请注意 toFixed 返回一个字符串，我已将其转换回数字。

# jquery - 使用jquery在焦点上显示子div

> ID：13972948
> 
> 赞同：2
> 
> 时间：2012-12-20T13:11:19.663
> 
> 标签：jquery, forms, onfocus

我的表单有以下 html 标记：

```
<div class="row has-help">
  <div class="col">Label</div>
  <div class="col"><input /></div>
  <div class="col"><span class="helper">Foobar</span></div>
</div> 
```

上面的代码针对不同的表单元素重复了几次。当`input`专注于我希望`fadeIn`在`span`第三栏。

我已经编写了代码来实现这一点，但是当我专注于`input`页面上的任何内容时，所有助手都会出现，`span`而不仅仅是`span.helper`.`.has-help`

我有这个[JSFiddle](http://jsfiddle.net/cgYQR/2/)上的代码。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T13:14:50.663

问题是您正在使用 .help-inline 类选择所有元素。尝试将javascript更改为：

```
$("input").focusin(function() {
   $(this).parent().siblings(".help-inline").fadeIn(400);
}).focusout(function () {
   $(this).parent().siblings(".help-inline").fadeOut(100);
}); 
```

这是[演示](http://jsfiddle.net/brunoscopelliti/cgYQR/11/)，建立在您的小提琴之上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T13:16:03.153

您需要选择最近的一个`div.has-inline-help`

```
$("input").focusin(function() {
           $(".help-inline", $(this).closest('.has-help-inline')).fadeIn(400);
        }).focusout(function () {
            $(".help-inline", $(this).closest('.has-help-inline')).fadeOut(100);
        }); 
```

[http://jsfiddle.net/tarabyte/cgYQR/6/](http://jsfiddle.net/tarabyte/cgYQR/6/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T13:19:40.207

[http://jsfiddle.net/cgYQR/12/](http://jsfiddle.net/cgYQR/12/)

```
 $("input").focusin(function() {
       $(this).parents(".has-help-inline").find(".help-inline").fadeIn(400);
    }) 
```

查找当前输入“this”引用的父级。然后找到要淡入的孩子。

# google-apps-script - 我们可以动态更改 Google Doc 中的图片吗？

> ID：13972950
> 
> 赞同：0
> 
> 时间：2012-12-20T13:11:25.823
> 
> 标签：google-apps-script, google-docs, google-docs-api

我正在用 Google App Script 编写合同应用程序。

它从包含卖家签名和姓名缩写图像的模板创建 GoogleDoc。

由于有五个卖家，以及十几个不同的模板，有没有办法改变签名和首字母的形象？

我不知道从哪里开始寻找。

感谢，并有一个愉快的一天！

*   埃里克

编辑：我在 DocumentApp 中发现了一些关于 InlineImage 的内容......仍在寻找

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T15:32:44.107

这是一个在 Google 文档中附加图像的小代码。希望这会给您带来前进的想法。类似的概念我曾经制作一个[简历生成器](https://chrome.google.com/webstore/detail/sbc-resume-builder/lednmppbbboaelhfolehbdeapnkocneg)应用程序，它替换了个人资料图片和签名图片

```
//Make a UI form to upload Image
function doGet() {
  var app = UiApp.createApplication();

  //Form
  var form = app.createFormPanel().setEncoding('multipart/form-data').setId('form');
  //Add this form to the application
  app.add(form);

  //Panel to hold form elements
  var panel = app.createVerticalPanel();
  //add this panel inside form
  form.add(panel);

  //Now create form elemnts
  var label1 = app.createLabel('Upload Image');
  var uploadControl = app.createFileUpload().setName('file').setId('file');
  var submitBtn = app.createSubmitButton('Submit');
  //Add all these elemnts to the panel
  panel.add(label1).add(uploadControl).add(submitBtn);

  //Return the application to the service URL
  return app;
}

//This function is callend when the form is submitted
function doPost(e){
  var fileBlob = e.parameter.file; //This is the image blob if an image is uploded

  //Open the document
  var doc = DocumentApp.openById('ID OF GOOGLE DOC')//change Id of the document
  //get the body of document
  var docBody = doc.getActiveSection();
  //Append the iamge in document body
  docBody.appendImage(fileBlob);
  //Save and close the document
  doc.saveAndClose();
} 
```

# javascript - 单击关闭按钮后阻止浏览器卸载

> ID：13972951
> 
> 赞同：-3
> 
> 时间：2012-12-20T13:11:28.913
> 
> 标签：javascript, c#, jquery, asp.net, dom-events

单击关闭按钮后阻止浏览器卸载。同时我想显示具有“保存”和“另一个功能”按钮的弹出窗口。现在，弹出窗口正在显示，但在浏览器中单击“关闭”按钮后父窗口关闭。如何防止卸货？

我的代码：

```
window.onbeforeunload = function (e) {
    openwindow(200, 100, 'Close.aspx');
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:34:39.600

`onbeforeunload`是一个非常严格的事件，你绝对不能阻止它执行。这很有用，因为如果网站的开发者想锁定你，你能做什么？

如果分配给此事件的函数返回一个非空值，则向用户显示一个包含内容（通常是字符串）的对话框。如果它返回一个虚假值，则不会发生干预。

**阅读您的文档，人们。**

> [https://developer.mozilla.org/en-US/docs/DOM/window.onbeforeunload](https://developer.mozilla.org/en-US/docs/DOM/window.onbeforeunload)

对于您的情况，您正在显示一个 html 对话框，但由于它无法阻止页面关闭，因此它本身无效。

# iphone - 为 NSMutableArray 中的元素设置标志

> ID：13972959
> 
> 赞同：0
> 
> 时间：2012-12-20T13:12:14.743
> 
> 标签：iphone, objective-c, ios, cocoa-touch, nsmutablearray

我有一个`NSMutableArray`元素，我希望能够有条件地为某些元素设置自定义标志。例如，如果某些元素返回错误，则对它们进行错误计数。如果计数超过 3，我想从数组中删除这个元素。

实现这种行为的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T13:14:43.360

几个选项：

1.  有一个单独的数组来保存每个对象的计数器。从原始数组中删除一个时，请记住删除它对应的计数器对象。

2.  创建一个包含 int 值和存储在数组中的任何其他对象的小类，并使用该对象填充 NSMutableArray。然后你将把你的对象和错误计数器放在同一个地方

编辑：第二个选项是最具可扩展性的选项，如果您想添加更多标志或其他任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T14:26:48.107

您最好创建一个充满可变字典的可变数组。这将允许您有两个键对应于数组中的每个索引：

```
NSMutableDictionary *mutableDictionary = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                          @"some text, or what ever you want to store",@"body",
                                          [NSNumber numberWithUnsignedInteger:0],@"errorCount",
                                          nil];

[myMutableArray addObject:mutableDictionary]; 
```

然后这是一个基本示例，说明如何增加数组中特定项目的错误计数：

```
- (void)errorInArray:(NSUInteger)idx
{
    if ([[[myMutableArray objectAtIndex:idx] objectForKey:@"errorCount"] unsignedIntegerValue] == 2) {
        [myMutableArray removeObjectAtIndex:idx];
    }else{
        NSUInteger temp = [[[myMutableArray objectAtIndex:idx] objectForKey:@"errorCount"] unsignedIntegerValue];
        temp ++;
        [[myMutableArray objectAtIndex:idx] setObject:[NSNumber numberWithUnsignedInteger:temp] forKey:@"errorCount"];
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T17:22:35.373

如上所述，不需要创建自定义对象：创建一个可变数组，创建一个包含对象/键的字典并将所述字典添加到数组中：

```
NSMutableArray *myArray = [[NSMutableArray alloc] init] autorelease];
NSMutableDictionary *myDictionary = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                             @"John Doe", @"elementName",
                             [NSNumber numberWithInt:0], @"errorCount",
                             nil];
[myArray addObject:myDictionary]; 
```

# installation - WiX 替代品？

> ID：13972961
> 
> 赞同：24
> 
> 时间：2012-12-20T13:12:16.247
> 
> 标签：installation, wix, windows-installer

几天来，我尝试使用 WiX 为我的 Windows 服务构建一个 MSI 包，但是在按照我需要的方式获得它时遇到了很大的问题。

文档非常糟糕，然后 XML 结构就感觉不结构化。我真的不明白他们在 3.6 版中怎么能做得更差。

我不想把我所有的时间都花在 MSI 包上，而是我需要我的时间在主应用程序的开发上。

所以问题是，如果我需要，我应该使用什么 MSI 构建器：

*   在安装期间设置 app.config 设置
*   安装 Windows 服务
*   启动 Windows 服务
*   简单的安装/卸载

这就是我所需要的

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-20T13:24:19.210

WiX 可以相当轻松地完成所有这些事情（我有一些应用程序可以做到这一点，还有一些我使用 WiX 来安装）。问题是您必须非常了解 Windows Installer 才能使用 WiX，因为它并没有真正向您隐藏任何细节。

明显的替代方案是[InstallShield](http://www.installshield.com/)（他们显然有 VS2012 附带的 LE 版本，使用 VS2012 但不是那样），Express 的价格相对合理。

您可能还想查看[InstallAware](http://www.installaware.com)，但是当我查看它们时，我个人并没有很好的经验。

我还被告知[Advanced Installer](http://www.advancedinstaller.com/)是可用的，尽管我自己没有使用过它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-07T10:50:22.887

其他安装产品以及 Wix 的列表和说明：[使用什么安装产品？InstallShield、WiX、Wise、高级安装程序等](https://stackoverflow.com/questions/1544292/what-installation-product-to-use-installshield-wix-wise-advanced-installer/1546941#1546941)

以及一些 Wix 快速入门建议的链接（类似文章）：

*   [Wix 为整个树生成单个组件 ID](https://stackoverflow.com/questions/22548374/wix-generate-single-component-id-for-entire-tree/22550256#22550256)
*   [**WiX 快速入门技巧**](https://stackoverflow.com/questions/25004226/msi-vs-nuget-packages-which-are-is-better-for-continuous-delivery/25005864#25005864)

# railway.js - 在 Railroad.js 中对模块对象进行验证

> ID：13972962
> 
> 赞同：0
> 
> 时间：2012-12-20T13:12:27.103
> 
> 标签：railway.js

我是Railway.js 的新手（其中一种情况是其他人编写了我现在需要更新的软件——太棒了！）

我有一个“通知”模型并想添加验证，如果用户不提供 UI 中的字段，我会显示如下错误：“需要消息”

我该怎么做呢？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T18:39:24.217

请参阅 jugglingdb 文档。你需要验证器：

```
Notification.validatesPresenceOf('message') 
```

# python - 在 django 中加载现有项目

> ID：13972974
> 
> 赞同：0
> 
> 时间：2012-12-20T13:13:04.527
> 
> 标签：python, django

我使用 DJANGO 创建了一个新项目，但是当我运行时`manage.py runserver`，它指向我旧项目的设置。

**具体细节如下**

```
C:\Documents and Settings\jaia\Desktop\Learn Django\MyLibrary>python manage.py runserver
Validating models...

0 errors found

Django version 1.4.2, using settings 'FirstBlog.settings'

Development server is running at ttp://127.0.0.1:8000/

Quit the server with CTRL-BREAK. 
```

**解释**

我希望 runserver 使用 MyLibrary.settings （新项目），但它使用 FirstBlog.settings （旧项目）。

能否请您指导我如何更改设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T14:50:48.990

查看 manage.py 文件：

```
#!/usr/bin/env python
import os
import sys

if __name__ == "__main__":
    os.environ.setdefault("DJANGO_SETTINGS_MODULE", "FirstBlog.settings")

    from django.core.management import execute_from_command_line

    execute_from_command_line(sys.argv) 
```

更改此文件：

```
#!/usr/bin/env python
import os
import sys

if __name__ == "__main__":
    os.environ.setdefault("DJANGO_SETTINGS_MODULE", "MyLibrary.settings")

    from django.core.management import execute_from_command_line

    execute_from_command_line(sys.argv) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T13:25:27.633

只需设置环境变量：

```
set DJANGO_SETTINGS_MODULE=MyLibrary.settings
python manage.py runserver 
```

或附加`--settings`如下：

```
python manage.py runserver --settings=MyLibrary.settings 
```

详细[信息](https://docs.djangoproject.com/en/dev/topics/settings/#designating-the-settings)- Django 文档。

# c# - 如何在 Windows 8 应用程序开发的快照页面中添加按钮？

> ID：13972984
> 
> 赞同：0
> 
> 时间：2012-12-20T13:13:30.753
> 
> 标签：c#, windows-8

我已经完成了一个名为 bmi 计算器的 Windows 8 应用程序，我想将它上传到商店，但它说我必须向它添加快照工具。我不知道如何在快照页面中添加文本框或按钮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:15:55.497

你指的是[SnapView](http://mobile.dzone.com/articles/walkthrough-implementing)吗？

# mysql - MySQL：版本控制获取最新版本

> ID：13972986
> 
> 赞同：1
> 
> 时间：2012-12-20T13:13:37.210
> 
> 标签：mysql

我已经用 mysql（和 php）实现了版本控制。

它如下所示：

```
categories
-------------
| id | name |
|----|-------
| 1  | a
| 2  | b
| 3  | c
| 4  | d
-------------

revisions
----------------------
| id | cid | current |
|----|-----|----------
| 1  |  1  | 1       |
| 2  |  1  | NULL    |
| 3  |  2  | NULL    |
| 4  |  3  | 1       |
| 5  |  4  | NULL    |
| 6  |  4  | 1       |
---------------------- 
```

每个类别都有分配给它的多个修订。如果“当前”设置为 1，则设置一个修订版（每个类别只有一个修订版可以为 1，所有其他版本为 NULL）。我现在想要的是获得每个类别，其中有新的修订（注意，一旦提交修订，它不会立即设置为当前。这是由例如主持人完成的）。我的问题现在也得到了每个类别，它只有一个当前 IS NULL 的修订

因此，预期的结果将是：

```
-------------
| category.id
|------------
| 1     
| 2     
------------- 
```

祝一切顺利

编辑：//

我目前的解决方案是：

```
SELECT categories.* FROM categories
JOIN revisions as t1 ON
(
t1.cid = categories.id
t1.current IS NULL
)
JOIN revisions as t2 ON
(
t2.id != t1.id
t2.current IS NOT NULL
t2.cid = categories.id
)
WHERE t1.id > t2.id 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T13:41:05.873

我制作了一个具有不同表结构的 SQL Fiddle 演示，可以满足您的需求

```
CREATE TABLE `categories` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(1) NOT NULL DEFAULT '',
  `revision_id` int(11) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

INSERT INTO categories
    (`id`, `name`, `revision_id`)
VALUES
    (1, 'a', 1),
    (2, 'b', null),
    (3, 'c', 4),
    (4, 'd', 6),
    (5, 'e', 7),
    (6, 'f', 9)
;

CREATE TABLE `revisions` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `category_id` int(11) unsigned NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;   

INSERT INTO revisions
    (`id`, `category_id`)
VALUES
    (1, 1),
    (2, 1),
    (3, 2),
    (4, 3),
    (5, 4),
    (6, 4),
    (7, 5),
    (8, 6),
    (9, 6)
; 
```

* * *

外键关系

```
ALTER TABLE `categories` 
  ADD CONSTRAINT `fk_cat_rev` 
  FOREIGN KEY (`revision_id`) 
  REFERENCES `revisions` (`id`) ON UPDATE CASCADE ON DELETE SET NULL;

ALTER TABLE `revisions` 
  ADD CONSTRAINT `fk_rev_cat` 
  FOREIGN KEY (`category_id`) 
  REFERENCES `categories` (`id`) ON UPDATE CASCADE ON DELETE CASCADE; 
```

* * *

在 DELETE 上检查关系

```
DELETE FROM revisions WHERE id = 7;
DELETE FROM categories WHERE id = 6; 
```

* * *

```
SELECT 
  cid 
FROM (
  SELECT 
    c.id cid, 
    MAX( r.id ) mrid, 
    c.revision_id rid
  FROM 
    categories c
  JOIN 
    revisions r ON r.category_id = c.id
  GROUP BY 
    c.id ) tmp
WHERE 
  COALESCE( mrid, 0 ) <> COALESCE( rid, 0 ); 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/b4b28/4/0)

# jenkins - 如何在 Jenkins 中提供 Eclipse RCP 产品版本号？

> ID：13972987
> 
> 赞同：2
> 
> 时间：2012-12-20T13:13:37.710
> 
> 标签：jenkins, eclipse-rcp

我想使用 Jenkins 中可用的 Eclipse 产品定义文件中定义的版本号和一个变量，这样我就可以使用它来自动标记我的构建。我怎么能做到这一点，也许是巴克敏斯特？

# ruby-on-rails-3 - 在rails中使用ajax分页加载jquery元素

> ID：13972988
> 
> 赞同：1
> 
> 时间：2012-12-20T13:13:55.230
> 
> 标签：ruby-on-rails-3, jquery, zurb-foundation

我为我的项目实施了以下 railscast：- [http://railscasts.com/episodes/240-search-sort-paginate-with-ajax?view=asciicast](http://railscasts.com/episodes/240-search-sort-paginate-with-ajax?view=asciicast)。我也能够通过一些更改无缝地完成这项工作。现在，我正在尝试向我的每个产品元素添加幻灯片（使用 zurb-foundation 轮播）。我面临的问题是，当页面第一次加载时，幻灯片放映效果很好。但是，当我单击任何分页/排序/搜索链接时，幻灯片会转换为纯图像（未加载 jquery 组件）。

我不确定我错过了什么。

这是我的代码片段：-

**Products.js**

```
$("div.slideshow_list_page").orbit({animation: 'fade',                  // fade,     horizontal-slide, vertical-slide, horizontal-push
  animationSpeed: 800,                // how fast animtions are
  timer: false,                        // true or false to have the timer
  resetTimerOnClick: false,           // true resets the timer instead of pausing        slideshow progress
  advanceSpeed: 4000,                 // if timer is enabled, time between transitions
  pauseOnHover: false,                // if you hover pauses the slider
  startClockOnMouseOut: false,        // if clock should start on MouseOut
  startClockOnMouseOutAfter: 1000,    // how long after MouseOut should the timer start again
  directionalNav: true,               // manual advancing directional navs
  captions: false,                     // do you want captions?
  captionAnimation: 'fade',           // fade, slideOpen, none
  captionAnimationSpeed: 800,         // if so how quickly should they animate in
  bullets: true,                     // true or false to activate the bullet navigation
  bulletThumbs: false,                // thumbnails for the bullets
  bulletThumbLocation: '',            // location from this file where thumbs will be
  afterSlideChange: function(){},     // empty function
  fluid: true}         ); 
```

**应用程序.js**

```
$(function () {
  $('#products th a, #products .apple_pagination a').live('click', function () {
    $.getScript(this.href);
    return false;
  });
}); 
```

**products.html.erb**

```
<td><div class="slideshow_list_page">
<%=  image_tag "logo.png" %>
<%=  image_tag "rails.png" %>
</div>
</td> 
```

谢谢，阿米特

# maven - jetty maven 插件没有部署我的第二次战争

> ID：13972989
> 
> 赞同：2
> 
> 时间：2012-12-20T13:13:59.337
> 
> 标签：maven, jetty

我正在尝试在码头上部署两场战争，第一场已部署，但第二场未部署。这是我的插件配置：

```
<plugin>
<groupId>org.mortbay.jetty</groupId>
<artifactId>jetty-maven-plugin</artifactId>
<version>${jetty.maven.plugin.version}</version>
<configuration>
    <stopKey>stop</stopKey>
    <stopPort>9999</stopPort>
    <war>${project.build.directory}/integration-test/webapp-fast.war</war>
    <webApp>
        <contextPath>/webapp-fast</contextPath>
    </webApp>
    <contextHandlers>  
        <contextHandler implementation="org.eclipse.jetty.webapp.WebAppContext">
          <war>${project.build.directory}/integration-test/stubs.war</war>
          <contextPath>/stubs</contextPath>
        </contextHandler>
            </contextHandlers>  
</configuration>
<executions>
    <execution>
        <id>start-jetty</id>
        <phase>pre-integration-test</phase>
        <goals>
            <goal>deploy-war</goal>
        </goals>
        <configuration>
            <scanIntervalSeconds>0</scanIntervalSeconds>
            <daemon>true</daemon>
        </configuration>
    </execution>
    <execution>
        <id>stop-jetty</id>
        <phase>post-integration-test</phase>
        <goals>
            <goal>stop</goal>
        </goals>
    </execution>
</executions>
</plugin> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T14:24:55.337

尝试使用 contextHandlers 部署两个战争：

```
<contextHandlers>  
    <contextHandler implementation="org.eclipse.jetty.webapp.WebAppContext">
      <war>${project.build.directory}/integration-test/stubs.war</war>
      <contextPath>/stubs</contextPath>
    </contextHandler>
    <contextHandler implementation="org.eclipse.jetty.webapp.WebAppContext">
      <war>${project.build.directory}/integration-test/webapp-fast.war</war>
      <contextPath>/webapp-fast</contextPath>
    </contextHandler>
</contextHandlers> 
```

# html - CSS Webkit 错误 - 重绘问题？

> ID：13972992
> 
> 赞同：4
> 
> 时间：2012-12-20T13:14:14.090
> 
> 标签：html, css, google-chrome, webkit

我创建了一个在 FF 和 IE 中完全运行的网站，但在基于 webkit 的浏览器（即 Chrome）中存在错误。

问题是“动画”导航栏中的错误绘制`<a>`元素（使用：悬停）。

当页面在 Chrome 中完成加载后，它看起来像[这样](https://i.imgur.com/Rltgs.png)。

但它应该是[这样](https://i.imgur.com/Gs4yA.png)的。

然而有趣的是，在 Chrome 的“开发者工具”窗口中，如果我轻推（例如取消选中和选中）*任何元素的**任何*属性，浏览器就会更新为正确的样式。如果我放大和缩小页面，它也已修复。

 *我能找到的唯一类似的问题是[这个](https://stackoverflow.com/questions/3485365/how-can-i-force-webkit-to-redraw-repaint-to-propagate-style-changes)。我试图将解决方案应用于我的问题，但没有奏效。重要的是要注意，我没有使用任何 javascript 在页面加载时动态更改样式（如上面的问题），它只是标准的 HTML 和 CSS。

我认为这是 webkit/chrome 中的重绘错误。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:50:00.407

不确定这在技术上是否是一个错误，但这绝对是一种奇怪的行为。您可以通过更改此部分来解决它：

```
#header_lower  ul li a{
box-sizing: border-box;
-ms-box-sizing: border-box; 
-webkit-box-sizing: border-box;
-moz-box-sizing: border-box; 
```

...使用内容框而不是边框​​框。除非您的布局严重依赖这些元素周围的粗边框并且您无法对其进行补偿，否则这可能是要走的路。*