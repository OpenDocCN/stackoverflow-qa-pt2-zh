# StackOverflow 问答 13812000-13812999

# css - 奇怪的 CSS 过渡

> ID：13812000
> 
> 赞同：-1
> 
> 时间：2012-12-11T01:03:13.483
> 
> 标签：css, css-transitions

当我尝试创建过渡时，样式会淡入元素，而不仅仅是在悬停时（示例）。我真的不知道问题是什么，也不知道从哪里开始寻找解决这个问题。

例子：

```
input[type='text'] {
    transition:.15s all;
    -webkit-transition:.15s all;
    -moz-transition:.15s all;
    border: 1px solid #DEDEDE;
    border-radius: 5px;
    color: #545454;
    font-size: 15px;
    padding: 4px;
    margin-bottom: 6px;
} 
```

当我加载页面时，尺寸会随着边框一起扩大。关于问题是什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:11:42.197

这里的问题是，您将转换设置为默认值。如果你这样做：

```
input[type='text'] {
   border: 1px solid #DEDEDE;
   border-radius: 5px;
   color: #545454;
   font-size: 15px;
   padding: 4px;
   margin-bottom: 6px;
}

input[type='text']:hover {
   transition:.15s all;
   -webkit-transition:.15s all;
   -moz-transition:.15s all;
   font-size: 17px;
   color: black;
} 
```

如果您将输入悬停，它只会激活转换。

# android - 操作栏导航

> ID：13812006
> 
> 赞同：0
> 
> 时间：2012-12-11T01:03:46.960
> 
> 标签：android

我的 android 应用程序以最新平台为目标。我是该平台的新手，并且在操作栏上阅读了一些相互矛盾的信息。我用它来导航的方式是。

菜单.xml

```
<menu>
            <item android:id="@+id/action_sort_size"
                  android:icon="@android:drawable/ic_menu_sort_by_size"
                  android:title="@string/action_barabc"
                  android:onClick="abc" />
            <item android:id="@+id/action_sort_alpha"
.... 
```

在我的活动中

```
@Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }
public void abc(MenuItem item) {
//...
} 
```

这可行，但后退/向上导航无法正常工作。可能是无关的，还是想确认一下。

但是，我也看到了像[这里](http://www.vogella.com/articles/Android/article.html#menu_actionbar)这样的实现 ，它打开了项目。

```
@Override
  public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.menuitem1:
      Toast.makeText(this, "Menu Item 1 selected", Toast.LENGTH_SHORT)
          .show();
      break;
    case R.id.menuitem2:
....
} 
```

哪种方法更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T01:17:43.447

在我看来，更好的方法是切换方法。原因不多，但我会列出它们：

*   代码是集中的。你没有 x 数量的方法基本上做同样的事情。它使您的代码更具可读性；它是“更清洁的”。您还可以使用 switch 获得默认语句，如果您搞砸并忘记专门为布局中的元素创建案例，这会有所帮助。如果你真的想要一个使用 xml 的集中式方法，你会`onClick`引用相同的方法并检查`View`参数的 id。这与`onOptionsItemSelected`.
*   它是 API 的一部分。如果 Android 工程师不希望开发人员使用它，他们就不会将其作为 API 的一部分。是的，XML 在技术上是 API，但 XML 应该更多地用于布局和视觉效果，而不是逻辑。
*   每个人都使用它。我看过的所有教程和大家的代码都使用这种方法。它现在更像是一种约定。

它在很大程度上是个人的，但如果它看起来像是一个约定，并且每个人都使用它，我会坚持它。特别是如果您作为团队的一员工作。应避免对此类任意事物使用不同的编码样式。

关于您的后退/后退导航，您使用哪种方式应该不会有所不同，因为您必须实现相同的代码才能获得该导航类型。

# objective-c - Xcode 多个静态库和重复符号

> ID：13812007
> 
> 赞同：7
> 
> 时间：2012-12-11T01:03:49.457
> 
> 标签：objective-c, ios, xcode, static-libraries, static-linking

我正在开发一个依赖于两个静态实用程序库（libBFSDK 和 libBetfair-Platform）的 iPad 应用程序。两个静态库都包含 AFNetworking。当我尝试在 iPad 应用程序中包含这两个静态库时，出现如下链接错误：

```
duplicate symbol _OBJC_METACLASS_$_AFImageCache in:
/Users/osheas/Library/Developer/Xcode/DerivedData/Betfair-gnnjnwtovdmtoxakuxbjyvetciyy/Build/Products/Debug-iphonesimulator/libBFSDK.a(UIImageView+AFNetworking.o)
/Users/osheas/Library/Developer/Xcode/DerivedData/Betfair-gnnjnwtovdmtoxakuxbjyvetciyy/Build/Products/Debug-iphonesimulator/libBetfair-Platform.a(UIImageView+AFNetworking.o)
ld: 86 duplicate symbols for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

UIImageView+AFNetworking 是 AFNetworking 的一部分。两个静态库都包含 AFNetworking。结果，我得到了 UIImageView+AFNetworking 的重复符号。

有人对此有解决方法的想法吗？我可以访问这两个静态库的源代码，但我仍然不确定如何解决这个问题。

谢谢，如果您需要任何其他详细信息，请告诉我，

肖恩

PS - FWIW 我正在运行 Xcode 4.5 并且我需要能够部署到 iOS 4.x 设备。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-05T16:36:33.480

由于您可以访问静态库的源代码，因此您可以使用预处理器将 AFNetworking 符号重命名为独特的名称。

将每个重复符号的标志添加到您的“其他 C 标志”构建设置中，格式为

`-AFNetworkingSymbol=UniqueAFNetworkingSymbol`

这仍然会导致重复代码，但应该允许您拥有多个 AFNetworking 副本而无需修改源代码。

[更多信息](http://atastypixel.com/blog/avoiding-duplicate-symbol-issues-when-using-common-utilities-within-a-static-library/)

理想情况下，大多数开源 Obj-C 代码将转移到像 CocoaPods 这样的解决方案，并且只指定依赖项而不是捆绑它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T05:30:37.893

显然，这是一个比较普遍的现象。有关详细信息，请参阅[https://github.com/square/PonyDebugger/issues/36 。](https://github.com/square/PonyDebugger/issues/36)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-04T10:30:50.277

这是我见过的这个问题的最简单的解决方案。我已经对其进行了测试，并且可以正常工作。 [http://blog.sigmapoint.pl/avoiding-dependency-collisions-in-ios-static-library-managed-by-cocoapods/](http://blog.sigmapoint.pl/avoiding-dependency-collisions-in-ios-static-library-managed-by-cocoapods/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-11T03:41:35.753

您检查 _AFImageCache 在您的项目中有两个文件并删除一个。

这可以帮助你。

# php - 有没有办法排除显示：使用 DOM PDF 在 PDF 上没有元素

> ID：13812011
> 
> 赞同：1
> 
> 时间：2012-12-11T01:04:27.210
> 
> 标签：php, pdf, dompdf, inline-styles

我有一张可折叠/可展开的桌子。当我折叠（隐藏）行时，我使用 jQuery 应用内联“显示：无”CSS 样式。

我想使用 DOM PDF 生成 PDF，但是当我将 DOM 对象传递给 PDF 时，我得到了所有行。我只想让行/html元素没有应用样式“display：none”。

那可能吗？

谢谢！

# c# - 将泛型集合 List<> 绑定到属性网格

> ID：13812014
> 
> 赞同：3
> 
> 时间：2012-12-11T01:04:40.143
> 
> 标签：c#, winforms, binding, collections, propertygrid

我尝试将通用集合**listContact**绑定到**propGrid**，但输出与我的预期不符。我希望**listContact**在**propGrid**中显示为**ListBox**。我该怎么做？谢谢你。

 **```
class Contact
{
    public string Name { get; set; }
    public string Address { get; set; }
}

PropertyGrid propGrid = new PropertyGrid();
List<Contact> listContact   = new List<Contact>();

private void Form1_Load(object sender, EventArgs e)
{
    listContact.Clear();
    Contact newContact = null;

    newContact = new Contact();
    newContact.Name = "diana";
    newContact.Address = "en";
    listContact.Add(newContact);

    newContact = null;
    newContact = new Contact();
    newContact.Name = "maxim";
    newContact.Address = "cand";
    listContact.Add(newContact);

    propGrid.SelectedObject = listContact;
    this.Controls.Add(propGrid);
    propGrid.Dock = DockStyle.Fill;

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T02:30:22.230

您必须扩展您的课程才能使用`ExpandableObjectConverter`. 这使得可解析发生。

请参阅下面的代码。只是一个下降的例子。选择你最喜欢的一个。用于编码的来源：[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.propertygrid.aspx)

```
[TypeConverter(typeof(Contact))]
[DescriptionAttribute("Expand to see the spelling options for the application.")]
class Contact : ExpandableObjectConverter
{
    [DefaultValueAttribute("Contact Name")]
    public string Name { get; set; }
    public string Address { get; set; }

    public override bool CanConvertTo(ITypeDescriptorContext context, Type destinationType)
    {
        if (destinationType == typeof(Contact))
        {
            return true;
        }
        return base.CanConvertTo(context, destinationType);
    }

    public override object ConvertTo(ITypeDescriptorContext context, System.Globalization.CultureInfo culture, object value, Type destinationType)
    {
        if (destinationType == typeof(System.String) && value is Contact)
        {
            Contact contact = value as Contact;

            return string.Format("Name: {0} - Address: {1}", contact.Name, contact.Address);
        }
        return base.ConvertTo(context, culture, value, destinationType);
    }
}

[TypeConverter(typeof(Contact2))]
[DescriptionAttribute("Expand to see the spelling options for the application.")]
class Contact2 : ExpandableObjectConverter
{
    private Contact contato1;
    public Contact Contato1
    {
        get
        {
            return contato1;
        }
        set
        {
            contato1 = value;
        }
    }

    private Contact contato3;
    public Contact Contato3
    {
        get
        {
            return contato3;
        }
        set
        {
            contato3 = value;
        }
    }

    public Contact2()
    {
        this.contato1 = new Contact()
        {
            Address = "Add1",
            Name = "Name1"
        };
        this.contato3 = new Contact()
        {
            Address = "Add3",
            Name = "Name3"
        };
    }
}

public partial class Form2 : Form
{
    PropertiesList<Contact> listContact = new PropertiesList<Contact>();
    //List<Contact> listContact = new List<Contact>();

    public Form2()
    {
        InitializeComponent();
    }

    private void Form2_Load(object sender, EventArgs e)
    {
        listContact.Clear();
        Contact newContact = null;

        newContact = new Contact();
        newContact.Name = "diana";
        newContact.Address = "en";
        listContact.Add(newContact);

        newContact = null;
        newContact = new Contact();
        newContact.Name = "maxim";
        newContact.Address = "cand";
        listContact.Add(newContact);

        propGrid.AllowDrop = true;

        object[] itens = new object[2];
        itens[0] = listContact;
        itens[1] = newContact;
        propGrid.SelectedObject = listContact;
        this.Controls.Add(propGrid);
        propGrid.Dock = DockStyle.Fill;
    }
}

[TypeConverter(typeof(Contact))]
class PropertiesList<T> : ExpandableObjectConverter where T : Contact
{
    private List<T> innerList = new List<T>();

    public List<string> Names
    {
        get
        {
            List<string> valuesReturned = null;
            if (innerList.Count > 0)
            {
                valuesReturned = new List<string>();
                for (int i = 0; i < innerList.Count; i++)
                {
                    valuesReturned.Add(innerList[i].Name);
                }

            }
            return valuesReturned;
        }
    }

    public List<T> Item
    {
        get
        {
            List<T> valuesReturned = null;
            if (innerList.Count > 0)
            {
                valuesReturned = new List<T>();
                for (int i = 0; i < innerList.Count; i++)
                {
                    valuesReturned.Add(innerList[i]);
                }

            }
            return valuesReturned;
        }
    }

    public Color GetColors { get; set; }

    public Contact2 Contato22
    {
        get
        {
            return new Contact2();
        }
    }

    public override bool CanConvertTo(ITypeDescriptorContext context, Type destinationType)
    {
        if (destinationType == typeof(Contact))
        {
            return true;
        }
        return base.CanConvertTo(context, destinationType);
    }

    public override object ConvertTo(ITypeDescriptorContext context, System.Globalization.CultureInfo culture, object value, Type destinationType)
    {
        if (destinationType == typeof(System.String) && value is Contact)
        {
            Contact contact = value as Contact;

            return string.Format("Name: {0} - Address: {1}", contact.Name, contact.Address);
        }
        return base.ConvertTo(context, culture, value, destinationType);
    }

    #region Simulate List
    public void Add(T item)
    {
        innerList.Add(item);
    }

    public void Clear()
    {
        innerList.Clear();
    }
    #endregion
} 
```**

# python - Python：虚拟 MIDI 设备

> ID：13812018
> 
> 赞同：-3
> 
> 时间：2012-12-11T01:04:51.977
> 
> 标签：python, linux, midi

我需要在 Python 中创建一对 midi 设备。这个想法是我可以将 MIDI 设备的输出修补到我的脚本中，并将我的脚本的输出修补到类似 SoftSynth 的东西中。我的脚本会在 MIDI 流通过时对其进行修改。

我知道这几乎肯定是可能的，但我似乎找不到“包含电池”的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T01:15:55.533

Python 中没有内置的 MIDI 库，主要是因为没有“MIDI 设备”的跨平台概念。或者，更确切地说，大约有 30 种不同的——PortMedia、JACK、SDL 等。

所以，你必须选择一个。如果这是供个人使用，请选择您现在实际使用的那个来连接。是否跨平台无关紧要；无论您是使用 ALSA 还是 PortMedia 进行 MIDI，都需要使用包装器。

那么，如何找到包装器？只需转到[PyPI](http://pypi.python.org/pypi)并搜索“alsa”或“portmedia”或其他任何内容，可能与“midi”一起搜索，您很有可能会找到一个不错的包装器。（如果 X 不是内置的，这应该是您在 Python 中寻找库来执行 X 的第一步。）

# html - 结合 display:inline-block 与 clear:both 不垂直堆叠 div

> ID：13812021
> 
> 赞同：6
> 
> 时间：2012-12-11T01:05:16.320
> 
> 标签：html, css

我有一些看起来像这样的 HTML：

```
<div class="TheContainer">

 <div class="TheData">this is some text inline-block with clear</div>
 <div class="TheData">this is some other text inline-block but not clearing</div>

</div> 
```

CSS 看起来像这样：

```
.TheContainer{
 margin:20px 20px;
 background:red;}

.TheData{
 display:inline-block;   
 clear:both;
 background:yellow;
 padding:5px 5px;
 margin:10px 10px;} 
```

我正在使用`inline-block`，以便`TheData`div 很好地环绕它们的内容，而不是扩展`TheContainer`. 我也在使用`clear:both`这些 TheData div 堆叠在一起。

但是，`clear:both`当元素设置为`inline-block`. 这里的[JSFiddle](http://jsfiddle.net/8mk6L/2/)演示了这一点。

如何使用`inline-block`并使 div 垂直堆叠？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T01:23:09.817

`clear`仅用于清算`float`

为了得到你想要的效果，穿上`float:left`. `.TheData`您很可能还需要一个低于`div.TheData`s的元素，`clear`但没有`float`，以确保容器以正确的高度呈现。

[更新的小提琴](http://jsfiddle.net/8mk6L/6/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T01:28:05.700

我认为你想要的是[一个明确的解决办法来统治他们](https://stackoverflow.com/a/1633170/1888292)。

我不认为你想要`display: inline-block;`，因为它实际上是按照它应该的方式工作的。`float: left; clear: both;`使用内部元素和容器元素的 clear-fix可能会更好：

CSS：

```
TheContainer{
     margin:20px 20px;
     padding:10px 10px;
     background:red;
     clear:both;
}

.TheData{
    float:left;
    clear: both;
    background:yellow;
    padding:5px 5px;
    margin:10px;
}

/* For modern browsers */
.cf:before,
.cf:after {
    content:"";
    display:table;
}
.cf:after {
    clear:both;
}
/* For IE 6/7 (trigger hasLayout) */
.cf {
    zoom:1;
}.

<div class="TheContainer cf">

    <div class="TheData">smaller</div>
    <div class="TheData">smaller a</div>
    <div class="TheData">smaller a b</div>
    <div class="TheData">smaller a b c</div>
    <div class="TheData">smaller a b c d</div>
    <div class="TheData">this is some other text inline-block but not clearing</div>
</div> 
```

[jsFiddle](http://jsfiddle.net/8mk6L/8/)

# ruby-on-rails - 部署 rails 选择

> ID：13812024
> 
> 赞同：1
> 
> 时间：2012-12-11T01:05:31.697
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

在我读完 Agile Web Development with Rails 之后，我开发了自己的网站。

现在我正在尝试在租用的 linux 系统上部署我的项目，但我对如何部署 rails 一无所知。我应该使用哪个服务器？如何连接到mysql数据库？

作为一名 java 开发人员，我知道我可以使用 tomcat 作为我的服务器，它可以将 http 请求转换为我自己的对象并使用 jdbc 连接到我的 mysql 数据库。

现在我想知道部署的主流环境rails是什么？

我听说过 Lighttpd 和 FCGI。我可以在产品环境中使用它们吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T01:13:45.910

您的 linux 系统是完整的 VPS（您有完全的控制权吗？）如果没有，请检查您的托管公司以了解您可以使用哪些选项。如果是这样，请检查他们是否有设置 Rails 的指南。很多（Slicehost、Linode 等）都可以。

做不到这一点......我会推荐 Apache（或 Nginx）和Passenger。

[https://www.phusionpassenger.com/](https://www.phusionpassenger.com/)

这很简单。

至于实际部署，请查看 Capistrano（或 Vlad）。这些有点复杂，但从长远来看，它们让生活变得更加轻松。

# iphone - 如何从视图和视图控制器中删除关联？

> ID：13812028
> 
> 赞同：3
> 
> 时间：2012-12-11T01:06:15.730
> 
> 标签：iphone, objective-c, ios6, facebook-ios-sdk

当我在发送电子邮件（使用 MFMailComposeViewController）后尝试显示 facebook 共享时，我收到此错误：

> 一个视图一次最多只能关联一个视图控制器！视图 [EAGLView] 与 [EmailViewController] 相关联。在将此视图与 [FacebookView] 关联之前清除此关联。

[EmailViewController removeFromParentViewController]; 什么也没做

EmailViewController.view = nil; 导致白屏，即使电子邮件表单早已不复存在。

如何让它忘记我曾经发送过电子邮件并让视图层次回到以前的状态？如果我没有发送电子邮件，则 Facebook 共享有效。

```
-(IBAction)ShowEmailForm:(char*)pSubject :(char*)pBody :(char*)pTo
{

    Class mailClass = (NSClassFromString(@"MFMailComposeViewController"));

    if (mailClass != nil)
    {
        if ([mailClass canSendMail])
        {
            self.view = eaglView;

            MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
            picker.mailComposeDelegate = self;

            [picker setSubject:[NSString stringWithFormat:@"%s", pSubject]];

            // Set up recipients
            if( pTo != nil )
            {
                NSArray *toRecipients = [NSArray arrayWithObject:[NSString stringWithFormat:@"%s", pTo]];
                [picker setToRecipients:toRecipients];
            }

            // Fill out the email body text
            [picker setMessageBody:[NSString stringWithFormat:@"%s",pBody] isHTML:YES];

            [self presentViewController:picker animated:YES completion:^(){}];
            [picker release];
        }
    }
}

// Dismisses the email composition interface when users tap Cancel or Send. Proceeds to update the message field with the result of the operation.
- (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error 
{    
    [self dismissViewControllerAnimated:YES completion:^(){ printf("Email form done dismissing.\n"); }];

    printf("Email form dismissed.\n");

    [self removeFromParentViewController];

    //Email was sent.
    if (result == MFMailComposeResultSent)
    {
        printf("Email Sent!\n");

        NSString *pEmail = [self findEmailAddresses:controller.view : 0];

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T01:01:42.647

解决它。

改变

```
 self.view = eaglView; 
```

至

```
 [eaglView addSubview:self.view]; 
```

# php - 通过 POST 保存 html 文件只能工作一次

> ID：13812034
> 
> 赞同：0
> 
> 时间：2012-12-11T01:06:57.540
> 
> 标签：php, post

我有一个 html 页面 (database.html)，其中包含一个可以通过 javascript 编辑的表。以下 PHP 脚本用于保存页面。

PHP 脚本保存 database.html 的更新版本并重定向到新版本（同一文件）。

问题是第二次按保存时它不起作用，只有第一次。

任何想法可能是什么问题？

**HTML：**

```
<!DOCTYPE html><head>
<title>Database</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
#textarea_database {
display:none;
}
</style>
<script src="js.js"></script>
</head>
<body>

<a id="a_save" href="#">Save</a>

<form id="form_database" method="post" action="save.php">
<textarea id="textarea_database" name="textarea_database"></textarea>
</form>

<div id="contenteditable" contenteditable="true">
Write something and press save...
</div>

</body> 
```

**JavaScript：**

```
window.onload = function () {

    var a_save = document.getElementById('a_save'),
        form_database = document.getElementById('form_database'),
        textarea_database = document.getElementById('textarea_database');

    a_save.onclick = function () {
        textarea_database.value = document.documentElement.innerHTML;
        form_database.submit();
    }
} 
```

**PHP：**

```
<?php

// the textarea contain all th html
$textarea_database =  $_POST["textarea_database"];

// add doctype since javascript document.documentElement.innerHTML dont get it
$textarea_database = '<!DOCTYPE html>' . $textarea_database;

// update the html database file
$open_database = fopen('database.html','w+');
fputs($open_database,$textarea_database);
fclose($open_database);

// redirect to the uppdated database (timestamp prevent browser cache)
$the_time = date('Y-m-d-H-i-s');
$url_and_time = "database.html?" . $the_time;
header("Location: $url_and_time ");
exit;

?> 
```

# instruments - 将 .trace 文件保存到其他位置

> ID：13812037
> 
> 赞同：3
> 
> 时间：2012-12-11T01:07:07.143
> 
> 标签：instruments, xcode-instruments

我正在从命令行运行仪器。在我的命令中，我确实使用指定了输出路径

```
-e UIARESULTSPATH /user/xxxx 
```

但是，保存到上述位置的文件是 plist 文件。.trace（即instrumentscli14.trace）文件会自动保存到我保存脚本的文件夹中。

有谁知道有没有办法将 .trace 文件保存到自定义位置？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T20:49:08.343

> 有谁知道有没有办法将 .trace 文件保存到自定义位置？

使用该`-D`选项，如下所示：

```
-D TestResults/TestTrace/theTrace.trace 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-16T17:36:25.663

我发现 -D 选项不起作用，但仪器将跟踪文件保存到您从中运行命令的当前目录..

# javascript - Javascript 在 IE9 中没有互联网连接就无法工作

> ID：13812038
> 
> 赞同：-2
> 
> 时间：2012-12-11T01:07:08.653
> 
> 标签：javascript, asp.net-mvc, internet-explorer, iis-7.5

我在运行 IE9 的 IIS 7.5 的笔记本电脑上发布了一个网站。当我插入互联网时，网站工作正常。奇怪的是，无论机器是否有互联网，它都可以在 Firefox 中正常工作。其他一些可能有用的信息。运行 Windows 7 64 位。最新版本的火狐。IE9。不确定您可能还需要什么。我已经尝试检查 IE 权限，但我可能遗漏了一些东西，因此我们将不胜感激。

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>@ViewBag.Title</title>
<link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
<meta name="viewport" content="width=device-width" />
@*----------------- JQUERY UI for Accordion  Starts here-------------------- *@
<link href="../../Content/themes/Blue/jquery-ui-1.9.1.custom.min.css" rel="stylesheet"
    type="text/css" />
<script src="../../Scripts/jquery-1.8.2.js" type="text/javascript"></script>
<script src="../../Scripts/jquery-ui-1.9.1.custom.js" type="text/javascript"></script>
@* -----------JQUERY UI for Accordion  Ends here--------------------- *@ @*----------------- JQUERY UI for Delete Dialog  Starts here-------------------- *@
<script src="../../Scripts/external/jquery.bgiframe-2.1.2.js" type="text/javascript"></script>
@* <script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>*@
<script src="../../Scripts/external/jquery-ui.js">></script>
@*----------------- JQUERY UI for Delete Dialog  Ends here-------------------- *@
@Styles.Render("~/Content/css")
@Scripts.Render("~/bundles/modernizr")
@*
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
*@ @* ----------- Scripts added for Devexpress but commented because JQUERY UI not working --------------------- *@
@* 
<script type="text/javascript" src="@Url.Content("~/Scripts/jquery-1.4.4.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js")"></script>

 *@ @* ----------- Scripts added for Devexpress ends here--------------------- *@
@Html.DevExpress().GetScripts(
       new Script { ExtensionSuite = ExtensionSuite.GridView },
       new Script { ExtensionSuite = ExtensionSuite.PivotGrid },
       new Script { ExtensionSuite = ExtensionSuite.HtmlEditor },
       new Script { ExtensionSuite = ExtensionSuite.Editors },
       new Script { ExtensionSuite = ExtensionSuite.NavigationAndLayout },
       new Script { ExtensionSuite = ExtensionSuite.Chart },
       new Script { ExtensionSuite = ExtensionSuite.Report }
        //new Script { ExtensionSuite = ExtensionSuite.Scheduler }
 )
@Html.DevExpress().GetStyleSheets(
       new StyleSheet { ExtensionSuite = ExtensionSuite.GridView },
       new StyleSheet { ExtensionSuite = ExtensionSuite.PivotGrid },
       new StyleSheet { ExtensionSuite = ExtensionSuite.HtmlEditor },
       new StyleSheet { ExtensionSuite = ExtensionSuite.Editors },
       new StyleSheet { ExtensionSuite = ExtensionSuite.NavigationAndLayout },
       new StyleSheet { ExtensionSuite = ExtensionSuite.Chart },
       new StyleSheet { ExtensionSuite = ExtensionSuite.Report }
        //new StyleSheet { ExtensionSuite = ExtensionSuite.Scheduler }
 )
@* ---------------------------------JQUERY Scripts for Delete confirmation Starts here --------------------------------*@
<script type="text/javascript">
    // increase the default animation speed to exaggerate the effect
    $.fx.speeds._default = 500;
    $(function () {
        $("#dialog").dialog({
            autoOpen: false,
            show: "blind",
            hide: "explode",
            width: 250,
            resizable: false,
            modal: true,
            buttons:
            {
                "Delete": function () {
                    $.post(deleteLinkObj[0].href, function (data) {  //Post to action
                        //Check data the return from the middle layer, if it is just true, deletion is successful
                        if (data == '@Boolean.TrueString') {
                            deleteLinkObj.closest("tr").hide('fast'); //Hide Row
                            $("#dialog").dialog("close");   //See it used #dialog instead of (this)  because the scope (context) has changed in the "Delete" callback
                            $(this).empty();
                            $("#StatusMsg").html("Deleted");
                            location.reload();   //refreshes the page
                        }
                        else {

                            //Show the errror on the dialog content. Data is used to show the error
                            //expecting the Error handlers in middle layer will return the meaning ful error message
                            $("#dialog").html(data);
                            //Hide confirmation button inorder to show the user to only the content of error in the same 
                            //dialog box and allow to cancel this dialog
                            $(":button:contains('Delete')").css("display", "none");
                            $("#StatusMsg").html("Not Deleted");
                        }
                        //location.reload();
                    });

                },
                "Cancel": function () {
                    //This reset of the Delete button is need since if it wsas invoked and jumped into show error routine,
                    // then that routine would have removed the Delete button.
                    $(":button:contains('Delete')").css("display", "inline");
                    $(this).dialog("close");
                    $("#StatusMsg").html("");
                }
            }
        });

        var deleteLinkObj;
        var deletMsg;
        $('a.inputFakeDelete').click(function () {

            //Here the  message is built using the delete button properties id and name. 
            //So every page calling this jquery need to have the link button embedded with these properties
            //eg: id = Grade, name = the name of the grade from the model
            deletMsg = "Are you sure you want to delete this " + this.id;
            if (this.name == "") {
            }
            else {
                deletMsg = deletMsg + " '" + this.name + "'" //"Are you sure you want to delete the " + (this).id +  " '" + (this).name + "'?";
            }
            deletMsg = deletMsg + "?"

            $("#dialog").html(deletMsg)
            deleteLinkObj = $(this);  //to use in the dialog javascript
            $("#dialog").dialog("open");
            return false;
        });
    });
</script>
@*----------------------------------JQUERY Scripts delete confirmation Ends here --------------------------------*@
@*----------------------------------JQUERY Scripts for record cuirrent filer --------------------------------*@
<script type="text/javascript">
    var currentValue = 0;
    function handleClick(currentfilter) {
        //alert('Old value: ' + currentValue);
        //alert('New value: ' + currentfilter.value);
        currentValue = currentfilter.value;

        //Redirect the page so that will reload with new parameters 
        window.location = 'http://' + window.location.host + currentValue;  //Add 'http://' since host will not include this

    }
</script>
@*----------------------------------JQUERY Scripts for record cuirrent filer ends here --------------------------------*@
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script> 
```

错误页面只是说它找不到特定的网页。客户/删除

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T01:02:51.587

我不确定这是否是解决我的问题的方法（由于这台机器不是我自己的，所以测试起来有点困难），但后来我们使用 aspnet_regiis.exe 重新配置了 .net，问题看起来已经消失了.

# android - 靠近特定纬度和经度地理点时收到警报

> ID：13812043
> 
> 赞同：0
> 
> 时间：2012-12-11T01:07:40.350
> 
> 标签：android, google-maps

我正在使用适用于 Android 的 Google Maps API v2，使用 MapFragment。

在 MySQL 引擎上，我有一张表格，其中包含来自全国各地特定道路点的经纬度对。

所以想象我正在用我的手机开车，应用程序是打开的，几乎可以立即通过 onLocationChanged 我当前的纬度和经度。

当我接近 MySQL 表的某一点时，我希望得到警报。这怎么可能？

我知道 Google Distance API，我知道我可以查询我的原点和几个 distinations 来获得几个距离然后比较它们，但是如果我的 SQL 表中有 1k 纬度和经度，这是不可能的，因为使用限制。

没有其他方法可以做到这一点吗？

# asp.net-mvc-3 - asp.net mvc 3 iis 7.5 404 错误

> ID：13812048
> 
> 赞同：0
> 
> 时间：2012-12-11T01:08:23.423
> 
> 标签：asp.net-mvc-3, iis-7.5

**编辑**

如果我使用 Visual Development Server，那么在我的开发机器上运行良好。但是，如果我设置为 Use Local IIS WebServer (project url set at `http://localhost/myapp`) 它不起作用，我会收到 401 错误。

使用 msdeploy 从 Visual Studio 2010 部署到带有名为 apps.mydomain.com/myapp 的站点的 IIS 7.5。所以基本上我想浏览到[http://apps.mydomain.com/myapp](http://apps.mydomain.com/myapp)但是当我这样做时我得到 404 错误。

*   我只在站点上启用了 Windows 身份验证，其他所有内容都被禁用。
*   我已经安装了修补程序[http://support.microsoft.com/kb/980368](http://support.microsoft.com/kb/980368)。
*   应用程序池 .NET 4 集成管道。我也尝试过经典管道，但不起作用。
*   执行 %windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_regiis.exe -ir 仍然不起作用

我做错了什么还是我需要做其他事情？

全球.asax

```
public class MvcApplication : System.Web.HttpApplication
{
    public static void RegisterGlobalFilters(GlobalFilterCollection filters)
    {
        filters.Add(new AuthorizeAttribute());
        filters.Add(new HandleErrorAttribute());
    }

    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");            
        routes.IgnoreRoute("{*favicon}", new { favicon = @"(.*/)?favicon.ico(/.*)?" });      

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        );
    }

    protected void Application_Start()        
    {
        AreaRegistration.RegisterAllAreas();

        RegisterGlobalFilters(GlobalFilters.Filters);
        RegisterRoutes(RouteTable.Routes);
    }     
} 
```

网页配置

```
 <?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
    <sectionGroup name="elmah">
      <section name="security" requirePermission="false" type="Elmah.SecuritySectionHandler, Elmah" />
      <section name="errorLog" requirePermission="false" type="Elmah.ErrorLogSectionHandler, Elmah" />
      <section name="errorMail" requirePermission="false" type="Elmah.ErrorMailSectionHandler, Elmah" />
      <section name="errorFilter" requirePermission="false" type="Elmah.ErrorFilterSectionHandler, Elmah" />
    </sectionGroup>
  </configSections>
  <appSettings>
    <add key="webpages:Version" value="1.0.0.0" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
    <add key="elmah.mvc.disableHandler" value="false" />
    <add key="elmah.mvc.disableHandleErrorFilter" value="false" />
    <add key="elmah.mvc.requiresAuthentication" value="false" />
    <add key="elmah.mvc.allowedRoles" value="*" />
    <add key="elmah.mvc.route" value="elmah" />
    <add key="autoFormsAuthentication" value="false" />
    <add key="enableSimpleMembership" value="false" />
  </appSettings>
  <system.web>
    <customErrors mode="On" defaultRedirect="~/error">
      <error statusCode="404" redirect="~/error/notfound"></error>
    </customErrors>
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
      </assemblies>
    </compilation>

    <authentication mode="Windows" />

    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
      </namespaces>
    </pages>
    <httpModules>
      <add name="ErrorLog" type="Elmah.ErrorLogModule, Elmah" />
      <add name="ErrorMail" type="Elmah.ErrorMailModule, Elmah" />
      <add name="ErrorFilter" type="Elmah.ErrorFilterModule, Elmah" />
    </httpModules>
  </system.web>
  <system.webServer>
    <httpErrors errorMode="Custom" existingResponse="Replace">
      <remove statusCode="404" />
      <error statusCode="404" responseMode="ExecuteURL" path="~/error/notfound" />
      <remove statusCode="500" />
      <error statusCode="500" responseMode="ExecuteURL" path="~/error" />
    </httpErrors>
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true">
      <add name="ErrorLog" type="Elmah.ErrorLogModule, Elmah" preCondition="managedHandler" />
      <add name="ErrorMail" type="Elmah.ErrorMailModule, Elmah" preCondition="managedHandler" />
      <add name="ErrorFilter" type="Elmah.ErrorFilterModule, Elmah" preCondition="managedHandler" />
    </modules>
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="3.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" />
  </entityFramework>
  <connectionStrings>

  </connectionStrings>
  <elmah>
    <errorLog type="Elmah.SqlErrorLog, Elmah" connectionStringName="Elmah.Sql" />
    <security allowRemoteAccess="true" />
  </elmah>
  <location path="elmah.axd" inheritInChildApplications="false">
    <system.web>
      <httpHandlers>
        <add verb="POST,GET,HEAD" path="elmah.axd" type="Elmah.ErrorLogPageFactory, Elmah" />
      </httpHandlers>

      <authorization>
        <allow roles="admin" />
        <deny users="*" />  
      </authorization>
      -->
    </system.web>
    <system.webServer>
      <handlers>
        <add name="ELMAH" verb="POST,GET,HEAD" path="elmah.axd" type="Elmah.ErrorLogPageFactory, Elmah" preCondition="integratedMode" />
      </handlers>
    </system.webServer>
  </location>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T23:01:30.750

看起来你的绑定有问题。

您也可以在 DNS 中检查 apps.mydomain.com。

PS如果你不确定你的路由，你可以使用这个很酷的小库：[http ://haacked.com/archive/2008/03/13/url-routing-debugger.aspx](http://haacked.com/archive/2008/03/13/url-routing-debugger.aspx)

# java - Android平台上的HttpsURLConnectionImpl.getInputStream()错误

> ID：13812051
> 
> 赞同：5
> 
> 时间：2012-12-11T01:09:14.727
> 
> 标签：java, android, google-api, inputstream, httpurlconnection

这是我的任务。给定一对纬度和经度，我想从 Google Places API 获取 JSON。下面的函数 reverseGeoCoding 返回字符串 JSON。

```
public String reverseGeoCoding(String lat, String lng) {
    latitude = lat;
    longitude = lng;
    String json = new String();
    String url = new String();

    URL googleAPI;
    try {
        url = URL + "location=" + latitude + "," + longitude + "&" + "radius=" + radius + "&" + "language=" + language + "&" + "sensor=false" + "&" + "key=" + APIKey;

        googleAPI = new URL(url);
        Log.d("TEST", googleAPI.toString());
        URLConnection gc = (URLConnection) googleAPI.openConnection();
        Log.d("TEST", gc.toString());

        InputStream is = gc.getInputStream();
        Log.d("TEST", "InputStream created");
        BufferedReader in = new BufferedReader(new InputStreamReader(is));
        Log.d("TEST", "reader created");
        String inputLine;
        while ((inputLine = in.readLine()) != null) {
            json = json + inputLine + "\n";
            Log.d("TEST", inputLine);
        }

        in.close();

    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return json;
} 
```

但是，getInputStream() 不起作用。我已经检查了网络浏览器上的 url 请求，它工作正常（返回 JSON 文档）。

错误消息如下。（为什么第 17 行和第 18 行会产生错误）

```
1\. 12-11 00:46:02.862: W/System.err(12953): android.os.NetworkOnMainThreadException
2\. 12-11 00:46:02.872: W/System.err(12953):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1084)
3\. 12-11 00:46:02.872: W/System.err(12953):     at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
4\. 12-11 00:46:02.872: W/System.err(12953):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
5\. 12-11 00:46:02.872: W/System.err(12953):     at java.net.InetAddress.getAllByName(InetAddress.java:220)
6\. 12-11 00:46:02.872: W/System.err(12953):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:71)
7\. 12-11 00:46:02.872: W/System.err(12953):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
8\. 12-11 00:46:02.882: W/System.err(12953):     at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:351)
9\. 12-11 00:46:02.882: W/System.err(12953):     at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:86)
10\. 12-11 00:46:02.882: W/System.err(12953):    at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
11\. 12-11 00:46:02.882: W/System.err(12953):    at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:308)
12\. 12-11 00:46:02.882: W/System.err(12953):    at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.makeSslConnection(HttpsURLConnectionImpl.java:460)
13\. 12-11 00:46:02.882: W/System.err(12953):    at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.connect(HttpsURLConnectionImpl.java:432)
14\. 12-11 00:46:02.882: W/System.err(12953):    at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
15\. 12-11 00:46:02.882: W/System.err(12953):    at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)
16\. 12-11 00:46:02.882: W/System.err(12953):    at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:273)
17\. 12-11 00:46:02.882: W/System.err(12953):    at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:168)
18\. 12-11 00:46:02.894: W/System.err(12953):    at libcore.net.http.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:270)
19\. 12-11 00:46:02.894: W/System.err(12953):    at locationpredict.POIList.reverseGeoCoding(POIList.java:55)
20\. 12-11 00:46:02.894: W/System.err(12953):    at locationpredict.TestMain$1.onClick(TestMain.java:62) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T01:25:40.753

由于人们在主线程上使用繁重的网络操作导致应用程序无响应，因此添加了此新功能以防止人们这样做。
您应该使用 AsyncTask 或服务来执行此操作。

```
 private class GetJsonTask extends AsyncTask<String, Void, String>{

            @Override
            protected String doInBackground(String... params) {
        try {
            latitude = params[0];
             longitude = params[1];
             String json = new String();
             String url = new String();
             URL googleAPI;

            url = URL + "location=" + latitude + "," + longitude + "&" + "radius=" + radius + "&" + "language=" + language + "&" + "sensor=false" + "&" + "key=" + APIKey;

            googleAPI = new URL(url);
            Log.d("TEST", googleAPI.toString());
            URLConnection gc = (URLConnection) googleAPI.openConnection();
            Log.d("TEST", gc.toString());

            InputStream is = gc.getInputStream();
            Log.d("TEST", "InputStream created");
            BufferedReader in = new BufferedReader(new InputStreamReader(is));
            Log.d("TEST", "reader created");
            String inputLine;
            while ((inputLine = in.readLine()) != null) {
                json = json + inputLine + "\n";
                Log.d("TEST", inputLine);
            }

            in.close();

        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
         return json;
    }

    @Override
        protected void onPostExecute(String result) {
            parseJson(result); // json should be stored in the result
        }
  }

private void parseJson(String json){
     JSONObject obj = new JSONObject(json);
....

} 
```

像这样称呼它：

```
String[] data = new String[2];
data[0] = lat;
data[1] = long;
new GetJsonTask().execute(data); 
```

或者你可以通过在调用方法之前在你的 onCreate() 方法中添加以下代码来绕过它，但我不推荐这种方法。只需将其用于测试。

```
 if( Build.VERSION.SDK_INT >= 9){
            StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
            StrictMode.setThreadPolicy(policy);
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T01:14:15.720

[> android.os.NetworkOnMainThreadException ：](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)

> 当应用程序尝试在其主线程上执行网络操作时引发的异常。

使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)来避免这个错误。并将所有与网络相关的任务放在`doInBackground`AsyncTask 的方法中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T02:25:42.363

正如其他答案所建议的那样，使用异步任务。还推荐使用[gson](http://code.google.com/p/google-gson/)将对象转换为/从 json 字符串！

# objective-c - UICollectionViewCell 子类问题

> ID：13812053
> 
> 赞同：1
> 
> 时间：2012-12-11T01:09:19.313
> 
> 标签：objective-c, ios6, uicollectionview, uicollectionviewcell

我已经继承了 UICollectionViewCell-

```
@interface ListCell : UICollectionViewCell
@property(nonatomic,strong) IBOutlet UILabel *lblAppName;
@end 
```

我已经为它制作了一个 xib，制作了所有 IBOutlet 集合并设置了 XIB 的类，在 Collection 视图委托方法中使用这个 Cell 时，我在尝试访问标签实例时得到一个 nill 值。

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)cv cellForItemAtIndexPath:(NSIndexPath *)indexPath {

ListCell *cell = (ListCell *)[cv dequeueReusableCellWithReuseIdentifier:@"ListCell" forIndexPath:indexPath];
AppDetails *temp=[arrApplist objectAtIndex:indexPath.item];
cell.lblAppName.text=temp.strName;
return cell;
} 
```

我已通过以下方式将单元格注册到我的收藏视图：

```
[collectionView registerClass:[ListCell class] forCellWithReuseIdentifier:@"ListCell"]; 
```

还有什么我可能会丢失的吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T02:16:39.820

我认为您需要使用 registerNib:forCellWithReuseIdentifier: 来注册 xib，而不是注册类。试试看，看看是否有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T15:33:45.107

如果你使用 ListCell.xib，请使用 registerNib:forCellWithReuseIdentifier:。在 awakeFromNib 而不是 initWithFrame 中实现您的 ListCell 初始值。并像这样更改类型：

```
- (ListCell *)collectionView:(UICollectionView *)cv cellForItemAtIndexPath:(NSIndexPath *)indexPath {
ListCell *cell = [cv dequeueReusableCellWithReuseIdentifier:@"ListCell" forIndexPath:indexPath];
cell.lblAppName.text=(NSString *); 
return cell; 
} 
```

# javascript - javascript 相对于窗口大小调整内容大小

> ID：13812059
> 
> 赞同：1
> 
> 时间：2012-12-11T01:10:02.377
> 
> 标签：javascript, window, height

我希望我的内容具有最大化窗口的 height = window.height() 。当窗口未最大化时，如何获取最大化窗口的 window.height() ？当我使用 screen.availheight 时，我的内容在 Chrome 的底部被截断。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T02:41:05.747

调整浏览器大小时，使用函数调整内容窗口的大小...

```
function resize() {
    var ht;
           var objDiv = document.getElementById("[YOUR DIV]");

           if (typeof window.innerHeight != 'undefined') {
            ht = window.innerHeight
           } else if (typeof document.documentElement != 'undefined' && typeof  document.documentElement.clientHeight != 'undefined' && document.documentElement.clientHeight != 0) {
        ht = document.documentElement.clientHeight
    }

           objDiv.style.height = (ht - 100) + 'px';
           return objDiv;
} 
```

然后在某处调用它...

```
onresize="resize(); 
```

# sql - 将文件导入 SQLite 时如何忽略损坏的行？

> ID：13812060
> 
> 赞同：2
> 
> 时间：2012-12-11T01:10:02.557
> 
> 标签：sql, sqlite

在 Linux 上使用 SQLite 3 将文件中的损坏行导入表时，有什么方法可以忽略它们？文件大小为 13GB，文件中有大约 50 行损坏的行，因此手动删除这些行并不容易。任何建议将不胜感激。

```
sqlite> .separator "|"
sqlite> .import myFile.dat myTable
myFile.dat line 29046575: expected 18 columns of data but found 3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-10-31T13:10:22.890

升级到 sqlite 3.8.10。

当存在不合适的行时，似乎 3.7.x 会使整个导入无效。3.8.x 似乎打印警告但继续导入。

# playframework-2.0 - 播放 2.1 本地开发模式抱怨“无法加载 ManualInjectionPlugin 插件”

> ID：13812061
> 
> 赞同：2
> 
> 时间：2012-12-11T01:10:13.130
> 
> 标签：playframework-2.0, playframework-2.1

升级到 Play 2.1 时出现此错误。“播放编译”很好。但是，我不确定这个错误来自哪里？

```
$ play ~run
[info] Loading project definition from ...

--- (Running the application from SBT, auto-reloading is enabled) ---

[info] play - Listening for HTTP on /0.0.0.0:9000

(Server started, use Ctrl+D to stop and go back to the console...)

......

! @6cin1d5no - Internal server error, for (GET) [/] ->

play.api.PlayException: Cannot load plugin[Plugin [com.typesafe.plugin.inject.ManualInjectionPlugin] cannot been instantiated.]
    at play.api.WithDefaultPlugins$$anonfun$plugins$1$$anonfun$apply$9.apply(Application.scala:146) ~[play_2.10-2.1-RC1.jar:2.1-RC1]
    at play.api.WithDefaultPlugins$$anonfun$plugins$1$$anonfun$apply$9.apply(Application.scala:124) ~[play_2.10-2.1-RC1.jar:2.1-RC1]
    at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:244) ~[scala-library.jar:na]
    at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:244) ~[scala-library.jar:na]
    at scala.collection.immutable.List.foreach(List.scala:309) ~[scala-library.jar:na]
    at scala.collection.TraversableLike$class.map(TraversableLike.scala:244) ~[scala-library.jar:na]
Caused by: java.lang.ClassNotFoundException: com.typesafe.plugin.inject.ManualInjectionPlugin
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202) ~[na:1.6.0_31]
    at java.security.AccessController.doPrivileged(Native Method) ~[na:1.6.0_31]
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190) ~[na:1.6.0_31]
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306) ~[na:1.6.0_31]
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247) ~[na:1.6.0_31]
    at play.api.WithDefaultPlugins$$anonfun$plugins$1$$anonfun$apply$9.apply(Application.scala:126) ~[play_2.10-2.1-RC1.jar:2.1-RC1] 
```

这是 Build.scala 中的依赖项。

```
 val appDependencies = Seq(
       javaCore, javaJdbc, javaEbean,
       "com.github.twitter" % "bootstrap" % "2.0.4",
       "postgresql" % "postgresql" % "9.1-901-1.jdbc4",
       "commons-codec" % "commons-codec" % "1.6",
@@ -18,7 +19,7 @@ object ApplicationBuild extends Build {
       ("com.jayway.facebooktestjavaapi" % "facebook-test-java-api" % "1.1.5" notTransitive()),
       "net.java.dev.jets3t" % "jets3t" % "0.9.0",
       "com.typesafe" % "play-plugins-inject" % "2.0.2",
       "com.typesafe" %% "play-plugins-mailer" % "2.1-SNAPSHOT",
       "com.typesafe.akka" % "akka-testkit" % "2.0.2",
       "org.imgscalr" % "imgscalr-lib" % "4.2",
       "org.codehaus.jackson" % "jackson-jaxrs" % "1.9.5",
@@ -32,14 +33,10 @@ object ApplicationBuild extends Build {
       "com.sun.jersey" % "jersey-client" % "1.9-ea04",
       "com.sun.jersey" % "jersey-core" % "1.9-ea04",
       "com.fasterxml.jackson.core" % "jackson-databind" % "2.0.0",
      "org.mindrot" % "jbcrypt" % "0.3m"
     ) 
```

# java - 在Java中基于字符串创建整数数组

> ID：13812062
> 
> 赞同：-1
> 
> 时间：2012-12-11T01:10:16.430
> 
> 标签：java, arrays, string, integer

对于我的 compsci 分配，我们应该接受一个给我们的字符串，其中包含整数和字母，然后创建一个方法来获取该字符串并将其转换为包含整数的整数数组。出于某种原因，我的方法没有将整数添加到数组中，我不确定为什么。

对于字符串中给出的字母，我们应该丢弃它们，所以我们有一个只有 int 值的数组；前任。输入：abs3131afas312 数组将有 {3131,312}

这是[作业的链接](http://www.cs.uwm.edu/classes/cs201/semester/assignment/10/10/10.html)。

这是我的方法：

```
public static int[] intParse(String a){
    int[] array1 = new int[a.length()];
    int b = 0;
    for(int i = 0; i < a.length(); ++i)
    {
        int g = a.charAt(i);

        if(g == 1 || g == 2 || g == 3 || g == 4 || g == 5 || g == 6 || g == 7 || g == 8 || g == 9 || g == 0)
        {

            String c;
            for(int j = i; j < a.length(); ++j)
            {
                int k = a.charAt(j);
                if(k != 1 && k != 2 && k != 3 && k != 4 && k != 5 && k != 6 && k != 7 && k != 8 && k != 9 && k != 0)
                {
                    c = a.substring(j,k-1);
                    array1[b] += Integer.parseInt(c);
                    b++;
                    j = (a.length());
                    i = a.charAt(j);

                }
                else
                {
                    c = a.substring(j,a.length());
                    array1[b] = Integer.parseInt(c);
                    j = a.length();
                }
            }

        }

    }

        return array1;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T01:17:37.323

与其将字符与整数进行比较并使用 ，不如`Integer.parseInt`使用以下非常有用的实用方法：

```
Character.isDigit(int codepoint)
Character.getNumericValue(int codepoint) 
```

另外，你的逻辑似乎有点粗略。当`k`是一个数字代码点时，您正试图解析整个字符串的其余部分。这似乎与您尝试对外部循环执行的操作不一致。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T01:16:38.360

为您解决问题：

```
char g = a.charAt(i);
if(g == '1' || g == '2' || g == '3' || g == '4' || g == '5' || g == '6' || g == '7' || g == '8' || g == '9' || g == '0') { 
```

或者更好：

```
char g = a.charAt(i);
if(g >= '0' && g <= '9') { 
```

你的其他`if`也需要修复

```
char k = a.charAt(j);
if(k < '0' || k > '9') { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T01:19:32.730

首先，`a`是一个字符串，并且包含 ASCII 字符而不是整数。字符 '1' 不等于整数 1。它等于 '1' 的[ASCII](http://www.asciitable.com/)值，恰好是 49。

因此，您应该做的第一件事是将 long if 条件更改为：

```
char c = a.charAt(i);
if (c >= '0' && c <='9')
{
   ...
} 
```

然后你应该做的是保留一个字符串（每次遇到非数字字符然后是数字字符时一个新字符串，并继续附加`c`到它，直到你找到的字符是非数字的。

然后，您可以简单`Integer.parseInt(yourString)`地获取整数中的数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T02:05:04.000

您可能更喜欢这种方法：

```
 Scanner sc = new Scanner("abs3131afas312");
      String match;
      while ((match = sc.findInLine("(\\d+)"))!=null) {
              // instead of printing it, put it in your array
              // or a list (and then convert to array)
              System.out.println(Integer.parseInt(match));
      }         
      sc.close(); 
```

输出：

```
3131
312 
```

# php - twitteroauth 出错，从搜索 API 检索推文

> ID：13812064
> 
> 赞同：0
> 
> 时间：2012-12-11T01:10:31.453
> 
> 标签：php, twitter, oauth

我正在尝试使用 twitteroauth 来使用 Twitter 搜索 API 检索推文。

这是我的代码：

```
/* Load required lib files. */
session_start();
require_once('twitteroauth/twitteroauth.php');
require_once('config.php');

/* If access tokens are not available redirect to connect page. */
if (empty($_SESSION['access_token']) || empty($_SESSION['access_token']['oauth_token']) || empty($_SESSION['access_token']['oauth_token_secret'])) {
    header('Location: ./clearsessions.php');
}
/* Get user access tokens out of the session. */
$access_token = $_SESSION['access_token'];

/* Create a TwitterOauth object with consumer/user tokens. */
$connection = new TwitterOAuth(CONSUMER_KEY, CONSUMER_SECRET, $access_token['oauth_token'], $access_token['oauth_token_secret']);

/* If method is set change API call made. Test is called by default. */
$content = $connection->get('account/verify_credentials');

$url = $_GET["url"];
$contents = $connection->get($url);
header ("Content-Type:text/json");
echo $contents; 
```

我使用 XMLHttpRequest 从我的 JavaScript 调用这个 PHP 脚本。我已经验证我使用的是正确的 URL（例如[https://api.twitter.com/1.1/search/tweets.json?q=kate](https://api.twitter.com/1.1/search/tweets.json?q=kate)）。结果我得到的错误是：

可捕获的致命错误：类 stdClass 的对象无法在第 26 行的 OAuth/Twitter/loadJSON.php 中转换为字符串。

第 26 行是：

```
echo $contents; 
```

我查看了源代码中的 get() 函数，看起来我应该期待返回一个 JSON 字符串，但从错误消息来看，情况并非如此，或者它可能无法对响应进行 json_decode ?

这是我第一次使用 twitteroauth；任何帮助将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T08:09:11.270

> 看起来我应该期待返回一个 JSON 字符串，但从错误消息看来情况并非如此，或者它可能无法对响应进行 json_decode？

恰恰相反。

由于一些被时间遗忘的愚蠢原因，设计者[`json_decode`](http://php.net/json_decode)决定它应该返回一组嵌套的[stdClass](http://php.net/reserved.classes) es。[如果没有魔术方法](http://php.net/language.oop5.magic)，您就不能直接使用`echo`任何类。`__toString`

如果您尝试*检查*数据，您会想要开发一个更好的工具，例如[`var_dump`](http://php.net/var_dump)，它可以检查任何 PHP 数据类型。

您可能会发现 stdClasses 处理起来有点烦人和脱节。`true`作为第二个参数传递给`json_decode`，它将返回一组嵌套数组。

在这种特定情况下，您似乎希望传递 JSON 字符串。虽然这似乎无法通过您正在使用的库立即实现，但在旅途中发送数据`json_encode`应该可以解决问题。

# vba - VBA Excel 自动填充事件

> ID：13812068
> 
> 赞同：1
> 
> 时间：2012-12-11T01:10:52.927
> 
> 标签：vba, excel

我需要能够在用户尝试自动填充列时执行一些代码，或者能够在 Worksheet_Change 执行期间检测到它是自动填充。我有一些代码可以更改自动填充单元格的值。问题是每次我一次编辑多个单元格时都会触发此代码。

```
Private Sub Worksheet_Change(ByVal Target As range)
    If Target.Rows.count > 1 Then 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T05:41:38.377

AFAIK 和我可能是错的，但没有简单的方法可以捕获自动填充事件。

这`Target.Rows.count`是检查它是否是自动填充的一种不可靠的方法，因为`Target.Rows.count`在许多情况下它会大于 1。例如

1.  用户粘贴在多个单元格中
2.  用户删除了多个单元格
3.  用户按下`CTRL`+ `Z`( *Undo* ) 更改了多个单元格等...

如果您真的想捕获自动填充，那么您必须处理所有上述情况并消除缩小范围以确定它确实是自动填充事件的可能性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T01:26:04.803

```
Private Sub Worksheet_Change(ByVal Target As Range)
    If Target.Count > 1 Or Target.Column <> 1 Then Exit Sub
    MsgBox Target.Address ' your code goes here
End Sub 
```

因此，如果更改了多个单元格，则代码将不会激活，或者如果它没有发生在 A 列中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-02T12:24:39.960

在更改事件期间您有 2 个区域，并且在大多数情况下，所选区域的大小与正在更改的区域的大小相匹配。在 DragFill 操作期间，选择区域完全包含正在更改的区域，但也包含作为拖动填充源的区域。源还填充选定区域的一个边缘。

```
 Application.SheetChange += Sheet_Change;

    private void Sheet_Change(object Sh, Range Target)
    {
        //See if the size of the target matches the size of the current selection.
        //Selection size must be greater that one cell
        //Changed cells must be in the same dimension as the unchanged cells. e.g. unchanged area must fill one edge of the rectangle

        var selection = (Application.Selection as Range);

        Rect selectionArea = new Rect(selection.Column, selection.Row, selection.Columns.Count, selection.Rows.Count);
        Rect changedArea = new Rect(Target.Column, Target.Row, Target.Columns.Count, Target.Rows.Count);

        var isDragFill = false;
        if (selectionArea.Contains(changedArea)
            && (selectionArea.Width > 1 || selectionArea.Height > 1)
            && (selectionArea.Width == changedArea.Width || selectionArea.Height == changedArea.Height)
            && selectionArea != changedArea)
            isDragFill = true;

        if (!blockNextChange)
        {
            if (isDragFill)
            {
                //Re-entrancy check in the case the value changes in this block
                blockChanges = true;
                bool isHorizontal = selectionArea.Height == changedArea.Height;
                {                       
                    if (isHorizontal)
                    {
                        DragFillHorizontal(Target, selection, selectionArea, changedArea);
                    }
                    else
                    {
                        DragFillVertical(Target, selection, selectionArea, changedArea);
                    }
                }
                blockChanges = false;
            }
        }
    } 
```

# ruby-on-rails-3 - Rails：从表中的三列更改为一列

> ID：13812070
> 
> 赞同：0
> 
> 时间：2012-12-11T01:11:00.330
> 
> 标签：ruby-on-rails-3

我正在将一个`Documents`表从使用三列（`article1`、、`article2`和`article3`）修改为一列（），`articles`其中存储了一串以逗号分隔的 ID（即，`23,4,33,2`）。这一切都运作良好，但我正在尝试调整读取三列的功能以读取一列，而我却陷入了困境。

在我的模型中：

```
scope :all_articles, lambda {|p| where(:page => p) } 
```

在控制器中我有这个：

```
@articles = (1..3).to_a.map { |i| Article.all_articles(i).reverse } 
```

在视图中：

```
<% @articles.each_with_index do |a, i| %>
  <%= a[i].name %>
<% end %> 
```

在这一点上，它只是有点超出我的范围。

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T01:42:45.710

像您所做的那样将 ID 存储在列中通常不是一个好习惯。最好将这种关系分解为 Has 和 Belongs to Many 关系。你在你的模型中设置它是这样的：

```
class Document < ActiveRecord::Base
  #...
  has_and_belongs_to_many :articles
  #...
end

class Article < ActiveRecord::Base
  #... 
  has_and_belongs_to_many :documents
end 
```

然后您将创建一个连接表，ActiveRecord 将使用它来存储关系。

```
create_table :articles_documents, :id => false do |t|
  t.integer :article_id
  t.integer :document_id
end

add_index :articles_documents, [:article_id, :document_id], unique: true 
```

这将使您能够比目前更有效地进行查询。例如，查找具有某个文章 ID 的所有文档。你会这样做：

```
@documents = Document.joins(:articles).where("articles.id = ?", some_article_id) 
```

或者，如果您想查询文档并返回带有它的文章：

```
@documents = Document.includes(:articles).where(some_conditions) 
```

# amazon-web-services - 只有在“价格合适”时才可以启动和运行 AWS Spot 实例，如果不是，则在标准实例上运行？

> ID：13812073
> 
> 赞同：2
> 
> 时间：2012-12-11T01:11:20.370
> 
> 标签：amazon-web-services, amazon-ec2

我们有一个在单个小实例上运行的 Web 应用程序。大多数时候这很好。但是，有时我们的应用程序会执行密集查询并使用比小型实例处理能力更多的 CPU。

我想知道的是；有没有办法在现货价格低的情况下启动并运行 SPOT 实例（C1 高 CPU 中）？即，除非现货价格上涨，否则它始终作为“主服务器”运行；然后只是（无缝地）恢复到我们保留的小实例——在极少数情况下现货价格上涨？

基本上 - 一种以便宜的方式获得高 cpu 实例的方法......而且我们的小实例无论如何“大部分时间”就足够了，所以它的故障保护是可以的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T13:46:07.870

您应该看看[AWS Spot Labs](http://aws.amazon.com/ec2/spot-labs/)。您可以访问一些高级功能，这些功能将使您能够

> 探索优化 Amazon EC2 成本的新方法...

[同时，您可以在自动扩展](http://aws.amazon.com/autoscaling/)组中使用您的预留实例或按需实例。然后，当您的 Spot 服务器运行时，负载应该是最小的，并且您将拥有最少数量的按需实例。一旦 Spot 实例关闭，您将开始扩展按需（或预留）实例以弥补主机的不足。

实际上，您甚至可以将您的 Spot 实例放在不同的（较低阈值）Auto Scaling 组中，并在可用时启动几个更便宜的 Spot 实例。查看更多详细信息： http: [//docs.amazonwebservices.com/AutoScaling/latest/DeveloperGuide/US-SpotInstances.html](http://docs.amazonwebservices.com/AutoScaling/latest/DeveloperGuide/US-SpotInstances.html)

# android - Android ListView 创建视图但不显示它们

> ID：13812075
> 
> 赞同：1
> 
> 时间：2012-12-11T01:11:39.473
> 
> 标签：android, android-listview, android-arrayadapter

我在 android 上遇到 ListView 问题。我有一个带有 EditText 视图和一个按钮的 Activity。这个想法是用户应该在 EditText 字段中输入一些信息，触摸 Search 按钮，该按钮从 Web 服务中检索列表，该列表显示在 EditText 和 Button 下方的同一活动中。一切都很好，我从互联网上获得了数据，但没有显示项目。我正在使用 notifyDataSetChanged()。几个小时后没有成功，我决定尝试手动放置一些项目，结果又没有显示任何内容，因此我认为我在尝试设置列表视图和适配器时做错了。所以这里是代码..

活动 activity_search.xml 的 xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:orientation="vertical"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:orientation="horizontal"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:layout_margin="5dp">

    <EditText
        android:id="@+id/edit_search"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="5"
        android:inputType="text"
        android:hint="Enter info"
        android:ems="10" >
        <requestFocus />
    </EditText>

    <Button 
        android:id="@+id/button_search"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:background="@android:drawable/ic_menu_search"
        android:contentDescription="Search"
        android:ems="10" />
</LinearLayout>

<ListView
    android:id="@+id/listview_items" 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:drawSelectorOnTop="false" /> 
```

项目 row.xml 的 XML

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content" 
android:orientation="vertical"
android:layout_margin="5dp">

<TextView
    android:id="@+id/row_code"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/Common_TextContent" 
    android:textAppearance="@android:style/TextAppearance.Holo.Medium" />

<TextView
    android:id="@+id/row_name"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="10dp"
    android:text="@string/Common_TextContent"
    android:textAppearance="@android:style/TextAppearance.Holo.Small" /></LinearLayout> 
```

自定义适配器：

```
public class ItemsListAdapter extends ArrayAdapter<ItemsList> {

private int[] colors = new int[] { 0x30ffffff, 0x30808080 };

public AssetListAdapter(Context context,
        List<ItemsList> itemsList) {
    super(context, 0, itemsList);

}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    if (convertView == null) {
        convertView = LayoutInflater.from(getContext()).inflate(R.layout.row, null);
    }

    convertView.setBackgroundColor(colors[position % colors.length]);

    TextView code = (TextView) convertView.findViewById(R.id.row_code);
    code.setText(getItem(position).getCode());

    TextView name = (TextView) convertView.findViewById(R.id.row_name);
    name.setText(getItem(position).getName());

    return convertView;
} 
```

以及 Activity 上的 onCreate 方法

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_search);

    _listView = (ListView) findViewById(R.id.listview_items);
    _listItems = new ArrayList<ItemsList>();

    _listItems.add(new ItemsList ("cosa1", "cosa1", "cosa1", "cosa1"));
    _listItems.add(new ItemsList ("cosa2", "cosa2", "cosa2", "cosa2"));
    _listItems.add(new ItemsList ("cosa3", "cosa3", "cosa3", "cosa3"));

    _adapter =  new ItemsListAdapter(this, _listItems);
    _listView.setAdapter(_adapter);

} 
```

ItemsList 只是一个包含 4 个字符串的对象，所有的 getter 都实现了。当我在 Adapter 的 getView 方法中调试时，会创建视图 (convertView) 并且它具有正确的信息。只是没有在屏幕上显示那些。我究竟做错了什么？

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T01:15:24.190

您的第二`LinearLayout`个高度为`match_parent`. 试试`wrap_content`吧。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:orientation="vertical"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:orientation="horizontal"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" 
    android:layout_margin="5dp"> 
```

# java - 如何在不更改函数参数值的函数中创建引用？

> ID：13812077
> 
> 赞同：0
> 
> 时间：2012-12-11T01:12:11.580
> 
> 标签：java

我是java新手。这个问题可能不是那么清楚。让我用代码解释一下。下面的代码是一个打印出链表中值的函数。函数的第一行创建一个引用，指向 HeadNode 引用所指向的同一个对象。因此，对 currentNode 的任何更改都会影响 HeadNode 指向的对象。现在，在 while 循环中，我正在更改 currentNode，但我观察到在退出函数后linkedList 没有更改。为什么？

```
static void PrintLinkedList(ListNode HeadNode)
    {
        ListNode currentNode = HeadNode;
        while(currentNode != null)
        {
            System.out.println(currentNode.getData());
            currentNode = currentNode.getNext();
        }
    } 
```

**更新：**

我提出这个问题的原因是，当我实现一个反转链表的函数时，我的 tempNode 在执行以下代码后变为空：

```
static ListNode ReverseLinkedList(ListNode headNode)
    {
        ListNode headNodeTemp = headNode;
        headNodeTemp.setNext(null);
        ListNode tempNode = headNode.getNext(); //temp becomes null because headNode is changed. Why??
        ListNode currentNode = headNodeTemp;
        while(tempNode != null)
        {... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T01:16:25.550

> 因此，对 currentNode 的任何更改都会影响 HeadNode 指向的对象。

不，`currentNode`是对对象的引用`HeadNode`也指。你永远不会改变那个对象，你改变的只是`currentNode`所指的。

```
currentNode = currentNode.getNext(); 
```

指向下一个对象，它`currentNode`不会更改任何对象。

要更改对象，您需要调用方法或设置属性，

```
currentNode.mutate();
currentNode.property = 17; 
```

将更改指向的对象，并且当通过 查询对象时这些更改将是可见的`HeadNode`。

```
currentNode = currentNode.getNext(); 
```

只是`currentNode`指向另一个对象。

在

```
static ListNode ReverseLinkedList(ListNode headNode)
{
    ListNode headNodeTemp = headNode;
    headNodeTemp.setNext(null); 
```

在这里，我们调用一个改变指向对象的方法。按照名称，它将`next`字段设置为`null`. 而对象所`headNodeTemp`指向的就是对象所`headNode`指向的。

```
 ListNode tempNode = headNode.getNext(); //temp becomes null because headNode is changed. Why??
    ListNode currentNode = headNodeTemp;
    while(tempNode != null)
    {... 
```

你应该移动

```
ListNode tempNode = headNode.getNext(); 
```

线上方的`setNext(null)`线。

```
static ListNode ReverseLinkedList(ListNode headNode)
{
    ListNode headNodeTemp = headNode;
    ListNode tempNode = headNode.getNext();
    headNodeTemp.setNext(null);
    ListNode currentNode = headNodeTemp;
    while(tempNode != null)
    {... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T01:16:33.570

您混淆了对象和引用。

`currentNode = x`不改变`currentNode`指向的对象。相反，它将`currentNode` *变量*更改为指向不同的对象。

这不会影响碰巧指向旧对象的任何其他字段或变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T01:37:13.287

与其他职位一致。Java 中的所有参数都是按值传递的 - 演示：

```
public static void main(String[] args) {

    List a = new ArrayList();
    a.add("Fred");

    changeA(a);
    // contents of a is "Fred" not "Barney" (change to 'a' not reflected back here)
    // because all arguments are Pass-By-Value

    addToA(a);
    // contents of a is "Fred" AND "Barney"

    int b = 10;    

    changeB(b);
    // b = 10 (not 20)
}

static void changeA(List a) {
    a = new ArrayList(); // a is now a different object
    a.add("Barney");
}

static void addToA(List a) {
    a.add("Barney");
}

static void changeB(int b) {
    b = 20;
} 
```

# c++ - 结构中的引用向量？

> ID：13812078
> 
> 赞同：0
> 
> 时间：2012-12-11T01:12:18.563
> 
> 标签：c++, vector, struct

我想创建一个包含双精度和字符串向量的结构。我试过这个

```
int main ()
{   
  struct List
  {
      double price;
      vector<string> items;
  };

  List list;

  ifstream infile ("Aap.txt");

  double p;
  infile>>p;
  list.price=p;
  cout<<list.price<<endl;

  int i=0;
  string name;
  getline(infile,name);

  while(infile)
  {
      list.items.push_back(name);
      cout<<list.items[i]<<endl;
      i++;
      getline(infile,name);
  }
  infile.close();

  if (!infile)
  {
      cout<<"File closed."<<endl;
  }

return 0; 
```

这没有填充我的向量，因为它不是我想的结构中的引用？

但是当我将结构中的向量定义为：

```
vector<string>& items; 
```

我收到一条错误消息：

错误：具有未初始化引用成员的结构“列表”。

我怎样才能解决这个问题？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T01:18:31.677

您的代码运行良好。

第一次读取有一个小问题：如果您的输入文件中在价格值之后有一个换行符，则该换行符将保持未读状态。在这种情况下，第一次调用`getline`将读取一个空字符串，这意味着`items`数组中的第一个名称最终将为空。

# r - 在R中的日期格式之间转换？

> ID：13812081
> 
> 赞同：4
> 
> 时间：2012-12-11T01:12:35.840
> 
> 标签：r, datetime

我在 R 中有一个 data.frame （最初是 CSV），日期采用以下 3 种格式：

```
2011-06-02T17:16:05Z

2012-06-02T17:16:05-07:00

6/2/11 17:16:05 
```

这是年-月-日-时间。我不太清楚 -07:00 是什么，因为它似乎对于所有时间戳都是相同的（除了一些它是 -08:00 的地方），但我想这是某种类型的时区偏移。

我不太确定这些是什么格式（有人知道吗？），但我需要将其转换为这种格式：

```
6/2/11 17:16:05 
```

这是年月日时间

我想这样做，以便将 CSV 中的所有日期（在同一行中）转换为第二种格式。我怎样才能在 R 中做到这一点？

完整的数据集可以在[这里](https://github.com/aronlindberg/VOSS-Sequencing-Toolkit/blob/master/rubinius_rubinius_sequencing/input.csv)找到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T01:43:19.987

这是另一种尝试，假设您的数据是以文本开头：

```
test <- c("2011-06-02T17:16:05Z","2012-06-02T17:16:05-07:00")
format(as.POSIXct(test,format="%Y-%m-%dT17:%H:%M"),"%m/%d/%y %H:%M")

[1] "06/02/11 16:05" "06/02/12 16:05" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T01:19:19.297

您可以尝试以下方法，`myDates`日期列在哪里

```
format(strptime(myDates, format="%Y-%m-%dT17:%H:%M"), format= "%m/%d/%Y %H:%M")
[1] "06/02/2011 16:05" "06/02/2012 16:05"

or with 2-digit year

# Note the lower-case %y at the end
format(strptime(myDates, format="%Y-%m-%dT17:%H:%M"), format= "%m/%d/%y %H:%M")
[1] "06/02/11 16:05" "06/02/12 16:05" 
```

至于`Z`，表示格林威治标准时间（想想：伦敦）。
表示`-7:00`从格林威治标准时间回来 7 小时（想想：科罗拉多 / MST 等）

请参阅[此处](http://wwp.greenwichmeantime.com/info/zulu.htm)以获取更多参考

# android - Android CalendarView 减慢布局

> ID：13812084
> 
> 赞同：17
> 
> 时间：2012-12-11T01:13:22.867
> 
> 标签：android, performance, android-layout, android-xml, calendarview

这真让我抓狂。我的 Android 应用程序中有一个片段，它使用相对布局进行布局。问题是由于某种原因渲染需要很长时间，大约 5 秒才能在屏幕上加载大约 4 个元素。

其中一个元素是 CalendarView，当我删除它时，它会恢复到适当的速度（即：即时）。我想这个问题与我要求 Android 布置它的方式有关，一定没有多大意义或效率低下或其他什么。

这是 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:padding="20dp">

<TextView
     android:id="@+id/title"
     android:layout_width="0dp"
     android:layout_height="wrap_content"
     android:textStyle="bold"
     android:text="TODAY"
     android:textAppearance="?android:attr/textAppearanceLarge" 

     android:layout_alignParentLeft="true"
     android:layout_alignParentTop="true"
     android:layout_toLeftOf="@+id/time" />

<TextView
     android:id="@id/time"
     android:gravity="right"
     android:textStyle="bold"
     android:layout_width="100dp"
     android:layout_height="wrap_content"
     android:text="11:32"
     android:textAppearance="?android:attr/textAppearanceLarge"

     android:layout_alignParentRight="true" />

<TextView
    android:id="@+id/date_info"
    android:layout_margin="20dp"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Wednesday, 15th August 2012"
    android:textAppearance="?android:attr/textAppearanceMedium"

    android:layout_below="@id/title"
    android:layout_alignParentLeft="true" />

<CalendarView        
    android:id="@+id/calendar_view"
    android:layout_width="250dp"
    android:layout_height="250dp"
    android:background="@drawable/white_back_black_border"

    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true" />
</RelativeLayout> 
```

我已经尝试了许多不同的布局选项，但删除日历似乎是唯一有所作为的事情。

任何见解将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-22T11:35:09.970

我也遇到过这个问题，无论是相对布局还是线性布局。它似乎与布局无关。

这是一个查看错误的示例，只是一个简单的布局，根本没有代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".FechaHoraActivity" >

    <TimePicker
        android:id="@+id/timePicker1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="20dp" />

    <CalendarView
        android:id="@+id/calendarView1"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</LinearLayout> 
```

现在只需将线性布局高度更改为：

```
android:layout_height="match_parent" 
```

有了这个改变，问题就消失了，至少在我的三星 Galaxy Tab 2 中

所以它似乎与“空间”更相关，但我仍然不确定为什么会出现这个问题。而且我在谷歌搜索“日历视图慢”时没有找到任何其他有趣的结果......

**编辑** *让我们看看我们是否可以通过小额赏金找到答案*

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-05T15:04:06.327

我花了几个小时才找到答案，但不知道为什么。这里有一些奇怪的东西，它可以帮助你找到答案。

> CalendarView慢时的cpu消耗 ![在此处输入图像描述](../Images/1f19ea5a07f317f3da60c2a0b719d863.png)

WeekAdapter 中的 getView 有一个从未使用过的参数父级。

```
 public View getView(int position, View convertView, ViewGroup parent) {
       WeekView weekView = null;
        if (convertView != null) {
            weekView = (WeekView) convertView;
        } else {
            weekView = new WeekView(mContext);
            android.widget.AbsListView.LayoutParams params =
                new android.widget.AbsListView.LayoutParams(LayoutParams.WRAP_CONTENT,
                        LayoutParams.WRAP_CONTENT);
            weekView.setLayoutParams(params);
            weekView.setClickable(true);
            weekView.setOnTouchListener(this);
        }

        int selectedWeekDay = (mSelectedWeek == position) ? mSelectedDate.get(
                Calendar.DAY_OF_WEEK) : -1;
        weekView.init(position, selectedWeekDay, mFocusedMonth);

        return weekView;
    } 
```

期待答案。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-05T13:48:08.627

发现 CalendarView 小部件需要将高度设置为`match_parent`，然后您可以将其放入任何布局。例如相对高度为 200。这适用于 4.0.3 模拟器和带有 4.2.2 的三星 Galaxy Tab。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="200dp"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true" >

        <CalendarView
            android:id="@+id/cv_dialog_filter_date"
            android:layout_width="match_parent"
            android:layout_height="match_parent" />
    </RelativeLayout>

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/relativeLayout2"
        android:layout_centerHorizontal="true"
        android:text="05.12.2013" />

</RelativeLayout> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-08-05T15:47:53.313

看起来直接在 RelativeLayout 中的 CalendarView 确实不能很好地工作。以下使用 FrameLayout 技巧的解决方案在模拟器中加载速度更快：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:padding="20dp" >

    <TextView
        android:id="@+id/title"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_toLeftOf="@+id/time"
        android:text="TODAY"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textStyle="bold" />

    <TextView
        android:id="@id/time"
        android:layout_width="100dp"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:gravity="right"
        android:text="11:32"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/date_info"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@id/title"
        android:layout_margin="20dp"
        android:text="Wednesday, 15th August 2012"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <FrameLayout
        android:layout_width="250dp"
        android:layout_height="250dp"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true" >

        <CalendarView
            android:id="@+id/calendar_view"
            android:layout_width="250dp"
            android:layout_height="250dp"
            android:background="@drawable/white_back_black_border" />
    </FrameLayout>
</RelativeLayout> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-04-12T21:37:30.923

将 CalendarView 放入 FrameLayout 将解决问题.. 这是一个 XML 代码示例：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#cc00b1cc">

    <FrameLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentTop="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentStart="true"
        android:layout_marginTop="102dp"
        android:layout_alignParentBottom="true">

        <CalendarView
            android:layout_width="425dp"
            android:layout_height="374dp"
            android:id="@+id/calendarView"
            android:layout_gravity="left|top" />
    </FrameLayout>
</RelativeLayout> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-20T11:31:24.967

上面的答案是正确的，但仍然没有解开一个谜。

也就是说，当我想在布局中包含日历视图和其他布局时。它只是消失了，或者我只能看到周信。我尝试了上面的匹配父母和一切，但我仍然无法解决它。

如果有人像我一样挣扎这是答案。

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:clickable="true"
android:descendantFocusability="blocksDescendants"
android:orientation="vertical">

<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <CalendarView
        android:id="@+id/calendarService"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_above="@+id/linearLayout"></CalendarView>

    <LinearLayout
        android:id="@+id/linearLayout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:orientation="vertical"> 

     ///Your views 

     /> 
```

# sql-server - 如何创建将产品列表或数据表作为参数的存储过程，然后插入到表中？

> ID：13812085
> 
> 赞同：2
> 
> 时间：2012-12-11T01:13:31.650
> 
> 标签：sql-server, stored-procedures

我对 SQL Server 相当陌生，任何输入和建议都会有很大帮助。

我有 3 个处于一对多关系的表。

表`Person`保存客户信息

```
CREATE TABLE [dbo].[Person](
[PID] [int] IDENTITY(1,1) NOT NULL,
[FirstName] [varchar](255) NULL,
[LastName] [varchar](255) NULL,
[CAddress] [varchar](255) NULL,
[Ccity] [varchar](255) NULL,
[Cstate] [varchar](2) NULL,
[Czipcode] [varchar](20) NULL,
[Ccountry] [varchar](255) NULL,
[Cphone] [varchar](25) NULL,
[Cemail] [varchar](255) NULL,
[CipAddress] [varchar](255) NULL) 
```

表`Transaction`持有他们的交易

```
CREATE TABLE [dbo].[Transaction](
[TID] [int] IDENTITY(1,1) NOT NULL,
[PID] [int] NOT NULL,
[DateOfTransaction] [date] NULL) 
```

使用第三个表`TransactionDetail`，其中包含交易详细信息

```
CREATE TABLE [dbo].[TransactionDetail](
    [TDID] [int] IDENTITY(1,1) NOT NULL,
    [TID] [int] NULL,
    [ProductID] [int] NULL,
    [ProductName] [varchar](255) NULL,
    [ProductQTY] [int] NULL,
    [ProductPrice] [decimal](18, 2) NULL) 
```

我想创建一个存储过程，在表中插入一次，`Person`然后在第三个表中插入多个详细信息。

这就是我得到的我不确定这是否正确？

```
CREATE TYPE dbo.TransactionTableType AS TABLE
    ( TID int, ProductID int, ProductName varchar(255), ProductQTY int, ProductPrice decimal(18,2) )
    go
CREATE PROCEDURE insertTransacion
@NewProduct dbo.TransactionTableType READONLY,
@FirstName varchar(255),
@LastName varchar(255),
@CAddress varchar(255),
@Ccity varchar(255),
@Cstate varchar(2),
@Czipcode varchar(20),
@Ccountry varchar(255),
@CPhone varchar(25),
@Cemail varchar(255),
@CipAddress varchar(255),
@DateOfTrans date
as
begin
SET NOCOUNT ON; 
DECLARE @Pid int
insert into Person(FirstName,LastName,CAddress,Ccity,Cstate,Czipcode,Ccountry,Cphone,Cemail,CipAddress) values (@FirstName,@LastName,@CAddress,@Ccity,@Cstate,@Czipcode,@Ccountry,@CPhone,@Cemail,@CipAddress)
SET @Pid = SCOPE_IDENTITY() 
insert into PTransactions(PID, DateOfTransaction) values (@Pid, @DateOfTrans)
DECLARE @Tid int
SET @Tid = SCOPE_IDENTITY()
insert into TransactionDetail(TID, ProductID, ProductName, ProductQTY, ProductPrice) Select @Tid, ntd.ProductID, ntd.ProductName, ntd.ProductQTY, ntd.ProductPrice from @NewProduct as ntd
end 
```

不知道如何在存储过程中执行此操作我知道如何在 asp.net 中使用 ado 以编程方式执行此操作，但是我试图避免这种情况。对不起语法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:22:33.617

简短的回答是你不能，尽管你有几个选择。

您可以创建一个 SP 来输入人员数据，并创建一个单独的 SP 来插入数据 - 一次一行。在第一次调用时返回人员 id 值，并在随后的 SP 调用中使用该值来插入数据。如果您沿着这条路走，请确保将调用代码包装在事务对象中，以便在遇到问题时可以回滚整个代码。您没有说明其余代码使用的是什么语言？

第二个选项是查看 SQL Bulk Insert 命令 - 如果您有**大量**数据要添加到第三个表中，这是最好的选择。但是涉及首先将该数据写入文件 - 轻微的痛苦，但它非常快。如果您要添加数千行或更多行，那就太好了。

根据您的开发语言，还有其他几个选项。

干杯西蒙

# tomcat - 有没有在 JBoss AS7 中使用 WebSockets 的例子？

> ID：13812087
> 
> 赞同：-1
> 
> 时间：2012-12-11T01:13:38.307
> 
> 标签：tomcat, jboss, websocket, jetty, jboss7.x

有没有一个例子利用这个 websocket 实现 JBoss Application Server > 7.1.2 [https://github.com/mikebrock/jboss-websockets](https://github.com/mikebrock/jboss-websockets)

我无法让它与那里的简短描述一起工作。

我已经设置了 WebSocketServlet 并将其绑定到一个地址，然后当我尝试通过 ws:// 从浏览器（最新的稳定 Chrome）连接到 Servlet 时，它会失败（不允许 405 访问）并通过 wss： // 什么都没有发生，它保持在连接状态并且不会在客户端或服务器端抛出任何错误。

如果有另一种方法来实现 websocket servlet，我会更高兴。我还看到您可以使用此处描述的 Jetty 运行它：http:
[//golovnin.blogspot.de/2012/04/jboss-7-and-websockets.html](http://golovnin.blogspot.de/2012/04/jboss-7-and-websockets.html)，
但我宁愿以另一种方式进行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T15:04:03.307

我在这里制作了一个演示应用程序：[https ://github.com/eis/jboss-websocket-demo](https://github.com/eis/jboss-websocket-demo)

这是一个简单的聊天。

它只使用 JBoss 的东西，而不是 Jetty 或其他解决方法。就像自述文件所说，您需要启用本机 jbossweb。

# java - 传播和处理有什么区别？

> ID：13812088
> 
> 赞同：2
> 
> 时间：2012-12-11T01:13:42.293
> 
> 标签：java, exception

我正在为这个星期五的 CS 考试而学习，并且在这里遇到了一个障碍。该问题要求我处理异常，然后使用两种不同的方法传播异常，但我的印象是它们是同一回事。任何人都可以帮忙吗？下面列出了练习题。

您将获得以下课程：

```
public class ReadData {
   public void getInput() {
     getString();
     getInt();
   }

   public void getString() throws StringInputException {
     throw new StringInputException();
   }

   public void getInt() throws IntInputException {
     throw new IntInputException();
   }
}

class StringInputException extends Exception {}

class IntInputException extends Exception {} 
```

上面的代码将导致 getInput() 方法中的编译错误。使用两种不同的技术重写 getInput() 方法：

```
Method 1 - Handle the exception 

Method 2 - Propagate the exception 
```

以便代码编译。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T01:17:59.750

它们不是同一件事。传播基本上意味着重新抛出异常，也就是说，允许代码中更远的地方处理它；通常，如果对当前级别的异常无能为力，则可以这样做。处理异常意味着捕获它并实际做一些事情——通知用户、重试、记录——但不允许异常进一步发展。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T01:20:06.013

```
class Example {
    // a method that throws an exception
    private void doSomething() throws Exception {
        throw new Exception();
    }

    public void testHandling() {
        try {
            doSomething();
        } catch (Exception e) {
            // you caught the exception and you're handling it:
            System.out.println("A problem occurred."); // <- handling
            // if you wouldn't want to handle it, you would throw it again
        }
    }

    public void testPropagation1() throws Exception /* <- propagation */ {
        doSomething();
        // you're not catching the exception, you're ignoring it and giving it
        // further down the chain to someone else who can handle it
    }

    public void testPropagation2() throws Exception /* <- propagation */ {
        try {
            doSomething();
        } catch (Exception e) {
            throw e; // <- propagation
            // you are catching the exception, but you're not handling it,
            // you're giving it further down the chain to someone else who can
            // handle it
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T01:18:12.760

“处理异常”意味着捕获它并做任何必要的事情以正常继续。

“传播异常”意味着不捕获它并让您的调用者处理它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T01:18:32.260

dictionary.com 是你的朋友。有时我们不得不处理那种讨厌的英语。

处理意味着对异常做一些事情，中止程序，打印错误，乱七八糟的数据......

传播它意味着将它转发到其他地方，即重新扔掉它。

# java - 2d ArrayList 放置

> ID：13812092
> 
> 赞同：5
> 
> 时间：2012-12-11T01:14:04.740
> 
> 标签：java, arraylist

我想在以下代码中使用 ArrayList 而不是数组：

```
for(int k=0;k<SIZE;k++) //size is 9
    for(int j=0;j<SIZE;j++)
        ar1[k][j] = buttons[k][j].getText(); 
```

我猜这就是 ArrayList 的样子：

```
ArrayList<ArrayList<String>>ar1 = new ArrayList<ArrayList<String>>(); 
```

但这太令人困惑了，因为我不能使用 get 方法。我不知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T01:15:34.580

试试这个：`ar1.get(k).get(j)`

第一个`get()`在 index 处获取 ArrayList `k`；第二个`get()`得到你想要的字符串。

如果要将字符串设置为`[k, j]`，可以使用`ar1.get(k).set(j, str)`。当然，`ar1.get(k)`不能为空。您必须`ar1.add(new ArrayList<String>());`在第一次使用该索引处的 ArrayList 时添加或设置 ArrayList。

`ar1.get(k).add(str)`同样，如果 ArrayList 的元素太少，您可以使用将 str 添加到索引 k 处的 ArrayList 末尾。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T01:33:38.393

试试这个方法

```
List<List<String>>ar1 = new ArrayList<>();
//lets say we want to have array [2, 4]
//we will initialize it with nulls
for (int i=0; i<2; i++){
    ar1.add(new ArrayList<String>());
    for(int j=0; j<4; j++)
        ar1.get(i).add(null);
}
System.out.println("empty array="+ar1);

//lets edit contend of that collection
ar1.get(0).set(1, "position (0 , 1)");
ar1.get(1).set(3, "position (1 , 3)");
System.out.println("edited array="+ar1);

//to get element [0, 1] we can use: ar1.get(0).get(1)
System.out.println("element at [0,1]="+ar1.get(0).get(1)); 
```

输出：

```
empty array=[[null, null, null, null], [null, null, null, null]]
edited array=[[null, position (0 , 1), null, null], [null, null, null, position (1 , 3)]]
element at [0,1]=position (0 , 1) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T01:41:43.373

`List`声明时使用类型总是一个好习惯`ArrayList`。所以而不是

```
ArrayList<ArrayList<String>>ar1 = new ArrayList<ArrayList<String>>(); 
```

利用

```
List<List<String>>ar1 = new ArrayList<List<String>>(); 
```

您可以通过 .add(element) 方法轻松地在数组列表中添加元素。阅读有用的[javadoc](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/List.html)以获取列表方法的完整列表。起初它当然是空的。要开始填充它，您需要创建一个 1d 数组列表

```
List<String> a = new ArrayList<String>()
a.add("element"); 
```

然后在你的二维数组列表中添加一维数组列表

```
ar1.add(a); 
```

要在二维列表中插入元素，您必须访问要插入的一维数组列表的位置，然后执行`.add(String)`.

```
ar1.get(0).add("newly added element"); //will get the first list then append the string to that list 
```

与获取二维列表中的元素相同

```
ar1.get(0).get(0); //will get the first lis then get the first element of the pulled list 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T01:32:51.790

二维数组可能是一个更好的抽象，但如果您出于其他原因确实想制作一个 ArrayList 的 ArrayList，则可以这样做。请记住，在将元素添加到行之前，您需要添加行本身。

```
//Initialize the rows
ArrayList<ArrayList<String>> ar1 = new ArrayList<ArrayList<String>>
for (int i=0; i<SIZE; i++) {
    ar1.add(new ArrayList<String>());
    for (int j=0; j<SIZE; j++) {
        ar1.get(i).set(j, "");
    }
}

//Now setting a value works
ar1.get(row).set(column, value);

//As does getting one
String s = ar1.get(row).get(column); 
```

# iphone - “viewWillAppear”不能用 iPhone 4.3 模拟器在 xcode 4.5 中调用

> ID：13812093
> 
> 赞同：-1
> 
> 时间：2012-12-11T01:14:11.727
> 
> 标签：iphone, ios

"viewWillAppear" 不会在 xcode 4.5 和 iphone 4.3 模拟器中调用，但如果它在 iPhone 5.0 或 iPhone 6.0 模拟器中运行，则会调用此方法。

为什么？当控制器的视图出现在 ios 4.3 中时，如果我想做某事，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T03:21:07.407

根据您的评论，问题似乎是 iOS 4 中缺少容器视图控制器。从 5+ 开始，您明确意味着能够将`view`任何控制器的视图添加到任何其他*的视图中，这将生成适当`view[Will/Did]Appear`的，以及所有其他较新的消息 -`viewDidLayoutSubviews`等。

在 4 中，您没有被明确允许构建容器视图控制器，并且没有故意的、特定的向后链接将视图连接回其控制器。

结果，当您将导航控制器添加到视图时，它不会得到`viewDidAppear`. 因为它不知道它的视图已经出现，所以它不会告诉它包含的任何控制器他们的视图已经出现。

也许你能做的最好的事情就是通过（i）检查你是否在 iOS 4 下运行来解决这个问题；(ii) 如果是这样，`viewWillAppear/viewDidAppear/viewWillDisappear/viewDidDisappear`向您包含的控制者发布虚假信息。

根据个人经验，iOS 4（至少在 4.3 中）确实实现`addChildViewController:`了，但并没有像后来的文档版本那样做。因此，尽管它不是一个完全准确的功能检查，但我倾向于使用它`if([self respondsToSelector:@selector(presentingViewController)])`来确定是否需要手动传播这些消息。

[*] 你也应该打电话`addChildViewController:`确保所有消息在各个方向正确移动

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T05:06:08.020

我认为这可能与“视图控制器滥用”有关。检查您的容器视图控制器是否使用正确。详细可以参考[这篇文章](http://blog.carbonfive.com/2011/03/09/abusing-uiviewcontrollers/)。

# android - setOnItemClickListener 不工作

> ID：13812097
> 
> 赞同：1
> 
> 时间：2012-12-11T01:14:47.560
> 
> 标签：android, onclick

我无法让 onItemCickListener 工作。我所做的只是使用意图打开一个片段。如果我在这里做任何可疑的事情，请告诉我？

```
public class MyListFragment extends ListFragment {

    private ArrayList<String> myList = null;
    private ArrayAdapter<String> myAdapter;

        @Override
        public void onActivityCreated(Bundle savedInstanceState){
            Log.d("Example:", "In Fragement Calss");
            super.onActivityCreated(savedInstanceState);

            Resources myResources = getResources();
            myList = new ArrayList<String>(Arrays.asList(myResources.getStringArray(R.array.myExamArray)));
            myAdapter = new ArrayAdapter<String>(getActivity(),android.R.layout.simple_list_item_1,myList);
            setListAdapter(myAdapter);

            ListView lv = (ListView) getActivity().findViewById(R.id.listView);
            lv.setOnItemClickListener(new OnItemClickListener(){

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {

                Intent myIntent = new Intent(view.getContext(), DetailsFragment.class);

                startActivity(myIntent);
            }

           });

        }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-15T14:35:02.493

请注意，ListView 会阻止对包含至少一个可聚焦后代的项目的点击，但它不会使内容焦点可到达调用 setItemsCanFocus(true)。一种解决方法是禁用后代的可聚焦性，使用

```
android:descendantFocusability="blocksDescendants" 
```

在定义列表项的布局中。[（我自己首先从http://cyrilmottier.com/2011/11/23/listview-tips-tricks-4-add-several-clickable-areas/](http://cyrilmottier.com/2011/11/23/listview-tips-tricks-4-add-several-clickable-areas/)了解到这一点，但其他一些 SO 帖子也指出了这一点。）您的布局是否包含按钮？如果是这样，你就会陷入这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T01:20:11.090

我没有看到你在哪里为这个片段膨胀了一个特定的 XML……但你可能引用了错误的 ListView。

不管你应该使用现有的[`onListItemClick`](http://developer.android.com/reference/android/app/ListFragment.html#onListItemClick%28android.widget.ListView,%20android.view.View,%20int,%20long%29)方法：

```
public class MyListFragment extends ListFragment {

    private ArrayList<String> myList = null;
    private ArrayAdapter<String> myAdapter;

    @Override
    public void onActivityCreated(Bundle savedInstanceState){
        // Remove the OnItemClickListener, but keep everything else
    }

    @Override
    public void onListItemClick (ListView l, View v, int position, long id) {
        Intent myIntent = new Intent(this, DetailsFragment.class);
        startActivity(myIntent);
    }
} 
```

# c# - 避免在按钮单击时刷新页面？

> ID：13812098
> 
> 赞同：-1
> 
> 时间：2012-12-11T01:14:55.983
> 
> 标签：c#, asp.net

我有这个 .net 页面，其中有一个媒体播放器控件和一个按钮。按钮的功能是调用存储过程。当用户单击按钮时，我需要页面不重新加载和停止视频。

有没有办法做到这一点？

这是代码

看.aspx

```
<div id="video" runat="server">
    <div id="myElement">
        Loading...
    </div>
</div>
<asp:Button ID="btnWatchlist" runat="server" Text="add to watchlist" onclick="btnWatchlist_Click" /> 
```

看.aspx.cs

```
public partial class Watching : System.Web.UI.Page
{
    private int movieId = 0;

    protected void Page_Load(object sender, EventArgs e)
    {
         movieId = Int32.Parse(Request.QueryString["id"]);
         Movie movie = MovieAccess.GetMovieDetails(movieId);
         startVideo(movie);      
    }
    private void startVideo(Movie movie)
    {
        string moviePath= "data/videos/"+movie.srcPath;
        String script = "<script type='text/javascript'>jwplayer('myElement').setup({file: '" + moviePath + "',image: '43.jpg', \"width\": 800,\"height\": 450,});</script>";
        ScriptManager.RegisterStartupScript(Page, Page.GetType(), "video", script, false);
    }
    protected void btnWatchlist_Click(object sender, EventArgs e)
    {
        MovieAccess.AddWatchlistMovie(movieId, User.Identity.Name);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T01:17:45.397

您可以对服务器进行客户端调用（使用 javascript 或流行的 jQuery 库）。google 上有很多教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T01:18:01.480

把`Button`里面放一个`UpdatePanel`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T12:48:19.090

```
protected void Page_Load(object sender, EventArgs e)
    {
         if(!IsPostBack)
         {
           movieId = Int32.Parse(Request.QueryString["id"]);
           Movie movie = MovieAccess.GetMovieDetails(movieId);
           startVideo(movie);    
         }  
    } 
```

# git - 从 git 存储库中删除未引用的提交

> ID：13812103
> 
> 赞同：7
> 
> 时间：2012-12-11T01:15:11.053
> 
> 标签：git, branch, commit, git-branch, git-rebase

我有这样的 git 提交历史：

```
 U
         / 
A---B---C---D---E master 
```

没有任何东西指向 commit `U`，但我知道它的哈希值。如何从我的存储库中完全删除此提交，就好像它从未存在过一样？我是唯一使用这个 repo 的人。

我尝试使用`git rebase`，但这可以删除部分分支或移动提交，但似乎无法删除单个提交。

如果我这样做了`git checkout <hash>`，那么`git reset --hard HEAD~1`我就再也看不到提交了。它实际上是完全消失了还是仍然隐藏在 repo 中？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-03-23T04:51:51.667

[如此处](https://stackoverflow.com/a/4528593/2199657)所述，只需使用

```
git reflog expire --expire-unreachable=now --all
git gc --prune=now 
```

`git reflog expire --expire-unreachable=now --all`删除 中所有无法访问的提交的引用`reflog`。

`git gc --prune=now`删除提交本身。

**注意**：只有 using`git gc --prune=now`不起作用，因为这些提交仍然在 reflog 中引用。因此，必须清除 reflog。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T02:12:44.243

最终它将被 git 清理，但您可以查看[git`gc`](http://www.kernel.org/pub/software/scm/git/docs/git-gc.html)以实际强制进行垃圾收集。

该`clean`命令是不同的，不会为您处理这个问题。

# c++ - 将信息读入结构数组c ++

> ID：13812113
> 
> 赞同：3
> 
> 时间：2012-12-11T01:16:21.863
> 
> 标签：c++, arrays, file, dynamic, struct

我正在为我的 c++ 类制作一个程序。最终，我希望我的程序对以下格式的联系人文本文件执行快速排序：

名字 名字 号码

每个联系人由一个新行分隔。我首先计算行数并使用动态内存分配来创建一个与行数具有相同大小的结构数组。

但是，当我尝试从文本文件中读取信息并将其输出到屏幕时，我得到的只是乱码。我在互联网上四处寻找解决方案，但我发现的所有内容似乎都使用了不同的语法。

到目前为止，这是我的代码：

```
#include <iostream>
#include <fstream>
#include <istream>

char in[20];
char out[20];

using namespace std;

struct contact
{
    char firstName[14];
    char surName[14];
    char number[9];
};
//structure definition

int main(void){

    cout << "Please enter the input filename: " << endl;
    cin >> in;
    ifstream input(in);

    if(!input){
        cerr << "failed to open input file " << in << endl;
        exit(1);
    }

    cout << "Please enter tne output filename: " << endl;
    cin >> out;

    // read in the input and output filenames

    char a;
    int b=0;
    while (input.good ())
    {
        a=input.get ();
        if (a=='\n')
        {
            b++;
        }
    }
    // count the number of lines in the input file

    input.seekg (0, ios::beg);

    //rewind to beginning of file

    contact* list = new contact[b];

    //dynamically create memory space for array of contacts

    int i = 0.;
      while(input){
            if(i >= b) break;
            if(input >> *list[i].firstName >> *list[i].surName >> *list[i].number) i++;  
            else break;
      }
    input.close();

    //read information from input file into array of contacts

    for(int N = 0; N < b; N++){
        cout << list[N].firstName << list[N].surName << list[N].number << endl;
    }

    ofstream output(out);
    int k = 0;
    for(int k = 0; k<b; k++){
        output << list[k].firstName << "        " << list[k].surName << "       " << list[k].number << endl;
    }

    //print out the unsorted list to screen and write to output file
    //i've done both here just to check, won't print to screen in final version

    output.close();
    delete []list;

}       // end of main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T04:12:04.923

Okay, I put together a quick and dirty method using newer C++ constructs to get you most of the way there. You're on your own for writing to the file (trivial) and the quicksort, though I've put the struct into a vector for you, so sorting the vector is as easy as writing a custom function to compare one struct vs the other. I apologize in advance if some of the code is less than canonical C++. I'm way past my bed time, and way tired, but this was interesting enough of a problem that I wanted to give it a go. Happy coding!

```
#include <iostream>
#include <fstream>
#include <istream>
#include <string>
#include <vector>
#include <algorithm>
#include <cctype>
#include <sstream>

using namespace std;

std::vector<std::string> &split(const std::string &s, char delim, std::vector<std::string> &elems) {
    std::stringstream ss(s);
    std::string item;
    while(std::getline(ss, item, delim)) {
        elems.push_back(item);
    }
    return elems;
}

std::vector<std::string> split(const std::string &s, char delim) {
    std::vector<std::string> elems;
    return split(s, delim, elems);
}

struct contact
{
    std::string firstName;
    std::string surName;
    std::string number;

    contact(std::string& fName, std::string& lName, std::string& num) : firstName(fName), surName(lName), number(num) {}
};
//structure definition

char in[20];
char out[20];

int main()
{
    std::vector<contact> contacts;

    cout << "Please enter the input filename: " << endl;
    cin >> in;
    ifstream input(in);

    if(!input){
        cerr << "failed to open input file " << in << endl;
        exit(1);
    }

    cout << "Please enter tne output filename: " << endl;
    cin >> out;

    std::string sinput;

    // read in the input and output filenames
    while (input.good ())
    {
        getline(input, sinput);

        vector<string> tokens = split(sinput, ' ');
        if (tokens.size() == 3)
        {
            contact c(tokens[0], tokens[1], tokens[2]);
            contacts.push_back(c);
        }
    }

    input.close();

    //read information from input file into array of contacts

    std::cout << "Outputting from vector..." << std::endl;
    for_each(contacts.begin(), contacts.end(), [](contact& c) {
        cout << c.firstName << " " << c.surName << " " << c.number << endl;
    });

    return 0;
} 
```

Also, just want to give credit that the split methods come from [this answer](https://stackoverflow.com/a/236803/86207) on this very site. Cheers!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T01:44:30.050

您将文件位置重置为开头，但从您第一次读取行数时开始，文件 eofbit 仍被标记为 true。快速解决此问题的方法是在读取行后重新打开文件，可能使行数成为清理代码的函数。

```
int lines(const string path)
{
    ifstream tmp(path.c_str());
    string temp;
    int count = 0;
    getline(inFile,temp);
    while(inFile)
    {
       count++;
       getline(inFile,temp);
    }
    tmp.close();
    return count;
} 
```

# winapi - x64 asm ret 登陆无人区

> ID：13812116
> 
> 赞同：0
> 
> 时间：2012-12-11T01:16:26.000
> 
> 标签：winapi, assembly, 64-bit, callstack

我以为我已经推送了一些东西而没有弹出它，反之亦然，但我找不到任何错误！我通过调用正确链接的 dll 写入控制台，但我莫名其妙地处于无人区......（地址 0x0000000000000000）

我已经睡了一些觉，而且我确信 API 调用 WriteConsoleA 正在返回。这是我最后一次在打印功能下。

有任何想法吗？

。可执行程序：

```
extern FreeConsole
extern Sleep
extern ExitProcess

extern print
extern newconsole
extern strlen

section .data BITS 64
        title:  db 'Consolas!',0

        message: db 'Hello, world',0,0

section .text bits 64
global Start
Start:
        mov rcx, title
        call newconsole
        mov rcx, 1000
        call Sleep

        mov rcx, message
        call print

        mov rcx, 10000
        call Sleep
        call FreeConsole
        xor rcx, rcx
        call ExitProcess 
```

.dll：

```
extern AllocConsole
extern SetConsoleTitleA
extern GetStdHandle
extern WriteConsoleA
extern Sleep

export newconsole
export strlen
export print

section .data BITS 64
console.writehandle:     dq 0
console.readhandle:              dq 0
console.write.result:    dq 0

section .text BITS 64
global strlen
strlen:
        push rax
        push rdx
        push rdi

        mov rdi, rcx
        xor rax, rax
        mov rcx, dword -1
        cld

        repnz scasb
        neg rcx
        sub rcx, 2

        pop rdi
        pop rdx
        pop rax
        ret

global print
print:
        mov rbp, rsp
        push rcx
        call strlen

        mov r8, rcx
        pop rdx
        mov rcx, [console.writehandle]
        mov r9, console.write.result
        push qword 0
        call WriteConsoleA
        ret

global newconsole
newconsole:
        push rax
        push rcx
        call AllocConsole
        pop rcx
        call SetConsoleTitleA
        mov rcx, -11
        call GetStdHandle
        mov [console.writehandle], rax
        pop rax
        ret 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T01:45:47.110

我假设您正在谈论此功能：

```
global print
print:
        mov rbp, rsp
        push rcx
        call strlen

        mov r8, rcx
        pop rdx
        mov rcx, [console.writehandle]
        mov r9, console.write.result
        push qword 0
        call WriteConsoleA
        ret 
```

x64 ABI 要求为寄存器中传递的参数保留堆栈空间。 `WriteConsoleA`可以随意使用这些堆栈位置 - 因此您需要确保已适当调整堆栈。就目前而言，您只推送最后一个保留的指针参数。我认为类似以下的内容会为您解决问题：

```
 push qword 0
        sub rsp, 4 * 8  // reserve stack for register parameters
        call WriteConsoleA
        mov rsp, rbp    // restore rsp
        ret 
```

请参阅[http://msdn.microsoft.com/en-us/library/ms235286.aspx](http://msdn.microsoft.com/en-us/library/ms235286.aspx)（已添加重点）：

> x64 应用程序二进制接口 (ABI) 是一个 4 寄存器快速调用调用约定，**这些寄存器具有堆栈支持**。
> 
> ...
> 
> 调用者负责为被调用者分配参数空间，并且必须始终为 4 个寄存器参数分配足够的空间，即使被调用者没有那么多参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T01:39:45.753

根据调用约定，您必须清理放在堆栈上的参数。在这种情况下，适用于 的第 5 个参数`WriteConsoleA`。既然你有一份原件`rsp`在`rbp`里面，你可以`rsp`从重新加载`rbp`，或者只是在后面加8个`call`。

# go - 如何在 Go 中清除地图？

> ID：13812121
> 
> 赞同：103
> 
> 时间：2012-12-11T01:16:46.357
> 
> 标签：go

我正在寻找`.clear()` 原始类型的 c++ 函数之类的东西`map`。

还是我应该只创建一个新地图？

更新：感谢您的回答。通过查看答案，我刚刚意识到有时创建新地图可能会导致一些我们不想要的不一致。考虑以下示例：

```
var a map[string]string
var b map[string]string

func main() {
    a = make(map[string]string)
    b=a
    a["hello"]="world"
    a = nil
    fmt.Println(b["hello"])
} 
```

我的意思是，这和c++中的函数还是有区别的`.clear()`，它会清除对象中的内容。

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2012-12-11T01:52:07.373

您可能应该只创建一个新地图。没有真正的理由费心尝试清除现有的地图，除非多段代码引用同一个地图，并且其中一段明确需要清除这些值，以便其他代码段可以看到此更改。

所以，是的，你可能应该说

```
mymap = make(map[keytype]valtype) 
```

* * *

如果您出于某种原因确实需要清除现有地图，这很简单：

```
for k := range m {
    delete(m, k)
} 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-12-12T06:58:25.827

与 C++ 不同，Go 是一种垃圾收集语言。你需要以不同的方式思考问题。

当你制作一张新地图时

```
a := map[string]string{"hello": "world"}
a = make(map[string]string) 
```

原始地图最终将被垃圾收集；你不需要手动清除它。但请记住，映射（和切片）是引用类型；你用`make()`. 仅当没有对底层映射的引用时，才会对底层映射进行垃圾收集。因此，当你这样做

```
a := map[string]string{"hello": "world"}
b := a
a = make(map[string]string) 
```

原始数组不会被垃圾收集（直到 b 被垃圾收集或 b 引用其他东西）。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2020-09-06T09:13:06.323

```
// Method - I , say book is name of map
for k := range book {
    delete(book, k)
}

// Method - II
book = make(map[string]int)

// Method - III
book = map[string]int{} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2022-01-21T23:13:43.260

通用`maps`包的 Go 问题 ( [https://github.com/golang/go/issues/47649](https://github.com/golang/go/issues/47649) ) 提供`maps.Clear`。

该软件包位于`golang.org/x/exp/maps`（实验性，不包括在兼容性保证中）

```
// Clear removes all entries from m, leaving it empty.
func Clear[M ~map[K]V, K comparable, V any](m M) 
```

它的用法

```
func main() {
    testMap := map[string]int{"gopher": 1, "badger": 2}
    maps.Clear(testMap)
    fmt.Println(testMap)

    testMap["zebra"] = 2000
    fmt.Println(testMap)
} 
```

在此处运行代码 [https://go.dev/play/p/qIdnGrd0CYs?v=gotip](https://go.dev/play/p/qIdnGrd0CYs?v=gotip)

* * *

## 回答 #5

> 赞同：-6
> 
> 时间：2017-02-16T22:00:56.013

如果您尝试循环执行此操作，则可以利用初始化为您清除地图。例如：

```
for i:=0; i<2; i++ {
    animalNames := make(map[string]string)
    switch i {
        case 0:
            animalNames["cat"] = "Patches"
        case 1:
            animalNames["dog"] = "Spot";
    }

    fmt.Println("For map instance", i)
    for key, value := range animalNames {
        fmt.Println(key, value)
    }
    fmt.Println("-----------\n")
} 
```

执行此操作时，它会清除先前的地图并从空地图开始。输出验证了这一点：

```
$ go run maptests.go 
For map instance 0
cat Patches
-----------

For map instance 1
dog Spot
----------- 
```

# python - 无法在 Google App Engine 上运行 Flask 调试模式

> ID：13812123
> 
> 赞同：3
> 
> 时间：2012-12-11T01:17:00.713
> 
> 标签：python, google-app-engine, flask, werkzeug

我正在使用 Python 2.7 在 Google App Engine 上运行 Flask 0.9 / Werkzeug 0.8.3，我非常希望 Werkzeug 调试器运行。尝试使用[werkzeug_appengine_debugger](http://github.com/daaku/werkzeug-debugger-appengine)后，我在控制台中有以下异常：

```
File "/path/to/application/main.py", line 14, in <module>
   @app.route('/')
AttributeError: 'DebuggedApplication' object has no attribute 'route' 
```

它不仅可以是“路由”，还可以是 Flask 应用程序可以具有的任何属性。

[我的文件树看起来像这样，从flask-appengine-template](https://github.com/kamalgill/flask-appengine-template/tree/master/src)借来的：

```
application
    __init__.py
    main.py
    ...    
flask
flaskext
werkzeug
werkzeug_debugger_appengine
...
app.yaml 
```

在 app.yaml 我的目标是 WSGI 应用程序：

```
application: application_name
version: 1
runtime: python27
api_version: 1
threadsafe: true

builtins:
- appstats: on
- admin_redirect: on
- deferred: on
- remote_api: on

libraries:
- name: jinja2
  version: "2.6"
- name: markupsafe
  version: "0.15"

inbound_services:
- warmup

handlers:
- url: .*
script: application.app 
```

这里是内容`__init__.py`

```
from flask import Flask
from werkzeug_debugger_appengine import get_debugged_app

## Starting app
app = Flask('application_name')

## Configuration
import os
import secrets

app.debug            = True
app.secret_key       = secrets.SECRET_KEY
app.csrf_session_key = secrets.CSRF_SESSION_KEY

# Auto-set debug mode based on App Engine dev environ
if 'SERVER_SOFTWARE' in os.environ and os.environ['SERVER_SOFTWARE'].startswith('Dev'):
    app.debug = True

## Extensions
if app.debug:
    app = get_debugged_app(app)

## Everything else
import main 
```

没有 werkzeug_appengine_debugger 也无法工作。下面的初始化

```
app = DebuggedApplication(app, True) 
```

仍然抛出相同的异常。

在没有 GAE + Flask 教程或文章中，我已经看到了这个问题。为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T13:37:06.380

```
app = DebuggedApplication(app, True) 
```

应该：

```
app.wsgi_app = DebuggedApplication(app.wsgi_app, True) 
```

这是[在 Flask 中添加中间件的推荐方法](http://flask.pocoo.org/docs/api/#flask.Flask.wsgi_app)- 正如文档所说，这样您可以“保留对`flask.Flask`应用程序类的引用”。

# c++ - 除法函数随机整数需要商和余数打印出来

> ID：13812127
> 
> 赞同：-3
> 
> 时间：2012-12-11T01:17:36.300
> 
> 标签：c++, function

嗨我写这段代码有程序，同时使用小于 100 的随机整数 => 除函数，返回 qoutient 和余数并将它们打印在输出中，但似乎我不工作，请你帮忙哪部分是错的。

```
 #include <cstdlib>
#include <iostream>
#include <ctime>
using namespace std;

using namespace std;
 int division(int& remainder,int qoutient)
{ 
int dividant;
int divisor;
    int quotient=dividant/divisor;      
   int remainder=dividant%divisor;
}

int main()
{
    int dividant =(rand()%99);
    int divisor =(rand()%99);
    int qoutient;
    int remainder_result;
    srand(time(NULL));
    do{qoutient=division(dividant,divisor);
    cout<<"this is q:"<<qoutient<<endl;
    cout<<"remainder"<<remainder_result<<endl;}
    while(dividant>divisor);

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T01:21:55.663

*   您的除法函数使用变量`divident`并`divisor`在 main 中声明，这超出了函数的范围并会导致错误。为了使用这些变量，您需要使用参数将它们传递给函数。
*   您还将除法函数声明为 void，不返回任何内容，但在 do while 循环中使用它作为语句。为了让函数返回一个值，您需要将 void 替换为要返回的类型，在 this 中可以是`int`, 并在函数末尾返回一个值。
*   `srand(time(NULL))`放在初始 rand 函数之后，这意味着 rand 函数将返回与 rand 尚未播种相同的值，然后是种子 rand。您需要在通话`srand(time(NULL))`之前放置`rand()`

我建议你阅读更多关于 c++ 概念的内容，你在这个程序中没有太多的权利以及一些非常混乱的编码技术。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T01:46:05.147

代码有很多问题，所以我可能误解了你想要做的事情。这是根据我的理解的固定代码。我冒昧地更改了您的输出，因此它显示了完整操作的数据，因此您可以检查结果：

```
#include <cstdlib>
#include <iostream>
#include <ctime>
using namespace std;

void division(int dividend, int divisor, int& quotient, int& remainder)
{ 
    quotient = dividend / divisor;      
    remainder = dividend % divisor;
}

int main()
{
    srand(time(NULL));    
    int dividend = rand() % 99;
    int divisor = rand() % 99;
    int quotient, remainder;
    division(dividend, divisor, quotient, remainder);
    cout << dividend << "/" << divisor << " = " << quotient << " remainder: " << remainder << endl;
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T01:21:41.840

您有编译错误。您的除法函数引用了未声明的变量。您将需要对这些变量进行参数化，或更改除法函数；无论如何，该函数无法访问在 main 范围内声明的变量。

这是来自 IDEOne 的编译错误/警告列表：

```
prog.cpp: In function ‘void division(int&, int)’:
prog.cpp:11: error: ‘dividant’ was not declared in this scope
prog.cpp:11: error: ‘divisor’ was not declared in this scope
prog.cpp:11: warning: unused variable ‘quotient’
prog.cpp: In function ‘int main()’:
prog.cpp:23: error: void value not ignored as it ought to be
prog.cpp:25: error: ‘remainder’ was not declared in this scope
prog.cpp:28: error: expected `;' before ‘}’ token
prog.cpp:20: warning: unused variable ‘remainder_result’ 
```

一旦你修复了这些错误，请告诉我们它是怎么回事。我还建议您注意这些警告，因为它们可能表明代码中存在其他问题。

# python-3.x - 如何获取 Python 函数并为其创建一个简单的 Tkinter gui

> ID：13812131
> 
> 赞同：2
> 
> 时间：2012-12-11T01:17:48.103
> 
> 标签：python-3.x, tkinter

我有三个函数 2 其中接受一个字符串并返回一个字符串。我有第三个函数，它接受两个字符串并返回一个字符串。我正在尝试创建一个简单的 Tkinter GUI，它将接收函数的任何参数，然后基于按钮按下运行我的算法返回结果。Tkinter 让我很难受。我需要四个输入字段来输入所有可能的参数，然后在按下按钮时运行正确的功能。函数将如下所示：

CalculateStrenghtofBrute(Word, Charset) CalculateDictionary(Word) CalculatePassPhrase(Phrase)

全部返回在函数中创建的字符串。

下面是一个示例函数

```
def wordTime(Password):

    with open('Dics/dict.txt','r') as f:
    Words = f.read().splitlines()

    found = Words.index(Password)
    found += 1
    timeSec = found*.1
    if(timeSec> 31536000):
        time = timeSec/31536000
        timeType = 'Years'
    elif(timeSec>86400):
        time = timeSec/86400
        timeType = 'Days'
    elif(timeSec>360):
        time = timeSec/360
        timeType = 'Hours'
    elif(timeSec>60):
        time = timeSec/60
        timeType = 'Minutes'
    else:
        time = timeSec
        timeType ='Seconds'

return ('Cracking',Password,'using dictionary attack will take', round(time, 2), timeType+'.') 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-19T11:18:34.807

如果你想从用户那里获取输入，你需要创建一个输入框，一旦你有了一个输入框，你可以调用它的 get 方法来获取当前驻留在输入框中的字符串，我已经使用了你的示例函数并为它制作了一个简单的 tk GUI：

```
import Tkinter as tk

def wordTime():
    password = input_box.get()
    with open('Dics/dict.txt','r') as f:
        Words = f.read().splitlines()
        found = Words.index(Password)
        found += 1
        timeSec = found*.1
        if(timeSec> 31536000):
            time = timeSec/31536000
            timeType = 'Years'
        elif(timeSec>86400):
            time = timeSec/86400
            timeType = 'Days'
        elif(timeSec>360):
            time = timeSec/360
            timeType = 'Hours'
        elif(timeSec>60):
            time = timeSec/60
            timeType = 'Minutes'
        else:
            time = timeSec
            timeType ='Seconds'
    print ('Cracking',Password,'using dictionary attack will take', round(time, 2), timeType+'.')

# Make a top level Tk window
root = tk.Tk()
root.title("Cracker GUI v.01")
# Set up a Label
grovey_label = tk.Label(text="Enter password:")
grovey_label.pack(side=tk.LEFT,padx=10,pady=10)
# Make an input box
input_box = tk.Entry(root,width=10)
input_box.pack(side=tk.LEFT,padx=10,pady=10)
# Make a button which takes wordTime as command,
# Note that we are not using wordTime()
mega_button = tk.Button(root, text="GO!", command=wordTime)
mega_button.pack(side=tk.LEFT)
#Lets get the show on the road
root.mainloop() 
```

如果你想获取多个值，你可以使用多个按钮来设置多个变量，我也不确定你的功能，但这并不是真正的问题。

作为参考，以下站点有一些很好的基本示例：

[http://effbot.org/tkinterbook/entry.htm](http://effbot.org/tkinterbook/entry.htm)

[http://effbot.org/tkinterbook/button.htm](http://effbot.org/tkinterbook/button.htm)

[http://www.ittc.ku.edu/~niehaus/classes/448-s04/448-standard/simple_gui_examples/](http://www.ittc.ku.edu/~niehaus/classes/448-s04/448-standard/simple_gui_examples/)

# python - 如何在 Python 中验证 JSON Schema 模式？

> ID：13812136
> 
> 赞同：30
> 
> 时间：2012-12-11T01:18:05.223
> 
> 标签：python, jsonschema

我正在以编程方式生成 JSON 架构模式。我希望确保架构有效。是否有可以验证我的架构的架构？

请注意我在该句子和标题中两次使用模式。我不想针对我的架构验证数据，我想验证我的架构。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-11T19:08:15.893

使用[jsonschema](http://pypi.python.org/pypi/jsonschema/0.7)，您可以根据元模式验证模式。核心元模式在[这里](http://json-schema.org/)，但是 jsonschema 捆绑了它，所以没有必要下载它。

```
from jsonschema import Draft3Validator
my_schema = json.loads(my_text_file) #or however else you end up with a dict of the schema
Draft3Validator.check_schema(my_schema) 
```

# java - 如何使用 Guice 3.0 为 JSP 提供服务？

> ID：13812138
> 
> 赞同：1
> 
> 时间：2012-12-11T01:18:06.153
> 
> 标签：java, jsp, guice, guice-servlet

我正在尝试为 Guice 提供 JSP。我没有找到有关如何执行此操作的任何基本示例！

我的设置：

**web.xml**

```
<filter>
    <filter-name>guiceFilter</filter-name>
    <filter-class>com.google.inject.servlet.GuiceFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>guiceFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<listener>
    <listener-class>org.example.Bootstrap</listener-class>
</listener> 
```

**org.example.Bootstrap**（类似...）

```
public class Bootstrap extends GuiceServletContextListener 
{
    @Override
    protected Injector getInjector()
    {
        return Guice.createInjector(new org.example.BootstrapModule());
    }

} 
```

**org.example.BootstrapModule**（类似...）

```
public class BootstrapModule extends ServletModule
{
    @Override
    protected void configureServlets()
    {
        // serve .JSPs
        bind(org.apache.jasper.servlet.JspServlet.class).in(Scopes.SINGLETON);
        serveRegex("/.*\\.jsp").with(org.apache.jasper.servlet.JspServlet.class);

        // serve my controllers 
        bind(MainServlet.class).in(Scopes.SINGLETON);
        serveRegex("/.*").with(MainServlet.class);
    }
} 
```

在**MainServlet**中，我执行以下操作：

```
request.getRequestDispatcher("test.jsp").include(request, response); 
```

或者

```
request.getRequestDispatcher("test.jsp").forward(request, response); 
```

或者

```
request.getRequestDispatcher("/test.jsp").include(request, response); 
```

或者

```
request.getRequestDispatcher("/test.jsp").forward(request, response); 
```

我的**test.jsp**在`webapp/test.jsp`（我使用 Maven）。

它不起作用！我总是遇到以下错误：

```
SEVERE: PWC6117: File XXX not found 
```

Guice 传递给 org.apache.jasper.servlet.JspServlet 的信息似乎不是 JSP 工作所需的信息。

我错过了什么？我什至必须手动指定 org.apache.jasper.servlet.JspServlet 吗？从 Guice 正确地提供 JSP 需要什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T20:25:24.717

看来这是一个[已知的错误](http://code.google.com/p/google-guice/issues/detail?id=455)。

作为一种解决方法，有人说您可以编译 Guice 的 TRUNK。我还发现设置

```
request.setAttribute(org.apache.jasper.Constants.JSP_FILE, "/test.jsp"); 
```

在转发也有效之前。

但是我必须运行更多的测试才能看到我将使用什么，直到 Guice 在公开版本中得到修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T11:25:51.753

You need to override `Bootstrap#getModule()` to return a `new BootstrapModule()`.

```
@Override
protected Module getModule() {
    return new BootstrapModule();
} 
```

# html - 确保嵌入代码 (iframe) 仅用于客户网站

> ID：13812140
> 
> 赞同：1
> 
> 时间：2012-12-11T01:18:14.553
> 
> 标签：html, security, iframe

我有一项服务，并希望客户能够将此服务放在他们的网站上。我正在考虑通过使用 iframe 来做到这一点。我将提供代码，他们只需复制和粘贴代码即可显示功能。每个客户端都将被查询字符串发现。

有人担心任何人都可以查看网站的来源，复制 iframe 并将其添加到自己的网站，从而使用该服务并向原始客户收费。我显然想阻止这一切。

理想情况下，我想验证使用 iframe 的网站是否链接到注册使用该服务的客户。这可能吗？我知道跨域安全存在问题。

如果不可能，我想我需要创建一个小部件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T02:00:20.057

对于每个客户，都有一个可以嵌入 iframe 的网站白名单。然后，每当加载 iframe 内的页面时，对照该列表检查[“引荐来源”标头。](http://en.wikipedia.org/wiki/HTTP_referer)

或者，如果 http 标头被证明不可靠，请尝试使用 javascript，通过`parent.document.location.href`

# javascript - 如何防止鼠标进入 iframe 时触发 document mouseout 事件？

> ID：13812141
> 
> 赞同：0
> 
> 时间：2012-12-11T01:18:29.373
> 
> 标签：javascript, dom, iframe, javascript-events

我正在检测鼠标是否按照此答案中的指定离开窗口：[如何检测鼠标何时离开窗口？](https://stackoverflow.com/questions/923299/how-can-i-detect-when-the-mouse-leaves-the-window).

问题是当鼠标进入 iframe（在我的例子中是嵌入的 Youtube 视频）时，浏览器会触发此事件。

我怎样才能防止这种情况？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T01:55:33.260

您只需以这种方式修改处理程序：

```
addEvent(document, "mouseout", function(e) {
    e = e ? e : window.event;
    var from = e.relatedTarget || e.toElement;

    // we will check if this won't be iframe
    var to = e.target || e.srcElement;
    if ((!from || from.nodeName == "HTML")
      && to.nodeName !== "IFRAME") {
        console.log('mouse out')
    }
}); 
```

**编辑**添加`e.srcElement`了支持 IE 的选项

# iphone - iOS 中的滑动条，如 facebook 失去网络连接时

> ID：13812148
> 
> 赞同：0
> 
> 时间：2012-12-11T01:19:01.597
> 
> 标签：iphone

我需要在 iOS 中提供一个滑动条来提醒用户他输入了错误的数据。我希望它在屏幕顶部出现大约 1 秒钟然后消失，所以有一些动画和提交。但我找不到任何好的文档。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T05:45:16.873

首先，您需要通知栏的 imageView 或要设置动画的按钮，即 yourObject。

使用这种方法，您可以将横幅放在屏幕上（将坐标更改为适合您的任何套件）此外，如果您希望它向下翻转，因为 Apple 有一些通知，您可以使用旋转，如果不只是删除该行。

```
//yourObject setHidden to NO
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:.5];
self.yourObject.center = CGPointMake(100, 200);
self.yourObject.transform = CGAffineTransformMakeRotation(0);
[UIView commitAnimations]; 
```

接下来只需制作一个计时器，它会在 1 秒后调用一些方法来与我发布的方法相反。

如果您想要一个非常简单的出现和消失而不是滑动，您可以将 commitAnimations 之前的两行替换为

```
yourObject.alpha=1 
```

# java - 如何处理 JUnit 设置方法中的异常

> ID：13812149
> 
> 赞同：18
> 
> 时间：2012-12-11T01:19:05.820
> 
> 标签：java, junit

我有一个单元测试用例，其中涉及创建一些具有随机内容的文件，然后使用这些文件进行测试，并在清理时删除这些文件。

所以我需要在@Before 方法中创建文件并写入文件。我应该如何处理异常？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-11T01:47:00.840

如果您的测试类需要这些文件来执行其测试，那么您应该使用`throws IOException`. 这样，如果文件创建失败，测试类将失败，原因从异常中显而易见。如果您捕获并抑制 IOException，则需要这些文件的单元测试无论如何都可能会失败，并且需要进行侦查工作。

对于@After 方法，风险并不高。我会声明 @After 方法`throws IOException`只是因为它更容易编码和阅读。您可能会捕获 IOException 而不会造成太大伤害，但是，清理不应该总是成功吗？如果该代码无法清理文件，则说明您的环境有些奇怪，意识到这一点可能会很好。所以这是添加`throws IOException`到 @After 方法的另一个原因。

# c - 如何处理标准输入错误状态？

> ID：13812150
> 
> 赞同：1
> 
> 时间：2012-12-11T01:19:10.623
> 
> 标签：c, scanf

```
#define MAGIC_NUMBER //place your favourite integer here 
#include <stdlib.h>
#include <stdio.h>

int main()
{
    int input,i;
    for(int i=0;i<100;i++)
    {
        scanf("%d",&input);
        if(input== MAGIC_NUMBER)
            printf("%d ",input);                
        else
            printf("Invalid value\n");
    }
    system("pause");
    return 0;
} 
```

当输入非整数值时，该程序崩溃。我想`scanf`在角色被扫描后恢复正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T01:26:35.150

从[scanf 手册页](http://www.manpagez.com/man/3/scanf/)：

> 这些函数返回分配的输入项的数量。

因此，您可以检查返回值并读取错误值以在出现错误时丢弃：

```
#include <stdlib.h>
#include <stdio.h>

int main()
{
    int input,i;

    for(i=0;i<100;i++)
    {   
      if (scanf("%d",&input) == 1) { // check if success

        if(input== MAGIC_NUMBER)
        {
          printf("%d ",input);    
        }
        else
          printf("Invalid value\n");
      } else {  // discard input
        int c;
        while ((c = getchar()) != '\n' && c != EOF);
      }   

    }   

    return 0;
} 
```

# ajax - IE9 + pushstate + 刷新

> ID：13812155
> 
> 赞同：2
> 
> 时间：2012-12-11T01:19:21.980
> 
> 标签：ajax, internet-explorer, backbone.js, hashtag, pushstate

我正在使用backbone.js 和pushstate。在 IE9 中，它降级为使用主题标签，并且 AJAX 请求工作得很好。我遇到的问题是刷新页面。我的链接格式如下：

/a_username/a_collection_id

如果我在 IE9 中：

/我/收藏1

然后我点击 AJAX 链接：

/我/集合2

我明白了：

/me/collection1#me/collection2

然而，当我刷新页面时，由于服务器在主题标签之后什么都不知道，我被带回到 /me/collection1 而不是预期的 /me/collection2。

在没有 pushstate 的浏览器中解决此问题的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:15:52.547

您可以检查初始页面加载并查看是否有主题标签，然后进行重定向。与此类似的东西：

```
window.onload = function(){
    if (window.location.hash){
        window.location.replace("...root url..." + window.location.hash);
    }
}; 
```

不是最干净的解决方案，因为每当有人登陆带有主题标签的链接时，它都会导致重定向，但它会给你你正在寻找的结果。

# java - 不相交集与 Union by Size 和 Path Compression；较高的树有可能成为较短树的子树吗？

> ID：13812158
> 
> 赞同：3
> 
> 时间：2012-12-11T01:19:35.837
> 
> 标签：java, disjoint-sets, disjoint-union

嗨，这是我第一次在这里发帖，

我一直在尝试解决一个学习问题，但无法弄清楚：

我们考虑不相交集抽象数据类型的森林实现，按大小加权联合和路径压缩。最初，每个元素都位于单节点树中。

从上述初始状态开始：

1.  给出一个（短）UNION 和 FIND 操作序列，其中最后一个操作是一个 UNION，它导致较高的树 A 成为较短树 B 的子树（即 A 的高度严格大于 B 的高度） .

2.  显示最后一个 UNION 合并的两棵树 A 和 B

提示：您可以从 n = 9 个元素开始，每个元素都位于单节点树中。

* * *

我不确定这将如何工作，因为较小的树总是与较大的树合并，因为按大小联合？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T01:55:38.540

我不想回答你的作业，但是这个问题已经足够老了，你的学期可能已经结束了，无论如何，一个提示应该会有所帮助。

*union by size*和 union by *height*之间存在区别，主要是因为路径压缩。具体来说，路径压缩会导致节点的度数非常高，因此树的节点很多但高度非常短。例如，您可以使用带有路径压缩的 union find 创建两棵树：

```
|T1:   o    (n=5, h=2)
|    /| |\ 
|   o o o o
|    
|T2:   o    (n=4, h=3)
|     /|
|    o o
|      |
|      o 
```

如果下一个操作是这两个树的合并，“排序联合”和“高度联合”算法将选择不同的父级。

在实践中，通常使用“按等级联合”。秩是高度的上限，可以在恒定时间内更新，并产生最佳的渐近运行时间。网络搜索将对该算法产生许多很好的解释。

# javascript - Firefox 在 CSS3 转换之前不更新 DOM

> ID：13812159
> 
> 赞同：5
> 
> 时间：2012-12-11T01:19:38.677
> 
> 标签：javascript, dom, css

我正在尝试构建一个非常简单的滑块。我想对动画和 js 使用 CSS3 过渡，将动画输入和动画输出类依次应用于各个帧。

我在这里写了一个关于 jsfiddle 的基本预期功能的工作演示：http: [//jsfiddle.net/7myKg/3/](http://jsfiddle.net/7myKg/3/)

这很简单。帧通过应用 animate-in 类进行动画处理，并通过应用 animate-out 类进行动画处理。例如，这将显示第二帧：

```
<div class="slider" id="slider">
    <ul>
        <li id="frame1" class="animate-out"><p>one</p></li>
        <li id="frame2" class="animate-in"><p>two</p></li>
        <li id="frame3"><p>three</p></li>
    </ul>
</div>​ 
```

在我可以对帧进行动画处理之前，我需要确保它被重置并且帧不能转换到它的重置状态。为了实现这一点，我在框架中添加内联样式以将其转换持续时间设置为 0，然后再删除它的动画输出类。这目前在 Chrome 中按预期工作。我遇到的问题是 Firefox 似乎在 DOM 反映元素样式的更改之前应用了 animate-in 类，这导致元素/框架向后过渡。在 Firefox 中运行演示比解释更容易看到。我添加了一个带有延迟的 setTimeout 包装来演示我期望它的行为方式。

我错过了什么？为什么 Firefox 不立即更新 DOM 元素？

我自己从头开始构建它作为一种学习体验，因为我认为这是一个我能够解决的奇怪问题。它不打算用于生产，至少目前肯定不是。出于这个原因，我不想使用许多现有的解决方案或插件之一。

注意：这是我的第一个问题，因此，如果我在将来如何提出更好的问题方面做错了什么，任何建设性的建议将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T09:03:45.667

# -moz 过渡：左

我开始摆弄，但更喜欢从干净的页面开始。

跳出的第一个问题`-moz-transition:`是按原样省略`-o-transition:`。我现在很累，真的懒得去*查*，但上次我检查时，所有的浏览器仍然需要自己的前缀，而且 IE(9) 仍然不支持转换。

~~编辑：[显然从 FF16 开始，-moz- 前缀就不需要了](https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_transitions#Browser_compatibility)。~~

第二; 您没有在您的 CSS 声明中说明您希望转换的样式属性。即`-moz-transition:left 1s;`。

第三；我不记得细节了，因为我认为信息的用处不大，但我记得读过关于 setTimeout 携带参数的文章并不普遍稳定。[我可能在developer.mozilla](http://developer.mozilla.org)的某个地方读过它。甚至可能在这里的某个地方。

编辑：[通常是 IE 特定](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval#Callback_arguments)的 . 我仍然会使用一个简单的匿名函数。

正如我所说，我开始摆弄代码，但更愿意重写。

就像我也说的，我很累（快要睡觉了）所以我现在不会这样做，但明天可能会。同时，尝试*修复*这三点。

## 更新

发布编辑（我对`-moz-`前缀是正确的:-)

我忍不住[JsFiddle](http://jsfiddle.net/FredGandt/7myKg/9/)

## HTML

```
<div>
    <input type="checkbox" id="overflowHidden"><p>overflow: hidden</p>
    <button id="next">Next</button>
</div>
<div class="slider">
    <ul id="slider" class="a">
        <li id="frame3"><p>three</p></li>
        <li id="frame1"><p>one</p></li>
        <li id="frame2"><p>two</p></li>
    </ul>
</div>​ 
```

## CSS

```
input {
    display:inline-block;
    margin:10px 0px 0px 10px;
}
button {
    display:inline-block;
    margin:0px 0px 0px 10px;
    vertical-align:2px;
}
p {
    display:inline-block;
    margin:0px 0px 0px 5px;
    vertical-align:2px;
}
.slider {
    margin: 2em auto;
    padding: 0;
    width: 200px;
    height: 200px;
}
#slider {
    margin: 0;
    padding: 0;
    list-style-type: none;
    position: relative;
    width: 100%;
    height: 100%;
}
.slider li {
    margin: 0;
    padding: 0;
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0%;
    -o-transition:left 1s ease-in-out;
    -webkit-transition:left 1s ease-in-out;
    -moz-transition:left 1s ease-in-out;
    transition:left 1s ease-in-out;
}
#frame1 {
    background:#e08080;
}
#frame2 {
    background:#e0e080;
}
#frame3 {
    background:#8080e0;
}
#slider.a #frame1{
    left: 0%;
}
#slider.a #frame2{
    left: -100%;
}
#slider.a #frame3{
    left: 0%;
}
#slider.b #frame1{
    left: 0%;
}
#slider.b #frame2{
    left: 0%;
}
#slider.b #frame3{
    left: -100%;
}
#slider.c #frame1{
    left: -100%;
}
#slider.c #frame2{
    left: 0%;
}
#slider.c #frame3{
    left: 0%;
} 
```

## JavaScript

```
(function () {
    window.addEventListener("load", function () {
        var slider = document.getElementById("slider");
        document.getElementById("next").addEventListener("click", function () {
            var c = slider.getAttribute("class");
            c = c === "a" ? "b" : c === "b" ? "c" : c === "c" ? "a" : c;
            slider.setAttribute("class", c);
            slider.appendChild(slider.getElementsByTagName("li")[0]);
        }, false);
        // adding a toggle for overflow just for demo
        document.getElementById("overflowHidden").addEventListener("change", function () {
            if (this.checked) {
                slider.style.overflow = "hidden";
            } else {
                slider.removeAttribute("style");
            }
        }, false);
    }, false);
}()); 
```

当然，有很多不同的方法可以完成这类事情。作为一项规则，我从想象自己想要什么开始，然后从那里开始构建，而不是尝试使用特定的方法以特定的方式使某些东西发挥作用。

JavaScript 完成的大部分工作可以使用[@keyframes](http://www.w3schools.com/cssref/css3_pr_keyframes.asp)传递给 CSS ，而不是使用多个元素。但这总是取决于*具体*情况不是吗？

考虑一下，尽管只需要 2 个颜色面板，其中之一可能是背景。这允许只需要移动一个元素（将其滑过，将背景设置为相同的颜色，将其发送回而不进行转换，更改其颜色，然后准备再次滑过）。

尽管学习的小项目非常有趣（我知道），但它们可能会有点失控，有时最好去掉我们学到的所有东西，回到基础。

我真的不是要光顾。好运:-)

# markup - 调查/问卷的标记语言

> ID：13812161
> 
> 赞同：1
> 
> 时间：2012-12-11T01:19:56.607
> 
> 标签：markup, survey

您是否知道任何用于调查的标记语言（它将内容与外观分开 - 类似于 LaTeX - 这样您就可以输入代码并以可靠的方式在线显示）？- 我在网上找到了 SuML，但显然它已经停产了近十年 :-/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T01:28:25.607

嗯，有这个： [http ://www.triple-s.org/sssxml1.htm](http://www.triple-s.org/sssxml1.htm)

但它是 XML。但是，该页面还包括一​​个实施者列表： [http ://www.triple-s.org/ssssoft.htm](http://www.triple-s.org/ssssoft.htm)

所以也许它仍然适合你。

# ruby - 在 Net::HTTP::Session 期间使用 ruby 获取标签内的文本

> ID：13812165
> 
> 赞同：1
> 
> 时间：2012-12-11T01:20:12.877
> 
> 标签：ruby, net-http

如何获取里面的文字

```
<head> ... </head> 
```

在 Net::HTTP::Session 期间使用 ruby​​ 来自网页的标签？

```
Net::HTTP::Proxy(proxy_addr, proxy_port).start(url) { |http|

id.upto(Max_ID) do |i| 
    t = http.head(request<<i.to_s).HEAD_TAGS# I want to get text inside <head></head>
    match_ch_names_for_id(t,i) unless !t        
end

} 
```

我知道我可以通过

```
Net::Http.get(url, request) 
```

但是我需要多次这样做，如果我继续重新获得连接，脚本会非常慢。如果我对 Net::Http::Response 对象使用 body 或 read_body 方法，它不会返回 head 标签内的内容。

# css - 为什么内联 div 的行为与跨度不同？

> ID：13812166
> 
> 赞同：0
> 
> 时间：2012-12-11T01:20:22.160
> 
> 标签：css, html

给定以下两个 HTML 标记块：

```
<div style="overflow:auto; line-height:22px;">
  <div style="float:left; display:inline;">Write</div>
  <div style="float:left; display:inline; font-size:20px;">on the</div>
  <div style="float:left; display:inline; font-size:20px;">same line</div>
</div>

<div style="line-height:22px;">
  <span>Write</span>
  <span style="font-size:20px;">on the</span>
  <span style="font-size:20px;">same line</span>
</div> 
```

为什么它们以不同的方式显示相同的东西？span 是一个内联元素，但文本“Write”与“on the”和“same line”的垂直对齐方式不同，无论 div 是否显示为内联。它不应该以完全相同的方式渲染线条吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T01:22:26.030

你的 div 是浮动的。如果它们是浮动的，它们就不能内联。

如果您删除浮动（随后删除`overflow: auto`父级上的浮动，因为这不是必需的），那么它们的行为就像内联元素：

```
<div style="line-height:22px;">
  <div style="display:inline;">Write</div>
  <div style="display:inline; font-size:20px;">on the</div>
  <div style="display:inline; font-size:20px;">same line</div>
</div> 
```

# objective-c - 如何使用objective-c获取cookie

> ID：13812167
> 
> 赞同：0
> 
> 时间：2012-12-11T01:20:45.527
> 
> 标签：objective-c, cookies

我正在将一个 java applet 程序转换为 ipad 版本。

在原始的 java 小程序代码中，有一些代码可以从 javascript 中获取 cookie：

```
 JSObject browser = (JSObject) JSObject.getWindow(this);
    JSObject document =  (JSObject) browser.getMember("document");
    String cookie = (String)document.getMember("cookie"); 
```

那么，如何使用objective-c 获取这个cookie？有没有类似的类或方法可以做同样的事情？谢谢。:)

========更新========

```
NSString *cookie = [webView stringByEvaluatingJavaScriptFromString:@"document.cookie"]; 
```

使用此方法可以从 javascript 代码中读取值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T02:11:02.817

查看[NSHTTPCookieStorage](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSHTTPCookieStorage_Class/Reference/Reference.html)文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T22:33:51.243

我找到了一种获取 cookie 的方法。

```
NSString *cookie = [webView stringByEvaluatingJavaScriptFromString:@"document.cookie"]; 
```

使用这个方法可以直接从javascript中读取一个值

# scala - 如何在 Scala 中使用没有参数的构造函数参数创建案例类的实例？

> ID：13812172
> 
> 赞同：7
> 
> 时间：2012-12-11T01:21:41.593
> 
> 标签：scala, reflection, macros, case-class, scala-macros

我正在制作一个通过反射字段值设置的 Scala 应用程序。这工作正常。

但是，为了设置字段值，我需要一个创建的实例。如果我有一个带有空构造函数的类，我可以使用 classOf[Person].getConstructors.... 轻松完成此操作。

但是，当我尝试使用具有非空构造函数的 Case 类执行此操作时，它不起作用。我拥有所有字段名称及其值，以及我需要创建的 Object 类型。我可以用我所拥有的东西以某种方式实例化案例类吗？

我唯一没有的是 Case Class 构造函数中的参数名称，或者是在没有参数的情况下创建它然后通过反射设置值的方法。

让我们来看这个例子。

我有以下

```
case class Person(name : String, age : Int)
class Dog(name : String) {
    def this() = {
        name = "Tony"
    }
}

class Reflector[O](obj : O) {

    def setValue[F](propName : String, value : F) = ...

    def getValue(propName : String) = ...
}

//This works
val dog = classOf[Dog].newInstance()
new Reflector(dog).setValue("name", "Doggy")

//This doesn't
val person = classOf[Person].newInstance //Doesn't work

val ctor = classOf[Person].getConstructors()(0)
val ctor.newInstance(parameters) //I have the property names and values, but I don't know 
// which of them is for each parameter, nor I name the name of the constructor parameters 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T03:03:34.453

案例类应该有默认参数，这样你就可以`Person()`；在没有默认参数的情况下，为 name 提供 null 可能（或应该）命中 require(name != null)。

或者，使用反射来确定哪些参数具有默认值，然后为其余参数提供空值或零。

```
import reflect._
import scala.reflect.runtime.{ currentMirror => cm }
import scala.reflect.runtime.universe._

// case class instance with default args

// Persons entering this site must be 18 or older, so assume that
case class Person(name: String, age: Int = 18) {
  require(age >= 18)
}

object Test extends App {

  // Person may have some default args, or not.
  // normally, must Person(name = "Guy")
  // we will Person(null, 18)
  def newCase[A]()(implicit t: ClassTag[A]): A = {
    val claas = cm classSymbol t.runtimeClass
    val modul = claas.companionSymbol.asModule
    val im = cm reflect (cm reflectModule modul).instance
    defaut[A](im, "apply")
  }

  def defaut[A](im: InstanceMirror, name: String): A = {
    val at = newTermName(name)
    val ts = im.symbol.typeSignature
    val method = (ts member at).asMethod

    // either defarg or default val for type of p
    def valueFor(p: Symbol, i: Int): Any = {
      val defarg = ts member newTermName(s"$name$$default$$${i+1}")
      if (defarg != NoSymbol) {
        println(s"default $defarg")
        (im reflectMethod defarg.asMethod)()
      } else {
        println(s"def val for $p")
        p.typeSignature match {
          case t if t =:= typeOf[String] => null
          case t if t =:= typeOf[Int]    => 0
          case x                        => throw new IllegalArgumentException(x.toString)
        }
      }
    }
    val args = (for (ps <- method.paramss; p <- ps) yield p).zipWithIndex map (p => valueFor(p._1,p._2))
    (im reflectMethod method)(args: _*).asInstanceOf[A]
  }

  assert(Person(name = null) == newCase[Person]())
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T02:29:38.890

如果您正在寻找一种不带参数来实例化对象的方法，您可以像在示例中那样做，只要您的反射设置器可以处理设置不可变 val。

您将提供一个备用构造函数，如下所示：

```
case class Person(name : String, age : Int) {
    def this() = this("", 0)
} 
```

请注意，案例类不会生成零参数伴随对象，因此您需要将其实例化为：`new Person()`或`classOf[Person].newInstance()`。但是，这应该是您想要做的。

应该给你这样的输出：

```
scala> case class Person(name : String, age : Int) {
     |         def this() = this("", 0)
     |     }
defined class Person

scala> classOf[Person].newInstance()
res3: Person = Person(,0) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-07T00:24:28.427

下面的方法适用于任何具有无参数 ctor 或具有所有默认主 ctor 的 Scala 类。

它比其他一些关于在调用点有多少信息可用的假设更少，因为它只需要一个 Class[_] 实例而不是隐含等。此外，该方法不依赖于必须是案例类的类或有一个同伴。

仅供参考，如果存在，则在构造过程中优先考虑无参数 ctor。

```
object ClassUtil {

def newInstance(cz: Class[_ <: AnyRef]): AnyRef = {

    val bestCtor = findNoArgOrPrimaryCtor(cz)
    val defaultValues = getCtorDefaultArgs(cz, bestCtor)

    bestCtor.newInstance(defaultValues: _*).asInstanceOf[A]
  }

  private def defaultValueInitFieldName(i: Int): String = s"$$lessinit$$greater$$default$$${i + 1}"

  private def findNoArgOrPrimaryCtor(cz: Class[_]): Constructor[_] = {
    val ctors = cz.getConstructors.sortBy(_.getParameterTypes.size)

    if (ctors.head.getParameterTypes.size == 0) {
      // use no arg ctor
      ctors.head
    } else {
      // use primary ctor
      ctors.reverse.head
    }
  }

  private def getCtorDefaultArgs(cz: Class[_], ctor: Constructor[_]): Array[AnyRef] = {

    val defaultValueMethodNames = ctor.getParameterTypes.zipWithIndex.map {
      valIndex => defaultValueInitFieldName(valIndex._2)
    }

    try {
      defaultValueMethodNames.map(cz.getMethod(_).invoke(null))
    } catch {
      case ex: NoSuchMethodException =>
        throw new InstantiationException(s"$cz must have a no arg constructor or all args must be defaulted")
    }
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-01T03:30:44.553

I ran into a similar problem. Given the ease of using Macro Paradise, Macro Annotations are a solution (for scala 2.10.X and 2.11 so far).

Check out [this question](https://stackoverflow.com/questions/22756542/how-do-i-add-a-no-arg-constructor-to-a-scala-case-class-with-a-macro-annotation) and the example project linked in the comments below.

# javascript - OpenGraph 观看动作 - 观看人数不到 50%

> ID：13812175
> 
> 赞同：1
> 
> 时间：2012-12-11T01:21:59.817
> 
> 标签：javascript, jquery, facebook, facebook-javascript-sdk, facebook-opengraph

我正在使用 Javascript SDK 来联系 API。

使用内置观察动作：

> 当用户观看的视频少于 50% 时，或者如果用户从您的应用程序/网站中删除了观看活动，您还应该通过调用以下调用删除已发布到 Open Graph 的相应操作实例

*删除 https://graph.facebook.com/[观看操作实例 id]*

我的问题是用户何时离开页面。

我尝试使用 jquery unload 方法对 API 进行删除调用，但它失败了。我也尝试过使用 ajax 同步进行调用，但这平均会保持/冻结浏览器至少 5 秒。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T06:45:43.633

# wordpress - WordPress localhost 管理员保存 =“在此服务器上找不到请求的 URL。”

> ID：13812177
> 
> 赞同：1
> 
> 时间：2012-12-11T01:22:19.567
> 
> 标签：wordpress, apache

我正在本地安装 WordPress。除管理部分外，一切正常。每当我尝试保存时（例如，在“设置”页面中），我都会收到此错误：

```
Not Found
The requested URL /wp-admin/options-general.php was not found on this server. 
```

我已将 options-general.php 的权限设置为 755（也尝试了 775）并更新了我的 httpd.conf 文件以更改 to 的所有实例，`AllowOverride None`但`AllowOverride All`我仍然无法在管理部分保存任何内容。

另一个奇怪的观察是我的设置 URL 是：

`http://localhost/wordpress/wp-admin/options-general.php`

...但是当我点击保存时，它会删除 /wordpress 并带我去：

`http://localhost/wp-admin/options-general.php?settings-updated=true`

此外，我的`WordPress Address (URL)`和`Site Address (URL)`设置都设置为`http://localhost/wordpress`.

*   [httpd.conf](http://pastebin.com/GrPeh4NN)

如果还有什么我可以尝试的，我将不胜感激。

*PS 我去了 WordPress StackExchange 网站，但他们说在这里发布 Apache 错误。*

# javascript - Ember 反序列化破坏 URL 为 null

> ID：13812180
> 
> 赞同：1
> 
> 时间：2012-12-11T01:22:31.560
> 
> 标签：javascript, ember.js, ember-data

我有一个用于帖子索引和显示操作的基本路由器。如果我导航到单个帖子，它会正确呈现页面并将 URL 设置为`/#/posts/foo`. 但是，如果我复制 URL 并将其粘贴到新选项卡中，它将加载页面，但 url 将更改为`/#/posts/null`. 除了页面被正确呈现并且没有显示错误

```
show: Em.Route.extend({
  route: "/post/:id",

  serialize: function(router, context) {
    return { id: context.get("id") };
  },

  deserialize: function(router, context) {
    return App.get("store").find(App.Post, context.id);
  },

  connectOutlets: function(router, context) {
    router.get("applicationController").connectOutlet("body", "post", context);
  }
}) 
```

用一个简单的模型

```
App.Post = DS.Model.extend({
  id:      DS.attr("string"),
  title:   DS.attr("string"),
  content: DS.attr("string"),
  image:   DS.attr("string")
}); 
```

日志看起来像这样

```
STATEMANAGER: Entering root ember.js:17420
STATEMANAGER: Sending event 'navigateAway' to state root. ember.js:17172
STATEMANAGER: Sending event 'unroutePath' to state root. ember.js:17172
STATEMANAGER: Sending event 'routePath' to state root. ember.js:17172
STATEMANAGER: Entering root.show 
```

和一个路由器

```
App.Store = DS.Store.extend({
  revision: 4,
  adapter: DS.RESTAdapter.create({
    bulkCommit: false
  })
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T10:59:17.700

您的路线应该是 '/post/:post_id' 而不是 'post/:id'。参数名称由不大写的模型名称、下划线和属性名称组成。

这样做你不需要序列化/反序列化方法，Ember.js 将为你完成这项工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T19:43:26.023

问题是指定`id`为属性。你永远不应该这样做，让 Ember Data 自动处理它。

```
App.Post = DS.Model.extend({
  title:   DS.attr("string"),
  content: DS.attr("string"),
  image:   DS.attr("string")
}); 
```

# jquery - 使用 jQuery 将具有相对路径的外部 HTML 页面加载到 DIV 中

> ID：13812184
> 
> 赞同：4
> 
> 时间：2012-12-11T01:23:10.687
> 
> 标签：jquery, ajax, relative-path, jquery-load, relative-url

如果这个问题太简单，我对 jQuery 比较陌生，请原谅，但我已经搜索了数小时的大量线程，但找不到明确的解决方案。

我有以下文件夹结构：

```
/index.html

/html/pages/page1.html
/html/pages/images/
/html/pages/css/
/html/pages/js/
/html/pages/includes/ 
```

我正在尝试以以下基本方式将**page1.html加载到****index.html**中的DIV 中：

```
$('#content').load('html/pages/page1.html', function () {
   console.log('loaded');
}); 
```

**page1.html**加载良好，但是，它包含多个包含，并且其中的所有内容（图像、CSS、JS 等）都与**页面**文件夹相关（例如：../images/header.jpg），所以它在加载到**index.html**时不会显示，因为现在一切都与**/**或**index.html**相关。

我在某处读到，在**page1.html**中将所有路径设为绝对路径或相对根路径将起作用，还可以添加某种全局路径变量，但是，问题是遗留内容过多，无法更改所有内容。

有没有办法在不修改任何路径的情况下如上所述加载**page1.html ，尽管它们是相对的？**或者有人可以推荐一种以这种方式加载外部内容的有效方式（其他插件、技术）吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T02:38:58.553

如果一切都**与**文件`pages`夹相关，那么您可以使用一些简单的搜索和替换。这不是最佳编程实践，因为它没有应有的灵活（在这种类型的上下文中从相对到绝对取决于许多因素是否正常工作），但它会起作用。

```
$.get('html/pages/page1.html', {}, function(data, status, xhr) {
    var updatedData = data.replace(/\.\.\/(images|css|js)+/g, "http://www.mywebsite.com/html/$1");

    $('#content').html(updatedData);
}); 
```

### 编辑：

您还可以使用代理脚本并将对该文件夹的所有请求重写/路由到代理脚本。我不知道您使用的是什么服务器端技术，但您可以这样做：

使用`.htaccess`（或类似方法），将指向此文件夹的所有请求重定向到代码库中的另一个脚本。在脚本中，查找传入脚本的路径，加载原始输出内容，执行搜索/替换并将内容输出到缓冲区。此外，您可以在服务器上设置缓存，以便客户端缓存请求，从而降低您可能遇到的处理开销（不过，我预计这将是相当小的）。

# c++ - 如何使用 -fPIC 重新编译

> ID：13812185
> 
> 赞同：70
> 
> 时间：2012-12-11T01:23:15.860
> 
> 标签：c++, gcc, compilation, ffmpeg, fpic

我试图按照本[指南](https://ffmpeg.org/trac/ffmpeg/wiki/UbuntuCompilationGuide)在我的 ARM Ubuntu 机器上重新安装我的 ffmpeg。不幸的是，当我编译一个使用这个库的程序时，我得到了以下失败：

```
/usr/bin/ld: /usr/local/lib/libavcodec.a(amrnbdec.o): relocation R_ARM_MOVW_ABS_NC against `a local symbol' can not be used when making a shared object; recompile with -fPIC
/usr/local/lib/libavcodec.a: could not read symbols: Bad value
collect2: ld returned 1 exit status 
```

现在我想像`-fPIC`编译器建议的那样重新编译它，但我不知道怎么做。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-12-11T01:47:36.737

简而言之，该错误意味着您*不能使用静态库与动态库进行链接*。正确的方法是将 a`libavcodec`编译成 a`.so`而不是，因此您尝试构建`.a`的其他库将链接良好。`.so`

最简单的方法是添加`--enable-shared`at`./configure`选项。甚至您可能会尝试完全禁用共享（或静态）库......您选择适合您的！

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-12-11T01:39:06.867

看看[这个页面。](https://wiki.gentoo.org/wiki/Project:AMD64/Fixing_-fPIC_Errors_Guide)

您可以尝试使用以下方法全局添加标志：`export CXXFLAGS="$CXXFLAGS -fPIC"`

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-11T01:36:31.977

在配置步骤之后，您可能有一个 makefile。在这个 makefile 中寻找 CFLAGS （或类似的）。puf -fPIC 最后并再次运行 make 。换句话说，-fPIC 是一个编译器选项，必须在某处传递给编译器。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-08-29T10:09:00.150

在为 Android x86_64 目标平台（使用 Android NDK clang）构建 FFMPEG 静态库（例如 libavcodec.a）时，我遇到了这个问题。当与我的库静态链接时，尽管所有 FFMPEG C -> 目标文件 (*.o) 都是使用 -fPIC 编译选项编译的，但仍然出现了问题：

```
x86_64/libavcodec.a(h264_qpel_10bit.o): 
requires dynamic R_X86_64_PC32 reloc against 'ff_pw_1023' 
which may overflow at runtime; recompile with -fPIC 
```

该问题仅发生在 libavcodec.a 和 libswscale.a 中。

此问题的根源在于**FFMPEG 具有针对 x86* 平台的汇编程序优化，**例如报告的问题原因在**libavcodec/h264_qpel_10bit.asm** -> h264_qpel_10bit.o 中。

在生成 X86-64 位静态库（例如 libavcodec.a）时，看起来汇编文件（例如 libavcodec/h264_qpel_10bit.asm）**使用了一些在与 x86-64 位目标库静态链接时不兼容的 x86（32 位）汇编命令，**因为它们不支持所需的重定位类型。

**可能的解决方案**：

1.  编译所有没有汇编程序优化的 ffmpeg 文件（对于 ffmpeg，这是配置选项：--disable-asm）
2.  生成动态库（例如 libavcodec.so）并将它们动态链接到最终库中

我选择了 1)，它解决了这个问题。

参考：[https ://tecnocode.co.uk/2014/10/01/dynamic-relocs-runtime-overflows-and-fpic/](https://tecnocode.co.uk/2014/10/01/dynamic-relocs-runtime-overflows-and-fpic/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-07-15T13:20:38.567

如果您正在构建共享库但需要与**静态 libavcodec**链接，请添加链接器标志：

```
-Wl,-Bsymbolic 
```

在 cmake 的情况下：

```
set(CMAKE_SHARED_LINKER_FLAGS "-Wl,-Bsymbolic") 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-05-02T13:20:48.267

我在尝试在 Centos 7 上安装 Dashcast 时遇到了同样的问题。修复是`-fPIC`在 x264 Makefile 中每个 CFLAGS 的末尾添加的。然后我不得不同时运行`make distclean`x264 和 ffmpeg 并重建。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-06-20T00:26:09.777

除了这里的好答案，特别是 Robert Lujo 的。

我想说就我而言，我一直在故意尝试静态编译一个 ffmpeg 版本。所有必需的依赖项以及迄今为止所需的其他内容，我已经完成了静态编译。

当我运行`./configure`ffmpeg 进程时，我没有注意到`--enable-shared`它在命令行上。删除它并运行`./configure`只有这样我才能正确编译（ffmpeg 二进制文件的所有 56 mbs）。如果您的意图是静态编译，请检查一下

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2015-11-26T05:13:55.977

在编译之前，请确保“rules.mk”文件正确包含在 Makefile 中或通过以下方式显式包含它：

“源规则.mk”

# sql - 如何在 max() 命令返回的记录中选择另一条数据

> ID：13812187
> 
> 赞同：2
> 
> 时间：2012-12-11T01:23:27.857
> 
> 标签：sql, sql-server, sql-server-2008, tsql, max

感谢您花时间帮助我！我正在尝试让 SQL 做一些我认为对于任何了解 SQL 的人来说都很容易的事情，但此时我正在努力应对。

我有一张像这样的小桌子-

```
Update   Order    UpdateDate                OrderDate
9297    3590    2012-12-06                    2012-12-06 
9298    3590    2012-12-06                    2012-12-06 
9356    3590    2012-12-07                    2012-12-06 
9369    3590    2012-12-08                    2012-12-06 
9381    3590    2012-12-10                    2012-12-06 
```

我的目标是查找过去 3 天内未更新的订单。

我正在尝试做的丑陋版本是这样的 -

```
Select order from orderstable
where cast(max(updatedate)-getdate() as int) >3 
```

这里的目标是让命令返回过去 3 天内未更新的“订单”。我目前的问题是我不知道如何让 SQL 只关注订单的“最新”更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T01:31:11.010

最简单的方法是日期比较：

```
select *
from orderstable ot
where datediff(day, updatedate, getdate()) > 3 
```

我明白了，您对每个订单都有多条记录，并且您想要在过去三天内没有更新的订单。我会用聚合来做到这一点：

```
select order
from orderstable ot
group by order
having min(datediff(day, updatedate, getdate())) > 3 
```

您也可以通过查找过去三天内没有更新的订单来做到这一点：

```
select distinct order
from orderstable
where order not in (select order
                    from orderstable
                    where datediff(day, updatedate, getdate()) <= 3) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T01:57:04.953

首先，我会避免使用 DATEDIFF，因为它不是 sargable：[http ://weblogs.sqlteam.com/dang/archive/2009/03/07/Low-Hanging-Fruit-of-Sargable-Expressions.aspx](http://weblogs.sqlteam.com/dang/archive/2009/03/07/Low-Hanging-Fruit-of-Sargable-Expressions.aspx)

```
 ;WITH MaxOrders AS (
        SELECT Order, MAX(UpdateDate) MaxUpdateDate
        FROM orderstable
        GROUP BY Order

    )

    SELECT Order 
    FROM MaxOrders
    WHERE MaxUpdateDate < DATEADD(day,-3,GETDATE()); 
```

在此示例中，DATEADD 是可搜索的，因为函数中有一个静态值 GETDATE()。如果函数中包含列值，则它不会是 sargable。换句话说，如果您将其更改为：

```
WHERE DATEADD(day,3,MaxUpdateDate) < GETDATE(); 
```

它不再是 sargable，因为在确定标准匹配之前，必须在函数中评估所有列值。这是在 where 子句中使用 DATEDIFF 的问题。它在函数中有列值。这在大数据集上将非常昂贵。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T05:23:24.983

```
DECLARE @T TABLE(
[Update] INT,
[Order] INT,
UpdateDate DATE,
OrderDate DATE
)

INSERT INTO @T VALUES
(9297,3590,'2012-12-06','2012-12-06'),
(9298,3590,'2012-12-06','2012-12-06'),
(9356,3590,'2012-12-07','2012-12-06'),
(9369,3590,'2012-12-08','2012-12-06'), 
(9381,3590,'2012-12-10','2012-12-06'),
(9382,3591,'2012-12-07','2012-12-06'),
(9383,3591,'2012-12-08','2012-12-06'),
(9384,3592,'2012-12-07','2012-12-06'),
(9385,3592,'2012-12-09','2012-12-06'),
(9386,3593,'2012-12-05','2012-12-06'),
(9387,3593,'2012-12-07','2012-12-06')    

--Assuming we don't care about time, cast to DATE to remove time values from GETDATE() function.
--It also assumes that today is inclusive.
;WITH RECENT_UPDATES_CTE
AS (
    SELECT [Order],MAX([UpdateDate]) [LastUpdateDate] FROM @T
    GROUP BY [Order]
)
SELECT DISTINCT T.[Order] FROM @T T
LEFT JOIN RECENT_UPDATES_CTE C ON C.[Order] = T.[Order]
WHERE C.LastUpdateDate <= DATEADD(DAY,-3,CAST(GETDATE() AS DATE)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T01:30:57.120

为什么不使用 getdate() 来获取当前日期？

所以是这样的：

```
SELECT order FROM orderstable
WHERE datediff(day, updatedate, getdate()) > 3 
```

（是的，这不能回答标题中提出的问题 - 但它确实回答了问题正文中提出的问题）

要回答标题中提出的问题，如何：

```
SELECT order FROM orderstable
WHERE datediff(day, orderdate, (select max(updatedate) from orderstable)) > 3 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T08:08:40.830

使用 OVER 子句查找 MAX(UpdateDate)

```
;WITH cte AS
 (       
  SELECT *,
         DATEDIFF(d, MAX(UpdateDate) OVER (PARTITION BY [Order]), GETDATE()) AS diff_date
  FROM orderstable
  )
  SELECT [Update], [Order], UpdateDate, OrderDate
  FROM cte
  WHERE diff_date > 3 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/71b2d/1/0)上的演示[](http://sqlfiddle.com/#!3/71b2d/1/0)

# php - 基于状态的用户信息的 HTML 选择

> ID：13812189
> 
> 赞同：0
> 
> 时间：2012-12-11T01:23:56.937
> 
> 标签：php, html, variables, select, state

```
<select name="state" class="input-small" selected="<? if(isset($_SESSION['user'])){ echo $row_login['state']; }?>">
  <option value="AL">AL</option>
  <option value="AK">AK</option>
  <option value="AZ">AZ</option>
  <option value="AR">AR</option>
  <option value="CA">CA</option> 
```

我正在创建一个用户配置文件编辑部分，并且需要用户预选状态显示为列表默认值。我怎样才能做到这一点？

最好是不涉及 jquery 的东西，因为似乎应该有一个简单的解决方案来解决这个问题。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T01:36:08.280

```
<select name="state" class="input-small">
<?php

$states = array('AL', 'AK', 'AZ', 'AR', 'CA', 'CO', 'CT', 'DE', 'DC', 'FL', 
'GA', 'HI', 'ID', 'IL', 'IN', 'IA', 'KS', 'KY', 'LA', 'ME', 'MD', 'MA', 'MI', 
'MN', 'MS', 'MO', 'MT', 'NE', 'NV', 'NH', 'NJ', 'NM', 'NY', 'NC', 'ND', 'OH', 
'OK', 'OR', 'PA', 'RI', 'SC', 'SD', 'TN', 'TX', 'UT', 'VT', 'VA', 'WA', 'WV', 
'WI', 'WY');

foreach ($states as $state)
{
    echo '<option ';
    if(isset($_SESSION['user']) && $row_login['state'] == $state)
    {
        echo 'selected="selected" ';
    }
    echo 'value="' . $state . '">' . $state . "</option>\n";
}

?>
</select> 
```

只需将您的选项列表替换为上述内容，它将动态创建列表，然后在打印出每个选项时将检查该状态选项是否是用户拥有的选项。如果是，那么它将选择它作为默认值。比必须执行 if() 语句 50 次要容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T01:28:19.930

一个麻烦的方法是，在每个选项上，如果用户的状态等于选项的状态，则回显 selected 。假设用户的状态是 in `$row_login['state'];`，它将是这样的：

```
<option value="AL" <?php if($row_login['state'] == "AL") echo " selected "; ?> >AL</option> 
```

并为每个选项执行此操作。通常你会想以一种非常自动化的方式来做这件事。

# java - Java（处理 1.5.1）：流利的接口@通过泛型的多级继承

> ID：13812190
> 
> 赞同：2
> 
> 时间：2012-12-11T01:24:06.697
> 
> 标签：java, generics, processing, fluent-interface, method-chaining

我尝试在我的 2D 游戏引擎中实现**流畅的界面。**

我的实现的简化示例：

```
public class Sprite<T> {

    protected float x = 0.0;
    protected float y = 0.0;

    public T setPosition(float x, float y) {
        this.x = x;
        this.y = y;
        return (T)this;
    }

}

public class Living<T extends Living> extends Sprite<Living> {

    protected boolean alive = false;

    public T setAlive(boolean alive) {
        this.alive = alive;
        return (T)this;
    }

}

public class Entity<T extends Entity> extends Living<Entity> {

    protected String name = null;

    public T setName(String name) {
        this.name = name;
        return (T)this;
    }

}

Entity entity = new Entity().setPosition(100, 200).setAlive(true).setName("Zombie"); 
```

我不断收到错误消息：**“函数 setAlive(boolean) 不存在。”**

我知道，以相反的方式使用我的方法（以更合乎逻辑的顺序）有效：

```
Entity entity = new Entity().setName("Zombie").setAlive(true).setPosition(100, 200); 
```

而且我知道覆盖每个子类中的任何父 setter 函数都会起作用：

```
public class Entity extends Living {

    protected String name = null;

    public Entity setPosition(float x, float y) {
        return (Entity)super.setPosition(x, y);
    }

    public Entity setAlive(boolean alive) {
        return (Entity)super.setAlive(alive);
    }

    public Entity setName(String name) {
        return (Entity)super.setName(name);
    }

} 
```

但我希望**界面**对“最终用户”尽可能自由/简单，并且代码**尽可能****紧凑**和**干净**。

我不知道我只是搞砸了泛型还是我的漏洞方法完全错误。我希望你能帮忙。我愿意接受任何建议。*（对不起，我的英语不好。）*

**编辑：** 我已经测试了以下方法，**它适用于 Entity 类**。

```
public class Sprite<T> {
...
}

public class Living<T> extends Sprite<T> {
...
}

public class Entity extends Living<Entity> {
...
} 
```

我忘了提，我也需要实例化 Sprite & Living。例如：

```
Living living = new Living().setPosition(50, 50).setAlive(false); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T01:31:09.697

这是对 Java中[奇怪重复出现的模板模式](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)的一次勇敢尝试。问题是您混合了泛型和原始类型，这意味着您没有“关闭模式的循环”。例如您的声明`Living`：

```
public class Living<T extends Living> extends Sprite<Living> 
```

真的应该是：

```
public class Living<T extends Living<T>> extends Sprite<T> 
```

在某些时候，您需要声明一个解析的“叶”类`T`，否则您将无法在不使用原始类型或通配符的情况下实例化和声明这些类型的变量（这违背了模式的目的）。例如：

```
public final class ConcreteEntity extends Entity<ConcreteEntity> 
```

有关实现此模式的更多详细信息，[请](https://stackoverflow.com/questions/7354740/is-there-a-way-to-refer-to-the-current-type-with-a-type-variable/7355094#7355094)参见我的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T01:34:45.907

我认为您的类模型过于复杂，您可以将泛型参数传递给子类，然后显式声明它：

```
public class Sprite<T> {
...
}

public class Living<T> extends Sprite<T> {
...
}

public class Entity extends Living<Entity> {
...
} 
```

# c# - 阻塞函数 ReceiveFrom()

> ID：13812191
> 
> 赞同：1
> 
> 时间：2012-12-11T01:24:15.230
> 
> 标签：c#, sockets, udp, blocking, windows-forms-designer

我正在通过 UDP 写一个聊天。当我尝试从控制台应用程序转到 Windows 窗体时，我遇到了阻塞函数 ReceiveFrom() 的问题。当我尝试创建一个表单并单击一个按钮以使用 ReceiveFrom() 侦听传入数据包时，它只会阻止程序。我正在写这样的东西：

```
private void Listen_button_click(object sender, EventArgs e)
{
      while(true){
         ReceiveFrom(buf, ref clientEP);
         data = buf.ToData(); //convert from bytes to string.
         displayMessageDelegate(data);
         packet = new Packet(acknowlegment);//acknowledgment that packet was received.
         ack = packet.ToStream();
         SendTo(ack, clientEP);//send ack, so client knows everything is ok.
} 
```

我知道我可以使用 TCP，生活会轻松得多，但这样做是我的任务。而且我知道我可以使用非阻塞 BeginReceiveFrom()，但我想知道是否可以使用阻塞函数在 WF 中监听。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T01:29:17.990

您最好使用不同的方法并考虑更好的设计概念，例如 MVC，但您可以将 while 循环包装在任务中。这将允许按钮单击事件完成并将控制权返回给您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T18:41:39.517

我发现阻塞函数和 UI 的问题是通过使用 async 和 await 关键字来解决的。以下示例显示了解决方案：

```
 private async void Listen_button_click(object sender, EventArgs e)
    {
        while (true)
        {
            await Task.Run(() =>
            {
                Thread.Sleep(10000);
                buf = new byte[1024];
                int rcv = clientSock.ReceiveFrom(buf, ref servEP);
                msg = Encoding.ASCII.GetString(buf, 0, rcv);

                this.Invoke((Action)delegate
                {
                    this.dialogTextBox.Text += rcv;
                    this.dialogTextBox.Text += string.Format("server: {0}, rcv: {1}", 
                           msg, rcv) + Environment.NewLine;
                    for (int i = 0; i < buf.Length; i++)
                    {
                        this.dialogTextBox.Text += buf[i].ToString();
                    }
                });
                buf = new byte[1024];
            });
        }
    } 
```

# excel - 如何将 InputBox 值分配给 Header？

> ID：13812195
> 
> 赞同：0
> 
> 时间：2012-12-11T01:24:25.803
> 
> 标签：excel, excel, vba

目前我的代码导致[excel](/questions/tagged/excel "显示标记为“excel”的问题")崩溃。

```
Sub headerDate()
Dim iReply As String

iReply = Application.InputBox("What is the input? ")
With ActiveSheet.pageSetup
    .CenterHeader = ""
    .RightHeader = _
    "                        Doc. No.: " & str(iReply) & Chr(10) & "Version: 2.3 (Modification f)" & Chr(10) & "Valid as of: 12/31/2012  "
End With
Application.PrintCommunication = True
Range("BI2").Select
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T01:39:16.897

我认为您需要将 Str 更改为 Cstr：

```
"Doc. No.: " & CStr(iReply) & Chr(10) & "Version: 2.3 (Modification f)" & Chr(10) ... 
```

# php - 在php中返回空数组

> ID：13812196
> 
> 赞同：13
> 
> 时间：2012-12-11T01:24:40.420
> 
> 标签：php, arrays

我有一个返回数组的函数，并传递给 foreach 即

```
foreach(function() as $val) 
```

由于我要返回的数组是在一系列 if 语句中声明的，因此如果所有 if 语句都被评估为 false，我需要返回一个空数组。这是正确的方法吗？

```
if (isset($arr))
  return $arr;
else 
  return array(); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-11T01:27:12.617

我建议`$arr = array();`在函数的最顶部声明​​，这样您就不必担心它。

如果您在返回前立即进行检查，我*不*建议您这样做`isset`。您使用的方式`foreach`取决于返回的数组。例如，如果`$arr`设置为一个数字，那么它仍然有效。您还应该检查`is_array()`. 例如：

```
if (isset($arr) && is_array($arr))
    return $arr;
else 
    return array(); 
```

或者在一行中：

```
return (isset($arr) && is_array($arr)) ? $arr : array(); 
```

但是，就像我说的，我建议改为在最顶部声明​​数组。它更容易，您不必担心。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-03-03T14:12:21.463

为避免复杂性，只需

```
return []; 
```

# ruby-on-rails - 在运行测试/单元测试时运行 rspec

> ID：13812197
> 
> 赞同：1
> 
> 时间：2012-12-11T01:24:52.793
> 
> 标签：ruby-on-rails, ruby, rspec

在我们当前的应用程序中，我们只运行 Test::Unit 测试。所以我们这样做`rake test`了，它运行了所有被测测试。我还添加了一个 rspec 目录，我希望 rspecs 在我这样做时运行，`rake test`而不是手动运行`rspec spec`.

知道如何将两者结合起来`rake test`吗？

例如，我们有我们`TestTask`的宝石`vendor/gems/shoulda-2.10.3/Rakefile:Rake::TestTask.new do |t| ...`

`application.rb`我们有

```
config.generators do |g|
  g.test_framework :shoulda
  g.fallbacks[:shoulda] = :test_unit
  g.fixture_replacement :factory_girl
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T02:03:34.167

在 Rakefile 中添加以下行，它将运行`spec`and`test`任务，当您执行`rake test`

```
task :test => :spec 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T02:01:17.307

RSpec 实际上可以为您运行您的 Test::Unit 案例，只是`require 'spec/test/unit'`

# jquery - jquery mobile复选框没有被选中

> ID：13812199
> 
> 赞同：0
> 
> 时间：2012-12-11T01:25:31.237
> 
> 标签：jquery, css, jquery-mobile

我正在显示用户可以从中选择的项目列表。（多选）。我的要求是 1）如果选择了一个项目，则应突出显示整行，而不仅仅是复选框图标，例如）**http://jquerymobile.com/demos/1.0a4.1/docs/forms/forms-checkboxes.html（垂直分组的复选框**）2）不应显示复选框图标

[代码](http://jsfiddle.net/priyaa2002/q6k9h/6/) [直播版](http://haripriyaa.zymichost.com/ot/filter_03.html)

```
<div id="content" data-role="content">
        <div id="list-checkboxes" data-role="fieldcontain">
            <fieldset data-role="controlgroup" data-type="vertical"data-theme="m">
                <label for="chb_1" data-theme="m" >Car</label>
                <input type="checkbox" name="chb_1" id="chb_1" class="custom" />
                <label for="chb_2">Van</label>
                <input type="checkbox" name="chb_2" id="chb_2" class="custom" />

            </fieldset>    
        </div><!-- /content --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T07:39:16.690

您可以按如下方式覆盖 css 以实现此目的：

```
#verticalSelect .ui-checkbox{
   clear:both;
    /*float:none;*/

}

#verticalSelect .ui-checkbox .ui-btn{
   border-radius:0;
    border-top-width:0;

}

#verticalSelect .ui-checkbox:first-of-type .ui-btn{
   border-top-left-radius:0.6em;
    border-top-right-radius:0.6em;
    border-top-width:1px;

}

#verticalSelect .ui-checkbox:last-of-type .ui-btn{
   border-bottom-left-radius:0.6em;
    border-bottom-right-radius:0.6em;
} 
```

这个想法是删除每个项目的浮动并调整边框样式。

完整演示在这里 - [http://jsfiddle.net/c59FN/](http://jsfiddle.net/c59FN/)

# git - Git 要求输入密码。

> ID：13812200
> 
> 赞同：10
> 
> 时间：2012-12-11T01:25:34.493
> 
> 标签：git, github, ssh, passwords

我正在尝试将我的计算机设置为使用我的 github 帐户，这就是我所拥有的：

在我保存项目的本地：

```
 $ git remote -v 
 origin ssh://git@github.com/djleprechaunz/OscProject.git (fetch)
 origin ssh://git@github.com/djleprechaunz/OscProject.git (push) 
```

和

```
ssh-add -l
2048 [key1] dave@mycomputername (RSA)
2048 [key2] myemail@gmail.com (RSA) 
```

（抱歉，不确定发布整个密钥的安全性）。

当我尝试

```
git fetch 
```

它弹出一个对话框'应用程序想要访问私钥'myemail@gmail.com'，但它已被锁定'

我应该在这里做什么？我尝试输入我的 github 密码，但这不起作用。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-11T01:29:07.463

当提示输入密码时，您需要输入在创建 ssh 密钥时输入的密码

# java - Java Swing：延迟后更改文本

> ID：13812205
> 
> 赞同：4
> 
> 时间：2012-12-11T01:25:48.827
> 
> 标签：java, swing, timer, delay

基本上，我有这个游戏，一旦猜对了答案，它就会用一个新单词开始一个新游戏。我想显示`Correct!`，但三秒钟后，将其更改为空字符串。我怎么做？

**我的尝试：**

```
if (anagram.isCorrect(userInput.getText()))
    {

        anagram = new Anagram();
        answer.setText("CORRECT!");
        word.setText(anagram.getRandomScrambledWord());
        this.repaint();
        try
        {
        Thread.currentThread().sleep(3000);
        }
        catch (Exception e)
        {
        }
        answer.setText("");

    } else
    {
        answer.setForeground(Color.pink);
        answer.setText("INCORRECT!");
    } 
```

**编辑：**

**我的解决方案：**

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt)
    {
        // TODO add your handling code here:
    if (anagram.isCorrect(userInput.getText()))
    {
        answer.setText("CORRECT!");

        ActionListener taskPerformer = new ActionListener()
    {
    public void actionPerformed(ActionEvent evt)
    {
        anagram = new Anagram();
        word.setText(anagram.getRandomScrambledWord());
        answer.setText("");
        userInput.setText("");
    }
    };
    Timer timer = new Timer(3000, taskPerformer);
    timer.setRepeats(false);
    timer.start();
    } else
    {
        answer.setForeground(Color.pink);
        answer.setText("INCORRECT!");
    }
    } 
```

我不确定，但我希望我遵循 MadProgrammer 的建议，而不是阻止事件本身，而是阻止新线程。我也会查找Java Timer。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T01:39:09.810

Swing 是一个事件驱动的环境。当您阻塞 Event Dispatching Thread 时，无法处理任何新事件。

你不应该用任何耗时的过程（例如 I/O、循环或`Thread#sleep`例如）阻塞 EDT。

您可能希望阅读[The Event Dispatch Thread](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)以了解更多信息。

相反，您应该使用`javax.swing.Timer`. 它将`ActionListener`在给定的延迟后触发。

这样做的好处是该`actionPerformed`方法是在事件调度线程的上下文中执行的。

看看[这个](https://stackoverflow.com/questions/13691339/adding-a-timer-and-displaying-label-text/13691413#13691413)或[这个](https://stackoverflow.com/questions/13405928/change-jlabel-text-from-another-class/13407029#13407029)或[这个](https://stackoverflow.com/questions/13203415/how-to-add-fade-fade-out-effects-to-a-jlabel/13203744#13203744)或[这个](https://stackoverflow.com/questions/12767367/how-could-i-add-a-simple-delay-in-a-java-swing-application/12767473#12767473)的例子

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-24T17:05:41.133

它在 3 秒后工作..

```
ActionListener taskPerformer = new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent ae) {
            statusbar.setText("Status");
        }
    };
    Timer timer = new Timer(3000, taskPerformer);
    timer.setRepeats(false);
    timer.start(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T01:30:55.797

如果这些代码在事件处理程序中，那么您正在阻止 UI 线程，并且它不会工作，因为 UI 更新只会在您完成事件处理程序中的工作后发生。

您应该创建另一个线程来完成“睡眠 3 秒，更改文本字段，并触发重绘”的工作。使用 Timer 或类似的实用程序是实现我所描述的最简单的方法。

# graphviz - dot (graphviz): 什么是“type=s”？

> ID：13812213
> 
> 赞同：3
> 
> 时间：2012-12-11T01:26:43.900
> 
> 标签：graphviz, dot

我一直在示例中看到这一点（例如乙烷分子），但从未解释过。

是什么`[type=s]`？有哪些不同的类型？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T02:24:54.303

> 我一直在例子中看到这一点（比如乙烷分子）......

我假设您指的是[维基百科 DOT 语言页面](https://en.wikipedia.org/wiki/DOT_language)上的乙烷分子示例：

```
 graph ethane {
     C_0 -- H_0 [type=s];
     C_0 -- H_1 [type=s];
     C_0 -- H_2 [type=s];
     C_0 -- C_1 [type=s];
     C_1 -- H_3 [type=s];
     C_1 -- H_4 [type=s];
     C_1 -- H_5 [type=s];
 } 
```

一些有趣的事情：

*   Wikipedia 页面上属性的使用`type`可以追溯到 2004 年，并且是[该页面的第一个版本，](https://en.wikipedia.org/w/index.php?title=DOT_language&oldid=3021207)与今天的版本几乎相同。

*   [当前的 graphviz 文档](http://www.graphviz.org/content/attrs)中没有`type`列出属性。

*   我安装了 graphviz 1.14，它的 DOT 文档（大约 2002 年）没有`type`作为属性列出。

*   我找到了 1996 年的 graphviz 1.7 的 DOT 文档。它也没有列出属性`type`。

*   从图中删除`type`属性或更改它们的值不会影响当前版本的 graphviz 或 1.14 版的输出。

随着时间的推移，各种属性发生了变化，这可能`type`是类似 的旧名称[`tailPort`](http://www.graphviz.org/content/attrs#dtailport)，它接受[`portPos`](http://www.graphviz.org/content/attrs#kportPos)输入以指示节点的哪一侧附加边（“s”表示“south”，“n”表示“north” “， ETC）。也许它用于我没有文档的版本中。或者它根本就没有被使用过，人们只是忠实地从维基百科上复制了它。;)

# python - Python 字符串操作

> ID：13812220
> 
> 赞同：0
> 
> 时间：2012-12-11T01:27:34.160
> 
> 标签：python, string

这里需要一些棘手的（对我来说）字符串操作。我有以下数据：

```
Candidate solution = [4, 2, 3]  (this can be any of {1,2,3,4}) 
```

需要根据下面的标准（更远）替换部分行。此处仅显示 3 个示例行。要替换的字符串显示在下面代码中的 < b > 粗体标记内。< b > 标签不是原件的一部分。

```
Orig. Line # 34 ['T10', 'M312', 'P10', 'Z3710', 'CL=L1', '<b>RH=1</b>']
Orig. Line # 37 ['L20B', '<b>CVS=1', 'HTYP=16', 'MLV=25</b>']
Orig. Line # 48 ['L115B', '<b>CVS=1', 'HTYP=16', 'MLV=25</b>'] 
```

标准：

```
if Candidate[i] == 2:
 modified line37 = "L20B, <b>CFIXD(0,1,0)</b>"
 # so, replaced CVS=1, HTYP=16, MLV=25 with CFIXD(0,1,0)

if Candidate[i] == 3:
 modified line48 = "L115B, <b>CCS=1</b>"

if Candidate[i] == 4:
 modified line34 = "T10,M312,P10,Z3710,CL=L1, <b>CVS=1,HTYP=16,MLV=25</b>"

if Candidate[i] == 1:
 modified linexx = whatever comes here 
```

因此，任务是根据在原始行中找到的内容，用“ **XY”或“CXY** ”替换给定行中的子字符串（或行尾的子字符串） 。

原始行可能有几种形式，如下所示：

```
1a. T15,M1,P2,X4'6",CL=3,<b>FIXD(0,1,0)</b>
  --OR--
1b. F15,<b>CFIXD(0,1,0)</b> 
```

因此，可以看出，“FIXD()”可以显示为项目 1a 或 1b。主要的是，替换取决于已经存在的内容：“FIXD”或“CFIXD”或“VS”或“CVS”（16 个变体）。

显示了更多的行变体（要替换的实际 str 显示 b/w 标签）：

```
2a. T55,P3,X3'0",CL=2,<b>G,MU=0.500,STIFF=Rigid</b>
2b. T55,P3,X3'0",CL=2,<b>G,MU=0.500,STIFF=Rigid,GGAP=0.500</b>

3a. T123,JS,X2'0",CFFOR=5000,FTOR=500,WGT=0.5,<b>LS(0.000,None),DV(0.0000,1.0000,0.0000),STIFF=Rigid</b>
3b. L130,<b>CLS(0.000,0.250),DV(0.0000,1.0000,0.0000),STIFF=Rigid</b>

4\. T124,X1'0",<b>CUS(1,0,0)</b>

5\. T130,X1'0",Y1'0",<b>CRH=1</b>

6\. F35,<b>CCS=1</b>

7\. L40A,<b>CK=10000,DV(0.0000,1.0000,1.0000</b> 
```

我的方法倾向于使用**XY**或**CXY**识别子字符串，删除行尾的所有内容，并替换为新字符串。我对 Python 的了解还不够，所以不能聪明地使用它。

感谢您的输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T04:02:42.460

希望我能正确理解这个问题。

您应该能够足够轻松地使用 string.replace() 函数。假设这些实际上是字符串，而不是列表，您可以这样做：

```
if Candidate[i] = 2:
    if "CVS=1', 'HTYP=16', 'MLV=2" in input:
        output = input.replace("CVS=1', 'HTYP=16', 'MLV=25", "CFIXD(0,1,0)")
        continue
    if "VS=1', 'HTYP=16', 'MLV=2" in input:
        output = input.replace("VS=1', 'HTYP=16', 'MLV=25", "FIXD(0,1,0)")
        continue

if Candidate[i] = 3:
    if "CVS=1', 'HTYP=16', 'MLV=25" in input:
        output = input.replace("CVS=1', 'HTYP=16', 'MLV=25", "CCS=1")
        continue 
```

希望你明白这一点。

# vb.net - 如何检查控制键是否被释放

> ID：13812221
> 
> 赞同：0
> 
> 时间：2012-12-11T01:27:42.747
> 
> 标签：vb.net

我正在搜索如何检测是否释放了控制键而不释放其他键（在文本框中）。这是我到目前为止提出的：

```
Private Sub TextBox1_KeyUp(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyEventArgs) Handles TextBox1.KeyUp
    If e.KeyCode = 17 Then
        GetTick = System.Environment.TickCount
    End If
End Sub 
```

这项工作也可以在 Ctrl+c 等组合键中触发...
用什么替换 17？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T01:49:20.313

我有一段时间没有使用 VB，但这里有一些东西可能会对你有所帮助。您可以尝试创建一个布尔变量（真假），称为 ctrl 或类似的东西。在第一次按下控制键时将其设为真，然后在他们按下控制键时将其设为假。然后，您可以创建另一个变量来存储所有称为 keycodes 的键码或其他东西。当按下除控件之外的键时，将键码设为 -1。这是一些示例代码：

```
 Dim kys=-1
Dim ctrl=false
Private Sub TextBox1_KeyUp(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyEventArgs) Handles TextBox1.KeyUp
    if e.KeyValue = Keys.Control then
        ctrl=false
    else
        kys=-1
    end if
End Sub
Private Sub TextBox1_KeyDown(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyEventArgs) Handles TextBox1.KeyDown
    if e.KeyValue = Keys.Control then
        ctrl=true
    else
        kys=e.getKeyValue
    end if
    'Control c
    if ctrl=true & kys=Keys.c then
        MsgBox("It Worked!")
    end if
End Sub 
```

顺便说一句，对于这样的事情，e.KeyValue 通常比 e.keyCode 更好，它更容易使用，因为您可以只使用“Keys”而不是查找所有键码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T01:30:28.400

您是否尝试过 e.Control，如下所示：

```
Private Sub TextBox1_KeyUp(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyEventArgs) Handles TextBox1.KeyUp
     If e.Control Then
        GetTick = System.Environment.TickCount
     End If
End Sub 
```

改编自： http: [//www.devcurry.com/2009/10/detecting-ctrl-and-shift-keys-on-form.html](http://www.devcurry.com/2009/10/detecting-ctrl-and-shift-keys-on-form.html)

# c# - 如何解决标签的某些文本已被文本框隐藏的问题？

> ID：13812222
> 
> 赞同：1
> 
> 时间：2012-12-11T01:27:45.790
> 
> 标签：c#, .net, winforms, textbox, label

![在此处输入图像描述](../Images/c98f92ab15d2a1a889ef3207bf4a6beb.png)

标签的文本以编程方式编写：

```
public Form1()
{
    InitializeComponent();
    label.Text = data from database;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T03:57:49.967

您可以设置`Dock`每个控件的属性。根据您的布局，您可以将它们中的每一个设置为并将标签`DockStyle.Left`的属性设置为 true。`AutoSize`如果您不能按原样停靠它们，您可以将它们放在面板内并停靠在面板内。在面板内部时，您还可以利用对接的填充样式（这也可以在面板外部工作，但取决于布局中的其余控件，它可能会将它们搞砸。您可以在面板内部设置标签到`DockStyle.Left`和文本框到`DockStyle.Fill`（占用其余空间）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T01:45:07.853

设置标签的MaximumSize.Width 属性，使其不能与TextBox 重叠。如果您没有足够的垂直空间，则还要设置 MaximumSize.Height 属性。然后，您还应该考虑将 AutoEllipsis 设置为 True，以便用户可以清楚地看到文本被截断，工具提示会显示全文。

确定MaximumSize 正确值的一种简单方法是暂时关闭AutoSize。将标签尺寸调整为不重叠的最大尺寸。将大小复制/粘贴到 AutoSize。或者把它关掉。

# android - 如何使用 FragmentStatePagerAdapter 在分页中重新创建片段（onCreate）

> ID：13812223
> 
> 赞同：1
> 
> 时间：2012-12-11T01:27:51.937
> 
> 标签：android, android-fragments, android-pageradapter

我陷入了一种奇怪的情况，我希望在执行分页时重新创建片段。我正在使用 FragmentStatePagerAdapter。

例如，如果我在 2 个不同的片段中使用 2 个搜索栏，我希望第二个片段中的搜索栏根据第一个片段中搜索栏的值进行自我更新。

如果没有分页方法，我将使用一个静态全局变量，该变量在创建片段时更新搜索栏。

因此，当我使用带有选项卡的操作栏时，我会得到预期的结果，因为当我更改选项卡时，每次都会新创建片段。

现在，如果我使用分页方法在这两个片段之间滑动，片段状态将被保留，并且它们不会按预期更新，因为根本没有调用 onCreate。

我用过

```
@Override
public int getItemPosition(Object object) {
return POSITION_NONE;
} 
```

在我的扩展`FragmentStatePagerAdapter`类中，但没有用。

有什么办法解决这个问题。

请帮忙！

# php - PHP SoapClient 请求作为客户端 IP 而不是服务器 IP 接收

> ID：13812226
> 
> 赞同：6
> 
> 时间：2012-12-11T01:28:11.537
> 
> 标签：php, soap

我正在尝试在另一个域上运行 SOAP 方法，该方法必须从列入白名单的 IP 地址接收，但 WSDL 似乎以某种方式认为请求来自客户端而不是服务器。该调用从表单收集信息，使用 AJAX 发布到 PHP 函数，该函数将字段格式化为 API 友好格式，然后通过 PHP SoapClient 发送。

我认为最好的方法是调查使用 SoapClient 发送的标头，但标头没有列出任何 IP 地址（主机、连接、用户代理、内容类型、SOAPAction 和内容长度）。

首先，我阅读了 SOAP 端点的文档。它显然没有指定要传递的任何特定参数，这无论如何都是没有意义的，因为我只能伪造一个 IP 地址。然后，我阅读了[PHP SoapClient](http://php.net/manual/en/class.soapclient.php)的文档。有趣的是，我找不到设置 IP 地址的确切位置，但我确实找到了一条提到 using 的评论`'stream_context'`，但也没有运气。

我还记录了每个请求，包括`$_SERVER['SERVER_ADDR']`和`$_SERVER['REMOTE_ADDR']`，它们都按预期报告 IP 地址；他们的技术支持告诉我他们正在收到来自`'REMOTE_ADDR'`价值的请求。

我尝试发送一个简单的请求，预计会收到除 IP 地址之外的其他错误，但我不断收到 IP 地址问题。

有什么方法可以更确定我正在使用正确的（服务器）IP 发送 SOAP 请求？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-22T10:04:16.060

好吧，我想通了——至少就我自己的情况而言。您阅读的 PHP 手册中的注释是正确的（假设我们谈论的是同一个），但是，我还需要在我的 IP 地址中包含端口。所以我最终使用的代码是：

```
$options = array('socket' => array('bindto' => 'xxx.xxx.xx.xxx:0'));
$context = stream_context_create($options);
$client = new SoapClient($url, 
    array('trace' => 1, 'exception' => 0, 'stream_context' => $context)); 
```

看，以前，我没有包含“：0”，我只是包含了 IP 地址。所以不要忘记这一点！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-25T20:36:04.537

这是一个棘手的问题，因为这个问题并没有真正清楚地描绘出实际涉及哪些系统以及在何处以及使用哪种 IP 白名单。

使用 SOAP 时，有关服务的主要信息源包含在 WSDL 资源中。它应该是通过HTTP请求获得的，如果主资源的XML有`xi:include`元素，它可能会触发额外的HTTP请求。所有这些请求都源自充当 SOAP 客户端的系统。您不能在此处选择要使用的 IP 地址（除非您有一个非常奇特的设置，即有两个接口都有到目标系统的有效路由，并且选择正确的 IP 是应用程序的任务 - 我不认为这个这里就是这种情况，我不再考虑它了——你需要为此配置一个[流上下文](http://de3.php.net/stream_context_create)，设置[“bindto”](http://de3.php.net/context.socket.php)选项，并将其传递给 SoapClient）。

在 WSDL 中，包含了真正的 SOAP 服务器的 URL。请注意，服务器本身可能位于与 WSDL 描述完全不同的域中，尽管这样的设置也不常见。您可以通过将选项数组传递给`SoapClient`带有条目的条目来覆盖该位置`"location" => "http://different.domain.example/path/to/service"`。这不会改变 WSDL 资源的加载，但是对 SOAP 服务的所有请求都会转到那个不同的基本 URL。

> 该调用从表单收集信息，使用 AJAX 发布到 PHP 函数，该函数将字段格式化为 API 友好格式，然后通过 PHP SoapClient 发送。

这里提到了很多客户端和服务器。提到了 AJAX，这让我相信涉及到浏览器。这是系统 1，充当客户端。一个请求被发送到一些 PHP。这个目标是系统 2，在这里充当服务器。它对其进行转换，并充当客户端，将 SOAP 请求发送到充当另一台服务器的系统 3。

那么白名单在哪里呢？如果它在系统 3 上，它必须列出系统 2 使用的 IP。请注意，每台联网计算机都有多个 IP 地址：至少来自该网络设备的 IP 地址加上 127.0.0.1。使用 IPv6，每台设备甚至有多个地址。在这里使用`$_SERVER['SERVER_ADDR']`并没有真正的意义 - 此外，传输方式的系统，如透明代理，也可能影响 IP。您不应使用 SERVER_ADDR 作为白名单的条目。您应该真正检查 shell 上的网络设置，以了解使用了哪个网络设备，以及它具有什么 IP。或者询问您要联系的服务器以检查他们看到的 IP。

> 我还记录了每个请求，包括`$_SERVER['SERVER_ADDR']`和`$_SERVER['REMOTE_ADDR']`，它们都按预期报告 IP 地址；他们的技术支持告诉我他们正在接收来自“REMOTE_ADDR”值的请求。

这是奇怪的事情。系统 2 上的 SERVER_ADDR 和 REMOTE_ADDR 已按预期设置。我将其读为 REMOTE_ADDR 是系统 1 的 IP，而 SERVER_ADDR 是系统 2 的 IP。但是系统 3 看到系统 1 的 IP？这里发生了什么？我真的很想从原始海报中获得更多反馈，但这个问题已经有半年了。

并且它没有对所经历的“IP地址问题”进行适当的描述。他们是怎么看的？是“连接失败”的超时，还是任何适当的 HTTP 拒绝以及触发 SoapFault 的某些 4xx 状态代码？只有描述得更好，才能真正解决这个问题。

然而，我确实怀疑可能涉及复杂的代码，而真正的 SOAP 请求实际上是由浏览器/系统 1 发送的，因为系统 2 上生成的 XML 被镜像回系统 1，然后发送到系统 3。它至少可以解释为什么在系统 3 上可以看到系统 1 的 IP。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T07:43:01.947

有同样的问题。你有两个解决方案。两者都需要额外的步骤来调用 Web 服务。

1) 使用[file_get_contents](http://php.net/manual/en/function.file-get-contents.php)访问通过 php soap 实际询问 WS 的页面。例子：

```
public function test() {            
    $result = file_get_contents('http://your.domain.com/pages/php-soap?params=your-params');
    header("Content-type: text/xml; charset=utf-8");
    echo $homepage;         
} 
```

2) 将[CURL](http://php.net/manual/en/book.curl.php)用于相同目的。

这样，您将服务器 ip 传递给 web 服务。您还可以通过检查 php-soap（此示例）调用者的 ip（在您的情况下为服务器 ip，这是唯一的）来保护您的页面。

又快又脏。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T02:20:07.747

好的，所以我发现无法获取服务器IP而不是客户端IP。很不幸...

我想您将不得不使用登录/通行证来跟踪凭据

# php - 我怎样才能让我的画廊对每个用户看起来都不一样？

> ID：13812230
> 
> 赞同：0
> 
> 时间：2012-12-11T01:28:25.027
> 
> 标签：php, codeigniter, gallery

再次嗨 :) 我试图让每个用户都能够将他们自己的画廊版本上传到他们自己的个人资料中，但是当我这样做时，每个个人资料中都会出现相同的画廊。由于尝试执行此操作，不仅会出现相同的画廊，而且还会出现此错误：严重性：警告

消息：为 foreach() 提供的参数无效

我还打算将每个图库图像加载到数据库中每个用户的图库中，并且图像已经正确存储在我的文件上传目录中

这是我的画廊控制器：

```
class Gallery extends CI_Controller {

function index()
{
    $username = $this->session->userdata('username');
    $image = $this->session->userdata('images');

    $this->load->model("gal_model");

    if($this->input->post('upload'))
    {

        $this->gal_model->do_upload();
        $this->gal_model->putGalleryImage($username, $image);

    }

    $viewData['username'] = $username;

    $data['images'] = $this->gal_model->get_images();
    //var_dump($data);

    $this->load->view('shared/header');
    $this->load->view('gallery/galtitle', $viewData);
    $this->load->view('shared/nav');
    $this->load->view('gallery/galview', $data);
    $this->load->view('shared/footer');

} 
```

这是我的画廊模型：

```
 class Gal_model extends CI_Model
   {
var $gallery_path;
var $gallery_path_url;

function Gal_model()
{
    parent::__construct();

    $this->gallery_path = 'web-project-jb/assets/gallery';
    $this->gallery_path_url = base_url().'web-project-jb/assets/gallery/';
}   

function exists($username)
{
    $this->db->select('*')->from("gallery")->where('user', $username);
    $query = $this->db->get();

    if ($query->num_rows() > 0)
    {

        return true;
        /*
         echo "user $user exists!";
        $row = $query->row();
        echo " and his profileimage is $row->profileimage";
        */
    }

    else

    {

        return false;
        //echo "no such user as $user!";
    }

}

function do_upload ()
{
   $config = array(
  'allowed_types' => 'gif|jpg|jpeg|png',
  'upload_path' => $this->gallery_path,
  'max_size'   => 10000     
            );

    $this->load->library("upload", $config);
    $this->upload->do_upload();
    $image_data = $this->upload->data();

    $image = 'gallery_path'.$image_data['file_name'];

    $data['image'] = 'gallery_path'.$image_data['file_name'];

    $username = $this->session->userdata('username');

    $this->gal_model->putGalleryImage($username, $image);

    $config = array(
        'source_image'  => $image_data["full_path"],
        'new_image'     => $this->gallery_path. '/thumbs',
        'maintain_ration'   => true,
        'width' => 150,
        'height' => 100     

            );

    $this->load->library("image_lib", $config);
   $this->image_lib->resize();
}

function get_images()
{
    $files = scandir($this->gallery_path);
    $files = array_diff($files, array('.', '..', 'thumbs'));

    $images = array();

    foreach ($files as $file){
        $images[] = array(
            'url'   => $this->gallery_path_url.$file,
            'thumb_url' => $this->gallery_path_url.'thumbs/'.$file

                );

    }

    return $images;
}

function putGalleryImage($username, $image)
{

    $record = array('user' => $username, 'galleryimage' => $image);
    $this->session->set_userdata($image);
    if ($this->exists($username))
    {
        $this->db->where('user', $username)->update('gallery', $record);

    }
    else
    {
        $this->db->where('user', $username)->insert('gallery', $record);

    }

   }

   } 
```

这是我的画廊视图：

```
 <div id="gallery">

   <?=if (isset($images)): 
   foreach($images as $image): ?>
   <div class="thumb">
       <a href="<?php echo $image['url']; ?>">
          <img src ="<?php echo $image['thumb_url']; ?>"/>
       </a>  
       <br>
   </div>
<?php endforeach; else:  ?>
    <div id = "blank_gallery">Please upload an Image</div>
<?php endif; ?> 
```

```
 <?=form_open_multipart('gallery');?>
    <?=form_upload("userfile");?>
    <?=form_submit('upload', 'Upload')?>
    <?=form_close();?> 
```

再次感谢大家的帮助，我只需要知道正确的方法就可以了:)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T02:31:55.557

`Invalid argument supplied for foreach()`如果您尝试对不是数组的变量执行 foreach，则可能会发生这种情况。要删除该警告消息，请将图库视图更新为：

```
<div id="gallery">
   <?=if ( is_array($images) && (count($images)>0) ): 
       foreach($images as $image): ?>
           <div class="thumb">
               <a href="<?php echo $image['url']; ?>">
                  <img src ="<?php echo $image['thumb_url']; ?>"/>
               </a>  
               <br>
           </div>
        <?php endforeach;?>
    <?php else:  ?>
        <div id = "blank_gallery">Please upload an Image</div>
    <?php endif; ?>
<div> 
```

我不熟悉 CI，但是`$images`从哪里获取值？

# mongodb - 如何为 MongoDB 选择正确的分片键

> ID：13812233
> 
> 赞同：1
> 
> 时间：2012-12-11T01:29:08.760
> 
> 标签：mongodb, sharding

我的文档结构是：

```
"_id": ObjectId("50c41fae0e708237dc7a5187"),
"uid": "999",
"appname": "authentication",
"activityId": "login",
"activityName": "login",
"date": ISODate("2012-12-09T05: 20: 46.117Z"),
"yearmonth": "201212" 
```

uid 是其他应用程序从 RDMS 序列生成的用户 ID。yearmonth 是我在应用程序中创建的人工字段，仅用于更好的分片键。

写入模式：当用户登录或在站点上执行特定操作时，我将事件写入 mongoDB。这意味着 uid 是相对随机的，具有非常高的基数。对于同一个 uid，我可以编写数百个事件。

读取模式：大多数查询都基于 uid 作为第一个查询参数。{uid:"9999",date:{$gt: ....}, activityId:'login'}

我最初的分片键是 {uid:1, date:1}。- 如果任何一个 uid 有太多文档，则提供良好的查询隔离并具有可拆分的块。现在，基于[如何选择分片键](http://www.kchodorow.com/blog/2011/01/04/how-to-choose-a-shard-key-the-card-game/)：纸牌游戏文章和一些网络研讨会和论坛上的评论，我意识到更好的密钥应该是 {coarse timestamp:1 , search criteria:1} 。想法是为分片键提供更好的局部性以帮助提高写入性能。所以我创建了 yearmonth 字段并考虑将我的分片键更改为 {yearmonth:1, uid:1}

问题是：我是否因为更改而松散了查询隔离和读取操作的性能？我的查询参数将不再匹配分片键的第一个元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T18:57:12.623

我会坚持使用 uid，因为这是您将用来获取数据的密钥。

**分片键**- uid

尤其是当它是基于随机 uid 的事件插入和读取时，将 uid 保留为 shard key 将是非常理想的。

当块变大时，**MongoDB**中的平衡器将自动平衡不同分片服务器上的块。所以你也在这里（因为自动平衡会照顾一些分片服务器变得太大）。

希望这可以帮助。

# jquery - 在模式关闭时设置本地存储

> ID：13812235
> 
> 赞同：1
> 
> 时间：2012-12-11T01:29:10.790
> 
> 标签：jquery, html, dom, modal-dialog, local-storage

我在尝试将本地存储键设置绑定到模态关闭对话框时遇到了麻烦。我发现了几篇很棒的文章，详细介绍了挂钩到封闭对话框以及设置本地存储密钥的方法。但是，没有一篇文章详细说明了我试图分类的确切问题。

我试图完成的是首先检查浏览器是否支持localstorage，如果是，则检查是否已经存在localstorage键，如果存在键，则从DOM中删除模态对象，否则，设置localstorage键用户单击模态关闭对话框。

到目前为止，这是我想出的：

```
$(document).ready(function() {
  if('localStorage' in window) && window['localStorage'] !== null){
    var key = 'test';
    if(localStorage.getItem(key) !== null){
      $('#mainform').remove('');
    }
    else {
      if $('#mainform).bind('dialogclose', function(event, ui) {
        $('#mainform').localStorage.setItem(key, on);
      }
    }
  }
});​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T01:31:56.413

```
$(function() {
    $('#mainform').on('dialogclose', function(event, ui) {
        if ('localStorage' in window) {
            if ( localStorage.getItem('test') ){
                $(this).remove();
            } else {
                localStorage.setItem('test', true);
            }
        }
    });
});​ 
```

[**MDN**](https://developer.mozilla.org/en-US/docs/DOM/Storage)有一个用于 localStorage 的 polyfill，因此它会自动回退到 cookie。

# algorithm - 在网络流图中从接收器转到图节点

> ID：13812237
> 
> 赞同：-1
> 
> 时间：2012-12-11T01:29:33.747
> 
> 标签：algorithm

我通常知道您在网络流图中从源到接收器，但我知道有特定的算法可以从接收器到网络流图中的所需节点（不包括源）。有人可以建议一种可以做到这一点的算法吗？自从我上算法课以来已经有一段时间了，我对如何进行这门课程有点生疏了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T05:40:01.280

如何从所需节点向具有无限容量的接收器添加一条新边。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T13:33:51.093

如果您想找到从汇到顶点 A 的流，只需设置`new_source := sink`并`new_sink = A`运行您选择的算法。

# actionscript-3 - 视频设置超时 AS3

> ID：13812240
> 
> 赞同：1
> 
> 时间：2012-12-11T01:29:49.033
> 
> 标签：actionscript-3, webcam, settimeout

我想体验一下网络摄像头，所以我试图 setTimeout 到 addChild(video) 以使视频在用户接受共享他的网络摄像头的 5-7 秒后出现，这是我的代码：

```
 import flash.media.Camera;
  import flash.media.Video;

var camara:Camera;
var video:Video;
camara = Camera.getCamera();

camara.setMode(980,640,10);

function webcam():void
{

    if (camara != null)
    {
        video = new Video(980,640);
        video.attachCamera(camara);
    }
    addChild(video);

}
setTimeout(webcam, 5000); 
```

但它的作用是，在 5 秒后出现共享网络摄像头的权限，但我需要的是在接受许可后 5 秒后显示的视频......谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T03:47:47.923

显然，`video.attachCamera(camera)`这是使隐私对话框出现的行为。所以在你调用之前这样做`setTimeout()`......然后在你`webcam()`通过 执行的函数中，`setTimeout()`剩下要做的就是添加视频对象`addChild()`以使其可见：

```
var camara:Camera;
var video:Video;
camara = Camera.getCamera();
if (camara != null)
{
    camara.setMode(980,640,10);
    video = new Video(980,640);
    video.attachCamera(camara);
}

function webcam():void
{
    if (video)
        addChild(video);
}

setTimeout(webcam, 5000); 
```

# jquery - 如何将两个不同的动画应用于具有不同持续时间的同一元素？

> ID：13812242
> 
> 赞同：0
> 
> 时间：2012-12-11T01:29:55.370
> 
> 标签：jquery, html

我已经找到了使用**{queue: true}**的解决方案，但问题是这似乎不适用于我的情况。

我创建了一个小提琴来帮助您理解我的问题：http: [//jsfiddle.net/c6SS9/1/](http://jsfiddle.net/c6SS9/1/)。

**jQuery代码：**

```
$(function() {
    for(var i=0; i < $('.block').size(); i++) {
        $('.block').eq(i).delay(i*200).animate({'left': '300px'}, 700);
        $('.block').eq(i).delay(i*200).animate({'opacity': '1'}, {queue: false, duration: 1000});
    }
});​ 
```

我想要的是用于**不透明度**的动画在块开始移动时开始，并且每个块都必须发生这种情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T01:37:27.203

我想你明白问题在于`opacity`动画绕过延迟，因为它不在队列中。

在这种情况下，使用泛型[`.queue()`](http://api.jquery.com/queue/)函数在延迟之后添加动画，这样即使它们不在队列中，它们也会在延迟之后执行

[更新的小提琴](http://jsfiddle.net/c6SS9/2/)

# python - 删除尾随零python但限制很小

> ID：13812243
> 
> 赞同：0
> 
> 时间：2012-12-11T01:30:05.537
> 
> 标签：python

什么是删除尾迹零的好方法：

1.0 变成 1.0

1.00 变为 1.0

1.4560 变为 1.456

1.4560000 变为 1.456

1.40 变成 1.4

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T01:36:38.497

没做什么：

```
>>> 1.00
1.0
>>> 1.0
1.0
>>> 1.4560
1.456
>>> 1.45600000
1.456
>>> 1.40
1.4 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T01:38:46.453

正如 Kabie 建议的那样，假设它是浮点数或小数，什么也不做。如果是字符串，请使用`rstrip()`

```
print '1.4000'.rstrip('0') # '1.4' 
```

**编辑：** 正如所指出的，这将失败`'1.0'`。可能的修复：

```
num = '42.00'
normalized = num.strip('0')+'0' if num.rstrip('0')[-1] == '.' else num.strip('0')
print normalized # 42.0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T01:39:58.193

您可以使用[格式字符串](http://docs.python.org/library/string.html#formatstrings)：

```
'{:g}'.format(float(string)) 
```

或者作为@kabie 建议使用：

```
str(float(Num)) 
```

# vb.net - Windows 资源管理器，类似于 Visual Basic 中的 QVFS

> ID：13812244
> 
> 赞同：0
> 
> 时间：2012-12-11T01:30:17.970
> 
> 标签：vb.net, filesystems, virtual

[http://www.codeproject.com/Articles/21329/QVFS-A-FAT32-Based-Virtual-File-System-Powered-by](http://www.codeproject.com/Articles/21329/QVFS-A-FAT32-Based-Virtual-File-System-Powered-by)

我正在使用该代码创建一个使用虚拟文件系统的类似 Windows 资源管理器的应用程序。

问题是虽然我可以单击“添加”并简单地将文件添加到虚拟 FS，但我无法创建目录。我正在寻找 Windows Explorer 类型的功能，所以我添加了一个新文件夹，当我在列表视图中双击它时，它会打开一个包含该目录中文件的新页面。

我怎样才能做到这一点？

# c - 如何在 C 中设置 20 mbs 的数组大小

> ID：13812246
> 
> 赞同：3
> 
> 时间：2012-12-11T01:30:42.087
> 
> 标签：c

如何创建`int`大小为 20 MB 的数组？

我必须使用`malloc`还是`sbrk`其他什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T01:33:00.853

`malloc`如果您想要 20MB 之类的东西，通常是个好主意。大多数堆栈都较小，如果您尝试会导致程序崩溃。

```
int *myInts = (int *)malloc(20*1024*1024); 
```

或将其放置为静态/全局变量：

```
int myArray[20*1024*1024/sizeof(int)]; 
```

或与`sbrk`

```
int *myInt = sbrk(0); /* Get the current pointer */
sbrk(20*1024*1024); /* Now increase it */ 
```

但正如手册页所说“避免使用`sbrk`”。您应该使用的唯一时间`sbrk`是您正在实现自己的内存分配器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T01:33:17.550

我认为你最好的选择是使用`malloc`，例如：

```
#include stdio.h
#include malloc.h

int main() {
    int array_size = 0;
    int* my_array = (int*)malloc(array_size);
    free((void*)my_array);
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T01:33:24.517

你可以试试这段代码

```
 int *num; 
    num = (int *) malloc (BUFSZ* sizeof(int)) 
```

在这里你可以定义`BUFSZ`可以是你想要的任何尺寸

# android - InterceptTouchEvent 上的指针计数不正确

> ID：13812247
> 
> 赞同：5
> 
> 时间：2012-12-11T01:30:54.167
> 
> 标签：android, android-viewpager

我希望我的 ViewPager 仅在使用单指时滑动。所以我扩展了这个类并像这样实现了 onInterceptTouchEvent：

```
@Override
public boolean onInterceptTouchEvent(MotionEvent ev)
{
    if(ev.getPointerCount() > 1)
    {
        return false;
    }
    return true;
} 
```

但无论屏幕上有多少点，getPointerCount() 总是返回“1”。当我覆盖 onTouchEvent 时，我得到了正确的数字，但是当我这样做时，一个错误会通过抛出来阻止寻呼机工作（[http://code.google.com/p/android/issues/detail?id=18990](http://code.google.com/p/android/issues/detail?id=18990)）当您将第一根手指从多点触控中抬起时出现应用程序终止异常：java.lang.IllegalArgumentException:pointerIndex out of range

我还能怎么做呢？

**编辑：**

指针计数问题仍然存在，但我能够解决 onTouchEvent 中引发的异常。

当我遇到异常时，我正在这样做：

```
if(ev.getPointerCount() == 1)
{
    return super.onTouchEvent(ev);
}
return false; 
```

问题在于，当您从多点触控中抬起第一根手指时，ViewPager 的 onTouchEvent 最终会处理 ACTION_UP 事件，而无需先处理 ACTION_DOWN。所以我想出了这个修复，它避免了异常，当你放下第二根手指时会结束 ViewPager 的移动：

```
private boolean moving = false;
@Override
public boolean onTouchEvent (MotionEvent ev)
{
    int action = ev.getAction();
    if(action == MotionEvent.ACTION_DOWN)
    {
        moving = true;
    }
    if(ev.getPointerCount() == 1)
    {
        if(moving)
        {
            return super.onTouchEvent(ev);
        }

        if(action == MotionEvent.ACTION_UP)
        {
            moving = false;
        }
    }
    else if(ev.getPointerCount() > 1 && moving)
    {
        ev.setAction(MotionEvent.ACTION_UP);
        moving = false;
        return super.onTouchEvent(ev);
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T05:57:45.833

您的 onTouchEvent 对我不起作用。我会调查原因。但与此同时，我做了另一个解决方法。我深入研究了 ViewPager 代码，发现您可以这样做：

```
@Override
public boolean onInterceptTouchEvent(MotionEvent ev) {

    if (ev.getPointerCount() > 1){
        ev.setAction(MotionEvent.ACTION_CANCEL);
    }

    return super.onInterceptTouchEvent(ev);

} 
```

getPointerCount() 不过对我来说没问题。使用上面的代码 ViewPager 也处理 ACTION_DOWN 步骤并且其中的错误永远不会发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-12T09:50:27.693

所以我终于找到了如何解决同样的问题，并且知道它为什么会发生。我在没有扩展 ViewPager 的情况下解决了这个问题，而是像示例中那样设置了触摸事件侦听器：

```
viewPager.setOnTouchListener(new OnTouchListener() {
        // TODO This breaks sometimes in compatibility library code, try to fix
        @Override
        public boolean onTouch(View v, MotionEvent event) {

            currentFragment.view.dispatchTouchEvent(event);
            if (!currentFragment.view.whole && event.getPointerCount() > 1) {

                event.setAction(MotionEvent.ACTION_CANCEL);

            }

            return false;
        }
    }); 
```

因此，您只需将事件设置为已取消而不是使用它。当您在 onTouch 方法中返回 true 时，事件被消耗并且不会冒泡到视图寻呼机，因此它停止滚动。但是，当您处理多个指针事件时，它会在第二次触摸后切断事件，但仍然会发送第一个事件，因此 viewpager 和触摸处理程序会尝试对多点触摸进行操作并中断，因为没有第二个手指事件的第二个元素。

我同意这不应该发生，这是这里报告的支持库中的一个错误（我认为是那个） [https://code.google.com/p/android/issues/detail?id=18990](https://code.google.com/p/android/issues/detail?id=18990) 它被标记前段时间已解决，但仍在最新版本的 SupportLibrary V4 中发生

# windows-installer - ClickOnce 无法安装 SQL Server 2008 R2 Express 并创建数据库结构

> ID：13812250
> 
> 赞同：0
> 
> 时间：2012-12-11T01:31:06.667
> 
> 标签：windows-installer, clickonce, setup-deployment

ClickOnce 是创建安装文件的好工具。但它无法安装 MS SQL Server 2008 Express 版本、创建我的数据库实例并运行数据库脚本。

我对 MSI 进行了研究，但我能找到的最新版本的 MSI 似乎是 2 年前发布的 4.5，我无法在我的机器上安装。

我也尝试使用 Microsoft Web Installer，它可以下载但我无法使用它来安装我的项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T20:25:44.283

ClickOnce 是一个 Web 安装程序，出于安全原因，它只安装用户配置文件组件。SQL Server 意味着影响该计算机中所有用户的 Windows 服务。

# python - pytz 替代方案 - 使用操作系统时区作为源？

> ID：13812253
> 
> 赞同：2
> 
> 时间：2012-12-11T01:31:26.017
> 
> 标签：python, timezone, dst, pytz, django-timezone

有没有使用 OS timezone/dst 作为源的更简单的 pytz 替代方案？

欢迎使用 ctypes 包装器或不需要编译的东西。

编辑：[野兽](http://regebro.wordpress.com/2008/05/10/python-and-time-zones-part-2-the-beast-returns/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-27T06:22:02.617

[`tzlocal`模块](https://github.com/regebro/tzlocal)在 *nix 和 Win32 上找到`pytz`与您的操作系统本地时区相对应的时区：

```
from datetime import datetime
from tzlocal import get_localzone # $ pip install tzlocal

print(datetime.now(get_localzone()))
# -> 2015-01-27 07:20:52.163408+01:00 
```

您的发行版可能会修补`pytz`模块以使用 OS tz 数据库而不是嵌入一个（例如，Ubuntu 会这样做）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T02:08:01.023

C 标准库函数期望在`/etc/localtime`. 您可以使用 pytz 为它构建一个时区对象，如下所示：

```
>>> import datetime
>>> import pytz
>>> localtime = pytz.build_tzinfo('localtime', open('/etc/localtime', 'rb'))
>>> print datetime.datetime.now(localtime)
2012-12-11 10:02:40.566735+08:00 
```

`/etc/localtime`这里的一个限制是，无法从其内容中确定时区所指的时区，因此如果您想腌制日期时间对象或在机器之间传递对时区的引用，这可能会出现问题。

为了允许时区更新，一些 Linux 发行版还将实际时区名称写入`/etc/timezone`，以便它们可以替换`/etc/localtime`为正确的编译时区定义。如果您的目标操作系统这样做，您可以像这样使用该文件：

```
>>> with open('/etc/timezone', 'r') as fp:
...     tzname = fp.read().strip()
... 
>>> localtime = pytz.timezone(tzname)
>>> print datetime.datetime.now(localtime)
2012-12-11 10:06:36.234822+08:00 
```

如果您的目标系统有这个文件，这可能是更好的方法。

# sql - 配置文件实体框架

> ID：13812256
> 
> 赞同：5
> 
> 时间：2012-12-11T01:31:51.347
> 
> 标签：sql, entity-framework

我有以下示例代码：

```
 Context context = new Context();
  Repository repository = new Repository(context);

  Post post = repository.First<Post>(x => x.Id == 1);

  Model model = new Model {
    Created = cube.Created,
    Id = cube.Id,
    Name = cube.Name,
    Pack = cube.Pack.Id,
    Mimes = context.Files.Where(x => x.Id == 1).Select(x => x.Mime).ToList()
  }; 
```

我需要找出哪些 SQL 查询被发送到数据库。

如何使用 SQL Express 和 VS 2012 分析 EF 查询？

有什么工具可以做到这一点吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-01-17T16:46:47.183

另一个答案中指定的[EF Profiler](http://www.hibernatingrhinos.com/products/efprof)是一头野兽——非常强大，但这并不是免费的（$$、磁盘空间和时间）。它也是由NHibernate 和[RavenDB的](http://ravendb.net/)[Oren Eini](http://ayende.com/blog)制作的。

我喜欢在紧要关头使用的工具更轻量级，当然在功能方面无法与 EF Prof 相比 - 但成本（$$、时间和磁盘）是或接近， 零。

我在 LocalDb 上使用 EF 测试了这些轻量级分析器，但它们的主要用例是更传统的 Sql Server 风格（包括 Express）。

## ExpressProfiler

到目前为止，最容易使用的（也是最简单的-show-me-the-SQL-statements-kthxbye）是[CodePlex 上的 ExpressProfiler](https://expressprofiler.codeplex.com/)。

![在此处输入图像描述](../Images/54e198b371000342c537e5544d732552.png)

整个程序是一个 126 KB 的 EXE！现在轻了！

## AnjLab Sql Profiler

另一种是来自[DataWizard](http://www.datawizard.com/)的，它曾经是免费的（显然现在价格从 5 美元起）。

当它是开源的时候，有人设法[在 GitHub 上保存了一个快照（包括 xcopy-installable 二进制文件）。](https://github.com/ren85/free-sql-server-profiler)

可执行文件将自己显示为“AnjLab Sql Profiler”，并允许对显示的事件进行一些过滤 - 但这种优势也是它的弱点，因为可以启用/禁用的事件类型太多了。如果选择了所有内容，则输出非常冗长。

仅选择特定事件即可获得更合理的输出。

![在此处输入图像描述](../Images/ff89db20b8a34a57652b2419de6e59c6.png)

以下是我为获得上述输出而选择的事件：

![在此处输入图像描述](../Images/bd9bc5278e629823d090c33a117ae2dc.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T08:33:39.193

您在这里有几个选择。

1.  通过在运行时使用[https://stackoverflow.com/a/7901917/1070291](https://stackoverflow.com/a/7901917/1070291)`((ObjectQuery)query).ToTraceString()`打印查询来检查查询（我认为这仅适用于查询，因此在上述情况下可能不是最好的）
2.  使用管理工作室内置的 SQL Profiler
3.  使用[Entity Framework Profiler](http://www.hibernatingrhinos.com/products/efprof)（一个非常好的第三方工具，有试用版，这是我用来分析查询的）

# clearcase - 可以传递给 -fmt 的属性的参考？

> ID：13812257
> 
> 赞同：2
> 
> 时间：2012-12-11T01:31:53.920
> 
> 标签：clearcase, cleartool

fmt_ccase文档[将此](http://publib.boulder.ibm.com/infocenter/cchelp/v8r0m0/topic/com.ibm.rational.clearcase.cc_ref.doc/topics/fmt_ccase.htm)`cleartool`作为格式化选项：

> **%[p]p**
> 属性值：显示方括号中指定的属性值。如果返回多个值，则以空格分隔。

但是，据我所知，该页面没有列出可能的值`[p]`，而且我在 ClearCase 文档的任何地方都找不到任何其他引用。

我想用它来格式化输出以`lstype`用于脚本目的，以打印出类型的属性，例如超类型和类型管理器。谁能指出我正确的方向？

* * *

这是我最终尝试做的示例输出：

> foo
> superfoo
> foo_mgr

其中`foo`是类型，`superfoo`是 的超类型`foo`，`foo_mgr`是 的类型管理器`foo`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T02:13:26.430

您将在**[fmt_ccase 页面](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m1/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/fmt_ccase.htm)**中找到所有属性。

> 命令输出的格式字符串
> 
> `-fmt`选项语法（用于各种报告命令：`annotate`、`describe`、`lshistory`、`lscheckout`等）：

```
-fmt "format-string" 
```

> format-string 是一个字符串，由字母数字字符、转换规范和转义序列组成。它必须用双引号 ( `"`) 括起来。

更准确地说，该部分：

```
%[p]p 
```

> **属性值**：显示方括号中指定的属性值。如果返回多个值，则以空格分隔。

例如：

> 显示文件元素的类型。

```
cleartool describe -fmt "Type:  %[type]p\n"  util.c@@

Type: text_file 
```

请参阅`lstype`“[如何在 ClearCase 中查找一个人创建的所有分支类型？](https://stackoverflow.com/a/2279712/6309) ”中的示例。

# mysql - 使用 where 子句将数据表复制到表

> ID：13812262
> 
> 赞同：3
> 
> 时间：2012-12-11T01:32:36.643
> 
> 标签：mysql, sql, insert

试图将新数据从 table1 复制到 table2。我不确定如何以另一种方式对其进行编码

```
INSERT table1 
SELECT x.*,y.TIMESTAM  
FROM table1 x, table2y
WHERE x.TIMESTAM > y.TIMESTAM; 
```

如果时间戳是表 2 中较新的 (>) 行 1，我想复制表 1 中的所有列

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T03:09:55.163

Here's how you copy all newer data from table2 into table1:

```
INSERT INTO table1 
SELECT * FROM table2
WHERE TIMESTAM > (select MAX(TIMESTAM) FROM table1); 
```

# javascript - 是否有将 CommonJS 模块编译成单个 .js 文件的工具？

> ID：13812264
> 
> 赞同：6
> 
> 时间：2012-12-11T01:32:57.963
> 
> 标签：javascript

`require`是否有任何工具可以将使用 CommonJS/Node 类模块（ 、、等）编写的模块编译`exports`成单个 .js 文件以提供给浏览器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T01:35:19.213

听起来您正在寻找*Browserify*：

[https://github.com/substack/node-browserify](https://github.com/substack/node-browserify)

> “通过服务器端构建步骤使节点样式的 require() 在浏览器中工作，就像变魔术一样！”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-22T20:11:25.823

另一个非常相似的实用程序分别名为 CommonJS Compiler 和 Grunt task，您可以在[https://github.com/dsheiko/cjsc找到](https://github.com/dsheiko/cjsc)

它在解析模块中的 require() 调用时使用 Esprima syntaxTree。它将每个模块封闭在一个独特的范围内，并以 nodejs 的方式进行缓存。它适用于 UMD（通用模块定义）模块。我最喜欢的是，它在编译非常少的代码时添加 - 小的 require 函数体加上每个模块的定义调用包装器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T15:55:02.713

If you want something you can use directly from PHP, try [cjsDelivery](https://github.com/mattcg/cjsDelivery).

# objective-c - 访问 NSArray 的随机元素时的 EXC_ARITHMETIC

> ID：13812269
> 
> 赞同：8
> 
> 时间：2012-12-11T01:33:32.127
> 
> 标签：objective-c

我正在尝试随机获取数组的值，但出现错误这是我的代码到目前为止：

```
NSMutableArray *validMoves = [[NSMutableArray alloc] init];

for (int i = 0; i < 100; i++){
    [validMoves removeAllObjects];

    for (TileClass *t in tiles ) {
        if ([self blankTile:t] != 0) {
            [validMoves addObject:t];
        }
    }

    NSInteger pick = arc4random() % validMoves.count;

    [self movePiece:(TileClass *)[validMoves objectAtIndex:pick] withAnimation:NO];
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-11T01:55:29.920

您得到的错误（算术异常）是因为`validMoves`是空的，当您执行模运算时，这会导致除以零。

您必须明确检查空`validMoves`数组的情况。你也应该使用它`arc4random_uniform`来避免模偏差。

```
if (validMoves.count > 0) {
    NSInteger pick = arc4random_uniform(validMoves.count);
    [self movePiece:(TileClass *)[validMoves objectAtIndex:pick] withAnimation:NO];
} else {
   // no valid moves, do something reasonable here...
} 
```

作为最后的评论，不是`arc4random_uniform(0)`返回`0`，因此应该避免这种情况，否则您将尝试访问空数组的第一个元素，这当然会使您的应用程序崩溃。

# git - 如何将两个分支推送到两个单独的 GitHub 遥控器？

> ID：13812271
> 
> 赞同：1
> 
> 时间：2012-12-11T01:33:42.827
> 
> 标签：git, github

我有一个项目，`data`文件夹需要私有（但由 VCS 跟踪）。`git`所以GitHub 上的整个repo 都是私有的。然而，该代码对许多人来说非常有用，所以我想保持公开。

目前我的回购只有一个`master`和`dev`。一旦其中的功能`dev`正常工作，它们就会合并到`master`. 我想创建一个`no_data`分支并将其推送到公共 GitHub 存储库。`master`应该继续跟踪私人回购。我已经为此有一个私人 GitHub 存储库（我们称之为`private_project`）。`project`我可以为`no_data`分支创建一个公共回购。

问题：
a）我如何设置它以便每个分支跟踪一个单独的 repo？

b）由于两个分支之间唯一不同的是公共分支会忽略该`data/`文件夹，因此我打算将其添加到`.gitignore`文件中。但是，我希望其余代码在两个分支中保持不变。所以我担心每次合并`master`到 时`no_data`，我都必须手动解决`.gitignore`合并。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T02:31:03.337

不。这势必会导致一天或另一天的错误。

使`data`目录成为一个**[子模块](http://git-scm.com/book/en/Git-Tools-Submodules)**，具有*自己的*远程上游仓库（“ `private_project`”之一），并使用其父仓库（具有上游仓库“ `public_project`”）声明。

这样，您可以将父 repo 的任何分支推送到“public_project”：没关系。
克隆“public_project”时，其他贡献者将得到的只是完整的 repo 加上对另一个 repo (' `private_project`') 的引用，他们无法访问（因为它是私有 repo）。
请参阅“ [git 子模块究竟是如何工作的？](https://stackoverflow.com/questions/12078365/how-exactly-does-git-submodule-work/12078816#12078816) ”。

# html - 如何自定义 buildbot 网页

> ID：13812272
> 
> 赞同：8
> 
> 时间：2012-12-11T01:33:54.343
> 
> 标签：html, web, buildbot

我正在尝试为测试构建机器人制作一些额外的网页，因为我计划让一个运行我的项目。

实际上，我希望有一个瀑布页面，显示构建特定构建器的按钮，靠近构建名称，而不是仅在构建器页面中。我还想从构建器工作文件夹中以及从机上的其他位置加载一些参考文档；使用按钮来显示或隐藏它们。

我查看了手册，但没有看到任何关于如何自定义或创建新 html 页面的信息，这些页面可以利用 Buildbot 功能（就像 Buildbot 中已经包含的模板一样）。

我打开了一些页面，发现有一些 html 文件实际上包含非 html 代码语句，例如

```
% macro
% for 
```

等等。我不是网络程序员，所以我对我应该寻找什么一无所知。尝试用谷歌搜索`macro`HTML 一词，我得到了一堆与 Wiki 自定义相关的结果；它看起来不像是 Python 语言，所以我很迷茫。

有没有人能够成功地为 buildbot 制作自定义页面，并且可以给我一些关于学习什么的指示？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T14:56:36.977

Buildbot 使用 jinja2 进行模板化，jinja2 主页有一些不错的文档。这就是非 html 语句的来源。在学习 buildbot 定制时，我发现 google 的 chromium buildbot 是一个很好的起点。

*   [http://buildbot.net/buildbot/docs/0.8.7/developer/webstatus.html](http://buildbot.net/buildbot/docs/0.8.7/developer/webstatus.html)
*   [http://jinja.pocoo.org/docs](http://jinja.pocoo.org/docs)
*   [http://src.chromium.org/viewvc/chrome/trunk/tools/build/masters/master.chromium/templates/](http://src.chromium.org/viewvc/chrome/trunk/tools/build/masters/master.chromium/templates/)

# iphone - 如何更改自动生成的导航栏 Xcode

> ID：13812273
> 
> 赞同：0
> 
> 时间：2012-12-11T01:34:08.890
> 
> 标签：iphone, ios, xcode

我有超过 5 个选项卡，因此给了我一个带有导航栏的表格视图单元格。如何更改表格视图单元格和导航栏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T04:47:05.497

您可以`UITableView`像下面的 UITableView 委托方法一样设置单元格颜色：-

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath {

cell.backgroundColor = [UIColor colorWithRed:204/255.0 green:0/255.0 blue:0/255.0 alpha:0.1]; 
```

}

您可以手动设置 UINavigationBar 上的后退按钮，您只需将以下代码放入`ViewDidLoad`方法中，例如：-

```
UIImage* imageback = [UIImage imageNamed:@"Back_Button.png"];
                CGRect frameimgback = CGRectMake(0, 0, 50, 30);
                backButton = [[UIButton alloc] initWithFrame:frameimgback];
                [backButton setBackgroundImage:imageback forState:UIControlStateNormal];
                [backButton addTarget:self action:@selector(goBack:)
                     forControlEvents:UIControlEventTouchUpInside];
                UIBarButtonItem *btn = [[UIBarButtonItem alloc]initWithCustomView:backButton];
                self.navigationItem.leftBarButtonItem = btn; 
```

希望对你有帮助 谢谢

# c - 使用 geany 制作/构建

> ID：13812276
> 
> 赞同：0
> 
> 时间：2012-12-11T01:34:44.767
> 
> 标签：c, build, geany

我在构建时遇到问题。我的错误是这样的：“test.c”错误：test.h 错误”

我有源代码：

```
#include <test.h> 
```

如何在构建中添加它？
具体如何链接这个库？我可以通过 Geany 链接它吗？
操作系统 ubuntu + Geany 作为编译

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:05:49.090

请按照以下简单步骤操作：

*   创建一个目录并将您的`test.c`和`test.h`放在同一目录中。

*   在 C 源文件中，您应该编写：

`#include "test.h"`它将在当前目录中搜索头文件以及包含库路径，而不是`#include <test.h>`仅在包含库路径中搜索 test.h。

*   像往常一样构建，使用 geany。

# python-2.7 - 如何仅将第二个和第三个字节从字节数组转换为整数（第二个比第三个最不重要）？

> ID：13812280
> 
> 赞同：0
> 
> 时间：2012-12-11T01:34:55.020
> 
> 标签：python-2.7

我从套接字字节数组接收。如何仅将第二个和第三个字节转换为整数（第二个比第三个最不重要）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T01:41:25.070

也许我错过了你的要求，但你的意思是这样吗？

```
b = bytearray("123456789")
b[1]
# 50
b[2]
# 51

int(chr(b[1]))
# 2
int(chr(b[2]))
# 3 
```

# ios6 - predicateForEventsWithStartDate:endDate:calendars: EKEventStore 不起作用

> ID：13812281
> 
> 赞同：1
> 
> 时间：2012-12-11T01:34:57.297
> 
> 标签：ios6, ekevent, ekeventstore

我在这个范围日期的 EKCalendar 中保存了 28 个 EKEvent：2012-01-01 和 2013-01-18，EKEvent 都已存储，我可以在 iCloud 上的 iOS 日历中看到它，然后我想检索所有这些 EKEvent范围 2012-01-01 和 2013-01-18，我使用 EKEventStore 的这种方法：

```
predicateForEventsWithStartDate:endDate:calendars: 
```

这是一个 NSPredicate 来获取日历中的事件，我通过开始日期 2012-01-01 和 endDate:2013-01-18 所以返回给我的 EKEvent 数组只有 8 个元素，所以我的问题是为什么它没有找到我所有的 28 事件？我错了什么？

编辑：

这是我使用的完整代码：

```
NSDate* sourceDate2 = [dateFormat dateFromString:@"2012/01/01"];

    NSTimeZone* sourceTimeZone2 = [NSTimeZone timeZoneWithAbbreviation:@"GMT"];
    NSTimeZone* destinationTimeZone2 = [NSTimeZone systemTimeZone];

    NSInteger sourceGMTOffset2 = [sourceTimeZone2 secondsFromGMTForDate:sourceDate2];
    NSInteger destinationGMTOffset2 = [destinationTimeZone2 secondsFromGMTForDate:sourceDate2];
    NSTimeInterval interval2 = destinationGMTOffset2 - sourceGMTOffset2;

    NSDate* destinationDate2 = [[NSDate alloc] initWithTimeInterval:interval2 sinceDate:sourceDate2];

    NSTimeInterval time2 = floor([destinationDate2 timeIntervalSinceReferenceDate] / 86400.0) * 86400.0;

    NSDate *startDate = [NSDate dateWithTimeIntervalSinceReferenceDate:time2]; 
```

然后我使用相同的代码创建 2013-01-18 日期，即 endDate，然后我这样做：

```
EKEventStore *eventStore = [[EKEventStore alloc] init];

NSPredicate *predicateEvent = [eventStore predicateForEventsWithStartDate:startDate endDate:endDate calendars:[eventStore calendarsForEntityType:EKEntityTypeEvent]];

NSArray *eventArray = [eventStore eventsMatchingPredicate:predicateEvent]; 
```

eventArray 只包含 8 个元素……另外 20 个在哪里？请问我快疯了有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T18:35:13.077

在您的设备上，转到：`Settings > Mail, Contacts, Calendars`，然后在`Calendars`子部分下转到`Sync > All Events`。不仅仅是过去 30、60 天等的事件。

# hibernate - Hibernate中Set和Bag的区别

> ID：13812283
> 
> 赞同：24
> 
> 时间：2012-12-11T01:35:06.327
> 
> 标签：hibernate

`Set`Hibernate 中的和`Bag`集合之间的主要区别是什么？在什么场景下我们应该使用`Set`and `Bag`？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-12T16:06:18.223

A`<bag>`是一个无序集合，它可以包含重复的元素。这意味着，如果您持久保存具有某种元素顺序的包，则不能期望在检索集合时保留相同的顺序。Java 集合框架中没有“包”的概念，所以我们只使用 a`java.util.List`对应 a `<bag>`。

A与 A`<set>`类似，`<bag>`只是它只能存储唯一的对象。这意味着集合中不能包含重复的元素。当您第二次将相同的元素添加到集合中时，它将替换旧的元素。默认情况下，集合是无序的，但我们可以要求对其进行排序。Java中a的对应类型是`java.util.Set`.

例子

映射`<set>`

```
 <set name="employees" table="employee"
            inverse="true" lazy="true" fetch="select">
        <key>
            <column name="department_id" not-null="true" />
        </key>
        <one-to-many class="net.viralpatel.hibernate.Employee" />
    </set> 
```

映射`<bag>`

```
 <bag name="employees" table="employee"
                inverse="true" lazy="true" fetch="select">
            <key>
                <column name="employee_id" not-null="true" />
            </key>
            <one-to-many class="net.viralpatel.hibernate.Employee" />
        </bag> 
```

因此，两者在 hbm 文件中的映射方式完全相同。但不同之处仅在于它处理重复记录的方式。

来源：[Hibernate 一对多 XML 教程](http://viralpatel.net/blogs/hibernate-one-to-many-xml-mapping-tutorial/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-11T08:53:08.653

从休眠参考：

> 包是最坏的情况，因为它们允许重复的元素值，并且由于它们没有索引列，因此无法定义主键。Hibernate 无法区分重复的行。

并且：

> 然而，有一种特殊情况，其中包和列表比集合的性能要好得多。例如，对于具有`inverse="true"`标准双向一对多关系习惯用法的集合，我们可以将元素添加到包或列表中，而无需初始化（获取）包元素。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-01-17T05:28:37.967

各种集合之间的快速摘要差异如下

*   **设置**- 没有重复和没有顺序
*   **包**- 可以包含重复项且无顺序（也称为无序列表或带有重复项的集合）

*   **列表**- 可以包含重复但保留顺序

    *   可以使用@OrderBy 创建以保持顺序

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-11T01:39:08.223

两者都是无序集合。袋子允许重复。集没有。

# nuget - Nuget 参数化内容路径

> ID：13812290
> 
> 赞同：0
> 
> 时间：2012-12-11T01:36:14.723
> 
> 标签：nuget, nuget-package

我希望看到 Nuget 具有内容路径的参数替换功能，允许我执行以下操作：

```
\content\someFile\$somePlace$\myCode.cs 
```

理论上，我会在复制之前使用`install.psl`脚本来设置 的值。`$somePlace$`有没有办法做到这一点？

如果不是，我想不是，那么我的下一个选择是什么？`myCode.cs`移动到`\tools`文件夹中，然后`install.ps1`根据需要简单地将其复制到动态路径中是否有意义 ？有没有更好的“标准”方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T07:25:51.573

您可能可以将 myCode.cs 留在它所在的文件夹中，但我担心 install.ps1 应该进行复制工作。还要确保uninstall.ps1 反转操作并再次删除文件（如果未更改）。

# android - 按钮显示 Android Eclipse

> ID：13812291
> 
> 赞同：0
> 
> 时间：2012-12-11T01:36:19.403
> 
> 标签：android, eclipse, togglebutton

我添加了一个切换按钮，但它没有出现，我不知道为什么。我已经完成了 Android 教程，并回顾了代码以及许多其他来源。目标是在按钮打开时让程序暂停。目前，该按钮甚至不会出现在用户界面上。有什么建议么？

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true" />

    <ToggleButton
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:onClick="pauseCounter" />

</RelativeLayout> 
```

* * *

```
package com.evorlor.counter;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Intent counter = new Intent(MainActivity.this, Counter.class);

        startActivity(counter);

    }

    public void pauseCounter(View view) {
        Intent pause = new Intent(this, Pause.class);
        startActivity(pause);
    }

    // @Override
    // public boolean onCreateOptionsMenu(Menu menu) {
    // // Inflate the menu; this adds items to the action bar if it is present.
    // getMenuInflater().inflate(R.menu.activity_main, menu);
    // return true;
    // }

} 
```

* * *

```
package com.evorlor.counter;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class Pause extends Activity{

    public void onCreate(Bundle instPause) {
        super.onCreate(instPause);

        TextView tv = new TextView(this);

        tv.setTextSize(250);
        tv.setText("PAUSE");
        setContentView(tv);

    }
} 
```

* * *

这是我的柜台课程。很乱。对不起。这和我到目前为止的距离一样接近。帮助将不胜感激！我在这个微不足道的按钮上花了很多时间！谢谢！

```
package com.evorlor.counter;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Gravity;
import android.view.MotionEvent;
import android.widget.TextView;
import android.widget.ToggleButton;

public class Counter extends Activity {

    private int count = 0;
    private int hiCount = 0;
    private boolean capCount = false;

    public void onCreate(Bundle instCounter) {
        super.onCreate(instCounter);

        TextView tv = new TextView(this);

        tv.setTextSize(250);
        if (count < 10000 && capCount == false) {

            tv.setText(Integer.toString(count));
        } else {
            capCount = true;
            if (count >= 10000) {
                hiCount += 10;
                count -= 10000;
            }
            if (hiCount < 100) {

                tv.setText(hiCount + "k+" + count);
            } else {
                tv.setText("Over\n100k");
            }
        }
        tv.setGravity(Gravity.CENTER);

        setContentView(tv);

        ToggleButton butPause = new ToggleButton(this);

        if (butPause == null) {
            Intent pause = new Intent(this, Pause.class);
            startActivity(pause);
        }

    }
    // public void pauseCounter(View view) {
    // Intent pause = new Intent(this, Pause.class);
    // startActivity(pause);
    // }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T01:41:15.280

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Intent counter = new Intent(MainActivity.this, Counter.class);

    startActivity(counter);

} 
```

您将立即开始一项新活动。那不是一个好主意。
您将看到计数器活动中的内容，而不是主要活动中的内容，因为您看不到切换按钮。注释掉 startActivity() 只是为了检查。

# pyqt - 在 PyQt 中禁用自定义上下文菜单项

> ID：13812301
> 
> 赞同：3
> 
> 时间：2012-12-11T01:37:57.657
> 
> 标签：pyqt

所以我创建了一个自定义上下文菜单，但我想根据某些值将我的树小部件的某些行中的一些项目变灰。如何禁用菜单上的项目？

```
myUI.setContextMenuPolicy( Qt.CustomContextMenu )
myMenu = QMenu( "Right Click Menu", myUI )
action = myMenu.addAction( "Item 1" )
action.triggered.connect( someFunction ) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-11T02:08:13.390

要禁用菜单项，只需[禁用`QAction`](http://qt-project.org/doc/qt-4.8/qaction.html#enabled-prop)

```
action.setEnabled(False) 
```

# flash - 来自库的 FLASH CS6 AS3 声音未随叫随到

> ID：13812319
> 
> 赞同：1
> 
> 时间：2012-12-11T01:40:25.537
> 
> 标签：flash, audio

任何人都可以看到哪里不工作吗？

我正在尝试从导入的库中获取声音以在单击按钮时播放，

```
button_1.addEventListener(MouseEvent.CLICK, fl_ClickToPlayStopSound_2);

var fl_SC_2:SoundChannel;

var fl_ToPlay_2:Boolean = true;

function fl_ClickToPlayStopSound_2(evt:MouseEvent):void
{
    if(fl_ToPlay_2)
    {
        var s:Sound = new Sound(new ("dog.mp3"));
        fl_SC_2 = s.play();
    }
    else
    {
        fl_SC_2.stop();
    }
    fl_ToPlay_2 = !fl_ToPlay_2;
} 
```

**我收到此错误，**

```
Scene 1, Layer 'Actions', Frame 1, Line 21  1120: Access of undefined property dog. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T03:28:20.953

我不认为这是你应该从图书馆播放声音的方式......

`var s:Sound = new Sound(new ("dog.mp3"));`不正确。

您需要在库中设置声音的链接类名，然后创建对象（并可以转换为`Sound`对象），然后才能播放。

示例：当我将链接类名称设置为 时`DogSound`，我可以去：

```
var sound:Sound = new DogSound(); 
```

# javascript - 在某些浏览器中出现无效日期的 getDay() 错误

> ID：13812321
> 
> 赞同：1
> 
> 时间：2012-12-11T01:40:28.243
> 
> 标签：javascript, jquery, air

我有以下字符串：“2012-12-10T23:40:41Z”

我的目标是将这一天作为一个数字（0-6）... sun-sat

我按如下方式传递此字符串：

```
var input = "2012-12-10T23:40:41Z";
var day = new Date(input).getDay();
alert(day); 
```

这在 Chrome 中工作得很好，但在 adobe air webkit 视图中，它会出现“无效日期”错误

关于找到一种方法来获得旧浏览器支持的一天的任何建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T01:44:44.817

在 ES5 之前，没有标准的日期解析方式（每个主机都实现了自己的解析方式）。从 ES5 开始，日期必须采用 ISO8601 格式才能在严格模式下解析。

为了获得最大的可移植性，您应该手动解析日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T01:47:55.670

这个[页面](http://webcloud.se/log/JavaScript-and-ISO-8601/)应该很有帮助，即使它有点旧。问题是 ISO 8601 样式日期仅在 Javascript 1.8.5 中得到支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T02:34:18.870

更多的评论。

要手动解析[javascript ISO8601 日期字符串](http://www.ecma-international.org/ecma-262/5.1/#sec-15.9.1.15)，请将其拆分为多个部分并将其传递给日期构造函数。请注意，javascript 日期字符串应始终为 UTC (Z)，因此：

```
function parseISOdateString(s) {
  s = s.split(/\D/);
  return new Date(Date.UTC(s[0], --s[1], s[2], s[3], s[4], s[5]))
} 
```

如果您愿意，您可以在上面添加花里胡哨来验证字符串和生成的日期对象。

请注意，根据 ES5，给定的无效日期字符串[`Date.parse`](http://www.ecma-international.org/ecma-262/5.1/#sec-15.9.4.2)（例如 2012-12-00）应该返回`NaN`，但一些浏览器会为 2012-11-30 创建一个日期对象。以上将返回无效字符串的日期对象，因此如果需要与规范保持一致：

```
function parseISOdateString(s) {
  s = s.split(/\D/);
  var d = new Date(Date.UTC(s[0], --s[1], s[2], s[3], s[4], s[5]))
  return (d.getUTCFullYear() == s[0] && d.getUTCDate() == s[2])? d : NaN;
} 
```

这将返回`NaN`无效字符串，如“2012-12-00”

# objective-c - Correct way to end GKTurnBasedMatch out of turn

> ID：13812322
> 
> 赞同：1
> 
> 时间：2012-12-11T01:40:46.393
> 
> 标签：objective-c, ios, xcode, game-center

Let's say there is a GKTurnBasedMatch with only 2 participants left that haven't quit yet.

If the current participant wants to quit, instead of calling, `participantQuitInTurnWithOutcome:...` is it correct to call, `endMatchInTurnWithMatchData:...` since the match can't continue with only one participant?

But if the other participant wants to quit, you can't call `endMatchInTurnWithMatchData:...` since it is not your turn, so you would have to call `participantQuitOutOfTurnWithOutcome:...` but then you are left with a single participant in the match.

What is the correct way to handle these situations?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:42:28.007

you can call `–participantQuitOutOfTurnWithOutcome:withCompletionHandler:` then `-(void)handleTurnEventForMatch:(GKTurnBasedMatch *)match didBecomeActive:(BOOL)didBecomeActive` from `GKTurnBasedEventHandlerDelegate` will be called for all other participants.

There you can call `-(void)endMatchInTurnWithMatchData:(NSData *)matchData completionHandler:(void (^)(NSError *error))completionHandler` for player whose turn is now.

To determine, who left your match, check GKTurnBasedParticipant's property matchOutcome - it will be GKTurnBasedMatchOutcomeQuit.

# xcode - 将 Spotify Simple Player 从 xib 转换为情节提要的简单方法？

> ID：13812323
> 
> 赞同：0
> 
> 时间：2012-12-11T01:40:46.123
> 
> 标签：xcode, spotify

有没有一种简单的方法可以将 Spotify Simple Player 应用程序从使用 XIB 文件转换为使用情节提要？我想在我当前的 xcode 项目中包含一个简单播放器的变体，但我使用的是故事板，因为我对 IOS 编程相当陌生。有没有一种简单的方法（或任何方法）可以让 Simple Player 与故事板一起运行？有什么特别是我应该和不应该改变的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T08:54:55.003

老实说，SimplePlayer 中的代码太少了，从头开始构建它并复制代码会更容易。一旦你构建了 UI，将播放按钮连接到插座并从简单播放器中的播放按钮。

# ios - 声音不能在 iPad 扬声器上播放，但在耳机和 iPod Touch/iPhone 扬声器上可以正常播放

> ID：13812328
> 
> 赞同：5
> 
> 时间：2012-12-11T01:41:38.343
> 
> 标签：ios, ipad, avaudioplayer

我知道这是一个已经被问过很多次的问题，并且我已经检查了 SO 中相关的大部分答案，但是我没有运气找到我的问题的正确答案。

这是问题所在：

当某些事件被触发时，我尝试在游戏中播放 mp3 文件（最多 2 秒），我使用 AudioPlayer 这样做，下面是代码块：

```
NSError *error;
AVAudioPlayer *audioPlayer = [[[AVAudioPlayer alloc] initWithContentsOfURL:[[NSBundle mainBundle] URLForResource: @"ding" withExtension: @"mp3"] error:&error] autorelease];
if (error)  {
    NSLog(@"Error creating audio player: %@", [error userInfo]);
}
else {
    BOOL success = [audioPlayer play];
    // This always is "Play sound succeeded"
    NSLog(@"Play sound %@", success ? @"succeeded" : @"failed");
} 
```

当我在 iPhone 4s、iTouch 3/4 中运行此代码时，声音始终播放得很好且清晰，但在 iPad 1 或 iPad2 中，扬声器没有声音。但是当我插入耳机时，奇怪的事情发生了，我的耳机有声音！iPad 未处于静音模式且 URL 正确。

我很困惑为什么会这样。

PS：我尝试了以下代码（从[HERE](https://stackoverflow.com/questions/6901363/detecting-the-iphones-ring-silent-mute-switch-using-avaudioplayer-not-worki)获得）来输出音频输出端口类型：

```
CFDictionaryRef asCFType = nil;
UInt32 dataSize = sizeof(asCFType);
AudioSessionGetProperty(kAudioSessionProperty_AudioRouteDescription, &dataSize, &asCFType);
NSDictionary *easyPeasy = (NSDictionary *)asCFType;
NSDictionary *firstOutput = (NSDictionary *)[[easyPeasy valueForKey:@"RouteDetailedDescription_Outputs"] objectAtIndex:0];
NSString *portType = (NSString *)[firstOutput valueForKey:@"RouteDetailedDescription_PortType"];
NSLog(@"first output port type is: %@!", portType); 
```

当我插入耳机时，输出是**“第一个输出端口类型是耳机！”** 当我拔掉它时，输出竟然是**“第一个输出端口类型是扬声器！”**

如果有人可以提供一些帮助或建议，那就太好了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-05-20T22:47:33.033

对此有一个代码更改解决方案，但也有一个最终用户解决方案：将“响铃/静音开关”打开。`AVAudioSessionCategorySoloAmbient`具体来说，问题在于如果手机处于静音模式 ，AVAudioSessions 的默认设置是静音。

如原始海报所述，您可以通过调用来覆盖此行为：

```
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error:nil]; 
```

[AVAudioSession Reference](https://developer.apple.com/library/ios/documentation/AVFoundation/Reference/AVAudioSession_ClassReference/Reference/Reference.html#//apple_ref/c/data/AVAudioSessionCategorySoloAmbient)建议设置`AVAudioSessionCategoryPlayback`类别：

> 用于播放录制的音乐或其他对成功使用应用至关重要的声音。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-11-04T23:25:44.507

要使用 Swift 2 语法更新上面的@JonBrooks 答案，我将以下内容放入我的 viewDidLoad() 以覆盖静音开关并播放我的声音：

```
do {

    try AVAudioSession.sharedInstance().setCategory(AVAudioSessionCategoryPlayback)

} catch let error as NSError {

    print(error)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T01:58:39.277

找到解决方案！我在播放前添加了这行代码后，声音终于从扬声器中播放出来了

```
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error:nil]; 
```

我现在仍然不明白为什么，我会深入研究它。:)

# c# - 替换字符串中的反斜杠

> ID：13812331
> 
> 赞同：-3
> 
> 时间：2012-12-11T01:42:00.717
> 
> 标签：c#

在 C# 中，如何将以下文件路径中的反斜杠替换为有效路径：

我想更换：

```
"\\\\foldera\\folderb\\folderc\\Assets.mpg" 
```

和：

```
"\\foldera\folderb\folderc\Assets.mpg" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T01:44:38.483

尝试： `string.replace(@"\\",@"\");`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T02:11:24.440

如果该字符串由变量 str 引用，则使用：

```
str = str.Replace(@"\\", @"\"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T02:02:58.413

尝试这样做 -

`@"\foldera\folderb\folder\Assets.mpg"`

# python - 为 Windows 系统创建设置

> ID：13812333
> 
> 赞同：0
> 
> 时间：2012-12-11T01:42:15.187
> 
> 标签：python, python-3.x, window

这就是问题：如何从 .py 文件创建设置文件（.msi）？我有一个小脚本，但我需要一个安装程序才能将它与“InstallSimple”程序一起使用，它将安装另一个应用程序。

我尝试使用 pyinstaller，但它支持 2.3-2.7 版本，并且我有一个 3.3 版本的脚本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T06:26:34.313

要创建`.msi`文件，您需要使用[distutils](http://docs.python.org/3.3/distutils/index.html)。基本过程是创建一个`setup.py`包含脚本信息的文件，然后您可以运行`python setup.py bdist_msi`它，它将`.msi`为您创建一个文件。

但是，仅使用它会`.msi`为您的 Python 脚本创建一个 -file，但它需要您首先在计算机上安装 Python。这可能不是你想要的。要解决这个问题，您可以使用[cx_Freeze](http://cx_freeze.readthedocs.org/)`.exe`从脚本创建一个 -file 。cx_Freeze 可以反过来使用 distutils 来制作文件。[这里](http://cx_freeze.readthedocs.org/en/latest/distutils.html#distutils)有一个例子。`.msi`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T04:12:25.653

Have you tried [cx_Freeze](http://cx-freeze.sourceforge.net/) ? According to the latest docs [cx_Freeze 4.3.1 documentation](http://cx_freeze.readthedocs.org/en/latest/), it supports python3.

# c# - 如何在 C# 中散列一个 int[]

> ID：13812335
> 
> 赞同：7
> 
> 时间：2012-12-11T01:42:50.510
> 
> 标签：c#, .net, hash, int

我试图想办法在从 Vector2[] 调用时覆盖 GetHashCode()。此代码为我知道相等的对象生成非唯一散列：我将以下类传递给相同的矩形，并生成不同的散列码。

```
public Shape(Rectangle r)
        {
            edges = new Vector2[4];
            edges[0] = new Vector2(0, 0);
            edges[1] = new Vector2(r.Width, 0);
            edges[2] = new Vector2(r.Width, r.Height);
            edges[3] = new Vector2(0, r.Height);
            Console.Write(edges.GetHashCode() + "\n");
            Position = new Vector2(r.X, r.Y);                
        } 
```

Vector2 数组只是一堆整数。如何为整数列表创建唯一哈希？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T02:08:05.883

你可以使用这样的东西：

```
public static int CombineHashCodes(params int[] hashCodes)
{
    if (hashCodes == null)
    {
        throw new ArgumentNullException("hashCodes");
    }

    if (hashCodes.Length == 0)
    {
        throw new IndexOutOfRangeException();
    }

    if (hashCodes.Length == 1)
    {
        return hashCodes[0];
    }

    var result = hashCodes[0];

    for (var i = 1; i < hashCodes.Length; i++)
    {
        result = CombineHashCodes(result, hashCodes[i]);
    }

    return result;
}

private static int CombineHashCodes(int h1, int h2)
{
    return (h1 << 5) + h1 ^ h2;

    // another implementation
    //unchecked
    //{
    //    var hash = 17;

    //    hash = hash * 23 + h1;
    //    hash = hash * 23 + h2;

    //    return hash;
    //}
} 
```

# asp.net - 如何使用模式弹出窗口填写表格？

> ID：13812337
> 
> 赞同：2
> 
> 时间：2012-12-11T01:43:03.827
> 
> 标签：asp.net, asp.net-ajax, ajaxcontroltoolkit

我有一个带有一堆文本框（街道、号码、城市、邮政编码等）和一个 AJAX modal-popup-extender 的 asp.net 地址表单。

当按下按钮时，会显示一个地址簿（在模式弹出窗口中），用户可以在其中搜索和选择他的注册地址之一。这个列表是使用 GridView 实现的，效果很好。每行都有一个链接按钮，如下所示：

```
<asp:LinkButton ID="AddressNameLinkButton" runat="server"
                CausesValidation="false"
                CommandArgument='<%# Container.DataItem("ADDRESS_ID") %>'
                CommandName="Select"
                Text='<%# Eval("ADDRESS_NAME")%>' /> 
```

按下按钮时，此代码隐藏运行：

```
Protected Sub AddressGridView_RowCommand(...) Handles AddressGridView.RowCommand
    Dim ADDRESS_ID As Long = e.CommandArgument
    If e.CommandName.CompareTo("Select") = 0 Then
        'Some code that retrieves the information 
        'of the selected address goes here.
        CityTextBox.Text = City
        PostalCodeTextBox.Text = PostalCode
        'Etc. Etc.
        SearchModalPopupExtender.Hide()
    End If
End Sub 
```

问题是，虽然这段代码隐藏了模式弹出窗口，但它并没有填写地址表单。

如何从模式弹出窗口填写表格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T23:53:25.557

问题是模型弹出窗口中的 GridView 位于 UpdatePanel 内（感谢 nunespascal 指出这一点）。

为了解决这个问题，我添加了以下代码：

```
Protected Sub AddressGridView_RowDataBound(...) Handles AddressGridView.RowDataBound
    Dim AddressNameLinkButton As LinkButton = e.Row.FindControl("AddressNameLinkButton")
    ScriptManager.GetCurrent(Page).RegisterPostBackControl(AddressNameLinkButton)
End Sub 
```

现在，当我按下 GridView 中的一个 LinkBut​​tons 时，模式弹出窗口将关闭并填充地址表单

# android - 适用于 Windows 7 64 位的 ADT Bundle 缺少 JRE 文件夹并且无法运行 - 我已经尝试过

> ID：13812340
> 
> 赞同：6
> 
> 时间：2012-12-11T01:43:32.260
> 
> 标签：android, eclipse, adt, javaw

所以我从 developer.android.com 下载了 ADT Bundle 的 64 位版本，但是当我运行 eclipse 时（从这个包 - 这不是试图将插件添加到现有的 IDE，这只是包）它告诉我我在 adt...\eclipse\jre\bin\javaw.exe 的路径中缺少 javaw.exe

我在我的计算机上找到了我的个人 java 安装并将文件复制过来，但现在它说它无法运行 .dll 文件。

有人有建议吗？甚至这个捆绑包使用哪个 JRE 版本？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-11T02:09:48.647

好的，现在我不好意思问这个问题什么时候这么微不足道，所以让我解释一下：D

我运行一个 64 位系统，由于某种原因，java 将我的浏览器读取为 32 位（我不知道当时只有一个版本的 chrome - 32 位）所以我得到了一个 32 位版本的 jre，所以当我复制过来时x64 adt 文件夹中的文件失败了，这就是原因。

所以我所做的就是从第三方站点（cnet）下载 x64 jre，然后完成我的复制过程。

像魅力一样工作：D

如果有人遇到这个问题，我希望这篇文章能找到你（或你，它），它会有所帮助。对于社区，很抱歉提出这个问题并最终通过我自己的故障排除 xD 的最后尝试来解决它。

***[问题修复摘要]*** - 为您正确版本的操作系统下载 JRE - 复制 JRE 内容并将它们添加到您的 Eclipse 文件夹中。

请记住，您的 jre 文件夹可能命名为“Jre7u”或其他名称，您要做的是打开该文件夹，选择里面的所有内容，转到您的 ADT 文件夹，进入 eclipse 文件夹，创建您自己的名为“jre”的文件夹然后将所有内容粘贴到该文件夹​​中。

应该像魅力一样工作：D

-ZenOokami

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T22:40:31.253

安装正确版本的 JRE 后，您还可以将 -vm 添加到 ini 中。也无法从 Programs Files (x86) 中工作

## 所以把它添加到ini文件的顶部

-vm C:\Program Files\Java\jre7\bin

# nginx - nginx - 如何组合重定向？

> ID：13812341
> 
> 赞同：0
> 
> 时间：2012-12-11T01:43:45.947
> 
> 标签：nginx

在我的 nginx.conf 文件中，我有这样的内容：

```
...
location ^~ /path1/ {
    root  /usr/local/html;
    index path1.html;
}

location ^~ /path2/ {
    root  /usr/local/html;
    index path2.html;
}
... 
```

是否可以通过使用通配符、重写或其他方式将两个“重定向”合并为一个？

如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T01:52:14.133

你看过[nginx wiki](http://wiki.nginx.org/Main)吗？你所追求的是[HttpRewriteModule](http://wiki.nginx.org/HttpRewriteModule)

来自上述wiki的一个例子非常接近你所追求的：

```
location /download/ {
  rewrite  ^(/download/.*)/media/(.*)\..*$  $1/mp3/$2.mp3  break;
  rewrite  ^(/download/.*)/audio/(.*)\..*$  $1/mp3/$2.ra   break;
  return   403;
} 
```

# javascript - javascript将对象转换或包装成复杂JSON的数组

> ID：13812344
> 
> 赞同：5
> 
> 时间：2012-12-11T01:43:59.800
> 
> 标签：javascript, underscore.js

我有一个看起来像这样的 JSON：

```
var countries = [
{
  name: 'united states',
  program: {
              name: 'usprogram'
           }
},
{
  name: 'mexico',
  program: {
              name: 'mexico program'
           }
},
{
  name: 'panama',
  program: [
             {
               name: 'panama program1'
             },
             {
               name: 'panama program2'
             }
           ]
},
{
  name: 'canada'
}
]; 
```

有没有办法总是将`countries.programs`对象包装到一个数组中，以使最终输出看起来像这样？我尝试了 underscoreJS 中的一些实用功能，但解决方案却让我望而却步。

```
var countries = [
{
  name: 'united states',
  program: [    //need to wrap this object into an array
             {
              name: 'usprogram'
             }
           ]
},
{
  name: 'mexico',
  program: [   //need to wrap this object into an array
             {
               name: 'mexico program'
             }
           ]
},
{
  name: 'panama',
  program: [
             {
               name: 'panama program1'
             },
             {
               name: 'panama program2'
             }
           ]
},
{
  name: 'canada'
}
]; 
```

谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-11T01:51:46.703

不是自动的，没有。遍历国家，然后`country.program = [].concat(country.program)`。如果它不是数组，最后一个魔法将包装该值，如果它是，则保持原样。大多。（这将是一个不同但等效的数组）。

**根据请求编辑**：

```
_.each(countries, function(country) {
  country.program = [].concat(country.program);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T01:50:37.537

像这样的东西可以工作

```
_.each(countries, function(country) { 
          ! _.isArray(country.program) && (country.program = [country.program]);
                  }); 
```

# java - Java中初始化的HashSet数组

> ID：13812350
> 
> 赞同：0
> 
> 时间：2012-12-11T01:44:57.647
> 
> 标签：java, collections, initialization

我在初始化 HashSet 数组时遇到问题

```
 int N = 100;
  HashSet<Integer> []array = new HashSet[N]; 
  for (HashSet<Integer> set:array){
    set = new HashSet<Integer>();
  } 
```

但该数组仅包含空值。（当 HashSet []array = .... 时也会出错）

但是当运行时：

```
 for(int i = 0; i < N; i++){
      array[i] = new HashSet<Integer>();
   } 
```

一切都很好。

为什么第一个代码不起作用？是我的错吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T01:47:06.507

您实际上从未将初始化实例分配给数组的元素。相反，您使用一个变量迭代数组的元素，该变量被分配给循环中的新对象，然后永远不会使用。在这种情况下，增强的 for...each 语法不合适，请改用传统的 for 循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T02:28:15.110

Java 中的两个 'for' 是不同的，请查看 Java 代码和字节码 .. 示例：

```
public class T{
        public static void main(String[] args){
            String[] data = new String[10];
            System.out.print("");
            for(String str:data){
                str="1";
            }   
            System.out.print("");
            for(int i=0;i<data.length;i++){
                data[i]="1";
            }
        }
    }

$>javac -classpath . T.java
$>javap -c T

Compiled from "T.java"
public class T extends java.lang.Object{
public T();
  Code:
   0:   aload_0
   1:   invokespecial   #1; //Method java/lang/Object."<init>":()V
   4:   return

public static void main(java.lang.String[]);
  Code:
   0:   bipush  10
   2:   anewarray   #2; //class java/lang/String
   5:   astore_1
   6:   getstatic   #3; //Field java/lang/System.out:Ljava/io/PrintStream;
   9:   ldc #4; //String 
   11:  invokevirtual   #5; //Method java/io/PrintStream.print:(Ljava/lang/String;)V
   14:  aload_1
   15:  astore_2
   16:  aload_2
   17:  arraylength
   18:  istore_3
   19:  iconst_0
   20:  istore  4
   22:  iload   4
   24:  iload_3
   25:  if_icmpge   44
   28:  aload_2
   29:  iload   4
   31:  aaload
   32:  astore  5
   34:  ldc #6; //String 1
   36:  astore  5
   38:  iinc    4, 1
   41:  goto    22
   44:  getstatic   #3; //Field java/lang/System.out:Ljava/io/PrintStream;
   47:  ldc #4; //String 
   49:  invokevirtual   #5; //Method java/io/PrintStream.print:(Ljava/lang/String;)V
   52:  iconst_0
   53:  istore_2
   54:  iload_2
   55:  aload_1
   56:  arraylength
   57:  if_icmpge   71
   60:  aload_1
   61:  iload_2
   62:  ldc #6; //String 1
   64:  aastore
   65:  iinc    2, 1
   68:  goto    54
   71:  return

} 
```

从第 25--44 行和第 57--71 行开始： aload ：从局部变量中检索对象引用并将其压入操作数堆栈。aaload ：从对象数组中检索对象引用并将其放在堆栈上。

astore ：将对象或引用存储到局部变量。aastore ：将引用类型值存储到数组。

所以，首先不能存储数组，没有使用初始化数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T01:53:23.737

An `enhanced for loop`, 不使用数组（以及集合）中的实际实例，而是将它们复制到循环控制变量中。

这不应该是非空值的问题，因为它们指向同一个对象。问题出现了，如果值为空，并且将值重新分配给控制变量，不会改变实际值。因此，在这种情况下，请始终使用常规`for`循环。

对于原始类型的数组也是如此，因为处理它们并更改复制的变量不会影响原始变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-22T22:51:51.330

只需使用 new Set[n] 而不是 new HashSet[n] 即可使其正常工作

```
Set<Integer>[] list = new Set[n];
for(int i=0;i<n;i++)
  list[i] = new HashSet<>(); 
```

# scala - 为什么我们需要 scala 中的隐式参数？

> ID：13812352
> 
> 赞同：5
> 
> 时间：2012-12-11T01:45:04.737
> 
> 标签：scala, akka

我是scala的新手，今天当我遇到这个akka[源代码](https://github.com/akka/akka/blob/release-2.0/akka-actor/src/main/scala/akka/dispatch/Future.scala#L154)时，我很困惑：

```
def traverse[A, B](in: JIterable[A], fn: JFunc[A, Future[B]], 
      executor: ExecutionContext): Future[JIterable[B]] = {
    implicit val d = executor
    scala.collection.JavaConversions.iterableAsScalaIterable(in).foldLeft(
        Future(new JLinkedList[B]())) { (fr, a) ⇒
      val fb = fn(a)
      for (r ← fr; b ← fb) yield { r add b; r }
    }
  } 
```

为什么故意使用隐式参数编写代码？为什么不能写成：

```
scala.collection.JavaConversions.iterableAsScalaIterable(in).foldLeft(
  Future(new JLinkedList[B](),executor)) 
```

没有声明一个新的隐式变量`d`？这样做有什么好处吗？现在我只发现隐式增加了代码的歧义。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T07:43:55.127

我可以给你3个理由。

1）它隐藏了样板代码。

让我们对一些列表进行排序：

```
import math.Ordering

List(1, 2, 3).sorted(Ordering.Int) // Fine. I can tell compiler how to sort ints
List("a", "b", "c").sorted(Ordering.String) // .. and strings.
List(1 -> "a", 2 -> "b", 3 -> "c").sorted(Ordering.Tuple2(Ordering.Int, Ordering.String)) // Not so fine... 
```

使用隐式参数：

```
List(1, 2, 3).sorted // Compiller knows how to sort ints
List(1 -> "a", 2 -> "b", 3 -> "c").sorted // ... and some other types 
```

2）它允许您使用通用方法创建 API：

```
scala> (70 to 75).map{ _.toChar }
res0: scala.collection.immutable.IndexedSeq[Char] = Vector(F, G, H, I, J, K)

scala> (70 to 75).map{ _.toChar }(collection.breakOut): String // You can change default behaviour.
res1: String = FGHIJK 
```

3）它可以让你专注于真正重要的事情：

```
Future(new JLinkedList[B]())(executor) // meters: what to do - `new JLinkedList[B]()`. don't: how to do - `executor` 
```

这还不错，但是如果您需要 2 个期货怎么办：

```
val f1 = Future(1)(executor)
val f2 = Future(2)(executor) // You have to specify the same executor every time. 
```

隐式为所有动作创建“上下文”：

```
implicit val d = executor // All `Future` in this scope will be created with this executor.
val f1 = Future(1)
val f2 = Future(2) 
```

3.5) 隐式参数允许类型级编程。见[无形](https://github.com/milessabin/shapeless)。

关于“代码的歧义”：

您不必使用隐式，或者您可以显式指定所有参数。有时它看起来很丑（见`sorted`例子），但你可以做到。

如果您找不到哪些隐式变量用作参数，您可以询问编译器：

```
>echo object Test { List( (1, "a") ).sorted } > test.scala
>scalac -Xprint:typer test.scala 
```

你会`math.this.Ordering.Tuple2[Int, java.lang.String](math.this.Ordering.Int, math.this.Ordering.String)`在输出中找到。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T07:55:57.360

在您链接的 Akka 代码中，确实可以显式传递执行程序。但是，如果在整个方法中使用了多个`Future`参数，那么声明隐式参数肯定是有意义的，可以避免多次传递它。

所以我想说，在你链接的代码中，隐式参数只是为了遵循一些代码风格。例外是很难看的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T07:19:57.570

你的问题引起了我的兴趣，所以我在网上搜索了一下。这是我在这个博客上找到的：http: [//daily-scala.blogspot.in/2010/04/implicit-parameters.html](http://daily-scala.blogspot.in/2010/04/implicit-parameters.html)

什么是隐式参数？

> 隐式参数是标记为隐式的方法或构造函数的参数。这意味着如果未提供参数值，则编译器将搜索范围内定义的“隐式”值（根据解析规则。）

为什么要使用隐式参数？

> 隐式参数非常适合简化 API。例如，集合使用隐式参数为许多集合方法提供 CanBuildFrom 对象。这是因为通常用户不需要关心这些参数。另一个例子是向 IO 库提供编码，因此编码被定义一次（可能在包对象中），并且所有方法都可以使用相同的编码，而不必为每个方法调用定义它。

# c# - 最大并发 HttpWebRequest 数移除限制

> ID：13812354
> 
> 赞同：1
> 
> 时间：2012-12-11T01:45:21.360
> 
> 标签：c#, .net, multithreading, asynchronous, httpwebrequest

我们正在尝试使用 HttpWebRequest 提交大量并发 Web 请求，以对服务器进行压力测试。

对于此示例，正在测试的 Web 服务方法只是暂停 30 秒，然后返回，以便进行队列深度和同时请求测试。

客户端日志显示 200 个调用在约 1 秒内成功并行排队，使用多个调用：

```
HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(uri);
request.BeginGetResponse(); 
```

Fiddler 显示第一个约 80 个请求同时发送到服务器，然后在任何初始响应返回之前，Fiddler 显示剩余的约 120 个请求以大约 1/秒的速度添加。

按照[这里](https://stackoverflow.com/questions/1361771/max-number-of-concurrent-httpwebrequests)的建议，可以将有效限制从大约 10 增加到大约 80。我希望在不诉诸多台机器/流程的情况下消除下一个障碍。有任何想法吗？

```
// Please excuse the blind setting of these values to find the other problem.
// These were set much higher but did not help
ThreadPool.SetMinThreads(30, 15);
ThreadPool.SetMaxThreads(30, 15);
System.Net.ServicePointManager.DefaultConnectionLimit = 1000; 
```

在 App.Config 中

```
 <system.net>
    <connectionManagement>
      <clear/>   
    </connectionManagement>
   </system.net> 
```

还有一点是，当在简单的延迟测试之前执行并完成大量请求时，延迟测试能够达到80个左右同时进行。从“冷”开始通常将其限制在 10 左右。

# r - 时区不同时检查日期是否相等

> ID：13812355
> 
> 赞同：1
> 
> 时间：2012-12-11T01:45:31.917
> 
> 标签：r, timezone

由于我无法解决的原因，我收到了带有奇数时区的 R 数据。

我希望测试数据集中的最新日期是否等于给定日期（例如当前日期），但是我遇到了（不需要的）时区转换问题。是否有一种自然的方法来测试两个日期字符串是否相同，*即使*时区不同？我不一定知道数据的时区。

我遇到了两个“解决方案”，但是两者似乎都是低效（和限制）的黑客：

```
substr(as.character(last(odd_data$date)), 1, 10) == substr(as.character(Sys.Date()), 1, 10) 
```

和

```
lastDate <- as.POSIXlt(last(odd_data$date))
as.Date(paste0(lastDate$year + 1900, "-", lastDate$mon + 1, "-", lastDate$mday)) == Sys.Date() 
```

两者都让我得到了我需要的答案，但我觉得我*正在反对*这种语言。

我想回答的问题是：如果不同时区的人写下进行实验的日期，它是否与我提供的日期相同（示例代码是`Sys.Date()`）？

--

消歧-假设我有这两个日期：

```
> date.Syd <- as.POSIXct("2012-12-11 08:30:01", tz = 'Australia/Sydney')
> date.Syd
[1] "2012-12-11 08:30:01 EST"

> date.Ldn <- as.POSIXct("2012-12-11 23:00:11", tz = 'GMT')
> date.Ldn
[1] "2012-12-11 23:00:11 GMT" 
```

在哪里：

```
> as.Date(date.Syd)
[1] "2012-12-10"
> unclass(date.Syd)
[1] 1355175001
attr(,"tzone")
[1] "Australia/Sydney"

> as.Date(date.Ldn)
[1] "2012-12-11"
> unclass(date.Ldn)
[1] 1355266811
attr(,"tzone")
[1] "GMT" 
```

在这种情况下，由于时区转换，日期相等性测试失败（不受欢迎）：

```
> as.Date(date.Syd) == as.Date(date.Ldn)
[1] FALSE 
```

这就是为什么我使用我丑陋的角色/POSIXlt hacks：

```
> substr(as.character(date.Syd), 1,10) == substr(as.character(date.Ldn), 1,10)
[1] TRUE 
```

和

```
> date.Syd_lt <- as.POSIXlt(date.Syd)
> date.Ldn_lt <- as.POSIXlt(date.Ldn)

> paste0(date.Syd_lt$year + 1900, "-", date.Syd_lt$mon + 1, "-", date.Syd_lt$mday) == 
+ paste0(date.Ldn_lt$year + 1900, "-", date.Ldn_lt$mon + 1, "-", date.Ldn_lt$mday)
[1] TRUE 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T06:28:00.433

我发现让日期时间函数在输入中识别“tz”参数的唯一方法是在使用 as.POSIXct 之前使用 as.POSIXlt：

```
> date.p5 <- as.POSIXct( as.POSIXlt(Sys.time(), tz = 'GMT+5'))
> date.m5 <- as.POSIXct( as.POSIXlt(Sys.time(), tz = 'GMT-5'))
> date.p5
[1] "2012-12-11 01:02:51 GMT"
> date.m5
[1] "2012-12-11 11:03:05 GMT"

> date.m5C <-  as.POSIXct(Sys.time(), tz = 'GMT-5')
> date.m5C
[1] "2012-12-10 22:08:19 PST"
> date.p5C <-  as.POSIXct(Sys.time(), tz = 'GMT+5')
> date.p5C
[1] "2012-12-10 22:08:44 PST"

> date.l0PST <-  as.POSIXlt(Sys.time(), tz = 'PST')
> date.l0PST
[1] "2012-12-11 06:15:31 UTC"  # My clock reads 22:15:31 Pacific (US) Standard Time
> date.c0PST <-  as.POSIXct(Sys.time(), tz = 'PST')
> date.c0PST
[1] "2012-12-10 22:15:42 PST" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T02:04:49.197

如果转换为`Date`，则会丢失时区信息。

正如`?Sys.Date`所说

> 'Sys.Date' 返回当前时区的当前日期。

因此，在给定的时间点，它可能会根据您所在的时区返回不同的值。

```
> Sys.setenv(TZ="Australia/Sydney")
> d <- Sys.Date()
> d
[1] "2012-12-11"

> Sys.setenv(TZ="America/Los_Angeles")
> Sys.Date()
[1] "2012-12-10"
> d
[1] "2012-12-11" 
```

相反，您可以使用`Sys.time()`which contains timezone 信息，因为它是`POSIXct`

```
> Sys.setenv(TZ="America/Los_Angeles")
> .POSIXct(Sys.time(), tz='America/Los_Angeles')
[1] "2012-12-10 18:01:26.667964 PST"
> .POSIXct(Sys.time(), tz='Australia/Sydney')
[1] "2012-12-11 13:01:26.668636 EST"

> Sys.setenv(TZ="Australia/Sydney")
> .POSIXct(Sys.time(), tz='America/Los_Angeles')
[1] "2012-12-10 18:01:26.669352 PST"
> .POSIXct(Sys.time(), tz='Australia/Sydney')
[1] "2012-12-11 13:01:26.669907 EST" 
```

IMO，`POSIXlt`一般应该避免，但如果你真的想要，你可以转换为`POSIXlt`

```
> Sys.setenv(TZ="America/Los_Angeles")
> as.POSIXlt(Sys.time(), tz='America/Los_Angeles')
[1] "2012-12-10 18:09:27.135976 PST"
> as.POSIXlt(Sys.time(), tz='Australia/Sydney')
[1] "2012-12-11 13:09:27.137197 EST"

> Sys.setenv(TZ="Australia/Sydney")
> as.POSIXlt(Sys.time(), tz='America/Los_Angeles')
[1] "2012-12-10 18:09:27.138371 PST"
> as.POSIXlt(Sys.time(), tz='Australia/Sydney')
[1] "2012-12-11 13:09:27.13928 EST" 
```

# html - 看不到 Facebook 的“赞”按钮

> ID：13812361
> 
> 赞同：-1
> 
> 时间：2012-12-11T01:47:04.117
> 
> 标签：html, facebook, facebook-like

我检查了其他类似的问题并尝试了各种解决方案，但都没有奏效。这是我得到的：

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/es_LA/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

---

<div class="fb-like" data-href="http://www.facebook.com/clavedrock" data-send="true" data-layout="button_count" data-width="450" data-show-faces="false" data-font="verdana"></div> 
```

我已经检查了调试器：[https](https://developers.facebook.com/tools/debug) ://developers.facebook.com/tools/debug并且没有问题...

该网站是：[http ://clavederock.com.ar](http://clavederock.com.ar)

有人能帮我吗？？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T02:24:20.017

问题是您通过指向一个不存在的 URL 来加载 Facebook 的点赞按钮：“http://www.facebook.com/clavedrock”（我尝试打开该地址但它不存在）。我将它（使用 chrome 的控制台）更改为“http://www.clavederock.com.ar”，它起作用了！:)

你只需要改变这个：

```
data-href="http://www.facebook.com/clavedrock" 
```

对此：

```
data-href="http://www.clavederock.com.ar" 
```

（或为 Clave de Rock 创建一个 Facebook 页面。

# eclipse - 作为 Java 应用程序调试 - onModuleLoad() 错误

> ID：13812365
> 
> 赞同：0
> 
> 时间：2012-12-11T01:47:23.673
> 
> 标签：eclipse, debugging, google-app-engine, gwt

我正在尝试使用已经设计的某种登录页面来调试现有应用程序。但是，当我在 Eclipse 中转到“作为 Java 应用程序运行”时，我收到一个错误：

```
01:18:30.207 [ERROR] [pzflex_test] Unable to load module entry point class com.wai.pzflex.client.PZFlex_Test (see associated exception for details)
java.lang.AssertionError: null
    at com.google.gwt.user.client.ui.TextBox.wrap(TextBox.java:63)
    at com.wai.pzflex.client.PZFlex_Test.onModuleLoad(PZFlex_Test.java:60)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.google.gwt.dev.shell.ModuleSpace.onLoad(ModuleSpace.java:396)
    at com.google.gwt.dev.shell.OophmSessionHandler.loadModule(OophmSessionHandler.java:200)
    at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:525)
    at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:363)
    at java.lang.Thread.run(Unknown Source) 
```

这是我尝试使用 Eclipse 调试的代码。

```
public void onModuleLoad() 
    {
        try
        {
        HTMLPanel panel = new HTMLPanel("<table align='center'><tr>" + 
            "<td colspan='2' style='font-weight:bold;'>Please enter your username and password:</td>" +
            "</tr><tr><td>Username: </td><td><input type='text' id='loginuser'></td></tr>" +
            "<tr><td>Password: </td><td><input type='password' id='loginpass'></td></tr>" +
            "<tr><td colspan='2' align='right'><button id='loginbutton'>Login</button></td>" +
            "</tr></table>");

        //final - entity that cannot be changed later
        final TextBox username = TextBox.wrap(panel.getElementById("loginuser"));
        final TextBox pass = TextBox.wrap(panel.getElementById("loginpass"));

        RootPanel.get("content").add(panel); 
```

该应用程序似乎一直运行到“最终文本框..”代码行，但是当我按下恢复时，我得到了错误。

奇怪的是我可以进行 GWT 编译并且登录页面似乎加载正常。我不明白为什么当我去调试它时会发生这种情况。

再次，我是 Java 和整个 GWT/GAE 的新手，所以任何建议都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:24:21.690

看看失败的断言是什么：

```
public static TextBox wrap(Element element) {
  // Assert that the element is attached.
  assert Document.get().getBody().isOrHasChild(element); 
```

*（来源：[https ://code.google.com/p/google-web-toolkit/source/browse/tags/2.5.0/user/src/com/google/gwt/user/client/ui/TextBox.java第61章](https://code.google.com/p/google-web-toolkit/source/browse/tags/2.5.0/user/src/com/google/gwt/user/client/ui/TextBox.java#61)）*

这意味着你需要`RootPanel.get("content").add(panel);`在你之前`TextBox.wrap()`。

**除了**它也不起作用。稍后它会失败，因为被包装的元素在一个小部件（`HTMLPanel`）中。

您需要做的是`<input>`从 HTML 字符串中删除 并将 ID 添加到`<td>`，构建您的`TextBox`和`PasswordBox`喜欢的常规小部件，然后使用[`add(Widget,String)`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/HTMLPanel.html#add%28com.google.gwt.user.client.ui.Widget,%20java.lang.String%29)将它们`<td>`放在`HTMLPanel`.

根据您需要做的事情，也许您不需要s 作为小部件，在这种情况`<input>`下，只需`getElementById`将结果用于.`HTMLPanel``cast()`[`InputElement`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/dom/client/InputElement.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-11T04:57:20.027

调试并检查是否返回 null ......如果为 null，请在您的 html 文件中创建一个具有该`panel.getElementById("loginuser")`id的**div**`panel.getElementById("loginpass")` `RootPanel.get("content")`

# android - Android：json的值为null

> ID：13812372
> 
> 赞同：0
> 
> 时间：2012-12-11T01:48:37.433
> 
> 标签：android, json

在我的Android项目中，当用户登录时，它会访问我们的服务器并向客户端返回一个json数据，当用户输入错误的用户名或密码时，服务器将返回json数据，如下所示：

```
{"d":{"__type":"FMService.LoginUser:#StarHope.FMS.Web.Pages.Service","Error":"worng","Permissions":null,"UserInfo":null}} 
```

但是当用户输入正确的用户名和密码时，返回数据“Error”为空。所以键“Error”的值为空。我尝试这个来处理它。

```
 try
        {
          //when Error is not null
          String error = (String) map.get("Error"); 
        } 
        catch (Exception e)
        {
          //when Error is null
        } 
```

这个可以吗？这有什么问题吗？给你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T01:52:24.250

您可以使用[`getString()`](https://developer.android.com/reference/org/json/JSONObject.html#getString%28java.lang.String%29). `JSONException`如果缺少映射，此方法将引发 a 。

> 公共字符串 getString（字符串名称）
> 
> 在 API 级别 1 中添加 如果存在，则返回按名称映射的值，必要时强制它。
> 
> 如果不存在这样的映射，则抛出 JSONException。

您还可以使用以下方法测试映射是否存在或为空[`isNull()`](https://developer.android.com/reference/org/json/JSONObject.html#isNull%28java.lang.String%29)

请注意，该`Error`字段位于`d`对象内部，而不是根。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T01:58:40.727

在向 Map 添加值之前，解析您的 json 字符串`isNull`以检查内容是否为 NULL：`jsonobject`

```
JSONObject jobject=new JSONObject("YOUR_JSON_STRING");

if(!jobject.isNull("d")){
  JSONObject jobjd=jobject.getJSONObject("d");
 String strtype,strError;
  if(jobjd.isNull("__type")){
     strtype=jobjd.getString("__type");
    }
   else{
      //do some code here
        strtype="is null";
    }
  if(jobjd.isNull("Error")){
     strError=jobjd.getString("Error");
    }
   else{
      //do some code here
        strError="is null";
    }
    //.....same code here for Permissions and UserInfo
}

else{
   //do some code here
} 
```

# r - R S4 类和 Matrix 包中的重载 + 运算符

> ID：13812373
> 
> 赞同：2
> 
> 时间：2012-12-11T01:48:47.620
> 
> 标签：r, operator-overloading, sparse-matrix, s4

尝试重载`+`运算符并将`Matrix`包与稀疏矩阵一起使用时，我得到了一个奇怪的效果。我首先定义了一个非常简单的类，它不使用 Matrix 包但有一个`+`操作符。然后我对两个稀疏矩阵求和。第一个`M+M`添加提供了预期的结果，但第二个抛出了错误。这是一个生成错误的非常简单的代码：

```
require(Matrix)
setClass("TestM",representation(M='numeric'))
setMethod("initialize", "TestM", function(.Object,x) { 
  .Object@M = x
  .Object
})
setMethod("+", c("TestM","TestM"), function(e1,e2) {
  e1@M + e2@M
})

M = Matrix(diag(1:10),sparse=T)
M+M  # > FINE
M+M  # > ERROR

M = Matrix(diag(1:10),sparse=F)
M+M  # > FINE
M+M  # > FINE 
```

第二次添加会引发以下错误：

```
Error in forceSymmetric(callGeneric(as(e1, "dgCMatrix"), as(e2, "dgCMatrix"))) : 
  error in evaluating the argument 'x' in selecting a method for function
'forceSymmetric': Error in .Arith.Csparse(e1, e2, .Generic, class. = "dgCMatrix") :
  object '.Generic' not found 
```

如果矩阵不是稀疏的，则不会发生错误。`+`I 定义和`+`for sparseMatrix之间是否存在一些干扰？我没有`+`正确定义运算符吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T02:10:05.137

尝试将 Ops 类设置为重载：

```
> setMethod(Ops, c("TestM","TestM"), function(e1,e2) {
+   e1@M + e2@M
+ })
[1] "Ops"
attr(,"package")
[1] "base"
> 
> M = Matrix(diag(1:10),sparse=T)
> M+M  # > FINE
10 x 10 sparse Matrix of class "dsCMatrix"

 [1,] 2 . . .  .  .  .  .  .  .
 [2,] . 4 . .  .  .  .  .  .  .
 [3,] . . 6 .  .  .  .  .  .  .
 [4,] . . . 8  .  .  .  .  .  .
 [5,] . . . . 10  .  .  .  .  .
 [6,] . . . .  . 12  .  .  .  .
 [7,] . . . .  .  . 14  .  .  .
 [8,] . . . .  .  .  . 16  .  .
 [9,] . . . .  .  .  .  . 18  .
[10,] . . . .  .  .  .  .  . 20
> M+M  # (NOT error)... was  ERROR
10 x 10 sparse Matrix of class "dsCMatrix"

 [1,] 2 . . .  .  .  .  .  .  .
 [2,] . 4 . .  .  .  .  .  .  .
 [3,] . . 6 .  .  .  .  .  .  .
 [4,] . . . 8  .  .  .  .  .  .
 [5,] . . . . 10  .  .  .  .  .
 [6,] . . . .  . 12  .  .  .  .
 [7,] . . . .  .  . 14  .  .  .
 [8,] . . . .  .  .  . 16  .  .
 [9,] . . . .  .  .  .  . 18  .
[10,] . . . .  .  .  .  .  . 20 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-01T11:01:13.640

差不多 3.5 年后，我偶然发现了同样的错误，这也是最近一个问题的主题：[setMethod 和 package Matrix](https://stackoverflow.com/questions/34221612/setmethod-and-package-matrix)。我已经向 R-devel 发送了一个错误报告，但后来发现，只有在包之外进行重载时，该错误才可重现。换句话说，如果您在包`+`中为类的对象定义方法并通过加载包来加载`testM`重载的`+`函数，它将解决初始问题，而不必以通用方式重载整个组（这并不总是可能的） ）。

# design-patterns - VHDL FSM 模式检查器

> ID：13812376
> 
> 赞同：0
> 
> 时间：2012-12-11T01:49:13.113
> 
> 标签：design-patterns, vhdl, fsm

我正在尝试编写一些 vhdl 来检测一串位中的给定模式。当电路在输入流中找到模式“110”时，它应该输出 1。我的输入是“X”，我的输出是“Z”。

我不确定如何检查“110”的输入模式。

这是我到目前为止所拥有的：

```
library IEEE;
use IEEE.STD_LOGIC_1164.ALL;

entity checker is
     Port ( clk : in  STD_LOGIC;
       x : in  STD_LOGIC;
       z : out  STD_LOGIC);
end checker;

architecture Behavioral of checker is

   type state_type is (S0, S1, S2);
   signal pr_state: state_type := S0;
   signal nx_state: state_type := S0;

 begin

process(clk) begin
  if (rising_edge(clk)) then
      pr_state <= nx_state;
  end if;
end process;

process(pr_state, nx_state) begin

case (pr_state) is 

    when S0 =>  
        z <= '0';
        nx_state <= S1;

    when S1 => 
        z <= '0';
        nx_state <= S2;

    when S2 => 
        z <= '1';
        nx_state <= S0;

end case;

end process;

end Behavioral; 
```

有什么想法吗？感谢您的反馈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T17:40:59.463

状态机过度复杂化（除非有使用状态逻辑的某些要求）。仅使用移位寄存器和比较器是合理的。假设“110”意味着“1”是收到的第一位，您可以执行以下操作（警告！我没有测试此代码。）：

```
architecture Behavioral of checker is
   signal shift_reg : std_logic_vector(2 downto 0) := "000";

begin
  process(clk) begin
      if rising_edge(clk) then

         -- Assert the output signal if the pattern is found
         if (shift_reg = "110") then
            z <= '1';
         else
            z <= '0';
         end if;

         -- Keep a 3-bit deep buffer for comparison.
         shift_reg(2 downto 0) <= shift_reg(1 downto 0) & x;

      end if;
   end process;
end architecture Behavioral; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T21:19:01.243

如果需要 FSM，最简单的可能就是遍历可能性：

```
achictecture behavior of checker is
   types states is (SEARCHING, SAW_1, SAW_11, SAW_110);
   signal state : states := SEARCHING;

begin
   process (clk) begin
      if rising_edge(clk) then
         case (state) is
         when SEARCHING:
            if (z = '1') then
               state <= SAW_1;
            else
               state <= SEARCHING;
            end if;
            z <= '0';

         when SAW_1:
            if (z = '1') then
               state <= SAW_11;
            else
               state <= SEARCHING;
            end if;
            z <= '0';

         when SAW_11:
            if (z = '0') then
               state <= SAW_110;
            else
               state <= SEARCHING;
            end if;
            z <= '0';

         when SAW_110:
            state <= SEARCHING;
            z <= '1';

         end case;

      end if;
   end process;
end architecture behavior; 
```

这使用了与原始代码不同的 FSM 结构，并且可以稍微改进（至少可以删除 1 个状态），但我认为它说明了这一点。

# eclipse - 从 logcat 中过滤掉一个特定的词

> ID：13812378
> 
> 赞同：0
> 
> 时间：2012-12-11T01:49:18.993
> 
> 标签：eclipse, android-logcat

我想停止显示所有带有“Trace”标签的日志。我如何创建一个过滤器来显示除此之外的所有内容？

![在此处输入图像描述](../Images/f8bc35b39156013957849790a8a47713.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T01:53:23.120

您是否尝试将过滤器放入日志上方的文本字段（在您的屏幕截图中）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T02:20:34.860

使用 ^(?!. *(TagToFilterOut))。*$

在创建新过滤器时的 byLogTag 字段中

# python - 将列表分成相等的部分

> ID：13812382
> 
> 赞同：-4
> 
> 时间：2012-12-11T01:49:41.270
> 
> 标签：python

还，

人= ['保罗'，'弗朗索瓦'，'安德鲁'，'苏'，'史蒂夫'，'阿诺德'，'汤姆'，'丹尼'，'尼克'，'安娜'，'丹'，'黛安' , '米歇尔', '杰米', '凯伦']

num_teams = 4

L 应包含 4 个子列表，其中包含 0,1,2,3,0,1,2,3 格式的元素索引

```
 def form teams(people, num_teams):

   '''make num_teams teams out of the names in list people by counting off. people in a list of people's name(strs) and num_teams(an int >= 1) is the desired
   number of teams. Return a list of lists of names, each sublist representing a team.'''

 L= []
# Make an outer list
 for i in range(num_teams):
       L.append([])
# make an i th number of sublist according to the range

for team in range(num_teams) #in this case 0,1,2,3
      for i in range(0, len(people), num_teams) #start from 0 to len(people) which in this case is 15 and  by taking 0,1,2,3, steps 
          if (team + i) < len(people): <---??????
               L[team].append(people[team+i]) <---??????

 return L
 print(L)

 [['paul', 'steve', 'nick', 'michelle'],['francois','arnold','anna','jeremy'],     ['andrew','tom','dan','karen'],['sue','danny','diane'] 
```

有人可以解释我放置的那些吗？关于它，我是否正确理解了概念？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T01:59:20.230

我不太确定您要达到什么目的，但这也许可以达到您的目的：

```
print ( [ [x for i, x in enumerate (people) if i % num_teams == y] for y in range (num_teams) ] ) 
```

使用您的人员数组和 num_teams = 4，输出：

```
[['paul', 'steve', 'nick', 'michelle'], ['francois', 'arnold', 'anna', 'jermy'], ['andrew', 'tom', 'dan', 'karen'], ['sue', 'danny', 'diane']] 
```

当 num_teams = 3 时，输出为：

```
[['paul', 'sue', 'tom', 'anna', 'michelle'], ['francois', 'steve', 'danny', 'dan', 'jermy'], ['andrew', 'arnold', 'nick', 'diane', 'karen']] 
```

.

**编辑：6个问号**

用问号标记的第一行检查是否`team + i`在 list 的范围内`people`，以确保在下一个 like`people[team+i]`中不会失败。

用问号标记的第二行将列表中位置的元素附加`team+i`到`people`相应团队的列表中。当我采取 num_teams 范围内的步骤时，您进入第一队（索引为 0）第 0、num_teams-th、2num_teams-th 等人，进入第二队（索引 1）第 1、（num_teams+1 )-th, (2num_teams+1)-the, etc person，依此类推，适用于所有团队。

但请不要使用此代码。它使事情变得过于复杂。您发布的代码的整个功能可以更清楚地表达。

.

**编辑2：**

您作为人类应用的算法是将所有人排成一排并在他们之前通过计数 0 1 2 3 0 1 2 3 0...（正如您已经说过的）。您可以像这样表达地实现它：

```
def makeTeams (people, teamCount):
    teams = []
    for i in range (teamCount): teams.append ( [] )

    #You can write the above two lines as this: teams = [ [] for x in range (teamCount) ]

    curTeam = 0
    #Now walk past the line of people:
    for person in people:
        #Add person to current team
        teams [curTeam].append (person)
        #Add 1 to the team index
        curTeam += 1
        #If you have counted too far, set the current Team to 0
        if curTeam == teamCount: curTeam = 0
        #The two lines above, can be written as curTeam = (curTeam + 1) % teamCount

    return teams 
```

或者你使用 python 的生成器（这是 python 的强项）：

```
makeTeams = lambda people, teamCount: [ [person for i, person in enumerate (people) if i % teamCount == team] for team in range (teamCount) ] 
```

# jquery - 悬停时显示jQuery延迟

> ID：13812383
> 
> 赞同：1
> 
> 时间：2012-12-11T01:50:12.763
> 
> 标签：jquery, hover, delay, show, hoverintent

如何延迟悬停显示“预览”div？

```
function showPreview() {
    $(this).closest('li').find('.preview').show();
}
function hidePreview() {
    $(this).closest('li').find('.preview').hide();
}
$(document).ready(function() {
   // $(".imageGalleryAlbum li a img").hover(showPreview,hidePreview); // Option A
   // $(".imageGalleryAlbum li a img").hoverIntent(showPreview,hidePreview); // Option B
    $(".imageGalleryAlbum li a img").hoverIntent({ //Option C
        over: showPreview,
        timeout: 1000,
        out: hidePreview
    });
}); 
```

我尝试使用 jQuery.hoverIntent 插件，但是对于大量图像，超时显示同级“li”“.preview”div。

此外，在“.imageGalleryAlbum li a img”中移动鼠标可能会导致“预览”div 显示和隐藏。这不是预期的效果。一旦显示“预览” div，它应该只在鼠标不再悬停在“.imageGalleryAlbum li a img”图像上时隐藏。

我创建了以下演示：http: [//jsfiddle.net/9msxR/](http://jsfiddle.net/9msxR/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T01:50:55.490

您可以使用`delay()`动画方法，并添加持续时间`show()`使其动画化，即使只有一毫秒，如下所示，就足够了：

```
$(this).closest('li').find('.preview').delay(1000).show(1); 
```

[**小提琴**](http://jsfiddle.net/9msxR/3/)

# c# - 在存储库中使用 Include() 方法

> ID：13812386
> 
> 赞同：14
> 
> 时间：2012-12-11T01:50:39.777
> 
> 标签：c#, .net, entity-framework, compiler-errors

我在 EF 5 中有以下内容：

```
var a = context.Posts.Include(x => x.Pack).Select(x => x.Pack.Id).ToList(); 
```

这行得通。然后我尝试在我的通用存储库中复制它：

```
public IQueryable<T> Include<T>(Expression<Func<T, Boolean>> criteria) where T : class
{
    return _context.Set<T>().Include(criteria);
} 
```

但在这种情况下，我无法执行以下操作：

```
var b = repository.Include<Post>(x => x.Pack).Select(x => x.Pack.Id).ToList(); 
```

我得到错误：

> 无法将类型“Data.Entities.Pack”隐式转换为“bool”

我该如何解决这个问题？

我应该在 Include() 方法中进行哪些更改？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-11T02:05:31.457

尝试：

改变

```
Expression<Func<T, Boolean>> criteria 
```

到

```
Expression<Func<T, object>> criteria 
```

编辑：要包含多个实体，您需要添加“包含”扩展名：

```
public static class IncludeExtension
{
    public static IQueryable<TEntity> Include<TEntity>(this IDbSet<TEntity> dbSet,
                                            params Expression<Func<TEntity, object>>[] includes)
                                            where TEntity : class
    {
        IQueryable<TEntity> query = null;
        foreach (var include in includes)
        {
            query = dbSet.Include(include);
        }

        return query == null ? dbSet : query;
    }
} 
```

然后你可以像这样使用它：

```
repository.Include(x => x.Pack, x => x.Pack.Roles, ...).Select(x => x.Pack.Id).ToList(); 
```

只要确保“存储库”返回一个“DbSet”对象。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-08-16T17:10:07.073

我使用了公认的答案，但不得不为 EntityFramework Core 稍微修改一下。根据我的经验，我必须保持链继续运行，否则之前的查询引用被覆盖。

```
 public IQueryable<TEntity> Include(params Expression<Func<TEntity, object>>[] includes)
    {
        IIncludableQueryable<TEntity, object> query = null;

        if(includes.Length > 0)
        {
            query = _dbSet.Include(includes[0]);
        }
        for (int queryIndex = 1; queryIndex < includes.Length; ++queryIndex)
        {
            query = query.Include(includes[queryIndex]);
        }

        return query == null ? _dbSet : (IQueryable<TEntity>)query;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-08T00:26:50.340

这就是我们在 EF 6 中所做的结束

```
 public IEnumerable<T> GetIncludes(params Expression<Func<T, Object>>[] includes)
        {
            IQueryable<T> query = table.Include(includes[0]);
            foreach (var include in includes.Skip(1))
            {
                query = query.Include(include);
            }               
            return query.ToList();
        } 
```

# c++ - 从指针数组中删除元素

> ID：13812389
> 
> 赞同：1
> 
> 时间：2012-12-11T01:50:52.553
> 
> 标签：c++, arrays, pointers, vector

我正在创建一个自定义矢量类作为家庭作业的一部分。我目前正在尝试做的是实现一个名为erase的函数，它将一个整数作为参数，将我的数组长度减1，删除参数指定位置的元素，最后将所有元素向下移动以填充在“擦除”元素留下的间隙中。

由于我缺乏使用这种语言的经验，我不完全理解的是如何从指针数组中删除单个元素。

目前，我实现了以下内容：

```
 void myvector::erase(int i)
        {

            if(i != max_size)
            {
                for(int x = i; x < max_size; x++)
                {
                    vec_array[x] = vec_array[x+1];
                }
                vec_size --;

                //delete element from vector;
            }
            else
                //delete element from vector
        } 
```

类声明和构造函数如下所示：

```
template <typename T> 

class myvector
{
    private:
            T *vec_array;
            int vec_size;
            int max_size;
            bool is_empty;

    public:
            myvector::myvector(int max_size_input)
            {
                max_size = max_size_input;
                vec_array = new T[max_size];
                vec_size = 0;
            } 
```

我尝试了以下方法：

1.  使用 delete 尝试删除元素

    删除 vec_size[max_size];

    vec_size[max_size] = NULL；

2.  将元素的值设置为 NULL 或 0

    vec_size[max_size] = NULL

或者

```
vec_size[max_size] = 0 
```

由于运算符“=”不明确或指定类型无法转换为 void *，因此这些都不适合我。

我可能错过了一些简单的东西，但我似乎无法通过这个。任何帮助将非常感激。再次，如果这是愚蠢的事情，很抱歉缺乏经验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T02:04:57.010

如果您的自定义向量类应该像 std::vector 一样工作，那么不要担心对象破坏。如果您需要删除一个元素，您只需将其后面的所有元素复制到左侧一个位置：

```
void myvector::erase(int i)
{
    for (int x = i + 1; x < vec_size; x++) {
        vec_array[x - 1] = vec_array[x];
    }
    vec_size--;
} 
```

这就是您的 erase() 函数必须做的所有基本工作。

如果元素恰好是指针，则不必在意；如果需要，您的向量类的用户负责删除这些指针。您无法确定它们是否真的可以被删除（指针可能指向自动堆栈变量，这些变量是不可删除的。）

因此，永远不要调用`delete`向量的元素。

如果你的向量类有一个`clear()`函数，并且你想确保元素被破坏，只需：

```
delete[] vec_array;
vec_array = new T[max_size];
vec_size = 0; 
```

这就是 std::vector 实际上的工作方式。（嗯，它的基本逻辑；当然，您可以在向量实现中优化很多东西。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T02:00:22.220

由于这是家庭作业，我不会给你一个明确的解决方案，但这里有一种擦除值的方法：

```
loop through and find value specified in erase function
mark values position in the array
starting from that position, move all elements values to the previous element(overlapping 'erased' value)
for i starting at position, i less than size minus one, i plus plus
    element equals next element 
reduce size of vector by 1 
```

看看这是否是一个足够大的提示。

# html - CSS：如何在内容的左侧和右侧制作背景

> ID：13812391
> 
> 赞同：1
> 
> 时间：2012-12-11T01:51:03.717
> 
> 标签：html, css, image, background

我正在尝试创建此布局。 ![流畅的图像布局](../Images/1996f0c7052badfdc4b6648d8fd0d0d8.png)

我希望可以通过 IE 8 及更高版本以及其他标准 Web 浏览器访问该布局。所以我不想使用 CSS3，如果可能的话。

到目前为止，我得到了这个（它没有页眉和页脚，因为它们是原始添加的）：

HTML：

```
<div class="right">
  <div class="left">
    <div class="container clearfix">
    This is an example text<br />
    This is an example text<br />
    This is an example text<br />
    This is an example text<br />
    This is an example text<br />
    </div>
  </div>
</div> 
```

CSS：

```
.right {background: url('images/bgr.jpg') no-repeat scroll right top #FFFFFF;}
.left {background: url('images/bgl.jpg') no-repeat scroll left top transparent;}
.container {width: 960px; margin: 0 auto; position: relative; text-align: left; border: 1px solid red;}
.clearfix:after {clear: both; content: " "; display: block; font-size: 0; height: 0; visibility: hidden;} 
```

问题是，当我以低于 (pic1Width + pic2Width + contentWidth) 的分辨率打开它时，图片将覆盖内容使其消失。我也无法在图片 1 和 2 的左侧和右侧添加流体空间。

感谢您的任何提示！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T02:19:43.940

我假设中心内容固定在中间`margin:0, auto;`

如果是这样的话，我会

```
body
{ 
background-image:url('background.gif');
background-repeat:no-repeat;
background-attachment:fixed;
background-position:center; 
} 
```

并创建背景图像，以便 a) 图片紧贴内容的任一侧和 b) 边缘淡化为足够纯色以匹配 bg 颜色（以防屏幕太宽）。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T12:43:12.343

好的，所以我找到了一个可行的解决方案。

```
<div class="container">
  <div class="container_center">
    <div class="left"></div>
    This is an example text<br />
    This is an example text<br />
    This is an example text<br />
    This is an example text<br />
    This is an example text<br />
    <div class="right"></div>
  </div>
</div> 
```

CSS：

```
.container {
   position: absolute;
   overflow: hidden;
   height: auto;
   width: 100%;
   top: 0px;
   z-index: 2500;
}

.container_center {
   position: relative;
   background-color: green;
   height: auto;
   width: 400px;
   margin:0 auto;
}

.left{
   position: absolute;
   background: #fff url('images/bgl.jpg') no-repeat 0 100%;
   height: 100%;
   width:100%;
   top: 0px;
   left: -100%;
}

.right {
   position: absolute;
   background: #fff url('images/bgr.jpg') no-repeat 0 100%;
   height: 100%;
   width:100%;
   top: 0px;
   left: 100%;
} 
```

您可以检查类似问题的小提琴：http: [//jsfiddle.net/pGYsL/](http://jsfiddle.net/pGYsL/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T02:13:15.947

据我了解这个问题，[这](http://jsfiddle.net/nPcjm/)就是你想要的，使用 a`<table>`比`<div>`s 更容易创建。

# jquery-mobile - jQuery Mobile 通过“下载生成器工具”——不能让它工作

> ID：13812394
> 
> 赞同：0
> 
> 时间：2012-12-11T01:51:26.813
> 
> 标签：jquery-mobile

我只想使用 jQuery Mobile 的幻灯片转换/AJAX 导航组件。在 jQuery Mobile 的网站上，他们有一个“自定义生成器工具”，它可以让您只选择“AJAX 导航系统”（它会自动选择相关的东西，比如转换）。

[http://jquerymobile.com/download-builder/](http://jquerymobile.com/download-builder/)

这会产生一些自定义 JavaScript 和 CSS 文件。对于我的生活，我无法让它在网页上工作。如果我包含这些自定义文件，然后将 data-transition="slide" 添加到锚元素，则不会发生任何事情。如果我包含完整的 jQuery Mobile 库，它可以完美运行（但会破坏我的移动网站的样式）。我怎样才能使这项工作？也许需要手动初始化自定义 jQuery Mobile？我在文档中找不到任何关于此的内容。帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T15:45:17.890

这是我如何让它工作的：

我包含了最新的 jQuery Mobile js，但使用了我的自定义 JQM 构建中的精简 css（使用自定义生成器工具）。

data-role="page" 已添加到页面内容容器中。一些调用的脚本需要移动到现在从内容容器中加载。现在转换按预期工作。

我希望这对某人有所帮助。

# iphone - 这是使用 iOS Facebook SDK 将图像发布到用户墙上时的预期行为吗？

> ID：13812396
> 
> 赞同：1
> 
> 时间：2012-12-11T01:51:39.757
> 
> 标签：iphone, ios, facebook, ipad, facebook-graph-api

我正在使用以下代码发布到用户的墙上。它工作正常，但我注意到它还创建了一个以我的应用程序命名的相册，并将图像添加到该相册。这是 iOS 应用程序的预期行为吗？有没有什么方法可以只在墙上发布而不将图像保存在用户帐户中？

```
FBRequestHandler handler =
^(FBRequestConnection *connection, id result, NSError *error)
{
    // output the results of the request
    NSLog(@"Error - %@", error);
    NSLog(@"Result - %@", result);
};

UIImage *img = [logo getImage];
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:@"Test Message",@"message",img,@"picture",nil];
[FBRequestConnection startWithGraphPath:@"me/Photos"
                             parameters:params
                             HTTPMethod:@"POST"
                      completionHandler:handler]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T04:26:11.737

@GoldenJoe，您正在使用自定义应用程序在 facebook 上发布图像。这样，当您注册应用程序时，您将获得一个 App ID/API 密钥）。从您的 iPhone 应用程序中发布图像时，facebook 会创建一个单独的相册，其名称是您在 Facebook 上注册上述应用程序时使用的名称。

这很正常，Facebook 自己创建了一个单独的相册，并且您使用该应用程序凭据 (APP ID) 发布的所有图像都在同一个相册下。您可能想看看[相册](https://developers.facebook.com/docs/reference/api/album/)和[照片](https://developers.facebook.com/docs/reference/api/photo/)以更好地理解这个概念。

希望能帮助到你！！

# vb.net - 列表中的重复项

> ID：13812398
> 
> 赞同：3
> 
> 时间：2012-12-11T01:51:44.733
> 
> 标签：vb.net, linq, list

我在 VB.NET 中有一个代码，我需要在发票列表中找到重复的项目，具有相同的编号（金额可能不同），这是我必须做的但不起作用，我不知道我是否也许应该使用 LINQ...数据库在 txt 文件中。

```
Public Class Invoice
  Public Property amount As Decimal
  Public Property number As String
  Public Property date As Date

  'extracting information from txt file

  Dim pesquisanotas As List(Of Invoice) = New NotaRepositorio().research() 
```

'部分不工作，它带来的是数字超过 1 的发票号码，而不是重复的发票号码：

```
Dim DuplicateInvoice= From c In pesquisanotas
                                  Where (c.number.Count > 1)
                                  Select c

                    For Each item In DuplicateInvoice
                        MessageBox.Show(item.number)
                    Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T04:11:57.983

如果重复项已经在列表中，那么您可以通过以下方式检测它们：

```
Class DemoClass
  Public Property amount As Decimal
  Public Property number As String
  Public Property [date] As Date
End Class

Private Sub Button2_Click(sender As System.Object, e As System.EventArgs) Handles Button2.Click
  Dim lstSource As New List(Of DemoClass)
  lstSource.Add(New DemoClass With {.amount = 121, .number = "121", .date = #1/1/2012#})
  lstSource.Add(New DemoClass With {.amount = 122, .number = "122", .date = #1/2/2012#})
  lstSource.Add(New DemoClass With {.amount = 123, .number = "123", .date = #1/3/2012#})
  lstSource.Add(New DemoClass With {.amount = 124, .number = "124", .date = #1/4/2012#})
  lstSource.Add(New DemoClass With {.amount = 125, .number = "125", .date = #1/5/2012#})
  lstSource.Add(New DemoClass With {.amount = 126, .number = "126", .date = #1/6/2012#})
  lstSource.Add(New DemoClass With {.amount = 127, .number = "127", .date = #1/7/2012#})
  lstSource.Add(New DemoClass With {.amount = 128, .number = "123", .date = #1/8/2012#}) 'dup'
  lstSource.Add(New DemoClass With {.amount = 129, .number = "129", .date = #1/9/2012#})
  lstSource.Add(New DemoClass With {.amount = 130, .number = "130", .date = #1/10/2012#})
  lstSource.Add(New DemoClass With {.amount = 131, .number = "122", .date = #1/11/2012#}) 'dup'
  lstSource.Add(New DemoClass With {.amount = 132, .number = "132", .date = #1/12/2012#})

  For intOuter As Integer = 0 To lstSource.Count - 2
    For intInner As Integer = intOuter + 1 To lstSource.Count - 1
      If lstSource(intOuter).number = lstSource(intInner).number Then
        'duplicate found
        MsgBox("Duplicate found: " & lstSource(intOuter).number)
      End If
    Next intInner
  Next intOuter
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T03:19:35.350

实现一个自定义`IEquatable(Of T)`并使用该`List(Of T).Contains`函数来防止添加重复项：

```
Class DemoClass
  Implements IEquatable(Of DemoClass)

  Public Property amount As Decimal
  Public Property number As String
  Public Property [date] As Date

  Public Function Equals1(other As DemoClass) As Boolean Implements System.IEquatable(Of DemoClass).Equals
    If Me.number = other.number Then
      Return True
    Else
      Return False
    End If
  End Function
End Class

Private Sub Button2_Click(sender As System.Object, e As System.EventArgs) Handles Button2.Click
  Dim lst As New List(Of DemoClass)
  Dim dc1 As New DemoClass With {.amount = 123, .number = "123", .date = #1/2/2012#}
  Dim dc2 As New DemoClass With {.amount = 124, .number = "124", .date = #1/3/2012#}
  Dim dc3 As New DemoClass With {.amount = 123, .number = "123", .date = #1/2/2012#} 'same as dc1!!
  If Not lst.Contains(dc1) Then lst.Add(dc1)
  If Not lst.Contains(dc2) Then lst.Add(dc2)
  If Not lst.Contains(dc2) Then lst.Add(dc3) 'this won't get added!'
  MsgBox(lst.Count) 'should return 2'
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T02:05:46.193

您需要使用 GroupBy() 函数。VB不是我的语言，所以我会尽力翻译。

```
Dim invoice = From c In pesquisanotas
                Group c By c.number Into g
                Where (g.Count > 1)
                Select g.Key 
```

# php - 数组到mysql数据库字段

> ID：13812405
> 
> 赞同：-3
> 
> 时间：2012-12-11T01:52:48.003
> 
> 标签：php, mysql, arrays, forms, post

我有一组表单值，它们从一个页面发布到另一个页面。

```
$_POST['ingredients']; 
```

数组中的项目以 的形式发布`ingredients[]`。

我如何连接所有值并将它们放入数据库中一行的一个字段中

一个mysql代码的例子将是完美的。

谢谢

```
$ingredient_method = $_POST['conValue'];
$ingredient_type = $_POST['OneWordDescription'];
$ingredient_element = $_POST['ingredients'];

$sql="INSERT INTO tbl_Recipe (recipe_id, ingredient_method, ingredient_type, ingredient_element)
VALUES
('',$_POST[conValue]','$_POST[OneWordDescription]','$_POST[ingredients]')";

if (!mysql_query($sql))
  {
  die('Error: ' . mysql_error());
  }
echo "1 record added"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T01:55:21.970

你有几个选择：

1.  使用 PHP 的[序列化](http://us3.php.net/serialize)函数将数组转换为字符串，然后再放入数据库，然后在拉出数据时反[序列化。](http://us3.php.net/unserialize)
2.  使用 PHP 的[implode](http://us2.php.net/implode)将数据转为字符串，然后在拉出数据时[爆炸。](http://us2.php.net/explode)
3.  在 MySQL 中创建另一个表，将每个值作为单独的行插入到数据库中，然后在查询中使用类似`INNER JOIN`or的内容`LEFT JOIN`将数据拉出。

**更新**：

既然您已经发布了代码，我不得不建议您不要使用`mysql_*`函数。它们已被弃用。使用[mysqli](http://us2.php.net/mysqli)或[PDO](http://us2.php.net/pdo)。此外，**始终**对从用户收到的值使用[mysqli_real_escape_string](http://us2.php.net/mysqli_real_escape_string)或[PDO::quote以防止 SQL 注入攻击。](http://us2.php.net/manual/en/pdo.quote.php)

这是一个使用`serialize`和 PDO 的示例：

```
//get the array
$ingredient_method = $_POST['conValue'];
$ingredient_type = $_POST['OneWordDescription'];
$ingredient_elements = $_POST['ingredients'];
if(!is_array($ingredient_elements)) {
    //do some error handling
}

//connect to the database
$dsn = 'mysql:dbname=testdb;host=127.0.0.1';
$user = 'dbuser';
$pass = 'dbpass';
try {
    $pdo = new PDO($dsn, $user, $pass);
} catch (PDOException $e) {
    echo 'Connection failed: ' . $e->getMessage();
}

//serialize the string
$elements_str= serialize($ingredient_elements);

//prepare sql
$sql = 'INSERT INTO tbl_Recipe '.
           '(recipe_id, ingredient_method, ingredient_type, ingredient_element) '.
       'VALUES ( '.
            '"",'. //recipe_id
            $pdo->quote($ingredient_method).','.
            $pdo->quote($ingredient_type ).','.
            $pdo->quote($elements_str).
       ')';
// insert into database
$con->query($sql); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T02:25:11.947

好的，不知道你是怎么把配料变成一个数组的，但是如果是这样的话，我们就开始吧。

首先，您可以使用 implode 加入阵列，但检查是否有任何东西以避免引发警告。

```
//check if $_POST['ingredients'] is available if not then use empty string
$ingredient_element = isset($_POST['ingredients']) ? $_POST['ingredients'] : "";

join the array 
$ingredient_element = implode(" ", $ingredient_element); 
```

现在您至少可以使用 mysql_real_escape_string 来清理您的字符串，但我建议您了解 mysqli 或 PDO，因为不推荐使用 mysql_ 函数。

```
//sanitize
$ingredient_element = mysql_real_escape_string($ingredient_element); 
```

然后只需在插入 sql 中使用 $ingredient_element

$sql="INSERT INTO tbl_Recipe (recipe_id,成分方法,成分类型,成分元素) 值 ('',$$ingredient_method','$ingredient_type','$ingredient_element')";

此外，如果 recipe_id 是一个自动递增的整数 id，您可以将其留空，但如果您必须在那里使用某些东西，则必须使用 NULL 代替 ''

# javascript - JavaScript 通过父元素获取元素

> ID：13812406
> 
> 赞同：0
> 
> 时间：2012-12-11T01:52:56.747
> 
> 标签：javascript, select, parent

```
...
<td id="mycell">
   <input type="text" name="year" onmouseout="do_something(this.value,...);" />
   <input type="text" name="month" onmouseout="do_something(this.value,...);" />
</td>
... 
```

在其他元素上提交函数时，我需要获取相邻输入元素的值。事情是其中有 10 个，我不能使用 id，名称也相同。

所以我需要以某种方式得到父母`<td>`，然后解决它的孩子，例如我提交年份然后 `onmouseout="do_something(this.value, this.parent.td.month.value");"`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T01:56:03.700

如果您有对输入元素之一的引用，则：

```
var td = input.parentNode; 
```

然后您可以使用以下方法选择所有子输入元素：

```
var inputs = td.getElementsByTagName('input'); 
```

并获得一个特定的：

```
var input0 = inputs[0]; 
```

等等。要获取相邻输入，请在`inputs`集合中找到当前输入，然后根据需要获取下一个或上一个（如果有）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T01:57:41.850

使用 .next 和 .previous 选择器：

```
$(this).previous('input').val();
$(this).next('input').val(); 
```

# clojure - Clojure 和 ClojureScript 哪个更快（为什么）？

> ID：13812407
> 
> 赞同：19
> 
> 时间：2012-12-11T01:53:05.067
> 
> 标签：clojure, v8, clojurescript

如果我不得不猜测，我很确定答案是 Clojure，但我不确定为什么。从逻辑上（对我来说）看起来 ClojureScript 应该更快：

两者都是“动态的”，但 ClojureScript

*   编译为 JavaScript，在 V8 上运行
*   V8 引擎可以说是最快的动态语言引擎
*   V8 是用 C 编写的

而 Clojure：

*   也是动态的
*   在没有内置动态支持的 JVM 中运行，所以我认为 JVM 也必须做 V8 正在做的任何事情，以启用动态支持
*   而且Java比C慢

那么 Clojure 怎么会比 ClojureScript 更快呢？当说 JavaScript 是动态的而 Clojure 是动态的时，“动态”是否意味着不同的东西？我没看到什么？

（当然如果 ClojureScript*确实*更快，那么上面的推理是否正确？）

我想，Clojure 编译成什么……至少是问题的一部分。我知道 JVM 部分不能只是一个普通的解释器（否则 ClojureScript 会更快），但 Clojure 不能编译为常规字节码，因为 JVM 中没有“动态”。那么 ClojureScript 的编译/执行方式与 Clojure 的编译/执行方式以及普通 Java 的编译/执行方式之间有什么区别，以及两者所隐含的性能差异？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-11T03:24:15.693

实际上，V8 是用 C++ 编写的。但是，它的功能与 JVM 基本相同，并且 JVM 是用 C 编写的。V8 JITs Javascript 代码并执行 JIT'd 代码。同样，JVM JIT 编译（或热点编译）字节码（不是 Java）并执行生成的代码。

字节码不像 Java 那样是静态的。事实上，它可以是非常动态的。另一方面，Java 大多是静态的，将 Java 与字节码混为一谈是不正确的。java编译器将Java源代码转换成字节码，JVM执行字节码。有关更多信息，我建议您查看 John Rose 的博客（[示例](https://blogs.oracle.com/jrose/entry/dynamic_invocation_in_the_vm)）。那里有很多很好的信息。另外，尝试寻找 Cliff Click 的演讲（比如[这个](http://www.infoq.com/presentations/click-fast-bytecodes-funny-languages)）。

同样，Clojure 代码直接编译为字节码，然后 JVM 使用该字节码执行相同的过程。编译 Clojure 通常在运行时完成，这不是最快的过程。同样，将 Clojurescript 翻译成 Javascript 也不是很快。V8 将 Javascript 转换为可执行形式显然非常快。Clojure 可以提前编译成字节码，这样可以消除很多启动开销。

正如您所说，说 JVM 解释字节码也不是很正确。17 年前的 1.0 版本就做到了！

传统上，有两种编译模式。第一种模式是 JIT（即时）编译器。字节码直接翻译成机器码。Java 的 JIT 编译执行速度很快，并且不会生成高度优化的代码。它运行正常。

第二种模式称为热点编译器。热点编译器非常复杂。它以解释模式非常快速地启动程序，并在程序运行时对其进行分析。当它检测到热点（代码中频繁执行的点）时，它会编译这些热点。而 JIT 编译器必须快速，因为除非它是 JIT 的，否则不会执行任何操作，热点编译器可以花费额外的时间来优化它正在编译的代码中的 snot。

此外，它可以稍后返回并重新访问该代码，并在必要和可能的情况下对其应用更多优化。这是热点编译器可以开始击败已编译的 C/C++ 的点。因为它具有代码的运行时知识，所以它可以应用静态 C/C++ 编译器无法进行的优化。例如，它可以内联虚函数。

Hotspot 还有另一个特性，据我所知，其他环境没有，它还可以在必要时对代码进行反优化。例如，如果代码不断地采用单个分支，并且该分支已经过优化并且运行时条件发生变化，迫使代码进入另一个（未优化的）分支，那么性能突然变得很糟糕。Hotspot 可以取消优化该功能并重新开始分析以找出如何使其更好地运行。

热点的一个缺点是它开始有点慢。Java 7 JVM 中的一项更改是结合了 JIT 编译器和热点编译器。这种模式是新的，虽然不是默认模式，但是一旦它初始启动应该是好的，然后它可以开始JVM非常擅长的[高级优化。](http://nighthacks.com/jag/blog/268/index.html)

干杯!

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-12-11T04:07:31.750

如果不参考特定的基准测试任务（甚至是特定版本的 Clojure 或 ClojureScript），这个问题很难准确回答。

话虽如此，在大多数情况下，我希望 Clojure 会更快一些。原因：

*   Clojure*通常会*编译成*静态*代码，因此它实际上不会在运行时进行任何动态查找。这一点非常重要：高性能代码通常会生成与静态类型 Java 非常相似的字节码。问题似乎是错误地假设动态语言必须在运行时进行动态方法查找：情况并非总是如此（通常不在 Clojure 中）
*   JVM JIT 设计得非常好，我相信它目前仍然比 JavaScript JIT 好一点，尽管 V8 有多好。
*   如果您需要并发性或需要利用多核，那么显然没有竞争，因为 JavaScript 是单线程的......
*   Clojure 编译器比 ClojureScript 更成熟，并且近年来进行了大量的性能调优工作（包括原始支持、协议等）

当然，可以用任何语言编写快速或慢速代码。这将比语言实现之间的根本差异产生更大的差异。

更根本的是，您在 Clojure 和 ClojureScript 之间的选择在任何情况下都不应该与性能有关。两者都提供了引人注目的生产力优势。主要的决定因素应该是：

*   如果你想在 web 上运行，请使用 ClojureScript
*   如果要在 JVM 环境中的服务器上运行，请使用 Clojure

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-22T14:31:38.473

这与其说是一个历史评论，不如说是一个答案：HotSpot VM 和 V8 js 引擎都可以追溯到 Sun Microsystems 的 Self 项目，我认为该项目是许多技术的原型，使它们能够以同样快的速度运行就像他们一样。比较它们时要考虑的事情。我会将此作为评论发布，但声誉系统阻止了我。

# python - 计算线通过的网格象限的有效方法

> ID：13812409
> 
> 赞同：6
> 
> 时间：2012-12-11T01:53:17.797
> 
> 标签：python, r, pseudocode

我有一个二维单位网格和一堆以任何有理数开始和结束的线段。我需要一种有效的方法来计算线穿过哪些网格单元。例如，该行：

从 (2.1, 3.9) 到 (3.8, 4.8) 穿过具有左下点 (2, 3)、(2, 4) 和 (3, 4) 的网格单元。

有没有一种快速有效的方法来从线的端点计算这些象限？

我将在 R 中工作，但 Python 或伪代码中的答案也可以。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T02:50:36.043

处理空间数据的人一直在处理这类问题，因此可能值得他们的努力加以支持。这是一个使用 R 的**raster**包（以及它所依赖的**sp包中的函数）的解决方案：**

```
library(raster)

## Create a SpatialLines object
a <- c(2.1, 3.9) 
b <- c(3.8, 4.8)
## Method #1 -- Uses functions from the sp package.
SL <- SpatialLines(list(Lines(list(Line(rbind(a,b))), "ab")))
## Method #2 -- Uses readWKT() from the rgeos package. Easier to read.
# library(rgeos)
# string <- paste0("LINESTRING(", paste(a, b, collapse=", "), ")")
# SL <- readWKT(string)

## Create a raster object
m <- 10
n <- 10
mat <- matrix(seq_len(m*n), nrow = m, ncol = n)
r <- raster(mat, xmn = 0, xmx = n, ymn = 0, ymx = m) 

## Find which cells are intersected & get coordinates of their lower-left corners
ii <- extract(r, SL, cellnumbers=TRUE)[[1]][, "cell"]
floor(xyFromCell(r, ii))
#      x y
# [1,] 2 4
# [2,] 3 4
# [3,] 2 3

## Confirm that this is correct with a plot
image(r)
plot(as(rasterize(SL, r), "SpatialPolygons"), 
     border = "darkgrey", lwd = 2, add = TRUE)
lines(SL) 
```

![在此处输入图像描述](../Images/2a121902c6b9ea0bee9950e8615d0595.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T02:27:49.697

我会建议[Bresenham 的线算法](http://en.wikipedia.org/wiki/Bresenham%27s_line_algorithm)（或相关[的 Wu 算法](http://en.wikipedia.org/wiki/Xiaolin_Wu%27s_line_algorithm)）的一些变体。这些代码在计算机图形学中广泛用于绘制线条，并且应该适应您的特定需求（例如非整数端点）。

# python - 使用wing IDE时如何为python设置运行参数？

> ID：13812418
> 
> 赞同：2
> 
> 时间：2012-12-11T01:54:16.640
> 
> 标签：python, django, pycharm, wing-ide

使用wing IDE时如何为python设置运行参数？

```
D:\TEST\djgprj
├─.idea
├─testdjgprj.wpr
├─testdjgprj.wpu
└─testdjg
    ├─.idea
    ├─testdjg
    ├─manage.py
    ├─static
    └─templates 
```

我使用wingIDE创建了一个项目，并保存到文件夹`D:\TEST\djgprj`，但是`models`，，`manage.py`程序在文件夹中`D:\TEST\djgprj\testdjg`。当我尝试使用wingIDE 运行manage.py 时，我不知道在哪里设置参数。我知道有一个地方是`Debug->Run Arguments`，但效果不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T02:33:09.357

右键单击文件（在编辑器或项目工具中）并选择“属性”并在“调试”>“运行参数”下设置运行参数。

如果您的意思是向 Python 本身而不是您的代码发送参数，则改为使用 Debug > Python Options 属性（默认为 -u 表示无缓冲输出）。

# javascript - FB.api 有没有办法限制单个字段

> ID：13812420
> 
> 赞同：2
> 
> 时间：2012-12-11T01:54:24.040
> 
> 标签：javascript, facebook, api

我正在使用 Facebook Javascript SDK。有没有办法在请求多个字段时限制为特定字段返回的元素数量。

示例：如果我想从所有朋友那里获取“简历”并喜欢“电影”，但将返回的电影数量限制为 10 部电影。

```
FB.api('/me/friends', { fields: 'bio, movies' }, function(response) {
    // Do something with data
    handleResponse(response);
}); 
```

如果我添加限制参数，它只会限制返回的朋友数量，但我希望返回所有朋友并限制电影数量。

```
FB.api('/me/friends', { fields: 'bio, movies', limit: 10 }, function(response) {
    // Do something with data
    handleResponse(response);
}); 
```

有没有办法使用 Javascript FB.api 方法来做到这一点？任何想法/帮助表示赞赏。

**编辑

好的，所以使用下面 Tommy 的“字段扩展”示例，如果您想将返回的电影数量限制为 10，这就是我的示例 FB.api 调用的样子：

```
FB.api('/me/friends', { fields: 'bio, movies.limit(10)' }, function(response) {
    // Do something with data
    handleResponse(response);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T02:33:52.600

是的，添加另一个名为`movies.limit`.

示例调用：

`https://graph.facebook.com/me/friends?fields=movies&movies.limit=3&access_token=<access_token>`

# c++ - 单例中的所有内容都可以是静态的吗？

> ID：13812423
> 
> 赞同：4
> 
> 时间：2012-12-11T01:54:31.397
> 
> 标签：c++, static, singleton

在 C++ 中，单例中的所有成员可以是静态的，还是尽可能多的？我的想法是，无论如何，全球只有一个实例。

在搜索时，我确实发现了很多关于 C# 中静态类的讨论，但对此并不熟悉。也想了解一下。

不管你有什么想法，请发表评论。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T01:57:27.193

使用静态单例，您无法控制何时分配和构造单例。这使您受制于静态变量的 c++ 构造规则顺序，因此，如果您在构造另一个静态变量期间碰巧调用了这个单一变量，那么这个单一变量可能还不存在。

如果您不打算从另一个静态变量的构造函数中调用单例，并且不希望出于任何原因延迟构造，则对单例使用静态变量很好。

有关详细信息，请参阅[静态变量初始化顺序](https://stackoverflow.com/questions/211237/static-variables-initialisation-order)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T01:58:17.670

您可能知道，单例模式包含一个静态方法 Instance，当且仅当它存在时，它将创建实例并返回该实例。没有理由单例的其他或所有方法不能是静态的。但是，鉴于该类只有一个实例，我不确定将其他所有内容设为静态是否有意义。那有意义吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T02:14:00.417

单例的大部分意义在于对它的创建时间进行一些控制。

使用静态数据成员，您将失去对这些成员的控制权。

所以这样做并不聪明。

也就是说，单例通常是 Evil™，存在许多与纯全局变量相同的问题，包括倾向于充当无法控制的通信枢纽，将各种不可预测的影响从不可预测的地方传播到其他不可预测且很大程度上未知的地方，在不可预知的时代。

因此，认真思考是个好主意：单例*真的*是答案吗，或者在手头的情况下，它是否只是一种复合它要解决的问题的方法？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T02:31:56.723

回答您的问题：您建议的情况更像是 C# 中的“静态类”，而 C++ 没有“静态类”的概念。

通常在 C++ 单例类中，唯一的静态数据成员是单例实例本身。这可以是一个指向单例类的指针，也可以是一个简单的实例。

有两种方法可以在单例实例不作为指针的情况下创建单例类。

1)

```
class MySingletonClass
{
public:
    static MySingletonClass& getInstance()
    {
        static MySingletonClass instance;
        return instance;
    }

    // non-static functions

private:
    // non-static data-members
}; 
```

2)

```
class MySingletonClass
{
public:
    static MySingletonClass& getInstance()
    {
        return sInstance;
    }

    // non-static functions

private:
    static MySingletonClass sInstance;
    // non-static data-members
};
// In CPP file
MySingletonClass MySingletonClass::sInstance; 
```

此实现不是线程安全的，无法预测它何时被构造或何时被销毁。如果此实例依赖另一个单例来销毁自身，则在退出应用程序时可能会导致无法识别的错误。

带有指针的那个看起来像这样：

```
class MySingletonClass
{
public:
    static MySingletonClass& getInstance()
    {
        return *sInstance;
    }
    static MySingletonClass* getInstancePointer()
    {
        return sInstance;
    }

    MySingletonClass()
    {
        if (sInstance) {
            throw std::runtime_error("An instance of this class already exists");
        }
        sInstance = this;
    }

    // non-static functions

private:
    static MySingletonClass* sInstance;
    // non-static data-members
}; 
```

这种单例类的初始化通常会在应用程序初始化期间发生：

```
void MyApp::init()
{
    // Some stuff to be initalized before MySingletonClass gets initialized.
    MySingletonClass* mySingleton = new MySingletonClass(); // Initalization is determined.
    // Rest of initialization
}

void MyApp::update()
{
    // Stuff to update before MySingletonClass
    MySingletonClass::getInstance().update(); // <-- that's how you access non-static functions.
    // Stuff to update after MySingletonClass has been updated.
}

void MyApp::destroy()
{
    // Destroy stuff created after singleton creation
    delete MySingletonClass::getInstancePointer();
    // Destroy stuff created before singleton creation
} 
```

虽然在这个场景中控制了单例的初始化和销毁​​，但是单例在多线程应用程序中并不能很好地发挥作用。我希望这能消除你的疑虑。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T02:01:13.047

简短的回答：**是的！当然！**C++ 是灵活的，几乎一切皆有可能（尤其是这么简单的事情）。

详细的答案取决于您的用例。

*   其他静态/全局变量如何取决于您的签名
*   当第一次访问你的单例时（可能在 main 之前？）
*   您必须考虑的许多其他事情（其中大部分与您的单身人士与其他实体的交互有关）

# python - 无法将一张表复制到另一张表？

> ID：13812425
> 
> 赞同：0
> 
> 时间：2012-12-11T01:54:41.460
> 
> 标签：python, sql, database, sqlite

我正在使用 python 将一个表（字典）复制到 SQLite 中的另一个表（origin_dictionary），这是我这部分的代码：

```
 def copyDictionaryToOrigin(self):
    dropTableQueryStr = "DROP TABLE IF EXISTS origin_dictionary"
    createTableQueryStr = "CREATE TABLE origin_dictionary (id INTEGER PRIMARY KEY AUTOINCREMENT, word TEXT, type TEXT)"
    syncTableQueryStr = "INSERT INTO origin_dictionary (word, type) SELECT word, type FROM dictionary"

    self.cur.execute(dropTableQueryStr)
    self.cur.fetchone()

    self.cur.execute(createTableQueryStr)
    result = self.cur.fetchone()

    self.cur.execute(syncTableQueryStr)
    result = self.cur.fetchone() 
```

通过运行此代码，我可以看到创建了一个 origin_dictionary 表，但表中没有数据。我找不到数据没有复制到新表的原因。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:42:08.477

如果您需要简单地将一个表复制到另一个表，为什么不使用`CREATE TABLE ... AS SELECT`？另外，你需要`commit()`你的陈述。

只需使用下面的代码，它应该可以工作：

```
import sqlite3
conn = sqlite3.connect(example.db")
cur = conn.cursor()
cur.execute("DROP TABLE IF EXISTS origin_dictionary")
cur.execute("CREATE TABLE origin_dictionary AS SELECT * FROM dictionary")
conn.commit()
conn.close() 
```

# java - 检查数组列表中的空字段

> ID：13812427
> 
> 赞同：0
> 
> 时间：2012-12-11T01:55:13.820
> 
> 标签：java

我可以在这里找到很多关于 arraylist 是否可以等于 null 的问答，这以它自己的方式很有帮助，但是如果 arraylist 中的任何字段为空，我找不到抛出错误的答案。当我将对象添加到数组列表时，如果用户尝试传入任何为空的内容，我想抛出异常。这是代码：

```
 void addInvoiceItem(Item item, Integer quantity, double discount) throws Exception {    
for (InvoiceItem thing: invoiceList) {
    if (thing == null) {
        throw new IllegalArgumentException("Part of the invoice item is blank (null). Please review your invoice items and ensure you have specified values for the item.");
    }
    else {
        invoiceList.add(thing);
        thing.setItemQuantity(quantity);
        thing.setItemDiscount(discount);
        System.out.println(invoiceList);
    }
}
} 
```

这是项目类：

```
final class Item {

String itemDescription;
double itemPrice;
Integer itemSKU;

Item (String description, double price, Integer sku) {
    this.itemDescription = description;
    this.itemPrice = price;
    this.itemSKU = sku;
} 
```

}

以下是让我知道我肯定遗漏了一些东西的测试方法。一种是测试有效的 InvoiceItem，另一种是测试无效的 InvoiceItem（包含空值）：

```
public class InvoiceTest {
//create the static values to be used
//for InvoiceItem
String goodDescription = "wheel";
double goodPrice = 500.00;
Integer goodSku = 0002;
Item goodInvoiceItem = new Item(goodDescription, goodPrice, goodSku);

String emptyDescription = null;
double emptyPrice = 0;
Integer emptySku = 0;
Item badInvoiceItem = new Item(emptyDescription, emptyPrice, emptySku);

Integer itemQuantity = 0;
double itemDiscount = 0.05;

@Test
public void invalidItemAddTest() {
    Invoice badInvoice = new Invoice(null);
    try {
        badInvoice.addInvoiceItem(badInvoiceItem, itemQuantity, itemDiscount);
        System.out.println(badInvoice);
    } catch (Exception e) {
        e.printStackTrace();
    }
}

@Test
public void validItemAddTest() {
    Invoice goodInvoice = new Invoice(null);
    try {
        goodInvoice.addInvoiceItem(goodInvoiceItem, itemQuantity, itemDiscount);
        System.out.println(goodInvoice);
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

提前感谢您的所有帮助

编辑添加：所以梅尔的回答是我的出发点，我做了一些补充，让它按照我需要的方式工作。我的添加方法现在看起来像这样：

```
 void addInvoiceItem(Item item, Integer quantity, double discount) {
    if(item == null || quantity == 0 || discount == 0) {
        throw new IllegalArgumentException("Part of the invoice item is blank (null). Please review your invoice items and ensure you have specified values for the item.");
    } else {
    InvoiceItem invoice = new InvoiceItem(item, quantity, discount);
    invoiceList.add(invoice);
}
} 
```

我的测试方法如下所示：

```
public class InvoiceTest {
//create the static values to be used
//for InvoiceItem
String goodDescription = "wheel";
double goodPrice = 500.00;
int goodSku = 0002;
Item goodInvoiceItem = new Item(goodDescription, goodPrice, goodSku);

String emptyDescription = null;
double emptyPrice = 0;
int emptySku = 0;
Item badInvoiceItem = new Item(emptyDescription, emptyPrice, emptySku);

int badItemQuantity = 0;
double badItemDiscount = 0;
int goodItemQuantity = 1;
double goodItemDiscount = 0.05;

/**
 * @Before - initialize what we need for the test
 * @throws Exception
 */
@Before
public void setUp() {
    //things needed for testInvalidItemAdd()

}

/**
 * @throws Exception 
 * @Test - confirm you cannot add an item that is null
 */
@Test
public void invalidItemAddTest() {
    boolean exceptionThrown = false;
    Invoice badInvoice = new Invoice(null);
    try {
        badInvoice.addInvoiceItem(badInvoiceItem, badItemQuantity, badItemDiscount);
        System.out.println(badInvoice);
    } catch (Exception e) {
        e.printStackTrace();
        exceptionThrown = true;
    }
    assertTrue(exceptionThrown);
}

@Test
public void validItemAddTest() {
    boolean exceptionThrown = false;
    Invoice goodInvoice = new Invoice(null);
    try {
        goodInvoice.addInvoiceItem(goodInvoiceItem, goodItemQuantity, goodItemDiscount);
        System.out.println(goodInvoice);
    } catch (Exception e) {
        e.printStackTrace();
        exceptionThrown = true;
    }
    assertFalse(exceptionThrown);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T02:03:28.820

您的添加例程有点偏离。它尝试使用列表中已经存在的项目，而不是创建一个新项目。尝试这个：

```
void addInvoiceItem(Item item, Integer quantity, double discount) {
    if(
        item == null || 
        quantity == null || 
        item.sku == null ||
        item.description == null
    ) {
        throw new NullPointerException();
    }
    InvoiceItem invoice = new InvoiceItem(item, quantity, discount);
    invoiceList.add(invoice);
} 
```

还可以查看 google 库中的 checkNotNull() 以减少输入。

在 InvoiceItem 构造函数中而不是在加法器中检查 null 可能很有用，除非您想在其他地方允许 null。

# mysql - 带有复合键的 MySQL INSERT

> ID：13812435
> 
> 赞同：1
> 
> 时间：2012-12-11T01:56:39.977
> 
> 标签：mysql

编辑：我是木偶。因此，在仔细搜索了我试图插入的行之后，我的代码中有一个错误，这意味着正在插入空字符串。因为这种情况不止一次发生，所以 MySQL 非常正确地抛出了一个错误，因为我试图再次插入相同的数据。很抱歉浪费了任何时间！模组，请随意删除。

我的表结构如下：

```
CREATE TABLE IF NOT EXISTS `foo` (
  `user` varchar(80) NOT NULL,
  `group` varchar(20) NOT NULL,
  `completed` int(1) NOT NULL,
  PRIMARY KEY  (`user`,`group`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

现在，当我尝试执行 MySQL 插入时，它会抛出错误，说我有重复项（如果设置了密钥，将无法正常工作）。我不明白为什么我会看到这些错误。我知道我没有插入这些复合值的副本（尽管某些值会在组列中出现多次。

我的插入示例：`INSERT INTO food(user, group, completed) VALUES ('user1', 'groupA', '0'),('user2', 'groupB', '0'),('user3', 'groupA', '0');`

所以用户和组的组合绝对是唯一的。那么为什么它会抱怨我试图插入一个非唯一键而失败呢？

我得到的错误是：#1062 - 键 1 的重复条目 'groupA'。如果我尝试一次插入一两行似乎没问题，但我目前正尝试一次性插入 140 行。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T02:06:17.073

您不能使用“组”作为列名，因为它是保留字。

我更改了列名，您的查询就可以正常工作，因为它应该。

由于您已经完全“混淆”了您的实际 SQL，因此您完全有可能编辑出导致您的错误的错字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T02:46:26.837

您的密钥不是复合密钥。我适合是复合错误会是这样的

```
ERROR 1062 (23000): Duplicate entry 'user1-groupA' for key 'PRIMARY' 
```

请注意，它显示了创建索引的所有列的值。

我认为您在列组上有另一个索引。

# c# - 获取 XML 文件的部分数据

> ID：13812436
> 
> 赞同：0
> 
> 时间：2012-12-11T01:56:44.930
> 
> 标签：c#, xml, xmldocument

我有这个 xml[文件](https://dl.dropbox.com/u/2230967/Movie.xml)，其中包含来自 tagchimp 的信息，但该文件包含大量信息。我如何只加载我需要的信息。我找到了一些代码：

```
XmlDocument doc = new XmlDocument();
doc.Load(path);
XmlElement root = doc.DocumentElement;
XmlNodeList nodes = root.SelectNodes("movie");

foreach (XmlNode node in nodes)
{
    string date = node["tagChimpID"].InnerText;
    string name = node["locked"].InnerText;
    Console.WriteLine("Id:" + date + " Locked:" + name);
} 
```

但它只加载元素而不是子元素，例如movieTitle或shortDescription

我找到了一个方法：

```
public static string Test(string path, XmlElement nodes)
    {
        string Name = "";
        string releaseDate = "";
        XmlNodeList xnList = nodes.SelectNodes("/items/movie");
        XmlNode eNode;
        foreach (XmlNode xn in xnList)
        {
             eNode = xn.SelectSingleNode("movieTags/info/movieTitle");

            if (eNode != null)
            {
                Name = eNode.InnerText;
            }

           eNode= xn.SelectSingleNode("movieTags/info/releaseDate");
                releaseDate = eNode.InnerText;
        } 
```

但这不是最实用的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T02:27:36.137

由于您使用的是 .NET，因此您可能会花一些时间来学习[LINQ to XML](http://msdn.microsoft.com/en-us/library/bb387098.aspx)，因为它听起来会满足您的需求。

有很多在线文档，特别是如何进行各种基本查询以从特定节点获取信息：http: [//msdn.microsoft.com/en-us/library/bb943906.aspx](http://msdn.microsoft.com/en-us/library/bb943906.aspx)

您也可以使用[XPath](http://msdn.microsoft.com/en-us/library/87274khy.aspx)获得相同的结果。

或者您可以手动遍历节点，尽管您必须正确处理子节点（正如您已经发现的那样）。

# vb.net - 从 shell 中删除文件

> ID：13812438
> 
> 赞同：2
> 
> 时间：2012-12-11T01:57:02.730
> 
> 标签：vb.net

我正在尝试将文件从 Windows 资源管理器拖放到我的表单中，我几乎成功了 :)
在 shell 中打开资源管理器窗口后，我可以将文件拖放到我的表单中，在我接受之前我有一个消息框/对话框。

问题实际上是我的带有问题的消息框在资源管理器窗口的后面打开。这是一个代码：

```
Public Class Form1

Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    Me.AllowDrop = True
End Sub

Private Sub Form1_DragDrop(ByVal sender As Object, ByVal e As System.Windows.Forms.DragEventArgs) Handles Me.DragDrop
    If e.Data.GetDataPresent(DataFormats.FileDrop) Then
        Dim Files() As String
        Files = e.Data.GetData(DataFormats.FileDrop)
        If Files.Length > 0 Then
            Dim ret As Integer = MsgBox("Would you like to upload file?" & vbNewLine & Files(0), MsgBoxStyle.OkCancel + MsgBoxStyle.Question, "Decide please")
            If ret = DialogResult.OK Then
                myModule.UploadF()
            End If
        End If
    End If
End Sub

Private Sub Form1_DragEnter(ByVal sender As Object, ByVal e As System.Windows.Forms.DragEventArgs) Handles Me.DragEnter
    If e.Data.GetDataPresent(DataFormats.FileDrop) Then
        e.Effect = DragDropEffects.All
    Else
        e.Effect = DragDropEffects.None
    End If
End Sub

Private Sub btn_open_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btn_open.Click
    Shell("explorer c:\", AppWinStyle.NormalFocus)
End Sub

End Class 
```

1）这里有什么方法可以让消息框在资源管理器窗口前弹出？
2) 使用后如何从我的程序中关闭打开的资源管理器窗口？

编辑：...
1) 的解决方案是将**Me.Activate 放在**MsgBox 之前！
2）为此，我仍然没有找到解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T10:32:41.860

我知道你已经接受了一个答案，但我同意 Hans 的观点，即这个实现是有缺陷的。如果用户必须单击上传按钮，则启动 openfiledialog。打开一个他们必须从中拖动的普通浏览器窗口是非常违反直觉的。

您可以保留拖放功能，但让用户打开他们自己的资源管理器窗口来使用它。

更直观的实现是将拖放功能添加到面板，并具有标签和按钮，以便用户可以选择任一方法。

像这样的东西：

![在此处输入图像描述](../Images/9b15a705c2523ffb70c5f1e024204d73.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T06:47:16.470

试试这个：

在您的项目中添加一个对话框。（可在表单、类等可添加内容列表中找到）。为其添加标签并更改构造函数中的文本。在 Dialogs 绘制事件中添加：

```
Me.BringToFront() 
```

然后使用这个对话框而不是 MsgBox，它应该提供你需要的东西。

这是一种解决方法，但应该可以。

编辑：

对，找到了更好的解决方案。

在调用 MsgBox 之前将此添加到此问题中编写的代码中：

```
Me.BringToFront()
Me.TopMost = True 
```

你会没事的。

# java - 使用自定义面板时可以使用 setPreferredSize 吗？

> ID：13812440
> 
> 赞同：1
> 
> 时间：2012-12-11T01:57:14.463
> 
> 标签：java

根据以往的经验，每个人都会说“不要使用那些`setXxxSize`方法！使用布局管理器！” 但是，在这种情况下我该怎么办？

```
import java.awt.*;
import javax.swing.*;

public class Game {
    public static void main(String[] args) {
        new Game();
    }
    public Game() {
        JFrame f = new JFrame("Hi this is a game");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(new GamePanel());
        f.pack(); 
        f.setVisible(true);
    }
    private class GamePanel extends JPanel {
        private GamePanel() {
            setPreferredSize(600, 600);
        }
        @Override
        public void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D)g;
            //paint stuff
        }
    }
} 
```

这只是我快速拼凑的一些示例代码。当我需要制作游戏区域时，例如 600 x 600，我应该怎么做？在这里可以使用`setPreferredSize`吗？我不知道有任何布局管理器可以只采用单个组件并为其指定大小，即使有，使用它而不是使用整个布局管理器不是更容易吗？

顺便说一句，`f.setSize(600, 600)`在这里不起作用，因为它考虑了框架装饰（标题栏，边框的东西）。

所以问题是如果我只有一个需要特定尺寸的组件，我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T02:01:46.190

覆盖`getPreferredSize`，在`GamePanel`：

```
public Dimension getPreferredSize(){
    return new Dimension(600, 600);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T02:33:54.567

> 为什么要这样做[而不](https://stackoverflow.com/a/13812478/230513)只是这样做`setPreferredSize()`？

就像那样`Game`_`JPanel`

*   仅用于绘图，

*   包含默认布局但没有组件，并且

*   有一个标准的 UI 委托，

差异可以忽略不计。仍有理由推翻`getPreferredSize()`

*   其他开发人员的意图很清楚；演示和原型，就像僵尸一样，永远不会消失。

*   任何一个或所有这些条件都可能随着班级的发展而改变。

*   这是一个惯用的提醒，不要落入[这个陷阱](https://stackoverflow.com/a/12532237/230513)。

# c++ - C++ - 通过函数返回一个二维数组

> ID：13812441
> 
> 赞同：2
> 
> 时间：2012-12-11T01:57:19.063
> 
> 标签：c++, c, arrays, pointers

我环顾四周试图弄清楚我是否应该在 C++ 中返回一个二维数组，但得到的答案好坏参半。

一些答案说不*，*因为数据是函数的本地数据，当它返回时，数组指向“垃圾数据”（因为它可以随时被覆盖）。但是，有些人说*“是的，像普通数组一样返回它”。*

**所以，我的困境：**

我有一个包含指向`Tile`对象的指针的二维数组

`Tile* map[128][128];`

我应该在函数中返回数组吗？为什么或者为什么不？如果答案是肯定的，我会怎么做？

编辑：我不清楚。我想创建一个 getter 方法来返回映射变量，并能够在另一个函数中使用数组中的指针。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T02:04:35.467

你可以这样做......问题是你的调用者现在负责释放内存。他可能不知道你是如何分配的。他应该调用 free() 吗？删除[]？操作系统提供的免费例程？还是由您的应用程序中的其他内存缓存系统提供的？

解决这个问题的两种常见方法是：

*   让调用者分配内存，而您的函数只是填充它
*   使用 C++ 数组类；在这里，您可能有一个包含 Tile* 的 std::vector 的 std::vector。这很棒，因为它免除了您手动处理内存分配/释放的麻烦。

但是……谁来释放 Tile* 实例？使用什么 API？所以也许你需要一个 Tile 的向量，而不是 Tile*。

```
vector<vector<Tile>> map; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T02:12:04.433

您得到的 2 个答案是由于这两种不同的方式是可能的。

基于堆栈 - 本地内存，已释放且返回的指针**无效**

```
typedef int *(*TileGrid)[128];
Tile* map[128][128];
....
TileGrid GetTiles(){
    return map;
} 
```

Heap Allocated - 在堆上分配并且在函数结束后不被释放，直到这个函数的调用者去释放 -**安全**。

```
typedef int *(*TileGrid)[128];
TileGrid map = new Tile*[128][128];
....
TileGrid GetTiles(){
    return map;
} 
```

**推荐**- **C++ 方式**- 数组而不是向量，因为大小是**编译时间常数**（真正的 C++ 方式是使用**`std::unique_ptr<Tile>`**而不是 Tile*，但一次 1 个问题。这些容器会自动为您管理内存，而 std::array 可以就像它是一个常规数组一样使用。

```
typedef std::array<std::array<Tile*,128>,128> TileGrid;
TileGrid map ;
...
TileGrid& GetTiles(){
    return map;
} 
```

通过引用返回以防止昂贵的副本，并且因为该函数只是一个 getter 并且对象维护`map`.

编辑：修复了 getter 函数

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T02:12:29.197

C/C++ 有两种类型的内存——栈和堆。通常变量分配在临时存储的堆栈上，并在退出当前范围时标记为可重用 - 例如结束循环或从函数返回时。

当你使用`new`它时，它会分配堆内存，直到你使用它，`delete`但你必须小心匹配所有的 new 和 delete 调用，以免发生内存泄漏。在 C++ 中有许多管理这种情况的策略。您可以在 Google 上搜索“C++ 中的内存管理”以了解更多信息。

在您的简单情况下，我建议避免使用指针，而是使用 stl 容器来构建您的瓷砖数组。例如像 std::vector 这样的`vector< vector<Tile> > map`. 您可以使用相同的方括号语法来访问映射，例如`map[x][y] = Tile();`，这样数组的内存分配和管理在向量类中处理。

# bash - 星号检查脚本未从 crontab 运行

> ID：13812443
> 
> 赞同：0
> 
> 时间：2012-12-11T01:57:18.887
> 
> 标签：bash, crontab, asterisk

Asterisk 检查脚本不是仅在由 crontab 运行时运行，而是由`./script.sh`and运行`sh script.sh`。这是脚本：

```
date
asterisk -rx "show channels"
asterisk -rx "zap show channels" 
```

然后我`>>`进入一个日志文件。当我通过手动运行`./`或`sh`使用`>> log.log`它运行时，只是不作为 crontab 列出

`* * * * * /root/script.sh`

我尝试`#!/bash/sh`在脚本顶部添加，无论我尝试什么，都只显示日期。我是 bash 脚本的菜鸟，我正在努力学习。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T10:45:08.237

*[由于将评论标记为答案的](https://meta.stackexchange.com/questions/82099/answering-comment-answered-questions)功能请求仍然被拒绝，因此我在此处复制上述解决方案。*

你检查过你的路径吗？在 cron 下运行时几乎肯定会有所不同。（您可以在 crontab 中设置 PATH=...。在命令行中，键入“echo $PATH”以查看您的预期。）提供日期、星号和日志文件的完整路径可能更标准在 script.sh 中（例如，“/bin/date /path/to/asterisk ....”） – mjk

# ios - 如何以编程方式判断仪器是否正在运行

> ID：13812444
> 
> 赞同：0
> 
> 时间：2012-12-11T01:57:24.463
> 
> 标签：ios, xcode, instruments

有没有办法以编程方式告诉应用程序是否在模拟器上运行并附加了仪器会话？

如果不是，那么在运行 UI 自动化测试时，在应用程序中做一些特殊的事情（例如跳过用户注册）的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T02:34:54.443

在 Xcode 中，转到 Product 菜单并选择 Edit Scheme。在左侧，选择配置文件行。在右侧选择参数选项卡。关闭“使用运行操作...”复选框。

现在在“启动时传递的参数”下添加一个参数，例如“-profile”。

在您的应用程序中，在您想要检查此标志的某个地方，您可以执行以下操作：

```
NSArray *args = [[NSProcessInfo processInfo] arguments];
if ([args containsObject:@"-profile"]) {
    // app is being profiled
} 
```

此检查将按原样在模拟器和真实设备上运行。如果您只想将此代码用于模拟器，而不是在真实设备上进行分析时，请使用以下代码包装代码：

```
#if TARGET_IPHONE_SIMULATOR
    // simulator-only code here
#endif 
```

# javascript - 使用 javascript 或服务器请求排序？

> ID：13812449
> 
> 赞同：3
> 
> 时间：2012-12-11T01:58:19.823
> 
> 标签：javascript, sorting

> **可能重复：**
> [在服务器或客户端上排序？](https://stackoverflow.com/questions/326634/sorting-on-the-server-or-on-the-client)

作为我大学项目的一部分，我必须制作一个像论坛这样的网站。

所以会有很多帖子。每个帖子都有一个点赞栏、评论、一些文本、一些按钮等。用户还可以根据日期、名称、受欢迎程度等标准对出现在页面中的这些帖子进行排序。

我的问题是我应该如何实现排序：1.在浏览器端使用javascript，或者2.使用表单或其他东西，以及对服务器的新请求（这样服务器必须将排序的帖子发回给我） ?

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T02:01:54.837

两者都有优点和缺点。

一般来说，如果您已经拥有客户端中可用的所有数据，您将在客户端上提供响应更快的用户体验排序。

如果您必须获取额外的记录，否则您将不会获取这些记录以对客户端进行排序，那么您很有可能将下载到客户端的内容膨胀到超出最佳点，并且通过 Ajax 在服务器端进行排序会更好.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T02:59:28.357

这是一个**巨大**的依赖。是否涉及分页？数据集的最大大小是多少？只需要对客户端屏幕单页中的记录进行排序吗？

### 服务器端排序更适合：

*   大型数据集
*   更快的初始页面加载
*   那些不运行 JavaScript 的人的可访问性
*   复杂的视图业务逻辑
*   对并发变化的弹性

### 客户端排序更适合：

*   小数据集
*   更快的后续页面加载
*   排序标准是用户可选择的或众多的。
*   拥有此功能后，您可以轻松添加过滤器和分页

### 相关问题：

[在服务器上排序还是在客户端排序？](https://stackoverflow.com/questions/326634/sorting-on-the-server-or-on-the-client)

### 相关答案：

> 要记住的重要一点是，虽然在理论上平衡强大的客户端和服务器之间的负载可能是一个好主意，但只有服务器才能维护一个索引，该索引在每次插入时都会更新。无论客户做什么，它都是从一组未索引的未排序数据开始的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T02:59:45.113

它发生在我们身上。我们在客户端对数据进行排序。然后一个新的要求来了。我们需要将排序后的数据放入报表中。因此，我们需要从客户端活动（在排序列事件上）然后在按下打印报告按钮时将其发送到服务器，然后在服务器端进行排序。很多工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T02:01:41.190

如果可以/实际在客户端对元素进行排序，那将是最好的解决方案（减少服务器请求）。然而，情况往往并非如此。

# c++ - 如何将 texelFetch 与 GL_TEXTURE_2D 一起使用？

> ID：13812454
> 
> 赞同：2
> 
> 时间：2012-12-11T01:58:48.507
> 
> 标签：c++, opengl, glsl

我试过了：

```
#version 130

uniform sampler2D texID;
in vec2 texcoord;
out vec4 outcolor;

void main(void) {
    vec2 tcoord=texcoord.xy*768.0;
    ivec2 tst=ivec2(tcoord.x,tcoord.y);
    outcolor=texelFetch(texID,tcoord);
} 
```

并在以下行出现错误`texelFetch`：

无法找到兼容的重载函数“texelFetch(sampler2D, vec2)”。

我没有把这些参数从我的脑海里放在这里几个来源：

1.  [http://www.opengl.org/wiki/Sampler_(GLSL)#Direct_texel_fetches](http://www.opengl.org/wiki/Sampler_(GLSL)#Direct_texel_fetches)

2.  [http://www.opengl.org/sdk/docs/manglsl/xhtml/texelFetch.xml](http://www.opengl.org/sdk/docs/manglsl/xhtml/texelFetch.xml)

问题：有没有办法在执行着色器时使用或直接从纹理中读取像素`GL_TEXTURE_2D`？`texelFetch`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T04:33:05.167

检查[1.30 规范](http://www.opengl.org/registry/doc/GLSLangSpec.Full.1.30.10.pdf)，第 89 页。

**五个`texelFetch()`重载***都没有两个参数：*****

 **```
gvec4 texelFetch (gsampler1D sampler, int P, int lod) 
gvec4 texelFetch (gsampler2D sampler, ivec2 P, int lod) 
gvec4 texelFetch (gsampler3D sampler, ivec3 P, int lod) 
gvec4 texelFetch (gsampler1DArray sampler, ivec2 P, int lod) 
gvec4 texelFetch (gsampler2DArray sampler, ivec3 P, int lod) 
```

您需要第三个参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T15:17:36.053

```
texelFetch(sampler1D(0),0,0); 
```

这不是合法的 GLSL。

`sampler1D`是一个*不透明的类型*。它没有任何价值。是的，我知道你“设置”了一个值`glUniform1i`，但你并没有真正设置一个值。`sampler1D`无法构建。这是您可以在 GLSL 中使用采样器类型执行的*所有操作的列表：*

1.  将其声明为全局范围内的统一变量。
2.  将其声明为输入函数参数。
3.  将采样器类型的变量传递给以该采样器类型作为参数的函数。

请注意，“调用构造函数”不在该列表中。`sampler1D(0)`不是正确的语法。如果要使用采样器，则需要将其声明为统一并从 OpenGL 源代码中设置纹理图像单元。或者使用`layout(binding=#)`语法，如果你有 GL 4.2 或[ARB_shading_language_420pack](http://www.opengl.org/registry/specs/ARB/shading_language_420pack.txt)。

> 真实的是，我想要它的性能。

那么你想要它是出于错误的原因。您使用`texelFetch`when`texelFetch`最准确地描述了您正在尝试做的事情。它不仅仅是“未经过滤的”；您可以通过[正确设置纹理/采样器参数](http://www.opengl.org/wiki/Sampler_Object#Filtering)来获得它。当您想要访问特定的纹素时，您应该使用它，而无需纹理坐标归一化等等。**

# javascript - Slickgrid v2.1 错误

> ID：13812457
> 
> 赞同：0
> 
> 时间：2012-12-11T01:59:00.977
> 
> 标签：javascript, slickgrid

在 Slickgrid *example7-events.html上*

[https://github.com/mleibman/SlickGrid/blob/master/examples/example7-events.html](https://github.com/mleibman/SlickGrid/blob/master/examples/example7-events.html)

如果更改标题列上的单元格的值，然后**立即**单击**同一行**的优先级单元格，则标题列上的单元格的值会丢失所做的更改，并返回到其先前的值。例如，在第 1 行，如果我们将 Title 单元格的值从“Task 0”更改为“Whatever”，然后立即单击相应的 Priority 单元格，将其值更改为“High”，标题单元格的值令人讨厌返回“任务 0”。但是，如果我们不是单击第 1 行的优先级单元格，而是单击任何其他行的优先级单元格，则第一行的标题单元格的值会保持应有的值“Whatever”。

我在个人项目中使用 Slickgrid，我也遇到了这个问题，但是我的 onClick 订阅方法与示例中的方法非常相似。因此，提出了以下问题：这真的是 Slickgrid 2.1 的错误，还是*example7-events.html*的错误？有没有人遇到过这个问题并以某种方式修复它或找到了解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T13:37:27.960

我最终在 GitHub 上的 SlickGrid 项目上打开了一个问题，这是有缺陷的示例，而不是框架。这是问题：[https](https://github.com/mleibman/SlickGrid/issues/496) ://github.com/mleibman/SlickGrid/issues/496 。

最好的祝福

# ruby-on-rails - Rails 3.2从复选框更新布尔值不适用

> ID：13812463
> 
> 赞同：1
> 
> 时间：2012-12-11T02:00:06.197
> 
> 标签：ruby-on-rails, ruby, postgresql, activerecord, ruby-on-rails-3.2

我有一个问题，而我正在尝试根据复选框使用 true 或 false 更新数据库中的布尔字段。

我正在使用 rails 3.2.2，使用 RVM 我尝试使用 3.2.9 得到相同的结果。这是在开发中，我正在运行 postgresql 作为我的数据库。

我正在开发中运行，所以在我到达以后的测试日期之前我不会使用 attr_accessible。我在这里看到的所有类似问题似乎都与忘记将布尔字段添加到 attr_accessible 有关，因此让每个人都知道这不是问题所在。

从功能的角度来看，这部分应用程序基本上是用户可以安排的事件（或任务）列表。有一个索引页面将拉出他们当天所有任务的列表。然后，用户可以单击任务旁边的复选框，它将使用相关布尔字段通过 ajax 调用将任务更新为已完成。

这是索引视图的相关部分：

```
=render :partial => "mktg/home/tasks" 
```

这是部分 _tasks.html.haml

```
#mktg_home_tasks
- @tasks = Mktg::Event.where('DATE(starts_at) = DATE(?)', Date.today).all
- if @tasks.empty?
  You currently have no tasks...
- else
  - @tasks.each do |t|
    = form_for t, :index => t.id, :remote => true do |task|
      = task.check_box :completed
      - if task.object.completed == true
        = link_to task.object.title,{}, :class => 'strike_through'
      - else
        = link_to task.object.title 
```

事件控制器的更新方法基本上是脚手架的：

```
def update
@event = Mktg::Event.find(params[:id])

respond_to do |format|
  if @event.update_attributes(params[:event])
    format.js
    format.html { redirect_to @event, :notice => 'Event was successfully updated.' }
    format.json { head :no_content }
  else
    format.html { render :action => "edit" }
    format.json { render :json => @event.errors, :status => :unprocessable_entity }
  end
end 
```

结尾

这是 update.js.coffee：

```
jQuery ->
  $('#mktg_home_tasks').empty()
  $('#mktg_home_past_due').empty()

  $('#mktg_home_tasks').append("<%= escape_javascript(render 'mktg/home/tasks')%>") 
```

我有以下资产正在运行，通过 jquery 为复选框触发表单提交：

**编辑：从下面的第一条评论开始，我的帖子下面的缩进不正确。**

```
jQuery ->
  $(":checkbox").live "change", ->
    $(this).parents("form:first").submit() 
```

当我按原样运行应用程序时，没有任何值被提交到数据库。控制台转储如下所示：

```
Started PUT "/mktg/events/133" for 127.0.0.1 at 2012-12-10 17:21:42 -0800
Processing by Mktg::EventsController#update as JS
Parameters: {"utf8"=>"✓",     authenticity_token"=>"5ahLYhEjY2QEh6G0XOrathPXMSMaiDoCAgABpDbCZck=", "mktg_event"=>{"133"=>{"completed"=>"1"}}, "id"=>"133"}
Mktg::Event Load (0.3ms)  SELECT "mktg_events".* FROM "mktg_events" WHERE "mktg_events"."id" = $1 ORDER BY starts_at ASC LIMIT 1  [["id", "133"]]
(0.2ms)  BEGIN
(0.3ms)  SELECT "mktg_leads".id FROM "mktg_leads" INNER JOIN "mktg_event_leads" ON "mktg_leads"."id" = "mktg_event_leads"."lead_id" WHERE "mktg_event_leads"."event_id" = 133
(0.2ms)  COMMIT
Mktg::Event Load (0.5ms)  SELECT "mktg_events".* FROM "mktg_events" WHERE (DATE(starts_at) = DATE('2012-12-10')) ORDER BY starts_at ASC
Rendered mktg/home/_tasks.html.haml (3.4ms)
Rendered mktg/events/update.js.coffee (4.9ms)
Completed 200 OK in 66ms (Views: 6.0ms | ActiveRecord: 4.8ms) 
```

所以我然后尝试将以下 before_save 方法添加到事件模型中：

```
def set_completed_value
  if self.completed == 0
    self.completed = false
  else
    self.completed = true
  end
end 
```

添加后，我可以选择已完成的事件，它通过使用 true 更新数据库字段来工作，这是控制台输出：

```
Started PUT "/mktg/events/133" for 127.0.0.1 at 2012-12-10 16:48:59 -0800
Processing by Mktg::EventsController#update as JS
Parameters: {"utf8"=>"✓", "authenticity_token"=>"5ahLYhEjY2QEh6G0XOrathPXMSMaiDoCAgABpDbCZck=", "mktg_event"=>{"133"=>{"completed"=>"1"}}, "id"=>"133"}
Mktg::Event Load (0.3ms)  SELECT "mktg_events".* FROM "mktg_events" WHERE "mktg_events"."id" = $1 ORDER BY starts_at ASC LIMIT 1  [["id", "133"]]
(0.1ms)  BEGIN
(0.4ms)  SELECT "mktg_leads".id FROM "mktg_leads" INNER JOIN "mktg_event_leads" ON "mktg_leads"."id" = "mktg_event_leads"."lead_id" WHERE "mktg_event_leads"."event_id" = 133
(0.3ms)  UPDATE "mktg_events" SET "completed" = 't', "updated_at" = '2012-12-11 00:48:59.877945' WHERE "mktg_events"."id" = 133
(0.5ms)  COMMIT
Mktg::Event Load (0.3ms)  SELECT "mktg_events".* FROM "mktg_events" WHERE (DATE(starts_at) = DATE('2012-12-10')) ORDER BY starts_at ASC
Rendered mktg/home/_tasks.html.haml (29.4ms)
Rendered mktg/events/update.js.coffee (31.0ms)
Completed 200 OK in 36ms (Views: 31.8ms | ActiveRecord: 1.8ms) 
```

但是，当我取消选中复选框以将已完成的事件标记为未完成时，数据库不会更新。这是控制台输出：

```
Started PUT "/mktg/events/133" for 127.0.0.1 at 2012-12-10 16:49:14 -0800
Processing by Mktg::EventsController#update as JS
Parameters: {"utf8"=>"✓", "authenticity_token"=>"5ahLYhEjY2QEh6G0XOrathPXMSMaiDoCAgABpDbCZck=", "mktg_event"=>{"133"=>{"completed"=>"0"}}, "id"=>"133"}
Mktg::Event Load (0.2ms)  SELECT "mktg_events".* FROM "mktg_events" WHERE "mktg_events"."id" = $1 ORDER BY starts_at ASC LIMIT 1  [["id", "133"]]
(0.2ms)  BEGIN
(0.3ms)  SELECT "mktg_leads".id FROM "mktg_leads" INNER JOIN "mktg_event_leads" ON "mktg_leads"."id" = "mktg_event_leads"."lead_id" WHERE "mktg_event_leads"."event_id" = 133
(0.1ms)  COMMIT
Mktg::Event Load (0.4ms)  SELECT "mktg_events".* FROM "mktg_events" WHERE (DATE(starts_at) = DATE('2012-12-10')) ORDER BY starts_at ASC
Rendered mktg/home/_tasks.html.haml (3.4ms)
Rendered mktg/events/update.js.coffee (4.8ms)
Completed 200 OK in 9ms (Views: 5.5ms | ActiveRecord: 1.2ms) 
```

我从来不需要添加这样的 before_save 方法来获取复选框来更新数据库中的布尔值。所以我一定做错了什么。我知道我很接近了。如果有人有帮助或建议，我将不胜感激。

谢谢...

**编辑：尝试 John Naegle 给出的答案**

我变了

```
= form_for t, :index => t.id, :remote => true do |task| 
```

至

```
= form_for t, :index => t.id, :as => :event, :remote => true do |task| 
```

我得到以下控制台输出

```
Started PUT "/mktg/events/133" for 127.0.0.1 at 2012-12-11 09:48:14 -0800
Processing by Mktg::EventsController#update as JS
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"5ahLYhEjY2QEh6G0XOrathPXMSMaiDoCAgABpDbCZck=", "event"=>{"133"=>{"completed"=>"1"}}, "id"=>"133"}
  Mktg::Event Load (0.2ms)  SELECT "mktg_events".* FROM "mktg_events" WHERE "mktg_events"."id" = $1 ORDER BY starts_at ASC LIMIT 1  [["id", "133"]]
   (0.1ms)  BEGIN
   (0.1ms)  ROLLBACK
Completed 500 Internal Server Error in 2ms

ActiveRecord::UnknownAttributeError (unknown attribute: 133):
  app/controllers/mktg/events_controller.rb:89:in `block in update'
  app/controllers/mktg/events_controller.rb:88:in `update' 
```

我要更改的记录 ID 是 133（这是上面的“未知属性”）。

这是带有行号的更新方法

```
#85  def update
#86  @event = Mktg::Event.find(params[:id])
#87
#88  respond_to do |format|
#89    if @event.update_attributes(params[:event])
#90      format.js
#91      format.html { redirect_to @event, :notice => 'Event was successfully updated.' }
#92      format.json { head :no_content }
#93    else
#94      format.html { render :action => "edit" }
#95      format.json { render :json => @event.errors, :status => :unprocessable_entity }
#96    end
#97  end
#98 end 
```

还有什么我应该尝试的，或者你在我的代码中看到任何错误。再次感谢。

**编辑：使用下面的 John Naegle 的回答，我现在有了这个工作**

```
= form_for t, :index => t.id, :as => :event, :remote => true do |task| 
```

以上导致以下控制台输出和后续错误：

```
"event"=>{"133"=>{"completed"=>"1"}}, "id"=>"133"} 
```

通过摆脱 :index 记录 ID 不再被错误地传递。一旦我改为：

```
= form_for t, :as => :event, :remote => true do |task| 
```

一切都开始正常工作。谢谢您的帮助！我不知道如果不是因为这个网站和每个提供帮助的人，我有时会如何“摆脱困境”。我喜欢这个地方。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T04:01:26.740

在我看来，您的控制器是这样做的：

```
@event.update_attributes(params[:event]) 
```

但是您的帖子参数是：

```
"utf8"=>"",
 "authenticity_token"=>"5ahLYhEjY2QEh6G0XOrathPXMSMaiDoCAgABpDbCZck=",
 "mktg_event"=>{"133"=>{"completed"=>"0"}},
 "id"=>"133"} 
```

params[:event] 为空。

# asp.net - System.Json.DLL 在哪里？

> ID：13812466
> 
> 赞同：13
> 
> 时间：2012-12-11T02:00:32.407
> 
> 标签：asp.net, .net, json

我正在尝试使用带有 Http 客户端的 JSON 来遵循一些示例，但它们引用了我找不到的 System.Json.DLL。请参阅[此参考](http://msdn.microsoft.com/en-us/library/system.json.jsonobject%28v=vs.95%29.aspx)以查看对 System.Json.DLL 的参考，但我找不到该 DLL 安装在我的机器上。它是一个附加组件吗？我用谷歌搜索但没有找到其他结果...

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-11T02:02:34.163

这是 Silverlight 的类库，但不是 [ASP] .NET。

如果您真的想使用它，.net 4.5 中有一个等效版本，

我建议你看看[Json.Net](http://nuget.org/packages/System.Json)，它是最流行的 .NET JSON 库之一。

# javascript - Highcharts 关闭柱形图的动画

> ID：13812472
> 
> 赞同：1
> 
> 时间：2012-12-11T02:01:20.750
> 
> 标签：javascript, animation, graph, highcharts, data-visualization

我正在绘制一个柱形图，每次从 websocket 接收到新数据时都会更新它。但是每次绘制图表时，您都会看到列“上升”，每次看到它都会有点恶心。我宁愿将地图绘制到新的“高度”

我试过了，但这给了我一个 405 错误：

```
 plotOptions: {
            column: {
                animation: false
                pointPadding: 0.2,
                borderWidth: 0

            }
        } 
```

我在文档中看不到任何其他建议。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T02:08:25.857

之后你忘记`,`了`animation: false`。

[**演示**](http://jsfiddle.net/wUQrF/2/)

# foxpro - visual foxpro - 需要从另一个表更新表

> ID：13812474
> 
> 赞同：2
> 
> 时间：2012-12-11T02:01:36.697
> 
> 标签：foxpro

我有 2 个 dbf 表，我需要根据第二个表的值更新第一个表。我可以在 SQL Server 中完成，我需要 Visual Foxpro 的帮助。

这是我的 foxpro 命令：

==================================================== =======

```
use table1

use table2

UPDATE table1 

SET table1.name = table2.name 

from table1 inner join table2 

on table1.id = table2.id 

WHERE table1.dsdate >= {^2011-04-13} and table1.dsdate <= {^2012-04-12} 
```

==================================================== =======

请帮助我，非常感谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-11T09:09:02.073

```
Update Table1 From table2 Where table1.id = table2.id ;
Set table1.name = table2.name 
```

# c# - 将 ScrollViewer（通过 c# 代码）添加到 TabPage

> ID：13812482
> 
> 赞同：0
> 
> 时间：2012-12-11T02:02:00.020
> 
> 标签：c#, wpf-controls

我正在尝试将 a 添加`System.Windows.Controls.ScrollViewer`到 a `System.Windows.Forms.TabPage`，但是该函数`Add(ScrollViewer)`无效。

有没有办法将 ScrollViewer 添加到`TabPage`内置的而不是 XAML 中。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T21:05:40.737

由于您已将此标记为 WPF，我猜对 Forms 的引用可能是错误的？

这是选项卡中的页面示例 - 其想法是确保工具栏保持在顶部，状态栏保持在底部（不是 MainWindow 状态栏......）并且中间的内容可以滚动。 .

```
Dim vScrollViewer As New ScrollViewer
        Dim vSP As New StackPanel
        With vSP
            .HorizontalAlignment = Windows.HorizontalAlignment.Stretch
            .VerticalAlignment = Windows.VerticalAlignment.Stretch
        End With
        Dim vInnerGrid As New Grid
        vScrollViewer.Content = vSP
        vSP.Children.Add(vInnerGrid) 
```

vScollViewer 可以添加到任何其他控件（例如三行网格的中间）

完整的活动

```
Private Sub Website_WebPage_Page_Initialized(sender As Object, e As System.EventArgs) Handles Me.Initialized
    Try
        Dim vScrollViewer As New ScrollViewer
        Dim vSP As New StackPanel
        With vSP
            .HorizontalAlignment = Windows.HorizontalAlignment.Stretch
            .VerticalAlignment = Windows.VerticalAlignment.Stretch
        End With
        Dim vInnerGrid As New Grid
        vScrollViewer.Content = vSP
        vSP.Children.Add(vInnerGrid)

        Dim Col1 As New ColumnDefinition
        With Col1
            .Width = New GridLength(120)
        End With
        Dim Col2 As New ColumnDefinition
        With Col2
            .Width = New GridLength(200, GridUnitType.Star)
        End With

        With Website_WebPage_Grid
            .Background = New SolidColorBrush(Colors.White)
        End With

        With vInnerGrid
            .ColumnDefinitions.Add(Col1)
            .ColumnDefinitions.Add(Col2)
        End With

        For i As Integer = 0 To 11 ' 
            Dim vRow As New RowDefinition
            With vRow
                If i = 11 Then
                    .Height = New GridLength(200, GridUnitType.Star)

                Else
                    .Height = New GridLength(35)
                End If
            End With
            vInnerGrid.RowDefinitions.Add(vRow)
        Next

        Dim UpperRow As New RowDefinition
        With UpperRow
            .Height = New GridLength(35)
        End With
        Dim MiddleRow As New RowDefinition
        With MiddleRow
            .Height = New GridLength(200, GridUnitType.Star)
        End With
        Dim BottomRow As New RowDefinition
        With BottomRow
            .Height = New GridLength(35)
        End With
        With Website_WebPage_Grid
            .RowDefinitions.Add(UpperRow)
            .RowDefinitions.Add(MiddleRow)
            .RowDefinitions.Add(BottomRow)
        End With

        Dim vToolBar As New ToolBar
        With vToolBar
            .Height = 35
        End With
        Grid.SetRow(vToolBar, 0)

        Website_WebPage_Grid.Children.Add(vToolBar)

        Dim EditButton As New Button
        If NewRecord = False Then

            With EditButton
                .Content = ReturnToolBarImage("Edit.png")
                .ToolTip = "Edit the record"
                .Name = "WebsiteWebPage_EditButton"
            End With
            RegisterControl(Website_WebPage_Grid, EditButton, EditButton.Name.ToString)
            vToolBar.Items.Add(EditButton)
            vToolBar.Items.Add(TS_Separator)
        End If

        Dim SaveUpdateButton As New Button
        With SaveUpdateButton
            .Name = "WebsiteWebPage_SaveUpdateButton"
            If NewRecord = True Then
                .Content = ReturnToolBarImage("Record_Insert.png")
                .ToolTip = "Save the record"
            Else
                .Content = ReturnToolBarImageGrey("Record_Update.png")
                .ToolTip = "Update the record"
                .IsEnabled = False
            End If
        End With
        RegisterControl(Website_WebPage_Grid, SaveUpdateButton, SaveUpdateButton.Name.ToString)
        vToolBar.Items.Add(SaveUpdateButton)
        vToolBar.Items.Add(TS_Separator)

        Dim OutPutLB As New Label
        With OutPutLB
            .Name = "WebsiteAdministrator_OutputLB"
            .HorizontalAlignment = Windows.HorizontalAlignment.Right
            .VerticalAlignment = Windows.VerticalAlignment.Center
            .FontSize = 10
        End With
        RegisterControl(Website_WebPage_Grid, OutPutLB, OutPutLB.Name.ToString)
        Grid.SetColumnSpan(OutPutLB, 2)
        Grid.SetRow(OutPutLB, 0)
        vInnerGrid.Children.Add(OutPutLB)

        Dim vName As String = "WebsiteAdministrator_"
        For i As Integer = 1 To 7
            Dim vLabel As New Label
            With vLabel
                .FontSize = 10
                .VerticalAlignment = Windows.VerticalAlignment.Center
                .HorizontalAlignment = Windows.HorizontalAlignment.Left
            End With
            Dim vTB As New CustomControl.TBx
            With vTB
                .IsNewRecord = NewRecord
                '.Width = 200
            End With
            Select Case i
                Case 1
                    vLabel.Content = "Page Name"
                    With vTB
                        .Width = 200
                        .Name = vName & "PageNameTB"
                    End With
                Case 2
                    vLabel.Content = "Meta Description"
                    With vTB
                        .Width = 600
                        .Name = vName & "MetaDescriptionTB"
                    End With
                Case 3
                    vLabel.Content = "Title"
                    With vTB
                        .Width = 400
                        .Name = vName & "TitleTB"
                    End With
                Case 4
                    vLabel.Content = "Navigate URL"
                    With vTB
                        .Width = 400
                        .Name = vName & "NavigateURLTB"
                    End With
                Case 5
                    vLabel.Content = "Menu Text"
                    With vTB
                        .Width = 200
                        .Name = vName & "MenuTextTB"
                    End With
                Case 6
                    vLabel.Content = "Menu ToolTip"
                    With vTB
                        .Width = 400
                        .Name = vName & "MenuToolTipTB"
                    End With
                Case 7
                    vLabel.Content = "Menu Position"
                    With vTB
                        .Width = 100
                        .Name = vName & "MenuPositionTB"
                    End With

            End Select
            Grid.SetColumn(vLabel, 0)
            Grid.SetRow(vLabel, i)
            Grid.SetColumn(vTB, 1)
            Grid.SetRow(vTB, i)
            vInnerGrid.Children.Add(vLabel)
            vInnerGrid.Children.Add(vTB)

        Next

        Grid.SetRow(vScrollViewer, 1)
        Website_WebPage_Grid.Children.Add(vScrollViewer)

        Dim DP As DockPanel = PageStatusBarDP(Website_WebPage_Grid)
        Grid.SetRow(DP, 2)
        Grid.SetColumnSpan(DP, 2)
        Website_WebPage_Grid.Children.Add(DP)

    Catch ex As Exception
        EmailError(ex)
    End Try
End Sub 
```

# python - 在安装时根据解释器版本在 setup.py 中解析 Python 依赖项

> ID：13812483
> 
> 赞同：2
> 
> 时间：2012-12-11T02:02:00.057
> 
> 标签：python, pip, dependency-management

假设我有一堆需求文件，例如：

```
requirements.txt   # common for both 2.x and 3.x
requirements-2.txt # 2.x
requirements-3.txt # 3.x 
```

我想根据当前的 Python 解释器版本`install_requires`在文件中填充参数。`setup.py`当然假设**pip**处理安装过程。

**解决方案 1：**当然，我可以编写一个简单的函数来读取并返回正确的需求。在有多个项目的情况下，这显然是不可接受的，因为我必须在任何地方复制该函数。

**解决方案 2：**这里的下一个想法是编写一个简单的包来为我完成它，但问题是它不仅应该在分发时可用（如`python setup.py sdist`），更重要的是，在安装时在自己的机器上可用。

我设法编写了一个简单的模块来做这件事，让我们称之为`depmodule`。我还有以下内容`setup.py`：

```
# -*- coding: utf-8 -*-

from setuptools import setup, find_packages

try:
    from depmodule import find_requirements
except ImportError:
    # this line is executed when reading setup.py for the first time
    # since depmodule is not installed yet
    find_requirements = lambda: []

setup(
    name='some-package',
    packages=find_packages(),
    # snip...
    platforms='any',

    # note that depmodule is listed here as a requirement, so it will be
    # installed before some-package, thus will be available when it comes
    # to running setup.py of some-package
    install_requires=['depmodule'] + find_requirements(),
) 
```

当涉及到它时，`pip install some-package`它**实际上正确地解决了依赖关系**，但它们并没有被 pip 拾取，所以它只安装：（`depmodule some-package`按那个顺序）而不是`depmodule dep1 dep2 ... some-package`.

我试图使用`setup_requires`论点，但没有运气。依赖项已下载，但我无法访问它，因为它是一个鸡蛋包（未提取）。

有什么办法可以克服这个问题吗？是否有任何替代方案（其他方法）可以帮助解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:23:57.747

由于您不想为多个项目复制代码，您可能会考虑`setup.py`从单一来源生成和/或更新 setup.py 的某些部分。这类似于`Makefile`从`Makefile.in`模板生成一个。

我有一个`py_setup`程序。我调用它以在当前目录`py_setup --new`中生成一个新`setup.py`的，将 py_setup 的一部分作为模板。当`py_setup`以文件名作为参数运行时，它会尝试更新该文件中的段，但保持其余部分不变。当不带参数且不带选项运行时，`py_setup`会更新所有`*/setup.py`文件上的段。

（和 setup.py 文件）中的段`py_setup`由表单的注释行分隔`#_## segement_name`或以`#_#`. 复制段之前或之间的任何内容，但永远不会在 py_setup 中`setup.py` 的行之后的任何内容中更新，即实际代码是实际程序代码`#_###``py_setup`

大多数行都是逐字复制的，除了段分隔符注释（在段名称之后剥离）和以以下开头的行：

```
setup = setup 
```

从那行`setup =`开始，它就被剥离了，所以它最终在 setup.py 中调用 setup() 但在 running 时没有`py_setup`。

更新时，只有目标中的**现有**段`setup.py`被替换为 中相同命名段的行`py_setup`。删除或更改段名称可确保不会更新代码更改。

# java - Java应用程序窗口的“修复”在辅助监视器分离时隐藏

> ID：13812484
> 
> 赞同：1
> 
> 时间：2012-12-11T02:02:21.223
> 
> 标签：java, macos, screen, resolution

我需要在启动时修复 OSX（https://sourceforge.net/projects/ipscan/）上开源 Java 应用程序“Angry IP Scanner”的屏幕位置。

如果您启动应用程序并将其移动到辅助显示器（非镜像）的扩展空间并执行以下两项操作之一：1）在应用程序运行的情况下拔下辅助显示器或 2）退出位于辅助显示器上的应用程序监视器。

如果您拔下第二台显示器然后启动应用程序，应用程序会加载并将屏幕放置在现在不存在的第二台显示器上，即使它没有插入。

要让屏幕回到主屏幕区域，您必须插入第二台显示器并将其移回主屏幕。然后您可以拔下第二台显示器并且没有问题。

当应用程序启动时，我认为应用程序需要检查当前屏幕尺寸与之前的屏幕尺寸，如果它发生了变化，请将屏幕放在 10,10 位置附近，以便它显示在主屏幕上，希望是活动屏幕。

在我对 Stack Overflow 的搜索中，您似乎可以找到如下所示的当前屏幕信息：

```
GraphicsDevice gd = GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice();
int width = gd.getDisplayMode().getWidth();
int height = gd.getDisplayMode().getHeight(); 
```

如何将其保存到文件中并调用/比较以前的数据与当前数据，如果它已更改，请将应用程序的窗口移动到 10,10 位置？

我是在 OSX 上编写 iOS 和 Ruby 的初学者，但没有做过任何 Java。我喜欢这个程序，但是这个错误让我很生气，而且似乎没有人在积极地处理代码。

有人想帮忙吗？

顺便说一句...这是 Angry IP Scanner 网站上的错误 84。

也许有人可以解释我如何从 cli 运行以下代码片段？

```
int resolution =Toolkit.getDefaultToolkit().getScreenResolution();
System.out.println(resolution); 
```

谢谢，

帕帕帕

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T02:09:26.960

就像是：

```
public class ShowMeTheScreenSize {

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                System.out.println("VirtualBounds = " + getVirtualBounds());

                for (int index = 0; index < getScreenDeviceCount(); index++) {
                    System.out.println("[" + index + "] Device bounds = " + getScreenDeviceBounds(index));
                }

                System.exit(0);
            }
        });
    }

    public static int getScreenDeviceCount() {

        GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();

        return ge.getScreenDevices().length;

    }

    public static Rectangle getVirtualBounds() {

        Rectangle bounds = new Rectangle(0, 0, 0, 0);

        GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
        GraphicsDevice lstGDs[] = ge.getScreenDevices();
        for (GraphicsDevice gd : lstGDs) {

            bounds.add(gd.getDefaultConfiguration().getBounds());

        }

        return bounds;

    }

    public static Rectangle getScreenDeviceBounds(int index) {

        GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
        GraphicsDevice lstGDs[] = ge.getScreenDevices();

        return lstGDs[index].getDefaultConfiguration().getBounds();

    }
} 
```

哪个输出...

```
VirtualBounds = java.awt.Rectangle[x=0,y=0,width=3840,height=1200]
[0] Device bounds = java.awt.Rectangle[x=0,y=0,width=1920,height=1200]
[1] Device bounds = java.awt.Rectangle[x=1920,y=0,width=1920,height=1200] 
```

在我的机器上

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T03:14:31.047

[正如这里](https://stackoverflow.com/a/2188981/230513)所讨论的，Mac OS X 有助于防止*可见*窗口被移出屏幕。一种权宜之计是将窗户移动到禁止位置的命令，这将迫使它伸手可及。

```
polo.setLocation(Short.MIN_VALUE, Short.MIN_VALUE); 
```

# joomla - 如何为 Joomla 2.5 配置首页静态文章

> ID：13812489
> 
> 赞同：-2
> 
> 时间：2012-12-11T02:02:40.990
> 
> 标签：joomla, joomla2.5

我对 Joomla 还是很陌生，而且我很熟悉在不同位置添加自定义 HTML 模块。我也很熟悉为首页设置博客布局，包括前导文章、介绍文章等。但是我有一个案例，我想有一个图像幻灯片，下面有一个静态的主要文章，有 3 篇介绍文章（每列一个），所有新文章水平列在此下方，而不是添加到列表顶部。这可能吗？如果可以，怎么做？

请参阅[RIP 文件](http://www.theripfiles.tv/index.php)

谢谢吉姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T01:00:45.023

对于幻灯片+静态文章，我要么将其放在某个位置的模块中，要么将其放在主要文章中。为了让你的一篇文章保持在首位，一个技巧是给它一个-1的顺序。另一种方法是手动维护您想要的订单并按订单使用。

# wordpress - How to access Wordpress plugin constant in another plugin without using path

> ID：13812490
> 
> 赞同：0
> 
> 时间：2012-12-11T02:02:52.200
> 
> 标签：wordpress, plugins

I want to check if the plugin is active without using is_plugin_active() from Wordpress because the plugin might not be in the default path. I would like to check using the plugin version constant instead (this one is available). I have other plugin with constant for example ACME_VERSION. To check if this plugin is activated in another plugin, I am using the PHP defined:

```
if(defined('ACME_VERSION')) {
//plugin is activated, add the hooks
} 
```

However, it is not working. Other Wordpress constants like WP_DEBUG returns true (I have enabled it in wp-config).

Am I missing something? What's the proper way of doing this? Thank you for any tips.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T03:47:02.603

You are probably testing the constant before it is defined (e.g. your plugin is loaded before the other plugin). Put your test inside a function called by an action hook, e.g. the ['init' action](http://codex.wordpress.org/Plugin_API/Action_Reference/init):

```
add_action('init', 'my_plugin_init');
function my_plugin_init() {
    if(defined('ACME_VERSION')) {
        //plugin is activated, add the hooks
    }
} 
```

# vba - 在 Excel、VBA (Excel 2010) 中设置 PlotArea.Width 时出错

> ID：13812491
> 
> 赞同：5
> 
> 时间：2012-12-11T02:02:54.123
> 
> 标签：vba, excel, excel-2010

我在尝试设置图表的 plotarea.width 属性的子例程中遇到错误。

![在此处输入图像描述](../Images/48e79c0861bb32da1cec5dce3cde74a7.png)

如果我注释掉前面的行，其他维度也会导致此错误。没有ActiveChart，没有选择等。具体的错误信息是这样的：“-2147467259 (80004005) Method 'Width' of object 'PlotArea' failed”

这让我很困惑，原因有几个：

*   在调试模式下，F8 单步执行代码不会发生错误。
*   AFAIK“宽度”不是“方法”，而是图表绘图区域的“属性”，因此即使错误消息也相当模糊。

有什么想法吗？这是我可以分享的尽可能多的代码，完整的 ChartSizeMedium 子例程，以及一个虚拟片段，向您展示我如何建立图表并将其传递给在传递给另一个函数之前设置大小和其他一些属性的子程序将系列数据添加到图表中。

```
 Option Explicit
    Private Sub EstablishChartObject()
    Dim cObj as ChartObject
    Set cObj = ActiveSheet.ChartObjects.Add(Left:=30, Top:30, Width:=740, Height:=300)
        ChartSizeMedium cObj.Chart, "Integer", "Example Chart Title"
    End Sub
    Private Sub ChartSizeMedium(cht As Chart, NumType As String, Optional chtTitle As String)
    'Subroutine to make a consistent size chart
    Dim s As Long
    With cht
    'Add a chart title if one exists.
        If Len(chtTitle) > 0 Then
        .HasTitle = True
        .chartTitle.Characters.Text = chtTitle
        End If
    'Create the default chart Legend
        .HasLegend = True
        With .Legend
        .Position = xlTop
        .Font.Size = 11
        .Font.Bold = True
        End With
    'Format the axes
        .Axes(xlValue).MajorGridlines.Format.Line.Visible = msoFalse
        .Axes(xlValue).MinorGridlines.Format.Line.Visible = msoFalse

    'Format the size of the chart
        With .Parent
        .Width = 740
        .Height = 396
        End With

        With .PlotArea
        .Width = 640    '<---- THIS LINE TRIGGERS THE ERROR
        .Height = 280
        .Left = 30
        .Top = 30
        End With
    End With
    'Some charts start with more than one series container, so make sure they're gone:
    With cht
    Do Until .SeriesCollection.Count = 0
    s = .SeriesCollection.Count
    .SeriesCollection(s).Delete
    Loop
    End With
    End Sub 
```

**2012 年 12 月 12 日更新**

我删除了所有无问题的代码并仅使用带有块的 PlotArea，在同一例程中，我还尝试设置图表类型（几个值），如本示例所示，在尝试设置之前手动添加一系列数据PlotArea 尺寸，但错误仍然存​​在：

```
Option Explicit
Private Sub EstablishChartObject2()
    Dim cObj As ChartObject
    Dim sh As Worksheet

    Set sh = ActiveSheet
    Dim srs As Series
    Set cObj = sh.ChartObjects.Add(Left:=30, Top:=30, Width:=740, Height:=300)
    Set srs = cObj.Chart.SeriesCollection.NewSeries

    srs.Values = "={1,3,5,7,4}"
    cObj.Chart.ChartType = 57

    With cObj.Chart.PlotArea
        .Width = 100   '<---- THIS LINE TRIGGERS THE ERROR
        .Height = 280
        .Left = 30
        .Top = 30
    End With

End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-06-10T15:50:48.133

我有一个类似的问题。它绝对是一个优秀的问题（有 2013 年）。

```
With .PlotArea 
    .Select 'err if delete this line of code
    .Top = 0
    .Left = 0
    .width = 40
    .Height = 40 
End With 
```

如果删除该`.select`行，将导致下一行出错。请注意，我没有使用 < `with selection`do stuff>。`.select`使它工作，不使用选择，这显然是一个 excel 错误（来自以前的版本？）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T16:32:58.327

两种似乎有效的解决方案，都不是我想要的“优雅”（我希望有一种方法可以通过*选择*图表或其任何部分来做到这一点）。

**选项 1 - 选择绘图区域，然后取消选择它。** 这似乎是最可靠/最有效的解决方案。

```
With .PlotArea
    Application.ScreenUpdating = False
   .Select
    With Selection
        .Width = paWidth
        .Height = paHeight
        .Left = paLeft
        .Top = paTop
        ActiveSheet.Range("A1").Activate
    End With
    Application.ScreenUpdating = True
End With 
```

**选项 2 - 禁用循环中的错误处理**（这来自 Doug 的链接）。这似乎不是一个非常可靠或有效的方法，虽然它似乎有效，但我*知道*在该循环中，它在每个属性上都失败了一次，然后它在后续传递中成功设置它们。

```
With .PlotArea
    For pLoop = 1 To 5
        On Error Resume Next
        .Width = paWidth
        .Height = paHeight
        .Left = paLeft
        .Top = paTop
        On Error GoTo 0
    Next
End With 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T15:56:29.107

我知道这是旧的，这个解决方案似乎很糟糕，但它有效。当您提到逐步完成工作时，我只是想这样做。

```
Option Explicit

Sub chart()

Dim cObj As ChartObject
Dim sh As Worksheet

Set sh = ActiveSheet
Dim srs As Series
Set cObj = sh.ChartObjects.Add(Left:=30, Top:=30, Width:=740, Height:=300)
cObj.chart.ChartType = 57
Set srs = cObj.chart.SeriesCollection.NewSeries
    srs.Values = "={1,3,5,7,4}"
Application.Wait Now + TimeValue("00:00:01") '<~~ Added This line
With cObj.chart.PlotArea
    .Width = 100
    .Height = 280
    .Left = 30
    .Top = 30
End With
End Sub 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T13:07:58.280

希望您的工作表和图表能够获得最大宽度`640`。如果是这样，请尝试**显式**引用。还建议您将`width, height`值更改为较低的值并查看程序如何响应。既然你说，当你`select`工作时，

*   这也意味着，您`cht`正在包装正确的图表对象 - 除非您使用`ActiveChart.PlotArea.Width`. 因此，我想明确的参考可能是一个潜在的尝试。

,

```
cht.PlotArea.Width = 640
cht.PlotArea.Height = 280
cht.PlotArea.Left = 30
cht.PlotArea.Top = 30 
```

此外，检查`Aspect Ratio`锁定或解锁。如果这些都不起作用，则将图表添加到您的工作表中并使用最简单的图表格式代码来检查`widht, height, left, top`更改。

* * *

## 更新二

让我们尝试在第二个中指定图表类型并设置图表对象`sub`。我最终尝试了它并且它正在工作。尝试以下更改的代码。

代码：从工作表中显示的按钮调用此子程序。

```
Option Explicit

  Public Sub EstablishChartObject()
  Dim mySheet As Worksheet
  Dim cObj As ChartObject

    Application.ScreenUpdating = False
    Application.StatusBar = "Chart is coming soon..."

    Set mySheet = Sheets(2) '-- set according to yours
    '-- create chart with some source data first, which you can change later
    Set cObj = mySheet.ChartObjects.Add(Left:=30, Top:=30, Width:=400, Height:=200)
    ChartSizeMedium cObj, "Integer", "Example Chart Title"

  End Sub

  'Subroutine to make a consistent size chart
  Private Sub ChartSizeMedium(chtObj As ChartObject, NumType As String, _
                                  Optional chtTitle As String)

  Dim myChart As Chart
  Dim s As Long

     Set myChart = chtObj.Chart '-- specify chart type
     myChart.SetSourceData Source:=Sheets(2).Range("B3:C12")  '-- set to what you have
     myChart.ChartType = xlXYScatterLines  '-- set to the type you want 
                                          'and make sure to **use correct properties**

        With myChart
            If .HasTitle Then
                .ChartTitle.Characters.Text = chtTitle
            End If

            'Create the default chart Legend
            If .HasLegend Then
                With .Legend
                    .Position = xlTop
                    .Font.Size = 11
                    .Font.Bold = True
                End With
            End If

            'Format the axes
            With .Axes(xlValue)
                .HasMajorGridlines = False
            End With

            'Format the size of the chart
            With .Parent
                .Width = 400 '-- change to yours
                .Height = 250 '-- change to yours
            End With

            With .PlotArea
                .Width = 300 '-- change to yours
                .Height = 180 '-- change to yours
                .Left = 30
                .Top = 30
            End With
    End With

    Application.ScreenUpdating = True
    Application.StatusBar = "Chart is Here!"

End Sub 
```

输出：

![在此处输入图像描述](../Images/bb98d840326df1ab04232989595ea9a0.png)

**确保为每种图表类型使用正确的属性。**请注意，上面的代码不会从您的工作表中删除任何剩余的旧图表。

`.MajoreGridlines.Format.Lines.Visible`失败。所以设置`.MajorGridlines = False`以确保您不想显示网格线。您想做的任何其他事情都可以在以后完成。**最初只需尝试对尺寸进行更改。**

参考自：[MSDN Gridlines 属性](http://msdn.microsoft.com/en-us/library/office/aa174226%28v=office.11%29.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-16T16:46:30.197

**编辑：**这似乎适用于*某些*图表类型，但对于其他图表类型仍然失败。我继续使用 5x 循环，`On Error Resume Next`这似乎是 - 不幸的是 - 迄今为止最“可靠”的解决方案。

**原文**：这是基于上面 User2140261 的建议答案：

[https://stackoverflow.com/a/16041640/1467082](https://stackoverflow.com/a/16041640/1467082)

由于最初发布了该问题，因此该应用程序现在驻留在 PowerPoint 中，因此我无法使用`Applicaiton.Wait`. 我遇到了一些间歇性错误，停顿 1 秒，而 3 秒的停顿太长了，所以我构建了以下错误陷阱。相同的想法可以在 Excel 中与`Application.Wait`.

正是这段代码让我很适应，所以我在 Powerpoint 中添加了这个错误处理来模仿`Application.Wait`.

```
RetryChartDimensions:
On Error GoTo ErrChartDimensions
With .PlotArea
    .Width = paWidth
    .Height = paHeight
    .Left = paLeft
    .Top = paTop
End With
On Error GoTo 0

' More code
' more code

Exit Sub 'gracefully exit this subroutine before the error-handling.'

ErrChartDimensions:
Err.Clear
'Pause before setting the PlotArea dimensions:'
Dim wtTime As Double
Dim startTime As Long

'A maximum 3 second delay should be more than enough time.
If wtTime < 3 Then
    wtTime = wtTime + 0.5
    startTime = Timer
    While Timer < startTime + wtTime
        DoEvents
    Wend
End If
Resume RetryChartDimensions

End Sub 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-24T10:10:34.893

我没有足够的声誉来添加评论，因此使用上述解决方案我已经解决了我在 VB.Net 2010 和 Excel 2013 中的饼图问题。xlLine 图表从未引起问题，但我的代码会在相同代码时崩溃在 Excel 2013 上针对 xlPie 图表运行（在 Excel 2007 上一切正常）。

我现在的工作代码：

```
 appExcel.Visible = False
    xlchart_for_96_Well_Plate_Source = appExcel.Charts.Add(After:=wkbExperiment_Details.Sheets(wkbExperiment_Details.Sheets.Count))
    appExcel.ScreenUpdating = False

    With xlchart_for_96_Well_Plate_Source
            .SetSourceData(Source:=wksData.Range(wksData.Cells(2, byteCharts_added), wksData.Cells(intUsed_Rows, byteCharts_added)), PlotBy:=Microsoft.Office.Interop.Excel.XlRowCol.xlColumns)
            .ChartType = objChart_Type
            .PlotArea.Select() 
            .PlotArea.Top = 2
            .PlotArea.Select()
            .PlotArea.Left = 2
            .SeriesCollection(.SeriesCollection.count).xvalues = wksData.Range(wksData.Cells(2, 1), wksData.Cells(intUsed_Rows, 1)).Value ' Scale - wavelength for line chart
            .SeriesCollection(.SeriesCollection.count).Values = wksData.Range(wksData.Cells(2, byteCharts_added + 1), wksData.Cells(intUsed_Rows, byteCharts_added + 1)).Value
            .SeriesCollection(.SeriesCollection.count).Name = wksData.Cells(1, .SeriesCollection.count + 1).value
    End With
appExcel.ScreenUpdating = True 
```

# jmeter - 使用 JMeter 在 HTTP 请求发布正文中使用 cookie 值

> ID：13812496
> 
> 赞同：4
> 
> 时间：2012-12-11T02:04:05.187
> 
> 标签：jmeter, session-cookies

我遇到了类似于这篇文章中的问题：[JMeter；session cookie](https://stackoverflow.com/questions/8317214/jmeter-session-cookie)，但从不同的角度接近。

相似之处在帖子的底部，OP 写道：

> 如何... 我可以为从第一个响应标头中提取值的每个用户设置和提交唯一的 cookie？

我们正在使用 JMeter 进行负载测试，并且需要让多个用户同时登录到我们的电子邮件客户端。我们的网站（和测试计划）的工作方式是：

*   输入用户名/密码，点击登录。
*   单击电子邮件。
*   在 cookie 中接收身份验证令牌（用于保持登录到电子邮件客户端）。
*   在与电子邮件客户端交互时（打开文件夹、将电子邮件标记为已读等），在帖子正文中发送身份验证令牌。

问题是身份验证令牌没有以可以在 POST 请求中使用的方式存储为值（并且由于身份验证令牌不是作为 cookie 发送的，我们不能简单地存储它并发送它使用 HTTP Cookie 管理器）。cookie 最初设置如下：

`AUTH_TOKEN=(long string of letters, numbers, and underscores); Domain=.ourdomain.net; Path=/`

我们尝试了以下方法从 cookie 中提取身份验证令牌值：

*   使用正则表达式提取器从“单击电子邮件”步骤的响应标头中提取值。我们尝试了两个正则表达式；两者都只是导致 JMeter 在运行测试时使用默认的身份验证令牌值：
    *   AUTH_TOKEN\=(\w+)\;
    *   AUTH_TOKEN=([^;]+);
*   在 user.properties 中定义属性“CookieManager.save.cookies=true”（根据用户手册的建议）和“CookieManager.check.cookies=false”（根据该线程的建议），然后使用“${COOKIE_AUTH_TOKEN}”在帖子正文中。
    *   使用其中一个或两个，JMeter`${COOKIE_AUTH_TOKEN}`在帖子正文中设置为 auth 令牌值。
    *   我们知道 ${COOKIE_cookieName} 是正确的格式，因为这与 JMeter 存储的其他 cookie 一起使用。

我已经阅读了许多线程，但没有一个处理过这个特定问题。几周前我刚开始学习如何使用 JMeter，所以我不确定在这里做什么，任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T23:51:49.147

问题实际上是由于向服务器发送了不正确的请求，然后向服务器发送了空白响应。一旦我们拆除并重写了整个测试计划（我们使用的实际上是另一个测试计划的修改版本）并且在 user.properties 中有 CookieManager.save.cookies=true，我们就能够使用 ${COOKIE_AUTH_TOKEN} 并获得正确的值。

# c# - 从 Javascript 调用 ASP.NET 2.0 Web 服务

> ID：13812498
> 
> 赞同：0
> 
> 时间：2012-12-11T02:04:43.230
> 
> 标签：c#, javascript, asp.net, jquery, asmx

这个问题比仅仅从 Js 调用 web 方法要复杂一些。

这是我在 ASP.Net 方面得到的代码：

```
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[ScriptService]
public class WebService : System.Web.Services.WebService
{
        [WebMethod]
        [ScriptMethod(ResponseFormat = ResponseFormat.Xml)]
        public KError GetAppServer(int version, ref KServerInfo serv, ref KUserMessage msg)
        {
        ......
        }
} 
```

Where`KError`和是简单的可序列化类`KServerInfo`，`KUserMessage`其中只有字符串和整数。

在 .Net 环境中使用此服务时，传递对复杂类型的引用没有问题，但它在 Js 中不起作用。

我尝试了很多选项（谷歌在这件事上并没有真正的帮助）传递对 serv 和 msg 的引用，但服务不断回复 500 - Internal server error。错误描述说 ASP.Net 无法从 json 数据实例化 serv 和 msg。

这是我的 Js 部分：

```
var app = {
          version : 1,
          SessionID : "''",
          Path : "''",
          Login : "''",
          Pwd : "''",
          UserID : 0
          };
var jd = { version : 1, 'appSrv': app, 'msg': msg };
$.ajax({
              type: "POST",
              contentType: "application/json; charset=utf-8",
              url: "http://localhost:3965/api.asmx/GetAppServer",
              data: JSON.stringify(jd),
              //data: JSON.stringify(jd),
              dataType: "json",
              success: AjaxSucceeded,
              error: AjaxFailed
          }); 
```

这是我从服务器得到的确切错误：

没有为 \u0027API.code.KServerInfo&\u0027 类型定义无参数构造函数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-02T11:57:06.347

尝试使用此代码：

```
var jd = { version : 1, serv: app, msg: msg }; 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-11T04:44:08.647

我认为要从 java-script 调用服务，您在上课之前需要这一行

```
 // To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
 [System.Web.Script.Services.ScriptService] 
```

所以你的代码应该是这样的

```
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[ScriptService]
[System.Web.Script.Services.ScriptService]
public class WebService : System.Web.Services.WebService
{
    [WebMethod]
    [ScriptMethod(ResponseFormat = ResponseFormat.Xml)]
    public KError GetAppServer(int version, ref KServerInfo serv, ref KUserMessage msg)
    {
    ......
    }
} 
```

# c# - 我可以检测应用程序是否在儿童区运行吗？

> ID：13812507
> 
> 赞同：3
> 
> 时间：2012-12-11T02:05:44.320
> 
> 标签：c#, windows-phone, windows-phone-8

我试图弄清楚是否可以检测应用程序是否在 Windows Phone 8 的儿童区中运行。

我在尝试创建辅助磁贴时弹出一个对话框，上面写着“当您在儿童角落时，您无法更改固定开始的内容。” 如果此菜单项位于儿童区，我想禁用此菜单项，因此使用我的应用程序的任何孩子都不会遇到这种情况。

* * *

解决：

Windows.Phone.ApplicationModel 命名空间中的**ApplicationProfile.Modes属性返回一个 ApplicationProfileModes 对象。**我使用下面的代码并弹出对话框并在正常屏幕中说“默认”，在儿童模式下说“备用”。

```
protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
{
    base.OnNavigatedTo(e);
    MessageBox.Show(messageBoxText: ApplicationProfile.Modes.ToString());
} 
```

**感谢 matthijs Hoekstra 的正确回答。**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T21:16:44.883

您可以查看[http://msdn.microsoft.com/en-us/library/windowsphone/develop/windows.phone.applicationmodel.applicationprofile.modes(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/windows.phone.applicationmodel.applicationprofile.modes(v=vs.105).aspx)

Windows.Phone.ApplicationModel.ApplicationProfile 命名空间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T16:09:47.873

我目前不知道有任何方法可以访问应用程序的起点。这将是了解用户是否在儿童角的必要信息。

# c# - 用于提取用双引号括起来的字符串的正则表达式方法

> ID：13812509
> 
> 赞同：0
> 
> 时间：2012-12-11T02:05:45.980
> 
> 标签：c#, regex

我有一个正在通过的搜索字符串

> 例如: "a+b",a, b, "C","d+e",ab,d

我想过滤掉所有被双引号（“”）包围的子字符串。在上面的示例输出中应包含：

> "a+b","C","d+e"

有没有办法在不循环的情况下做到这一点？

然后我还需要提取一个没有上述值的字符串来做进一步处理

> 例如：a,b,ab,d

关于如何以最小的性能影响做到这一点的任何建议？

预先感谢您的所有意见和建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T03:04:32.467

由于您没有说明您想要输出的确切程度（您是否需要保留逗号和额外的空格？是否以逗号分隔？让我们假设它不是逗号分隔的，您只是想删除“xyz”的出现：

```
 string strRegex = @"""([^""])+""";
    string strTargetString = @" ""a+b"",a, b, ""C"",""d+e"",a-b,d";
    string strOutput = Regex.Replace(strTargetString, strRegex, x => ""); 
```

将删除所有项目（留下额外的逗号和空格）。

如果您正在尝试做一些需要每个单独匹配的事情，那么您可能想尝试：

```
var y = (from Match m in Regex.Matches(strTargetString, strRegex) select m.Value).ToList<string>();
y.ForEach(s => Console.WriteLine(s)); 
```

要获取不带引号的项目列表，您可以反转正则表达式模式或使用第一个代码示例中的替换方法，然后在逗号上拆分，修剪空白（再次，假设您在逗号上拆分听起来像你一样）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T05:53:54.820

首先，在输出末尾添加一个逗号：

```
"a+b",a, b, "C","d+e",a-b,d, 
```

然后，使用这个正则表达式：

```
((?<quoted>\".+?\")|(?<unquoted>.+?)),\s* 
```

*现在你有两个问题。开玩笑！*

您必须找到一种在不使用循环的情况下提取匹配项的方法，但至少通过使用组将它们分成带引号和不带引号的字符串。您可以使用 lamdba 表达式将数据拉出并加入它，每个用于引用和未引用，但它只是在幕后进行循环，并且可能比简单的 for 循环增加更多开销。听起来您正试图在这里寻找性能，因此请花时间测试每种方法，看看什么能提供最佳结果。

# ruby-on-rails - 如何使用 gmaps4rails 在我的地图上启用绘图工具？

> ID：13812514
> 
> 赞同：1
> 
> 时间：2012-12-11T02:06:24.417
> 
> 标签：ruby-on-rails, ruby-on-rails-3, google-maps-api-3, gmaps4rails

我试过：<%= gmaps({"map_options" => @map_options,"markers" => { "data" => @markers}, "libraries" => "drawing", "circles" => { "数据" => '[ {"lng": -87.6355, "lat": 41.8886, "radius": 600, "strokeColor": "#FF0000"} ]' }}) %>

@map_options 只是一个实例变量，我在其中传递来自用户位置的 lat/lng。其他一切正常，但无法加载绘图工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T10:54:04.553

这里有两个问题：

*   `libraries`应该在`maps_options`哈希中

*   它的价值应该是`Array`

[源代码。](https://github.com/apneadiving/Google-Maps-for-Rails/blob/master/lib/gmaps4rails/view_helper.rb#L126)

# c# - 发送带有附件 C# 的电子邮件

> ID：13812516
> 
> 赞同：-3
> 
> 时间：2012-12-11T02:06:37.283
> 
> 标签：c#, smtp

> **可能重复：**
> [从 WinForms 应用程序发送带有附件的电子邮件？](https://stackoverflow.com/questions/2204698/send-email-with-attachment-from-winforms-app)

这是我的脚本：

```
 var fromAddress = new MailAddress("myemail@gmail.com");
     var toAddress = new MailAddress("myemail@gmail.com");
     const string fromPassword = "mypassword";
     const string subject = "Subject";
     const string body = "Body";

       var smtp = new SmtpClient
       {
           Host = "smtp.gmail.com",
           Port = 587,
           EnableSsl = true,
           DeliveryMethod = SmtpDeliveryMethod.Network,
           UseDefaultCredentials = false,
           Credentials = new NetworkCredential(fromAddress.Address, fromPassword)
       };
       using (var message = new MailMessage(fromAddress, toAddress)
                 {
                     Subject = subject,
                     Body = body,
                 })

       {
           smtp.Send(message);
       } 
```

它运作良好，但我还没有想出一种添加附件的方法。是的，我知道这个网站有示例，但我找不到可以发送附件的示例

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T02:10:13.373

使用[附件属性](http://msdn.microsoft.com/en-us/library/vstudio/system.net.mail.mailmessage.attachments.aspx)。

# go - 在 init() 中验证环境

> ID：13812517
> 
> 赞同：4
> 
> 时间：2012-12-11T02:07:14.637
> 
> 标签：go

我有一个包可以验证进程是否设置了特定的环境变量`init()`，否则它会恐慌。

我这样做是为了确保在启动时正确配置该过程。

问题是这种方法不是真正可测试的（使用`_test.go`文件），因为测试套件中不存在环境。

解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T02:14:20.773

您希望能够测试验证，还是在测试文件中完全跳过它？无论哪种方式都将使用相同的基本方法，即将验证代码分离到它自己的文件中，该文件不会在测试期间构建。如果您只想在测试期间完全跳过验证，请将整个`init()`函数放入该文件中。如果您想测试验证，只需让验证代码调用您自己的 shim 以获取环境值，然后将您的 shim 放入该非测试文件中，然后将单独的 shim 放入仅在测试期间编译的文件中。

您可以使用文件头中的[构建约束](http://golang.org/pkg/go/build/#Build_Constraints)来控制文件是否在测试期间构建。IIRC，运行测试应用了`test`约束，所以你可以检查一下。

# php - 使用 jQuery/ajax 进行 GET 请求

> ID：13812518
> 
> 赞同：1
> 
> 时间：2012-12-11T02:07:15.620
> 
> 标签：php, javascript, jquery, ajax

我正在尝试使用 jQuery 发送要在另一个页面上处理的输入，但我在让它工作时遇到了一些麻烦。

当我打开网络控制台时，我可以看到一个设置为 common_functions 的 GET 方法，但它没有附加任何变量。我得到这个

```
http://localhost/project/common_functions.php 
```

而不是像

```
http://localhost/project/common_functions.php?name=abcdef 
```

这是我的 HTML。据我所知，这很好，因为我从接收输入的函数中收到警报

```
<form method="post">
<table>
<tr><td>Project Name</td><td><input type = "textbox" name="project_name" id = "project_name" onkeyup = "get_name(this.value);" /></td></tr>
<tr><td>Project Description</td><td><input type = "textbox" name="project_name" id = "project_description" onkeyup = "get_description(this.value);"/></td></tr>
<tr><td><input type="submit" name="submit_project"></td></tr>
</table>
</form> 
```

这是jQuery。我正在尝试发送 GET 请求。

```
function get_name(name){
    var project_name = name;
    $.get('common_functions.php', function(name) {
        alert(project_name); //this displays the name
        $('#project_name').html(name);
    });
} 
```

当我有这个时，我会收到一个警报，所以我知道它至少在确认 onkeyup。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T02:11:07.583

您没有发送任何数据。您可以将数据附加到脚本名称或将其作为键值对发送：

```
$.get('common_functions.php', {'project_name': name}, function(data) { 
```

而且我不会在回调函数中使用相同的变量名，这只会导致混乱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T02:16:36.620

您期望看到的是，如果您使用以下参数调用 get 函数。

```
var url = 'common_functions.php?project_name=' + Name;

$.get(url , function(name) {
    alert(project_name); //this displays the name
    $('#project_name').html(name);
}); 
```

第二个参数只是返回函数，当您对 common_functions.php 的调用返回时，这将被调用。

正如@jeroen 所展示的那样，最好的方法就是这样做。

# java - 使用 Oauth2 3 legged 访问 Gmail 的基本要求

> ID：13812523
> 
> 赞同：0
> 
> 时间：2012-12-11T02:07:43.147
> 
> 标签：java, gmail, google-api, oauth-2.0, google-api-java-client

使用 Oauth2 3 legged 访问 gmail 的基本要求（库）是什么？

此访问是否支持任何 java 库？

任何使用java的kickstart示例？

我从谷歌找到[了这个例子](http://code.google.com/p/google-mail-oauth2-tools/wiki/JavaSampleCode)，但它似乎使用 python 脚本来获取访问令牌。我越来越困惑。

任何输入都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T07:34:06.210

使用 OAuth2 访问 Gmail API 有两个高级步骤：

1.  获取用户访问令牌。为此，请先阅读[本指南](https://developers.google.com/accounts/docs/OAuth2)，其中包含基本步骤。然后，检查 Google OAuth2 Java[客户端库](http://code.google.com/p/google-oauth-java-client/)，它有一些方便的类，可以抽象出一些低级协议细节。

2.  使用令牌通过 Gmail IMAP/SMTP 进行身份验证并开始阅读邮件！您已经在问题中包含的链接中找到了相关库。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2018-05-10T07:20:19.380

使用令牌通过 Gmail IMAP/SMTP 进行身份验证并开始阅读邮件！您已经在问题中包含的链接中找到了相关库。

# jquery - 在表 td 上添加多个类

> ID：13812531
> 
> 赞同：1
> 
> 时间：2012-12-11T02:08:42.063
> 
> 标签：jquery, html, css, html-table

我有一个动态表，需要为每个 TD 分配它自己的类。在下面的示例中，.one 应用于此表的所有 TD。仅使用 CSS（或 Jquery），我可以将 td 类 .two 和 .three 分配给该表的第二个和第三个孩子吗？

**[请不要在TD中添加类名；这是动态表]**

*动态*- 澄清一下，表中 TD/TR 的数量是未知的。因此，无论是 3 个 TD/TR 还是 10 个 TD/TR，CSS 都必须足够智能以进行调整。

HTML：

```
<table id="foo">
  <tr>
   <td>One</td>
  </tr>
  <tr>
   <td>Two</td>
  </tr>
  <tr>
   <td>Three</td>
  </tr>
</table>​ 
```

CSS：

```
 #foo{
   position: absolute;
   display: block;
   background: gray;
   color: white;
   height: 67px;
   width: 500px;
   border: 1px solid black;
}

tr {
   width: 500px;
   border: 1px solid black;
}

.one td {
   background: red;
   display: block;
   position: relative;
   left: 0px;
   width: 15px;
   border: 1px solid black;
   height: 19px;
   text-indent: 22px;
}

.two td {
   background: green;
   display: block;
   position: relative;
   left: 0px;
   width: 15px;
   border: 1px solid black;
   height: 19px;
   text-indent: 22px;
} 
```

请参阅此处的 JS Fiddle：http: [//jsfiddle.net/bigthyme/kM7H9/](http://jsfiddle.net/bigthyme/kM7H9/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T02:11:39.573

您可以使用集合中的每个元素索引作为查找：

```
​var classes = ['one', 'two', 'three'];

$("#foo td").attr("class", function (index, value) {
    return classes[index]; // 0 returns 'one', 1 returns 'two', etc.
});​​​​​​​​​​​​ 
```

演示：http: [//jsfiddle.net/SzKbh/1/](http://jsfiddle.net/SzKbh/1/)

不过，您不需要这样做；您可以在不使用类的情况下定位它们：

```
tr:nth-of-type(1) td { color: red }
tr:nth-of-type(2) td { color: green }
tr:nth-of-type(3) td { color: blue }​ 
```

演示：http: [//jsfiddle.net/SzKbh/](http://jsfiddle.net/SzKbh/)

在现代浏览器中有很好的支持。这确实需要您明确设置每行的颜色，从而知道您将拥有多少行。如果您不知道您将拥有多少行，您可以使用更复杂的选择器：

```
table tr:nth-child(2n+0) { color: red }
table tr:nth-child(2n+1) { color: blue }
table tr:nth-child(3n+0) { color: green } 
```

演示：http: [//jsfiddle.net/SzKbh/2/](http://jsfiddle.net/SzKbh/2/)

# facebook - “您提交的 URI 包含不允许的字符”中仍然出现错误。在 CodeIgniter 中使用 Facebook 登录

> ID：13812534
> 
> 赞同：4
> 
> 时间：2012-12-11T02:09:12.767
> 
> 标签：facebook, codeigniter, uri

*我搜索了所有帖子，发现他们遇到了同样的错误。大多数评论和反馈都已成功修复，但是当我这样做时，它真的不起作用：/请帮帮我:(*

我已经`system/application/config/config.php`从以下位置更改了文件：

```
$config['permitted_uri_chars'] = 'a-z 0-9~%.:_\-'; 
```

至

```
$config['permitted_uri_chars'] = 'a-z 0-9~%\.\:_\-'; 
```

和

在此文件夹中的`system/libraries/URI.php`文件来自：

```
if ( ! preg_match("|^[".str_replace(array('\\-', '\-'), '-', preg_quote($this->config->item('permitted_uri_chars'), '-'))."]+$|i", $str)) 
```

至

```
if ( ! preg_match("|^[".($this->config->item('permitted_uri_chars'))."]+$|i", rawurlencode($str))) 
```

仍然是“您提交的 URI 包含不允许的字符”。存在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-18T11:21:39.633

我今天升级到 PHP 5.3 时遇到了类似的问题，结果发现解决方案是`_filter_uri()`从`URI.php`

```
if ( ! preg_match("|^[".preg_quote($this->config->item('permitted_uri_chars'))."]+$|i", $str)) 
```

使用[CodeIgniter 存储库版本](https://github.com/EllisLab/CodeIgniter/blob/develop/system/core/URI.php)中的这一新行：

```
if ( ! preg_match('|^['.str_replace(array('\\-', '\-'), '-', preg_quote($this->config->item('permitted_uri_chars'), '-')).']+$|i', $str)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T02:29:50.640

这是我为启用 facebook 的应用程序所拥有的

```
$config['permitted_uri_chars'] = '+=a-z 0-9?~%.,:_\-'; 
```

我见过成功的人也启用了以下功能，但我的仍然设置为 FALSE

```
$config['enable_query_strings'] = TRUE; 
```

# jquery - jstree杀死实时链接

> ID：13812535
> 
> 赞同：2
> 
> 时间：2012-12-11T02:09:14.857
> 
> 标签：jquery, jquery-plugins, jstree

我正在一个项目上实现 jsTree 插件（http://www.jstree.com），它通常可以工作，但它似乎阻止了它所应用的列表中的任何链接工作。我在这里有一个 Codepen 示例：

[http://codepen.io/WebDevCA/full/yinhk](http://codepen.io/WebDevCA/full/yinhk)

如果你去团队 A 的项目 > 迭代 1 > 故事 A

那么故事 A 应该充当到 Twitter 的链接（您可以滚动链接以查看它指向那里）。但是 jsTree 使链接无法正常工作。删除 jsTree 并且链接有效。有什么办法可以说服 jsTree 让它工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T04:03:32.753

问题是 jstree 使用鼠标单击选择事件。如果您想在选择节点时执行其他操作，则需要绑定到 select 事件：

```
 $("#tree").jstree(
      // options...
    ).bind("select_node.jstree", function (evt, data) {
      // your code here...
      // id of selected node will be: data.inst.get_selected()[0].id
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T01:11:33.737

此后，我使用以下代码实现*了一种可能的解决方案：*

```
$(document).on('click', '#selector A', function () {
  var goHere = $(this).attr("href");
  window.location.href = goHere;
}); 
```

上面链接的 Codepen 已更新，以显示它可以正常工作。[http://codepen.io/WebDevCA/full/yinhk](http://codepen.io/WebDevCA/full/yinhk)

# antlr - ANTLR - 树构造中的孙节点

> ID：13812543
> 
> 赞同：3
> 
> 时间：2012-12-11T02:10:17.950
> 
> 标签：antlr, grammar, declarative

我正在尝试编写一个声明性语法，其中声明和其他语句的顺序并不重要。但是，对于解析，我想让语法以有序的方式输出一棵树。假设语言由声明 ( `decl`) 和赋值 ( `assign`) 组成。一个例子可能是：

```
decl x
assign y 2
assign x 1
decl y 
```

我想让程序由一棵树表示，所有声明都在一个子树中，所有分配都在另一个子树中。对于上面的示例，类似于：

```
(PROGRAM
    (DECLARATIONS x y)
    (ASSIGNMENTS
        (y 2)
        (x 1))) 
```

我可以在树构建期间执行此重新排列，还是应该编写树语法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T06:49:07.397

我认为这里有一个比另一个更简单的答案：

```
token { DECLS; ASSIGNS; }

prog: (d+=decl | a+=assign)* EOF -> ^(DECLS $d*) ^(ASSIGNS $a*) ;

... 
```

当然，它可以适应尽可能多的规则。

但是，您确定需要这样做吗？为什么不在解析器中只构建 DECL 指令的符号表，然后只构建 ASSIGN 的 AST，您可以在 tree walk 中检查它。

吉姆

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T05:48:38.093

> 我可以在树构建期间执行此重新排列，还是应该编写树语法？

两者都可以，但我建议在令牌解析期间对节点进行分组。

我对我编写的组节点的任何树重写语法都不满意，因为这些语法必须重新发现每个可分组节点的位置——因此需要分组。令牌解析器在常规处理期间触及所有这些数据，并且树语法最终会遍历这些节点的树，就像令牌解析器已经遍历其令牌输入一样。如果*只是*为了分组，我认为树解析器不值得麻烦。

无论如何，在解析器中管理分组归结为在它们产生之后保存`decl`和节点，然后在它们的分组级别发生时再次将它们推出。`assign`这是一个简单的例子。

### 声明式.g

```
grammar Declarative;

options { 
    output = AST;
}

tokens { 
    PROGRAM; DECLARATIONS; ASSIGNMENTS;
} 

@parser::header { 
    import java.util.ArrayList;
}

@members {
    private ArrayList<Object> assigns = new ArrayList<Object>(); 
    private ArrayList<Object> decls = new ArrayList<Object>();

    private Object createTree(int ttype,  ArrayList<Object> children) {
        Object tree = adaptor.create(ttype, tokenNames[ttype]);
        for (Object child : children){
            adaptor.addChild(tree, child);
        }

        return tree; 
    }
}

compilationUnit     : statement* EOF -> ^(PROGRAM {createTree(DECLARATIONS, decls)} {createTree(ASSIGNMENTS, assigns)}); 

statement           : decl {decls.add($decl.tree);}
                    | assign {assigns.add($assign.tree);}
                    ;

decl                : DECL^ ID;
assign              : ASSIGN^ ID INT;

DECL    : 'decl';
ASSIGN  : 'assign';
ID      : ('a'..'z'|'A'..'Z')('a'..'z'|'A'..'Z')*;
INT     : ('0'..'9')+;                  
WS      : (' '|'\t'|'\f'|'\n'|'\r'){skip();}; 
```

每个节点都由列表中的规则`decl`保存，对于每个节点也是如此。`statement``decls``assign`

方法`createTree`使用解析器`TreeAdaptor`构建组节点并填充它们。

```
CommonTree tree = (CommonTree) adaptor.create(ttype, tokenNames[ttype]);
for (Object child : children){
    adaptor.addChild(tree, child);
}

return tree; 
```

的产生式`compilationUnit`是`^(PROGRAM {createTree(DECLARATIONS, decls)} {createTree(ASSIGNMENTS, assigns)})`，它将分组节点添加到`PROGRAM`。方法`createTree`用于一次性构建分组节点及其子节点。

可能有一种棘手的方法可以让 ANTLR 为您将所有内容整合在一起，但这很有效，并且是不言自明的。

因此，鉴于此输入...

```
decl x
assign y 2
assign x 1
decl y 
```

...为上述语法生成的令牌解析器生成此树作为输出：

```
(PROGRAM 
    (DECLARATIONS 
        (decl x) 
        (decl y)) 
    (ASSIGNMENTS 
        (assign y 2) 
        (assign x 1))) 
```

# javascript - 正则表达式匹配所有具有两个或更多字符的 html 标记，但 ul 和 ol 以及其中的列表项

> ID：13812546
> 
> 赞同：0
> 
> 时间：2012-12-11T02:10:25.840
> 
> 标签：javascript, regex

IE。

> 阿比乌尔乌里

标签不匹配但

> br

和任何其他标签匹配。

提前致谢。

我得到atm的正则表达式是

> /<([a-zA-Z]{2,})\b[^>]*>/g

不满足不匹配 ul 和 ol

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T02:25:51.007

这可能是您想要的（顺便说一下，它只会匹配开放标签，因为我模仿了您所拥有的）：

```
/<\s*(?![uo]l\b)([a-zA-Z]{2,})\s*>/g 
```

`<`我在 之后和之前允许可选空间`>`。

我使用否定前瞻`(?![uo]l\b)`来检查标签不是`ul`or `ol`。我进行了单词边界检查`\b`，以确保它不是某些用户定义标签的一部分。

我假设标签名称只包含英文字母。如果此假设不成立，您可以修改正则表达式。

# sql - 需要一些关于 SQL 的提示

> ID：13812548
> 
> 赞同：1
> 
> 时间：2012-12-11T02:10:35.993
> 
> 标签：sql, select, exists

我现在正在处理 SQL，我有这些表：

```
CREATE TABLE Gym (
eid INT PRIMARY KEY,
name VARCHAR(127) UNIQUE,
district VARCHAR(127),
area INT);

CREATE TABLE Trainer (
id INT PRIMARY KEY,
name VARCHAR(127),
birth_year INT,
year_credentials_expiry INT
);

CREATE TABLE Works (
eid INT,
id INT,
since INT,
FOREIGN KEY (eid) REFERENCES Gym (eid),
FOREIGN KEY (id) REFERENCES Trainer (id),
PRIMARY KEY (eid,id)); 
```

我想建立一个查询，它可以告诉我带有“Casanova”区的健身房的名称，至少那里有一名培训师在工作。

我一直在考虑使用 EXISTS 运算符，但必须有一个更简单的方法。有谁能够帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T02:14:24.457

作为参考，EXISTS 查询：

```
select *
  from Gym g
 where district = 'Casanova'
   and exists (select *
                 from Works w
                where w.eid = g.eid); 
```

为什么你认为应该有一个“更简单”的方法？
另一种方法是在三向联接中列出 Gym 表中的所有列，这仅在有要加入的教练时才有效。

```
select distinct g.eid, g.name, g.district, g.area
  from Gym g
  join Works w on w.eid = g.eid
 where g.district = 'Casanova'; 
```

但是鉴于您需要使用 DISTINCT 从 Gym 表中获取列，我几乎不觉得它“更简单”。你来做法官。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T02:16:01.750

一个简单的`INNER JOIN`between `Gym`and`Works`表就可以了：

```
SELECT DISTINCT g.* 
FROM 
    Gym g
    JOIN Works w
    ON g.eid = w.eid
WHERE
    g.district = 'Casanova' 
```

如果该健身房中至少没有一名培训师在工作，则此查询将不返回任何内容。

# html - 使用 HTML5 推送状态 URL 为单页网站配置 nginx

> ID：13812550
> 
> 赞同：19
> 
> 时间：2012-12-11T02:11:06.467
> 
> 标签：html, nginx, singlepage

如何配置 nginx 以将所有 URL（未预先添加`/api`或某些静态资源，例如 JS/图像）重定向到`index.html`？原因是我在单页应用程序中使用 HTML5 推送状态 URL。意思是根据 URL 改变 AJAX 或 JS 的内容

我当前的 nginx 配置如下所示：

```
server {
    listen 2000;
    server_name localhost;

    location / {
        root    /labs/Projects/Nodebook/public;
        index   index.html;
    }

    location /api/ {
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header Host $http_host;
        proxy_set_header X-NginX-Proxy true;

        proxy_pass http://localhost:3000/;
        proxy_redirect off;
    }
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-07-02T19:27:52.913

```
location / {
  try_files $uri /index.html;
} 
```

这将检查请求的文件是否存在并返回。如果文件不存在，它将返回 index.html。

[http://nginx.org/en/docs/http/ngx_http_core_module.html#try_files](http://nginx.org/en/docs/http/ngx_http_core_module.html#try_files)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-08-21T10:12:04.987

mattes 答案几乎是一个解决方案，但是正如 aschepis 指出的那样，它不会为丢失的文件（例如 favicon.icon）提供 404。

Nginx 将选择第一个匹配的位置。所以我们可以先匹配文件（如果文件不存在会给出 404）。并且在为所有 url 放置一个默认为 index.html 的位置之后。

```
 location /.+\..+ { # files (assuming they always have a dot)
        # use eg alias to serve some files here
    }

    location / { # url routed by client, client gives 404 for bad urls
        try_files $uri /index.html;
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T11:22:04.157

您需要添加到您的 nginx 配置文件：

```
 rewrite ^(.+)$ /index.html last; 
```

然后假设您使用的是 Backbone.js，只需确保将任何未定义的路由重新路由到 404 页面：

```
 routes: {
    // Other routes
    "*path"  : "notFound"
  },

  notFound: function(path) {
    // Load 404 template, probably of a cute animal.
  } 
```

来源： [http ://readystate4.com/2012/05/17/nginx-and-apache-rewrite-to-support-html5-pushstate/](http://readystate4.com/2012/05/17/nginx-and-apache-rewrite-to-support-html5-pushstate/)

# debugging - 在 OllyDbg 中，您如何在某个位置强制/提示拆卸？

> ID：13812554
> 
> 赞同：4
> 
> 时间：2012-12-11T02:11:48.973
> 
> 标签：debugging, assembly, x86, ollydbg

我有一些 OllyDbg 无法反汇编的代码。这主要发生在间接跳跃中。例如，在下图中显示的代码中，您可以看到 EIP（CPU 指令指针）位于 401839，这是一个有效的代码地址。0x83F800 应该反汇编为“cmp eax 0”，但 OllyDbg 没有这样做。CPU 愉快地运行代码，但我看不到反汇编。

![在此处输入图像描述](../Images/a0f61e3f878cb0a7014615b32500663a.png)

有什么方法可以提示 OllyDbg 反汇编代码（例如，从 401836 开始）？

我尝试使用菜单选项“分析代码”（ctrl+A），但在这种情况下不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T11:26:23.477

If "Analyse Code" doesn't change anything, try the reverse; removing it with "Remove analysis from selection"

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-20T21:10:23.497

右键单击->分析->在下一次分析期间，将选择视为->命令

选择你的数据库？？并再次分析，

您应该更熟悉分析。不幸的是，我没有任何文档或链接给你。

# wordpress - div 的问题，因为图像链接浮动在彼此旁边

> ID：13812557
> 
> 赞同：0
> 
> 时间：2012-12-11T02:12:27.810
> 
> 标签：wordpress, html, css-float

**注意力！问题已解决，解决方案粘贴在初始问题下方**

在网页的最顶部我正在工作我在左角有一个标志（用于更改语言），我在一个 div 中。在右侧，我有另一个 div 用于另一个图像（购物车），但由于我浮动了右侧 div，所以单击左侧时我仍然会转到右侧 div 地址，就像右侧覆盖了 let 一样。为什么？我该如何解决这个问题？

此外，我通过使用我的 html/css 文件并编辑它们以适合客户的 wordpress 来做到这一点。

**CSS**

```
#topmenu img {
    margin-left: 25px;
    float:left;
    position:relative;
}
#cartmenu img {
    position:relative;
    margin-left: 542px;
} 
```

**头文件.php**

```
 <div id="container">
   <div id="topmenu">
     <a href="http://wwgrgrhbhop.se/indexEU"><img src="wp-content/themes/blank/images/icon_en_global.png" alt="English.png" width="42" height="30"></a>
   </div>
   <div id="cartmenu">
     <a href="http://www.enerfergeggyshop.se/"><img src="wp-content/themes/blank/images/cart.png" alt="cart.png" height="" width=""></a>
 </div> 
```

//**解决方案**为两个元素设置宽度（在 css 中）以及一个 float:left 到两个元素，然后用边距定位以将它们放在您想要的位置。

```
#topmenu img {
margin-left: 25px;
float:left;
position:relative;
width: 42px;
height:45;
margin-top:15px;
margin-bottom:-10px;

}

#cartmenu img {
    position:relative;
    margin-left: 520px;
    float left;
    width:350px;
    height:40px;
    margin-top:-20px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T02:25:08.333

尝试为`#topmenu img`cartmenu 定义一个宽度并给出一个`float:left;`。

# reflection - 如何将结构指针转换为go中的类型指针列表

> ID：13812560
> 
> 赞同：2
> 
> 时间：2012-12-11T02:12:38.247
> 
> 标签：reflection, go

我有一个看起来像这样的结构：

```
type inv struct {
    ID   int     `json:"id"`
    Name string  `json:"name"`
} 
```

我正在从数据库中查询一些数据（假设没有错误）：

```
rows, err := db.Query("select id, name from inv_table") 
```

通常，我必须通过扫描从行中提取数据

```
var i inv
for rows.Next() {
    rows.Scan(&i.ID, &i.Name)
} 
```

我认为这可能有效（明天进行测试）：

```
var i inv
for rows.Next() {
    var x []interface{} = [&i.ID, &i.Name]
    rows.Scan(x... )
} 
```

实际上，我在查询的结果集中还有更多列。

```
rows.Scan(&i) 
```

或者至少：

```
rows.Scan(getExportedValuePointers(&i)... ) 
```

我想我总是可以编写某种编码器，但是，在我看来，盒子里应该已经有东西了。

** 我意识到我总是可以编写一些类似于 encode/xml 或 encode/json 的反射代码......但我希望有人已经这样做了。

更新：以下代码按预期工作，但不是我想要的：

```
package main
import "fmt"
type inv struct {
    A int
    B string
}
func main() {
    var i inv
    fmt.Printf("hello\n")
    n, err := fmt.Sscan("1 c", &i.A, &i.B)
    fmt.Printf("retval: %d %#v\n", n, err)
    fmt.Printf("retval: %d, %s, %d %#v\n", i.A, i.B, n, err)
    j := []interface{}{&i.A, &i.B}
    k := []interface{}{i.A, i.B}
    n, err = fmt.Sscan("2 d", j... )
    fmt.Printf("retval: %d, %s, %d %#v\n", i.A, i.B, n, err)
    fmt.Printf("retval: %d, %s\n", k... )
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T03:57:05.353

如果您正在寻找一个能够自动将您的 SQL 查询绑定到“inv”结构的包，那么请查看 gorp：

[https://github.com/coopernurse/gorp](https://github.com/coopernurse/gorp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T02:25:19.553

没有什么可以自动执行此操作，但您可以使用反射包编写一个函数来执行此操作。

# c++ - 如何在 C++ 中实例化模板

> ID：13812564
> 
> 赞同：4
> 
> 时间：2012-12-11T02:13:13.160
> 
> 标签：c++, templates

我想从 DLL中导出**模板函数。**我知道我可以使用以下模板专业化方法。
**函数.hpp**
`/*declare*/`
`template<typename T> DLL_EXPORTS T func(T para);` ``/*specialization*/`
`template<> DLL_EXPORTS int func<int>(int para);``

 `**函数cpp**
`template<> DLL_EXPORTS int func<int>(int para)
{return para;}`

如果我使用模板专业化。`func`我应该为每种类型重写代码。这不是一个好的解决方案。但这是我能从`C++ Primer`.
我偶尔会从别人的代码中找到另一种方法，如下所示。

**函数.hpp**
`/*declare*/`
`template<typename T> DLL_EXPORTS T func(T para);`

**func.cpp** 他用来实例化模板。您不能在关键字之后添加。这种方式也适用于类模板。
`template<typename T> DLL_EXPORTS T func (T para)
{return para;}` ``/*Instantiation*/`
`template DLL_EXPORTS int func<int>(int);`
`template DLL_EXPORTS int func<int>(int)``<>``template``

 `**我的问题**：我在书中找不到路。所以我担心它有时行不通。 **C++ 标准是否支持它？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T02:19:22.983

是的，它称为*显式实例化*请参阅 C++11 标准的 14.7.2（对不起，我附近没有 C++03）。

您可以在您的翻译单元中尽可能多地实例化您想要的具有任何类型的模板实例，并且此代码将被放置到您的 DLL 中。而其他一切都不会。``

# c# - 来自字节数组的数据

> ID：13812571
> 
> 赞同：0
> 
> 时间：2012-12-11T02:13:57.533
> 
> 标签：c#, file, stream, binary, kinect

我正在尝试在每一帧读取流中的字节。我希望能够读取存储在我创建的文件中的位置和时间戳信息。

流是记录的骨架数据流，采用编码二进制格式

```
Stream recordStream;
byte[] results;
using (FileStream SourceStream = File.Open(@".....\Stream01.recorded", FileMode.Open))
{
    if (SourceStream.CanRead)
    {
        results = new byte[recordStream.Length];
        SourceStream.Read(results, 0, (int)recordStream.Length);
    }
} 
```

应该读取文件，并且 Read 方法应该在推进流中的位置之前读取当前的字节序列。

有没有办法从读取的字节中提取我想要的数据（位置和时间戳），并在它前进之前将其保存在单独的变量中？

可以使用二进制阅读器给我这样做的能力。

```
BinaryReader br1 = new BinaryReader(recordStream); 
```

我已将文件另存为 .recorded。我也将它保存为 .txt 以查看文件中包含的内容，但由于它是编码的，因此无法理解。

更新：我尝试使用断点运行代码以查看它是否使用我的 binaryreader 进入函数并崩溃并出现错误：ArgumentException 未处理。在 BinaryReader 初始化和声明时，流不可读

```
BinaryReader br1 = new BinaryReader(recordStream); 
```

文件类型为 .recorded。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T05:47:15.613

您没有提供有关您尝试读取的数据格式的任何信息。
但是，使用 BinaryReader 正是您需要做的。

它公开了从流中读取数据并将其转换为各种类型的方法。
考虑以下示例：

```
var filename = "pathtoyourfile";

using (var stream = File.Open(filename, FileMode.Open))
using(var reader = new BinaryReader(stream))
{
    var x = reader.ReadByte();
    var y = reader.ReadInt16();
    var z = reader.ReadBytes(10);
} 
```

不过，这实际上取决于您的数据格式。

**更新**
尽管我觉得我已经提供了你需要的所有信息，让我们使用你的数据。

您说数据中的每条记录都以

[长：时间戳] [整数：帧号]

```
using (var stream = File.Open(filename, FileMode.Open))
using(var reader = new BinaryReader(stream))
{
    var timestamp = reader.ReadInt64();
    var frameNumber = reader.ReadInt32();

    //At this point you have the timestamp and the frame number
    //you can now do whatever you want with it and decide whether or not
    //to continue, after that you just continue reading
} 
```

您如何继续阅读取决于记录的其余部分的格式如果记录中的所有字段都有特定的长度，那么您要么（取决于您在知道时间戳和帧号的值时做出的选择）继续阅读所有该记录的字段或者您只需前进到包含下一条记录的流中的位置。例如，如果每条记录是 100 字节长，如果你想在获得前两个字段后跳过这条记录：

```
stream.Seek(88, SeekOrigin.Current); 
//88 here because the first two fields take 12 bytes -> (100 - 8 + 4) 
```

如果记录具有可变长度，则解决方案类似，但您必须考虑各种字段的长度（应由可变长度字段之前的长度字段定义）

至于知道前 8 个字节是否真的代表时间戳，没有真正的方法可以确定...请记住，流最后只包含一系列单独的字节，除了赋予它们的含义之外，这些字节没有任何意义通过您的文件格式。您必须修改文件格式，或者您可以尝试检查上面示例中的“时间戳”的值是否有意义。

这是您自己定义的文件格式吗？如果是...也许您正在使它变得复杂，并且可能想要查看诸如 Google Protocol Buffers 或 Apache Thrift 之类的解决方案。

如果这仍然不是您想要的，您将不得不重新定义您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T08:46:55.200

根据您的评论：

您需要知道整个文件的确切定义。您基于此文件格式创建一个结构：

```
struct YourFileFormat {
    [FieldOffset(0)]
    public long Timestamp;

    [FieldOffset(8)]
    public int FrameNumber;

    [FieldOffset(12)]
    //.. etc..
} 
```

然后，使用 a `BinaryReader`，您可以为每个帧单独读取每个字段：

```
// assume br is an instantiated BinaryReader..
YourFileFormat file = new YourFileFormat();

file.Timestamp = br.ReadInt64();
file.FrameNumber = br.ReadInt32();
// etc.. 
```

或者，您可以读取整个文件并让编组类将所有内容复制到您的结构中。

```
byte[] fileContent = br.ReadBytes(sizeof(YourFileFormat));

GCHandle gcHandle = GCHandle.Alloc(fileContent, GCHandleType.Pinned); // or pinning it via the "fixed" keyword in an unsafe context
file = (YourFileFormat)Marshal.PtrToStructure(gcHandle.AddrOfPinnedObject(), typeof(YourFileFormat));
gcHandle.Free(); 
```

但是，这假设您知道文件的确切大小。但是，使用这种方法.. 每一帧（假设您知道有多少）都可以是该结构中的一个固定大小的数组，以使其正常工作。

底线：除非您知道要跳过的内容的大小..您不能希望从您需要的文件中获取数据。

# java - Instagram 是否有“单用户”OAuth 选项？

> ID：13812574
> 
> 赞同：0
> 
> 时间：2012-12-11T02:14:19.987
> 
> 标签：java, authentication, oauth, instagram, signpost

我正在开发一个将显示 Instagram 内容的 Java 应用程序。它用于安装，并且只会作为单个用户进行身份验证。我试图让我的 OAuth 消费者代码尽可能简单。

Twitter 提供了一个“单用户”OAuth 实现，它看起来比标准的“OAuth 舞蹈”要简单得多。Instagram 有什么类似的东西吗？

如果没有，是否还有其他捷径可以启动和运行 OAuth + Instagram？我正在使用 Apache HTTP 组件（特别是[Fluent](http://hc.apache.org/httpcomponents-client-ga/tutorial/html/fluent.html)，以简化异步通信）并研究使用[OAuth Signpost](http://code.google.com/p/oauth-signpost/)。然而，通向 Fluent+Signpost 的路径并不是很明显......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T00:32:44.823

我叫错了树。原来我不需要对我的桌面应用程序发出的请求进行身份验证，只需要[传递 client_id](http://instagram.com/developer/endpoints/)。

每个 client_id 的请求数量每小时有一个限制；对于具有多个用户的应用程序，进行身份验证更有意义，以便限制转移到每个用户（通过 OAuth 访问令牌），但对于我的单用户单安装应用程序来说，这不是必需的。

# javascript - 在 jQuery 中使用 :last-child 和 :first-child

> ID：13812578
> 
> 赞同：2
> 
> 时间：2012-12-11T02:14:38.650
> 
> 标签：javascript, jquery

我正在尝试编写我的第一个自建 jQuery 脚本，作为一个超级简单的画廊。

CSS：

```
#gallery li{
        display:none;
    }

    #gallery li.current {
        display: block;
    } 
```

HTML：

```
<div id="gallery">
    <li class="current"><img src="img/1.jpg" /></li>
    <li><img src="img/2.jpg" /></li>
    <li><img src="img/3.jpg" /></li>
    <li><img src="img/4.jpg" /></li>
</div>
<div id="controls">
    <span id="left">&#60;</span>
    <span id="right">&#62;</span>
</div> 
```

查询：

```
$(function(){
    $('#controls #left').click(function(){
        var old = $('li.current');
        $('li.current').removeClass('current');
        if (old = $('#gallery:first-child')){
            $('#gallery:last-child').addClass('current');
        }else{
        $(old).prev('li').addClass('current');
        }
    });
    $('#controls #right').click(function(){
        var old = $('li.current');
        if (old = $('#gallery:last-child')){
            $('#gallery:first-child').addClass('current');
        }else{
        $('li.current').removeClass('current');
        $(old).next('li').addClass('current');
        }
    });
}); 
```

在我添加 if/else 语句来检查我们是否正在查看第一个/最后一个画廊图像之前，它工作得很好。我想要这个声明，以便画廊循环。无法弄清楚为什么它不起作用，并且调试没有给我任何东西。

我可以在正确的方向上得到一点推动吗？

编辑：使用下面的一些建议，这就是我所在的位置：

```
$(function(){
    $('#left').click(function(){
        var old = $('li.current');
        old.removeClass('current');
        if (old == $('#gallery li:first-child')){
            $('#gallery li:last-child').addClass('current');
        }else{
        old.prev('li').addClass('current');
        }
    });
    $('#right').click(function(){
        var old = $('li.current');
        old.removeClass('current');
        if (old == $('#gallery li:last-child')){
            $('#gallery li:first-child').addClass('current');
        }else{      
        old.next('li').addClass('current');
        }
    });
}); 
```

虽然仍然没有循环播放（在第一张图像上按“左”会使画廊空白，在最后一张图像上按“右”也是如此）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T02:16:04.950

您可能想要使用`==`：

```
if (old == $('#gallery:first-child')){ 
```

和

```
if (old == $('#gallery:last-child')){ 
```

**尽管这无论如何都行不通，正如Jack**所指出的那样，因为它们是单独的 jQuery 调用，可以选择相同的元素并返回相似的 jQuery 对象，但不能用于比较，因为它们是 DOM 元素的单独集合. 正确的方法是`.is`像我在下面提供的那样使用...**或**与以下内容进行比较：

```
if (old[0] == $('#gallery:first-child')[0]){ 
```

像这样对它们进行索引检索每个选定集中的第一项，这是实际的 DOM 元素，并且可以进行比较。可能不是首选，但它没有错。

这是证明这是真的一个例子：http: [//jsfiddle.net/4adSj/](http://jsfiddle.net/4adSj/)

你也在做一些奇怪的事情。您不需要使用此选择器：`$('#controls #right')`-`$('#right')`由于应该如何使用而足够独特`id`。

此外，您存储`var old = $('li.current');`，然后下一行您不费心使用`old`- 您重新获取它，如`$('li.current')`.

此外，您将`<li>`元素嵌套在 a`<div>`中，而它们应该只嵌套在`<ul>`、`<ol>`或`<menu>`中。

还有一个 - 该变量`old`是一个 jQuery 对象，因此您不需要`$(old)`在声明它之后每隔一次就访问它。只需使用`old.jQueryMethod()`.

最后，另一个问题是您的`if`语句选择器：

```
$('#gallery:last-child') 
```

意味着找到具有`id`“画廊”并且是最后一个孩子的元素。你可能想要：

```
$('#gallery > li:last-child') 
```

这意味着找到作为“画廊”`li`的父元素的最后一个子元素的子元素。`id`

所以这是我对您使用的最终代码的建议：

```
$(function(){
    $('#left').on("click", function () {
        var old = $('li.current');
        old.removeClass('current');
        if (old.is(':first-child')){
            $('#gallery > li:last-child').addClass('current');
        } else {
            old.prev('li').addClass('current');
        }
    });

    $('#right').on("click", function () {
        var old = $('li.current');
        old.removeClass('current');
        if (old.is(':last-child')){
            $('#gallery > li:first-child').addClass('current');
        } else {
            old.next('li').addClass('current');
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T02:21:10.393

您可以使用`.is(':first-child)`and`.is(':last-child')`来确定某物是第一个还是最后一个孩子：

```
$('#controls #left').click(function() {
    var old = $('li.current')
        .removeClass('current');

    if (old.is(':first-child')) {
        // search the siblings for the last child
        old.siblings(':last-child').addClass('current');
    } else {
        $(old).prev('li').addClass('current');
    }
});

$('#controls #right').click(function() {
    var old = $('li.current')
        .removeClass('current');

    if (old.is(':last-child')) {
        old.siblings(':first-child').addClass('current');
    } else {
        $(old).next('li').addClass('current');
    }
}); 
```

顺便说一句，我会将您的 HTML 更改为：

```
<div id="controls">
    <span class="left">&#60;</span>
    <span class="right">&#62;</span>
</div> 
```

然后使用`$('#controls .left')`and`$('#controls .right')`来定位您的可点击元素。

**编辑**

一种更好的方法可能是这样的，值得深思：

```
// wrap the functionality inside an anonymous function
// localizing the gallery and controls blocks
(function($gallery, $controls) {
    var pos = 0;

    // this function performs the actual move left and right, based on event data being passed in via evt.data.delta
    function move(evt) {
        var $items = $gallery.children(), // if the gallery never changes size you should cache this value
        max = $items.length;

        $items.eq(pos).removeClass('current');
        pos = (pos + evt.data.delta) % max; // update the position
        $items.eq(pos).addClass('current');
    }

    // attach the controls
    $controls
        .on('click', '.left', {
            delta: -1 // left decreases the position
        }, move)
        .on('click', '.right', {
            delta: 1 // right increases the position
        }, move);

    // make sure the first is always selected
    $gallery.children().removeClass('current').eq(pos).addClass('current');

}($('#gallery'), $('#controls')));​​​​​​​​​ // immediate invocation 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T02:34:59.760

**[jsBin 演示](http://jsbin.com/ukemis/4/edit)**

```
var c = 0; 
var imgN = $('#gallery li').length; // 4   
$('#left, #right').click(function(){
  c = this.id=='right' ? ++c : --c ;
  $('#gallery li').hide().eq( c%imgN ).show(); 
}); 
```

甚至：

```
var c = 0; 
$('#left, #right').click(function(){
  $('#gallery li').hide().eq( (this.id=='right'?++c:--c) % 4 ).show(); 
}); 
```

**[画廊演示](http://jsbin.com/ukemis/5/edit)**

PS：代替`.hide()`你可以使用`.removeClass('current')`
，而不是`.show()`你可以使用`.addClass('current')`

# twitter - 推文的 Twitter API 位置

> ID：13812579
> 
> 赞同：0
> 
> 时间：2012-12-11T02:14:40.447
> 
> 标签：twitter

我正在考虑一个新的网站创意，它允许访问者在地图上查看发生了某些事情的地方。我想使用 Twitter，因为有人使用特定的主题标签发推文。我想使用 API 捕获该推文并找到该推文的来源位置。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T04:41:52.843

有可能的。然而，有很多推文（实际上是大多数）没有获得任何位置，并且不可能为这些推文获取位置。要定位，用户必须在其帐户参数中启用位置，并在发布推文时提供其位置，但大多数推文不这样做。

要检索推文位置，您只需使用[相应的 Twitter API 端点](https://dev.twitter.com/docs/api/1.1/get/statuses/show/%3aid)( `GET statuses/show/:id`) 下载推文。收到推文后，搜索其`"coordinates"`字段。该字段有一个子字段，也称为`"coordinates"`。该子字段是一个包含两个数字的列表：`[longitude, latitude]`。有关详细信息，请参阅有关[推文](https://dev.twitter.com/docs/platform-objects/tweets)和[坐标](https://dev.twitter.com/docs/platform-objects/tweets#obj-coordinates)的 Twitter 开发人员文档。

# ruby-on-rails - 在暂存环境中覆盖 ActionMailer 主题

> ID：13812580
> 
> 赞同：6
> 
> 时间：2012-12-11T02:14:50.267
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, actionmailer

我希望从我们的暂存服务器发送的所有电子邮件的主题中都包含“[STAGING]”这个短语。在 Rails 3.2 中使用 ActionMailer 有没有一种优雅的方法来做到这一点？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-12T00:31:39.797

这是我根据[现有答案使用](https://stackoverflow.com/a/10870805/307438)[ActionMailer Interceptor](http://api.rubyonrails.org/classes/ActionMailer/Base.html#label-Observing+and+Intercepting+Mails)找到的一个优雅的解决方案。

```
# config/initializers/change_staging_email_subject.rb
if Rails.env.staging?
  class ChangeStagingEmailSubject
    def self.delivering_email(mail)
      mail.subject = "[STAGING] " + mail.subject
    end
  end
  ActionMailer::Base.register_interceptor(ChangeStagingEmailSubject)
end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-08-02T03:22:47.047

这适用于 Rails 4.x

```
class UserMailer < ActionMailer::Base
  after_action do
    mail.subject.prepend('[Staging] ') if Rails.env.staging?
  end

  (...)
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T02:35:43.760

并非如此，继承就像它得到的一样优雅。

```
class OurNewMailer < ActionMailer::Base

  default :from => 'no-reply@example.com',
          :return_path => 'system@example.com'

  def subjectify subject
    return "[STAGING] #{subject}" if Rails.env.staging?
    subject
  end
end 
```

然后，您可以从每个邮件程序继承。

```
# modified from the rails guides
class Notifier < OurNewMailer

  def welcome(recipient)
    @account = recipient
    mail(:to => recipient.email_address_with_name, :subject => subjectify("Important Message"))
  end
end 
```

我认为这不像您希望的那样干净，但这会使它有点干涸。

# tfs - 有没有办法重命名 TFS 标签？

> ID：13812581
> 
> 赞同：20
> 
> 时间：2012-12-11T02:15:00.280
> 
> 标签：tfs

我们的代码沿项目线在 TFS 中分支，每个都有自己独立的构建过程

![在此处输入图像描述](../Images/a4601064d53601d42c0f64f49d4353c0.png)

我们用内部版本号标记每个项目，例如 Build_1 等，但是我犯了一个愚蠢的错误，忘记了 TFS 标签必须是唯一的，并且忘记用项目名称标记我的项目。

为了解释，我已经用 Build_1、Build_2、Build_3 和 Build_4 将 P5624 文件夹标记了四次，而我应该使用 P5624-Build_1 等标签。

所以，我正在寻找一种重命名标签的方法。我找不到与 SO 直接相关的任何内容，并且 TF Label 命令[（此处的链接）](http://msdn.microsoft.com/en-us/library/9ew32kd1%28v=vs.100%29.aspx)上的 Microsoft 帮助没有给出任何可以完成的指示。

我们不进行任何自动构建或任何依赖标签名称的事情，因此即使您的解决方案是“自行承担风险”，我仍然很乐意听到它。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-11T08:07:49.567

TFS 不支持重命名标签。您只能根据要删除的旧标签创建新标签。

如果您使用的是 Visual Studio，请按照以下步骤操作

1.  右键单击源代码管理资源管理器中的文件夹以打开 ContextMenu 并选择“应用标签”
2.  将底部的Version-Combobox更改为Label并找到旧的Label“P5624”
3.  将新标签命名为“P5624-Build_1”并创建它
4.  如果不再需要旧标签，请删除它。

# ruby - 将 Twitter 时间线存储在缓存中（使用 Sinatra）？

> ID：13812583
> 
> 赞同：0
> 
> 时间：2012-12-11T02:15:22.867
> 
> 标签：ruby, caching, memcached, sinatra, dalli

我正在制作一个基本的 Sinatra 应用程序，以使用[Twitter gem](http://sferik.github.com/twitter/)显示用户的 Twitter 提及时间线。登录后，我获取他/她的提及。就像是：

```
get '/' do
  @mentions = Twitter.mentions_timeline

  erb :home
end 
```

问题在于，每次用户点击主页时，我都会调用 Twitter API。我的速率受到限制，而且效率也不高，因为我只想重新获取提及时间线，比如每 3 分钟一次。或者，如果它更简单，我可以在达到速率限制后使用缓存。

阅读后，似乎最好的方法是将这些数据存储在缓存中，这样我就不会继续发出 API 请求。我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T09:19:06.090

我通过将推文存储在 redis 中来做到这一点。我在辅助函数中加载推文，以便我可以在多个路由中访问相同的缓存副本。

我所有的代码都在[https://github.com/timmillwood/millwoodonline/blob/master/helpers/main.rb#L38](https://github.com/timmillwood/millwoodonline/blob/master/helpers/main.rb#L38)上，您可以随意取用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T02:24:55.757

显而易见的方法是将用户的时间线存储在数据库中。使用 MongoDB 之类的东西非常简单，因为 Twitter API 返回 json，你可以在推文到来时将它们扔到那里。在调用 Twitter API 之前，检查最近提及用户的年龄，如果它相对较新（例如 30 分钟或更短），则不要调用。

# c# - VS2010中带有设计器测试的Winforms自定义控件

> ID：13812584
> 
> 赞同：0
> 
> 时间：2012-12-11T02:15:46.010
> 
> 标签：c#, winforms, visual-studio-2010, windows-forms-designer

我为单独的项目中的控件创建了一个自定义控件和一个自定义设计器。控制项目的目标是 .Net 4.0 客户端配置文件和设计器 - 完整配置文件，因为我需要参考 System.Design。

我创建了第三个测试项目，它的目标是 .Net 4.0 Client Profile。

每次构建后，我都会签署两个程序集并在 GAC 中安装它们。

但是，即使重新构建控件后，VS 仍然会在控件工具栏中显示旧版本，直到重新启动 VS。

如何在不重新启动 VS 的情况下修改控件和设计器并对其进行测试？

# c++ - 可以使用 ALT+TAB 切换到子窗口吗？

> ID：13812588
> 
> 赞同：0
> 
> 时间：2012-12-11T02:16:07.493
> 
> 标签：c++, winapi

我正在使用 c++ 开发一个 w32 程序。是否可以执行以下操作：

1.  在父窗口中打开一个子窗口，子窗口获得焦点。
2.  使用 alt+tab 切换到另一个程序。
3.  使用 alt+tab 切换回父程序，子窗口仍然有焦点。

现在发生的事情是，在第 3 步，父母而不是孩子获得焦点。

另一个棘手的部分是，我只有父窗口的句柄，而不是完全控制。我正在开发的程序是作为父插件的子窗口。

# jms - 使用一个消息队列的集群应用程序

> ID：13812594
> 
> 赞同：1
> 
> 时间：2012-12-11T02:16:53.297
> 
> 标签：jms

我在负载均衡器后面有一个集群应用程序，两个不同服务器上的相同应用程序。我只有一个 JMS 队列。队列是否会确保一条消息只读取一次，因为两个部署的应用程序都将从队列中读取？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T04:28:47.590

是的，只有一个应用程序会从 JMS 队列中获取消息。当客户端应用程序确认收到的消息时，该消息将从队列中删除。因此，相同的消息将不会传递到集群应用程序的其他实例。

# java - Java - 代码编译但整个代码不运行

> ID：13812596
> 
> 赞同：0
> 
> 时间：2012-12-11T02:17:12.843
> 
> 标签：java, runtime

我正在做一项任务，我需要找出在较小物种的数量超过较大物种的数量之前多少年。

我创建的程序可以编译，但只运行前半部分。在 if-else 循环开始之前，在两个 system.out.println 命令之后，它没有任何输出。

我需要采取哪些步骤来调整程序代码以使其成功通过 if-else 循环？

班级：

```
import java.util.Scanner;

public class Species
{
    private String name;
    private int population;
    private double growthRate;

    public void readInput()
    {
        Scanner keyboard = new Scanner(System.in);
        System.out.println("What is the species' name?");
        name = keyboard.nextLine();

        System.out.println("What is the population of the species?");
        population = keyboard.nextInt();

        while(population < 0)
        {
            System.out.println("Population cannot be negative.");
            System.out.println("Reenter population:");
            population = keyboard.nextInt();
        }

        System.out.println("Enter growth rate (% increase per year):");
        growthRate = keyboard.nextDouble();
    }

    public void writeOutput()
    {
        System.out.println("Name = " + name);
        System.out.println("Population = " + population);
        System.out.println("Growth rate = " + growthRate + "%");
    }

    public int predictPopulation(int years)
    {
        int result = 0;
        double populationAmount = population;
        int count = years;

        while( (count>0) && (populationAmount>0) )
        {
            populationAmount = (populationAmount + (growthRate/100) * populationAmount);
            count --;
        }

        if (populationAmount > 0)
            result = (int)populationAmount;
        return result;
    }

    public Species(String name)
    {
        name = name;
        population = 0;
        growthRate = 0.0;
    }

    public Species(int population)
    {
        name = "";
        if (population > 0)
            population = population;
        else
        {
            System.out.println("ERROR: using a negative" + "population.");
            System.exit(0);
        }
        growthRate = 0.0;
    }

    public Species(double growthRate)
    {
        name = "";
        population = 0;
        growthRate = growthRate;
    }

    public Species(String name, int population, double growthRate)
    {
        name = name;
        if (population > 0)
            population = population;
        else
        {
            System.out.println("ERROR: using a negative" + "population.");
            System.exit(0);
        }
        growthRate = growthRate;
    }

    public Species()
    {
        name = "";
        population = 0;
        growthRate = 0;
    }

    public void setSpecies(String newName, int newPopulation, double newGrowthRate)
    {
        name = newName;
        if (newPopulation >= 0)
            population = newPopulation;
        else
        {
            System.out.println("ERROR: using a negative " + "population.");
            System.exit(0);
        }

        growthRate = newGrowthRate;
    }

    public void setName(String name)
    {
        name = name;
    }

    public void setPopulation(int population)
    {
        if (population > 0)
            population = population;
        else
        {
            System.out.println("ERROR: using a negative" + "population."); 
            System.exit(0);
        }
    }

    public void setGrowthRate(double growthRate)
    {
        growthRate = growthRate;
    }

    public String getName()
    {
        return name;
    }

    public int getPopulation()
    {
        return population;
    }

    public double getGrowthRate()
    {
        return growthRate;
    }

    public boolean equals(Species otherObject)
    {
        return (name.equalsIgnoreCase(otherObject.name)) &&
               (population == otherObject.population) &&
               (growthRate == otherObject.growthRate);
    }
} 
```

程序：

```
import java.util.Scanner;
public class KlingonOx extends Species
{
    public static void main(String[] args) 
    {  
        new KlingonOx().run();
    }

    public void run()
    {
        Species klingonSpecies = new Species("Ox", 100, 15);
        Species earthSpecies = new Species("Elephant", 10, 35);

        klingonSpecies.readInput();
        klingonSpecies.writeOutput();
        klingonSpecies.predictPopulation(10);
        klingonSpecies.setSpecies("Ox", 100, 15);
        klingonSpecies.setName("Ox");
        klingonSpecies.setPopulation(100);
        klingonSpecies.setGrowthRate(15);
        klingonSpecies.getName();
        klingonSpecies.getPopulation();
        klingonSpecies.getGrowthRate();
        klingonSpecies.equals(earthSpecies);

        earthSpecies.readInput();
        earthSpecies.writeOutput();
        earthSpecies.predictPopulation(10);
        earthSpecies.setSpecies("Elephant", 10, 35);
        earthSpecies.setName("Elephant");
        earthSpecies.setPopulation(10);
        earthSpecies.setGrowthRate(35);
        earthSpecies.getName();
        earthSpecies.getPopulation();
        earthSpecies.getGrowthRate();
        earthSpecies.equals(klingonSpecies);

        System.out.println("The " + klingonSpecies.getName() + " starting population is: " + klingonSpecies.getPopulation());
        System.out.println("The " + earthSpecies.getName() + " starting population is: " + earthSpecies.getPopulation());

        int year = 0;
        int newkpop = 100;
        int newepop = 10;
        if (klingonSpecies.getPopulation() < earthSpecies.getPopulation())
        {
            while (klingonSpecies.getPopulation() < earthSpecies.getPopulation())
            {
                newkpop = (int)(klingonSpecies.getPopulation() + (klingonSpecies.getPopulation()*1.15) );
                newepop = (int)(earthSpecies.getPopulation() + (earthSpecies.getPopulation()*1.35) );
                year ++;
            }
            System.out.println("The population of " + klingonSpecies.getName() + " exceeds the population of " + earthSpecies.getName() + " in " + year + "years.");
        }
        else
        {
        while (klingonSpecies.getPopulation() > earthSpecies.getPopulation())
            {
                newkpop = (int)(klingonSpecies.getPopulation() + (klingonSpecies.getPopulation()*1.15) );
                newepop = (int)(earthSpecies.getPopulation() + (earthSpecies.getPopulation()*1.35) );
                year ++;
            }
            System.out.println("The population of " + earthSpecies.getName() + " exceeds the population of " + klingonSpecies.getName() + " in " + year + "years.");
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T02:20:05.687

你有一个`Species#setPopulation()`方法，但看起来你忘了使用它。在你的两个循环中使用`klingonSpecies.setPopulation(newkpop);`and `earthSpecies.setPopulation(newepop);`。

与循环问题无关：您可能希望使用`Species#getGrowthRate()`而不是输入数字 1.15 和 1.35。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T02:22:24.337

问题是你永远不会更新你的物种的种群：

```
klingonSpecies.setPopulation(newkpop);
earthSpecies.setPopulation(newepop) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T02:28:16.047

首先是您永远不会改变循环中任一物种的种群，因此种群实际上保持不变。

在进行计算时，您需要将更改应用回对象的实例，大概使用该`setPopulation`方法，或者您需要维护每个物种的单独变量，这些变量在循环进行时将当前种群带到那里。

# objective-c - CCFollow 和 ParallaxNode 工作起来很奇怪

> ID：13812598
> 
> 赞同：1
> 
> 时间：2012-12-11T02:17:51.953
> 
> 标签：objective-c, ios, cocos2d-iphone

我是新手，试图集成一个 CCsprite 来跟随一层视差节点。它假设遵循 bg04 精灵。事实证明......，是的，它遵循，但在相反的方向。

这是代码，请帮忙，谢谢！

```
-(void) addParaBG
{

CCSprite* bg01 = [CCSprite spriteWithFile:@"Page001bg01.png"];
CCSprite* bg02 = [CCSprite spriteWithFile:@"Page001bg02.png"];
CCSprite* bg03 = [CCSprite spriteWithFile:@"Page001bg03.png"];
CCSprite* bg04 = [CCSprite spriteWithFile:@"Page001bg04.png"];

bg01.anchorPoint = CGPointMake(0, 0);
bg02.anchorPoint = CGPointMake(0, 0);
bg03.anchorPoint = CGPointMake(0, 0);
bg04.anchorPoint = CGPointMake(0, 0);

bg01.tag = 01;
bg02.tag = 02;
bg03.tag = 03;
bg04.tag = 04;

CCParallaxNode* paraBG = [CCParallaxNode node];
[paraBG addChild:bg01 z:1 parallaxRatio:CGPointMake(1, 0) positionOffset:CGPointMake(0, 0)];
[paraBG addChild:bg02 z:2 parallaxRatio:CGPointMake(2, 0) positionOffset:CGPointMake(0, 0)];
[paraBG addChild:bg03 z:3 parallaxRatio:CGPointMake(3, 0) positionOffset:CGPointMake(0, 0)];
[paraBG addChild:bg04 z:4 parallaxRatio:CGPointMake(4, 0) positionOffset:CGPointMake(0, 0)];

[self addChild:paraBG z:0 tag:paraBGtag];
}

-(void) moveParaBG
{
CCMoveBy* move1 = [CCMoveBy actionWithDuration:15 position:CGPointMake(-160, 0)];
CCMoveBy* move2 = [CCMoveBy actionWithDuration:15 position:CGPointMake(160, 0)];
CCSequence* sequence = [CCSequence actions:move1, move2, nil];
CCRepeatForever* repeat = [CCRepeatForever actionWithAction:sequence];

[[self getChildByTag:paraBGtag] runAction:repeat];
}

-(void) addAnimationElement
{
CGSize screenSize = [[CCDirector sharedDirector] winSize];
CCSprite* testship = [CCSprite spriteWithFile:@"ship.png"];
testship.position = CGPointMake(screenSize.width /2, screenSize.height /2);
[self addChild:testship];

CCAnimation* anim = [CCAnimation animationWithFile:@"ship-anim" frameCount:5 delay:0.08f];
CCAnimate* animate = [CCAnimate actionWithAnimation:anim];
CCRepeatForever* repeat = [CCRepeatForever actionWithAction:animate];

[testship runAction:repeat];
[testship runAction:[CCFollow actionWithTarget:[[self getChildByTag:paraBGtag] getChildByTag:04]]];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T17:36:58.273

您正在向后使用 CCFollow。背景层在精灵上运行跟随动作，而不是相反。

所以：

```
[testship runAction:[CCFollow actionWithTarget:[[self getChildByTag:paraBGtag] getChildByTag:04]]]; 
```

应改为：

```
CCSprite *bg = (CCSprite*)[[self getChildByTag:paraBGtag] getChildByTag:04]];
[bg runAction:[CCFollow actionWithTarget:testship]]; 
```

# php - 是什么导致“未定义函数”date_diff？

> ID：13812602
> 
> 赞同：1
> 
> 时间：2012-12-11T02:18:33.373
> 
> 标签：php, date

我有这个脚本，我在我的 php 中使用它来将用户的出生日期转换为他们的年龄。它在我的本地主机上运行良好，但是当我将其上传到服务器时，页面出现此错误：

> 致命错误：在第 19 行**调用 /home/content/31/9118831/html/projects/mark.ptb/PTB1/includes/mod_home/mod_platinum.php 中的未定义函数 date_diff()**

这是我的代码，我猜我还没有定义函数，虽然我不明白为什么它会在我的本地主机上正常工作？

```
<?php
 $dob = $platinum['dob'];

function age_from_dob($dob) {

       $age = date_diff(date_create($dob), date_create('now'))->y;  
       return $age;
}

?>

<?

        $platinum_set = get_platinum_users();
        while ($platinum = mysql_fetch_array($platinum_set)) {
        $age = age_from_dob($platinum['dob']);
             echo "
            <div class=\"platinumcase\">
            <a href=\"profile.php?id={$platinum['id']}\"><img width=80px height= 80px src=\"data/photos/{$platinum['id']}/_default.jpg\" class=\"boxgrid\"/></a><h58> {$platinum['first_name']} {$platinum['last_name']}</h58><br/><br/><h52> ".$age." Years Old<br/><br/>From {$platinum['location']}</h52>

            </div>";
        }
    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T02:20:46.413

该[`date_diff()`](http://php.net/date_diff)函数是 PHP >= 5.3 的一部分。如果它在服务器上不存在，但在您的本地计算机上存在，那么当您使用 PHP >= 5.3 时，服务器使用的是旧版本的 PHP。

始终使用与部署环境相同的 PHP 版本进行开发是个好主意。要找出您正在使用的 PHP 版本，您可以`echo`使用`PHP_VERSION`常量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T02:22:32.477

根据 php[手册](http://php.net/manual/en/function.date-diff.php)，date_diff 仅在 PHP 5.3+ 中可用

服务器上的PHP版本够用吗？您可以使用`phpinfo()`命令来确定服务器上正在使用的 PHP 版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T02:21:17.850

你做的有点不对:)

```
$date = new DateTime($dob);
$diff = $date->diff('now')->y; 
```

确保捕获错误，因为用户指定的`$dob`字符串可能并不总是产生有效的日期。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-03T07:36:35.553

请使用日期对象而不是 date_diff() 函数。您可以使用 $date->diff() 函数来计算日期差异 例如：

$fromdate = new DateTime($todate); $diff = $fromdate->diff('now')->y;

# python - ReportLab 表的列跨越 PDF 页面的所有行？

> ID：13812603
> 
> 赞同：3
> 
> 时间：2012-12-11T02:18:41.817
> 
> 标签：python, pdf-generation, reportlab, platypus

我正在尝试以以下格式在 reportLab 中布局表格。该表是动态的，可以有很多行。

```
---------
| a | b |
|---|   |
| a |   |
|---|   |
| a |   |
--------- 
```

> tTableStyle=[ ('SPAN',(1,0),(1,-1)) ]

如果表格适合一页，则效果很好，但如果表格被拆分为页面，则会崩溃。如果没有跨度，表格可以拆分，但我被第二列中的网格线卡住了。

已[在此处](https://stackoverflow.com/questions/7964113/reportlab-use-table-and-span)阅读，这是由于使用的算法无法自动跨页面跨页但不确定如何解决此问题。

是否可以获取每页上显示的行数并使用它而不是-1？例如。x=rows_on_page1, y=rows_on_page2 然后在 tableStyle 我可以做类似的事情

```
('SPAN',(1,0),(1, x)), 
('SPAN',(1,x+1),(1,y)) 
```

有人建议手动创建表，但我不确定如何。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T00:33:51.223

我最终使用的解决方案是忽略尝试跨越，而只是使用框代码来绘制我想要的线条。

```
('INNERGRID', (0,0), (0,-1), colors.grey),  # gridlines for first column
('BOX', (0,0), (-1,-1), 0.25, colors.grey), # outer border
('BOX', (0,0), (0,-1), 0.25, colors.grey),  # inner border
("LINEBELOW", (0, 'splitlast'), (-1, 'splitlast'), 0, colors.grey), # draw bottom line on table split 
```

# java - 如何在桌面应用程序中存储数据库凭据？

> ID：13812609
> 
> 赞同：3
> 
> 时间：2012-12-11T02:19:31.147
> 
> 标签：java, database, storage, credentials

场景是这样的：有一个桌面 Java 应用程序在随机计算机上运行，​​不受开发人员的控制。该应用程序连接到安装在同一台计算机上的 MySQL 服务器。

有没有办法让本地用户的数据库登录凭据安全？

我可以想象，作为具有客户端和数据库的本地 PC 的管理员，要求完全安全可能是徒劳的，因为凭据需要在系统的某个位置。我想知道在桌面应用程序中硬编码密码是否是最好的选择。我知道这是一个很大的禁忌，但在这种情况下有更好的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T02:22:23.283

> 有没有办法让本地用户的数据库登录凭据安全？

最简洁的答案是不。

无论您做什么¹，本地用户都可以访问用户名和密码（或任何其他形式的凭据），前提是他/她具有技能和动机。

* * *

^(1 - 即使是[可信平台模块](http://en.wikipedia.org/wiki/Trusted_Platform_Module)方法也不是完全安全的。IIRC，有人使用电子显微镜成功破解了 TPM 安全性。虽然这在正常情况下不是一种实际的攻击，但另一方面是在大多数环境中，在 TPM 上构建一个从用户手中夺取机器控制权的系统是不可接受的。)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T02:25:07.870

您可以将它们保存在对称加密文件中，并将密钥硬编码到应用程序中。这至少是在能够更改密码和对懒惰的本地修补匠有一些基本保护之间的妥协。

# java - Java，在数组上插入对象的方法，返回一个布尔值

> ID：13812613
> 
> 赞同：1
> 
> 时间：2012-12-11T02:19:58.883
> 
> 标签：java, arrays, validation, boolean

我很难理解作为 Java OOP 介绍项目的一部分分配给我的作业。所有名称都已更改，未完全翻译。我被要求完成以下方法：

```
public boolean insertHorse(Horse horse) {
return true;
} 
```

方法签名不能更改，我应该将马添加到该方法所在类的马数组中，如果插入成功则返回 true，否则返回 false。所以这就是我所做的：

```
 public boolean insertHorse(Horse horse) {

    //Create a temp array with length equal to h
    Horse[] temp = new Horse[this.horses.length+1];

    //copy the horses to the temp array
    for (int i = 0; i < horses.length; i++){
        temp[i] = horses[i];
    }

    //add the horse on the temp array
    temp[temp.length-1] = horse;

    //change the reference of the old array to the temp one
    veiculos = temp;
    return true; 
```

我的问题是，这如何以及为什么会给出错误？我确实对农场的马匹数量有限制，但是我可以（并且正在计划）在调用该方法之前对其进行检查。这是我的坏习惯吗？

致以最诚挚的问候，若昂·席尔瓦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T02:29:34.533

我想不出任何理由这应该返回 false，除了马的数量限制。尽管从理论上讲，如果马太多，您可能会用完堆空间，但这种情况可能会导致您的程序崩溃。

将检查马匹的数量放在这个函数中而不是在它之外是一个好习惯。这样一来，就不会意外插入比允许更多的马。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T02:28:37.670

你假设总是有足够的内存来分配一个有空间的数组`Horse`。

一种不成立的情况[`OutOfMemoryError`](https://stackoverflow.com/questions/5403972/out-of-memory-error)是抛出 an 。

# php - php Regex - 模式不正确没有得到想要的结果

> ID：13812616
> 
> 赞同：0
> 
> 时间：2012-12-11T02:20:23.957
> 
> 标签：php, regex

我有一个正在阅读的文件，并在整个文件中搜索某种模式。这是示例行：

`DATA "1354236384craan18p.1354236392craan18p.1354668684AR_ESCALATORCase HD0347023 was automatically closed on 5/12/2012 1:51:24 p.m.." "IT Services | File Services | Recovery"`

我想要的是创建`"IT Services | File Services | Recovery"` 只给我该部分的正则表达式。

我有以下正则表达式和代码，但不起作用 - 有什么想法吗？

```
$whole_wk_file = file_get_contents('Work.arx');

$pattern1 = '/\"[^\"\|]+\|[^\"\|]+\|[^\"\|]+\"/';

preg_match_all($pattern1, $whole_wk_file, $matches_wk, PREG_PATTERN_ORDER);

print_r($matches_wk{0}); 
```

这又是在 PHP 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T02:58:15.620

试试这个你的正则表达式

```
'/"(([^"|]+\|){1,}[^"]+)"/' 
```

文本将在每场比赛的第 1 组，甚至可能只是这一场

```
'/(?<=")(?:[^"|]+\|){1,}[^"]+(?=")/' 
```

这将匹配没有任何组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T03:48:13.483

好的，幸运的是 php 的多字节函数似乎支持 Windows-1252 字符编码。这就是我想出的..希望这有效

```
$whole_wk_file = file_get_contents('Work.arx');

$pattern1 = '/\"[^\"\|]+\|[^\"\|]+\|[^\"\|]+\"/';

mb_internal_encoding("Windows-1252");
mb_eregi($pattern1, $whole_wk_file, $matches_wk);

print_r($matches_wk); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T06:50:11.077

您的正则表达式似乎找到了您想要的所有匹配项，但我在恰好包含两个管道 ( `|`) 的引用部分也得到了误报。您在评论中说，每场比赛都应该在其封闭行的末尾，所以添加一个锚应该解决这个问题：

```
'/"[^"|]+\|[^"|]+\|[^"|]+"[ ]*$/m' 
```

`m`修饰符使`$`锚点能够在行边界处匹配，因为`[ ]*`文件的每一行似乎都以空格字符结尾。我可以`\s*`改用，但这会匹配换行符和空格。然后它必须马上把它们还给它们，这样锚 ( `$`) 才能完成它的工作。本着这种精神，完全排除换行符可能是值得的：

```
'/"[^"|\r\n]+\|[^"|\r\n]+\|[^"|\r\n]+"[ ]*$/m' 
```

我还去掉了一堆不必要的反斜杠。

至于那些垃圾字符，我认为[Kelly Copley](https://stackoverflow.com/questions/13812616/php-regex-pattern-incorrect-not-getting-desired-results#comment19006345_13813332)是对的，这不是编码问题（或者如果是，修复它为时已晚）。它们似乎不会影响您关心的部分。

# android - 试图在 EditText 上保存一个整数并在 SQLite 上保存以计算

> ID：13812617
> 
> 赞同：1
> 
> 时间：2012-12-11T02:20:25.587
> 
> 标签：android, android-edittext, android-sqlite, android-dialog

```
<TableRow>
    <Button
        android:id="@+id/Date1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"    
        android:text="@string/Date1"
        android:onClick="Date1" />

    <EditText
        android:id="@+id/SetDate1"
        android:layout_width="160dp"
        android:layout_height="wrap_content"
        android:hint="@string/EditText" />

</TableRow> 
```

这是我尝试实施的日期的 XML。所以到目前为止，我将创建一个对话框来选择日期并将该日期返回给 EditText。

从那里，我试图将日期保存在 SQLite 中，以便我可以使用第二个日期来显示用户选择的两个日期之间的差异。

```
@Override
protected Dialog onCreateDialog(int id)
{
    switch (id) {
    case DATE_DIALOG_ID:
        return new DatePickerDialog(
                this, mDateSetListener, yr, month, day);
    case DATE_DIALOG_ID2:
        return new DatePickerDialog(
                this, mDateSetListener2, yr2, month2, day2);
    }
    return null;
}

private DatePickerDialog.OnDateSetListener mDateSetListener =
new DatePickerDialog.OnDateSetListener()
{
    public void onDateSet(
            DatePicker view, int year, int monthOfYear, int dayOfMonth)
    {
        yr = year;
        month = monthOfYear+1;
        day = dayOfMonth;
        db.open();
        @SuppressWarnings("unused")
        long id = db.insertContact(month, day, yr);
        db.close();
        textBox.setText(yr + "/" + month + "/" + day);
    }

}; 
```

我只是没有上传第二个对话框来选择日期，因为它只是另一个重复。在我将日期放入 SQLite 中或以某种方式存储后，我想向其添加、乘以值并将该值返回到另一个 EditText 框。此外，有没有办法将我的日期按钮的 EditText 烘焙为不可编辑，除非您单击按钮来更改 EditText 的内容？

感谢您的阅读，感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T03:32:37.587

我真的不知道你想做什么。但是EditText有两种方法不编辑，一种是enable是false，二是editable是false，但是在新的android版本中editable是deprecate，但不影响使用。

# java - 不理解简单 java 程序的输出

> ID：13812620
> 
> 赞同：0
> 
> 时间：2012-12-11T02:20:54.560
> 
> 标签：java

```
public class Test10 
{ 
  public static void main( String[] args ) 
  { 
    Thing2 first = new Thing2( 1 ); 
    Thing2 second = new Thing2( 2 ); 
    Thing2 temp = second; 
    second = first; 
    first = temp; 
    System.out.println( first.toString() ); 
    System.out.println( second.toString() ); 
    Thing2 third = new Thing2( 3 ); 
    Thing2 fourth = new Thing2( 4 ); 
    third.swap1( fourth ); 
    System.out.println( third.toString() ); 
    System.out.println( fourth.toString() ); 
    second.setCount( fourth.getCount() ); 
    third = first; 
    System.out.println( third == first ); 
    System.out.println( fourth == second ); 
    System.out.println( first.toString().equals( third.toString() ) ); 
    System.out.println( second.toString().equals( fourth.toString() ) ); 
    System.out.println( first.toString() ); 
    System.out.println( second.toString() ); 
    System.out.println( third.toString() ); 
    System.out.println( fourth.toString() ); 
    first = new Thing2( 1 ); 
    second = new Thing2( 2 ); 
    first.swap2( second ); 
    System.out.println( first.toString() ); 
    System.out.println( second.toString() ); 
  } 
} 

class Thing2 
{ 
  private int count; 

  public Thing2( int count ) 
  { 
    this.count = count; 
  } 
  public int getCount() 
  { 
    return this.count; 
  } 
  public void setCount( int count ) 
  { 
    this.count = count; 
  } 
  public String toString() 
  { 
    String s = " "; 
    switch( this.count ) 
    { 
      case 1: 
        s = s + "first ";  
      case 2: 
        s = s + "mid "; 
        break; 
      case 3: 
        s = s + "last "; 
        break; 
      default: 
        s = s + "rest "; 
        break; 
    } 
    return s; 
  } 
  public void swap1( Thing2 t2 ) 
  { 
    int temp; 
    temp = this.getCount(); 
    this.setCount( t2.getCount() ); 
    t2.setCount( temp ); 
  } 
  public void swap2( Thing2 t2 ) 
  { 
    Thing2 temp; 
    Thing2 t1 = this; 
    temp = t1; 
    t1 = t2; 
    t2 = temp; 
  } 
} 
```

> 给定以下类 Thing2 的定义，Java 应用程序 Test10 的输出是什么？

嘿，伙计们，这是我的一门课。有两个类（如上所列），Thing2 和 Test10。这是输出，但我不明白如何获得输出（即，什么指向什么，以及解决所有问题的顺序是什么？）。谢谢！

```
mid
first mid
rest  
last
true
false
true
true 
mid  
last 
mid 
last
first mid
mid 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T02:31:48.123

一个技巧是`case 1`在您的 switch 语句中没有 break 语句，因此代码继续执行`case 2`指令并为 Thing(1) 创建字符串“first mid”而不是“first”

像这样向您的打印语句添加注释可能会有所帮助

```
System.out.println("First is " + first.toString());
System.out.println("third == first?" + (first == third)); 
```

一个你这样做，添加更多的打印语句。

把每个变量想象成一个大箭头。

该语句`a = new Thing(2)`用“mid”一词创建了一个事物，并将`a`箭头指向它。

该语句`a = b`采用`b`箭头所看的任何东西并将箭头指向`a`同一事物。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T03:21:04.117

3条建议：

1.  switch 中的 case 1 不包含中断。因此，当满足案例 1 时，控制将流向案例 2，甚至会执行案例 2。

2.  使用一些打印语句，以便您知道您在控制台上打印的内容。

3.  你的问题不准确。你有代码。你有输出。你是说你不明白如何得到输出。可能您需要通读代码并了解控制在 Java 程序中的流动方式。如果您正在寻找一些特定的控制流结构，那么我们可以提供帮助。根据您所说的，我们不知道您面临什么问题。尽管如此，我还是会建议你“分而治之”的策略。注释掉所有内容并执行小的逻辑代码片段，当您理解了第一小部分时，取消注释几行，运行并查看输出，然后您可能可以将执行的内容和打印的内容联系起来。示例：首先处理一个交换函数。

# delphi - 代码测试：如何在不重新编译的情况下添加测试代码？

> ID：13812621
> 
> 赞同：1
> 
> 时间：2012-12-11T02:21:05.887
> 
> 标签：delphi, unit-testing, automated-tests, build-automation, delphi-2010

我有原始的测试框架（某种），在我的情况下工作得很好。

它基本上是一个特殊的测试单元，在项目的主窗体中包含 $INCLUDEd。

例如，假设我的主表单如下所示：

```
unit start;

interface

uses
    Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
    Dialogs, ...;

type
  {$ifdef CodeTest}
  TFileOperation = (fpDelete, fpModify, fpRename);
  {$endif}

  TMainForm = class(TdxRibbonForm)
    dxRibbon: TdxRibbon;
    dxBarManagerBar: TdxBarManager;
    About: TdxBarButton;
    // ...

    procedure FormCreate(Sender: TObject);
    procedure AboutClick(Sender: TObject);
    // ...
  private
    { Private declarations }

    SomePrivateVar : String;
    // ...

    {$ifdef CodeTest}
         StartTestTimer : TTimer;
    {$endif}

    {$ifdef CodeTest}
         // Code Test Routines

         procedure CodeTestsBtnClick(Sender: TObject);

         // Start code testing after some delay to properly initialize app
         procedure StartTestingTimer(Sender: TObject);

         function  CodeTests() : Boolean;
         procedure CodeSingleTest(TheButton : TdxBarButton; strTestData : String = '');
         // ...
    {$endif}    {.$ifdef CodeTest}

    function SomePrivateFunction();
  public
    { Public declarations }

    Public_Var_1 : Integer;
    Public_Var_2 : Integer;

    function SomeFunction();
  end;

var
   MainForm : TMainForm;

implementation

{$R *.dfm}

{$ifdef CodeTest}
        {$include _CodeTests.pas}
{$endif}

// ----------------------------------------------------------------------- //
procedure TMainForm.FormCreate(Sender: TObject);
begin
     // ...
end;
// ----------------------------------------------------------------------- //

... 
```

代码测试单元如下所示：

```
function CodeTest();
begin
      // Hide Folders Left Panel
      CodeSingleTestChecked(ShowFolders, ''{strTestData}, False{NewValue});
      Assert( IsOK( (NxSplitterLeft.Visible = False) And
                    (NxPanelFolders.Visible = False) And

                    (NxPanelFiles.PanelBorders  = [boBottom, boTop, boRight, boLeft]) And
                    (NxHeaderPanel.Margins.Left = 1)
            ));

      // etc...
end; 
```

唯一*真正的*限制是我必须将代码测试单元包含在主窗体中（即。`{$include _CodeTests.pas}`），除此之外，我拥有我需要的一切：功能测试、压力、结果和错误检查等......

我唯一的问题是；我现在需要雇人来完成这些测试，但我**真的**不想公开我的代码（至少一开始不会），所以我想知道是否有办法给新人代码测试单元，但不是项目代码，只有函数头，即。

```
procedure TMainForm.FormCreate(Sender: TObject);
procedure TMainForm.NewBtnClick(Sender: TObject);
procedure TMainForm.HelpClick(Sender: TObject);
... 
```

这样他/她就可以继续进行代码测试，同时仍然能够保护我的代码，至少在我信任这个人之前是这样。

我**不是**在寻求法律建议，我对技术观点感兴趣，即。如果有可能保护我的代码而不使这个人的工作更加困难。

我考虑过使用构建软件（我拥有并积极使用 FinalBuilder）、构建服务器等......但最终决定*如果*我可以`inject`在 EXE 中测试代码**而无需**重新编译，这将是我的理想方案。

**所以我的问题是：是否可以在EXE中注入测试代码而无需重新编译）**

**PS。是的，我知道 DUnit** ，但考虑到项目规模和时间限制，*现在*无法切换测试框架

# asp.net - HttpHandler 路径匹配

> ID：13812625
> 
> 赞同：2
> 
> 时间：2012-12-11T02:21:20.900
> 
> 标签：asp.net, httphandler

在带有 IIS7 的 ASP.NET 4.0 中，我创建了一个 HttpHandler 并将其注册到 web.config

```
<add name="MyHandler" path="MyPath/*" verb="*" type="MyProject.MyHandler, MyHandler" /> 
```

在这里，我试图实现的是处理对 的所有文件请求`http://my-server/MyPath/*`，但是通过这样的设置，请求`http://my-server/SubFolder/MyPath/*`也将被处理，而不是我想要的。

绝对路径是我可以用来保证一级文件夹匹配的唯一方法吗？

还有其他更好的主意吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T02:29:47.110

您可以为此使用位置元素

```
<location path="MyPath">
  <system.webServer>
     <handlers>
      <add name="MyHandler" path="MyPath/*" verb="*" type="MyProject.MyHandler, MyHandler"/>
    </handlers>
  </system.webServer>
</location> 
```

# excel - 我想在 sheet2 上找到最后一行，然后能够将每个单元格移动到 sheet1 上的定义位置

> ID：13812626
> 
> 赞同：1
> 
> 时间：2012-12-11T02:21:29.740
> 
> 标签：excel, variables, cell, vba

我已经在所有网络上搜索了主题行中显示的信息，因此我可以继续这个小项目。我希望能够找到工作表 2 上的最后一行，然后将每个单元格的内容提取回工作表 1 上的预定义位置或预定义变量。

我已经能够找到最后一行

```
Cells(Application.Rows.Count, 1).End(xlUp).Select 
```

并用定义的单元格的内容填充文本框

```
TextBox1.Value = Sheets("Sheet2").Range("a1").Value 
```

我希望以上信息足以让有人指出我正确的方向。我感谢任何人都可以提供的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T07:43:57.487

我不确定这是否是您想要的：

```
Sub test()
Dim ws1 As Worksheet: Set ws1 = ActiveSheet
Dim ws2 As Worksheet: Set ws2 = Workbooks("abc.xlsm").Sheets("Test_ws")

For i = 1 To 12
ws1.Cells(3, i) = ws2.Cells(Application.Rows.Count, i).End(xlUp).Value
Next i
End Sub 
```

PS abc.xlsm 必须打开才能使代码正常工作。您可以使用 Application.Workbooks.Open 打开具有完整路径的文件。

# c# - TCP 实时多人游戏

> ID：13812627
> 
> 赞同：2
> 
> 时间：2012-12-11T02:21:34.973
> 
> 标签：c#, networking, tcp, real-time, multiplayer

好的，所以我意识到这个问题已经被反复讨论过，因为我已经阅读了无数的 Stack Overflow 线程和网络上的文章。我目前有一个在 VPS 上运行的 TCP 异步 C# .NET 服务器。

我已经让它在多人游戏大厅中运行良好，例如将玩家连接到游戏等等。我的主要问题是游戏开始时，因为它变得非常块状。所以根据我的研究

我在 Interpolation 上发现了一些非常有用的线程，它们引导我了解基本的（差异（Serverpos - Localpos）* Deltatime（服务器更新之间的时间？）* Interpolation Constant）。从某种意义上说，它可以平滑帧速率，但我仍然在服务器更新时间上有短暂的延迟。

但是我的主要问题是我正在使用加速度计来更新每个玩家的位置，但是我的服务器无法接收该数据并像加速度计更新一样快地处理它，这导致它开始搞砸了。

所以今天我尝试简单地将数据发送到服务器，但是我的最大传输时间约为 350 毫秒，这使它不会意外合并消息。

然后我遇到了“航位推算”，它在理论上可行，但是因为理论上你不会跟踪桨的位置是最新的。当球击中对手的桨时会发生什么？您是否会自动将桨板猛拉到位并反转球的位置？

基本上，我认为我已经把自己绕了一个大圈，只是通过理论化不同的方式来做到这一点。我也知道 UDP，但我无法想象 Pong 多人游戏需要我运行 UDP 连接，必须有一种使用 TCP 的方法。

无论如何，谢谢你们给我的任何帮助。我是新手，我认为已经迷失在网络网络中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T02:54:38.983

这不是网络问题，而是过滤器问题。我建议阅读“卡尔曼滤波”。数学可能令人生畏，但您要解决的基本问题是“如何根据我对系统物理的了解以及（可能）对用户输入和先前状态的嘈杂和不规则测量来插入状态”......这恰好是经典的卡尔曼问题。

1）您必须建立一个服务器和客户端同意的共同“时间”。有一些众所周知的算法可以做到这一点。使用这个公共时间为您的所有更新添加时间戳。

2) 使用 UDP 是一种可行的方法 - 请记住，数据包可能会丢失，并且不能保证按照发送顺序接收它们。这意味着您必须有一种方法来检查数据包并确定它们是否“旧”，然后再使用它们来更新您的客户端。您还有一个问题，如果您的客户端无法像发送它们一样快地处理它们，那么您将开始在您的客户端上获得较大的增量......最好扔掉一个旧的数据包而不是花时间处理它.

3) 最小化延迟。如果可以的话，把你的服务器完全从循环中去掉，让你的客户端互相广播更新。

4）这就是过滤理论的用武之地——对于每个自由度，决定你愿意容忍多少错误（客户看到的和“真相”之间的差异）。例如，对于一架飞机，位置不是很动态的——你可能只需要一到两秒的更新就可以侥幸逃脱，并且客户端的位置误差很小。但是，姿态（俯仰、偏航、横滚）是非常动态的，因此您可能需要每 0.25 秒更新一次这些状态以达到可接受的位置误差。卡尔曼理论会告诉你更新率需要达到你需要的误差。您还可以根据您所知道的原始客户端发生的情况更改更新率....快速控制输入 => 高更新率与无控制输入 => 低更新率。

# c++ - C ++如何将文本文件中的特定元素读入数组？

> ID：13812629
> 
> 赞同：2
> 
> 时间：2012-12-11T02:21:53.450
> 
> 标签：c++, arrays, file, stream

我想做的是，现在我知道数字“10”的索引，我想将它读入ary。

```
#include <iostream>
#include <fstream>
using namespace std;

int ary[1];
ifstream inData;
inData.open("num.txt");
for (int i=1;i<2;i++){
    inData >> ary[0];
}

num.txt: 0   10   20
three number and separate by a '\t' 
```

但这不起作用，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T02:44:50.663

您正在寻找特定元素；那么就不需要数组了。

```
#include <iostream>
#include <fstream>

using namespace std;

int main()
{
    int elementValue = 0;
    int indexOfElement = 2;
    ifstream inData;
    inData.open("num.txt");
    if (!inData.good())
    {
        std::cout << "Cannot open file" << std::endl;
        return 1;
    }
    int currentElement = 1;
    while(currentElement <= indexOfElement && inData.good())
    {
        inData >> elementValue;
        ++currentElement;
    }
    if (inData.good())
        std::cout << "Found: " << elementValue << std::endl;
    else 
        std::cout << "Failed to find enough elements" << std::endl;

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T02:32:35.190

它是您要查找的第二个数字，因此将 i 更改为 0 或将 < 更改为 <=。其次，您需要一个大小为 2 的数组，`int ary[2]`或者只使用一个，`int ary`因为您知道索引，并且之前在前一次迭代中写入的内容将被循环的每次后续迭代覆盖。

```
int main() {
    int ary;
    ifstream inData;
    inData.open("num.txt");
    for (int i=0;i<2;i++){
        inData >> ary;

    }
    printf("%d\n",ary);
    return 0;
} 
```

与数组

```
int main() {
    int ary[2];
    ifstream inData;
    inData.open("num.txt");
    for (int i=0;i<2;i++){
        inData >> ary[i];
        printf("%d\n",ary[i]);  
    }

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T02:34:45.157

您的整数数组的大小为 1。我认为迭代文件不会起作用。

保留更多空间以便能够读取 3 个值，例如，

```
int ary[3]; 
```

并将您的循环更改为：

```
for (int i=0;i<3;i++) 
```

我认为你也应该添加这个：

```
for (int i=0;i<3;i++)
inData.read(buffer,sizeof(int)) 
```

# hbase - 如何在 localhost 上运行多个 hbase (CDH Distro) 实例

> ID：13812633
> 
> 赞同：1
> 
> 时间：2012-12-11T02:22:20.077
> 
> 标签：hbase, cloudera

试图找出我需要覆盖哪些属性才能在本地运行两个隔离的 HBase 实例。

我已经修改了我的 hbase-site.xml 以包括：

```
<configuration>
<property>
  <name>hbase.zookeeper.property.clientPort</name>
  <value>2222</value>
  <description>Property from ZooKeeper's config zoo.cfg.
  The port at which the clients will connect.
  </description>
</property>
<property>
  <name>hbase.zookeeper.property.dataDir</name>
  <value>/usr/local/zookeeper-old</value>
  <description>Property from ZooKeeper's config zoo.cfg.
  The directory where the snapshot is stored.
  </description>
</property> 
```

我也指定了`HBASE_PID_DIR`

但是，当我同时启动 CDH3 和 CDH4.1 时，cdh3 上的 shell 在我执行`list`命令时会挂起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T11:38:40.297

你不能像这样一起运行 2 个单独的 HBase。当他们都尝试访问同一个 HDFS、使用同一个端口、哪个 RS 将联系哪个 HMaster 等时会发生什么？如果你真的想这样做，你应该有不同的配置文件集。实际上，在一个盒子上运行多个发行版是没有意义的。顺便说一句，我能问你为什么需要这样的设置吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:41:19.550

我不确定这是否是两个真实实例，但是我在运行本地 HBase 和 HBaseTestingUtility 时遇到了问题，所以我建议这些最小覆盖：

*   覆盖主端口 ( *hbase.master.port* ) 默认为 60000
*   覆盖区域服务器端口 ( *hbase.regionserver.port* ) 默认为 60020
*   覆盖主服务器和区域服务器的 HTTPServer 端口（hbase.master.info.port 和 hbase.regionserver.info.port）。如果您不需要信息 UI，我建议禁用这些服务器。这是通过将它们的端口设置为 -1 来完成的。

# javascript - jquery / javascript中未定义的函数

> ID：13812638
> 
> 赞同：0
> 
> 时间：2012-12-11T02:22:33.993
> 
> 标签：javascript, jquery, function

```
zoom: function ( element, scale ){.....},
init: function() {
    $("#book div img").live('dblclick', function() {
       ...
       $( "#slider" ).slider({
       ...
          slide: function( event, ui ) {
             //call function here
             zoom (element,ui.value);
          }
       });
    });
}, 
```

有两个功能，缩放和主功能。主函数调用缩放函数执行工作，但是由于不在同一级别，浏览器返回 undefined function 'zoom' 的错误。如何解决这个问题（能够在幻灯片中调用缩放：函数）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T02:34:30.863

将`this`对象的引用存储在函数的最外层范围内。然后`this.zoom()`在你的回调中调用：

```
zoom: function ( element, scale ){.....},
init: function() {
    // store a reference to the object these functions are being added to
    var that = this; 

    $("#book div img").live('dblclick', function() {
       ...
       $( "#slider" ).slider({
       ...
          slide: function( event, ui ) {
             // use the var you made above to call zoom
             that.zoom (element,ui.value);
          }
       });
    });
}, 
```

简化示例：http: [//jsfiddle.net/u5ZL3/](http://jsfiddle.net/u5ZL3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T02:34:49.980

无耻地取自：[如何在 JavaScript 中声明命名空间？](https://stackoverflow.com/questions/881515/javascript-namespace-declaration)

```
//Public Method
skillet.fry = function() {
    var oliveOil;

    addItem( "\t\n Butter \n\t" );
    addItem( oliveOil );
    console.log( "Frying " + skillet.ingredient );
};

//Private Method
function addItem( item ) {
    if ( item !== undefined ) {
        console.log( "Adding " + $.trim(item) );
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T02:52:56.107

如果你的班级叫 Bob，你可以像这样调用函数

```
Bob.zoom (element,ui.value); 
```

另一种解决方案是使用“this”，它比调用我相信的类名具有一些优势，但需要更多代码。

# ruby-on-rails - Rails 和 Heroku 上的定期后台作业

> ID：13812642
> 
> 赞同：2
> 
> 时间：2012-12-11T02:23:25.080
> 
> 标签：ruby-on-rails, heroku, screen-scraping, web-scraping

我正在开发一个 Rails 应用程序，它通过从 3rd 方网站（类似于[http://railscasts.com/episodes/190-screen-scraping-with-nokogiri](http://railscasts.com/episodes/190-screen-scraping-with-nokogiri)）抓取价格来提供各种产品的定价数据。

由于我是编程新手，所以现在我通过将我的代码放入 rake 任务中手动执行此操作。这些任务遍历我数据库中的所有产品，并通过抓取更新它们的价格。完成需要几个小时（因为有 1000 种产品），但大部分时间都花在调用 **sleep**上，所以我可以限制自己的速度。现在我正在从命令行手动调用 rake 任务，但我希望有一个每周定期在后台自动运行的作业。

经过一番研究，似乎有几种方法可以做到这一点（**Resque、DelayedJob、Cron/Whenever**），但我不确定哪种方法最适合我的需要。此外，我正在通过 Heroku 进行部署，所以我想确保我不会在工人测功机上浪费钱；现在这只是一个附带项目，所以我不想花那么多钱。

什么是一种简单且具有成本效益的方法来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T03:11:25.190

我目前正在使用[Heroku Scheduler](https://addons.heroku.com/scheduler)。它可以每天、每小时或每 10 分钟运行一次任务。它非常易于使用：

1.  安装附加组件`heroku addons:add scheduler:standard`
2.  在 Heroku 网站中转到您的应用程序，选择调度程序插件并添加一个新作业。您可以通过定义任务 ( `rake name_of_your_task`)、频率和下一次运行来做到这一点。并做了。

但是，有几个问题：

1.  您需要提供一张有效的信用卡才能使用此插件，即使它原则上是免费的。

2.  调度程序运行一次性进程，这些进程将计入您的 dyno-hours。

3.  Heroku 仅为每个应用程序提供 750 个免费测功小时。

这是调度程序的 wiki 对[长时间运行的作业](https://devcenter.heroku.com/articles/scheduler#longrunning-jobs)所说的：

> 计划作业旨在执行短期运行的任务或将较长运行的任务排入后台作业队列。任何需要超过几分钟才能完成的事情都应该使用工人测功机来运行。

所以我的建议是：

1.  将你的 rake 任务分解成更小的块，意味着只运行几分钟。

2.  更定期地运行这些任务（您甚至没有使用调度程序的每周选项）。

3.  留意你的测功机时间。[你可以在这里](https://api.heroku.com/invoices/current)这样做。750小时相当于31天6小时。因此，在这 31 天的月份中，您至少有 6 小时的工作时间。如果您的应用程序没有被使用，您还可以使用以下命令将其关闭，以便它停止计算常规测功小时数。

    ```
    heroku ps:scale web=0 
    ```

    你可以用

    ```
    heroku ps:scale web=1 
    ```

不幸的是，没有免费的计算能力。

# javascript - jQuery 在页面上显示 CSV 信息

> ID：13812644
> 
> 赞同：0
> 
> 时间：2012-12-11T02:23:36.410
> 
> 标签：javascript, jquery, csv

我有一个`CSV`需要在页面上显示的内容。我可以通过`$.get()`但是一旦我知道`(data)`如何将它分开并分配显示它的位置。每行由一个分隔`|`

目前我正在使用此代码在 div 中显示信息：

```
$.get('feed.txt', function(data) {
$('div').html(data.replace(/\|/g, '<br>'));
}); 
```

我知道这可能是一个非常大的问题，所以如果有人遇到过一个很棒的教程，那也很棒。

**更新** 这是我正在提取的数据的一个示例：

```
TYPE: Small, ID: 0001, RESPONSE DATE AND TIME: 2012-12-12 12:00, UNITNAME: Name, MEMO: Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.|
TYPE: Medium, ID: 0002, RESPONSE DATE AND TIME: 2012-12-12 01:00, UNITNAME: Name, MEMO: Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.|
TYPE: Large, ID: 0003, RESPONSE DATE AND TIME: 2012-12-12 02:00, UNITNAME: Name, MEMO : Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.| 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T02:48:04.843

你可以试试，

**尝试1：**

我曾经`split()`将字符串转换为由分隔的数组`|`并循环每个数组值以添加`div`元素并将其发送到`$('div').html(values);`

```
$.get('feed.txt', function(data) {
    var arr = data.split('|');
    var values = '';
    for(var i=0; i<arr.length; i++){
      values += '<div>'+arr[i]+'</div>';
    }
    $('div').html(values);
}); 
```

演示：http: [//jsfiddle.net/d3spZ/2/](http://jsfiddle.net/d3spZ/2/)

**尝试2：**

在这里，我使用函数通过替换`replace()`来扭曲元素。`div``|`

```
$.get('feed.txt', function(data) {
    var new_data = '<div>'+data+'</div>';
    $('div').html(new_data.replace(/\|/g, '</div><div>'));​
}); 
```

演示：http: [//jsfiddle.net/bwpjR/](http://jsfiddle.net/bwpjR/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T02:44:33.000

看看这项工作 - [http://jsfiddle.net/tariqulazam/Eng8b](http://jsfiddle.net/tariqulazam/Eng8b)

```
var data= "TYPE: Small, ID: 0001, RESPONSE DATE AND TIME: 2012-12-12 12:00, UNITNAME: Name, MEMO: Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.|TYPE: Medium, ID: 0002, RESPONSE DATE AND TIME: 2012-12-12 01:00, UNITNAME: Name, MEMO: Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.|TYPE: Large, ID: 0003, RESPONSE DATE AND TIME: 2012-12-12 02:00, UNITNAME: Name, MEMO : Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.|";

var arr= data.split('|');
$(arr).each(function(index, element){
   $("#bd").append($("<div></div>").append(element));
});
​ 
```

**HTML**

```
<body id="bd"></body>​ 
```

# c++ - 如何通过总和获得正乘积的负因子

> ID：13812649
> 
> 赞同：0
> 
> 时间：2012-12-11T02:23:59.387
> 
> 标签：c++

我可能没有在标题中很好地解释这一点，因为我真的不知道如何用标题的长度来解释它，所以我为此道歉。无论如何，这是我当前的代码：

```
// Gets the product that is used to get the factors
cout << "Enter a number that you want to be factored" << endl;
cin >> y;

system("cls");

// Gets the sum from the user that the two factors need to add up to
cout << "Input the sum that is needed" << endl;
cin >> neededSum;

secondary = y;
system("cls");

// Lists the factors that add up to the specified sum
cout << "The numbers that add up to " << neededSum << " are:" << endl;
for (int i = 0; i < 100; i++)
{
    x++;
    increment++;
    y = secondary / x;
    product = x * y;
    if (product == secondary)
    {
        sum = x + y;
        if (sum == neededSum)
        {
            cout << x << " and " << y << endl;
        }
    }
} 
```

基本上它需要一个产品列出该产品的所有因素。然后，它将所有因素加在一起，直到找到加起来达到指定总和的因素。

但是，如果指定的总和为负数，例如“-11”，则它将不起作用，因为“28”（示例）的因数是 4 和 7，而不是 -4 和 -7。我需要想办法解决这个问题，这样它就知道什么时候必须是 -4 和 -7 而不是正相反。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T02:28:37.377

假设 x 和 y 是负数：

```
if (product == secondary)
{
    sum = x + y;
    if (sum == neededSum)
    {
        cout << x << " and " << y << endl;
    }
    else if (-sum == neededSum)
    {
        cout << -x << " and " << -y << endl;
    }
} 
```

# php - 通过 PDO 进行参数化 SELECT 查询？

> ID：13812650
> 
> 赞同：-4
> 
> 时间：2012-12-11T02:24:14.817
> 
> 标签：php, pdo

> **可能重复：**
> [如何防止 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection)

我试图弄清楚如何通过 PDO 执行 SELECT 进行参数化查询，现在我得到了以下代码：

```
function user_login($username, $password) {
    $conn = connection_getConnection();

    $stmt = $conn->prepare("SELECT `password` FROM `users` WHERE `username` = :username");
    $row = $stmt-> #WHAT DO I DO HERE?
    if (empty($row)) {

    }
} 
```

所以，我在我有点迷失的那条线上发表了评论。请从这里帮助我。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T02:26:03.737

[PHP 手册](http://us3.php.net/manual/en/pdo.prepare.php)有一些很好的例子。

为你：

```
function user_login($username, $password) {
    $conn = connection_getConnection();

    $sql = "SELECT `password` FROM `users` WHERE `username` = :username";
    $stmt = $conn->prepare($sql, array(PDO::ATTR_CURSOR => PDO::CURSOR_FWDONLY));
    $query = $stmt->execute(array(':username' => $username));
    $rows = $query->fetchAll();
    if (empty($rows)) {

    }
} 
```

# node.js - flash 未使用 Express 3、connect-flash 和everyauth 定义

> ID：13812653
> 
> 赞同：0
> 
> 时间：2012-12-11T02:24:25.623
> 
> 标签：node.js, express, everyauth

升级到 Express 3 后，我体验了实现 connect-flash 并让它工作的“乐趣”。

我是这样实现的：

```
var flash = require('connect-flash');

app.use(flash());

app.use( function (req, res, next) {
    res.locals.everyauth.user = req.user;
    res.locals.user = req.user;
    res.locals.flash = req.flash();
    next();
}); 
```

我在我的翡翠布局模板中显示闪光警报（所有页面都使用，并且对于 flash.info、flash.warning 等有类似的行），如下所示：

```
- if ('undefined' !== typeof flash.error && flash.error.length)
    - each msg in flash.error
        div.error= msg 
```

一切都很好，除了当我通过 express 呈现我的 /login 和 /register 页面时，当我收到“未定义闪存”错误时。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:41:23.097

好吧，这并不漂亮，但我找到了解决方法。基本上，我已将第一个 if 语句添加到我的 express 模板中处理 flash 消息的块中：

```
- if (flash !== null)
    - if ('undefined' !== typeof flash.error && flash.error.length)
        - each msg in flash.error
            div.error= msg

    - if ('undefined' !== typeof flash.warning && flash.warning.length)
        - each msg in flash.warning
            div.warning= msg

    - if ('undefined' !== typeof flash.info && flash.info.length)
        - each msg in flash.info
            div.info= msg

    - if ('undefined' !== typeof flash.success && flash.success.length)
        - each msg in flash.success
            div.success= msg 
```

然后，我在everyauth 的页面渲染语句中添加了一个局部变量，将flash 设置为null，如下所示（注册和登录页面需要一个）：

```
.registerView('register.jade')
    .registerLocals({
        title: 'Hi there, I am a register page',
        flash: null
    }) 
```

就像我说的那样，它并不漂亮，但它似乎正在工作。

# ruby - 按空格拆分字符串但保留 \n - Ruby

> ID：13812654
> 
> 赞同：8
> 
> 时间：2012-12-11T02:24:30.037
> 
> 标签：ruby

我有一个 ruby​​ 文件，它读取文件并使用`split(' ')`. 问题是这些文本文件包含换行符，我想保留这些换行符。例如，如果我运行以下代码

```
"Lorem ipsum\ndolor sit amet".split(' ') 
```

我得到的输出

```
["Lorem", "ipsum", "dolor", "sit", "amet"] 
```

为什么 split 会删除换行符？我怎样才能保留`\n`在我的数组中？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-11T02:31:43.100

Michael Berkowski 对您的问题的评论是正确的。

如果您想解决这种情况，请使用正则表达式：

```
"Lorem ipsum\ndolor sit amet".split(/ /)
#=> ["Lorem", "ipsum\ndolor", "sit", "amet"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-18T20:55:28.667

进一步迭代 Ryan Bigg 的回答；看起来您可以将正则表达式与捕获组一起使用来专门保留换行符。

```
"Lorem ipsum\ndolor sit amet".split(/ |([\t\r\n\f])/)
=> ["Lorem", "ipsum", "\n", "dolor", "sit", "amet"] 
```

灵感来自 yonosoytu 在[String#split中的评论](https://apidock.com/ruby/String/split)

# arrays - CHANGEM 的优雅矢量化版本（替代值） - MATLAB

> ID：13812656
> 
> 赞同：7
> 
> 时间：2012-12-11T02:24:46.550
> 
> 标签：arrays, matlab, matrix, vectorization

在 Matlab 2012b 中，有一个`changem`函数允许您用一组键指定的其他值替换矩阵的元素： [替换数据数组中的值](http://www.mathworks.com/help/map/ref/changem.html;jsessionid=7bc502fa8e3b3db2dde50adb52bc)

如果我没有映射工具箱，是否有一种优雅/矢量化的方式来做同样的事情？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-11T07:09:23.457

是的，使用`ismember`：

```
A       = magic(3);
oldCode = [ 8  9];
newCode = [12 13];

[a,b] = ismember(A,oldCode);

A(a) = newCode(b(a)); 
```

我不知道`changem`，而且我怀疑以上内容不会完全涵盖它的功能（为什么 TMW 还会引入`changem`？），但是，它可以满足您的要求 :)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-02-01T14:33:58.203

**`CHANGEM`with的矢量化实现`bsxfun`，`max`**

前一段时间，我被要求编写一个*定制的* **矢量化**版本，[**`changem`**](http://in.mathworks.com/help/map/ref/changem.html)它是一个更大的问题的一部分[**`bsxfun`**](http://in.mathworks.com/help/matlab/ref/bsxfun.html)。[**`max`**](http://in.mathworks.com/help/matlab/ref/max.html)可以在[此处](https://stackoverflow.com/a/28256925/3293881)找到参考的解决方案。然后，在几个链接之后，我看到了这篇文章，并认为它可以作为一个解决方案发布在这里，以便未来的读者轻松找到，因为这个问题专门要求一个*高效且矢量化*的`changem`. 所以，这是功能代码 -

```
%// CHANGEM_VECTORIZED  Vectorized version of CHANGEM with MAX, BSXFUN
function B  = changem_vectorized(A,newval,oldval)

B = A;
[valid,id] = max(bsxfun(@eq,A(:),oldval(:).'),[],2); %//'
B(valid) = newval(id(valid));

return; 
```

自定义版本中使用的语法遵循与`changem.m`-

```
function B = changem(A, newval, oldval)
%CHANGEM  Substitute values in data array ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T02:53:03.907

不幸的是，我认为你需要一个 FOR 循环。但这很简单：

```
function xNew = myChangeM(x,oldCode,newCode)
% xNew = myChangeM(x,oldCode,newCode)
%
%   x is a matrix of vaues
%    oldCode and newCode specify the values to replace and with what
% e.g., 
%   x = round(randn(10));
%   oldCode = [-1 -2]; 
%   newCode = [nan, 10]; %replace -1 with nan, -2 by 10
% xNew = myChangeM(x,oldCode,newCode)

xNew = x;
for repInd = 1:numel(oldCode)
    xNew(x == oldCode(repInd)) = newCode(repInd); 
end 
```

# time - AWK命令更改纪元时间到日期并在同一行列出纪元

> ID：13812657
> 
> 赞同：3
> 
> 时间：2012-12-11T02:24:51.290
> 
> 标签：time, awk, line, epoch

所以现在我有：

```
echo -n "Enter Path (or File if in directory) to Convert: " ; read FILE ; cat $FILE | awk '{print strftime("%c",$1)} {print}' 
```

当输入要转换的文件或路径时，这将打印以下内容：

```
Tue 04 Dec 2012 09:48:43 PM PST
1354686523
Wed 05 Dec 2012 09:47:38 PM PST
1354772858
Thu 06 Dec 2012 09:47:39 PM PST
1354859259
Fri 07 Dec 2012 09:46:08 PM PST
1354945568 
```

以上只是一个示例日期。这是完美的，但我怎样才能让它在同一条线上？所以它显示文件中的每个日期，如下所示：

```
Tue 04 Dec 2012 09:48:43 PM PST  --  1354686523
Wed 05 Dec 2012 09:47:38 PM PST  --  1354772858
Thu 06 Dec 2012 09:47:39 PM PST  --  1354859259
Fri 07 Dec 2012 09:46:08 PM PST  --  1354945568 
```

非常感谢！！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-11T02:33:55.487

你可以试试：

```
awk '{ printf "%s -- %s\n", strftime("%c",$1), $0 }' file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T02:30:50.387

```
awk 'NR%2==0 {printf(" -- %s\n", $0) }
     NR%2==1 {printf("%s ", $0)} ' inputfile > outputfile 
```

试试看。修复了问题。

# video - 带有滚动条的 Moodle 视频文件

> ID：13812665
> 
> 赞同：0
> 
> 时间：2012-12-11T02:25:20.367
> 
> 标签：video, scrollbar, moodle

我在萤火虫中看到以下错误。对象的高度和宽度在运行时被覆盖。视频还带有水平和垂直滚动条。

单击[Introduction.html](http://moodle-vpc-backend.iss-resources.com/sep/pluginfile.php/4/mod_resource/content/0/Test/test.html)链接以查看文件。

请让我知道如何摆脱滚动条

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:00:33.160

尝试设置适合您的视频分辨率的宽度和高度属性。您能否提供更多有关您在 Moodle 中的视频集成的详细信息？

# android - Android：线程未并行运行

> ID：13812670
> 
> 赞同：6
> 
> 时间：2012-12-11T02:25:55.677
> 
> 标签：android, multithreading, opengl-es-2.0

我正在用 Android/OpenGL 编写游戏，并试图将我的 OpenGL（渲染）逻辑与我的游戏更新逻辑分开，通过在自己的线程上运行每个以提高性能。

我设法让每个线程都在自己的线程上运行，但是根据 DDMS 中的 Tracer，线程仍在按顺序运行（世界是我的游戏更新线程）：

请参阅网址，因为我没有图像权限：http: [//img849.imageshack.us/img849/9688/capturegff.png](http://img849.imageshack.us/img849/9688/capturegff.png)

线程似乎不会同时执行代码。我初始化世界线程如下：

```
public class World implements Runnable {

    Thread thread;

    public World(...) {
    ...
        // Initialise the player/ball objects
        initialiseObjects();

        thread = new Thread(this, "World");
        thread.start();
}
} 
```

我已经在两个线程之间实现了自己的同步。使用类似于 Replica Island 的方法，我有两个渲染缓冲区：更新线程（理想情况下应该）写入其中一个缓冲区，而渲染线程正在读取另一个缓冲区。缓冲区包含渲染器绘制每个精灵所需的信息。一旦更新线程完成更新其缓冲区并且渲染器完成绘制，它们交换缓冲区并重复该过程。

在游戏更新线程的代码中（渲染线程中的类似代码）：

```
 currBuffer.write();
    player.draw(currBuffer.getNext());

   ball.draw(currBuffer.getNext());

    if (particleEffect != null) {
        particleEffect.draw(currBuffer);
    }

    currBuffer.finished();

    while(otherBuffer.isFinished() == false) {
        //otherBuffer is finished once the render thread has finished drawing
    }

    DrawBuffer tempBuffer = currBuffer;
    currBuffer = otherBuffer;
    otherBuffer = tempBuffer;

    currBuffer.changed();
    while(otherBuffer.isChanged() == false) {
        //otherBuffer is changed once the render thread has also swapped buffered
    } 
```

我看不出上面的代码如何导致线程的顺序执行，尽管我以前从未尝试过多线程，所以我可能做错了什么。我试图加快游戏速度使其明显变慢且流畅度大大降低。知道为什么线程没有并行运行吗？

更新：问题是我手机的处理器只有单核。我确信 Incredible S 是双核的，但可惜它只是单核的。我在 S2 上尝试过，它确实并行运行了线程。

但是，如果市场上只有较新的手机支持多线程，那么多线程的优势是什么？我不明白 Replica Island 如何通过实现多线程在较旧的单核手机上管理更好的性能。如果没有第二个内核可以利用，那么线程之间同步的额外开销肯定会导致性能降低吗？

由于必须生成缓冲区，然后将缓冲区传递给绘图线程，多线程导致单核性能下降。在双核上，速度提高了 5-10%，尽管在大约 500 个精灵时，由于缓冲区的原因，更新周期再次比绘制周期花费了更长的时间，从而限制了速度增益。显然，通过优化我可以改善这一点，但问题是是否值得以牺牲单核处理器为代价来支持多线程。是否可以确定手机的处理器以便在运行时确定是否使用多线程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T04:40:29.843

好吧，从技术上讲，1 个 CPU 一次只运行一个代码段。您的[操作系统调度程序](http://en.wikipedia.org/wiki/Operating_system#Multitasking)会在几毫秒内更改进程/线程，这让您产生同时运行多个进程的错觉。

通知运行时您的线程现在已完成的一种方法是调用[Thread.yield](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#yield%28%29)。您的代码中有一个繁忙的循环，这对您的情况没有帮助。它使 CPU 忙于不做任何事情。

```
while(otherBuffer.isFinished() == false) 
```

您应该使用[Loks](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/package-summary.html)而不是忙循环，或者您可以尝试`Thread.yield`在该 while 循环内调用以提高初始性能。顺便说一句，还要看看[信号量](http://en.wikipedia.org/wiki/Semaphore_%28programming%29)，它是解决此类生产者-消费者问题的最简单解决方案。如果要保留当前的代码库，可以对每个缓冲区使用一个锁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T05:10:50.970

像下面的类一样创建线程

```
class Threadcalling implements Runnable
    {

        @Override
        public void run() {
}
} 
```

所以像下面这样调用它

```
Thread t=new Thread(new Threadcalling ());
                  t.start(); 
```

您可以像这样创建许多线程类并将其称为并行。它不会产生任何问题。运作良好。

# android - 创建只有几个字符的字体

> ID：13812671
> 
> 赞同：1
> 
> 时间：2012-12-11T02:26:01.627
> 
> 标签：android

甚至不知道如何正确表达主题行，但我想做的是：

我想在我的应用程序中使用一些特殊字符，例如 x̄，它们不在系统的内置字体中。

我可以简单地使用其中的特定字符定义我自己的 ttf 字体，但我希望系统字体用于其他所有内容。

有没有办法指定“故障转移”字体？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T03:09:53.050

I think you can look at [Font Awesome](http://fortawesome.github.com/Font-Awesome/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T03:17:25.607

需要自己加载这个字体库，然后设置显示的字体。只能在运行时更改。

```
Typeface.createFromAsset(xxxxxx)
TextView.setTypeface(xxxx) 
```

# windows-phone-7 - Windows Phone 模拟器搞砸了..？

> ID：13812673
> 
> 赞同：0
> 
> 时间：2012-12-11T02:26:57.243
> 
> 标签：windows-phone-7

我正在尝试进入 Windows Phone 7.5/8 应用程序开发。我的模拟器有问题，主要是当我启动我的应用程序进行调试时它显得很奇怪，现在抛出这样的错误（我的代码正在工作，我知道，不知道为什么它会显示该错误）：

![旧截图](../Images/7b20d94655eaca1feba919e485c12f07.png)

* * *

抱歉，我在代码中发现了一个错误，导致它无法显示键入的文本，但在我修复代码后它仍然会弄乱模拟器。查看新的屏幕截图：

![新截图](../Images/6a37b49c2cfc823a838a860eacc7f2ec.png)

基本上，当我单击 OSK 上的任何键盘按钮时，按钮会粘住（不会继续打字，但会在视觉上粘住）。此外，如您所见，整个应用程序不会显示，仅显示屏幕上有元素的地方。有任何想法吗）？

任何帮助表示赞赏。谢谢！

* * *

好的，这里还有一些关于这个问题的图片，其中一个不同的应用程序不使用 TextBox 控制器。如果仍然需要，我可以同时提供 TextBox 应用程序和新应用程序的代码。谢谢！ ![点击前](../Images/6c89ab96e6f2a1b3061ff5fb3d367b92.png) ![点击后](../Images/a2129fdb778662a2205537354edb8672.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:21:21.980

我很确定您运行在具有 Intel GMA 4000 的系统上。问题出在显卡驱动程序上，我认为它们没有更新。有一种解决方法可以让您正确截取应用程序的屏幕截图：

1.  在此处下载 Silverlight Windows Phone 工具包：http: [//silverlight.codeplex.com/releases/view/75888](http://silverlight.codeplex.com/releases/view/75888)
2.  安装它。
3.  `Microsoft.Phone.Controls.Toolkit.dll`在您的项目中，添加对位于以下位置的文件的引用：

4.  在`App.xaml.cs`（下`App.xaml`）中，转到该行

`RootFrame = new PhoneApplicationFrame();`

并将其更改为：

`RootFrame = new TransitionFrame();`
5\. 运行模拟器，故障图形关闭。

当您想发布您的应用程序，或在其他环境或设备中进行测试时，您必须将我们更改的行恢复到其原始状态。（我不知道它是做什么的，但可以肯定的是，它位于用户不应该接触的区域）。

# php - PHP mail() 不能在 web 服务器上使用 msmtp，通过 SSH 可以正常工作

> ID：13812674
> 
> 赞同：0
> 
> 时间：2012-12-11T02:27:00.303
> 
> 标签：php, email

当我使用这个命令时 PHP mail() 工作正常

```
php -r "mail('pzuraq@gmail.com', 'Test Email', 'Test email body');" 
```

但是，当我尝试通过网页运行它时，它不起作用。我在 /etc/msmtprc 中使用了一个全局配置文件，虽然我正在考虑尝试复制它并将所有权授予 apache，因为显然 msmtp 对配置文件和权限很奇怪（当前用户必须拥有该文件和权限必须为 600），但这不适用于全局配置。

当我`mail()`在网页上运行该函数时，它返回 false 并且不会在日志中打印任何错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T02:29:14.453

关键是你有不同`php.ini`的 cli & apache php 可执行文件。因此，您的 cli php.ini 版本已按预期配置，但您的 apache php.ini（或者，更确切地说，**您的 Web 服务器** `php.ini`可能未正确配置。

也就是说，命令行 php 和 web php 使用不同的配置。

# c++ - LNK2001：未解析的外部符号 - 使用 zlib 读取 zip 文件

> ID：13812678
> 
> 赞同：0
> 
> 时间：2012-12-11T02:28:02.293
> 
> 标签：c++, zlib

我只是想通过读取文件来测试 zlib，但我遇到了一些麻烦。这是我的代码

```
 #include <iostream>
#include <string>
#include "contrib\minizip\unzip.h"

unzFile readUnzip(char *filename)
{
    unzFile myFile=unzOpen(filename);

    return myFile;
}

int main () {

    unzFile myFile=readUnzip("filepath");

} 
```

发生错误，即错误 LNK2001: unresolved external symbol _unzOpen 我不确定这是为什么，我包含了正确的头文件，不是吗？

# objective-c - 自定义块上的 EXC_BAD_ACCESS

> ID：13812692
> 
> 赞同：1
> 
> 时间：2012-12-11T02:29:01.693
> 
> 标签：objective-c, objective-c-blocks

我在一个类中定义了一个块：

BXButton.h

```
typedef void(^ButtonClicked)(id sender, NSDictionary *userInfo);
@property (assign, nonatomic) ButtonClicked onButtonClicked;
- (void)setClickBlock:(ButtonClicked)buttonClicked; 
```

BXButton.m

```
- (void)setClickBlock:(ButtonClicked)buttonClicked {
    onButtonClicked = buttonClicked;
}
- (void)internalButtonClicked {
    DLog(@"internal clicked");
    if (self.onButtonClicked) {
        onButtonClicked(self, self.userInfo);
    }
} 
```

我试图在视图控制器中这样调用：

```
[_testButton setClickBlock:^(BXButton *sender, NSDictionary *userInfo) {
        DLog(@"userInfo %@", userInfo);
        [sender startLoading];
        [[BXAPIClient sharedPublicClient]postPath:@"/" parameters:nil success:^(AFHTTPRequestOperation *operation, id responseObject) {
            [sender endLoading];
            //[safeSelf stop];
        } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
            [sender endLoading];
            [self stop];
        }];
    }]; 
```

每当我尝试访问 [self 方法] 或在块之外定义的任何变量时，我总是得到 BAD_ACCESS。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-11T04:34:10.503

你得到的原因`EXC_BAD_ACCESS`是因为默认情况下在堆栈上创建块，所以如果你用一个`assign`属性引用它们，当堆栈被拆除时它们将不再存在。

为了解决这个问题，您应该将块复制到堆中。一种方法是在定义属性时使用`copy`而不是。`assign`

将您的声明更改为

```
@property(copy, nonatomic) ButtonClicked onButtonClicked; 
```

并在分配块时使用它的 setter/getter 而不是直接访问 ivar

```
- (void)setClickBlock:(ButtonClicked)buttonClicked {
    self.onButtonClicked = buttonClicked;
}
- (void)internalButtonClicked {
    DLog(@"internal clicked");
    if (self.onButtonClicked) {
        self.onButtonClicked(self, self.userInfo);
    }
} 
```

# android - 在 ListView 的顶部和底部添加空间，以便顶部和底部项目可以居中

> ID：13812695
> 
> 赞同：0
> 
> 时间：2012-12-11T02:29:11.450
> 
> 标签：android, listview

我的 ListView 项目在被选中时需要居中，但顶部和底部项目停止在列表的顶部或底部。如何居中顶部和底部的项目？

这是我的测试布局：

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
       android:id="@+id/parent"
       android:layout_width="fill_parent"
       android:layout_height="fill_parent"
       android:clipChildren="false"
       android:clipToPadding="false"
       android:gravity="top" >

       <ListView
           android:id="@+id/listview"
          android:layout_width="match_parent"
          android:layout_height="match_parent"
          android:layout_centerVertical="true"
          android:clipChildren="false"
          android:clipToPadding="false" >
       </ListView>

    </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T13:55:02.627

我找不到裁剪问题的解决方案，所以我向 ListView 添加了页眉和页脚。我将 ListView 的高度改回 match_parent，然后，使用 ListView 父视图上的 post 方法，我能够计算出页眉和页脚的高度，如下所示：

```
// this call should be included in the onCreate method
// the post method is called after parentView is ready to be added
// so the parentView's height and width can be used
parentView.post(addSpace(parentView, myListView)); 

private Runnable addSpace(final RelativeLayout parent, final ListView list) {
    return new Runnable(){
        public void run() {
            // create list adapter here or in the onCreate method
            // R.layout.list_item refers to my custom xml layout file
            adapter = new ArrayAdapter<String>(MainActivity.this, R.layout.list_item, values);
            // calculate size and add header and footer BEFORE applying adapter
            // listItemHeight was calculated previously
            spacerSize = (parent.getHeight()/2) - (listItemHeight/2);
            list.addHeaderView(getSpacer(), null, false);
            list.addFooterView(getSpacer(), null, false);
            list.setAdapter(adapter);
        }
    }
}

// I used a function to create my spacers   
private LinearLayout getSpacer(){
    // I used padding instead of LayoutParams thinking it would be easier to
    // change in the future. It wasn't, but still made resizing my spacer easy
    LinearLayout    spacer = new LinearLayout(MainActivity.this);
                    spacer.setOrientation(LinearLayout.HORIZONTAL);
                    spacer.setPadding(parentView.getWidth(), spacerSize, 0, 0);
    return spacer;
} 
```

使用这种方法，我能够在我的 ListView 的顶部和底部添加适当的间距，因此当我一直滚动到顶部时，顶部项目出现在我的视图中心。

问题：我的应用程序允许用户隐藏底部界面元素，这应该使我的父母更高。我正在想办法让我的页眉和页脚动态变高，但我可能需要简单地删除 ListView 并使用更大的页眉和页脚重新创建它。

我希望这可以帮助某人摆脱数小时的沮丧:)

# python - 如何在 python 中绘制两个变量的数学表达式？

> ID：13812697
> 
> 赞同：4
> 
> 时间：2012-12-11T02:29:13.607
> 
> 标签：python, matplotlib

我有一个随时间变化和随深度变化的函数，简化为：

```
def f(z,t):
    return np.exp(-z)*np.sin(t-z)

z = np.linspace(0,3000,num=3001)
t = np.arange(0,40000,4000) 
```

我想在 t 中的每个时间步绘制所有 z 的结果，结果如下：

![在此处输入图像描述](../Images/5ef5e521ce14bbcbe53e386452c62588.png)

但我不知道怎么做。我敢肯定这很简单，但我不习惯在 python 中这样做。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-11T02:51:12.143

```
import matplotlib.pyplot as plt
import numpy as np

def f(z,t):
    return np.exp(-z)*np.sin(t-z)

z = np.linspace(0,5,3001)
t = np.arange(0,40000,4000)

for tval in t:
    plt.plot(z, f(z, tval))
plt.show() 
```

![在此处输入图像描述](../Images/7d1352ca535c9e778bc461412c82463f.png)

# jquery - 如何在循环中显示 div

> ID：13812701
> 
> 赞同：-1
> 
> 时间：2012-12-11T02:29:39.237
> 
> 标签：jquery, html

例如，我有一个等于 news1 或 news2 的链接 ID 等等！发生的情况是，如果我将鼠标悬停在链接上，它会显示如下信息

```
<div id="nc1">

<table>
<tr>
<td colspan="2">Nulla venenatis rhoncus libero ac interdum. </td>
</tr>
<tr> <td colspan="2">is a long established fact that a reader will be distracted by the <br>readable content of a page when looking at its layout. 
<br>The point of using Lorem Ipsum is that it has a more-or-less normal
 <br>distribution of letters, as opposed to using 'Content here, content here', <br>making it look like 
</tr>
<tr>
<td><a href="#" id="hide">Hide</a></td>
<td>Read More</td>
</tr>   
</table>
</div> 
```

这是我的脚本

```
$("#news1").hover(function(){
$("#nc1").fadeIn();
}); 
```

我怎样才能循环这个链接而不使它们成为一个函数

```
 <td><a id="news1" href="#">Nulla venenatis rhoncus libero ac interdum.  </a></td>
</tr>
<tr>
<td>Decemeber 09,2012</td>
<td><a id="news2" href="#">Proin gravida placerat nulla, euismod consectetur mauris tincidunt a. </a></td>
</tr>
<tr>
<td>Decemeber 09,2012</td>
<td><a id="news3" href="#"> euismod consectetur mauris tincidunt a. </a></td>
</tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T02:32:12.133

像这样：

```
$("#news1").hover(function(){
     for (var i = 1; i < NumberOfDivs; i++){
         $("#nc"+i).fadeIn();
     }
}); 
```

# c++ - 向量上的 C++11 emplace_back ?

> ID：13812703
> 
> 赞同：108
> 
> 时间：2012-12-11T02:29:49.493
> 
> 标签：c++, c++11

考虑以下程序：

```
#include <string>
#include <vector>

using namespace std;

struct T
{
    int a;
    double b;
    string c;
};

vector<T> V;

int main()
{
    V.emplace_back(42, 3.14, "foo");
} 
```

它不起作用：

```
$ g++ -std=gnu++11 ./test.cpp
In file included from /usr/include/c++/4.7/x86_64-linux-gnu/bits/c++allocator.h:34:0,
                 from /usr/include/c++/4.7/bits/allocator.h:48,
                 from /usr/include/c++/4.7/string:43,
                 from ./test.cpp:1:
/usr/include/c++/4.7/ext/new_allocator.h: In instantiation of ‘void __gnu_cxx::new_allocator<_Tp>::construct(_Up*, _Args&& ...) [with _Up = T; _Args = {int, double, const char (&)[4]}; _Tp = T]’:
/usr/include/c++/4.7/bits/alloc_traits.h:253:4:   required from ‘static typename std::enable_if<std::allocator_traits<_Alloc>::__construct_helper<_Tp, _Args>::value, void>::type std::allocator_traits<_Alloc>::_S_construct(_Alloc&, _Tp*, _Args&& ...) [with _Tp = T; _Args = {int, double, const char (&)[4]}; _Alloc = std::allocator<T>; typename std::enable_if<std::allocator_traits<_Alloc>::__construct_helper<_Tp, _Args>::value, void>::type = void]’
/usr/include/c++/4.7/bits/alloc_traits.h:390:4:   required from ‘static void std::allocator_traits<_Alloc>::construct(_Alloc&, _Tp*, _Args&& ...) [with _Tp = T; _Args = {int, double, const char (&)[4]}; _Alloc = std::allocator<T>]’
/usr/include/c++/4.7/bits/vector.tcc:97:6:   required from ‘void std::vector<_Tp, _Alloc>::emplace_back(_Args&& ...) [with _Args = {int, double, const char (&)[4]}; _Tp = T; _Alloc = std::allocator<T>]’
./test.cpp:17:32:   required from here
/usr/include/c++/4.7/ext/new_allocator.h:110:4: error: no matching function for call to ‘T::T(int, double, const char [4])’
/usr/include/c++/4.7/ext/new_allocator.h:110:4: note: candidates are:
./test.cpp:6:8: note: T::T()
./test.cpp:6:8: note:   candidate expects 0 arguments, 3 provided
./test.cpp:6:8: note: T::T(const T&)
./test.cpp:6:8: note:   candidate expects 1 argument, 3 provided
./test.cpp:6:8: note: T::T(T&&)
./test.cpp:6:8: note:   candidate expects 1 argument, 3 provided 
```

这样做的正确方法是什么，为什么？

（也试过单双括号）

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2012-12-11T03:41:14.417

您需要为该类显式定义一个 ctor：

```
#include <string>
#include <vector>

using namespace std;

struct T
{
    int a;
    double b;
    string c;

    T(int a, double b, string &&c) 
        : a(a)
        , b(b)
        , c(std::move(c)) 
    {}
};

vector<T> V;

int main()
{
    V.emplace_back(42, 3.14, "foo");
} 
```

使用`emplace_back`的目的是避免创建一个临时对象，然后将其复制（或移动）到目的地。虽然也可以创建一个临时对象，然后将其传递给`emplace_back`，但它（至少大部分）破坏了目的。您要做的是传递单个参数，然后让`emplace_back`使用这些参数调用 ctor 以在适当的位置创建对象。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2020-04-14T10:18:51.833

对于未来的任何人，这种行为[将](http://wg21.link/p0960)在[C++20](https://en.cppreference.com/w/cpp/language/aggregate_initialization)中改变。

换句话说，即使内部实现仍然会调用`T(arg0, arg1, ...)`它，它也会被视为`T{arg0, arg1, ...}`您所期望的常规。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2012-12-11T02:51:58.633

当然，这不是答案，但它显示了元组的一个有趣特性：

```
#include <string>
#include <tuple>
#include <vector>

using namespace std;

using T = tuple <
    int,
    double,
    string
>;

vector<T> V;

int main()
{
    V.emplace_back(42, 3.14, "foo");
} 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-12-12T17:15:28.070

如果您不想（或不能）添加构造函数，请专门为 T 分配分配器（或创建您自己的分配器）。

```
namespace std {
    template<>
    struct allocator<T> {
        typedef T value_type;
        value_type* allocate(size_t n) { return static_cast<value_type*>(::operator new(sizeof(value_type) * n)); }
        void deallocate(value_type* p, size_t n) { return ::operator delete(static_cast<void*>(p)); }
        template<class U, class... Args>
        void construct(U* p, Args&&... args) { ::new(static_cast<void*>(p)) U{ std::forward<Args>(args)... }; }
    };
} 
```

注意：上面显示的成员函数构造不能用 clang 3.1 编译（对不起，我不知道为什么）。如果您将使用 clang 3.1（或其他原因），请尝试下一个。

```
void construct(T* p, int a, double b, const string& c) { ::new(static_cast<void*>(p)) T{ a, b, c }; } 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-12-11T04:05:56.840

这似乎包含在 23.2.1/13 中。

一、定义：

> 给定一个容器类型 X，其分配器类型与 A 相同，值类型与 T 相同，并且给定 A 类型的左值 m、T* 类型的指针 p、T 类型的表达式 v 和 T 类型的右值 rv，定义了以下术语。

现在，是什么让它可以就地构建：

> T is EmplaceConstructible into X from args ，对于零个或多个参数 args，意味着以下表达式是格式良好的：allocator_traits::construct(m, p, args);

最后是关于构造调用的默认实现的注释：

> 注意：容器调用 allocator_traits::construct(m, p, args) 以使用 args 在 p 处构造元素。std::allocator 中的默认构造将调用 ::new((void*)p) T(args)，但专门的分配器可能会选择不同的定义。

这几乎告诉我们，对于一个默认（并且可能是唯一的）分配器方案，您*必须*已经定义了一个构造函数，该构造函数具有正确数量的参数，用于您试图将构建到容器中的东西。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-12-11T02:34:53.037

您必须为您的类型定义一个构造函数，`T`因为它包含一个`std::string`不是微不足道的。

此外，最好定义（可能默认）移动 ctor/assign （因为您有一个可移动`std::string`的成员）——这将有助于提高您`T`的移动效率......

或者，只需按照 neighboug 响应中的建议`T{...}`调用重载`emplace_back()`...一切都取决于您的典型用例...

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2019-10-26T21:21:56.840

您可以创建`struct T`实例，然后将其移动到向量：

```
V.push_back(std::move(T {42, 3.14, "foo"})); 
```

# facebook - 将 youtube 视频从我的网站分享到新闻源

> ID：13812707
> 
> 赞同：0
> 
> 时间：2012-12-11T02:30:25.703
> 
> 标签：facebook, facebook-sharer

我正在尝试构建一个应用程序，其中包含 youtube 视频（每个视频都有一个唯一的 url）。我需要在每个视频下方放置分享按钮，该按钮可以将 youtube 视频分享到我网站上的 facebook 新闻提要。

我试图实现这一点，但只有 URL 被共享。我希望我的应用程序能像 youtube 那样工作。. 当 youtube 视频 url 被复制并粘贴到 facebook 墙上时，它会生成一个带有描述的播放器。此外，当 youtube 视频直接从网站共享时，它也是如此。

请根据上述要求给我一些建议来完成这项工作。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T02:47:05.883

我建议你看看这个问题：[Posting an embedded video link using the Facebook Graph API](https://stackoverflow.com/questions/5227607/posting-an-embedded-video-link-using-the-facebook-graph-api)

# unix - 索引节点和块大小的概念

> ID：13812708
> 
> 赞同：0
> 
> 时间：2012-12-11T02:30:25.443
> 
> 标签：unix, size, block, inode, concept

所以我在做一些考试复习题，其中一个说“在 UNIX 系统 V 中，一个块的长度是 1 KB，每个块可以容纳总共 256 个块地址。使用 inode 方案，最大值是多少文件大小？”

现在具有讽刺意味的是教授提供的解决方案，我理解单、双和三间接分配背后的数学/逻辑，这是直接分配让我感到困惑。

根据解决方案，直接分配方案使用 10 个块，因为 2^10 字节 = 1 KB。为什么？这个公式背后的原因是什么？UNIX System V inode 的发明者只是想出了一个任意数字吗？因为对我来说，1024 个字节有 10 个指针是没有意义的，因为 1024/10 = 每 102.4 个字节一个地址，所以有 8 个或其他数字会更合乎逻辑。

教授暗示在我们的期末考试中很可能会有这样的问题，我宁愿不要冒险使用我不明白的千篇一律的公式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T03:20:15.720

我敢肯定，谷歌本可以比在这里询问更快更容易地给你一个非常完整的答案，事实上即使在这里我也得到了 3,145 个包含“inode 间接块”的帖子的搜索结果，但既然你确实在这里问过，那就去吧回答：

好吧，磁盘上的 inode 结构只能容纳一定数量的块地址，以及它必须包含的所有其他信息，如果它要适合一个块本身的话。

在 SysV inode 的情况下，有 40 个字节的数据块地址空间，这被分解为 13 个 3 字节地址，剩下一个字节用于“文件生成号”（您可以在此处忽略）。

那么，您有 13 个地址，您将如何有效地使用它们来处理包含不止 13 个数据块的文件的文件数据块？

决定是使用前 10 个作为直接地址——即它们直接识别哪个块是文件的第 1-10 个数据块。第 11'th、12'th 和 13'th 地址指向间接块：分别是单个间接块、双间接块和三间接块。

正如问题所指出的，每个间接块可以容纳 256 个地址。因此，您只需将它们相乘并将它们相加，考虑到第一个间接块的地址集直接指向数据块，双间接块首先指向更多数据块地址块，而三重间接块的地址集直接指向数据块地址。间接块指向指向更多指向数据块地址的指针块的指针块。

这个页面有一个很好的图表，在这种情况下，如果没有这样的图表，你的困惑可能不会被清除。请注意，此页面讨论的细节与严格的 SysV 磁盘格式略有不同（它有更直接的块，并且：

[了解 Unix 文件系统中的间接块](http://computer-forensics.sans.org/blog/2008/12/24/understanding-indirect-blocks-in-unix-file-systems/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T03:08:37.200

With a single block of 1024 bytes and 4-byte pointers, you can store 1024 / 4 = 256 pointers. If each file has a single block for i-nodes then you get 256 * 1024, i.e., 256KB files. I don't know where that 10 blocks come from though.

# javascript - 循环二维关联数组的最有效方法？

> ID：13812710
> 
> 赞同：0
> 
> 时间：2012-12-11T02:30:34.880
> 
> 标签：javascript, multidimensional-array, matrix

我有一个二维关联数组，其中包含需要在 html5 画布中绘制的块图。

目前完成它大约需要 28 毫秒，这太多了（我每秒运行代码 60 次），我需要以某种方式更有效地运行矩阵。这是我的代码：

```
for(var x=0; x<Object.keys(matrix).length; x++){ // Run through cols
    col = Object.keys(matrix)[x];
    for(var y=0; y<matrix[col].length; y++){ // Run though rows
        row = Object.keys(matrix[col])[y];
        if(matrix[col][row] != '0'){
            drawRect(col,row,blockSize,blockSize);
            }
        }
    } 
```

我希望它效率低下，并且可以纠正一些问题。如何最有效地循环二维数组的总数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T02:37:46.587

您必须使用双 for 循环来循环整个二维数组。与尝试加速任何存在性能问题的代码一样，第一步是找出花费最多时间的内容，并首先在问题的那个元素上进行优化。

可能的猜测是 drawRect 比循环中的任何问题都花费更多的时间，但是如果您想加快其余代码的速度，您可以执行以下操作：

1.  缓存`Object.keys(matrix)`，因此不会不断重新计算
2.  缓存每个循环的停止值，`for`因此每次循环都不会重新计算它
3.  缓存列键，因此不会每次通过内部循环重新计算
4.  缓存矩阵列

该代码如下所示：

```
var keys = Object.keys(matrix);
for(var x = 0, lenX = keys.length; x < lenX; x++) { // Run through cols
    col = keys[x];
    var colKeys = Object.keys(matrix[col]);
    var matrixCol = matrix[col];
    for(var y = 0, lenY = matrix[col].length; y < lenY; y++) { // Run though rows
        row = colKeys[y];
        matrixCol[row] != '0'){
            drawRect(col,row,blockSize,blockSize);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T02:38:10.480

您应该首先查看花费最长时间的内容。我敢打赌，drawRect 函数是最慢的。不要绘制矩形，而是尝试打印到控制台（或在屏幕上书写）并查看需要多少时间。然后，您可以计算 drawRect 执行 1 次操作需要多少时间。我认为这可能是你的问题，drawRect 需要很长时间才能绘制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T02:45:40.557

您可以尝试这样做以减少循环内的评估

```
var m = Object.keys(matrix), mc, x = 0, xlen = m.length, col, mcol, y, ylen, row;
for(;x < xlen; x++) {
  col = m[x];
  mc = matrix[col];
  for(y = 0, ylen = mc.length; y < ylen; y++) {
    row = mc[y];
    if(mc[row] != '0') {
      drawRect(col, row, blockSize, blockSize);
    }
  }
} 
```

这里的要点是减少对对象键的评估需求。不知道如何减少，因为我不知道这些功能在做什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T02:36:46.377

尝试这个。

```
for(var x=0, xlimit=Object.keys(matrix).length; x<xlimit; x++){ // Run through cols
    col = Object.keys(matrix)[x];
    for(var y=0, ylimit=matrix[col].length; y<ylimit; y++){ // Run though rows
        row = Object.keys(matrix[col])[y];
        if(matrix[col][row] != '0'){
            drawRect(col,row,blockSize,blockSize);
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T06:55:42.787

感谢一些建议缓存大量变量的答案，我将绘图从 30 毫秒缩短到 20 毫秒。

但是今天我设法通过删除 Object.keys() 将其缩短到 1 毫秒，并且因为我知道键所在的范围，所以我更改了 x 和 lenX 以预选范围。与 y 和 lenY 相同。加载时间几乎不会随着矩阵的大小而变化。（我已经测试了一个 100 倍大的矩阵，它只需要 2 毫秒）。

```
minX = Math.floor(cameraPos.x/blockSize)*blockSize;
minY = Math.floor(cameraPos.y/blockSize)*blockSize;
maxX = minX+WIDTH+blockSize;
maxY = minY+HEIGHT+blockSize;
for(var col = minX; col < maxX; col+=blockSize) { // Run through cols
    for(var row = minY; row < maxY; row+=blockSize) { // Run though rows
        if(typeof matrix[col] !== "undefined" && typeof matrix[col][row] !== "undefined"){
            drawRect(xFix(col),yFix(row),blockSize,blockSize,blockColors[matrix[col][row]]);
        }
    }
} 
```

尽管该功能非常快，但它最终会开始缩放，为了消除所有缩放并且理论上能够使游戏地图大得离谱，我开始在每次相机滚动一定距离时缓存地图（现在它是屏幕宽度的两倍，但可能更多）。由于要缓存的区域使用与此类似的功能进行过滤，因此几乎可以立即完成。

```
var cached = [];
function cacheMap() {
    if(cached['pos'] === undefined || cameraPos.x < cached['pos']['x']-WIDTH || cameraPos.x > cached['pos']['x']+WIDTH || cameraPos.y < cached['pos']['y']-HEIGHT || cameraPos.y > cached['pos']['y']+HEIGHT) {
        cached['map'] = filterMatrix(map,cameraPos.x-WIDTH-blockSize*5,cameraPos.y-HEIGHT-blockSize*5,WIDTH*3+blockSize*10,HEIGHT*3+blockSize*10);
        cached['pos'] = {'x':cameraPos.x,'y':cameraPos.y};
        console.log('cached map');
        }
    } 
```

# ruby-on-rails - Shoulda/RSpec 匹配器 - 条件验证

> ID：13812717
> 
> 赞同：71
> 
> 时间：2012-12-11T02:31:31.437
> 
> 标签：ruby-on-rails, ruby, rspec, shoulda

在我的代码中，我使用 Shoulda 匹配器进行了以下验证，效果很好：

```
it { should validate_presence_of(:name) } 
```

在我的模型中，我已将条件添加到我的验证中：

```
validates_presence_of :name, :if => eligible? 
```

是否可以在验证中反映它？

我试过查看 shoulda 匹配器的[文档](https://github.com/thoughtbot/shoulda-matchers)，但无法找到解决方案。

非常感谢！

* * *

## 回答 #1

> 赞同：145
> 
> 时间：2012-12-11T02:48:18.650

shoulda_matchers 似乎没有这样做，但是自己编写它很容易::

```
 context "if eligible" do
    before { allow(subject).to receive(:eligible?).and_return(true) }
    it { should validate_presence_of(:name) }
  end

  context "if ineligible" do
    before { allow(subject).to receive(:eligible?).and_return(false) }
    it { should_not validate_presence_of(:name) }
  end 
```

# c++ - 来自 Deconstructor 的调试断言失败 BLOCK_TYPE_IS_VALID(pHead->nblockuse)

> ID：13812718
> 
> 赞同：0
> 
> 时间：2012-12-11T02:31:38.547
> 
> 标签：c++, memory-leaks, destructor, object-slicing

我现在很迷茫。我做了一个矢量类。一切都按照我希望的方式工作，直到最后。当调用析构函数时，我收到一条错误消息：调试断言失败 BLOCK_TYPE_IS_VALID(pHead->nblockuse)。我在 SO 上看到过很多类似这样的问题，但是我尝试过的方法没有奏效。

.h 的一部分

```
private:
    int* _myArray;
    int _size;
    int _capacity;

#include "File.h"

 const string RETURN_CARRIAGE_STR = "\n";
 const string SIZE_STR = "Size ";
 const string CAPACITY_STR = "Capacity ";
 const int INITIAL_CAPACITY = 2;

 int main(void)
{
cout << "\nCreating a vector Sam of size 4.";
MyVector sam( 4 );

cout << "\nPush 12 values into the vector.";
for (int i = 0; i < 12; i++)
    sam.push_back(i);

cout << "\nHere is sam: ";
cout << sam;
cout << "\n---------------\n";

    cout << "\nCreating a vector Joe of size 4.";
MyVector joe( 4 );
cout << "\nPush 6 values into the vector.";
for (int i = 0; i < 6; i++)
    joe.push_back(i * 3);

cout << "\nHere is joe: ";
cout << joe;
cout << "\n---------------\n";

cout << "\nTest the overloaded assignment operator \"joe = sam\": ";
joe = sam;

cout << "\nHere is sam: ";
cout << sam;
cout << "\n---------------\n";

cout << "\nHere is joe: ";
cout << joe;
cout << "\n---------------\n";

// pass a copy of sam by value
PrintV(sam);

cout << endl;
system("PAUSE");
 }

 void PrintV(MyVector v)
 {
cout << "\n--------------------\n";
cout << "Printing a copy of a vector\n";
cout << v;
 }

 // Default Constructor
 MyVector::MyVector()
 {
_myArray = new int[INITIAL_CAPACITY];
_size = 0;
_capacity = INITIAL_CAPACITY;
//cout << "Default Constructor" << endl;
 }

 MyVector::MyVector(int aSize)
 {
_myArray = new int[aSize];
_size = 0;
_capacity = aSize;

//cout << "Parameterized Constructor" << endl;
 }

 MyVector::~MyVector()
 {
if(_myArray != NULL)
{
    delete[] this->_myArray; //  --------------This is where I get an error
    this->_myArray = NULL;
}

//cout << "Destructor" << endl;
 }

 int MyVector::GetSize()
 {
return _size;
//cout << " size";
 }

 int MyVector::GetCapacity()
 {
return _capacity;
//cout << _capacity << " capacity" << endl;
 }

 void MyVector::Clear()
 {
int* resize_arr = new int[INITIAL_CAPACITY];
delete[] _myArray;
_myArray = resize_arr;
_capacity = INITIAL_CAPACITY - 1;
_size = 0;
 }

 void MyVector::push_back(int newValue)
 {
if(_size < _capacity)
{
    _myArray[_size] = newValue;
}
else  {
    int* resize_arr = new int[_capacity*2];
    for(int i = 0; i <= _size; i++)
        resize_arr[i] = _myArray[i];

    resize_arr[_size] = newValue;
    delete[] _myArray;
    _myArray = resize_arr;
    _capacity = _capacity * 2;
}
_size++;
//cout << _size << " size" << endl;
 }

 int MyVector::at(int idx)
 {
return _myArray[idx];
//cout << _myArray[idx] << " value at index" << endl;
 }

 ostream& operator<<(ostream& os, MyVector& vec)
 {
ostringstream convert;
ostringstream convertCap;
convert << vec.GetSize();
string sizeConverted = convert.str();
convertCap << vec.GetCapacity();

string capConverted = convertCap.str();
string firstTemp = "";
firstTemp = SIZE_STR + sizeConverted  + RETURN_CARRIAGE_STR + CAPACITY_STR + capConverted + RETURN_CARRIAGE_STR;

for(int idx = 0; idx < vec.GetSize(); idx++)
{
    string secondTemp = "";
    ostringstream convertSize;
    convertSize << vec.at(idx);
    string vecAtIdx = convertSize.str();
    secondTemp = vecAtIdx + RETURN_CARRIAGE_STR;
    cout << secondTemp;
}

os <<  firstTemp;
return os;
 }

 MyVector& MyVector::operator=(MyVector& setterVect)
 {
delete [] _myArray;

//MyVector* mPtr = new MyVector();

_myArray = setterVect._myArray;
_capacity = setterVect._capacity;
_size = setterVect._size;

return *this;
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T02:41:53.323

```
_myArray = setterVect._myArray; 
```

您的复制分配运算符已损坏。在该运算符之后，两个实例具有相同的`_myArray`. 因此，一旦一个被破坏，另一个就会留下一个指向不再存在的东西的指针。

而故事的寓意——使用`std::vector`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T03:11:34.893

该错误意味着堆损坏。有很多方法可以破坏堆。就像上面大卫解释的那样，释放一块内存然后写入它是一种方法。

大多数堆在您的内存块之前和之后存储一些簿记信息字节。如果您的代码行为不端并更改了堆数据，则会出现此类错误。

# php - 将带有特殊字符的文本从 MySQL/PHP 导出到 Excel

> ID：13812720
> 
> 赞同：1
> 
> 时间：2012-12-11T02:31:40.530
> 
> 标签：php, html, mysql, excel, export

我需要从 MySQL 数据库中导出一些数据。问题是我在其中扩展了拉丁字符，例如 Š Đ Ć Č Ž，当我进行经典导出时，我的单词看起来像：ÄorÄ'eviÄ‡ 或 BoÅ¾iloviÄ‡，应该看起来像 Đorđević / Božilović

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:09:58.767

这个问题的第一个答案解决了问题：[PHP_excel 的替代方案](https://stackoverflow.com/questions/3930975/alternative-for-php-excel)

文件：http: [//github.com/elidickinson/php-export-data](http://github.com/elidickinson/php-export-data)

@Mark Ba​​ker-谢谢！

# python - For 循环，无法分配函数调用 - 尝试在 for 循环中创建变量

> ID：13812726
> 
> 赞同：0
> 
> 时间：2012-12-11T02:31:55.487
> 
> 标签：python, loops, for-loop, assign

所以我试图重新创建这个：

```
 self.button1 = tkinter.Button(self.user_frame, image = self.image1, state = 'disabled', command = self.press1)
    self.button1.pack(side = 'left')
    self.buttonList.append(self.button1)

    self.button2 = tkinter.Button(self.user_frame, image = self.image2, state = 'disabled', command = self.press2)
    self.button2.pack(side = 'left')
    self.buttonList.append(self.button2)

    self.button3 = tkinter.Button(self.user_frame, image = self.image3, state = 'disabled', command = self.press3)
    self.button3.pack(side = 'left')
    self.buttonList.append(self.button3) 
```

等..直到self.button10。

有了这个：

```
for x in range [1, 11]:
        self.button(x)=tkinter.Button(self.user_frame, image=self.image(x), state = 'disabled', command = self.press(x))
        self.button(x).pack(side='left')
        self.buttonList.append(self.button(x)) 
```

我得到语法错误：无法分配给函数调用。我知道这与我如何命名按钮有关，但我无法弄清楚。有小费吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T02:38:25.610

你有大量的语法错误。不是`range [1, 11]`，是`range(1, 11)`。您不能分配给`self.button(x)`- 尝试`self.button`使用参数调用函数`x`。

为什么不只使用按钮列表？这会简单得多。

无论如何，使用类似的东西`self.__setattr__("button" + str(x), <the new button>)`

# ios - 并行 GCD 块中的每线程数据？（从 OpenMP 翻译）

> ID：13812727
> 
> 赞同：1
> 
> 时间：2012-12-11T02:32:10.060
> 
> 标签：ios, parallel-processing, openmp, grand-central-dispatch

我正在将一些 OpenMP 并行循环移植到 GCD 以在 iOS 上使用。我遇到了一个我不确定如何最好地建模的构造。

OpenMP 循环对共享状态块执行一些重要的操作，它为每个可能的 OpenMP 线程分配一个，然后在循环之后组合（实际上是减少）结果。像这样（简化）：

```
const int max_threads = omp_get_max_threads();
state_block state[max_threads];

#pragma omp parallel for shared(state) 
for(unsigned int i = 0; i < some_count; i++) {
    // do some stuff
    update_state(state[omp_get_thread_num()]);
}

merge_state_data(state, max_threads); 
```

GCD 没有提供一种方法来了解可能的最大线程数是多少（是吗？）或您当前在哪个线程上，因此这种模式不起作用。状态块的大小很重要，并且迭代次数很大，因此为循环的每次迭代分配一个作为纯粹的最坏情况也是不合理的。

可以想象，我可以使用自定义调度源`DISPATCH_SOURCE_TYPE_DATA_ADD`来进行状态更新，但如果我这样原子化它，将需要数千个源，这似乎是错误的。

有什么我缺少的东西，无论是 GCD 还是这里的设计？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:37:20.700

您可以使用 POSIX 线程 API 函数`pthread_setspecific()`和`pthread_getspecific()`在 iOS 上设置特定于线程的键，该键指向一个临时`state_block`对象，并稍后在当前执行的块中检索它。Apple 的[并发编程指南](https://developer.apple.com/library/mac/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/ThreadMigration/ThreadMigration.html#//apple_ref/doc/uid/TP40008091-CH105-SW1)不建议使用`pthread_getspecific()`，因为它可能会在不同的块运行中返回不同的值，但在您的情况下这是完全可以接受的（毕竟，这是您正在寻找的功能）。

由于您没有事先访问池的权限，因此您必须按需分配状态块：

*   用于`pthread_getspecific()`获取`state_block`当前线程中的指针；
*   如果未设置特定值，则分配一个新值`state_block`并将其分配给键的值，使用`pthread_setspecific()`;
*   用那个计算`state_block`。

这可能会导致清理工作出现问题，例如考虑在所有任务执行后如何处理状态块。您可能希望使用指针共享表并将表中的唯一索引设置为线程特定值或类似值。您可以使用锁来序列化对索引值的访问——这是可以接受的，因为它只会在池中的每个线程中执行一次。

当然，这种方式依赖于 GCD 使用一个固定的线程池来实现它的并发队列。

# linux - awk linux采取差异并添加制表符分隔的列文件

> ID：13812730
> 
> 赞同：1
> 
> 时间：2012-12-11T02:32:19.923
> 
> 标签：linux, unix, awk

我有一个制表符分隔文件（无标题），我想获取第 3 列和第 2 列的差异，然后将它们加在一起。

IE，

```
col1\tcol2\tcol3\tcol4
hi\t10\t100\t0.4
bye\t150\t400\t5.6 
```

结果将是：(100-10)+(400-150)=340

我将如何使用 awk 进行这样的操作？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T02:36:02.397

```
awk '{ total += $3 - $2 } END { print total }' file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T02:40:45.013

干得好：

```
awk 'BEGIN{FS="\t"} {sum+=($3-$2)} END{print sum}' input_file 
```

**解释：**

*   `BEGIN{FS="\t"}`：在我们阅读任何行之前，将输入分隔符设置为显式使用制表符（`FS`代表字段分隔符），以防您的某个字段有空格。默认情况下`awk`使用制表符和空格作为`FS`.
*   `{sum+=($3-$2)}`：对于读取的每一行，将第 3 到第 2 场之间的差异添加到`sum`
*   `END{print sum}`：读取所有行后，打印`sum`
*   `input_file`: 将输入文件名指定`awk`为参数；拯救一只猫。

# php - 这个消息传递类有一个好的设计模式吗？

> ID：13812731
> 
> 赞同：-2
> 
> 时间：2012-12-11T02:32:26.273
> 
> 标签：php, oop, class, design-patterns

有没有一个好的设计模式呢？

我想创建一个消息传递类。

该课程将通过：

*   消息类型（例如注册、注册确认、密码提醒等）
*   客户的身份证

然后该类需要在数据库中查找客户的消息传递首选项（无论他们是否希望通过电子邮件、短信或两者进行通信）

然后根据客户的偏好，它会为媒体格式化消息（短版用于短信，长版用于电子邮件）并通过我们的邮件或短信提供商的 API 发送。

因为我们希望能够在需要时更换电子邮件和短信提供商，所以我想知道命令模式是否是一个不错的选择。

感谢您的任何反馈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T06:03:16.790

我不确定你需要一个模式。这听起来更像是简单的继承，带有用于实际消息发送的抽象方法。

考虑更好地划分任务。也许让用户 ID 负责查找首选项，或者只为它编写第三类。

如果您想使用设计模式，那么 Builder 可能适用于构造实际消息。这取决于您是否需要针对不同的消息传递方法使用不同的格式。

# android - 对于android中的区域坐标（纬度和经度）

> ID：13812735
> 
> 赞同：0
> 
> 时间：2012-12-11T02:32:37.593
> 
> 标签：android, coordinates

有N个坐标（纬度和经度）。现在我想计算小于半径X的坐标X和Y（经纬度）。这个N坐标中有哪些坐标（经纬度）点？

我有两点要知道：

1.  如何计算两个坐标（经纬度）的距离？

2.  每次计算坐标时。它应该遍历 N 坐标并计算距离吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T02:42:04.177

要回答您的第一个问题，您可以使用 Location 类的 distanceBetween 静态方法计算两个纬度和经度坐标之间的距离（以米为单位）：

```
import android.Location;

float[] results = new float[3];
Location.distanceBetween(xLatitude, xLongitude, yLatitude, yLongitude, results);
float distanceInMeters = results[0]; 
```

至于你的第二个问题，现在写的我没看懂。你能编辑你的问题并重写它吗？

# asp.net-mvc-4 - 仅使用 REST API 的客户端的 ValidateAntiForgeryToken

> ID：13812737
> 
> 赞同：2
> 
> 时间：2012-12-11T02:32:48.530
> 
> 标签：asp.net-mvc-4, security

据我了解，防伪令牌概念是作为 html 的一部分发送的（例如在隐藏的表单字段中），但是如果移动客户端应用程序想要使用 API 登录和注册等怎么办......？我不知道该怎么做，我要完全禁用伪造令牌吗？保留它会很好，因为它也是一个使用 API 的网站。

具体来说，我正在使用 MVC 4，并且正在查看默认模板附带的 AccountController ...它在 Login 上有一个 ValidateAntiForgeryToken 属性...？它是否假设您将始终通过 html 网页表单登录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T07:34:14.580

防伪令牌的概念是嵌入一个隐藏字段，其值由框架生成（用于 POST 请求）或附加到 url 地址（GET 请求）。然后在服务器端验证该值。

默认模板假定您将通过 html 网页使用登录。如果你想创建一个使用 API 的应用程序，你必须设置自己的授权机制。如果您的应用程序在其移动版本中使用您的在线网站，则您无需进行任何更改。

# three.js - 控制 TrackballControls

> ID：13812738
> 
> 赞同：2
> 
> 时间：2012-12-11T02:33:03.990
> 
> 标签：three.js

如何将 TrackballControl (r53) 的旋转限制在上半球？或者，更一般地说，如何将其限制为单轴？我看到这个问题不时出现，但我找不到明确的答案。我试过说 controls.update(delta); camera.position.z = 0; 在 render() 中，但它似乎不起作用。我查看了 TrackBall 的代码，getMouseProjectionOnBall 似乎是一个好的开始，这是正确的方法吗？非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:31:35.877

这可能是使用 TrackballControls 的替代方法（它适合我）。

将“主”Object3D 对象添加到场景中，而不是将对象添加到场景中，而是将它们添加到“主”对象中。这样您就可以使用其中一个示例中的旋转代码来旋转“主”对象，一切都会随之旋转。

# iphone - 自动调整大小时iOS导航栏与UIImageView顶部重叠

> ID：13812740
> 
> 赞同：0
> 
> 时间：2012-12-11T02:33:36.080
> 
> 标签：iphone, ios, ios5, uiimageview, uinavigationbar

我的 DetailView 的布局如下：

![在此处输入图像描述](../Images/287f489d207499ec0f7d44d4db125a0d.png)

你可以看到我将 UIImageView 放在黑色导航栏的正下方。

如果设备是纵向或横向的，我希望图像的宽度填满屏幕。

在 IB 上，UIImageView 是“Aspect Fill”并且具有 >=240 的自定义高度约束。

出现了两个问题：

*   首先，虽然 UIImageView 宽度填满了屏幕，但垂直尺寸不会自动调整大小

*   二、高度>240的图片只在导航栏**下垂直增长**

任何建议如何解决这个问题？如果需要，很高兴发布代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T02:25:29.490

如果您不介意，而不是使用自动调整大小，我的想法是为您的 UIImageView 设置框架，如下所示

在 - (void)viewWillAppear:(BOOL)animated

```
- (void)viewWillAppear:(BOOL)animated
{
    [self checkOrientation];
} 
```

并在检查方向

```
- (void)checkOrientation
{
    UIDeviceOrientation deviceOrientation = [UIDevice currentDevice].orientation;

    if (UIDeviceOrientationIsLandscape(deviceOrientation)) {
        // set imageview frame to fit what you need
    }
    else if (deviceOrientation == UIDeviceOrientationPortrait) {
        // set imageview frame to fit what you need
    }
} 
```

希望它至少对您有所帮助，谢谢。

# magento - 获取捆绑产品的单个选项 ID

> ID：13812743
> 
> 赞同：5
> 
> 时间：2012-12-11T02:33:48.800
> 
> 标签：magento, bundle, option, product

我正在处理捆绑项目的 GIANT 列表，但只想根据用户输入的标准将某些项目显示为选项。这很容易，只需按照以下方式设置一个 if 语句：

```
$returnedproducts = array(21,50,78,23); // THESE ARE PRODUCT IDS.
if ($_product->getTypeId() == 'bundle'){
    $selectionCollection = $_product->getTypeInstance(true)->getSelectionsCollection(
           $_product->getTypeInstance(true)->getOptionsIds($_product), $_product
        );
    foreach($selectionCollection as $option) { 
      if(array_search($option['product_id'], $returnedproducts) !== FALSE){ // ADDED THIS TO FILTER
                  echo '<li>' .  $option->option_id . '</li>';
      }
    }
} 
```

问题在于，由于列表的大小和其他一些因素，这只会消耗大量资源。我想找到一种方法来仅查找和显示特定的选项 ID，而不必筛选整个列表（可以在`WHERE product_id = XXXX`获取选项 ID 的查询中添加一个）。不过，我似乎找不到搜索单个捆绑选项的解决方案。谁能帮我实现这一目标？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-04-07T15:15:50.950

我可能会因此受到一些强烈反对，但我发现当你达到 Magento 中大量收藏的上限时，你可以做两件事之一。

你可以...

1.  在您的托管解决方案上投入资金以获得更多内存/处理器/等
2.  使用直接 sql 读取

使用 sql 读取并不是特别危险，因为您不会尝试使用未经彻底测试的代码将某些内容放回高度管理的数据库中。你打破任何东西的机会都很渺茫。是的，事情*可能*会出错，但您需要权衡使用这种技巧的成本/收益，这对您的特定情况非常有用。它仍然使用 Magento 的 sql 接口，而不是自定义的。

修改以下代码以提取 entity_ids 列表或您想要查找的任何内容，并使用该结果创建一个集合。

```
// Just in case ---$mysqli = Mage::getSingleton('core/resource')->getConnection('core_write');
$mysqlr = Mage::getSingleton('core/resource')->getConnection('core_read');

$sql = "select * from some_entity_table where some_column = 'somevars'";

$results = $mysqlr->fetchAll($sql);

echo "<PRE>";
foreach ($results as $res)
{
    var_dump($res);
} 
```

# javascript - 带有styleId单击事件的FusionTablesLayer多边形未触发

> ID：13812749
> 
> 赞同：1
> 
> 时间：2012-12-11T02:34:10.977
> 
> 标签：javascript, google-maps, google-maps-api-3, google-fusion-tables, dom-events

我有一个融合表，我想使用 styleid 来配置外观。似乎带有 styleid 的 FusionTablesLayer 不能附加点击事件。

这是我正在使用的 FusionTablesLayerOptions 的示例：

```
settings: {
    query: {
        select: 'geometry',
        from: '<<my table id>>'
    },
    suppressInfoWindows: true,
    styleId: 2
} 
```

这是不触发的点击事件：

```
google.maps.event.addListener(<<my FusionTablesLayer obj>>, 'click', function () {
    console.log('layer click');
}); 
```

当我将 FusionTablesLayerOptions 更改为此时，事件会触发：

```
settings: {
    query: {
        select: 'geometry',
        from: '<<my table id>>'
    },
    suppressInfoWindows: true
} 
```

所以我的问题是 - 你认为带有 styleId 的图层不支持点击事件吗？还是我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T04:52:23.550

FusionTablesLayerOptions 中没有“styledId”属性。 [https://developers.google.com/maps/documentation/javascript/3.exp/reference#FusionTablesLayerOptions](https://developers.google.com/maps/documentation/javascript/3.exp/reference#FusionTablesLayerOptions)

请查看官方文档： [https ://developers.google.com/maps/documentation/javascript/layers#fusion_table_styles](https://developers.google.com/maps/documentation/javascript/layers#fusion_table_styles)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T01:45:13.343

[这里](https://developers.google.com/fusiontables/docs/v1/using#WorkingStyles)记录了一个 styleId 属性，似乎尚未将其纳入 Google Maps API v3 文档。

有关详细信息，请参阅Fusion Tables 用户组中的[此线程](https://groups.google.com/forum/?hl=en-US&fromgroups=#!topic/fusion-tables-users-group/EceabeRWqWc)。似乎其他人也有同样的问题。

新外观中有多少个地图选项卡？也许您需要不同的 styleId 编号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T06:20:03.767

好的，我解决了：

1.  FusionTablesLayerOptions 中有一个“styledId”属性，它记录[在这里](https://developers.google.com/fusiontables/docs/v1/using#WorkingStyles)

2.  此问题是由多边形填充颜色的不透明度引起的。似乎如果多边形填充的不透明度设置为 0%，则不会触发附加到图层的单击事件。将不透明度设置为 1% 可以立即解决此问题。我在这里添加了一张图片[来](http://imgur.com/wdLIT)演示。

# core-data - 用于多线程获取或创建的 CoreData 模式

> ID：13812750
> 
> 赞同：0
> 
> 时间：2012-12-11T02:34:13.180
> 
> 标签：core-data, concurrency

我正在寻找一种 CoreData 设计模式，以确保线程安全的“获取或创建”。我有一种情况，两个不同的线程可能同时在寻找相同的记录。如果未找到此记录，则由线程创建一个。不幸的是，两个线程都没有找到这条记录，所以它们都创建了相同的记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T13:14:22.977

T雷迪，

一种方法是使用私有队列 MOC 来进行所有创建——如果您愿意，可以使用创建 MOC。这样，您可以从您想要的任何 MOC 进行提取，如果失败，您在创建 MOC 时重新执行提取，如果在那里失败则创建它。这门学科将迫使您始终进行有序测试，并且没有重复的创作。您将需要通过子 MOC 关系或通过“已保存”合并通知来管理跨 MOC 协调。

安德鲁

# r - 使用 R 中的直接标签库重新排列 ggplot 散点图的标签

> ID：13812766
> 
> 赞同：4
> 
> 时间：2012-12-11T02:35:32.617
> 
> 标签：r, ggplot2

我正在尝试组织我的 ggplot 散点图的标签，以便标签不会相互重叠。为此，我正在尝试使用直接标签库，但我无法让它工作。当我尝试代码时：

```
mytable <- read.csv('http://www.fileden.com/files/2012/12/10/3375236/My%20Documents/CF1_deNovoAssembly.csv', sep=",",  header=TRUE)

mytable$Consensus.length <- log(mytable$Consensus.length)

mytable$Average.coverage <-log(mytable$Average.coverage)

mytable$Name <- do.call(rbind,strsplit(as.character(mytable$Name), " ", '['))[,3]

ggplot(mytable, aes(x=Consensus.length, y=Average.coverage, label=Name)) + geom_point() + ylab("Contig Average Coverage (log)") + xlab("Contig Consensus Length (log)") + opts(title="Contig Coverage vs Length") + geom_text(hjust=0, vjust=-0.2, size=4)
direct.label(p, "first.qp") 
```

我收到了这个错误：

```
Error in direct.label.ggplot(p, "first.qp") : 
  Need colour aesthetic to infer default direct labels. 
```

所以我通过将 aes 添加到 geom_point() 来更改绘图脚本

```
ggplot(mytable, aes(x=Consensus.length, y=Average.coverage, label=Name)) + geom_point(aes(colour=Average.coverage)) + ylab("Contig Average Coverage (log)") + xlab("Contig Consensus Length (log)") + opts(title="Contig Coverage vs Length") + geom_text(hjust=0, vjust=-0.2, size=4) 
```

现在我收到以下错误

```
Error in order.labels(d) : labels are not aligned 
```

我发现[了这个线程](https://stackoverflow.com/questions/7611169/intelligent-point-label-placement-in-r)，他们建议如果只有几个数据点则手动放置标签，或者如果数据点太多则根本不放置标签。我同意这一点，但我将使用许多不同的数据集生成此图，并且我确实需要数据标签。到目前为止，这是图表的外观 ![在此处输入图像描述](../Images/3087e473d08580b32de53266b47da67e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T02:59:04.937

您可以简单地删除点并仅绘制标签，这可以通过注释掉`geom_point()`绘图的一部分来完成。（您还需要将 hjust 和 vjust 值更改为 0.5，以便标签的中心出现在该点所在的位置）：

```
ggplot(mytable, aes(x=Consensus.length, y=Average.coverage, label=Name)) + 
  #geom_point() + 
  ylab("Contig Average Coverage (log)") + xlab("Contig Consensus Length (log)") + 
  opts(title="Contig Coverage vs Length") + geom_text(hjust=0.5, vjust=0.5, size=4) 
```

还是有一些重叠，但也许通过调整字体大小和情节不会太严重。

![在此处输入图像描述](../Images/d8bbe25569061e01b079e7331b9106d8.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T03:59:48.127

从您的评论来看，这听起来更像是一个聚类练习。所以，让我们继续并实际这样做：

```
set.seed(9234970)
d <- data.frame(Name=mytable$Name, 
x=mytable$Consensus.length, 
y=mytable$Average.coverage)
d$kmeans <- as.factor(kmeans(d[-1],20)$cluster)
ggplot(d, aes(x, y, color=kmeans)) + 
geom_point() + 
theme(legend.position="bottom") 
```

![kmmeans 聚类](../Images/3e2e4fbdd8e54d4265113affaf656fe3.png) ggplot(d, aes(x, x, label=Name)) + geom_text(aes(x,y)) + facet_wrap(~kmeans, scales="free")

![集群突破](../Images/aa24121e4f968ec667fe00180ae77bec.png)

我随机选择了20个集群

您还可以使用层次聚类来查看树状图。

`plot(hclust(dist(d[-3]))) # -3 drops kmeans column`

我建议一般使用 cluster 包，因为它可以为您的问题提供更有用的解决方案。

# c# - C# 字符串 4096 限制？

> ID：13812769
> 
> 赞同：2
> 
> 时间：2012-12-11T02:35:38.930
> 
> 标签：c#, string

最近我遇到了一个非常奇怪的 C# 字符串问题。我尝试到处搜索，但找不到解决方案。如果这个问题太简单，请耐心等待，因为我对 C# 很陌生。

我使用 ac# 字符串变量来保存来自 webbrowser 的 html 文本。

```
string webresult = webBrowser1.DocumentText; 
```

不知何故，它只保存了 html 文本的前 4096 个字节。我用 ：

```
Console.Out.WriteLine (webresult.Length); 
```

控制台的输出是 4096。

但是如果我将它转储到一个文件中，html 文件的所有其余部分都会输出正常。

```
FileStream fileStream = new FileStream(@"web.html", FileMode.OpenOrCreate, FileAccess.Write);
try
{
    // read from file or write to file
    StreamWriter m_streamWriter = new StreamWriter(fileStream);                
    m_streamWriter.WriteLine("{0}", str);
    m_streamWriter.Flush();
}
finally
{
    fileStream.Close();
} 
```

有人可以帮忙解决这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T06:36:43.340

我相信 4096 字符限制与 http 调用有关，因此我将对此进行进一步调查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T02:43:28.540

这听起来就像当您获取 DocumentText 时页面尚未完全加载。我认为 WebBrowser 在加载完成时会引发一个事件（`DocumentCompleted`）。您应该在该事件的处理程序中进行文本转储。

# ios - 如何在 XCode 中重置 GPS 首选项？

> ID：13812771
> 
> 赞同：0
> 
> 时间：2012-12-11T02:35:47.523
> 
> 标签：ios, xcode, debugging, gps, xcode4.5

我正在使用带有一点 MapKit 优点的 XCode。对于“你想允许应用程序使用你的位置吗？”的提示，我过去点击了“不允许”。

现在，我想在调试期间使用“允许”选项。如何重置此设置以便再次出现提示？

注意：我比较新，所以我的期望是这是一个 XCode 设置。可能有来自队友的代码控制该提示，所以请随时让我知道这是否是我通过查看专有代码重置的内容。由于我是添加地图视图的人，我猜情况并非如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T02:45:17.610

在设备上，设置 > 常规 > 重置 > 重置位置和隐私。这就是你要问的吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T06:39:58.863

试试这个代码，它会检测用户是否点击了“不允许”按钮：

```
- (void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error
 {
     NSLog(@"didFailWithError: %@", error);
     UIAlertView *errorAlert = [[UIAlertView alloc]
                                     initWithTitle:@"Error" message:@"Failed to Get Your Location, please go to Settings > General > Reset > Reset Location and Privacy" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
     [errorAlert show];
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T02:45:58.757

您可以通过菜单重置模拟器。“iOS 模拟器”->“重置内容和设置”

或者你去模拟器中的设置应用程序。然后“隐私”->“位置”->“您的应用程序”并将其移至打开。

# django - 有没有办法从相应的模型表单字段访问模型字段？

> ID：13812772
> 
> 赞同：1
> 
> 时间：2012-12-11T02:35:48.850
> 
> 标签：django, django-models, django-forms

模型.py：

```
class ItemImage(Model):
    image = ImageField(upload_to=get_user_upload_path) 
```

表格.py：

```
class ItemImageForm(ModelForm):
    class Meta:
        model = ItemImage 
```

`ItemImageForm`说，我用一个实例初始化了一个，`ItemImage`并将表单添加`img_form`到用于渲染模板的上下文中。我知道我可以`ItemImage`使用`img_form.instance`. 但我很好奇是否有更直接的方法可以`ItemImage.image`从其对应的访问`img_form.image`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T07:44:02.350

它根本不应该被访问。该表单由初始数据和清理后的数据组成。如果您参考初始数据，请使用`instance`. 如果您在用户操作后需要价值，请致电`is_valid`或`full_clean`稍后在`cleaned_data`. 介于两者之间的一切都是黑客行为。

如果您想对`img_form.image`, create`clean_image`方法执行任何特殊清理，但您可能已经意识到这一点。

# postgresql - 我应该为我的网络应用程序的表使用架构吗？

> ID：13812774
> 
> 赞同：3
> 
> 时间：2012-12-11T02:36:24.917
> 
> 标签：postgresql

我正在创建一个由 PostgreSQL 数据库支持的 Web 应用程序。我的问题是，我应该为所有 Web 应用程序的表创建一个架构，并在该架构内完成所有工作，还是应该使用默认的公共架构？

我没有看到使用与 public 分开的模式的明显理由。如果不使用自定义模式，我会失去什么，会得到什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T04:10:26.077

这是两种选择（一个具有许多模式的数据库与许多数据库）存在如此细微差异的情况之一，这将导致无休止的自行车脱落。

以我的经验，大多数工具都不能很好地支持模式，所以我只是制作单独的数据库。您可能希望避免创建单独的数据库有许多微小的技术原因，但从设计的角度来看，唯一有意义的原因是，与 MySQL 不同，使用 Postgres 进行跨数据库查询并非易事。如果您依赖此功能，则需要使用模式而不是单独的数据库。如果你不依赖这个特性，你可能会花费更多的精力来支持使用模式的决定，而不是你从这样做中获得的收益。

# javascript - 允许用户取消上传javascript、xmlhttp请求

> ID：13812776
> 
> 赞同：0
> 
> 时间：2012-12-11T02:36:36.263
> 
> 标签：javascript, ajax, xmlhttprequest

我有一个 xmlhttprequest 正在发布到 web 服务并链接到用户上传一个潜在的大文件，我希望能够根据用户输入取消请求。我看到 xmlhttprequest 对象有一个中止功能，但据我所知，通过在 chrome 中查看网络选项卡，调用它实际上并没有停止发送数据并释放用户带宽，它只会影响事件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T02:40:05.073

我会在这里使用 jquery：

```
var xhr = $.ajax({
type: "POST",
url: "x.php",
success: function(msg){
}
});

//kill the request
xhr.abort() 
```

# iphone - iPhone上主动顶点着色器采样器的实现限制

> ID：13812779
> 
> 赞同：1
> 
> 时间：2012-12-11T02:37:19.423
> 
> 标签：iphone, ios, opengl-es-2.0, glsl

我正在尝试在 iPhone 的顶点着色器中使用采样器。[文档](http://developer.apple.com/library/ios/#documentation/3DDrawing/Conceptual/OpenGLES_ProgrammingGuide/OpenGLESPlatforms/OpenGLESPlatforms.html#//apple_ref/doc/uid/TP40008793-CH106-SW1)说 PowerVR SGX 不支持此功能。然而，似乎[至少有人](https://stackoverflow.com/questions/4187784/texture-lookup-in-vertex-shader-behaves-differently-on-ipad-device-vs-ipad-simul)让它在模拟器中工作，尽管并非没有问题。

当我尝试在模拟器（iOS 6）中运行它时，我在编译着色器时收到以下错误消息：

```
ERROR: Implementation limit of 0 active vertex shader samplers 
(e.g., maximum number of supported image units) exceeded, 
vertex shader uses 1 samplers 
```

自从提出[另一个问题](https://stackoverflow.com/questions/4187784/texture-lookup-in-vertex-shader-behaves-differently-on-ipad-device-vs-ipad-simul)后发生了什么变化？他们只是添加了（正确的！）错误消息吗？或者现在可以在顶点着色器中使用采样器吗？*十指相扣*...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T21:20:44.190

我有完全相同的问题，所以我在 WWDC 上问了几个 Apple 的 OpenGL ES 工程师。根据他们的说法，在 iOS 4.x 中某些设备上的顶点着色器中对纹理采样的支持是一个错误，而这在 iOS 5.x 中已被删除。

它从未得到官方支持，这个新的错误消息只是描述了失败的原因。在 iOS 5.x 和大多数运行 iOS 4.x 的设备上，如果你尝试这个，你只会得到一个黑屏，没有任何警告。他们所做的只是为这种行为添加一些解释。

# glassfish - Glassfish grizzly 线程消耗 100% 的 CPU 时间

> ID：13812783
> 
> 赞同：2
> 
> 时间：2012-12-11T02:37:55.073
> 
> 标签：glassfish, glassfish-3, grizzly

我们最近注意到一个问题，我们的 Glassifish 服务器在成功运行几个小时后，突然将其中一个 CPU 固定在 100%。在此期间，我们的应用程序变得无响应。重新启动后，问题最终会再次发生（通常在几个小时后）。

我运行这个命令来查看线程在做什么：

asadmin 生成-jvm-report --type=thread

在结果输出中，一个线程看起来非常可疑（消耗的 CPU 时间比任何其他线程都多几个数量级）：

线程执行信息：

* * *

```
Thread "Grizzly-kernel-thread(1)" thread-id: 27 thread-state: RUNNABLE Running in native
    at: sun.nio.ch.WindowsSelectorImpl$SubSelector.poll0(Native Method)
    at: sun.nio.ch.WindowsSelectorImpl$SubSelector.poll(WindowsSelectorImpl.java:273)
    at: sun.nio.ch.WindowsSelectorImpl$SubSelector.access$400(WindowsSelectorImpl.java:255)
    at: sun.nio.ch.WindowsSelectorImpl.doSelect(WindowsSelectorImpl.java:136)
    at: sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:69)
    at: sun.nio.ch.SelectorImpl.select(SelectorImpl.java:80)
    at: com.sun.grizzly.TCPSelectorHandler.select(TCPSelectorHandler.java:513)
    at: com.sun.grizzly.SelectorHandlerRunner.doSelect(SelectorHandlerRunner.java:190)
    at: com.sun.grizzly.SelectorHandlerRunner.run(SelectorHandlerRunner.java:132)
    at: java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at: java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at: java.lang.Thread.run(Thread.java:662) 
```

线程同步统计：

* * *

此线程被阻止的次数（进入/重新进入监视器）：4,520

此线程等待通知的次数（即处于 WAITING 或 TIMED_WAITING 状态）：0

此线程的总 CPU 时间：2,753 秒 703,125,000 纳秒。

此线程的用户级 CPU 时间：2,753 秒 703,125,000 纳秒。

此线程当前持有或请求的对象监视器：[]

此线程持有的可拥有的同步器（例如 ReentrantLock 和 ReentrantReadWriteLock）：[]

我们在 Windows Server 2008 R2 Enterprise 上运行 Glassfish 3.1.2.2。任何对正在发生的事情的见解都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:34:36.747

可能是JDK问题。在 Grizzly 中，有一个空选择器旋转问题的解决方法，该问题发生在具有早期版本 JDK 6 的 Linux 上。但它不适用于 Windows。

我可以请您创建 Glassfish 或 Grizzly 问题吗？

# php - 在php中定义全局变量

> ID：13812784
> 
> 赞同：0
> 
> 时间：2012-12-11T02:38:09.573
> 
> 标签：php, sql-server-2008-r2

我正在使用 Windows 7 Ultimate、SQL Server 2008 R2、php 5.2.6 我是 PHP 新手。我有一个名为 globalvars.php 的文件，其中定义了全局变量。

**全局变量.php**

```
<?
  session_start();
  include_once('database.php');

  //global vars
  $_APP["SQL_DB_NAME"]="DB_NAME";
  $_APP["SQL_DB_SERVER_NAME"]="SERVER_NAME";
  $_APP["SQL_DB_USER"]="USERNAME";
  $_APP["SQL_DB_PASS"]="PASSWORD";

  $_APP["DATE_FORMAT"] = "d-m-Y";
  $_APP["TIME_FORMAT"] = "H:i";

  //generic function for SQL composition to avoid 's errors     
  function SQuoteEx($str)
  {
return "'" . str_replace("'","''",$str) . "'";
  }
  function RemoveSQuoteEx($str)
  {
return "'" . str_replace("'","",$str) . "'";
  }
  ?> 
```

我也有这个名为 database.php 的文件，其中使用连接到 SQL Server 数据库的片段函数调用全局变量：

**数据库.php**

```
function DBConnect($sql,$debug=0)
  {
global $_APP;
//connect to db and execute query
$cnn = mssql_connect($_APP["SQL_DB_SERVER_NAME"], $_APP["SQL_DB_USER"],       $_APP["SQL_DB_PASS"]) or die(errorHandlingPage(mssql_get_last_message()));
$selected = mssql_select_db($_APP["SQL_DB_NAME"], $cnn) or die(errorHandlingPage(mssql_get_last_message())); 
$debug = 0;
//if debug mode echo sql
if ($debug) echo $sql."<br>";
//execute and return rs

$return = mssql_query($sql) or die(errorHandlingPage(mssql_get_last_message()));

if($return){
    return $return;
}   
  } 
```

由于某种原因，database.php 文件无法读取全局变量。有什么想法吗？mssql_get_last_message() 未传递任何消息。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T02:40:34.833

这是因为您在声明全局变量*之前*`database.php`包含了该文件。只需移动到声明的底部。*`include_once('database.php');`*

 *在 PHP 中，当您使用`include`另一个 PHP 文件时，会*立即*解析并执行该文件。您应该在制作文件*之前声明您需要的任何变量。*`include_once('database.php');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T07:57:10.813

你在浏览器中调用哪个页面？看起来你会在浏览器中调用 database.php 文件来运行该函数。

话虽如此，在 database.php 文件中，您应该在文件开头包含 globalvars.php。

**数据库.php**

```
include_once('globalvars.php');
// rest of your code... 
```*

# c# - 将 xml 文件中的信息放入列表框中

> ID：13812786
> 
> 赞同：0
> 
> 时间：2012-12-11T02:38:13.230
> 
> 标签：c#

这就是我所拥有的。我希望 xml 文件在用户选择一个术语后出现在列表框中。然而，屏幕只是一片空白。我有另一个 xml 文件，它与我拥有的代码完美配合，但我需要它来处理这个 xml 文件。它非常大，所以我想这可能是它不起作用的原因。有任何想法吗？

```
using System;
using System.Collections.Generic;
using System.Collections;
using System.Linq;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using Microsoft.Phone.Controls;
using System.Xml;

namespace PhoneApp5
{
public partial class MainPage : PhoneApplicationPage
{
    public class Item
    {
        public string ItemLine1 { get; set; }
        public string ItemLine2 { get; set; }
    }

    // Constructor
    public MainPage()
    {
        InitializeComponent();

        PageTitle.Text = "Terms";
        List<Item> list = new List<Item>();
        Item item = new Item();
        item.ItemLine1 = "Third Summer 2013";
        item.ItemLine2 = "Classes";
        list.Add(item);
        item = new Item();
        item.ItemLine1 = "Second Summer 2013";
        item.ItemLine2 = "Classes";
        list.Add(item);
        item = new Item();
        item.ItemLine1 = "First Summer 2013";
        item.ItemLine2 = "Classes";
        list.Add(item);
        item = new Item();
        item.ItemLine1 = "Spring 2013";
        item.ItemLine2 = "classes";
        list.Add(item);
        item = new Item();
        item.ItemLine1 = "Fall 2012";
        item.ItemLine2 = "Classes";
        list.Add(item);

        Dispatcher.BeginInvoke(new Action(() => ListBox1.ItemsSource = list));

    }

    void wc_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
       ApplicationTitle.Text = e.Result;
    }

    private void ListBox1_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        //if (sender != null) PageTitle.Text = sender.ToString();
        //if (e != null) PageTitle.Text = e.AddedItems.Count.ToString();

        //IEnumerator ie = e.AddedItems.GetEnumerator();
        //ie.MoveNext();
        //if (e != null) ApplicationTitle.Text = ie.Current.ToString();

         WebClient wc = new WebClient();
         wc.DownloadStringCompleted += new DownloadStringCompletedEventHandler(wc_DownloadStringCompleted);
         wc.DownloadStringAsync(new Uri("http://www.usi.edu/webservices/iphone/USIINFO201310.xml"));

    }
}
} 
```

# python - Python Dtrace 已修补，但运行测试脚本时仍然出现“无效的探针说明符”

> ID：13812789
> 
> 赞同：3
> 
> 时间：2012-12-11T02:38:39.213
> 
> 标签：python, osx-mountain-lion, cpython, dtrace, probe

[我用Issue 13405](http://bugs.python.org/issue13405)修补了 Python 2.7.3 ，然后用`--with-dtrace`configure 选项编译了 python 。

当我运行 test_dtrace 脚本时，测试失败并出现错误：

> 无效的探测说明符

如下所示：

```
======================================================================
FAIL: test_function_entry_return (test_dtrace.DTraceTestsNormal)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "test_dtrace.py", line 99, in test_function_entry_return
    self.assertEqual(actual_result, expected_result)
AssertionError: 'dtrace: invalid probe specifier python*$target:::function-entry{    printf("Function entry %d ", timestamp);}python*$target:::function-entry,python*$target:::function-return{    printf("%d\t**%s*%s*%s*%d\\n", timestamp,        probename, copyinstr(arg0),        copyinstr(arg1), arg2);}python*$target:::function-return/(copyinstr(arg0)=="/Users/ramandeep/src/src/Python-2.7.3/dtrace_sample.py") &&(copyinstr(arg1)=="test_entry_return_and_stack")/{    self->trace = 0;}: probe description python*36447:::function-entry does not match any probes' !=  ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-31T13:08:59.633

探针需要一些解决方法：

> dtrace 不支持 PATH 变量，这很烦人，当您在 /usr/lib/libdtrace.dylib 上运行 strings 命令时，您会看到它硬编码了 gcc 的使用（甚至不是 cpp 或 clang）。
> 
> 应用补丁后你运行 autoconf 或 autoreconf 了吗？如果不是，@DTRACEOBJS@ 将不是可替换的字符串。从这些类型的补丁中忽略修改过的配置脚本是相当普遍的（至少在 Python 社区中），因为不同版本的 autoconf 之间生成的配置脚本的更改是如此之大，以至于它们使补丁中的实际功能更改相形见绌，通常是几个数量级。
> 
> 将此节添加到 phelper.d 的顶部可以解决标题中的问题：

```
#ifdef __APPLE__
#define _SYS_TIME_H_
#define _SYS_SELECT_H_
#define __MATH_H__
#define _OS__OSBYTEORDER_H
#define _FD_SET
#define __GNUC_VA_LIST
#endif /* __APPLE__ */

```

还有一个项目可以将[python 绑定](https://github.com/nshalman/python-usdt)添加到[libusdt](https://github.com/chrisa/libusdt)和[opendtrace](https://github.com/opendtrace/toolkit/blob/master/Python/Readme)，这可能会有所帮助。

**参考**

*   [Python Tracker 问题 4111：添加 Systemtap/DTrace 探针](https://bugs.python.org/issue4111)
*   [Python Tracker 问题 13405：添加 DTrace 探针](http://bugs.python.org/issue13405)
*   [Python Tracker 问题 14776：添加 SystemTap 静态标记](https://bugs.python.org/issue14776)
*   [Systemtap 静态探针：Python](https://fedoraproject.org/wiki/Features/SystemtapStaticProbes#Python)
*   [Red Hat Bugzilla 问题 545179：RFE：将 systemtap 静态探针添加到 python 运行时](https://bugzilla.redhat.com/show_bug.cgi?id=545179)
*   [DTrace 和 Perl](https://dgl.cx/2011/01/dtrace-and-perl)
*   [了解 dtrace ustack 帮助程序](https://www.joyent.com/blog/understanding-dtrace-ustack-helpers)
*   [构建 65 中的 Python 和 dtrace（盯着 C 看）](https://blogs.oracle.com/levon/entry/python_and_dtrace_in_build)
*   [适用于 Python 2.7.x 和 3.x 的 DTrace 补丁](https://www.jcea.es/artic/python_dtrace.htm)
*   [Python dtrace 跟踪器 Github 存储库](https://github.com/benesch/python-dtrace-tracker)

# regex - perl 正则表达式多个组

> ID：13812791
> 
> 赞同：1
> 
> 时间：2012-12-11T02:38:56.167
> 
> 标签：regex, perl, html-parsing, screen-scraping

我正在尝试在 perl 中进行屏幕抓取，并将其归结为一组表格元素。

字符串：

```
<tr>
        <td>10:11:00</td>
        <td><a href="/page/controller/33">712</a></td>
        <td>Start</td>
        <td>Finish</td>
        <td>200</td>
        <td>44</td> 
```

代码：

```
if($item =~ /<td>(.*)?<\/td>/)
            {
                print "\t$item\n";
                print "\t1: $1\n";
                print "\t2: $2\n";
                print "\t3: $3\n";
                print "\t4: $4\n";
                print "\t5: $5\n";
                print "\t6: $6\n";
            } 
```

输出：

```
1: 10:11:00
2: 
3: 
4: 
5: 
6: 
```

我尝试了多种方法，但无法获得预期的结果。想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T02:49:13.477

```
use strict;
use warnings;

my $item = <<EOF;
<tr>
        <td>10:11:00</td>
        <td><a href="/page/controller/33">712</a></td>
        <td>Start</td>
        <td>Finish</td>
        <td>200</td>
        <td>44</td>
EOF

if(my @v = ($item =~ /<td>(.*)<\/td>/g))
{
  print "\t$item\n";
  print "\t1: $v[0]\n";
  print "\t2: $v[1]\n";
  print "\t3: $v[2]\n";
  print "\t4: $v[3]\n";
  print "\t5: $v[4]\n";
  print "\t6: $v[5]\n";
} 
```

或者

```
if(my @v = ($item =~ /<td>(.*)<\/td>/g))
{
  print "\t$item\n";
  print "\t$_: $v[$_-1]\n" for 1..@v;
} 
```

输出：

```
1: 10:11:00
2: <a href="/page/controller/33">712</a>
3: Start
4: Finish
5: 200
6: 44 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T02:49:49.377

代码的行为与您告诉它的完全一样。这就是发生的事情：

您只匹配了一次正则表达式。它确实匹配，并`$1`用第一个（也是唯一一个！）捕获缓冲区的值填充了变量。匹配返回“true”，并执行 if 分支中的代码。

你想做两件事：

1.  与`/g`修饰符匹配。这会全局匹配，并尝试返回字符串中的*每个*匹配项，而不仅仅是第一个匹配项。
2.  在列表上下文中执行正则表达式，这样您就可以将捕获缓冲区保存到数组中

这将导致以下代码：

```
if ( my @matches = ($item =~ /REGEX/g) ) {
  for my $i (1 .. @matches) {
    print "$i: $matches[$i-1]\n";
  }
} 
```

还请注意，[使用正则表达式解析 HTML 是邪恶](https://stackoverflow.com/a/1732454/1521179)的，您应该在 CPAN 中搜索您喜欢的为您执行此操作的模块。

# c++ - c++ if 语句不会结束

> ID：13812794
> 
> 赞同：-1
> 
> 时间：2012-12-11T02:39:46.113
> 
> 标签：c++

我对 c++ 相当陌生，不确定我是否正确解释了这一点。

我有一段代码（一个函数）在运行整个程序时没有结束。

该函数的目的是首先生成一个从 0 到 1 的随机数。接下来，如果该随机数大于 0.6，则进入另一个函数。该功能 virus_death 完美运行。如果随机数小于0.6，那么它会使病毒点推回到一个叫做reached的向量中。它还会将该点写入文件。然而，这种说法从未停止。

```
void replication(vector<Virus>& virus, int a, int b, double& times, int& iv, 
                 ofstream& data_file, int p, vector<Direction>& direction_v, 
                 vector<Virus>&replicate, int step)
{
    point R,P;

    double replicates  = ((double) rand() / (RAND_MAX));
    //how long the virus takes to reach the necleus

    if( replicates>0.6)
    {
        cout<<"No Replication "<<endl;
        virus_death(times, iv, virus,a,b,data_file,p,direction_v, step);
    }
    else if( replicates<=0.6)
    {
        cout<<"Replication"<<endl;

        ofstream tom;
        tom.open("Timing_nuc.dat");

        cout<<"Points"<<endl;
        R.x = virus[p].getx();
        R.y = virus[p].gety();
        R.t = virus[p].gett();

        cout<<"Write to File"<<endl;
        tom<<p+1<<"\t"<<R.x<<"\t"<<R.y<<"\t"<<R.t<<"\n";

        cout<<"New Points"<<endl;
        P.x = a;
        P.y = b;
        P.t = 0;
        cout<<P.x<<"\t"<<P.y<<"\t"<<P.t<<"\n";

        replicate.push_back(P);
        int aspa = replicate.size();
        cout<<"Replication Size:"<<aspa<<endl;
    }           
} 
```

有人可以帮我确定为什么一旦将点推入向量中，它就不会离开函数。

调用这个函数的代码是：

```
void location_of_virus(vector<Virus>&virus,double& times, int& iv,
                        ofstream& data_file, vector<Direction>& direction_v,
                        vector<Virus>&virus_engulf, circle&cell_c, 
                        circle&nuclei_c, vector<Virus>&replicate, int step)
{
    int a;
    int b;

    //int nc,cc,cmc,nci;
    float dis_c, dis_n;

    int virus_size= virus.size();
    //type = "virus";
    for(int i =0; i<virus_size; i++)
    {
        a = virus[i].getx();
        b = virus[i].gety();

        //to check where the virus is in location to the environment
        dis_c = cell_c.distance(a,b);
        dis_n = nuclei_c.distance(a,b);

        if(dis_n < 5)
        {
            location =" Inside Nucleus";
            cout<<i+1<<"\t"<<virus[i]<<"\t"<<direction_v[i]<<"\t"<<location<<endl;
            data_file<<i+1<<"\t"<<virus[i]<<"\t"<<direction_v[i]<<"\t"<<location<<"\n";
            replication(virus,a,b,times,iv,data_file,i,direction_v,replicate,step);
        }   
        else if(dis_n ==5)
        {
            location = "Nucleus";
            cout<<i+1<<"\t"<<virus[i]<<"\t"<<direction_v[i]<<"\t"<<location<<endl;
            data_file<<i+1<<"\t"<<virus[i]<<"\t"<<direction_v[i]<<"\t"<<location<<"\n";
            nucleus(virus,a,b,times,iv,data_file,i,direction_v,step);

        }
        else if(dis_c <25 && dis_n>5)
        {
            location = "Cytoplasm";
            cout<<i+1<<"\t"<<virus[i]<<"\t"<<direction_v[i]<<"\t"<<location<<endl;
            data_file<<i+1<<"\t"<<virus[i]<<"\t"<<direction_v[i]<<"\t"<<location<<"\n";
            cytoplasm(virus,a,b,times,iv,data_file,p,direction_v,step);
        }
        else if(dis_c ==25)
        {
            location = "Cell Membrane";
            cout<<i+1<<"\t"<<virus[i]<<"\t"<<direction_v[i]<<"\t"<<location<<endl;
            data_file<<i+1<<"\t"<<virus[i]<<"\t"<<direction_v[i]<<"\t"<<location<<"\n";
            endocytosis(virus,a,b,times,iv, data_file,i,direction_v,virus_engulf,cell_c,nuclei_c);
        }
        else if (((a ==0 || a == 50 || a>0 || a<50)&& (b ==0 || b == 50 || b>0 || b<50)) && dis_c>15)
        {
            location ="Extracellular Matrix";
            cout<<i+1<<"\t"<<virus[i]<<"\t"<<direction_v[i]<<"\t"<<location<<endl;
            data_file<<i+1<<"\t"<<virus[i]<<"\t"<<direction_v[i]<<"\t"<<location<<"\n";
        }
        else
        {
            location ="Left the System";
            cout<<i+1<<"\t"<<virus[i]<<"\t"<<location<<endl;
            data_file<<i+1<<"\t"<<virus[i]<<"\t"<<location<<"\n";

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T03:15:29.050

你确定你在某处没有无限递归吗？例如，也许会再次`virus_death`打电话`location_of_virus`左右？

此外，您并没有真正检查是否`virus[p]`有效。`p`如果在其范围内，可能会添加一个小的安全检查。

如果你不知何故弄乱了你的堆栈，各种奇怪的事情都可能发生——还有一些无休止的循环。

# c - 机器指令中出口（0）上的“访问冲突读取”？

> ID：13812795
> 
> 赞同：0
> 
> 时间：2012-12-11T02:39:49.560
> 
> 标签：c, visual-c++, assembly

关于同一消息还有[其他](https://stackoverflow.com/questions/8932200/c-access-violation-reading-why)问题，但是当我尝试执行调用某些函数的机器代码字符串时，我似乎特别遇到了这个问题。在我的情况下，我调用了 exit(0)，当在同一程序中以 C 语言调用时，它工作正常。但是，如果作为练习，我将 EIP 设置为某个机器代码的地址（您可以称其为“shellcode”），例如

```
const char code[] = 
"\x6A\x00"      // push        0"
"\xFF\x15\x00\x00\x00\x00"  //system call, 'read access violation':   call dword ptr [__imp__exit]
"\x5D"  //pop ebp    
"\xC3"; //ret 
```

我将收到消息“访问冲突读取位置 0x00000000。”。"\x6A\x00" 指令将运行，但对 exit(0) 的调用将引发此异常。

这是在 VS2010 中使用 /GS- 编译的 C，并且还运行具有执行权限的“shellcode”，但是仍然存在某种不可执行的内存或堆栈保护吗？为什么这条指令会导致错误？

```
 int main() 
{ 

    void *exec = VirtualAlloc(0, sizeof(code), MEM_COMMIT, PAGE_EXECUTE_READWRITE);
    memcpy(exec, code, sizeof(code));
//EIP = exec in debug->immediate
    exit(0);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T02:46:53.903

如果你反汇编你的 shellcode，你会得到这样的东西（AT&T 语法）：

```
00000000 <_code>:
   0:   6a 00                   push   $0x0
   2:   ff 15 00 00 00 00       call   *0x0
   8:   5d                      pop    %ebp
   9:   c3                      ret 
```

该`call`指令通过地址 0 进行内存间接跳转：它从内存地址 0 加载目标并跳转到该位置。由于内存地址 0 无效（在极少数例外情况下它可能是有效的，但这也不例外），因此会导致访问冲突。

通常，当您编译 C 代码时，到外部函数的跳转会被占位符替换，而这些占位符会在链接时由链接器填充。当你在运行时生成 shellcode 时，你没有链接器的帮助，所以你必须自己做。你需要弄清楚你想要的目标地址是什么，然后直接在 shellcode 中填写，如果你不知道 shellcode 将在哪个地址执行，可能会使用一些与位置无关的技巧。

# ruby-on-rails - 使用 CanCan 在项目中实现用户角色

> ID：13812797
> 
> 赞同：1
> 
> 时间：2012-12-11T02:40:06.193
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, cancan, authentication

好的，所以我正在尝试使用 Devise 和 CanCan 的组合在我的项目中创建一个用户角色系统。我知道这是一个流行的组合，但是在完成了半打半完成的教程之后，我终于得到了一些工作，但仍然有问题。

这是一个描述：用户可以注册，他们可以是管理员、工人或客户。他们选择的选项按原样保存到数据库中，但是当我尝试在 CanCan 中使用这些选项时出现问题。这是我的代码，所以你可以看到我到目前为止：

**用户.rb**

```
class User < ActiveRecord::Base

  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me, 
                  :subdomain, :first_name, :last_name

  validates_presence_of :email
  validates_uniqueness_of :email, :case_sensitive => false

  ROLES = %w[admin worker client]

  def role?(role)
    roles.include? role.to_s
  end
end 
```

**角色.rb**

```
class Role < ActiveRecord::Base
  has_many :assignments
  has_many :users, :through => :assignments
end 
```

**赋值.rb**

```
class Assignment < ActiveRecord::Base
  belongs_to :user
  belongs_to :role
end 
```

**能力.rb**（这是为CanCan）

```
class Ability
  include CanCan::Ability

  def initialize(user)
    user ||= User.new #guest user

    if user.role? :admin
      can :manage, :all
    else
      can :read, :all
    end

    if user.role?(:worker)
      can :create, Project
      can :update, Project do |project|
        project.try(:user) == user
      end
    end
  end
end 
```

**项目.rb**

```
class Project < ActiveRecord::Base
    has_many :lists, :dependent => :destroy
    has_many :messages, :dependent => :destroy
    belongs_to :user

    attr_accessible :title, :description
    validates :title,           :presence => true,
                                :length => { :minimum => 5 }
end 
```

这些都是我的模型。我已经按照这里的教程：[http](http://railscasts.com/episodes/192-authorization-with-cancan) ://railscasts.com/episodes/192-authorization-with-cancan并确保我的代码是相同的，尽管改变了用户角色，但我一直收到同样的错误：

![CanCan 的 Rails 错误](../Images/0f2e285760c8f376430cb96a88eec4d4.png)

我`load_and_authorize_resource`在我的项目控制器和我的项目视图中有：

```
<% if can? :edit, @project %>
    <td><%= link_to 'Edit', edit_project_path(project) %></td>
<% end %> 
```

现在什么都没有。这有点紧急，而且我在 Rails 方面的经验并不多，所以我将非常感谢你们中的任何人提供的任何帮助或建议。如果您需要查看我的更多代码或想描述更多我想要完成的工作，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T02:54:42.530

您缺少用户和角色之间的关系:)

在您的 user.rb 上

```
has_many :assignments
has_many :roles, :through => :assignments 
```

然后 user.roles 将被定义；）

# php - smarty中的变量修饰符名称？

> ID：13812798
> 
> 赞同：1
> 
> 时间：2012-12-11T02:40:13.850
> 
> 标签：php, variables, smarty, smarty3

我有两个变量，一个是`$video_id`包含 youtube 或 vimeo 视频 ID。另一个`$video_type`包含“youtube”或“vimeo”。

我在php中有两个函数，
`youtube_embed($id, $width, $height)`
`vimeo_embed($id, $width, $height)`

我想要做的是调用这个函数将它传递给`$video_id`

我可以做：

```
{if $video_type == 'youtube'}
    {$video_id|youtube_embed:123:123}
{elseif $video_type == 'vimeo'}
    {$video_id|vimeo_embed:123:123}
{/if} 
```

但我想知道您是否可以使用变量修饰符名称，例如

```
{$video_id|`$video_type`_embed:123:123} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T03:53:36.107

这是一个坏主意，即使你可以。

如果您这样做，您的代码将来会更清晰地阅读、维护和扩展：

```
{$video_id|video_embed:$video_type:123:123} 
```

然后在 PHP 中检查 $video_type 并将其传递给适当的修饰符，而不是尝试在模板级别处理它。

```
function video_embed($video_id, $video_type, $x, $y){
    switch($video_type){
        case('youtube'):
            youtube_embed($video_id, $x, $y);
            break;

        case('vimeo'):
            vimeo_embed($video_id, $x, $y);
            break;

        default:
            throw new UnsupportVideoTypeException($video_type);
    }
} 
```

当您不可避免地需要支持一种新的视频类型时，您只需在 PHP 的 video_embed 函数中添加一些代码，而不是编辑每个显示视频的模板。

为了记录，不，这似乎是不可能的。查看 Smarty 的源代码，它不会在需要修饰符时尝试评估变量。

# javascript - 使用 javascript 在输入字段中输入信息时填充文本区域

> ID：13812799
> 
> 赞同：2
> 
> 时间：2012-12-11T02:40:19.090
> 
> 标签：javascript, jquery, ajax

我试图从几个输入中获取值并将它们传递到表单外部的文本区域而不提交表单，这发生在同一页面上。我正在使用 javascript 来执行此操作，因为我希望在您向输入中输入信息时填充文本区域，因为我将使用该文本区域作为地址然后在地图上标记它。下面是将地址的值传递到文本区域所需的代码的一部分，因为我不是 javascript 的人，我正在寻求下一部分代码的帮助以在文本区域中显示值。

```
function getaddress() {
var direccion = document.getElementsByName("direccion").value;
var colonia = document.getElementsByName("colonia").value;
var ciudad = document.getElementsByName("ciudad").value;
var estado = document.getElementsByName("estado").value;
var pais = "Mexico";
var zip = document.getElementsByName("zip").value;
var address = direccion, colonia, ciudad, estado, pais, zip;
} 
```

一旦文本区域填充了上述函数的值，我就可以添加 ID 地址以从中获取文本并在地图上显示标记。地图的代码如下

```
function codeAddress() {

var address = document.getElementById("address").value;
geocoder.geocode( { 'address': address}, function(results, status) {
if (status == google.maps.GeocoderStatus.OK) {
map.setCenter(results[0].geometry.location);
var marker = new google.maps.Marker({
     map: map,
     draggable: false,
     position: results[0].geometry.location
}); 
```

非常感谢你们所有人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T02:43:32.770

vfor 实时传输使用 keyup 事件：

```
document.getElementById('x').keyup(function(){
    document.getElementById('y').value = this.value;
}); 
```

甚至更容易使用 jquery：

```
$('#x').bind('keyup', function(){
    $('#y').val($(this).val());
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T03:42:28.380

在我看来，更新地址字段的最简单方法是在包含相关输入元素的表单上处理[keyup 事件：](https://developer-dev.allizom.org/en-US/docs/DOM/window.onkeyup)

```
function getaddress() {
    var direccion = document.getElementById("direccion").value;
    var colonia = document.getElementById("colonia").value;
    var ciudad = document.getElementById("ciudad").value;
    var estado = document.getElementById("estado").value;
    var pais = "Mexico";
    var zip = document.getElementById("zip").value;
    document.getElementById("address").value =
          direccion + " " + colonia + " " + ciudad + "\n" +
          estado + " " + pais + " " + zip;
};

document.getElementById("addressForm").onkeyup = getaddress; 
```

**演示：http:** [//jsfiddle.net/P9ErU/](http://jsfiddle.net/P9ErU/)

Keyup 事件从用户输入的输入“冒泡”到他们的包含元素（最终一直到文档），因此您不需要单独处理每个输入，尤其是在这种情况下您想要做无论用户输入哪个输入，都是一样的。

我从您发布的代码开始，并进行了以下更改：

*   给输入一个 id 并使用`document.getElementById()`而不是`getElementsByName()`- 后者旨在（可能）返回许多元素（因此其名称中的复数“元素”）并且并不真正适合您正在做的事情。

*   使用`+`运算符 (not `,`) 将值连接在一起。如果合适的话，也可以放入一些空格和/或换行符，如我的代码所示（如果不合适，很容易删除该部分）。

*   将生成的文本放入文本区域。

*   我假设表单有一个 id `"addressForm"`，但显然你可以适当地改变它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T02:49:20.980

我不建议在按下每个键时处理数据，因为地理编码功能会出现滞后。您将在用户键入时发送多个地理编码请求。可能在处理其他请求时不会发送某些请求，这将使您最终对半个地址进行地理编码。如果它确实有效，则标记将在地图上跳来跳去，因为用户只输入了地址的一部分。

我的建议是放置一个按钮，用户可以在准备填写字段时单击。

请记住，作为免费用户，您每天只能调用地理编码功能 2500 次。

# android - Android 浏览器无法从我的 nginx 服务器下载图像

> ID：13812801
> 
> 赞同：1
> 
> 时间：2012-12-11T02:40:28.133
> 
> 标签：android, nginx

我有一个**nginx server(1.2.4)**，它提供了一些图片供下载。但是，我没有将这些文件放在公用文件夹中，因为我想做一些身份验证或其他事情。

我对这些静态文件使用`X-Accel-Redirect`功能。`nginx`现在我可以从桌面浏览器下载图像，所以我想我已经配置好了 nginx。

但是，当我使用 android 设备时，我无法下载这些文件。Android 总是用“未命名的名称”显示**“下载失败**”。我将 Content-Disposition 更改为“内联”，然后我可以在浏览器中看到图像，所以我认为数据已发送到设备。

我不知道为什么android设备即使数据已经发送也无法成功下载。

另一件事是，如果我只是将图像文件放在“公共”文件夹中，让安卓设备直接在那里下载，安卓设备将正常工作，它可以下载图像。

所以，如果我使用 nginx`X-Accel-Redirect`功能提供图像，即使数据已经发送，android 也无法下载，如果我只是将它们放在 public 文件夹中，android 浏览器可以下载。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-18T02:49:44.280

我在某处读到这是因为 Android 有一个“错误”，它需要任何下载文件的元数据。所以我们应该配置 nginx 来根据文件的类型（pdf、xls 等，除了 web 为 html/php 等）提供元数据

# java - 使用 Restlet - 我应该返回 Bean 表示还是字符串表示？

> ID：13812806
> 
> 赞同：0
> 
> 时间：2012-12-11T02:40:52.453
> 
> 标签：java, restlet

我正在使用 Restlet/Jackson 构建我的 RESTful API，并遵循返回相关 Java Bean 的 Jackon 表示的一般策略。例如，来自 Restlet in Action 一书（第 108 页）：

```
public Representation toJson() {
    ...  
    return new JacksonRepresentation<Mail>(mail);
} 
```

客户端应用程序可以执行以下操作：Mail mail = mailRep.getObject();

在 Java Web 客户端和 Java Android 客户端中一切正常。但是在其他环境中构建的客户端呢？（例如 PHP 客户端）我还能像现在一样返回 Mail 对象的 JSON 表示吗？或者我应该返回明确的 Json 字符串并让客户弄清楚如何处理它？如果我将信息添加到 Mail 方法中，将来还会返回字符串帮助，但允许旧客户端仍然使用初始属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T00:06:20.970

查看我用来访问 REST API（Restlet 和 google-http-client）的两个客户端库，它们都有从对象获取 JSON 字符串的方法。
特别是 Restlet 的 Representation 有 getText()，而 Google 的 HttpResponse 有 parseAsString()。所以这一切似乎完全不是问题。编辑 - 随时删除问题。

# java - 从字符串数组中删除重复项，无需在 Java 中进行显式比较

> ID：13812807
> 
> 赞同：-3
> 
> 时间：2012-12-11T02:41:03.227
> 
> 标签：java, comparison, duplicates

如果没有明确的比较，最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T03:05:51.193

**-**使用`Collection`named `Set`，**它保持唯一性。**

**-**使用`asList()` **方法**将`Array`其转换为，`List`然后使用`addAll()`方法**添加**到`List`.`Set`

**-**添加`List`到`Set`将**删除重复项**。

**例如：**

```
String[] arr = {"Vivek","John","Rick"};

ArrayList<String> arList = new ArrayList<String>(Arrays.asList(arr));

TreeSet<String> arSet = new TreeSet<String>();

arSet.addAll(arList);       // duplicates removed 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T02:47:11.063

如果 List Of Object 包含`Strings`，您需要将它们添加到`Set`.

如果列表包含自定义对象，覆盖等于自定义类中的方法和那些对象`Set`

# android - 如何使用 greenDAO 实现观察者模式？

> ID：13812811
> 
> 赞同：1
> 
> 时间：2012-12-11T02:41:43.910
> 
> 标签：android, greendao

我想实现一个 ListView，它会自动更新本地数据库（观察者模式）的任何更改。我已经读到 Loaders 和 ContentProviders 目前不能很好地与 greenDAO 配合使用，所以我想知道推荐的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T10:59:00.513

您可以像我在这里一样添加自己的侦听器（观察者或 propertychangeListener），以便在添加或删除某些内容时更新 listView：

```
public static Object objj = new Object();
static PropertyChangeSupport pcs = null ;
private static PropertyChangeSupport getPropertyChangeSupport(){

    if(pcs==null){
        pcs = new PropertyChangeSupport(objj);
    }

    return pcs;

}

public void addTrace(Traces Trace){
    DevOpenHelper helper = new DaoMaster.DevOpenHelper(context, "pib", null);
    SQLiteDatabase db = helper.getReadableDatabase();
    DaoMaster daoMaster = new DaoMaster(db);
    DaoSession daoSession = daoMaster.newSession();
    TracesDao DAO1= daoSession.getTracesDao(); 
    DAO1.insert(Trace);
    getPropertyChangeSupport().firePropertyChange("addTrace", 0, Trace);

} 
```

这可以在数据库控制器中完成......在我的 listView 所在的类中，我拦截了这样的事件：

```
public class ListFragment extends Fragment implements PropertyChangeListener { 
       public void propertyChange(PropertyChangeEvent evt) {
           if (evt.getPropertyName().equals("addTrace")) {
                final Traces tempTrace = (Traces) evt.getNewValue();
                listTraces = DoaConroler.ListTraces();
                showBriefingActivity.runOnUiThread(new Runnable() {

                    @Override
                    public void run() {
                        createListBriefing();
                        // fillListItem(tempTrace);
                    adapterFirstLevel.notifyDataSetChanged();

                }
            });
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T22:04:48.107

抱歉，目前没有实现观察者监听器。这在未来可能会改变。

# python - GAE 中的 OAuth2 身份验证访问日历 API V3（域托管）

> ID：13812813
> 
> 赞同：3
> 
> 时间：2012-12-11T02:41:55.343
> 
> 标签：python, google-app-engine, oauth-2.0, google-calendar-api, google-api-python-client

我正在使用 Python 开发 Google App Engine 应用程序。我正在使用：

*   Google Calendar API v3（访问我自己域中的日历。所以，这是安装在我域中的 Google Apps）
*   适用于 Python 的 Google API 客户端库。
*   OAuth2 对我的域 (name@mydomain.com) 的用户进行身份验证

我以为我必须使用服务帐户，因为：

“如果您的 App Engine 应用程序需要调用 API 来访问应用程序项目拥有的数据，您可以使用服务帐户来简化 OAuth 2.0”

取自[https://developers.google.com/api-client-library/python/platforms/google_app_engine#ServiceAccounts](https://developers.google.com/api-client-library/python/platforms/google_app_engine#ServiceAccounts)

但我不确定我是否误解了什么。我的场景（GAE 应用程序试图访问我自己域中的 Google Apps）是否是服务帐户的候选人？

我尝试了几种处理 OAuth2 的方法：

*   如前所述，使用服务帐户
*   使用 Google APIs 客户端库为 Python 提供的 Python 装饰器（OAuth2Decorator 和 OAuth2DecoratorFromClientSecrets）

在这两种情况下，我都会遇到相同的错误：

*   [在我的本地机器中执行：请求https://www.googleapis.com/calendar/v3/calendars/primary/events?alt=json](https://www.googleapis.com/calendar/v3/calendars/primary/events?alt=json)时的 HttpError 401返回“无效凭据”（我将事件创建为 JSON 对象，如下所示：[https://developers.google.com/google-apps/calendar/v3/reference/events/insert#examples](https://developers.google.com/google-apps/calendar/v3/reference/events/insert#examples)）。错误堆栈跟踪：[https ://dl.dropbox.com/u/61566717/output/local_error](https://dl.dropbox.com/u/61566717/output/local_error)
*   部署到 GAE：错误 310 (net::ERR_TOO_MANY_REDIRECTS)。字符串 "_ah/login_required?continue=" 多次附加在 URL 的末尾。客户端 ID/客户端密钥或 API 控制台生成的服务帐户参数可能有问题吗？我应该重新创建它们吗？

我完全迷路了。有什么线索吗？

提前谢谢了

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-11T02:57:20.013

您不需要服务帐户，但使用一个可能有用。App Engine 上的服务帐户存在一些棘手的问题，详情请参阅库的[报告问题](http://code.google.com/p/google-api-python-client/issues/detail?id=184)。尝试使用[Google APIs explorer](https://developers.google.com/apis-explorer/#p/calendar/v3/)看看是否有助于阐明如何使用 API。

只要您使用有权访问这些日历的帐户授权应用程序，您就可以访问它们，无论这是否在 Google App Engine 上。

在这里使用`OAuth2Decorator`是你最好的选择。如果你给出一个具体的例子，我很乐意提供一些代码片段来完成这项任务。

请参阅最近提出的类似问题：[如何登录 appengine 中的任意用户以与 Drive SDK 一起使用？](https://stackoverflow.com/questions/13426733/how-can-i-log-in-to-an-arbitrary-user-in-appengine-for-use-with-the-drive-sdk)这似乎是您的用例，除了您想使用 Calendar API 而不是 Drive API。

**更新：**

在阅读了您的[另](https://stackoverflow.com/questions/13810106/design-decisions-for-google-app-engine-hosted-app-using-google-apps-apis)一篇文章（如果我是您，我会考虑关闭）之后，我拼凑了一个示例，可以帮助您了解如何使用装饰器。

首先，使用您的凭据，以便您的应用可以让用户对其进行授权：

```
from apiclient.discovery import build
import json
from oauth2client.appengine import OAuth2Decorator
import webapp2

decorator = OAuth2Decorator(
  client_id='your_client_id',
  client_secret='your_client_secret',
  scope='https://www.googleapis.com/auth/calendar')

service = build('calendar', 'v3') 
```

然后您的主页将确保您的用户已登录，并且`@decorator.oauth_required`装饰器会将 OAuth 2.0 令牌保存在您的数据存储中。

```
class MainPage(webapp2.RequestHandler):
  @decorator.oauth_required
  def get(self):
    # This will force the user to go through OAuth
    self.response.write(...)
    # show some page to them 
```

在您向他们显示的页面上，您可能会有一个表单，`POST`并且`/add-event`此`AddEvent`处理程序将能够使用令牌来发出请求。而不是使用`oauth_required`我们使用`@decorator.oauth_aware`来允许优雅的失败。如果 App Engine cookie 从他们的浏览器会话（如果他们`POST`来自表单）的请求中检测到用户，那么您的应用将在发出经过身份验证的日历请求之前从您的数据存储区查找 OAuth 2.0 凭据。

```
class AddEvent(webapp2.RequestHandler):
  @decorator.oauth_aware
  def post(self):
    if decorator.has_credentials():          
      event_name = self.request.get('event-name')
      some_event = {...}  # Create event here
      # Documented at
      # https://developers.google.com/google-apps/calendar/v3/reference/events/insert

      http = decorator.http()
      # Using 'primary' will insert the event for the current user
      request = service.events().insert(calendarId='primary', body=some_event)
      inserted = request.execute(http=http)
      self.response.write(json.dumps(inserted))
    else:
      self.response.write(json.dumps({'error': 'No credentials'}) 
```

最后，为了确保所有这些路由都能正常工作，您需要为每个处理程序和装饰器使用的 OAuth 2.0 处理程序定义路由：

```
app = webapp2.WSGIApplication([
    ('/', MainPage),
    ('/add-event', AddEvent),
    (decorator.callback_path, decorator.callback_handler())
    ],
    debug=True) 
```

**额外参考：**

[https://developers.google.com/api-client-library/python/platforms/google_app_engine](https://developers.google.com/api-client-library/python/platforms/google_app_engine)

[https://developers.google.com/google-apps/calendar/v3/reference/events/insert](https://developers.google.com/google-apps/calendar/v3/reference/events/insert)

# javascript - 获取子窗口的结果以写入父窗口

> ID：13812816
> 
> 赞同：2
> 
> 时间：2012-12-11T02:42:31.237
> 
> 标签：javascript, window, parent, addition

我是 Javascript 的初学者，我正在尝试将子窗口的结果写入父窗口。这是子窗口中的功能：

函数检查答案（）{

```
var num1=parseInt(document.getElementById('firstNumber').value);
var num2=parseInt(document.getElementById('secondNumber').value);
var correctAnswer = num1+num2;
var userAnswer=parseInt(document.getElementById('input').value);

if(userAnswer==correctAnswer){
window.opener.document.getElementById('input') = correctAnswer;
}

else{
alert('wrong');
} 
```

}

我正在尝试让正确的答案出现在父窗口上

我不确定我做错了什么，或者我是否遗漏了什么。就像我说的，我是 Javascript 的初学者，希望能得到帮助:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T02:46:42.880

这条线是问题

```
window.opener.document.getElementById('input') = correctAnswer; 
```

它应该是

```
window.opener.document.getElementById('input').value = correctAnswer; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T04:59:47.917

试试innerHTML：

```
function checkAnswer() {
    var num1=parseInt(document.getElementById('firstNumber').value);
    var num2=parseInt(document.getElementById('secondNumber').value);
    var correctAnswer = num1+num2;
    var userAnswer=parseInt(document.getElementById('input').value);

    if(userAnswer==correctAnswer){
        window.opener.document.getElementById('input').innerHTML = correctAnswer;
    }
    else{
       alert('wrong');
    }
} 
```

# linux - Git添加终止

> ID：13812817
> 
> 赞同：0
> 
> 时间：2012-12-11T02:42:33.990
> 
> 标签：linux, git, github, vps

我在我的 linux VPS 上安装了 git，现在我尝试使用“git add myfolder/*”向我的存储库添加一个文件夹，但终端只返回“Terminated”

有谁知道为什么会这样？

我今天才开始看 git，我已经使用 SVN 多年了，没有任何问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T09:02:27.897

我发现我尝试添加的文件夹中有一个相对较大的 .zip 文件。删除 .zip 文件后，它解决了问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T02:51:19.367

如果要添加文件夹，只需键入：

```
git add myfolder 
```

（不需要`/*`）

请参阅[`git add`手册页](http://git-scm.com/docs/git-add)：

> 还可以给出一个前导目录名称（例如`dir`添加`dir/file1`和`dir/file2`），以递归方式添加目录中的所有文件。

# java - 比较给定方法头的名称？

> ID：13812821
> 
> 赞同：0
> 
> 时间：2012-12-11T02:42:51.957
> 
> 标签：java

给定标题：

```
public boolean equals(Name otherName) 
```

我应该比较两个名称对象是否相等。我现在拥有的是：

```
public boolean equals(Name otherName){
    return (name1.equalsIgnoreCase(name2));
} 
```

但是，我收到一个标识符预期错误。我认为如果我更改参数但分配要求我使用该标题，它会起作用。我究竟做错了什么？

这是名称构造函数：

```
public Name (String first, String middle, String last){ 
firstName = first; 
middleName = middle; 
lastName = last; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T02:45:32.970

你得到“得到一个标识符预期的错误”。因为`name1`和`name2`被定义。在 equals 方法中，您传递另一个对象，因此将其引用为`otherName`，并且对象本身可以作为`this`.

尝试

```
public boolean equals(Name otherName) {
    return (otherName.equalsIgnoreCase(this));
} 
```

或者

```
 public boolean equals(Name otherName) {
    return (equalsIgnoreCase(otherName));
} 
```

当然，你应该已经`equalsIgnoreCase`实现了`Name`类。

# html - 桌子角落的边框半径不起作用

> ID：13812822
> 
> 赞同：0
> 
> 时间：2012-12-11T02:43:24.820
> 
> 标签：html, css, border, css-tables

我在[这里](http://rainleader.com/basic.html)有一个电子邮件模板，它应用了 CSS 样式以使边缘变圆。

我希望左上角、右上角、左下角和右下角的外角是圆角的。所有内部桌子边缘/角落应该是方形的。

但是，您可以看到，它也使内部边缘变圆：

标题：

![在此处输入图像描述](../Images/7c81a5ffabbfe4261bba00aa1e864db2.png)

页脚：

![在此处输入图像描述](../Images/0356aee621c696615b594f535aa44728.png)

我应该如何将我的 CSS 修改为仅圆形外部边缘/角落？

```
table {
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
    border-collapse: separate;
}
/* Top Left */
table tr:first-child th:first-child {
    -webkit-border-top-left-radius: 5px;
    -moz-border-radius-topleft: 5px;
    border-top-left-radius: 5px;
}
/* Top Right */
table tr:first-child th:last-child{
    -webkit-border-top-right-radius: 5px;
    -moz-border-radius-topright: 5px;
    border-top-right-radius: 5px;
}
/* Bottom Left */
table tr:last-child td:first-child{
    -webkit-border-bottom-left-radius: 5px;
    -moz-border-radius-bottomleft: 5px;
    border-bottom-left-radius: 5px;
}
/* Bottom Right */
table tr:last-child td:last-child{
    -webkit-border-bottom-right-radius: 5px;
    -moz-border-radius-bottomright: 5px;
    border-bottom-right-radius: 5px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T03:06:51.257

Use the shorthand, so,

For Header (`#templateHeader`),

```
border-radius: 5px 5px 0 0; /*top-left top-right bottom-right bottom-left*/ 
```

![enter image description here](../Images/176adb23f752d94716da61ba72a8aa71.png)

For Footer (`#templateFooter`),

```
border-radius: 0 0 5px 5px; 
```

![enter image description here](../Images/b277ddfa2468d287d059edabad1528aa.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T03:10:23.100

您正在应用`border-radius`to`td`元素，为了查看基于您的 DOM 组织的圆角边框，您必须将边框半径应用于`table`元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T02:47:07.843

没有什么。Internet Explorer 不支持border-radius 属性。

# c++ - MFCopyImage 的正确参数？

> ID：13812826
> 
> 赞同：0
> 
> 时间：2012-12-11T02:43:32.820
> 
> 标签：c++, winapi, mfc, ms-media-foundation

我正在尝试从 CImage 创建一个 IMFSample，以便我可以使用 SinkWriter 从一系列图像中编码视频。Microsoft 在此处提供了如何使用 DWORD 数组（而不是 CIMage）执行此操作的示例：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ff819477(v=vs.85)。 .aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ff819477(v=vs.85).aspx) _ 这样做涉及使用`MFCopyImage()`，但在调用此函数时我得到了一个访问违规，所以我可能传入了错误的参数。我是 C++ 新手。

从他们的样本中工作，这就是我所得到的：

```
CImage *img = LoadImage();

IMFSample *pSample = NULL;
IMFMediaBuffer *pBuffer = NULL;

const LONG cbWidth = img->GetBPP() / 8 * img->GetWidth();
const DWORD cbBuffer = cbWidth * img->GetHeight();

BYTE *pData = NULL;
HRESULT hr = MFCreateMemoryBuffer(cbBuffer, &pBuffer);

if (SUCCEEDED(hr))
{
    hr = pBuffer->Lock(&pData, NULL, NULL);
}

if (SUCCEEDED(hr))
{
    hr = MFCopyImage(
        pData,                     
        cbWidth,                    
        (BYTE*)img->GetBits(),   
        cbWidth,                   
        cbWidth,                    
        img->GetHeight()
        ); // ACCESS VIOLATION HERE!
}
if (pBuffer)
{
    pBuffer->Unlock();
} 
```

任何人都知道为什么这会让我违反访问权限？我是否传递了正确的值，尤其是对于步幅？基于此文档： http: [//msdn.microsoft.com/en-us/library/windows/desktop/bb970554](http://msdn.microsoft.com/en-us/library/windows/desktop/bb970554(v=vs.85).aspx) (v=vs.85).aspx ，我不清楚这个参数应该是什么.

12 月 11 日更新：更改了代码示例，并由 @cha 和 @roman-r 提供了更正。仍然得到同样的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:39:31.423

访问冲突是由错误的参数引起的。API 只是在源缓冲区或目标缓冲区之外命中内存。

您已经意识到`GetBPP`问题不小但很严重（您应该分别更新您的代码片段）。

另一个问题是最后一个`MFCopyImage`论点。是高度，不是宽度。由于宽度通常较小，因此您可能会出现缓冲区溢出。

此外，您假设步幅最小。实际上你可能有一个更大的。在这种情况下，您会在复制的图像上看到倾斜效果，而不是访问冲突。

# c - 大小互斥矩阵在运行时定义，具有全局访问权限（C 语言）

> ID：13812827
> 
> 赞同：2
> 
> 时间：2012-12-11T02:43:35.280
> 
> 标签：c, matrix, initialization, mutex, global

出于线程访问数据矩阵的目的，我需要一个所有线程都可以访问的互斥体矩阵，以确保一次只有一个线程可以访问某些数据（x，y）。我知道还有其他选择，但我真正需要的是这个。我尝试了一个全局指针，当我从客户端/用户收到数据矩阵的大小时，我分配了具有所述大小的互斥矩阵。没能成功...指向数组数组的指针...我的头爆炸了。这是我微不足道的尝试的一个例子。

```
xthread_mutex ** globalPointer;

void example_init (int x, int y) {

globalPointer = (xthread_mutex_t **)malloc(sizeof(xthread_mutex_t)* x * y);

int i, j;

for(i=0; i<x; i++){

for(j=0; j<y; j++){

globalPointer[i][j] = xthread_mutex_init();
}
} 
```

互斥量初始化上的段错误，为什么？如果您还可以提供一些关于如何在混合指针和数组时避免混淆的提示，我将不胜感激。下面不都是一样的吗？

编辑：我很抱歉没有提到，但我正在使用“自定义”互斥锁，xthread_mutex_init(); 基本上返回一个指向已分配锁的指针（使用 pthread 锁创建）如果你没有发现任何问题，那么我猜我的错误在那些......

/* 返回一个新的、未锁定的互斥体 */

xthread_mutex_t xthread_mutex_init();

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T03:00:01.687

```
globalPointer = (xthread_mutex_t **)malloc(sizeof(xthread_mutex_t)* x * y); 
```

`x*y`为互斥体分配空间。但是你不能简单地把它当作一个`xthread_mutex_t**`，如果你有

```
globalPointer[i][j] 
```

`sizeof(xthread_mutex_t*)`它将从分配的内存开始处偏移字节的字节解释`i*sizeof(xthread_mutex_t)`为指针（指向 a `xthread_mutex_t`）。

实现您想要的一种方法是分配一个一维数组，

```
xthread_mutex_t *real_pointer = malloc(x * y *sizeof *real_pointer); 
```

和`x`指针的空间`globalPointer`，

```
globalPointer = malloc(x * sizeof *globalPointer); 
```

然后用指针填充它指向的块`real_pointer`，

```
for(int i = 0; i < x; ++i) {
    globalPointer[i] = realPointer + i*y;
} 
```

另一种选择是为上面的`x`指针分配空间`globalPointer`，然后在循环中为每个指针分配互斥体`malloc`空间。`y`

# php - 如何测试/比较/参数匹配要传递给 SoapClient 的 stdClass 参数？

> ID：13812828
> 
> 赞同：0
> 
> 时间：2012-12-11T02:43:39.567
> 
> 标签：php, soap, wsdl, simplexml, stdclass

我的背景是Java。我以某种方式认为潜入 PHP 会很有趣。

我有一个 WSDL 文件，其中定义了一些我需要调用的方法。每个方法通常定义一个请求和一个响应类型。这些类型都是一层或两层深，没有属性——只有元素。没有什么花哨。几乎所有方法都需要一些通用参数，例如“用户名”和“密码”。

我想我会测试所有这些，所以我创建了一个间接处理传递标准参数的方法。生产代码如下所示：

```
class PaymentManager implements IPaymentManager {

  public function __construct($soapClient, $username, $password, ...) {
    $this->soapClient = $soapClient; 
    $this->username = $username;
    ...
  }

  public function chargeCustomer($price, $customerId) {
    // prepare message
    $message = new stdClass();
    $message->ChargeMethodRequest = new stdClass();
    $message->ChargeMethodRequest->Username   = $this->username;
    $message->ChargeMethodRequest->Password   = $this->password;
    $message->ChargeMethodRequest->Price      = $price;
    $message->ChargeMethodRequest->CustomerID = $customerId;

    // make the actual call
    $result = $this->soapClient->chargeMethod($message->ChargeMethodRequest);

    // verify successful result
    if ($result->ChargeMethodResponse->Result === "SUCCESS") {
      throw new Exception("whopsie");
    }
  } 
```

现在，诀窍是为此编写一个单元测试，而无需使用 SoapClient 的真实实例。我从 SoapUI 开始并生成示例消息，但它们在 PHP 文件中作为静态字符串，我可以从单元测试中引用。所以我想象这样的事情：

```
class WebServiceClientTest extends DrupalUnitTestCase /* yup, sad and true */ {

  public function test_charge_method_happy_path() {
    $soapClientMock = new SoapClientMock();
    $testee = new WebServiceClient($soapClientMock, $un, $pw, ...); 

    // arrange
    $successResponse = parseToStdClass(WebServiceClientMessages::RESPONSE_OK);
    $expectedMessage = parseToStdClass(WebServiceClientMessages::REQUEST_EXAMPLE_1);
    given($soapClientMock->chargeMethod($expectedMessage))->willReturn($successResponse);

    // act
    $testee->chargeCustomer("10.00", "customerId123");

    // assert
    verify($soapClientMock).chargeMethod($expectedMessage);
  }
} 
```

第一次尝试，Phockito：失败，因为 SoapClient 是一个“本机”类，并且不能`Reflection*`在 PHP 中使用。

做不到这一点，我写了一个`SoapClientMock`类，我想存根方法调用并验证交互。这没什么大不了的，但问题是参数匹配。

如何获取示例消息（XML 字符串），将它们解析为可以与 SoapClient 需要的 stdClass 对象进行比较以正确绑定内容的内容？据我了解，对象比较是硬编码的，并且会查看两个对象是否属于同一类。

SimpleXMLElement 是我的第一个希望，但这与 stdClass 对象相比并不容易，主要是因为 SimpleXMLElement 希望使用所有的命名空间。

序列化不起作用，因为 SimpleXMLElement 对象是“本机”类。

有人建议这样做`json_decode(json_encode($object))`，然后进行比较，除了 SimpleXMLElement 失败之外几乎可以工作，因为没有指定命名空间就无法获取子节点（并且我需要使用多个），所以`$expectedMessage`不包含所有元素.

我目前正在使用 SAX 编写自己的“xml 字符串到 stdClass”解析器。

但是等等——我想要的只是确保 PaymentManager 正确填充chargeMethod 的有效负载——为什么我最终要编写一个 SAX 解析器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T02:43:39.567

我想一种选择是让 a`SoapClientSpyMockFakeSomething extends SoapClient`并覆盖该`__doRequest`方法并使用您到达那里的 XML 字符串...

# php - 我想使用 PHP 的 PDO 将数据插入 mysql 数据库。但是数据没有插入

> ID：13812832
> 
> 赞同：1
> 
> 时间：2012-12-11T02:44:11.253
> 
> 标签：php, mysql, pdo

我想使用 PHP 的 PDO 将数据插入 mysql 数据库。但是没有插入数据。我之前使用过 PDO，但没有遇到任何问题。但是在以下情况下，我不明白我在哪里做错了。谁能帮帮我吗？输出显示良好的回声。

```
<?php

include 'includes/config.php';

$name1 = $_POST['name1'];
$address = $_POST['address'];
$city = $_POST['city']; 
$state = $_POST['state'];
$zip_code = $_POST['zip_code'];
$telephone = $_POST['telephone'];
$email = $_POST['email'];
$fiance = $_POST['fiance'];
$wedding_date = $_POST['wedding_date'];
$number_of_guest = $_POST['number_of_guest'];

$radio = $_POST['radio']; 
if($radio=='on') $radio = 'yes'; 

$newspaper = $_POST['newspaper']; 
if($newspaper=='on') $newspaper = 'yes';

$facebook = $_POST['facebook']; 
if($facebook=='on') $facebook = 'yes';

$website = $_POST['website']; 
if($website=='on') $website = 'yes';

$hear_by_other = $_POST['hear_by_other']; 
if($hear_by_other=='on') $hear_by_other = 'yes';

$by_other = $_POST['by_other'];

$date1 = date("m-d-Y");
$status = 0;

echo $name1.'<br />';
echo $address.'<br />';
echo $city.'<br />';
echo $state.'<br />';
echo $zip_code.'<br />';
echo $telephone.'<br />';
echo $email.'<br />';
echo $fiance.'<br />';
echo $wedding_date.'<br />';
echo $number_of_guest.'<br />';
echo $radio.'<br />';
echo $newspaper.'<br />';
echo $facebook.'<br />';
echo $website.'<br />';
echo $hear_by_other.'<br />';
echo $by_other.'<br />';
echo $date1.'<br />';
echo $status.'<br />';

$statement = $pdo->prepare('INSERT INTO arefin (name1,address,city,state,zip_code,telephone,email,fiance,wedding_date,number_of_guest,radio,newspaper,facebook,website,hear_by_other,by_other,date1,status) VALUES (:var1,:var2,:var3,:var4,:var5,:var6,:var7,:var8,:var9,:var10,:var11,:var12,:var13,:var14,:var15,:var16,:var17,:var18)');

$statement->bindParam(':var1',$name1);
$statement->bindParam(':var2',$address);
$statement->bindParam(':var3',$city);
$statement->bindParam(':var4',$state);
$statement->bindParam(':var5',$zip_code);
$statement->bindParam(':var6',$telephone);
$statement->bindParam(':var7',$email);
$statement->bindParam(':var8',$fiance);
$statement->bindParam(':var9',$wedding_date);
$statement->bindParam(':var10',$number_of_guest);
$statement->bindParam(':var11',$radio);
$statement->bindParam(':var12',$newspaper);
$statement->bindParam(':var13',$facebook);
$statement->bindParam(':var14',$website);
$statement->bindParam(':var15',$hear_by_other);
$statement->bindParam(':var16',$by_other);
$statement->bindParam(':var17',$date1);
$statement->bindParam(':var18',$status);
$statement->execute();

?> 
```

我的 config.php 文件在这里：

```
<?php

$dbhost = 'localhost';
$dbname = 'arefinDB';
$dbuser = 'root';
$dbpass = '';
try {
    $pdo = new PDO("mysql:host={$dbhost};dbname={$dbname}", $dbuser, $dbpass);
    $conn = $pdo;
}
catch( PDOException $excepiton ) {
    echo "Connection error :" . $excepiton->getMessage();
}
?> 
```

数据库表如下所示： ![在此处输入图像描述](../Images/132ef6947b2d4918a529e54574b15e19.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T02:59:03.153

您应该添加适当的错误处理，以便您确切知道失败的原因和原因。

首先你需要告诉 PDO 抛出异常：

```
$pdo = new PDO("mysql:host={$dbhost};dbname={$dbname}", $dbuser, $dbpass);
// add this:
$pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
```

然后你可以将你的数据库操作包装在一个`try`-`catch`块中：

```
try
{
  $statement = $pdo->prepare('INSERT INTO arefin (name1,address,city,state,zip_code,telephone,email,fiance,wedding_date,number_of_guest,radio,newspaper,facebook,website,hear_by_other,by_other,date1,status) VALUES (:var1,:var2,:var3,:var4,:var5,:var6,:var7,:var8,:var9,:var10,:var11,:var12,:var13,:var14,:var15,:var16,:var17,:var18)');

  $statement->bindParam(':var1',$name1);
  // etc.

  $statement->execute();
}
catch ( PDOException $exception )
{
    echo "PDO error :" . $exception->getMessage();
} 
```

评论太长了，但它应该有助于解决问题......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T02:49:54.350

### 试试这个方法，可能是：

```
$statement->execute(array(':var1'=>$name1,
                  ':var2'=>$address)); 
```

我要求您这样做的原因是：

1.  它占用的代码量更少。
2.  它比上一个更容易。

### 那么`wedding_date`呢？

您是否以正确的格式插入？

# jsf - 切换 取决于选择的值

> ID：13812834
> 
> 赞同：2
> 
> 时间：2012-12-11T02:44:23.117
> 
> 标签：jsf, primefaces

当用户选择特定单选按钮时，我想切换隐藏面板。使用最新版本的 primefaces。

例如：

```
<p:panel id="panel1" visible="false" widgetVar="firePanel" closable="true" toggleable="true">
 hello
</p:panel>

<p:selectOneRadio value="#{formBean.selectedOptions}" layout="pageDirection">
  <f:selectItem itemLabel="Option 1" itemValue="opt1" />
  <f:selectItem itemLabel="Option 2" itemValue="opt2" />
  <f:selectItem itemLabel="Option 3" itemValue="opt"/>                           
</p:selectOneRadio> 
```

我想实现这样的目标，但是在单击 RadioButton3 时，不使用命令按钮

```
<p:commandButton id="but" value="Show" onclick="firePanel.show();"/> 
```

这甚至可能吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T08:37:07.560

采取以下步骤：

1.  在您的支持 bean 中声明一个`boolean`变量来管理面板的状态并将其绑定到`visible`面板的属性

    ```
    boolean panelIsVisible;
    //getter and setter 
    ```

    ```
    <p:panel id="panel1" visible="#{formBean.panelIsVisible}" widgetVar="firePanel" closable="true" toggleable="true"> 
    ```

2.  定义一种方法来切换基于值的可见性布尔值`selectedOptions`

    ```
    public void changePanelState(){

        //set panelIsVisible to true or false based on whatever conditions you choose

    } 
    ```

3.  将`<p:ajax/>`事件添加到您的`<p:selectOneRadio/>`以在该菜单上的任何选择上触发 ajax 事件

    ```
    <p:selectOneRadio value="#{formBean.selectedOptions}" layout="pageDirection">
      <f:selectItem itemLabel="Option 1" itemValue="opt1" />
      <f:selectItem itemLabel="Option 2" itemValue="opt2" />
      <f:selectItem itemLabel="Option 3" itemValue="opt"/> 
      <p:ajax listener="#{formBean.changePanelState}" update="panel1"/>                          
    </p:selectOneRadio> 
    ```

    这是假设它与 selectOneRadio`panel1`相同。`<h:form/>`

# ruby-on-rails - 设计、OmniAuth 和 Facebook：“未找到。身份验证通道。”

> ID：13812844
> 
> 赞同：16
> 
> 时间：2012-12-11T02:45:26.970
> 
> 标签：ruby-on-rails, devise, omniauth

试图跟随[https://github.com/plataformatec/devise/wiki/OmniAuth:-Overview](https://github.com/plataformatec/devise/wiki/OmniAuth:-Overview)，我很难过。

我`config.omniauth :facebook, ENV['FB_APP_ID'], ENV['FB_APP_SECRET']`在我的 config/initializers/devise.rb 中，`devise_for :users, :controllers => { :omniauth_callbacks => "users/omniauth_callbacks" }`在我的 routes.rb 中，并定义了一个 OmniAuthCallbacks 控制器。

当我访问时`user_omniauth_authorize_path(:facebook)`，我得到： `Not found. Authentication passthru.`我不知道下一步该做什么。我没有使用路由全局，所以我不相信我需要定义一个 passthru 方法，但这样做只会给我一个 404。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-03-07T09:41:27.220

还要确保您已添加到 OmniauthCallbacksController 的路由：

```
devise_for :users, :controllers => { :omniauth_callbacks => "users/omniauth_callbacks" } 
```

并且您已将更新添加到用户模型中的设计声明：

```
devise :omniauthable, :omniauth_providers => [:facebook] 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-03-28T12:19:35.653

我有同样的错误。
对我有用的是重新启动 rails 服务器，以反映`config.omniauth :facebook, ENV['FB_APP_ID'], ENV['FB_APP_SECRET']`我对 config/initializers/devise.rb 所做的更改 ()。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-07-18T02:56:05.517

所以我在打开一个旧项目后偶然发现了这一点，在看到我的授权网址看起来像“user/auth/facebook.facebook”之后，我运行了一个 rake 路由并通过更改来解决它

```
<%= link_to "Sign in with Facebook", user_omniauth_authorize_path(:facebook) %> 
```

至

```
<%= link_to "Sign in with Facebook", user_facebook_omniauth_authorize_path %> 
```

`rake routes`显然，自命令返回以来，omniauth 路由的助手发生了变化：

```
user_facebook_omniauth_authorize   GET|POST   /users/auth/facebook(.:format)          omniauth_callbacks#passthru 
```

而不是几个月前我开始这个项目的时候。

```
user_omniauth_authorize            GET|POST   /users/auth/facebook(:provider)          omniauth_callbacks#passthru 
```

希望这篇文章对某人有所帮助。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2021-07-12T15:05:24.997

当您尝试使用`link_to`请求的位置时，可能会发生这种情况`GET`。

1.  您需要将其更改为`button_to`将创建表单的位置。
2.  或者，如果您有，则可以使用`link_to`with ，但我建议您使用该表单，因为它上面会有 CSRF；`method: :post``rails-ujs`
3.  您需要添加 gem [omniauth-rails_csrf_protection](https://github.com/cookpad/omniauth-rails_csrf_protection)以避免真实性错误。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-03-21T13:38:47.087

我应该早点列出这个，但我最终采用了“退出并重试”的方法；我删除了与 OmniAuth 相关的所有内容，并按照说明重新开始。我希望我知道，具体来说，我错了，但不幸的是，一旦我重试，它“就起作用了”。

tl;dr 按照[https://github.com/plataformatec/devise/wiki/OmniAuth:-Overview](https://github.com/plataformatec/devise/wiki/OmniAuth:-Overview)逐字逐句中的步骤操作，它应该可以工作

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-05-16T14:50:54.700

对于任何想知道如何解决这个问题的人，只需声明一个`passthru`方法，或者做我所做的，这是使用`action_missing`（不是`method_missing`，它在 Rails 4 中已弃用！）来捕获所有 users/auth/:provider urlsomniauth 使用一种方法。

例如，

```
class Users::OmniauthCallbacksController < Devise::OmniauthCallbacksController

  def action_missing(provider)
    # Set up authentication/authorizations here, and distribute tasks
    # that are provider specific to other methods, leaving only tasks
    # that work across all providers in this method. 
  end 
```

我希望这可以帮助其他被困在这里的人，我确实做到了。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-09-05T16:03:23.500

我今天花了一整天的时间试图追查这个问题，我终于在回顾 git 历史的时候找到了它，因为它曾经工作得更早。

事实证明，以某种方式切换语言环境的路由过滤器是万恶之源。我刚刚在我的路线中禁用了该`filter :locale`方法，并且授权请求通过了 facebook。该死的地狱，我很高兴我终于发现了这一点：）

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-11-16T02:50:22.640

看到`Not found. Authentication passthru.`意味着 Omniauth 控制器没有捕捉到路线。这很可能是因为路由是通过 GET 到达的，但最近默认只支持 POST。

天真的答案以及对[Google Oauth2 整数](https://github.com/zquestz/omniauth-google-oauth2)的建议是简单地重新启用 GET 请求：

```
OmniAuth.config.allowed_request_methods = [:get] 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-10-09T16:58:46.650

这可能会发生，因为使用 Devise 和 Omniauth 的配置**只能**在`config/initializers/devise.rb`. 不要创建`onfig/initializers/omniauth.rb`文件。

> 请记住，config.omniauth 将omniauth 提供程序中间件添加到您的应用程序中。这意味着您不应在 config/initializers/omniauth.rb 中再次添加此提供程序中间件，因为它们会相互冲突并导致始终失败的身份验证。

[https://github.com/heartcombo/devise/wiki/OmniAuth%3A-Overview#before-you-start](https://github.com/heartcombo/devise/wiki/OmniAuth%3A-Overview#before-you-start)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-04-30T08:46:25.947

尝试在设计初始化程序 ( *config/initializers/devise.rb* ) 文件中设置 omniauth_path_prefix。

对于用户类：

```
config.omniauth_path_prefix = "/users/auth" 
```

对于其他类（例如，当您使用帐户而不是用户时）：

```
config.omniauth_path_prefix = "/accounts/auth" 
```

翻译路线也是如此（我的情况）。我已经将“用户”翻译成“blabla”。为了让它工作，我必须将前缀设置为“/blabla/auth”。（仅适用于一种语言环境！）

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2020-07-03T11:28:08.330

确保在 user.rb 和 devise.rb 上编写相同的提供者拼写，例如 -

**用户.rb**

```
devise :database_authenticatable, :registerable,
     :recoverable, :rememberable, :trackable, :validatable, :confirmable, :omniauthable, omniauth_providers: [:google_oauth2, :facebook], authentication_keys: [:login], reset_password_keys: [:login], confirmation_keys: [:login] 
```

**设计.rb**

```
config.omniauth :google_oauth2, ENV["GOOGLE_OAUTH_CLIENT_ID"], ENV["GOOGLE_CLIENT_SECRET"],   
{
    scope: 'userinfo.email, userinfo.profile',
    prompt: 'select_account',
    image_aspect_ratio: 'square',
    image_size: 50
  }

config.omniauth :facebook, ENV['FACEBOOK_APP_ID'], ENV['FACEBOOK_APP_SECRET'], scope: 'email', info_fields: 'email, first_name, last_name', callback_url: "#{ENV["HOST_URL"]}/users/auth/facebook/callback" 
```

# mysql - 连接的强制索引在 mysql 上不起作用

> ID：13812846
> 
> 赞同：1
> 
> 时间：2012-12-11T02:45:35.923
> 
> 标签：mysql, sql, database, database-design, indexing

我对 2 个表 lineitem 和 part 的连接有一个查询，

```
select
        sum(l_extendedprice* (1 - l_discount)) as revenue
from
        lineitem force index for join (l_pk),
        part
where
        (
                p_partkey = l_partkey
                and p_brand = 'Brand#12'
                and p_container in ('SM CASE', 'SM BOX', 'SM PACK', 'SM PKG')
                and l_quantity >= 1 and l_quantity <= 1 + 10
                and p_size between 1 and 5 
                and l_shipmode in ('AIR', 'AIR REG')
                and l_shipinstruct = 'DELIVER IN PERSON'
        )
        or
        (
                p_partkey = l_partkey
                and p_brand = 'Brand#23'
                and p_container in ('MED BAG', 'MED BOX', 'MED PKG', 'MED PACK')
                and l_quantity >= 10 and l_quantity <= 10 + 10
                and p_size between 1 and 10
                and l_shipmode in ('AIR', 'AIR REG')
                and l_shipinstruct = 'DELIVER IN PERSON'
        )
        or
        (
                p_partkey = l_partkey
                and p_brand = 'Brand#34'
                and p_container in ('LG CASE', 'LG BOX', 'LG PACK', 'LG PKG')
                and l_quantity >= 20 and l_quantity <= 20 + 10
                and p_size between 1 and 15
                and l_shipmode in ('AIR', 'AIR REG')
                and l_shipinstruct = 'DELIVER IN PERSON'
        ); 
```

在 lineitem 上有索引，尝试使用索引进行连接 p_partkey = l_partkey

```
create index l_pk on tpch.lineitem(l_partkey); 
```

我尝试让mysql解释它并显示

```
| id | select_type | table    | type   | possible_keys | key     | key_len | ref                     | rows    | Extra       |       
+----+-------------+----------+--------+---------------+---------+---------+-------------------------+---------+-------------+
|  1 | SIMPLE      | lineitem | ALL    | l_pk          | NULL    | NULL    | NULL                    | 5982534 | Using where | 
|  1 | SIMPLE      | part     | eq_ref | PRIMARY       | PRIMARY | 4       | tpch.lineitem.L_PARTKEY |       1 | Using where | 
+----+-------------+----------+--------+---------------+---------+---------+-------------------------+---------+-------------+ 
```

我不明白为什么不使用索引 l_pk ？

谢谢！

# java - 如何删除 strus2 中的默认客户端错误消息？

> ID：13812849
> 
> 赞同：1
> 
> 时间：2012-12-11T02:45:44.770
> 
> 标签：java, css, jakarta-ee, struts2

任何想法如何消除以下错误？它来自我的validation.xml。这对我来说已经是多余的了……谢谢。

```
 Username must not be blanks
    Password must not be blanks

Username must not be blanks ---> How to remove this?
UserName:   
Password must not be blanks ---> How to remove this?
Password: 
```

实际上我想做的是在字段右侧显示错误消息。

```
UserName: ___________________  * Username must not be blanks
Password:____________________  * Password must not be blanks 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T07:58:15.567

为您的表单使用**简单**的模板。

```
<s:form theme="simple" ...> 
```

然后使用`<s:fielderror>`标签将您的字段错误放在任何您想要的地方。

```
<s:form ...>
    <s:textfield key="field1"> 
    <s:fielderror>
         <s:param>field1</s:param>
    </s:fielderror>
    ...
</s:form> 
```

然后，您只需要使用 CSS 即可实现该布局。

**编辑：**似乎如果你把`<s:fielderror>`你的字段错误放在一个列表中。`fielderror.ftl`您有两个选择，编辑它内部的模板`struts2.jar`或访问特定错误，`<s:property>`如下所示：

```
<s:property value="fieldErrors.get('field1').get(0)" /> 
```

此代码将仅提取该字段的第一个验证错误。

# java - 有没有办法取消一个键，这样我以后仍然可以用 java nio 读取它

> ID：13812854
> 
> 赞同：0
> 
> 时间：2012-12-11T02:46:40.387
> 
> 标签：java, netty, nio, mina

我们希望将 tcp 流控制作为新 java nio 库的主要组件。它会像这样工作......

1.  库将数据触发到 Listener.incomingData(DataChunk dataChunk);
2.  在调用 dataChunk.processed() 之前，即使有任何数据，库也不会再触发任何数据。
3.  通常，您可以在前几个 dataChunk 上调用 processes() 方法，但在某些消息的最后一个上，您写入某个远程套接字并给它一个回调处理程序。
4.  一旦调用了 write 回调，您就调用最后一个 dataChunk.processed() 以再次解除 tcp 流控制

大注意：如果您没有从 nic 缓冲区读取，第 2 步是 tcp 流控制自动启动的地方。这都是自动的（我们使用 java nio 对其进行了测试）。但问题是我们如何将密钥置于轮询器停止释放并等待除此之外的所有其他套接字上的数据的状态。我不介意它是否在有新数据时发布，因为我们会看到最后一个 dataChunk 尚未处理并忽略它，但我们不希望轮询线程循环 100% cpu。有没有办法实现这一点，这样我们就可以使用这个潜在的开源 nio 框架为任何服务器实现自动节流。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T03:16:36.773

不，选择器将查看它们的内部状态而不是来自系统的事件，因此当键设置为感知可读数据时，当数据在缓冲区中等待读取时，它将始终返回。

你有三个选择

从缓冲区读取数据并在本地存储，同时等待前一个块进行处理。

从选择器中注销键并在处理块时重新注册。

将密钥设置为不感知可读并在处理块时重置。

我认为这就是你想要的，切换阅读兴趣

```
selectionKey.interestOps(selectionKey.interestOps() ^ SelectionKey.OP_READ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T07:39:51.847

只需取消它并稍后重新注册频道，或者`OP_READ,`通过更改它来取消注册它`interestOps()`，并在您准备好再次读取它时将它们改回来。

# mysql - MySQL 查找部分重复项

> ID：13812856
> 
> 赞同：1
> 
> 时间：2012-12-11T02:46:47.570
> 
> 标签：mysql, database

我有下表，我正在尝试使用它。这是表格：

> 手机：
> - id：'1'，产品名称：'Apple'
> - id：'2'，产品名称：'Apple'
> - id：'3'，产品名称：'Samsung'
> - id：'4'，产品名称：'Alcatel phone '
> - id：'5'，产品名称：'阿尔卡特'
> - id：'6'，产品名称：'Blackberry'

我目前正在使用这个 MySQL 查询来不显示重复项：

> SELECT DISTINCT 产品名称 FROM`mobiles`

结果显示：

> *   苹果
> *   三星
> *   阿尔卡特电话
> *   阿尔卡特
> *   黑莓

现在我的问题是他们是否可以添加到我的 mysql 中以搜索数据库以检查第一个单词是否重复或类似的内容？或者，如果超过 8 个字符相同，则将其视为重复？这样我就可以让我的数据显示如下：

> *   苹果
> *   三星
> *   阿尔卡特
> *   黑莓

我希望有人可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T02:54:13.483

MySQL 的[SUBSTRING_INDEX](http://dev.mysql.com/doc/refman/5.6/en/string-functions.html#function_substring-index)救援：

```
SELECT DISTINCT SUBSTRING_INDEX(productname,' ',1) FROM mobiles 
```

# mysql - #1072 键列不存在 MySQL 外键错误

> ID：13812863
> 
> 赞同：2
> 
> 时间：2012-12-11T02:47:19.707
> 
> 标签：mysql

我搜索的答案可能有效，但没有解决。

我已经创建了这样的表，当创建表“爱好”时出现错误 1072。

```
CREATE  TABLE IF NOT EXISTS `project_r`.`user` (
  `user_id` INT NOT NULL ,
  `password` VARCHAR(45) NOT NULL ,
  `RealName` VARCHAR(45) NOT NULL ,
  `FamilyName` VARCHAR(45) NOT NULL ,
  `birthdate` VARCHAR(45) NOT NULL ,
  `Homecity` VARCHAR(45) NOT NULL ,
  `school_id` INT NOT NULL ,
  `school_enteryear` INT NOT NULL ,
  `email` VARCHAR(45) NULL ,
  `activestat` VARCHAR(45) NULL ,
  `onlinestat` VARCHAR(45) NULL ,
  `regtime` DATETIME NOT NULL ,
  `avatar` VARCHAR(45) NULL ,
  `status` VARCHAR(45) NULL ,
  `desc` VARCHAR(45) NULL ,
  `self_comment` VARCHAR(45) NULL ,
  `userMsg_id` INT NOT NULL ,
  PRIMARY KEY (`user_id`) ,
  INDEX `fk_user_school1_idx` (`school_id` ASC) ,
  CONSTRAINT `fk_user_school1`
    FOREIGN KEY (`school_id` )
    REFERENCES `project_r`.`school` (`school_id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB; 
```

然后创建表“爱好”

```
CREATE  TABLE IF NOT EXISTS `project_r`.`hobbies` (
  `hobby_user_id` INT NOT NULL ,
  `favorite_music` VARCHAR(45) NULL ,
  `favorite_game` VARCHAR(20) NULL ,
  `favorite_film` VARCHAR(45) NULL ,
  `favorite_book` VARCHAR(45) NULL ,
  `favorite_sport` VARCHAR(45) NULL ,
  `favorite_cartoon` VARCHAR(45) NULL ,
  `hobby` VARCHAR(45) NULL ,
  PRIMARY KEY (`user_id`) ,
  INDEX `fk_user_id` (`hobby_user_id` ASC) ,
  CONSTRAINT `fk_user_id`
    FOREIGN KEY (`hobby_user_id` )
    REFERENCES `project_r`.`user` (`user_id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB; 
```

添加或不添加 AUTO-INCREMENT 事物或添加到引用表的索引都不起作用。谢谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T02:55:59.020

在“爱好”表中，您尝试将 pk 设置为不存在的 user_id。将其更改为：

```
PRIMARY KEY (`hobby_user_id`) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T03:14:50.577

`user_id`表上的字段`hobbies`不存在，可能是您想`hobby_user_id`成为表中的主键`hobbies`：

```
 PRIMARY KEY (`hobby_user_id`), 
```

约束表上的外键`hobbies`没有错。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T02:54:51.963

您`PRIMARY KEY`在 中的列上`user_id`设置a `hobbies`，但没有这样的列。它被称为`hobby_user_id`。

```
 PRIMARY KEY (`hobby_user_id`) , 
```

`PRIMARY KEY`在我自己的数据库中进行的快速测试成功地创建了具有正确规范的这两个表。

# c# - 在 ASP.NET 中选择没有选择列的 Gridview 行

> ID：13812864
> 
> 赞同：0
> 
> 时间：2012-12-11T02:47:53.540
> 
> 标签：c#, asp.net, select, gridview, row

我是 ASP.NET 的新手和全新的。我需要通过单击网格视图中的一行而不是单击选择行列中的选择按钮来选择网格视图中的一行。谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-10T08:37:56.383

您可以将此添加到您的代码中，以使任何行的任何单元格都可选择。

```
//Select a row by clicking any cells of it
        protected void grdEmployeeList_RowDataBound(object sender, GridViewRowEventArgs e)
        {

            if (e.Row.RowType == DataControlRowType.DataRow)
            {
                e.Row.Attributes["onmouseover"] = "this.style.cursor='hand';this.style.textDecoration='underline';";
                e.Row.Attributes["onmouseout"] = "this.style.textDecoration='none';";

                e.Row.Attributes["onclick"] = ClientScript.GetPostBackClientHyperlink(this.grdEmployeeList, "Select$" + e.Row.RowIndex);
            }
        } 
```

然后在页面设计器源代码的第一行添加这个页面属性：

```
EnableEventValidation = "false" 
```

仅供参考，上面代码中指定的网格是指我的 gridview 对象。

只需用您的 Rows 填写 GridView 即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T04:13:28.767

是的，你可以这么做。您不想单击选择按钮，因此将网格中的数据设置为链接按钮以显示数据并单击它。以下是相同的代码

```
<asp:TemplateField HeaderText="CODE" ShowHeader="true" ItemStyle-CssClass="td" HeaderStyle-CssClass="grid_header"
                                ItemStyle-BorderWidth="1" ItemStyle-BorderColor="LightGray" HeaderStyle-Width="10%">
                                <ItemTemplate>
                                    <asp:LinkButton ID="lnkCode" runat="server" Text='<% #Bind("Amm_code") %>' CommandName="Select"
                                        ForeColor="Blue" ToolTip="Click To Edit"></asp:LinkButton>
                                </ItemTemplate>
                                <ItemStyle CssClass="td" />
                                <HeaderStyle CssClass="td" />
                            </asp:TemplateField> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T04:34:25.553

我认为你应该为此使用 jQuery。
这是一个很好的例子
[Asp net grid view select row using jquery](https://stackoverflow.com/questions/9355889/asp-net-grid-view-select-row-using-jquery)
这里也是一个很好的例子
[http://www.codedigest.com/Articles/ASPNET/324_Make_GridView_Row_Selectable_or_Clickable_using_jQuery_in_ASPNet.aspx](http://www.codedigest.com/Articles/ASPNET/324_Make_GridView_Row_Selectable_or_Clickable_using_jQuery_in_ASPNet.aspx)

# .htaccess - 我如何编辑 joomla htaccess 文件

> ID：13812869
> 
> 赞同：1
> 
> 时间：2012-12-11T02:48:25.177
> 
> 标签：.htaccess, joomla

我的 joomla 站点有一个默认的 htaccess 文件，但它不包含从 ipaddresses 拒绝的部分

默认的 htaccess 文件中有很多内容。

我在哪里可以将我的拒绝来自 ipaddresses 放在此文件中？

文件顶部在 rewritecond 上有 rewriteengine 几次

然后有很大一部分不同的选项似乎被注释掉了

接下来是底部的更多 rewritecond 行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:48:58.610

htaccess 机制很复杂，而且非常特定于站点。您不可能得到既简单又可靠的答案。您将必须了解您的网络服务器和 Joomla 安装是如何工作的，并进行一些实验。

清楚地阐明您要完成的工作以及原因。这是您网站安全计划的一部分吗？您是否试图阻止攻击者，或阻止除已知安全 IP 地址之外的所有人的访问？您要阻止哪些 IP 地址？你有没有想过如果攻击者转移到不同的 IP 地址而不是你的阻止列表会发生什么？

阅读[**Apache HTTP 服务器教程：.htaccess 文件**](http://httpd.apache.org/docs/current/howto/htaccess.html)。我已经链接到 Apache 2.4 的版本，但是您应该阅读您使用的 Apache 版本的文档。

阅读[Joomla！**安全清单**文档](http://docs.joomla.org/Security_Checklist)。有一篇[*htaccess 示例（安全）*文章](http://docs.joomla.org/Htaccess_examples_%28security%29)。它包括使用`deny from`，尽管可能不是您想到的用法。您还应该查看[文档的](http://docs.joomla.org/Category%3aSecurity)[**安全类别**](http://docs.joomla.org/Category%3aSecurity)[的索引](http://docs.joomla.org/Category%3aSecurity)**。**

 **您将需要进行实验，因此请确保您有办法尝试更改`.htaccess`文件，并在更改表现不佳时恢复到文件的先前版本。例如，您可以保留原始文件的副本，当更改导致问题时，将原始文件上传到站点，覆盖有问题的文件。

您需要通过了解您使用的 Web 服务器和版本以及 Joomla 的版本来决定要进行哪些更改！您正在使用。

综上所述，我同意乔恩·林的观点。如果您试图拒绝来自特定 IP 地址的访问，请将这些行添加到 .htaccess 文件的顶部，在注释之后但在行之前：

```
########## Begin - RewriteEngine enabled
RewriteEngine On
########## End - RewriteEngine enabled 
```

但是，由于您的环境的具体细节，请准备好第一次无法正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T04:06:50.593

在哪里添加这些东西并不重要`Deny From 1.2.3.4`，但是如果将它们添加到任何 mod_rewrite 指令之上可能会更有效，这样这些 IP 地址将立即通过 403 响应而无需请求 URI 通过重写引擎。**

# mvp - MVP 框架中的数据存储在哪里

> ID：13812870
> 
> 赞同：0
> 
> 时间：2012-12-11T02:48:46.083
> 
> 标签：mvp, gwt-mvp

我正在尝试在 MVP 中创建一个简单的联系人应用程序。

我有一个从数据库中获取的联系人对象列表，并在视图中仅显示联系人姓名。

当用户单击联系人姓名时，我会显示整个联系人对象。

我在哪里保存联系人对象？主持人？我不想每次都回到服务器。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T09:56:19.000

数据将存储在 Model 而不是 Presenter 中。每当用户单击 View 上的名称时，它应该触发应该在 Presenter 中绑定的事件/动作，然后调用 Model 方法，该方法将根据单击的名称返回所需的对象。

```
View to Presenter = Action/Event/Func
Model to Presenter = Action/Event/Func
Presenter to View/Model = Interface 
```

这些是用于在这些层之间移动的一些基本东西。如果不清楚，请告诉我。

希望能帮助到你。

# c# - 如何获取已将哪个类传递给方法

> ID：13812874
> 
> 赞同：4
> 
> 时间：2012-12-11T02:49:03.480
> 
> 标签：c#, .net

我有一个有 9 个不同属性的类，每个属性都是一个类

```
public class Vehicles
{
  Car car; //class
  Train train;  //class
  Plane plane; //class
} 
```

我将这个 Vehicle 对象传递给一个方法

例如

```
var Vehicles = new Vehicles();
Vehicles.Car = new Car()
Object1.WorkOutTransport(vehicle) 
```

我需要在 Object1 中做的是锻炼“车辆”已被实例化而不使用 switch 语句并检查其他是否为空

这不是一个“家庭作业问题”......我已经简化它只是为了说明问题

实际的车辆类有 9 个可以实例化的类

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T02:59:26.803

我建议重新考虑你的设计。

为什么不让您的所有车辆类型实现一个通用接口`IVehicle`，然后让您的`Vehicles`类有一个名为的属性`Vehicle`。

您只需担心一处房产。

```
public Interface IVehicle 
{
    ... //Properties Common to all vehicles
}

public class Car : IVehicle
{
    ... //Properties to implement IVehicle
    ... //Properties specific to Car
}

public class Vehicles
{
    public IVehicle Vehicle { get; set; }
}

var vehicles = new Vehicles();
vehicles.Vehicle = new Car();
... //Do whatever else you need to do. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T02:59:42.653

假设只有一个是非空的，你可以这样做：

```
Vehicle instance = vehicle.Car ?? vehicle.Train ?? vehicle.Plane; 
```

但是，如果你想对你做任何有用的事情，`instance`你就必须检查`typeof(instance)`并将其转换为正确的类..

您可能想考虑只拥有一个属性：

```
public class Vehicles
{
    public Vehicle VehicleInstance {get; set;}
} 
```

并移动功能，以便您的 WorkOutTransport 方法可以作用于`Vehicle`实例，而不是关心它具有哪个子类。在类中使用`virtual`或`abstract`方法，在子类中使用它们。`Vehicle``override`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T03:20:50.617

您可以强制接口继承者指定它们的类型：

```
enum VehicleType
{
    Passenger,
    Truck,
    // Etc...
}

public Interface IVehicle 
{
    VehicleType Type { get; }
    ... // Properties Common to all vehicles
}

public sealed class Truck : IVehicle
{
    // ... class stuff.

    // IVehicle implementation.
    public VehicleType Type { get { return VehicleType.Truck; } }
} 
```

这将使您不必查看每个类，而是确切地知道要转换的类型。

```
IVehicle vehicle = GetVehicle();

switch (vehicle.Type)
    case (VehicleType.Truck)
    {
        // Do whatever you need with an instance.
        Truck truck = (Truck)vehicle;
        break;
    }
    // ... Etc 
```

除了`switch`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T02:57:02.343

如果您使用不同的属性，则无法避免不检查哪个为空。我建议使用具有标识类型或覆盖`ToString`方法的属性的基类。

# java - 不能在私有方法中使用“this”保留词？

> ID：13812877
> 
> 赞同：-1
> 
> 时间：2012-12-11T02:49:15.757
> 
> 标签：java, this

有人可以解释为什么您不能在私有方法中使用“this”吗？

或者也许我读错了；它列出了一个私有方法并说“不适用于 this.operator”？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-11T02:53:39.780

我的猜测是您正在尝试`this`在`private static`方法中使用。这是不允许的，因为：

*   `this`指的是目标对象，并且

*   `static`方法没有目标对象的概念。

如果那没有帮助，请发布代码片段和确切的编译错误消息/上下文。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T02:59:22.747

**-** `static`处理类，**而不是**类的实例。

**-** `this` **仅适用于类的实例**，不适用于`static`成员。

**-**所以`this` **在**一个`private static`方法内是**行不通**的。

# c# - c# while循环运行额外时间

> ID：13812879
> 
> 赞同：1
> 
> 时间：2012-12-11T02:49:21.183
> 
> 标签：c#, multithreading, .net-3.5

试图让程序在 url 列表上运行并打开有限数量的线程来处理它们。问题是当 listPosition 为 18 时，while 循环将执行，即使 siteUrls.Count 为 18。但它永远不会显示我添加的任何测试消息框。线程代码本身有一个执行 currentThreads 的储物柜——在线程工作结束时。

为什么当条件变为（18<18）时它会启动while循环？为什么它尝试使用 18 启动线程但它不会显示消息框？仅当我放置的线程数超过列表项数时才会出现问题。这对我来说很奇怪，因为我认为当 listPosition 等于 _siteUrls.Count 时它不应该运行循环。我尝试添加各种“等待”线程启动，但它仍然不起作用。

ps 当我在增加 listPosition 之前添加 5ms 等待它变得更加稳定。它究竟需要等待什么，以便我可以更好地对其进行编程？

pps 线程不操作任何计数器，除了做 lock (ThreadsMinus) { currentThreads--;}

```
 listPosition = 0;

    while (listPosition < siteUrls.Count)
    {
        if (listPosition == 18)
        {
            MessageBox.Show("18");
        }
        currentThreads++;
        var t = new Thread(() => Register(siteUrls[listPosition], listPosition));
        t.Start();

        if (listPosition == 18)
        {
            MessageBox.Show("18");
        }
        while (currentThreads >= maxThreads)
        {
            Thread.Sleep(50);
        }
         listPosition++;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T03:11:07.517

您的代码以不安全的方式操作计数器 (`listPosition`和`currentThreads`)。请使用`Interlocked.Increment`和[`Interlocked.Decrement`](http://msdn.microsoft.com/en-us/library/1z4b2e5y.aspx)/或适当`lock`访问每个柜台。

此外，从样本中也不清楚在哪里`currentThreads`减少（正如 Mike Parkhill 所指出的），这是无限循环的最可能原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T03:09:59.357

尝试以下操作（请注意，您也需要在此处锁定 currentTheads）：

```
while (listPosition < siteUrls.Count)
{

    lock(ThreadsMinus){
      // only start a new thread if we haven't hit the maximum yet, otherwise keep spinning
      if (currentThreads < maxThreads){
         currentThreads++;
         var t = new Thread(() => Register(siteUrls[listPosition], listPosition));
          t.Start();
          listPosition++;
      } 
    }

} 
```

如果您在 maxThreads 下，它只会触发一个新线程，但因为并非每次迭代都会启动一个线程，您可以对任何给定的 listPosition 进行多次迭代，直到一个线程可用。因此，即使您的列表中只有 18 个 url，您也可以迭代该 while 循环一千次，然后根据您的 Register 方法需要多长时间，它们都得到服务。

# python - 如何用更少的代码编写相同的代码。Python

> ID：13812887
> 
> 赞同：0
> 
> 时间：2012-12-11T02:50:09.687
> 
> 标签：python, dictionary

我有这个方法：

```
def get_user_info(self):

    month       = choice(range(1,13))
    day         = choice(range(1,29))
    year        = choice(range(1966,1994))  
    f_name      = self.assign_name('FirstNames')
    l_name      = self.assign_name('LastNames')
    e_address   = f_name+l_name+year.__str__()+day.__str__()
    password    = f_name+l_name+'0008383'

    user_info = dict({
            'month'     : month,
            'day'       : day,
            'year'      : year,

            'f_name'    : f_name,
            'l_name'    : l_name,
            'e_address' : e-address,
            'password'  : password
    })

    print user_info 
```

它给了我正确的结果，但我填写就像我写了两次相同的代码一样。所以我的问题是如何在不首先创建变量的情况下获得相同的结果，然后将它们放入 dict()。

注意，我需要在不同的键：值对中使用 f_name 和 l_name 等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T03:24:06.803

我倾向于认为，考虑到你正在计算的值，你现在做的方式或多或少是你能做的最好的。有一些小的改进，例如跳过调用`dict`并使用`str`内置函数而不是`__str__`直接调用方法，但实际上并没有任何好的更改可以在高级别进行。

原因是您至少两次使用前五个变量中的每一个。您可以单独使用它们一次，作为存储在字典中它们自己键下的值（例如，该`f_name`值存储为`user_info["f_name"]`），并且您还使用它们来构建`e_address`和/或的值`password`。虽然可以将前五个值直接放入字典中，但再次将它们取出以用于其他计算需要比您现在拥有的代码更加冗余的代码。

所以，除非你想改变你的`e_address`or`password`计算以独立于其他值，否则我会坚持你所拥有的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T02:59:12.437

不确定您是否正在寻找重构代码或减少长度。

如果是后者，您可以进行多次赋值并减少行数。

所以像：

```
def get_user_info(self):

    month, day, year      = choice(range(1,13)) , choice(range(1,29)), choice(range(1966,1994))  
    f_name, l_name        = self.assign_name('FirstNames') , self.assign_name('LastNames')
    e_address, password   = f_name+l_name+year.__str__()+day.__str__(), f_name+l_name+'0008383' 
```

而且你真的不需要输入'dict（）'，`{}`已经这样做了！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T07:16:46.977

这可能是您在不牺牲可读性的情况下可以做到的最短时间（例如，改进[PEP8 编译](http://www.python.org/dev/peps/pep-0008/)）：

```
 def get_user_info(self):
        month = choice(range(1, 13))
        day = choice(range(1, 29))
        year = choice(range(1966, 1994))
        f_name = self.assign_name('FirstNames')
        l_name = self.assign_name('LastNames')
        print {'month' : month,
               'day' : day,
               'year' : year,
               'f_name' : f_name,
               'l_name' : l_name,
               'e_address' : f_name + l_name + str(year) + str(day),
               'password' : f_name + l_name + '0008383'} 
```

作为旁注，请重新考虑您的密码生成策略，它在您的代码中非常不安全。

你也注意到你可能错过了`month`作业`e_address`吗？

# iphone - Updatoqueue 和 Cocos2d scheduleUpdate 冲突

> ID：13812890
> 
> 赞同：0
> 
> 时间：2012-12-11T02:50:58.843
> 
> 标签：iphone, objective-c, ios, cocos2d-iphone

我正在使用 CoreMotion 收集加速度计数据以更改精灵的位置。为此，您需要使用块并更新到队列。但是，这样做会与 cocos2d scheduleUpdate 发生冲突。这是核心 self.motionManager = 的代码

```
[[CMMotionManager alloc] init];
        if (motionManager.isAccelerometerAvailable) {
            NSOperationQueue *queue = [[NSOperationQueue alloc] init];
            [self.motionManager
             startAccelerometerUpdatesToQueue:queue
             withHandler:^(CMAccelerometerData *accelerometerData, NSError *error) {
                 // Deceleration
                 float deceleration = 0.4f;                         // Controls how fast velocity deceerates/low = quck to change dir
                 // sensitivity
                 float sensitivity=0.6f;
                 //how fast the velocity can be at most
                 float maxVelocity=100;

                 // adjust the velocity basedo n current accelerometer acceleration
                 playerVelocity.x = playerVelocity.x*deceleration+accelerometerData.acceleration.x*sensitivity;

                 // we must limit the maximum velocity of the players sprite, in both directions
                 if (playerVelocity.x>maxVelocity) {
                     playerVelocity.x=maxVelocity;
                 }else if (playerVelocity.x < -maxVelocity) {
                     playerVelocity.x = -maxVelocity;
                 }

                 // schedule the -(void)update:(ccTime)delta method to be called every frame

                 [self scheduleUpdateWithPriority:0];
             }];

        } 
```

这是我的日程更新的代码：

```
/*************************************************************************/
//////////////////////////Listen for Accelerometer/////////////////////////
/*************************************************************************/
-(void) update:(ccTime)delta
{
    // Keep adding up the playerVelocity to the player's position
    CGPoint pos = player.position;
    pos.x += playerVelocity.x;

    // The player should also be stopped form going outside the screen
    CGSize screenSize = [CCDirector sharedDirector].winSize;
    float imageWidthHalved = player.texture.contentSize.width * 0.5f;
    float leftBorderLimit = imageWidthHalved;
    float rightBorderLimit = screenSize.width - imageWidthHalved;

    // preventing the player sprite from moving outside of the screen
    if (pos.x < leftBorderLimit) {
        pos.x=leftBorderLimit;
        playerVelocity=CGPointZero;
    } else if (pos.x>rightBorderLimit)
    {
        pos.x=rightBorderLimit;
        playerVelocity = CGPointZero;
    }

    // assigning the modified position back
    player.position = pos;
} 
```

我知道我可以绕过 scheduleUpdate 并将更新代码放在第一个块中，但我仍然希望能够使用 scheduleUpdates。我该如何解决这个问题？

非常感谢您的帮助。

PS这是我的错误

```
 *** Terminating app due to uncaught exception
 'NSInternalInconsistencyException', reason: 
'CCScheduler: You can't re-schedule an 'update' selector'. 
Unschedule it first' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:15:11.510

问题是每帧都会调用加速度计模块，因此您无法在那里安排更新。

只需在 init 中安排一次更新。然后使用 BOOl iVar/property 来跟踪您的更新方法是否应该处理它正在执行的操作。

或者移动块内的所有更新代码。毕竟，加速度计值每帧都会更新，因此您实际上不会错过“更新”。

# c# - Control + 键对修饰符不起作用

> ID：13812891
> 
> 赞同：0
> 
> 时间：2012-12-11T02:51:06.523
> 
> 标签：c#, silverlight-4.0

我正在尝试使用 Behavior 来抓住钥匙

```
public class mONITORKeyDown : Behavior<UserControl>
    {

        public static readonly DependencyProperty _ShortCuts =
                    DependencyProperty.Register(
                        "ShortCuts",
                        typeof(Dictionary<Tuple<ModifierKeys, Key>, ICommand>),
                        typeof(BillingMangerKeyDown),
                        new PropertyMetadata( null));

        protected override void OnAttached()
        {
          // ShortCuts = new Dictionary<Tuple<ModifierKeys, Key>, ICommand>();
            AssociatedObject.KeyDown += _KeyBoardBehaviorKeyDown;
        }

        protected override void OnDetaching()
        {

            AssociatedObject.KeyDown -= _KeyBoardBehaviorKeyDown;
        }

        void _KeyBoardBehaviorKeyDown(object sender, KeyEventArgs e)
        {
            if(Keyboard.Modifiers == KeyModifiers.Control && e.Key==Key.Down)

        }
        } 
```

问题是，一旦我单击 cntrl，它就会触发事件，然后单击 enter + 向下箭头没有任何作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T09:21:33.680

**我认为它应该可以帮助你！**

```
 private void InvoiceGrid_MouseLeftButtonUp(object sender, MouseButtonEventArgs e)
    {

        if (Keyboard.Modifiers == ModifierKeys.Control)
        {
            ((ResolutionVM)this.DataContext).PrepareListForMassUpdate();
        }
        else
        {
            ((ResolutionVM)this.DataContext).ClearListForMassUpdate();
        }

    } 
```

# android - 在 ScrollView 和 ViewFlipper 中启用 Scrollable EditText

> ID：13812892
> 
> 赞同：3
> 
> 时间：2012-12-11T02:51:09.903
> 
> 标签：android, android-layout, android-edittext, scrollview, viewflipper

我在 ViewFlipper 中有两个布局，每个布局中都包含 ScrollView。但是，我的 EditText 不起作用，我知道原因是由于 ScrollView。但是，尽管我尝试了[Disable ScrollView action](https://stackoverflow.com/questions/2229178/disable-scrollview-action)中的答案，但没有一个对我有用。我的xml在哪里有问题吗？我的xml如下所示：

PageFlipper

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent" 
android:layout_height="fill_parent"
android:background="#FFF"
android:id="@+id/flipperlayout"
android:orientation="vertical">

<!-- Header -->

<include
    android:id="@+id/include1"
    layout="@layout/prepostheader" />

    <RelativeLayout 
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content"
    android:background="#FFF"
    android:orientation="vertical">

<Button
    android:id="@+id/btnPage2"
    style="@style/PageBtnFont"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/include1"
    android:layout_marginTop="2dp"
    android:layout_marginRight="5dp"
    android:background="@drawable/button"
    android:text="Page 2" />

<Button
    android:id="@+id/btnPage1"
    style="@style/PageBtnFont"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/btnPage2"
    android:layout_alignBottom="@+id/btnPage2"
    android:layout_toLeftOf="@+id/btnPage2"
    android:layout_marginRight="5dp"
    android:background="@drawable/button"
    android:text="Page 1" />
</RelativeLayout>

<ViewFlipper
    android:id="@+id/flipper" 
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent">        

    <include layout="@layout/prepostform" 
        android:adjustViewBounds="true"/>
    <include layout="@layout/prepostform2" 
        android:adjustViewBounds="true"/>

</ViewFlipper> 
```

第1页

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/editFormLayout"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#FFF"
android:orientation="vertical" >

<ScrollView
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@+id/scrollView"
    android:layout_weight="1"
    android:padding="5px">

<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:adjustViewBounds="true"
    android:src="@drawable/formprepost" />

<EditText
    android:id="@+id/name"
    android:layout_width="400dp"
    android:layout_height="35dp"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/include1"
    android:layout_marginRight="90dp"
    android:layout_marginTop="134dp"
    android:background="#0000"
    android:ellipsize="start"
    android:inputType="textCapWords|textPersonName"
    android:lines="1"
    android:maxLines="1"
    android:textAppearance="@style/TextStyle1" >

</EditText>

<EditText
    android:id="@+id/school"
    android:layout_width="400dp"
    android:layout_height="35dp"
    android:layout_marginTop="-8dp"
    android:layout_alignLeft="@+id/name"
    android:inputType="textCapWords|textPersonName"
    android:background="#0000"
    android:textAppearance="@style/TextStyle1"
    android:ellipsize="start"
    android:maxLines = "1"
    android:lines = "1"
    android:layout_below="@+id/name" />

<EditText
    android:id="@+id/supervisor"
    android:layout_width="400dp"
    android:layout_height="35dp"
    android:layout_marginTop="-9dp"
    android:layout_alignLeft="@+id/school"
    android:inputType="textCapWords|textPersonName"
    android:background="#0000"
    android:textAppearance="@style/TextStyle1"
    android:ellipsize="start"
    android:maxLines = "1"
    android:lines = "1"
    android:layout_below="@+id/school" />

<EditText
    android:id="@+id/date"
    android:layout_width="200dp"
    android:layout_height="35dp"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/supervisor"
    android:layout_marginLeft="185dp"
    android:inputType="textCapWords|textPersonName"
    android:textAppearance="@style/TextStyle1"
    android:background="#0000"
    android:ellipsize="start"
    android:maxLines="1"
    android:layout_marginTop="116dp">
</EditText>

<CheckBox
    android:id="@+id/tick1"
    android:layout_width="540dp"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:button="@drawable/checkbox_selector"
    android:layout_below="@+id/date"
    android:layout_marginLeft="154dp"
    android:layout_marginTop="43dp"/>

<CheckBox
    android:id="@+id/tick2"
    android:layout_width="240dp"
    android:layout_height="wrap_content"
    android:layout_marginTop="-11dp"
    android:layout_alignLeft="@+id/tick1"
    android:button="@drawable/checkbox_selector"
    android:layout_below="@+id/tick1"/>

<CheckBox
    android:id="@+id/tick3"
    android:layout_width="270dp"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/tick2"
    android:layout_marginTop="-12dp"
    android:button="@drawable/checkbox_selector"
    android:layout_below="@+id/tick2" />

<EditText
    android:id="@+id/comment1"
    android:layout_width="614dp"
    android:layout_height="180dp"
    android:layout_alignParentLeft="true"
    android:layout_alignRight="@+id/tick1"
    android:layout_below="@+id/tick3"
    android:layout_marginLeft="94dp"
    android:layout_marginTop="23dp"
    android:gravity="top|left"
    android:inputType="textCapSentences|textMultiLine"
    android:textAppearance="@style/TextStyle1" >

</EditText>

<EditText
    android:id="@+id/comment2"
    android:layout_width="614dp"
    android:layout_height="165dp"
    android:layout_alignLeft="@+id/comment1"
    android:layout_alignRight="@+id/comment1"
    android:layout_below="@+id/comment1"
    android:layout_marginTop="90dp"
    android:gravity="top|left"
    android:inputType="textCapSentences|textMultiLine" />

<ImageButton
    android:id="@+id/signature1"
    android:layout_width="170dp"
    android:layout_height="50dp"
    android:layout_alignLeft="@+id/date"
    android:layout_below="@+id/comment1"
    android:layout_marginLeft="49dp"
    android:background="#0000"/>

<ImageButton
    android:id="@+id/signature2"
    android:layout_width="170dp"
    android:layout_height="50dp"
    android:layout_alignLeft="@+id/supervisor"
    android:layout_below="@+id/comment2"
    android:background="#0000" /> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-11T07:44:43.917

**主要活动类：**

您可以按照以下方式执行此操作，也可以查看此[链接](https://stackoverflow.com/questions/9770252/scrolling-editbox-inside-scrollview)

```
 EditText EtOne = (EditText) findViewById(R.id.comment1);
    EtOne.setOnTouchListener(new OnTouchListener() {
                @Override
                public boolean onTouch(View v, MotionEvent event) {
                    if (v.getId() == R.id.comment1) {
                        v.getParent().requestDisallowInterceptTouchEvent(true);
                        switch (event.getAction() & MotionEvent.ACTION_MASK) {
                        case MotionEvent.ACTION_UP:
                            v.getParent().requestDisallowInterceptTouchEvent(false);
                            break;
                        }
                    }
                    return false;
                }
            }); 
```

# f# - Seq.iter 的两种用法在性能上的巨大差异

> ID：13812897
> 
> 赞同：0
> 
> 时间：2012-12-11T02:51:34.630
> 
> 标签：f#, iteration, seq

以下是说明我的问题的MWE：

```
let f (n : int) : unit =
    {1 .. n}
    |> Seq.iter (fun s ->
        // Do something memory intensive, without retaining anything
        ()
        )
    ()

// First call
f 100

// Second call
{1 .. 10}
|> Seq.iter (fun s -> f 10) 
```

尽管两个调用的最终结果相同，但第一个调用的性能比第二个调用差得多。第一次调用的内存使用率高达 95%，系统速度变慢。第二个的内存使用率永远不会超过 50%。

有人可以解释为什么，以及我应该如何预见它吗？在此先感谢您的帮助。

# android - Android：重置活动 onClick

> ID：13812898
> 
> 赞同：5
> 
> 时间：2012-12-11T02:51:35.507
> 
> 标签：android, android-activity

我有一个活动，在那个活动上有几个按钮可以用数字等做不同的事情。虽然我希望能够让用户重置/（重新启动？）活动回到初始状态状态，而无需用户点击后退按钮或重新启动应用程序。

我想创建一个重置按钮。我知道如何制作按钮本身，但我不知道如何重置活动的细节。

```
@Override
public void onClick(View v) {
    switch (v.getId()) {
    case R.id.button1:
        // do stuff
    break;
    case R.id.button2:
        // do stuff
        break;      
    case R.id.button3:
        // do stuff
        break;
    case R.id.reset:
        // what goes here?
    default:
        break;
    }
} 
```

这是怎么做到的？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-11T02:57:16.883

这将重新启动您的活动。

```
@Override
public void onClick(View v) {
    switch (v.getId()) {
    case R.id.button1:
        // do stuff
    break;
    case R.id.button2:
        // do stuff
        break;      
    case R.id.button3:
        // do stuff
        break;
    case R.id.reset:
         Intent intent = getIntent();
         finish();
         startActivity(intent);    default:
        break;
    }
} 
```

您可以添加以下内容以摆脱花哨的动画。

```
overridePendingTransition(0, 0);
intent.addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION); 
```

# python - Python从文件中提取和排序数据

> ID：13812901
> 
> 赞同：0
> 
> 时间：2012-12-11T02:51:55.333
> 
> 标签：python, file, csv, formatting

我正在尝试从以下格式的大型 CSV 文件中提取数据，假设“x”是文本或整数形式的数据。每个分组都有一个唯一的 id，但每个分组或颜色的行数并不总是相同。数据用逗号与颜色分开。

```
id, x
red, x
green, x
blue, x 
black, x

id, x
yellow, x
green, 
blue, x 
black, x

id, x
red, x
green, x
blue, x
black, x

id, x
red, x
green, x
blue, x

id, x
red, x
green, x
blue, x 
black, x 
```

我想以列格式重新排列数据。ID 应该是第一列，任何数据都用逗号分隔。我的目标是让它读取行中的第一个单词并将其放在适当的列中。

```
line 0 - ID - red - green - blue - yellow - black
line 1 - x, x, x,  , x,
line 2 -  , x, x, x, x,
line 3 - x, x, x,  , x,
line 4 - x, x, x,  ,  ,
line 5 - x, x, x,  , x, 
```

这就是我正在尝试的...

```
readfile = open("db-short.txt", "r")
datafilelines = readfile.readlines()

writefile = open("sample.csv", "w")

temp_data_list = ["",]*7
td_index = 0

for line_with_return in datafilelines:
    line = line_with_return.replace('\n','') 
    if not line == '':
        if not (line.startswith("ID") or 
                line.startswith("RED") or
                line.startswith("GREEN") or
                line.startswith("BLUE") or
                line.startswith("YELLOW") or
                line.startswith("BLACK") ):
            temp_data_list[td_index] = line
            td_index += 1

            temp_data_list[6] = line
        if (line.startswith("BLACK") or line.startswith("BLACK")):
            temp_data_list[5] = line
        if (line.startswith("YELLOW") or line.startswith("YELLOW")):
            temp_data_list[4] = line
        if (line.startswith("BLUE") or line.startswith("BLUE")):
            temp_data_list[3] = line
        if (line.startswith("GREEN") or line.startswith("GREEN")):
            temp_data_list[2] = line
        if (line.startswith("RED") or line.startswith("RED")):
            temp_data_list[1] = line
        if (line.startswith("ID") or line.find("ID") > 0):
            temp_data_list[0] = line
    if line == '':
        temp_data_str = ""
        for temp_data in temp_data_list:
            temp_data_str += temp_data + ","
        temp_data_str = temp_data_str[0:-1] + "\n"
        writefile.write(temp_data_str)

        temp_data_list = ["",]*7 
        td_index = 0

if temp_data_list[0]:
    temp_data_str = ""
    for temp_data in temp_data_list:
        temp_data_str += temp_data + ","
    temp_data_str = temp_data_str[0:-1] + "\n"
    writefile.write(temp_data_str)
readfile.close()
writefile.close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T03:23:02.100

这假设 Python < 2.7（因此没有利用打开多个文件的优势，`with`使用内置的 写入标题`writeheaders`等。请注意，为了使其正常工作，我删除了逗号之间的空格在你的 CSV 中。正如@JamesHenstridge 所提到的，绝对值得阅读该`csv`模块，以便更有意义。

```
import csv

with open('testfile', 'rb') as f:
  with open('outcsv.csv', 'wb') as o:
    # Specify your field names
    fieldnames = ('id', 'red', 'green', 'blue', 'yellow', 'black')

    # Here we create a DictWriter, since your data is suited for one
    writer = csv.DictWriter(o, fieldnames=fieldnames)

    # Write the header row
    writer.writerow(dict((h, h) for h in fieldnames))

    # General idea here is to build a row until we hit a blank line,
    # at which point we write our current row and continue
    new_row = {}
    for line in f.readlines():
      # This will split the line on a comma/space combo and then
      # Strip off any commas/spaces that end a word
      row = [x.strip(', ') for x in line.strip().split(', ')]
      if not row[0]:
        writer.writerow(new_row)
        new_row = {}
      else:
        # Here we write a blank string if there is no corresponding value;
        # otherwise, write the value
        new_row[row[0]] = '' if len(row) == 1 else row[1].strip()

    # Check new_row - if not blank, it hasn't been written (so write)
    if new_row:
      writer.writerow(new_row) 
```

使用上面的数据（输入一些以逗号分隔的随机数字），它写道：

```
id,red,green,blue,yellow,black
x,"2,8","2,4",x,,x
x,,,"4,3",x,x
x,x,x,x,,x
x,x,x,x,,
x,x,x,x,,x 
```

# html - 调整大小的 HTML 页面

> ID：13812905
> 
> 赞同：-1
> 
> 时间：2012-12-11T02:52:28.763
> 
> 标签：html, css, web

我目前正在设计一个网站。到目前为止，有一个主页、关于页面和博客页面。我将所有代码从仅包含菜单栏的主页复制到其他页面。当我在页面之间切换时，关于和博客页面的大小会略有调整。这是什么原因造成的。它们包含来自主页的确切代码。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T14:47:18.357

所以我发现了这个问题，我觉得自己像个菜鸟。我在笔记本电脑上进行编码，并（最初）使用 Firefox 检查代码。在主页上工作时，我稍微放大了一点。我忘记了缩放没有在页面之间转移。我在所有三个页面上都进行了相同的缩放，一切都很好。

让这成为孩子们的一堂课，最简单的解决方案在大多数情况下都是正确的。

# php - 使用 php 和 .txt 文件将表单提交到文件

> ID：13812906
> 
> 赞同：-3
> 
> 时间：2012-12-11T02:52:32.930
> 
> 标签：php, html, forms

我知道这是一个相对基本的问题，但我似乎无法在任何地方找到完整的答案。除了重新加载之外，如何在不更改浏览器内容的情况下将 HTML 表单提交到平面 .txt 文件。这是我的 HTML 文件中的表单内容：

```
<form name="input" action="form.php" method="post">
Zip: <input type="text" name="zip">
<input type="submit" value="Submit">
</form> 
```

这是我的php：

```
<?php

$myFile = "data.txt";

$fh = fopen($myFile, 'a');

$zip = $_POST["zip"];

$comma_delmited_list = explode(",", $zip) . "\n";

fwrite($fh, $comma_delmited_list);

fclose($fh);

?> 
```

其中 form.php、data.txt 和 .html 文件位于同一目录中，不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T03:12:37.300

如果您在浏览器中看到 PHP 代码，则服务器（如果有）未设置为处理 PHP 内容。你安装PHP了吗？你使用的环境是什么？阿帕奇？nginx？去爸爸，或其他主机？

做你真正想做的事（一旦你的环境正常工作）......

您需要使用 AJAX 来完成您的要求。去阅读有关 jQuery 或其他一些 JavaScript 库的信息，或者甚至只是使用基本的 JavaScript。这并不难做到。PHP 文件将在后台运行并创建您的文件，而您的页面则茫然地盯着您，除非您执行某些操作来表明该文件已创建。

# sorting - 使用嵌套的 DIVS 对文章标签进行排序，日期不起作用

> ID：13812907
> 
> 赞同：1
> 
> 时间：2012-12-11T02:52:43.863
> 
> 标签：sorting, date, text, article

我一直在尝试对日期文本和链接进行排序。在这个问题[Use jQuery to Sort DIV based on Grandchild DIVS](https://stackoverflow.com/questions/10920201/use-jquery-to-sort-div-based-on-grandchild-divs?answertab=active#tab-top)的帮助下，我能够走得很远。目前，日期被读取为文本字符串而不是日期字符串。我只需要弄清楚如何将文本转换为日期字符串。任何帮助，将不胜感激。

```
 `<script type='text/javascript'>
        $(document).ready(function() {
        function sortUsingNestedText(parent, childSelector, keySelector, caller) {
        var articles;

        var items = parent.children(childSelector).sort(function(a, b) {
            var vA = $(keySelector, a).text();
            var vB = $(keySelector, b).text();
            return (vA < vB) ? -1 : (vA > vB) ? 1 : 0;
        });

        var articles = $();
        items.each(function() {
            if ($(this).text().indexOf("articles") != -1) { //if it contains "articles"
                articles = articles.add($(this)); //adds to the articles jQuery object
                items = items.not($(this)); //and remove from items
            }
        });

        if (caller.data('order_by') == 'asc') {
            articles = articles.sort(function(a, b) {
                var vA = $(a).text();
                var vB = $(b).text();
                return (vA < vB) ? -1 : (vA > vB) ? 1 : 0;
            });
        }

        if (caller.data('order_by') == 'desc') { //alert('desc pattern');
            caller.data('order_by', 'asc');
            parent.append(items.get().reverse());
            parent.append(articles.get().reverse());
        } else { //alert('asc pattern');
            caller.data('order_by', 'desc');
            parent.append(articles);
            parent.append(items);
            }
        }

        $('#date').data("sortKey", "div.article-preview-date").data('order_by', 'desc');
        $('#name').data("sortKey", "div.article-preview").data('order_by', 'desc');

        $("#date").click(function() {
         $('.article-preview-left-col > .article-preview-date > span').contents().unwrap();
         $('.blog-year-month').remove();
         sortUsingNestedText($('#sort'), "article", $("#date").data("sortKey"), $(this));

        });

        $("#name").click(function() {
        $('.article-preview-left-col > .article-preview-date > span').contents().unwrap();
        $('.blog-year-month').remove();
        sortUsingNestedText($('#sort'), "article", $("#name").data("sortKey"), $(this));
        });

        }) 

        </script>
        </head>
        <body>

      <ul id="date-title-toggle">
        <li class="list-alpha" id="date"><a href="#">Date</a></li>
        <li class="list-omega" id="name"><a href="#">Title</a></li>
      </ul>

    <section id="sort">
       <span class="blog-year-month">2012</span>
      <article class="articles">
        <div class="article-preview-left-col">
          <div class="article-preview-date"> <span class="month">January</span> <span class="day">10</span> <span class="year">2011</span> </div>
           </div>
        <div class="article-preview">
            <h1><a href="/news/newsroom/news-and-numbers/032012.html">Six in 10 Obese Adults Have Joint Pain</a></h1>
            <!--?psx-end-slot ahrqTranslation?-->
          </div>

      </article>

      <article class="articles">
        <div class="article-preview-left-col">
          <div class="article-preview-date"> <span class="month">January</span> <span class="day">31</span> <span class="year">2010</span> </div>
        </div>
         <div class="article-preview">
            <h1><a href="/news/newsroom/news-and-numbers/012512.html">Hospital Stays Involving C. difficile Infections Leveled Off After 300 Percent Increase Since 1993</a></h1>
            <!--?psx-end-slot ahrqTranslation?-->
          </div>

      </article>

      <article class="articles"> 
        <div class="article-preview-left-col">
          <div class="article-preview-date"> <span class="month">January</span> <span class="day">30</span> <span class="year">2012</span> </div>
        </div>
         <div class="article-preview">
            <h1><a href="/news/newsroom/news-and-numbers/012512.html">Hospital Stays Involving C. difficile Infections Leveled Off After 300 Percent Increase Since 1993</a></h1>
            <!--?psx-end-slot ahrqTranslation?-->
          </div>

      </article>

      <article class="articles">
        <div class="article-preview-left-col">
          <div class="article-preview-date"> <span class="month">January</span> <span class="day">15</span> <span class="year">2012</span> </div>
        </div>
         <div class="article-preview">
            <h1><a href="/news/newsroom/news-and-numbers/012512.html">Hospital Stays Involving C. difficile Infections Leveled Off After 300 Percent Increase Since 1993</a></h1>
            <!--?psx-end-slot ahrqTranslation?-->
          </div>

      </article>

      <article class="articles">
        <div class="article-preview-left-col">
          <div class="article-preview-date"> <span class="month">January</span> <span class="day">27</span> <span class="year">2012</span> </div>
        </div>
        <div class="article-preview">
            <h1><a href="/news/newsroom/news-and-numbers/011212.html">Most Health Care Costs Incurred by Few Americans</a></h1>
            <!--?psx-end-slot ahrqTranslation?-->
          </div>

      </article>

      <article class="articles">
        <div class="article-preview-left-col">
          <div class="article-preview-date"> <span class="month">January</span> <span class="day">25</span> <span class="year">2012</span> </div>
        </div>
        <div class="article-preview">
            <h1><a href="/news/newsroom/news-and-numbers/030712.html">Hospital Readmission Rates Higher for Chronic Conditions</a></h1>
            <!--?psx-end-slot ahrqTranslation?-->
          </div>

      </article> 
```

`

# javascript - 比较 iFrame 中的 iFrame ID

> ID：13812915
> 
> 赞同：0
> 
> 时间：2012-12-11T02:53:25.490
> 
> 标签：javascript, jquery, iframe, if-statement, identity

我想比较 iFrame 中的父 iFrame ID，如下所示的内容将放置在 iFrame 内...

```
if(window.Id === 'fancybox-content') {
//scripts
}
else {
//scripts
} 
```

有谁知道获取 iFrame ID 的方法，因为 window.Id 当然不起作用。

顺便说一下，我的 iFrame 与父窗口位于相同的域中。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T02:57:34.073

```
window.frameElement.id 
```

将获得 iframe id。

# arrays - 分配一个无符号字符数组来存储整数

> ID：13812917
> 
> 赞同：1
> 
> 时间：2012-12-11T02:53:46.817
> 
> 标签：arrays, char, segmentation-fault, malloc, typedef

当我测试以下代码时，我不断收到分段错误。搜索网络后，我目前无法找到答案。

```
a = (byte *)malloc(sizeof(byte) * x ) ; 

for( i = 0 ; i < x-1 ; i++ )
{
scanf("%d", &y ) ;
a[i] = y ;
} 
```

y 和 x 都被初始化。X 是用户确定的数组大小。分段错误出现在要添加的倒数第二个整数上，我通过添加 printf("roar") 找到了这一点；在将 a[i] 设置为 y 并一次输入一个数字之前。Byte 是 unsigned char 的 typedef。

注意：我也尝试过使用

```
a[i] = (byte)y ; 
```

A初始化如下

```
byte *a ; 
```

如果你需要查看整个代码是这样的：

```
#include <stdio.h>
#include <stdlib.h>
#include "sort.h"

int p_cmp_f () ;

int main( int argc, char *argv[] ) 
{
  int x, y, i, choice ;

  byte *a ;

  while( choice !=2 )
    {
      printf( "Would you like to sort integers?\n1\. Yes\n2\. No\n" ) ;

      scanf("%d", &choice ) ;

      switch(choice)
    {
    case 1:
      printf( "Enter the length of the array: " ) ;

  scanf( "%d", &x ) ;

  a =  (byte *)malloc(sizeof( byte ) * x ) ;

  printf( "Enter %d integers to add to the array: ", x ) ;

  for( i = 0 ; i < x -1 ; i++ )
    {
    scanf( "%d", &y ) ;

    a[i] = y ;
    }
  switch( choice )
    {
    case 1:
      bubble_sort( a, x, sizeof(int), p_cmp_f ) ;

      for( i = 0 ; i < x ; i++ )
    printf( "%d", a[i] ;

      break ;

    case 2:
      selection_sort( a, x, sizeof(int),  p_cmp_f ) ;

      for( i = 0 ; i < x; i++ )
    printf( "%d", a[i] ;

      break ;

    case 3:
      insertion_sort( a, x, sizeof(int), p_cmp_f ) ;

      for( i = 0 ; i < x ; i++ )
    printf( "%d", a[i] ;

      break ;

    case 4: 
      merge_sort( a, x, sizeof(int), p_cmp_f ) ;

      for( i = 0 ; i < x ; i++ )
    printf( "%d", a[i] ;

      break ;

    case 5:
      quick_sort( a, x, sizeof(int), p_cmp_f ) ;

      for( i = 0 ; i < x ; i++ )
    printf( "%d", a[i] ;

      break ;

    default:
      printf("Enter either 1,2,3,4, or 5" ) ;

      break ;
    }
    case 2:
      printf( "Thank you for using this program\n" ) ;

      return 0 ;

      break ;

    default: 
      printf( "Enter either 1 or 2: " ) ;

    break ;
    }
}
  free(a) ;

  return 0 ;
}

int p_cmp_f( byte *element1, byte *element2 )
{
  return *((int *)element1) - *((int *)element2) ;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T04:30:37.680

运行该代码我得到一个调试异常，因为未定义选择的初始值，您应该添加

```
choice = 0; 
```

在while循环之前。还有以下声明：

```
for( i = 0 ; i < x -1 ; i++ ) 
```

应该：

```
for( i = 0 ; i < x; i++ ) 
```

如果您使用的编译器检测到未初始化的内存，则这两者中的任何一个都可能导致异常。进行这些更改后，它在 Visual Studio 2010 下对我来说很好。我还建议为您的编译器打开最大警告级别，它可能会选择第一种情况。

我不确定这是否是您想要的，但是在内部 case 语句的嵌套案例中，最后的中断丢失了，所以它总是转到“感谢您使用这个程序”部分，而不是循环返回另一个选择。也因为 return 语句用于退出函数，而不是仅仅让它下降到底部 free(a) 永远不会被调用。

我建议不要将 case 嵌套成两个函数，而是将顶层 case 保留在原处，然后使用 perform_sort 之类的函数，它有一个 case 可以根据用户输入进行正确的排序。这将使这一切更容易遵循，您还可以在调用该函数后打印结果，而不是复制循环来打印结果。

# python - 使用 if 检查实例

> ID：13812924
> 
> 赞同：1
> 
> 时间：2012-12-11T02:54:39.880
> 
> 标签：python, if-statement

以下是按预期工作的代码块。

```
 for key in context:
        if isinstance(context[key],collections.Iterable):
            queryString += '%s=%s&' % (key, urllib.quote(context[key]))
        else:
            queryString += '%s=%s&' % (key, context[key])
    return queryString 
```

但是我不明白 if 块的用途。下面的工作不应该吗？

```
for key in context:
    queryString += '%s=%s&' % (key, context[key])
return queryString 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T03:05:01.957

它基本上是在说“在转换为字符串表示时引用任何不是数字或序列的东西”。它转义字符以使它们进行urlencoded。

将`if`阻止它引用`int`,`float`等，因为这些会使`quote`函数崩溃。

```
context = {'a': 'a b c', 'b': ('a', '@', 'c'), 'c': 1}
queryString = ''

for key in context:
    if isinstance(context[key],collections.Iterable):
        queryString += '%s=%s&' % (key, urllib.quote(context[key]))
    else:
        queryString += '%s=%s&' % (key, context[key])

print queryString
# a=a%20b%20c&c=1&b=a%40c& 
```

尽管这仅取决于您的潜在输入可能是什么（上下文的值）才有意义。它会崩溃说，一个整数列表。

不使用`quote`看起来像这样：

```
for key in context:
    queryString += '%s=%s&' % (key, context[key])

# invalid url format
# a=a b c&c=1&b=('a', '@', 'c')& 
```

并且运行`quote`一切将导致：

```
for key in context:
    queryString += '%s=%s&' % (key, urllib.quote(context[key]))
...
TypeError: argument 2 to map() must support iteration 
```

# php - PHP 子类 Magic __isset 有效，但 __get 无效

> ID：13812927
> 
> 赞同：25
> 
> 时间：2012-12-11T02:54:52.150
> 
> 标签：php, inheritance, mongodb-php, magic-methods

我有一个抽象父类`Mongo_Document`（来自[mongodb-php-odm](https://github.com/colinmollenhour/mongodb-php-odm/)）和一个继承类`Model_ActionPlan`。 `Mongo_Document`具有神奇的 __isset 和 __get 方法，它们与类中的数组交互`Mongo_Document`。

我正在尝试使用以下代码（来自方法内部的代码段`Model_ActionPlan`）：

```
if (isset($this->status))
{
    if (($this->status === "closed") AND ($this->close_type != "failure"))
    {
        return;
    }
} 
```

（请注意，`close_type`如果 ，则保证设置`status == 'closed'`。）

`isset`调用返回，然后`true`执行继续到下一条语句。在那里，我收到以下错误：

```
 Undefined property: Model_ActionPlan::$status 
```

但是，如果我替换`$this->status`为`parent::__get('status')`，此代码将按预期工作。请注意，程序中的其他任何地方，我都可以使用：

```
$ap = new Model_ActionPlan($plan_id);
echo $ap->status;
// Prints 'closed' (or 'active') as expected 
```

只有在这里，在类本身内部，这不起作用。

我环顾四周，似乎找不到任何地方说不能在子类中调用魔术方法。我可以改用`parent::__get`调用，但我认为这可能是错误的方法。有谁知道是否有正确/更好的方法来做到这一点？

**2012-12-16 更新 #1：** 父类的完整代码[在 Github 上](https://github.com/colinmollenhour/mongodb-php-odm/blob/master/classes/mongo/document.php)。

**2012 年 12 月 18 日更新 #2：** 对于那些询问在哪里或是否设置正确的人，答案是由于调用`parent::__get('status')` **确实**有效，问题显然不是变量没有设置。正在从名为的`__get()`私有实例变量中获取数据`_object`。如果 I `var_dump($this)`，我看到它`$this->_object['status']` *确实*等于预期的“关闭”值。

**更新 #3：** 子类的代码可在[https://gist.github.com/4332062](https://gist.github.com/4332062)获得。重要的部分从第 69 行开始。

* * *

我已经看到[了这个类似的问题](https://stackoverflow.com/q/5421295/829970)，但是那个问题是关于使用父母的魔法方法来获取孩子的属性，而我的问题是使用父母的吸气剂来获取父母的属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T01:20:22.243

父级中的 __get 函数有些复杂，所以我还没有完全弄清楚是否会发生以下情况。如果您的 __get 函数一旦被调用，就会以某种方式触发另一个调用回自身（可能对堆栈上的其他函数进行一些干预调用），这正是会发生的情况。

请参阅[http://php.net/manual/en/language.oop5.overloading.php#55486](http://php.net/manual/en/language.oop5.overloading.php#55486)，它显示了当 getter 触发对自身的调用时记录的完全相同类型的错误。在这种情况下，它很容易被发现，但是对于像 func() 到 __get() 到 funcB() 到 funcC() 到 __get() 这样的更复杂的调用图，就不容易发现了。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-12-19T17:57:55.403

不确定我是否正确，但你不应该使用

```
$this->_object['status'] 
```

代替

```
$this->status 
```

# android - AlertDialog 未被解除

> ID：13812931
> 
> 赞同：0
> 
> 时间：2012-12-11T02:55:26.330
> 
> 标签：android, android-alertdialog

我有以下代码来显示一个警报对话框以打开 Locations Service Settings ：

```
alert = new AlertDialog.Builder(context).create();
alert.setTitle("Unable to Retrieve Current Location");
alert.setMessage(" Enable Location Service ?");
alert.setButton(DialogInterface.BUTTON_POSITIVE,"Open Settings", new DialogInterface.OnClickListener() {

    @Override
    public void onClick(DialogInterface dialog, int which) {
        alert.dismiss();
        Intent intent = new Intent(android.provider.Settings.ACTION_SECURITY_SETTINGS);
        context.startActivity(intent);

    }
});
alert.setCancelable(false);
alert.show(); 
```

设置正常打开，但是当我按回时，上一个对话框不会被关闭。从设置返回时如何关闭对话框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T04:52:16.653

代替`alert.dismiss();`

点击事件

尝试`finish();`//这将完成您的活动

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T04:57:40.430

使用`dialog.dismiss();`代替`alert.dismiss();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T03:57:59.227

尝试这个：

```
AlertDialog.Builder alert = new AlertDialog.Builder (context);
alert.setTitle ("Unable to Retrieve Current Location");
alert.setMessage (" Enable Location Service ?");
alert.setButton (DialogInterface.BUTTON_POSITIVE, "Open Settings", 
                 new DialogInterface.OnClickListener() {

  @Override
  public void onClick(DialogInterface dialog, int which) {
    Intent intent = new Intent(android.provider.Settings.ACTION_SECURITY_SETTINGS);
    context.startActivity (intent);
  });

// Create and show the dialog.
alert.create();
alert.show(); 
```

主要区别是将*create*推迟到添加组件之后，调用*show*，而不是调用*dismiss*。

# php - php依赖

> ID：13812932
> 
> 赞同：-2
> 
> 时间：2012-12-11T02:55:30.623
> 
> 标签：php

有没有一种简单的方法来管理 php.ini 中的依赖项。我已将 php 文件分成不同的文件夹。有时它们会在彼此之间互换。即使我使用绝对形式，require_once 语句也会发生变化。我很好奇是否有人知道解决此问题的简单方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T02:57:32.823

使用相对路径`require_once`并*停止在文件夹之间移动文件*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T03:10:02.073

The best thing to do is to keep your includes all in one folder or the base directory. When you require_once a file inside of a file you yourself are requireing (like a chain), the path of the require in the later chain will eventually break if files are spread out. Instead, keep includes together and you should have no problem.

Hope this helps!

Edit: Also, if you have to have includes in different folders, make copies and keep those copies in folders. It is not the best strategy because files may need updates and i know i dont wanna copy and paste a file 10 times.

# sql - 处理批量插入的字段值中的字段终止符

> ID：13812934
> 
> 赞同：0
> 
> 时间：2012-12-11T02:55:52.827
> 
> 标签：sql, sql-server, sql-server-2008, tsql, parsing

这是我们将日志插入数据库的代码：

```
SET @SQL = 'BULK INSERT #tbl_Temp FROM '
        + ''''
        + @PathFileName
        + ''''
        + ' WITH (FIELDTERMINATOR ='
        + ' ''|''' 
        + ','
        + ' ROWTERMINATOR = '
        + ' ''|\n''' 
        + ','
        + ' CHECK_CONSTRAINTS, KEEPIDENTITY, MAXERRORS = 30)' 
```

基本上，我们批量插入的日志文件是用管道字符分隔的，上面的代码可以正常工作，但是如果一个字段`|` 的值包含管道，例如加密字段，则此 SQL 代码无法处理它。

有哪些方法可以解决此类问题？

如果 BULK INSERT 不可用，那么在不修改日志格式的情况下应该是什么解决方案，因为它已经在生产中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T04:02:31.373

我们所做的是指定一个多字符分隔符，例如'!@#$%^&*()'，它工作得很好。但这当然是如果您可以控制生成日志文件的软件

# javascript - 检测元素是否停止动量滚动？

> ID：13812936
> 
> 赞同：8
> 
> 时间：2012-12-11T02:56:13.603
> 
> 标签：javascript, jquery, mobile-safari, dom-events, touch-event

是否可以通过 Javascript 检测元素是否已停止在 Mobile Safari 中滚动？

我有一个使用 具有动量滚动的元素，`-webkit-overflow-scrolling:touch`我需要检测元素是否停止滚动，包括在动量影响滚动之后。

这可能吗？`onscroll`在我的应用程序中使用该事件无法正常工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-04-01T13:26:49.123

您可以计算滑动速度并尝试根据某个阈值确定是否会发生动量滚动。我做了一些测试，大约 0.25 像素/毫秒似乎是一个不错的值。

注意：有时低速也会发生动量滚动。我记录的导致动量滚动的最低速度是 0.13（增量时间非常短），所以如果您需要 100% 完美的解决方案，请继续寻找。

示例代码还检测并处理过度滚动。

使用 jQuery；

```
var scrollWrapper = $('#myWrapper');
var starTime, startScroll, waitForScrollEvent;
scrollWrapper.bind('touchstart', function() {
   waitForScrollEvent = false;
});

scrollWrapper.bind('touchmove', function() { 
  startTime = new Date().getTime(); startScroll = scrollWrapper.scrollTop();
});

scrollWrapper.bind('touchend', function() {
  var deltaTime = new Date().getTime() - startTime;
  var deltaScroll = Math.abs(startScroll - scrollWrapper.scrollTop());
  if (deltaScroll/deltaTime>0.25 
        || scrollWrapper.scrollTop()<0 
        || scrollWrapper.scrollTop()>scrollWrapper.height()) {
    // will cause momentum scroll, wait for 'scroll' event
    waitForScrollEvent = true;
  }
  else {
    onScrollCompleted(); // assume no momentum scroll was initiated
  }
  startTime = 0;
});

scrollWrapper.bind('scroll', function() {
  if (waitForScrollEvent) {
    onScrollCompleted();
  }
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-01-25T12:10:02.080

就我而言，这非常有效：

```
var timer;
$(scrollWrapper).on('scroll',function(e){
    if(timer){
        clearTimeout(timer);
    }
    timer = setTimeout(function(){
       $(this).trigger('scrollFinished');
    }, 55)
})

 $(scrollWrapper).on('scrollFinished',function(){
         // will be called when momentum scroll is finished
   }) 
```

滚动停止时发布“滚动完成”事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-19T15:16:46.870

您还可以添加一个递归调用自身的函数，直到滚动在元素内停止，然后从那里调用进一步的函数。

```
isScrolling() {
  var scrollStart = <element>.scrollTop;
  setTimeout(function() {
    var scrollPos = <element>.scrollTop;
    if (scrollStart !== scrollPos) {
      this.isScrolling()
    } else {
      // Scrolling has stopped
    }
  }, 100)
} 
```

# cassandra - OpsCenter for Cassandra 会减慢 Cassandra 的速度吗？

> ID：13812940
> 
> 赞同：4
> 
> 时间：2012-12-11T02:56:32.417
> 
> 标签：cassandra

我正在考虑安装 OpsCenter 来监控我们在 RackSpace VM 上运行的 24 节点 Cassandra 集群。过去我听说 OpsCenter 降低了集群的速度。我有点担心 OpsCenter 是否会通过网络将大量数据用于机器上的代理，或者安装在每个 Cassandra 节点上的代理会使用大量系统资源。使用 OpsCenter 的其他人是否经历过这种情况？是否存在使用 OpsCenter 不是个好主意的原因或情况？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T03:20:20.650

披露：我在 DataStax OpsCenter 工作

OpsCenter 旨在尽可能减少对集群的影响。我们非常小心不要过度使用任何资源。特别是，代理被设计为几乎从不写入磁盘，使用非常少的 CPU 和内存，并且最低限度地使用网络（代理只写入本地 Cassandra 节点）。根据使用情况，主 opscenterd 守护程序可以使用更多内存、CPU 和网络，因此，我们建议它在单独的专用节点上运行。

随着时间的推移，我们不断降低 OpsCenter 对集群的影响，因此您听说过的关于它影响集群的事情可能有点过时了。但是，由于您询问是否在某些情况下使用 OpsCenter 不是一个好主意，我想说在将它与具有许多列族（可能超过 50 个）的集群一起使用时必须小心。原因是 OpsCenter 在默认情况下会收集每个列族的指标（除了 和 键空间中的 CF `system`）`OpsCenter`，这可以加起来。有几种方法可以控制这里记录：[http ://www.datastax.com/docs/opscenter/configure/data_collection#controlling-data-collection](http://www.datastax.com/docs/opscenter/configure/data_collection#controlling-data-collection). 简而言之，您的选择是不收集某些列族的指标，或者减少指标数据的生存时间。

除此之外，如果您发现任何类似资源消耗过多的情况，请告知我们，以便我们做出相应的改进。

# ios - 如何创建从 UIViewController 到 UISplitViewController 的 segue

> ID：13812942
> 
> 赞同：2
> 
> 时间：2012-12-11T02:56:58.443
> 
> 标签：ios, ipad, uisplitviewcontroller, uistoryboard, uistoryboardsegue

这是我对 iPad 应用程序的设置。我使用带有`UIStoryboard`.

XCode 创建了 main`UIViewController`作为入口点。在视图中，我放置了一个带有按钮的工具栏。然后，我将 a 插入`UISplitViewController`到 Storboard 上。

我想要的是从工具栏中有一个按钮，该按钮将加载带有主/明细表的拆分视图。

我尝试单击按钮并拖动到创建 segue 的 splitviewcontroller，但我创建的每个组合都无法运行并崩溃。

我的工具栏将有许多其他按钮来加载其他视图。

问题是，如何使用storyboard链接加载拆分视图的配置？所有谷歌搜索结果都没有显示这种设置的例子。

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T03:02:59.707

你不能那样做。拆分视图控制器必须是窗口的根视图控制器。

来自“iOS 的视图控制器目录”：“拆分视图控制器必须始终是您创建的任何界面的根。换句话说，您必须始终从 UISplitViewController 对象安装视图作为应用程序窗口的根视图。”

编辑后：我刚刚尝试了我在评论中提到的代码方法，它奏效了。所以，在你的故事板中，你可以按照你想要的方式设置控制器，只是不要在你的第一个控制器和拆分视图控制器之间建立任何连接。然后在代码中使用以下代码切换到它：

```
-(IBAction)switchToSplit:(id)sender {
    UISplitViewController *split = [self.storyboard instantiateViewControllerWithIdentifier:@"Split"];
    self.view.window.rootViewController = split;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-28T11:35:20.177

虽然拆分视图控制器必须是其窗口的根视图控制器，但一个应用程序可以有多个窗口。遗憾的是，开发人员几乎不知道这个概念，并且只能以编程方式工作，而不是通过 Interface builder（据我所知）。我相信以下答案可以帮助您解决问题：

[如何使用 UISplitViewController 作为模态视图控制器？](https://stackoverflow.com/questions/4739801/how-to-use-a-uisplitviewcontroller-as-a-modal-view-controller/19983002#19983002)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-23T18:42:20.500

您可能想使用`UITabBarViewController`. 尽管 Apple 不需要`UISplitViewController`成为根视图控制器，但它们在大多数情况下都鼓励使用它，除非您在`UITabBarViewController`类似 Apple 的 Podcast 应用程序中使用它。

# sql-server - 如何在日期时间字段中分配空值

> ID：13812944
> 
> 赞同：0
> 
> 时间：2012-12-11T02:57:03.073
> 
> 标签：sql-server, datetime

我努力了：

```
CAST(NULL AS DATETIME) AS Exit_T. 
```

给我以下错误：

> *将 char 数据类型转换为 datetime 数据类型会导致 datetime 值超出范围。*

我们可以为`DateTime`字段分配空值吗？在查询达到某些条件后我需要这个

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T03:08:33.770

What are you trying to do? You don't typically use NULL in a cast. You would assign the keyword NULL to the value of the field. Nulls are acceptable in DateTime fields if you allow it.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T03:01:25.670

如果`datetime`field 是`NULL`-able 字段，我们可以分配`NULL`值，否则，我们*不能*分配`NULL`值。

看看问题*不*在于演员阵容，而必须来自其他地方：

```
select CASE(NULL AS DATETIME) AS Exit_T; 
```

# java - 代码在模拟器中崩溃，不知道为什么。android/java 开发新手

> ID：13812946
> 
> 赞同：1
> 
> 时间：2012-12-11T02:57:15.070
> 
> 标签：java, android, android-emulator

我对android和java开发都很陌生。我正在尝试构建一个简单的应用程序。目前这很容易，但我似乎无法让代码运行。一旦我在模拟器中运行该应用程序，它就会发出一条警报，说我的应用程序已停止。

这是我的代码：

```
package com.example.ultimatescoreclock;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.Window;
import android.view.WindowManager;
import android.widget.TextView;
import android.os.CountDownTimer;

public class MainActivity extends Activity {

    // variables for the clock
    byte minRemaining = 0;
    byte secRemaining = 0;
    long msRemaining = 360000;  // six minutes
    TextView mainClock = (TextView) findViewById(R.id.clockMain);

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public byte getMinutes(long millisUntilFinished) {
        return (byte) (millisUntilFinished / 60000);
    }

    public void onMainClockClick() {
        StringBuilder str = new StringBuilder("");

        str.append(minRemaining + ":" + secRemaining);
        mainClock.setText(str);
    }
} 
```

有人可以让我知道我在这里犯了什么愚蠢的错误吗？仅供参考 - 我的 XML 文档为`R.id.mainClock`TextView 设置了 onClick 属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T03:12:34.990

**-**您可以在方法**之前****定义**但**不能初始化**a 。`View` **`setContentView()`**

 ****-** `TextView mainClock = (TextView) findViewById(R.id.clockMain);` **之前** `setContentView()` **导致崩溃。**

**-**只有**在**方法之后，`setContentView()`才能**将 id 分配**给`Views`，因为在此**之前**`Views` **没有初始化**。

**-**这就是使用的全部意义`setContentView(...)`，它会**膨胀**`XML layout`文件，**直到你有某种膨胀的视图，你将无法获得对它任何部分的引用**

**例如：**

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        mainClock = (TextView) findViewById(R.id.clockMain); 
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T02:58:46.443

```
mainClock = (TextView) findViewById(R.id.clockMain); 
```

必须放在**之后** `setContentView();`

这是因为您首先必须设置您`Activity`使用的布局，然后才能使用它。正在发生的事情是正在创建您的对象，并且您的全局变量（mainClock）正在访问由于`onCreate()`尚未被调用而尚不存在的东西。

所以`TextView mainClock = (TextView) findViewById(R.id.clockMain);`改为

```
TextView mainClock; 
```

和 onCreate() 应该看起来像。

```
 @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        mainClock = (TextView) findViewById(R.id.clockMain); //finds the clock TextView
    } 
```**

# intellij-idea - 如何在远程桌面上运行 IntelliJ IDEA

> ID：13812951
> 
> 赞同：27
> 
> 时间：2012-12-11T02:57:56.113
> 
> 标签：intellij-idea

移除 NX 桌面上的 IntelliJ IDEA 12 几乎无法使用。滚动时屏幕刷新很痛苦，选择文本等简单操作很麻烦。有什么办法可以提升IDEA在远程桌面上的体验？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-11T02:57:56.113

这个问题已经在[这里](http://youtrack.jetbrains.com/issue/IDEA-48645)讨论过了。建议之一是使用 , 禁用双缓冲`RepaintManager.currentManager(null).setDoubleBufferingEnabled(false)`，并`sun.java2d.noddraw=false`在**idea.properties**文件中进行设置。

为了方便起见，我创建了一个切换双缓冲的插件。[您可以从这里](https://github.com/mcasperson/IDEADoubleBufferPlugin)获得源代码，或者您可以从[这里](https://github.com/mcasperson/IDEADoubleBufferPlugin/blob/master/IDEADoubleBufferPlugin.jar?raw=true)下载已编译的 JAR 。

安装插件后，进入**工具**菜单并选择**启用/禁用双缓冲**。在禁用双缓冲的情况下，您将体验到很多闪烁，但通过远程桌面连接的性能显着提高。

你也可能有一些运气设置`-Dsun.java2d.xrender=true`。有关详细信息，请参见[此处](http://youtrack.jetbrains.com/issue/IDEA-18341)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-06-24T09:10:34.853

就个人而言，我尝试改变这两个选项：这让我`sun.java2d.noddraw=false`的`sun.java2d.d3d=true`想法变得更好了！
从[这次](http://youtrack.jetbrains.com/issue/IDEA-48645)谈话中，似乎问题很普遍，但解决方案各不相同......

不过，还没有尝试过 Phyxx 建议的插件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-12T08:03:39.153

我在通过 SSH 隧道从 Linux 机器运行 CLion（基于 IntelliJ）到运行 XQuartz X11 的 Mac 时遇到了同样的问题（速度非常慢、滚动时撕裂更新等）。添加`sun.java2d.xrender=true`到`idea.properties`文件中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-20T06:29:02.657

尝试使用idea 2017.2，它使用了新的Windows 10 UI界面，已经解决了这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-04T09:38:23.403

我有这个问题。我通过更改 RDP 上的属性解决了这个问题。在idea.properties中没有添加参数。请看图片。把配置放在这样的地方，然后连接到RDP。[![RDP 属性](../Images/135ee248fcbc259766cd2aecdf25ccd1.png)](https://i.stack.imgur.com/5aFBx.png)

# java - Maven Tomcat 7 - 构建

> ID：13812953
> 
> 赞同：3
> 
> 时间：2012-12-11T02:57:58.910
> 
> 标签：java, tomcat, maven, tomcat7, maven-3

我正在使用 Tomcat 7 来部署我的战争文件。所以不得不使用mojo tomcat-maven-plugin。我在tomcat中设置的Http端口是8090，我的服务器名是localhost。

Maven 无法部署我的应用程序，因为它给出了以下错误：

```
[ERROR] Failed to execute goal org.codehaus.mojo:tomcat-maven-plugin:1.1:deploy (default-cli) on project 01JsfExample: Cannot invoke Tomcat manager: Server returned HTTP response code: 403 for URL: http://localhost:8090/manager/deploy?path=%2Fbalaji&war= -> [Help 1] 
```

在执行程序之前，我在以下位置进行了所有更改。

**%TOMCAT_HOME%/conf/tomcat-users.xml**

```
<?xml version='1.0' encoding='utf-8'?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<tomcat-users>
<!--
  NOTE:  By default, no user is included in the "manager-gui" role required
  to operate the "/manager/html" web application.  If you wish to use this app,
  you must define such a user - the username and password are arbitrary.
-->
<!--
  NOTE:  The sample user and role entries below are wrapped in a comment
  and thus are ignored when reading this file. Do not forget to remove
  <!.. ..> that surrounds them.
-->
<!--
  <role rolename="tomcat"/>
  <role rolename="role1"/>
  <user username="tomcat" password="tomcat" roles="tomcat"/>
  <user username="both" password="tomcat" roles="tomcat,role1"/>
  <user username="role1" password="tomcat" roles="role1"/>
-->
    <role rolename="manager-gui"/>
    <user username="admin" password="admin" roles="manager-gui"/>

    <role rolename="admin-gui"/>
    <user username="tomcat" password="s3cret" roles="admin-gui"/>   
</tomcat-users> 
```

**%MAVEN_HOME%/conf/settings.xml**

```
<?xml version="1.0" encoding="UTF-8"?>

<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->

<!--
 | This is the configuration file for Maven. It can be specified at two levels:
 |
 |  1\. User Level. This settings.xml file provides configuration for a single user, 
 |                 and is normally provided in ${user.home}/.m2/settings.xml.
 |
 |                 NOTE: This location can be overridden with the CLI option:
 |
 |                 -s /path/to/user/settings.xml
 |
 |  2\. Global Level. This settings.xml file provides configuration for all Maven
 |                 users on a machine (assuming they're all using the same Maven
 |                 installation). It's normally provided in 
 |                 ${maven.home}/conf/settings.xml.
 |
 |                 NOTE: This location can be overridden with the CLI option:
 |
 |                 -gs /path/to/global/settings.xml
 |
 | The sections in this sample file are intended to give you a running start at
 | getting the most out of your Maven installation. Where appropriate, the default
 | values (values used when the setting is not specified) are provided.
 |
 |-->
<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0" 
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
          xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd">
  <!-- localRepository
   | The path to the local repository maven will use to store artifacts.
   |
   | Default: ~/.m2/repository
  <localRepository>/path/to/local/repo</localRepository>
  -->
 <localRepository>F:/apache-maven-3.0.4/Repository</localRepository>

  <!-- interactiveMode
   | This will determine whether maven prompts you when it needs input. If set to false,
   | maven will use a sensible default value, perhaps based on some other setting, for
   | the parameter in question.
   |
   | Default: true
  <interactiveMode>true</interactiveMode>
  -->

  <!-- offline
   | Determines whether maven should attempt to connect to the network when executing a build.
   | This will have an effect on artifact downloads, artifact deployment, and others.
   |
   | Default: false
  <offline>false</offline>
  -->

  <!-- pluginGroups
   | This is a list of additional group identifiers that will be searched when resolving plugins by their prefix, i.e.
   | when invoking a command line like "mvn prefix:goal". Maven will automatically add the group identifiers
   | "org.apache.maven.plugins" and "org.codehaus.mojo" if these are not already contained in the list.
   |-->
  <pluginGroups>
    <!-- pluginGroup
     | Specifies a further group identifier to use for plugin lookup.
    <pluginGroup>com.your.plugins</pluginGroup>
    -->
  </pluginGroups>

  <!-- proxies
   | This is a list of proxies which can be used on this machine to connect to the network.
   | Unless otherwise specified (by system property or command-line switch), the first proxy
   | specification in this list marked as active will be used.
   |-->
  <proxies>
    <!-- proxy
     | Specification for one proxy, to be used in connecting to the network.
     |
    <proxy>
      <id>optional</id>
      <active>true</active>
      <protocol>http</protocol>
      <username>proxyuser</username>
      <password>proxypass</password>
      <host>proxy.host.net</host>
      <port>80</port>
      <nonProxyHosts>local.net|some.host.com</nonProxyHosts>
    </proxy>
    -->
  </proxies>

  <!-- servers
   | This is a list of authentication profiles, keyed by the server-id used within the system.
   | Authentication profiles can be used whenever maven must make a connection to a remote server.
   |-->
  <servers>
    <!-- server
     | Specifies the authentication information to use when connecting to a particular server, identified by
     | a unique name within the system (referred to by the 'id' attribute below).
     | 
     | NOTE: You should either specify username/password OR privateKey/passphrase, since these pairings are 
     |       used together.
     |
    <server>
      <id>deploymentRepo</id>
      <username>repouser</username>
      <password>repopwd</password>
    </server>
    -->

    <!-- Another sample, using keys to authenticate.
    <server>
      <id>siteServer</id>
      <privateKey>/path/to/private/key</privateKey>
      <passphrase>optional; leave empty if not used.</passphrase>
    </server>
    -->
        <server>
            <id>TomcatServer</id>
            <username>tomcat</username>
            <password>s3cret</password>
        </server>
  </servers>

  <!-- mirrors
   | This is a list of mirrors to be used in downloading artifacts from remote repositories.
   | 
   | It works like this: a POM may declare a repository to use in resolving certain artifacts.
   | However, this repository may have problems with heavy traffic at times, so people have mirrored
   | it to several places.
   |
   | That repository definition will have a unique id, so we can create a mirror reference for that
   | repository, to be used as an alternate download site. The mirror site will be the preferred 
   | server for that repository.
   |-->
  <mirrors>
    <!-- mirror
     | Specifies a repository mirror site to use instead of a given repository. The repository that
     | this mirror serves has an ID that matches the mirrorOf element of this mirror. IDs are used
     | for inheritance and direct lookup purposes, and must be unique across the set of mirrors.
     |
    <mirror>
      <id>mirrorId</id>
      <mirrorOf>repositoryId</mirrorOf>
      <name>Human Readable Name for this Mirror.</name>
      <url>http://my.repository.com/repo/path</url>
    </mirror>
     -->
  </mirrors>

  <!-- profiles
   | This is a list of profiles which can be activated in a variety of ways, and which can modify
   | the build process. Profiles provided in the settings.xml are intended to provide local machine-
   | specific paths and repository locations which allow the build to work in the local environment.
   |
   | For example, if you have an integration testing plugin - like cactus - that needs to know where
   | your Tomcat instance is installed, you can provide a variable here such that the variable is 
   | dereferenced during the build process to configure the cactus plugin.
   |
   | As noted above, profiles can be activated in a variety of ways. One way - the activeProfiles
   | section of this document (settings.xml) - will be discussed later. Another way essentially
   | relies on the detection of a system property, either matching a particular value for the property,
   | or merely testing its existence. Profiles can also be activated by JDK version prefix, where a 
   | value of '1.4' might activate a profile when the build is executed on a JDK version of '1.4.2_07'.
   | Finally, the list of active profiles can be specified directly from the command line.
   |
   | NOTE: For profiles defined in the settings.xml, you are restricted to specifying only artifact
   |       repositories, plugin repositories, and free-form properties to be used as configuration
   |       variables for plugins in the POM.
   |
   |-->
  <profiles>
    <!-- profile
     | Specifies a set of introductions to the build process, to be activated using one or more of the
     | mechanisms described above. For inheritance purposes, and to activate profiles via <activatedProfiles/>
     | or the command line, profiles have to have an ID that is unique.
     |
     | An encouraged best practice for profile identification is to use a consistent naming convention
     | for profiles, such as 'env-dev', 'env-test', 'env-production', 'user-jdcasey', 'user-brett', etc.
     | This will make it more intuitive to understand what the set of introduced profiles is attempting
     | to accomplish, particularly when you only have a list of profile id's for debug.
     |
     | This profile example uses the JDK version to trigger activation, and provides a JDK-specific repo.
    <profile>
      <id>jdk-1.4</id>

      <activation>
        <jdk>1.4</jdk>
      </activation>

      <repositories>
        <repository>
          <id>jdk14</id>
          <name>Repository for JDK 1.4 builds</name>
          <url>http://www.myhost.com/maven/jdk14</url>
          <layout>default</layout>
          <snapshotPolicy>always</snapshotPolicy>
        </repository>
      </repositories>
    </profile>
    -->

    <!--
     | Here is another profile, activated by the system property 'target-env' with a value of 'dev',
     | which provides a specific path to the Tomcat instance. To use this, your plugin configuration
     | might hypothetically look like:
     |
     | ...
     | <plugin>
     |   <groupId>org.myco.myplugins</groupId>
     |   <artifactId>myplugin</artifactId>
     |   
     |   <configuration>
     |     <tomcatLocation>${tomcatPath}</tomcatLocation>
     |   </configuration>
     | </plugin>
     | ...
     |
     | NOTE: If you just wanted to inject this configuration whenever someone set 'target-env' to
     |       anything, you could just leave off the <value/> inside the activation-property.
     |
    <profile>
      <id>env-dev</id>

      <activation>
        <property>
          <name>target-env</name>
          <value>dev</value>
        </property>
      </activation>

      <properties>
        <tomcatPath>/path/to/tomcat/instance</tomcatPath>
      </properties>
    </profile>
    -->
  </profiles>

  <!-- activeProfiles
   | List of profiles that are active for all builds.
   |
  <activeProfiles>
    <activeProfile>alwaysActiveProfile</activeProfile>
    <activeProfile>anotherAlwaysActiveProfile</activeProfile>
  </activeProfiles>
  -->
</settings> 
```

**在 My Pom.xml 中添加了 mojo 插件：**

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.achutha.labs</groupId>
  <artifactId>01JsfExample</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <packaging>war</packaging>
  <name>01JsfExample</name>

  <dependencies>

        <dependency>
            <groupId>com.sun.faces</groupId>
            <artifactId>jsf-api</artifactId>
            <version>2.1.7</version>
        </dependency>
        <dependency>
            <groupId>com.sun.faces</groupId>
            <artifactId>jsf-impl</artifactId>
            <version>2.1.7</version>
        </dependency>

        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>

        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
        </dependency>

        <dependency>
            <groupId>javax.servlet.jsp</groupId>
            <artifactId>jsp-api</artifactId>
            <version>2.1</version>
        </dependency>

    </dependencies>

    <build>
        <finalName>JavaServerFaces</finalName>

        <plugins>

        <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>tomcat-maven-plugin</artifactId>
                <configuration>
                    <url>http://localhost:8090/manager</url>
                    <server>TomcatServer</server>
                    <path>/balaji</path>
                </configuration>
            </plugin>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.1</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
        </plugins>
    </build>

</project> 
```

在以“clean tomcat:deploy”为目标运行应用程序后，我得到了以下输出。

```
SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.
[INFO] Scanning for projects...
[WARNING] 
[WARNING] Some problems were encountered while building the effective model for com.achutha.labs:01JsfExample:war:0.0.1-SNAPSHOT
[WARNING] 'build.plugins.plugin.version' for org.codehaus.mojo:tomcat-maven-plugin is missing. @ line 48, column 11
[WARNING] 
[WARNING] It is highly recommended to fix these problems because they threaten the stability of your build.
[WARNING] 
[WARNING] For this reason, future Maven versions might no longer support building such malformed projects.
[WARNING] 
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building 01JsfExample 0.0.1-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-clean-plugin:2.4.1:clean (default-clean) @ 01JsfExample ---
[INFO] Deleting F:\Workspace\01JsfExample\target
[INFO] 
[INFO] >>> tomcat-maven-plugin:1.1:deploy (default-cli) @ 01JsfExample >>>
[INFO] 
[INFO] --- maven-resources-plugin:2.5:resources (default-resources) @ 01JsfExample ---
[debug] execute contextualize
[WARNING] Using platform encoding (Cp1252 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] Copying 0 resource
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.1:compile (default-compile) @ 01JsfExample ---
[WARNING] File encoding has not been set, using platform encoding Cp1252, i.e. build is platform dependent!
[INFO] Compiling 1 source file to F:\Workspace\01JsfExample\target\classes
[INFO] 
[INFO] --- maven-resources-plugin:2.5:testResources (default-testResources) @ 01JsfExample ---
[debug] execute contextualize
[WARNING] Using platform encoding (Cp1252 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] Copying 0 resource
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.1:testCompile (default-testCompile) @ 01JsfExample ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.10:test (default-test) @ 01JsfExample ---
[INFO] Surefire report directory: F:\Workspace\01JsfExample\target\surefire-reports

-------------------------------------------------------
 T E S T S
-------------------------------------------------------

Results :

Tests run: 0, Failures: 0, Errors: 0, Skipped: 0

[INFO] 
[INFO] --- maven-war-plugin:2.1.1:war (default-war) @ 01JsfExample ---
[INFO] Packaging webapp
[INFO] Assembling webapp [01JsfExample] in [F:\Workspace\01JsfExample\target\JavaServerFaces]
[INFO] Processing war project
[INFO] Copying webapp resources [F:\Workspace\01JsfExample\src\main\webapp]
[INFO] Webapp assembled in [47 msecs]
[INFO] Building war: F:\Workspace\01JsfExample\target\JavaServerFaces.war
[WARNING] Warning: selected war files include a WEB-INF/web.xml which will be ignored 
(webxml attribute is missing from war task, or ignoreWebxml attribute is specified as 'true')
[INFO] 
[INFO] <<< tomcat-maven-plugin:1.1:deploy (default-cli) @ 01JsfExample <<<
[INFO] 
[INFO] --- tomcat-maven-plugin:1.1:deploy (default-cli) @ 01JsfExample ---
[INFO] Deploying war to http://localhost:8090/balaji  
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 2.015s
[INFO] Finished at: Tue Dec 11 08:02:52 IST 2012
[INFO] Final Memory: 8M/25M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.codehaus.mojo:tomcat-maven-plugin:1.1:deploy (default-cli) on project 01JsfExample: Cannot invoke Tomcat manager: Server returned HTTP response code: 403 for URL: http://localhost:8090/manager/deploy?path=%2Fbalaji&war= -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException 
```

我尝试了相同的示例，将 maven 的 settings.xml 更改为：

```
 <server>
       <id>TomcatServer</id>
       <username>admin</username>
       <password>admin</password>
   </server> 
```

这是经理 ID 和密码，仍然给我同样的错误。错误 403 表示访问被拒绝。如何解决这个问题呢 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T03:22:27.557

您用于部署的用户必须具有 manager-script 角色。用户名必须与您在 settings.xml 中使用的用户名匹配。

```
<user username="admin" password="s3cret" roles="manager-gui,manager-script"/> 
```

并且插件中的 URI 应该是[/manager/text](http://tomcat.apache.org/tomcat-7.0-doc/manager-howto.html#Supported_Manager_Commands)

```
<url>http://localhost:8090/manager/text</url> 
```

注意：admin-gui + admin-script 角色用于 host-manager UI 和[REST](http://tomcat.apache.org/tomcat-7.0-doc/manager-howto.html)接口，manager-gui + manager-script 角色用于部署 UI 和 REST 接口。

# netbeans - netbeans 在路径中找不到点

> ID：13812959
> 
> 赞同：-1
> 
> 时间：2012-12-11T02:58:43.200
> 
> 标签：netbeans

我有一个 Maven 项目。我正在使用 umlgraph 生成图表。我已经安装了 graphviz 并且存在于路径中。

但是当我尝试运行 mvn javadoc:javadoc 时，netbeans 抱怨

```
java.io.IOException: Cannot run program "dot": 
```

有没有办法可以将 dot.exe 的路径指定为 maven 或 netbeans。

我没有安装netbeans。它是一个独立于操作系统的 zip 文件。我查看了 netbeans.conf，但不确定如何在此处指定 dot.exe 的路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:08:16.217

您不能使用`mvn javadoc:javadoc`目标从 Maven 运行“dot.exe”应用程序。如果“dot.exe”命令单独运行，您也许可以使用 GraphViz。

我建议查看 NetBeans 7.1 和 7.2 的[jDepend 插件](http://plugins.netbeans.org/plugin/32365/jdepend-plugin)，或者查看[Visualizing NetBeans Module Dependencies](https://blogs.oracle.com/geertjan/entry/visualizing_netbeans_module_dependencies)看看这是否可以帮助您。如果您当前的进度停止。

# angularjs - AngularJS中带有自定义URL的模态窗口

> ID：13812962
> 
> 赞同：13
> 
> 时间：2012-12-11T02:58:52.140
> 
> 标签：angularjs

我需要在我的 Angular 应用程序中显示一个模式窗口（基本上只是一个隐藏的 div，它将使用已编译的模板加载）。问题是，我需要在模式打开时更改 URL，以便用户可以复制链接并直接转到模式窗口，还可以使用后退按钮关闭模式窗口并返回上一页。这类似于 Pinterest 在您单击图钉时处理模态窗口的方式。

到目前为止，我已经创建了一个加载模板的指令，使用 $compile 对其进行编译，注入 $scope，然后显示编译后的模板。这工作正常。

问题是，一旦我使用 $location 更改路径，路由控制器就会触发并将模板加载到 ng-view 中。

我想到了两种克服这个问题的方法，但都无法实现：

1.  当我使用 $location 更改 url 时，以某种方式阻止路由控制器触发。我在 $routeChangeStart 中添加了一个监听器以防止发生默认值，但这似乎不起作用。

2.  以某种方式向页面添加另一个视图处理程序（页面上基本上有 2 个命名的 ng-view 指令）并且每个都能够处理不同的路由。不过，目前看不到 Angular 支持这一点。

URL 的格式必须是 /item/item_id 而不是 /item?item_id=12345。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-01-19T05:05:58.910

如果您使用此处描述的 ui.router 模块，您现在可以执行此操作：[https ://github.com/angular-ui/ui-router/wiki/Frequently-Asked-Questions#how-to-open-a-dialogmodal -在一个确定的状态](https://github.com/angular-ui/ui-router/wiki/Frequently-Asked-Questions#how-to-open-a-dialogmodal-at-a-certain-state)。

他们的例子：

```
$stateProvider.state("items.add", {
    url: "/add",
    onEnter: function($stateParams, $state, $modal, $resource) {
        $modal.open({
            templateUrl: "items/add",
            resolve: {
              item: function() { new Item(123).get(); }
            },
            controller: ['$scope', 'item', function($scope, item) {
                $scope.dismiss = function() {
                    $scope.$dismiss();
                };

                $scope.save = function() {
                    item.update().then(function() {
                        $scope.$close(true);
                    });
                };
            }]
        }).result.then(function(result) {
            if (result) {
                return $state.transitionTo("items");
            }
        });
    }
}); 
```

我还将“errorCallback”函数传递给 then() 函数，以通过按 Escape 或单击背景来处理模态解除。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-12-03T23:01:35.607

我有类似的要求。我需要：

*   触发路由更改的模态窗口，因此它有自己的哈希 url。
*   当您访问模态 url 时，主屏幕加载然后触发模态弹出。
*   后退按钮关闭模式（假设您从主屏幕开始）。
*   当您单击“确定”或“取消”时，模式关闭并且路线更改回主屏幕。
*   当您单击背景关闭模式时，路线会变回主屏幕。

我找不到所有这些一起工作的好例子，但我能找到零碎的例子，所以我把它们放在一个工作示例中，如下所示：

```
<!DOCTYPE html>
<html lang="en" ng-app="app">

<head>
  <meta charset="UTF-8">
  <script src="//cdnjs.cloudflare.com/ajax/libs/angular.js/1.3.0/angular.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/angular-ui-router/0.2.11/angular-ui-router.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/0.11.2/ui-bootstrap-tpls.js"></script>
  <link href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.1/css/bootstrap.css" rel="stylesheet">
  <script>

    // init the app with ui.router and ui.bootstrap modules
    var app = angular.module('app', ['ui.router', 'ui.bootstrap']);

    // make back button handle closing the modal
    app.run(['$rootScope', '$modalStack',
      function($rootScope, $modalStack) {
        $rootScope.$on('$stateChangeStart', function() {
          var top = $modalStack.getTop();
          if (top) {
            $modalStack.dismiss(top.key);
          }
        });
      }
    ]);

    // configure the stateProvider
    app.config(['$stateProvider', '$urlRouterProvider',
      function($stateProvider, $urlRouterProvider) {

        // default page to be "/" (home)
        $urlRouterProvider.otherwise('/');

        // configure the route states
        $stateProvider

          // define home route "/"
          .state('home', {
            url: '/'
          })

          // define modal route "/modal"
          .state('modal', {
            url: '/modal',

            // trigger the modal to open when this route is active
            onEnter: ['$stateParams', '$state', '$modal',
              function($stateParams, $state, $modal) {
                $modal

                  // handle modal open
                  .open({
                    template: '<div class="modal-header"><h3 class="modal-title">Modal</h3></div><div class="modal-body">The modal body...</div><div class="modal-footer"><button class="btn btn-primary" ng-click="ok()">OK</button><button class="btn btn-warning" ng-click="cancel()">Cancel</button></div>',
                    controller: ['$scope',
                      function($scope) {
                        // handle after clicking Cancel button
                        $scope.cancel = function() {
                          $scope.$dismiss();
                        };
                        // close modal after clicking OK button
                        $scope.ok = function() {
                          $scope.$close(true);
                        };
                      }
                    ]
                  })

                  // change route after modal result
                  .result.then(function() {
                    // change route after clicking OK button
                    $state.transitionTo('home');
                  }, function() {
                    // change route after clicking Cancel button or clicking background
                    $state.transitionTo('home');
                  });

              }
            ]

          });
      }
    ]);
  </script>
</head>

<body>

  <a href="#/modal" class="btn btn-default">POPUP!</a>

  <div ui-view></div>

</body>

</html> 
```

您可以在 plunker 查看它的实际操作：http: [//plnkr.co/edit/tLyfRP6sx9C9Vee7pOfC](http://plnkr.co/edit/tLyfRP6sx9C9Vee7pOfC)

单击 plunker 中的“打开嵌入式视图”链接以查看哈希标签的工作情况。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-08-27T15:30:34.830

hermanschutte 的解决方案有效（请参阅[对 Tiago Roldão 帖子的评论](https://stackoverflow.com/questions/13812962/modal-window-with-custom-url-in-angularjs/27283311#comment19118391_13818878)）。我正在逐步发布以帮助澄清。

首先，在配置中：

```
.when('/posts', {
  templateUrl: 'views/main.html',
  controller: 'MainCtrl',
  reloadOnSearch: false     // this allows us to use the back button to get out of modals.
}) 
```

然后，在打开模式时（您需要 location 模块）：

```
$location.search('modal'); 
```

在模态控制器中：

```
$scope.$on('$locationChangeSuccess', function() {
  $scope.close(); // call your close function
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-11T16:02:33.477

您可能想尝试获取 AngularJS 源代码，调整并加载您自己的 $route 和 $routeProvider 酿造，然后将它们注入 Angular 本机。

您可能只需要添加一个标志来拦截路由更改的触发器。

另一个更简单的选择是挂钩到事件系统，使用`$scope.$on(event_name, function callback(ev) {...})`并调用`.preventDefault()`传入的事件，希望它会停止内部 $route 触发器。定位系统广播`$locationChangeStart`事件，并且在产生事件之前检查`defaultPrevented`属性`$locationChangeSuccess`。

不要忘记发布您的结果！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-11T10:59:49.337

您提到的命名视图解决方案在 angularJS 邮件列表上进行了很好的讨论，但截至目前（以及近期到中期），$route 系统无法处理多个视图。

正如我在几个地方说过的，在 SO 中也有几次，$route 系统是 angular 非常固执的立场可能成为障碍的情况之一：它的本意是简单，但它不是很简单可配置。我个人不直接使用它，而是通过我在[这里](http://www.bennadel.com/blog/2420-Mapping-AngularJS-Routes-Onto-URL-Parameters-And-Client-Side-Events.htm)找到的解决方案绕过它。

它使事情变得有点复杂，但它为您提供了更大的灵活性 - 这个想法是 $route 仅用于触发（手动）渲染功能，您可以在其中分配值并根据需要触发 $broadcasts （通常，从主控制器）。

我没有尝试过的一件事是“混合”解决方案 - 也就是说，正常使用 $route 系统，并将您的 /item/item_id 路由配置为没有视图参数（以免更改主视图，由其他路由）并通过 $routeChangeStart 事件执行某些操作（请记住，您可以为路由分配任何值，正如您在我引用的页面中看到的那样）

同样，我个人更喜欢完全使用替代方法。

# html - 如何在画布内剪辑戒指？

> ID：13812969
> 
> 赞同：3
> 
> 时间：2012-12-11T02:59:28.740
> 
> 标签：html, canvas, clipping

我正在尝试创建一个平均分为五个部分的戒指。我的方法可能是非正统的，因为我是 JS/JQuery 的新手。下面是我的代码：

```
var c=document.getElementById("c");
var ctx=c.getContext("2d");

ctx.beginPath();
ctx.arc(430,430,300,0,2*Math.PI,true);//x-y-r-angle-PI-rotation(clockwise vs anti//
ctx.closePath();
ctx.strokeStyle="#000";
ctx.stroke();

ctx.save();
ctx.beginPath();
ctx.arc(430,430,200,0,2*Math.PI);
ctx.closePath();
ctx.strokeStyle="#000";
ctx.stroke();
ctx.clip();

var drawAngledLine = function(x, y, length, angle) {
    var radians = angle / 180 * Math.PI;
    var endX = x + length * Math.cos(radians);
    var endY = y - length * Math.sin(radians);

    ctx.beginPath();
    ctx.moveTo(x, y)
    ctx.lineTo(endX, endY);
    ctx.closePath();
    ctx.stroke();
}
ctx.strokeStyle = "#000";
ctx.lineWidth = "1";

drawAngledLine(430, 430, 300, -90);
drawAngledLine(430, 430, 300, -162);
drawAngledLine(430, 430, 300, -234);
drawAngledLine(430, 430, 300, -306);
drawAngledLine(430, 430, 300, -18);

ctx.restore();
ctx.beginPath();
ctx.arc(430,430,200,0,2*Math.PI,true);
ctx.strokeStyle="#000";
ctx.stroke(); 
```

我试过使用 ctx.clip(); 但它夹住了线条的内部，我希望它掩盖内部，只显示内圈和外圈之间的连接线。没有图片很难解释...

请有人帮忙。提前喝彩。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T17:12:02.387

你可以通过几种方式做到这一点。首先你用切片画一个圆圈，然后在它上面画一个与背景颜色相同的圆圈，使它看起来像一个环而不是一个完整的圆圈。另一种方法与上述相同，只是您将画布全局组合更改为画布`destination-out`中的实际孔，移除该部分的圆圈。

**[现场演示](http://jsfiddle.net/loktar/CvnMw)**

```
 var canvas = document.getElementById('canvas'),
    ctx = canvas.getContext("2d");

    canvas.width = canvas.height = 256;

    function toRadians(deg) {
        return deg * Math.PI / 180
    }

    slicedRing(128,128,5,50,20);

    function slicedRing(x,y,sect,r,w){
        var slice = 360/sect;

        ctx.fillStyle = "rgb(255,0,0)";
        ctx.strokeStyle = "#fff";

        for(var i = 0; i < sect; i++){
            ctx.beginPath();
            ctx.moveTo(x,y);
            ctx.arc(x,y,50,toRadians(slice*i),toRadians((slice*i)+slice));
            ctx.fill();
            ctx.lineTo(x,y);
            ctx.stroke();
            ctx.closePath();
        }

        // either change this to the background color, or use the global composition
        ctx.globalCompositeOperation = "destination-out";
        ctx.beginPath();
        ctx.moveTo(x,y);
        ctx.arc(x,y,w,0,Math.PI*2);
        ctx.fill();
        ctx.closePath();

        // if using the global composition method, make sure to change it back to default.
        ctx.globalCompositeOperation = "source-over";
    } 
```

# spring - 启动 Spring ContextLoaderListener 时出错

> ID：13812970
> 
> 赞同：0
> 
> 时间：2012-12-11T02:59:30.953
> 
> 标签：spring, maven

我正在使用 Spring 框架 3.1.3.RELEASE & MAVEN 开发一个简单的 Web 应用程序。除非我从 web.xml 中取出监听器，否则我的应用程序不会启动

```
<listener>
   <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener> 
```

Tomcat 报告以下错误：

```
INFO: Deploying web application archive sampleapp.war
11/12/2012 3:45:03 PM org.apache.catalina.core.StandardContext start
SEVERE: Error listenerStart
11/12/2012 3:45:03 PM org.apache.catalina.core.StandardContext start
SEVERE: Context [/sampleapp] startup failed due to previous errors 
```

我的 WEB.XML 如下所示：

```
<web-app xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    version="3.0">
    <display-name>EMS</display-name>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener
        </listener-class>
    </listener>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/*-context.xml</param-value>
    </context-param>

    <welcome-file-list>
        <welcome-file>index.html</welcome-file>
    </welcome-file-list>
</web-app> 
```

此时应用程序上下文文件为空：

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context-2.5.xsd">

</beans> 
```

下面是WEB-INF/lib下的JAR文件

```
eclipselink-2.4.0.jar             
javax.persistence-2.0.0.jar       
mysql-connector-java-5.1.21.jar   
spring-context-3.1.3.RELEASE.jar
spring-core-3.1.3.RELEASE.jar
spring-web-3.1.3.RELEASE.jar
spring-webmvc-3.1.3.RELEASE.jar 
```

下面是WEB-INF下的文件

```
application.properties  
spring-context.xml  
web.xml 
```

我明白那个：

*   ContextLoaderListener 在 spring-web-3.1.3.RELEASE.jar 中可用
*   如果 JAR 在 WEB-INF/lib 中可用，那么它应该由 TOMCAT 选择。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T03:04:13.937

这是您的问题：将 in`spring-context.xml`移入`WEB-INF/classes`并设置上下文参数，如下所示：

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath:spring-context.xml</param-value>
</context-param> 
```

WEB-INF 不在 CLASSPATH 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T06:36:27.427

我分享 duffmo 的推理，只是想指出，如果您将配置更新为：您可以将应用程序上下文留在 WEB-INF 目录中：

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>WEB-INF/spring-context.xml</param-value>
</context-param> 
```

这样，您的全局应用程序上下文与调度程序配置位于同一目录中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T20:57:00.970

问题是我的 POM 文件中缺少 Spring 依赖项。我最初在 POM 中有以下依赖项

```
 <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${spring.version}</version>
        </dependency> 
```

**我在 tomcat logging.properties**上启用了调试，看到我得到了一个**类 ava.lang.NoClassDefFoundError**，因为我添加了依赖项（一次一个），ava.lang.NoClassDefFoundError 不断变化，直到所有依赖项都得到满足。之后 ContextLoaderListener 启动正常。我添加的依赖项是：

```
 <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-beans</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-asm</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-expression</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <!-- required by Spring -->
        <dependency>
            <groupId>commons-logging</groupId>
            <artifactId>commons-logging</artifactId>
            <version>1.1.1</version>
        </dependency> 
```

一世

# c# - 如何使用附加到加密消息的 IV 实现 AES

> ID：13812974
> 
> 赞同：1
> 
> 时间：2012-12-11T02:59:53.310
> 
> 标签：c#, encryption, aes

所以我一直在尝试用 c# 研究 AES 加密。不过，我对 IV 有点坚持，只是我很难理解加密，我希望其他人的更多解释可以让我越过这堵墙。

无论如何，我发现了一些关于 IV 的内容以及如何通过加密消息将其发送到我的网络服务（因为这是我使用 AES 的主要目的）。

这是我找到的文章

[http://old.nabble.com/AES-decryption-with-different-IV-td31004365.html](http://old.nabble.com/AES-decryption-with-different-IV-td31004365.html)

它在那里说，您可以在传递到解密它的目的地时将您的 IV 附加到消息中。

话虽如此，我的问题是，它们是否与从用于加密消息的 IV 转换的普通字符串有关？或者您是否以字节为单位附加您的 IV？

这是我的主要解密

```
public string DecryptString(string encryptedString, string key)
{
    if (encryptedString == null || encryptedString.Length <= 0)
        throw new ApplicationException("No string to decrypt.");

    if (key == null || key.Length <= 0)
        throw new ApplicationException("No key.");

    byte[] cipherText = Convert.FromBase64String(encryptedString);

    Rijndael aes = new RijndaelManaged();
    aes.Key = StringToByte(key);
    aes.IV = GetIV(cipherText);

    ICryptoTransform decryptor = aes.CreateDecryptor();

    throw new NotImplementedException();
} 
```

我的 GetIV() 是

```
static public byte[] GetIV(string cipherText)
{
    // IV will be attached to the beginning of the encrypted String
    // needs the length of the IV
    int ivStringLength = 16;
    string ivString = cipherText.Substring(0, ivStringLength);
    byte[] ivByte = StringToByte(ivString);

    return ivByte;

} 
```

现在，基于我阅读的另一个线程

[https://codereview.stackexchange.com/questions/13714/symmetric-encryption-decryption-routine-using-aes](https://codereview.stackexchange.com/questions/13714/symmetric-encryption-decryption-routine-using-aes)

似乎您从加密中获得了 IV，但它不是前 N 个字符，而是前 N 个字节。所以这让我很困惑！

还有一件事，IV 不应该用于使用密钥加密消息。在上一篇文章中，他/她是否使用 KEY 和 IV 对其进行加密，然后在消息前面再次附加 IV，然后将其转换为字符串？

**编辑：抱歉，我忘了说我是创建 Web 服务的人，这是我正在尝试实施的加密。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T07:22:43.227

最后，你把 IV 放在哪里都没有关系。它通常存储在密文之前，因为您需要 IV 来解密第一个块。

密文和 IV 都是*字节*。如果需要字符串，您可以使用特定的字符串编码来转换它们，例如 base 64。您可以单独或一起编码它们。

您不能做的是混淆字符串和字节数组，这是您在尝试提取 IV 时所做的。您应该删除字节，而不是密文开头的字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T16:51:29.823

由于您提供的是 Web 服务，因此对我们而言，经过[身份验证的加密](http://en.wikipedia.org/wiki/Authenticated_encryption)可以保护您免受[选择的密文攻击](http://en.wikipedia.org/wiki/Chosen-ciphertext_attack)。

我有两个 c# 示例，列出[了字符串的对称身份验证加密的现代示例。＃](https://stackoverflow.com/a/10366194/637783)。其中，它不仅将 IV 预先附加到密文中，而且还附加了一个身份验证标签。

# ruby - 当路径包含 [...] 时，Dir.glob 无法返回文件列表

> ID：13812975
> 
> 赞同：1
> 
> 时间：2012-12-11T02:59:56.243
> 
> 标签：ruby, file, glob

我正在尝试在目录中构建文件列表。我一直在使用 Dir.glob 取得了很大的成功，直到我找到一个带有 [] 的目录。现在 glob 什么也不返回。

```
[1] pry(main)> Dir.glob '/Users/zach/inst/good folder/*'
=> ["/Users/zach/inst/good folder/output.txt",
"/Users/zach/inst/good folder/output2.txt"]
[2] pry(main)> Dir.glob '/Users/zach/inst/bad [folder]/*'
=> [] 
```

请注意，“好”和“坏”文件夹的内容相同，ZSH 处理得很好。

```
─$ ls '/Users/zach/inst/good folder'
output.txt  output2.txt

-$ ls '/Users/zach/inst/bad [folder]'
output.txt  output2.txt 
```

关于发生了什么的任何想法，以及是否有解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T03:04:24.103

尝试以下操作：

```
Dir.glob '/Users/zach/inst/bad \[folder\]/*' 
```

# php - PDO 连接和插入

> ID：13812979
> 
> 赞同：-1
> 
> 时间：2012-12-11T03:00:27.810
> 
> 标签：php, mysql, select, insert, pdo

我是使用 PDO 的新手，我不知道它有什么问题。它说我有这个错误解析错误：语法错误，意外的 T_ENCAPSED_AND_WHITESPACE，在第 3 行期待 T_STRING 或 T_VARIABLE 或 T_NUM_STRING 这是我的代码。

```
<?php
include 'dbconnect.php';
$sql = "INSERT INTO event (name,location,admission,map,additional,featured,description)    VALUES (:name,:location,:admission,:map,:additional,:featured,:description)";
$q = $conn->prepare($sql);
$q->execute(array(':name'=>$_POST['name'],
      ':location'=>$_POST['location'],
      ':admission'=>$_POST['addmission'],
      ':map'=>$_POST['map'],
      ':additional'=>$_POST['additional'],
      ':featured'=>$_POST['featured'],
      ':description'=>$_POST['description']));
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T03:04:14.453

从所有这些`$_POST`变量中删除双引号。没有必要引用它们，如果你也引用它们的数组键，确实会造成伤害。

```
$name= $_POST['name'];
$location =  $_POST['location'];
$admission =    $_POST['admission'];
$map =   $_POST['map'];
$additional  =  $_POST['additional'];
$featured  =  $_POST['feature'];
$description =   $_POST['description']; 
```

在双引号字符串中，如果引用数组键，则不得引用键，或将整个内容括在`{}`. 但这里*两者都不*是必需的。

```
echo "In a double quoted string, you can use $array[keys] unquoted, or surround quoted {$array['keys']} in {}";
// But this is a syntax error! (like you are getting)
echo "Don't quote the $array['keys'] if inside a double quote string, not wrapped in {}"; 
```

事实上，根本没有必要将它们分配给变量。只需在调用`$_POST`中直接使用输入即可。`execute()`

```
$q->execute(array(':name'=>$_POST['name'],
          ':location'=>$_POST['location'],
          ':admission'=>$_POST['addmission'],
          ':map'=>$_POST['map'],
          ':additional'=>$_POST['additional'],
          ':featured'=>$_POST['featured'],
          ':description'=>$_POST['description'])); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T03:13:34.423

该错误可能是指在 $_POST 变量周围使用双引号。

错误是第 3 行的语法，似乎与此问题的标题无关。

```
$name = $_POST['name']; 
```

至于 PDO，您必须在包含的 dbconnect.php 文件中包含此类代码，因为在问题中看不到与 PDO 相关的代码。

# spotify - 在公共 Spotify 平台上不可用的情况下分发 Spotify 应用程序

> ID：13812982
> 
> 赞同：2
> 
> 时间：2012-12-11T03:00:36.090
> 
> 标签：spotify

我可以在没有 Spotify 应用程序平台的情况下构建和分发 Spotify 应用程序吗？换句话说，我是否可以将流量吸引到 Spotify 并允许他们通过 Spotify 使用该应用程序，而无需将其放在公共平台上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T08:56:30.153

目前唯一的方法是手动分发您的应用程序，并让所有想要使用它的人注册一个 Spotify 开发者帐户，以便他们可以手动访问您的应用程序。

联系应用程序团队（开发者网站上有联系表）并查看他们是否可以帮助您可能是明智之举。

# actionscript-3 - Adobe AIR：ServerSocketConnectEvent 未针对 localhost 连接触发

> ID：13812983
> 
> 赞同：1
> 
> 时间：2012-12-11T03:01:09.040
> 
> 标签：actionscript-3, tcp, air, localhost

当我尝试让同一个应用程序的两个实例相互交谈时，ServerSocketConnectEvent 没有触发。这是我的场景：

我有一个 AS3 Adob​​e AIR 应用程序，它通过 localhost 与它的另一个实例通信。两个应用程序都侦听端口并尝试连接到彼此的端口。也就是说，实例 1 侦听端口 50000 并尝试连接到实例 2 上的端口 50001，实例 2 侦听端口 50001 并尝试连接端口 50000。应用程序每 100 毫秒尝试相互连接，直到建立连接。我使用 RawCap 在 localhost 上捕获数据，我看到用于目标端口 50000 和 50001 的数据包交错。

我的设置包括在调试模式下从 FlashDevelop 运行应用程序并单独运行捆绑的 exe（我可以拥有该应用程序的多个实例：[如何获得启动多个相同 Adob​​e Air 应用程序的能力？](https://stackoverflow.com/questions/2982131/how-to-get-ability-to-start-up-multiple-same-adobe-air-applications)）。我没有看到 ServerSocketConnectEvent.CONNECT 着火。以下是一些相关代码：

```
// triggered by clicking on a sprite
public function onClickConnect(event:MouseEvent):void
{
  m_connect.disable();
  m_serverSocket = createServerSocket(int(m_localPortText.text));

  m_remoteSocket = new Socket();
  m_remoteSocket.addEventListener(Event.CONNECT, connectionMade);
  m_remoteSocket.addEventListener( Event.CLOSE, connectionClosed );
  m_remoteSocket.addEventListener( IOErrorEvent.IO_ERROR, socketFailure );
  m_remoteSocket.addEventListener( SecurityErrorEvent.SECURITY_ERROR, securityError );
  //m_remoteSocket.addEventListener( ProgressEvent.SOCKET_DATA, dataReceived);  

  m_retryTimer = new Timer(100);
  m_retryTimer.addEventListener(TimerEvent.TIMER, connectToRemote);
  m_retryTimer.start();
}

// this retries connecting to the remote client
public function connectToRemote(event:TimerEvent):void
{
  try
  {
    //Try to connect
    m_remoteSocket.connect( "127.0.0.1", int(m_remotePortText.text));
  }
  catch( e:Error ) { trace( e ); } 
}

public function createServerSocket(port:int):Socket
{
  try
  {
    // Create the server socket
    var serverSocket:ServerSocket = new ServerSocket();

    // Add the event listener
    serverSocket.addEventListener( ServerSocketConnectEvent.CONNECT, gotConnection );
    //serverSocket.addEventListener( Event.CLOSE, onClose );

    serverSocket.bind(port, "127.0.0.1" );
    // Listen for connections
    serverSocket.listen();

    // this prints fine
    trace("Listening on " + serverSocket.localAddress + ":" + serverSocket.localPort);

  }
  catch (e:Error)
  {
    trace(e);
  }

  return m_serverSocket;
}

// this is for connections from clients
// it never fires
public function gotConnection(event:ServerSocketConnectEvent):void
{
  //The socket is provided by the event object
  m_serverSocket = event.socket;

  trace("Connected to client");
}

// this is for connecting to the other app
public function connectionMade(event:Event):void
{
  trace(event);
  m_retryTimer.stop();
}

public function socketFailure(event:IOErrorEvent):void
{
  trace(event);
}

public function connectionClosed(event:Event):void
{
  trace(event);
}

public function securityError(event:SecurityErrorEvent):void
{
  trace(event);
} 
```

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T03:17:16.640

看起来您的服务器套接字超出范围并被垃圾收集。

在该方法中`createServerSocket()`，您使用局部变量实例化服务器套接字`serverSocket`。但同样的方法返回为空的 m_serverSocket。我认为您打算返回本地 var `serverSocket`:)

# android - 自定义片段（NPE）内的Android Maps V2 MapView

> ID：13812988
> 
> 赞同：22
> 
> 时间：2012-12-11T03:01:28.337
> 
> 标签：android, google-maps, maps

我不想使用或扩展`SupportMapFragment`或`MapFragment`。我有自己的基类，里面有一堆代码。

文档明确指出，当有人自己使用时，应该调用`MapView`所有相应的生命周期方法（等）。`onCreate()` `onResume()`

a 中的大多数生命周期方法`Fragment`都类似于 an，`Activity`但是当我在我的方法之间来回切换时，我最终会在方法中或方法`Fragment`中得到一个模糊的 NPE 。`onDestroy()``onResume()`

提供的所有示例都使用`Activity`with a`MapView`但不是 custom `Fragment`。

有人已经这样做了吗？`MapView`您可以在自己的`Fragment`课程中提供示例代码吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-03T13:29:15.290

我对 PoPy 的回答有些挣扎，但最后我做到了，这就是我想出的。可能这对其也会遇到此问题的其他人有所帮助：

```
public class MyMapFragment extends Fragment {

    private MapView mMapView;
    private GoogleMap mMap;
    private Bundle mBundle;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View inflatedView = inflater.inflate(R.layout.map_fragment, container, false);

        try {
            MapsInitializer.initialize(getActivity());
        } catch (GooglePlayServicesNotAvailableException e) {
            // TODO handle this situation
        }

        mMapView = (MapView) inflatedView.findViewById(R.id.map);
        mMapView.onCreate(mBundle);
        setUpMapIfNeeded(inflatedView);

        return inflatedView;
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        mBundle = savedInstanceState;
    }

    private void setUpMapIfNeeded(View inflatedView) {
        if (mMap == null) {
            mMap = ((MapView) inflatedView.findViewById(R.id.map)).getMap();
            if (mMap != null) {
                setUpMap();
            }
        }
    }

    private void setUpMap() {
        mMap.addMarker(new MarkerOptions().position(new LatLng(0, 0)).title("Marker"));
    }

    @Override
    public void onResume() {
        super.onResume();
        mMapView.onResume();
    }

    @Override
    public void onPause() {
        super.onPause();
        mMapView.onPause();
    }

    @Override
    public void onDestroy() {
        mMapView.onDestroy();
        super.onDestroy();
    }
} 
```

这是相应的`res/layout/map_fragment.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <com.google.android.gms.maps.MapView
        android:id="@+id/map"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />
</RelativeLayout> 
```

如果您的布局中只有一个元素，如本例所示，您可以省略`RelativeLayout`（并将 xmlns 声明移至新的根元素，在本例中为）。`com.google.android.gms.maps.MapView`

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-11T17:01:11.167

我成功地将 MapView (v2) 包含在嵌入 ViewPager 的自定义 Fragment 中。在我的例子中，MapView 包含在 Fragment 布局文件中。我不得不在 MapView 上调用生命周期方法（从 Fragment 调用），并手动调用`onCreate()`以避免来自类 BitmapDescriptorFactory （以获取标记的位图）。最后这个技巧很奇怪，我不知道为什么没有这个调用 Map 系统没有正确初始化，也许它只是当前版本中的一个错误......`onCreateView()``MapsInitializer.initialize(context)``NullPointerException`

就我而言，我没有任何`NullPointerException`in`onResume()`或`onDestroy()`.

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-06-19T07:13:17.833

虽然使用单独的`MapView`以下两件事至关重要

```
 //at Activity
    @Override
    protected void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      MapsInitializer.initialize(this);
      mapView.onCreate(savedInstanceState); 
    }
    //or at Fragment
     @Override
     public View onCreateView(LayoutInflater inflater, ViewGroup container,
                       Bundle savedInstanceState) {

       MapsInitializer.initialize(getActivity());  
       mapView.onCreate(mBundle);
     }
    //along with the following
    @Override
    protected void onResume() {
       super.onResume();
       if (mapView != null)
        mapView.onResume();
      }

    @Override
    protected void onDestroy() {
       super.onDestroy();
       if (mapView != null)
        mapView.onDestroy();
    }

    @Override
    public void onLowMemory() {
      super.onLowMemory();
      if (mapView != null)
        mapView.onLowMemory();
    } 
```

# ruby-on-rails - 将 Resque 队列转换为 SideKiq

> ID：13812991
> 
> 赞同：6
> 
> 时间：2012-12-11T03:01:53.567
> 
> 标签：ruby-on-rails, resque, sidekiq

我正在尝试将 Resque 队列转换为 Sidekiq。我已经完成了 Sidekiq 的整个设置，现在准备将我所有的 resque 作业添加到 sidekiq 的作业中。

我的问题是：我可以简单地将redis中的所有resque键重命名为相应的sidekiq键吗？

例如，如果我有一个名为“twitter”的队列，resque 的 redis 键是“resque:queue:twitter”，但 sidekiq 中的键是“queue:twitter”。我可以简单地将“resque:queue:twitter”重命名为“queue:twitter”吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T12:59:00.973

好的 终于明白了

我错过的全局命令很少，`rename`也许就是其中之一。

你可以在哪里重命名键如果你想

做这样的事情

```
redis.rename "resque:queue:twitter","queue:twitter" 
```

看看它是否有效

干杯

感谢提问 刚刚被redis知识刷了一遍

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-29T04:40:16.327

这是我用来将现有的 resque 作业迁移到 sidekiq 的一些代码。您可以在 rails 控制台中使用它。

```
['low', 'high', 'critical'].each do |queue|
  p [1, queue]
  old_queue = "resque:queue:#{queue}"
  new_queue = "queue:#{queue}"
  # $redis.ltrim new_queue, 0, 0 # can optionally clear out new queue, in case of multiple runs

  vals = $redis.lrange(old_queue, 0, -1)
  p [2, queue]
  $redis.pipelined do
    vals.each do |val|
      $redis.lpush(new_queue, val)
    end
  end
end 
```

您也可以只设置：

```
Sidekiq.configure_server do |config|
  config.redis = { :namespace => 'resque' }
end
Sidekiq.configure_client do |config|
  config.redis = { :namespace => 'resque' }
end 
```

它开箱即用。但是在我没有这个部署之后，我有两种格式的待处理作业，所以不得不使用我粘贴的第一个代码来迁移东西。

# video - 无法使用 CarrierWave / Voyeur 转换视频

> ID：13812992
> 
> 赞同：0
> 
> 时间：2012-12-11T03:02:19.067
> 
> 标签：video, gem, ruby-on-rails-3.2, carrierwave

我正在尝试使用 Voyeur gem 将视频从 .mp4 转换为 .webm 然后上传。这是我的代码：app/uploads/video_uploader.rb

`class VideoUploader < CarrierWave::Uploader::Base include CarrierWave::VideoConverter def store_dir "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}" end version :mp4 do process :encode_video => [:mp4] def full_filename(for_file) "#{File.basename(for_file, File.extname(for_file))}.mp4" end end version :webm do process :encode_video => [:webm] def full_filename(for_file) "#{File.basename(for_file, File.extname(for_file))}.webm" end end end`

video_converter.rb 模块已放置在 /lib/carrierwave/processing/

`autoload :VideoConverter, 'carrierwave/processing/video_converter'`已添加到 /lib/carrierwave.rb

我的模型：

`class Uploader < ActiveRecord::Base require 'Voyeur' attr_accessible :user_id,:attach_file belongs_to :user mount_uploader :attach_file, VideoUploader end`

但是我不能上传视频，控制台报错： `Errno::ENOENT: No such file or directory - ffmpeg -i /home/------/______/public/uploads/tmp/20121211-0943-7368-8271/tmpfile`

有什么建议吗？

我在控制台中使用的最简单的命令：`Voyeur::Media.new( filename: path_to_file ).convert( to: :mp4 )`仍然失败并出现类似错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T22:29:07.350

我让这两个宝石一起工作的过程有点不同，也许它会帮助处于相同情况的其他人。

步骤 1.) 按照carrierwave 和voyeur github 上的说明进行操作。

*   [https://github.com/jnicklas/carrierwave](https://github.com/jnicklas/carrierwave)

*   [https://github.com/devthenet/voyeur](https://github.com/devthenet/voyeur)

步骤 2.) 安装 ffmpeg 及其依赖项。我在 ubuntu 上执行此操作，并且在我执行[此](https://ffmpeg.org/trac/ffmpeg/wiki/UbuntuCompilationGuide)安装之前收到错误 no such file or directory

步骤 3.) 该[网站](http://trackingrails.com/posts/video-encoding-processor-for-carrierwave "跟踪轨道 ​​- 载波的视频编码过程")较旧，有一些需要更改的地方。

*   将 video_converter.rb 文件放在目录carrierwave-0.8.0/lib/carrierwave/processing
*   更改此文件中的第 22 行

    ```
    Voyeur::Video.new( filename: tmp_path ).convert( to: format.to_sym, output_filename: current_path ) 
    ```

    至

    ```
    Voyeur::Media.new( filename: tmp_path ).convert( to: format.to_sym, output_filename: current_path ) 
    ```

    将以下行添加到carrierwave-0.8.0/lib/carrierwave/processing.rb

    ```
    require "carrierwave/processing/video_converter" 
    ```

*   在您为 carrierwave 创建的上传器目录中，编辑您的 app/uploaders/avatar_uploader.rb 文件以匹配 video_uploader.rb

希望这可以帮助

# ruby-on-rails - 获取与 texticle 的模型关系

> ID：13812994
> 
> 赞同：0
> 
> 时间：2012-12-11T03:02:45.200
> 
> 标签：ruby-on-rails, full-text-search, texticle

我正在我的数据库中搜索汽车，并使用 texticle。

我有制造商、款式、引擎表。汽车是由这些表之间的关系组成的。每辆车都有制造商、款式和发动机。

我想弄清楚的是当用户在文本中搜索术语时如何返回完整的结果。

我在 texticle 文档中看到了系统范围的搜索，但这只是告诉我它将返回所有表格的结果。如何将其转换为一致的格式？

我正在寻找的是，当用户搜索福特时，我会为他们`ford`提供每种样式和引擎类型的所有结果。当用户搜索`ford coupe`时，他们将获得所有福特双门轿车的列表。

但这是一个大问题（我认为），我想从汽车表中返回结果。

我是否必须从 texticle 中获取每个结果，然后在我的汽车表中搜索关系？或者，还有更好的方法？

# jpeg - Ghostscript ps到jpg输出没有空格

> ID：13812998
> 
> 赞同：2
> 
> 时间：2012-12-11T03:03:19.460
> 
> 标签：jpeg, ghostscript, postscript

我想做的是使用ghostcript将只是图像的ps转换为jpg这是我开始的

```
gswin32c.exe -sDEVICE=jpeg -sOutputFile="test.png" example.ps 
```

但是，当我运行它时，jpg 会在右侧和底部出现很多空白

![在此处输入图像描述](../Images/43263c04d9a6e3fe4ee8638a69e368f6.png)

图片也很大有没有办法在ghostscript中裁剪出空白？

我试过这段代码

```
gswin32c.exe -sDEVICE=jpeg  -dBATCH -dNOPAUSE -dSAFER -r72x72 -g200x900 -sOutputFile="test.jpg" example.ps 
```

这减少了宽度，但高度仍然很大。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-10T07:24:46.747

gswin32c.exe -sDEVICE=jpeg -dUseCropBox -sOutputFile="test.png" example.ps

使用 -dUseCropBox 删除多余的空白

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T08:28:14.737

首先，您需要设置“正确”的媒体尺寸。有几种方法，包括您已经发现的 -g 开关。

底部的空白（可能）是由文件的制作方式引起的，PostScript 坐标从左下角开始，随着页面的上移和右移而增加。许多计算机系统从左上角开始，随着您的下降而增加。为了模仿这一点，文档可能会“翻转”垂直方向（这样当您向下浏览页面时值会增加），然后偏移初始点，以便它从设计的媒体的左上角开始。

您可以使用 -c ... -f 开关将 PostScript 添加到命令行，您需要添加某种垂直平移来移动图像部分。根据原始 PostScript 中翻译的完成方式，您可能需要添加正偏移或负偏移。我会尝试 0 -100 翻译，然后查看图像在输出上的移动方式。

或者，将文件转换为 PDF（使用 pdfwrite 设备）并应用 CropBox。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T13:10:45.180

使用 pstoeps 找到一个紧密的边界框，然后使用 pbmtools 转换为 jpg，类似于：

```
pstoeps file.ps | pstopnm - | pnmtojpg - > file.jpg 
```

如果您没有后两者，请参阅[http://netpbm.sourceforge.net/ 。](http://netpbm.sourceforge.net/)

我现在不记得 pstoeps 是否需要切换来强制计算边界框，但手册页应该很清楚。

编辑：在没有实际尝试的情况下发布的道歉..

与 ghostscript 一起打包的转换器是 ps2epsi ，它不会通过管道传输到标准输出，所以你这样做：

```
ps2epsi file.ps 
```

这将创建 file.epsi。然后运行：

```
pstopnm -portrait -xborder 0 -yborder 0  file.epsi -stdout | pnmtojpeg > file.jpeg 
```

另一种重新考虑更好的方法（跳过 eps 转换）是这样的：

```
pstopnm -portrait  file.ps -stdout | pnmcrop | pnmtojpeg > file.jpeg 
```