# StackOverflow 问答 14212000-14212999

# sql-server-2008 - 我正在尝试使用 SQL Server 2008 中的日期从表中选择所有值

> ID：14212001
> 
> 赞同：0
> 
> 时间：2013-01-08T09:37:28.013
> 
> 标签：sql-server-2008

我正在尝试使用 SQL Server 2008 中的日期从表中选择所有值。问题是`date`数据库中的列是`Datetime`格式的。但问题是我必须使用日期从数据库中选择所有值

我使用了以下查询

```
select * 
from Table 
where subdate = '2012-12-12'. 
```

它不会返回任何值....

我的桌子是这样的

```
Subdate                        val1    val2    val3 name
--------------                -----   -----   ----  -----
2012-12-12 12:32:12.000     2   1   2    ben
2012-12-27 15:17:32.533     2   1   2    yen
2012-12-27 15:20:06.660     2   1   2    sun 
```

提前致谢.........

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T09:44:42.173

```
select * from Tble where subdate>='20121212' and subdate <'20121213' 
```

将是我通常推荐的方法（*）。如果它是一个参数，它将是：

```
select * from Tble where subdate>=@Parm and subdate <DATEADD(day,1,@Parm) 
```

* * *

`'2012-12-12'`并且`'2012/12/12'`可能会遇到奇怪的转换问题，具体取决于您在服务器上的语言/日期设置。`'20121212'`将始终转换为`YYYYMMDD`.

* * *

(*) 我不`BETWEEN`用于这样的比较，因为你要么包括两个午夜，要么你必须计算第二天午夜之前的最后一刻。`23:59:59.997`如果您正在使用，但会`datetime`突然变成其他东西`datetime2`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T09:39:57.800

```
SELECT * 
FROM Table 
WHERE CAST(subdate AS DATE)='2012-12-12' 
```

拉吉

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T09:41:29.230

表中还包含日期，`Time`因此您必须将该日期转换为适合您输入的日期的格式。

您必须使用： [Sql Server 日期格式](http://www.sql-server-helper.com/tips/date-formats.aspx)

```
select * from Tble where CONVERT(VARCHAR(10), subdate, 111) = '2012/12/12' 
```

## 演示[SQLFiddle](http://www.sqlfiddle.com/#!3/ea023/6)

# android - 如何在android布局中为所有gridview实现一个按钮

> ID：14212002
> 
> 赞同：1
> 
> 时间：2013-01-08T09:37:30.957
> 
> 标签：android, android-layout

我想在 gridview 的底部实现一个按钮，其中显示我正在使用的项目

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >
      <RelativeLayout android:layout_width="wrap_content"
        android:layout_height="wrap_content">
       <GridView
           android:id="@+id/list"
           android:layout_width="fill_parent"
           android:layout_height="fill_parent"
           android:background="@android:color/white"
           android:gravity="center"
           android:horizontalSpacing="10dp"
           android:numColumns="auto_fit"
           android:stretchMode="columnWidth"
           android:verticalSpacing="10dp" 
           android:columnWidth="90dp" >
     </GridView>
    <ImageView
          android:id="@+id/image"
          android:layout_width="60dp"
          android:layout_height="100dp" />
   <TextView android:id="@+id/caption"
             android:layout_below="@id/image"
             android:layout_width="wrap_content" 
             android:layout_height="wrap_content" 
            android:textSize="15sp"/>
 </RelativeLayout>
     <LinearLayout android:layout_width="wrap_content"
          android:layout_height="wrap_content">
     <Button
     android:id="@+id/button"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_alignParentBottom="true"
     android:layout_centerHorizontal="true"
     android:text="Go "
     android:textSize="20dip"
     android:textStyle="italic" />
</LinearLayout>
</LinearLayout> 
```

但是为此，我在gridview中获得了一个项目按钮，谁能告诉我如何为底部gridview中的所有项目设置一个按钮

```
 http://i.imgur.com/QwdYJ.jpg> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T09:53:47.853

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<RelativeLayout
    android:layout_width="wrap_content"
    android:layout_height="0dp"
    android:layout_weight="1" >

    <GridView
        android:id="@+id/list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@android:color/white"
        android:columnWidth="90dp"
        android:gravity="center"
        android:horizontalSpacing="10dp"
        android:numColumns="auto_fit"
        android:stretchMode="columnWidth"
        android:verticalSpacing="10dp" >
    </GridView>

    <ImageView
        android:id="@+id/image"
        android:layout_width="60dp"
        android:layout_height="100dp" />

    <TextView
        android:id="@+id/caption"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/image"
        android:textSize="15sp" />
</RelativeLayout>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center" >

    <Button
        android:id="@+id/button"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="@string/app_name"
        android:textSize="20sp"
        android:textStyle="italic" />
</LinearLayout> 
```

# javascript - 如何浏览 javascript 对象

> ID：14212005
> 
> 赞同：1
> 
> 时间：2013-01-08T09:37:47.803
> 
> 标签：javascript, jquery, html, json

我是 jQuery 的新手。以下是`data`包含 json 字典的变量。

```
{
   "user":null, 
   "currency":"EUR",
   "balance":0,
   "translist": [ 
       { "trans1":"something","trans2":"something2" }
   ]
} 
```

我的 jQuery 方法`json/Javascript object`从 Rest`GET`调用中接收到一个

```
success: function (data){    
        for(x in data) {
            console.log(x + ':   ' + data[x]);
        }       
    }); 
```

是否有任何库可以帮助解析/遍历此 json 对象并获取某种对象列表？我想检查一些键及其各自的值。问题是我不需要列表中的所有键和值，而且一些值可以为空，这使我无法应用我使用 SO 找到的一些解决方案。

或者通常在success函数中直接开始打印HTML更常见？

编辑：如果它是 java 例如它将是一个 Map 并且我将使用迭代器来遍历并查看/分析地图值，并使用我想要的值创建一些数组列表。jQuery 中的等价物是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T09:43:37.760

> 例如，如果它是 java，它将是一个 Map，我将使用一个迭代器来遍历并查看/分析映射值，并创建一些包含我想要其中的值的数组列表。jQuery中的等价物是什么？

[任何 javascript 对象都可以看作是关联映射](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects)。

例如，您可以直接访问货币为`data['currency']`.

您还可以构建一个数组：

```
var a = [];
for (var key in data) {
    a.push({key:key, value:data[key]});
} 
```

您还可以构建一些 HTML 并将函数应用于数据：

```
$(document.body).append($(
   '<table>' + a.map(function(v){
      return '<tr><td>'+v.key+'</td><td>'+v.value+'</td></tr>'
   }).join('')+'</table>'
)); 
```

[示范](http://jsfiddle.net/G2nUk/)

使用 jQuery 可以使相同的迭代更简单（直接从 工作`data`）：

```
$(document.body).append($(
   '<table>' + $.map(data, function(value,key){
      return '<tr><td>'+key+'</td><td>'+value+'</td></tr>'
   }).join('')+'</table>'
)); 
```

[示范](http://jsfiddle.net/TWLPY/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T09:49:36.417

尝试使用`each`

```
success: function (data){   
    $.each( data, function( key, value ) {
        if(key === "currency")
            alert( key + ": " + value );
    });   
}); 
```

# android - 在用户按下后退按钮后检查互联网连接。（Android 的警报框）

> ID：14212014
> 
> 赞同：0
> 
> 时间：2013-01-08T09:38:08.867
> 
> 标签：android, android-intent

在我的应用程序中，我在应用程序启动之前检查了互联网连接如果连接不可用，那么如果用户单击警报框的“否”按钮，它会显示一个带有“是”和“否”按钮的警报框，然后它会关闭应用程序。

如果用户单击警报框的“是”按钮，则我使用以下代码启动 Activity

```
AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(context);
alertDialogBuilder.setTitle("Info");
alertDialogBuilder.setMessage("Internet connection not available check ur internet connection");
alertDialogBuilder.setPositiveButton("Yes",new DialogInterface.OnClickListener() {
    @Override
    public void onClick(DialogInterface dialog, int which) {
        // TODO Auto-generated method stub
        context.startActivity(new Intent(Settings.ACTION_WIRELESS_SETTINGS));
        dialog.cancel();
    }
});
alertDialogBuilder.setNegativeButton("No", new DialogInterface.OnClickListener() {
    @Override
    public void onClick(DialogInterface dialog, int which) {
        // TODO Auto-generated method stub
        System.exit(0);
        return;
    }
}); 
```

如果用户在互联网连接上，我想检查用户是否连接，那么当用户按下后退按钮时它将显示主活动，否则应用程序退出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T09:42:20.600

使用`NetworkInfo`类检查互联网连接。当用户单击返回按钮时，调用此函数。

```
public boolean checkInternet(){
 NetworkInfo network = connectionManager.getActiveNetworkInfo();
  if (network == null)
     return false;
  if (!network.isConnected())
     return false;
 return true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T09:40:37.027

您需要覆盖 onKeyDown 并创建自定义对话框来执行此操作。

[编辑 1]

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {

        // back buton pressed , now you can check connection here

       if(isOnline)
       {
           // go to main activity
       }
       else
       {
          System.exit(0);
       } 

        return true;
    }
    return super.onKeyDown(keyCode, event);
}

public static boolean isOnline(Context context) {
   ConnectivityManager cm = (ConnectivityManager)     
   context.getSystemService(Context.CONNECTIVITY_SERVICE);
   NetworkInfo netInfo = cm.getActiveNetworkInfo();

   if (netInfo != null && netInfo.isConnectedOrConnecting()) {
       return true;
   }

   return false;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T09:43:42.177

您可以使用以下功能检查用户是否在线：

```
public static boolean isOnline(Context context) {
   ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
   NetworkInfo netInfo = cm.getActiveNetworkInfo();
   if (netInfo != null && netInfo.isConnectedOrConnecting()) {
       return true;
   }
   return false;
} 
```

您还需要将此添加到您的 AndroidManifest.xml

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T09:50:08.180

在按钮单击上调用此方法并在清单中添加互联网权限和访问网络状态。

```
protected boolean checkConnection(Context mContext) {
    final NetworkInfo info = ((ConnectivityManager) mContext.getSystemService(Context.CONNECTIVITY_SERVICE)).getActiveNetworkInfo();
    if (info == null || !info.isConnected()) {
        return false;
    }
    if (info.isRoaming()) {
        return true;
    }
    return true;
} 
```

# c# - 在网格视图中拖放项目

> ID：14212017
> 
> 赞同：1
> 
> 时间：2013-01-08T09:38:20.343
> 
> 标签：c#, windows-8, microsoft-metro, windows-store-apps, windows-store

有什么方法可以在同一个 Gridview 中拖放项目以重新排序项目？

我访问了这些示例，但在这两个示例中，拖放都允许不同 GridView 中的项目。

[http://blogs.msdn.com/b/going_metro/archive/2012/07/16/drag-and-drop-within-a-grouped-grid-view.aspx](http://blogs.msdn.com/b/going_metro/archive/2012/07/16/drag-and-drop-within-a-grouped-grid-view.aspx)

[http://www.renauddumont.be/en/2012/windows-8-csharp-xaml-drag-drop](http://www.renauddumont.be/en/2012/windows-8-csharp-xaml-drag-drop)

我正在尝试在同一 Gridview 中拖放项目以重新排序项目。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T11:36:32.887

只需在 GridView XAML 中添加这些行

```
 CanReorderItems="True"
            AllowDrop="True"
            CanDragItems="True" 
```

# eclipse-plugin - Eclipse EPF RichText Editor - MS Word 文本的敏感粘贴

> ID：14212024
> 
> 赞同：1
> 
> 时间：2013-01-08T09:38:30.197
> 
> 标签：eclipse-plugin, ms-word, eclipse-rcp, copy-paste, rich-text-editor

我有一个使用 EPF RichTextEditor 组件/插件的 Java 应用程序。一切都很好。如果用户粘贴一些最初是从 MS Word 文档中复制的文本，则会出现问题。粘贴此文本会导致 HTML 源代码和预览出现混乱。

当然，我可以编写一些之后清理文本的方法。但我见过带有“从单词粘贴”之类的按钮的在线编辑器。我的问题是，EPF RichTextEditor 是否存在类似的东西？

# meteor - 如何创建用户客户端？

> ID：14212028
> 
> 赞同：2
> 
> 时间：2013-01-08T09:38:47.653
> 
> 标签：meteor, account

我正在为一家小公司做一个实习文档共享项目。我想用流星做到这一点。我对 html/javascript 很常见，但对数据库却没有。我的问题是处理用户。由于我在这里的研究，我不确定是否已经可以在客户端创建用户。官方文档显示了一些如何处理用户的方法，但没有示例。我试图在服务器端创建一个列表，如下所示：

```
Users = new Meteor.Collection("users"); 
```

然后我想在启动时插入一个用户，如下所示：

```
//on Client side
if (Meteor.isClient) {
var username = "My Name";

    Meteor.call("create_user", username, function(error, user_id) {
         Session.set("user_id", user_id);
});
}

//on Server side
if(Meteor.is_server) {
Meteor.methods({
    create_user: function(username) {
        console.log("CREATING USER");
        var USER_id = Users.insert({name: username});
        return user_id;
    },
});
} 
```

但是读取html模板中的用户名不起作用......

有没有注册和登录的好例子？

干杯

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T11:32:40.213

在 Meteor 中添加帐户功能非常容易。可能是简单的电子邮件、密码，或者使用 facebook connect/twitter 等。

执行以下操作以获取一个设置了用户帐户的简单流星应用程序..

```
meteor create simpleapp
cd simpleapp 
```

添加accounts-ui和accounts-password包

```
meteor add accounts-ui
meteor add accounts-password 
```

您只需添加其他帐户相关的包来实现 facebook/twitter/github/google 登录等

要列出其他可用的流星包，请使用此命令

```
meteor list 
```

现在编辑您的 simpleapp.html 文件以添加登录按钮等。

```
<head>
  <title>simpleapp</title>
</head>

<body>
  {{> hello}}
</body>

<template name="hello">
  <h1>Hello World!</h1>
  {{greeting}}
  <input type="button" value="Click" />
  {{loginButtons}}
</template> 
```

我只是添加`{{loginButtons}}`到默认的 html 文件中以添加默认的登录按钮..

现在运行流星应用程序并转到 localhost:3000

```
meteor 
```

您无需做太多工作就实现了登录功能。4-5行代码，它甚至可以处理忘记密码、注册新用户等事情

接下来是您需要在用户登录时显示特定的 html。您可以使用`{{currentUser}}`全局

你相应地实施它

```
<template name="hello">
  <h1>Hello World!</h1>
  {{greeting}}
  <input type="button" value="Click" />
  {{loginButtons}}
  {{#if currentUser}}
    {{> loggedInTemplate}}
  {{else}}
    {{> loggedOutTemplate}}
  {{/if}}
</template>

<template name="loggedInTemplate">
  <!-- user is logged in -->
</template>
<template name="loggedOutTemplate">
  <!-- user is logged out -->
</template> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T09:53:50.583

您不需要手动创建用户系统。只需使用[帐户包](http://docs.meteor.com/#accounts_api)：

> Meteor Accounts 系统建立在发布和方法中的 userId 支持之上。核心包添加了存储在数据库中的用户文档的概念，附加包添加了安全密码验证、与第三方登录服务的集成以及预构建的用户界面。

不过，您的代码应该可以工作。但是您没有将用户名属性公开给客户端，所以也许这就是您在模板中看不到它的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T10:18:58.843

好的，谢谢，这很容易。但是所以我不能修改loggedInTemplate 或loggedOutTemplate。

我向你展示我所拥有的：

```
//the html

<head>
   <title>myApp | documents</title>
</head>

<body>
<div id="headerBox">
    {{> header}}
</div>
<div id="sideBox">
    {{> side}}
</div>
<div id="contentsBox">
    {{> contents}}
</div>
</body>

<template name="header">
<h1>Company name</h1>
</template>

<template name="contents">
{{#if currentUser}}
   <p>Welcome to documents</p>
{{else}}
   <h3>Hello! Please log in!</h3>
   <p><input type="text" id="username" placeholder="Username"><input type="text" id="password" placeholder="Password"><input type="button" value="log me in!"></p>
{{/if}}
 </template>

 <template name="side">
<p>Hello {{ activeUser }}</p>
<p><input type="button" value="Create New Document" onclick="createPage()"></p>
<h3>Documents:</h3>
 </template> 
```

和

```
//client.js

Pages = new Meteor.Collection("pages");

Meteor.startup(function() {
   Session.set("activeUser", "please log in!");
});

Template.side.activeUser = function() {
    return Session.get("activeUser");
}; 
```

和

```
//server.js

Meteor.startup(function() {
    Accounts.createUser({username: "MyName", email: "me@example.com", password: "123456"});
}); 
```

我正在寻找一种手动方式来记录这个在启动时创建的用户。当然后来允许这个用户创建新用户......

问题是添加

```
// Returns an event_map key for attaching "ok/cancel" events to
// a text input (given by selector)
var okcancel_events = function (selector) {
    return 'keyup '+selector+', keydown '+selector+', focusout '+selector;
};

// Creates an event handler for interpreting "escape", "return", and "blur"
// on a text field and calling "ok" or "cancel" callbacks.
var make_okcancel_handler = function (options) {
var ok = options.ok || function () {};
var cancel = options.cancel || function () {};

return function (evt) {
    if (evt.type === "keydown" && evt.which === 27) {
    // escape = cancel
    cancel.call(this, evt);
  } else if (evt.type === "keyup" && evt.which === 13) {
    // blur/return/enter = ok/submit if non-empty
    var value = String(evt.target.value || "");
    if (value)
      ok.call(this, value, evt);
    else
      cancel.call(this, evt);
   }
 };
};

Template.contents.events = {};

Template.contents.events[okcancel_events('#password')] = make_okcancel_handler({
    ok: function (text, event){
        var usernameEntry = document.getElementById('username');
        var passwordEntry = document.getElementById('password');
        Meteor.loginWithPassword({usernameEntry, passwordEntry});
        event.target.value = "";    
    }
}); 
```

对客户端不起作用...

# algorithm - 数字到包含重复的序列的唯一排列映射

> ID：14212030
> 
> 赞同：13
> 
> 时间：2013-01-08T09:38:50.660
> 
> 标签：algorithm, math, mapping, permutation, combinatorics

我正在寻找一种可以将数字映射到序列的唯一排列的算法。[由于类似的问题Fast permutation -> number -> permutation mapping algorithms](https://stackoverflow.com/questions/1506078/fast-permutation-number-permutation-mapping-algorithms) ，我发现了 Lehmer 码和阶乘数字系统，但该问题不涉及序列中存在重复元素的情况。

例如，以序列“AAABBC”为例。有6个！= 可以安排720种方式，但我相信只有6种！/ (3! * 2! * 1!) = 这个序列的 60 个唯一排列。在这些情况下，如何将数字映射到排列？

编辑：将术语“集合”更改为“序列”。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-17T07:55:25.410

从排列到数字：

设 K 为字符类的数量（例如：AAABBC 有三个字符类）

令 N[K] 为每个字符类中的元素数。（例如：对于 AAABBC，我们有 N[K]=[3,2,1]，并且让 N= sum(N[K])

然后，序列的每个合法排列唯一地对应于不完整 K 路树中的路径。

然后，排列的唯一编号对应于 K-ary 树*终端节点*的后序遍历中树节点的索引。

幸运的是，我们实际上不必执行树遍历——我们只需要知道树中有多少终端节点在*字典*上比我们的节点少。这很容易计算，因为在树中的任何节点上，当前节点*下方*的终端节点数等于使用序列中未使用元素的排列数，它有一个封闭形式的解决方案，它是一个简单的乘法阶乘。

因此，鉴于我们的 6 个原始字母，并且我们排列的第一个元素是“B”，我们确定将有 5!/3!1!1! = 20 个以“A”开头的元素，所以我们的排列数必须大于 20。如果我们的第一个字母是“C”，我们可以计算为 5!/2!2!1! （不是 A）+ 5!/3!1!1! （不是 B）= 30+ 20，或者 60（总计）- 5!/3!2!0! (C) = 50

使用它，我们可以进行排列（例如 'BAABCA'）并执行以下计算： Permuation #= (5!/2!2!1!) ('B') + 0('A') + 0(' A')+ 3!/1!1!1! ('B') + 2!/1!

= 30 + 3 +2 = 35

检查这是否有效：CBBAAA 对应于

（5！/2！2！1！（不是A）+ 5！/3！1！1！（不是B））'C'+ 4！/2！2！0！（不是 A）'B' + 3!/2!1!0! （不是 A）'B' = (30 + 20) +6 + 3 = 59

同样，AAABBC = 0 ('A') + 0 'A' + '0' A' + 0 'B' + 0 'B' + 0 'C = 0

示例实现：

```
import math
import copy
from operator import mul

def computePermutationNumber(inPerm, inCharClasses):
    permutation=copy.copy(inPerm)
    charClasses=copy.copy(inCharClasses)

    n=len(permutation)
    permNumber=0
    for i,x in enumerate(permutation):
        for j in xrange(x):
            if( charClasses[j]>0):
                charClasses[j]-=1
                permNumber+=multiFactorial(n-i-1, charClasses)
                charClasses[j]+=1
        if charClasses[x]>0:
            charClasses[x]-=1
    return permNumber

def multiFactorial(n, charClasses):
    val= math.factorial(n)/ reduce(mul, (map(lambda x: math.factorial(x), charClasses)))
    return val 
```

从数字到排列：这个过程可以反向完成，但我不确定效率如何：给定一个排列数，以及它生成的字母表，递归地减去小于或等于剩余的最大节点数排列数。

例如，给定一个排列数 59，我们首先可以减去 30 + 20 = 50 ('C') 留下 9。然后我们可以减去 'B' (6) 和第二个 'B'(3)，重新生成我们原来的排列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T14:11:24.473

这是Java中的一种算法，它通过将整数映射到序列来枚举可能的序列。

```
public class Main {

    private int[] counts = { 3, 2, 1 }; // 3 Symbols A, 2 Symbols B, 1 Symbol C
    private int n = sum(counts);

    public static void main(String[] args) {
        new Main().enumerate();
    }

    private void enumerate() {
        int s = size(counts);
        for (int i = 0; i < s; ++i) {
            String p = perm(i);
            System.out.printf("%4d -> %s\n", i, p);
        }

    }

    // calculates the total number of symbols still to be placed
    private int sum(int[] counts) {
        int n = 0;
        for (int i = 0; i < counts.length; i++) {
            n += counts[i];
        }
        return n;
    }

    // calculates the number of different sequences with the symbol configuration in counts
    private int size(int[] counts) {
        int res = 1;
        int num = 0;
        for (int pos = 0; pos < counts.length; pos++) {
            for (int den = 1; den <= counts[pos]; den++) {
                res *= ++num;
                res /= den;
            }
        }
        return res;
    }

    // maps the sequence number to a sequence
    private String perm(int num) {
        int[] counts = this.counts.clone();
        StringBuilder sb = new StringBuilder(n);
        for (int i = 0; i < n; ++i) {
            int p = 0;
            for (;;) {
                while (counts[p] == 0) {
                    p++;
                }
                counts[p]--;
                int c = size(counts);
                if (c > num) {
                    sb.append((char) ('A' + p));
                    break;
                }
                counts[p]++;
                num -= c;
                p++;
            }
        }
        return sb.toString();
    }

} 
```

该算法使用的映射如下。我使用问题中给出的示例 (3 x A, 2 x B, 1 x C) 来说明它。

总共有 60 个 (=6!/3!/2!/1!) 可能的序列，其中 30 个 (=5!/2!/2!/1!)`A`首先有 20 个 (=5 !/3!/1!/1!)`B`排在第一位，而 10 (=5!/3!/2!/0!)`C`排在第一位。

数字 0..29 映射到以 开头的所有序列`A`，30..49 映射到以 开头的序列`B`，50..59 映射到以 开头的序列`C`。

对序列中的下一个位置重复相同的过程，例如，如果我们以从开头的序列开始，`B`我们现在必须将数字 0 (=30-30) .. 19 (=49-30) 映射到具有配置 ( 3 x A、1 x B、1 x C)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T10:28:06.550

一个非常简单的算法来映射一个由 n 位组成的排列的数字是

```
number<-digit[0]*10^(n-1)+digit[1]*10^(n-2)+...+digit[n]*10^0 
```

您可以找到大量用于算法生成排列的资源。我猜你想在生物信息学中使用这个算法。例如，您可以使用 Python 中的 itertools.permutations。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T17:35:03.207

假设得到的数字相对容易地适合一个单词（例如 32 或 64 位整数），那么链接文章的大部分内容仍然适用。可变基数的编码和解码保持不变。变化的是基数如何变化。

如果您正在创建序列的排列，则从符号桶中（从原始序列中）挑选一个项目并将其放在开头。然后你从你的符号桶中挑选出另一个项目并将它放在它的末尾。您将继续在最后挑选和放置符号，直到您的存储桶中的符号用完为止。

重要的是您每次从剩余符号的桶中挑选出哪个项目。剩余符号的数量是您不必记录的，因为您可以在构建排列时计算它——这是您选择的结果，而不是选择本身。

此处的策略是记录您选择的内容，然后呈现一系列可供选择的内容。然后选择，记录你选择的索引（通过变量基方法打包），然后重复，直到没有什么可以选择。（就像上面构建置换序列时一样。）

在重复符号的情况下，您选择哪一个并不重要，因此您可以将它们视为相同的符号。不同之处在于，当您选择仍然有重复的符号时，您并没有减少存储桶中下次要选择的符号数量。

让我们采用一种表示法来说明这一点：

与其列出我们存储桶中留下的重复符号以供选择，`c a b c a a`我们将列出它们以及存储桶中仍有多少个符号：`c-2 a-3 b-1`。

请注意，如果您`c`从列表中选择，则存储桶已`c-1 a-3 b-1`留在其中。这意味着下次我们选择某些东西时，我们有三个选择。

但另一方面，如果我`b`从列表中选择，则桶已`c-2 a-3`留在其中。这意味着下次我们选择某些东西时，我们只有两个选择。

在重建置换序列时，我们只需像计算置换数时一样维护桶。

实现细节并非微不足道，但使用标准算法很简单。唯一可能让您烦恼的是，当您的存储桶中的符号不​​再可用时该怎么办。

假设您的存储桶由一对列表表示（如上）：`c-1 a-3 b-1`并且您选择`c`. 您生成的存储桶是`c-0 a-3 b-1`. But`c-0`不再是一种选择，因此您的列表应该只有两个条目，而不是三个。您可以将整个列表向下移动 1 导致`a-3 b-1`，但如果您的列表很长，这很昂贵。一个快速简单的解决方案：将存储桶的最后一个元素移动到已移除的位置并减小存储桶大小：`c0 a-3 b-1`变为`b-1 a-3 <empty>`或仅`b-1 a-3`.

请注意，我们可以执行上述操作，因为桶中符号的列出顺序无关紧要，只要我们对数字进行编码或解码时的方式相同即可。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-18T06:53:09.443

由于我不确定 g [bronner 答案](https://stackoverflow.com/a/14374455/1154578)中的代码（或我的理解），我在 R 中重新编码如下

```
ritpermz=function(n, parclass){
    return(factorial(n) / prod(factorial(parclass)))}

rankum <- function(confg, parclass){
    n=length(confg)
    permdex=1
    for (i in 1:(n-1)){
      x=confg[i]
      if (x > 1){
        for (j in 1:(x-1)){
            if(parclass[j] > 0){
                parclass[j]=parclass[j]-1
                permdex=permdex + ritpermz(n-i, parclass)
                parclass[j]=parclass[j]+1}}}
        parclass[x]=parclass[x]-1
    }#}
    return(permdex)
} 
```

这确实会产生具有正确整数范围的排名

# c# - 将数据从 Form2 (textbox2) 传输到 Form1 (textbox1)？

> ID：14212032
> 
> 赞同：3
> 
> 时间：2013-01-08T09:39:02.687
> 
> 标签：c#, winforms

> **可能重复：**
> [我想从 Form2 控制 Form1](https://stackoverflow.com/questions/3146576/i-would-like-to-control-form1-from-form2)

我是新手，`C#`我在谷歌中找不到我正在寻找的答案，所以我希望这里有人可以帮助我。我只是在练习将数据从一个表单传输到另一个表单*（或传递，随心所欲地调用它） 。*

这是我所拥有的：

我有 2 个表格 -`Form1`和`Form2`.
`Form1`包含一个文本框（命名`txtForm1`）和一个按钮（命名`btnForm1`）。
`Form2`包含一个文本框（命名`txtForm2`）和一个按钮（命名`btnForm2`）。

运行应用程序后，通过单击按钮`btnForm1`，用户打开`Form2`。用户在文本框 ( ) 中写入的文本`txtForm2`应传输到 中的文本框 ( `txtForm1`，该按钮被禁用) `Form1`。

我该如何进行此转移？

编辑：
好的，我需要清楚这是我拥有的所有代码：

**Form1**（打开**Form2**的按钮）：

```
 private void btnForm1_Click(object sender, EventArgs e)
    {
        new Form2().Show();
    } 
```

**Form2**（关闭**Form2**的按钮）：

```
 private void btnForm2_Click(object sender, EventArgs e)
    {
        this.Close();
    } 
```

我没有别的了。（我完全是新手）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T09:54:55.047

在`Form1`：

```
public void SetTextboxText(String text)
{
    txtForm1.Text = text;
}

private void btnForm1_Click(object sender, EventArgs e)
{
    var frm = new Form2(this); // pass parent form (this) in constructor
    frm.Show();
} 
```

在`Form2`：

```
Form _parentForm;

public Form2(Form form)
{
    _parentForm = form;
}

private void txtForm2_TextChanged(object sender, EventArgs e)
{
    _parentForm.SetTextboxText(txtForm2.Text); // change Form1.txtForm1.Text
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T09:51:37.637

在您的 Form2 中，您应该有一些类似的内容：

```
private void btnForm2_Click(object sender, EventArgs e)
 {          
   this.Hide();       
 }

public String GettxtForm2()
{
    return txtForm2.Text;
} 
```

现在在 form1 中，您可以使用以下内容访问 txtForm2：

```
Form2 form2 = new Form2();
 //on click btnForm1 show that form2 where you can edit the txtForm2
 private void btnForm1_Click(object sender, EventArgs e)
     {                
       form2.Show();       
     }
   //after you save the txtForm2 when you will focus back to form1 the txtForm1 will get the value from txtForm2
   private void Form1_Enter(object sender, EventArgs e)
        {
             txtForm1.Text = Form2.GettxtForm2();
        } 
```

您可以轻松修改所有这些逻辑可能发生的事件......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T09:44:40.873

创建一个公共变量并将文本框中的值传递给第二个表单。

```
public static string myVar;   
myVar = txtForm2.Text; 
```

当您返回第一种形式时： `txtForm1.Text = Form2.myVar;`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-08T10:01:56.537

尝试这个 ;）

在表格 1 上：

```
private void button1_Click(object sender, EventArgs e)
    {
        Form2 frm2 = new Form2(textBox1.Text);
        frm2.Show();
        this.Hide();
    } 
```

在表格 2 上：

```
public partial class Form2 : Form
{
    public string textBoxValue;
    public Form2()
    {
        InitializeComponent();
    }

    public Form2(string textBoxValue)
    {
        InitializeComponent();
        this.textBoxValue = textBoxValue;
    }

    private void Form2_Load(object sender, EventArgs e)
    {
        textBox2.Text = textBoxValue;
    } 
```

# facebook - 检测 Facebook 语言

> ID：14212033
> 
> 赞同：3
> 
> 时间：2013-01-08T09:39:05.667
> 
> 标签：facebook

我正在开发一个 Facebook 应用程序，其中将有 2 种语言，显然用户可以自己切换，但我也想检测用户在 Facebook 上使用的语言，以便我可以将其设置为默认语言。

我检查了opengraph API，但似乎没有任何方法可以检测到这一点，还有其他选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T09:41:06.367

这里有看

[https://developers.facebook.com/docs/reference/api/user/](https://developers.facebook.com/docs/reference/api/user/)

检查区域设置和语言

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T09:42:35.393

使用图形 API：

```
/me?fields=locale 
```

# python - pyqt 如何从 QDateTimeEdit 获取 python 时间戳

> ID：14212036
> 
> 赞同：3
> 
> 时间：2013-01-08T09:39:09.843
> 
> 标签：python, pyqt4

我的 QT UI 中有一个 QDateTimeEdit。

我已经看到我可以使用以下方法从 QDateTime 实现 python 时间戳：

```
my_time = QDateTime(2012, 12, 20, 11, 59, 59)
my_time = my_time.toPyDateTime() 
```

我的问题是：如何从我的 QDateTimeEdit 创建一个 QDateTime 对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T09:45:19.020

我自己找到了答案。

鉴于您将 QDateTimeEdit 作为变量 self.my_tedit 您可以通过这种方式实现结果

```
my_time = my_tedit.dateTime()
my_time = my_time.toPyDateTime() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-06T12:01:03.993

我认为Qt已经重命名了这个函数。.toPyDatetime 不起作用。这确实有效：`.toPython()`

```
my_time = my_tedit.dateTime()
my_time = my_time.toPython() 
```

# php - 将 Google 结帐与 Gravity Forms 集成

> ID：14212039
> 
> 赞同：0
> 
> 时间：2013-01-08T09:39:17.053
> 
> 标签：php, jquery, wordpress

我创建了一个使用[重力表单](http://www.gravityforms.com/)的多步骤表单，我想将其与 Google 结帐集成。

我有以下步骤：

1.  提交用户详细信息。
2.  添加媒体。
3.  付款（这是谷歌结帐步骤的地方）。
4.  谢谢你。

据我所见，重力表单使用 jQuery 来显示/隐藏每个步骤，所以在第 3 步是否可以使用 jQuery 插入 Google buynow 按钮（具有固定价格）？

这是否意味着客户需要手动检查提交是否已付费（即检查提交是否与付款）无关紧要。

我只想让用户完成第 1 步和第 2 步，在第 3 步付款并返回感谢页面

Gravity 表单目前不提供 Google Checkout 插件（它提供 Paypal），但由于提交的价格单一且不会改变，我想知道是否有办法将其合并？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:19:11.480

我希望你有分页符元素来完成表格的 4 个步骤。在付款部分（在第二个分页符之后，您可以使用 HTML 元素添加您的 Google Checkout 按钮。

# gwt - GWT中弹出面板中的滚动条

> ID：14212042
> 
> 赞同：2
> 
> 时间：2013-01-08T09:39:29.517
> 
> 标签：gwt, popup

我有一个弹出面板，它在按钮单击事件上打开。弹出面板高度应该是固定的，如果弹出面板的内容超过弹出面板的高度，则需要附加一个垂直滚动条，我应该能够滚动它以查看内容。我在弹出窗口中显示了一个弹性表，弹性表的行和列因不同类型的输入而异。因此，如果 flex 表的大小大于弹出窗口，滚动条应该会弹出。我尝试在我的 CSS 中使用溢出：滚动，但它没有用。是因为弹性表吗？当我在弹出窗口中有不同的小部件时如何实现这一点？任何机构都可以帮忙吗？

谢谢， 斯里尼瓦斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T09:42:00.803

尝试将 ScrollPanel 添加到 PopupPanel 中，然后将 FlexTable 添加到 ScrollPanel 中。

您可以找到文档 - [http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/ScrollPanel.html](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/ScrollPanel.html)

示例 - [http://examples.roughian.com/index.htm#Panels~ScrollPanel](http://examples.roughian.com/index.htm#Panels~ScrollPanel)

# emacs - Emacs 行号自动加载

> ID：14212044
> 
> 赞同：1
> 
> 时间：2013-01-08T09:39:37.620
> 
> 标签：emacs

这是我的[.emacs](https://gist.github.com/4482483)。它仍然不会在打开时加载行号。我需要“Mx linum-mode”来启用这样的选项。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T09:42:11.443

尝试这个：

```
(require 'linum)              ;; you miss this line
(global-linum-mode 1) 
```

最终，您可以检查[另一种启用 Linum](http://www.emacswiki.org/LineNumbers)的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T14:30:56.630

`.emacs`在调用启用 linum 模式之前，您可能有错误吗？例如`load`，图阿雷格模式看起来很可疑，因为您提供的文件名似乎指向目录而不是文件。IOW，检查您的`*Messages*`缓冲区，和/或尝试`(global-linum-mode 1)`从 .emacs 中删除所有内容。

# php - Zend Framework 2 - 使用验证器构建一个简单的表单

> ID：14212050
> 
> 赞同：2
> 
> 时间：2013-01-08T09:39:59.703
> 
> 标签：php, forms, validation, zend-form, zend-framework2

我正在尝试构建一个非常简单的表单，并希望在表单本身中添加验证。在表单中添加它时不需要百万行代码，只需大约 3 行。

这是我的两个领域：

```
$this->add(array(
        'name' => 'username',
        'attributes' => array(
            'type'  => 'text',
        ),
        'options' => array(
            'label' => 'Name*',
            'required' => true,
        ),
        'filters' => array(
            array('StringTrim')
        ),
    ));
$this->add(array(
        'name' => 'email',
        'attributes' => array(
            'type'  => 'text',
        ),
        'options' => array(
            'label' => 'E-Mail*',
            'required' => true,
        ),
        'validators' => array(
            array('regex', true, array(
                'pattern'   => '/[A-Z0-9._%-]+@[A-Z0-9.-]+\.[A-Z]{2,4}/i',
                'messages'  =>  'Bitte eine gültige E-Mailadresse angeben'))
        ),
        'filters' => array(
            array('StringTrim')
        ),
    )); 
```

`$form->isValid()`ALWAYS 返回真。即使该字段为空。我有另一个带有正则表达式验证器的字段，同样的事情...... WTF，Zend？

我的控制器如下所示：

```
$form = new UserForm();
    $form->setHydrator(new DoctrineEntity($entityManager));

    $request = $this->getRequest();
    if ($request->isPost()) {
        $backenduser = new User();
        $form->bind($user);
        $form->setData($request->getPost());

        if ($form->isValid()) {
             ....
        } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T09:50:45.510

验证和过滤定义不是表单本身的一部分。请参阅[http://framework.zend.com/manual/2.0/en/user-guide/forms-and-actions.html](http://framework.zend.com/manual/2.0/en/user-guide/forms-and-actions.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T09:47:41.220

试试这个，传递 $_POST 数据。

```
 if($form->isValid($_POST)) {
     // success!
  } else {
     // failure!
  } 
```

# syntax-highlighting - 自定义代码高亮 Notepad++

> ID：14212063
> 
> 赞同：2
> 
> 时间：2013-01-08T09:40:56.763
> 
> 标签：syntax-highlighting, notepad++

我正在为记事本++ 创建一个自定义代码突出显示。我想要做的是以下内容：

一些字段名在代码中写在他们的名字前面有一个'，例如

```
if 'variable = "test" then ... 
```

我想强调这些词，但notepad++似乎不允许以'开头并以空格结尾的分隔符，它不允许空格作为转义字符。此外，使用 ' 作为关键字并启用前缀模式无效。有人有建议吗？我应该使用另一个表达式让记事本识别空格/'吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-09T02:55:33.593

如果只需要突出显示单个单词，则可以在前缀模式下使用关键字。但是，当在关键字中使用单引号或双引号时，需要使用反斜杠对其进行转义。所以你的关键字是：

> \'

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-02T17:02:32.250

这在记事本++中可能是不可能的。我可以使用单引号以外的字符（如反引号）获得您想要的行为，但它似乎不适用于单引号或双引号。我怀疑这些字符在语法荧光笔中被特殊对待。

# wordpress - 在 wordpress 中找不到 single-type.php 文件的页面

> ID：14212064
> 
> 赞同：0
> 
> 时间：2013-01-08T09:40:56.903
> 
> 标签：wordpress

我创建了自定义帖子类型“事件”以显示在名为 single-event.php 文件的单页中，但它提供了 404 错误。即使我使用过，我该如何解决这个问题

> 刷新重写规则（）；

请帮我解决我的问题......这是我的代码..

```
function custom_event() {
$labels = array( 
'name' => _x('Event', 'post type general name'),
'singular_name' => _x('Event', 'post type singular name'),
'add_new' => _x('Add Event', 'Content'),
'add_new_item' => __('Add New Event'),
'edit_item' => __('Edit Event'),
'new_item' => __('New Content'),
'view_item' => __('View Event'),
'search_items' => __('Search Content'),
'not_found' =>  __('Nothing found'), 
'parent_item_colon' => '',
'menu_name' => __('Event')
 );

 $args = array(
 'labels' => $labels,
 'public' => true,
 'publicly_queryable' => true,
 'show_ui' => true, 
 'show_in_menu' => true,  
 'query_var' => true,
 'rewrite' => true,
 'capability_type' => 'post',
 'has_archive' => true, 
 'hierarchical' => false,
 'menu_position' => 20,
 'supports' => array( 'title', 'editor')
  );

  flush_rewrite_rules();
  register_post_type('event', $args); 
  }
  //$wp_rewrite->flush_rules();
  //add_action('admin_init', 'flush_rewrite_rules');
   add_action ('init', 'custom_event'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T10:17:43.200

尝试使用`'rewrite' => array( 'slug' => 'event' )`而不是`'rewrite' => true`.

另外，你不应该这样使用`flush_rewrite_rules()`。它每次都会不必要地运行。您可以制作一个插件来定义自定义帖子类型并使用`register_activation_hook`.

# windows - 在 Windows 7 中移动无边框窗口

> ID：14212071
> 
> 赞同：2
> 
> 时间：2013-01-08T09:41:02.847
> 
> 标签：windows, mousemove, borderless

我已经开始与一家新公司合作，所以我不得不从 Ubuntu 切换到 Windows 7。在 Ubuntu 上，所有的 GUI、面板，无论在显示器上可见，都可以通过键 ALT+鼠标移动。这很好，因为如果你有一个无边框的窗口，你仍然可以将它移动到你想要的地方。

有没有办法在 Windows 上做到这一点？

# soundcloud - GET 仅返回 50 个 SoundCloud 组

> ID：14212073
> 
> 赞同：4
> 
> 时间：2013-01-08T09:41:03.317
> 
> 标签：soundcloud

我在 SoundCloud 中加入了 92 个组，但是当我执行 SC.get("/me/groups"....etc 时，我只收到 50 个返回给我。当我执行

```
curl http://api.soundcloud.com/users/6999000/groups.json?client_id=MY_CLIENT_ID 
```

我只收到 50 个结果返回给我？有什么方法可以返回全部组条目？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T16:21:25.200

您可以传递一个`offset`GET 参数以检索超过 50 项限制的曲目。

```
curl http://api.soundcloud.com/users/6999000/groups.json?client_id=YOUR_CLIENT_ID&offset=50 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-05T19:29:13.880

您可以使用循环和偏移来获取所有内容。

伪代码...

```
String url = "http://api.soundcloud.com/users/6999000/groups.json?client_id=MY_CLIENT_ID";
getGroups(url);

int count = 50;
String newUrl = "http://api.soundcloud.com/users/6999000/groups.json?client_id=MY_CLIENT_ID&offset=50";
while( count < 92) {
    getGroups(newUrl);
    count = count + 50;
    } 
```

查看[http://developers.soundcloud.com/docs#pagination](http://developers.soundcloud.com/docs#pagination)了解有关偏移的更多信息。

# ruby-on-rails - Dbpedia 查询需要太多时间（Ruby）

> ID：14212077
> 
> 赞同：2
> 
> 时间：2013-01-08T09:41:07.573
> 
> 标签：ruby-on-rails, ruby, sparql, dbpedia

我正在构建一个对 dbPedia 的 prefixSearch Api 进行查询的集成系统

```
http://lookup.dbpedia.org/api/search.asmx/PrefixSearch?QueryClass=&MaxHits=1&QueryString=KEYWORD 
```

从这里我获得一个资源的 URI 并使用一个简单的 get 获取资源，然后我使用 nokogiri 解析它

```
data = Net::HTTP.get(URI.parse(url.to_s+'.rdf'))
doc = Nokogiri::XML(data) 
```

从文档中我需要找到摘要，所以使用 xpath 我成功找到了它。

```
entity = doc.root.xpath("/rdf:RDF/rdf:Description[@rdf:about=\""+@uri+"\"]").map do |node|  
name = node.xpath("dbpedia-owl:abstract[@xml:lang=\"en\"]").first.content
end 
```

问题在于，对于一​​些信息丰富的页面，例如涉及国家的页面，执行此操作将需要 15-16 秒。这在我的系统中是不可接受的。

所以我需要找到一种方法来更快地完成所有事情？有什么解决办法吗？例如使用 SPARQL 感谢大家

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T11:55:25.350

如果您只需要有关 URI 的特定信息，那么您可能可以为这些信息编写一个 SPARQL 查询，这将使事情变得更快。

您需要详细说明您需要哪些信息，但我假设您正在根据您显示的代码查找有关 URI 的英文摘要：

```
PREFIX dbpedia-owl: <http://dbpedia.org/ontology/>

SELECT ?abstract
WHERE
{
  <http://dbpedia.org/resource/RESOURCE> dbpedia-owl:abstract ?abstract .
  FILTER(LANGMATCHES(LANG(?abstract), "en"))
} 
```

# .net - FileIO.FileSystem.CopyFile() 与 System.IO.File.Copy()

> ID：14212080
> 
> 赞同：8
> 
> 时间：2013-01-08T09:41:10.617
> 
> 标签：.net, vb.net, copy

关于这两个类和这些特定方法 FileIO.FileSystem.CopyFile() 和 System.IO.File.Copy() 之间的区别，我有几个问题

在最简单的级别上，当 sourceFile、destinationFile 和 bool 设置为 true 以覆盖时，它们都做同样的事情。例如

```
FileIO.FileSystem.CopyFile(source, destination, True) 
System.IO.File.Copy(source, destination, True) 
```

我的两个问题是

1.  由于我在 MSDN 网站上找不到（或者我可能错过了重点）任何内容，所以显示的 2 与显示的重载有什么区别。
2.  当 MSDN 文档中没有差异时，您（好心人回答）如何知道差异？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T09:53:12.893

在进行了几次健全性检查（例如文件、目录是否存在）并在需要时创建目标目录后，快速浏览一下反射器显示中的**Microsoft.VisualBasic.dll 。**`FileIO.FileSystem.Copy``File.Copy`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T09:53:23.653

VisualBasic 版本经过一些检查调用 System.IO.File.Copy，我通过使用 dotPeek 发现，dotPeek 是 .NET 反编译器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T09:47:16.167

我能看到的唯一区别是它们有可能引发不同的异常列表——我恐怕是通过阅读 MSDN 文档发现的 :o)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T09:54:54.330

经过我自己的研究，它似乎确实做了一些没有记录的事情。

`FileIO.FileSystem.CopyFile(source, destination, true)`如果文件夹不存在，将创建一个文件夹，而 as`System.IO.File.Copy(source, desintation, true)`不存在并引发异常。

似乎*在*使用`FileIO.FileSystem.CopyFile(source, destination, true)`引用时仍保留在内存中，因此在尝试删除新文件夹或文件时，会引发异常“ *...已被另一个进程使用*”。

# windows - 如何在 Delphi 中打开 MSI 表？

> ID：14212081
> 
> 赞同：3
> 
> 时间：2013-01-08T09:41:09.280
> 
> 标签：windows, delphi, windows-installer

我需要从 MSI 数据库中打开一些表，阅读并使用 Delphi 在其中放置一些行（在我的示例中是 Delphi 7，但如果需要，允许其他版本）。

例如，它看起来像 ORCA。msi 必须打开，写入到可以编辑的表中，然后写入 msi 文件。

默认情况下，Delphi 无法像我一样打开 MSI 表，但我发现了一个[JEDI Windows API](http://wiki.delphi-jedi.org/wiki/JEDI_Windows_API_Library "绝地 Windows API")，其中存在 JwaMsi 和 JwaMsiQuery 等库。但我找不到使用类似函数的文档或示例

```
function MsiOpenProduct(szProduct: LPCTSTR; var hProduct: MSIHANDLE): UINT; stdcall;
{$EXTERNALSYM MsiOpenProduct} 
```

顺便说一句，当我搜索这方面的信息时，我发现了这段代码：

```
const msilib = 'msi.dll';

type

  MSIHANDLE = DWORD;    
  TMsiHandle = MSIHANDLE;

function MsiCloseHandle(hAny: MSIHANDLE):UINT;stdcall;external msilib name 'MsiCloseHandle';
function MsiOpenProduct(szProduct:LPCSTR;var hProduct:MSIHANDLE):UINT;stdcall;external msilib name 'MsiOpenProductA';
function MsiGetProductProperty(hProduct:MSIHANDLE;szProperty:LPCSTR;lpValueBuf:LPSTR;pcchValueBuf:LPDWORD):UINT;stdcall; external msilib name 'MsiGetProductPropertyA';
function MsiSetInternalUI(dwUILevel:INSTALLUILEVEL;phWnd:LPHWND):INSTALLUILEVEL;stdcall;     external msilib name 'MsiSetInternalUI';

function GetMSIProperty(aProductCode:string):string;
var
 msi:TMSIHandle;
 t:string;

 function _getmsiproperty(_name:string):string;
 var
  txt:PChar;
  sz:DWORD;
 begin
  sz:=MAX_PATH;
  txt:=AllocMem(sz+1);
  if MsiGetProductProperty(msi,PChar(_name),txt,@sz)=ERROR_MORE_DATA then
   begin
    ReAllocMem(txt,sz+1);
    MsiGetProductProperty(msi,PChar(_name),txt,@sz);
   end;
  SetString(Result,txt,sz);
  FreeMem(txt,sz+1);
 end;

begin
 MsiSetInternalUI(2,nil); // скрываем GUI/hide GUI
 if MsiOpenProduct(PChar(aProductCode),msi)=ERROR_SUCCESS then
  begin
   t:=_getmsiproperty('ARPPRODUCTICON'); // главная иконка приложения/main program icon
       if t='' then t:=_getmsiproperty('ProductIcon');
       if t='' then t:=_getmsiproperty('CompleteSetupIcon');
       if t='' then t:=_getmsiproperty('CustomSetupIcon');
       if t='' then t:=_getmsiproperty('InfoIcon');
       if t='' then t:=_getmsiproperty('InstallerIcon');
       if t='' then t:=_getmsiproperty('RemoveIcon');
       if t='' then t:=_getmsiproperty('RepairIcon');
       Result:=t;
       MsiCloseHandle(msi);
  end;
end; 
```

什么更好用，在哪里可以看到文档和/或示例？

PS对不起我的英语

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:58:51.237

我会使用基于 COM 的 API 到 MSI。

请参阅[此线程](https://stackoverflow.com/questions/298841/msi-file-reading)和[MSI API 文档](http://msdn.microsoft.com/en-us/library/aa367810%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T14:46:20.647

所以，解决方案存在，我做到了！它不是那么优雅，但它正在工作......

首先，阅读[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368250%28v=vs.85%29.aspx "MSDN")上的文章（在我的例子中是关于使用 MSI 数据库的文章）。其次，你必须明白你需要做什么。就我而言，它是：

1.  打开微星数据库
2.  读取表名
3.  阅读需要的表格并展示它
4.  如果需要 - 进行更改并保存

在这里，我展示了我如何完成前三个步骤。

准备中

* * *

下载[JEDI Windows AP](http://sourceforge.net/projects/jedi-apilib/files/ "绝地 Windows API")（为了更轻松地使用 msi）并添加到项目 JwaMsi.pas、JwaMsiDefs.pas 和 JwaMsiQuery.pas（不要忘记使用列表）。将自动添加依赖项。接下来，将所有需要的组件放在表单上。

让我们编码吧！

1 打开 msi 数据库和 2 读取表名

* * *

为处理程序和缓冲区定义变量

```
var msi_handler_DB, msi_handler_view, msi_handler_record:TMSIHandle;
txt:PChar;
sz:DWORD; 
```

现在我们需要一个表格列表（[更多信息在这里](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368259%28v=vs.85%29.aspx "更多信息")）并将其放在 ListBox 中，例如

```
begin
  sz:=MAX_PATH;           //initialise
  txt:=AllocMem(sz+1);    //variables
OpenDialog1.Execute;      //select file
If MsiOpenDatabase(PChar(OpenDialog1.FileName), MSIDBOPEN_DIRECT, msi_handler_DB)=ERROR_SUCCESS //check if DB is open
  then begin                                                                                    //start reading
  Listbox1.Clear;   //prepare listbox for filling
  MsiDatabaseOpenView(msi_handler_DB, 'SELECT * FROM _Tables',msi_handler_view);  //prepare query to _Table
  MsiViewExecute(msi_handler_view, msi_handler_record);                           //execute...
  While not MsiViewFetch(msi_handler_view, msi_handler_record)=ERROR_NO_MORE_ITEMS   //and fetch it in cycle until end of table
    do begin
      MsiRecordGetString(msi_handler_record,1,txt,sz);    //read string
      ListBox1.Items.Add(txt);                            //and write to listbox
    end;                                                                          //end of fetch cycle

  MsiCloseAllHandles;                                     //close handles (we don't need they more)
  end;                                                                                          //stop reading
end; 
```

3 阅读需要的表格并展示出来

* * *

这很简单！

```
 begin
 edit1.text:=Listbox1.Items.ValueFromIndex[ListBox1.ItemIndex];
If MsiOpenDatabase(PChar(OpenDialog1.FileName), MSIDBOPEN_DIRECT, msi_handler_DB)=ERROR_SUCCESS //open database again
  then begin
  MsiDatabaseExport(msi_handler_DB, pchar(ListBox1.Items.Strings[ListBox1.ItemIndex]), 'C:\Windows\Temp', Pchar(ListBox1.Items.Strings[ListBox1.ItemIndex]+'.idt')); //export table to .idt
  MsiCloseAllHandles; //and close handler again

//...
//here must be placed code for
//parsing .idt as tabulation separated file
//with wordwrap and show it.
//for example - in StringGrid
//...

DeleteFile('C:\Windows\Temp\'+ ListBox1.Items.Strings[ListBox1.ItemIndex]+'.idt');  //do not forget delete temporary .idt file. save our planet! :)
  end;
end; 
```

4 如果需要 - 进行更改并保存

* * *

只需从头到尾重复第三步：将 StringGrid 导出到文件（关于 .idt 及其结构，您可以在此处阅读：[一](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372075%28v=vs.85%29.aspx "文本存档文件")、[二](http://msdn.microsoft.com/en-us/library/windows/desktop/aa367583%28v=vs.85%29.aspx "存档文件格式")、[三](http://msdn.microsoft.com/en-us/library/windows/desktop/aa367756%28v=vs.85%29.aspx "文本存档文件中的 ASCII 数据")），使用属性 MsiDatabaseImport 导入到 MSI（不要忘记之前打开数据库并附加它之后，还要记住关闭处理程序）并删除临时 .idt 文件。

祝你好运！

PS对不起我的英语，第二部分:)

# java - JSch 连接到远程服务器和 sudo su

> ID：14212083
> 
> 赞同：1
> 
> 时间：2013-01-08T09:41:15.863
> 
> 标签：java, unix, jsch

我是JSch的新手。请让我知道如何连接到远程服务器并执行 sudo su 并将文件从一个路径移动到远程服务器内部的另一个路径。

1.  连接到远程服务器：ssh myName@server.remote.com
2.  sudo su -homeUser
3.  cp /one/two/testFile.txt /one/testFile.txt
4.  如果找到（ls -lrt /one/testFile.txt），则复制回显文件。
5.  断开

请建议使用 JSch 库执行上述操作的一段代码

```
public void exec(){
Jsch jsch = new JSch();
try{
Session session = jsch.getSession(user,host,22);
session.setPassword("password");
UserInfo ui = new MyUserInfo();
session.setUserInfo(ui);
session.connect();
Channel channel = session.openChannel("exec");
((ChannelExec) channel).setCommand("sudo su -homeUser");

Channel.connect();
Channel.disconnect();

session.disconnect();
}Catch(Exception e )
{
}
}
public static class MyuserInfo implements Userinfo
{

@override
public String getPassword()
{
return "password";
}
@override
public String getPaspharse(){
return "yes";
}

@override
public boolean promtPassword(String arg0)
{
return true;
}
@override
public boolean promtPasspharse(String arg0)
{
return true;
}

@override
public boolean promtYesorNo(String arg0)
{
return true;
}
@override
public boolean showMessage(String arg0)
{

}
} 
```

# c++ - 如何从 C/C++ 项目创建运行时组件

> ID：14212084
> 
> 赞同：0
> 
> 时间：2013-01-08T09:41:18.750
> 
> 标签：c++, runtime, components, store

我有一个用 C++ 编写的项目，它将 LaTeX 公式转换为`.gif`图像，我想将此项目用作我的 C# Windows Store 应用程序中的组件。
我怎样才能做到这一点？

我[读了](http://msdn.microsoft.com/en-us/library/windows/apps/hh441569.aspx)但不明白。如果它是全局的，那么简单的任务呢？这简单吗？

我使用[本文中的 Mathtex](http://www.codeproject.com/Articles/11406/Enable-Your-Users-to-Write-Math-Equations-in-Your)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:43:04.257

It's pretty easy, just create the C++ project as a **Windows Runtime Component** project or something similar, build it, and add it as a reference from the C# project.

Remember that you need to use C++/CX in order to create classes that can be consumed from C# in a Windows Store app. C++/CX is similar to C++/CLI (managed C++), except that C++/CX is unmanaged and for Windows Store apps, and C++/CLI is managed and for desktop apps. Either way, a normal C++ class can never be consumed from C# (unless it's a COM class, but that's a topic for another discussion).

# tridion - SDL Tridion 2011：生成特定标记的富文本编辑器配置

> ID：14212092
> 
> 赞同：6
> 
> 时间：2013-01-08T09:41:43.403
> 
> 标签：tridion, tridion-2011, tridion-content-manager

我需要在 SDL Tridion 富文本编辑器中为图像生成如下标记：

```
<div class="imagemasksmall">
   <img src="tcm:2-123-16" alt="My amazing image" />
</div> 
```

我最初的想法是使用 FormatAreaStyles.css 文件来添加一个类似的类`div.imagemasksmall { }`，但是这似乎只有在我在标记中添加 div 时才可用。

有没有办法让编辑器生成上述标记而无需手动编写代码？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T10:15:14.780

如果您只需要一个带有“imagemasksmall”类和内部图像的 DIV，您可以分 3 步完成（因为您已经将样式添加到 FormatAreaStyles.css）：

1.  插入图像
2.  将部分类型下拉菜单更改为“通用容器（div）”
3.  将样式下拉菜单更改为“imagemasksmall”

如果您想减少它所需的手动步骤的数量，您可能必须编写一个扩展来为用户执行这些步骤。

# oracle - 在隐式游标上使用 sql%notfound

> ID：14212112
> 
> 赞同：2
> 
> 时间：2013-01-08T09:42:32.873
> 
> 标签：oracle, plsql

我对 oracle PLSQL 完全陌生。任何帮助都值得赞赏。

我在 SO 上找不到类似的问题（也许它太基础了？）

我正在运行来自 TOAD、Oracle 11G 的代码

```
SET SERVEROUTPUT ON
DECLARE 
var titres%ROWTYPE; 
BEGIN
    select reference, sicovam into
    var.reference, var.sicovam 
    from titres 
    where reference = '1234';
    if sql%notfound then 
        dbms_output.put_line('NOT FOUND');
    else 
        dbms_output.put_line(var.reference || '    ' ||  var.sicovam);
    end if;
END; 
```

如果`Where`子句可以提取一行数据，那么它将运行该`else`部分

如果`Where`子句无法提取任何行，则会显示错误：

```
ORA-01403: no data found
ORA-06512: at line 4 
```

谁能指出我正确的方向？谢谢

我尝试过使用基本的异常处理代码

```
When others then 
null;
end; 
```

然后我得到另一个奇怪的结果：如果`Where`子句可以提取一行数据，那么它将不会运行该`else`部分或`if`部分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T09:51:32.090

当 pl/sql 块内的查询没有返回任何行时，`NO_DATA_FOUND`立即引发异常并且块的执行将停止。所以`if sql%notfound then`永远不会评估条件。要捕获该异常并做出相应响应，您需要`EXCEPTION`section.

```
SET SERVEROUTPUT ON
DECLARE 
  var titres%ROWTYPE; 
BEGIN
    -- In this case you have to be sure that the query returns only one row
    -- otherwise the exception ORA-01422 will be raised
    select reference, sicovam into
      var.reference, var.sicovam 
     from titres 
    where reference = '1234';  

    dbms_output.put_line(var.reference || '    ' ||  var.sicovam);

EXCEPTION
  WHEN NO_DATA_FOUND 
  THEN dbms_output.put_line('NOT FOUND');    
END; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T09:51:56.293

`select into`你需要使用异常`NO_DATA_FOUND`和`TOO_MANY_ROWS`

```
SET SERVEROUTPUT ON
DECLARE 
var titres%ROWTYPE; 
BEGIN
    select reference, sicovam into
    var.reference, var.sicovam 
    from titres 
    where reference = '1234';

    dbms_output.put_line(var.reference || '    ' ||  var.sicovam);

exception
  when no_data_found
  then
    dbms_output.put_line('NOT FOUND');
  when too_many_rows
  then
    dbms_output.put_line('2+ ROWS found');

END; 
```

# jquery - 是否可以在输入焦点上打开模态并从模态输入输入值？

> ID：14212118
> 
> 赞同：0
> 
> 时间：2013-01-08T09:43:09.737
> 
> 标签：jquery, input, focus, modal-dialog

新手 jquery 用户在这里。我希望在输入被聚焦/选择时打开一个模态，并从模态中的按钮向输入输入一个值。

所以事件将是。1\. 聚焦输入。2\. 打开一个模态。3\. 通过使用按钮将值输入到输入中。4\. 关闭按钮时关闭模态框。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T09:46:25.620

你会想要`prompt()`：

```
$('body').on('focus', 'input[name=myNameHere]', function(){
    var input = prompt('The Question', 'Suggested answer');
    $(this).val(input);
}); 
```

或者通过[jQuery UI](http://jqueryui.com/)的更高级的对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T09:57:24.380

这可能是您正在寻找的：

```
<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8" />    
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.3.js"></script>    
    <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>    
    <script>
    $(function() {
        $( "#dialog" ).dialog({modal: true, autoOpen:false});

        $("#result").focus(function () {
            $( "#dialog" ).dialog("open");
        });

        $('#accept').click(function (){
            $('#result').val($('#source').val());
            $('#dialog').dialog("close");
        });

    });
    </script>
</head>
<body>

 <input type="text" id="result"> 
 </div>

<div id="dialog" title="Basic dialog">
    Enter value <input type="text" id="source" /><br/>
    <input type="button" id="accept" value="OK" />
</div>

</body>
</html> 
```

# javascript - 是否可以缓存客户端动态创建的文件？

> ID：14212120
> 
> 赞同：0
> 
> 时间：2013-01-08T09:43:23.707
> 
> 标签：javascript, caching, dynamic, websocket

我正在开发一个基于 websocket 的项目。主服务器，包括 web 和 websocket 服务器，主要作为其他 websocket 服务器的转发中心。这些辅助 websocket 服务器预计不会同时运行 web 服务器，但预计将托管可能需要或可能不需要下载的文件（根据需要直接通过 websocket 传输）。

虽然预计文件不会很大——当前的测试文件在 2KB 左右徘徊，但我们预计标准约为 10-20KB，如果我们允许对图像和其他数据量大的材料——文件进行编码，可能会更大预计将被一系列主机反复要求。也就是说，客户端可以从多个独立的 websocket 服务器（不是同时）“请求”一个文件。但是，预计单个客户端每天可能会从单个 websocket 服务器请求相同的文件多达 20 次或更多。

因此，为了减少带宽，我想知道是否可以缓存这些动态文件来完成纯粹的客户端工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T09:49:09.503

使用 HTML5 您可以通过使用清单来利用浏览器应用程序缓存。

在这样的清单中，您可以指定应在客户端缓存的文件。这些缓存的失效是通过 Javascript 发生的，因此也在客户端。

有关应用程序缓存和清单文件的更多信息，您可以在此处找到：http: [//www.html5rocks.com/en/tutorials/appcache/beginner/](http://www.html5rocks.com/en/tutorials/appcache/beginner/)

# geofencing - 我想将地理围栏与谷歌地图 API v2 集成，我该怎么做？

> ID：14212132
> 
> 赞同：0
> 
> 时间：2013-01-08T09:44:39.910
> 
> 标签：geofencing, android-maps-v2

我是谷歌地图的新手，我的要求是使用地理围栏在谷歌地图 API V2 上创建虚拟边界。我想在跨越虚拟边界时发出警报。那么我怎样才能完成这项工作或任何有用的信息呢？

提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T18:00:37.557

我们实现的方式是我们创建了后台服务，该服务会定期（例如每 5 分钟）唤醒并检查您的当前位置。这里的技巧是避免使用 GPS 数据来节省电池，而是使用网络位置数据。据我所知，没有像在 iOS 中那样创建地理围栏的本地方法

# php - 通过 Google Drive API 将图表转换为图像

> ID：14212134
> 
> 赞同：0
> 
> 时间：2013-01-08T09:44:57.430
> 
> 标签：php, google-drive-api

有没有使用PHP通过Google Drive API发送原始数据并转换为图表并下载为图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T19:48:01.827

您可能需要 Google Charts 图像 API。

[https://developers.google.com/chart/image/docs/making_charts](https://developers.google.com/chart/image/docs/making_charts)

[http://code.google.com/p/gchartphp/](http://code.google.com/p/gchartphp/)

您可以使用 Drive API 轻松地将这些图像保存到 Google Drive。

# c++ - 为什么没有使用 Visual Studio 编译 K&R 样式代码

> ID：14212135
> 
> 赞同：2
> 
> 时间：2013-01-08T09:45:00.430
> 
> 标签：c++, c, visual-studio-2010

> **可能重复：**
> [是否可以使用 Visual C++ 编译预 ANSI（K&R 风格）C 代码？](https://stackoverflow.com/questions/8949382/is-it-possible-to-compile-pre-ansi-kr-style-c-code-with-visual-c)

我们正在处理遗留代码，它具有以 K&R 风格定义的功能，

```
void fun(a,b,c)
int a; int b; int c;    
{
 // ...
} 
```

我知道这不是 ANSI 标准，而是有效的 C 代码，有没有办法让这个代码用 Visual Studio 编译（我们正在使用 VS 2010）。

# c# - 在填充下拉列表时，我是否需要将数据从控制器传递到视图？

> ID：14212141
> 
> 赞同：1
> 
> 时间：2013-01-08T09:45:19.517
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor-2

我目前正在学习 asp.net mvc，我刚开始，我决定从 web 表单转移到 mvc。

我只是好奇，因为我有这段代码，我想知道传递模型`return View(data)`和不传递模型之间的区别。

这是代码：

**控制器**

```
/* Even if I comment/remove the lines ViewBag.GenreId....... and ViewBag.ArtistId
   and just return View(); everything seems to work fine. I'm following this music store tutorial from codeplex
*/

[HttpPost]
public ActionResult Create(Album album)
{
     if (ModelState.IsValid)
     {
          db.Albums.Add(album);
          db.SaveChanges();
          return RedirectToAction("Index");  
     }
     //this will assign the values of the dropdownlist of the View
     //it will assign the values on the dropdownlist that has a name GenreId
     ViewBag.GenreId = new SelectList(db.Genres, "GenreId", "Name", album.GenreId);
     ViewBag.ArtistId = new SelectList(db.Artists, "ArtistId", "Name", album.ArtistId);
     return View(album);
} 
```

**视图的代码**

```
@model CodeplexMvcMusicStore.Models.Album

@{
    ViewBag.Title = "Create";
}

<h2>Create</h2>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Album</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.GenreId, "Genre")
        </div>
        <div class="editor-field">
            @Html.DropDownList("GenreId", String.Empty)
            @Html.ValidationMessageFor(model => model.GenreId)
        </div> 
```

`View(album)`我也想知道传入对象模型与不传入的区别`View()`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T09:48:39.920

据我所知，如果您不通过模型，那么您的页面将不会被填充。

此外，当您发回表单时，它也不知道将值绑定回哪里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T12:26:19.430

If you dont pass the data then you cannot access the data in the razor. You need to pass your model to the `return View(model)` in order to use it on the Razor View. If you need to pass more than one model then you can pass you use either `ViewBag` or `ViewData` to do this.

By looking at your question. It seems to me you might be able to find your answer in this [MVC DropDownListFor tutorial](http://mvctutorialsandguides.blogspot.co.nz/2013/01/mvc-c-how-to-implement-dropdown-list.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T12:14:48.160

If you do not pass object model in return View(album) it will not show any validation errors in your view if there are any. As you are using ViewBag for GenreId and ArtistId you can render in view without passing the object model to view (return View()) posted by Karthik

# java - 无法使用 IAIK PKCS11 Wrapper 加载 PKCS11 驱动程序

> ID：14212143
> 
> 赞同：1
> 
> 时间：2013-01-08T09:45:22.047
> 
> 标签：java, java-native-interface, pki, pkcs#11, iaik-jce

我正在使用以下内容：

*   视窗 7 64 位
*   JDK 7 64 位
*   JRE 7 64位

新的有趣的 JRE 7 64 位不再支持 Sun PKCS11（它在包 'sun.security.pkcs11' 中）。最大的问题是我们公司产品的最终用户可能安装了任何版本的JRE。

所以我必须将现有的代码换成“Sun PKCS11”到“ [IAIK PKCS11 Wrapper](http://jce.iaik.tugraz.at/sic/Products/Core-Crypto-Toolkits/PKCS_11_Wrapper) ”。IAIK 的包装器就是这样工作的：

```
(iaik-wrapper.jar)->(iaik-pkcs11-jni.dll)->(pki-token-driver.dll) 
```

PKI 令牌驱动程序动态链接库由 PKI USB 令牌制造商提供，实际名称为“ca2-v34.dll”。加载本机驱动程序的方法在程序员手册中描述如下：

```
import iaik.pkcs.pkcs11.*;
...

Module pkcs11Driver;
try {
  pkcs11Driver = Module.getInstance("ca2-v34.dll"); //<--exception!
  pkcs11Driver.initialize(null);

  //test
  System.out.println(pkcs11Driver.getInfo());
}
catch (Exception ex) {
  System.out.println(ex);
} 
```

在上面代码中标记的行引发了异常，详细信息如下：**java.io.IOException: %1 is not a valid Win32 application。ca2-v34.dll**

这个异常肯定意味着 IAIK 库找到了 .dll 文件，但它不兼容。我被困在这个瓶颈上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T04:39:50.403

正如[EJP](https://stackoverflow.com/users/207421/ejp)在问题下方的评论中指出的那样，**ca2-v34.dll 是一个 32bit dll**。制造商提供的示例 usb 令牌管理器是一个**32 位全包软件**，因此它可以在 Windows 32 和 Windows 64 上加载此 dll 文件。

JRE的场景不同：

*   如果客户端计算机安装了 JRE 32bit，Java 应用程序（.jar 文件）可以很好地运行，因为**JVM 的进程是 32bit 进程**。
*   另一种情况是客户端计算机安装了JRE 64bit，Java应用程序**无法**正常运行，因为**JVM在这种情况下是一个64位进程**，它可以加载Java应用程序（.jar文件）但无法加载文件'ca2- v34.dll' 由于这个 dll 文件是 32 位 dll 的原因。

# asterisk - 通过星号进行单向电话会议

> ID：14212147
> 
> 赞同：1
> 
> 时间：2013-01-08T09:45:30.890
> 
> 标签：asterisk

我是 Asterisk 和 Voip 的新手。我想使用 Asterisk 完成以下小事。

## 描述

1.  星号用作服务器
2.  几个VoIP客户端。（可能有两种类型的客户端。一种可以开始电话会议，另一种不能通话但只能听到。）只有呼叫者客户端才能开始/结束此通话。
3.  通话时间不能超过特定时间。

是否可以通过星号。asterisk 如何帮助实现这个场景。我需要学习什么？任何网络链接都会非常有帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:43:46.453

您可以使用 Asterisk 和 ConfBridge 完成所有这些操作：

[http://www.voip-info.org/wiki/view/Asterisk+cmd+ConfBridge](http://www.voip-info.org/wiki/view/Asterisk+cmd+ConfBridge)

使用以下选项来实现您的目标：

'A' - 设置标记模式 'm' - 设置初始静音。'w' - 等待标记的用户进入会议

您可以使用另一个拨号计划功能：TIMEOUT(absolute) 来限制会议持续时间。

首先，我将查看上面链接中的示例。

# r - R包的windows安装

> ID：14212149
> 
> 赞同：3
> 
> 时间：2013-01-08T09:45:47.303
> 
> 标签：r

我正在运行 64 位的 ubuntu。我有这个最小的测试包，用于学习如何做这些事情（我正在关注本[教程](http://www.google.be/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CDUQFjAA&url=http://cran.r-project.org/doc/contrib/Leisch-CreatingPackages.pdf&ei=IOvrUOe3G4rL0AWSjoGADA&usg=AFQjCNHmlajNmMov0zsiVa4dw9iyhupiDQ&sig2=CUYtDZA7v60R5PL9JmikOQ&bvm=bv.1357316858,d.d2k&cad=rja)，除了包中还有一些 c 代码）。当我跑步时

```
R CMD check MySmallPackage 
```

在它上面，它工作正常（见下文）。然后，我跑

```
R CMD build MySmallPackage 
```

它也有效（见下文）。所以现在，我将生成的 .tar.gz 发送给运行 win7 64 位（和 64 位 R）的朋友，他收到以下错误消息：

```
*** arch - i386
ERROR: compilation failed for package 'MySmallPackage'
* removing 'C:/Users/ES/Documents/R/win-library/2.15/MySmallPackage'
Warning in install.packages :
  running command 'C:/PROGRA~1/R/R-215~1.1/bin/x64/R CMD INSTALL -l "C:/Users/ES/Documents/R/win-library/2.15"   "C:/Users/ES/Downloads/MySmallPackage_0.1.1(1).tar.gz"' had status 1
Warning in install.packages :
  installation of package ‘C:/Users/ES/Downloads/MySmallPackage_0.1.1(1).tar.gz’ had non-zero exit status 
```

这很令人费解。任何人都可以指出可能导致此问题的原因（我已经很多年没有使用过 Windows，但该软件包在 linux 上安装得很好）。错误消息对我来说有点神秘。

```
$ R CMD check MySmallPackage
* using log directory ‘~/MySmallPackage.Rcheck’
* using R version 2.15.2 (2012-10-26)
* using platform: x86_64-pc-linux-gnu (64-bit)
* using session charset: UTF-8
* checking for file ‘MySmallPackage/DESCRIPTION’ ... OK
* checking extension type ... Package
* this is package ‘MySmallPackage’ version ‘0.1.1’
* checking package namespace information ... OK
* checking package dependencies ... OK
* checking if this is a source package ... OK
* checking if there is a namespace ... OK
* checking for executable files ... OK
* checking whether package ‘MySmallPackage’ can be installed ... OK
* checking installed package size ... OK
* checking package directory ... OK
* checking for portable file names ... OK
* checking for sufficient/correct file permissions ... OK
* checking DESCRIPTION meta-information ... OK
* checking top-level files ... OK
* checking for left-over files ... OK
* checking index information ... OK
* checking package subdirectories ... OK
* checking R files for non-ASCII characters ... OK
* checking R files for syntax errors ... OK
* checking whether the package can be loaded ... OK
* checking whether the package can be loaded with stated dependencies ... OK
* checking whether the package can be unloaded cleanly ... OK
* checking whether the namespace can be loaded with stated dependencies ... OK
* checking whether the namespace can be unloaded cleanly ... OK
* checking loading without being on the library search path ... OK
* checking for unstated dependencies in R code ... OK
* checking S3 generic/method consistency ... OK
* checking replacement functions ... OK
* checking foreign function calls ... OK
* checking R code for possible problems ... OK
* checking Rd files ... OK
* checking Rd metadata ... OK
* checking Rd cross-references ... OK
* checking for missing documentation entries ... OK
* checking for code/documentation mismatches ... OK
* checking Rd \usage sections ... OK
* checking Rd contents ... OK
* checking for unstated dependencies in examples ... OK
* checking line endings in C/C++/Fortran sources/headers ... OK
* checking line endings in Makefiles ... OK
* checking for portable compilation flags in Makevars ... OK
* checking for portable use of $(BLAS_LIBS) and $(LAPACK_LIBS) ... OK
* checking compiled code ... OK
* checking examples ... OK
* checking PDF version of manual ... OK

$R CMD build MySmallPackage
* checking for file ‘MySmallPackage/DESCRIPTION’ ... OK
* preparing ‘MySmallPackage’:
* checking DESCRIPTION meta-information ... OK
* cleaning src
* checking for LF line-endings in source and make files
* checking for empty or unneeded directories
* building ‘MySmallPackage_0.1.1.tar.gz’ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T09:52:30.153

您需要为 Linux、Mac 和 Windows 机器构建不同的包。

有（至少）四种可能性：

1.  [在r-forge](https://r-forge.r-project.org/)上托管您的包。每天晚上 r-forge 都会构建一个 linux、windows 和 mac 版本的包。
2.  使用由 Uwe Ligges 维护的在线 windows[包生成器。](http://win-builder.r-project.org/)
3.  将源代码发送给您的朋友，让他在 Windows 机器上构建包。当我用谷歌搜索“构建 r 包窗口”时，我得到了一些有用的结果。
4.  [在github](https://github.com/)上托管你的包，然后使用[devtools](https://github.com/hadley/devtools)包安装包。

# android - 使用 ksoap.jar 从 Android 调用 Spring-WS 服务

> ID：14212150
> 
> 赞同：1
> 
> 时间：2013-01-08T09:45:50.657
> 
> 标签：android

我已经使用 castor marshalling 开发了一个 Spring-ws 网络服务。它在 Axis2 客户端上运行良好，但是当我使用 Android 客户端调用相同的服务时，出现以下异常：

请告诉我需要对 Android 客户端进行哪些更改。

```
"SoapFault - faultcode: 'SOAP-ENV:Server' faultstring:
'Castor unmarshalling exception; nested exception is org.exolab.castor.xml.MarshalException: 
The namespace associated with the prefix 'c' could not be resolved.' faultactor: 'null' detail: null" 
```

# angularjs - yeoman build:minify 重命名图像-> angularjs ng-src 失败

> ID：14212153
> 
> 赞同：15
> 
> 时间：2013-01-08T09:46:08.977
> 
> 标签：angularjs, yeoman

我正在使用 yeoman + angular 并尝试了“yeoman build:minify”。这失败了，因为任务 rev:img 重命名了所有图像。之后，动态源（参见[http://docs.angularjs.org/api/ng.directive:ngSrc](http://docs.angularjs.org/api/ng.directive:ngSrc)）不再起作用。

有人知道解决这个问题的技巧吗？例如，是否可以避免图像重命名？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-09T02:40:58.163

这是目前[已知的问题](https://github.com/yeoman/yeoman/issues/822)，我们会尽快修复。

同时，您可以尝试[此线程](https://github.com/yeoman/yeoman/issues/406#issuecomment-9826527)中建议的解决方法之一。

只需将`rev`配置替换为：

```
rev: {
   img: ['images/**','!images/ignore/**']
} 
```

并将所有动态图像放入`images/ignore/`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-04-14T10:20:22.597

在[Yeoman](http://yeoman.io/)及其[Gruntfile.js](http://yeoman.io/authoring/gruntfile.html)的最新版本中，您可以将图像文件夹添加到其`filerev`任务中。所以你的`filerev`任务看起来像这样：

```
// Renames files for browser caching purposes
filerev: {
  dist: {
    src: [
      '<%= yeoman.dist %>/scripts/{,*/}*.js',
      '<%= yeoman.dist %>/styles/{,*/}*.css',
      '<%= yeoman.dist %>/images/{,*/}*.{png,jpg,jpeg,gif,webp,svg}',
      /* Here you'll see some ignoring: */
      '!<%= yeoman.dist %>/images/some_image.png',
      '!<%= yeoman.dist %>/images/ignore',
      '<%= yeoman.dist %>/styles/fonts/*'
    ]
  }
}, 
```

# c# - 如何在远程机器上获取登录用户的状态

> ID：14212155
> 
> 赞同：7
> 
> 时间：2013-01-08T09:46:10.853
> 
> 标签：c#, wmi

我正在寻找一种方法来获取在远程计算机上登录的用户。我很想知道他们是本地登录还是远程登录，但最重要的是我必须知道他们的状态。我在网上看到了一些用VB编写的答案，但我需要它在c#中。[markdmak answer here](http://www.tek-tips.com/viewthread.cfm?qid=1308179)中给出的解决方案看起来是一个好的开始，但它是在 VB 中，它只查找远程会话。我有这段代码，可以作为开始，但我想将 LogonId 与用户名耦合并查看其状态：

```
string fqdn = ""; // set!!!    
ConnectionOptions options = new ConnectionOptions();
options.EnablePrivileges = true;
// To connect to the remote computer using a different account, specify these values:
// these are needed in dev environment
options.Username = ConfigurationManager.AppSettings["KerberosImpersonationUser"];
options.Password = ConfigurationManager.AppSettings["KerberosImpersonationPassword"];
options.Authority = "ntlmdomain:" + ConfigurationManager.AppSettings["KerberosImpersonationDomain"];

ManagementScope scope = new ManagementScope("\\\\" + fqdn + "\\root\\CIMV2", options);
try
{
    scope.Connect();
}
catch (Exception ex)
{
    if (ex.Message.StartsWith("The RPC server is unavailable"))
    {
        // The Remote Procedure Call server is unavailable
        // cannot check for logged on users
        return false;
    }
    else
    {
        throw ex;
    }
}

SelectQuery query = new SelectQuery("Select * from Win32_LogonSession");
ManagementObjectSearcher searcher = new ManagementObjectSearcher(scope, query);
ManagementObjectCollection results = searcher.Get();
bool returnVal = false;
foreach (ManagementObject os in results)
{
    try
    {
        if (os.GetPropertyValue("LogonId").ToString() != null && os.GetPropertyValue("LogonId").ToString() != "")
        {
            returnVal = true;
        }
    }
    catch (NullReferenceException)
    {
        continue;
    }
}
return returnVal;
} 
```

我真正需要但找不到的是一种让所有用户在远程机器上及其状态的方法，意思是：活动、断开连接、注销等。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T02:12:36.063

您可以对值为 2（交互式）`Win32_LogonSession`的属性使用 WMI 类过滤[`LogonType`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394189%28v=vs.85%29.aspx)

试试这个样本

```
using System;
using System.Collections.Generic;
using System.Management;
using System.Text;

namespace GetWMI_Info
{
class Program
{

    static void Main(string[] args)
    {
        try
        {
            string ComputerName = "remote-machine";
            ManagementScope Scope;

            if (!ComputerName.Equals("localhost", StringComparison.OrdinalIgnoreCase))
            {
                ConnectionOptions Conn = new ConnectionOptions();
                Conn.Username = "username";
                Conn.Password = "password";
                Conn.Authority = "ntlmdomain:DOMAIN";
                Scope = new ManagementScope(String.Format("\\\\{0}\\root\\CIMV2", ComputerName), Conn);
            }
            else
                Scope = new ManagementScope(String.Format("\\\\{0}\\root\\CIMV2", ComputerName), null);

            Scope.Connect();
            ObjectQuery Query = new ObjectQuery("SELECT LogonId  FROM Win32_LogonSession Where LogonType=2");
            ManagementObjectSearcher Searcher = new ManagementObjectSearcher(Scope, Query);

            foreach (ManagementObject WmiObject in Searcher.Get())
            {
                Console.WriteLine("{0,-35} {1,-40}", "LogonId", WmiObject["LogonId"]);// String
                ObjectQuery LQuery = new ObjectQuery("Associators of {Win32_LogonSession.LogonId=" + WmiObject["LogonId"] + "} Where AssocClass=Win32_LoggedOnUser Role=Dependent");
                ManagementObjectSearcher LSearcher = new ManagementObjectSearcher(Scope, LQuery);
                foreach (ManagementObject LWmiObject in LSearcher.Get())
                {
                    Console.WriteLine("{0,-35} {1,-40}", "Name", LWmiObject["Name"]);                    
                }
            }
        }
        catch (Exception e)
        {
            Console.WriteLine(String.Format("Exception {0} Trace {1}", e.Message, e.StackTrace));
        }
        Console.WriteLine("Press Enter to exit");
        Console.Read();
    }
}
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-20T13:54:16.120

@RRUZ 让我开始了，但`Associators`查询在有很多`Win32_LoggedOnUser`对象的远程机器上不起作用（不知道为什么）。没有返回任何结果。

我还需要远程桌面会话，所以我使用了 LogonType "10" 会话，我`ConnectionOptions`的不同

我将关联查询替换为`WmiObject.GetRelationships("Win32_LoggedOnUser")`，速度提高了很多，结果就在那里。

```
 private void btnUnleash_Click(object sender, EventArgs e)
    {
        string serverName = "serverName";
        foreach (var user in GetLoggedUser(serverName))
        {
            dataGridView1.Rows.Add(serverName, user);
        }            
    }   

    private List<string> GetLoggedUser(string machineName)
    { 
        List<string> users = new List<string>();
        try
        {
            var scope = GetManagementScope(machineName);
            scope.Connect();
            var Query = new SelectQuery("SELECT LogonId  FROM Win32_LogonSession Where LogonType=10");
            var Searcher = new ManagementObjectSearcher(scope, Query);
            var regName = new Regex(@"(?<=Name="").*(?="")");

            foreach (ManagementObject WmiObject in Searcher.Get())
            {
                foreach (ManagementObject LWmiObject in WmiObject.GetRelationships("Win32_LoggedOnUser"))
                {
                    users.Add(regName.Match(LWmiObject["Antecedent"].ToString()).Value);
                }
            }
        }
        catch (Exception ex)
        {
            users.Add(ex.Message);
        }

        return users;
    }

    private static ManagementScope GetManagementScope(string machineName)
    {
        ManagementScope Scope;

        if (machineName.Equals("localhost", StringComparison.OrdinalIgnoreCase))
            Scope = new ManagementScope(String.Format("\\\\{0}\\root\\CIMV2", "."), GetConnectionOptions());
        else
        {
            Scope = new ManagementScope(String.Format("\\\\{0}\\root\\CIMV2", machineName), GetConnectionOptions());
        }
        return Scope;
    }

    private static ConnectionOptions GetConnectionOptions()
    {
        var connection = new ConnectionOptions
        {
            EnablePrivileges = true,
            Authentication = AuthenticationLevel.PacketPrivacy,
            Impersonation = ImpersonationLevel.Impersonate,
        };
        return connection;
    } 
```

# jquery - Rails：如何使用 JQueryUI

> ID：14212157
> 
> 赞同：0
> 
> 时间：2013-01-08T09:46:18.240
> 
> 标签：jquery, ruby-on-rails, jquery-ui

我有 rails 3.2.1 并测试 JQuery UI，我想显示一个 DatePicker。因此，在“new.hmtl.erb”页面中，我放置了以下标签：

```
<p>Date: <input type="text" id="datepicker" /></p> 
```

在 project.js.coffee （“新”视图页面由项目控制器呈现）我写道：

```
$( "#datepicker" ).datepicker(); 
```

为什么 DatePicker 没有出现？

在新页面的源代码中，我有：

```
<script src="/assets/projects.js?body=1" type="text/javascript"></script> 
```

其中包含：

```
(function() {
  $("#datepicker").datepicker();
 }).call(this); 
```

我必须包括一些宝石？在 application.js 我有：

```
//= require jquery
//= require jquery_ujs
//= require_tree . 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T09:57:04.943

在您的情况下，将初始化您的 UI 对象的部分代码转到页面`new.html.erb`。您将其添加到底部：

```
<script>
  $(document).ready(function() {
    $( "#datepicker" ).datepicker();
  });
</script> 
```

这意味着当页面加载时，它将初始化您的输入对象。如果您需要这部分代码在许多页面中可用，您可以在`application.html.erb`布局中添加此代码。您可以在 Rails 指南页面上阅读有关布局的更多信息。

**编辑**

出于教育目的，这里有额外的评论：如果你想把代码放进去，`application.js`你可以做以下事情：

```
function setDatePicker() {
  $( "#datepicker" ).datepicker();
} 
```

然后做

```
<script>
  $(document).ready(function() {
    setDatePicker();
  });
</script> 
```

如果您想要在`application.js`加载时执行的代码，您只需将其放在那里而不将其包装在函数中（不建议）。它会在 application.js 加载时执行，但它不会工作，因为它可以在加载 DOM 之前触发（并且可能会）。所以总是使用 jquery 的`.ready`.

# iphone - 推送消息分发设备令牌

> ID：14212158
> 
> 赞同：0
> 
> 时间：2013-01-08T09:46:19.263
> 
> 标签：iphone, ios, apple-push-notifications, devicetoken

我正在使用 EasyAPNS 进行推送消息，并且在将设备切换到生产时不断收到以下错误：

**APNS 响应 pid(201) 错误。状态（8：无效令牌）**

据我了解，您有用于沙盒和生产的单独设备令牌，但它只是注册沙盒设备令牌。我已经设置了开发和分发配置文件，并在目标和项目设置中正确设置了它们。

谁能告诉我我做错了什么或对此事有所了解？

提前致谢。

# android - SurfaceView 在 SurfaceChange Android 上崩溃

> ID：14212165
> 
> 赞同：1
> 
> 时间：2013-01-08T09:46:35.577
> 
> 标签：android, surfaceview

我做了一个例子，在 Android 的画布上扩展`SurfaceView`和`Thread`绘制一些对象，但我面临两个问题。

1.  当按下后退按钮时，应用程序关闭，然后显示“不幸的是，您的示例已停止”。

2.  当将方向从“Portrait”更改为“Landscape”或 VS 时，应用程序无法调整新屏幕并且不会更新绘图，然后它会崩溃并显示相同的消息“不幸的是，您的示例已停止”。

请查看代码：

```
@Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width,
            int height) {
        // TODO implement this method
        holder.getSurface().setSize(width, height);
        holder.setFormat(format);
    }    

@Override
    public void surfaceCreated(SurfaceHolder holder) {
        // at this point the surface is created and
        // we can safely start the game loop
        thread.setRunning(true);
        thread.start();
    }

@Override
    public void surfaceDestroyed(SurfaceHolder holder) {

        // tell the thread to shut down and wait for it to finish
        // this is a clean shutdown
        boolean retry = true;
        while (retry) {
            try {
                thread.join();
                retry = false;
            } catch (InterruptedException e) {
                // try again shutting down the thread
            }
        }
    } 
```

当我检查 logcat 时，我发现以下行表明这部分的问题

```
@Override
    public void run() {
        Canvas canvas;
        // initialise timing elements for stat gathering
        initTimingElements();

        long beginTime; // the time when the cycle begun
        long timeDiff; // the time it took for the cycle to execute
        int sleepTime; // ms to sleep (<0 if we're behind)
        int framesSkipped; // number of frames being skipped

        sleepTime = 0;

        while (running) {
            canvas = null;
            // try locking the canvas for exclusive pixel editing
            // in the surface
            try {
                canvas = this.surfaceHolder.lockCanvas();
                LoggerHandler.log("canvas : " + canvas);
                synchronized (surfaceHolder) {
                    beginTime = System.currentTimeMillis();
                    framesSkipped = 0; // resetting the frames skipped
                    // update game state
                    this.gamePanel.update();
                    // render state to the screen
                    // draws the canvas on the panel
                    this.gamePanel.render(canvas);
                    // calculate how long did the cycle take
                    timeDiff = System.currentTimeMillis() - beginTime;
                    // calculate sleep time
                    sleepTime = (int) (FRAME_PERIOD - timeDiff);

                    if (sleepTime > 0) {
                        // if sleepTime > 0 we're OK
                        try {
                            // send the thread to sleep for a short period
                            // very useful for battery saving
                            Thread.sleep(sleepTime);
                        } catch (InterruptedException e) {
                        }
                    }

                    while (sleepTime < 0 && framesSkipped < MAX_FRAME_SKIPS) {
                        // we need to catch up
                        this.gamePanel.update(); // update without rendering
                        sleepTime += FRAME_PERIOD; // add frame period to check
                                                    // if in next frame
                        framesSkipped++;
                    }

                    // for statistics
                    framesSkippedPerStatCycle += framesSkipped;
                    // calling the routine to store the gathered statistics
                    storeStats();
                }
            } finally {
                // in case of an exception the surface is not left in
                // an inconsistent state
                if (canvas != null) {
                    surfaceHolder.unlockCanvasAndPost(canvas);
                }
            } // end finally
        }
    } 
```

这一行的问题：

```
canvas = this.surfaceHolder.lockCanvas(); 
```

`null`改变方向时返回。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-19T11:00:47.467

我有同样的问题。解决方案：只需检查画布是否为非空。在我的测试中：

```
 try {
                canvas = surfaceHolder.lockCanvas(null);
                if(canvas != null){
                    synchronized (surfaceHolder) {
                        canvas.drawColor(Color.BLACK);
                        canvas.drawBitmap(picture, 0, 0 , null);
                    }
                }
            } 
            finally {
                if (canvas != null) {
                    surfaceHolder.unlockCanvasAndPost(canvas);
                }
            } 
```

# hibernate - Hibernate-在删除语句之前保存修改后的子集合发出插入语句

> ID：14212170
> 
> 赞同：0
> 
> 时间：2013-01-08T09:46:52.733
> 
> 标签：hibernate, collections, persistence

我的多层应用程序中有一个问题，我已将我的对象从会话中分离出来。我有一个用户通过 GUI 编辑父对象的属性以及添加、编辑和删除子对象（父对象中的集合）。我正在级联所有，包括父对象及其子对象之间的孤立删除。

在将对象与 Session（saveOrUpdate 等）相关联时，插入和删除正在发生，但如果 GUI 的用户删除然后添加，则它发生的顺序违反了子对象的业务（自然）键的唯一约束返回相同的业务密钥）。

在查阅了“Hibernate in Action”一书以及在线参考页面之后，我似乎仍然无法找到一个明确的答案来解决当一个项目被删除然后重新添加到一个孩子的集合中时违反唯一约束的问题。父对象。

根据 Hibernate 文档中的行，Hibernate 永远不会在插入之前发出删除，如下所示

该文档在调用 flush() 时说明了以下顺序

1.  所有实体插入的顺序与调用 Save 的顺序相同
2.  所有实体更新
3.  所有集合删除
4.  所有集合元素的删除、更新和插入
5.  所有集合插入
6.  所有实体删除的顺序与调用删除的顺序相同。

暗示订单是“删除、更新和插入”，还是文档没有在这里严格指定订单？

Hibernate 似乎与此顺序不匹配，因为插入发生在删除我的集合元素之前。如果 Hibernate 总是先发出插入，那么这个问题的推荐解决方案是什么？我们是否必须走出 Hibernate 世界并自己处理这种关系？

如果是这样，那很好，但是如果 Hibernate 中有可用的解决方案，我真的不想为此编写代码。

如果我有一个表，其代理主键用于 AND 另一个列上的唯一约束，我可以通过调整映射文件中的属性来让 Hibernate 在调用 flush() 时遵守唯一约束吗？

来自在线参考文档：“然而，Hibernate 没有足够的信息来正确安排 SQL INSERT 和 UPDATE 语句（以避免违反约束），并且需要一些

有助于正确处理双向关联。使关联反转的一侧告诉 Hibernate 基本上忽略它，将其视为另一侧的镜像。这就是 Hibernate 在将定向导航模型转换为 SQL 数据库模式时解决所有问题所必需的。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:47:17.217

这需要您在 pojo 中调整 PK 属性的配置，使用`@Id`似乎会导致此问题，请使用`@EmbeddedId`来解决此问题...有关更多详细信息，请[参阅此 hibernate 错误](https://hibernate.onjira.com/browse/HHH-2801)

# regex - 重定向与特定路径不匹配的流量

> ID：14212172
> 
> 赞同：1
> 
> 时间：2013-01-08T09:46:56.680
> 
> 标签：regex, .htaccess, redirect

我有一个不再使用的旧网站，需要将流量重定向到其他地方。但我遇到的一个问题是，网站的一个特定区域需要保持可用，以支持以前从该网站购买过商品的客户。

我想用 .htaccess 做到这一点，但我的正则表达式知识非常有限。

基本上我想重定向所有没有支持路径的站点请求（最后可以有额外的段）：

```
http://www.example.com/support
http://www.example.com/support/contact
http://www.example.com/support/ticket 
```

但是，应将以下示例（其中两个）重定向到新站点：

```
http://www.example.com
http://www.example.com/projects 
```

到目前为止，我只弄清楚如何使用以下方法重定向请求而无需其他参数：

```
RewriteRule ^$ http://www.newsite.com/ [L,R=301] 
```

我知道我需要的基本上是这样的：

```
IF url does not contain www.example.com/support
THEN redirect 
```

我只是不知道如何用 regex / .htaccess 编写它

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:00:40.260

使用 mod_rewrite 指令更容易，如下所示：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www\.)?example\.com$
RewriteCond %{REQUEST_URI}  !/support/?   [NC]
RewriteRule  ^(.*)$    http://www.newsite.com/$1    [L,R=301,QSA] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T10:00:53.393

Apache 有[很好](http://httpd.apache.org/docs/2.2/rewrite/)的`mod_rewrite`. 真的值得一读。

在您的特殊情况下，为避免对所有以 开头的路径进行重定向`support`，您可以使用`RewriteCond`指令，即：

```
RewriteCond %{REQUEST_URI} !^/support
RewriteRule ^(.*) http://www.newsite.com/$1 [L,R=301] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T09:53:42.047

试试这个：

```
RewriteRule ^(support/?.*)$ $1 [L]
RewriteRule ^(.*)$ http://www.newsite.com/$1 [L,R=301] 
```

第一个“转发”您的`support/`请求`support/...`并完成 RewriteRules 的处理。第二个应该将所有其他查询转发到新站点。

# ruby-on-rails - 如何为我的 RoR 应用程序使用登台服务器和 github？

> ID：14212174
> 
> 赞同：0
> 
> 时间：2013-01-08T09:46:59.753
> 
> 标签：ruby-on-rails, ruby-on-rails-3, github

我对这一切都很陌生，所以如果这听起来很基本，我很抱歉，但我希望为我的 RoR 应用程序使用 github 和暂存服务器 (staging.example.com)，然后将暂存代码移动到 example.com。所以我会有这样的事情 -

```
Local System <----> Github <---- >staging server <---> Live Server/site 
```

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T09:59:24.643

我认为您的流程的更具说明性的版本将是这样的

```
 Github
             /   |   \
 Staging Server  |   Production Server
       \         |        /
        \        |       /
         \       |      /
       Development Machine 
```

所以你会从你的开发机器推送到 github，然后当你部署到登台或生产时，使用我假设 capistrano，它会在相应远程服务器上的这些分支中的任何一个中检查来自 github 的代码。我会使用一个`master`用于生产，也许一个分支`dev`用于分期。

这里有很多场景，但另一个常见的场景是在每次推送到分支时在 github 上使用 webhook（我认为这就是它们的名称）来创建一个事件。这也可能是将代码部署到您的登台或持续集成服务器。它们非常整洁，但如果你只是从这个开始，我会保持简单。

这里有一个简短而甜蜜的 Railscast 设置暂存环境[（对不起，不是免费的）](http://railscasts.com/episodes/72-adding-an-environment-revised)

# javascript - 一个 JavaScript 模块的实例不止一个？

> ID：14212176
> 
> 赞同：0
> 
> 时间：2013-01-08T09:47:01.937
> 
> 标签：javascript, design-patterns, module

我查看了 JavaScript 模块模式，但它似乎只用于创建单例。是否可以使用相同的模式来创建同一模块的多个实例？或者我应该看看不同的模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T09:51:09.390

您可以使用 javascript 创建一个伪类。看[这里](http://www.phpied.com/3-ways-to-define-a-javascript-class/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T09:51:30.647

```
var Module = (function() {
  return { ... };
}()); 
```

将创建单例

```
var createModule = function() {
  return { ... };
} 
```

将创建一个创建模块对象的函数

```
var ModuleInstance = createModule(); 
```

# windows - 批处理文件迭代本地网络服务器上的文件

> ID：14212178
> 
> 赞同：0
> 
> 时间：2013-01-08T09:47:08.163
> 
> 标签：windows, networking, command-line, batch-file

我正在尝试使用这段批处理代码打开存储在本地网络服务器上的各种文件：

```
for /f "tokens=*" %%G in ('dir /b /a:d "\\server\directory\*"') do %%G\setup.xml 
```

但由于`dir \\server\directory`不起作用，那段代码也不会起作用。
我怎样才能做到这一点？

先感谢您

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T09:51:24.403

您可以使用映射驱动器

```
net use X: \\server\directory 
```

然后您可以使用更改到该目录

```
pushd X: 
```

然后您可以在当前目录上运行批处理命令，当您完成并且文件不再使用时，您可以使用删除驱动器

```
net use X: /delete 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T09:59:05.920

你写：

> 因为 dir \server\directory 不起作用

起初我想说这确实有效。但真正有效的是：

```
dir \\server\sharename 
```

服务器必须共享目录。在服务器上，您可以使用如下命令：

```
net share public=c:\public 
```

您应该能够：

```
dir \\server\sharename 
```

# php - 将 Unix 时间戳转换为 MySQL DATETIME

> ID：14212182
> 
> 赞同：5
> 
> 时间：2013-01-08T09:47:21.967
> 
> 标签：php, mysql, sql, sql-insert

这听起来很愚蠢，但对于我的生活，我无法弄清楚。我已经尝试了一切。

问题是我无法弄清楚如何将我的日期字符串放入我的 MySQL 表中......我一直在先转换为 Unix 以考虑输入格式的变化......

`$_POST['date']`格式如下：19-1-2013 4:43:32

```
$datestr= strtotime($_POST['date']);
    echo $datestr;
    $sql = "INSERT INTO `calendar` (`date`, `title`, `event`) VALUES ('FROM_UNIXTIME(".$datestr.")', '".mysql_real_escape_string($_POST['title'])."', '".mysql_real_escape_string($_POST['desc'])."')";
    $query = mysql_query($sql); 
```

这是我最近尝试过的事情，我的 DATETIME 字段中仍然是全零。

请问，我做错了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-08T09:48:55.223

删除函数周围的单引号，`FROM_UNIXTIME`因为它将使其成为一个值。例如

```
$sql = "INSERT INTO `calendar` (`date`, `title`, `event`) VALUES (FROM_UNIXTIME(".$datestr."), '".mysql_real_escape_string($_POST['title'])."', '".mysql_real_escape_string($_POST['desc'])."')"; 
```

作为旁注，您的查询很容易受到攻击`SQL Injection`，请参阅下面的文章以了解如何保护它

*   [如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

# c - 检查大型 C 项目中#included 常量的位置

> ID：14212184
> 
> 赞同：2
> 
> 时间：2013-01-08T09:47:23.763
> 
> 标签：c, gcc

我有一个需要修改和运行的 C 项目。在某个时候，在我的源文件中

```
#ifndef THE_FLAG
// declare important stuff
#endif 
```

但是，我不知道d 来自`THE_FLAG`哪里。`#include`它*没有*在我的项目中定义，它隐藏在外部库的某个地方。

我试过`gcc -M`了，但它显示了标题，如果它直接包含在包含层次结构中的更高位置，则没有信息。

该项目过于复杂，无法手动跟踪所有依赖项。它是用`./configure && make`.

**问题：**如何跟踪这种外部依赖？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T09:50:57.613

尝试使用`gcc -E`. 这将告诉 gcc 在预处理阶段停止。作为其中的一部分，它会告诉你所有的`#define`s 来自哪里。

请注意，这将创建一个文本文件，而不是`.o`文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-05T07:10:25.360

您可以让 gcc 准确地告诉您标志的定义位置，方法是重新定义它以用于测试目的，例如

```
#include <limits.h>

#define INT_MAX 42

int f(void)
{
        return INT_MAX;
} 
```

会让 gcc 抱怨

```
main.c:4:0: warning: "INT_MAX" redefined [enabled by default]
 #define INT_MAX 42
 ^
In file included from main.c:2:0:
/usr/lib/gcc/x86_64-redhat-linux/4.8.1/include/limits.h:120:0: note: this is the location of the previous definition
 #define INT_MAX __INT_MAX__
 ^ 
```

* * *

同样的策略也适用于查找结构定义（如果您有多个架构师特定的头文件并且您不确定实际使用哪个头文件，这非常有用！）。

```
#include <stdio.h>

typedef void FILE;

void f(void)
{
} 
```

给

```
main.c:3:14: error: conflicting types for ‘FILE’
 typedef void FILE;
              ^
In file included from main.c:1:0:
/usr/include/stdio.h:48:25: note: previous declaration of ‘FILE’ was here
 typedef struct _IO_FILE FILE;
                         ^ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T11:03:31.417

`gcc -E`会给我们预处理后的输出。但有时开发人员很难验证`.c`文件是否很大并且包含一些大的头文件。在这种情况下，检查构建输出会更容易。`#warning`将在编译期间将消息打印为警告。

```
#ifndef THE_FLAG
#warning "including ABC stuff"
// declare important stuff
#endif 
```

我们也可以使用编译器警告`#pragma`，但它不是独立于平台的。

```
#pragma "including ABC stuff" 
```

如果我们想在某处定义了一些不需要的宏时停止编译，我们可以使用`#error`.

```
#ifdef UNWANTED_FLAG
#error "Build stopped. UNWANTED flag has been defined"
#endif 
```

# c++ - c++ 继承类中函数重载的问题

> ID：14212190
> 
> 赞同：55
> 
> 时间：2013-01-08T09:47:47.887
> 
> 标签：c++, class, inheritance, overloading

这可能是一个菜鸟问题，对此感到抱歉。我最近在尝试处理 c++ 中的一些高级内容、函数重载和继承时遇到了一个奇怪的问题。

我将展示一个简单的例子，只是为了演示这个问题；

有两个类，`classA`和`classB`，如下所示；

```
class classA{
    public:
        void func(char[]){};    
};

class classB:public classA{ 
    public:
        void func(int){};
}; 
```

据我所知`classB`，现在应该拥有两个`func(..)`函数，由于不同的参数而重载。

但是在 main 方法中尝试这个时；

```
int main(){
    int a;
    char b[20];
    classB objB;
    objB.func(a);    //this one is fine
    objB.func(b);    //here's the problem!
    return 0;
} 
```

它给出了错误，因为`void func(char[]){};` 超类中的方法，`classA`在派生类中不可见，`classB`。

我该如何克服呢？这不是 C++ 中重载的工作原理吗？我是 C++ 新手，但在 Java 中，我知道我可以使用这样的东西。

虽然我已经找到了这个询问类似问题的[线程，但我认为这两种情况是不同的。](https://stackoverflow.com/questions/2159496/c-problem-with-function-overloading)

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-01-08T09:49:48.577

您只需要一个`using`：

```
class classB:public classA{ 
    public:
        using classA::func;
        void func(int){};
}; 
```

它不会搜索基类，`func`因为它已经在派生类中找到了一个。该`using`语句将另一个重载带入同一范围，以便它可以参与重载决议。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-08T09:53:47.327

例如，在此问题的答案中对此进行了很好的解释：

[为什么要使用“using”关键字来访问我的基类方法？](https://stackoverflow.com/questions/1896830/why-should-i-use-the-using-keyword-to-access-my-base-class-method)

简而言之，当编译器在当前类中找到匹配的方法名称时，即使该方法不兼容，编译器也会停止从父类中搜索匹配的方法。我想这允许一些自动类型转换更合乎逻辑地工作，而无需覆盖这么多父类方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-10T02:55:00.363

如果在派生类中覆盖函数的一个变体，则需要覆盖所有变体。您可以使用 JLledo 建议的内容，也可以在派生类中编写函数的变体，它只是调用具有相同签名的基类函数。

```
class classA{
    public:
        void func(char[]){};    
};

class classB:public classA{ 
    public:
        void func(int){};
        void func(char[]){};
};

void classB:func(char[] ch)
{
    classA::func(ch);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-08-01T16:08:38.057

所提出的解决方案提供了令人头疼的维护问题。将 a`using A::func`注入派生类需要重新架构软件对使用放置在派生类中的子句敏感，也就是说，维护者不必自己更改基类，还必须更改派生类。假设我们从`base<-derived1`到`base<-derived2<-derived1`。现在`using base::func`必须将 using 子句更改为`using derived2::func`，强制考虑 using 子句并增加维护成本。说这在 C++ 标准化工作中已经有很长一段时间了，但这并不能改变这个想法似乎构思不当。它打断了继承的概念。这只是我的想法。

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2014-02-13T08:51:05.760

您必须将 int 类型的参数传入

```
objB.func(b);    //here's the problem! 
```

bcs 它已被 int 参数重载

# android - 当它有焦点或在android中被选中时如何将编辑文本放在前面

> ID：14212193
> 
> 赞同：1
> 
> 时间：2013-01-08T09:48:04.140
> 
> 标签：android, select, focus, android-edittext, android-softkeyboard

我在屏幕上有 3 个编辑文本。在触摸编辑文本之前的小屏幕设备上，我的屏幕看起来像

![在此处输入图像描述](../Images/ce3f7e72ef4bc9000807ca08fd3e6e16.png)

在触摸第一个edittext（例如在名称前面）之后，键盘弹出来，它看起来

![在此处输入图像描述](../Images/184d2ed74b2e9c8d07fbe5b218038507.png)

即现在edittext Amount（在TextView前面名为Amount）现在在用户面前。但是当我首先触摸（或单击）（名称）编辑文本时，我希望它出现在用户面前。但是无论我每次选择哪个金额都在前面。

我尝试过使用 requestFocus() 和 setSelect(true)。即使有焦点返回true，但没有任何效果。

那么该怎么做呢？

我已经为包含这三个编辑文本和它们前面的三个文本框的表格布局提供了滚动视图。

我的 xml 代码是

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<LinearLayout
    android:id="@+id/rl_upload_header"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:gravity="center"
    android:minHeight="50dp" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/selected_image_detail"
        android:textSize="20sp"
        android:textStyle="bold" />
</LinearLayout>

<LinearLayout
    android:id="@+id/rl_upload_top"
    android:layout_width="fill_parent"
    android:layout_height="150dp"
    android:layout_weight="4"
    android:baselineAligned="false"
    android:gravity="center"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/image_view"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="10dp"
        android:contentDescription="@string/empty" >
    </ImageView>
</LinearLayout>

<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:layout_weight="2"
    android:gravity="center" >

    <TableLayout
        android:id="@+id/tableLayout"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:gravity="center" >

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:padding="5dip" >

            <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/name_table" />

            <EditText
                android:id="@+id/ed_img_name"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="5dp"
                android:background="@drawable/text_box_background"
                android:focusable="true"
                android:focusableInTouchMode="true"
                android:hint="@string/name"
                android:paddingLeft="5dip" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:padding="5dip" >

            <TextView
                android:id="@+id/textView2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/amount_table" />

            <EditText
                android:id="@+id/ed_amount"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="5dp"
                android:background="@drawable/text_box_background"
                android:focusable="true"
                android:focusableInTouchMode="true"
                android:hint="@string/amount"
                android:paddingLeft="5dip" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:padding="5dip" >

            <TextView
                android:id="@+id/textView3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/desc_table" />

            <EditText
                android:id="@+id/ed_desc"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="5dp"
                android:background="@drawable/text_box_background"
                android:focusable="true"
                android:focusableInTouchMode="true"
                android:hint="@string/desc"
                android:paddingLeft="5dip" />
        </TableRow>
    </TableLayout>
</ScrollView>

<LinearLayout
    android:id="@+id/rl_upload_bottom"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:baselineAligned="false"
    android:gravity="center"
    android:minHeight="70dp" >

    <Button
        android:id="@+id/button_update"
        android:layout_width="150dp"
        android:layout_height="40dp"
        android:background="@drawable/btn_update" >
    </Button>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T10:07:32.697

添加以下行以显示相关活动，

```
android:windowSoftInputMode="adjustPan" 
```

# javascript - 获取 Facebook 页面/个人资料 URL

> ID：14212194
> 
> 赞同：1
> 
> 时间：2013-01-08T09:48:07.300
> 
> 标签：javascript, html, facebook, facebook-graph-api

我目前正在构建一个应用程序，它还允许用户为各种社交网络（如 Facebook、Twitter、Google+ 等）指定他们的个人资料 URL。我将把这个问题集中在 Facebook 上，而不是一开始。

为了让用户轻松输入他们的个人资料链接，我希望在他们的“设置”页面上有一个按钮，他们将登录到他们的 Facebook 帐户，选择页面或个人资料，它将自动填写文本字段。

我是 FB 和其他社交网络 API 的新手。如果有一些我可以阅读的示例或文档会很好。我花了一些时间在文档上，但没有找到任何提到这一点的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T09:52:08.033

一个简单的 Graph API 请求会为您提供用户配置文件链接。

```
/me?fields=link 
```

结果：

```
{
  "link": "https://www.facebook.com/profile.php?id=XXXXX", 
  "id": "XXXXX"
}, 
{
  "link": "https://www.facebook.com/first.last", 
  "id": "YYYYY"
} 
```

在此处了解如何使用 Graph API：[https ://developers.facebook.com/docs/reference/api/](https://developers.facebook.com/docs/reference/api/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T09:59:07.137

您应该浏览下面的链接，它解释了很多，您可以使用 Fql 从 Facebook 提取信息并获取在您的网站上注册用户的所有必要信息。我也在我的网站[2shar.in中使用过它](http://2shar.in)

[Facebook javascript api 示例](http://thinkdiff.net/facebook/graph-api-javascript-base-facebook-connect-tutorial/)

# salesforce - 我必须检查变量值或全局变量

> ID：14212196
> 
> 赞同：1
> 
> 时间：2013-01-08T09:48:10.457
> 
> 标签：salesforce, apex-code, visualforce

我有一个代码

```
<link rel="canonical" href="{!$Setup.websiteSystemVariables__c.Main_URL__c+$CurrentPage.Name}"/> 
```

我想从哪里检查

`$Setup.websiteSystemVariables__c` 和

`$CurrentPage.Name`

价值来了..我页面查看源，这是可见的--

```
<link href="xyz.comhomepageAB" rel="canonical" /> 
```

但我希望它是——

我想在 URL 和页面名称之间添加反斜杠，正如我在 URL 中提到的 -

```
 <link href="xyz.com/homepageAB" rel="canonical" /> 
```

我无法修复这个错误..

我对此进行了研究..我检查了课程，组件，但我无法解决这个问题..请帮帮我..

谢谢 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:42:51.753

**对您要求的事情的完整解释**

`$Setup.websiteSystemVariables__c`将是自定义设置对象的名称`(Setup->Develop->Custom Settings)`。您可能已经有了设置（否则页面将无法编译）。检查那里是否至少有 1 行并且在该`Main_URL__c`字段中是否有有意义的内容。请记住，如果您在开发人员沙箱（不是完整副本）中，则不会从生产中复制数据，因此您的设置很可能是空的。看起来这是一个层次结构设置 - 在“组织”级别添加数据，你很高兴。

`$CurrentPage.Name`是您的 Visualforce 页面的名称（ ？）您可以[在此处](http://www.salesforce.com/us/developer/docs/pages/index_Left.htm#StartTopic=Content/pages_variables_global.htm?SearchType=Stem)`homepageAB`阅读更多相关信息，如果需要 - 尝试使用模仿[PageReference](http://www.salesforce.com/us/developer/docs/pages/index_Left.htm#StartTopic=Content/apex_pages_pagereference.htm?SearchType=Stem)类中的方法的合并字段（减去“get...”部分） .

**解决您的实际问题；）**

转到此自定义设置并修改“主 URL”中的值以添加反斜杠（因此“ `xyz.com/`”）或将代码修改为：

```
href="{!$Setup.websiteSystemVariables__c.Main_URL__c+ '/' + $CurrentPage.Name}" 
```

只需检查您在生产中的价值并在沙箱中使用相同的格式，否则您最终可能会在 URL 中使用 2 个反斜杠...

# php - PHP gettext 共享服务器语言环境 - 另一种翻译方法？

> ID：14212197
> 
> 赞同：1
> 
> 时间：2013-01-08T09:48:10.227
> 
> 标签：php, internationalization, translation, locale, gettext

在尝试使 gettext 工作大约 3 小时后，我注意到它一直没有工作，因为我的系统无法识别`pt_BR`语言环境，所以我安装了它（Ubuntu）（另外，我需要使用`pt_BR.utf8`）现在我想了一下，什么是如果我的网站有当前主机/共享主机不支持的翻译，会发生什么情况？什么都翻译了就没用了？或者这里有人会回答：

> 您需要联系他们以安装所需的语言环境

太明显了吧...还有一些其他的方法可以轻松翻译一个网站，比如gettext，不会被弄乱`locales`？（`locale -a`如果您想查看您的语言环境，请使用。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:08:01.663

除了使用 gettext，只要你使用的是 unicode，你可以尝试其他方法——我使用 xml 和我编写的一个小库——你可以在这里尝试一下：

[http://flarework.com/static/i18n/?lang=jp](http://flarework.com/static/i18n/?lang=jp)

解析您的 gettext 并转换为库使用的 XML 格式应该非常简单。使用存储在 XML 中的字符串的好处是它比编译的 gettext 更容易更新，这取决于您的项目的规模可能对您很有效。它也完全独立于任何服务器设置，这让生活更轻松。

# objective-c - 调整 NSimage 大小但丢失 exif 数据

> ID：14212198
> 
> 赞同：0
> 
> 时间：2013-01-08T09:48:11.387
> 
> 标签：objective-c, macos, cocoa

请帮忙

目前希望通过调整原始大小来创建新的 NSImage，然后将其连同原始 EXIF 数据一起发送到 Web 服务。我可以调整图像大小没有问题，但 EXIF 数据不存在。根据Apple Docs，调用`representationUsingType`propertiesDict 是正确的:)

有人可以请我指出正确的方向吗，这是我目前的实现：

```
NSData *imageData = [resizedImage TIFFRepresentation]; //resized image is a my resized NSImage

NSBitmapImageRep * image = [[NSBitmapImageRep alloc] initWithData:imageData]; //NEED NSBitmapImageRepObject

NSMutableDictionary * propertiesDict = [[NSMutableDictionary alloc]init];
[propertiesDict setObject:[NSNumber numberWithInt:self.imageSizeSlider.floatValue] forKey:NSImageCompressionFactor];
[propertiesDict setObject:metaDataDict forKey:NSImageEXIFData];

NSData * shrunkImage = [image representationUsingType:NSJPEGFileType properties:propertiesDict]; 
```

如果我 writeToFile shrunkImage 对象，我会得到图像，但只有 exif 中的颜色配置文件？:( metaDataDict 对象具有我需要的所有 exif 并且可以通过 NSLogged 来显示。

非常感谢任何帮助。问候，李

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-08T10:05:10.153

您没有缩小图像，而是制作了比原始图像更小的新图像。您的新图像只有您提供的元数据。

阅读有关 NSImage 和 NSImageRep 的文档，并了解如何获取和设置 EXIF 数据。

# c - 半径请求给出了错误的值

> ID：14212206
> 
> 赞同：0
> 
> 时间：2013-01-08T09:48:35.333
> 
> 标签：c, sockets, dhcp, radius-protocol

```
if (rc_avpair_add(rh, &send, PW_USER_PASSWORD, passwd, -1, 0) == NULL)
                return ERROR_RC;

        if (rc_avpair_add(rh, &send, PW_NAS_PORT_TYPE, nas_port_type, -1, 0) == NULL)
                return ERROR_RC;

        if (rc_avpair_add(rh, &send, PW_FRAMED_IP_ADDRESS,"172.17.14.90", -1, 0) == NULL)
                return ERROR_RC; 
```

以上是我的部分代码“`radexample.c`用于生成”半径请求“我也想通过它传递框架IP。我的问题是PW_USER_PASSWORD发送正确的值，因为它是“字符串”类型。但是PW_FRAMED_IP_ADDRESS发送错误的值为它的类型是“ip”，我正在发送字符串值。如果我在第四个参数中传递“ip”。 `rc_avpair_add` 给出类型转换错误！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:02:44.183

`PW_FRAMED_IP_ADDRESS`想要一个 int 作为第四个参数。

最简单的方法是：

```
uint32_t framed_addr = 0;
inet_pton(AF_INET, "172.17.14.90", &framed_addr);
framed_addr = htonl(framed_addr); //network order
if (rc_avpair_add(rh, &send, PW_FRAMED_IP_ADDRESS,&framed_addr, -1, 0) == NULL)
            return ERROR_RC; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T10:07:58.507

我不确定，但 Framed-IP-Address 不是字符串属性。这里有更多[细节](http://freeradius.org/rfc/rfc2865.html#Framed-IP-Address)。也许

```
unsigned int ip=(unsigned int)inet_addr("172.17.14.90");
if (rc_avpair_add(rh, &send, PW_FRAMED_IP_ADDRESS, &ip, sizeof(ip), 0) == NULL) 
```

对你有帮助吗？

# javascript - Sencha touch store - 幻影数据

> ID：14212213
> 
> 赞同：0
> 
> 时间：2013-01-08T09:49:03.577
> 
> 标签：javascript, google-chrome, sencha-touch, store

我创建了一个模型

```
Ext.define('MyApp.model.ContainerDetailsModel', {
extend: 'Ext.data.Model',
alias: 'model.ContainerDetailsModel',
config: {
    fields: [
        {
            name: 'id',
            allowNull: false,
            type: 'string'
        },
        {
            name: 'container_types_id',
            type: 'string'
        }
    ]
  }
}); 
```

和这样的商店

```
Ext.define('MyApp.store.ContainerDetailsStore', {
extend: 'Ext.data.Store',

requires: [
    'MyApp.model.ContainerDetailsModel'
],

config: {
    model: 'MyApp.model.ContainerDetailsModel',
    storeId: 'ContainerDetailsStore',
    proxy: {
        type: 'ajax',
        enablePagingParams: false,
        url: 'hereIsServiceUrl',
        reader: {
            type: 'json'
        }
    }
}
}); 
```

现在在应用程序的某个地方，我试图获得一条记录，例如：

```
var detailsStore = Ext.getStore("ContainerDetailsStore");
detailsStore.load();
var detailsRecord = detailsStore.last(); 
```

但它给了我不确定的。服务返回的 json 是可以的，它在不同的地方使用它作为列表的源。我已经尝试将 allowNull 更改为 true，但源中没有 null id。我尝试将类型设置为“int”，结果相同。

所以我试过了

```
console.log(detailsStore); 
```

结果是这样的（只是重要的值）：

```
Class {
...
loaded: true,
data: Class {
   ...
   all: Array[1] {
       length: 1,
       0: Class {
           container_types_id: "1",
           id: "726",
           ....
       }
   ...
   }
   ...
},
...
} 
```

在同一个地方

```
 console.log(detailsStore.data); 
```

返回（应该）：

```
 Class {
   ...
   all: Array[1] {
       length: 1,
       0: Class {
           container_types_id: "1",
           id: "726",
           ....
       }
   ...
   } 
```

但是（下一行）

```
console.log(detailsStore.data.all); 
```

返回

```
 [] 
```

它是空数组。当我从商店尝试任何方法时，它说商店是空的。我一个接一个地写了console.log() 行——所以确保它们之间不会改变（我也以不同的顺序或组合尝试它）。

我的浏览器是 Google Chrome 23.0.1271.97 m 我使用来自[https://extjs.cachefly.net/touch/sencha-touch-2.0.1.1/sencha-touch-all-debug.js的 Sencha](https://extjs.cachefly.net/touch/sencha-touch-2.0.1.1/sencha-touch-all-debug.js)

我怎样才能从那家商店拿唱片？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T10:05:40.413

`store.load()`通过配置的代理将数据加载到存储中。这使用代理对代理使用的任何存储后端进行**异步**调用，自动将检索到的实例添加到存储中，并在需要时调用可选的回调。但是，该方法在获取数据之前返回。因此回调函数，执行操作存储中的新数据的逻辑。尝试，

```
detailsStore.load({
    callback: function(records, operation, success) {
    var detailsRecord = detailsStore.last();
    },
    scope: this
}); 
```

# android - 如何使用 TabGroup 开始新活动

> ID：14212215
> 
> 赞同：0
> 
> 时间：2013-01-08T09:49:07.480
> 
> 标签：android, android-intent

以下代码显示当我注销然后另一个活动登录时调用。

```
 public void logoutUser(){
    // Clearing all data from Shared Preferences
    editor.clear();
    editor.commit();

    // After logout redirect user to Loing Activity
    Intent i = new Intent(_context, Login.class);
    TabGroupActivity parentActivity = (TabGroupActivity) _context;
    i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

    //_context.startActivity(i);
   // parentActivity.startChildActivity("Login", i);

} 
```

最后两行代码被注释了，因为我已经使用了它们但是强制关闭了应用程序。以下是 logcat 输出。

```
01-08 15:13:56.219: D/AndroidRuntime(877): Shutting down VM
01-08 15:13:56.219: W/dalvikvm(877): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
01-08 15:13:56.249: E/AndroidRuntime(877): FATAL EXCEPTION: main
01-08 15:13:56.249: E/AndroidRuntime(877): java.lang.NullPointerException
01-08 15:13:56.249: E/AndroidRuntime(877):  at android.content.ContextWrapper.getApplicationContext(ContextWrapper.java:100)
01-08 15:13:56.249: E/AndroidRuntime(877):  at com.fabletechnologies.utils.SessionManagement.logoutUser(SessionManagement.java:102)
01-08 15:13:56.249: E/AndroidRuntime(877):  at com.fabletechnologies.smartaway.DashboardActivity$1.onClick(DashboardActivity.java:54)
01-08 15:13:56.249: E/AndroidRuntime(877):  at android.view.View.performClick(View.java:2408)
01-08 15:13:56.249: E/AndroidRuntime(877):  at android.view.View$PerformClick.run(View.java:8816)
01-08 15:13:56.249: E/AndroidRuntime(877):  at android.os.Handler.handleCallback(Handler.java:587)
01-08 15:13:56.249: E/AndroidRuntime(877):  at android.os.Handler.dispatchMessage(Handler.java:92)
01-08 15:13:56.249: E/AndroidRuntime(877):  at android.os.Looper.loop(Looper.java:123)
 1-08 15:13:56.249: E/AndroidRuntime(877):  at android.app.ActivityThread.main(ActivityThread.java:4627)
01-08 15:13:56.249: E/AndroidRuntime(877):  at java.lang.reflect.Method.invokeNative(Native Method)
01-08 15:13:56.249: E/AndroidRuntime(877):  at java.lang.reflect.Method.invoke(Method.java:521)
01-08 15:13:56.249: E/AndroidRuntime(877):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
01-08 15:13:56.249: E/AndroidRuntime(877):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
01-08 15:13:56.249: E/AndroidRuntime(877):  at dalvik.system.NativeStart.main(Native Method) 
```

完整代码在这里。

```
 public class SessionManagement extends Activity{
SharedPreferences pref;
Editor editor;
Context _context;
int PRIVATE_MODE=0;

// Sharedpref file name
private static final String PREF_NAME = "LoginLogoutPref";

// All Shared Preferences Keys
private static final String IS_LOGIN = "IsLoggedIn";

// User name (make variable public to access from outside)
public static final String KEY_NAME = "fullname";

// Email address (make variable public to access from outside)
public static final String KEY_EMAIL = "email";

// Constructor
public SessionManagement(Context context){
    this._context = context;
    pref = _context.getSharedPreferences(PREF_NAME, PRIVATE_MODE);
    editor = pref.edit();
}

/**
 * Create login session
 * */
public void createLoginSession(String fullname, String email){
    // Storing login value as TRUE
    editor.putBoolean(IS_LOGIN, true);

    // Storing name in pref
    editor.putString(KEY_NAME, fullname);

    // Storing email in pref
    editor.putString(KEY_EMAIL, email);

    // commit changes
    editor.commit();
}   

/**
 * Check login method wil check user login status
 * If false it will redirect user to login page
 * Else won't do anything
 * */
public void checkLogin(){
    // Check login status
    if(!this.isLoggedIn()){
        // user is not logged in redirect him to Login Activity
        Intent i = new Intent(_context, Login.class);
        // Closing all the Activities
        i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

        // Add new Flag to start new Activity
        i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

        // Staring Login Activity
        _context.startActivity(i);
    }

}

/**
 * Get stored session data
 * */
public HashMap<String, String> getUserDetails(){
    HashMap<String, String> user = new HashMap<String, String>();
    // user name
    user.put(KEY_NAME, pref.getString(KEY_NAME, null));

    // user email id
    user.put(KEY_EMAIL, pref.getString(KEY_EMAIL, null));

    // return user
    return user;
}

/**
 * Clear session details
 * */
public void logoutUser(){
    // Clearing all data from Shared Preferences
    editor.clear();
    editor.commit();

    // After logout redirect user to Loing Activity
    Intent i = new Intent(_context, Login.class);
    TabGroupActivity parentActivity = (TabGroupActivity) getParent();
  //  i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    //i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

    //_context.startActivity(i);
    parentActivity.startChildActivity("Login", i);

}

/**
 * Quick check for login
 * **/
// Get Login State
public boolean isLoggedIn(){
    return pref.getBoolean(IS_LOGIN, false);
} 
```

}

**请帮助我如何开始登录活动** **提前感谢**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T09:55:25.403

```
TabHost tabHost;
TabSpec spec1;
TabSpec spec2;
TabSpec spec3;

        tabHost=getTabHost();

        spec1=tabHost.newTabSpec("Tab 1");
        spec1.setIndicator("Tab !",null);
        Intent in1=new Intent(this,Activity1.class);
        in1.addFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);
        spec1.setContent(in1);

        spec2=tabHost.newTabSpec("Tab 2");
        spec2.setIndicator("Tab 2",null);
        Intent in2=new Intent(this,Activity2.class);
        in2.addFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);
        in2.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        spec2.setContent(in2);

        spec3=tabHost.newTabSpec("Tab3");
        spec3.setIndicator("Tab3",null);
        Intent in3=new Intent(this,Activity3.class);
        in3.addFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);
        in3.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        spec3.setContent(in3);

        tabHost.addTab(spec1);
        tabHost.addTab(spec2);
        tabHost.addTab(spec3); 
```

尝试像这样使用标签活动

# google-plus - 使用共享按钮在业务页面上共享 Google Plus

> ID：14212217
> 
> 赞同：0
> 
> 时间：2013-01-08T09:49:10.147
> 
> 标签：google-plus, share-button

我已经创建了我的 Google plus 业务页面，并且已经在我的网站上实现了“分享按钮”。问题是，当我单击共享按钮时，它会发布在我的个人资料上，而不是在业务页面上。谁能帮帮我，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:52:50.730

这就是它的工作方式。想象一下其他人正在点击您的分享按钮。它会让你对他们的个人资料有所了解。

如果我严重错过了重点，请详细说明...

# javascript - 设计接受字符串或函数的javascript函数

> ID：14212220
> 
> 赞同：2
> 
> 时间：2013-01-08T09:49:26.973
> 
> 标签：javascript, function, signature

特别是在 Javascript 中，API 公开接受字符串或特定参数函数的函数是很常见的。字符串提供“已经初始化”的值，而函数在运行时产生值。

```
// Call foo with known value
api.foo('bar')
// or defer value determination to run-time
api.foo(function() { return 'bar'; } 
```

这更灵活，有时传递给这些 API 调用的参数直到运行时才知道，例如

```
api.foo(function() { return prompt('foo or bar ?'); }); 
```

这种方法在某种程度上保留给面向公众的函数（因为它们引入了更复杂的签名并且可能有陷阱 - 最好保持它们的数量低），但是，**编写这样的函数有什么好的习惯用法？**

类似的东西

```
api = {
  // "public" function
  func: function(a) {
    if (typeof(a) == 'function')
      return this._func(a());
    else
      return this._func(a);
  },
  // Actual implementation
  _func: function(a) {
    [...]
  }
} 
```

应该可以，但肯定有更有效/更优雅的选择。有任何想法吗 ？

**更新：**在@camus 的评论之后（以及一个现在已经消失但相关的答案），这里有一个更新澄清了我的意图并解释了这与 API 的关系

考虑到在编写函数时，我们不知道要以哪种方式调用它，并且我们不想对其进行限制性假设。该函数被设计为通用的，因此可以使用不同的签名多次调用它。我们可以强制调用者使用字符串，但是让一个返回字符串的函数来完成这项工作会很方便。这个函数可以传递额外的参数（比如一个索引，...），这当然是非常特定于 API 的上下文，但一般的想法是“我如何处理字符串和函数-返回-a - 以优雅的方式字符串参数？”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T09:56:13.343

这是一个简单的实现方法：

```
api = {
  // "public" function
  func: function(a) {
    if (typeof a == 'function') {
      a = a();
    }
    // rest of function
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T09:56:26.667

我会去：

```
api = {
  func: function(a) {
    if(typeof a == 'function') a = a.call(this); // Transmit api as scope for a, may be useful for accessing api tools ...

    // Process a ...
  }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T09:59:22.347

```
api = {
  func: function( a ) {
    typeof a == 'function' && a.call( this, arguments ); 
  }
}; 
```

# c++ - c++父类对象的集合

> ID：14212225
> 
> 赞同：0
> 
> 时间：2013-01-08T09:49:40.737
> 
> 标签：c++, inheritance, collections, vector

我有一个父类 A 和 2 个派生类 A1 和 A2：

```
class A {

}

class A1 : public class A {}

class A2 : public class A {} 
```

而在另一个类中，BI 想要保留一个集合，该集合由对象 A1 或 A2 组成。

```
class B {
    vector<A1> _A1s;
    vector<A2> _A2s;

} 
```

有没有办法组合这两个向量，而不是保留 2 个单独的向量 A1s 和 A2s？我考虑过矢量或矢量，但是当 A1s 或 A2s 调整大小（我假设）时，任何一种方式都可能丢失对象。

任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T09:51:40.077

您可以使用指向基本类型的智能指针向量

```
std::vector<std::shared_ptr<A>> a_ptr; 
```

注意：您需要将虚拟析构函数添加到 A

```
class A {
public:
  virtual ~A() {}
}; 
```

用法：

```
struct B {
public:
  B() {
    a_ptr.push_back(std::shared_ptr<A>(new A1));
    a_ptr.push_back(std::shared_ptr<A>(new A2));
  }

private:
  std::vector<std::shared_ptr<A>> a_ptr;
};

int main(int argc, char* argv[])
{
  B b;
  return 0;
} 
```

在类定义之后你也会错过`;`，并且在下面的语句中 A 前面有额外的关键字 class：

```
class A1 : public class A {}; 
```

应该：

```
class A1 : public A {}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T09:54:57.337

您可以使用指针向量

```
class B {
public:
    std::vector<A*>   _AXs;
}; 
```

它将接受 A1 和 A2 指针类型。

请注意，在这种情况下，您应该设置`A`类 virtual 的析构函数。如果你不这样做，当你试图删除一个`A*`对象时，程序就无法猜测真正的类型是什么。

```
class A {
public:
    virtual ~A() {}    
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T10:18:19.380

您可以使用其他人所说的，加上`visitor`如果您希望仍然能够将底层`A`指针用作`A1`or的设计模式`A2`。访问者模式并不是为此而设计的，但是以这种方式使用它很好。

# c# - 我还不知道 C# 类型的对象列表

> ID：14212228
> 
> 赞同：3
> 
> 时间：2013-01-08T09:49:54.047
> 
> 标签：c#

我在设计我的功能时遇到问题，以便它可以针对不同的类型采取不同的行动。我的函数用于创建具有不同类型的对象列表，因此创建几个类似的函数不会有问题，但如果可能的话，我想避免它以使我的代码更短：

```
static const int FIRST_TYPE = 0;
static const int SECOND_TYPE = 1;
static const int THIRD_TYPE = 2; 
```

我使用那些`int`s 作为函数的参数：

```
public void foo(int type)
{
    List<TypeIDontYetKnow> deserialized; 
    switch (type)
    {
        case FIRST_TYPE:
            deserialized = new List<A>();
            break;
        case SECOND_TYPE:
            deserialized = new List<B>();
            break;
        case THIRD_TYPE:
            deserialized = new List<C>();
            break;
    }
} 
```

有可能实现这样的目标吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-08T09:53:44.670

你需要一个通用方法

```
public void foo<T>()
{
    List<T> deserialized = new List<T>();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T09:53:36.960

您*可以*通过使用非泛型`IList`for来做到这一点`deserialized`，因为`List<T>`实现了它：

```
IList deserialized; 
```

但是，您*不应该那样*做。有关您要达到的目标的更多详细信息可能会帮助我们向您建议更好的解决方案：

*   首先是[MBen's answer](https://stackoverflow.com/a/14212286/17713) with a **generic method**。
*   如果`A`,`B`和`C`有一个**相互的子类**，则可能在编译时不区分类型，而是`List<ABCBase>`首先使用 a 。

# objective-c - 单击主页按钮后，AppDelegate 值不会更改

> ID：14212230
> 
> 赞同：0
> 
> 时间：2013-01-08T09:50:04.567
> 
> 标签：objective-c, ios, cocoa-touch, appdelegate

我有一个非常奇怪的情况。

我正在像这样使用 AppDelegate：

```
appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate]; 
```

并在那里保存不同的值以在应用程序之间共享。

例如

```
@property (nonatomic, retain) NSString *campaignTitle; 
```

我是用户第一次打开应用程序 - 我可以为属性分配值，甚至在应用程序生命周期中更改它们几次。

例如

```
appDelegate.campaignTitle = theTitle; 
```

但是，如果用户**单击 home button**，然后重新打开应用程序，如果我尝试分配新值 - appDelegate 值不会更改并保留旧值。

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T09:57:21.740

据我了解，您保存在 appDelegate 中的值仅存储用于会话。为确保您的数据在您关闭应用程序或重新打开应用程序时仍然存在，请存储它们。

最简单的方法是使用**NSUserDefaults**

```
//store the integer 35 for the key "ageKey"
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setInteger:35 forKey:@"ageKey"];
...
//retrieve the data from the key "ageKey"
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
NSInteger age = [defaults integerForKey:@"ageKey"]; 
```

对于更复杂的情况，我会推荐**CoreData**：

[http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/cdProgrammingGuide.html](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/cdProgrammingGuide.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T10:06:45.217

您不能以这种方式使用 AppDelegate。它不是作为持久存储而设计的。

如果要保存的数据很小，那么您应该使用 NSUserDefaults 来保存它。对于更复杂的事情，您应该使用 CoreData。

其次，您根本不应该使用 AppDelegate 来存储全局数据。使用单独的单例类来存储此类信息要好得多。然后，您可以封装数据的 get 和 set 方法，以便为您将它们放入 NSUserDefaults 中。

IE

```
SingletonClass.m

- (NSString*)campaignTitle
{
    return [[NSUserDefaults standardUserDefaults] objectForKey:@"CampaignTitle"];
}

- (void)setCampaignTitle:(NSString*)campaignTitle
{
    [[NSUserDefaults standardUserDefaults] setObject:campaignTitle forKey:@"CampaignTitle"];
    [[NSUserDefaults standardUserDefaults] synchronize]];
} 
```

# c# - 等效于 C# 中切换按钮的 PerformClick()？

> ID：14212233
> 
> 赞同：-2
> 
> 时间：2013-01-08T09:50:07.967
> 
> 标签：c#, click, togglebutton

我正在使用一个切换按钮，它在 Cliked 时调用一个函数，我想调用 Click 事件，就像 PerformClick 对 C# 代码中的一个简单按钮所做的那样。

我怎样才能做到这一点 ？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:05:08.280

包装器方法对此很简单有效，示例如下：

```
// Assume this is your actual event handler
private void anyEventHandler(object sender, EventArgs e)
{
    performSomeCode();
}

private void performSomeCode()
{
    //here goes your code
} 
```

以这种方式将 UI 与逻辑解耦，如果/当您需要假装事件被触发时，您只需调用`performSomeCode()`，从而使真正的 UI 无关紧要。

# c# - 如何打破 UnitTesting.Assert.AreEqual？

> ID：14212235
> 
> 赞同：4
> 
> 时间：2013-01-08T09:50:18.380
> 
> 标签：c#, visual-studio-2010, unit-testing

VS UnitTest 项目中断言的标准行为是告诉我测试在特定行上失败了。

但是，有时如果在这样的断言失败时我可以中断，那会很方便。因为只是在该换行符上设置一个断点也是为了不失败的测试用例。如果我可以在断言失败时中断，我可以立即看到哪个测试用例失败了。

当断言失败时，如何临时告诉 VS 中断？

例如，我在单元测试中有很多循环，并且想知道哪个迭代失败了：

```
foreach(var testcase in testcases)
{
    Assert.AreEqual(testcase.ExpectedOutputData, FuncionUnderTest(testcase.InputData));
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T09:57:11.573

只需使用条件断点，并给它断言检查的逻辑否定。

就个人而言，我认为断点被严重低估了，只不过是一个“此时中断”工具——它们非常通用，可以很容易地用于`Console.WriteLine`显示调试输出而不需要实际修改代码，以及只有在以下情况下才会中断断言将失败。

如果以这种方式过度使用它们确实会导致一些性能下降，但这很少是运行单元测试的问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T10:07:53.797

在没有太多关于如何构建单元测试的知识的情况下，在我看来，如果您正在努力查看哪个断言导致您的单元测试失败，那么也许您在个人测试中测试了太多？单元测试应该尽可能原子化，以完全否定这个问题。如果你可以分解你的测试，甚至在一个测试中只有一个断言，那么找出哪个测试失败会容易得多。我当然会提倡将特定于断点的代码写入单元测试。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T10:04:51.247

如果您使用 nUnit，您可以使用它来单独调试：

```
[TestCase(0)]
[TestCase(1)]
public void NunitTestCases(int expected)
{
    Assert.AreEqual(expected,0);
} 
```

我想你总是可以这样做：

```
[Test]
public void BreakTest()
{
    for (int i = 0; i < 2; i++)
    {
        bool condition = i == 0;
        if(!condition)
            Debugger.Break();
        Assert.IsTrue(condition);
    }
} 
```

# .net - WPF Virtualized ItemsControl ScrollChanged 行为在 .Net 4.5 中改变了吗？

> ID：14212236
> 
> 赞同：0
> 
> 时间：2013-01-08T09:50:21.383
> 
> 标签：.net, wpf, itemscontrol, scrollviewer, virtualizingstackpanel

我们的一个应用程序包含一个 UserControl，其中我们有多个 ItemsControls 层，它们在滚动时保持同步。ItemsControl 是虚拟化的。该应用程序的目标是 .Net 4.0，而不是 4.5，并且该控件在安装了 .Net Framework 4.0 的系统上运行良好。然而，我们现在有一台安装了 .Net Framework 4.5 的电脑，它似乎不是 100% 向后兼容（或者系统存在另一个问题）。

发生的情况是，在 4.0 中，任何滚动（鼠标滚轮/箭头、移动滚动条）将 ScrollChanged 事件的 ExtentHeight 设置为整数值（因为它是虚拟化的并且 CanContentScroll 为真），同时在 a 上运行相同的 4.0 应用程序安装了 4.5 的系统，似乎在通过单击并按住鼠标移动滚动条时将值设置为十进制值。

我们已经用这个小测试窗口重现了它，它是我们控件的一个子集。在仅安装了 .Net 4.0 的 PC 上运行它只会在 MesasgeBox 中显示整数值，而在安装了 .net 4.5 的 PC 上，它还会显示十进制值。

MainWindow.xaml.cs：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();

        this.DataContext = new int[1000];

        for (int i = 0; i < 1000; i++)
        {
            (this.DataContext as int[])[i] = i;
        }
    }

    private void ScrollViewer_ScrollChanged_1(object sender, System.Windows.Controls.ScrollChangedEventArgs e)
    {
        MessageBox.Show(string.Empty + e.VerticalOffset);
    }
} 
```

MainWindow.xaml：

```
<Grid>
    <ItemsControl
        VirtualizingStackPanel.IsVirtualizing="True"
        ScrollViewer.CanContentScroll="True" 
        ItemsSource="{Binding}">
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <Border Background="Orange" BorderBrush="LightGray" BorderThickness="1" Height="50">
                    <TextBlock Text="{Binding}" />
                </Border>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <VirtualizingStackPanel />
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
        <ItemsControl.Template>
            <ControlTemplate>
                <Border BorderThickness="{TemplateBinding Border.BorderThickness}" Padding="{TemplateBinding Control.Padding}"
                        BorderBrush="{TemplateBinding Border.BorderBrush}" Background="{TemplateBinding Panel.Background}"
                        SnapsToDevicePixels="True">
                    <Grid>
                        <ScrollViewer x:Name="TimelineScrollViewer" Padding="{TemplateBinding Control.Padding}" Focusable="False" Grid.ColumnSpan="2" Grid.RowSpan="2"
                            ScrollChanged="ScrollViewer_ScrollChanged_1">
                            <ScrollViewer.Style>
                                <Style TargetType="ScrollViewer">
                                    <Setter Property="HorizontalScrollBarVisibility" Value="Disabled" />
                                    <Setter Property="VerticalScrollBarVisibility" Value="Visible" />
                                </Style>
                            </ScrollViewer.Style>

                            <ItemsPresenter SnapsToDevicePixels="{TemplateBinding UIElement.SnapsToDevicePixels}" x:Name="TimelineItemsPresenter" />
                        </ScrollViewer>
                    </Grid>
                </Border>
            </ControlTemplate>
        </ItemsControl.Template>
    </ItemsControl>
</Grid> 
```

这是一个错误还是记录在某处？这是.Net 4.5的向后兼容性问题，还是实际上与4.5完全无关，而是一些系统配置？

问题是实际可见范围（它仍然像应有的那样滚动内容）不等于范围的值，因此，其他层在我们的应用程序中不再保持完全同步。我们已经创建了一个解决方法，但我们仍然没有预料到这一点。

# html - 在 a 中设置 a 的样式 在一个里面

> ID：14212243
> 
> 赞同：1
> 
> 时间：2013-01-08T09:50:55.710
> 
> 标签：html, css

我在设置 AJAX 回调消息框的样式时遇到了一些问题。如您所见，该样式在 Internet Explorer 中效果很好，但在 Chrome 中效果不佳。可以这么说，我看不到树木的树木。这是我的 HTML：

```
<div id="CallbackMessage">
    <p>
        <label id="uiLblCallbackErrMsg" class="CallbackMsg" runat="server">&nbsp</label>
    </p>
</div> 
```

这是我的CSS：

```
.CallbackErrorMessage
{
    margin: 0 25 4 20;
    height: 10px;
    font-family:Arial;
    font-size:12px;
    background-color: #FDC68A;
    border: 1px solid #F7977A;
    color: Red;    
} 
```

使用 jQuery，我在按下按钮时添加了`CallbackErrorMessage`类`<div id="CallbackMessage">`！

我看不到错误，感谢任何建议。

看看两张图片：

![](../Images/624f6ffcde14f32d81df30abfa8e74ea.png)

![](../Images/5f0dbc108bca224f471d68cb11e80501.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T09:52:58.957

### CSS 中的错误

```
.CallbackErrorMessage
{
    margin: 0 25 4 20;
    height: 10px;
    font-family:Arial;
    font-size:12px;
    background-color: #FDC68A;
    border: 1px solid #F7977A;
    color: Red;    
} 
```

您为 CSS 保留了像素值。

```
margin: 0 25 4 20; 
```

将以上内容替换为：

```
margin: 0 25px 4px 20px; 
```

### 你需要清除浮动！

给风格`overflow: hidden;`一个。`.CallbackErrorMessage`

### 由于您引用的是一个`ID`而不是一个类，它应该是：

```
#CallbackErrorMessage 
```

### 问题`&nbsp;`

而且，`&nbsp`应该替换为`&nbsp;`。你错过了分号。

### 最终的 CSS

```
#CallbackErrorMessage
{
    margin: 0 25px 4px 20px;
    height: 10px;
    font-family:Arial;
    font-size:12px;
    background-color: #FDC68A;
    border: 1px solid #F7977A;
    color: Red;
    overflow: hidden;
} 
```

* * *

### 从`height`_`#CallbackErrorMessage`

```
height: 10px; 
```

将其删除或更改为`height: auto;`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T09:55:46.053

调用类名是完全错误的。你`id="CallbackMessage"`在你的 html 和写作风格中使用`.CallbackErrorMessage`

像这样改变css，

```
 #CallbackMessage
{
    margin: 4px 25px 4px 20px;
    height: auto; padding:10px;
    font-family:Arial;
    font-size:12px;
    background-color: #FDC68A;
    border: 1px solid #F7977A;
    color: Red; 
} 
```

[**演示**](http://jsfiddle.net/JE2By/4/)

# objective-c - 将 Google Drive 嵌入 WebView 的推荐方法？

> ID：14212248
> 
> 赞同：0
> 
> 时间：2013-01-08T09:51:06.950
> 
> 标签：objective-c, webview, google-drive-api

我在 Mac OS X 的 webView 中嵌入了一个 Google Drive 网页，但在这种情况下，该网页的功能并不完整：

1.  无法从文档中的文件系统拖放文件，（虽然可以从另一个应用程序中拖放图像）
2.  “分享”按钮不起作用
3.  打印按钮不起作用
4.  多次打开同一个文档时，同一用户的多个条目会出现在聊天中。预期的行为是当用户关闭页面时条目数会减少。![同一用户的多个条目的聊天](../Images/348225696342a3c6ca5321f2a9191c0d.png)当文档显示在 Mac OS X WebView 中时，打开页面时条目数会正确增加，但关闭 WebView 时不会减少。

我想了解在 WebView 中嵌入 Google Drive 页面以避免所有这些问题的推荐方法是什么。

* * *

附加信息：

1.  [Web 视图文档](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/WebKit/Classes/WebView_Class/Reference/Reference.html)
2.  所有请求都使用 Google Drive Oauth 访问令牌进行身份验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T19:46:49.070

目前没有推荐的方法，它应该就像您在任何浏览器中查看 Google Drive 一样工作。授权应该由 cookie 完成，Oauth 令牌在这里帮不了你。

# java - 设计 - 从哪里打开、插入和关闭数据库？

> ID：14212255
> 
> 赞同：1
> 
> 时间：2013-01-08T09:51:27.190
> 
> 标签：java, android, design-patterns

我需要一些设计建议。

这是我的用户故事：

作为用户，我想将我的工作时间保存到数据库中以供以后查看。我希望它很简单，只需单击一个按钮即可从主屏幕。

我在我的应用程序中处理这个问题的方式是，从我的主应用程序片段中，当用户单击一个按钮时，它将调用一个工厂类，该类将为此类工作实例化正确的类（让我们调用 - 类“X”） ，并将其返回给主要片段进行交互。

在类“X”构造函数中，我建立并打开数据库连接，并在此类方法之一中将新数据插入数据库。

我的问题是——这是一个好的设计吗？我会有内存泄漏吗？有什么我需要考虑的吗？

我附上了一个类似 UML 的类流来寻求帮助：

```
 +-----------------+                 +----------------------+
 |MainFragment     |                 |      Factory         |
 |-----------------|                 |----------------------|
 |                 |                 | ChooseShiftObject    |
 |                 |+---------+----+ |                      |
 | CheckIn()       |                 |                      |
 +-----------------+                 |                      |
                                     +----------------------+
                                              +
                                              |
                                              |
                                              +
                                              |
                                         +    +
                                    +-----------------------+
                                    |       Shift           |
                                    |-----------------------|
                                    |   DB.Open()           |
                                    |   DB.Insert(bla, bla. bla)
                                    |   DB.Close()          |
                                    |                       |
                                    |                       |
                                    |                       |
                                    +-----------------------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:24:22.890

关于android中的数据库，您应该了解一件事。您必须将`SQLiteOpenHelper`对象创建为单例，否则您将在多线程环境中遇到问题。你可以在[这里](http://touchlabblog.tumblr.com/post/24474398246/android-sqlite-locking)和[这里](http://touchlabblog.tumblr.com/post/24474750219/single-sqlite-connection)找到为什么你必须这样做的解释。

# java - com.sun.mail.smtp.SMTPSendFailedException: 553 抱歉，您的信封发件人在我的 badmailfrom 列表中

> ID：14212264
> 
> 赞同：0
> 
> 时间：2013-01-08T09:52:08.553
> 
> 标签：java, ssl, gmail, liferay, sendmail

从我的网站发送邮件时出现此错误。我正在使用带有 SSL 配置的 liferay，我用于发送邮件的 gmail 设置如下...

```
mail.session.mail.imap.host=XXXXXXXX
mail.session.mail.pop3.host=XXXXXXXX
mail.session.mail.smtp.auth=true
mail.session.mail.smtp.host=smtpout.europe.secureserver.net
mail.session.mail.smtp.socketFactory.class=javax.net.ssl.SSLSocketFactory
mail.session.mail.smtp.socketFactory.fallback=false
mail.session.mail.smtp.socketFactory.port=25
mail.session.mail.smtp.starttls.enable=true
mail.session.mail.smtp.password=XXX
mail.session.mail.smtp.port=25
mail.session.mail.smtp.user=XXXXXXX
mail.session.mail.store.protocol=imap
mail.session.mail.transport.protocol=smtp

custom.organization.friendly.url.enabled=true 
```

但我收到以下错误：

09:23:21,501 错误 [MailEngine:489] 553 抱歉，您的信封发件人在我的 badmailfrom 列表中。

09:23:21,503 错误 [MailEngine:154] com.sun.mail.smtp.SMTPSendFailedException: 553 抱歉，您的信封发件人在我的 badmailfrom 列表中。

```
at com.sun.mail.smtp.SMTPTransport.issueSendCommand(SMTPTransport.java:1388)
at com.sun.mail.smtp.SMTPTransport.mailFrom(SMTPTransport.java:959)
at com.sun.mail.smtp.SMTPTransport.sendMessage(SMTPTransport.java:583)
at com.liferay.util.mail.MailEngine._send(MailEngine.java:465)
at com.liferay.util.mail.MailEngine.send(MailEngine.java:366)
at com.liferay.util.mail.MailEngine.send(MailEngine.java:110)
at    com.liferay.mail.messaging.MailMessageListener.doMailMessage(MailMessageListener.java:101)
at    com.liferay.mail.messaging.MailMessageListener.doReceive(MailMessageListener.java:115)
at com.liferay.mail.messaging.MailMessageListener.receive(MailMessageListener.java:43)
at   com.liferay.portal.kernel.messaging.InvokerMessageListener.receive(InvokerMessageListener.j    ava:63)
at   com.liferay.portal.kernel.messaging.ParallelDestination$1.run(ParallelDestination.java:61)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662) 
```

我也使用其他端口，例如 80、3535、25、465，但它仍然给出相同的错误。

所以，请任何人有想法然后请给我正确的解决方案。我很感激他/她。

感谢和问候，

比平·维卡里亚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T09:59:37.137

除了从某人列入黑名单的域/电子邮件地址发送之外，您可能没有做错任何事情，参见。*553 抱歉，您的* ***信封发件人*** *在我的* ***badmailfrom 列表中。***

无论您发送给谁，都会发生这种情况吗？如果是这样，您可以尝试通过另一个智能主机进行中继。如果没有，请与您无法发送给的具体人员的系统管理员联系。或者您可以尝试设置另一个`from:`地址。

在任何情况下，请检查各种电子邮件 BL（例如，使用[http://mxtoolbox.com/blacklists.aspx](http://mxtoolbox.com/blacklists.aspx)）以查看您的源 IP 是否被列入黑名单。

干杯，

# php - 使用事件订阅者对 Symfony 2 表单进行单元测试

> ID：14212268
> 
> 赞同：1
> 
> 时间：2013-01-08T09:52:35.640
> 
> 标签：php, phpunit, symfony-2.1

基于此处的教程： [如何使用表单事件动态生成表单](http://symfony.com/doc/current/cookbook/form/dynamic_form_generation.html)

我创建了一个使用事件订阅者的表单：

```
class PageType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('name', 'text');

        $blockSubscriber = new AddBlocksSubscriber($builder->getFormFactory());
        $builder->addEventSubscriber($blockSubscriber);
    }

    // ...
} 
```

到目前为止一切顺利......直到我决定编写一些单元测试。;) 'new' 关键字的使用是有问题的，因为它阻止我使用模拟订阅者对象。

我可以想到两种可能的解决方案：

1.  使用测试助手/类构成，如下所述：虽然看起来有点麻烦，需要 PHP 扩展[。](https://github.com/sebastianbergmann/php-test-helpers#class-posing)这样做并不“感觉”正确，但可能是一种实际的解决方法。

2.  使用依赖注入，例如使 PageType 表单构造函数需要一个块订阅者的实例。我在这里发现的问题是，要在表单之外创建订阅者对象，我还需要表单构建器的实例。由于表单通常是通过调用`createForm()`控制器来构建的，因此我通常不会从表单外部看到构建器。

或者，是否真的需要对表单进行单元测试，或者使用爬虫对最终输出进行功能测试是否足够？

对于任何实现了一些 Symfony2 表单的人，我很想知道您是如何处理它的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T05:24:09.493

Symfony2 食谱现在包含专门用于表单单元测试的章节： http: [//symfony.com/doc/master/cookbook/form/unit_testing.html](http://symfony.com/doc/master/cookbook/form/unit_testing.html)

# php - PHP MYSQL - 图片上传错误

> ID：14212269
> 
> 赞同：-2
> 
> 时间：2013-01-08T09:52:46.400
> 
> 标签：php, database, upload, mysqli, image

我是使用数据库的新手，所以也许我的问题很明显。我的变量是丹麦语，我希望你能理解。我已经在论坛上搜索过了，但是因为这对我来说是新的，我觉得很难理解。

用户应该使用个人资料图片创建个人资料，但是当我尝试保存它时发生错误。弹出我自己定义的错误，因为`$billednavn == false`.

编码：

```
<?php  

// 1\. Gem modtagne formulardata i variabler:  
$navn = $_POST['navn'];  
$alder = $_POST['alder'];  
$postnr = $_POST['postnr'];  
$mail = $_POST['mail'];  
$billede = $_FILES['profilbillede'];  
$password = $_POST['password'];  

// 2\. Forbind til databasen:  
$databaselink = mysqli_connect("localhost","mmddk3e12m8b18", "****", "mmddk3e12m8b18") or die     ("Fejl: Kan ikke etablere forbindelse til database");

$billednavn = billedupload($billede);  
// besked til brugeren om at der er sket en fejl    
if($billednavn == false){  
die("Der skete en fejl under upload af billedet");
}

// 3\. Udform insert SQL streng med de modtagne data, og udfør SQL strengen på databasen vha     mysqli_query:  
$query = "INSERT INTO brugere (navn, alder, postnr, mail, password, profilbillede) VALUES ('$navn', '$alder', '$postnr', '$mail', '$password', '$billednavn')";  
$result = mysqli_query($databaselink, $query) or die( "Forespørgslen kunne ikke udføres: " .         mysqli_error($databaselink));  

// 4\. luk databasen:  
mysqli_close($databaselink);  

function billedupload($fil){  
if($fil['type']=='image/jpeg' or $fil['type']=='image/png'){  
$tmp_navn = $fil['tmp_name'];  
$filnavn = $fil['name'];  
$target = 'images/' . time() . $filnavn;  
move_uploaded_file($tmp_navn,$target);  
return $target;  
}  
else{  
return false;  
}  
}  

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T09:58:25.233

如果它返回 false，那么 - 根据您的定义，文件类型不是 image/jpeg 或不是 image/png，或者未设置类型，或者未设置整个 $_FILES。

在您的 HTML 表单中，确保您拥有`<form enctype="multipart/form-data" method="POST">`并尝试`var_dump($_FILES);`在您的 PHP 文件中验证您的 POST 数据。

**编辑：** 在 tmp_name 为空的情况下，我可以想到两种可能的情况：

1.  你忘了设置`<form enctype="multipart/form-data">`（更有可能，请验证）
2.  在您的 php.ini 中确保`file_uploads`设置为`On`

当然，第一种选择更有可能。

# java - 有什么方法可以从我的设备键盘中删除特殊字符？

> ID：14212270
> 
> 赞同：0
> 
> 时间：2013-01-08T09:52:57.397
> 
> 标签：java, android, special-characters

我正在开发一个将数据发送到我的网络服务并将它们存储在我的数据库中的 Android 项目。

我添加了一个编辑文本字段，允许用户发表一些评论。但是，当数据到达 Web 服务时，引号之类的某些字符会被菱形中的问号替换。

所以我实现了一个使用函数“replace”将特殊字符替换为“”的方法。

我的问题：是否有另一种方法可以从我的键盘上删除它们（以防止使用这些字符）？或者用户可以按下它但不采取任何行动。

> **编辑1：**
> 
> 最后是否可以允许这些字符：
> 
> *   [阿兹]
> *   重音字符
> *   [AZ]
> *   [0-9]
> *   ?,.;/:!%*-+_ {}() [] ...
> 
> 并将另一个替换为“”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T10:04:57.937

要阻止特殊字符，您可以像这样使用编辑文本的 setFilters 。

```
 InputFilter[] myfilters = new InputFilter[1];
            myfilters[0] = new InputFilter() {
                @Override
                public CharSequence filter(CharSequence source, int start,
                        int end, Spanned dest, int dstart, int dend) {
                    if (end > start) {
                        if (dest != null) {
                        //do some filter
                        }
                    }
                    return null;
                }
            };

            editText.setFilters(myfilters); 
```

# cordova - backhistory with phonegap

> ID：14212272
> 
> 赞同：1
> 
> 时间：2013-01-08T09:53:08.957
> 
> 标签：cordova, jquery-mobile

我有两个页面，第1页和第2页。第1页包含字段将包含值和一个下一步按钮转到第2页。第2页包含一个按钮，然后才允许返回第1页。返回时如何显示第1页从第 2 页开始，之前输入了相同的数据。

我使用这个代码：

```
navigator.app.backHistory();
return false; 
```

有字段动态填充组合框的问题，如果我使用您的代码，它再次包含这些字段的费用是动态的，并且我丢失了之前选择的内容。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:12:41.993

您可以始终在将页面更改为第 2 页的函数中将表单的值设置到本地存储中。然后，当您返回时，将表单字段的值设置为您在本地存储中设置的值。

例如，如果它是一个文本区域，您可以这样做以转到第 2 页

```
sessionStorage.setItem("textvalue", document.getElementById('textarea').value);
            $.mobile.changePage("page2.html", {
                transition: "slide",
                reverse: false,
                reloadPage:true,
                changeHash: false

            }); 
```

当你回去的时候，在第 1 页上有

`$("#textarea").val(sessionStorage.getItem("textvalue");`

希望这可以帮助

# mysql - 模型关联已关闭，用于在评论表上加入用户表以进行提交

> ID：14212274
> 
> 赞同：0
> 
> 时间：2013-01-08T09:53:09.990
> 
> 标签：mysql, cakephp, model, associations, cakephp-2.0

我在 CakePHP 中的联想有点不对劲。这是问题所在。我有一张`users`桌子和一张`comments`桌子。检索提交时，我想用 Comment.user_id == User.id加入`users`表上的表。`comments`

**评论型号：**

```
class Comment extends AppModel {
  var $name = 'Comment';
  var $belongsTo = array('User');

  var $hasMany = array(
    'CommentsLike' => array(
      'className' => 'CommentsLike'
    ),
    'Comment' => array(
      'className' => 'Comment'
    )
  );

  var $hasAndBelongsToMany = array(
    'User' => array(
      'className' => 'User',
      'joinTable' => 'comments',
      'foreignKey' => 'Comment.user_id',
      'associationForeignKey' => 'user_id'
    ),
    'Submission' => array(
      'className' => 'Submission'
    )
  ); 
```

**用户模型：**

```
class User extends AppModel {
  var $name = 'User'; 
  var $hasMany = array('Comment');

  var $hasAndBelongsToMany = array(
    'Comment' => array(
      'className' => 'Comment',
      'joinTable' => 'comments',
      'foreignKey' => 'Comment.user_id',
      'associationForeignKey' => 'user_id',
    ),  
    'Submission' => array(
      'className' => 'Submission',
      'order' => 'Submission.created DESC'
    )   
  ); 
```

当我抓住 a`submission`时，它会抓住它的所有评论，但它没有加入`users`我想要的桌子上

**提交模型：**

```
class Submission extends AppModel {
    var $name = 'Submission';
    var $belongsTo = array(
      'User' => array(
        'className' => 'User'
      )   
    );  

    var $hasMany = array(
      'Comment' => array(
        'className' => 'Comment',
        'order' => 'Comment.created DESC',
        'conditions' => array(
          'Comment.deleted' => 0
        )   
      ),  
      'SubmissionsVote' => array(
        'className' => 'SubmissionsVote'
      ),  
      'SubmissionThumbnails' => array(
        'className' => 'SubmissionThumbnails'
      )   
    ); 
```

对提交的查找将返回以下内容：

```
[Submission] => Array
    (
        // removed for sake of stackoverflow length
    )

[User] => Array
    (
        [id] => 2
        [username] => bob_cobb
    )

[Comment] => Array
    (
        [0] => Array
            (
                [id] => 1
                [submission_id] => 112
                [comment] => this is a test comment
                [user_id] => 2
                [created] => 5 minutes ago
                [deleted] => 
                [parent_id] => 
            )

    ) 
```

如您所见`[Comment][0]`，应该也有`[Comment][0][User]`或类似的东西。

我为什么要这个？简单：我想从表中获取通过 user_id 的外键评论的人的用户名`comments`。我已经阅读了文档和教程，并且很确定我对此很接近，但不确定是什么阻碍了我。

这是`comments`表格的屏幕截图： ![评论表](../Images/1ef5b702d8e78f7975cda0c8f68617e9.png)

这是`users`表结构的屏幕截图： ![用户表](../Images/81facf30326c94a718d3aac63a4625cd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:26:15.017

你可以有几个选择：

将提交模型中的递归属性设置为您需要取回关联数据的级别（请参阅[http://book.cakephp.org/2.0/en/models/model-attributes.html#recursive](http://book.cakephp.org/2.0/en/models/model-attributes.html#recursive)）

或者（更可取）使用 Containable 行为（参见[http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)）指定要返回的相关数据：

```
class Submission extends AppModel

    public $actsAs = array('Containable');

} 
```

在你的发现中像这样使用它：

```
$data = $this->Submission->find('all', array(
    'conditions'=>array(your conditions here),
    'contain'=>array(
        'User,
        'Comment'=>array(
            'User'
        )
    )
)); 
```

大多数人在每个模型中都使用可包含，因此将其添加到 AppModel 并将 AppModel::recursive 设置为 -1

# wordpress - 在 Wordpress 中集成 Bootstrap Carousel 并分页以显示每页 3 个帖子

> ID：14212280
> 
> 赞同：3
> 
> 时间：2013-01-08T09:53:27.177
> 
> 标签：wordpress, twitter-bootstrap, pagination, carousel

我试图在作者页面上集成这个[http://jsfiddle.net/Va8Un/10/以显示来自自定义帖子类型的所有帖子。](http://jsfiddle.net/Va8Un/10/)

这是我的测试代码，显示了我想要做什么，这段代码在 3 span4 上显示了相同的帖子：

```
<?php 
$args1 = array(
'post_type' => array( 'peliculas' ),
'posts_per_page' => -1,
);
$query1 = new WP_Query( $args1 );
if ( $query1->have_posts() ) { ?>
<div class="carousel slide" id="autor-pelicules">
 <div class="carousel-inner">
    <?php 
    $i = 0;
    while ( $query1->have_posts( )) : $i++; $query1->the_post();
    $active = ($i == 1) ? ' active' : '';
    ?>  
<div class="item <?php echo $active; ?>">

    <div class="span4">
    <div class="thumbnail">
      <a title="<?php the_title_attribute(); ?>" href="<?php the_permalink(); ?>" rel="bookmark">
                <?php   if ( has_post_thumbnail() ) {   
                    the_post_thumbnail('mini', array ('class' => 'widget-uef'));
                } else { ?>
                    <img src="<?php echo get_stylesheet_directory_uri(); ?>/tema/imatges/predefinides/no-poster-65x90.png" class="widget-uef" alt="<?php the_title_attribute(); ?>" />
                <?php } ?>
                </a> 
    </div>
   </div>

   <div class="span4">
    <div class="thumbnail">
      <a title="<?php the_title_attribute(); ?>" href="<?php the_permalink(); ?>" rel="bookmark">
                <?php   if ( has_post_thumbnail() ) {   
                    the_post_thumbnail('mini', array ('class' => 'widget-uef'));
                } else { ?>
                    <img src="<?php echo get_stylesheet_directory_uri(); ?>/tema/imatges/predefinides/no-poster-65x90.png" class="widget-uef" alt="<?php the_title_attribute(); ?>" />
                <?php } ?>
                </a> 
    </div>
  </div>

  <div class="span4">
    <div class="thumbnail">
      <a title="<?php the_title_attribute(); ?>" href="<?php the_permalink(); ?>" rel="bookmark">
                <?php   if ( has_post_thumbnail() ) {   
                    the_post_thumbnail('mini', array ('class' => 'widget-uef'));
                } else { ?>
                    <img src="<?php echo get_stylesheet_directory_uri(); ?>/tema/imatges/predefinides/no-poster-65x90.png" class="widget-uef" alt="<?php the_title_attribute(); ?>" />
                <?php } ?>
                </a> 
    </div>
  </div>

</div> 
    <?php
    endwhile;
    ?>
</div>
  <a class="carousel-control left" href="#autor-pelicules" data-slide="prev"><img src="<?php echo $jp_imatges . 'carousel-l.png'; ?>" alt="Pel&iacute;cula anterior" /></a>
<a class="carousel-control right" href="#autor-pelicules" data-slide="next"><img src="<?php echo $jp_imatges . 'carousel-r.png'; ?>" alt="Pel&iacute;cula siguiente" /></a> 
```

我尝试以多种方式处理一个查询，但我无法在不使用**$args1中的****'posts_per_page' => 3**的情况下显示 3 个不同的帖子，当我使用**'posts_per_page' => 3**时，检索到的帖子还可以，但查询有没有分页，因为只检索这 3 个帖子。

 ****关于如何使用 wordpress 查询来实现这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-17T06:41:15.473

您的代码中缺少两件事

1.  您需要将此**'paged' =>** $paged 添加到您的**$args1**
2.  您需要调用 WordPress 分页功能，可以使用此功能完成`<?php page_navi(); // use the page navi function ?>`

我认为如果您使用这些，它应该对您有用。让我知道它是否有帮助或使用此功能后得到的任何结果:)****

# cordova - 谷歌分析是否可用于 Phonegap

> ID：14212281
> 
> 赞同：0
> 
> 时间：2013-01-08T09:53:34.323
> 
> 标签：cordova, google-analytics

对于我的 phonegap 应用程序，实际上只有一个页面 index.html，它是一个空页面。所有其他页面都通过 ajax 调用加载到 index.html 中。我想对所有 ajax 视图使用谷歌分析。是否可以？

更重要的是，我的应用程序中没有“点击”事件，因为我使用 touchstart、touchmove、touchend 来处理点击。我想知道谷歌分析是否可以在不点击的情况下工作，而不是触摸。（我记得，谷歌分析可以记录每个链接的点击数据）

总而言之，我的问题是：

1.  window.location 不会改变，因为所有视图都是通过 ajax 加载的；
2.  没有点击事件

我可以为我的 PhoneGap 应用程序使用谷歌分析吗？感谢您的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:42:13.857

是的，您可以将[Google Analytics 插件](http://phonegap.com/2011/05/04/phonegap-alytics/)用于您的 PhoneGap 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-12T12:31:05.470

如果您想在没有插件的情况下在 phonegap 中使用 ga.js，那么您可以使用此 [https://github.com/ggendre/GALocalStorage](https://github.com/ggendre/GALocalStorage)

# w3c - 是否有 CSS3 供应商前缀的浏览器兼容性弃用表？

> ID：14212287
> 
> 赞同：11
> 
> 时间：2013-01-08T09:53:44.817
> 
> 标签：w3c, css

有人会在这里发布一个网站，提供一个简洁的摘要，说明哪些供应商特定的 CSS3 扩展 - 例如`-moz-border-radius`- 仍然需要或可以被弃用？

从我所看到的大体上看，所有最新版本的 Chrome、Safari 和 Opera（忘记 IE，对于我当前的应用程序我可以不用它）基本上都乐于使用没有供应商前缀的 W3C 属性。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-09T14:46:19.403

我建议使用[CanIUse](http://caniuse.com/)网站来检查这一点。

简短的回答是，您需要为曾经使用过它们的所有内容添加供应商前缀 --- 需要注意的是，这取决于您想要支持旧浏览器版本的时间。

CanIUse 站点包含几乎所有您能想象到的浏览器功能的浏览器支持表，以及几乎所有您想要支持的浏览器。它包括特定浏览器支持某个功能但需要供应商前缀的注释。

您可以使用这些表自行决定哪些前缀值得保留，哪些可以删除。

既然你特别问过`border-radius`，让我们看看它的支持表：[http ://caniuse.com/#search=border-radius](http://caniuse.com/#search=border-radius)

这向我们表明，*当前*的浏览器版本都不需要前缀。但是 Firefox 需要 v3.6 以上的前缀，Chrome 需要 4.0 和 Safari 4.0。Mobile Safari (3.2) 和 Android Browser (2.1) 也出现在列表中。

如果您需要支持这些浏览器版本或更早版本，则需要前缀。否则，你可以在没有他们的情况下逃脱。

希望有帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T10:10:10.610

他们也有本书的形式，Peter Gasston 的 The Book of CSS3，其中有列出所有 CSS3 浏览器支持的表格。但是我敢打赌那是你想要寻找的最后一件事......所以[这可能吗？](http://caniuse.com/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-12-21T16:58:29.713

好问题 - 我找不到供应商前缀要求的全球参考。

我在[**caniuse.com**](http://caniuse.com/)*上快速搜索了我*在项目中使用的供应商前缀属性，这就是我发现的（截至 2013 年底）：

*   **边界半径：**不需要
*   **盒子阴影：**不需要
*   **box-sizing：** `-moz-`当前/未来的 chrome 需要
*   **转换：** `-webkit-`所有 chrome/webkit 浏览器都需要
*   **渐变：** `-webkit-`当前的 android 浏览器和其他最近的浏览器需要
*   **线性渐变：** `-webkit-`当前的 android 浏览器和其他最近的 box-sizing 需要
*   **输入占位符：**不需要
*   **背景剪辑：**不需要
*   **用户选择：**所有人都需要

（**注意：**我将“不必要”定义为任何具有 1% + 全球使用率的浏览器都不需要）

随意添加到这个...

* * *

**公共服务公告：**
请记住，在使用供应商前缀属性时，它们应始终位于非供应商前缀属性*之前：*

例子：

```
textarea { 
    -webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
    -moz-box-sizing: border-box;    /* Firefox, other Gecko */
    box-sizing: border-box;         /* Opera/IE 8+ */
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-07-15T18:23:52.420

如果您只对前缀感兴趣，那么很棒的[http://shouldprefix.com/](http://shouldiprefix.com/)可能就是您要找的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-07-17T09:07:55.480

[最接近完整摘要的方法是使用Big JS-Compatibility-Table](http://compatibility.shwups-cms.ch/)制作自己的选择性摘要，查看[window.document.documentElement.style](http://compatibility.shwups-cms.ch/de/home?&property=document.documentElement.style)，该对象用于检测对特定 CSS 功能的支持。

它将为您提供所有受支持的 W3C CSS 属性的方便动态表，按浏览器，使用 camelCased CSS 关键字变体，并能够选择您要支持的浏览器。这个问题*仍然*会随着时间的推移而发生变化。

Big JS-Compatibility-Table 不是@TobiasBuschor 制作的众所周知的资源，但非常方便。我经常使用这个表来检查各种属性或 api，或者与[caniuse](http://caniuse.com/)数据进行交叉检查。

W3C 没有完全跟踪兼容性或实现者实际做了什么或发布了什么。浏览器制造商自己，也许除了 Opera，直到最近才很好地记录了这些东西。

用于确定哪些浏览器可以合理地弃用支持（通过删除需要它们的供应商前缀）。这将取决于给定站点的功能要求。

在撰写本文时，有些公认的约定是，可以弃用对任何不支持`querySelector`,`localStorage`和`addEventListener`. 这意味着您可以放心地放弃对 Firefox 3.5、IE 8、Safari 3.2、Chrome 3、Opera Presto 10.1 以及以下所有版本的支持。

也就是说，现在删除供应商前缀还为时过早，尤其是因为数百万用户仍在使用 Android 2.x 或 4.3 设备，运行 Safari 4.x/5.x 级别的 Android Stock 浏览器，或者歌剧迷你（Presto 11）。这些占 2014 年全球浏览器使用量的 10% 左右。

在该类别中，`border-radius`几乎是目前唯一可以安全删除的功能。虽然您可以选择放弃其他人，但如果您决定仅支持最新的浏览器。破坏与仍然大量使用的旧浏览器的兼容性将由您自担风险和责任。

在您可以故意开始完全删除前缀之前，这还需要几年的时间。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-07-17T12:27:34.283

你真的不需要理会这个问题。

如果您使用 gulp 或 grunt，您可以使用一个模块，该模块会根据您的目标（IE8、IE9、Chrome 30 等）自动为您的 css 添加前缀。

[https://github.com/Metrime/gulp-autoprefixer](https://github.com/Metrime/gulp-autoprefixer)

[https://github.com/nDmitry/grunt-autoprefixer](https://github.com/nDmitry/grunt-autoprefixer)

# oracle - 如何在 Oracle 中查看 PL/SQL 存储函数体

> ID：14212295
> 
> 赞同：30
> 
> 时间：2013-01-08T09:54:01.650
> 
> 标签：oracle, plsql

我在 Oracle 数据库 pAdCampaign.fGetAlgoGroupKey 中有一个存储函数。怎么看这个函数的代码。？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-01-08T10:14:56.323

如果是一个包，那么您可以通过以下方式获取该包的来源：

```
 select text from all_source where name = 'PADCAMPAIGN' 
    and type = 'PACKAGE BODY'
    order by line; 
```

Oracle 不会单独存储子程序的源代码，因此您需要查看它的包源代码。

注意：我假设您在创建该包时没有使用双引号，但如果您使用了，则使用

```
 select text from all_source where name = 'pAdCampaign' 
    and type = 'PACKAGE BODY'
    order by line; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-08T09:58:31.850

```
SELECT text 
FROM all_source
where name = 'FGETALGOGROUPKEY'
order by line 
```

或者：

```
select dbms_metadata.get_ddl('FUNCTION', 'FGETALGOGROUPKEY')
from dual; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T10:02:02.967

您还可以使用 DBMS_METADATA：

```
select dbms_metadata.get_ddl('FUNCTION', 'FGETALGOGROUPKEY', 'PADCAMPAIGN') 
from dual 
```

# visual-studio-2010 - 忽略 SSIS 中的错误

> ID：14212299
> 
> 赞同：0
> 
> 时间：2013-01-08T09:54:21.610
> 
> 标签：visual-studio-2010, ssis

我收到“违反 UNIQUE KEY 约束 'AK_User'。尝试使用 SSIS 将数据从 excel 文件复制到 sql db 时，无法在对象 'dbo.tblUsers 中插入重复键。

有什么办法可以忽略这个错误，让包继续下一条记录不停止？

我需要的是，如果它插入三条记录但第一条记录是重复的，而不是失败，它应该继续其他记录并插入它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:06:22.740

有一个名为的系统变量`propagate`可用于继续或停止 package 的执行。

1.为失败的任务创建一个`ON-Error`事件处理程序。通常它是为整个创建的`Data Flow Task`。

2.`F4`按 获取所有变量的列表，然后单击顶部的图标

![在此处输入图像描述](../Images/c311720cb10c817e6b438bb62be5cba8.png)

显示`System Variable`。默认情况下`Propagate`变量将为True，您需要将其更改为false，这基本上意味着SSIS不会将错误传播到其他组件并让执行继续

![在此处输入图像描述](../Images/c3869919adc3294a53b32e0ab4b48121.png)

```
Update 1: 
```

要跳过坏行，基本上有两种方法：-

1.使用查找

尝试匹配`primary key column values`源和目标，然后使用`Lookup No Match Output`您的`destination`。如果值与目标不匹配，则插入行，否则只需跳过行或使用重定向到某个表或平面文件`Lookup Match Output`

例子

![在此处输入图像描述](../Images/750a98c4eb94d048d421c7e30d96c2df.png)

有关查找的更多详细信息，请参阅[本文](http://www.simple-talk.com/sql/ssis/implementing-lookup-logic-in-sql-server-integration-services/)

`2.`或者您可以将错误行重定向到平面文件或表格。每个 SSIS 数据流组件都有一个错误输出。例如对于派生组件，错误输出对话框是

![在此处输入图像描述](../Images/c4557c148dbfeb9db13479453cc72053.png)

但是在您的情况下，这种情况可能对您没有帮助，因为目标中的重定向错误行无法正常工作。如果发生错误，它会重定向整个数据而不在目标中插入任何行。我认为这是因为 OLEDB 目标执行`bulk insert`或插入数据使用`transactions`。所以尝试使用`lookup`来实现你的功能。

# jquery - 基于嵌套 json 构建 JavaScript 下拉菜单

> ID：14212303
> 
> 赞同：0
> 
> 时间：2013-01-08T09:54:30.190
> 
> 标签：jquery, underscore.js, jquery-templates, mustache, client-side-templating

我正在尝试从 json 对象构建 html。我的 json 将采用以下结构。

```
[{"Property1":[{"IsDropDown":"true","Value":"Drp1Value1"},
    {"IsDropDown":"true","Value":"Drp1Value2"},
    {"IsDropDown":"false","Href":"Link1"}]}, 
{"Property2":[{"IsDropDown":"true","Value":"Drp2Value1"},
    {"IsDropDown":"true","Value":"Drp2Value2"},
    {"IsDropDown":"false","Href":"Link1"}]}]** 
```

从这个 json 我需要通过检查属性 IsDropDown 和 1 个锚链接 (IsDropDown == false) 来构建 2 个下拉列表。请记住，属性对象（Property1）的长度不是固定的，甚至属性中的嵌套对象也不是固定的。所以我需要一个或多个模板来解决这个问题。

从上面的 json 输出应该像 2 个下拉列表，第一个下拉列表包含值 Drp1Value1、DrpValue2 和第二个下拉列表，包含值 Drp2Value1 和 DrpValue2。如果 IsDropDown 为 false，则使用 json 对象中的 href 构建一个锚标记（不应在上面的 json 2 下拉列表中允许重复，每个下拉列表有 2 个值，并构建一个锚标记 sho.lud）

我无法更改 json 结构，因为它来自第三方 api。是否可以使用任何模板框架作品？我尝试了 jTemplate 和 mustache.js 但我做不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T07:56:46.947

看看[JQFaq.com](http://jsfiddle.net/L5XY2/1/)中的这个工作示例。它有两个下拉框，当第一个下拉值更改时，它的子项会根据 json 数据显示在第二个下拉列表中。

**代码：**

```
var jsonData = [{
  "Property1": [{
    "IsDropDown": "true",
    "Value": "Drp1Value1"
  }, {
    "IsDropDown": "true",
    "Value": "Drp1Value2"
  }, {
    "IsDropDown": "false",
    "Href": "Link1"
  }],
  "Value": "Property1"
}, {
  "Property2": [{
    "IsDropDown": "true",
    "Value": "Drp2Value1"
  }, {
    "IsDropDown": "true",
    "Value": "Drp2Value2"
  }, {
    "IsDropDown": "false",
    "Href": "Link1"
  }],
  "Value": "Property2"
}];

var collection1 = [];
$.each(jsonData, function (key, value) {
  collection1.push(value.Value);
});

var $newOption = $.tmpl("<option>${Value}</option>", jsonData);
var $select = $("#Select1").append($newOption).change(function () {
  selectionChanged(this);
});
selectionChanged($select[0]);

function selectionChanged(select) {
  var selectedIndex = $.inArray(select.value, collection1);
  var newOpt = $.tmpl("<option>${Value}</option>", jsonData[selectedIndex][select.value]);
  $("#Select2").empty().append(newOpt);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T20:07:35.157

这个块可能是你正在努力解决的问题：

```
var i, j, p;
var out = '';
for (i=0; i < json.length; i++) {
  for (p in json[i]) {
    if (json[i].hasOwnProperty(p)) {
      out += 'select name='+p+'<br/>';
      for (j=0; j < json[i][p].length; j++) {
        if (json[i][p][j].IsDropDown == 'true') {
          out += ' option='+json[i][p][j].Value+'</br>';
        }
      }
      break; // from for loop, since we only want one select per top-level object
    }
  }
} 
```

所以我用常规`for`循环迭代数组。但是后来我用`for in`and找到了“属性”的名称`hasOwnProperty`。

请注意，我没有实现任何其他业务逻辑，因为我怀疑您在那里会遇到问题。

你可以在这里找到这个代码和你的数据的小提琴：http: [//jsfiddle.net/5kKD9/](http://jsfiddle.net/5kKD9/)

# sql - SQL 查询 - 限制来自服务器的输出文本

> ID：14212305
> 
> 赞同：0
> 
> 时间：2013-01-08T09:54:39.053
> 
> 标签：sql, limit

我已经开始构建一个通知系统。当一个用户在另一个用户提要上发帖时，它会发送他们在其他用户流上发布的 notification_text。然后我在通知中输出此文本。但我想限制它输出的 SQL 查询中的文本数量，所以如果用户发布一条长消息，它不会将通知推送到页面下方。

所以让我们说用户发帖。

你好，我的名字是 Dave，我是来自 Derby 的开发人员。

我希望它只显示该输出的片段

你好，我叫戴夫，我是...

我从来没有写过这样的东西，所以有人可以向我解释我需要做什么。

```
<?php 
$call="SELECT * FROM notifications WHERE notification_targetuser =".$u2." ORDER BY notification_id DESC LIMIT 5";
$chant= mysqli_query($mysqli,$call);
$num = mysqli_num_rows($chant);
while($notification = mysqli_fetch_array($chant)){
$triggeredby_name = rawfeeds_user_core::getuser($notification['notification_triggeredby']);
$targetuser_name = rawfeeds_user_core::getuser($notification['notification_targetuser']);
                                                echo"<a href='profile.php?username=".$triggeredby_name['username']."'>";
echo "<img class='stream_profileimage' style='border:none;padding:0px;display:inline;' border=\"0\" src=\"imgs/cropped".$notification['notification_triggeredby'].".jpg\" 'this.src=\"img/no_profile_img.jpeg\"' width=\"40\" height=\"40\"></a>";
echo "<a href='".$notification['notification_throughurl']."'>";
echo $notification['notification_content'];
echo"<br/>";
echo $notification['notification_text'];
echo"<br/>";
echo $notification['notification_datetime'];
echo "</a><br/><br/><hr>";
} 
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:00:33.223

我认为 SQL 语法中没有任何内容只需使用

```
LEFT(field name, LIMIT) AS shortText 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T10:17:21.110

好的，这很简单。

我用了

> $str=$notification['notification_text'];
> 
> $text=substr($str, 0, 40);
> 
> 回声“$文本”；

# c# - C#使用反射实体框架求和

> ID：14212308
> 
> 赞同：1
> 
> 时间：2013-01-08T09:54:52.360
> 
> 标签：c#, entity-framework, reflection

对于某个列名，我想计算 SUM。我刚刚发现如何使用反射，但不知道我是否以正确的方式做这件事..

```
string columnName = "days";
ObjectQuery<TableX> objectSet = context.CreateObjectSet<TableX>();

Func<TDomainEntity, object> fieldGetter;
var type = typeof(TDomainEntity);
var prop = type.GetProperty(columnName);
fieldGetter = e => prop.GetValue(e,null);

//this wouldn't work because the fieldGetter should be Func<TDomainEntity, decimal> and not object
var total = objectSet.Sum(fieldGetter); 
```

我无法让它工作，因为 fieldgetter 应该是 decimal 类型，但 type.GetProperty 将失败并且强制转换它不起作用。那么我错过了什么还是有其他方法？我可以为列名创建一个巨大的 switch 语句，但这并不好 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T10:00:38.883

如果你知道类型应该是`decimal`，然后告诉 getter：

```
Func<TDomainEntity, decimal> fieldGetter = e => (decimal)prop.GetValue(e,null); 
```

然后它应该与 LINQ-to-Objects 一起使用：

```
var total = objectSet.Sum(fieldGetter); 
```

请注意，如果您打算使用 LINQ-to-EF，则必须改为构建表达式树：

```
var p = Expression.Parameter(typeof(TDomainEntity));
var lambda = Expression.Lambda<Func<TDomainEntity, decimal>>(
    Expression.PropertyOrField(p, columnName), p);
var total = query.Sum(lambda); 
```

当然，您可以使用这种*方法*：

```
var p = Expression.Parameter(typeof(TDomainEntity));
var lambda = Expression.Lambda<Func<TDomainEntity, decimal>>(
    Expression.PropertyOrField(p, columnName), p);
var total = objectSet.Sum(lambda.Compile()); 
```

# eggplant - 从外部数据表中读取数据 - eggPlant

> ID：14212319
> 
> 赞同：0
> 
> 时间：2013-01-08T09:55:28.323
> 
> 标签：eggplant

有没有办法从eggPlant中的excel、文本文件等外部数据表中读取数据？

当为各种输入参数集运行相同的脚本时，这对我来说很有用，而不是对值进行硬编码..

-湿婆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-07-26T14:46:23.413

*由于这是观看次数最多的茄子问题，因此我将给出更可靠的答案。*

**是的！**使用数据文件中的数据是一种无需硬编码即可参数化测试的绝妙方法！

# 保存数据

为此，您必须将数据以 .csv 或 .txt 格式保存在套件的资源目录中。这使您可以从 Egg​​plant Functional 中打开它并与之交互。

# 导入数据

在您的脚本中，您可以仅使用文件名引用这些数据文件，例如，

```
put ResourcePath("myData.txt") into FilePath 
```

会将整个文件 `myData.txt`从 Resources 目录保存到一个变量`FilePath`中。

# 访问数据

然后，您可以像访问任何其他文件一样访问该文件的每一行。

```
put line 1 of file FilePath into Name
put line 2 of file FilePath into DOB 
```

如果将数据保存为 .csv，则可以指定特定数据的行和列。

```
put item 2 in line 1 of file FilePath into Last_Name 
```

[在茄子文档中阅读有关阅读文件的更多信息！](http://docs.testplant.com/ePF/using/epf-accessing-data-cell-by-name.htm)

[有关更复杂的资源文件，请阅读茄子文档中的此页面！](http://docs.testplant.com/ePF/using/epf-resources-pane.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T10:59:06.597

```
1\. Enter the data in the excel sheet and save it as a CSV file.

2\. Piece of code:

repeat with theData= each line of file "D:\TestData.csv"
    log item 1 of theData 
end repeat 
```

# post - 使用offline_access 发布到粉丝专页

> ID：14212322
> 
> 赞同：0
> 
> 时间：2013-01-08T09:55:32.360
> 
> 标签：post, facebook-page

如果我是一个页面的管理员。我创建了一个能够发布到我自己页面的应用程序。我之前所做的，我使用“Graph Explorer Tool”来扩展“offline_access”，然后在发布时获得要使用的令牌代码。它在过去工作正常。

现在，当我单击“获取访问令牌”时，转到扩展权限，然后检查“offline_access”，单击确定。不记得offline_access。

并且在应用程序之前没有“弃用offline_access”。

如果有人可以使它工作，请分享！将不胜感激！谢谢

编辑：2013 年 1 月 9 日

在我让它工作后，如果有人和我有同样的问题，我会发布解决方案。

工具：1- 调试器 (https://developers.facebook.com/tools/debug) 2- 图形资源管理器 (https://developers.facebook.com/tools/explorer)

要求：您可以管理应用程序和Facebook页面

要做：1-**启用应用程序管理页面：**转到“图形资源管理器”，选择您的应用程序，单击“获取访问令牌”，转到“扩展权限”检查“manage_page”

2-**将短期令牌交换为长期令牌：**这可以通过在浏览器上打开此链接来完成。但在此之前，您需要替换自己的信息。

[https://graph.facebook.com/oauth/access_token?client_id=](https://graph.facebook.com/oauth/access_token?client_id=) **{YOUR_OWN_APP_ID}** &client_secret= **{YOUR_OWN_APP_SECRET}** &grant_type=fb_exchange_token&fb_exchange_token= **{YOUR_OWN_SHORT_LIVED_TOKEN}**

打开此链接后，如果一切正常，您将获得新的访问令牌代码。使用 Debugger 检查这个 token，你会看到这个 token 可以存活 2 个月。

3-**获取页面访问令牌：**将步骤2中的令牌代码复制到访问令牌：框，然后查询“我/帐户”，您将看到您的页面在右侧的框中显示为JSON数据。您将看到“access_token”。复制该 access_token 代码并使用调试器工具，您将看到 Expires 应该显示 Never。当您创建具有终身访问权限的 Facebook 页面的帖子时，请使用该令牌。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T11:46:16.927

> 现在，当我单击“获取访问令牌”时，转到扩展权限，然后检查“offline_access”，单击确定。不记得offline_access。

那是因为 offline_access 不再存在。

> 并且在应用程序之前没有“弃用offline_access”。

迁移不再可用，因为弃用过程已通过删除权限完成。

> 如果有人可以使它工作，请分享！

请做一些**研究！**

不推荐使用offline_access 以及如何处理它已在此处反复讨论。

从这里开始，[https://developers.facebook.com/roadmap/offline-access-removal/](https://developers.facebook.com/roadmap/offline-access-removal/)，然后搜索 SO 或网络，如果还有不清楚的地方。

# jquery - 在工具提示部分中呈现 html 代码

> ID：14212324
> 
> 赞同：2
> 
> 时间：2013-01-08T09:55:39.537
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, twitter-bootstrap, tooltip

我在应用程序上使用[http://twitter.github.com/bootstrap/javascript.html#tooltips](http://twitter.github.com/bootstrap/javascript.html#tooltips)。

我有这个导轨代码：

```
<%= link_to t('.shipping_details'), "#", :rel => "tooltip",  :title => "#{render 'orders/partials/shipping_cost_detail', :o => o}"  %> 
```

问题是我无法在其中呈现**html 代码**`_shipping_cost_detail.html.erb`

例如，如果我在工具提示上添加`<div></div>`或`<br>`像文本一样可见。

**如何在工具提示中呈现 html？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T10:02:12.107

当您初始化工具提示时，有一个`html`属性，它指定您是插入文本还是 html。默认情况下，这是`false`- 您需要将其设置为`true`.

像这样的东西：

```
$('.shipping_details').tooltip({
     html: true,
     // other options...
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T10:05:51.850

使用 html_safe 选项，我认为它会解决你的问题

```
<%= link_to t('.shipping_details'), "#", :rel => "tooltip",  :title => "#{render 'orders/partials/shipping_cost_detail', :o => o}".html_safe  %> 
```

# javascript - 打印 DIV 样式表的内容不起作用

> ID：14212325
> 
> 赞同：1
> 
> 时间：2013-01-08T09:55:40.787
> 
> 标签：javascript, html, css, styles

无法让样式表在打印的文档上工作。它适用于弹出窗口，但在打印时无效。因此，当屏幕上的窗口弹出时，它具有正确的样式，但是当使用打印对话框打印窗口的内容时，它不会从样式表中获取样式，只是默认样式。

这是代码：

```
<html>
<head>
<script type="text/javascript" src="http://jqueryjs.googlecode.com/files/jquery-  1.3.1.min.js" > </script>
<script type="text/javascript">

function PrintElem(elem)
{
    Popup($(elem).html());
    }

function Popup(data) 
{
    var mywindow = window.open('', 'my div', 'height=400,width=600');
    mywindow.document.write('<html><head><title>my div</title>');
    mywindow.document.write('<link rel="stylesheet" href="main.css" type="text/css" />');
    mywindow.document.write('</head><body >');
    mywindow.document.write(data);
    mywindow.document.write('</body></html>');

    mywindow.print();
    mywindow.close();

    return true;
}

</script>
</head>
<body>

<div id="mydiv">
This will be printed. Lorem ipsum dolor sit amet, consectetur adipiscing elit.    
Pellentesque a quam at nibh adipiscing interdum. Nulla vitae accumsan ante. 
</div>
<a href="#" onclick="PrintElem('#mydiv')">Printout</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T07:33:17.620

如果你想设计你的打印页面。它不适用于你的样式表。你需要编写内联样式表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-22T07:13:24.587

我遇到了同样的问题，最后解决了这是代码：

```
<html>
<head>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" type="text/css" />
</head>
<body>

<div id="mydiv">
This will be printed. Lorem ipsum dolor sit amet, consectetur adipiscing elit.    
Pellentesque a quam at nibh adipiscing interdum. Nulla vitae accumsan ante. 
</div>
    <a onClick="PrintElem('#mydiv')" class="btn btn-default btn-icon icon-left hidden-print pull-left">
        My Div
        <i class="entypo-print"></i>
    </a>

<script type="text/javascript">
    function PrintElem(elem)
    {
        Popup($('<div/>').append($(elem).clone()).html());
    }

    function Popup(data)
    {
        var myWindow = window.open('', 'my div', 'height=400,width=600');
        myWindow.document.write('<html><head><title>my div</title>');
        myWindow.document.write('</head><body >');
        myWindow.document.write(data);
        myWindow.document.write('</body></html>');

        myWindow.print();
        myWindow.close();

        return true;
    };
</script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js" > </script>
</body>
</html>
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-22T07:29:40.850

打印页面通常也用于电子邮件中。根据我的经验，您应该在代码中编写所有样式表代码（内联）。

# javascript - 垂直滚动时水平移动和动画精灵

> ID：14212329
> 
> 赞同：0
> 
> 时间：2013-01-08T09:55:48.277
> 
> 标签：javascript, html, scroll, parallax

我正在尝试复制“本保镖”网站出名的效果。

具体来说，当垂直滚动页面时，我试图让精灵图像在屏幕上水平移动。所以这是一个两步效果：

*   水平滚动
*   动画精灵（这是他们使用的那个[http://benthebodyguard.com/images/thiefsprite.png](http://benthebodyguard.com/images/thiefsprite.png)）

我设法在本地“按原样”复制页面，但是每当我尝试对其进行自定义时，我都会失去一些功能或动画变得非常奇怪。

在这里搜索，我发现了这个[http://jsfiddle.net/pGvgc/2/](http://jsfiddle.net/pGvgc/2/)

```
$(document).ready(function(){

var windowWidth = $(window).width();    
$("#block").css({ "right": windowWidth}); 

$(window).scroll(function(){       
    $("#block").css({ "right":  windowWidth  - $(window).scrollTop()});
});
}); 
```

但我不明白如何控制滚动的开始和停止，更重要的是，如何动画精灵动态改变背景位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T08:36:08.407

我正在尝试做一些类似于benthebodyguard 的事情，并且我试图找到可用的最佳解决方案。到目前为止，我已经尝试过诸如滚动路径、skrollr 和 crspline 之类的脚本。但是我最近发现了 raphael.js，并且基于这个 [jsfiddle]，我决定将 if 用于动画。也许它也可以帮助您处理滚动动画。精灵动画，至少对我来说，它会多一点，因为我有一个更复杂的道路，角色必须遵循！

# c# - 如何读取 xml 文件并获取到 C# 集合

> ID：14212333
> 
> 赞同：0
> 
> 时间：2013-01-08T09:56:10.620
> 
> 标签：c#, xml

我希望将以下 xml 数据导入 C# 应用程序（获取任何集合）

```
<ns0:BookStore xmlns:ns0="http://Book.BookStore">
  <ns1:BookDetails xmlns:ns1="http://Book.BookDetails">
  <ns1:Name>ns0:Name_0</ns1:Name> 
  <ns1:PurchaseDate>1999-05-31T13:20:00.000-05:00</ns1:PurchaseDate> 
  <ns1:SlNo>10</ns1:SlNo> 
  </ns1:BookDetails>

  <ns2:BookDetails xmlns:ns2="http://Book.BookDetails">
  <ns2:Name>ns0:Name_0</ns2:Name> 
  <ns2:PurchaseDate>1999-05-31T13:20:00.000-05:00</ns2:PurchaseDate> 
  <ns2:SlNo>10</ns2:SlNo> 
   </ns2:BookDetails>

  <ns3:BookDetails xmlns:ns3="http://Book.BookDetails">
  <ns3:Name>ns0:Name_0</ns3:Name> 
  <ns3:PurchaseDate>1999-05-31T13:20:00.000-05:00</ns3:PurchaseDate> 
  <ns3:SlNo>10</ns3:SlNo> 
  </ns3:BookDetails>
</ns0:BookStore> 
```

如下图 3 中 C# Windows 应用程序的结果。

```
1: Combination of  <ns1:PaurchaseDate> + <ns1:SlNo> + <ns1:Id>

2: Combination of  <ns2:PaurchaseDate> + <ns2:SlNo> + <ns2:Id>

3: Combination of  <ns3:PaurchaseDate> + <ns3:SlNo> + <ns3:Id> 
```

# ruby-on-rails - Rails 3 available_locales 不包括 gem 翻译

> ID：14212335
> 
> 赞同：6
> 
> 时间：2013-01-08T09:56:19.530
> 
> 标签：ruby-on-rails, ruby-on-rails-3, internationalization

我有一个 Rails 3 应用程序，我在其中使用 I18n.available_locales 显示用户帐户的可用语言列表。在我的 config/locales 目录中，我只有 en 和 nl yml 文件，但是，I18n.available_locales 返回各种其他语言环境键，我假设由于我正在使用的 gem 中存在翻译而存在这些键。是否有一种通用/标准的方法来获取仅返回应用程序本身中存在的翻译的方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T10:02:51.510

我建议你使用这个 gem：[rails-i18n](https://github.com/svenfuchs/rails-i18n)，它为每种语言提供基本的翻译，然后，限制可用的语言环境

```
config.i18n.available_locales = ['es-CO', :de] 
```

当然，rails-i18n 在这里不是必须的，你可以简单地`available_locales`在你的`config/application.rb`文件中定义

正如评论中所说，您绝对应该接受一些答案以提高您的accept_rate

# jquery - 奇怪的 JQuery $.post() 行为

> ID：14212336
> 
> 赞同：1
> 
> 时间：2013-01-08T09:56:25.480
> 
> 标签：jquery, .post

我有以下代码：

```
function check_email() {
    var email = $('#email').val();
    $.post(
        "inc/check.php", 
        { email: email },
        function(result) {
            if (result == 0) {
                // Do Stuff
            }
            else {
                // Do Stuff
            }
        }
    );
} 
```

在我的开发环境中的浏览器中，这测试很好。但是，在具有相同浏览器的其他环境中，请求似乎不会触发。我通过执行以下操作对此进行了测试：

```
function check_email() {
    alert('test1');
    var email = $('#email').val();
    $.post(
        "inc/check.php", 
        { email: email }, 
        function(result) {
            alert('test2');
            if (result == 0) {
                // Do Stuff
            }
            else {
                // Do Stuff
            }
        }
    );
} 
```

第一个`test1`警报会触发，但第二个警报`test2`不会。请记住，这仅适用于某些环境。有没有人知道为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T09:58:25.873

> 第一个 test1 警报触发，但第二个警报 test2 没有。请记住，这仅适用于某些环境。有没有人知道为什么？

因为在它不起作用的环境中出现了问题，所以`success`处理程序没有被调用。

您可以通过以下方式找出**问题所在**

1.  查看浏览器的开发工具，尤其是网络选项卡，以及

2.  使用`error`处理程序并检查它为您提供的信息。

选项＃2将需要重写您的[`$.post`](http://api.jquery.com/jQuery.post/)使用（无论如何[`$.ajax`](http://api.jquery.com/jQuery.ajax/)它只是一个快捷方式/包装器），如下所示：`$.ajax`

```
$.ajax({
    type:    'POST',
    url:     "inc/check.php",
    data:    {email: email},
    success: function(result) {
        alert('test2');
        if (result == 0) {
            // Do Stuff
        }
        else {
            // Do Stuff
        }
    },
    error:   function(jqXHR, status, errThrown) {
        // Look at what went wrong here
    }
}); 
```

* * *

附带说明一下，`alert`-style 调试效率非常低，在 2013 年不需要它。相反，使用浏览器内置的调试器。设置断点并单步执行代码。所有主流浏览器都内置了调试器，包括 IE8 及更高版本。Firefox 的内置插件仍然相当基本，但有 Firebug 插件。Chrome 内置的工具非常出色，但同样，它们都或多或少地拥有它们。如果您绝对必须在 IE7 或 IE6 上调试某些东西，甚至还有 Visual Studio。

# android - android2.3 下载管理器

> ID：14212339
> 
> 赞同：5
> 
> 时间：2013-01-08T09:56:37.500
> 
> 标签：android, download, android-download-manager

我使用`DownloadManager`自 Android 2.3 起提供的 FTP 下载。但它不起作用。

我不知道如何使它工作？我没有找到合适的例子。`DownloadManager`支持FTP吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T10:11:28.183

不幸的是，FTP 不起作用。

`DownloadManager`支持HTTP。并且从 ICS 开始支持 HTTPS。如果您尝试从 FTP 下载，您会收到以下异常之一：

> java.lang.IllegalArgumentException：只能下载 HTTP URI

或者

> java.lang.IllegalArgumentException：只能下载 HTTP/HTTPS URI

# java - Java：如何检查字符串第 n 个位置的字符是字母还是数字？

> ID：14212340
> 
> 赞同：-2
> 
> 时间：2013-01-08T09:56:41.740
> 
> 标签：java, string, char

假设我有这个字符串：“abcd123fx”。现在，我想创建一个方法来检查（按顺序）“a”、“b”、“c”、“d”等是否是数字，如果不是，则返回 false。我不知道如何按顺序处理 char 的第 n 个位置以及每个 char 的位置。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T10:00:20.543

您可以使用 Character 类检查字符是否为数字字母。

```
String text = ...
char ch = texct.charAt(nth);
if (Character.isLetter(ch)) {
    // is a letter
} else if (Character.isDigit(ch)) {
    // is a digit
} 
```

注意：这些方法支持 unicode 不同块中的字符。例如，它将接受阿拉伯语或韩语字符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T09:59:43.383

检查文档。您可以使用[charAt](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#charAt%28int%29)函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T10:02:26.127

要获取字符串的第 n 个字符，您应该使用[charAt](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#charAt%28int%29)，您应该使用 Charachter 的[isLetterOrDigit](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Character.html#isLetterOrDigit%28char%29)。

通常，当您遇到这些问题时，您应该搜索 javadoc 以寻找合适的方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-08T10:04:20.543

查看oracle.com 上的[Java 教程以获取更多信息。](http://docs.oracle.com/javase/tutorial/)

专门针对这个主题：

*   [字符](http://docs.oracle.com/javase/tutorial/java/data/characters.html)，特别是[`Character.isLetter(char ch)`](http://docs.oracle.com/javase/7/docs/api/java/lang/Character.html#isLetter%28char%29)和[`Character.isDigit(char ch)`](http://docs.oracle.com/javase/7/docs/api/java/lang/Character.html#isDigit%28char%29)方法
*   [字符串](http://docs.oracle.com/javase/tutorial/java/data/strings.html)和[操作字符串中的字符](http://docs.oracle.com/javase/tutorial/java/data/manipstrings.html)，最简单的方法是[`String.charAt(int index)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#charAt%28int%29)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-08T10:05:22.363

**-**正如你所说你是一个新手，我不会让这个复杂使用`Regex`，但**会使用内置的 Java 功能来回答这个问题**。

**-**先用`subString()`method获取String的“abcd”部分，再用`toCharArray()`method分解`String`成`char`元素，再用`Character`class的`isDigit()`方法判断是不是数字。

**例如：**

```
public class T1 {

    public static void main(String[] args){

        String s = "abcd123fx";

        String str = s.substring(0,4);
        System.out.println(str);

        char[] cArr = str.toCharArray();

        for(char a :cArr){

            if(Character.isDigit(a)){

                System.out.println(a+" is a digit");
            }else{

                System.out.println(a+" is not a digit");
            }
        }
      }
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-08T10:00:33.643

```
if (Character.isLetter(yourString.charAt(index)))
    // ... Letter

if (Character.isDigit(yourString.charAt(index)))
   // ... Number 
```

检查[此页面](http://docs.oracle.com/javase/tutorial/i18n/text/charintro.html)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-01-08T10:02:11.190

那么有几种方法可以做到这一点。最简单的可能是这样的：

```
Character.isDigit(someString.charAt(x))
or  a regex way would be someString.substring(x,x).matches("[0-9]") 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-01-08T10:08:54.297

```
public static void main(String[] args){
    System.out.println(checkNumber("123a44"));
}

public static boolean checkNumber(String s){
    for(int i = 0; i < s.length(); i++){
        if(Character.isDigit(s.charAt(i))){
            continue;
        }
        else{
            return false;
        }
    }
    return true;
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-01-08T10:03:05.953

这可能会帮助你

```
public static boolean isNumeric(String str) {
    return str.matches("-?\\d+(.\\d+)?");
}

public static void main(String[] args){
    System.out.println(isNumeric("abcd123fx"));
} 
```

如果您有一个数字字符串，它将返回 true 否则为 false

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-01-08T10:00:10.600

您还可以查看 ASCII 表

根据这一点，您可以编写一个方法：

```
private boolean isNumber(char a) {
    int i = a;
    if(i >= 48 && i <=57)
        return true;
    else 
        return false;
}

// now you can look by a String

private void checkString() {
    String x = "abcd123fx ";

    for(char counter : x.toCharArray())
        System.out.println(isNumber(counter));
} 
```

# c# - 使用 linq 表达式工厂方法访问成员属性

> ID：14212346
> 
> 赞同：1
> 
> 时间：2013-01-08T09:57:16.963
> 
> 标签：c#, linq-expressions

出于我的项目的目的，我需要对实体进行一些 linq 查询，我正在使用表达式工厂方法来构建动态过滤谓词。

考虑到这段代码：

```
public class mother{
  public int age {get; set;}
  public string name {get; set;}
  public child child {get; set;}
}

public class child{
  public int age {get; set;}
  public string name {get; set;}
}

//predicate builder
public static Expression<Func<T, bool>> GetChildNamePredicat<T>(){
  var param = Expression.Parameter(typeof(T), "param");

  // age property of mother class
  var motherAgeProperty = Expression.MakeMemberAccess(param, typeof(T).GetProperty("age"));

  // name property of child class
  var motherChildProperty = Expression.MakeMemberAccess(param, typeof (t).GetProperty("child"));
  var childNameProperty = Expression.MakeMemberAccess(motherChildProperty , typeof (child).GetProperty("name "));

   BinaryExpression motherAgeCondition;
   BinaryExpression childNameCondition;

  //building condition mother age >= 40 and child name = junior
  var motherAgeConst = Expression.Constant(40, typeof(int));
  var childNameConst = Expression.Constant("junior", typeof(string));
  motherAgeCondition = Expression.GreaterThanOrEqual(motherAgeProperty, motherAgeConst);
  childNameCondition= Expression.Equal(childNameProperty, childNameConst);
  var mergeCondition = Expression.AndAlso(motherAgeCondition , childNameCondition);

  //return expression
  return Expression.Lambda<Func<T, bool>>(mergeCondition , param);
}

var myPredicate = GetChildNamePredicat<mother>(); 
```

此代码编译成功，但似乎不是功能性的，没有结果...通过在“myPredicate”上使用变量的间谍，我可以看到像这样的 lambda 调试视图：

```
.Lambda
#Lambda1<System.Func`2[myNameSpace.mother,System.Boolean]>(myNameSpace.mothe $e) { $e.age >= 40 &&  ($e.child).name == "junior" } 
```

($e.child) ...太奇怪了

您是否知道另一种解决方案或/并且对从母亲参数访问子名称属性有任何想法？

谢谢提前！

# jquery - jqgrid中函数的异步返回

> ID：14212347
> 
> 赞同：1
> 
> 时间：2013-01-08T09:57:20.420
> 
> 标签：jquery, ajax, asynchronous, jqgrid, jquery-deferred

首先对不起我的英语，

我正在使用 jqgrid。我有一张管理客户的桌子。当我想添加一个新客户端时，我在 beforeSubmit 事件中进行了 ajax 验证，以检查客户端是否存在于外部系统上。此函数的第一个参数是一个布尔值（如果为 true，则继续执行添加客户端，如果为 false，则停止执行）

```
beforeSubmit: function(postdata, formid) {

      var form = formid[0];
      var hostId = $.trim(form.HOSTID.value);
      var document = $.trim(form.DOCUMENT.value);
      var idMurex = $.trim(form.IDMUREX.value);

      var success;

      processClientData(hostId, document, idMurex).done(function() {

           alert('OK');
           success = true;

      }).fail(function() {

           alert('KO');
           success = false;

      });

      return[success, '']; 

}, 
```

ajax 函数返回客户端是否存在。如果客户端存在，它会显示是否继续的确认对话框，具体取决于用户是否同意客户端信息。如果客户端不存在，它会显示一个显示错误消息的警报对话框。

```
function processClientData(hostId, document, idMurex) {

        var def = $.Deferred();

        //SERVER RESPONSE IF EXISTS CLIENT
        $.post('/watt/cambio_titularidad', {    
                oper: 'datos_cliente', 
                hostId: hostId,
                document: document,
                idMurex: idMurex
            },
            function(response){

                //CLIENT EXISTS (SHOW CONFIRMATION DIALOG WITH CLIENT INFO)
                if (response.success == true) {
                    $("#dialog_info_tablas").dialog({ 
                        title: "CLIENT EXISTS",
                        modal: true,
                        buttons: {
                        "Ok": function()  {
                            $(this).dialog("close");
                            def.resolve();
                        }
                        "Cancel": function()  {
                            $(this).dialog("close");
                            def.reject();
                        }
                    }
                });

                //CLIENT DOESN´T EXIST (SHOW ALERT DIALOG WITH ERROR MESSAGE)
                } else {
                    $("#dialog_info_tablas").dialog({ 
                        title: "CLIENT NOT EXISTS",
                        modal: true,
                        buttons: {
                            "Ok": function()  {
                                $(this).dialog("close");
                                def.reject();
                            }
                        }
                    });
                }        
            }, 
            "json")

            return def.promise();
        } 
```

我使用 Deferred 对象来尝试同步 ajax 调用。

问题是在 var success 具有正确值之前执行 return 语句。我不知道如何使它同步，我需要延迟返回，直到用户单击对话框按钮，从而继续添加客户端与否。我试图将 return 语句放在*done*和*fail*函数中，但它也不起作用

谁能帮我？？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:23:19.147

我建议您在表单提交中使用错误处理，而不是在`beforeSubmit`. 回调`beforeSubmit`应该更好地用于*客户端*验证。

If the submit any data to the server during editing the Ajax request will be sent to the server. The server can validate the input data and return error message. It's important to place any HTTP error code in the server response in the case. You can use [errorTextFormat](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aform_editing#events) callback of form editing to customize the error message displayed for the user based on the error response returned from the server.

# javascript - 使用剔除突出显示选定的行

> ID：14212350
> 
> 赞同：1
> 
> 时间：2013-01-08T09:57:25.620
> 
> 标签：javascript, jquery, knockout.js

参考stackoverflow中提出的以下问题

[显示点击的项目](https://stackoverflow.com/questions/8838132/display-clicked-item-with-knockoutjs)

我修改了 john papa 创建的小提琴。这是我更新的小提琴

[http://jsfiddle.net/6FCEe/31/](http://jsfiddle.net/6FCEe/31/)

我添加了新按钮并单击它我推送新记录。在新按钮的单击事件中我添加了下面的代码

```
 this.NewDetail = function(){
    self.model.Things.push(new Thing(4, "Thing 4", self.model.CurrentDisplayThing)               
        );
    self.model.CurrentDisplayThing(item);
  }; 
```

但是新行没有显示为突出显示。我应该怎么做才能使其突出显示。添加的新行应以黄色高亮显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T10:09:56.727

如果您单击新建按钮，您将在浏览器 javascript 控制台中看到以下错误：

> 未捕获的 ReferenceError：未定义项目

因为你没有`item`你的方法。在您的情况下，`item`应该是新创建的`Thing`，因此将其存储在您可以命名的变量中，`item`它将正常工作。

```
this.NewDetail = function(){
    var item = new Thing(4, "Thing 4", self.model.CurrentDisplayThing);
    self.model.Things.push(item);
    self.model.CurrentDisplayThing(item);
  }; 
```

这是一个更新的[JSFIddle](http://jsfiddle.net/6FCEe/33/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T10:10:39.543

只是微不足道的错误

```
this.NewDetail = function(){
        var item = new Thing(4, "Thing 4", self.model.CurrentDisplayThing);
        self.model.Things.push(item);
        self.model.CurrentDisplayThing(item);
      }; 
```

# mysql - MySQL 复制 - 从节点上的选择查询会干扰复制过程吗？

> ID：14212357
> 
> 赞同：1
> 
> 时间：2013-01-08T09:58:02.130
> 
> 标签：mysql, replication

我知道mysql复制在slave上使用两个不同的线程-

1.  Slave I/O线程从master读取binlog并写入本地relay log
2.  从 SQL 线程执行本地中继日志中的 sql 语句。该线程用于执行更新、删除和创建 sql。

从站上的选择查询呢？SELECT 查询会干扰复制过程吗？或者是否有执行 SELECT 查询的不同线程？

我的意思是，slave 上的慢速选择查询会使复制落后于 master 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T10:18:50.497

In short queries can interfere with the replication it is not the threading that matters here but the locking being applied (ACID vs. threading). A update query from the master that is being replicated to the slave can be blocked by a select query on the slave. However the replication sub-system will deal with these query locking issues most of the time. If you don’t mind dirty reads you can set the transaction serialization isolation level on the slave to something less restrictive to mitigate the risk. However make sure dirty reads is acceptable see this link for more information: [http://dev.mysql.com/doc/refman/5.0/en/set-transaction.html](http://dev.mysql.com/doc/refman/5.0/en/set-transaction.html)

You are concerned about lag and that is not something you can eliminate in any replication schema there will be lag. There is almost always a network in between the master and slave. This will introduce lag right from the start. For example large replicated statements could saturate the network bandwidth and this is probably going to happen more often than a query blocking the replication. Replication never was and never will be instantaneous. So your point about lag can be answered like this lag is something you HAVE to deal with not something you can completely eliminate.

Dont get me wrong replication can be fast but it is NEVER instantaneous.

Another thing to keep in mind is that replication can fail and you need to plan for that as well. It will happen at some point and being prepared for it is essential. So basically you will have lag no matter how you do replication and you need to be able to deal with it. Also be prepared for replication failing at some point and how you will recover from it.

While replication can be useful in many places you need to make sure you are preparing for it on many levels such as adequate network infrastructure, how to deal with it during disaster recovery(failover), monitoring it during production and how to get it back online when it breaks.

# php - 如何只检索 1 行而不是 2 行？

> ID：14212368
> 
> 赞同：0
> 
> 时间：2013-01-08T09:58:39.963
> 
> 标签：php, mysql, count, group-by

```
<?php
        include "connect.php";
        // Make a MySQL Connection
        $sql = "SELECT COUNT(*) AS comment FROM comment co INNER JOIN item i WHERE co.items= i.items GROUP BY i.items"; 
        $result = $mysqli->query($sql); 
        while ($row = $result->fetch_array(MYSQLI_ASSOC))
        {
        ?>
        No of Comments:&nbsp;<?php echo $row['comment'];?>
        <?php
        }
        ?> 
```

它像这样回响：示例：

评论数：7 评论数：7

请帮忙！谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T10:01:24.323

那是因为你使用`GROUP BY`. 这意味着您可以获得`i.items`表中每个不同的计数。

您可以通过将该项目添加到查询结果中来检查（我更改`WHERE`为`ON`）：

```
SELECT 
  i.items,
  COUNT(*) AS comment 
FROM 
  comment co 
  INNER JOIN item i ON co.items = i.items 
GROUP BY 
  i.items 
```

解决方案是指定您想要的项目....

```
SELECT 
  i.items,
  COUNT(*) AS comment 
FROM 
  comment co 
  INNER JOIN item i ON co.items = i.items 
WHERE
  i.items = 'foo'
/* -- Grouping not needed anymore, since you only have 1 item (= 1 group)
GROUP BY 
  i.items*/ 
```

...或不分组，因此您可以获得所有项目的总数：

```
-- Will fetch the total number of comments (that are linked to an item)
SELECT 
  COUNT(*) AS comment 
FROM 
  comment co 
  INNER JOIN item i ON co.items = i.items 
```

... 或限制结果 此查询仅截断结果，仅返回其中一项的计数。该项目现在或多或少是随机选择的，尽管您可以添加 ORDER BY 来影响它。

```
SELECT 
  COUNT(*) AS comment 
FROM 
  comment co 
  INNER JOIN item i ON co.items = i.items 
GROUP BY 
  i.items
/* -- Optional order, if you need to influence which of the items is preffered.
ORDER BY 
  i.items*/
LIMIT 1 
```

因此，从您的问题中，我只能说出问题所在，而不是哪种解决方案最适合您。但这里有几个选项可供选择。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T10:09:02.360

你检查过co.items 和i.items 的不同值吗？由于您正在对项目进行分组，因此似乎有 2 个不同的值，因此每一行代表不同的项目值

试试这个来调试：

```
$sql = "SELECT COUNT(*) AS comment, i.items AS itemTest FROM comment co INNER JOIN item i WHERE co.items= i.items GROUP BY i.items"; 
    $result = $mysqli->query($sql); 
    while ($row = $result->fetch_array(MYSQLI_ASSOC))
    {
    ?>
    No of Comments:&nbsp;<?php echo $row['comment'];?> <?php echo $row['itemTest'];?> <br />
    <?php
    }
    ?> 
```

你还需要加入和组吗？你打算它做什么？如果代码在特定项目的页面上，您应该能够做到

```
$sql = "SELECT COUNT(*) AS comment FROM comment co WHERE co.items= 'ITEM-IDENTIFIER-HERE' "; 
    $result = $mysqli->query($sql); 
    $row = $result->fetch_array(MYSQLI_ASSOC);
    ?>
    No of Comments:&nbsp;<?php echo $row['comment'];?> 
```

尽管在查询、sql 注入和所有其他操作中使用项目标识符之前，自然会采取预防措施来清理项目标识符

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T10:03:48.170

尝试这个

```
<?php

include "connect.php";
        // Make a MySQL Connection
        $sql = "SELECT COUNT(*) AS comment FROM comment co INNER JOIN item i WHERE co.items= i.items GROUP BY i.items"; 
        $result = mysql_query($sql);

echo "No of Comments:&nbsp;". mysql_result($result, 0);

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T10:05:46.377

你总是可以扔一个 LIMIT 1；在查询结束时，这可能不是构建语法的方式，但在不知道您的数据是什么的情况下，肯定有一种简单的方法可以获得您期望的结果：

替换
$sql = "SELECT COUNT(*) AS comment FROM comment co INNER JOIN item i WHERE co.items= i.items GROUP BY i.items";

with $sql = "SELECT COUNT(*) AS comment FROM comment co INNER JOIN item i WHERE co.items= i.items GROUP BY i.items LIMIT 1";

# android - ImageButton 不会根据不同的分辨率缩放/适应

> ID：14212369
> 
> 赞同：1
> 
> 时间：2013-01-08T09:58:43.143
> 
> 标签：android

我在RelativeLayout 中放置了一个imagebutton。但是我似乎无法弄清楚我需要做什么才能使按钮根据不同的分辨率进行缩放。

这是我的 activity_main.xml 的内容：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
     xmlns:tools="http://schemas.android.com/tools"
     android:id="@+id/RelativeLayout1"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent">

    <ImageView
         android:id="@+id/imageView1"
         android:layout_width="fill_parent"
         android:layout_height="fill_parent"
         android:layout_centerHorizontal="true"
         android:layout_centerVertical="true"
         android:src="@drawable/background" android:scaleType="fitCenter" android:gravity="center"/>

     <ImageButton
         android:id="@+id/imageButton1"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_centerHorizontal="true"
         android:layout_centerVertical="true"
         android:background="@null"
         android:onClick="startVideo"
         android:scaleType="fitCenter"
         android:src="@drawable/button" android:layout_marginBottom="50dp"/>

</RelativeLayout> 
```

background.png 是放置在 mdpi 文件夹（1280x800px）中的图像，button.png 也放置在 mdpi 文件夹（757x271px）中。

如果我在 1280x800px 分辨率（星系标签）上运行我的应用程序，它看起来很好，但是当我尝试在我的手机上运行应用程序时，ImageButton 不会缩小 - 它保持原始大小（757x271px）。

有谁知道这个的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:43:51.383

您是否使用 layout-large、layout-small 等修饰符创建了替代布局资源？如果您只有一种布局，则不能保证在任何屏幕上都能正确缩放。**还考虑在dp**中为相关视图指定尺寸

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T22:34:32.597

我放弃了解决这个问题，只使用一张按我想要的比例缩小的大图像。

所以最后我不得不为imagebutton创建不同版本的图像，并将它们放在正确的文件夹中，即：

```
drawable-large-hdpi
drawable-large-mdpi
drawable-normal-hdpi
drawable-normal-mdpi
etc. 
```

然后我从 ImageButton 获得所需的结果。无论如何感谢 Maver1ck 和 talhakosen 的帮助，您的评论帮助我了解了不同的资源文件夹如何用于图像和布局。

# android - 从另一个 .apk 创建 .apk

> ID：14212372
> 
> 赞同：0
> 
> 时间：2013-01-08T09:58:52.987
> 
> 标签：android

有人可以告诉我是否可以在运行时创建 apk 文件？

我会解释：

我想创建一个可以在运行时创建 apk（android 应用程序）的 Android 应用程序

它会像：

```
start the app
set application parameters (number of buttons in the menu, links, images, etc..)
press create
install the apk file on the phone or save that .apk in the server 
```

希望您理解 ^^" 并感谢您的帮助（：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:01:09.933

这应该是可能的。AIDE 已经做了一段时间了 - [https://play.google.com/store/apps/details?id=com.aide.ui&hl=en](https://play.google.com/store/apps/details?id=com.aide.ui&hl=en)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T10:15:31.747

您还可以尝试创建一个应用程序，该应用程序为您希望显示的所有 UI 提供参数，并且一旦 UI 完成并且用户单击保存。内部模块使用信息并创建应用程序，更像是不一次又一次地向用户显示应用程序的自定义部分，而是将用户路由到最终视图。

一旦完成，元数据就可以存储到服务器。它更像是开发皮肤。

# yii - CGridView改变排序方法

> ID：14212374
> 
> 赞同：0
> 
> 时间：2013-01-08T09:59:01.020
> 
> 标签：yii, cgridview

我是 Yii 框架的新手。我正在分析自动生成的 CRUD 视图。当我单击列标题进行排序时，它会再次重新加载数据，因此它比编写 jQuery 排序表的方式慢得多。如何改变这种行为。我不想每次对表格进行排序时都重新加载数据，只想对我现在拥有的内容进行排序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:09:18.670

如果我理解正确，您只想对当前页面中的行进行排序，而不是对结果集中的所有行进行排序？我不确定我是否看到了它的用途，除非它是一个相当小的结果集。大多数用户都希望看到按列排序的整个结果集，而不仅仅是单个页面。

`CGridView`我不认为在客户端上没有内置的东西，但写一个并不难

```
$('table tr').each(function(){
    var me = $(this)
    if ( me.find('.columnToCompare').text() > me.find('.secondColumn').text() )
    {
         me.prev().insertBefore(me);
    }
} 
```

打字很快，但希望你能明白要点。

# c - linux fork socketpair sock_dgram

> ID：14212377
> 
> 赞同：0
> 
> 时间：2013-01-08T09:59:07.153
> 
> 标签：c, linux, sockets, unix, fork

我是socketpairs的新手，我需要我的孩子每个人都将信息从结构传递给父母。有人告诉我这可以使用SOCK_DGRAM来完成，但我不知道该怎么做。我查看了互联网，但我不能'找不到一个具体的例子。你能举个例子吗，你能把一个由 2 个整数和一个字符串组成的结构传递给父级吗？我只想要一个例子，这样我就可以理解如何构建这种套接字对和通过它发送信息。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:07:06.887

以下情况如何：

```
int sockets[2];
if (socketpair(AF_INET, SOCK_DGRAM, 0, sockets) != -1)
{
    int res = fork();

    if (res == 0)
    {
        /* In child process */

        /* We only need one socket, so close the other */
        close(sockets[0]);

        struct some_structure my_struct;

        write(sockets[1], &my_struct, sizeof(my_struct));

        /* All done */
        exit(0);
    }
    else if (res > 0)
    {
        /* In parent process */

        /* We only need one socket, so close the other */
        close(sockets[1]);

        struct some_structure my_struct;

        read(sockets[0], &my_struct, sizeof(my_struct));
    }
} 
```

上面的代码不检查或处理错误。它不能处理包含指针的结构，但是使用数组的结构是可以的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T10:10:26.880

假设您的字符串表示`char*`为

```
struct data {
    int i, j;
    char *s;
}; 
```

您需要设计一些序列化格式，因为发送指针不起作用；指针未通过，因此它不会指向接收器（父级）中有用的任何内容。一种简单的格式是将整数首尾相连，然后直接附加字符串，包括其 NUL 终止符，这样你就会得到

```
int senddata(int fd, struct data const *d)
{
    size_t msglen = 2 * sizeof(int) + strlen(d->s) + 1;
    char *msg = malloc(msglen);

    if (msg == NULL)
        return -1;

    ((int *)msg)[0] = d->i;
    ((int *)msg)[1] = d->j;
    strcpy(msg + 2 * sizeof(int), d->s);

    ssize_t r = send(fd, msg, msglen, 0);

    free(msg);
    return r;
} 
```

具有相应的父接收功能。您可能希望在字符串上设置一些最大长度，因为父级需要提前知道消息的大小。

# c# - 在 Windows 应用程序的文本框中更改注释文本的颜色

> ID：14212379
> 
> 赞同：1
> 
> 时间：2013-01-08T09:59:09.690
> 
> 标签：c#, sql

以下是更改注释查询颜色的代码：

```
private void TextBox1_TextChanged(object sender, EventArgs e)
{
   if(TextBox1.Text.startswith("--")||TextBox1.Text.startswith("//"))
   {
      TextBox1.ForeColor = Color.gray;    {need to modify for correct functionality)
   }
} 
```

**例子：** `-- select * from tab; select * from table1`

查询改变了它的颜色，但是当我尝试在下面编写另一个查询时，即使下一个查询出现相同的灰色，

如何仅更改以 (- 或 // ) 开头的特定选定文本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T13:53:38.663

如果您设置 Textbox 属性，则换行符会被阻止：

在后面的代码中：

```
private void TextBox1_TextChanged(object sender, EventArgs e)
{
    String[] Lines = TextBox1.Split('\n'); //get all lines
} 
```

但是你必须记住，当你设置

```
TextBox1.ForeColor = Color.gray 
```

所有文本框内容都将具有灰色（您不能仅将其设置为一行）。

# database - 大型服务器端数据：JSON vs XML vs JSTL EL

> ID：14212380
> 
> 赞同：0
> 
> 时间：2013-01-08T09:59:12.443
> 
> 标签：database, json, jsp, jstl

我正在使用一个必须对 MYSQL 数据库执行许多查询的网络。我使用 Java+Tomcat 作为开发环境。

我尝试了不同的方法来解决这个问题：

*   一开始我开始使用带有 sql 标签的 jstl。以这种方式创建的每个 jsp 文档看起来都很“脏”，有许多使用 jstl sql 标记的 sql 查询，当数据库更改时，您必须更改每个文档。

*   我尝试的第二个解决方案是使用 servlet 中的列表和映射来访问来自 jstl el 的数据。它看起来不错，但似乎有点奇怪 - 至少对我来说 - 必须使用自定义 url 访问每个文档（首先你用几个类操作数据，直到你设置请求属性并调用 jsp 文档 RequestDispatcher），有时它可以如果用户在导航序列中从这里跳转到那里，则失败（缺少填充某些菜单或表格所需的查询）。

*   我现在尝试的最终解决方案是向/从服务器端发送和接收 JSON 数据。我喜欢它（一切都发生在相同的 url 上下文中，html 文档部分是干净的，更动态的 web ......）但是 JSON 数据必须在客户端使用 javascript 处理，这可能会影响大数据块的性能，由于字符串格式，可能有一些大小限制。例如，JSON 可以很好地使用 DataTables js 库进行数据拆分，其中我只能从数据库中同时获得 200 行的最大值 - 我设置了这个参数。但是，当我不执行此数据拆分并显示例如多个组合框或包含 MYSQL DB 中表中所有行的表时，它会减慢网络速度。

几年前，我开发了一个桌面应用程序 (C#)，其中嵌入了用于导航的 flash 和用于 DB 和 APP 之间数据交换的 xml。但我认为 XML 更适合不同应用程序之间的数据导出，如果我已经有数据库，我不需要更多包含部分数据的文件。

那么，小伙伴们，你们认为最好的解决方案是什么呢？我想检查不同的观点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-23T22:28:23.000

![图1](../Images/9ed0c0ad9a53db0afca0ad696facbf2b.png) ![图 2](../Images/02b1c4ab518c5ddc92792dc6e54b2a73.png) ![图 3](../Images/89da61c02106d47803bab1e6bb83eb95.png) ![图 4](../Images/f7138085c3a6febcc1908930af9127e0.png)

转储 JSP 标记库并切换到 JSON。

我经常看到开发团队在不应该使用 JSP 标记库时使用它们。我写这篇文章是为了解释为什么最好将 JSP 标记库视为过去的遗物。

大多数重要的 Web 应用程序将数据存储在服务器端的数据库中。这些应用程序需要允许客户端（Web 浏览器）和服务器（例如 Java 应用程序服务器）交换数据的机制。通常，a) 需要为用户显示数据（因此，客户端将查找条件发送到服务器，服务器用相关数据进行响应）或 b) 用户在浏览器中更改数据并且客户端需要将数据修改提交给服务器进行处理和/或永久存储。

直到最近，大多数 Java Web 应用程序都使用 JSP 标记库作为客户端机制，以从客户端（Web 浏览器）和服务器之间来回传递的 Java 对象（JavaBeans）中提取数据，作为 JSP/servlet 范式的一部分。爪哇。（注意：JSP 是转换成 Java servlet 的 HTML 文件，因此它们可以包含用于操作服务器端 Java 对象的 Java 代码。）在每种情况下，服务器都会响应一个新页面（带有嵌入数据），也称为整页刷新。

1995 年，AJAX 出现并改变了上述整页刷新范式。AJAX 允许在浏览器和应用服务器之间进行部分页面刷新和数据交换，而无需进行全页面刷新。从那时起，AJAX 不断获得动力，并在 v3.0/2010 中内置了流行的框架，如 Spring (for Java)和 v1.5/2011 中的 jQuery（用于 JavaScript）。

最适合 AJAX 的数据交换格式是 JSON，因为除非涉及整个页面刷新，否则无法调用 JSP 标记库。服务器端 Java 模型对象 (JavaBeans) 和 JSON 之间的映射有多种选择，它们可以很容易地被在浏览器中运行的 JavaScript 使用。（注意：由于 JSON 是 JavaScript 对象的文字表示，因此从 JSON 到 JavaScript 对象的转换是微不足道的。）我推荐并一直使用的选项是 Spring MVC 的 @RequestBody 和 @ResponseBody 注释作为控制器方法定义的一部分（利用 Jackson 库）自动将 JavaBeans 映射到 JSON 并返回（参见图 3 和图 4）。（另一种方法是使用 Direct Web Remoting 或 DWR 等专有框架，出于显而易见的原因，我不建议使用它。）

因此，我建议我咨询过的大多数团队最好完全放弃 JSP 标记库，转而采用基于 AJAX/JSON 的纯方法。

以下是我建议仅使用 AJAX/JSON（即使是整页刷新）背后的原因总结。

1.  除非您有一个非常简单的应用程序，否则您可能需要使用 AJAX 支持部分页面刷新（而不是每次页面上的某些数据需要更改时都刷新整个页面）。为此，您需要在 Java 对象 (JavaBeans) 和 JavaScript 对象 (JSON) 之间进行映射，以便在浏览器/客户端和应用程序服务器之间交换数据。因此，支持两个数据交换通道（用于全页面刷新的 JSP 标记库和用于部分页面刷新的 AJAX/JSON）可能没有多大意义。如果您必须选择一个，它必须是 AJAX/JSON，因为 JSP 标记库不适用于部分页面刷新。因此，我建议首先使用 AJAX/JSON 并放弃 JSP 标记库。但是，如果您需要更多激励，请继续阅读。

2.  我曾与分析过网络中来回传输的数据大小的团队合作，发现 JSON 消耗的网络带宽比 JavaBeans/JSP 标记库方法甚至 XML 有效负载要少得多。他们的分析对我来说似乎很有意义，因为 JSON 是一种简单的纯文本格式，没有涉及 XML 的语法开销或涉及 JavaBeans 的丰富对象开销。

3.  相对于使用 JSP 标记库操作 JavaBeans 所需的杂技（见图 1），JavaBeans 到 JSON 的映射与 Spring MVC 完全无缝，不需要任何编码（见图 2）。无论您是否使用 JSP 标记库，您都可能需要使用数据填充 JavaScript 对象，以便 jQuery 小部件使用数据。换句话说，无论您是否使用 JSP 标记库，都需要 JavaScript 对象。放弃 JSP 标记库允许您跳过第 2 步（见图）并直接使用 JSON 和相应的 JavaScript 对象，而无需使用 JSP 标记库操作 JavaBean 对象。

# ruby-on-rails - 不接受从 Rails on Heroku 发送到 HostedGraphite 的 UDP 数据包

> ID：14212381
> 
> 赞同：3
> 
> 时间：2013-01-08T09:59:20.867
> 
> 标签：ruby-on-rails, heroku, graphite

我在 Heroku 上有一个 Rails 应用程序，其中包含将 UDP 数据包（在某些用户操作上）发送到 HostedGraphite 的代码（我只是在试用免费版本）。

我已经将“socket.send”调用指向了我自己托管在其他地方的 UDP 服务器，所以我知道 UDP 数据包是从 Heroku 发送的。

我知道 HostedGraphite 的 API 密钥是正确的（检查了无数次）。

我还修改了发送数据的格式——包括和不包括行尾的“\n”（[文档](https://devcenter.heroku.com/articles/hostedgraphite)指定包含“\n”）。

我也尝试从我的开发环境发送数据包。

最后我尝试了这个：

```
echo "YOUR-API-KEY.test 1" | nc carbon.hostedgraphite.com 2003 
```

我发送数据包的红宝石代码是：

```
sock.send(data, 0, 'carbon.hostedgraphite.com', 2003) 
```

从[文档](http://ruby-doc.org/stdlib-1.9.3/libdoc/socket/rdoc/UDPSocket.html)中可以清楚地看出，Ruby 的 UDPSocket 可以处理主机名而不是 IP 地址，所以这肯定不是问题。

好的，可能没有任何 UDP 数据包真正到达……不过似乎不太可能。

除此之外，我处于死胡同，我不知道还能尝试什么。有没有其他人成功使用过这项服务（尤其是在 Heroku 上托管的 Rails 应用程序）？我开始怀疑也许我需要付钱给他们...

接下来我将把它重写为 POST to HostedGraphite（但我仍然提出这个问题，因为它是 UDP 特定的）。

我还尝试使用 curl 请求进行 POST（无法添加更多链接，因此您必须自己找到该文档），再一次，HostedGraphite 方面没有出现任何内容（您可以在其中搜索您的指标）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T12:47:45.313

我们（Hosted Graphite）刚刚修复了一个影响过去几天创建的新用户身份验证的问题，我想你被这个抓住了。

对不起，你的第一次体验很糟糕。我们正在为这种情况添加警报，这样它就不会再发生了。

我不确定在这样的论坛中提供商业支持有多好，但我们对通过电子邮件和推特的支持请求非常敏感，所以下次试试看。:)

# oracle - 在 PL/SQL 过程中创建目录

> ID：14212392
> 
> 赞同：0
> 
> 时间：2013-01-08T10:00:24.503
> 
> 标签：oracle, plsql, oracle10g

我正在寻找一种在 PL/SQL 过程中创建目录的方法。

我有一个`directory_path`我`directory_name`知道的，然后我想从中添加一个目录`directory_path`。例如 my `directory_path`is`/home/oracle`并且程序接收一个参数 , `30`。我想创建`/home/oracle/30`.

一开始，我不知道参数 30，所以我无法在启动程序之前创建目录。

是否必须使用动态 SQL 或是否有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T12:17:41.113

我在 10.2 中使用 DBMS_Scheduler 完成了这项工作，它允许您定义一个调用外部过程的“程序”——直接使用 unix 命令或更常见的是 shell 脚本。

# css - 让子 div 拉伸到具有可变宽度的父 div 的剩余宽度

> ID：14212393
> 
> 赞同：0
> 
> 时间：2013-01-08T10:00:27.207
> 
> 标签：css, html

我尝试搜索我遇到的这个确切问题，但我真的找不到任何解决方案。所以目前这就是我所在的位置：

```
<div style="min-width:800px; max-width:1280px;">
    <img style="width:300px; height:300px; display:block; float:left;"/>
    <div style="float:left;">
    </div>
</div> 
```

这就是我想要实现的目标： ![图表](../Images/56953311ad66dfeae8f49e5591272235.png)

目前，其中包含文本的 div 只是将其弹出图像正下方，这是它应该做的。我只是不知道如何得到我想要的。我一直在努力避免表格显示...

无论如何，提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:05:44.107

### 使用定位！

```
<div style="min-width:800px; max-width:1280px; position: relative; padding-left: 305px;">
    <img style="width:300px; height:300px; display:block; position: absolute; top: 0px; left: 0px;"/>
    <div style="background: white;">

    </div>
</div> 
```

### 截屏：

![](../Images/9802caf6472ac80ca121a11cf4709d4f.png)

### 小提琴：http: [//jsfiddle.net/dsRVc/](http://jsfiddle.net/dsRVc/)

* * *

### 更长的文本预览

![](../Images/29c64c874dfde51b2c40735c025ae45b.png)

### 小提琴：http: [//jsfiddle.net/dsRVc/1/](http://jsfiddle.net/dsRVc/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T10:53:31.080

你也可以试试这个：

```
<div style="min-width:800px; max-width:1280px; position:relative;">
    <img style="width:300px; height:300px; display:block; float:left; position:absolute; top:0; left:0;"/>
    <div style="margin-left:300px;">
        <!-- Now this content will grow as much as it can without disturbing the column of the image -->
    </div>
</div> 
```

# java - 在Javascript中对选择选项进行排序-基于同一行中的多个值

> ID：14212395
> 
> 赞同：2
> 
> 时间：2013-01-08T10:00:28.417
> 
> 标签：java, javascript, html

我创建了一个这样的列表框，并创建了一个有助于对数据进行排序的标题栏：

```
ID                 Name
------------------------------------------------------------
ID1                Identity One
ID2                Identity Two
ID3                Identity Three
ID4                Identity Four
------------------------------------------------------------- 
```

我需要根据 ID 和名称对上面的列表进行排序，这意味着当用户单击 ID 时，它应该根据 ID 对列表进行排序，反之亦然。但问题来自数据层，我们在一行中得到了这样的结果：

```
ID1 &nbsp;&nbsp;&nbsp:Idenitity One 
```

所以我们在选项标签中打印相同的内容，并获得如上所示的输出。生成上述输出的代码是：

```
 <select id="selSort" size="10" style="width:350px" id="rpt">
<option value = "ID1">
        ID1 &nbsp; &nbsp; Identity One
</option>
<option value = "ID2">
        ID2 &nbsp; &nbsp; Identity Two
</option>
<option value = "ID4">
        ID4 &nbsp; &nbsp; Identity Four
</option>
<option value = "ID3">
        ID3 &nbsp; &nbsp; Identity Three
</option> 
```

我的问题是如何为上述场景实现排序功能？是的，我尝试排序，但它是对整个列表框进行排序，而不是基于单个值。至少现在我能做的是格式化传入的数据，将所有 Id 放在一个数组中，将名称放在另一个数组中，因此任何指南/指针对此表示赞赏。如果我没有解释清楚，请告诉我

编辑：

代码我试图对列表框进行排序

```
function sortSelect(selElem) {
    var tmpAry = new Array();
    for (var i=0;i<selElem.options.length;i++) {
        tmpAry[i] = new Array();
        tmpAry[i][0] = selElem.options[i].text;
        tmpAry[i][1] = selElem.options[i].value;
    }
    tmpAry.sort();
    while (selElem.options.length > 0) {
        selElem.options[0] = null;
    }
    for (var i=0;i<tmpAry.length;i++) {
        var op = new Option(tmpAry[i][0], tmpAry[i][1]);
        selElem.options[i] = op;
    }
    return;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T12:01:56.667

您可以使用自定义数组排序看看这个[How to sort select base on an id ？](http://jsfiddle.net/fPnjs/1/)

这里的想法只是创建一个数组并根据其值对其进行排序，而不是根据排序值动态创建选项。

自定义排序代码

```
source.sort(function (x, y) {
  if (isAsc) 
     return y.id - x.id;
  else 
    return x.id - y.id;
}); 
```

# android - 如何在安卓手机上访问图片

> ID：14212400
> 
> 赞同：1
> 
> 时间：2013-01-08T10:00:37.490
> 
> 标签：android, python

我有一部安卓手机（Galaxy Note）。当我通过电源线将它插入我的电脑时，我在便携式设备部分显示了 GT-N7000 的条目。如何使用 python 脚本访问其文件（例如图像）？

# database-design - 从 CSV 提取数据时，ETL 工具的可行表结构是什么

> ID：14212401
> 
> 赞同：0
> 
> 时间：2013-01-08T10:00:37.747
> 
> 标签：database-design, csv, etl

我开始了一个相当令人兴奋的项目。我有这样的想法，我组织中的人员可以将 CSV 文件放入加载文件夹，然后在 Web 界面中设置加载程序。

这听起来并不特别——然而，美妙的是网络应用程序可以让用户只选择他们需要从 CSV 中提取的某些列——一旦设置，这个加载器就可以定期运行。

然后可以通过用户定义的查询转换数据，并可能加载到数据仓库中

我遇到的问题是我的暂存 CSV 数据的表结构 - 这样我就可以对其进行转换。

CSV 文件结构可以随许多列或很少列而变化，例如。

```
CLIENT    SALES COST 
Mr Smith  234   45
Mr Blogs  256   35 
```

我目前拥有的结构是

```
ID COLUMNID VALUE    FILELOADDATE
1  1        Mr Smith 2012-12-25
2  2        234      2012-12-25
3  3        45       2012-12-25
4  1        Mr Blogs 2012-12-25
5  2        256      2012-12-25
6  3        35       2012-12-25 
```

因此，如果您愿意，数据已经“未透视”，允许我存储各种 CSV 格式

我遇到的问题是现在数据已被转置我已经有效地破坏了该数据中的链接，所以我不知道销售数字与谁有关

如果我想按日期汇总销售额或按日期成本或类似的东西，我采用的方法很好

有没有不同的方法我可以解决这个问题，这样我就不会失去那个链接？我可以有另一列有行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T23:54:33.413

我想你有点回答你自己的问题，如果你添加一行（也许是一个数据集 id？，所以你可以在不同的 csv 文件之间有所不同）。然后，您还可以将 FILELOADDATE 字段移动到数据集表中

```
ID DATASETID ROWID COLUMNID VALUE    
1  1         1     1        Mr Smith 
2  1         1     2        234      
3  1         1     3        45       
4  1         2     1        Mr Blogs 
5  1         2     2        256      
6  1         2     3        35 
```

数据集表：

```
ID FILELOADDATE
1  2012-12-25 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T10:01:20.877

最近我看到了类似问题的解决方案。有：

*   一张描述数据集的表
*   一张描述列的表（CSV 文件的列）
*   数据存储表

数据集描述表的列：

```
ID
FileName
Load_TimeStamp
Name
User 
```

列描述表的列：

```
ID
dataset_id
ColumnName (csv column name)
ColumnDescription (optional)
StorageColumn (pointing to storage table column name, e.g. "varchar_1" 
```

数据表的列：

```
ID
dataset_id
varchar_1
...
varchar_20
numeric_1
...
numeric_20 
```

关键是您可以避免数据转置（您必须多次进行 - 在加载事件和每个操作事件上）。

# android - Android Facebook 登录错误 - “remote_app_id 与存储的 id 不匹配”

> ID：14212406
> 
> 赞同：0
> 
> 时间：2013-01-08T10:00:59.693
> 
> 标签：android, facebook, login

尝试使用最新的 Facebook sdk 登录时出现非常奇怪的错误：

```
Session.openActiveSession(this, true, statusCallback); 
```

我已经在 facebook/developers 中注册，创建了应用程序并正确分配了应用程序 id 和 hask 键。但我仍然收到这个奇怪的错误。我在 stackoverflow 中浏览过许多与此相关的帖子，但这与 iOS/Mac OS 更相关。我正在使用 Android，所以我没有选项在 gfacebook 应用程序设置中提及 BundleId & all。

请有人为此提出任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T05:52:40.867

我遇到了同样的问题。就我而言，这是因为我在 Facebook 上将应用程序设置为沙盒模式，但后来使用非开发人员帐户登录进行测试。

# kendo-ui - 按下另一个单元格时保存单元格更改

> ID：14212409
> 
> 赞同：0
> 
> 时间：2013-01-08T10:01:02.487
> 
> 标签：kendo-ui

我有一个具有 incell 编辑模式的剑道 ui 网格。
必需是在更改单元格中的值并在其他任何地方按确认窗口以显示以保存/取消更改时。

现在我已经设法让它部分工作。换句话说，当我更改一个值并按下网页上的某个位置或一个按钮时，我会按要求获得确认窗口。当我按下另一个单元格时，没有任何反应。按下的单元格进入编辑模式，“编辑”函数被触发，但前一个单元格失去了它的值，并且永远不会调用绑定的函数。

因此，简而言之，每次更改值并且用户按下其他任何位置时，我都需要调用我的确认函数。现在它部分工作。按下另一个单元格时似乎没有触发该功能。

我现在的来源是这样的。

```
edit: function(e) {
    e.model.unbind("change", confirmationFun).bind("change", confirmationFun);  
}

function confirmationFun(e){ 
    // open confirmation dialog and call save function  
} 
```

我试图将我的确认与 change: function(e) 结合起来，但每次按下单元格时都会触发更改，甚至在我更改值之前也是如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:25:22.250

`edit`您可以使用`blur`. 在您的初始化之后`grid`添加以下将任何绑定[`blur`](http://www.w3schools.com/jsref/event_onblur.asp)到您的`confirmationFun`函数的命令。

```
$('#grid').on("blur", "input", confirmationFun); 
```

`grid`你的`id`KendoUI在哪里`grid`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T12:50:40.760

通过从我的代码中删除**可选择**的：“多个单元格”部分最终解决了这个问题。现在通过按下不同的单元格，我会根据需要获得确认对话框。

谢谢你。

# svn - apache颠覆如何删除用户访问

> ID：14212411
> 
> 赞同：1
> 
> 时间：2013-01-08T10:01:14.173
> 
> 标签：svn

不久前，我在一台 Ubuntu 机器上安装了 apache subversion。然后，我的一位同事控制了它。最近他辞掉了工作，现在我必须删除他的用户以防止将来访问。

我读过很多帖子和谷歌很多。在 conf 文件夹下（在每个存储库中），有 authz、passwd 和 svnserve 文件，但这些文件中没有用户，我检查了是否启用了匿名访问，发现用户无法匿名访问。

我已经使用以下命令检查了有权访问存储库的用户：

```
svn log -q file:///var/subversion | grep -e '^r' | awk 'BEGIN { FS = "|" } ; { print $2 }' | sort | uniq 
```

我可以在输出中看到用户名。我还检查了 Linux 用户

```
cat /etc/passwd 
```

命令并且用户不在列表中。我还检查了 /etc/apache2 下为空的 http.conf 文件和仅包含我的测试用户的 dav_svn.passwd 文件。

我想要做的是删除这个特定的用户。有什么提示我该怎么做吗？

ps：我相信这个用户的旧提交在删除后不会丢失。那正确吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T15:43:49.630

假设，这`AuthType Basic`是使用的（如果必须将 Digest 命令更改为 htdigest 并重新检查选项）**正确的方式**必须是（根据[htpasswd doc](http://httpd.apache.org/docs/current/programs/htpasswd.html)）

*   删除用户：`htpasswd -D PASSWDFILE username`
*   替换密码（没有脚本的懒惰肮脏的解决方案，手工，可能会得到改进）：

`htpasswd -b PASSWDFILE username password`（命令中的纯文本密码）每个用户名

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T12:04:49.370

好的，我得到了答案。用于密码的文件的路径`dav_svn.conf`在`/etc/apache2/modes_available`. 当我检查路径时，文件中存在所有用户和密码。

我在要阻止的用户之前放了一个美元符号，重新启动了 apache，问题就解决了。

现在的另一个问题是，由于该人创建了所有帐户，因此他还知道​​其他用户名和密码。我想更改所有用户的密码，但是，它们都是加密的。如何更改用户密码？我应该将它们全部删除并重新添加吗？

# c# - 从列表中获得前 10 名

> ID：14212412
> 
> 赞同：-6
> 
> 时间：2013-01-08T10:01:14.900
> 
> 标签：c#, asp.net, sql, list, loops

嗨，我在获取前 10 名产品时遇到问题。

场景是：我有包含 productid 和 date 的产品表。我有方法通过 Id 获取产品并循环它，但不知道如何获取最常见的产品。

我需要从一个范围日期获得前 10 种产品。

基本上我有带有库存的产品列表和带有产品 FK 的订单列表

我从每个订单中获取产品 FK，并从所有订单中获取最常见的前十名产品。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:19:35.840

我根据我们的标签猜测您使用的是 SQL 数据库，并且根据您多次列出相同产品的问题......如果是这种情况，您可以执行以下操作：

`Select * From "table" Group By "product" order by count(*) limit 10`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T10:29:15.033

正如您在 sql 和 asp.net 中标记的那样，它应该是一个 sql server db，

您可以从产品表中获取**前**10 个产品 ID，这些产品表的日期位于两个日期之间（**如果***您输入的日期为 varchar 或文本，则需要将其转换为日期时间格式*），然后按日期**降序**排列，这样将为您提供十款最新产品。

这是一个示例代码。

```
SELECT TOP 5 Product_ID FROM Product where Product.Dates between (SELECT convert(datetime, '2012-04-17 14:42:06.273', 120)) and (SELECT convert(datetime, '2012-04-19 10:39:08.477', 120)) order by Product.Dates desc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T12:01:51.453

您可以通过创建存储过程并调用您的表来简单地选择您的产品列表。

在存储过程中，您可以使用 `ORDER BY`

例如从句。

```
SELECT * FROM PRODUCT_TABLE ORDER BY DATE_COLUMN 
```

谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T14:54:39.573

这可能会有所帮助。您可以按日期对两个查询进行分区：

```
-- Top n-paid in all Depts:
SELECT * FROM 
 ( SELECT deptno, ename, sal
    , ROW_NUMBER() OVER (order by sal desc, ename) as row_num
    --, RANK () OVER (PARTITION BY deptno ORDER BY sal desc) ranks
    --, DENSE_RANK () OVER (PARTITION BY deptno ORDER BY sal desc) d_ranks
   FROM scott.emp )
WHERE row_num  <= 10 -- TOP 10 in all depts --

-- Between rows --
SELECT * FROM 
   ( SELECT deptno, ename, sal, ROW_NUMBER() OVER (ORDER BY ename) Row_Num FROM scott.emp)
  WHERE Row_Num BETWEEN 5 and 10 
```

# javascript - jQuery 更改回调上下文

> ID：14212414
> 
> 赞同：1
> 
> 时间：2013-01-08T10:01:25.727
> 
> 标签：javascript, jquery

我想知道如何更改 jQuery 回调函数的上下文，`this`使其与父函数中的上下文相同。

举个例子：

```
var context = this;
console.log(context);

element.animate(css, speed, type, function () {
     var new_context = this;
     console.log(new_context);
}); 
```

我将如何使它`new_context`等于`context`？

我意识到我可以这样做：

```
var new_context = context; 
```

但是有没有更好的方法来告诉函数使用不同的上下文？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:02:58.423

您可以利用闭包：

```
var context = this;
console.log(context);

element.animate(css, speed, type, function () {
     var new_context = context; // Closure
     console.log(new_context);
}); 
```

你也可以这样做：

```
// First parameter of call/apply is context
element.animate.apply(this, [css, speed, type, function () {
     var new_context = this;
     console.log(new_context);
}]); 
```

# compass-geolocation - 在三星平板电脑中强制指南针北向肖像

> ID：14212416
> 
> 赞同：1
> 
> 时间：2013-01-08T10:01:32.640
> 
> 标签：compass-geolocation

我已经实现了一个只能在纵向模式下工作的应用程序。该应用程序有一个指南针，我们知道三星平板电脑（例如：samsung Galaxy Tab 2）和移动设备中的指南针工作方式不同，一个是横向的北（0º），另一个是纵向的。

我们需要全部都处于纵向模式，换句话说，我们希望 NORTH (0º) 在 PORTRAIT 中。有人有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T21:09:49.667

我在 Galaxy Note 上遇到了同样的问题，并遵循了有关如何确定平板电脑或手机的建议。这是另一个帖子，但不记得链接了。代码如下所示：

```
DisplayMetrics metrics = this.getResources().getDisplayMetrics();
int screenWidth = metrics.widthPixels;
    int screenHeight = metrics.heightPixels;
    double inches = Math.sqrt((metrics.widthPixels * metrics.widthPixels)
            + (metrics.heightPixels * metrics.heightPixels))
            / metrics.densityDpi;
    // tablets typically larger than 6"" diagonally
    // this is attempt to orient both player and magnetic sensors
    if (inches > 6) {
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
    } else
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); 
```

完成此操作后，我翻译了 sensorlistener 代码中的方位角设置：

```
 public void onSensorChanged(SensorEvent event) {
        // Note: Not all sensor events will supply both accelerometer and
        // mag-field
        int s = event.sensor.getType();
        switch (s) {
        case Sensor.TYPE_ACCELEROMETER:
            aValues = lowPass(event.values.clone(), aValues);
            break;
        case Sensor.TYPE_MAGNETIC_FIELD:

            mValues = lowPass(event.values.clone(), mValues);
            break;
        }

        float[] R = new float[16]; // Rotation Matrix result goes here
        float[] I = new float[9]; // Inclination Matrix result goes here
        float[] oValues = new float[3]; // used for new orientation

        boolean success = SensorManager.getRotationMatrix(R, I, aValues,
                mValues);
        // if both aValues and mValues are not null success will be true
        // Also returns the Inclination Matrix

        if (success) {
            // Now get the device's orientation from the Rotation and
            // Inclination Matrices
            SensorManager.getOrientation(R, oValues);

            // Change Radians to Degrees
            oValues[0] = (360 + (float) Math.toDegrees(oValues[0])) % 360;
            oValues[1] = (float) Math.toDegrees(oValues[1]);
            oValues[2] = (float) Math.toDegrees(oValues[2]);
            azimuth = oValues[0];//
            y_az = oValues[1];// orientationValues[1];
            z_az = oValues[2];// =

            // test portrait or landscape (different on Tablets)
            int test = getResources().getConfiguration().orientation;
          // if necessary, azimuth = azimuth+270f  or + 90f %360
            heading.setText("X:" + Math.round(azimuth) + " Y:"
                    + Math.round(y_az) + " Z: " + Math.round(z_az)
                    + " degrees");

        }
    } 
```

我最终让平板电脑保持横向模式，因为大多数用户会以这种方式定位它，而北方位于景观的顶部。我希望我的菜鸟代码（在其他人的大量帮助下）可以帮助你。

# android - 如何将数据从 android 发送到 SQL Server 2008？

> ID：14212419
> 
> 赞同：1
> 
> 时间：2013-01-08T10:01:39.210
> 
> 标签：android, asp.net, json, web-services, c#-4.0

我创建了一个网站和 android applcation，并使用了 SQL Server 2008 支持。我使用 Web 服务来显示从服务器到 android 应用程序的数据，因为我使用了 JSON 和 ksoap 库，它工作正常。我可以显示从服务器到安卓的数据。但现在我想将数据从 android 应用程序存储到 SQL Server 2008。所以任何人都请告诉我步骤或我该怎么做。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:04:53.037

您可以通过 Web 服务连接到 SQL Server 数据库。

这是调用 web 服务的示例代码。

```
String url = "your_webservice_URL";

 try 
 {
    HttpPost loginHttpPost   = new HttpPost(url); 
    HttpContext localContext = new BasicHttpContext();          

    MultipartEntity multipartContent = new MultipartEntity();
    multipartContent.addPart("parameter1", new StringBody(value1));
    multipartContent.addPart("parameter2", new StringBody(value2));
    loginHttpPost.setEntity(multipartContent);

    HttpClient objHttpClient = new DefaultHttpClient();
    HttpResponse response = objHttpClient.execute(loginHttpPost,localContext);
 } 
 catch (IOException e) {
     e.printStackTrace();} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T10:13:58.533

这是示例源代码**`Connect Android to SQL sever via WCF using JSON`**

例子 ：

[1\. 将 Android 连接到 SQL Server](http://www.mediafire.com/?ocmzcc4jl9blsrh)

[2\. 使用 XML 获取数据](http://p-xr.com/android-tutorial-how-to-parseread-xml-data-into-android-listview/)

[3\. 使用 JSON 获取数据](http://p-xr.com/android-tutorial-how-to-parse-read-json-data-into-a-android-listview/)

[- 使用 WCF 服务将数据插入数据库](http://www.c-sharpcorner.com/UploadFile/rohatash/inserting-data-into-database-using-wcf-service/)

# javascript - jqPlot 条形图在 Chrome 和 Mozilla 中不显示

> ID：14212420
> 
> 赞同：0
> 
> 时间：2013-01-08T10:01:47.317
> 
> 标签：javascript, jquery, spring-mvc, jqplot

我正在尝试使用 jqPlot 条形图显示条形图。我正在编写在 Internet Explorer 中显示图表的代码。但是对于相同的代码图表不会显示在 Crome 和 Mozilla 浏览器中。我已经给出了下面的代码 -

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ page session="false" %>
<html>
<head>
<style>
<title>Home</title>
<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script src="https://github.com/douglascrockford/JSON-js/blob/master/json2.js">           </script>
<script type="text/javascript" src="../resources/jQuery/jquery.min.js"></script>
<script type="text/javascript" src="../resources/jQuery/jquery.jqplot.min.js"></script>
<script type="text/javascript" src="../resources/jQuery/plugins/jqplot.barRenderer.min.js"></script>
<script type="text/javascript" src="../resources/jQuery/plugins/jqplot.pieRenderer.min.js"></script>
<script type="text/javascript" src="../resources/jQuery/plugins/jqplot.categoryAxisRenderer.min.js"></script>
<script type="text/javascript" src="../resources/jQuery/plugins/jqplot.pointLabels.min.js">   </script>
<link rel="stylesheet" type="text/css" href="../resources/jQuery/jquery.jqplot.min.css" />

<script>
function drawChart() {
alert("In draw chart");
  var s1 = [2, 6, 7];
  var s2 = [7, 5, 3];
  var s3 = [2, 3, 5];
  var s4 = [1, 7, 2];

  // chart data
  var dataArray = [s1, s2, s3, s4];

  // x-axis ticks
  var ticks = ['Jan', 'Feb', 'Mar'];

  // chart rendering options
  var options = {
    seriesDefaults: {
      renderer:$.jqplot.BarRenderer
    },
    axes: {
      xaxis: {
        renderer: $.jqplot.CategoryAxisRenderer,
        ticks: ticks
      }
    }
  };

  // draw the chart
  $.jqplot('showData', dataArray, options);
}// end
</script>
</head>
<body>

<button value="Get Employee Data" onclick="drawChart()">Get Chart</button>
<div id="showData" style="height: 400px; width: 400px;"></div>

</body>
</html> 
```

为什么此代码不适用于 Crome 和 Mozilla 浏览器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T05:06:23.910

我能够通过以下方式获得在 IE9、FF 和 Chrome 中显示的图表：

1.  移除 `<style>`标签。此标记阻止在所有浏览器中显示任何内容。
2.  `<!DOCTYPE html>`在文件顶部添加。这防止了 IE9 中的错误。

此外，您链接的方式`json2.js`实际上是检索显示文件的 Github 页面，而不是实际文件本身。

# database - Corona：无法从数据库中删除表

> ID：14212427
> 
> 赞同：0
> 
> 时间：2013-01-08T10:01:58.567
> 
> 标签：database, sqlite, coronasdk

我有这段代码：

```
local path = system.pathForFile("data.db", system.DocumentsDirectory)
db = sqlite3.open( path )

local tablesetup = [[DROP TABLE score_floors;]]
db:exec( tablesetup )

for row2 in db:nrows("SELECT * FROM score_floors") do
   print("---->ID: " .. row2.id )
end 
```

输出显示来自“删除表”的数据

任何人都可以帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-01-08T11:24:23.440

我找到了解决方案：

表名不能有 '_' 字符

# iphone - 在启动画面后显示下一个视图

> ID：14212431
> 
> 赞同：0
> 
> 时间：2013-01-08T10:02:09.640
> 
> 标签：iphone, objective-c, ios, cocoa-touch

我想在 iphone 的默认启动视图启动后加载我选择的视图。有人知道如何实现这一目标吗？我是 xcode 和 ios 开发的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:19:10.483

Add `[self setUpSplash];` method in `- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions` method. And add following **Three** method in **AppDelegate.m**

```
-(void) setUpSplash {
    self.splashImgView = [[UIImageView alloc] initWithFrame:[[UIScreen mainScreen] applicationFrame]];
    [self.splashImgView setImage: [UIImage imageNamed:@"splash.png"]];
    [self.window addSubview: self.splashImgView];

    [NSTimer scheduledTimerWithTimeInterval:2.0f target:self selector:@selector(closeSplashWithTimer:) userInfo:nil repeats:NO];
}

- (void)closeSplashWithTimer:(NSTimer *)theTimer
{
    [UIView beginAnimations:@"ToggleViews" context:nil];
    [UIView setAnimationDuration:1.0];

    // Make the animatable changes.
    splashImgView.alpha = 0.0;
    self.mvNavigationController.view.alpha = 1.0;

    // Commit the changes and perform the animation.
    [UIView commitAnimations];

    [NSTimer scheduledTimerWithTimeInterval:2.0f target:self selector:@selector(closeSplashWithTimerAgain:) userInfo:nil repeats:NO];
}

- (void)closeSplashWithTimerAgain:(NSTimer *)theTimer
{
    [self.splashImgView removeFromSuperview];
} 
```

# java - 如何从 Facebook 获取个人资料图片

> ID：14212433
> 
> 赞同：1
> 
> 时间：2013-01-08T10:02:09.640
> 
> 标签：java, android, facebook

我正在编写一个 android 应用程序，我想在其中获取我所有 facebook 朋友的列表以及他们的姓名和个人资料图片。

在我的示例代码中，我得到了我朋友的名字，但没有得到个人资料图片，请告诉我我遇到这个问题的原因：

```
 @Override
    public View getView(int position, View convertView, ViewGroup parent) {
    View v = convertView;

    if (v == null) {
        v = inflater.inflate(R.layout.contact_tab, parent, false);
    }

    if (position >= myFriends.size()) {
        return v;
    }

    MyFriend friend = myFriends.get(position);
    ImageView icon_pic = (ImageView) v.findViewById(R.id.icon_pic);
    try {
        URL url = new URL(friend.getPic());
        InputStream is = (InputStream) url.getContent();
        Drawable image = Drawable.createFromStream(is, "fb");
        icon_pic.setImageDrawable(image);
    } catch (Exception e) {
        Log.v(TAG, "myadapter: " + e.getMessage());
    } 
```

我的Facebook.java

```
 public void init(Main main) {
    this.main = main;
    mFacebook = new Facebook(APP_ID);
    isReady = false;
    mAsyncRunner = new AsyncFacebookRunner(mFacebook);
    mFacebook.authorize(main, new String[] { "publish_stream",
            "friends_birthday", "friends_photos"  }, new MyAuthorizeListener());
}

// ref- http://developers.facebook.com/docs/reference/api/user/
public Report reLoadAllFriends() {
    if (!isReady) {
        Log.v(TAG, "myfacebook.reloadallfriends Not ready yet!");
        return new Report(false, "Not ready yet!");
    }

    Bundle params = new Bundle();
    params.putString("fields", "id,name,birthday,picture");
    mAsyncRunner.request("me/friends", params, new MyRequestListener(
            RequestType.FRIEND_LIST));

    Log.v(TAG, "myfacebook.reloadallfriends Fetch started.");
    return new Report(true, "Fetch started");
}

public List<MyFriend> getAllFriends() {
    return getFilteredFriends(null);
}

public List<MyFriend> getFilteredFriends(com.january.floogoo.Filter week) {
    return Main.db.getFriendsFilteredBy(week);
}

public List<Map<String, String>> getAllFriendsAsMap() {
    return getFilteredFriendsAsMap(null);
}

public List<Map<String, String>> getFilteredFriendsAsMap(Filter filterBy) {
    List<MyFriend> friendList = Main.db.getFriendsFilteredBy(filterBy);

    List<Map<String, String>> list = new ArrayList<Map<String, String>>();
    for (MyFriend friend : friendList) {
        list.add(friend.getMap());
    }
    return list;
}

public void post(String receiver, String message) {
    if (isReady) {
        Bundle params = new Bundle();
        params.putString("message", message);

        mAsyncRunner.request(receiver + "/feed", params, "POST",
                new MyRequestListener(RequestType.FEED_POST));
    }
}

class MyAuthorizeListener extends BaseDialogListener {
    public void onComplete(Bundle values) {
        Log.i(TAG, "Authorization successfull");
        isReady = true;
        main.loadContents();
    }
}

class MyRequestListener extends BaseRequestListener {
    private RequestType type;

    public MyRequestListener(RequestType type) {
        this.type = type;
    }

    public void onComplete(final String response) {
        try {
            switch (type) {
            case FRIEND_LIST:
                 Log.d(TAG, "myfacebook.friendlist Response: "
                 + response.toString());
                myFriends.clear();
                JSONArray jarr = Util.parseJson(response).getJSONArray(
                        "data");
                for (int i = 0; i < jarr.length(); i++) {
                    JSONObject json = jarr.getJSONObject(i);
                    String fbID = json.getString("id");
                    String name = json.getString("name");
                    String bday = json.optString("birthday");
                    String pic = json.getString("picture");

                    myFriends.add(new MyFriend(fbID, name, bday, pic));
                }
                main.notifyMain(Note.FRIENDLIST_RELOADED); 
                break;
            case FEED_POST:
                Log.d(TAG, "myfacebook.feedpost Response: "
                        + response.toString());
                break;
            default:
                break;
            }
        } catch (JSONException e) {
            Log.e(TAG, "JSONException: " + e.getMessage());
        } catch (FacebookError e) {
            Log.e(TAG, "FacebookError: " + e.getMessage());
        }
    }
} 
```

==================================================== =================

```
 ImageView icon_pic = (ImageView) v.findViewById(R.id.icon_pic);
     try{
     URL img_value = null;
     String id = null;
 img_value = new URL
      ("http://graph.facebook.com/"+id+"/picture?type=large");            
       Bitmap mIcon = BitmapFactory.decodeStream
        (img_value.openConnection().getInputStream());
     icon_pic.setImageBitmap(mIcon);
     }catch (Exception e) {
            Log.v(TAG, "myadapter: " + e.getMessage());
        } 
```

==================================================== =====================

原始代码在这里：

[https://github.com/prajwol/Birthday-Reminder](https://github.com/prajwol/Birthday-Reminder)

我的应用程序中有两个包，第一个 - *com.january.floogoo* [我的自定义类包]

第二个 - *com.facebook.android* [与 facebook SDK 相关的类]

我在**com.facebook.android**包中使用了 10 个类，即：

1.  *AsyncFacebookRunner.java*

2.  *BaseDialogListener.java*

3.  *BaseRequestListener.java*

4.  *DialogError.java*

5.  *脸书.java*

6.  *FacebookError.java*

7.  *FbDialog.java*

8.  *会话事件.java*

9.  *会话存储.java*

10.  *实用程序.java*

我的问题是我错过了什么吗？如果是的话，请帮助我...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T11:53:38.140

尝试与..

```
 ImageView icon_pic = (ImageView) v.findViewById(R.id.icon_pic);
 URL img_value = null;
 img_value = new URL("http://graph.facebook.com/"+id+"/picture?type=large");
 Bitmap mIcon = BitmapFactory.decodeStream(img_value.openConnection().getInputStream());
 icon_pic.setImageBitmap(mIcon); 
```

其中 id 是您的朋友个人资料 ID 之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T07:00:50.837

使用以下链接从 facebook 获取个人资料图片。

[https://github.com/chrtatu/FacebookFriendsList](https://github.com/chrtatu/FacebookFriendsList) 登录后您将获得好友图片列表。

FriendsList.Java 是您的 facebook 好友同步的类。

# c# - 公共静态，公共和静态方法有什么区别？

> ID：14212437
> 
> 赞同：3
> 
> 时间：2013-01-08T10:02:23.783
> 
> 标签：c#, asp.net-mvc-3

我对 C# 中的方法范围以及 ASP.Net 中的最佳案例用法有一些相关问题：

1.  在**C#**中，有什么区别：
    *   一种`public static`方法
    *   一种`public`方法
    *   一种`static`方法
2.  我正在使用**MVC**和**Web 服务**；就我的问题 #1 中的方法范围而言，每种`method scope`类型的内存占用情况会产生什么差异，例如，`static`在使用后会释放函数内存吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-08T10:19:47.510

`public`本身意味着这是一个基于实例的成员，外部调用者（可以访问类型本身的那些）可以访问。

`static`本身意味着该成员不是基于实例的：您可以在不需要任何特定实例（甚至根本不需要任何实例）的情况下调用它；如果没有可访问性限定符，则假定为非公开 - 因此外部调用者将无法访问该成员。

`public static`是一种*可供*外部调用者访问的`static`方法。

 *两种情况下的内存使用是相同的：方法中声明的任何变量都被限定为方法调用本身（作为实现细节：通过堆栈；另外：我假设没有“捕获的变量”，也没有`async`使用`yield`），

其中没有任何内容特定于 ASP.NET / MVC。然而，控制器上的“动作”方法是，IIRC，预计是公共/实例，所以有*修饰符*`public`，*没有*`static`修饰符。

基本上：

可访问性：

*   未指定：默认为“private”（或外部类的“internal”）
*   “private”：仅适用于该类型内的代码
*   “受保护”：可用于该类型或子类型内的代码
*   “内部”：可用于同一程序集中的代码
*   “受保护的内部”：“受保护”**或**（联合）“内部”
*   “public”：可供所有有权访问该类型的调用者使用

静态/等：

*   未指定：基于实例；需要一个实例，并且代码可以自动访问实例成员（通过`this.`）和`static`成员
*   “静态”：不需要实例；代码只能自动访问`static`成员

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T10:04:12.383

没有访问说明符的静态方法将是私有的。您无法在课堂外访问它。

考虑下面的课程。

```
class TestClass
{
    public int MyProperty { get; set; }
    static void SomeStaticMethod()
    {
    }

    public static void SomeOtherStaticMethod()
    {
        SomeStaticMethod(); // You can use the static method inside
    }

    public void InstanceMethod()
    {
        SomeStaticMethod();
    }
} 
```

当你使用它时：

```
TestClass tc = new TestClass();
tc.InstanceMethod();
TestClass.SomeOtherStaticMethod();
TestClass.SomeStaticMethod(); // Thats an error because SomeStaticMethod is private and not accessible 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-08T10:10:48.743

默认情况下，类成员是私有的，因此如果您不指定静态方法是公共的，您将无法从类外部访问您的方法。

有关访问修饰符的更多信息，请参阅： [访问修饰符（C# 编程指南）](http://msdn.microsoft.com/en-us/library/ms173121.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T10:25:19.863

人们很乐意为您提供示例，但是这些内容已经在 Internet 上进行了详细记录，并且非常简单的搜索可以得出明确的结果。让我放纵你，找到关于主题的 MSDN 参考（两个主题，顺便说一下，成员访问和非实例成员没有严格相关）：

首先你有[访问修饰符](http://msdn.microsoft.com/en-us/library/ms173121.aspx)，特别`public`是在这种情况下：

> **上市**
> 
> 类型或成员可以由同一程序集或引用它的另一个程序集中的任何其他代码访问。

成员是否是这种情况`static`，这是无关紧要的。

然后你有[静态的、非实例的东西](http://msdn.microsoft.com/en-us/library/79b3xss3%28v=vs.80%29.aspx)：

> **静止的**
> 
> 静态类和类成员用于创建无需创建类实例即可访问的数据和函数。静态类成员可用于分隔独立于任何对象标识的数据和行为

因此，任何差异都是可能的访问和“实例”规则的组合。

内存管理是另一回事。无论访问和上下文如何，没有一种方法、属性、字段会神奇地减少内存，这是您作为开发人员必须在每一行代码中考虑的事情（在编码时借助 CLR 的内置内存管理适当）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T10:04:21.387

`public`是访问修饰符。所以无论在哪里应用它都是指范围。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-08T10:04:49.683

```
static Foo 
```

不是公开的，这意味着它在课堂之外是不可见的。*

# types - 方法的可空返回类型

> ID：14212442
> 
> 赞同：0
> 
> 时间：2013-01-08T10:02:39.207
> 
> 标签：types, nullable

嘿，只是为了好奇..如果我有一个返回类型为 nullable int 的方法：int？当我调用该方法时，我可以通过 2 种方式进行调用： var v=method(); 还有方法（）。

有人可以给我一些论据，为什么第二种情况是可能的？这是因为可空类型？还是 .NET Framework 4 的某些功能？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-04-08T11:34:15.977

开始

`T?`是泛型类的简短表示`Nullable<T>`

它是原始类型的包装器，因为它们不可为空。(char byte bool int float long double)

```
public Nullable<int> x; // x = null
public int x; // x = 0 
```

你可以写长或短的方式。

```
public Nullable<int> x;
public int? x; 
```

关于提问。

```
public int? getValue();

var x = getValue();
getValue(); // why is this allowed 
```

因为它在任何语言的任何地方都是这样工作的。

# highcharts - FullCalendar 与 HighCharts 集成

> ID：14212443
> 
> 赞同：0
> 
> 时间：2013-01-08T10:02:41.993
> 
> 标签：highcharts, fullcalendar

有没有人成功地将[HighCharts](http://www.highcharts.com/)与[FullCalendar](http://arshaw.com/fullcalendar/)集成？

目前我使用文本在每月视图中显示数据。我想用 HighCharts js 库生成的饼图替换它们。

FullCalendar 使用 EventSource 加载事件。我从我的`MVC controller`. 要在事件标题中启用 HTML，我使用[此处提到的解决方案](http://code.google.com/p/fullcalendar/issues/detail?id=152)

我尝试使用[DotNet.HighCharts 库](http://dotnethighcharts.codeplex.com/)并返回`chart.ToHtmlString()`作为事件标题，但我不断收到下面的 js 错误：

```
Unhandled exception at line 117, column 483 in 
    /Scripts/Highcharts-2.3.5/js/highcharts.js
0x800a138f - JavaScript runtime error: 
    Unable to get property 'length' of undefined or null reference 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T09:42:37.997

我得到了这个工作。问题出在 DotNet.HighCharts 库上。返回的图表脚本 (chart.ToHtmlString()) 与最新版本的 HighCharts JS 脚本存在问题。相反，我删除了 DotNet.HighCharts 库并在我的控制器中构建了 Chart JS 脚本，它工作正常。

# iphone - 关于在 Object C 中实现 FloodFill 算法

> ID：14212449
> 
> 赞同：0
> 
> 时间：2013-01-08T10:03:03.570
> 
> 标签：iphone, ios

我对 IOS 很陌生，我正在为 iPhone 和 iPad 开发一个有趣的绘画应用程序，它使用 Object - C。

该应用程序将允许您触摸图像，然后它将用您选择的颜色（油漆桶工具）用您触摸的像素填充所有接近且相同的颜色像素。

我知道 Floodfill 算法是我需要的，但我真的被困在如何实现 FloodFill 算法来填充我想要的区域的颜色。

我也看到了[那个](https://github.com/cenphoenix/ObjFloodFill/tree/master/src)，但它只有 2 个文件，没有任何描述，我尝试使用它，但我没有成功。

我想要的只是将图像（就像[那个](http://www.dragoart.com/tuts/pics/9/2685/11657/how-to-draw-a-cartoon-bull-step-6.jpg)）加载到 ImageView ，当我触摸 ImageView 时它会填充颜色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:06:01.553

如果您使用 UIBezierPath 进行绘图，您可以使用它的 -fill 方法来填充形状。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T10:54:34.437

您可以通过访问 UIImage 的 CGImage 来获取它的字节数据。

从这里你可以找到被触摸的像素的颜色。

然后它只是从被触摸的像素运行一个简单的洪水填充算法的一个例子。

获取像素颜色...[如何从 UIImage (Cocoa Touch) 或 CGImage (Core Graphics) 获取像素数据？](https://stackoverflow.com/questions/448125/how-to-get-pixel-data-from-a-uiimage-cocoa-touch-or-cgimage-core-graphics)

洪水填充算法... [http://en.wikipedia.org/wiki/Flood_fill](http://en.wikipedia.org/wiki/Flood_fill)

我可能会自己做这件事，而不是寻找框架或任何东西。

# asp.net-mvc - 预编译 Hogan.js 模板化服务器端 ASP.NET MVC

> ID：14212451
> 
> 赞同：4
> 
> 时间：2013-01-08T10:03:05.923
> 
> 标签：asp.net-mvc, template-engine, hogan.js

我正在查看 Twitter 上的 Hogan.js。

[http://twitter.github.com/hogan.js/](http://twitter.github.com/hogan.js/)

他们谈论能够通过服务器预编译模板，我理解这可能是一个性能增益。

目前，每次渲染模板时，我都会在 AJAX 命中服务器以获取数据后执行以下操作：

```
 var template = Hogan.compile($('#seasonsTmpl').html());
     $('#main').html(template.render(data)); 
```

给定以下模板：

```
<script type="text/html" id="seasonsTmpl">

     <ul>
    {{#season}}
        <li>{{.}}</li>
    {{/season}}
    </ul>

</script> 
```

如何使用 ASP.MVC 后端“预编译”服务器端？这是不可能的，因为它似乎以使用为中心`Node.js`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:26:43.903

您有正确的想法来优化您的模板。有两个选项，选择可能取决于您是要在客户端还是服务器端呈现模板。

如果你想在客户端渲染它们，你可以使用 Hogan.js 进行真正的预编译。是的，这不能在 .NET 上运行，但我认为您误解了何时可以进行预编译。您可以在构建过程中预先编译模板，而不是期望它发生在每个 Web 请求或页面加载上。你*会*需要安装 node 和 npm 来设置它，但你只需要在你自己的机器上本地运行它，或者如果你使用一个构建盒。每当您更新模板时，您都将再次运行 Hogan 来更新输出文件。编译后的输出将是一个 JavaScript 文件，其中包含为以后使用而优化的函数。这些函数包括您的模板字符串，以及将数据呈现为小胡子的逻辑。然后，您可以像任何其他 JavaScript 包含一样包含输出文件，或者如果您这样做，则将其与其他源一起包含以进行缩小。

第二个选项是在服务器端呈现模板。这与预编译不同，服务器将为每个 Web 请求再次编译和呈现模板。离开 Hogan.js，看看 Nustache 之类的 .NET 替代方案。Mustache 的伟大之处在于它有一个规范，并且已被移植到多种服务器端语言。

就渲染发生的位置而言，这些选项存在根本差异。您甚至可能希望在某些情况下利用这两种方法，例如，如果您想使用 Nustache 在服务器端呈现初始页面加载，但必须使用通过 Hogan 预编译的模板在浏览器中呈现动态元素。

更多信息： [Github 上的 Nustache](https://github.com/jdiamond/Nustache)

我希望这个对你有用！

# java - 在运行 Hadoop MapReduce 作业时获取文件名/文件数据作为 Map 的键/值输入

> ID：14212453
> 
> 赞同：2
> 
> 时间：2013-01-08T10:03:11.623
> 
> 标签：java, hadoop, mapreduce

我经历了[如何在运行 Hadoop MapReduce 作业时将文件名/文件内容作为 MAP 的键/值输入的问题？](https://stackoverflow.com/questions/5716138/how-to-get-filename-file-contents-as-key-value-input-for-map-when-running-a-hado)这里。虽然它解释了这个概念，但我无法成功地将其转换为代码。

基本上，我希望文件名作为键，文件数据作为值。为此，我`RecordReader`按照上述问题中的建议编写了一个自定义。但是我不明白如何在这个类中获取文件名作为键。另外，在编写自定义`FileInputFormat`类时，我无法理解如何返回`RecordReader`我之前编写的自定义。

`RecordReader`代码是：

```
import java.io.IOException;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.mapreduce.InputSplit;
import org.apache.hadoop.mapreduce.RecordReader;
import org.apache.hadoop.mapreduce.TaskAttemptContext;

public class CustomRecordReader extends RecordReader<Text, Text> {

    private static final String LINE_SEPARATOR = System.getProperty("line.separator");

    private StringBuffer valueBuffer = new StringBuffer("");
    private Text key = new Text();
    private Text value = new Text();
    private RecordReader<Text, Text> recordReader;

    public SPDRecordReader(RecordReader<Text, Text> recordReader) {
        this.recordReader = recordReader;
    }

    @Override
    public void close() throws IOException {
        recordReader.close();
    }

    @Override
    public Text getCurrentKey() throws IOException, InterruptedException {
        return key;
    }

    @Override
    public Text getCurrentValue() throws IOException, InterruptedException {
        return value;
    }

    @Override
    public float getProgress() throws IOException, InterruptedException {
        return recordReader.getProgress();
    }

    @Override
    public void initialize(InputSplit arg0, TaskAttemptContext arg1)
            throws IOException, InterruptedException {
        recordReader.initialize(arg0, arg1);
    }

    @Override
    public boolean nextKeyValue() throws IOException, InterruptedException {

        if (valueBuffer.equals("")) {
            while (recordReader.nextKeyValue()) {
                valueBuffer.append(recordReader.getCurrentValue());
                valueBuffer.append(LINE_SEPARATOR);
            }
            value.set(valueBuffer.toString());
            return true;
        }
        return false;
    }

} 
```

不完整的`FileInputFormat`课程是：

```
import java.io.IOException;
import org.apache.hadoop.fs.FileSystem;
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.mapred.FileInputFormat;
import org.apache.hadoop.mapred.InputSplit;
import org.apache.hadoop.mapred.JobConf;
import org.apache.hadoop.mapred.RecordReader;
import org.apache.hadoop.mapred.Reporter;

public class CustomFileInputFormat extends FileInputFormat<Text, Text> {

    @Override
    protected boolean isSplitable(FileSystem fs, Path filename) {
        return false;
    }

    @Override
    public RecordReader<Text, Text> getRecordReader(InputSplit arg0, JobConf arg1,
            Reporter arg2) throws IOException {
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:51:27.340

在你的`CustomRecordReader`课堂上有这个代码。

```
private LineRecordReader lineReader;

private String fileName;

public CustomRecordReader(JobConf job, FileSplit split) throws IOException {
    lineReader = new LineRecordReader(job, split);
    fileName = split.getPath().getName();
}

public boolean next(Text key, Text value) throws IOException {
    // get the next line
    if (!lineReader.next(key, value)) {
        return false;
    }    

    key.set(fileName);
    value.set(value);

    return true;
}

public Text createKey() {
    return new Text("");
}

public Text createValue() {
    return new Text("");
} 
```

删除`SPDRecordReader`构造函数（这是一个错误）。

`CustomFileInputFormat`并在您的班级中有此代码

```
public RecordReader<Text, Text> getRecordReader(
  InputSplit input, JobConf job, Reporter reporter)
  throws IOException {

    reporter.setStatus(input.toString());
    return new CustomRecordReader(job, (FileSplit)input);
} 
```

# c# - StackOverflow 在我的洪水填充中

> ID：14212457
> 
> 赞同：2
> 
> 时间：2013-01-08T10:03:35.763
> 
> 标签：c#, stack-overflow, flood-fill

我目前正在创建一个用于锻炼的小绘画程序。现在我正在尝试做油漆桶工具，或者换句话说，洪水填充。有趣的是：如果必须填充的像素数量很少，一切正常。如果填充像素的讨厌数量更高，它会给我一个 SO-Exception。这是我的代码：

```
private void FloodFill(Bitmap picture, int x, int y)
{
  if (x <= 0 || y <= 0 || x >= DrawingPanel.Width || y >= DrawingPanel.Height)
  {
    return;
  }

  if (picture.GetPixel(x, y) != löschFarbe)
  {
    return;
  }

  if (picture.GetPixel(x, y) == löschFarbe)
  {
    picture.SetPixel(x, y, ColorButton.BackColor);
  }

  FloodFill(picture, x + 1, y);
  FloodFill(picture, x, y + 1);
  FloodFill(picture, x - 1, y);
  FloodFill(picture, x, y - 1);
  FloodFill(picture, x + 1, y + 1);
  FloodFill(picture, x - 1, y + 1);
  FloodFill(picture, x + 1, y - 1);
  FloodFill(picture, x - 1, y - 1);
} 
```

“löschFarbe”是被点击的颜色（将被其他颜色擦除/覆盖）

发生错误：如果我想填充完整的图片或很大的空间，我会在这里得到一个错误：

```
if (picture.GetPixel(x, y) != löschFarbe)
  {
    return;
  } 
```

任何人都知道我该如何解决这个问题？

顺便说一句，这是我的程序的图片： ![画](../Images/ecdf5bdd43d860eae01f2f2f26c6aeff.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T10:07:37.993

即使是中等大小的 Floodfill 也会炸毁你的调用堆栈。

尝试将此基于递归的方法转换为基于堆栈的方法，如[本问题所示](https://stackoverflow.com/questions/159590/way-to-go-from-recursion-to-iteration)。

# php - 获取magento中的所有产品数据

> ID：14212460
> 
> 赞同：-2
> 
> 时间：2013-01-08T10:03:43.963
> 
> 标签：php, arrays, zend-framework, magento, get

嗨，我从我的代码中获得了特定**产品 ID的****特定****产品** 数组，我**想**获取**所有****产品数组**..... 我的代码是

 *******```
**<?php
@ob_start();
@session_start();
ini_set('display_errors', 1);
//for order update
include '../../../../app/Mage.php';
Mage::app('default');
echo '<pre>';
if(isset($_REQUEST['productid'])){
$productId = $_REQUEST['productid'];
}else{
$productId = '12402'; // product ID 10 is an actual product, and used here for a test
}
$product = Mage::getModel('catalog/product')->load($productId);  //load the product     
echo 'product_id '.'=>'.$product->getId().'<br/>';                                        
?>** 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T10:13:05.450

你想要什么？$product 不是数组，它是一个对象。如果您想拥有所有产品，可以使用此代码：

```
$collection = Mage::getResourceModel('catalog/product_collection');
foreach($collection as $product) {
    echo $product->getId();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-08T13:14:18.280

在这里，我已经放置了如何获取所有产品的名称，同样您可以获得所需的属性。

```
$collection = Mage::getModel('catalog/product')
                        ->getCollection()
                        ->addAttributeToSelect('*');

foreach ($collection as $product) {

    echo $product->getName() . "<br />";

    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-06T16:22:19.433

```
function products($category_id){
    $json = array('success' => true, 'products' => array());
    $category = Mage::getModel ('catalog/category')->load($category_id);
    $products = Mage::getResourceModel('catalog/product_collection')
                  // ->addAttributeToSelect('*')
                  ->AddAttributeToSelect('name')
                  ->addAttributeToSelect('price')
                  ->addFinalPrice()
                  ->addAttributeToSelect('small_image')
                  ->addAttributeToSelect('image')
                  ->addAttributeToSelect('thumbnail')
                  ->addAttributeToSelect('short_description')
                  ->addUrlRewrite()
                  ->AddCategoryFilter($category);
    Mage::getSingleton('catalog/product_visibility')->addVisibleInCatalogFilterToCollection($products);
    $currencyCode = Mage::app()->getStore()->getBaseCurrencyCode();
    foreach($products as $product){ 
        $json['products'][] = array(
                'id'                    => $product->getId(),
                'name'                  => $product->getName(),
                'description'           => $product->getShortDescription(),
                'pirce'                 => Mage::helper('core')->currency($product->getPrice(), true, false), //." ".$currencyCode,
                'href'                  => $product->getProductUrl(),
                'thumb'                 => (string)Mage::helper('catalog/image')->init($product, 'thumbnail')
            );
    }
    return $json;
} 
```

完整的插件 REST API 见[https://github.com/app-z/magento-android-web-api/blob/master/web-api.php](https://github.com/app-z/magento-android-web-api/blob/master/web-api.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-23T22:55:01.117

也许是这样的？

```
$collection = Mage::getResourceModel('catalog/product_collection');
foreach ($collection as $product) {

    $data = $product->getData();
    foreach ($data as $d)
        var_dump($d);

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-22T10:32:37.827

```
$term = Mage::helper('catalogsearch')->getQueryText();
    $query = Mage::getModel('catalogsearch/query')->setQueryText($term)->prepare();
    $fulltextResource = Mage::getResourceModel('catalogsearch/fulltext')->prepareResult(
        Mage::getModel('catalogsearch/fulltext'),
        $term,
        $query
    );

    $collection = Mage::getResourceModel('catalog/product_collection');
    $collection->getSelect()->joinInner(
        array('search_result' => $collection->getTable('catalogsearch/result')),
        $collection->getConnection()->quoteInto(
            'search_result.product_id=e.entity_id AND search_result.query_id=?',
            $query->getId()
        ),
        array('relevance' => 'relevance')
    );

    $productIds = array();
    $productIds = $collection->getAllIds(); // as per Amit Bera s' comment
Zend_Debug::dump($productIds); 
```*******

# c# - 无法编译包含泛型和内部类的代码

> ID：14212461
> 
> 赞同：4
> 
> 时间：2013-01-08T10:03:46.907
> 
> 标签：c#, .net, generics, inner-classes

我正在尝试实现单链表。我无法编译以下代码。我从下面的代码段中删除了许多与此问题无关的不必要代码：

```
public class SinglyLinkedList<T>
{
    public SinglyLinkedList()
    {
    }

    private SinglyNode<T> _head = null;

    private class SinglyNode<T>
    {
        public T Data { get; set; }
        public SinglyNode<T> Next { get; set; }
    }

    private class Enumerator<T>
    {
        public Enumerator(SinglyLinkedList<T> list)
        {
            _list = list; //#1
            _head = list._head; //#2
        }

        private SinglyLinkedList<T> _list = null;
        private SinglyNode<T> _head = null;
    }
} 
```

标记为 #2 的语句因错误而失败 -`Cannot implicitly convert type 'SinglyLinkedList<T>.SinglyNode<T>' to 'SinglyLinkedList<T>.SinglyNode<T> Program.cs`

标记为#1 的语句在语义上与#2 相似，并且正在编译。什么是阻止程序编译？是否有任何导致上述代码无法编译的泛型 + 内部类相关规则？

请注意，上面的代码片段是我通过重新发明轮子学习的一部分，而不是生产代码。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-08T10:07:48.010

每个内部类都声明自己**完全不同** `T`。

只需`T`从内部类中删除，一切都会好起来的：

```
public class SinglyLinkedList<T>
{
    public SinglyLinkedList()
    {
    }

    private SinglyNode _head = null;

    private class SinglyNode
    {
        public T Data { get; set; }
        public SinglyNode Next { get; set; }
    }

    private class Enumerator
    {
        public Enumerator(SinglyLinkedList<T> list)
        {
            _list = list; //#1
            _head = list._head; //#2
        }

        private SinglyLinkedList<T> _list = null;
        private SinglyNode _head = null;
    }
} 
```

# javascript - 表单重复 jQuery 验证不适用于重复项

> ID：14212464
> 
> 赞同：0
> 
> 时间：2013-01-08T10:03:52.853
> 
> 标签：javascript, jquery

我不知道我哪里出错了，但我有一个需要复制的表格。到目前为止它是重复的，但我对“ID”字段进行了验证，它只适用于第一个 from 并且没有任何重复项。

非常感谢任何帮助。

继承人的代码：

jQuery：

```
 //Clone Tracking
var g_counter = 1;
var d_counter = 1;
var dependant = ["dependant"];
var group;
//Clone Tracking
//General Variables
var name_input_groups = ["name-group-1"];
var surname_input_groups = ["surname-group-1"];
var input_groups = ["group-1"];
var age_input_groups = ["age-group-1"];
var gender_input_groups = ["gender-group-1"];
var town_input_groups = ["town-group-1"];
var cell_input_groups = ["cell-group-1"];
var pass_input_groups = ["pass-group-1"];
var relation_input_groups = ["relation-group-1"];
//General Variables
//Generate variables
var name_fields=[0];
var surname_fields=[0];
var id_fields = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 12, 13];
var passport_fields = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 12, 13];
var cell_fields = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];
var age_fields=[0];
var gender_fields=[0];
var town_fields=[0];
var relation_fields=[0];

var name_input = "<input class='name' />";
var surname_input = "<input class='surname' />";
var id_input = "<input class='id' maxlength='1' />";
var age_input = "<input class='age' />";
var gender_input = "<input class='gender' maxlength='1' />";
var town_input = "<input class='town' />";
var cell_input = "<input class='cell' maxlength='1' />";
var pass_input = "<input class='pass' maxlength='1' />";
var relation_input ="<input type='checkbox' class='spouse' />" + 
                    "<input type='checkbox' class='ownchild' />" +
                    "<input type='checkbox' class='adopted' />" +
                    "<input type='checkbox' class='stepchild' />" +
                    "<input type='checkbox' class='parent' />" +
                    "<input type='checkbox' class='inlaw' />" +
                    "<input type='checkbox' class='brother' />" +
                    "<input type='checkbox' class='other' />";
//Generate variables
jQuery(document).ready(function(e) {
    //populate jquery generated fields
    jQuery(surname_fields).each(function() {
        jQuery(surname_input).appendTo('#surname-group-1');
    });
    jQuery(name_fields).each(function() {
        jQuery(name_input).appendTo('#name-group-1');
    });
    jQuery(id_fields).each(function() {
        jQuery(id_input).appendTo('#group-1');
    });
    jQuery(age_fields).each(function() {
        jQuery(age_input).appendTo('#age-group-1');
    });
    jQuery(gender_fields).each(function() {
        jQuery(gender_input).appendTo('#gender-group-1');
    });
    jQuery(town_fields).each(function() {
        jQuery(town_input).appendTo('#town-group-1');
    });
    jQuery(cell_fields).each(function() {
        jQuery(cell_input).appendTo('#cell-group-1');
    });
    jQuery(passport_fields).each(function() {
        jQuery(pass_input).appendTo('#pass-group-1');
    });
    jQuery(relation_fields).each(function() {
        jQuery(relation_input).appendTo('#relation-group-1');
    });
    //populate jquery generated fields
    //Cloning Function
    jQuery('#clone').click(function() {
        clone_dependant();
    });

    function clone_dependant() {
        // Store the value of the previous Id to insert the cloned div..
        var oldId = g_counter;
        g_counter++;

        // Clone the Dependant Div and set a new id
        var $clonedDiv = jQuery('#dependant-1').clone(false).attr('id', 'dependant-'+g_counter);
        var cell_newDiv = 'cell-group-'+ g_counter;
        var town_newDiv = 'town-group-'+ g_counter;
        var gender_newDiv = 'gender-group-'+ g_counter;
        var age_newDiv = 'age-group-'+ g_counter;
        var pass_newDiv = 'pass-group-'+ g_counter;
        var id_newDiv = 'group-'+ g_counter;
        var name_newDiv = 'name-group-'+ g_counter;
        var surname_newDiv = 'surname-group-'+ g_counter;
        var relation_newDiv = 'relation-group-'+ g_counter;

        // Find div's inside the cloned object and set a new id's
        $clonedDiv.find('#name-group-1').attr('id',"#name-group-" + g_counter );
        $clonedDiv.find('#surname-group-1').attr('id',"#surname-group-" + g_counter );
        $clonedDiv.find('#group-1').attr('id',"#group-" + g_counter );
        $clonedDiv.find('#age-group-1').attr('id',"#age-group-" + g_counter );
        $clonedDiv.find('#gender-group-1').attr('id',"#gender-group-" + g_counter );
        $clonedDiv.find('#town-group-1').attr('id',"#town-group-" + g_counter );
        $clonedDiv.find('#cell-group-1').attr('id',"#cell-group-" + g_counter );
        $clonedDiv.find('#pass-group-1').attr('id',"#pass-group-" + g_counter );
        $clonedDiv.find('#relation-group-1').attr('id',"#relation-group-" + g_counter );

        // You don't need to Loop thru the inputs to set the value
        $clonedDiv.find('input').val('');

        // Insert the cloned object 
        $clonedDiv.insertAfter("#dependant-" + oldId);

        name_input_groups.push(name_newDiv);
        surname_input_groups.push(surname_newDiv);
        cell_input_groups.push(cell_newDiv);
        age_input_groups.push(age_newDiv);
        gender_input_groups.push(gender_newDiv);
        town_input_groups.push(town_newDiv);
        pass_input_groups.push(pass_newDiv);
        relation_input_groups.push(relation_newDiv);
        input_groups.push(id_newDiv);
    };
    //Cloning Function
    //Validation

    function validate_gen() {};

    function validate_Id(values) {
            var idNumber = values;
            var correct = true;
            if (idNumber.length != 13 || !isNumber(idNumber)) {correct = false;}
            var tempDate = new Date(idNumber.substring(0, 2), idNumber.substring(2, 4) - 1, idNumber.substring(4, 6));
            var today = new Date();
            var id_date = tempDate.getDate();
            var id_month = tempDate.getMonth();
            var id_year = tempDate.getFullYear();
            var currentYear = (new Date).getFullYear();
            var age = Math.floor((today-tempDate) / (365.25 * 24 * 60 * 60 * 1000));
            var fullDate = id_date + "-" + (id_month + 1) + "-" + id_year;
            if (!((tempDate.getYear() == idNumber.substring(0, 2)) && (id_month == idNumber.substring(2, 4) - 1) && (id_date == idNumber.substring(4, 6)))) {
correct = false;}
            var genderCode = idNumber.substring(6, 10);
            var gender = parseInt(genderCode) < 5000 ? "Female" : "Male";
            var citzenship = parseInt(idNumber.substring(10, 11)) == 0 ? "Yes" : "No";
            var tempTotal = 0;
            var checkSum = 0;
            var multiplier = 1;
            for (var i = 0; i < 13; ++i) {tempTotal = parseInt(idNumber.charAt(i)) * multiplier;
                if (tempTotal > 9) {tempTotal = parseInt(tempTotal.toString().charAt(0)) + parseInt(tempTotal.toString().charAt(1));}
                checkSum = checkSum + tempTotal;
                multiplier = (multiplier % 2 == 0) ? 1 : 2;}
            if ((checkSum % 10) != 0) {correct = false;};
            if (correct) {
                 $.each(age_input_groups , function(i){
                    var id = age_input_groups[i];
                    var values = $.map($('#'+id + ' input') , function(e,i){
                        return $(e).val(age);
                    });
                });
               $.each(gender_input_groups , function(i){
                    var id = gender_input_groups[i];
                    var values = $.map($('#'+id + ' input') , function(e,i){
                        return $(e).val(gender);
                    });
                });
                console.log(idNumber);
            }
            else {
                console.log(idNumber + "-wrong");
            }
            return false;}

        function isNumber(n) {return !isNaN(parseFloat(n)) && isFinite(n);};

    function validate_Pass(pass_values) {
        console.log("passport"+pass_values);
    };

    function validate_Email() {};

    function validate_Cell(cell_values) {
        if (cell_values != 10){
            console.log("Cell= "+cell_values);
        }else{
            console.log("bad");
        }
    };
    //Validation
//Multiple Inputs function
//ID
    $(document).on('keydown', 'input.id', function(e) {
        if (e.keyCode == 8) {
            $(this).val('');
            $(this).prev().val('');
            $(this).prev().focus();
            //Validate(current);
        }
    });

    $(document).on('keyup', 'input.id', function() {
        if (this.value.match(/\d+/)) {
            var $this = $(this);
            if ($this.next('input.id').length) {
                $this.next().focus();
            } else {
                $.each(input_groups , function(i){
                    var id = input_groups[i];
                    var values = $.map($('#'+id + ' input') , function(e,i){
                        return $(e).val();
                    }).join('');
                    validate_Id(values);
                });
            }
        }
    });
//ID
//CELL
    $(document).on('keydown', 'input.cell', function(e) {
        if (e.keyCode == 8) {
            $(this).val('');
            $(this).prev().val('');
            $(this).prev().focus();
            //Validate(current);
        }
    });

    $(document).on('keyup', 'input.cell', function() {
        if (this.value.match(/\d+/)) {
            var $this = $(this);
            if ($this.next('input.cell').length) {
                $this.next().focus();
            } else {
                $.each(cell_input_groups , function(i){
                    var id = cell_input_groups[i];
                    var cell_values = $.map($('#'+id + ' input') , function(e,i){
                        return $(e).val();
                    }).join('');
                    validate_Cell(cell_values);
                });
            }
        }
    });
//CELL
//Pasport
    //Multiple Inputs function
        $(document).on('keydown', 'input.pass', function(e) {
        if (e.keyCode == 8) {
            $(this).val('');
            $(this).prev().val('');
            $(this).prev().focus();
            //Validate(current);
        }
    });

    $(document).on('keyup', 'input.pass', function() {
        if (this.value.match(/\d+/)) {
            var $this = $(this);
            if ($this.next('input.pass').length) {
                $this.next().focus();
            } else {
                $.each(pass_input_groups , function(i){
                    var id = pass_input_groups[i];
                    var pass_values = $.map($('#'+id + ' input') , function(e,i){
                        return $(e).val();
                    }).join('');
                    validate_Pass(pass_values);
                });
            }
        }
    });
//Pasport
    //Multiple Inputs function
}); 
```

和继承人的HTML：

```
<div id="dependant-1">
    name<div id="name-group-1"></div>
    surname<div id="surname-group-1"></div>
    id<div id="group-1"></div>
    age<div id="age-group-1"></div>
    gender<div id="gender-group-1"></div>
    townofbirth<div id="town-group-1"></div>
    cell<div id="cell-group-1"></div>
    passport<div id="pass-group-1"></div>
    relationship<div id="relation-group-1"></div>
</div>

<button id="clone">clone</button> 
```

这里还有一个南非身份证号样本：8509295266086

和 jsFiddle 链接 - [http://jsfiddle.net/dawidvdh/GdGen/](http://jsfiddle.net/dawidvdh/GdGen/)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:52:30.313

一个可能的答案是分别为每个表单运行验证：

我可以看到 and 都包含一个表单，并且每个都需要验证。我会给每个“依赖” div 创建一个依赖类，然后你可以这样做：

```
$('.dependant').each(function(k, v){

      $(v).find('.name').val(); // is the parent div, you can access the child elements this way

}); 
```

在循环中不太容易出错

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:57:14.923

这个追踪起来相当棘手，但很容易修复。

在`clone_dependant`函数中，这样的代码用于修改`ID`给定元素的 ：

```
$clonedDiv.find('#group-1').attr('id',"#group-" + g_counter ); 
```

问题是您不需要使用`#`ID 中的字符。该行将变为：

```
$clonedDiv.find('#group-1').attr('id',"group-" + g_counter ); 
```

验证正常工作的地方（因此您需要查看对修改了 ID 的其他元素执行此操作）。

使用第一种方法，我发现我找不到任何新添加的元素。例如，在添加到 DOM 之后直接在函数中运行将输出`console.log($("#group-" + g_counter).length);`0 `clone_dependant`。`$clonedDiv`

# android - conversion of charsequence to String

> ID：14212465
> 
> 赞同：2
> 
> 时间：2013-01-08T10:03:55.750
> 
> 标签：android

I want to convert a charsequence to String value,I use the following code for that

```
 string passwordTxtValue;
   passwordTxtValue = passwordTxt.getText().toString();
      System.out.println(""+passwordTxtValue); 
```

But i am not getting the value,how can i resolve this.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:32:16.330

Your value get converted correctly, but the java method println() won't work in Android

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T03:32:48.790

In `Android System.out.println()` gets redirected to LogCat and printed using Log.i(). In java you have `System.out.println()` instead of that you can use [Android Log class](http://developer.android.com/reference/android/util/Log.html) in Android for the same purpose. And you can see the output in the Logcat. And one upperhand to see in the Logcat is you can get Stack Traces of any uncaught Exceptions.

# javascript - 如何从 JavaScript 模块中访问“this”？

> ID：14212466
> 
> 赞同：2
> 
> 时间：2013-01-08T10:03:57.403
> 
> 标签：javascript, module, this

我试图了解如何最好地使用 JavaScript 模块模式。我的问题是似乎没有办法从内部引用模块，因为`this`它被设置为`Window`对象。

我有这个简单的测试代码：

```
var Test = function() {
    var that = this;

    return {
        something: function() {
            console.info(that);
        }
    }
}

var test1 = Test();
test1.something();

var test2 = Test();
test2.something(); 
```

两者都`test1`打印`test2`对`Window`对象的引用而不是模块本身。

知道如何更改它以使我`this`在模块内部有效吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T10:05:41.977

如果你做了

```
var test1 = new Test() 
```

然后你可以做

```
test1.something(); 
```

另一种模块结构是执行以下操作：

```
var myModule = function () {
    var obj = {};
    obj.something = function () { 
         return console.log(obj);
    };
    obj.something2 = function () {
         return console.log(obj === this); // true
    };
    return obj;
};
var test = myModule();
test.something();
test.something2(); 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T10:39:25.140

我认为您将 JavaScript 模块模式与 JavaScript 构造函数混淆了。

### JavaScript 构造函数

如果您编写一个函数并`new`在其前面使用关键字调用它，则该函数被称为构造函数。

它将自动返回一个新对象，您可以使用`this`关键字在构造函数中引用该对象。

```
var Test = function() {
    var that = this;

    this.something = function () {
        console.info(that);
        console.info(this);
    };
}

var test1 = new Test();
test1.something(); 
```

您可以改为返回自己的对象，但通常不会在构造函数中这样做，您只需使用`this`：

```
var Test = function() {
    var that = this;

    return {
        something: function () {
            console.info(that);
            console.info(this);
        }
    };
}

var test1 = new Test();
test1.something(); 
```

如果你*不*`new`使用它前面的关键字调用它，那么它就像一个普通函数一样被调用，这意味着`this`对它内部的任何引用都指的是该函数是其属性的对象（在没有其他任何东西的情况下, 将是全局对象，在 Web 浏览器中是`window`)。

```
var geoff = {
    Test: function () {
        var that = this;

        return {
            something: function () {
                console.info(that);
            }
        };
    }
};

var test2 = geoff.Test();
var test3 = Test(); 
```

注意：对于构造函数，您通常会在其原型对象上定义方法，这样就不会为您使用构造函数创建的每个对象不必要地重新定义方法：

```
var Test = function() {
    this.else = "Something Else"
}
Test.prototype.something = function () {
    console.info(this);       
}
Test.prototype.somethingElse = function () {
    console.info(this.else);       
}

var test4 = new Test();
test1.somethingElse() // Logs "Something Else" 
```

（请注意，如果您如上所述从构造函数返回您自己的对象，那么您将无法再访问原型对象上的方法。）

另请注意，每次调用构造函数时，它都会返回一个新对象。您可以将参数传递给构造函数（就像您可以使用任何其他函数一样）并使用它们来自定义返回的对象：

```
var Test = function(else) {
    this.else = else;
}
Test.prototype.somethingElse = function () {
    console.info(this.else);       
}

var test1 = new Test("Something else");
var test2 = new Test("Something else again");

test1.somethingElse(); // Logs "Something else"
test2.somethingElse(); // Logs "Something else again" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T10:12:40.687

您遇到的问题是因为`this`引用了一个对象，但`Test()`不是一个对象；这只是一个功能。拥有`Test()`的对象是`Window`对象（因为 Test 在全局范围内），因此这就是您`this`从内部引用时返回的内容`Test()`。

您可能想尝试这样的事情：

```
var testObj = {
    Test : function() {
        var that = this;
            return {
            something: function() {
                console.info(that);
            }
        }
    }
} 
```

现在您可以调用`testObj.Test();`，您将获得对该`testObj`对象的引用。

希望能澄清一点。

# ruby-on-rails - 401 unauthorized with omniauth-twitter

> ID：14212472
> 
> 赞同：0
> 
> 时间：2013-01-08T10:04:21.447
> 
> 标签：ruby-on-rails, omniauth, twitter-oauth

我正在尝试在 rails 应用程序中使用omniauth-twitter，但我一开始就被卡住了，无法弄清楚原因是什么。我确实在 dev.twitter.com 中注册了我的应用程序，并获得了 CONSUMER_KEY 和 CONSUMER_SECRET。为了缩短测试时间，我将这两个变量直接放在 initializers/omniauth.rb

```
Rails.application.config.middleware.use OmniAuth::Builder do
  provider :twitter, "an_alphanumeric_code", "some_other_alphanumeric_code"
end 
```

在 application.html.erb 布局中，我有 Twitter 登录的链接

```
<%= link_to "Sign in with Twitter", "auth/twitter" %> 
```

但是当我点击登录时，我没有被重定向到 twitter 登录

```
401 Unauthorized 
```

我已经检查了关于 SO 的其他问题，这不应该是计算机时间问题（我的 rails 服务器的时间设置正确）。我怀疑问题在于没有可用于测试的公共 IP 和服务器名称。

是否有人能够在本地 127.0.0.1:3000 rails 服务器上使用omniauth-twitter？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T10:39:11.397

您`Callback URL`在注册应用程序时是否将其放入应用程序中？如果`Callback URL`缺少，那么这是您将遇到的第一个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T13:45:26.720

Omniauth Twitter 适用于本地 Rails 开发环境。检查事项：

您的路线已为回调正确设置，例如：

```
match "/auth/:provider/callback" => "sessions#create" 
```

还要注意 link_to 中路径中可能缺少的前导斜杠。尝试更改为：

```
<%= link_to "Sign in with Twitter", "/auth/twitter" %> 
```

在我的 Omniauth Twitter 实现中（应该与其他 Twitter 相同），如果您已经登录 Twitter，它不会将您带到登录或确认屏幕。它会将您重定向回您在 dev.twitter.com 中指定的 url。因此，请检查您的应用程序以查看它是否正在通过 Twitter 进行身份验证（使用 Firebug 或 Chrome 开发工具）。这应该有助于追踪您的问题。

# c++ - 保存一个稍后将实例化的“类”

> ID：14212475
> 
> 赞同：1
> 
> 时间：2013-01-08T10:04:27.793
> 
> 标签：c++, templates

这是我（可能有点奇怪）的想法，假设我想定义一个`std::set`对象来包含一些东西以供以后使用，但不幸的是我不确定哪个类型将`std::set<not-sure>`作为模板 arg 传递给，而这种`not-sure`类型将被确定通过一个字符串，像这样：

```
class X {
public:

foo()
{
    char not_sure_type[20]; 
    scanf("%s", not_sure_type);
    if (strcmp(not_sure_type, "int"))
        // then std::set<int>
    else if (// "char")
        // then std::set<char>
}

private:
void * _set;

}; 
```

这样，我可以确定它`std::set<int>`是否会被实例化，对吧？但是我怎么知道`_set`你应该指向 a `std::set<int>`？在不知道这一点的情况下，我也不能使用从to来回`static_cast`转换。`_set``void *``std::set<int>*`

那么我可以`std::set<int>`像数据成员一样保存以供以后使用吗？

任何想法都值得赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T10:15:14.123

如果您在运行时知道集合元素的类型（基于一个说字符串），您可以将指向抽象类型的指针存储到集合（集合）中，然后在构造函数中使用[抽象工厂](http://www.castle-cadenza.demon.co.uk/abfact.htm)保存 std::set 的类，用于在运行时根据提供的字符串实例化元素的实际具体类型。问题在于在这里使用原始指针，因为您需要在具有 std::set 的类中进行清理。由于您想使用 std::set，请确保您的元素的具体类型是可比较的。不确定这是否是正确的方法……你说要提出想法……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T10:30:36.140

在我看来，您正在考虑使用 c++ 作为弱类型语言，例如 python。当然可能有一些解决方法，比如使用一些抽象基类等，但我认为底线是在运行时定义类型是违反 c++ 的范式的。

# mysql - 与当前时间 SQL 对比

> ID：14212478
> 
> 赞同：0
> 
> 时间：2013-01-08T10:04:31.680
> 
> 标签：mysql, ruby-on-rails, time, model, compare

我正在尝试获取一个页面来显示当前有效的所有记录的列表，因此将开始和结束时间和日期与当前时间进行比较。这是我目前的代码：

```
def self.time
find_by_sql("SELECT *
FROM screens s
WHERE (s.starttime < CONVERT(varchar(30), GETDATE(), 114)) AND (s.finishtime > CONVERT(varchar(30), GETDATE(), 114))")
end 
```

但是我明白了：`ActiveRecord::StatementInvalid`

我知道我的代码不正确..我只是不太知道如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:13:20.383

```
def self.time
  find_by_sql("SELECT *
  FROM screens s
  WHERE (s.starttime < #{Time.now}) AND (s.finishtime >  #{Time.now}")
end 
```

# javascript - 通过单击复选框将一个文本框数据复制到另一个文本框

> ID：14212480
> 
> 赞同：1
> 
> 时间：2013-01-08T10:04:39.050
> 
> 标签：javascript, html, jsp, checkbox, textbox

```
 <html>

    Address Line 1
    <input type="text" id="stu_per_add_one" name="stu_pre_add_one" maxlength="40" size="35"/>

    Address Line 2
    <input type="text" id="stu_pre_add_two" name="stu_pre_add_two" maxlength="40" size="35"/>

    Address Line 3
    <input type="text" id="stu_pre_add_three" name="stu_pre_add_three" maxlength="40" size="35"/>

    Village
    <input type="text" id="stu_pre_village" name="stu_pre_village" maxlength="40" size="35"/>

    Taluka
    <input type="text" id="stu_pre_taluka" name="stu_pre_taluka" maxlength="40" size="35" />

    City
    <input type="text" id="stu_pre_city" name="stu_pre_city" maxlength="40" size="35" />

    District
    <input type="text" id="stu_pre_dist" name="stu_pre_dist" maxlength="40" size="35" />

    <input id="sameadd" name="sameadd" type="checkbox" value="Sameadd" onchange="CopyAdd(this);" />&nbsp;&nbsp;&nbsp;
    Check if Permenent Address Same as Present Address

    <script type="text/javascript">
            function CopyAdd(cb) 
            {
                var cb = document.getElementById('sameadd');
                var a1 = document.getElementById('stu_pre_add_one');
                var al1 = document.getElementById('stu_per_add_one');
                var a2 = document.getElementById('stu_pre_add_two');
                var al2 = document.getElementById('stu_per_add_two');
                var a3 = document.getElementById('stu_pre_add_three');
                var al3 = document.getElementById('stu_per_add_three');
                var v1 = document.getElementById('stu_pre_village');
                var vl1 = document.getElementById('stu_per_village');
                var t1 = document.getElementById('stu_pre_taluka');
                var tl1 = document.getElementById('stu_per_taluka');
                var c1 = document.getElementById('stu_pre_city');
                var cl1 = document.getElementById('stu_per_city');
                var d1 = document.getElementById('stu_pre_dist');
                var dl1 = document.getElementById('stu_pre_dist');

                if (cb.checked) 
                {
                    al1.value = a1.value;
                    al2.value = a2.value;
                    al3.value = a3.value;
                    vl1.value = v1.value;
                    tl1.value = t1.value;
                    cl1.value = c1.value;
                    dl1.value = d1.value;

                } 
                else 
                {
                    al1.value = '';
                    al2.value = '';
                    al3.value = '';
                    vl1.value = '';
                    tl1.value = '';
                    cl1.value = '';
                    dl1.value = '';

                }
            }
     </script>

    Address Line 1
    <input type="text" id="stu_per_add_one" name="stu_per_add_one" maxlength="40" size="35"/>

    Address Line 2
    <input type="text" id="stu_per_add_two" name="stu_per_add_two" maxlength="40" size="35"/>

    Address Line 3
    <input type="text" id="stu_per_add_three" name="stu_per_add_three" maxlength="40" size="35"/>

    Village
    <input type="text" id="stu_per_village" name="stu_per_village" maxlength="40" size="35"/>

    Taluka
    <input type="text" id="stu_per_taluka" name="stu_per_taluka" maxlength="40" size="35" />

    City
    <input type="text" id="stu_per_city" name="stu_per_city" maxlength="40" size="35" />

    District
    <input type="text" id="stu_pre_dist" name="stu_pre_dist" maxlength="40" size="35" />

    </html> 
```

请解决它为什么它不起作用.....可能是这段代码中缺少的东西......我也试过这个代码然后它没有复制任何文本框数据......我想直接做对于 7 个文本框...我无法正常工作。我不知道缺少什么。请有人解决它...我正在研究 JSP 项目...

谢谢朱格尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T10:35:26.510

看到这个小提琴：http: [//jsfiddle.net/nc3sH/1/](http://jsfiddle.net/nc3sH/1/)

`pre`您有重复的元素 ID，并且元素 ID 之间和元素 ID 之间的用法也令人困惑`per`......

# php - php 类在图像上添加文本的建议

> ID：14212481
> 
> 赞同：0
> 
> 时间：2013-01-08T10:04:43.553
> 
> 标签：php

我正在寻找一个可以帮助我将文本添加到图像的 php 类。

我想为左上角定义一个 x 和 y 点，然后设置一个宽度（可能是高度），然后在其中获取文本，以便它自动在下一行继续。我一直在寻找，但我无法弄清楚如何做到这一点......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T10:08:52.167

你可以很容易地使用 GD 库来实现这一点。[此处](http://blog.doh.ms/2008/02/12/adding-text-to-images-in-real-time-with-php/)提供了教程。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-08T11:04:54.510

几年前，我使用 PHP 和 GD 创建标题图形做了类似的事情。它基本上是将一串文本分解成单词，计算每个单词的宽度，然后将每个单词一个一个相加。如果一个单词超过了宽度限制，它将把它推到下一行。稍作调整，它应该可以为您解决问题：[http ://www.ashleysheridan.co.uk/coding/php/PHP+Image+Header](http://www.ashleysheridan.co.uk/coding/php/PHP+Image+Header)

# php - 收到不需要的邮件

> ID：14212485
> 
> 赞同：-1
> 
> 时间：2013-01-08T10:04:51.990
> 
> 标签：php, spam, malware

从各个站点接收恶意和不需要的电子邮件。接收者邮件就像

*   byYiOVF.at.mydomain.com
*   GyaPbMox.at.mydomain.com

但由于它们不存在，邮件被退回到我的谷歌应用管理邮箱。通过 AVG、Norton、McAfee 等搜索并扫描我的域文件中的垃圾邮件、恶意软件，但发现一切正常。

可能是什么原因？请提出建议。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T11:14:31.040

即使我认为您的问题不在主题范围内，但这里的答案可能对您有所帮助：

您可能是轻度身份盗窃的受害者。

可能有些垃圾邮件发送者正在以您的名义发送电子邮件，而这些垃圾邮件将被退回到您的邮箱。

你可以：

*   配置您的邮件帐户过滤器以忽略、标记或删除邮件和
*   向可能试图追踪犯罪者的相应 CERT 当局报告事件

更多信息： [http ://en.wikipedia.org/wiki/Computer_emergency_response_team](http://en.wikipedia.org/wiki/Computer_emergency_response_team)

# nhibernate - NHibernate Criteria 查询时间内连接

> ID：14212487
> 
> 赞同：0
> 
> 时间：2013-01-08T10:04:53.680
> 
> 标签：nhibernate, inner-join, criteria

在 NHibernate 中是否可以在查询期间使用 Criteria 内部连接对象？

我想完成这样的事情：

```
SELECT p
FROM Person p
INNER JOIN Section s
    ON   p.sid = s.id 
    AND  p.companyid = s.companyid 
```

连接不在映射中（也不存在）。有没有类似下面的语法？

```
var list = session.CreateCriteria(typeof(Person), "p")
.CreateCriteria(typeof(Section), "s")
.Add(Expression.EqProperty("p.SectionId", "s.Id"))
.Add(Expression.EqProperty("p.CompanyId", "s.CompanyId"))
.List(); 
```

这是可能吗？我不能在这里使用 detachedcriteria，因为我有两个用于加入的属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T11:02:39.273

好的，我想通了，您可以使用分离查询。

我使用了以下内容：

```
var list = session.CreateCriteria(typeof(Person), "p")
             .Add(Subqueries.PropertyIn("SectionId", typeof(Section), "s")
                    .SetProjection(Projections.Property("Id"))
                    .Add(Expression.EqProperty("s.Id", "p.SectionId"))
                    .Add(Expression.EqProperty("s.CompanyId", "p.CompanyId"))
                )).List(); 
```

这会生成一个与内部连接相同的查询。

如果您有任何“更好”的选择，请随时分享。

# c# - 使用带有 RadBarChart 的 2 轴标签且条形之间没有间隙的问题

> ID：14212492
> 
> 赞同：0
> 
> 时间：2013-01-08T10:05:15.067
> 
> 标签：c#, asp.net, telerik, radchart

我有两个问题：

1.  我想要数据表中的名称，但它以数字形式显示。

2.  我想在两个酒吧之间留一个空隙，但我找不到办法。

这是代码：

私有无效 InitializeGraph (DataTable poDt) { Telerik.Charting.ChartSeries charteries = new Telerik.Charting.ChartSeries();

```
 try
    {

        chartseries.Type = Telerik.Charting.ChartSeriesType.Bar;

        Telerik.Charting.ChartSeriesItem csItem;

        RadChart1.PlotArea.XAxis.AutoScale = true;
        RadChart1.PlotArea.XAxis.DataLabelsColumn = "Name";

        for (int iRow = 0; iRow < poDt.Rows.Count; iRow++)
        {
            chartseries = new Telerik.Charting.ChartSeries();

            chartseries.Type = Telerik.Charting.ChartSeriesType.Bar;

            chartseries.Name = poDt.Rows[iRow]["Name"].ToString().Trim();

            csItem = new Telerik.Charting.ChartSeriesItem();
            csItem.Name = poDt.Rows[iRow]["Name"].ToString();
            csItem.Label.TextBlock.Text = poDt.Rows[iRow]["Value"].ToString(); 
            RadChart1.PlotArea.XAxis.Appearance.TextAppearance.AutoTextWrap = Telerik.Charting.Styles.AutoTextWrap.True;

            csItem.YValue = Int32.Parse(poDt.Rows[iRow]["Value"].ToString());

            chartseries.AddItem(csItem);
            RadChart1.Series.Add(chartseries);

        }
        RadChart1.PlotArea.XAxis.AddRange(1, poDt.Rows.Count, 1);

        RadChart1.PlotArea.XAxis[poDt.Rows.Count].TextBlock.Text = chartseries.Name;
        poDt.Rows.Count.ToString();
        RadChart1.PlotArea.XAxis.AutoShrink = false;

        RadChart1.PlotArea.XAxis.AutoShrink = true;
        RadChart1.Series.Add(chartseries);

        RadChart1.PlotArea.Appearance.Border.Visible = false;
        RadChart1.Appearance.Border.Visible = true;
        RadChart1.PlotArea.YAxis.IsLogarithmic = true;

        RadChart1.PlotArea.YAxis.AutoScale = true;
        RadChart1.PlotArea.YAxis.Appearance.ValueFormat=Telerik.Charting.Styles.ChartValueFormat.Number;
        RadChart1.Appearance.BarWidthPercent = 50;

        RadChart1.Chart.Appearance.FillStyle.MainColor = System.Drawing.Color.Red;
        RadChart1.Chart.Appearance.FillStyle.MainColor = System.Drawing.Color.Transparent;
        RadChart1.Legend.Appearance.FillStyle.MainColor = System.Drawing.Color.Transparent;

    }
    catch (Exception Ex)
    {
        //throw;
    }
    finally
    {
        poDt.Clear();
        poDt = null;
        chartseries = null;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T22:18:45.700

抱歉，我不相信有办法同时显示两个 X 轴。

我的建议是您使用 CategoricalAxis 作为您的 X 轴并创建一个自定义条形图，该条形图具有区分这两个值的图例。我没有任何工作示例，但是您可以将这个[Telerik Silverlight](http://demos.telerik.com/silverlight/#ChartView/FirstLook)演示用于初学者。

此外，如果可以，请切换到 RadChartView。因为我会建议一种更简单的方法，即使用分类 X 轴并创建多个 Y 轴。如果您走那条路线，您可以对具有多个 Y 轴的 DateTimeContinuous（或分类）X 轴执行类似的操作：

```
int count = 0;
LineSeries lineSeries = new LineSeries();

lineSeries.CategoryBinding = new PropertyNameDataPointBinding() { PropertyName = "TimeStamp" };
lineSeries.ValueBinding = new PropertyNameDataPointBinding() { PropertyName = "Value" };  

lineSeries.VerticalAxis = new LinearAxis()
{
   Title = "Title Here"
};

lineSeries.ItemsSource = yourCollection.Values;

//First Y-axis to be placed on the left of X-axis,
//additional Y-axes to be placed on right
if (count > 0 )
{
     lineSeries.VerticalAxis.HorizontalLocation = Telerik.Charting.AxisHorizontalLocation.Right;
}
count++;
chartName.Series.Add(lineSeries); 
```

希望这可以帮助。

# vb.net - VB 2010 Express：VBA 的数据类型变体

> ID：14212493
> 
> 赞同：1
> 
> 时间：2013-01-08T10:05:16.667
> 
> 标签：vb.net, vba

我正在使用 VB 2010 Express 编写一个从 VBA 调用的库。我需要将一个 Variant 类型的变量（一个包含多个变量数据类型（双精度、整数和字符串）的数组）传递到由 VB 2010 Express 创建的库函数中，然后将结果传递回 VBA。我对 VB 2010 Express 很陌生，我发现数据类型 Variant 在 VB 2010 Express 中不可用。

如果我真的想将可变数据类型的数据传递到库中，而不是将 Variant 类型的变量分解为几个不同数据类型的变量，是否有替代方法可以做到这一点？

谢谢！

# android - 如何在上下文菜单中获取行值

> ID：14212494
> 
> 赞同：-1
> 
> 时间：2013-01-08T10:05:19.917
> 
> 标签：android, android-intent, android-contextmenu

> **可能重复：**
> [如何使用光标在上下文菜单中获取行值？](https://stackoverflow.com/questions/14212110/how-to-get-row-values-in-context-menu-using-cursor)

我创建了一个`ContextMenu`并使用了以下代码：

```
 public boolean onContextItemSelected(MenuItem item){

            switch(item.getItemId())
            {

            case R.id.Show_Note:

                 //AdapterView.AdapterContextMenuInfo info= (AdapterView.AdapterContextMenuInfo)item.getMenuInfo();

                 Intent i=new Intent(this, ShowNote.class);
                    Cursor c = (Cursor) getListView().getItemAtPosition(position);
                    int item_id = c.getInt(0);
                    i.putExtra("item_id", item_id );
                    startActivity(i);

                break 
```

通过按任何列表项，它每次都返回第一行值。请建议，如何获得按下的行值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:08:50.073

我认为您必须将光标移动到指定位置。在从中获取数据之前。

```
c.moveToPosition(position); 
```

在您的代码中添加这一行，让我知道发生了什么..

您的代码类似于：

```
Intent i = new Intent(this, ShowNote.class);
Cursor c = (Cursor) getListView().getItemAtPosition(position);
c.moveToPosition(position); // This line need to be added here 
int item_id = c.getInt(0);
i.putExtra("item_id", item_id );
startActivity(i); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T10:34:09.813

位置是如何设置的？

为了获得列表视图中的位置，您可以在项目选择方法的开头添加以下两行：

```
 public boolean onContextItemSelected(MenuItem item) {
        AdapterContextMenuInfo info = (AdapterContextMenuInfo) item.getMenuInfo();
        int position = info.position;

        switch(item.getItemId())
                {

                case R.id.Show_Note:

                     //AdapterView.AdapterContextMenuInfo info=
                     (AdapterView.AdapterContextMenuInfo)item.getMenuInfo();

                     Intent i=new Intent(this, ShowNote.class);
                        Cursor c = (Cursor) getListView().getItemAtPosition(position);
                        int item_id = c.getInt(0);
                        i.putExtra("item_id", item_id );
                        startActivity(i);

                    break
    } 
```

# mysql - 需要有关 SQL 查询的帮助？

> ID：14212498
> 
> 赞同：0
> 
> 时间：2013-01-08T10:05:30.550
> 
> 标签：mysql, sql

列出每个供应商的名称以及每个仓库的位置以及该供应商提供并存放在该仓库的产品数量

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:09:51.970

这些表应该连接在一起，然后应该应用 where 子句来由销售代表 Jim Burns 进行过滤。

```
select c.name, w.location 
from Salesrep s 
join Warehouse w
on s.Rep_No = w.Rep_No
join Customer c 
on w.Warehouse_No = c.Warehouse_No
where s.Name = 'Jim Burns' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T10:11:16.497

```
SELECT
    c.Name,
    w.Location   
FROM  salesrep as s
LEFT JOIN warehouse as w ON w.Rep_No = s.Rep_No
LEFT JOIN Customer as c ON c.Warehouse_No = w.Warehouse_No
WHERE s.Name = 'Rep Jim Burns'; 
```

# .net - 2 个视频的 FFMPEG 覆盖问题，第二个输入中缺少声音

> ID：14212503
> 
> 赞同：0
> 
> 时间：2013-01-08T10:05:42.223
> 
> 标签：.net, audio, video, ffmpeg, overlay

我正在尝试使用 ffmpeg 实现覆盖，它将两个 flv 文件作为输入并进行输出，并且两个视频同时播放。使用以下 ffmpeg 命令一切正常：

```
ffmpeg -i input1.flv -vf "[in] scale=359:320, pad=2*iw+6:ih [left]; movie=input2.flv, scale=359:320 [right]; [left][right] overlay=365:0 [out]" -b:v 3600k -y output.flv 
```

但问题在于第二个视频的声音`output.flv`，而`output.flv`.

控制台输出为：

```
ffmpeg version N-47062-g26c531c Copyright (c) 2000-2012 the FFmpeg developers
  built on Nov 25 2012 12:23:20 with gcc 4.7.2 (GCC)
  configuration: --disable-static --enable-shared --enable-gpl --enable-version3
 --disable-pthreads --enable-runtime-cpudetect --enable-avisynth --enable-bzlib
--enable-frei0r --enable-libass --enable-lib`enter code here`opencore-amrnb --enable-libopencore-
amrwb --enable-libfreetype --enable-libgsm --enable-libmp3lame --enable-libnut -
-enable-libopenjpeg --enable-libopus --enable-librtmp --enable-libschroedinger -
-enable-libspeex --enable-libtheora --enable-libutvideo --enable-libvo-aacenc --
enable-libvo-amrwbenc --enable-libvorbis --enable-libvpx --enable-libx264 --enab
le-libxavs --enable-libxvid --enable-zlib
  libavutil      52\.  9.100 / 52\.  9.100
  libavcodec     54\. 77.100 / 54\. 77.100
  libavformat    54\. 37.100 / 54\. 37.100
  libavdevice    54\.  3.100 / 54\.  3.100
  libavfilter     3\. 23.102 /  3\. 23.102
  libswscale      2\.  1.102 /  2\.  1.102
  libswresample   0\. 17.101 /  0\. 17.101
  libpostproc    52\.  2.100 / 52\.  2.100
Input #0, flv, from 'input1.flv':
  Metadata:
    canSeekToEnd    : false
    createdby       : FMS 4.0
    creationdate    : Mon Jan 07 07:05:40 2013
    encoder         : Lavf54.37.100
  Duration: 00:03:04.81, start: 0.000000, bitrate: 314 kb/s
    Stream #0:0: Video: flv1, yuv420p, 160x120, 3600 kb/s, 1k tbr, 1k tbn, 1k tb
c
    Stream #0:1: Audio: mp3, 22050 Hz, mono, s16, 32 kb/s
Output #0, flv, to 'output.flv':
  Metadata:
    canSeekToEnd    : false
    createdby       : FMS 4.0
    creationdate    : Mon Jan 07 07:05:40 2013
    encoder         : Lavf54.37.100
    Stream #0:0: Video: flv1 ([2][0][0][0] / 0x0002), yuv420p, 724x320, q=2-31,
3600 kb/s, 1k tbn, 1k tbc
    Stream #0:1: Audio: mp3 ([2][0][0][0] / 0x0002), 22050 Hz, mono, s16p
Stream mapping:
  Stream #0:0 -> #0:0 (flv -> flv)
  Stream #0:1 -> #0:1 (mp3 -> libmp3lame)
Press [q] to stop, [?] for help
frame=  120 fps=0.0 q=4.5 size=     550kB time=00:00:08.57 bitrate= 525.3kbits/s
frame=  225 fps=221 q=2.0 size=    1422kB time=00:00:18.26 bitrate= 637.6kbits/s
Buffer queue overflow, dropping.
[Parsed_overlay_4 @ 02259ae0] Buffer queue overflow, dropping.
    Last message repeated 1 times
frame=  338 fps=222 q=2.0 size=    2414kB time=00:00:26.97 bitrate= 733.0kbits/s
Buffer queue overflow, dropping.
[Parsed_overlay_4 @ 02259ae0] Buffer queue overflow, dropping.
    Last message repeated 12 times
frame=  452 fps=223 q=2.0 size=    3326kB time=00:00:35.38 bitrate= 770.1kbits/s
frame=  562 fps=223 q=2.0 size=    4246kB time=00:00:43.15 bitrate= 806.0kbits/s
Buffer queue overflow, dropping.
[Parsed_overlay_4 @ 02259ae0] Buffer queue overflow, dropping.
    Last message repeated 11 times
frame=  669 fps=221 q=2.0 size=    5237kB time=00:00:51.28 bitrate= 836.6kbits/s
frame=  777 fps=220 q=2.0 size=    6105kB time=00:00:58.75 bitrate= 851.2kbits/s
frame=  893 fps=222 q=2.0 size=    6897kB time=00:01:06.72 bitrate= 846.8kbits/s
frame= 1006 fps=222 q=2.0 size=    7701kB time=00:01:14.60 bitrate= 845.6kbits/s
frame= 1121 fps=223 q=2.0 size=    8539kB time=00:01:22.45 bitrate= 848.3kbits/s
frame= 1235 fps=223 q=2.0 size=    9316kB time=00:01:30.39 bitrate= 844.3kbits/s
frame= 1344 fps=223 q=2.0 size=   10135kB time=00:01:37.98 bitrate= 847.3kbits/s
Buffer queue overflow, dropping.
[Parsed_overlay_4 @ 02259ae0] Buffer queue overflow, dropping.
    Last message repeated 33 times
frame= 1437 fps=220 q=2.0 size=   10800kB time=00:01:46.67 bitrate= 829.3kbits/s
frame= 1540 fps=219 q=2.0 size=   11577kB time=00:01:54.16 bitrate= 830.7kbits/s
frame= 1651 fps=219 q=2.0 size=   12330kB time=00:02:01.64 bitrate= 830.3kbits/s
frame= 1756 fps=218 q=2.0 size=   13141kB time=00:02:09.06 bitrate= 834.1kbits/s
frame= 1859 fps=217 q=2.0 size=   13879kB time=00:02:16.28 bitrate= 834.3kbits/s
frame= 1962 fps=217 q=2.0 size=   14703kB time=00:02:23.69 bitrate= 838.2kbits/s
frame= 2070 fps=217 q=2.0 size=   15448kB time=00:02:30.98 bitrate= 838.2kbits/s
frame= 2176 fps=216 q=2.0 size=   16241kB time=00:02:38.46 bitrate= 839.6kbits/s
Buffer queue overflow, dropping.
[Parsed_overlay_4 @ 02259ae0] Buffer queue overflow, dropping.
    Last message repeated 20 times
frame= 2275 fps=215 q=2.0 size=   16990kB time=00:02:46.78 bitrate= 834.5kbits/s
frame= 2389 fps=216 q=1.6 size=   17784kB time=00:02:54.44 bitrate= 835.1kbits/s
frame= 2493 fps=216 q=2.0 size=   18555kB time=00:03:01.73 bitrate= 836.4kbits/s
frame= 2534 fps=216 q=2.0 Lsize=   18945kB time=00:03:04.81 bitrate= 839.7kbits/
s
video:18227kB audio:588kB subtitle:0 global headers:0kB muxing overhead 0.691204
% 
```

我认为 -map 是用于两个视频的音频处理的过滤器。看到这个链接。

[将两个视频叠加到静态图像上？](https://stackoverflow.com/questions/13390714/superimposing-two-videos-onto-a-static-image)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T23:11:03.050

# `-filter_complex`对比`-vf`

*   当您有一个或多个过滤器输入和/或一个或多个输出时，请使用`-filter_complex`而不是。`-vf`

*   `-filter_complex`设计用于[复杂的过滤器图](http://ffmpeg.org/ffmpeg.html#Complex-filtergraphs)，并`-vf`用于仅使用一个输入和输出的[简单过滤器图。](http://ffmpeg.org/ffmpeg.html#Simple-filtergraphs)

*   请参阅您提供的链接，将[两个视频叠加到静态图像上？](https://stackoverflow.com/questions/13390714/superimposing-two-videos-onto-a-static-image)`-filter_complex`，查看与[`overlay`](http://ffmpeg.org/ffmpeg-filters.html#overlay-1)过滤器一起使用的示例。

# 默认流选择

*   默认情况下，只会选择第一个输入中具有最多通道的音频流作为输出（请参阅有关[流选择](http://ffmpeg.org/ffmpeg.html#Stream-selection)的文档）。

*   您可以使用该选项添加另一个音频流`-map`，例如`-map 1:a -c:a copy`. `1:a`指的是第二*个输入：选择音频流*。您可以在 ffmpeg 控制台输出中看到每个流是如何标记的。请注意，此示例将简单地将附加音频流从输入“复制并粘贴”到输出，因此您的输出将具有两个单独的音频流，而不是一个混合音频流。

*   要将两个输入音频流混合到一个输出音频流中，您可以使用[`amerge`](http://ffmpeg.org/ffmpeg-filters.html#amerge)和[`pan`](http://ffmpeg.org/ffmpeg-filters.html#pan)过滤器。请参阅FFmpeg Wiki 上的[2 × stereo → stereo 示例。](http://trac.ffmpeg.org/wiki/AudioChannelManipulation#a2stereostereo)

# css - IE Quirks 模式下的 Z-index 问题

> ID：14212504
> 
> 赞同：1
> 
> 时间：2013-01-08T10:05:42.663
> 
> 标签：css, internet-explorer, z-index

我正在这个网站上工作： http: [//stdionis.org.uk/](http://stdionis.org.uk/)

当在 IE 9 或更低版本中查看网站时，主页上的下拉菜单会出现在幻灯片下方（这是 google 幻灯片），但是当您转到另一个页面时，下拉菜单会出现在图像上方。

我已将下拉 div 的 z-index 设置为 9999，并尝试将幻灯片的 z-index 设置为零，但似乎无法使其工作。

我们使用的 CMS 不允许直接访问页面的 HTML 代码（不要问...），所以我只能使用 CSS 或 javascript 进行更改。因此，为什么我不能更改文档类型以使其以标准模式显示。

不一定要寻找一个干净的解决方案，任何疯狂的 javascript 黑客都会非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:23:24.277

尝试这个 -

```
.t_horizontal * { z-index: 1000 !important; } 
```

或者

```
.t_horizontal table { z-index: 1000 !important; } 
```

如果甚至不工作 - 尝试使用 jQuery -

```
$(document).ready(function(){
  $('.t_horizontal *').css('z-index','1000 !important');
}); 
```

*注意：菜单正在使用表格，这不是构建菜单的正确方法。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T16:34:12.787

你有没有尝试过：

```
#ctlHeaderModules {
  position: relative;
  z-index: 2;
}
#frm1 {
  position: relative;
  z-index: 1;
} 
```

这两个元素处于同一级别，当我在 Chrome 中检查它们时，我没有看到任何这些属性被应用，值得一试。

还有这个插件： http: [//archive.plugins.jquery.com/project/TopZIndex](http://archive.plugins.jquery.com/project/TopZIndex)

# c++ - 移动构造函数（和其他）的正确实现是什么？

> ID：14212508
> 
> 赞同：8
> 
> 时间：2013-01-08T10:05:50.587
> 
> 标签：c++, c++11, move-semantics

我有一个包含 std::vector 的简单类，我希望在按值返回类时受益于**移动语义**（而不是 RVO）。

我通过以下方式实现了移动构造函数、复制构造函数和复制赋值运算符：

```
class A
{
    public:
        // MOVE-constructor.
        A(A&& other) :
            data(std::move(other.data))
        {
        }

        // COPY-constructor.
        A(const A& other) :
            data(other.data)
        {
        }

        // COPY-ASSIGNMENT operator.
        A& operator= (const A& other);
        {
            if(this != &other)
            {
                data = other.data;
            }

            return *this;
        }

    private:
        std::vector<int> data;
}; 
```

上述实现是否正确？

还有一个问题：我什至必须实现这些成员中的任何一个，还是它们是由编译器自动生成的？我知道复制构造函数和复制赋值运算符是默认生成的，但是编译器也可以自动生成移动构造函数吗？（我用 MSVC 和 GCC 编译这段代码。）

在此先感谢您的任何建议。（我知道已经有一些类似的问题，但不适用于这种确切的情况。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T11:22:18.903

对于此类[*]，它们都是不必要的，因为如果您没有声明它们中的任何一个，它将具有隐含的。

你的构造函数很好。所以下面的代码表面上调用了移动构造函数：

```
A f() { return A(); }
A a = f(); // move construct (not copy construct) from the return value of f 
```

事实上，移动省略可能会起作用，在这种情况下，实际上只调用了无参数构造函数。我假设您计划提供一些构造函数，而不是复制和移动；-)

您的复制分配很好，它与隐式分配的不同之处仅在于它具有自分配检查，而隐式分配则没有。我认为我们不应该争论自分配检查是否值得，这不是不正确的。

您尚未定义移动赋值运算符。鉴于您定义了其他人，您应该已经完成​​，但如果您摆脱其余的，它是隐含的[*]。移动赋值运算符（无论是用户定义的还是隐式的）确保以下代码将移动而不是复制：

```
A a;
a = f(); 
```

[*] 在一个完整的 C++11 实现上，目前还没有。您可以在每个编译器的基础上检查此功能是否已实现，并且`#define`在 MSVC 实现之前，您可能会遇到一些可怕的恶作剧。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T10:16:18.150

对于这个确切的场景，您不需要声明任何移动/复制/分配函数。编译器将生成正确的默认值。

# ruby-on-rails - Mongoid 只在开发中工作。测试和生产都抛出错误

> ID：14212515
> 
> 赞同：1
> 
> 时间：2013-01-08T10:06:04.300
> 
> 标签：ruby-on-rails, mongodb, mongoid

当我启动我的rails控制台时：

```
$ RAILS_ENV=development rails console 
```

每件事似乎都运行良好。Mongoid 能够连接到 mongodb 并获取记录。

但是有：

```
$ RAILS_ENV=test rails console 
$ RAILS_ENV=production rails console 
```

它抛出错误为：

```
Rack::File headers parameter replaces cache_control after Rack 1.5.
/usr/local/lib/ruby/gems/1.9.1/gems/mongoid-3.0.16/lib/mongoid/criteria.rb:585:in `check_for_missing_documents!':  (Mongoid::Errors::DocumentNotFound)
Problem:
  Document(s) not found for class Actor with id(s) 50e5259f53c205d815000001.
Summary:
  When calling Actor.find with an id or array of ids, each parameter must match a document in the database or this error will be raised. The search was for the id(s): 50e5259f53c205d815000001 ... (1 total) and the following ids were not found: 50e5259f53c205d815000001.
Resolution:
  Search for an id that is in the database or set the Mongoid.raise_not_found_error configuration option to false, which will cause a nil to be returned instead of raising this error when searching for a single id, or only the matched documents when searching for multiples. 
```

我的 config/mongoid.yml 对所有三个环境都有完全相同的行集。我无法弄清楚为什么它无法在测试和生产中连接。

**更新：** Mongoid.yml

```
development:
  sessions:
    default:
      database: tgmd
      hosts:
        - localhost:27017
test:
  sessions:
    default:
      database: tgmd
      hosts:
        - localhost:27017
production:
  sessions:
    default:
      uri: <%= ENV['MONGO_URL'] %> 
```

我通过放置一个暂时解决了这个问题：

```
options:
    raise_not_found_error: false 
```

在生产中：还从作业/文件夹中移出一些脚本。那时它奏效了。任何人都可以启发我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T11:20:16.000

我认为您的 ENV['MONGO_URL'] 包含不正确的内容。尝试在生产中使用您的开发数据库：

```
production:
  sessions:
    default:
      database: tgmd
      hosts:
        - localhost:27017 
```

如果它工作。检查您的 ENV['MONGO_URL']

# sql - 如何优化这个查询？

> ID：14212516
> 
> 赞同：0
> 
> 时间：2013-01-08T10:06:06.073
> 
> 标签：sql, sql-server-2005, xquery

我是 XQuery 的新手。请提出一种优化以下查询的方法。

我已经尝试过以下查询，它花费的时间比预期的要多。

```
Select 
A.a_name, 
I.p_type, 
SUM(P.c_n_amount) AS c_n_amount,
CASE  WHEN SUM(ABS(M_value)) = 0 THEN 0
ELSE SUM(ABS(Price) * ABS(M_value)) / SUM(ABS(M_value)) END AS 
[price],
SUM(M_value) AS m_value,SUM(N50) [-50],SUM(P50) [50]
from  position P 
INNER JOIN COUNT AS A ON P.a_id = A.a_id 
INNER JOIN I_VIEW AS I ON P.i_id = I.i_id 
inner join (
select R_C.p_id,M_value,Price,N50,P50
from(
select j.p_id,
C.value('(Result[@resultName = "m_value"]/resultValue)[1]', 'float') as M_value,
C.value('(Result[@resultName = "price"]/resultValue)[1]', 'float') as Price
from  jyothi_xml j CROSS APPLY resultkeys.nodes('/Results')  T(C) 
where r_set='POLY' and r_category ='sk')  R_Category,
(select j1.p_id,
C.value('(Result[@resultName = "rate_shock_n50"]/resultValue)[1]', 'float') as N50,
C.value('(Result[@resultName = "rate_shock_p50"]/resultValue)[1]', 'float') as P50
from jyothi_xml j1 CROSS APPLY resultkeys.nodes('/Results')  T(C)
where result_set='POLY' and result_category ='rate_shocks')  R_S_Category,position p
where p.p_id=R_Category.p_id and p.p_id=R_S_Category.p_id) XMlData  on p.p_id=XMlData.p_id
WHERE P.as_of_date = '2012-10-10' 
GROUP BY A.a_name, I.p_type 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T18:43:36.943

如果您有很多 XML 要解析，那么首先限制您需要哪些 XML 行，然后解析它们是非常有益的。因此，如果可以，请从 Position、Count 和 I_View 表中找出您需要的内容，然后在 jyothi_xml 表中搜索这些 ID。我发现这对我的查询有很大帮助。

# ruby-on-rails - 如何在测试时解决 factorygirl 中的数据附加问题？

> ID：14212517
> 
> 赞同：0
> 
> 时间：2013-01-08T10:06:11.583
> 
> 标签：ruby-on-rails, mongodb, rspec, factory-bot, rspec-rails

我是新来的轨道。我尝试为我使用 factory-girl gem 的模型编写测试。该数据取自 XML 文件。

我的问题是当我运行我的 rspec 文件时，每次都附加数据，在 XML 文件中我只有 32 个数据，但每次执行 rsepc 数据都在增加......

我什至尝试了 database_cleaner 但结果相同。

我想删除 factory-girl 中的数据。

有没有办法避免工厂女孩的重复？

反正有没有使用 where 条件，比如查询 factory-girl？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:16:03.343

试试这个：

以下内容用于重置**工厂女孩**数据。

**在您的Gemfile**中添加以下行并尝试捆绑安装。

```
gem "database_cleaner", ">= 0.8.0", :group => :test 
```

**在 spec_helper.rb 中：**

```
RSpec.configure do |config|
  # Other things

  # Clean up the database
  require 'database_cleaner'
  config.before(:suite) do
    DatabaseCleaner.strategy = :truncation
    DatabaseCleaner.orm = "mongoid"
  end

  config.before(:each) do
    DatabaseCleaner.clean
  end
end 
```

# android - 有没有办法在 Android 中定义 EditText 的最小值和最大值？

> ID：14212518
> 
> 赞同：153
> 
> 时间：2013-01-08T10:06:13.580
> 
> 标签：android, android-edittext

我想为`EditText`.

例如：如果有人尝试在其中输入月份值，则该值必须在 1-12 之间。

我可以通过使用来做到这一点，`TextWatcher`但我想知道在布局文件或其他地方是否有其他方法可以做到这一点。

编辑：我不想限制字符数。我想限制价值。例如，如果我`EditText`在输入 12 时限制月份 w 字符，它将接受它，但如果我输入 22，它在我输入时不能接受它。

* * *

## 回答 #1

> 赞同：304
> 
> 时间：2013-01-08T10:18:46.637

首先做这个类：

```
package com.test;

import android.text.InputFilter;
import android.text.Spanned;

public class InputFilterMinMax implements InputFilter {

    private int min, max;

    public InputFilterMinMax(int min, int max) {
        this.min = min;
        this.max = max;
    }

    public InputFilterMinMax(String min, String max) {
        this.min = Integer.parseInt(min);
        this.max = Integer.parseInt(max);
    }

    @Override
    public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {   
        try {
            int input = Integer.parseInt(dest.toString() + source.toString());
            if (isInRange(min, max, input))
                return null;
        } catch (NumberFormatException nfe) { }     
        return "";
    }

    private boolean isInRange(int a, int b, int c) {
        return b > a ? c >= a && c <= b : c >= b && c <= a;
    }
} 
```

然后从您的 Activity 使用它：

```
EditText et = (EditText) findViewById(R.id.myEditText);
et.setFilters(new InputFilter[]{ new InputFilterMinMax("1", "12")}); 
```

这将只允许用户输入**从 1 到 12 的值**。

**编辑 ：**

用 . 设置您的编辑文本`android:inputType="number"`。

[您可以在https://www.techcompose.com/how-to-set-minimum-and-maximum-value-in-edittext-in-android-app-development/](https://www.techcompose.com/how-to-set-minimum-and-maximum-value-in-edittext-in-android-app-development/)找到更多详细信息。

谢谢。

* * *

## 回答 #2

> 赞同：95
> 
> 时间：2013-09-28T22:05:55.897

Pratik 的代码有一个小错误。例如，如果一个值为 10，并且您在开头添加一个 1 以得到 110，则过滤器函数会将新值视为 101。

请参阅下面的解决方法：

```
@Override
public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {
    try {
        // Removes string that is to be replaced from destination
        // and adds the new string in.
        String newVal = dest.subSequence(0, dstart)
                // Note that below "toString()" is the only required:
                + source.subSequence(start, end).toString()
                + dest.subSequence(dend, dest.length());
        int input = Integer.parseInt(newVal);
        if (isInRange(min, max, input))
            return null;
    } catch (NumberFormatException nfe) { }
    return "";
} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-02-26T12:55:09.590

在我所看到的@Patrik 的解决方案和@Zac 的补充中，提供的代码仍然存在一个大问题：

如果`min==3`那么就不可能输入任何以 1 或 2 开头的数字（例如：15、23）
如果`min>=10`那么就不可能输入任何数字，因为每个数字都必须以 1、2、3 开头......

在我的理解中，我们无法`EditText`通过简单地使用 class 来实现 an 值的 min-max 限制`InputFilterMinMax`，至少对于 min 值来说不是，因为当用户输入一个正数时，该值会增长，我们可以轻松地执行即时测试以检查它是否达到限制或超出范围并阻止不符合要求的条目。测试最小值是另一回事，因为我们无法确定用户是否已完成输入，因此无法决定是否应该阻止。

这不完全是 OP 所要求的，但出于验证目的，我在我的解决方案中组合了一个`InputFilter`来测试最大值，并在假设用户完成输入`OnFocusChangeListener`的情况下失去焦点时重新测试最小值`EditText`，它是这样的：

```
package test;

import android.text.InputFilter;

import android.text.Spanned;

public class InputFilterMax implements InputFilter {

private int max;

public InputFilterMax(int max) {
    this.max = max;
}

public InputFilterMax(String max) {
    this.max = Integer.parseInt(max);
}

@Override
public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {   
    try {
        String replacement = source.subSequence(start, end).toString(); 

        String newVal = dest.toString().substring(0, dstart) + replacement +dest.toString().substring(dend, dest.toString().length());

        int input = Integer.parseInt(newVal);

        if (input<=max)
            return null;
    } catch (NumberFormatException nfe) { }   
//Maybe notify user that the value is not good      
return "";
}
} 
```

和`OnFocusChangeListenerMin`

```
package test;

import android.text.TextUtils;
import android.view.View;
import android.view.View.OnFocusChangeListener;

public class OnFocusChangeListenerMin implements OnFocusChangeListener {

private int min;

public OnFocusChangeListenerMin(int min) {
    this.min = min;
}

public OnFocusChangeListenerMin(String min) {
    this.min = Integer.parseInt(min);
}

@Override
public void onFocusChange(View v, boolean hasFocus) {
    if(!hasFocus) {
        String val = ((EditText)v).getText().toString();
        if(!TextUtils.isEmpty(val)){
            if(Integer.valueOf(val)<min){
                //Notify user that the value is not good
            }

        }
    }
}
} 
```

然后在 Activity 中设置`InputFilterMax`和`OnFocusChangeListenerMin`注意`EditText` ：您可以在 2 中设置 min 和 max `onFocusChangeListener`。

```
mQteEditText.setOnFocusChangeListener( new OnFocusChangeListenerMin('20');
mQteEditText.setFilters(new InputFilter[]{new InputFilterMax(getActivity(),'50')}); 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2019-11-27T10:11:15.617

如果有人需要 Kotlin（使用实用程序）

```
class InputFilterMinMax: InputFilter {
    private var min:Int = 0
    private var max:Int = 0
    constructor(min:Int, max:Int) {
        this.min = min
        this.max = max
    }
    constructor(min:String, max:String) {
        this.min = Integer.parseInt(min)
        this.max = Integer.parseInt(max)
    }
    override fun filter(source:CharSequence, start:Int, end:Int, dest: Spanned, dstart:Int, dend:Int): CharSequence? {
        try
        {
            val input = Integer.parseInt(dest.toString() + source.toString())
            if (isInRange(min, max, input))
                return null
        }
        catch (nfe:NumberFormatException) {}
        return ""
    }
    private fun isInRange(a:Int, b:Int, c:Int):Boolean {
        return if (b > a) c in a..b else c in b..a
    }
} 
```

然后在你的 Kotlin 类中使用它

```
percentage_edit_text.filters = arrayOf(Utilities.InputFilterMinMax(1, 100)) 
```

这个 EditText 允许从 1 到 100。

然后从您的 XML 中使用它

```
android:inputType="number" 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2016-08-05T16:23:09.687

Pratik 和 Zac 答案的扩展。Zac 在他的回答中修复了 Pratik 的一个小错误。但我注意到代码不支持负值，它会抛出 NumberFormatException。要解决此问题并允许 MIN 为负数，请使用以下代码。

在其他两行之间添加这一行（粗体）：

newVal = newVal.substring(0, dstart) + source.toString()+ newVal.substring(dstart, newVal.length());

**if(newVal.equalsIgnoreCase("-") && min < 0)return null;**

int 输入 = Integer.parseInt(newVal);

```
public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {
    try {
        // Remove the string out of destination that is to be replaced
        String newVal = dest.toString().substring(0, dstart) + dest.toString().substring(dend, dest.toString().length());
        // Add the new string in
        newVal = newVal.substring(0, dstart) + source.toString() + newVal.substring(dstart, newVal.length());
        //****Add this line (below) to allow Negative values***// 
        if(newVal.equalsIgnoreCase("-") && min < 0)return null;
        int input = Integer.parseInt(newVal);
        if (isInRange(min, max, input))
            return null;
    } catch (NumberFormatException nfe) {
        nfe.printStackTrace();
    }
    return "";
} 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-07-30T10:10:36.597

我扩展了@Pratik Sharmas 代码以使用 BigDecimal 对象而不是整数，以便它可以接受更大的数字，并考虑 EditText 中不是数字的任何格式（如货币格式，即空格、逗号和句点）

编辑：请注意，此实现在 BigDecimal 上设置了 2 作为最小有效数字（请参阅 MIN_SIG_FIG 常量），因为我将它用于货币，因此小数点前总是有 2 个前导数字。根据您自己的实现的需要更改 MIN_SIG_FIG 常量。

```
public class InputFilterMinMax implements InputFilter {
private static final int MIN_SIG_FIG = 2;
private BigDecimal min, max;

public InputFilterMinMax(BigDecimal min, BigDecimal max) {
    this.min = min;
    this.max = max;
}

public InputFilterMinMax(String min, String max) {
    this.min = new BigDecimal(min);
    this.max = new BigDecimal(max);
}

@Override
public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart,
        int dend) {
    try {
        BigDecimal input = formatStringToBigDecimal(dest.toString()
                + source.toString());

        if (isInRange(min, max, input)) {

            return null;
        }
    } catch (NumberFormatException nfe) {

    }
    return "";
}

private boolean isInRange(BigDecimal a, BigDecimal b, BigDecimal c) {
    return b.compareTo(a) > 0 ? c.compareTo(a) >= 0 && c.compareTo(b) <= 0
            : c.compareTo(b) >= 0 && c.compareTo(a) <= 0;
}

public static BigDecimal formatStringToBigDecimal(String n) {

    Number number = null;
    try {
        number = getDefaultNumberFormat().parse(n.replaceAll("[^\\d]", ""));

        BigDecimal parsed = new BigDecimal(number.doubleValue()).divide(new BigDecimal(100), 2,
                BigDecimal.ROUND_UNNECESSARY);
        return parsed;
    } catch (ParseException e) {
        return new BigDecimal(0);
    }
}

private static NumberFormat getDefaultNumberFormat() {
    NumberFormat nf = NumberFormat.getInstance(Locale.getDefault());
    nf.setMinimumFractionDigits(MIN_SIG_FIG);
    return nf;
} 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2015-04-12T15:20:35.850

如果您需要像 -90:90 这样的负数范围，则可以使用此解决方案。

```
public class InputFilterMinMax implements InputFilter {

private int min, max;

public InputFilterMinMax(int min, int max) {
    this.min = min;
    this.max = max;
}

public InputFilterMinMax(String min, String max) {
    this.min = Integer.parseInt(min);
    this.max = Integer.parseInt(max);
}

@Override
public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {
    try {
        String stringInput = dest.toString() + source.toString();
        int value;
        if (stringInput.length() == 1 && stringInput.charAt(0) == '-') {
            value = -1;
        } else {
            value = Integer.parseInt(stringInput);
        }
        if (isInRange(min, max, value))
            return null;
    } catch (NumberFormatException nfe) {
    }
    return "";
}

private boolean isInRange(int min, int max, int value) {
    return max > min ? value >= min && value <= max : value >= max && value <= min;
}
} 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2015-08-05T18:00:33.763

我找到了自己的答案。现在很晚了，但我想和你分享。我实现了这个接口：

```
import android.text.TextWatcher;

public abstract class MinMaxTextWatcher implements TextWatcher {
    int min, max;
    public MinMaxTextWatcher(int min, int max) {
        super();
        this.min = min;
        this.max = max;
    }

} 
```

然后在您的活动中以这种方式实现它：

```
private void limitEditText(final EditText ed, int min, int max) {
    ed.addTextChangedListener(new MinMaxTextWatcher(min, max) {
        @Override
        public void beforeTextChanged(CharSequence s, int start, int count, int after) {

        }

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {

        }

        @Override
        public void afterTextChanged(Editable s) {
            String str = s.toString();
            int n = 0;
            try {
                n = Integer.parseInt(str);
                if(n < min) {
                    ed.setText(min);
                    Toast.makeText(getApplicationContext(), "Minimum allowed is " + min, Toast.LENGTH_SHORT).show();
                }
                else if(n > max) {
                    ed.setText("" + max);
                    Toast.makeText(getApplicationContext(), "Maximum allowed is " + max, Toast.LENGTH_SHORT).show();
                }
            }
            catch(NumberFormatException nfe) {
                ed.setText("" + min);
                Toast.makeText(getApplicationContext(), "Bad format for number!" + max, Toast.LENGTH_SHORT).show();
            }
        }
    });
} 
```

这是一个非常简单的答案，如果有更好的请告诉我。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2017-09-15T09:57:09.653

接受的答案有问题。

```
int input = Integer.parseInt(dest.toString() + source.toString()); 
```

如果我将光标移动到文本中间，然后输入一些东西，那么上面的语句会产生错误的结果。比如先输入“12”，然后在1到2之间输入“0”，那么上面的语句会产生“120”而不是102。我把这个语句修改为下面的语句：

```
String destString = dest.toString();
  String inputString = destString.substring(0, dstart) + source.toString() + destString.substring(dstart);
  int input = Integer.parseInt(inputString); 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2014-08-18T15:19:10.860

我做了一种更简单的方法来为 Edittext 设置最小值/最大值。我使用算术键盘，我使用这种方法：

```
 private int limit(EditText x,int z,int limin,int limax){

    if( x.getText().toString()==null || x.getText().toString().length()==0){
        x.setText(Integer.toString(limin));
        return z=0;
    }
    else{
        z = Integer.parseInt(x.getText().toString());
         if(z <limin || z>limax){
             if(z<10){
                 x.setText(Integer.toString(limin));
                return  z=0;
             }
            else{
                x.setText(Integer.toString(limax));
                return z=limax;
            }

         }
         else
            return z = Integer.parseInt(x.getText().toString());
    }
 } 
```

该方法接受您的所有值，但如果用户值不符合您的限制，它将自动设置为最小/最大限制。例如。limit limin=10, limax =80 如果用户设置为 8，则自动将 10 保存到变量中，并将 EditText 设置为 10。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2018-02-16T13:17:04.113

我知道已经有一百万个答案，其中一个被接受了。但是，已接受的答案中有许多错误，其余大多数只是修复其中一个（或可能两个），而没有扩展到所有可能的用例。

因此，我基本上编译了支持答案中建议的大多数错误修复，并添加了一种方法以允许在 0 方向上连续输入范围之外的数字（如果范围不是从 0 开始），至少直到它确定它不能再在范围内。因为要清楚，这是唯一一次真正给许多其他解决方案带来麻烦。

这是修复：

```
public class InputFilterIntRange implements InputFilter, View.OnFocusChangeListener {

    private final int min, max;

    public InputFilterIntRange(int min, int max) {
        if (min > max) {
            // Input sanitation for the filter itself
            int mid = max;
            max = min;
            min = mid;
        }
        this.min = min;
        this.max = max;
    }

    @Override
    public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {

        // Determine the final string that will result from the attempted input
        String destString = dest.toString();
        String inputString = destString.substring(0, dstart) + source.toString() + destString.substring(dstart);

        // Don't prevent - sign from being entered first if min is negative
        if (inputString.equalsIgnoreCase("-") && min < 0) return null;

        try {
            int input = Integer.parseInt(inputString);
            if (mightBeInRange(input))
                return null;
        } catch (NumberFormatException nfe) {}

        return "";
    }

    @Override
    public void onFocusChange(View v, boolean hasFocus) {

        // Since we can't actively filter all values
        // (ex: range 25 -> 350, input "15" - could be working on typing "150"),
        // lock values to range after text loses focus
        if (!hasFocus) {
            if (v instanceof EditText) sanitizeValues((EditText) v);
        }
    }

    private boolean mightBeInRange(int value) {
        // Quick "fail"
        if (value >= 0 && value > max) return false;
        if (value >= 0 && value >= min) return true;
        if (value < 0 && value < min) return false;
        if (value < 0 && value <= max) return true;

        boolean negativeInput = value < 0;

        // If min and max have the same number of digits, we can actively filter
        if (numberOfDigits(min) == numberOfDigits(max)) {
            if (!negativeInput) {
                if (numberOfDigits(value) >= numberOfDigits(min) && value < min) return false;
            } else {
                if (numberOfDigits(value) >= numberOfDigits(max) && value > max) return false;
            }
        }

        return true;
    }

    private int numberOfDigits(int n) {
        return String.valueOf(n).replace("-", "").length();
    }

    private void sanitizeValues(EditText valueText) {
        try {
            int value = Integer.parseInt(valueText.getText().toString());
            // If value is outside the range, bring it up/down to the endpoint
            if (value < min) {
                value = min;
                valueText.setText(String.valueOf(value));
            } else if (value > max) {
                value = max;
                valueText.setText(String.valueOf(value));
            }
        } catch (NumberFormatException nfe) {
            valueText.setText("");
        }
    }

} 
```

请注意，某些输入情况不可能“主动”处理（即，当用户输入时），因此我们必须忽略它们并在用户完成文本编辑后处理它们。

以下是您可以如何使用它：

```
EditText myEditText = findViewById(R.id.my_edit_text);
InputFilterIntRange rangeFilter = new InputFilterIntRange(25, 350);
myEditText.setFilters(new InputFilter[]{rangeFilter});

// Following line is only necessary if your range is like [25, 350] or [-350, -25].
// If your range has 0 as an endpoint or allows some negative AND positive numbers, 
// all cases will be handled pre-emptively.
myEditText.setOnFocusChangeListener(rangeFilter); 
```

现在，当用户尝试输入比范围允许的更接近 0 的数字时，会发生以下两种情况之一：

1.  如果`min`和`max`具有相同的位数，则一旦到达最后一位，就根本不允许输入。

2.  如果文本失去焦点时字段中留下了超出范围的数字，则会自动调整到最近的边界。

当然，用户将永远不会被允许输入一个比范围允许的值更远离 0 的值，因此，这样的数字也不可能“意外”出现在文本字段中。

**已知的问题？）**

1.  这仅`EditText`在用户完成后失去焦点时才有效。

另一种选择是在用户点击“完成”/返回键时进行清理，但在许多甚至大多数情况下，这无论如何都会导致焦点丢失。

但是，关闭软键盘**不会**自动取消焦点元素。我敢肯定 99.99% 的 Android 开发人员都希望它会这样做（而且，对`EditText`元素的关注处理通常不是一个泥潭），但到目前为止还没有内置的功能。如果需要，我发现解决此问题的最简单方法是扩展`EditText`如下内容：

```
public class EditTextCloseEvent extends AppCompatEditText {

    public EditTextCloseEvent(Context context) {
        super(context);
    }

    public EditTextCloseEvent(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public EditTextCloseEvent(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    @Override
    public boolean onKeyPreIme(int keyCode, KeyEvent event) {
        if (event.getKeyCode() == KeyEvent.KEYCODE_BACK) {
            for (InputFilter filter : this.getFilters()) {
                if (filter instanceof InputFilterIntRange)
                    ((InputFilterIntRange) filter).onFocusChange(this, false);
            }
        }
        return super.dispatchKeyEvent(event);
    }
} 
```

即使视图*实际上*并没有失去焦点，这也会“欺骗”过滤器来清理输入。如果视图后来碰巧失去了自己的焦点，输入卫生将再次触发，但由于它已经被修复，所以什么都不会改变。

**结束**

唷。那是很多。最初看起来这将是一个非常简单的问题，最终发现了许多丑陋的普通 Android（至少在 Java 中）。再一次，**如果您的范围不以某种方式包含 0 ，****您只需要添加侦听器并扩展。`EditText`**（实际上，如果您的范围不包括 0，而是从 1 或 -1 开始，您也不会遇到问题。）

最后一点，这仅适用于**ints**。当然有一种方法可以实现它以使用小数（`double`, `float`），但由于我和最初的提问者都不需要它，我并不特别想深入了解它。简单地使用完成后过滤以及以下几行将非常容易：

```
// Quick "fail"
if (value >= 0 && value > max) return false;
if (value >= 0 && value >= min) return true;
if (value < 0 && value < min) return false;
if (value < 0 && value <= max) return true; 
```

您只需从更改`int`为`float`（或`double`），允许插入单个`.`（或`,`，取决于国家/地区？），并解析为十进制类型之一而不是`int`.

无论如何，它处理了大部分工作，所以它的工作方式非常相似。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2015-03-01T09:08:55.350

如果您只关心最大限制，那么只需添加以下行

```
android:maxLength="10" 
```

如果您需要添加最小限制，那么您可以这样做，在这种情况下，最小限制为 7。用户被限制输入最小和最大限制之间的字符（在 8 和 10 之间）

```
public final static boolean isValidCellPhone(String number){
        if (number.length() < 8 || number.length() >10 ) {
            return false;
        } else {

           return android.util.Patterns.PHONE.matcher(number).matches();
        }
    } 
```

如果您还需要限制用户在开始时输入 01 然后像这样修改 if 条件

```
if (!(number.startsWith("01")) || number.length() < 8 || number.length() >10 ) {  
.
.
.
} 
```

在结束调用方法如

```
 ....else if (!(Helper.isValidMobilePhone(textMobileNo))){
                        Helper.setEditTextError(etMobileNo,"Invalid Mobile Number");
                    }...... 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2016-06-28T08:55:40.763

```
@Override
public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {
    try {
        String prefix = dest.toString().substring(0, dstart);
        String insert = source.toString();
        String suffix = dest.toString().substring(dend);
        String input_string = prefix + insert + suffix;
        int input = Integer.parseInt(input_string);

        if (isInRange(min, max, input) || input_string.length() < String.valueOf(min).length())
            return null;
    } catch (NumberFormatException nfe) { }
    return "";
}

private boolean isInRange(int a, int b, int c) {
    return b > a ? c >= a && c <= b : c >= b && c <= a;
} 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2018-12-25T19:35:04.910

Kotlin 上非常简单的示例：

```
import android.text.InputFilter
import android.text.Spanned

class InputFilterRange(private var range: IntRange) : InputFilter {

    override fun filter(source: CharSequence, start: Int, end: Int, dest: Spanned, dstart: Int, dend: Int) = try {
        val input = Integer.parseInt(dest.toString() + source.toString())
        if (range.contains(input)) null else ""
    } catch (nfe: NumberFormatException) {
        ""
    }
} 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2020-03-24T03:07:35.697

@Patrik 的代码有一个好主意，但有很多错误。@Zac 和 @Anthony B（负数解决方案）已经解决了其中的一些问题，但 @Zac 的代码仍然存在 3 个市长错误：

**1.** 如果用户删除了 EditText 中的所有条目，则无法再次键入任何数字。当然，这可以通过在每个字段上使用 EditText 更改侦听器来控制，但它会消除为每个字段使用通用 InputFilter 类的美感应用程序中的 EditText。

**2.** 有@Guernee4 说，如果例如 min = 3，则不可能键入以 1 开头的任何数字。

**3.** 如果例如 min = 0，你可以键入有许多你希望的零，这不是优雅的结果。或者，如果无论最小值是多少，用户都可以将光标放在第一个数字的左边大小，在左边放置一堆前导零，也不优雅。

我想出了@Zac 代码的这些小改动来解决这 3 个错误。关于错误＃3，我仍然无法完全删除左侧的所有前导零；它总是可以是一个，但在这种情况下，00、01、0100 等比 000000、001、000100 等更优雅。等等。

这是代码：

```
@Override
    public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {
        try {

            // Using @Zac's initial solution
            String lastVal = dest.toString().substring(0, dstart) + dest.toString().substring(dend);
            String newVal = lastVal.substring(0, dstart) + source.toString() + lastVal.substring(dstart);
            int input = Integer.parseInt(newVal);

            // To avoid deleting all numbers and avoid @Guerneen4's case
            if (input < min && lastVal.equals("")) return String.valueOf(min);

            // Normal min, max check
            if (isInRange(min, max, input)) {

                // To avoid more than two leading zeros to the left
                String lastDest = dest.toString();
                String checkStr = lastDest.replaceFirst("^0+(?!$)", "");
                if (checkStr.length() < lastDest.length()) return "";

                return null;
            }
        } catch (NumberFormatException ignored) {}
        return "";
    } 
```

祝你今天过得愉快！

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2013-01-08T10:37:06.853

请检查此代码

```
 String pass = EditText.getText().toString(); 
    if(TextUtils.isEmpty(pass) || pass.length < [YOUR MIN LENGTH]) 
    { 
       EditText.setError("You must have x characters in your txt"); 
        return; 
    }

    //continue processing

edittext.setOnFocusChangeListener( new OnFocusChangeListener() {

       @Override
       public void onFocusChange(View v, boolean hasFocus) {
          if(hasFocus) {
           // USE your code here 
  } 
```

使用以下链接了解有关 edittext 和带有文本观察器的 edittextfilteres 的更多详细信息。

[http://www.mobisoftinfotech.com/blog/android/android-edittext-setfilters-example-numeric-text-field-patterns-and-length-restriction/](http://www.mobisoftinfotech.com/blog/android/android-edittext-setfilters-example-numeric-text-field-patterns-and-length-restriction/)

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2018-05-16T04:02:50.760

这是我的代码 max=100, min=0

xml

```
<TextView
                    android:id="@+id/txt_Mass_smallWork"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:textColor="#000"
                    android:textSize="20sp"
                    android:textStyle="bold" /> 
```

爪哇

```
EditText ed = findViewById(R.id.txt_Mass_smallWork);
    ed.addTextChangedListener(new TextWatcher() {
        @Override
        public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {`

        }

        @Override
        public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {
            if(!charSequence.equals("")) {
                int massValue = Integer.parseInt(charSequence.toString());
                if (massValue > 10) {
                    ed.setFilters(new InputFilter[]{new InputFilter.LengthFilter(2)});
                } else {
                    ed.setFilters(new InputFilter[]{new InputFilter.LengthFilter(3)});
                }
            }
        }

        @Override
        public void afterTextChanged(Editable editable) {

        }
    }); 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2018-08-22T21:00:28.783

*@Pratik 夏尔马*

要支持***负数*****，请在filter**方法中添加以下代码：

```
package ir.aboy.electronicarsenal;

import android.text.InputFilter;
import android.text.Spanned;

public class InputFilterMinMax implements InputFilter {

  private int min, max;
  int input;

  InputFilterMinMax(int min, int max) {
    this.min = min;
    this.max = max;
  }

  public InputFilterMinMax(String min, String max) {
    this.min = Integer.parseInt(min);
    this.max = Integer.parseInt(max);
  }

  @Override
  public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {
    try {

      if ((dest.toString() + source.toString()).equals("-")) {
        source = "-1";
      }

      input = Integer.parseInt(dest.toString() + source.toString());
      if (isInRange(min, max, input))
        return null;

    } catch (NumberFormatException ignored) {
    }
    return "";
  }

  private boolean isInRange(int a, int b, int c) {
    return b > a ? c >= a && c <= b : c >= b && c <= a;
  }

} 
```

然后从您的 Activity 使用它：

```
findViewById(R.id.myEditText).setFilters(new InputFilter[]{ new InputFilterMinMax(1, 12)}); 
```

设置您的edittext：

```
android:inputType="number|numberSigned" 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2021-03-21T10:48:36.100

## 首先创建一个方法如下

```
private InputFilter inRange(int min, int max) {
    return new InputFilter(){
        @Override
        public CharSequence filter(CharSequence source, int start1, int end, Spanned dest, int dstart, int dend) {
            try {
                int input = Integer.parseInt(dest.toString() + source.toString());
                if (input < min || input > max){
                    return "";
                } else {
                    return null;
                }
            } catch (Exception e) {
                e.printStackTrace();
                return null;
            }
        }
    };
} 
```

## 像这样使用它：

```
edittext1.setFilters(new InputFilter[]{inRange(3,60)});
edittext2.setFilters(new InputFilter[]{inRange(1,100)}); 
```

**您可以制作更多文件管理器并像这样添加：**

```
edittext1.setFilters(new InputFilter[]{filter1(somevalue),filter2(somevalue)}); 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2021-04-16T19:19:50.650

这里的许多解决方案都很棒，但我想提供一个更快的替代方案，如果您只是在寻找一种防止溢出的方法，这可能就足够了：

```
android:maxLength="9" 
```

这将确保您不会在非小数的 32 位整数上出现溢出。所以这里的最小值是`-99999999`，最大值是`999999999`。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2021-08-15T09:51:39.563

在科特林：

```
class InputFilterMinMax(private val min: Float, private val max: Float) : InputFilter {

    override fun filter(source: CharSequence, start: Int, end: Int, dest: Spanned, dstart: Int, dend: Int): CharSequence? {
        try {
            val input = (dest.subSequence(0, dstart).toString() + source + dest.subSequence(dend, dest.length)).toFloat()
            if (isInRange(min, max, input)) return null
        } catch (e: NumberFormatException) {
            e.printStackTrace()
        }
        return ""
    }

    private fun isInRange(a: Float, b: Float, c: Float): Boolean {
        return if (b > a) c in a..b else c in b..a
    }
} 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2016-04-08T08:01:27.063

//仍然有一些问题，但在这里你可以在任何范围（正或负）使用最小值，最大值

```
// in filter calss
 @Override
 public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {
        try {
            // Remove the string out of destination that is to be replaced
            int input;
            String newVal = dest.toString() + source.toString();
            if (newVal.length() == 1 && newVal.charAt(0) == '-') {
                input = min; //allow
            }
            else {
                newVal = dest.toString().substring(0, dstart) + dest.toString().substring(dend, dest.toString().length());
                // Add the new string in
                newVal = newVal.substring(0, dstart) + source.toString() + newVal.substring(dstart, newVal.length());
                input = Integer.parseInt(newVal);
            }

            //int input = Integer.parseInt(dest.toString() + source.toString());

            if (isInRange(min, max, input))
                return null;
        } catch (NumberFormatException nfe) {
        }
        return "";
    }

//also the filler must set as below: in the edit createview
// to allow enter number and backspace.
et.setFilters(new InputFilter[]{new InputFilterMinMax(min >= 10 ?  "0" : String.valueOf(min), max >-10 ? String.valueOf(max) :"0" )});

//and at same time must check range in the TextWatcher()
et.addTextChangedListener(new
 TextWatcher() {

      @Override
      public void afterTextChanged (Editable editable)
      {
         String tmpstr = et.getText().toString();
         if (!tmpstr.isEmpty() && !tmpstr.equals("-") ) {
             int datavalue = Integer.parseInt(tmpstr);
             if ( datavalue >= min || datavalue <= max) {
               // accept data ...     
             }
         }
      }
 }); 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2016-05-24T09:56:24.087

要添加到 Pratik 的答案，这里是一个修改版本，用户也可以输入最少 2 位数字，例如 15 到 100：

```
 import android.text.InputFilter;
 import android.text.Spanned;

public class InputFilterMinMax implements InputFilter {

    private int min, max;

    public InputFilterMinMax(int min, int max) {
        this.min = min;
        this.max = max;
    }

    public InputFilterMinMax(String min, String max) {
        this.min = Integer.parseInt(min);
        this.max = Integer.parseInt(max);
    }

    @Override
    public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {

        try {
            if(end==1)
                min=Integer.parseInt(source.toString());
            int input = Integer.parseInt(dest.toString() + source.toString());
            if (isInRange(min, max, input))
                return null;
        } catch (NumberFormatException nfe) {
        }
        return "";
    }

    private boolean isInRange(int a, int b, int c) {

        return b > a ? c >= a && c <= b : c >= b && c <= a;
    }} 
```

> 补充： if(end==1) min=Integer.parseInt(source.toString());

希望这可以帮助。请不要无缘无故投反对票。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2018-03-19T14:20:07.853

这是我使用的方式，它适用于负数

首先，使用以下代码创建 MinMaxFIlter.java 类：

```
import android.text.InputFilter;
import android.text.Spanned;
import android.util.Log;

/**
* Created by 21 on 4/5/2016.
*/
public class MinMaxFilter implements InputFilter {

private double mIntMin, mIntMax;

public MinMaxFilter(double minValue, double maxValue) {
    this.mIntMin = minValue;
    this.mIntMax = maxValue;
}

public MinMaxFilter(String minValue, String maxValue) {
    this.mIntMin = Double.parseDouble(minValue);
    this.mIntMax = Double.parseDouble(maxValue);
}

@Override
public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {
    try {
        Boolean isNeg = false;
        String provi = dest.toString() + source.toString();
        if("-".equals(provi.substring(0,1))){
            if(provi.length()>1) {
                provi = provi.substring(1, provi.length());
                isNeg = true;
            }
            else{
                if("".equals(source)){
                    return null;
                }
                return "-";
            }
        }

        double input = Double.parseDouble(provi); 
        if(isNeg){input = input * (-1);}

        if (isInRange(mIntMin, mIntMax, input)) {
            return null;
        }
    } catch (Exception nfe) {}
    return "";
}

private boolean isInRange(double a, double b, double c) {
    if((c>=a && c<=b)){
        return true;
    }
    else{
        return false;
    }
}
} 
```

然后，创建过滤器并将其设置为您的编辑文本，如下所示：

```
EditText edittext = new EditText(context);
editext.setInputType(InputType.TYPE_CLASS_NUMBER | InputType.TYPE_NUMBER_FLAG_SIGNED);
eInt.setFilters(new InputFilter[]{new MinMaxFilter(min, max)}); 
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2019-01-22T02:06:45.900

您可以使用 InputFilter 执行此操作。显然，您可以使用这个输入过滤器接口。在您以烦人的方式创建一个扩展输入过滤器的新类之前，您可以将此快捷方式与内部类接口实例化一起使用。

因此，您只需这样做：

```
EditText subTargetTime = (EditText) findViewById(R.id.my_time);
subTargetTime.setFilters( new InputFilter[] {
                new InputFilter() {
                    @Override
                    public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {
                        int t = Integer.parseInt(source.toString());
                        if(t <8) { t = 8; }
                        return t+"";

                    }
                }
        }); 
```

在此示例中，我检查 EditText 的值是否大于 8。如果不是，则应将其设置为 8。因此，显然您需要自己计算 min max 或任何过滤器逻辑。但至少你可以将过滤器逻辑非常简洁和简短地直接写入 EditText。

希望这可以帮助

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2019-08-01T21:03:45.503

为了定义 EditText 的最小值，我使用了这个：

```
if (message.trim().length() >= 1 && message.trim().length() <= 12) {
  // do stuf
} else {
  // Too short or too long
} 
```

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2020-10-28T19:13:25.240

我在做一个宠物项目时偶然发现了这个问题。我在这里阅读了一些答案，我可能在我的代码中采用了其中的一两个。

**坏消息：**我设法用一种非常肮脏的方式做到了这一点（你会明白为什么）。还有一些我没有费心去解决的错误（我是在凌晨 2 点写的），比如如果`min`值为 10，你将无法输入一个数字开头。

**好消息：**我已经设法摆脱了@nnyerges 提到的前导零错误，仅使用`InputFilter`向下到只有一个 0，即如果`min`值为 0。但是，`InputFilter`当用户删除后跟零的第一个数字，例如，如果首先用户输入`1000`但随后删除`1`，它将变为`000`。那很丑陋，这就是我对`TextChangedListener`/的肮脏丑陋使用的地方`TextWatcher`。（我知道 OP 已经说过他可以使用 来做到这一点`TextWatcher`，但无论如何。 ）使用 the 的
另一个限制（或者**我**的限制？）`InputFilter`是当`inputType`is时`numberDecimal`，这意味着用户可以输入小数点分隔符。示例案例：范围是`0 - 100`，用户输入`99.99`, 用户然后删除分隔符，我们有`9999`. 我们不想这样，对吗？
我也让它**适应负值**。

我的代码中的一些功能，不管你喜欢与否，包括修剪无关紧要的 s，例如如果用户从中`0`删除，只要它在定义的范围内，它就会修剪前导s，因此最终结果将是 32。第二，当用户尝试删除负号 ( ) 或小数分隔符 ( ) 时，它会检查删除后的结果数字是否仍在范围内。如果不是，那么它将恢复到最后一个值。换句话说，不允许用户进行这种删除。**但是**，如果您希望在发生这种情况时将新值设置为or ，您也可以这样做。`1``10032``0``-``.`**`min``max`**

 ****注意：**我懒得连本地化都麻烦了，所以使用逗号作为小数分隔符的人将不得不自己手动更改它。
**第二个注意事项：**代码非常混乱，可能有一些或很多冗余检查，所以要注意。另外，如果您有任何建议，请随时发表评论，因为我也想改进它。我将来可能需要使用它。谁知道？

无论如何，它来了。

```
import android.text.InputFilter;
import android.text.Spanned;
import android.util.Log;

public class InputFilterMinMax implements InputFilter {

    private double min, max;

    public InputFilterMinMax(double min, double max) {
        this.min = min;
        this.max = max;
    }

    public InputFilterMinMax(String min, String max) {
        this.min = Double.parseDouble(min);
        this.max = Double.parseDouble(max);
    }

    @Override
    public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {
        try {
            String lastVal = dest.toString();
            String newVal = lastVal.substring(0, dstart) + source.toString() + lastVal.substring(dstart);
            String strInput = source.toString();
            double input;

            if (strInput.equals("-") && (lastVal.length() == 0 || lastVal.equals("0"))) {
                return null;
            } else {
                input = Double.parseDouble(newVal);
            }

            if (isInRange(min, max, input)) {
                try {
                    if (lastVal.equals("0") && strInput.equals("0") && !strInput.equals(".")) {
                        Log.d("Checkpoint 1", "Can't put 0 again.");
                        return "";
                    } else if (strInput.equals("0")) {
                        if (dstart == 0) {
                            if (lastVal.substring(0, 1).equals("0")) {
                                Log.d("Checkpoint 2", "Can't put 0 again.");
                                return "";
                            } else if (!lastVal.substring(0, 1).equals(".")) {
                                Log.d("Checkpoint 3", "Can't put 0 in front of them.");
                                return "";
                            }
                        } else {
                            if (lastVal.substring(0, 1).equals("0") && dstart == 1) {
                                Log.d("Checkpoint 4", "Can't put 0 again.");
                                return "";
                            } else if (lastVal.substring(0, 1).equals("-")) {
                                if (Double.parseDouble(lastVal) == 0) {
                                    if (!lastVal.contains(".")) {
                                        Log.d("Checkpoint 5", "Can't put 0 here.");
                                        return "";
                                    } else {
                                        if (dstart <= lastVal.indexOf(".")) {
                                            Log.d("Checkpoint 6", "Can't put 0 here.");
                                            return "";
                                        }
                                    }
                                } else {
                                    if (lastVal.indexOf("0") == 1 && (dstart == 1 || dstart == 2)) {
                                        Log.d("Checkpoint 7", "Can't put 0 here.");
                                        return "";
                                    } else if ((!lastVal.substring(1, 2).equals("0") && !lastVal.substring(1, 2).equals(".")) && dstart == 1) {
                                        Log.d("Checkpoint 8", "Can't put 0 here.");
                                        return "";
                                    }
                                }
                            }
                        }
                    }

                    /**
                     * If last value is a negative that equals min value,
                     * and user tries to input a decimal separator at the
                     * very end, ignore it, because they won't be able to
                     * input anything except 0 after that anyway.
                     */
                    if (strInput.equals(".") && lastVal.substring(0,1).equals("-")
                            && Double.parseDouble(lastVal) == min && dstart == lastVal.length()) {
                        return "";
                    }
                } catch (Exception e) {
                }
                return null;
            }
        } catch (Exception ignored) {
            ignored.printStackTrace();
        }
        return "";
    }

    private boolean isInRange(double a, double b, double c) {
        return b > a ? c >= a && c <= b : c >= b && c <= a;
    }
} 
```

现在，真正肮脏的部分：

```
import androidx.appcompat.app.AppCompatActivity;

import android.os.Bundle;
import android.text.Editable;
import android.text.InputFilter;
import android.text.TextWatcher;
import android.util.Log;
import android.widget.EditText;

public class MainActivity extends AppCompatActivity implements TextWatcher {

    private EditText editInput;

    /**
     * Var to store old value in case the new value is either
     * out of range or invalid somehow. This was because I
     * needed a double value for my app, which means I can
     * enter a dot (.), and that could mean trouble if I decided
     * to delete that dot, e.g. assume the range is 0 - 100.
     * At first I enter 99.99, the InputFilter would allow that,
     * but what if somewhere down the line I decided to delete
     * the dot/decimal separator for "fun"?
     * Wow, now I have 9999.
     * Also, when I delete negative notation, it can produce
     * the same problem.
     */
    private String oldVal;

    private int min, max;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        editInput = findViewById(R.id.edt_input);
        editInput.addTextChangedListener(this);

        min = -1600;
        max = 1500;

        editInput.setFilters(new InputFilter[]{new InputFilterMinMax(min, max)});
    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {
        oldVal = saveOldValue(s, start);
    }

    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {

    }

    @Override
    public void afterTextChanged(Editable s) {
            validateChange(editInput, oldVal);
    }

    private String saveOldValue(CharSequence s, int start) {
        String oldVal = s.toString();
        if (oldVal.contains(".") && start == oldVal.indexOf(".") && start != oldVal.length() - 1) {
            return oldVal;
        } else if (oldVal.contains("-") && start == oldVal.indexOf("-") && start != oldVal.length() - 1) {
            return oldVal;
        }
        return null;
    }

    private void validateChange(EditText editText, String oldVal) {
        String strNewVal = editText.getText().toString().trim();
        boolean isChanged = false;

        if (strNewVal.indexOf("0") == 0 || (strNewVal.indexOf("-") == 0 && strNewVal.indexOf("0") == 1)) {
            if (strNewVal.contains(".")) {
                while ((strNewVal.indexOf("0") == 0 && strNewVal.indexOf(".") != 1 && strNewVal.length() > 2) ||
                        (strNewVal.indexOf("0") == 1 && strNewVal.indexOf(".") != 2 && strNewVal.length() > 3)) {
                    Log.d("Trimming 0", "");
                    strNewVal = strNewVal.replaceFirst("0", "");
                    isChanged = true;
                }
            } else if (!strNewVal.contains(".")) {
                while (strNewVal.indexOf("0") == 0 && strNewVal.length() > 1) {
                    Log.d("Trimming 0", "");
                    strNewVal = strNewVal.replaceFirst("0", "");
                    isChanged = true;
                }

                if (Double.parseDouble(strNewVal) > max) {
                    editText.setText(oldVal); // Or, you can set it to max values here.
                    return;
                }
            }
        }

        if (strNewVal.indexOf(".") == 0) {
            strNewVal = "0" + strNewVal;
            isChanged = true;
        }

        try {
            double newVal = Double.parseDouble(strNewVal);
            Log.d("NewVal: ", String.valueOf(newVal));
            if (newVal > max || newVal < min) {
                Log.d("Over Limit", "Let's Reset");
                editText.setText(oldVal); // Or, you can set it to min or max values here.
            }
        } catch (NumberFormatException e) {
            e.printStackTrace();
        }

        if (isChanged) {
            editText.setText(strNewVal);
        }
    }
} 
```

* * *

## 回答 #28

> 赞同：-1
> 
> 时间：2019-10-31T14:31:53.623

这是我对 Pratik Sharma 的回答的看法`Kotlin`，`Double`如果有人需要的话

```
class InputFilterMinMax : InputFilter {

private var min: Double = MIN_LIMIT
private var max: Double = MIN_LIMIT

constructor(min: Int, max: Int) {
    this.min = min.toDouble()
    this.max = max.toDouble()
}

constructor(min: String, max: String) {
    this.min = min.toDouble()
    this.max = max.toDouble()
}

constructor(min: Double, max: Double) {
    this.min = min
    this.max = max
}

override fun filter(
    source: CharSequence,
    start: Int,
    end: Int,
    dest: Spanned,
    dstart: Int,
    dend: Int
): CharSequence? {
    try {
        val input = (dest.toString() + source.toString()).toDouble()
        if (isInRange(min, max, input))
            return null
    } catch (nfe: NumberFormatException) {
        Timber.e(nfe)
    }

    return ""
}

private fun isInRange(a: Double, b: Double, c: Double): Boolean {
    return if (b > a) c in a..b else c in b..a
}
} 
```**

# java - 巨大的随机数排序列表

> ID：14212521
> 
> 赞同：2
> 
> 时间：2013-01-08T10:06:30.943
> 
> 标签：java, scala, random, random-sample

我需要创建一个方法，该方法返回一个随机分布的采样数，每次调用该方法时，返回的数字都大于任何先前返回的数字。

或者，换句话说，我需要一个用于随机值排序列表的迭代器。

不幸的是，该列表太大而无法在整个内存中创建。我想出的第一个想法是将我的值空间划分为桶，其中每个桶包含某个范围内的值 [a, b)。假设我的列表有 N 个元素。要创建一个桶，我将对我的分布进行 N 次采样，并将 [a, b) 范围内的每个值放入桶中。该桶之外的值将被丢弃。

这样我可以在每次迭代最后一个时创建一个新的存储桶并保持低内存消耗。

然而，由于我不是统计学专家，我有点担心这会以某种方式搞砸我得到的数字。这是一个合适的方法吗？为每个存储桶使用相同的精确分布生成器（org.apache.commons.math3.distribution.RealDistribution 的一个实例）是否重要？

**更新：**似乎我在解释我在说什么类型的随机数方面做得不好。

我的数字形成随机分布的样本，例如平均值为 m 方差为 v 的正态分布，或者均匀分布或指数分布。

我使用这些数字来模拟模拟中的某些行为。假设我想在某些时候触发事件。我需要安排数十亿个事件，并且这些事件被触发的时间必须形成一个随机分布的样本。

因此，如果我通过将随机数添加到我以前的数字来导出我的下一个数字，我确实会得到一系列不断增长的随机数，但这些数字不会形成我的分布样本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T10:10:43.053

你可以说你的随机发生器有什么要求。

> 我需要创建一个方法，该方法返回从某个随机分布中采样的数字，每次调用该方法时，返回的数字都大于任何先前返回的数字。

你可以做类似的事情。

```
private long previous = 0;
private final Random rand = new Random();

public long nextNumber() {
  return previous += rand.nextInt(10) + 1;
} 
```

详细信息取决于您希望如何建模随机数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T10:10:24.427

如果列表太大而无法存储在内存中，您可以使用数据库并从数据库中读取/写入批量列表项。

这样，您只需要在任何时候将一批存储在内存中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T10:11:57.347

我将首先创建一个变量并存储您的第一个随机数，然后生成另一个随机数，比较它们，如果它更大，将其保存在大型存储和内存中，重复下一个随机数将与单个值进行比较记忆。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T10:09:47.210

您可以将随机数添加到先前生成的数字中。因此，您必须仅将您在之前的迭代步骤中生成的数字保留在内存中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T20:02:00.397

`SamplePartitioner`是一个类，它将某个分布的样本划分为几个固定大小的分区，这些分区一个接一个地返回`nextPartition()`。

`nextPartition()`在每次调用时创建整个样本，但只存储最小值`partitionSize`，这些值大于最后一个分区的最大值。通过使用固定种子，`nextPartition()`每次调用时都会创建完全相同的样本。

```
class SamplePartitioner(sampleSize: Long, partitionSize: Int, dist: RealDistribution) {
    private val seed = Random.nextInt
    private var remaining = sampleSize
    private var lastMax = 0.0

    def nextPartition(): SortedSet[Double] = remaining.min(partitionSize) match {
        case 0 => SortedSet.empty[Double]
        case targetSize =>
            dist.reseedRandomGenerator(seed)
            val partition = fill(sampleSize, SortedSet.empty, targetSize)
            lastMax = partition.last
            remaining -= partition.size
            partition
    }

    private def fill(samples: Long, partition: SortedSet[Double], targetSize: Long): SortedSet[Double] =
        samples match {
            case 0 => partition
            case n =>
                val sample = dist.sample()
                val tmp = if (sample > lastMax) partition + sample else partition
                fill(n - 1, if (partition.size > targetSize) tmp.init else tmp, targetSize)
        }
} 
```

# objective-c - 如何在不使用“tel://123”网址的情况下在 iphone 中打开手机应用程序

> ID：14212523
> 
> 赞同：0
> 
> 时间：2013-01-08T10:06:43.470
> 
> 标签：objective-c, ios, url-scheme

> **可能重复：**
> [我可以在 iPhone 中使用 url 方案打开手机应用吗](https://stackoverflow.com/questions/3699471/can-i-open-phone-app-using-url-scheme-in-iphone)

在应用程序中，我需要启动手机应用程序。我不想像下面的代码那样立即拨打电话：

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@\"tel://911\"]]; 
```

....只会拨打 911。我想知道我是否可以启动电话应用程序。我试过这段代码：

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@\"tel://\"]]; 
```

但它不起作用

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T10:16:26.370

你不能那样做。但是，如果您替换`tel:`为`telprompt:`它将提示用户确认呼叫。

编辑：另外，`@"a string"`是`NSString`. 你不应该逃避引号。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-08T10:10:33.257

试试这个代码： -

```
NSString *prefix = (@"tel://123");
UIApplication *app = [UIApplication sharedApplication];
NSString *dialThis = [NSString stringWithFormat:@"%@", prefix];
NSURL *url = [NSURL URLWithString:dialThis];
[app openURL:url]; 
```

注意：电话号码只能是有效格式

希望对你有帮助

# c# - 在 C# 中压缩和解压缩多个文件

> ID：14212526
> 
> 赞同：-3
> 
> 时间：2013-01-08T10:06:53.267
> 
> 标签：c#, wpf, zip

我需要从特定文件夹中压缩一组扩展名为 .xml 的文件。我在 WPF c# 中工作。我搜索了几个论坛。默认实用程序 Gzip 可能无法满足我的目的。我该怎么做？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T10:10:21.403

看看 Sharp Zip Lib。

[http://www.icsharpcode.net/opensource/sharpziplib/](http://www.icsharpcode.net/opensource/sharpziplib/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T10:12:32.667

*在codeplex*尝试一个开源项目：

*   [DotNetZip - 使用 C#、VB 和任何 .NET 语言进行压缩和解压缩](http://dotnetzip.codeplex.com/)

# html - 如何为输入设置默认值[type="date"]

> ID：14212527
> 
> 赞同：223
> 
> 时间：2013-01-08T10:06:54.047
> 
> 标签：html, date, html-input

我试过（[JSFiddle](http://jsfiddle.net/VD2QH/2/)）：

```
<input type="date" value="2012-3-23">
```

但它不起作用，我该如何设置默认值？

* * *

## 回答 #1

> 赞同：391
> 
> 时间：2013-01-08T10:17:00.127

日期应采用格式`YYYY-MM-DD`。个位数的日期和月份应该用 0 填充。一月是 01。

从[文档](http://www.w3.org/TR/html-markup/input.date.html#input.date.attrs.value)中：

> 表示日期的字符串。

> [值： [RFC 3339]](https://www.rfc-editor.org/rfc/rfc3339)中定义的有效完整日期，附加条件是年份部分是四位或更多位，表示大于 0 的数字。

您的代码应更改为：

```
<input type="date" value="2013-01-08">
```

[示例 jsfiddle](http://jsfiddle.net/DfkU5/)

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2016-09-10T19:11:39.600

`<input type="date" id="myDate" />`

**然后在 js 中：**

```
_today: function () {
  var myDate = document.querySelector(myDate);
  var today = new Date();
  myDate.value = today.toISOString().substr(0, 10);
}, 
```

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2016-08-06T07:54:03.300

一个可能的解决方案：

```
document.getElementById("yourDatePicker").valueAsDate = new Date(); 
```

使用 Moment.js：

```
var today = moment().format('YYYY-MM-DD');
document.getElementById("datePicker").value = today; 
```

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2014-09-09T01:06:36.087

如果您使用的是 PHP，您可以像这样设置值

```
<input type="date" value="<?php echo date("Y-m-d");?>"> 
```

但请记住，它将返回服务器的日期。例如，如果您的服务器在美国，而您的客户在印度尼西亚，则可能相差 1 天。

但是，如果您想从客户端使用，请改用 javascript 解决方案。希望能帮助到你。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-05-20T19:10:46.517

你可以使用这个js代码：

```
<input type="date" id="dateDefault" /> 
```

JS

```
function setInputDate(_id){
    var _dat = document.querySelector(_id);
    var hoy = new Date(),
        d = hoy.getDate(),
        m = hoy.getMonth()+1, 
        y = hoy.getFullYear(),
        data;

    if(d < 10){
        d = "0"+d;
    };
    if(m < 10){
        m = "0"+m;
    };

    data = y+"-"+m+"-"+d;
    console.log(data);
    _dat.value = data;
};

setInputDate("#dateDefault"); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-02-24T23:51:58.047

你可以这样做：

```
<input type="date" value="<?php echo date("Y-m-d");?>" name="inicio"> 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-08-15T12:57:03.600

设置当前日期的最简单方法是。

`<input name="date" type="date" value="<?php echo date('Y-m-j'); ?>" required>`

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-05-25T13:08:30.200

```
1 - @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
    <input type="date" "myDate">
    @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@

    var today = new Date();
    $('#myDate').val(today.getFullYear() + '-' + ('0' + (today.getMonth() + 1)).slice(-2) + '-' + ('0' + today.getDate()).slice(-2));

2 - @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
   <input type="datatime-local" id="myLocalDataTime" step="1">
    @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@

var today = new Date();
$('#myLocalDataTime').val(today.getFullYear() + '-' + ('0' + (today.getMonth() + 1)).slice(-2) + '-' + ('0' + today.getDate()).slice(-2)+'T'+today.getHours()+':'+today.getMinutes()); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-09-23T10:29:13.863

```
$date=date("Y-m-d");
echo"$date";
echo"<br>SELECT DATE: <input type='date'  name='date'  id='datepicker' 
value='$date' required >"; 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-07-17T10:11:17.210

// html代码

```
<input id="idFdate" type="date" /> 
```

// 主加载函数上的 javascript 代码

```
function loadFunction() {
    // body...
    var today = new Date();
    var dd = today.getDate();
    var mm = today.getMonth()+1; //January is 0!
    var yyyy = today.getFullYear();

    if(dd<10){
        dd='0'+dd;
    } 
    if(mm<10){
        mm='0'+mm;
    } 

    today = yyyy+'-'+mm+'-'+dd;                
    document.getElementById("idFdate").defaultValue =today+"";
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-11-18T11:00:41.133

JS代码：

```
function TodayDate(){
        let data= new Date();
        return data.getFullYear().toString()+'-' + (data.getMonth()+1).toString()+'-' + data.getDate().toString()
    }
    document.getElementById('today').innerHTML = '<input type="date" name="Data" value="'+TodayDate()+'" ><br>'; 
```

html代码：

```
<div id="today" > </div> 
```

有点粗糙，但它的工作原理！

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-04-27T06:48:36.443

您只需遵循正确的格式即可显示日期

```
<input type="date" value="2014-12-29"> 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-11-02T23:08:33.897

使用 Microsoft Visual Studio

日期分隔符**'-'**

@{string dateValue = request.Date.ToString("yyyy'-'MM'-'ddTHH:mm:ss");}

> < input type="datetime-local" class="form-control" name="date1" value="@dateValue" >

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-06-11T05:38:12.773

以下是表单中三个不同日期的三个语句，其中包含三个 type=date 字段。

`$inv_date`是当前日期：

```
$inv_date = date("Y-m-d"); 
```

`$inv_date_from`是当月的第一天：

```
$inv_date_from = date("Y") . "-" . date("m") . "-" . "01"; 
```

`$inv_date_to`是一个月的最后一天：

```
$inv_date_to = date("Y-m-t", strtotime(date("Y-m-t"))); 
```

我希望这有帮助 ：）

# android - Android：使用 OnPreferenceChangeListener 更新 ListPreference

> ID：14212532
> 
> 赞同：2
> 
> 时间：2013-01-08T10:07:11.647
> 
> 标签：android, listpreference

这是我的preferences.xml

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<ListPreference
    android:key="KEY_1"
    android:title="Title"
    android:summary="Summary"
    android:dialogTitle="Dialog"
    />
<ListPreference
    android:key="KEY_2"
     />   
<ListPreference
    android:key="KEY_3"
     />   
<ListPreference
    android:key="KEY_4"
     /> 
```

这是Settings.java：

```
public class Settings extends PreferenceActivity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    addPreferencesFromResource(R.xml.preferences);

// some methods to generate entries and values for ListPreference
final List List_1 = // something
final List List_2 = // something
final List List_3 = // something

String[] entry_1 = List_1.toArray(new String[List_1.size()]);
String[] entry_2 = List_2.toArray(new String[List_2.size()]);
String[] entry_3 = List_3.toArray(new String[List_3.size()]);

String[] value_1 = List_1.toArray(new String[List_1.size()]);
String[] value_2 = List_2.toArray(new String[List_2.size()]);
String[] value_3 = List_3.toArray(new String[List_3.size()]);

    // set arrays for entries and values    
 final ListPreference lp1 = (ListPreference)findPreference("KEY_1");
 lp1.setEntries(entry_1);
 lp1.setEntryValues(value_2); 

ListPreference lp2 = (ListPreference)findPreference("KEY_2");
lp2.setEntries(entry_2);
lp2.setEntryValues(value_1);

ListPreference lp3 = (ListPreference)findPreference("KEY_3");
lp3.setEntries(entry_2);
lp3.setEntryValues(value_2);

ListPreference lp4 = (ListPreference)findPreference("KEY_4");
lp4.setEntries(entry_2);
lp4.setEntryValues(value_3);

// update lp2, lp3, lp4

        lp1.setOnPreferenceChangeListener(new OnPreferenceChangeListener() {
            @Override
            public boolean onPreferenceChange(Preference preference, Object newValue) {
                String listValue = (String) newValue;

                ListPreference lp2 = (ListPreference)findPreference("KEY_2");
                lp2.setDefaultValue(listValue);

                ListPreference lp3 = (ListPreference)findPreference("KEY_3");
                lp3.setDefaultValue(listValue);

                ListPreference lp4 = (ListPreference)findPreference("KEY_4");
                lp4.setDefaultValue(listValue);

                return true;
            }
        });
    }
} 
```

这对我来说只有一次效果很好。我在这里缺少什么以便稍后在 lp2、lp3 和 lp4 上进行更新？我猜 setDefaultValue 只是为共享偏好创建了一次性输入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T22:07:41.840

我怀疑您的匿名侦听器已被垃圾收集 - 添加一些调试打印以查看是否调用了侦听器

```
lp1.setOnPreferenceChangeListener(new OnPreferenceChangeListener() {
    @Override
    public boolean onPreferenceChange(Preference preference, Object newValue) {
        Log.d("Listener", "I listen");
        String listValue = (String) newValue;
        // rest is the same
    }
}); 
```

如果您没有看到调试打印，请将您的侦听器移动到类字段并且：

```
public class Settings extends PreferenceActivity {

    private OnPreferenceChangeListener mListener=new OnPreferenceChangeListener(){
        @Override
        public boolean onPreferenceChange(Preference preference, Object newValue){
            // as before
        }
    };
    // etc - I guess the line below is in onCreate() - correct your formatting !
    lp1.setOnPreferenceChangeListener(mListener);
    }
} 
```

# sql-server - SQL Server 导入向导失败并显示无法理解的消息

> ID：14212536
> 
> 赞同：14
> 
> 时间：2013-01-08T10:07:29.587
> 
> 标签：sql-server, sql-server-2005, ssis

我只想将平面文件中的两列导入到新表中。我已将一列“代码”设置为`varchar(50)`，将另一列“描述”设置为`nvarchar(max)`。

导入失败并显示以下消息：

```
- Executing (Error)
Messages
Error 0xc02020a1: Data Flow Task 1: Data conversion failed. The data conversion for column "Description" returned status value 4 and status text "Text was truncated or one or more characters had no match in the target code page.".
 (SQL Server Import and Export Wizard)

Error 0xc020902a: Data Flow Task 1: The "output column "Description" (14)" failed because truncation occurred, and the truncation row disposition on "output column "Description" (14)" specifies failure on truncation. A truncation error occurred on the specified object of the specified component.
 (SQL Server Import and Export Wizard)

Error 0xc0202092: Data Flow Task 1: An error occurred while processing file "C:\Users\rinaldo.tempo\Desktop\ICD10_Edition4_CodesAndTitlesAndMetadata_GB_20120401.txt" on data row 3.
 (SQL Server Import and Export Wizard)

Error 0xc0047038: Data Flow Task 1: SSIS Error Code DTS_E_PRIMEOUTPUTFAILED.  The PrimeOutput method on component "Source - ICD10_Edition4_CodesAndTitlesAndMetadata_GB_20120401_txt" (1) returned error code 0xC0202092\.  The component returned a failure code when the pipeline engine called PrimeOutput(). The meaning of the failure code is defined by the component, but the error is fatal and the pipeline stopped executing.  There may be error messages posted before this with more information about the failure.
 (SQL Server Import and Export Wizard) 
```

错误消息向我表明数据被截断，因为它被放置在类型为“描述”的列中`nvarchar(max)`！目视输入数据后，我会说描述永远不会超过 2 或 300 个字符，所以这是不可能的。

谁能建议这里有什么问题？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-08T10:11:45.677

导入中字符串列的默认大小为 50 个字符。这种截断发生在数据进入数据库之前。您应该在导入向导的第一步中调整此`Columns`部分。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T10:15:09.277

错误

> “文本被截断或目标代码页中的一个或多个字符不匹配。”

即使您的源平面文件是 Unicode 文件**并且**您的目标列定义为`nvarchar(max)`.

SSIS 通过扫描有限数量的行并做出有根据的猜测来推断源文件中的数据类型。由于无休止地重复尝试使其工作，它将数据类型的元数据停放在`OutputColumnWidth`沿途某处的 50 个字符，导致包内部截断。

查看数据源的“高级”选项卡中的元数据以解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-21T05:58:51.157

你也试试这个。

选择高级选项卡中的所有`nvarchar`列`Dt_NTEXT`，然后在数据转换中，为所有数据字段`DT_WSTR`的别名列选择（Unicode_String） 。`Nvarchar`

它对我有用:)。尝试一下

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-10T18:59:18.333

我在尝试加载 275 列表时也收到了此消息。无论我做什么，我都无法让消息消失。一次更换一列真的很困难。修复一个，得到另一个错误。另外，有些似乎无法修复。

然后我从制表符分隔的源文件中删除了所有“：”和“，”字符，并且加载得很好。

# android - 绝对初学者在 Eclipse 中打开我的第一个应用程序，打开什么文件

> ID：14212544
> 
> 赞同：1
> 
> 时间：2013-01-08T10:08:00.413
> 
> 标签：android, eclipse

嗨，我知道这是一个非常愚蠢的问题，但我正在按照说明为 android 创建应用程序。我目前在这里... [http://developer.android.com/training/basics/firstapp/running-app.html](http://developer.android.com/training/basics/firstapp/running-app.html) 我已经按照说明设置了我的第一个应用程序，我已经在我的手机上启用了调试，但现在我不确定是什么在单击“运行方式”->“Android 应用程序”之前在 Eclipse 中打开文件。任何帮助都会非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:12:01.153

您不需要打开或关闭任何文件来运行应用程序，只需确保在左侧的项目资源管理器中选择了您要运行的项目。但我假设您此时只有一个项目，所以一切都应该按预期工作

**编辑**

如果您想在 Eclipse 的真实设备上测试您的应用程序，请确保已安装所需的设备驱动程序。您可以转到`Run -> Run Configurations -> target`并检查您的设备是否在列表中。如果不是，则缺少一些驱动程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T10:13:42.757

选择您的`MainActivity`并单击运行。它将提示一个框，您可以在其中选择要在设备或模拟器中运行的天气。

要在真实设备上运行，请参阅我[的帖子](https://stackoverflow.com/questions/12422294/how-to-run-the-android-app-on-real-device/12422475#12422475)。它会帮助你。

# java - char (int) 和 int 的区别

> ID：14212548
> 
> 赞同：0
> 
> 时间：2013-01-08T10:08:07.993
> 
> 标签：java, char, int, rxtx

我有一段代码，它从传感器接收值（通过使用 rxtx 的串行端口）并显示它。奇怪的是下面的代码

```
int value = in.read();
System.out.print((char) value); 
```

将所需值输出为：

```
RXTX Warning:  Removing stale lock file. /var/lock/LK.005.018.009
20
27
29
26
21 
```

但是当我将上面的代码更改如下：

```
int value = in.read();
System.out.print("The value is"+(char) value); 
```

输出变为：

```
RXTX Warning:  Removing stale lock file. /var/lock/LK.005.018.009
The value is2The value is6The value is
The value is2The value is2The value is 
```

可以看出，整数分裂。想了半天，想不通？

有没有办法可以将控制台值保存为整数，因为我将来会使用这个值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T10:14:06.973

> 可以看出，整数分裂。想了半天，想不通？

您不是在读取整数，而是在读取字符编码为 ASCII？

> 有没有办法可以将控制台值保存为整数，因为我将来会使用这个值？

最简单的方法是使用扫描仪

```
Scanner scanner = new Scanner(in);
while (scanner.hasNextInt()) {
   // read bytes up the next whitespace, parse as a int
   int n = scanner.nextInt(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T10:10:27.790

不要将其转换为char。只需打印

```
System.out.print("The value is " + value); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T10:14:13.927

在第二个示例中，您将 int 转换为 char，但是当您将其连接到字符串时，您什么也看不到，因为这些是不可打印的字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T10:16:44.917

您的代码`value`使用 Java 的 UCS2 表示将数字转换为字符。只有当您想将该值视为字符数据（例如字符串）时，您才可能需要它。

如果您只需要它作为整数值（例如用于打印），则不需要转换。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T11:39:35.150

请通过采用您的代码来检查此代码段

```
BufferedReader br = new BufferedReader(new InputStreamReader(System.in));   
   String  line = br.readLine();
   String[] words = line.split("[ ]",0); //white space delimiter
   for(int i = 0; i < words.length; i++) {
   System.out.print("The value is " +words[i]);
   System.out.print("\n"); 
```

# android - 从服务器下载后以编程方式安装 Android 应用程序

> ID：14212560
> 
> 赞同：0
> 
> 时间：2013-01-08T10:08:54.363
> 
> 标签：android, android-intent

我开发了一个 Android 应用程序，将 .apk 文件保存在服务器中。我开发了一个 html 文件，并在 html 中给出了那个 .apk 文件的链接。如果我点击链接，文件正在下载。现在我的任务是在不使用用户的情况下以编程方式安装应用程序。我给出了这样的代码：

```
File fullPath = getFileStreamPath("Timing example.apk");
{
    Intent intent = new Intent(Intent.ACTION_VIEW);
    intent.setDataAndType(Uri.fromFile(new File(Environment.getExternalStorageDirectory() + "/download/" + "Timing example.apk")), "application/vnd.android.package-archive");
    startActivity(intent);  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:53:30.730

> 现在我的任务是在不使用用户的情况下以编程方式安装应用程序

幸运的是，出于明显的安全原因，这对于普通的 Android SDK 应用程序是不可能的。

# node.js - 适用于 Windows Phone 8 的 Azure 移动服务和推送通知

> ID：14212563
> 
> 赞同：0
> 
> 时间：2013-01-08T10:09:10.427
> 
> 标签：node.js, windows-phone, windows-phone-8, azure-mobile-services

我对这段代码有一些问题（Azure 移动服务中计划作业的一部分）：

```
 var channelTable = tables.getTable('PushChannels');
    channelTable.read({
        success: function(channels) {
            channels.forEach(function(channel) {
                push.mpns.sendToast(channel.PushChannelUri, {
                    text1: "AppName:",
                    text2: "Update!"
                }, {
                    success: function(pushResponse) {
                        console.log("Push sent");
                    },
                    error: function(error) {
                        console.error("Error!");
                    }
                });
            });
        }
    }); 
```

我的问题是：

*   推送通知未到达设备
*   console.logs 未显示在“日志”选项卡中

有人可以帮助我吗？亲切的问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T09:06:27.727

代码是正确的。问题出在该脚本之前的代码中。对于不必要的问题，我很抱歉:(

# asp.net-mvc-3 - 使用 DropDownLists 约束和选择模型值

> ID：14212564
> 
> 赞同：1
> 
> 时间：2013-01-08T10:09:11.773
> 
> 标签：asp.net-mvc-3, model-validation

我有一个客户模型

```
public class Customer
{
    public virtual int CustomerID { get; set; }

    [Required]
    public virtual string CustomerName { get; set; }

    [Required]
    public virtual string Title { get; set; }

    [Required]
    public virtual string FirstName { get; set; }

    public virtual string LastName { get; set; }

    // Cont..
} 
```

当我将客户创建表单发布到`public ActionResult Create(Customer customer)`我的操作时`CustomerController`，它会产生错误`ModelState`。例如......如果我的代码如下......

```
[HttpPost]
public ActionResult Create(Customer customer)
{
    customer.Title = "Mr"; // This is what I set for ensuring the field has value

    if (ModelState.IsValid)
    {
        // Code to save customer entity
    }
    // else..
} 
```

在我的 MVC 视图中，它显示客户标题中的错误

例如，如果我`if (ModelState.IsValid)`从上面的代码中删除该部分，客户实体会保存得很好，我可以在数据库中看到记录。

这里可能是什么问题？

# 编辑 ：

将客户标题传递为`IEnumerable<SelectListItem>`

```
ViewData["CustomerTitles"] = GetCustomerTitles(); 
```

代码在视图

```
div class="editor-field">
    <%: Html.DropDownList("CustomerTitles")%>
    <br /><%: Html.ValidationMessageFor(model => model.Title) %>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T13:38:22.660

谢谢，我从@Richard A 的回复中得知了这个问题的答案。我对我的代码做了一些修改，它工作正常。

我把它贴在下面，所以可能会帮助一些人。

来自控制器的 ViewData

```
ViewData["Title"] = GetCustomerTitles(customer.Title); 
```

看法

```
<div class="editor-field">
  <%: Html.DropDownList("Title") %>
  <br /><%: Html.ValidationMessageFor(model => model.Title) %>
</div> 
```

想法是..在实体中，字段名称是“标题”。表单发布后，编译器检查名称为“Title”的 HTML 元素并为其赋值。如果不存在，则将 的值设置`ModelState`为 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:05:40.333

尝试这个：

```
<%: Html.DropDownList("Title", new SelectList(ViewData["CustomerTitles"]), Customer.Title.ToString()) %> 
```

这应该希望将标题作为字符串传递，这是您的模型所要求的。

# php - 用户输入验证仅允许数字和字母

> ID：14212566
> 
> 赞同：0
> 
> 时间：2013-01-08T10:09:19.223
> 
> 标签：php, validation

我有一个用户输入汽车注册的表格，所以我只想允许数字和字母？

```
if(preg_match("/(A-Za-z0-9]+/", $to)){

$errors[] = "Only use numbers and letters please";} 
```

得到错误...

```
Warning: preg_match() [function.preg-match]: Compilation failed: missing ) at offset 12 in /homepages/28/d420353834/htdocs/regupdate.php on line 84 
```

所以我猜我弄错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:10:17.727

尝试：

```
if(preg_match("/([A-Za-z0-9])+/", $to)){
    // action ...       
} 
```

您在正则表达式`[`的开头和结尾都缺少`)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T10:11:47.550

您在正则表达式中`[`的`A`, 和`)`final 之前丢失了`/`。应该看起来像：

```
if (preg_match("/([A-Za-z0-9]+)/", $to)) { 
```

此外，如果您只测试布尔值，而不是收集匹配项，则可以`()`完全省略。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T10:12:01.463

将其更改为

```
if(preg_match("/([A-Za-z0-9])+/", $to)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T10:46:15.500

我认为即使您的字符串在包含 ALSO 非字母数字字符的字符串中包含单个字母数字字符，其他答案正则表达式也会返回 true。（例如，尝试使用“???alpha!!123”）

如果您想确保您的字符串仅包含字母数字字符，请尝试以下代码：

```
if (preg_match("/^([[:alnum:]])*$/", $to))
{
    $errors[] = "Only use numbers and letters please";
} 
```

# perl - 如何使用 Perl、DBI 和占位符插入 PostgreSQL？

> ID：14212567
> 
> 赞同：2
> 
> 时间：2013-01-08T10:09:19.060
> 
> 标签：perl, postgresql, dbi

我正在尝试在 pSQL 表中插入一行，同时将键和值指定为占位符：

```
my @keys = keys %db_entr;                                                            
my @vals = values %db_entr;

my @items = (@keys, @values);

my $dbh = DBI->connect("DBI:Pg:dbname=testdb;host=localhost", "username", 'password', {'RaiseError' => 1});                                                                   
my $sth = $dbh->prepare("INSERT INTO grid ( ?, ?, ? ) values ( ?, ?, ? )");
my $rows = $sth->execute(@items);                                                    
print "$rows effected\n"; 
```

但是，无论我做什么，这都会给我一个错误：

```
DBD::Pg::st execute failed: ERROR:  syntax error at or near "$1"
LINE 1: INSERT INTO grid ( $1, $2, ...
                           ^ at ./file.pl line 262, <STDIN> line 11. 
```

有谁知道我可能做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T10:13:27.280

您不能将占位符用于列名，如下所示：

```
INSERT INTO grid (?, ?, ?) VALUES (?, ?, ?) 
```

您必须明确指定列名，并且只能对值使用占位符：

```
INSERT INTO grid (x, y, z) VALUES (?, ?, ?) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T10:23:47.287

您不能在`prepare`调用中为列名使用占位符。您可以做的最好的事情是将变量名称插入到 SQL 字符串中，或​​者用于`sprintf`执行等效操作。

这是一个示例，但您可能需要做一些不同的事情。请注意，它会修改`@items`数组，并且`prepare`每次`@items`可能更改内容时都需要再次调用。

```
my $sth = $dbh->prepare(
    sprintf "INSERT INTO grid ( %s, %s, %s ) values ( ?, ?, ? )",
    splice @items, 0, 3
);
my $rows = $sth->execute(@items);
print "$rows affected\n"; 
```

# c# - 消除组合框中的空条目

> ID：14212568
> 
> 赞同：17
> 
> 时间：2013-01-08T10:09:20.990
> 
> 标签：c#, winforms, combobox, null, default

是否有任何属性可以删除样式为 DropDownList 的组合框中的第一个（也是空的）项目？换句话说，我想为组合框选择默认选定项。

我知道我可以使用代码验证所选项目，但我想避免向用户显示消息框。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-08T10:14:59.870

将该`comboBox.SelectedIndex`属性设置为 0 以将选择设置为组合框中的第一项。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T10:13:31.857

您应该设置`Text`or `SelectedIndex`or`SelectedValue`属性。以这种方式，组合框更新正在显示的文本并删除第一个空项目（实际上不是真正的项目）。

# dotnet-httpclient - Windows 8 Httpclient 基本认证

> ID：14212573
> 
> 赞同：0
> 
> 时间：2013-01-08T10:09:41.493
> 
> 标签：dotnet-httpclient

我是这个论坛的新手。

我正在尝试使用 Httclient 为我的 Windows 应用程序进行基本身份验证。

```
var handler2 = new HttpClientHandler
{
Credentials = new NetworkCredential(username, password)
};
var httpClient2 = new HttpClient(handler2);
httpClient2.DefaultRequestHeaders.Add("user-Agent", "authentication.cs");
var response2 = httpClient.GetAsync(uri); 
```

我有两个问题：

我需要添加标题内容类型和用户代理。不知道如何添加它们。有人可以帮帮我。

作为回应，我得到了空值。知道为什么吗？

问候，

TM值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T02:17:18.217

您可以通过执行添加用户代理标头

```
 client.DefaultRequestHeaders.UserAgent.Add(new ProductInfoHeaderValue("authentication.cs")); 
```

您不能将 Content-Type 添加到默认请求标头，因为您只能在使用 PUT 或 POST 发送一些内容时设置 Content-Type。我猜你想像这样设置 Accept 标头：

```
 client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("text/html")); 
```

* * *

更新：没有我自己的帐户，这是我能做到的。

公共密封部分类 MainPage : Page { private readonly HttpClient _httpClient = new HttpClient();

```
 public MainPage()
    {
        this.InitializeComponent();
        InitHttpClient();

    }

    private void InitHttpClient() {
        var username = "youremail@somewhere.com";
        var password = "yourharvestpassword";
        String authparam = System.Convert.ToBase64String(System.Text.Encoding.UTF8.GetBytes(username + ":" + password));
        _httpClient.DefaultRequestHeaders.Authorization = new AuthenticationHeaderValue("Basic", authparam);
        _httpClient.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/xml"));
        _httpClient.DefaultRequestHeaders.UserAgent.Add(new ProductInfoHeaderValue("MyHarvestClient", "1.0"));
    }

    /// <summary>
    /// Invoked when this page is about to be displayed in a Frame.
    /// </summary>
    /// <param name="e">Event data that describes how this page was reached.  The Parameter
    /// property is typically used to configure the page.</param>
    protected override void OnNavigatedTo(NavigationEventArgs e) {

        _httpClient.GetAsync("https://yoursubdomain.harvestapp.com/projects")
            .ContinueWith(t => HandleResponse(t.Result));
    }

    private void HandleResponse(HttpResponseMessage response) {
        response.EnsureSuccessStatusCode();

        var contentString = response.Content.ReadAsStringAsync().Result;  
        var contentXML = XDocument.Parse(contentString);

    }
} 
```

# c# - “外部表不是预期格式”异常的问题

> ID：14212575
> 
> 赞同：3
> 
> 时间：2013-01-08T10:09:48.290
> 
> 标签：c#, asp.net, .net

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T06:49:07.593

我找到了解决方案。当我使用开放 XML sdk 时，xlsx 文件以 xlsx 扩展名保存，但该文件不是 excel 文件。这是一个以 xlsx 扩展名保存的打开的 xml 文件，因此 Excel 可以打开它。这意味着我不能使用 sql 查询来读取文件中的数据。

# iphone - 错误：应用程序委托加载是未声明的标识符

> ID：14212578
> 
> 赞同：1
> 
> 时间：2013-01-08T10:09:55.960
> 
> 标签：iphone, objective-c, ios, error-handling

我在 iPhone 注册页面编码中遇到了意外问题。错误是

> 应用程序委托加载是未声明的标识符

```
 if (!isValid)
   {
      [AppDelegate showAlert:@"Alert!" withMessage:strMessage];
   }
   return isValid;
}

-(void)registerUser {
   [Loading startLoading:YES];

   NSString *urlString = [NSString stringWithFormat:@"url=%@",Access_Token];
   //firstname,lastname,email,username,password

   NSString *parameter = [NSString   
        stringWithFormat:@"firstname=%@&lastname=%@&email=%@&username=%@&password=%@",
        firstnameField.text,lastnameField.text,
        emailField.text,UsernameField.text,passwordField.text];

   NSConnection *conn = [[NSConnection alloc] initWithDelegate:self];
   [conn sendRequest:urlString withParaMeter:parameter withMethod:@"POST" withTag:1];
   [conn startAsynchronousRequest];
} 
```

# try-catch - 使用 try catch 从 DataServiceRequestException 恢复

> ID：14212579
> 
> 赞同：2
> 
> 时间：2013-01-08T10:09:58.037
> 
> 标签：try-catch, wcf-data-services

我有一个 WCF 数据服务和一个使用它的 wpf 客户端。

我已经用 try catch 块包围了对客户端中数据服务的每个调用。这是我创建产品的示例。

```
 try
        {
            Product product = Product.CreateProduct(productName, productNumber);

            context.AddToProduct(product);
            context.SaveChanges();
        }
        catch (DataServiceRequestException dataServiceRequestException)
        {
            Handle(dataServiceRequestException);
        } 
```

这一切都很好 - 例如，当产品编号已经存在时，我得到一个例外。我的问题是当抛出这样的异常时如何在客户端中恢复。换句话说，我如何实现 Handle() 方法。例如，如果我只显示一个包含错误消息内容的消息框，那么下次我尝试创建产品时会发生同样的错误。换句话说，我如何让上下文忘记存在错误。我一直在寻找 context.Clear() og context.Forget() 但似乎不存在这样的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T09:42:17.427

诀窍是添加一个 finally 子句，并重新初始化上下文。

# android - iOS 自定义可滚动标签视图，就像在 android 中一样

> ID：14212581
> 
> 赞同：0
> 
> 时间：2013-01-08T10:10:05.903
> 
> 标签：android, objective-c, ios, user-interface, tabview

我想在**android**中实现**iOS 选项卡视图**（看下面的截图） 有没有现成的开源 iOS**库**这样做？ ****![在此处输入图像描述](../Images/69b110bfb83f908c164b0f2338e31a0a.png)****

 ***** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:21:37.797

您想要`UITabBarController`使用选项卡功能（传统上 iOS 选项卡出现在屏幕底部，而不是 Android 中的顶部），并且在每个选项卡中您想要提供一个可滚动的视图，在 iOS 中称为`UIScrollView`.

你应该走这条路线，用原生的`UITabBarController`and来实现`UIScrollView`，因为它们会给你一个原生的 iOS 外观。如果你试图让它看起来太像 Android 版本，它就会看起来像一个 Android 应用程序，这违反了 iOS 视图指南。****

# javascript - 基于 Google v8 函数的调试器 API

> ID：14212582
> 
> 赞同：1
> 
> 时间：2013-01-08T10:10:06.630
> 
> 标签：javascript, c++, v8

我试图了解如何使用此处提到的基于 v8 函数的调试器 API [http://code.google.com/p/v8/wiki/DebuggerProtocol](http://code.google.com/p/v8/wiki/DebuggerProtocol)

谁能告诉我有关如何使用 API（设置断点、评估变量等）的任何文档，因为前面的链接仅解释了基于消息的 API。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-23T16:58:36.897

叫我死灵法师，但是... [http://code.google.com/p/chromedevtools/](http://code.google.com/p/chromedevtools/) 如果您打算实现自己的调试器（出于某种奇怪的原因），我想这是一个好的开始。您也可以查看随 V8 代码提供的 D8，请在此处查看[http://code.google.com/p/v8/wiki/Source?tm=4](http://code.google.com/p/v8/wiki/Source?tm=4)

# c - 为多线程 UDP 客户端执行“关闭（）”时未释放套接字描述符

> ID：14212584
> 
> 赞同：2
> 
> 时间：2013-01-08T10:10:07.883
> 
> 标签：c, linux, multithreading, sockets, udp

我在 UDP 客户端下编写了它，它基本上生成了一个单独的线程来接收数据报，但是数据报仅在主线程中发送。现在，按下 ctrl^D 在 Linux 发行版上实例化 ("./udpClient 1") UDP 客户端后，实现退出循环（围绕 getline () 调用）并关闭套接字描述符。

我观察到，尽管在描述符上调用了 close ，但直到客户端进程终止并且仍然在执行“netstat -an|grep udp”时看到相关条目时才会释放它。但是，如果我注释/删除生成接收器线程的代码，则套接字描述符会在调用 close() 后立即释放。

似乎套接字引用计数在生成一个单独的线程（它基本上接收并阻塞所述套接字描述符）时增加，因此 close () 调用什么也不做。

这是理想的吗，因为我理解如果套接字描述符在进程之间而不是在线程之间共享，套接字引用计数会增加？是因为 Linux 将线程实现为 LWP，如果是这样，这是期望的行为吗？

```
#include <stdio.h>
#include <stdlib.h>
#include <strings.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <errno.h>

void *receiver (void *arg);

int sockfd;

int doConnect = 0;

int
main (int argc, char *argv[])
{
    pthread_t thrid;

    struct sockaddr_in servaddr;

    struct sockaddr_in clntaddr;

    char *line;

    size_t len = 0;

    size_t read;

    if (argc < 4)
    {
        printf
            ("Usage:%s <Server Ipv4 address> <Server Port> <Connect Yes(1)/No(0)> [Client IPv4 address] [Client Port]\n",
             argv[0]);
        return -1;
    }

    /*
     * AF_INET, AF_INET6, AF_UNIX, AF_NETLINK
     * SOCK_STREAM (TCP), SOCK_DGRAM (UDP), SOCK_RAW
     */
    if ((sockfd = socket (AF_INET, SOCK_DGRAM, IPPROTO_UDP)) == -1)
    {
        printf ("Failed to create socket: %s\n", strerror (errno));
        return -1;
    }

    bzero (&clntaddr, sizeof (struct sockaddr_in));

    if (argc == 6)
    {
        printf ("doing bind......\n");
        clntaddr.sin_family = AF_INET;
        clntaddr.sin_port = htons (atoi (argv[5]));
        inet_aton (argv[4], &clntaddr.sin_addr);

        if (bind
            (sockfd, (struct sockaddr *) &clntaddr,
             sizeof (struct sockaddr_in)) == -1)
        {
            printf ("Failed to bind: %s\n", strerror (errno));
            close (sockfd);
            return -1;
        }
    }

    /*
     * fill up the server details
     */
    bzero (&servaddr, sizeof (struct sockaddr_in));

    servaddr.sin_family = AF_INET;
    servaddr.sin_port = htons (atoi (argv[2]));
    inet_aton (argv[1], &servaddr.sin_addr);

    doConnect = atoi (argv[3]);

    if (1 == doConnect)
    {
        printf ("doing connect......\n");
        if (-1 ==
            connect (sockfd, (struct sockaddr *) &servaddr,
                     sizeof (struct sockaddr_in)))
        {
            printf ("Failed to connect: %s\n", strerror (errno));
            close (sockfd);
            return -1;
        }
    }

    if (pthread_create (&thrid, NULL, receiver, NULL) < 0)
    {
        printf ("Failed to create thread: %s\n", strerror (errno));
        close (sockfd);
        return -1;
    }

    while ((read = getline (&line, &len, stdin)) != -1)
    {
        if (1 == doConnect)
        {
            if (send (sockfd, line, len, 0) < 0)
            {
                printf ("send () failed: %s\n", strerror (errno));
            }
        }
        else
        {
            if (sendto (sockfd, line, len, 0, (struct sockaddr *) &servaddr,
                        sizeof (struct sockaddr_in)) < 0)
            {
                printf ("sendto () failed: %s\n", strerror (errno));
            }
        }
    }

    if (line)
        free (line);

    close (sockfd);

    printf ("socket is closed.....\n");

    sleep (60);
}

void *
receiver (void *arg)
{
    char buff[512];

    while (1)
    {
        memset (buff, 0, sizeof (buff));

        if (1 == doConnect)
        {
            if (recv (sockfd, buff, sizeof (buff), 0) < 0)
            {
                // printf ("recvfrom () failed: %s\n", strerror (errno));
                printf ("recv () failed\n");
            }
            else
            {
                printf ("recv () returned: %s\n", buff);
            }
        }
        else
        {
            if (recvfrom (sockfd, buff, sizeof (buff), 0, NULL, NULL) < 0)
            {
                // printf ("recvfrom () failed: %s\n", strerror (errno));
                printf ("recvfrom () failed\n");
            }
            else
            {
                printf ("recvfrom () returned: %s\n", buff);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T10:45:02.037

文件描述符是进程全局的，它们的引用计数是进程全局的。从我在您的代码中阅读的内容最有可能发生的是线程仍在其中，`recv`或者`recvfrom`内核在该系统调用完成之前不会关闭文件。在对该文件的每个系统调用完成之前，您无法关闭文件（即使您可能释放文件描述符插槽），这将导致非常讨厌的错误（过去也有过）。

在调用之前拍摄线程`close`，您会看到您的文件描述符将以您想要的方式关闭。

# typo3 - 如何显示随机媒体和图像

> ID：14212585
> 
> 赞同：0
> 
> 时间：2013-01-08T10:10:07.850
> 
> 标签：typo3, typoscript

我正在使用我的 T3 4.5.10，我想将 sysfolder 中的随机内容插入特定页面。

于是，我写了一个小TS：

```
lib.randomContent = COA_INT
lib.randomContent {
    10 = CONTENT
    10 {
        table = tt_content
        select {
            pidInList = 10
            max = 1
            orderBy = rand()
        }
    }
} 
```

我将该 TS 包含在我的页面中。第 10 页是包含“图像”和“媒体”的文件夹。媒体是 swf 文件。

所有*图像*都完美地随机显示，但从不显示*媒体*。

我应该怎么做才能显示我的媒体？

谢谢你，格雷格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:11:59.130

AFAIK 一些媒体对象（feshockwaveflash）需要一些 JavaScript 进行初始化。我想HTML会很好，但是缺少JS？

对于测试，您可以停用该页面的缓存。

如果我是对的，你可以做一些解决方法：

1.  将您的 COA_INT 更改为 COA 并将该页面的缓存周期更改为一分钟（页面设置）
2.  在该页面上包含另一个媒体内容元素（但通过 CSS 隐藏）（我希望这也可以）
3.  自己添加缺少的 JS（我猜是typo3/contrib/flashmedia/swfobject/swfobject.js 和typo3/contrib/flashmedia/swfobject/expressInstall.swf）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T12:01:13.373

嗨，您忘记了“renderObj < tt_content”来使用标准渲染。

```
lib.randomContent = COA_INT
lib.randomContent {
    10 = CONTENT
    10 {
        table = tt_content
        select {
            pidInList = 1
            max = 10
            orderBy = rand()
        }
        renderObj < tt_content
    }
} 
```

# html - 悬停时使用css更改div位置

> ID：14212588
> 
> 赞同：2
> 
> 时间：2013-01-08T10:10:10.567
> 
> 标签：html, css

在下面的代码中，我想保持`.link1`和`.link2`隐藏，并且在将鼠标悬停在 上时`.image`，我希望通过过渡效果使它们可见，以便`link1`从左侧`link2`移动和从右侧移动，它们都到达 div 的中心.

我正在尝试以下代码，但它不起作用：

**HTML：**

```
<div class="wrap">
  <div class="image"><img src="http://farm9.staticflickr.com/8043/8357588952_94cee71fef.jpg" /></div>
  <div class="hover">
     <a class="link1">Link 1</a>
     <a class="link2">Link 2</a>
  </div>
</div> 
```

**CSS：**

```
.wrap{
  margin: 100px;
  width: 500px;
  overflow: hidden;
  position: relative;
}

.image{
  border: 1px solid red;
  -webkit-transition: all 0.4s; 
    -moz-transition: all 0.4s; 
    transition: all 0.4s;
}

.hover{
  position: absolute;
  top: 40%;  
}

.link1{
    display: inline-block;
    width: 70px;
    height: 30px;
    background: yellow; 
     position: absolute;
     left: -100%;
}

.image:hover .link1{
   left: 40%;  
}

.link2{
    display: inline-block;
    width: 70px;
    height: 30px;
    background: yellow; 
     position: absolute;
     right: -100%;
}

.image:hover .link2{
   right: 40%;  
} 
```

**演示：http:** [//jsfiddle.net/XjTyJ/](http://jsfiddle.net/XjTyJ/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T10:23:01.783

你有很多糟糕的选择器在进行。

我将`.image:hover`选择器更改`.hover:hover`为`<a>`元素是`.hover`div 的子元素。

我还更改了`.image`具有动画规则的选择器，`.hover a`以将动画应用于其中的锚点。

我认为您误解了某些 CSS 规则的工作原理。当您希望一个元素位于另一个元素中时，您必须告诉它使用 width 和 height: 100% 填充其父元素的 100%。

按照您的方式，.hover div 位于图像 div 下方。不过现在一切都很好。

```
.wrap{
  margin: 100px;
  width: 500px;
  overflow: hidden;
  position: relative;
}

.hover a{
  border: 1px solid red;
  -webkit-transition: all 0.4s; 
    -moz-transition: all 0.4s; 
    transition: all 0.4s;
}

.hover{
  position: absolute;
  width:100%;
  height: 100%;
  top: 0;
}

a.link1{
    width: 70px;
    height: 30px;
    background: yellow; 
     position: absolute;
  left: -100%;
}

.hover:hover a.link1{
   left: 40%;  
}

a.link2{
    width: 70px;
    height: 30px;
    background: yellow; 
     position: absolute;
  right: -100%;
}

.hover:hover a.link2{
   right: 40%;  
} 
```

:)

最后一点：当你设置一个元素的位置时，它会有效地分配`display: block;`给它，所以`display: inline-block;`几乎没用。:) [http://jsfiddle.net/XjTyJ/1/](http://jsfiddle.net/XjTyJ/1/)

# algorithm - 当重叠很少时找到重叠间隔

> ID：14212593
> 
> 赞同：3
> 
> 时间：2013-01-08T10:10:20.260
> 
> 标签：algorithm, intervals, overlap

我有一个带有*n 个*整数间隔的巨大数据库表（例如 {1-5}、{4-16}、{6434-114343}），需要找出**哪些间隔相互重叠**。[关于 SO](https://stackoverflow.com/questions/4542892/possible-interview-question-how-to-find-all-overlapping-intervals)有很多 类似的问题，但不同的是我需要分别为每个间隔返回一组重叠间隔。

```
 ------------------ A -------------------
    ------ B -------               ----- D -----
          --------- C --------- 
```

对于此示例，输出将是`A:{B,C,D} B:{A,C} C:{A,B} D:{A}`

最坏的情况是，所有区间可能相互重叠，产生大小为 O( *n* ² ) 的输出。这并不比简单的解决方案更好（比较每对间隔）。然而，在实践中，我知道我的间隔很少会与其他间隔重叠，而且当它们重叠时，最多只有 5 个其他间隔。

鉴于此信息，我应该如何解决问题？（最理想的情况是，我想要一个 SQL 查询解决方案，因为数据在数据库中，但我认为只有常规的算法解决方案是可能的。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T12:29:56.513

针对您的问题的典型编程解决方案是在所有范围之外构建一个[区间树](http://en.wikipedia.org/wiki/Interval_tree)，然后对每个区间执行一次查找，从而`O(log n)`及时为您提供所有相交区间的列表。这是这样一个区间树的示例：

![区间树样本](../Images/099e6bd856a9f6477560606107154bae.png)

但是，在您的情况下，您也可以将主键存储在树节点中，因此给定以下日期（查找重叠日期是可以使用区间树解决的常见问题）

![样本日期间隔](../Images/2ad40a8894493a22bc9092af74f975f3.png)

你的树看起来像这样

![日期间隔的样本树](../Images/137556626f95604418b7bf98c3f3c04c.png)

因此，如果我想知道哪些区间与 C 重叠，我会搜索 C 的起点 1843，然后树告诉我，该值仅在区间 C 内，这是我正在测试的区间，所以我可以忽略它。然后我搜索 C 的结尾，1907，树告诉我，它在区间 A、B 和 C 中，我再次可以忽略 C，因此我的结果集是 A 和 B。

我承认，在这样一棵树中的查找并不像人们想象的那么直观。我将尽我所能在这里解释它：您从顶部根节点开始，并在每个节点处决定向左或向右，直到您遇到离开节点（一个不再有子节点的节点）。如果节点值大于您正在搜索的值，则向左走。如果节点值小于您要搜索的值，则向右走。如果您的节点值恰好等于您正在搜索的值怎么办？这取决于！如果您正在搜索区间的开头，则相等的值意味着您向右走，如果您搜索区间的结尾，则相等的值意味着您向左走。这个非常重要。一旦你到达一个离开节点，你就完成了，你在**任何节点中找到的****所有间隔****在前往该离开节点的途中，包括存储在离开节点本身（如果有）中的时间间隔构成了您的结果集，而不仅仅是存储在离开节点中的时间间隔。这意味着您必须*收集*在执行搜索时遇到的任何间隔。**

 **现在回到你最初的问题：所有这些都可以在 SQL 中完成吗？是的，这是可以做到的。不过，我不确定你是否真的想这样做。您可以将当前的 SQL 表数据转换为表示区间树的 SQL 表，然后直接在该区间树表中执行查找。至少我找到了一个正是这样做的人。他尝试查找涵盖给定日期的所有日期范围，而不必将该日期与数据库中的所有现有范围进行比较：

## [静态关系区间树](http://www.solidq.com/sqj/Pages/2011-September-Issue/A-Static-Relational-Interval-Tree.aspx)

他甚至使用了一个绝妙的技巧来优化查找的速度，显着降低两者的 CPU 使用率，构建查找表并执行实际的查找（这使得整个事情变得相当复杂）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T12:49:05.917

建立一个区间开始和结束的排序序列，然后遍历它，每次更新当前区间列表，报告任何新发现的交叉点。

像这样的东西：

```
std::vector<TBorder> borders;
for(auto i=intervals.begin();i!=intervals.end();++i)
{
    borders.push_back(TBorder(i.Start(),Start));
    borders.push_back(TBorder(i.End(),End));
}
std::sort(borders.begin(),borders.end());
std::set<int> currentIntervals;
for(auto b=borders.begin();b!=borders.end();++b)
{
    if(b.IsEnd())
        currentIntervals.erase(b.IntervalIndex());
    else
    {
        currentIntervals.insert(b.IntervalIndex());
        if(currentIntervals.size()>1)
            ReportIntersection(currentIntervals);
    }
} 
```

通常它是 O(n*log n) （假设交叉点的数量是 O(1) ）。

但是，如果您已经有按例如 start 排序的间隔，则可能的排序可以在 O(n) 中完成（再次假设交叉点的数量是 O(1)）。**

# objective-c - 处理类似方法的设计模式

> ID：14212599
> 
> 赞同：2
> 
> 时间：2013-01-08T10:10:36.200
> 
> 标签：objective-c, oop, design-patterns, methods, dry

我的 Objective-c 类中有两种方法可以做类似但不同的事情。（它们都检索一组包含 JSON 的核心数据记录，解压缩并检查 JSON 文档，并根据 JSON 的结构做一些事情）。

第一种方法如下所示：

```
+(NSDictionary*)getListOfResponsesWithForm:(NSString*)formId
{
    NSError* requestError = nil;

    // NSIndexSets don't allow easy targetted access into the set, so use arrays instead.
    NSMutableArray* indexSetOfAllEntries = [[NSMutableArray alloc] init];
    NSMutableArray* indexSetOfEntriesForLoggedOnUser = [[NSMutableArray alloc] init];

    NSString* activeUserEmail = getActiveUser().email;

    NSFetchRequest* fetchRequest = [ [NSFetchRequest alloc] init];

    NSEntityDescription* entityDesc = [NSEntityDescription entityForName:@"Response" inManagedObjectContext:getApp().managedObjectContext];

    [fetchRequest setEntity:entityDesc];

    // Sort by lastmodifieddatelocal
    NSSortDescriptor *sort = [[NSSortDescriptor alloc] initWithKey:@"lastmodifieddatelocal" ascending:NO];
    [fetchRequest setSortDescriptors:[NSArray arrayWithObject:sort]];

    NSArray* instances = [getApp().managedObjectContext executeFetchRequest:fetchRequest error:&requestError];

    NSMutableArray* responses = [[NSMutableArray alloc] init];

    for (Response* response in instances) {

        NSData *jsonData = [response.json dataUsingEncoding:NSUTF8StringEncoding];
        NSDictionary* dictionary = [HPSJSON getDictionaryFromDataWithoutSuccessTest:jsonData];

        NSString* userEmailFromResponse = [HPSJSON getStringForKey: @"_useremail" inDictionary:dictionary];

        NSString* formIdFromResponse =  [HPSJSON getNestedIdForKey: @"_formid" inDictionary: dictionary];

        if ([formId caseInsensitiveCompare:formIdFromResponse]==NSOrderedSame)
        {
            [responses addObject: response];

            [indexSetOfAllEntries addObject:[NSNumber numberWithInt:responses.count-1]];

            if ([activeUserEmail caseInsensitiveCompare:userEmailFromResponse]==NSOrderedSame)
            {
                [indexSetOfEntriesForLoggedOnUser addObject:[NSNumber numberWithInt:responses.count-1]];
            }

        }

    }

    NSMutableDictionary* results = [[NSMutableDictionary alloc] init];
    [results setObject:responses forKey:@"responses"];
    [results setObject:indexSetOfAllEntries forKey:@"allindexes"];
    [results setObject:indexSetOfEntriesForLoggedOnUser forKey:@"indexesforactiveuser"];

    return results;

} 
```

第二种方法如下所示：

```
+(NSInteger)getCountOfResponsesWithForm:(NSString*)formId
{
    NSError* requestError = nil;

    NSString* activeUserEmail = getActiveUser().email;

    NSFetchRequest* fetchRequest = [ [NSFetchRequest alloc] init];

    NSEntityDescription* entityDesc = [NSEntityDescription entityForName:@"Response" inManagedObjectContext:getApp().managedObjectContext];

    [fetchRequest setEntity:entityDesc];

    NSArray* instances = [getApp().managedObjectContext executeFetchRequest:fetchRequest error:&requestError];

    NSInteger countOfResponses=0;

    for (Response* response in instances) {

        NSData *jsonData = [response.json dataUsingEncoding:NSUTF8StringEncoding];
        NSDictionary* dictionary = [HPSJSON getDictionaryFromDataWithoutSuccessTest:jsonData];

        NSString* userEmailFromResponse = [HPSJSON getStringForKey: @"_useremail" inDictionary:dictionary];

        NSString* formIdFromResponse =  [HPSJSON getNestedIdForKey: @"_formid" inDictionary: dictionary];

        if ([formId caseInsensitiveCompare:formIdFromResponse]==NSOrderedSame)
        {
            if ([activeUserEmail caseInsensitiveCompare:userEmailFromResponse]==NSOrderedSame)
            {
                countOfResponses++;
            }

        }

    }

    return countOfResponses;

} 
```

这里的重复代码相当多，我觉得我在某种程度上是在滥用 DRY。然而，试图将这些方法组合成一个方法会引入一些复杂性，这会在某种程度上混淆每个单独的方法的作用。

任何人都可以就实现这两种方法所包含的功能的最优雅方式提供建议吗？坚持这两种方法？创造一种更复杂的方法？闯入不同的班级？

他们是这种场景的相关设计模式吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:30:23.520

我会建议：

1.  识别公共块（例如，NSFetchRequest* fetchRequest...、NSEntityDescription* entityDesc）；

2.  对于每个公共块，定义一个获取正确参数并执行所需参数的方法；

3.  调用这样的方法来改进 DRY，例如：

    ```
    <getInstances>
    <for each instance>
       <extract data from instance>
       <do your processing on data> 
    ```

在这种情况下，我不会考虑设计模式，而是考虑重构。您当然可以将所有这些封装在一个自己的类中，但我不知道当前包含您的代码的类所扮演的角色，所以我不能说更详细的内容。

顺便说一句，我倾向于在更高的抽象层次上使用设计模式（这就是为什么它们被称为*设计*模式，尽管许多在架构层次上大多是有用的）。在这种情况下，我认为一些重构配方（你可能会在谷歌上搜索它们）更适合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T16:30:23.847

我会考虑[模板设计模式](http://www.codeproject.com/Articles/307452/6-common-use-of-Template-Design-pattern-Design-pat)。

它基本上将基本行为封装在基类中的模板方法中，具体行为在实现（或覆盖）基类中定义的抽象方法的底层子类中实现。

SO上也有有趣的资源：[Objective-C - 模板方法模式？](https://stackoverflow.com/questions/8146439/objective-c-template-methods-pattern)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T10:34:59.233

我不擅长 Xcode，所以让我写一些逻辑来代替。

在我看来，您的第二种方法可以通过以下方式简化：

```
int getCountOfResponsesWithForm(String a)
{
    Dictionary dic  = getListOfResponsesWithForm(a);
    return dic.length();
} 
```

您可能有兴趣阅读[外观设计模式](http://en.wikipedia.org/wiki/Facade_pattern)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T11:09:34.707

使用设计模式访问者或命令。这使您可以将获取和迭代响应与要采取的操作分离。

你在这里有两件事：准备+循环+编组步骤和处理步骤。一部分相同（前者），一部分不同（后者）。所以你想排除后者，这样你就可以避免制作前者的多个副本。

您可以通过使处理步骤成为在子类中重载的虚拟方法，或者通过传入可以执行该步骤的“东西”来实现。这个“东西”通常是命令或访问者。

这一切都归结为您是要使用继承还是组合。就个人而言，我倾向于更喜欢作曲。

# html - HTML 表单 POST/Save 渲染值另一个页面

> ID：14212606
> 
> 赞同：0
> 
> 时间：2013-01-08T10:11:00.747
> 
> 标签：html, post, django-forms

我有一个帖子表单，我正在为它输入一个值。我想将值保存在表单中并为其添加时间戳以将信息保存并呈现到另一个页面。有什么干净的方法可以做到这一点吗？我正在使用 DJANGO 框架，到目前为止我有：

```
<form action="/example/" method="post">
<p><input type="submit" value="Submit comment" /></p>
</form> 
```

谢谢

# javascript - 用于创建 MTOM SOAP 消息的 Javascript 库

> ID：14212608
> 
> 赞同：3
> 
> 时间：2013-01-08T10:11:03.353
> 
> 标签：javascript, soap, mtom

您能否介绍一个 javascript 库，我们可以在其中创建 SOAP 请求并向其添加附件？该库应该能够执行以下操作：

*   创建基于**WSDL的 SOAP 消息**
*   支持**MTOM**文件附件

或者如果它根本不存在，你能给我一些关于如何实现它的线索吗？甚至可能吗？

# javascript - 如何在桌面上模拟移动（android）浏览器

> ID：14212610
> 
> 赞同：7
> 
> 时间：2013-01-08T10:11:08.673
> 
> 标签：javascript, android, debugging, mobile

我正在尝试调试仅当我从移动浏览器访问移动网站时才会出现的问题。我强烈怀疑问题的根本原因是由于多次访问同一页面时发生的缓存。

当我从我的 Android 手机访问该页面时，我可以始终如一地重现该问题，但如果我使用桌面浏览器，则该问题永远不会发生。

因为我不能在我的安卓手机上使用任何开发者工具，我真的需要从桌面浏览器重现这个问题，这样我就有了一些调试方法。我已经尝试过使用 Firefox 和 Chrome 并适当设置 User-Agent 标头（以便显示网站的移动版本），但这不起作用。

有没有更好的方法可以从桌面模拟移动浏览器的行为，以允许调试客户端代码的方式？FWIW，我相当有信心我也可以在 iPhone 上重现该问题，但没有可用的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-08T10:16:52.187

您**可以**在手机上使用调试器，[使用 chrome debugger](https://developers.google.com/chrome/mobile/docs/debugging)。

如今，您只需在插入设备后导航到 chrome://inspect/#devices。

如果这不起作用，您可以使用旧方法：

1.  使用 USB 数据线将您的移动设备连接到主机
2.  在移动设备上，启动 Chrome。打开设置 > 高级 > 开发人员工具并选中启用 USB Web 调试选项
3.  在主机的控制台中发出以下命令以启用端口转发：
    `adb forward tcp:9222 localabstract:chrome_devtools_remote`
4.  打开桌面 Chrome 并导航到 localhost:9222
5.  选择需要调试的页面
6.  您现在可以在桌面上的开发者工具中开始调试和分析移动内容

# git - 如果自上次提交以来已将新文件添加到项目中，则 Qt Creator 中的 Git stash 失败

> ID：14212612
> 
> 赞同：8
> 
> 时间：2013-01-08T10:11:13.557
> 
> 标签：git, qt-creator, git-stash

自上次提交以来，当我刚刚对项目中的文件进行了更改时， git stash 工作正常。

但是，如果自上次提交以来我还向项目添加了新文件，则会失败并出现以下错误：

> C:\Program Files\Git\cmd\git.exe stash save QtCreator 2013-01-08T12:06:51
> 无法存储在“C:\MyProject”中：错误：条目“NewFile.cpp”不是最新的。无法合并。
> 无法保存当前工作树状态

为什么它会显示此错误，如果我已将新文件添加到项目中，是否有办法隐藏我的更改？

**编辑**

这是输出`git status`

```
# On branch master
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#   new file:   NewFile.cpp
#
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#   modified:   MyFile.cpp
#
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#   MyProject.pro.user 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T10:53:56.710

正如斯科特查孔所说，

> Stashing 获取工作目录的脏状态——即**修改后的跟踪文件和暂存的更改**——并将其保存在未完成的更改堆栈中，您可以随时重新应用。

由于您添加了一个新文件，因此它不知道它以前不存在，因此请尝试执行以下操作：

```
1) $ git add .
2) $ git stash 
```

看看你是否能够隐藏这些更改

# visual-studio-2010 - MSTest 单元测试属性检查

> ID：14212623
> 
> 赞同：1
> 
> 时间：2013-01-08T10:11:55.490
> 
> 标签：visual-studio-2010, unit-testing, attributes

出于监管原因，我们解决方案中的所有单元测试都必须设置一些属性。如果在解决方案的 VSMDI 列表中设置了某些特定属性（如 CREATOR、REVIEWER、REVIEWDATE ......），是否有办法检查 Visual Studio？
此外，我必须检查“CREATOR”属性是否等于“REVIEWER”属性。目标是向我的 Scrum 团队提供一个包含所有这些“错误设置属性”的列表（文本、Excel 等），以便他们修复它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:58:43.180

您可以使用反射来检查属性，然后创建您的 Excel/文本列表。您可以将其作为[MSBuild](http://en.wikipedia.org/wiki/MSBuild)任务执行，并将其插入到单元测试项目的构建前/构建后操作中。有关如何创建自定义 MSBuild 任务的示例，请参阅此[博客文章。](http://blogs.msdn.com/b/msbuild/archive/2006/01/21/515834.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T18:18:36.713

在 Visual Studio 2010 中运行所有需要的测试后，您将获得一个 TRX 文件，其中包含已执行测试的所有详细信息。如果您在这些测试中添加了一些属性，您也会在 TRX 文件中找到它们。现在您必须编写一个 XML 解析器来读取您需要的属性并使用这些数据。我将它们提取到 Excel 中，并进一步将数据处理到 Excel 地图中。

# oop - 数据未成功插入对象

> ID：14212625
> 
> 赞同：1
> 
> 时间：2013-01-08T10:11:57.673
> 
> 标签：oop, matlab

数据未插入成功。

输出：

```
dataHolder.variableNames =      [] 
```

什么时候应该：

```
dataHolder.variableNames = [{'area_12345[<>]6789'}, {'apollo123'}, {'guruX'}, {'ok'}]; 
```

％ 用法：

```
elementNames = {'area_12345[<>]6789', 'apollo123', 'guruX', 'ok'};
elementTypes = {'string', 'specialChar', 'int', 'float'};
elementValues = {'charlie', 'vvv', '09', '123.321'};

dataHolder = dynamicVariableNaming;

str = 'test';
result = dataHolder.ensureCellType(str);

for i = 1:3
    dataHolder.addVariables(elementNames(i), elementTypes(i), elementValues(i));
end

dataHolder.variableNames

%%% CLASS

classdef dynamicVariableNaming
%HELLO Summary of this class goes here
%   - 

   properties           
           variableNames = [];           

           variableValues = [];
           variableTypes = [];
   end

   methods (Access = public) % (Access = private)
           function obj = dynamicVariableNaming (variableName, variableValue, variableType)
           % class constructor
               if(nargin > 0)
                 obj.variableNames = variableName;                 

                 obj.variableValues = variableValue;
                 obj.variableTypes = variableType;
               end
           end  
%    end
%            
%    methods (Static = true)
           function addVariables (obj, variableName, variableValue, variableType)

                 obj.variableNames = [obj.variableNames ensureCellType(obj, variableName)];                 

                 obj.variableValues = [obj.variableValues ensureCellType(obj, variableValue)];
                 obj.variableTypes = [obj.variableTypes ensureCellType(obj, variableType)];
           end               

           function cellData = ensureCellType(obj, value)   

            if (~strcmp(class(value), 'cell')) 
                cellData = {value};
                % cell2string(value); 
            else
                cellData = value;
            end
           end            

   end   
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T10:39:54.807

`addVariables`当您使用非对象时，您不会根据需要从方法中返回更改的`handle`对象。请记住，与其他基于引用传递的语言相比，matlab 是不同的。

要修复它，要么让你的班级继承班级，要么从班级`handle`返回`obj``addVariables`

不能说代码中是否还有其他问题，因为它的格式很差，无法在matlab中运行（两端不平衡，缺少构造函数等）

# cakephp - CakePHP 多对多带条件

> ID：14212626
> 
> 赞同：3
> 
> 时间：2013-01-08T10:11:58.327
> 
> 标签：cakephp, orm, many-to-many, cakephp-2.0

我是 CakePHP 的新手，现在我陷入了很多情况

好的，我有 3 个表：

1.  带字段的问题（id，问题）
2.  question_product 带字段（id、question_id、product_id、question_number、is_enabled）
3.  具有字段（id、名称、代码、is_enabled）的产品

所以当我想选择特定领域的问题时，我现在不知道如何解决它，我的代码是这样的：

Question.php（模型）

```
class Question extends AppModel {

    public $hasAndBelongsToMany = array (
        'Product' => array (
            'joinTable' => 'question_product',
            'foreignKey' => 'question_id',
            'associationForeignKey' => 'product_id',
            'unique' => 'keepExisting',
            'order' => 'question_number',
            'fields' => array (
                'QuestionProduct.question_number',
                'Product.id',
                'Product.name'
            ),
            'conditions' => array (
                'QuestionProduct.is_enabled' => 1,
            )
        )
    );
} 
```

QuestionsController.php（控制器）

```
public function loadQuestions($productId) {
    $this->view = 'load_questions';
    $questions = $this->Question->find('all', array (
        'fields' => array (
            'Question.id',
            'Question.question',
            'Question.is_optional',
            'Question.reason_optional',
            'Question.text_size'
        ),
        'conditions' => array (
            'QuestionProduct.product_id' => $productId
        )
    ));
    $this->set($questions);
} 
```

方法 loadQuestions 有一个参数可供指定产品选择

如果我使用 sql 查询，它会是这样的

从 Question 中选择所有条件 Product.product_id=4，按 QuestionProduct.question_number 升序排序

```
select questions.*
from questions
join question_product on questions.id=question_product.question_id
join products on products.id=question_product.product_id
where products.id=4
order by question_product.question_number; 
```

任何答案将不胜感激:)

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T08:48:49.200

任何时候你在任何其他需要条件的字段中使用多对多 (HABTM) 关系，就 Cake 而言，它不再是多对多。你想要[HasManyThrough 关系](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#hasmany-through)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T07:54:24.493

不要使用`hasAndBelongsToMany`关系，而是使用从**question_product**到**questions**`belongsTO`的两个关系，以及另一个从**question_product**到**products**的关系。

 ******> **question_product 属于问题**
> 
> **question_product 属于产品**

**注意：您应该将表名从 question_product 更改为 question_products 作为 cakePHP 约定**

在您的模型 QuestionProduct 模型中：

```
<?php

// declares a package for a class
App::uses('AppModel', 'Model');

class QuestionProduct extends AppModel {

/**
 * @see Model::$actsAs
 */
    public $actsAs = array(
        'Containable',
    );

/**
 * @see Model::$belongsTo
 */
    public $belongsTo = array(
        'Product' => array(
            'className' => 'Product',
            'foreignKey' => 'product_id',
        ),
        'Question' => array(
            'className' => 'Question',
            'foreignKey' => 'question_id',
        ),
    ); 
```

然后在你的控制器中：

```
public function loadQuestions($productId) {
    $this->view = 'load_questions';
    $questions = $this->QuestionProduct->find('all', array (
        'fields' => array (
            'Question.id',
            'Question.question',
            'Question.is_optional',
            'Question.reason_optional',
            'Question.text_size'
        ),
        'conditions' => array (
            'QuestionProduct.product_id' => $productId
        ),
        'contain' => array('Product','Question')
    ));
    $this->set($questions);
} 
```

它应该准确地进行您想要的查询，我认为它没有任何其他方式来生成该查询。******

# semaphore - 使用信号量顺序运行 swingworkers

> ID：14212629
> 
> 赞同：1
> 
> 时间：2013-01-08T10:12:06.747
> 
> 标签：semaphore, swingworker, jtabbedpane

我有一个带有 JTabbedpane 的面板，在每个选项卡中，您都可以设置参数来执行查询。当一个查询忙于从数据库中检索他的数据时，您已经可以打开一个新选项卡来设置新参数。为了避免数据库过载，一次只能执行一个查询。但是当您单击执行时，程序必须记住以正确的顺序执行哪些查询。在执行过程中会显示一个加载器图标，并且 GUI 可能不会被冻结，因为您可以单击一个停止按钮来停止执行。
我使用了一个 swingworker 来避免 GUI 在执行查询时阻塞，并且效果很好。但现在我想阻止下一个查询在前一个查询完成之前开始。在整个面板通用的模型中，我初始化了一个信号量：`private final Semaphore semaphore = new Semaphore(1, true);`

这是启动 swingworker 的代码（我添加了 println 命令来查看哪个启动、停止或完成）

```
private void doStoredQuery() {
        try {
            semaphore.acquire();
            System.out.println(queryName + "started");
            worker.execute();
        } catch (InterruptedException e) {
           throw new RuntimeException(e);
        }
    } 
```

这是我的 swingworker（initializeWorker() 是从主类的构造函数中调用的）：

```
private SwingWorker<StoredQueryDataModel, Integer> initializeWorker() {
    worker = new SwingWorker<StoredQueryDataModel, Integer>() {
        @Override
        protected StoredQueryDataModel doInBackground() throws Exception {
            try {
                StoredQueryDataModel dataModel = null;
                publish(0);
                try {
                    dataModel = new StoredQueryDataModel(queryRunner, ldbName, queryName, params);
                } catch (S9SQLException e) {
                    // 
                } catch (Throwable e) {
                    showErrorMessage(e);
                }
                return dataModel;
            }
            finally {
                semaphore.release();
                System.out.println(queryName + "finished");
            }
        }

        @Override
        protected void process(List<Integer> chunks) {
            //ignore chunks, just reload loader icon
            panel.repaint();
        }

        @Override
        protected void done() {
            String error;
            try {
                result = get();
                error = null;
            } catch (Exception e) {
                error = e.getMessage();
            }

            if(result == null) {
                semaphore.release();
                System.out.println(queryName + " stopped");
            }

            if(error == null) {
                // process result
            }
            else {
                showErrorMessage(new Throwable(error));
            }
        }

    };
    return worker;
} 
```

我尝试将获取和发布放在代码中的其他位置，但似乎没有任何效果。我是 Swingworker 中的机器人，而且 sempahores 很新……有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:53:15.770

我发现了问题：信号量必须是静态变量。在我的代码中，信号量与选项卡一样多，这导致它们同时运行而不是顺序运行。

# java - 如何使用itext在android中生成pdf

> ID：14212630
> 
> 赞同：0
> 
> 时间：2013-01-08T10:12:14.613
> 
> 标签：java, android, pdf, itext

我是 android 开发的新手，刚出生两天，我想通过以 pdf 格式显示它来从我的数据库中检索数据。我以前在 netbeans 上做过这个（它有效），但是当我在 android 中尝试我的代码时，它给了我一个错误。我有触发我的 btnPdf 操作的 SQLitExample.java 文件，以及应该创建我的 pdf 的 createPDF.java 文件。我尝试通过创建新意图来调用 createPDF.java 文件。但是当我点击我的 btnPdf 时，它给了我这个错误：

> dalvikvm(6097)：找不到类 'com.example.hotornot.createPDF$1'，引用自方法 com.example.hotornot.createPDF.pdf

这是我在 SQLitExample.java 上的代码

```
package com.example.hotornot;

import java.io.IOException;
import java.sql.SQLException;

import com.lowagie.text.DocumentException;

import android.app.Activity;
import android.app.Dialog;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class SQLitExample extends Activity implements OnClickListener {

Button btnUpdate, btnView, btnPdf;
EditText SQLName,SQLNum;

@Override
protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.sqliteexample); 
    btnUpdate = (Button) findViewById(R.id.btnUpdate);
    SQLName = (EditText) findViewById(R.id.etSQLName);
    SQLNum = (EditText) findViewById(R.id.etSQLNum);

    btnView = (Button) findViewById(R.id.btnView);
    btnPdf = (Button) findViewById(R.id.btnPdf);
    btnPdf.setOnClickListener(this);        
    btnView.setOnClickListener(this);
    btnUpdate.setOnClickListener(this);
}

public void onClick(View arg0){
    switch (arg0.getId())
    {
    case R.id.btnUpdate:
        boolean diditwork = true;
        try{
        String name = SQLName.getText().toString();
        String num = SQLNum.getText().toString();

        Example entry = new Example(SQLitExample.this);
        entry.open();   
        entry.createEntry(name,num);
        entry.close();

        }catch(Exception e){
            diditwork = false;
            String error = e.toString();
            Dialog d = new Dialog(this);
            d.setTitle("OW men! :(");
            TextView tv = new TextView(this);
            tv.setText(error);
            d.setContentView(tv);
            d.show();
        }finally{
            if(diditwork){
                Dialog d = new Dialog(this);
                d.setTitle("yehey");
                TextView tv = new TextView(this);
                tv.setText("Success");
                d.setContentView(tv);
                d.show();       
            }
        }
    break;

    case R.id.btnView:
        Intent i = new Intent("com.example.hotornot.SQLView");
        startActivity(i);
    break;

    case R.id.btnPdf:    
        Intent i2 = new Intent("com.example.hotornot.createPDF"); 
        startActivity(i2);
    break;
    }
}
} 
```

这是我的 createPDF.java 代码：

```
package com.example.hotornot;

import java.io.FileOutputStream;
import java.io.IOException;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.logging.Level;
import java.util.logging.Logger;

import android.app.Activity;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.widget.TextView;

import com.lowagie.text.Cell;
import com.lowagie.text.Document;
import com.lowagie.text.DocumentException;
import com.lowagie.text.Element;
import com.lowagie.text.Font;
import com.lowagie.text.FontFactory;
import com.lowagie.text.Paragraph;
import com.lowagie.text.Table;
import com.lowagie.text.pdf.PdfPCell;
import com.lowagie.text.pdf.PdfPTable;
import com.lowagie.text.pdf.PdfWriter;
import com.example.hotornot.*;
import com.example.hotornot.Example.DbHelper;

public class createPDF extends Activity {

String DATABASE_NAME = Example.DATABASE_NAME;
String DATABASE_TABLE = Example.DATABASE_TABLE;
String KEY_NAME = Example.KEY_NAME;
String KEY_NUM = Example.KEY_NUM;
String KEY_ROWID = Example.KEY_ROWID;

 public void pdf() throws ClassNotFoundException, SQLException, DocumentException{

    try {

        System.out.println("THIS SHOULD CREATE PDF!");
        Document document=new Document () {};
        PdfWriter.getInstance(document,new FileOutputStream("C:/Users/SERVER02/workspace/HotOrNot/samplePDF"));
        document.open();

        PdfPTable table = new PdfPTable(3);
        table.addCell("Row_Id");
        table.addCell("Name");
        table.addCell("Number");

        String[] columns = new String[]{ KEY_ROWID,KEY_NAME, KEY_NUM};

        Example entry = new Example(createPDF.this);
        Cursor c = entry.ourdatabase.query(DATABASE_TABLE, columns, null, null, null, null, null);
        String result = "";

        int iRow = c.getColumnIndex(KEY_ROWID);
        int iName = c.getColumnIndex(KEY_NAME);
        int iNum = c.getColumnIndex(KEY_NUM);

        String rownum = c.getString(iRow);
        String name = c.getString(iName);
        String num = c.getString(iNum);

        for (c.moveToFirst(); ! c.isAfterLast(); c.moveToNext()){
        result = result + rownum + " " + name + " " + num + "\n";
        table.addCell(c.getString(iRow));
        table.addCell(c.getString(iName));
        table.addCell(c.getString(iNum));
        }

        document.add(table);
        document.close();
        Runtime.getRuntime().exec("rundll32 url.dll,FileProtocolHandler " + "C:\\samplePDF.pdf");
    } catch (IOException ex) {
        Logger.getLogger(createPDF.class.getName()).log(Level.SEVERE, null, ex);
    }
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:21:42.050

添加您要开始的其他活动 - 在 Manifest.xml 文件中创建 PDF。

```
 <activity android:name=".createPDF" /> 
```

Intent 语法如下，不是你用过的：

```
 Intent pdfIntent = new Intent(SQLitExample.this,createPDF.class);
    startActivity(pdfIntent); 
```

**安卓资源：**

[意图开发者文档](http://developer.android.com/reference/android/content/Intent.html)

查看上面的 Intent 构造函数。您应该使用`Intent(Context context, Class<?> cls)`构造函数。

# python - 从 Django 的基于 date_based 的通用视图中省略 day 关键字参数？

> ID：14212632
> 
> 赞同：0
> 
> 时间：2013-01-08T10:12:33.367
> 
> 标签：python, django, django-generic-views

[在使用 Django 的基于日期的通用](https://docs.djangoproject.com/en/1.4/ref/generic-views/#date-based-generic-views)视图时，我不想在详细视图的 URL 中有一天。我尝试了以下但得到`TypeError at /logbook/2013/january/testing/ object_detail() takes at least 6 arguments (7 given)`：

**模型.py**

```
class Entry(models.Model):
    pub_date = models.DateTimeField()

def get_absolute_url(self):
    return "/logbook/%s/%s/" % (self.pub_date.strftime("%Y/%B").lower(), self.slug) 
```

**网址.py：**

```
from __future__ import absolute_import
from django.conf.urls import patterns, include, url

from .models import Entry
from . import views

urlpatterns += patterns('',
    url(r'^logbook/(?P<year>\d{4})/(?P<month>[A-Za-z]+)/(?P<slug>[\w-]+)/$', 
    views.entry_detail),
) 
```

**视图.py：**

```
import functools
from django.views.generic import date_based

from .models import Entry

def prepare_arguments(view):
    @functools.wraps(view)
    def wrapped(request, *args, **kwargs):
        kwargs['allow_future'] = request.user.is_staff
        kwargs['queryset'] = Entry.objects.all() if request.user.is_staff 
        else Entry.objects.published()
        kwargs['date_field'] = 'pub_date'
        return view(request, *args, **kwargs)
    return wrapped

@prepare_arguments
def entry_detail(request, *args, **kwargs):
    return date_based.object_detail(request, *args, **kwargs) 
```

是否可以修改上面的代码并继续使用基于 date_based 的通用视图，而 URL 中没有日期？如果没有，有人可以举一个 URL 模式的简单自定义视图的例子`url(r'^logbook/(?P<year>\d{4})/(?P<month>[A-Za-z]+)/(?P<slug>[\w-]+)/$', views.entry_detail)`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T13:40:19.673

感谢[Alasdair](https://stackoverflow.com/users/113962/alasdair)为我指明了正确的方向和[ccbv.co.uk。](http://ccbv.co.uk)我最终使用了[DetailView](http://ccbv.co.uk/projects/Django/1.4/django.views.generic.detail/DetailView/)并且这很有效：

**网址.py：**

```
from django.views.generic import DetailView

urlpatterns += patterns('',
    url(r'^logbook/(?P<year>\d+)/(?P<month>[-\w]+)/(?P<slug>[\w-]+)/$',
        DetailView.as_view(model=Entry),
        name="entry_detail"),
) 
```

**视图.py：**

```
# nothing needed here for the detail view to work, though in the future 
# I would like to have the generic view code here instead to accomplish 
# the same thing as `DetailView.as_view(model=Entry), name="entry_detail"` 
# in urls.py, and would appreciate an example of this. 
```

# jquery - IE 7 中的 jQuery 工具问题

> ID：14212640
> 
> 赞同：0
> 
> 时间：2013-01-08T10:13:03.960
> 
> 标签：jquery, internet-explorer-7

jQuery 工具似乎没有在 IE 7 中初始化。IE 7 说第 240 行字符 3 存在问题。

这是我的代码：

```
<script>
    $(document).ready(function() {
        $("#slidertabs").jtTabs("#slider-content > p", {
            effect: 'fade',
            fadeOutSpeed: "slow",
            current: 'active',
            rotate: true,
        }).slideshow({autoplay: true, interval: 6000, clickable: false}); // <-- line 240
    });
</script> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T10:15:11.997

当最后一个列表项后面有逗号时，IE7 不喜欢它，就像在第 240 行之前的行中的 JavaScript 对象一样。

从最后一项中删除逗号，它应该没问题。

更新代码：

```
<script>
    $(document).ready(function() {
        $("#slidertabs").jtTabs("#slider-content > p", {
            effect: 'fade',
            fadeOutSpeed: "slow",
            current: 'active',
            rotate: true // removed comma from here
        }).slideshow({autoplay: true, interval: 6000, clickable: false}); // <-- line 240
    });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T10:16:59.177

必须如下所示：

```
<script>
    $(document).ready(function() {
        $("#slidertabs").jtTabs("#slider-content > p", {
            effect: 'fade',
            fadeOutSpeed: "slow",
            current: 'active',
            rotate: true
        }).slideshow({autoplay: true, interval: 6000, clickable: false});
    });
</script>
```

# javascript - 将表从数据库导出到 csv 文件

> ID：14212641
> 
> 赞同：78
> 
> 时间：2013-01-08T10:13:04.273
> 
> 标签：javascript, sql-server, database, csv

我想：在`csv`不使用 sql Server 导入导出向导的情况下，将表从 sql server 数据库导出到逗号分隔文件

我想使用查询来做到这一点，因为我想在自动化中使用查询

可能吗？我搜索了一下，没有找到好的答案

* * *

## 回答 #1

> 赞同：142
> 
> 时间：2013-01-10T20:47:54.803

一些想法：

## 从 SQL Server 管理工作室

```
 1\. Run a SELECT statement to filter your data
 2\. Click on the top-left corner to select all rows
 3\. Right-click to copy all the selected
 4\. Paste the copied content on Microsoft Excel
 5\. Save as CSV 
```

## 使用 SQLCMD（命令提示符）

例子：

在命令提示符下，您可以运行查询并将其导出到文件：

```
sqlcmd -S . -d DatabaseName -E -s, -W -Q "SELECT * FROM TableName" > C:\Test.csv 
```

不要引用分隔符只使用 -s，而不是引用 -s',' 除非您想将引号设置为分隔符。

更多信息：[ExcelSQLServer](http://www.excel-sql-server.com/sql-server-export-to-excel-using-bcp-sqlcmd-csv.htm)

笔记：

*   这种方法将在文件底部包含“受影响的行”信息，但您可以通过在查询本身中使用“SET NOCOUNT ON”来摆脱这种情况。

*   您可以运行存储过程而不是实际查询（例如“EXEC Database.dbo.StoredProcedure”）

*   您可以使用任何编程语言甚至批处理文件来自动执行此操作

## 使用 BCP（命令提示符）

例子：

```
bcp "SELECT * FROM Database.dbo.Table" queryout C:\Test.csv -c -t',' -T -S .\SQLEXPRESS 
```

将逗号分隔符引用为 -t',' 与仅 -t, 很重要

更多信息：[bcp 实用程序](http://msdn.microsoft.com/en-us/library/ms162802.aspx)

笔记：

*   根据使用 SQLCMD 时，您可以运行存储过程而不是实际查询
*   您可以使用任何编程语言或批处理文件来自动执行此操作

希望这可以帮助。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-01-03T12:12:10.033

这是[我发现](http://beyondrelational.com/modules/2/blogs/70/posts/10792/importexport-to-excel.aspx)导出到 Excel 的选项（我相信可以修改为 CSV）

```
insert into OPENROWSET('Microsoft.Jet.OLEDB.4.0', 
'Excel 8.0;Database=D:\testing.xls;', 
'SELECT * FROM [SheetName$]') select * from SQLServerTable 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-02-04T08:45:58.657

您还可以使用以下 Node.js 模块轻松完成：

[https://www.npmjs.com/package/mssql-to-csv](https://www.npmjs.com/package/mssql-to-csv)

```
var mssqlExport = require('mssql-to-csv')

    // All config options supported by https://www.npmjs.com/package/mssql 
    var dbconfig = {
        user: 'username',
        password: 'pass',
        server: 'servername',
        database: 'dbname',
        requestTimeout: 320000,
        pool: {
            max: 20,
            min: 12,
            idleTimeoutMillis: 30000
        }
    };

    var options = {
        ignoreList: ["sysdiagrams"], // tables to ignore 
        tables: [],                  // empty to export all the tables 
        outputDirectory: 'somedir',
        log: true
    };

    mssqlExport(dbconfig, options).then(function(){
        console.log("All done successfully!");
        process.exit(0);
    }).catch(function(err){
        console.log(err.toString());
        process.exit(-1);
   }); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-06-29T15:27:53.563

```
rsubmit;
options missing=0;
ods listing close;
ods csv file='\\FILE_PATH_and_Name_of_report.csv';

proc sql;
SELECT *
FROM `YOUR_FINAL_TABLE_NAME';
quit;
ods csv close;

endrsubmit; 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-07-11T22:33:04.763

**从 SQL Server 管理工作室**

右键单击要导出的表并选择“选择所有行”

右键单击结果窗口并选择“将结果另存为...”

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-09-02T07:53:34.137

你不需要通过 SSMS 或编程语言来解决问题。

以管理员身份运行 PowerShell 提示符，然后：

```
Install-Module -Name SqlServer 
```

安装后，您可以将任何表导出为 CSV，如下所示：

```
Invoke-Sqlcmd -Query "SELECT * FROM [mydatabase].[dbo].[mytable]" -ServerInstance "MYSQLSERVER" | Export-Csv -Path "c:\temp\output.csv" -NoTypeInformation 
```

你可以把它放在一个 .PS1 脚本中，然后随心所欲地执行它。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-02-26T06:33:17.387

在 SQL Server Management Studio 查询窗口中

1.  选择所有结果集值
2.  右键单击并选择“将结果另存为”

[![表格内容转 CSV](../Images/82b9e38e1a5ce01f72b652946902f063.png)](https://i.stack.imgur.com/8bG4x.png)

3.  另存为 CSV 文件

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-11-23T17:16:27.253

我写了一个小工具来做这件事。代码可[在 github 上](https://github.com/BernhardSchlegel/SQL-dumper)找到。

要将一个（或多个）SQL 查询的结果转储到一个（或多个）CSV 文件：

```
java -jar sql_dumper.jar /path/sql/files/ /path/out/ user pass jdbcString 
```

干杯。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-05-11T06:43:18.830

当您出于某种原因想要所有表格时？

您可以在 SSMS 中生成这些命令：

```
SELECT 
CONCAT('sqlcmd -S ',
'Your(local?)SERVERhere'
,' -d',
'YourDB'
,' -E -s, -W -Q "SELECT * FROM ',
TABLE_NAME,
'" >',
TABLE_NAME,
'.csv') FROM INFORMATION_SCHEMA.TABLES 
```

并再次获得这样的行

```
sqlcmd -S ... -d... -E -s, -W -Q "SELECT * FROM table1" >table1.csv
sqlcmd -S ... -d... -E -s, -W -Q "SELECT * FROM table2" >table2.csv
... 
```

还可以选择使用更好的 TAB 作为分隔符，但它需要一个奇怪的 Unicode 字符 - 在 CMD 中使用 Alt+9，它就像这样 ○ (Unicode CB25)，但只能通过复制/粘贴到命令行而不是批量工作.

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2018-10-16T15:32:08.003

也许是死马，但不久前我试图做同样的事情并遇到了一个脚本来创建一个试图做我正在寻找的东西的 STP，但它有一些需要注意的怪癖。为了追踪我在哪里找到了发布更新的脚本，我遇到了这个线程，它似乎是一个分享它的好地方。

这个 STP（在大多数情况下我不相信，而且我找不到我找到它的站点），采用模式名称、表名称和 Y 或 N [包括或排除标头] 作为输入参数并查询提供的表，以逗号分隔、带引号的 csv 格式输出每一行。

我对原始脚本进行了许多修复/更改，但它的骨干来自 OP，无论是谁。

这是脚本：

```
IF OBJECT_ID('get_csvFormat', 'P') IS NOT NULL
    DROP PROCEDURE get_csvFormat
GO

CREATE PROCEDURE get_csvFormat(@schemaname VARCHAR(20), @tablename VARCHAR(30),@header char(1))
AS
BEGIN
    IF ISNULL(@tablename, '') = ''
    BEGIN
        PRINT('NO TABLE NAME SUPPLIED, UNABLE TO CONTINUE')
        RETURN
    END
    ELSE
    BEGIN
        DECLARE @cols VARCHAR(MAX), @sqlstrs VARCHAR(MAX), @heading VARCHAR(MAX), @schemaid int

        --if no schemaname provided, default to dbo
        IF ISNULL(@schemaname, '') = ''
            SELECT @schemaname = 'dbo'

        --if no header provided, default to Y
        IF ISNULL(@header, '') = ''
            SELECT @header = 'Y'

        SELECT @schemaid = (SELECT schema_id FROM sys.schemas WHERE [name] = @schemaname)
        SELECT 
        @cols = (
            SELECT ' , CAST([', b.name + '] AS VARCHAR(50)) '  
            FROM sys.objects a 
            INNER JOIN sys.columns b ON a.object_id=b.object_id 
            WHERE a.name = @tablename AND a.schema_id = @schemaid
            FOR XML PATH('')
        ),
        @heading = (
            SELECT ',"' + b.name + '"' FROM sys.objects a 
            INNER JOIN sys.columns b ON a.object_id=b.object_id 
            WHERE a.name= @tablename AND a.schema_id = @schemaid
            FOR XML PATH('')
        )

        SET @tablename = @schemaname + '.' + @tablename
        SET @heading =  'SELECT ''' + right(@heading,len(@heading)-1) + ''' AS CSV, 0 AS Sort'  + CHAR(13)
        SET @cols =  '''"'',' + replace(right(@cols,len(@cols)-1),',', ',''","'',') + ',''"''' + CHAR(13)

        IF @header = 'Y'
            SET @sqlstrs =  'SELECT CSV FROM (' + CHAR(13) + @heading + ' UNION SELECT CONCAT(' + @cols + ') CSV, 1 AS Sort FROM ' + @tablename + CHAR(13) + ') X ORDER BY Sort, CSV ASC'
        ELSE
            SET @sqlstrs =  'SELECT CONCAT(' + @cols + ') CSV FROM ' + @tablename 

        IF @schemaid IS NOT NULL 
            EXEC(@sqlstrs)
        ELSE 
            PRINT('SCHEMA DOES NOT EXIST')
    END
END

GO

--------------------------------------

--EXEC get_csvFormat @schemaname='dbo', @tablename='TradeUnion', @header='Y' 
```

# asp.net - 本地计算机和 IIS 中的图像按钮位置不同

> ID：14212643
> 
> 赞同：0
> 
> 时间：2013-01-08T10:13:07.483
> 
> 标签：asp.net, asp.net-mvc-3

在我的 MVC 3 页面中，我使用了一个折叠按钮跟随 CSS

```
.imgAccordin
{
    margin: -9px;
    position:relative;
    padding-top : 12px;
} 
```

它工作正常，但是当我将项目转移到 IIS 时。上面按钮的位置转到其他地方。

任何建议都是最受欢迎的。

# java - 在 Java 中更改 CHF 货币的模式？（使用重症监护室）

> ID：14212653
> 
> 赞同：0
> 
> 时间：2013-01-08T10:13:29.187
> 
> 标签：java, locale, design-patterns, currency, icu

我编写了一个 java 函数来显示每种货币的语言环境模式。请参阅下面的功能。我有兴趣知道的是，为什么当货币是瑞士法郎时，第二个小数点被硬编码为 5？

这是与美元和瑞士法郎货币相关的函数的输出：

```
Analyzing currency: [USD] localePattern: [¤#,##0.00;(¤#,##0.00)] Currency symbol [$]
Analyzing currency: [CHF] localePattern: [¤#,##0.05;(¤#,##0.05)] Currency symbol [SwF] 
```

这是我写的java函数：

```
import com.ibm.icu.text.DecimalFormat; 
import com.ibm.icu.text.NumberFormat;
import com.ibm.icu.util.Currency;

public static void main(String[] args)
  {
    Currency configuredCurrency                       = null; 
    NumberFormat formatter                = NumberFormat.getCurrencyInstance();
    DecimalFormat localeCurrencyFormatter = (DecimalFormat)formatter;
    String localePattern                  = "";
    String symbol                         = "";

    String currencies        = "AED,AFN,ALL,AMD,ARS,AUD,BGN,BHD,BND,BOB,BRL,BWP,BYR,CAD,CHF,CLP,CNY,COP,CRC,CZK,DJF,DKK,DOP,DZD,EEK,EGP,ERN,ETB,EUR,GBP,GTQ,HKD,HNL,HRK,HUF,IDR,ILS,INR,IQD,IRR,ISK,JOD,JPY,KES,KPW,KRW,KWD,KZT,LBP,LTL,LVL,LYD,MAD,MKD,MTL,MXN,MYR,NIO,NOK,NZD,OMR,PAB,PEN,PHP,PKR,PLN,PYG,QAR,RON,RUB,SAR,SDD,SEK,SGD,SKK,SOS,SVC,SYP,SwF,THB,TND,TRY,TZS,UAH,USD,UYU,VEB,VND,YER,ZAR,ZWD";
    String[] currenciesArray = currencies.split(",");

    for (int i = 0; i < currenciesArray.length; i++)
    {
      String currency = currenciesArray[i];
      configuredCurrency = Currency.getInstance(currency);
      localeCurrencyFormatter.setCurrency(configuredCurrency);
      localePattern = localeCurrencyFormatter.toPattern();
      symbol = localeCurrencyFormatter.getCurrency().getSymbol();

      System.out.println("Analyzing currency: [" + currency + "] localePattern: [" + localePattern + "] Currency symbol [" + symbol + "]");
    } 
  } 
```

# c - 如何在 PC 上访问我的 9 位数据位串行端口？

> ID：14212660
> 
> 赞同：5
> 
> 时间：2013-01-08T10:13:54.103
> 
> 标签：c, serial-port, cygwin

我开发了一个通过[多点总线](http://en.wikipedia.org/wiki/Multidrop_bus)进行通信的嵌入式解决方案，现在我想开发一个基于 PC 的应用程序来监控总线上的流量。

`MDB supports true 9 data bits (plus start/stop/parity - and *no fudging* by using the parity bit as a 9th data bit)`而标准的 Windows 和 Linux 库最多提供 8 个数据位。

我有一个支持 9 位数据位的[StarTech PCI2S950](http://intrl.startech.com/Cards-Adapters/Serial-Cards-Adapters/2-Port-16950-Serial-PCI-Card~PCI2S950) PC 串行端口卡，但不知道如何编写我的监控应用程序，并且在 Google 上搜索了很多，但无济于事。

我更喜欢用 C（或 Delphi 或 C++）编写代码。我对 Cygwn 有一点偏好，但愿意使用简单的 Windows 或 Linux。

只需通过该 PC 串行端口卡读取/写入 9 个数据位即可。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T20:42:00.790

您选择的卡不适合此应用程序。它只有普通的 RS-232 端口，不适合多点总线。您需要在其他地方购买 EIA-485 式总线接口，您只能在工业电子供应商处找到。到目前为止，最好的方法是通过拥有 MDB 规范的行业组织 National Automatic Merchandising Association。

9 位数据格式只是一种技巧，在 MDB 协议中用于在地址字节和数据字节之间进行模式切换。总线上的所有端口都监听地址字节，只有寻址端口监听数据字节。

第 9 位只是任何 UART 可以生成的奇偶校验位。基本数据大小仍然是 8 位。UART 会根据其初始化方式自动生成奇偶校验位，您可以在标记、空格、奇偶校验和偶校验之间进行选择。

现在，在具有 UART 的微控制器中很容易做到这一点，UART 就是在这样的总线上使用的那种处理器。您只需即时重新编程 UART，告诉它在您发送地址字节时生成标记奇偶校验。并在发送数据字节时将其重新编程为空间奇偶校验。尽管这取决于实际的 UART 芯片，但通常需要等待 fifo 清空。

这在普通的 Windows 或 Linux 机器上**要**困难得多，在用户模式程序和 UART 之间有一个驱动程序。驱动程序生成一个“传输缓冲区空”状态位，如 Windows 上的 EV_TXEMPTY 的 WaitCommmEvent() ，但这不包括 fifo 空状态，它仅表示缓冲区为空。一种解决方法是等待缓冲区空状态，然后 sleep() 足够长的时间以确保 fifo 被清空。fifo 通常为 16 字节深，因此睡眠时间为 16 倍。您需要您选择的卡上的 UART 数据表才能确定了解这些详细信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-17T03:15:50.197

[http://www.semiconductorstore.com/pdf/newsite/oxford/ox16c950b.pdf](http://www.semiconductorstore.com/pdf/newsite/oxford/ox16c950b.pdf)上的文档描述了各种 UART 之间的差异。虽然您的 StarTech 板包括支持 RS-485（和 9 位）的 16C950，但它在 RS-232 兼容 (550) 模式下使用它，类似于 IBM-PC 时代的 16550/8250，并且最多支持 8 位数据。

您需要一块具有相同芯片 (16C950) 的板，但它公开了 RS-485 兼容的 950 模式，该模式支持 9 位数据，符合规范。并且任何声称支持这种支持的主板都必须配备适用于 Windows 的自定义驱动程序，因为微软只有 8 位。

[这里](http://ulan.sourceforge.net/)提到的还有其他几种可以执行 9 位 RS-485 的芯片，但再次找到 Windows 驱动程序支持将很棘手。当然，许多板卡使用 16C950，但仅在 8 位和/或 RS-232 模式下使用，并且没有适当的驱动程序。

在回答您[关于 Superuser 的相关问题时](https://superuser.com/questions/411386/seeking-9-bit-serial-port-card-for-windows-pc)，[锯末](https://superuser.com/users/83462/sawdust)建议使用[Sealevel 7205e](http://www.sealevel.com/store/7205e-low-profile-pci-express-rs-232-rs-422-rs-485-serial-interface.html)，它看起来是一个不错的选择，支持 Windows 驱动程序。它很贵，但他们特别提到了 9 位、RS-485 支持和 Windows 驱动程序。这很可能是您的最佳选择。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-08T10:32:47.973

在 Win32 下，串行端口只是文件，因此您可以使用 CreateFile 为其创建句柄，然后使用 DCB 结构来设置配置选项（成员在[此处](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa363214%28v=vs.85%29.aspx)记录并包括数据位数`ByteSize`）。

这里有一个很好的浏览：http: [//www.codeproject.com/Articles/3061/Creating-a-Serial-communication-on-Win32](http://www.codeproject.com/Articles/3061/Creating-a-Serial-communication-on-Win32)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T08:56:27.130

提供的链接显示该卡支持 9 个数据位和 Windows 8，因此我认为所有卡功能都可以通过标准 Windows API 提供给应用程序。

除了在 DCB 中设置正确的数据格式并打开端口之外，我还以为标准的 ReadFile 会起作用。我想知道读入的数据是否实际上是代表 9 个数据位的 2*8 位字节，而不是流式传输的连续 9 位（您需要在以后解码）。

第 9 位是否用于数据以外的其他目的？

# jquery - 为什么我的记录没有在 jqx 虚拟数据分页中过滤

> ID：14212667
> 
> 赞同：0
> 
> 时间：2013-01-08T10:14:18.823
> 
> 标签：jquery, jqxgrid

下面的代码显示可过滤的文本框，但是当我在“Sid 文本框”中键入“abc”时，记录不会被过滤。有人可以提供一些见解吗？

请尽快告诉我。非常感谢！！

```
<!DOCTYPE html>
<html lang="en">
<head>
    <title id='Description'>In this demo jqxGrid uses a virtualized paging which enables you to handle very large data sets without any impact on client side performance.</title>
    <link rel="stylesheet" href="../../jqwidgets/styles/jqx.base.css" type="text/css" />
    <script type="text/javascript" src="../../scripts/jquery-1.8.2.min.js"></script>
    <script type="text/javascript" src="../../jqwidgets/jqxcore.js"></script>
    <script type="text/javascript" src="../../jqwidgets/jqxdata.js"></script> 
    <script type="text/javascript" src="../../jqwidgets/jqxbuttons.js"></script>
    <script type="text/javascript" src="../../jqwidgets/jqxscrollbar.js"></script>
    <script type="text/javascript" src="../../jqwidgets/jqxmenu.js"></script>
    <script type="text/javascript" src="../../jqwidgets/jqxlistbox.js"></script>
    <script type="text/javascript" src="../../jqwidgets/jqxdropdownlist.js"></script>
    <script type="text/javascript" src="../../jqwidgets/jqxgrid.js"></script>
    <script type="text/javascript" src="../../jqwidgets/jqxgrid.pager.js"></script>
    <script type="text/javascript" src="../../jqwidgets/jqxgrid.selection.js"></script> 
    <script type="text/javascript" src="../../jqwidgets/jqxgrid.filter.js"></script> 
    <script type="text/javascript" src="../../jqwidgets/jqxgrid.sort.js"></script> 
    <script type="text/javascript" src="../../scripts/gettheme.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            var theme = getTheme();
            // prepare the data
            var data = new Array();
            var jsonObject = { "contactList":[

{"age":1,"SId":"S1234567","gender":"male"},
{"age":1,"SId":"S1234567","gender":"male"},
{"age":1,"SId":"S1234567","gender":"male"},
{"age":1,"SId":"S1234567","gender":"male"},
{"age":1,"SId":"S1234567","gender":"male"},
{"age":1,"SId":"S1234567","gender":"male"},
{"age":1,"SId":"S1234567","gender":"male"},
{"age":1,"SId":"S1234567","gender":"male"},
{"age":1,"SId":"S1234567","gender":"male"},

{"age":1,"SId":"S1234567","gender":"male"},
{"age":1,"SId":"S1234567","gender":"male"},
{"age":1,"SId":"S1234567","gender":"male"},
{"age":1,"SId":"S1234567","gender":"male"},
{"age":1,"SId":"S1234567","gender":"male"},
{"age":1,"SId":"S1234567","gender":"male"},
{"age":1,"SId":"S1234567","gender":"male"},
{"age":1,"SId":"S1234567","gender":"male"},
{"age":1,"SId":"S1234567","gender":"male"},

], "totalrecords":18};

//alert("jsonObject.totalrecords : " + jsonObject.totalrecords);

            // generate sample data.
            var generatedata = function (startindex, endindex) {
                var data = {};
                for (var i = startindex; i < endindex; i++) {

            //alert(startindex + " " + endindex);
                    var row = {};

                            row["age"] = jsonObject.contactList[i].age;
                            row["gender"] = jsonObject.contactList[i].gender;
                            row["SId"] = jsonObject.contactList[i].SId;

                    data[i] = row;
                }
                return data;
            }

//               sortcolumn: 'age',
//                sortdirection: 'asc',

            var source =
            {
                datatype: "array",
                localdata: {},
                totalrecords: jsonObject.totalrecords,

                 updaterow: function (rowid, rowdata, commit) {
                    // synchronize with the server - send update command
                    // call commit with parameter true if the synchronization with the server is successful 
                    // and with parameter false if the synchronization failder.
                    //alert("inside updaterow()");
                    commit(true);
                },

            };

            // load virtual data.
            var rendergridrows = function (params) {

        //alert("rendergridrows : " + source.totalrecords);
        //alert("rendergridrows : " + params.startindex + " " + params.endindex);

        if(params.endindex >= source.totalrecords) params.endindex = source.totalrecords;
        if(params.endindex == params.startindex) params.startindex = params.startindex - 1;

        //alert("rendergridrows : " + params.startindex + " " + params.endindex);

                var data = generatedata(params.startindex, params.endindex);
                return data;
            }
            var totalcolumnrenderer = function (row, column, cellvalue) {
                var cellvalue = $.jqx.dataFormat.formatnumber(cellvalue, 'c2');
                return '<span style="margin: 6px 3px; font-size: 12px; float: right; font-weight: bold;">' + cellvalue + '</span>';
            }
            var dataAdapter = new $.jqx.dataAdapter(source);
            $("#jqxgrid").jqxGrid(
            {
                width: 670,
                autoheight: true,
                source: dataAdapter,
                theme: theme,
                virtualmode: true,
                pageable: true,

                selectionmode: 'multiplerowsextended',
                sortable: true,

                showfilterrow: true,
                filterable: true,
                rendergridrows: rendergridrows,
                columns: [

                          { text: 'Age', datafield: 'age', width: 50 },
                          { text: 'SId', datafield: 'SId', width: 120 },
                          { text: 'Gender', datafield: 'gender', width: 80 },

                ]
            });
        });
    </script>
</head>
<body class='default'>
    <div id='jqxWidget' style="font-size: 13px; font-family: Verdana; float: left;">
        <div id="jqxgrid"></div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:25:49.567

在虚拟模式下，Grid 的数据是按需加载到 Grid 中的，因此本地过滤将不起作用，因为只有视图中存在记录。请参阅此示例以了解虚拟模式下的过滤实现：[serverfiltering_paging_and_sorting.htm](http://www.jqwidgets.com/jquery-widgets-demo/demos/php/serverfiltering_paging_and_sorting.htm?classic)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-12T10:45:42.443

在源代码中添加“过滤功能”：

```
var source =
    {
        datatype:"json",
        datafields: [
                      {name:'firstname',type:"string"},
                      {name:'lastname',type:"string"},
        ],
        url:url,
        cache: false,
        pagesize:30,
        type: "POST",
        root: 'Rows',

        filter: function()
        {
            // update the grid and send a request to the server.
            $("#jqxgrid").jqxGrid('updatebounddata','filter');
        },
        beforeprocessing: function(data)
        {   
            source.totalrecords = data[0].TotalRows;
        },
        sort: function()
        {
            // update the grid and send a request to the server.
            $("#jqxgrid").jqxGrid('updatebounddata', 'sort');
        }
    };

    var dataAdapter = new $.jqx.dataAdapter(source);
    var grid =  $("#jqxgrid").jqxGrid(
            {
                source: dataAdapter,
                theme: theme,
                virtualmode: true,
                showfilterrow: true,
                sortable: true,
                pageable:true,
                filterable: true,
                altrows: true,
                autoheight: true,
                pageable: true,
                width: '100%',
                pagesizeoptions: ['30', '100', '200'],
                rendergridrows: function(obj){
                     return obj.data;    
                }, 
                enablehover: false,
                selectionmode:'checkbox', 
```

})

# android - 下拉通知栏时如何显示我的活动

> ID：14212668
> 
> 赞同：2
> 
> 时间：2013-01-08T10:14:31.663
> 
> 标签：android

下拉通知栏时是否可以将我的活动置于前台？
我的应用程序是一个简单的 VoIP 应用程序。如果下拉，我的来电屏幕活动会显示在通知栏后面。
当我的活动开始时，有什么方法可以隐藏通知阴影吗？它发生在本地 GSM 呼叫的情况下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-04T14:35:39.027

您可以使用 Java 的反射代码隐藏通知阴影。否则，检测通知阴影何时被拉下的唯一方法是当您的应用程序的 Activity 处于前台时。为此，您可以覆盖`onWindowFocusChanged`Activity 中的方法。

# cakephp - 未定义的索引：CakeSession 中的 userAgent

> ID：14212678
> 
> 赞同：0
> 
> 时间：2013-01-08T10:15:06.473
> 
> 标签：cakephp, phpunit

尝试调用该方法时

```
CakeSession->destroy() 
```

我收到此错误：

> 未定义索引：userAgent

堆栈跟踪如下：

> lib\Cake\Model\Datasource\CakeSession.php：332
> 
> lib\Cake\Model\Datasource\CakeSession.php：632
> 
> lib\Cake\Model\Datasource\CakeSession.php：192
> 
> lib\Cake\Model\Datasource\CakeSession.php：438
> 
> lib\Cake\Model\Datasource\CakeSession.php：427

我已经按照方法

```
CakeSession->_validAgentAndTime() 
```

并且该索引确实丢失了-无论如何，我不知道如何到达那里。它似乎只在运行 PHPUnit 测试时发生。有时，如果我在此错误之后运行另一个测试并返回，它会运行一次，然后再次失败。

我正在使用 CakePHP 2.2.3 和 PHPUnit 3.7.10 顺便说一句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:22:34.307

较旧的浏览器和定制应用程序可能会提供奇怪的 UserAgent 或不提供 UserAgent，但您可以在 app/core/config.php 文件中禁用 CakePHP 的 UserAgent 方面：

```
Configure::write('Session.checkAgent', false); 
```

如果您想在测试中保持 UserAgent 完整，可以使用以下调试...

env('HTTP_USER_AGENT');

# asp.net - 当asp.net mvc 3中的会话过期时如何重定向到登录页面？

> ID：14212683
> 
> 赞同：1
> 
> 时间：2013-01-08T10:15:19.937
> 
> 标签：asp.net, asp.net-mvc-3

我有这种情况-我正在通过javascript脚本中的ajax调用控制器，它返回部分视图。现在当会话结束时，登录页面视图被加载到div中，但我想重定向到登录页面而不是在div中加载登录视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:39:33.700

如果您使用表单身份验证会更容易。但是，此链接将对您有所帮助：http: [//geekswithblogs.net/shahed/archive/2007/09/05/115173.aspx](http://geekswithblogs.net/shahed/archive/2007/09/05/115173.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T11:24:11.417

试试看这个[帖子](https://stackoverflow.com/questions/13873398/how-to-redirect-to-logon-page-when-session-state-time-out-is-completed-in-asp-ne/13874154#13874154)

这将有助于为登录创建一个属性，这将有助于在每次调用任何控制器的操作时检查并相应地执行任务。

# ravendb - Ravendb 版本控制

> ID：14212687
> 
> 赞同：0
> 
> 时间：2013-01-08T10:15:33.687
> 
> 标签：ravendb

如何通过 asp.net MVC4 使用 ravendb 版本控制。我是 ravendb 和 asp.net MVC 的新手。我必须维护文档中的所有更新和删除记录（或）字段。如何使用 ravendb 成为可能。我想在 RDBMS 表中维护类似的审计表。

# java - java - 如何仅从java中给定的albha-numberic单词中获取字母？

> ID：14212690
> 
> 赞同：0
> 
> 时间：2013-01-08T10:15:38.347
> 
> 标签：java

如果这是一个愚蠢的问题，我很抱歉。但我需要知道这一点。

如果我有像字母、数字和特殊章程这样的词。我只需要提取字母。不需要数字和特殊字符。我需要知道 Java 中是否有默认功能来仅拆分字符？

```
eg.String word="te123@#st"; 
```

我只需要**测试**。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T10:36:04.060

此解决方案适用于重音/非 ascii 字符：

```
"te123@#st\néàø_".replaceAll("[\\p{Digit}\\p{Punct}\\p{Space}]", ""); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T10:17:55.497

试试这个`word.replaceAll("[^a-zA-Z]", "");`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T10:25:43.903

这将删除所有非字母数字字符，但仍会删除重音字符。

```
 String word = "te123@#st";
 word = word.replaceAll("[^\\p{Alpha}]", "");  
 // or word = word.replaceAll("[\\P{Alpha}]", ""); 
```

请参阅[apidoc 参考](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T10:19:04.810

```
String word = "te123@#st";
word = word.replaceAll("[\\W\\d._]", ""); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-08T10:25:54.043

尝试

```
 word = word.replaceAll("\\P{Alpha}", ""); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-08T10:20:44.433

试试这个：

```
word = word.replaceAll("[\\d@#_]", ""); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-08T10:39:35.857

**-**我不会使用 来使这个复杂化`Regex`，但**会使用内置的 Java 功能来回答这个问题。**

**-**先用`subString()`method得到String的“abcd”部分，再用`toCharArray()`method分解`String`成`char`元素，再用`Character class's` `isDigit()`method判断是不是数字。

```
public class T1 {

    public static void main(String[] args){

        String s = "te123@#st";

        String str = s.substring(0,4);
        System.out.println(str);
        String tempStr = new String();
        char[] cArr = str.toCharArray();

        for(char a :cArr){

            if(Character.isAlphabetic(a)){

                System.out.println(a+" is a alphabet");
                tempStr = tempStr + a;
            }else{

                System.out.println(a+" is not a alphabet");
            }
        }

        System.out.println("The extracted String is: "+tempStr);
             }
     } 
```

# c# - 如何更改 Mifare Classic 1k 密钥 A 和密钥 B

> ID：14212691
> 
> 赞同：4
> 
> 时间：2013-01-08T10:15:38.540
> 
> 标签：c#, nfc, smartcard, rfid, mifare

我使用的是 Mifare 经典 1k 阅读器，它带有默认密钥 A 和 B，即：

```
FFFFFFFFFFFF 
```

使用 Key A 读写作品。但我想换钥匙。

无论如何要获得该扇区的正确访问位以及格式是什么？

我现在所做的是，

```
<newKey>+ access bits + <oldKEY>
212121212121078069FFFFFFFFFFFF 
```

`078069`我从扇区 1 的第 7 块读取得到的访问位，如下所示：

```
000000000000FF078069FFFFFFFFFFFF 
```

但是有错误。

访问位不正确还是格式错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T21:58:59.657

Depending on the access control settings of the sector trailer, you may need to authenticate with key A or key B to be able to write keys. See the section 8.7 (and specifically 8.7.2) of the datasheet at [http://www.nxp.com/documents/data_sheet/MF1S70YYX.pdf](http://www.nxp.com/documents/data_sheet/MF1S70YYX.pdf) on how to encode/decode the access control bits in the sector trailer.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-15T12:29:43.113

您需要做的是，如果访问位具有权限（并且您的权限似乎如此），请编写：

```
AAAAAAAAAAAA078069BBBBBBBBBBBB 
```

其中 AAAAAAAAAAAA 和 BBBBBBBBBBBB 分别是新的 A 和 B 键。（您永远不会编写旧密钥，您首先使用它们进行身份验证）。

当你阅读时，使用键 A，你总是会得到

```
000000000000078069BBBBBBBBBBBB 
```

密钥 A 将始终被屏蔽

# visual-studio-2010 - vs 2010 中的项目模板 - 如何在层次结构中显示项目模板？

> ID：14212696
> 
> 赞同：1
> 
> 时间：2013-01-08T10:15:53.890
> 
> 标签：visual-studio-2010, templates, project

我创建了一个项目模板。

我有兴趣在层次结构中显示项目模板，如下所示：MyCompany --> Web --> MyProjectTempalte 为此我更改了文件 MyTemplate.vstemplate：

我的公司网站

但这不会影响层次结构和以下显示的项目模板：`C# --> Web`

我如何获得层次结构？

MyTemplate: BLLControlsWebFormsApp 用于创建具有 Web 用户界面的应用程序的项目 MyCompany Web 1000 true BLLControlsWebFormsApp true Enabled true _ *TemplateIcon.ico* _PreviewImage.png Global.asax Global.asax.cs Instruction.txt BreadCrumbs.aspx BreadCrumbs.aspx.cs BreadCrumbs.aspx.designer.cs SubHeader.aspx SubHeader.aspx.cs SubHeader.aspx.designer.cs TabStrip.aspx TabStrip.aspx .cs TabStrip.aspx.designer.cs AssemblyInfo.cs jquery-1.4.1-vsdoc.js jquery-1.4.1.js jquery-1.4.1.min.js masterPage.css Site.Master Site.Master.cs 站点。 Master.designer.cs Web.config Web.Debug。配置 Web.Release.config

# jquery - jquery mobile select刷新，样式出来的地方不对

> ID：14212697
> 
> 赞同：0
> 
> 时间：2013-01-08T10:15:56.917
> 
> 标签：jquery, jquery-mobile

请看看这个小提琴[http://jsfiddle.net/GkfY7/](http://jsfiddle.net/GkfY7/)

有人可以向我解释一下，为什么样式（和文本）可能不会被刷新到 div 中？

我认为问题在于刷新？

```
 $('#survey [data-role="fieldcontain"]').fieldcontain();
    $('#survey [data-role="fieldcontain"]').fieldcontain('refresh',true);
    $('#survey [data-role="controlgroup"]').controlgroup();
    $('#survey [data-role="controlgroup"]').controlgroup('refresh',true);
    $('#survey').selectmenu();
    $('#survey').selectmenu('refresh',true); 
```

TIA,

丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:27:17.047

```
 Try Changing the last part of your code to:

        $('#survey').append(output.join(''));
        $('#survey [data-role="fieldcontain"]').fieldcontain();
        $('#survey [data-role="fieldcontain"]').fieldcontain('refresh',true);
        $('#survey [data-role="controlgroup"]').controlgroup();
        $('#survey [data-role="controlgroup"]').controlgroup('refresh',true);
        $('#sc1, #sc3').selectmenu();
        $('#sc1, #sc3').selectmenu('refresh',true); 
```

# c++ - std::sort 并不总是调用 std::swap

> ID：14212701
> 
> 赞同：23
> 
> 时间：2013-01-08T10:16:04.450
> 
> 标签：c++, stl

考虑以下代码：

```
#include <algorithm>
#include <iostream>
#include <vector>

namespace my_space
{

struct A
{
    double  a;
    double* b;
    bool operator<(const A& rhs) const
    {
        return this->a < rhs.a;
    }
};

void swap(A& lhs, A& rhs)
{
    std::cerr << "My swap.\n";
    std::swap(lhs.a, rhs.a);
    std::swap(lhs.b, rhs.b);
}

}

int main()
{
    const int n = 20;
    std::vector<my_space::A> vec(n);
    for (int i = 0; i < n; ++i) {
        vec[i].a = -i;
    }

    for (int i = 0; i < n; ++i) {
        std::cerr << vec[i].a << " ";
    }
    std::cerr << "\n";
    std::sort(vec.begin(), vec.end());
    for (int i = 0; i < n; ++i) {
        std::cerr << vec[i].a << " ";
    }
    std::cerr << "\n";
} 
```

如果我使用`n=20`，则调用自定义交换函数并对数组进行排序。但是如果我使用，则数组排序正确，但*不会*调用`n=4`自定义交换函数。这是为什么？如果复制我的对象真的很昂贵怎么办？

 *对于这个测试，我使用的是 gcc 4.5.3。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-08T10:54:10.397

对于小范围，`std::sort`出于性能原因，GCC 的 stdlibc++（和其他标准库实现）中的实现会重复插入排序（它比小范围上的快速排序/引入排序更快）。

反过来，GCC 的插入排序实现不交换通过`std::swap` - 相反，它一次移动整个值范围，而不是单独交换，因此可能会节省性能。相关部分在这里（`bits/stl_algo.h:2187`，GCC 4.7.2）：

```
typename iterator_traits<_RandomAccessIterator>::value_type
  __val = _GLIBCXX_MOVE(*__i);
_GLIBCXX_MOVE_BACKWARD3(__first, __i, __i + 1);
*__first = _GLIBCXX_MOVE(__val); 
```

`_GLIBCXX_MOVE``std::move`与 C++11相同，并且`_GLIBCXX_MOVE_BACKWARD3`is [`std::move_backward`](http://en.cppreference.com/w/cpp/algorithm/move_backward)– 但是，仅当`__GXX_EXPERIMENTAL_CXX0X__`定义为时才如此；如果不是，那么这些操作将诉诸于复制而不是移动！

这样做是将当前位置 ( `__i`) 处的值移动到临时存储区，然后将所有先前的值从`__first`上移到`__i`一个，然后在 处重新插入临时值`__first`。因此，这会在一个操作中执行*n*次交换，而不必将*n*值移动到临时位置：

```
 first           i
+---+---+---+---+---+---+
| b | c | d | e | a | f |
+---+---+---+---+---+---+
                  |
  <---------------+

  first           i
+---+---+---+---+---+---+
| --> b-> c-> d-> e-> f |
+---+---+---+---+---+---+

  first           i
+---+---+---+---+---+---+
| a | b | c | d | e | f |
+---+---+---+---+---+---+
  ^ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T10:58:13.837

根据类型，交换可能比移动赋值（在 C++98 中是简单的赋值）更昂贵。标准库没有任何方法来检测这些情况。至少在 C++11 中，解决方案很明确：为所有实现交换的类实现移动赋值运算符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T10:35:26.393

我将代码修改为更详细。20 个元素的排序使用多次交换，使用赋值结束副本。对 4 个元素进行排序仅使用分配和复制。不知道规格，但它可能会继续下去。

```
#include <algorithm>
#include <iostream>
#include <vector>

namespace my_space
{

struct A
{
    double  a;
    double* b;
    A()
        : a(0)
        , b(NULL)
    { }
    A(const A &rhs)
        : a(rhs.a)
        , b(rhs.b)
    {
        std::cerr << "copy" << std::endl;
    }
    A& operator=(A const &rhs)
    {
        if(this==&rhs)
                return *this;
        a = rhs.a;
        b = rhs.b;
        std::cerr << "=" << std::endl;
        return *this;
    }
    bool operator<(const A& rhs) const
    {
        return this->a < rhs.a;
    }
};

void swap(A& lhs, A& rhs)
{
    std::cerr << "My swap.\n";
    std::swap(lhs.a, rhs.a);
    std::swap(lhs.b, rhs.b);
}

} // namespace my_space

int main()
{
    const int n = 20;

        std::cerr << "=== TEST CASE: n = " << n << std::endl;
    std::cerr << "=== FILL ===" << std::endl;
    std::vector<my_space::A> vec(n);
    for (int i = 0; i < n; ++i) {
        vec[i].a = -i;
    }

    std::cerr << "=== PRINT ===" << std::endl;
    for (int i = 0; i < n; ++i) {
        std::cerr << vec[i].a << " ";
    }
    std::cerr << "\n";

    std::cerr << "=== SORT ===" << std::endl;
    std::sort(vec.begin(), vec.end());

    std::cerr << "=== PRINT ===" << std::endl;
    for (int i = 0; i < n; ++i) {
        std::cerr << vec[i].a << " ";
    }
    std::cerr << "\n";
} 
```

输出

```
=== TEST CASE: n = 4
=== FILL ===
copy
copy
copy
copy
=== PRINT ===
0 -1 -2 -3
=== SORT ===
copy
=
=
copy
=
=
=
copy
=
=
=
=
=== PRINT ===
-3 -2 -1 0 
```

和

```
=== TEST CASE: n = 20
=== FILL ===
copy
copy
copy
copy
copy
copy
copy
copy
copy
copy
copy
copy
copy
copy
copy
copy
copy
copy
copy
copy
=== PRINT ===
0 -1 -2 -3 -4 -5 -6 -7 -8 -9 -10 -11 -12 -13 -14 -15 -16 -17 -18 -19
=== SORT ===
copy
My swap.
My swap.
My swap.
My swap.
My swap.
My swap.
My swap.
My swap.
My swap.
My swap.
copy
copy
=
copy
copy
=
copy
copy
=
copy
copy
=
copy
copy
=
copy
copy
=
copy
copy
=
copy
copy
=
copy
copy
=
copy
copy
=
copy
copy
=
copy
copy
=
copy
copy
=
copy
copy
=
copy
copy
=
copy
=
copy
=
copy
=
copy
=
=== PRINT ===
-19 -18 -17 -16 -15 -14 -13 -12 -11 -10 -9 -8 -7 -6 -5 -4 -3 -2 -1 0 
```*

# javascript - 如何在安卓中在线下载谷歌图书？

> ID：14212704
> 
> 赞同：0
> 
> 时间：2013-01-08T10:16:21.000
> 
> 标签：javascript, android

我正在创建一个 android 应用程序，我需要在其中找到 google 上的书籍并将它们下载到我的 sdcard 中以阅读这些书籍。

我在网上搜索了这个，但没有得到任何关于如何下载我搜索过的书的线索。任何人都可以给我一些链接或示例如何做到这一点。

[https://developers.google.com/books/docs/v1/getting_started](https://developers.google.com/books/docs/v1/getting_started)

我看过这个网站，但它没有描述如何下载这本书。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:21:49.173

Google 图书是一种 API，可用于检索图书的元数据，而不是图书的内容。不过，您可以看到书名、作者 ISBN 等。

您需要找到其他一些 API 来检索内容，尽管我怀疑在一般情况下是否有合适的 API，因为您知道，书籍通常是付费的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-05T08:12:44.080

在这篇文章中：[如何从 ipaper swf 下载文档](https://stackoverflow.com/questions/32170771/how-to-download-a-document-from-ipaper-swf/38198147#38198147)
我回答了如何在 pc 中下载在线书籍。
对于 android，您应该搜索捕获流量解决方案以跟踪您的应用程序是如何工作的（例如 pc 浏览器中的网络捕获）。
剩下的应该是一样的

# javascript - 跨域 tinymcePopup（表达式 'tinymce' [undefined] 的结果不是对象。）

> ID：14212705
> 
> 赞同：1
> 
> 时间：2013-01-08T10:16:22.013
> 
> 标签：javascript, air, tinymce, cross-domain, inline

我有一个 AIR 应用程序，其中包含 tinyMCE js。我在 tinyMCE 工具栏上添加了一个按钮，单击该按钮会出现一个内联弹出窗口。此内联弹出窗口加载一个 url

```
 var aa=tinyMCE.activeEditor.windowManager.open({
            url : 'http://localhost/Save.html',
            width : 520,
            height : 340,
            resizable : "yes",
            inline : true,
            close_previous : "yes"

            }); 
```

**保存.html代码：**

```
 <script src="http://www.wiris.net/demo/editor/editor"></script>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script src="../tinymce/jscripts/tiny_mce/tiny_mce_popup.js"></script>
<script>

var editor;
window.onload = function () 
{   
  editor = com.wiris.jsEditor.JsEditor.newInstance({'language': 'en'});
      editor.insertInto(document.getElementById('editorContainer'));
} 
```

现在的问题是----当我运行我的 AIR 应用程序时，我得到一个错误
表达式 'tinymce' [undefined] 的结果不是对象。

我怀疑是跨域问题，因为
当我在 Save.html 中发出警报时 `alert(window.document.domain); returns "localhost"`

当我在 AIR 应用程序 Mxml（内部）js 中发出警报时 `alert(window.document.domain); returns " "`

提前感谢您的任何建议和建议。

# java - 推土机深度映射集 设置

> ID：14212708
> 
> 赞同：4
> 
> 时间：2013-01-08T10:16:30.940
> 
> 标签：java, mapping, dozer

免责声明：这里已经问过同样的问题[Mapping deep properties with intermediate collections in dozer](https://stackoverflow.com/questions/2196680/mapping-deep-properties-with-intermediate-collections-in-dozer)，但它没有可接受的答案（对于我的情况也没有正确的答案）。

所以这个问题。我有一个由 ComplexObject 组成的领域，如下所示

```
public class ComplexObject {
  private Set<AnotherComplexObject> inner;
  ... //other fields, setters and getters
}
public Class AnotherComplexObject {
  private String property;
  ... //other fields, setters and getters
} 
```

现在，我正在映射`ComplexObject`到`Target`Target 具有`Set<String>`属性的位置。

```
public class Target {
  private Set<String> targetString;
  ... //other fields, setters and getters
} 
```

我想将每个 ComplexObject inner.property 映射到一个 Target targetString 上。语义上看起来像的东西（这当然不起作用，属性不是 Set 的成员，并且 Dozer 会生成 MappingException）：

```
<mapping>
  <class-a>ComplexObject</class-a>
  <class-b>Target</class-b>
  <field>
    <a>inner.property</a>
    <b>targetString</b>
  </field>
</mapping> 
```

如果我修改to的`toString`方法，我可以实现我的目标`AnotherComplexObject`

```
public class AnotherComplexObject {
  public String toString(){
    return property;
  }
} 
```

然后，Dozer 将检测到源 Set 是“类型”AnotherComplexObject，而目标 Set 是 String，并在转换过程中使用 toString 方法。不幸的是，这不是一个很好的解决方案，因为我需要在我的 POJO 中使用一个方法来让 Dozer 进行转换。

起作用的是编写一个自定义转换器，它覆盖转换方法以检查源是否为 Set，然后假设集合中的对象是 AnotherComplexObject 并从此时开始进行转换，但不知何故，我觉得这不是最好的，也不是更多优雅的解决方案。
关于如何解决这个问题的任何其他想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T14:50:23.797

也许我的[回答](https://stackoverflow.com/a/14237791/525203/ "回答")对你有用：

我想，你可以写这样一个映射

```
<mapping>
  <class-a>Baz</class-a>
  <class-b>Target</class-b>
  <field>
    <a>foos</a>
    <b>fooStrings</b>
  </field>
</mapping>

<custom-converters> 
  <converter type="CustomFooConverter">
    <class-a>
      Foo
    </class-a>
    <class-b>
      String
    </class-b>
  </converter>
</custom-converters> 
```

并实现 CustomFooConverter 以获取 foo 的字符串字段并将其作为字符串返回。

我认为您可以发布一个功能请求以支持映射到原语

```
<mapping>
  <class-a>Foo</class-a>
  <class-b>String</class-b>
  <field>
    <a>string</a>
  </field>
</mapping> 
```

进入推土机[GitHub](https://github.com/DozerMapper/dozer/ "GitHub")

# string - 我需要比较两个字符串以查看它们是否匹配或接近匹配

> ID：14212709
> 
> 赞同：0
> 
> 时间：2013-01-08T10:16:37.783
> 
> 标签：string, comparison, string-comparison, fuzzy-logic

我从网络抓取返回了一系列公司名称，我正在尝试将它们与其他公司名称表进行比较，以查看它们是否匹配或接近匹配；

*   某有限公司
*   另一有限公司
*   本有限公司

*   某有限公司

*   另一家有限公司
*   那个有限公司

因此，比较两个列表应该将前两行标记为匹配，第二行标记为接近匹配，第三行标记为不匹配。据我了解，这是一个模糊搜索，但我在澄清如何最好地实现这一目标？有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:26:13.003

请参考： [http](http://en.wikipedia.org/wiki/Levenshtein_distance) ://en.wikipedia.org/wiki/Levenshtein_distance AC 实现可以在外部链接中找到：Levenshtein in MySQL

# sql - SQL 内连接查询不返回任何结果

> ID：14212710
> 
> 赞同：2
> 
> 时间：2013-01-08T10:16:39.627
> 
> 标签：sql, inner-join

我正在重构几年前由其他人编写的 Java 程序，无法与他们联系以了解有关 SQL / 数据库的任何信息，但是此查询不起作用（有两个查询时不返回任何结果分开做）。我知道在没有更多信息的情况下询问很烦人，但目前我真的没有太多选择。

```
"SELECT " + CLMHDR + ".POLBRC, "
+ CLMHDR + ".POLTYC, " + CLMHDR + ".POLNOC," + CLMHDR + ".CLTKYC, " 
+ POLHDR + ".INCPTP FROM "+ CLMHDR + 
"INNER JOIN " + POLHDR + " ON " + CLMHDR + ".CLTKYC = " + POLHDR+ ".CLTKYP" 
+ " WHERE POLNOC = "+ polnocSearch
+ " AND POLBRC = '" + polbrcSearch + "'"
+ " AND POLTYC = '" + poltycSearch + "'"
+ " AND DATRPC <= " + claimDate
+ " GROUP BY POLBRC, POLTYC, POLNOC, CLTKYC" 
```

表 CMLHDR 和 POLHDR 确实包含它所引用的列，并且 CLTKYC 和 CLTKYP 是每个表中的键。对不起这些可怕的名字，我们也被 RPG 困住了。

编辑：起作用的是：

```
"SELECT POLBRC, POLTYC, POLNOC, CLTKYC FROM "+ CLMHDR
+ " WHERE POLNOC = "+ polnocSearch
+ " AND POLBRC = '" + polbrcSeach + "'"
+ " AND POLTYC = '" + poltycSearch + "'"
+ " AND DATRPC <= " + claimDate
+ " GROUP BY POLBRC, POLTYC, POLNOC, CLTKYC" 
```

其次是：

```
"SELECT INCPTP, TRMTHP FROM "+ POLHDR   + " WHERE POLNOP = "+ polnocSearch
+ " AND POLBRP = '"+ polbrcSearch+ "' AND POLTYP = '"+ poltycSearch + "'" 
```

但我真的更希望一次返回所有数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T10:24:02.640

FROM 和 INNER JOIN 子句之间缺少一个空格：

```
FROM "+ CLMHDR +
"INNER JOIN 
```

应该是这样的：

```
FROM "+ CLMHDR + 
" INNER JOIN 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T14:27:25.220

除了`inner join`问题之外，您的`group by`. 它应该有`INCPTP`。在除 MySQL 之外的任何数据库中，这都会产生错误。

顺便说一句，如果它包括两件事，会更容易回答你的问题：

1.  您正在使用的数据库引擎
2.  填充了值的结果查询字符串

# yii - Yii框架的安装方法

> ID：14212711
> 
> 赞同：0
> 
> 时间：2013-01-08T10:16:39.863
> 
> 标签：yii, cmd

我是 Yii 框架的新手。

我已经下载了框架并移动到 webroot（在 linux 中），并执行命令“yiic webapp ../../testapplication”。

但我得到的错误是“找不到命令” ![在此处输入图像描述](../Images/f8878d4994f3527c1571568bd166cdc4.png)。

[在 xampp for ubuntu 中安装 YII 框架](https://stackoverflow.com/questions/12422523/install-yii-framework-in-xampp-for-ubuntu)

我已遵循这些步骤。但我没能成功。

请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T10:18:30.067

你需要跑

```
./yiic 
```

显式命名可执行文件（因为`yiic`单独不在你身上`$PATH`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T12:43:40.630

语法是：

```
$ /path/to/yiic webapp /path/to/webapp 
```

我建议你这样做：

```
$ cd /var/www
$ mkdir yourapp
$ cd yourapp
$ git clone git@github.com:yiisoft/yii
$ ./yii/framework/yiic webapp . 
```

当新版本的 yii 发布时...

```
$ cd /var/www/yourapp/yii
$ git pull origin master 
```

非常容易和快速。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-20T11:04:32.000

首先转到 cmd 中的 xampp php.exe 文件夹，然后运行此命令

**php yii/framework/yiic.php webapp myfirstsite**

它仅适用于 windows xampp 或 wamp 任何服务器

# c# - 开源 C# 插件提供程序 Harnes（控制台应用程序或 Windows 服务）

> ID：14212719
> 
> 赞同：0
> 
> 时间：2013-01-08T10:17:30.533
> 
> 标签：c#, plugins, open-source

## 我的目标

我正在寻找一个好的 C# Provider 模型库，它会自动重新加载更新的 Provider DLL 并继续运行。

## 我当前（旧）的解决方案

我有一个旧的 SnapIn/Plugin 组件工具，用于为 Web 应用程序或 Windows 服务提供插件功能。过去，我使用它每 10 分钟读/写一次 HTTP 请求，或者监视文件更改并加载数据文件。

我只是有一个带有生命周期方法的 IPlugIn，例如 Initialize、Start、Stop

我还有一些基本实现，例如 Interval（每 N 秒触发一次）或 File Watcher 在文件更改时会做一些事情。

## 我想用我当前的系统实现的目标（我的目标）

我希望能够：

*   更改代码
*   重新编译
*   将 DLL 复制到 Windows Serviced 文件夹
*   最后让 DLL 自动加载、初始化和执行

## 选项

1.  编写某种代码来自动卸载旧 DLL 并加载新 DLL 或
2.  找到一个可以实现我的目标的开源插件/提供程序库

## 当前代码示例

```
 /// <summary>
    /// All SnapIn/Provider implement this interface
    /// </summary>
    public interface ISnapIn
    {
        /// <summary>
        /// Configuration information for the SnapIn.
        /// </summary>
        /// <param name="config">The config.</param>
        void SetConfig(SnapInConfigurationSnapInDo config);

        /// <summary>
        /// Unique SnapIn ID
        /// </summary>
        string Id { get; set; }

        /// <summary>
        /// Description SnapIn.
        /// </summary>
        string Description { get; set; }

        /// <summary>
        /// Life-Cycle State
        /// </summary>
        SnapInStateType State { get; set; }

        /// <summary>
        /// Initializes the snapin.
        /// </summary>
        void Initialize(SnapInManager manager, NameValueDictionary parameters);

        /// <summary>
        /// Starts this snapin
        /// </summary>
        void Start();

        /// <summary>
        /// Stops this snpin.
        /// </summary>
        void Stop();
    } 
```

.

```
 public abstract class FileWatchSnapIn : BaseSnapIn
    {
        // *********************************************************************************
        // Properties
        // *********************************************************************************

        public string Path { get; set; }

        public string Filter { get; set; }

        protected FileSystemWatcher Watcher { get; set; }
        // ...     
    } 
```

.

```
 public abstract class IntervalSnapIn : BaseSnapIn
    {
        // *********************************************************************************
        // Properties
        // *********************************************************************************

        protected Timer Timer { get; set; }

        protected long Interval { get; set; }

        protected bool FireIntervalTaskOnStart { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:05:27.223

如果您正确设置，Microsoft 的 MAF 框架将允许您卸载应用程序域。事实上，最常见的场景是将每个加载项加载到单独的应用程序域中。

本质上，您可以选择加载项的隔离级别来控制它。

请参阅[http://msdn.microsoft.com/en-us/library/bb384200%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/bb384200%28v=vs.100%29.aspx)

# javascript - Jquery在单击时更改CSS类

> ID：14212721
> 
> 赞同：7
> 
> 时间：2013-01-08T10:17:33.763
> 
> 标签：javascript, jquery

我正在做一个项目，我有一些锚点，比如选项卡，每个都有一些 CSS 类，选定的选项卡有单独的 css 类。我正在单击选项卡，我想将其 CSS 类更改为选定的 css 类我已经完成了此功能，但我遇到了一些问题，即先前选择的选项卡也具有相同的类，我如何将先前选择的选项卡更改为未选中类，下面是我的代码

```
$(".btn").each(function ()
{
    $(this).click(function () {                              
        $(this).removeClass("course-btn-tab").addClass("course-btn-tab-selected");        
    });
});

<div class="course-Search-tabs">
    <a href="#" class="course-btn-tab-selected btn" id="a">A</a>
    <a href="#" class="course-btn-tab btn" id="b">B</a>
    <a href="#" class="course-btn-tab btn" id="c">C</a>
    <a href="#" class="course-btn-tab" id="d">D</a>
</div>
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-08T10:19:39.140

您不需要在`each`此处使用 on `click`of element with class `btn`remove class 所有具有类的元素，`btn`并将所需的类分配给作为`referred by $(this)`事件源的当前元素 ( )。另外我假设您想从以前的元素中删除*选定的类。*

```
$(".btn").click(function () { 
     if($(this).hasClass("course-btn-tab-selected"))
          $(".btn").removeClass("course-btn-tab-selected").addClass("course-btn-tab");               
     $(this).addClass("course-btn-tab-selected");        
}); 
```

**编辑：**您可以通过保留最后一个选定的元素并在适合您的情况下更改它的类来改进这一点。

```
previouslyClicked = $(".btn").eq(0); //Assuming first tab is selected by default
$(".btn").click(function () {       
     previouslyClicked.removeClass("course-btn-tab-selected").addClass("course-btn-tab");                 
     $(this).addClass("course-btn-tab-selected");
     previouslyClicked = $(this);           
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T10:19:23.000

### 错误使用`$.each()`

使用这种方式：

```
$(".btn").click(function () {
    $(".btn").removeClass("course-btn-tab-selected");
    $(this).addClass("course-btn-tab-selected");        
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T10:23:08.487

应该做的伎俩：

```
$(".btn").click(function () { 
        $(".course-btn-tab-selected").removeClass("course-btn-tab-selected").addClass('course-btn-tab');                 
        $(this).removeClass('course-btn-tab').addClass("course-btn-tab-selected");        

    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T10:39:53.547

首先，您需要使用 jQuery 选择器将单击事件绑定到“btn”CSS 类，这将允许您一次操作所有按钮。

接下来找到之前选中的按钮，去掉选中的类，添加常规类。

最后从单击的按钮中删除常规类并添加选定的类。

```
$('.btn').bind('click', function () {
    var previouslySelectedButton = $('.course-btn-tab-selected');
    var selectedButton = $(this);

    if (previouslySelectedButton)
        previouslySelectedButton.removeClass('course-btn-tab-selected').addClass('course-btn-tab');

    selectedButton.removeClass('course-btn-tab').addClass('course-btn-tab-selected');
}); 
```

或者，这是一个使用您的 HTML 的工作示例：[jsFiddle](http://tinyurl.com/af4gjjx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T10:41:00.657

还有另一种方法：

```
$(".btn").click(function (e) {
   e.preventDefault();
   $(this).siblings().removeClass("course-btn-tab-selected").addClass('course-btn-tab');
   $(this).addClass("course-btn-tab-selected");        
}); 
```

# mysql - MySQL WEEK() - 我还需要比较年份吗？

> ID：14212722
> 
> 赞同：1
> 
> 时间：2013-01-08T10:17:38.557
> 
> 标签：mysql

这是我的查询的一部分：

```
WHERE WEEK( data.time ) = ( WEEK( CURRENT_DATE + INTERVAL -3 WEEK ) ) 
```

我可以选择三周前的数据，即 2012 年 12 月。现在的问题是 - 我得到了那一周的所有年份的数据。不仅仅是三周前的那个。

添加

```
YEAR( data.time ) = YEAR( CURRENT_DATE + INTERVAL -3 WEEK ) 
```

解决了这个问题，但我想知道是否有必要比较年份，或者我是否可以只保留星期比较 - 如果我以某种方式调整第一行。

我在这里 [MySQL week numbers and New Year](https://stackoverflow.com/questions/4398381/mysql-week-numbers-and-new-year)中找到了类似的查询， 但他们没有提到这样的问题，即使没有年份比较，它似乎也适用于他们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T10:29:00.680

通过与所需一周的开始和结束进行比较，您会得到更好的服务。就像是：

```
WHERE SUBDATE(CURDATE(), WEEKDAY(CURDATE()) + 21) <= data.time 
    AND data.time < SUBDATE(CURDATE(), WEEKDAY(CURDATE()) + 14); 
```

这*将*在今年的第一周和最后一周有所不同。例如 2012-12-31 是 2013-W01 的一部分（2013 的第一周*）*。所以`WEEK`会说`1`while`YEAR`会说`2012`。而对于 2013-01-13，2013-W01`WEEK`的一部分`1`也是。所以天真地使用and会给你错误的结果。`YEAR``2013``WEEK``YEAR`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T10:22:08.040

我会说是的，如果您的表中存在多年的数据，那么您应该始终进行`Year()`比较。

除非您告诉它您只想要 2012，否则您的数据库不知道。

因此，当您编写查询时，您将包括：

```
select *
from yourtable 
where week(yourdate) = week(CURRENT_DATE + INTERVAL -3 WEEK)
  and year(yourdate) = year(CURRENT_DATE + INTERVAL -3 WEEK) 
```

如果您比较月份，同样的事情：

```
select *
from yourtable 
where month(yourdate) = month(CURRENT_DATE + INTERVAL -3 WEEK)
  and year(yourdate) = year(CURRENT_DATE + INTERVAL -3 WEEK) 
```

这样做可确保您返回与周和年或月和年相匹配的数据。

# shell - 如何从 shell 脚本中的文件中选择具有特定结构的单词？

> ID：14212730
> 
> 赞同：-1
> 
> 时间：2013-01-08T10:18:18.587
> 
> 标签：shell, grep

我的文件有这样的结构：

```
 HELLO h e l lo
    HELLO(2) h ee l lo
    HELLOMUM h e l ll m um
    HELLO-FATHER h e llo fa th er
    HOME h o m e
    HONEY h o ne y
    HONEY(2) ho nei y
    HONEY(3) h o ney
    HONEYMOON ho ney m o o n
    HONEY-MOON h o ne y moo n 
```

例如，在查找单词 HELLO 时，我想仅提取与单词 HELLO 和 HELLO(2) 相关的行。如果我正在寻找 HONEY 这个词，我想只有与 HONEY、HONEY(2) 和 HONEY(3) 相关的行。我在用

```
grep -w "HELLO" file.txt 
```

但这让我回到了 HELLO，例如，还有与 HELLOMUM 和 HELLO-FATHER 相关的行。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:20:50.610

我想这应该对你有用。

```
grep '^HELLO[^a-zA-Z]' your_file 
```

测试如下：

```
> grep '^HELLO[^a-zA-Z\-]' temp
HELLO h e l lo
HELLO(2) h ee l lo
> grep '^HONEY[^a-zA-Z\-]' temp
HONEY h o ne y
HONEY(2) ho nei y
HONEY(3) h o ney
> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T10:44:12.523

将您粘贴的示例作为文件，以下 grep 行有效：

```
grep 'HELLO[( ]' file
grep 'HONEY[( ]' file 
```

# c# - ASP.NET 无法将会话变量转换为相同类型的变量

> ID：14212732
> 
> 赞同：4
> 
> 时间：2013-01-08T10:18:42.440
> 
> 标签：c#, asp.net, iis, casting

我在尝试将会话变量转换为它所属的变量类型时遇到了一些“几乎随机”的错误。只是为了说清楚：

我有一个类“Elemento”，我只是创建它的一个 istance 并将它放在我的会话变量中：

```
Elemento elem = new Elemento(id, quantity);
list.Add(elem);
context.Session["cart"] = list; 
```

现在我必须恢复我的列表，我尝试这样做：

```
list = (List<Elemento>)context.Session["cart"]; 
```

好吧..这个“有时”有效，有时不行！我第一次尝试它时完美无瑕，但现在我遇到了“内部服务器错误 500”并出现此错误：

> Impossibile eseguire il cast di [A]System.Collections.Generic.List `1[Elemento] a [B]System.Collections.Generic.List`1[Elemento]。Il Tipo A ha origine da 'mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' nel matcho 'LoadNeither' nella posizione 'C:\Windows\assembly\GAC_64\mscorlib\2.0.0.0__b77a5c561934e089\mscorlib.dll '。Il Tipo B ha origine da 'mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' nel matcho 'LoadNeither' nella posizione 'C:\Windows\assembly\GAC_64\mscorlib\2.0.0.0__b77a5c561934e089\mscorlib.dll '。

翻译一下。。

> 无法投射 [A]System.Collections.Generic.List `1[Elemento] to [B]System.Collections.Generic.List`1[Elemento]。类型 A 来自 'mscorlib，Version=2.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089'，上下文为 'LoadNeither'，位置为 'C:\Windows\assembly\GAC_64\mscorlib\2.0.0.0__b77a5c561934e089\mscorlib.dll' . 类型 B 来自 'mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' 上下文为 'LoadNeither' 和位置 'C:\Windows\assembly\GAC_64\mscorlib\2.0.0.0__b77a5c561934e089\mscorlib.dll' .

我可以解决这个“一段时间”清空 IIS 缓存的问题。但是当我从 Visual Studio 构建解决方案时，它会再次发生。

我在某个地方读到我可以使用接口解决这个问题.. 但由于我仍在学习如何使用它们，我现在不能直接尝试，有一些经过测试的解决方案吗？

编辑：与 krshekhar 解决方案一起使用：

```
list = context.Session["cart"] as List<Elemento>; 
```

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:31:50.367

我相信这可能是 IIS 内存的问题。您是否尝试重新启动 IIS？使用另一个 IIS 服务器？

我建议使用其他方式来存储对象 - 例如 Cookie。

如果您考虑可伸缩性 - Cookie 将为您提供比会话对象更好的解决方案，因为它们存储在客户端而不是服务器上。

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:50:54.027

由于您提到您在重建时遇到错误，因此这里的可能性似乎是`Elemento`类或它引用的另一个类中的字段发生了更改，这破坏了会话状态中对象的反序列化。

将“复杂”对象存储到 IIS 会话状态时，它们会使用`BinaryFormatter`（在`System.Runtime.Serialization.Formatters.Binary`命名空间中）进行序列化。此格式化程序对被序列化的类的变化很敏感，并且如果自数据最初序列化以来图中的任何类发生了变化，则可能无法成功反序列化对象图。这似乎是这里的问题，因为您说它在重建后中断。

我建议您仅将 BCL 中的类型保存到会话状态中（因为这些只会在 .NET 版本之间更改）。或者更好的是，通过在对象上实现`ISerializable`接口来实现您自己的自定义序列化`Elemento`，这将允许您保持项目构建之间的兼容性。

# c# - 使用变量格式化日期

> ID：14212736
> 
> 赞同：5
> 
> 时间：2013-01-08T10:18:47.697
> 
> 标签：c#, date-format

以下给出的输出为 20121212。

```
DateTime dd = new DateTime(2012, 12, 12);
string val = String.Format("{0:yyyyMMdd}", dd); 
```

当格式在变量中时。以下没有给出上述输出。

```
DateTime dd = new DateTime(2012, 12, 12);
string dateFormat = "yyyyMMdd";
string val = String.Format("{0}:{1}", dd, dateFormat); 
```

如何使用上述变量中​​的格式来实现它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T10:21:49.057

我相信您在字符串变量中具有格式，这可能是您正在寻找的内容：

```
DateTime dd = new DateTime(2012, 12, 12);
string strFormat = "yyyyMMdd";
string val = String.Format("{0:"+ strFormat + "}", dd); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T10:23:16.513

最简单的方法就是

```
DateTime dd = new DateTime(2012, 12, 12);
string strFormat = "yyyyMMdd";
string val = dd.ToString(strFormat); 
```

`String.Format`不直接支持可变格式字符串。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T10:24:33.457

只需使用`DateTime.ToString`：

```
string val = dd.ToString( dateFormat ); 
```

`String.Format`您对仅以这种方式起作用的格式字符串感到困惑`{0:yyyyMMdd}`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T10:23:31.143

您可以使用[DateTime.ToString(string)](http://msdn.microsoft.com/en-us/library/zdtaw1bw.aspx)方法：

```
DateTime dd = new DateTime(2012, 12, 12);
string dateFormat = "yyyyMMdd";
string val = dd.ToString(dateFormat); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T10:23:41.207

试试[`String.Format`](http://msdn.microsoft.com/en-us/library/system.string.format.aspx)这样；

```
DateTime dt = new DateTime(2012, 12, 12);
string Format = "yyyyMMdd";
string yourstring = String.Format("{0:" + Format + "}", dt);
Console.WriteLine(yourstring); 
```

[`Demo`](http://ideone.com/Q2zI7n)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-08T10:24:49.317

您也可以使用 .ToString(string format)

```
DateTime dd = new DateTime(2012, 12, 12);
string strFormat = "yyyyMMdd";
string val = dd.ToString(strFormat); 
```

# entity-framework - Entity Framework 5 Automatic Code Migrations

> ID：14212741
> 
> 赞同：4
> 
> 时间：2013-01-08T10:19:05.683
> 
> 标签：entity-framework, ef-code-first, entity-framework-5, entity-framework-migrations

In my current web project I'm trying to set up code migrations. I set up my db initialiser as follows in my MVC4 project

```
protected void Application_Start()
{
    Database.SetInitializer(new MigrateDatabaseToLatestVersion<MyContext, Configuration>());
} 
```

I can make changes to my code first models and this updates the database to the latest automatic migration as expected when I start up the website.

However I'm trying to add an explicit migration through the console `Add-Migration FirstMigration` so I can add some indexes. This adds the code file `201301071708126_FirstMigration` to my project and I can add in my index code here easily enough.

But this won't run automatically when I restart the website. I have to run `Update-Database` from the console to apply this migration.

[I followed this tutorial on msdn](http://msdn.microsoft.com/en-US/data/jj591621) but I can't see what I'm doing wrong as it suggests to me that the explicit migration should run automatically.

In my configuration file I have the following constructor

```
public Configuration()
{
    AutomaticMigrationsEnabled = true;
    AutomaticMigrationDataLossAllowed = true;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T15:59:49.337

不久前我找到了答案，但我错过了问题中的一些信息。

我有 2 个网站，一个 MVC 应用程序和一个 WEBAPI 应用程序。我需要在两者中都进行数据库初始化，否则它不能正常工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-05T15:22:38.333

在我的应用程序构造函数中，我有

`Database.SetInitializer(new DropCreateDatabaseIfModelChanges<MYContext>());`

它会更新模型。

# ios - uicollectionview select an item immediately after reloaddata?

> ID：14212744
> 
> 赞同：13
> 
> 时间：2013-01-08T10:19:12.383
> 
> 标签：ios, uicollectionview

After calling `-[UICollectionView reloadData]` it takes some time for cells to be displayed, so selecting an item immediately after calling `reloadData` does not work. Is there a way to select an item immediately after `reloadData`?

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2016-07-26T00:30:24.700

按照[这个答案](https://stackoverflow.com/a/18356138/2067021)，我发现在我对 collectionView 做其他事情之前调用`layoutIfNeeded`after`reloadData`似乎有效地“刷新”了重新加载：

```
[self.collectionView reloadData];
[self.collectionView layoutIfNeeded];
... 
```

在我找到这个解决方案的页面上，一些评论者表示它在 iOS 9 上不适用于他们，但对我来说没问题，所以你的里程可能会有所不同。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-14T19:02:12.663

不要使用 reloadData

改为使用`- (void)performBatchUpdates:(void (^)(void))updates completion:(void (^)(BOOL finished))completion`。完成块在单元格插入/删除等动画完成后执行。您可以在`(void (^)(void))updates`块中调用 reloadData

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-05-05T17:25:24.863

苹果 说：

> 您不应在插入或删除项目的动画块中间调用此方法。插入和删除会自动导致表的数据得到适当的更新。

事实上，你不应该在任何动画的中间调用这个方法（包括`UICollectionView`在滚动中）。

因此，您可以使用：

```
[self.collectionView setContentOffset:CGPointZero animated:NO];
[self.collectionView performSelectorOnMainThread:@selector(reloadData) withObject:nil waitUntilDone:NO]; 
```

或标记确定没有任何动画，然后调用`reloadData`；或者

```
[self.collectionView performBatchUpdates:^{
//insert, delete, reload, or move operations
} completion:nil]; 
```

希望这对你有帮助。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-14T16:00:44.767

我正在处理`collectionView: cellForItemAtIndexPath:`. 我发现的问题是，如果单元格不存在，简单地调用`selectItemAtIndexPath: animated: scrollPosition:`实际上不会选择该项目。

相反，您必须这样做：

`cell.selected = YES;
[m_collectionView selectItemAtIndexPath:indexPath animated:NO scrollPosition:UICollectionViewScrollPositionNone];`

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-03-01T16:29:38.080

迅速的方式：

```
let selected = collectionView.indexPathsForSelectedItems()
collectionView.performBatchUpdates({ [weak self] in
    self?.collectionView.reloadSections(NSIndexSet(index: 0))
    }) { completed -> Void in
        selected?.forEach { [weak self] indexPath in
            self?.collectionView.selectItemAtIndexPath(indexPath, animated: false, scrollPosition: [])
        }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-14T06:09:08.833

Make sure you're calling `reloadData` on the main thread. That could be the cause for the delay in your cell updates.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-01-13T13:32:53.390

我在 willDisplayCell colelctionView 委托上处理了它。这个想法：需要一个临时变量来指定初始滚动是否已经执行（scrollIsRequired）。当最后一个可见单元格将显示时，我们可以滚动到所需的单元格并设置此变量以避免再次滚动。

```
- (void)collectionView:(UICollectionView *)collectionView willDisplayCell:(UICollectionViewCell *)cell forItemAtIndexPath:(NSIndexPath *)indexPath{

    //Perform any configuration

    if (CGRectGetMaxX(collectionView.frame) <= CGRectGetMaxX(cell.frame)) {
        // Last visible cell
        if (self.scrollIsRequired) {
            [self.collectionView selectItemAtIndexPath:[NSIndexPath indexPathForItem:self.initiallySelectedRepresentativeVerse inSection:0] animated:YES scrollPosition:UICollectionViewScrollPositionLeft];
            self.scrollIsRequired = NO;
        }
    }
} 
```

它对我来说就像一种魅力。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-06-15T15:44:09.647

这对我有用：

我保留了所选索引路径的引用并覆盖了 reloadData 函数：

```
override func reloadData() {
    super.reloadData()
    self.selectItem(at: self.selectedIndexPath, animated: false, scrollPosition: UICollectionViewScrollPosition())
} 
```

我尝试使用 indexPathForSelectedItems 执行此操作，但它在集合视图加载时创建了一个无限循环。

* * *

## 回答 #9

> 赞同：-6
> 
> 时间：2013-01-08T10:30:53.853

创建一个进行选择的方法，并在调用 reload 后使用 performSelector 调用它，例如；

```
[self performSelector:@selector(selectIt) withObject:self afterDelay:0.1]; 
```

# android - how to read/write data dictionary in android programmatically

> ID：14212745
> 
> 赞同：0
> 
> 时间：2013-01-08T10:19:13.433
> 
> 标签：android, storage, read-write, data-dictionary

I want to read/write data dictionary in file which is in android internal/external memory. In WP7, they have used IsolatedStorage for storing the dictionary directly. In IOS, they can write NSDictionary directly to the file. Please anyone tell me the way to write DataDictionary into file.

> Note: I have the keys and values in the Map variable. how to store this Map directly to file

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T10:23:02.000

我建议将您的话放入数据库中，原因如下

> 即使是最不耐烦的用户，使用 SQLite 在 android 上进行数据库查找也“足够快”（~1ms）
> 
> 在 android 等内存有限的环境中，将大文件读入内存是一种危险的做法。
> 
> 尝试从“就地”而不是“在
> 内存中”的文件中读取条目实际上是在尝试解决 SQLite
> 已经为您解决的所有问题。

[在分布式应用程序的 .apk 中嵌入数据库 [Android]](https://stackoverflow.com/questions/3013021/embed-a-database-in-the-apk-of-a-distributed-application-android)

**您可以通过搜索对象序列化**找到更详细的示例

 **[编辑 1]

```
Map map = new HashMap();
map.put("1",new Integer(1));
map.put("2",new Integer(2));
map.put("3",new Integer(3));
FileOutputStream fos = new FileOutputStream("map.ser");
ObjectOutputStream oos = new ObjectOutputStream(fos);
oos.writeObject(map);
oos.close();

FileInputStream fis = new FileInputStream("map.ser");
ObjectInputStream ois = new ObjectInputStream(fis);
Map anotherMap = (Map) ois.readObject();
ois.close();

System.out.println(anotherMap); 
```

[编辑 2]

```
try {

        File file = new File(getFilesDir() + "/map.ser");

        Map map = new HashMap();
        map.put("1", new Integer(1));
        map.put("2", new Integer(2));
        map.put("3", new Integer(3));
        Map anotherMap = null;

        if (!file.exists()) {
            FileOutputStream fos = new FileOutputStream(file);
            ObjectOutputStream oos = new ObjectOutputStream(fos);
            oos.writeObject(map);
            oos.close();

            System.out.println("added");                
        } else {
            FileInputStream fis = new FileInputStream(file);
            ObjectInputStream ois = new ObjectInputStream(fis);
            anotherMap = (Map) ois.readObject();
            ois.close();

            System.out.println(anotherMap);
        }

    } catch (Exception e) {

    } 
```

[编辑 3]

```
Iterator myVeryOwnIterator = meMap.keySet().iterator();
while(myVeryOwnIterator.hasNext()) {
    String key=(String)myVeryOwnIterator.next();
    String value=(String)meMap.get(key);

     // check for value

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T10:20:36.627

I'm unsure if using `SharedPreferences` ([link](http://developer.android.com/reference/android/content/SharedPreferences.html)) is something that is suitable for your usecase.

You store via a key-value pair, and can have multiple `SharedPreferences` per application. While both are stored as `String` objects, the value can be automatically cast to other primitives using built in methods.

Mark Murphy has written a library, `cwac-loaderex` ([link](https://github.com/commonsguy/cwac-loaderex)), to facilitate access of `SharedPreferences` via the use of the `Loader` pattern ([link](http://developer.android.com/guide/components/loaders.html)), which offsets some of the work you need to do to keep IO off the main thread.**

# linux - Should restarting a Linux host from within a cfengine policy be avoided?

> ID：14212749
> 
> 赞同：0
> 
> 时间：2013-01-08T10:19:33.877
> 
> 标签：linux, automation, cfengine

Specifically, if cfengine is used to install the most recent version of an onboard device's firmware and do some tests to see if a reboot is required, and the results indicate that the machine needs a restart, is this something that can be done from within cfengine or should that practice be avoided? If so, why? My experience with Puppet tells me that stopping a run to reboot could be a Very Bad Thing in certain cases, so I'm wondering if the same limitations apply to cfengine as well.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:46:24.610

停止 CFEngine 运行并没有那么糟糕。它被设计成收敛的，修改总是原子的。如果它停止，下一次运行将正常运行。

但是，编写重启设备的 promise 可能会导致意外情况（例如，如果 promise 的逻辑存在缺陷，则会导致永无止境的重启），因此我建议尽可能避免这种情况，并且如果有必要（例如处理数千台设备），则应对其进行彻底测试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T16:15:59.267

正如 Nicolas 所说，停止 CFEngine 运行并没有什么坏处。CFEngine 策略将在下次运行时继续收敛。如果您想确保在重新启动之前一切都已正确完成，您可以设置一个指示需要重新启动的类，并在一个单独的捆绑包中实际重新启动，该捆绑包在您的捆绑序列末尾附近调用（我是假设CFEngine 3）。

确实，要非常注意并非常仔细地测试重启的条件！

# maven - Hide HTTP password when downloading maven artifacts

> ID：14212761
> 
> 赞同：5
> 
> 时间：2013-01-08T10:19:56.433
> 
> 标签：maven, buildr

We have a password protected Maven repository. When downloading the http password is shown on the console:

```
Downloading: https://arved:passw0rd@maven.arved.at/content/groups/arved/org/apache/xbean/xbean-naming/3.7/xbean-naming-3.7.jar

```

Is it possible to hide the password somehow?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T13:53:03.377

您的存储库配置（URL）可能是错误的，请查看此页面： [http](http://maven.apache.org/guides/mini/guide-encryption.html) ://maven.apache.org/guides/mini/guide-encryption.html （加密是可选的）

您只需将密码输入**$HOME/.m2/settings.xml**

```
<settings>
...
  <servers>
...
    <server>
      <id>arved-repository</id>
      <username>arved</username>
      <password>passw0rd</password>
    </server>
...
  </servers>
...
</settings> 
```

并使用之前定义的 server.id在**pom.xml**中配置存储库：

```
<project>
...
  <repositories>
    <repository>
      <id>arved-repository</id>
      <name>Arved Repository</name>
      <url>https://maven.arved.at/content/groups/arved</url>
    </repository>
...
</project> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T10:19:30.623

一种方法是猴子补丁 URI::HTTP。以下代码可以改进，但显示了总体思路。

```
# Patch HTTP.to_s so it does not reveal passwords
module URI
  class HTTP
    def to_s
      url = ''
      if @scheme
        url << @scheme
        url << ':'
      end
      if @host
        url << '//'
      end
      if self.userinfo
        url << @user
        if @password
          url << ':***'
        end
        url << '@'
      end
      if @host
        url << @host
      end
      if @port
        url << ':'
        url << @port.to_s
      end
      url << path_query
      if @fragment
        url << '#'
        url << @fragment
      end
      url
    end
  end
end 
```

# qt - QDateTimeEdit: rollback from 59 to 00 or vice-versa in hours/minute/second

> ID：14212762
> 
> 赞同：2
> 
> 时间：2013-01-08T10:19:57.243
> 
> 标签：qt, qdatetime

How can I rollback hour/min/sec from `59` to `00` or vice versa. Actually `QDateTimeEdit` doesn't allow it by default and it get stuck after reaching maximum value of `59` if tried pressing up arrow, and same for minimum value `00`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T11:46:39.497

你必须知道那`QDateTimeEdit`是继承`QAbstractSpinBox`，并且`QAbstractSpinBox`有包装机制，使用它你可以让你的旋转循环。所以，你必须做的就是

```
setWrapping(true) 
```

在您的情况下，它必须是这样的：`ui->dateTimeEdit->setWrapping(true);`

如果包装正在`true`从`maximum()`价值开始提升，那么您将获得`minimum()`价值，反之亦然。`minimum()`仅当您设置了和`maximum()`值时，包装才有意义。

[请参阅此处](http://doc.qt.digia.com/qt/qabstractspinbox.html#wrapping-prop)的官方文档。

祝你好运！

# php - Joomla writes timezone JOPTION_USE_DEFAULT to database

> ID：14212764
> 
> 赞同：0
> 
> 时间：2013-01-08T10:20:01.667
> 
> 标签：php, mysql, joomla2.5

I am now researing for a couple of hours and can not get any solution... on my local webserver everything works fine. But on the live server it does not work. The website is 1:1 the same.

**My Problem is:** if a user is logged in and wants to edit his profile, he will get a dropdownlist of all the timezones, so he can select his preferred timezone. The default select item should be blank but instead there is as follow:

`<option value="JOPTION_USE_DEFAULT">- Use Default -</option>`

on my local server is looks as follow:

`<option value=>- Use Default -</option>`

The problem with that is, that it will store `JOPTION_USE_DEFAULT` into my database on the live server (on my local server it works perfectly). When you will go back to yoour profile, Joomla wants to convert `JOPTION_USE_DEFAULT` back to a timezone, which of course does not exist... so I will get an error page.

I saw that there is no default timezone set on the live server in the php.ini, but I do not have access to the php.ini file, so I tried with a .htaccess solution, which di not make any difference: `php_value date.timezone "Europe/Zurich"`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T11:08:08.517

我认为您的 profile.xml / frontend.xml 文件有问题。（我不明白你在哪里编辑）。

选项值应该是 "" 而不是 JOPTION_USE_DEFAULT。

`<option value="">JOPTION_USE_DEFAULT</option>`

也在您的本地服务器上

`<option value=>- Use Default -</option>`

这不是 HTML 的有效语法。

# spring - Authentication Error when resolving dependencies from spring repo

> ID：14212765
> 
> 赞同：0
> 
> 时间：2013-01-08T10:20:03.063
> 
> 标签：spring, repository, gradle

Having trouble resolving gradle dependencies. This worked previously. Is there any reason why it would be Unauthorized other than a config problem on Spring's side?

```
Failed to get resource: HEAD. [HTTP HTTP/1.1 401 Unauthorized: http://repo.springsource.org/libs-snapshot/mysql/mysql-connector-java/5.1.20/mysql-connector-java-5.1.20.pom]
Failed to get resource: HEAD. [HTTP HTTP/1.1 401 Unauthorized: http://repo.springsource.org/libs-milestone/mysql/mysql-connector-java/5.1.20/mysql-connector-java-5.1.20.pom]
Failed to get resource: HEAD. [HTTP HTTP/1.1 401 Unauthorized: http://repo.springsource.org/libs-release/mysql/mysql-connector-java/5.1.20/mysql-connector-java-5.1.20.pom]
Failed to get resource: HEAD. [HTTP HTTP/1.1 401 Unauthorized: http://repo.springsource.org/libs-snapshot/org/apache/tiles/tiles-request-servlet-wildcard/1.0.2/tiles-request-servlet-wildcard-1.0.2.pom]
Failed to get resource: HEAD. [HTTP HTTP/1.1 401 Unauthorized: http://repo.springsource.org/libs-milestone/org/apache/tiles/tiles-request-servlet-wildcard/1.0.2/tiles-request-servlet-wildcard-1.0.2.pom]
Failed to get resource: HEAD. [HTTP HTTP/1.1 401 Unauthorized: http://repo.springsource.org/libs-release/org/apache/tiles/tiles-request-servlet-wildcard/1.0.2/tiles-request-servlet-wildcard-1.0.2.pom] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:46:47.653

看起来像是 Spring 方面的配置问题。如果您查看浏览器中出现的错误

> 此请求需要 HTTP 身份验证（不允许匿名用户将 'mysql/mysql-connector-java/5.1.20/COPYING' 部署到 'repo1-cache:mysql/mysql-connector-java/5.1.20/COPYING'。） .

有一些缓存（进入 repo1-cache）或失败的东西。

# javascript - jquery event no change

> ID：14212766
> 
> 赞同：0
> 
> 时间：2013-01-08T10:20:04.310
> 
> 标签：javascript, jquery, forms, validation, select

The is(:focus) was the aproach. The final code is listed below:

```
setInterval(function(){
    if($j("SELECT[name='cf20_field_7']").is(":focus")) return false; 
    var information = '';
    var i = 1;
    $j("#cf20_field_1").html();
    //add new information to hidden field
    $j("#cforms20form .info_for_email").each(function(){
        var name = $j(this).find("INPUT[name='cf20_field_5']").val();
        var inn = $j(this).find("INPUT[name='cf20_field_6']").val();
        var view = $j(this).find("SELECT[name='cf20_field_7']").val();
        //render
        information += i + ")";
        information += "Наименование организации: " + name + ".<br/>\n";
        information += "Реквизиты организации: " + inn + ".<br/>\n";
        information += "Стоимость заказа: выписка " + view + ".<br/>\n";
        i++;
    })
    $j("#cf20_field_1").html(information);

    hovered = true;
}
    ,100
); 
```

Is there some possibility to fire function when there is no hover in SELECT field.

**And also there may be aproach that to check is there is no hover on SELECT field.**

It cause problemms. When you are trying to select another option cursor is begging while setInterval is working.

The best approach that i find is listed below:

```
//every 100 mil secconds update info
setInterval(function(){

    $j("SELECT[name='cf20_field_7']").trigger('change');
    if ( $j("SELECT[name='cf20_field_7']").on("change")) return false;
    var information = '';
    var i = 1;
    $j("#cf20_field_1").html();
    //add new information to hidden field
    $j("#cforms20form .info_for_email").each(function(){
        var name = $j(this).find("INPUT[name='cf20_field_5']").val();
        var inn = $j(this).find("INPUT[name='cf20_field_6']").val();
        var view = $j(this).find("SELECT[name='cf20_field_7']").attr("value");
        //render
        information += i + ")";
        information += "Наименование организации: " + name + ".<br/>\n";
        information += "Реквизиты организации: " + inn + ".<br/>\n";
        information += "Стоимость заказа: выписка " + view + ".<br/>\n";
        i++;
    })
    $j("#cf20_field_1").html(information);
}
    ,100
); 
```

More information: I can discribe situation more. So i had a form. onsubmit event didn`t work because there is another event is attachet. So i deside to update value of first field of form every 100 milisecs. The value is containing all dynamictly created "selects and inputs". But when i try to change value of the select by mouse. The function is fired and function check value of select and cause mouse begging. So i need somehow to check if that select is hovered to prevent firing of the function.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T10:21:48.697

### 此处无效：

```
if ( SELECT[name='cf20_field_7'].on("change")) 
```

我猜你需要这个：

```
if ( $("SELECT[name='cf20_field_7']").on("change")) 
```

但是，以上内容仍然无效。您需要一些处理程序，例如：

```
$("SELECT[name='cf20_field_7']").on("change", function(){
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:07:57.233

```
if ($j("SELECT[name='cf20_field_7']").on("change")) return false 
```

不清楚这里应该检查什么。我假设你想运行一些附加到 onchange 的函数，即使是 select。在这种情况下，您应该使用`.trigger`而不是`.on`. 但是在这两种情况下，返回值都将是 jquery 对象（用于链接目的），所以基本上你的语句对于`trigger`and`on`如果你想测试 select 的某个值，你应该做类似下面的事情：

```
if(someTestFunct($j("SELECT[name='cf20_field_7']"))) return false;
function someTestFunct(jObj) {
    //some other code?
    return jObj.val() == "some value to test";
} 
```

可能会使用一些更好的方法，但如果没有更多细节，就很难提出建议。

# c# - 无法访问已实现的属性（从接口）

> ID：14212767
> 
> 赞同：9
> 
> 时间：2013-01-08T10:20:17.133
> 
> 标签：c#, .net, syntax

我有一个带有属性的接口：

```
public interface IEntityModifier
{

    ...
    bool AutoDetachOnFinished { get; set; }
    bool Finished { get; }
    ...

} 
```

然后我实现它：

```
 bool IEntityModifier.AutoDetachOnFinished { get; set; }
    bool IEntityModifier.Finished { get { return this.mFinished; } } 
```

但是当我需要`AutoDetachOnFinished`在同一个类中访问时，会弹出编译器错误：

```
 void IEntityModifier.Update(IEntity pEntity, Microsoft.Xna.Framework.GameTime pGameTime)
    {
        if (!this.mFinished)
        {
            this.Value += this.Delta * (float)pGameTime.ElapsedGameTime.TotalSeconds;

            if (this.Value >= this.Max)
            {
                this.Value = this.Max;
                this.mFinished = true;
                if (this.AutoDetachOnFinished) { /* Error Here */ }
            }
        }
    } 
```

错误信息：

> 14“MEngine.Entities.EntityModifier.SingleValueEntityModifier”不包含“AutoDetachOnFinished”的定义，并且没有扩展方法“AutoDetachOnFinished”接受“MEngine.Entities.EntityModifier.SingleValueEntityModifier”类型的第一个参数（您是否缺少使用指令还是程序集引用？）

我有两个问题：

1.  为什么如果我删除`IEntityModifier.`s 编译器会抱怨（所以`IEntityModifier.Update`会变成`Update`，适用于任何已实现的方法）？
2.  为什么我无法访问`AutoDetachOnFinished`？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-08T10:22:12.207

您已将这些实现为[显式接口实现](http://msdn.microsoft.com/en-us/library/vstudio/ms173157.aspx)，这意味着您只能通过接口类型的变量访问它们 - `IEntityModifier`.

要么这样做：

```
if (((IEntityModifier)this).AutoDetachOnFinished) 
```

或从实现中删除接口名称：

```
bool AutoDetachOnFinished { get; set; }
bool Finished { get { return this.mFinished; } } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T10:25:17.230

因为您正在显式实现接口。

```
bool IEntityModifier.AutoDetachOnFinished { get; set; } 
```

您必须强制转换为接口才能访问显式实现。也许不是你想要的。所以从实现中删除接口名称

```
bool AutoDetachOnFinished { get; set; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T10:59:23.727

在执行显式接口实现时，将 this.AutoDetachOnFinished 转换为 IEntityModifier 类型的对象。[这里有一些解释。](http://msdn.microsoft.com/en-us/library/aa288461%28v=vs.71%29.aspx)

```
 IEntityModifier entitymodifier=(IEntityModifier)objectInstanceOfimplementedClass;

     if( entitymodifier.AutoDetachOnFinished) 
```

# asp.net-mvc-4 - 如何在 MVC 4 中登录我的自定义用户表？

> ID：14212771
> 
> 赞同：1
> 
> 时间：2013-01-08T10:20:31.217
> 
> 标签：asp.net-mvc-4, asp.net-membership, security, user-profile

我想在 MVC 4 代码优先应用程序中使用我的自定义**用户表。**我在我的数据库上下文中定义了高级**用户表：**

```
public class MyDatabase : DbContext
    {
       public DbSet<User> UserSet { get; set; }
       public DbSet<News> NewsSet { get; set; }
       ...
    } 
```

模型如下：

```
 public class User 
    {
        [Key]
        public int Id{ get; set; }
        public string UserName { get; set; }
        public string Password { get; set; }
        public string Name { get; set; }
        public string SurName { get; set; }
        ...
    } 
```

当应用程序启动时，它会调用：

```
WebSecurity.InitializeDatabaseConnection("MyDatabase", "Users", "Id", "UserName", autoCreateTables: true); 
```

在控制器中，我使用**Add(entity)**来保存用户实体。保存后我想登录用户。但它不起作用：

```
 [HttpPost]
    public ActionResult Register(User user)
    {
     var result =  MyService.SaveUser(user);
     WebSecurity.Login(result.UserName, result.Password, true);
     return RedirectToAction("Index", "Profile", new { id = result.Id });
    } 
```

保存用户后，数据保存在我的数据库中，但无法登录，我该怎么办？

**编辑：**

用我的业务方法保存用户实体是否正确？或者我必须只用 WebSecurity.CreateUserAndAccount() 来做？

如果我可以使用自己的保存方法，如何将密码保存在数据库中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T14:42:31.227

您可以直接使用表单身份验证。

```
 [HttpPost]
    public ActionResult Register(User user)
    {
     var result =  MyService.SaveUser(user);
     SignIn(result.Id, "");
     return RedirectToAction("Index", "Profile", new { id = result.Id });
    }

public void SignIn(string accountId, string roles)
            {
                var authTicket = new FormsAuthenticationTicket(
                    1,
                    accountId,
                    DateTime.Now,
                    DateTime.Now.AddMinutes(20),
                    false,
                    roles
                    );

                string encryptedTicket = FormsAuthentication.Encrypt(authTicket);
                var authCookie = new HttpCookie(FormsAuthentication.FormsCookieName, encryptedTicket);

                HttpContext.Current.Response.Cookies.Add(authCookie);
            } 
```

这是一个可以帮助您解决密码问题的用户类。它依赖于 BCrypt

```
 public class UserAccount
    {
        public string Id { get; set; }
        public string Username { get; set; }
        public string Email { get; set; }

        public string Password
        {
            get { return PasswordHash; }
            set { PasswordHash = HashPassword(value); }
        }

        public string PasswordHash { get; private set; }

        public List<string> Roles { get; set; }

        public string AuthenticationRoles
        {
            get { return Roles == null ? "" : String.Join(",", Roles.Select(x => x.ToString())); }
        }

        public bool IsActive { get; set; }

        public string Name { get; set; }

        public bool PasswordIsValid(string password)
        {
            bool matches = BCrypt.Net.BCrypt.Verify(password, Password);
            return matches;
        }

        private string HashPassword(string value)
        {
            return BCrypt.Net.BCrypt.HashPassword(value);
        }
    } 
```

# ios - How to add renderable Texture in Unity 3D for iOS

> ID：14212773
> 
> 赞同：1
> 
> 时间：2013-01-08T10:20:35.853
> 
> 标签：ios, unity3d, textures

I am using Unity 3D and want to render an image on a texture, which should be stuck at one point, not stuck with the camera. How can I do that?

I am new to Unity.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T17:14:43.920

您可以做的是创建一个平面或某种图形来保存该纹理。然后，您将向该平面添加网格渲染器并将纹理分配给该平面的渲染器。这样，平面将“保持”纹理并将其保持在特定点。

例如：

```
Texture2d texture = new Texture2d();
texture.mainTexture = ...
GameObject.Find("THE PLAIN'S NAME").renderer.material.mainTexture = texture; 
```

编辑：对于网络摄像头纹理：

```
WebCamTexture texture = new WebcamTexture();
GameObject.Find("THE PLAIN'S NAME").renderer.material.mainTexture = texture;
texture.Play(); 
```

# python - Dial Meter using Tkinter

> ID：14212774
> 
> 赞同：-2
> 
> 时间：2013-01-08T10:20:40.560
> 
> 标签：python, tkinter

I am working on Data Logging Software using python. I can draw the graph based on the real time quantity but I want to create a Dial meter to show the real time values using Tkinter.Is it possible to create a dial meter and rotate the dial with respect to real time dynamic data ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:05:52.810

Tkinter 中没有内置拨号小部件。但是，您可以在画布上进行绘制。表盘只不过是一个带有指向特定方向的箭头的圆圈。你只需要一点数学就可以决定在哪里画表盘。

# java - 如何部署在 weblogic 中引用外部 JAR 文件的 Java EE 项目

> ID：14212781
> 
> 赞同：0
> 
> 时间：2013-01-08T10:21:10.800
> 
> 标签：java, weblogic, shared-libraries, war, jdeveloper

我有一个由 JSP 页面、Servlet 和使用 Web 服务组成的 Web 应用程序。它还引用了 apache 轴和 excel 库。现在我想直接在 Weblogic 服务器中部署我的应用程序我该怎么做。我制作 WAR 或 JAR 的存档文件是什么？以及如何确保它涵盖所有引用的库。我已经在 J​​developer 中制作了我的应用程序，但我不想使用 Jdevelper 部署它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:23:35.340

JAR 文件不能包含 JAR 文件，因此该选项不可用。由于您提到 JSP 和 servlet，WAR 似乎是合适的选择，尽管带有 WAR 和几个 JAR 的 EAR 也可能是一种前进的方式......

干杯，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T10:24:27.320

考虑使用 WEB-INF/lib 中的 JAR 文件的 WAR。或者，使用 APP-INF/lib 文件夹创建 EAR。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T10:25:26.900

我会将我的解决方案打包为 .war 文件，其中包含所有相关的 .jar 文件。

这样你的解决方案是独立的。您可以部署到包含其他应用程序的应用程序服务器，这些应用程序具有自己的库版本（依赖或开发）。如果您将依赖的 jars 直接放入应用程序服务器（您可以这样做），那么您将在所有部署的应用程序上强制使用这些版本，这很可能会让您感到悲伤。

缺点是您开发的 .war 文件可能会变得相当大。这通常不是主要问题，在确定为问题之前我不会担心。

# javascript - 如何在 JQuery Javascript 中将可点击标签更改为具有相同功能的图像

> ID：14212782
> 
> 赞同：0
> 
> 时间：2013-01-08T10:21:11.773
> 
> 标签：javascript, jquery, html, image

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:50:59.980

如果这就是你想要做的，我想说你只需要改变这一行：

```
obj.append('<a href="javascript:;" id="randomizer"><em>' + randomEle ); 
```

用这条线：

```
obj.append('<img src="/images/masterpage-template/click-to-view-the-next-client-feedback" id="randomizer" />'); 
```

该`.click()`功能将以相同的方式工作，因此您应该一切顺利。

# android - 在 Kindle Fire 上下载和保存图像

> ID：14212784
> 
> 赞同：0
> 
> 时间：2013-01-08T10:21:25.073
> 
> 标签：android

我的目标是创建一个应用程序，允许我从一组 url 下载多个图像并允许用户滑动它们。

我有点不确定如何做到这一点，因为我不确定如何将图像保存在 kindle 上（它没有 sd 卡）。

关于如何在本地保存网络图像（尽快访问）的任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:25:13.203

您可以在数组的循环中使用此方法。不要担心外部目录。没有 sd 卡插槽的设备，有一个与内部存储器分开的地方，就像一个“外部存储器”。

```
public Bitmap downloadImage(String url)
{
    final DefaultHttpClient client = new DefaultHttpClient();
    final HttpGet getRequest = new HttpGet(url);

    try
    {
        HttpResponse response = client.execute(getRequest);
        final int statusCode = response.getStatusLine().getStatusCode();
        if (statusCode != HttpStatus.SC_OK)
        {
            return null;
        }

        final HttpEntity entity = response.getEntity();
        if (entity != null)
        {
            InputStream inputStream = null;
            try
            {
                inputStream = entity.getContent();
                final Bitmap bitmap = BitmapFactory.decodeStream(inputStream);
                saveImageToExternalMemory(bitmap, url); //edit the name if need
                return bitmap;
            }
            finally
            {
                if (inputStream != null)
                {
                    inputStream.close();
                }
                entity.consumeContent();
            }
        }
    }
    catch(IOException e)
    {
        getRequest.abort();
    }
    catch (Exception e)
    {
        getRequest.abort();
    }
    finally
    {
        if (client != null)
        {
            client.getConnectionManager().shutdown();
        }
    }
    return null;
} 
```

这将使用 url 的名称保存图像，您可以根据需要进行编辑。并将图像保存到外部存储器（设备是否有 SD 卡都没有关系）。例如，我有一个 Nexus 7，它可以工作。

```
public void saveImageToExternalMemory(Bitmap bitmap, String name) throws IOException
{
    File dir = new File(Environment.getExternalStorageDirectory().toString()+"/yourdirectoryname");
    if (!dir.exists()) 
        dir.mkdirs();
    File file = new File(dir, name+ ".jpg"); //or the type you need
    file.createNewFile();
    OutputStream outStream = new FileOutputStream(file);
    bitmap.compress(Bitmap.CompressFormat.JPEG, 100, outStream);
    outStream.flush();
    outStream.close();
} 
```

这种方法需要

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE"/> 
```

在清单中，下载需要：

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

# c# - 具有透明背景的重叠 PicuresBox

> ID：14212788
> 
> 赞同：3
> 
> 时间：2013-01-08T10:21:37.260
> 
> 标签：c#, winforms, image, picturebox

我想让两个或更多`PictureBox`与透明背景重叠，但如果我这样做，我只会看到一个图像：

![在此处输入图像描述](../Images/bce5f08617b65eed944010e15c4b0554.png)

我这样创建我的`PictureBox`es：

```
PictureBox pb1 = new PictureBox();
pb1.Size = new Size(32, 32);
pb1.Location = new Point(0,0);
pb1.Image = Image.FromFile("../Graphics/Grounds/ground.png");
pb1.Visible = true;

PictureBox pb2 = new PictureBox();
pb2.Size = new Size(32, 32);
pb2.Location = new Point(0,0);
pb2.Image = Image.FromFile("../Graphics/Grounds/human.png");
pb2.Visible = true; 
```

后来我将这两个`PictureBox`es 添加到我的`Panel`：

```
panel1.Controls.Add(pb1);
panel1.Controls.Add(pb2); 
```

那么为什么它只显示一个`PictureBox`呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-30T18:31:01.567

尝试更改`panel1.Controls.Add(pb2);`以`pb1.Controls.Add(pb2);`
确保将正确的位置设置为`pb1`容器

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-08T14:50:07.760

如果您的 human.png 具有透明背景：

```
pb2.BackColor = Color.Transparent; 
```

# php - 如何用 PHP 运行 linux 二进制文件？

> ID：14212791
> 
> 赞同：-1
> 
> 时间：2013-01-08T10:21:44.237
> 
> 标签：php, unix, exec

我正在尝试从 Unix 服务器上的 PHP exec() 函数运行打包在 tar.gz 中的 linux 应用程序。为了这样做，我需要设置什么以及如何设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:27:14.703

首先，您需要将 tar.gz 解压缩到一个目录。您可以使用 exec(gunzip...) 和/或 exec(tar xvf ..) 来执行此操作。一旦你将包解压到一个目录中，你也可以使用 exec() 运行二进制文件。它实际上取决于二进制文件和您用于运行 php 的用户的权限。有关更多信息，请查看 php 手册：[http ://ch1.php.net/manual/de/function.exec.php](http://ch1.php.net/manual/de/function.exec.php)

# php - 在where子句codeigniter查询中自动添加未知列

> ID：14212792
> 
> 赞同：0
> 
> 时间：2013-01-08T10:21:46.507
> 
> 标签：php, sql, codeigniter

在 where 子句 codeigniter 查询中自动添加了未知列 session_id。

```
Error Number: 1054
Unknown column 'session_id' in 'where clause'
SELECT `column` FROM (`table_name`) WHERE `session_id` = '30d111cf75477d3f7a67a7d88469f3c4' AND `id` = 1 LIMIT 1
Filename: /var/www/site/www/libraries/acl.php
Line Number: 41, 
```

这是我的查询=>

```
$this->ci->db->select('column');
$this->ci->db->where('id',floatval($data));
$sql = $this->ci->db->get('table_name',1); 
```

但是当我使用直接查询时它工作正常.....

# c - 为什么 \b 不被 ex 识别。1-10 在 K&R？

> ID：14212796
> 
> 赞同：3
> 
> 时间：2013-01-08T10:21:53.463
> 
> 标签：c, kernighan-and-ritchie

```
#include <stdio.h>
/* replace tabs and backspaces with visible characters */

main()

{
    int c;

    while ((c = getchar()) != EOF) {
        if (c == '\t')
            printf("\\t");
        if (c == '\b')
            printf("\\b");
        if (c == '\\')
            printf("\\\\");
        if (c != '\b')
            if (c != '\t')
                if (c != '\\')
                    putchar(c);
    }
} 
```

为什么按退格键时看不到 \b 退格签名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:26:28.127

你需要了解一下`else`，那个 if-ladder 是相当可怕的。

而且您的终端可能不会发送单个退格字符，实际终端程序如何表示那种“特殊”键可能[有点复杂（删除是另一个最爱）。](http://en.wikipedia.org/wiki/Backspace#.5EH)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T10:27:33.257

如果您使用的是类 unix 系统，您可能想阅读以下内容：[http ://en.wikipedia.org/wiki/Cooked_mode](http://en.wikipedia.org/wiki/Cooked_mode)

在其他操作系统上，我不知道，但它们也可能对您的输入做一些事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T10:41:30.040

处理的一些字符`Terminal`。所以你无法控制它。检查这个[答案](https://stackoverflow.com/questions/4363309/how-to-check-for-the-backspace-character-in-c#answer-4363345)。

我在我的`MAC`终端上试过。[但在这个答案](https://stackoverflow.com/questions/4363309/how-to-check-for-the-backspace-character-in-c#answer-4363345)中，我没有得到价值`127`或`8`喜欢。我是为了性格。因此，当我尝试使用条件时，它会打印出值。`32``backspace``if``32``\b`

```
if (c == 32 || c == 8)
    printf("\\b"); 
```

# php - 如何使用 php simplexml 解析 Project Gutenberg rdf？

> ID：14212798
> 
> 赞同：1
> 
> 时间：2013-01-08T10:22:00.930
> 
> 标签：php, xml, dom, simplexml

我正在尝试使用 simplexml 解析 Project Gutenberg catalog.rdf，如下所示[Basic SimpleXML 用法](http://php.net/manual/en/simplexml.examples-basic.php)：

```
$dom = new DOMDocument;
$dom->loadXML($etext_rdf);
if (!$dom) {
    echo 'Error while parsing the document';
    exit;
}

$etext= simplexml_import_dom($dom);
print_r($etext); 
```

但 $etext 总是空的。任何提示为什么？这是我正在测试的 loadXML $etext_rdf（[这里是 rdf 的来源](http://www.gutenberg.org/ebooks/26783.rdf)）：

```
<pgterms:etext rdf:ID="etext26783">
  <dc:publisher>&pg;</dc:publisher>
  <dc:title rdf:parseType="Literal">The Story of the Kearsarge and Alabama</dc:title>
  <dc:creator rdf:parseType="Literal">Browne, A. K.</dc:creator>
  <pgterms:friendlytitle rdf:parseType="Literal">The Story of the Kearsarge and Alabama by Browne</pgterms:friendlytitle>
  <dc:language><dcterms:ISO639-2><rdf:value>en</rdf:value></dcterms:ISO639-2></dc:language>
  <dc:subject>
    <rdf:Bag>
      <rdf:li><dcterms:LCSH><rdf:value>Kearsarge (Sloop)</rdf:value></dcterms:LCSH></rdf:li>
      <rdf:li><dcterms:LCSH><rdf:value>Alabama (Screw sloop)</rdf:value></dcterms:LCSH></rdf:li>
      <rdf:li><dcterms:LCSH><rdf:value>United States -- History -- Civil War, 1861-1865 -- Naval operations</rdf:value></dcterms:LCSH></rdf:li>
    </rdf:Bag>
  </dc:subject>
  <dc:subject><dcterms:LCC><rdf:value>E456</rdf:value></dcterms:LCC></dc:subject>
  <dc:created><dcterms:W3CDTF><rdf:value>2008-10-06</rdf:value></dcterms:W3CDTF></dc:created>
  <pgterms:downloads><xsd:nonNegativeInteger><rdf:value>20</rdf:value></xsd:nonNegativeInteger></pgterms:downloads>
  <dc:rights rdf:resource="&lic;" />
</pgterms:etext> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T22:35:36.983

你的问题有进展吗，@giorgio79？您的数据一直都在那里，但 print_r 用于查看变量，而不是对象。这个版本的代码展示了如何将最终 print_r 中的对象转换为字符串，然后使用 htmlentities 使标记可读。输出与输入相同，因为到目前为止唯一的操作是简单的复制。祝你好运！

```
<?php
$etext_rdf = file_get_contents('http://www.gutenberg.org/ebooks/26783.rdf');
$dom = new DOMDocument;
$dom->loadXML($etext_rdf);
if (!$dom) {
    echo 'Error while parsing the document';
    exit;
}

$etext= simplexml_import_dom($dom);
// do your manipulations on the simpleXML object here..
echo '<pre>';
    print_r( htmlentities($etext->saveXML()));
echo '</pre>'; 
```

# iptables - iptables：在不同的接口和端口上转发请求

> ID：14212807
> 
> 赞同：7
> 
> 时间：2013-01-08T10:22:31.583
> 
> 标签：iptables, portforwarding

我有一台有 2 个接口的机器：

```
eth0      inet addr:1.1.1.1
eth1      inet addr:2.2.2.2 
```

eth0 是服务器，eth1 是虚拟机上的网络。

我在服务器上有 ssh，所以 1.1.1.1:22 很忙。

我需要一个规则，用于将 eth0 端口 6000 上的传入连接重定向到 eth1，端口 22（虚拟机 ip）上的 ip 2.2.2.100。

在这种模式下，如果我这样做了，在外部机器上，

```
ssh -p 6000 root@1.1.1.1 
```

我会在虚拟机上登录。

我尝试了这个规则，但没有奏效：

```
sudo iptables -P FORWARD ACCEPT
sudo iptables -t nat -A PREROUTING -p tcp -i eth0 --dport 6000 -j DNAT --to 2.2.2.100:22 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-01T00:04:40.173

好吧，这种情况下大约有 100 万个脚本/教程/东西，但是如果有人从谷歌登陆到这里是这样的：

```
iptables -I FORWARD -d 2.2.2.2 -m comment --comment "Accept to forward ssh traffic" -m tcp -p tcp --dport 22 -j ACCEPT    
iptables -I FORWARD -m comment --comment "Accept to forward ssh return traffic" -s 2.2.2.2 -m tcp -p tcp --sport 22 -j ACCEPT    
iptables -t nat -I PREROUTING -m tcp -p tcp --dport 60000 -m comment --comment "redirect pkts to virtual machine" -j DNAT --to-destination 2.2.2.2:22   
iptables -t nat -I POSTROUTING -m comment --comment "NAT the src ip" -d 2.2.2.2 -o eth1 -j MASQUERADE 
```

# python - 在python中将字符串覆盖到数组

> ID：14212808
> 
> 赞同：0
> 
> 时间：2013-01-08T10:22:30.680
> 
> 标签：python, list

如果您将字符串`"'a','b'"`-> 作为 a`list("'a','b'")`它转换为`["'", 'a', "'", ',', "'", 'b', "'"]`但是我希望它是这样的：`['a', 'b']`

例如：

```
a = 'a','b' -> list(a) -> ['a', 'b'] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T10:24:42.570

您可以替换然后拆分`,`：

```
>>> "'a','b'".replace("'", "").split(",")
['a', 'b'] 
```

或者使用正则表达式：

```
>>> import re
>>> re.findall(r"\w", "'a','b'")
['a', 'b'] 
```

或使用[评估](http://docs.python.org/2/library/ast.html#ast.literal_eval)：

```
>>> import ast
>>> list(ast.literal_eval("'a','b'"))
['a', 'b'] 
```

这实际上取决于您的用例。正如@abarnert 建议的那样，您还可以使用 CSV 模块：

```
>>> import csv
>>> import io
>>> next(csv.reader(io.StringIO(u"'a','b'"), quotechar="'"))
['a', 'b'] 
```

（请注意，最佳效果还取决于您的字符串和列表的大小 - 我无法链接到评论，但请阅读下面@abarnert 的评论以获得印象。）

* * *

一些基准：

```
>>> from timeit import timeit

>>> def crude(): "'a','b'".replace("'", "").split(",")
>>> def regex(): re.findall(r"\w", "'a','b'")
>>> def _eval(): list(ast.literal_eval("'a','b'")) 
>>> def csvio(): next(csv.reader(io.StringIO(u"'a','b'"), quotechar="'"))

>>> timeit(crude)
1.2010400295257568

>>> timeit(regex)
2.745753049850464

>>> timeit(_eval)
17.016868114471436

>>> timeit(csvio)
3.7680318355560303 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-01-08T10:27:53.400

或者也许只是这个:-

```
print eval("'a', 'b'") 
```

这打印： -

```
('a', 'b') 
```

# sql - SQL 用另一个值替换一个值

> ID：14212814
> 
> 赞同：7
> 
> 时间：2013-01-08T10:23:01.623
> 
> 标签：sql

我有一个名为 address_book 的表，我希望将“entry_country_id”列的值从 257 更改为 222。请记住，我在这一行中有其他值，但我只想将 257（entry_country_id 列中的值）更改为 222 .

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-08T10:24:52.013

```
UPDATE address_book
SET entry_country_id = 222
WHERE entry_country_id = 257 
```

或者

```
UPDATE address_book
SET entry_country_id = '222'
WHERE entry_country_id = '257' 
```

如果列包含字符串

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-08T10:25:35.673

```
Update address_book
set entry_country_id=222
where entry_country_id=257 
```

# javascript - 隐藏从外部 url 加载的元素

> ID：14212816
> 
> 赞同：0
> 
> 时间：2013-01-08T10:23:06.833
> 
> 标签：javascript, html, css

我正在尝试从从外部 url 加载的 js 小部件中隐藏所有不包含字符串“Marc”的表行。

```
<script type="text/javascript">
  id = "ki1120mmvd";
  name = "schedules";
  document.write(unescape("%3Cscript src='http://healcode.com/javascripts/hc_widget.js' type='text/javascript'%3E%3C/script%3E"));
</script> 
```

我已经能够使用类 id 或属性使用 css 隐藏表行中的一些元素，但看起来我需要 js/jquery/php 来完全消除行，而我发现的所有内容都不起作用。

这是我获取代码的链接： [http ://www.funkydoor.com/studio_polk_street.html](http://www.funkydoor.com/studio_polk_street.html)

这是我使用它的方式：http: [//www.marcmatisyoga.com/schedule.html](http://www.marcmatisyoga.com/schedule.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:34:40.783

您可以使用[`:contains()`](http://api.jquery.com/contains-selector/)jQuery 选择器，然后基于此隐藏信息。

```
 $("div").not(":contains('marc')").hide(); 
```

[快速演示](http://jsfiddle.net/NxVmh/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T10:37:19.627

如果你想做这个客户端，那么试试 JQuery。您可以使用该`$.each`方法迭代每个元素并删除那些不包含“Marc”的元素

```
$(document).ready(function() {
    $('.schedule tr').each(function(index){
         if ($(this).html().indexOf('Marc') === -1)
             $(this).hide();
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T12:41:14.187

选择`:contains`器是完美的选择。但是，在您的具体情况下，要使其发挥作用，还需要付出更多努力。在我的测试中，似乎是由于动态加载的外部脚本中的一些损坏的 URL，`jQuery`或者`$`是`undefined`. `jQuery`解决方法是在表（和其他外部脚本）加载后重新加载API。

**[更新]**

我正在重新发布`.html`我认为它呈现正确结构的文件的全部内容（对我来说，它适用于 Chrome）。为了实现所需的字体颜色和 URL 格式，您仍然需要进行一些必要的修改，您可以通过`jQuery`'s`.css()`函数来实现，如下所示。请注意：

1.  我完全删除了`<style>...</style>`标签和
2.  我在动态加载外部脚本之后调用's标记`waitForFnc`中的函数。`<body>``<script>`

对于需要水平滚动以查看完整`jQuery`样式格式，我深表歉意，但它与解决方案并不真正相关，直到您想修改它时应用您自己的格式。

```
<html>
    <head>

        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script> 
        <script>
            var count=0;

            function waitForFnc(){
                if(typeof $ != "undefined")
                {
                    if($("tr.bikram_yoga").length==0){
                       window.setTimeout(waitForFnc,50);
                    }
                    else
                    {
                            $(" div.healcode .header, div.healcode table.schedule tr th, div.healcode table.schedule tr.odd td, div.healcode table.schedule tr.even td").css("background-color","#f4f4f4");
                            $(".location, span.print_text, a.print_version, .mbo_class, span.day_links, .header, span.hc_date_year, div:nth-of-type(10), a[href*='100000210'], a[href*='/13/'], a[href*='100000242'], a[href*='100000201'], a[href*='/142/'], a[href*='100000174'], a[href*='100000229'], a[href*='100000053'],th.trainer").hide();
                            $("div.healcode").css("padding","20px 0 0 20px !important");
                            $("div.healcode span.hc_day").css({"margin-left": "0 !important",
            "text-align": "left !important"});
                            $("div.healcode table.schedule").css("border","none !important");
                            $("table .schedule, tr schedule_header th").css("background-color","#f4f4f4");
                            $("tr.bikram_yoga").not(":contains('Marc')").hide();
                    }
                }
                else{
                    if(count==0){
                        var oHead = document.getElementsByTagName('HEAD').item(0);
                        var oScript= document.createElement("script");
                        oScript.type = "text/javascript";
                        oScript.src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js";
                        oHead.appendChild( oScript);
                        count=count+1;
                    }
                    window.setTimeout(waitForFnc,50);
                }
            }
        </script>
    </head>
    <body>
        <table>
            <tr>
                <td align="left" valign="top">
                <div style="background-color: white;">
                <script type="text/javascript">
                    id = "ki1120mmvd";
                    name = "schedules";
                    document.write(unescape("%3Cscript src='http://healcode.com/javascripts/hc_widget.js' type='text/javascript'%3E%3C/script%3E"));
                    waitForFnc();
                </script>
                <noscript class="normal_left_yellow">
                    Please enable Javascript in order to view the class schedule: <a href="http://healcode.com" target="_blank">HealCode</a>
                </noscript>
                </div>
                </td>
            </tr>
        </table>
    </body>
</html> 
```

# c++ - 为什么我会得到“递归类型或函数依赖上下文太复杂”？

> ID：14212818
> 
> 赞同：4
> 
> 时间：2013-01-08T10:23:12.810
> 
> 标签：c++, templates, visual-c++

为什么此代码在 Visual C++ 中会生成以下错误？
它是编译器中的错误还是代码无效？

```
template<int N> int test(int = sizeof(test<N - 1>()));
template<> int test<0>(int);
int main() { return sizeof(test<1>()); } 
```

> 递归类型或函数依赖上下文太复杂

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T10:32:23.500

test 在您使用它时尚未声明。在 C++11 中经常会出现类似的问题：

```
template<int N> auto test() -> decltype(test<N - 1>());
template<> auto test<0>() -> int;
int main() { return sizeof(test<1>()); } 
```

有讨论在未来改变这一点。编译的代码版本：

```
template<int N> int test(int);
template<> int test<0>(int);
template<int N> int test() { return test<N>(sizeof(test<N - 1>())); }
int main() { return sizeof(test<1>()); } 
```

# mdx - 在特定分组级别 MDX 计算非附加度量

> ID：14212820
> 
> 赞同：1
> 
> 时间：2013-01-08T10:23:16.337
> 
> 标签：mdx

我遇到了 MDX 查询的问题，我不知道如何解决。我有以下查询：

```
SELECT
 {
     [Measures].[Cost],
     [Measures].[Non additive]
 } ON COLUMNS,

 NON EMPTY 
 {
     [Organization].[Organization Name].[Organization Name].MEMBERS
     *[Time].[Month].[Month].MEMBERS
     *[Region].[City].[City].MEMBERS
 } ON ROWS
FROM [Cube] 
```

而且我想显示“[措施]。[非添加剂]”不是在最低分组级别，而是在组织级别。可能吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T09:15:59.900

当我有一个我不想显示的度量时，我会复制它并包含对当前单元格级别的测试。

```
WITH MEMBER [Measures].[My New Measure Name] 
AS 'IIF(IsLeaf([Organization].currentMember), NULL, [Measures].[Non additive])'
SELECT
 {
     [Measures].[Cost],
     [Measures].[My New Measure Name]
 } ON COLUMNS,
 NON EMPTY 
 {
     [Organization].[Organization Name].[Organization Name].MEMBERS
     *[Time].[Month].[Month].MEMBERS
     *[Region].[City].[City].MEMBERS
 } ON ROWS
FROM [Cube] 
```

新度量测试组织成员是否处于叶级（层次结构的底部）。如果是这样，它返回空白。如果不是，则返回旧度量的值。

如果您想要更多控制，请测试是否`[Organisation].level = [Organisation].levels(1)`并改变数字以检测您想要的级别（较低的级别是较高的数字）。

# php - 移动重定向 - 返回桌面

> ID：14212828
> 
> 赞同：2
> 
> 时间：2013-01-08T10:23:41.223
> 
> 标签：php, redirect, mobile

我正在使用[Detect Mobile Browsers](http://detectmobilebrowsers.com/)提供的 PHP 代码进行服务器端重定向，效果很好，但我希望有一个“返回桌面”链接。当然，这将导致无限循环，用户将永远无法访问桌面站点。

那么，这里有解决方案吗？我知道您必须使用 cookie，这很好，但我们将不胜感激。

这是我到目前为止所拥有的：

```
$useragent=$_SERVER['HTTP_USER_AGENT'];
if(preg_match('/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i',$useragent)||preg_match('/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i',substr($useragent,0,4)))
header('Location: http://m.MAIN_DESKTOP_SITE.com'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T10:26:16.927

添加另一个检查。假设有一个名为**n**的 $_GET 变量，那么您可以告诉重定向脚本仅在 preg_match 为真且 n 不等于 1 时才重定向。当您将它们链接到“返回桌面”时，然后添加“?n=1 “到你的链接

```
$n=intval($_GET["n"]);
$useragent=$_SERVER['HTTP_USER_AGENT'];
if($n!=1 && preg_match('/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i',$useragent)||preg_match('/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i',substr($useragent,0,4)))
header('Location: http://m.MAIN_DESKTOP_SITE.com/'); 
```

然后在您的手机版本中，您可以拥有

```
a href="http://www.yourdesktopsite.com/?n=1" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T10:39:10.363

是的，你应该使用cookies。所以“桌面模式”链接所在的文件应该添加一些代码来创建一个cookie

`setcookie('name', 'value', expiration time);`

接下来，您需要编辑代码，使其如下所示：

```
if(!isset($_COOKIE['cookie name'])) {
    $useragent=$_SERVER['HTTP_USER_AGENT'];
    if(preg_match('/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i',$useragent)||preg_match('/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i',substr($useragent,0,4)))
    header('Location: http://m.MAIN_DESKTOP_SITE.com');
} 
```

该代码将检查 cookie 是否可用，如果 cookie 可用，则不会执行移动检测。但如果没有 cookie，则执行移动检测

# javascript - 在 Opera/Firefox 中使用 JPlayer 打开 mp4 视频

> ID：14212830
> 
> 赞同：1
> 
> 时间：2013-01-08T10:23:53.827
> 
> 标签：javascript, jquery, video, mp4, jplayer

要播放 MP4 视频，我使用以下脚本：

```
 $("#jplayer").jPlayer("setMedia", {
        m4v: "./videos/test.mp4"
    }).jPlayer("play", 0); 
```

播放器使用以下代码初始化：

```
$("#jplayer").jPlayer({
        swfPath: "./jplayer/",
        supplied: "m4v",
        solutions: "flash, html",
        size: {
            width: "640px",
            height: "460px"
        },
        nativeVideoControls: {
            all: /./
        },
    }); 
```

如果我在 Chrome/IE 中打开视频-一切正常。但是在 Opera/Firefox 中 flash 正在加载（flash 嵌入代码出现在页面上），但视频没有并且没有播放。这是在 Opera/Firefox 的 jplayer div 中加载的代码

```
<div id="jplayer" class="jp-jplayer" style="width: 640px; height: 460px; display: block;">
<img id="jp_poster_1" style="width: 640px; height: 460px; display: none;">
<object id="jp_flash_1" width="1" height="1" data="./jplayer/Jplayer.swf" type="application/x-shockwave-flash" style="width: 0px; height: 0px;">
<param name="flashvars" value="jQuery=jQuery&id=jplayer&vol=0.8&muted=false">
<param name="allowscriptaccess" value="always">
<param name="bgcolor" value="#000000">
<param name="wmode" value="opaque">
</object>
</div> 
```

你能建议尝试什么吗？如果 Flash 播放器的路径正确，则无法弄清楚是什么导致了此类问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:58:16.910

我的问题是闪存没有时间初始化和设置媒体。将`setMedia`玩家初始化添加到`ready`事件中有所帮助。

# mysql - 在图表中添加零值

> ID：14212835
> 
> 赞同：-2
> 
> 时间：2013-01-08T10:24:14.123
> 
> 标签：mysql

我构建了以下查询：

```
SELECT GVA14.COD_ZONA, Sum(GVA12.IMPORTE) AS SumOfIMPORTE
FROM GVA14 LEFT JOIN GVA12 
  ON GVA14.COD_CLIENT = GVA12.COD_CLIENT
WHERE Month(GVA12.FECHA_EMIS)=Month(curdate())
AND Year(GVA12.FECHA_EMIS)=Year(curdate())
GROUP BY GVA14.COD_ZONA; 
```

`COD_ZONA`但是我想显示的还有其他值。如果我去掉月份和年份过滤器，这些就在那里。这是任何有兴趣的人的SQL Fiddle。[http://sqlfiddle.com/#!2/3aae1/3](http://sqlfiddle.com/#!2/3aae1/3)

* * *

编辑1#

我现在有以下查询：

```
SELECT GVA14.COD_ZONA, Coalesce(Sum(GVA12.IMPORTE), 0) AS SumOfIMPORTE
FROM GVA14 
LEFT JOIN GVA12 
  ON GVA14.COD_CLIENT = GVA12.COD_CLIENT
  AND Month(GVA12.FECHA_EMIS)=Month(curdate())
  AND Year(GVA12.FECHA_EMIS)=Year(curdate())
GROUP BY GVA14.COD_ZONA; 
```

但是当我尝试执行它时，大约需要 110 秒，并且在此之前我需要它的程序超时。我根据@Bluefeet 的建议创建了一个索引，并将其命名为 Zones，并将 GVA14.COD_ZONA 包含在其中。

接下来我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T10:28:24.997

将`WHERE`子句上的过滤器移至`JOIN`条件。如果您将过滤器留在`WHERE`子句中，则查询的作用类似于 an`INNER JOIN`而不是 a `LEFT JOIN`：

```
SELECT GVA14.COD_ZONA, Coalesce(Sum(GVA12.IMPORTE), 0) AS SumOfIMPORTE
FROM GVA14 
LEFT JOIN GVA12 
  ON GVA14.COD_CLIENT = GVA12.COD_CLIENT
  AND Month(GVA12.FECHA_EMIS)=Month(curdate())
  AND Year(GVA12.FECHA_EMIS)=Year(curdate())
GROUP BY GVA14.COD_ZONA; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/3aae1/5)

结果：

```
| COD_ZONA | SUMOFIMPORTE |
---------------------------
|       01 |         3000 |
|       02 |         1000 |
|       03 |            0 | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T14:07:00.207

我已经通过在表上添加 4 个索引（不知道这是否太多！）来解决这个问题。有效...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T10:26:18.267

```
 SELECT GVA14.COD_ZONA
         , COALESCE(Sum(GVA12.IMPORTE),0) AS SumOfIMPORTE
      FROM GVA14 
      LEFT 
      JOIN GVA12 
        ON GVA14.COD_CLIENT = GVA12.COD_CLIENT
       AND Month(GVA12.FECHA_EMIS)=Month(curdate())
       AND Year(GVA12.FECHA_EMIS)=Year(curdate())
     GROUP 
        BY GVA14.COD_ZONA; 
```

# javascript - 使元素中的内容处于静态位置

> ID：14212836
> 
> 赞同：2
> 
> 时间：2013-01-08T10:24:14.980
> 
> 标签：javascript, html, css

我有一张桌子和我的网页

```
 <table>
   <tr>
      <td>
         .....  
         .....
      </td>
      <td>
          <img src="mylogo.jpg"/>
      </td>
    </tr>
 </table> 
```

第一个的内容`<td>`是动态变化的。所以这个高度`<td>`也在变化。这种动态变化正在影响第二个`<td>`，因为图像的位置也在变化。
我怎样才能在该`<td>`元素的静态位置制作图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T10:47:29.127

你的意思是图片的位置总是改变到中心`<td>`？

然后您可以将`valign="top"`属性添加到包含您的图像的 td

所以，不管你的第一个是多久`<td>`，图像将保持在顶部`<td>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T10:32:02.310

你可以使用 CSS：

```
#mytable{
  position:relative;
}
#myimage{
    position:absolute;
    top: ___;
    left: ___;
} 
```

替换`___`为所需的距离。

**编辑：**

但如果你想要的是背景，那么你可以更好地使用：

HTML：

```
<table id="mytable">
   <tr>
      <td>
         .....  
         .....
      </td>
    </tr>
</table> 
```

CSS：

```
#mytable{ 
    background: url('mylogo.jpg');
} 
```

如果要调整位置，请参阅[http://www.w3schools.com/cssref/pr_background-position.asp](http://www.w3schools.com/cssref/pr_background-position.asp)

# jquery - 在 fancybox 中加载 150% 大小的图像

> ID：14212840
> 
> 赞同：2
> 
> 时间：2013-01-08T10:24:31.813
> 
> 标签：jquery, css, fancybox

我只是在创建一个愚蠢的 GIF 画廊，其中显示了一个缩略图，当点击相关的 GIF 时，它会被加载并显示在一个精美的框中。

我拥有的fancybox的代码是这样的：

```
$(".fancyGIF").fancybox({
        arrows: false,
        openEffect: 'elastic',
        openSpeed: 150,
        closeEffect: 'elastic',
        closeSpeed: 150,
        closeClick: true,
        onStart: function(){
            $("img").width("400");
        },
        helpers: {overlay : null}
    }); 
```

这`onStart:`是使图像加载大于其原始大小的尝试，因为很多 GIF 非常小，我想将它们加载到原始大小的 150% 或 200%。我怎样才能做到这一点？我尝试了很多东西:(

编辑：经过进一步调查，似乎 onStart 函数不起作用，这可以解释为什么我没有得到任何结果。我已经`console.log('foobar');`在那里和那里投入了，`alert('whipcrackaway');`但没有任何结果。我不知道为什么。也没有任何错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T17:47:43.570

**首先**，您在代码中使用了 fancybox v2.x API 选项，所以我假设您正在使用该版本，不是吗？

**其次**，如果第一个假设是正确的，则`onStart`不是一个有效的 fancybox v2.x 选项，而是 v1.3.x（fancybox v2.x 选项是新的并且与以前的版本不兼容）。

**第三**，您需要进行一些计算并修改两个元素的大小：fancybox 容器和fancybox 容器内的图像。

因此，我们通过此链接链接到 150x150 像素的图像的成像

```
<a class="fancyGIF" href="myGIFimage150x150.gif">open bigger size at 200% (300x300px)</a> 
```

...例如，我们希望以原始大小的 200% 在 fancybox 中显示它，然后我们将使用`beforeShow`回调设置此自定义脚本，例如：

```
$(".fancyGIF").fancybox({
  beforeShow: function () {
    // set new fancybox width
    var newWidth = this.width * 2;
    // apply new size to img
    $(".fancybox-image").css({
      "width": newWidth,
      "height": "auto"
    });
    // set new values for parent container
    this.width = newWidth;
    this.height = $(".fancybox-image").innerHeight();
  }
}); 
```

更改值`var newWidth = this.width * 2;`以设置您想要的大小。

见**[JSFIDDLE](http://jsfiddle.net/EQmSN/)**

**注意**：这是针对 fancybox v2.1.3+（使用风险自负；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:31:21.397

onStart 将在加载内容之前运行，因此图像还没有“存在”。

首先，我建议你获取最新版本的 Fancybox 2（我看到 onStart 是 fancybox 1.3 的功能）： http: [//fancyapps.com/fancybox/](http://fancyapps.com/fancybox/)

然后使用 afterLoad 回调函数：

```
$(".fancyGIF").fancybox({
    afterLoad: function(current, previous) {
        current.inner // points to the new content
            .find('img').css({width: '200%'});
    }
}); 
```

这应该将所有图像放大到两倍大小。您还可以设置像素值，使所有图像大小相同。或指向另一个函数以使其有条件：

```
$(".fancyGIF").fancybox({
    afterLoad: function(current, previous) {
        var $img = current.inner.find('img');
        $img.css({width: normaliseWidth($img)});
    }
});

function normaliseWidth($img) {
    var width = $img.width();
    if (width < 100) { // if smaller then 100px
        return (width * 2) +'px'; // blow up to twice the size
    } else {
        return width +'px';
    }
} 
```

- 编辑 -

使用这个 html

```
<a href="http://upload.wikimedia.org/wikipedia/commons/9/9d/Animalien-smiley.gif" class="fancyGIF">
    <img src="http://upload.wikimedia.org/wikipedia/commons/9/9d/Animalien-smiley.gif" alt="alien" />
</a> 
```

您可以在此处看到它的工作原理：http: [//jsfiddle.net/pT7jC/1/](http://jsfiddle.net/pT7jC/1/) 请注意，我添加了一个 console.log。如果你打开开发者控制台，你会看到记录了“current”的内容。这是一个包含各种有用信息的对象

# objective-c - UIViewAutoresizingMask 用于将按钮固定到右下角

> ID：14212846
> 
> 赞同：3
> 
> 时间：2013-01-08T10:24:50.723
> 
> 标签：objective-c, ios, uiview

我想将 UIButton 固定到 iPhone 屏幕的右下角。3.5英寸和4英寸屏幕。

这是我写的代码。但在 iPhone4 和 iPhone5 中，按钮始终保持在 x=265,y=361 上。

```
UIImage* plusImage = [UIImage imageNamed:@"Plus.png"];
UIButton* plusButton = [UIButton buttonWithType:UIButtonTypeCustom];
[plusButton setImage:plusImage forState:UIControlStateNormal];
[plusButton setFrame:CGRectMake(265, 361, plusImage.size.width, plusImage.size.height)];
plusButton.autoresizingMask = UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleLeftMargin;
[self.view addSubview:plusButton]; 
```

我已经将自动调整大小的蒙版设置为灵活的顶部和左侧边距。但它没有用。我错过了什么？请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T11:03:18.583

```
UIImage* plusImage = [UIImage imageNamed:@"Plus.png"];
UIButton* plusButton = [UIButton buttonWithType:UIButtonTypeCustom];
[plusButton setImage:plusImage forState:UIControlStateNormal];
CGSize viewSize = self.view.frame.size;
[plusButton setFrame:CGRectMake(viewSize.width - plusImageSize.width, viewSize.height - plusImageSize.height, plusImage.size.width, plusImage.size.height)];
plusButton.autoresizingMask = UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleLeftMargin;
[self.view addSubview:plusButton]; 
```

试试那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T10:48:24.240

尝试 `plusButton.autoresizingMask = UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleBottomMargin`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T10:55:51.560

我已经使用了所有这些掩蔽如下

```
plusButton.autoresizingMask = UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleBottomMargin | UIViewAutoresizingFlexibleRightMargin | UIViewAutoresizingFlexibleLeftMargin; 
```

检查它是否对我有用。

# python - python - 用圆旋转（2-D）实现摩擦（Spin）

> ID：14212847
> 
> 赞同：-1
> 
> 时间：2013-01-08T10:24:51.743
> 
> 标签：python, pygame, physics, geometry

[这是PyParticles4.py](http://www.petercollingridge.co.uk/sites/files/peter/PyParticles4.txt)（第 4 版） 上的另一个问题。

 **具有半径、质量、速度、位置**的粒子类圆形 2d 对象****

 **我正在考虑使用 pygame 和 PyParticles 在 python上制作[这个游戏的一个版本。](http://www.foddy.net/cricket.swf)我唯一感到困惑的是球在弹跳时与下面的表面（间距）的摩擦。

那么，有什么想法吗？
此外，是否可以显示球的旋转（不创建新课程）并真实地改变它（施加力）所以球“旋转”（板球术语）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T10:16:53.883

**假设球正在撞击一个不动的物体（如游戏中）**

您可以使用球的旋转速度，然后将其乘以球的摩擦常数及其接触的表面，然后再乘以另一个常数 (i)（使其可用）。
那是：

```
 x = ball.rpm * ball.friction * pitch.friction * i  
 ball.angle += x 
```

然后调整`i`和`*.friction`常量，直到你得到所需的结果。**

# authentication - nginx auth_basic

> ID：14212852
> 
> 赞同：1
> 
> 时间：2013-01-08T10:25:07.093
> 
> 标签：authentication, nginx

我对 NGINX basic_auth 有疑问。

我想保护我的所有网站并排除一个位置。

website.fr = 安全 website.fr/commande/validation/summary = 不安全

它可以工作，但是当我取消身份验证时，显示没有 CSS 的网站。我想需要一个 401 错误验证。

你能帮我吗？

这是我的 nginx.conf

```
server {
    listen   80; ## listen for ipv4; this line is default and implied
    server_name website.fr;

    access_log  /var/log/nginx/localhost.access.log;
    error_log  /var/log/nginx/localhost.error.log;

    root /var/www/website/web;
    index app_test.php
    # Limitation d'accés
    client_max_body_size 20M;
    #Default Location
    location / {
            #auth_basic "protection";
            #auth_basic_user_file /var/www/website/web/.htpasswd;
            root /var/www/actuanimau

x/web;
                index app_test.php;
                auth_basic "protection";
                auth_basic_user_file /var/www/website/web/.htpasswd;

                if (-f $request_filename) {

                break;
                }

                rewrite "^/([a-zA-Z]{0,10})\/?media\/(tmp|user|animal|article|association|common_content|event|product)\/(.{36})\/.*_(min|moy|med|small|photo|zoom|pano)\.(.{3,4})$" /$1/media/$2/$3_$4.$5 break;
                rewrite "^/([a-zA-Z]{0,10})\/?media\/(tmp|user|animal|article|association|common_content|event|product)\/(.{36})\/.*\.(.{3,4})$" /$1/media/$2/$3.$4 break;

                rewrite "^/([a-zA-Z]{0,10})\/?upload\/(animal|association|ckeditor)\/(.{36})\/.*\.(.{3,4})$" /$1/upload/$2/$3.$4 break;

                rewrite ^(.*)$ /app_test.php last;

        }

        ## Images and static content is treated different
        location ~* ^(media|upload)/[^/]+/[^/]+\.(jpg|jpeg|gif|css|png|js|ico|xml)$ {
                access_log        off;
                expires           30d;
                root /var/www/website/web;
        }

        ## Parse all .php file in the /var/www directory
        location ~ .php$ {
                satisfy any;
                #auth_basic "Authentification Required";
                #auth_basic_user_file /var/www/website/web/.htpasswd;

                fastcgi_split_path_info ^(.+\.php)(.*)$;
                fastcgi_pass   backend;
                fastcgi_index  index.php;
                fastcgi_param  SCRIPT_FILENAME  /var/www/website/web/$fastcgi_script_name;
                include fastcgi_params;
                fastcgi_param  QUERY_STRING     $query_string;
                fastcgi_param  REQUEST_METHOD   $request_method;
                fastcgi_param  CONTENT_TYPE     $content_type;
                fastcgi_param  CONTENT_LENGTH   $content_length;
                fastcgi_intercept_errors        on;
                fastcgi_ignore_client_abort     off;
                fastcgi_connect_timeout 60;
                fastcgi_send_timeout 128;
                fastcgi_read_timeout 128;
                fastcgi_buffer_size 256k;
                fastcgi_buffers 4 256k;
                fastcgi_busy_buffers_size 256k;
                fastcgi_temp_file_write_size 256k;
    }

        location = ~/commande/validation/summary {
        auth_basic off;
        allow all;
        }
        ##Disable viewing .htaccess & .htpassword
        location ~ /\.ht {
                #deny  all;
                allow all;
        }

upstream backend {
        server 127.0.0.1:9000;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-31T02:06:59.240

您还需要为您的 PHP 重复块`auth_basic`内的指令。`location`它们不是“继承的”。Nginx*只*使用最具体的匹配。

# android - 从android中的另一个类访问VideoView

> ID：14212859
> 
> 赞同：0
> 
> 时间：2013-01-08T10:25:28.793
> 
> 标签：android, video, android-videoview

我想从另一个班级访问 videoview。如果我这样做会出现异常

```
Only the original thread that created a view hierarchy can touch its views.
android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
at android.view.ViewRootImpl.checkThread(ViewRootImpl.java:4607)
at android.view.ViewRootImpl.requestLayout(ViewRootImpl.java:835)
at android.view.View.requestLayout(View.java:15129)
at android.view.View.requestLayout(View.java:15129)
at android.view.View.requestLayout(View.java:15129)
at android.view.View.requestLayout(View.java:15129)
at android.view.View.requestLayout(View.java:15129)
at android.widget.VideoView.setVideoURI(VideoView.java:198)
at android.widget.VideoView.setVideoURI(VideoView.java:187)
at com.network.video.player.MainVideoActivity.PlayNext_Video(MainVideoActivity.java:452)
at com.network.video.player.ConnectToServer$HandleClientThread.Delete_file(ConnectToServer.java:116)
at com.network.video.player.ConnectToServer$HandleClientThread.run(ConnectToServer.java:244)
at java.lang.Thread.run(Thread.java:856) 
```

谁能告诉我如何从另一个类访问视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:44:21.680

您可以使用以下方法访问视图。

```
runOnUiThread(Runnable ac) 
```

为此，将视图所在的活动传递给类。

例如：

```
activity.runOnUiThread(new Runnable() {
   public void run() {

    //access here

  }
}); 
```

# jquery - 带有 Backbone.js 和 JQuery Mobile 的覆盖面板

> ID：14212864
> 
> 赞同：1
> 
> 时间：2013-01-08T10:25:40.750
> 
> 标签：jquery, mobile, backbone.js, popup, overlay

我正在尝试使用主干和 JQM 在项目中创建覆盖面板。覆盖面板应该像 JQM 文档中描述的示例一样工作：

[http://jquerymobile.com/demos/1.2.0/docs/pages/popup/popup-panels.html](http://jquerymobile.com/demos/1.2.0/docs/pages/popup/popup-panels.html)

我的项目基于骨干网和 JQM 的第一步教程，使用骨干网路由。changePage() 的正常路由运行良好。我只是无法让覆盖面板工作。

我为我的项目创建了一个 git 存储库。如果我单击标题中的“菜单”按钮，覆盖面板应该像上面的演示一样滑入。

[https://github.com/Devthias/BackboneJQM.git](https://github.com/Devthias/BackboneJQM.git)

在我的路由器内部，我尝试将 data-role 属性设置为 popup，然后调用 changePage 函数。

```
var AppRouter = Backbone.Router.extend({

routes:{
    "":"home",
    "settings":"settings",
    "menuPanel":"menuPanel"
},

initialize:function () {
    // Handle back button throughout the application
    $('.back').live('click', function(event) {
        window.history.back();
        return false;
    });
    this.firstPage = true;
},

....

menuPanel:function(){
    console.log('#menuPanel');
    this.openPopup(new MenuPanelView());
},

changePage:function (page) {
    $(page.el).attr('data-role', 'page');
    page.render();
    $('body').append($(page.el));
    var transition = $.mobile.defaultPageTransition;
    $.mobile.changePage($(page.el), {changeHash:false, transition: transition});
},

openPopup:function (page){
    $(page.el).attr('data-role', 'popup');
    page.render();
    $('body').append($(page.el));
    var transition = $.mobile.defaultPageTransition;
    $.mobile.changePage($(page.el), {});
} 
```

});

有人知道我做错了什么并且可以帮助我吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T18:36:18.973

> **更改页面**绝对是错误的举动..

对我来说，一旦我在模板中放置了一个占位符，它就开始工作了：

```
<div data-role="page">    
  <div data-role="content">

    ...

    <div data-role="popup" id="myPopup" data-history="false">
      <span>&nbsp;<span>
    </div>
  </div>
</div> 
```

然后我在路由器上做了类似的事情：

```
openPopup:function (page){
    $('#myPopup').html($(page.el)).popup('open');
} 
```

# ruby-on-rails - 浏览器后退按钮并保存

> ID：14212866
> 
> 赞同：0
> 
> 时间：2013-01-08T10:25:48.397
> 
> 标签：ruby-on-rails, ruby, browser

如果用户使用浏览器后退按钮并再次保存页面，我需要限制。有没有可能的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:27:46.117

我们可以通过在保存按钮中添加 :disable_with => "Processing" 来代替使用后退按钮禁用功能。

**<%=submit_tag "Save",:class => "buttons", :id => 'save_btn', :disable_with => "Processing" %>**

如果用户使用浏览器的后退按钮，这将禁用保存按钮（即使用户使用 F5 或刷新按钮刷新页面）。

*注意：它不适用于 Ctrl + F5*

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T10:28:04.620

使用过期时间短的 cookie 或 session，所以 if(cookie/session) 然后不要再次保存页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T10:30:43.313

**使用 history.forward 禁用 Back 功能**

这是在任何网页中禁用返回功能的另一种技术。我们可以通过在网页中添加以下代码来禁用后退导航。现在要注意的是，您必须在要避免用户从上一页返回的所有页面中添加此代码。例如，用户跟随导航 page1 -> page2。并且您想阻止用户从 page2 返回到 page1。在这种情况下，page1 中的所有以下代码

```
 <SCRIPT type="text/javascript">
      window.history.forward();
      function noBack() { window.history.forward(); }
    </SCRIPT>
   </HEAD>
    <BODY onload="noBack();"
    onpageshow="if (event.persisted) noBack();" onunload=""> 
```

上面的代码将触发 page1 的 history.forward 事件。因此，如果用户在 page2 上按下 Back 按钮，他将被发送到 page1。但是 page1 上的 history.forward 代码将用户推回到 page2。因此，用户将无法从 page1 返回。

# asp.net - 当浏览器关闭/标签关闭或导航到其他页面时打开弹出窗口

> ID：14212868
> 
> 赞同：0
> 
> 时间：2013-01-08T10:25:52.790
> 
> 标签：asp.net

当用户关闭浏览器/关闭选项卡或导航到网站上的其他页面时，我必须打开一个弹出窗口以获取用户输入并使用 jquery/javascript 或服务器端事件保存到数据库。请指导我。我试过使用

`window.onbeforeunload = function evens(evt) {}`

但是，不工作。

# hibernate - JPA Id egeneration.AUTO 结果为NULL？

> ID：14212870
> 
> 赞同：-1
> 
> 时间：2013-01-08T10:26:02.400
> 
> 标签：hibernate, jpa, jpa-2.0

我不断违反约束，因为我的 id 为 null 并且表中的行无法插入，

SQLEXCEPTION 不能在列 id 中插入空值

我在 tbale 中的 id 具有以下内容：

```
@Id
@GeneratedValue(strategy = GenerationType.AUTO)
@Column(name="id") 
```

我正在使用 SQL Server....有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:31:13.387

试试这个 -

```
@Column(name="id", unique=true, nullable=false) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-08T10:29:17.820

尝试将 @Column 修改为 @Column( nullable = false, name="id" )

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-08T14:40:04.807

整理出来，显然有人删除了自动增量并将标识列更改为普通的 int 列。

固定在数据库中。

# google-maps - 带有 Google iframe 链接的 Google 静态地图图像

> ID：14212871
> 
> 赞同：2
> 
> 时间：2013-01-08T10:26:04.593
> 
> 标签：google-maps, google-maps-api-3, fancybox

我正在尝试显示一个谷歌静态地图，点击它会打开一个更大的 iframe，用户可以在其中平移、缩放等。

[JSFiddle在这里](http://jsfiddle.net/thong/Q4FE7/)

**下面的代码：**

```
<div>
    <a class="various fancybox.iframe" title="Whitehouse - USA" href="https://maps.google.com/maps?f=d&amp;source=s_d&amp;saddr=&amp;daddr=1600+Pennsylvania+Ave+NW,+White+House,+Washington,+DC+20500&amp;hl=en&amp;geocode=Ca3jx5Eq6BcjFQ6IUQIdG4Ro-ynPaZnjvLe3iTGGOSyaFzTP2g&amp;sll=38.897678,-77.036517&amp;sspn=0.009644,0.01443&amp;g=1600+Pennsylvania+Avenue+Northwest,+Washington,+DC&amp;mra=ls&amp;ie=UTF8&amp;t=m&amp;ll=38.89768,-77.036519&amp;spn=0.008016,0.013733&amp;z=16&amp;output=embed">

        <img src="http://maps.googleapis.com/maps/api/staticmap?center=1600+Pennsylvania+Ave+NW,+White+House,+Washington,+DC+20500&markers=1600+Pennsylvania+Ave+NW,+White+House,+Washington,+DC+20500&size=300x300&sensor=false">

    </a>
</div> 
```

我试图寻找与 iframe 相关的非 JavaScript 文档，但没有遇到任何问题。我想*在 iframe*中添加以下内容：

**标记**居中 - JSFiddle 显示居中，但在生产站点上运行的完全相同的代码会呈现一个 iframe，标记显示在左上角。

**删除标记标签“B”**

**从我的数据库中输入我自己的坐标**- 例如......对纽约市、芝加哥等执行相同的操作。但是，我尝试更改`daddr`（目标地址），但不确定其他变量代表什么（即 sll , sspn, g, mra, ll 等）

**获取路线 - 插入起点，并获取前往预定目的地的路线**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T18:30:51.330

## 首先解释一下你需要的参数：

*   **`f`**
    必须是**`d`**方向

*   **`saddr`**
    起始地址，可以是字符串（将被地理定位）或 latLng

*   **`daddr`**
    目标地址，可以是字符串（将被地理定位）或 latLng

*   **`ll`**
    在哪里居中地图（latlng）。当省略时，地图将基于标记居中

*   **`z`**
    地图的缩放。省略时，地图将根据方向缩放

*   **`output`**
    必须`embed`用于 iframe

您可以在[http://www.seomoz.org/ugc/everything-you-never-wanted-to-know-about-google-maps-parameters找到参数的详细列表和说明](http://www.seomoz.org/ugc/everything-you-never-wanted-to-know-about-google-maps-parameters)

**但是：您应该注意，这些参数都不是任何官方 API 的一部分，它可能每天都在变化**

* * *

## 问题：

1.  **标记居中：**
    标记无法居中，因为地图开始加载时 iframe 不可见，无法确定 iframe 的大小。您可以使用一种解决方法：

    首先将一个虚拟页面加载到 iframe 中，当 fancybox 打开时，加载地图。

    这可以通过将其添加到 fancybox-options 来完成：

    ```
    beforeLoad: function(){
      //store the original href for later use
     this.oldhref=this.href;
      //replace the href with some dummy-page
     this.href='wait.htm';
     return true;
    },
    afterLoad:function(){
      //load the originally requested page to the iframe
     $('.fancybox-iframe').attr('src',this.oldhref);
    } 
    ```

2.  **删除标记标签“B”**
    ，没有删除 B 的选项，你所能做的就是用**A**替换它。因此，您必须将标记设置为起始目的地的标记 (saddr)

3.  **从我的数据库中输入我自己的坐标**
    将坐标应用于saddr或daddr（取决于它应该是什么，开始或目的地）

4.  **获取路线 - 插入起点，并获取前往预定目的地的路线，**
    请参阅 3。

* * *

最后：您应该考虑使用 Maps-Javascript-API 创建自己的地图，以获得您可以自己处理的地图。

# java - Java：为什么这个方法不被识别？

> ID：14212878
> 
> 赞同：-4
> 
> 时间：2013-01-08T10:26:33.797
> 
> 标签：java

我遇到了一个问题，即来自另一个类的方法没有被 Eclipse 识别为存在，即使所有其他方法都是。我不知道为什么会这样，也无法弄清楚。`The method getData() is undefined for the type TMXReader.TMXHandler`当我尝试这样做时出现错误：

```
package tiled.simple.reader;

import java.io.IOException;
import java.io.InputStream;
import java.util.HashMap;

import javax.xml.parsers.ParserConfigurationException;
import javax.xml.parsers.SAXParser;
import javax.xml.parsers.SAXParserFactory;

import org.xml.sax.Attributes;
import org.xml.sax.InputSource;
import org.xml.sax.SAXException;
import org.xml.sax.XMLReader;
import org.xml.sax.helpers.DefaultHandler;

import tiled.simple.core.Map;
import tiled.simple.core.MapLayer;
import tiled.simple.core.TileSet;
import davidiserovich.TMXLoader.TMXHandler;
import davidiserovich.TMXLoader.TileMapData;

TMXHandler handler = new TMXHandler();

handler.getData(); 
```

这是 TMXHandler 类：

```
package davidiserovich.TMXLoader;

import java.util.HashMap;

import org.xml.sax.Attributes;
import org.xml.sax.SAXException;
import org.xml.sax.helpers.DefaultHandler;

//import android.sax.StartElementListener;

public class TMXHandler extends DefaultHandler {
    /*
     * This is an SAX2 XML parser that interprets the input TMX file and creates
     * a TileMapData object.
     */

    // NOTE: Map Object loading is not yet implemented

    // Markers for which tag we're in
    private boolean inTileSet, inTile, inLayer, inData, inObjectGroup,
            inProperties;

    // ID of the current tile that we're adding properties to.
    // This is actually an OFFSET from firstGID of the tile in
    // the tileset. Beware.
    private String currentTileID;
    private String currentObjectGroupName;
    TileMapData.TMXObject currentObject;

    TileMapData.TileSet currentTileSet;
    TileMapData.Layer currentLayer;

    HashMap<String, HashMap<String, String>> currentTileSetProperties;
    HashMap<String, String> currentLayerProperties;

    private TileMapData data;

    /*
     * These fields hold the buffer and data to help decode the long stream of
     * gids in the data field
     */
    private char buffer[];
    private int bufferIndex;
    private int currentX;
    private int currentY;
    public int MAX_INT_DECIMAL_LENGTH = 10;

    public TMXHandler() {
        super();
        buffer = new char[MAX_INT_DECIMAL_LENGTH];
        bufferIndex = 0;
        currentX = 0;
        currentY = 0;
    }

    public TileMapData getData() {
        return data;
    }

    @Override
    public void startDocument() throws SAXException {
        data = new TileMapData();
    }

    @Override
    public void endDocument() throws SAXException {

    }

    @Override
    public void startElement(String namespaceURI, String localName,
            String qName, Attributes atts) throws SAXException {
        if (localName.equals("map")) {
            // inMap = true;
            // Check that the orientation is orthogonal
            if (!(atts.getValue("orientation").equals("orthogonal"))) {
                throw new SAXException(
                        "Unsupported orientation. Parse Terminated.");
            }
            data.orientation = atts.getValue("orientation");
            data.height = Integer.parseInt(atts.getValue("height"));
            data.width = Integer.parseInt(atts.getValue("width"));
            data.tilewidth = Integer.parseInt(atts.getValue("tilewidth"));
            data.tileheight = Integer.parseInt(atts.getValue("tileheight"));

            // data.sectionId = atts.getValue("id");
        } else if (localName.equals("tileset")) {
            inTileSet = true;
            currentTileSet = new TileMapData.TileSet();
            currentTileSet.firstGID = Integer.parseInt(atts
                    .getValue("firstgid"));
            currentTileSet.tileWidth = Integer.parseInt(atts
                    .getValue("tilewidth"));
            currentTileSet.tileHeight = Integer.parseInt(atts
                    .getValue("tileheight"));
            currentTileSet.name = atts.getValue("name");
            currentTileSetProperties = new HashMap<String, HashMap<String, String>>();

        } else if (inTileSet && localName.equals("image")) {
            currentTileSet.ImageFilename = atts.getValue("source");
            currentTileSet.imageWidth = Integer
                    .parseInt(atts.getValue("width"));
            currentTileSet.imageHeight = Integer.parseInt(atts
                    .getValue("height"));

        } else if (inTileSet && localName.equals("tile")) {
            inTile = true;
            currentTileID = atts.getValue("id");

        } else if (inTile && localName.equals("properties")) {
            inProperties = true;
            currentTileSetProperties.put(currentTileID,
                    new HashMap<String, String>());

        } else if (inLayer && localName.equals("properties")) {
            inProperties = true;

        } else if (inTile && inProperties && localName.equals("property")) {
            (currentTileSetProperties.get(currentTileID)).put(
                    atts.getValue("name"), atts.getValue("value"));

        } else if (inLayer && inProperties && localName.equals("property")) {
            currentLayerProperties.put(atts.getValue("name"),
                    atts.getValue("value"));
        } else if (localName.equals("layer")) {
            inLayer = true;

            currentLayer = new TileMapData.Layer();
            currentLayer.name = atts.getValue("name");
            currentLayer.width = Integer.parseInt(atts.getValue("width"));
            currentLayer.height = Integer.parseInt(atts.getValue("height"));
            if (atts.getValue("opacity") != null)
                currentLayer.opacity = Double.parseDouble(atts
                        .getValue("opacity"));
            currentLayer.tiles = new long[currentLayer.height][currentLayer.width];

            currentLayerProperties = new HashMap<String, String>();

        } else if (localName.equals("data")) {
            /*
             * Data is loaded directly into the int array in characters() We
             * just check if the encoding is supported here.
             */
            inData = true;
            String encoding = atts.getValue("encoding");
            if (!encoding.equals("csv")) {
                throw new SAXException(
                        "Unsupported encoding. Parse Terminated.");
            }

        } else if (localName.equals("objectgroup")) {
            inObjectGroup = true;
            currentObjectGroupName = atts.getValue("name");

        } else if (localName.equals("object")) {
            currentObject = new TileMapData.TMXObject();
            currentObject.name = atts.getValue("name");
            currentObject.type = atts.getValue("type");
            currentObject.x = Integer.parseInt(atts.getValue("x"));
            currentObject.y = Integer.parseInt(atts.getValue("y"));
            currentObject.width = Integer.parseInt(atts.getValue("width"));
            currentObject.height = Integer.parseInt(atts.getValue("height"));
            if (inObjectGroup) {
                currentObject.objectGroup = currentObjectGroupName;
            } else {
                currentObject.objectGroup = null;
            }

        }
    }

    @Override
    public void endElement(String namespaceURI, String localName, String qName)
            throws SAXException {

        if (localName.equals("map")) {
            // inMap = false;

        } else if (localName.equals("tileset")) {
            inTileSet = false;
            currentTileSet.properties = currentTileSetProperties;
            currentTileSetProperties = null;
            data.tilesets.add(currentTileSet);
            currentTileSet = null; // Clear it just in case

        } else if (localName.equals("tile")) {
            inTile = false;
            currentTileID = "-1"; // -1 won't be produced when searching for
                                    // properties. Just a safeguard for
                                    // improperly formatted files.

        } else if (localName.equals("properties")) {
            inProperties = false;

        } else if (localName.equals("layer")) {
            inLayer = false;
            currentLayer.properties = currentLayerProperties;
            data.layers.add(currentLayer);
            currentLayer = null; // Clear it just in case
        } else if (localName.equals("data")) {
            inData = false;
            // In case we missed the last entry (no non-numeral chars before tag
            // end)
            if (bufferIndex > 0) {
                currentLayer.tiles[currentY][currentX] = Long
                        .parseLong(new String(buffer, 0, bufferIndex));
            }
            // Clear buffer
            bufferIndex = 0;
            currentX = 0;
            currentY = 0;

        } else if (localName.equals("objectgroup")) {
            inObjectGroup = false;

        } else if (localName.equals("object")) {
            data.objects.add(currentObject);
        }
    }

    @Override
    public void characters(char ch[], int start, int length) {
        /*
         * Java has no unsigned types, so we have to use a long instead of an
         * int so we can "simulate" an unsigned int. Disgusting. Anyway, we're
         * going to add the numbers from the character stream to a buffer until
         * we hit a comma, at which point we empty the buffer and convert it to
         * a long, and dump it into the array. These are raw, so the horizontal
         * and vertical flip bits may be set - to get the actual GID number,
         * we'll use TileMapData's getGIDAt(x, y), which will mask it properly.
         */
        if (inData) {
            for (int i = 0; i < length; i++) {
                if (ch[start + i] <= '9' && ch[start + i] >= '0') {
                    buffer[bufferIndex] = ch[start + i];
                    // Log.d("Wrote to index", String.valueOf(bufferIndex));
                    bufferIndex++;

                } else {
                    // When we hit a comma or any non-number character, empty
                    // the buffer and enter the relevant
                    // GID into the data field
                    // int what = Integer.parseInt(new String(buffer, 0,
                    // bufferIndex));
                    // Log.d("Number", new String(buffer, 0, bufferIndex));
                    String nextNumber = new String(buffer, 0, bufferIndex);
                    if ((nextNumber != null) && ((nextNumber.trim()) != "")
                            && (bufferIndex != 0)) {
                        // Log.d("Checking", nextNumber + " yes");
                        currentLayer.tiles[currentY][currentX] = Long
                                .parseLong(nextNumber);
                        bufferIndex = 0;

                        // Move to the next tile
                        if (currentX < (currentLayer.width - 1)) {
                            currentX++;

                        } else if (currentY < (currentLayer.height - 1)) {
                            currentX = 0;
                            currentY++;
                        }
                    }
                }
            }
        }
    }
} 
```

自动完成将所有其他方法显示为可用，但由于某种原因 getData “不存在”......

我确信这对于经验丰富的 Java 程序员来说是显而易见的，但我不知道为什么会发生这种情况......所以如果有人能告诉我为什么，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T10:28:04.407

改变这个：

```
TMXHandler handler = new TMXHandler; 
```

对此：

```
 TMXHandler handler = new TMXHandler(); 
```

**编辑**

如果这只是一个错字问题......如果你的问题是完整的......你可能忘了把它放在课堂上？:<

```
import davidiserovich.TMXLoader.TMXHandler;

public class Main {

    public static void main(String[] args) {
        TMXHandler handler = new TMXHandler();
        handler.getData();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T10:29:22.657

你必须创建对象。你忘了()

```
 TMXHandler handler = new TMXHandler(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T10:33:08.943

你确定引用类的java代码在运行时`TMXHandler`有正确的文件吗？`TMXHandler.class`这可能是由未定义方法的旧`TMXHandler.class`版本引起的`getData()`。

也许尝试一个干净的构建

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T10:34:36.533

`TMXHandler handler = new TMXHandler;`

**上面的行是罪魁祸首。**

**-**当我们在 a 上调​​用 new 时，`Class name`它总是伴随着`()`as**后缀**，它表示现在在堆上创建其对象的类的构造函数。

**-**这一行提供了介入的机会，在.`Actual object`分配给. 之前初始化对象的状态`Object reference variable`。

**所以应该是......**

`TMXHandler handler = new TMXHandler();`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T11:31:12.803

我解决了...原来那个项目已经有一个名为 TMXHandler 的类，所以它指的是那个，而不是我的另一个项目...一个非常愚蠢的错误。：

# wpf - WPF显示工具提示没有动画和透明度

> ID：14212880
> 
> 赞同：2
> 
> 时间：2013-01-08T10:26:47.650
> 
> 标签：wpf, tooltip, transparency

我想显示没有任何透明度的工具提示（也许可以完成它 - 没有动画），并分别隐藏它。

我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T10:31:18.210

您可以覆盖资源：

```
<Page
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:sys="clr-namespace:System;assembly=mscorlib"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    >
    <Page.Resources>
        <PopupAnimation x:Key="{x:Static SystemParameters.ToolTipPopupAnimationKey}">None</PopupAnimation>
    </Page.Resources>

    <Button ToolTip="My ToolTip Content" Content="My Button Content" />
</Page> 
```

来自：[http ://social.msdn.microsoft.com/Forums/eu/wpf/thread/a279901c-175a-4a59-a602-5ecdc66d9015](http://social.msdn.microsoft.com/Forums/eu/wpf/thread/a279901c-175a-4a59-a602-5ecdc66d9015)

# android - 如何禁用片段列表中的第一项？

> ID：14212885
> 
> 赞同：1
> 
> 时间：2013-01-08T10:27:19.977
> 
> 标签：android, android-fragments, android-fragmentactivity

代码如下： 它在位置 0 不应该是可点击的。我使用了 view.setClickable(false) 但它没有用。

```
@Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // Get the textview and imageview
        int c = ctx.getResources().getColor(R.color.expandlist);
        int selectedColor = ctx.getResources().getColor(R.color.colorexpand);
        View view = super.getView(position, convertView, parent);
        TextView textView = (TextView) view.findViewById(R.id.cust_view);

        Typeface tf = Typeface.createFromAsset(ctx.getAssets(),
                "fonts/segoeuil.ttf");
        ImageView imageView = (ImageView) view.findViewById(R.id.productImage);
        textView.setTypeface(tf);

        //Check the position so that proper values are assigned
        if (position == 0) {
            File sdCardRoot = Environment.getExternalStorageDirectory();
            File yourDir = new File(sdCardRoot, "ProductImages" + "/Main" + ID
                    + ".jpg");
            if (yourDir.getPath() != null) {
                Bitmap picture = BitmapFactory.decodeFile(yourDir.getPath());
                int width = picture.getWidth();
                int height = picture.getWidth();
                float aspectRatio = (float) width / (float) height;
                int newWidth = 149;
                int newHeight = (int) (150 / aspectRatio);
                picture = Bitmap.createScaledBitmap(picture, newWidth,
                        newHeight, true);
                imageView.setImageBitmap(picture);
                textView.setPadding(13, 200, 0, 0);

            }
            textView.setClickable(false);
            imageView.setClickable(false);
            view.setClickable(false);

        } else {
            if (position == 1) {
                if (ProductItemListFragment.videos) {
                    textView.setBackgroundColor(selectedColor);
                } else {
                    textView.setBackgroundColor(Color.TRANSPARENT);
                }
            } else if (position == 2) {
                if (ProductItemListFragment.images) {
                    textView.setBackgroundColor(selectedColor);
                } else {
                    textView.setBackgroundColor(Color.TRANSPARENT);
                }
            } else if (position == 3) {
                if (ProductItemListFragment.story) {
                    textView.setBackgroundColor(selectedColor);
                } else {
                    textView.setBackgroundColor(Color.TRANSPARENT);
                }

            } else {
                textView.setBackgroundColor(Color.TRANSPARENT);
            }
            // hide/remove image
            imageView.setVisibility(View.GONE); // or GONE, as you wish
            textView.setPadding(13, 10, 0, 15);

        }

        return view;
    } 
```

# php - 在 foreach 循环中计算条件输出

> ID：14212891
> 
> 赞同：0
> 
> 时间：2013-01-08T10:27:38.977
> 
> 标签：php, if-statement, foreach

我有这样的foreach循环

```
foreach($destinations as $destination)
{
if($destination=="abc")
{
 $msg = "Yes";
}
else
{
 $msg = "No";
}
} 
```

如何计算“foreach 循环”之外的“if 语句”生成的“是”和“否”的数量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T10:29:41.923

尝试：

```
$yes = 0;
$no = 0;
foreach($destinations as $destination)
{
    if($destination=="abc")
    {
        $yes += 1;
    }
    else
    {
        $no += 1;
    }
}

echo "Yes " . $yes . "<br>" . "No " . $no; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T10:30:23.037

在'if'语句中你可以试试这个

```
 $yesCount = 0;
    $noCount = 0;
    foreach($destinations as $destination)
    {
      if($destination=="abc")
      {
        $yesCount++;
        $msg = "Yes";
      }
      else
      {
        $noCount++;
        $msg = "No";
      }

    } 
```

但我不确定它是否可以在外面使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T10:31:48.113

创建两个标志变量并尝试这个

```
$yesFlag=0;
$noFlag=0;
foreach($destinations as $destination)
{
 if($destination=="abc")
 {
  $msg = "Yes";
  $yesFlag++;  
 } 
 else
 {
   $msg = "No";
   $noFlag++;
 }
}
echo "no. of Yes:".yesFlag;
echo "no. of NO:".noFlag; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T10:31:57.553

```
$yesCount = 0;
$noCount = 0;
    foreach($destinations as $destination) {
        if($destination=="abc") {
            $msg = "Yes";
            $yesCount = $yesCount + 1;
        }
        else {
            $msg = "No";
            $noCount = $noCount + 1;
        }
    }
echo $yesCoynt . " --- " . $noCount; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-08T10:34:17.327

***只需尝试以下示例：***

```
<?php
$destinations = array('abc','def','ghi');
foreach($destinations as $destination)
{
if($destination=="abc")
{
 $msg = "Yes";
 $msg_yes_counter[]= "I'm in"; 
}
else
{
 $msg = "No";
 $msg_no_counter[]= "I'm in";
}
}
echo "YES -> My Count is :".count($msg_yes_counter);
echo "NO -> My Count is :".count($msg_no_counter);
?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-08T10:33:36.287

使用 array_count_values() 函数，那么根本不需要循环。

```
array_count_values($destinations); 
```

# spring - Weblogic，Spring找不到bean

> ID：14212892
> 
> 赞同：1
> 
> 时间：2013-01-08T10:27:41.037
> 
> 标签：spring, tomcat, weblogic, weblogic-10.x

我们有一个使用 Spring 3 的 Web 应用程序。我们必须将它从 Tomcat 7 迁移到 Weblogic 10。

这个应用程序的结构是：

*   一个核心模块，其中包含所有应用程序逻辑。这个模块被打包成一个jar。
*   一个 web 模块，它定义了所有的 web 服务。这个模块包含前一个作为依赖项，并通过在“contextConfigLocation”参数中包含核心模块上下文来使用它的bean。

我正在使用 maven，这就是在 web 模块中定义依赖项的方式：

```
<dependency>
    <groupId>com.example</groupId>
    <artifactId>module-core</artifactId>
    <version>${project.version}</version>
    <classifier>${environment}</classifier>
</dependency> 
```

该应用程序在 tomcat 中运行良好，但无法在 Weblogic 中部署，因为 Spring 无法创建任何依赖于 core-module.jar 中的 bean 的 bean。对于来自核心模块的所有 bean，错误总是相同的：

```
org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'xxxBean' is defined 
```

'xxxBean' 是 core-module.jar 中定义的任何 bean。如果我删除 ref 以避免该 bean 的问题，则下一个引用的 bean 将再次引发错误。我的意思是 Spring 找到了在 web-module 本身中定义的所有 bean，但没有在 core-module 中定义。

在错误的跟踪中，我可以看到 weblogic 正在使用这个：

```
com.oracle.weblogic.wsee.wrapper.org.springframework.web.context.ContextLoaderListener.contextInitialized 
```

所以这个问题可能与Weblogic为spring应用程序引入的包装器有关。

有关可以解决此问题的配置的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T08:28:46.483

最后，问题与如何在 web.xml 中定义不同的 xml 文件有关。在 tomcat 中运行良好的原始配置是：

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        classpath:core-context.xml
        classpath:spring-web-security.xml 
    </param-value>
</context-param> 
```

和新的：

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath:core-context.xml,classpath:spring-web-security.xml</param-value>
</context-param> 
```

它们必须声明为逗号分隔而不是新行。由于weblogic并没有抱怨xml的格式，所以找到问题有点复杂。我希望这可以避免人们花时间在这种迁移上。问候和感谢！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:56:19.943

一个`contextConfigLocation`或`classpath:core-module-applicationContext.xml`任何实际文件被调用应该可以工作。

您可以尝试使用此内容将 weblogic.xml 定义到 WEB-INF/ 中吗

`<?xml version="1.0" encoding="UTF-8"?> <weblogic-web-app xmlns="http://www.bea.com/ns/weblogic/90" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.bea.com/ns/weblogic/90 http://www.bea.com/ns/weblogic/90/weblogic- web-app.xsd"> <container-descriptor> <prefer-web-inf-classes>true</prefer-web-inf-classes> </container-descriptor> </weblogic-web-app>`

为Weblogic 10修改它，本质上我们要设置`prefer-web-inf-classes`为true

# mysql - 根据表中上一行的结果选择数据

> ID：14212897
> 
> 赞同：1
> 
> 时间：2013-01-08T10:28:03.880
> 
> 标签：mysql, select

我有一个学生数据库。

```
 CREATE TABLE classlist
        (`id` int, `studentid` int, `subjectid` int, `presentid` int)
    ;

    CREATE TABLE student
        (`id` int, `name` varchar(4))
    ;

    CREATE TABLE subject
        (`id` int, `name` varchar(4))
    ;

    CREATE TABLE classStatus
        (`id` int, `name` varchar(8))
    ;

    INSERT INTO classlist
        (`id`, `studentid`, `subjectid`, `presentid`)
    VALUES
        (1, 111, 1, 1),
        (2, 222, 3, 0),
        (3, 333, 2, 1),
        (4, 111, 4, 1),
        (5, 111, 1, 0),
        (6, 222, 3, 0),
        (7, 333, 2, 1),
        (8, 111, 4, 1),
        (9, 111, 2, 0),
        (10, 111, 4, 1),
        (11, 111, 1, 1),
        (12, 333, 3, 1),
        (13, 333, 2, 1),
        (14, 333, 3, 1)
    ;

    INSERT INTO student
        (`id`, `name`)
    VALUES
    (111, 'John'),
    (222, 'Kate'),
    (333, 'Matt')
    ;

    INSERT INTO subject
        (`id`, `name`)
    VALUES
    (1, 'MATH'),
    (2, 'ENG'),
    (3, 'SCI'),
    (4, 'GEO')
    ;

    INSERT INTO classStatus
        (`id`, `name`)
    VALUES
    (0, 'Absent'),
    (1, 'Present')
    ; 
```

我有一个查询，显示他们出现或缺席了多少次。

```
 SELECT
       studentid,
       students.name AS NAME,
       SUM(presentid = 1) AS present,
       SUM(presentid = 0) AS absent

    FROM classlist
    INNER JOIN student as students ON classlist.studentid=students.id

     GROUP BY studentid, NAME 
```

请参阅下面的小提琴。 [http://sqlfiddle.com/#!2/fe0b0/1](http://sqlfiddle.com/#!2/fe0b0/1)

从这个样本数据来看，似乎有一种趋势，即在某人参加了 subjectid 4 之后，他们通常不会来下一堂课。如何在查询中捕获这一点。我只想显示最后一个 subjectid = 4 的数据。因此，在我的示例数据行中，符合我的标准。

```
 (5, 111, 1, 0),
    (9, 111, 2, 0),
    (11, 111, 1, 1), 
```

因为这些行都是 subjectid=4 的学生 ID 的下一行。

我的输出是

```
 | STUDENTID | NAME | PRESENT    | ABSENT|
    | 111       | John | 1          | 2     | 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:45:53.090

要为学生获取下一堂课，请使用相关子查询：

```
select cl.*,
       (select min(cl2.id) from classlist cl2 where cl2.studentid = cl.studentid and cl2.id > cl.id) as nextcl
from classlist cl 
```

将其插入您的查询示例会告诉您下一堂课谁在场和缺席：

```
SELECT students.id, students.name AS NAME,
       SUM(cl.presentid = 1) AS present, SUM(cl.presentid = 0) AS absent,
       sum(clnext.presentid = 1) as presentnext
FROM (select cl.*,
             (select min(cl2.id) from classlist cl2 where cl2.studentid = cl.studentid and cl2.id > cl.id) as nextcl
      from classlist cl
     ) cl INNER JOIN
     student as students
     ON cl.studentid = students.id left outer join
     classlist clnext
     on cl.nextcl = clnext.id
 GROUP BY students.id, students.NAME 
```

添加 a`where cl.subjectid = 4`以获得主题 4 的答案。

我修复了查询。SQLFiddle 是[k](http://www.sqlfiddle.com/#!2/c59d3/4/0)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T10:37:36.763

一个快速而肮脏的解决方案可能是获取所有 subjectid=4 的行的 Classlist.Id（我们称它们为 n），然后选择 Id = n+1 的所有行

# iphone - 如何在 UIWebView 上使用“上一个”和“下一个”和“完成”按钮删除键盘栏？

> ID：14212899
> 
> 赞同：0
> 
> 时间：2013-01-08T10:28:21.317
> 
> 标签：iphone, objective-c, ios, uiwebview

> **可能重复：**
> [如何从虚拟键盘 IOS 中删除上一个下一个按钮](https://stackoverflow.com/questions/8470984/how-to-remove-prev-next-button-from-virtual-keyboard-ios)

我在我的键盘中打开键盘，`UIWebView`但根据默认结构，`UIWebView`我在`button`键盘顶部获取带有上一个、下一个和完成的栏。

它在我的应用程序中占用了很多空间，所以我想删除那个栏。

我怎样才能删除那个栏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:43:39.893

```
Register for notification on keyboard showing:

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillShow:) name:UIKeyboardWillShowNotification object:nil];
Then:

- (void)removeBar
{
    // Locate non-UIWindow.
    UIWindow *keyboardWindow = nil;
    for (UIWindow *testWindow in [[UIApplication sharedApplication] windows])
    {
        if (![[testWindow class] isEqual:[UIWindow class]])
        {
            keyboardWindow = testWindow;
            break;
        }
    }

    // Locate UIWebFormView.
    for (UIView *possibleFormView in [keyboardWindow subviews])
    {
        // iOS 5 sticks the UIWebFormView inside a UIPeripheralHostView.
        if ([[possibleFormView description] rangeOfString:@"UIPeripheralHostView"].location != NSNotFound)
        {
            for (UIView *subviewWhichIsPossibleFormView in [possibleFormView subviews])
            {
                if ([[subviewWhichIsPossibleFormView description] rangeOfString:@"UIWebFormAccessory"].location != NSNotFound)
                {
                    [subviewWhichIsPossibleFormView removeFromSuperview];
                }
            }
        }
        else if ([[possibleFormView description] rangeOfString:@"UIImageView"].location != NSNotFound)
        {
            [possibleFormView removeFromSuperview]; //remove shadow above bar. If it doesn't remove shadow then set possibleFormView's frame as CGRectZero
        }
    }
} 
```

# android - AndroidPlot - 显示垂直域标签

> ID：14212906
> 
> 赞同：2
> 
> 时间：2013-01-08T10:28:48.217
> 
> 标签：android, label, androidplot

我在单个图中有大约 12 个域标签。它们相互重叠。我无法改变他们的方向。请提出一个适用于 Android v2.2 及更高版本的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-21T12:16:17.663

试试这个方法

**`plot.getGraphWidget().setDomainLabelOrientation(-45);`**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-05T09:04:08.900

这是旋转域标签以使它们不会相互重叠的解决方案：

```
plot.getGraph().getLineLabelStyle(XYGraphWidget.Edge.BOTTOM).setRotation(-45); 
```

这适用于较新版本的 AndroidPlot（1.0 及更高版本）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-28T16:01:05.037

我知道您很久以前就问过这个问题，但这可能会对那里的人有所帮助。

您可以创建自己的标签，如下所示：[AndroidPlot：在 X 轴上设置标签](https://stackoverflow.com/questions/10770220/androidplot-setting-the-labels-on-the-x-axis)

或者，如果您只想拥有较少的域值，则可以使用以下方法设置域值：

```
yourPlotName.setDomainStepValue(NumberOfValuesDesired); 
```

# java - 用另一个字符串替换 File 中的行

> ID：14212916
> 
> 赞同：1
> 
> 时间：2013-01-08T10:16:55.870
> 
> 标签：java

我有一个包含以下内容的文本文件：

```
public class MyC{
public void MyMethod()
{
    System.out.println("My method has been accessed");
    System.out.println("hi");
}
} 
```

我有一个数组 num[]= {2,3,4}; 其中包含要完全替换为此数组中的字符串的行号

字符串[] 值 = 新字符串[] {"AB","BC","CD"};

也就是说，第 2 行将替换为 AB，第 3 行替换为 BD，第 4 行替换为 CD。

不在 num[]array 中的行必须与所做的更改一起写入新文件。

到目前为止我有这个。我尝试了几种循环，但它仍然不起作用。

```
public class ReadFileandReplace {

/**
 * @param args
 */
public static void main(String[] args) {

    try {

         int num[] = {3,4,5};

         String[] VALUES = new String[] {"AB","BC","CD"};

         int l = num.length;

         FileInputStream fs= new FileInputStream("C:\\Users\\Antish\\Desktop\\Test_File.txt");
         BufferedReader br = new BufferedReader(new InputStreamReader(fs));

         LineNumberReader reader = new LineNumberReader(br);

         FileWriter writer1 = new FileWriter("C:\\Users\\Antish\\Desktop\\Test_File1.txt");

         String line;
         int count =0;

         line = br.readLine();
         count++;

         while(line!=null){
              System.out.println(count+": "+line);
              line = br.readLine();
              count++;

              int i=0;
                  if(count==num[i]){
                      int j=0;;
                    System.out.println(count);
                    String newtext = line.replace(line, VALUES[j]) + System.lineSeparator();
                    j++;
                                            writer1.write(newtext);
                  }
                  i++;
                  writer1.append(line);
              }

    writer1.close();
    }
    catch (IOException e) {
        e.printStackTrace();
    } finally {
    }

}

} 
```

预期的输出应如下所示：

```
public class MyC{
AB
BC
    CD
    Sys.out.println("hi");
}
} 
```

当我运行代码时，所有行都出现在同一行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T10:33:38.580

您将每一行附加到同一个字符串。您还应该在每行的末尾添加行分隔符。（您可以使用 健壮地做到这一点`System.getProperty("line.separator")`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T10:51:10.993

你几乎完成了，我已经用地图更新了你的代码。检查这个

```
int num[] = {3, 4, 5};
String[] values = new String[]{"AB", "BC", "CD"};

HashMap<Integer,String> lineValueMap = new HashMap();
for(int i=0 ;i<num.length ; i++) {
    lineValueMap.put(num[i],values[i]);
}

FileInputStream fs = new FileInputStream("test.txt");
BufferedReader br = new BufferedReader(new InputStreamReader(fs));

FileWriter writer1 = new FileWriter("test1.txt");

int count = 1;
String line = br.readLine();
while (line != null) {
    String replaceValue = lineValueMap.get(count);
    if(replaceValue != null) {
        writer1.write(replaceValue);
    } else {
        writer1.write(line);
    }
    writer1.write(System.getProperty("line.separator"));
    line = br.readLine();
    count++;
}
writer1.flush(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T10:33:12.173

您没有附加结束行字符。writer1.append(line); 正在将数据附加到没有结束符的行中。因此它显示在一行中。您可能需要将其更改为： writer1.append(line).append("\n");

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T10:54:23.157

试试这个

```
package src;

import java.io.BufferedReader;
import java.io.FileInputStream;
import java.io.FileWriter;
import java.io.InputStreamReader;
import java.io.LineNumberReader;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collections;
import java.util.Comparator;
import java.util.Date;
import java.util.Iterator;
import java.util.List;
import java.util.TimeZone;

public class MainTest {

    static int i ;

    public static void main(String[] arg)
    {
        try {

             int num[] = {3,4,5};

             String[] VALUES = new String[] {"AB","BC","CD"};

             FileInputStream fs= new FileInputStream("C:\\Test\\ren.txt");
             BufferedReader br = new BufferedReader(new InputStreamReader(fs));

             FileWriter writer1 = new FileWriter("C:\\Test\\ren1.txt");

             String line;
             Integer count =0;

             line = br.readLine();
             count++;

             while(line!=null){

                 for(int index =0;index<num.length;index++){
                     if(count == num[index]){
                         line = VALUES[index];
                     }
                 }

                 writer1.write(line+System.getProperty("line.separator"));

                 line = br.readLine();

                 count++;

                 }

        writer1.close();
        }
        catch (Exception e) {
            e.printStackTrace();
        } finally {
        }

}
} 
```

# gwt - GWT 中的 jquery load() 等效项

> ID：14212919
> 
> 赞同：0
> 
> 时间：2013-01-08T10:29:29.030
> 
> 标签：gwt

我想知道 GWT 中是否有等效的 load() 而不使用框架或任何 GWT 框架。

我需要使用 GWT 在 div 中加载文件 .html。

像这样的东西： RootPanel.get("content").add(page.html);

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:13:57.693

添加这个：`<inherits name="com.google.gwt.http.HTTP" />` 到你的 gwt.xml 文件

`HTML`然后你可以对小部件和 RequestBuilder做一些事情

例如

```
import com.google.gwt.http.client.*;
...
HTML htmlWidget = null;
String url = "http://www.myserver.com/getData?type=3";
RequestBuilder builder = new RequestBuilder(RequestBuilder.GET, URL.encode(url));

try {
  Request request = builder.sendRequest(null, new RequestCallback() {
    public void onError(Request request, Throwable exception) {

    }

    public void onResponseReceived(Request request, Response response) {
      if (200 == response.getStatusCode()) {
         htmlWidget = new HTML(response.getText());
      } else {
        // Handle the error.  Can get the status text from response.getStatusText()
      }
  }       
 });
} catch (RequestException e) {
  // Couldn't connect to server        
}
if(htmlWidget!=null){
    RootPanel.get("content").add(htmlWidget);
} 
```

我看不到它是否可以编译（目前无法访问 IDE），因此请原谅您可能需要更正的任何小错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T12:04:21.380

这里记录了几种[在 GWT 应用程序中外部化 HTML 的最佳方法？](https://stackoverflow.com/questions/744137/best-way-to-externalize-html-in-gwt-apps)

在您的场景中，我更喜欢带有 html 资源的客户端捆绑包。

# maven - 如何使用 maven reactor 构建模块及其子模块？

> ID：14212920
> 
> 赞同：8
> 
> 时间：2013-01-08T10:29:29.613
> 
> 标签：maven

我有一个包含三个级别模块的项目。假设它有以下组织......

```
+-- maven-root
   +-- maven-module-1
   |   +-- maven-submodule-1-1
   |   +-- maven-submodule-1-2
   +-- maven-module-2
   |   +-- maven-submodule-2-1
   |   +-- maven-submodule-2-2
   +-- maven-module-3
       +-- maven-submodule-3-1
       +-- maven-submodule-3-2 
```

此外，我们有以下一组依赖项

*   `maven-module-2`取决于`maven-module-1`
*   `maven-module-3`取决于`maven-module-3`

在这种结构中，假设工件`maven-module-1`及其子模块已经在本地存储库中可用，是否有使用 maven reactor（例如）仅构建`maven-module-2`及其子模块的解决方案？

我已经知道，如果我这样做，使用 Maven 反应器

```
mvn clean install -pl :maven-module-2 --also-make-dependant 
```

它将建立

1.  maven-module-2
2.  maven-submodule-2-1
3.  maven-submodule-2-2
4.  maven-module-3
5.  maven-submodule-3-1
6.  maven-submodule-3-2

因为`maven-module-3`有依赖`maven-module-2`

显然，跑步

```
mvn clean install -pl :maven-module-2 --also-make 
```

只会构建`maven-module-1`和`maven-module-2`.

那么，如何使用该项目组织，我只能构建`maven-module-2`？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-09T17:55:54.593

使用

```
mvn clean install -f maven-module-2 -N 
```

将只构建 maven-module-2 和

```
mvn clean install -f maven-module-2 
```

将构建 maven-module-2 及其子级

注意 -f 用于告诉 Maven 使用另一个 POM（或模块目录，它需要其中的 pom.xml）而不是当前目录中的。因此，与 -pl 不同，maven 会考虑项目中的所有模块，然后仅构建它们的子部分，-f 仅构建此项目/模块/pom 引用的内容。去做

```
mvn clean install -f maven-module-2 
```

就像

```
cd maven-module-2; mvn clean install 
```

# mysql - 使用准备好的语句选择日期查询

> ID：14212921
> 
> 赞同：0
> 
> 时间：2013-01-08T10:29:30.287
> 
> 标签：mysql, date

在数据库中，相同的日期是多次。表数据包含日期和时间，如果我使用它，它不会给出我需要修改的记录。我想要`2012-11-21`这个日期的所有记录。但`token_gen_time`它包含`2012-11-21 1:00:00`. 如何编写查询以根据日期进行选择。

```
SELECT * FROM mias_log
where activity_status='Token Generated' 
AND token_gen_time='2012-11-21 ' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:32:21.830

您可以从`token_gen_time`使用[`DATE()`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date)函数中删除时间以返回仅匹配日期的值

```
SELECT * 
FROM mias_log 
where activity_status='Token Generated' 
  AND Date(token_gen_time) = '2012-11-21' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T10:34:56.520

为了使用索引（如果在 token_gen_time 中可用），使用这个

```
SELECT * 
FROM mias_log 
where activity_status = 'Token Generated' 
and token_gen_time >= '2012-11-21' 
and token_gen_time < '2012-11-22' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T10:32:10.527

[您可以使用DATE()](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date)提取日期部分

```
SELECT * 
FROM mias_log 
where activity_status = 'Token Generated' 
and date(token_gen_time) = '2012-11-21' 
```

# ubuntu-12.04 - 使用 iMac 作为机器创建私有云 (Eucalyptus)

> ID：14212923
> 
> 赞同：0
> 
> 时间：2013-01-08T10:29:31.223
> 
> 标签：ubuntu-12.04, ubuntu-10.04, eucalyptus

我正在尝试使用两台 iMac 2011 核心 i5 来创建私有云，因为它们只是我现在拥有的 64 位机器。我计划将一个用于 CLC，另一个用于节点控制器。我尝试从 Ubuntu 10.04 服务器 CDinstaller 安装 Eucalyptus 云。我可以将它安装在 Paralle 上，但每次都在真机上失败，因为我无法通过网络检测步骤，因为它显示 Ubuntu 无法联系 DHCP 服务器。但是这些步骤可以在 Paralle 和 VM 上完成。当我在真机和VM上安装Ubuntu 12.04服务器时没有问题。所以我想知道 iMac 是否适合用作 UEC 的 Machune？

另一个问题是，当我尝试在 VM / Paralle 上安装 Node 控制器时，它显示“硬件不支持虚拟化，在此硬件上运行的 Eucalyptus 将无法加速”的步骤。这些问题我该怎么办？什么是支持虚拟化的机器（假设我可以在这个项目中使用 iMac，我必须适应什么。或者任何命令行来解决问题。）

谢谢你。

== 我的 iMac 规格 [http://www.everymac.com/systems/apple/imac/specs/imac-core-i5-2.7-21-inch-aluminum-mid-2011-thunderbolt-specs.html](http://www.everymac.com/systems/apple/imac/specs/imac-core-i5-2.7-21-inch-aluminum-mid-2011-thunderbolt-specs.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T17:42:22.200

我不认为你可以在 Mac 上运行 Eucalyptus。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-07T19:23:20.127

在我看来，问题是关于在物理机上安装 - 不要与尝试在 Mac OSX 环境中安装它混淆。鉴于物理设备将具有基于 x68 的芯片，我看不出这是不可能的原因。

目标 iMac 是否物理连接到网络？我问是因为在我的测试笔记本电脑（ThinkPad）上，我注意到仅使用无线 NIC 安装 Euca 是行不通的。或者比我想处理的更困难;-)

而且我敢打赌，您尝试的虚拟化方法（即 Parallells）会走得更远，因为它伪造了硬连线 NIC，并且您的底层环境已经正确配置为可以看到 DHCP 服务器。这个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-07T18:11:40.470

正如 Vasya 所说，Eucalyptus 并不是为在 Mac 上运行而设计的。在盒子中使用云可能是可能的，但您将需要大量挖掘 Mac 来设置网络以及实现这一点所需的嵌套虚拟化。

# mysql - symfony2 和学说 mysql 唯一约束错误信息

> ID：14212926
> 
> 赞同：2
> 
> 时间：2013-01-08T10:29:41.430
> 
> 标签：mysql, symfony, error-handling, doctrine-orm

如果此错误发生在 symfony2 中，您能否针对实体定义错误消息？

```
SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry 
```

我认为这是可能的，因为这个页面似乎暗示： [http ://symfony.com/doc/2.0/reference/constraints/UniqueEntity.html](http://symfony.com/doc/2.0/reference/constraints/UniqueEntity.html)

因此，当您尝试写入数据库时​​，错误会像任何其他约束错误一样回来吗？捕获此错误的唯一方法是控制器中的 try/catch 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:36:46.797

当您`symfony-forms`用于在控制器中执行所有基本 CRUD 操作时，不会发生该错误。

当您通过`AJAX`请求添加某物时，您需要使用`try{..}catch{..}`.

# c# - 在 .Net 中实现并行任务队列

> ID：14212931
> 
> 赞同：19
> 
> 时间：2013-01-08T10:30:07.883
> 
> 标签：c#, .net, multithreading, task-parallel-library

图像胜于雄辩，所以这基本上是我想要实现的目标：（
为了通用性和简单性，我还使用了水果类比）
![在此处输入图像描述](../Images/150de4e12ce17fbd0c4831717b834803.png)

过去我曾多次使用不同的 .Net 类之王（BackGroundWOrkers、ThreadPool、Self Made Stuff...）做过这种事情

我在这里询问是为了获得建议并获得有关如何有效地做到这一点的新想法。
这是一个高计算程序，所以我收到数百万（结构相似但内容不同）数据，这些数据必须排队才能根据其内容类型进行处理。因此，我想避免为每个要处理的单个数据创建一个并行任务（这会使 CPU 过载并且恕我直言设计不佳）。这就是为什么我想为每种数据类型只运行一个线程，专门用于处理它（知道“榨汁”方法是通用的并且独立于要压榨的水果）

欢迎任何想法和实施建议。
我可以自由提供任何进一步的细节。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-08T10:32:50.627

[TPL DataFlow](http://msdn.microsoft.com/en-us/devlabs/gg585582.aspx)似乎是一个非常强大的候选者。

[在这里阅读介绍。](http://www.microsoft.com/en-us/download/details.aspx?id=14782)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-08T13:48:13.287

如果您真正想要的只是每种水果都有一个线程（或恒定数量的线程），那么最简单的解决方案可能是[`BlockingCollection`](http://msdn.microsoft.com/en-us/library/dd267312.aspx)对每种水果使用一个。您的数据总线会将结果传递给这些集合，而您的处理线程将从它们中获取。但这意味着如果现在没有苹果，线程将被阻塞，什么都不做。

一种更灵活、更有效的方法是使用 TPL 数据流。这样，您就不用处理线程或任务，而是处理块。例如，您的线程 C 可以表示为`[TransformBlock](http://msdn.microsoft.com/en-us/library/hh194782)<Apple, AppleJuice>`.

默认情况下，每个块最多使用一个线程，但它们可以很容易地配置为使用更多线程（通过设置[`MaxDegreeOfParallelism`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.dataflow.executiondataflowblockoptions.maxdegreeofparallelism)）。此外，数据流块可以很好地与新的 C# 5.0 `async`-配合使用`await`，这可能是一个很大的优势。

还有一些事情你应该小心。例如，默认情况下，TDF 针对吞吐量而不是延迟进行了优化。因此，如果您的线程池很忙，并且您有很多橙子进入并且只有一个苹果，则可能只有在所有橙子都处理完之后才会处理苹果。但这也可以通过正确配置块（通过设置[`MaxMessagesPerTask`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.dataflow.dataflowblockoptions.maxmessagespertask)）来解决。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T14:24:07.490

我会警告不要使用“每种数据类型的工作线程”方法。这假设实际输入负载将符合开发人员方便的等价类。你知道香蕉榨汁的速度是否比橙子慢 5 倍？如果每个星期二都是“苹果庆祝日”，每个人都比平时榨出更多的果汁，而且全是苹果，会发生什么？

并行运行是关于性能的，而不是关于域的。不要在您的领域之后对其进行建模，而是对其进行建模以提供最低的平均周期时间。

# ios - 在 iPad 上实现自动完成

> ID：14212933
> 
> 赞同：0
> 
> 时间：2013-01-08T10:30:16.623
> 
> 标签：ios, ipad, autocomplete

**场景：**我有一个药物清单（存储在某个地方，比如说一个 NSArray）。

有一个 UITextField 用户可以在其中输入药物以获取有关它的更多信息（或其他信息）。

我想在他打字时建议单词完成（但这很容易）。

展示这些建议的最佳位置在哪里？因为它在 iPad 上，所以我希望它有点像当你用谷歌搜索时，你会在搜索栏下方得到你的建议。在 iPad 上可以吗？一个覆盖屏幕其余部分的表格，放置在文本字段下方？比如弹窗什么的？我以前从未真正使用过 iPad，因此我不知道 iOS 的方式会是什么..

**编辑：**类似这样的东西，但连接到文本字段而不是按钮或任何东西：

![在此处输入图像描述](../Images/f63c59319bda6e0c6dae20df8ef66ff3.png)

**编辑：**甚至更好：类似这样的东西，但适用于 iPad 而不是 Android：

![在此处输入图像描述](../Images/9bade6275c7982f49cffb60f753f08d1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:40:22.593

在我的应用程序中，我使用 a`UITableView`来显示建议。

我在我的`UITextField`. 当没有找到自动完成词时，我隐藏了 tableView。

请检查我的自动完成实现。

![自动完成](../Images/480cbca48d14028a8dd2f26b6127c86b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T19:48:47.597

查看我的控件，适用于 iOS 的[MLPAutoCompleteTextField](https://www.cocoacontrols.com/controls/mlpautocompletetextfield)。它是自动完成的 UITextField 的子类。

该实现类似于您在第二个屏幕截图中寻找的内容，并且非常可定制。

# c# - Treeview 复制到 RichtextBox 或打印

> ID：14212935
> 
> 赞同：0
> 
> 时间：2013-01-08T10:30:18.497
> 
> 标签：c#, treeview, richtextbox, rtf

我有一个 TreeView（目录树），喜欢将选中的（复选框）节点“复制”到 RichTextBox 或其他控件（最后需要打印）。

所以结果是一个可以打印的自定义树（文本和图标）。

这可能吗？

我在 Google 上找不到任何有用的信息！

（语言：C#）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:51:39.187

有什么问题？创建新的 TreeView 并将递归检查的节点从源 TreeView 复制到创建的节点。然后使用 Control.DrawToBitmap() 并打印获得的位图。例如：

```
void PrintNewTreeView()
{
    var pd = new PrintDocument();
    pd.PrintPage += OnPrintPage;
    pd.Print(); 
}

void OnPrintPage(object sender, PrintPageEventArgs e)
{
    var bitmap = new Bitmap(newTreeView.Bounds.Size);
    newTreeView.DrawToBitmap(bitmap, bitmap.Size);
    var pt = Point.Empty; // drawing origin
    e.Graphics.DrawImage(bitmap, pt);
} 
```

# git - 使用 gruntjs 作为预提交钩子

> ID：14212939
> 
> 赞同：9
> 
> 时间：2013-01-08T10:30:25.197
> 
> 标签：git, gruntjs, pre-commit-hook

有没有办法将 gruntjs 任务作为预提交钩子运行。例如，我想防止提交失败的测试或 jshint 问题。我还考虑为每次提交运行代码美化器。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-08T20:48:35.937

Git 挂钩只是在您执行诸如提交之类的操作时执行的脚本。它们可以包含您想要的任何编程语言。

触发咕噜声的例子：

```
#!/bin/sh
grunt 
```

将其保存在文件中：`.git/hooks/pre-commit`

如果 grunt 以高于 0 的错误代码退出，如果任何任务失败，它将阻止提交：

> 从这个钩子中退出非零会中止提交

* * *

阅读材料：[使用 git 预提交钩子的技巧](http://codeinthehole.com/writing/tips-for-using-a-git-pre-commit-hook/)

还有 git 文档：[8.3 自定义 Git - Git Hooks](http://git-scm.com/book/en/Customizing-Git-Git-Hooks)

> 与许多其他版本控制系统一样，Git 有一种方法可以在某些重要操作发生时触发自定义脚本。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-19T14:03:01.470

我最近遇到了同样的问题，并在[http://viget.com/extend/grunt-getting-started-with-git-hooks上详细介绍了更全面的 Grunt 解决方案](http://viget.com/extend/grunt-getting-started-with-git-hooks)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-27T13:28:45.653

我认为你应该看看[grunt-githooks](http://rhumaric.com/2013/11/introducing-grunt-githooks/)，这是一个很好的 Grunt 插件，它为你做了所有的魔法，让你可以轻松地从你的`Gruntfile.js`.

```
grunt.initConfig({
  githooks: {
    all: {
      // Will run the jshint and test:unit tasks at every commit
      'pre-commit': 'jshint test:unit',
    }
  }
}); 
```

（取自[https://github.com/wecodemore/grunt-githooks#defining-a-few-hooks](https://github.com/wecodemore/grunt-githooks#defining-a-few-hooks)的文档）

[在这里](https://github.com/wecodemore/grunt-githooks)找到 npm 上的模块。

# python - 如何为芹菜组中的子任务添加延迟？

> ID：14212944
> 
> 赞同：4
> 
> 时间：2013-01-08T10:30:45.763
> 
> 标签：python, django, celery

我的工作流程是这样的：我有一组子任务，每个任务应该以一定的间隔执行，但它们都不应该同时发生。

我试过这个：

```
celery.group(getting_a_page.s(user,x,page).countdown(x) for x in range(5)) 
```

但这没有用。

知道怎么做吗？文档上没有太多关于此的内容。根据文档，我可以延迟任务但不能延迟子任务。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T17:05:47.910

`Task.subtask()`具有以下参数：

*   task – 任务类/实例，或任务名称。
*   args -- 要应用的位置参数。
*   kwargs - 要应用的关键字参数。
*   options – 的附加选项`Task.apply_async()`。

Task.apply_async() 有选项：countdown 和 eta，可用于设置延迟

因此，您可以执行以下操作：

```
celery.group(getting_a_page.s(args=(user, x, page), countdown=X))
# where X is any number 
```

[在这里](http://docs.celeryproject.org/en/latest/reference/celery.html?highlight=subtask#celery.subtask)阅读更多

# jakarta-ee - jndi花纹和接缝2.3耳

> ID：14212949
> 
> 赞同：2
> 
> 时间：2013-01-08T10:31:00.470
> 
> 标签：jakarta-ee, jboss7.x, seam2

我正在尝试将我的 seam 2.2 应用程序迁移到 seam 2.3。

我正在使用一个包含多个模块的打包应用程序。

当我尝试加载页面时，出现以下错误：

```
Caused by: javax.naming.NameNotFoundException: AdmissionDAOImpl -- service jboss.naming.context.java.app.Cosara.AdmissionDAOImpl
at org.jboss.as.naming.ServiceBasedNamingStore.lookup(ServiceBasedNamingStore.java:97)
at org.jboss.as.naming.NamingContext.lookup(NamingContext.java:178)
at org.jboss.as.naming.InitialContext.lookup(InitialContext.java:123)
at org.jboss.as.naming.NamingContext.lookup(NamingContext.java:214)
at javax.naming.InitialContext.lookup(InitialContext.java:392) [rt.jar:1.6.0_37]
at org.jboss.seam.Component.instantiateSessionBean(Component.java:1407) [jboss-seam.jar:2.3.0.Final]
at org.jboss.seam.Component.instantiate(Component.java:1370) [jboss-seam.jar:2.3.0.Final]
at org.jboss.seam.Component.newInstance(Component.java:2186) [jboss-seam.jar:2.3.0.Final]
... 63 more 
```

我的 Jboss AS 7.1.1 服务器为我提供了以下 jndi 模式来定位 AdmissionDAOImpl。

```
java:global/Cosara/Cosara2IntDAO/AdmissionDAOImpl!be.ugent.cosara2.dao.AdmissionDAO
java:app/Cosara2IntDAO/AdmissionDAOImpl!be.ugent.cosara2.dao.AdmissionDAO
java:module/AdmissionDAOImpl!be.ugent.cosara2.dao.AdmissionDAO
java:global/Cosara/Cosara2IntDAO/AdmissionDAOImpl
java:app/Cosara2IntDAO/AdmissionDAOImpl
java:module/AdmissionDAOImpl 
```

我应该使用什么 JNDI 模式和 seam 来定位 EJB？这里我用过

```
java:app/#{ejbName} 
```

也试过

```
java:app/Cosara.jar/#{ejbName} 
```

上面的模式中是否有一些东西可以替换 Cosara.jar 以使其更通用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:40:12.693

应为每个组件定义 jndi 模式，如[https://community.jboss.org/blogs/marek-novotny/2011/07/29/seam-2-booking-example-on-jboss-as-7中所述](https://community.jboss.org/blogs/marek-novotny/2011/07/29/seam-2-booking-example-on-jboss-as-7)

# node.js - NodeJS 上的 ZMQ：捕获错误

> ID：14212950
> 
> 赞同：0
> 
> 时间：2013-01-08T10:31:05.293
> 
> 标签：node.js, try-catch, zeromq

我一直在使用 NodeJS 的 ZMQ 绑定一段时间，但我从未收到过这样的错误：

```
Error: Interrupted system call
    at Socket._ioevents (/path/node_modules/zmq/lib/index.js:144:22)
    at Socket._flush (/path/node_modules/zmq/lib/index.js:273:23) 
```

现在，我有一个创建拓扑的大系统。对我来说，考虑到这样的错误真的很难去看看拓扑的哪个节点搞砸了。这个想法是放置某种 try / catch 来捕获这个错误并记录它发生的位置。

有没有办法做到这一点？我认为以下代码不会起作用：

```
try {
    receiver.on('message', function(data){
        //do stuff  
    });
}
catch(e) {
    console.log("error " + e)
} 
```

由于我必须使用所有这些 try/catch 修改软件的很大一部分，我想确定这是否是捕获此类错误的正确方法（我几乎可以肯定不是）。

任何人都可以证实这一点？否则任何有经验的人都可以告诉我我收到的错误吗？

谢谢

编辑：经过快速测试，我可以确认 99% 这种方法不起作用。有没有一种方法可以让我知道该错误的来源？

第二次编辑：我发现这个问题可能与 ZMQ 从 2.0 版升级到 2.1 版有关。这是更改日志[http://www.zeromq.org/docs:2-1-upgrade](http://www.zeromq.org/docs:2-1-upgrade)的链接，而以下是我最关心的部分：

```
In 2.0, ZeroMQ would ignore any interrupted system calls, which meant that no ZeroMQ
call would ever return EINTR if a signal was received during its operation. This caused
problems with loss of signals such as SIGINT (Ctrl-C handling), especially for language
runtimes. In 2.1, any blocking ZeroMQ call such as zmq_recv[3] will return EINTR if it
is interrupted by a signal. 
```

那么有人知道如何包装我的阻塞调用来处理`EINTR`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:14:57.863

我认为您的 try-catch 块仅包装了回调本身的注册。因此，当实际引发异常时，没有 try-catch 来处理它。它应该看起来像

```
receiver.on('message', function(data){
    try {
        //do stuff
    }
    catch(e) {
        console.log("error " + e);
    }  
}); 
```

事实上，任何使用 ZMQ 调用的代码都应该用 try-catch 包装，因为它会引发异常。你可以在 GitHub 上检查自己。我认为你的特殊例外可能会在[这里](https://github.com/JustinTulloss/zeromq.node/blob/master/binding.cc#L344)提出，但不是 100% 确定；-)

希望它有所帮助，干杯;-)

# git - 合并两个分支以创建新分支

> ID：14212954
> 
> 赞同：13
> 
> 时间：2013-01-08T10:31:27.880
> 
> 标签：git, version-control

我们有几家分店...

*   `master`是我们的开发分支。
*   `feature-newfeature`是一项新功能。
*   `feature-tempfeature`是我们的产品团队在创建新功能之前要求的新功能。`feature-newfeature`是不久前开始的，尚未合并`master`（但还有其他更改`master`）。

我们现在被指示放置这个临时功能，其中需要所有更改`master`- 所以它是一个可发布的构建 - 但也需要我们一直在研究的一些东西`newfeature`（正如他们所说“你可以重用一些东西你已经完成了”）。

这样做最好怎么做？我是`feature-tempfeature`从`master`分支创建的。`feature-newfeature`还没有完成，我不想将它合并到master中。

我不想只使用`feature-newfeature`其中任何一个，因为我们希望能够继续并行处理。

你会如何在你的开发环境中解决这个问题？

非常感谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-08T10:36:54.457

分支只是特定提交的别名。因此，您可以拥有多个实际指向同一个提交的分支。因此，您可以做的是创建一个新分支，该分支`newBranch`指向与 master 相同的提交，然后合并`feature-tempfeature`到`newBranch`. 效果与合并到 master 相同，只是 master 保持不变。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T10:47:13.923

From my understanding your scenario is:

```
---master----
\___tempf____
\___newf_____ 
```

**Your problem:** You need `tempf` with changes of `master` as well as `newf` so

**Solution:**

1) Stash your unsaved changes in `tempf` with `$ git stash`

2) Merge master with tempf and merge newf with tempf to have the changes of the both master and newf

3) Stash pop your changes with `$ git stash pop`

And as @MaxLeske said, branches are just aliases, they serve just like pointer to a commit but are not the commits themselves.

# ios - UIWebView 上的长按手势

> ID：14212957
> 
> 赞同：0
> 
> 时间：2013-01-08T10:31:47.890
> 
> 标签：ios, uigesturerecognizer

那里。

我在 self.view 中添加了一个长按手势，但遗憾的是，这个手势每次被识别时都会触发不止一次。代码已列出。每次识别手势时，都会出现 2 个操作表。

```
 - (void)viewDidLoad
      {
         [super viewDidLoad];
         UILongPressGestureRecognizer *longPress = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(handleLongPress:)];
         longPress.numberOfTouchesRequired = 1;
         [self.view addGestureRecognizer:longPress];
      }

    -(void)handleLongPress:(UILongPressGestureRecognizer *)gesture
     {
        UIActionSheet *action = [[UIActionSheet alloc] initWithTitle:@"Title" delegate:nil cancelButtonTitle:@"Cancel" destructiveButtonTitle:nil otherButtonTitles:@"Hello",nil];
        [action showInView:self.view];
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:46:20.557

好吧，我想我应该只关心动作方法中手势的开始状态：

```
-(void)handleLongPress:(UILongPressGestureRecognizer *)gesture
{
   if (gesture.state == UIGestureRecognizerStateBegan) {
      UIActionSheet *action = [[UIActionSheet alloc] initWithTitle:@"Title" delegate:nil cancelButtonTitle:@"Cancel" destructiveButtonTitle:nil otherButtonTitles:@"Hello",nil];
      [action showInView:self.view];
   }
} 
```

# ruby-on-rails - ruby 1.9.3-p194 rails 3.2.9 BigDecimal to_f 总是输出 0.0

> ID：14212962
> 
> 赞同：0
> 
> 时间：2013-01-08T10:31:54.230
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2, bigdecimal

大约从上周开始，我通常工作的 Rails 项目开始在 BigDecimal.to_f 方面表现不佳。调用 to_f 时，每个 BigDecimal 数字都将输出为 0.0：

```
~/development/rails_project> rails c
Loading development environment (Rails 3.2.9)
1.9.3p194 :001 > BigDecimal.new('5').to_f
 => 0.0 
```

我一直在运行 Ruby 1.9.3 补丁级别 194 和 Rails 3.2.9。一些也使用相同版本从事同一个项目的同事没有这个问题。

还尝试了 Ruby 1.9.3 补丁级别 362，结果相同。有没有人遇到过同样的问题并且知道如何克服它？

谢谢。

编辑：

我的问题不在于 to_s 函数，而在于 to_f。我可能过于简化了，因为我的问题是 number_to_currency：

```
~/development/rails_project> rails c
Loading development environment (Rails 3.2.9)
1.9.3p194 :001 > include ActionView::Helpers::NumberHelper
 => Object 
1.9.3p194 :002 > BigDecimal.new('5').to_s('F')
 => "5.0" 
1.9.3p194 :003 > BigDecimal.new('5').to_s
 => "5.0" 
1.9.3p194 :004 > BigDecimal.new('5').to_f
 => 0.0 
1.9.3p194 :005 > number_to_currency(5)
 => "€ 0,00" 
```

通过一些调试，我将其缩小到`number_with_precision`方法，更准确地说是：

```
rounded_number = BigDecimal.new(number.to_s).round(precision).to_f 
```

如果我输出这一行的不同部分，我会得到以下结果：

```
number = 5.0
number.to_s = "5.0"
precision = 2
BigDecimal.new(number.to_s) = 5.0
BigDecimal.new(number.to_s).round(precision) = 5.0
BigDecimal.new(number.to_s).round(precision).to_f = 0.0 
```

有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:41:30.673

只是在黑暗中拍摄：这可能是 Ruby/Rails 控制台的依赖于区域设置的格式问题。

尝试这个：

```
BigDecimal.new('5').to_s('F')  # Should be "5.0"
BigDecimal.new('5').to_i       # Should be 5 
```

如果这输出了预期的结果，那么这只是控制台的格式问题。该`to_f`方法实际上返回了正确的结果，但是控制台`to_s`在结果上调用了另一个方法来打印它。在这种情况下，您也应该能够使用 重现问题`5.to_f`。

# javascript - 从 StringBuilder(vb.net) 调用函数

> ID：14212964
> 
> 赞同：2
> 
> 时间：2013-01-08T10:32:00.627
> 
> 标签：javascript, jquery, vb.net

如何从`stringBuilder`VB.Net 中调用 javascript 中的函数？

代码：

```
oSB.Append("<table id= '" + table_id + "' class='sortable' ><thead><tr><th           class=border onclick='sort()'>" + "Name" + "</th><th class=border>" + "Duration" + "</th><th class=border>" + "State" + "</th><th class=border>" + "Party" + "</th><th class=border>" + "Year" + "</th></tr></thead>") 
```

这是一个正确的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:35:41.900

`onclick`您应该通过 javascript/jQuery 分配处理程序，而不是使用过时的属性。这有助于更好地分离关注点。

首先`onclick="sort()"`从你的代码中删除，并将这个 jQuery 代码添加到页面中：

```
$(".sortable th:first").click(function() {
    // do something...
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T10:36:38.177

您可以删除内联`onclick`事件..并改用jquery`click`事件

```
$(".sortable th:first").click(function() {
   // do your stuff
}); 
```

# vba - 使用 VBA 宏在 excel 行中搜索字符串的完全匹配

> ID：14212967
> 
> 赞同：8
> 
> 时间：2013-01-08T10:32:04.480
> 
> 标签：vba, excel

如何在excel中的一个特定行中搜索字符串？我在长类型变量中有行索引。

```
Dim rowIndex As Long
rowIndex = // some value being set here using some code. 
```

现在我需要检查行中是否存在特定值，其索引是 rowIndex。

如果匹配，我需要获取第一个匹配单元格的列索引。

我曾尝试使用 Match 函数，但我不知道如何传递 rowIndex 变量来代替单元格范围。

```
Dim colIndex As Long    
colIndex = Application.Match(colName, Range("B <my rowIndex here>: Z <my rowIndex here>"), 0) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-08T10:45:30.663

试试这个：

```
Sub GetColumns()

Dim lnRow As Long, lnCol As Long

lnRow = 3 'For testing

lnCol = Sheet1.Cells(lnRow, 1).EntireRow.Find(What:="sds", LookIn:=xlValues, LookAt:=xlPart, SearchOrder:=xlByColumns, SearchDirection:=xlNext, MatchCase:=False).Column

End Sub 
```

可能最好不要使用 colIndex 和 rowIndex 作为变量名，因为它们已经在 Excel 对象库中提及。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T11:05:06.573

这不是您已经帮助自己的另一个代码；但是让您看看在 VBA 中使用 Excel 函数时的**性能。**

*   [`Match()`对于较少数量的搜索来说更快，但与大量数据相比却不是这样。在那种情况下，您可以考虑一种`variant array/dictionary/arrayList`方法，具体取决于您是否要排序，是否要重复。](http://fastexcel.wordpress.com/2011/10/26/match-vs-find-vs-variant-array-vba-performance-shootout/)

*   [匹配错误处理](https://stackoverflow.com/questions/14188010/vba-application-match-error-2015)

PS：**在后面的说明中，如果您愿意，`pattern matching`可以考虑`ScriptingObject **Regex`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T10:39:36.477

使用 worksheet.find （工作表是您的工作表）并将行范围用作其范围对象。您可以获得 rangeobject，例如：worksheet.rows(rowIndex) 作为示例

然后给出 find 所需的参数，它应该可以为您找到它。如果我没记错的话， find 默认返回第一个匹配项。我手头没有Excel，所以你必须自己查找，对不起

我建议不要使用 for 循环，它比 find 更脆弱且老化更慢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T10:43:17.850

没关系，我找到了答案。

这会成功的。

```
Dim colIndex As Long    
colIndex = Application.Match(colName, Range(Cells(rowIndex, 1), Cells(rowIndex, 100)), 0) 
```

# java - 尽管提供了 WRITE_EXTERNAL_STORAGE 权限，但 File.canWrite() 在某些设备上返回 false

> ID：14212969
> 
> 赞同：2
> 
> 时间：2013-01-08T10:32:10.747
> 
> 标签：java, android

尽管提供了权限，但 File.canWrite() 在某些设备上返回 false。

在我的应用程序中，我需要将数据写入外部 SD 卡。然而，这在某些设备上有效，但在其他一些设备上失败。例如作品：Limebox Internal Flash, SDCard, android OS: 2.3.3 Samsung Sdcard, extSdcard, android OS: 4.0.3

失败：Leoxys sdcard，extsd android OS：4.0.3

如何动态找出 Android 兼容设备，即允许外部 SD 卡写入操作的设备。我的文件.canWrite

详细信息：getExternalSD() 是一个用户定义的函数，它将返回外部 sdcard 路径

在我的情况下，外部 SD 卡路径是“/mnt/extSdcard”（或）“/mnt/extsd”我通过读取文件“/system/etc/vold.fstab”来找到外部 SD 卡路径

这是一些代码片段：它在外部 sdcard 中创建一个文件夹。在某些设备上，myfile.canWrite() 返回 False，我无法创建文件夹。

```
String sdcardpath = getExternalSD();
    System.out.println("the sdcard path is:"+sdcardpath.trim().toString());
    tv = (TextView) findViewById(R.id.textView1);
    tv.append("the sd card path is:"+sdcardpath);

    File myfile = new File(sdcardpath);
    tv.append("\n the extsd is readable or not:"+myfile.canRead());
    tv.append("\n \n the extsd is writable or not:"+myfile.canWrite());
    if(myfile.canWrite()){
        File testfile = new File(sdcardpath, "test");
        if(testfile.exists()){

        }else{
            boolean mkdir = testtlie.mkdirs();
            if(mkdir == true){
            tv.append("\n\n the path is:"+sdcardpath.trim().toString()+"/myfile");
            }else{
                tv.append("\n File does not have permissions");
            }
        }

    }else{
        System.out.println("the external sd card does not have write permissions");
        tv.append("\n\n the external sd card does not have write permissions");
    } 
```

xml 文件片段。

```
<uses-sdk android:minSdkVersion="8" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.INTERNET"/> 
```

我想得到关于
a的建议。是否有任何 API 可以让开发人员知道设备是否真正兼容 Android？
湾。为什么不同硬件设备上的行为存在差异。这与固件有关吗？
C。有没有其他方法可以在这种硬件上实现写入？

我已经尝试使用终端模拟器修改 /system/etc/premissions/ 下文件“platform.xml”的权限但我无法以写入模式打开文件

默认情况下，android 提供 Environment.getEnternalStorageDirectory()。但是该库返回“/mnt/sdcard”，这将是某些设备的内部存储器。

您的意见将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T12:51:23.130

> 尽管提供了权限，但 File.canWrite() 在某些设备上返回 false。

那是因为您尝试做的事情没有许可。

> 在我的应用程序中，我需要将数据写入外部 SD 卡

Android 应用程序不一定可以访问“外部 SD 卡”。并非所有设备*都具有*“外部 SD 卡”。因此，你的“需要”是有缺陷的，需要被替换。

> 如何动态找出 Android 兼容设备，即允许外部 SD 卡写入操作的设备。我的文件.canWrite

你没有。

> 在我的情况下，外部 Sdcard 路径是“/mnt/extSdcard”（或）“/mnt/extsd”

对于某些固件版本，这些路径可能存在于某些设备上。是否有“外部 SD 卡”取决于设备制造商。是否安装，如果安装，安装时间取决于设备制造商。权限是由设备制造商决定的。这些答案可能随时在任何设备上通过固件升级而改变。

> 我通过读取文件“/system/etc/vold.fstab”来查找外部 sdcard 路径

这比随机猜测要好得多，但您已经远远超出了 Android SDK 的范围。

> 在某些设备上，myfile.canWrite() 返回 False，我无法创建文件夹。

当然。

> 默认情况下，android 提供 Environment.getEnternalStorageDirectory()。

这将返回一个`File`指向外部存储的指向——如果用户在设备和主机之间连接 USB 电缆并将外部存储安装为驱动器或卷，则用户将可以访问的内容。

> 一个。是否有任何 API 可以让开发人员知道设备是否真正兼容 Android？

您要做的不是“真正与 Android 兼容”。这些设备很好——你的期望不是。请修正你的期望。

> 为什么不同硬件设备上的行为存在差异。

Android SDK 范围之外的任何内容都取决于设备制造商。他们可以做他们想做的事。

> 有没有其他方法可以在这种硬件上实现写入？

没有什么是可靠的。只需使用官方外部存储（例如，getExternalFilesDir()）。或者，构建您自己控制的 ROM 模块，这样您就可以指定存在哪些非标准挂载点以及它们的读/写权限是什么，并在您希望和可以使用的任何设备上使用该 ROM 模块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T11:08:01.210

感谢 Commonsware、Maver1ck 的意见和建议。

> Android 应用程序不一定可以访问“外部 Sd 卡”。并非所有设备都具有“外部 Sd 卡”。因此，您的“需要”是有缺陷的，需要更换

有问题的 Android 应用程序是针对特定需求的自定义应用程序，并非典型的 android 市场应用程序。此应用程序从网络服务器获取数据并将其存储到外部 SD 卡中。由于数据量很大，手机内存太小了。

> 没有什么是可靠的。只需使用官方外部存储（例如，getExternalFilesDir()）。或者，构建您自己控制的 ROM 模块，这样您就可以指定存在哪些非标准挂载点以及它们的读/写权限是什么，并在您希望和可以使用的任何设备上使用该 ROM 模块。

我将研究 ROM 模块并进一步研究这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T12:05:09.283

对于您的问题 b：因为（不幸的是）Android 上仍然没有真正的标准化，API 可能因制造商而异，您经常会遇到特定于设备的问题。一个很好的例子是在三星 2.3.x 设备上返回 null 的 getData() 方法。

`Environment.getEnternalStorageDirectory()`- 我想这只会在没有 sd 卡的设备上返回内部存储器目录，所以我在那里看不到问题。

# java - 打印首选项节点的子节点

> ID：14212971
> 
> 赞同：1
> 
> 时间：2013-01-08T10:32:15.183
> 
> 标签：java, oracle, registry

我想打印首选项节点的子节点。我写了以下代码：

```
private void printOracleDefaults() {
    Preferences p = Preferences.userRoot();
    p = p.node("/HKEY_LOCAL_MACHINE/SOFTWARE/ORACLE");
    try {
       for(String s : p.childrenNames())
          System.out.println(s);
    } catch (BackingStoreException e) {
       //bla bla..
       e.printStackTrace();
    }
} 
```

上面的方法不打印任何东西，虽然 ORACLE 有子：

![甲骨文的孩子](../Images/892caae890e3f18c7490c87fc2ec93ef.png)

我在做什么错或误解？

**更新：**

我写`p = p.node("HKEY_LOCAL_MACHINE/SOFTWARE");`

代替

`p = p.node("HKEY_LOCAL_MACHINE/SOFTWARE/ORACLE");`

当我打印我的孩子时，`p`我得到：`ORACLE`！这怎么可能？那么所有其他孩子呢？（有..我通过注册表编辑器看到它们）

看起来它正在存储先前运行的先前值，这些值附加在`/SOFTWARE`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:40:57.193

我认为你应该使用`Preferences.systemRoot()`而不是`Preferences.userRoot()`这里。后者映射到 HKEY_CURRENT_USER。

对于 Windows，路径应该是`HKEY_LOCAL_MACHINE\SOFTWARE\ORACLE`，然后你在 String 中转义它，如`HKEY_LOCAL_MACHINE\\SOFTWARE\\ORACLE`.

注意：我自己没有尝试过。

# matlab - 在 MATLAB 中查找 N 维数组中的所有邻居

> ID：14212974
> 
> 赞同：1
> 
> 时间：2013-01-08T10:32:17.890
> 
> 标签：matlab

如何在 MatLab 的 N 维数组中找到元素的所有邻居？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T11:15:29.830

如果您有坐标，只需向所有方向前进 1 和 1 后退（如果可能）。如果您还想要对角线邻居，您还必须尝试所有组合 1 前进、1 后退或 0 前进（当然除了所有方向的 0）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:35:34.900

Look at the code [for computing adjacency matrix](http://www.wisdom.weizmann.ac.il/~bagon/matlab.html#adjacency). It computes neighbors for all entries in arbitrary dimensions.

**EDIT:**

You may want to explore Matlab's [`conndef`](http://www.mathworks.com/help/images/ref/conndef.html) as well.

# android - 在将 android 手机应用程序转换为平板电脑时更改方向

> ID：14212978
> 
> 赞同：1
> 
> 时间：2013-01-08T10:32:33.170
> 
> 标签：android, android-layout, android-orientation

我正在将 android 手机应用程序转换为平板电脑（1024*600 和 1280*720）。我已经支持不同的屏幕尺寸，但停留在方向部分。我希望某些页面以横向可见。例如，用户登录后，下一个意图应该是横向形式。搜索后我找到了线索但不是很容易理解的答案，例如

1.  通过在 manifest.xml 文件中添加活动

2.  在运行时使用 getOrientation()。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:59:41.777

问题尚不清楚，如果您要按尺寸强制屏幕方向（例如，在平板设备上只有横向方向），我认为您应该先获取屏幕宽度和高度，然后再评估它。如果屏幕宽度和高度为 1024*600 或 1280*720，则使用`setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);`

要获取宽度和高度，请在您的活动中执行以下操作：

```
Display display = getWindowManager().getDefaultDisplay();
int width, height;
try {
    Point size = new Point();
    display.getSize(size);
    width = size.x;
    height = size.y;
}
catch (NoSuchMethodError e) {
    width = display.getWidth();
    height = display.getHeight();
} 
```

看到[这个](https://stackoverflow.com/questions/1016896/android-how-to-get-screen-dimensions)

# mysql - MYSQL：错误 1054（42S22）：'from 子句'中的未知列'id_employee'

> ID：14212981
> 
> 赞同：3
> 
> 时间：2013-01-08T10:32:51.187
> 
> 标签：mysql

我有两张桌子。

i) order_details：

> ```
> CREATE TABLE `order_details` (
>   `id` INT(11) NOT NULL AUTO_INCREMENT,
>   `content` text,
>   `id_employee` INT(11) DEFAULT NULL,
>   PRIMARY KEY (`id`),
>   KEY `FK_id_employee` (`id_employee`),
>   CONSTRAINT `FK_id_employee` FOREIGN KEY (`id_employee`) REFERENCES `employees` (`id`)
> ) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=latin1; 
> ```

ii) 雇员：

```
 CREATE TABLE `employees` (   `id` INT(11) NOT NULL AUTO_INCREMENT,   `firstname` text NOT NULL,   `lastname` text NOT NULL,   `salary` FLOAT DEFAULT NULL,   PRIMARY KEY (`id`) ) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=latin1 ; 
```

我想获取员工 3 负责的订单的名字、姓氏和详细信息。我用这个：

```
SELECT lastname, firstname, content FROM order_details INNER JOIN employees USING (id_employee) WHERE id_employee = 3; 
```

但我收到此错误消息：`ERROR 1054 (42S22): Unknown column 'id_employee' in 'from clause'`并且不知道它来自哪里:(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T10:35:32.750

使用时`USING`列的名称在两个表中必须相同。您没有`id_employee`在`employee`表中。所以你应该使用它来代替它使用`ON`条件来连接两个表：

```
SELECT e.lastname, e.firstnam, o.content 
FROM order_details o
INNER JOIN employees e
  ON  o.id_employee = e.id 
WHERE o.id_employee = 3; 
```

来自[MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/join.html)：

> USING(column_list) 子句命名必须存在于两个表中的列列表。如果表 a 和 b 都包含列 c1、c2 和 c3，则以下连接将比较两个表中的对应列

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T10:35:20.077

`order_details`确实有一个`id_employee`列，但员工表没有。利用

```
SELECT lastname, firstnam, content
FROM order_details od
INNER JOIN employees e on od.id_employee = e.id
WHERE od.id_employee = 3; 
```

为了加入不同的列名。`using`如果两个表中的列名相同，则可以使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T10:35:04.490

您正在通过 USING ( **id_employee** ) 加入，但这在您的员工表中不存在。所以加入员工ID

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T12:27:20.353

如果对缺少的列有疑问，请检查您在创建表时输入的内容

```
SHOW CREATE TABLE table_name 
```

或只查看表格的列

```
 DESC table_name 
```

这在调试此类错误时会很有帮助。

# three.js - 从灰度到 RGBA 的自定义深度着色器

> ID：14212984
> 
> 赞同：0
> 
> 时间：2013-01-08T10:32:55.483
> 
> 标签：three.js, webgl, shader

我必须在这个顶点着色器/片段着色器中从简单的灰度深度更改为 RGBA 编码深度，尤其是显示 ChromaDepth(tm)-color-scheme 而不是灰度？ [http://www.chromatek.com/pix/101color.jpg](http://www.chromatek.com/pix/101color.jpg)

```
<script id="vert" type="webgl/fragment-shader">
    uniform float near;
    uniform float far;
    varying vec3 color;

    void main() {
        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
        float depth = 1.0 - ((gl_Position.z - near) / (far - near));
        color = vec3(depth);
    }  
</script>
<script id="frag" type="webgl/fragment-shader">
    varying vec3 color;

    void main() {
        gl_FragColor = vec4(color, 1.0);
    }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:49:22.837

您正在输出行中的颜色`color = vec3(depth)`。函数 vec3 的这个变体创建了一个向量，其中所有 3 个部分都等于输入值。您也可以使用它来创建一个 3 部分向量：`color = vec3(red, geen, blue)`. 当您还想将 alpha 值传递给片段着色器时，您必须将其更改为 vec4(red, green, blue, alpha)，并且还要在顶点着色器和片段着色器中更改`varying vec3 color`to的声明。`varying vec4 color`

ChromaDepth 用于从深度计算正确的红色、绿色和蓝色值的算法在[此处](http://www.chromatek.com/algorithm.htm)发布。这是相关部分：

```
//Definition of 3d_red component of the color. The value show be between 1
//and 0 over the Range of 0 to 0.75\. It should be 0 for all Ranges greater
//than 0.75\. From 0 to 0.75 it is calculated by Red_func.
define Red_Range Range/0.9
define Red_func 
(-2.13*Red_Range^4-1.07*Red_Range^3+0.133*Red_Range^2+0.0667*Red_Range+1)
define Cc (Red_func <0 || Red_Range>0.75 ? 0:1)
define Dd (Red_func >1 ? 1:0)
define 3d_red (Red_Range<0.75 ? Red_func:Cc*Dd)

//Definition of 3d_green component of the color. The value should be between
//0 and 1 over the Range of 0 to 1, starting from 0, rising to 1, then falling
//to 0 again. It should be 0 at both extremes of Range.
define Green_func1 (1.6*Range^2+1.2*Range)
define Green_func2 (3.2*Range^2-6.8*Range+3.6)
define 3d_green (Range<=0.5 ? Green_func1:Green_func2)

//Definition of 3d_blue component of the color. The value should rise from
//0 at a Range of 0.5 up to 1 at a Range of 1\. Below Range 0.5 the value
//must be 0.
define Blue_func (-4.8*Range^2+9.2*Range-3.4)
define 3d_blue (Range>0.5 ? Blue_func:0) 
```

这些函数的输入值是“范围”，也就是您在代码中所说的“深度”（0.0 最接近，1.0 最远）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T16:09:41.430

谢谢菲利普。这是我的实现：

```
<script id="vert" type="webgl/fragment-shader">
        uniform float near;
        uniform float far;
        varying vec3 color; 

        float func_r(float r_range)
        {  
          float r_depth = (-2.13*r_range*r_range*r_range*r_range-1.07*r_range*r_range*r_range+0.133*r_range*r_range+0.0667*r_range+1.0);
            return r_depth;
        }

        float func_g1 (float g_range)
        {
          float g_depth = (1.6*g_range*g_range+1.2*g_range);
          return g_depth;
        }

        float func_g2 (float g_range2)
        {
          float g_depth2 = (3.2*g_range2*g_range2-6.8*g_range2+3.6);
          return g_depth2;
        }

        float func_b (float b_range)
        {
          float b_depth = (-4.8*b_range*b_range+9.2*b_range-3.4);
          return b_depth;
        }

        void main() {
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
            float depth = 0.0 + ((gl_Position.z - near) / (far - near));

            /* ### Definition of 3d_red component of the color.*/
            float Red_Range = depth / 0.9;
            float Cc = (func_r(Red_Range) < 0.0 || Red_Range > 0.75 ? 0.0:1.0);
            float Dd = (func_r(Red_Range) > 1.0 ? 1.0:0.0);  
            float calc_r = (Red_Range < 0.75 ? func_r(Red_Range) : Cc*Dd); 

            /* ### Definition of 3d_green component of the color.*/            
            float calc_g = (depth <= 0.5 ? func_g1(depth) : func_g2(depth));

            /* ### Definition of 3d_blue component of the color.*/                      
            float calc_b = (depth > 0.5 ? func_b(depth) : 0.0);

            color = vec3(calc_r,calc_g,calc_b);
        }  
    </script>
    <script id="frag" type="webgl/fragment-shader">
        varying vec3 color;

        void main() {
            gl_FragColor = vec4(color, 1.0);
        }
    </script> 
```

# .net - 多线程从哪里开始？

> ID：14212985
> 
> 赞同：1
> 
> 时间：2013-01-08T10:33:03.193
> 
> 标签：.net, multithreading

我一直在对多线程进行一些研究，并且看到有很多不同的方法可以做到这一点。

线程，任务，线程池等

我正在使用 .net4 并制作一个简单的 Windows 应用程序，该应用程序基本上具有与网页交互的方法。我需要做的只是非常基本的：

*   单击时，同时运行方法 A、X 次数（X 由我指定，可能会有所不同）。

我很困惑我应该进一步研究哪种多任务处理方法来实现这一点，我不想开始学习许多目前还不能满足我需求的不同方法！

抱歉，如果这不符合 SO 的精神，我真的很想深入了解多线程，我什至不知道从哪里开始！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:34:41.547

当您使用 .NET 4 时，一个不错的起点是[Task Parallel Library](http://msdn.microsoft.com/en-us/library/dd460717%28v=vs.100%29.aspx)。TPL 和 TPL 实际上是相同的`ThreadPool`，但 TPL 使执行异常处理/取消等事情变得更容易。

除非你*真的*必须这样做，否则我会避免创建专用线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T10:44:56.360

我不同意 James，如果您想要尽可能简单和快速的结果（就开发时间而言），我会根据需要创建尽可能多的线程（实例`System.Thread`类并设置要执行的方法）并执行请求的方法。

这是一种快速而肮脏的解决方案，需要较少的开发工作。

否则，如果您希望以正确的方式完成工作，那么 TPL 是正确的方法，但不知何故，我从您的问题中感觉到您正试图快速完成简单的事情。

# java - Android：如何轻松更改 strings.xml 中的大量字符串名称？

> ID：14212986
> 
> 赞同：0
> 
> 时间：2013-01-08T10:33:02.603
> 
> 标签：java, android, eclipse, string, refactoring

假设我有 1000

```
<string name="somename">Some string</string> 
```

在我的 strings.xml 文件中。

我如何看到 name 属性需要更改为对许多这些条目有意义的东西。

在 eclipse 或任何其他工具中是否有一种简单的方法可以做到这一点？还是我必须编写自己的工具才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:57:51.717

有很多工具可以做到这一点，我通常借助 Notepad ++，如果你想将所有 1000 个名称更改为一个名称，

否则，我使用 XMLBeans 编写一个程序来根据某些逻辑更改属性。这花费的时间非常少，并且可以在将来出现这种需要时重复使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T10:40:44.077

只需使用任何编辑器的替换功能（在大多数编辑器中也适用于多个文件，以防您有多个 xml）。

**根据您的要求，将name="somename"**替换为**name="othername"**或**name=**为**newAttrName=**。

如果您担心在其他地方会遇到您不想更改的相同字符串（例如注释），我认为您需要编写自己的逻辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T10:46:28.197

您可以安装适用于 Android 的 MOTODEV Studio。它有很多东西，包括 Android 本地化文件编辑器

[这](http://www.motorola.com/sites/motodev/us-en/motodev_lp.html)是那个链接。希望它会有所帮助。

# sql-server - 使用 sp_MSforeachtable 的语法错误

> ID：14212987
> 
> 赞同：1
> 
> 时间：2013-01-08T10:33:04.073
> 
> 标签：sql-server, tsql, sql-server-2000

我计划在 sql server 2000 中获取所有表及其总行数。

我为此做了：

```
sp_msforeachtable 'select count(*) from ?' 
```

在这个列标题中没有提到，因为它无法区分哪个行数属于哪个表

为此我改变了这个：

```
sp_msforeachtable 'select count(*) as ? from ?' 
```

但它抛出一个错误：

```
Msg 170, Level 15, State 1, Line 1
Line 1: Incorrect syntax near '.'. 
```

你能指导一下吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T10:36:32.393

尝试这个：

```
SELECT
    sysobjects.Name, sysindexes.Rows
FROM
    sysobjects
    INNER JOIN sysindexes
    ON sysobjects.id = sysindexes.id
WHERE
    type = 'U'
    AND sysindexes.IndId < 2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T10:37:34.237

我想我明白了：

```
exec sp_MSforeachtable 'select count(*) as nr_of_rows, ''?'' 
  as table_name from ?' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T10:39:10.460

试试这个：

```
sp_MSforeachtable 'select ''?'' Tablename, count(*) ''Rows'' from ?' 
```

# android - 数据库插入

> ID：14212989
> 
> 赞同：1
> 
> 时间：2013-01-08T10:33:06.930
> 
> 标签：android

在我的应用程序中，我想从编辑文本中获取密码，并且我想将其存储在按钮单击的数据库中

在我的主要活动中，我得到了密码值，代码是..

```
 db_obj = new OpenHelper(getApplicationContext()) {};  
      okBtn = (Button)findViewById(R.id.okbtn);
      passwordTxt = (TextView)findViewById(R.id.editText1);
      passwordTxtValue = passwordTxt.getText().toString();

     okBtn.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            String id1 = Integer.toString(id);
              passwordTxtValue = passwordTxt.getText().toString();
              Toast.makeText(SetteingsPage.this, passwordTxtValue, Toast.LENGTH_SHORT).show();
              System.out.println("pa"+passwordTxtValue);

              db_obj.password_varification(id1, passwordTxtValue);

        } 
```

在 openHelper 中，我将数据库创建为...

```
static final String password_table = "password_db";
static final String table_id = "table_id";
static final String password = "password";

  public void onCreate(SQLiteDatabase db) 
{
    db.execSQL("CREATE TABLE "+password_table+"("+table_id+" INTEGER PRIMARY KEY, "+password+" TEXT)");

}

 public void password_varification(String tableid ,String paswrd ) 
{
    SQLiteDatabase db=this.getWritableDatabase();
    ContentValues cv=new ContentValues();

     cv.put(table_id, tableid);
     cv.put(password, paswrd);

     db.insert(password_table, table_id, cv);

     db.close();
     Log.v("DB", "Inset_User OK" + tableid + " " + paswrd); 
}
 // password Data retrive here
public ArrayList<HashMap<String, String>> password_records() 
{
     SQLiteDatabase db=getReadableDatabase();
     ArrayList<HashMap<String, String>> list = new ArrayList<HashMap<String, String>>();

     Cursor cursor=db.rawQuery("SELECT "+table_id+" as _id,  "+password+" from "+password_table,new String [] {});
    //Cursor cursor=db.rawQuery("SELECT "+row+" as _id, "+twitter+" from "+winery_info_2,new String [] {});

         if(cursor!=null)             
         {
             if(cursor.moveToFirst())  // movies first column 
             {
                 do
                 {
                     HashMap<String, String> map = new HashMap<String, String>();

                     String  fnam        = cursor.getString(cursor.getColumnIndex("password"));

                     map.put (password      ,fnam);

                     list.add(map);
                 }
                 while(cursor.moveToNext()); // move to next row

             }
         }

         if (cursor != null && !cursor.isClosed()) 

         {
            cursor.close();
         }

         return list;
   } 
```

但是当我尝试插入值时，它仍然显示“没有这样的表”的错误......我该如何解决它

logCat 输出是

```
 01-08 16:06:33.273: E/Database(12305): Error inserting password_db
  01-08 16:06:33.273: E/Database(12305): android.database.sqlite.SQLiteException: no            such table: password_db: , while compiling: INSERT INTO password_db(table_id, password) VALUES(?, ?);
 01-08 16:06:33.273: E/Database(12305):     at       android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
01-08 16:06:33.273: E/Database(12305):  at   android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:92)
01-08 16:06:33.273: E/Database(12305):  at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:65)
 01-08 16:06:33.273: E/Database(12305):     at android.database.sqlite.SQLiteProgram.  <init>(SQLiteProgram.java:83)
 01-08 16:06:33.273: E/Database(12305):     at android.database.sqlite.SQLiteStatement.<init>(SQLiteStatement.java:41)
 01-08 16:06:33.273: E/Database(12305):     at android.database.sqlite.SQLiteDatabase.compileStatement(SQLiteDatabase.java:1151)
 01-08 16:06:33.273: E/Database(12305):     at com.example.security.database.OpenHelper.password_varification(OpenHelper.java:98)
 01-08 16:06:33.273: E/Database(12305):     at com.example.security.Setting.SetteingsPage$2.onClick(SetteingsPage.java:51)
 01-08 16:06:33.273: E/Database(12305):     at android.view.View.performClick(View.java:2485)
 01-08 16:06:33.273: E/Database(12305):     at android.view.View$PerformClick.run(View.java:9080)
01-08 16:06:33.273: E/Database(12305):  at android.os.Handler.handleCallback(Handler.java:587)
01-08 16:06:33.273: E/Database(12305):  at android.os.Handler.dispatchMessage(Handler.java:92)
01-08 16:06:33.273: E/Database(12305):  at android.os.Looper.loop(Looper.java:130)
01-08 16:06:33.273: E/Database(12305):  at android.app.ActivityThread.main(ActivityThread.java:3687)
01-08 16:06:33.273: E/Database(12305):  at java.lang.reflect.Method.invokeNative(Native Method)
01-08 16:06:33.273: E/Database(12305):  at   java.lang.reflect.Method.invoke(Method.java:507)
01-08 16:06:33.273: E/Database(12305):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
01-08 16:06:33.273: E/Database(12305):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
01-08 16:06:33.273: E/Database(12305):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:51:12.437

# DBAdapter 类#

这是我的示例代码，它工作正常。在 AddActivity 中，我将从编辑文本中获取一些值，并使用 DBAdapter 我将保存在 sqlite 中。

```
package gps.profile.changer;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class DBAdapter {
    public static final String KEY_ROWID = "_id";
    public static final String KEY_LAT = "latcol";
    public static final String KEY_LON = "loncol";
    public static final String KEY_LOCNAME = "locnamecol";
    public static final String KEY_PROTYPE="protypecol";
    private static final String TAG = "DBAdapter";

    private static final String DATABASE_NAME = "gps";
    private static final String DATABASE_TABLE = "locationtb";
    private static final int DATABASE_VERSION = 1;

    private static final String DATABASE_CREATE =
    "create table locationtb (_id integer autoincrement primary key,latcol real not null,"
    + "loncol real not null,locnamecol varchar not null, "
    + "protypecol varchar not null);";

    private final Context context;

    private DatabaseHelper DBHelper;
    private SQLiteDatabase db;

    public DBAdapter(Context ctx) {
        // TODO Auto-generated constructor stub
        this.context = ctx;
        DBHelper = new DatabaseHelper(context);
    }

    private static class DatabaseHelper extends SQLiteOpenHelper
    {
    DatabaseHelper(Context context)
    {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db)
    {
    db.execSQL(DATABASE_CREATE);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion,
    int newVersion)
    {
    Log.w(TAG, "Upgrading database from version " + oldVersion
    + " to "
    + newVersion + ", which will destroy all old data");
    db.execSQL("DROP TABLE IF EXISTS locationtb");
    onCreate(db);
    }
    }

    //---opens the database---
    public DBAdapter open() throws SQLException
    {
    db = DBHelper.getWritableDatabase();

    return this;
    }

    //---closes the database---
    public void close()
    {
    DBHelper.close();
    }

    //---insert a title into the database---
    public long insertTitle(double latcol, double loncol, String locnamecol,String protypecol)
    {
    ContentValues initialValues = new ContentValues();
    initialValues.put(KEY_LAT, latcol);
    initialValues.put(KEY_LON, loncol);
    initialValues.put(KEY_LOCNAME, locnamecol);
    initialValues.put(KEY_PROTYPE, protypecol);

    return db.insert(DATABASE_TABLE, null, initialValues);
    }

    //---deletes a particular title---
    public boolean deleteTitle(String rowId)
    {
    return db.delete(DATABASE_TABLE, KEY_LOCNAME  +
    "=" + rowId, null) > 0;
    }

    //---retrieves all the titles---
    public Cursor getAllTitles()
    {
    return db.query(DATABASE_TABLE, new String[] {

    KEY_LAT,
    KEY_LON,
    KEY_LOCNAME,
    KEY_PROTYPE},
    null,null,null,null,null);//put extra null if not work
    }

    //---retrieves a particular title---
    public Cursor getTitle(String gen) throws SQLException
    {
    Cursor mCursor =
     db.query(true, DATABASE_TABLE, new String[] {

    KEY_LAT,
    KEY_LON,
    KEY_LOCNAME,
    KEY_PROTYPE
    },
    KEY_PROTYPE + "=" + gen,
    null,null,null,null,null);
    if (mCursor != null)
    {
    mCursor.moveToFirst();
    Log.e("","");
    }

    return mCursor;
    }
    //checking  profile saved for that latitude and longitude in db

    public Cursor getprofilelist(String gen) throws SQLException
    {

     Cursor mcursor = db.rawQuery("select * from locationtb where protypecol=? " ,new String [] {gen});
     if (mcursor != null)
       {
      mcursor.moveToFirst();
       Log.e("","");
       }              
     return mcursor;
    }

    public Cursor getLocationProfile(Double a,Double b ) throws SQLException
    {

     Cursor mcursor = db.rawQuery("select * from locationtb where latcol=? and loncol=?" ,new String [] {String.valueOf(a),String.valueOf(b)});
     if (mcursor != null)
       {
      mcursor.moveToFirst();
       Log.e("","");
       }              
     return mcursor;
    }

    //---updates a title---
    public boolean updateTitle(long rowId, String latcol,
    String loncol, String locnamecol,String protypecol)
    {
    ContentValues args = new ContentValues();
    args.put(KEY_LAT, latcol);
    args.put(KEY_LON, loncol);
    args.put(KEY_LOCNAME,locnamecol);
    args.put(KEY_PROTYPE, protypecol);
    return db.update(DATABASE_TABLE, args,
    KEY_LOCNAME + "=" + rowId, null) > 0;
    }

} 
```

# 添加活动

```
package gps.profile.changer;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.BroadcastReceiver;
import android.content.ContentResolver;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.content.IntentFilter;
import android.database.Cursor;
import android.location.LocationManager;
import android.media.AudioManager;
import android.os.Bundle;
import android.provider.Settings;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageView;
import android.widget.Spinner;
import android.widget.Toast;

public class AddActivity extends Activity
{
      public EditText locationname;
      public EditText latit,longit;

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.addlayout);

        latit = (EditText) findViewById(R.id.lat1);        
        longit = (EditText) findViewById(R.id.long1);     
        locationname = (EditText) findViewById(R.id.locname);    
        adddata=(ImageView)findViewById(R.id.imageadd);
        spinn= (Spinner) findViewById(R.id.spinner1);

        locatname=locationname.getText().toString();
        ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this,
                R.array.profiles, android.R.layout.simple_spinner_item);
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spinn.setAdapter(adapter);

        spinn.setOnItemSelectedListener(new OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView<?> parentView, View selectedItemView, int position, long id) {               
                spinsave=spinn.getSelectedItem().toString();    
                //Toast.makeText(AddActivity.this, spinsave, Toast.LENGTH_SHORT ).show();
            }

            @Override
            public void onNothingSelected(AdapterView<?> parentView) {
                // your code here
            }
        }); 

    }

 }

      public void connect(View v)
      {

        latitude=latit.getText().toString();
         longitude=longit.getText().toString();
          latdou=Double.parseDouble(latitude);
          longdou=Double.parseDouble(longitude);
         locatname=locationname.getText().toString();
         int latlen=latitude.length();
         int lonlen=longitude.length();
         int namlen=locatname.length();
          if(latlen!=0&&lonlen!=0&&namlen!=0)
             {
              Toast.makeText(AddActivity.this, "added", Toast.LENGTH_SHORT ).show();
              db = new DBAdapter(this);

              insert();
              startService(new Intent(this, LocationAddActivity.class));
              Log.e("added","added");
              //  update();

             // dis("'Vibrate'");
              //  del("1");
             // disAll();
             //   getlocationpro(latlaa1,lnglaa1);

            }
          else
          {
              Toast.makeText(AddActivity.this, "fill all fields", Toast.LENGTH_SHORT ).show();
              startService(new Intent(this, LocationAddActivity.class));
          }
  }

    /*  private void update(){ 

            db.open();
            if (db.updateTitle(1,
                    "1",
                    "java ",
                    "ravi"))
                Toast.makeText(this, "Update successful.",
                    Toast.LENGTH_LONG).show();
            else
                Toast.makeText(this, "Update failed.",
                    Toast.LENGTH_LONG).show();
            //-------------------

            //---retrieve the same title to verify---
            Cursor c = db.getTitle(1);
            if (c.moveToFirst())
                DisplayTitle(c);
            else
                Toast.makeText(this, "No title found",
                        Toast.LENGTH_LONG).show();
            //-------------------
            db.close();

        }*/
        public void insert(){ 

            db.open();

          long  id = db.insertTitle(
                    latlaa1,
                    lnglaa1,
                    locatname,
                    spinsave
                    );

            db.close();

        }

    /*    private void disAll(){
             Toast.makeText(AddActivity.this, "disall", Toast.LENGTH_SHORT ).show();
             //db = new DBAdapter(this);
            db.open();

                Cursor c = db.getAllTitles();
                if (c.moveToFirst())
                {
                    do {
                        System.out.println("bool2");
                       if(latdou==c.getDouble(0)&&longdou==c.getDouble(1))
                       {
                           Toast.makeText(AddActivity.this, "Location Already Exist in the Name of:"+c.getString(2), Toast.LENGTH_LONG).show();
                          // startService(new Intent(this, LocationAddActivity.class));

                        if(locatname==c.getString(2))
                         {
                           Toast.makeText(AddActivity.this, "Location Name Already Exist:"+c.getString(2), Toast.LENGTH_LONG ).show();
                          // startService(new Intent(this, LocationAddActivity.class));
                         }

                       }   
                    } while (c.moveToNext());

                }
                insert();
            db.close();
        }*/

        private void dis(String j){

            db.open();

            try{
                Cursor c = db.getTitle(j);
                if (c.moveToFirst())
                {
                    do {

                        System.out.println("bool2");
                        DisplayTitle(c);
                    } while (c.moveToNext());
                }
            }catch(Exception e){
                System.out.println(e);
            }
            db.close();
        }        

      /* private void getlocationpro(Double a,Double b){

            db.open();

            try{
                Cursor c = db.getLocationProfile(a,b);
                if (c.moveToFirst())
                {
                    do {

                        System.out.println("bool2");
                        DisplayTitle(c);
                    } while (c.moveToNext());
                }
            }catch(Exception e){
                System.out.println(e);
            }
            db.close();
        }        */

        /*
         private void del(String j){

            db.open();
            if (db.deleteTitle(j))
                Toast.makeText(this, "Delete successful.",
                    Toast.LENGTH_LONG).show();
            else
                Toast.makeText(this, "Delete failed.",
                    Toast.LENGTH_LONG).show();
            db.close();

        }*/

        public void DisplayTitle(Cursor c)
        {

            Toast.makeText(this,

                    "LAITUDE: " + c.getDouble(0) + "\n" +
                    "LONGITUDE: " + c.getDouble(1) + "\n" +
                    "LOCATION NAME:  " + c.getString(2)+"\n"+
                    "PROFILE TYPE:  " + c.getString(3),
                    Toast.LENGTH_LONG).show();
        }

       private class MyReceiver extends BroadcastReceiver{

             @Override
             public void onReceive(Context arg0, Intent arg1) {

              // TODO Auto-generated method stub
                 latit = (EditText) findViewById(R.id.lat1);        
                 longit = (EditText) findViewById(R.id.long1);  

                 latlaa1 =arg1.getDoubleExtra("latlaa", 0);
                   lnglaa1=arg1.getDoubleExtra("lnglaa", 1);

                   latit.setText(String.valueOf(latlaa1));
                  longit.setText(String.valueOf(lnglaa1));

               get1();
               //startService(new Intent(AddActivity.this, LocationAddActivity.class));

            //LocationAddActivity laa=new LocationAddActivity();
           // laa.get(null);

          Toast.makeText(AddActivity.this, "receiver ", Toast.LENGTH_SHORT ).show();
       //   Intent intent=new Intent(AddActivity.this, LocationAddActivity.class);  
       //   startService(intent);

               }

        public void get1()
            {

                db = new DBAdapter(AddActivity.this);
                db.open();

                     Cursor c = db.getLocationProfile(latlaa1,lnglaa1);
                    if (c.moveToFirst())
                    {
                        do {

                              if(c!=null)
                                {

                             // Initialize the location fields

                                if(c.getString(3).equals("Vibrate"))
                                     {

                                        Toast.makeText(getBaseContext(),"VIBRATE profile activated ",Toast.LENGTH_SHORT).show();

                                     }
                                    else if (c.getString(3).equals("Silent"))
                                     {

                                        Toast.makeText(getBaseContext(),"silent profile activated !",Toast.LENGTH_SHORT).show();

                                     }
                                    else if (c.getString(3).equals("General"))
                                     {
                                        Toast.makeText(getBaseContext(),"Loud profile activated !",Toast.LENGTH_SHORT).show();

                                     }

                                }

                        } while (c.moveToNext());
                    }
                    else
                    {

                           Toast.makeText(getBaseContext(),"else vibrate activated !",Toast.LENGTH_SHORT).show();
                         mobilemode.setRingerMode(AudioManager.RINGER_MODE_VIBRATE);
                    }

             db.close();

       }

   }

} 
```

# regex - 正则表达式匹配 awk 命令中的模式

> ID：14212993
> 
> 赞同：8
> 
> 时间：2013-01-08T10:33:16.327
> 
> 标签：regex, awk

我需要编写一个正则表达式来匹配以下模式：

```
fltr_desc_name 
```

也就是说..“fltr”后跟一个下划线，后跟任意数量的由下划线分隔的单词。

例如：我需要一个正则表达式来匹配以下内容：

```
fltr_desc_name
fltr_nameone_nametwo
fltr_level_name_desc 
```

我在“awk”中的“if”语句中使用它：例如：

```
awk '/Transformation/ { if ($4=="Filter" && $5=="fltr_*") print $4,$5 }' filename 
```

请帮助我编写正则表达式并告诉我如何在“awk”命令中的“if”条件中使用正则表达式。谢谢你。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2015-12-15T18:51:10.697

需要`~/ /`在awk中匹配正则表达式时使用波浪号，即

```
if ($5 ~ /fltr_*/) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-08T13:46:26.447

```
awk '/Transformation/ && $4=="Filter" && $5~/^fltr_[[:alpha:]_]+/ { print $4,$5 }' filename 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-08T10:46:30.497

你可以使用

```
awk '/Transformation/ && $4=="Filter" && match($5, /^fltr_[A-Za-z_]+/) { print $4,$5 }' filename 
```

无需使用`if`语句，您可以按照上述使用多个匹配条件。返回 中的正则表达式的`match`匹配位置，如果没有，则返回 0。0 评估为假，其他任何事情为真。`^fltr_[A-Za-z_]+``$5`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T10:38:38.433

`fltr_[a-zA-Z_]+[a-zA-Z]`

或者如果您只想从字符串开始匹配到字符串结尾：

`^fltr_[a-zA-Z_]+[a-zA-Z]$`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T10:39:32.483

你可以用`fltr_\w+`

如果您需要一个好的程序来编写和测试正则表达式。试试这个： http: [//gskinner.com/RegExr/](http://gskinner.com/RegExr/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-08T10:43:23.947

尝试这个

```
^fltr[_\d\w]+$ 
```

这将采取一切，你需要。

# ios - 对分组表视图的部分（标题）进行排序

> ID：14212996
> 
> 赞同：0
> 
> 时间：2013-01-08T10:33:25.883
> 
> 标签：ios, uitableview, sorting, nsdictionary

我很难按照我想要的顺序将标题（部分）放在分组表视图中，这不是数字或字母顺序。

以前我总是通过像这样设置字典和数组来将数据添加到我的表视图中：

```
 NSMutableDictionary *temp = [[NSMutableDictionary alloc] init];
 [temp setObject: AlphaData forKey:@"Alpha"];
 [temp setObject: BetaData forKey:@"Beta"];
 [temp setObject: CharlieData forKey:@"Charlie"];

 self.tableContents = temp;
 [temp release];
 self.sortedKeys = [[self.tableContents allKeys]
                       sortedArrayUsingSelector:@selector(compare:)]; 
```

`AlphaData`数组在哪里。然后在设置表格视图时使用字典和数组。

但现在我要按 Beta、Alpha、Charlie 的顺序排列。

现在我知道我的问题是因为`self.tableContents`是一个`NSMutableDictionary`，因此它没有排序或索引，我可以看到：

```
for (id key in temp) {
    NSLog(@"key: %@, value: %@", key, [temp objectForKey:key]);
} 
```

返回：查理、贝塔、阿尔法。（假设那是相当随机的，如果没有排序）

所以删除`sortedArrayUsingSelector:@selector(compare:)];`不会有预期的结果。

我已经忘记了我尝试过的东西，因为我一直在摆弄和尝试以及很多错误而不是真正理解，但它包括改变：

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    return [self.sortedKeys objectAtIndex:section];
} 
```

不知道从这里去哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:17:53.697

好的，我现在感觉有点傻：

```
[sortedKeys addObject: @"Beta"];
[sortedKeys addObject: @"Alpha"];
[sortedKeys addObject: @"Charlie"]; 
```

做我现在需要的工作。

道歉。

# magento - 如何在 Magento 中模拟从上到下的订单？

> ID：14212998
> 
> 赞同：0
> 
> 时间：2013-01-08T10:33:29.443
> 
> 标签：magento

这是我的第一个项目，制作本身并不难*只是一个主题和基本自定义）但我还没有找到一种方法来测试完整的交易，从您将商品放入购物车直到准备好发货和据称交付的对象。

我怎么知道网站何时启动一切都会井井有条？