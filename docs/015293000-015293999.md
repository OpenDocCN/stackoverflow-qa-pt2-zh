# StackOverflow 问答 15293000-15293999

# mysql - WHERE [1 个这些值] IN [1 个这些值]

> ID：15293005
> 
> 赞同：2
> 
> 时间：2013-03-08T11:32:29.303
> 
> 标签：mysql, subquery, in-subquery

我有以下查询：

```
SELECT A.id FROM logsen_alertes A
WHERE  
( SELECT LA2.type_colocation_id
  FROM logsen_liaisons_annonces_types_colocations LA2
  WHERE LA2.annonce_id = 25 AND LA2.annonce_type = 4
) 
IN
( SELECT L4.souhait
  FROM logsen_liaisons_alertes_souhaits L4
  WHERE L4.alerte_id = A.id
) 
```

当我的第一个子查询仅返回 1 个值时，此查询运行良好，因为这就是 IN() 的工作方式，在一组值中查找 1 个唯一值。当我的第一个子查询返回 2 个或更多值时，MySQL 会返回“子查询返回超过 1 行”。当第一个子查询返回多个值时，如何使我的查询有效？像“我在 [这些值中的任何一个] 中找到的 [这些值中的任何一个]”之类的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T11:42:16.640

尝试：

```
SELECT DISTINCT A.id FROM logsen_alertes A
JOIN logsen_liaisons_alertes_souhaits L4 ON L4.alerte_id = A.id
JOIN logsen_liaisons_annonces_types_colocations LA2
  ON LA2.type_colocation_id = L4.souhait AND LA2.annonce_id = 25 AND LA2.annonce_type = 4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T11:42:38.767

尝试这个：

```
SELECT 
        A.id 
FROM 
        logsen_alertes A
        INNER JOIN logsen_liaisons_alertes_souhaits L4
               ON L4.alerte_id = A.id
        INNER JOIN logsen_liaisons_annonces_types_colocations LA2
               ON LA2.type_colocation_id = L4.souhait 
WHERE 
         LA2.annonce_id = 25 AND LA2.annonce_type = 4 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T11:43:25.617

```
SELECT DISTINCT A.id FROM logsen_alertes AS A
INNER JOIN logsen_liaisons_alertes_souhaits AS L4
        ON (L4.alerte_id = A.id)
INNER JOIN logsen_liaisons_annonces_types_colocations AS LA2
        ON (LA2.type_colocation_id = L4.souhait)
WHERE LA2.annonce_id = 25 AND LA2.annonce_type = 4 
```

应该管用

# python - Python 结合 setattr 和 getattr

> ID：15293006
> 
> 赞同：1
> 
> 时间：2013-03-08T11:32:30.127
> 
> 标签：python, class, getattr, setattr

我想动态更新一个类的属性，但似乎 setattr 和 getattr 的组合不起作用，因为我想使用它。

这是我的主要课程：

```
class Container(object):
    def __init__(self):
        pass
container = Container()
attributes = ['a', 'b', 'c', 'd']
values = [[1, 2, 3, 4, 5], [True, False], ['red', 'blue', 'green'], [0, 1, -1, -5, 99]] 
```

请注意，出于该示例的目的，我明确构建了属性列表及其各自的值。但是，在这段代码的实际应用中，我事先并不知道任何事情。它们的编号、名称或值都不是。这需要动态地执行此操作。

这是其余的代码：

```
for key, value in zip(attributes, values):
    setattr(container, key, [])
    for val in value:
        setattr(container, key, getattr(container, key).append(val)) 
```

当我运行代码时，这部分不起作用。我可以将 getattr 部分保存在 tmp 变量中，然后在调用 setattr 之前调用列表的 append 方法，但如果可能的话，我想压缩它。

任何人都可以向我解释为什么这不起作用？我有什么选择？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T11:37:25.813

您正在就地附加到列表中。像所有就地突变函数一样，`.append()`返回`None`，所以你的最后一行：

```
setattr(container, key, getattr(container, key).append(val)) 
```

最终评估为：

```
setattr(container, key, None) 
```

只需在类上设置列表的副本：

```
for key, value in zip(attributes, values):
    setattr(container, key, values[:]) 
```

其中，通过从 0 切片到简写符号来`[:]`创建副本，而无需循环。`values``len(values)`

如果您要做的只是创建一个将键和值作为属性提供的对象（很像`dict`使用属性访问而不是项目访问的意愿），您还可以使用：

```
class Container(object):
    def __init__(self, names, values):
        self.__dict__.update(zip(names, values)) 
```

然后运行：

```
Container(attributes, values) 
```

这消除了`setattr()`在循环中调用的需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T11:51:47.567

如果您可以查看每个步骤的进度，它可能会帮助您了解发生了什么：

```
class Container(object):
    def __init__(self):
        pass
    def __str__(self):
        return '%s(%s)' % (self.__class__.__name__,
            ', '.join(['%s = %s' % (attr, getattr(self, attr))
                for attr in self.__dict__])) 
```

现在你可以了`print container`。如果您在嵌套循环中执行此操作，您会看到在第一次尝试后`setattr`您已经破坏了存储在其中的原始列表`container.a`（如 Martijn 所述）：

```
for key, value in zip(attributes, values):
    setattr(container, key, [])
    for val in value:
        print 'before:', container
        setattr(container, key, getattr(container, key).append(val))
        print 'after:', container

before: Container(a = [])
after: Container(a = None)
before: Container(a = None)
Traceback (most recent call last): ... 
```

做到这一点的“最佳”方法显然取决于真正的问题——考虑到缩小问题 Martijn 的版本非常合适，但也许您必须在创建一些初始`container`实例之后的某个时间点附加一个项目或扩展多个项目。

# css - 绝对中心流体div

> ID：15293008
> 
> 赞同：1
> 
> 时间：2013-03-08T11:32:37.333
> 
> 标签：css

再会。

我知道如果你想绝对居中一个 div，你可以这样做：

```
<div id="parent">
   <div id="child">blahblah</div>
</div> 
```

CSS：

```
#parent{
   width: 500px;
   height: 500px;
   position: absolute; /*(or relative)*/
   top: 50%;
   left: 50%;
   margin-top: -250px;
   margin-left: -250px;
   text-align: center;
} 
```

如果父 div 是流体 div 怎么办？你怎么绝对居中它的意思：

```
#parent{
  max-width: 500px;
  max-height: 500px;
  top: 50%; ->is this right?
  left: 50%; -> is this right?
  margin-top: ???;
  margin-left: ???;
  text-align: center;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T11:42:05.307

由于`width`and`height`是流动的，您需要使用 javascript 或 jQuery。只需在标签中添加以下代码`head`。（*下面的例子是在 javascript 中*）

```
<script>
   window.onresize = function(){
      //To work even on resize
      getToMiddle();
   }
   window.onload = function(){
      getToMiddle();
   }

   function getToMiddle(){
      var box = document.getElementById('parent');
      var height = box.offsetHeight;
      var width = box.offsetWidth;
      box.style.top = -(height/2);
      box.style.left = -(width/2);
   }
</script> 
```

* * *

你的CSS会是这样的：

```
#parent{
   max-width: 500px;
   max-height: 500px;
   background-color:green;
   position:absolute;
   top: 50%;
   left: 50%;
  /* width: 10%;
   height: 10%; */
} 
```

**测试，给`width: 10%; and height: 10%`**

**[工作小提琴](http://jsbin.com/ewizad/7/edit)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-27T17:33:38.510

这可以单独使用 CSS 完成。

```
#parent {
  position: absolute;
  max-width: 500px;
  max-height: 500px;
  width: 100%;
  height: 100%;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
} 
```

见演示[https://jsfiddle.net/matharden/8kmvt8qd/](https://jsfiddle.net/matharden/8kmvt8qd/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-27T17:37:31.890

我将简单地使用`flex`来实现这一点......

```
#parent {
  display: flex;
  justify-content: center;
}
```

```
<div id="parent">
  <div id="child">blahblah</div>
</div>
```

# html - 需要帮忙。基本的 HTML/CSS。标题不变色

> ID：15293011
> 
> 赞同：0
> 
> 时间：2013-03-08T11:32:49.740
> 
> 标签：html, css, colors, header, css-selectors

我需要帮助。我刚刚开始使用 CSS/HTML，我之前能够使用 CSS 更改网站中页面 header1 内容的颜色。现在我尝试了完全相同的代码行，它保持纯黑色。

这是HTML：

```
<!DOCTYPE HTML>
<html lang = "en">
<head>
<title>Pacific Trails Resort</title>
<link rel ="stylesheet" href="pacific.css">
<meta charset="utf-8">
</head> 
<body>
<h1>Pacific Trails Resort</h1>
<div id="nav"><b>
<a href ="index.html">Home</a>&nbsp;&nbsp;
<a href ="yurts.html">Yurts</a>&nbsp;&nbsp;
<a href ="activities.html">Activities</a>&nbsp;&nbsp;
<a href ="reservations.html">Reservations</a>&nbsp;&nbsp;
</b></div>
<div id ="content">
<h2>Enjoy Nature In Luxury</h2>
<p><span class="resort">Pacific Trails Resort</span> offers a special lodging experience on the California North Coast.Relax 
in sereninty with panoramic views of the Pacific Ocean.</p>
<ul>
<li>Private yurts with decks overlooking the ocean
<li>Activities lodge with fireplace and gift shop
<li>Nightly fine dining at the Overlook Cafe
<li>Heated outdoor pool and whirlpool
<li>Guided hiking tours of the redwoods
</ul>
<div id="contact">
<span class="resort">Pacific Trails Resort</span>
<br>12010 Pacific Trails Road
<br>Zephyr, CA 95555
<br>
<br>888-555-5555
</div>
<div id="contact"><small><i>
Copyright &copy; 2011 Pacific Trails Resort
<br><a href= "mailto:nathan@griffin.com"> nathan@griffin.com</a>
</i></small></div>
</div>
</body>
</html> 
```

这是 CSS 文件。（在 w3 网站上验证）

```
body{
    color: #666666;
    background-color: #ffffff;}
h1{
    color: #000033;
    background-color: #ffffff;
    margin-bottom: 0;}
nav{
    background-color: #90c7e3;}
h2{
    color: #3399cc;}
dt{
    color: #000033;}
.resort{
    color: #000033;} 
```

有人可以指出我哪里出错了吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T11:40:46.173

改变：

```
nav { ... } 
```

到：

```
#nav { ... } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T11:38:42.443

对我来说似乎很好。

请注意，您将其设置为`#000033`，这是一种非常深的蓝色（应用正确，但可能会因为它类似于黑色而被忽略）。

当我随意将其更改为不同的颜色（即`#BADA55`）时，它仍然可以正常工作并且更明显。

# makefile - 何时/如何指定配置/制作目标

> ID：15293014
> 
> 赞同：3
> 
> 时间：2013-03-08T11:32:54.327
> 
> 标签：makefile, cross-compiling, configure

各种各样的开源项目都以源代码的形式分发，并且应该使用`./configure && make`方法进行编译。但是如果我想交叉编译，我应该在这两个步骤中的哪一个告诉他们我想要获取二进制文件的目标平台？

它是否与一般的配置/制作有关，或者这是特定于每个项目的？编译某些项目、库或控制台应用程序并指定目标的示例可能是什么？

我知道许多项目在他们的网站上都有一个专门用于“交叉编译这个程序”的网页。所以它似乎是特定于项目的设置。但是项目仍然使用configure/make，那么这一切是什么关系呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T14:06:59.837

如果您的系统使用标准 GNU autoconf，那么您将始终在配置时定义交叉编译，而不是在生成时。如果配置脚本不知道您正在交叉编译，它可能会在探测系统以查找支持和不支持的内容时获得错误的答案。

交叉编译是要配置的 --build、--host 和 --target 标志的用途。您永远不需要设置 --build：它始终指的是您正在运行 configure 的系统，并且 configure 可以自己解决这个问题。对于正常的交叉编译，您也不要设置--host，而是将--target 设置为交叉编译目标。如果需要，您可能还需要设置 CC（用于 C 程序）和/或 CXX（用于 C++ 程序）、LD、AR、STRIP 和其他一些。就我个人而言，我也更喜欢在单独的目录中构建，尽管不幸的是有些包不支持它）：

```
tar xzf foo-1.1.tar.gz
mkdir obj
cd obj
../foo-1.1/configure --target=... CC=...-gcc CXX=...-g++ ...
make 
```

请注意，这都是由基本的 autoconf / automake 提供的，因此所有项目都会以相同的方式进行（尽管根据我的经验，许多项目不会定期尝试交叉编译，但会做错事，以至于效果不佳） .

# django-forms - django - 为 django 脆表单集中的 div 分配唯一的 id

> ID：15293016
> 
> 赞同：5
> 
> 时间：2013-03-08T11:33:00.213
> 
> 标签：django-forms, django-crispy-forms

我有一个呈现为 Django [formset的](https://docs.djangoproject.com/en/dev/topics/forms/formsets/)[Django-crispy-form](https://django-crispy-forms.readthedocs.org)。表单的[布局](https://django-crispy-forms.readthedocs.org/en/latest/layouts.html)有一个我想在 Javascript 中操作的元素。但是，我看不到如何为这些 div 生成唯一 ID。当我设置时，它不会附加一个索引来指示它属于表单集中的哪个表单。`Div``css_id`

提前致谢！

# c# - 使用 HTTPWebRequest 调用 Rest WCF 时获取方法不允许错误

> ID：15293021
> 
> 赞同：1
> 
> 时间：2013-03-08T11:33:11.543
> 
> 标签：c#, wcf, rest, httpwebrequest

我这是我创建的服务

```
[ServiceContract]
public interface IRestWithXML
{
    [OperationContract]
    [WebInvoke(Method = "Post", UriTemplate = "DoWork", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
    string DoWork(Test objtest);

    [OperationContract]
    [WebInvoke(Method = "Post", UriTemplate = "Method?test={strtest}", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
    string Method(Test objtest,string strtest);

}          

[DataContract]
public class Test
{
    [DataMember]
    public string id { get; set; }
} 
```

我用过的 webconfig 文件。

```
 <service behaviorConfiguration="WcfService1.RestWithXMLBehavior"
    name="WcfService1.RestWithXML">
    <endpoint address="" behaviorConfiguration="JSONEndpointBehavior"
      binding="webHttpBinding" contract="WcfService1.IRestWithXML" />
    <endpoint address="ws" binding="wsHttpBinding" contract="WcfService1.IRestWithXML">
    </endpoint>
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
    <host>
      <baseAddresses>
        <add baseAddress="http://localhost/" />
      </baseAddresses>
    </host>
  </service>
  <behaviors>
  <endpointBehaviors>
    <behavior name="JSONEndpointBehavior">
      <webHttp />
    </behavior>
  </endpointBehaviors>
  <serviceBehaviors>
      <behavior name="WcfService1.RestWithXMLBehavior">
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="false" />
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

下面是用于调用 WCF 服务的代码。我得到了不允许的方法错误

```
 HttpWebRequest request = (HttpWebRequest)WebRequest.Create("http://localhost/Client/RestWithXML.svc/DoWork");
        request.Method = "POST";
        request.ContentType = "application/json";
        string postData = "{\"id\":\"1234\"}";

        // Set postData to byte type and set content length
        byte[] postBytes = System.Text.UTF8Encoding.UTF8.GetBytes(postData);
        request.ContentLength = postBytes.Length;

        // Write postBytes to request stream
        Stream s = request.GetRequestStream();
        s.Write(postBytes, 0, postBytes.Length);
        s.Close();

        // Get the reponse
        WebResponse response = request.GetResponse();

        // Status for debugging
        string ResponseStatus = (((HttpWebResponse)response).StatusDescription);

        // Get the content from server and read it from the stream
        s = response.GetResponseStream();
        StreamReader reader = new StreamReader(s);
        string responseFromServer = reader.ReadToEnd();

        // Clean up and close
        reader.Close();
        s.Close();
        response.Close(); 
```

我得到方法不允许的错误。我不知道这会导致这个错误

提前致谢

# jquery - 通过 jQuery 查找元素的“其他”类

> ID：15293025
> 
> 赞同：0
> 
> 时间：2013-03-08T11:33:19.367
> 
> 标签：jquery, html

我有两个元素应用了多个类，如下所示

```
<div class="one two"></div>
<div class="one three"></div> 
```

如果由公共类（在本例中为“一个”）定位，我如何通过 jQuery 定位元素的另一个类？

```
$('.one').???? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T11:37:56.123

试试这个以查看添加到元素的所有类

```
var classes=$('.one').attr('class').split(" ");
$.each(classes, function(index, cls){
    alert(cls);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T11:48:12.190

试试 $('.one.two');

或者

$('.one.three');

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T11:53:42.487

经过一番搜索，我发现jQuery为此提供了一个特殊的简单功能。我得到了我需要的东西

```
if($('.one').hasClass('two')) //do something;
if($('.one').hasClass('three')) // do something; 
```

# c++ - 如何释放 V8 占用的内存？

> ID：15293029
> 
> 赞同：1
> 
> 时间：2013-03-08T11:33:30.053
> 
> 标签：c++, memory, embed, v8, embedded-v8

我正在开发的一个应用程序嵌入了[V8](http://code.google.com/p/v8/)以进行脚本编写。为了节省内存，我想在不需要时关闭脚本组件，但由于某种原因，内存永远不会返回给操作系统。

这是我尝试过的：

**1\. 在持久上下文句柄上调用 Dispose()**

```
context.Dispose(); 
```

**2.强制垃圾回收**

```
while (!v8::V8::IdleNotification()); 
```

这些都对进程内存使用没有任何显着影响。当脚本要求内存时，我可以清楚地看到它是如何上升的，但它再也不会下降了。

我正在确定进程内存使用情况`ps -o rss`。我知道如果没有分析器，就无法确定一个进程正在使用多少内存，但我确实相信当 V8 释放内存时 rss 应该会下降。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-03T04:21:14.313

只是花了几个小时来解决这个问题，最终不得不深入研究 V8 的 api.cc。

结果是 V8 将全局对象模板的最后一个实例固定为快速重用（无论是原始 ObjectTemplate 还是从 FunctionTemplate 派生的代理）。在尝试强制 GC 刷新时，这非常令人困惑。解决方法是分配新的虚拟上下文（使用与您尝试刷新的上下文相同的模板）。

```
static void do_gc()
{
  {
    Isolate *i = Isolate::GetCurrent();
    HandleScope h(i);
    Handle<Context> c = Context::New(i); // Default contexes
    Handle<Context> c = Context::New(i, 0, objtemplate); // With custom object
    Handle<Context> c = Context::New(i, 0, fntemplate->InstanceTemplate()); // With proxy
  }
  while (!v8::V8::IdleNotification());
} 
```

在上下文中查看用法[https://github.com/katlogic/lv8/blob/344353dac702901c917a4c05438252121c527ab3/lv8.cpp#L755](https://github.com/katlogic/lv8/blob/344353dac702901c917a4c05438252121c527ab3/lv8.cpp#L755)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T13:05:30.510

即使您的应用程序已正确释放内存，操作系统也可能根本没有回收内存（例如出于性能原因）。应用程序堆也可能持有内存，以防您很快再次需要它。无论哪种方式，如果你确定你没有泄漏（尝试类似 valgrind），我不会担心它。

# python - 从 PyQt 中的 qtablewidget 中删除多列

> ID：15293031
> 
> 赞同：0
> 
> 时间：2013-03-08T11:33:39.813
> 
> 标签：python, pyqt

在我的表中，我共有 5 列，并动态添加了一些列（取决于输入）。当进程重新加载时，所有列都将被删除，默认的 5 列被创建，其他列也被创建。我用于列删除的脚本如下：

```
totalColumns = self.TBL_shotDetails.columnCount()
for index in xrange(totalColumns) :
    self.TBL_shotDetails.removeColumn(index) 
```

运行这行代码时，只有前两列被删除。其余的没有被删除。谁能建议我如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T11:50:32.360

你检查过索引的值吗？该指数仍在增加。具有索引 3 的列现在用索引 2 替换已删除的列，但您继续删除递增索引。

**编辑：**
您可能希望从 7 删除到 0。

# php - 如何验证用户输入

> ID：15293036
> 
> 赞同：-2
> 
> 时间：2013-03-08T11:33:50.907
> 
> 标签：php, security

我正在使用一个用 PHP 和 Jquery 编写的脚本，它允许抓取静态网站：

```
<?php
if(isset($_GET['site'])){
  $f = fopen($_GET['site'], 'r');
  $html = '';
  while (!feof($f)) {
    $html .= fread($f, 24000);
  }
  fclose($f);
  echo $html;
}
?> 
```

Jquery部分：

```
$(function(){
   var site = $(input).val();

   $.get('proxy.php', { site:site }, function(data){

      $('#myDiv').append(data);

   }, 'html');

}); 
```

如您所见，需要抓取的网站必须具有输入价值。我想让我的访问者能够设置自己的网站被抓取。

问题是我不知道如何保护 PHP 部分。据我了解，输入值是一个很大的安全风险，因为任何东西都可以带值发送。使用此代码时，我已经经历过性能缓慢和几次“电脑崩溃”。我不确定崩溃是否相关，但它们仅在我处理代码时发生。无论如何，我真的很想知道如何*验证*发送到我的服务器的值（来自输入），只有真正的 url 应该大声。我用谷歌搜索了好几天，但我无法弄清楚（PHP 的新功能）

ps 如果您发现任何其他安全风险，请告诉我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T11:39:04.230

我认为您的主要安全问题是您`fopen`用于读取 url 的内容，如果用户想要读取系统中的文件，那么他必须发送该文件的路径并且脚本是否具有足够的权限，然后他们将能够访问您的硬盘驱动器的内容。

我建议使用其他方法，例如[Curl](http://php.net/manual/en/book.curl.php)，或者至少验证用户输入以确保它是有效的 url，为此，我会检查一些[正则表达式](https://stackoverflow.com/questions/206059/php-validation-regex-for-url)

祝你的代码好运！

**编辑验证**

这是我所说的验证的一个小例子。

```
<?php
if(isset($_GET['site'])){
  if(validURL($_GET['site']) {
     $f = fopen($_GET['site'], 'r');
     $html = '';
     while (!feof($f)) {
       $html .= fread($f, 24000);
     }
     fclose($f);
     echo $html;
  } else {
     echo "Invalid URL, please enter a valid web url (i.e: http://www.google.com)";
  }
}

function validURL($url){ 
   //here goes your validation code, returns true if the url is valid
}
?> 
```

但是，如果您太新而无法理解这一点，我建议您使用更简单的示例，因为这是非常基本的逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T11:40:51.207

令人难过的是，您在互联网上找不到有关此主题的任何信息。它是一件常见的事情。请参考以下链接。它可能会有所帮助。

[PHP验证输入字母数字加上几个符号](https://stackoverflow.com/questions/2303299/php-validate-input-alphanumeric-plus-a-few-symbols)

[http://phpmaster.com/input-validation-using-filter-functions/](http://phpmaster.com/input-validation-using-filter-functions/)

# php - Ajax 仅被第一个按钮调用

> ID：15293048
> 
> 赞同：0
> 
> 时间：2013-03-08T11:34:21.247
> 
> 标签：php, jquery, phpmyadmin

```
<?php $count = 1; foreach ($settings[$slug] as $slug): ?>
    <div data-toggle="buttons-radio" class="btn-group">
       <button id="enable" value="1" class="btn btn-success active" type="button"           name="includeicon"><i class="icon-ok icon-white"></i></button>
       <button id="disable" value="0" class="btn" type="button" name="includeicon"><i class="icon-remove"></i></button>
    </div>
<?phpendforeach?>

$(document).ready(function(){

    $("#enable").click(function(event) {
    var slugid = $('#slugid').val();
    $.ajax({
           url: SITE_URL + 'admin/PluginConf/enable/?'+slugid,
        type: "POST",
        data : {'slugid' : slugid},
        success: function(data) {
                    }
                 });
    }); 

    $("#disable").click(function(event) {
    var slugid = $('#slugid').val();
    $.ajax({
        url: SITE_URL + 'admin/PluginConf/disable/?'+slugid,
        type: "POST",
        data : {'slugid' : slugid},
        success: function(data) {
                    }
     });
    });
        }); 
```

我在 jquery 中传递按钮 id，但只为第一个按钮调用 ajax。对于第二个和其他人，它没有被调用，任何人都可以帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T11:41:13.847

你有一个 id`enable`和`disable`一个`foreach`. 如果循环多次执行，那么您将拥有多个具有相同 ID 的按钮。ID 必须是唯一的！而是使用其他东西来识别点击：

我建议`enable`为启用按钮添加一个类，`disable`为禁用按钮添加一个类，然后捕获如下事件：

```
$('.enable').click(function() {
    // code in here
});

$('.disable').click(function() {
    // code in here
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T11:40:46.957

不要通过 id 绑定多个项目的点击事件！ID 必须是唯一标识符。

```
<?php $count = 1; foreach ($settings[$slug] as $slug): ?>
    <div data-toggle="buttons-radio" class="btn-group">
       <button value="1" class="enable btn btn-success active" type="button"           name="includeicon"><i class="icon-ok icon-white"></i></button>
       <button value="0" class="btn disable" type="button" name="includeicon"><i class="icon-remove"></i></button>
    </div>
<?phpendforeach?>

$(document).ready(function(){

    $(".enable").click(function(event) {
    var slugid = $('#slugid').val();
    $.ajax({
           url: SITE_URL + 'admin/xervPluginConf/enable/?'+slugid,
        type: "POST",
        data : {'slugid' : slugid},
        success: function(data) {
                    }
                 });
    }); 

    $(".disable").click(function(event) {
    var slugid = $('#slugid').val();
    $.ajax({
        url: SITE_URL + 'admin/xervPluginConf/disable/?'+slugid,
        type: "POST",
        data : {'slugid' : slugid},
        success: function(data) {
                    }
     });
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T11:41:18.190

当您的案例按钮中的多个元素具有相同的 id 时，您使用的 id 是不正确的。当您使用 foreach 循环时，您会创建多个具有相同特定 id 的按钮。ID 表示某事物是唯一的，并且只有一个元素可以具有该特定 ID。我假设您应该为此按钮创建一个类，并考虑到这一点来更改您的脚本代码。这是我的建议。希望能帮助到你。

```
<?php $count = 1; foreach ($settings[$slug] as $slug): ?>
<div data-toggle="buttons-radio" class="btn-group">
   <button value="1" class="btn btn-success active enable" type="button"             name="includeicon"><i class="icon-ok icon-white"></i></button>
   <button value="0" class="btn disable" type="button" name="includeicon"><i class="icon-remove"></i></button>
</div>
<?php endforeach; ?>

$(document).ready(function(){

$(".enable").click(function(event) {
var slugid = $('#slugid').val();
$.ajax({
       url: SITE_URL + 'admin/xervPluginConf/enable/?'+slugid,
    type: "POST",
    data : {'slugid' : slugid},
    success: function(data) {
                }
             });
}); 

$(".disable").click(function(event) {
var slugid = $('#slugid').val();
$.ajax({
    url: SITE_URL + 'admin/xervPluginConf/disable/?'+slugid,
    type: "POST",
    data : {'slugid' : slugid},
    success: function(data) {
                }
 });
});
    }); 
```

# python - 如何在 FLEX 词法分析器中处理/转义 Python 注释？

> ID：15293049
> 
> 赞同：0
> 
> 时间：2013-03-08T11:34:35.150
> 
> 标签：python, regex, comments, lexer

谁能指导我如何在 FLEX 词法分析器中处理/转义 Python 注释，以便不会为注释生成标记。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T11:36:34.673

我认为您只需要一个如下所示的规则：

```
"#".*  ; 
```

这将使您的词法分析器跳过注释并且不为其生成任何标记。

# c# - Foreach 循环删除太多单词

> ID：15293052
> 
> 赞同：1
> 
> 时间：2013-03-08T11:34:50.447
> 
> 标签：c#, c#-4.0

任何人都可以帮助解决我的 foreach 循环的问题，我想做的是从搜索短语中删除禁用词，禁用词在数据库中，然后我拆分搜索词组并尝试比较短语中的单词与禁止列表中的单词相对。

问题在于 if else 部分它没有达到禁止的工作检查。

谢谢你的帮助。

```
 ///
                ///Banned Word List
                ///
                string newSearchPhrase      = string.Empty;
                string bannedWord           = string.Empty;
                var BannedWords             = _IGBW.BannedWords().ToList();

                bannedWord = BannedWords.ToString();

                foreach (string searchWords in TextClean.Split(' '))
                    {
                    if (bannedWord.ToLower() == searchWords.ToLower())
                        {
                        newSearchPhrase = Regex.Replace(searchWords, bannedWord, " ");
                        }
                    else
                        {
                        newSearchPhrase = searchWords;  
                        }
                    }

                string bannedWordsRemoved = newSearchPhrase; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T11:45:05.003

当你这样做时：

```
bannedWord.ToLower() == searchWords.ToLower() 
```

您正在将一个字符串与一个字符串进行比较，因此如果您有多个禁用词，您将测试如下内容：

```
"bannedword1 bannedword2 bannedword3" == "bannedword1" 
```

这永远不会是真的。

你想要的是：

```
BannedWords.Contains(searchWords.ToLower()) 
```

或者如果您的禁用词不一定是小写：

```
BannedWords.Select(word=>word.ToLower()).Contains(searchWords.ToLower()) 
```

此外，您的 newSearchPhrase 字符串始终会被覆盖，因此在您设置bannedWordsRemoved 的最后一行中，它将始终设置为空字符串或1 个单词字符串。

编辑清晰：

```
 string newSearchPhrase      = string.Empty;
            var BannedWords             = _IGBW.BannedWords().ToList();

            foreach (string searchWord in TextClean.Split(' '))
                {
                if (!BannedWords.Select(word=>word.ToLower()).Contains(searchWord.ToLower()))
                    { 
                        newSearchPhrase += searchWord +" ";
                    }
                }

            string bannedWordsRemoved = newSearchPhrase; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T11:36:41.913

您的问题在于这一行：

```
bannedWord = BannedWords.ToString(); 
```

你真正想要的是：

```
bannedWord = string.Join(" ", BannedWords); 
```

然而，整个方法可以用更简洁的方式编写，如下所示：

```
var bannedWords = new HashSet<string>(_IGBW.BannedWords().ToList().Cast<string>(), StringComparer.OrdinalIgnoreCase);
var cleaned = string.Join(" ", TextClean.Split(' ').Where(w => !bannedWords.Contains(w))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T11:42:48.390

在我看来，您将搜索字符串拆分为单词

```
 foreach (string searchWords in TextClean.Split(' ')) 
```

但是您并没有建立一个新的搜索字符串，您只需将单个单词分配给 newSearchPhrase 在

```
 newSearchPhrase = Regex.Replace(searchWords, bannedWord, " "); 
```

和

```
 newSearchPhrase = searchWords; 
```

//jk

# regex - 用于查找一行是否包含单词的正则表达式是什么？

> ID：15293064
> 
> 赞同：0
> 
> 时间：2013-03-08T11:35:26.783
> 
> 标签：regex, bash, shell

如果在一行中我有单词设备我想检查我的脚本我尝试了这个正则表达式

`if[$SERIAL =~ /device/]` 但执行结果未知。这是我的脚本我尝试仅在显示 stat 设备的设备中安装 apk，因此不脱机，您可以在下面找到我的脚本

```
for SERIAL in $(adb devices | tail -n +2 | cut -sf 1);
do 
    if [$SERIAL =~ /device/]
    #if [$SERIAL = "/^.*/device\b.*$/m"]
    then
        cd $1
        for APKLIST in $(ls *.apk);
        do
            echo "Installation de  $APKLIST on $SERIAL"
            adb -s  $SERIAL install -r $1/$APKLIST &
            #adb bugreport > bug.txt
        done
    fi
done 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T12:27:46.007

尝试将您的 if 行更改为：

```
if [[ $SERIAL =~ "device" ]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T19:51:41.263

您***必须***始终在语句中的方括号`if`和您正在测试的内容之间放置一个空格。您还必须了解方括号有两种类型，`[ ... ]`标准的和扩展的`[[ ... ]]`。

这`[`实际上是一个别名为`test`¹命令的 Unix命令：

```
$ ls -li /bin/test /bin/[
54008404 -rwxr-xr-x  2 root  wheel  18576 Jul 25  2012 /bin/[
54008404 -rwxr-xr-x  2 root  wheel  18576 Jul 25  2012 /bin/test 
```

您可以通过查看[`test`手册页](http://linux.die.net/man/1/test)来查看基本测试。

Kornshell（启动它）和 BASH 都使用双方括号 ( `[[ ... ]]`) 为您提供扩展测试。主要`[[ ... ]]`用于[模式匹配](http://arcib.dowling.edu/cgi-bin/info?%28bash%29Pattern%2520Matching)。模式匹配扩展了 shell 可以在命令行上执行的通配符——有点像穷人的正则表达式。较新版本的 BASH 实际上允许您使用真正的正则表达式而不是*模式匹配*。

要记住的重要一点是，当您进行模式匹配测试（或 BASH 中的正则表达式测试）时，您必须使用双方括号，而不是只能测试字符串的单方括号。

还要记住，正则表达式可以匹配一行中的任何位置：

```
if [[ $SERIAL =~ "device" ]] 
```

可以匹配`devices`。您要做的是添加`\b`以确保您匹配单词`device`. 是一个正`\b`则表达式单词边界：

```
if [[ $SERIAL =~ "\bdevice\b" ]] 
```

* * *

^(1.)是的，我知道这`[`是 BASH 和 Kornshell 中内置的 shell，并且`[`不执行`/bin/[`。但是，该`test`命令也是一个内置的 shell。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T18:50:06.127

在`| cut -sf 1`您的 $SERIAL 变量将只包含序列号之后。那么，您为什么要尝试将其与 匹配`device`？它永远不会是`true`。你为什么不直接使用

```
for SERIAL in $(adb devices | grep device$ | cut -sf 1); 
```

而不是你的`if`？

# css - WordPress下拉CSS不起作用

> ID：15293065
> 
> 赞同：0
> 
> 时间：2013-03-08T11:35:29.417
> 
> 标签：css, wordpress, drop-down-menu

我正在创建自己的 wordpress 模板，并且编写了一个静态工作的 jQuery 下拉菜单，但现在我正试图使其动态化，css 被搞砸了。下拉菜单有效，但菜单显示不正确。

主菜单显示垂直而不是水平，二级菜单是水平而不是垂直。主菜单的橙色类型也没有显示。

这是一个有效的[静态版本](http://jsfiddle.net/5tzY3/)

我希望我能彻底解释自己，如果您需要更多信息，请告诉我。

这是我的wordpress模板代码

```
<div class="box">
    <ul id="ldd_menu" class="ldd_menu">
        <li>
            <span>Menu</span>
            <!-- Increases to 510px in width-->
            <div class="sub_wrap">
                <div class="ldd_submenu">
                    <nav>
                        <li class="ldd_heading"></li>
                        <?php wp_nav_menu(array('menu' => 'main_nav')); ?>
                    </nav>
                    <a class="ldd_subfoot" href="#"> Accessibility Link</a>
                </div>
           </li>
      </ul>
  </div>
  <div></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-04T03:37:16.053

我怀疑您的代码没有处理 wp_nav_menu 方法的输出格式。现在我不确定您的确切版本，但较新的版本会像这样发布。因此，您将获得额外的 div，这是您可能没想到的，并且子菜单的输出方式可能不是您所期望的。另外，正如前面的人所说，您的代码不太正确，缺少一些标签。

```
<div class="menu-id-container">
  <ul class="nav-menu" id="menu-id">
     <li class="..." id=".."><a href="#">LINK</a>
        <ul class="sub-menu">
        <li><a href="#">Child LINK1</a></li>
        </ul>
     </li>
     <li class="..." id="..."><a href="#">LINK2</a></li>
  </ul>
</div> 
```

# mysql - mysql查询未返回预期值

> ID：15293068
> 
> 赞同：0
> 
> 时间：2013-03-08T11:35:40.023
> 
> 标签：mysql, sql

嗨，我正在为以下数据库结构编写一个 mysql 查询。

```
Professor (EMP ID,Name,Status,Salary,Age)
Course(Course ID,Course Name,Points)
Works(Course ID,EMP ID,Class ID)
Assumptions:
Each course has only one instructor in each semester
Status can take values from “Full”, “Associate”, and “Assistant” 
```

我需要执行以下操作。

返回在一堂课中至少教过两门课程的正教授的姓名

```
SELECT p.name
FROM professor p, works w
WHERE p.empid = w.empid
AND p.status = ‘full’
AND w.classid IN (SELECT classid
FROM works
WHERE count(courseid)>1) 
```

返回在 Class 10 中教授课程数量最多的教授的姓名

```
SELECT p.names
FROM professor p, works w
WHERE p.empid =w.empid
AND w.classid IN (SELECT classid
FROM works
WHERE classid = 10
AND coursed = max(coursed)) 
```

但是这些查询返回错误的结果。我是mysql新手，请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T11:41:44.807

像这样试试

```
SELECT 
    p.*,
    COUNT(c.Course_ID) AS TCount
FROM Professor AS P
LEFT JOIN Works AS w ON w.EMP_ID = p.EMP_ID
LEFT JOIN Course AS c ON w.Course_ID = c.Course_ID
GROUP BY p.EMP_ID , c.Course_ID
HAVING TCount > 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T11:46:57.970

第一个的替代答案：

```
SELECT DISTINCT p.empid, p.name
FROM professor AS p 
JOIN works AS w ON
    p.empid = w.empid
JOIN works w2 ON
    w.empid=w2.empid AND w.classid=w2.classid AND w.courseid<>w2.courseid 
```

# c# - MasterPage 中的 ValidationSummary 隐藏成功标签

> ID：15293072
> 
> 赞同：2
> 
> 时间：2013-03-08T11:35:42.550
> 
> 标签：c#, asp.net, master-pages, validationsummary

我有一个`ValidationSummary`and`SuccessLabel`在`MasterPage`
其中`SuccessLabel`有详细信息时，`ValidationSummary`然后验证失败我希望它隐藏`SuccessLabel`并仅显示`ValidationSummary`.

```
<div id="ApplicationStatus" class="ValidationSummaryContainer">
    <asp:Label ID="StatusLabel" CssClass="SuccessSummary" runat="server" 
       Visible="false"></asp:Label>
    <asp:Label ID="WarningLabel" CssClass="WarningSummary" runat="server" 
        Visible="false"></asp:Label>
    <asp:ValidationSummary ID="ErrorValidationSummary" runat="server" 
           CssClass="ValidationSummary" DisplayMode="List"  />
    <asp:CustomValidator ID="ErrorCustomValidator" runat="server"></asp:CustomValidator>
</div>
<div id="ApplicationContent" class="ApplicationContentContainer">
    <asp:ContentPlaceHolder ID="MainContent" runat="server">
    </asp:ContentPlaceHolder>
</div>

protected void Page_Load(object sender, EventArgs e)
{
        if (!IsPostBack)
        {
            StatusLabel.Text = "Successfully loaded record";
        }
}

<asp:Content ID="Content1" ContentPlaceHolderID="MainContentPlaceHolder" runat="server">
       <asp:Textbox ID = "Text1" runat="server"/>
        <asp:RequiredFieldValidator id="InputTextBoxRequiredFieldValidator" runat="server" 
          ControlToValidate="Text1" Visible="false" CssClass="InlineNoWrap" Enabled="true">  
        </asp:RequiredFieldValidator>
        <asp:Button ID = "Button1" runat="server" Text="Submit"/>
 </asp:Content> 
```

我试图在 JavaScript 中找到一种方法来捕获验证错误并隐藏 StatusLabel。我不想在使用 MasterPage 的每个页面上的每个按钮上都放置一个 javascript 函数。

谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T12:02:29.767

您的验证码完全错过了很多字段。

好的，现在我们去你的品脱。

1.  在页面加载事件的标签中设置可见 false
2.  然后成功时间添加标签文本，并设置可见真
3.  您错过了验证和验证组以及显示字段的控制权

请看这个[样本](http://asp-net-example.blogspot.in/2008/10/validationsummary-example-how-to-use.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T11:52:11.510

像这样的东西怎么样：

```
 protected void Submit(object sender, EventArgs e)
    {
        if (IsValid)
        {
            StatusLabel.Visible = true;
        }
        else
        {
            StatusLabel.Visible = false;                
        }
    } 
```

# android - 查看设备中的应用程序日志

> ID：15293080
> 
> 赞同：0
> 
> 时间：2013-03-08T11:36:37.607
> 
> 标签：android, android-emulator

当我的应用程序在设备中执行时发生强制关闭，但在模拟器中工作正常。我怎样才能看到设备的日志错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T11:38:50.027

要查看 logcat 错误，请通过启用打开 LogCat 窗口`Window -> Show View -> LogCat`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T11:40:04.437

Log cat 错误会显示在同一个 Log cat 上。任何设备都不会有额外的 Log cat。

```
Window -> Show View -> Others 
```

寻找原木猫

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T11:40:55.077

您可以使用 catlog 应用程序。或者您可以通过 USB 连接您的手机（确保您已安装手机的驱动程序）并像使用模拟器一样对其进行调试。

# javascript - 附加的 ahref 不会在单击时启动功能

> ID：15293082
> 
> 赞同：-1
> 
> 时间：2013-03-08T11:36:42.143
> 
> 标签：javascript, jquery, html

我有以下情况，我真的不知道为什么它不会触发：

```
$('.tab3').click(function() {
               //console.log("test");
               $('.coda-nav').append('<a href="#" style="position: relative;" id="ref1">blabla</a>');
               $('.coda-nav').append('<a href="#" style="position: relative;" id="ref2">blabla</a>');
               $('.coda-nav').append('<a href="#" style="position: relative;" id="ref3">blabla</a>');
            }); 
```

这很好用。如果我点击 tab3 它会附加 3 个链接！然后：

```
$('#ref2').click(function() {
        console.log("test");
    }); 
```

请告诉我为什么在 ref2 上什么也没发生！

谢谢泰德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T11:38:32.603

因为锚点是在绑定事件*后*添加的`click`，即绑定事件时元素不存在。

您可以使用[事件委托](http://api.jquery.com/on/#direct-and-delegated-events)来修复它：

```
$(".coda-nav").on("click", "#ref2", function() {
    console.log("test");
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T11:39:03.437

看看：[http ://api.jquery.com/on/](http://api.jquery.com/on/)

您的`click`处理程序不会附加到新创建的`<a>`. 您需要`On`即时附加它。

所以会变成：

```
$(".coda-nav").on("click", "#ref2", function() {
    console.log("test");
}); 
```

# jsf - java.lang.IllegalStateException：已在视图中找到组件 ID。发生在 selectOneMenu

> ID：15293086
> 
> 赞同：4
> 
> 时间：2013-03-08T11:37:07.637
> 
> 标签：jsf

在我看来，我有一个`selectOneMenu`如下代码所示：

```
 <h:panelGroup id="mysrvicenodesblock" layout="block">
     <table id="mysrvicenodestab" border="0" width="100%">
    <tr>
          <td align="center" class="underline">node Id</td>
          <td align="center" class="underline">node Name</td>
          <td align="center" class="underline">Go to node</td>                                  
          <td align="center" class="underline">Action</td>
        </tr>
      <c:forEach items="${jbpmAPIUtil.myServiceNodeToComplete}" var="msntoc">
        <tr>
          <td align="center">${msntoc.getId()}</td>
          <td align="center">${msntoc.getName()}</td>
          <td align="center">
         <h:selectOneMenu value="#{jbpmAPIUtil.procNdNameSelectedValue}" id="procnodes">
                <f:selectItem itemLabel="" itemValue="" />
                <f:selectItems value="#{jbpmAPIUtil.procnodes}" var="pn"  itemLabel="# {pn.getName()}" itemValue="#{pn.getId()}" />
<f:ajax event="change" listener="#{jbpmAPIUtil.OnONeMenuProcNdSelChgeHndler}" />
             </h:selectOneMenu>
          </td>                                     
          <td align="center">                                               
          <h:commandLink value="Complete !">
             <f:ajax event="click" listener="#{jbpmAPIUtil.Completemsn}">
             </f:ajax>                                             <f:param value="${msntoc.getWorkitemid()}" name="msntocwiid"/>
                                                 </h:commandLink>
 </td>             

     </tr>
</c:forEach>
</table>
</h:panelGroup> 
```

该组件包含在 a 上`<h:panelGroup layout="block">`，它会定期用 primefaces 刷新`p:poll`。

用于绑定此元素值的 bean 是会话范围的 bean（我不知道这是否也称为“绑定”，此组件上没有“绑定”属性）。

我在很多帖子中读到过这个问题的发生是因为 bean 和视图有不同的范围，但我记得我已经在这种情况下很多次都没有发生过这个问题。

我想确切地知道是哪个绑定导致了这个问题，是否有其他解决方案可以避免这个问题发生。

这是此问题的完整堆栈，当我单击 commandLink 按钮时会发生此问题，因此带有 foreach 循环内容的表将更改（将删除一行，将另外 2 行添加到列表中）

```
SEVERE: +id: j_id1
 type: javax.faces.component.UIViewRoot@c0fee0
  +id: javax_faces_location_HEAD
   type: com.sun.faces.component.ComponentResourceContainer@5be0a8
    +id: j_id2
     type: javax.faces.component.UIOutput@1fa3bee
    +id: j_id3
     type: javax.faces.component.UIOutput@174b989
    +id: j_id4
     type: javax.faces.component.UIOutput@40f2f1
  +id: j_idt2
   type: <?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html>

  +id: j_idt3
   type: <html xmlns="http://www.w3.org/1999/xhtml">

  +id: j_idt4
   type: javax.faces.component.UIOutput@dd874
    +id: j_idt5
     type: 
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>

    <link rel="stylesheet" type="text/css" href="CSS/general.css"/>

<script src="JS/jquery-1.8.3.js"/>
<script src="JS/jquery-ui-1.10.0.custom.js"/>
<script src="JS/jquerygen.js"/>
<script src="JS/general.js"/>

    <title>Xtensus Workflow App </title>

  +id: j_idt6
   type: 

<body>

  +id: j_idt7
   type: javax.faces.component.html.HtmlForm@fdc98d
    +id: j_idt8
     type: 

<div id="ctrldiv">

Id du noeud actuel (le curseur jbpm) : 
    +id: niid
     type: javax.faces.component.html.HtmlOutputText@1bb55d3
    +id: j_idt9
     type: <br/>
Nom du noeud actuel (le curseur jbpm) : 
    +id: cnn
     type: javax.faces.component.html.HtmlOutputText@1ff95a9
    +id: j_idt10
     type: <br/>

    +id: j_idt11
     type: javax.faces.component.html.HtmlCommandLink@baa6f7
    +id: j_idt12
     type: 

<br/>       

<br/>

<H3>#Noeuds en cours d'execution : </H3>
<div>

    +id: mysrvicenodesblock
     type: javax.faces.component.html.HtmlPanelGroup@27d9e5
      +id: j_idt13
       type: 
                            <table id="mysrvicenodestab" border="0" width="100%">
                                <tr>
                                    <td align="center" class="underline">node Id</td>
                                    <td align="center" class="underline">node Name</td>
                                    <td align="center" class="underline">Go to node</td>                                    
                                    <td align="center" class="underline">Action</td>
                                </tr>

      +id: j_idt18
       type: 
                                    <tr>
                                        <td align="center">${msntoc.getId()}</td>
                                        <td align="center">${msntoc.getName()}</td>
                                        <td align="center">

      +id: procnodes
       type: javax.faces.component.html.HtmlSelectOneMenu@527386
        +id: j_idt19
         type: javax.faces.component.UISelectItem@11e7e46
        +id: j_idt20
         type: javax.faces.component.UISelectItems@f45673
      +id: j_idt21
       type: 

                                        </td>                                       
                                        <td align="center">                                               

      +id: j_idt22
       type: javax.faces.component.html.HtmlCommandLink@157be76
        +id: j_idt23
         type: javax.faces.component.UIParameter@1996e15
      +id: j_idt24
       type: 
                                        </td>             

                                    </tr>

      +id: j_idt25
       type: 
                                    <tr>
                                        <td align="center">${msntoc.getId()}</td>
                                        <td align="center">${msntoc.getName()}</td>
                                        <td align="center">

      +id: procnodes
       type: javax.faces.component.html.HtmlSelectOneMenu@a5adc
        +id: j_idt27
         type: javax.faces.component.UISelectItem@1d34eac
        +id: j_idt28
         type: javax.faces.component.UISelectItems@1d20651
      +id: j_idt29
       type: 

                                        </td>                                       
                                        <td align="center">                                               

      +id: j_idt30
       type: javax.faces.component.html.HtmlCommandLink@19cee52
        +id: j_idt31
         type: javax.faces.component.UIParameter@1e27046
      +id: j_idt32
       type: 
                                        </td>             

                                    </tr>

      +id: j_idt33
       type: 
                                    <tr>
                                        <td align="center">${msntoc.getId()}</td>
                                        <td align="center">${msntoc.getName()}</td>
                                        <td align="center">

      +id: procnodes
       type: javax.faces.component.html.HtmlSelectOneMenu@1391a2c
        +id: j_idt35
         type: javax.faces.component.UISelectItem@1e54eb7
        +id: j_idt36
         type: javax.faces.component.UISelectItems@1930089
      +id: j_idt37
       type: 

                                        </td>                                       
                                        <td align="center">                                               

      +id: j_idt38
       type: javax.faces.component.html.HtmlCommandLink@860ba
        +id: j_idt39
         type: javax.faces.component.UIParameter@664ca
      +id: j_idt40
       type: 
                                        </td>             

                                    </tr>

      +id: j_idt14
       type: 
                            </table>

    +id: j_idt15
     type: 
</div>      

</div>

    +id: j_idt16
     type: org.primefaces.component.poll.Poll@1c334de
  +id: j_idt17
   type: 
</body>
</html>

Mar 8, 2013 5:08:49 AM com.sun.faces.application.view.FaceletViewHandlingStrategy handleRenderException
SEVERE: Error Rendering View[/index.xhtml]
java.lang.IllegalStateException: Component ID j_idt7:procnodes has already been found in the view.  
    at com.sun.faces.util.Util.checkIdUniqueness(Util.java:910)
    at com.sun.faces.util.Util.checkIdUniqueness(Util.java:894)
    at com.sun.faces.util.Util.checkIdUniqueness(Util.java:894)
    at com.sun.faces.application.view.FaceletFullStateManagementStrategy.saveView(FaceletFullStateManagementStrategy.java:680)
    at com.sun.faces.application.StateManagerImpl.saveView(StateManagerImpl.java:89)
    at javax.faces.application.StateManager.getViewState(StateManager.java:553)
    at com.sun.faces.context.PartialViewContextImpl.renderState(PartialViewContextImpl.java:416)
    at com.sun.faces.context.PartialViewContextImpl.processPartial(PartialViewContextImpl.java:300)
    at javax.faces.context.PartialViewContextWrapper.processPartial(PartialViewContextWrapper.java:183)
    at javax.faces.component.UIViewRoot.encodeChildren(UIViewRoot.java:981)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1779)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:409)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:125)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1770)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T13:44:16.510

默认情况下，`<c:forEach>`JSTL 不会增加其中组件的子 ID。您要么必须使用 EL 表达式执行此操作，要么使用更适合迭代集合的 JSF 组件，例如`UIRepeat`.

```
<ui:repeat value="#{jbpmAPIUtil.myServiceNodeToComplete}" var="msntoc"> 
```

替换 forEach 组件的以下组件将正确迭代其中的组件生成的 ID，这样页面上将不存在重复的 ID。

注意：只需仔细检查您在页面上使用的是`<h:head>`代替`<head>`和`<h:body>`代替`<body>`。在您的堆栈跟踪中，我觉得您可能有其他相关问题。

# jquery - 使用 jQuery AJAX 发送带单引号的多个数据参数

> ID：15293091
> 
> 赞同：2
> 
> 时间：2013-03-08T11:37:37.730
> 
> 标签：jquery, ajax

我正在使用 ajax jquery 方法将值传递给服务器，但我的问题是我使用了一些值，`single quote` `'`它给了我错误，

ClientManager = "Client's Manager" **<== 这里我用 ' 传递值（单引号）**

* * *

```
 data: "{projectSoid': '" + ProjectId + "','startDate': '" + StartDate + "','endDate': '" + EndDate + "','clientManager': '" + ClientManager + "'}", 
```

和 ajax jquery 方法，错误给我错误：-

**消息：传入的对象无效，应为“：”或“}”。...........**

感染我希望所有字段都允许使用'（单引号）

将传递数据作为 jQuery Ajax 方法的最佳解决方案是什么`data : {`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T11:43:07.363

尝试定义一个对象文字，而不是连接一个字符串。

```
data: {
        "projectSoid": ProjectId,
        "startDate": StartDate,
        "endDate": EndDate,
        "clientManager": ClientManager
      },
          //other entries 
```

# http - 关于 cookie 在 Web 登录系统中的工作原理

> ID：15293093
> 
> 赞同：0
> 
> 时间：2013-03-08T11:37:46.863
> 
> 标签：http, cookies, web

我正在使用 Fiddler 现场查看网站如何在其登录系统中使用 cookie。虽然我有一些 HTTP 知识，但我只是在学习 cookie 以及它们如何在站点中使用。

最初我假设在提交表单时我会看到没有发送任何 cookie，并且响应将包含一些 cookie 信息，然后浏览器会保存这些信息。

事实上，情况似乎正好相反。它是发送信息的请求，服务器什么也不返回。

在摆弄这个问题时，我注意到即使浏览器清除了 cookie，客户端似乎总是向服务器发送 RequestVerificationToken，即使只是在没有登录的情况下四处查看。

为什么会这样？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T21:50:36.407

Cookie 由服务器使用`Set-Cookie`HTTP 响应头设置，也可以通过 JavaScript 设置。

cookie 有一个路径。如果 cookie 的路径与正在请求的文档的路径匹配，则浏览器将在`Cookie`HTTP 请求标头中包含所有此类 cookie。

您必须确保在设置或修改 cookie 时小心谨慎，以避免针对您的用户的 XSS 攻击。因此，在您的登录表单中包含一个隐藏且唯一的秘密可能很有用，并在设置任何 cookie 之前使用该秘密。或者，您可以简单地检查 HTTP`Referer`标头是否与您的站点匹配。否则，恶意站点可以复制您的表单字段，并在他们的站点上创建一个登录表单到您的站点，并执行 form.submit()，有效地注销您的用户，或通过毫无戒心的用户对您的站点执行暴力攻击碰巧正在访问恶意网站。

您提到的`RequestVerificationToken`与 HTTP Cookie 无关，这听起来像是一些用某些特定站点脚本语言编写的站点用来保护其 cookie 设置页面免受 XSS 攻击的实现细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T21:49:07.937

当您点击网站上的页面时，通常响应（您登陆的页面）在 http 响应中包含来自服务器的指令以设置一些 cookie。

网站可能会使用这些来跟踪有关您的行为的信息或保存您未来或短期的偏好。

网站可能会在您第一次访问任何页面或访问特定页面时这样做。

然后，浏览器会将所有已随后续请求设置的 cookie 发送到该域。

想想看，HTTP 是无状态的。您登陆主页并单击将背景设置为蓝色。然后你去了一个画廊页面。下一个请求发送到您的服务器，但服务器不知道您的背景颜色偏好。

现在，如果请求包含一个 cookie，告诉服务器您的偏好，该网站将为您提供正确的偏好。

现在这是一种方式。另一种方式是会话。将 cookie 视为存储在客户端的信息。但是如果服务器需要在服务器端存储一些关于你的临时信息怎么办。可能过于敏感而无法在 cookie 中公开的信息，这些信息是本地的，很容易被拦截。

现在你会问，但 HTTP 是无状态的。正确的。但是服务器可以将有关您的信息保存在地图中，其是会话 ID。此会话 ID 在客户端设置为 cookie 或随参数中的每个请求重新发送。现在服务器只获取密钥但可以查找有关您的信息，例如您是否登录成功，您在系统中的角色等。

哇，这么多的文字，但我希望它有所帮助。如果没有，请随时询问更多。

# jquery - Datatables，如何在表的所有行上绑定事件

> ID：15293094
> 
> 赞同：9
> 
> 时间：2013-03-08T11:37:49.540
> 
> 标签：jquery, datatables

我的数据表工作正常，除了我试图`dblclick`在每一行上添加一个功能，这部分工作。

所以，这是我的代码：

```
oTable = $('#example').dataTable({
    "aaSorting": [[ 1, "desc" ]],
    "bJQueryUI": true,
    "sPaginationType": "full_numbers"
});

/* Add a click handler to the rows */

//This highlights the row selected
$("#example tbody").click(function(event) {
        $(oTable.fnSettings().aoData).each(function (){
                $(this.nTr).removeClass('row_selected');
        });
        $(event.target.parentNode).addClass('row_selected');
});

//this attaches a dblclick event on the row
$("#example tr").dblclick(function() {
        var iPos = oTable.fnGetPosition( this );
        var aData = oTable.fnGetData( iPos );
        var iId = aData[1];
        $('#edit'+iId).click(); //clicks a button on the first cell
}); 
```

行的突出显示对于表的所有行都可以，但`dblclick`仅适用于最初在第一页中呈现的行。当我对数据进行排序/搜索并且显示的数据发生更改时，该`dblclick`事件不适用于第一页中未显示的那些行。

谁能帮忙解开这个谜？谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-08T12:42:27.110

第一个答案近乎完美，但必须进行一些小调整才能使其无法正常工作。

就像在 jquery apidoc [on()](http://api.jquery.com/on/)中一样，您必须`[, selector ]`像我在下面那样添加`"tr"`

```
$("#example").on("dblclick", "tr", function() {
        var iPos = oTable.fnGetPosition( this );
        var aData = oTable.fnGetData( iPos );
        var iId = aData[1];
        $('#edit'+iId).click(); //clicks a button on the first cell
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-12-18T12:46:24.620

如果您需要不同但相似的场景来绑定到数据表中的所有特定类，请参见下面的示例

```
$("#sample_2 tbody").on("click", "a.ApproveLink", approveLinkHandler); 
```

还可以考虑以下有关此问题的官方文档：

> 处理此问题的最佳方法之一是使用 **委托事件**和 jQuery 的 on 方法

[https://datatables.net/examples/advanced_init/events_live.html](https://datatables.net/examples/advanced_init/events_live.html "DOM / jQuery 事件")

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T11:48:50.500

试试这个

```
 $("#example tbody").on("click",function(event) {
        $(oTable.fnSettings().aoData).each(function (){
                $(this.nTr).removeClass('row_selected');
        });
        $(event.target.parentNode).addClass('row_selected');
});

  $("#example tr").on("dblclick",function() {
            var iPos = oTable.fnGetPosition( this );
            var aData = oTable.fnGetData( iPos );
            var iId = aData[1];
            $('#edit'+iId).click(); //clicks a button on the first cell
    }); 
```

我们可以直接在页面加载时加载的数据上使用事件。其他我们需要使用**。**

# c# - 使用 Linq 在 c# 列表中生成缺失的列表值

> ID：15293095
> 
> 赞同：1
> 
> 时间：2013-03-08T11:37:50.217
> 
> 标签：c#, linq

我有一个包含以下类的列表

```
 public class File
{
    public string Name{get;set;}
    public int Year{get;set;}
    public decimal Amount{get;set;}

} 
```

我的列表可能包含即列表

```
Name="File 1" Year=2011 Amount=200
Name="File 2" Year=2012 Amount=400
Name="File 3" Year 2013 Amount=500 
```

我希望将上面的列表转换为包含以下值

```
Name="File 1" Year=2011 Amount=200
Name="File 1" Year=2012 Amount=0
Name="File 1" Year 2013 Amount=0
Name="File 2" Year=2011 Amount=400
Name="File 2" Year=2012 Amount=0
Name="File 2" Year 2013 Amount=0
Name="File 3" Year 2011 Amount=0
Name="File 3" Year=2012 Amount=0
Name="File 3" Year 2013 Amount=500 
```

注意其他金额为0的项目是为缺失年份自动生成的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T11:42:17.667

```
foreach(var name in files.Select(x => x.Name).Distinct())
foreach(var year in files.Select(x => x.Year).Distinct())
{
    var amount = (from file in files
                  where file.Name == name
                     && file.Year == year
                  select (decimal?)file.Amount).SingleOrDefault() ?? 0M;
    Console.WriteLine("Name={0}, Year={1}, Amount={2}",
                  name, year, amount);
} 
```

显然它可以被优化——尤其是作为通过字典查找数量的时候；也许：

```
var amounts = files.ToDictionary(
        file => new {file.Name,file.Year}, file => file.Amount);

foreach(var name in files.Select(file => file.Name).Distinct())
foreach(var year in files.Select(file => file.Year).Distinct())
{
    decimal amount;
    if(!amounts.TryGetValue(new {file.Name,file.Year}, out amount) amount = 0M;
    Console.WriteLine("Name={0}, Year={1}, Amount={2}",
                  name, year, amount);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T11:40:37.663

对于默认值，您可以添加一个构造函数：

```
public class File
{
    public File() { this.Amout = 0; }

    public string Name{get;set;}
    public int Year{get;set;}
    public decimal Amount{get;set;}
} 
```

对于 OrderBy，您可以查看[此示例](https://stackoverflow.com/questions/298725/multiple-order-by-in-linq)

# qt - 为什么我不能在 QApplication::notify() 派生方法中使用 QMessageBox

> ID：15293105
> 
> 赞同：0
> 
> 时间：2013-03-08T11:38:17.937
> 
> 标签：qt, qt4

据我了解，在 Qt 中处理事件循环内发生的异常的方法是覆盖 QApplication::notify() 并在那里处理它。我已经尝试过了，它有效：

```
class Application : public QApplication
{
    Q_OBJECT
public:
    explicit Application( int& argc, char** argv );

    // override to handle out of memory exceptions
    bool notify( QObject* receiver, QEvent* e );

signals:

public slots:

private:

    char* m_buffer;
};

Application::Application(int &argc, char **argv)
    :QApplication( argc, argv )
{
    m_buffer = new char[1024*1024];
}

bool Application::notify(QObject *receiver, QEvent *e)
{
    try
    {
        return QApplication::notify( receiver, e );
    }
    catch( std::bad_alloc& )
    {
        if ( m_buffer )
        {
            delete[] m_buffer;
            m_buffer = NULL;
        }

        // calling QMessageBox from here doesn't work
        // even if release a load of reserved memory
        // don't know why
        QMessageBox::critical( NULL, "Exception", "Application out of memory" );
    } 
```

但是消息框出现时是空白的（即未正确呈现）。我想也许这个过程没有足够的内存。所以我尝试在开始时分配 1MB 内存（参见上面的 m_buffer），然后在 QMessageBox 显示之前释放它。但这也没有用。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:27:18.737

I could be interpretting [QApplication::notify](http://doc-snapshot.qt-project.org/4.8/qcoreapplication.html#notify) wrong, but I'm getting the impression that you're attempting to create a GUI object (QMessageBox) when the Qt event loop crashes. I don't believe that's possible.

For exception safety, my understanding is that you have to wrap the whole QApplication::exec function with a try-catch sequence, as in [the Exception Safety docs](http://qt-project.org/doc/qt-4.8/exceptionsafety.html).

Consider [implementing a custom error handler](http://doc-snapshot.qt-project.org/4.8/qtglobal.html#qInstallMsgHandler) using qCritical and qWarning. I like to redirect those functions to a log file in my temp directory to debug crashes. Of course, your program still crashes unlike in exception handling, but at least you know why. I can provide example code if necessary.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T13:00:33.483

QMessageBox::exec()，由静态便捷方法critical()、warning()等使用，打开一个本地事件循环，只有在消息框关闭后才返回主事件循环。本地事件循环通常是令人讨厌的，在事件处理过程中打开（QApplication::notify）更是如此。您最好使用 QDialog::open 来打开消息框而不阻塞，或者更好的是，推迟消息框：

在您的应用程序类中：

```
Q_INVOKABLE void showMessage( const QString& message ); // in your Application class, does the QMessageBox::critical() call 
```

与其直接调用 QMessageBox::critical() ，不如将其替换为以下内容：

```
QMetaObject::invokeMethod( this, "showMessage", Qt::QueuedConnection, Q_ARG(QString, "Application out of memory") ); 
```

# iphone - 使用 coredata 保存和检索类对象

> ID：15293106
> 
> 赞同：0
> 
> 时间：2013-03-08T11:38:18.087
> 
> 标签：iphone, objective-c, ipad, core-data, xcode4

我想将 uiviewcontroller 类保存到 coredata 中，然后单击按钮从 coredata 中检索它。我已经用 nsarchiver 和 nsunarchiver 试过了。将类转换为 nsdata 并保存到 coredata。但在检索时出现错误：

> -[__NSArrayI 字节]：无法识别的选择器发送到实例 0x6d442a0 我的代码如下

```
// the button press for saving the object

NSData *data = [NSKeyedArchiver archivedDataWithRootObject:viewcontrollerobject];
ViewData *viewdetails=[NSEntityDescription insertNewObjectForEntityForName:@"ViewData" inManagedObjectContext:[self managedObjectContext]];

viewdetails.view = data;
viewdetails.order = [NSNumber numberWithInt:1];
[self.fetchedResultsController performFetch:nil];

//button press for retrieving the class
[self.fetchedResultsController performFetch:nil];

NSData *theData;
theData =  [fetchedResultsController.fetchedObjects valueForKey:@"view"];

viewcontroller *newviewcontrollerobject; 
newviewcontrollerobject=[NSKeyedUnarchiver unarchiveObjectWithData:theData];

[newviewcontrollerobject.view setFrame:CGRectMake(200, 200, 300, 150)];
[self.view addSubview:newviewcontrollerobject.view]; 
```

请帮我更正这段代码

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T12:32:19.790

我强烈反对这种应用程序设计。您应该使用 Core Data 来持久化*Model*的数据，而不是任何*View*，更不用说*Controller*了。

请阅读**[“Cocoa 核心能力：模型-视图-控制器”](http://developer.apple.com/library/ios/#documentation/general/conceptual/DevPedia-CocoaCore/MVC.html)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T12:14:48.590

这行代码返回 NSArray 的 NSData 对象：

```
[fetchedResultsController.fetchedObjects valueForKey:@"view"]; 
```

所以这将起作用：

```
NSArray* theDataArray =  [fetchedResultsController.fetchedObjects valueForKey:@"view"];
theData =  [theDataArray lastObject]; 
```

# android - 将九个补丁应用于android中的不规则形状图像

> ID：15293107
> 
> 赞同：1
> 
> 时间：2013-03-08T11:38:19.743
> 
> 标签：android

我正在努力将九个补丁应用于android中的图像。我找不到解释性的android文档。以下是我想要应用九个补丁的图像。我对九个补丁没有正确的理解，因为我是android的新手.锯状结构在更大的屏幕尺寸上被拉伸。如果有人可以提供关于如何在 android 中创建九个补丁的有用链接将是很大的帮助。是否有任何应用程序或工具可以自动在图像上创建九个补丁？还有我们可以在圆形图像上应用九个补丁吗？

![在此处输入图像描述](../Images/93a149884570a8c99cb8d4ea2ac98900.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T11:43:41.827

谷歌是你的朋友查看这些教程：

[http://radleymarx.com/blog/simple-guide-to-9-patch/](http://radleymarx.com/blog/simple-guide-to-9-patch/)

[http://www.youtube.com/watch?v=RoCDFQnWrt8](http://www.youtube.com/watch?v=RoCDFQnWrt8)

# iphone - 如何将带有 NSNumber 的 NSMutable 数组转换为字符串

> ID：15293108
> 
> 赞同：-5
> 
> 时间：2013-03-08T11:38:25.287
> 
> 标签：iphone, ios

我的数组包含它们在 NSNumber 中的 id 我如何将它们转换为字符串我的数组如下所示

```
1494447926,
1537064431,
1545735176,
1574825141,
1604834983,
1829486110,
1838260338,
1846543841,
1850381039,
100000039842949,
100000077723868,
100000103091995,
100000126558358,
100000130915431,
100000139092102,
100000157330187,
100000157646688,
100000197141710,
100000243178639,
100000249947961, 
```

请给我示例代码以将其转换为字符串

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T11:41:03.177

用这个。

```
 NSString *str = [NSString stringWithFormat:@"%i",number]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T11:41:23.887

```
for(int i=0;i<[arr count];i++){
str = [NSString stringWithFormat:@"%d",[arr objectAtIndex:i]];
[newArr addObject:str];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T11:41:43.127

```
NSString *str = [NSString StringWithFormat:@"%d",1494447926]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T11:41:54.323

**只在 Google 上搜索**- `convert int to NSString`，顺便显示多个答案，您只需要使用`[NSString stringWithFormat:@"%d",YourIntValue]`

```
for (int i=0; i < MyArray.count; i++)
{
     NSString * String =[NSString stringWithFormat:@"%d", [MyArray objectAtIndex:i]];
     NSLog(@"%@",String);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T11:42:21.203

您可以使用`stringWithFormat`

```
 NSString *str = [NSString stringWithFormat:@"%d", [YourArray objectAtIndex:index]]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-08T11:45:52.250

您不能将整数存储到数组中。如果您从服务器收到此响应，则每个都是 NSNumber。您可以将其类型转换为 NSString。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-08T11:48:07.203

做这个

```
NSArray *ll=[NSArray arrayWithObjects:@"1",@"2",@"3", nil];
NSString *strinList=[NSString stringWithFormat:@"%@",[ll objectAtIndex:0]]; 
```

试试这个，如果您需要其他帮助，我在这里。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-08T11:59:26.387

首先数组不能存储整数。它必须在 NSNumber 中，或者在 NSString 本身中。

在任何一种情况下，您都可以通过附加它们来创建一个长字符串，

```
NSString *string=[yourArray componentsJoinedByString:@","]; 
```

或者，如果您希望每个值都作为字符串，那么您需要创建那么多字符串然后访问它们。

```
 NSArray *numbersToStrings=[NSArray new];
 for(id element in yourArray){
     [numbersToStrings addObject:[NSString stringWithFormat:@"%@",element];
 } 
```

这里`numbersToStrings`包含所有值作为字符串。

# c++ - 在 C++ 中删除字符数组的内容

> ID：15293111
> 
> 赞同：0
> 
> 时间：2013-03-08T11:38:27.737
> 
> 标签：c++, arrays

我已将字符数组初始化为： char Buffer[1000]={0}; 在这个数组中，数据从一个套接字接收并显示每次我显示这个数组的内容时，我想再次将它的所有内容初始化为零。如果我不这样做并再次使用相同的数组从套接字读取数据，也会显示数组中存在的一些旧数据。在第二次接收数据之前，我使用 memset() 函数再次用零初始化数组的所有内容，但它不起作用。在 c/c++ 中有没有其他方法可以做到这一点？寻求帮助:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T11:51:53.187

的合约`recvfrom`不保证在接收到的消息结束和缓冲区结束之间内存会发生什么。这就是`recvfrom`返回*有效*字节数的原因。 **缓冲区的其余部分没有改变，它被垃圾覆盖。**

改变

```
memset(receiveBuffer,'\0',1000); 
recv_len = recvfrom(socketIdentifier, receiveBuffer, sizeof(receiveBuffer), 0, (struct sockaddr *) &clientSocket, &clientSocketLength); 
```

到

```
recv_len = recvfrom(socketIdentifier, receiveBuffer, sizeof(receiveBuffer), 0, (struct sockaddr *) &clientSocket, &clientSocketLength);
if (recv_len > 0)
    memset(receiveBuffer + recv_len, 0, 1000 - recv_len); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T11:46:30.237

在接收和显示数据后，运行一个从 0 到 999 的循环以重置数组的内容。

# javascript - 在 knockout.js 中执行所有 observableArray 依赖项后如何执行函数

> ID：15293115
> 
> 赞同：6
> 
> 时间：2013-03-08T11:38:45.423
> 
> 标签：javascript, jquery, knockout.js

我有一个 observableArray。我想在从 observableArray 中删除或添加项目后以及在完成其所有依赖项订阅调用后执行一个函数。喜欢 ：

```
 observableArray.push(newObject);

 //I can't put my function call at this point because if any subscription is..
 //with newObject or observableArray will execute asynch, and i.. 
 //want my function to execute after all such subscription execution. 
```

有没有办法在淘汰赛中实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:00:20.633

我不确定是否`observableArray.push()`会返回 true，但试一试；

```
if (observableArray.push(newObject)) {
    console.log(observableArray);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T12:50:13.693

我认为事件是异步触发的，所以我编写了以下[Live JSFiddle](http://jsfiddle.net/sKUcc/) ：

```
var flagUpdater = ko.observable(0),
    aList = ko.observableArray(["Foo", "Bar", "Baz"]);

flagUpdater.subscribe(function() {
  console.log("Change the flag now!");
});

aList.subscribe(function() {
  console.log("Schedule flag update");
  flagUpdater("blah");
});

aList.push("Qoo"); 
```

但它不起作用。似乎所有回调都是同步处理的，即一旦修饰函数（`push()`例如）返回，所有回调都已经返回。[因此，您可以在操作数组（实时）](http://jsfiddle.net/sKUcc/2/)后简单地设置标志：

```
aList.push("Qoo");
flag = "CHANGED";
console.log("Flag is now " + flag); 
```

# ruby-on-rails - 创建 ruby db 时延迟符号绑定失败

> ID：15293118
> 
> 赞同：6
> 
> 时间：2013-03-08T11:38:45.847
> 
> 标签：ruby-on-rails, ruby, database

我正在尝试在 Rails 上安装 ruby​​，到目前为止，所有内容都已安装，但是当我尝试使用创建数据库时`rake db:create`，出现一个奇怪的错误：

> dyld：惰性符号绑定失败：找不到符号：_mysql_get_client_info 引用自：/Library/Ruby/Gems/1.8/gems/mysql2-0.3.11/lib/mysql2/mysql2.bundle 预期在：平面命名空间
> 
> dyld：找不到符号：_mysql_get_client_info 引用自：/Library/Ruby/Gems/1.8/gems/mysql2-0.3.11/lib/mysql2/mysql2.bundle 预期在：平面命名空间
> 
> 跟踪/BPT 陷阱：5

我正在开发 osx 山狮最新更新。有没有人有适合我的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T12:07:50.100

你可以试试这个。

```
sudo gem install mysql2 — –with-mysql-config=/usr/local/mysql/bin/mysql_config 
```

请务必使用您的位置修改 mysql 配置路径。

您可以使用以下命令确定这一点。

```
locate mysql_config 
```

利用上面命令给出的路径。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-01T10:11:39.450

该消息告诉您链接了错误的版本 32 与 64

在 OSX 上，您可以看到安装的 mysql 上的所有版本

```
cd /usr/local/ 
```

并在 /usr/local/mysql-xxxx/bin/mysql_config 中找到正确的配置

就我而言，它是：

```
gem uninstall mysql2
sudo gem install mysql2 -- 
--with-mysql-config=/usr/local/mysql-5.5.27-osx10.6-x86_64/bin/mysql_config 
```

如此处所述：[https ://www.ruby-forum.com/topic/1440086](https://www.ruby-forum.com/topic/1440086)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-23T04:10:06.803

关于这个有很多问题，至少有同样多的答案在某些时候有效，但在其他时候无效。在尝试了大多数之后，我注意到 gem 是 64 位的，而 mysql 安装是 32 位的。

要解决这个问题：

*   安装 64 位 mysql
*   在 /usr/local 中设置符号链接以指向 64 位版本
*   在您的配置文件中设置 PATH 和 DYLD_LIBRARY_PATH 以包含正确的版本
*   卸载 mysql2 gem
*   安装 mysql2 gem
*   ruby 现在与 mysql 配合得很好！

我没有包含确切的代码，因为这往往会随您的环境而变化。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-25T16:44:28.680

我在这个问题上遇到了困难。我尝试了上面所有的答案，所以我无法确定是什么组合导致了修复。我已经安装了 mysql 并从 mysql 的网站重新安装。在我遵循以下操作后，它终于开始工作了。

这是在 Mavericks 上使用 rails 4 并安装了 brew

```
brew install mysql 
```

我不推荐这个过程.. 只是注意到它在经历了数小时的挫折后对我有用。

```
ln -sfv /usr/local/opt/mysql/*.plist ~/Library/LaunchAgents
launchctl load ~/Library/LaunchAgents/homebrew.mxcl.mysql.plist

sudo gem uninstall mysql
gem uninstall mysql2
gem install mysql
gem install mysql2 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-14T08:56:26.317

您需要安装 64 位 MySql 服务器。不要忘记重新安装 mysql gem。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-21T08:53:37.023

I had same problem. mysql2 version was 0.4.9, downgraded it to 0.4.5 and problem solved

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-06-11T18:30:16.237

由于某种原因，我安装了两个版本的 mysql（32 位和 64 位）。

确保您的 $MYSQL 环境变量（很可能在 ~/.bash_profile 或 ~/.profile 中找到）指向 64 位版本。

正如其他答案所提到的，在安装 gem 时，还要确保指向正确的 mysql 安装。

# android - android运行时报错震动

> ID：15293123
> 
> 赞同：0
> 
> 时间：2013-03-08T11:38:56.440
> 
> 标签：android, runtime-error, android-4.0-ice-cream-sandwich

![在此处输入图像描述](../Images/a6ea34bc6d77ae7409b0cb647c86a4b2.png) 我的应用中只有 2 个振动呼叫

```
1\. Vibration Call 

listView.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, final View view,
                        int position, long id) {
...
    vibrator.vibrate(200);
...}
}

2\. Vibration Call    

public void onSensorChanged(SensorEvent event) {
            if (event.sensor.getType() == Sensor.TYPE_ACCELEROMETER) {
    }
    ....
//z axes accelerator changes
    long[] pattern = { 0, 200, 200 };
                    vibrator.vibrate(pattern, 3);
    }} 
```

我认为第一个是缓和错误。

我真的没有看到任何错误。

这是我第一次编程振动。

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T12:09:57.760

目前最好的解决方案是

```
Handler handler = new Handler();
handler.post(new Runnable() {
        public void run() {
vibrator.vibrate(200);
        }

});
} 
```

应用程序不会崩溃，但振动有时会失败

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-08T11:46:37.493

我认为这会奏效

```
long[] pattern = new long[]{ 0, 200, 200 };
                    vibrator.vibrate(pattern, 3); 
```

# asp.net - 触发ASP.NET网站服务器端推送的方法有哪些

> ID：15293124
> 
> 赞同：2
> 
> 时间：2013-03-08T11:38:57.057
> 
> 标签：asp.net, signalr

我们正在实施 Signalr 以向浏览器客户端提供实时更新。但是我们目前陷入困境，因为我们需要让 http 服务器本身（IIS+ASP）检测来自数据库和外部服务或任何其他来源的更改而不进行轮询？我相信这应该是所有实时网站的常见问题（无论服务器端推送 SignalR、Comet 或 WebSync 使用什么技术）。请提供在这种情况下使用的一般方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-10T16:20:25.270

如果可以，请在更新数据库的任何代码中引发事件。使用该事件触发消息发布。

```
Ready to update database -> Update database
                         -> Publish to WebSync 
```

如果您无法控制更新数据库的代码，请使用[SqlDependency](http://msdn.microsoft.com/en-us/library/62xk7953.aspx)类。它允许您定义一个 SELECT 语句，然后在该查询的结果发生变化时通知您。使用通知事件触发消息发布。

```
Update database -> SqlDependency -> Publish to WebSync 
```

# android - 如何使用 FB Android SDK 3 发布交互式 Flash？

> ID：15293130
> 
> 赞同：0
> 
> 时间：2013-03-08T11:39:07.033
> 
> 标签：android, facebook, post, facebook-android-sdk

我正在尝试从网站发布基本的交互式 Flash 内容，这些内容可以直接在墙贴本身中查看，我正在尝试做一些[这里](http://facebook.stackoverflow.com/questions/tagged/hackbook-for-android)描述的事情（查看 paranoma 图像），这在边界意义上是在帖子本身中查看 Flash 内容。但是该[链接](http://facebook.stackoverflow.com/questions/tagged/hackbook-for-android)显示了使用以前的 SDK 的示例，这是我编写的代码，它似乎无法正常工作

```
Bundle postParams = new Bundle();
            postParams.putString("name", "Facebook SDK for Android");
            postParams.putString("caption", "Build great social apps and get more installs.");
            postParams.putString("description", "The Facebook SDK for Android makes it easier and faster to develop Facebook integrated Android apps.");               
            postParams.putString("type", "video");
            postParams.putString("video:width", "560");
            postParams.putString("video:height", "400");
            postParams.putString("video:type", "application/x-shockwave-flash");
//            postParams.putString("link", "http://patrickcheatham.com/wp-content/interactives/panoramas/_common/krpano.swf?" +
//                  "pano=http://patrickcheatham.com/wp-content/interactives/panoramas/201012_shanghai_bund/tour_facebook.xml");
            postParams.putString("picture", "http://patrickcheatham.com/wp-content/uploads/2011/03/shanghai_thumbnail.jpg"); 
```

**笔记：**

1.  要发布的内容尚未完全结构化，因此使用虚拟数据。
2.  FB 应用程序完美地贴在墙上，而不是它应该的方式。

如果我遗漏了什么，请告诉或者如果您需要其他信息，请索取

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T06:00:48.137

在通过[Graph API-Post](http://developers.facebook.com/docs/reference/api/post/)之后，我开始了解`source`并且做到了，也`type`应该做到了`application/x-shockwave-flash`。

```
Bundle postParams = new Bundle();
postParams.putString("message", "the message is from DemoApp");
postParams.putString("name", "Panorama images");
postParams.putString("caption", "Test for viewing panorama images in Facebook");
postParams.putString("description", "The Facebook SDK for Android");
postParams.putString("type","application/x-shockwave-flash");              
postParams.putString("source", "http://patrickcheatham.com/wp-content/interactives/panoramas/_common/krpano.swf?" 
                            +"pano=http://patrickcheatham.com/wp-content/interactives/panoramas/201012_shanghai_bund/tour_facebook.xml");
postParams.putString("picture", "http://patrickcheatham.com/wp-content/uploads/2011/03/shanghai_thumbnail.jpg"); 
```

# mysql - 如何区分涉及连接的查询中具有相同名称的字段

> ID：15293131
> 
> 赞同：0
> 
> 时间：2013-03-08T11:39:11.900
> 
> 标签：mysql

我有一个`MySQL`看起来像这样的查询

```
SELECT t.*, b.* FROM tbl_t AS t
JOIN tbl_b AS b ... 
```

现在，`tbl_t`两者`tbl_b`都包含一个名为`id`. 我知道我可以列出所有字段并使用这样的别名：

```
SELECT t.id AS tbl_t_id, t.sth, b.id AS tbl_b_id... 
```

但是字段很多，我需要所有字段，所以我不想那样列出它们。

请问，有没有更好或更短的方法来区分`ids`不同表或正确访问它们？谢谢你。

# arrays - 将多个变量传递给参数

> ID：15293134
> 
> 赞同：-1
> 
> 时间：2013-03-08T11:39:21.973
> 
> 标签：arrays, powershell, powercli

语法：New-VirtualSwitch [-VMHost] [-Name] [[-NumPorts] ] **[[-Nic] String[]]**

我正在使用上面的 cmdlet 在 vSphere 中添加一个新的 vSwitch，我所缺乏的知识是如何使用代表四个 NIC 的四个复选框，并在选中时传递给 -Nic 参数。

例如下面的行不通

```
New-VirtualSwitch -VMHost $comboBox611.SelectedItem.toString() -Name $textBox611.Text -NumPorts 200 **-Nic $nic0,$nic1,$nic2,$nic3** -Mtu $textBox612.Text -Confirm 
```

如何将每个复选框的变量传递给字符串数组，因为语法显示它可以完成？

```
$handler_linkLabel601_LinkClicked= 
{
if ($networkdataGridView.CurrentRow.Cells['VM Host'].Value.toString() -gt " ")
{
Add-Type -AssemblyName System.Windows.Forms
$form601 = New-Object Windows.Forms.Form
$form601.Size = New-Object Drawing.Size (250,270)
$form601.StartPosition = "CenterScreen"

$label611.Size = New-Object Drawing.Size (70,40)
$label611.Location = New-Object System.Drawing.Size (10,15)
$label611.Text = "vSwitch Name:"

$textBox611.Size = New-Object Drawing.Size (100,30)
$textBox611.Location = New-Object System.Drawing.Size (90,15)
$textBox611.Name = "vSwitch Name"

$label612.Size = New-Object Drawing.Size (50,20)
$label612.Location = New-Object System.Drawing.Size (10,55)
$label612.Text = "Host:"

$vmhostlist = Get-VMHost
    foreach ($vmhost in $vmhostlist)
    {
        $comboBox611.Items.add($vmhost.name.toString())
    }

$comboBox611.Size = New-Object Drawing.Size (100,20)
$comboBox611.Location = New-Object System.Drawing.Size (90,50)

$checkBox611.Size = New-Object Drawing.Size (20,20)
$checkBox611.Location = New-Object System.Drawing.Size (100,80)
# Add Click-Event
$checkBox611.Add_CheckStateChanged({
    If ($checkBox611.Checked) {
        $global:nic0 = "vmnic0"
    } Else {
         $global:nic0 = ""
    }
})
$checkBox612.Size = New-Object Drawing.Size (20,20)
$checkBox612.Location = New-Object System.Drawing.Size (170,80)
$checkBox611.Add_CheckStateChanged({
    If ($checkBox611.Checked) {
         $global:nic1 = "vmnic1"
    } Else {
         $global:nic1 = ""
    }
})
$checkBox613.Size = New-Object Drawing.Size (20,20)
$checkBox613.Location = New-Object System.Drawing.Size (100,100)
$checkBox611.Add_CheckStateChanged({
    If ($checkBox611.Checked) {
        $global:nic2 = "vmnic2"
    } Else {
         $global:nic2 = ""
    }
})
$checkBox614.Size = New-Object Drawing.Size (20,20)
$checkBox614.Location = New-Object System.Drawing.Size (170,100)
$checkBox611.Add_CheckStateChanged({
    If ($checkBox611.Checked) {
         $global:nic3 = "vmnic3"
    } Else {
         $global:nic3 = ""
    }
})
$label613.Size = New-Object Drawing.Size (80,20)
$label613.Location = New-Object System.Drawing.Size (10,140)
$label613.Text = "MTU Size:"

$textBox612.Size = New-Object Drawing.Size (100,20)
$textBox612.Location = New-Object System.Drawing.Size (90,140)
$textBox612.Name = "MTU"

$button = New-Object System.Windows.Forms.Button
$button.Size = New-Object Drawing.Size (90,30)
$button.Location = New-Object System.Drawing.Size (70,200)
$selectedvmhost = ($comboBox611.SelectedItem.toString())
$button.add_click({test})
$button.Text = "Add New vSwitch"
$form601.Controls.Add($button)
$form601.Controls.Add($textBox611)
$form601.Controls.Add($textBox612)
$form601.Controls.Add($label611)
$form601.Controls.Add($label612)
$form601.Controls.Add($label613)
$form601.Controls.Add($comboBox611)
$form601.Controls.Add($checkBox611)
$form601.Controls.Add($checkBox612)
$form601.Controls.Add($checkBox613)
$form601.Controls.Add($checkBox614)
$form601.ShowDialog()
}
ELSE
{}
}
function test
{
$nic = @($global:nic0,$global:nic1,$global:nic2,$global:nic3 | ? {-not [string]::IsNullOrEmpty($_)})
 if ( $nic.count )
    {
        New-VirtualSwitch -VMHost $comboBox611.SelectedItem.toString() -Name $textBox611.Text -NumPorts 200 -Nic $nic -Mtu $textBox612.Text -Confirm
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:35:39.907

正如 CB 所说，将 $nic0 替换为 $global:nic0，将 $nic1 替换为 $global:nic1 等，然后测试是

```
function test
{
    $nic = @($global:nic0,$global:nic1,$global:nic2,$global:nic3 | ? {-not [string]::IsNullOrEmpty($_)})
    if ( $nic.count )
    {
        New-VirtualSwitch -VMHost $comboBox611.SelectedItem.toString() -Name $textBox611.Text -NumPorts 200 -Nic $nic -Mtu $textBox612.Text -Confirm
    }
} 
```

# php - XML 发布的值突然“丢失”了 text/xml 内容类型

> ID：15293137
> 
> 赞同：1
> 
> 时间：2013-03-08T11:39:36.260
> 
> 标签：php, rest, symfony

我一直在开发一个“接口”，它是我的一些客户，可以调用一个 API，将一个 XML 结构传递给它，然后接收另一个 XML。

我一直在创建路线、方法等，并尝试使用 cURL 来发布我的数据：一切都像魅力一样。

# 但

....如果我添加`Content-Type: text/xml; charset=utf-8`到请求的标题中，突然间，在`POST`变量中，就什么都没有了。

知道这里发生了什么吗？

# 笔记

显然我没有添加任何代码，它非常简单，由一个路由（标准 symfony2 路由）、一个方法（转储 POST）和包含 xml 的调用组成。
这是调用代码

```
$ch = curl_init();    
curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);
curl_setopt($ch, CURLOPT_USERPWD, 'xxxxxxx:yyyyyy'); //where xxxxxx:yyyyy is setted but now censored

curl_setopt($ch, CURLOPT_URL, $this->url); // set url to post to
curl_setopt($ch, CURLOPT_HTTPHEADER, array("Content-Type: text/xml; charset=utf-8")); //without this all works
curl_setopt($ch, CURLOPT_POSTFIELDS, $this->message); 
```

像这样的东西在哪里`$message`（只是一个例子）

```
<?xml version="1.0" encoding="UTF-8"?>
<ROOT>
 <Message Option="1">Option 1</Message>
</ROOT> 
```

* * *

经过几天的调试、头痛等，我发现了一些让我很开心的东西，但这对我来说听起来很奇怪。

如果我记录传入的请求，似乎什么都没有发布给我（即使我发布了一些 xml）。

**但是**，如果我`$logger->debug(__CLASS__.' '.$this->get("request")->getContent());`在记录所有传入请求之前添加，则下一个请求将使用我发布的所有参数进行记录。
这听起来像是一种“延迟加载”。因此，通过调用`$this->get("request")->getContent()`我的控制器，我可以得到我想要的（xml 发布的参数）

有人可以帮我理解吗？

# exception - Erlang 中的异常处理

> ID：15293141
> 
> 赞同：0
> 
> 时间：2013-03-08T11:39:45.830
> 
> 标签：exception, erlang

我正在使用 eredis erlang 客户端，我是 Erlang 的新手。我想知道以下功能可能有什么问题：

```
foo(Host, Port) -> 
    case catch eredis:start_link(Host, Port) of
        {connection_error, {connection_error, _}} -> {error, "failed"};
        {ok, Connection} -> {"done"};
        _ -> {error, "Unknown"}
    end. 
```

我的理解是，鉴于上述功能和有效的 Redis 主机：端口，例如 localhost:6379，那么如果我这样做：

```
mymodule:foo('localhost', 6379). 
```

我应该得到答案

```
{"done"} 
```

而如果例如我这样做：

```
mymodule:foo('loc', 6379). 
```

我应该得到：

```
{error, "failed"} 
```

但在后一种情况下，我得到的是：

```
** exception exit: {connection_error,{connection_error,nxdomain}} 
```

有人可以解释一下我在这里做错了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T12:07:27.743

问题可能是您的异常源于`eredis_client`您使用启动链接启动的 gen_server 。它应该返回`{error, Term}`给你并且永远不会在那里抛出异常。您也与流程相关联，因此您可能会因此而死亡。

很少需要在 Erlang 中进行异常处理。在这里你可以直接处理错误

```
case eredis:start_link(Host, Port) of
  {ok, Pid} -> {ok, Pid};
  {error, Reason} -> {error, Reason}
end. 
```

应该足够了。事实上，你可以这样做

```
{ok, Pid} = eredis:start_link(Host, Port) 
```

如果暂时出现问题，请使用崩溃。您看到的错误`nxdomain`是因为您没有 name `'loc'`。

# python - 连接同一字典中两个键的值

> ID：15293142
> 
> 赞同：1
> 
> 时间：2013-03-08T11:39:48.057
> 
> 标签：python, dictionary

我有一本像这样的字典：

```
a = {'date' : ['2012-03-09', '2012-01-12', '2012-11-11'],
     'rate' : ['199', '900', '899'],
     'country code' : ['1', '2', '44'],
     'area code' : ['114', '11', '19'],
     'product' : ['Mobile', 'Teddy', 'Handbag']} 
```

然后我使用 zip 函数来连接这些值：

```
data = [(a,b,c+d,e) for a,b,c,d,e in zip(*a.values())] 
```

输出：

```
data = [('2012-03-09', '199', '1114', 'Mobile'),
        ('2012-01-12', '900', '211', 'Teddy'),
        ('2012-11-11', '899', '4419', 'Handbag')] 
```

如果我想让函数自己搜索“国家代码”和“区号”，然后合并它们怎么办。请问有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T11:58:12.197

一种合并“列”的通用方法，可让您指定预期的列以及预先合并的内容：

```
def merged_pivot(data, *output_names, **merged_columns):
    input_names = []
    column_map = {}
    for col in output_names:
        start = len(input_names)
        input_names.extend(merged_columns.get(col, [col]))
        column_map[col] = slice(start, len(input_names))
    for row in zip(*(data[c] for c in input_names)):
        yield tuple(''.join(row[column_map[c]]) for c in output_names) 
```

你打电话给：

```
list(merged_pivot(a, 'date', 'rate', 'code', 'product', code=('country code', 'area code'))) 
```

传入：

*   映射列表
*   构成输出的每一列（`'date', 'rate', 'code', 'product'`在上面的例子中）
*   输出中由输入列的合并列表组成的任何列（`code=('country code', 'area code')`在示例中，`code`输出中由合并`country code`和形成`area code`）。

输出：

```
>>> list(merged_pivot(a, 'date', 'rate', 'code', 'product', code=('country code', 'area code')))
[('2012-03-09', '199', '1114', 'Mobile'), ('2012-01-12', '900', '211', 'Teddy'), ('2012-11-11', '899', '4419', 'Handbag')] 
```

或者，稍微重新格式化：

```
[('2012-03-09', '199', '1114', 'Mobile'), 
 ('2012-01-12', '900', '211', 'Teddy'),
 ('2012-11-11', '899', '4419', 'Handbag')] 
```

如果您需要做的只是分别处理每一行，您也可以只循环它的输出，而不是调用生成`list()`器：`merged_pivot()`

```
columns = ('date', 'rate', 'code', 'product')
for row in merged_pivot(a, *columns, code=('country code', 'area code')):
    # do something with `row`
    print row 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T11:42:10.210

您必须自己定义键的顺序（否则`a.values`以任意顺序返回）。我将您的原始字典重命名为`dd`：

```
[(a,b,c+d,e) for a,b,c,d,e in zip(*(dd[k] for k in ('date', 'rate', 'country code', 'area code', 'product')))] 
```

返回

```
[('2012-03-09', '199', '1114', 'Mobile'),
 ('2012-01-12', '900', '211', 'Teddy'),
 ('2012-11-11', '899', '4419', 'Handbag')] 
```

# android - Android ProgressDialog 无法添加取消按钮

> ID：15293146
> 
> 赞同：1
> 
> 时间：2013-03-08T11:40:03.867
> 
> 标签：android, eclipse, button, compilation

我想在我的进度对话框中添加一个取消按钮，但我无法编译代码。IDE（eclipse）说代码有错误但我不知道出了什么问题？

```
ProgressDialog ASYN_DIALOG = new ProgressDialog(getBaseContext());
ASYN_DIALOG.setMessage("Awaiting...");
ASYN_DIALOG.setButton("Cancel", new OnClickListener() {

    @Override
    public void onClick(DialogInterface dialog, int which) {
       Log.e("ANDR: ", "Cancel clicked !");     
    }
}); 
```

我正在使用 API lvl 10 (Android 2.3.3)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T11:49:16.710

`setButton`您使用的方法已被弃用（尽管它应该仍然有效）。此外，您可能希望在显示对话框之前添加按钮。尝试：

```
myDialog = new ProgressDialog(this);
myDialog.setMessage("Loading...");
myDialog.setCancelable(false);
myDialog.setButton(DialogInterface.BUTTON_NEGATIVE, "Cancel", new DialogInterface.OnClickListener() {
    @Override
    public void onClick(DialogInterface dialog, int which) {
        dialog.dismiss();
    }
});
myDialog.show(); 
```

# c++ - 在linux中使用c ++强制删除文件

> ID：15293153
> 
> 赞同：1
> 
> 时间：2013-03-08T11:40:33.937
> 
> 标签：c++, linux, file

我有一个在 linux 服务器上运行的 c++ 代码。在代码中，我使用函数`unlink(filename)`来删除文件。由代码本身生成的临时文件已成功删除。但是我手动放置的文件，我的代码无法删除它们。可能是什么原因？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T11:45:37.067

尝试这个：

```
#include <errno.h>
#include <string.h> 
```

...

```
if (unlink(filename) == -1) {
    fprintf(stderr, "File '%s' unlink error (%d): %s\n", filename, errno, strerror(errno));
    // or just use perror("unlink") for less customizable error message
    // note: calling other functions before printing may change errno value
} 
```

生成的错误消息应揭示问题所在。

这是[errno 手册页](http://linux.die.net/man/3/errno)，[unlink 手册页](http://linux.die.net/man/2/unlink)将告诉它可以返回哪些错误。

* * *

嗯，因为这实际上是一个 C++ 问题，您可以并且可能应该替换`fprintf`为`std::cerr`，但在这种情况下，*可能*有必要先这样做`int errtmp = errno`并使用它，以避免 iostream 在它被检查之前弄乱它。

`::unlink(filename)`如果您想明确表示它是顶级名称空间中的一个符号，您也可以编写，至少有些人认为即使在不必要的情况下也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T13:19:00.250

例如，`rm -f`工作方式是，如果文件具有不允许删除的保护，它会尝试更改文件保护和所有权，使用`chmod()`和`chown()`函数“使删除文件成为可能”。只有当用户是`root`或文件实际上属于运行程序的用户时，这才真正保证工作。

请注意，这取决于系统，您不能编写更改文件权限等的代码，以在 Windows 和类 Unix 操作系统上都可以使用，如果您想在 Symbian OS 上执行此操作，那将是一个关于如何做的第三个变体虽然`chmod()`在某些情况下可能有“Posix compatible”可用。

# isabelle - 如何删除具有特定属性的列表中的所有元素？

> ID：15293156
> 
> 赞同：1
> 
> 时间：2013-03-08T11:40:39.990
> 
> 标签：isabelle

我想匹配并删除与`l :: 'a list`谓词匹配的那些元素`P :: ('a => bool)`

完成此类任务的最佳方法是什么？如何找到可能对我有帮助的现有功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T12:22:51.157

查找您期望存在的函数的一种方法是 Isabelle 文档中的文档[What's in Main](http://isabelle.in.tum.de/dist/Isabelle2013/doc/main.pdf)。它简要概述了`Main`Isabelle/HOL 理论提供的主要类型、功能和语法。

如果您查看文档中的 List 部分，您会发现该函数`filter`似乎具有正确的类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T11:40:39.990

**短篇小说：**使用`find_consts`

**很长的故事：**

*这是克服此类问题的方法。*

中`Main`，有`List.dropWhile`

```
List.dropWhile :: "('a => bool) => 'a list => 'a list" 
```

但是，它只会从一开始就删除。这可能不是预期的功能。

```
value "List.dropWhile (λ x. x = ''c'') [''c'', ''c'', ''d'']"
"[''d'']"

value "List.dropWhile (λ x. x = ''c'') [''d'', ''c'', ''c'']"
"[''d'', ''c'', ''c'']" 
```

**手动方法**

我们可以自己编写一个函数来删除所有出现的事件

```
fun dropAll :: "('a => bool) => 'a list => 'a list" where
    "dropAll P [] = []"
  | "dropAll P (x # xs) = (if P x then dropAll P xs else x # (dropAll P xs))" 
```

**搜索图书馆**

但是，此功能相当于过滤`¬ P`

我们怎样才能找到这样的库函数？

如果我们知道我们想要做什么的签名，我们可以使用`find_consts`

```
find_consts "('a ⇒ bool) ⇒ 'a list ⇒ 'a list" 
```

它从 Main 返回 3 个具有该签名的函数：`List.dropWhile`, `List.filter`,`List.takeWhile`

现在，让我们证明我们不需要`dropAll`但可以对`filter`.

```
lemma "dropAll P l = filter (λ x. ¬ P x) l"
  apply(induction l)
  by simp_all 
```

建议不要实现像`dropAll`你自己这样的东西，而是使用过滤器。因此，所有被证明的引理`filter`都是可用的。

**提示**

提示：我们可以使用方便的列表理解语法来编写过滤器表达式

```
lemma "filter (λ x. ¬ P x) l = [x ← l. ¬ P x]" by simp 
```

# java - TCP/IP Android 设备连接问题

> ID：15293163
> 
> 赞同：0
> 
> 时间：2013-03-08T11:40:51.967
> 
> 标签：java, android, client

我有一个 tcp/ip 应用程序，客户端“A”在其中获取它的坐标并将它们发送到我的电脑上运行的服务器。我正在使用本地 ips 等。这运行良好，但是我今天早上出来了，我的 tp-link 路由器和局域网有问题，所以我重新安装了我的路由器并且所有连接（wi-fi）都备份了和运行。但是，现在当我尝试运行我的应用程序时，它不适用于我的设备。

如果我通过模拟器运行它（我只有一个用于测试的字符串）它可以工作，我知道这是因为服务器和模拟器都在同一台机器上。我的 ip 是正确的，它是运行服务器的机器的 ip……我正在尝试自学这项技术并为大学做一个项目，但我一直遇到这样的巨大头痛。我已经在下面发布了我的客户端和服务器代码，有没有人可能有任何想法？路由器上的所有设置都相同，我确定这只是通过局域网连接，我不必转发任何端口？

**客户A**

```
import java.io.DataOutputStream;
import java.io.IOException;
import java.io.PrintWriter;
import java.net.Socket;
import java.net.UnknownHostException;
import android.app.Activity;
import android.content.Context;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.util.Log;
import android.widget.Toast;

public class Child extends Activity implements LocationListener {

    private Socket s;
    private PrintWriter p;
    public static double latitude;
    public static double longitude;
    String coordinates;

    @Override
    public void onCreate(Bundle savedInstanceState)

    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.child);

        LocationManager mlocationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        LocationListener mlocationListener = new MyLocationListener();

        mlocationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0,
                mlocationListener);         

        String hello = "hello";  //FOR TESTING PURPOSES

        Transmit (hello);

        Log.d("test", "test");
    }

   public class MyLocationListener implements LocationListener {

        public void onProviderDisabled(String provider) {
            Toast.makeText(getApplicationContext(), "Gps Disabled",
                    Toast.LENGTH_SHORT).show();
        }

        public void onProviderEnabled(String provider) {
           Toast.makeText(getApplicationContext(), "Gps Enabled",
                   Toast.LENGTH_SHORT).show();
       }
        public void onStatusChanged(String provider, int status, Bundle extras) {

        }

        public void onLocationChanged(Location location) {
            // TODO Auto-generated method stub
             latitude = location.getLatitude();
             longitude = location.getLongitude();

             coordinates = ("TESTING " + latitude + longitude);

             //Transmit(coordinates);         
        }   
    }

    private void Transmit(final String message) {

        Thread trans = new Thread(new Runnable() {

            public void run() {

                Log.d("TRANSMIT", "CALLED");

                // TODO Auto-generated method stub
                try {

                    s = new Socket("192.168.3.103", 1111); // connect to
                                                            // server
                    Log.d("CONNECTED", "Connected");

                    DataOutputStream _OutPut = new DataOutputStream(
                            s.getOutputStream());
                    _OutPut.writeBytes(message + "\n");
                    _OutPut.flush();
                    _OutPut.close();

                } catch (UnknownHostException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        });
        trans.start();
    }

    public void onLocationChanged(Location location) {
        // TODO Auto-generated method stub      
    }

    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub      
    }

    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub      
    }

    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub      
    }
} 
```

**服务器**

```
import java.io.BufferedReader;
import java.io.DataInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.OutputStream;
import java.io.PrintWriter;
import java.net.ServerSocket;
import java.net.Socket;
import java.util.Scanner;

public class TCPServer {

    public static void main(String[] args) throws Exception {

        Socket s;       
        ServerSocket ss = new ServerSocket(1111);

        System.out.println("Server started. Listening to the port 2001");
        System.out.println("Server: waiting for connection ..");

        while (true) {
            try {
                s = ss.accept();        

                if (s != null) {

                    InputStream fromChild = s.getInputStream();

                    while (s.isConnected()) {

                        System.out.println("Child Connected");              

                        Scanner r = new Scanner(fromChild);
                        String location;
                        location = r.nextLine();
                        System.out.println(location);

                    }
                }

            } catch (IOException ex) {
                System.out.println("Problem in message reading");
            }
        }
    }
} 
```

所以请，如果有人可以帮助或阐明情况，我将非常感激，因为在我解决这个问题之前我无法进一步发展。

问候，加里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T22:01:49.807

这听起来确实像是手机和服务器之间的连接问题。

*   仔细检查服务器和手机上的 IP 地址，确保它们在同一个子网（192.168.3.X）上，如果不是，则需要在路由器上设置转发规则。

*   您还可以通过在服务器盒上运行基本 html 服务器并将手机上的浏览器指向服务器来验证连接性。盒子右侧的 Apache tomcat 很容易启动，并且已经配置了一个仪表板应用程序以在启动时运行。您还可以在同一网络上的另一台计算机上对此进行测试，以完全排除您的代码和电话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T22:11:22.600

读这个：

[http://developer.android.com/tools/devices/emulator.html#emulatornetworking](http://developer.android.com/tools/devices/emulator.html#emulatornetworking)

摘录：

网络地址 说明 10.0.2.1 路由器/网关地址

10.0.2.2 主机环回接口的特殊别名（即开发机器上的 127.0.0.1）

10.0.2.3 第一个 DNS 服务器

10.0.2.4 / 10.0.2.5 / 10.0.2.6 可选的第二、第三和第四个 DNS 服务器（如果有）

10.0.2.15 仿真设备自己的网络/以太网接口

127.0.0.1 仿真设备自己的环回接口

* * *

基本上，如果您在本地运行服务器，您应该尝试从模拟器中点击 10.0.2.2 地址 ---

干杯，

# python - 在 Python 运行之前覆盖默认的 type() 元类

> ID：15293172
> 
> 赞同：9
> 
> 时间：2013-03-08T11:41:10.210
> 
> 标签：python, metaclass, bytecode-manipulation

**这里是龙。你已经被警告过了。**

我正在考虑创建一个新的库来帮助编写更好的测试套件。
为了做到这一点，其中一个功能是验证正在使用的任何不是测试运行器和[被测系统](http://xunitpatterns.com/SUT.html)的对象是否具有测试替身（模拟对象、存根、假对象或虚拟对象） ）。如果测试人员想要活动对象并因此减少测试隔离，则必须如此明确地指定。

我看到这样做的唯一方法是覆盖`type()`默认元类的内置函数。
新的默认元类将检查测试替身注册表字典以查看它是否已被测试替身替换或是否指定了活动对象。

当然，这通过 Python 本身是不可能的：

```
>>> TypeError: can't set attributes of built-in/extension type 'type' 
```

有没有办法在测试套件运行（可能是 Python）之前干预 Python 的元类查找？
也许使用字节码操作？但具体如何？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-13T17:19:07.580

以下是不可取的，您会遇到很多问题和实现您的想法的极端情况，但是在 Python 3.1 及更高版本上，您可以通过覆盖内置挂钩来挂钩*自定义类创建过程：*`__build_class__`

```
import builtins

_orig_build_class = builtins.__build_class__

class SomeMockingMeta(type):
    # whatever

def my_build_class(func, name, *bases, **kwargs):
    if not any(isinstance(b, type) for b in bases):
        # a 'regular' class, not a metaclass
        if 'metaclass' in kwargs:
            if not isinstance(kwargs['metaclass'], type):
                # the metaclass is a callable, but not a class
                orig_meta = kwargs.pop('metaclass')
                class HookedMeta(SomeMockingMeta):
                    def __new__(meta, name, bases, attrs):
                        return orig_meta(name, bases, attrs)
                kwargs['metaclass'] = HookedMeta
            else:
                # There already is a metaclass, insert ours and hope for the best
                class SubclassedMeta(SomeMockingMeta, kwargs['metaclass']):
                    pass
                kwargs['metaclass'] = SubclassedMeta
        else:
            kwargs['metaclass'] = SomeMockingMeta

    return _orig_build_class(func, name, *bases, **kwargs)

builtins.__build_class__ = my_build_class 
```

这仅限于自定义类，*但*确实为您提供了一个全能的钩子。

对于 3.1 之前的 Python 版本，您可以忘记挂钩类的创建。如果没有定义元类，C[`build_class`函数](https://hg.python.org/cpython/file/v2.7.10/Python/ceval.c#l4620)直接使用 C 类型的值，它从不从模块中查找它，因此您不能覆盖它。`type()``__builtin__`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T22:31:13.640

我喜欢你的想法，但我认为你会稍微偏离正轨。如果代码调用库函数而不是类怎么办？您的假 type() 永远不会被调用，并且您永远不会被告知您未能模拟该库函数。在 Django 和任何真实的代码库中都有很多实用功能。

~~我建议您以 Python 源代码补丁的形式编写所需的解释器级支持。或者，您可能会发现将这样的钩子添加到 PyPy 的代码库中更容易，该代码库是用 Python 本身编写的，而不是弄乱 Python 的 C 源代码。~~

我刚刚意识到 Python 解释器包含一套全面的工具，可以让任何 Python 代码单步执行任何其他代码，检查它对每个函数调用的作用，甚至检查每个单独的 Python 行如果需要，执行。

`sys.setprofile`应该足以满足您的需求。有了它，您可以安装一个挂钩（回调），该挂钩将收到目标程序进行的每个函数调用的通知。您不能使用它来更改目标程序的行为，但您可以收集有关它的统计信息，包括您的“模拟覆盖率”指标。

Python 关于 Profilers 的文档介绍了许多基于`sys.setprofile`. 您可以研究他们的资源以了解如何有效地使用它。

如果这还不够，仍然有`sys.settrace`一种严厉的方法，可以让您单步执行目标程序的每一行，检查其变量并修改其执行。标准模块`bdb.py`建立在`sys.settrace`并实现标准的调试工具集（断点、单步执行、单步跳过等）。`pdb.py`命令行调试器和其他图形调试器都使用它。

有了这两个钩子，你应该没事。

# asp.net - 排序gridview列表降序

> ID：15293178
> 
> 赞同：1
> 
> 时间：2013-03-08T11:41:27.277
> 
> 标签：asp.net, select, gridview, objectdatasource, ascx

我目前有一个按 ID 顺序排列的数据表，但我希望列表按降序排列。我敢肯定这是一个简单的问题，但我就是不知道该怎么做。这是 ObjectDataSource 等。我只是不确定在哪里更改代码...谢谢

```
<asp:ObjectDataSource 
        ID="odsTours" 
        runat="server" 
        SelectMethod="GetFiltered" 
        TypeName="blive.Shop.Tour" 
        SortParameterName="sortExpression">
        <SelectParameters>
            <asp:Parameter 
                Name="isActive" 
                ConvertEmptyStringToNull="true" 
                DefaultValue="" />
            <asp:Parameter 
                Name="isInThePast" 
                ConvertEmptyStringToNull="true" 
                DefaultValue="" />
        </SelectParameters>
    </asp:ObjectDataSource>

    <asp:ObjectDataSource 
        ID="odsBookings" 
        runat="server" 
        SelectMethod="GetFiltered" 
        TypeName="blive.Shop.Booking" 
        SortParameterName="sortExpression">
        <SelectParameters>
            <asp:ControlParameter  
                ControlID="ddlTourFilter" 
                PropertyName="SelectedValue"
                Name="tourId" 
                Type="Int32"
                ConvertEmptyStringToNull="true" />
            <asp:Parameter 
                Name="username" 

                ConvertEmptyStringToNull="true" 
                DefaultValue="" />
        </SelectParameters>
    </asp:ObjectDataSource> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T11:49:23.000

应该在对象数据源的select方法中完成。
在你的情况下，它应该在

```
 GetFiltered method. 
```

您可以通过此方法应用订单。

# c# - Windows 窗体的报表查看器

> ID：15293179
> 
> 赞同：0
> 
> 时间：2013-03-08T11:41:27.530
> 
> 标签：c#, winforms

我的 Windows 应用程序使用报表查看器为客户端打印报表。在创建安装文件时，我添加了“Microsoft ReportViewer 2010”作为先决条件。

但是当我在客户端 PC 中安装应用程序并尝试使用报告查看器时，我收到以下错误消息。

```
See the end of this message for details on invoking 
just-in-time (JIT) debugging instead of this dialog box.

************** Exception Text **************
System.IO.FileNotFoundException: Could not load file or assembly 'Microsoft.ReportViewer.WinForms, Version=11.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91' or one of its dependencies. The system cannot find the file specified.
File name: 'Microsoft.ReportViewer.WinForms, Version=11.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91'
   at Purchase_Management.ProductInfo.InitializeComponent()
   at Purchase_Management.ProductInfo..ctor()
   at Purchase_Management.Main_Window.button4_Click_1(Object sender, EventArgs e)
   at System.Windows.Forms.Control.OnClick(EventArgs e)
   at System.Windows.Forms.Button.OnClick(EventArgs e)
   at System.Windows.Forms.Button.OnMouseUp(MouseEventArgs mevent)
   at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
   at System.Windows.Forms.Control.WndProc(Message& m)
   at System.Windows.Forms.ButtonBase.WndProc(Message& m)
   at System.Windows.Forms.Button.WndProc(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)

WRN: Assembly binding logging is turned OFF.
To enable assembly bind failure logging, set the registry value [HKLM\Software\Microsoft\Fusion!EnableLog] (DWORD) to 1.
Note: There is some performance penalty associated with assembly bind failure logging.
To turn this feature off, remove the registry value [HKLM\Software\Microsoft\Fusion!EnableLog].

************** Loaded Assemblies **************
mscorlib
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.18033 built by: FX45RTMGDR
    CodeBase: file:///C:/Windows/Microsoft.NET/Framework/v4.0.30319/mscorlib.dll
----------------------------------------
Purchase Management
    Assembly Version: 1.0.0.0
    Win32 Version: 1.0.0.0
    CodeBase: file:///C:/Program%20Files%20(x86)/aDesigns/PurchaseMangement/Purchase%20Management.exe
----------------------------------------
System.Windows.Forms
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.18037 built by: FX45RTMGDR
    CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Windows.Forms/v4.0_4.0.0.0__b77a5c561934e089/System.Windows.Forms.dll
----------------------------------------
System.Drawing
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.18022 built by: FX45RTMGDR
    CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Drawing/v4.0_4.0.0.0__b03f5f7f11d50a3a/System.Drawing.dll
----------------------------------------
System
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.18033 built by: FX45RTMGDR
    CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System/v4.0_4.0.0.0__b77a5c561934e089/System.dll
----------------------------------------

************** JIT Debugging **************
To enable just-in-time (JIT) debugging, the .config file for this
application or computer (machine.config) must have the
jitDebugging value set in the system.windows.forms section.
The application must also be compiled with debugging
enabled.

For example:

<configuration>
    <system.windows.forms jitDebugging="true" />
</configuration>

When JIT debugging is enabled, any unhandled exception
will be sent to the JIT debugger registered on the computer
rather than be handled by this dialog box. 
```

![在此处输入图像描述](../Images/8e088fa746d2b7456004e1d4650a1505.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T22:05:21.470

首先，您需要安装此文件 SQLSysClrTypes.msi

[链接 1](http://go.microsoft.com/fwlink/?LinkID=239643&clcid=0x409)

其次，您需要安装 REPORT VIEWER RUNTIME ReportViewer.msi

[链接 2](http://www.microsoft.com/en-us/download/details.aspx?id=29024)

# javascript - 在下拉列表 onchange 事件中

> ID：15293180
> 
> 赞同：3
> 
> 时间：2013-03-08T11:41:30.627
> 
> 标签：javascript, jsp

我的代码如下：

```
<!DOCTYPE html>
<html>
<body>
    <script>    
        function tab()
        {
            current=document.getElementById("test");
            next=document.getElementById("run");
            if(current.value!="-1")
            {
                next.focus()
            }
        }
    </script>
    <select id="test" onchange="tab()">
        <option value="-1">--select--</option>
        <option value="1" >TEST</option>
        <option value="2">RUN</option>
    </select>
    <input type="text" name="run"/>
</body>
</html> 
```

定义：我有一个包含四个值的下拉列表。如果我将下拉列表中的一个值更改为另一个值，它会自动转到文本框。根据我的代码，它工作正常。

但问题是当我在下拉列表中选择第一个值时，自动选项卡正在工作，然后我再次从下拉列表中选择相同的值（自动选项卡不起作用）。我知道问题出在事件中。没有更改，因此事件不会触发。请帮我纠正这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T11:54:27.997

使用`onBlur()`而不是`onchange()`.

`onBlur`当您离开对象而不必更改其值时，将触发该事件。

`onChange`仅当您更改了字段的值时才会调用该事件。

请查看此以了解[事件](http://www.quirksmode.org/js/introevents.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T11:46:37.287

尝试使用。`onBlur()`它会解决问题

我认为这可以通过 html5

```
onselect 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T11:48:23.027

没有带有 id 的元素`run`，它被以下引用：

```
document.getElementById("run"); 
```

你可能打算写：

```
<input type="text" name="run" id="run"/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-13T04:44:17.543

尝试使用`mouseup`&`keyup`事件作为解决方法：

```
var current = document.getElementById("test");
var next = document.getElementById("run");
var open = false; //drop-down closed

var watchOpen = function() {
  open = !open; //inverse flag to identify state of drop-down
};

var tab = function() {
  if (!open && current.value !== "-1") {
    next.focus();
  }
};
```

```
<select id="test" onmouseup="watchOpen();tab();" onkeyup="watchOpen();tab();">
  <option value="-1">--select--</option>
  <option value="1">TEST</option>
  <option value="2">RUN</option>
</select>
<input type="text" id="run" /><!-- replaced name with id -->
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-16T09:38:24.240

尝试这个 ：

```
<!DOCTYPE html>
<html>
  <body>
    <select id="test" onchange="tab()">
      <option value="-1">--select--</option>
      <option value="1">TEST</option>
      <option value="2">RUN</option>
    </select>
    <input type="text" name="run" id="run" />
    <script type="text/javascript">
      function tab() {
        current = document.getElementById("test");
        next = document.getElementById("run");
        if (current.value != "-1") {
          next.focus();
          next.value = current.options[current.selectedIndex].text;
        } else {
          next.value = "";
        }
      }
    </script>
  </body>
</html>
```

# nginx - 压力测试中的 Nginx / PHP-FPM kevent() 错误

> ID：15293189
> 
> 赞同：2
> 
> 时间：2013-03-08T11:42:02.297
> 
> 标签：nginx, freebsd, php, kqueue

天，

我正在运行一个带有 Nginx (1.2.7_1,1) 和 PHP-FPM (5.4.12) 的 FreeBSD 盒子 (9.1-RELEASE)。我在使用 Apache AB 处理并发请求时遇到了很大的问题：

```
ab -n 10000 -c 500 http://10.128.28.164/index.php 
```

我在 /var/log/httpd-error.log （成千上万）中得到的主要错误是：

2013/03/08 11:11:10 [错误] 99855#0: *44116 kevent() 报告 connect() 在连接到上游时失败（54：对等方重置连接），客户端：10.128.28.179，服务器：本地主机，请求：“GET /index.php HTTP/1.0”，上游：“fastcgi://10.128.28.164:9000”，主机：“10.128.28.164”

如果我浏览到服务器 (10.128.28.164)，它适用于 HTML 和 PHP 页面。

任何帮助都会很棒！

皮特。

我的 php-fpm.conf 文件如下所示：

```
pid = run/php-fpm.pid
error_log = log/php-fpm.log
daemonize = yes
events.mechanism = kqueue

; Pool
[www]

user = www
group = www

listen = 10.128.28.164:9000

pm = dynamic
pm.max_children = 100
pm.start_servers = 2
pm.min_spare_servers = 1
pm.max_spare_servers = 3
pm.max_requests = 100 
```

我的 nginx.conf 文件如下所示：

```
worker_processes  4;

error_log  /var/log/httpd-error.log;

events {
    worker_connections  1024;
}

http {
    include       mime.types;
    default_type  application/octet-stream;

    access_log  /var/log/httpd-access.log;

    sendfile        on;

    keepalive_timeout  65;

    gzip  on;

    server {
        listen       10.128.28.164:80;
        server_name  localhost;

        root /usr/local/www;

        location ~ \.php$ {
            fastcgi_pass  10.128.28.164:9000;
            fastcgi_index  index.php;
            fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;
            fastcgi_param  PATH_INFO  $fastcgi_script_name;
            include        fastcgi_params;
        }

        location / {
            index  index.html;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T22:32:49.730

检查 dmesg 是否有任何相关的内核消息、网络连接的最大数量、打开的文件或其他一些资源是否已用尽（或者更确切地说，已达到限制）。

您引用的日志消息仅讲述了代理的部分故事。为什么后端正在重置连接，应该在后端的日志中检查...例如，php-fpm 也可能超出*每个进程*的文件描述符限制- 所以检查你的日志/ php-fpm.log 错误。

# python - 匹配非贪婪的正则表达式分隔符

> ID：15293194
> 
> 赞同：0
> 
> 时间：2013-03-08T11:42:14.590
> 
> 标签：python, regex

我有一些文本，其中一些文本由以下内容分隔：

```
{# xxx #} some text {# zzz #} 
```

我在整个文本中多次出现这种模式。我想`some text`从分隔符中提取 。我怎样才能用正则表达式做到这一点？

例如，如果我有这个文本：

Lorem Ipsum 只是印刷和排版行业的虚拟文本。自 1500 年代以来，Lorem Ipsum 一直是行业的标准虚拟文本，当时一位不知名的印刷商采用了一种类型的厨房并将 {# xxx #} 它打乱以使 {# zzz #} 成为类型样本书。它不仅经历了五个世纪，而且经历了电子排版的飞跃，基本保持不变。它在 1960 年代 {# xxx #} 与 {# zzz #} 发布了包含 Lorem Ipsum 段落的 Letraset 表，最近在 {# xxx #} 桌面出版软件如 Aldus PageMaker {# zzz #} 中得到普及，包括版本洛雷姆·伊普苏姆。

我想得到一个像这样的列表：

```
[it to make, with, desktop publishing software like Aldus PageMaker] 
```

这是我的非工作代码：

`>>> regex = re.compile(r'{# xxx #}.*({# zzz #}).*?')`

`>>> re.findall(regex, s) {# zzz #}`

我认为我的困难是试图以非贪婪的方式制作正则表达式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T11:44:48.033

`?`您只需在分隔符之间添加即可获得非贪婪行为。此外，你不应该`.*?`在最后。它什么也没做。`{}`是特殊字符，可能应该被转义。最后，括号需要围绕您要匹配的部分。这给了你这个模式：

```
 regex = re.compile(r'\{# xxx #\}(.*?)\{# zzz #\}') 
```

要使用它，您需要一个使用类似 的循环`m = re.match`，然后用于`m.group(1)`获取第一个子组（括号中的部分）。您需要使用循环，而不是`findall`因为您只能获得子组的最后一个匹配项。

# wicket - 输出标记的 Wicket 组件

> ID：15293198
> 
> 赞同：0
> 
> 时间：2013-03-08T11:42:33.617
> 
> 标签：wicket

有没有办法通过它的输出标记来获取检票口组件？我有 ajax 函数来发送两个 markupId-s，我想获得两个打印这些 id-s 的组件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T11:57:37.550

A`MarkupContainer`和他的孩子有一个迭代器。`Component`s有方法`getMarkupId()`。您可以遍历此迭代器并检查子 a 是否具有所需的标记 ID。

# php - 将mysql选择查询与php变量连接起来？

> ID：15293199
> 
> 赞同：0
> 
> 时间：2013-03-08T11:42:36.723
> 
> 标签：php, html, mysql, database

我正在尝试将 MySQL`SELECT`查询与 PHP 变量连接，但出现错误。我给出错误的 PHP 语句是：

```
 $result=mysql_query("SELECT user_id,username,add FROM users WHERE username =".$user."AND password=".$add); 
```

和错误为：

```
( ! ) Notice: Undefined variable: info in C:\wamp\www\pollBook\poll\login.php on line 18
Call Stack 
```

我不明白我在哪里错过了代码。当我编写不带`WHERE`子句的查询时，它工作正常。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T11:45:45.023

**您的代码不起作用的原因**

您正在尝试使用`$info`尚未定义的变量 。当您尝试使用未定义的变量时，实际上没有将任何内容连接到字符串中，但是由于 PHP 是松散类型的，它会在您引用它的第二次声明该变量。这就是为什么您看到的是 a`notice`而不是 a `fatal error`。您应该仔细检查您的代码，并确保它`$info`获得分配给它的值，并且它不会在某个时候被另一个函数覆盖。但是，更重要的是，请阅读下文。

* * *

**停止你正在做的事情**

* * *

这很容易受到一种称为[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)的攻击。我不会告诉你如何连接 SQL 字符串。这是可怕的做法。

你**不**应该在 PHP 中使用 mysql 函数。它们已被弃用。而是使用 PHP PDO 对象和准备好的语句。这是一个相当不错的[教程](http://php.net/manual/en/pdo.prepared-statements.php)。

**例子**

* * *

阅读完[本教程](http://www.php.net/manual/en/pdo.connections.php)后，您将能够制作 PDO 对象，所以我将把这部分留给您。

下一阶段是使用以下`prepare`方法添加您的查询：

```
$PDO->prepare("SELECT * FROM tbl WHERE `id` = :id");
// Loads up the SQL statement. Notice the :id bit.
$actualID = "this is an ID";
$PDO->bindParam(':id', $actualID);
// Bind the value to the parameter in the SQL String.
$PDO->execute();
// This will run the SQL Query for you. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T12:02:06.917

您在“AND”之前缺少空格，您应该按照其他答案中的建议使用单引号。

```
$result=mysql_query("SELECT user_id,username,add FROM users WHERE *username =".$user."AND* password=".$add); 
```

更新：

```
echo $sql = "SELECT user_id,username,add FROM users WHERE username ='".$user."' AND password='".$add."'";
$result=mysql_query($sql); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T11:45:06.010

尽管查询中没有使用 $info 变量，但您需要更正查询：

```
$result=mysql_query("SELECT user_id,username,add FROM users WHERE username ='" . $user . "' AND password='" . $add . "'"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T11:45:35.460

首先从错误来看，您的变量之一似乎未定义。.. 核实。其次，用 ' 将参数括起来以获得更安全的语法。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-03-08T11:49:43.323

这是因为您使用的变量可能没有在上面定义

因此，首先初始化您的变量，或者如果它来自其他地方（POST 或 GET），然后使用**isset**方法检查

所以完整的代码将是

```
$user = 123; // or $user = isset($user)?$user:123;
$add = 123456; // or $add = isset($add)?$add:123456; 
```

然后运行您的查询

```
$result=mysql_query("SELECT user_id,username,add FROM users WHERE username =".$user."AND password=".$add); 
```

# c - (char*) 在 C 中做了什么？

> ID：15293201
> 
> 赞同：0
> 
> 时间：2013-03-08T11:42:41.037
> 
> 标签：c, string, pointers, char

`(char* )str`下面的代码做了什么？

```
/**
 * Main file 
 */
#include <assert.h>
#include <mylib.h>

int main()
{
  const char str[] = "this is my first lab\n";
  int ret=1; 

  ret = my_print((char *)str, sizeof(str));

  assert(!ret);

  return 0;
} 
```

这段代码是我的导师写的。my_print 是一个函数，它接收指向字符串的指针和该字符串的大小。我很困惑为什么我们必须使用 (char *)str 将字符串传递给 my_print 函数。它实际上是做什么的？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-08T11:44:00.813

它抛弃了`const`.

这意味着如果修改该字符串，它会使您的程序可能崩溃，`my_print`因为它的内存可能被标记为只读。因此，`const`通过强制转换移除修饰符通常不是一个好主意。

在您的情况下，它看起来有点像实施者`my_print`不认为要打印的字符串永远不必修改，因此不会使其接受`const char *`参数。

所以你应该做的是改变定义`my_print`以接受 a`const char *`而不是 a`char *`作为它的第一个参数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T11:44:22.730

那就是“类型转换”（或[“类型转换”](http://en.wikipedia.org/wiki/Type_conversion)）。换句话说，它告诉编译器将一种类型视为另一种类型。

这个特定的转换所做的是告诉编译器将常量字符串视为非常量。如果被调用的函数试图修改字符串，它可能不起作用，甚至可能导致程序崩溃，因为修改常量数据是*未定义的行为*。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T11:44:10.220

它是一种类型转换，即它改变了数据类型。(char*) 表示类型转换为类型“指向字符的指针”

# python - 如何在 Windows 中使用 cx_freeze 创建要在 Linux 中使用的包

> ID：15293204
> 
> 赞同：1
> 
> 时间：2013-03-08T11:42:47.137
> 
> 标签：python, python-3.x, cx-freeze

我正在使用 Python31 和 cx_freeze 在 Windows 机器上创建可执行文件。可执行文件可在所有 Windows 系统上完美运行。但它们不能在 Linux 上运行。我应该在 setup.py 文件中做哪些更改？我正在使用的是：

```
import sys
from cx_Freeze import setup, Executable

includes1 = list()
path1 = sys.path[:]
package=list()

executables = [Executable("D:\MyCode\MyFile.py")]
buildOptions = dict(\
        includes = includes1,\
        path = path1,\
        packages = package)

setup(  name = "NAME",
        version = "0.1",
        description = "DESCRIPTION",
        options = dict(build_exe = buildOptions),
        executables = executables) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:07:50.117

要创建 Linux 可执行文件，您需要在 Linux 中将其冻结。要创建 Mac 可执行文件，您需要在 Mac 上冻结它。这就是 cx_Freeze 的工作方式，并且没有可用于为其他平台构建可执行文件的选项。

如果您制作 Windows 可执行文件，Linux 用户可能能够使用[Wine](http://www.winehq.org/)运行它。但这是一种解决方法，并且不能保证它会起作用。

# javascript - 每当用户添加一个 , jquery 从数组中选择特定的颜色

> ID：15293208
> 
> 赞同：0
> 
> 时间：2013-03-08T11:43:04.337
> 
> 标签：javascript, jquery, css, arrays, colors

我是 javascript 新手，所以要简单。

我只希望用户能够编写`<li> </li>`，jquery 将根据列表顺序选择颜色。目前，用户必须输入`class="b"`, 或`class="c"`.

我是否正确假设我会创建一个颜色数组并使用某种循环？

我希望实现的视觉示例：http: [//popmeup.org/about](http://popmeup.org/about)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T11:49:17.970

您可以使用 CSS[`:nth-child`](https://developer.mozilla.org/en-US/docs/CSS/%3anth-child)选择器指定颜色的顺序：

```
li:nth-child(2n - 1) {
    color: red;
}

li:nth-child(2n) {
    color: blue;
} 
```

上面的基本示例将以红色和蓝色为交替`<li>`元素着色，从红色开始。看看[这个 jsFiddle 演示](http://jsfiddle.net/PkjPN/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T12:08:33.587

像[这样的小提琴](http://jsfiddle.net/dXXLZ/1/)？

```
var colors = [ 'BlueViolet', 'CadetBlue', 'Coral', 'Crimson', 'DarkGoldenRod', 'DarkOliveGreen'],
    li = document.getElementById('colorthis').getElementsByTagName('li');

for(var i = 0; i < li.length; i++) {
    var elem = li[i],
        color = colors[0];
    elem.style.color = color;
    colors.push(color);
    colors.shift();
} 
```

您只需定义一个颜色列表和每个列表元素的循环样式。使用后，颜色会附加到颜色列表中，因此您可以使用有限的颜色列表设置无限数量的元素。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-08T11:45:08.717

你想要这样：

```
$(".item").click(function() {  
  if ($(this).hasclass("A")) {
    coorColor = "blue";
  } else if ($(this).hasclass("B") {
    coorColor = "red";
  }

  $("body").css("background", coorColor);
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-08T11:46:14.593

**使用 CSS：**

```
li.a{
    color:#000000;
}

li.b{
    color:#ff00ff;
} 
```

工作演示：http: [//jsfiddle.net/VJJnD/1/](http://jsfiddle.net/VJJnD/1/)

**宽度 jQuery：**

```
$('li.a').css('color', '#000000');
$('li.b').css('color', '#ff00ff'); 
```

工作演示：http: [//jsfiddle.net/VJJnD/](http://jsfiddle.net/VJJnD/)

# c# - visifire 自定义轴标签不显示

> ID：15293217
> 
> 赞同：1
> 
> 时间：2013-03-08T11:43:56.433
> 
> 标签：c#, visifire

我需要将我的图表导出为图像而不首先在 WPF 中显示它。所以我用代码构建了图表：

```
 public void CreateHistogram(CalcRepository cr, int i)
    {
        Chart chart = new Chart();

        chart.Width = 300;
        chart.Height = 200;
        chart.ScrollingEnabled = false;
        chart.AnimationEnabled = false;
        chart.TrendLines.Add(new TrendLine{Value = cr.Mean,Orientation = System.Windows.Controls.Orientation.Vertical});
        chart.TrendLines.Add(new TrendLine{Value = cr.ChartTrippleNegativeStdDeviation,Orientation = System.Windows.Controls.Orientation.Vertical,LineStyle = LineStyles.Dashed});chart.TrendLines.Add(new TrendLine{Value = cr.ChartTripplePositiveStdDeviation,Orientation = System.Windows.Controls.Orientation.Vertical,LineStyle = LineStyles.Dashed});
        chart.TrendLines.Add(new TrendLine{Value = cr.UpperSpecificationLimit,Orientation = System.Windows.Controls.Orientation.Vertical});
        chart.TrendLines.Add(new TrendLine{Value = cr.LowerSpecificationLimit,Orientation = System.Windows.Controls.Orientation.Vertical});
        chart.TrendLines[0].SetValue(Canvas.ZIndexProperty, 40);
        chart.TrendLines[1].SetValue(Canvas.ZIndexProperty, 40);
        chart.TrendLines[2].SetValue(Canvas.ZIndexProperty, 40);
        chart.TrendLines[3].SetValue(Canvas.ZIndexProperty, 40);
        chart.TrendLines[4].SetValue(Canvas.ZIndexProperty, 40);

        chart.DataPointWidth = cr.DataPointWidth;
        chart.Visibility = Visibility.Visible;
        Axis x = new Axis();
        x.AxisMaximum = cr.VisUpperBound;
        x.AxisMinimum = cr.VisLowerBound;
        x.AxisType = AxisTypes.Primary;

        CustomAxisLabels cal = new CustomAxisLabels();
        cal.Labels.Add(new CustomAxisLabel {From = cr.Mean, To = cr.Mean, Text = "Mean"});
        cal.Labels.Add(new CustomAxisLabel {From = cr.ChartTrippleNegativeStdDeviation,To = cr.ChartTrippleNegativeStdDeviation,Text = "LCL"});
        cal.Labels.Add(new CustomAxisLabel{From = cr.ChartTripplePositiveStdDeviation,To = cr.ChartTripplePositiveStdDeviation,Text= "UCL"});
        cal.Labels.Add(new CustomAxisLabel {From = cr.UpperSpecificationLimit, To = cr.UpperSpecificationLimit , Text = "USL"});
        cal.Labels.Add(new CustomAxisLabel {From = cr.LowerSpecificationLimit, To = cr.LowerSpecificationLimit, Text = "LSL"});

        cal.FontSize = 10;
        cal.Angle = 0;
        cal.FontColor = new SolidColorBrush(Colors.Black);
        cal.Enabled = true;

        x.CustomAxisLabels.Add(cal);
        chart.AxesX.Add(x);

        var ds = new DataSeries();
        var dpc = new DataPointCollection(cr.HistogramValues);
        ds.DataPoints = dpc;

        chart.Series.Add(ds);

        ds.ZIndex = 1;
        ds.Bevel = false;
        ds.ShadowEnabled = false;
        ds.LightingEnabled = false;
        ds.Color = new SolidColorBrush(Colors.SteelBlue);

        chart.BeginInit();
        chart.EndInit();
        chart.Measure(new Size(300, 200));
        chart.Arrange(new Rect(0, 0, 300, 200));
        chart.UpdateLayout();

        ExportToPng(new Uri("C:\\" + i + ".png"), chart);
    } 
```

一切正常，除了缺少自定义轴标签。这是输出的样子：

![图表输出](../Images/15befa3eb66fc0067d4fd1a78b6da9f5.png)

如您所见，甚至为 CustomAxis 标签分配了空间，但它们没有显示出来。有人有想法吗？

提示：AnimationEnabled 必须设置为 false，否则在拍摄图像时该系列尚未渲染 - 我花了很长时间才弄清楚这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:09:18.370

我已经找到了一个解决方案：

超出界限时，值设置为 Double.NaN。我发现，如果 Collections Double.Nan 或 Double.Infinity 中有任何值，所有标签的创建都会失败 - 似乎是 visifire 中的错误。

我通过在其单独的集合中添加每个标签来解决它。

# opencv - Cmake：错误的 OpenCV 路径生成

> ID：15293220
> 
> 赞同：4
> 
> 时间：2013-03-08T11:44:08.867
> 
> 标签：opencv, visual-studio-2012, cmake

**我的环境：**

*   视窗 7 64
*   CMake 2.8.10.2
*   Opencv 2.4.4
*   视觉工作室速成版 2012

**我的问题：**

我有一个使用 Opencv 并在 vs11 下构建的 CMake 项目。一切都适用于预先构建的二进制文件（在我的例子中来自 c:/opencv/build）。我想更改一些 Opencv 设置，所以我必须从源代码（在 c:/opencv/build2 中）构建它。一切都在 c:/opencv/built2 中[正确构建和安装](http://theroundedengineer.blogspot.fr/2011/07/opencv-23-for-vs-2008-from-source.html)，但我的 IDE 出现此错误：

> 错误 LNK1104：无法打开文件 'C:\opencv\build2\lib\Debug\Debug\opencv_objdetect244d.lib'

确实，没有这样的文件。似乎我的 CMakeLists.txt 脚本通过在每次调用中添加 Debug\（或 Release）子目录来破坏 OpenCV_LIBS 变量：

```
MESSAGE ( STATUS "OpenCV_LIBS = ${OpenCV_LIBS}" )
FIND_PACKAGE ( OpenCV COMPONENTS core highgui imgproc objdetect REQUIRED )
MESSAGE ( STATUS "OpenCV_LIBS = ${OpenCV_LIBS}" )
FIND_PACKAGE ( OpenCV COMPONENTS core highgui imgproc objdetect REQUIRED )
MESSAGE ( STATUS "OpenCV_LIBS = ${OpenCV_LIBS}" )
FIND_PACKAGE ( OpenCV COMPONENTS core highgui imgproc objdetect REQUIRED )
MESSAGE ( STATUS "OpenCV_LIBS = ${OpenCV_LIBS}" ) 
```

输出：

> OpenCV_LIBS = 调试；C:/opencv/build2/lib/Debug/opencv_contrib244d.lib;(...)
> 
> OpenCV_LIBS = 调试；C:/opencv/build2/lib/Debug/Debug/opencv_objdetect244d.lib;(...)
> 
> OpenCV_LIBS = debug;C:/opencv/build2/lib/Debug/Debug/Debug/opencv_objdetect244d.lib;(...)
> 
> OpenCV_LIBS = debug;C:/opencv/build2/lib/Debug/Debug/Debug/Debug/opencv_objdetect244d.lib;(...)
> 
> OpenCV_LIBS = debug;C:/opencv/build2/lib/Debug/Debug/Debug/Debug/Debug/opencv_objdetect244d.lib;(...)

我的 CMake 脚本有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:41:03.573

好的，似乎在连续调用中多次包含变量时`OpenCVConfig.cmake`会破坏变量。`OpenCV_LIBS``FIND_PACKAGE()`

一个快速的解决方法是添加`FORCE`到第**91-94**行`OpenCVConfig.cmake`：

```
# Provide the libs directories to the caller
set(OpenCV_LIB_DIR_OPT "C:/opencv/build2/lib" CACHE PATH "Path where release OpenCV libraries are located" FORCE)
set(OpenCV_LIB_DIR_DBG "C:/opencv/build2/lib" CACHE PATH "Path where debug OpenCV libraries are located" FORCE)
set(OpenCV_3RDPARTY_LIB_DIR_OPT "C:/opencv/build2/3rdparty/lib" CACHE PATH "Path where release 3rdpaty OpenCV dependencies are located" FORCE)
set(OpenCV_3RDPARTY_LIB_DIR_DBG "C:/opencv/build2/3rdparty/lib" CACHE PATH "Path where debug 3rdpaty OpenCV dependencies are located" FORCE) 
```

要修改的文件是`C:\opencv\cmake\templates\OpenCVConfig.cmake.in`.

然后重建/重新编译/重新安装 OpenCV，然后是你自己的项目。

# apache - 插件安装后 Grails Apache 中断？

> ID：15293222
> 
> 赞同：0
> 
> 时间：2013-03-08T11:44:10.077
> 
> 标签：apache, grails, plugins, spring-security, tomcat7

我目前正在开发一个 Grails 项目，并且已经安装了以下插件：

**Spring 安全核心**

**弹簧安全用户界面**

**邮件**

**ETC...**

在我决定更改“Spring Security UI”并使用另一个名为“Mandrill”的邮件插件之前，该解决方案运行良好，一切都很好。所以我将插件中的 RegisterController 更改为使用 Mandrill 而不是 Mail，我添加到控制器的代码如下：

```
import org.grails.mandrill.MandrillRecipient;
import org.grails.mandrill.MandrillMessage;
import org.grails.mandrill.MandrillService;

def recpts = []

        recpts.add(new MandrillRecipient(name:command.username, email:command.email))
        def message = new MandrillMessage(
                                            text:body.toString(),
                                            subject:conf.ui.register.emailSubject,
                                            from_email:conf.ui.register.emailFrom,
                                            to:recpts)
        message.tags.add("Test")
        def ret = mandrillService.send(message) 
```

现在，一旦我安装插件并添加此代码并运行应用程序，一切都开始正常，我没有收到任何错误，它告诉我去本地主机，一旦我这样做，Apache 就会崩溃，我得到以下错误：

```
HTTP Status 500 -

type Exception report

message

description The server encountered an internal error () that prevented it from fulfilling this request.

exception

org.codehaus.groovy.grails.web.pages.exceptions.GroovyPagesException: Error applying layout : main
    java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1146)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    java.lang.Thread.run(Thread.java:679)

root cause

org.codehaus.groovy.grails.web.pages.exceptions.GroovyPagesException: Error processing GroovyPageView: Error executing tag <sec:ifAnyGranted>: null
    java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1146)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    java.lang.Thread.run(Thread.java:679)

root cause

org.codehaus.groovy.grails.web.taglib.exceptions.GrailsTagException: Error executing tag <sec:ifAnyGranted>: null
    home_workspace_sm_V3_grails_app_views_layouts_main_gsp$_run_closure2.doCall(main.gsp:85)
    home_workspace_sm_V3_grails_app_views_layouts_main_gsp.run(main.gsp:122)
    java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1146)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    java.lang.Thread.run(Thread.java:679)

root cause

java.lang.NullPointerException
    grails.plugins.springsecurity.SecurityTagLib$_closure3.doCall(SecurityTagLib.groovy:89)
    home_workspace_smV3_grails_app_views_layouts_main_gsp$_run_closure2.doCall(main.gsp:85)
    home_workspace_sm_V3_grails_app_views_layouts_main_gsp.run(main.gsp:122)
    java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1146)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    java.lang.Thread.run(Thread.java:679)

note The full stack trace of the root cause is available in the Apache Tomcat/7.0.27 logs. 
```

有人可以帮我解决这个问题，因为我的所有项目在此之后都不再工作，即使他们不使用 Mandrill ：S

编辑....

下面是我的 main.gsp 页面，但我看不出这与问题有什么关系，因为我的所有项目都没有运行，即使它们在我安装该插件之前运行：S

```
<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport"       content="width=device-width, initial-scale=1.0">
    <meta name="description"    content="">
    <meta name="author"         content="">

    <title>SM</title>
    <link rel="shortcut icon" href="${resource(dir:'images',file:'favicon.png')}" type="image/x-icon" />

    <link rel="stylesheet" href="${resource(dir:'bootstrap/css', file:'bootstrap.css')}" />
    <link rel="stylesheet" href="${resource(dir:'bootstrap/css', file:'bootstrap-responsive.css')}" />
    <link rel="stylesheet" href="${resource(dir:'kickstart/css', file:'docs.css')}" />
    <link rel="stylesheet" href="${resource(dir:'kickstart/css', file:'kickstart.css')}" />
    <link rel="stylesheet" href="${resource(dir:'datepicker/css',file:'datepicker.css')}" />

    <link rel="apple-touch-icon" href="assets/ico/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="assets/ico/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="assets/ico/apple-touch-icon-114x114.png">

    <g:layoutHead />

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="${resource(dir:'bootstrap/js', file:'bootstrap.js')}"></script>
    <script src="${resource(dir:'datepicker/js',file:'bootstrap-datepicker.js')}"></script>
    <script src="${resource(dir:'kickstart/js', file:'kickstart.js')}"></script>
    <script src="${resource(dir:'js',           file:'application.js')}"></script>

    <r:layoutResources />
</head>

<body>
    <div id="Navbar" class="navbar navbar-fixed-top">
        <div class="navbar-inner">
            <div class="container">
                <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
                <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </a>

                <a class="brand" href="${createLink(uri: '/')}">
                    <img class="logo" src="${resource(dir:'images',file:'sm_logo.png')}" alt="${meta(name:'app.name')}" height="25" border="0" />
                    SM
                    <%-- <small> v${meta(name:'app.version')}</small> --%>
                </a>

                <div class="nav-collapse">
                    <ul class="nav">
                        <li class="dropdown">
                            <a class="dropdown-toggle" data-toggle="dropdown" href="#">Menu <b class="caret"></b></a>
                            <ul class="dropdown-menu">
                                <li><a class="home" href="${createLink(uri: '/')}"><g:message code="default.home.label"/></a></li>
                                <sec:ifNotLoggedIn>
                                <li><g:link class="login" controller="Login" action="auth"><g:message code="Login" args="[entityName]" /></g:link></li>
                                <li><a href="${createLink(uri: '/register/index')}"><g:message code="Register"/></a></li>
                                </sec:ifNotLoggedIn>
                                <sec:ifLoggedIn>
                                    <li><g:link class="logout" controller="Logout" action="index"><g:message code="Logout" args="[entityName]" /></g:link></li>
                                    <li><g:link class="create" controller="Sm" action="create"><g:message code="Create" args="[entityName]" /></g:link></li>
                                    <sec:ifAnyGranted roles="ROLE_ADMIN,ROLE_SUPER_ADMIN">
                                        <li><g:link class="list" controller="Sm" action="list"><g:message code="SM Log" args="[entityName]" /></g:link></li>
                                    </sec:ifAnyGranted>
                                </sec:ifLoggedIn>
                            </ul>
                        </li>
                    </ul>

                    <sec:ifAnyGranted roles="ROLE_ADMIN,ROLE_SUPER_ADMIN">
                    <ul class="nav">
                        <li class="dropdown">
                            <a class="dropdown-toggle" data-toggle="dropdown" href="#">Admin Menu <b class="caret"></b></a>
                            <ul class="dropdown-menu">
                                <sec:ifAnyGranted roles="ROLE_SUPER_ADMIN">
                                <li><a class="config" href="${createLink(uri: '/configProperty')}"><g:message code="Config"/></a></li>
                                </sec:ifAnyGranted>
                                <li><a class="config" href="${createLink(uri: '/User')}"><g:message code="Admin"/></a></li>
                            </ul>
                        </li>
                    </ul>
                    </sec:ifAnyGranted>

                    <div class="pull-right">
                        <!--<g:render template="/menu/language"/> -->                                                                                                           
                    </div>

                </div>

            </div>
        </div>
    </div>

    <g:if test="${ pageProperty(name:'page.header') }">
        <g:pageProperty name="page.header" />
    </g:if>
    <g:else>
        <header id="Header" class="jumbotron masthead">
            <div class="inner">
                <div class="container">
                    <h1 class="title"><g:layoutTitle default="${meta(name:'app.name')}" /></h1>
                </div>
            </div>
        </header>
    </g:else>

    <div id="Content" class="container">
        <%-- Only show the "Pills" navigation menu if a controller exists (but not for home) 
        <g:if test="${  params.controller != null
                    &&  params.controller != ''
                    &&  params.controller != 'home'
        }">
            <ul id="Menu" class="nav nav-pills">
                <g:set var="entityName" value="${message(code: params.controller+'.label', default: params.controller.substring(0,1).toUpperCase() + params.controller.substring(1).toLowerCase())}" />
                <%-- Set which "pill" of the menu is active
                <li class="${ params.action == "list" ? 'active' : '' }">
                    <g:link action="list"><g:message code="default.list.label" args="[entityName]"/></g:link>
                </li>
                <li class="${ params.action == "create" ? 'active' : '' }">
                    <g:link action="create"><g:message code="default.new.label"  args="[entityName]"/></g:link>
                </li>
            </ul>
        </g:if> --%>

        <g:if test="${flash.message}">
            <div class="alert alert-info"><g:message code="${flash.message}" args="${flash.args}"
           default="${flash.default}"/></div>
        </g:if>

        <g:layoutBody />
        <g:pageProperty name="page.body" />
    </div>

    <g:if test="${ pageProperty(name:'page.footer') }">
        <g:pageProperty name="page.footer" />
    </g:if>
    <g:else>
        <footer id="Footer">
        </footer>
    </g:else>

    <r:layoutResources />
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:20:30.240

我刚刚遇到了同样的问题 - 几乎相同的堆栈跟踪。grails clean 和 grails compile --refresh-dependencies 都不起作用。

经过几个小时的努力，我终于采取了删除 .grails 缓存文件夹的步骤。重新启动时，我执行了刷新依赖项和清理。

这似乎成功了。

# php - PHPmyAdmin 不显示所有用户评论

> ID：15293228
> 
> 赞同：0
> 
> 时间：2013-03-08T11:44:33.830
> 
> 标签：php, database, textbox, phpmyadmin, comments

我创建了一个系统，允许用户在不同的图像下输入评论。然后将这些评论存储在后端数据库 - phpmyadmin 中。

然而，每当用户输入超过 6 或 7 个字长的评论时，phpmyadmin 数据库不会显示完整的信息，除非我单击显示在一长行中的结构。

用户最多有 750 个字符，并且所有信息都被存储，但是有没有办法我可以更改 phpmyadmin 中的视图，以便所有信息都显示在一个框中？而不是一条线？

问题在于 phpmyadmin 不显示所有信息，除非单独单击每个条目 - 用户评论在那里并且没有遗漏任何内容，但似乎 phpmyadmin 只显示前几个单词。另外，我检查了字符设置，这似乎没问题。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T11:51:30.403

好吧，这实际上不是“问题”或错误，而是它的设计方式。您是仅使用 phpmyadmin 管理您的评论还是有自己的后端？

# javascript - ExtJS：销毁配置“closeAction”设置为“隐藏”的窗口

> ID：15293229
> 
> 赞同：7
> 
> 时间：2013-03-08T11:44:35.637
> 
> 标签：javascript, extjs, extjs4.1

我有一个[`closeAction`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.window.Window-cfg-closeAction)配置为`'hide'`实例化的窗口：

```
var myWin = Ext.create('Ext.window.Window', {
    ...
    closeAction:'hide',
    ...
}); 
```

`close()`因此，调用`myWin`只会隐藏窗口。我需要按照 Sencha 文档的暗示*销毁*窗口：`destroy`

> 从 DOM 中删除窗口并销毁它和所有后代组件。该窗口将无法通过 show 方法重新显示。

*我尝试了什么？*我试过了：

1.  直接调用`destroy`窗口对象：

    ```
    myWin.destroy(); 
    ```

2.  在调用之前设置`closeAction`为：`destroy``close()`

    ```
    win.closeAction='destroy';
    win.close(); 
    ```

在这两种情况下，`myWin`只是隐藏而不是破坏。有什么想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T16:45:49.450

方法`destroy()`应该成功地从 DOM 中删除窗口对象。为了说明这一点，您可以查看[JSFiddle](http://jsfiddle.net/5BcBd/1/)中的基本示例。

调用`myWin.destroy()`该结构后，该结构被清除，并且无法使用 重新调用该窗口`myWin.show()`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-05T11:12:49.190

你想破坏窗口吗？使用下面的代码

```
Ext.getCmp('Window Id').destroy(); 
```

# algorithm - 如何设计一种算法来计算倒计时式数学数字拼图

> ID：15293232
> 
> 赞同：28
> 
> 时间：2013-03-08T11:44:41.283
> 
> 标签：algorithm, combinatorics

我一直想这样做，但每次我开始思考这个问题时，它都会让我大吃一惊，因为它是指数级的。

我希望能够理解和编码的问题解决者是倒计时数学问题：

给定一组数字 X1 到 X5，计算如何使用数学运算将它们组合成 Y。您可以应用乘法、除法、加法和减法。

那么如何`1,3,7,6,8,3`制作`348`呢？

答案：`(((8 * 7) + 3) -1) *6 = 348`。

如何编写一个可以解决这个问题的算法？当你试图解决这样的问题时，你从哪里开始？在设计这样的算法时，你必须考虑哪些重要的考虑因素？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T13:02:35.320

Very quick and dirty solution in Java:

```
public class JavaApplication1
{

    public static void main(String[] args)
    {
        List<Integer> list = Arrays.asList(1, 3, 7, 6, 8, 3);
        for (Integer integer : list) {
            List<Integer> runList = new ArrayList<>(list);
            runList.remove(integer);
            Result result = getOperations(runList, integer, 348);
            if (result.success) {
                System.out.println(integer + result.output);
                return;
            }
        }
    }

    public static class Result
    {

        public String output;
        public boolean success;
    }

    public static Result getOperations(List<Integer> numbers, int midNumber, int target)
    {
        Result midResult = new Result();
        if (midNumber == target) {
            midResult.success = true;
            midResult.output = "";
            return midResult;
        }
        for (Integer number : numbers) {
            List<Integer> newList = new ArrayList<Integer>(numbers);
            newList.remove(number);
            if (newList.isEmpty()) {
                if (midNumber - number == target) {
                    midResult.success = true;
                    midResult.output = "-" + number;
                    return midResult;
                }
                if (midNumber + number == target) {
                    midResult.success = true;
                    midResult.output = "+" + number;
                    return midResult;
                }
                if (midNumber * number == target) {
                    midResult.success = true;
                    midResult.output = "*" + number;
                    return midResult;
                }
                if (midNumber / number == target) {
                    midResult.success = true;
                    midResult.output = "/" + number;
                    return midResult;
                }
                midResult.success = false;
                midResult.output = "f" + number;
                return midResult;
            } else {
                midResult = getOperations(newList, midNumber - number, target);
                if (midResult.success) {
                    midResult.output = "-" + number + midResult.output;
                    return midResult;
                }
                midResult = getOperations(newList, midNumber + number, target);
                if (midResult.success) {
                    midResult.output = "+" + number + midResult.output;
                    return midResult;
                }
                midResult = getOperations(newList, midNumber * number, target);
                if (midResult.success) {
                    midResult.output = "*" + number + midResult.output;
                    return midResult;
                }
                midResult = getOperations(newList, midNumber / number, target);
                if (midResult.success) {
                    midResult.output = "/" + number + midResult.output;
                    return midResult
                }
            }

        }
        return midResult;
    }
} 
```

**UPDATE**

It's basically just simple brute force algorithm with exponential complexity. However you can gain some improvemens by leveraging some heuristic function which will help you to order sequence of numbers or(and) operations you will process in each level of `getOperatiosn()` function recursion.

Example of such heuristic function is for example difference between mid result and total target result.

This way however only best-case and average-case complexities get improved. Worst case complexity remains untouched.

Worst case complexity can be improved by some kind of branch cutting. I'm not sure if it's possible in this case.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-08T11:53:46.953

当然它是指数级的，但它很小，所以一个好的（足够）天真的实现将是一个好的开始。我建议你放弃通常的带括号的中缀符号，并使用后缀，它更容易编程。您始终可以将输出美化为单独的阶段。

首先列出并评估所有（有效的）数字和运算符序列。例如（在后缀中）：

```
1 3 7 6 8 3 + + + + + -> 28
1 3 7 6 8 3 + + + + - -> 26 
```

我的 Java 很可笑，我来这里不是为了被嘲笑，所以我将把这个代码留给你。

对于所有阅读本文的聪明人：是的，我知道即使是像这样的小问题也有可能更快的更聪明的方法，我只是将 OP 指向一个初始的工作解决方案。其他人可以用更聪明的解决方案写出答案。

所以，回答你的问题：

*   我从一个算法开始，我认为它会很快引导我找到一个可行的解决方案。在这种情况下，（对我而言）显而易见的选择是对所有可能的计算进行详尽的枚举和测试。
*   如果显而易见的算法由于性能原因看起来没有吸引力，我将开始更深入地思考它，回想我知道的其他可能提供更好性能的算法。我可能会先开始编写其中的一个。
*   如果我坚持使用穷举算法并发现运行时间实际上太长，那么我可能会回到上一步并再次编码。但这必须是值得我花时间的，需要进行成本/收益评估——只要我的代码能够胜过 Rachel Riley，我就会感到满意。
*   重要的考虑因素包括我的时间*与*计算机时间，我的成本要高得多。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-12T08:52:02.157

下面的 c++11 中的工作解决方案。

基本思想是使用基于堆栈的评估（请参阅[RPN](http://en.wikipedia.org/wiki/Reverse_polish_notation)）并将可行的解决方案转换为中[缀表示法](http://en.wikipedia.org/wiki/Infix_notation)，仅用于显示目的。

如果我们有`N`输入数字，我们将使用`(N-1)`运算符，因为每个运算符都是二进制的。

首先，我们创建操作数和运算符（数组）的*有效排列。*`selector_`有效的排列是一种可以在没有堆栈下溢的情况下进行评估并且以堆栈上的一个值（结果）结束的排列。因此`1 1 +`是有效的，但`1 + 1`不是。

我们用操作数的每个排列（`values_`数组）和运算符的每个组合（数组）来测试每个这样的操作数-运算符排列`ops_`。匹配的结果打印得很漂亮。

参数取自命令行作为`[-s] <target> <digit>[ <digit>...]`. 该`-s`开关防止穷举搜索，只打印第一个匹配的结果。

（用于`./mathpuzzle 348 1 3 7 6 8 3`获取原始问题的答案）

此解决方案不允许连接输入数字以形成数字。这可以作为额外的外循环添加。

工作代码可以从[这里](https://bitbucket.org/mitchnull/samples/raw/tip/cpp/mathpuzzle.cpp)下载。*（注意：我更新了该代码，支持连接输入数字以形成解决方案）*

有关其他说明，请参阅代码注释。

```
#include <iostream>
#include <vector>
#include <algorithm>
#include <stack>
#include <iterator>
#include <string>

namespace {

enum class Op {
    Add,
    Sub,
    Mul,
    Div,
};

const std::size_t NumOps = static_cast<std::size_t>(Op::Div) + 1;
const Op FirstOp = Op::Add;

using Number = int;

class Evaluator {
    std::vector<Number> values_; // stores our digits/number we can use
    std::vector<Op> ops_; // stores the operators
    std::vector<char> selector_; // used to select digit (0) or operator (1) when evaluating. should be std::vector<bool>, but that's broken

    template <typename T>
    using Stack = std::stack<T, std::vector<T>>;

    // checks if a given number/operator order can be evaluated or not
    bool isSelectorValid() const {
        int numValues = 0;
        for (auto s : selector_) {
            if (s) {
                if (--numValues <= 0) {
                    return false;
                }
            }
            else {
                ++numValues;
            }
        }
        return (numValues == 1);
    }

    // evaluates the current values_ and ops_ based on selector_
    Number eval(Stack<Number> &stack) const {
        auto vi = values_.cbegin();
        auto oi = ops_.cbegin();
        for (auto s : selector_) {
            if (!s) {
                stack.push(*(vi++));
                continue;
            }
            Number top = stack.top();
            stack.pop();
            switch (*(oi++)) {
                case Op::Add:
                    stack.top() += top;
                    break;
                case Op::Sub:
                    stack.top() -= top;
                    break;
                case Op::Mul:
                    stack.top() *= top;
                    break;
                case Op::Div:
                    if (top == 0) {
                        return std::numeric_limits<Number>::max();
                    }
                    Number res = stack.top() / top;
                    if (res * top != stack.top()) {
                        return std::numeric_limits<Number>::max();
                    }
                    stack.top() = res;
                    break;
            }
        }
        Number res = stack.top();
        stack.pop();
        return res;
    }

    bool nextValuesPermutation() {
        return std::next_permutation(values_.begin(), values_.end());
    }

    bool nextOps() {
        for (auto i = ops_.rbegin(), end = ops_.rend(); i != end; ++i) {
            std::size_t next = static_cast<std::size_t>(*i) + 1;
            if (next < NumOps) {
                *i = static_cast<Op>(next);
                return true;
            }
            *i = FirstOp;
        }
        return false;
    }

    bool nextSelectorPermutation() {
        // the start permutation is always valid
        do {
            if (!std::next_permutation(selector_.begin(), selector_.end())) {
                return false;
            }
        } while (!isSelectorValid());
        return true;
    }

    static std::string buildExpr(const std::string& left, char op, const std::string &right) {
        return std::string("(") + left + ' ' + op + ' ' + right + ')';
    }

    std::string toString() const {
        Stack<std::string> stack;
        auto vi = values_.cbegin();
        auto oi = ops_.cbegin();
        for (auto s : selector_) {
            if (!s) {
                stack.push(std::to_string(*(vi++)));
                continue;
            }
            std::string top = stack.top();
            stack.pop();
            switch (*(oi++)) {
                case Op::Add:
                    stack.top() = buildExpr(stack.top(), '+', top);
                    break;
                case Op::Sub:
                    stack.top() = buildExpr(stack.top(), '-', top);
                    break;
                case Op::Mul:
                    stack.top() = buildExpr(stack.top(), '*', top);
                    break;
                case Op::Div:
                    stack.top() = buildExpr(stack.top(), '/', top);
                    break;
            }
        }
        return stack.top();
    }

public:
    Evaluator(const std::vector<Number>& values) :
            values_(values),
            ops_(values.size() - 1, FirstOp),
            selector_(2 * values.size() - 1, 0) {
        std::fill(selector_.begin() + values_.size(), selector_.end(), 1);
        std::sort(values_.begin(), values_.end());
    }

    // check for solutions
    // 1) we create valid permutations of our selector_ array (eg: "1 1 + 1 +",
    //    "1 1 1 + +", but skip "1 + 1 1 +" as that cannot be evaluated
    // 2) for each evaluation order, we permutate our values
    // 3) for each value permutation we check with each combination of
    //    operators
    // 
    // In the first version I used a local stack in eval() (see toString()) but
    // it turned out to be a performance bottleneck, so now I use a cached
    // stack. Reusing the stack gives an order of magnitude speed-up (from
    // 4.3sec to 0.7sec) due to avoiding repeated allocations.  Using
    // std::vector as a backing store also gives a slight performance boost
    // over the default std::deque.
    std::size_t check(Number target, bool singleResult = false) {
        Stack<Number> stack;

        std::size_t res = 0;
        do {
            do {
                do {
                    Number value = eval(stack);
                    if (value == target) {
                        ++res;
                        std::cout << target << " = " << toString() << "\n";
                        if (singleResult) {
                            return res;
                        }
                    }
                } while (nextOps());
            } while (nextValuesPermutation());
        } while (nextSelectorPermutation());
        return res;
    }
};

} // namespace

int main(int argc, const char **argv) {
    int i = 1;
    bool singleResult = false;
    if (argc > 1 && std::string("-s") == argv[1]) {
        singleResult = true;
        ++i;
    }
    if (argc < i + 2) {
        std::cerr << argv[0] << " [-s] <target> <digit>[ <digit>]...\n";
        std::exit(1);
    }
    Number target = std::stoi(argv[i]);
    std::vector<Number> values;
    while (++i <  argc) {
        values.push_back(std::stoi(argv[i]));
    }
    Evaluator evaluator{values};
    std::size_t res = evaluator.check(target, singleResult);
    if (!singleResult) {
        std::cout << "Number of solutions: " << res << "\n";
    }
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-08T11:57:05.300

输入显然是一组数字和运算符：D={1,3,3,6,7,8,3} 和 Op={+,-,*,/}。最直接的算法是[蛮力](http://en.wikipedia.org/wiki/Brute-force_search)求解器，它[枚举](http://en.wikipedia.org/wiki/Enumeration#Enumeration_in_computability_theory)了这些集合的所有可能组合。集合 Op 的元素可以根据需要多次使用，但集合 D 中的元素只使用一次。伪代码：

```
D={1,3,3,6,7,8,3}
Op={+,-,*,/}
Solution=348
for each permutation D_ of D:
   for each binary tree T with D_ as its leafs:
       for each sequence of operators Op_ from Op with length |D_|-1:
           label each inner tree node with operators from Op_
           result = compute T using infix traversal
           if result==Solution
              return T
return nil 
```

除此之外：阅读 jedrus07 和 HPM 的答案。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-03-18T16:04:46.350

到目前为止，最简单的方法是智能地暴力破解它。您只能用 6 个数字和 4 个运算符构建有限数量的表达式，只需遍历所有表达式即可。

多少？由于您不必使用所有数字并且可以多次使用相同的运算符，因此此问题相当于“您最多可以使用 6 个叶子和四个可能的标签制作多少个严格标记的二叉树（又名完整二叉树）对于每个非叶节点？”。

具有 n 个叶子的完整二​​叉树的数量等于 catalan(n-1)。你可以看到如下：

每个具有 n 个叶子的完整二​​叉树都有 n-1 个内部节点，并且以独特的方式对应于具有 n-1 个节点的非完整二叉树（只需从完整的叶子中删除所有叶子即可获得它）。恰好有 catalan(n) 可能的二叉树有 n 个节点，所以我们可以说一棵有 n 个叶子的严格二叉树有 catalan(n-1) 可能的不同结构。

每个非叶子节点有 4 种可能的运算符： 4^(n-1) 种可能性叶子可以在 n 中编号！* (6 选择 (n-1)) 不同的方式。（除以 k！对于出现 k 次的每个数字，或者只是确保所有数字都不同）

因此，对于 6 个不同的数字和 4 个可能的运算符，您会得到 Sum(n=1...6) [ Catalan(n-1) * 6!/(6-n)! * 4^(n-1) ] 总共 33,665,406 个可能的表达式。不是很多。

你如何列举这些树？

给定具有 n-1 个或更少节点的所有树的集合，您可以通过将所有 n-1 树与空树、所有 n-2 树与 1 个节点树、所有 n -3棵树，所有2个节点树等，并将它们用作新形成的树的左右子树。

因此，从一个空集开始，您首先生成只有一个根节点的树，然后从一个新的根节点开始，您可以将其用作左子树或右子树，生成两棵树，如下所示： / 和 . 等等。

您可以即时将它们转换为一组表达式（只需遍历运算符和数字）并随时评估它们，直到产生目标数字。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-10-19T20:37:29.157

我用 Python 编写了自己的倒计时求解器。

这是代码；它也可以在[GitHub](https://github.com/Pulsar1977/countdown_solver)上找到：

```
#!/usr/bin/env python3

import sys
from itertools import combinations, product, zip_longest
from functools import lru_cache

assert sys.version_info >= (3, 6)

class Solutions:

    def __init__(self, numbers):
        self.all_numbers = numbers
        self.size = len(numbers)
        self.all_groups = self.unique_groups()

    def unique_groups(self):
        all_groups = {}
        all_numbers, size = self.all_numbers, self.size
        for m in range(1, size+1):
            for numbers in combinations(all_numbers, m):
                if numbers in all_groups:
                    continue
                all_groups[numbers] = Group(numbers, all_groups)
        return all_groups

    def walk(self):
        for group in self.all_groups.values():
            yield from group.calculations

class Group:

    def __init__(self, numbers, all_groups):
        self.numbers = numbers
        self.size = len(numbers)
        self.partitions = list(self.partition_into_unique_pairs(all_groups))
        self.calculations = list(self.perform_calculations())

    def __repr__(self):
        return str(self.numbers)

    def partition_into_unique_pairs(self, all_groups):
        # The pairs are unordered: a pair (a, b) is equivalent to (b, a).
        # Therefore, for pairs of equal length only half of all combinations
        # need to be generated to obtain all pairs; this is set by the limit.
        if self.size == 1:
            return
        numbers, size = self.numbers, self.size
        limits = (self.halfbinom(size, size//2), )
        unique_numbers = set()
        for m, limit in zip_longest(range((size+1)//2, size), limits):
            for numbers1, numbers2 in self.paired_combinations(numbers, m, limit):
                if numbers1 in unique_numbers:
                    continue
                unique_numbers.add(numbers1)
                group1, group2 = all_groups[numbers1], all_groups[numbers2]
                yield (group1, group2)

    def perform_calculations(self):
        if self.size == 1:
            yield Calculation.singleton(self.numbers[0])
            return
        for group1, group2 in self.partitions:
            for calc1, calc2 in product(group1.calculations, group2.calculations):
                yield from Calculation.generate(calc1, calc2)

    @classmethod
    def paired_combinations(cls, numbers, m, limit):
        for cnt, numbers1 in enumerate(combinations(numbers, m), 1):
            numbers2 = tuple(cls.filtering(numbers, numbers1))
            yield (numbers1, numbers2)
            if cnt == limit:
                return

    @staticmethod
    def filtering(iterable, elements):
        # filter elements out of an iterable, return the remaining elements
        elems = iter(elements)
        k = next(elems, None)
        for n in iterable:
            if n == k:
                k = next(elems, None)
            else:
                yield n

    @staticmethod
    @lru_cache()
    def halfbinom(n, k):
        if n % 2 == 1:
            return None
        prod = 1
        for m, l in zip(reversed(range(n+1-k, n+1)), range(1, k+1)):
            prod = (prod*m)//l
        return prod//2

class Calculation:

    def __init__(self, expression, result, is_singleton=False):
        self.expr = expression
        self.result = result
        self.is_singleton = is_singleton

    def __repr__(self):
        return self.expr

    @classmethod
    def singleton(cls, n):
        return cls(f"{n}", n, is_singleton=True)

    @classmethod
    def generate(cls, calca, calcb):
        if calca.result < calcb.result:
            calca, calcb = calcb, calca
        for result, op in cls.operations(calca.result, calcb.result):
            expr1 = f"{calca.expr}" if calca.is_singleton else f"({calca.expr})"
            expr2 = f"{calcb.expr}" if calcb.is_singleton else f"({calcb.expr})"
            yield cls(f"{expr1} {op} {expr2}", result)

    @staticmethod
    def operations(x, y):
        yield (x + y, '+')
        if x > y:                     # exclude non-positive results
            yield (x - y, '-')
        if y > 1 and x > 1:           # exclude trivial results
            yield (x * y, 'x')
        if y > 1 and x % y == 0:      # exclude trivial and non-integer results
            yield (x // y, '/')

def countdown_solver():
    # input: target and numbers. If you want to play with more or less than
    # 6 numbers, use the second version of 'unsorted_numbers'.
    try:
        target = int(sys.argv[1])
        unsorted_numbers = (int(sys.argv[n+2]) for n in range(6))  # for 6 numbers
#        unsorted_numbers = (int(n) for n in sys.argv[2:])         # for any numbers
        numbers = tuple(sorted(unsorted_numbers, reverse=True))
    except (IndexError, ValueError):
        print("You must provide a target and numbers!")
        return

    solutions = Solutions(numbers)
    smallest_difference = target
    bestresults = []
    for calculation in solutions.walk():
        diff = abs(calculation.result - target)
        if diff <= smallest_difference:
            if diff < smallest_difference:
                bestresults = [calculation]
                smallest_difference = diff
            else:
                bestresults.append(calculation)
    output(target, smallest_difference, bestresults)

def output(target, diff, results):
    print(f"\nThe closest results differ from {target} by {diff}. They are:\n")
    for calculation in results:
        print(f"{calculation.result} = {calculation.expr}")

if __name__ == "__main__":
countdown_solver() 
```

该算法的工作原理如下：

1.  这些数字按降序放入长度为 6 的元组中。然后，创建长度为 1 到 6 的所有唯一子组，首先创建最小的组。

    示例：(75, 50, 5, 9, 1, 1) -> {(75), (50), (9), (5), (1), (75, 50), (75, 9), (75, 5), ..., (75, 50, 9, 5, 1, 1)}。

2.  接下来，这些组被组织成一个层次树：每个组都被划分为其非空子组的所有唯一无序对。

    示例：(9, 5, 1, 1) -> [(9, 5, 1) + (1), (9, 1, 1) + (5), (5, 1, 1) + (9), (9, 5) + (1, 1), (9, 1) + (5, 1)]。

3.  在每组数字中，都会执行计算并存储结果。对于长度为 1 的组，结果只是数字本身。对于较大的组，对每对子组进行计算：在每对子组中，使用 +、-、x 和 / 将第一个子组的所有结果与第二个子组的所有结果组合，并存储有效结果。

    示例：(75, 5) 由对 ((75), (5)) 组成。(75)的结果是75；(5)的结果是5；(75, 5) 的结果是 [75+5=80, 75-5=70, 75*5=375, 75/5=15]。

4.  以这种方式，从最小的组到最大的组都生成了所有结果。最后，算法遍历所有结果并选择与目标数最接近的结果。

对于一组 m 个数，最大算术计算次数为

```
comps[m] = 4*sum(binom(m, k)*comps[k]*comps[m-k]//(1 + (2*k)//m) for k in range(1, m//2+1)) 
```

对于长度为 1 到 6 的所有组，最大总计算次数为

```
total = sum(binom(n, m)*comps[m] for m in range(1, n+1)) 
```

即 1144386。实际上，它会少得多，因为该算法重用了重复组的结果，忽略了琐碎的操作（加 0、乘以 1 等），并且因为游戏规则规定中间结果必须是正整数（这限制了除法运算符的使用）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-08T11:54:19.167

我认为，您需要先严格定义问题。你被允许做什么，你不能做什么。你可以从简单开始，只允许乘法、除法、减法和加法。

现在你知道了你的问题空间——输入集、可用操作集和所需输入。如果您只有 4 个操作和 x 个输入，则组合数小于：

您可以执行操作的顺序数（x！）乘以每一步操作的可能选择：4^x。正如你所看到的 6 个数字，它给出了合理的 2949120 操作。这意味着这可能是您对蛮力算法的限制。

一旦你有了蛮力并且知道它有效，你就可以开始使用某种[A* 算法](http://en.wikipedia.org/wiki/A%2a_search_algorithm)来改进你的算法，这需要你定义启发式函数。

在我看来，考虑它的最佳方式是搜索问题。主要困难将是找到好的启发式方法，或减少问题空间的方法（如果您的数字与答案相加，则至少需要一个乘法等）。从小处着手，在此基础上构建，并在获得一些代码后提出后续问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-03-02T21:24:25.780

我写了一个稍微简单的版本：

1.  对于列表中 2 个（不同）元素的每个组合，并使用 +、-、*、/ 组合它们（请注意，由于 a>b，因此只需要 ab，如果 a%b=0，则只需要 a/b）
2.  如果组合是目标，则记录解决方案
3.  递归调用简化列表

```
import sys

def driver():
    try:
        target = int(sys.argv[1])
        nums = list((int(sys.argv[i+2]) for i in range(6)))
    except (IndexError, ValueError):
        print("Provide a list of 7 numbers")
        return
    solutions = list()
    solve(target, nums, list(), solutions)
    unique = set()
    final = list()
    for s in solutions:
        a = '-'.join(sorted(s))
        if not a in unique:
            unique.add(a)
            final.append(s)
    for s in final:     #print them out
        print(s)

def solve(target, nums, path, solutions):
    if len(nums) == 1:
        return
    distinct = sorted(list(set(nums)), reverse = True)
    rem1 = list(distinct)
    for n1 in distinct: #reduce list by combining a pair
        rem1.remove(n1)
        for n2 in rem1:
            rem2 = list(nums)       # in case of duplicates we need to start with full list and take out the n1,n2 pair of elements
            rem2.remove(n1)
            rem2.remove(n2)
            combine(target, solutions, path, rem2, n1, n2, '+')
            combine(target, solutions, path, rem2, n1, n2, '-')
            if n2 > 1:
                combine(target, solutions, path, rem2, n1, n2, '*')
                if not n1 % n2:
                    combine(target, solutions, path, rem2, n1, n2, '//')

def combine(target, solutions, path, rem2, n1, n2, symb):
    lst = list(rem2)
    ans = eval("{0}{2}{1}".format(n1, n2, symb))
    newpath = path + ["{0}{3}{1}={2}".format(n1, n2, ans, symb[0])]
    if ans == target:
        solutions += [newpath]
    else:
        lst.append(ans)
        solve(target, lst, newpath, solutions)

if __name__ == "__main__":
    driver() 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-11-16T23:07:20.963

我写了一个终端应用程序来做到这一点： [https ://github.com/pg328/CountdownNumbersGame/tree/main](https://github.com/pg328/CountdownNumbersGame/tree/main)

在里面，我包含了一个解空间大小的计算说明（它是 n*((n-1)!^2)*(2^n-1)，所以：n=6 -> 2,764,800。我知道，恶心），更重要的是为什么会这样。如果您想检查一下，我的实现就在那里，但如果您不这样做，我会在这里解释。

从本质上讲，最坏的情况是蛮力，因为据我所知，如果没有明确检查，就不可能确定任何特定分支是否会产生有效答案。话虽如此，**平均情况**只是其中的一小部分。它是 {那个数字} 除以有效解决方案的数量（我倾向于在我的程序中看到大约 1000 个，其中 10 个左右是唯一的，其余的是这 10 个的排列）。如果我用手挥动一个数字，我会说大约有 2,765 个分支来检查哪个*不需要时间*。（是的，即使在 Python 中也是如此。）

TL;DR：尽管解决方案空间很大，并且需要数百万次操作才能找到*所有解决方案*，但只需要一个答案。最好的方法是蛮力，直到你找到一个并吐出来。

# openvms - 查找在 OpenVMS 中创建进程的日期/时间

> ID：15293249
> 
> 赞同：0
> 
> 时间：2013-03-08T11:45:33.210
> 
> 标签：openvms

我似乎找不到在 OpenVMS V8.3-1H1 中创建进程的日期/时间。

该`sh proc/all PROCESS_NAME`命令确实显示了一个*连接时间*，起初我认为它是自创建进程以来的时间，但经过几次测试后我发现它不是。

我已经搜索了我从 HP、*Ask the Wizard*存档和 openvms.org 获得的 PDF 文档，但无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T12:54:47.963

*HP OpenVMS DCL Dictionary*用于将`f$getjpi`项目代码解释`LOGINTIM`为字符串、进程创建时间。所以尝试一个

```
$ write sys$output f$getjpi(0,"LOGINTIM") 
```

看看这是否是您想要/需要的。

# c# - .Net - ProtocolType.IP、ProtocolType.IPv4 和 ProtocolType.IPv6 之间的区别

> ID：15293255
> 
> 赞同：2
> 
> 时间：2013-03-08T11:45:51.207
> 
> 标签：c#, .net, ip, ipv6

我可以理解 和 之间的区别`ProtocolType.IPv4`，`ProtocolType.IPv6`但我不确定`ProtocolType.IP`等式的来源，并且[文档](http://msdn.microsoft.com/en-us/library/system.net.sockets.protocoltype.aspx)并没有真正描述不同值的含义。

我可以`IP`每次都使用并假设生成的套接字适用于 IPv4 和 IPv6 地址吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:05:37.470

ProtocolType.IP 与 ProtocolType.Unspecified 具有相同的基础值，0。枚举值与传递给[WSASocket() winapi 函数的](http://msdn.microsoft.com/en-us/library/windows/desktop/ms742212%28v=vs.85%29.aspx)*协议*参数的参数值匹配。其中记录了 0 的含义：

> 如果指定值 0，则调用者不希望指定协议，服务提供者将选择要使用的协议。

Windows 上的哪个确实是 IP，但可能是 IPv4 或 IPv6，具体取决于机器配置。我会说您通常希望明确说明它，这样您就不必猜测何时出现问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T11:54:47.757

当我从一个项目中回忆起它的功能时，你走在了正确的轨道上。使用通用协议表示 IP 地址返回任何 IPv4 或 IPv6 地址，这可以。但是在我们的域中，我们启用了 IPv6 设备，但我们实际上只使用 IPv4，因此 PC 可能会为 IPv6 返回一个十六进制的 IP 地址，但没有任何东西可以单独使用或通信（至少据我所知可靠）所以我被迫退回到 IPv4。现在我只得到 10.xx.xxx.xxx 而不是 10 空格和 IPv6 十六进制地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T12:07:57.650

我想你正在寻找这个：

```
Socket socket 
  = new Socket(AddressFamily.InterNetworkV6, SocketType.Stream, ProtocolType.Tcp);
socket.SetSocketOption(SocketOptionLevel.IPv6, SocketOptionName.IPv6Only, 0); 
```

这将创建一个可以使用 TCP 处理 IPv4 和 IPv6 的套接字。

# ios - 如何在 if 语句中检查 NSNotification

> ID：15293261
> 
> 赞同：2
> 
> 时间：2013-03-08T11:46:08.800
> 
> 标签：ios, objective-c, nsnotificationcenter

我正在尝试运行以下代码，除非`NSNotification`发送了 a 。我不知道如何将`NSNotification`if 语句放入：

```
if (!self.subViewControllerProv) {
    self.subViewControllerProv = [[ProvViewController alloc] init];
}

[[NSNotificationCenter defaultCenter] addObserver:self
    selector:@selector(handleNotification:) name:@"SomeNotification" object:nil]; 
```

回顾一下：如果观察到了`NSNotification`消息，那么如果没有观察到`alloc`则`init`不要`ProvViewController`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T11:49:16.130

尝试添加一个实例变量来保存通知是否已触发的标志，在 -handleNotification: 中设置标志，然后在适当的时候检查。

```
- (void)handleNotification:(NSNotification*)notification {
    _notificationWasPosted = YES;
}

...

if (!_notificationWasPosted && !self.subViewControllerProv) {
    self.subViewControllerProv = [[ProvViewController alloc] init];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T11:50:14.990

那么如何做这样的事情：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(handleNotification) name:@"SomeNotification" object:nil]; 
```

进而

```
-(void) handleNotification {
    //BOOL _hasBeenSent in your interface
    _hasBeenSent = YES;
} 
```

然后在你的代码中

```
if(_hasBeenSent) {
    NSLog(@"The notification has been sent!");
} 
```

# jquery - 在 ajax 调用上将 1000 行提交到 db 使 ajax 调用挂起

> ID：15293262
> 
> 赞同：1
> 
> 时间：2013-03-08T11:46:08.617
> 
> 标签：jquery, asp.net, ajax, linq

我进行了一个 ajax 调用，导致将大约 1000 行插入到 db 中，直到完成，ajax 调用挂起并等待响应。在 ajax 调用中，我调用我的 CreateNotification 方法。

实现这一点以防止 ajax 调用挂起的最佳方法是什么？

```
 public static void CreateNewNotification(Guid UserGuid, string text, Guid questionGuid, string userName)
       {
           Notification notification;
           LinqConnectionDataContext context = new LinqConnectionDataContext();

           string baseUrl = text;

       var listOfFolowers = Folower.getMyFolowers(UserGuid);

       if (listOfFolowers.Count() != 0)
       {
           foreach (var item in listOfFolowers)
           {
               notification = new Notification();
               notification.Url = baseUrl;
               notification.UidCreationUser = UserGuid;
               notification.UidFolowerUser = item.FolowerUserId;
               notification.Text = userName + "just answered a question - " +text;
               notification.Uid = Guid.NewGuid();
               notification.CreationDate = DateTime.Now;
               notification.Checked = false;
               context.Notifications.InsertOnSubmit(notification);
           }

       }

       try
       {
           context.SubmitChanges();
       }
       catch (Exception e)
       {

       }

   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T04:04:12.580

对于这种情况，您可以使用 ajax 部分回发方法。通过使用部分回发，您可以控制您的查询。还使用任何其他方法插入批量数据。这个挂起是因为数据库时间到期。

# java - JPA 2.0 OPTIMISTIC_FORCE_INCREMENT 的语义

> ID：15293275
> 
> 赞同：4
> 
> 时间：2013-03-08T11:46:39.053
> 
> 标签：java, jpa, jakarta-ee, locking, optimistic-locking

我对 JPA 很陌生，阅读[了这篇](http://weblogs.java.net/blog/2009/07/30/jpa-20-concurrency-and-locking)关于 JPA2.0 中锁定模式的文章，这给我留下了一个关于 LockModeType.OPTIMISTIC_FORCE_INCREMENT 的问题。

这是带有文章示例的图像：http: [//i.stack.imgur.com/dFjhZ.jpg](http://i.stack.imgur.com/dFjhZ.jpg)

到目前为止，我明白只有当我对实体 A 的更新取决于刚刚读取的另一个实体 B 的状态时，才需要在事务 T1 中显式乐观锁定。

我也明白使用 OPTIMISTIC_FORCE_INCREMENT 的锁会导致 B 更新它的版本属性，这将导致 OptimisticLockException 在所有尝试更新 B 并在发布锁之前读取它的事务中（即使用旧版本值）。

我的问题是：**如果另一个事务 T2 在 B 的版本增加后立即开始，更改 B 并在 T1 提交之前完成，会发生什么？**

据我了解，T1 应该得到一个 OptimisticLockException。如果是这样，这个锁定有什么意义，因为它只是略微减少了 T1 的易受攻击时间窗口？这意味着：如果我想确保在 T1 完成之前 B 不会改变，我需要一个悲观锁，对吗？

提前感谢您向我说明这一点:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T00:49:22.097

您的示例问题突出显示了为什么这被称为“OPTIMISTIC”锁定。它并不完美，但如果足以满足现实世界中的大量情况，并且它使用的资源（包括时间）比硬锁少得多。

使用这种类型的锁定时，您是在为性能进行交易，并且通常会提高可用性，押注您的交易在大多数情况下都可以正常工作，并且您可以放心，在它不起作用的情况下' 将收到通知（将引发异常），然后您可以退后一步并“做正确的事情”：再试一次，放弃，......但是您选择处理异常。

悲观锁可能非常不适合需要某种级别锁定的高性能事务系统，但它们发生冲突的可能性很小：xTunes 的数百万用户中有多少（为了保护无辜而改名..）”订单”（更新）在任何时候，有多少都是从同一个帐户订购（更新）？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-25T06:44:17.043

> 如果另一个事务 T2 在 B 的版本增加之后立即开始，更改 B 并在 T1 提交之前完成，会发生什么？

无论你要使用什么RDBMS，即使它使用MVCC（多版本并发控制）或2PL（两阶段锁定），当你改变一个表行时，都会获取一个排他锁，并且只有在当前运行时才释放事务结束（提交或回滚）。

因此，一旦您增加 B 的版本，在您提交交易之前，其他交易都无法更改该记录。

[`OPTIMISTIC_FORCE_INCREMENT`](https://vladmihalcea.com/hibernate-locking-patterns-how-does-optimistic_force_increment-lock-mode-work/)还值得一提的是和之间的区别[`PESIMISTIC_FORCE_INCREMENT`](https://vladmihalcea.com/hibernate-locking-patterns-how-does-pessimistic_force_increment-lock-mode-work/)。`OPTIMISTIC_FORCE_INCREMENT`版本是否在事务结束时增加，而`PESIMISTIC_FORCE_INCREMENT`版本是否立即增加。

If there is heavy contention on that specific entity, then `PESIMISTIC_FORCE_INCREMENT` is much more appealing since once you acquired the lock, no other transaction is allowed to modify that record, and your transaction is not going to rollback due to optimistic version mismatch failures.

# mercurial - 是否可以将本地 mercurial 存储库配置为始终推送当前分支？

> ID：15293284
> 
> 赞同：1
> 
> 时间：2013-03-08T11:47:09.283
> 
> 标签：mercurial

push 命令接受一个`-b`标志，指示要推送哪个分支。但默认情况下，没有此标志是推送所有分支。

我想知道是否可以更改该默认值。意味着没有`-b`标志的推送只会推送当前分支。

是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T14:51:39.333

您可以伪造一个执行类似操作的命令：

```
[alias]
nudge = push --rev . 
```

这来自[史蒂夫·洛什](http://hgtip.com/tips/advanced/2009-09-28-nudge-a-gentler-push/)。这会推送当前版本，根据定义，它是在当前分支及其所有祖先上。

如果你想玩火，你可以这样做：

```
[alias]
push = push --rev . 
```

这将一直有效，直到它不起作用 - 也就是说，当任何其他脚本或命令尝试调用 push 并期望它推送所有内容时。

最好配合轻推。

# c# - 在一个解决方案中使用 vb.net 和 c#.net silverlight 应用程序

> ID：15293285
> 
> 赞同：0
> 
> 时间：2013-03-08T11:47:10.333
> 
> 标签：c#, vb.net, web-services, web-applications, projects-and-solutions

![在此处输入图像描述](../Images/a11f5a0df583c492563fa9339afcd687.png)

“rtls2.web”为 silverlight 项目提供数据：“rtls2”

"web" 为 silverlight 项目提供数据："silverlight

两个 Web 服务器是否同时在运行时运行？如果没有，有可能吗？

c# 和 vb 项目的功能都是必需的。如果我不能运行两个 Web 服务器并将它们用作一个单独的项目，我将重写一个代码，转换为另一种编程语言。

我可以开始使用 vb.net silverlight 项目，然后在运行时打开 c# 项目中的表单吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T11:50:14.743

C# 和 VB 都编译为由 .net 框架运行的 IL。所以不，没关系，IIS 服务器可以同时运行。当您注册一个站点时，您没有指定它是 C# 网站还是 VB 网站。

# java - 读取数据集的时间和/或内存比这更快吗？

> ID：15293294
> 
> 赞同：0
> 
> 时间：2013-03-08T11:47:42.387
> 
> 标签：java, file, matrix, dataset, micro-optimization

在 Java 中，下面是读取带有整数表的文件的代码：

```
public static int[][] getDataset() {

    // open data file to read n and m size parameters
    BufferedReader br = null;
    try {
        br = new BufferedReader(new FileReader(filePath));
    } catch (FileNotFoundException e) {
        e.printStackTrace();
        System.exit(1);
    }

    // count the number of lines
    int i = -1;
    String line = null, firstLine = null;
    do {

        // read line
        try {
            line = br.readLine();
            i++;
            if (i == 0) firstLine = line;
        } catch (IOException e) {
            e.printStackTrace();
            System.exit(1);
        }

    } while (line != null);

    // close data file
    try {
        br.close();
    } catch (IOException e) {
        e.printStackTrace();
        System.exit(1);
    }

    // check the data for emptiness
    if (i == 0) {
        System.out.println("The dataset is empty!");
        System.exit(1);
    }

    // initialize n and m (at least the first line exists)
    n = i; m = firstLine.split(" ").length;
    firstLine = null;

    // open data file to read the dataset
    br = null;
    try {
        br = new BufferedReader(new FileReader(filePath));
    } catch (FileNotFoundException e) {
        e.printStackTrace();
        System.exit(1);
    }

    // initialize dataset
    int[][] X = new int[n][m];

    // process data
    i = -1;
    while (true) {

        // read line
        try {
            line = br.readLine();
            i++;
        } catch (IOException e) {
            e.printStackTrace();
            System.exit(1);
        }

        // exit point
        if (line == null) break;

        // convert a line (string of integers) into a dataset row
        String[] stringList = line.split(" ");
        for (int j = 0; j < m; j++) {
            X[i][j] = Integer.parseInt(stringList[j]);
        }

    }

    // close data file
    try {
        br.close();
    } catch (IOException e) {
        e.printStackTrace();
        System.exit(1);
    }

    return X;

} 
```

数据集大小参数`n`和`m`的类型`static final int`和声明在外部以及`static final String filePath`.

我给你我的解决方案（也许对以后阅读本文的新手有用）并询问是否有可能使其在时间上更快和/或消耗更少的内存？我对完美的微优化很感兴趣，任何建议在这里都会很棒。特别是我不喜欢文件被打开两次的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T12:21:21.677

只读取一次文件并将所有行添加到`ArraList<String>.` `ArrayList`自动增长中。稍后处理该 ArrayList 以拆分行。

进一步优化：Strimg.split 使用一个巨大的正则表达式分析器。尝试使用 StringTokenizer 或您自己的 stringsplit 方法。

您可以通过使用GrowingIntArray 或GrowingStringArray 来代替ArrayList 来避免开销，这些可以避免一些开销但不太方便。

速度和内存使用是矛盾的，通常你不能同时优化两者。

您可以通过使用一维数组来节省内存，在 java 中，二维数组需要更多空间，因为每一列都是一个对象。通过 X[col + row *rowsize] 访问一个 dim 数组。

# android - Android内核中PC和LR功能相同

> ID：15293295
> 
> 赞同：1
> 
> 时间：2013-03-08T11:47:46.613
> 
> 标签：android, assembly, linux-kernel, arm

我面临一个问题，其中`PC`¹ 和`LR`²都指向内核 sched.c**中**的函数`cpuacct_charge()`。有没有可能发生这种情况的情况？我的分析显示`cpuacct_charge()`函数中没有递归。我无法提供代码。但是，任何情况下发生这种情况都会有很大帮助。

**澄清：** PC 和 LR 的值指向函数中的不同位置：
`void cpuacct_charge(struct task_struct *tsk, u64 cputime)`

*注 1：* `PC` - 程序计数器
*注 2：* `LR` - 链接寄存器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T12:05:04.797

当一个函数返回时，它基本上会跳转到链接寄存器中的地址。

因此，大概您在函数返回后立即暂停了程序。

# javascript - 流星 vs 德比谁赢了这场战斗？

> ID：15293301
> 
> 赞同：13
> 
> 时间：2013-03-08T11:48:03.143
> 
> 标签：javascript, node.js, meteor, derbyjs

最近在找关于meteor和derbyjs的资料，除了一篇优秀的derby的[文章](http://www.slideshare.net/studgeek/an-overview-of-derbyjs-and-meteorjs-for-the-nova-nodejs-meetup?ref=http://studgeek.com/2012/07/11/nodejs-meteor-derby-overview-nodedc/?preview=true&preview_id=216&preview_nonce=4396a73077)，没有找到太多，想和大家分享。除此之外，我对这两个项目都非常非常感兴趣。我会选择其中一个来测试它们的有效性，速度和效率，现在我担心的是我想在客户端实现jquery和bootstrap，在服务器上实现jade、nib stylus。我想知道哪个更快。从我在[文章](http://www.slideshare.net/studgeek/an-overview-of-derbyjs-and-meteorjs-for-the-nova-nodejs-meetup?ref=http://studgeek.com/2012/07/11/nodejs-meteor-derby-overview-nodedc/?preview=true&preview_id=216&preview_nonce=4396a73077)中读到的内容，我了解到 derby 更好、更快，并且与 SEO 更兼容。但我想知道你对这两个项目有什么看法。

我还读到，meteor 有一个更大的社区，并且对项目有同样多的投资，所以他们得到了更多的支持。

现在我只想知道今天最好的选择是什么。

非常感谢大家，希望能联系到项目的创建者，让他们回顾一下jade stylus nib、jquery和bootstrap等响应式设计模块的实现。

PS：我想留下一个重要的澄清，现在我最大的优势是表达nodejs和npm的易用性，允许我安装任何电动工具并在我的项目中实现它。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-08T12:58:36.043

可能有上千种方法来判断这一点，如果一个是社区的活跃程度，Derby 有 41 个标签/问题被问到，而 Meteor 在 stackoverflow 上有 1235 个。

正因为如此，有更多的包可以帮助你构建任何你想要的东西，错误被更快地修复并且框架更稳定。最初 derby 获得了优势，因为它拥有 MIT 许可证。然而，meteor 团队非常热衷于构建一个很棒的框架，也转移到了 MIT 许可证。

还要记住，演示是在 10/12 进行的，从那时起 Meteor 的性能有了显着提高。

关于缩放。我知道 Meteor 团队正在构建一种方法，在该方法中我们可以使用一种 DDP 代理进行水平扩展：[http ://www.youtube.com/watch?v=2oEPJGNNpkM](http://www.youtube.com/watch?v=2oEPJGNNpkM)

关于 NPM 模块和易用性，他们即将使用流星（您现在可以使用引擎分支使用它）：[http ://www.youtube.com/watch?v=kA-QB9rQCq8](http://www.youtube.com/watch?v=kA-QB9rQCq8)

路由（包括服务器端路由）：使用 Meteor-Router：[https ://github.com/tmeasday/meteor-router](https://github.com/tmeasday/meteor-router)

其他链接：

*   [http://blog.derbyjs.com/2012/04/14/our-take-on-derby-vs-meteor/](http://blog.derbyjs.com/2012/04/14/our-take-on-derby-vs-meteor/)（来自德比队）

所以 urmm 是的.. 选择 Meteor =)

# gwt - 在 GWT 中的 AbsolutePanel 上旋转元素

> ID：15293311
> 
> 赞同：1
> 
> 时间：2013-03-08T11:48:36.627
> 
> 标签：gwt, 3d, offset

我有一个`AbsolutePanel`放置小部件的。现在当鼠标滚轮时刻发生时，我想一个一个地向前移动元素。那么如何计算 x,y,z 位置并将元素放置在 AbsolutePanel 的中心。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T05:56:36.770

尝试将[JavaScript 3D 轮播](http://brenelz.com/blog/creating-a-3d-carousel-from-scratch/)移植到 GWT。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T09:38:55.613

使用[焦点面板](http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/user/client/ui/FocusPanel.html)。

```
 A simple panel that makes its contents focusable, 
    and adds the ability to catch mouse and keyboard events. 
```

无需实现或创建实现处理程序的新类（面板，我在上一个问题中看到:)）。

只需将您的孩子添加到`focuspanel`.

焦点面板实现了所有`mouse keyword events`

FocusPanel panel = new FocusPanel(child);//Child 将是您的面板或小部件。

这是一个很好的[Roughian 示例](http://examples.roughian.com/index.htm#Panels~FocusPanel)。

# java - 尽管失败，mina writefuture 仍返回written=true

> ID：15293312
> 
> 赞同：2
> 
> 时间：2013-03-08T11:48:50.063
> 
> 标签：java, tcp, apache-mina

这是代码

```
 WriteFuture writeFuture = session.write(message);
                writeFuture.addListener(this);
                writeFuture.awaitUninterruptibly();
                sentMessage = writeFuture.isWritten(); 
```

在发送消息之前，我将服务器与网络断开（拉线），这样消息就不可能发送出去。但是，sentMessage 无论如何都会返回 true。在wiresharks 输出上，您可以看到三个TCP 重传（显然没有确认）。在更多消息（与第一条消息不同）之后，它将意识到链接已关闭并返回 false。

我认为这是 isWritten() 告诉你数据包是否成功发送，但显然不是这样。我怎么知道包裹是否已经到达？我尝试了 mina 版本 2.0.7 和 2.0.4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T08:27:48.980

当消息被推送到内核时，就声明写入成功。这就是套接字的工作方式，您无法知道 TCP 消息何时发送或确认

# jquery - Firefox 中的 Colorbox Iframe 高度错误？

> ID：15293327
> 
> 赞同：1
> 
> 时间：2013-03-08T11:49:23.663
> 
> 标签：jquery, firefox, colorbox

Chrome 和 Firefox 似乎以不同的方式处理我嵌入的 youtube 视频的高度。虽然 chrome 做得对：

```
$(".youtube-video").colorbox({
  iframe:true,
  width: '33%',
  height: '33%'
}); 
```

Firefox 没有使用 33% 的屏幕高度。它使用较少（如仅 10%）。我猜这个问题与 iframe 的加载内容高度有关。但我不知道如何解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T02:56:55.263

对我和其他人都很好。如果您可以创建问题的可重现演示，请将其提交到 github 上的 colorbox 问题列表。我想当您尝试简化问题以创建演示时，您会发现真正的问题（用户错误，不相关的冲突脚本，您有什么）。

# c# - c#从后面的代码更改javascript变量的值

> ID：15293331
> 
> 赞同：0
> 
> 时间：2013-03-08T11:49:28.783
> 
> 标签：c#, javascript

我的 jquery 文件中有一个名为“tempVariable”的变量。现在我需要从 C# 中的代码更改它的值。我到目前为止所做的是

在我的 C# 代码中

```
public void changeValueInJquery()
{
    bool newVal = false;
    Page.ClientScript.RegisterClientScriptBlock(
        GetType(), 
        "key", "ChangeValue(" + newVal + ");", true);
 } 
```

我的jQuery代码是

```
function ChangeValue(value1) {
    alert(value1);
    tempVariable = value1;
} 
```

问题是 ChangeValue() 函数永远不会被击中。

我在某个地方出错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T11:58:17.853

我会检查一个 JS 调试器，看看你是否遇到任何错误。

`Page.ClientScript.RegisterStartupScript();`但是，如果您正在调用页面中已经存在的函数，通常尝试使用。这将确保脚本块在页面底部呈现，而不是在 ChangeValue 函数之前呈现。

正如其他人提到的，这与 jQuery 无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T12:06:31.247

可能`'...'`需要传递价值...

试试这个 ：

```
Page.RegisterStartupScript("changevalue", "<script>ChangeValue('" + newVal + "');</script>"); 
```

# jquery - jQuery Validate 插件：多个字段中只需要一个字段

> ID：15293332
> 
> 赞同：-2
> 
> 时间：2013-03-08T11:49:36.647
> 
> 标签：jquery, ruby-on-rails-3, jquery-validate

在stackoverflow上写这个[问题](https://stackoverflow.com/questions/8137844/jquery-validation-two-fields-only-required-to-fill-in-one)，如果电话和移动字段为空，那么它会给出一条错误消息，但之后当两者中的任何一个被填写并再次提交表单时，错误消息仍然存在。验证检查使用输入的旧值进行，当页面刷新时，它会采用新值。如果有人能帮我解决这个问题，我将不胜感激？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T17:11:31.350

1）根据[您链接的问题](https://stackoverflow.com/questions/8137844/jquery-validation-two-fields-only-required-to-fill-in-one)，我使用[该](http://docs.jquery.com/Plugins/Validation/validate#toptions)[选项](http://docs.jquery.com/Plugins/Validation/validate#toptions)构建[了这个 jsFiddle](http://jsfiddle.net/hUsjg/)，但仍然看到很多问题。这些规则似乎根本不起作用，这两个字段总是需要的。[`depends`](http://docs.jquery.com/Plugins/Validation/validate#toptions)

2)文件`require_from_group`中包含一个规则`additional-methods.js`。这两个字段必须具有相同`class`的规则才能定位，在这种情况下，`.group`。但是这种方法[有一些已知的错误](https://github.com/jzaefferer/jquery-validation/issues/412)，它会禁用表单上的所有其他规则

**演示**：http: [//jsfiddle.net/SvSrR/](http://jsfiddle.net/SvSrR/)

```
$(document).ready(function () {

    $('#myform').validate({ // initialize the plugin
        groups: {
            name: "telephone mobile"
        },
        rules: {
            telephone: {
                require_from_group: [1, '.group']
            },
            mobile: {
                require_from_group: [1, '.group']
            }
        }
    });

}); 
```

* * *

3）相反，我构建了一个名为`customrule`（您可以随意命名）的自定义规则，并且它按我认为应该的方式工作。我还使用了`groups`将两条错误消息合并为一条的选项。

**工作演示：http: [//jsfiddle.net/2g8hL/](http://jsfiddle.net/2g8hL/)**

```
$(document).ready(function () {

    $.validator.addMethod("customrule", function (value, element) {
        return (!($("#mobile").val() === '') || !($("#telephone").val() === ''));
    }, "please fill out at least one");

    $('#myform').validate({ // initialize the plugin
        groups: {
            name: "telephone mobile"
        },
        rules: {
            telephone: {
                customrule: true
            },
            mobile: {
                customrule: true
            }
        }
    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T11:52:14.600

尝试放置自定义错误放置

```
$('#form').validate({
    errorPlacement: function(error,element) {
                       return true;
                    }
}); 
```

# java - 如何更改父类中的私有字段

> ID：15293334
> 
> 赞同：4
> 
> 时间：2013-03-08T11:49:43.110
> 
> 标签：java, reflection, private

我使用了 Vaadin 框架并想覆盖一些行为。

问题是一个字段的所有设置器都有我不想调用的副作用。

出于这个原因，我想直接设置私有字段。

这是我的代码：

```
@Override
public void setItemDataSource(Item itemDataSource) {
    //do some stuff
    java.lang.reflect.Field privateField = this.getClass().getDeclaredField(itemDatasource); //Yes the spelling is correct.
    privateField.set(this, itemDataSource);   <<-- I get an error.
    //do more stuff 
```

我收到以下错误。

> //TODO: 复制粘贴错误。

显然，我不应该包括`this`作为需要更改字段的对象，而是包含其他一些参考。
我究竟做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T11:51:17.003

您需要先[使其可访问](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/AccessibleObject.html#setAccessible%28boolean%29)：

```
privateField.setAccessible(true);
privateField.set(this, itemDataSource); 
```

# java - 如何通过在 Java 中读取 URL 来知道图像是否存在？

> ID：15293339
> 
> 赞同：2
> 
> 时间：2013-03-08T11:49:56.607
> 
> 标签：java, image

[http://nichehire.com/Nichehire/upload/img_job_photo_burhan393@gmail.com.jpg](http://nichehire.com/Nichehire/upload/img_job_photo_burhan393@gmail.com.jpg)

我需要通过给定的 URL 知道图像是否存在。为此，我使用下面的代码。在下面的代码中，如果没有发生错误，我将返回 true，并且如果 URL 不包含图像，则将返回 false。但是上面给出的 URL 不包含图像，即使它返回 true。我的代码有问题吗？

```
public static boolean exists(String URLName) {
    boolean result = false;
    try {
        InputStream input = (new URL(URLName)).openStream();
        result = true;
    } catch (IOException ex) {
        System.out.println("Image doesnot exits :");
    }   
    return result;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T12:02:17.493

> ..图像是否存在..

```
ImageIO.read(URL) 
```

这确实是***确保***：

1.  URL 指向某些东西（不返回 HTTP 404）
2.  服务器允许访问资源（例如不返回 HTTP 500）
3.  URL 末尾的数据实际上代表了一个图像（正如 Java 所理解的那样），而不是重命名为`some.gif`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-06-08T10:57:27.643

[已解决] 此源代码运行良好！

```
String url1 = "https://fbcdn-dragon-a.akamaihd.net/hphotos-ak-xft1/t39.1997-6/p200x200/851575_126362190881911_254357215_n.png";

Image image = ImageIO.read(new URL(url1));
if(image != null){
    System.out.println("IMAGE"); 
}else{
    System.out.println("NOT IMAGE"); 
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T11:56:48.217

```
try
    boolean isImage(String image_path){
    Image image = new ImageIcon(image_path).getImage();
    if(image.getWidth(null) == -1){
         return false;
    }
    else{
         return true;
    }
} 
```

或者

[Image Magick 项目](http://www.jmagick.org/index.html)具有识别图像的设施，并且有一个名为 JMagick 的 Image Magick 的 Java 包装器，我认为您可能需要考虑而不是重新发明轮子：

我一直在使用 Image Magick，包括它在命令行中的“识别”功能，而且它从来没有失败过一次识别图片。回到我绝对需要该功能并且 JMagick 还不存在的日子里，我曾经使用`Runtime.exec()`ImageMagick 从 Java 中识别命令并且它运行良好。现在 JMagick 存在，这可能不再需要（但我还没有尝试过 JMagick）。

请注意，它提供的不仅仅是格式，例如：

```
$  identify tmp3.jpg 
tmp3.jpg JPEG 1680x1050 1680x1050+0+0 DirectClass 8-bit 293.582kb 

$  identify tmp.png
tmp.png PNG 1012x900 1012x900+0+0 DirectClass 8-bit 475.119kb 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T11:58:57.920

那是因为您假设任何返回的响应都是图像，尽管您的 URL 可能返回任何内容、HTML、JSON .. 任何内容。

# java - java.util.ArrayList 不能强制转换为 java.lang.Long 休眠分离标准

> ID：15293344
> 
> 赞同：1
> 
> 时间：2013-03-08T11:50:14.740
> 
> 标签：java, spring, hibernate, struts2, detachedcriteria

我`DetachedCriteria`这里有一个休眠代码。我在运行应用程序时收到一个`java.util.ArrayList cannot be cast to java.lang.Long`！基本上我在这里所做的是有两个列表，每个列表都有酒店和税收。这里的逻辑是如果指定了酒店和税，加载必要的数据！如果他们没有加载所有内容！当我未选择酒店并选择税收时，我收到上述错误。如果我选择酒店并将税款留空，我会得到预期的结果。

```
//Use if hotel is specified
    if(searchCriteria.getHotel().getId() != null){
        dc.add(Restrictions.eq("h.id", searchCriteria.getHotel().getId()));
    }else if(hotels != null && !hotels.isEmpty()){
        Collection<Long> hotelIds = new ArrayList<Long>();
        for(Hotel h : hotels){
            hotelIds.add(h.getId());
        }
        dc.add(Restrictions.eq("h.id",hotelIds));
    }

    //use if tax is specified
    if(searchCriteria.getTax().getId() != null){
        dc.add(Restrictions.eq("t.id", searchCriteria.getTax().getId()));
    }else if(tax != null && !tax.isEmpty()){
        Collection<Long> taxIds = new ArrayList<Long>();
        for(Tax t : tax){
            taxIds.add(t.getId());
        }
        dc.add(Restrictions.eq("t.id",taxIds));
    }

    //Order Result
    dc.addOrder(Order.asc("h.id"));
    dc.addOrder(Order.asc("t.code")); 
```

请让我知道我在这里犯了什么错误！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T11:58:17.367

**`Restrictions.in("t.id",taxIds)`**在匹配集合中的项目时使用。

在这里`Restrictions.eq("t.id",taxIds)`，taxIds 是 ArrayList，t.id 是 Long，所以***java.util.ArrayList 不能强制转换为 java.lang.Long***异常

# php - 使用 smarty 分配多维数组

> ID：15293347
> 
> 赞同：1
> 
> 时间：2013-03-08T11:50:21.317
> 
> 标签：php, smarty

我有以下通过 simplexml 访问的 xml：

```
<sequences>
    <sequence>
        <ImageUrl id="">
            http://www.image.com/image.jpg
        </ImageUrl>
        <photographer>name</photographer>
    </sequence>
    <sequence>
        <ImageUrl id="">
            http://www.image.com/image1.jpg
        </ImageUrl>
        <photographer>name 1</photographer>
    </sequence>
</sequences> 
```

我需要将此数据传递给 smarty 并在模板中输出。我需要能够输出第一个序列图像和摄影师姓名，然后是第二个。我怎样才能做到这一点？我可以看到您可以将一个数组传递给 smarty，然后在模板中对其进行循环，但我基本上需要传递一个多维数组，每个序列节点有 1 个数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:54:21.490

我最终将整个 simplexml obj 分配给一个 smarty 并像在模板中一样循环它：

```
{foreach from=$contents key=key item=item}
    {foreach from=$item key=k item=i}
        {if $k eq 'ImageUrl'}
            <img src="{$i}" />
        {/if}
        {if $k eq 'photographer'}
            <img src="{$i}" />
        {/if} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T11:53:33.430

然后将您的 XML 转换为数组：

在php中

```
<?php
$arr = array("first"=>1000, "second"=>1001, "third"=>1002);
$smarty->assign('myArray', $arr);
?> 
```

在 smarty 模板中：

```
<ul>
{foreach from=$myArray item=myArray name=myArray}
    <li>{$myArray.first}</li>
    <li>{$myArray.second}</li>
    <li>{$myArray.third}</li>
{/foreach}
</ul> 
```

# python - 未处理的选项

> ID：15293349
> 
> 赞同：0
> 
> 时间：2013-03-08T11:50:26.930
> 
> 标签：python, shell, getopt

我刚刚遇到了这个问题：

```
couchy.py -H myhost-a version -E no connection --nagios 
```

`couchy.py`是我使用的工具`getopt`。

请注意，调用参数中有一个错误：`no connection`未引用（应该是`"no connection"`），因此该`-E`标志仅`no`视为参数。更糟糕的是，还有一个令人讨厌的副作用：`--nagios`标志未被处理。似乎与选项标志无关的第一个条目（在这种情况下`connection`）停止标志处理。

结果，我的工具没有生成适合 nagios 的退出代码，只是一个正常的退出代码（在这种情况下`0`），nagios 将其解释为`OK: no error`，我错过了警报。

由于我经常犯这个错误（没有正确引用参数），我想避免副作用：有没有办法强制 getopt 处理所有标志，直到命令行结束？

# sql - 使用 Oracle 9i 将单个文本列列表转换为 2 列列表

> ID：15293354
> 
> 赞同：3
> 
> 时间：2013-03-08T11:50:43.300
> 
> 标签：sql, oracle, select

我有一个国家列表

```
SELECT * FROM COUNTRIES

COUNTRY
--------------
Austria
Belarus
Belgium
Finland
France
Iceland
Ireland
Switzerland 
```

我将如何选择它作为 2 列，例如

```
COLUMN1          COLUMN2
-------          -------
Austria          Belarus
Belgium          Finland
France           Iceland
Ireland          Switzerland 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T12:01:47.070

```
select country, next_country
from 
  (select country, 
         lead(country) over (order by country) next_country,
         row_number() over (order by country) rnk
   from countries
  ) 
where mod(rnk,2)=1; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T12:18:58.543

```
select 
  max(case mod(rownum - 1, 2) when 0 then country end) column1,
  max(case mod(rownum - 1, 2) when 1 then country end) column2
from countries
group by floor((rownum - 1) / 2)
order by floor((rownum - 1) / 2) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T12:15:25.030

我想您可以使用[子查询分解来完成此操作](http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_10002.htm#i2066378)

**示例查询**

```
WITH 
   countrycolumn1 AS (
      SELECT * FROM COUNTRIES where COUNTRY='some condition'),
   countrycolumn2 AS (
      SELECT * FROM COUNTRIES COUNTRY='some condition' )
   SELECT col1.country as COLUMN1  , col2.country as COLUMN2 
  FROM countrycolumn1 col1,countrycolumn2 col2
   WHERE col1.countrytype == col2 .countrytype 
```

# java - 我使用的是 JPA API 还是 Hibernate API？

> ID：15293355
> 
> 赞同：0
> 
> 时间：2013-03-08T11:50:52.463
> 
> 标签：java, spring, hibernate, spring-mvc

我对以下示例有疑问：

```
package org.andrea.myexample.HibernateOnSpring.dao;

import java.util.List;

import org.andrea.myexample.HibernateOnSpring.entity.Person;

import org.hibernate.Criteria;
import org.hibernate.HibernateException;
import org.hibernate.Session;
import org.hibernate.Transaction;
import org.hibernate.SessionFactory;
import org.hibernate.cfg.Configuration;
import org.hibernate.service.ServiceRegistry;
import org.hibernate.service.ServiceRegistryBuilder;
import org.springframework.transaction.annotation.Transactional;

public class PersonDAOImpl implements PersonDAO {

    // Factory per la creazione delle sessioni di Hibernate:
    private static SessionFactory sessionFactory;

    public void setSessionFactory(SessionFactory sessionFactory) {
        this.sessionFactory = sessionFactory;
    }

    // CREATE CRUD Operation:
    @Transactional(readOnly = false)
    public Integer addPerson(Person p) {

        System.out.println("Inside addPerson()");

        Session session = sessionFactory.openSession();

        Transaction tx = null;
        Integer personID = null;

        try {
            tx = session.beginTransaction();

            personID = (Integer) session.save(p);
            tx.commit();
        } catch (HibernateException e) {
            if (tx != null)
                tx.rollback();
            e.printStackTrace();
        } finally {
            session.close();
        }

        return personID;

    }

    // READ CRUD Operation (legge un singolo record avente uno specifico id):
    public Person getById(int id) {

        System.out.println("Inside getById()");

        Session session = sessionFactory.openSession();

        Transaction tx = null;          
        Person retrievedPerson = null;  

        try {
            tx = session.beginTransaction();
            retrievedPerson = (Person) session.get(Person.class, id);
            tx.commit();
        }catch (HibernateException e) { 
            if (tx != null)                 
                tx.rollback();          
            e.printStackTrace();
        } finally {                 
            session.close();
        }

        return retrievedPerson;
    }

    // READ CRUD Operation (recupera la lista di tutti i record nella tabella):
    @SuppressWarnings("unchecked")
    public List<Person> getPersonsList() {

        System.out.println("Inside getPersonsList()");

        Session session = sessionFactory.openSession();
        Transaction tx = null;
        List<Person> personList = null;

        try {
            tx = session.beginTransaction();
            Criteria criteria = session.createCriteria(Person.class);
            personList = criteria.list();
            System.out.println("personList: " + personList);
            tx.commit();
        }catch (HibernateException e) { 
            if (tx != null)                 
                tx.rollback();          
            e.printStackTrace();
        } finally {
            session.close();
        }
        return personList;
    }

    // DELETE CRUD Operation (elimina un singolo record avente uno specifico id):
    public void delete(int id) {

        System.out.println("Inside delete()");

        Session session = sessionFactory.openSession();
        Transaction tx = null;

        try {
            tx = session.beginTransaction();
            Person personToDelete = getById(id);
            session.delete(personToDelete);
            tx.commit();
        }catch (HibernateException e) { 
            if (tx != null)                 
                tx.rollback();          
            e.printStackTrace();
        } finally {
            session.close();
        }

    }

    @Transactional
    public void update(Person personToUpdate) {

        System.out.println("Inside update()");

        Session session = sessionFactory.openSession();
        Transaction tx = null;

        try {
            System.out.println("Insite update() method try");
            tx = session.beginTransaction();
            session.update(personToUpdate);

            tx.commit();
        }catch (HibernateException e) { 
            if (tx != null)                 
                tx.rollback();          
            e.printStackTrace();
        } finally {
            session.close();
        }   

    }

} 
```

在这个例子中，我使用的是 JPA API 还是 Hibernate API...使用的注解属于 JPA 还是属于 Hibernate？

肿瘤坏死因子

安德烈亚

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T11:52:37.703

进口清楚地表明：两者都不是。

```
org.springframework.transaction.annotation.Transactional 
```

这是一个适用于 Hibernate 或 JPA 的 Spring 注释。JTA API 独立于您选择的 ORM 解决方案。

其余的导入都指的是 Hibernate。

我可以理解您的困惑：JPA 是一个独立于您选择的 ORM 解决方案的 API。Hibernate 是一种实现。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T11:52:48.763

根据经验：

*   会话工厂 --> 休眠
*   实体管理器 --> JPA

`@Transactional`属于春天。并与 JPA 和 Hibernate 一起使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T11:52:42.843

由于您只导入 from `org.hibernate`，因此您显然使用的是 Hibernate。

# c++ - VC++ 应用程序中的实例

> ID：15293362
> 
> 赞同：0
> 
> 时间：2013-03-08T11:51:27.307
> 
> 标签：c++, visual-c++, background

正在开发 VC++ 应用程序

它是一个后台应用程序，即使在 PC 重启时也能在后台运行

我试图打开应用程序 - 一些像 mcafee 这样的防病毒软件，它在后台运行，但如果我们点击 exe 图标，它会出现在屏幕前面

```
 WinExec("application.exe", SW_SHOW);
                exit(1); 
```

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T12:52:23.503

听起来您的应用程序非常适合 Windows 服务。服务在没有 GUI 的情况下在后台运行，在 Windows 启动时启动，如果失败可以自动重新启动，等等。对于 GUI，您将编写一个单独的应用程序，该应用程序将通过某种类型的进程间附加到服务 -用于配置/控制目的的通信。

# php - PHP - 选择下拉菜单后直接显示来自 MySQL 的消息

> ID：15293366
> 
> 赞同：0
> 
> 时间：2013-03-08T11:51:44.770
> 
> 标签：php, javascript, html, drop-down-menu

我想在用户从下拉列表中选择一个选项后显示我的数据库中的详细信息。就像是 ：

```
SELECT `details` FROM $tbl_name WHERE id= value of selected option

<?php

    $db_name="pet"; // Database name
    $tbl_name="lover"; // Table name

    $pet_id=$_POST['pet_id']                        
    $sql="SELECT details FROM $tbl_name WHERE id = $pet_id";
    $result=mysql_query($sql);
    while($rows=mysql_fetch_array($result)){
    $id=$rows['id'];
    $details=$rows['details'];

    // close while loop 
    }

 ?>
<select name="pet_id">
    <option value="">Select PET:</options>
    <option value="1">DOG</options>
    <option value="2">BIRD</options>
    <option value="3">FISH</options> 
```

```
 <a> then it will display details from database</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T11:57:40.193

它的简单使用 Ajax，我已经完成了下面的检查

db_file.php

```
<?php
$db_name="pet"; // Database name
$tbl_name="lover"; // Table name

$pet_id=$_POST['pet_id']                        
$sql="SELECT details FROM $tbl_name WHERE id = $pet_id";
$result=mysql_query($sql);
while($rows=mysql_fetch_array($result)){
$id=$rows['id'];
$details=$rows['details'];

echo $details;//this output is transeffered to ur actual page
}

?> 
```

current_file.php

//并且不要忘记包含Jquery文件...

```
<script>
$("#pet_id").change(function()
    {

        var value = $("#pet_id option:selected").text();

        $.ajax({ 
            url: "current_file.php",
            data: {value: value},
            type: "POST",
            success: function(output) {
                    alert(output);//Here u wil get your output, You can append this where you want to display
                   }
            }
        })

});
</script>
<select name="pet_id" id ="pet_id" >
<option value="">Select PET:</options>
<option value="1">DOG</options>
<option value="2">BIRD</options>
<option value="3">FISH</options> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T12:04:39.043

HTML

```
<select name="pet_id" onchange="redirect(this.value)">
    <option value="">Select PET:</options>
    <option value="1">DOG</options>
    <option value="2">BIRD</options>
    <option value="3">FISH</options>
</select> 
```

JAVASCRIPT

```
function redirect(selectedOption)
{
  if(selectedOption)
  {
     window.location = 'yourpagename.php?opt='+selectedOption;
  }
  else
  {
     window.location = 'yourpagename.php';
  }
} 
```

PHP

```
if(isset($_GET['opt']))
{
  $opt = $_GET['opt'];  // do not forget to sanitize this
  $sql="SELECT details FROM $tbl_name WHERE id = $opt";
  $result=mysql_query($sql);
  while($rows=mysql_fetch_array($result)){
  $id=$rows['id'];
  $details=$rows['details'];
  // do something with $details; in your case echo it out      
  }
} 
```

PS：停止使用`mysql_*`功能。为什么？[**在这里**](https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-functions-in-php)找到[](https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-functions-in-php)

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T12:06:14.747

这是正确的代码：

```
<form action="$_SERVER['PHP_SELF']" method="POST">
<select name="pet_id" id="pet_id" onChange="this.form.submit()">
    <option value="">Select PET:</options>
<option value="1">DOG</options>
<option value="2">BIRD</options>
<option value="3">FISH</options>
</select>
</form> 
```

然后它将显示来自数据库的详细信息

PHP

```
$pet_id=$_POST['pet_id']; 

if (!empty($pet_id)){

    $db_name="pet"; // Database name
    $tbl_name="lover"; // Table name

    $sql="SELECT details FROM $tbl_name WHERE id = $pet_id";
    $result=mysql_query($sql);
    while($rows=mysql_fetch_array($result)){
        $id=$rows['id'];
        $details=$rows['details'];

       // close while loop 
     }
}//close if statement 
```**

# php - 在与表单相同的行上显示回显消息

> ID：15293367
> 
> 赞同：0
> 
> 时间：2013-03-08T11:51:46.020
> 
> 标签：php, forms, echo

如何在表单的同一行显示回显消息？

[现场版](http://33tpm.com/save_to_file/)

```
<form name="form1" method="post" action="">Correo: <input type="text" name="mail"><input type="submit" name="Suscribir" value="Suscribir"></form>
<?php
$email = $_POST['mail'];
//the data
$data = "$email\n";
//open the file and choose the mode
$fh = fopen("users.txt", "a");
fwrite($fh, $data);
//close the file
fclose($fh);

if (count($_POST)>0) echo "Suscripcion dado de alta"; 

?> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T11:54:40.960

只需将 css`display:inline`属性放在您的表单上：

```
<form style="display:inline-block;"> 
```

或者把你的 php 放到你的`<form>`

# php - 使用codeigniter从数据库中检索数据

> ID：15293371
> 
> 赞同：0
> 
> 时间：2013-03-08T11:51:57.583
> 
> 标签：php, codeigniter

我正在尝试使用 CodeIgniter 从数据库中检索数据。该查询工作正常，并将数据检索到一个数组中，该数组可以用`print_array()`.

```
Array
(
[0] => Array
    (
        [trans_id] => 33
        [CustomerAccountNumber] => BR002
        [TransactionType] => Invoice
        [TransactionDate] => 2012-09-06 00:00:00
        [InvoiceNo] => 00001732262
        [OrderNo] => 0000183946
        [GoodsValueInAccountCurrency] => 1055.26
        [AccountBalance] => 1104.52
        [SYSTraderTranTypeID] => 4
    )

[1] => Array
    (
        [trans_id] => 34
        [CustomerAccountNumber] => BR002
        [TransactionType] => Invoice
        [TransactionDate] => 2012-09-19 00:00:00
        [InvoiceNo] => 00001375022
        [OrderNo] => 0000184907
        [GoodsValueInAccountCurrency] => 49.26
        [AccountBalance] => 1104.52
        [SYSTraderTranTypeID] => 4
    ) 
```

)

但是，每当我尝试在表格中显示数据以生成 pdf 时，它都会给我一个错误，指出“尝试获取非对象的属性”。但是所有的对象都进入一个数组来显示。这是我的代码：

```
 print_array($data['data']);
      {  foreach ($data['data'] as $key=>$link) 
        {
                {
                $html .= '
                <tr>
                   <td width = "100">'.$link->InvoiceNo.'</td>
                   <td width = "300">'.($link->OrderNo).'</td>
                   <td width = "100">'.($link->TransactionDate).'</td>
                   <td width = "100">'.($link->TransactionType).'</td>
                   <td width = "100">'.($link->GoodsValueInAccountCurrency).'</td>     
                </tr>';
                }

        }} 
```

但这给了我错误“试图获取非对象的属性”。我没有任何线索。为什么？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T11:56:01.100

您有一个数组，并且您正在尝试访问对象的属性。您应该使用此语法来构建您的表：

```
$html .= '
    <tr>
        <td width = "100">'.$link['InvoiceNo'].'</td>
        <td width = "300">'.($link['OrderNo']).'</td>
        <td width = "100">'.($link['TransactionDate']).'</td>
        <td width = "100">'.($link['TransactionType']).'</td>
        <td width = "100">'.($link['GoodsValueInAccountCurrency']).'</td>     
    </tr>'; 
```

`$link->InvoiceNumber`是访问`object`属性的语法。 `$link['InvoiceNumber']`是访问`array`元素的语法。

# javascript - Android：setWebViewClient & setWebChromeClient 显示空白页

> ID：15293373
> 
> 赞同：0
> 
> 时间：2013-03-08T11:52:12.293
> 
> 标签：javascript, android, webview

我正在尝试使用 setWebViewClient 和 setWebChromeClient 加载页面。我可以成功加载 google.com、twitter.com、我用 JS+CSS+HTML 创建的另一个网页等等。但无法正确加载此网页：http: [//mozilla.github.com/pdf.js/web/viewer.html](http://mozilla.github.com/pdf.js/web/viewer.html)

有没有人知道发生了什么以及如何解决它？

这里的代码：

```
 public class MyActivity extends Activity {

      private WebView mWebView;

      @Override
      protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_shelf);

        mWebView = (WebView) findViewById(R.id.webView);

        mWebView.setWebChromeClient(new WebChromeClient(){
            public boolean onConsoleMessage(ConsoleMessage cm) {
                Log.d(Utils.tConsole, cm.message() 
                        + " -- From line " + cm.lineNumber() 
                        + " of " + cm.sourceId() 
                        );
                return true;
            }
        }); 
        mWebView.setWebViewClient(new WebViewClient(){
            @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url){
                view.loadUrl(url);
                return true;
            }
        }); 

        mWebView.getSettings().setLoadsImagesAutomatically(true); 
        mWebView.getSettings().setDatabaseEnabled(true);
        mWebView.getSettings().setAppCacheEnabled(true); 
        mWebView.getSettings().setDomStorageEnabled(true); 
        mWebView.getSettings().setJavaScriptEnabled(true);

        mWebView.loadUrl("http://mozilla.github.com/pdf.js/web/viewer.html");
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_shelf, menu);
        return true;
    }
} 
```

对应布局的代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@android:color/black"
>
  <WebView  xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/webView"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
  />
</LinearLayout> 
```

和清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.hey"
    android:versionCode="1"
    android:versionName="1.0" 
    >

    <uses-sdk android:minSdkVersion="14" android:targetSdkVersion="17" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>

    <application
        android:allowBackup="true"
        android:hardwareAccelerated="true"
        android:screenOrientation= "landscape"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.hey.MyActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

任何帮助将不胜感激！谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:51:32.720

第一个问题在 shouldOverrideUrlLoading() 中，将其删除或替换为：

```
 public boolean shouldOverrideUrlLoading(WebView view, String url) {
    if (Uri.parse(url).getHost().equals("www.myHost.com")) {
    // This is my web site, do not override; let WebView load the page
        return false;
    }
    // Otherwise, the link is not for a page on my site
    // Launch another Activity that handles URLs
    Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));
    startActivity(intent);
    return true;
  } 
```

现在还有一个问题：webview 似乎无法加载大文件。我可以显示小网页，但大页面永远不会加载。

有没有办法“调整” WebView 或建议？

# android - 如何在网格视图中设置图像的方向（用手机摄像头拍摄）？

> ID：15293380
> 
> 赞同：0
> 
> 时间：2013-03-08T11:52:42.850
> 
> 标签：android, imageview, photo, photos, photo-gallery

我正在为一个应用程序做大学作业，该应用程序允许我用我的手机联系人标记照片。我正在使用 ImageViews 的 GridView 来显示缩略图，效果很好。但是，无论使用哪种方式拍摄，所有图像都以横向显示。我查看了 ImageView 方法，但看不到任何可以告诉我拍摄照片时原始方向的信息。它可能在 ImageView.getDrawableState() 中吗？

手机上的图库应用程序以正确的方向打开图像，所以我想我在某处缺少照片的可读属性？

# php - Paypal 与卢比的交易不是美元

> ID：15293384
> 
> 赞同：0
> 
> 时间：2013-03-08T11:52:53.510
> 
> 标签：php, paypal, payment-gateway, paypal-sandbox

我在我的网站中集成了贝宝作为支付网关。但我网站的所有访问者都是印度。他们需要用卢比而不是美元进行交易。任何人都可以指导我，如何在贝宝中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T14:40:27.617

PayPal 仅支持特定货币，并非 PayPal 的每种不同产品/服务都支持所有货币。[您可以在此处](https://ppmts.custhelp.com/app/answers/detail/a_id/240/kw/supported%20currencies)找到通过不同产品支持的货币列表。

# android - 使用日历对象将“12:00”更改为“00:00”

> ID：15293386
> 
> 赞同：1
> 
> 时间：2013-03-08T11:53:07.580
> 
> 标签：android, calendar

我正在设置一个日历对象

```
SimpleDateFormat formatter = new SimpleDateFormat("dd-MM-yyyy hh:mm");  

String datetime_str = "08-03-2013 12:00";

Calendar cal = Calendar.getInstance();
cal.setTime(formatter.parse(datetime_str)); 
```

我为我的 cal 对象得到了这个：

```
 java.util.GregorianCalendar[time=1362697200000,areFieldsSet=true,lenient=true,zone=Europe/Amsterdam,firstDayOfWeek=2,minimalDaysInFirstWeek=4,ERA=1,YEAR=2013,MONTH=2,WEEK_OF_YEAR=10,WEEK_OF_MONTH=2,DAY_OF_MONTH=8,DAY_OF_YEAR=67,DAY_OF_WEEK=6,DAY_OF_WEEK_IN_MONTH=2,AM_PM=0,HOUR=0,HOUR_OF_DAY=0,MINUTE=0,SECOND=0,MILLISECOND=0,ZONE_OFFSET=3600000,DST_OFFSET=0] 
```

我没想到的部分

```
HOUR_OF_DAY=0,MINUTE=0,SECOND=0 
```

为什么 12（中午）改为“00”（午夜）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T11:57:02.397

使用`HH`(0-23) 或`kk`(1-24) 表示 24 小时制。`hh`适用于 1-12（上午/下午）。

[在 SimpleDateFormat 文档中阅读它](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)

# android - 减慢android中View Pager的速度

> ID：15293388
> 
> 赞同：4
> 
> 时间：2013-03-08T11:53:10.973
> 
> 标签：android, performance, animation, android-viewpager, swipe

我想停止 ViewPager 的正常滑动效果，所以我用 CustomViewPager 类实现了它....但是我想在分页器中显示我的另一个片段，标题栏点击第一个片段，与分页器的幻灯片动画相同...我怎样才能减慢寻呼机的滑动速度

# eclipse - SpringSource Tool Suite 缺少 Spring MVC 项目模板

> ID：15293390
> 
> 赞同：2
> 
> 时间：2013-03-08T11:53:15.910
> 
> 标签：eclipse, spring, eclipse-plugin

这不是[Spring Tool Suite 缺少 Spring MVC 项目模板的副本](https://stackoverflow.com/questions/13533123/spring-tool-suite-missing-spring-mvc-project-template)

使用 STS 2.9.2 并在我的插件文件夹中有 com.springsource.sts.wizard_2.9.2.201205071000-RELEASE。

我想使用 Spring MVC 项目模板，但在仪表板或“New->Other->SpringSource Tool Suite”菜单下都找不到它。

我不想重新安装，存在很多已安装的插件。 ![在此处输入图像描述](../Images/575beecef0ca85bd3f92e5e426f3e89f.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-02T18:02:10.883

在 STS v3.3.0 中，选择 File > New > Spring project - 当你到达那里时，你会在“Templates”部分看到一堆选项。其中之一是 Spring MVC 项目。选择它并按照说明进行操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T21:48:37.500

对于 STS 3.0，访问模板项目的方式已更改，因此您在仪表板中看不到模板项目并不奇怪。但是，您应该在新对话框中看到它。我不确定会发生什么。您可以查看错误日志并查找相关的堆栈跟踪（并将它们粘贴到此处）。

或者您可以安装 STS 3.1 或更高版本。最简单的方法可能是转到模板项目所在的 git repo，克隆它并将其作为 maven 项目导入到您的工作区中。

这是回购：

[https://github.com/SpringSource/spring-mvc-showcase](https://github.com/SpringSource/spring-mvc-showcase)

这样做和使用真正的模板项目之间的唯一区别是模板项目会自动为您配置一些东西，例如基本包和项目名称。但是，所有这些都可以在导入后更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-14T07:42:25.937

正如用户@AndrewEisenberg[在这里](https://stackoverflow.com/a/15303914/248616)建议的那样，查看错误日志会给我以下错误

*   连接到[https://raw.github.com/SpringSource/spring-integration-templates/master/si-sts-templates/builds/descriptor.xml](https://raw.github.com/SpringSource/spring-integration-templates/master/si-sts-templates/builds/descriptor.xml)失败，连接到[https://raw.github.com](https://raw.github.com)被拒绝。重试尝试 0 开始
*   连接到[https://raw.github.com/SpringSource/spring-data-gemfire-sts-templates/master/builds/descriptor.xml](https://raw.github.com/SpringSource/spring-data-gemfire-sts-templates/master/builds/descriptor.xml)失败，连接到[https://raw.github.com](https://raw.github.com)被拒绝。重试尝试 0 开始

因此，仔细查看错误日志中的错误，通过`Windows - Show View - Other - Error Log`调用后`File - New Project - Spring Project`，我看到了导致此症状的原因。

它是由无法访问[https://raw.github.com的互联网连接引起的](https://raw.github.com)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-01T03:22:17.563

我可以在这里看到 Spring MVC Project Template 的选项 [![在此处输入图像描述](../Images/95dbfde61e3b056308fb1789ec0af6ed.png)](https://i.stack.imgur.com/uEZqO.png)

# ajax - 根据服务器的响应更改图表的高值

> ID：15293392
> 
> 赞同：0
> 
> 时间：2013-03-08T11:53:29.613
> 
> 标签：ajax, json, apache, highcharts

嗨，这是我的 html 代码

```
 <select id="difques">
            <option value="firstfivemonth">firstfivemonth</option>
            <option value="nextfivemonth">nextfivemonth</option>
        </select> 
```

这是我在 jquery 中使用 ajax 调用服务器的代码............

```
 $('#difques').change(function(){
                     $.ajax({
                                type: "GET",
                                url: "ManyQuestionGraph",
                                data: "graphfor="+$('#difques :selected').val()+"&value="+${value},
                                success: function(data){
                                    var obj=jQuery.parseJSON(data);
                                    options.series[0].color='red';
                                    options.xAxis.categories=obj.value;
                                    options.series[0].data=obj.month;
                                    chart = new Highcharts.Chart(options);
                                }  
                            });
                        }); 
```

我的highchart代码是

```
 var chart;
                    $(document).ready(function() {
                       var options  = {
                            chart: {
                                renderTo: 'graphreport',
                                type: 'column'
                            },
                            title: {
                                text: 'Rating'
                            },
                            xAxis: {
                                categories: ['jan','feb','mar','apr','may']
                            },
                            yAxis: {
                                min: 0,
                                max: 5,
                                title: {
                                    text: ''
                                }
                            },
                            tooltip: {
                                formatter: function() {
                                    return ''+
                                        this.series.name +': '+ this.y +'';
                                }
                            },
                            credits: {
                                enabled: false
                            },
                            series: [{
                                name: 'Rating',
                                data: [1,2,3,4,5],
                                color: '#77c4d3'
                            }]
                        }
                        chart = new Highcharts.Chart(options); 
```

我的servlet代码是

```
 protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
                    JSONObject jsonobject = new JSONObject();
                    jsonobject.put("value",[5,4,3,2,1]);
                    jsonobject.put("month",['jun','jul','aug','sep','oct']);
                    response.setContentType("text/plain");
                    response.setCharacterEncoding("UTF-8");
                    response.getWriter().write(jsonobject.toString()); 
} 
```

我的网页看起来像这样...... ![在此处输入图像描述](../Images/21a11b844151cb393db8a87dc46c9e26.png)

但是当我在选择组合框中选择下五个月时，它使用 ajax 调用服务器，我可以在 ajax 成功期间从服务器获取 json 数据但是当我将数据传递给 highchart 时，它看起来像这样...... .

![在此处输入图像描述](../Images/8d18fa953216c8542272ecd70354fa20.png)

是我做错了还是我在编码中犯了一些错误......

帮我...........

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:26:21.797

这一点在我看来是错误的：

```
options.xAxis.categories=obj.value;
options.series[0].data=obj.month; 
```

这不是走错路了吗？月份是类别，值是数据？尝试：

```
options.xAxis.categories=obj.month;
options.series[0].data=obj.rate; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T12:33:03.777

您的 JSON 对于 Highcharts 是错误的，请从以下位置更改：

```
{
     "rate":",3.5,0,0,0",
     "month":"'jun','jul','aug','sep','oct'"
} 
```

对于这样的事情：

```
{
     "rate": [3.5,0,0,0],
     "month": ['jun','jul','aug','sep','oct']
} 
```

# javascript - 如何更改消息框标题？

> ID：15293393
> 
> 赞同：2
> 
> 时间：2013-03-08T11:53:31.883
> 
> 标签：javascript, asp.net

![在此处输入图像描述](../Images/c98f04b0c953399eae2ebf730ca84ad9.png)

如何在asp.net中更改此消息框的标题？

此标题出现在 IE 中。

帮忙...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T11:55:16.837

你不能。没有 API 可以做到这一点，默认标题是反网络钓鱼安全功能。

如果您想对警报消息的外观进行如此多的控制，那么您将不得不在 DOM 中构建自己的，而不是使用本机的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T12:03:00.690

您不能更改 javascript 消息框标题。看看这个：
[**如何编辑 JavaScript 警告框标题？**](https://stackoverflow.com/questions/1905289/how-to-edit-a-javascript-alert-box-title)

我建议您使用自定义消息框而不是`alert();`.
例如，您可以使用一些 jquery 插件，例如：
[**Stylish JavaScript Dialog (Alert, Confirm, Prompt) Boxes**](http://www.bitrepository.com/stylish-javascript-dialog-boxes.html)
或
[**Dialog Jquery UI**](http://jqueryui.com/dialog/#modal)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T11:55:21.820

你不能，这是由浏览器决定的，为了用户的安全和保障。如果真的想使用jQuery对话框。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-08T12:06:29.477

叹息……不，你不能。

它是一种安全/反网络钓鱼功能。

更多细节

看到[这个](https://stackoverflow.com/questions/5090180/javascript-change-message-box-title)

看到[这个](https://stackoverflow.com/questions/4172022/change-title-of-javascript-alert)

# java - Spring：如何自动装配合并的属性？

> ID：15293394
> 
> 赞同：0
> 
> 时间：2013-03-08T11:53:32.570
> 
> 标签：java, spring

在我们的模块化应用程序中，我们有多个 context:property-placeholder 定义，每个模块一个。例如。：

applicationContext-module1.xml：

```
<context:property-placeholder location="classpath*:module1.default.properties,classpath*:module1.${runtime.environment}.properties" ignore-unresolvable="true"/> 
```

applicationContext-module2.xml：

```
<context:property-placeholder location="classpath*:module2.default.properties,classpath*:module2.${runtime.environment}.properties" ignore-unresolvable="true"/> 
```

等等

@Value 非常适合注入单个值，但我想一次调试所有配置属性。是否可以自动连接从所有文件中读取的合并属性？

# php - 让反向数组工作

> ID：15293402
> 
> 赞同：0
> 
> 时间：2013-03-08T11:54:05.033
> 
> 标签：php

关于[这个](https://stackoverflow.com/questions/10777597/reverse-order-of-foreach-list-items)问题，我正在努力反转一个数组。我尝试了以下但不认为这是正确的，我哪里错了？

```
<?php $rows = get_field('news');
    $counter = 1;
    $rows_full = array_reverse($rows);
    foreach($rows as $row) { ?>
        <p style="margin-bottom:20px;font-size:14px;"><?php echo $row['news_description']; ?></p>
<?php $counter++ } ?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T11:55:23.270

改成这样

```
 $rows_full = array_reverse($rows);
foreach($rows_full as $row) { ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T11:56:14.297

这一行：

```
 foreach($rows as $row) { ?> 
```

应该：

```
foreach($rows_full as $row) { ?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T11:56:30.690

您正在反转数组，然后从不使用它。试试这个：

```
foreach($rows_full as $row) { ... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T11:57:28.027

[`array_reverse`](http://php.net/manual/en/function.array-reverse.php)不会就地反转数组，而是返回一个反转的新数组。

```
$arr = array(1,2,3,4);
$rev_arr = array_reverse($arr);

print_r($arr);         // prints [1,2,3,4,5]
print_r($rev_arr);     // prints [5,4,3,2,1] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T11:56:18.557

在你使用的 foreach 中，将`$rows`其更改为`$rows_full`

```
$rows_full = array_reverse($rows);
    foreach($rows_full as $row) { ?> 
```

# java - 添加到传递给方法的通用集

> ID：15293405
> 
> 赞同：17
> 
> 时间：2013-03-08T11:54:19.417
> 
> 标签：java, generics, collections

假设我有以下课程：

*   动物
*   猫
*   狗
*   牛

Animal 是基类，cat、dog 和 cow 是它的每个子类。

我现在有一个`Set<Cat>`,`Set<Dog>`并且`Set<Cow>`它们中的每一个都以相同的方式使用，因此创建一个通用函数来对它们进行操作是有意义的：

```
private boolean addObject(Animal toAdd, Animal defVal, Set<? extends Animal> vals) 
```

这很好用，我可以毫无问题地自由传递我的集合。

出现问题：我无法尝试将 Animal toAdd 添加到参数 vals。谷歌搜索显示，如果我将方法更改为：

```
private boolean addObject(Animal toAdd, Animal defVal, Set<? super Animal> vals) 
```

我将能够将 Animal 添加到参数 vals。这行得通，除了现在，我不能传递我的子类猫、狗和牛。进一步的研究告诉我，以下工作，没有警告启动：

```
private <T> boolean addObject(T toAdd, T defVal, Set<? super T> vals) 
```

问题是，我需要能够执行 Animal 都有的方法调用。使用简单的演员很容易解决这个问题：

```
((Animal)toAdd).getAnimalType() 
```

有没有办法解决这个问题，所以我可以保留通用功能，而不需要强制转换？除了使我的集合成为基本类型的所有集合之外，在这个例子中是 Animal 吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-08T11:57:27.023

很好的研究，你几乎就在那里。您只需要添加一个上限到`T`.

```
private <T extends Animal> boolean addObject(T toAdd, T defVal, Set<? super T> vals) 
```

# linux - 在没有root访问权限的情况下安装zsh？

> ID：15293406
> 
> 赞同：39
> 
> 时间：2013-03-08T11:54:23.327
> 
> 标签：linux, bash, shell, terminal, zsh

有可能（以及如何）？对于我有 ssh 访问权限（但没有 root 访问权限）的几台远程计算机，我真的需要这个。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-03-08T12:01:39.237

使用以下命令下载 zsh：

```
wget -O zsh.tar.xz https://sourceforge.net/projects/zsh/files/latest/download
mkdir zsh && unxz zsh.tar.xz && tar -xvf zsh.tar -C zsh --strip-components 1
cd zsh 
```

你可以自己编译zsh，例如：

```
./configure --prefix=$HOME
make
make install 
```

然后显式启动它，或者从当前 shell 的启动文件中以编程方式启动它（放在`exec $HOME/bin/zsh -l`正确的位置）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-08T12:00:28.320

你可以试试这个`chsh`命令。您确定远程计算机上没有安装 zsh 吗？如果没有，您可以这样做（引自[zsh FAQ 第 1.7 节](http://zsh.sourceforge.net/FAQ/zshfaq01.html)）

基本思路是使用 exec 将当前的 shell 替换为 zsh。通常您可以在登录文件中执行此操作，例如 .profile（如果您的 shell 是 sh 或 ksh）或 .login（如果它是 csh）。在您尝试此操作之前，请确保您有某种方法可以更改文件（例如通过 FTP），因为 exec 通常是相当无情的。

如果您在主目录的子目录 bin 中有 zsh，请将其放在 .profile 中：

```
[ -f $HOME/bin/zsh ] && exec $HOME/bin/zsh -l 
```

或者，如果您的登录 shell 是 csh 或 tcsh，请将其放入 .login：

```
if ( -f ~/bin/zsh ) exec ~/bin/zsh -l 
```

（在每种情况下， -l 都告诉 zsh 它是一个登录 shell）。

如果您想在提交之前检查它是否有效，您可以让登录 shell 询问是否执行 zsh。以下适用于 Bourne-like shell：

```
[ -f $HOME/bin/zsh ] && {
        echo "Type Y to run zsh: \c"
        read line
        [ "$line" = Y ] && exec $HOME/bin/zsh -l
} 
```

对于类似 C-shell 的外壳：

```
if ( -f ~/bin/zsh ) then
        echo -n "Type Y to run zsh: "
        if ( "$<" == Y ) exec ~/bin/zsh -l
endif 
```

将它（即使没有 -l）放入 .cshrc 不是一个好主意，至少没有对 csh 应该做什么进行一些测试，因为这将导致csh 的*每个*实例变成 zsh 并导致不会调用`csh -f`失败的 csh 脚本（是的，不幸的是有些人会编写这些脚本）。如果您想告诉 xterm 运行 zsh，请在执行 zsh 的同时将 SHELL 环境变量更改为 zsh 的完整路径（实际上，即使您不使用 xterm，这对于一致性也是明智的）。如果你必须从你的 .cshrc 执行 zsh，最低限度的安全检查是 if ($?prompt) exec zsh。

如果您希望您的登录 shell 在进程列表中显示为 -zsh，您可以将 zsh 链接到 -zsh（例如，通过 ln -s ~/bin/zsh ~/bin/-zsh）并将 exec 更改为 exec -zsh。（确保 -zsh 在您的路径中。）这与 -l 选项具有相同的效果。

脚注：如果您确实具有 root 访问权限，请确保 zsh 进入所有适当机器（包括 NIS 客户端）上的 /etc/shells，否则您可能会遇到与该机器的 FTP 问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T11:59:10.807

如果机器上有zsh，你应该可以`zsh`在提示下执行交换，如果可行，你可以尝试`chsh`交换你的shell（应该在没有root的情况下工作）或者当你连接`ssh`put`ssh -t hostname zsh`时自动启动它。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-03-08T11:59:50.877

在您的用户帐户目录中创建一个目录，解压缩[zsh](http://sourceforge.net/projects/zsh/)，然后使用`./config`,`make`和`make install`.

# http - 在将视频流式传输到 Windows Media Player 时，我的 http WebServer 面临问题？

> ID：15293414
> 
> 赞同：0
> 
> 时间：2013-03-08T11:54:39.590
> 
> 标签：http, video-streaming, windows-media-player, http-content-range

我创建了一个 http 网络服务器，它需要支持将视频流传输到其他应用程序。我在寻找时遇到了 Windows 媒体播放器的问题。当我以特定方式搜索时，Windows 媒体播放器崩溃。除此之外，它工作正常。

媒体播放器崩溃的步骤。

假设搜索栏上有 3 个点（比如 A、B、C）。

1) A 是视频的起始位置。

2) 跳转到位置 C。

3) 跳回位置 B。

4）再次跳回位置C（或位置B之前的任何位置）。（这是媒体播放器因跟随错误而崩溃的地方。）

“Windows Media Player 在播放文件时遇到问题”。

当媒体播放器崩溃时，我的网络服务器上没有收到任何请求。否则在我的服务器端，我会收到正常的 seek(content-range) http 请求。

跳转到 B 点时与媒体播放器交换的最后一个 Http 请求和响应。

要求：

```
GET XXXXXXXXXXXXXXXXXXXXXXXXX HTTP/1.1
Connection: keep-alive
Cache-Control: no-cache
Pragma: getIfoFileURI.dlna.org
Accept: */*
Range: bytes=10125312-16437247
User-Agent: NSPlayer/12.00.7601.17514 WMFSDK/12.00.7601.17514
GetContentFeatures.DLNA.ORG: 1
TransferMode.DLNA.ORG: Streaming
Host: localhost:16716 
```

回复：

```
HTTP/1.1 206 Partial Content
Date: Fri, 08 Mar 2013 11:41:54 GMT
Content-Type: video/mp4
Access-Control-Allow-Origin: *
Connection: keep-alive
TransferMode.DLNA.ORG: Streaming
File-Size: 33994175
Accept-Ranges: bytes
Content-Range: bytes 10125312-16437247/16437248
Content-Length: 6311936 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T16:25:10.063

`Content-Range`此问题可能是由您的响应中的无效标头引起的。

响应指定了一个`File-Size: 33994175`标头，但您的`Content-Range`标头说明了一些不同的内容：

```
Content-Range: bytes 10125312-16437247/16437248 
```

斜杠 ( `/16437248`) 后面的范围组件应反映底层资源的完整大小（以字节为单位）。我怀疑 windows 媒体播放器认为这意味着`16437248`位置和 borks 之后没有内容。

将有问题的标题更改为以下内容应该可以解决问题：

```
Content-Range: bytes 10125312-16437247/33994175 
```

# machine-learning - Mahout 集群不读取输入

> ID：15293421
> 
> 赞同：0
> 
> 时间：2013-03-08T11:54:53.123
> 
> 标签：machine-learning, cluster-computing, mahout

大家好，我正在尝试为 k-mean 聚类算法运行集群转储。它不工作。任何的想法？这是来自 psudo 模式集群上 Mahout in Action 的示例。

任何用于可视化集群转储输出或 K-mean 输出的工具或方法。

```
[186946@01HW534064 bin]$ ./mahout clusterdump -dt sequencefile -d /home/186946/reuters-vectors/dictionary.file-0-i reuters-fkmeans-clusters/clusters-3 -o /home/186946/clusters.txt -b 10 -n 10
Running on hadoop, using HADOOP_HOME=/home/186946/hadoop-0.20.2-cdh3u5
No HADOOP_CONF_DIR set, using /home/186946/hadoop-0.20.2-cdh3u5/src/conf 
MAHOUT-JOB: /home/186946/mahout-0.5-cdh3u5/mahout-examples-0.5-cdh3u5-job.jar
MAHOUT-JOB: /home/186946/mahout-0.5-cdh3u5/mahout-examples-0.5-cdh3u5-job.jar
13/03/08 17:26:11 ERROR common.AbstractJob: Unexpected reuters-fkmeans-clusters/clusters-3 while processing Job-Specific Options:
usage: <command> [Generic Options] [Job-Specific Options]
Generic Options:
 -archives <paths>              comma separated archives to be unarchived
                                on the compute machines.
 -conf <configuration file>     specify an application configuration file
 -D <property=value>            use value for given property
 -files <paths>                 comma separated files to be copied to the
                                map reduce cluster
 -fs <local|namenode:port>      specify a namenode
 -jt <local|jobtracker:port>    specify a job tracker
 -libjars <paths>               comma separated jar files to include in
                                the classpath.
 -tokenCacheFile <tokensFile>   name of the file with the tokens
Unexpected reuters-fkmeans-clusters/clusters-3 while processing Job-Specific    
Options:                                                                        
Usage:                                                                          
 [--seqFileDir <seqFileDir> --output <output> --substring <substring>           
--numWords <numWords> --pointsDir <pointsDir> --dictionary <dictionary>         
--dictionaryType <dictionaryType> --help --tempDir <tempDir> --startPhase       
<startPhase> --endPhase <endPhase>]                                             
Job-Specific Options:                                                           
  --seqFileDir (-s) seqFileDir             The directory containing Sequence    
                                           Files for the Clusters               
  --output (-o) output                     Optional output directory. Default   
                                           is to output to the console.         
  --substring (-b) substring               The number of chars of the           
                                           asFormatString() to print            
  --numWords (-n) numWords                 The number of top terms to print     
  --pointsDir (-p) pointsDir               The directory containing points      
                                           sequence files mapping input vectors 
                                           to their cluster.  If specified,     
                                           then the program will output the     
                                           points associated with a cluster     
  --dictionary (-d) dictionary             The dictionary file                  
  --dictionaryType (-dt) dictionaryType    The dictionary file type             
                                           (text|sequencefile)                  
  --help (-h)                              Print out help                       
  --tempDir tempDir                        Intermediate output directory        
  --startPhase startPhase                  First phase to run                   
  --endPhase endPhase                      Last phase to run                    
13/03/08 17:26:11 INFO driver.MahoutDriver: Program took 133 ms 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T14:51:03.287

```
mahout clusterdump \
-d output/vectors/dictionary.file-0 \
-dt sequencefile \
-i output/clusters/clusters-2-final/part-00000 \
-n 20 \
-b 100 \
-o cdump.txt \
-p output/clusters/clusteredPoints/ 
```

只需将上面的所有行复制粘贴到文本编辑器中，将您的参数`-d`, `-dt`, `-i`,`-p`小心地作为我的。

ps 路径来自 HDFS。

# android - 使用 onItemClickListner 自定义 Listview 无法正常工作，因为我在 listview 中使用按钮的 OnClickListner

> ID：15293424
> 
> 赞同：1
> 
> 时间：2013-03-08T11:55:07.717
> 
> 标签：android, android-listview, android-arrayadapter, android-custom-view

我正在开发一个具有 listview 的应用程序，这是一个自定义列表视图，里面有一个按钮和 textview，这个 listview 包含 textview 和一个按钮。我在按钮上使用了 Onclick 侦听器，所以我无法在 Listview 上使用 onItemClick 侦听器，我应该怎么做才能实现那个。

这是代码

```
<ListView
        android:id="@+id/lvMenuItem"
        android:layout_width="350dp"
        android:dividerHeight="3dp"
        android:layout_height="wrap_content" >
    </ListView> 
```

LvItem.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="65dp"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/imgMenu"
        android:layout_width="60dp"
        android:layout_height="60dp"
        android:clickable="false"
        android:contentDescription="@string/app_name"/>

    <LinearLayout
        android:layout_width="200dp"
        android:layout_height="wrap_content" 
        android:layout_marginLeft="5dp"
        android:orientation="vertical">

        <TextView
            android:id="@+id/tvSubMenu"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:focusable="false"
            android:focusableInTouchMode="false"
            android:text="" />

        <TextView
            android:id="@+id/tvType"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:focusable="false"
            android:focusableInTouchMode="false"
            android:text="" />
        <TextView
        android:id="@+id/tvPrice"
        android:layout_width="wrap_content"
        android:focusable="false"
        android:focusableInTouchMode="false"
        android:layout_height="wrap_content"
        android:text="" />
    </LinearLayout>

    <Button
        android:id="@+id/btnOrder"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="@string/btnOrder" />

</LinearLayout> 
```

按钮上的 OnclickListner 工作正常我应该为 Listview 上的 onItemCLickListner 做什么。请指导我

![在此处输入图像描述](../Images/40d9603c011cde0d5f6917682cc4be5a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T11:58:03.203

只需使`Button`不可聚焦，然后您就可以收到`Button.OnClick`回调以及`ListView.OnItemClick`

```
<Button
    android:id="@+id/btnOrder"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:text="@string/btnOrder"
    android:focusable="false"
    android:focusableInTouchMode="false"/> 
```

[你可以在这里](https://stackoverflow.com/questions/1121192/android-custom-listview-unable-to-click-on-items)找到更详细的解释。

# javascript - 让第三级子菜单出现在 jquery 中

> ID：15293425
> 
> 赞同：1
> 
> 时间：2013-03-08T11:55:11.307
> 
> 标签：javascript, jquery, css

嗨，我正在尝试使用 jquery 构建菜单，当我单击锚点时，我希望出现一个子菜单，但是当我单击此子菜单中的链接时，我希望出现另一个子菜单。

所以，父母 -> 孩子 -> 孙子

问题是当我点击 Child 时，它会关闭该菜单，而不是进一步扩展。我假设这是因为它读取 Child 并应用相同的 Jquery，即使我不想要它。

[http://jsfiddle.net/4AT8C/](http://jsfiddle.net/4AT8C/)

```
$("#pop-out-left ul li > a").click(function () {
$("#pop-out-left ul li")
    .not($(this).parent())
    .removeClass("active");
$(this).parent().toggleClass("active");
});

$("#pop-out-left ul li ul li a").click(function () {
$("#pop-out-left ul li ul li")
    .not($(this).parent())
    .removeClass("active");
$(this).parent().toggleClass("active");
}); 
```

html...

```
<div id="pop-out-left"> 
<ul>
    <li>
        <a>first</a>
        <ul>
            <li>
                <a> second</a>
                <ul>
                    <li>third level</li>
                </ul>
            </li>
        </ul>
    </li>
    <li>
        <a>first</a>

        <ul>
            <li>
                <a> second</a>
                    <ul>
                        <li>third level</li>
                    </ul>                    
            </li>
        </ul>
    </li>
    <li>
        <a>first</a>
        <ul>
            <li>
                <a> second</a>
                    <ul>
                        <li>third level</li>
                    </ul>                       
            </li>
        </ul>
    </li>
</ul> 
```

该CSS ...

```
#pop-out-left > ul > li > a + ul {
display: none;
}
#pop-out-left > ul > li.active > a + ul {
display: block;
}

#pop-out-left > ul > li > a + ul > li > ul {
display: none;
}

#pop-out-left > ul > li > a + ul > li.active > ul {
display: block;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T12:02:09.510

你的选择器是错误的。对于第一个，它只是抓住孩子们的任何 ul li 组合。您可以通过多种方式做到这一点。您可能想尝试为每个人分配不同的课程...这是您的代码，但可以正常工作。

```
$("#pop-out-left > ul > li > a").click(function () {
    $("#pop-out-left > ul > li")
        .not($(this).parent())
        .removeClass("active");
    $(this).parent().toggleClass("active");
});

$("#pop-out-left > ul > li > ul > li > a").click(function () {
    $("#pop-out-left ul > li > ul > li")
        .not($(this).parent())
        .removeClass("active");
    $(this).parent().toggleClass("active");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T12:06:22.080

嗯....可能你想要这样的东西：

### [小提琴](http://jsfiddle.net/4AT8C/2/)

```
 $("#pop-out-left ul li").click(function () {
   $("> ul",this).show();
   $(this).siblings().removeClass('active').find('ul').hide();
   $(this).addClass('active');
}); 
```

# iphone - 如何使用可点击的第一个单词创建 UILabel

> ID：15293426
> 
> 赞同：7
> 
> 时间：2013-03-08T11:55:11.947
> 
> 标签：iphone, ios, objective-c, ipad, uilabel

我想在 iOS 中创建标签，任何人都可以帮我将标签文本的第一个单词设为粗体且可点击。标签显示用户名及其评论，第一个单词始终是用户名。提前致谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-10T03:27:31.183

我想更优雅的解决方案将使用[TTTAttributedString](https://github.com/mattt/TTTAttributedLabel)或类似的。

**例子：**

![简单的演示](../Images/24653a5076b5152ea821f2cfd02cb780.png)

**输出：**

```
2013-03-10 07:16:54.429 ClickableUILabel-SO[4770:c07] UserName clicked
Address:    {
    comment = "Your comment.";
    userName = user2126537;
}
2013-03-10 07:16:55.460 ClickableUILabel-SO[4770:c07] UserName clicked
Address:    {
    comment = "Another comment.";
    userName = nsgulliver;
} 
```

**关键：**

```
...

NSRange userNameRange = [text rangeOfString: userName];

...

label.delegate = self;
[label addLinkToAddress: @{
           @"userName" : userName,
            @"comment" : comment
    }
                  withRange: userNameRange];

...

- (void) attributedLabel: (TTTAttributedLabel *)label
didSelectLinkWithAddress: (NSDictionary *)addressComponents
{
    NSLog(@"UserName clicked\nAddress:\t%@", addressComponents);
} 
```

[**完整的源代码**](https://dl.dropbox.com/u/930742/so/ClickableUILabel-SO.zip)

请注意，您应该`xcworkspace`在 Xcode/AppCode 中打开，因为我在这里使用的是[CocoaPods](http://cocoapods.org/)。

希望能帮助到你。

BR。
尤金

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T11:59:25.300

您需要`UITapGestureRecognizer` 用于制作`UILabel`可点击。使用`UIView` 并添加`UILabel`为子视图

```
UITapGestureRecognizer* gesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(yourMethod:)];
[yourLabelView setUserInteractionEnabled:YES];
[yourLabelView addGestureRecognizer:gesture]; 
```

制作第一个单词的一种方法`clickable`是使用字符串方法从标签中取出第一个单词并将其存储在另一个标签中并使用上面的代码使其可点击

```
NSArray* wordArray = [yourLabel.text componentsSeparatedByString: @" "];
NSString* firstWord = [wordArray objectAtIndex: 0]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T12:03:43.867

*   制作一个自定义按钮，该按钮将包含您用户名的第一个单词，使文本变为粗体。
*   取一个标签，就在自定义按钮旁边，写下除第一个单词之外的用户名的其余部分。
*   在自定义按钮的单击事件上，做任何你想做的事情..

希望这对你来说很清楚。

享受编程！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T11:59:26.807

标签似乎很难。Ypu 可以使用视图。并排添加一个按钮和标签，并将第一个字符添加到按钮，其他字符添加到标签。

# mysql - MYSQL 加入和分组依据

> ID：15293429
> 
> 赞同：0
> 
> 时间：2013-03-08T11:55:19.300
> 
> 标签：mysql

我在使用 MYSQL 中的表连接时无法正确获取语法。我有两张表如下...

```
primary_table

agent_id | primary_area | key
-----------------------------
   10    |xx1           | 1  
   11    |xx2           | 2  
   12    |xx3           | 3  
etc...

secondary_table

agent_id | sec_area     | key
-----------------------------
   34    |xx1           | 5  
   37    |xx1           | 6  
   38    |xx7           | 8  
etc... 
```

我要做的就是搜索（例如）两个表中的`agent_id`xx1 作为`primary_area`'sec_area' 和 'sec_area' 中的值。我需要使用`LIKE`，因为这是一个搜索功能，用户可能想要搜索所有具有 vale 的内容`xx`。

然后需要将返回的数据分组`agent_id`并保存在一个数组中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T11:58:57.023

那这个呢？

```
SELECT agent_id FROM primary_table WHERE primary_area LIKE "%1"
UNION
SELECT agent_id FROM secondary_table WHERE sec_area LIKE "%1" 
```

* * *

`Comment: how would I group the results by agent_id using UNION`

```
SELECT
  p.id
FROM
  primary_table AS p
JOIN
  sec_table AS s
ON
  p.id=s.id 
WHERE
  p.area LIKE "%1" AND s.area LIKE "%1" 
```

**[SQL小提琴](http://www.sqlfiddle.com/#!2/70f29/8)**

# c# - TabControl.SelectedItem 不是 TabItem？相对源绑定失败

> ID：15293434
> 
> 赞同：3
> 
> 时间：2013-03-08T11:55:22.910
> 
> 标签：c#, wpf, binding, tabcontrol, relativesource

我正在尝试使用 TabControl 并对此感到困惑

```
<TabControl Name="MainControl">
    <TabItem Header="MyTab1">
    <TextBlock Text="{Binding  Path=SelectedItem.Header, RelativeSource={RelativeSource FindAncestor, AncestorType=TabControl}}"/>
    </TabItem>
    <TabItem Header="Modules" ContentTemplate="{StaticResource tabItemControl}"/>
</TabControl> 
```

这按预期工作。

然而这：

```
<TabControl Name="MainControl">
    <TabItem Header="MyTab1">
    <TextBlock Text="{Binding  Path=Header, RelativeSource={RelativeSource FindAncestor, AncestorType=TabItem}}"/>
    </TabItem>
    <TabItem Header="Modules" ContentTemplate="{StaticResource tabItemControl}"/>
</TabControl> 
```

才不是。

知道为什么吗？

selectedItem 不是 TabItem 吗？层次结构有什么不同吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:04:07.657

如[DataTemplate 中的 RelativeSource 文章所示，可与 TabControl 一起使用，但不能与 TabItem 一起使用](https://stackoverflow.com/questions/9394302/relativesource-in-datatemplate-works-with-tabcontrol-but-not-with-tabitem)，TabItem 和 SelectedContent 托管在不同的面板中，因此 SelectedItem.Header 不起作用，因为它实际上不是 tabItem

从下面的较早帖子中发布窥探图像 ![在此处输入图像描述](../Images/722993975d84ad91d331aefe08f96ad4.png)

# android - Android列表视图的自定义字体

> ID：15293437
> 
> 赞同：4
> 
> 时间：2013-03-08T11:55:36.763
> 
> 标签：android, listview, fonts

我的 android 活动有一个自定义字体。

**MainActivity.class**

```
 private void initControls() {
    // TODO Auto-generated method stub
    header = (TextView) findViewById (R.id.tvAccommodations);
    lv = (ListView) findViewById (R.id.lvAccommodations);
    text = (TextView) findViewById (R.id.textView);

    Typeface tf = Typeface.createFromAsset(getAssets(),
            "fonts/heartbre.ttf");
    header.setTypeface(tf);
    text.setTypeface(tf);

    ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this,
                    R.array.abra_hotel, R.layout.custom_list_text);
            lv.setAdapter(adapter);
            header.setText(value); 
```

**custom_list_text.xml**

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/list_text"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:textSize="18sp"
android:textStyle="bold"
android:text="@string/app_name"
android:paddingLeft="6dip" /> 
```

Android 抛出 NullPointerException。为什么会这样？任何帮助表示赞赏。谢谢。

**日志猫：**

```
 03-08 19:48:03.859: E/AndroidRuntime(413): Caused by: java.lang.NullPointerException
    03-08 19:48:03.859: E/AndroidRuntime(413):  at com.say.philippineexplorer.PlaceAccommodations.initControls(PlaceAccommodations.java:34)
    03-08 19:48:03.859: E/AndroidRuntime(413):  at com.say.philippineexplorer.PlaceAccommodations.onCreate(PlaceAccommodations.java:22) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-08T14:57:00.403

这是自定义适配器类和构造函数

```
class CustomAdapter extends ArrayAdapter<CharSequence>{

    Context context; 
    int layoutResourceId;    
    CharSequence data[] = null;
    Typeface tf; 

public CustomAdapter(Context context, int layoutResourceId, CharSequence[] data, String FONT ) { 
    super(context, layoutResourceId, data);
    this.layoutResourceId = layoutResourceId;
    this.context = context;
    this.data = data;
    tf = Typeface.createFromAsset(context.getAssets(), FONT);
} 
```

将您要使用的字体放在您的资产文件夹中并像这样填写您的列表视图：

```
listAdapter = new CustomAdapter(this, R.layout.custom_list_text, R.array.abra_hotel, "name_of_font.ttf"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T11:59:07.440

您不能将字体直接应用于列表视图，您需要为列表视图创建自定义适配器并更改其字体以获取更多详细信息，请单击下面的堆栈帖子，它已经讨论过。

[如何在 ListView 上更改颜色和字体](https://stackoverflow.com/questions/7361135/how-to-change-color-and-font-on-listview)

# solr - Solr：通过短语查询将“at the moon nasa”与“at the moon”匹配的最佳方法？

> ID：15293438
> 
> 赞同：1
> 
> 时间：2013-03-08T11:55:41.820
> 
> 标签：solr, phrase, dismax

我有大约 500.000 个文档的索引，其中大约 10 个文档包含标题“at the moon”（'title' 字段）和标签“nasa”（'tag' 字段）。当我搜索“at the moon nasa”时，这些文件在搜索结果列表中的位置非常靠后。这是因为标题字段没有得到提升，但标签字段得到了相当大的提升。因此，带有标签“nasa”的其他文档优先于通过标题字段几乎匹配整个查询的文档。

然而，即使 Solr 不知道，查询“at the moon nasa”几乎与文档标题“at the moon”相匹配。如果我从查询中删除“nasa”部分，文档会出现在顶部。

有什么方法可以告诉 Solr 进行某种近似短语查询吗？通过 bq 参数实现某种语法搜索是否有意义，我会将搜索短语拆分为单词组合，例如：

```
// PHP-ish pseudocode
$bq[]=title:"at the"^2
$bq[]=title:"at the moon"^3
$bq[]=title:"at the moon nasa"^4
$bq[]=title:"the moon"^2
$bq[]=title:"the moon nasa"^3
$bq[]=title:"moon nasa"^4 
```

这是否有意义，并且根据它们匹配的查询的大部分来提升文档是否有意义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T14:28:00.683

在您执行任何其他操作之前，请尝试使用带有[pf3 参数](http://wiki.apache.org/solr/ExtendedDisMax#pf3_.28Phrase_trigram_fields.29)的 eDisMax 。这会自动为您完成 3 克。

您可能还对最近的一个[vifun 项目](https://github.com/jmlucjav/vifun)感兴趣，该项目有助于可视化各种参数的效果。

# php - ajax POST 上的错误 XML

> ID：15293442
> 
> 赞同：1
> 
> 时间：2013-03-08T11:55:55.030
> 
> 标签：php, jquery, xml, ajax, codeigniter

嗨，我有一个在 codeigniter 中开发的 stie，我想通过 ajax 调用发送一个 xml。xml 来自另一台服务器。这是我认为的ajax

```
 xmlDoc.loadXML(xmlfromserver);

            $(function(){
                 $.ajax({
                  type: "POST",
                  url: "<?php echo site_url('/backend/provider/all_country_request'); ?>",
                  data: "xml"+xmlDoc.xml,
                  async: false,
                  contentType: "text/xml",
                  dataType: "text",
                  success: function(msg)
                  {
                    alert(msg);
                  },
                  error: function()
                  {
                    alert("error");
                  }
                });
            }); 
```

这是我的控制器：

```
public function all_country_request(){
        if ($this->User_model->isLoggedIn()){
            $this->Travco_model->all_country_request();
        }
        else{
            redirect('/backend/user/home/');
        }
    } 
```

这是我的简单模型：

```
function all_country_request(){
         $xml_str = $_POST['xml'];
         $xml = new SimpleXMLElement($xml_str);
         foreach ($xml->DATA as $entry){            
            $data = array(
              'currency_code_travco'=>$entry->attributes()->CURRENCY_CODE,
              'currency_name'=>$entry->CURRENCY_NAME,
              'created'=>date('Y-m-d H:i:s'),
              'modified'=>date('Y-m-d H:i:s'),
         );
         $this->db->insert('currency_travco',$data);
            echo '<br>';
         } 

    } 
```

这是我的 XML：

```
<?xml version="1.0" standalone="yes"?>
<RETURNDATA lang="it-IT" type="COR" xsi:noNamespaceSchemaLocation="http://xmlv5test.travco.co.uk/trlink/schema/CountryRequestV6Rcv.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<MESSAGE>All Countries details and relevant city details</MESSAGE>
<DATA COUNTRY_CODE="ABW" CURRENCY_CODE="EUR">
    <COUNTRY_NAME>Aruba</COUNTRY_NAME>
    <CURRENCY_NAME>euro</CURRENCY_NAME>
</DATA> 
```

返回给我的错误在附图中 ![在此处输入图像描述](../Images/689b971f17d4d9a6c14c32c0882ddfa0.png)

问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T12:13:45.697

将 xml 文档作为数据发送到服务器。您必须将**processData**选项设置为***false***，以防止数据自动转换为字符串。例如 ：

```
$.ajax({
  url: "page.php",
  processData: false,
  data: xmlDocument
}); 
```

祝你好运，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T13:22:29.873

在继续之前，您需要正确验证您的 PHP 脚本所需要的任何类型的输入。

在您的情况下，更详细的变体*可能*如下所示：

```
try {
    if (!isset($_POST['xml'])) {
        throw new Exception('Missing Parameter Attribute "xml"');
    }
    $mode = libxml_use_internal_errors(true);
    $xml = new SimpleXMLElement($_POST['xml']);
} catch (Exception $e) {        
    $code   = 400;
    $phrase = 'Bad Request';
    header(sprintf('HTTP/ %d %s', $code, $phrase), true, $code);

    $response                 = new SimpleXMLElement('<?xml version="1.0" encoding="UTF-8"?><response/>');
    $response->status->phrase = $phrase;
    $response->status->code   = $code;
    $response->message = $e->getMessage();
    if ($errors = libxml_get_errors()) {
        $responseErrors = $response->addChild('errors');
        foreach($errors as $error) {
            $responseError = $responseErrors->addChild('error');
            foreach($error as $name => $value) {
                $value && $responseError->$name = rtrim($value);
            }
        }
    }
    header('Content-Type: application/my-app-response-bucket+xml; charset=utf-8');
    $response->asXML('php://STDOUT');
    return;
}

foreach ($xml->DATA as $entry) {
    $data = array(
        'currency_code_travco' => $entry->attributes()->CURRENCY_CODE,
        'currency_name'        => $entry->CURRENCY_NAME,
        'created'              => date('Y-m-d H:i:s'),
        'modified'             => date('Y-m-d H:i:s'),
    );
    $this->db->insert('currency_travco', $data);
    echo '<br>';
}

... 
```

对于服务丢失或无效数据的请求（*错误请求*）的错误条件，将返回正确的响应。它甚至有一个由 XML 突出显示错误组成的响应正文，例如缺少数据：

```
<?xml version="1.0" encoding="UTF-8"?>
<response>
  <status>
    <phrase>Bad Request</phrase>
    <code>400</code>
  </status>
  <message>Missing Parameter Attribute "xml"</message>
</response> 
```

或者在提供格式不正确的 XML ( `<?xml ?><fa ke></fa>blurb`) 的情况下：

```
<?xml version="1.0" encoding="UTF-8"?>
<response>
  <status>
    <phrase>Bad Request</phrase>
    <code>400</code>
  </status>
  <message>String could not be parsed as XML</message>
  <errors>
    <error>
      <level>3</level>
      <code>96</code>
      <column>6</column>
      <message>Malformed declaration expecting version</message>
      <line>1</line>
    </error>
  </errors>
  <errors>
    <error>
      <level>3</level>
      <code>41</code>
      <column>13</column>
      <message>Specification mandate value for attribute ke</message>
      <line>1</line>
    </error>
  </errors>
  <errors>
    <error>
      <level>3</level>
      <code>5</code>
      <column>16</column>
      <message>Extra content at the end of the document</message>
      <line>1</line>
    </error>
  </errors>
</response> 
```

# macos - 在 mac 上以 32 位运行的 64 位处理器

> ID：15293443
> 
> 赞同：0
> 
> 时间：2013-03-08T11:55:57.647
> 
> 标签：macos, 64-bit, 32-bit, processor

根据[苹果的 mac 处理器列表](http://support.apple.com/kb/HT3696?viewlocale=it_IT&locale=it_IT)，i5 应该是 64 位处理器。根据[这个视频](http://www.youtube.com/watch?annotation_id=annotation_900148&feature=iv&src_vid=srbdMHivkpo&v=akjVaF09mSY)，如果我输入`uname -m`终端，我应该得到 x86_64。但在我的情况下，它改为 i386。这是为什么？我还开发了一个应用程序，这是一个仅限 64 位的应用程序。该应用程序未在此 Mac 上运行。它在开始时崩溃。但是如果我在 x86_64 模式下编译而不是 64 位，那么它就可以工作。有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T12:36:05.373

32 位运行时不支持 ARC。因此，如果您使用 ARC，您将只需要生成 64 位二进制文​​件。

从[过渡到 ARC 发行说明](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)：

> ARC 在 Xcode 4.2 中支持 OS X v10.6 和 v10.7（64 位应用程序）以及 iOS 4 和 iOS 5。弱引用在 OS X v10.6 和 iOS 4 中不受支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T03:49:12.217

视频是错误的：`uname -m`告诉你内核在什么模式下运行，这与你的用户态程序几乎没有关系。如果您想确定 CPU 是否支持 64 位，请使用`sysctl hw.cpu64bit_capable`-- 因为您有 i5，所以它应该打印`hw.cpu64bit_capable: 1`表示“是”（0 表示“否”）。此外，运行 Activity Monitor 实用程序，并注意各种进程正在运行的模式——我猜很多将在“Intel（64 位）”中，因为在 10.6 中，OS X 提供的大多数程序都是 32 /64 位双架构，并且会更喜欢 64 位。

现在，关于您的应用程序：无论您只编译 64 位还是 63/64，它都应该在 64 位模式下运行，所以我怀疑这就是问题所在。可以肯定的是，以 32/64 编译它，运行它，然后使用 Activity Monitor 查看它实际运行的模式。

我不能确定，但​​我猜你的应用程序与 ARC 有问题。至少据我了解，仅当您仅编译 64 位时才启用（如果编译 32/64 则禁用）。

# windows - 如何使用 dos 命令在没有完整路径的情况下找到文件夹的目标？

> ID：15293449
> 
> 赞同：0
> 
> 时间：2013-03-08T11:56:22.953
> 
> 标签：windows, vbscript, cmd

如何在没有完整路径的情况下找到文件夹的目标？我想将文件夹中的一组文件复制到另一个文件夹。但我没有目标文件夹的完整路径，比如`C:\temp\folder A`源文件夹和目标文件夹的路径为`D:\temp\folder X\folder A`

我不知道 的名称`"folder x"`，但我希望将源`"folder A"`in的所有文件`C:\ drive`复制到`"folder A"`in `"D:\ drive"`。我想用 DOS 命令来做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:26:26.630

您不需要为此编写程序，它可以通过单个命令完成，如果在批处理文件中使用，请将 % 替换为 %%。如果您想知道：“delims==”防止在两个字符串中分解“文件夹 A”，我在这里告诉解释器使用 = 作为不存在的分隔符，因此我得到了呈现目标路径的整个字符串。

```
for /F "delims==" %a in ('Dir /AD /s /b d:\^|find "Folder A"') do copy "c:\temp\folder A" %a 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T18:22:24.877

尝试这样的事情：

```
Set fso = CreateObject("Scripting.FileSystemObject")

WScript.Echo FindFolder(fso.GetFolder("C:\temp"), "folder A")

Function FindFolder(parent, name)
  For Each sf In parent.SubFolders
    If LCase(sf.Name) = LCase(name) Then
      path = sf.Path
    Else
      path = FindFolder(sf, name)
    End If
    If Not IsEmpty(path) Then Exit For
  Next
  FindFolder = path
End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T17:21:03.800

如果您知道驱动器号，但不知道确切的文件夹。您可以从驱动器的顶层创建一个目录，然后进行查找，它应该返回您想要的文件夹。

目录 /AD /sd:*文件夹 A* /S

您应该能够使用 for 循环来解析输出。唯一的困难是驱动器D上是否有多个名为“文件夹A”的文件夹。这可能是@“Class Stacker”所指的内容，您是否需要假设它是唯一的。

# android - Android 谷歌地图片段崩溃

> ID：15293450
> 
> 赞同：3
> 
> 时间：2013-03-08T11:56:25.283
> 
> 标签：android, maps

正如谷歌教程所说，我已经在我的应用程序中嵌入了谷歌地图 V2。

切换到地图片段时出现以下错误。

```
03-08 12:52:01.600: E/AndroidRuntime(30314):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2105)

03-08 12:52:01.600: E/AndroidRuntime(30314): FATAL EXCEPTION: main

03-08 12:52:01.600: E/AndroidRuntime(30314): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{de.arvidg.exampleactionbartabs/de.arvidg.exampleactionbartabs.StartActivity}: 
java.lang.ClassNotFoundException: de.arvidg.exampleactionbartabs.StartActivity 
```

这里是源代码

```
package de.arvidg.exampleactionbartabs;

import com.google.android.gms.common.GooglePlayServicesUtil;
import com.google.android.gms.common.GooglePlayServicesUtil;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.MapFragment;
import com.google.android.maps.MapActivity;

import data.Device;
import data.Mission;
import de.arvidg.exampleactionbartabs.R;
import logic.FetchData;
import android.app.Fragment;
import android.content.Intent;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.EditText;

public class MapFrag extends MapFragment {

    protected FetchData thread;
    protected Device device;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        final View lView = inflater.inflate(R.layout.map, container,
                false);

        return lView;

    }

    public void setDumb() {

    }

    public Device getDevice() {
        return device;
    }

    public void setDevice(Device device) {
        this.device = device;
    }

}

            <?xml version="1.0" encoding="utf-8"?>
            <fragment xmlns:android="http://schemas.android.com/apk/res/android"
             android:id="@+id/map"
             android:layout_width="match_parent"
             android:layout_height="match_parent"
             class="com.google.android.gms.maps.SupportMapFragment"/> 
```

我的清单

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="de.arvidg.exampleactionbartabs"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="14" />

    <permission
        android:name="de.arvidg.exampleactionbartabs.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" />

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />

    <uses-permission android:name="de.arvidg.exampleactionbartabs.permission.MAPS_RECEIVE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".StartActivity"
            android:label="@string/app_name"
            android:theme="@android:style/Theme.Holo" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".MapFrag"
            android:label="Map"
            android:theme="@android:style/Theme.Holo" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="removed" />

        <uses-library android:name="com.google.android.maps" />
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-07T05:49:50.417

改变

`android:name="com.google.android.gms.maps.MapFragment"/>` 至

`android:name="com.google.android.gms.maps.SupportMapFragment"/>`在**activity_main.xml**

和改变

`public class MainActivity extends Activity`

`public class MainActivity extends FragmentActivity`在**MainActivity.java** _

 **这两个修复对我有用。**

# c# - C#：将受保护的工作表复制到另一个 excel 文件

> ID：15293451
> 
> 赞同：0
> 
> 时间：2013-03-08T11:56:30.197
> 
> 标签：c#, excel, vba

我试图将一个受保护的工作表复制粘贴到另一个 excel 文件，但我收到了类似的错误

> “索引无效。（HRESULT 异常：0x8002000B (DISP_E_BADINDEX)）”

C#代码：

```
try
{
    string startPath = System.IO.Path.GetDirectoryName(
        System.Diagnostics.Process.GetCurrentProcess().MainModule.FileName);
    string filePath = System.IO.Path.Combine(startPath, strPath);

    wBook = xCel.Workbooks.Open(filePath);
    wSheet = (Excel.Worksheet)wBook.Worksheets.get_Item(1);
    wSheet.Copy(Type.Missing, Type.Missing);
    wSheet = (Excel.Worksheet)xlApp.Workbooks[0].ActiveSheet;
    //wSheet = (Excel.Worksheet)xlApp.Workbooks[1].Sheets[1];
}
finally
{
    if (wBook != null)
    {
        wBook.Close();
    }
    if (xlApp != null)
    {
        xlApp.Quit();
    }                
} 
```

有人能告诉我我在这里做错了什么吗？？？

或者

请告诉我是否有更好的方法来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T12:00:58.613

我会检查：

```
wSheet = (Excel.Worksheet)wBook.Worksheets.get_Item(1); 
```

或者

```
wSheet = (Excel.Worksheet)xlApp.Workbooks[0].ActiveSheet; 
```

您的错误似乎表明 wBook 或 xlApp 中没有任何值。这就是索引无效的原因（好吧，工作簿或工作表是空的。我认为）

***如果它是受保护的工作表，它受保护的事实不会阻止您复制它吗？***

# google-apps-script - 我想访问从没有 ssl 的谷歌电子表格发布的网络应用程序的网址

> ID：15293453
> 
> 赞同：0
> 
> 时间：2013-03-08T11:56:31.537
> 
> 标签：google-apps-script, google-sheets

从不支持 SSL 的小型设备中，我想更新[谷歌](http://www.google.com)电子表格中的数据。使用[此脚本](http://mashe.hawksey.info/2011/02/collecting-any-data-in-a-google-spreadsheet-using-get-or-post-by-publishing-as-a-service-dev8d/ "这个脚本")，我可以提交数据 - 但只能使用 SSL（通过 URL [https://script.google.com/a/macros/...](https://script.google.com/a/macros/...)）。

是否有可能访问相同的已发布 Web 应用程序脚本，但没有 SSL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T15:05:31.440

不，访问脚本始终需要 SSL。

# c - Apple LLVM-gcc x86 程序集中发生了什么？

> ID：15293454
> 
> 赞同：8
> 
> 时间：2013-03-08T11:56:36.670
> 
> 标签：c, macos, assembly, x86, llvm-gcc

我有兴趣了解更多 x86/x86_64 程序集。唉，我在Mac上。没问题，对吧？

```
$ gcc --version
i686-apple-darwin11-llvm-gcc-4.2 (GCC) 4.2.1 (Based on Apple Inc. build 
5658) (LLVM build 2336.11.00)
Copyright (C) 2007 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO 
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. 
```

我用 C 语言编写了一个简单的“Hello World”，以了解我必须编写什么样的代码。我在大学时做了一点 x86，并查阅了许多教程，但没有一个看起来像我在这里看到的怪异输出：

```
.section    __TEXT,__text,regular,pure_instructions
.globl  _main
.align  4, 0x90
_main:
Leh_func_begin1:
pushq   %rbp
Ltmp0:
movq    %rsp, %rbp
Ltmp1:
subq    $32, %rsp
Ltmp2:
movl    %edi, %eax
movl    %eax, -4(%rbp)
movq    %rsi, -16(%rbp)
leaq    L_.str(%rip), %rax
movq    %rax, %rdi
callq   _puts
movl    $0, -24(%rbp)
movl    -24(%rbp), %eax
movl    %eax, -20(%rbp)
movl    -20(%rbp), %eax
addq    $32, %rsp
popq    %rbp
ret
Leh_func_end1:

.section    __TEXT,__cstring,cstring_literals
L_.str:
.asciz   "Hello, World!"

.section    __TEXT,__eh_frame,coalesced,no_toc+strip_static_syms+live_support
EH_frame0:
Lsection_eh_frame:
Leh_frame_common:
Lset0 = Leh_frame_common_end-Leh_frame_common_begin
.long   Lset0
Leh_frame_common_begin:
.long   0
.byte   1
.asciz   "zR"
.byte   1
.byte   120
.byte   16
.byte   1
.byte   16
.byte   12
.byte   7
.byte   8
.byte   144
.byte   1
.align  3
Leh_frame_common_end:
.globl  _main.eh
_main.eh:
Lset1 = Leh_frame_end1-Leh_frame_begin1
.long   Lset1
Leh_frame_begin1:
Lset2 = Leh_frame_begin1-Leh_frame_common
.long   Lset2
Ltmp3:
.quad   Leh_func_begin1-Ltmp3
Lset3 = Leh_func_end1-Leh_func_begin1
.quad   Lset3
.byte   0
.byte   4
Lset4 = Ltmp0-Leh_func_begin1
.long   Lset4
.byte   14
.byte   16
.byte   134
.byte   2
.byte   4
Lset5 = Ltmp1-Ltmp0
.long   Lset5
.byte   13
.byte   6
.align  3
Leh_frame_end1:

.subsections_via_symbols 
```

现在......也许事情发生了一些变化，但这并不完全友好，即使对于汇编代码也是如此。我很难解决这个问题......有人可以帮助分解这段代码中发生的事情以及为什么需要它吗？

非常非常感谢提前。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-09T06:09:19.017

由于问题实际上是关于那些奇怪的标签和数据，而不是关于代码本身，所以我只会对它们进行一些说明。

如果程序的一条指令导致执行错误（例如除以 0 或访问不可访问的内存区域或尝试执行特权指令），则会导致异常（不是 C++ 类型的异常，而是中断类型它）并强制 CPU 在 OS 内核中执行适当的异常处理程序。如果我们完全禁止这些异常，那么故事就会很短，操作系统会简单地终止程序。

但是，让程序处理自己的异常是有好处的，因此操作系统处理程序中的主要异常处理程序会将一些异常反映回程序中进行处理。例如，程序可以尝试从异常中恢复，或者可以在终止之前保存有意义的崩溃报告。

在任何一种情况下，了解以下内容都会很有用：

*   发生异常的函数，而不仅仅是其中的违规指令
*   调用那个函数的函数，调用那个函数的函数等等

并且可能（主要用于调试）：

*   生成此指令的源代码文件的行
*   进行这些函数调用的行
*   函数参数

为什么我们需要知道调用树？

好吧，如果程序注册了自己的异常处理程序，它通常会做一些类似 C++`try`和`catch`块的事情：

```
fxn()
{
  try
  {
    // do something potentially harmful
  }
  catch()
  {
    // catch and handle attempts to do something harmful
  }
  catch()
  {
    // catch and handle attempts to do something harmful
  }
} 
```

如果这两个都没有`catches`捕获，则异常传播到 的调用者，`fxn`并可能传播到 的调用者的调用者`fxn`，直到有一个`catch`捕获异常或直到简单地终止程序的默认异常处理程序。

因此，您需要知道每个覆盖的代码区域，并且如果立即/没有捕获异常并且它必须冒泡`try`，您需要知道如何到达下一个最近`try`的区域（例如，在 的调用者中）。`fxn``try``catch`

块的范围`try`和位置`catch`很容易在可执行文件的一个特殊部分中编码，并且它们很容易使用（只需对这些范围中的违规指令地址进行二进制搜索）。但是找出下一个外部`try`块更难，因为您可能需要从函数中找出发生异常的返回地址。

而且您可能并不总是依赖于`rbp+8`指向堆栈上的返回地址，因为编译器可能会以`rbp`不再涉及访问函数参数和局部变量的方式优化代码。您也可以通过它们访问它们`rsp+something`并保存一个寄存器和一些指令，但考虑到不同的函数在堆栈上为本地变量分配不同数量的字节以及传递给其他函数的参数并进行不同的调整，`rsp`因此只有`rsp`'不足以找出返回地址和调用函数。`rsp`可以与返回地址在堆栈上的位置相距任意数量的字节。

对于这种情况，编译器在可执行文件的专用部分中包含有关函数及其堆栈使用的附加信息。异常处理代码检查此信息并在异常必须传播到调用函数及其`try`/`catch`块时正确展开堆栈。

因此，以下数据`_main.eh`包含该附加信息。请注意，它`main()`通过引用`Leh_func_begin1`和显式编码 的开头和大小`Leh_func_end1-Leh_func_begin1`。这条信息允许异常处理代码将`main()'s`指令标识为`main()'s`.

它似乎`main()`也不是很独特，它的一些堆栈/异常信息与其他函数相同，在它们之间共享它是有意义的。所以有一个参考`Leh_frame_common`。

我无法进一步评论`_main.eh`这些常量的结构和确切含义，`144`因为`13`我不知道这些数据的格式。但通常不需要知道这些细节，除非他们是编译器或调试器开发人员。

我希望这能让您了解这些标签和常量的用途。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T12:16:57.073

好的，让我们试一试

// 第一段代码，声明必须在 32 位边界上对齐的主函数。

更新：我对 .align 指令的解释可能是错误的。请参阅下面的气体文档。

```
.section    __TEXT,__text,regular,pure_instructions
.globl  _main
.align  4, 0x90
_main: 
```

存储前一个基指针并为局部变量分配堆栈空间。

```
Leh_func_begin1:
pushq   %rbp
Ltmp0:
movq    %rsp, %rbp
Ltmp1:
subq    $32, %rsp
Ltmp2: 
```

将参数压入堆栈并调用 puts()

```
movl    %edi, %eax
movl    %eax, -4(%rbp)
movq    %rsi, -16(%rbp)
leaq    L_.str(%rip), %rax
movq    %rax, %rdi
callq   _puts 
```

将返回值放入堆栈，释放本地内存，恢复基指针并返回。

```
movl    $0, -24(%rbp)
movl    -24(%rbp), %eax
movl    %eax, -20(%rbp)
movl    -20(%rbp), %eax
addq    $32, %rsp
popq    %rbp
ret
Leh_func_end1: 
```

下一部分，也是代码部分，包含要打印的字符串。

```
.section    __TEXT,__cstring,cstring_literals
L_.str:
.asciz   "Hello, World!" 
```

其余的我不知道，可能是用作 c 启动代码和/或调试信息的数据。

```
.section    __TEXT,__eh_frame,coalesced,no_toc+strip_static_syms+live_support
... 
```

更新：关于 .align 指令的文档来自：http: [//sourceware.org/binutils/docs-2.23.1/as/Align.html#Align](http://sourceware.org/binutils/docs-2.23.1/as/Align.html#Align)

“指定所需对齐的方式因系统而异。对于使用 ELF 的 arc、hppa、i386、i860、iq2000、m68k、or32、s390、sparc、tic4x、tic80 和 xtensa，第一个表达式是对齐请求字节。例如 `.align 8' 使位置计数器前进，直到它是 8 的倍数。如果位置计数器已经是 8 的倍数，则无需更改。对于 tic54x，第一个表达式是对齐请求字.

对于其他系统，包括使用 a.out 格式的 ppc、i386、arm 和 strongarm，它是位置计数器在前进后必须具有的低位零位的数量。例如，`.align 3' 将位置计数器推进到 8 的倍数。如果位置计数器已经是 8 的倍数，则无需更改。

这种不一致是由于 GAS 必须模拟的这些系统的各种本地汇编程序的不同行为。GAS 还提供了 .balign 和 .p2align 指令，稍后描述，它们在所有架构中具有一致的行为（但特定于 GAS）。”

//jk

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T12:12:40.113

您可以在[此处](http://www.cilinder.be/docs/next/NeXTStep/3.3/nd/Assembler/Part1_General/04_Directives.htmld/)和[此处](http://tigcc.ticalc.org/doc/gnuasm.html)找到与指令相关的几乎所有问题的答案。

例如：

```
.section    __TEXT,__text,regular,pure_instructions 
```

声明一个以`__TEXT,__text`默认节类型命名的节，并指定该节将仅包含机器代码（即不包含数据）。

`.globl _main`
使`_main`标签（符号）全局化，以便链接器可以看到它。

`.align 4, 0x90`
将位置计数器与下一个 2^4 (==16) 字节边界对齐。中间的空间将填充值 0x90 (==NOP)。

至于代码本身，它显然做了很多冗余的中间加载和存储。尝试按照评论员的建议启用优化进行编译，您应该会发现生成的代码会更有意义。

# email - 在雅虎邮件中插入边框颜色到图像链接

> ID：15293457
> 
> 赞同：0
> 
> 时间：2013-03-08T11:56:42.953
> 
> 标签：email, border, inline, yahoo, newsletter

我正在创建一个时事通讯，我观察到在雅虎邮件中，一个蓝色边框被添加到链接内的图像中。我已经检查了其他论坛，您可以通过在 CSS 内联中应用这两个选项中的任何一个来解决这个问题：

```
border:none;
border:0; 
```

这确实有效，您不会在 yahoo 邮件上看到蓝色边框。问题是，对于我的设计，我想为图像添加边框颜色作为链接。因此，如果我将此解决方案应用于 Yahoo 邮件，则图像上将没有边框。

有什么办法可以解决这个问题吗？

这里有我的代码：

```
 <tr> 
       <td width="260px"> 
             <a href="#"> 
               <img alt="" src="link-to-image/pic1.jpg" style="width:258px;border: rgba(235, 173, 21, 0.5) 1px solid;display:block;" /> 
             </a> 
        </td>
   </tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T18:10:41.420

试试`border="1" border-color="#005288"`你的图片标签。也始终使用 6 位十六进制代码。

# javascript - Javascript '>' 运算符如何将字符与空格进行比较？

> ID：15293458
> 
> 赞同：8
> 
> 时间：2013-03-08T11:56:44.767
> 
> 标签：javascript

我试图理解这个表达：

```
((ch = stream.getChar()) > ' ') 
```

在这里，`getChar()`得到一个字符。这个大于比较运算符如何检查任何字符是否大于空格？

这可能吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-08T11:59:19.957

空白处有字符代码。尽管看起来不多，但它仍然具有价值。从流中提取的字符也是如此。比较这些值的字符代码是产生输出的原因。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-08T12:16:03.407

让我们看一下[语言规范](http://es5.github.com/#x11.8.2)（算法本身在[此处](http://es5.github.com/#x11.8.5)描述）（请注意它定义了`<`，但`>`运算符只是翻转结果值）。

运算符所做的是尝试将两个操作数转换为原始类型，并优先考虑数字：

```
2\. a. Let py be the result of calling ToPrimitive(y, hint Number).
2\. b. Let px be the result of calling ToPrimitive(x, hint Number). 
```

在我们的例子中，`x === stream.getChar()`和`y === ' '`。由于两个操作数都已经是原始字符串，因此会产生原始值 ( `px = x, py = y`)，然后我们继续：

```
4\. Else, both px and py are Strings 
```

现在它会检查是否有任何操作数是另一个操作数的前缀，例如：

```
'abc' > 'abcd' // false
'foo' > 'foobar' // false 
```

如果结果是空格，则这是相关`getChar()`的，因为空格是其自身的前缀：

```
' ' > ' ' // false 
```

我们继续，寻找字符串中的第一个字符`x`以及`y`谁在字符串中的相同位置，但它们是不同的字符：

> 令 k 为最小的非负整数，使得 px 中位置 k 处的字符与 py 中位置 k 处的字符不同。（必须有这样的 ak，因为两个 String 都不是另一个的前缀。）

（例如，`'efg'`和`'efh'`，我们想要`g`和`h`）

然后将我们找到的字符转换为它们的整数值：

```
Let m be the integer that is the code unit value for the character at position k within px.
Let n be the integer that is the code unit value for the character at position k within py. 
```

最后，进行了比较：

```
If m < n, return true. Otherwise, return false. 
```

这就是它与空间的比较。

* * *

tl;dr 它将两个参数转换为它们的代码单元整数表示，并进行比较。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-08T12:00:10.130

在 Javascript 中，字符串按字母顺序进行比较。这些表达式是正确的：

```
 'abacus' <= 'calculator'
 'abacus' < 'abate' 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-08T12:00:43.873

在大多数（如果不是全部）编程语言中，字符在内部由数字表示。当您进行相等/大于/小于检查时，您实际检查的是基础数字。

因此在 JS 中：

```
alert('c' > 'b'); // alerts true
alert('a' > 'b'); // alerts false 
```

空格字符也有数字表示，因此检查是有效的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-08T11:59:00.207

`[string] > [string]`将通过其代表值比较字符（参见[ASCII 表](http://en.wikipedia.org/wiki/ASCII)）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-08T12:00:02.813

字符作为数字（通常是一个或两个字节）存储在计算机的内存中。

每个字符都有一个唯一的标识号。

通过检查字符是否大于空格，您实际上可以比较它们在表格中的位置。

有关更多信息，请参见[http://en.wikipedia.org/wiki/ASCII](http://en.wikipedia.org/wiki/ASCII)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-08T12:00:25.423

查看此链接，它将解释比较如何在 JS 上进行：http: [//javascript.about.com/od/decisionmaking/a/des02.htm](http://javascript.about.com/od/decisionmaking/a/des02.htm) 基本上，您将每个字符的 ASCII 值与 ASCII 进行比较空格的值，也是一个字符，因此具有相应的 ASCII 值。

# java - Java/Scala 远程 HDFS 使用

> ID：15293460
> 
> 赞同：1
> 
> 时间：2013-03-08T11:56:49.383
> 
> 标签：java, scala, hadoop, hdfs

我正在尝试连接到远程 HDFS 集群。我已经阅读了一些文档并开始使用，但没有找到如何做到这一点的最佳解决方案。情况：我在 xxx-something.com 上有 HDFS。我可以通过 SSH 连接到它，一切正常。

但我正在尝试做的是将文件从它获取到我的本地机器。

我做了什么：

我在我的 conf 文件夹中创建了 core-site.xml（我正在创建 Play！应用程序）。在那里，我将 fs.default.name 配置更改为 hdfs://xxx-something.com:8020 （不确定端口）。然后我尝试启动一个简单的测试：

```
val conf = new Configuration()
conf.addResource(new Path("conf/core-site.xml"))
val fs = FileSystem.get(conf)
val status = fs.listStatus(new Path("/data/")) 
```

我收到错误：

```
 13:56:09.012 [specs2.DefaultExecutionStrategy1] WARN  org.apache.hadoop.conf.Configuration - conf/core-site.xml:a attempt to override final parameter: fs.trash.interval;  Ignoring.
13:56:09.012 [specs2.DefaultExecutionStrategy1] WARN  org.apache.hadoop.conf.Configuration - conf/core-site.xml:a attempt to override final parameter: hadoop.tmp.dir;  Ignoring.
13:56:09.013 [specs2.DefaultExecutionStrategy1] WARN  org.apache.hadoop.conf.Configuration - conf/core-site.xml:a attempt to override final parameter: fs.checkpoint.dir;  Ignoring.
13:56:09.022 [specs2.DefaultExecutionStrategy1] DEBUG org.apache.hadoop.fs.FileSystem - Creating filesystem for hdfs://xxx-something.com:8021
13:56:09.059 [specs2.DefaultExecutionStrategy1] DEBUG org.apache.hadoop.conf.Configuration - java.io.IOException: config()
    at org.apache.hadoop.conf.Configuration.<init>(Configuration.java:226)
    at org.apache.hadoop.conf.Configuration.<init>(Configuration.java:213)
    at org.apache.hadoop.security.SecurityUtil.<clinit>(SecurityUtil.java:53)
    at org.apache.hadoop.net.NetUtils.<clinit>(NetUtils.java:62) 
```

提前致谢！

更新：可能端口是错误的。现在我将它设置为 22，我仍然得到同样的错误，但 3 次后它确实说：

```
14:01:01.877 [specs2.DefaultExecutionStrategy1] DEBUG org.apache.hadoop.ipc.Client - Connecting to xxx-something.com/someIp:22
14:01:02.187 [specs2.DefaultExecutionStrategy1] DEBUG org.apache.hadoop.ipc.Client - IPC Client (47) connection to xxx-something.com/someIp:22 from britva sending #0
14:01:02.188 [IPC Client (47) connection to xxx-something.com/someIp:22 from britva] DEBUG org.apache.hadoop.ipc.Client - IPC Client (47) connection to xxx-something.com/someIp:22 from britva: starting, having connections 1
14:01:02.422 [IPC Client (47) connection to xxx-something.com/someIp:22 from britva] DEBUG org.apache.hadoop.ipc.Client - IPC Client (47) connection to xxx-something.com/someIp:22 from britva got value #1397966893 
```

之后：

```
Call to xxx-something.com/someIp:22 failed on local exception: java.io.EOFException
java.io.IOException: Call to xxx-something.com/someIp:22 failed on local exception: java.io.EOFException
    at org.apache.hadoop.ipc.Client.wrapException(Client.java:1103)
    at org.apache.hadoop.ipc.Client.call(Client.java:1071)
    at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:225)
    at com.sun.proxy.$Proxy1.getProtocolVersion(Unknown Source)
    at org.apache.hadoop.ipc.RPC.getProxy(RPC.java:396)
    at org.apache.hadoop.ipc.RPC.getProxy(RPC.java:379)
    at org.apache.hadoop.hdfs.DFSClient.createRPCNamenode(DFSClient.java:118)
    at org.apache.hadoop.hdfs.DFSClient.<init>(DFSClient.java:222)
    at org.apache.hadoop.hdfs.DFSClient.<init>(DFSClient.java:187)
    at org.apache.hadoop.hdfs.DistributedFileSystem.initialize(DistributedFileSystem.java:89)
    at org.apache.hadoop.fs.FileSystem.createFileSystem(FileSystem.java:1328)
    at org.apache.hadoop.fs.FileSystem.access$200(FileSystem.java:65)
    at org.apache.hadoop.fs.FileSystem$Cache.get(FileSystem.java:1346)
    at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:244)
    at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:122)
    at HdfsSpec$$anonfun$1$$anonfun$apply$3.apply(HdfsSpec.scala:33)
    at HdfsSpec$$anonfun$1$$anonfun$apply$3.apply(HdfsSpec.scala:17)
    at testingSupport.specs2.MyNotifierRunner$$anon$2$$anon$1.executeBody(MyNotifierRunner.scala:16)
    at testingSupport.specs2.MyNotifierRunner$$anon$2$$anon$1.execute(MyNotifierRunner.scala:16)
Caused by: java.io.EOFException
    at org.apache.hadoop.ipc.Client$Connection.receiveResponse(Client.java:807)
    at org.apache.hadoop.ipc.Client$Connection.run(Client.java:745) 
```

这是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T14:47:55.483

您需要在运行名称节点（HDFS 主节点）的服务器上的 $HADOOP_HOME/conf/core-site.xml 中找到 fs.default.name 属性以获取正确的端口。它可能是 8020，也可能是其他东西。这就是你应该使用的。确保您和不允许端口连接的服务器之间没有防火墙。

# java - 调用 web 服务后的 XMLStreamReaderException 响应

> ID：15293461
> 
> 赞同：1
> 
> 时间：2013-03-08T11:56:50.697
> 
> 标签：java, web-services, jax-ws

我创建了 JAX-WS 客户端来调用远程 Web 服务。呼叫是通过 ssl 隧道执行的，并且有一个中间代理。这是方法调用的代码：

```
RemoteWSCredentials cred = new RemoteWSCredentials();
cred.setUserid("username");
cred.setPassword("password");
URL url = new URL("https://hostname/webservicelocation"); //the exposed url
System.setProperty("https.proxyHost", "ipHostnameProxy"); //set proxy properties
System.setProperty("https.proxyPort", "portProxy");
    try {
        SSLContext sslContext = SSLContext.getInstance("SSL"); //instance SSLContext

        // set up a TrustManager that trusts everything
        sslContext.init(null, new TrustManager[]{new X509TrustManager() {
                public X509Certificate[] getAcceptedIssuers() {

                    return null;
                }

                public void checkClientTrusted(X509Certificate[] certs,
                        String authType) {

                }

                public void checkServerTrusted(X509Certificate[] certs,
                        String authType) {                        

                }
            }}, new SecureRandom());

        HttpsURLConnection.setDefaultSSLSocketFactory(
                sslContext.getSocketFactory());

        HttpsURLConnection.setDefaultHostnameVerifier(new HostnameVerifier() {
            public boolean verify(String arg0, SSLSession arg1) {

                return true;
            }
        });     
  } catch (KeyManagementException ex) {
         System.err.println("KeyManagementException: " + ex.getMessage());
    } catch (NoSuchAlgorithmException ex) {
         System.err.println("NoSuchAlgorithmException: " + ex.getMessage());
    }

RemoteWSService ws = new RemoteWSService(url);  //instance WS Service 
boolean result =   ws.exposedService(cred); 
```

**代码在 RemoteWSService ws = new RemoteWSService(url); 处失败。报告的异常是：**

> 线程“主”com.sun.xml.internal.ws.streaming.XMLStreamReaderException 中的异常：XML 阅读器错误：javax.xml.stream.XMLStreamException：ParseError at [row,col]:[14,3] 消息：元素类型“meta”必须以匹配的结束标签“”结束。

这是由于：

> javax.xml.stream.XMLStreamException: ParseError at [row,col]:[14,3] 消息：元素类型“meta”必须由匹配的结束标记“”终止。

现在我不知道 Web 服务部署在哪里。当我尝试在本地机器上调用它并调用没有 ssl 隧道和代理的测试 url 时，代码工作正常。

有人能帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-07T12:24:06.007

嗯，我解决了。错误是我调用了一个不完整的 URL，例如：我调用了 'hostname/webservicelocation' ；但完整的网址是“主机名/webservicelocation/service/RemoteService”；。我不明白为什么会被 com.sun.xml.internal.ws.streaming.XMLStreamReaderException 抓到！！！无论如何感谢大家！！！！再见

# c++ - DTOR 中抛出的异常

> ID：15293476
> 
> 赞同：-1
> 
> 时间：2013-03-08T11:57:26.200
> 
> 标签：c++, g++

我是 C++ 新手，对以下问题有些困惑：

当 DTOR 抛出异常时会发生什么？对象还在被破坏吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T12:03:36.137

> 一般来说：这是一个坏主意吗？

**是**的，一个非常糟糕的。

不要从析构函数中抛出异常。如果在引发另一个异常之后又引发了一个异常，但在该异常被`catch`处理程序捕获之前，您的程序将被迫突然终止。

由于在抛出异常时在堆栈展开期间调用析构函数，如果其中一个抛出另一个异常，那将立即终止您的程序。不太好。

避免从析构函数中抛出异常（或将它们包装到`try`/`catch`块中，以免将它们*传播*到析构函数之外）。这样做是一种*糟糕*的编程习惯。

来自 C++11 标准的第 15.2/3 段：

> 为在从 try 块到引发异常的点的路径上构造的自动对象调用析构函数的过程称为“堆栈展开”。如果在堆栈展开期间调用的析构函数以异常退出，则调用 std::terminate (15.5.1)。[注意：**所以析构函数通常应该捕获异常，而不是让它们传播到析构函数之外。**——尾注]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T12:03:21.683

是的，这是个[坏主意](http://www.gotw.ca/gotw/047.htm)。没有合理的方法来确定您是否可以安全地投掷。

# javascript - XML 作为字符串而不是对象返回

> ID：15293478
> 
> 赞同：4
> 
> 时间：2013-03-08T11:57:27.853
> 
> 标签：javascript, jquery, xml, xml-parsing

我不完全明白为什么这不起作用。我认为 XML 易于交互，但我不禁觉得 XML 的标记导致了问题。我知道它的验证 XML，但仍然：

**XML 79.xml**

```
<TREE xmlns:autn="http://schemas.autonomy.com/aci/">
      <ITEM id="753" name="Report an IT Issue for a Corporate Finance Application." link="http://ithelp-remedy.gsk.com/ars/ITHelpHDsubmit_Application/SubmitProblemTicket.asp?qSummary=CORPFINANCEIT">
                 <HELPLINKS/>
      </ITEM>
</TREE> 
```

另外值得注意的是，这是我返回的整个 XML，我不应该在 xml 标头中有更多详细信息吗？

**jQuery**

```
 $.ajax({
     url:'xml/79.xml',
     dataType : 'xml',
     success: function(data){
         console.info(data);
     }
}); 
```

这不会返回一个对象让我玩:(我怎样才能得到它以便我可以轻松玩`data`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T12:30:16.507

根据 jQuery 文档

> 如果您希望将文本响应视为 XML，请对 dataType 使用“text xml”

所以尝试这样做：

```
$.ajax({
     url:'xml/79.xml',
     dataType : 'text xml',
     success: function(data){
         console.info(data);
     }
}); 
```

从源代码（_ajaxConvert 函数）来看，如果只指定一种数据类型，似乎根本没有转换，虽然我可能是错的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T12:32:00.017

试试这个：

```
$.ajax({
     url:'xml/79.xml',
     dataType : 'text',
     success: function(data){
        //I'm adding the xml tags alright, but I don't think you
        //really need to, or you could just put a check.
        var omgXmlObj = $($.parseXML('<xml>' + data + '</xml>'));
        console.log(omgXmlObj.find('TREE'));
        console.log(omgXmlObj.find('TREE').attr('xmlns:autn'));
     }
}); 
```

# dart - 如何在 Fedora 18 x86_64 的 eclipse 和 Dartium 中配置 Dart 插件

> ID：15293480
> 
> 赞同：1
> 
> 时间：2013-03-08T11:57:33.907
> 
> 标签：dart

在 eclipse 4.2 中安装 dart 插件时出现错误，错误是发生在我身上的错误将出现 => /usr/lib64/eclipse/dart-sdk.zip (Permission denied)

和 dartium for linux 给了我一个错误

./chrome：加载共享库时出错：libbz2.so.1.0：无法打开共享对象文件：没有这样的文件或目录

和另一个错误

./chrome：加载共享库时出错：libudev.so.0：无法打开共享对象文件：没有这样的文件或目录

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T08:38:08.097

这是为了帮助在使用 Fedora 18 操作系统时配置 Dart 和 Dartium 时遇到这些错误的任何人

*   在 Eclipse 中安装 dart 插件时{我正在使用来自 fedora 官方存储库的 Eclipse，即 Juno 4.2.1 && 任何 4.2 及更高版本都可以使用此过程}

    *   将以下 URL [ [http://www.dartlang.org/eclipse/update](http://www.dartlang.org/eclipse/update) ] 添加到 Eclipse 安装中的可用软件站点列表（窗口 > 首选项 > 安装/更新 > 可用软件站点）：
    *   下载和安装过程完成后，您将被要求重新启动 eclipse 。
    *   当它发生在我身上时会出现一个错误=> /usr/lib64/eclipse/dart-sdk.zip（权限被拒绝） - 不是恐慌，但如果您尝试更改 /usr/lib64/eclipse/ 上的权限可能是chmod -R 777 eclipse 将无法启动，如果您这样做更改回 chmod -R 755 。它将正常启动。- 我使用的解决方案是在 eclipse.ini 之上注释这一行 -preventMasterEclipseLaunch。- 安装 dart 插件，您就可以创建 dart 网络应用程序了。- 如果您还需要以下 dartium 工作错误：
        1.  ./chrome：加载共享库时出错：libbz2.so.1.0：无法打开共享对象文件：没有这样的文件或目录它可能会抱怨 ./chrome：加载共享库时出错：libudev.so.0：无法打开共享目标文件：没有这样的文件或目录

    2 ./chrome：加载共享库时出错：libudev.so.0：无法打开共享对象文件：没有这样的文件或目录它可能会抱怨./chrome：加载共享库时出错：libudev.so.0：无法打开共享对象文件：没有这样的文件或目录。

我对此有两个解决方案： 1.在您的系统中找到两个库的位置，然后对 /usr/lib/ 或 usr/lib64 进行符号链接，如下所示：您可以使用 locate 命令或 find 命令 locate libbz2。 so.1.0 if found do ln -s {/path/to/libbz2.so.1.0} {/path/to/dartium/libbz2.so.1.0} 稍后定位 libudev.so.0 if found do ln -s { /path/to/libudev.so.0} {/path/to/dartium/libudev.so.0}

1.  如果您的系统中已经有 google chrome，您可以从 chrome 的安装目录中复制这两个库，我所做的是 cp -rfv /opt/google/chrome/libbz2.so.1.0 /usr/lib64/ cp -rfv / opt/google/chrome/libudev.so.0 /usr/lib64/ 3.Start chromium 用 cd {/path/to/dartium/} 他们做 chmod +x chrome 在你的终端或 konsole 类型启动它 ./chrome

# c# - 我可以使用 Guid 的前 16 个字符或后 16 个字符并且它仍然是唯一的吗？

> ID：15293487
> 
> 赞同：2
> 
> 时间：2013-03-08T11:57:53.373
> 
> 标签：c#, .net, windows-services

## 客观的

生成一个唯一的 16 字符密钥，用作批次名称，不需要任何类型的存储（**例如**唯一计数器）。

## 背景

**我有一个每 30 秒**运行一次的 Windows 服务。我从 MQ 中提取消息并批量处理它们。我正在进行的服务调用之一是现在需要一个 16 个字符的批次名称。**他们不在乎批次名称是什么**，它只需要在所有批次中都是唯一的。

## 问题

如果我生成一个[`Guid`](http://msdn.microsoft.com/en-us/library/system.guid.aspx)，我可以使用该字符串的前 16 个字符还是后 16 个字符，并且它仍然是唯一满足我的需要的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T11:59:49.753

不。

Raymond Chen 详细解释了为什么[GUID 是全局唯一的，但 GUID 的子字符串不是](http://blogs.msdn.com/b/oldnewthing/archive/2008/06/27/8659071.aspx)。

但是，如果您在一台机器上运行它，那么您不需要您的 ID 是*全局*唯一的 - 只需在本地唯一。因此，您可以从他描述的 GUID 算法中删除 MAC 地址要求。另外，如果你知道每 30 秒只会生成一个，你可以放弃算法的碰撞部分。这几乎让您使用 qujck 建议的日期时间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T11:59:29.800

不，是简单的答案。为什么不使用日期/时间？

例如，这里有一些 Oracle 生成的 GUID

```
D71CDF38BB3B6026E0430A9A9A286026
D71CDF38BB3C6026E0430A9A9A286026
D71CDF38BB3D6026E0430A9A9A286026
D71CDF38BB3E6026E0430A9A9A286026
D71CDF38BB3F6026E0430A9A9A286026
D71CDF38BB406026E0430A9A9A286026 
```

# android - ScrollView 不适用于相对布局

> ID：15293488
> 
> 赞同：1
> 
> 时间：2013-03-08T11:57:56.247
> 
> 标签：android

我正在尝试通过将 ScrollView 添加为我的相对布局的父级来使我的布局可滚动。但我的布局没有滚动。我已将 fillport 属性添加为 true。

这是我的xml文件：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/scrollView2"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:fillViewport="true"

            >

    <RelativeLayout 

        android:layout_width="match_parent"
        android:layout_height="wrap_content"

        >

        <TextView
            android:id="@+id/repActivityTitle"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:ellipsize="middle"
            android:textSize="18sp"
            android:background="@android:color/darker_gray"
            android:text="@string/representativeTitle" />

        <TextView
            android:id="@+id/repStreet"
            android:layout_width="100dip"
            android:layout_height="wrap_content"
            android:layout_alignTop="@+id/repImage"
            android:layout_marginTop="14sp"
            android:layout_toRightOf="@+id/repImage"
            android:layout_margin="3sp"
            android:text="@string/repStreet" />

        <TextView
            android:id="@+id/repState"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/repStreet"
            android:layout_toRightOf="@+id/repImage"
            android:text="@string/repState" />

        <TextView
            android:id="@+id/repCountry"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/repState"
            android:layout_below="@+id/repState"
            android:text="@string/repCountry" />

        <com.google.android.maps.MapView
            android:id="@+id/repMap"
            android:layout_width="100dip"
            android:layout_height="100dip"
            android:paddingTop="2dp"
             android:layout_marginTop="2dp"
            android:layout_alignParentRight="true"
            android:layout_alignTop="@+id/repImage"
            android:apiKey="0lsQmtr2D241pSL53j0vQ2lYUs4_ZIWkIHyHAKw" >
        </com.google.android.maps.MapView>

        <View
            android:id="@+id/firstHorizontalLine"
            android:layout_width="match_parent"
            android:layout_height="1dp"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/repMap"
            android:layout_marginTop="54dp"
            android:background="@android:color/black" />

        <TextView
            android:id="@+id/issues2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/issues1"
            android:layout_centerVertical="true"
            android:text="@string/issues2" />

        <View
            android:id="@+id/secondHorizontalLine"
            android:layout_width="match_parent"
            android:layout_height="1dp"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/accomplishments"
            android:background="@android:color/black" />

        <TextView
            android:id="@+id/issues"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:layout_alignBottom="@+id/firstHorizontalLine"
            android:layout_alignRight="@+id/repStreet"
            android:text="@string/issues" />

        <TextView
            android:id="@+id/accomplish2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/accomplish1"
            android:layout_below="@+id/accomplish1"
            android:layout_marginTop="18dp"
            android:text="@string/accomplishments2" />

        <TextView
            android:id="@+id/promises"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/issues"
            android:gravity="center"
            android:layout_below="@+id/accomplish2"
            android:text="@string/promises" />

        <View
            android:id="@+id/thirdHorizontalLine"
            android:layout_width="match_parent"
            android:layout_height="1dp"
            android:background="@android:color/black"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/promises" />

        <TextView
            android:id="@+id/accomplishments"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/issues2"
            android:gravity="center"
            android:layout_toLeftOf="@+id/repMap"
            android:text="@string/accomplishments" />

        <TextView
            android:id="@+id/accomplish1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/secondHorizontalLine"
            android:layout_marginTop="21dp"
            android:text="@string/accomplishments1" />

        <TextView
            android:id="@+id/issues1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_above="@+id/issues2"
            android:layout_alignParentLeft="true"
            android:layout_marginBottom="14dp"
            android:text="@string/issues1" />

        <ImageView
            android:id="@+id/repImage"
            android:layout_width="100dip"
            android:layout_height="100dip"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/repActivityTitle"
            android:contentDescription="@string/representativeImage"
            android:paddingTop="2dp"
            android:layout_marginTop="2dp"
            android:scaleType="centerCrop"
            android:src="@drawable/icon" />

        <TextView
            android:id="@+id/promise1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/thirdHorizontalLine"
            android:layout_marginTop="19dp"
            android:text="@string/promises1" />

        <TextView
            android:id="@+id/promise2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/promise1"
            android:text="@string/promises2" />

    </RelativeLayout>

    </ScrollView> 
```

在这里，我使用了 ScrollView，但布局的全部内容没有显示出来。因为滚动在这里不起作用。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-08T12:40:04.727

尝试删除此行并检查

```
android:fillViewport="true" 
```

你也可以尝试将 relativelayout 的高度改为 match_parent 而不是 wrap_content

```
 <RelativeLayout 

    android:layout_width="match_parent"
    android:layout_height="match_parent"

    > 
```

# wpf - 适用于 Windows 8 的 WPF 触控键盘

> ID：15293489
> 
> 赞同：1
> 
> 时间：2013-03-08T11:57:58.703
> 
> 标签：wpf, windows-8, tablet, uikeyboard

目前我正在为 Windows 8 平板电脑开发 WPF 项目。当用户将焦点放在输入字段上时，应该会出现触摸键盘。

```
private void txtVisFamName_GotFocus(object sender, RoutedEventArgs e)
    {
        Process.Start("tabtip.exe");
    } 
```

tabtip 键盘出现了，但我想知道是否可以让它看起来更加自定义。使用不需要某些按钮，如 ALT 或 CTRL。

我已经尝试向文本字段添加输入范围，但它对出现的键盘没有影响。

```
<TextBox Text="{Binding VisitorFirstName}" id.Row="1" Grid.Column="2" TabIndex="1" Style="{StaticResource txtStyle}" Name="txtVisFamName" HorizontalAlignment="Left" Width="500" InputScope="PersonalFullName" GotFocus="txtVisFamName_GotFocus"> 
```

任何有关如何更改键盘外观的建议将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-23T14:32:14.510

据我所知，您可以使用内置键盘进行很少的定制。此自定义是通过您设置的 InputScope 属性完成的。以下是我用来显示不同虚拟键盘配置的不同设置：

*   输入范围="默认"
*   输入范围="网址"
*   InputScope="EmailSmtpAddress"
*   InputScope="数字"

[您可以在http://mheironimus.blogspot.com/2015/05/adding-touch-keyboard-support-to-wpf.html](http://mheironimus.blogspot.com/2015/05/adding-touch-keyboard-support-to-wpf.html)查看这些不同虚拟键盘的示例。

但是，您可以创建自己的虚拟键盘，上面只有您想要的键。互联网上有很多关于如何做到这一点的例子（[http://www.codeproject.com/Articles/32568/A-Touch-Screen-Keyboard-Control-in-WPF，http://jhvirtualkeyboard.codeplex](http://www.codeproject.com/Articles/32568/A-Touch-Screen-Keyboard-Control-in-WPF) [。 com/](http://jhvirtualkeyboard.codeplex.com/)等）。

# gradle - 是否可以自定义 Gradle 许可证插件使用的源集？

> ID：15293490
> 
> 赞同：1
> 
> 时间：2013-03-08T11:57:58.990
> 
> 标签：gradle

```
buildscript {
    repositories {
        mavenCentral()
    }

    dependencies {
        classpath 'nl.javadude.gradle.plugins:license-gradle-plugin:0.6.0'
    }
}

apply plugin: 'license'

license {
sourceSets {
    main {
        java {
            exclude '**'
        }
        test {
            exclude '**'
        }
    }
}
    mapping {
    javascript='JAVADOC_STYLE'
    xml='XML_STYLE'
    xsl='XML_STYLE'
    html='XML_STYLE'
    Rptdesign='XML_STYLE'
  }
} 
```

我已经读过，默认情况下，许可证会添加到 Java Plugin 创建的所有 sourceSets 中。自定义 sourceSets - 当我添加 sourceSets 许可证时不会添加到 .java 文件，当我删除 sourceSets 块许可证时会更新所有 .java、.groovy 文件src/main/ test & java 目录，但我必须为根目录中的 .xml、.xsl 等特定文件和一些以 s*.java 开头的特定 java 文件添加许可证，任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-15T08:05:21.147

我有同样的问题，我在这里找到了解决方案：[https ://github.com/hierynomus/license-gradle-plugin/issues/9](https://github.com/hierynomus/license-gradle-plugin/issues/9)

您可以将以下内容添加到您的 build.gradle 中，然后许可证插件会跳过排除的文件。

```
import nl.javadude.gradle.plugins.license.License
tasks.withType(License).each { licenseTask ->
    licenseTask.exclude '/*.json'
    licenseTask.exclude '/*.properties'
} 
```

（并删除`license { sourceSets { ... } }`）

# c# - 如何使用实现类类型的参数创建抽象方法

> ID：15293501
> 
> 赞同：3
> 
> 时间：2013-03-08T11:58:50.800
> 
> 标签：c#, generics, abstract

我有一个抽象类，其抽象方法采用实现类类型的参数。我可以通过这样的泛型来实现这一点：

```
abstract class Clazz<T>
{
   public abstract void CopyFrom(Clazz<T> source);
}

class MyClass : Clazz<MyClass>
{
  public override void CopyFrom(Clazz<MyClass>)
  {
    // implementation
  }
} 
```

不幸的是，我在其中一个实现类中需要一个`Clazz<T>`元素列表。那么我该如何实现呢？

*   原因`List<Clazz<T>>`不起作用。
*   `List<Clazz<MyClass>>`太严格了。
*   删除泛型和抽象方法确实有效（我当前的解决方案），但这样我可能会忘记`CopyFrom()`在其中一个实现类中实现该方法。

**编辑：这里有一个更详细的例子：** 我有一个抽象类：

```
abstract class Clazz<T>
{
    public abstract void CopyFrom(Clazz<T> source);
    // ...
} 
```

和一个派生类：

```
class MyDerivedClass : Clazz<MyDerivedClass >
{
    public string Text;
    private readonly List<MySubClass> _list = new List<MySubClass>();

    public override void CopyFrom(MyDerivedClass source)
    {
        Text = source.Text;
    }

    private List<Clazz> GetAllItems()
    {
        List<Clazz> list = new List<Clazz>();
        list.Add(this);
        list.AddRange(_list);
    }

    private class MySubClass : Clazz<MySubClass>
    {
        public int Number;

        public override void CopyFrom(MySubClass source)
        {
            Number = source.Number;
        }
    }
} 
```

还有其他几个派生类，`GetAllItems()`仅在`MyDerivedClass`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T12:35:30.607

这足够了吗？没有更多细节很难说。

```
interface ICopyMaker
{
    void CopyFrom(ICopyMaker source);
}

abstract class Clazz<T> : ICopyMaker
{
   public abstract void CopyFrom(Clazz<T> source);

   void ICopyMaker.CopyFrom(ICopyMaker source)
   {
       var src = source as Clazz<T>;
       if (src == null) return; // know how to copy only from the instances of the same type

       CopyFrom(src);
   }
}

class MyClass : Clazz<MyClass>
{
    private List<ICopyMaker> _list = new List<ICopyMaker>();

    public override void CopyFrom(Clazz<MyClass> c)
    {
    //implementation
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T12:09:33.183

您也可以使相应的方法通用，并引入一个考虑在内的约束`T`。如果我很好地理解您想要实现的目标，您可以这样做：

```
abstract class Clazz<T>
{
   public abstract void CopyFrom(Clazz<T> source);

   public abstract void ProcessList<TDescendant>(List<TDescendant> list)
       where TDescendant : Clazz<T>;
}

class MyClass : Clazz<MyClass>
{
    public override void CopyFrom(Clazz<MyClass> source)
    {
        // implementation
    }

    public override void ProcessList<TDescendant>(List<TDescendant> list)
    {
        // implementation
    }
} 
```

您还可以轻松地在后代中包含列表处理，如下所示：

```
class MyOtherClass : Clazz<MyOtherClass>
{
    public override void CopyFrom(Clazz<MyOtherClass> source)
    {
        // implementation
    }

    // this list processing is inherited
    public override void ProcessList<TDescendant>(List<TDescendant> list)
    {
        // implementation
    }

    // this list processing is specific to this descendant only
    public void ProcessMyClassList<TDescendant>(List<TDescendant> list)
        where TDescendant : Clazz<TMyClass>
    {
        // implementation
    }
} 
```

然后 use 可以声明 的后代`MyClass`，而后者又是 a `Clazz<T>`，`T`正在`MyClass`：

```
class MyDescendant : MyClass
{ 
} 
```

以下作品：

```
List<MyDescendant> list = new List<MyDescendant>();
new MyClass().ProcessList(list); 
```

在`MyOtherClass`的情况下，情况略有不同。`ProcessMyClassList`接受列表`Clazz<T>`或其后代；然而，不是那些与`MyOtherClass`good-ol'相关的东西`MyClass`。此代码有效：

```
List<MyDescendant> list = new List<MyDescendant>();
new MyOtherClass().ProcessMyClassList(list); // this works 
```

但以下内容无法编译：

```
List<MyOtherClass> list = new List<MyOtherClass>();
new MyOtherClass().ProcessList(list);        // this works
new MyOtherClass().ProcessMyClassList(list); // this doesn't 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T14:30:44.723

谢谢大家的回答，但我想我已经找到了一个我可以接受的解决方案：我将删除泛型并添加一个类型检查，就像 anikiforov 的解决方案一样：

抽象类：

```
abstract class Clazz
{
   public abstract void CopyFrom(Clazz source);
} 
```

和派生类：

```
class MyDerivedClass : Clazz
{
    public string Text;
    private List<MyNestedClass> _list;

    public override void CopyFrom(Clazz source)
    {
        var src = source as MyDerivedClass;
        if (src == null) return;
        Text = src.Text;
    }

    public List<Clazz> GetAllItems()
    {
        var list = new List<Clazz>();
        list.Add(this);
        list.AddRange(_list);
        return list;
    }

    class MyNestedClass : Clazz
    {
        public int Number;
        public override void CopyFrom(Clazz source)
        {
            var src = source as MyNestedClass;
            if (src == null) return;
            Number = src.Number;
        }
    }
} 
```

# database - Doctrine Query Builder 不适用于 UPDATE 和 INNER JOIN

> ID：15293502
> 
> 赞同：11
> 
> 时间：2013-03-08T11:58:52.687
> 
> 标签：database, symfony, doctrine-orm, dql

在我的存储库中，我有这个查询：

```
$qb = $this->getEntityManager()->createQueryBuilder();
$qb
    ->update('MyBundle:Entity1', 'e1') 
    ->join('e1.Entity2', 'e2')
    ->set('e1.visibile', '1')
    ->andWhere('e2.id = :id')->setParameter("id", 123)
; 
```

抛出这个错误

```
[Semantical Error] line 0, col 66 near 'e2.id = :id': Error: 'e2' is not defined 
```

我检查了关系，它是正确的。在查询更新中使用连接有什么问题吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-10-31T16:16:25.277

您不能在更新和删除查询上使用联接。您必须使用子查询。

> 更新和删除查询不支持连接，因为并非所有 dbms 都支持连接。它不会在 Doctrine 1 或 Doctrine 2 中实现。但是，您可以通过使用子查询获得相同的效果。

[http://www.doctrine-project.org/jira/browse/DC-646](http://www.doctrine-project.org/jira/browse/DC-646)

如果您使用的是 MySQL，则无法使用子查询。然后，您将不得不使用 2 个查询。

> 在 MySQL 中，您不能在子查询中修改表并从同一个表中进行选择

[http://dev.mysql.com/doc/refman/5.0/en/subqueries.html](http://dev.mysql.com/doc/refman/5.0/en/subqueries.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-08T15:53:40.170

Doctrine DQL 不支持加入更新。

尝试执行以下操作：

```
$qb = $this->getEntityManager()->createQueryBuilder();
$qb
    ->update('MyBundle:Entity1', 'e1') 
    ->set('e1.visibile', '1')
    ->where('e1.Entity2 = :id')
    ->setParameter("id", 123)
; 
```

可以直接设置链接实体的id，只要是主键，就和实体一样，Doctrine会映射。

我在我的查询中做同样的事情并且它有效。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-09T03:52:02.193

尝试使用子查询，而不是[在您进行更新时加入在 DQL 中不起作用](https://stackoverflow.com/a/5598894/1427338)：

> LEFT JOIN，或特别是 JOIN 仅在 MySQL 的 UPDATE 语句中受支持。DQL 抽象了普通 ansi sql 的一个子集，所以这是不可能的。尝试使用子选择：

```
$qb = $this->getEntityManager()->createQueryBuilder();
    $qb ->update('MyBundle:Entity1', 'e') 
        ->set('e.visibile', '1')
        ->where('e.id IN (SELECT e1.id FROM Entity1 e1 INNER JOIN e2.Entity2 e2 WHERE e2 = :id')
        ->setParameter("id", 123); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-04-16T06:58:53.033

非常老的问题，但在完整的查询生成器中不包含答案。

所以是的，以下查询无法同步两个表的字段：

```
$this->createQueryBuilder('v')
    ->update()
    ->join(Pegass::class, 'p', Join::WITH, 'v.identifier = p.identifier')
    ->set('v.enabled', 'p.enabled')
    ->where('p.type = :type')
    ->setParameter('type', Pegass::TYPE_VOLUNTEER)
    ->andWhere('v.enabled <> p.enabled'); 
```

如上所述，生成的查询不包含该关系，因为它在所有 dbms 中都缺乏支持。他们还告诉您改用子查询。

所以这就是我做等效的方式（即使使用 2 个查询并且性能较低......）：

```
foreach ([false, true] as $enabled) {
    $qb = $this->createQueryBuilder('v');

    $sub = $this->_em->createQueryBuilder()
        ->select('p.identifier')
        ->from(Pegass::class, 'p')
        ->where('p.type = :type')
        ->andWhere('p.enabled = :enabled');

    $qb
        ->setParameter('type', Pegass::TYPE_VOLUNTEER)
        ->setParameter('enabled', $enabled);

    $qb
        ->update()
        ->set('v.enabled', $enabled)
        ->where($qb->expr()->in('v.identifier', $sub->getDQL()))
        ->getQuery()
        ->execute();
} 
```

# android - 如何设置放大缩小并减小默认缩放大小？

> ID：15293503
> 
> 赞同：1
> 
> 时间：2013-03-08T11:58:53.423
> 
> 标签：android

我按照本教程[http://www.allappsdevelopers.com/TopicDetail.aspx?TopicID=c16ed3b4-b422-43ba-b595-ee8e21dd1854](http://www.allappsdevelopers.com/TopicDetail.aspx?TopicID=c16ed3b4-b422-43ba-b595-ee8e21dd1854)问题是当我捕获图像时默认显示大小如此之大但所有放大缩小如何我将默认大小设置为正常图像大小？

```
public boolean onTouch(View v, MotionEvent event) {

   ImageView view = (ImageView) v;

   view.setScaleType(ImageView.ScaleType.MATRIX);

   float scale;

   // Dump touch event to log

   dumpEvent(event);

   // Handle touch events here...

   switch (event.getAction() & MotionEvent.ACTION_MASK) {

   case MotionEvent.ACTION_DOWN: //first finger down only

      savedMatrix.set(matrix);

      start.set(event.getX(), event.getY());

      Log.d(TAG, "mode=DRAG" );

      mode = DRAG;

      break;

   case MotionEvent.ACTION_UP: //first finger lifted

   case MotionEvent.ACTION_POINTER_UP: //second finger lifted

      mode = NONE;

      Log.d(TAG, "mode=NONE" );

      break;

   case MotionEvent.ACTION_POINTER_DOWN: //second finger down

      oldDist = spacing(event);

      Log.d(TAG, "oldDist=" + oldDist);

      if (oldDist > 5f) {

         savedMatrix.set(matrix);

         midPoint(mid, event);

         mode = ZOOM;

         Log.d(TAG, "mode=ZOOM" );

      }

      break;

   case MotionEvent.ACTION_MOVE:

      if (mode == DRAG) { //movement of first finger

         matrix.set(savedMatrix);

         if (view.getLeft() >= -392){

            matrix.postTranslate(event.getX() - start.x, event.getY() - start.y);

         }
      }

      else if (mode == ZOOM) { //pinch zooming

         float newDist = spacing(event);

         Log.d(TAG, "newDist=" + newDist);

         if (newDist > 5f) {

            matrix.set(savedMatrix);

            scale = newDist / oldDist; /*thinking i need to play around  
with this value to limit it*/

            matrix.postScale(scale, scale, mid.x, mid.y);

         }

      }

      break;

   }

   // Perform the transformation

   view.setImageMatrix(matrix);

   return true; // indicate event was handled

}

private float spacing(MotionEvent event) {

   float x = event.getX(0) - event.getX(1);

   float y = event.getY(0) - event.getY(1);

   return FloatMath.sqrt(x * x + y * y);

}

private void midPoint(PointF point, MotionEvent event) {

   float x = event.getX(0) + event.getX(1);

   float y = event.getY(0) + event.getY(1);

   point.set(x / 2, y / 2);

}

/** Show an event in the LogCat view, for debugging */

private void dumpEvent(MotionEvent event) {

   String names[] = { "DOWN" , "UP" , "MOVE" , "CANCEL" , "OUTSIDE" ,

      "POINTER_DOWN" , "POINTER_UP" , "7?" , "8?" , "9?" };

   StringBuilder sb = new StringBuilder();

   int action = event.getAction();

   int actionCode = action & MotionEvent.ACTION_MASK;

   sb.append("event ACTION_" ).append(names[actionCode]);

   if (actionCode == MotionEvent.ACTION_POINTER_DOWN

         || actionCode == MotionEvent.ACTION_POINTER_UP) {

      sb.append("(pid " ).append(

      action >> MotionEvent.ACTION_POINTER_ID_SHIFT);

      sb.append(")" );

   }

   sb.append("[" );

   for (int i = 0; i < event.getPointerCount(); i++) {

      sb.append("#" ).append(i);

      sb.append("(pid " ).append(event.getPointerId(i));

      sb.append(")=" ).append((int) event.getX(i));

      sb.append("," ).append((int) event.getY(i));

      if (i + 1 < event.getPointerCount())

         sb.append(";" );

   }

   sb.append("]" );

   Log.d(TAG, sb.toString());

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-11T15:51:39.277

```
float initialZoomLevel = 0.5f;
matrix.setScale(initialZoomLevel, initialZoomLevel);
view.setImageMatrix(matrix); 
```

把它放在你的图像视图的构造函数/初始化方法中。这将导致图像立即以 1/2 大小显示。对图像的任何进一步修改都应在同一矩阵上进行

```
public boolean onTouch(View v, MotionEvent event) {
    matrix = view.getImageMatrix()
    //.. now do zooming, etc on this matrix
} 
```

这样，图像的“默认”大小设置为原始大小的一半。希望这可以帮助！

# ios - ios中具有自动滚动功能的无限Textview

> ID：15293504
> 
> 赞同：3
> 
> 时间：2013-03-08T11:58:55.843
> 
> 标签：ios, uiscrollview, uitextview

实现了 textview 中的自动滚动。但我无法实现无限文本视图。我想将相同的文本附加到文本视图并无限滚动.....

无限滚动的代码......

```
-(void)viewWillAppear:(BOOL)animated{
    if (scrollingTimer == nil) {
        scrollingTimer = [NSTimer scheduledTimerWithTimeInterval:(0.06)
                                                          target:self
                                                        selector:@selector(autoscrollTimerFired)
                                                        userInfo:nil
                                                         repeats:YES];
    }
    self.textView.contentOffset=CGPointMake(0, -(self.textView.frame.size.height));
}

- (void) autoscrollTimerFired{
    CGPoint scrollPoint = self.textView.contentOffset;
    scrollPoint = CGPointMake(scrollPoint.x, scrollPoint.y + 1);
    [self.textView setContentOffset:scrollPoint animated:NO];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-29T04:58:07.583

`UITextView`您可以通过在达到初始正文高度后回滚到开头来模拟这一点。

这是一个“无限”滚动随机 Lorem 段落的示例。

它将段落复制三遍，以确保它看起来像是在永远滚动。

```
@implementation ViewController
{
    UITextView *infiniteTextView;
    NSTimer *scrollTimer;

    CGFloat textHeight;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.view.backgroundColor = [UIColor darkGrayColor];

    // Create a text view
    infiniteTextView = [[UITextView alloc] initWithFrame:CGRectInset(self.view.bounds, 0, self.view.bounds.size.height/4)];

    NSString *lorem = @"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.\n\n";

    infiniteTextView.font = [UIFont systemFontOfSize:15];

    CGRect textBounds = [lorem boundingRectWithSize:CGSizeMake(infiniteTextView.bounds.size.width - 16.0f, CGFLOAT_MAX) options:NSStringDrawingUsesLineFragmentOrigin attributes:@{ NSFontAttributeName : infiniteTextView.font } context:nil];

    textHeight = textBounds.size.height;

    //Duplicate the paragraph 3 times
    infiniteTextView.text = [lorem stringByAppendingString:[lorem stringByAppendingString:lorem]];

    [self.view addSubview:infiniteTextView];
}

- (void) viewDidAppear:(BOOL)animated
{
    if (scrollTimer == nil)
    {
        scrollTimer = [NSTimer scheduledTimerWithTimeInterval:(0.06)
                                                          target:self
                                                        selector:@selector(autoscrollTimerFired:)
                                                        userInfo:nil
                                                         repeats:YES];
    }
}

- (void) autoscrollTimerFired:(id)sender
{
    CGPoint scrollPoint = infiniteTextView.contentOffset;

    //Reset the scroll position if we exceed
    // the body paragraph height
    if( scrollPoint.y > textHeight )
    {
        scrollPoint.y = 0;
    }

    scrollPoint = CGPointMake(scrollPoint.x, scrollPoint.y + 1);
    [infiniteTextView setContentOffset:scrollPoint animated:NO];
}

@end 
```

（在 iPhone Retina 4 英寸目标上试试这个，它可能需要针对 iPad 进行一些调整。）

# android - Android Sherlock Fragment webview 问题

> ID：15293512
> 
> 赞同：1
> 
> 时间：2013-03-08T11:59:14.450
> 
> 标签：android, android-layout, android-intent, android-webview

基于此参考[http://wptrafficanalyzer.in/blog/implement-swiping-between-tabs-with-viewpager-in-action-bar-using-sherlock-library/](http://wptrafficanalyzer.in/blog/implement-swiping-between-tabs-with-viewpager-in-action-bar-using-sherlock-library/)

我正在使用带有夏洛克片段的选项卡，即在一个选项卡中，当我尝试使用 webview 时，链接没有显示。它一直滚动而不显示内容。

公共类 AppleFragment 扩展 SherlockFragment{
WebView w;

```
@SuppressLint("SetJavaScriptEnabled")
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){

View v = inflater.inflate(R.layout.web, container, false);
     w=(WebView)v.findViewById(R.id.webView1);
     w.loadUrl("http://www.google.com");
     w.getSettings().setAppCacheMaxSize(1024*1024*8);
      w.getSettings().setAllowFileAccess(true);
      w.getSettings().setAppCacheEnabled(true);
      w.getSettings().setJavaScriptEnabled(true);
          return super.onCreateView(inflater, container, savedInstanceState);

}       
@Override
public void onStart() {     
    super.onStart();
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T12:16:59.740

添加此代码并获取结果

```
w.setWebViewClient(new HelloWebViewClient());

public class HelloWebViewClient extends WebViewClient {

    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        view.loadUrl(url);
        return true;
    }

} 
```

# winforms - C#：包含 OpenFileDialog 的表单。两者都调用 ShowDialog()。内存泄漏？

> ID：15293515
> 
> 赞同：1
> 
> 时间：2013-03-08T11:59:21.113
> 
> 标签：winforms, memory-leaks

我有一个包含通过 Visual Studio 设计器添加的 OpenFileDialog 的表单。我使用以下模式显示表单：

```
using (var form = MyForm()) {
    form.ShowDialog();
} 
```

然后以我打电话的形式

```
myOpenFileDialog.ShowModal(); 
```

因为 OpenFileDialog 是通过设计器添加的，所以我不能使用上面的 using 模式。此外，在 Designer.cs 文件中似乎没有

```
myOpenFileDialog.Dispose(); 
```

叫做。我这里有内存泄漏吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-27T00:27:31.133

没有泄漏，但`OpenFileDialog`会在 GC 运行或应用程序关闭时被释放。您可以通过在 Visual Studio 中添加一个函数断点来验证这一点，`System.ComponentModel.Component.Dispose`因为.`OpenFileDialog``Component`

所以我认为当你不再需要它时，最好自己处理它。

# unix - 通过 Cygwin/UNIX 将文件移动到其他驱动器 ($ cp -R ..)

> ID：15293521
> 
> 赞同：0
> 
> 时间：2013-03-08T11:59:29.993
> 
> 标签：unix, cygwin, processing, cp, leap-motion

这是我第一次与 cygwin 合作，所以请多多包涵。

我需要通过 cygwin 安装一个处理库才能使其工作。我遵循了本[教程](http://www.youtube.com/watch?v=pZlj0ZZe8Fw)中的所有步骤，在最后一步（00:22 秒标记）中，我需要将 LeapMotion “cp”到 Processing 存储它的库的目录。

我将我的存储在“D:\Processing Sketches\libraries”中，但我不知道如何将其复制到那里。我对 ~/home/ 部分感到困惑。我尝试了“$ cp -R LeapMotion /D:/Processing\ Sketches/libraries/”，但这不起作用：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T12:02:25.723

在 cygwin DOS 驱动器号映射到`/cygdrive/<drive>`，所以你会这样做：

```
$ cp -R LeapMotion /cygdrive/d/Processing\ Sketches/libraries/ 
```

# python - 如何从 Python 请求“响应”对象中获取 HTTP VERB？

> ID：15293522
> 
> 赞同：1
> 
> 时间：2013-03-08T11:59:32.403
> 
> 标签：python, wrapper, python-requests, urllib3

从他们的来源来看，`method`成员属性似乎是我想要的。

[https://github.com/kennethreitz/requests/blob/master/requests/models.py](https://github.com/kennethreitz/requests/blob/master/requests/models.py)

举例来说，这就是我想要的：

```
>>> r = requests.get("http://httpbin.org/get")
>>> print r.method
'GET' 
```

但是我不知道是否有办法获得它（无需编写我自己的 hacky 包装器）......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T12:06:30.207

它存储在`request`响应的属性中：

```
>>> r = requests.head('http://www.example.com')
>>> r.request.method
'HEAD'

>>> r = requests.get('http://www.example.com')
>>> r.request.method
'GET' 
```

# magento-1.7 - 禁用产品 Magento 1.7 CE 的 Cron 作业

> ID：15293528
> 
> 赞同：-1
> 
> 时间：2013-03-08T11:59:43.827
> 
> 标签：magento-1.7

如何逐步在 magento 中设置 cron 作业。如果我有一个具有设定日期的属性，我希望 cron 作业在这一天过去后禁用产品......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T14:01:09.073

1）创建一个自定义模块，那里有很多指南 - 或使用模块创建器开始。

2) 将 Cron 作业设置添加到您的模块配置中

**配置文件**

```
...
    <crontab>
        <jobs>
            <mymodule_disable>
                <schedule>
                    <!-- every 10 min -->
                    <cron_expr>*/10 * * * *</cron_expr>
                </schedule>
                <run>
                    <model>mymodule/Scheduler::disable</model>
                </run>
            </mymodule_disable>
        </jobs>
    </crontab>

</config> 
```

现在创建一个类来为你处理任务（modulename/Model/Scheduler.php）

**调度程序.php**

```
<?php
class Mymodule_Model_Scheduler
{
    /**
     * Disable prodcuts for us
     */
    public static function disable()
    {
         // This will be run every 10 minutes, we want to get applicable products
         // you will need to customize the filter for what you need, subtracting
         // or adding date values etc.. you get the idea :)
         $date = Mage::getModel('core/date')->gmtDate(); // add/subtract etc
         $collection = Mage::getModel('catalog/product')->getCollection();
         $collection->addfieldtofilter('custom_date_attr', array(
             array('to' => $date),
             //array('gteq' => $date)
         ));
         foreach($collection as $product) {
             $product->setStatus(Mage_Catalog_Model_Product_Status::STATUS_DISABLED);
             $product->save();
         }
    }
} 
```

现在您需要设置一个 cron 作业来运行 Magentos 调度程序，例如：

```
*/10 * * * *  php -f /path/to/magento/cron.php 
```

# c# - c#中的函数调用

> ID：15293529
> 
> 赞同：-3
> 
> 时间：2013-03-08T11:59:45.400
> 
> 标签：c#

在 c# 控制台应用程序中连续调用函数。不使用无限循环和递归，因为如果使用它们，那么 cpu 使用率会更多。请任何人都可以帮助我解决这个问题。有人建议我使用后台线程，但它不会连续调用该函数。

```
Thread th = new Thread(//fun);
th.IsBackground = true;
th.start(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T12:03:34.653

如果你想连续调用它，那么高 CPU 使用率是必要的：因为 CPU 总是忙于做你想做的事。

如果您想降低 cpu 使用率，那么您**不能**连续运行您的函数，而只能以（可能非常小的）间隔运行。

你必须做出决定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T12:05:38.197

您可以使用线程代码，但线程只是有效地调用函数，这意味着您的函数需要递归或它需要有一个无限循环。

```
public void StartThread()
{
   Thread th = new Thread(function);
   th.IsBackground = true;
   th.start();
}

public void function()
{    
   //preferably have some way of killing this if needs be so don't necessarily use 'true'
   while(true)
   {
      //do stuff

      //sleep an appropriate amount of time to not overload the cpu
      //This sleeps (basically pauses thread) for 10 milliseconds
      Thread.Sleep(10);
   }
} 
```

添加 Thread.Sleep 将停止您所指的 CPU 的过载。只需运行 sleep 一段时间，这对于您的应用程序来说是可以接受的。如果它在 GUI 上更新一个值，那么用户不会真正注意到该值是每半秒更新一次 (Thread.Sleep(500)) 还是每毫秒更新一次 (Thread.Sleep(1))

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T12:06:39.553

我不确定我得到你的答案，但让我解释一下线程是如何工作的。

* * *

**线程**

在大多数编程语言中，线程是一种有效地将执行拆分为同步执行的做法。这意味着，两种方法可以同时运行。

**线程的常见用途**

使用线程的一个示例是侦听服务器上的传入连接。所以你会有一个线程，比如：

```
while(true)
{
    // Listen to incoming messages.
} 
```

无限循环是因为，在任何时候，您都不想停止侦听传入的消息。那就是服务器的作用；管理连接。但是，当程序执行完成时，线程会被杀死。这被认为是常见做法的原因是，因为它在单独的线程上运行，它不会像您想象的那样影响性能。C#非常擅长处理多线程；和大多数语言一样。

**备择方案**

好吧，这样看。如果您想听 1000 个周期，那么您将执行以下操作：

```
while(count < 1000)
{
     count++;
     // Do some thread code.
} 
```

这实际上取决于您想要线程做什么，它定义了进入线程的代码，以及它将运行多长时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T12:06:56.450

使用间隔较短的系统计时器。

在计时器的“滴答”事件中：

*   停止计时器
*   调用函数
*   重新启动计时器

系统计时器的事件在线程池线程上运行，因此您的控制台应用程序线程正常继续。在应用程序的持续时间内，该函数在间隔允许的范围内尽可能频繁地运行。没有递归。没有无限循环。

# mysql - mysql GROUP BY 子句验证

> ID：15293534
> 
> 赞同：4
> 
> 时间：2013-03-08T11:59:51.023
> 
> 标签：mysql, sql, validation, error-handling, warnings

假设我有一个包含以下内容的表格：

```
mysql> select * from test;
+----+------+
| id | val  |
+----+------+
|  1 |    1 |
|  2 |    1 |
|  3 |    1 |
|  4 |    1 |
|  5 |    2 |
|  6 |    2 |
|  7 |    2 |
|  8 |    2 |
+----+------+
8 rows in set (0.00 sec)

mysql> 
```

现在我使用`group by`子句运行错误的 SQL 查询，并且在列上没有任何聚合`id`并得到错误的结果：

```
mysql> select id, val from test group by val;
+----+------+
| id | val  |
+----+------+
|  1 |    1 |
|  5 |    2 |
+----+------+
2 rows in set (0.00 sec)

mysql> 
```

mysql 客户端或其他工具能否验证此查询并在`group by`不聚合的情况下使用时发出错误或警告？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T12:02:36.000

是的，你可以这样做：

> 要禁用 MySQL GROUP BY 扩展，请启用`ONLY_FULL_GROUP_BY` SQL 模式。

```
mysql> SET sql_mode = 'ONLY_FULL_GROUP_BY'; 
```

请参阅[此处的文档](http://dev.mysql.com/doc/refman/5.0/en/group-by-extensions.html)。此外，[关于服务器模块的这一部分](http://dev.mysql.com/doc/refman/5.0/en/server-sql-mode.html#sqlmode_only_full_group_by)可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T12:03:07.013

默认情况下，SQL 模式`ONLY_FULL_GROUP_BY`设置为*禁用*。这就是为什么您的查询运行时没有抛出任何异常的原因。如果您不希望该行为启用该`ONLY_FULL_GROUP_BY`模式，

*   [ONLY_FULL_GROUP_BY](http://dev.mysql.com/doc/refman/5.0/en/server-sql-mode.html#sqlmode_only_full_group_by)

**设置 SQL 模式**

*   您可以从 --sql-mode="modes" 选项开始设置默认 SQL 模式`mysqld`，*或者*在（Unix 操作系统）或（Windows）中使用*sql-mode="modes" 。*模式是由逗号（“，”）字符分隔的不同模式的列表。`my.cnf``my.ini`
*   *您可以在运行时*通过使用`SET [GLOBAL|SESSION] sql_mode='modes'`语句设置 sql_mode 系统值来更改 SQL 模式。前任：
    `SET sql_mode = 'ONLY_FULL_GROUP_BY'`

# asp.net - 使用 ASPX 生成动态 JSON

> ID：15293535
> 
> 赞同：1
> 
> 时间：2013-03-08T11:59:55.400
> 
> 标签：asp.net, json

我想创建一个网页，显示封装在 JSON 中的消息列表（使用 JavaScript）。但是，这个列表开头的一句话“你好！你是第-个访客”是动态的。我怎样才能做到这一点？我在 ASP .NET 中编程。C# 可以评估 JSON 文件中的值吗？我是否必须要求 ASP .NET 读取一个完整的 JSON 文件并为此目的生成一个新的 JSON 文件？

# javascript - 如何在点击事件中在 js 中添加 id

> ID：15293537
> 
> 赞同：0
> 
> 时间：2013-03-08T12:00:01.017
> 
> 标签：javascript, css

嘿，我是java脚本的新手，所以请帮帮我

我有一个`input`标签，所以我想要的是当一些身体点击`input`标签时，它将由**js**`#helptext`自动调用。

 **我如何在演示代码和所需的结果图像下面实现这一点......

[**演示**](http://jsfiddle.net/tn98m/7/)

我想要这张图片：-![在此处输入图像描述](../Images/07382347d71d339498c1a06c6571795d.png)

**请检查我更新的 DEMO 标记中的一些更改，我需要像我当前的演示一样**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T12:05:56.157

尝试这个 ：

```
$(document).ready(function() {
    $("a").click(function(event) {
        $(this).append(event.target.id);
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T12:11:53.857

这是工作的 JSFiddle

[http://jsfiddle.net/tn98m/9/](http://jsfiddle.net/tn98m/9/)

```
$('#myInput').focus(function() {
  $('#helptext').show();
});

$('#myInput').blur(function() {
  $('#helptext').hide();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T12:07:49.227

```
$('input').focus(function() {
    $('#helptext').show();
}); 
```**

# ruby - Visual Studio 2012 中的 Ruby 语法高亮显示

> ID：15293545
> 
> 赞同：5
> 
> 时间：2013-03-08T12:00:14.450
> 
> 标签：ruby, visual-studio-2012, syntax-highlighting

我使用`rake`脚本来运行构建，并希望能够在 Visual Studio 中突出显示语法。

是否有可能获得 ruby​​ 语法突出显示`Visual Studio 2012`？

我一直在寻找一段时间，但还没有提出解决方案。我只是在寻找免费的解决方案，所以[Ruby In Steel](http://www.sapphiresteel.com/Products/Ruby-In-Steel/article/ruby-in-steel-developer-overview)已经出局了。

* * *

[在这里投票](http://ironruby.codeplex.com/workitem/7345)支持[IronRuby](http://ironruby.codeplex.com/)对 Visual Studio 2012的支持

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T22:22:18.197

不幸的是[，Visual Studio 的 IronRuby 工具](http://ironruby.net/tools/) [还不支持 VS2012](http://ironruby.codeplex.com/workitem/7345)。

不过我可能错了，似乎开发[已经转移到了 Github](https://github.com/IronLanguages/main)。

我首选的外部编辑器是[Sublime Text](http://www.sublimetext.com/)，所以我选择将它用于 Ruby 文件。您只需右键单击您的 rakefile.rb 是 VS 解决方案资源管理器并选择“打开方式”。在对话框中，您可以添加您选择的编辑器并将其设置为默认值。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-11T21:47:26.143

无论如何，在 2008 年的某个时候，有一个免费版的[Ruby in Steel](http://www.sapphiresteel.com/Ruby-In-Steel-New-Free-Edition)，看起来那个页面上的下载链接仍然有效。与软件的付费版本相比，它的功能集略有限制，但确实包括语法突出显示。因此，请尝试一下，看看这是否可以免费满足您的需求。

对于你们其他人，Neil 专门要求 VS 内部语法高亮，而不是让你们插入自己喜欢的文本编辑器。

# python - 使用 SQLAlchemy 在数据库函数中命名参数

> ID：15293547
> 
> 赞同：1
> 
> 时间：2013-03-08T12:00:20.673
> 
> 标签：python, function, postgresql, sqlalchemy, named-parameters

我的数据库（Postgres）中有一个函数，如下所示：

```
create function test_f(a text default '*', b text default '+') returns text as $$
    select a || ' ' || b;
$$ language sql; 
```

Postgres 允许使用命名参数调用它：

```
mytest=> select test_f('a', 'b');                                           
test_f                                                                      
--------                                                                    
a b                                                                         
(1 row)                                                                     

mytest=> select test_f('a');                                                
test_f                                                                      
--------                                                                    
a +                                                                         
(1 row)                                                                     

mytest=> select test_f(b:='a');                                             
test_f                                                                      
--------                                                                    
* a                                                                         
(1 row) 
```

我想从 Python 做同样的事情，使用[SQLAlchemy 的`func`构造](http://docs.sqlalchemy.org/en/rel_0_7/core/tutorial.html#functions)，但似乎`func`不尊重命名参数：

```
In [85]: print(sqlalchemy.func.test_f('a', 'b'))                            
test_f(:test_f_1, :test_f_2)                                                

In [86]: print(sqlalchemy.func.test_f('a'))                                 
test_f(:test_f_1)                                                           

In [87]: print(sqlalchemy.func.test_f(a='a'))                               
test_f() 
```

我错过了什么，还是`func`不支持命名参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T11:15:07.910

感谢[Michael Bayer 的建议](https://groups.google.com/d/msg/sqlalchemy/3bPqNTaE0qk/QFx_9Yw2A1EJ)，我想出了一个解决我自己问题的方法：诀窍是使用[SQLAlchemy 的 compiler](http://docs.sqlalchemy.org/en/rel_0_8/core/compiler.html)和一些适当的转义：

```
from psycopg2.extensions import adapt as sqlescape                          
import sqlalchemy                                                           
from sqlalchemy import select                                               
from sqlalchemy.ext.compiler import compiles                                
from sqlalchemy.sql.expression import ColumnClause                          

class MyFunc(ColumnClause):                                                 
    def __init__(self, *args, **kwargs):                                    
        self.kwargs = kwargs                                                
        super().__init__(*args)                                             

@compiles(MyFunc)                                                           
def compile_myfunc(element, compiler, **kw):                                
    s = ','.join("%s:=%s" % (k, sqlescape(v)) for k, v in element.kwargs.items())
    return "%s(%s)" % (element.name, s)                                     

def call(engine, func, **kwargs):                                           
    return engine.execute(select([MyFunc(func, **kwargs)]))                 

engine = sqlalchemy.create_engine('postgresql+psycopg2://lbolla@localhost/mytest')
print(call(engine, 'test_f', a='a').scalar())                               
print(call(engine, 'test_f', b='b').scalar()) 
```

# php - OpenSIS 安装错误

> ID：15293548
> 
> 赞同：0
> 
> 时间：2013-03-08T12:00:25.153
> 
> 标签：php

在 OpenSIS 安装的第 2 步中，我遇到了这个错误：

`You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(0) , start_date date, end_date date, published_profiles characte' at line 9`

我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T12:05:30.067

[http://forums.mysql.com/read.php?10,494735,494845#msg-494845](http://forums.mysql.com/read.php?10,494735,494845#msg-494845)

> 从“时间戳（0）”中删除“（0）”解决了这个问题。
> 
> 谢谢你。

寻找：

```
CREATE TABLE PORTAL_NOTES( 

id NUMERIC NOT NULL , 
school_id NUMERIC, 
syear NUMERIC( 4, 0 ) , 
title CHARACTER VARYING( 255 ) , 
content CHARACTER VARYING( 5000 ) , 
sort_order NUMERIC, 
published_user NUMERIC, 
published_dateTIMESTAMP( 0 ) , 
start_date DATE, 
end_date DATE, 
published_profiles CHARACTER VARYING( 255 ) 
); 
```

# wpf - DevExpress WPF 布局控制

> ID：15293551
> 
> 赞同：1
> 
> 时间：2013-03-08T12:00:30.400
> 
> 标签：wpf, devexpress

我想知道是否有一种方法可以将自定义控件添加到 LayoutControl 的“新元素”部分，其方式与将控件添加到 AvailableItems 部分类似。

这是我的 XAML 代码

```
<lc:LayoutControl 
                                x:Name="layoutItems" Orientation="Vertical" Background="Transparent" 
                                IsCustomization="True"
                                AllowItemMovingDuringCustomization="True"
                                AllowAvailableItemsDuringCustomization="True"
                                AllowItemRenamingDuringCustomization="True"
                                AllowItemSizingDuringCustomization="True">
        <lc:LayoutControl.AvailableItems>
            <lc:LayoutItem Label="TextFeld:">
                <dxe:TextEdit />
            </lc:LayoutItem>
            <lc:LayoutItem Label="LayoutItem 19:">
                <dxe:TextEdit />
            </lc:LayoutItem>
            <lc:LayoutItem Label="LayoutItem 20:">
                <dxe:TextEdit />
            </lc:LayoutItem>
            <lc:LayoutGroup View="GroupBox" Header="GroupBox 5" Orientation="Vertical">
                <lc:LayoutItem Label="LayoutItem 21:">
                    <dxe:TextEdit />
                </lc:LayoutItem>
                <lc:LayoutItem Label="LayoutItem 22:">
                    <dxe:TextEdit />
                </lc:LayoutItem>
                <lc:LayoutItem Label="LayoutItem 23:">
                    <dxe:TextEdit />
                </lc:LayoutItem>
            </lc:LayoutGroup>
        </lc:LayoutControl.AvailableItems>

    </lc:LayoutControl> 
```

# delphi - 有很多外壳项目时的 SelectDirectory/ShBrowseForFolder 问题

> ID：15293557
> 
> 赞同：5
> 
> 时间：2013-03-08T12:01:03.287
> 
> 标签：delphi, winapi, windows-shell

我在使用 Vcl.FileCtrl 函数 SelectDirectory（它是 ShBrowseForFolder Win32 API 的一个薄包装器）时遇到了一个非常**奇怪** 的**问题**。

我使用以下代码允许用户浏览文件或文件夹：

```
 if SelectDirectory('Sélectionnez un élément à ajouter :', '', S, [sdNewFolder,
    sdShowFiles, sdNewUI]) then 
```

执行此代码时，“浏览文件夹”对话框正确显示，显示用户桌面的内容：

![桌面文件少于 100 个的 SelectDirectory](../Images/6629d3359aff6483f548db81169876e4.png)

但是，当桌面文件夹中的项目数量过多时（在我的计算机上，我可以通过大约 100 个桌面图标来重现该问题），相同的调用会产生完全不同的显示：

![具有 100 多个桌面文件的 SelectDirectory](../Images/e03cc750fd2635b0308e6dc73cb69eb8.png)

在这种情况下，桌面项目不再显示。我只被允许浏览我的主文件夹，并且由于我丢失了“我的电脑”图标，我无法选择此目录之外的文件/文件夹。

我正在寻找我在这里缺少的东西。为了正确显示，根项目可以拥有的子项目数量是否有限制？拥有很多桌面图标当然不是​​一个好习惯，但据我所知，这不应阻止此对话框正常运行。我不确定 Delphi 包装器是否有问题，或者这是否是我在 MSDN 上没有看到的 API 的限制......

任何提示表示赞赏！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T12:13:54.213

是的，我可以重现这种行为。这显然是 Windows 的限制，并且有问题的 API 没有为您提供任何增加缓冲区的方法。我认为您使用它解决它的机会`SHBrowseForFolder`接近于零。因为`SHBrowseForFolder`现在是一个遗留 API。

如果您正在浏览文件夹，那么您应该`IFileOpenDialog`在文件夹选择模式下使用。这是一个更好的对话框，它使用了新的 Vista 对话框。在由`TFileOpenDialog`. 只使用它，如果`Win32MajorVersion>=6`！对于 XP，您需要重新调用`SHBrowseForFolder`.

```
if Win32MajorVersion>=6 then
begin
  FileOpenDialog1.Title := 'Sélectionnez un élément à ajouter :';
  FileOpenDialog1.Options := FileOpenDialog1.Options + [fdoPickFolders];
  if FileOpenDialog1.Execute then
    Beep;
end else
begin
  // revert to SelectDirectory
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T00:31:44.740

我想到的解决方法是使用“旧”（Win XP）UI，这可以通过不指定`[sdNewUI]`标志来完成。在这种情况下，所有项目都正确显示。

当用户必须选择文件或文件夹时，这似乎是唯一有效的解决方案，这`TFileOpenDialog`是无法做到的。

# java - 从java代码更新按钮（xml）内的图片

> ID：15293559
> 
> 赞同：3
> 
> 时间：2013-03-08T12:01:05.370
> 
> 标签：java, android, xml, button, drawable

（android 2.1 或更高版本的 java/xml）

我正在使用样式创建按钮：

```
<style name="MainButton">
    <item name="android:textColor">#000000</item>
    <item name="android:text">test</item>
    <item name="android:drawableRight">@drawable/ic_launcher</item>
    <item name="android:drawablePadding">10dip</item>
    <item name="android:paddingLeft">10dip</item>
</style> 
```

我知道我可以更改文本（来自我的 java 代码），例如：

```
Button but = (Button)findViewById(R.id.button2);
    but.setText(Html.fromHtml("<b>" + "title" + "</b>" +  "<br />" + 
            "<small>" + "description" + "</small>" + "<br />" + 
            "<small>" + "DateAdded" + "</small>")); 
```

它看起来非常好，但是如何从我的 java 代码中更改该按钮内的可绘制对象？

我不想使用“button.setBackgroundResource();” 方法。

有任何想法吗？:>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T12:17:23.617

制作另一个具有相同属性但更改'@drawable/'资源的xml。并在 onclick 方法上将按钮的背景资源设置为这个新的 xml

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T12:17:30.567

我想你想要一个自定义选择器

创建一个自定义选择器并将其设置为 xml 中的可绘制资源。

例子：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_enabled="false" 
        android:drawable="@drawable/cell_top_selected" />
    <item android:drawable="@drawable/cell_top" />
</selector> 
```

和

使用此语句

```
yourbutton.setSelected(true)  // for selection image
yourbutton.setSelected(false) // for alternate image 
```

如果你不想这样

```
 I dont want to use "button.setBackgroundResource();" method. 
```

如果你不想使用 setBackGround Resouce 那么

**取一个 TextView 代替，Button 的超类是 TextView，默认情况下 TextView 没有任何背景可绘制资源。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T12:19:47.910

```
 button.setCompoundDrawablesWithIntrinsicBounds(left, top, right, bottom); 
```

您可以使用资源 ID 或可绘制对象

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T12:23:31.463

如果我正确理解了这个问题并且我假设您想要完全更改按钮并绘制自己的按钮，那么您将必须创建自己的按钮。这可以通过创建一个新类然后用 Button 扩展它然后覆盖 View 类的 onDraw() 方法来完成。在此方法中，您可以绘制任何您喜欢的内容，即背景、文本、边框等。

例如

```
class NewButton extends Button{
    protected void onDraw (Canvas canvas){
    //Draw here
    }
} 
```

我希望这有帮助。

# webmatrix - 在 Webmatrix webgrid 中突出显示搜索结果

> ID：15293561
> 
> 赞同：2
> 
> 时间：2013-03-08T12:01:14.200
> 
> 标签：webmatrix, highlighting

我最近开始使用 Webmatrix/razor（我处于初学者的水平）。我创建了一个搜索页面。在搜索结果中，我想突出显示搜索词。有人能帮忙吗？谢谢你。

# xcode - 什么样的内存泄漏 XCode Analyzer 可能不会注意到？

> ID：15293563
> 
> 赞同：8
> 
> 时间：2013-03-08T12:01:16.353
> 
> 标签：xcode, debugging, memory-leaks, analyzer

我担心问这个问题可能会导致一些反对意见，但在做了一些不满意的研究之后，我决定冒险去问更有经验的人......

这里有很多问题是指与 XCode Analayzer Tool 相关的一些具体问题。这似乎是一个非常有用的解决方案。但是我想问你——作为iOS世界的初学者——这个工具不能注意到什么样的内存管理东西。

换句话说，有没有什么常见的内存管理方面，iOS初学者应该考虑“*哦，小心那个，因为在这种情况下XCode Analyzer可能不会警告你你的错误*”......

例如，我在这里找到了[为什么 XCode 静态分析器无法检测未发布的保留属性？](https://stackoverflow.com/questions/10944736/why-cannot-xcode-static-analyzer-detect-un-released-retained-properties)那：

> （...）分析器无法可靠地检测跨方法/库边界的保留/释放问题（...）

这听起来像是一个很好的提示，但也许您知道其他一些常见问题......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T14:36:10.440

分析器非常擅长发现困扰编写非 ARC 代码的新程序员的例程泄漏（调用失败`release`、返回错误保留计数的对象等）。

根据我的经验，它没有发现几种类型的内存问题：

*   它通常不能识别[强引用循环](http://developer.apple.com/library/ios/documentation/cocoa/conceptual/ProgrammingWithObjectiveC/EncapsulatingData/EncapsulatingData.html#//apple_ref/doc/uid/TP40011210-CH5-SW22)（也称为[保留循环](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmPractical.html#//apple_ref/doc/uid/TP40004447-1000810)）。例如，您`NSTimer`向视图控制器添加重复，不知道计时器保持对视图控制器的强引用，并且如果您不`invalidate`使用计时器（或在错误的地方执行此操作，例如`dealloc`方法），则视图控制器和计时器都不会被释放。

*   它找不到循环逻辑错误。例如，如果您有一些循环引用，其中视图控制器 A 呈现视图控制器 B，而视图控制器 B 又呈现 A 的新副本（而不是关闭/弹出以返回 A）。

*   它找不到许多非引用计数内存问题。虽然它在处理 Core Foundation 函数方面变得越来越好，但如果您有执行手动内存分配的代码（例如 via`malloc`和`free`），静态分析器的使用可能会受到限制。每当您使用非引用计数代码（例如，您使用 SQLite`sqlite3_prepare_v2`并且调用失败`sqlite3_finalize`）时，情况都是如此。

我确信这不是它找不到的完整列表，但这些是我在 Stack Overflow 上看到的常见问题，静态分析器对此的帮助有限。但是分析器仍然是一个很棒的工具（它也可以发现内存问题以外的问题），对于那些不使用 ARC 的人来说，它是无价的。

话虽如此，虽然静态分析器是被低估的第一道防线，但您确实应该使用 Instruments 来查找漏洞。请参阅*Instruments 用户指南*中的在您的应用程序中[定位内存问题。](http://developer.apple.com/library/ios/#documentation/developertools/Conceptual/InstrumentsUserGuide/MemoryManagementforYouriOSApp/MemoryManagementforYouriOSApp.html)这是识别泄漏的最佳方法。

# visual-studio-2010 - 设置报告参数未显示 RDLC 图像

> ID：15293564
> 
> 赞同：0
> 
> 时间：2013-03-08T12:01:27.850
> 
> 标签：visual-studio-2010, rdlc, report-viewer2010

我正在使用 2010 年的 RDLC 报告

我想从外部来源绑定图像

```
ReportParameter rpara = new ReportParameter("rpt1", "D:\\Projects\\Image\\logo.jpg");
ReportViewer1.LocalReport.EnableExternalImages = true;
ReportViewer1.LocalReport.SetParameters(new ReportParameter[] { rpara }); 
```

我还设置了 rdlc 设计的所有属性，例如`rpt1`在报告数据窗口中添加参数在正文部分添加新图像，然后将图像属性设置为`external`并选择报告参数

一切都好，但我仍然无法在我的报告查看器上获得图像

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:22:20.693

尝试使用这种方式

```
string imagepath = "File:///" + "C:\\image.jpg";
this.reportViewer1.LocalReport.EnableExternalImages = true;
ReportParameter[] param = new ReportParameter[1];
param[0] = new ReportParameter("Path", imagepath);
this.reportViewer1.LocalReport.SetParameters(param);
this.reportViewer1.RefreshReport(); 
```

# silverlight - 在 Windows Phone 中设置高度动画

> ID：15293568
> 
> 赞同：2
> 
> 时间：2013-03-08T12:01:51.887
> 
> 标签：silverlight, windows-phone-7, xaml, animation, windows-phone

我有一个包含两个元素的网格，一个搜索表单和一个自定义 UC 来显示项目。当我的页面加载时，查看器控件被隐藏。当单击搜索表单上的按钮时，我会使用情节提要对其进行动画处理。我被困在`To=...`动画的一部分。我想将它动画到父容器的高度并让它从底部向上滑动。这可能吗？

作为参考，这是我的树结构：

**页面资源：**

```
<Storyboard x:Name="animateViewSlide" Storyboard.TargetName="SearchForm" >
        <DoubleAnimation  Storyboard.TargetProperty="Height" To="???" Duration="100"/>
</Storyboard> 
```

**控制体：**

```
<Grid x:Name="LayoutRoot">
    <Grid x:Name="SearchForm" Margin="6,6,6,70">
    <uc:AwesomeViewer x:Name="awesomeView" Awesomeness="{Binding SelectedAwesomeThing}" Visibility="Collapsed"/>
</Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T22:25:49.220

**更新**

我确实想出了一个更好的方法，而不是使用 Margin 来单步执行动画，只需用`TranslateTransform`类似的方式为 Y 轴设置动画；

```
<Grid x:Name="ItemToMove" 
            Visibility="{Binding Condition, Converter={StaticResource boolVisConv}}" VerticalAlignment="Bottom" HorizontalAlignment="Center" Margin="30,0,0,-32" Opacity="0">
                <Grid.RenderTransform>
                    <TranslateTransform x:Name="notified" Y="40" />
                </Grid.RenderTransform>
                    <Grid.Triggers>
                    <EventTrigger RoutedEvent="Grid.Loaded">
                        <BeginStoryboard>
                                <Storyboard>
                                    <DoubleAnimationUsingKeyFrames Storyboard.TargetName="notified" Storyboard.TargetProperty="Y">
                                        <SplineDoubleKeyFrame KeyTime="0:0:1.25" Value="0" />
                                    </DoubleAnimationUsingKeyFrames>
                                    <DoubleAnimationUsingKeyFrames Storyboard.TargetName="ItemToMove" Storyboard.TargetProperty="Opacity">
                                        <SplineDoubleKeyFrame KeyTime="0:0:1.55" Value="1" />
                                    </DoubleAnimationUsingKeyFrames>
                                </Storyboard>
                        </BeginStoryboard>
                    </EventTrigger>
                </Grid.Triggers> 
```

**结束更新**

`Height`您的麻烦将源于尝试为自动计算的值设置动画（只有....那么你的“到”值是 800 像素，但我想这不是你要找的。

现在，您通常希望您可以将渲染的大小输入到您的“To”值中，比如通过`To="{Binding ActualHeight, ElementName=LayoutRootOROTHERParentContainer}"`对吗？然而，不，那也行不通……

因此，虽然其他人可能有更好的方法，但我发现的唯一方法是让自动计算的尺寸独自去做他们的事情，而是为对象的步进设置动画，`Margin`通过它与转换通过`ObjectAnimationUsingKeyFrames`配对时实际上看起来相当很好，除了它会为该过程添加一堆额外的 XAML。因此，作为一个概念，您可能会尝试更多类似的东西（但是，如果您遇到更好的解决方案，我肯定也想知道它。作为谋生的设计师，我经常遇到这种情况。）`Opacity``DoubleAnimationUsingKeyFrames`

概念示例；

（故事板）

```
<Storyboard x:Name="Kaboom">
    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Margin)" Storyboard.TargetName="border">
        <DiscreteObjectKeyFrame KeyTime="0:0:0.1">
            <DiscreteObjectKeyFrame.Value>
                <Thickness>0,750,0,0</Thickness>
            </DiscreteObjectKeyFrame.Value>
        </DiscreteObjectKeyFrame>
        <DiscreteObjectKeyFrame KeyTime="0:0:0.2">
            <DiscreteObjectKeyFrame.Value>
                <Thickness>0,600,0,0</Thickness>
            </DiscreteObjectKeyFrame.Value>
        </DiscreteObjectKeyFrame>
        <DiscreteObjectKeyFrame KeyTime="0:0:0.3">
            <DiscreteObjectKeyFrame.Value>
                <Thickness>0,550,0,0</Thickness>
            </DiscreteObjectKeyFrame.Value>
        </DiscreteObjectKeyFrame>
        <DiscreteObjectKeyFrame KeyTime="0:0:0.4">
            <DiscreteObjectKeyFrame.Value>
                <Thickness>0,500,0,0</Thickness>
            </DiscreteObjectKeyFrame.Value>
        </DiscreteObjectKeyFrame>
        <DiscreteObjectKeyFrame KeyTime="0:0:0.5">
            <DiscreteObjectKeyFrame.Value>
                <Thickness>0,450,0,0</Thickness>
            </DiscreteObjectKeyFrame.Value>
        </DiscreteObjectKeyFrame>
        <DiscreteObjectKeyFrame KeyTime="0:0:0.6">
            <DiscreteObjectKeyFrame.Value>
                <Thickness>0,400,0,0</Thickness>
            </DiscreteObjectKeyFrame.Value>
        </DiscreteObjectKeyFrame>
        <DiscreteObjectKeyFrame KeyTime="0:0:0.7">
            <DiscreteObjectKeyFrame.Value>
                <Thickness>0,350,0,0</Thickness>
            </DiscreteObjectKeyFrame.Value>
        </DiscreteObjectKeyFrame>
        <DiscreteObjectKeyFrame KeyTime="0:0:0.8">
            <DiscreteObjectKeyFrame.Value>
                <Thickness>0,300,0,0</Thickness>
            </DiscreteObjectKeyFrame.Value>
        </DiscreteObjectKeyFrame>
        <DiscreteObjectKeyFrame KeyTime="0:0:0.9">
            <DiscreteObjectKeyFrame.Value>
                <Thickness>0,250,0,0</Thickness>
            </DiscreteObjectKeyFrame.Value>
        </DiscreteObjectKeyFrame>
        <DiscreteObjectKeyFrame KeyTime="0:0:1">
            <DiscreteObjectKeyFrame.Value>
                <Thickness>0,200,0,0</Thickness>
            </DiscreteObjectKeyFrame.Value>
        </DiscreteObjectKeyFrame>
        <DiscreteObjectKeyFrame KeyTime="0:0:1.1">
            <DiscreteObjectKeyFrame.Value>
                <Thickness>0,150,0,0</Thickness>
            </DiscreteObjectKeyFrame.Value>
        </DiscreteObjectKeyFrame>
        <DiscreteObjectKeyFrame KeyTime="0:0:1.2">
            <DiscreteObjectKeyFrame.Value>
                <Thickness>0,100,0,0</Thickness>
            </DiscreteObjectKeyFrame.Value>
        </DiscreteObjectKeyFrame>
        <DiscreteObjectKeyFrame KeyTime="0:0:1.3">
            <DiscreteObjectKeyFrame.Value>
                <Thickness>0,50,0,0</Thickness>
            </DiscreteObjectKeyFrame.Value>
        </DiscreteObjectKeyFrame>
        <DiscreteObjectKeyFrame KeyTime="0:0:1.4">
            <DiscreteObjectKeyFrame.Value>
                <Thickness>0</Thickness>
            </DiscreteObjectKeyFrame.Value>
        </DiscreteObjectKeyFrame>
    </ObjectAnimationUsingKeyFrames>
    <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="border">
        <EasingDoubleKeyFrame KeyTime="0:0:0.6" Value="0.01"/>
        <EasingDoubleKeyFrame KeyTime="0:0:1.6" Value="1"/>
    </DoubleAnimationUsingKeyFrames>
</Storyboard> 
```

该概念的一个快速的即席示例；

```
<Grid Height="800" Width="480" x:Name="ParentContainer">
            <!-- Your SearchForm thingy with its funky margins already set like your example -->
            <Rectangle Margin="6,6,6,70" Fill="Green" />
            <Button Height="100" Width="100" Content="Click Me!" HorizontalAlignment="Left" VerticalAlignment="Top">
                 <!-- Quick button to show it in action -->
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="Click">
                            <ei:ControlStoryboardAction Storyboard="{StaticResource Kaboom}"/>
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
            </Button>
            <!-- Your Awesomeness -->
            <Border x:Name="border" Width="300" Background="Blue" HorizontalAlignment="Right" Margin="0,800,0,0" Opacity="0">
                <TextBlock x:Name="textBlock" Text="OH&#10;&#10;SNAP!!!&#10;&#10;Say&#10;&#10;WHAAA??" 
                            TextAlignment="Center" VerticalAlignment="Center"
                            FontSize="40" FontWeight="Bold" Foreground="White"/>
            </Border>
        </Grid> 
```

无论如何，可能不完全是你所希望的，但它是一个有效的替代方案，尤其是稍微调整一下，除非像我说的那样，你想硬编码你的对象大小，这样你就有了可行的东西来将你的“To”值设置为......对于仅限于标准 800x480 纵向模式的手机，只有您可能非常想要。但是，如果您没有该选项，我已经使用这种方法完成了一些非常漂亮的设计。

希望这会有所帮助，祝你好运！

# jquery - JQuery Mobile 中的挤压图表

> ID：15293574
> 
> 赞同：0
> 
> 时间：2013-03-08T12:02:10.030
> 
> 标签：jquery, jquery-mobile, highcharts

我正在开发一个 JQuery 移动应用程序，其内容区域中显示了一个 HighCharts 图表。我想在手机的可见区域挤压整个图表，所以不需要滚动。我已尝试更改视口内容

```
$.mobile.metaViewportContent = 'width=device-width, minimum-scale=1, maximum-scale=1'; 
```

但 id 似乎并没有解决问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:26:42.043

图表将被渲染以填充它的包含 div，因此您需要确保包含 div 的大小正确。通常给包含的 div 一个 css 就足够了：

```
width:100%;
height:100%; 
```

显然，根据任何父元素的设置等，它可能会更复杂。

# ios - 如何在 iOS 中解析 JSON

> ID：15293579
> 
> 赞同：-4
> 
> 时间：2013-03-08T12:02:30.170
> 
> 标签：ios, json

```
{"data":[
         "",{"id":"1","nom":"hello","message":["",{"id":1,"nom":"dad"}]},
            {"id":"2","nom":"hi","message":["",{"id":"1","nom":"marie"},{"id":"2","nom":"bob"}]}
        ]
} 
```

我如何使用 iOS 从中提取数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T12:04:59.723

利用`NSJSONSerialization`.

```
NSError *jsonError = nil;
id allValues = [NSJSONSerialization JSONObjectWithData:[str dataUsingEncoding:NSUTF8StringEncoding]
                                                                      options:0
                                                                        error:&jsonError];

if(jsonError!=nil)
   NSLog(@"Json_Err: %@",jsonError);

NSArray *result = [(NSDictionary*)allValues objectForKey:@"data"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T12:11:48.203

为您的项目集成 Json sdk 并像这样放置以下代码...

```
NSStrig *jsonString = @"your json string";
NSDictionary *responseDictionary = [jsonString JSONValue]; 
```

# objective-c - 在 Mac OS X 上使用 Control + Shift 切换输入语言

> ID：15293581
> 
> 赞同：6
> 
> 时间：2013-03-08T12:02:36.210
> 
> 标签：objective-c, macos, keyboard

是否可以为**Mac OS X 10.8**创建实用程序，允许设置**Control+Shift**组合键（或 Control+Option、Option+Shift 等）来切换输入语言？出于某种原因，我没有找到一个可以提供这种功能的实用程序，这是许多**Windows->Mac**切换器非常需要的。由于操作系统的限制，这是不可能的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-11T10:47:57.960

我找到了键盘大师编辑器的解决方案！你可以在一个热键中记录一个动作来改变一个语言到另一个。我试过用 F8 热键设置美式键盘语言和 F9 设置法文键盘语言，非常有趣！

# variables - 使用 smarty 打印变量名

> ID：15293583
> 
> 赞同：0
> 
> 时间：2013-03-08T12:02:52.133
> 
> 标签：variables, smarty

使用 php Smarty 我如何打印变量名而不是值？

例如。我想在屏幕上显示此文本“{firstname}”而不是 $firstname 变量值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T23:11:45.903

你的意思是你想包含字符`{`而不`}`将它们解释为Smarty synax？[如果是`{ldelim}``{rdelim}`](http://www.smarty.net/docs/en/language.function.ldelim.tpl)这样，请检查[and](http://www.smarty.net/docs/en/language.function.ldelim.tpl) ["functions"](http://www.smarty.net/docs/en/language.function.ldelim.tpl)[和`{literal} ... {/literal}`](http://www.smarty.net/docs/en/language.function.literal.tpl)block [function](http://www.smarty.net/docs/en/language.function.literal.tpl)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T10:33:18.287

只需将`firstname`模板文件放入您希望它显示“名字”的位置。

# c++ - clang vs gcc和msvc中的方法指针模板

> ID：15293584
> 
> 赞同：3
> 
> 时间：2013-03-08T12:02:53.117
> 
> 标签：c++, templates, visual-c++, gcc, clang

我有这个功能：

```
template <typename T, void (T::*pf)()>
void call(T& t)
{
    (t.*pf)();
} 
```

如果我有`foo`一个带有适当签名的方法的类（比如`bar`），我可以这样调用它`call<foo, &foo::bar>();`，这很好。但是，如果`bar`是`const`gcc 和 msvc 在这样调用时很乐意编译它`call<const foo, &foo::bar>()`。Clang 抱怨第二个模板参数无效。当我放入`const`模板参数（`void (T::*pf)() const`）时，所有树都会编译它。

现在，这不是一个大问题，但是如果我不必`const`在模板参数中编写这个可恶的代码，我的代码就会变得更加清晰。

所以问题基本上是：标准对此有何评论？这是一个clang错误还是gcc和msvc只是让它滑动，因为它们很酷？

PS这是一个完整的repro程序的链接：[http://codepad.org/wDBdGvSN](http://codepad.org/wDBdGvSN)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T12:41:31.717

`const`方法的特性是它的“签名”的一部分。因此，定义和使用指向成员的指针的正确方法是：

```
R (Obj::*)(Args)       // for non-const member
R (Obj::*)(Args) const // for const member 
```

请注意，`const`可以在非常量对象上调用成员，而`R (const Obj::*)(Args)`.

解决此问题的一种方法是通过定义“调用包装器”来抽象此类函数指针：

```
template<typename O, void (O::* f)()>
struct NonConstFunc
{
    static void call(O* o)
    {
        (o->*f)();
    }
};

template<typename O, void (O::* f)() const>
struct ConstFunc
{
    static void call(O* o)
    {
        (o->*f)();
    }
}; 
```

然后，您可以通过以下方式使用它（此处进行抽象）：

```
template<typename Obj, typename Function>
void call(Obj* o)
{
    Function::call(o);
} 
```

这里有一个[活生生的例子](http://codepad.org/gfwwrrzt)。

这只是主要思想。您可以通过自动检测方法是否存在来扩展它`const`，而无需更改用户代码。

# jquery - jQuery Vertical 巨型菜单子菜单在加载时闪烁。如何阻止它在wordpress中闪烁

> ID：15293585
> 
> 赞同：6
> 
> 时间：2013-03-08T12:02:55.460
> 
> 标签：jquery, wordpress, flash, flicker, fouc

我有一个带有 21 个儿童主题的 wordpress 网站。在我的侧边栏中，我从以下位置嵌入了一个 jQuery Vertical Mega Menu 小部件：

[http://wordpress.org/extend/plugins/jquery-vertical-mega-menu/](http://wordpress.org/extend/plugins/jquery-vertical-mega-menu/)

菜单工作正常。唯一的问题是当网站加载时会有一个短的 FOUC（无样式内容的闪烁）。

[http://en.wikipedia.org/wiki/Flash_of_unstyled_content](http://en.wikipedia.org/wiki/Flash_of_unstyled_content)

我不知道如何防止它闪烁。我阅读了一些带有解决方案的类似问题，但我不知道如何将其应用于我的孩子主题。

有人说你必须添加`jQuery(document).ready(function() {`. 但是在哪里？我试图将它添加到我的子主题的functions.php中：

```
<?php 
....
.....

function id_scripts() {
   jQuery(document).ready(function() { echo 'test'});
}
add_action('wp_enqueue_scripts', 'id_scripts');

> 
```

但它给了我一个解析错误说：

> **解析错误：语法错误，意外的 T_FUNCTION，在第 28 行的 /..../functions.php 中需要 ')'**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T00:38:53.977

作为 CWSpear 回答的后续行动，我建议为此目的创建一个自定义 CSS 类，您还可以将其应用于任何其他在被 JS 激活之前应该隐藏的元素。我喜欢给这个类命名`.js-hide`——Twitter Bootstrap 使用`.collapse`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T07:07:35.047

首先，您似乎正在将 JavaScript 添加到 PHP。这就是为什么你有错误。

关于闪烁菜单的问题，您应该`display: none;`在 CSS 中设置子菜单。查看插件，它将它（子菜单）设置为`display: none;`，但直到加载 DOM 后才会触发（在页面开始加载后不久，但足以看到“flash”），所以通过`display: none;`在 CSS 中设置它，它将加载隐藏并在悬停时打开。

具体来说，通过查看链接中的插件，尝试将以下内容添加到您的 CSS 中：

```
.dcjq-vertical-mega-menu .sub-container {
    display: none;
} 
```

# .net - 等效于 CLI 中用于 unicode 编码的 .net Uri.EscapeDataString

> ID：15293588
> 
> 赞同：2
> 
> 时间：2013-03-08T12:03:05.667
> 
> 标签：.net, visual-c++, unicode

在 .net 中，我们`Uri.EscapeDataString`对 unicode 进行了编码。它将“Ää”转换为“%C3%84%C3%A4”。`Uri.EscapeDataString`CLI中的等价物是什么。我的代码在 VC++ 中，我不想使用 Uri.EscapeDataString。我试过了`WideCharToMultiByte(...)`。但这不会返回相同的结果。我可以在 CLI 中使用什么 API 或任何其他方式可以在 CLI 中获得相同的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T06:58:30.947

最后在同事的帮助下得到了答案。首先使用 WideCharToMultiByte(..) 将 Widechar 转换为 multibye。即将unicode转换为utf-8。然后我们必须逐字节将其编码为十六进制。

```
string methodTOHex()
{
  string s = "Ä";

  int len;
  int slength = (int)s.length() + 1;
  len = MultiByteToWideChar(CP_ACP, 0, s.c_str(), slength, 0, 0); 
  wchar_t* buf = new wchar_t[len];
  MultiByteToWideChar(CP_ACP, 0, s.c_str(), slength, buf, len);
  std::wstring temp(buf);
  delete[] buf;
  LPCWSTR input = temp.c_str();

  int cbNeeded = WideCharToMultiByte(CP_UTF8, 0, input, -1, NULL, 0, NULL, NULL);
  if (cbNeeded > 0) {
    char *utf8 = new char[cbNeeded];
    if (WideCharToMultiByte(CP_UTF8, 0, input, -1, utf8, cbNeeded, NULL, NULL) != 0) {
      for (char *p = utf8; *p; *p++) {
        char onehex[5];
        _snprintf(onehex, sizeof(onehex), "%%%02.2X", (unsigned char)*p);
        output += onehex;
      }
    }
    delete[] utf8;
  }

  return output;
} 
```

# c# - 如何在 c# 中调用这个 c 函数（解组返回结构）？

> ID：15293593
> 
> 赞同：8
> 
> 时间：2013-03-08T12:03:18.047
> 
> 标签：c#, interop, pinvoke, unmarshalling

我想使用 c# interop 从用 c 编写的 dll 调用函数。我有头文件。看看这个：

```
enum CTMBeginTransactionError {
    CTM_BEGIN_TRX_SUCCESS = 0,
    CTM_BEGIN_TRX_ERROR_ALREADY_IN_PROGRESS,
    CTM_BEGIN_TRX_ERROR_NOT_CONNECTED
};

#pragma pack(push)
#pragma pack(1)
struct CTMBeginTransactionResult {
    char *                        szTransactionID;
    enum CTMBeginTransactionError error;
};

struct CTMBeginTransactionResult ctm_begin_customer_transaction(const char * szTransactionID); 
```

如何从 c# 调用 ctm_begin_customer_transaction。const char * 很好地映射到字符串，但尽管进行了各种尝试（查看 stackoverflow 和其他站点），但我未能编组返回结构。如果我定义返回 IntPtr 的函数，它可以正常工作......

*编辑* 我将返回类型更改为 IntPtr 并使用： CTMBeginTransactionResult structure = (CTMBeginTransactionResult)Marshal.PtrToStructure(ptr, typeof(CTMBeginTransactionResult)); 但它会抛出 AccessViolationException

我也试过：

```
IntPtr ptr = Transactions.ctm_begin_customer_transaction("");
int size = 50;
byte[] byteArray = new byte[size];
Marshal.Copy(ptr, byteArray, 0, size);
string stringData = Encoding.ASCII.GetString(byteArray); 
```

stringData == "70e3589b-2de0-4d1e-978d-55e22225be95\0\"\0\0\a\0\0\b\b?" 此时。 "70e3589b-2de0-4d1e-978d-55e22225be95" 是结构中的 szTransactionID。枚举在哪里？是下一个字节吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T13:18:46.223

这个结构中隐藏着一个内存管理问题。谁拥有 C 字符串指针？pinvoke marshaller 将始终假定调用者拥有它，因此它将尝试释放字符串。并将指针传递给 CoTaskMemFree()，与 Marshal.FreeCoTaskMem() 调用的函数相同。这些函数使用 COM 内存分配器，即 Windows 中的通用互操作内存管理器。

这很少有好的结果，C 代码通常不使用该分配器，除非程序员在设计他的代码时考虑到互操作。在这种情况下，他永远不会使用结构作为返回值，当调用者提供缓冲区时，互操作的工作总是少得多。

因此，您不能让编组器履行其正常职责。您必须将返回值类型声明为 IntPtr，这样它就不会尝试释放字符串。你必须自己用 Marshal.PtrToStructure() 来编组它。

然而，这仍然没有回答这个问题，谁拥有字符串？您无法释放字符串缓冲区，您无权访问 C 代码中使用的分配器。您唯一的希望是该字符串实际上并未在堆上分配。这是可能的，C 程序可能正在使用字符串文字。您需要验证该猜测。在测试程序中调用该函数十亿次。如果这不会使程序爆炸，那么你很好。如果不是，那么只有 C++/CLI 可以解决您的问题。鉴于字符串的性质，“交易 ID”应该会发生很大变化，我会说你确实有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T13:37:29.870

我讨厌回答我自己的问题，但我找到了编组结果结构的解决方案。该结构长 8 个字节（char * 为 4 个字节，枚举为 4 个字节）。编组字符串不会自动工作，但以下工作：

```
// Native (unmanaged)
public enum CTMBeginTransactionError
{
    CTM_BEGIN_TRX_SUCCESS = 0,
    CTM_BEGIN_TRX_ERROR_ALREADY_IN_PROGRESS,
    CTM_BEGIN_TRX_ERROR_NOT_CONNECTED
};

// Native (unmanaged)
[StructLayout(LayoutKind.Sequential, Pack = 1, CharSet = CharSet.Ansi)]
internal struct CTMBeginTransactionResult
{
    public IntPtr szTransactionID;
    public CTMBeginTransactionError error;
};

// Managed wrapper around native struct
public class BeginTransactionResult
{
    public string TransactionID;
    public CTMBeginTransactionError Error;

    internal BeginTransactionResult(CTMBeginTransactionResult nativeStruct)
    {
        // Manually marshal the string
        if (nativeStruct.szTransactionID == IntPtr.Zero) this.TransactionID = "";
        else this.TransactionID = Marshal.PtrToStringAnsi(nativeStruct.szTransactionID);

        this.Error = nativeStruct.error;
    }
}

[DllImport("libctmclient-0.dll")]
internal static extern CTMBeginTransactionResult ctm_begin_customer_transaction(string ptr);

public static BeginTransactionResult BeginCustomerTransaction(string transactionId)
{
    CTMBeginTransactionResult nativeResult = Transactions.ctm_begin_customer_transaction(transactionId);
    return new BeginTransactionResult(nativeResult);
} 
```

该代码有效，但我仍然需要调查，如果调用非托管代码导致内存泄漏。

# jquery - 重置 JS 对象 - Jquery

> ID：15293595
> 
> 赞同：1
> 
> 时间：2013-03-08T12:03:29.747
> 
> 标签：jquery

我正在使用 Dragslider ( [http://code.ovidiu.ch/dragdealer/](http://code.ovidiu.ch/dragdealer/) ) JS 库来创建一个不错的滑块效果，以便在 HTML5 站点中将数据输入到非常图形化的表单中。

一切正常 - 但是一旦使用了滑块并将正确的百分比存储在表单中 - 我需要允许用户然后编辑结果 - 这意味着将当前数字从输入框传递到 js 构造函数中，有构造滑块时可用于执行此操作的方法（setValue） - 但由于它已经构造，我需要一种方法来删除并重新启用具有新开始图的脚本。

目前使用此命令启动滑块 -

```
 new Dragdealer('bol-slider',animationCallback: function(x)
        {

    //animation commands
            }
        ) 
```

是否可以通过 JS 停止/删除 dragdealer 对象并使用包含相关起始图的构造函数重新启动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T12:43:18.367

从文档上看，你可以随时调用它的方法，在构建过程中不需要这样做。该页面的示例：

```
link1.onclick = function()
{
    slideshow.setStep(1);
    return false;
} 
```

他们在单击链接时调用 setStep 方法，但您可以用您的 setValue 方法替换。您可以在[焦点事件](http://api.jquery.com/focusout/)或类似事件中调用它，例如：

```
$('#yourinput').on('focusout', function(){
    yourslider.setValue(3);
}); 
```

# c#-4.0 - 在 Castle.Windsor 中注册和解析命名实例

> ID：15293598
> 
> 赞同：4
> 
> 时间：2013-03-08T12:03:38.553
> 
> 标签：c#-4.0, dependency-injection, castle-windsor, named-entity-recognition

我似乎无法将正确的实例注入到类 ctor 中。这是我正在尝试做的事情：

```
class Program
{
    static void Main(string[] args)
    {
        WindsorContainer container = new WindsorContainer();
        container.Register(
            Component.For<ISessionFactory>()
                .UsingFactoryMethod(() => GetSessionFactory("1"))
                .Named("1"),
            Component.For<ISessionFactory>()
                .UsingFactoryMethod(() => GetSessionFactory("2"))
                .Named("2"));

        container.Register(
            Component.For<IRepository>()
                .ImplementedBy<Repository>()
                .DependsOn(container.Resolve<ISessionFactory>("1")),
            Component.For<IReadOnlyRepository>()
                .ImplementedBy<ReadOnlyRepository>()
                .DependsOn(container.Resolve<ISessionFactory>("2")));

        var connectionString1 = container.Resolve<IRepository>().Factory.ConnectionString;
        var connectionString2 = container.Resolve<IReadOnlyRepository>().Factory.ConnectionString;

        //These should not be equal!!!
        Console.WriteLine(connectionString1);
        Console.WriteLine(connectionString2);
    }

    public static SessionFactory GetSessionFactory(string connectionString)
    {
        return new SessionFactory { ConnectionString = connectionString };
    }

    public static bool Blah(Type accepted)
    {
        int d = 3;
        return true;
    }
}

public interface ISessionFactory
{
    string ConnectionString { get; set; }
}

public class SessionFactory : ISessionFactory
{
    public string ConnectionString { get; set; }
}

public interface IRepository
{
    ISessionFactory Factory { get; set; }
}

public class Repository : IRepository
{
    public ISessionFactory Factory { get; set; }

    public Repository(ISessionFactory factory)
    {
        this.Factory = factory;
    }
}

public interface IReadOnlyRepository
{
    ISessionFactory Factory { get; set; }
}

public class ReadOnlyRepository : IReadOnlyRepository
{
    public ISessionFactory Factory { get; set; }

    public ReadOnlyRepository(ISessionFactory factory)
    {
        this.Factory = factory;
    }
} 
```

谁能发现问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T16:54:58.910

试试这个：

```
container.Register(
   Component.For<ISessionFactory>()
       .UsingFactoryMethod(() => GetSessionFactory("1"))
       .Named("1"),
   Component.For<ISessionFactory>()
       .UsingFactoryMethod(() => GetSessionFactory("2"))
       .Named("2"),
   Component.For<IRepository>()
       .ImplementedBy<Repository>()
       .DependsOn(Dependency.OnComponent(typeof(ISessionFactory),"1")),
   Component.For<IReadOnlyRepository>()
       .ImplementedBy<ReadOnlyRepository>()
       .DependsOn(Dependency.OnComponent(typeof(ISessionFactory), "2"))); 
```

# wifi - Arduino 非阻塞 Wifi 连接

> ID：15293602
> 
> 赞同：3
> 
> 时间：2013-03-08T12:03:58.413
> 
> 标签：wifi, arduino, blocking

我正在放置一个监控一些传感器的系统，并根据它们打开/关闭一些灯。

对于进一步的数据分析，我们还希望将该数据发送到中央服务器，因此我们添加了 Wifi shield。**请记住，如果没有网络，系统应该可以正常运行**。所以我所做的是在 loop() 中监控网络状态，如果它出现故障则再次连接。

现在，问题是 Wifi.begin() 阻止执行，直到连接或抛出错误。**这是不可接受的，因为在此期间系统将无响应**。

我已经研究过在 Arduino 中使用线程，例如[这里](http://www.kwartzlab.ca/2010/09/arduino-multi-threading-librar/)，但是这会出现在限制中：

> 这个库的主要潜在问题之一是，一个挂起的线程将锁定整个系统，因为在当前线程完成其 loop() 函数之前无法调用下一个线程。

那么，任何人有任何指示，想法或经验吗？

谢谢，

胡安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T15:56:16.530

您可以创建一个计时器中断，当过期时会使用停滞的阻塞函数杀死线程。

实际上，您可能希望使用诸如[Timer1 库](http://playground.arduino.cc/code/timer1)之类的中断来执行关键更新。这样您就无需担心在任何地方阻塞代码。

# python - 将 .h 文件中的常量导入 python

> ID：15293604
> 
> 赞同：16
> 
> 时间：2013-03-08T12:04:12.337
> 
> 标签：python, c, header, constants, ctypes

我一直在寻找这个问题的简单答案，但似乎找不到。我宁愿远离 Python 2.6/2.7 中尚未包含的任何外部库。

我有 2 个类似于以下内容的 c 头文件：

```
//constants_a.h
const double constant1 = 2.25;
const double constant2 = -0.173;
const int constant3 = 13; 
```

...

```
//constants_b.h
const double constant1 = 123.25;
const double constant2 = -0.12373;
const int constant3 = 14; 
```

...

我有一个 python 类，我想将这些常量导入：

```
#pythonclass.py
class MyObject(object):
    def __init(self, mode):
        if mode is "a":
            # import from constants_a.h, like:
            # self.constant1 = constant1
            # self.constant2 = constant2
        elif mode is "b":
            # import from constants_b.h, like:
            # self.constant1 = constant1
            # self.constant2 = constant2 
```

...

我也有使用常量的 c 代码，类似于：

```
//computations.c
#include <stdio.h>
#include <math.h>
#include "constants_a.h"

// do some calculations, blah blah blah 
```

如何将头文件中的常量导入 Python 类？

头文件 constants_a.h 和 constants_b.h 的原因是我使用 python 来使用常量进行大部分计算，但有一次我需要使用 C 来进行更优化的计算。此时我正在使用 ctypes 将 c 代码包装到 Python 中。我想让常量远离代码，以防万一我需要更新或更改它们，并使我的代码更加简洁。我不知道是否有助于注意我也在使用 NumPy，但除此之外，没有其他非标准 Python 扩展。我也愿意接受有关该程序的设计或架构的任何建议。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-19T15:47:37.330

通常，在 C 头文件中*定义*变量的风格很差。头文件应该只*声明*对象，将它们的定义留给适当的“.c”源代码文件。

您可能想要做的一件事是`extern const whatever_type_t foo;`在 C 代码中的某处声明库全局常量并定义（或“实现”）它们（即为它们分配值）（确保只执行一次）。

无论如何，让我们忽略你是*如何*做到的。假设您已经定义了常量并让它们的符号在您的共享对象文件“libfoo.so”中可见。让我们假设您想从 Python 代码中访问在 libfoo 中`pi`定义的符号 。`extern const double pi = 3.1415926;`

现在，您通常使用以下方式在 Python 中加载您的目标文件`ctypes`：

```
>>> import ctypes
>>> libfoo = ctypes.CDLL("path/to/libfoo.so") 
```

但是你会看到`ctypes`thinks`libfoo.pi`是一个函数，而不是常量数据的符号！

```
>>> libfoo.pi
<_FuncPtr object at 0x1c9c6d0> 
```

要访问它的值，您必须做一些相当尴尬的事情——将`ctypes`认为是一个函数的内容转换*回*一个数字。

```
>>> pi = ctypes.cast(foo.pi, ctypes.POINTER(ctypes.c_double))
>>> pi.contents.value
3.1415926 
```

在 C 行话中，这模糊地对应于正在发生的以下事情：您有一个`const double pi`，但有人强迫您仅通过函数指针使用它：

```
typedef int (*view_anything_as_a_function_t)(void);
view_anyting_as_a_function_t pi_view = &pi; 
```

`pi_view`为了使用 的值，您如何处理指针`pi`？您将其作为 a 回退`const double *`并取消引用它：`*(const double *)(pi_view)`.

所以这一切都很尴尬。也许我遗漏了一些东西，但我相信这是`ctypes`模块的设计——它主要用于进行*外部函数调用*，而不是用于访问“外部”数据。在可加载库中导出纯数据符号可以说是很少见的。

如果常量只是 C 宏定义，这将不起作用。通常，您无法从外部访问宏定义的数据。它们在编译时进行宏扩展，在生成的库文件中没有可见符号，*除非*您还在 C 代码中导出它们的宏值。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-08T12:11:01.173

我建议使用正则表达式（`re`模块）从文件中解析出你想要的信息。

构建一个完整的 C 解析器将是巨大的，但如果您只使用变量并且文件相当简单/可预测/受控制，那么您需要编写的内容很简单。

只需注意“陷阱”工件，例如注释掉的代码！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T12:35:52.127

我建议使用 Python 和 C 程序都可读的某种配置文件，而不是在标头中存储常量值。例如，一个简单的 csv、ini 文件，甚至是您自己的“键：值”对的简单格式。并且每次您想更改其中一个值时都无需重新编译 C 程序 :)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T12:25:06.727

我会投票给emilio，但我缺乏代表！

尽管您已要求避免使用其他非标准库，但您不妨看看 Cython（Cython：C-Extensions for Python www.cython.org/），它提供了 Python 编码的灵活性和原始的执行速度C/C++ 编译的代码。

通过这种方式，您可以使用常规 Python 处理所有内容，但使用其内置的 C 类型处理昂贵的代码元素。然后，您也可以将您的 Python 代码转换为 .c 文件（或者只是自己包装外部 C 库。），然后可以将其编译为二进制文件。对于数值例程，我已经实现了高达 10 倍的加速。我也相信 NumPy 使用它。

# tidesdk - 如何在 TideSDK 中允许文本选择

> ID：15293605
> 
> 赞同：1
> 
> 时间：2013-03-08T12:04:36.503
> 
> 标签：tidesdk

我正在开发一个与 TideSDK 一起使用的应用程序。显然，在 Chrome 中，用户可以选择他看到的任何 html 文本。但是，在 TideSDK 中，默认情况下似乎禁用了文本选择。我想一个简单的设置将允许它，但是在谷歌搜索并查看文档之后，我找不到任何东西来展示如何允许用户选择文本。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-04T07:35:14.213

```
body, p
{
    -webkit-user-select: auto;
} 
```

我试过上面的代码。有效...

默认情况下，主体加载 -webkit-user-select: auto; 在潮汐SDK的正文部分，因此内容不可选择

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T06:53:24.203

找到了[答案](http://developer.appcelerator.com/question/122867/how-to-enable-user-selection-on-a-div-titanium-desktop)。您必须使用`-webkit-user-select: auto|text`您希望可选择的元素。不确定为什么默认情况下无法选择文本。

# android - 在android中禁用按钮单击声音

> ID：15293608
> 
> 赞同：56
> 
> 时间：2013-03-08T12:04:41.360
> 
> 标签：android

如何禁用 Android 应用中特定按钮的点击声音？

这是我的代码：

```
more1after.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                sc.scrollTo(sc.getScrollX() + 75,
                sc.getScrollY() + sc.getWidth() + 5);
            }
        }); 
```

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2013-03-08T12:08:56.770

试试这个代码来禁用按钮点击音效：

```
yourbutton.setSoundEffectsEnabled(false); 
```

（或）布局 XML 文件

```
 <Button... android:soundEffectsEnabled="false"/> 
```

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2014-12-29T04:07:36.883

如果有人想知道，这里是 XML 方式：

```
<Button
    ...
    android:soundEffectsEnabled="false" /> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-09-08T10:07:55.250

对于那些用 Kotlin 编写代码的人。

```
button.isSoundEffectsEnabled = false 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-10-17T19:36:17.387

```
<Button
    ......
    android:soundEffectsEnabled="false"/> 
```

Java 代码

```
button = findViewbyId(R.id.YourBUttonID);
button.setSoundEffectsEnabled(false); 
```

# php - 没有任何广告的 adf.ly API

> ID：15293609
> 
> 赞同：0
> 
> 时间：2013-03-08T12:04:41.410
> 
> 标签：php, api

我想缩短没有任何广告的 URL，然后我计划稍后将链接更改为横幅或 int，但我使用此 API：

> `http://api.adf.ly/api.php?key=c02fe2b360ee4b566a4f1e14d84b279b&uid=3141484&advert_type=banner&domain=adf.ly&url=http://somewebsite.com`

如果我删除`advert_type=banner`它将改用`advert_type=int`，但我想缩短没有任何广告的 URL。因此，我需要一些建议来使用 API 创建不带任何广告的短 URL，但我想稍后将其类型更改为横幅广告或完整广告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T12:24:43.323

Adfly 是一项 PPV *（按次付费）*服务，如果您正在寻找没有广告的 URL 缩短器，请尝试不同的服务。

我建议[使用 Google url Shorter API](https://developers.google.com/url-shortener/)，这是一个很好的[Davidwalsh 教程](http://davidwalsh.name/google-url)实现示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-22T03:27:31.760

```
$url = file_get_contents('http://api.adf.ly/api.php?key=[REDACTED]&uid=[REDACTED]&advert_type=int&domain=adf.ly&url=http://domain.php');

echo $url; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-22T19:40:23.947

您无法删除广告，我建议使用不同的 URL 缩短器。如果您打算将自己的域添加到您的 URL 缩短器中，我建议您使用[Superior Networks](http://www.superior-networks.com/)或任何其他使用[Yourls](http://www.Yourls.org/)的主机托管您自己的域（以 2 美元左右的价格） 。

您还可以使用 Bitly 自己的服务来连接您的域以获得 100% 免费托管，但不是那么短。请阅读 bitly 的支持页面以了解如何设置它。（在获得 10 声望之前我无法链接到它，抱歉）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-31T21:00:43.450

这是解决方案：

广告类型=2

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-25T21:27:03.627

信息 de la API de adf.ly：

```
advert_type Optional • Interstitial advertising
    ◦ advert_type=int
    ◦ advert_type=interstitial
    ◦ advert_type=1
• Framed banner
    ◦ advert_type=banner
    ◦ advert_type=3
• No advertising
    ◦ advert_type=2 
```

# javascript - 从哪里获取事件类型列表？

> ID：15293611
> 
> 赞同：5
> 
> 时间：2013-03-08T12:04:45.520
> 
> 标签：javascript, events, meteor

官方[文档](http://docs.meteor.com/#eventmaps)只说：

> 事件的类型，例如“点击”、“模糊”或“按键”。

对于 iOS 设备，*touchstart*是另一个有效的事件。我在哪里可以获得所有可能事件的完整列表？例如，我实际上喜欢为 event 获取`<select>`事件`hasChanged()`。这是基于另一个库吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T12:20:29.613

Meteor 没有定义它支持的事件——它只是创建了一个跨浏览器的事件监听器包装器。如果您想创建自定义事件并触发它们，Meteor 会选择它们。

支持的本机输入事件取决于浏览器：[Mozilla Developer Network 参考](https://developer.mozilla.org/en-US/docs/Mozilla_event_reference)是一个很好的起点。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-08T12:30:01.890

文档[还说](http://docs.meteor.com/#eventmaps)，除了`click`、`focus`、`blur`等之外，所有 DOM 事件也是可能的。

> 其他 DOM 事件也是可用的，但是对于上述事件，Meteor 已经注意确保它们在所有浏览器中统一工作。

[您可以在此处](http://www.quirksmode.org/dom/events/index.html)和[此处](https://developer.mozilla.org/en-US/docs/Mozilla_event_reference?redirectlocale=en-US&redirectslug=DOM%2FDOM_event_reference)查看可用的 Javascript 事件列表。

# python - 将嵌套列表转换为 numpy 数组的有效方法

> ID：15293612
> 
> 赞同：3
> 
> 时间：2013-03-08T12:04:46.447
> 
> 标签：python, list, numpy

我有一个具有不同列表大小和类型的嵌套列表。

```
def read(f,tree,objects):

Event=[]
for o in objects:
    #find different features of one class 
    temp=[i.GetName() for i in tree.GetListOfBranches() if i.GetName().startswith(o)]
    tempList=[] #contains one class of objects
    for t in temp:
        #print t
        tempList.append(t)
        comp=np.asarray(getattr(tree,t))
        tempList.append(comp)
Event.append(tempList)

return Event

def main():
    path="path/to/file"
    objects= ['TauJet', 'Jet', 'Electron', 'Muon', 'Photon', 'Tracks', 'ETmis', 'CaloTower']

    f=ROOT.TFile(path)
    tree=f.Get("RecoTree")
    tree.GetEntry(100)
    event=read(f,tree,objects) 
```

例如 event[0] 的结果是

```
['TauJet', array(1), 'TauJet_E', array([ 31.24074173]), 'TauJet_Px', array([-28.27997971]), 'TauJet_Py', array([-13.18042469]), 'TauJet_Pz', array([-1.08304048]), 'TauJet_Eta', array([-0.03470514]), 'TauJet_Phi', array([-2.70545626]), 'TauJet_PT', array([ 31.20065498]), 'TauJet_Charge', array([ 1.]), 'TauJet_NTracks', array([3]), 'TauJet_EHoverEE', array([ 1745.89221191]), 'TauJet_size', array(1)] 
```

如何将其转换为 numpy 数组？

注意 1： np.asarray(event, "object") 很慢。我正在寻找更好的方法。就我没有固定类型而言，np.fromiter() 也不适用

注意 2：我不知道我的事件的长度。

注意 3：如果它使事情变得更容易，我也可以得到名字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:33:44.733

你可以尝试这样的事情，但我不确定它会有多快。这将为第一行创建一个 numpy 记录数组。

```
data = event[0]
keys = data[0::2]
vals = data[1::2]
#there are some zero-rank arrays in there, so need to check for those, 
#but I think just recasting them to a np.float should work. 
temp = [np.float(v) for v in vals]
#you could also just create a np array from the line above with np.array(temp)
dtype={"names":keys, "formats":("f4")*len(vals)}
myArr = np.rec.fromarrays(temp, dtype=dtype)

#test it out
In [53]: data["TauJet_Pz"]
Out[53]: array(-1.0830404758453369, dtype=float32)

#alternatively, you could try something like this, which just creates a 2d numpy array
vals = np.array([[np.float(v) for v in row[1::2]] for row in event])
#now create a nice record array from that using the dtypes above
myRecordArray = np.rec.fromarrays(vals, dtype=dtype) 
```

# java - Android、Java：调整大小的位图忽略位图选项

> ID：15293614
> 
> 赞同：4
> 
> 时间：2013-03-08T12:04:55.060
> 
> 标签：java, android, bitmap, resize

我正在用 Java 创建这个 Android 游戏。但是，我加载位图，然后调整它们的大小以适合屏幕等（dpi 并不准确）。但我的想法也是为具有少量内存的设备加载 16b (mBitmapOptions.inPreferredConfig = Bitmap.Config.ARGB_4444) 中的位图。但是当我调整位图的大小时，它们似乎又回到了 32b（Bitmap.Config.ARGB_8888）。

这就是我声明选项的方式：

```
 mBitmapOptions = new BitmapFactory.Options();
    mBitmapOptions.inPreferredConfig = Bitmap.Config.ARGB_4444; 
```

这就是我加载位图的方式：

```
 mBitmaps.add(getResizedBitmap(BitmapFactory.decodeResource(mResources, imagePath, mBitmapOptions))); 
```

这是 getResizeBitmap 方法：

```
 public Bitmap getResizedBitmap(Bitmap bm) 
    {
                    //Original size
        int width = bm.getWidth();
        int height = bm.getHeight();

                    //New size (percent)
        float newWidth = 1 * mScaleWidth;
        float newHeight = 1 * mScaleHeight;

                    //Create the matrix
        Matrix matrix = new Matrix();
        matrix.postScale(newWidth, newHeight);

                    //Recreate the new Bitmap
        Bitmap resizedBitmap = Bitmap.createBitmap(bm, 0, 0, width, height, matrix, true);

                    //Recycle the old Bitmap
        bm.recycle();

        return resizedBitmap;
    } 
```

任何想法为什么新的位图会忽略这些选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T12:10:31.170

为什么不使用[createScaledBitmap](http://developer.android.com/reference/android/graphics/Bitmap.html#createScaledBitmap%28android.graphics.Bitmap,%20int,%20int,%20boolean%29)方法？它应该保留选项。在您的情况下，您正在创建一个全新的位图，它可能会应用默认配置。

编辑：另一种选择是使用您的代码并添加对[复制](http://developer.android.com/reference/android/graphics/Bitmap.html#copy%28android.graphics.Bitmap.Config,%20boolean%29)方法的调用，如下所示：

```
Bitmap smallerBitmap = resizedBitmap.copy (Bitmap.Config.ARGB_4444, false);
resizedBitmap.recycle (); 
```

但是，我认为这不会有很好的表现......

# ipad - 在 iPad 上使用 Google Maps API 时如何去除白线？

> ID：15293620
> 
> 赞同：9
> 
> 时间：2013-03-08T12:05:18.323
> 
> 标签：ipad, google-maps-api-3

我正在使用自定义样式来创建使用 Google Maps API V3 的蓝色地图。

![在 iPad 上滚动时的示例](../Images/1734a3765275a6c4ac0c8946845ad869.png)

它在桌面上的不同浏览器中呈现良好，但是当我在 iPad 上查看它时，会出现一条垂直的白线。此外，滚动时有一条水平线，如上图所示。

这是我的代码在运行中的 JSFiddle 示例。

```
 var myOptions = {
            zoom: 5,
            center: latlng,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            disableDefaultUI: true,
            styles: styles
        }; 
```

[自定义颜色样式的 JSFiddle](http://jsfiddle.net/xrHar/2/)

有没有办法去除或平滑这些线条？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-11T08:09:43.853

解决方案是忽略所有 webkit 的特定前缀样式。

```
-webkit-appearance: none; 
```

在*iOS 模拟器中的**iPad*上测试， ：http : [//jsfiddle.net/dreamyguy/xrHar/91/](http://jsfiddle.net/dreamyguy/xrHar/91/)*`running iOS 7.1`*

 *Safari 关于[-webkit-appearance的文档](https://developer.apple.com/library/safari/documentation/appleapplications/reference/safaricssref/Articles/StandardCSSProperties.html#//apple_ref/css/property/-webkit-appearance)*

# mysql - 将存储函数与 C API 和准备好的语句一起使用

> ID：15293621
> 
> 赞同：9
> 
> 时间：2013-03-08T12:05:20.130
> 
> 标签：mysql, c, prepared-statement, mysql-connector

我正在尝试使用带有准备好的语句的存储函数，但没有任何成功。

MySQL 准备好语句但不执行它，没有给出错误，它只是默默地失败。

这是*函数：

```
 drop function if exists lineDistanceC;
delimiter //
CREATE FUNCTION lineDistanceC (la1 DOUBLE, lo1 DOUBLE, la2 DOUBLE, lo2 DOUBLE) RETURNS DOUBLE 
BEGIN 
SET @r = 6371;
SET @lat1 = RADIANS(la1);
SET @lon1 = RADIANS(lo1);
SET @lat2 = RADIANS(la2);
SET @lon2 = RADIANS(lo2);
SET @x = (@lon2-@lon1) * COS((@lat1+@lat2)/2);
SET @y = (@lat2 - @lat1);
RETURN (SQRT((@x*@x) + (@y*@y)) * @r);
END
//
delimiter ; 
```

它按预期在命令行上工作，并在 SELECT 语句中替换硬编码的双精度然后允许它按预期工作，因此周围的代码也很好。

我已启用 CLIENT_MULTI_STATEMENTS 作为 MySQL 连接参数，我怀疑它仅与 CALLing 过程有关，但它是一根值得抓住的稻草。

该声明是使用以下方法准备的：

```
 strcpy (sqlStr, "SELECT lineDistanceC(Y(pnt),X(pnt), ?, ?) FROM mytable");
MYSQL_STMT *statement;
if (mysql_stmt_prepare(statement, sqlStr, strlen(sqlStr))) {
    fprintf(stderr, "ERROR:mysql_stmt_prepare() failed. Error:%s\nsql:%s\n", mysql_stmt_error(statement), sqlStr);
} 
```

随后是参数和结果所需的绑定语句，然后使用以下命令执行：

```
 if (mysql_stmt_execute(statement)) {
    fprintf(stderr, "mysql_stmt_execute(), failed. Error:%s\n", mysql_stmt_error(statement));
} 
```

如前所述，如果上述 SELECT 语句中的函数被替换为硬编码浮点数（例如 SELECT 2.3 .....），那么它将按预期返回硬编码数字。

实际上，准备好的语句代码是使用宏插入的，有数百个语句按要求工作，因此准备、绑定或执行语法不是问题（如果上面不正确，那么是我从宏中翻译的错误) 除非它需要与函数一起使用而有所不同。

这些是输入之一绑定为输出时的日志条目：

```
 Prepare SELECT ? FROM mytable
Execute SELECT 51.36000061035156 FROM mytable 
```

这是我尝试使用该功能时的日志条目：

```
 Prepare SELECT lineDistanceC(latitude, longitude, ?, ?) FROM mytable; 
```

如上所述，它在不执行语句的情况下静默失败，日志或其他地方也没有错误。

任何线索将不胜感激。

*为了给予应得的荣誉，这个函数是从[这里的一个公式推导出来的](http://www.movable-type.co.uk/scripts/latlong.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T00:07:25.313

我编写了一个快速示例进行测试，但无法在 MySql 5.1.66 上重现您的问题。看到`Prepare`日志中的语句表明查询在语法上是正确的，并且服务器现在已准备好接受参数。如果您未能正确绑定输入参数，您将看不到`Query`日志消息。

您可能应该再次验证您的绑定宏正在生成正确的 C 代码。下面的代码片段显示了一组功能性的 API 调用，它们可能会给你一些进一步的想法来帮助调试。我对您的函数所做的唯一更改是添加[DETERMINISTIC](http://dev.mysql.com/doc/refman/5.0/en/create-procedure.html)子句以避免系统上的二进制日志记录错误。

从这样的表开始：

```
mysql> select * from mytable;
+----+-------+
| id | value |
+----+-------+
|  1 |     1 |
|  2 |     2 |
|  3 |     3 |
+----+-------+
3 rows in set (0.00 sec) 
```

然后执行以下查询会给出以下结果：

```
mysql> SELECT lineDistanceC(1.0, 2.0, 3.0, value) FROM mytable;
+-------------------------------------+
| lineDistanceC(1.0, 2.0, 3.0, value) |
+-------------------------------------+
|                    248.609129229989 |
|                    222.389853289118 |
|                    248.609129229989 |
+-------------------------------------+
3 rows in set (0.00 sec) 
```

以下 C 代码尝试相同的查询，但使用的是 MySql API。请注意，尚未实施内存管理和正确的错误检查。

```
/* mysql_test.c */

#include <string.h>
#include <stdio.h>
#include <stdlib.h>

#include <mysql.h>

int main(int argc, char * argv[])
{
    char sqlStr[300];

    MYSQL *mysql = mysql_init(NULL);
    if (mysql == NULL) {
        fprintf(stderr, "ERROR:mysql_init() failed.\n");
        exit(1);
    }

    const char* host = "localhost";
    const char* user = "root";
    const char* passwd = NULL;
    const char* db = "mysql_test";

    if (mysql_real_connect(mysql, host, user, passwd, db, 0, NULL, 0) == NULL) {
        fprintf(stderr, "ERROR:mysql_real_connect() failed.\n");
        exit(1);
    }

    MYSQL_STMT *statement = NULL;
    statement = mysql_stmt_init(mysql);
    if (statement == NULL) {
        fprintf(stderr, "ERROR:mysql_stmt_init() failed.\n");
        exit(1);
    }

    strcpy (sqlStr, "SELECT lineDistanceC(1.0, 2.0, ?, value) FROM mytable");

    if (mysql_stmt_prepare(statement, sqlStr, strlen(sqlStr))) {
        fprintf(stderr, "ERROR:mysql_stmt_prepare() failed. Error:%s\nsql:%s\n", mysql_stmt_error(statement), sqlStr);
        exit(1);
    }

    MYSQL_BIND input_bind[1];
    memset(input_bind, 0, sizeof(input_bind));
    float v1 = 3.0;
    unsigned long v1_len = sizeof(v1);

    input_bind[0].buffer_type = MYSQL_TYPE_FLOAT;
    input_bind[0].buffer = &v1;
    input_bind[0].buffer_length = sizeof(v1);
    input_bind[0].length = &v1_len;
    input_bind[0].is_null = (my_bool*)0;

    if (mysql_stmt_bind_param(statement, input_bind)) {
        fprintf(stderr, "ERROR:mysql_stmt_bind_param failed\n");
        exit(1);
    }

    if (mysql_stmt_execute(statement)) {
        fprintf(stderr, "mysql_stmt_execute(), failed. Error:%s\n", mysql_stmt_error(statement));
        exit(1);
    }

    /* Fetch result set meta information */
    MYSQL_RES* prepare_meta_result = mysql_stmt_result_metadata(statement);
    if (!prepare_meta_result)
    {
        fprintf(stderr,
                " mysql_stmt_result_metadata(), \
                returned no meta information\n");
        fprintf(stderr, " %s\n", mysql_stmt_error(statement));
        exit(1);
    }

    /* Get total columns in the query */
    int column_count= mysql_num_fields(prepare_meta_result);
    if (column_count != 1) /* validate column count */
    {
        fprintf(stderr, " invalid column count returned by MySQL\n");
        exit(1);
    }

    /* Bind single result column, expected to be a double. */
    MYSQL_BIND result_bind[1];
    memset(result_bind, 0, sizeof(result_bind));

    my_bool result_is_null[1];
    double result_double;
    unsigned long result_len = 0;

    result_bind[0].buffer_type = MYSQL_TYPE_DOUBLE;
    result_bind[0].buffer = &result_double;
    result_bind[0].buffer_length = sizeof(result_double);
    result_bind[0].length = &result_len;
    result_bind[0].is_null = &result_is_null[1];

    if (mysql_stmt_bind_result(statement, result_bind)) {
        fprintf(stderr, "mysql_stmt_bind_Result(), failed. Error:%s\n", mysql_stmt_error(statement));
        exit(1);
    }

    while (!mysql_stmt_fetch(statement)) {
        printf("%.12f\n", result_double);
    }

} 
```

编译：

```
gcc -o mysql_test mysql_test.c -lmysqlclient 
```

这是输出：

```
248.609129229989
222.389853289118
248.609129229989 
```

这与使用 mysql 命令行客户端执行的语句的输出相匹配。

您应该能够在您的系统上编译和运行它，以确定问题是您使用 API 还是其他问题。

# iphone - 是否可以将应用程序永久部署到客户端？

> ID：15293624
> 
> 赞同：4
> 
> 时间：2013-03-08T12:05:33.870
> 
> 标签：iphone, ios, xcode, deployment, ad-hoc-distribution

我为我的客户开发了一个应用程序，现在我需要在他的公司内将其部署给他，我了解到，我们需要在 Apple 的开发人员门户上进行移动配置，将设备包含在其中，以便应用程序可以在其上运行那个特定的设备。

此外，如果我们的开发者帐户的期限到期，我们必须更新它.. 为了让应用程序在设备上正常工作。

但我想知道是否有任何方法可以将应用程序永久部署到客户端..？即，一旦我们将应用程序移交给客户，他就不需要再次来找我们了.. 并使用它尽可能多的时间.. ？

另外，请注意客户端使用的设备未越狱..！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T12:10:37.710

您可以创建当前有效期为一年的分发配置文件，这意味着您的应用程序将在客户端设备上运行一年而无需您的努力。

一年后，您需要通过创建新配置文件重新附加。这可以很容易地从控制台完成。

访问[这个问题](https://stackoverflow.com/questions/9216485/how-to-manage-enterprise-distribution-certificate-expiration)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T12:21:58.423

用户从 App Store 下载的应用程序将继续运行，即使该应用程序的开发者没有续订订阅。

看到[这个](http://developer.apple.com/library/ios/#featuredarticles/FA_Wireless_Enterprise_App_Distribution/Introduction/Introduction.html)所以你的解决方案是。在应用商店上传应用。让您的客户下载它。一旦他下载它，即使您的苹果证书过期，他也可以继续使用该应用程序。

但是，一旦您的 Apple 分发配置文件结束，您的客户将无法从应用商店下载该应用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T13:58:06.537

做到这一点的唯一方法是使用 Apple 的企业对企业应用商店。这允许您指定哪些客户端可以下载该应用程序。该应用程序的处理方式与普通应用程序商店应用程序一样，并且不会过期。

您提到的临时分发不适合将应用程序分发给客户端。任何时候更改或添加设备时，您都必须重新配置并重新发布。

另一种选择是让您的客户获得企业开发人员许可证。该应用程序仍然需要每年更新，但他们可以将其安装在任何设备上，而且更好的是，您不必让 Apple 对其进行审查。

# c++ - 如何绑定vector.resize

> ID：15293631
> 
> 赞同：2
> 
> 时间：2013-03-08T12:05:45.917
> 
> 标签：c++, boost, bind, blitz++

我尝试使用`boost::bind`with `std::vector<>::resize`。

但是下面的代码不会编译：

```
#include <boost/bind.hpp>
#include <vector>
using namespace boost;

int main(){
    typedef std::vector<double> type;
    type a;
    bind(&type::resize, _1, 2)(a);
    return 0;
} 
```

那么，我该怎么做呢？

谢谢！

**提升版本 1.53 gcc 版本 4.8 或 4.6**

**编辑：**上面的代码适用于 -std=c++11。其实我原来的问题是这样的：

```
#include <boost/bind.hpp>
#include <blitz/array.h>
#include <vector>
using namespace boost;
using namespace blitz;

int main(){
    typedef Array<double, 1> type;
    type a;
            //a.resize(4) is ok;
    bind(&type::resize, _1, 2)(a);
    return 0;
} 
```

我的编译命令是： g++ t.cpp -I path/include/ -std=c++11 -L path/lib/ -l blitz

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T12:09:59.257

`resize`可能是一个重载函数（在 C++11 中它必须是），所以你需要告诉编译器你想要哪个重载。对于一个参数形式，这应该在 C++11 中工作：

```
bind(static_cast<void (type::*)(type::size_type)>(&type::resize), _1, 2)(a); 
```

或者更具可读性：

```
typedef void (type::*resize_signature)(type::size_type);
bind(static_cast<resize_signature>(&type::resize), _1, 2)(a); 
```

如果它*不是*重载函数（与 C++03 模式下的 GCC 一样），则它需要两个参数（一个具有默认值），并且您需要提供第二个参数，因为`bind`不能使用默认参数：

```
typedef void (type::*resize_signature)(type::size_type, const value_type&);
bind(static_cast<resize_signature>(&type::resize), _1, 2, 0.0)(a); 
```

不幸的是，这个 C++03 版本不可移植，允许实现使用单个函数或一对重载。为了使其可移植，或与其他类型一起使用，例如`Array`您可以将调用包装在调用的自定义仿函数中`resize`，因此您不需要知道确切的签名：

```
typename<class VecT>
struct resizer<VecT> {
    void operator()(VecT& v, unsigned n) const { v.resize(n); }
};
// ...
bind(resizer<type>(), _1, 2)(a); 
```

或者在 C++11 中只使用 lambda 表达式而不是`bind`：

```
auto resize = [](type& v) { v.resize(2); };
resize(a); 
```

# php - 仅用于 filename.ext 的正则表达式

> ID：15293632
> 
> 赞同：1
> 
> 时间：2013-03-08T12:05:46.327
> 
> 标签：php, regex, image

我将图像与内容分开，如下所示：

```
list($img, $string) = explode('>', $string, 2);
$isSlashes = (stripos($img, '\\')!==false);
if ($isSlashes) {
  $img = stripslashes($img);
}
preg_match('|src=["\']([^"\']+)["\']|i', $img, $match);
if (empty($match[1])) {
  imgres_log('Image src not found in '.$img, 'error');
  imgres_joinContent($content, $img, $string, $isSlashes);
  continue;
}
$src = $match[1]; 
```

...它通常可以工作，除非图像带有查询字符串，例如：`img0880.jpg?itok=pUzE5f9d`这会搞砸一切。如何删除`?`标记后的部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T12:11:21.780

好吧，按照你说的做，只需添加 ? 进入你的正则表达式。

```
preg_match('|src=["\']([^"\'?]+)["\']|i', $img, $match); 
```

但是，或者实际上是两个但是。1) 如果图像在 ? 之后有查询字符串，则它是图像 URL 的一部分。像 image.jpg?foo=bar 可能指的是不同于 image.jpg?foo=baz 的图像。2）你在这里允许单引号和双引号。但是如果有 src="joe's_image.jpg" 或 src=image.jpg 怎么办？这两种情况都是 HTML 有效的，并且会因您的脚本而失败。

解决方案：我建议使用 DOM 解析器而不是正则表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T12:36:40.460

试试这个

```
preg_match("~src=(\"|'|)(.*?)[\"|'| ]~si", $img, $match); 
```

为所有条件工作

像

1)

```
src="image.jpg?dasd=a5fsd" 
```

输出

```
Array
(
  [0] => src="image.jpg?dasd=a5fsd"
  [1] => "
  [2] => image.jpg?dasd=a5fsd
) 
```

2)

```
src='image.jpg?dasd=a5fsd' 
```

输出

```
Array
(
   [0] => src='image.jpg?dasd=a5fsd'
   [1] => '
   [2] => image.jpg?dasd=a5fsd
) 
```

3)

```
src=image.jpg?dasd=a5fsd 
```

输出

```
Array
(
  [0] => src=image.jpg?dasd=a5fsd 
  [1] => 
  [2] => image.jpg?dasd=a5fsd
) 
```

# ajax - 如何通过工具提示显示数据库中的数据？

> ID：15293638
> 
> 赞同：8
> 
> 时间：2013-03-08T12:06:06.977
> 
> 标签：ajax, jquery, cakephp, tooltip

我想将 ajax 请求中的数据显示到工具提示，它现在在模式窗口中打开，但我想将它打开到工具提示中，我该怎么做，我尝试了很多但没有成功，我卡在在这里，请帮助我通过工具提示显示数据。

这是我的视图代码

```
 echo $this->Manager->link('Groups',array('action'=> 'test_contact_group', $records['Contact']['contact_id']),array('class'=>'ajax_links')); 
```

这个链接的 html 是

```
 <a class="ajax_links" help="a" href="/contacts/test_contact_group/78">Groups</a> 
```

jquery 就在那里

```
 <script>
$(".ajax_links").hover(function(e) {

    e.preventDefault(); 
    var link = $(this).attr('href');

    $.ajax({ 
        type: "POST",   
        url: link,
        cache: false
    }).done(function( html ) { 

        jQuery('#myModal').modal('show');
        jQuery('.modal-body').html("Groups" + html);

    });
});

</script> 
```

它是模态窗口中的显示，但我想在工具提示中打开它，我该怎么做，请帮助我。提前感谢一吨，我真的卡在这里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T12:24:41.123

希望对你有帮助..

```
$(".ajax_links").hover(function(e) {

    e.preventDefault(); 
    var link = $(this).attr('href');

    $.ajax({ 
        type: "GET",   
        url: link,
        success : function (data){
        $('#elementId').attr('title',data);
        } 

    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T12:27:02.687

而不是模态窗口。您只有一个带有 id 工具提示的 div 容器。像这样。然后附加结果。像这样的东西：演示[工具提示。](http://jsfiddle.net/CTtcD/)和 CSS 取自这个答案[Pure CSS Tooltip](https://stackoverflow.com/questions/5623072/how-can-i-create-a-tooltip-tail-using-pure-css)

```
$('#toolTip').show(); 
```

工作演示：[工具提示的演示](http://jsfiddle.net/CTtcD/)

或者您可以附加到标题属性。

```
 $('#elementId').attr('title',data); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T12:24:39.000

如果问题仅与 jquery 语法有关，您可以尝试以下操作：

```
 $(this).attr("title", html); 
```

# mongodb - 使用 Spring Data 的 Mongodb 文档版本控制

> ID：15293640
> 
> 赞同：9
> 
> 时间：2013-03-08T12:06:14.877
> 
> 标签：mongodb, spring-data-mongodb

我在我的 Java 应用程序中使用 Spring Data 连接到 MongoDb 并要求对文档进行版本控制（基本上是存储历史记录）。[如果使用Mongoid](http://mongoid.org/en/mongoid/docs/extras.html#versioning)，它在 Ruby 中似乎非常简单

我想知道 Spring Data 是否对 Java 有类似的东西。或者你最好尝试实现你自己的。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-07-24T08:59:29.133

是的，Spring 数据中有一个非常好的功能是审计，您可以参考以下链接

[http://www.javacodegeeks.com/2013/11/auditing-entities-in-spring-data-mongodb-2.html](http://www.javacodegeeks.com/2013/11/auditing-entities-in-spring-data-mongodb-2.html)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2019-06-17T15:59:06.507

经过大量研究，我发现[https://javers.org/documentation/spring-boot-integration/](https://javers.org/documentation/spring-boot-integration/)。这就像坚如磐石，非常容易实现。

该库有助于存储更改字段的所有历史记录并易于对其进行查询，并且对它有很好的支持。此处共享的示例 POC：[https ://nullbeans.com/auditing-using-spring-boot-mongodb-and-javers/](https://nullbeans.com/auditing-using-spring-boot-mongodb-and-javers/)

# vb.net - VB.NET 如何使用循环赋值

> ID：15293642
> 
> 赞同：1
> 
> 时间：2013-03-08T12:06:17.030
> 
> 标签：vb.net

我正在尝试一一缩短我的代码，但我不知道如何去做。我正在使用 VB.NET 并且对它有一点了解。这是我的代码的一部分，有没有办法使用循环来缩短它

```
Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    mdp1 = 0
    mdp2 = 0
    mdp3 = 0
    mdp4 = 0
    mdp5 = 0
    mdp6 = 0
    mdp7 = 0
    mdp8 = 0
    mdp9 = 0
    mdp10 = 0
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:46:02.603

如果你把它改成一个数组，你所需要的就是这个。

`Private mpd(9) as Integer`

所有值都将初始化（使用 VB）。请注意，.Net 是基于 0 的，因此要访问第 10 个成员，它将是 mpd(9)。第一个值是 mpd(0) 而不是 mpd(1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T22:38:34.753

添加到吉姆的答案，这里有一些代码可以帮助你，我不确定这是否会完全回答你的整个问题：

```
 Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

      Dim mdp() As Integer = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0}
 End Sub 
```

# powershell-2.0 - 停止 Powershell v2 调用命令 -ComputerName 它始终以 V1 运行

> ID：15293643
> 
> 赞同：1
> 
> 时间：2013-03-08T12:06:17.380
> 
> 标签：powershell-2.0, powershell-remoting

我有一个运行 Powershell v2 的 Win2003。如果我跑

```
Invoke-Command -ScriptBlock {$Host.Version} 
```

然后我得到“2.0版”。但是，如果我运行

```
Invoke-Command -ScriptBlock {$Host.Version} -ComputerName localhost 
```

然后我得到“1.0版”

我认为这与远程 powershell 有关，但我一直找不到设置。任何人都可以帮忙吗？

注意。

```
WSManConfig: Microsoft.WSMan.Management\WSMan::localhost\Plugin\Microsoft.PowerShell\InitializationParameters

ParamName            ParamValue
---------            ----------
PSVersion            2.0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:12:19.697

远程主机最早是在v2中引入的，所以远程主机的版本是1（ServerRemoteHost）。当你`Invoke-Command`没有`-ComputerName`运行时，你直接在 powershell.exe 中运行命令。尝试检查（并比较）两个命令中的 $Host.Name ，您应该会看到差异。

最好检查 PowerShell 版本`$PSVersionTable`- 在 v1 中它不存在，在任何较新的版本中，它都会告诉您当前正在运行的**PowerShell版本。**

# url - 将一个 URL 重定向到不同 URL 的最简单方法是什么？

> ID：15293651
> 
> 赞同：1
> 
> 时间：2013-03-08T12:06:32.207
> 
> 标签：url, redirect

我有一个将数据发送到 URL1 的系统。我希望这个系统向 URL1 和 URL2 发送数据。我在 cPanel 中尝试了正常重定向，但这仅允许重定向到一个 URL。将系统发送的流量重定向到一个 URL (URL3) 的最简单方法是什么，然后该 URL 又可以重定向到 URL1、URL2 以及我决定将来添加多少个其他 URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T12:44:00.127

我不确定 CNAME 条目，也许其他人会有使用它的解决方案。
我会使用 php:
Flow:
URL3 从 POST 获取数据，然后将数据发送到 URL1 和 URL2。

我正在使用以下代码：[如何使用 PHP 发送 POST 请求？](https://stackoverflow.com/questions/5647461/how-do-i-send-a-post-request-with-php)(PHP5)

```
function postData($url, $value){
    $data = array('key' => $value);

    $options = array('http' => array('method'  => 'POST','content' => http_build_query($data)));
    $context  = stream_context_create($options);
    $result = file_get_contents($url, false, $context);
} 
```

在 URL3 中：

```
$data = $_POST['data'];
$urls = array('URL1', 'URL2');
foreach ($urls as $i) {
    postData($i, $data);
} 
```

# c# - 将字典列表覆盖到数据表

> ID：15293653
> 
> 赞同：12
> 
> 时间：2013-03-08T12:06:32.800
> 
> 标签：c#, .net, casting, datatable

目前我们通过遍历列表和字典的每个值来做到这一点：

```
private DataTable ChangeToDictionary(List<Dictionary<string,int>> list)
       {
           DataTable datatTableReturn = new DataTable();

           if (list.Count() > 0)
           {
               Dictionary<string, int> haeders = list.ElementAt(0);
               foreach (var colHead in haeders)
               {
                   datatTableReturn.Columns.Add(colHead.Key);
               }
           }

           foreach (var row in list)
           {
               DataRow dataRow = datatTableReturn.NewRow();
               foreach (var col in row)
               {

                   dataRow[col.Key] = col.Value;
               }
               datatTableReturn.Rows.Add(dataRow);
           }
           return datatTableReturn;

       } 
```

但是有更好的方法吗？循环了这么多次感觉不太好

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-08T14:57:20.337

上面的答案没有解决字典超过 1 行的问题。此解决方案解决了该问题。

```
static DataTable ToDataTable(List<Dictionary<string, int>> list)
{
    DataTable result = new DataTable();
    if (list.Count == 0)
        return result;

    var columnNames = list.SelectMany(dict=>dict.Keys).Distinct();
    result.Columns.AddRange(columnNames.Select(c=>new DataColumn(c)).ToArray());
    foreach (Dictionary<string,int> item in list)
    {
        var row = result.NewRow();
        foreach (var key in item.Keys)
        {
            row[key] = item[key];
        }

        result.Rows.Add(row);
    }

    return result;
}

static void Main(string[] args)
{
    List<Dictionary<string, int>> it = new List<Dictionary<string, int>>();
    Dictionary<string, int> dict = new Dictionary<string, int>();
    dict.Add("a", 1);
    dict.Add("b", 2);
    dict.Add("c", 3);
    it.Add(dict);
    dict = new Dictionary<string, int>();
    dict.Add("bob", 34);
    dict.Add("tom", 37);
    it.Add(dict);
    dict = new Dictionary<string, int>();
    dict.Add("Yip Yip", 8);
    dict.Add("Yap Yap", 9);
    it.Add(dict);

    DataTable table = ToDictionary(it);
    foreach (DataColumn col in table.Columns)
        Console.Write("{0}\t", col.ColumnName);
    Console.WriteLine();
    foreach (DataRow row in table.Rows)
    {
        foreach (DataColumn column in table.Columns)
            Console.Write("{0}\t", row[column].ToString());
        Console.WriteLine();
    }
    Console.ReadLine();

} 
```

输出看起来像......

```
a       b       c       bob     tom     Yip Yip Yap Yap
1       2       3
                        34      37
                                        8       9 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-08T12:47:14.650

速度、优雅和可重用性不能并存。您总是选择更重要的一项，并尝试平衡其他两项。

代码越快，越难看。它更漂亮，可重用性更低。

这是一个“优雅”解决方案的示例，但它的可读性并不高。

```
private static DataTable ToDictionary(List<Dictionary<string, int>> list)
{
    DataTable result = new DataTable();
    if (list.Count == 0)
        return result;

    result.Columns.AddRange(
        list.First().Select(r => new DataColumn(r.Key)).ToArray()
    );

    list.ForEach(r => result.Rows.Add(r.Select(c => c.Value).Cast<object>().ToArray()));

    return result;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T14:59:03.383

尝试这个：

```
 private DataTable GetDataTableFromDictionaries<T>(List<Dictionary<string, T>> list)
    {
        DataTable dataTable = new DataTable();

        if (list == null || !list.Any()) return dataTable;

        foreach (var column in list.First().Select(c => new DataColumn(c.Key, typeof(T))))
        {
            dataTable.Columns.Add(column);
        }

        foreach (var row in list.Select(
            r =>
                {
                    var dataRow = dataTable.NewRow();
                    r.ToList().ForEach(c => dataRow.SetField(c.Key, c.Value));
                    return dataRow;
                }))
        {
            dataTable.Rows.Add(row);
        }

        return dataTable;
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T12:51:24.900

像下面的代码怎么样？

很好，因为它只对每一行进行一次迭代。它应该很快，我已经包含了明显的异常以使代码更安全。

```
private static DataTable DictionariesToDataTable<T>(
        IEnumerable<IDictionary<string, T>> source)
{
    if (source == null)
    {
        return null;
    }

    var result = new DataTable();
    using (var e = source.GetEnumerator())
    {
        if (!e.MoveNext())
        {
            return result;
        }

        if (e.Current.Keys.Length == 0)
        {
            throw new InvalidOperationException();
        }

        var length = e.Current.Keys.Length;

        result.Columns.AddRange(
            e.Current.Keys.Select(k => new DataColumn(k, typeof(T))).ToArray());

        do
        {
            if (e.Current.Values.Length != length)
            {
                throw new InvalidOperationException();
            }

            result.Rows.Add(e.Current.Values);
        }
        while (e.MoveNext());

        return result;
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-12-11T02:24:03.647

尝试这个

```
List<Dictionary<string, object>> ListDic;

var stringListDic = JsonConvert.SerializeObject(ListDic);

var dataTable = JsonConvert.DeserializeObject<DataTable>(stringListDic); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-19T17:06:08.717

试试我的解决方案，对我来说似乎很干净：

```
private DataTable DictonarysToDataTable(List<Dictionary<string, int>> list) 
    {
        DataTable table = new DataTable();

        foreach (Dictionary<string,string> dict in list)        //for every dictonary in the list ..
        {
            foreach (KeyValuePair<string,int> entry in dict) //for every entry in every dict
            {
                if (!myTable.Columns.Contains(entry.Key.ToString()))//if it doesn't exist yet
                {
                    myTable.Columns.Add(entry.Key);                 //add all it's keys as columns to the table
                }
            }
            table.Rows.Add(dict.Values.ToArray());              //add the the Values of every dict in the list as a new row
        }

        return table;
    } 
```

编辑：哦，Snap，这仅适用于一个字典..我没有考虑清楚。但是也许你可以修改它以适用于字典列表..

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-08-31T21:56:14.257

请试一试

```
 DataTable table = new DataTable();

        foreach (IDictionary<string, object> row in DeviceTypeReport)
        {
            foreach (KeyValuePair<string, object> entry in row)
            {
                if (!table.Columns.Contains(entry.Key.ToString()))
                {
                    table.Columns.Add(entry.Key);
                }
            }
            table.Rows.Add(row.Values.ToArray());
        } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-08-13T18:01:53.600

```
private DataTable toDataTable(List<RetirementDiskModelDto> retirementDiskModelDtos)
        {
            DataTable result = new DataTable();
            foreach (var col in retirementDiskModelDtos.FirstOrDefault().Items)
                result.Columns.Add(col.Key);

            foreach (var row in retirementDiskModelDtos)
            {
                DataRow newrow = result.NewRow();
                foreach (var col in retirementDiskModelDtos.FirstOrDefault().Items)
                    newrow[col.Key] = col.Value;
                result.Rows.Add(newrow);
            }
            return result;
        } 
```

# c# - C# Lotus Notes - 发送的邮件不在

> ID：15293655
> 
> 赞同：2
> 
> 时间：2013-03-08T12:06:39.363
> 
> 标签：c#, email, lotus-notes, lotus

我正在使用 Lotus Notes 从 C# 发送邮件，但发送的邮件不在数据库中，并且在输出文件夹中看不到。

我的代码是：

```
_notesSession = new NotesSession();
string sPassword = "";
_notesSession.Initialize(sPassword);
string sServer = "";
string sFile = "data\mailfilename.nsf";
_notesDataBase=_notesSession.GetDatabase(sServer, sFile, false);
// not: _notesDataBase=_notesSession(GetDatabase(sServer, sFile, false));
if (!_notesDataBase.IsOpen) _notesDataBase.Open();
_notesDocument = _notesDataBase.CreateDocument();
_notesDocument.SaveMessageOnSend = true;
.
.
.
_notesDocument.Save(true,false);
_ItemValue = _notesDocument.GetItemValue("SendTo");
_notesDocument.Send(false, ref _ItemValue); 
```

如果我在发送邮件之前检查 _notesDocument 的值，我会在 CreateDocument() 之后看到以下错误消息：

FolderReferences = "((Domino.NotesDocumentClass)(_notesDocument)).FolderReferences" hat eine Ausnahme vom Typ "System.Runtime.InteropServices.COMException" verursacht。（...导致了类型为...的异常） base {System.Runtime.InteropServices.ExternalException} = {“数据库上未启用文件夹引用”}

顺便说一句，我还尝试将 sFile 替换为完全限定的路径 (c:....nsf)，但结果是一样的。

谁能给我一个提示，如何将邮件保存在输出文件夹中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T00:38:48.893

这条线让我觉得很奇怪：

```
_notesDataBase=_notesSession(GetDatabase(sServer, sFile, false)); 
```

不应该是：

```
_notesDataBase= _notesSession.GetDatabase(sServer, sFile, false); 
```

# blackberry - 黑莓动画弹出屏幕

> ID：15293657
> 
> 赞同：1
> 
> 时间：2013-03-08T12:06:43.767
> 
> 标签：blackberry, blackberry-jde

我必须为一个`PopupScreen`类实现放大和缩小动画。我已经检查`TransitionContext`和`UiEngineInstance`屏幕过渡效果，但放大和缩小效果是从屏幕的中心位置动画的。当用户单击按钮并需要从按钮位置设置动画（放大和缩小）时，我正在显示此弹出窗口。

我怎样才能完成上面的动画效果？

# html - 如何从 xml 中提取 html 文本？（Parser Rapture XML，语言 Objective C）

> ID：15293670
> 
> 赞同：0
> 
> 时间：2013-03-08T12:07:35.833
> 
> 标签：html, ios, objective-c, xml

使用 xml 解析器可以提取 html 文本吗？

详细解释：我有这个简单的xml

```
<?xml version="1.0" encoding="iso-8859-1"?>
<eventi>
<evento><id_evento>4553</id_evento><descrizione>Lorem Ipsum<a href='http://www.yea.it/yea.asp' target='_blank'><span class='U'>Vai alla pagina di gioco</span></a></descrizione></evento>
</eventi> 
```

我正在用 rapture XML 解析它，同时为 IOS 开发应用程序。当我做

```
rootXML = [RXMLElement elementFromURL:[NSURL URLWithString:[NSString stringWithFormat:@"%@%@", indXMLdettaglioEvento, idElemento]]];
[rootXML iterateWithRootXPath:@"//evento" usingBlock: ^(RXMLElement *datiXML) {
      NSLog(@"%@",[datiXML child:@"descrizione"].text);;
]} 
```

[datiXML child:@"descrizione"].text 的 nslog 返回没有 html 标记的文本。有可能让它返回整个html吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T12:27:43.320

您可以使用一些开源库，如 TinyXML、TouchXML 等来解析 XML 文档。

否则，您可以使用 NSXMLParser 编写自己的解析器。

希望这可以帮助 ！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T13:27:40.640

```
 [datiXML child:@"descrizione"] 
```

返回一个已解析的 XML 项，其中包含 Lorem Ipsum 文本，但它本身也有子项！我想您会发现第一个孩子将成为您的链接锚的 XML 项：

```
 [[dataiXML child::@"descrizione"] child: @"a"]  => XML item for link
 [[[dataiXML child::@"descrizione"] child: @"a"] child: @"span"] => XML item for span 
```

所以你需要遍历整个树来解析你的xHTML——但我想你会发现它就在那里。

正如之前的评论者所说，许多有效的 HTML 页面不是有效的 XML。并且许多“工作”的 HTML 页面是无效的！因此，这不是编写 Web 浏览器的好策略。但这不是我们在这里所做的；如果您正在与之交谈的服务提供 XML，那么使用 XML 解析器来解析它是非常有意义的！

# c# - 使用 DQS API

> ID：15293671
> 
> 赞同：0
> 
> 时间：2013-03-08T12:07:39.943
> 
> 标签：c#, master-data-services

**要求：** 我们使用 SQL 提供的 DQS 客户端创建了 DQS 知识库、域、域值/规则。现在，我们需要使用 API 从 .Net 应用程序调用 DQM 知识库、域值、规则。用户应该能够提供输入值并选择域、值/规则。用户应该通过操作执行的置信度等属性获得更正的输出值 我们可以使用 SSIS 实现这一点，但我们正在寻找可用于 ASP .net 客户端应用程序的 API。方法：到目前为止，我们采用的方法是配置 Master Data Manager Web 服务，这允许以编程方式使用 Master Data Service 的功能（DQS 可以与 Master Data Service 集成）。此 WCF 服务具有一组数据质量服务操作，例如 DataQualityCleansingOperationCreate、DataQualityKnowledgeBasesGet、DataQualityMatchingOperationCreate、DataQualityOperationStart、DataQualityOperationResultsGet。参考：[http://msdn.microsoft.com/en-in/library/hh230995.aspx](http://msdn.microsoft.com/en-in/library/hh230995.aspx)

**问题：** 我们无法确定这些操作的确切执行顺序。我们试图找出，我们如何为这些操作提供输入值，如何选择要执行的操作，如何关联域、值、规则、对操作的引用。如何读取结果对象。任何帮助/指针或替代方法表示赞赏。

提前致谢。唵

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T09:47:52.523

您不能以编程方式使用/访问 DQS 功能，因为当前版本的 DQS 不支持该功能。

DQS 不会在 SQL Server 2012 中提供任何公共 API 这一事实清楚地记录在 TechNet Wiki 上 DQS 常见问题解答的 Q.12 中：http: [//social.technet.microsoft.com/wiki/contents/articles/3919.data -quality-services-dqs-faq.aspx#Q_12_Will_DQS_provide_public_APIs](http://social.technet.microsoft.com/wiki/contents/articles/3919.data-quality-services-dqs-faq.aspx#Q_12_Will_DQS_provide_public_APIs)。

谢谢，

维韦克

# c# - SQLTransaction 已完成错误

> ID：15293673
> 
> 赞同：14
> 
> 时间：2013-03-08T12:07:41.293
> 
> 标签：c#, .net, ado.net, transactionscope

我在我的应用程序中遇到了一次以下错误。

> 此 SQLTransaction 已完成；它不再可用

堆栈跟踪附在下面——它说关于`Zombie Check`和`Rollback`。

代码中的错误是什么？

注意：此错误仅出现一次。

**更新**

来自[MSDN - SqlTransaction.Rollback 方法](http://msdn.microsoft.com/en-us/library/zayx5s0h.aspx)

> 如果连接终止或事务已在服务器上回滚，则回滚会生成 InvalidOperationException。

从[僵尸检查交易 - 错误](http://blogs.msdn.com/b/dataaccesstechnologies/archive/2010/08/24/zombie-check-on-transaction-error-this-sqltransaction-has-completed-it-is-no-longer-usable.aspx)

> 我在各种应用程序中看到此错误的最常见原因之一是在我们的应用程序中**共享**SqlConnection。

**代码**

```
public int SaveUserLogOnInfo(int empID)
{
        int? sessionID = null;
        using (SqlConnection connection = new SqlConnection(connectionString))
        {
            connection.Open();
            SqlTransaction transaction = null;
            try
            {
                transaction = connection.BeginTransaction();
                sessionID = GetSessionIDForAssociate(connection, empID, transaction);

                    //Other Code

                //Commit
                transaction.Commit();
            }
            catch
            {
                //Rollback
                if (transaction != null)
                {
                    transaction.Rollback();
                    transaction.Dispose();
                    transaction = null;
                }

                //Throw exception
                throw;
            }
            finally
            {
                if (transaction != null)
                {
                    transaction.Dispose();
                }
            }
        }

        return Convert.ToInt32(sessionID,CultureInfo.InvariantCulture);

   } 
```

**堆栈跟踪**

![在此处输入图像描述](../Images/4cdc629853dad734cf50ea52af46ae5d.png)

* * *

**参考**：

1.  [什么是僵尸交易？](https://stackoverflow.com/questions/4043440/what-is-zombie-transaction)
2.  [僵尸检查交易 - 错误](http://blogs.msdn.com/b/dataaccesstechnologies/archive/2010/08/24/zombie-check-on-transaction-error-this-sqltransaction-has-completed-it-is-no-longer-usable.aspx)
3.  [SqlTransaction 已完成](https://stackoverflow.com/questions/611700/sqltransaction-has-completed)
4.  [http://forums.asp.net/t/1579684.aspx/1](http://forums.asp.net/t/1579684.aspx/1)
5.  [“此 SqlTransaction 已完成；它不再可用。”... 配置错误？](https://stackoverflow.com/questions/6358806/this-sqltransaction-has-completed-it-is-no-longer-usable-configuration-er)
6.  [dotnet.sys-con.com - SqlClient 连接池暴露](http://dotnet.sys-con.com/node/39040)
7.  [线程中止留下僵尸事务和损坏的 SqlConnection](https://stackoverflow.com/questions/6219298/thread-abort-leaves-zombie-transactions-and-broken-sqlconnection)

* * *

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T12:18:02.873

您应该将一些工作留给编译器，以便为您将其包装在`try`/ `catch`/`finally`中。

此外，如果在阶段发生问题或与服务器的连接中断，您应该期望`Rollback`偶尔会引发异常。`Commit`因此，您应该将其包装在`try`/`catch`中。

```
try
{
    transaction.Rollback();
}
catch (Exception ex2)
{
    // This catch block will handle any errors that may have occurred 
    // on the server that would cause the rollback to fail, such as 
    // a closed connection.
    Console.WriteLine("Rollback Exception Type: {0}", ex2.GetType());
    Console.WriteLine("  Message: {0}", ex2.Message);
} 
```

[这是从MSDN 文档页面中](http://msdn.microsoft.com/en-us/library/zayx5s0h.aspx)完全复制的 Rollback method 。

我看到你担心你有一个僵尸交易。如果你粘贴了，听起来你没有问题。你的交易已经完成，你不应该再与它有任何关系。如果您持有它们，请删除对它的引用，然后忘记它。

* * *

来自[MSDN - SqlTransaction.Rollback 方法](http://msdn.microsoft.com/en-us/library/zayx5s0h.aspx)

> 如果连接终止或事务已在服务器上回滚，则回滚会生成 InvalidOperationException。

重新抛出一个新异常，告诉用户数据可能没有保存，并要求她刷新和查看

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-08T12:12:57.053

> 注意：此错误仅出现一次。

那么很难说太多；可能只是`// Other Code`等太久了，整个事情都被杀死了。也许您的连接已断开，或者管理员故意将其关闭，因为您正在阻止它。

> 代码中的错误是什么？

过于复杂化；它可以简单得多：

```
using (var connection = new SqlConnection(connectionString))
{
    connection.Open();
    using(var transaction = connection.BeginTransaction())
    {
        try
        {
            sessionID = GetSessionIDForAssociate(connection, empID, transaction);
            //Other Code
            transaction.Commit();
         }
         catch
         {
            transaction.Rollback();
            throw;
         }
    }
} 
```

出错的代码要少得多。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-06-07T09:15:33.710

我使用下面的代码可以重现这个错误，我使用 1000 个任务来执行 Sql，大约 300 个任务成功完成后，很多关于`timeout error`开始发生的异常`ExecuteNonQuery()`，

然后`This SqlTransaction has completed`将发生下一个错误，`transaction.RollBack();`并且其调用堆栈也包含`ZombieCheck()`.

（如果单程序1000个任务压力不够，可以同时执行多个编译好的exe文件，甚至多台电脑执行一个Database。）

所以我想导致这个错误的原因之一可能是连接中的错误，然后导致*事务*错误也发生。

```
Task[] tasks = new Task[1000];
for (int i = 0; i < 1000; i++)
{
    int j = i;
    tasks[i] = new Task(() =>
         ExecuteSqlTransaction("YourConnectionString", j)
        );
}

foreach (Task task in tasks)
{
    task.Start();
}       

/////////////    

public void ExecuteSqlTransaction(string connectionString, int exeSqlCou)
{

    using (SqlConnection connection = new SqlConnection(connectionString))
    {
        connection.Open();

        SqlCommand command = connection.CreateCommand();
        SqlTransaction transaction;

        // Start a local transaction.
        transaction = connection.BeginTransaction();

        // Must assign both transaction object and connection
        // to Command object for a pending local transaction
        command.Connection = connection;
        command.Transaction = transaction;

        try
        {
            command.CommandText =
                "select * from Employee";
            command.ExecuteNonQuery();

            // Attempt to commit the transaction.
            transaction.Commit();

            Console.WriteLine("Execute Sql to database."
                + exeSqlCou);
        }
        catch (Exception ex)
        {
            Console.WriteLine("Commit Exception Type: {0}", ex.GetType());
            Console.WriteLine("  Message: {0}", ex.Message);

            // Attempt to roll back the transaction.
            try
            {
                transaction.Rollback();
            }
            catch (Exception ex2)
            {
                // This catch block will handle any errors that may have occurred
                // on the server that would cause the rollback to fail, such as
                // a closed connection.
                Console.WriteLine("Rollback Exception Type: {0}", ex2.GetType());
                Console.WriteLine("  Message: {0}", ex2.Message);

            }
        }
    }
} 
```

此外，我发现如果我连续提交两次也会调用这个异常。

```
 transaction.Commit();
       transaction.Commit(); 
```

或者，如果在提交之前关闭连接也会调用此错误。

```
 connection.Close();
       transaction.Commit(); 
```

**更新：**

我发现我创建另一个新表并向其中插入 50 万条数据很奇怪，

然后用`select * from newtable`sql 使用 100000 个任务，同时运行 5 个程序，这次出现 Timeout Error，但是当`transaction.Rollback()`它没有调用`SQLTransaction has completed error`.

但是如果发生超时错误，则跳转到catch块中，在catch块中再做`transaction.Commit()`一次，`SQLTransaction has completed error`就会发生。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-30T15:05:27.427

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-10T10:53:33.847

**此消息仅仅是因为您编写的代码在事务已成功提交**后抛出异常。请尝试检查您在 Commit 方法之后编写的代码，或者**您可以使用 Try..Catch 和 finally Blocks 来处理它**:) .

# mysql - 从关系数据库表中删除重复记录

> ID：15293675
> 
> 赞同：0
> 
> 时间：2013-03-08T12:07:47.290
> 
> 标签：mysql, sql, duplicates, sql-delete

我有一个包含三列的数据库表。标识、用户标识、图书标识。在此表中，有一些重复项。一个 user_id 应该只有一个 book_id 的记录，但在某些情况下，一个 user_id 有几个 book_id。已经有几百万条记录，我想知道如何删除任何重复项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T12:13:42.403

尝试跟随。

SQL 服务器

```
WITH ORDERED AS
(
    SELECT id
    ROW_NUMBER() OVER (PARTITION BY [user_id] , [book_id] ORDER BY id ASC) AS rn
    FROM
    tableName
)
delete from tableName
where id in ( select id from ORDERED where rn != 1) 
```

MYSQL

```
delete from tableName
where id not in( 
    select MIN(id)from tableName    
    group by user_id, book_id
) 
```

**根据评论编辑 - 在 MySQL 中，您不能修改在 SELECT 部分中使用的同一个表**

这将解决问题。

```
delete from tableName
where id not in( 
    select temp.temp_id from (
        select MIN(id) as temp_id from tableName    
        group by user_id, book_id
    ) as temp
) 
```

这将只保留 (user_id, book_id) 的一种组合

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T12:10:32.683

如果您在下面执行此语句，它将删除所有重复记录，并为每个`user_ID`只留下最大的`ID``user_ID`

```
DELETE  a
FROM    tableName a
        LEFT JOIN
        (
            SELECT  user_ID, MAX(ID) max_ID
            FROM    tableName
            GROUP   BY user_ID
        ) b ON a.user_ID = b.user_ID AND
                a.ID = b.max_ID
WHERE   b.max_ID IS NULL 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/24209/6)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T12:47:22.893

希望此查询将允许您删除重复项：

```
DELETE bl1 FROM book_log bl1
JOIN book_log bl2
ON (
    bl1.id > bl2.id AND
    bl1.user_id = bl2.user_id AND
    bl1.book_id = bl2.book_id
); 
```

[演示](http://www.sqlfiddle.com/#!2/ecd54/2)

# c# - 对 ComboBoxItem 的 Tag 属性进行绑定

> ID：15293679
> 
> 赞同：1
> 
> 时间：2013-03-08T12:08:01.533
> 
> 标签：c#, wpf, xaml

我有以下语法，我想对 ComboboxItem 的 Tag 属性进行数据绑定。那可能吗？

```
 <ComboBox Name="LanguageCombo" VerticalAlignment="Center"
            SelectionChanged="ComboBox_SelectionChanged" Margin="5,1,0,1"
            SelectedValue="{Binding Source={x:Static prop:ToolsOptionsSettings.Default},Path=ToolsOptionsLanguage, Mode=TwoWay}" >
     <ComboBoxItem Tag="en-US" Content="{DynamicResource English}"></ComboBoxItem>
     <ComboBoxItem Tag="de-DE" Content="{DynamicResource German}"></ComboBoxItem>
     <ComboBoxItem Tag="ja-JP" Content="{DynamicResource Japanese}"></ComboBoxItem>
  </ComboBox> 
```

ToolsOptionsLanguage - 例如，返回一个类似于 en-US 的字符串，它是 Tag 属性的值。

谢谢你。

# javascript - 从 Wikipedia 获取随机摘录（Javascript，仅限客户端）

> ID：15293680
> 
> 赞同：4
> 
> 时间：2013-03-08T12:08:03.907
> 
> 标签：javascript, ajax, jsonp, wikipedia

我有一个网页，它要求用户输入一段文本，然后对其执行一些操作。为了向懒惰的用户演示它，我想添加一个“我感到幸运”按钮，该按钮将从维基百科中获取一些随机文本并填充输入。

如何使用 Javascript 从随机的 Wikipedia 文章中获取文本序列？

我发现了一些使用[Wikipedia API](http://en.wikipedia.org/w/api.php)[获取](https://stackoverflow.com/questions/2560264/fetch-excerpt-from-wikipedia-article)和[解析](https://stackoverflow.com/questions/1565347/get-first-lines-of-wikipedia-article)文章的示例，但它们往往是服务器端的。我正在寻找一种完全从客户端运行并且不会被[同源策略](https://stackoverflow.com/questions/2067029/getting-around-same-origin-policy-in-javascript-without-server-side-scripts)破坏的解决方案。

注意随机胡言乱语是不够的；我需要人类可读的有意义的句子。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-08T12:08:03.907

我的答案建立在[此处建议](https://stackoverflow.com/questions/2374377/query-wikipedias-api-using-ajax-xmlhttprequest/2375948#2375948)的技术之上。

棘手的部分是制定正确的查询字符串：

> [http://en.wikipedia.org/w/api.php?action=query&generator=random&prop=extracts&exchars=500&format=json&callback=onWikipedia](http://en.wikipedia.org/w/api.php?action=query&generator=random&prop=extracts&exchars=500&format=json&callback=onWikipedia)

*   `generator=random`选择一个随机页面
*   `prop=extracts`并`exchars=500`检索 500 个字符的提取
*   `format=json`返回 JSON 格式的数据
*   `callback=`导致该数据被包装在一个函数调用中，因此它可以像任何其他数据一样被处理`<script>`并注入您的页面（请参阅[JSONP](https://stackoverflow.com/questions/2067472/what-is-jsonp-all-about)），从而绕过跨域障碍。
*   `requestid`可以选择添加，每次使用一个新值，以避免来自浏览器缓存的陈旧结果（IE9 中需要）

查询提供的页面看起来像这样（为了便于阅读，我添加了空格）：

```
onWikipedia(
  {"query":
    {"pages":
      {"12362520":
        {"pageid":12362520,
         "ns":0,
         "title":"Power Building",
         "extract":"<p>The <b>Power Building<\/b> is a historic commercial building in
                    the downtown of Cincinnati, Ohio, United States. Built in 1903, it
                    was designed by Harry Hake. It was listed on the National Register
                    of Historic Places on March 5, 1999\. One week later, a group of
                    buildings in the northeastern section of downtown was named a
                    historic district, the Cincinnati East Manufacturing and Warehouse
                    District; the Power Building is one of the district's contributing
                    properties.<\/p>\n<h2> Notes<\/h2>"
  } } } }
) 
```

当然，您每次都会得到不同的文章。

这是一个完整的工作示例，您可以在 JSBin 上**[试用。](http://jsbin.com/omujex/10/)**

```
<HTML><BODY>

  <p><textarea id="textbox" style="width:350px; height:150px"></textarea></p>
  <p><button type="button" id="button" onclick="startFetch(100, 500)">
    Fetch random Wikipedia extract</button></p>

  <script type="text/javascript">

    var textbox = document.getElementById("textbox");
    var button = document.getElementById("button");
    var tempscript = null, minchars, maxchars, attempts;

    function startFetch(minimumCharacters, maximumCharacters, isRetry) {
      if (tempscript) return; // a fetch is already in progress
      if (!isRetry) {
        attempts = 0;
        minchars = minimumCharacters; // save params in case retry needed
        maxchars = maximumCharacters;
        button.disabled = true;
        button.style.cursor = "wait";
      }
      tempscript = document.createElement("script");
      tempscript.type = "text/javascript";
      tempscript.id = "tempscript";
      tempscript.src = "http://en.wikipedia.org/w/api.php"
        + "?action=query&generator=random&prop=extracts"
        + "&exchars="+maxchars+"&format=json&callback=onFetchComplete&requestid="
        + Math.floor(Math.random()*999999).toString();
      document.body.appendChild(tempscript);
      // onFetchComplete invoked when finished
    }

    function onFetchComplete(data) {
      document.body.removeChild(tempscript);
      tempscript = null
      var s = getFirstProp(data.query.pages).extract;
      s = htmlDecode(stripTags(s));
      if (s.length > minchars || attempts++ > 5) {
        textbox.value = s;
        button.disabled = false;
        button.style.cursor = "auto";
      } else {
        startFetch(0, 0, true); // retry
      }
    }

    function getFirstProp(obj) {
      for (var i in obj) return obj[i];
    }

    // This next bit borrowed from Prototype / hacked together
    // You may want to replace with something more robust
    function stripTags(s) {
      return s.replace(/<\w+(\s+("[^"]*"|'[^']*'|[^>])+)?>|<\/\w+>/gi, "");
    }
    function htmlDecode(input){
      var e = document.createElement("div");
      e.innerHTML = input;
      return e.childNodes.length === 0 ? "" : e.childNodes[0].nodeValue;
    }

  </script>

</BODY></HTML> 
```

一个缺点`generator=random`是您经常会得到不是实际文章的讨论页面或生成的内容。如果有人可以改进查询字符串以将其限制为高质量的文章，那就太好了！

# c# - Json.net 在 Web API 中使用，但在 Razor 模板中调用 Json.Encode 时不使用

> ID：15293682
> 
> 赞同：3
> 
> 时间：2013-03-08T12:08:10.710
> 
> 标签：c#, json, razor, asp.net-mvc-4

我正在使用传统和 Web API 控制器构建 MVC 4 应用程序。由于我还使用 EF5 和代码优先，因此我具有导致循环引用的导航属性。我`JsonIgnore`在这些导航属性上使用属性以避免在序列化为 Json 时遇到循环引用循环。

这种方法完美地适用于我的 Web API 控制器，但是，当`Html.Raw(Json.Encode(Model))`在传统控制器的 Razor 模板中使用时，由于循环引用，我得到一个异常：

> 序列化对象时检测到循环引用

此异常发生在`System.Web.Script.Serialization.JavaScriptSerializer.SerializeValueInternal`. 我是否正确地解释了这一点，因为它`Json.Encode`似乎使用了不同的 Json 编码器（不是 json.net）？如何从 Razor 模板中使用 Web API 中使用的已配置 Json.Net 格式化程序？

我想出了一个解决方法，我使用以下类

```
namespace MyMVCProject.Globals
{
    public class Helper
    {
        public static string ToJson(object obj)
        {
            return JsonConvert.SerializeObject(obj, GlobalConfiguration.Configuration.Formatters.JsonFormatter.SerializerSettings);
        }
    }
} 
```

所以我可以在模板中使用它：`@Html.Raw(MyMVCProject.Globals.Helper.ToJson(Model))`

对于我期望的默认行为来说，这仍然感觉很尴尬`Json.Encode`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:27:04.860

没错，当您调用时，`Json.Encode`您使用的是 class 中的方法`System.Web.Helpers.Json`。

如果您想使用不同的 Json 编码器，只需使用它即可。您可以像以前那样使用帮助类来包装对 的调用`JsonConvert`并对其进行配置（包括 deisred 格式化程序）。

您可以包含包装类的命名空间，这样就可以避免编写命名空间。（您可以在 web.config 中从视图中执行此操作，您经常使用它）。

你不能做的是改变`Json.Encode`因为是一个静态类成员的行为，并且它的命名空间总是包含在剃刀视图中（因为你需要来自同一个命名空间的更多东西）。

您还可以将其实现为要序列化的对象的扩展方法。只有语法改变。

请记住，您还可以使用`[DataContract]`属性自定义序列化，[如本页所示](http://james.newtonking.com/archive/2009/10/23/efficient-json-with-json-net-reducing-serialized-json-size.aspx)。

您还可以使用附加到类定义中感兴趣的属性的其他 Json.Net 属性来自定义每个成员的序列化方式。

# html5-appcache - appcache 网络中的 SSL 路径在 Chrome 中受到限制

> ID：15293684
> 
> 赞同：2
> 
> 时间：2013-03-08T12:08:20.163
> 
> 标签：html5-appcache

在 Chrome 中看到一些奇怪的行为，不确定在使用 appcache 时是否是预期的行为，或者只是 Chrome。

它是一个单页应用程序，由我们的 RestAPI 提供支持，当在 HTTP 下请求 RestAPI 时它可以正常工作，但是一旦我们将 url 更改为 HTTPS 版本，它就会停止工作。Chrome 的控制台中没有太多（即任何）信息说明它决定停止工作的原因。

我们已经设法将其缩小到`NETWORK`appcache 文件中的部分，我们可以让它工作的唯一方法是使用`*`通配符，我们不想这样做，因为它绕过了 appcache 的全部点，并降低安全性（根据我阅读文档等的理解）。

我们已经尝试了 API url 的任何和所有变体（如在各种相关位置将它与通配符组合），但似乎没有一个工作（即使 a`https://*`不允许成功的请求）。

任何有经验的人都知道发生了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T18:07:54.740

需要一点澄清（见我的评论），但与此同时：

根据规范，清单的`NETWORK`行为确实可以通过减少在线和离线行为之间的差异来使“离线应用程序的测试更简单”。实际上，它只是增加了另一个问题。

默认情况下，任何不在清单中显式（在清单文件中列出）、隐式缓存的一部分（指向清单的已访问页面）或被`FALLBACK`前缀覆盖的任何内容都将无法加载，即使您'在线，除非 url 列在`NETWORK`section 或`NETWORK`section lists 中`*`。

通配符在该部分中没有特殊含义`NETWORK`，如果您列出`http://whatever.com/*`它将允许对该 url 的请求，因为星号是 url 中的有效字符。唯一的特殊情况是 single `*`，这意味着“允许页面对不在缓存中的任何资源进行网络请求”。

Basically, using `*` in `NETWORK` isn't a security risk, in fact it's probably what you want to do, every AppCache site I've built uses it.

I drew this flow chart to try and explain how appcache loads pages and resources:

[![Appcache flow chart](../Images/3d4fe4bf627855e394745160a94de8d7.png)](http://www.flickr.com/photos/jaffathecake/8015087167/sizes/c/in/photostream/)

# google-maps-api-3 - 使用下拉框在 Google Fusion Map 中的图层之间切换

> ID：15293686
> 
> 赞同：0
> 
> 时间：2013-03-08T12:08:40.240
> 
> 标签：google-maps-api-3, google-fusion-tables

已经成功地遵循了一些 Fusion Map 示例，在这里得到了一些人的帮助。我正在尝试做一些我能够找到的例子......

我的地图包含 3 个图层，但我只想一次显示 2 个图层。因此，我在底部添加了一个下拉框，以便您可以在 2 个地图之间切换。我添加了一个变量“SecondLayerMap”，我*认为*（我至少尝试过）让下拉框更改这个变量。直到 3 周前我才写过任何 Java（或任何其他编程语言），所以这是一个陡峭的学习曲线！

[我见过一些人在类似情况下使用的一种方法是使用 1 个融合表，但在不同列的数据之间切换。我认为我不能这样做，因为每个表中的地理数据不同，我不希望它们同时显示。]

下一步将是使用地图中的开关更改其中一个图例，但在解决那个问题之前，我将从这个问题中学到什么...

谢谢你的帮助。

```
 <meta charset="UTF-8">
    <title>Smithfield Foods UK</title>
    <link rel="stylesheet" type="text/css" media="all" href="FusionMapTemplate.css" />

    <script type="text/javascript"
        src="http://maps.google.com/maps/api/js?sensor=false"></script>

    <script type="text/javascript">

        function initialize() {
            var defaultZoom = 10;
            var defaultCenter = new google.maps.LatLng(52.6500, 1.2800);
            var locationColumn = 'geometry';
            var geocoder = new google.maps.Geocoder();
            var SecondLayerMap = '1RrCcRC-1vU0bfHQJTQWqToR-vllSsz9iKnI5WEk'

            var map = new google.maps.Map(document.getElementById('map-canvas'), {
                center: defaultCenter,
                zoom: defaultZoom,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            });

            var infoWindow = new google.maps.InfoWindow();

            // Initialize the first layer
            var FirstLayer = new google.maps.FusionTablesLayer({
                query: {
                select: 'geometry',
                from: '1hpGzmMBg8bDgPOGrAXvc0_QVLSBqQ0O5vpLbfUE'
                },
                map: map,
                styleId: 3,
                templateId: 5,
                suppressInfoWindows: true
            });
            google.maps.event.addListener(FirstLayer, 'click', function(e) {windowControl(e, infoWindow, map);
            });

            // Initialize the second layer
            var SecondLayer = new google.maps.FusionTablesLayer({
                query: {
                    select: 'PostCode',
                    from: SecondLayerMap
                },
                map: map,
                styleId: 2,
                templateId: 2,
                suppressInfoWindows: true
            });

            google.maps.event.addDomListener(document.getElementById('store'), 'change', function() {
                var SecondLayerMap = this.value;
                SecondLayer = new google.maps.FusionTablesLayer({
                    query: {
                        select: 'Postcode',
                        from: SecondLayerMap
                    }
                });

            });

            google.maps.event.addListener(SecondLayer, 'click', function(e) {windowControl(e, infoWindow, map);
            });

        var legend = document.createElement('div');
        legend.id = 'legend';
        var content = [];
        content.push('<h3>Density of Polish speaking population</h3>');
        content.push('<p><div class="color red1"></div>=>2%<4%');
        content.push('<p><div class="color red2"></div>=>4%<6%');
        content.push('<p><div class="color red3"></div>=>6%<10%');
        content.push('<p><div class="color red4"></div>=>10%<15%');
        content.push('<p><div class="color red5"></div>=>15%<20%')
        content.push('<p><img src="Smithfield Black.png" alt="Smithfield Logo" width ="120px">');
        legend.innerHTML = content.join('');
        legend.index = 1;
        map.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(legend);

        var legend2 = document.createElement('div');
        legend2.id = 'legend2';
        var content2 = [];
        content2.push("<h3>Smithfield Food's sales in Asda Stores</h3>");
        content2.push('<p><img src="red-dot.png"><£1,000');
        content2.push('<p><img src="yellow-dot.png">=>£1,000<£20,000');
        content2.push('<p><img src="green-dot.png">=>£20,000<£40,000');

        legend2.innerHTML = content2.join('');
        legend2.index = 1;
        map.controls[google.maps.ControlPosition.RIGHT_TOP].push(legend2);

        var zoomToAddress = function() {
            var address = document.getElementById('address').value;
            geocoder.geocode({
                address: address
            }, function(results, status) {
                if (status == google.maps.GeocoderStatus.OK) {
                    map.setCenter(results[0].geometry.location);
                    map.setZoom(10);
                } else {
                    window.alert('Address could not be geocoded: ' + status);
                }
            });
        };

        google.maps.event.addDomListener(document.getElementById('search'), 'click', zoomToAddress);
        google.maps.event.addDomListener(window, 'keypress', function(e) {
            if (e.keyCode ==13) {
            zoomToAddress();
        }
        });

        google.maps.event.addDomListener(document.getElementById('reset'), 'click', function() {
            map.setCenter(defaultCenter);
            map.setZoom(defaultZoom);
            layer.setOptions({
                query: {
                    select: 'geometry',
                    from: '1hpGzmMBg8bDgPOGrAXvc0_QVLSBqQ0O5vpLbfUE'
                }
            });
        });

        }

        // Open the info window at the clicked location
        function windowControl(e, infoWindow, map) {
            infoWindow.setOptions({
                content: e.infoWindowHtml,
                position: e.latLng,
                pixelOffset: e.pixelOffset
            });
            infoWindow.open(map);
        }

        google.maps.event.addDomListener(window, 'load', initialize);

    </script>
</head>

<body>
    <div id="map-canvas"></div>
    <div>
        <label>Enter an address:</label>
        <input type="text" id="address" value="Leeds">
        <input type="button" id="search" value="Search">
        <input type="button" id="reset" value="Reset">
    </div>
    <div>
        <select id="store">
            <option value ="1RrCcRC-1vU0bfHQJTQWqToR-vllSsz9iKnI5WEk">Store A</option>
            <option value ="1QX6QXhAiHXXAcS96RSAmE1Caj8tWebc6d-1_Tjk">Store B</option>
        </select>

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T12:39:25.977

用于`setOptions()`将查询应用于图层：

```
 google.maps.event.addDomListener(document.getElementById('store'), 
        'change', 
        function() {
        var SecondLayerMap = this.value;
        SecondLayer.setOptions({
            query: {
                select: 'Postcode',
                from: SecondLayerMap
            }
        }); 
```

# angularjs - 在 AngularJs 中，我如何命令更改位置并在新位置显示警报？

> ID：15293690
> 
> 赞同：0
> 
> 时间：2013-03-08T12:09:02.453
> 
> 标签：angularjs

我会尽量比我的问题标题更清楚:)

有一个控制器+部分用于创建一些实体，比如一个联系人。
当我点击保存按钮时，我可以`save`在控制器上调用我的自定义方法。在那里我通过回调
调用`contactResource.save`（这是我与 REST 对话的自定义资源） 。`success`

在`success`回调中，我想更改位置以转到联系人列表页面，当显示联系人页面时，我想显示一个警报，说一切都很好。

```
function save() {
    contactRepository.save(newContact, function success() {
        // Redirect to view and show toast
        console.log('Success');

        $location.path('/list');
        // DO SOMETHING TO LET THE LIST PAGE SHOW AN ALERT

    }, function error() {
        console.log('Error');
    });
} 
```

我能想到的唯一方法是创建某种服务来“发布”警报，下一页显示应该检查该服务是否有任何发布的警报，显示它然后删除它。

有没有更好/建议的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T12:18:01.250

嗯，我没想过要查找“angularjs *flash message* ”这个词。
看来[这个 SO 线程](https://stackoverflow.com/questions/12655689/passing-object-between-views-flash-message)有一个很好的答案。向安迪乔斯林和威尔文森特致敬。

# opencv - 将二维数组读入opencv mat

> ID：15293691
> 
> 赞同：1
> 
> 时间：2013-03-08T12:09:05.967
> 
> 标签：opencv

我需要在 opencv mat 中读取动态二维数组

```
int main()
{
Mat matrix;
double **theArray;
int numOfRows,numOfCols;

cin >> numOfRows ;
cin >> numOfCols ;

theArray = AllocateDynamicArray<double>(numOfRows,numOfCols);

matrix = Mat(numOfRows,numOfCols,CV_64FC1,&theArray);

string filename = "IN.xml";
FileStorage fs1(filename, FileStorage::WRITE);
fs1.open(filename, FileStorage::WRITE);
fs1 << "locsINMat"          << matrix;  
fs1 << "descriptorsINMat"   << matrix;
fs1.release();
cout << "---------------------" << endl;

FreeDynamicArray(theArray);

}
template <typename T> 
T **AllocateDynamicArray( int nRows, int nCols)
{
      T **dynamicArray;

      dynamicArray = new T*[nRows];
      for( int i = 0 ; i < nRows ; i++ )
      dynamicArray[i] = new T [nCols];

      return dynamicArray;
}

template <typename T>
void FreeDynamicArray(T** dArray)
{
      delete [] *dArray;
      delete [] dArray;
} 
```

我收到此异常：GP.exe 中 0x5d08f1aa 处的未处理异常：0xC0000005：访问冲突读取位置 0x003f4000。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T12:12:05.230

```
float data[2][5] = {{1,2,3,4,5},{7,8,9,10,11}}; 
A = Mat(2, 5, CV_32FC1, &data); 
```

不会抛出任何错误。你的行和列是否正确？

对于动态内存分配：我认为内存分配应该是这样的：

```
double **theArray;
theArray= (double**)malloc(numOfRows* sizeof(double*));

for(i = 0; i < numOfRows; i++)
  theArray[i] = (double*)malloc(numOfCols* sizeof(double)); 
```

# facebook - Facebook 最近改变了他们处理事件中图片的方式。更改后如何获取活动图片？

> ID：15293693
> 
> 赞同：4
> 
> 时间：2013-03-08T12:09:26.523
> 
> 标签：facebook, facebook-graph-api, facebook-events

Facebook 最近改变了他们在事件中处理图片的方式。现在，您可以上传一张照片，当您将活动发布到某人的墙上或群组中时，该照片将显示，您可以将其用作封面。

我如何获得该图像？

在我使用这个查询之前

```
 $fql[$id] =
            "SELECT
                eid,
                name,
                description,
                start_time,
                end_time,
                venue,
                location,
                update_time,
                has_profile_pic,
                pic_big
            FROM
                event
            WHERE
                eid IN ($imploded_eids) AND start_time > $time"; 
```

但是现在 pic_big 正在为大多数事件返回，![在此处输入图像描述](../Images/069da6fe0c0fbfb25569ab6c86e1374d.png) 我该怎么办？

编辑 - 即使我使用 event_id/picture，我也会为新事件获得该图像，正如您从这个事件 546510352049607/picture 中看到的那样，它有一张封面照片[https://www.facebook.com/events/546510352049607/](https://www.facebook.com/events/546510352049607/)

EDIT2 - 我还在facebook 上为此打开了一个[错误](https://developers.facebook.com/bugs/175306732618524)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:12:21.403

封面照片有一个专用字段：

```
pic_cover (struct): Cover picture of Event 
```

> 从事件中选择 pic_cover，其中 eid=546510352049607

`pic_cover`可能会给，`null`但这[是另一个问题](https://stackoverflow.com/questions/15152316/fql-event-pic-cover-returns-null)。问题解决了，否则这个问题是重复的。

# javascript - Blob 构造函数浏览器兼容性

> ID：15293694
> 
> 赞同：33
> 
> 时间：2013-03-08T12:09:30.373
> 
> 标签：javascript, arrays, constructor, blob

我正在开发一个应用程序，我在其中接收存储在 uint8Array 中的图像数据。然后我将此数据转换为 Blob，然后构建图像 url。

从服务器获取数据的简化代码：

```
var array;

var req = new XMLHttpRequest();
var url = "img/" + uuid + "_" +segmentNumber+".jpg";
req.open("GET", url, true);
req.responseType = "arraybuffer";
req.onload = function(oEvent) {
    var data = req.response;    
    array = new Int8Array(data);      
}; 
```

构造函数：

```
out = new Blob([data], {type : datatype} ); 
```

Blob 构造函数引起了问题。它适用于除移动设备和桌面设备上的 Chrome 之外的所有浏览器。

使用 Blob：

```
// Receive Uint8Array using AJAX here
// array = ...
// Create BLOB
var jpeg = new Blob( [array.buffer], {type : "image/jpeg"});
var url = DOMURL.createObjectURL(jpeg);
img.src = url; 
```

**桌面 Chrome**给我一个**警告**：`ArrayBuffer values are deprecated in Blob Constructor. Use ArrayBufferView instead.`

**移动 Chrome**给我一个**错误**：`illegal constructor`

如果我将构造函数更改为在 Chrome 上工作，它在其他浏览器上会失败。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-08T20:38:10.790

所以，这实际上是两个不同的问题。桌面 Chrome 警告是 chrome 中的一个[错误](https://bugs.webkit.org/show_bug.cgi?id=88389)，自 2013-03-21 以来已修复。

移动 Chrome 给你一个 TypeError 因为不支持 blob 构造函数。相反，您必须使用旧的 BlobBuilder API。BlobBuilder API 具有[特定于浏览器](https://developer.mozilla.org/en-US/docs/DOM/BlobBuilder#Browser_compatibility)的BlobBuilder 构造函数。FF6 - 12、Chrome 8-19、Mobile Chrome、IE10 和 Android 3.0-4.2 就是这种情况。

```
var array = new Int8Array([17, -45.3]);

try{
  var jpeg = new Blob( [array], {type : "image/jpeg"});
}
catch(e){
    // TypeError old chrome and FF
    window.BlobBuilder = window.BlobBuilder || 
                         window.WebKitBlobBuilder || 
                         window.MozBlobBuilder || 
                         window.MSBlobBuilder;
    if(e.name == 'TypeError' && window.BlobBuilder){
        var bb = new BlobBuilder();
        bb.append(array.buffer);
        var jpeg = bb.getBlob("image/jpeg");
    }
    else if(e.name == "InvalidStateError"){
        // InvalidStateError (tested on FF13 WinXP)
        var jpeg = new Blob( [array.buffer], {type : "image/jpeg"});
    }
    else{
        // We're screwed, blob constructor unsupported entirely   
    }
} 
```

小提琴：http: [//jsfiddle.net/Jz8U3/13/](http://jsfiddle.net/Jz8U3/13/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T09:56:57.363

让它与您的代码一起使用。我只需要更改一些小细节：

```
if(e.name == 'TypeError' && window.BlobBuilder){
        var bb = new BlobBuilder();
        bb.append(data);
        out = bb.getBlob(datatype);
        console.debug("case 2");
    } 
```

> bb.append（数据）；// 数据必须不带括号

我现在适用于所有浏览器的函数（构造函数）：

```
var NewBlob = function(data, datatype)
{
    var out;

    try {
        out = new Blob([data], {type: datatype});
        console.debug("case 1");
    }
    catch (e) {
        window.BlobBuilder = window.BlobBuilder ||
                window.WebKitBlobBuilder ||
                window.MozBlobBuilder ||
                window.MSBlobBuilder;

        if (e.name == 'TypeError' && window.BlobBuilder) {
            var bb = new BlobBuilder();
            bb.append(data);
            out = bb.getBlob(datatype);
            console.debug("case 2");
        }
        else if (e.name == "InvalidStateError") {
            // InvalidStateError (tested on FF13 WinXP)
            out = new Blob([data], {type: datatype});
            console.debug("case 3");
        }
        else {
            // We're screwed, blob constructor unsupported entirely   
            console.debug("Errore");
        }
    }
    return out;
} 
```

# java - 如何将 JSON null 反序列化为 NullNode 而不是 Java null？

> ID：15293697
> 
> 赞同：3
> 
> 时间：2013-03-08T12:09:34.367
> 
> 标签：java, jackson

注意：杰克逊 2.1.x。

问题很简单，但到目前为止我找不到解决方案。我浏览了现有的文档等，但找不到答案。

基类是这样的：

```
@JsonTypeInfo(use = Id.NAME, include = As.PROPERTY, property = "op")

@JsonSubTypes({
    @Type(name = "add", value = AddOperation.class),
    @Type(name = "copy", value = CopyOperation.class),
    @Type(name = "move", value = MoveOperation.class),
    @Type(name = "remove", value = RemoveOperation.class),
    @Type(name = "replace", value = ReplaceOperation.class),
    @Type(name = "test", value = TestOperation.class)
})

public abstract class JsonPatchOperation
{
    /*
     * Note: no need for a custom deserializer, Jackson will try and find a
     * constructor with a single string argument and use it
     */
    protected final JsonPointer path;

    protected JsonPatchOperation(final JsonPointer path)
    {
        this.path = path;
    }

    public abstract JsonNode apply(final JsonNode node)
        throws JsonPatchException;

    @Override
    public String toString()
    {
        return "path = \"" + path + '"';
    }
} 
```

有问题的课程是这样的：

```
public abstract class PathValueOperation
    extends JsonPatchOperation
{
    protected final JsonNode value;

    protected PathValueOperation(final JsonPointer path, final JsonNode value)
    {
        super(path);
        this.value = value.deepCopy();
    }

    @Override
    public String toString()
    {
        return super.toString() + ", value = " + value;
    }
} 
```

当我尝试反序列化时：

```
{ "op": "add", "path": "/x", "value": null } 
```

我希望将 null 值反序列化为 a `NullNode`，而不是 Java null。到目前为止，我找不到办法做到这一点。

你如何做到这一点？

（注意：具体类的所有构造函数都`@JsonCreator`带有适当的`@JsonProperty`注释——它们可以正常工作，我唯一的问题是 JSON 空处理）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T12:35:07.120

好吧，好吧，我没看够文档，其实很简单。

有一个[JsonNodeDeserializer](http://fasterxml.github.com/jackson-databind/javadoc/2.1.1/com/fasterxml/jackson/databind/deser/std/JsonNodeDeserializer.html)实现`JsonDeserializer`，您可以对其进行扩展。并且`JsonDeserializer`有一个[.getNullValue() 方法](http://fasterxml.github.com/jackson-databind/javadoc/2.1.1/com/fasterxml/jackson/databind/JsonDeserializer.html#getNullValue%28%29)。

所以，一个自定义的反序列化器是为了：

```
public final class JsonNullAwareDeserializer
    extends JsonNodeDeserializer
{
    @Override
    public JsonNode getNullValue()
    {
        return NullNode.getInstance();
    }
} 
```

并且，在有问题的课程中：

```
@JsonDeserialize(using = JsonNullAwareDeserializer.class)
protected final JsonNode value; 
```

# erlang - Erlang：将元组加在一起？

> ID：15293703
> 
> 赞同：1
> 
> 时间：2013-03-08T12:09:58.713
> 
> 标签：erlang, tuples, addition, systemtime

我尝试这样做以使新日期比当前系统时间早 90 秒：

```
12> {{00,00,00},{00,01,30}}+erlang:localtime().
** exception error: an error occurred when evaluating an arithmetic expression
     in operator  +/2
        called as {{0,0,0},{0,1,30}} + {{2013,3,8},{6,3,33}} 
```

有没有简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T12:30:02.430

你不能只在 erlang 中添加元组。您可以在元组中添加单个整数，但要操纵时间，您应该使用`calendar`模块（[docs](http://www.erlang.org/doc/man/calendar.html)）：

```
1> Added = calendar:datetime_to_gregorian_seconds(calendar:local_time()) + 90.
63529954043
2> calendar:gregorian_seconds_to_datetime(Added).
{{2013,3,8},{9,27,23}} 
```

# php - 为什么这个 Getter 和 Setter 的行为是这样的？

> ID：15293712
> 
> 赞同：1
> 
> 时间：2013-03-08T12:10:19.007
> 
> 标签：php, oop

我最近遇到了这个代码问题，并且非常不清楚它为什么会产生这些结果。

```
Class Magic {
   public $a ="A";
   protected $b = array( "a"=>"A", "b"=>"B", "c"=>"C");
   protected $c = array(1,2,3);

   public function __get($v ) {
      echo "$v,";
      return $this->b[$v]; //internal so fine with protected.
   }

   public function __set($var, $val ) {
      echo "$var: $val,";
      $this->$var = $val;
   }
}

$m = new Magic();

//1
//echo $m->a;
//prints A

//2
//echo $m->a;
//echo $m->b;
//prints Ab, B

//3
//echo $m->a.",," . $m->b; 
//prints b,A,,B 
```

我无法理解 3 号的行为。如果有人能解释我将非常感激，因为我在任何地方都找不到关于这种行为的任何答案。

我了解访问修饰符和属性可见性，但我必须有一些差距，因为我不确定为什么首先打印“b”，因为允许调用受保护属性的 getter 这样做。

此外，我会认为“A”会首先打印（如 1 和 2）。
奇怪的是为什么当它同时呼应“a”和“b”时，它的行为会有所不同。

我唯一能想到的是`echo`
- 使用逗号版本，依次评估和回显每个参数
- 点版本是不同的，必须先对其进行全面评估，然后才能按要求回显。
但不确定（它如何评估？）。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T12:23:26.390

这是因为`echo`in`__get`方法。如果您`echo $m->a.",," . $m->b;`首先调用语句中的函数，则会调用该函数。所以`echo`in`__get`将首先被调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T12:24:40.040

这与 PHP OOP 无关，而是与操作数的评估顺序有关：

```
echo ($m->a . ",," . $m->b); 
```

是 3 个操作数的串联：

*   $m->a : 本身**返回**"A"
*   ,,:**返回**",," (duh)
*   $m->b 通过调用 $m->__get('b') 做了两件事：首先它**回**显“b”（在 getter 函数本身中），然后**返回**“B”进行连接。

因此，当 3 个操作数连接成一个字符串“A,,B”时，程序已经回显了“b”。然后将连接的字符串传递给您的命令 echo 以进行输出，因此最终结果为：“b,A,,B”

# c# - 如何在使用 C# protobuf-net 生成的 c++ 中反序列化“Serialized Protobuffer”

> ID：15293713
> 
> 赞同：2
> 
> 时间：2013-03-08T12:10:19.990
> 
> 标签：c#, c++, protocol-buffers, protobuf-net

我有一个结构

```
[ProtoContract]
    public struct TenprintTemplateStructure
    {
        [ProtoMember(1)]
        public byte[] FeatureTenprint { get; set; } //Tenpritn NTemplate's NBuffer

        [ProtoMember(2)]
        public int TemplateID { get; set; } //Template ID

        [ProtoMember(3)]
        public long TemplateSize { get; set; } //Template Size

        [ProtoMember(4)]
        public string PersonID { get; set; } //Person ID

        [ProtoMember(5)]
        public int IsActive { get; set; } // Person's Status
    }; 
```

我正在使用长度前缀为 Fixed32 的 c# proto-buf 将此结构的多个实例序列化到一个文件中。代码如下，（tenprintTemplateStruct 是我正在编写的结构）

```
ProtoBuf.Serializer.SerializeWithLengthPrefix(stream, tenprintTemplateStruct, ProtoBuf.PrefixStyle.Fixed32, 0); 
```

我知道它可以使用 c++ 反序列化。我尝试了一些解决方案，但还没有成功。

以前有人做过吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T12:31:50.533

在 C++ 端，您需要执行 4 个步骤：

*   `protoc`使用该工具生成 C++ 代码；您可以手动编写 .proto 架构，也可以使用`string proto = Serializer.GetProto<TenprintTemplateStructure>();`（从您的 .NET 代码）作为起点
*   从输入中准确读取 4 个字节并将其解析为 32 位整数；`Fixed32`被记录为小端，所以：这样做
*   wrap you actual stream with a length-limited stream of this length; google provide [LimitingInputStream](https://developers.google.com/protocol-buffers/docs/reference/cpp/google.protobuf.io.zero_copy_stream_impl#LimitingInputStream) for this
*   follow the [C++ guide](https://developers.google.com/protocol-buffers/docs/cpptutorial) for actually deserializing - primarily [ParseFromIstream](https://developers.google.com/protocol-buffers/docs/reference/cpp/google.protobuf.message#Message)

# c# - 消息：无效的 JSON 原语：带有 Webmethod 的 ajax jquery 方法

> ID：15293717
> 
> 赞同：20
> 
> 时间：2013-03-08T12:10:30.577
> 
> 标签：c#, jquery, asp.net, asp.net-ajax

我使用数据值作为对象文字，而不是连接字符串，如[本答案中所述](https://stackoverflow.com/questions/15293091/sending-multiple-data-parameters-with-single-quote-with-jquery-ajax/15293209?noredirect=1#comment21581381_15293209)

我的代码如下：

```
$.ajax({    
  url: "../Member/Home.aspx/SaveClient",
  type: "POST",
  async: false,
  dataType: 'json',
  contentType: 'application/json; charset=utf-8',
  data: {
    "projectSoid": ProjectId,
    "startDate": StartDate,
    "endDate": EndDate,
    "clientManager": ClientManager
  },
  success: function(response) {
    if (response.d != "") {

    }
  },
  error: function(response) {
    var r = jQuery.parseJSON(response.responseText);
    alert("Message: " + r.Message);
    alert("StackTrace: " + r.StackTrace);
    alert("ExceptionType: " + r.ExceptionType);
  }
}) 
```

我的网络方法是这样的：

```
[WebMethod]
public static string SaveClient(string projectSoid, string startDate, 
     string endDate, string clientManager)
{
    ...
} 
```

但我收到以下错误：

> 消息：无效的 JSON 原语：projectSoid

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-03-08T13:49:47.237

您`contentType: 'application/json; charset=utf-8'`声称您将发送 JSON，但目前您的`data`财产没有保存 JSON。

您需要`data`使用以下方法将您的转换为 JSON `JSON.stringify`：

因此，将您的`data`属性更改为：

```
data: JSON.stringify({
    "projectSoid": ProjectId,
    "startDate": StartDate,
    "endDate": EndDate,
    "clientManager": ClientManager
}), 
```

您应该注意，`JSON.stringify`旧浏览器本身不支持该方法，因此您可能需要使用各种库之一提供实现，例如：

Douglas Crockford 的[JSON2 库。](https://github.com/douglascrockford/JSON-js/blob/master/json2.js)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-12T10:59:04.960

**客户端的Javascript**

```
 var items = [{ projectSoid: ProjectId, startDate: StartDate, endDate: EndDate, clientManager: ClientManager }];

                   $.ajax({
                       url: '"../Member/Home.aspx/SaveClient',
                       type: "POST",
                       data: JSON.stringify({ items: items }),

                       //data:  JSON.stringify("{DocKey : '" + DocKey + "',highlightText: '" +  JSON.stringify(text) + "',pageNo: '" + pgNo + "',left: '" + left + "',top: '" + top + "',width: '" + width + "',height: '" + height + "'}"),

                       //data: "{DocKey\":\""+ DocKey+"\",\"highlightText\":\""+ text +"\",\"pageNo\":\""+pgNo+"\",\"left\":\""+left+"\",\"top\":\""+top+",\"width\":\""+width+"\",\"height\":\""+ height +"}}",
                       // data: "{DocKey : '" + DocKey + "',highlightText: '" + text + "',pageNo: '" + pgNo + "',left: '" + left + "',top: '" + top + "',width: '" + width + "',height: '" + height + "'}",
                       contentType: "application/json; charset=utf-8",
                       dataType: "json",
                       beforeSend: function () {
                           alert("Start!!! ");
                       },
                       success: function (data) {
                           alert("Save data Successfully");
                       },
                       failure: function (msg) { alert("Sorry!!! "); evt.obj.deleteObject(); },
                       async: false

                   }); 
```

**代码背后的 Web 方法**

```
[WebMethod]       
 public static string SaveClient(object items)       {

    List<object> lstItems = new     JavaScriptSerializer().ConvertToType<List<object>>(items);

  Dictionary<string, object> dic = (Dictionary<string, object>)lstItems[0];

    } 
```

# android - 当我使用 ContextWrapper 和 Context 创建 Android WebView 对象时有什么区别？

> ID：15293724
> 
> 赞同：9
> 
> 时间：2013-03-08T12:10:50.503
> 
> 标签：android, webview, mutable-context-wrapper

**问题**：我想在 Android WebView 中预加载一个网页，并在 Activity 准备好时将其附加到 Activity。加载网页的触发点是在实际 Activity 被创建之前。所以我通过以下方式在服务中创建了一个 webview 对象。

```
MutableContextWrapper contextWrapper = new MutableContextWrapper(serviceContext.getApplicationContext());
this.webView = new WebView(contextWrapper); 
```

当创建需要显示此 webview 的 Activity 时，我只需创建一个框架布局并添加一个子视图，即此 webview 并调用 setContentView。这样，我的 webview 就会显示预加载的网页。我也做以下

```
contextWrapper.setBaseContext(CurrentActivity.this); 
```

这与上面指定的 ContextWrapper 对象相同。即使在此之后，webview 也不会绘制它能够在正常用例中绘制的 Javascript 警报。

即使当我这样做

```
ContextWrapper contextWrapper = new ContextWrapper(CurrentActivity.this);
this.webView = new WebView(contextWrapper);
this.webView.loadUrl(someUrl); 
```

WebView 无法弹出 JS 警报。我什至没有在日志中看到任何异常或致命标签。WebView 无法在其上绘制任何窗口。

这可以正常工作，这意味着直接使用当前活动的上下文创建 webView。

```
this.webView = new WebView(CurrentActivity.this);
this.webView.loadUrl(someUrl); 
```

据我所知， http: [//developer.android.com/reference/android/content/ContextWrapper.html](http://developer.android.com/reference/android/content/ContextWrapper.html)只是在它持有的基本上下文上执行与在构造函数中传递给它的操作相同的操作。

我的用例是这样的。我创建了一个带有[http://developer.android.com/reference/android/content/MutableContextWrapper.html](http://developer.android.com/reference/android/content/MutableContextWrapper.html)传递给它的 webView 对象。MutableContextWrapper 保存一些活动的上下文，或者它可以保存或应用程序上下文。当需要显示 webview 的实际活动开始时，我在 MutableContextWrapper 中切换上下文并通过将 webview 放入框架布局和 setContentView 来显示 webview。基本上，开始加载页面的触发器是在创建 Activity 之前，因此我想在 webview 中预加载页面，并在创建时将其附加到 Activity。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T21:40:12.800

看起来您正在从主 UI 线程创建 Web 视图（基于使用`serviceContext`）

这通常不是一个好主意，因为 Web 视图会期望其内部 Handler 绑定到主 UI 线程。

还有其他与此相关的线程：

[无法创建线程中的 WebView](https://stackoverflow.com/questions/8353840/a-webview-in-a-thread-cant-be-created)

在加载活动后（即在`onCreate`方法中）加载 webview 并简单地向用户显示“加载”指示器会更好。在加载页面之前，您可以隐藏 webview（使用`setVisibility`），并使用[WebViewClient](http://developer.android.com/reference/android/webkit/WebViewClient.html)侦听加载事件。

页面加载后，将 webview 上的可见性设置为`VISIBLE`

# clojure - 我可以将 Clojure 表单从一个包转换为另一个包吗？

> ID：15293727
> 
> 赞同：4
> 
> 时间：2013-03-08T12:11:04.000
> 
> 标签：clojure, namespaces, lisp, symbols

# 背景

我为 Emacs 编写了一个 hack，让我可以将 Clojure 表单从编辑器缓冲区发送到 REPL 缓冲区。它工作正常，除了如果两个缓冲区位于不同的命名空间中，复制的文本通常没有意义，或者更糟糕的是，它可能有意义但与编辑器缓冲区中的含义不同。

我想转换文本，使其在 REPL 缓冲区中有意义。

# Common Lisp 中的解决方案

在 Common Lisp 中，我可以使用以下函数来做到这一点：

```
;; Common Lisp

(defun translate-text-between-packages (text from-package to-package)
  (let* ((*package* from-package)
         (form (read-from-string text))
         (*package* to-package))
    (with-output-to-string (*standard-output*)
                           (pprint form)))) 
```

和一个示例使用：

```
;; Common Lisp

(make-package 'editor-package)
(make-package 'repl-package)

(defvar repl-package::a)

(translate-text-between-packages "(+ repl-package::a b)"
                                 (find-package 'editor-package)
                                 (find-package 'repl-package))
;; => "(+ A EDITOR-PACKAGE::B)" 
```

输入字符串和输出字符串中的包名限定是不同的——这正是解决包之间复制和粘贴文本问题所需要的。

（顺便说一句，有一些关于如何在 Common Lisp 进程中运行翻译代码以及在 Emacs 世界和 Common Lisp 世界之间移动内容的内容，但我对此表示满意，我不想在这里深入探讨。 )

# Clojure 中的非解决方案

这是 Clojure 的直接翻译：

```
;; Clojure

(defn translate-text-between-namespaces [text from-ns to-ns]
  (let [*ns* from-ns
        form (read-string text)
        *ns* to-ns]
    (with-out-str
      (clojure.pprint/pprint form)))) 
```

和一个示例使用：

```
;; Clojure

(create-ns 'editor-ns)
(create-ns 'repl-ns)

(translate-text-between-namespaces "(+ repl-ns/a b)"
                                   (find-ns 'editor-ns)
                                   (find-ns 'repl-ns))
;; => "(+ repl-ns/a b)" 
```

所以 Clojure 中的翻译功能什么也没做。这是因为 Common Lisp 和 Clojure 中的符号和包/命名空间的工作方式不同。

在 Common Lisp 中，符号属于一个包，并且符号包的确定发生在读取时。

在 Clojure 中，有充分的理由，符号不属于命名空间，并且符号命名空间的确定发生在评估时。

# 这可以在 Clojure 中完成吗？

所以，最后，我的问题是：我可以将 Clojure 代码从一个命名空间转换到另一个命名空间吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:00:28.527

我不了解您的用例，但这是一种将符号从一个命名空间转换为另一个命名空间的方法。

```
(require 'clojure.walk 'clojure.pprint)

(defn ns-trans-form [ns1 ns2 form]
  (clojure.walk/prewalk
    (fn [f] (if ((every-pred symbol? #(= (namespace %) ns1)) f)
                (symbol ns2 (name f))
                f))
    form))

(defn ns-trans-text [ns1 ns2 text]
    (with-out-str
      (->> text 
           read-string 
           (ns-trans-form ns1 ns2) 
           clojure.pprint/pprint)))

(print (ns-trans-text "editor-ns" "repl-ns" "(+ editor-ns/a b)" ))
;=> (+ repl-ns/a b) 
```

于是，`editor-ns/a`被转化为`repl-ns/a`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T10:55:21.910

（回答我自己的问题......）

鉴于从命名空间外部引用命名空间的非公共变量并不容易，因此没有简单的方法可以做到这一点。

根据[http://christophermaier.name/blog/2011/04/30/not-so-private-clojure-functions](http://christophermaier.name/blog/2011/04/30/not-so-private-clojure-functions)的想法，也许黑客是可能的。这将涉及遍历表单并创建新符号，这些符号解析为与原始表单中引用的变量具有相同值的新变量。也许我会在某个时候进一步调查，但不是现在。

# asp.net - 提高网站的性能？

> ID：15293739
> 
> 赞同：5
> 
> 时间：2013-03-08T12:11:53.233
> 
> 标签：asp.net, performance, web

在设计 ASP.net WebForm 应用程序时，要采取哪些重要步骤（或者如果您喜欢使用该术语，可以采取一些技巧）以确保最佳性能（在速度、稳定性和可伸缩性方面）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T12:21:49.880

1.  避免往返服务器
2.  尽可能让用户`AJAX`来电。
3.  实施缓存。
4.  尽可能避免使用 Viewstate

有关更多信息，请阅读这些链接。

*   [提高 Web 应用程序性能](http://dotnetslackers.com/articles/aspnet/ImproveWebApplicationPerformance.aspx)
*   [ASP.NET 网站性能改进](http://www.codeproject.com/Articles/36749/ASP-NET-Web-Site-Performance-Improvement)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T12:20:59.107

由于有很多事情会影响性能，因此很难提供这样的列表。我们可能会对您的代码做出不正确的假设，并且可能会专注于错误的领域，而您会因为我们认为理所当然的事情而遭受糟糕的表现。

话虽如此，总的来说，您可能会关注：

*   不要过度使用 ViewState。（我认为根本不使用它*，*但这完全是另一个问题。）
*   保持页面资源小（缩小文本、良好的图像编码等）。
*   确保页面资源在下载后被正确缓存。
*   尝试将大多数 UX 逻辑移动到客户端。（避免回发您可以在 JavaScript 中执行的操作，尽可能以小块异步获取数据等）

该列表可以继续下去，这只是应用程序的 Web 层。您很容易遇到由于服务器端代码缓慢或无法在浏览器中调试的服务器端资源依赖项（数据库等）而导致的站点性能问题。

所以重点是学习你的调试工具。通过浏览器工具（FireBug、Chrome 开发者工具等）、Visual Studio 调试（或任何其他可用于 .NET 代码的工具）、良好的日志记录，甚至分析工具的组合，您可以识别瓶颈并相应地调整系统.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T12:13:58.967

检查您的网站在谷歌页面速度：[点击](https://developers.google.com/speed/pagespeed/insights)

它会给你的问题。对于不需要的 style.images 等......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-02T09:24:41.747

如果您非常关心速度、稳定性和可扩展性，您可能首先会质疑 ASP 本身是否是一个好的折衷方案

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-06T14:14:32.913

当谈到 Web 应用程序的性能时，我们需要考虑很多事情，这篇文章将帮助您了解性能是从哪里开始的。在 Web 应用程序中，80% 的时间是前端需要性能优化，需要优化的是一个大问题，很难回答我发现这篇文章将帮助您了解 Web 性能优化 [Web 性能优化](http://blog.naveedcs.com/2014/08/06/understanding-web-performance-web-performance-optimization/)

# .net - HTML转PDF问题

> ID：15293742
> 
> 赞同：0
> 
> 时间：2013-03-08T12:11:57.773
> 
> 标签：.net, vb.net, pdf-generation

背景 - 具有用户身份验证的 ASP .Net 站点。页面是带有网格视图、面板、文本框、标签、表格等的常规 HTML

我正在尝试使用免费的 iText dll 将用户正在查看的当前网页转换为 PDF。

我有以下代码，我认为可以解决问题：

```
Dim myRequest As HttpWebRequest = HttpWebRequest.Create(Request.Url)

myRequest.Credentials = New NetworkCredential("administrator", "password")
myRequest.Method = "GET"

Dim myResponse As WebResponse = myRequest.GetResponse
Dim sr As New StreamReader(myResponse.GetResponseStream, System.Text.Encoding.UTF8)
Dim result As String = sr.ReadToEnd
sr.Close()

myResponse.Close()
HTMLToPDF(result) ' "This line sends the HTML to be converted into a PDF" 
```

不幸的是，这显示了带有一些文本的登录页面（文本是 //if (typeof(Sys) === 'undefined') throw new Error('ASP.NET Ajax client-side framework failed to load.'); // .style1 { 宽度：100%；} .style2 { 宽度：334 像素；} .style3 { 宽度：303 像素；})

由于该站点正在使用身份验证，我认为发生的事情是在发出请求时它需要用户名和密码，但正如您从上面的代码中看到的那样，我正在发送用户名和密码以查看它是否可以工作但它不是。

任何人都可以提出解决此问题或其他解决方法的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T11:33:24.607

好的，任何想知道的人......我拒绝了在我的配置文件中设置的所有用户，这导致了问题。调整以允许管理员解决了这个问题。

# jqgrid - 如果一行正在编辑，jqGrid onPaging 停止加载新页面

> ID：15293746
> 
> 赞同：2
> 
> 时间：2013-03-08T12:12:19.827
> 
> 标签：jqgrid

我有一个带有寻呼机的网格。我需要阻止寻呼机加载另一个页面，而当前页面上的一行正在进行内联编辑。所以当我创建网格时，我定义了 onPaging 函数

```
....
onPaging : function(){
        if (inEdit()>0){
            alert("Finish editing the current line");
            return 'stop';
        }
    }
.... 
```

函数 inEdit 只是计算有多少行有 attr 可编辑。

这可以完成这项工作，但是后来当我在停止分页时正在编辑的行上调用 restoreRow 函数时，该函数无法将该行恢复到以前的状态。

后期编辑：

稍后调用此函数取消编辑时出现问题

```
function cancelEdit(id){
    /*this line does nothing at all --> */ $('#list').jqGrid('restoreRow',id);
    //The only way restore worked is by calling a grid reload but that is not really a solution
    $('#list').trigger("reloadGrid", [{page:$('#list')[0].p.page}]);
    $('#'+id+' [name=editButton]').show();
    $('#'+id+' [name=submitButton]').hide();
    $('#'+id+' [name=cancelButton]').hide();
} 
```

PS：编辑/保存/取消/删除是自定义按钮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T15:56:43.347

我认为，如果您查看正在做的事情，但在 [jqGrid 上查看 Oleg 的帖子 - 内联编辑 - 检测脏/更改的单元格](https://stackoverflow.com/questions/6360512/jqgrid-inline-edit-detect-dirty-changed-cells) 并使用该标志来防止分页，您将能够完成您正在尝试做的事情。

# android - 我可以在android中为空的listview设置页脚吗？

> ID：15293751
> 
> 赞同：1
> 
> 时间：2013-03-08T12:12:30.783
> 
> 标签：android, android-layout

我想知道什么？
我对是否可以在 android 中的空 ListView 中添加页脚有点好奇。我检查了 ListView 页脚的文档，但他们没有提到与此相关的任何内容。所以只是想知道这是否可能？

为什么我需要这个？
实际上我的应用程序中有edittext（搜索框），它将接受用户输入的字符。基于这个输入的文本，我将在 DB 中进行一些搜索并在 ListView 中显示匹配结果。我打算做的是在 ListView 底部显示一个按钮（类似于页脚），它将为用户提供扩展的搜索选项。

一些代码供参考：

```
 @Override
public void onTextChanged(CharSequence s, int start, int before, int count)
{
}

@Override
public void afterTextChanged(Editable s)
{
    strGuestCardToSerach = s.toString();

    if(strGuestCardToSerach.equals(""))
    {
        if(listview.getFooterViewsCount() > 0)
        {
            listview.removeFooterView(footerView);
            listviewAdapter.notifyDataSetChanged();
        }
    }
    else
    {
        if(listview.getFooterViewsCount() == 0)
        {
            footerView = inflater.inflate(R.layout.footer_view_layout, null);
            listview.addFooterView(footerView);
            listview.setAdapter(recentGuestAdapter);
            listviewAdapter.notifyDataSetChanged();
        }
    }
}

@Override
public void beforeTextChanged(CharSequence arg0, int arg1, int arg2, int arg3)
{
} 
```

@Edit：
一旦您在 ListView 中至少有一个条目，它就可以工作。所以只是想了解是否可以将页脚添加到空的 ListView。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T09:49:45.137

我发布这个以防万一有人在寻找与我类似的功能。答案是否定的，您不能将页脚视图添加到空的 ListView。为了实现类似的功能，您将创建自己的布局并将其显式添加到 ListView 并管理其状态。

鲁佩什

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T12:15:26.000

我想您在 ListView 上使用 ListAdapter？只需将“页脚项”添加到您的 ArrayList/ 任何列表项。在 getView 方法中，检查该项目是否是您的页脚，然后在您拥有按钮或其他任何内容的位置设置自定义布局。只是问我是否不清楚我的意思。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-26T06:46:24.410

要在列表为空时实现此场景：创建适配器并为其分配布局：

1.  当列表不为空时，使用布局为其分配适配器。
2.  当列表为空时，分配列表一个虚拟适配器并具有一个初始值。
3.  不要在 getview 中为虚拟布局分配值或将虚拟视图的大小设置为 0 dp。所以你可以实现这个场景......进一步询问我已经解决了这个场景

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-26T11:08:02.180

```
public void addFooterView (View v)
Added in API level 1
Add a fixed view to appear at the bottom of the list. If addFooterView is called more than once, the views will appear in the order they were added. Views added using this call can take focus if they want.
Note: When first introduced, this method could only be called before setting the adapter with setAdapter(ListAdapter). Starting with KITKAT, this method may be called at any time. If the ListView's adapter does not extend HeaderViewListAdapter, it will be wrapped with a supporting instance of WrapperListAdapter.
Parameters
v
The view to add. 
```

# javascript - 从 jQuery 的 $.ajax 中的嵌套成功函数返回值？

> ID：15293752
> 
> 赞同：-1
> 
> 时间：2013-03-08T12:12:35.677
> 
> 标签：javascript, jquery, ajax, nested, return-value

我发现这个问题几乎完全相同：[Return value from nested function in Javascript](https://stackoverflow.com/questions/2611980/return-value-from-nested-function-in-javascript)

问题是该函数被传递给jQuery的`$.ajax`函数。这是我所拥有的：

```
function doSomething() {
    // Do some stuff here
    console.log(getCartInfo());
}

function getCartInfo() {
    var url = blog_location + '?reqCartData=1';

    $.ajax({
        url: url,
        type: 'get',
        success: function(data) {
            return data;  <------------- This
        }
    });
} 
```

`data`如果有意义的话，我需要返回doSomething 函数。我试图返回整个`$.ajax`函数，但返回了整个对象。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T12:19:41.080

发送回调函数：

```
function getCartInfo(onSuccess) {
    var url = blog_location + '?reqCartData=1';

    $.ajax({
        url: url,
        type: 'get',
        success: function(data) {
            onSuccess(data);
        }
    });
}

getCartInfo(function(data) {
    console.log(data);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T12:23:44.010

尝试这个

```
 function doSomething(date) {
    ........your data
}

function getCartInfo() {
    var url = blog_location + '?reqCartData=1';

    $.ajax({
        url: url,
        type: 'get',
        success: function(data) {
           doSomething(data);
        }
    });
} 
```

# wpf - WPF：如何实现 UIElement 可视化打印成多个页面？

> ID：15293757
> 
> 赞同：2
> 
> 时间：2013-03-08T12:13:03.920
> 
> 标签：wpf, printing, scrollviewer, uielement, multipage

我有几个控件，`ScrollViewer`打印时应该水平和垂直跨越多个页面。我当前的解决方案使用一系列滚动（水平和垂直方向）来实现打印。

为了使这个实现工作，需要解除 ScrollView 的内容并添加到一个新`ScrollViewer`的（新的实例`ScrollViewer`被调整为`PrintWidth`和高度以实现打印目标），结果原始视图将被清空。为了克服这个问题，我尝试克隆整个`ScrollViewer`，但这似乎因绑定而失败 -`DataGrid`在克隆的视觉对象中显示为空。

**是否有任何其他方法可以打印视觉元素，或者是否有任何其他方法（可能使用`VisualBrush`）来实现多页打印的目标？**

# javascript - 使用javascript动态获取对象名称

> ID：15293758
> 
> 赞同：0
> 
> 时间：2013-03-08T12:13:04.637
> 
> 标签：javascript, arrays, json, object

我有几个`objects`从 ajax 调用返回的 json：

```
...
main: [{
 0: { // i'm showing only one... have severals
    IMGNAM0: "856f070054d378fa5681332095257c3c94d5f858.jpg"
    IMGNAM1: "68dfda9de984e914b7027c4a3cda51fb375dd828.jpg"
    IMGNAM2: "da0a1a3f68af208baca5eae23900548b40adfbef.jpg"
    IMGNAM3: "c8b540f8bdfe054e3c888e800b380dd60a4ac371.jpg"
    IMGNAM4: "565eb06485c51123786a88b8d5537c6b45add950.jpg"
    IMGPAT0: "./static/uploaded_images/1/"
    IMGPAT1: "./static/uploaded_images/1/"
    IMGPAT2: "./static/uploaded_images/1/"
    IMGPAT3: "./static/uploaded_images/1/"
    IMGPAT4: "./static/uploaded_images/1/"
 }
}]
... 
```

所以，我需要动态获取这个 obj 名称，我用我正在尝试做的事情进行快速预览：

```
var mainlen = data.main.length-1; // get number of obj
for(var i = 0; i <= mainlen; i++){
   for(var j = 0; j <= 4; j++){ // examples to get all 4 obj names
        if(data.main[i].IMGNAM+j != null){
             // trying to get IMGNAM0 concatenate with j
             console.log(data.main[i].IMGNAM+j); 
             console.log(data.main[i].IMGPAT+j);
        }
   }
} 
```

控制台向我显示`not a number (NaN)`，完成这项工作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T12:14:29.363

而不是使用点来访问数据，使用`.IMGNAM+j`，使用`[IMGNAM+j]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T12:16:50.847

使用如下代码：

```
var mainlen = data.main.length-1; // get number of obj
for(var i = 0; i <= mainlen; i++){
   for(var j = 0; j <= 4; j++){ // examples to get all 4 obj names
        if(data.morrows[i].['IMGNAM'+j] != null){
             // trying to get IMGNAM0 concatenate with j
             console.log(data.main[i].['IMGNAM'+j]); 
             console.log(data.main[i].['IMGPAT'+j]);
        }
   }
} 
```

这应该可以解决您的问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T12:17:11.047

你需要类似的东西：

```
 data.morrows[i]["IMGNAM" + j]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T12:21:26.670

使用方括号来包装您的连接字符串：

```
if(data.main[i]['IMAGNAM'+j] != null){ 
```

# css - ie7绝对位置

> ID：15293760
> 
> 赞同：0
> 
> 时间：2013-03-08T12:13:08.577
> 
> 标签：css, internet-explorer-7, css-position

此[代码片段](http://jsfiddle.net/Qcum5/)在 FF、IE 9,8 中运行良好，问题出在 IE7 中。

问题是 ：

为什么职位：绝对在

```
<div class="c-control-date-range-fields">.....</div> 
```

表现得好像父 li.c-date-range-moreopt 具有 position:relative，这就是为什么我认为它在 FF 而不是 IE 7 中按预期工作的原因？

![FF & IE 9 & 8 中出现的预期行为截图](../Images/efeef5a979d199b3d08f56c1886f2456.png)

![IE 7 中相同的屏幕截图](../Images/88dc83b34bd374ef92518c99dd7d4543.png)

# c# - 如何对字符串进行拼写检查？

> ID：15293762
> 
> 赞同：3
> 
> 时间：2013-03-08T12:13:12.483
> 
> 标签：c#, spell-checking

有人知道任何 C# 多语言拼写检查库吗？我不需要实时拼写检查。只检查字符串。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T12:21:36.747

对于它的价值，这是谷歌的第一个热门：

**[`SpellCheck`](http://msdn.microsoft.com/en-us/library/system.windows.controls.spellcheck.aspx)**班级

![在此处输入图像描述](../Images/78d2c01f7402a773b5b2ca88ebd96f78.png)

来自 MSDN：

> 为文本编辑控件（例如 TextBox 和 RichTextBox）提供实时拼写检查功能。
> 
> 要启用拼写检查器，请在文本编辑控件上将 SpellCheck.IsEnabled 属性设置为 true。启用此拼写检查器后，拼写错误的单词会使用红色波浪线加下划线，如下图所示。仅当 WPF 提供默认字典时，才支持拼写检查器。在 .NET Framework 4 中，WPF 提供了英语、法语、德语和西班牙语的词典。

**编辑**我刚刚认识到它仅适用于 WPF。然后你可以看看这个 SO-question：[Spell check in winforms](https://stackoverflow.com/q/2713963/284240)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T12:15:03.837

使用 Telerik Controls for .NET 你会得到它。

按照这个链接

[http://demos.telerik.com/aspnet-ajax/spell/examples/spellcheckvalidator/defaultcs.aspx?product=editor](http://demos.telerik.com/aspnet-ajax/spell/examples/spellcheckvalidator/defaultcs.aspx?product=editor)

希望它对你有帮助

# excel - EXCEL VBA：使第一个单元格与部分文本匹配activecell与宏运行，然后下一个单元格与后续宏运行activecell

> ID：15293763
> 
> 赞同：0
> 
> 时间：2013-03-08T12:13:18.847
> 
> 标签：excel, vba, search, select, partial

```
Sub AASearchForPartialText()
Dim SearchValue As String
SearchValue = Range("d2").Value
    Columns("D:D").Select
    Selection.Find(What:=SearchValue, After:=ActiveCell, LookIn:=xlValues, LookAt _
        :=xlPart, SearchOrder:=xlByRows, SearchDirection:=xlNext, MatchCase:= _
        False, SearchFormat:=False).Activate
End Sub 
```

我试图通过输入他们想要查找的部分字符串并点击搜索按钮来允许用户搜索一长串名称（有时是 2000 年），从而简化/加快 excel 搜索功能。期望的结果是它将循环遍历名称列表，突出显示下一个匹配的连续单元格

我正在做的最好的事情是突出范围 d:d。谁能帮帮我？

我已经为任何足够友善的人提供了示例工作簿

谢谢你们

[https://www.dropbox.com/s/uahuzsu3a8qfv6z/searchpartial.xlsm](https://www.dropbox.com/s/uahuzsu3a8qfv6z/searchpartial.xlsm)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T12:26:57.927

在其他一些相关代码的帮助下，我实际上能够自己解决这个问题

抱歉浪费任何人的时间

```
Sub newsearchrecord()
Dim SearchValue As String
SearchValue = "*" & Range("D2").Value & "*"
    Cells.Find(What:=SearchValue, After:=ActiveCell, LookIn:=xlValues, LookAt:= _
        xlPart, SearchOrder:=xlByRows, SearchDirection:=xlNext, MatchCase:=False _
        , SearchFormat:=False).Activate
    Cells.FindNext(After:=ActiveCell).Activate    
End Sub 
```

# nsis - NSIS 页面和部分执行

> ID：15293764
> 
> 赞同：5
> 
> 时间：2013-03-08T12:13:27.617
> 
> 标签：nsis, sections

可能我没有获得 nsis 脚本中页面和部分的基础知识。

我必须分析不是我制作的安装脚本。例如，在脚本的顶部有 MUI 页面的宏

```
!insertmacro MUI_PAGE_LICENSE $(license)
!insertmacro MUI_PAGE_INSTFILES .... 
```

然后再往下看代码有部分

```
Section "MainSection" SEC01

  SetShellVarContext current

  SetOutPath "$INSTDIR"
  SetOverwrite ifnewer
  File "${xy_TEMP_SRC}\InstallSrc\xy.exe"
  File "${xy_TEMP_SRC}\InstallSrc\xy.exe.config"

  SetOutPath "$INSTDIR\sk"
  File "${xy_TEMP_SRC}\InstallSrc\sk\xy.resources.dll"

  SetOutPath "$INSTDIR"

  CreateDirectory "$SMPROGRAMS\xy"
  CreateShortCut "$SMPROGRAMS\xy\xy.lnk" "$INSTDIR\xy.exe"
  CreateShortCut "$DESKTOP\xy.lnk" "$INSTDIR\xy.exe"

SectionEnd  
+ another sections for instance unninstall section 
```

我的问题是，当页面没有对这些部分的引用时，如何以及何时执行这些部分。

我的大脑告诉我，有时应该在安装过程中的页面确认期间执行这些部分，但我猜它是错误的，所以请谁能告诉我它实际上是如何工作的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T12:38:59.300

所有部分都在`instfiles`页面上按照您的部分的顺序执行。如果您需要在之前、之后或之间执行某些东西，您可以使用函数（例如 pre- 或 leave 函数）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T12:40:04.430

`!insertmacro MUI_PAGE_INSTFILES`执行部分。

# google-app-engine - google plus 登录 api cookie

> ID：15293765
> 
> 赞同：1
> 
> 时间：2013-03-08T12:13:39.030
> 
> 标签：google-app-engine, python-2.7, google-plus

我正在使用谷歌应用引擎 python。我按照示例代码让用户登录。在这一步之后，我应该创建自己的 cookie 或会话来记住用户吗？因为当我刷新页面时，登录按钮再次出现。

这是javascript。

```
<script src="https://apis.google.com/js/plusone.js" type="text/javascript"></script>
  <script type="text/javascript">
  /*
   * Triggered when the accepts the the sign in, cancels, or closes the
   * authorization dialog.
   */
  function loginFinishedCallback(authResult) {
    if (authResult) {
      if (authResult['error'] == undefined){
        gapi.auth.setToken(authResult); // Store the returned token.
        toggleElement('signin-button'); // Hide the sign in upon successful sign in.
        getEmail();                     // Trigger request to get the email address.
      } else {
        console.log('An error occurred');
      }
    } else {
      console.log('Empty authResult');  // Something went wrong
    }
  }

  /*
   * Initiates the request to the userinfo endpoint to get the user's email
   * address. This function relies on the gapi.auth.setToken containing a valid
   * OAuth access token.
   *
   * When the request completes, the getEmailCallback is triggered and passed
   * the result of the request.
   */

  function getEmail(){
    // Load the oauth2 libraries to enable the userinfo methods.
    gapi.client.load('oauth2', 'v2', function() {
          var request = gapi.client.oauth2.userinfo.get();
          request.execute(getEmailCallback);
        });
  }

  function getEmailCallback(obj){
    var el = document.getElementById('email');
    var email = '';

    if (obj['email']) {
      email = 'Email: ' + obj['email'];
    }

    //console.log(obj);   // Uncomment to inspect the full object.

    el.innerHTML = email;
    toggleElement('email');
  }

  function toggleElement(id) {
    var el = document.getElementById(id);
    if (el.getAttribute('class') == 'hide') {
      el.setAttribute('class', 'show');
    } else {
      el.setAttribute('class', 'hide');
    }
  }
  </script> 
```

这是登录按钮。

```
<span id="signin-button" class="show">
         <div class="g-signin" data-callback="loginFinishedCallback"
          data-approvalprompt="force"
          data-clientid="279937419542.apps.googleusercontent.com"
          data-scope="https://www.googleapis.com/auth/plus.login 
          https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/plus.me                            https://www.googleapis.com/auth/userinfo.profile"
          data-height="short"
          data-cookiepolicy="single_host_origin"
              >
        </div>
    </span> 
```

# sql-server-2008 - 'RECEIVE TOP(X)' 和服务

> ID：15293767
> 
> 赞同：3
> 
> 时间：2013-03-08T12:13:41.970
> 
> 标签：sql-server-2008, service-broker

当使用 SSB 发送消息时，我们将通过指定*往返*服务*来初始化对话。*

 *但是在阅读时，我们所做的只是接收而不指定服务。那么如何确保我阅读了仅用于服务 X 的消息？

还是我错过了一些基本的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T13:32:19.720

要接收服务 A，从服务 A 的队列接收。要从服务 B 接收，从服务 B 的队列接收。

如果处理相同并且您真的不关心消息属于哪个服务，您应该只将两个服务放在同一个队列中。您甚至可以将服务名称投影到 RECEIVE 结果集中，这样您就可以知道您的消息属于 A 还是 B，如果在处理中很重要。作为一般规则，没有办法声明“接收符合标准 X 的消息并忽略其余消息”。这个想法是消息是需要处理的*事件*，因此您无法选择接下来要查看的事件。*

# ios - 如何确定某个文本是否完全显示在 UITableViewCell 中？

> ID：15293777
> 
> 赞同：0
> 
> 时间：2013-03-08T12:14:03.903
> 
> 标签：ios, objective-c, cocoa-touch, uitableview

是否有可能知道某个文本是否完全显示在 UITableViewCell 的 textLabel 中？

我的意思是：是否有可能找出省略号（点点）是否必须显示，因为文本太长而无法放入 textLabel？

我正在考虑显示 accesoryDe​​tailButton 以让用户看到整个文本（如果它不适合）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T12:23:28.373

像这样检查字符串的大小 -

```
CGSize textSize = [title sizeWithFont:titleFont 
                         constrainedToSize:textLabelSize 
                             lineBreakMode:NSLineBreakByTruncatingTail]; 
```

将尺寸与您的`tableViewCell` `textlabel` `frame size`.

如果更大，那么它有省略号，否则没有。

希望能帮助到你 ！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T12:21:38.810

[我在这个答案](https://stackoverflow.com/questions/4793420/how-to-change-truncate-characters-in-uilabel/15020409#15020409)中写了一个自定义截断类，如果你使用它，它会返回一个布尔值，告诉你它是否被截断

# postgresql - 根据 PostgreSQL 中的列将文本附加到列数据

> ID：15293778
> 
> 赞同：46
> 
> 时间：2013-03-08T12:14:06.630
> 
> 标签：postgresql

我想在表格每一列的每个单元格中附加一些文本，作为该特定列的符号。例如说我的表如下（所有字段的类型字符都不同）：

```
姓名 年龄 位置
詹姆斯 45 法国
西蒙 33 美国
ben 76 中国

```

我想将其修改为：

```
姓名 年龄 位置
ajames b45 法国
阿西蒙 b33 库萨
阿本 b76 中国

```

有人对我如何做到这一点有任何建议吗？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-03-08T12:20:20.360

首先，您必须将您的年龄转换为某种字符串。之后，您可以像这样转换值（当然，您必须为每个字段执行此操作）：

```
update mytable set name = 'a' || name, age = 'b' || age; 
```

这会更新表中的数据。如果您只希望输出带有前缀，则可以使用以下方法：

```
select 'a' || name as name, 'b' || age as age from mytable; 
```

在这种情况下，无需转换您的年龄数据类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-02T06:49:31.717

接受的答案不是处理空值和空格。所以我给出了这个答案。如果它对某人有帮助，那将是我的荣幸。

```
update "public"."mytable" set 
"name"= case when "name" is null or trim("name")='' then null else 'a' || "name" end,
"age"= case when "age" is null or trim("age")='' then null else 'b' || "age" end,
"location"= case when "location" is null or trim("location")='' then null else 'c' || "location" end; 
```

# c# - 使用 PNG 格式

> ID：15293780
> 
> 赞同：5
> 
> 时间：2013-03-08T12:14:10.250
> 
> 标签：c#, c++, bitmap, png

我希望在 C++ 或 C# 中使用 PNG 格式。我找不到任何关于如何将 PNG 转换为代表图像颜色的 2D 字节/浮点数组的文档。

我想要达到的目标：

*   将 Png 加载到数组 [宽度*高度]
*   在游戏中使用 PNG 作为纹理

如果有人可以向我提供任何文档、源代码或 C#/C++ 库/dll，那就太好了。

最好使用 C++ 并且不使用任何 Windows 特定库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T12:18:17.703

[使用官方 PNG 库 libpng。](http://www.libpng.org/pub/png/libpng.html)

具体来说，[此页面](http://www.libpng.org/pub/png/book/chapter13.html)包含有关如何打开和阅读的所有信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T12:25:51.713

对于任何广泛使用的“标准”事物的文档，[维基百科通常是最好的第一站](http://en.wikipedia.org/wiki/Portable_Network_Graphics)。从那里您可以阅读 Wikipedia 文章，或直接跳到[外部链接](http://en.wikipedia.org/wiki/Portable_Network_Graphics#External_links)部分。

对于 C# 代码，请参阅示例：[Reading a PNG image file in .Net 2.0](https://stackoverflow.com/questions/100247/reading-a-png-image-file-in-net-2-0)。据我所知，它已经足够老，可以成为 C# 的 ECMA 标准化版本的一部分，因此也应该在 Mono 上可用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T15:03:57.923

在 C 中，[libpng](http://www.libpng.org/pub/png/libpng.html)是规范的方式。在 C# 中，您可以尝试[PngCs](https://code.google.com/p/pngcs/)。

# vb.net - 如何使用字符串选择对象？VB

> ID：15293789
> 
> 赞同：1
> 
> 时间：2013-03-08T12:14:36.887
> 
> 标签：vb.net, picturebox

我想为我单击的图片框设置一个新图像。所以我认为我可以在同一个 clickevent(SelectEvent6x6) 上发送所有内容，然后使用 sender.name 来识别希望图片框需要更改。然而这不起作用，因为它是一个字符串而不是一个对象

```
 Private Sub SelectEvent6x6(ByVal sender As System.Object, ByVal e As System.EventArgs)Handles PB00.Click, PB55.Click, PB54.Click, PB53.Click, PB52.Click, PB51.Click, PB50.Click, PB45.Click, PB44.Click, PB43.Click, PB42.Click, PB41.Click, PB40.Click, PB35.Click, PB34.Click, PB33.Click, PB32.Click, PB31.Click, PB30.Click, PB25.Click, PB24.Click, PB23.Click, PB22.Click, PB21.Click, PB20.Click, PB15.Click, PB14.Click, PB13.Click, PB12.Click, PB11.Click, PB10.Click, PB05.Click, PB04.Click, PB03.Click, PB02.Click, PB01.Click
        Dim Selected As String
        Selected = sender.name
        'PB00.Image = Image.FromFile(My.Computer.FileSystem.CurrentDirectory + "\objects20130308b\map\mapgrassselected.png")
        Selected.Image = Image.FromFile(My.Computer.FileSystem.CurrentDirectory + "\objects20130308b\map\mapgrassselected.png") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T12:25:35.123

我认为，发件人应该是图片框本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T12:38:30.250

做这个：

```
Dim picBox as PictureBox = CType(sender, PictureBox)
picBox.Image = Image.FromFile(imagePath) 
```

# c# - 通过 Monomac 使用 Mac 通知

> ID：15293796
> 
> 赞同：2
> 
> 时间：2013-03-08T12:15:04.867
> 
> 标签：c#, mono, notifications, monomac

我目前正在将一个简单的托盘应用程序从 Windows（C#、.Net、Winforms）移植到 OS X（C#、MonoMac、Cocoa）。大部分工作已经完成，但我在 OS X 中遇到了一些问题，它相当于 Windows 托盘应用程序经常用来共享信息的气球工具提示： ![气球工具提示示例](../Images/e5b24155a89006f16c3e7b1cf6b5f363.png)

我没有经常使用 OS X，但我的印象是等价于通知： ![通知示例](../Images/8f3ec180af5bf33a8e4b499c7aa56850.png)

但我无法弄清楚如何从 MonoMac 使用它。在互联网上环顾四周时，我发现了一个叫做“咆哮通知”的东西，但这似乎是一个第三方库，我对此不感兴趣（如果可以避免的话）。MonoMac 框架中还有一个名为 NSNotification 的类，但同样，我无法使其工作。

有人对可怜的 Windows 程序员有一些提示吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T13:05:16.613

Mac 上的等价物是[通知中心](http://en.wikipedia.org/wiki/Notification_Center)。这是在 OS 10.8 (Mountain Lion) 中引入的。

在引入通知中心之前，可以通过第三方库 Growl 添加此功能。[Growl](http://growl.info/downloads)在很多情况下仍然适用，因为它比原生通知中心更实用。Growl 是用户必须购买和安装的付费插件。

[NSNotification](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNotification_Class/Reference/Reference.html)是 Mac API 的一部分，用于在对象和进程之间传递消息。这不是“用户”通知。这很令人困惑，因为 NSNotification 和 NSNotificationCenter 是这些旧 API 的名称；而您感兴趣的较新的“用户”通知 API 称为 NSUserNotification 和 NSUserNotificationCenter。

假设您的用户使用的是 10.8 / Mountain Lion，最好使用 OS X[通知中心](http://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSUserNotification_Class/Reference/Reference.html)。似乎有一个[例子](https://github.com/mono/monomac/pull/74/files)证明了这一点。如果您必须支持早期版本，Growl 是一个不错的选择，但用户必须购买/安装它。否则，您可以自己开发一些东西。

另外一点是 Growl 确实与本地通知中心[集成](http://arstechnica.com/apple/2012/09/hands-on-growl-2-0-integrates-with-notification-center-on-os-x-ios/)，因此它不一定是“非此即彼”的决定。这仅取决于您要支持的内容。

# c - 输入值和If语句

> ID：15293797
> 
> 赞同：0
> 
> 时间：2013-03-08T12:15:07.170
> 
> 标签：c, if-statement, input

我是基督徒，我目前是 C++ 的初学者，正在努力学习，但我想我已经到了极限，我已经尝试过其他事情，但我似乎无法让我的程序正常工作。这也是我的课程要求之一，我真的很难弄清楚如何解决这个问题。

基本上用户将输入站（a，b，c）并且程序应该计算费用但是在输入a，b或c之后程序输出0.00000然后任何键都会自动关闭界面。

这是我想使用的代码示例：

```
#include<stdio.h>
#include<conio.h>

main()

{
float fee, to, from, a, b, c;
printf("Enter your current station: ");
scanf("%f",&from);
printf("Enter the station you want to go: ");
scanf("%f",&to);

if((to == a && from == b))
a = 10;
b = 15;
fee = to + from;
printf("%f", fee);

if((to == b && from == a))
a = 10;
b = 15;
fee = to + from;
printf("%f", fee);

if((to == c && from == a))
a = 10;
c = 5;
fee = to + from;
printf("%f", fee);

if((to == a && from == c))
a = 10;
c = 5;
fee = to + from;
printf("%f", fee);

if((to == b && from == c))
a = 10;
c = 5;
fee = to + from;
printf("%f", fee);

getch();
} 
```

希望有人可以帮助我，感谢您的阅读，我真的很感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T12:20:48.223

这一行：

```
if((to == a && from == b)) 
```

当 a 或 b 均未初始化时，将值与 a 和 b 进行比较。在将变量与它们进行比较之前，您必须给它们赋值。

您的 if 语句后也没有大括号。他们可能没有做你认为的那样。他们现在的代码方式是，只有每个 if 语句之后的行才会有条件地执行。

编辑：我没有注意到..您将输入作为浮点数。我认为您想要做的是以字符的形式读取和读取并编写您的 if 语句，如下所示：

```
 if((to == 'a' && from == 'b')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T12:27:52.357

您正在尝试将字符“a”、“b”或“c”的用户输入存储到浮点变量中。这行不通。

属于一个 if 语句的任何内容都需要进入一个块：

```
if(condition)
{
    operation1
    operation2
    ...
} 
```

此外，检查您要添加哪些变量以获得费用值。

* * *

“只要看，你就能看到很多东西。” - 瑜伽士贝拉

# jquery - 从 json feed 加载更多文章

> ID：15293799
> 
> 赞同：1
> 
> 时间：2013-03-08T12:15:20.133
> 
> 标签：jquery, ajax

我需要一些 ajax/jquery 请求的帮助，以从 json feed 加载更多文章。

```
$(document).ready(function () {
var output = $('#news');
var count = "2";
var page = "1";
$.ajax({
    url: 'http://domain.com/api/get_recent_posts/?post_type=news&count=' + count + '&page=' + page + '&callback=?',
    async: false,
    callback: 'callback',
    crossDomain: true,
    contentType: 'application/json; charset=utf-8',
    type: 'POST',
    dataType: 'jsonp',
    timeout: 5000,
    success: function (data, status) {
        $.each(data.posts, function (i, item) {
            var news = '<li>' + item.title + '</li>';
            output.append(news);
        });

        if (data !== undefined && data !== undefined) {
            $('#stats').append('Page ' + page + ' of ' + data.pages + ' | Total posts ' + data.count_total + '');
        }

    },
    error: function () {
        output.html('<h1 class="error">There was an error loading the data.</h2>');
    }
});
}); 
```

我需要的是：通过单击链接（加载更多）页面应该显示来自“var page = '2'”的标题等等，但是当它到达最后一页时，链接应该消失。希望它确实有意义。

请看下面的现场小提琴：http: [//jsfiddle.net/AGGjj/](http://jsfiddle.net/AGGjj/)

提前非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T13:08:38.437

对于每一个有答案的人：

```
$(document).ready(function () {

var output = $('#news');
var count = "2";
var page = "1";
var load = function() {
$.ajax({
    url: 'http://domain.com/api/get_recent_posts/?post_type=news&count=' + count + '&page=' + page + '&callback=?',
    async: false,
    callback: 'callback',
    crossDomain: true,
    contentType: 'application/json; charset=utf-8',
    type: 'POST',
    dataType: 'jsonp',
    timeout: 5000,
    success: function (data, status) {
        $.each(data.posts, function (i, item) {
            output.append($('<li />').text(item.title));
        });

        if (data !== undefined && data !== undefined) {
            $('#stats').text('Page ' + page + ' of ' + data.pages + ' | Total posts ' + data.count_total + '');
        }
        if (page == data.pages) {
             $("#loadmore").remove();
        }
        page++;

    },
    error: function () {
        output.html('<h2 class="error">There was an error loading the data.</h2>');
    }
});
};
//add click handler
$('#loadmore').click(function() {load();});
//load first page
$('#loadmore').trigger('click');
//or
load();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T12:19:34.487

在成功函数的最后添加

```
success: function (data, status) {
    $.each(data.posts, function (i, item) {
        var news = '<li>' + item.title + '</li>';
        output.append(news);
    });

    if (data !== undefined && data !== undefined) {
        $('#stats').append('Page ' + page + ' of ' + data.pages + ' | Total posts ' + data.count_total + '');
    //just test if the current page is the last one
    if(page == data.pages) {
       $('link selector').hide();
       or remove
       $('link selector').remove();

    }
    }

}, 
```

# python - 主管不使用 Gunicorn + Flask

> ID：15293801
> 
> 赞同：6
> 
> 时间：2013-03-08T12:15:21.500
> 
> 标签：python, flask, gunicorn, supervisord

我正在尝试在 Ubuntu 12.04 系统中从 Supervisor 运行 Gunicorn。Gunicorn 运行一个 Flask 应用程序（使用 Flask 的嵌入式服务器测试的简单 REST Web 服务）。我通过克隆 GIT 存储库安装了 Gunicorn，试图避免“apt-get install”，因为它在安装时运行 Gunicorn 服务器。我不想让它运行，它只会由 Supervisor 运行。

所以安装后，如果我尝试：

```
cd /usr/local/bin
gunicorn my_app:app -c /path/to/gu_config_file 
```

独角兽的作品。然后我杀了它。注意没有扩展名的配置文件，因为带有“.py”扩展名的我对我不起作用。所以我编辑主管的配置文件，如：

```
[program:gunicorn]
command=/usr/local/bin/gunicorn my_app:app -c /path/to/.gu_setup
directory=/usr/local/bin/
autostart=true
autorestart=true
redirect_stderr=True 
```

并更新 Supervisor 中的更改：

```
supervisorctl reread
# gunicorn: changed
supervisorctl update
# gunicorn: stopped
# gunicorn: updated process group 
```

检测文件中的更改并适用于 Gunicorn 程序。好的，但后来我尝试启动它：

```
supervisorctl start gunicorn 
```

变得烦人：

```
gunicorn: ERROR (abnormal termination) 
```

检查主管的日志：

```
2013-03-08 13:07:22,378 INFO spawned: 'gunicorn' with pid 3355
2013-03-08 13:07:22,916 INFO exited: gunicorn (exit status 3; not expected)
2013-03-08 13:07:23,918 INFO spawned: 'gunicorn' with pid 3361
2013-03-08 13:07:24,492 INFO exited: gunicorn (exit status 3; not expected)
2013-03-08 13:07:26,496 INFO spawned: 'gunicorn' with pid 3367
2013-03-08 13:07:27,078 INFO exited: gunicorn (exit status 3; not expected)
2013-03-08 13:07:30,085 INFO spawned: 'gunicorn' with pid 3373
2013-03-08 13:07:30,628 INFO exited: gunicorn (exit status 3; not expected)
2013-03-08 13:07:31,630 INFO gave up: gunicorn entered FATAL state, too many start retries too quickly 
```

我不知道现在该怎么办......你能帮帮我吗？多谢！

编辑：对不起，我忘了说我已将 PYTHONPATH 变量导出为：

```
export PYTHONPATH=/usr/local/bin:/usr/local/lib/project 
```

'my_app' 在 /usr/local/bin 中。其他模块需要 lib 路径。我还编辑了主管配置文件以指示环境变量，例如：

```
environment=PYTHONPATH=/usr/local/bin:/usr/local/lib/project/ 
```

但没有奏效。

编辑2：正如@robertklep 在他的评论中建议的那样，这是日志的输出：

```
Traceback (most recent call last):
  File "/tmp/gunicorn/gunicorn/arbiter.py", line 485, in spawn_worker
    worker.init_process()
  File "/tmp/gunicorn/gunicorn/workers/base.py", line 100, in init_process
    self.wsgi = self.app.wsgi()
  File "/tmp/gunicorn/gunicorn/app/base.py", line 103, in wsgi
    self.callable = self.load()
  File "/tmp/gunicorn/gunicorn/app/wsgiapp.py", line 25, in load
    return util.import_app(self.app_uri)
  File "/tmp/gunicorn/gunicorn/util.py", line 369, in import_app
    __import__(module)
  File "/usr/local/bin/my_app.py", line 4, in <module>
    import const
ImportError: No module named const
2013-03-08 13:29:35 [3670] [INFO] Worker exiting (pid: 3670)
2013-03-08 13:29:36 [3665] [INFO] Shutting down: Master
2013-03-08 13:29:36 [3665] [INFO] Reason: Worker failed to boot. 
```

'const' 模块位于 /usr/local/lib/project...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T12:24:40.303

我没有看到您在主管配置文件中设置环境：

```
[program:gunicorn]
environment=PYTHONPATH=/usr/local/bin:/usr/local/lib/project
command=/usr/local/bin/gunicorn my_app:app -c /path/to/.gu_setup
... 
```

如果这不起作用，请尝试在调试模式下启动 gunicorn：

```
command=/usr/local/bin/gunicorn --debug --log-level debug my_app:app -c /path/to/.gu_setup 
```

或者直接将路径传递给gunicorn：

```
command=/usr/local/bin/gunicorn --pythonpath /usr/local/bin,/usr/local/lib/project my_app:app -c /path/to/.gu_setup 
```

**编辑：** gunicorn`--pythonpath`坏了，你只能通过一个目录：

```
command=/usr/local/bin/gunicorn --pythonpath /usr/local/lib/project my_app:app -c /path/to/.gu_setup 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-20T12:23:16.803

不必通过--pythonpath。如果你在 virtuanenv 工作，你会在哪里添加 gunicorn。例子：

```
command=/home/virtualenv/bin/gunicorn application:app -c /home/virtualenv/deploy/gunicorn.conf.py 
```

目录是 Flask 代码所在的位置，例如：

```
directory=/home/virtualenv/myapp 
```

记住用户是root！

```
user=root 
```

# html - 从右到左打印表格单元格

> ID：15293808
> 
> 赞同：11
> 
> 时间：2013-03-08T12:15:52.443
> 
> 标签：html, css, html-table, right-to-left

我制作了一个表格，并希望第一个单元格从右侧开始，而不是默认从左侧开始。我尝试更改 CSS 中的 float 属性，但似乎没有帮助。这是代码：

```
<table border="0" width="100%" cellspacing="0" align="center" class="result_table">
    <tr align="right">
    <th bgcolor="#cccccc" align="right">1</th>
    <th bgcolor="#cccccc" size="17">2</th>
    <th bgcolor="#cccccc">3</th>
    <th bgcolor="#cccccc">4</th>
    </tr>

</table>

<style>
    table.result_table {
        float:right;
    }
</style> 
```

谁能建议一种方法来改变这张桌子的浮动？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-08T15:01:33.880

正如评论中所建议的，您可以将方向性设置为从右到左 (RTL)。但是，除非您的表格内容是从右到左的语言，否则您应该另外将表格内容元素中的方向性设置为从左到右。否则，它们会继承 RTL 方向性，这在许多情况下会引起意外，因为方向性也设置了整体文本方向性。这不会影响西方语言中的正常文本，但会影响例如“4 (5)”之类的内容，该内容将显示为具有 RTL 方向性的“(5) 4”。

因此，您应该设置

```
table.result_table {
  direction: rtl; }
table.result_table caption, table.result_table th, table.result_table td {
  direction: ltr; } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-11-09T13:50:12.213

有一个更简单的方法。您可以添加`direction="rtl"`到表中。

```
<table dir="rtl">
     ...
</table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T12:47:42.570

我不确定这是否可以仅通过 CSS 来实现。如果使用 jQuery 对你来说没问题，那么这里有一个可能会让你得到想要的结果的想法：

CSS：

```
.result_table{float:left; width:100%; border-collapse:collapse; padding:0;}
.result_table th{float:right; padding:0;} 
```

JS：

```
var cols = $('.result_table th').length;
var colWidth = 100 / cols;
$('.result_table th').css({width:colWidth+'%'}) 
```

示例 - [jsFiddle](http://jsfiddle.net/YhzN5/)

# java - java - 如何在java iText pdf中将JTable列宽转换为单元格宽度

> ID：15293810
> 
> 赞同：0
> 
> 时间：2013-03-08T12:16:10.740
> 
> 标签：java, swing, pdf, jtable, itext

我正在开发一个应用程序，我必须在 pdf 上一对一地映射表格单元格。以此目的

我发现表格单元格宽度

0:61 1:61 2:272 3:55 4:59

但在 Pdf 上看起来不同。以下是演示问题的示例代码：-

## 简单表演示.java

```
package com.swing.data;

import java.awt.Dimension;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.util.ArrayList;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.table.TableColumn;

import com.itextpdf.text.BaseColor;
import com.itextpdf.text.Document;
import com.itextpdf.text.DocumentException;
import com.itextpdf.text.Phrase;
import com.itextpdf.text.pdf.PdfPCell;
import com.itextpdf.text.pdf.PdfPTable;
import com.itextpdf.text.pdf.PdfWriter;

public class SimpleTableDemo extends JPanel implements ActionListener {
    private boolean DEBUG = false;
    private static JTable table = null;
    private TableColumnAdjuster app = null;
    String[] columnNames = {"First Name",
            "Last Name",
            "Sport",
            "# of Years",
            "Vegetarian"};
    Object[][] data = {
            {"Kathy", "Smith",
             "SnowboardingXXXXXXXXXXXXXXXXXXXXXXXXXXX", new Integer(5), new Boolean(false)},
            {"John", "Doe",
             "Rowing", new Integer(3), new Boolean(true)},
            {"Sue", "Black",
             "Knitting", new Integer(2), new Boolean(false)},
            {"Jane", "White",
             "Speed reading", new Integer(20), new Boolean(true)},
            {"Joe", "Brown",
             "Pool", new Integer(10), new Boolean(false)}
            };
    CutomTableCellRenderer renderer = null;
    ArrayList<Integer> listColWidths = new ArrayList<Integer>();
    public SimpleTableDemo() {
        super(new GridLayout(1,0));
        table = new JTable(data, columnNames);
        table.setPreferredScrollableViewportSize(new Dimension(500, 70));
        table.setFillsViewportHeight(true);

        renderer = new CutomTableCellRenderer(table.getDefaultRenderer(Object.class));
        table.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
        table.setDefaultRenderer(Object.class, renderer);
        //table.setSelectionMode(JTable.AUTO_RESIZE_SUBSEQUENT_COLUMNS);

        app = new TableColumnAdjuster(table);
        app.adjustColumns();
        JScrollPane scrollPane = new JScrollPane(table);

        for(int i=0;i<table.getColumnCount();i++)
        {
            TableColumn column = table.getColumnModel().getColumn(i);
            listColWidths.add(column.getWidth());
        }

        //Add the scroll pane to this panel.
        add(scrollPane);
        JButton button = new JButton("Print");
        add(button);
        button.addActionListener(this);
    }

    /**
     * Create the GUI and show it.  For thread safety,
     * this method should be invoked from the
     * event-dispatching thread.
     */
    private static void createAndShowGUI() {
        //Create and set up the window.
        JFrame frame = new JFrame("SimpleTableDemo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        //Create and set up the content pane.
        SimpleTableDemo newContentPane = new SimpleTableDemo();
        newContentPane.setOpaque(true); //content panes must be opaque
        frame.setContentPane(newContentPane);

        //Display the window.
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        //Schedule a job for the event-dispatching thread:
        //creating and showing this application's GUI.
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        printPdf();

    }

    public void printPdf()
    {
        Document document = new Document();
        try {
            PdfWriter.getInstance(document,new FileOutputStream("F://SimplePDFTable.pdf"));
            document.open();
            PdfPTable pdfTable = new PdfPTable(5);
            int tableWidths[] = new int[columnNames.length];
            for(int i= 0; i<listColWidths.size();i++)
            {
                tableWidths[i] = listColWidths.get(i);
            }
            pdfTable.setWidths(tableWidths);
            PdfPCell cell = new PdfPCell();
            Phrase phrase = null;
            cell.setBackgroundColor(BaseColor.LIGHT_GRAY);
            cell.setBorderWidthLeft(1);
            for(int i=0;i<table.getColumnCount();i++)
            {
                phrase = new Phrase(columnNames[i]); 
                cell = new PdfPCell(phrase);
                pdfTable.addCell(cell);
            }
            for(int i=0;i<5;++i)
            {
                for(int j=0;j<5;++j)
                {
                    phrase = new Phrase(String.valueOf(data[i][j]));
                    cell = new PdfPCell(phrase);
                    pdfTable.addCell(cell);
                }
            }
            document.add(pdfTable);
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (DocumentException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        document.close();
    }
} 
```

## TableColumnAdjuster.java

```
package com.swing.data;

import java.awt.*;
import java.awt.event.*;
import java.beans.*;
import java.util.*;
import javax.swing.*;
import javax.swing.event.*;
import javax.swing.table.*;

/*
 *  Class to manage the widths of colunmns in a table.
 *
 *  Various properties control how the width of the column is calculated.
 *  Another property controls whether column width calculation should be dynamic.
 *  Finally, various Actions will be added to the table to allow the user
 *  to customize the functionality.
 *
 *  This class was designed to be used with tables that use an auto resize mode
 *  of AUTO_RESIZE_OFF. With all other modes you are constrained as the width
 *  of the columns must fit inside the table. So if you increase one column, one
 *  or more of the other columns must decrease. Because of this the resize mode
 *  of RESIZE_ALL_COLUMNS will work the best.
 */
public class TableColumnAdjuster implements PropertyChangeListener, TableModelListener
{
    private JTable table;
    private int spacing;
    private boolean isColumnHeaderIncluded;
    private boolean isColumnDataIncluded;
    private boolean isOnlyAdjustLarger;
    private boolean isDynamicAdjustment;
    private Map<TableColumn, Integer> columnSizes = new HashMap<TableColumn, Integer>();

    /*
     *  Specify the table and use default spacing
     */
    public TableColumnAdjuster(JTable table)
    {
        this(table, 6);
    }

    /*
     *  Specify the table and spacing
     */
    public TableColumnAdjuster(JTable table, int spacing)
    {
        this.table = table;
        this.spacing = spacing;
        setColumnHeaderIncluded( true );
        setColumnDataIncluded( true );
        setOnlyAdjustLarger( true );
        setDynamicAdjustment( false );
        installActions();
    }

    /*
     *  Adjust the widths of all the columns in the table
     */
    public void adjustColumns()
    {
        TableColumnModel tcm = table.getColumnModel();

        for (int i = 0; i < tcm.getColumnCount(); i++)
        {
            adjustColumn(i);
        }
    }

    /*
     *  Adjust the width of the specified column in the table
     */
    public void adjustColumn(final int column)
    {
        TableColumn tableColumn = table.getColumnModel().getColumn(column);

        if (! tableColumn.getResizable()) return;

        int columnHeaderWidth = getColumnHeaderWidth( column );
        int columnDataWidth   = getColumnDataWidth( column );
        int preferredWidth    = Math.max(columnHeaderWidth, columnDataWidth);
        System.out.println(column + ":" + preferredWidth);
        updateTableColumn(column, preferredWidth);
    }

    /*
     *  Calculated the width based on the column name
     */
    private int getColumnHeaderWidth(int column)
    {
        if (! isColumnHeaderIncluded) return 0;

        TableColumn tableColumn = table.getColumnModel().getColumn(column);
        Object value = tableColumn.getHeaderValue();
        TableCellRenderer renderer = tableColumn.getHeaderRenderer();

        if (renderer == null)
        {
            renderer = table.getTableHeader().getDefaultRenderer();
        }

        Component c = renderer.getTableCellRendererComponent(table, value, false, false, -1, column);
        return c.getPreferredSize().width;
    }

    /*
     *  Calculate the width based on the widest cell renderer for the
     *  given column.
     */
    private int getColumnDataWidth(int column)
    {
        if (! isColumnDataIncluded) return 0;

        int preferredWidth = 0;
        int maxWidth = table.getColumnModel().getColumn(column).getMaxWidth();

        for (int row = 0; row < table.getRowCount(); row++)
        {
            preferredWidth = Math.max(preferredWidth, getCellDataWidth(row, column));

            //  We've exceeded the maximum width, no need to check other rows

            if (preferredWidth >= maxWidth)
                break;
        }

        return preferredWidth;
    }

    /*
     *  Get the preferred width for the specified cell
     */
    private int getCellDataWidth(int row, int column)
    {
        //  Inovke the renderer for the cell to calculate the preferred width

        TableCellRenderer cellRenderer = table.getCellRenderer(row, column);
        Component c = table.prepareRenderer(cellRenderer, row, column);
        int width = c.getPreferredSize().width + table.getIntercellSpacing().width;

        return width;
    }

    /*
     *  Update the TableColumn with the newly calculated width
     */
    private void updateTableColumn(int column, int width)
    {
        final TableColumn tableColumn = table.getColumnModel().getColumn(column);

        if (! tableColumn.getResizable()) return;

        width += spacing;

        //  Don't shrink the column width

        if (isOnlyAdjustLarger)
        {
            width = Math.max(width, tableColumn.getPreferredWidth());
        }

        columnSizes.put(tableColumn, new Integer(tableColumn.getWidth()));
        table.getTableHeader().setResizingColumn(tableColumn);
        tableColumn.setWidth(width);
    }

    /*
     *  Restore the widths of the columns in the table to its previous width
     */
    public void restoreColumns()
    {
        TableColumnModel tcm = table.getColumnModel();

        for (int i = 0; i < tcm.getColumnCount(); i++)
        {
            restoreColumn(i);
        }
    }

    /*
     *  Restore the width of the specified column to its previous width
     */
    private void restoreColumn(int column)
    {
        TableColumn tableColumn = table.getColumnModel().getColumn(column);
        Integer width = columnSizes.get(tableColumn);

        if (width != null)
        {
            table.getTableHeader().setResizingColumn(tableColumn);
            tableColumn.setWidth( width.intValue() );
        }
    }

    /*
     *  Indicates whether to include the header in the width calculation
     */
    public void setColumnHeaderIncluded(boolean isColumnHeaderIncluded)
    {
        this.isColumnHeaderIncluded = isColumnHeaderIncluded;
    }

    /*
     *  Indicates whether to include the model data in the width calculation
     */
    public void setColumnDataIncluded(boolean isColumnDataIncluded)
    {
        this.isColumnDataIncluded = isColumnDataIncluded;
    }

    /*
     *  Indicates whether columns can only be increased in size
     */
    public void setOnlyAdjustLarger(boolean isOnlyAdjustLarger)
    {
        this.isOnlyAdjustLarger = isOnlyAdjustLarger;
    }

    /*
     *  Indicate whether changes to the model should cause the width to be
     *  dynamically recalculated.
     */
    public void setDynamicAdjustment(boolean isDynamicAdjustment)
    {
        //  May need to add or remove the TableModelListener when changed

        if (this.isDynamicAdjustment != isDynamicAdjustment)
        {
            if (isDynamicAdjustment)
            {
                table.addPropertyChangeListener( this );
                table.getModel().addTableModelListener( this );
            }
            else
            {
                table.removePropertyChangeListener( this );
                table.getModel().removeTableModelListener( this );
            }
        }

        this.isDynamicAdjustment = isDynamicAdjustment;
    }
//
//  Implement the PropertyChangeListener
//
    public void propertyChange(PropertyChangeEvent e)
    {
        //  When the TableModel changes we need to update the listeners
        //  and column widths

        if ("model".equals(e.getPropertyName()))
        {
            TableModel model = (TableModel)e.getOldValue();
            model.removeTableModelListener( this );

            model = (TableModel)e.getNewValue();
            model.addTableModelListener( this );
            adjustColumns();
        }
    }
//
//  Implement the TableModelListener
//
    public void tableChanged(TableModelEvent e)
    {
        if (! isColumnDataIncluded) return;

        //  A cell has been updated

        if (e.getType() == TableModelEvent.UPDATE)
        {
            int column = table.convertColumnIndexToView(e.getColumn());

            //  Only need to worry about an increase in width for this cell

            if (isOnlyAdjustLarger)
            {
                int row = e.getFirstRow();
                TableColumn tableColumn = table.getColumnModel().getColumn(column);

                if (tableColumn.getResizable())
                {
                    int width = getCellDataWidth(row, column);
                    updateTableColumn(column, width);
                }
            }

            //  Could be an increase of decrease so check all rows

            else
            {
                adjustColumn( column );
            }
        }

        //  The update affected more than one column so adjust all columns

        else
        {
            adjustColumns();
        }
    }

    /*
     *  Install Actions to give user control of certain functionality.
     */
    private void installActions()
    {
        installColumnAction(true,  true,  "adjustColumn",   "control ADD");
        installColumnAction(false, true,  "adjustColumns",  "control shift ADD");
        installColumnAction(true,  false, "restoreColumn",  "control SUBTRACT");
        installColumnAction(false, false, "restoreColumns", "control shift SUBTRACT");

        installToggleAction(true,  false, "toggleDynamic",  "control MULTIPLY");
        installToggleAction(false, true,  "toggleLarger",   "control DIVIDE");
    }

    /*
     *  Update the input and action maps with a new ColumnAction
     */
    private void installColumnAction(
        boolean isSelectedColumn, boolean isAdjust, String key, String keyStroke)
    {
        Action action = new ColumnAction(isSelectedColumn, isAdjust);
        KeyStroke ks = KeyStroke.getKeyStroke( keyStroke );
        table.getInputMap().put(ks, key);
        table.getActionMap().put(key, action);
    }

    /*
     *  Update the input and action maps with new ToggleAction
     */
    private void installToggleAction(
        boolean isToggleDynamic, boolean isToggleLarger, String key, String keyStroke)
    {
        Action action = new ToggleAction(isToggleDynamic, isToggleLarger);
        KeyStroke ks = KeyStroke.getKeyStroke( keyStroke );
        table.getInputMap().put(ks, key);
        table.getActionMap().put(key, action);
    }

    /*
     *  Action to adjust or restore the width of a single column or all columns
     */
    class ColumnAction extends AbstractAction
    {
        private boolean isSelectedColumn;
        private boolean isAdjust;

        public ColumnAction(boolean isSelectedColumn, boolean isAdjust)
        {
            this.isSelectedColumn = isSelectedColumn;
            this.isAdjust = isAdjust;
        }

        @Override
        public void actionPerformed(ActionEvent e)
        {
            //  Handle selected column(s) width change actions

            if (isSelectedColumn)
            {
                int[] columns = table.getSelectedColumns();

                for (int i = 0; i < columns.length; i++)
                {
                    if (isAdjust)
                        adjustColumn(columns[i]);
                    else
                        restoreColumn(columns[i]);
                }
            }
            else
            {
                if (isAdjust)
                    adjustColumns();
                else
                    restoreColumns();
            }
        }
    }

    /*
     *  Toggle properties of the TableColumnAdjuster so the user can
     *  customize the functionality to their preferences
     */
    class ToggleAction extends AbstractAction
    {
        private boolean isToggleDynamic;
        private boolean isToggleLarger;

        public ToggleAction(boolean isToggleDynamic, boolean isToggleLarger)
        {
            this.isToggleDynamic = isToggleDynamic;
            this.isToggleLarger = isToggleLarger;
        }

        @Override
        public void actionPerformed(ActionEvent e)
        {
            if (isToggleDynamic)
            {
                setDynamicAdjustment(! isDynamicAdjustment);
                return;
            }

            if (isToggleLarger)
            {
                setOnlyAdjustLarger(! isOnlyAdjustLarger);
                return;
            }
        }
    }
} 
```

从上面的代码中，当数据较少时，它会正确映射 pdf 上的宽度。但是当列值很大并且经过调整时，计算出的列宽不会映射到正确的 pdfCell 宽度。

主要亮点是：-

1.  数据填充在 jtable 中
2.  使用 TableColumnAdjuster 调整表格宽度
3.  新的列宽存储在列表中
4.  在打印按钮上，这些宽度用于在 PdfPTable 上打印 PdfCells。

请提出一些建议以在 pdf 上映射表格单元格的宽度。

![在此处输入图像描述](../Images/af5a62fe0cdfc9c4ad4dea446336f4a8.png)

# android - 在android中将元素从3个列表复制到一个

> ID：15293812
> 
> 赞同：2
> 
> 时间：2013-03-08T12:16:24.413
> 
> 标签：android

我有 3 个列表：

```
List<PointF> points = forumlaOfFunctionCharts(series1Numbers);
List<PointF> points2 = forumlaOfFunctionCharts(series2Numbers);
List<PointF> points3 = forumlaOfFunctionCharts(series3Numbers); 
```

如何将这 3 个列表中的所有元素复制到一个列表中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T12:18:53.397

您可以简单地使用 addAll 方法，如下所示：

```
points.addAll(points2);
points.addAll(points3); 
```

一切都将被复制到您的“积分”列表中。

请参阅[此处的参考](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/List.html#addAll%28java.util.Collection%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T12:30:55.237

我认为你可以这样做：

```
List<PointF> newList = new List<PointF>();
newList.addAll(points1);
newList.addAll(points2);
newList.addAll(points3); 
```

但我不知道是什么

```
forumlaOfFunctionCharts 
```

是在做...

# php - mysqldump 生成 0kb 的 sql 文件

> ID：15293814
> 
> 赞同：2
> 
> 时间：2013-03-08T12:16:39.617
> 
> 标签：php, mysql

我正在使用 mysqldump 备份和恢复 mySQL 数据库。我的代码生成一个 sql 文件，但它是空的。这是我的完整代码。非常感谢。

```
<?
   shell_exec("mysqldump -u root -p ilamdb > db/ilamdb.sql");
   echo "Back up complete.";
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T13:00:02.603

您使用了要求您输入密码的选项——`-p`这`mysqldump`当然只能在交互式 shell 中使用。您必须直接指定密码：

```
shell_exec("mysqldump -u root --password=yourpassword ilamdb > db/ilamdb.sql"); 
```

如果您不使用密码，只需省略此参数：

```
shell_exec("mysqldump -u root ilamdb > db/ilamdb.sql"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T13:47:39.580

MySQL备份语法应如下

mysqldump -u --password= >文件.dmp

# php - 在浏览器中通过 url 访问时如何使用 JSON 对象保护 .php 文件

> ID：15293825
> 
> 赞同：0
> 
> 时间：2013-03-08T12:17:05.200
> 
> 标签：php

我希望这不是太难，所以这里有一个故事，我创建了一个简单的过程，它在请求时作为 JSON 对象发送，但出于安全原因，真的想保护（403）文件的内容，如果通过在浏览器中放置一个完整的 URL 来访问它。

这是我的 ajax.php 中的一个脚本

```
<?php
$image = array(
"/trial/images/1.png",
"/trial/images/2.png",
"/trial/images/3.png",
"/trial/images/4.png"
);
  $msg = array(
    'status' => 1,
    'message' => 'Remember to +1',
    'html' => '<p>Thank you for downloading our software <img src="'. $image[array_rand($image)] .'" width="80" height="80" alt="Thank You"></p>'
  );
  echo json_encode($msg);
?> 
```

这是我使用 ajax POST 到该文件以获取 JSON 对象的函数的脚本。

```
function custom_reminder(aElem){
    theLink=$(aElem).attr("href");
    $.ajax({
        type:"POST",
        url:"/includes/ajax.php",
        data:"action=reminder&thepath="+theLink,
        dataType:"json",
        error:function(){window.location=theLink;},
        success:function(msg){
            if(msg.status == 1) {
                display_reminder(msg.html,theLink);
            }else{
                custom_message(msg.message,"error");
                }
        }
    });
} 
```

请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T12:32:36.623

这个故事应该防止带有 AJAX 请求的 CSRF（跨站点请求原谅攻击）。

1.  您可以放置​​一些标头数据并检查客户端是否请求它。
2.  使用会话检查来自客户端的数据，并将其与服务器上的会话进行比较以访问 ajax 请求。
3.  添加代码`strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest')`以确保 xmlhttprequested 来自 ajax
4.  如果您从服务器发送敏感数据并将其存储在有时间限制的客户端上，则生成一些令牌

令牌使用示例：

```
function checkToken( $userId, $eventIdentificator, $token){

       if( $token == sha1( $some_value_grabbed_from_time )){
       return true;
       }
    }
    return false;
} 
```

5\. 添加时间限制用户以使用某些生成的密钥请求数据，以便将来不能在 GET 中使用此哈希密钥并防止对其进行攻击。

生成令牌示例：

```
protected static function _generateToken()
{
    $token = sha1(mt_rand(0, 1000000));
    $_SESSION[$token] = time();
    return $token;
} 
```

并将其验证为：

```
 if ($_SESSION[$token] >= time() - 7200) {
        $valid = true;
     } 
```

6\. 您可以将 COOKIE 添加到 ajax 中，如 IT 安全性所示：[https ://security.stackexchange.com/questions/20015/protecting-against-csrf-when-a-form-is-being-submitted-via-an- ajax 调用](https://security.stackexchange.com/questions/20015/protecting-against-csrf-when-a-form-is-being-submitted-via-an-ajax-call)

7\. 查看 Github 上的示例，如简单类所示：[https ://github.com/foxbunny/CSRF4PHP](https://github.com/foxbunny/CSRF4PHP)

或者 ...

```
public function generateToken() {
    // Create or overwrite the csrf entry in the seesion
    $_SESSION['csrf'] = array();
    $_SESSION['csrf']['time'] = time();
    $_SESSION['csrf']['salt'] = $this->randomString(32);
    $_SESSION['csrf']['sessid'] = session_id();
    $_SESSION['csrf']['ip'] = $_SERVER['REMOTE_ADDR'];
    // Generate the SHA1 hash
    $hash = $this->calculateHash();
    // Generate and return the token
    return base64_encode($hash);
}

protected function checkTimeout($timeout=NULL) {
    if (!$timeout) {
        $timeout = $this->timeout;
    }
    return ($_SERVER['REQUEST_TIME'] - $_SESSION['csrf']['time']) < $timeout;
}

public function checkToken($timeout=NULL) {
    // Default timeout is 300 seconds (5 minutes)

    // First check if csrf information is present in the session
    if (isset($_SESSION['csrf'])) {

        // Check the timeliness of the request
        if (!$this->checkTimeout($timeout)) {
            return FALSE;
        }

        // Check if there is a session id
        if (session_id()) {
            // Check if response contains a usable csrf token
            $isCsrfGet = isset($_GET['csrf']);
            $isCsrfPost = isset($_POST['csrf']);
            if (($this->acceptGet and $isCsrfGet) or $isCsrfPost) {
                // Decode the received token hash
                $tokenHash = base64_decode($_REQUEST['csrf']);
                // Generate a new hash from the data we have
                $generatedHash = $this->calculateHash();
                // Compare and return the result
                if ($tokenHash and $generatedHash) {
                    return $tokenHash == $generatedHash;
                }
            }
        }
    }

    // In all other cases return FALSE
    return FALSE;
} 
```

}

此源代码显示为防止对侧 Ajax 请求进行 CSRF 攻击的最佳实践。它将检查从表单发送的生成数据的获取/发布，并与作为静态变量 ( `_generateToken()`)放在 PHP 对象上的哈希值进行比较

8\. `OWASP`来自 Web 应用程序项目的展示展示了如何通过 X/CSRF 进行攻击的可用示例以及如何防止它们的可用示例。

链接：[https ://www.owasp.org/index.php/Cross-Site_Request_Forgery_%28CSRF%29_Prevention_Cheat_Sheet](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_%28CSRF%29_Prevention_Cheat_Sheet)

大多数情况下，通常是原则上：“双重提交 cookie”，当脚本在每个请求上发送随机生成的 ID 并将其与先前发送的和新发送的 vars 进行比较时。

9\. 编写您自己的 SCRIPT 以测试随机字符串攻击，使用 SHA512 进行更难的攻击，或仅使用下载进行测试：[https ://www.owasp.org/index.php/Category:OWASP_CSRFTester_Project](https://www.owasp.org/index.php/Category:OWASP_CSRFTester_Project)

10\. 添加一些带有圆形示例 time() 的 HTTP HEADER 虚拟数据并比较示例是今天 ODD 或 EVEN 日或 ODD/EVEN 小时/分钟....

11\. 如果在某个时间段（例如 3 分钟）内经常从一个 IP 地址受到攻击，则向管理员发出警报……或阻止临时远程主机……

12\. 如果您仍然不知道 X/CSRF 的工作原理，请查看 YT 上的一些视频示例：[http ://www.youtube.com/watch?v=pDXTDR6xew8](http://www.youtube.com/watch?v=pDXTDR6xew8)

13\. 如果您想知道如何使用`crypt()`和一些 OLD SCHOOL CSRF 预防使用示例： http: [//phpmaster.com/preventing-cross-site-request-forgeries/](http://phpmaster.com/preventing-cross-site-request-forgeries/)

或简单的代码：

```
session_start();

switch($_GET["action"]) {
    case "login":
    if ($_SERVER["REQUEST_METHOD"] == "POST") {
        $user = (isset($_POST["user"]) &&
            ctype_alnum($_POST["user"]) ? $_POST["user"] : null;
        $pass = (isset($_POST["pass"])) ? $_POST["pass"] : null;
        $salt = '$2a$07$my.s3cr3t.SalTY.str1nG$';

        if (isset($user, $pass) && (crypt($user . $pass, $salt) ==
            crypt("admintest", $salt))) {
            $_SESSION["user"] = $_POST["user"];
        }
    }
    break;

    case "logout":
    $_SESSION = array();
    session_destroy();
    break;
}

header("Location: login.php"); 
```

14\. 对于 CODEIGNITER/KOHANA 用户可以通过 HOOKS 简单地使用（在所有类之前作为类加载），并带有注入代码示例：http: [//net.tutsplus.com/tutorials/php/protect-a-codeigniter-application-against -csrf/](http://net.tutsplus.com/tutorials/php/protect-a-codeigniter-application-against-csrf/)

15.  防止通过 JAVASCRIPT 注入代码：

    ```
    $output = preg_replace('/(<(form|FORM)[^>]*(method|METHOD)="(post|POST)"[^>]*>)/',  
                     '$0<input type="hidden" name="' . self::$token_name . '" value="' . self::$token . '">', $output); 
    ```

16.  当您使用 JSON 数据发送或接收数据时进行 put SSL 数据传输，以防止嗅探或查看数据。

17.  根据内容将哈希等数字签名放入标头中。例如，散列您的内容并放入头文件“Digital-Sign：md5-data”。内容应该被散列并作为数字签名的新变量放入标题中。客户端检查数据并使用哈希进行比较以进行检查是真的。您可以将盐与发送数据的时间戳结合使用。md5($timestasmp.$content)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T12:19:27.483

你可以查一下推荐人。如果它来自同一主机，则提供 JSON 文件。否则显示 403。

其他选项可能是基于不同值的散列的秘密。将它们与 AJAX 请求一起发送并在您的 PHP 文件中检查它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T12:27:25.550

使用会话：

`$_SESSION['key'] = 'randomcode';`

将此密钥的加密版本发送到您的 AJAX 调用。

让 AJAX 脚本将接收到的密钥与会话匹配。如果匹配，您就知道该请求来自访问过您下载页面的人。

# xslt - 交响乐 xsl 包括

> ID：15293829
> 
> 赞同：1
> 
> 时间：2013-03-08T12:17:15.793
> 
> 标签：xslt, include, symphony-cms

在我的 index.xsl 我有这个：

```
<xsl:include href="../utilities/onenicebox.xsl" /> 
```

但我希望它仅在我第一次访问 index.xsl 时出现，而不是在浏览网站并返回主页后出现。

我试过了`include_once`，`import`但都返回错误并打破页面。有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:40:42.490

听起来您需要设置一个 cookie 并在主页上显示该框之前检查它的存在/值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T13:37:11.890

有一个旧扩展可以做到这一点[http://getsymphony.com/download/extensions/view/20781/](http://getsymphony.com/download/extensions/view/20781/)，但它与 S2.3.2 不兼容。通过一点点努力，我认为它可以根据您的需要进行更新。

# java - 使用 CXF 从 Maven 生成 WSDL2Java

> ID：15293830
> 
> 赞同：4
> 
> 时间：2013-03-08T12:17:16.963
> 
> 标签：java, maven, wsdl, cxf, wsdl2java

例如，我有这样的 cxf-codegen-plugin：

```
 <plugin>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-codegen-plugin</artifactId>
            <version>${cxf.version}</version>
            <dependencies>
                <dependency>
                    <groupId>org.apache.cxf</groupId>
                    <artifactId>cxf-rt-bindings-soap</artifactId>
                    <version>${cxf.version}</version>
                </dependency>
            </dependencies>
            <executions>
                <execution>
                    <id>generate-jaxb</id>
                    <phase>generate-sources</phase>
                    <configuration>
                        <additionalJvmArgs>-Dfile.encoding=UTF8</additionalJvmArgs>
                        <wsdlOptions>
                            <wsdlOption>
                                <wsdl>src/main/resources/wsdl/MyWsdl.wsdl</wsdl>
                                <extraargs>
                                    <extraarg>-wsdlLocation</extraarg>
                                    <extraarg></extraarg>
                                    <extraarg>-client</extraarg>
                                </extraargs>
                            </wsdlOption>
                        </wsdlOptions>
                    </configuration>
                    <goals>
                        <goal>wsdl2java</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

当我的 WSDl 存储在我的本地项目中时，它工作得很好：

```
src/main/resources/wsdl/MyWsdl.wsdl 
```

我想要实现的是从远程 Maven 存储库下载 WSDL 并以某种方式将其传递给`<wsdl>`元素。

就像是：

```
<wsdl>
 <dependency>...</dependency>
</wsdl> 
```

我找不到有关如何执行此操作的任何信息。这样的选择是否存在？或者它应该以某种不同的方式完成，然后尝试在`<wsdl>`元素中传递 WSDL？

请指教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T13:23:15.600

您可以使用`<wsdlArtifact>`从 maven 加载 WSDL：

```
<configuration>
    ...
    <wsdlOptions>
        <wsdlOption>
            <wsdlArtifact>
                <groupId>your.group.id</groupId>
                <artifactId>YourWSDLService</artifactId>
                <version>0.1.2-SNAPSHOT</version>
            </wsdlArtifact>
        </wsdlOption>
    </wsdlOptions>
    ...
</configuration> 
```

# c++ - 从 dll 创建自定义 main

> ID：15293833
> 
> 赞同：0
> 
> 时间：2013-03-08T12:17:30.303
> 
> 标签：c++, dll, main, getmessage

我正在围绕 .NET 和 Win API 创建一个层。在用户进入主函数之前我需要准备一些东西，比如调用`GetMessage`函数。

是否可以从 dll 启动程序，然后在单独的线程上调用自定义主函数？

如果我让在不同的线程上`GetMessage`运行会更容易，但是一旦我调用主要威胁，鼠标就会大大减慢几乎一分钟，就好像我根本没有调用一样。但是当我在 Visual Studio 中调试时，它确实输入了，所以这不是问题。`SetWindowsHookEx``WH_MOUSE_LL``GetMessage``GetMessage`

希望有人可以提供帮助。

**更新**

这就是我想要实现的目标。

用户源（cpp）

```
include MyDLL
custom main(this main is defined by a user)
{

} 
```

我的DLL (cpp)

```
main(real starting point of the application)
{
    set the windows hooks
    call the main defined by the user on a different thread
    message loop
} 
```

# eclipse - Jboss 服务无法启动

> ID：15293835
> 
> 赞同：0
> 
> 时间：2013-03-08T12:17:36.097
> 
> 标签：eclipse, hibernate, gwt, jboss, persistence

我正在 JBoss AS7 上的 Eclipse 中开发 GWT 应用程序。但是，当我尝试部署时，我得到了这个

```
13:11:52,546 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-1) MSC00001: Failed to start service jboss.persistenceunit."ctivTools_GWT.war#Catalog": org.jboss.msc.service.StartException in service jboss.persistenceunit."ctivTools_GWT.war#Catalog": Failed to start service
at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1767) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) [rt.jar:1.7.0_15]
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) [rt.jar:1.7.0_15]
at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_15]

Caused by: java.lang.RuntimeException: error trying to scan <jar-file>: vfs:/C:/Users/mettens/Documents/Startproject%20GWT/jboss-as-7.1.1.Final/bin/content/ctivTools_GWT.war/WEB-INF/classes/
    at org.hibernate.ejb.Ejb3Configuration.scanForClasses(Ejb3Configuration.java:854)
    at org.hibernate.ejb.Ejb3Configuration.configure(Ejb3Configuration.java:596)
    at org.hibernate.ejb.HibernatePersistence.createContainerEntityManagerFactory(HibernatePersistence.java:72)
    at org.jboss.as.jpa.service.PersistenceUnitServiceImpl.createContainerEntityManagerFactory(PersistenceUnitServiceImpl.java:162)
    at org.jboss.as.jpa.service.PersistenceUnitServiceImpl.start(PersistenceUnitServiceImpl.java:85)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    ... 3 more
Caused by: java.lang.RuntimeException: JBAS011431: Could not load entity class 'be.vito.ctivtools.client.generic.GwtRpcDataSource' with PersistenceUnitInfo.getClassLoader()
    at org.jboss.as.jpa.hibernate4.HibernateAnnotationScanner.getPackagesInJar(HibernateAnnotationScanner.java:175)
    at org.hibernate.ejb.Ejb3Configuration.addScannedEntries(Ejb3Configuration.java:489)
    at org.hibernate.ejb.Ejb3Configuration.scanForClasses(Ejb3Configuration.java:851)
    ... 9 more
Caused by: java.lang.ClassNotFoundException: be.vito.ctivtools.client.generic.GwtRpcDataSource from [Module "deployment.ctivTools_GWT.war:main" from Service Module Loader]
    at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)
    at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120)
    at org.jboss.as.jpa.hibernate4.HibernateAnnotationScanner.getPackagesInJar(HibernateAnnotationScanner.java:171) 
```

Hibernate 服务显然不会启动。我不知道为什么。我尝试添加更多库、方面和类，但没有任何效果。我将我的应用程序编译为 WAR 文件，然后部署它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:42:07.570

在您的代码库中搜索 be.vito.ctivtools.client.generic.GwtRpcDataSource。

确定它应该包含在哪个二进制文件 (jars) 中。确保 jar 在您的 WEB-INF/lib 中。

如果您不构建任何 jar，请确保 GwtRpcDataSource.class 文件位于 WEB-INF/classes/be/vito/ctivtools/client/generic 文件夹中。

# nagios - 不在服务详细信息窗口中显示服务

> ID：15293840
> 
> 赞同：0
> 
> 时间：2013-03-08T12:18:03.127
> 
> 标签：nagios

我定义了很多服务。有时我想禁用服务，但我不想删除服务定义。有一些[标志](http://nagios.sourceforge.net/docs/3_0/objectdefinitions.html#service)可以禁用检查：

```
 active_checks_enabled            0
   passive_checks_enabled           0 
```

但标志仍在显示（见图）：

![残疾人服务](../Images/e9f89d41d0bf857df2a961b0bd0241f6.png)

是否有避免nagios显示服务的标志？我当然可以从服务定义中将其注释掉，但我更愿意使用标志。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:25:26.967

我认为`register 0`应该可以工作，这样服务就不会在 nagios 上注册

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T03:08:07.863

禁用主动检查后（使大 X 出现），只需提交该服务的*被动*检查结果。将被动检查设置为“确定”。我通常添加文本“重置”，以便其他观看者知道为什么它突然变成“绿色”。这样做会从“问题”屏幕中删除故障。无需更改配置。

将支票“退回”。您只需再次启用主动检查。

# authentication - 使用 Vanilla 论坛使用 Cookie 对用户进行身份验证

> ID：15293843
> 
> 赞同：4
> 
> 时间：2013-03-08T12:18:09.473
> 
> 标签：authentication, cookies

我正在我的网站 mydomain.com/forums 上运行一个论坛，它使用 Vanilla 框架。

但是，我希望在该论坛上注册的用户能够在我网站的其他页面（位于 mydomain.com/blog）上发表评论。因此，我需要一种方法来检查用户是否已登录，或者如果没有，则为他们提供 Vanilla 登录框。

我的 Vanilla Code 根本不在我的博客页面上，所以我需要一些额外的脚本。经过大量的挖掘，我在网上找到了这个，[https:](https://gist.github.com/lincolnwebs/700805) //gist.github.com/lincolnwebs/700805，如果已登录，则为 user_id，如果未登录，则为 0。所以它看起来很好用，因为我没有t 必须包括整个 vanilla 框架。

该脚本似乎正在检查用户浏览器上 cookie 的值。有人可以伪造 cookie 的价值并访问某人的帐户吗？

作为一个相对新手，有人可以解释这是否是一种安全可靠的方式来验证用户是否已登录？我花了很长时间才找到这个，它似乎被隐藏起来/没有公开。此外，该脚本也不是 100% 完美的，因为它在静态函数中使用了 $this。

谢谢

```
<?php
/**
 * @copyright Vanilla Forums Inc.
 * @license GNU GPL2
 */

/**
 * Instantiating this class will store current user's ID from cookie as $this->UserID.
 */
class VanillaIdentity {

   # Copy these from Vanilla config
   public $CookieName = 'Vanilla';
   public $CookieSalt = ''; 
   public $CookieHashMethod = 'md5';
   public $UserID = 0;

   /**
    * Returns the unique id assigned to the user in the database (retrieved
    * from the session cookie if the cookie authenticates) or FALSE if not
    * found or authentication fails.
    *
    * @return int
    */
   public function __construct() {         
      if (!$this->_CheckCookie($this->CookieName)) return 0;

      list($UserID, $Expiration) = $this->GetCookiePayload($this->CookieName);

      if (!is_numeric($UserID) || $UserID < -2) // allow for handshake special id
         $this->UserID = 0;
      else
         $this->UserID = $UserID;
   }

   public static function GetCookiePayload($CookieName) {
      if (!self::CheckCookie($CookieName)) return FALSE;

      $Payload = explode('|', $_COOKIE[$CookieName]);

      // Get rid of check fields like HashKey, HMAC and Time
      array_shift($Payload);
      array_shift($Payload);
      array_shift($Payload);

      return $Payload;
   }

   protected function _CheckCookie($CookieName) {
      return self::CheckCookie($CookieName);
   }

   public static function CheckCookie($CookieName) {

      if (empty($_COOKIE[$CookieName])) {
         return FALSE;
      }

      $CookieHashMethod = $this->CookieHashMethod;
      $CookieSalt = $this->CookieSalt;

      $CookieData = explode('|', $_COOKIE[$CookieName]);
      if (count($CookieData) < 5) {
         return FALSE;
      }

      list($HashKey, $CookieHash, $Time, $UserID, $Expiration) = $CookieData;
      if ($Expiration < time() && $Expiration != 0) {
         return FALSE;
      }

      $Key = self::_Hash($HashKey, $CookieHashMethod, $CookieSalt);
      $GeneratedHash = self::_HashHMAC($CookieHashMethod, $HashKey, $Key);

      if ($CookieHash != $GeneratedHash) {
         return FALSE;
      }

      return TRUE;
   }

   /**
    * Returns $this->_HashHMAC with the provided data, the default hashing method
    * (md5), and the server's COOKIE.SALT string as the key.
    *
    * @param string $Data The data to place in the hash.
    */
   protected static function _Hash($Data, $CookieHashMethod, $CookieSalt) {
      return Gdn_CookieIdentity::_HashHMAC($CookieHashMethod, $Data, $CookieSalt);
   }

   /**
    * Returns the provided data hashed with the specified method using the
    * specified key.
    *
    * @param string $HashMethod The hashing method to use on $Data. Options are MD5 or SHA1.
    * @param string $Data The data to place in the hash.
    * @param string $Key The key to use when hashing the data.
    */
   protected static function _HashHMAC($HashMethod, $Data, $Key) {
      $PackFormats = array('md5' => 'H32', 'sha1' => 'H40');

      if (!isset($PackFormats[$HashMethod]))
         return false;

      $PackFormat = $PackFormats[$HashMethod];
      // this is the equivalent of "strlen($Key) > 64":
      if (isset($Key[63]))
         $Key = pack($PackFormat, $HashMethod($Key));
      else
         $Key = str_pad($Key, 64, chr(0));

      $InnerPad = (substr($Key, 0, 64) ^ str_repeat(chr(0x36), 64));
      $OuterPad = (substr($Key, 0, 64) ^ str_repeat(chr(0x5C), 64));

      return $HashMethod($OuterPad . pack($PackFormat, $HashMethod($InnerPad . $Data)));
   }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:51:52.760

我不是 Vanilla 和 JavaScript 专家。我非常了解 HTTP 身份验证和 SSO，我将尝试澄清您的几个问题。

首先，在 HTTP 身份验证之后，应用程序将用户 cookie 设置到浏览器。在下一次请求时，浏览器会向服务器发送一个 cookie。请注意，在设置 cookie 期间使用什么路径很重要。如果路径是“/”，则浏览器将 cookie 发送到服务器上的所有应用程序。

cookie 可以被劫持并用于访问应用程序。请注意，黑客可能无法解密 cookie - 只需使用它即可。有关详细信息，请参阅以下链接：[https](https://www.owasp.org/index.php/Session_hijacking_attack) ://www.owasp.org/index.php/Session_hijacking_attack 。要防止会话劫持，您可以使用 HTTPS。

要解决您的问题，您需要 1) 为 mydomain.com/forums 和 mydomain.com/blog 使用相同的用户存储库 在这种情况下，用户“bob”将是两个应用程序的同一用户。2) 确保 Vanilla 使用路径“/”设置 cookie 在这种情况下，浏览器会为 mydomain.com/forums 和 mydomain.com/blog 发送 cookie。

我找到了以下 Vanilla 插件——它可以完全解决你的问题：http: [//vanillaforums.org/page/SingleSignOn](http://vanillaforums.org/page/SingleSignOn)

希望能帮助到你。如果您需要任何其他说明，请发表评论。

# node.js - 获取 mongodb 集合中的最大元素引发异常

> ID：15293846
> 
> 赞同：2
> 
> 时间：2013-03-08T12:18:18.743
> 
> 标签：node.js, mongodb

我对下面的代码有疑问。我尝试在“链接”集合中获取 max(seq)。运行下面的代码后，我收到“ **FATAL ERROR: JS Allocation failed - process out of memory** ”错误。我怎样才能克服这个问题？谢谢您的回复。

```
db.collection('links', function(err, collection) {  
        var options = { "limit": 1, "sort": [['seq','desc']]};

        collection.find({}, options , function(err, docs) {            
            console.log("Returned #" + docs.seq + " documents");
        }); 
}); 
```

*注意：* 顺便说一下，节点的内存使用量在运行后大大增加。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:43:24.787

为您的集合添加一个索引，`seq`这样 Mongo 就不必将整个集合加载到内存中进行排序。

此外，在当前代码中使用`findOne`而不是`find`作为参数实际上是光标对象，而不是带有 max 的文档。如：`docs``seq`

```
var options = { "sort": [['seq','desc']] };
collection.findOne({}, options , function(err, doc) {
    console.log("Returned #" + doc.seq + " documents");
}); 
```

# java-io - 我想使用Java获取文件的下载状态，java中有什么方法可以做到吗？请阅读完整说明

> ID：15293850
> 
> 赞同：2
> 
> 时间：2013-03-08T12:18:32.673
> 
> 标签：java-io

我想使用 java 读取文件（我知道 java IO utils 可以完成所需的操作），但问题是：我要访问的文件必须从远程机器下载。那么我怎么知道文件下载已完成还是仍在继续？我正在使用一个linux盒子。有没有办法检查java中的下载完成状态？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-08T17:58:29.967

我正在使用它来检查正在复制的文件是否已完成的状态。也许这对你也有帮助。如果我错了，请纠正我。

1.  获取文件大小
2.  等待一段时间（比如 1 秒）
3.  检查文件大小
4.  如果此时正在下载文件，那么新的大小将大于之前的大小；所以重复步骤 - 1、2、3，直到你得到确切的尺寸。

代码示例

```
// sourceFile is the downloading file
if (sourceFile.exists()) {
    try {
        long size = sourceFile.length();
        Thread.sleep(1000);
        long newSize = sourceFile.length();
        if (size < newSize) {
            while (size < newSize) {
                System.out.println("downloading...");
                size = sourceFile.length();
                Thread.sleep(1000);
                newSize = sourceFile.length();
            }
        }
        System.out.println("File Downloaded");
        System.out.println("Size: " + newSize);
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

# c# - 如何在 C# 中从 sql server 运行代码

> ID：15293859
> 
> 赞同：2
> 
> 时间：2013-03-08T12:19:11.000
> 
> 标签：c#, sql-server, winforms

```
 SqlCommand cmd = new SqlCommand("select Developer from Stackoverflow 
 where UserID='786' and Developer='Sufiyan'", con);
 if (con.State == ConnectionState.Closed)
 {
    con.Open();
 }
 SqlDataReader reader = cmd.ExecuteReader();
 if (reader.Read())
 {
    string codeSnippet = reader["CodeSnippet"].ToString();
    dynamic script = 
     CSScript.LoadCode(@"
     using System;
     using System.Windows.Forms;
     using System.Collections.Generic;
     using System.Data;
     using System.Windows.Forms;
     using System.Data.SqlClient;
     public class RunFromSqlServer
     {
       public void RunCode(string developer){" + codeSnippet + "}"+
               "}").CreateObject("*");script.RunCode("Mohammad Sufiyan Shaikh");
 }
 if (con.State == ConnectionState.Open)
 {
    con.Close();
 } 
```

其中 codeSnippet 可以是您想要运行的任何 c# 代码我已经发布了这个问题以及帮助其他人的答案..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T12:30:18.310

你不能像那样真正混合和匹配 SQL 和 c# 代码。有一种方法可以使用名为 SQL CLR 的功能在 SQL Server 2005+ 上运行 .net 代码，但您可以执行的操作存在限制。这是一个教程：[如何：创建和运行 CLR SQL Server 用户定义函数](https://web.archive.org/web/20150112060421/http://msdn.microsoft.com/en-us/library/w2kae45k(v=vs.80).aspx)（[原始链接](http://msdn.microsoft.com/en-us/library/w2kae45k%28v=vs.80%29.aspx)）。

您还可以创建其他内容，例如 SQL CLR 触发器和存储过程。研究 SQL CLR 以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T12:41:56.503

在我阅读这个问题之前，我不知道 CS-Script 的存在。非常有趣的技术。从文档看来，您使用它是错误的。

[http://www.csscript.net/help/script_hosting_guideline_.html](http://www.csscript.net/help/script_hosting_guideline_.html)

你应该做这样的事情：

```
var result = CSScript.Eval("Mohammad Sufiyan Shaikh",
                            @"func(string user) {"
                                  + codeSnippet + ");
                              }"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T12:59:18.923

嗯，它很酷，但我怀疑它是否非常有用，因为你失去了从编译代码中获得的很多好东西。例如，如果有人将语法错误的代码插入数据库表中，您的程序会突然崩溃。

# windows-phone-7 - 过滤掉 Windows Phone 7 上的隐藏和系统共享点文件夹

> ID：15293861
> 
> 赞同：2
> 
> 时间：2013-03-08T12:19:30.243
> 
> 标签：windows-phone-7, sharepoint

我正在使用 Microsoft.Sharepoint.Client 命名空间中的类来处理 sharepoint 站点。当我在 Windows Phone 7 上工作时，我找不到 SPFolderCollection/SPFolder 类。

我需要过滤掉隐藏文件夹和系统文件夹（eg_vti_pvt）​​。

我发现一个例子如下：

```
// filter the folders like “_catalogs” or “_private”
                if (folder.ParentListId != Guid.Empty)
                {
                    SPList list  = web.Lists[folder.ParentListId];
//filter the folders like “Reporting Templates” or “IWConvertdForms”
                    if (list.Hidden == false) 
```

（示例取自[http://go4answers.webhost4life.com/Example/know-spfolder-invisible-visible-27871.aspx](http://go4answers.webhost4life.com/Example/know-spfolder-invisible-visible-27871.aspx)）。

但是，由于我没有“SP”类，我无法在 Windows Phone 上实现它（没有 ParentListId 方法）。

任何想法/解决方法将不胜感激。

谢谢你。

PS 请注意，我想不惜一切代价避免使用 CAML；我只需要能够列出和检索文件和文件夹的 url，我不需要使用列表或通知。

**更新** 所以看来我可以绕过以下限制：

```
Foldercollection folder_assist = new FolderCollection( WHAT DO I PUT HERE??? );
    ctx.Load(folders);
                ctx.ExecuteQueryAsync(delegate(object sender1, ClientRequestSucceededEventArgs args)
                {
                foreach (Folder f in folders)
                {
                    ctx.Load(f.ParentFolder);
                }
                ctx.ExecuteQuery();
                foreach (Folder f in folders)
                {
                    List ejh;
                     // if we are in the top folder, the .parentfolder may be null
                    if (f.ParentFolder != null && f.ParentFolder.Name != "")
                    {
                        ejh = ctx.Web.Lists.GetByTitle(f.ParentFolder.Name);
                    }
                    else
                    {
                        ejh = ctx.Web.Lists.GetByTitle(f.Name);
                    }
                    ctx.Load(ejh);

                    try
                    {
                        ctx.ExecuteQuery();
                    }
                    catch
                    {
                        ejh = null;
                    }
                    if (ejh != null)
                    {
                        if (ejh.Id != Guid.Empty)
                        {
                            if (ejh.Hidden == false)
                            {
                     folder_assist.Add(f.ServerRelativeURL;
                         }
                        }
                    }
                } 
                win.Dispatcher.BeginInvoke((Action)(() => DO SOME WORK...

            }, delegate(object sender1, ClientRequestFailedEventArgs args)
                {
                   win.Dispatcher.BeginInvoke((Action)(() => MessageBox.Show("something went wrong" + args.ToString())));
                }); 
```

我现在遇到的问题是第一行 - 似乎 Microsoft.Sharepoint.FolderCollection 构造函数需要上下文（我拥有并且可以轻松传递）和 ObjectPath 类型，因为我只需要一个占位符来收集所有未隐藏且不特殊的文件夹。

我该如何解决这个问题？

**更新 2**

好的，很明显的结果，我只是用于`List<Folder>`fassist。

但是，我注意到还有两件事：

a）我的解决方案的性能相当令人震惊。以前需要一些时间才能获得列表（当我没有在异步线程中过滤时），现在需要 10-20 秒才能获得列表（而且我在服务器上只有少数项目！）。

有什么想法/建议吗？（真正的问题是我不能只将文件夹集合传递回 UI 线程来解析和一一添加，因为我仍然需要为 parentFolder 执行查询。如果我尝试在 foreach() 循环中异步执行此操作UI线程，我得到一个非实例化的对象，因为UI线程不等待查询的执行。如果我使用AutoResetEvent让它等待，UI线程就会被锁定。WP7不允许使用ClientContext.Executequery（ ) 在 UI 线程中。太糟糕了。)

b）我访问的每个文件夹中似乎仍然有“表单”文件夹！现在正在努力，但任何想法都将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-06T16:36:26.803

## 如何使用 SharePoint CSOM 排除“系统”文件夹

**选项1**

[Folder 类](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.client.folder(v=office.15).aspx)公开[Folder.ListItemAllFields 属性](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.client.folder.listitemallfields(v=office.15).aspx)，该属性指定与文件夹关联的列表项，对于“系统”文件夹，相应的列表项不存在。

以下示例演示如何加载文件夹并验证该文件夹是常规文件夹还是“系统”文件夹：

```
using (var ctx = new ClientContext(webUri))
{

      var list = ctx.Web.Lists.GetByTitle(listTitle);
      var folder = list.RootFolder;
      ctx.Load(folder);
      ctx.Load(folder.Folders, fcol => fcol.Include(f => f.Name, f => f.ServerRelativeUrl, f => f.ListItemAllFields));
      ctx.ExecuteQuery();
      foreach (var subFolder in folder.Folders)
      {
           bool systemFolder = subFolder.ListItemAllFields.ServerObjectIsNull != null && subFolder.ListItemAllFields.ServerObjectIsNull.Value;
           if(!systemFolder)
              //Process regular Folder...
      }
 } 
```

**选项 2**

下面演示了通过 SharePoint CSOM 使用 CAML 查询加载文件夹的另一种方法

```
using (var ctx = new ClientContext(webUri))
{

    var list = ctx.Web.Lists.GetByTitle(listTitle);
    var items = list.GetItems(CamlQuery.CreateAllFoldersQuery());
    ctx.Load(items,icol => icol.Include(i => i.Folder));
    ctx.ExecuteQuery();
    var folders = items.Select(i => i.Folder);
    foreach (var folder in folders)
    {
        //Process folder...
    }
} 
```

关键点：

*   这种方法的优点是只返回常规文件夹

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T12:22:31.430

类前面没有 SP 的原因是您使用的示例是服务器对象模型，它仅在安装了 SharePoint 的服务器上运行。

您正在使用的 Windows Phone 上的版本是客户端对象模型，并且它在所有类上都没有 SP 前缀。

理想情况下，要回答我需要知道您从哪里获得对文件夹的引用的问题？网站、Web 列表？或者你为什么要枚举文件夹？

FolderCollection 必须来自客户端对象模型中某处的对象。

例如，ctx.Web.Folders 将返回一个您可以枚举的FolderCollection，而不仅仅是创建一个新的FolderCollection。

大多数更高级别的对象（如 Web 和 List）通常具有 .Folders 属性，您可以从中检索文件夹列表，而无需使用 CAML。

您可以尝试使用此代码。

```
 ClientContext ctx = new ClientContext("http://yoururl");

        var webFolders = ctx.Web.Folders;
        ctx.Load(webFolders);
        ctx.Load(ctx.Web.Folders, folders => folders.Include(folder => folder.ParentFolder));
        ctx.Load(ctx.Web.Folders, folders => folders.Include(folder => folder.Folders));

        ctx.ExecuteQuery();
        foreach (var folder in webFolders)
        {
           // Do stuff here!
        } 
```

它将从 Web 加载所有文件夹（实际上是根文件夹）及其父级和子级。我仍然不知道如何以有效的方式隐藏文件夹。

请参阅我的评论，了解为什么我认为代码运行缓慢。

编辑：

您可以尝试这样做以获取 Web 中的所有文档库。

```
 var webLists = ctx.Web.Lists;
        ctx.Load(webLists);

        // request that List.RootFolder is returned
        ctx.Load(ctx.Web.Lists, lists => lists.Include(list => list.RootFolder ));
        // request that RootFolder.Folders is returned
        ctx.Load(ctx.Web.Lists, lists => lists.Include(list => list.RootFolder.Folders ));
        // only return lists with a BaseType of 101 (Document Library)
        ctx.Load(ctx.Web.Lists, lists => lists.Where(list => list.BaseTemplate == 101));

        ctx.ExecuteQuery();
        foreach (var list in webLists)
        {
            var rootFolder = list.RootFolder;
            // Do stuff here!
        } 
```

# node.js - 像访问数据库一样访问集合

> ID：15293863
> 
> 赞同：0
> 
> 时间：2013-03-08T12:19:32.217
> 
> 标签：node.js, mongodb, mongoose

我想知道是否可以使用集合作为数据库来使用猫鼬。

场景是，我正在使用只能拥有数据库的主机，但我想创建使用不同数据库的各种站点。所以我会在本地有这个：

```
var dbUrl = 'mongodb://127.0.0.1/database';
mongoose.connect(dbUrl); 
```

和我的数据库，对于我想使用的每个“db”都有一个集合，例如：

```
db.site1;
db.site2;
db.site3; 
```

然后，我将设置 mongoose，将`db.site1`其作为这个特定站点的主数据库。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T22:42:30.363

数据库和集合不能以任何方式互换使用。您确定托管只让您拥有一个数据库吗？他们可能只让您拥有一个 MongoDB 服务器，该服务器实际上可以容纳多个数据库。

# jquery - 使用 jquery 序列化表单不会序列化所有字段

> ID：15293866
> 
> 赞同：0
> 
> 时间：2013-03-08T12:19:34.637
> 
> 标签：jquery, json

我正在尝试使用 jquery 序列化我的表单，但它没有按预期工作。许多其他字段中只有一个字段被序列化。

我的 HTML：

```
<form action="/Devis/auto" id="theForm" method="post" novalidate="novalidate"
class="ui-formwizard ui-helper-reset ui-widget ui-widget-content ui-corner-all">
    <div id="fieldWrapper">
        <fieldset id="first" class="step ui-formwizard-content" style="display: none; margin-left: -1148px; width: 1148px;">
            <legend>Information conducteur</legend>
            <div class="editor-label">
                <label for="DriverInfoViewModel_DriverInfo_NoClaimsDegree">Degré B/M</label>
            </div>
            <div class="editor-field">
                <select data-val="true" data-val-range="[fr-FR: Range]" data-val-range-max="22"
                data-val-range-min="-3" data-val-required="Le champ Degré B/M est obligatoire."
                id="DriverInfoViewModel_DriverInfo_NoClaimsDegree" name="DriverInfoViewModel.DriverInfo.NoClaimsDegree"
                class="ui-wizard-content valid" disabled="disabled">
                    <option value="-3">-3</option>
                    <option value="-2">-2</option>
                    <option value="-1">-1</option>
                    <option value="0">0</option>
                    <option selected="selected" value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                    <option value="13">13</option>
                    <option value="14">14</option>
                    <option value="15">15</option>
                    <option value="16">16</option>
                    <option value="17">17</option>
                    <option value="18">18</option>
                </select> <span class="text-error field-validation-valid" data-valmsg-for="DriverInfoViewModel.DriverInfo.NoClaimsDegree"
                data-valmsg-replace="true"></span>

            </div>
            <div>
                <label for="DriverInfoViewModel_DriverInfo_DrivingLicenceDate">Date de permis de conduire</label>
            </div>
            <div>
                <input class="datefield ui-wizard-content valid" data-val="true" data-val-required="Le champ Date de permis de conduire est obligatoire."
                id="DriverInfoViewModel_DriverInfo_DrivingLicenceDate" name="DriverInfoViewModel.DriverInfo.DrivingLicenceDate"
                type="date" value="10/02/2013"> <span class="text-error inline field-validation-valid" data-valmsg-for="DriverInfoViewModel.DriverInfo.DrivingLicenceDate"
                data-valmsg-replace="true"></span>

            </div>
            <div class="editor-label">
                <label for="DriverInfoViewModel_DriverInfo_DisasterHistory">Nombre de sinistres</label>
            </div>
            <div class="editor-field">
                <select data-val="true" data-val-required="Le champ Nombre de sinistres est obligatoire."
                id="DriverInfoViewModel_DriverInfo_DisasterHistory" name="DriverInfoViewModel.DriverInfo.DisasterHistory"
                class="ui-wizard-content valid" disabled="disabled">
                    <option selected="selected" value="NoDisaster">Pas de sinistre</option>
                    <option value="NoDisasterAndLessThan3YearsDMInsured">Pas de sinistre et garantie DM de moins de 3 ans</option>
                    <option value="OneDisaster">1 sinistre</option>
                    <option value="TwoDisasters">2 sinistres</option>
                    <option value="MoreThanTwoDisasters">3 sinistres</option>
                </select> <span class="text-error field-validation-valid" data-valmsg-for="DriverInfoViewModel.DriverInfo.DisasterHistory"
                data-valmsg-replace="true"></span>

            </div>
        </fieldset>
        <fieldset id="vehicleinfo" class="step ui-formwizard-content" style="display: none; width: 1148px; margin-left: -1148px;">
            <legend>Information véhicule</legend>
            <div class="editor-label">
                <label for="CarInfoViewModel_CarInfo_CarValue">Valeur du véhicule</label>
            </div>
            <div class="editor-field">
                <input data-val="true" data-val-required="Le champ Valeur du véhicule est obligatoire."
                id="CarInfoViewModel_CarInfo_CarValue" name="CarInfoViewModel.CarInfo.CarValue"
                type="text" value="15000" class="ui-wizard-content valid" disabled="disabled"> <span class="text-error field-validation-valid" data-valmsg-for="CarInfoViewModel.CarInfo.CarValue"
                data-valmsg-replace="true"></span>

            </div>
            <div class="editor-label">
                <label for="CarInfoViewModel_CarInfo_AudioValue">Valeur de l'équipement audio</label>
            </div>
            <div class="editor-field">
                <input data-val="true" data-val-required="Le champ Valeur de l'équipement audio est obligatoire."
                id="CarInfoViewModel_CarInfo_AudioValue" name="CarInfoViewModel.CarInfo.AudioValue"
                type="text" value="1000" class="ui-wizard-content valid" disabled="disabled"> <span class="text-error field-validation-valid" data-valmsg-for="CarInfoViewModel.CarInfo.AudioValue"
                data-valmsg-replace="true"></span>

            </div>
            <div class="editor-label">
                <label for="CarInfoViewModel_CarInfo_EngineCapacity">Cylindrée</label>
            </div>
            <div class="editor-field">
                <input data-val="true" data-val-required="Le champ Cylindrée est obligatoire."
                id="CarInfoViewModel_CarInfo_EngineCapacity" name="CarInfoViewModel.CarInfo.EngineCapacity"
                type="text" value="1500" class="ui-wizard-content valid" disabled="disabled"> <span class="text-error field-validation-valid" data-valmsg-for="CarInfoViewModel.CarInfo.EngineCapacity"
                data-valmsg-replace="true"></span>

            </div>
            <div class="editor-label">
                <label for="CarInfoViewModel_CarInfo_AdditionalSeats">Nombre de places additionnelles</label>
            </div>
            <div class="editor-field">
                <input data-val="true" data-val-required="Le champ Nombre de places additionnelles est obligatoire."
                id="CarInfoViewModel_CarInfo_AdditionalSeats" name="CarInfoViewModel.CarInfo.AdditionalSeats"
                type="text" value="1" class="ui-wizard-content valid" disabled="disabled"> <span class="text-error field-validation-valid" data-valmsg-for="CarInfoViewModel.CarInfo.AdditionalSeats"
                data-valmsg-replace="true"></span>

            </div>
            <div class="editor-label">
                <label for="CarInfoViewModel_CarInfo_FirstRegistration">Date de mise en circulation</label>
            </div>
            <div class="editor-field">
                <input class="datefield ui-wizard-content valid" data-val="true" data-val-required="Le champ Date de mise en circulation est obligatoire."
                id="CarInfoViewModel_CarInfo_FirstRegistration" name="CarInfoViewModel.CarInfo.FirstRegistration"
                type="date" value="01/01/2013" disabled="disabled"> <span class="text-error field-validation-valid" data-valmsg-for="CarInfoViewModel.CarInfo.FirstRegistration"
                data-valmsg-replace="true"></span>

            </div>
        </fieldset>
        <fieldset id="comparatif" class="step ui-formwizard-content" style="display: block; width: 1148px; margin-left: 0px;">
            <div id="result"></div>
        </fieldset>
        <fieldset id="customize" class="step ui-formwizard-content" style="display: none; width: 1148px; margin-left: -1148px;">
            <legend>Customize</legend>
            <div id="custom"><span>137,21</span>

            </div>
        </fieldset>
    </div>
</form> <pre></pre> 
```

我的脚本：

```
$('pre').text(JSON.stringify($('#theForm').serialize(), null, '  ')); 
```

请参阅[**jsfiddle上的代码**](http://jsfiddle.net/graphicsxp/Q5s5V/6/)

我试过做：

```
$('#theForm').serializeArray() 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T12:30:51.180

尝试删除

```
disabled="disabled" 
```

在序列化之前。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T12:34:48.050

从 jquery API 文档，[http](http://api.jquery.com/serializeArray/) ://api.jquery.com/serializeArray/ ：

> .serializeArray() 方法使用成功控制的标准 W3C 规则来确定它应该包含哪些元素；特别是**该元素不能被禁用**

尝试从您的和标签中删除`disabled="disabled"`属性。`input``select`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T12:26:07.613

[这是来自http://api.jquery.com/serialize/](http://api.jquery.com/serialize/)的摘录：

> 注意：只有“成功的控件”被序列化为字符串。由于未使用按钮提交表单，因此没有序列化提交按钮值。对于要包含在序列化字符串中的表单元素的值，该元素必须具有 name 属性。来自复选框和单选按钮（“单选”或“复选框”类型的输入）的值仅在它们被选中时才被包括在内。来自文件选择元素的数据未序列化。

也许它会有所帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-08T12:30:12.710

除了一个之外的所有表单元素都被禁用（属性`disabled="disabled"`），这导致它们不会被序列化。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T12:21:25.463

试试这个

```
$('#theForm').stringify() 
```

# osgi - 如何创建 JPA OSGI 包

> ID：15293867
> 
> 赞同：1
> 
> 时间：2013-03-08T12:19:38.293
> 
> 标签：osgi, openjpa, apache-karaf, osgi-bundle

我想用 JPA 2.0 创建 OSGI 持久性服务包。我使用 OpenJpa 作为持久性提供程序。

我尝试了一个支持 JPA 的示例 OSGI 捆绑包，当我的客户调用持久性功能时遇到了问题。该服务无法创建 EntityManagerFactory。始终为空。

我使用 Apache Karaf 作为安装服务的平台。

目前我正在 eclipse 中创建一个 OSGI 包并将其导出为一个包并将其部署在 Karaf 中。客户端可以调用该服务。但问题是当我得到**EntityManagerFactory**时。

我正在使用下面的代码来获取 EntityManagerFactory。

```
 OpenJPAEntityManagerFactory emf = OpenJPAPersistence.createEntityManagerFactory
    ("StudentServiceProvider","META-INF/persistence.xml"); 
```

请告诉我如何使用 OpenJPA 创建 OSGI 持久性捆绑包。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T12:08:51.490

如果您使用的是 Karaf，最好使用 Karaf 的 Aries jpa 功能，它在 OSGi 环境中提供了很好的 JPA 集成。它避免了许多类加载问题，并允许您利用其他容器服务，如事务管理（如果需要）。您仍然可以使用 OpenJPA 作为您的 JPA 提供者。例如，请参阅[有关 JaxEnter 的本教程](http://jaxenter.com/tutorial-using-jpa-in-an-osgi-environment-36661.html)，或[这些幻灯片，这些幻灯片解释了 JPA 本身存在问题的原因](http://jazoon.com/Portals/0/Content/slides/we_a7_1630-1650_ward.pdf)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T13:06:37.600

您可以查看我[在 OSGi 上使用 Apache Aries 的 JPA 教程，](http://www.liquid-reality.de/display/liquid/2012/01/13/Apache+Karaf+Tutorial+Part+6+-+Database+Access)就像 Holly 推荐的那样。

# php - mysql_ 已弃用

> ID：15293872
> 
> 赞同：9
> 
> 时间：2013-03-08T12:19:59.113
> 
> 标签：php, mysql

有人告诉我，该`mysql_`扩展现在在当前版本的 PHP 中已被弃用，并将在某个时候被删除。

我应该使用什么来代替这个以及如何使用？

对于我几乎所有的查询，我都使用它。

**例如：**

```
$result = mysql_query($query);

if (!$result) die ("Database access failed: " . mysql_error());

$rows = mysql_num_rows($result); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T12:21:57.287

根据`PHP`手册，您应该使用以下任何一种：

*   [mysqli_stmt_num_rows()](http://www.php.net/manual/en/mysqli-stmt.num-rows.php)
*   [PDOStatement::rowCount()](http://www.php.net/manual/en/pdostatement.rowcount.php)

不过需要明确的是，这些都不能仅仅替代`mysql_num_rows()`. 您的代码最终必须完全重写以使用 MySQLi 或 PDO API 代替`mysql_*()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T12:40:00.437

如果您了解数据库抽象库的思想，请使用[safemysql](https://github.com/colshrapnel/safemysql)

```
$data = $db->getAll($query,$param1,$param2);
$rows = count($data); 
```

如果您更熟悉使用原始 API 函数，请使用[PDO](https://stackoverflow.com/tags/pdo/info)

```
$stm = $pdo->prepare($query);
$stm->execute(array($param1,$param2));
$data = $stm->fetchAll();
$rows = count($data); 
```

注意2个重要的事情：

*   请求的数据已经存储在 $data 变量中。
*   **每个**动态查询部分（即插入的变量）都必须通过**占位符插入**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T12:33:00.430

就个人而言，我现在使用[MySQL 改进扩展](http://www.php.net/manual/en/book.mysqli.php)。

如果您选择以程序方式使用它，则可以以与您当前使用旧 MySQL 扩展的方式非常相似的方式使用它。

**示例（MySQL）：**

```
$result = mysql_query($query);

if (!$result) die ("Database access failed: " . mysql_error());

$rows = mysql_num_rows($result); 
```

**示例（MySQL 改进）：**

```
$result = mysqli_query($query);

if (!$result) die ("Database access failed: " . mysqli_error());

$rows = mysqli_num_rows($result); 
```

但是，我以面向对象的方式使用 MySQL 改进。

更多信息可以在这里找到：[http ://www.php.net/manual/en/book.mysqli.php](http://www.php.net/manual/en/book.mysqli.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T12:22:18.737

通过[`php.net/mysql_num_rows`](http://php.net/manual/en/function.mysql-num-rows.php)手册

> **mysql_num_rows**
> 
> 此扩展自 PHP 5.5.0 起已弃用，并将在未来删除。相反，应该使用 MySQLi 或 PDO_MySQL 扩展。另请参阅 MySQL：选择 API 指南和相关的常见问题解答以获取更多信息。此功能的替代方案包括：
> 
> *   [`mysqli_stmt_num_rows()`](http://www.php.net/manual/en/mysqli-stmt.num-rows.php)
> *   [`PDOStatement::rowCount()`](http://www.php.net/manual/en/pdostatement.rowcount.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T12:23:32.507

正如在官方[mysql_num_rows 函数描述](http://de3.php.net/mysql_num_rows)中提到的那样，您可以使用[Mysqli](http://de3.php.net/manual/en/book.mysqli.php)或[PDO_MYSQL](http://de3.php.net/manual/en/ref.pdo-mysql.php)作为替代方案。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-08T12:23:40.493

[不要在新代码中使用 mysql_* 函数。](https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-functions-in-php)

它们不再被维护并被[正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。看到[红框](http://uk.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[准备好的语句](http://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi——](http://php.net/manual/en/mysqlinfo.api.choosing.php)本文将帮助您决定使用哪一个。

如果你选择 PDO，这里有一个[很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)

# qt - Qt XSLT for-each-group 无法识别

> ID：15293878
> 
> 赞同：2
> 
> 时间：2013-03-08T12:20:38.750
> 
> 标签：qt, qtxml

[Qt 文档](http://qt-project.org/doc/qt-4.8/xmlprocessing.html)声明使用 QXmlQuery 时支持 for-each-group 。但是，当我尝试使用它时出现错误：

“XSL-T 中不存在具有本地名称 for-each-group 的元素。”

我错过了什么吗？

我正在使用 Qt 4.8.4。我这样调用 QXmlQuery ：

```
QXmlQuery xmlQuery(QXmlQuery::XSLT20);
xmlQuery.setMessageHandler(&messageHandler);
xmlQuery.setFocus(&xmlBuffer);
xmlQuery.setQuery(&queryFile); 
```

我的 XSL 文件中的行如下所示：

```
<xsl:for-each-group select="../readings/slot" group-by="@slot_dtm"> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-07-03T20:00:14.957

从 Qt 5.12 开始，这个问题仍然存在。似乎 Qt 根本不支持`xsl:for-each-group`. 这也是 2013 年[一篇博客文章](http://xilexio.org/?p=94)的结果，其中有人分析了这个问题。

有一些有限的方法可以在没有的情况下实现相同的功能`xsl:for-each-group`，[请参见此处](https://stackoverflow.com/a/38087046)。但是由于 Qt 的 XSLT 变量绑定中的错误，这对我不起作用。最后，我甚至避免了`xsl:for-each`循环，因为最初知道组的顺序和身份。请参阅[我的代码](https://github.com/fairdirect/foodrescue-app/blob/942bcf4ce5a11a873192c04b876ec1821e4c48f0/src/docbook-to-qthtml.xsl#L80)。

**tl;dr：**不幸的是，Qt XSLT 在 Qt 5.12 中几乎没有用处；就像他们说的那样，实施是“实验性的”。自 2013 年以来，似乎几乎没有做这方面的工作。

# php - PDO 更新函数为每一列设置相同的值 - 循环错误

> ID：15293884
> 
> 赞同：1
> 
> 时间：2013-03-08T12:20:59.987
> 
> 标签：php, mysql, pdo

出于某种原因，当我将以下值传递给我的数据库记录更新函数时，我无法解决问题，它为每一列设置了相同的值。

这是我传递给它的数据：

```
 $_values = array(
    'client_fname' => $_POST['client_fname'],
    'client_lname' => $_POST['client_lname'],
    'client_email' => $_POST['client_email']
);
$_args= array('client_id' => $_id);  
$db->dbUpdate('client', $_values, $_args) 
```

它将每一列（client_fname、client_lname、client_email）更新为 $_id 值，而不是发布的值。而且我无法弄清楚我做错了什么:(

这是它在绑定参数之前创建的查询：

```
 UPDATE client SET client_fname=:0, client_lname=:1, client_email=:2 WHERE client_id=:w0 
```

这是功能

```
 public function dbUpdate($_table, $_values, $_args) { //TODO: Fix Function
    try {
        $query = 'UPDATE '.$_table.' SET ';
        $i = 0; foreach ($_values as $_field => $_value) {
            if($i == 0) {
                $query .= $_field.'=:'.$i;
            } else {
                $query .= ', '.$_field.'=:'.$i;
            }
            $i++;
        }
        $query .= ' WHERE ';
        $i = 0; foreach ($_args as $_field => $_value) {
            if($i == 0) {
                $query .= $_field.'=:w'.$i;
            } else {
                $query .= ', '.$_field.'=:w'.$i;
            }
            $i++;
        }

        $sql = $this->db->prepare($query);
        $i = 0; foreach ($_values as $_field => $_value) {
            $sql->bindParam(':'.$i, $_value); $i++;
        } 
        $i = 0; foreach ($_args as $_field => $_value) {
            $sql->bindParam(':w'.$i, $_value); $i++;
        } 

        if($sql->execute()) {
            return true;
        } else {
            return false;
        }
    }
    catch (PDOException $e) {
        print_r($e->errorInfo);
        die();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T12:36:41.360

我之前已经回答过几次了，所以我将链接到我之前的答案。

简而言之，bindParam 需要一个引用。它将变量而不是值绑定到语句。由于 foreach 循环中的变量在每次迭代开始时都会重置，因此只有最后一个引用保持不变，并且您最终将所有占位符绑定到它。

详细说明：[PDO bindParam issue](https://stackoverflow.com/questions/13667807/pdo-multiple-named-placeholders-doesnt-retrieve-data/13668536#13668536)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-08T12:28:38.203

与无用的 PDO 不同，[真正的数据库抽象库](https://github.com/colshrapnel/safemysql)会让你避免这样的混乱，将所有代码变成 3 行

```
$allowed = array('client_fname', 'client_lname', 'client_email');
$insert  = $db->filterArray($_POST,$allowed);
$db->query("UPDATE client SET ?u WHERE client_id=?i",$insert, $_id); 
```

# foreign-keys - 为什么没有foreignAutoDelete？

> ID：15293885
> 
> 赞同：6
> 
> 时间：2013-03-08T12:21:07.083
> 
> 标签：foreign-keys, ormlite

我正在使用 Ormlite for Android 将现有应用程序从文件转换为对象的数据库存储。我有一个相当复杂的对象数据结构，我需要进入数据库，至少最初我不想修改太多的对象结构来完成这个。在这个现有的结构中，我有很多级别的嵌套外来对象。

我的问题，foreignAutoCreate 似乎自动运行得很好。当我在数据库中创建一个具有外来对象的对象时，它们本身也具有外来对象等，直到四到五个级别，包含对象的主对象的单个创建将所有外来对象填充到所有这些级别。

我不相信有一种方法可以删除主对象并让 ormlite 将删除级联到包含的外来对象的所有级别。我想确认我没有遗漏任何东西，并且对于我正在做的事情没有更简单的解决方案，即使用触发器在从主表中删除时删除所有内容。我知道级联删除是一种选择，尽管我无法让它工作。但即使它确实有效，我仍然想知道没有 foreignAutoDelete 选项，因为在数据库中有一些配置，而在 ormlite 中的一些配置似乎最终可能会导致问题。

现在我在通过所有这些级别的异物完成更新选项时遇到问题。最初，我正在创建主对象，它将创建所有子对象。我会尝试更新主对象或删除，然后读取主对象，但它似乎并没有影响孩子（他们没有更新）。添加级联删除后，我假设删除主对象并级联其子对象，然后读取主对象会实现“更新”，但是现在当我读取主对象时，子对象没有被添加回来。我认为在添加主对象后发生子表上的删除触发器存在一些时间/事务问题。对于所有子对象，foreignAutoCreate 保持打开状态，所以我

希望这个问题有意义，并提前感谢您的任何回复。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T04:33:23.147

将 columnDefinition 参数添加到子项的外键 DatabaseField 声明中。在此示例中，文档是父级。DocumentEntity 是类的名称，但表名定义为“文档”

```
 @DatabaseField(canBeNull = false, foreign = true, index = true, foreignAutoRefresh = true, columnDefinition = "integer references document(id) on delete cascade")
 private DocumentEntity document; 
```

# android - Android DropBox API - 停止 url 重定向

> ID：15293886
> 
> 赞同：0
> 
> 时间：2013-03-08T12:21:11.630
> 
> 标签：android, dropbox-api

我有一个应用程序，它将在后台将文件发送到我在 DropBox 中的应用程序文件夹。

当没有连接时，我一直在测试我的 android 应用程序，我发现如果无法建立会话，则会启动网络浏览器并将用户重定向到 drop box 应用程序文件夹。

如何停止 Web 浏览器重定向？我不希望用户知道我们正在使用 drop box 进行文件备份。如果连接出现错误，那么我不希望启动 Web 浏览器。

我正在使用[DropBox API 开发人员站点中的 UploadPicture.java 示例](https://www.dropbox.com/developers/core/files#android)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T15:08:02.590

您可以检查互联网连接是否可用，如果是，您可以开始上传任务，否则什么也不做。

可以在[此处找到有关如何检查 Internet 连接的示例](https://stackoverflow.com/questions/1560788/how-to-check-internet-access-on-android-inetaddress-never-timeouts)

# sql - 在 SQL Server 中选择缺失的条目

> ID：15293892
> 
> 赞同：1
> 
> 时间：2013-03-08T12:21:30.943
> 
> 标签：sql, sql-server, select

我有一张人桌：

```
person_id | name
1         | bob
2         | jane 
```

他们可以回答的问题表：

```
qu_id | question
1     | How old are you?
2     | How tall are you? 
```

还有一张答案表：

```
answer_id | qu_id | person_id | answer
10        | 1     | 2         | 24 
```

**什么查询将返回未回答的人员和问题列表：**

例如，未回答的问题：

```
qu_id | person_id
1     | 1
2     | 1
2     | 2 
```

（我使用的是 SQL Server Express 2012）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T12:26:36.367

```
SELECT p.person_id, q.qu_id
FROM Person p
CROSS JOIN Question q

EXCEPT

SELECT person_id, qu_id
FROM Answers 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T12:25:14.037

```
SELECT  b.qu_ID, a.person_ID
FROM    people a
        CROSS JOIN question b
        LEFT JOIN answer c
            ON  a.person_ID = c.person_ID AND
                b.qu_ID = c.qu_id
WHERE   c.person_ID IS NULL
ORDER   BY b.qu_id, a.person_id 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!6/f36d0/1)

结果

```
╔═══════╦═══════════╗
║ QU_ID ║ PERSON_ID ║
╠═══════╬═══════════╣
║     1 ║         1 ║
║     2 ║         1 ║
║     2 ║         2 ║
╚═══════╩═══════════╝ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T12:25:27.480

```
SELECT q.qu_id, p.person_id
FROM people AS p
CROSS JOIN questions AS q
WHERE NOT EXISTS 
(
    SELECT 1 
    FROM answers AS a 
    WHERE a.qu_id = q.qu_id 
    AND a.person_id = p.person_id
) 
```

或者，

```
SELECT q.qu_id, p.person_id
FROM people AS p
CROSS JOIN questions AS q
EXCEPT
SELECT qu_id, person_id
FROM answers 
```

# javascript - 如何在 if 语句中使用 jquery 回调函数？

> ID：15293897
> 
> 赞同：3
> 
> 时间：2013-03-08T12:21:44.027
> 
> 标签：javascript, jquery, callback

我有一个功能 winch 执行某些操作，并且效果很好。现在我想添加一个引导模式并在模式关闭时执行相同的代码。但我的问题是我必须检查用户状态。有没有办法如何执行此代码而不是复制所有内容两次？

```
if(USERTYPE == 0) {
  $("#fastRegisterModal").modal('show');
  $("#fastRegisterModal").on('hidden', function() {
    //Code for registration and upload code
  }
} else {
  //upload code
} 
```

我想将它包含到多个 jquery 函数（主要是 .live 函数）中，并且我不想将“上传代码”移动到普通的 js 函数中（我将 .js 文件按原样写入，我不想改变文件的 70%）

这甚至可能以这种方式或任何其他方式实现吗？

## 已编辑

这是更多代码：

```
$('.someAction').live('click', function(event) {
// Init section
var data1 = $(".getData1").val();
var data2 = $(".getData2").val();

// I want to add this modal check before exsisting code

if(USERTYPE == 0) {
    $("#fastRegisterModal").modal('show').on('hidden', function() {
        var email = $(".getModalEmail").val();
        var pass = $(".getModalPass").val();

        $.ajax({
            url: "actions/fastRegister",
            type: 'POST',
            data: {email: email, pass: pass}, 
            success: function(data) {
                if (data.success == 1) {
                    // continue with existing block of code
                }
            }
        });
    });
}

// Existing block of code

$.ajax({
    url: "actions/someAction",
    type: 'POST',
    data: {data1: data1, data2: data2}, 
    success: function(data) {
        if (data != '') {
            // show success
        }
    }
});
}); 
```

我希望这能解释我的情况：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T12:25:26.143

创建函数。

它比两行代码和一个剪切和粘贴多多少工作？

抵制重构往往会导致长期的痛苦。

像这样的东西不工作吗？从你所拥有的东西到那里要付出多少努力？

```
var doSomeAction = function () {
    $.ajax({
          url: "actions/someAction",
          type: 'POST',
          data: {data1: data1, data2: data2}, 
          success: function(data) {
              if (data != '') {
                // show success
              }
          }
     });

 };

 if(USERTYPE == 0) {
    $("#fastRegisterModal").modal('show').on('hidden', function() {
       var email = $(".getModalEmail").val();
       var pass = $(".getModalPass").val();

       $.ajax({
          url: "actions/fastRegister",
          type: 'POST',
          data: {email: email, pass: pass}, 
         success: function(data) {
            if (data.success == 1) {
                doSomeAction();
            }
          }
      });
    });
} else {
   doSomeAction();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T12:28:23.290

所以让我们假设你不想写一个“普通”的 js 函数**是有充分理由的。**

你可以扩展 jQuery。

```
$.fn.extend({
    doSomething: function(){
        // do something with $(this)
    }
});

and then

if(USERTYPE == 0) {
  $("#fastRegisterModal").modal('show').on('hidden', function() {
    $(this).doSomething();
  }
} else {
  $("#fastRegisterModal").doSomething();
} 
```

或者您可以创建自定义绑定并触发它。

```
$("#fastRegisterModal").on('doSomething', function(){
     // do something with $(this)
});

if(USERTYPE == 0) {
  $("#fastRegisterModal").modal('show').on('hidden', function() {
    $(this).trigger('doSomething');
  }
} else {
  $("#fastRegisterModal").trigger('doSomething');
} 
```

您的代码中的注释显示了两种不同的事情想要发生

```
if(USERTYPE == 0) {
  $("#fastRegisterModal").modal('show');
  $("#fastRegisterModal").on('hidden', function() {
    //Code for registration and upload code
    $(this).trigger('doRegistration').trigger('doUpload');
    // or $(this).doRegistration().doUpload();
  }
} else {
    //upload code
    $(this).trigger('doUpload');
    // or $(this).doUpload();
} 
```

# php - 如何将左侧边栏中的自定义选项卡添加到 magento 模块管理部分的自定义页面？

> ID：15293900
> 
> 赞同：4
> 
> 时间：2013-03-08T12:21:53.107
> 
> 标签：php, magento, magento-1.7

我很新`Magento`，刚在 4 天前开始使用 Magento，但我的任务是开发一个`Magento extension`. 所以我正在通过互联网阅读并创建它。

现在我遇到的问题是我想添加一个自定义的左侧边栏选项卡，就像它在
`System->Configuration`.

我尝试了很多但没有成功。请帮我。

这是我的 config.xml

```
<?xml version="1.0"?>
<config>
<!-- turn on our module, required for install support -->
<modules>
<Gwb_Magecrmsync>
    <version>0.1.0</version>
</Gwb_Magecrmsync>
</modules>
<frontend>
<routers>
    <magecrmsync>
        <use>standard</use>
        <args>
            <module>Gwb_Magecrmsync</module>
            <frontName>magecrmsync</frontName>
        </args>
    </magecrmsync>
</routers>
<layout>
    <updates>
        <magecrmsync>
            <file>adminhtml.xml</file>
        </magecrmsync>
    </updates>
</layout>
</frontend>
<admin>
<routers>
    <magecrmsync>
        <use>admin</use>
        <args>
            <module>Gwb_Magecrmsync</module>
            <frontName>magecrmsync</frontName>
        </args>
    </magecrmsync>
</routers>
</admin>
<adminhtml>
<menu>
    <menu1 translate="title" module="magecrmsync">
        <title>Synchronize</title>
        <sort_order>999</sort_order>
        <children>
            <menuitem1 module="magecrmsync">
                <title>Customers</title>
                <action>magecrmsync/adminhtml_magecrmsync</action>
            </menuitem1>
            <menuitem2 module="magecrmsync">
                <title>Orders</title>
                <action>magecrmsync/adminhtml_magecrmsync</action>
            </menuitem2>
            <menuitem3 module="magecrmsync">
                <title>Products</title>
                <action>magecrmsync/adminhtml_magecrmsync</action>
            </menuitem3>
        </children>
    </menu1>
</menu>
<acl>
    <resources>
        <admin>
            <children>
                <menu1 translate="title" module="magecrmsync">
                    <title>Synchronize</title>
                    <sort_order>999</sort_order>
                    <children>
                        <menuitem1>
                            <title>Customers</title>
                        </menuitem1>
                        <menuitem2>
                            <title>Orders</title>
                        </menuitem2>
                        <menuitem3>
                            <title>Products</title>
                        </menuitem3>
                    </children>
                </menu1>
            </children>
        </admin>
    </resources>
</acl>
</adminhtml>
<global>
<!-- turn on models -->
<models>
    <magecrmsync>
        <class>Gwb_Magecrmsync_Model</class>
        <resourceModel>Magecrmsync_mysql4</resourceModel>
    </magecrmsync>
</models>
<!-- turn on models -->

<!-- turn on database connections -->
<resources>
<!-- setup is needed for automatic installation -->
    <magecrmsync_setup>
        <use>default_setup</use>
    </magecrmsync_setup>
    <magecrmsync_write>
        <use>default_write</use>
    </magecrmsync_write>
    <magecrmsync_read>
        <use>default_read</use>
    </magecrmsync_read>
</resources>

<blocks>
    <magecrmsync>
        <class>Gwb_Magecrmsync_Block</class>
    </magecrmsync>
</blocks>

<helpers>
    <magecrmsync>
        <class>Gwb_Magecrmsync_Helper</class>
    </magecrmsync>
</helpers>

<layout>
    <magecrmsync>
        <file>adminhtml.xml</file>
    </magecrmsync>
</layout>

</global>
</config> 
```

请告诉我我在哪里遗漏了一些不允许我在自定义页面左侧添加标签的内容。如果我在任何地方错了，请纠正我。

**编辑**
这是我的 system.xml 文件。这让我可以在 System->Configuration 下添加自定义选项卡，但我希望它在我的自定义页面上，该页面与配置菜单分开。

```
<?xml version="1.0"?>
<config>
<tabs>
    <sidetab translate="label" module="magecrmsync">
        <label>My Custom Tab</label>
        <sort_order>200</sort_order>
    </sidetab>
</tabs>
<sections>
    <sidetab translate="label" module="magecrmsync">
        <class>separator-top</class>
        <label>My Tab</label>
        <tab>sidetab</tab>
        <sort_order>100</sort_order>
        <show_in_default>1</show_in_default>
        <show_in_website>1</show_in_website>
        <show_in_store>1</show_in_store>
        <groups>
            <sidetab_option translate="label">
                <label>sysem Tab Options</label>
                <frontend_type>text</frontend_type>
                <sort_order>10</sort_order>
                <show_in_default>1</show_in_default>
                <show_in_website>1</show_in_website>
                <show_in_store>1</show_in_store>
                <fields>
<registration_mode translate="label"> <label>On New User Signup</label>
                        <frontend_type>select</frontend_type>
                            <source_model>adminhtml/system_config_source_yesno</source_model>
                        <sort_order>1</sort_order>
                        <show_in_default>1</show_in_default>
                        <show_in_website>1</show_in_website>
                        <show_in_store>1</show_in_store>
                    </registration_mode>
<forget_mode translate="label">
                        <label>Send Email on Forget Password</label>
                        <frontend_type>select</frontend_type>
                            <source_model>adminhtml/system_config_source_yesno</source_model>
                        <sort_order>1</sort_order>
                        <show_in_default>1</show_in_default>
                        <show_in_website>1</show_in_website>
                        <show_in_store>1</show_in_store>
                    </forget_mode>
<purchase_mode translate="label">
                        <label>Send Email On Product Purchase</label>
                        <frontend_type>select</frontend_type>
                            <source_model>adminhtml/system_config_source_yesno</source_model>
                        <sort_order>1</sort_order>
                        <show_in_default>1</show_in_default>
                        <show_in_website>1</show_in_website>
                        <show_in_store>1</show_in_store>
                    </purchase_mode>
                </fields>
</sidetab_option>
        </groups>
    </sidetab>
</sections>
</config> 
```

**我的控制器代码：**

```
<?php
class Gwb_Magecrmsync_Adminhtml_MagecrmsyncController extends     Mage_Adminhtml_Controller_Action
{
public function indexAction()
{
    $this->loadLayout()
         ->_setActiveMenu('menu1')
         ->_addBreadcrumb(Mage::helper('adminhtml')->__('Synchronize Data'), Mage::helper('adminhtml')->__('Synchronize Data'))
         ->_title($this->__('Synchronize Data'));

    $block = $this->getLayout()->createBlock(
        'Mage_Core_Block_Template',
        'my_block_name_here',
        array('template' => 'magecrmsync/mainblock.phtml')
    );
    $this->getLayout()->getBlock('content')->append($block);

    $this->renderLayout();
}

} 
```

我想在我的页面上添加标签，就像这样：

![像这张图片这样的标签在我的页面左侧而不是在系统->配置页面上。](../Images/3845a40cea43165e03178bd4fff0b62e.png)

任何帮助将不胜感激，并将对我有所帮助。

谢谢拉文德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:58:08.350

似乎您要在管理控制器中创建一个“左”和“主”块。

```
$this->loadLayout();
$this->_addContent($this->getLayout()->createBlock('form/adminhtml_form_edit'))
            ->_addLeft($this->getLayout()->createBlock('form/adminhtml_form_edit_tabs'));
$this->renderLayout();

class Excellence_Form_Block_Adminhtml_Form_Edit_Tabs extends Mage_Adminhtml_Block_Widget_Tabs
{

  public function __construct()
  {
      parent::__construct();
      $this->setId('form_tabs');
      $this->setDestElementId('edit_form'); // this should be same as the form id define above
      $this->setTitle(Mage::helper('form')->__('Product Information'));
  }

  protected function _beforeToHtml()
  {
      $this->addTab('form_section', array(
          'label'     => Mage::helper('form')->__('Item Information'),
          'title'     => Mage::helper('form')->__('Item Information'),
          'content'   => $this->getLayout()->createBlock('form/adminhtml_form_edit_tab_form')->toHtml(),
      ));

      return parent::_beforeToHtml();
  }
} 
```

请参阅[http://www.excellencemagentoblog.com/module-development-series-magento-admin-module-part3](http://www.excellencemagentoblog.com/module-development-series-magento-admin-module-part3)

![在此处输入图像描述](../Images/aba33465cc6af2c610b986e194be16cd.png)

```
$this->_addLeft($this->getLayout()
    ->createBlock('core/text')
    ->setText('<h1>Left Block</h1>'));

$block = $this->getLayout()
    ->createBlock('core/text')
    ->setText('<h1>Main Block</h1>');           
    $this->_addContent($block); 
```

阅读更多@ [http://alanstorm.com/magento_admin_controllers](http://alanstorm.com/magento_admin_controllers)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T12:48:38.630

我在之前的回答中快速阅读了您的问题，所以我将添加这个带有正确信息的新问题。您将需要创建一个文件夹结构，其中选项卡都分隔在不同的文件中。

以下链接说明了如何向现有模块添加选项卡，您可能想自己搜索更好的文章，因为有足够的信息可以找到： [http ://terrani.wordpress.com/2011/01/ 03/magento-add-a-new-tab-on-customer-edit-page/](http://terrani.wordpress.com/2011/01/03/magento-add-a-new-tab-on-customer-edit-page/)

关于它的另一篇文章：http: [//www.atwix.com/magento/new-tab-product-edit-page/](http://www.atwix.com/magento/new-tab-product-edit-page/)

# python - Python将包含列表的dict对象转换为包含dict的列表

> ID：15293903
> 
> 赞同：1
> 
> 时间：2013-03-08T12:22:02.813
> 
> 标签：python, list, dictionary, mapping

我想这个标题可能会让你有点困惑，但我敢肯定有太多人面临这个问题，而且他们中的大多数人可能知道如何解决它。

这是我的问题，我有一个 dict 对象，如下所示：

```
{   'fields':
    ['Config', 'Device', 'Device Name', 'Config Name', 'description', 'ip', 'radius', 'ssid','vlan', 'channel', 'frequency', 'maxclients', 'username', 'password', 'enable_password','transport_protocol', 'personality', 'date_added', 'date_modified'],
    'results': [
    [23, 45, 'New test2 for demo', 'New test2 for demo', 'Default desc for device','192.168.0.100',13, '0', 0, 4, 'None', None, 'Cisco', 'Cisco', 'Cisco', 'Telnet', 'ios',datetime.datetime(2013, 3, 6, 13, 52, 14), datetime.datetime(2013, 3, 7, 14, 27, 39)],
    [23, 47, 'Test after a couple hours', 'New test2 for demo', 'Default desc for device','192.168.0.100', 13, '0', 0, 4, 'None', None, 'Cisco', 'Cisco', 'Cisco', 'Telnet', 'ios',datetime.datetime(2013, 3, 6, 13, 52, 14), datetime.datetime(2013, 3, 7, 14, 27, 39)]
    ]
} 
```

我想将它转换成一个列表，包括这样的 dict 对象：

```
[
{'username': 'Cisco', 'transport_protocol': 'Telnet', 'Device Name': 'With a fresh breath','description': 'Default desc for device', 'date_added': datetime.datetime(2013, 3, 8, 9, 32, 13),'date_modified': datetime.datetime(2013, 3, 8, 9, 32, 13), 'ip': '192.168.0.100', 'vlan': 0,'enable_password': 'Cisco', 'Config Name': 'With a fresh breath', 'frequency': '0', 'radius': 0, 'personality': 'ios', 'Device': 49, 'maxclients': 0, 'password': 'Cisco', 'Config': 27, 'channel': 0, 'ssid': 'LBREAP'}, 
{'username': 'Cisco', 'transport_protocol': 'Telnet', 'Device Name': 'With a fresh breath for second device', 'description': 'Default desc for device', 'date_added': datetime.datetime(2013, 3, 8, 9, 33, 57), 'date_modified': datetime.datetime(2013, 3, 8, 11, 23, 1), 'ip': '192.168.0.35', 'vlan': 0, 'enable_password': 'Cisco', 'Config Name': 'With a fresh breath for second device', 'frequency': '0', 'radius': 0, 'personality': 'ios', 'Device': 50, 'maxclients': 0, 'password': 'Cisco', 'Config': 28, 'channel': 4, 'ssid': 'LBREAP'}
] 
```

我需要将顶部对象字段映射为带有列表的第二个对象键。我写了一个简单的 for 来制作第二个并且它可以工作，我已经用这个创建了第二个 for，但我很好奇有一种简单的方法可以让它工作。

这是我的循环：

```
results = list()
if configSet['results']:
   k = 0
   for i in configSet['results']:
       rSet = {}
       r = 0
       for f in i:
           rSet[configSet['fields'][r]] = f
           r += 1
       results.insert(k, rSet)
       k += 1 
```

我尝试像这样处理 dict、list、map 和 zip 组合

```
dict(map(list, zip(configSet['fields'], configSet['results']))) 
```

但这对我不起作用。

有没有人向我建议一种更好、更快、更简单的方法来做到这一点？

问候。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T12:26:18.400

```
[dict(zip(configSet['fields'], result)) for result in configSet['results']] 
```

对于 中的每个结果，使用结果中的键和值`results`创建一个字典。`fields`

```
In [6]: [dict(zip(configSet['fields'], result)) for result in configSet['results']]
Out[6]:
[{'Config': 23,
  'Config Name': 'New test2 for demo',
  'Device': 45,
  'Device Name': 'New test2 for demo',
  'channel': 4,
  'date_added': datetime.datetime(2013, 3, 6, 13, 52, 14),
  'date_modified': datetime.datetime(2013, 3, 7, 14, 27, 39),
  'description': 'Default desc for device',
  'enable_password': 'Cisco',
  'frequency': 'None',
  'ip': '192.168.0.100',
  'maxclients': None,
  'password': 'Cisco',
  'personality': 'ios',
  'radius': 13,
  'ssid': '0',
  'transport_protocol': 'Telnet',
  'username': 'Cisco',
  'vlan': 0},
 {'Config': 23,
  'Config Name': 'New test2 for demo',
  'Device': 47,
  'Device Name': 'Test after a couple hours',
  'channel': 4,
  'date_added': datetime.datetime(2013, 3, 6, 13, 52, 14),
  'date_modified': datetime.datetime(2013, 3, 7, 14, 27, 39),
  'description': 'Default desc for device',
  'enable_password': 'Cisco',
  'frequency': 'None',
  'ip': '192.168.0.100',
  'maxclients': None,
  'password': 'Cisco',
  'personality': 'ios',
  'radius': 13,
  'ssid': '0',
  'transport_protocol': 'Telnet',
  'username': 'Cisco',
  'vlan': 0}] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T12:53:31.090

不知道您从哪里获得“新鲜呼吸”，但我认为这可以满足您的要求：

```
d={'fields':['Config',...],'results': [[23,...],[23,...]]}
keys=['username', 'transport_protocol', 'Device Name', ...]
resultlist = [{field:value for field,value in zip(keys, [v[d['fields'].index(k)] for k in keys])} for v in d['results']] 
```

**编辑：**刚刚看到主要答案，它使用变体`dict(keys, values)`而不是我的混淆`{key:value for key,value in ...}`，所以我的最多是多余的。希望使我的答案在某种程度上相关的是它允许从子集中选择键，我最初认为这是您的目标。

输出：

```
[
  {'username': 'Cisco', 'transport_protocol': 'Telnet', 'Device Name': 'New test2 for demo'}, 
  {'username': 'Cisco', 'transport_protocol': 'Telnet', 'Device Name': 'Test after a couple hours'}
] 
```

# php - 向邮件内容添加动态行

> ID：15293908
> 
> 赞同：0
> 
> 时间：2013-03-08T12:22:29.640
> 
> 标签：php, email

```
$content="<table width='200' border='0'>
  <tr>
    <td>product name</td>
    <td>Price</td>
    <td>Qty</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
</table>" 
```

上表是邮件的内容。

`$pdtname , $price and $qty`包含产品名称、产品价格和产品数量。

```
$msgSent=@mail("aaa@gmail.com",$sub,$content,$headers); 
```

如果用户选择一种或多种产品

`$content`是否可以根据所选产品的数量将表格的第二行相乘。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T12:24:30.413

试试这个 ：

```
$content = "<table width='200' border='0'>
  <tr>
    <td>product name</td>
    <td>Price</td>
    <td>Qty</td>
  </tr>";
foreach($products as $product){
  $content .= "  <tr>
    <td>".$product['name']."</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>";
}
$content .= "</table>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T12:26:14.667

像这样使用 foreach 循环

```
$content = "<table width='200' border='0'>
<tr>
    <td>product name</td>
    <td>Price</td>
    <td>Qty</td>
</tr>";
foreach($rows as $row){
    $content .= "  <tr>
    <td><?php echo $row['product_name'];?></td>
    <td><?php echo $row['product_price'];?></td>
    <td><?php echo $row['product_quantity'];?></td>
  </tr>";
}  
$content .= "</table>"; 
```

# wpf - Ninject 数组绑定

> ID：15293909
> 
> 赞同：1
> 
> 时间：2013-03-08T12:22:33.897
> 
> 标签：wpf, inversion-of-control, ninject

我正在尝试将 Ninject 与 WPF 一起使用

我的所有视图都有相同的界面

```
interface IView
{
  string ViewName { get; }
  object Content{ get; private set; } 
}

public partial class FirstView : IView
{
    ......
}
public partial class SecundView : IView
{
  ......
} 
```

ETC..

在应用程序开始时，我使用绑定它们

```
Kernel.Bind<IView>().To<FirstView>();
Kernel.Bind<IView>().To<SecundView>();
........
........ 
```

我很感兴趣有没有办法按照惯例注册它们？就像是：

```
.Kernel.Bind(
            x => x.FromThisAssembly()
                  .SelectAllClasses().InNamespaceOf<FirstView>()
                  .BindToInterface<IView>); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T12:42:24.187

您可以使用该`BindDefaultInterfaces()`方法，它将`View`名称中包含单词的每个类绑定到您的`IView`界面：

```
.Kernel.Bind(
    x => x.FromThisAssembly()
          .SelectAllClasses().InNamespaceOf<FirstView>()
          .BindDefaultInterfaces()); 
```

您还可以[在文档中](https://github.com/ninject/ninject.extensions.conventions/wiki/Projecting-Services-to-Bind)查看可用的“BindSomething”选项。

# spring - 集成hibernateDAO和spring时出错

> ID：15293910
> 
> 赞同：0
> 
> 时间：2013-03-08T12:22:33.837
> 
> 标签：spring, hibernate, spring-mvc, hibernate-mapping

我在获取我的 dao 层上的会话对象时遇到问题我已经将我的休眠 DAO 与 spring 集成但我无法找出问题这是我的错误

```
 8 Mar, 2013 5:05:33 PM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Program Files\Java\jre6\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:\Program Files\Common Files\Microsoft Shared\Windows Live;C:\Program Files (x86)\Common Files\Microsoft Shared\Windows Live;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files (x86)\Intel\Services\IPT\;C:\Program Files (x86)\NTRU Cryptosystems\NTRU TCG Software Stack\bin\;C:\Program Files\NTRU Cryptosystems\NTRU TCG Software Stack\bin\;C:\Program Files\Dell\Dell Data Protection\Access\Advanced\Wave\Gemalto\Access Client\v5\;C:\Program Files (x86)\Windows Live\Shared;C:\Program Files\Java\jdk1.6.0_31\bin;;.
8 Mar, 2013 5:05:34 PM org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:EmployeeWebSpring' did not find a matching property.
8 Mar, 2013 5:05:34 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
8 Mar, 2013 5:05:34 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
8 Mar, 2013 5:05:34 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 459 ms
8 Mar, 2013 5:05:34 PM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
8 Mar, 2013 5:05:34 PM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.26
8 Mar, 2013 5:05:34 PM org.apache.catalina.loader.WebappClassLoader validateJarFile
INFO: validateJarFile(C:\Users\ankurj\hibernate\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\EmployeeWebSpring\WEB-INF\lib\servlet-2.3.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/servlet/Servlet.class
8 Mar, 2013 5:05:34 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://www.springframework.org/tags is already defined
8 Mar, 2013 5:05:34 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://www.springframework.org/tags/form is already defined
8 Mar, 2013 5:05:35 PM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring FrameworkServlet 'ds'
8 Mar, 2013 5:05:37 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-8080"]
8 Mar, 2013 5:05:37 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-bio-8009"]
8 Mar, 2013 5:05:37 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 3621 ms
8 Mar, 2013 5:05:38 PM org.apache.jasper.compiler.TldLocationsCache tldScanJar
INFO: At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.
8 Mar, 2013 5:05:51 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [ds] in context with path [/EmployeeWebSpring] threw exception [Handler processing failed; nested exception is java.lang.NoSuchMethodError: org.hibernate.SessionFactory.openSession()Lorg/hibernate/Session;] with root cause
java.lang.NoSuchMethodError: org.hibernate.SessionFactory.openSession()Lorg/hibernate/Session;
    at com.nousinfo.tutorial.dao.impl.EmployeeDAOImpl.getAllEmployees(EmployeeDAOImpl.java:56)
    at com.nousinfo.tutorial.service.impl.EmployeeServiceImpl.getAllEmployees(EmployeeServiceImpl.java:50)
    at com.nousinfo.tutorial.controllers.SearchEmployeeController.getAllEmployee(SearchEmployeeController.java:193)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:175)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:421)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:409)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:774)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:549)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
8 Mar, 2013 5:06:08 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [ds] in context with path [/EmployeeWebSpring] threw exception [Handler processing failed; nested exception is java.lang.NoSuchMethodError: org.hibernate.SessionFactory.openSession()Lorg/hibernate/Session;] with root cause
java.lang.NoSuchMethodError: org.hibernate.SessionFactory.openSession()Lorg/hibernate/Session;
    at com.nousinfo.tutorial.dao.impl.DepartmentDAOImpl.getDepartment(DepartmentDAOImpl.java:155)
    at com.nousinfo.tutorial.service.impl.DepartmentServiceImpl.getDepartment(DepartmentServiceImpl.java:96)
    at com.nousinfo.tutorial.controllers.SearchDepartmentController.searchByDepartmentNo(SearchDepartmentController.java:84)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:175)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:421)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:409)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:774)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:560)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
8 Mar, 2013 5:37:40 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [ds] in context with path [/EmployeeWebSpring] threw exception [Handler processing failed; nested exception is java.lang.NoSuchMethodError: org.hibernate.SessionFactory.openSession()Lorg/hibernate/Session;] with root cause
java.lang.NoSuchMethodError: org.hibernate.SessionFactory.openSession()Lorg/hibernate/Session;
    at com.nousinfo.tutorial.dao.impl.EmployeeDAOImpl.getAllEmployees(EmployeeDAOImpl.java:56)
    at com.nousinfo.tutorial.service.impl.EmployeeServiceImpl.getAllEmployees(EmployeeServiceImpl.java:50)
    at com.nousinfo.tutorial.controllers.SearchEmployeeController.getAllEmployee(SearchEmployeeController.java:193)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:175)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:421)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:409)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:774)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:549)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

这是我的调度程序 servlet

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
                           http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
                           http://www.springframework.org/schema/context 
                           http://www.springframework.org/schema/context/spring-context-3.2.xsd
                           http://www.springframework.org/schema/mvc
                           http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd">

    <context:annotation-config />

    <mvc:annotation-driven />

    <bean class="org.springframework.jdbc.datasource.DriverManagerDataSource"
        id="dataSource">
        <property value="com.mysql.jdbc.Driver" name="driverClassName" />
        <property value="jdbc:mysql://192.168.25.30:3306/employee"
            name="url" />
        <property value="hr" name="username" />
        <property value="hr123" name="password" />
    </bean>
    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="annotatedClasses">
            <list>
                <value>com.nousinfo.tutorial.model.Department</value>
                <value>com.nousinfo.tutorial.model.Employee</value>
                <value>com.nousinfo.tutorial.model.EmployeeProject</value>
            </list>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.HSQLDialect</prop>
                <prop key="hibernate.show_sql">true</prop>
                <prop key="hibernate.hbm2ddl.auto">update</prop>
            </props>
        </property>
    </bean>

    <bean id="employeeDaoImpl" class="com.nousinfo.tutorial.dao.impl.EmployeeDAOImpl">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>
    <bean id="departmentDaoImpl" class="com.nousinfo.tutorial.dao.impl.DepartmentDAOImpl">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>
    <bean id="projectDaoImpl" class="com.nousinfo.tutorial.dao.impl.ProjectDAOImpl">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>

    <bean id="employeserviceImpl"
        class="  com.nousinfo.tutorial.service.impl.EmployeeServiceImpl">
        <property name="employeeDAOImpl" ref="employeeDaoImpl" />
    </bean>
    <bean id="departmentserviceImpl"
        class=" com.nousinfo.tutorial.service.impl.DepartmentServiceImpl">
        <property name="departmentDAOImpl" ref="departmentDaoImpl" />
    </bean>

    <bean id="projectserviceImpl" class="com.nousinfo.tutorial.service.impl.ProjectServiceImpl">
        <property name="projectDAOImpl" ref="projectDaoImpl" />
    </bean>

    <bean id="employeeValidator" class="com.nousinfo.tutorial.validator.EmployeeValidator" />

    <bean id="mycontroller"
        class="com.nousinfo.tutorial.controllers.SearchEmployeeController">
        <property name="employeeServiceImpl" ref="employeserviceImpl"></property>

    </bean>
    <bean id="emplController" class="com.nousinfo.tutorial.controllers.EmployeeController">
        <property name="employeeServiceImpl" ref="employeserviceImpl" />
        <property name="projectServiceImpl" ref="projectserviceImpl" />
        <property name="employeeValidator" ref="employeeValidator"></property>
    </bean>

    <bean id="departmentValidator" class="com.nousinfo.tutorial.validator.DepartmentValidator" />

    <bean id="deaprtmentController" class="com.nousinfo.tutorial.controllers.DepartmentController">
        <property name="departmentServiceImpl" ref="departmentserviceImpl"></property>
        <property name="departmentValidator" ref="departmentValidator"></property>
    </bean>

    <bean id="deptCotrooler"
        class="com.nousinfo.tutorial.controllers.SearchDepartmentController">
        <property name="departmentServiceImpl" ref="departmentserviceImpl"></property>
    </bean>

    <bean id="projectValidator" class="com.nousinfo.tutorial.validator.ProjectValidator" />

    <bean id="projectController" class="com.nousinfo.tutorial.controllers.ProjectController">
        <property name="projectServiceImpl" ref="projectserviceImpl"></property>
        <property name="projectValidator" ref="projectValidator"></property>
    </bean>
    <bean id="projectSearchController"
        class="com.nousinfo.tutorial.controllers.SearchProjectController">
        <property name="projectServiceImpl" ref="projectserviceImpl"></property>

    </bean>

    <bean id="viewResolver"
        class="org.springframework.web.servlet.view.InternalResourceViewResolver"
        p:prefix="/WEB-INF/" p:suffix=".jsp" />

    <bean id="messageSource"
        class="org.springframework.context.support.ResourceBundleMessageSource">
        <property name="basename" value="com/nousinfo/resources/messages" />
    </bean>
    <!-- Configure the multipart resolver -->
    <bean id="multipartResolver"
        class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
    </bean>
</beans> 
```

这是我在 dao 层设置会话对象的方式

```
 public class EmployeeDAOImpl implements EmployeeDAO {

        /**
         * This block is used to initialising the session object created by
         * sessionFactory using HibernateUtil class. A org.hibernate.Session
         * represents a single-threaded unit of work.
         */
        /*
         * static { session = HibernateUtil.getSessionFactory().openSession(); }
         */
        private SessionFactory sessionFactory;

        /**
         * @return the sessionFactory
         */
        public SessionFactory getSessionFactory() {
            return sessionFactory;
        }

        /**
         * @param sessionFactory
         *            the sessionFactory to set
         */
        public void setSessionFactory(SessionFactory sessionFactory) {
            this.sessionFactory = sessionFactory;
        }

        /**
         * This will get all employees from the database
         * 
         * @return list of employee
         */
        @SuppressWarnings("unchecked")
        @Override
        public List<Employee> getAllEmployees() {
            Session session = sessionFactory.openSession();

            Criteria criteria = (Criteria) session.createCriteria(Employee.class);

            List<Employee> employeeList = criteria.list();
            return employeeList;
        }} 
```

![在此处输入图像描述](../Images/d9f1a9be7438f2b5c051e86f1cdb05f8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T12:51:29.713

我注意到您的类路径中明显缺少 hibernate-core。那很重要，因为它是所有 Hibernate 代码所在的地方。此外，在 Spring Hibernate 应用程序中，您应该始终使用[`SessionFactory.getCurrentSession()`](http://docs.jboss.org/hibernate/core/4.2/javadocs/org/hibernate/SessionFactory.html#getCurrentSession%28%29)并且*从不* `SessionFactory.openSession()`使用. 有关详细信息，请参阅[“基于普通 Hibernate 3 API 实现 DAO”](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/orm.html#orm-hibernate-straight)。

# ios - UIActivityViewController - 如何更改取消按钮文本

> ID：15293911
> 
> 赞同：7
> 
> 时间：2013-03-08T12:22:38.710
> 
> 标签：ios, uiactivityviewcontroller

有人知道如何更改 UIActivityViewController 的标准取消按钮文本值吗？默认情况下它是“取消”。但我想改变它，例如用不同的语言。

怎么做？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-22T23:51:38.113

**更新：以下代码仅适用于 iOS7。**

就像 Rikkles 所说，您无需自定义文本即可使其本地化。但以防万一有人有充分的理由这样做，这里是代码：

```
NSArray *activityItems = @[@"Test"];

UIActivityViewController *activityController = [[UIActivityViewController alloc] initWithActivityItems:activityItems applicationActivities:nil];

NSAttributedString *as = [[NSAttributedString alloc] initWithString:@"Custom Text" attributes:@{NSForegroundColorAttributeName:[UIColor greenColor]}];
[[UIButton appearanceWhenContainedIn:[UIActivityViewController class], nil] setAttributedTitle:as forState:UIControlStateNormal];

[self presentViewController:activityController animated:YES completion:nil]; 
```

![在此处输入图像描述](../Images/47ecfb7f4a7f94ef9abac952aaf3bc5b.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T12:34:48.930

你不能。但是，默认情况下取消按钮是本地化的。顺便说一句，您可以根据需要创建自己的控制器。你可以用`UIActivity`物体填充它。请注意，当您查看该课程时，当文档谈论 an`activityController`时，它是 any `UIViewController`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-19T09:45:00.343

正如其他人指出的那样，该按钮已由系统本地化，您无法更改它。至少在 iOS 11 上。但我也在为此苦苦挣扎，`Cancel`即使更改了系统语言，该按钮仍保留其标题。

这篇文章帮助我成功地本地化了共享表的取消按钮，并`UIDatePicker`在[倒数计时器模式下](https://stackoverflow.com/questions/48063778/changing-locale-of-uidatepicker-in-countdown-timer-mode)工作，该模式也抵制了以前的系统本地化尝试：[为什么 UIActivityViewController 不显示本地化的取消字符串？](http://takeip.com/why-uiactivityviewcontroller-doesnt-display-localized-cancel-string.html)

将此行添加到您的`info.plist`：

[![在此处输入图像描述](../Images/f214c25ebbfd921de0bd7f473675d1fa.png)](https://i.stack.imgur.com/9q5GD.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T12:37:22.200

取消按钮将被本地化。你也可以试试[REActivityViewController](https://github.com/romaonthego/REActivityViewController)

# android - 使用 jfeinstein10/SlidingMenu 库的二级菜单

> ID：15293917
> 
> 赞同：0
> 
> 时间：2013-03-08T12:22:51.557
> 
> 标签：android, slidingdrawer, android-sliding, slidingmenu

![在此处输入图像描述](../Images/a05c426895a4c186352554c9e1a31b48.png)我需要在 android 中实现滑动抽屉。我正在使用 jfeinstein10/SlidingMenu 库来获取我的滑动绘图组件，它基本上会打开一个列表视图。但是，单击列表菜单项时，带有另一个列表的二级菜单应向下滑动主菜单。

实例化 SlidingMenu 的 MainActivity 类

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_sliding_menu_demo);
        setBehindContentView(R.layout.activity_menu);
        ListView listView = (ListView) findViewById(R.id.list);
        getData();
        ListItemAdapter listadapter = new ListItemAdapter(data, this);
        listView.setAdapter(listadapter);
        listView.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int item,
                    long arg3) {
                Toast.makeText(SlidingMenuDemo.this, "item clicked " + item,
                        Toast.LENGTH_SHORT).show();

            }
        });
        getSlidingMenu().setBehindOffset(250);
        getSlidingMenu().setFadeDegree(0.35f);
        getSlidingMenu().setTouchModeAbove(SlidingMenu.TOUCHMODE_FULLSCREEN);

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-05T13:32:10.317

我通过使用嵌套菜单来实现它。这不是最优雅的解决方案，但到目前为止效果很好。

更多细节在这里： [如何使用 jfeinstein10 / SlidingMenu 在 Android 中实现两级滑动菜单？](https://stackoverflow.com/questions/14619123/how-to-implement-two-level-slidingmenu-in-android-using-jfeinstein10-slidingme/17829011#17829011)

# java - 带有 WebServices 的 Android 上的 Push_Notification

> ID：15293925
> 
> 赞同：1
> 
> 时间：2013-03-08T12:23:26.363
> 
> 标签：java, android, asp.net

我有一个总是检查 Web 服务的场景。如果数据库有变化，那么它应该会弹出一个警报消息。我已经完成了 WHILE LOOP。

```
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Push_notificaton();
        }

public void Push_notificaton(){
    while(true)
    {
        try
        {
SoapObject request = new SoapObject("http://tempuri.org/","getMessage");

SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.dotNet = true;
        envelope.setOutputSoapObject(request);

        //Web method call
        HttpTransportSE androidHttpTransport = new HttpTransportSE("http://180.215.66.194/WebService.asmx");
        androidHttpTransport.call("http://tempuri.org/"+ "getMessage", envelope);
        //get the response
        SoapPrimitive response = (SoapPrimitive)envelope.getResponse();

        //the response object can be retrieved by its name: result.getProperty("objectName");
        String message = (String)response.toString();
        if(!currentMsg.equals(message))
        {
        currentMsg=message;
        AlertDialog.Builder alertDialogBuilder = new    AlertDialog.Builder(this);

            // set title
            alertDialogBuilder.setTitle("Your Title");

            // set dialog message
            alertDialogBuilder
                .setMessage("Click yes to exit!")
                .setCancelable(false)
                .setPositiveButton("Yes",new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog,int id) {
                        // if this button is clicked, close
                        // current activity
                        MessagesRequestActivity.this.finish();
                    }
                  })
                .setNegativeButton("No",new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog,int id) {
                        // if this button is clicked, just close
                        // the dialog box and do nothing
                        dialog.cancel();
                    }
                });

                // create alert dialog
                AlertDialog alertDialog = alertDialogBuilder.create();

                // show it
                alertDialog.show();
        alertDialog.setIcon(R.drawable.ic_launcher);
        alertDialog.show();
        }
        Toast.makeText(this, message, Toast.LENGTH_LONG).show();

        }
        catch (Exception e)
        {
        e.printStackTrace();
        } 
```

但是在这里，由于连续循环，我无法获得输出。让我知道任何其他方法来克服这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T12:45:18.440

您应该使用云服务，它会自动将通知推送到您的 android 应用程序，这可能会触发特定的实现或处理。

你应该看看[GCM (Google Cloud Messaging)](http://developer.android.com/google/gcm/gs.html)。

**什么是 GCM？**

> Google Cloud Messaging for Android (GCM) 是一项服务，可让您将数据从服务器发送到用户的 Android 设备。这可能是一条轻量级消息，告诉您的应用程序要从服务器获取新数据（例如，朋友上传的电影），也可能是一条包含高达 4kb 有效负载数据的消息（因此即时消息等应用程序可以直接消费消息）。上面的链接向您展示了使用 google 配置应用程序所需的步骤。

显然，请通过[本教程](http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/)了解 mySQL 和 php，它成功设置了一个供 GCM 使用的应用程序

**为什么要使用 GCM 及其优势？**

*   它将使您摆脱不断检查服务器以查找数据库更改的麻烦。这会导致您的应用程序出现巨大的性能问题。
*   基本上，你要做的就是在数据库发生变化时自动调用一段代码。更可行的是，不仅在修改数据时，这也可以在其他地方使用。所以你不必费心检查服务器每次。Google 对此感到头疼。

如果您使用的是 asp.net。您将使用这段代码来[触发推送](https://stackoverflow.com/a/11651066/1221203)

请记住，[GCM 实现非常简单，可以快速实现](http://developer.android.com/google/gcm/c2dm.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T12:44:21.217

1.  不要在 ui-thread 中对 web-service 做任何请求。将您的代码移动到 Service 或 AsyncTask。前者更好。

2.  这种方法很耗能。至少，尝试使用 sleep(someTime) 发出请求。

# java - 泛型问题

> ID：15293929
> 
> 赞同：1
> 
> 时间：2013-03-08T12:23:33.200
> 
> 标签：java, generics

**代码**：

```
 interface BaseIntr<T>{
      void saveSwiftMsg(Collection<String> headers) throws Exception;
  }

 class Impl implements BaseIntr{
       public void saveSwiftMsg(Collection<String> headers) throws Exception { }     
  } 
```

**代码的编辑**版本：

```
 interface BaseIntr<T>{
     T process(T t);
     void saveSwiftMsg(Collection<String> headers)      throws Exception;
  }

  class Impl implements BaseIntr{
     public void saveSwiftMsg(Collection<String> headers) throws Exception {    }
    @Override
    public Object process(Object t) {       return t;   }   
  } 
```

**工作环境**：

Java 版本：1.7.0_04，供应商：甲骨文公司

默认语言环境：en_IN，平台编码：Cp1252

操作系统名称：“windows 7”，版本：“6.1”，arch：“amd64”，家族：“windows”

java 编译器抛出以下异常。但是如果我从 BaseIntr 中删除 < T >，它就可以正常工作。

```
javac gen\GenericsTest.java
gen\GenericsTest.java:18: error: Impl is not abstract and does not override abstract     method saveSwiftMsg(Collection) in BaseIntr
 class Impl implements BaseIntr{
 ^
 gen\GenericsTest.java:20: error: name clash: saveSwiftMsg(Collection<String>) in Impl and saveSwiftMsg(Collection<String>) in BaseIntr have the same erasure, yet neither overrides the other
 public void saveSwiftMsg(Collection<String> headers) throws Exception {
                ^
2 errors 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T12:27:00.523

您的接口在实现时使用类型参数化，`T`您必须像这样指定它的类型：

```
class Impl implements BaseIntr<String>{
} 
```

也就是说，如果你想为`String`. 但是您可以将参数委托给实现类：

```
class Impl<T> implements BaseIntr<T>{
} 
```

然后，您需要在实例化类时指定类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T12:42:01.560

如果您使用泛型类型而不指定其类型参数 ( `implements BaseIntr`)，则使用原始类型。这些由 Java 语言规范[定义](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.8)如下：

> 为了方便与非通用遗留代码的接口，可以使用参数化类型（§4.5）的擦除（§4.6）或元素类型为参数化类型的数组类型（§10.1）的擦除作为类型. 这种类型称为原始类型。
> 
> 更准确地说，原始类型被定义为以下之一：
> 
> *   通过采用泛型类型声明的名称而不附带类型参数列表形成的引用类型。

和

> 未从其超类或超接口继承的原始类型 C 的构造函数（第 8.8 节）、实例方法（第 8.4 节、第 9.4 节）或非静态字段（第 8.3 节）的类型是对应的原始类型在对应于 C 的泛型声明中擦除其类型。

即继承的方法有签名

```
saveSwiftMsg(Collection headers) throws Exception 
```

要覆盖，覆盖方法必须与继承的方法具有相同的签名。它没有，导致编译错误。

我强烈建议仅将原始类型用于其预期目的（与遗留代码交互），并启用（并修复）相应的编译器警告。

就此而言，规范也是如此：

> 仅允许使用原始类型作为对遗留代码兼容性的让步。强烈反对在将泛型引入 Java 编程语言之后编写的代码中使用原始类型。Java 编程语言的未来版本可能不允许使用原始类型。
> 
> 为了确保始终标记可能违反类型规则的行为，对原始类型成员的某些访问将导致编译时未经检查的警告。访问原始类型的成员或构造函数时编译时未检查警告的规则如下：
> 
> *   在对字段赋值时：如果左侧操作数的类型是原始类型，则如果擦除更改了字段的类型，则会出现编译时未经检查的警告。
>     
>     
> *   在调用方法或构造函数时：如果要搜索的类或接口的类型（第 15.12.1 节）是原始类型，则如果擦除更改了方法的任何形式参数类型，则会出现编译时未经检查的警告或构造函数。

您应该注意编译器警告，并指定您实现的接口的类型参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T12:25:19.657

您还需要在子类中指定

```
class Impl implements BaseIntr<T>{
       public void saveSwiftMsg(Collection<String> headers) throws Exception { }     
  } 
```

实际上你需要指定类型。这很好

```
interface BaseIntr<String>{
      void saveSwiftMsg(Collection<String> headers) throws Exception;
  }

 class Impl implements BaseIntr<String>{
           public void saveSwiftMsg(Collection<String> headers) throws Exception { }     
      } 
```

# xml - @XmlAnyElement 仅使用第一个元素

> ID：15293930
> 
> 赞同：1
> 
> 时间：2013-03-08T12:23:35.363
> 
> 标签：xml, jaxb, unmarshalling

我有一个 XML 文档，里面有一个 Car ojects 列表。在每个汽车对象中都有一个 Person 对象，如下所示：

```
<Cars>
    <Car id=1>
        <Owner>
            <Name>
              John Blogs
            </name>
         </owner>
    </Car>
    <Car id=2>
        <Owner>
            <Name>
              Mary Murphy
            </name>
         </owner>
    </Car>
</Cars> 
```

我想按如下方式解组此文档：

```
class Car{
    private String owner; 

    @XmlAnyElement(OwnerHandler.class)
    public String getOwner() {
        return owner;
    }
} 
```

我被告知要实现 DomHandler 接口，我已经做到了。现在的问题是我的未编组对象都使用名称 John Blogs - 代码总是找到并使用第一个名称。如果我有多个 Car 对象，这是不行的。

任何人都可以建议解决这个问题吗？@XmlPath 会起作用吗？

我尝试了我能想到的一切。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:18:00.247

我使用了 Eclipse MOXy 的 @XmlPath 属性，效果很好。

# excel - if 函数宏 - 导致特定列

> ID：15293936
> 
> 赞同：1
> 
> 时间：2013-03-08T12:23:46.453
> 
> 标签：excel, vba

我有一个使用 if 函数的宏。它将结果（1 或 0）放置到指定的列中。但是，我想指定列名的名称。假设说执行 if 函数并将值带到标题称为“值”的列中。您可以在下面找到原始代码：

```
Sub bbb()
Dim FormulaCol As Long
Dim LookupCol As Long
Dim TotalRows As Long
Dim TotalCols As Long
Dim i As Long

Sheets("Sheet1").Select
TotalRows = ActiveSheet.UsedRange.Rows.Count
TotalCols = ActiveSheet.UsedRange.Columns.Count

For i = 1 To TotalCols
    If Cells(1, i).Value = "Values" Then FormulaCol = i
    If Cells(1, i).Value = "Test" Then LookupCol = i
Next

ActiveCell.FormulaR1C1 = "=IF(RC[-1]=""United States"",1,0)"
Cells(2, FormulaCol).AutoFill Destination:=Range(Cells(2, FormulaCol), Cells(TotalRows, FormulaCol))
With Range(Cells(2, FormulaCol), Cells(TotalRows, FormulaCol))
    .Value = .Value
End With
End Sub 
```

我知道这部分代码负责静态指定列：

```
ActiveCell.FormulaR1C1 = "=IF(RC[-1]=""United States"",1,0)" 
```

但我不知道我应该如何改变它以使其如上所述工作。有人可以帮我解决这个问题吗？

**编辑**

这是显示我想要实现的目标的图像 ![在此处输入图像描述](../Images/7ff07f7aa70fc15cd086ec1c14634f8e.png)

现在，如果 VALUE 列在 TEST 列的右侧，则此宏可以正常工作。如果 VALUE 列远离测试列，则它不会带来正确的值。我想制作宏来查找标题“值”以识别值列的确切位置（对于某些文件，它不会是同一列）

编辑 2：这是我使用您当前的代码得到的结果。即使我将 VALUE 列移到 TEST 列旁边，它的行为也是一样的。使用时，我的代码值从 C2 填充到 C9。如您所见，使用您的代码它带来了 D1 中的价值

![在此处输入图像描述](../Images/c0db930e37e87651533b530430aad3cd.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T13:35:07.520

我不太确定我是否理解了这个问题，但是根据测试列更改一列中的值的子程序可能如下所示：

```
Sub bbb()
Dim FormulaCol As Long
Dim LookupCol As Long
Dim TotalRows As Long
Dim TotalCols As Long
Dim i As Long

Sheets("Sheet1").Select
TotalRows = ActiveSheet.UsedRange.Rows.Count
TotalCols = ActiveSheet.UsedRange.Columns.Count

For i = 1 To TotalCols
    If Cells(1, i).Value = "Test" Then
        LookupCol = i
        Exit For
    End If
Next

For i = 1 To TotalCols
    If Cells(1, i).Value = "Values" Then
        FormulaCol = i
        Range("A2").Activate
        Debug.Print "=IF(RC[" & CStr(FormulaCol - LookupCol - 1) & "]=""United States"",1,0)"
        ActiveCell.Offset(0, FormulaCol - 1).FormulaR1C1 = "=IF(RC[" & CStr(LookupCol - FormulaCol) & "]=""us"",1,0)"
        Cells(2, FormulaCol).AutoFill Destination:=Range(Cells(2, FormulaCol), Cells(TotalRows, FormulaCol))
        With Range(Cells(2, FormulaCol), Cells(TotalRows, FormulaCol))
        .Value = .Value
        End With
    End If
Next
End Sub 
```

# java - 后缓冲 VolatileImage 调整大小

> ID：15293938
> 
> 赞同：1
> 
> 时间：2013-03-08T12:23:59.930
> 
> 标签：java, applet, double-buffering

我有一个关于我的 java 小程序中的后备缓冲区的小问题。目前我还没有考虑在运行时调整我的小程序的大小。因此面板被调整大小，而我的后台缓冲区保持其初始大小。因此，只有我的小程序的一部分被重绘，这被我的图像大小所覆盖。尽管如此，我还是尝试使用

```
private void createBackBuffer() {
    backBuffer = this.getGraphicsConfiguration().createCompatibleVolatileImage(getWidth(), getHeight());
    defaultComposite = ((Graphics2D) backBuffer.getGraphics()).getComposite();
    defaultStroke = ((Graphics2D) backBuffer.getGraphics()).getStroke();
}

// Reinit on resize
    public void adjustBackBufferSize() {
        if (backBuffer != null) {   
            backBuffer.flush();
            createBackBuffer();
        }
    } 
```

不幸的是，它表现得并不欣赏。一旦用户开始拖动以调整浏览器窗口的大小，娱乐意味着在一小段时间内没有后台缓冲区可绘制。因此面板在闪烁，要么是灰色背景，要么是以前的面板，要么是我要渲染的实际绘图。

我考虑在调整大小以降低闪烁行为时设置宽度和高度的偏移量，但这似乎仍然不是正确的方法，只是一种解决方法。

有什么建议可以在不闪烁的情况下调整大小？！

亲切的问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-11T08:42:46.300

## 问题：不需要的重绘

发生闪烁是因为面板正在重新绘制自身。这些重绘是不需要的，因为您不希望窗口开始闪烁。如果您禁用自动重绘，那么您将控制您的小程序何时重绘。您可以做的是更改代码以在新缓冲区初始化后执行重绘。

## 解决方案，第 1 部分：禁用重绘

您应该尝试以下方法：

```
setIgnoreRepaint(true); 
```

如果这不起作用，请尝试使用您的`main()`方法将其添加到类中：

```
static {
    System.setProperty("sun.awt.noerasebackground", "true");
} 
```

这应该会为您禁用自动重绘，但可能需要指示其他一些组件也不要自动重绘自己。如果您发布 SSCCE，我可以为您提供更多帮助。此外，运行一些测试以查看您的应用程序是否仍然正常工作——您可能需要添加一些`repaint()`调用，例如在最小化和恢复期间。

## 解决方案，第 2 部分：按需重绘

由于您希望在初始化后进行重绘`backBuffer`，请将代码更改为：

```
 // Reinit on resize
    public void adjustBackBufferSize() {
        if (backBuffer != null) {   
            backBuffer.flush();
            createBackBuffer();
            repaint();
        }
    } 
```

# jquery - 使用 jQuery 实时更新

> ID：15293940
> 
> 赞同：1
> 
> 时间：2013-03-08T12:24:11.250
> 
> 标签：jquery, asp.net, real-time, real-time-updates

使用 ASP.NET 我使用中继器在屏幕上显示数据库表。

我希望用户能够选中或取消选中复选框（表中的字段）。在 Management Studio 中实时更新数据库中的相应字段......

通过谷歌查看。JQuery 似乎是这样......到目前为止我已经......

在后面的代码中：

```
//GetUtilityCompanyNames() returns a list of all the companies names
 rptSelectedUtilities.DataSource = GetUtilityCompanyNames();
 rptSelectedUtilities.DataBind(); 
```

在 aspx 中：

```
<asp:Repeater id="rptSelectedUtilities" runat="server" DataSourceID="rptSelectedUtilities">
                <HeaderTemplate>
                    <table class="detailstable FadeOutOnEdit">
                        <tr>   
                            <th style="width:200px;">Utility</th>    
                            <th style="width:200px;">Contacted</th>   
                            <th style="width:200px;">Comment</th>    
                        </tr>
                </HeaderTemplate>
                <ItemTemplate>
                        <tr>
                            <th style="width:200px;"><%# Eval("Name") %></th>
                            <th style="width:200px;"><asp:CheckBox ID="chkMyCheck" runat="server" Checked='<%# Convert.ToBoolean(Eval("Checked")) %>'/></th>   
                            <th style="width:200px;"><%# Eval("Comment") %></th>  
                        </tr>
                </ItemTemplate>
                <FooterTemplate>
                    </table>
                </FooterTemplate>
            </asp:Repeater>

            <asp:Label id="labelTableEmpty" runat="server" Text="There are currently no items in this table." />

            <script type="text/javascript">
            $('bla'). 
```

//不知道如何从这里开始？？

我已将中继器上的 DataSourceID 设置为 =“rptSelectedUtilities”，然后我需要添加脚本，但我是这方面的初学者，希望有任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T15:55:35.997

If you are really needing this to be realtime I would suggest looking at [signalr](http://signalr.net/). It might be a lot to bite off this early in your learning stage but I am currently switching out all of my ajax calls to use signalr instead.

# html - 固定标题 div，下面有可滚动的 div

> ID：15293941
> 
> 赞同：6
> 
> 时间：2013-03-08T12:24:14.350
> 
> 标签：html, css

我正在尝试将两个 div 放在另一个之上。顶部有一个固定的大小。底部需要填充页面高度的其余部分，如果内容太大，则不要使页面更高。

```
<div id="content">
    <div id="top-padding"></div>
    <div id="stuff">
        some content
        <br><br><br><br><br><br><br><br><br><br>
        <br><br><br><br><br><br><br><br><br><br><br><br><br>
        <br><br><br><br><br><br><br><br>
        End of content.
    </div>
</div><!-- content --> 
```

到目前为止我的尝试是：http: [//jsfiddle.net/b4fEE/](http://jsfiddle.net/b4fEE/)

我遇到的问题是绿色 div 太大了。我需要指定它的高度为

```
100% - 30px 
```

我更喜欢在纯 css 中执行此操作，但如有必要，我将使用 javascript/jquery。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T12:34:50.110

试试这个：

```
#stuff {
   overflow-x:auto;
   background-color: lightgreen;
   top:30px;  /* as the height of the other div is 30px */
   left:0;
   right:0;
   bottom:0;
   position:absolute;
} 
```

**[工作小提琴](http://jsfiddle.net/b4fEE/12/)**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-04-19T12:25:54.347

如果有人想解决这个问题，让事情保持正常流程，现在可以使用[flexbox](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Flexible_Box_Layout/Using_CSS_flexible_boxes)布局模型来完成，如下所示：

```
* {
  margin: 0;
  padding: 0;
}
html,
body {
  height: 100%;
}
#content {
  display: flex;
  flex-direction: column;
  width: 300px;
  height: 100%;
  margin: 0 auto;
  background-color: #C9E6FF;
}
#top-padding {
  height: 30px;
  flex: none;
  background: blue;
}
#stuff {
  flex: auto;
  overflow-y: auto;
  background-color: lightgreen;
}
/*for demo purpose */

#stuff p {
  height: 1000px;
}
```

```
<div id="content">
  <div id="top-padding"></div>
  <div id="stuff">
    <p>some content</p>
  </div>
</div>
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-19T12:44:17.217

如果有人想在不使用 flex 的情况下保持正常流程来解决这个问题，那么解决方案如下：

```
html,
    body {
        height: 100%;
    }

    body {
        margin: 0;
    }

    #content {
        height: 100vh;
        position: relative;
        background-color: #C9E6FF;
        margin: 0 auto;
        width: 300px;
    }

    #top-padding {
        background: blue;
        height: 30px;
    }

    #stuff {
        overflow-x:auto;
        background-color: lightgreen;
        height: calc(100vh - 30px);
    }
```

```
<div id="content">
    <div id="top-padding"></div>
        <div id="stuff">
            <p>Lorem ipsum dolor sit amet...Lorem ipsum dolor sit amet...Lorem ipsum dolor sit amet...Lorem ipsum dolor sit amet...Lorem ipsum dolor sit amet...Lorem ipsum dolor sit amet...Lorem ipsum dolor sit amet...Lorem ipsum dolor sit amet...Lorem ipsum dolor sit amet...Lorem ipsum dolor sit amet...Lorem ipsum dolor sit amet...Lorem ipsum dolor sit amet...Lorem ipsum dolor sit amet...Lorem ipsum dolor sit amet...Lorem ipsum dolor sit amet...Lorem ipsum dolor sit amet...Lorem ipsum dolor sit amet...Lorem ipsum dolor sit amet...Lorem ipsum dolor sit amet...Lorem ipsum dolor sit amet...Lorem ipsum dolor sit amet...Lorem ipsum dolor sit amet...Lorem ipsum dolor sit amet...Lorem ipsum dolor sit amet...Lorem ipsum dolor sit amet...Lorem ipsum dolor sit amet...Lorem ipsum dolor sit amet...Lorem ipsum dolor sit amet...Lorem ipsum dolor sit amet...Lorem ipsum dolor sit amet...Lorem ipsum dolor sit amet...Lorem ipsum dolor sit amet...Lorem ipsum dolor sit amet...Lorem ipsum dolor sit amet...Lorem ipsum dolor sit amet...Lorem ipsum dolor sit amet...Lorem ipsum dolor sit amet...Lorem ipsum dolor sit amet...Lorem ipsum dolor sit amet...Lorem ipsum dolor sit amet...Lorem ipsum dolor sit amet...Lorem ipsum dolor sit amet...Lorem ipsum dolor sit amet...Lorem ipsum dolor sit amet...Lorem ipsum dolor sit amet...Lorem ipsum dolor sit amet...Lorem ipsum dolor sit amet...</p>
       </div>
   </div>
```

# matlab - MATLAB：在没有循环的情况下重写 2 个结构的相同操作？

> ID：15293942
> 
> 赞同：0
> 
> 时间：2013-03-08T12:24:18.293
> 
> 标签：matlab, loops, struct

给定矩阵`M`（x 乘以 5）和`thr`包含数字的结构，我如何在没有循环的情况下执行以下过程？

不能使用`structfun`2 个结构。`arrayfun`无法分配给我的结构使用`index`。也不`cellfun`是对的。有人帮忙吗？

先感谢您！

```
index.b = M(:,1) >= thr.b;
index.c = M(:,2) >= thr.c;
index.h = M(:,3) >= thr.h;
index.r = M(:,4) >= thr.r;
index.s = M(:,5) >= thr.s; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T15:31:17.330

如果你真的需要维护你的数据结构，这里是一个解决方案。

首先，让我们创建虚拟输入：

```
M = rand(5);
index = struct('b',[],'c',[],'h',[],'r',[],'s',[]);
thr = struct('b',.5,'c',.5,'h',.5,'r',.5,'s',.5); 
```

这是实际的技巧：

```
A = bsxfun(@ge, M, [thr.b, thr.c, thr.h, thr.r, thr.s]);
A = num2cell(A,1);
[index.b, index.c, index.h, index.r, index.s] = deal(A{:}); 
```

同样，您可以使用适当的数据结构以更有效的方式执行此操作。希望这可以帮助。

# javascript - 我如何扩展服务

> ID：15293943
> 
> 赞同：33
> 
> 时间：2013-03-08T12:24:19.330
> 
> 标签：javascript, angularjs

我对此很陌生，[`angularjs`](http://angularjs.org/)无法找到任何文档或示例。我要做的是扩展基本服务，以便我可以使用其他服务的基本服务下定义的方法。因此，例如说我有如下基本服务。

```
angular.module('myServices', []).

    factory('BasicService', function($http){
        var some_arg = 'abcd'
        var BasicService = {
            method_one: function(arg=some_arg){ /*code for method one*/},
            method_two: function(arg=some_arg){ /*code for method two*/},
            method_three: function(arg=some_arg){ /*code for method three*/},
        });
        return BasicService;
    }   
); 
```

现在我想定义一个从上面扩展的扩展服务，`BasicService`以便我可以使用扩展服务的 BasicService 下定义的方法。也许是这样的：

```
 factory('ExtendedService', function($http){
        var ExtendedService = BasicService();
        ExtendedService['method_four'] = function(){/* code for method four */}
        return ExtendedService;
    } 
```

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2014-02-02T16:30:50.093

更清洁和必要的方式

```
.factory('ExtendedService', function($http, BasicService){

    var extended = angular.extend(BasicService, {})
    extended.method = function() {
        // ...
    }
    return extended;
} 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-03-08T12:47:26.960

您`ExtendedService`应该注入`BasicService`以便能够访问它。除此之外`BasicService`是一个对象字面量，因此您实际上不能将其称为函数 ( `BasicService()`)。

```
.factory('ExtendedService', function($http, BasicService){
  BasicService['method_four'] = function(){};
  return BasicService;
} 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2014-06-26T06:15:00.670

在我看来，更好的方法：

```
.factory('ExtendedService', function($http, BasicService){
    var service = angular.copy(BasicService);

    service.methodFour = function(){
        //code for method four
    };

    return service;
}); 
```

这里至少不会改变继承的服务。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-02-01T20:41:11.087

抱歉，如果我在这里发帖，但可能是一个不错的地方。我参考这个[帖子](https://stackoverflow.com/questions/21496331/angularjs-are-service-singleton)

注意扩展服务/工厂，因为它们是单例的，因此您可以扩展服务/工厂一次。

```
'use strict';
            angular.module('animal', [])
                .factory('Animal',function(){
                        return {
                            vocalization:'',
                            vocalize : function () {
                                console.log('vocalize: ' + this.vocalization);
                            }
                        }

                });
                angular.module('dog', ['animal'])
                    .factory('Dog', function (Animal) {
                        Animal.vocalization = 'bark bark!';
                        Animal.color = 'red';
                        return Animal;
                    });

                angular.module('cat', ['animal'])
                   .factory('Cat', function (Animal) {
                        Animal.vocalization = 'meowwww';
                        Animal.color = 'white';
                        return Animal;
                    });
                 angular.module('app', ['dog','cat'])
                .controller('MainCtrl',function($scope,Cat,Dog){
                     $scope.cat = Cat;
                     $scope.dog = Dog;
                     console.log($scope.cat);
                     console.log($scope.dog);
                    //$scope.cat = Cat;
                }); 
```

但如果你喜欢

```
'use strict';
            angular.module('animal', [])
                .factory('Animal',function(){
                    return function(vocalization){
                        return {
                            vocalization:vocalization,
                            vocalize : function () {
                                console.log('vocalize: ' + this.vocalization);
                            }
                        }
                    }
                });    
                angular.module('app', ['animal'])
                    .factory('Dog', function (Animal) {
                        function ngDog(){
                            this.prop = 'my prop 1';
                            this.myMethod = function(){
                                console.log('test 1');
                            }
                        }
                        return angular.extend(Animal('bark bark!'), new ngDog());
                    })
                    .factory('Cat', function (Animal) {
                        function ngCat(){
                            this.prop = 'my prop 2';
                            this.myMethod = function(){
                                console.log('test 2');
                            }
                        }
                        return angular.extend(Animal('meooow'), new ngCat());
                    })
                .controller('MainCtrl',function($scope,Cat,Dog){
                     $scope.cat = Cat;
                     $scope.dog = Dog;
                     console.log($scope.cat);
                     console.log($scope.dog);
                    //$scope.cat = Cat;
                }); 
```

有用

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-03-20T09:09:43.223

我编写了一个 $extend 提供程序，它在后台使用 Backbone 的扩展——所以你可以在需要时扩展原型和静态属性——另外你还可以获得父/子构造函数——参见 gist @ [https://gist.github .com/asafebgi/5fabc708356ea4271f51](https://gist.github.com/asafebgi/5fabc708356ea4271f51)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-08-22T11:53:15.807

要扩展 Stewie 的答案，您还可以执行以下操作：

```
.factory('ExtendedService', function($http, BasicService){
    var service = {
        method_one: BasicService.method_one,
        method_two: BasicService.method_two,
        method_three: BasicService.method_three,
        method_four: method_four
    });

    return service ;

    function method_four(){

    }
} 
```

这样做的好处是原始服务不会被更改，同时保持其功能。您还可以选择在 ExtendedService 中为 BasicService 中的其他 3 个方法使用您自己的实现。

# image - 动态下载图片

> ID：15293945
> 
> 赞同：-1
> 
> 时间：2013-03-08T12:24:20.893
> 
> 标签：image, xml-parsing, opencart

我的供应商给了我一个包含所有产品及其图像的 xml 文件。

图像托管在供应商的数据库中，因此在 xml 文件夹中看起来像 www.webservice.supplier.com/index.php?action=getimage&id=10

如何下载此图像或在我的 opencart 系统中使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T12:44:53.887

您可以尝试使用 file_get_contents、fopen 或任何其他相关的 php 函数打开文件。一旦打开到流中，您可以使用一组相关函数（fwrite 等）保存它。

关于细节，这是一些快速而肮脏的 php 代码。

```
//This is the source image...
$url='http://www.google.es/logos/2013/womens_day_2013-1055007-hp.jpg';

$file=fopen($url, 'r'); //Check with your server's provider, just in case they won't allow you to do this.

if(!$file)
{
    die('ERROR: Could not read file');
}
else
{
    //This is where you'll store the file. Check the directory permissions.
    $destination=fopen('results/file_in_disk_.jpg', 'w');

    if(!$destination) die('ERROR: Could not create or open destination file');
    else
    {
        while($data=fread($file, 1024))
        {
            fwrite($destination, $data);
        }

        fclose($destination);
        fclose($file);
    }
} 
```

图像提供者可能会输出与该 url 关联的图像标头，因此如果源 url 看起来不像图像，请不要担心。

请记住，您应该获得供应商的许可才能下载和使用图像。

希望有帮助。

编辑：我忘了，您应该将该代码包装在从 XML 文件读取并执行其操作的其他部分中。不要忘记检查已经存在的图像！

# winapi - TextOut() 函数显示文本，但当窗口最小化或恢复时文本消失

> ID：15293946
> 
> 赞同：1
> 
> 时间：2013-03-08T12:24:22.017
> 
> 标签：winapi, text, window, textout

我正在取消 TextOut() 函数以在我的窗口中显示一些文本。它工作正常，一旦窗口最大化，文本就会显示。但是一旦窗口最小化并再次恢复，窗口上显示的所有文本都会消失:(有什么方法可以保留窗口上显示的数据如果它被最小化了？等待响应:(

# android - 如何设置背景图像 ImageView

> ID：15293950
> 
> 赞同：0
> 
> 时间：2013-03-08T12:24:33.633
> 
> 标签：android

ZoomImageViewer 类型中的方法 setBackgroudImage(byte[]) 不适用于下面的参数 (ImageView) 是我的 ci 遵循本教程 [Zoom image with effect ontouch android](https://stackoverflow.com/questions/10039545/zoom-image-with-effect-ontouch-android)

```
 LinearLayout.LayoutParams paramsLO2 = new  
     LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
     // button margins
     paramsLO2.setMargins(0, 20, 0, 0);
     // button height/width *pixels*

     btnLO.setOrientation(LinearLayout.VERTICAL);
     btnLO.setBackgroundColor(5); // not working correctly

     //buttons
     for (i =0;i <reqdata.length;i++)
         {
             LinearLayout li=new LinearLayout(this);
             li.setOrientation(LinearLayout.HORIZONTAL);
             final Button b1 = new Button(MainActivity1.this);
             final ImageView imageView = new ImageView(MainActivity1.this);
             ZoomImageViewer zoom = new ZoomImageViewer(this);

<!----  this line show problem       zoom.setBackgroudImage(imageView);----->

              setContentView(zoom);

             imageView.setScaleType(ImageView.ScaleType.FIT_CENTER);

             imageView.setOnTouchListener(this);

        //     int width = 160;
          //   int height = 50;

             LinearLayout.LayoutParams parms = new  
      LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
             parms.setMargins(0, 2, 0, 0);
             imageView.setLayoutParams(parms);

             li.addView(b1, paramsLO);        
             li.addView(imageView);
             btnLO.addView(li);

             b1.setText(reqdata[i].getSpinnerText());

             b1.setOnClickListener(new View.OnClickListener() 
                    {
                        public void onClick(View v) 
                        {               

                             imageView1 = imageView;

                             Intent pictureActionIntent = new  
         Intent(MediaStore.ACTION_IMAGE_CAPTURE); 

     pictureActionIntent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(new  
   File(SDCARD_ROOT_PATH + SAVE_PATH_IN_SDCARD,IMAGE_CAPTURE_NAME)));  

      startActivityForResult(pictureActionIntent,CAMERA_PICTURE);
                             b1.setClickable(false);

                          } 

                    });    

         }

     final Button b2 = new Button(MainActivity1.this);

     b2.setText("Submit");
     b2.setWidth(150);
     b2.setHeight(50);
     b2.setOnClickListener(new View.OnClickListener() 
     {
         public void onClick(View v) 
         {                           

             long visitID = dbConnector.saveVisit();

             for (i =0;i <reqdata.length;i++)
             {

   dbConnector.saveVisitDetail(listByte.get(i),visitID,Long.
 valueOf(reqdata[i].getValue()).longValue());
             }     
                Toast.makeText(getBaseContext(),    
   "Sucessful",Toast.LENGTH_SHORT).show();
                Intent intent = new Intent(MainActivity1.this,  
    Main.class);        
                startActivity(intent);
                finish();
         }
     }); 
     btnLO.addView(b2, paramsLO2);
     btnLO.setGravity(Gravity.CENTER| Gravity.CENTER_HORIZONTAL);
     scroll.addView(btnLO);

     this.addContentView(scroll, new LayoutParams());

}

@Override
   protected void onActivityResult(int requestCode, int resultCode, Intent   
    imageReturnedIntent) {
       super.onActivityResult(requestCode, resultCode, imageReturnedIntent);

            if (imageReturnedIntent.getExtras() != null) 
                {
                    // here is the image from camera
                    yourSelectedImage = (Bitmap)  
  imageReturnedIntent.getExtras().get("data");
                    ByteArrayOutputStream outStr = new  
  ByteArrayOutputStream();                

  yourSelectedImage.compress(CompressFormat.JPEG, 100, outStr);
                    blob = outStr.toByteArray();
                    yourSelectedImage =  
  BitmapFactory.decodeByteArray(blob, 0, blob.length);
                    imageView1.setImageBitmap(yourSelectedImage);
                    listByte.add(blob);

                }

    }

   class MyData1 {
        public MyData1( String spinnerText, String value ) {
            this.spinnerText = spinnerText;
            this.value = value;
        }

        public String getSpinnerText() {
            return spinnerText;
        }

        public String getValue() {
            return value;
        }

        public String toString() {
            return spinnerText;
        }

        String spinnerText;
        String value;
    }

   public boolean onTouch(View v, MotionEvent event) {

       ImageView view = (ImageView) v;

       view.setScaleType(ImageView.ScaleType.MATRIX);

       float scale;

       // Dump touch event to log

       dumpEvent(event);

       // Handle touch events here...

       switch (event.getAction() & MotionEvent.ACTION_MASK) {

       case MotionEvent.ACTION_DOWN: //first finger down only

          savedMatrix.set(matrix);

          start.set(event.getX(), event.getY());

          Log.d(TAG, "mode=DRAG" );

          mode = DRAG;

          break;

       case MotionEvent.ACTION_UP: //first finger lifted

       case MotionEvent.ACTION_POINTER_UP: //second finger lifted

          mode = NONE;

          Log.d(TAG, "mode=NONE" );

          break;

       case MotionEvent.ACTION_POINTER_DOWN: //second finger down

          oldDist = spacing(event);

          Log.d(TAG, "oldDist=" + oldDist);

          if (oldDist > 5f) {

             savedMatrix.set(matrix);

             midPoint(mid, event);

             mode = ZOOM;

             Log.d(TAG, "mode=ZOOM" );

          }

          break;

       case MotionEvent.ACTION_MOVE:

          if (mode == DRAG) { //movement of first finger

             matrix.set(savedMatrix);

             if (view.getLeft() >= -392){

                matrix.postTranslate(event.getX() - start.x, event.getY() - start.y);

             }

          }

          else if (mode == ZOOM) { //pinch zooming

             float newDist = spacing(event);

             Log.d(TAG, "newDist=" + newDist);

             if (newDist > 5f) {

                matrix.set(savedMatrix);

                scale = newDist / oldDist; /*thinking i need to play around   
  with this value to limit it*/

                matrix.postScale(scale, scale, mid.x, mid.y);

             }

          }

          break;

       }

       // Perform the transformation

       view.setImageMatrix(matrix);

       return true; // indicate event was handled

    }

    private float spacing(MotionEvent event) {

       float x = event.getX(0) - event.getX(1);

       float y = event.getY(0) - event.getY(1);

       return FloatMath.sqrt(x * x + y * y);

    }

    private void midPoint(PointF point, MotionEvent event) {

       float x = event.getX(0) + event.getX(1);

       float y = event.getY(0) + event.getY(1);

       point.set(x / 2, y / 2);

    }

    /** Show an event in the LogCat view, for debugging */

    private void dumpEvent(MotionEvent event) {

       String names[] = { "DOWN" , "UP" , "MOVE" , "CANCEL" , "OUTSIDE" ,

          "POINTER_DOWN" , "POINTER_UP" , "7?" , "8?" , "9?" };

       StringBuilder sb = new StringBuilder();

       int action = event.getAction();

       int actionCode = action & MotionEvent.ACTION_MASK;

       sb.append("event ACTION_" ).append(names[actionCode]);

       if (actionCode == MotionEvent.ACTION_POINTER_DOWN

             || actionCode == MotionEvent.ACTION_POINTER_UP) {

          sb.append("(pid " ).append(

          action >> MotionEvent.ACTION_POINTER_ID_SHIFT);

          sb.append(")" );

       }

       sb.append("[" );

       for (int i = 0; i < event.getPointerCount(); i++) {

          sb.append("#" ).append(i);

          sb.append("(pid " ).append(event.getPointerId(i));

          sb.append(")=" ).append((int) event.getX(i));

          sb.append("," ).append((int) event.getY(i));

          if (i + 1 < event.getPointerCount())

             sb.append(";" );

       }

       sb.append("]" );

       Log.d(TAG, sb.toString());

    }

   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T12:44:30.093

从您指出的代码来看，似乎`setBackgroundImage`需要一个[位图](http://developer.android.com/reference/android/graphics/Bitmap.html)作为输入参数。因此，您可以通过以下方式设置位图：

```
Bitmap bitmap = ((BitmapDrawable)imageView.getDrawable()).getBitmap();
zoom.setBackgroudImage(bitmap); 
```

# c# - 如何在c#winform应用程序中检测标题栏上的鼠标悬停或标题栏上的鼠标移出

> ID：15293971
> 
> 赞同：1
> 
> 时间：2013-03-08T12:25:45.993
> 
> 标签：c#

我想在我的 c# winform 应用程序中检测标题栏上的鼠标悬停或标题栏上的鼠标移出。我得到了一个有效的代码，但问题是当我将鼠标放在 win 表单的任何区域然后鼠标离开发生并且当我将鼠标放在标题栏上然后右事件调用时。这是代码

```
using System.Runtime.InteropServices;
public partial class Form2 : Form
    {
        public Form2()
        {
            InitializeComponent();
        }

        protected override void WndProc(ref Message m)
        {
            if (m.Msg == 0xA0) // WM_NCMOUSEMOVE
            {
                TrackNcMouseLeave(this);
                //ShowClientArea();
                label1.Text = "mouse move on title bar";
            }
            else if (m.Msg == 0x2A2) // WM_NCMOUSELEAVE
            {
                //HideClientAreaIfPointerIsOut();
                label1.Text = "mouse leave from title bar";
            }

            base.WndProc(ref m);
        }

        protected override void OnMouseLeave(EventArgs e)
        {
            base.OnMouseLeave(e);
            //HideClientAreaIfPointerIsOut();
        }

        private int previouseHeight;

        private void ShowClientArea()
        {
            if (this.ClientSize.Height == 0)
                this.ClientSize = new Size(this.ClientSize.Width, previouseHeight);
        }

        private void HideClientAreaIfPointerIsOut()
        {
            if (this.Bounds.Contains(Cursor.Position))
                return;
            previouseHeight = this.ClientSize.Height;
            this.ClientSize = new Size(this.ClientSize.Width, 0);
        }

        public static void TrackNcMouseLeave(Control control)
        {
            TRACKMOUSEEVENT tme = new TRACKMOUSEEVENT();
            tme.cbSize = (uint)Marshal.SizeOf(tme);
            tme.dwFlags = 2 | 0x10; // TME_LEAVE | TME_NONCLIENT
            tme.hwndTrack = control.Handle;
            TrackMouseEvent(tme);
        }

        [DllImport("user32")]
        public static extern bool TrackMouseEvent([In, Out] TRACKMOUSEEVENT lpEventTrack);

        [StructLayout(LayoutKind.Sequential)]
        public class TRACKMOUSEEVENT
        {
            public uint cbSize;
            public uint dwFlags;
            public IntPtr hwndTrack;
            public uint dwHoverTime;
        }
    } 
```

所以有人请指导我当我将鼠标放在身体上时我需要改变什么，那么我不应该被通知。谢谢

# java - 打包应用程序时获取包 org.springframework.transaction.annotation 不存在错误

> ID：15293973
> 
> 赞同：14
> 
> 时间：2013-03-08T12:25:52.070
> 
> 标签：java, spring, hibernate, spring-mvc

我在春天的世界里很新。我使用 Spring 3.2 和 Hibernate 4.1.9 开发了一个 DAO，但我注意到了一件奇怪的事情。

所有用到的Spring相关依赖都属于3.2.1版本，除了**spring-aop**模块相关的依赖。对于这个模块，我必须使用 3.2.0 版本，因为如果我在 dao 类实现中使用 3.2.1，则找不到此导入：**org.springframework.transaction.annotation.Transactional**

这是我原来的**pom.xml**文件（效果很好）：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>org.andrea.myexample</groupId>
    <artifactId>HibernateOnSpring</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <packaging>jar</packaging>

    <name>HibernateOnSpring</name>
    <url>http://maven.apache.org</url>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>

    <dependencies>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>3.8.1</version>
            <scope>test</scope>
        </dependency>

        <!-- Dipendenze di Spring Framework -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>3.2.1.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-beans</artifactId>
            <version>3.2.1.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>3.2.1.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context-support</artifactId>
            <version>3.2.1.RELEASE</version>
        </dependency>

        <dependency>   <!-- Usata da Hibernate 4 per LocalSessionFactoryBean -->
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>3.2.0.RELEASE</version>
        </dependency>

        <!-- Dipendenze per AOP -->
        <dependency>
            <groupId>cglib</groupId>
            <artifactId>cglib</artifactId>
            <version>2.2.2</version>
        </dependency>

        <!-- Dipendenze per Persistence Managment -->

        <dependency>    <!-- Apache BasicDataSource -->
            <groupId>commons-dbcp</groupId>
            <artifactId>commons-dbcp</artifactId>
            <version>1.4</version>
        </dependency>

        <dependency>    <!-- MySQL database driver -->
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.23</version>
        </dependency>

        <dependency>    <!-- Hibernate -->
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>4.1.9.Final</version>
        </dependency>

    </dependencies>
</project> 
```

这是我的**PersonDAOImpl**类（实现我的具体 DAO 的类）：

```
package org.andrea.myexample.HibernateOnSpring.dao;

import java.util.List;

import org.andrea.myexample.HibernateOnSpring.entity.Person;

import org.hibernate.Criteria;
import org.hibernate.HibernateException;
import org.hibernate.Session;
import org.hibernate.Transaction;
import org.hibernate.SessionFactory;
import org.hibernate.cfg.Configuration;
import org.hibernate.service.ServiceRegistry;
import org.hibernate.service.ServiceRegistryBuilder;
import org.springframework.transaction.annotation.Transactional;

public class PersonDAOImpl implements PersonDAO {

    // Factory per la creazione delle sessioni di Hibernate:
    private static SessionFactory sessionFactory;

    public void setSessionFactory(SessionFactory sessionFactory) {
        this.sessionFactory = sessionFactory;
    }

    // CREATE CRUD Operation:
    @Transactional(readOnly = false)
    public Integer addPerson(Person p) {

        System.out.println("Inside addPerson()");

        Session session = sessionFactory.openSession();

        Transaction tx = null;
        Integer personID = null;

        try {
            tx = session.beginTransaction();

            personID = (Integer) session.save(p);
            tx.commit();
        } catch (HibernateException e) {
            if (tx != null)
                tx.rollback();
            e.printStackTrace();
        } finally {
            session.close();
        }

        return personID;

    }

    // READ CRUD Operation (legge un singolo record avente uno specifico id):
    public Person getById(int id) {

        System.out.println("Inside getById()");

        Session session = sessionFactory.openSession();

        Transaction tx = null;          
        Person retrievedPerson = null;  

        try {
            tx = session.beginTransaction();
            retrievedPerson = (Person) session.get(Person.class, id);
            tx.commit();
        }catch (HibernateException e) { 
            if (tx != null)                 
                tx.rollback();          
            e.printStackTrace();
        } finally {                 
            session.close();
        }

        return retrievedPerson;
    }

    // READ CRUD Operation (recupera la lista di tutti i record nella tabella):
    @SuppressWarnings("unchecked")
    public List<Person> getPersonsList() {

        System.out.println("Inside getPersonsList()");

        Session session = sessionFactory.openSession();
        Transaction tx = null;
        List<Person> personList = null;

        try {
            tx = session.beginTransaction();
            Criteria criteria = session.createCriteria(Person.class);
            personList = criteria.list();
            System.out.println("personList: " + personList);
            tx.commit();
        }catch (HibernateException e) { 
            if (tx != null)                 
                tx.rollback();          
            e.printStackTrace();
        } finally {
            session.close();
        }
        return personList;
    }

    // DELETE CRUD Operation (elimina un singolo record avente uno specifico id):
    public void delete(int id) {

        System.out.println("Inside delete()");

        Session session = sessionFactory.openSession();
        Transaction tx = null;

        try {
            tx = session.beginTransaction();
            Person personToDelete = getById(id);
            session.delete(personToDelete);
            tx.commit();
        }catch (HibernateException e) { 
            if (tx != null)                 
                tx.rollback();          
            e.printStackTrace();
        } finally {
            session.close();
        }

    }

    @Transactional
    public void update(Person personToUpdate) {

        System.out.println("Inside update()");

        Session session = sessionFactory.openSession();
        Transaction tx = null;

        try {
            System.out.println("Insite update() method try");
            tx = session.beginTransaction();
            session.update(personToUpdate);

            tx.commit();
        }catch (HibernateException e) { 
            if (tx != null)                 
                tx.rollback();          
            e.printStackTrace();
        } finally {
            session.close();
        }   

    }

} 
```

问题是，如果我对**spring-aop模块使用****3.2.1**版本而不是**3.2.0**以这种方式更改此依赖项：

 ****```
 <dependency>   <!-- Usata da Hibernate 4 per LocalSessionFactoryBean -->
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>3.2.1.RELEASE</version>
    </dependency> 
```

当我运行 Maven ---> Maven Install 时，编译失败并返回以下错误消息：

```
[ERROR] COMPILATION ERROR : 
[INFO] -------------------------------------------------------------
[ERROR] /home/andrea/Documents/ws/HibernateOnSpring/src/main/java/org/andrea/myexample/HibernateOnSpring/dao/PersonDAOImpl.java:[15,49] error: package org.springframework.transaction.annotation does not exist
[ERROR] /home/andrea/Documents/ws/HibernateOnSpring/src/main/java/org/andrea/myexample/HibernateOnSpring/dao/PersonDAOImpl.java:[27,2] error: cannot find symbol
[ERROR]  class PersonDAOImpl
/home/andrea/Documents/ws/HibernateOnSpring/src/main/java/org/andrea/myexample/HibernateOnSpring/dao/PersonDAOImpl.java:[128,2] error: cannot find symbol
[INFO] 3 errors 
[INFO] -------------------------------------------------------------
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 3.288s
[INFO] Finished at: Fri Mar 08 13:19:23 CET 2013
[INFO] Final Memory: 12M/105M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.3.2:compile (default-compile) on project HibernateOnSpring: Compilation failure: Compilation failure:
[ERROR] /home/andrea/Documents/ws/HibernateOnSpring/src/main/java/org/andrea/myexample/HibernateOnSpring/dao/PersonDAOImpl.java:[15,49] error: package org.springframework.transaction.annotation does not exist
[ERROR] /home/andrea/Documents/ws/HibernateOnSpring/src/main/java/org/andrea/myexample/HibernateOnSpring/dao/PersonDAOImpl.java:[27,2] error: cannot find symbol
[ERROR] class PersonDAOImpl
[ERROR] /home/andrea/Documents/ws/HibernateOnSpring/src/main/java/org/andrea/myexample/HibernateOnSpring/dao/PersonDAOImpl.java:[128,2] error: cannot find symbol
[ERROR] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException 
```

并且在**PersonDAOImpl 中**发生找不到以下导入的类：

```
org.springframework.transaction.annotation.Transactional; 
```

如果我尝试使用 3.2.1 版本的 spring-orm 模块，为什么会出现这个问题？我该如何解决使用它？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-09-19T22:17:17.923

该软件包`org.springframework.transaction`由`spring-tx`工件提供。将以下内容添加到您的 pom.xml 并执行 maven 更新，应该这样做：

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-tx</artifactId>
    <version>${org.springframework-version}</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T12:48:41.003

尝试使用相同版本的所有与 spring 相关的依赖项。我猜 org.springframework.transaction.annotation.Transactional 出现在 spring 3.2.0 中。所以这应该不是问题。包括 @Transactionl 工作的 spring-tx 依赖项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T12:47:43.590

`@Transactional`注释在 spring-tx 模块中。包括其中的 3.2.1 版本，并始终确保使用所有 Spring 模块的相同版本。****

# c# - 无法加载文件或程序集“Oracle.DataAccess 错误

> ID：15293975
> 
> 赞同：11
> 
> 时间：2013-03-08T12:26:05.817
> 
> 标签：c#, asp.net, oracle11g, .net-assembly, gac

我正在使用 C# 构建 ASP.NET 应用程序，并且我想连接到 oracle 数据库。我在我的 64 位 Microsoft Window Server 2008 机器上的应用程序中
添加了对的引用。`Oracle.DataAccess`我还在我的机器上安装了 ODAC（Oracle 数据访问组件）并且`Oracle.DataAccess.dll`也出现在此路径上

> C:\Windows\Microsoft.NET\assembly\GAC_64\Oracle.DataAccess

但是当我尝试连接时遇到以下错误：

> 无法加载文件或程序集 'Oracle.DataAccess, Version=4.112.3.0, Culture=neutral, PublicKeyToken=89b483f429c47342' 或其依赖项之一。该系统找不到指定的文件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T12:57:19.660

据我所知，该`Oracle.DataAccess`程序集仅适用于 32 位，64 位我也有这种问题，它真的不起作用。我的解决方案是从 GAC 中删除 64 位并在 GAC 上安装 32 位。我还将 bin 文件夹中的任何 .dll 文件删除到我的应用程序中，找到 GAC 上的程序集。

如果您的机器和操作系统是 64 位，则没有问题，32 位版本可以正常工作。

**更新**

我建议你看看[`Official Oracle ODP.NET, Managed Driver`](https://www.nuget.org/packages/Oracle.ManagedDataAccess/)，那是一个更好的版本`Oracle.DataAccess`。这`Managed Driver`不需要`Oracle Client`在机器上，您只需要在的 DataSource 字段上提供 TNS`connection string`并且它适用于`32`和`64`位。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T12:30:27.030

您需要同时安装 x64 和 x86 版本的 Oracle，因为某些东西（我认为是 Visual Studio）在调试时使用 x86 版本。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-03T07:03:06.150

在 VS2010 中，我将平台目标更改为 x64，此错误消息消失。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T12:36:27.213

基本相同的错误

根据我和其他答案参与者的最后一篇文章，缺少 ODP.NET 安装组件。

你检查GAC了吗？

如果您没有看到 Oracle.xxx 文件夹，

你没有取得任何进展。

将 Oracle.DataAccess.dll 的正确版本和位放入应用程序 /BIN 文件夹并进行本地引用。它解决了很多问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-07-18T10:55:54.990

要运行您的网站，您必须使用 IIS，因为 Visual Studio 的开发服务器仅在 32 位模式下运行。
在 IIS 应用程序池中，将您的应用程序设置为以 64 位运行。（设置在高级设置中）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-17T13:20:44.920

为了解决这个错误，我在 IIS 中设置了我的应用程序池以允许 32 位应用程序。打开 IIS 管理器，右键单击应用程序池，然后选择高级设置 --> 将“启用 32 位应用程序”设置为 True。它对我来说很好。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-11-19T08:05:15.007

我在 ac# 控制台应用程序上遇到了同样的异常。为我解决的问题是将平台目标更改为 x86。（项目属性 => 构建）

# objective-c - 覆盖类别中的类实例方法时如何抑制链接器警告

> ID：15293978
> 
> 赞同：8
> 
> 时间：2013-03-08T12:26:12.910
> 
> 标签：objective-c, clang

我*需要*使用类别覆盖方法。我也知道这样做的危险（这是另一个类中的私有类，没有人会编写另一个覆盖类别方法，因此不能保证未定义的行为）。我见过很多类似的[问题](https://stackoverflow.com/questions/9424004/suppress-warning-category-is-implementing-a-method-which-will-also-be-implement)，但它们都解决了使用以下内容抑制*编译器*警告的问题：

```
#pragma clang diagnostic push
#pragma clang diagnostic ignored "-Wobjc-protocol-method-implementation"

// do your override

#pragma clang diagnostic pop 
```

但是，这仍然会留下*链接器*警告。是否有可能在 Xcode 4.6 中为我认为安全的特定覆盖摆脱它？

这是一个说明问题的[示例 GitHub 项目](https://github.com/lmirosevic/objc-cat-override)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:37:47.217

好的，正如我在评论中解释的那样，您尝试做的事情是危险的，不应该这样做。我还建议阅读[运行时文档](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html)以了解原因并了解实现目标的其他方法。你应该读那个。

在任何情况下，您正在做的另一种方法是使用运行时环境“跳过”初始化层次结构中的一个类，从而有效地“覆盖”超类方法，从而产生完全相同的结果而不会引发如此多的危险信号。

这是如何完成的一个选项，在您的示例项目中，将 FunkyBranch 类实现更改为：

```
#import "FunkyBranch.h"
#import <objc/runtime.h>

typedef id(*InitIMP)(id,SEL);

@implementation FunkyBranch

-(id) init
{
    InitIMP superSuperInit = (InitIMP)class_getMethodImplementation([[self superclass] superclass], @selector(init));

    self = superSuperInit(self, @selector(init));
    if (self)
    {
        NSLog(@"FunkyBranch initialized");
    }
    return self;
}

@end 
```

它将与您当前的实施具有相同的结果，而不会带来您正在做的事情的危险。

请记住，将函数指针转换为正确的类型至关重要，而且我仍然认为您应该重新考虑您的方法，而不是强迫运行时做一些它不打算做的事情。无论如何，这回答了你的问题。

# javascript - 升级到 Primefaces 3.5 后远程命令无法正常工作

> ID：15293980
> 
> 赞同：1
> 
> 时间：2013-03-08T12:26:16.137
> 
> 标签：javascript, primefaces

从 2.2.1 升级后，我无法再在对话框组件内显示来自视图范围的支持 bean 的一些数据。对话框弹出，但来自 bean 的数据设置为空。

问题似乎是按钮的远程命令调用了一个 javascript，该 javascript 再次调用了对话框小部件上的 show 方法。渲染响应阶段在整个过程中被调用两次（恢复视图阶段只被调用一次）。第一次使用正确的值，第二次使用空值。

如果我更改 onsucess 属性以直接显示对话框：

```
<p:remoteCommand name="lazyload" onsuccess="confirmdialog.show();"
update=":confirm"  > 
```

对话框正确显示值。如果我改为使用 onsuccess 属性中的 handleConfirm 脚本并注释掉“return true;” 来自 javascript 的对话框还显示了这些值。渲染阶段现在只调用一次。

任何关于为什么这会触发额外渲染阶段的想法都将受到高度赞赏。

我有点不情愿删除 javascript。这是以前同事的代码，我在应用程序中找不到任何设置了javascript的数据参数的东西。我有点不确定原因是否代表我缺乏理解或可疑的代码。警报（数据。文本）；返回未定义。

**代码：**

BuyProduct.xhtml 包含远程命令：

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:fn="http://java.sun.com/jsp/jstl/functions"
    xmlns:comp="http://java.sun.com/jsf/composite/components">

    <ui:include src="/confirmOrder.xhtml"/>

    <h:form>
        <p:commandButton disabled="#{productsearch.hasCP == false}" 
        onclick="if(canhide == false) {return false;} if(submitelement!=this||cansubmit==false) { cansubmit = false; submitelement=this; lazyload(); return false;} cansubmit = false; submitelement=null; canhide=false; loading.show(); return true;"
            ajax="false" value="${msgs.order}"
            actionListener="#{cp.PerformSearch}"
            action="/services/cPReply.xhtml">
            <f:setPropertyActionListener value="#{confirmorder.targetGateway}" target="#{cp.gateway}" />
            <f:setPropertyActionListener value="#{productsearch.code}" target="#{cp.code}" />
            <f:setPropertyActionListener value="#{productsearch.registerId}" target="#{cp.registerId}" />
        </p:commandButton>
        <p:remoteCommand name="lazyload" onsuccess="return handleConfirm(data);" update=":confirm"  >  
                <f:setPropertyActionListener value="#{productsearch.cPGW.gateway_id}" target="#{confirmorder.gatewayId}" />
                <f:setPropertyActionListener value="CP" target="#{confirmorder.serviceName}" />

        </p:remoteCommand> 
```

包含 javascript 和对话框的 confirmOrder.xhtml：

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:fn="http://java.sun.com/jsp/jstl/functions">

    <script>
        var cansubmit = false;
        var submitelement = null;

        function handleConfirm(data)
        {
            if(data.getElementsByTagName("error") != null &amp;&amp; data.getElementsByTagName("error")[0] != null) {
                sessiontimeout.show();
                return false;
            }
            else {

                    confirmdialog.show();
            }

            return true;
        }

    </script>

    <p:dialog header="${msgs.buyProducts}" widgetVar="confirmdialog" id="confirmdialogiden"
        modal="true" resizable="false" width="700" dynamic="true">
        <h:panelGrid id="confirm">
            <f:view beforePhase="#{confirmorder.beforePhase}" afterPhase="#{confirmorder.afterPhase}">
            <ui:debug hotkey="x"></ui:debug>
            <h:panelGrid id="noProductSelected" rendered="#{confirmorder.size==false}">
                ${msgs.noProductSelected}
                </h:panelGrid>
            <h:panelGrid id="productSelected" columns="2" rules="cols" rendered="#{confirmorder.size}" >
                    <h:panelGrid width="400" id="productSelectedSub">

                        <b>${msgs.products}</b>

                        <p:dataList value="#{confirmorder.products}" var="car">
                #{car.product_description}, #{car.price_nok}  
                        </p:dataList>

                        <p:separator /> 
                        <b>${msgs.amount} </b>
                        <h:outputText id="total" value="#{confirmorder.sum} " />
                    </h:panelGrid>

            </h:panelGrid>
        </h:panelGrid>
      </:dialog> 
```

Primefaces 3.5 | 莫哈拉 2.1.19 | 网络逻辑 10.3.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:52:35.550

在这种情况下，您应该从中删除`return`值。`onsuccess`返回 false 将取消默认的 DOM 更新过程，所以我认为这是您的问题。

# html - 在 div 上塑造一个棘手的形状

> ID：15293986
> 
> 赞同：0
> 
> 时间：2013-03-08T12:26:40.380
> 
> 标签：html, css, shapes, css-shapes

我正在尝试在 css 中实现这种形状，尝试了几种不同的方式，在网上查看了示例，但看起来这种形状有点难以完成。任何人都可以知道如何做到这一点？不确定是否可以仅使用 css 技术。

![在此处输入图像描述](../Images/f661efe099f681ed7cd6704ad1a72891.png)

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T13:51:32.607

是的，这是可能的，而且非常简单。

# [*演示*](http://codepen.io/thebabydino/pen/FHuKd)

**结果**：

**![结果](../Images/a514c9574a7d915638f60a806d6d1bcf.png)**：

我在左下角只使用了一个元素和一个伪元素，所以**HTML**很简单：

```
<div class='shape'></div> 
```

相关**CSS**：

```
.shape {
  overflow: hidden; /* to hide the top right corner 
                       of the parallelogram formed by the pseudo */
  position: relative;
  width: 20em; height: 10em; /* any values really */
}
.shape:before {
  position: absolute;
  bottom: 0; left: 0;
  width: 150%; height: 150%;
  transform-origin: 0 100%;
  transform: rotate(-3deg) skewX(-10deg);
  background: black;
  content: '';
} 
```

您可以使用 CSS 转换获得**很多**形状。它们是真实的形状，你可以有任何背景。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T12:31:00.057

我认为这是您问题的完美解决方案...

```
#trapezoid {
 height: 0;
 width: 120px;
 border-bottom: 80px solid #05ed08;
 border-left: 45px solid transparent;
 border-right: 5px solid transparent;
 padding: 10 8px 5 5;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T12:59:11.810

你也可以使用`:before`，`:after`伪和`transform`属性。这是一个[例子](http://jsfiddle.net/nxQGH/1/)。

```
#box {
    width: 400px;
    height: 200px;
    background-color: #212121;
    position: relative;
}

#box:after, #box:before {
    display: block;
    content: "\0020";
    color: transparent;
    width: 411px;
    height: 45px;
    background: white;
    position: absolute;
    bottom: -20px;
    -moz-transform: rotate(-2deg);
    -webkit-transform: rotate(-2deg);
    -o-transform: rotate(-2deg);
    -ms-transform: rotate(-2deg);
    transform: rotate(-2deg);
}
#box:before {
    bottom: 80px;
    left: -200px;
    -moz-transform: rotate(92deg);
    -webkit-transform: rotate(92deg);
    -o-transform: rotate(92deg);
    -ms-transform: rotate(92deg);
    transform: rotate(92deg);
} 
```

*您可能需要更改一些值才能获得所需的形状。*

# android - 如何使用多个复选框制作“类似对话框”的意图？

> ID：15293993
> 
> 赞同：1
> 
> 时间：2013-03-08T12:27:08.280
> 
> 标签：android, android-layout, android-intent, android-spinner

我有一个应用程序可以逐个提问。还有一种问题类型，使用微调器向人们显示选项作为可能的答案。但是有些问题是一个名字列表，其中人们会为许多名字回答相同的问题，所以我不想对每个名字都提出相同的问题，我宁愿问一次问题并显示名字列表每个复选框。但是怎么做呢？

我现在能做的：

![在此处输入图像描述](../Images/1354629668198ead428b55faaf43ed66.png)

我想做的事：

![在此处输入图像描述](../Images/eb6b057df930d72fcec3751e5861161d.png)

有时我们需要更多`Yes`或`No`类似`Good`, `Bad`, `Worse`or `Low`, `Medium`, `High`...

编辑：

**例子：**

您如何看待这些候选人：

巴拉克奥巴马 - (o) 好的 () 中等 () 不好 () 我不认识他

Mitt Hooney - ( ) 好的 ( ) 中等 (o) 不好 () 我不认识他

阿诺德SW。- ( ) 好 (o) 中等 ( ) 不好 () 我不认识他

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T12:37:55.260

我做过这样的事情。

![在此处输入图像描述](../Images/2febd9e3067670fe8317eac3ef29b9d3.png)

有关更多详细信息，请访问以下链接。您将获得完整的源代码：
[http ://amitandroid.blogspot.in/2013/03/android-listview-with-radiogroup.html](http://amitandroid.blogspot.in/2013/03/android-listview-with-radiogroup.html)

因此，根据您的要求，您可以更改数字或 RadioButton。

我已经从我这边完成了你的要求。

![在此处输入图像描述](../Images/f17ca92a586387071329fd6d638eeeed.png)

您在标题上要求标题，这是 main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/relative"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:id="@+id/header"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:weightSum="100" >

        <TextView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="50"
            android:gravity="left"
            android:padding="10dp"
            android:text="Title"
            android:textSize="18sp"
            android:textStyle="bold" />

        <TextView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="25"
            android:gravity="left"
            android:padding="10dp"
            android:text="Yes"
            android:textSize="17sp"
            android:textStyle="bold" />

        <TextView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="25"
            android:gravity="left"
            android:padding="10dp"
            android:text="No"
            android:textSize="17sp"
            android:textStyle="bold" />
    </LinearLayout>

    <ListView
        android:id="@+id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/header"
        android:cacheColorHint="#00000000"
        android:divider="#b5b5b5"
        android:dividerHeight="1dp"
        android:padding="5dp" />

</RelativeLayout> 
```

和 listitem.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal"
    android:weightSum="100" >

    <TextView
        android:id="@+id/heading"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_gravity="left"
        android:padding="10dp"
        android:textSize="18sp"
        android:textStyle="bold"
        android:layout_weight="50" />

    <RadioGroup
        android:id="@+id/radio_group1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical|center_horizontal"
        android:orientation="horizontal"
        android:layout_weight="50" >
    </RadioGroup>

</LinearLayout> 
```

如需完整的源代码，请浏览我的 Android 博客：
[http ://amitandroid.blogspot.in/2013/03/android-listview-with-radiongroup-and.html](http://amitandroid.blogspot.in/2013/03/android-listview-with-radiongroup-and.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T12:28:57.197

如果你想要更多，

您可以使用 RadioButtonList

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T12:30:16.533

您可以在 alertBox 中使用单选按钮列表，通过使用 alertbox 您可以轻松管理所有内容

像这样

```
final CharSequence[] gender = {"Male","Female"};
AlertDialog.Builder alert = new AlertDialog.Builder(uploadphoto.this);
alert.setTitle("Select Gender");
alert.setSingleChoiceItems(gender,-1, new DialogInterface.OnClickListener()
{
    @Override
    public void onClick(DialogInterface dialog, int which) 
    {
        if(gender[which]=="Male")
        {
            gen="1";
        }
        else if (gender[which]=="Female")
        {
            gen="2";
        }
    }
});
alert.show(); 
```

# shell - 如何同时将文件复制到远程计算机列表？

> ID：15293994
> 
> 赞同：0
> 
> 时间：2013-03-08T12:27:13.913
> 
> 标签：shell, vbscript, xcopy

我有一个使用 xcopy 命令将文件复制到远程机器的 VBScript 函数。该脚本首先从文本文件中读取目标机器列表，将列表转换为数组，然后循环遍历该数组。对于阵列中的每台目标机器，我使用 xcopy 将指定的文件传输到那里。该系统运行良好，但由于我有 40 多台目标机器，因此需要一段时间才能完成。有没有更快的方法来做到这一点？有没有办法一次对所有机器执行“广播”复制文件？谢谢，约翰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T16:31:06.093

在 VBScript 中，您只能按顺序执行此操作，因为语言/解释器不支持并行处理。不过，您可以使用批处理脚本来完成：

```
for /f %%h in (targets.txt) do (
  start "" "%COMSPEC%" /c xcopy C:\src \\%%h\dst
) 
```

请注意，这不一定会加快速度，因为带宽是所有任务共享的有限资源。当并行运行多个任务时，每个任务将只有一小部分带宽，因此需要更长的时间才能完成。

# asp.net-mvc-4 - 404 尝试使用 web api 端点

> ID：15293998
> 
> 赞同：0
> 
> 时间：2013-03-08T12:27:21.183
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我正在尝试将 Web api 控制器添加到我的 MVC 项目中。这是我升级到 MVC4 的 MVC 3 项目。我试图让“测试”简单的 api 控制器工作，目前得到一个 404。这是我所做的：

我已经添加了所有必需的包。我已将我的 webapi 配置添加到我的 Global Application_Start() 中：

```
RegisterGlobalFilters(GlobalFilters.Filters);
RegisterRoutes(RouteTable.Routes);
WebApiConfig.Register(GlobalConfiguration.Configuration);  // Web API 
```

这然后调用我的静态注册方法：

```
public static class WebApiConfig
    {
        public static void Register(HttpConfiguration config)
        {
            config.Routes.MapHttpRoute(
                name: "DefaultApi",
                routeTemplate: "api/{controller}/{id}",
                defaults: new { id = RouteParameter.Optional }
            );
        }
    } 
```

我在我的网络应用程序中定义了一个 ApiController：

```
 public class SitechangesController : ApiController
    { 
        /// GET api/default1
        public IEnumerable<string> Get()
        {
            return new string[] { "value1", "value2" };
        } 
```

最后，当我构建它并在 localhost 上浏览到我的站点时`http://localhost/api/Sitechanges`，我得到一个 404。

如果我做一个文件/新项目并从头开始创建一个 web api 项目，我就没有这些问题。任何人都可以帮忙吗？

谢谢

马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T12:38:30.363

似乎在“正常”路由修复它之前添加了 web api 配置！

```
WebApiConfig.Register(GlobalConfiguration.Configuration); // Moved to the top
RegisterGlobalFilters(GlobalFilters.Filters);
RegisterRoutes(RouteTable.Routes); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-20T22:53:34.877

您的控制器必须以`...Controller.cs`.

例如：

`Test.cs`并将`TestControllerV2.cs`返回 404。
`TestController.cs`将`TestV2Controller.cs`返回 200。

我看到你的，但我在搜索为什么返回 404 时遇到了你的帖子。

# android - Android 布局屏幕变暗，就像显示对话框时一样

> ID：15293999
> 
> 赞同：1
> 
> 时间：2013-03-08T12:27:22.583
> 
> 标签：android, layout

我一直面临着一个奇怪的布局问题。在我的应用程序中，有许多活动布局，它们都具有相同的背景颜色，即灰色。所有这些布局在所有设备中都按预期工作，除了一种布局，即在地图屏幕中，仅在 4.x 设备的情况下略有不同。与 4.x 设备中的其他屏幕相比，屏幕显得暗淡。暗淡就像显示对话框时的暗淡。

这是屏幕的布局：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/grey"
    android:orientation="vertical"
    android:paddingBottom="5dp"
    android:paddingLeft="10dp"
    android:paddingRight="10dp"
    android:paddingTop="10dp" >

    <FrameLayout
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_marginBottom="5dp"
        android:layout_weight="1"
        android:paddingBottom="10dip"
        android:paddingLeft="10dip"
        android:paddingRight="10dip"
        android:paddingTop="10dip" >

        <com.readystatesoftware.maps.TapControlledMapView
            android:id="@+id/mapview"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:apiKey="@string/mapApiKey"
            android:clickable="true" />

        <TextView
android:id="@+id/uselessTextView
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" 
            android:background="@drawable/itemlistbackground"/>
    </FrameLayout>

</LinearLayout> 
```

主要问题在于上述布局中的framelayout。每当我将带有 id 'uselessTextView' 的文本视图的背景设置为黑色图像时，即 itemlistbackground ，屏幕外观就可以了。

但是，当我删除该 textView 即带有 id uselessTextView 的 textview 时，屏幕看起来比平时稍微暗淡（暗淡与显示对话框时相同）。

我不想在上面的代码中使用黑色背景，因为将 textview 放在上面的代码中会隐藏不需要的 mapview，因为 map 是该活动的主要特征。但如果我这样做，屏幕会稍微变暗。

请帮我解决问题。