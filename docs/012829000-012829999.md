# StackOverflow 问答 12829000-12829999

# java - 在 Apache POI 中写入时如何获取 excel 文件的大小（以字节为单位）？

> ID：12829002
> 
> 赞同：0
> 
> 时间：2012-10-10T21:53:20.753
> 
> 标签：java, apache-poi, export-to-excel, temporary-files

我这里有点问题，我就是无法完成。

问题是我将 POI 用于 Java 项目，我必须获得 .xls 格式的最终​​输出（Apache 的 HSSF）。

因此，我的业务规则规定我生成的每个文件的最大文件大小必须为 12 MB。

但我知道 .xls 有一些处理数据的内部方式（我猜是 XML），所以这比将结果放入纯文本文件中增加了更多字节。我只是无法获得 Excel 工作簿的大小，因为它会在一个临时位置生成（我找不到它），而且我只是在写作时无法阅读它。

当 Java 使用 HSSF 工作簿对象写入 Excel 输出文件时，有什么方法可以获取以字节为单位的大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T22:07:13.723

你最好的选择可能是定期写出文件，看看它有多大。确定文件有多大的唯一方法是将其写出来......

使用 HSSF，并非所有单元都占用相同的大小。字符串单元格与数字单元格占用不同的大小，公式单元格根据其中的运算符和值的数量而有所不同，字符串单元格根据它们是否使用与前一个单元格相同的文本等而有所不同。你可以做一些根据你添加的东西的种类进行粗略的猜测（记住要考虑单元格样式、命名范围、图片等），但唯一可以确定的方法是经常写出来，看看它有多大。

对于 XSSF，它甚至更加复杂。不仅不同的单元格在 XML 中占用不同数量的字符（很像 HSSF），.xlsx 文件格式也是一种压缩格式。因此，根据压缩算法的管理方式，编写相同的 XML 片段可能会在输出文件中占用可变数量的空间。（例如，第一个将比后续的更多）。所以，如果不保存和测试，就更不可能确定了。同样，您可能会想出一些粗略的猜测，但唯一确定的方法是保存并查看。

如果您想要一个可预测的文件大小，则必须使用纯文本文件，例如 .CSV 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T17:54:33.510

好吧，在对 API 进行一些研究之后，我发现名为 getBytes() 的方法返回工作簿上每个数据（表格、行、数据等）的字节数组，因此使用长度将返回一个**非常**接近的近似值用户使用的最终工作簿生成的字节。

# ruby-on-rails - Rails 日志条目可以被截断吗？

> ID：12829004
> 
> 赞同：0
> 
> 时间：2012-10-10T21:53:30.150
> 
> 标签：ruby-on-rails, logging

我将 Rails 3.2.8 与 PostgreSQL/PostGIS 和 rgeo 系列宝石一起使用。这些会生成带有非常长查询的日志，这些查询很快就会变成 GB：

```
Region Load (8.8ms)  SELECT name, polygon FROM "region" WHERE "region"."id" = 17 LIMIT 1
(6.2ms)  SELECT st_astext(st_centroid('MULTIPOLYGON (((-111.1779942105267
64.09860899912356, -111.17799400000047 64.09859499912357, -111.17671900000042 
64.098605999123485, -111.17635518181078 64.09860899912356, -111.17538500000043  
...
...many, many, many points ...
...
-111.17799600000035 64.101920999123465, -111.1779940000004 64.10127099912361,
-111.17799500000035 64.09935199912358, -111.17799600000035 64.09872799912365,
-111.1779942105267 64.09860899912356)))')) 
```

是否有内置方法来限制 Rails 日志条目的长度？对于某些类型的查询（即本例中的地理查询），更好的方法是仅限制日志的查询部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T19:40:24.457

非常简单，这是（修改后的）[Railscast](http://railscasts.com/episodes/56-the-logger-revised)：

```
# config/initializers/log_formatter.rb
class Logger::SimpleFormatter
  def call(severity, time, progname, msg)
    "[#{severity}] #{msg.truncate(200)}\n"
  end
end 
```

# c++ - 将 ZeroMQ 与 Boost::ASIO 一起使用

> ID：12829005
> 
> 赞同：25
> 
> 时间：2012-10-10T21:53:33.537
> 
> 标签：c++, sockets, boost, boost-asio, zeromq

我有一个使用 ZeroMQ 进行消息传递的 C++ 应用程序。但它还必须为基于 AJAX / Comet 的 Web 服务提供 SGCI 连接。

为此，我需要一个普通的 TCP 套接字。我可以通过普通的 Posix 套接字来做到这一点，但是为了保持跨平台的便携性并使我的生活更轻松（我希望......）我正在考虑使用 Boost::ASIO。

但是现在我遇到了 ZMQ 想要使用它自己`zmq_poll()`和 ASIO的冲突`io_service.run()`......

有没有办法让 ASIO 与 0MQ 一起工作`zmq_poll()`？

还是有其他推荐的方法来实现这样的设置？

注意：我可以通过使用多个线程来解决这个问题——但它只是一个小的单核/CPU 盒子，它会以非常低的 SCGI 流量运行该程序，所以多线程会浪费资源......

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-11T22:13:27.300

阅读[此处](http://api.zeromq.org/2-1:zmq-getsockopt)和[此处](http://www.zeromq.org/area:faq)的文档后，特别是本段

> ZMQ_FD：检索与套接字关联的文件描述符 ZMQ_FD 选项应检索与指定套接字关联的文件描述符。返回的文件描述符可用于将套接字集成到现有的事件循环中；ØMQ 库应通过使文件描述符准备好读取，以边缘触发的方式通知套接字上的任何未决事件。

我认为您可以使用[`null_buffers`](https://stackoverflow.com/a/4686523/283302)for `zmq_pollitem_t`each 并将事件循环推迟到 a `io_service`，完全绕过`zmq_poll()`。然而，上述文档中似乎有一些警告，特别是

> 从返回的文件描述符中读取的能力并不一定表明消息可以从底层套接字读取或写入；应用程序必须通过随后检索 ZMQ_EVENTS 选项来检索实际事件状态。

因此，当您的一个 zmq 套接字的处理程序被触发时，您必须在处理我认为的事件之前做更多的工作。未编译的伪代码如下

```
const int fd = getZmqDescriptorSomehow();
boost::asio::posix::stream_descriptor socket( _io_service, fd );
socket->async_read_some(
    boost::asio::null_buffers(),
    [=](const boost::system::error_code& error)
    {
       if (!error) {
           // handle data ready to be read
       }
     }
); 
```

请注意，您不必在这里使用 lambda，`boost::bind`成员函数就足够了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T16:09:49.067

最后我发现有两种可能的解决方案：

*   Sam Miller 的我们使用 ASIO 的事件循环的地方
*   `.native()`ZeroMQ 的事件循环，通过方法获取 ASIO 文件描述符`acceptor`并将`socket`它们插入到数组中`zmq_pollitem_t`

我已经接受了 Sam Miller 的回答，因为这对我来说是 SCGI 案例中的最佳解决方案，其中不断创建和结束新的连接。因此，处理每一个变化的`zmq_pollitem_t`数组是一个很大的麻烦，可以通过使用 ASIO 事件循环来避免。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-10T05:44:01.610

获得 ZeroMQ 的套接字是战斗中最小的部分。ZeroMQ 基于 TCP 上的分层[协议](http://rfc.zeromq.org/spec:15)，因此如果您走这条路线，您将不得不在自定义 Boost.Asio io_service 中重新实现 ZeroMQ。[我在使用 Boost.Asio 创建异步ENet](http://enet.bespin.org/Features.html)服务时遇到了同样的问题，首先尝试使用 Boost.Asio UDP 服务从 ENet 客户端捕获流量。ENet 是一个在 UDP 上分层的类似 TCP 的协议，所以我当时所做的只是捕获处于几乎无用状态的数据包。

Boost.Asio 是基于模板的，内置的 io_service 使用模板基本封装了系统套接字库来创建 TCP 和 UDP 服务。我的最终解决方案是创建一个自定义 io_service 来包装 ENet 库而不是系统套接字库，从而允许它使用 ENet 的传输功能，而不必使用内置的 UDP 传输重新实现它们。

ZeroMQ 也可以这样做，但是 ZeroMQ 本身已经是一个非常高性能的网络库，它已经提供了异步 I/O。我认为您可以通过使用 ZeroMQ 现有的 API 接收消息并将消息传递到 io_service 线程池来创建一个可行的解决方案。这样消息/任务仍将使用 Boost.Asio 的反应器模式异步处理，而无需重新编写任何内容。ZeroMQ 将提供异步 I/O，Boost.Asio 将提供异步任务处理程序/工作者。

现有的 io_service 仍然可以耦合到现有的 TCP 套接字，允许线程池处理 TCP（在您的情况下为 HTTP）和 ZeroMQ。在这样的设置中，ZeroMQ 任务处理程序完全有可能访问 TCP 服务会话对象，从而允许您将 ZeroMQ 消息/任务的结果发送回 TCP 客户端。

以下只是为了说明这个概念。

```
// Create a pool of threads to run all of the io_services.
std::vector<boost::shared_ptr<boost::thread> > threads;
for(std::size_t i = 0; i < thread_pool_size_; ++i) {
    boost::shared_ptr<boost::thread> thread(new boost::thread(boost::bind(&boost::asio::io_service::run, &io_service_)));
    threads.push_back(thread);
}

while (1) {
    char buffer [10];
    zmq_recv (responder_, buffer, 10, 0);
    io_service_.post(boost::bind(&server::handle_zeromq_message, buffer, this));
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-04-04T14:46:33.353

在这个问题发生 2 年后，有人发布了一个正是这样做的项目。该项目在这里：[https](https://github.com/zeromq/azmq) ://github.com/zeromq/azmq 。讨论设计的博客文章在这里：[https](https://rodgert.github.io/2014/12/24/boost-asio-and-zeromq-pt1/) ://rodgert.github.io/2014/12/24/boost-asio-and-zeromq-pt1/ 。

以下是从自述文件中复制的示例代码：

```
#include <azmq/socket.hpp>
#include <boost/asio.hpp>
#include <array>

namespace asio = boost::asio;

int main(int argc, char** argv) {
    asio::io_service ios;
    azmq::sub_socket subscriber(ios);
    subscriber.connect("tcp://192.168.55.112:5556");
    subscriber.connect("tcp://192.168.55.201:7721");
    subscriber.set_option(azmq::socket::subscribe("NASDAQ"));

    azmq::pub_socket publisher(ios);
    publisher.bind("ipc://nasdaq-feed");

    std::array<char, 256> buf;
    for (;;) {
        auto size = subscriber.receive(asio::buffer(buf));
        publisher.send(asio::buffer(buf));
    }
    return 0;
} 
```

看起来不错。如果您尝试，请在评论中告诉我它是否在 2019 年仍然有效[我可能会在几个月内尝试，然后更新此答案]（回购已过时，最后一次提交是一年前）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-11T12:58:35.330

解决方案是轮询您的 io_service 而不是 run()。

查看[此解决方案](https://stackoverflow.com/questions/4705411/boostasio-io-service-run-vs-poll-or-how-do-i-integrate-boostasio-in-ma)以获取一些[poll()](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio/reference/io_service/run/overload1.html)信息。

使用 poll 而不是 run 将允许您轮询 zmq 的连接，而不会出现任何阻塞问题。

# html - 最好使用哪种 PHP 模板引擎语法？

> ID：12829006
> 
> 赞同：3
> 
> 时间：2012-10-10T21:53:33.693
> 
> 标签：html, parsing, frameworks, php

好的，所以我正在使用 MVC 在 PHP 中开发一个高级框架，并且想知道使用 PHP 解析的动态数据格式化视图的最佳方法。

目前我正在使用这种格式：

## 控制器加载视图的格式

```
$vars = array();
$vars['EXAMPLE_TEXT'] = "Hello World!";
$this->load->View("view_name", $vars); 
```

其中 vars 是要传递到视图中的字符串数组，使用键在视图中识别它。

## “view_name”视图的格式。

```
<b>{EXAMPLE_TEXT}</b> 
```

只会显示文本：**Hello World！**

# 问题

但是当我开始使用数据库中的复杂元素（使用 foreach 循环）时，我找不到合适的视图语法，同时保持它对开发人员的友好并保持 PHP 中解析引擎的速度。

我正在考虑使用 DTD 或 Schema 样式，但我真的很想听听任何意见。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T22:17:00.973

我们使用 PHP 本身进行模板的最佳选择，有点像[本文](http://codeangel.org/articles/simple-php-template-engine.html)中描述的那样。

至于看法。我认为您正在遭受经典的 Rails 错觉。视图是类/对象/实例，它们包含表示逻辑并负责产生对用户的响应。这可能意味着安排来自多个模板的 HTML 输出，或者只是发送一个 HTTP 标头作为唯一响应。或者可能是一些 JSON 文件或 XML。

# java - 括号和逻辑运算符

> ID：12829008
> 
> 赞同：4
> 
> 时间：2012-10-10T21:53:59.800
> 
> 标签：java, c++, logical-operators, short-circuiting

考虑这段代码（C++）：

```
int x = -4 , y = 5 ;
bool result = x > 0 && y++ < 10 ; 
```

表达式 (x > 0) 将首先被评估，因为 (x > 0 = false) 和由于短路评估，另一个表达式 (y++ < 10) 不会被评估并且 y 的值将保持 5 .

现在考虑以下代码：

```
int x = -4 , y = 5 ;
bool result = (x > 0) && (y++ < 10) ; 
```

预计括号中的表达式将首先被评估，以便在执行逻辑与之前，表达式 (y++ < 10) 将被评估并且 y 的值已变为 6 ，但实际情况是 y 的值仍然是 5 。这意味着即使有括号，评估也会被短路并且表达式 (y++ < 10) 被忽略。

这个案子的解释是什么？！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-10T21:56:17.753

解释在问题中 -**短路**。

在 C++ 中，`&&`（以及`||`就此而言）的评估保证是从左到右的，并且一旦`false`遇到 a （分别`true`为`||`），评估就**保证**停止。

我猜Java类似。

括号是多余的，在这种情况下不相关 - 它与运算符优先级无关。它只是与如何`&&`工作有关：

其实这两个版本

```
x > 0 && y++ < 10
(x > 0) && (y++ < 10) 
```

是等价的，因为`++`优先级最高，其次是`<,>`，最后是`&&`。迂腐地，你应该把它写成：

```
(x > 0) && ((y++) < 10) 
```

### 5.14 逻辑与运算符 [expr.log.and]

> 1`&&`操作员从左到右分组。操作数都被隐式转换为 bool 类型（第 4 条）。`true`如果两个操作数都是，则结果为真，`false`否则。**与 & 不同，&& 保证从左到右的评估：如果第一个操作数是 ，则不评估第二个操作数`false`。**（强调我的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T21:57:37.047

When the left side determines the result, the right side is not evaluated.

In the first case, the right side is `y++ < 10`, and this is not evaluated. In the second case, the right side is `(y++ < 10)`, and this is not evaluated.

There is no rule that expressions in parentheses are evaluated first. Parentheses only group operands.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T22:00:08.537

Even with parentheses short-circuiting *must* still take place. Consider if you have an expression involving pointers:

```
int* ptr = 0;
int bar = 5;
bool result = (ptr != 0) && (*ptr == bar || bar > 10); 
```

You clearly can't safely evaluate the right-hand side of the `&&` there, but the parentheses are required to make the precedence work as intended. The parentheses simply determine the order of operations *that are actually performed* not that they happen in a particular order.

# networking - 多人物理实时游戏

> ID：12829010
> 
> 赞同：0
> 
> 时间：2012-10-10T21:54:08.067
> 
> 标签：networking, cocos2d-iphone, box2d, multiplayer

我正在创建 iOS(iPhone) 足球风格的游戏（使用 cocos2d 和 box2D），两个玩家实时玩一个球。我在同步方面苦苦挣扎了很长时间，只是无法让它足够流畅。

好的，所以我决定使用客户端/服务器模型 - 一个被选为主机（服务器），另一个是客户端。服务器和客户端必须保持物理运行。客户端只“镜像”服务器的物理特性。结果是我们在服务器上获得了流畅的游戏，而在客户端获得了真正的非物理游戏 -> 假设：在快速击球后，球被计算为上升，但在下一次更新时服务器仍然认为球应该下去。我使用时钟同步，所以我可以在客户端正确同步位置和速度。我知道我不能将客户端预测用于击球等物理事件。而且我仍然希望两边都有物理，这样我就可以正确地检测到碰撞。

如果有人分享他在这个问题上的经验，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T22:22:01.753

需要通过网络同步的游戏对象中的物理是一个非常具有挑战性的问题。最好避免它。

大多数应对这一挑战的游戏将在服务器上模拟游戏和物理世界，并让客户端预测运动。是的，即使对于物理对象，通常只需运行物理模拟（没有碰撞，或至少没有“阻塞”碰撞），直到服务器发送游戏和物理世界的更新状态。

当然，您与服务器的连接速度越快，您的游戏体验就越流畅。如果您的设备**正在**运行服务器，那么您将始终比其他玩家拥有优势，除非您为服务器玩家引入人为延迟并执行相同的预测。这也意味着运行两个物理世界并在“服务器设备”上进行更新，一次用于实际游戏状态，另一次用于预测的客户端世界视图。

# opencv - opencv相机外在（matchmoving）

> ID：12829021
> 
> 赞同：1
> 
> 时间：2012-10-10T21:54:44.423
> 
> 标签：opencv

我对 cvDecomposeProjectionMatrix 函数有疑问。返回的平移向量是 x,y,z,w。w 不是 1 或 0，所以我将 x,y,z 除以 w 以获得世界空间的标准化 x,y,z 坐标。但是，尽管跟踪特征在帧之间具有很高的准确性，但坐标随后会以极大的不准确度到处跳跃。

欧拉角也返回不正确。尽管它们为帧返回正确的相应旋转轴，但它过度旋转。例如，在 n 秒内沿 x 轴将相机总共旋转 45 度会从分解矩阵产生 360 度的旋转。

使用分解投影矩阵的最准确方法是什么？

详细信息：

斯坦福大学的一位教授使用 opencv 编写了一段很好的示例代码来计算光流。

您可以在斯坦福网站上的 pdf 末尾找到它。我会包含代码，但评论使论坛帖子有点冗长。[http://robots.stanford.edu/cs223b05/notes/CS%20223-B%20T1%20stavens_opencv_optical_flow.pdf](http://robots.stanford.edu/cs223b05/notes/CS%20223-B%20T1%20stavens_opencv_optical_flow.pdf)

我已经建立了该样本，并且可以准确地跟踪各种视频格式的特征，但从这些特征估计相机位置和旋转已证明是一件令人头疼的事情。

# php - 建议在 mysql 中与 phpmyadmin 建立关系

> ID：12829024
> 
> 赞同：6
> 
> 时间：2012-10-10T21:54:57.670
> 
> 标签：php, mysql, database, phpmyadmin, relationship

我想知道是否有人可以帮助我，因为我是新手并且很困惑

我希望能够将客户分配给用户（1：M 关系），但我不知道如何在 mysql 中执行此操作。我想做的是在客户表中添加用户的多个 id，然后创建一个表，您可以在其中将新客户分配给某个用户或搜索特定用户有多少客户等...

我一直在寻找建立关系，但我在 phpmyadmin 中不断收到错误

谁能建议如何在数据库中正确执行此操作

感谢你的帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T22:13:15.877

如果您的问题是在 PHPMyAdmin 中创建关系，我应该向您推荐以下内容：

*   以 user_id 作为 PK 创建用户表。
*   创建客户表，添加 user_id 列并将其定义为 INDEX。
*   转到客户表结构，然后单击“查看关系”。
*   在 user_id 字段中，选择 User_table.user_id。

这样，一个用户可以拥有零个或多个客户，并且一个客户将始终属于单个用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T21:57:57.950

下面怎么办

```
> +Users
> -id
> -email
> -full_name
> 
> 
> +Customers
> -id
> -user_id
> -name
> -phone 
```

因此`user_id`将包含`id`该客户所属的用户的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T21:58:31.553

```
user
------
user_id
other_stuff

customer
--------
customer_id
other_stuff

user_customer
-------------
user_id
customer_id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T22:02:37.590

您可能有兴趣尝试[MySQL Workbench](https://www.mysql.com/products/workbench/ "MySQL 工作台")，它是由 Oracle/MySQL 人员创建和支持的可视 MySQL 数据库建模工具。它不仅可以整理凌乱的 SQL 代码（但您仍然应该了解正在发生的事情），而且直观地查看您的数据库模型通常是一个很大的帮助。

# javascript - 为脚本完成创建自定义事件

> ID：12829025
> 
> 赞同：0
> 
> 时间：2012-10-10T21:54:58.840
> 
> 标签：javascript

我通过将一些 JavaScript 附加到 DOM 来动态加载它。

在 JavaScript 结束时，我想创建一个自定义事件来提醒脚本已完成的其余代码。

这是我所拥有的：

```
Su.throwEvent = function(){
    var load_complete = document.createEvent("HTMLEvents");
    load_complete.initEvent( "focus", true, false );
    document.getElementById( 'ue_email' ).dispatchEvent( load_complete );
}; 
```

这不起作用，因为我将它绑定`ue_email`为用户输入......所以现在每次用户关注输入时它都会触发事件。

创建自定义“隐藏”事件的正确方法是什么。

我在这里看：

[https://developer.mozilla.org/en-US/docs/DOM/document.createEvent](https://developer.mozilla.org/en-US/docs/DOM/document.createEvent)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T22:01:01.473

您可以将其绑定到隐藏的输入控件的`onchange`事件。

这应该工作得很好，当然也很简单，但是劫持 DOM 的事件系统对我来说似乎有点像 hack。我将创建一个全局事件侦听器函数数组，并从加载的脚本中调用它们：

```
if (window.loadedListeners) {
    loadedListeners.forEach(function(listener) {
        listener();
    });
} 
```

请记住，`Array.forEach()`如果要支持 IE7 和 IE8，则需要手动扩展 Array 以包含该方法。您可以使用[developer.mozilla.org 上的实现](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach#Compatibility)。

# java - 无头日食的 config.ini 设置

> ID：12829028
> 
> 赞同：1
> 
> 时间：2012-10-10T21:55:17.107
> 
> 标签：java, eclipse, plugins, headless

从[这篇文章](https://stackoverflow.com/questions/12827104/executing-headless-eclipse-in-command-line)中，当我尝试执行无头 Eclipse 代码时出现此错误消息。

```
java.lang.RuntimeException: Could not find framework
    at org.eclipse.equinox.launcher.Main.getBootPath(Main.java:978)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:557)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1410)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1386) 
```

我用谷歌搜索找到这个作为问题的答案： [启动 Eclipse 时出现“无法获取应用程序服务”错误](https://stackoverflow.com/questions/2493415/i-am-getting-a-following-error-while-launching-my-eclipse)

但是，我不确定如何放置 config.ini 以及如何放置正确的内容以删除错误消息。

这是我的目录结构，我`Dosgi.bundles=org.eclipse.equinox.common@2:start,org.eclipse.update.configurator@3:start,org.eclipse.core.runtime@`在 eclipse.ini 文件中。

![在此处输入图像描述](../Images/2a28d3fa8d353de24833cc39e5b67a71.png)

如何设置 eclipse.ini 文件，以及该文件的位置？

jar 文件位于`plugins`目录中，并`runme.sh`具有以下脚本：

```
R2_HOME=.
LIBS=plugins
JARS=.:\
$LIBS/org.eclipse.core.contenttype_3.4.100.v20110423-0524.jar:\
$LIBS/org.eclipse.core.jobs_3.5.100.v20110404.jar:\
$LIBS/org.eclipse.core.runtime_3.7.0.v20110110.jar:\
$LIBS/org.eclipse.core.runtime.compatibility.auth_3.2.200.v20110110.jar:\
$LIBS/org.eclipse.equinox.common_3.6.0.v20110523.jar:\
$LIBS/org.eclipse.equinox.app_1.3.100.v20110321.jar:\
$LIBS/org.eclipse.equinox.launcher_1.2.0.v20110502.jar:\
$LIBS/org.eclipse.equinox.preferences_3.4.1.R37x_v20110725.jar:\
$LIBS/org.eclipse.core.variables_3.2.500.v20110928-1503.jar:\
$LIBS/org.eclipse.osgi.services_3.3.0.v20110513.jar:\
$LIBS/org.eclipse.osgi.util_3.2.200.v20110110:\
$LIBS/org.eclipse.osgi_3.7.2.v20120110-1415

java -cp $JARS org.eclipse.core.launcher.Main -application headlessHello2_1.0.0.201210101509.jar 
```

## 添加

根据 Paul 的回答，我将 config.ini 文件复制到了插件导出的目录中。

![在此处输入图像描述](../Images/7ab9692c58ac3aa1f75842eb33c232f7.png) ![在此处输入图像描述](../Images/ac09cba6ae96ce07233f360193f6c8a0.png)

我还修改了脚本以将`-application`点指向正确的 id。

```
R2_HOME=.
LIBS=plugins
JARS=.:\
$LIBS/org.eclipse.core.contenttype_3.4.100.v20110423-0524.jar:\
...
$LIBS/org.eclipse.osgi_3.7.2.v20120110-1415:\
headlessHello2_1.0.0.201210101509.jar

java -cp $JARS org.eclipse.core.launcher.Main -application headlessHello2.id2 
```

运行此脚本会在目录中为我提供更多文件`configuration`，但我仍然有另一条错误消息。

![在此处输入图像描述](../Images/e16575234ea9929fb4c7e613718d6db6.png)

```
org.osgi.framework.BundleException: The activator headlesshello2.Activator for bundle headlessHello2 is invalid
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadBundleActivator(AbstractBundle.java:171)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:679)
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:381)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:299) 
```

可能有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T02:47:08.993

导出产品（甚至是基于插件的产品）对于提供运行 RCP 应用程序所需的内容要好得多。

但是，如果您已经为无头应用程序创建了启动配置，您可以通过查看`<workspace>/.metadata/.plugins/org.eclipse.pde.core/<launch-config.name>`. 应该有一个 PDE 生成的 config.ini 来启动您的无头应用程序。

我仍然建议为您的应用程序创建一个 .product 文件并将其导出，除非您有理由不这样做。

# ajax - 防止表单提交后下载取消 Ajax 操作

> ID：12829034
> 
> 赞同：0
> 
> 时间：2012-10-10T21:55:44.277
> 
> 标签：ajax, jquery, post, download

我有一个按钮**[下载文档]**，它执行以下两件事：

1.  进行 ajax 调用并用数据填充表。
2.  `Post`提交一个表格：

    一种。运行创建文档的后端脚本

    湾。以浏览器下载文档的方式将文档返回给浏览器。

一个问题。提交不是 ajax，这`post`意味着浏览器将其视为单击链接、刷新页面或关闭窗口的方式，**例如它取消 ajax 请求甚至没有得到响应错误**。

在按钮上使用`.preventDefault()`不起作用。它确实允许 ajax 调用 ( **1** ) 成功完成，但是没有提交表单，因此 ( **2** ) 永远不会提交表单。

```
 <form action="/backendScript" method="post">
      <input type="submit" value="Download Document">
    </form>

    $(".downloadBtn").on("click", function (e) {
        generateTable();
        e.preventDefault(); // without this, the ajax in generateTable(); is cancelled, but with it, the form isn't submitted.
    }); 
```

使用 ajax执行 ( **2**`post` )也不起作用。它可以完成 ( **2.a** )，但返回的文档直接转到 Javascript，而不是浏览器，并且 Javascript 无法引发下载事件，因此 ( **2.b** ) 使用这种方法失败。

```
 $.post("/backendScript", formData, function (generatedDoc) {
        console.log(generatedDoc); //yay, here's our doc! but how do we download it??
    }); 
```

所以看起来我*必须* `post`提交表格。但是如何防止这种情况取消正在进行的任何 ajax 请求呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T22:02:30.270

在您想要从 ajax 调用中获得的成功/错误/任何响应事件中`generateTable`，提交表单。或者`document.forms["myform"].submit();`（`$('#myform').submit();`取决于你是想使用 vanilla js 还是 jQuery）。

# jquery - 如何使用 jQuery 选择每个兄弟姐妹的子标签？

> ID：12829035
> 
> 赞同：1
> 
> 时间：2012-10-10T21:55:45.977
> 
> 标签：jquery, children, siblings

HTML：

```
<tr>
    <td><div class="color">Stuff</div></td>
    <td><div class="color">Stuff</div></td>
    // etc.
</tr>
<tr>
    <td><div class="color">Stuff</div></td>
    <td><div class="color">Stuff</div></td>
    // etc.
</tr> 
```

任何`<td>`给定行中的每一行都将是某种颜色。当我单击表格单元格时，我想为 clicked 添加黑色边框`<td>`，并从已单击的行（但不是其他行）中可能已经具有黑色边框的任何单元格中删除黑色边框。我怎样才能做到这一点？

jQuery（不起作用）：

```
<script type="text/javascript">
$(document).ready(function() {
    $("div.color").click(function() {
        $(this).siblings().removeClass('black_border');
        $(this).addClass('black_border');
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T21:57:24.773

```
$(this).closest('tr').find('td').removeClass('black_border'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T21:58:21.057

鉴于（除非您已选择`stopPropagation()`或`return false`在您的点击处理程序中）点击将冒泡到`td`元素，只需`td`在您的 jQuery 中定位：

```
$("td").click(function() {
    $(this).siblings().removeClass('black_border');
    $(this).addClass('black_border');
}); 
```

或者，有点不同：

```
$("td").click(function() {
    $(this).closest('tr').find('.black_border').removeClass('black_border');
    $(this).addClass('black_border');
}); 
```

而且，鉴于您`$(this)`不止一次使用，值得缓存它，而不是每次都重新创建 jQuery 对象：

```
$("td").click(function() {
    var that = $(this);
    that.closest('tr').find('.black_border').removeClass('black_border');
    that.addClass('black_border');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T22:06:37.710

$("div.color").on('click',function() {

```
var $td= $(this).parent();
$td.siblings('.black_border').removeClass('black_border');
$td.addClass('black_border'); 
```

});

# python - Python 网页抓取暂停

> ID：12829050
> 
> 赞同：0
> 
> 时间：2012-10-10T21:56:46.947
> 
> 标签：python, beautifulsoup, mechanize

我有以下代码：

```
#!/usr/bin/env python
from mechanize import Browser
from BeautifulSoup import BeautifulSoup

mech = Browser()
mech.set_handle_robots(False)
url = "http://storage.googleapis.com/patents/retro/2011/ad20111231-02.zip"
page = mech.open(url)
html = page.read()

soup = BeautifulSoup(html)
print soup.prettify() 
```

非常简单的网络爬虫试图从网页下载 .zip 文件。当我运行这段代码并记住这个文件是 4kb 时，程序只是没有完成，就好像它处于无限循环中一样。我在这里做了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T00:11:20.663

在你做完`print html`你的`page.read()`. 您可能没有得到您所想的，听起来您收到的是错误页面而不是文件本身。我不确定您是否正确处理了文件，您可能会在这里找到更好的方法：[使用 Python 下载网页上的所有链接（相关文档）](https://stackoverflow.com/questions/5974595/download-all-the-linksrelated-documents-on-a-webpage-using-python)。

zip 文件不是 4KB，顺便说一句，它约为 87MB，包含一个*784MB*的XML 文件，您应该可以通过在浏览器中点击该 URL 并下载它来确认。问题可能不是无限循环，只是需要很长时间才能加载。

当数据是 zip-archived XML 时，您还尝试将数据作为 HTML 传递。如果（一旦您实际*拥有*该文件）将响应数据存储在 a 中`StringIO`，您将能够将其解压缩到内存中（[如此处所述](https://stackoverflow.com/questions/10908877/extracting-a-zipfile-to-memory)）。然后，您需要[明确告知`BeautifulSoup`](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#id11)您正在向其传递 XML。

```
soup = BeautifulSoup(html, 'xml') 
```

这将要求您[安装 lxml](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#parser-installation)，但这对您有利，因为它可能是 Python 下最快的 XML 解析器。

最后一件事：

```
mech.set_handle_robots(False)
url = "http://storage.googleapis.com/patents/retro/2011/ad20111231-02.zip" 
```

我的印象是谷歌设置了他们`robots.txt`尽可能禁止抓取。如果您仍然无法下载该文件的副本，我建议您尝试`Selenium`；它很像`mechanize`但控制实际的浏览器，如 Chrome 和 Firefox，所以这将是一个合法的浏览器请求。

# java - 如何使用 Struts2 中的 Action 类中的数组填充 SelectBox？

> ID：12829053
> 
> 赞同：1
> 
> 时间：2012-10-10T21:56:50.997
> 
> 标签：java, html, jsp, drop-down-menu, struts2

我在使用动作类填充带有支柱的组合框时遇到了一点问题..

这是我的表单元素：

```
<s:select label = "Estado" 
           name = "estados" 
          value = "#estados"
      headerKey = "-1"  
    headerValue = "---Seleccione---" 
           list = "estados"/> 
```

这是动作类：

```
public class PrepararMedicosAction extends ActionSupport 
                                implements Preparable, ParameterAware{

    public List <Estado> estados;

    private IFachada lookupFachadaRemote() {
        try {
           Context c = new InitialContext();
           return (IFachada) c.lookup("java:global/Fachada/Fachada!com.interfaces.IFachada");
        } catch (NamingException ne) {
           Logger.getLogger(getClass().getName()).log(Level.SEVERE, "exception caught", ne);
           throw new RuntimeException(ne);
        }
    }

    public String display() {
        return NONE;
    }

    @Override
    public void prepare() throws Exception {
        this.estados= fachada.getEstados();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:37:14.040

Struts2的Select属性：

> `name`：包含您要显示的数据的**源对象（在您的情况下为列表）；**
> 
> `listKey`:在选项元素中用作**键的字段**
> 
> `listvalue`：在选项元素中用作**描述的字段，在组合框上可见。**
> 
> `value`**:预设值**的引用元素。

如果`name`引用 a `List<String>`，则可以使用该`list`属性在键和值中显示字符串；如果相反，如您的情况，`name`指的是 a `List<Object>`，您必须指定哪个属性是*key*，哪个是*value*。

示例（让我们将“Estados”翻译成“States”）：

```
public class State {
    private Long id;
    private String stateName;

    // Getters and Setters here...
} 
```

`List<State> states`然后通过一个`getStates()`方法暴露一个，

和你喜欢的状态通过`getMyPreferredState()`方法。

在 jsp 中，您将编写：

```
<s:select name = "states" 
         value = "myPreferredState" 
       listKey = "id" 
     listValue = "stateName" 
     headerKey = "-1" 
   headerValue = "Please choose a state..." 
/> 
```

# c# - Set a specific column in a DataRow

> ID：12829054
> 
> 赞同：2
> 
> 时间：2012-10-10T21:56:57.333
> 
> 标签：c#, sql, datatable, dataset, datacolumn

I'm trying to perform a "bulk" insert a set of rules into a table of rules. The table has the following structure:

```
RuleId int,
Rule nvarchar(256),
Domain nvarchar(256),
RuleTypeId int,
ExpirationDate DateTime 
```

In my insertion function I try to set the columns of a row after I've obtained the schema of the table, but it appears that the row does not contain the specified column (**note that I don't specify the RuleId since it's auto-generated**):

```
private void InsertRulesXml(List<Rule> rules)
{
    using (DataSet ds = new DataSet())
    {
        using (DataTable rulesTable = GetSchemeForTable("RulesTable"))
        {
            // Add the rules to the table
            foreach (Rule rule in rules)
            {
                DataRow row = rulesTable.NewRow();

                // When I try to set the specific column it tells me that the column doesn't exist
                row["Rule"] = rule.Rule;
                row["Domain"] = rule.Domain;
                row["RuleTypeId"] = rule.RuleTypeId;
                row["ExpirationDate"] = rule.Expiration;

                rulesTable.Rows.Add(row);
            }
            ds.Tables.Add(rulesTable);

            // Convert the data to XML
            StringBuilder sb = new StringBuilder();
            using (StringWriter sw = new StringWriter(sb))
            {
                rulesTable.WriteXml(sw, System.Data.XmlWriteMode.WriteSchema);
            }

            // Insert the XML rules
            InsertUpdateRulesXml(sb.ToString());
        }
    }
} 
```

Here is the function that gets the schema for the specified table:

```
private DataTable GetSchemeForTable(string tableName)
{
    DataTable ret = null;

    using (SqlConnection connection = GetContentScraperSqlConnection())
    {
        try
        {
            connection.Open();
            SqlCommand command = connection.CreateCommand();
            command.CommandText = string.Format("SELECT TOP 0 [{0}].* FROM [{0}] WHERE 1 = 2;", tableName);
            using (IDataReader reader = command.ExecuteReader(CommandBehavior.SchemaOnly))
            {
                ret = reader.GetSchemaTable();
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine("Exception in GetSchemeForTable: " + ex.ToString());
        }
        finally
        {
            if (connection.State == ConnectionState.Open)
            {
                connection.Close();
            }
            connection.Dispose();
        }
    }

    return ret;
} 
```

Problem: **When I try to set the specific column it tells me that the column doesn't exist.**
Exception Message:

```
An unhandled exception of type 'System.ArgumentException' occurred in System.Data.dll

Additional information: Column 'Rule' does not belong to table SchemaTable. 
```

I suspect that the getting the table schema does not actually give me `Rule` table, but the `SchemaTable`. What I really want to get is the DataTable which corresponds to the `Rule` table (i.e. it has the same schema).

Question: **What's the proper way to set the column values in a row given a list of records?**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T22:08:09.727

`GetSchemaTable`没有做你期望它做的事情。它返回一个`DataTable`，其中行是源表的列，列是关于这些列的元数据。

如果您想`DataTable`使用给定表的架构获得“空”，请将您的函数更改为：

```
private DataTable GetSchemeForTable(string tableName)
{
    DataTable ret = new DataTable();

    try
    {
        connection.Open();
        SqlCommand command = connection.CreateCommand();
        command.CommandText = string.Format("SELECT * FROM [{0}] WHERE 1 = 2;", tableName);
        using (IDataReader reader = command.ExecuteReader(CommandBehavior.SchemaOnly))
        {
            ret.Load(reader);
        }
    }
    catch (Exception ex)
    {
        Console.WriteLine("Exception in GetSchemeForTable: " + ex.ToString());
    }
    finally
    {
        if (connection.State == ConnectionState.Open)
        {
            connection.Close();
        }
        connection.Dispose();
    }

    return ret;
} 
```

请注意，我取出了该`using`块，因为无论如何您都要在 finally 块中处理连接（这基本上就是`using`这样做的）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T22:09:15.430

也许你可以使用这样的东西来生成你的表：

```
GenerateDataTable(typeof(Rule));

private DataTable GenerateRulesDataTable(Type type)
{
    DataTable table = new DataTable();

    // build table columns
    foreach (PropertyInfo propInfo in type.GetProperties())
    {
        Type colType = Nullable.GetUnderlyingType(propInfo.PropertyType) ?? propInfo.PropertyType;
        DataColumn col = new DataColumn(propInfo.Name, colType);
        table.Columns.Add(col);
    }

    return table;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T22:06:39.653

GetSchemaTable 不会返回与 DataReader select 返回的结构相同的 DataTable，它会返回具有相同架构（ColumnName、ColumnSize 等）的表，并且您的架构位于 DataTable 行中。

在您的情况下，您应该使用此选择获得 DataTable，然后您将获得空的 RulesTable。这样，您将能够将新行插入返回的 DataTable（在您的情况下为 rulesTable）并更新回数据库。

# sql - SQL Server keeps on counting rows

> ID：12829055
> 
> 赞同：3
> 
> 时间：2012-10-10T21:56:57.333
> 
> 标签：sql, sql-server, sql-server-2008

I've disabled row counting using `SET NOCOUNT ON` but it seems that sqlserver is still counting rows.

```
USE Northwind
SET  NOCOUNT ON;
SELECT * FROM Products p
SELECT @@ROWCOUNT AS 'RowCount'; 
```

the query returns 77 for row count, why?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T21:58:54.857

SET NOCOUNT ON;

prevents the rowcount from being returned when you execute your stored procedure. It has no affect on @@rowcount.

see [http://msdn.microsoft.com/en-us/library/ms189837.aspx](http://msdn.microsoft.com/en-us/library/ms189837.aspx) for specific info

> The @@ROWCOUNT function is updated even when SET NOCOUNT is ON.
> 
> SET NOCOUNT ON prevents the sending of DONE_IN_PROC messages to the client for each statement in a stored procedure. For stored procedures that contain several statements that do not return much actual data, or for procedures that contain Transact-SQL loops, setting SET NOCOUNT to ON can provide a significant performance boost, because network traffic is greatly reduced."

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T22:00:34.503

该`nocount`设置不会阻止数据库计算行数，它会阻止它返回结果集`update`和`insert`查询。

例子：

```
create procedure test1
as
insert into Products (ProductName) values ('Fork')
select scope_identity() as ProductId 
```

调用该过程将返回两个结果集，第一个是空的并且包含受影响行数为 1 的信息，第二个包含具有产品 ID 的记录。

与：

```
create procedure test1
as
set nocount on
insert into Products (ProductName) values ('Fork')
select scope_identity() as ProductId 
```

调用该过程将只返回一个包含产品 ID 的结果集。

# python - 三元运算符的语法错误

> ID：12829056
> 
> 赞同：3
> 
> 时间：2012-10-10T21:57:11.577
> 
> 标签：python, ternary-operator

我是 Python 新手，我正在尝试使用具有这种格式的三元运算符（我认为是这样）

```
value_true if <test> else value_false 
```

这是一段代码：

```
expanded = set()

while not someExpression:

    continue if currentState in expanded else expanded.push(currentState)

    # some code here 
```

但是 Python 不喜欢它并说：

```
SyntaxError: invalid syntax (pointed to if) 
```

如何解决？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-10T21:58:38.097

python中的三元运算使用for*表达式*，而不是*语句*。表达是有价值的东西。

例子：

```
result = foo() if condition else (2 + 4)
#        ^^^^^                   ^^^^^^^
#      expression               expression 
```

对于语句（代码块，如`continue`,`for`等），请使用`if`：

```
if condition:
     ...do something...
else:
     ...do something else... 
```

你想做什么：

```
expanded = set()

while not someExpression:
    if currentState not in expanded: # you use set, so this condition is not really need
         expanded.add(currentState)
         # some code here 
```

# algorithm - How to assign on-the-fly one-one communication using some basic rules

> ID：12829060
> 
> 赞同：1
> 
> 时间：2012-10-10T21:57:21.440
> 
> 标签：algorithm, logic, pseudocode

**Requirements**:

*   You can have X number of people
    *   These X people will be a set number before everyone is invited to log-in, set by an admin.
*   Each person will be talked to the same number of times.
    *   This will be configured by an admin.
*   Each person can only talk to another person once
*   A person can't talk to themselves
*   A person will come in and get assigned upon log-in who they will communicate with (its not pre-determined)

**For example:**

*   We have 6 people
*   We can set a number of one way interactions between 1 and 5\.

* * *

*   **Possible 1**: Lets say we go with 6 one way interactions
    *   Each person will talk to all the other people once. So Person A will talk to B, C, D, E and F

* * *

*   **Possible 2**: Lets say we go with 2 one way interactions
    *   Possible Combination 1
        *   Person A will talk to: B and C
        *   Person B will talk to: C and D
        *   Person C will talk to: D and E
        *   Person D will talk to: E and F
        *   Person E will talk to: F and A
        *   Person F will talk to: A and B
    *   Possible Combination 2
        *   Person A will talk to: D and F
        *   Person B will talk to: C and E
        *   Person C will talk to: F and A
        *   Person D will talk to: B and C
        *   Person E will talk to: A and B
        *   Person F will talk to: D and E

* * *

Here is what I've come up with so far and I'll explain where I'm stuck.

*   As User A I go in and request who I can communicate with.
*   It will run through the following steps.
    *   Goes out and finds any person I've already been assigned to communicate with.
    *   Now gets a collection of all people, excludes the calling user and the people it already has been assigned to.
    *   Now loops through those people and figures out how many users are talking to each of those eligible people
    *   Now it will remove any of those eligible people who have been talked to by the maximum amount of interactions.
    *   Finally will pick a random person from that list and assign them to me.

The problem is, lets say using from my example combo 1:

*   User A got BC
*   User B got CA
*   User C got AB
*   User D got CE
*   User E only has F as an option but needs another person
*   User F only has E as an option but needs another person
*   F and E still are requiring another person to talk to them.

**What can I do to prevent my problem?**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T22:55:07.650

我认为问题可能与“登录时分配”标准有关（除非我误解了它）。例如，当第一个人 (A) 登录时，没有其他人可以“分配”给他们。或者，在每个人都需要交谈一次并且您有 3 个人（A、B、C）已经登录的情况下

```
 A->B 
 B->C
 C->A 
```

是一个解决方案。但是，如果 D 现在稍后登录，则没有人可以与之交谈，因此无法满足 D 的要求。

另一方面，如果管理员可以等到所有人都登录，那么对于 p 个人（标记为 1,2,3...p）每个需要与 q <= p 其他人通信的简单解决方案是：

```
 for i = 1 to p
   for j = 1 to q
     i communicates with (i+j) mod p 
```

如果您每次登录时都需要一组不同的通信，那么只需将标签 1..p 随机分配给人员 A、B、...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T22:23:52.860

当一个人进来并需要分配与哪些（其他）人交谈时，请稍微修改您的程序，如下所示：

1.  获取所有人的名单，但当然不要让自己离开（因为你不能自言自语）。

2.  根据与每个人交谈的次数对该列表进行排序。

3.  通过从“最低优先”的有序列表中挑选来填充您的谈话子集。这将提高任何下一个进来的人都有足够选择的可能性。

4.  作为一种可能的进一步改进，在与谈话统计数据相同“低”数量的候选人中，首先选择那些他们自己说话较少的人，如果整个设置使得他们更有可能成为下一个进来的人（所以你宁愿和他们交谈，让更多的人为他们敞开心扉）。

# c# - Resetting IronScheme Engine in C#

> ID：12829066
> 
> 赞同：3
> 
> 时间：2012-10-10T21:57:45.580
> 
> 标签：c#, .net, ironscheme

Is there a way to "reset" the IronScheme engine? I'm essentially aiming to ensure that successive calls to string.Eval() are executed independently.

For example, I want to be execute

`"(define x 1.0) (+ x 5.0)".Eval()`

then reset, and have the call

`"(+ x 3.0)".Eval()`

fail as it would if it were executed by itself.

Even better would be a way to give each of n concurrent threads its own independent space in which to execute.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T05:19:10.640

您有 2 个 REPL 选项（对于库，它甚至不允许您编写此类代码；p）。

**1：重置交互环境。**

这可以通过`(interaction-environment (new-interaction-environment))`.

样本：

```
> (define x 5) (+ x 5)
10
> (interaction-environment (new-interaction-environment))
> (+ x 5)
Unhandled exception during evaluation:
&undefined
&message: "attempted to use undefined symbol"
&irritants: (x) 
```

**2：在 C# 中创建一个新的交互环境。**

如果你想要并发环境，这可能是最好的选择。我将这种方法用于[IronScheme 在线评估器](http://eval.ironscheme.net)。

样本：

```
"(define x 1.0) (+ x 5.0)".Eval();
var env = "(new-interaction-environment)".Eval();
"(+ x 3.0)".EvalWithEnvironment(env); 
```

可能的解决方案：

```
Func<object> reset = 
   "(lambda () (interaction-environment (new-interaction-environment)))".
   Eval<Callable>().Call;

"(define x 1.0) (+ x 5.0)".Eval();

reset();

"(+ x 5.0)".Eval(); 
```

# java - Not sure how to draw "poison dart"

> ID：12829067
> 
> 赞同：0
> 
> 时间：2012-10-10T21:57:44.820
> 
> 标签：java

Sorry if the title is a little... vague. Anyway, I'm making a platformer using java and I've been trying to create a pressure plate triggered dispenser that shoots poisoned darts. The game is pretty much split up into a grid system, with each block being a spot on the grid. so far I've made it so that when the pressure plate is activated, it looks as if it's pressed down. I've also been able to draw it to the screen but it does not move or anything. This is the code I use to draw it to the screen:

```
public void drawDart(Graphics g) {
    if(Component.isPressed) {
        for(int x = 0; x < block[0].length; x++) {
            for (int y=0; y < block[0].length; y++) {
                if(x == 91 && y == 35) {
                    block[x][y] = new Block(new Rectangle(x * Tile.tileSize, y * Tile.tileSize, Tile.tileSize, Tile.tileSize), Tile.poisonDart); 
                }
            }
        }
    }
} 
```

Unfortunately, with this code when I step on the pressure plate, the dart is drawn, but will not move. I've tried using x++ before but that doesn't move the dart at all.

Another problem is that I would like the dart to look like it's affected by gravity, which is hard to do when the game is split into a large grid system. Either way, what do you guys think?

*Moderator edit (moved from OP comment):*

```
block[x][y] = new Block(new Rectangle(x * Tile.tileSize, y * Tile.tileSize,
    Tile.tileSize, Tile.tileSize), Tile.poisonDart); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T22:06:38.327

你是否为你的游戏实现了“游戏循环”？它看起来像这样（伪代码）：

```
while (gameRunning) {
  for (GameEntity e in gameWorldEntities) {
    e.update(timePassed);  
  }
  for (GameEntity e in gameWorldEntities) {
    e.draw();
  }
} 
```

每个 dart 对象都应该知道它在游戏世界中的位置，并且 Dart 类的 update() 方法应该更新它的位置，包括在它被发射时水平移动它并使其由于重力而下落。除非您使用单独的物理引擎，否则跟踪其水平和垂直速度是一个好主意，听起来您不是。然后 draw() 方法只需要将它绘制在屏幕上正确的位置。

# android - starting an IntentService

> ID：12829071
> 
> 赞同：1
> 
> 时间：2012-10-10T21:57:58.670
> 
> 标签：android, intentservice

I have an activity "PSActivity" and an IntentServive "StalkService". I am starting the service but the service never executes, at least according to the debugger. The following code starts the service inside PSActivity and I am sure this is getting executed...

```
public void cbRealTime_Clicked(View v) {
    //start the StalkService
    if (cbRealTime.isChecked()) {
        Intent i = new Intent(this, StalkService.class);
        i.putExtra("mystuff", "this is my stuff");
        this.startService(i);

    } else {
        //stop the service here
    }
} 
```

Here is the code for the service...

```
public class StalkService extends IntentService {

    public StalkService() {
        super("StalkService");
        // must override constructor
    }

    @Override
    protected void onHandleIntent(Intent intent) {
        // TODO Auto-generated method stub

        String data = (String) intent.getExtras().get("mystuff");
        data = data + "debug";

    }
} 
```

I have a breakpoint set at data = data + "debug"; that never is hit. It looks like onHandleIntent is never getting executed. I'm testing with the emulator. What am I forgetting to do? Thanks, Gary

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T23:08:53.280

CommonsWare 评论回答了这个问题。我未能在清单文件中注册服务。加里

# java - 使导入的 java 类可序列化

> ID：12829080
> 
> 赞同：0
> 
> 时间：2012-10-10T21:58:54.180
> 
> 标签：java

> **可能重复：**
> [在 java 中，如何序列化未标记为 Serializable 的类？](https://stackoverflow.com/questions/2114207/in-java-how-do-i-serialize-a-class-that-is-not-marked-serializable)

我正在使用自定义 java 类，我需要使类本身可序列化，因为 Eclipse 告诉我该类需要这个。然而问题是我没有这个类的源代码，只有 jar 文件。

如何通过导入包含此对象的 jar 来使我正在使用的对象可串行化，因为我没有源，我不能简单地放入

```
implements Serializable 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T22:01:17.660

我想你可以从这个类创建一个子类并实现可序列化。

```
 public class MyLocal extends ThirdClass implements Serializable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T22:06:56.503

子类化（如前所述）肯定是最有可能成功的......

根据您的勇敢程度（假设您正在运行 JDK 6+），您可以即时转换类：http: [//docs.oracle.com/javase/6/docs/technotes/guides/instrumentation/changes6。 html](http://docs.oracle.com/javase/6/docs/technotes/guides/instrumentation/changes6.html)

我不确定这是否有助于解决 Eclipse 的问题，但可用于在运行时转换类。

# file - unix cat multiple files - don't cause error if one doesn't exist?

> ID：12829081
> 
> 赞同：14
> 
> 时间：2012-10-10T21:59:21.473
> 
> 标签：file, unix, concatenation

I'm trying to cat a bunch of files, some of which may not exist. Now that's ok if some of them don't exist, but I don't want cat to return an error in this case, if possible. Here's my call:

```
zcat *_max.rpt.gz *_min.rpt.gz | gzip > temp.rpt.gz 
```

When this command is run, either a bunch of files matching *_max.rpt.gz will exist, or *_min.rpt.gz will exist. If the other doesn't exist, I don't care, I just want to concatenate what I can. But I'm getting an error message which stops the rest of my code from running.

Anything I can do? Thanks.

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-10T22:02:07.580

只需将 stderr 重定向到 /dev/null：

```
cat file1 file2 .... 2>/dev/null 
```

如果一个或多个文件不存在，则 cat 将给出一个错误，该错误将转到 /dev/null ，您将获得所需的结果。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2020-09-11T17:10:39.213

`[ -f file.txt ] && cat file.txt`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-12-17T15:19:58.737

```
grep -hs ^ file1 file2 .... 
```

不像 cat 有零返回码。选项 -h 禁用文件名打印，选项 -s 禁用文件错误报告，^ 匹配所有行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T22:03:16.413

```
zcat `ls *.rpt.gz | grep -E '_(max|min)\.rpt\.gz$'` | gzip > temp.rpt.gz 
```

有点hack，但是shell也是如此：-P

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-27T09:55:49.317

您可以附加`|| True`到命令以使退出代码静音。

# php - php从自定义日期时间格式中删除时间

> ID：12829082
> 
> 赞同：-1
> 
> 时间：2012-10-10T21:59:27.447
> 
> 标签：php

如果设置为：00:00:00 ，我如何设置`isClean`自动删除时间。因此，如果尚未设置时间或午夜，则不要显示任何内容。

```
/**
 * Perform datetime formatting operations.
 * - relative: if today/yesterday
 * - clean: remove time if 00:00
 *
 * @param string $var
 * @param string||array $params
 * @return string
 */
protected function datetime($var,$params) {
    date_default_timezone_set("Europe/London");
    // 1970-01-01 00:00:00
    $template = $params;
    $isRelative = false;
    $isClean = false;
    if (is_array($params) && !empty($params['template'])) {
        if (!empty($params['relative']) && trim(strtolower($params['relative'])) == 'yes') {
            $isRelative = true;
        }
        if (!empty($params['clean']) && trim(strtolower($params['clean'])) == 'yes') {
            $isClean = true;
        }
        $template = $params['template'];
    }

    // check if its empty or not?
    if(strlen($var)<1) return $var;

    // ignore invalue request throw error?
    if(is_array($template)) return $var;

    if($var == "NOW") $var = date("d-m-Y H:i:s");

    $out = $var;
    if(strpos($out,":") === false) {
        $out = trim($out);
        $out .= " 00:00:00";
    }

    if(($timestamp = $this->getTimestamp($out)) !== false) {
        if ($isRelative) {
            $time = date('H:i', $timestamp);
            if (date('Ymd') == date('Ymd', $timestamp)) {
                // Today
                return sprintf("Today at %s", $time);
            } else {
                // Yesterday?
                $today = strtotime("12:00:00");
                $yesterday = strtotime('-1 day', $today);

                if (abs($yesterday - $timestamp) < 12*3600) {
                    return sprintf("Yesterday at %s", $time);
                }
            }
        }

        $var = date($template,$timestamp);
    }

    return $var;
} 
```

更多信息：我们的 CMS 通过读取`<match>`并自动将其与数据库列名称匹配或我们手动写入来工作`<format>long_datetime</format>`。

所以这种方法的主要原因是：

> 1.  将 XML 选项与 php datetime 连接起来。
> 2.  添加额外的功能，例如现在，相对日期，现在如果设置为 0，则可以清理日期时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T22:37:54.643

您的要求尚不清楚，但需要澄清`$var`并`to automatically remove the time`相信这会有所帮助

```
$xml = '
<patterns>
        <pattern>
    <match>date</match>
    <datetime>d/m/Y</datetime>
</pattern>

<pattern>
    <match>datetime</match>
    <datetime>d/m/Y H:i</datetime>
</pattern>

<pattern>
    <match>datetime_nice</match>
    <datetime>jS F Y, H:i</datetime>
</pattern>

<pattern>
    <match>datetime_iso</match>
    <datetime>c</datetime>
</pattern>

<pattern>
    <match>datetime_relative</match>
    <datetime>
        <relative>YES</relative>
        <clean>yes</clean>
        <template>jS M y, H:i</template>
    </datetime>
</pattern>

<pattern>
    <match>date_relative</match>
    <datetime>
        <relative>yes</relative>
        <template>jS M, Y</template>
    </datetime>
</pattern>

<pattern>
    <match>long_datetime</match>
    <datetime>
        <relative>YES</relative>
        <template>jS M Y \a\t H:i</template>
    </datetime>
</pattern>
</patterns>     
';

echo simpleDateTime("long_datetime",$xml); 
```

输出

```
Yesterday at 11th Oct 12 
                          ^--- Date was cleaned instead of H:i in the template 
```

使用的功能

```
function simpleDateTime($var, $xml) {
    $list = getList($xml);
    $list = $list[$var];
    $date = new DateTime("now", new DateTimeZone("Europe/London"));
    $output = $date->format($list['template']);
    if ($list['clean'] === true) {
        $date->setTime(0, 0, 0);
        $output = str_replace("00:00", "", $date->format($list['template']));
    }
    $output = trim($output);
    $output = rtrim($output, ",");
    if ($list['reletive'] === false) {
        return sprintf("Today at %s", $output);
    } else {
        $date->modify("+1 day");
        return sprintf("Yesterday at %s", $output);
    }
}

function getList($xml) {
    $xml = new SimpleXMLElement($xml);
    $list = array();
    foreach ( $xml->children() as $pattern ) {
        $item = array();
        $item['reletive'] = false;
        $item['clean'] = false;

        if (isset($pattern->datetime->template)) {
            $item['reletive'] = (strtoupper($pattern->datetime->relative) == "YES") ? true : false;
            $item['clean'] = (strtoupper($pattern->datetime->clean) == "YES") ? true : false;
            $item['template'] = (string) $pattern->datetime->template;
        } else {
            $item['template'] = (string) $pattern->datetime;
        }

        $list[(string) $pattern->match] = $item;
    }
    return $list;
} 
```

# django - Getting a foreign key into a form

> ID：12829085
> 
> 赞同：6
> 
> 时间：2012-10-10T21:59:32.893
> 
> 标签：django, foreign-keys, modelform, django-forms

I'm new to Django and Python, and have spent a couple days trying to solve this problem. I've tried several approaches in other threads here, but I think I'm missing some basic concept because none of them have worked for me. Here's what I'm trying to do:

I'm using ModelForm, and I have created a form for adding records that includes a foreign key. I want this value to be set by default to match the record that was displayed on the page I linked from. [Code shown below edited to show suggested corrections].

Here's the relevant code from views.py:

```
def add_sighting(request):
unit = request.GET.get('unit')
form = SightingForm(request.POST or None, initial={'unit':unit})
if form.is_valid():
    sighting = form.save(commit=False)
    sighting.save()
    return redirect(index)
return render_to_response('trainapp/add_sighting_form.html',
                          {'unit': unit, 'sighting_form': form},
                          context_instance=RequestContext(request)) 
```

Here's the relevant code from add_sighting_form.html:

```
<form action="/trainapp/add_sighting/" method="post">
{% csrf_token %}
<table>
{{ sighting_form.as_table }}
</table>
<input type="submit" value="Save" />
</form> 
```

Here's the relevant code from the template I linked from:

```
<p><a href="/trainapp/add_sighting/?unit={{ unit.id }}">Add sighting</a></p> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T22:25:04.017

有几种方法可能在这里起作用。

最简单的方法是在创建表单实例时使用初始参数，然后再将其传递到某个视图的上下文中。

假设您正在使用如下视图方法：

```
def some_view( request ):
    id = request.GET.get( 'record-id' )
    # do check if id is valid...

    # load some record
    record = Record.objects.get( pk=id )

    # create a form instance
    form = RecordForm( initial={ 'some_key_field_name':record.id } )

    # set up context
    context = Context({
         'record' : record,
         'form' : form
    })

    # render the templateview using the above context
    # and return a HttpResponse ... 
```

如果您改用基于类的视图，则可以覆盖 get_context_data 以获得类似的结果。

## 基于类的视图

根据您的代码，我还想建议您查看 Django 中基于类的视图。可以为您处理获取和发布表格。它甚至会为您创建（默认）表单。

已发布代码的等价物将是这样的：

```
class CreateSightingView( CreateView ):

    model = Sighting

    def get_context_data( self, **kwargs ):
        # call the super to get the default context
        data = super( CreateSightingView, self ).get_context_data( **kwargs )

        # add the initial value here
        # but first get the id from the request GET data
        id = self.request.GET.get( 'record-id' )
        # again: do some checking of id
        data.get( 'form' ).initial[ 'unit' ] = id

        return data 
```

# node.js - Is there a way to call Google Keyczar from node.js?

> ID：12829086
> 
> 赞同：4
> 
> 时间：2012-10-10T21:59:34.670
> 
> 标签：node.js, security, cryptography, keyczar

I need to generate some HMACs server side in my application written in node.js. Node does provide HMAC functionality in its crypto class:

[http://nodejs.org/api/crypto.html#crypto_class_hmac](http://nodejs.org/api/crypto.html#crypto_class_hmac)

However, keyczar has a few more features on top of this, particularly key rotation and management. Has anyone found a way to use keyczar from node.js, or perhaps implemented a key rollover strategy on top of node.js crypto?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T13:38:47.933

在我看来，在 node.js 的加密之上构建一个 Keyczar 版本会非常理想，但是，我不知道有谁做过。

但是，c++ keyczar 也支持[swig](http://www.swig.org/)绑定。我认为您可能可以在那里找到一些工作以使 swig 可以从 node.js 访问，在 Swig 的主页上，他们提到了一个最近的 SoC 项目。

**更新：**

您也可以使用[Edge.js](https://github.com/tjanczuk/edge)直接使用[C# 版本的 keyczar](http://jbtule.github.io/keyczar-dotnet/)。

**更新2：**

[KeyczarJS](https://github.com/mitro-co/keyczarjs)可以在 github 上找到。

# objective-c - ios fileExistsAtPath 新文件失败

> ID：12829091
> 
> 赞同：0
> 
> 时间：2012-10-10T21:59:47.367
> 
> 标签：objective-c, ios, nsdata, nsfilemanager

我正在编写一个文件，然后将 NSURLIsExcludedFromBackupKey 属性添加到文件中。为此，我的 HPSFileHelper 类中有以下两种方法：

```
+(void)writeDataToFileWithData:(NSData*)data andFilename:(NSString*)fileName
{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); 

    NSString *documentsDirectory = [paths objectAtIndex:0]; 

    NSString *filePath = [documentsDirectory stringByAppendingPathComponent:fileName];

    [data writeToFile:filePath atomically:YES];

    NSURL* fileURL = [NSURL fileURLWithPath:filePath];

    [HPSFileHelper addSkipBackupAttributeToItemAtURL:fileURL]; // Prevent this file from being backed up.
}

+(BOOL)addSkipBackupAttributeToItemAtURL:(NSURL *)URL
{
    assert([[NSFileManager defaultManager] fileExistsAtPath: [URL path]]);

    NSError *error = nil;
    BOOL success = [URL setResourceValue: [NSNumber numberWithBool: YES]
                                  forKey: NSURLIsExcludedFromBackupKey error: &error];
    if(!success){
        NSLog(@"Error excluding %@ from backup %@", [URL lastPathComponent], error);
    }
    return success;

} 
```

问题是 assert ... fileExistsAtPath 偶尔会失败。大概这是因为有时在断言运行时文件还没有完全写入和解锁？（对于大文件？）

我应该如何围绕这个问题编写代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T22:49:02.410

解决此问题的最简单方法可能是使用方法`NO`的`atomically:`参数`writeToFile:atomically:`。

*   *以原子*方式写入文件 意味着系统将文件内容写入临时文件中，一旦全部写入，将文件移动到最终路径。 *（这是为了确保在写入文件失败的情况下，例如，最终路径不包含未完成的文件内容）*
*   使用`NO`此参数将使系统将文件直接写入其最终目标/路径（而不是使用临时文件然后移动它）。

所以我的猜测是，当使用`atomically:YES`并因此使用临时文件时，当您调用`addSkipBackupAttributeToItemAtURL:`系统时，可能还没有完成临时文件的写入（因此甚至没有开始将其移动到最终路径/目标）并且它解释了为什么您的断言失败。

而使用`atomically:NO`，当您调用时，系统至少已经开始写入最终路径，`addSkipBackupAttributeToItemAtURL:`并且您的断言应该不会失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T22:52:42.640

根据以下文档`writeToFile:atomically:`：

> *原子地*
> 
> 如果是，则将数据写入备份文件，然后——假设没有发生错误——备份文件被重命名为路径指定的名称；否则，数据直接写入路径。

只是一个假设，但是当您调用 时`[data writeToFile:filePath atomically:YES];`，您的调用可能会在临时文件完成写入但尚未发生重命名时返回，在这种情况下`[[NSFileManager defaultManager] fileExistsAtPath: [URL path]]`将返回 NO。

我的预感是，如果您将呼叫切换到`[data writeToFile:filePath atomically:NO]`，这个错误就会消失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T08:02:33.800

随后的调查显示 writeToFile 是同步的，并且文件将在方法返回时被写入。

该问题是由遇到包含斜杠字符“/”的自动生成文件名引起的。这意味着文件创建失败。我现在已将 writeToFile; 原子地更改为：

```
BOOL bWorked = [data writeToFile:filePath options:NSDataWritingAtomic error:&errorPtr];

if (!bWorked)
{
    NSLog(@"writeDataToFileWithData failed for %@ %@", filePath,errorPtr);
} 
```

# css - :last-child vs 特定的特定 id

> ID：12829097
> 
> 赞同：0
> 
> 时间：2012-10-10T22:00:16.900
> 
> 标签：css, css-selectors

我不明白为什么这两个示例的行为不同。HTML 和 CSS 的目标只是水平对齐 div，让最后一个 div（向右）占据剩余空间（容器的剩余宽度）。

**对正确的项目使用特定的 ID：**

```
<style type="text/css">
#left {
    float: left;
    padding: 0 1cm;
    background-color: #ff0000;
}
#right {
    width: 100%;
    background-color: #00FF00;
}
</style>
<div>
    <div id="left">item 1</div>
    <div id="left">item 2</div>
    <div id="right">last</div>
</div> 
```

**使用 :last-child:**

```
<style type="text/css">
#left {
    float: left;
    padding: 0 1cm;
    background-color: #ff0000;
}
#left:last-child {
    width: 100%;
    background-color: #00FF00;
}
</style>
<div>
    <div id="left">item 1</div>
    <div id="left">item 2</div>
    <div id="left">last</div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T22:08:05.673

您使用的 ID 不正确。ID 代表页面的唯一元素。试试这个：

### HTML

```
<div class="list">
    <div>item 1</div>
    <div>item 2</div>
    <div>last</div>
</div> 
```

### CSS

```
.list div {
    float: left;
    padding: 0 1cm;
    background-color: #ff0000;
}
.list div:last-child {
    width: 100%;
    background-color: #00FF00;
} 
```

### 编辑

您的`#right`示例显示不同，因为它没有继承`float: left;`. 如果您想模仿该功能，`float: none;`请像这样添加到 CSS 中：

```
.list div {
    float: left;
    padding: 0 1cm;
    background-color: #ff0000;
}
.list div:last-child {
    float: none;
    width: 100%;
    background-color: #00FF00;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T22:06:25.520

这两个示例之间的区别非常简单：

在第一个示例中，前两个元素向左浮动，第三个元素只是放置在正常的文档流中。

在第二个示例中，第三个元素也匹配样式表中的“#left”规则（第一个），这意味着它也被设为向左浮动。

当第三个元素不浮动时，第一个和第二个元素实际上位于第三个元素的顶部。当所有三个都浮动时，它们不会重叠，因此第三个被分流到第二行。

我希望这是有道理的！

* * *

编辑：根据大卫的评论（和其他人），值得注意的是使用多个相同的 ID 是无效的。它“有效”是因为浏览器非常容忍错误，但不能依赖它，而且通常是一个*非常糟糕的主意*。

如果你在 HTML 中用 "class=" 替换所有 "id=" 实例，在 CSS 中用 "."s 替换 "#"s，它们将是完全正确的，但仍然以同样奇怪的方式表现！

（就个人而言 - 不抱怨某人对 HTML/CSS 的不正确使用与鼓励它不同：p）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T22:02:16.507

我也喜欢 :last-child，但它在 IE7 及以下浏览器中不受支持（希望我的版本正确）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T22:09:01.517

HTML 无效...

尝试：

```
<style type="text/css">
#left1, left2 {
    float: left;
    padding: 0 1cm;
    background-color: #ff0000;
}
#right {
    width: 100%;
    background-color: #00FF00;
}
</style>
<div>
    <div id="left1">item 1</div>
    <div id="left2">item 2</div>
    <div id="right">last</div>
</div> 
```

您的 ID 必须全部不同（唯一）。您不能拥有多个同名 ID。使用有效的 ID，它的行为应该与使用 :last-child 相同。然而，虽然 :last-child 是现代的编码方式，但它在 IE8 或更低版本中不受支持。

您也可以使用相同的类而不是唯一 ID。

```
<style type="text/css">
.left {
    float: left;
    padding: 0 1cm;
    background-color: #ff0000;
}
.right {
    width: 100%;
    background-color: #00FF00;
}
</style>
<div>
    <div class="left">item 1</div>
    <div class="left">item 2</div>
    <div class="right">last</div>
</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T22:09:58.590

不同之处在于，在第二个示例中，最后一个孩子向左浮动（因为规则集 for `#left`），而在第一个示例中，最后一个孩子没有 id of `left`，因此不受规则的约束。

我已经清理了您的重复 ID，以制作演示您想要的效果：http: [//jsbin.com/acomaw/1/edit](http://jsbin.com/acomaw/1/edit)

像这样的 CSS 规则集`k.left`被有效地注释掉了；将`k`前缀移动到其他两个规则集，以查看它们如何具有相同的效果。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-10T22:35:38.743

好的，所以关于导致问题的原因几乎已经说明了答案，但是没有人提供关于 css 的最简洁的答案。以下是实现您想要做的最好、最简洁和受支持的方式。

1.  除非您覆盖先前设置的宽度，否则您永远不需要应用`width:100%`div，即使在这种情况下最好使用`auto`.
2.  您不需要每次都复制“左”类（除非您要在其中放置其他 div 标记）——这减少了不必要的标记。也正如 rrowland 部分指出的那样，使用包装类——这会给你更多未来的灵活性。
3.  如果浏览器对某个功能的支持较低，您可以通过另一种更受支持的方式实现 -*使用另一种方式*。`last-child`尚未完全支持，因此只需定义一个类来定位您的最后一项。有关更多信息，您可以阅读[使用最后一个子选择器](https://stackoverflow.com/questions/1293369/using-last-child-in-css)

所以标记和css应该是：

```
<style type="text/css">
  .cols div {
    float: left;
    padding: 0 1cm;
    background-color: #FF0000;
  }
  .cols .last {
    float: none;
    background-color: #00FF00;
  }
</style>
<div class="cols">
  <div>item 1</div>
  <div>item 2</div>
  <div class="last">last</div>
</div> 
```

我意识到它们是微妙的变化，但我发现阅读 css 的主要抱怨之一是过度使用不必要的声明。

*   class="永无止境的类列表..."
*   向左飘浮
*   位置：相对

成为最严重的罪犯。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-11T18:52:12.087

谢谢大家提供了很多有用的答案！

我完全同意关于滥用 id 与 class 的评论。这是因为我缺乏 CSS 经验，而且网络上到处都是类似的例子......

但是，我还有一个额外的问题：

通过您的更正，我的示例现在看起来像这样（忽略有关：last-child 的相关评论）：

```
<style type="text/css"> 
.left {
    float: left;
    padding: 0 1cm;
    background-color: #ff0000;
}
.left:last-child {
    float: none;
    background-color: #00FF00;
}
</style>

<div>
    <div class="left">item 1</div>
    <div class="left">item 2</div>
    <div class="left">last</div>
</div> 
```

最后一个 div 现在可以填充剩余的空间，但让我感到困惑的是，现在这个 div 没有继承 .left 上设置的填充。为什么会这样？

# r - 使用 install_github 时出错：'exdir' 不存在

> ID：12829100
> 
> 赞同：4
> 
> 时间：2012-10-10T22:00:33.640
> 
> 标签：r, github, ropensci

我正在尝试从 github 安装一个包，但不断收到以下错误；

```
"Error in unzip(src, list = TRUE) : 'exdir' does not exist". 
```

我猜 unzip 无权创建要解压缩到的目录，但我不知道将参数传递给 exdir 参数的方法。

```
> require(devtools)
> install_github("rvertnet", "ropensci")

Installing github repo(s) rvertnet/master from ropensci
Installing rvertnet.zip from https://api.github.com/repos/ropensci/rvertnet/zipball/master
Error in unzip(src, list = TRUE) : 'exdir' does not exist 
```

这是我第一次从 github 安装，所以我可能遗漏了一些非常简单的东西。我确实尝试了其他包（`ggplot2`）并得到了同样的错误。

编辑：添加的结果来自`sessionInfo()`：

```
> sessionInfo()
R version 2.15.1 (2012-06-22)
Platform: i386-pc-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=English_Canada.1252  LC_CTYPE=English_Canada.1252   LC_MONETARY=English_Canada.1252
[4] LC_NUMERIC=C                    LC_TIME=English_Canada.1252    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] devtools_0.8

loaded via a namespace (and not attached):
[1] digest_0.5.2    evaluate_0.4.2  httr_0.1.1      memoise_0.1     parallel_2.15.1 plyr_1.7.1     
[7] RCurl_1.91-1.1  stringr_0.6.1   tools_2.15.1    whisker_0.1 
```

我已通过 renviron.site将我`TMP`的`TMPDIR`、 和设置为可写文件夹：`TEMP`

```
> Sys.getenv(c("TMP","TEMP","TMPDIR"))
          TMP          TEMP        TMPDIR 
"H:\\R\\temp" "H:\\R\\temp" "H:\\R\\temp" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T17:18:07.990

I have got it working, and it was definitely just dumb human error. My *working* directory was somehow set to a location for which I didn't have write permissions. I `setwd()` to a folder where I have permissions and it worked just fine. I'm not sure if it was part of the solution, but @hadley's tip about setting the `TMP` envvar was good, and will be useful in general.

# javascript - Backbone 内部使用什么类型的事件？

> ID：12829101
> 
> 赞同：0
> 
> 时间：2012-10-10T22:00:35.613
> 
> 标签：javascript, backbone.js

我认为主干使用事件在其内部组件之间进行通信。

相对于此 MDN Doc，它使用什么类型的事件。

[https://developer.mozilla.org/en-US/docs/DOM/document.createEvent](https://developer.mozilla.org/en-US/docs/DOM/document.createEvent)

另外，它在源代码中的位置，我搜索了 createEvent 并没有出现任何结果。

[http://backbonejs.org/](http://backbonejs.org/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T22:03:38.003

所有信息都可以通过阅读 Backbone 站点上的注释源代码获得。MDN 站点完全不相关，因为它是在 Web 浏览器 JS 中触发的事件，因此受浏览器处理。它只是发布/订阅的一种可能解决方案，并不普遍适用。由于 Backbone 被设计为能够在浏览器之外运行，它自己处理事件（再次......非常早在带[注释的源代码](http://backbonejs.org/docs/backbone.html)中）。

# python - 神经网络对不同的激活报告相同的响应

> ID：12829102
> 
> 赞同：2
> 
> 时间：2012-10-10T22:00:36.873
> 
> 标签：python, neural-network, pybrain

我写了这个 Pybrain 神经网络的简单测试，但它并没有像我期望的那样运行。我们的想法是在最多 4095 个数字的数据集上对其进行训练，其中包含素数和非素数类。

```
#!/usr/bin/env python
# A simple feedforward neural network that attempts to learn Primes

from pybrain.datasets import ClassificationDataSet
from pybrain.tools.shortcuts import buildNetwork
from pybrain.supervised import BackpropTrainer

class PrimesDataSet(ClassificationDataSet):
    """ A dataset for primes """

    def generatePrimes(self, n):
        if n == 2:
            return [2]
        elif n < 2:
            return []
        s = range(3, n + 1, 2)
        mroot = n ** 0.5
        half = (n + 1) / 2 - 1
        i = 0
        m = 3
        while m <= mroot:
            if s[i]:
                j = (m * m - 3) / 2
                s[j] = 0
                while j < half:
                    s[j] = 0
                    j += m
            i = i + 1
            m = 2 * i + 3
        return [2] + [x for x in s if x]

    def binaryString(self, n):
        return "{0:12b}".format(n)

    def __init__(self):
        ClassificationDataSet.__init__(self, 12, 1)
        primes = self.generatePrimes(4095)
        for prime in primes:
            b = self.binaryString(prime).split()
            self.addSample(b, [1])
        for n in range(4095):
            if n not in primes:
                b = self.binaryString(n).split()
                self.addSample(b, [0])

def testTraining():
    d = PrimesDataSet()
    d._convertToOneOfMany()
    n = buildNetwork(d.indim, 12, d.outdim, recurrent=True)
    t = BackpropTrainer(n, learningrate = 0.01, momentum = 0.99, verbose = True)
    t.trainOnDataset(d, 100)
    t.testOnData(verbose=True)
    print "Is 7 prime? ",   n.activate(d.binaryString(7).split())
    print "Is 6 prime? ",   n.activate(d.binaryString(6).split())
    print "Is 100 prime? ", n.activate(d.binaryString(100).split())

if __name__ == '__main__':
    testTraining() 
```

忽略（请）这是否可能的问题，我的问题是测试 7、6 和 100 是否为素数的最后三个打印语句都返回相同的结果：

```
Is 7 prime?  [ 0.34435841  0.65564159]
Is 6 prime?  [ 0.34435841  0.65564159]
Is 100 prime?  [ 0.34435841  0.65564159] 
```

（或类似的东西）我解释这些结果的方式是神经网络以 65% 的把握预测这些数字**中**的每一个都是质数。我的神经网络是否学会了对所有输入都一视同仁，还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T09:46:59.577

实际上，您似乎只使用了一个输入。

```
d.binaryString(7).split() 
```

相当于

```
"{0:12b}".format(7).split() 
```

评估为

```
['111']. 
```

* * *

我认为你的意图是

```
[int(c) for c in "{0:012b}".format(7)] 
```

结果是

```
[0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1] 
```

PS 检查你输入统计模型的确切内容总是一个好主意:)

# visual-studio-2010 - Visual Studio 2010：反斜杠或正斜杠 (c++)

> ID：12829103
> 
> 赞同：0
> 
> 时间：2012-10-10T22:00:38.323
> 
> 标签：visual-studio-2010, visual-c++, include, static-libraries

在 VS 2010 中，我想在属性管理器中添加一个宏。我应该使用哪个斜线？

例子：

$(CPPLIB) = D:\CPPLib\ 或 D:\CPPLib（反斜杠）或 $(CPPLIB) = D:/CPPLib/ 或 D:/CPPLib（正斜杠）

同样的问题适用于 C++->General->Additional Include 目录或 Linker->Addtional 下项目中的 include 和 library 目录

我应该用它做什么？

你使用“/”还是“\”？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T22:02:44.183

两者都应该同样适用于本地路径：Windows 将接受任一路径分隔符。

# html - HTAccess 保护文件

> ID：12829105
> 
> 赞同：0
> 
> 时间：2012-10-10T22:01:01.170
> 
> 标签：html, .htaccess, redirect, url-rewriting, subdirectory

我想要一个 htaccess 来保护文件不被直接访问。所以这是我的文件结构： ![文件和文件夹](../Images/fb50c519bee59c34cff04b5e2b95277a.png)

我已经使用以下方法保护了我的文件夹：

```
Options -Indexes 
```

但有人仍然可以输入

```
www.domain.com/Folder/CSS/Styles.css 
```

或者

```
www.domain.com/Folder/Insert.php 
```

它会向他们展示一切。我究竟如何使用 htaccess 保护这些文件？我不希望任何人能够查看它们，但我希望网站能够正常运行。上次我试过

```
deny from all 
```

而且整个网站无法加载，因为所有文件/文件夹都被*完全*锁定，甚至自己的网站也无法访问它的东西。我只是不希望人们在 url 中输入文件路径并查看它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T22:18:33.663

您想要什么是不可能的，因为网络浏览器需要能够获取文件。您可以在受保护的目录中尝试以下操作。只需知道使用 Firebug 或任何其他开发工具无需天才即可轻松查看这些请求的输出 - 欺骗标头也很容易做到......

```
SetEnvIfNoCase Referer "www.example.com" mysite

<Limit GET POST HEAD>
 Order Deny,Allow
 Deny from all
 Allow from env=mysite
</Limit> 
```

如果您不熟悉语法，也可以将 mod_rewrite 用于相同目的，并带有 a `[F]`to forbid。（为可读性而写）

```
<IfModule mod_rewrite.c>
 RewriteEngine On
 RewriteBase /
 RewriteCond %{REQUEST_URI} ^/Folder/?(.*)$ [NC]
 RewriteCond %{HTTP_REFERER} !^http://www\.example\.com/ [NC]
 RewriteCond %{HTTP_REFERER} !^https://www\.example\.com/ [NC]
 RewriteRule ^.*$ - [F]
</IfModule> 
```

请注意，如果您有一个 flash/silverlight/java 应用程序，那么在应用这样的解决方案之前，您需要确保它通过了正确的引荐来源请求标头。

# jquery - 更改内容后，Jquery UI Resizable 不起作用

> ID：12829107
> 
> 赞同：0
> 
> 时间：2012-10-10T22:01:14.123
> 
> 标签：jquery, jquery-ui

我有以下 jquery 代码。第一次单击按钮时它工作正常。第二次单击该按钮后，除了可以调整大小外，一切正常。

```
 $('#setposition').live('click', function(){
            $('#positionbox').height(parseInt($('#height').val()) + 105);
            $('#positionbox').width(parseInt($('#width').val()) + 5);
            $('#poscontainer').height($('#height').val());
            $('#poscontainer').width($('#width').val());
            $('#poscontainer').css('background-image',         "url('"+$('#image').attr('value')+"')");
            $('#poscontent').html($('#content').val());
            $('#poscontent').draggable({containment:"parent"}).resizable(
            {
                handles: "all",
                stop: function(event, ui) {
                    var p = $('#poscontent').position();
                    $('#position').val(ui.size.width + ',' + ui.size.height + ',' +
                        p.left + ',' + p.top);
                      }
                  }
                );
            $('#poscontent').hover(function(){
                $(this).css('border','1px solid #000')
                    },function(){
                $(this).css('border','none')
            });
    }); 
```

重要的 HTML 元素：

```
 <a id="setposition" class="btn btn-success" data-toggle="modal" href="#positionbox">Set Position</a>
    <input type="hidden" name="position" id="position">

    <div id="positionbox" class="modal hide fade in" style="display: none;">
    <div class="modal-header">
       <h3>Drag your content to the appropriate position</h3>
    </div>
    <div id="poscontainer">
       <div id="poscontent">test</div>
    </div>
    <div class="modal-footer">
         <a href="#" id="imageback" class="btn" data-dismiss="modal">Back</a>
    </div>
    </div> 
```

找到解决方案！ [更改内容后如何使用 Jquery UI 调整 div 的大小？](https://stackoverflow.com/questions/8977465/how-to-resize-a-div-with-jquery-ui-after-changing-its-contents)

# javascript - __utm cookie 的 Google Analytics 字符编码

> ID：12829113
> 
> 赞同：1
> 
> 时间：2012-10-10T22:02:09.180
> 
> 标签：javascript, google-app-engine, cookies, character-encoding, google-analytics

我试图弄清楚 GA 在保存 cookie 时使用什么编码。例如，我可以在设置 utm_source 参数时使用非西方字符，它们在 GA 报告中显示得很好。但是，如果我查看 __utmz cookie，它与 utm_source 参数的值不匹配，而是似乎以某种方式编码，我知道有 URL 编码，但这是不同的。

例子：

1) 访问 www.example.com?utm_source=ХЦЧШЩЬЫЪЭЮЯ

2) 查看cookies。__utmz cookie 保存给 utm_source 参数的任何值。它包含值 Ð¥Ð¦Ð§Ð¨Ð©Ð¬Ð«ÐªÐÐ®Ð¯ 似乎已编码。

3）点击网站然后查看GA报告。您看到ХЦЧШЩЬЫЪЭЮЯ是访问源，这是正确的。

我正在尝试编写一些 JavaScript 来读取 __utmz cookie 并将其保存在 Google App Engine Datastore 中，然后成功地将其显示在 HTML 页面中。我尝试了所有类型的编码（utf-8）解码（utf-8）解决方案，但似乎没有任何效果。我认为这是因为我没有设置 cookie 时使用的原始编码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T04:14:53.957

使用的编码是 UTF-8。当 ХЦЧШЩЬЫЪЭЮЯ 是 UTF-8 编码然后 UTF-8 编码值的字节显示为好像它们是 windows-1252 编码时，你会得到 Ð¥Ð¦Ð§Ð¨Ð©Ð¬Ð«ÐªÐÐ®Ð¯ . 例如，第一个字符 X，西里尔大写字母 ha，是 U+0425，UTF-8 编码时是字节 0xD0 0xA5。当这些字节被解释为 windows-1252（或 ISO-8859-1）编码的字符数据时，它们的意思是 U+00D0 U+00A5，即 Ð¥。

# classcastexception - 无法从列表中提取数据

> ID：12829116
> 
> 赞同：0
> 
> 时间：2012-10-10T22:02:16.333
> 
> 标签：classcastexception

这是一个从数据库中检索结果列表的函数。

```
public List<util> deep(){
    Query query = getEntityManager().createNativeQuery("SELECT state,max(pop2010) from uscensuspopulationdata where state <> 0 ");
    List<util> l=   query.getResultList();  
    return l;
} 
```

类实用程序：

```
public class  util{
    int state;
    int pop2010;

    public util(int state, int pop2010) {
        this.state = state;
        this.pop2010 = pop2010;
    }

    @Override
    public String toString() {
        return "util{" + "state=" + state + ", pop2010=" + pop2010 + '}';
    }
} 
```

当我尝试提取这样的值时，我得到一个 ClassCastException：

```
List<util> l =  handle.deep();
for (util u : l) {
    out.print(u); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T23:00:10.747

如果你想要一个`util`对象列表，你应该能够使用以下查询：

```
Query query = getEntityManager().createNativeQuery("SELECT new util(state,max(pop2010)) from uscensuspopulationdata where state <> 0 ");
List<util> l = query.getResultList(); 
```

在哪里调用 util 的构造函数。此用例[在 HQL 文档](http://docs.jboss.org/hibernate/core/3.5/reference/en/html/queryhql.html#queryhql-select)中指定。

如果`uscensuspopulationdata`是一个映射实体，你也不应该使用 a`NativeQuery`但你可以只使用`getEntityManager().createQuery(...)`.

最后，Java 中将类的首字母大写被认为是一种很好的风格。

# arrays - 查找小于给定数字且距数组中的点最远的数字

> ID：12829121
> 
> 赞同：1
> 
> 时间：2012-10-10T22:02:44.813
> 
> 标签：arrays, data-structures, range, distance

给定一个数字列表以及索引***i***和整数***k ，我希望找到距离索引******i***处的数字最远（向左）且小于***k***的数字的索引。

```
eg
if the array is
Index :0 1 2 3 4 5 6 7 .....
Array :3 4 1 5 5 4 3 7 .....
Assuming i = 7 and k = 4 , the answer would be 0 
```

我一直在尝试使用红黑树来实现这一点，但我不能低于 O(n) 。有什么方法可以通过使用不同的数据结构将复杂性降低到 O(logn) ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T22:38:28.507

实际上，如果数组是静态的，并且您想为`O(log n)`每个数组进行多个查询，则不需要那种复杂的数据结构。

您实际要求的是-“距索引 i 处的数字最远（向左）且小于 k 的数字。” - 可以转换为“之前最左边的数字`i`小于`k`”。然后你可以看到如下：

*   找到小于 K 的最左边的数字 - 说它在 position `j`;
*   如果`j < i`,`j`是问题的答案
*   否则，没有这样的数字 - position 之前的所有条目`i`都大于或等于`k`.

要回答第一个问题，您需要知道的是：对于 position `i`，位置上的最小数字是多少`0..i`- 我们称之为`min(i)`。请注意，这`min`是`i`- 如果 的单调递减函数`min(5) = 10`，`min(6) = 15`因为`min(6)`是 位置 上的最小数字`0`，`6`并且必然包括位置 上的最小数字`0`，`5`我们知道它是 10 `min`。构造 - 如果我们调用数组`a`，则：`min(0) = a[0]`和`min(i) = minimum(min(i - 1), a[i])`for `i > 0`。）

使用此信息，您可以对最左边的索引执行二进制搜索，`i`例如`min(i) < k`. 然后，通过 的构造`min`，我们知道位置从`0`到的所有数字`i - 1`都大于或等于`k`。所以`i`一定是这个问题的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T22:43:24.180

一种方法是构建一个数组`mp`，其中包含每 0 <= j < n 的前 j 个元素的最小值的索引：

```
int minPos = 0;
for (int i = 0; i < n; ++i) {
    if (a[i] < a[minPos]) minPos = i;
    mp[i] = minPos;
} 
```

这显然需要 O(n) 时间。

中的元素`mp`将引用输入数组`a`中具有递减值的元素。给定一个查询 (i, k)，您现在可以`mp`在 [0, i - 1] 范围内对 k 进行二分搜索，使用间接方法从最小索引中获取实际最小值：

```
int find(int i, int k) {
    int start = 0;
    int end = i - 1;

    if (a[mp[end]] >= k) return -1;    // Not found.
    if (a[mp[start]] < k) return mp[start];    // The first element is smaller.

    // We maintain the invariant that a[mp[start]] is >= k and a[mp[end]] is < k.
    while (end - start > 1) {
        int mid = (start + end) / 2;
        if (a[mp[mid]] < k) {
            end = mid;
        } else {
            start = mid;
        }
    }

    return mp[end];
} 
```

# c++ - 架构 x86_64 的未定义符号 - 头文件中的显示函数

> ID：12829122
> 
> 赞同：3
> 
> 时间：2012-10-10T22:02:46.393
> 
> 标签：c++, architecture, undefined, symbols

> **可能重复：**
> [什么是未定义的引用/未解决的外部符号错误，我该如何解决？](https://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix)

我知道这个问题一直得到解答，但我无法为我的具体示例找到解决方案。这是完整的错误：

```
g++ main.cpp
Undefined symbols for architecture x86_64:
  "Board::display()", referenced from:
  _main in cc7hPZpy.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status 
```

我只是想从我的 Board 类中提取这个显示功能。这里主要：

```
 #include "Board.h"
 #include <iostream>
 #include <string>

 using namespace std;

 int main()
 {
    cout << "Some Asian Game" << endl;
    Board base;
    base.display();
            //this is creating the error
            //commenting it out compiles, but obviously does not do what i want. 

    return 0;
 } 
```

和 Board.h：

```
#ifndef Board_H
#define Board_H

#include "Row.h"
#include <vector>
using namespace std;

class Board
{
public:
   vector<Row> rows;

   Board()
   {
        vector<Row> (15);
   }

   void play(int row, int col, char clr);
   bool checkWin(int row, int col, char clr);
   char getCellColor(int row, int col);
   void display();

   void empty();
};

#endif 
```

以及 board.cpp 中的特定功能

```
void Board::display()
{
    for(int i=0;i<16;i++)
    {
         for(int i2=0;i2<16;i2++)
         {
           cout << rows[i].cells[i2].getState();
         }
    }
} 
```

我经常参考这个网站来寻求答案，但从未亲自使用过它，所以请耐心等待我的回复。我很肯定这很简单，但我只是忽略了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T22:05:02.330

它应该是

```
g++ main.cpp board.cpp 
```

您没有进行编译`board.cpp`，因此不会导出符号。

还：

```
Board()
{
    vector<Row> (15);
} 
```

是错的。它只是创建一个临时的，您可能的意思是：

```
Board() : rows(16)
{
} 
```

# java - UnsatisfiedLinkError——播放！依赖关系

> ID：12829124
> 
> 赞同：1
> 
> 时间：2012-10-10T22:03:04.370
> 
> 标签：java, playframework, dependencies, ivy, unsatisfiedlinkerror

每次我尝试通过`play dependencies`在命令行键入使用 Play 1.2.5（也尝试过 1.2.4）来解决依赖关系时，都会收到以下错误：

```
~ Resolving dependencies using C:\Workspace\moosejuice\conf\dependencies.yml,
~
Exception in thread "main" java.lang.UnsatisfiedLinkError: java.io.WinNTFileSystem.createFileExclusively(Ljava/lang/String;Z)Z
        at java.io.WinNTFileSystem.createFileExclusively(Native Method)
        at java.io.File.checkAndCreate(Unknown Source)
        at java.io.File.createTempFile0(Unknown Source)
        at java.io.File.createTempFile(Unknown Source)
        at org.apache.ivy.plugins.resolver.RepositoryResolver.findResourceUsingPattern(RepositoryResolver.java:104)
        at org.apache.ivy.plugins.resolver.AbstractPatternsBasedResolver.findResourceUsingPatterns(AbstractPatternsBasedResolver.java:93)
        at org.apache.ivy.plugins.resolver.AbstractPatternsBasedResolver.findIvyFileRef(AbstractPatternsBasedResolver.java:72)
        at org.apache.ivy.plugins.resolver.BasicResolver.getDependency(BasicResolver.java:223)
        at org.apache.ivy.core.resolve.IvyNode.loadData(IvyNode.java:169)
        at org.apache.ivy.core.resolve.VisitNode.loadData(VisitNode.java:287)
        at org.apache.ivy.core.resolve.ResolveEngine.fetchDependencies(ResolveEngine.java:696)
        at org.apache.ivy.core.resolve.ResolveEngine.doFetchDependencies(ResolveEngine.java:781)
        at org.apache.ivy.core.resolve.ResolveEngine.fetchDependencies(ResolveEngine.java:704)
        at org.apache.ivy.core.resolve.ResolveEngine.getDependencies(ResolveEngine.java:576)
        at org.apache.ivy.core.resolve.ResolveEngine.resolve(ResolveEngine.java:237)
        at org.apache.ivy.core.resolve.ResolveEngine.resolve(ResolveEngine.java:195)
        at play.deps.DependenciesManager.resolve(DependenciesManager.java:341)
        at play.deps.DependenciesManager.main(DependenciesManager.java:39) 
```

即使对于新创建的项目，我也会收到此错误，而`dependencies.yml`. `cmd.exe`我想这可能是一个权限问题，但我可以在任何这些文件夹上看到没有限制，而且我在管理模式和普通模式下都试过。

我很确定我之前已经解决了对这台机器的依赖；有什么可能改变给我这个错误？

**编辑：** 我现在已经测试了它是否是防病毒程序、防火墙或微软安全，但即使所有这些都关闭，也没有骰子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T17:15:07.753

java.lang.UnsatisfiedLinkError

```
Thrown if the Java Virtual Machine cannot find an appropriate native-language definition of a method declared native. 
```

此异常意味着 jvm 无法解析`createFileExclusively`java.io.WinNTFileSystem 上的本机方法

这听起来很像 DLL 加载问题，调试起来很麻烦。~~我正在尝试找到包含链接方法的 dll，但我很久没有这样做了~~ 包含本机方法定义的 dll`java.dll`在 jdk\jre\bin 或 jre\bin 中

从各种测试中，我无法重现完全相同的问题。我会说您的 dll 加载路径中可能有一个 java.dll，其版本与 play 使用的 java.exe 版本不同。

最快的方法是重新安装 play 使用的 jre/jdk。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T17:11:09.487

问题可能来自您的 Java 安装，而不是来自游戏。您是否尝试过使用另一个版本的 Java（另一个 JDK）？你用的是什么版本？

您可以安装另一个 JDK 并配置指向较新版本的 JDK，然后尝试使用此新 Java 版本再次运行 play `PATH`。`java`

# python - 使用 importlib.import_module 后无法访问模块功能

> ID：12829125
> 
> 赞同：0
> 
> 时间：2012-10-10T22:03:08.877
> 
> 标签：python

我正在尝试访问文件中的某些函数，该文件是我要使用它们的文件下方的一个目录。我希望以动态方式执行此操作，因为在运行之前我不会知道用户想要使用哪些功能。

例如，我会询问用户特定场景，如果他们请求 1424 场景，我希望能够访问“scenarios/scenario1424.py”文件中的函数。

我希望使用 importlib.import_module(...) 来执行此操作，但我似乎无法让它让我访问这些功能，即使我似乎成功地导入了文件模块。

目录结构：

```
code/
  - main.py
  scenarios/
    - __init__.py (empty)
    - scenario1420.py
    - scenario1421.py
    - scenario1424.py 
```

在场景文件中，我将定义一堆方法，如下所示：

```
def run():
  .......

def compute():
  ....... 
```

我似乎能够使用`importlib.import_module('scenarios.scenario1424')`(returns `<module 'scenarios.scenario1424' from 'scenarios/scenario1424.pyc'>`) 导入模块，但是当我尝试访问类似: 的函数时`scenario1424.run()`，我得到一个 NameError ( `NameError: name 'scenario1424' is not defined`)。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T22:06:13.840

`import_module`返回模块对象本身，将其分配给您可以使用的名称是您自己的责任。所以在你的情况下

`scenario1424 = importlib.import_module('scenarios.scenario1424')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T22:10:24.643

您的子目录是否包含`__init__.py`文件？

Python 使用`__init__.py`来确定一个目录是否是一个模块。

# hadoop - 在亚马逊 emr 上使用 hadoop 来处理 > 10TB 的输入是否可行？

> ID：12829127
> 
> 赞同：3
> 
> 时间：2012-10-10T22:03:20.047
> 
> 标签：hadoop, amazon-web-services, mapreduce, emr

一个大型 mapreduce 作业（加入 14 个输入目录，总共输入约 14TB）失败。我们不仅不能运行我们的工作。当我们刚刚做 map is cat / reduce is cat 时，我们甚至无法完成。复制数据似乎停滞不前。

我们的猜测是，我们正在使 aws 提供的 hadoop-on-emr 容量饱和。不确定我们是否正在饱和网络，或磁盘空间，或什么。我们得到这样的错误

“减少 > 复制（438094 中的 436333，0.10 MB/s）”

在hadoop控制面板上。它只是挂在那里，从未完成副本。另一种理论是hadoop的离线排序与复制同时发生，不知何故这是一个瓶颈。我们已经尝试了更多减速器、更多节点、不同大小的工作盒的各种排列，但不知何故，我们一直无法找到有效的组合。

由于我们迫切需要完成这项工作，因此我们正在做一个解决方法，即将数据划分为更小的作业。也就是说，14 个输入年份中的每一个都将被拆分，然后我们将加入这些分区。

有没有人有使用 aws 托管的 hadoop 处理这种大小或更大的工作的经验，如果是这样，您能否提供建议让 cat map / cat reduce 成功？比如节点数量、节点大小和配置选项？

否则，我想我们只是达到了 emr 的限制。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T18:47:31.287

Chris Smith 回答了这个问题，并说我可以将其发布给 SO。他的回答：

因此，输入数据的大小本身并不是 EMR 的限制。还有很多其他因素。

也就是说，吸入 10TB 的数据是一项令人头疼的任务。仅仅读取这么多数据是非常残酷的，然后你就可以进行分桶/排序。

第一个问题是：制约因素是什么？您是否看到网络带宽已用尽？您是否看到 CPU 已满？磁盘 I/O 还是 iops？这些在数据节点上看起来如何？JobTracker 和 NameNodes 怎么样（在集群的其余部分都很好的情况下，将它们最大化并不罕见）？如果以上都不是，则可能是 Hadoop 资源已被用尽，需要进行不同的配置。

由于您没有提到争论的任何特定方面超出了它所处的阶段，这让我怀疑您对下面发生的事情没有太多的衡量标准。通常，您需要多次“测量，然后调整”，然后才能正确调整大工作。

作为一般经验法则，长时间处于“减少/复制”阶段是“你做错了”的一个非常强烈的指标。通常问题是您在排序/溢出/合并过程中受到束缚，节点以某种方式最大化磁盘 IO。Hadoop 有许多调整参数，对于具有大量映射器和缩减器的作业开始变得古怪，特别是如果两者之间存在很大的不平衡。同样，Karmasphere 和类似工具可以在这里为您提供很多帮助。需要调整的典型事情（我可能有些名字是错误的）：

记录。特别是，像 dfs.namenode.logging.level 这样的东西对于在工作之前进行调整可能很重要。使用详细的日志记录完全有可能杀死自己。虽然自相矛盾，但它也可能是你的救赎，所以......

映射输出大小*通常*是“减少/复制”问题的关键因素。如果*可能的*话，考虑减少地图输出大小的方法。*真的*_*应该比地图输入大小小得多。去掉 reduce 阶段不需要的任何数据。考虑使用紧凑的二进制序列化格式（Java 序列化会破坏您的性能），例如协议缓冲区或节俭（整数数据的大赢家）。考虑您的字符串在多大程度上可以用 ID/枚举表示。您可以使用组合器来减少必须通过网络发送的数据量吗？如果您有空闲的 CPU，请使用压缩（从 lzo 或 snappy 开始，但如果您还有更多 CPU 需要刻录，请考虑使用 gzip 甚至更强大的东西）。如果您仍然在地图任务日志中看到合并步骤需要很长时间，则需要进行一些调整：*

 *io.sort.factor：可能应该更高。根据您的工作，您甚至可能会因拥有过多的映射器而受苦。io.sort.mb：与 io.sort.factor 密切相关，但又不同。如果您开始在节点上看到大量磁盘 i/o 压力，我会加快速度。这会占用内存，因此此参数涉及到真正的权衡。

mapred.job.reuse.jvm.num.tasks：仅当您的任务变得非常小时，但如果他们这样做，这是值得推高 mapred.reduce.parallel.copies：如果您不受 CPU 限制，您可能想要提高这个数字。您可能最终需要调整其他数字以平衡事情。

io.sort.record.percent：由于工作规模，这个是最不可能完全偏离标准的。通常，如果这是错误的，那是因为您的记录非常大或非常小。您想要达到的黄金比例是“16/（16 + 每条记录的字节数）”。

很难强调早期溢出对节点性能的影响。如果溢出，则意味着数据将被写出，然后*再次读取*，然后再次*写出*。在每个节点上。因此，如果您弄错了，添加更多节点也无济于事（实际上会使情况变得更糟）。您想查看一项作业溢出了多少记录与输出了多少地图记录。理想情况下，这些数字将相同。现在，如果你必须溢出，你就必须溢出（尽管这通常表明你做错了），但是每条记录只溢出一次到磁盘的作业只会压垮其他作业。

在减速器方面可能存在类似的问题。查看合并阶段的计数器。理想情况下，您希望溢出记录为 0 或至少 <= reducer 输入记录的数量。如果它更高......这就是你遇到性能问题的原因（说真的，这绝对是残酷的）。注意各种reducer溢出设置：mapred.job.shuffle.input.buffer.percent、mapred.job.shuffle.merge.percent、mapred.inmem.merge.threshold、io.sort.factor。mapred.inmem.merge.threshold 通常会为大工作而烦恼。前两个也经常搞砸，但这更多地是作为工作*性质*的函数，而不是作为工作规模的函数。

dfs.namenode.handler.count：如果你在 HDFS 中生成很多小文件，你肯定想把它推高

dfs.mapred.job.tracker.handler.count：看看你有多少任务才能知道是否应该更高。如果您正在创建在数百个节点上运行的数千个小任务，您将不会满足于这是 10

dfs.datanode.handler.count：这个与parallel.copies标志齐头并进。这个总是给我带来麻烦，因为我的第一直觉是把它提高到非常高，然后我只是在其他地方制造原木堵塞。;-) 无论如何，如果你考虑到有多少个映射器与多少个reducer 对话，那么将其提高一点可能是有意义的。

tasktracker.http.threads：如果你被困在reduce-copy中，这个问题不太可能出现。无论如何，它更接近它应该在的位置。mapred.local.dir：这是我经常不得不在非 EMR 集群上调整的一个，用于具有大量地图输出的作业。你真的可以成为磁盘绑定和磁盘空间绑定，所以我发现将路径更改为逗号分隔的目录列表很有帮助，每个驱动器一个。当然，使用 EMR 没有任何意义，但仍然指出了如何才能真正快速耗尽磁盘空间。

mapred.local.dir.minspacestart：您可能没有意识到这一点，但您的地图输出可能空间不足。调整这个值以确保每个任务在开始工作之前在系统上有足够的剩余空间可以真正节省你的培根。

请记住，Hadoop 真的是为每个主轴 2 个内核的系统设计的（这是摩尔定律之前的几次迭代），所有输入和输出都保留在 HDFS 内（允许大量的输入和输出捷径），1GigE每 8 个核心的端口，并且交换结构中的瓶颈很少。EMR 没有给你这样的东西。亚马逊试图提供一些不错的默认值来调整它，但很难为每个人通用地解决这个问题。EMR 的一个优势是您倾向于在每个节点上获得大量 RAM，因此您应该花一些时间确保以最佳方式使用 RAM 以最小化磁盘 I/O。Hadoop 也非常适合映射器消耗大量原始数据但输出相对较少数据的工作。您在每项工作中产生的所有数据都会进行大规模的分布式排序，默认情况下，Hadoop 会尝试这样做，同时将大量 RAM 和磁盘空间留给您的任务。让您的数据已经分桶/排序确实可以将大量工作从减速器推到映射器中，从而避免大量开销。很有可能，这就是你的问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T20:23:21.143

我没有看到集群中的减速器数量和插槽/主机总数，但看起来你是减速器 DoS 映射器主机。你可以做几件事来解决这个问题：

1.  增加块大小。那就是使用更少的地图，每个映射器都会做更多的工作。这里将减少由减速器下载的部分。
2.  如果您的集群相对较大（100+），请检查 http 处理程序的数量（mapreduce.tasktracker.http.threads）
3.  reducer 的数量应该在集群容量的 0.7-1.2 之间（reducer 插槽）。

希望这可以帮助。*

# android - 适用于 Android 的 Flash CS6 发布

> ID：12829130
> 
> 赞同：2
> 
> 时间：2012-10-10T22:03:31.667
> 
> 标签：android, actionscript-3, flash, air, apk

使用 Flash CS6，我在手机上创建并安装了一个 .apk 文件。当我尝试启动它时，会发生此错误：

> 应用程序 appname (process air.appname) 已意外停止。请再试一次。

我在发布时使用了“Embed Air runtime with application”选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T18:43:54.573

我已经在 AVD 级别 10 上进行了测试 - 安装 Runtime.apk 和 MyApp.apk - 成功运行了 MyApp，但在 AVD 级别 15（使用 ARMv7a）上 - 应用程序应用程序名称意外停止。

要在 Windows 上首次在 AVD 上运行 flash cs6 的 flash app.apk：
1\. 使用 ARMv6 创建并运行 AVD（例如：AVD 级别 10；< 级别 15）
2\. 使用命令查找并连接到您的设备：adb devices
2\. 安装 runtime.apk 使用： adb install "your\flash\runtimes\air\android\emulator\runtime.apk" （例如："C:\Program Files\Adobe\Adobe Flash CS6\AIR3.2\runtimes\air \android\emulator\runtime.apk")
3\. 在 AVD 级别 10 上创建并安装 YourApp.apk 作为安装 runtime.apk
4\. 转到 AVD 并在 App 窗格上运行 YourApp。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T14:34:22.417

您运行的 Android 版本不仅必须支持 Adob​​e Air（Android 2.2 或更高版本），而且您的手机必须具有 ARMv7 处理器，而不是 ARMv6。我认为这是最常见的问题。查看你的手机有什么处理器。

# xml - Ant 错误：未找到引用 ${lib.classpath}

> ID：12829136
> 
> 赞同：0
> 
> 时间：2012-10-10T22:04:02.353
> 
> 标签：xml, ant

当我尝试使用 ant 构建项目时出现错误。这是构建文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="GPClient" default="dist" basedir=".">
    <description>
        simple example build file
    </description>
  <!-- set global properties for this build -->
  <dirname property="client.basedir" file="${ant.file.GPClient}"/>
  <property name="client.src" location="${client.basedir}/src"/>
  <property name="client.build" location="${client.basedir}/build"/>
  <property name="client.dist"  location="${client.basedir}/dist"/>
  <property name="client.done"  location="${client.basedir}/done"/>
  <property name="client.app"  location="${client.basedir}/app"/>
  <property name="client.webinf_classes" location="${client.basedir}/WEB-INF/classes"/>
  <property name="server.dir" location="${client.basedir}/../GrahamsProjServer"/>
  <property name="deploy.location"  location="${client.basedir}/../../jboss-as-7.1.1.Final/standalone/deployments"/>

    <path id="lib.classpath">
      <fileset dir="${client.basedir}">
          <include name="/lib/*.jar"/>
          <!-- <exclude name="jboss-servlet-api_3.0_spec-1.0.0.Final.jar" /> -->
      </fileset>
      <!-- <fileset dir="${client.basedir}/properties">
         <include name="*.properties"/>
     </fileset>
     <fileset dir="${server.dir}/dist">
         <include name="*.jar"/>
     </fileset>
     <fileset dir="${client.basedir}/WEB-INF/lib">
         <include name="*.jar"/>
     </fileset> -->
    </path>

    <path id="server.classpath">
      <fileset dir="${server.dir}/dist">
          <include name="*.jar"/>
      </fileset>
    </path>

    <path id="mf.classpath">
        <path refid="${lib.classpath}"/>
        <path refid="${server.classpath}"/>
    </path>

    <path id="war.classpath">
      <fileset dir="${client.basedir}/WEB-INF/lib">
          <include name="*.jar"/>
      </fileset>
    </path>

  <target name="client.init">
    <!-- Create the time stamp -->
    <tstamp/>
    <!-- Create the build directory structure used by compile -->
    <mkdir dir="${client.build}"/>
    <mkdir dir="${client.dist}"/>
    <mkdir dir="${client.done}"/>
    <mkdir dir="${client.app}"/>
    <mkdir dir="${client.webinf_classes}"/>
    <mkdir dir="${client.webinf_classes}/grahamsprojclient/servlet"/>
  </target>

  <target name="client.compile" depends="client.init"
       description="compile the source " >

    <!-- Compile the java code from ${src} into ${dist} -->
    <javac srcdir="${client.src}" destdir="${client.dist}" >
        <classpath>
            <path refid="mf.classpath"/>
        </classpath>
    </javac>
  </target>

  <target name="client.package" depends="client.compile" description="create the jar">  
        <!-- <manifestclasspath property="manifest.path" jarfile="${dist}/GrahamsProjClient.jar">
           <classpath refid="mf.classpath"/>
       </manifestclasspath> -->

        <jar destfile="${client.app}/GrahamsProjClient.jar" basedir="${client.dist}" >
            <fileset dir="${client.basedir}/properties">
                <include name="*.properties"/>
            </fileset>
            <fileset dir="${client.basedir}">
                <include name="lib/*.jar"/>
                <!-- <exclude name="lib/jboss-servlet-api_3.0_spec-1.0.0.Final.jar" />-->
            </fileset>
            <manifest>
                <attribute name="Class-Path" value="${mf.classpath}"/>
                <attribute name="Main-Class" value="grahamsprojclient.main.Start"/>
            </manifest>
        </jar>
  </target>

  <!--<target name="deploy" depends="package"
       description="generate the distribution" >
   <ear destfile="${deploy.location}/GrahamsProjServer.ear" appxml="${client.basedir}/META-INF/application.xml" >
       <metainf dir="${client.basedir}/META-INF"/>
       <fileset dir="${dist}" includes="*.jar"/>
   </ear>
 </target> -->

  <target name="client.clean"
       description="clean up" >
    <!-- Delete the ${build} and ${dist} directory trees -->
    <delete dir="${client.build}"/>
    <delete dir="${client.dist}"/>
    <delete dir="${client.app}"/>
    <delete dir="${client.done}"/>
    <delete dir="${client.webinf_classes}"/>
    <echo message="Deleting files in ${deploy.location}"/>
    <delete>
        <fileset dir="${deploy.location}" >
            <exclude name="*.txt" />
        </fileset>
    </delete>
  </target>

  <target name="client.compile-war-lib">
      <mkdir dir="WEB-INF/classes"/>
      <javac srcdir="${client.src}" destdir="WEB-INF/classes" debug="true" includeAntRuntime="false">
          <classpath refid="war.class.path"/>
          <include name="**/*.java"/>
      </javac>
  </target>

  <target name="client.compile-war" depends="client.init" description="compile the source " >
    <!-- Compile the java code from ${src} into ${dist} -->
    <javac srcdir="${client.basedir}/src/grahamsprojclient/servlet"
          destdir="${client.basedir}/WEB-INF/classes/grahamsprojclient/servlet" >
        <classpath>
            <path refid="war.class.path"/>
        </classpath>
    </javac>
  </target>

  <target name="client.build_war" depends="client.package, client.compile-war" description="build war" >  
      <war destfile="${client.done}/GrahamsProjClient.war" webxml="WEB-INF/web.xml">
        <metainf dir="${client.basedir}/META-INF" includes="context.xml" />
        <lib dir="${client.basedir}/WEB-INF/lib">
            <exclude name="/CopyLibs"/>
            <exclude name="*.ex" />
        </lib>
        <classes dir="${client.basedir}/WEB-INF/classes/grahamsprojclient/servlet" >
            <exclude name="*.java" />
        </classes>
        <fileset dir="${client.basedir}" >
            <include name="GrahamsProjClient-webstart.jnlp"/>
            <include name="app/GrahamsProjClient.jar"/>
            <include name="GrahamsProjStartAppPage.html"/>
            <!-- <include name="lib/*.jar"/>
           <include name="lib/jboss-servlet-api_3.0_spec-1.0.0.Final.jar"/> -->
        </fileset>
      </war>
  </target>

  <target name="client.deploy_war" depends="client.build_war" description="deploy war">
        <copy file="${client.done}/GrahamsProjClient.war" todir="${deploy.location}" />
  </target>

</project> 
```

这是 ant 构建日志（底部有错误）：

```
client.init:
Created dir: C:\Users\gbaldeck\Google Drive\Work\LearningAS7\GrahamsProjClient\build
Created dir: C:\Users\gbaldeck\Google Drive\Work\LearningAS7\GrahamsProjClient\dist
Created dir: C:\Users\gbaldeck\Google Drive\Work\LearningAS7\GrahamsProjClient\done
Created dir: C:\Users\gbaldeck\Google Drive\Work\LearningAS7\GrahamsProjClient\app
Created dir: C:\Users\gbaldeck\Google Drive\Work\LearningAS7\GrahamsProjClient\WEB-INF\classes
Created dir: C:\Users\gbaldeck\Google Drive\Work\LearningAS7\GrahamsProjClient\WEB-INF\classes\grahamsprojclient\servlet
client.compile:
C:\Users\gbaldeck\Google Drive\Work\LearningAS7\GrahamsProjClient\build-client.xml:67: warning: 'includeantruntime' was not set, defaulting to build.sysclasspath=last; set to false for repeatable builds
Compiling 6 source files to C:\Users\gbaldeck\Google Drive\Work\LearningAS7\GrahamsProjClient\dist

Unresolvable reference ${lib.classpath} might be a misuse of property expansion syntax.
C:\Users\gbaldeck\Google Drive\Work\LearningAS7\GrahamsProjClient\build-client.xml:67: Reference ${lib.classpath} not found.
BUILD FAILED (total time: 0 seconds) 
```

是什么导致这种情况发生？我没有看到我的路径设置有什么问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T22:10:47.430

`lib.classpath`您使用引用 id和定义了路径`server.classpath`，但是当您引用它们时：

```
<path id="mf.classpath">
    <path refid="${lib.classpath}"/>
    <path refid="${server.classpath}"/>
</path> 
```

您将它们视为您尚未定义的属性。你可能的意思是：

```
<path id="mf.classpath">
    <path refid="lib.classpath"/>
    <path refid="server.classpath"/>
</path> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T22:08:44.247

我认为您在第 67 行使用了 ${lib.classpath}，但您没有定义它。

# windows-runtime - HtmlAgilityPack 和 windows 8 winRT

> ID：12829137
> 
> 赞同：0
> 
> 时间：2012-10-10T22:04:08.153
> 
> 标签：windows-runtime, html-agility-pack

我正在尝试为 Windows 8 构建 Metro 应用程序。在此应用程序中，我正在尝试解析来自网站的数据。为此，我正在使用 HtmlAgilityPack 1.4.6。但我对“Dose HAP 1.4.6 适用于 Windows 8？”感到非常困惑？和“它支持 Xpath 吗？” Codeplex 上有太多令人困惑的信息。就目前而言，它似乎可以在 Windows 8 上运行，但我看不到 HtmlNode.SelectNode 方法。如果 Xpath 不工作，是否还有其他选项可以进行解析？你能指导我看一个教程或例子吗？请...

你的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T06:55:42.097

您可以使用 LINQ API：

```
var doc = new HtmlDocument();
doc.LoadHtml(contents);
var programmes = doc.DocumentNode.Descendants().Where(d => d.GetAttributeValue("class", "") == "program") 
```

不幸的是，我找不到有关此 API 的最新信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T15:46:10.810

几周前我创建了自己的算法来保存网页，并且借助这几行代码，我还解决了在 windows 8 metro-app 中解析**img css js**的 html 代码的问题：（对于所有图像，in `HtmlDocument html`，链接示例）

```
IEnumerable<HtmlNode> imghrefNodes = html.DocumentNode.Descendants().Where(n => n.Name == "img");
foreach (HtmlNode img in imghrefNodes)
{
   HtmlAttribute att = img.Attributes["src"];
   //in att.Value you can find your img url
   //Here you can do everything what you want with all img links by editing att.Value
} 
```

对于 css，你可以`img`用`link`和 `src`替换`href`。其他节点也一样。

# php - RSS 提要：htmlspecialchars() 与 CDATA

> ID：12829142
> 
> 赞同：3
> 
> 时间：2012-10-10T22:04:46.693
> 
> 标签：php, rss, feed, cdata, htmlspecialchars

我用 PHP 编写了一个小类来生成一个简单的 RSS 提要。

项目描述也应该能够包含 html 标签。

我想知道哪种方法更好，每种方法的优点/缺点是什么：

```
$item .= "<description><![CDATA[" . $description . "]]></description>\n"; 
```

或者

```
$item .= "<description>" . htmlspecialchars($description, ENT_NOQUOTES, "UTF-8") . "</description>\n"; 
```

我能想到的 CDATA 方法的唯一缺点是，我必须提前检查字符串 $description 是否包含

```
"<![CDATA[" or "]]>". 
```

提前感谢您的澄清。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T23:34:30.383

当您想在那里使用 HTML 代码时，只有一种选择，即 CDATA 部分。

原因：Feed 必须是有效的 XML，但 HTML 可能不是有效的 XML。因此，如果您在没有 CDATA 的情况下使用 HTML，则描述中的所有无效 XML 都将导致 XML-Parser-Error。这可能已经被这样一个简单的事情所强制，比如**`&nbsp;`**or **`<br>`**（什么是有效的 HTML，但无效的 XML）

CDATA 部分不会被解析，所以你可以在那里使用你想要的。

但是，您最好使用`<content:encoded>`标记。

*   [https://developer.mozilla.org/en-US/docs/RSS/Article/Why_RSS_Content_Module_is_Popular_-_Including_HTML_Contents](https://developer.mozilla.org/en-US/docs/RSS/Article/Why_RSS_Content_Module_is_Popular_-_Including_HTML_Contents)

*   [描述和内容的区别：RSS2中的编码标签](https://stackoverflow.com/questions/7220670/difference-between-description-and-contentencoded-tags-in-rss2)

# node.js - res.rendr 没有加载完整的文件

> ID：12829145
> 
> 赞同：0
> 
> 时间：2012-10-10T22:05:07.383
> 
> 标签：node.js, mongoose, ejs

在我的代码中 res.render 没有加载完整的文件，而是只显示文件的第一页

```
PersonalInfo.findOne({ name:'amna'}, function(err,post){
       if(err || !posts)
       {
           console.log("find is not done");
       }

      else{
               console.log(post);
              res.render("/profilearea.ejs");

          }) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T22:12:55.403

回调的第二个参数`findOne`不是数组，它只是一个模型实例（或`null`）。你的意思是`find`改用吗？

# c# - 以自制程序作为标准程序打开文本文件

> ID：12829146
> 
> 赞同：0
> 
> 时间：2012-10-10T22:05:29.170
> 
> 标签：c#, windows

我担心这个问题的标题可能不清楚，但请允许我澄清一下。我用 C# 编写了一个基本的文本编辑器，能够打开和保存文本文件。现在，我想要实现的是：

*   能够将打开文本文件 (.txt / .rtf) 的标准程序更改为我的程序。
*   将文本文件拖到我的程序中，让内容自动加载到richtextbox中。

我不确定这样的技术术语，所以搜索这个问题并没有让我走得太远。提前感谢您的回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T22:10:28.607

有关拖放支持，请参阅[http://msdn.microsoft.com/en-us/library/ms742859.aspx](http://msdn.microsoft.com/en-us/library/ms742859.aspx)

要更改 Windows 中的默认程序，请参阅[http://msdn.microsoft.com/en-us/library/windows/desktop/cc144146%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/cc144146%28v=vs.85%29.aspx)

# linux - linux中NDIS过滤器的类似物是什么？

> ID：12829150
> 
> 赞同：2
> 
> 时间：2012-10-10T22:05:37.790
> 
> 标签：linux, kernel, hpc, netfilter, ndis

我正在`as close to real-time`尽可能在 linux 上开发一个系统，一旦我收到一个特定的数据包，就需要在 TCP 数据包中发送大约 600-800 个字节。

为了获得尽可能好的延迟，我希望这个数据包直接从内核发送，而不是接收到的数据包一直到达用户空间和应用程序，然后返回。

如果我在 Windows 上，我会编写一个 NDIS 过滤器，我将缓存要发送的数据包和匹配的参数，以便它检查接收到的数据包并在匹配时将预缓存的数据包触发到网络上而不通过接收到的数据包向上层。

所以我的问题是 linux 上最接近 NDIS 过滤器的类似物是什么？

我已经阅读了有关 netfilter 的内容，也许这就是我会使用的，但我不知道这是否是最好的方法。

我还能做些什么来实现尽可能低的延迟？

我当前的纯用户空间代码在 Intel Xeon 3.7 GHz 处理器上运行 2.6.3x 内核上的 Ubuntu 10.04 给了我大约 80-100 微秒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T04:29:53.863

您可以使用`iptables`目标`NFLOG`将数据包复制到用户空间或`NFQUEUE`允许用户空间破坏它们。这种交互发生在[netlink](http://www.skyfree.org/linux/kernel_network/netlink.html)上，但您可以使用诸如[libnetfilter_log](http://netfilter.org/projects/libnetfilter_log/)和[libnetfilter_queue 之](http://netfilter.org/projects/libnetfilter_queue/)类的库来环绕它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T03:22:56.853

Linux内核中有类似的机制称为BPF（伯克利包过滤器）。从您的应用程序中将 BPF 过滤器注册到内核中。匹配过滤器的数据包将被捕获并转发到注册的钩子函数。

以下是我在互联网上找到的示例代码。( [https://gist.github.com/939154](https://gist.github.com/939154) ) 基本上你必须创建一个打开，将它与 BPF 过滤器绑定，然后选择这个 FD 来接收数据包：set_filter(int fd) { struct bpf_program fcode = {0};

```
/* dump ssh packets only */
struct bpf_insn insns[] = {
    BPF_STMT(BPF_LD+BPF_H+BPF_ABS, 12),
    BPF_JUMP(BPF_JMP+BPF_JEQ+BPF_K, ETHERTYPE_IP, 0, 10),
    BPF_STMT(BPF_LD+BPF_B+BPF_ABS, 23),
    BPF_JUMP(BPF_JMP+BPF_JEQ+BPF_K, IPPROTO_TCP, 0, 8),
    BPF_STMT(BPF_LD+BPF_H+BPF_ABS, 20),
    BPF_JUMP(BPF_JMP+BPF_JSET+BPF_K, 0x1fff, 6, 0),
    BPF_STMT(BPF_LDX+BPF_B+BPF_MSH, 14),
    BPF_STMT(BPF_LD+BPF_H+BPF_IND, 14),
    BPF_JUMP(BPF_JMP+BPF_JEQ+BPF_K, 22, 2, 0),
    BPF_STMT(BPF_LD+BPF_H+BPF_IND, 16),
    BPF_JUMP(BPF_JMP+BPF_JEQ+BPF_K, 22, 0, 1),
    BPF_STMT(BPF_RET+BPF_K, (u_int)-1),
    BPF_STMT(BPF_RET+BPF_K, 0),
};

/* Set the filter */
fcode.bf_len = sizeof(insns) / sizeof(struct bpf_insn);
fcode.bf_insns = &insns[0];

if(ioctl(fd, BIOCSETF, &fcode) < 0)
    return -1;

return 0; 
```

}

bpf_inst 看起来很糟糕。但是，不需要手动编写它。您可以使用 tcp-dump 自动生成这些脚本。

例如：

```
sudo tcpdump 'tcp[13]=18'  -i eth0 -dd
{ 0x28, 0, 0, 0x0000000c },
{ 0x15, 0, 8, 0x00000800 },
{ 0x30, 0, 0, 0x00000017 },
{ 0x15, 0, 6, 0x00000006 },
{ 0x28, 0, 0, 0x00000014 },
{ 0x45, 4, 0, 0x00001fff },
{ 0xb1, 0, 0, 0x0000000e },
{ 0x50, 0, 0, 0x0000001b },
{ 0x15, 0, 1, 0x00000012 },
{ 0x6, 0, 0, 0x00000060 },
{ 0x6, 0, 0, 0x00000000 }, 
```

# javascript - 访问通过函数构造的 JavaScript 对象中的变量

> ID：12829154
> 
> 赞同：3
> 
> 时间：2012-10-10T22:06:02.820
> 
> 标签：javascript, jquery, object

我的应用程序正在访问我无法更改的第三方外部 JavaScript 文件。

在该文件中有一个对象，其定义类似于如下：

```
object_1 = (function(){
    var object_1_var = 'object_1_var_value';
    return {
        obj_1_func: function() {
            console.log(object_1_var);
        }
    }
})(window); 
```

我需要能够访问`object_1_var`对象内部，但我很难访问它。

```
object_1.v // returns undefined
object_1.obj_1_func() // returns the value via console, but I need to assign it to a var. 
```

我尝试使用以下方法扩展对象：（使用 jQuerys $.extend()）

```
object_2 = (function(){
    return {
        obj_2_func: function() {
            return object_1_var;
        }
    }
})(window);

$.extend(object_1, object_2);

var my_var = object_1.obj_2_func(); // returns 'Uncaught ReferenceError: object_1_var is not defined' 
```

我该怎么做才能访问`object_1_var`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T22:08:38.613

您将无法访问该变量。它恰好是私人成员。对象的私有成员只能通过其成员函数访问。

读[这个](http://www.crockford.com/javascript/private.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T22:10:03.893

将其公开，如下所示：

```
object_1 = (function(){
 var object_1_var = 'object_1_var_value';
 return {
    obj_1_func: function() {
        console.log(object_1_var);
    },
    object_1_var: object_1_var
 }
})(window); 
```

**编辑**

如果无法编辑 javascript（例如在第三方库中 - 抱歉遗漏），那么您将无法访问，`object_1_var`因为它的范围是闭包的本地`object_1`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-10T22:13:22.163

`object_1_var`是一个*词法范围*的局部变量。

这意味着无法通过扩展`object_1`其原始定义之外的方式访问它。

可以访问它的*唯一*方法是在声明它的原始词法范围*内添加函数：*

```
object_1 = (function(){
    var object_1_var = 'object_1_var_value';
    return {
        obj_1_func: function() {
            console.log(object_1_var);
        }
        var_1: function(x) {
            if (typeof x !== 'undefined') {
                object_1_var = x;
            } else {
                return object_1_var;
            }
        }
    }
})(window); 
```

但既然你不能修改`object_1`，恐怕你就不走运了！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-10T22:10:47.407

遗憾的是，在此示例中无法访问 object_1_var。该变量被定义为该特定函数内的局部变量 - 其他函数可以看到它的唯一原因是因为它们也在该函数内定义。这种“闭包作用域”是 JavaScript 中一个有趣的特性，在其他地方并不常见，但它是在 JavaScript 对象中定义“私有”变量的唯一真正方法。

希望有帮助！

* * *

在最坏的情况下，过去我通过有效地覆盖以前在其他地方定义的对象的定义来解决这类问题 - 主要是在 Greasemonkey 脚本中 - 但我不会宽恕这种情况用于生产用途！

这里的诀窍是将整个脚本复制到您自己的脚本中。它很丑陋，但它可能会起作用！(YMMV)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-10T22:12:20.287

你想要完成的事情在 JS 中是不可能的。

随着 object_1 的构造，变量超出了该方法的范围。日志功能可以访问变量的原因就是我们所说的“闭包”。

# html - 当您“喜欢”页面被截断时的 Facebook 共享窗口

> ID：12829157
> 
> 赞同：2
> 
> 时间：2012-10-10T22:06:20.200
> 
> 标签：html, css, facebook, firefox, facebook-like

我正在尝试将 FB 添加到我的网站。类似的似乎工作正常。但是，当有人单击“赞”按钮（在 Mac Lion 上使用 Firefox）时，会出现一个共享框，该框在我的页面上显示截止。理想情况下，我希望完全显示共享框，以便访问者可以分享他们的喜欢。如果这是不可能的，那么一起摆脱共享框，只留下“喜欢”。

这是它的外观：

[脸书喜欢 http://www.sofiaandluis.com/public/facebook_like.png](http://www.sofiaandluis.com/public/facebook_like.png)

这是代码：HTML

```
<div class="column-area">
    <div class="suscribe-social">
        <div class="up make-word-breakable">
            <div id="fb-root"></div>
            <script>(function(d, s, id) {
                var js, fjs = d.getElementsByTagName(s)[0];
                if (d.getElementById(id)) return;
                js = d.createElement(s); js.id = id;
                js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=xxxxxx";
                fjs.parentNode.insertBefore(js, fjs);
            }(document, 'script', 'facebook-jssdk'));</script>
            <div class="fb-like" data-href="https://www.facebook.com/pagename" data-send="false" data-width="300" data-show-faces="true" data-font="verdana"></div>
        </div>
        <div class="down make-word-breakable"></div>
    </div> 
```

CSS

```
.column-area {
    width: 300px;
    display: block;
    box-sizing: border-box;
    float: left;
    margin-left: 2.127659574%;
}
.suscribe-social {
    border: 1px solid #E4E4E1;
    margin: 5px 0px 20px 0px;
}
.suscribe-social .up {
    padding: 10px;
    display: inline-block;
}
.make-work-breakable {
    word-wrap: break-word;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T22:24:40.673

我还没有看到任何表明可以通过 FB api 进行配置的东西，但我相信这应该可行：

```
.fb-like {
    height: 20px;  // I think that's the button height, you might need to adjust
    overflow: hidden;
} 
```

评论框仍然会被加载，它只是被隐藏。不知道那里是否会出现任何并发症，尽管我对此表示怀疑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T22:59:14.753

我认为 FB 框被切断是因为某些父元素具有“溢出：隐藏”属性。

此属性可能会阻止 FB 框超出该父元素的大小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-10T05:34:46.910

这已经很老了，但我想在这里添加另一个不涉及`!important`在我们的 css 上添加的答案。这是 - 老实说 - 只是看起来不正确。

```
.fb-like iframe { max-width:none; } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T22:35:34.843

好的，让它工作。我删除了课程

```
.fb-like iframe {
    width: 290px !important;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-25T17:15:51.710

另外，位置：绝对；适用于按钮的持有人元素。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-03T08:52:49.653

```
.fb-like span{
overflow:visible 
!important; 
width:450px !important; 
margin-right:-375px;
} 
```

这应该工作......祝你好运

# java - HashSet 实现中的空对象

> ID：12829163
> 
> 赞同：12
> 
> 时间：2012-10-10T22:06:34.270
> 
> 标签：java, hashset

在 Java API 中，HashSet 的实现是使用一个 Object 作为内部 HashMap 的值，

```
 // Dummy value to associate with an Object in the backing Map
private static final Object PRESENT = new Object();

public boolean add(E e) {
    return map.put(e, PRESENT)==null;
} 
```

但是HashMap允许它的值为null。我认为这不是填充值所必需的，那么为什么需要这样做呢？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-10T22:10:12.273

因为如果指定的对象存在并被删除，`HashSet`合约会指定`remove()`返回。`true`为此，它使用 Wrapped`HashMap#remove()`返回删除的值。

如果您要存储`null`而不是对象，则调用 to`HashMap#remove()`将返回`null`，这与尝试删除不存在的对象的结果无法区分，并且`HashSet.remove()`无法履行合同。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-10T22:10:05.873

> 但 HashMap 允许其值为 null

当值完全由 控制时，为什么这很重要`HashSet`？这*确保*了与键关联的唯一值是`PRESENT`. 因此，如果`map.put`返回`null`，那可能*只是*因为之前没有该键的条目。

该值就在那里，因为必须指定*一些值，如果该值**被*指定为`null`，那将是不好的 - 这将使得在调用 之前判断是否存在值变得更加困难`add`。如果你要指定任何非空值，你不妨强制它一直是相同的值——例如，你不希望它阻止垃圾收集。

现在，如果您要问为什么要`HashSet`根据`HashMap`而不是更有效的实现而不是根本不记录值来实现，*那是*一个不同的问题，我没有答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T22:10:51.270

在 Java HashMap 中，从对象到 null 的映射与映射中根本*不*存在的对象不同。考虑：

```
Object exists = new Object();
map.put(exists, null);
System.out.println(map.contains(exists)) // "true"
System.out.println(map.get(exists)) // "null"
Object notMapped = new Object();
System.out.println(map.contains(notMapped)) // "false"
System.out.println(map.get(notMapped)) // "null" 
```

此外， HashMap.put() 使用您放置的键返回旧值，在您的情况下为空（因为该键不在地图中，或者它的值为空）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T22:12:19.147

使用 a `Map`，如果您调用`put(key, null)`，则无法区分

1.  密钥已经存在，映射到`null`
2.  该键没有映射

由于`HashSet`的`add`委托`HashMap.put`,`PRESENT`需要履行 的合同，如果对象已经存在于 中`Set.add`，则返回：`false``Set`

```
return map.put(e, PRESENT)==null; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-17T03:56:38.653

我还想补充一件事：

因为，HashSet add() 方法的工作原理如下：

公共布尔添加（E e）{

```
 return map.put(e, PRESENT)==null;
} 
```

1.  假设，如果 PRESENT==null 那么当我们第一次在 HashMap 中添加项目时，它返回**null**值

    对象存在 = 新对象（）；

    ```
     V  value=  map.put(exists,null);
                value will be null here 
    ```

    HashSet 将返回 -> null == null ->> true

2.  第二次我们在 hashMap 中添加相同的键，其值为**Null**

    ```
     map.put(exists,null); 
    ```

    return null == null ->> true 它将允许 hashSet 中的重复。这就是 JDK 开发人员编写 PRESENT 对象的原因

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-10T22:11:41.773

注意`==null`部分......

# django - GeoDjango PointField 输入

> ID：12829178
> 
> 赞同：4
> 
> 时间：2012-10-10T22:07:15.330
> 
> 标签：django, point, geodjango

这可能是一个愚蠢的问题，但我还没有找到答案。我实现了 GeoDjango 和一个 PointField，所以在管理页面中我尝试创建一个新对象，但它总是告诉我坐标不正确，页面上有一个类似于文本字段的字段，但我不知道是哪种格式适合坐标。

我必须将此字段设置为隐藏以插入来自谷歌地图的坐标，但如果我不知道格式......这很困难。

谢谢大家。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T19:58:24.687

听起来您还没有启用[GeoDjango admin](https://docs.djangoproject.com/en/dev/ref/contrib/gis/tutorial/#geographic-admin)。如果启用管理员，您应该能够使用点击界面编辑字段。

如果您确实想使用坐标手动编辑它，请尝试使用[Well Known Text](http://en.wikipedia.org/wiki/Well-known_text)。基本上，它的形式是`POINT(-96.1 45.2)`.

# ruby - rake install 不适用于 octopress

> ID：12829181
> 
> 赞同：0
> 
> 时间：2012-10-10T22:07:29.863
> 
> 标签：ruby, rake, octopress

我正在尝试通过此文档设置 rake。

[http://octopress.org/docs/setup/](http://octopress.org/docs/setup/)

但我得到一些错误。

```
ikhthiandor@ikhthiandor-Satellite-L450:/opt/octopress$ rake install
## Copying classic theme into ./source and ./sass
mkdir -p source
rake aborted!
Permission denied - source

Tasks: TOP => install
(See full trace by running task with --trace) 
```

使用 sudo 我得到这个输出。

```
ikhthiandor@ikhthiandor-Satellite-L450:/opt/octopress$ sudo rake install
rake aborted!
no such file to load -- bundler/setup

(See full trace by running task with --trace) 
```

这是目录中的文件列表。

```
ikhthiandor@ikhthiandor-Satellite-L450:/opt/octopress$ ls -a
.                   config.ru     .git        Rakefile         .slugignore
..                  _config.yml   .gitignore  .rbenv-version   .themes
CHANGELOG.markdown  Gemfile       plugins     README.markdown
config.rb           Gemfile.lock  .powrc      .rvmrc 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T23:36:00.383

Ikhthiandor：看起来你是 ruby​​/rails 世界的初学者。

通过运行该`rake install`命令，您将使用[rake 工具](http://en.wikibooks.org/wiki/Ruby_on_Rails/Built-In_Rails_Tools/What_is_Rake_anyway%3F)安装默认的 octopress 主题。不像`trying to setup rake`你在问题中提到的那样。

第一个错误（`Permission denied - source`尝试时`mkdir -p source`- 正如您正确猜测的那样 - 是因为用户没有创建该目录的权限。

第二个错误 ( `no such file to load -- bundler/setup`) 是因为前面的`install dependencies`步骤没有正确执行（对于运行此命令的用户）。

要成功完成的安装依赖项步骤是：

```
1\. gem install bundler
2\. rbenv rehash    # If you use rbenv, rehash to be able to run the bundle command
3\. bundle install 
```

我猜您以 'ikhthiandor' 用户身份成功运行了这些步骤，因此捆绑器 gem 不适用于 'sudo' 用户。

您可以通过以下任一选项解决此问题：

1.  更改`/opt/octopress`文件夹的权限，以便“ikhthiandor”用户有权在其中创建子文件夹/文件。
2.  以“sudo”运行[Octopress 设置文档中的所有命令](http://octopress.org/docs/setup/)

最佳实践是使用[rvm](https://rvm.io/)或[rbenv](https://github.com/sstephenson/rbenv)来管理每个用户的 ruby​​ 环境的自定义安装（而不是作为超级用户执行所有操作）。

如果您确实是 ruby ​​-rails世界的新手，并且想加深对 ruby​​/rails 世界中工具和最佳实践的了解，我建议您浏览[Ruby on Rails 教程](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book)的前几章可免费在线获取。

高温高压

# php - 尝试运行最新版本的php时出现奇怪的错误

> ID：12829188
> 
> 赞同：1
> 
> 时间：2012-10-10T22:08:09.607
> 
> 标签：php, macos

我遵循[了本指南](http://mac.tutsplus.com/tutorials/server/upgrading-the-native-php-installation-on-os-x-mountain-lion/)，然后在整个变量之前添加了*/usr/local/bin*`$PATH` ，以便新安装的版本首先运行（而不是默认版本）。然后，当我尝试从命令行运行时`php -version`，出现以下错误：

> 解析错误：语法错误，第 1 行命令行代码中的文件意外结束

我在跑山狮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T22:24:38.163

似乎 php v5.4.x 不推荐使用 php -version 我尝试了 php -v 它适用于 php 5.3.x 和 php 5.4.x

# c++ - CreateWindowEx() 在哪里？

> ID：12829189
> 
> 赞同：0
> 
> 时间：2012-10-10T22:08:24.870
> 
> 标签：c++, c, windows, winapi, createwindowex

我试图了解 winapi 是如何工作的。我刚刚开始编写我的前几个应用程序。现在我对函数“CreateWindowEx()”很好奇，我想知道这个函数里面写了什么，但我能找到的只是调用它的参数和它的参数。所以我决定在 h 文件中寻找这个函数，但我找不到它。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T22:10:52.430

它*声明*在：

```
Winuser.h (include Windows.h) 
```

但是 Windows 不是开源的，所以我怀疑你会找到实现（除非你为 MS 工作并且可以访问代码）。你可以介入拆解，但我怀疑你会发现一些有用的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T22:58:42.343

[阅读文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632680.aspx)：

> 头文件 Winuser.h（包括 Windows.h）
> 
> 库 User32.lib
> 
> DLL User32.dll

这意味着该函数在 winuser.h中**声明**，由 user32.lib**链接**，并在 user32.dll 中**实现。**

# python - 在 python 中增加 1.0 给出了意想不到的答案

> ID：12829192
> 
> 赞同：2
> 
> 时间：2012-10-10T22:08:32.990
> 
> 标签：python, increment

```
>>> a=3
>>> a+2.0
5.0
>>> a=a+1.0
>>> a
4.0 
```

无法理解为什么**4.0**即将到来。我认为**6.0**应该是答案。请解释为什么结果是 4.0。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T22:11:51.907

在第二行`a+2.0`，你没有修改 的值`a`，所以第三行仍然`a`是预期的。`3``a+1.0``4.0`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T22:12:30.367

如果你仔细看，你并没有分配你的表达式的结果： `a+2.0`肯定是 5.0 打印出来的，但是 a 没有改变，因为没有分配`(a=a+2.0)`给 a

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T22:12:11.253

您没有将`a+2.0`back 的结果分配给`a`，因此当您随后这样做时`a=a+1.0`，`a`仍设置为`3`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T23:53:16.863

其他人已经直接回答了你的问题。这是在提示下工作时要考虑的另一件事。

```
>>> a=3 # assignment does not update '_'
>>> a # have to ask for the value of 'a' so it ends up in '_'
3
>>> _ + 2.0
5.0
>>> _ + 1.0
6.0 
```

您始终可以使用“_”，表示“最后一个结果的值”。

# java - Java生成随机数字序列并随机访问序列元素

> ID：12829197
> 
> 赞同：3
> 
> 时间：2012-10-10T22:08:57.847
> 
> 标签：java, random

在我的程序中，我需要生成许多大的随机整数序列。

我知道我可以只使用 Random 对象来创建序列，将该序列存储在列表或数组中，然后在需要时查询它以获取第 i 个元素，但因为序列可能很长（1M 个元素）和我有许多不同的序列，我想知道是否可以只存储每个序列的种子并执行以下操作：

```
public static int getIthNumber(int seed, int i){
    Random r = new Random(seed);
    for (int j=0; j< i-1; ++j) r.nextInt();
    return r.nextInt();
} 
```

但没有循环的开销..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T22:16:19.773

如果您需要随机访问，您可以避免使用正确的顺序。

```
public static int getIthNumber(int seed, int i){
    return new Random(seed * 10123457689L + i * 101111).nextInt();
} 
```

# python - 使用 SWIG 将 C 结构数组访问到 Python

> ID：12829198
> 
> 赞同：5
> 
> 时间：2012-10-10T22:08:57.520
> 
> 标签：python, arrays, struct, swig

我试图从 Python 调用现有的 C 代码。C 代码定义了一个`B`包含`A`s 的结构数组的结构。C 代码还定义了一个函数，该函数在调用时将值放入结构中。我可以访问数组成员变量，但它不是列表（或支持索引的东西）。相反，我得到一个对象，它是`B*`.

我发现[了这个问题](https://stackoverflow.com/q/5670456/210526)，但它看起来并没有完全解决。我也不确定如何创建 Python 类的实例`B`来替换`PyString_FromString()`.

下面是演示我的问题以及如何执行它所需的代码：

例子.h

```
typedef struct A_s
{
  unsigned int thing;
  unsigned int other;
} A_t;

typedef struct B_s
{
  unsigned int size;
  A_t items[16];
} B_t;

unsigned int foo(B_t* b); 
```

例子.c

```
#include "example.h"

unsigned int
foo(B_t* b)
{
  b->size = 1;
  b->items[0].thing = 1;
  b->items[0].other = 2;
} 
```

例子.i

```
%module example
%{
#define SWIG_FILE_WITH_INIT
#include "example.h"
%}

%include "example.h" 
```

安装程序.py

```
from distutils.core import setup, Extension

module1 = Extension('example', sources=['example.c', 'example.i'])
setup(name='Example', version='0.1', ext_modules=[module1]) 
```

script.py - 这使用库并演示失败。

```
import example
b = example.B_t()
example.foo(b)
print b.size
print b.items
for i in xrange(b.size):
    print b.items[i] 
```

如何运行一切：

```
python setup.py build_ext --inplace
mv example.so _example.so
python script.py 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T10:53:09.170

您可以编写一些 C 辅助函数，例如：

```
int get_thing(B_t *this_b_t, int idx);
int get_other(B_t *this_b_t, int idx);
void set_thing(B_t *this_b_t, int idx, int val);
void set_other(B_t *this_b_t, int idx, int val); 
```

包装这些，然后您可以使用从中获得的指针`example.B_t()`来访问数据结构排列中的值，例如

```
>>> b = example.B_t()
>>> a_thing = example.get_thing(b, 0)
>>> example.set_thing(b,0,999) 
```

希望这些 C 函数的实现应该是显而易见的 - 如果不是，我可以提供一个例子......

授予这不像能够像 python 列表那样访问 C 数组那样无缝 - 你可能能够使用类型映射来实现这一点，但我不记得在这种情况下你需要的确切语法 - 你必须这样做SWIG 文档上的一些 RTFM

这里也可能重复：[nested structure array access in python using SWIG](https://stackoverflow.com/questions/7713318/nested-structure-array-access-in-python-using-swig?rq=1)

# c# - 我可以将 IFormatProvider 与 WPF 绑定一起使用到自定义类型吗？

> ID：12829213
> 
> 赞同：2
> 
> 时间：2012-10-10T22:10:25.143
> 
> 标签：c#, wpf, data-binding, string-formatting, iformatprovider

我有一个自定义类型（`SINumber`，它表示具有适当单位和前缀的 SI 编号）。我可以绑定到`SINumber`罚款和覆盖`SINumber.ToString()`，但显示的是调用 SINumber.ToString() 的结果。

例如，SIMeasurement 是`SINumber`SI 值为 3099999.9046325684 Ω 的类型。使用以下绑定，我得到 3.09999990463257 MΩ 的输出。

```
<TextBlock Text="{Binding SINMeasurement}"></TextBlock> 
```

单位 (Ω) 和前缀 (M = mega) 对话是正确的，问题在于显示的数字数量。我希望能够使用自定义格式化程序（实现`IFormatProvider` `ICustomFormatter`？）来解释`StringFormat`Binding，并合并我的 SI 逻辑（更改前缀）以显示**3.10 MΩ**。下面是我想使用的绑定示例，其中精度是可定制的（在本例中为 0.00），并且单位的位置由“U”确定。

```
<TextBlock Text="{Binding SINMeasurement, StringFormat='{}{0:0.00 U}'}"></TextBlock> 
```

有什么想法吗？我不想使用硬编码`SINumber.ToString()`，因为所需的精度会在应用程序中的不同位置有所不同。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T13:33:34.717

使您的数据类型实现**IFormattable**接口。每次 Binding 使用您为 Binding 指定的**StringFormat**将您的对象转换为字符串时，都会调用其方法**public string ToString(string format, IFormatProvider formatProvider) 。**

# javascript - 正则表达式验证字符串中的连续字符

> ID：12829217
> 
> 赞同：-3
> 
> 时间：2012-10-10T22:10:40.043
> 
> 标签：javascript, regex

对不起，如果这是一个简单的问题。是否有正则表达式来验证字符串中的四个连续字符是否为数字（例如一年）？

例如 glorer1891kl -> true, 74djada -> false

我需要验证字符串中是否存在四个连续字符，每个字符都是一个数字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T22:13:23.223

[0-9]{4}

会做的。有一个很棒的网站可以测试这个......

[http://gskinner.com/RegExr/](http://gskinner.com/RegExr/)

# jquery - jquery 拖放 - 获取被拖放的元素的 id

> ID：12829221
> 
> 赞同：5
> 
> 时间：2012-10-10T22:10:48.927
> 
> 标签：jquery, drag-and-drop

当一个元素被删除时，有没有办法从被拖动的元素中获取 id （或其他一些属性值）？

例如，在左侧，我有一堆 div，我可以将图像放入其中。在右边我有一个 div 来保存图像。当我将图像从右侧拖动到左侧的 div 时，我可以获得有关被拖动的 [图像名称] 以及在 [div id] 上放置的内容的信息。

如果我现在想将图像从左侧的 div 拖动到右侧的 div，当我将图像放在右侧的 div 上时，如何获取图像所在的 div 的 id。

对不起，如果这令人困惑。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T22:41:23.443

下面是一个可运行的解决方案。

您在左侧有一个带有可拖动元素（这些可能是图像）的容器，在右侧有一个容器，您可以在其中放置这些可拖动元素。在从左到右放置一个元素时，您将看到一个警报，其中显示了被删除元素的 id 以及从中删除项目的容器。

如果您想知道从哪个元素中拖动了一个项目，您可以通过在放置时访问被拖动元素的父元素来获取它，因为拖动元素只会改变其相对于其容器的位置。

```
$(function() {
      $( ".draggable" ).draggable();

        $( ".droppable, #droppable-inner" ).droppable({
            activeClass: "ui-state-hover",
            hoverClass: "ui-state-active",
            drop: function( event, ui ) {
                alert(ui.draggable.attr('id') + ' was dropped from ' + ui.draggable.parent().attr('id'));
                $( this ).addClass( "ui-state-highlight" );

                // Move the dragged element into its new container
                ui.draggable.attr('style','position:relative');
                $(this).append(ui.draggable);

                return false;
            }            
        });
  });
```

```
.draggable { 
  width: 100px;
  padding: 0.5em;
  margin: 10px;
  border: 1px solid #000;
  background-color: #fff;
}

.droppable {
  width: 230px;
  min-height: 120px;
  padding: 0.5em;
  float: left;
  margin: 10px;
  border: 1px solid #000;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<link href="http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css" rel="stylesheet"/>
<script src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script>
<div id="container1" class="droppable">

    <div id="d1" class="draggable" class="ui-widget-content">
        <p>Drag me to my target</p>
    </div>

    <div id="d2" class="draggable" class="ui-widget-content">
        <p>Drag me to my target</p>
    </div>

    <div id="d3" class="draggable" class="ui-widget-content">
        <p>Drag me to my target</p>
    </div>

</div>

<div id="container2" class="droppable ui-widget-header">
    <p>Drop here!</p>
</div>

<div id="container3" class="droppable ui-widget-header">
    <p>Drop here!</p>
</div>
```

# ruby-on-rails - unescape html在rails中呈现

> ID：12829224
> 
> 赞同：0
> 
> 时间：2012-10-10T22:10:55.660
> 
> 标签：ruby-on-rails

现在，我有一个返回一些 html 并替换页面内容的部分。但对于我的生活，我无法让它摆脱渲染。

```
>     render(:partial => @partial)
>     => "<table>\n  <tr>\n    <td>\n      <input id=\"target_columns_\" name=\"target_columns[]\" type=\"checkbox\" value=\"id\" />\n     
> <label for=\"id\">Id</label><br />\n      <input
> id=\"target_columns_\" name=\"target_columns[]\" type=\"checkbox\"
> value=\"email\" />\n      <label for=\"email\">Email</label><br />\n  
> </td>\n    <td>\n      <input id=\"target_columns_\"
> name=\"target_columns[]\" type=\"checkbox\" value=\"created_at\" />\n 
> <label for=\"created_at\">Created at</label><br />\n      <input
> id=\"target_columns_\" name=\"target_columns[]\" type=\"checkbox\"
> value=\"updated_at\" />\n      <label for=\"updated_at\">Updated
> at</label><br />\n    </td>\n  </tr>\n</table>\n" 
```

我已经尝试过原始的 html_safe ... 似乎没有任何效果。我只是希望它是“”我想。现在，当我在页面上替换它时，由于某种原因，它实际上呈现为文本字段。

这是替换页面内容并进行渲染的JS。

```
$("#field-list").html('<%= j(render(:partial => @partial)) %>'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T22:15:33.763

我最近遇到了同样的问题，一个好的方法是通过`content_tag`. 请检查此主题：

[Rails 中的助手 - 构建 html 字符串时最好的方法是什么？](https://stackoverflow.com/questions/12309338/helpers-in-rails-whats-the-best-approach-when-building-the-html-string)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-24T10:12:42.807

```
= raw html 
```

或者：

```
= html.html_safe 
```

如果你使用haml，你可以`!=`尝试一下

```
!= render(:partial => @partial) 
```

代替

```
= render(:partial => @partial) 
```

# nosql - 插入带计数的日志

> ID：12829227
> 
> 赞同：1
> 
> 时间：2012-10-10T22:11:05.233
> 
> 标签：nosql, redis

在我正在处理的网站中，有一个搜索 API。我想用 Redis 记录所有活动，但我不知道如何将这些数据存储到 redis 中。应该有搜索查询和计数，并且可以按计数排序以查看搜索次数最多的查询。如果您能告诉我正确的方法，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T15:22:55.283

使用排序集。

```
redis 127.0.0.1:6379> ZINCRBY searches 1 foo
"1"
redis 127.0.0.1:6379> ZINCRBY searches 1 bar
"1"
redis 127.0.0.1:6379> ZINCRBY searches 1 baz
"1"
redis 127.0.0.1:6379> ZINCRBY searches 1 foo
"2"
redis 127.0.0.1:6379> ZINCRBY searches 1 foo
"3"
redis 127.0.0.1:6379> ZINCRBY searches 1 bar
"2"
redis 127.0.0.1:6379> ZREVRANGE searches 0 -1 WITHSCORES
1) "foo"
2) "3"
3) "bar"
4) "2"
5) "baz"
6) "1" 
```

# iphone - 多个按钮按下导致 ios cocoa 中的单个操作

> ID：12829228
> 
> 赞同：0
> 
> 时间：2012-10-10T22:11:09.150
> 
> 标签：iphone, ios, xcode, timer

标题说多次按下按钮，但实际上我正在寻找堆叠多个事件。我有一个聊天应用程序，可以一次接收许多聊天消息。在我的 messageReceived 函数中，我想滚动到最近聊天的底部。我遇到的问题是有时许多消息（50+）可以同时进入。我已经确定如果执行 50 次滚动到底部是一个巨大的性能瓶颈，但如果仅在收到消息后执行，效果很好。

我想在我的 messageReceived 函数中延迟，比如 0.1 秒后滚动到底部。但我希望在这 0.1 秒内发生的所有新聊天消息都“堆叠”，并且只发出一个滚动到底部的请求。

我认为设置和取消计时器的系统可以解决这个问题，但是我做错了。有没有更好的方法来实现这一点！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T23:06:40.840

如果您正在设置延迟的“滚动到底部”请求，例如

```
[[self myObject] performSelector:@selector(scrollToBottom:) 
                      withObject:nil 
                      afterDelay:0.1]; 
```

然后您可以使用取消命令，例如

```
[NSObject cancelPreviousPerformRequestsWithTarget:[self myObject]
                                        selector:@selector(scrollToBottom:)
                                      object:nil]; 
```

那么你`scrollToBottom:`被调用的唯一时间是它没有被取消（所以，最后一次）。现在你不需要计时器了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T22:28:51.857

不是一个精确的解决方案，而是可以引导正确方向的东西。您可以在 .h 文件中设置一个标志，并使用它来确定该方法是否已被调用。

在`init`方法中设置标志为，

```
self.didCallScrollToBottomMethod = FALSE; 
```

在您的`scrollToBottomMethod`中，检查条件为，

```
if (!self.didCallScrollToBottomMethod) {
   self.didCallScrollToBottomMethod = TRUE;
   //set the timer here to scroll after 0.1 seconds
} 
```

滚动完成后，在计时器方法中，将标志设置为，

```
self.didCallScrollToBottomMethod = FALSE; 
```

# oracle - 是什么导致此 PL/SQL 函数中的数值溢出？

> ID：12829231
> 
> 赞同：4
> 
> 时间：2012-10-10T22:11:26.790
> 
> 标签：oracle, plsql, overflow, numeric

我可以在 Oracle 10.2 上毫无问题地运行此命令：

```
SQL> select instr(unistr('foo'), chr(4050596145)) as hazit from dual;

     HAZIT
----------
     0 
```

所以我尝试将它封装成一个函数：

```
CREATE OR REPLACE FUNCTION hazit(string IN VARCHAR2) RETURN INTEGER
AS
BEGIN
    RETURN instr(unistr(string), chr(4050596145));
END;
/

Function created. 
```

但是当我尝试使用它时出现数字溢出错误：

```
SQL> select hazit('foo') FROM DUAL;
select hazit('foo') FROM DUAL
       *
ERROR at line 1:
ORA-01426: numeric overflow
ORA-06512: at "DWHEELER.HAZIT", line 4 
```

是什么赋予了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T11:18:03.117

我没有解释，但这似乎有效：

```
CREATE OR REPLACE FUNCTION hazit(string IN VARCHAR2) RETURN NUMBER IS
i number;
BEGIN
    select instr(unistr(string), chr(4050596145))
      into i from dual;
    return i;
END;
/ 
```

[这](http://www.sqlfiddle.com/#!4/c163a/1)是一个小提琴

# javascript - jquery将每个元素和setInterval与共享类结合起来

> ID：12829235
> 
> 赞同：1
> 
> 时间：2012-10-10T22:11:48.480
> 
> 标签：javascript, jquery

我有一系列带有“bloglink”类的链接。

他们有一个与之关联的点击事件——但此时这无关紧要。我正在尝试循环浏览它们并每 X 秒触发一次点击事件。这就是我所在的位置：

```
$('a.bloglink').each(function(){
    var $bl = $(this);
    setInterval(function(){
        $bl.trigger('click')
    },2000);
}) 
```

但它只是一次触发所有这些的点击事件。

有小费吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T22:33:06.703

你可以这样做：

```
(​function Loop()​{
    var arry = $("a.bloglink").get();
    var traverse = function(){
        $(arry.shift()).trigger('click');

        if (arry.length)
            setTimeout(traverse, 2000);
    };
    setTimeout(traverse,2000);
})(); 
```

你可以在这里看到它的作用：http: [//jsfiddle.net/Shmiddty/B7Hpf/](http://jsfiddle.net/Shmiddty/B7Hpf/)

要重新开始，您只需添加一个 else 案例：

```
(​function Loop()​{
    var arry = $("a.bloglink").get();
    var traverse = function(){
        $(arry.shift()).trigger('click');

        if (arry.length)
            setTimeout(traverse, 2000);
        else
            Loop(); // Do the whole thing again
    };
    setTimeout(traverse,2000);
})(); 
```

见这里：http: [//jsfiddle.net/Shmiddty/B7Hpf/1/](http://jsfiddle.net/Shmiddty/B7Hpf/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T00:13:40.133

创建一个函数来设置计时器以运行您的代码，清除计时器，然后在下一个元素上调用自身......

```
function processNext($current)
{
    $h = setInterval(function() {
        $current.css('color', 'green');//do your business here
        clearTimeout($h);
        if ($current.next('a.blah').size()>0)
        {
            processNext($current.next('a.blah'));
        }
    }, 750);
}
processNext($('a.blah').eq(0)); 
```

见这里：http: [//jsfiddle.net/skeelsave/6xqWd/2/](http://jsfiddle.net/skeelsave/6xqWd/2/)

# vb.net - 新行的字符串替换不适用于 vb.net 中的 json 字符串

> ID：12829237
> 
> 赞同：3
> 
> 时间：2012-10-10T22:11:52.110
> 
> 标签：vb.net, json, replace

我进行了很多搜索以找出解决问题的方法，但似乎没有任何效果。我正在尝试将一些文本从数据库加载到页面中。在加载之前，我将其解析为 JSON 字符串。

我需要从数据库加载的文本是

> 数量：1 型号：MX-M350UCT \n 数量：1 型号：MX-M350UCT 附件：电源滤波器

最初，当我尝试解析它时，它作为意外表达式抛出异常，我认为这是换行符的原因。所以我在下面插入了一段代码

```
str = Replace(str, vbCrLf, "\n") 
```

现在我能够解析并且输出是

> 数量：1 型号：MX-M350UCT 数量：1 型号：MX-M350UCT

问题是我希望文本以与数据库中相同的格式显示。我尝试使用, , ... 和互联网上建议的其他选项更改`'\n'`上述代码，但似乎没有任何效果，我得到的输出与一个长文本而不是两个单独的文本相同。非常感谢任何建议或想法。`"\\n"``""``"<br />"`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T22:21:47.857

`\n`必须替换为`\\n`. 反斜杠需要转义才能用于 JSON 字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T20:37:36.073

既然你提到了剑道网格，这就是你需要的。

[http://www.kendoui.c​​om/forums/ui/grid/line-breaks-in-grid-cell.aspx](http://www.kendoui.com/forums/ui/grid/line-breaks-in-grid-cell.aspx)

# php - 使用 GD 将其渲染为图像

> ID：12829238
> 
> 赞同：0
> 
> 时间：2012-10-10T22:12:04.643
> 
> 标签：php, jquery, jquery-ui, imagemagick, gd

我正在为我的一个客户开发一个自定义偷窃创建器。您可以在以下位置看到此创建者：

[http://faithpointdallas.com/stoles/page/customStole](http://faithpointdallas.com/stoles/page/customStole)

如果你去创造一个带有各种希腊字母的披肩，你会看到定制的会是什么样子。现在我需要使用 GD 或 ImageMagick 将所有希腊字母、文本和图像渲染为一张图像。有可能吗？如果有，你的想法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T22:38:47.017

您应该能够使用`imagettftext`GD 中的图像将文本应用到图像（[此处的文档](http://php.net/manual/en/function.imagettftext.php)）：

```
imagettftext ( resource $image , float $size , float $angle , int $x , int $y , int $color , string $fontfile , string $text ) 
```

使用 javascript 捕获字母相对于它们所在图像的 X 和 Y 坐标，然后将这些坐标（以及字母本身）发送到 PHP 脚本中。

如果您遇到 Unicode 问题（假设您使用的是希腊字母），请查看此问题的选定答案[，](https://stackoverflow.com/questions/198007/php-function-imagettftext-and-unicode)这应该可以帮助您解决问题。

# java - 如何在循环内传输关键事件

> ID：12829239
> 
> 赞同：0
> 
> 时间：2012-10-10T22:12:08.443
> 
> 标签：java, loops, keyevent

我有个问题。

在我的程序中，我有 2 个课程：

1.  主机

    ```
    public class MainFrame extends javax.swing.JFrame 
    {

        Logika logika;

        .
        .
        .

        private void przyciskKeyPressed(java.awt.event.KeyEvent evt) {
            // TODO add your handling code here:
            char znak = evt.getKeyChar();
            int kod = evt.getKeyCode();

            if(kod==KeyEvent.VK_A)
            {
                logika.key_pressed("a");
            }
        }

    } 
    ```

2.  逻辑卡

    ```
    public class Logika {

        .
        .
        .

        Calendar cal = Calendar.getInstance();

        public void start()
        {
            gra_rozpoczeta=true;
            punkty=0;
            liczba=1;
            x[0]=251;
            y[0]=301;

            cal = Calendar.getInstance();
            czas=cal.getTimeInMillis();
            while(gra_rozpoczeta==true)
            {   
                cal=Calendar.getInstance();

                dif=dif-(int)(cal.getTimeInMillis()-czas);
                if(dif<0)
                    akcja();
                try {
                    Thread.currentThread().sleep(50);
                } catch (InterruptedException ex) {
                    Logger.getLogger(Logika.class.getName()).log(Level.SEVERE, null, ex);
                }
                czas=cal.getTimeInMillis();
            }

        }

        private void akcja()
        {
            dif=500;

            liczba++;
            if(liczba==10)
                key_presed=true;
            if(key_presed==true)
                gra_rozpoczeta=false;
        }

        public void key_pressed(String s)
        {
            key_presed=true;
            key=s;
        }

    } 
    ```

使用这种方法我有问题。

在最后 5 秒时循环，但如果我按“a”键，我想提前停止它。

现在它正在工作：-程序开始，-循环最后 5 秒（我按“a”）-程序仅在循环后响应按下的键

有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T22:22:49.037

您的代码示例有点缺乏，但我猜这种行为是由于线程使用不当造成的。当您的大型机启动循环时，它不会在新线程中启动它，而是在主线程中启动它，主线程也在监听键盘输入。因此，当循环运行时，键盘输入被阻止，并且仅在循环完成后处理。

如果你想在不同的线程中使用 logica，你必须把它改成这样：

```
public class Logica implements Runnable {
    [...]
    @Override
    public void run() {
        [do loop]
    }
} 
```

并将其作为 MainFrame 中的新线程启动，如下所示：

```
//start the loop as a new thread...
final Thread thread = new Thread(logika);
thread.start();
//keep listening for keyboard input in the main thread 
```

# android - EditText 区分大小写

> ID：12829246
> 
> 赞同：4
> 
> 时间：2012-10-10T22:12:28.130
> 
> 标签：android, if-statement, android-edittext, case-sensitive

```
 et = (EditText) findViewById(R.id.editText1);
    iv = (ImageView) findViewById(R.id.imageView1);
 Case R.id.ibGo:
    String str = et.getText().toString();
        if (str.contentEquals("password")){
            Intent levelTwo = new Intent (
                "com.xxx.xxx.LEVELTWO");
            startActivity(levelTwo);
        } else if (str.contentEquals("music")){

            Intent levelFour = new Intent (
                "com.xxx.xxx.LEVELFOUR");
            startActivity(levelFour);  
        } else {
            vib.vibrate(300);
            iv.setVisibility(View.VISIBLE);
        }
        break; 
```

当我在模拟器的编辑文本中写“密码”时，模拟器按预期工作。但是当我（例如）写“密码”（大写 P）时，应用程序意外停止。

我该怎么做才能使它不会在大写字母上失败？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T22:15:19.353

我认为你的问题和你的问题是两件不同的事情，所以：

> 我该怎么做才能使它不对大写字母做出反应，如何使它不区分大小写？

您可以使用`equalsIgnoreCase`( `str.equalsIgnoreCase("password")`) 使比较不区分大小写，但我认为您的问题在这里：

> 但是，当我例如写“密码”（大写 P）时，应用程序意外停止..

这可能是由于`else`块中的问题，看起来要么是空的，`vib`要么`iv`是空的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T22:18:43.673

字符串区分大小写。

代替

```
if (str.contentEquals("password")){
//do something
} 
```

做这个！！

```
if (str.equalsIgnoreCase("password")){
//do something
} 
```

# php - 通过 Objective-C HTTP Post 上传照片

> ID：12829248
> 
> 赞同：3
> 
> 时间：2012-10-10T22:12:42.520
> 
> 标签：php, objective-c, http, ios5

我正在发送一张构建 HTTP POST 的图片，如下所示：

```
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
[request setURL:[NSURL URLWithString:url]];
[request setCachePolicy:NSURLRequestReloadIgnoringLocalCacheData];
[request setHTTPShouldHandleCookies:NO];
[request setTimeoutInterval:30];
[request setHTTPMethod:@"POST"];

NSString *boundary = @"801f6dd4cd17";
NSString *contentType = [NSString stringWithFormat:@"multipart/form-data;boundary=------------------------------%@", boundary];

NSMutableDictionary *headerFieldsDict = [[ NSMutableDictionary alloc] init];
[ headerFieldsDict setObject:contentType forKey:@"Content-Type"];

[request setAllHTTPHeaderFields:headerFieldsDict];

NSMutableData *body = [NSMutableData data];

//---------- FIRST IMG
UIImage* imgLittle = [realImgButton imageForState:UIControlStateNormal];//thumImg.image;
NSData *imageData = UIImageJPEGRepresentation(imgLittle, 1.0);
if (imageData) {
    [body appendData:[[NSString stringWithFormat:@"------------------------------%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];

    [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"image\"; filename=\"img.jpg\"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

    [body appendData:[[NSString stringWithString:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

    [body appendData:imageData];
    [body appendData:[[NSString stringWithFormat:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
}
[body appendData:[[NSString stringWithFormat:@"------------------------------%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];

[request setHTTPBody:body]; 
```

但是服务器拒绝上传图像（它给出了一个软件错误，似乎 HTTP 帖子没有很好地解析），我关于服务器的唯一信息是这个客户端代码在 php 中运行良好：

```
$data['file'] = "@".$file;
$header[] = "Expect: ";
print_r($data);
$ch = curl_init();
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_HTTPHEADER, $header );

//curl_setopt($ch, CURLOPT_URL, 'http://xxxxxx:yyy/');
curl_setopt($ch, CURLOPT_ENCODING, 'gzip,deflate');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
$response = curl_exec($ch);
curl_close($ch);
$xml = simplexml_load_string($response);
$url = strip_tags($xml->dict->string[3]->asXML());
return $url; 
```

有任何想法吗？或者我在 obj-c 代码上哪里错了？我尝试分析生成的 HTTP post 语句，它似乎与 php 代码生成的语句相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T19:09:29.070

您可以使用[ASIHTTPRequest](http://allseeing-i.com/ASIHTTPRequest/How-to-use)框架：我的项目之一是使用它在服务器上上传图像：

```
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:yourURL];
[request addPostValue:NSString  forKey:@"KEY"];
[request addPostValue:NSString forKey:@"KEY"];
... any post value you need

[request addData:image withFileName:[name of the file]
    andContentType:@"image/jpeg" forKey:@"KEY"]; 
```

希望这有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T18:31:14.200

你发布的代码看起来很熟悉，所以我检查了一个我一直在发布图像的旧应用程序，我们显然是从同一来源获得的代码（我不记得了）。我的几乎是一样的，除了边界字符串，我去掉了多余的字符串`[NSString stringWithFormat:]`

```
[request setHTTPMethod:@"POST"];

NSString *boundary = @"0xKhTmLbOuNdArY"; 

NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];

[request addValue:contentType forHTTPHeaderField: @"Content-Type"];

NSMutableData *body = [NSMutableData data];

[body appendData:[[NSString stringWithFormat:@"--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];

[body appendData:[@"Content-Disposition: form-data; name=\"image\"; filename=\"image.jpg\"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[@"Content-Type: application/octet-stream\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:myImageData];
[body appendData:[[NSString stringWithFormat:@"r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];

[request setHTTPBody:body]; 
```

这段代码对我来说很好，所以假设你的图像数据没有问题，你的边界可能就是查看的地方。我的图像数据也是从`UIImageJPEGRepresentation`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T15:51:40.777

我不确定您的代码有什么问题，但我有两个想法：

1.  我认为您可能需要`\r\n`在 结尾处再添加一个`Content-Disposition`，如下所示：

    ```
    [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"image\"; filename=\"img.jpg\"\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]]; 
    ```

2.  使用`UIImageJPEGRepresentation`并将您的内容类型设置为`application/octet-stream`可能是问题所在。`[NSData dataWithContentsOfFile:]`可能更适合`application/octet-stream`并且`image/jpeg`可能更适合`UIImageJPEGRepresentation`. 这只是一个猜测。

如果你真的被难住了，你可以使用[AFNetworking](https://github.com/AFNetworking/AFNetworking)（它比 ASIHTTPRequest 更新且重量更轻）。或者您至少可以查看他们的代码以了解他们如何处理文件上传。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T22:24:51.313

你可能想去`-addValue:forHTTPHeaderField:`而不是这样做：

```
NSMutableDictionary *headerFieldsDict = [[ NSMutableDictionary alloc] init];
[ headerFieldsDict setObject:contentType forKey:@"Content-Type"];

[request setAllHTTPHeaderFields:headerFieldsDict]; 
```

您真正需要做的就是在请求中添加一个标头，但您实际上是在使用上面的代码清除所有现有的标头。

# crystal-reports - 语言的水晶报表设置

> ID：12829249
> 
> 赞同：0
> 
> 时间：2012-10-10T22:12:54.887
> 
> 标签：crystal-reports, report

我有一份我运行的报告，并根据 {race} 字段提出了不同的字符。例如，如果 {race} = Chinese 在报告查看器中，它会翻译“中文：中文：中文字符，对于任何其他种族，它也是如此。

![报告示例](../Images/bf75a1f3ddf395db793fd210f9c9195e.png)

这是水晶报表中的一个设置，我可以将其更改为。此外，如果我使用 Crystal 在另一台 PC 上运行报告运行良好。Crystal Reports XI 中导致此问题的设置可能是什么

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-26T10:07:22.923

以下是步骤：

单击开始 > 控制面板。双击区域和语言设置。将当前语言更改为首选语言。单击应用 > 确定。如有必要，重新启动操作系统。重新启动 Crystal Reports 设计器。用户界面语言已更改。

# - 开放科学

> ID：12829253
> 
> 赞同：0
> 
> 时间：2012-10-10T22:13:15.010
> 
> 标签：

由 R Open Science（简称 rOpenSci）组织创建的 R 包，可与科学数据存储库、期刊和科学指标提供者进行交互。

# jquery - 如何将所有子元素的填充和边距设置为 0

> ID：12829257
> 
> 赞同：3
> 
> 时间：2012-10-10T22:13:23.630
> 
> 标签：jquery, css

这两个都试过了，都不行。这似乎很简单，但在这个主题上找不到任何东西。

CSS：

```
#element * { padding: 0; margin 0; } 
```

jQuery：

```
$("#element").children("*").css("padding", "0");
$("#element").children("*").css("margin", "0"); 
```

先感谢您。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-10T22:18:28.160

如果你要走 jQuery 路线，你想使用[.find 。](http://api.jquery.com/find/).children 只进了一层。

`$('#element').find('*').css('padding', '0');`

[http://jsfiddle.net/gromer/yg3CL/1/](http://jsfiddle.net/gromer/yg3CL/1/)

纯 CSS：

```
body * {
    margin: 0;
    padding: 0;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-10T22:16:39.563

这不起作用吗？

```
$("#element *").css("padding", "0");
$("#element *").css("margin", "0"); 
```

该`children`方法仅沿 DOM 树向下移动一层，因此您只会在直接后代上设置 css。但是该`find`方法会起作用`$("#element")find('*').css("padding", "0");`

# node.js - 如何访问 express 3 路由器中的 http.Server.connection 属性？

> ID：12829258
> 
> 赞同：1
> 
> 时间：2012-10-10T22:13:24.487
> 
> 标签：node.js, express, connect

我想在我的 express 3 路由中使用 http.Server.connections？是不是再也没有办法获得了？

我应该只是 app.set('server', server);

express.createServer() 已弃用，express 应用程序不再继承自 http.Server

```
var app = express(),
server = http.createServer(app);
server.listen(8080);
...
module.exports = function (app) {

    app.get('/connections', function (req, res) {
        res.send({
            connections: app.connections 
            // app != http.Server in express 3
        });
    });

}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T11:09:18.500

而不是`app.connections`你需要发送`server.connections`，因为你已经使用过：

`server = http.createServer(app);`

所以你的代码变成：

```
app.get('/connections', function (req, res) {
    res.send({
        connections: server.connections 
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T22:33:32.637

```
app.locals.connections = app.connections 
```

然后在您的回复中：

```
res.send({ connections: res.locals.connections}); 
```

# .net - 如何使用预处理指令检查应用程序是否在 Visual Studio 中运行？

> ID：12829260
> 
> 赞同：0
> 
> 时间：2012-10-10T22:13:34.107
> 
> 标签：.net, debugging, preprocessor

我需要让用户能够向我发送可能的异常消息，我通过将 main 方法包装到 try-catch 中来显示这些消息，但这也迫使我看到该自定义消息而不是 Visual Studio 的异常窗口。

这就是为什么我需要以某种方式使用一些预处理指令来在 VS 中运行未包装的方法并在不包装时运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T22:19:45.177

```
main(){
try {
// your app code here
} 
catch (Exception ex){
if(System.Diagnostics.Debugger.IsAttached)
{
    throw;
  } else {
  // your exception handling here.
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T22:17:42.130

正如 Tetsujin no Oni 建议的那样，使用`System.Diagnostics.Debugger.IsAttached` 如果此布尔属性返回 true，则 Visual Studio IDE（或其他一些调试器！）附加到进程，在这种情况下 - 假设您在 Visual Studio 下运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T12:17:27.613

无需使用预处理指令——可以通过在`if`语句中检查附加的调试器来完成：

```
static void Main(string[] args)
{
    if (System.Diagnostics.Debugger.IsAttached)
    {
        /* application code */
    }
    else
        try
        {
            /* application code */
        }
        catch (Exception ex)
        {                
            // custom exception handling
        }
} 
```

# python - 创建 Python .exe 文件：py2exe 无效图像错误

> ID：12829261
> 
> 赞同：2
> 
> 时间：2012-10-10T22:13:37.357
> 
> 标签：python, wxpython, py2exe

我想创建一个`.exe`文件。我将 Python 2.7.3 与 wxPython 一起用于 GUI。我已经安装`py2exe`了 Python 2.7 并尝试按照[http://www.py2exe.org/index.cgi/Tutorial](http://www.py2exe.org/index.cgi/Tutorial)`.exe`上的教程创建一个文件

当我尝试运行我创建的`.exe`文件时，出现以下错误：

```
File "wx\_gdi.pyc",line823, in BitmapFromImage wx._core.PyAssertionError: 
C++ assertion "image.OK()" failed at ..\..\src\msw\bitmap.cpp(802) in 
wxBitmap::CreateFromImage(): invalid image 
```

所以我查看了我的代码，以下行导致了问题：

```
self.bmpSun = wx.StaticBitmap(self, wx.ID_ANY, wx.BitmapFromImage(wx.Image('images/sun.gif', wx.BITMAP_TYPE_ANY)), pos = (0,0)) 
```

当我浏览到源文件夹并`main.py`自己运行文件时，我的应用程序运行良好。到目前为止，我还没有在网上找到任何帮助。任何人都可以解决这个问题/建议可靠的替代方案`py2exe`吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T22:26:19.663

出错的行是在`Images`文件夹中查找图像。这是相对于`.exe`由`py2exe`. 因此，您需要确保该文件夹存在于相对于 exe 的正确位置，并且其中填充了您要使用的图像。你可以通过两种方式做到这一点。要么将文件夹复制到 exe 将驻留的位置，要么`data_files`在生成`.exe`. 这是我的一个设置脚本的相关部分，稍后显示`data_files`元组列表和`data_files`关键字 arg 的使用：

```
data_files = [('Images', glob('Images/*.*')),
                            ]

includes = ['win32com.decimal_23', 'datetime']

excludes = ['_gtkagg', '_tkagg', 'bsddb', 'curses',  'pywin.debugger',
            'pywin.debugger.dbgcon', 'pywin.dialogs', 'tcl',
            'Tkconstants', 'Tkinter', 'unittest']
packages = []

dll_excludes = ['libgdk-win32-2.0-0.dll', 'libgobject-2.0-0.dll', 'tcl84.dll',
                'tk84.dll','MSVCP90.dll']

setup(
    data_files = data_files,
    options = {"py2exe": {"compressed": 2,
                          "optimize": 2,
                          "includes": includes,
                          "excludes": excludes,
                          "packages": packages,
                          "dll_excludes": dll_excludes,
                          "bundle_files": 1,
                          "dist_dir": "dist",
                          "xref": False,
                          "skip_archive": False,
                          "ascii": False,
                          "custom_boot_script": '',
                         }
              },
    zipfile = None,
    windows = [filename]
    ) 
```

# sql - MS access 中所有记录的更新年份

> ID：12829265
> 
> 赞同：1
> 
> 时间：2012-10-10T22:14:09.083
> 
> 标签：sql, ms-access, ms-access-2010

我有两个日期/时间列可供访问`LAST_ORDER_DT`，`SALE_DT` 我想将所有销售`dates(SALE_DT)`的年份更新为`LAST_ORDER_DT`

我尝试了以下语句，它抛出了语法错误。

```
UPDATE ORDERS_TEMP SET YEAR(SALE_DT)=YEAR(LAST_ORDER_DT) 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T00:35:53.770

据我了解您的问题，您可能有 a `SALE_DT`of`#2011-09-30#`和 a `LAST_ORDER_DT`of `#2012-10-10#`，并且您想`SALE_DT`更改为`#2012-09-30#`.

如果是这种情况，您可以使用该函数从适当的年、月和日值`DateSerial()`进行重构。`SALE_DT`

```
UPDATE ORDERS_TEMP
SET SALE_DT =
    DateSerial(
        Year(LAST_ORDER_DT),
        Month(SALE_DT),
        Day(SALE_DT)
        ); 
```

如果一天中的时间是您的`SALE_DT`价值观的午夜，那应该可以工作。如果一天中的时间是其他时间，您也需要添加该部分。

```
UPDATE ORDERS_TEMP
SET SALE_DT =
    DateSerial(
        Year(LAST_ORDER_DT),
        Month(SALE_DT),
        Day(SALE_DT)
        )
    + TimeValue(SALE_DT); 
```

如果`SALE_DT`并且`LAST_ORDER_DT`可以包含 Null，则应从`UPDATE`查询中排除这些行：

```
WHERE SALE_DT Is Not Null AND LAST_ORDER_DT Is Not Null 
```

# jquery - jQuery 插件在 MVC 中捆绑时失败

> ID：12829267
> 
> 赞同：4
> 
> 时间：2012-10-10T22:14:16.623
> 
> 标签：jquery, jquery-ui, asp.net-mvc-4, bundling-and-minification

我有一个使用 jquery、jquery ui、jquery 验证和[这个](http://trentrichardson.com/examples/timepicker/)datetimepicker 插件的 MVC 4 应用程序。这些是使用 MVC 中的捆绑工具添加的。

一切正常，只需使用 F5 运行它。但是，当我将其部署到服务器时，插件中某处出现脚本错误（对象不支持此操作）。如果我在本地调试它并在 web.config 中设置，那么它会失败并出现同样的错误。

一个区别是，当它在调试中运行时，它没有被捆绑。这会导致问题吗？发生了什么可能导致此错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T03:03:25.070

我偶然发现了同样的问题，然后通过将`.min.js`文件重命名为`.js`（删除`.min`）解决了问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T02:40:41.743

我遇到了同样的问题，并设法隔离了导致捆绑输出中发生错误的代码。

[我向作者发送了一个带有修复的拉取请求](https://github.com/trentrichardson/jQuery-Timepicker-Addon/pull/540)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T12:10:50.217

使用捆绑包时的自动缩小会导致问题。

如果我`JQuery`直接在我的`_layout.cshtml`文件中引用：

```
@Scripts.Render("~/Scripts/jquery-1.8.2.min.js") 
```

问题消失了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-16T12:34:58.810

一个解决方案甚至认为这是一个老问题

为确保不会发生这种情况，只需确保所有 js 函数都以 ; 结尾。

```
function someName(){

}; <- the important part! 
```

或者您可以删除 .js 文件中的所有注释。

# sql - 如何修改此查询以获取分页？

> ID：12829270
> 
> 赞同：1
> 
> 时间：2012-10-10T22:14:45.677
> 
> 标签：sql, tsql, pagination, sql-server-2008-r2, row-number

这是一个非常复杂的查询，所以我在这里遇到了困难。如果你帮助我，我很感激。

```
select AvgLevel,TotalCount,tblPokedex.PokemonId,Name,Type1,Type2,Hp,tblPokedex.Attack,tblPokedex.Defense,tblPokedex.SpAttack,tblPokedex.SpDefense,tblPokedex.Speed,(Hp+tblPokedex.Attack+tblPokedex.Defense+tblPokedex.SpAttack+tblPokedex.SpDefense+tblPokedex.Speed) as TotalStats 
from tblPokemonStats,tblAvailablePokemons,tblPokedex 
left join tblUsersPokemons on tblPokedex.PokemonId=tblUsersPokemons.PokemonId 
where tblPokemonStats.PokemonId=tblPokedex.PokemonId 
group by tblPokedex.PokemonId,tblPokedex.Name,tblPokedex.Type1,tblPokedex.Type2,tblPokedex.Hp,tblPokedex.Attack,tblPokedex.Defense,tblPokedex.SpAttack,tblPokedex.SpDefense,tblPokedex.Speed,tblPokemonStats.AvgLevel,tblPokemonStats.TotalCount  
order by PokemonId asc 
```

好吧，我想做的是例如在前 100 名和 150 名之间进行选择

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T22:27:11.597

这是一种方法-添加`row_number`列并对其进行过滤：

```
select AvgLevel /*...*/
from (
    select AvgLevel /*...*/, row_number() over (order by PokemonId) rownum 
    from tblPokemonStats,tblAvailablePokemons,tblPokedex 
    left join tblUsersPokemons on tblPokedex.PokemonId=tblUsersPokemons.PokemonId 
    where tblPokemonStats.PokemonId=tblPokedex.PokemonId 
    group by /* etc ... */
) A
where A.rownum > 100 and A.rownum <= 150 
```

`row_number`听起来像 - 它为你的行编号。

这是另一种可能性 - 假设您想要 X 到 Y 行。您可以`TOP Y`根据您的顺序选择行。然后使用该子查询并`TOP Y-X`根据相反的顺序选择。假设 X = 100 且 Y = 150：

```
select top 50 *
from (
    select top 150 PokemonId
    from tblPokemonStats
    order by PokemonId
) A
order by PokemonId desc 
```

至于性能，我不确定哪个会更好。我的直觉说，可以说这种`ORDER BY`方法更适合靠近“前”的页面，但`row_number()`更适合后面的页面（高 X 和 Y）。这只是一个猜测——运行一些测试，看看什么对你有用。

# iphone - iPhone 应用程序如何让用户保持登录状态

> ID：12829271
> 
> 赞同：3
> 
> 时间：2012-10-10T22:14:49.487
> 
> 标签：iphone, authentication

许多应用程序让用户保持登录状态，直到用户手动注销，如 facebook、Dropbox 等。

我想知道他们是如何实现的？可能有几种方法：

1）他们是否将用户名和密码存储在本地存储中，并在长时间再次打开应用程序时自动登录用户？

2）或者他们是否从服务器获得了一个长期存在的令牌，一旦用户第一次登录，应用程序就会从服务器获得一个令牌，后来他们只使用这个令牌？在用户手动从应用程序注销之前，令牌将一直有效。

对于#1，它仅适用于本机登录，如果应用程序支持“使用 facebook 或 twitter 登录”，它将无法正常工作。

所以我只想了解人们是如何实现这个功能的？有文章讨论吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T22:34:08.797

Facebook 和 Twitter 等大多数服务都使用 OAuth 来管理用户会话。

我使用这个外部框架...... [https://github.com/nxtbgthng/OAuth2Client](https://github.com/nxtbgthng/OAuth2Client)

我花了一些时间阅读和设置才能正确，但现在可以了。

当用户登录时，他们会获得一个包含到期日期的身份验证令牌。当到期日期到来时，系统会自动刷新令牌。

当我向服务器发送请求时，我通过 OAuth 框架发送它，它会自动添加授权。

# c# - C# 如何在 webbrowser 控件中访问 http referer（和 URL）信息

> ID：12829274
> 
> 赞同：3
> 
> 时间：2012-10-10T22:15:12.297
> 
> 标签：c#, webbrowser-control

我在 winforms 应用程序（vs2008，C#）中使用 Web 浏览器控件。

导航到不同页面时，有什么方法可以在 Web 浏览器控件上查看 http 请求和响应标头。

网页浏览器控件页面导航时如何获取网页请求的“Referer”信息？以及如何在后台执行 url？（例如 HTTP 代码 200 和 204 是您在 webbrowser 上看不到导航但已执行的代码，您可以使用 fiddler 之类的工具查看它们）？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T04:04:42.610

尝试此链接以获取 Web 浏览器请求和响应：

[Http-Monitor-for-Webbrowser-Control](http://www.codeproject.com/Articles/157329/Http-Monitor-for-Webbrowser-Control)

[从网络浏览器控制捕获所有请求和响应](https://stackoverflow.com/questions/3494811/capturing-all-requests-and-responses-from-the-web-browser-control)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-15T17:26:35.007

另一种方法是使用[FiddlerCore](http://www.telerik.com/fiddler/fiddlercore)，我发现它非常方便。

# css - 为复杂的流体布局添加上边距时出现问题

> ID：12829276
> 
> 赞同：0
> 
> 时间：2012-10-10T22:15:31.007
> 
> 标签：css, html

首先，查看我拥有的布局的一个工作示例：http: [//jsfiddle.net/EPC8c/2/](http://jsfiddle.net/EPC8c/2/)

我想要做的是为此添加一个上边距。因为我的大部分内容都建立在 100% 的高度上，所以在尝试这个时事情会变得有点奇怪：http: [//jsfiddle.net/EPC8c/1/](http://jsfiddle.net/EPC8c/1/)（固定链接）

流畅的布局现在使页脚被向下推到页面的 0% 或 100% 之后。这可能按预期工作，但我正在尝试找到一种不会导致这种情况的解决方案。

对此的任何帮助将是惊人的。

**HTML**

```
<div id="container">

    <header></header>

    <div id="content"></div>

    <footer></footer>

</div> 
```

**CSS**

```
html, body {
    background: #ff3333;
    margin:0;
    padding:0;
    height:100%;
}

#container {
    position:relative;
    background: #FFF;
    margin: 0 auto;
    width: 200px;
    min-height:100%;
}
header {
    height: 60px;
    background: #888;
}
#content {
    background: #FFF;
    min-height: 200px;
    padding-bottom: 60px; /*FOOTER HEIGHT*/
}

footer {
    position:absolute;
    bottom: 0;
    width: 200px;
    height: 60px;
    background: blue;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T23:03:07.703

这是一个解决方案，由这个问题提供： [CSS 100% height with padding/margin](https://stackoverflow.com/questions/485827/css-100-height-with-padding-margin)

JSFiddle：http:
[//jsfiddle.net/EPC8c/5/](http://jsfiddle.net/EPC8c/5/)

HTML：

```
<div id="wrapper">
    <div id="container">
        <header></header>
        <div id="content">

        </div>
        <footer></footer>
    </div>
</div> 
```

CSS：

```
#wrapper {
display: block;
position:absolute;
height:auto;
bottom:0;
top:0;
left:0;
right:0;
margin-top:20px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T22:57:29.483

诚然，这不是最好的解决方案，它依赖于百分比边距，但一种方法是将它全部包装在一个绝对定位的 div 中，具有百分比上填充和负（相等）百分比底部填充。像这样：

[http://jsfiddle.net/EPC8c/3/](http://jsfiddle.net/EPC8c/3/)

```
<div id="wrapper">
    <div id="container">
        <header></header>
        <div id="content">

        </div>
        <footer></footer>
    </div>
</div> 
```

CSS：

```
#wrapper {
position: absolute;
width: 100%;
height: 90%;    
padding-top: 10%;
padding-bottom: -10%;
} 
```

# xcode - Soundboard 应用程序：只要用户按下按钮，就会播放声音

> ID：12829278
> 
> 赞同：0
> 
> 时间：2012-10-10T22:15:33.690
> 
> 标签：xcode, touch, avaudioplayer

我正在制作一个音板应用程序，我正在使用持续时间超过 30 秒的声音。我通过在 IB 中将我的动作与“触地”事件连接来播放声音，但是一旦开始声音就会继续播放。我在某个按钮中连接了一个“触摸取消”和“触摸外部”事件，该事件应该停止声音，但由于某种原因它没有。任何人都可以为我的问题提供解决方案吗？

---编辑---这是我的代码：

```
-(IBAction)playSound:(id)sender {
     NSString *soundFile;
    soundFile = [[NSBundle mainBundle] pathForResource:@"testSound" ofType:@"mp3"];
    audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:soundFile] error:nil];
    audioPlayer.volume = volumeSlider.value;
    audioPlayer.numberOfLoops = -1;
    [audioPlayer prepareToPlay];
    [audioPlayer play];
}

-(IBAction)stopSound:(id)sender {
    [audioPlayer stop];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T04:55:43.243

我所做的是按下一个按钮（执行我的动作的那个），我钩住了这个动作 1.) Touch Down 2.) Touch Drag Enter

要关闭按钮（取消操作），我添加到按钮 - 1.) Touch Up Inside 2.) Touch Up Outside 3.) Touch Cancel 4.) Touch Drag Exit

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T23:43:13.400

“Touch up outside”是指当按钮被按下并且用户的手指在控件之外移动和抬起时。

听起来您正在寻找“ **Touch up inside** ”活动。

但是，为了确定起见，您应该发布用于启动和停止声音的代码。

# ruby-on-rails - 在 Rails 应用程序中进行 JSON API 调用

> ID：12829284
> 
> 赞同：14
> 
> 时间：2012-10-10T22:15:52.137
> 
> 标签：ruby-on-rails, json, api, wordpress

我们已经部署了一个 Wordpress 实例并安装了一个[JSON API 插件](http://wordpress.org/extend/plugins/json-api/)

使用此插件，您可以发出简单的 HTTP GET 请求，例如：

```
http://www.example.org/?json=get_recent_posts
http://www.example.org/?json=get_post&post_id=47
http://www.example.org/?json=get_tag_posts&tag_slug=banana 
```

并以 JSON 格式返回响应：

```
{
"status": "ok",
"count": 1,
"count_total": 1,
"pages": 1,
"posts": [
{...}} 
```

我的问题是我应该如何在我的 Rails 应用程序中发出这些类型的请求（然后解析返回的 JSON）。我正要开始从头开始写一些东西，但我想有一些很好的现有工具可以管理这样的事情。基本上，当 Ruby 包装器不可用时，我从未尝试连接到 API。你能帮助一个菜鸟如何开始吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-11T00:03:43.523

看起来 HTTParty 可能是你最好的情况。我认为这将是您入门和轻松处理 JSON 的一种简单方法。

将“ [httparty](https://github.com/jnunemaker/httparty) ”添加到您的 Gemfile 和捆绑包中。

```
recent_posts = HTTParty.get "http://www.example.org/?json=get_recent_posts"
puts recent_posts.status, recent_posts.count

recent_posts.posts.each do |post|
  puts post.title #guessing
end 
```

# c++ - Unsigned long long 算术转换为 double

> ID：12829285
> 
> 赞同：0
> 
> 时间：2012-10-10T22:15:53.080
> 
> 标签：c++, geometry, double, trigonometry, unsigned-long-long-int

我正在制作一个接受 3 个无符号长整数的函数，并应用余弦定律来确定三角形是钝角、锐角还是直角三角形。我应该在使用它们之前将变量转换为双精度吗？

```
void triar( unsigned long long& r, 
            unsigned long long x, 
            unsigned long long y, 
            unsigned long long z ) 
{
  if(x==0 || y==0 || z==0) die("invalid triangle sides");

  double t=(x*x + y*y -z*z)/(2*x*y);

  t=acos (t) * (180.0 / 3.14159265);

  if(t > 90) {
    cout<<"Obtuse Triangle"<<endl;
    r=t;

  } else if(t < 90){
    cout<<"Acute Triangle"<<endl;
    r=t;

  } else if(t == 90){
    cout<<"Right Traingle"<<endl;
    r=t;

  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T22:23:39.117

如果您需要浮点运算，通常没有理由不进行转换。但是，也存在从`unsigned long`to的隐式转换`double`，因此您通常也可以完全不进行强制转换。

在许多情况下，包括您的情况，您只能强制转换其中一个参数以`double`仅对特定操作强制算术。例如，

```
double t = (double)(x*x + y*y - z*z) / (2*x*y) 
```

这样，除除法之外的所有操作都以整数算术计算，因此速度略快。演员表仍然是必要的，以避免在除法期间截断。

您的代码包含浮点参数的比较。然而，浮点运算几乎不可避免地会降低准确性。避免有限的准确性，或分析和控制准确性。

*   如果您有足够宽的整数类型可供您使用，则首选整数解决方案，如出色的姐妹答案中所述

*   始终避免从弧度转换为度数，除非呈现给人类

*   从您的数学库头文件中获取 π 的值（不幸的是，这取决于平台 - 尝试`_USE_MATH_DEFINES`+ `M_PI`，或者，如果已经使用 boost 库，则`boost::math::constants::pi<double>()`），或解析地表达它。例如，`std::atan(1)*2`是直角。

*   如果您选择双精度，并且最终的差值小于 ，例如`std::numeric_limits<double>::min() * 8`，您可能无法说出三角形的任何信息，并且您返回的分类基本上是虚假的。（我弥补了 8 的值，你可能会丢失比 3 更多的位。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T00:31:41.377

你有钝角三角形的问题，`x*x + y*y - z*z`在数学上会给出一个否定的结果，然后减少模`2^WIDTH`（其中`WIDTH`的值位数是`unsigned long long`，至少 64 并且可能正是那个）产生一个 - 可能很大 - 正值（或在罕见的情况下）例 0）。那么 的计算结果`t = (x*x + y*y - z*z)/(2*x*y)`可以大于 1，并且`acos(t)`会返回一个 NaN。

用给定的参数类型找出三角形是否是钝角/锐角/直角的正确方法是检查是否`x*x + y*y < /* > / == */ z*z`- 如果您可以确定数学结果不超出`unsigned long long`范围。

如果您不能确定这一点，您可以`double`在计算之前将变量转换为，

```
double xd = x, yd = y, zd = z;
double t = (xd*xd + yd*yd - zd*zd)/(2*xd*yd); 
```

对于近乎直角的三角形，可能会损失精度和不正确的结果（例如，对于略微钝角的三角形`x = 2^29, y = 2^56-1, z = 2^56+2`，两者`y`和`z`都将转换为标准 64 位`double`s 的 2^56，`xd*xd + yd*yd = 2^58 + 2^112`将被评估为`2^112`，然后减去`zd*zd`结果为 0）。

或者您可以仅使用整数算术`x*x + y*y`比较`z*z`- 或`x*x`- 。`z*z - y*y`如果`x*x`可以表示为`unsigned long long`（我假设是`0 < x <= y <= z`），比较简单，先检查是否`(z - y)*(z + y)`会超过`ULLONG_MAX`，如果是，则三角形为钝角，否则计算比较。如果`x*x`不可表示，它就会变得复杂，我认为最简单的方法（当然，除了使用大整数库之外）是通过将数字拆分为分别计算高位和必要时低位 64（或任何宽度`unsigned long long`）位宽度的一半并比较它们。

进一步说明：您的 π 值`3.14159265`太不准确，直角三角形将被报告为钝角。

# ios - 来自 JSON 文件的 iOS 6 NSDictionary

> ID：12829289
> 
> 赞同：2
> 
> 时间：2012-10-10T22:16:22.903
> 
> 标签：ios, xcode, json, ios6, nsdictionary

我正在使用故事板和`MasterView`布局构建一个项目。我正在尝试`UITableView`从 JSON 文件中获取数据（[http://afterimagedesign.tk/topHits.json](http://afterimagedesign.tk/topHits.json)我不知道这是否是正确的 JSON，我是新手）所以我将这些方法称为`viewDidLoad()`

```
responseData = [[NSMutableData data] retain];
NSURLRequest *topHitsRequest = [NSURLRequest requestWithURL:[NSURLURLWithString:@"http://afterimagedesign.tk/topHits.json"]];
[[NSURLConnection alloc] initWithRequest:topHitsRequest delegate:self]; 
```

然后在`connectionDidFinishLoading:(NSURLConnection *)connection`方法中，我称之为：

```
[connection release]
NSString *responseString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];
[responseData release];
NSDictionary *topHitsDictionary = [responseString JSONValue];
NSArray *topHitsArray = [topHitsDictionary valueForKey:@"title"]; 
```

问题是（我认为）我收到此错误：“找不到实例方法'-JSONValue'。” 这个我找了一段时间，我看到的所有教程都使用这个方法。是iOS 6还是其他？谢谢！

编辑：

如何将它添加到 UITableView？我试过`cell.textLabel.text = [self.topKpop objectAtIndex:indexPath.row];`了，但我不断收到 SIGABRT 错误。我收到了 SIGABRT 错误，但这次是在 .m 文件中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T22:25:27.110

我认为教程使用[`SBJson`](http://stig.github.com/json-framework/)或类似的 JSON 解析器框架。

如果您不想使用任何外部框架，您可以尝试[`JSONObjectWithData:options:error:`](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html#//apple_ref/occ/clm/NSJSONSerialization/JSONObjectWithData%3aoptions%3aerror%3a)从`NSJSONSerialization`iOS 5.0 开始提供的课程。

```
[connection release]
NSError *jsonError = nil;
NSDictionary *topHitsDictionary = [NSJSONSerialization JSONObjectWithData:responseData options:0 error:&jsonError];
NSArray *topHitsArray = [topHitsDictionary valueForKey:@"title"];
// ...
[responseData release]; 
```

# sql - 如何在 HTML 中显示 SQL 查询的总和？

> ID：12829291
> 
> 赞同：0
> 
> 时间：2012-10-10T22:16:36.747
> 
> 标签：sql, razor, sum

我试图这样做：

```
SELECT SUM(SUBTOTAL as TODAYSALES) FROM dbo.SALESORD_HDR where ORDERDATE >=41187 
```

但是浏览器会抛出一个关于 sum 函数的异常，说“SUM”不是一个可识别的内置函数名称。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T22:21:42.263

做一个

选择总和（小计）作为 TODAYSALES 从 ...

会好很多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T22:23:30.583

你的语法似乎不对。它应该是`SELECT SUM(SUBTOTAL) AS TODAYSALES FROM dbo.SALESORD_HDR where ORDERDATE >= 41187`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T22:26:56.677

别名必须在它们所针对的表达式之外定义：

```
SELECT SUM(SUBTOTAL) as TODAYSALES FROM dbo.SALESORD_HDR where ORDERDATE >=41187 
```

# ruby-on-rails - rails aasm：获取允许特定事件的所有状态

> ID：12829303
> 
> 赞同：1
> 
> 时间：2012-10-10T22:18:04.230
> 
> 标签：ruby-on-rails, aasm

我是 AASM 的新手，并试图获取 MyModel 模型中可以转换为状态的所有状态的列表：newstate。

因此，例如：

```
 aasm_event :finish do
    transitions :to => :finalstate, :from => [:start, :working]
  end 
```

基本上，我想通过模型返回 [:start, :working] 数组，所以类似于

```
MyModel.aasm_events.finish.transitions.from 
```

但是，好吧，这不是语法......我在文档中找不到任何东西。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T10:12:28.327

直到现在它才被支持。新发布的**gem 版本 3.0.12**现在支持一个名为**aasm_from_states_for_state**的类方法，它完全符合您的要求。不幸的是，您建议的小 DSL (...finish.transitions.from) 非常好，但目前不可用。但我会记住的；）

像这样使用新的类方法：

```
MyModel.aasm_from_states_for_state(:finalstate) 
```

它返回所有可能的状态。如果您只想要特定转换的 from 状态：

```
MyModel.aasm_from_states_for_state(:finalstate, :transition => :finish) 
```

或更现代（使用 Ruby 1.9）

```
MyModel.aasm_from_states_for_state(:finalstate, transition: :finish) 
```

所有调用都从状态返回一个可能的数组。

# java - java中的字符串搜索（获取java.lang.nullpointerexception）

> ID：12829305
> 
> 赞同：0
> 
> 时间：2012-10-10T22:18:10.797
> 
> 标签：java

我编写了一个简单的程序，其中有一个包含名称的字符串数组。

该程序在字符串数组中搜索用户给定的名称。如果它存在，那么它会说`name found`else `not found`。

当我给出名称时，即已经存在于字符串中，则程序运行良好，但是当我给出名称时，即在字符串中不存在时，它会显示错误。

```
import java.util.Scanner;

class Work {

    Scanner in = new Scanner(System.in);

    String e_name;
    String name[]=new String [50];

    void getname()
    {
         System.out.println("enter the name");
          e_name=in.nextLine();
    }

    int search()
    {
        System.out.println("name to be searched"+" "+e_name);
        for(int i=0;i<name.length;i++){
         if(name[i].equals(e_name))
         return i;
      }
        return -1;
    }
}

public class Array {

    public static void main(String args[])
    {
        Work ob1=new Work();
        int search_res;
        ob1.name[0]="aditya";
        ob1.name[1]="ankit";

        ob1.getname();

        search_res=ob1.search();
        System.out.println(search_res);

        if(search_res!=-1)
        {
            System.out.println("name found");
        }
        else if (search_res==-1)
        {
            System.out.println("name not found");
        }
    }
} 
```

错误

```
 enter the name
     manoj
     Exception in thread "main" java.lang.NullPointerException
 at Work.search(Array.java:24)
 at Array.main(Array.java:56)
     name to be searched manoj 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T22:21:01.473

您正在遍历数组中的*每个*值。`name`该数组如下所示：

```
{ "aditya", "ankit", null, null, null, ... } 
```

所以对于前两次迭代，它会很好 - 但在那之后，当 i 为 2 时，这一行：

```
name[i].equals(e_name) 
```

将调用`equals`on `null`，因此异常。

撇开任何关于封装、良好设计等的问题不谈，解决这个特定问题的*最干净*的方法是使用`List<String>`：

```
List<String> names = new ArrayList<String>(); 
```

然后这些行：

```
ob1.name[0]="aditya";
ob1.name[1]="ankit"; 
```

会成为：

```
ob1.names.add("aditya");
ob1.names.add("ankit"); 
```

你的循环会变成：

```
for (int i = 0; i < names.size(); i++) {
    if (names.get(i).equals(e_name)) {
        return i;
    }
} 
```

或者，您*可以*坚持使用数组，然后反转相等性检查：

```
if(e_name.equals(name[i])) 
```

鉴于它`e_name`永远不会为空（以您运行它的方式），这永远不会引发异常。不过，硬编码的名称数量仍然很奇怪——a`List<String>`将是一个*更好*的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T22:20:01.833

您实例化了字符串数组`String name[]=new String [50];`（`name[i]`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T22:20:42.300

您的阵列是否已完全填充？还是根本没有人口？

```
 if(name[i].equals(e_name)) 
```

如果您的数组没有 50 个名称，那么在某些时候上述将意味着您调用`equals()`空引用。您应该执行空检查，或者更确切地说：

```
 if (e_name.equals(name[i])) 
```

即使您的数组没有完全填充，它也可以工作（假设 e_`name`不为空）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T22:32:50.610

您的代码导致与 null 进行比较，这就是您收到此错误的原因。我建议不要使用字符串数组，而是使用 ArrayList 或任何其他集合，因为这样可以为代码提供灵活性。因为您的数据库可能是增加，为此您必须一次又一次地更改长度。ArrayList 在这种情况下很有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T22:24:31.723

好吧，您在这里创建了一个包含 50 个条目的字符串数组，`String name[]=new String [50];`但您只初始化了其中的 3 个（直接 2 个，由 1 个`ob1.getname()`）

尝试初始化您的数组（使用空字符串或其他）或使用额外的变量来跟踪它...

# r - 在计算数据框中的唯一因素时，如何保留另一个向量中的值？

> ID：12829306
> 
> 赞同：0
> 
> 时间：2012-10-10T22:18:11.660
> 
> 标签：r, date, vector, unique

我的数据框“lotsadates”中的数据如下所示：

```
>Date

1 2012-09-26
2 2012-09-26
3 2012-09-26
4 2012-09-27
5 2012-09-28
6 2012-09-28 
```

有一个相同长度的 day_of_week 向量：

```
> day_of_week

1 3
2 3
3 3
4 4
5 5
6 5 
```

我正在使用以下方法按日期计算观察次数：

```
ndist <-tapply(1:NROW(lotsadates), 
               lotsadates$Date, 
               function(x) length(unique(x))) 
```

所以 ndist 看起来像这样：

> 观察 / 日期 / ndist
> 1 / 2012-09-26 / 3
> 2 / 2012-09-27 / 1
> 3 / 2012-09-28 / 2

但我希望 ndist 看起来像这样：

> 日期 / ndist / day_of_week
> 1 / 2012-09-26 / 3 / 3
> 2 / 2012-09-27 / 1 / 4
> 3 / 2012-09-28 / 2 / 5

我认为有一个相当简单的解决方案，但我无法弄清楚。非常感谢您的建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T05:20:16.090

一种`data.table`编码优雅的方法

```
library(data.table)
# assuming lotsadates has 2 columns, Date and day_of_wee
DT <- as.data.table(lotsadates)
DT[, .N, by = list(Date, day_of_week)] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T22:50:30.840

```
library(reshape2)
result <- dcast(lotsadates, Date ~., value.var='day_of_week')
result$day_of_week <- as.POSIXlt(result$Date)$wday
names(result)[2] <- "ndist"
> result
        Date ndist day_of_week
1 2012-09-26     3           3
2 2012-09-27     1           4
3 2012-09-28     2           5 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T00:53:56.977

```
library(plyr)
# assuming lotsadates has 2 columns, Date and day_of_week
ndist <- ddply(lotsadates, .(Date, day_of_week), summarise, n=length(Date)) 
```

# macos - 用户空间中 Mac OS X 上的游戏手柄和操纵杆支持

> ID：12829307
> 
> 赞同：7
> 
> 时间：2012-10-10T22:18:18.990
> 
> 标签：macos, hid, iokit, joystick

几天来，我一直在寻找如何在 Mac 上支持游戏手柄和操纵杆，我发现的所有资源似乎都建议使用预安装的驱动程序以及使用 Apple 的 HID API，它可以工作。

这种方法的缺点是每个操纵杆和游戏手柄都需要加载另一个内核扩展，因此它可以被 HID 管理器识别，或者至少没有代码`Info.plist`说明它符合早期安装的驱动程序。例如，当我有一个 360 Xbox 驱动程序[KEXT](https://developer.apple.com/library/mac/documentation/Darwin/Conceptual/KernelProgramming/Extend/Extend.html)时，微软的 Xbox 控制器可以工作，但罗技的控制器不行（我试过 F710）。

正如 Apple 建议的那样，使用游戏手柄或操纵杆的应用程序应该能够在用户空间自行操作，而无需引入任何 KEXT 内容。有没有办法做到这一点？

我想到的是在插入设备时使用 IORegistry 或 IOUSB API 来获取设备（USB Prober 至少显示了它）。然后以某种方式获取设备的描述，然后使用该描述将设备注册为 HID 设备。然后可以使用整个 HID 管理器。

我在正确的轨道上吗？或者有没有其他方法可以做到这一点？

由于 IOKit API 实际上提供了 kHIDUsage_GD_Joystick 之类的关键字，并且有一个 ForceFeedback.h 库，我想 Apple 在设计 HID API 时考虑了操纵杆和力反馈。这是我希望这可能奏效的渺茫希望。

一些参考文档和开源项目：

*   [Colin Munro 的 360 驱动程序](http://tattiebogle.net/index.php/ProjectRoot/Xbox360Controller/OsxDriver)
*   [HID API 文档](https://developer.apple.com/library/mac/#documentation/devicedrivers/Conceptual/HID/new_api_10_5/tn2187.html#//apple_ref/doc/uid/TP40000970-CH214-SW4)
*   [DDHID项目](http://code.google.com/p/ddribin/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T19:13:52.890

After revisiting this, I found out the solution to be operating directly on the file descriptors of the device. libusb is an excellent library which greatly simplify your life on this and they have Mac supported.

xboxdrv [link](http://pingus.seul.org/~grumbel/xboxdrv/) is a great example on how to operate on file socket using libusb.

In pseudo code, it should look like this:

1.  enumerate device
2.  detect kernel driver and detach it if possible
3.  open device
4.  file off a initial transfer
5.  wait on the callback function to handle msg and error properly
6.  start run loop or select on fd to call libusb_event_handle

Check libusb for more info [link](http://www.libusb.org/).

# netty - netty 3.5.8 中的文件描述符扩散

> ID：12829308
> 
> 赞同：1
> 
> 时间：2012-10-10T22:18:18.913
> 
> 标签：netty

将我的应用程序从 netty-3.5.2 升级到 3.5.8 后，我惊讶地发现文件描述符使用量增加了 3 倍以上（从 275 到 874）。该应用程序非常直接地使用 nio 套接字通道。这种增加是否有正当理由，还是我应该寻找问题？fd 类型的最大增长是 fifos（由 lsof 报告），从 64 增加到 466。不一定是问题，但我很想了解变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T06:27:34.563

这听起来像一个错误..你能在 betty bug-tracker[1] 中打开一个问题并附上一些示例代码来重现吗？

谢谢

[1] [https://github.com/netty/netty/issues?state=open](https://github.com/netty/netty/issues?state=open)

# r - 在 R 中为“查找和替换”编写通用函数

> ID：12829309
> 
> 赞同：0
> 
> 时间：2012-10-10T22:18:21.473
> 
> 标签：r, data-manipulation

我需要为“在 R 中查找和替换”编写一个通用函数。如何编写一个接受以下输入的函数

*   CSV 文件（或数据框）
*   要查找的字符串，例如“name@email.com”
*   将找到的字符串替换为的字符串，例如“medium”

并重写 CSV 文件/数据框，以便将所有找到的字符串替换为替换字符串？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-10T22:57:57.033

这是完成这项工作的快速功能：

```
library(stringr)

replace_all <- function(df, pattern, replacement) {
  char <- vapply(df, function(x) is.factor(x) || is.character(x), logical(1))
  df[char] <- lapply(df[char], str_replace_all, pattern, replacement)  
  df
}

replace_all(iris, "setosa", "barbosa") 
```

基本上，它识别数据框中所有作为字符或因素的变量，然后应用于`str_replace_all`每一列。模式应该是一个正则表达式，但是如果你想匹配一个固定的字符串，你可以这样做（例如）

```
replace_all(iris, fixed("setosa"), "barbosa") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T22:43:25.353

以下解决方案适用于“精确”匹配：

```
dat <- data.frame(a=letters[1:10], y=letters[10:1]) 
apply(dat, 2, function(v, foo, bar) {v[v==foo]=bar;return(v)}, foo='a', bar='baz') 
```

但是，这不会替换包含 1 的字符串。它还会有许多边缘情况，这些情况不会按您预期的方式工作。

正如我在评论中提到的，命令行工具`sed`非常适合这种操作。

# knockout.js - 使用 WebApi 和 Knockout 处理日期/时间

> ID：12829326
> 
> 赞同：1
> 
> 时间：2012-10-10T22:19:26.263
> 
> 标签：knockout.js, asp.net-web-api, knockout-mapping-plugin

我正在使用 MVC WebApi 和 Knockout 来加载/保存数据。我正在使用带有敲除的映射插件，因此我可以简单地通过 api 返回一个对象，而无需将元素“推送”到模型中。所有这些工作正常，但是，我现在遇到需要能够更改两种类型的字段，日期和时间。两者都作为日期时间保存在数据库中。

你们会推荐以这种方式处理日期/时间的最佳方法，我创建了自己的绑定处理程序以在显示时正确格式化它们，但更改和保存它们是我关心的。我可以使用 jQuery DatePicker 之类的东西，但这会正确设置日期字段的值，以便当对象“放入”到 webapi 时，它能够正确更新它吗？

# c# - 以本地方式运行 azure 以测试控制

> ID：12829332
> 
> 赞同：0
> 
> 时间：2012-10-10T22:19:56.837
> 
> 标签：c#, azure, user-controls

好的。所以我不确定标题是我问题的最佳描述。

这就是问题所在。我有一个在 MS Windows Azure 上运行的 Web 应用程序。为了对其进行测试，Visual Studio 使用了 Azure 模拟器。我找到了想在我的网站上使用的第 3 方控件。该公司允许您下载控件的演示，以便您可以在购买许可证之前在您的站点中对其进行测试。此控件采用 dll 的形式，但该 DLL 内部还有一些代码会阻止本地运行的页面以外的任何内容加载控件。由于我正在使用 Windows Azure 模拟器进行测试，所有“似乎”都不是 dll 本地的，因此我无法对其进行测试。我已尝试联系该公司，但尚未得到回复。有什么想法可以让我在本地调试时让 Azure 看起来是本地的，以便我可以测试它？

这不是绕过购买控件的一种手段，而只是让我在购买之前确保它可以正常工作。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T22:33:52.413

我认为您最好的选择是执行以下操作：

1.  将您的应用程序部署到云服务（Web 角色）
2.  确保启用远程桌面
3.  通过远程桌面连接到您的实例
4.  打开 Internet Explorer 并导航到“http://localhost”。这将允许您进行一些功能测试，但您将无法测试它是否支持网络场（多个实例）。

但这实际上取决于“本地”对程序集的含义。这是否仅仅意味着在“http://localhost”上发出请求？或者您是否需要在 Cassini 中运行您的 Web 应用程序？

# excel - 在 VBA 中为每个语句编写更快的方法

> ID：12829334
> 
> 赞同：4
> 
> 时间：2012-10-10T22:20:19.677
> 
> 标签：excel, vba

我正在编写 VBA 代码来用相同的数据填充三个不同的组合框。我只是想知道是否有比我现在正在做的更有效的编写方式？

```
' Create fac1 cbo
For Each c_fac In ws_misc.Range("fac")
    With Me.cbo_fac1
    .AddItem c_fac.Value
    .List(.ListCount - 1, 1) = c_fac.Offset(0, 1).Value
    End With
Next c_fac

' Create fac2 cbo
For Each c_fac In ws_misc.Range("fac")
    With Me.cbo_fac2
    .AddItem c_fac.Value
    .List(.ListCount - 1, 1) = c_fac.Offset(0, 1).Value
    End With
Next c_fac

' Create fac3 cbo
For Each c_fac In ws_misc.Range("fac")
    With Me.cbo_fac3
    .AddItem c_fac.Value
    .List(.ListCount - 1, 1) = c_fac.Offset(0, 1).Value
    End With
Next c_fac 
```

感谢您抽出宝贵的时间！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-10T22:32:25.867

更进一步，可能：

```
dim lLoop as long
' Create fac1 cbo
For Each c_fac In ws_misc.Range("fac")
    For lLoop=1 to 3
        Me.controls("cbo_fac" & lLoop).AddItem c_fac.Value
        Me.controls("cbo_fac" & lLoop).List(Me.controls("cbo_fac" & lLoop).ListCount - 1, 1) = c_fac.Offset(0, 1).Value
    next lLoop
Next c_fac 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T22:25:05.323

为什么你不能这样做？：

```
' Create fac1 cbo
For Each c_fac In ws_misc.Range("fac")
    With Me.cbo_fac1
        .AddItem c_fac.Value
        .List(.ListCount - 1, 1) = c_fac.Offset(0, 1).Value
    End With
    With Me.cbo_fac2
        .AddItem c_fac.Value
        .List(.ListCount - 1, 1) = c_fac.Offset(0, 1).Value
    End With
    With Me.cbo_fac3
        .AddItem c_fac.Value
        .List(.ListCount - 1, 1) = c_fac.Offset(0, 1).Value
    End With
Next c_fac 
```

这将您在工作表范围内循环所需的时间减少了 2/3。通常读取和写入实际的 Excel 工作表对象是 Excel VBA 代码中花费最多时间的部分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-11T08:42:29.030

这会快得多（假设“fac”是一列），.AddItem 对于> 5个条目非常慢：

```
Dim rng
rng = ws_misc.Range("fac").resize(,2).value
Me.cbo_fac1.List = rng
Me.cbo_fac2.List = rng
Me.cbo_fac3.List = rng 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T22:27:30.677

我个人不喜欢`With`这种情况。它使代码行数翻了一番，几乎没有任何好处。你可以把它缩小到：

```
' Create fac1 cbo
For Each c_fac In ws_misc.Range("fac")

    Me.cbo_fac1.AddItem c_fac.Value
    Me.cbo_fac1.List(Me.cbo_fac1.ListCount - 1, 1) = c_fac.Offset(0, 1).Value

    Me.cbo_fac2.AddItem c_fac.Value
    Me.cbo_fac2.List(Me.cbo_fac2.ListCount - 1, 1) = c_fac.Offset(0, 1).Value

    Me.cbo_fac3.AddItem c_fac.Value
    Me.cbo_fac3.List(Me.cbo_fac3.ListCount - 1, 1) = c_fac.Offset(0, 1).Value

Next c_fac 
```

# json - appcelerator 的多维 JSON 示例

> ID：12829335
> 
> 赞同：0
> 
> 时间：2012-10-10T22:20:24.390
> 
> 标签：json, appcelerator, multidimensional-array

我想创建一个多维数组。可以说我想把这个变成两个：

```
{
        "fighters": [
            {
                "name": "Muhammad Ali",
                "nickname": "The Greatest",
                "image": "http://upload.wikimedia.org/wikipedia/commons/1/13/Clyde_The_Bulldog.jpg"
            },
            {
                "name": "Chuck Liddell",
                "nickname": "The Iceman",
                "image": "http://images.pictureshunt.com/pics/s/saint_bernard-12924.jpg"
            },
            {
                "name": "Rocky Marciano",
                "nickname": "The Brockton Blockbuster",
                "image": "http://www.goodhousekeeping.com/cm/goodhousekeeping/images/IO/alaskan-malamute-fb.jpg"
            },
            {
                "name": "Randy Couture",
                "nickname": "The Natural",
                "image": "http://slog.thestranger.com/files/2006/09/bigdog.jpg"
            },
            {
                "name": "Fedor Emelianenko",
                "nickname": "The Last Emperor",
                "image": "http://affordablehousinginstitute.org/blogs/us/wp-content/uploads/small_dog_on_big_dog.jpg"
            },
            {
                "name": "Jon Jones",
                "nickname": "Bones"
            },
            {
                "name": "George Foreman",
                "nickname": "Big George"
            },
            {
                "name": "Wanderlei Silva",
                "nickname": "The Axe Murderer"
            },
            {
                "name": "Gearges St. Pierre",
                "nickname": "Rush"
            },
            {
                "name": "Manny Pacquiao",
                "nickname": "Pac-Man"
            }
        ]
    } 
```

假设我想将前五个项目放入一个名为“dogs”的数组中，然后我想将其他五个项目放入一个名为“noDogs”的数组中。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:23:48.597

假设 original_array 变量包含上面的数组，这将做你想要的：

```
var dogs = [];
var noDogs = [];    

for(var i=0; i<original_array.fighters.length; i++){
  var fighter = original_array.fighters[i];
  if(i<5){
    dogs.push(fighter);
  } else {
    noDogs.push(fighter);
  }  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T10:13:27.213

[另一种方法是使用此处记录](http://www.w3schools.com/jsref/jsref_slice_array.asp)的内置 javascript`slice()`方法。

您的代码将如下所示：

```
var dogs = fighters.slice(0, 5); //Take items 0, 1, 2, 3, 4
var noDogs = fighters.slice(5, fighters.length) //Take items 5 onwards 
```

# javascript - 将数组作为查询字符串传递

> ID：12829336
> 
> 赞同：4
> 
> 时间：2012-10-10T22:20:34.233
> 
> 标签：javascript, json, query-string

我正在尝试通过 jsonp 将数组传递给我的服务器 - 这是我尝试传递的 JSON 示例：

```
["something","another_thing",4,{"iam" : "anobject"}] 
```

但是，我不确定如何（如果可能的话）传递一个数组。

我以为它会是这样的：

```
something&another_thing&4&[iam]=anobject 
```

但是当我将它传递给`querystring.parse()`节点时，它给了我这个：

```
{ '4': '',
  something: '',
  another_thing: '',
  '[iam]': 'anobject' } 
```

这绝对不是我想要的。我可以只使用 JSON，但现在我想知道这是否可能。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-10T22:24:59.197

如果您想使用 PHP 的 URI 格式（这是您尝试的样子）传递该数据结构，它看起来像：

```
data[0]=something&data[1]=another_thing&data[2]=4&data[3][iam]=anobject 
```

不过，您最好只传递 JSON 本身。获取 JavaScript 对象并运行它`JSON.stringify()`并`encodeURIComponent()`获得：

```
data=something%2Canother_thing%2C4%2C%5Bobject%20Object%5D 
```

然后您将使用`querystring.parse()`，从中提取`data`参数，然后`JSON.parse()`在该值上运行。

# javascript - 如何使用 Jquery 将两个或多个变量传递给第三个变量

> ID：12829340
> 
> 赞同：0
> 
> 时间：2012-10-10T22:21:18.323
> 
> 标签：javascript, jquery, html, svg, raphael

我有我用 raphael.js 创建的这两个 var abjects，我试图将这两个变量传递给第三个变量，但不知道如何去做。该脚本应该根据对象的类（.awesome，whole）调整对象的大小到它自己的画布中。我创建了一个[http://jsfiddle.net/creativestudio/7uUgz/](http://jsfiddle.net/creativestudio/7uUgz/)

变量 1

```
/* ==|== AWESOME SMILE STARTS
/* ==|================================= */
    var awesome = paper.set();
    awesome.push(
        paper.circle(75, 75, 75).attr(awesomeGradient),
        paper.circle(75, 75, 67).attr(silverGradient),
        paper.circle(75, 75, 63).attr(gray),
        paper.circle(75, 75, 58).attr(silverGradient),
        paper.circle(90, 60, 7).attr(gray),
        paper.circle(60, 60, 7).attr(gray),

// Awesome smile        
    paper.path("M111.271,89.305C105.555,103.75,91.456,114,75,114 c-5.159,0-10.085-1.008-14.596-2.837c1.24-1.665,1.982-3.722,1.982-5.957c0-5.522-4.477-10.001-10-10.001 c-3.251,0-6.132,1.561-7.958,3.963c0,0-0.001-0.001-0.001-0.001c-2.352-2.97-4.282-6.288-5.698-9.865l-4.576,4.576 c2.084,4.503,4.895,8.601,8.274,12.146c3.444,3.617,7.481,6.664,11.959,8.979C60.562,118.195,67.569,120,75,120 c18.107,0,33.708-10.701,40.848-26.12L111.271,89.305z M47.16,102.268c1.03-1.824,2.985-3.062,5.227-3.062c3.309,0,6,2.69,6,6 c0,1.636-0.659,3.117-1.724,4.201h0C53.137,107.518,49.935,105.104,47.16,102.268z").attr(gray),

// Overlay
    paper.path("M75,0C33.578,0,0,33.579,0,75h150C150,33.579,116.422,0,75,0z").attr(overlay)

);// AWESOME SMILE ENDS 
```

变量 2

```
/* ==|== AWFUL SMILE STARTS
/* ==|================================= */
    var awful = paper.set();
    awful.push(
        paper.circle(75, 75, 75).attr(awfulGradient),
        paper.circle(75, 75, 67).attr(silverGradient),
        paper.circle(75, 75, 63).attr(gray),
        paper.circle(75, 75, 58).attr(silverGradient),

// Left eye
        paper.path("M57.668,63.09l-7.623,4.47c-0.922,0.543-1.238,1.739-0.699,2.676c0.364,0.621,1.013,0.969,1.677,0.969 c0.334,0,0.669-0.086,0.978-0.26l9.799-5.756c0.513-0.303,0.868-0.835,0.942-1.435c0.077-0.603-0.122-1.204-0.552-1.635 l-9.794-9.877c-0.763-0.761-1.989-0.761-2.746,0c-0.752,0.765-0.752,2.001,0,2.767L57.668,63.09z").attr(gray),

// Right eye
        paper.path("M88.204,65.188L98,70.944c0.309,0.174,0.643,0.26,0.975,0.26c0.67,0,1.315-0.348,1.679-0.969 c0.539-0.937,0.227-2.13-0.698-2.676l-7.623-4.47l8.017-8.081c0.757-0.766,0.757-2.002,0-2.767c-0.76-0.761-1.987-0.761-2.741,0 l-9.802,9.874c-0.422,0.434-0.624,1.035-0.547,1.638C87.333,64.354,87.688,64.886,88.204,65.188z").attr(gray),

// Good smile     
        paper.path("M75,95c12.986,0,24.006,8.581,27.688,20.37l4.684-4.684C102.133,97.961,89.615,89,75,89 s-27.133,8.961-32.372,21.687l4.684,4.684C50.994,103.581,62.013,95,75,95z").attr(gray),

// Overlay
        paper.path("M75,0C33.578,0,0,33.579,0,75h150C150,33.579,116.422,0,75,0z").attr(overlay)

);// AWFUL SMILE ENDS 
```

进入这个：

```
 var bb = awesome.getBBox();
    console.log(bb);
    var w = bb.width;
    var h = bb.height;
    var max = w;
    if (h > max) {
        max = h;
    }
    var scale = s / max;
    var ox = -bb.x+((max-w)/2);
    var oy = -bb.y+((max-h)/2);

    console.log(s+' '+h+' '+bb.y);

    awesome.attr({
        "transform": "s" + scale + "," + scale + ",0,0" + "t" + ox + "," + oy 
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T23:18:04.090

恭喜，你刚刚升级为程序员。您需要在函数中构建代码。函数重用执行相同操作的代码行，仅使用几个参数。有几种方法可以重组代码，但这里有一个快速版本：

[http://jsfiddle.net/emAUh/](http://jsfiddle.net/emAUh/)

你应该很容易掌握，因为你已经用注释清楚地定义了可重用代码的位。而不是这样做：

```
/* ==|== AWESOME SMILE STARTS
/* ==|================================= */
    var awesome = paper.set();
    // ... draw everything 
// AWESOME SMILE ENDS 
```

你来做这件事：

```
awesomeSmileGenerator(paper) {
  var awesome = paper.set();
  //draw everthing;
  return awesome;
} 
```

这使您可以稍后执行操作...

```
var face = awesomeSmileGenerator(paper);
console.log(face); //YOUR SET IS HERE, MAGIC! 
```

# windows - 启动应用程序后将控制权返回给 cmd.exe

> ID：12829341
> 
> 赞同：5
> 
> 时间：2012-10-10T22:21:29.100
> 
> 标签：windows, command-line, automation, cmd, batch-file

用例如下：

1.  启动火狐
2.  在 cmd.exe 中执行命令

我需要将其包装在批处理脚本中。但是当我从 cmd.exe 启动 firefox 时，cmd.exe 失去了控制权，只有在 firefox 关闭后才返回控制权。但我需要在打开 Firefox 的情况下执行一些操作（步骤 2）。启动 firefox 后，如何将控制权返回给 cmd.exe。我知道在 linux 中，您可以在命令后简单地使用“&”来执行此操作，但我不知道 Windows 中有任何此类功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T22:24:54.670

我认为您可以在批处理文件中使用它来解决这个问题

```
start c:\firefoxFolder\firefox.exe
// issue other commands 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T01:59:11.063

尝试这个：

```
start "Firefox" "c:\program files\firefox folder\firefox.exe" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T23:01:58.020

您可以使用：

```
start c:\folder\firefox.exe | dir c:\folder 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-28T05:25:48.887

用这个：

```
@ECHO OFF
C:
CD \program files\mozilla firefox\
firefox 
```

# google-apps - google gmail 上下文小工具与 IMAP API 有什么关系？

> ID：12829346
> 
> 赞同：3
> 
> 时间：2012-10-10T22:21:56.417
> 
> 标签：google-apps, gmail-imap, gmail-contextual-gadgets

我已经构建了一个 gmail 上下文小工具，它可以在 gmail 消息的上下文中执行我需要的操作。对于我希望合并的其他功能，看起来需要 IMAP API。

我的问题是**如何**将这两个都容纳在一个小工具下？

例如，我见过一些应用程序可以执行更改电子邮件标签或发送消息以使用按钮存档等操作。由于小工具本身无法做到这一点（但启动它的按钮在小工具中），将按钮触发器与调用 IMAP 函数的服务器端代码“链接”的实际方法是什么？我已经看到很多答案告诉人们他们需要这样做，但我对实际的实施感到困惑。另外，这是否意味着改变我的小部件的范围（因为 IMAP 几乎可以做/访问任何与电子邮件相关的事情）

很抱歉在那里混淆了几个问题，但我很困惑。感谢您对此的任何帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T21:25:21.047

您可以通过 X-GM-MSGID 自定义命令了解 IMAP 消息的唯一 Gmail ID（应与小工具的消息 ID 匹配）：

[https://developers.google.com/google-apps/gmail/imap_extensions#access_to_the_gmail_unique_message_id_x-gm-msgid](https://developers.google.com/google-apps/gmail/imap_extensions#access_to_the_gmail_unique_message_id_x-gm-msgid)

周杰伦

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T15:01:56.493

我建议创建一个 AppEngine 应用程序。让您的小工具与 AppEngine App 通信，并让 AppEngine App 使用 IMAP 处理电子邮件。确保将消息 ID 从小工具传递到 AppEngine。它的混乱，但应该工作。我们研究了它以在我们的一个项目中实施，但在与客户讨论后，我们决定放弃一些与 IMAP 相关的功能，因为它会在他们的末端打开一大堆与管理/程序相关的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T09:46:48.277

您需要将消息 ID 发送到服务器端应用程序，该应用程序可以使用消息 ID 通过 IMAP 进行任何操作；

# php - sql选择当前和上个月的日期

> ID：12829347
> 
> 赞同：2
> 
> 时间：2012-10-10T22:21:57.793
> 
> 标签：php, mysql, sql, database

请帮忙查询。有一张桌子：

```
id | u_id | start_date |  end_date  |
-------------------------------------
01 |   7  | 2012-09-05 | 2012-09-23 |
02 |   4  | 2012-09-10 | 2012-09-15 |
03 |   4  | 2012-09-27 | 2012-10-05 |
04 |   5  | 2012-10-01 | 2012-10-09 |
05 |   4  | 2012-10-10 | 2012-10-15 |
06 |   7  | 2012-10-23 | 2012-11-05 |
07 |   5  | 2012-11-05 | 2012-11-12 |
08 |   4  | 2012-11-08 | 2012-11-10 | 
```

我想从上个月选择月份= 10 和最大“start_date”以及从下个月开始的最小“end_date”的所有记录。结果需要

```
id | u_id | start_date |  end_date  |
-------------------------------------
03 |   4  | 2012-09-27 | 2012-10-05 |
04 |   5  | 2012-10-01 | 2012-10-09 |
05 |   4  | 2012-10-10 | 2012-10-15 |
06 |   7  | 2012-10-23 | 2012-11-05 | 
```

我不明白我对这个查询做错了什么

```
SELECT start_date, end_date
FROM _xata_owner 
INNER JOIN (
   SELECT max(start_date) AS date FROM _xata_owner
   GROUP BY DATE_FORMAT(start_date, "%m")
   ) b ON month(b.date)=09
WHERE month(start_date)=10
ORDER BY start_date 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T22:51:25.853

所以你要：

*   获取 start_date 中月份为 10 的记录。为此：

    选择 id、u_id、start_date、end_date FROM _xata_owner WHERE month(start_date)=10

*   获取上个月“start_date”所在的最大“end_date”：

    SELECT id、u_id、start_date、end_date FROM _xata_owner WHERE month(start_date) = 09 AND end_date = (SELECT MAX(end_date) FROM _xata_owner WHERE month(start_date) = 09)

*   获取下个月“end_date”所在的最小“end_date”：

    SELECT id、u_id、start_date、end_date FROM _xata_owner WHERE month(end_date) = 11 AND end_date = (SELECT MIN(end_date) FROM _xata_owner WHERE month(end_date) = 11)

把它们放在一起：

```
(SELECT id, u_id, start_date, end_date
FROM _xata_owner 
WHERE month(start_date)=10)
UNION
(SELECT id, u_id, start_date, end_date
FROM _xata_owner
WHERE month(start_date) = 09 AND end_date =
        (SELECT MAX(end_date) FROM _xata_owner WHERE month(start_date) = 09))
UNION
(SELECT id, u_id, start_date, end_date
FROM _xata_owner
WHERE month(end_date) = 11 AND end_date =
        (SELECT MIN(end_date) FROM _xata_owner WHERE month(end_date) = 11)) 
```

无论如何，这听起来像你想要的。你的问题有点令人困惑。

# ruby-on-rails - Ruby on Rails：嵌入式 Ruby 在导入的 LESS 文件中不起作用？

> ID：12829358
> 
> 赞同：2
> 
> 时间：2012-10-10T22:23:27.090
> 
> 标签：ruby-on-rails, less, asset-pipeline

我第一次使用 LESS 设置 RoR 应用程序，并且在某些资产路径上遇到了问题。

无论出于何种原因，当我使用`asset_path()`或`image_path()`在使用 引用的 LESS 文件中引用图像时`@import`，只要我在其中包含嵌入式 Ruby 调用，它似乎就会默默地处理导入的 LESS 文件失败。

**以下是应用程序的设置方式：**

*文件系统：*

```
views
 -> home
app
 -> assets
    -> images
       -> general
          -> side_shadow.png
       -> home
          -> chair.png
    -> stylesheets
       -> less
          -> home.css.less.erb
          -> template.css.less.erb
          -> style.css.less.erb
          -> fonts.css.less.erb
public
 -> assets
    -> general
       -> side_shadow.png
    -> home
       -> chair.png 
```

在我的应用程序中，“家”是正在呈现的视图。加载时，它使用`home.css.less.erb`：

```
@import url("template.css.less.erb");

div#holder
{
    background: url(<%= asset_path('home/chair.png')%>);
    /* This resolves appropriately as /assets/home/chair.png... */
}
... 
```

然后它加载`template.css.less.erb`：

```
@import url("style.css.less.erb");

... 
```

最终加载`style.css.less.erb`：

```
@import url("fonts.css.less.erb");

body
{
    background-image: url(<%= asset_path('general/side_shadow.png') %>);
}
... 
```

当我使用 运行它时`rake assets:precompile`，它中止，通知我我在`fonts.css.less.erb`文件中定义的 CSS 类未定义，这似乎表明它从未有机会处理我的字体 LESS 文件。

但是，如果我用它代替`<%= asset_path('general/side_shadow.png') %>`文字 path `'/assets/general/side_shadow.png'`，它会毫无例外地继续，并且页面会按预期加载。

为什么这个 LESS 文件（由另一个 LESS 文件导入）不能包含这个嵌入式 Ruby 调用？我可以`home.css.less.erb`毫无问题地在根文件上执行此操作，但不能在它引用的任何 LESS 文件中执行此操作。

**我的宝石文件：**

```
source 'https://rubygems.org'

gem 'rails', '3.2.8'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'sqlite3'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails' #, '~> 3.2.3'
  gem 'coffee-rails' #, '~> 3.2.1'
  gem 'less-rails'
  gem 'less-rails-bootstrap'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  gem 'therubyracer', :platforms => :ruby

  gem 'uglifier' #, '>= 1.0.3'
end

gem 'jquery-rails'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'debugger' 
```

*   戴夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T19:35:50.240

原来我追求这个错误的方式; 我不需要使用嵌入式 Ruby 来构建资产路径，因为 CSS/LESS 中嵌入了一些函数，允许我在不使用 Ruby 的情况下构建资产路径。这意味着两件事：

*   首先，删除`.erb`我的`.css.less.erb`文件的扩展名（无论如何这些扩展名都很乱......）
*   其次，用等效的 CSS/LESS 替换嵌入式 Ruby 调用。

    代替：

    `background-image: url(<%= asset_path('general/side_shadow.png') %>);`

    改用这个 CSS/LESS 函数：

    `background-image: image-url("general/side_shadow.png");`

这在[RoR Asset Pipeline 指南](http://guides.rubyonrails.org/asset_pipeline.html)中并不清楚，因为它似乎在“CSS & ERB”部分建议使用嵌入式 Ruby。但是，“CSS & SASS”部分包含对这些函数的适当引用。（回想起来，SASS 与 LESS 非常相似，因此本指南的这一部分似乎更适用于 LESS。）

此外，如果这篇文章不能帮助您解决问题，这是一个[类似的问题，也有类似的答案。](https://stackoverflow.com/questions/7693226/assets-not-being-run-though-the-erb-preprocessor)

# ios - ios CALayer 委托 displayLayer 未调用

> ID：12829360
> 
> 赞同：0
> 
> 时间：2012-10-10T22:23:31.750
> 
> 标签：ios

ios CALayer 委托 displayLayer 未调用

来自： http: [//mysterycoconut.com/blog/2011/01/cag1/](http://mysterycoconut.com/blog/2011/01/cag1/)

```
- (id)initWithCoder:(NSCoder *)aDecoder;
{
    if (self = [super initWithCoder:aDecoder])
    {
        MyLayer* _myLayer = [MyLayer layerWithImage:img sampleSize:fSize];
        _myLayer.delegate = self;

        CABasicAnimation *anim = [CABasicAnimation animationWithKeyPath:@"imageIndex"];
        anim.fromValue = [NSNumber numberWithInt:1];
        anim.toValue = [NSNumber numberWithInt:5];
        anim.duration = 2f;
        anim.repeatCount = 1;
        [richter addAnimation:anim forKey:nil];

        [self.view.layer addSublayer:_myLayer];

    }
    return self;
}

// CALayer delegate needs this method for variable sample size to work
- (void)displayLayer:(CALayer *)layer{
} 
```

displayLayer 永远不会被调用？

感谢和问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T09:30:52.203

我修好了它：

记得设置

```
CABasicAnimation *anim = [CABasicAnimation animationWithKeyPath:@"indexKey"]; 
```

与以下内容相同：

```
+ (BOOL)needsDisplayForKey:(NSString *)key; 
```

在 CALayer 上，您正在子类化

# eclipse - Eclipse CDT 忘记包含路径

> ID：12829361
> 
> 赞同：1
> 
> 时间：2012-10-10T22:23:32.997
> 
> 标签：eclipse, eclipse-cdt

我在 Eclipse 中有一个项目，该项目是使用现有的 Makefile 创建的，该 Makefile 指定了`#include`gcc 的路径。

我注意到，当我构建项目时，Eclipse 会正确解析所有包含指令。但是，如果我关闭项目并**重新打开**它，Eclipse 会**忘记**如何解析`#include`指令（包含路径），我需要重新构建项目以让 Eclipse 再次解析包含路径。

为什么 Eclipse 不将此信息与项目一起保存？

这就是 Linux 上的 Eclipse Juno 的全部内容。

# ios - 在节标题和单元格之间创建空间

> ID：12829362
> 
> 赞同：1
> 
> 时间：2012-10-10T22:23:35.817
> 
> 标签：ios, uitableview

我有一个带有一个部分标题的分组表视图。如何在节标题和第一个 tableview 单元格之间创建一个空格？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T22:28:38.743

您不能在两者之间添加空格，但可以使标题高度更大，并使标题的内容不会一直到它的底部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T22:28:14.557

你可以这样做

> tableView:heightForHeaderInSection:(NSInteger)section

并改变高度

> 如果（部分 ==0）
> 返回 7；//（标题和第一行之间的空间）；
> 否则返回 6；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-19T04:31:43.230

[看起来像这样。]我以这种方式解决了，这实际上在单元格和标题之间创建了一种空间。希望它对某人有所帮助。

*   (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section { if ([tableView.dataSource tableView:tableView numberOfRowsInSection:section] == 0) { return nil; } else { UIView *sectionHeaderView = [[UIView alloc] initWithFrame: CGRectMake(0, 0, tableView.frame.size.width, 50.0)];

    ```
    sectionHeaderView.backgroundColor = [self colorWithHexString:@"2292a7"];

    UILabel *headerLabel = [[UILabel alloc] initWithFrame:
                            CGRectMake(0, 0, sectionHeaderView.frame.size.width, 35.0)];

    UILabel *headerLabel1 = [[UILabel alloc] initWithFrame:
                            CGRectMake(0, 35, sectionHeaderView.frame.size.width, 10.0)];

    headerLabel.backgroundColor = [UIColor clearColor];
    headerLabel.textAlignment = NSTextAlignmentCenter;
    [headerLabel setFont:[UIFont fontWithName:@"Helvetica Neue" size:16.0]];
    [headerLabel setTextColor:[UIColor whiteColor]];
    [sectionHeaderView addSubview:headerLabel];

    headerLabel1.backgroundColor = [UIColor grayColor];
    [sectionHeaderView addSubview:headerLabel1];

    if ([self.dateArray count] > 0)
    {
        headerLabel.text = [self.feedDateArray objectAtIndex:section];
    }

    return sectionHeaderView; 
    ```

    } }

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-29T10:03:22.323

```
override func tableView(tableView: UITableView, heightForFooterInSection section: Int) -> CGFloat {
return 10.00001 
```

}

# c# - 这段代码中虚拟和受保护的作用？

> ID：12829367
> 
> 赞同：-3
> 
> 时间：2012-10-10T22:23:58.290
> 
> 标签：c#

在下面的代码中，在派生类中，`ArrayList`我们使用了 as 方法`OnChanged()`。

这个类被声明为： `protected virtual void OnChanged(EventArgs e)`

**问题：受保护**和**虚拟**关键字背后的目的是什么？

无论如何它会起作用，但我需要知道使用受保护的访问修饰符和虚拟的目的。这段代码的最后一件事是来自 MSDN 页面，该页面教授如何让用户代表启动一个事件。

```
using System;

namespace DelegateForEvents
{
    using System.Collections;

    // A delegate type of hooking up change notificatins.
    public delegate void ChangedEventHandler(object sender, EventArgs e);

    // A class that works just like ArrayList, but sends notifications whevern the list changes.
    public class ListWithChangedEvent : ArrayList
    {
        // An event that clients can use to be notified whenever the elements of the list change
        public event ChangedEventHandler Changed;

        // Invoke the Changed event; called whenever list changes 
        protected virtual void OnChanged(EventArgs e)
        {
            if (Changed != null)
                Changed(this, e);
        }

        // Override some of the methods that can change the list;
        // Invoke event after each
        public override int Add(object value)
        {
            int i = base.Add(value);
            OnChanged(EventArgs.Empty);

            return i;
        }

        public override void Clear()
        {
            base.Clear();
            OnChanged(EventArgs.Empty);
        }

        public override object this[int index]
        {
            //get
            //{
            //    return base[index];
            //}
            set
            {
                base[index] = value;
                OnChanged(EventArgs.Empty);
            }
        }
    }
}

namespace TestEvents
{
    using DelegateForEvents;

    class EventListener
    {
        private ListWithChangedEvent List;

        public EventListener(ListWithChangedEvent list)
        {
            List = list;
            // Add "ListChanged" to the Changed event on "List"
            List.Changed += new ChangedEventHandler(ListChanged);
        }

        // This will be called whenever the list changes.
        private void ListChanged(object sender, EventArgs e)
        {
            Console.WriteLine("This is called when the event fires");
        }

        public void Detach()
        {
            // Death the event and delete the list
            List.Changed -= new ChangedEventHandler(ListChanged);
            List = null;
        }
    }

    class Test
    {

        // Test the ListWithChangedEvent class
        static void Main()
        {
            // Create a new list
            ListWithChangedEvent list = new ListWithChangedEvent();

            // Create a class that listens to list's change event
            EventListener listener = new EventListener(list);

            // Add and remove items from the list.
            list.Add("item 1");
            list.Clear();
            listener.Detach();
            Console.ReadLine();

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T22:26:21.923

虚拟：此方法旨在被覆盖。调用此方法时，在 IL 中生成 'callvirt' 而不是 'call'。

受保护：此方法对继承自该方法的类可见，但不可公开调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T22:26:21.110

`protected`意味着该方法可以在派生类中使用，但对外人不可见。有点像`private`派生类的例外。

`virtual`意味着无论调用方法的变量类型如何，它总是被调用的实际对象实例的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T22:26:45.137

虚方法意味着子类可以覆盖基类的实现。virtual 关键字基本上“开启”多态性。

受保护意味着该方法只能由基类和派生类访问。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T22:27:35.513

`protected`是一个访问修饰符，它将成员定义为可从声明它的类中访问，以及从声明该成员的类派生的任何类中访问。

`virtual`表示函数可以被派生类覆盖。这意味着，如果您有另一个继承自`ListWithChangedEvent`它的类，则可能会改变所做的事情`OnChanged`。

# windows-installer - MSI - 解密安装脚本

> ID：12829368
> 
> 赞同：0
> 
> 时间：2012-10-10T22:24:11.483
> 
> 标签：windows-installer, encryption, installscript-msi

我目前正在构建一些便携式应用程序，其中一个来自 MSI 安装程序。安装程序似乎在安装过程中执行了一个我似乎无法跟踪的程序，所以我想做的是查看安装程序脚本内部并查看它正在执行的程序以及使用哪些变量。

这样的事情可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T22:47:11.043

您必须使用各种工具进行分析。ProcessExplorer 查看已启动的程序、参数、写入的文件、更新的注册表值等等。

基本上，您将其嗅出并将其逆向工程为更不透明的代码。

# lisp - 取出列表中除最后一次出现的结构之外的所有结构

> ID：12829382
> 
> 赞同：1
> 
> 时间：2012-10-10T22:25:20.507
> 
> 标签：lisp, common-lisp

几天前我学习了lisp，我想做的就像下面这样

1`(1 2 3 4 1 5) ==> (2 3 4 1 5)

我能做的是删除所有的出现，我不知道如何保留最后一个符号。

这是我的代码

```
(defun test (X L)
  (cond ((null L) nil)
        ((equal X (last L)) (test X (butlast L)))    
        (t (cons (test X (butlast L)) (last L))))) 
```

感谢您阅读我的问题！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T23:59:57.837

如果这不仅仅是递归中的练习或作业：

```
(defun remove-all-but-last (element list)
  (remove element list :count (1- (count element list)))) 
```

或者：

```
(defun remove-all-but-last (element list)
  (remove element list :end (position element list :from-end t))) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T23:45:58.030

相同，但在线性时间内:)

```
(defun remove-all-but-last (list element)
  (reverse
   (remove-if
    ((lambda (x)
       #'(lambda (y)
           (when (equal y element)
             (if x t (not (setf x t)))))) nil)
    (reverse list)))) 
```

* * *

而且，顾名思义，这是一个人为的解决方案，但是 (!) 一次性完成。

```
(defun remove-all-but-last-contrieved
    (list element &optional (test #'equal))
  (do ((c list (cdr c))
        constructed
        back-ref
        last
        last-seen)
       ((null c) back-ref)
    (if back-ref
        (setf last constructed
              (cdr constructed) (list (car c))
              constructed (cdr constructed))
        (setf constructed (list (car c))
              back-ref constructed))
    (when (funcall test (car c) element)
      (if (or last-seen last)
          (when last-seen
            (rplacd last-seen (cddr last-seen)))
          (setf back-ref nil constructed nil))
      (setf last-seen last)))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T23:08:36.837

给你，递归，但不是很有效的解决方案：

```
(defun remove-all-but-last (X L)
    (cond ((null L) nil)
           ((equal X (car L)) 
               (if (member X (cdr L)) 
                   (remove-all-but-last X (cdr L)) 
                   L)) 
           (t (cons (car L) (remove-all-but-last X (cdr L)))))) 
```

# php - 将多个动态文本框放入 javascript 数组中

> ID：12829384
> 
> 赞同：2
> 
> 时间：2012-10-10T22:25:42.643
> 
> 标签：php, javascript, html

以下代码仅将一个文本框存储到数组中。我想要一个多维数组来动态存储多个动态文本框。

该代码当前要求用户输入 4 个输入，我使用 % 将其连接成一个字符串并将其发布到 php 页面。

我希望它获取所有 4 个输入并将它们存储在一个数组中，每个动态添加的文本框存储如下：

```
name[0][0] = dmenuvalue;  
name[0][1] = $name.val();  
name[0][2] = $origprice.val();  
name[0][3] = $specprice.val(); 
```

然后当用户添加另一个时

```
name[1]0] = dmenuvalue, etc,etc 
```

工作代码：

```
$(function(){
   var $name = $("#name");
   var $origprice = $("#origprice");
   var $specprice = $("#specprice");
   var $add = $("#add");
   var $list = $("#list");
   var ctr = 0;
   $add.click(function() {
    ctr++;
    var elem = document.createElement("div");
    var hidden = document.createElement("input");
    var close = document.createElement("a");
    var dmenu = document.getElementById("days");
    var dmenuvalue = dmenu.options[dmenu.selectedIndex].text;
    var regex  = /^\d+(?:\.\d{0,2})$/;
    if(dmenuvalue != "temp" && $name.val().indexOf("%") == -1 &&  ($origprice.val().indexOf("%") == -1 && regex.test($origprice.val())) && ($specprice.val().indexOf("%") == -1 && regex.test($specprice.val())))
    {
        var name = dmenuvalue +"%"+ $name.val() + "%" + $origprice.val()  + "%" + $specprice.val();
        //var name[0][0] = dmenuvalue;
        //var name[0][1] = $name.val();
        //var name[0][2] = $origprice.val();
        //var name[0][3] = $specprice.val();
        //for(i=0;i<5;i++){
               $(hidden).attr({
               'type': 'hidden',
               'name': 'name[]',
               'value': name
               });
          // }
           $(close).attr({
           'href': '#'
           }).html("X").click(function() {
           $(elem).remove();
           ctr--;
           return false;
           });
           $(elem).html(name).append(hidden)
           .append(close);
           $list.append(elem);
        document.getElementById("dailydeals").innerHTML = '';
           return false;
    } else {
        document.getElementById("dailydeals").innerHTML = '*Please complete all required fields above.';
        return false;
    }
   });
}); 
```

有人可以帮我将代码修改为多维吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T05:37:02.283

为了制作一个多维数组，只需在点击事件之外创建一个普通数组：

```
var dailyDeals = []; 
```

然后（在点击事件中）创建另一个数组并将`push`其放入父数组中：

```
var dailyDeal = [
    dmenuvalue,
    $name.val(),
    $origprice.val(),
    $specprice.val()
];
dailyDeals.push(dailyDeal); 
```

但我不认为你真的需要这个嵌套数组（至少从我从你的代码中理解），因为你只需要内部数组来创建隐藏的输入：

```
for (i = 0; i < 4; i++) {
    $('<input type="hidden">').attr({
        'name': 'name[' + ctr + '][' + i + ']',
        'value': dailyDeal[i]
    }).appendTo(elem);
} 
```

## 我的建议：

1.  将`ctr++;`行移到内部`if`进行验证。如果您希望控件从 0 而不是 1 开始，请将其放在其他所有内容的下方。

2.  不要`ctr--`在 X 按钮的单击处理程序中执行此操作。因为如果用户删除除最后一行之外的任何其他行，然后用户添加另一行，您就会遇到问题。我会让阵列留有空洞，然后在服务器端处理它。

3.  从标签中删除`name="days"`属性。`<select>`否则将被提交。

## JSFiddle 查看完整源代码并测试提交的值：

[http://jsfiddle.net/protron/xGhnv/4/](http://jsfiddle.net/protron/xGhnv/4/)

# javascript - 从鼠标坐标中获取行号和列号

> ID：12829388
> 
> 赞同：5
> 
> 时间：2012-10-10T22:26:16.140
> 
> 标签：javascript, ace-editor, mouse-cursor

我在浏览器文本编辑器中使用 Ace。

```
editor.on("mousemove", function (e)
{
  // use clientX clientY to get row and column locations
}); 
```

从clientX clientY坐标我需要编辑器上的实际行号和列号。

查看 Ace api 但找不到任何相关内容。

你知道我有什么办法可以做到这一点吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T22:50:03.880

找到了。

```
editor.on("mousemove", function (e)
{
   var position = e.getDocumentPosition();
}); 
```

发现它在 chrome 调试器中查看事件对象。

# php - Cakephp - saveall() - 数组应该是什么样的？

> ID：12829389
> 
> 赞同：1
> 
> 时间：2012-10-10T22:26:18.807
> 
> 标签：php, cakephp, cakephp-2.0, cakephp-2.1

我正在尝试使用 cakephp 2 中的 saveAll() 方法一次保存大量数据。问题是我不明白我传递给 saveAll() 函数的数组应该是什么样子。

我有以下型号：

```
Recipe:
hasMany: Recipeitem
hasAndBelongsToMany:Category

Category:
hasAndBelongsToMany: Recipe

Recipeitem:
belongsTo: Recipe
hasMany: Ingredient

Ingredient:
belongsTo: Grocery, Recipeitem

Grocery:
hasMany: Ingredient 
```

**因此，如果我想保存一个包含两个配方项的配方，每个配方项有两种成分，那么我传递给 saveAll 函数的数组对象应该是什么样的？**

这是我的数组目前的样子：

```
Array
(
[Recipe] => Array
    (
        [title] => Mushroom pie
        [instructions] => Just mix it!
        [cooking_time] => 20
    )

[Category] => Array
    (
        [Category] => Array
            (
                [0] => 5
                [1] => 3
            )

    )

[Recipeitem] => Array
    (
        [0] => Array
            (
                [Recipeitem] => Array
                    (
                        [name] => Crust
                        [order] => 0
                        [Ingredients] => Array
                            (
                                [0] => Array
                                    (
                                        [Ingredient] => Array
                                            (
                                                [amount] => 2
                                                [unit] => dl
                                                [order] => 0
                                                [Grocery] => Array
                                                    (
                                                        [name] => Butter
                                                        [description] => Butter
                                                    )

                                            )

                                    ),
                                [1] => Array
                                    (
                                        [Ingredient] => Array
                                            (
                                                [amount] => 3
                                                [unit] => dl
                                                [order] => 1
                                                [Grocery] => Array
                                                    (
                                                        [name] => Sugar
                                                        [description] => Sugar
                                                    )

                                            )

                                    )

                            )

                    )

            ),
        [1] => Array
            (
                [Recipeitem] => Array
                    (
                        [name] => Filling
                        [order] => 1
                        [Ingredients] => Array
                            (
                                [0] => Array
                                    (
                                        [Ingredient] => Array
                                            (
                                                [amount] => 2
                                                [unit] => dl
                                                [order] => 0
                                                [Grocery] => Array
                                                    (
                                                        [name] => Mushroom
                                                        [description] => Mushroom
                                                    )

                                            )

                                    )

                            )

                    )

            )

    ) 
```

)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T19:17:53.107

我现在通过更好地阅读 CakePHP 食谱自己解决了这个问题：

> 在 2.1 版更改: 您现在可以通过设置 $options['deep'] = true; 来保存更深层次的关联数据；

所以对我来说，这就是我所需要的：

```
$saveOptions['deep'] = true;
if ($this->Recipe->saveAll($this->request->data, $saveOptions )) { 
```

# python - 在python中推导数学函数

> ID：12829395
> 
> 赞同：0
> 
> 时间：2012-10-10T22:26:35.530
> 
> 标签：python, math, derivative

这里的初学者程序员希望编写一个可以简单地导出数学函数的函数。

该函数应该像这样运行：

> f(x) = x ** 2 + 2 * x <--- 用户输入
> 
> f'(x) = 2 * x + 2

我知道有 Wolfram 和 Maple，但我想编写自己的实际派生程序。我想知道这是否可能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T22:31:19.337

这显然是可能的，因为有很多程序可以进行符号区分。话虽如此，这并非微不足道。对于上面的简单示例，您需要编写一个解析器：

1.  拆分多项式的每一项
2.  解析项并将其分解为系数、变量和指数
3.  应用幂律
4.  将输出串在一起

那只会处理这种非常基本的衍生类型——没有链式规则、产品规则等，你必须分别实现每一个。

所以是的，绝对可行，但也很重要。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T22:29:01.407

这称为符号微分。

您需要将方程解析为表达式和运算树，然后将正常的微分规则（来自微积分 I）应用于树。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-10T22:35:33.353

当然你可以花几天时间编写自己的微分程序（幸运的是微分非常简单），但如果这不是练习，你实际上可以使用准备好的东西，例如你可以使用[sympy](http://docs.sympy.org/0.7.1/tutorial.html#calculus)：

```
import sympy
x = sympy.Symbol('x')
sympy.diff(x**2+2*x, x)
# return: 2*x + 2 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-10T22:32:44.467

[SICP](http://mitpress.mit.edu/sicp/full-text/book/book-Z-H-16.html#%_sec_2.3.2)中有一个很好的基本符号微分示例。它是一个方案，而不是 python，但是一旦你处理了解析你的输入，它应该很容易翻译。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T22:29:29.453

这是绝对可能的。您首先需要解析用户的输入字符串以获取您可以使用的函数的表示形式。然后，您需要根据要支持的微分规则处理函数中的各种术语。

# git - Git：仅在将外部分支合并到主分支时才防止快进合并

> ID：12829398
> 
> 赞同：4
> 
> 时间：2012-10-10T22:26:53.283
> 
> 标签：git, version-control

为了便于查看功能分支何时合并到 master，可以`--no-ff`在将其功能分支合并到 master 时使用 Git 的选项。

无需键入即可完成此操作的一种方法`--no-ff`是完全禁用快进合并到 master：

```
git config branch.master.mergeoptions --no-ff 
```

但是，这很笨拙，因为当简单地将 master 中的上游更改合并到 master 的本地副本时，它也阻止了快进合并（为普通`git pull`s 创建合并提交。）

是否有某种方法可以配置 Git 以防止*仅在将功能分支合并到 master 时才将快进合并到 master*中，以便在`git pull`从 master 执行 s 时允许快进，但在合并功能分支时总是创建合并提交？还是明确地使用`--no-ff`唯一的方法来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T05:44:36.663

注意：不存在预合并挂钩。
2008年引入，当时被[批评](http://git.661346.n2.nabble.com/What-is-the-pre-merge-hook-status-td1348251.html)（因为控制最好在服务器上实现（使用更新挂钩）。
它正在重新引入（[2012年9月](http://comments.gmane.org/gmane.comp.version-control.git/204825)）

并且[pre/post-commit 钩子不会在`git merge`](http://git.661346.n2.nabble.com/commit-hooks-on-merge-td3157394.html).

所以：

*   要么你在开发者推送的 git 服务器上放置一个更新钩子（但到那时他们可能意识到他们快进了一个特性分支可能为时已晚）
*   或者您编写（并分发和维护......）一个`git-merge`包装器，它将在本地回购级别进行控制。

话虽如此，正如我在“[使用拉时快进，拉时不使用FF](https://stackoverflow.com/questions/12798767/fast-forward-when-using-pull-and-no-ff-when-pull/12798995#12798995) ”中提到的，*不*使用`--no-ff`有其优点，因为它不会破坏`git bisect`和`git blame`。
因此，一个特性的开发人员可能想要重新组织他/她的特性提交（如果它们太多，则将它们压缩一点），然后在 master 分支中*快速转发*它们（而不是创建一个巨大的提交）。
有关更多信息，请参阅“[了解 Git 工作流程](http://sandofsky.com/blog/git-workflow.html)”。

# javascript - 强制浏览器重绘图像

> ID：12829399
> 
> 赞同：3
> 
> 时间：2012-10-10T22:26:53.923
> 
> 标签：javascript, jquery, html, css, jquery-ui

有没有办法强制浏览器在没有 HTTP 获取的情况下重新绘制具有相同源和相同图像的图像？

我需要这样做，因为**Chrome**有一个渲染错误。当我移动图像顶部的可拖动山墙元素时，该元素会留下白色痕迹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T22:29:32.777

在放置后更新`src`图像的属性（通过 JavaScript）可能会起作用。（如果文件在缓存中，应该没有'html get'。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T22:34:25.717

如果你做一个简单的怎么办：

```
$("#myimg").hide() 
```

然后

```
$("#myimg").show() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T22:50:33.307

要强制重绘，请尝试调用：

```
$("body").toggleClass("refresh"); 
```

不必定义“刷新”类，但这通常可以解决 dom 元素在应有的时候没有被重绘或更新的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T22:35:33.663

将新图像（具有相同来源）添加到文档中。用于`position: absolute`将其放在旧的错误渲染图像上。这可能会避免屏幕闪烁/闪烁。

这是假设图像已正确下载。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-11T02:11:23.760

```
$('#myImg').hide();
setTimeout(function(){$('#myImg').show();}, 1); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-26T18:22:33.823

我建议设置不透明度。opacity 属性将强制浏览器完全重绘元素，而不会像这样影响拖动。

```
function startDragFix(ele){
    var originalOpacity = ele.style.opacity, curOpacity = originalOpacity;
    var curID = [0, originalOpacity, ele];
    curID[0] = requestAnimationFrame(function repeatTransparencySwitch(){
        var direction = originalOpacity >= .5 ? -1 : 1;
        if (curOpacity === originalOpacity){
            // 1/64th of a transparency %, barely noticeable, but just enough
            ele.style.opacity = (curOpacity += direction*.015625);
        } else {
            ele.style.opacity = curOpacity = originalOpacity;
        }
        curID[0] = requestAnimationFrame(repeatTransparencySwitch);
    });
} 
function endDragFix(data){
    if (data) {
           data[2].style.opacity = originalOpacity;
           cancelAnimationFrame(data[0]);
    }

} 
```

示例用法：

```
var fixID = startDragFix(document.getElementById("foobar"));
setTimeout(function(){
    endDragFix(fixID);
}, 5000); 
```

# qt - 静态编译后的 Qt 错误

> ID：12829402
> 
> 赞同：0
> 
> 时间：2012-10-10T22:27:02.020
> 
> 标签：qt, compilation, static-libraries

我正在使用 Ubuntu 12.04 64 位计算机上的 Qt creator（v2.5.0 基于 Qt 4.8.1（64 位））编写一个 Qt 程序。它在我的电脑上运行良好，我对此很满意。

但现在我想部署我的应用程序，所以我决定尝试静态构建我的项目。为了做到这一点，我静态编译了 Qt（来自 4.8.3 源代码），我更改了 Qt creator 中的 qmake 选项（将其替换为“静态”选项），并在构建设置中选择了“静态构建”。

起初它似乎工作得很好：我的新可执行文件是 15Mb（而不是通常的 1Mb），当我执行 ldd ./myApp 检查依赖关系时，没有更多的 libQtGui.so.4 和 libQtCore.so.4，该程序似乎运行良好。

然后我意识到 Qt Creator 一直在应用程序输出中大喊大叫：

**“Gtk-CRITICAL **: IA__gtk_widget_style_get: 断言 `GTK_IS_WIDGET (widget)' 失败”**

这不能太好，这是怎么回事？更糟糕的是，当我尝试加载程序的帮助菜单时，不知何故它无法打开窗口并冻结。帮助菜单只是一个包含 QTextBrowser（显示带有几个 png 图片的 html 文件）和几个按钮的小部件。我在应用程序输出中反复收到以下错误：

* ***X 错误：BadDrawable（无效像素图或窗口参数）9 主要操作码：62 (X_CopyArea) 资源 id：0x0****

和一个（或多个？）**QNativeImage：无法附加到共享内存段。**

这可能与以下事实有关：当我添加 qmake 的静态版本（在 Qt 选项、构建和运行、Qt 版本选项卡中）时，我收到警告：“未安装 qmlviewer”。我不知道。

无论如何，我有点失望和沮丧，部署应用程序比我预期的要困难得多，而且非常烦人。有谁知道如何解决这一问题？

当我在这里时，我还有其他一些小问题：

1.  Qt 创建者做`qmake myApp.pro -r -spec linux-g++`and`make -w`而不是`qmake`and有关系`make`吗？
2.  我在几个地方阅读以在我的 .pro 文件中添加 LIBS，我也在一个地方阅读我应该写 CONFIG += static，Qt 官方文档说做的事情略有不同（但有一次，我发现它**写得非常**糟糕且令人困惑)，但所有这些似乎都没有做任何事情。有关系吗？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T12:05:07.297

> 这可能与以下事实有关：当我添加 qmake 的静态版本（在 Qt 选项、构建和运行、Qt 版本选项卡中）时，我收到警告：“未安装 qmlviewer”。我不知道。

与添加qmake的静态版本并得到警告“未安装qmlviewer”无关，是正常的

> Qt 创建者执行 qmake myApp.pro -r -spec linux-g++ 和 make -w 而不仅仅是 qmake 和 make 是否重要？

不，还好

> 我在几个地方阅读以在我的 .pro 文件中添加 LIBS，我也在一个地方阅读我应该写 CONFIG += static，Qt 官方文档说做的事情略有不同（但有一次，我发现它写得非常糟糕且令人困惑)，但所有这些似乎都没有做任何事情。有关系吗？

我通常用 `CONFIG +=static\ release`

`LIBS+=`只有当您加载任何动态库文件或其他不在系统路径中的库文件时，您才必须添加到您的项目中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-23T22:25:04.093

```
Warning: X Error: BadDrawable (invalid Pixmap or Window parameter) 
```

是 Qt 应用程序的一个已知问题

[http://www.iwillfolo.com/quick-fix-one-kdes-common-xorg-errors-x-error-baddrawable/](http://www.iwillfolo.com/quick-fix-one-kdes-common-xorg-errors-x-error-baddrawable/)

它是固定的

```
export QT_X11_NO_MITSHM=1 
```

或者

```
QT_X11_NO_MITSHM=1 yourapp 
```

> QT_X11_NO_MITSHM – 使用 MIT-SHM X11 扩展停止 Qt 形式。

更多信息在这里：

[https://en.wikipedia.org/wiki/MIT-SHM](https://en.wikipedia.org/wiki/MIT-SHM)

# sql - 插入语句

> ID：12829405
> 
> 赞同：2
> 
> 时间：2012-10-10T22:27:14.233
> 
> 标签：sql, tsql, sql-server-2012

我想将值（'testu'、'testp'、'testname'、'testsur'、'testemail'）插入到 [dbo].[users]

我正在使用 Microsoft SQL Server 2012 并且任何时候我尝试查询类似

```
INSERT INTO [dbo].[users]
VALUES ('testu', 'testp', 'testname', 'testsur', 'testemail') 
```

我在“INSERT”语句中收到一条错误消息：该语句在上下文中无法识别。这是什么意思？我该如何解决？

```
CREATE TABLE [dbo].[users] (
    [username] VARCHAR (40) NOT NULL,
    [password] VARCHAR (40) NOT NULL,
    [name]     VARCHAR (40)  NOT NULL,
    [surname]  VARCHAR (40) NOT NULL,
    [email]    VARCHAR (40) NOT NULL,
PRIMARY KEY CLUSTERED ([username] ASC)
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T04:18:22.283

我正在名为**[TestDB]的数据库中运行您的语句**

```
USE [TestDB]
GO

CREATE TABLE [dbo].[users] 
(
    [username] VARCHAR (40) NOT NULL,
    [password] VARCHAR (40) NOT NULL,
    [name]     VARCHAR (40)  NOT NULL,
    [surname]  VARCHAR (40) NOT NULL,
    [email]    VARCHAR (40) NOT NULL,
PRIMARY KEY CLUSTERED ([username] ASC)
);

GO

INSERT INTO [dbo].[users] VALUES ('testu', 'testp', 'testname', 'testsur', 'testemail') 
```

运行上述语句后的结果

![在此处输入图像描述](../Images/1f5bd508ce1d5003ee206e235399d749.png)

接下来我将尝试在表中插入另一行，如下所示

```
INSERT INTO [dbo].[users] VALUES ('testuwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww', 'testp', 'testname', 'testsur', 'testemail') 
```

结果是

![在此处输入图像描述](../Images/7f79ecc34bef7be6bb546d2cb4a63c46.png)

这是一个错误，表明 [UserName] 列值长度大于创建 DDL 时指定的长度。

**解决方案**

A) 将 [UserName] 长度限制在 40 个字符以内（在本例中）。

**B) 或使用ALTER**语句增加 [UserName] 列的长度。

例如

```
ALTER TABLE [dbo].[users]
ALTER COLUMN [username] VARCHAR (100) NOT NULL 
```

注意~这里的 [username] 列只是作为参考来指出错误。这种情况也可能发生在其他列上。因此，只需验证它发生在哪一列。

# go - 将字符串数组转换为字节数组数组的惯用方法

> ID：12829410
> 
> 赞同：5
> 
> 时间：2012-10-10T22:28:27.317
> 
> 标签：go

我需要将字符串数组转换为字节数组数组。这段代码有效，但重复`append`对我来说似乎令人反感。有没有更好的办法？

```
input := []string{"foo", "bar"}
output := [][]byte{}
for _, str := range input {
    output = append(output, []byte(str))
}
fmt.Println(output) // [[102 111 111] [98 97 114]] 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-10T22:48:12.487

无论如何，您都需要`[][]byte`在`[]string`. 我会通过使用以下代码来避免使用 append ，但这实际上是一个风格问题。您的代码完全正确。

```
input := []string{"foo", "bar"}
output := make([][]byte, len(input))
for i, v := range input {
    output[i] = []byte(v)
}
fmt.Println(output) // [[102 111 111] [98 97 114]] 
```

# php - .htaccess 没有重写我的网址

> ID：12829412
> 
> 赞同：0
> 
> 时间：2012-10-10T22:28:38.427
> 
> 标签：php, .htaccess, mod-rewrite, url-rewriting

我做了一个简单的网址缩短器。我正在尝试让 .htaccess 重写一个看起来像这样的 url，`http://chrismepham.com/q4IT612`以便`http://chrismepham.com/index.php?code=q4IT612`它可以在将重定向到外部 url 的函数中使用。

这是我正在使用的 .htaccess 代码：

```
SetEnv TZ Europe/London
RewriteEngine on
RewriteRule ^([a-zA-Z0-9]+)$ index.php?code=$1 
```

在我的索引页面的顶部，我有以下内容：

```
if(isset($_GET['code']) && !empty($_GET['code'])){
        $code = $_GET['code'];
        redirect($code);
        die();
    } 
```

这是重定向功能：

```
function redirect($code){
//test the connection
    try{
        //connect to the database
        $dbh = new PDO("host;dbname=dbname","user", "pass");

    //if there is an error catch it here
    } catch( PDOException $e ) {
        //display the error
        echo $e->getMessage();
    }

    if(code_exists($code)){
        $stmt = $dbh->prepare("SELECT url FROM url_shortener WHERE code=?");
        $stmt->bindParam(1, $code);
        $stmt->execute();

        while($row = $stmt->fetch(PDO::FETCH_ASSOC)) {

                $url = $row['url'];
        }
        header('Location: ' .$url);
    }
} 
```

为什么不重写url？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T22:40:39.070

我认为您的规则需要是：

```
RewriteRule ^/?([a-zA-Z0-9]+)$ index.php?code=$1 
```

这使得前导斜杠是可选的；不同版本的 Apache 处理方式不同

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-12T03:28:43.180

您的 RewriteRule 需要在 index.php 前面加一个斜线：

```
RewriteRule ^([a-zA-Z0-9]+)$ /index.php?code=$1 
```

# c++ - #define 变量在 windows.h 中被忽略并重新定义

> ID：12829415
> 
> 赞同：2
> 
> 时间：2012-10-10T22:28:48.510
> 
> 标签：c++, c, windows, qt

我使用的是 Windows 7 计算机，所以我定义了 WINVER 和 _WIN32_WINNT 来反映这一点。但是，当包含 windows.h 时，它看不到原始的 #define 并将值重新定义为默认的 0x0400。我的代码如下。这是在带有 mingw g++ 的 QT creator 中的 Windows 7 PC 上。关于为什么会发生这种情况的任何想法？

```
#define WINVER 0x0601
#define _WIN32_WINNT 0x0601

#if WINVER > 0x0600
#define GOOD
#endif

#include <windows.h>

#if WINVER > 0x0600
#define STILL_GOOD
#endif

#include <winuser.h>
#include <initguid.h>
#include <dbt.h> 
```

编辑：我使用 #if WINVER > 0x0600... 语句来确定值是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T22:41:24.617

定义这些常量的正确方法是在您的项目中，而不是在您的源文件中。这样，它们将作为命令行键进入编译。

这些是唯一`WINVER`定义的地方：

*   c:\Program Files\Microsoft SDKs\Windows\v6.0A\Include\odbcinst.h，第 28(1) 行。
*   c:\Program Files\Microsoft SDKs\Windows\v6.0A\Include\sdkddkver.h，第 166(2)、168(1) 行。
*   c:\Program Files\Microsoft SDKs\Windows\v6.0A\Include\WinDef.h，第 39(1) 行。
*   c:\Program Files\Microsoft SDKs\Windows\v6.0A\Include\WinGDI.h，第 43(1) 行。
*   c:\Program Files\Microsoft SDKs\Windows\v6.0A\Include\WinReg.h，第 29(1) 行。
*   c:\Program Files\Microsoft SDKs\Windows\v6.0A\Include\WinResrc.h，第 21(1) 行。
*   c:\Program Files\Microsoft SDKs\Windows\v6.0A\Include\WinUser.h，第 39(1) 行。

这些是唯一`_WIN32_WINNT`定义的地方：

*   c:\Program Files\Microsoft SDKs\Windows\v6.0A\Include\ObjBase.h，第 18(1)、22(1)、26(1)、30(1) 行。
*   c:\Program Files\Microsoft SDKs\Windows\v6.0A\Include\ObjIdl.h，第 604(1)、607(1)、610(1)、613(1) 行。
*   c:\Program Files\Microsoft SDKs\Windows\v6.0A\Include\sdkddkver.h，第 151(1) 行。
*   c:\Program Files\Microsoft SDKs\Windows\v6.0A\Include\WinResrc.h，第 33(1) 行。

如您所见，定义位于`#ifdef`. （我没有检查所有地方）。

如果您有正确的项目、正确的 SDK 版本等，则不应覆盖您项目中的定义。

如果您的项目中的定义没有正确传播，这意味着有些事情搞砸了。很难说到底是什么。

无论如何，正确的方法是在您的项目或 makefile 中定义这些参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T22:34:41.667

尝试流动的方法

```
#include <windows.h>

#include <winuser.h>

#ifdef WINVER
#undef WINVER
#endif

#ifdef _WIN32_WINNT
#undef _WIN32_WINNT
#endif

#define WINVER 0x0601
#define _WIN32_WINNT 0x0601

#include <initguid.h>
#include <dbt.h> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T23:25:57.903

阅读其他评论表明 windows.h 不正确。您的搜索路径中有没有重复 windows.h 的机会？

# java - 如何在 VB.net 表单中打开 .jar？

> ID：12829422
> 
> 赞同：0
> 
> 时间：2012-10-10T22:29:14.713
> 
> 标签：java, .net, vb.net, forms

我想以某种方式将 JAR 加载到表单元素中，并让它显示在表单中，而不是作为单独的实体。所以目标是让一个功能齐全的java程序在我的VB.net程序内部运行。:) 作为一个完整的后备，我将使用 vb.net 中的浏览器来加载 JAR，但我非常不想这样做。

希望这一切都说得通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T22:33:03.640

这被称为桥梁 - 现在我不知道这些解决方案与 UI 有什么关系，但这个搜索会让你开始。

[https://www.google.ca/search?q=java+.net+bridge](https://www.google.ca/search?q=java+.net+bridge)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T22:48:36.327

你应该可以使用 IKVM，

[http://www.ikvm.net/](http://www.ikvm.net/)

如其教程所示，

[http://sourceforge.net/apps/mediawiki/ikvm/index.php?title=教程](http://sourceforge.net/apps/mediawiki/ikvm/index.php?title=Tutorial)

您可以通过执行将 jar 转换为 .NET 程序集`ikvmc your.jar`

# java - Spring PropertyPlaceholderConfigurer 无法解析重复目录名下的属性文件 - 接收 BeanDefinitionStoreException

> ID：12829427
> 
> 赞同：1
> 
> 时间：2012-10-10T22:29:36.147
> 
> 标签：java, spring, properties

# 更新

我使用[此处](https://stackoverflow.com/a/9564301/43396)描述的方法从“类路径：”和“类路径 *：”打印出生成的 java 类路径并得到以下结果，但我仍然从 PPC 中为我的 jms.properties 文件中定义的属性获得 BeanDefinitionStoreException。是什么赋予了！？

```
[main] INFO - .......Loading........
[main] INFO - printing normal classpath
[main] INFO - class path resource [conf/dev/jgroups.properties]
[main] INFO - printing wildcard classpath
[main] INFO - URL [jar:file:/filepath/StandaloneProject.jar!/conf/dev/jgroups.properties]
[main] INFO - URL [jar:file:/filepath/DependencyProject.jar!/conf/dev/jdbc.properties]
[main] INFO - URL [jar:file:/filepath/DependencyProject.jar!/conf/dev/jms.properties] 
```

它在我的 Windows 机器上运行良好。它在我的开发 Linux 机器上失败了？？？任何帮助表示赞赏，如果您没有实际答案但可以指导我如何调试正在发生的事情，那也有帮助。

# 更新#2

我也尝试添加

```
<property name="ignoreUnresolvablePlaceholders" value="true" /> 
```

到我的 EncryptablePropertyPlaceholderConfigurer 的属性列表，但我仍然收到 BeanDefinitionStoreException :(

# 背景

我正在使用一个独立的 java maven 项目，其中包括另一个项目作为依赖项。包含的项目是一组核心类，并具有每个环境的属性文件。

这些文件在打包到依赖项 jar 之前存储在 main/resources/conf/[env] 中（我们将其称为 DependencyProject）。这个项目包括一个 Spring 2.5.6 PropertyPlaceholderConfigurer 来自动将属性加载到 bean 中。

现在，我要做的是使用 jGroups 将我的应用程序集群到多个服务器上。这需要在 DependencyProject 的属性之外添加特定于 env 的属性文件到 StandaloneProject，因此 jGroups 知道它需要在每个环境中与哪个地址和端口进行通信。这些属性不属于依赖项。我想我会将它们放在具有相同文件夹名称的 StandaloneProject 下的配置路径中，以便美观且一致。每个人都喜欢一致性，对吧？

所以，到目前为止，我得到的是如下所示的文件夹：

> `DependencyProject/src/main/resources/conf/[env]`
> （这些文件夹包含 jms.properties、jdbc.properties 等文件。）

和

> `StandaloneProject/src/main/resources/conf/[env]`
> （这些文件夹包含一个 jgroups.properties 文件）

DependencyProject 在 PropertyPlaceholderConfigurer 中声明以下位置：

> `<value>classpath*:conf/${implementation.env}/*.properties</value>`

我不打算用 Spring 加载 jGroups 属性文件。我在我的应用程序执行中采用老式的方式。

# 问题

conf/[env] 的目录路径重复这一简单事实导致某处发生冲突，并且没有加载来自 DependencyProject 的属性。我尝试添加“classpath *：”而不仅仅是“classpath：”，但它没有效果。我也尝试过使用 IgnoreUnresolvablePlaceholders，但我不确定这是正确的解决方案。

我知道这与文件夹结构有关，因为我可以插入一个文件夹，这样两条路径就不会相互镜像，并且一切正常。

> `DependencyProject/src/main/resources/conf/[env]` `StandaloneProject/src/main/resources/conf/folder/[env]`

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:35:14.530

我最终只是在我的 conf 文件夹下放了一个 jgroups 文件夹。我希望将所有内容都放在 /conf 目录中，而不是 /conf 中的一些属性和 /conf/jgroups 中的一些属性，但这有效。

# python - 在 pandas DataFrame 中快速应用字符串操作

> ID：12829428
> 
> 赞同：12
> 
> 时间：2012-10-10T22:29:44.123
> 
> 标签：python, pandas

假设我有一个`DataFrame`100k 行和一个列`name`。我想尽可能有效地将这个名字分成名字和姓氏。我目前的方法是，

```
def splitName(name):
  return pandas.Series(name.split()[0:2])

df[['first', 'last']] = df.apply(lambda x: splitName(x['name']), axis=1) 
```

不幸的是，`DataFrame.apply`真的，真的很慢。我能做些什么来使这个字符串操作几乎和操作一样快`numpy`吗？

谢谢！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-11T20:03:34.420

尝试（需要 pandas >= 0.8.1）：

```
splits = x['name'].split()
df['first'] = splits.str[0]
df['last'] = splits.str[1] 
```

# canvas - 在画布中由 drawImage 创建的移动图像

> ID：12829429
> 
> 赞同：1
> 
> 时间：2012-10-10T22:29:45.217
> 
> 标签：canvas, html5-canvas

如何在画布中移动图像？没有可以通过 += 或 -= 更改的 x\y 坐标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T03:24:53.100

画布是一个即时的绘图表面。当您像画布一样进行调用时`drawImage`，会将位图渲染到上下文中，然后忘记曾经发生过的任何事情。它不跟踪任何内容。

这意味着您需要跟踪所有内容。如果要移动图像，则需要清除画布并在与以前不同的位置重新绘制图像（以及场景中的所有其他内容）。

这以各种方式出现了很多，所以我制作了一个关于[管理绘制对象的状态和画布交互性](https://simonsarris.com/making-html5-canvas-useful/)的教程，作为对这个主题的一个不错的介绍。本教程使用可以在屏幕上拖动的矩形，但使用图像几乎相同。

# ruby-on-rails - 没有视图的控制器中的操作（用于 AJAX）

> ID：12829430
> 
> 赞同：3
> 
> 时间：2012-10-10T22:29:56.147
> 
> 标签：ruby-on-rails, ajax

我正在尝试在 Rails 中发出 ajax 请求。我想要做的是从我的javascript调用控制器中的一个动作，而不必为其创建一个视图页面。例如

```
class BooksContoller < ApplicationController
  respond_to :html, :json, :xml

  def myaction
    respond_to do |format|
     format.js { # do stuff  }
    end
  end

end 
```

在 routes.rb 文件中，我添加了以下内容

```
match '/books/myaction' => 'books#myaction' 
```

这是我正在进行的 ajax 调用

```
$.ajax(
{
  type: "GET", url: "/books/myaction.js",
  success: function(data){
    console.log(data); 
  } 
}); 
```

Rails 抱怨找不到视图

```
ActionView::MissingTemplate with {:locale=>[:en], :formats=>[:js, :html], :handlers=>[:erb, :builder, :coffee, :haml]} 
```

显然，如果我创建一个相应的 myaction.html.haml 文件，它会很高兴并且一切正常。但是我不想为这个动作创建一个视图，因为这只会用于 ajax 请求。有没有办法在不为其创建视图的情况下对自定义操作进行 ajax 调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T23:24:36.787

你只需要放在`render :json => {:example => :object}`最后。例如：

```
def myaction
  respond_to do |format|
    format.js do
      # do stuff
      render :json => {:result => :of_stuff}
    end
  end
end 
```

当然，如果您知道您只会将其用于 AJAX 请求，那么您可以完全跳过 respond_to（这将允许您调用带有或不带有 URI 的 URI `.js`）：

```
def myaction
  render :json => {:result => :of_stuff}
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T23:57:28.907

你有 respond_to :html，我敢打赌你的 javascript 没有设置“Accept: application/json”。从类级别和方法中删除 respond_to。

# sql - 获取组中的记录位置+每条记录上组的记录数

> ID：12829431
> 
> 赞同：2
> 
> 时间：2012-10-10T22:30:19.393
> 
> 标签：sql, sql-server, ranking-functions

我在 SQL Server 2008 的临时表中有一个结果集。其中一个字段是组 ID，对于每个组，我可以有任意数量的行。我想在新列中获取组中行的位置，例如“第 1 行，共 3 行”所以，如果我有临时表 #Data(GroupId int, Item char)

```
GroupId  Item
-------------
   5      C
   5      A
   5      T
   2      U
   3      Y
   3      L 
```

我想得到

```
GroupId  Item Pos GroupCount
----------------------------
   5      C    1     3
   5      A    2     3
   5      T    3     3
   2      U    1     1
   3      Y    1     2
   3      L    1     2 
```

我设法做到了

```
SELECT D.GroupId, D.Item, ROW_NUMBER() OVER (PARTITION BY D.GroupId ORDER BY D.Item) AS Pos, COUNT(1) AS GroupCount
  FROM #Data D
       INNER JOIN #Data DC
 GROUP BY D.GroupId, D.Item 
```

但我对此不太满意，因为查询实际上有点复杂，因为我实际上必须检索所有列，并且因为与自身进行内部连接以获取组行数和要获取的分区行位置似乎太多了。有没有更简单的方法来做到这一点？

* * *

我没有完全使用蒂姆的答案，但它向我展示了方式：

```
SELECT D.GroupId, D.Item,
       ROW_NUMBER() OVER (PARTITION BY D.GroupId ORDER BY D.Item) AS Pos,
       COUNT(D.GroupId) OVER (PARTITION BY D.GroupId) AS GroupCount
  FROM #Data D 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T22:37:08.547

您可以使用`COUNT(GroupID)OVER(PARTITION BY GroupID)`：

```
WITH CTE AS
(
  SELECT GroupId, Item
  , GroupCount = COUNT(GroupID) OVER (PARTITION BY GroupID)
  , Pos = ROW_NUMBER() OVER (Partition By GroupID Order By GroupId)
  FROM #Data
)
SELECT GroupID, Item, Pos, GroupCount 
FROM CTE 
```

[OVER 子句 (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms189461.aspx)

这是一个小提琴：[http ://sqlfiddle.com/#!6/b6505/2/0](http://sqlfiddle.com/#!6/b6505/2/0)

请注意，它没有订购，因为您还没有告诉如何订购。

# python - python绘制多重图

> ID：12829435
> 
> 赞同：1
> 
> 时间：2012-10-10T22:30:51.380
> 
> 标签：python, graph, drawing

我尝试使用 graphviz 在 Python 中绘制多图。

现在我可以在 Python 中以某种方式绘制通常的图表，例如：

```
import pygraphviz as pgv
G=pgv.AGraph()
G.add_node('a')
G.add_node('b')
G.layout()
G.add_edge('a','b','first')
G.add_edge('a','b','second')
sorted(G.edges(keys=True)) 
G.draw('file.png') 
```

我得到了输出：

![在此处输入图像描述](../Images/7045afcab289f01a45531a2f07383b62.png)

但实际上我想得到多图，即

![在此处输入图像描述](../Images/047c184e8021ee042dd8030538129763.png)

但是文档仍然认为它应该区分：

![在此处输入图像描述](../Images/e1471cfa0fe7db94c7246e7ae117bc8e.png)

我不知道绘制多图，而不仅仅是图。

谢谢你的帮助。

**添加：**

似乎 python 中还没有这样的库可以做到这一点，所以我使用 Wolfram Mathematica 做到了。但问题仍然存在。

**添加**

现在工作代码看起来是这样的：

```
import pygraphviz as pgv
G=pgv.AGraph(strict=False)
G.add_node('a')
G.add_node('b')
G.layout()
G.add_edge('a','b','first')
G.add_edge('a','b','second')
sorted(G.edges(keys=True)) 
G.draw('file.png') 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T14:38:02.170

正如您引用的文档所说，您需要`strict=False`在创建多边图时指定。由于您没有这样做，因此您的图表不支持平行边。

# matlab - bar3 颜色取决于 zdata

> ID：12829438
> 
> 赞同：7
> 
> 时间：2012-10-10T22:31:02.940
> 
> 标签：matlab, colors, plot, customization, histogram

使用[`bar3`函数](http://www.mathworks.nl/help/matlab/ref/bar3.html)时，条形的颜色取决于数据所在的列或行。示例：

```
data = peaks(20);
bar3(data);
view(-135,30) 
```

![bar3 示例](../Images/2c739ef9ba5a09ee35551edc919d0d3a.png)

如何使每个条的颜色仅取决于该条的高度（zdata）？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-10T22:31:02.940

很难弄乱条的颜色，因为所有的条都是用补丁构建的。您必须更改补丁顶点的 zdata；因为这不是很简单，我为此目的制作了一个函数：[bar3c](https://github.com/GuntherStruyf/matlab-tools/blob/master/bar3c.m)

例子：

```
data = peaks(20);
bar3c(data);
view(-135,30) 
```

![bar3c 示例](../Images/567b60b57a81c3905a8dd0a50e07611f.png)

## 编辑

如果您想使用其他颜色，只需更改[colormap](http://www.mathworks.nl/help/matlab/ref/colormap.html)即可。
如果您想设置整个范围以获得相同的颜色，而不是在最小/最大值之间获得渐变，则必须将调用更改为`makecdata`. 现在它使用`zdata`来指定其颜色，您可以轻松更改它以赋予范围特定颜色。

实际上，我只是这样做了，结果可以在[这里](https://github.com/GuntherStruyf/matlab-tools/blob/master/bar3crange.m)找到。

例子：

```
data = peaks(20);
bar3crange([-8 0 3 4 8], data);
% colormap: red/yellow/green/blue
colormap([1 0 0;1 1 0;0 1 0;0 0 1]);
view(-135,30); 
```

![bar3crange 示例](../Images/cb82b42ead4186f61dcc1184eb6854a1.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-12T01:00:13.403

或者，如果您想在没有外部功能的情况下执行此操作，请尝试

```
data = peaks(20);
h = bar3(data);
view(-135,30);

for i = 1:size(data,2)
    cdata = get(h(i),'cdata');
    k = 1;
    for j = 0:6:(6*size(data,1)-6)
        cdata(j+1:j+6,:) = data(k,i);
        k = k+1;
    end
    set(h(i),'cdata',cdata);
end

colormap(jet); 
```

![在此处输入图像描述](../Images/91ebf9a36365dc5217309d0e6bc83f3b.png)

感谢[aiZac](http://www.aizac.info/matlab-3d-bars-arrays-without-empty-elements/)的 Sebastian 获得灵感。

# ruby-on-rails - 将表导出到 YAML 文件时遇到编码问题

> ID：12829441
> 
> 赞同：0
> 
> 时间：2012-10-10T22:31:14.063
> 
> 标签：ruby-on-rails, utf-8, yaml

将表导出到 yaml 文件时出现以下错误：

```
Encoding::UndefinedConversionError: "\xC3" from ASCII-8BIT to UTF-8 
```

这是生成错误的代码：

```
 File.open("#{Rails.root}/lib/users.yml", 'w') do |file|
    users = User.all
    YAML::dump(users, file)
  end 
```

我已经尝试对所有用户模型的内容属性执行此操作：

```
about_me.force_encoding("utf-8")
save 
```

……显然无济于事。我是否正确强制编码？有没有其他方法可以解决这个问题？我不介意去掉非 utf8 字符；我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T21:23:10.323

这为我解决了这个错误：

```
myString.unpack('U*').pack('U*') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T23:39:03.200

您可以使用[https://github.com/astro/utf8cleaner](https://github.com/astro/utf8cleaner)清理非 utf8 字符。您可以尝试 str.encode('utf-8', :invalid => :replace, :replace => '')，由于某种原因对我不起作用。您可以尝试的另一件事是以 ASCII-8BIT 编写文件，例如 File.open('file.yml', 'w:ASCII-8BIT')

# android - 如何设置一个在 Eclipse 中打开新 Activity 的简单按钮？

> ID：12829443
> 
> 赞同：-4
> 
> 时间：2012-10-10T22:31:20.390
> 
> 标签：android, eclipse

我只需要知道如何通过单击一个按钮来打开一个新的活动。另外，如何更改背景或将图像插入到活动视图中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T00:42:15.040

我假设您是指“新屏幕”的活动。出色地：

1.  使用新的 ADT v. 20 非常容易。右键单击您的项目，然后单击新建-> 其他： ![在此处输入图像描述](../Images/d6655ee1b22dde8649a462543bd35f03.png)

2.  点击安卓活动： ![在此处输入图像描述](../Images/4bef23a49515120bc29b2e92790b9980.png)

3.  现在为你的班级命名

4.  从您的第一个活动开始活动，如下所示：

    `Button btn1 = (Button) findViewById(R.id.yourbuttonId); btn1.setOnClickListener(new View.OnClickListener() {`

    ```
     public void onClick(View v) {
                    // TODO Auto-generated method stub
                    Intent i;
                    Intent i = new Intent(firstActivity.this,secondActivity.class);
        startActivity(i);
                }
            }); 
    ```

您可以通过在父视图中进行设置来更改布局的背景图像：

```
android:background="@drawable/anyImage" 
```

或者

```
android:background="#ffffff" //white 
```

# ruby-on-rails - 如何重构这个 Rails 动作？

> ID：12829445
> 
> 赞同：1
> 
> 时间：2012-10-10T22:31:21.427
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

如何`new`重构这个简单的动作？

```
def new
  @payment = Payment.new(:invoice_id => params[:invoice_id])
  if @payment.invoice.present?    
    @payment.amount = @payment.invoice.balance.abs
  end
  @title = "New payment"
end 
```

我觉得有点笨拙。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T23:07:40.610

为了简化您的控制器，您应该将业务逻辑移动到您的模型中。

这里有三个建议：

如果 invoice_id 不会在您的 Payment 实例的生命周期内发生变化，并且您不需要缓存：

```
 def amount
    invoice.balance.abs
  end 
```

如果 invoice_id 不会在您的 Payment 实例的生命周期内发生变化，但您在控制器/视图中多次使用金额值。（使用缓存）：

```
 def amount
    @_amount ||= invoice.balance.abs
  end 
```

如果 invoice_id 可能在您的 Payment 实例的生命周期内发生变化，并且您需要缓存：

```
 def amount
    @_amount ||= {}
    @_amount[invoice_id] ||= invoice.balance.abs
  end

end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T01:19:54.640

除非您有一个名为 的方法，否则您的代码将不会运行`params`，但假设您有：

```
def new
  @payment = Payment.new(:invoice_id => params[:invoice_id])
  .tap{|pay| pay.invoice.tap{|inv| pay.amount = inv.balance.abs if inv.present?}}
  @title = "New payment"
end 
```

# django - Django用户身份验证不起作用

> ID：12829447
> 
> 赞同：1
> 
> 时间：2012-10-10T22:31:31.837
> 
> 标签：django, authentication

我正在使用来自 django 的默认模型用户（因为我使用的是 django-facebook）并且用户身份验证在模板中不起作用。这是代码：

```
{% if request.user.is_authenticated %}
   Welcome, {{ request.user.first_name }}
   <a href="/logout">logout</a>
{% else %}
   <form action="{% url facebook_connect %}?facebook_login=1" method="post">
        <a href="javascript:void(0);" style="font-size: 20px;" onclick="F.connect(this.parentNode);">
             <img src="/media/images/site/facebook_login.png" alt="facebook_login" class="facebook_login_button"/>
        </a>
        <input type="hidden" value="{{ request.path }}" name="next" />
   </form>
{% endif %} 
```

我已经从视图中传递了 context_instance：

```
return render_to_response('index.html', context, context_instance=RequestContext(request)) 
```

但它仍然行不通。谢谢你的帮助！

编辑：

用户使用 django-facebook 成功登录（插入到 auth_user 表中）并显示了他的数据，但是当用户注销时，他的数据消失了，并且在上面编辑的代码中看到的登录表单没有显示！

这是我用于登录和注销用户的完整视图：

```
def logout_view(request):
    logout(request)
    return HttpResponseRedirect('/')

def signin(request):
    username = request.POST['username']
    password = request.POST['password']
    user = authenticate(username=username, password=password)
    if user is not None:
        if user.is_active:
            login(request, user)
            return HttpResponseRedirect('/')
        else:
            # TO RETURN ERROR
            return HttpResponseRedirect('/')
    else:
        # TO RETURN ERROR
        return HttpResponseRedirect('/') 
```

如果我从 request.user.first_name 中删除请求，则会出现错误：

> 您需要在项目设置中设置 AUTH_PROFILE_MODULE

这就是我能得到的所有细节..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T01:40:57.140

我不知道为什么`request.user.is_authenticated`不起作用，但我找到了解决方案 - 使用

`{% if not user.is_anonymous %}`

代替

`{% if request.user.is_authenticated %}`

似乎可以解决问题。如果有效并且仅显示登录用户的信息和注销按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T10:58:09.273

is_authenticated() 是一个函数调用，而不是可以像您在模板代码中那样使用的属性

# javascript - 如何为跨度属性创建正则表达式？

> ID：12829448
> 
> 赞同：1
> 
> 时间：2012-10-10T22:31:33.143
> 
> 标签：javascript, html, regex, asp.net-mvc

好吧，我承认，我不擅长正则表达式。我正在尝试获取属性 data-hover-id 的值。

我有以下 javascript 代码：

```
var editText = "<span class='hover-content' data-hover-id='2' >Some text</span>";

var hoverId = -1;

// Get HoverID if it exists
var regex = /span.*data-hover-id=["']?((?:.(?!["']?\s+(?:\S+)=|[>"']))+.)["']?/;
var result = regex.exec(editText);
if (result.length > 1) {
  hoverId = result[1];
} 
```

上述代码的结果是 hoverId 等于 '2（撇号 2）。

我想要不带引号或撇号的值 2。在这种情况下，正则表达式是什么？有没有更好的方法在 Javascript 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T22:38:39.787

您可以使您的正则表达式更简单，例如：

```
var re = /data-hover-id=["'](.+)["']/;
var result = re.exec(str)[1]; 
```

**编辑：**如果您根本不需要考虑引号，请尝试以下操作：

```
/data-hover-id=['"]?([^\s>]+)['"]?/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T22:43:12.033

一种简单的方法（避免混乱的字符串操作）：

```
var editText = "<span class='hover-content' data-hover-id='2' >Some text</span>",
    tmp = document.createElement('div');
tmp.innerHTML = editText;
tmp.style.display = 'none';
document.getElementsByTagName('body')[0].appendChild(tmp);
var hoverId = tmp.getElementsByTagName('span')[0].getAttribute('data-hover-id');
tmp.parentNode.removeChild(tmp);

alert(hoverId);​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/rXGrP/)。

但是，鉴于：

> 该字符串被操纵。

我还将提供：

```
var editText = "<span class='hover-content' data-hover-id='2' >Some text</span>",
    parts = editText.split(/\s+/),
    hoverId = -1;

for (var i = 0, len = parts.length; i < len; i++) {
    if (parts[i].indexOf('data-hover-id') == 0) {
        hoverId = parseInt(parts[i].split('=')[1].match(/\d+/), 10)
    }
}
console.log(hoverId);​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/rXGrP/1/)。

还有一个更简洁（虽然可能很脆弱）的解决方案：

```
var editText = '<span class="hover-content" data-hover-id=2 >Some text</span>',
    hoverId = editText.match(/\s?data\-hover\-id=(?:['"])?(\d+)(?:['"])?/)[1] || -1;

console.log(hoverId); 
```

Works with single-quoted (`'`) attribute-values: [JS Fiddle demo](http://jsfiddle.net/davidThomas/rXGrP/8/).

Works with double-quoted (`"`) attribute-values: [JS Fiddle demo](http://jsfiddle.net/davidThomas/rXGrP/7/).

Work with unquoted values: [JS Fiddle demo](http://jsfiddle.net/davidThomas/rXGrP/6/).

# ruby-on-rails - 合并具有相同键的值

> ID：12829450
> 
> 赞同：3
> 
> 时间：2012-10-10T22:31:44.790
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我需要图表的值，并且我希望合并具有相同日期的所有值。

这是我现在拥有的数组：

```
[ ['2012-10-09', 1], ['2012-10-09', 2], ['2012-10-10', 1], ['2012-10-10', 4], ['2012-10-10', 1], ['2012-10-11', 3] ] 
```

我想要的结果：

```
[ ['2012-10-09', 3], ['2012-10-10', 6], ['2012-10-11', 3] ] 
```

有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T23:43:17.770

就那么简单：

```
a.inject({}) { |h,(date, count)| h[date] ||= 0; h[date] += count; h }.to_a 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T22:45:01.727

使用 rails 的[group_by](http://api.rubyonrails.org/classes/Enumerable.html#method-i-group_by)，您可以这样做：

```
x = [ ['2012-10-09', 1], ['2012-10-09', 2], ['2012-10-10', 1], ['2012-10-10', 4], ['2012-10-10', 1], ['2012-10-11', 3] ]
x.group_by(&:first).map { |k, v| [k, v.map(&:last).inject(0,&:+)] } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T22:59:14.420

Mapreduce 是一个非常强大的工具，但是理解起来有点复杂。所以使用 sum 方法也是一样的：

```
x = [ ['2012-10-09', 1], ['2012-10-09', 2], ['2012-10-10', 1], ['2012-10-10', 4], ['2012-10-10', 1], ['2012-10-11', 3] ]
expected = [ ['2012-10-09', 3], ['2012-10-10', 6], ['2012-10-11', 3] ]

x.group_by(&:first).map { |k, v| [k, v.sum(&:last)] }.should == expected 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T04:25:39.257

它类似于罗马的答案，但使用三元运算符

```
a.inject({}) { |h,(date,count)| h.has_key?(date) ? h[date] += count : h[date] = count; h }.to_a 
```

# android - 有没有办法在时间间隔而不是位置变化时获取 GPS 位置？

> ID：12829458
> 
> 赞同：0
> 
> 时间：2012-10-10T22:32:28.187
> 
> 标签：android, gps

我的客户想要一个 GPS 应用程序，它会以相等的时间间隔生成所有 GPS 位置的电子表格。您可以使用微调器设置时间间隔。

现在，当位置更改使用`LocationManager`经理的`onLocationChanged(Location loc)`回调时，我的应用程序会获取新的 GPS 位置。

有没有办法在时间间隔而不是位置改变时获取新的 GPS 位置？

代码：

```
public void onCreate(Bundle savedInstanceState) {  
  super.onCreate(savedInstanceState);  
  setContentView(R.layout.main);  

  //if you want to lock screen for always Portrait mode    
  setRequestedOrientation(ActivityInfo  
  .SCREEN_ORIENTATION_PORTRAIT);  

  pb = (ProgressBar) findViewById(R.id.progressBar1);  
  pb.setVisibility(View.INVISIBLE);  

  viewLog= (TextView) findViewById(R.id.ViewLong); 
  viewLat= (TextView) findViewById(R.id.ViewLat); 

  locationMangaer = (LocationManager)   
  getSystemService(Context.LOCATION_SERVICE);  
  StartGPS();
 }  

void  StartGPS()
{

 flag = displayGpsStatus();  
  if (flag) {  

   pb.setVisibility(View.VISIBLE);  
   locationListener = new MyLocationListener();  

   locationMangaer.requestLocationUpdates(LocationManager .GPS_PROVIDER, 5000, 10,locationListener);  

   } else {  
   alertbox("Gps Status!!", "Your GPS is: OFF");  
  }  

 }  

@Override  
 public void onClick(View v) {  

 }  

 /*----------Listener class to get coordinates ------------- */  
 private class MyLocationListener implements LocationListener {  
        @Override  
        public void onLocationChanged(Location loc) {  

            String longitude = "Longitude: " +loc.getLongitude(); 
               viewLog.setText(longitude);  
               String latitude = "Latitude: " +loc.getLatitude(); 
               viewLat.setText( latitude); 
               pb.setVisibility(View.INVISIBLE); 

        }  

        @Override  
        public void onProviderDisabled(String provider) {  
            // TODO Auto-generated method stub           
        }  

        @Override  
        public void onProviderEnabled(String provider) {  
            // TODO Auto-generated method stub           
        }  

        @Override  
        public void onStatusChanged(String provider,   
  int status, Bundle extras) {  
            // TODO Auto-generated method stub           
        }  
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T23:07:47.160

像现在一样注册位置更新。忽略传递给您的值`LocationListener`。在您想要的轮询频率上，调用`getLastKnownLocation()`您用于位置更新的任何提供商。

# python - unicode字符串到python中的PCRE正则表达式

> ID：12829459
> 
> 赞同：2
> 
> 时间：2012-10-10T22:32:30.670
> 
> 标签：python, regex, pcre

我有一个 unicode 字符串

```
u"\uC3A9\xe9"
```

，我想在 PCRE 支持的正则表达式中转换

```
"\x{c3a9}\x{e9}​​"
```

在蟒蛇。

是否有任何模块已经这样做了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T23:01:49.843

我不知道有任何模块可以做到这一点，但这是一个潜在的解决方案：

```
import re

def pcre_escape_repl(match):
    char = match.group(0)
    if ord(char) in range(32, 127):
        # if this is a printable ascii character, use re.escape instead of a \x escape
        return re.escape(char)
    # replace non-ascii (or non-printable) characters with a \x escape
    return r'\x{' + hex(ord(char))[2:] + '}'

def pcre_escape(s):
    regex = re.compile('.', re.DOTALL)
    return regex.sub(pcre_escape_repl, s) 
```

例子：

```
>>> print pcre_escape(u"\uC3A9\xe9")
\x{c3a9}\x{e9}
>>> print pcre_escape("[foo]{bar}")
\[foo\]\{bar\} 
```

# python - 正则表达式重新匹配小数和整数

> ID：12829463
> 
> 赞同：1
> 
> 时间：2012-10-10T22:32:44.770
> 
> 标签：python, expression, findall

```
string = '-p 0 0.6724194 0.4034517 -p 0 0 0.4034517 -p 0 0 0.6724194'

arrays = re.findall(r'-?\d+?.\d+|-?\d', string) 
```

我一直在尝试获取`-p`字符串中的值列表。我一直在使用的表达方式不起作用。我试图返回这样的东西：

```
['0, 0.6724194, 0.4034517', '0, 0, 0.4034517', '0, 0, 0.6724194'] 
```

稍后我显然会将其转换为浮点数，但感谢您的帮助！

我正在寻找正则表达式修复，不过感谢您提供其他选项！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T22:37:48.953

试试这个：

```
>>> st = '-p 0 0.6724194 0.4034517 -p 0 0 0.4034517 -p 0 0 0.6724194'
>>> [f.strip() for f in st.split('-p') if f]
['0 0.6724194 0.4034517', '0 0 0.4034517', '0 0 0.6724194'] 
```

或者：

```
>>> [', '.join(f.strip().split()) for f in st.split('-p') if f]
['0, 0.6724194, 0.4034517', '0, 0, 0.4034517', '0, 0, 0.6724194'] 
```

或者，您可能只想得到一个浮动列表列表：

```
>>> [[float(e) for e in f.strip().split()] for f in st.split('-p') if f]
[[0.0, 0.6724194, 0.4034517], [0.0, 0.0, 0.4034517], [0.0, 0.0, 0.6724194]] 
```

或者，也许是一本字典：

```
>>> {i:[float(e) for e in f.strip().split()] for i,f in enumerate(st.split('-p')[1:])}
{0: [0.0, 0.6724194, 0.4034517], 1: [0.0, 0.0, 0.4034517], 2: [0.0, 0.0, 0.6724194]} 
```

或者，如果你真的想要一个正则表达式：

```
>>> re.findall(r'-[a-zA-Z]\s(\d?\.?\d+\s\d?\.?\d+\s\d?\.?\d+)', st)
['0 0.6724194 0.4034517', '0 0 0.4034517', '0 0 0.6724194'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T22:37:51.580

请注意，句点/点/句号字符匹配任何字符。您可能想专门匹配小数点，因此请尝试转义句点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T22:56:03.203

```
import re
string = '-p 0 0.6724194 0.4034517 -p 0 0 0.4034517 -p 0 0 0.6724194'
for data in re.findall(r'[\s0-9\.]+', string):
    print data.split() 
```

结果如下：

```
['0', '0.6724194', '0.4034517']
['0', '0', '0.4034517']
['0', '0', '0.6724194'] 
```

# pyqt4 - 为什么单击 qlistview 中的项目会在拖放后将它们恢复到以前的状态？

> ID：12829477
> 
> 赞同：0
> 
> 时间：2012-10-10T22:33:35.773
> 
> 标签：pyqt4, qlistview

我已经实现了拖放以在列表视图中重新排序项目，并且我的所有调试输出都表明它工作正常。但是，当我再次选择一个项目时，它会恢复到视图中之前的状态，当它被取消选择时，模型中也会发生这种变化。
例子：

```
                       列表视图显示模型显示
                         a, b, c, da, b, c, d
拖放后 b, c, d, ab, c, d, a
单击第一项 a, c, d, ab, c, d, a
单击第二项 a, b, d, aa, c, d, a
等等

```

希望这是有道理的。有什么建议为什么会发生这种情况？（代码示例很困难，因为这是大型应用程序的一部分）

编辑：这是我能为代码做的最好的事情。

自定义列表视图（我有一个自定义列表视图，因为它需要在项目移动时发出信号，并且 indexMoved 似乎已损坏）：

```
from PyQt4.QtCore import *
from PyQt4.QtGui import *

import traceback

class ListOrderView(QListView):

    itemMoved = pyqtSignal(int, int, QStandardItem) # Old index, new index, item 

    def __init__(self, parent=None):
        try:
            super(ListOrderView, self).__init__(parent)

            self.setAcceptDrops(True)
            self.setDragEnabled(True)
            self.setDragDropMode(QAbstractItemView.InternalMove)
            self.setDefaultDropAction(Qt.MoveAction)

            self.dragItem = None
            self.dragRow = None
        except:
            Trace2.WriteLine(str(traceback.format_exc())) #writes stuff to a log file

    def dropEvent(self, event): 
        try:
            super(ListOrderView, self).dropEvent(event) 

            self.itemMoved.emit(self.dragRow, self.row(self.dragItem), self.dragItem)
            self.dragItem = None
        except:
            Trace2.WriteLine(str(traceback.format_exc()))

    def startDrag(self, supportedActions): 
        try:
            self.dragItem = self.currentItem() 
            self.dragRow = self.row(self.dragItem) 
            super(ListOrderView, self).startDrag(Qt.MoveAction)
        except:
            Trace2.WriteLine(str(traceback.format_exc()))

    def currentItem(self):
        index = self.currentIndex()
        item = self.model().itemFromIndex(index)
        return item

    def row(self, item):
        index = self.selectedIndexes()[0]
        row = index.row()
        return row 
```

使用它的 gui（只是一个带有自定义列表视图的表单，在 qt 设计器中创建）：

```
from PyQt4.QtCore import *
from PyQt4.QtGui import *
from FormsUI.ListOrderControlUI import Ui_ListOrderControl

import traceback

class ListOrderControl(QWidget, Ui_ListOrderControl):
    def __init__(self, parent=None):
        super(ListOrderControl, self).__init__(parent)
        self.setupUi(self)

        self.model = QStandardItemModel()
        self.model.setSupportedDragActions(Qt.MoveAction)
        self.listOrderView.setModel(self.model) #the custom list view
        self.model.dataChanged.connect(self.onDataChanged)

    def addItem(self, string, select=False):
        item = QStandardItem(string)
        item.setDropEnabled(False)
        self.model.invisibleRootItem().appendRow(item)
        if select:
            self.listOrderView.selectionModel().setCurrentIndex(self.model.indexFromItem(item), QItemSelectionModel.ClearAndSelect)

    def setNewItem(self, row, item):
        self.model.setItem(row, item)

    def removeRows(self, row, count):
        self.model.removeRows(row, count)

    # This is here because items are becoming drop enabled when they become unselected.
    # No idea why.
    def onDataChanged(self, topLeft, bottomRight):
        try:
            i = topLeft.row()
            while i <= bottomRight.row():
                item = self.model.item(i)
                item.setDropEnabled(False)
                i+=1
        except:
            Trace2.WriteLine(str(traceback.format_exc()))

    def printModelContents(self):
        Trace2.WriteLine("[LISTCONTROL] item order is:")
        for i in range(self.model.rowCount()):
            Trace2.WriteLine("\t" + str(self.model.item(i).data(Qt.DisplayRole).toString()) + " dropEnabled = " + str(self.model.item(i).isDropEnabled())) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T22:13:31.943

原来拖放工作正常。首先，一些背景。此列表视图是在大型应用程序中的多个位置使用的自定义小部件的一部分。在这个特定的地方，单击列表中的项目会导致父窗口小部件中的某些字段被启用并填充有关该项目的信息。这是根据列表视图中的当前选择完成的。其中一个字段是项目名称的行编辑。当其内容发生变化时，它会自动更新其项目的名称。

这意味着当一个项目被拖动并且选择留在后面时，行编辑的内容会发生变化，更新现在位于被拖动项目在视图中的项目，但直到稍后通过一些信号/插槽巫术才在模型中。

最终，[这](https://stackoverflow.com/questions/12846509/how-to-tell-where-an-item-was-dropped-in-qlistview)是答案；让模型使用删除项目的行发出信号，并根据该信号而不是选择模型更新/填充字段。

# java - 在 android 中从 byte[] 写入文件失败

> ID：12829492
> 
> 赞同：1
> 
> 时间：2012-10-10T22:35:09.290
> 
> 标签：java, android, file-io

我正在编写一个必须通过蓝牙发送一些文件的应用程序。客户端收到一个字节数组，然后必须将其构造成文件。但是只有数组中的几行被复制到文件中！这是我来自线程的代码，其中读取了来自服务器的每条消息：

编辑：尝试/捕获代码。

```
try {   
    FileOutputStream fos = new FileOutputStream("//mnt//sdcard//" + fileName);    
    fos.write(buffer);
    fos.close();
}
catch(FileNotFoundException e) {
    Log.d("FAIL", e.toString());
    }
catch (IOException e) {
    Log.d("FAIL", e.toString());
} 
```

缓冲区是字节[]。我什至检查了 Toast：缓冲区一切正常。它包含文件中的每个符号，但我无法以某种方式全部写入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T23:03:49.770

您永远不应该像以前那样对文件路径进行硬编码。

在 android 中，你应该使用 Environment.getExternalStorageDirectory

```
String fname = Environment.getExternalStorageDirectory() + "myfile.jpg";
File file = new File( fname ); 
```

如果您未在文件路径中指定 Environment.getExternalStorageDirectory，它将在您的应用安装文件夹中返回。

在您的情况下，此文件可能已写入“com.your.package/test.jpg”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T22:49:17.353

您可以尝试使用的示例是：

```
FileOutputStream outputStream = new FileOutputStream(new File(context.getCacheDir(), FILENAME), false);
OutputStream out = new BufferedOutputStream(outputStream);
byte[] loginBuffer = new byte[1024];
int byteRead = 0;
while((byteRead = in.read(loginBuffer)) != -1) {
    out.write(loginBuffer, 0, byteRead);
}
out.close(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-10T22:43:41.367

试着告诉你想在文件上写多少

fos.write（缓冲区，0，x）；

其中 x 是以字节为单位的缓冲区大小，0 是偏移量

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-12T12:51:48.873

我认为最可能的罪魁祸首是您的应用程序没有写权限。

请参阅[https://sites.google.com/site/androidhowto/how-to-1/save-file-to-sd-card](https://sites.google.com/site/androidhowto/how-to-1/save-file-to-sd-card)

> 您需要将以下内容添加到您的 AndroidManifest.xml：
> 
> `<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>`
> 
> 注意：`FileNotFoundException`如果您尝试在 SD 卡上打开/创建一个文件，当它安装在您的计算机上时，您会得到一个。您必须先卸载它，然后才能在应用程序中访问它。

# .net - GAC 中存在程序集，但系统仅在复制到本地目录时才找到它。为什么？

> ID：12829502
> 
> 赞同：3
> 
> 时间：2012-10-10T22:35:51.193
> 
> 标签：.net, gac, .net-assembly

[我的情况与此处](https://stackoverflow.com/questions/3394106/gac-assembly-is-in-the-gac-but-could-not-load-file-or-assembly "这个")详述的情况类似，它也有一个很好的解决方案。我解决错误的方式与帖子中的不同。我不确定为什么它解决了这个问题。我很想知道为什么。

我的情况 - 我有一个本机 32 位程序集 A.exe，它正在加载 System.Data，而 System.Data 又在加载 System.Numerics。System.Numerics 发生了“无法加载程序集”。GAC 中存在 System.Numerics 程序集，我使用融合日志查看器确保预期程序集的公钥令牌与 GAC 中的公钥令牌匹配。但是融合日志仍然会说 GAC 查找不成功。

当我将 System.Numerics 程序集从 GAC 位置复制到 A.exe 目录时，问题就消失了。我很好奇为什么这解决了这个问题以及为什么 GAC 查找不成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T17:40:24.993

如果您在**64 位**机器上开发并在解决方案中的任何项目上使用“**使用任何 CPU** ”，则默认情况下会加载**64 位**的 GAC 程序集。为避免这种情况，您将所有项目设置为**仅使用 32bit**进行编译。这样，将只使用 32 位 GAC。

# javascript - 没有id的按钮怎么点击

> ID：12829505
> 
> 赞同：2
> 
> 时间：2012-10-10T22:36:00.833
> 
> 标签：javascript, html, dom

我想单击名为 的按钮`Envoi`，但找不到要使用的 id 来引用它`getElementById("Envoi").click`。有没有其他方法可以做到这一点？

网站名称是： http: [//famille-frappier.fr/](http://famille-frappier.fr/) ，按钮名称是`Envoi`。

相关的html是：

`<input type="button" value="Envoi">`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T22:43:44.883

**使用纯 Javascript：**

我看到了你的网站，你没有使用 jQuery，所以我的解决方案也没有使用它。

在你的情况下，你的按钮中没有 id 或 name，你只有值，所以你需要使用这个：

```
document.querySelector('input[value="Envoi"]').click() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T22:40:51.473

如果你可以使用 jQuery，你可以做

```
$('input[value="Envoi"]').click(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T22:42:17.930

要获取元素，您可以使用`document.getElementsByTagName()`获取所有元素，然后遍历它们以找到您感兴趣的元素：

```
var elements = document.getElementsByTagName("input");
var envoi;
for (var i in elements) {
    if (elements[i].getAttribute && elements[i].getAttribute("value") == "Envoi") {
        envoi = elements[i];
        break;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T22:42:20.490

```
var els = document.getElementsByTagName("input");
for(var i=0; i<els.length; i++){
  if(els[i].value=='Envoi') //do something with els[i], thats your button
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T22:48:25.020

好吧，如果你在控制台中输入这个，你会看到 Envoi 这个词。

```
document.getElementById('nav_554').getElementsByTagName('input')[0].value 
```

因此，您可以使用表达式来附加单击事件侦听器。或者，当然，您可以将 onclick 属性添加到按钮本身。

输入控制台的这段代码将附加一个函数到该按钮：

```
document.getElementById('nav_554').getElementsByTagName('input')[0].addEventListener('click', function(){alert("you clicked me");}, false); 
```

不需要 jQuery - 这个简单的任务完全是多余的。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-10T22:40:38.377

您可以使用`document.getElementsByName()`来检索按钮。

```
var button = document.getElementsByName('Envoi');
button.click (); 
```

[这是一个例子](http://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_doc_getelementsbyname)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-10-10T22:42:05.163

我认为最简单的方法是使用 JQuery。

```
$('[name="Envoi"]').click(); 
```

只需下载 JQuery.js 并将其包含在页面中，上面的语句就可以工作。欲了解更多信息，请查看[http://api.jquery.com](http://api.jquery.com)

# javascript - “WebGL - Up and Running” 怪事：应该使用构造函数实例作为原型吗？

> ID：12829509
> 
> 赞同：0
> 
> 时间：2012-10-10T22:36:11.623
> 
> 标签：javascript, webgl, three.js

在“WebGL - Up and Running”一书中，以一种非常平淡的方式构建了一个自定义几何图形。然而，倒数第二行代码让我大吃一惊。代码如下：

```
Saturn.Rings = function ( innerRadius, outerRadius, nSegments ) {

    THREE.Geometry.call( this );

    var outerRadius = outerRadius || 1,

    ...snip snip snip...

    this.computeCentroids();
    this.computeFaceNormals();

    this.boundinSphere = { radius: outerRadius };
};

Saturn.Rings.prototype = new THREE.Geometry();
Saturn.Rings.prototype.constructor = Saturn.Rings; 
```

我的问题是：他为什么在原型链中使用构造函数实例？为什么不能`Saturn.Rings.prototype`只是继承自的新空白对象`THREE.Geometry.prototype`？不应该把所有值得继承的东西都放在里面`THREE.Geometry.prototype`吗？为什么他让原型成为几何构造函数的实例？（我知道原型链仍然是正确的，因为新原型继承自`THREE.Geometry`的原型）。

此外，在上面代码的第二行中，实例`Saturn.Rings`被放入`THREE.Geometry`构造函数中。`THREE.Geometry`因此，他们从施工过程中得到了他们梦寐以求的一切。因此，没有必要对他们的原型做同样的事情。

让我们看一下three.js本身是如何处理类似几何的：

```
THREE.CubeGeometry = function ( width, height, depth, segmentsWidth, segmentsHeight, segmentsDepth, materials, sides ) {

    THREE.Geometry.call( this );

    ...snip snip snip...

    }

    this.computeCentroids();
    this.mergeVertices();

};

THREE.CubeGeometry.prototype = Object.create( THREE.Geometry.prototype ); 
```

整齐多了。唯一的问题是他忘记将原型的“构造函数”属性设置为指向`THREE.CubeGeometry`，但这是另一回事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T23:38:17.037

调用构造函数可能是为了兼容性。 `Object.create()`是 JavaScript 的一个相对较新的补充，在 ECMAScript 5 发布之前发布的一些浏览器（例如 IE8 和 IE7）不支持。仅仅调用另一个对象的构造函数是不足以让该对象继承另一个对象的原型（[demo](http://jsfiddle.net/yTevE/)）。避免调用父对象的构造函数当然有好处，但是否`Object.create()`“更整洁”是有争议的。

# mongodb - MongoDb PHP ensureIndex（唯一，dropDubs）：错误“不能从 commitIfNeeded 提交，因为我们在本地数据库锁中”？

> ID：12829513
> 
> 赞同：0
> 
> 时间：2012-10-10T22:36:47.777
> 
> 标签：mongodb, mongodb-php, mongodb-query

在带有 PHP 的 MongoDb 2.2.0 上，我正在运行这个简单的命令：

```
 $collection->ensureIndex(array(
    'feed_nid' => 1,
    'guid' => 1,
  ), array(
    'unique' => TRUE,
    'dropDups' => TRUE,
  )); 
```

它应该创建一个新的唯一索引，并删除重复项。但是 MongoDb 陷入了这样的循环：

```
Thu Oct 11 00:31:09 [conn4] ERROR: can't commitNow from commitIfNeeded, as we are in local db lock
Thu Oct 11 00:31:10 [conn4] mongod.exe    ...\src\mongo\util\stacktrace.cpp(161)                           mongo::printStackTrace+0x3e
Thu Oct 11 00:31:10 [conn4] mongod.exe    ...\src\mongo\db\dur.cpp(279)                                    mongo::dur::DurableImpl::_aCommitIsNeeded+0x42a
Thu Oct 11 00:31:10 [conn4] mongod.exe    ...\src\mongo\db\index_update.cpp(401)                           mongo::BackgroundIndexBuildJob::addExistingToIndex+0x4c3
Thu Oct 11 00:31:10 [conn4] mongod.exe    ...\src\mongo\db\index_update.cpp(440)                           mongo::BackgroundIndexBuildJob::go+0xe0
Thu Oct 11 00:31:10 [conn4] mongod.exe    ...\src\mongo\db\index_update.cpp(501)                           mongo::buildAnIndex+0x321
Thu Oct 11 00:31:10 [conn4] mongod.exe    ...\src\mongo\db\pdfile.cpp(1356)                                mongo::insert_makeIndex+0x288
Thu Oct 11 00:31:10 [conn4] mongod.exe    ...\src\mongo\db\pdfile.cpp(1529)                                mongo::DataFileMgr::insert+0xbac
Thu Oct 11 00:31:10 [conn4] mongod.exe    ...\src\mongo\db\pdfile.cpp(1217)                                mongo::DataFileMgr::insertWithObjMod+0x48
Thu Oct 11 00:31:10 [conn4] mongod.exe    ...\src\mongo\db\instance.cpp(761)                               mongo::checkAndInsert+0xb7
Thu Oct 11 00:31:10 [conn4] mongod.exe    ...\src\mongo\db\instance.cpp(821)                               mongo::receivedInsert+0x790
Thu Oct 11 00:31:10 [conn4] mongod.exe    ...\src\mongo\db\instance.cpp(434)                               mongo::assembleResponse+0x5ff
Thu Oct 11 00:31:10 [conn4] mongod.exe    ...\src\mongo\db\db.cpp(192)                                     mongo::MyMessageHandler::process+0xf5
Thu Oct 11 00:31:10 [conn4] mongod.exe    ...\src\mongo\util\net\message_server_port.cpp(86)               mongo::pms::threadRun+0x59a
Thu Oct 11 00:31:10 [conn4] mongod.exe    ...\src\third_party\boost\libs\thread\src\win32\thread.cpp(180)  boost::`anonymous namespace'::thread_start_function+0x21
Thu Oct 11 00:31:10 [conn4] mongod.exe    f:\dd\vctools\crt_bld\self_64_amd64\crt\src\threadex.c(314)      _callthreadstartex+0x17
Thu Oct 11 00:31:10 [conn4] mongod.exe    f:\dd\vctools\crt_bld\self_64_amd64\crt\src\threadex.c(292)      _threadstartex+0x7f
Thu Oct 11 00:31:10 [conn4] kernel32.dll 
```

这个堆栈重复了数千次，却从未破坏过“本地数据库锁”。这是在一个完全没有流量的测试服务器上。尝试重启 MongoDb 几次，无济于事。

有什么帮助...？

**-附加信息-**

在 Windows 7 64 位上使用 Apache 2.4.2、PHP 5.4.3 在 WAMP 上运行。它是来自 downloads.mongodb.org/win32/mongodb-win32-x86_64-2.2.0.zip 的 64 位 MongoDb 版本

MongoDb 2.0.7 也存在这个问题......

当我使用 RockMongo 之类的工具创建索引（dropDups 独有）时，会显示不同的错误：

```
E11000 duplicate key error index: local.fields_current.flatrow.$feed_nid_1_guid_1_unq dup key: { : 314, : "299435" } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T23:19:15.740

使用“背景：真实”似乎可以完成这项工作！

```
 $collection->ensureIndex(array(
    'feed_nid' => 1,
    'guid' => 1,
  ), array(
    'unique' => TRUE,
    'dropDups' => TRUE,
    'background' => TRUE,
  )); 
```

# javascript - 为什么 JsonP 不起作用？

> ID：12829522
> 
> 赞同：2
> 
> 时间：2012-10-10T22:37:51.460
> 
> 标签：javascript, jquery, jsonp, angularjs

> **可能重复：**
> [json Uncaught SyntaxError: Unexpected token ：](https://stackoverflow.com/questions/7936610/json-uncaught-syntaxerror-unexpected-token)

**jsonp**是否依赖服务器支持才能返回正确的响应？

我收到了这个请求，我得到的是 js 错误。

```
$.getJSON('myURL?q=keyword&callback=?', function(data){console.log(data)}); 
```

甚至 angular jsonp 方法也不起作用：

[http://jsfiddle.net/neoswf/tckGG/5/](http://jsfiddle.net/neoswf/tckGG/5/)

*控制台>> js错误*：`Uncaught SyntaxError: Unexpected token :`

jsonp 是否依赖于某些服务器实现？

**解决了！！！**

这个问题与其他问题不同，因为没有其他答案谈到代理解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T22:56:46.930

服务器不返回 JSONP，而是返回 JSON。JSONP 结果是包装在函数调用中的 JSON 结果。

例子：

```
callback873659823745({"destino":"http://...", ... }) 
```

如果不能让服务器返回 JSONP，则需要一个代理服务器来请求服务并返回包装为 JSONP 结果的 JSON 结果。

[碰巧的是，我不久前在jsonp.guffa.com](http://jsonp.guffa.com)上设置了这样一个代理，如果您自己没有能力设置一个，您可以使用它。

演示：http: [//jsfiddle.net/Guffa/tckGG/6/](http://jsfiddle.net/Guffa/tckGG/6/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T22:41:36.107

是的，jsonp 需要服务器支持。服务端需要将json包装在json* *P* *的“padding”部分，这是客户端围绕响应数据定义和执行的方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T22:42:01.280

因为您的 Url 没有返回 JSONP。它正在返回 JSON。

```
{"destino":"http://www.buscape.com.br","palavras":["tv lcd 32","tv led","tv led 32","tv led 40","tv","tv led 42","tv lcd","tv lcd 42","tv lcd 26","tv 3d","tv lcd 40","tv 32","tv led 46","tv 42","tv lcd 22","tv led 32 full hd"]} 
```

例如，如果是 JSONP，请检查[flickr](http://api.flickr.com/services/feeds/photos_public.gne?jsoncallback=callbackToExecute&tags=jquery&tagmode=any&format=json&_=1349909036208)的返回值。它返回

```
callbackToExecute({... JSON Object ...}) 
```

# python - 如何获取python列表中的值并组合成一个变量 - python

> ID：12829525
> 
> 赞同：-1
> 
> 时间：2012-10-10T22:37:57.670
> 
> 标签：python, database, list, extract

我想创建一个名为“allvar”的变量，其中包含 mylist 中的所有值，例如：

```
mylist = ['X', 'Y', 'Z'] 
```

如何将 allvar 创建为类似于 .. XYZ 的东西，由一个空格而不是“，”分隔，并且没有 [] 和没有“单引号”

```
allvar = X Y Z 
```

我喜欢获取 allvar 的原因是因为我需要将此 allvar 传递到另一个已经具有此格式的主机服务器..

有什么推荐吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T23:12:22.310

您需要使用加入：

```
>>> mylist = ['X', 'Y', 'Z']
>>> allvar = ' '.join(mylist)
>>> print allvar
X Y Z 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T23:21:06.033

目前尚不清楚您要在这里做什么。如果您只是尝试发送字符串“XY Z”，其中 XY 和 Z 被替换为浮点变量，那么这将执行此操作：

allvar = '%f %f %f' % (X,Y,Z)

可以在此处找到浮点的字符串格式类型（例如 '%f'）：http: [//docs.python.org/library/stdtypes.html#string-formatting](http://docs.python.org/library/stdtypes.html#string-formatting)

如果您正在使用比浮点数、整数、字符串等更复杂的类型，或者如果您需要更紧凑的字符串表示，那么您可以使用 msgpack、json 等序列化协议。但是，远程服务器必须是能够解压缩使用序列化程序打包的数据。

# css - 为什么 display:table-cell 受其他单元格中的元素影响

> ID：12829526
> 
> 赞同：8
> 
> 时间：2012-10-10T22:37:59.403
> 
> 标签：css, css-tables

在 CSS 表格中，有人可以帮我**理解**为什么第一列中的填充元素会影响第二列中的 div 吗？

这是一个段落具有填充集的示例。右列中的 DIV 也被错误地填充了。在左列内容上指定 line-height 时我遇到了类似的问题，但简化了这个问题的示例。

[http://jsfiddle.net/APXT7/2/](http://jsfiddle.net/APXT7/2/)

关于 table-cell 有许多类似/相关的问题，但我找不到专门解决这个问题的问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-14T22:23:40.223

您可能可以使用`vertical-align:top`单元类上的垂直对齐属性 ( ) 或像[jsfiddle.net/j08691/APXT7/4](http://jsfiddle.net/j08691/APXT7/4)这样的 div 。由于这些 div 显示为表格单元格，因此这可能就是您要查找的内容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T19:41:20.130

这很可能是行高问题，而不是填充问题。这意味着，尽管您可能会怀疑，实际上并没有将填充传播到您的右列（计算值仍然为零）。我仍将其称为调整元素填充的*副作用。*`p`

元素顶部和底部的填充`p`将它们的基线向下推。这会导致同一行/行上其他“单元格”的基线也发生变化。[当然，您可以找到规范](http://www.w3.org/TR/CSS21/tables.html#height-layout)中概述的所有细节，但是由于两个“单元”具有相同的垂直对齐方式 ( `baseline`)，因此当一个单元移动时它们必须对齐。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-15T22:41:40.403

我发现了一个“解决”这个问题的黑客，但不知道为什么。`<div class='cell'>`put `<div class='hack'>&nbsp;</div>`class hack中的第一件事是`.hack { height: 0; }`如果放在左侧或右侧单元格中，这将起作用

# python - 一个奇怪的空间问题 Python

> ID：12829528
> 
> 赞同：0
> 
> 时间：2012-10-10T22:38:18.990
> 
> 标签：python, mysql

我几乎成功地通过 Python 对 MySQL 进行了查询，该查询显示了给定品牌的最常见数据集。我遇到的问题是当我尝试运行`print row[1], row[2]`命令时，它返回 productnum 而不是我想要的空间，如 product num。我试过做`print row[1], " ", row[2]`，但它不满足测试用例。有没有其他方法可以解决这个问题。我知道这听起来可能不是一个重要的问题，但它一直困扰着我，正是这个问题没有通过测试。完整代码如下。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T22:51:57.913

请不要通过连接字符串来创建 SQL。假装我是攻击者，我将您的功能称为：

```
inject = "'; SELECT name,cardnum FROM credit_cards; --"
most_popular(inject, 'LOL') 
```

您的代码将有助于将其扩展到：

```
SELECT DISTINCT brand, product, COUNT(*) AS num FROM table1 WHERE brand = ''; SELECT * FROM credit_cards; --'" "GROUP BY product ORDER BY num desc, product asc LIMIT LOL 
```

现在你的客户正在起诉你。始终，*始终*使用参数化查询，而不是自己构建查询。将其更改`cursor.execute()`为：

```
 cursor.execute("SELECT DISTINCT brand, product, COUNT(*) AS num FROM table1 WHERE brand = %s GROUP BY product ORDER BY num desc, product asc LIMIT %s", (brands, num_frequency)) 
```

多年来我一直在编写 DB 库，试图把这些东西做好的想法仍然让我感到害怕，主要是因为搞砸它的惩罚是如此严重。让您的数据库库为您完成繁重的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T22:49:04.187

怎么样`print "%s %s" % (row[1], row[2])`（不确定行是否需要显式转换）

编辑：或`print "{0} {1}".format(s, s2)`（符号`%`有点过时）

# wso2esb - 在 wso2esb 中配置安全代理时遇到问题

> ID：12829531
> 
> 赞同：1
> 
> 时间：2012-10-10T22:38:34.363
> 
> 标签：wso2esb

我正在尝试使用类似于示例 #200 的 wso2esb，它公开了一个安全的 Web 服务并在调用另一个主机/端口上的不安全服务之前删除了安全标头。我能够做到这一点，甚至集成了验证器和密码回调处理程序，但我无法将我有此工作的安装复制到另一个系统或配置另一个系统以相同的方式工作。

我尝试从全新安装 3.0.1、4.0.3 和最近的 4.5.0 开始配置此代理，所有这些都具有相似的结果，即加载凭据或最近“恢复密钥”的安全错误。

我们拥有自己的 CA 证书，并向客户颁发使用该证书签名的证书，然后客户使用他们的私钥对 SOAP 进行加密和签名。我正在使用以下安全策略文件，并且在使用和不使用回调处理程序的情况下都进行了尝试。

在启用此代理服务的安全性后，我尝试通过将其粘贴到管理 GUI 中来引用此策略文件。

我已经尝试使用 3.0 版本，我在一台服务器上工作，4.0.3 和最近的 4.5.0 根据不同版本的 wso2esb 布局的更改根据需要调整 server.jks 密钥库的位置.

我非常感谢通过一系列步骤配置安全代理服务的帮助，这些步骤可能允许我在多个系统上运行。

提前致谢 ！！

我的代理服务定义如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<proxy xmlns="http://ws.apache.org/ns/synapse" name="secureService"
statistics="disable" trace="disable" transports="https,http">
<target>
    <inSequence>
        <header action="remove" name="wsse:Security" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd"/>
    </inSequence>
    <endpoint>
        <address statistics="disable" trace="disable" uri="http://192.168.55.201:8083/NotSecureEJB/RemoteService">
            <timeout>
                <duration>0</duration>
                <action>discard</action>
            </timeout>
            <markForSuspension>
                <retriesBeforeSuspension>0</retriesBeforeSuspension>
                <retryDelay>0</retryDelay>
            </markForSuspension>
            <suspendOnFailure>
                <initialDuration>0</initialDuration>
                <maximumDuration>0</maximumDuration>
                <progressionFactor>1.0</progressionFactor>
            </suspendOnFailure>
        </address>
    </endpoint>
    <outSequence>
        <send/>
    </outSequence>
</target>
<policy key="sec_policy"/>
<enableSec/> 
```

通过以下方式从本地条目引用的安全策略：

```
<loccalEntry key="sec_policy" src="file:repository/resources/security/sec_policy.xml"/>

<wsp:Policy wsu:Id="SigEncr" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
<wsp:ExactlyOne>
<wsp:All>
  <sp:AsymmetricBinding  xmlns:sp="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy">
<wsp:Policy>
  <sp:InitiatorToken>
    <wsp:Policy>
      <sp:X509Token sp:IncludeToken="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy/IncludeToken/Never">
    <wsp:Policy>
      <sp:WssX509V3Token10/>
    </wsp:Policy>
      </sp:X509Token>
    </wsp:Policy>
  </sp:InitiatorToken>
  <sp:RecipientToken>
    <wsp:Policy>
      <sp:X509Token sp:IncludeToken="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy/IncludeToken/AlwaysToRecipient">
    <wsp:Policy>
      <sp:WssX509V3Token10/>
    </wsp:Policy>
      </sp:X509Token>
    </wsp:Policy>
  </sp:RecipientToken>
  <sp:AlgorithmSuite>
    <wsp:Policy>
      <sp:Basic128Rsa15/>
    </wsp:Policy>
  </sp:AlgorithmSuite>
  <sp:Layout>
    <wsp:Policy>
      <sp:Strict/>
    </wsp:Policy>
  </sp:Layout>
  <sp:IncludeTimestamp/>
</wsp:Policy>
  </sp:AsymmetricBinding>
  <sp:SymetricBinding xmlns:sp="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy">
<sp:AlgorithmSuite>
  <wsp:Policy>
    <sp:Basic128/>
  </wsp:Policy>
</sp:AlgorithmSuite>
  </sp:SymetricBinding>
  <sp:Wss10 xmlns:sp="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy">
<wsp:Policy>
  <sp:MustSupportRefKeyIdentifier/>
  <sp:MustSupportRefIssuerSerial/>
</wsp:Policy>
  </sp:Wss10>
  <sp:SignedParts xmlns:sp="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy">
<sp:Timestamp/>
<sp:Body/>
  </sp:SignedParts>
  <sp:EncryptedParts xmlns:sp="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy">
<sp:Body/>
  </sp:EncryptedParts>
  <ramp:RampartConfig xmlns:ramp="http://ws.apache.org/rampart/policy"> 
<ramp:user>server</ramp:user>
<ramp:encryptionUser>useReqSigCert</ramp:encryptionUser>
<ramp:passwordCallbackClass>com.testing.PWCallback</ramp:passwordCallbackClass>
<ramp:policyValidatorCbClass>com.testing.CustomPolicyValidator</ramp:policyValidatorCbClass>
<ramp:encryptionSymAlgorithm>http://www.w3.org/2001/04/xmlenc#aes128-cbc</ramp:encryptionSymAlgorithm>
<ramp:encryptionKeyTransportAlgorithm>http://www.w3.org/2001/04/xmlenc#rsa-1_5</ramp:encryptionKeyTransportAlgorithm>
<ramp:signatureCrypto>
  <ramp:crypto provider="org.apache.ws.security.components.crypto.Merlin">
    <ramp:property name="org.apache.ws.security.crypto.merlin.keystore.type">JKS</ramp:property>
    <ramp:property name="org.apache.ws.security.crypto.merlin.file">resources/security/server.jks</ramp:property>
    <ramp:property name="org.apache.ws.security.crypto.merlin.keystore.password">changeme</ramp:property>
  </ramp:crypto>
</ramp:signatureCrypto>
<ramp:encryptionCypto>
  <ramp:crypto provider="org.apache.ws.security.components.crypto.Merlin">
    <ramp:property name="org.apache.ws.security.crypto.merlin.keystore.type">JKS</ramp:property>
    <ramp:property name="org.apache.ws.security.crypto.merlin.file">resources/security/server.jks</ramp:property>
    <ramp:property name="org.apache.ws.security.crypto.merlin.keystore.password">changeme</ramp:property>
  </ramp:crypto>
</ramp:encryptionCypto>
  </ramp:RampartConfig>
</wsp:All>
</wsp:ExactlyOne>
</wsp:Policy> 
```

# android - android：无法在未调用 Looper.prepare() 的线程内创建处理程序

> ID：12829536
> 
> 赞同：1
> 
> 时间：2012-10-10T22:39:10.157
> 
> 标签：android, multithreading, handler, looper

> **可能重复：**
> [无法在 AsyncTask 中为 ProgressDialog 调用 Looper.prepare() 的线程内创建处理程序](https://stackoverflow.com/questions/3614663/cant-create-handler-inside-thread-that-has-not-called-looper-prepare-inside-a)

在我的程序中，我想显示进度对话框，因为我已经创建了线程，但它让我`Can't create handler inside thread that has not called Looper.prepare()`也看到了以前发布的问题，但我可以处理这个。这是我的代码

```
 dialog=ProgressDialog.show(Login.this, "Connecting to the Server", "Please wait");

        Thread thred=new Thread(new Runnable() {

            public void run() {
                  try {

                      // Create a new HttpClient and Post Header
                        HttpClient httpclient = new DefaultHttpClient();           
                        HttpPost httppost = new HttpPost("http://www.diskonbanget.com/bni/login/login.php");
                        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
                        nameValuePairs.add(new BasicNameValuePair("username", username));
                        nameValuePairs.add(new BasicNameValuePair("password", password));
                        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

                        // Execute HTTP Post Request

                        HttpResponse response = httpclient.execute(httppost);

                        String str = inputStreamToString(response.getEntity().getContent()).toString();

                        if(str.toString().equalsIgnoreCase("false"))
                        {
                            dialog.dismiss();
                            AlertDialog alert = new AlertDialog.Builder(Login.this).create();                       
                            alert.setMessage("Please enter valid username & Password");
                            alert.setButton("OK",new DialogInterface.OnClickListener() {
                                        public void onClick(DialogInterface dialog,int which) {
                                        }
                                    });

                          alert.setIcon(R.drawable.loginlogo); 
                          alert.show();

                        }
                        else{   

                             Intent intent=new Intent(Login.this,MainMenu.class);
                             intent.putExtra("photo", str);
                             intent.putExtra("username", username);
                             txtusername.setText("");
                             txtPassword.setText("");
                             dialog.dismiss();
                             startActivity(intent);

                        }

                    } catch (Exception e) {
                        dialog.dismiss();
                        AlertDialog alert = new AlertDialog.Builder(Login.this).create();                       
                        alert.setMessage("Can not Connect to the server.please make sure your internet is Switch on");
                        alert.setButton("OK",new DialogInterface.OnClickListener() {
                                    public void onClick(DialogInterface dialog,int which) {
                                    }
                                });
                        alert.setIcon(R.drawable.loginlogo); 

                        alert.show();
                    } 

            }
        });
        thred.start(); 
```

请有人帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T23:12:47.353

后台线程不能显示`Dialog`. 请让主应用程序线程执行此操作，例如使用 an`AsyncTask`而不是原始线程并在`onPostExecute()`.

# c# - 将值数组从 View 发送回控制器

> ID：12829537
> 
> 赞同：2
> 
> 时间：2012-10-10T22:39:15.557
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, entity-framework

我正在尝试将视图内的数组中的所有数据传递回控制器。我不确定如何使用我的 ViewModel 来做到这一点。

模型类

```
public class ResultsViewModel
{
    public int?[] ProgramIds { get; set; }

} 
```

在视图内部形成

```
@using (Html.BeginForm("ExportCsv", "SurveyResponse", FormMethod.Post))

{

   // Should I be looping through all values in the array here?
    @Html.HiddenFor(x => x.ProgramIds)

    <input type="submit" value="Submit" />
} 
```

我要发布到的控制器

```
 [HttpPost]
        public ActionResult ExportCsv(ResultsViewModel ResultsViewModel)
        {

        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T00:18:55.770

我应该在这里循环遍历数组中的所有值吗？

是的，但不要使用@Html.HiddenFor(..)，因为它似乎会生成无效的 HTML，因为它会生成具有相同 ID 的控件：

```
<input id="ProgramIds" name="ProgramIds" type="hidden" value="3" />
<input id="ProgramIds" name="ProgramIds" type="hidden" value="4" /> 
```

而是循环列表并创建自己的隐藏 html 字段：

```
for (var i = 0; i < Model.ProgramIds.Length; i++) 
{ 
    <input type="hidden" name="ProgramIds[@i]" value="@Model.ProgramIds[i]" />
} 
```

Scott Hanselman 写了一篇关于此的博客文章： [http ://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx](http://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T23:03:28.947

`Should I be looping through all values in the array here?`

是的，试试这个：

```
for (var i = 0; i < Model.ProgramIds.Length; i++) 
{ 
    @Html.HiddenFor(x => Model.ProgramIds[i]) 
} 
```

# shopify - 多个产品同时添加到购物车和订单项属性

> ID：12829544
> 
> 赞同：2
> 
> 时间：2012-10-10T22:40:31.403
> 
> 标签：shopify

有没有一种方法可以一次性将多个产品添加到 shopify 购物车，并收集这些产品的行项目属性或 customizr 变体？使用 AJAX API 或 POST 表单方法。

我的客户销售了 1000 个网球拍，它们都有弦线选项（每个球拍都一样），即使我们想要为每个产品添加这些变体的大量数据，我们在每个产品最多 100 个变体排列的产品. 我的解决方法是将字符串选项作为额外项目添加到购物车（ajax api 将工作），但我还需要收集一些其他选项数据。是否有关于使用 ajax api 添加具有“行项目属性”的项目的文档？我知道这个功能是今年夏天才添加的。

谢谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T23:22:50.620

Shopify 的 Ajax 调用是**/cart/add.js**。如果您包含属性的数据，您将看到它有效。我一直都在使用它，尽管在这个例子中，它是硬编码的。以下对我有用。显然，您可以根据自己的需要对此进行处理。

```
addItem: function(variant_id, quantity, callback) {
  var quantity = quantity || 1;
  var params = {
    type: 'POST',
    url: '/cart/add.js',
    data: 'quantity=' + quantity + '&id=' + variant_id + "&properties[foo]=fizzbuzz",
    dataType: 'json',
    success: function(line_item) {},
    error: function(xhr, status) {}
  };
  $.ajax(params);
}, 
```

# php - 如何在 Mac Os (Mountain Lion) 中使用我新安装的 php 5.4.x？

> ID：12829552
> 
> 赞同：0
> 
> 时间：2012-10-10T22:41:16.070
> 
> 标签：php, macos

我刚刚使用本指南在我的山狮系统中安装了 php 5.4.7 (http://mac.tutsplus.com/tutorials/server/upgrading-the-native-php-installation-on-os-x-mountain-lion/ ) 问题是，当使用以下代码运行一个简单的 php 文件时：

```
<?php
    phpinfo();
?> 
```

我得到有关旧 php 版本 (5.3.x) 的信息。顺便说一句，我已经将 /usr/local/bin 添加为 $PATH 变量的第一个路径，因此在命令行执行 php -v 会返回新安装的版本（5.4.x）

有任何想法吗？

PS：我放置文件的路径是 /Library/WebServer/Documents/PhpProject1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T14:22:33.987

我肯定有同样的问题。唯一的区别是我使用山狮服务器。

这个解决方案对我有用：

[http://php-osx.liip.ch/](http://php-osx.liip.ch/)

然后在控制台中：

ln -s /usr/local/bin/php /usr/bin/php

（来自[https://apple.stackexchange.com/questions/58343/php-5-4-installation-on-mountain-lion](https://apple.stackexchange.com/questions/58343/php-5-4-installation-on-mountain-lion)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-17T00:12:03.867

你可以试试这个：

1.  安装php：

    ```
    curl -s http://php-osx.liip.ch/install.sh | bash -s 5.4 
    ```

2.  将 php 5.4 设为默认版本：

    a) 打开您的路径文件。

    ```
    sudo nano /etc/paths 
    ```

    b）将您的第一行更改为：

    ```
    /usr/local/php5/bin 
    ```

# php - 实用对象 Symfony 2

> ID：12829553
> 
> 赞同：1
> 
> 时间：2012-10-10T22:41:22.323
> 
> 标签：php, symfony, cron, bundle, wamp

我曾多次尝试开始使用 symfony 2，但一直卡在这个过程中。这次我打算坚持下去！

到目前为止，我最大的问题是在没有用户交互的情况下将执行任务的对象放在哪里。

前任。

我想创建一些 php 类来处理每天左右解析来自多个网站的一些数据。我希望手动或通过 cron 作业启动此任务。因此，我只需要我猜的模型和控制器。（控制器解析站点并创建模型，模型存储解析数据并持久化到 db ）。这样做是为了创建一个仅处理这些后台作业的捆绑包的最佳方式。

我正在考虑以下课程：

*   站点解析器

    *   Site1Parser 扩展了 SiteParser
    *   Site2Parser 扩展了 SiteParser
*   型号1

*   模型2

*   一些负责编排不同站点的解析并告诉创建的模型持久化的类。

这看起来合乎逻辑吗？如果是这样，我将如何将该结构放入 symfony 中？

感谢您提供的所有帮助，如果我不清楚或您有任何问题，请询问我将提供所需的任何详细信息！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T23:40:36.910

首先，我建议不要在这里使用控制器。请记住，控制器的目的是在模型和视图之间进行调解。使用自动化流程，您并没有真正的视图——没有人查看或阅读您的输出（您可能想要实现一些日志记录，但那是另一回事）。

也就是说，我想说你最好的选择是使用 Symfony 的内置控制台命令功能创建一个命令。您可能已经使用`app/console`命令工具来执行诸如生成包和创建实体映射之类的操作。通过`ContainerAwareCommand`课程，您实际上可以编写自己的课程。最好的部分是命令知道容器......换句话说，您可以使用`get()`方法直接访问 Doctrine、Monolog、Twig 或任何其他服务。

因此，假设您的应用程序从站点中提取图像，然后将这些图像的 URL 保存到数据库中。为此，您首先需要创建一个服务类（让我们将其放在 MyBundle\Service 命名空间下），并为其提供必要的方法：

```
namespace MyBundle\Service;

class Parser
{    
    public function extractImageUrls($siteUrl)
    {
        // Do whatever here, and return an array of URLs
    }
} 
```

然后你可以通过app/config/config.yml将它注册为一个名为“parser”的服务：

```
services:
    parser:
        class: MyBundle\Service\Parser 
```

现在，您可以`get("parser")`从您的容器中调用。控制器扩展容器，因此在控制器中您可以说`$this->get("parser")`，但在控制台命令中，您必须专门获取容器：`$this->getContainer()->get("parser")`。

那么你可以编写你的 SiteParseCommand 看起来像这样：

```
namespace MyBundle\Command;

class SiteParseCommand extends ContainerAwareCommand {
    protected function configure()
    {
        $this->setName("site:parse");
        $this->addArgument("site", InputArgument::REQUIRED);
    }

    protected function execute(InputInterface $input, OutputInterface $output)
    {
        $parser = $this->getContainer()->get("parser");
        $doctrine = $this->getContainer()->get("doctrine");
        $em = $doctrine->getEntityManager();
        $imageRepository = $em->getRepository("MyBundle:Image");

        $site = $input->getArgument("site");

        $images = $parser->getImageUrls($site);

        // Add each image to the database as you normally would, using your entity manager
    }
} 
```

现在，从命令行，您可以调用：

```
app/console site:parse "http://url.com" 
```

将它添加到 crontab 中，我认为你很高兴。

同样，由于没有视图，您将无法轻松判断一切是否正常。所以我会实现某种日志记录，让你知道发生了什么。由于 Monolog 也是一项服务，因此控制台命令也可以通过`$this->getContainer()->get("logger")`.

希望这可以帮助！

(More documentation on the ContainerAwareCommand class [here](http://symfony.com/doc/2.0/cookbook/console/console_command.html))

# objective-c - Xcode 中的 2 个第三方库出现重复符号问题

> ID：12829564
> 
> 赞同：6
> 
> 时间：2012-10-10T22:42:14.857
> 
> 标签：objective-c, ios, xcode, compiler-construction, static-libraries

我正在尝试编译一个依赖于 2 个第三方静态库的项目。

问题是两个第三方都在他们的静态库分发中包含了相同的“实用程序”类集，这意味着当两者都添加到我的项目中时，我会遇到几十个重复的符号错误。

有没有办法让我以某种方式强制项目编译和/或忽略其中一个重复符号？

我发现了一个类似的问题，这里[有两个在 Xcode 中有重复符号的静态库，](https://stackoverflow.com/questions/8377420/two-static-libraries-with-duplicate-symbols-in-xcode)但我很想看看是否有一个编译器标志可以解决问题（请注意，在这种情况下，我假设两个符号代表同一个对象）。

谢谢罗格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T16:14:27.940

尝试通过 libtool (libtool -o mapped.a file1.a file2.a) 将它们合并到一个文件中，或者检查[如何使用共享静态库在 xcode 中避免“重复符号”错误？](https://stackoverflow.com/questions/2300867/how-can-i-avoid-duplicate-symbol-errors-in-xcode-with-shared-static-libraries)或/和[在设置 GorillaLogic 的 FoneMonkey 5 时解决“重复符号”错误](http://jojitsoriano.wordpress.com/2011/05/19/solving-duplicate-symbol-error-when-setting-up-gorillalogics-fonemonkey-5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-13T20:43:30.370

只需找到重复的符号文件并重命名库对应文件之一。请注意，您应该检查要重命名的项目的所有编译源。Xcode 不会自动更改引用。

# uitextfield - UITextFields 不接受 iOS6 中的文本

> ID：12829572
> 
> 赞同：2
> 
> 时间：2012-10-10T22:43:03.910
> 
> 标签：uitextfield, ios6, uitextview, uiapplicationdelegate

我有一个在 iOS5 下构建的应用程序。当我用一些更新编译应用程序时，我发现应用程序中没有 UITextFields 会接受文本输入。键盘会出现，但输入对 UITextField 没有影响。我的 MainWindow 是使用 IB 而不是通过代码构建的。

搜索所以我发现一个可能的问题是应用程序委托中缺少 [self.window makeKeyAndVisible]，但是，这并没有解决我的问题，因为我已经在我的应用程序委托类中遇到了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T22:43:03.910

回答我自己的问题以传播知识...

我在提供答案的苹果论坛中[找到了这篇文章：](https://devforums.apple.com/message/731770#731770)

在界面生成器中选择 MainWindow.xib 文件。然后选择 viewController（在我的例子中是 TabBarController）并查看 Attributes Inspector。视图控制器下应该有一个字段，上面写着“标题”。我放置了我的 MainWindow xib 的名称（**“MainWindow_iPad”**）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:55:02.050

对于使用 XIB 文件为 IOS 5 开发的应用程序，我遇到了同样的问题。

根据上面提到的 Apple 文章，我只是为 iPhone 和 iPad 版本的 MainWindow 启用了“启动时可见”。无需设置任何名称或任何东西。我在尝试这个之前看到的奇怪的事情是，如果我显示一个带有 OK 按钮的 UIAlertView，那么在从该对话返回后一切都会完美无缺。

谢谢你的提示。

# php - 如果我的数组在 php 中看起来像这样，我应该如何获取实体？

> ID：12829573
> 
> 赞同：0
> 
> 时间：2012-10-10T22:43:03.260
> 
> 标签：php, arrays

这是我的数组，使用 print_r。例如，我应该如何获得头衔？

```
Array ( 

        [0] => Array ( [homework_id] => 2 [title] => english0610 [due_date] => 2012-10-09 00:00:00 [description] => english [key] => 12345 [author] => tom [attachment] => [group_id] => TJ10S1 [create_date] => 2012-10-07 00:00:00 ) 
        [1] => Array ( [homework_id] => 1 [title] => math0610 [due_date] => 2012-10-08 00:00:00 [description] => math homework for today [key] => 12345 [author] => tom [attachment] => [group_id] => TJ10S1 [create_date] => 2012-10-06 00:00:00 ) 
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T22:44:41.703

你可以使用[foreach](http://php.net/manual/en/control-structures.foreach.php)

```
echo "<pre>"  ;
foreach($list as $value)
{
    echo $value['title']  , PHP_EOL;
} 
```

# r - 在基础 R 中映射减少线性回归

> ID：12829577
> 
> 赞同：3
> 
> 时间：2012-10-10T22:43:13.057
> 
> 标签：r, mapreduce, linear-regression

我正在为 Hadoop 进行 R 中的分布式线性回归计算，但在实现它之前，我想验证我的计算是否与`lm`函数的结果一致。

我有以下函数试图实现 Andrew Ng 等人讨论的通用“求和”框架。在论文[Map-Reduce for Machine Learning on Multicore](http://www.cs.stanford.edu/people/ang//papers/nips06-mapreducemulticore.pdf)中。

对于线性回归，这涉及将每行 y_i 和 x_i 映射到 P_i 和 Q_i，使得：

```
P_i = x_i * transpose(x_i)
Q_i = x_i * y_i 
```

然后减少以求解系数，theta： `theta = (sum(P_i))^-1 * sum(Q_i)`

执行此操作的 R 函数是：

```
calculate_p <- function(dat_row) {
  dat_row %*% t(dat_row)
}

calculate_q <- function(dat_row) {
  dat_row[1,1] * dat_row[, -1]
}

calculate_pq <- function(dat_row) {
  c(calculate_p(matrix(dat_row[-1], nrow=1)), calculate_q(matrix(dat_row, nrow=1)))
}

map_pq <- function(dat) {
  t(apply(dat, 1, calculate_pq))
}

reduce_pq <- function(pq) {
  (1 / sum(pq[, 1])) * apply(pq[, -1], 2, sum)
} 
```

您可以通过运行在一些合成数据上实现它：

```
X <- matrix(rnorm(20*5), ncol = 5)
y <- as.matrix(rnorm(20))
reduce_pq(map_pq(cbind(y, X)))
[1]  0.010755882 -0.006339951 -0.034797768  0.067438662 -0.033557351
coef(lm.fit(X, y))
          x1           x2           x3           x4           x5 
-0.038556283 -0.002963991 -0.195897701  0.422552974 -0.029823962 
```

不幸的是，输出不匹配，所以很明显我做错了什么。有什么想法可以解决吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T04:20:53.483

您接受的逆`reduce_pq`需要是矩阵逆。我也稍微改变了一些功能。

```
calculate_p <- function(dat_row) { 
    dat_row %*% t(dat_row)
}

calculate_q <- function(dat_row) { 
    dat_row[1] * dat_row[-1] 
}

calculate_pq <- function(dat_row) {
    c(calculate_p(dat_row[-1]), calculate_q(dat_row)) 
}

map_pq <- function(dat) {
    t(apply(dat, 1, calculate_pq))
}

reduce_pq <- function(pq) { 
    solve(matrix(apply(pq[, 1:(ncol(X) * ncol(X))], 2, sum), nrow=ncol(X))) %*% apply(pq[, 1:ncol(X) + ncol(X)*ncol(X)], 2, sum)
}

set.seed(1)
X <- matrix(rnorm(20*5), ncol = 5)
y <- as.matrix(rnorm(20))

t(reduce_pq(map_pq(cbind(y, X))))
          [,1]      [,2]      [,3]       [,4]        [,5]
[1,] 0.1236914 0.2482445 0.5120975 -0.1104451 -0.04080922

coef(lm.fit(X,y))
         x1          x2          x3          x4          x5 
 0.12369137  0.24824449  0.51209753 -0.11044507 -0.04080922 

> all.equal(as.numeric(t(reduce_pq(map_pq(cbind(y, X))))), as.numeric(coef(lm.fit(X,y))))
[1] TRUE 
```

# javascript - jQuery ajax——返回数据给调用函数

> ID：12829579
> 
> 赞同：9
> 
> 时间：2012-10-10T22:43:18.897
> 
> 标签：javascript, jquery

我编写了一个简单的通用 ajax 函数，可以在我的脚本中被多个函数调用。我不确定如何将返回给 ajax 函数的数据返回给调用者。

```
// some function that needs ajax data
function myFunction(invoice) {
    // pass the invoice data to the ajax function
    var result = doAjaxRequest(invoice, 'invoice');
    console.dir(result); // this shows `undefined`
}

// build generic ajax request object
function doAjaxRequest(data, task) {
    var myurl = 'http://someurl';
    $.ajax({
        url: myurl + '?task=' + task,
        data: data,
        type: 'POST',
        success: function(data) {
            console.dir(data); // this shows good data as expected  
            return data; // this never gets back to the calling function
        }
    });
} 
```

有没有办法将ajax数据返回给调用函数？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-10T22:48:11.177

`$.ajax`是异步的，因此为了取回数据，您需要将回调传递给您的`doAjaxRequest`函数。我在回调函数中添加了一个回调参数，`doAjaxRequest`而不是使用`doAjaxRequest`处理响应的代码的结果。

```
// some function that needs ajax data
function myFunction(invoice) {
    // pass the invoice data to the ajax function
    doAjaxRequest(invoice, 'invoice', function (result) { 
        console.dir(result);
    });
}

// build generic ajax request object
function doAjaxRequest(data, task, callback) {
    var myurl = 'http://someurl';
    $.ajax({
        url: myurl + '?task=' + task,
        data: data,
        type: 'POST',
        success: function(data) {
            console.dir(data); // this shows good data as expected  
            callback(data);
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-05-26T13:39:58.607

我认为这个例子对你有帮助

```
function testAjax() {
    var result="";
    $.ajax({
      url:"getvalue.php",
      async: false,  
      success:function(data) {
         result = data; 
      }
   });
   return result;
}

function fun2()
{

alert(testajax())

} 
```

你注意到一件事 async: false

# mysql - 如何根据 select 语句更新行

> ID：12829588
> 
> 赞同：0
> 
> 时间：2012-10-10T22:43:53.863
> 
> 标签：mysql, sql

我正在尝试使用以下查询更新子查询返回的某些行上的列。子查询选择需要更新的行的正确 ID。

```
UPDATE 4_dev.Images AS Im
        SET Im.primary=1 
        WHERE EXISTS (
SELECT Img.imageId FROM (
SELECT I.id AS imageId,
       I.userId,
       I.date,
       SUM(I.primary) AS hasPrimary,
       COUNT(*) AS numImages
FROM 4_dev.Images AS I
GROUP BY I.userId
HAVING numImages>=1 AND hasPrimary=0) AS Img) 
```

但是这个查询会更新每一行，而不仅仅是 SELECT 子查询中的行。

这在 PHP 中很容易分成两部分，但我想知道如何用一个查询来更新它。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T22:48:59.547

更改`WHERE EXISTS (` 为`WHERE Im.id IN (`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T00:06:24.403

您的查询有误，您忘记在尝试更新的表和 EXISTS 中的语句之间定义连接条件

```
UPDATE 4_dev.Images AS Im
  SET Im.primary=1 
WHERE EXISTS (
  SELECT Img.imageId
  FROM (
    SELECT I.id AS imageId,
      I.userId,
      I.date,
      SUM(I.primary) AS hasPrimary,
      COUNT(*) AS numImages
    FROM 4_dev.Images AS I
    GROUP BY I.userId
    HAVING numImages>=1 AND hasPrimary=0) AS Img
    WHERE Img.imageId = Im.id) 
```

此外，您的查询很复杂。不幸的是，我不知道您的数据库结构，但看起来您可以使用来自多个表的 UPDATE 简化查询 [http://forums.mysql.com/read.php?20,85813,85813](http://forums.mysql.com/read.php?20,85813,85813)

# jquery - 清除缓存后getscript不起作用

> ID：12829589
> 
> 赞同：0
> 
> 时间：2012-10-10T22:43:55.020
> 
> 标签：jquery, getscript

我正在使用 getscript() 为我的图片库加载一些脚本。一旦我点击图库，此代码就会运行：

```
$(function () {
$(window).hashchange(function () {
    $(document).ready(function () {
        $('#nav li a').click(function () {
            $('#content-wrap').load(toLoad, showNewContent);

            function showNewContent() {
                if ($('#content-wrap').is(':empty')) {
                    return false;
                } else {
                    if (window.location.hash == "#photos") {
                        alert("soundswaste1");
                        $.getScript("galleria/galleria-1.2.8.min.js");
                        $.getScript("galleria/themes/classic/galleria.classic.min.js", getGalleria);

                        function getGalleria() {
                            alert("soundswaste2");
                            $.getScript("galleria.js");
                        }
                    }
                    $('#content-wrap').fadeIn(500).css("display", "block");
                }
                return false;
            });
        });
    });
}); 
```

首先我去chrome控制台->右键单击网络选项卡->清除浏览器缓存->刷新页面->然后单击照片。我收到警报“soundswaste1”，但效果没有运行。图像只是在页面上排列。

然后我只需再次单击“照片”，我就会收到两个警报，每个警报**两次**。2个问题：

1.  为什么清除缓存会阻止所有脚本第一次加载。是因为它们位于不同的路径吗？

2.  为什么我第二次收到**两次**警报？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T07:17:38.363

我想`galleria.classic.min.js`取决于`galleria-1.2.8.js` 第一次加载，您尝试一个接一个地加载它们，但是要确保在加载第二个脚本时第一个完成加载。依此类推`success`第一个，加载第二个，如下所示：

```
$(document).ready(function () {
    $('#nav li a').click(function () {
        $('#content-wrap').load(toLoad, showNewContent);

        function showNewContent() {
            if ($('#content-wrap').is(':empty')) {
                return false;
            } else {
                if (window.location.hash == "#photos") {
                    alert("soundswaste1");
                    $.getScript("galleria/galleria-1.2.8.min.js",

                    function () {
                        $.getScript("galleria/themes/classic/galleria.classic.min.js",

                        function () {
                            alert("soundswaste2");
                            $.getScript("galleria.js");
                        });
                    });

                }
                $('#content-wrap').fadeIn(500).css("display", "block");
            }
            return false;
        });
    }); 
```

# youtube-api - Facebook 如何播放被禁止嵌入的 YouTube 视频？

> ID：12829590
> 
> 赞同：0
> 
> 时间：2012-10-10T22:44:04.957
> 
> 标签：youtube-api

好的，举个例子：

首先，尝试将[Drake - Hell Yeah](http://www.youtube.com/embed/muUEyXj-iqk)作为嵌入式 YouTube 视频播放。如果您通过单击 SO 中的超链接来执行此操作——它将起作用。但是，如果您将 URL 复制/粘贴到新选项卡中，则不会。

您将看到一条错误消息：“此视频包含来自 UMG 的内容。它被限制在某些网站上播放。在 YouTube 上观看。”

现在，获取相同的链接 ( [http://www.youtube.com/embed/muUEyXj-iqk](http://www.youtube.com/embed/muUEyXj-iqk) ) 并将其作为帖子粘贴到 Facebook 墙上。乐曲欢快地奏响。

什么样的通信允许 Facebook 播放嵌入的视频，但从 YouTube 本身播放相同的视频不起作用？！

不知道我应该从哪里开始寻找这种魔法。是否通过标头进行通信...？或者其他一些聪明的编码......？还是 YouTube 和 Facebook 之间的协议？

**更新：**因此，如果您单击我已超链接到的 URL，它将播放。但是，如果您将 URL 复制/粘贴到浏览器中 - 它不会播放。我假设 YouTube 正在查看 URL 的引用链接，并根据点击的来源确定视频是否可播放。由于单击时它来自网站，但不是来自任何人，特别是在复制/粘贴时，我会得到不同的结果吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T23:04:14.480

嵌入限制由内容所有者设置。在这种情况下，Vevo 可以创建一个可以查看其视频的地点的白名单。因为您可以在 www.facebook.com 上看到它，这意味着它可以包含在此白名单中。YouTube 内容 ID 常见问题解答中提供了有关这些政策的一些详细信息。

[http://www.youtube.com/t/contentid_more](http://www.youtube.com/t/contentid_more)

与此问题最接近的答案是与在上传者所在区域被阻止有关的答案。应更新帮助页面以包括站点限制。

# objective-c - 使用 NSFetched 结果控制器和部分

> ID：12829592
> 
> 赞同：0
> 
> 时间：2012-10-10T22:44:18.297
> 
> 标签：objective-c, ios, uitableview, core-data, nsfetchedresultscontroller

我是核心数据和 NSFetched 结果控制器的新手。到目前为止，我设法填满了我的 tableView。但现在我想分成几个部分。这是我的代码的样子。

```
- (void)getKeepers // attaches an NSFetchRequest to this UITableViewController
{

    NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Team"];
    request.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"sortOrder" ascending:YES]];
    self.fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:request
                                                                        managedObjectContext:self.genkDatabase.managedObjectContext
                                                                          sectionNameKeyPath:nil
                                                                                   cacheName:nil];

} 
```

让我勾勒一下情况。我正在为一家足球俱乐部制作应用程序。在我的桌面视图中，我希望每个位置（守门员、后卫、边锋、攻击手）都有一个新部分。我的核心数据库看起来像这样。

```
- TEAM
   -name
   -Position
   -img_url
   -birthDate
   -sortOrder 
```

我添加了 sortOrder 属性来对我的玩家进行排序。但是有人可以帮我把它分成几部分吗？

提前致谢 ！！

**我在我的CELL_FOR_ROW_AT_INDEX** 中做什么 我正在使用包含 6 个图像视图的自定义 tableviewCell。但是一行可能只包含 4 个图像。[你可以在这里](http://www.flickr.com/photos/74322780@N08/8050170687/)看到我想要做什么。

```
#define IMAGES_PER_ROW  6

   NSInteger frcRow = indexPath.row * IMAGES_PER_ROW; // row in fetched results controller

    for (int col = 1; col <= IMAGES_PER_ROW; col++) {
        NSIndexPath *path = [NSIndexPath indexPathForRow:frcRow inSection:0];
        Team *team = [self.fetchedResultsController objectAtIndexPath:path];
        NSData *imgData = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:team.image]];
        UIImage *image;
        if (imgData == nil) {
            // default image
            image = [UIImage imageWithContentsOfFile:@"keeperNil.jpg"];
        } else {
            image = [UIImage imageWithData:imgData];
        }
        [cell setImage:image forPosition:col];
        frcRow ++;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T22:49:35.330

使用该`sectionNameKeyPath`值作为要用于部分的字段。

那么你需要这三个功能...

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return [self.fetchedResultsController.sections count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    id <NSFetchedResultsSectionInfo> sectionInfo = self.fetchedResultsController.sections[section];

    return [sectionInfo numberOfObjects];
}

- (NSString*)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    id <NSFetchedResultsSectionInfo> sectionInfo = self.fetchedResultsController.sections[section];

    return [sectionInfo name];
} 
```

这应该足够了。

您的 cellForRowAtIndexPath 函数应该看起来像这样......

```
...
UITableViewCell* cell = [UITableViewCell dequeueCellWithReuseIdnetifier:@"blah"];

Team *team = [self.fetchedResultsController objectAtIndexPath:indexPath];

cell.textLabel.text = team.name;
cell.detailTextLabel.text = team.position. 
```

或类似的东西。

您收到的错误意味着您正在尝试访问一个不包含足够条目的数组。

如果这不起作用，请发布您的 cellForRowAtIndexPath 函数。

# javascript - 当在元素？我正在尝试创建一个包含几个下拉选择元素的基本 Web 表单。这两个元素都有一个“另一个 - 请指定”选项，我希望在选择“其他”选项时自动出现在下拉框下方的TextField，如果从中更改该选项，则会让TextField消失'other' 到不同的选项。我不知道如何做到这一点，有人可以帮忙吗？您可以使用 foreach echo "

```
" ；foreach($list as $value) { echo $value['title'] , PHP_EOL; 您需要
```

> ID：12829593
> 
> 赞同：0
> 
> 时间：2012-10-10T22:44:29.537
> 
> 标签：javascript, html

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T22:55:51.673

[jsfiddle](http://jsfiddle.net/DMKN3/)上的工作代码

JS：

```
document.getElementById("sid").onchange= function(){

    if(this.value == 'Other'){
       document.getElementById("other").style.display = '';
    }
    else{
          document.getElementById("other").style.display = 'none';
    }
}​ 
```

HTML：

```
<select id='sid'>
<option>1</option>
<option>2</option>
<option>Other</option>
</select>
<input id='other' style='display:none' /> ​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T23:01:58.300

[示例 jsfiddle](http://jsfiddle.net/3pZdK/)

HTML

```
<select id="aDropDown">
    <option value=1>1</option>
    <option value=2>2</option>
    <option value=3>3</option>
    <option value=other>Other</option>
</select>
<p id="aDropDownOther" class="other-label">Other Label</p>​ 
```

JS

```
var ele_aDropDownOther = document.getElementById('aDropDownOther');

document.getElementById('aDropDown').onchange = function() {
    if (this[this.selectedIndex].value === "other") {
        ele_aDropDownOther.style.display = "block";
    } else {
        ele_aDropDownOther.style.display = "";
    }
}​ 
```

CSS

```
.other-label {display:none;}​ 
```

* * *

或者类似地使用 jQuery

[示例 jsfiddle](http://jsfiddle.net/3pZdK/1/)

JavaScript/jQuery

```
var $aDropDown = $('#aDropDown'),
    $aDropDownOther = $('#aDropDownOther');

$aDropDown.change(function() {
    if ($aDropDown.val() === "other") {
        $aDropDownOther.show();
    } else {
        $aDropDownOther.hide();
    }
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T22:49:25.427

您可以使用 CSS 来完成此操作。试试这个页面[http://www.coderanch.com/t/112986/HTML-CSS-JavaScript/Show-hidden-text-field](http://www.coderanch.com/t/112986/HTML-CSS-JavaScript/Show-hidden-text-field)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T22:51:39.250

在您的选择标签上，您可以添加一个 onchange="changed()" 属性。然后创建一个名为 changed 的​​ javascript 函数。

其余的使用 Jquery。

例如

```
function changed() {
    if($('#idOfSelect').val() == "Other") {
        $('#idOfSelect').after("<textbox>bla bla</textbox>");
    }
} 
```

类似的东西。

# javascript - 使用jquery对表中的行进行分组

> ID：12829594
> 
> 赞同：1
> 
> 时间：2012-10-10T22:44:35.400
> 
> 标签：javascript, jquery, asp.net, html

我在前端创建了一个包含几列的表。包含数据的表如下所示：

```
 ID         Name          Date1           Date2         Code1    
   00001        abc         2012/1/1         2012/1/10       1
   00002        def         2012/1/12        2012/2/1        1
   00002        def         2012/1/12        2012/2/1        2
   00002        def         2012/1/12        2012/2/1        3
   00003        xyz         2012/2/12        2012/3/1        2
   00003        xyz         2012/2/12        2012/3/1        4 
```

现在我想以分组方式呈现上表中的数据，即每个唯一 ID 只有 1 行，所有代码列合并并显示为 1 行。

```
 ID         Name          Date1           Date2         Code1    
   00001        abc         2012/1/1         2012/1/10       1
                                                             1
   00002        def         2012/1/12        2012/2/1        2                              
                                                             3
   00003        xyz         2012/2/12        2012/3/1        2
                                                             4 
```

请忽略我的格式样式。当我没有关于即将到来的代码值数量的信息时，这是否可以编程？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T22:57:29.160

是的，这当然是可能的。

根据表上的约束（例如，ID 是否严格增加？）可以考虑几种算法来完全满足您的要求。

但是，我强烈建议不要这样做。直接在 DOM 上使用 jQuery 执行此操作将需要大量 DOM 访问操作，并且速度相对较慢。在服务器端执行此操作会好得多，我想在此生成数据，或者在客户端以相同数据的数组/对象表示形式执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T23:02:26.333

此功能将删除与上方单元格内容重复的单元格内容。它不会合并它们（à la `rowspan`/ `colspan`），但会清空它们。

```
function emptyDittoCells(table) {
    if (!(table instanceof jQuery && table.is("table")))
        throw "bad parameter";

    table.find('tr').each(function(rowElement) {
        var row = $(rowElement);
        var previousRow = $(rowElement).prev('tr');
        if (!previousRow.length) return;

        row.each(function(cellElement, index) {
            var cell = $(cellElement);
            var previousCell = previousRow.children("td:nth-child(" + index + ")"); 

            while (previousCell.data('ditto')) {
                previousCell = previousCell.data('ditto');
            }

            if (hasSameContents(cell, previousCell)) {
                cell.empty()
                    .data('ditto', previousCell);
            }
        });
    });
}

function hasSameContents(a, b) {
    return (a.text() == b.text()); // naive but usable in the simple case
} 
```

未经测试且有点 DOM 密集型，但我认为它会起作用。除了可能的语法错误（缺少右括号）之外，我最关心的是那个`td:nth-child()`选择器。这可以更健壮地写为`$(previousRow.children('td').get(index))`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T23:13:29.867

正如之前所说，这种转换最好在服务器端完成。

但是如果表不是太大，并且假设 Name、Date1 和 Date2 对于给定 ID 具有相同的值，您可以解析表（例如使用 jQuery）并从头开始重建它。

一些伪代码：

```
foreach (row)
{
  foreach (column)
  {
    get ID value;
    if (not yet stored) store data for that ID somewhere else;
    store Code1 value with its ID;
  }
}

foreach (ID stored)
{
  get all related values;
  rebuild table row;
} 
```

我希望它有所帮助。如果没有，那么编写一些 jQuery 代码就不会那么困难了。

# android - Android - 如何从 javascript 生成触摸事件？

> ID：12829598
> 
> 赞同：2
> 
> 时间：2012-10-10T22:44:45.153
> 
> 标签：android, webview, simulate

是否可以在 javascript 中生成一个触摸事件，该事件将在我的 android WebView 中调用 onTouchEvent() 函数？

我尝试使用以下 javascript 代码生成 touchstart 和 touchend 事件，但我的 webview onTouchEvent() 函数没有被调用。

```
try{
var evt = document.createEvent('TouchEvent');
evt.initTouchEvent('touchstart', true, true);
evt.view = window;
evt.altKey = false;
evt.ctrlKey = false;
evt.shiftKey = false;
evt.metaKey = false;
this.dispatchEvent(evt);

var evt1 = document.createEvent('TouchEvent');
evt1.initTouchEvent('touchend', true, true);
evt1.view = window;
evt1.altKey = false;
evt1.ctrlKey = false;
evt1.shiftKey = false;
evt1.metaKey = false;
this.dispatchEvent(evt1); 

}
catch(e)
{
    alert(e);
} 
```

我的代码中是否缺少某些内容，或者 javascript 事件甚至没有进入 android 框架？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T04:17:32.220

不确定您打算如何使用触摸事件，也不确定是否可以将触摸事件从渲染的 dom 冒泡到包含 webview 控件的处理程序，但您可以尝试这种方法：

1) 向您的 Web 视图添加一个 javascript 接口，并公开一个简单的类对象，该对象捕获您的 dom 生成的事件：

```
(inside onCreate of ContainerActivity)

this.mWebView.addJavascriptInterface
    ( new JavascriptContainer() {
        final private WebView mView = ContainerActivity.this.mWebView;

        @Override
        public void captureEvent(final String sDetails) {
            // do what you want with the details and webview...
        }
    }
    , "appReceiver"
    ); 
```

2）在渲染的 html 中捕获触摸事件或单击事件（或其他），并使用 javascript 将它们委托给暴露的全局“appReceiver”：

```
if (window.appReceiver !== undefined) {
    window.appReceiver.captureEvent('blah blah: ' + event.x + ':' + event.y);
    ...
} 
```

# php - 用php按下按钮后如何发送电子邮件？

> ID：12829601
> 
> 赞同：1
> 
> 时间：2012-10-10T22:45:08.690
> 
> 标签：php, email, button, send

我安装了 xampp 和 apache 和水星。我已经配置了mercury，所以我可以从我的脚本发送电子邮件，我已经对其进行了测试，并成功地向我的电子邮件地址发送了一些电子邮件。

我想在按下按钮后发送电子邮件，但以下脚本不起作用。你能告诉我我能做什么或代码有什么问题吗？

谢谢！

sample.php 的代码：

```
<form action="sample.php" method="post">
    <input type="submit" value="Send details" />
    <input type="hidden" name="button_pressed" value="1" />
</form>

<?php

if(isset($_POST['button_pressed']))
{
    $to      = 'example@example.com';
    $subject = 'the subject';
    $message = 'hello';
    $headers = '';
    mail($to, $subject, $message, $headers);

    echo 'Email Sent.';
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T23:29:50.953

老实说我还没有深入 Mercury，因为我很久以前就走 PHPMailer 路线了。

不过我可以告诉你，Gmail 很挑剔，它需要加密，我不知道邮件功能是否提供。

除此之外，它可能会禁止您的邮件服务器，例如使用 smtpd 它将允许我发送邮件一段时间，直到它们静默停止工作（我猜他们的验证需要一段时间）。

它还没有停止，例如它可能会确定您的应用程序的行为是可疑的，并且将停止允许它发送邮件，直到您通过网络从同一台机器登录。

而且，如果您启用了两因素身份验证……那么您的代码无法（或至少不应该）访问您的手机，您将不得不以一定的频率登录以使其正常工作。

当然有一种方法可以解决这个问题，首先你应该去[Connected Sites, Apps, and Services](https://accounts.google.com/IssuedAuthSubTokens)页面，然后创建一个`Application-specific password`你的应用程序应该用来进行身份验证的页面。然后转到[允许新应用程序访问您的帐户](https://accounts.google.com/DisplayUnlockCaptcha)页面，它会给您时间使用该应用程序登录。[您可以在google 的支持](http://support.google.com/accounts/bin/answer.py?hl=en&answer=185833)页面了解更多信息。

总而言之，我有两个建议：

*   使用 PHPMailer
*   不再使用 GMail，我最近开始使用[mail.com 接收](http://www.mail.com/int/)来自应用程序的邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T23:09:30.610

如果您在本地开发，则需要设置一些设置才能使用 SMTP。

这可能会有所帮助：[http ://roshanbh.com.np/2007/12/sending-e-mail-from-localhost-in-php-in-windows-environment.html](http://roshanbh.com.np/2007/12/sending-e-mail-from-localhost-in-php-in-windows-environment.html)

# java - 像这样压缩做……会违反 JLS 的理念吗？

> ID：12829605
> 
> 赞同：1
> 
> 时间：2012-10-10T22:45:16.947
> 
> 标签：java, optimization, do-while, jls

在用 Java 编写另一个`do ... while`循环时，我开始思考它的语法。一个典型的程序员会写类似

```
do {
  somethng();
}while(booleanValue); 
```

然而，Java 有一种内置的压缩​​方式，允许程序员在循环内只有一行时删除大括号（这对于 Java 表达式很典型）：

```
do
  something();
while(booleanValue); 
```

这可以被认为和写成

```
do something();
while(booleanValue); 
```

甚至作为

```
do;
while(booleanValue); 
```

这很有趣。这引起了我的注意，这是一个必须跨两行读取和运行的 Java 语句，这意味着在运行该行之后`do`，直到该行运行时操作才完成`while`。请记住，其他表达式只有一行：

```
if(booleanValue) something();
while(booleanValue) something();
for(Object declaration; booleanValue; operation()) something();
for(Object declaration : iterableObject) something();
throw throwableObject;
return anyObject;
switch(integer) {}
//case is excluded because it operates a lot more like a goto operation than a statement 
```

所以我开始思考，不是关于为什么会这样，而是关于如何进一步压缩这个陈述。

假设“行”是以分号 ( `;`) 结尾或包含在大括号 ( `{`and `}`) 中的任何内容，让我们了解这一点：**一条`do`语句必然需要运行两行，**而**一条`do`语句必须*至少*继续运行直到它到达一个空`while`语句**。

**那么为什么要使用牙套呢？**

让我们看一些使用这种语法的场景。`do...while`带有一个封闭语句的语句怎么样：

```
do something();
while(booleanValue(); 
```

好吧，这里没有什么新鲜事。`do...while`带有三个封闭语句的语句怎么样：

```
do
  statement1();
  statement2();
  statement3();
while(booleanValue); 
```

在这里，Java 将看到它是一个语句，它会在看到空语句`do`之前运行第 2、3 和 4 行。`while`此时，它知道我们已准备好结束循环，计算表达式，并可能返回`do`或退出循环。

您可能认为会破坏它的东西怎么样？嵌套`while`循环：

```
do
  statement1();
  while(booleanValue1)
    statement2();
while(booleanValue2); 
```

在这里，Java 看到它是一个`do`语句并输入它，然后正常运行第 2 行。在 line `3`，它看到它是一个`while`语句。此时它必须决定这是否是循环的结束。它检查`while`语句并发现它不是空的，因此不是`do`循环的结尾。它进入`while`语句并循环第 3 行和第 4 行，直到不再循环。然后它会看到另一个`while`语句，并且在检查时发现它是空的，因此是`do`语句的结尾。它评估它，可能会或可能不会返回到第 2 行，但我们现在不在乎。

> 但是Supuhstar，这肯定看起来很多计算！这不会减慢 JVM 的速度吗？

不必要！这都可以在编译时完成，就像 Java 确定上面列出的任何其他语句是否为空（例如，尝试编译`while(true);`将导致下一行编译时出现错误“ `unreachable statement`”）。

所以，很像

```
for(Object declaration : iterableObject)
  somethingInvolving(declaration); 
```

编译成

```
Iterator<Object> i = iterableObject.iterator();
while(i.hasNext())
{
  Object declaration = i.next();
  somethingInvolving(declaration);
} 
```

然后

```
do
  statement1();
  while(booleanValue1)
    statement2();
while(booleanValue2); 
```

可以编译成

```
do
{
  statement1();
  while(booleanValue1)
  {
    statement2();
  }
}
while(booleanValue2); 
```

> 但是 Supuhstar，Java 不关心缩进！你的可以写任何缩进，或者根本没有？

当然！编译器同样容易编译

```
do
  statement1();
  while(booleanValue1)
    statement2();
while(booleanValue2); 
```

就像它会

```
do statement1(); while(booleanValue1) statement2(); while(booleanValue2); 
```

这两者都会做同样的事情。

**是否有其他人同意将这作为 Java 语法包含在内是一件好事，或者是否有一些明显的原因我错过了这不能完成？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T23:11:37.157

想想这段代码

```
 if(true)
        if(false)
            System.out.println("x");
    else
        System.out.println("y"); 
```

它打印“y”。有时，对于没有牙套的人来说，这太令人困惑了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T23:07:08.393

这个特别的陈述让我感到有些困惑：

> 它检查 while 语句并发现它不是空的，因此不是 do 循环的结尾。

因为“不空”是什么意思？while 循环允许为“空”：

```
do
  statement1();
while(booleanValue1);
while(booleanValue2); 
```

即使第一个while循环会关闭do-while而不是第二个，这在您的计划下也是有效的。

话虽这么说，你建议的语法不会[模棱两可](http://en.wikipedia.org/wiki/Ambiguous_grammar)，我不认为....但没关系，因为它永远不会被引入，因为语言设计者没有（也从来没有）有兴趣让 Java 成为更简洁或更简洁的语言。

您甚至可以说冗长是 Java 哲学的基本组成部分。**编译器可以推断或允许但不能推断出许多**事情。好消息是有很多更现代的语言，比如 Scala，可以让你编写更简短、更有表现力的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-23T08:05:28.700

与不受欢迎的说法类似，我也看过这个例子：

```
if(false)
    //System.out.println("x");

System.out.println("Done"); 
```

你能明白为什么第二次打印没有运行吗？

# matlab - 如何使用具有非矩形域的 surf() 命令绘制矩阵

> ID：12829607
> 
> 赞同：2
> 
> 时间：2012-10-10T22:45:21.330
> 
> 标签：matlab, plot

我有一个矩阵 Z，我想使用 surf 命令绘制它。我可以使用 surf 命令很好地绘制它，但我希望 Z 的一部分不会出现在图中。我假设我需要做的是使用符号

```
surf(X,Y,Z) 
```

其中 X 和 Y 是定义相应 z 值的 (x,y) 坐标的矩阵。我想知道的是我在 Z 中不应该绘制的点的 (x,y) 坐标，即 x 和 y 应该什么都不是。

例如：

```
Z = 1 5 7
    2 6 0 
    3 0 0
    4 0 0

X = 1 1 1
    2 2 _
    3 _ _
    4 _ _

Y = 1 2 3
    1 2 _
    1 _ _
    1 _ _ 
```

空间里会发生什么？我不能输入像 0 这样的数字，因为所有的值都会返回原点。如果有更好的方法可以使用，我不必使用 surf()。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T00:17:25.950

将 Z 中您不想绘制的所有值设置为 NaN。例如，如果您不想绘制 Z 的零点，那么

`Z(Z==0)=NaN;`

会成功的。您不需要对 X 和 Y 执行此操作。如果您不想绘制的 Z 集更复杂，您应该以某种方式获取 Z(i,j) 并将其设置为 NaN。

# html - 表格内的文本对齐类

> ID：12829608
> 
> 赞同：762
> 
> 时间：2012-10-10T22:45:40.893
> 
> 标签：html, css, twitter-bootstrap, text-align

Twitter 的 Bootstrap 框架中是否有一组对齐文本的类？

例如，我有一些表格的`$`总数要向右对齐...

```
<th class="align-right">Total</th> 
```

和

```
<td class="align-right">$1,000,000.00</td> 
```

* * *

## 回答 #1

> 赞同：1491
> 
> 时间：2013-02-28T16:03:10.433

# 引导程序 3

[v3 文本对齐文档](https://getbootstrap.com/docs/3.3/css/#type-alignment)

```
<p class="text-left">Left aligned text.</p>
<p class="text-center">Center aligned text.</p>
<p class="text-right">Right aligned text.</p>
<p class="text-justify">Justified text.</p>
<p class="text-nowrap">No wrap text.</p> 
```

[![Bootstrap 3 文本对齐示例](../Images/b0d9d2a87a8dd10c024196d98230c42b.png)](https://i.stack.imgur.com/DZHMg.png)

* * *

# 引导程序 4

[v4 文本对齐文档](https://getbootstrap.com/docs/4.0/utilities/text/#text-alignment)

```
<p class="text-xs-left">Left aligned text on all viewport sizes.</p>
<p class="text-xs-center">Center aligned text on all viewport sizes.</p>
<p class="text-xs-right">Right aligned text on all viewport sizes.</p>

<p class="text-sm-left">Left aligned text on viewports sized SM (small) or wider.</p>
<p class="text-md-left">Left aligned text on viewports sized MD (medium) or wider.</p>
<p class="text-lg-left">Left aligned text on viewports sized LG (large) or wider.</p>
<p class="text-xl-left">Left aligned text on viewports sized XL (extra-large) or wider.</p> 
```

[![Bootstrap 4 文本对齐示例](../Images/d6c13d8254f2b544a8c416562a82f649.png)](https://i.stack.imgur.com/Qfi1K.png)

* * *

# 引导程序 5

[v5 文本对齐文档](https://getbootstrap.com/docs/5.0/utilities/text/#text-alignment)

`text-left`已替换为`text-start`, `text-right`已替换为`text-end`

```
<p class="text-start">Left aligned text.</p>
<p class="text-center">Center aligned text.</p>
<p class="text-end">Right aligned text.</p>
<p class="text-justify">Justified text.</p>
<p class="text-nowrap">No wrap text.</p> 
```

* * *

## 回答 #2

> 赞同：84
> 
> 时间：2014-02-10T15:55:50.593

使用 Bootstrap 3.x using`text-right`效果很好：

```
<td class="text-right">
  text aligned
</td> 
```

* * *

## 回答 #3

> 赞同：47
> 
> 时间：2012-10-11T00:10:03.273

不，Bootstrap 没有这样的类，但这种类被认为是“实用程序”类，类似于@anton 提到的“.pull-right”类。

如果您查看实用程序.less，您会在 Bootstrap 中看到很少的实用程序类，原因是这种类通常不受欢迎，建议用于：a) 原型设计和开发 - 这样您就可以快速构建退出您的页面，然后删除 pull-right 和 pull-left 类，以便将浮动应用于更多语义类或元素本身，或者 b) 当它明显比更语义化的解决方案更实用时。

在您的情况下，根据您的问题，您似乎希望某些文本在表格的右侧对齐，但不是全部。从语义上讲，最好做一些类似的事情（我只是在这里组成几个类，除了默认的引导类，.table）：

```
 <table class="table price-table">
    <thead>
      <th class="price-label">Total</th>
    </thead>
    <tbody>
      <tr>
        <td class="price-value">$1,000,000.00</td>
      </tr>
    </tbody>
  </table> 
```

只需将`text-align: left`or`text-align: right`声明应用于 price-value 和 price-label 类（或任何适合您的类）。

作为一个类应用的问题`align-right`是，如果你想重构你的表，你将不得不重做标记和样式。如果您使用语义类，您可能可以只重构 CSS 内容而侥幸成功。另外，如果花时间将类应用于元素，最好尝试为该类分配语义值，以便其他程序员（或三个月后）更容易导航标记。

一种思考方式是：当你提出“这个 td 是做什么用的？”的问题时，你不会从答案“align-right”中得到澄清。

* * *

## 回答 #4

> 赞同：37
> 
> 时间：2013-04-05T17:58:49.407

Bootstrap 2.3 具有实用程序类`text-left`、`text-right`和`text-center`，但它们在表格单元格中不起作用。在 Bootstrap 3.0 发布（他们已经解决了问题）并且我能够进行切换之前，我已将其添加到我的站点 CSS 中，该 CSS 之后加载`bootstrap.css`：

```
.text-right {
    text-align: right !important;
}

.text-center {
    text-align: center !important;
}

.text-left {
    text-align: left !important;
} 
```

* * *

## 回答 #5

> 赞同：27
> 
> 时间：2013-06-04T11:20:32.427

只需添加在 Bootstrap 样式表之后加载的“自定义”样式表。所以类定义被重载。

在这个样式表中声明对齐方式如下：

```
.table .text-right {text-align: right}
.table .text-left {text-align: left}
.table .text-center {text-align: center} 
```

现在您可以对 td 和 th 元素使用“通用”对齐约定。

* * *

## 回答 #6

> 赞同：23
> 
> 时间：2012-10-10T22:52:36.540

我猜是因为 CSS 已经有`text-align:right`AFAIK，所以 Bootstrap 没有专门的类。

Bootstrap 确实有“向右拉”，用于向右浮动 div 等。

Bootstrap 2.3 刚出来并添加了文本对齐样式：

*[Bootstrap 2.3 发布](http://blog.getbootstrap.com/2013/02/07/bootstrap-2-3-released/)*(2013-02-07)

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2016-03-18T14:42:09.200

[Bootstrap 4 来了](http://v4-alpha.getbootstrap.com/)！Bootstrap`3.x`中熟悉的实用程序类现在启用了断点。默认断点是：`xs`、`sm`、和`md`，因此这些文本对齐类看起来像.`lg``xl``.text-[breakpoint]-[alignnment]`

```
<div class="text-sm-left"></div> //or
<div class="text-md-center"></div> //or
<div class="text-xl-right"></div> 
```

**重要提示：**在撰写本文时，Bootstrap 4 仅在 Alpha 2 中。这些类及其使用方式如有更改，恕不另行通知。

* * *

## 回答 #8

> 赞同：12
> 
> 时间：2015-10-14T22:02:38.413

v3.3.5 中的引导文本对齐：

```
 <p class="text-left">Left</p>
 <p class="text-center">Center</p>
 <p class="text-right">Right</p> 
```

[代码笔示例](http://codepen.io/Gothburz/pen/VvMzvO)

* * *

## 回答 #9

> 赞同：11
> 
> 时间：2015-05-22T06:30:22.130

以下代码行正常工作。您可以分配文本中心、左或右等类，文本将相应对齐。

```
<p class="text-center">Day 1</p> 
<p class="text-left">Day 2</p> 
<p class="text-right">Day 3</p> 
```

这里不需要创建任何外部类。这些是 Bootstrap 类并有自己的属性。

* * *

## 回答 #10

> 赞同：10
> 
> 时间：2015-10-08T08:29:26.787

您可以在下面使用此 CSS：

```
.text-right {text-align: right} /* For right align */
.text-left {text-align: left} /* For left align */
.text-center {text-align: center} /* For center align */ 
```

* * *

## 回答 #11

> 赞同：8
> 
> 时间：2013-02-08T02:59:39.473

该类`.text-align`是完全有效的，并且比拥有一个`.price-label`并且`.price-value`不再有用的更有用。

我建议使用一个名为的自定义实用程序类 100%

```
.text-right {
  text-align: right;
} 
```

我喜欢做一些魔术，但这取决于你，比如：

```
span.pull-right {
  float: none;
  text-align: right;
} 
```

* * *

## 回答 #12

> 赞同：7
> 
> 时间：2016-12-31T07:00:58.177

**这是一个简短而甜蜜的答案，有一个例子。**

```
table{
    width: 100%;
}
table td, table th {
    border: 1px solid #000;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet"/>
<body>
  <table>
    <tr>
      <th class="text-left">Text align left.</th>
      <th class="text-center">Text align center.</th>
      <th class="text-right">Text align right.</th>
    </tr>
    <tr>
      <td class="text-left">Text align left.</td>
      <td class="text-center">Text align center.</td>
      <td class="text-right">Text align right.</td>
    </tr>
  </table>
</body>
```

* * *

## 回答 #13

> 赞同：6
> 
> 时间：2015-07-17T20:37:49.987

哦，随着 Bootstrap 3 的发布，您可以使用`text-center`中心对齐、`text-left` 左对齐、`text-right`右对齐和`text-justify`两端对齐的类。

Bootstrap 是一个非常简单的前端框架，一旦你使用它就可以使用它。并且非常容易定制以适合您的喜好。

* * *

## 回答 #14

> 赞同：6
> 
> 时间：2016-03-01T01:38:29.983

扩展[大卫的答案](https://stackoverflow.com/questions/12829608/bootstrap-text-align-class-for-inside-a-table/15840453#15840453)，我只是添加一个简单的类来增强 Bootstrap，如下所示：

```
.money, .number {
    text-align: right !important;
} 
```

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2016-07-14T12:26:49.957

[Bootstrap 4](https://getbootstrap.com/docs/4.0/utilities/text/#text-alignment)对此有五个类：`text-left`、`text-center`、`text-right`和。`text-justify``text-nowrap`

```
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet"/>
<div class="text-left">Left aligned text.</div>
<div class="text-center">Center aligned text.</div>
<div class="text-right">Right aligned text.</div>
<div class="text-justify">Justified text starts here. The quick brown fox jumps over the lazy dog. Justified text ends here.</div>
<div class="text-nowrap">No wrap text starts here. The quick brown fox jumps over the lazy dog. No wrap text ends here.</div>
```

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2017-01-27T11:31:15.100

## 这是最简单的解决方案

> 您可以分配文本中心、左或右等类。文本将相应地与这些类对齐。您不必单独上课。这些类内置在 BootStrap 3 中

```
 <h1 class="text-center"> Heading 1 </h1> 
    <h1 class="text-left"> Heading 2 </h1> 
    <h1 class="text-right"> Heading 3 </h1> 
```

在这里检查： [演示](http://getbootstrap.com/css/#type-alignment)

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2019-11-03T07:08:10.143

**在 Bootstrap 版本 4 中。有一些用于定位文本的内置类。**

对于居中表格标题和数据文本：

```
 <table>
    <tr>
      <th class="text-center">Text align center.</th>
    </tr>
    <tr>
      <td class="text-center">Text align center.</td>
    </tr>
  </table> 
```

您还可以使用此类来定位任何文本。

```
<p class="text-left">Left aligned text on all viewport sizes.</p>
<p class="text-center">Center aligned text on all viewport sizes.</p>
<p class="text-right">Right aligned text on all viewport sizes.</p>

<p class="text-sm-left">Left aligned text on viewports sized SM (small) or wider.</p>
<p class="text-md-left">Left aligned text on viewports sized MD (medium) or wider.</p>
<p class="text-lg-left">Left aligned text on viewports sized LG (large) or wider.</p>
<p class="text-xl-left">Left aligned text on viewports sized XL (extra-large) or wider</p> 
```

[更多细节](https://getbootstrap.com/docs/4.0/utilities/text/)

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2021-05-11T10:12:59.997

# 引导程序 5

[v5 文本对齐文档](https://getbootstrap.com/docs/5.0/utilities/text/#text-alignment)

在 Bootstrap 版本 5 中，更改了文本对齐实用程序类。使用以下新类来对齐文本：

*   ~~text-left~~ `text-start`用于左对齐。
*   `text-center`用于中心对齐。
*   ~~text-right~~ `text-end`用于右对齐。

此类也可以在表中使用。右对齐单元格内的文本

```
 <td class="text-end">$1,000.00</td> 
```

如果要在整列中右对齐文本，可以使用 css`nth-child`属性

```
/* || right aligns text of third column; change 3 to your desired column number*/
tr > th:nth-child(3),
tr > td:nth-child(3) {
    text-align: right;
} 
```

请参阅以下示例以获取完整的解决方案

```
/* to right align text within whole column */
.custom-table tr>th:nth-child(3),
.custom-table tr>td:nth-child(3) {
  text-align: right;
}
```

```
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css" rel="stylesheet" />
<body>
  <table class="table table-bordered custom-table">
    <thead>
      <tr>
        <th scope="col">Date</th>
        <th scope="col">Customer</th>
        <th scope="col">Total</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>11 May 2021</td>
        <td>Paula Allen</td>
        <td>$104.98</td>
      </tr>
      <tr>
        <td>10 May 2021</td>
        <td class="text-end">Kevin(right-align)</td>
        <td>$233.00</td>
      </tr>
      <tr>
        <td>09 May 2021</td>
        <td>Joyes Murray</td>
        <td>$170.25</td>
      </tr>
    </tbody>
  </table>
</body>
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2017-03-08T12:20:09.063

```
<p class="text-sm-left">Left aligned text on viewports sized SM (small) or wider.</p> 
```

视口大小为 MD（中）或更宽的左对齐文本。

在 LG（大）或更宽的视口上左对齐文本。

在 XL（特大）或更宽的视口上左对齐文本。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2020-05-16T22:29:03.310

使用`text-align:center !important`. 可能还有其他`text-align`css规则，所以`!important`很重要。

```
table,
th,
td {
  color: black !important;
  border-collapse: collapse;
  background-color: yellow !important;
  border: 1px solid black;
  padding: 10px;
  text-align: center !important;
}
```

```
<table>
  <tr>
    <th>
      Center aligned text
    </th>
  </tr>
  <tr>
    <td>Center aligned text</td>
    <td>Center aligned text</td>
  </tr>
</table>
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2016-02-10T11:50:20.983

**在这三个类 Bootstrap 无效类**

```
 .text-right {
     text-align: right; }

 .text-center {
     text-align: center; }

 .text-left {
    text-align: left; } 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2021-01-03T04:16:48.157

如果它似乎在 Bootstrap 4.5 中不起作用，`text-sm-right`请考虑到表格的内容可能太多并且表格不在容器的 100% 处（例如 col）

[![在此处输入图像描述](../Images/f858b4707c8de02f19402bbc6502b8a4.png)](https://i.stack.imgur.com/OdKcE.png)

使表格 100% 宽：

```
 <table class="w-100"> 
```

# javascript - 通过嵌入到表达式引擎中传递字符串以供 Raphael 库使用

> ID：12829613
> 
> 赞同：0
> 
> 时间：2012-10-10T22:46:30.833
> 
> 标签：javascript, html, embed, raphael, expressionengine

所以对于那些熟悉 ExpressionEngine CMS 的人来说，你知道当你嵌入代码时，你可以 {embed="site/header" dog_name="Shadow"} 然后在嵌入中调用参数（即..

```
<div><h2> - My dog's name is {embed:dog_name} </h2> </div> 
```

但是，当我尝试将相同的原则应用于此嵌入时，它会失败：

```
<div id="graphicLinks"> 
    {embed="in-store-analytics/retail-analytic" quote="Hello"} 
</div> 
```

传递给...

```
<script>
window.onload = function() {
var p = Raphael("graphicLinks", 300, 50);

 var quote = {embed:quote};

// Creates an object group
 p.setStart();
 var contactRect= p.rect(0, 0, 120, 45);
 var contactText = p.text(11,22,quote); 
```

还有更多代码，但我只包括了相关部分。

有任何想法吗？提前致谢。

**更新：**好的所以我只是调试了一下，我发现该元素确实通过了。但是，html 无法识别该元素：

```
window.onload = function() {
var p = Raphael("graphicLinks", 300, 50);
var quote = Hello; 
```

Java 控制台显示“ *ReferenceError: Hello is not defined* ”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T01:11:03.900

您只需要引用变量：

```
 var quote = "{embed:quote}"; 
```

那应该这样做。

# shell - 环境变量过滤

> ID：12829615
> 
> 赞同：0
> 
> 时间：2012-10-10T22:46:36.777
> 
> 标签：shell

环境变量的过滤发生在哪里？例如，假设您使用 LD_PRELOAD 进行共享库插入。但是，当运行 setuid 程序时，LD_PRELOAD 变量不起作用。它代表了我所说的“环境变量过滤”的一个案例。我想知道环境变量的处理和“清除”发生在哪里，具体和/或精确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T04:06:08.327

动态加载器处理`LD_PRELOAD`和相关的环境变量。它还确定程序是否正在运行 SUID 并忽略环境变量。

动态加载程序的实际名称和位置因系统而异。例如，在 RHEL 5 for x86/64 上，该库`/lib/ld-linux.so.2`用于 32 位软件和`/lib64/ld-linux-x86-64.so.2`64 位软件；在 Solaris 10 for SPARC 上，有`/lib/ld.so.1`32 位代码和`/lib/sparcv9/ld.so.1`64 位代码。

# mysql - MYSQL 查询 - 如何仅为在另一个表中具有特定值的 id 构建总计？

> ID：12829616
> 
> 赞同：0
> 
> 时间：2012-10-10T22:46:45.593
> 
> 标签：mysql, sql

我有以下两个表格。**在 ONE query**中，如何仅对表 2 中 FEATURE_ID 为 2 的那些 VEHICLE_ID 合计列 TOTAL_TIME？

因此，在我的情况下**，查询的结果应该是 2:30**，因为它将添加 2:00 和 0:30，因为这些车辆的 FEATURE_ID 为 2。

**表 1**
VEHICLE_ID | TOTAL_TIME
----------------+-----------------
       22 | 2:00
       25 | 2:30
       22 | 1:25
       28 | 0:30
       ......

**表 2**
VEHICLE_ID | FEATURE_ID
----------------+--------------------------------
       22 | 2
       22 | 3
       23 | 1
       23 | 3
       25 | 1
       28 | 2
       ........

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T22:49:39.977

可以尝试类似：

```
SELECT SUM(t1.total_time) FROM table1 as t1 
INNER JOIN table2 as t2 ON t1.vehicle_id = t2.vehicle_id AND t2.feature_id = 2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T22:50:34.327

SELECT SUM(TOTAL_TIME) FROM TABLE_1 WHERE VEHICLE_ID IN (SELECT VEHICLE_ID FROM TABLE_2 WHERE FEATURE_ID = 2)

您是否正在寻找 FEATURE_ID = 2 的总时间？或者您是否正在寻找按 VEHICLE_ID 分组的 FEATURE_ID = 2 的总总时间？那将是这样的：

```
SELECT T1.VEHICLE_ID, SUM(T1.TOTAL_TIME) 
FROM TABLE_1 T1
LEFT JOIN TABLE_2 T2 ON T2.VEHICLE_ID = T1.VEHICLE_ID AND T2.FEATURE_ID = 2
GROUP BY T1.VEHICLE_ID
ORDER BY T1.VEHICLE_ID 
```

# python - 动态使用 uinput.emit()

> ID：12829618
> 
> 赞同：1
> 
> 时间：2012-10-10T22:46:53.703
> 
> 标签：python

我正在使用[python-uinput](http://tjjr.fi/sw/python-uinput/)进行一些测试来模拟一些按键，但我找不到动态调用`uinput.emit()`. 我的意思是，我想例如从文件中获取字符并调用`uinput.emit()`它们中的每一个。

逐个字符地读取文件不是问题，问题是据我所知`uinput`，您不喜欢传递字符串或该 ASCII 字符的十六进制代码。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T23:07:56.330

这就是 getattr 的用途...

```
key = "H"
my_key = getattr(uinput,"KEY_"+key)
device.emit(my_key, 1) # Press.
device.emit(my_key, 0) # Release. 
```

我认为应该工作

# php - 从文件中搜索和删除/添加行的最快方法

> ID：12829624
> 
> 赞同：0
> 
> 时间：2012-10-10T22:47:48.360
> 
> 标签：php, performance, sorting, file-io, file-search

我想知道从潜在的大文件中删除特定行（如果存在）的最快方法是什么。

所以例如我想要以下行

```
abc 
```

从文件中删除

```
yxz
srtabc
abc
efg 
```

变得

```
yxz
srtabc
efg 
```

另外，如果文件不存在，我想在文件中添加一行。

文件的顺序无关紧要，如果它为搜索提供了性能提升，则可以对其进行排序。

性能从来都不是我的强项，所以我很难确定最好的路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T22:50:47.967

我不建议使用`file_put_contents`or`file_get_contents` 因为它会立即将文件的所有内容加载到 PHP 中，如果您使用的是大文件，这对您不起作用。

您可以使用 2 个文件 .. 并在另一个文件之后读取它们 ..... 替换您需要替换的任何内容，然后在最后重命名 .... 这仅在处理非常大的文件时才有效

概念教授

```
set_time_limit(0);

$baseFile = "log.txt";
$tempFile = $baseFile . ".temp";

touch($tempFile);

$findAndReplace = array("abc" => "","efg"=>"WWW");

$fileTemp = fopen($tempFile, "a+");
$fileBase = fopen($baseFile,"r");

while ( !feof($fileBase))  {
    $var = trim(fgets($fileBase));
    if (array_key_exists($var, $findAndReplace)) {
        var_dump($var);
        $var = $findAndReplace[$var];
    }
    if (!empty($var))
        fwrite($fileTemp , $var . PHP_EOL);
}

fclose($fileBase);
fclose($fileTemp);
unlink($baseFile);
rename($tempFile, $baseFile); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T23:06:58.690

为了性能，不要使用 php。

但是，如果您坚持，并且您只需要一个替换操作，请读入整个文件，然后替换该行（作为字符串），然后将其写回。即不要将文件拆分为单独的行，这会使事情变得比必要的要慢。

这应该是诀窍：

```
$input = file_get_contents($filename_in);

$find = "abc..";

$find_q = preg_quote($find,'/');
$output = preg_replace("/^$find_q(\n|\$)/m","",$input);

file_put_contents($filename_out,$output); 
```

它删除包含完全的行`$find`，包括尾随换行符。如果最后一行没有`\n`终止，它仍然会被删除。

要测试是否存在一条线，请采用类似的方法：

```
$find_q = preg_quote($find,'/');
if ( !preg_match("/^$find_q(\n|\$)/m",$input) )
{
    $input .= $find."\n"; // note: this assumes that $input is \n terminated
} 
```

# asp.net - vb.net For Each block 有一个额外的运行（运行两次）

> ID：12829625
> 
> 赞同：0
> 
> 时间：2012-10-10T22:47:50.617
> 
> 标签：asp.net, vb.net, loops, foreach, datatable

我有一个数据表，我想将一行转换为包含所有列名的单个字符串，因此格式如下：column1_name:column1_content。column2_name：column2_content...

我几乎按照我想要的方式完成了它，除了结果将是相同的字符串重复两次。例如，字符串“abc”是我想要的，但它会返回“abcabc”。

当我只有 1 行时没关系，我可以在 1 次运行后使用 exit 关键字终止循环，但现在我有超过 1 行的数据表，这是出乎意料的，所以循环必须完成。请帮我找出原因。谢谢。

这是代码：

```
 Dim column As New DataColumn
    Dim dt As New DataTable
    dt.Load(dr)

    For Each row As DataRow In dt.Rows
        Dim i As Integer = 0
        For Each column In dt.Columns
            If Not IsDBNull(row.ItemArray.GetValue(i)) Then
                sData = sData & column.ColumnName & ": " & row.ItemArray.GetValue(i).ToString & ". " & vbLf
            End If
            i = i + 1
        Next
    Next 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T02:10:18.617

尝试这个

```
'set up dummy data
Dim dtb As New DataTable
dtb.Columns.Add(New DataColumn("Col0", GetType(String)))
dtb.Columns.Add(New DataColumn("Col1", GetType(String)))
dtb.Columns.Add(New DataColumn("Col2", GetType(String)))
dtb.Rows.Add("R0C0", "R0C1", "R0C2")
dtb.Rows.Add("R1C0", "R1C1", "R1C2")
'extract rows
Dim sbl As New System.Text.StringBuilder
For intRow As Integer = 0 To dtb.Rows.Count - 1
  Dim drw As DataRow = dtb.Rows(intRow)
  For intCol As Integer = 0 To dtb.Columns.Count - 1
    If drw.Item(intCol) IsNot Nothing Then
      sbl.AppendLine("Row " & intRow.ToString & " " & dtb.Columns(intCol).ColumnName & ": " & drw.Item(intCol).ToString & ". ")
    End If
  Next intCol
Next intRow
MsgBox(sbl.ToString)
dtb.Dispose() 
```

# sql-server - 半计算列只能在插入触发器后使用？

> ID：12829627
> 
> 赞同：3
> 
> 时间：2012-10-10T22:47:59.380
> 
> 标签：sql-server

我的数据库中的每个表都有一个列，需要为新行计算，但有需要保留的旧值。我有一个使用更新后触发器的工作解决方案，但它的某些内容并不适合我。尤其是对每个表都有这样的触发器的想法。我希望还有其他我忽略的想法。

如果有一种方法可以使用 DEFAULT 列值，我会非常高兴，但这似乎是不可能的。据我所知，DEFAULT 标量函数无法查看插入到行中的其他值。

这是一个示例数据库，用于演示我当前的解决方案。为了方便起见，我把它放在 SQL Fiddle 上：

*   [http://sqlfiddle.com/#!3/65f88/1](http://sqlfiddle.com/#!3/65f88/1)

但这里是重新创建它的代码（以防将来由于任何原因无法访问 SQL Fiddle）：

```
CREATE TABLE tmpTest (
    id INT IDENTITY PRIMARY KEY,
    origin INT DEFAULT 15,
    code VARCHAR(9),
    name VARCHAR(100),
    UNIQUE (code)
)

GO

CREATE TRIGGER tmpTest_code ON tmpTest
AFTER INSERT AS
    UPDATE t SET
      t.code = RIGHT(UPPER(master.dbo.fn_varbintohexstr(t.origin)), 2)
             + RIGHT(UPPER(master.dbo.fn_varbintohexstr(t.id)), 7)
    FROM tmpTest t 
    INNER JOIN inserted i ON i.id = t.id
    WHERE t.code IS NULL

GO

INSERT INTO tmpTest (name) VALUES ('one')
INSERT INTO tmpTest (name) VALUES ('two')
INSERT INTO tmpTest (name) VALUES ('three')
INSERT INTO tmpTest (name) VALUES ('four')
INSERT INTO tmpTest (name) VALUES ('five')
INSERT INTO tmpTest (name) VALUES ('six')
INSERT INTO tmpTest (name) VALUES ('seven')
INSERT INTO tmpTest (name) VALUES ('eight')
INSERT INTO tmpTest (name) VALUES ('nine')
INSERT INTO tmpTest (name) VALUES ('ten')

INSERT INTO tmpTest (origin, code, name) VALUES (3, '030000001', 'legacy one')
INSERT INTO tmpTest (origin, code, name) VALUES (3, '030000002', 'legacy two')
INSERT INTO tmpTest (origin, code, name) VALUES (3, '030000003', 'legacy three')
INSERT INTO tmpTest (origin, code, name) VALUES (3, '030000004', 'legacy four')
INSERT INTO tmpTest (origin, code, name) VALUES (3, '030000005', 'legacy five')
INSERT INTO tmpTest (origin, code, name) VALUES (3, '030000006', 'legacy six')
INSERT INTO tmpTest (origin, code, name) VALUES (3, '030000007', 'legacy seven')
INSERT INTO tmpTest (origin, code, name) VALUES (3, '030000008', 'legacy eight')
INSERT INTO tmpTest (origin, code, name) VALUES (3, '030000009', 'legacy nine')
INSERT INTO tmpTest (origin, code, name) VALUES (3, '03000000A', 'legacy ten') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T09:20:06.307

如果对 code 列的要求是`UNIQUE`，为什么不将其更改为具有默认值，例如，`NEWID()`同时保留所有当前值？

做你需要的另一种方法是创建另一个列，其值为

```
ISNULL(code, <formula based on id and origin) 
```

这样，对于现有记录，其值将与代码匹配，而对于代码可能为空的新值，它将与您的新公式匹配。

无论哪种方式，它都应该避免令人不快的触发解决方案，我同意。

最后但同样重要的是，我会使用[HASHBYTES](http://msdn.microsoft.com/en-us/library/ms174415.aspx)而不是`fn_varbintohexstr`

# html - 用easeljs复制对象

> ID：12829638
> 
> 赞同：2
> 
> 时间：2012-10-10T22:49:14.403
> 
> 标签：html, easeljs, createjs

我一直在尝试使用easeljs 库重用元素时遇到问题。我是否使用**clone()**方法，我只能获得一个实例，然后像 onPress 这样的事件将停止为新元素工作。

在多个容器上添加相同的对象会使该对象随处消失。我一直不得不寻找解决方法，弄乱我的代码并浪费资源。

提前感谢您的任何帮助或提示。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-15T01:14:41.187

如果您使用的是**Shape 的 Graphics**，您可能需要考虑将**true**作为参数传递。

```
var boxClone = box.clone(true); 
```

来自 CreateJs 文档： [http ://www.createjs.com/Docs/EaselJS/classes/Shape.html#method_clone](http://www.createjs.com/Docs/EaselJS/classes/Shape.html#method_clone)

> `clone ( recursive )`
> 
> 返回此 Shape 的克隆。特定于此实例的当前上下文的某些属性将恢复为其默认值（例如 .parent）。
> 
> **参数：**递归
> 
> 如果为 true，此 Shape 的 Graphics 实例也将被克隆。如果为 false，Graphics 实例将与新的 Shape 共享。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T22:54:06.053

这样的事情怎么样？不确定这是否是您所追求的，但...也许它会帮助某人。

```
var canvas, stage;

    function init() {
        canvas = document.getElementById("testCanvas");

        //check to see if we are running in a browser with touch support
        stage = new createjs.Stage(canvas);
        createjs.Ticker.setFPS(24);
        createjs.Ticker.addListener(window);

        var width = 50;
        var height = 50;
        var padding = 5;
        var box = new createjs.Shape();
        box.graphics.beginFill("#FF0099").drawRect(0, 0, width, width).endFill();

        var l = 25;
        var cols = 7;
        for(var i=0;i<l;i++) {
            var boxClone = box.clone();
            boxClone.x = (width+padding) * (i%cols);
            boxClone.y = (height+padding) * (i/cols|0);
            boxClone.index = i;
            boxClone.onClick = handleClick;
            stage.addChild(boxClone);
        }
    }

    function handleClick(event) {
        console.log(event.target);
    }

    function tick() {
        stage.update();
    } 
```

# html - Internet Explorer 上的格式与其他浏览器不匹配

> ID：12829641
> 
> 赞同：0
> 
> 时间：2012-10-10T22:49:30.320
> 
> 标签：html, css

jsfiddle：http: [//jsfiddle.net/n2gSj/](http://jsfiddle.net/n2gSj/)

在 Internet Explorer 中，搜索栏位于“联系我们”下方。但是它应该像 jsfiddle（在菜单栏的右侧）。

是什么阻止它这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T22:54:04.357

您可以尝试将表格包装在 li 中吗？

您将需要更新 li 元素上的 CSS 规则，以使某些规则仅适用于菜单项。

看看这里的规则：#NOINTERFERE00_menu li:hover（这个在悬停时在元素周围应用一个灰色框）

如果 li 代表一个菜单项，我已经将一个类 isMenuItem 添加到您的 li 标签中，然后我更新了 CSS 规则，该规则创建了仅适用于菜单项的灰色框。

代码在这里：http: [//jsfiddle.net/n4gSj/5/](http://jsfiddle.net/n4gSj/5/)

# python - 如何将类对象传递给 ctypes.windll.LoadLibrary(DLL) 函数？

> ID：12829642
> 
> 赞同：1
> 
> 时间：2012-10-10T22:49:33.967
> 
> 标签：python, class, dll, ctypes, windows-7-x64

我正在使用 Python 并尝试使用 WinUSB（来自 Microsoft）与这个简单的 USB 设备通信。我遇到了一个问题，因为为了找到设备，调用 setupAPI 函数 SetupDiEnumDeviceInterfaces 需要一个结构对象，我将其定义为一个类：

```
class _SP_DEVINFO_DATA:
    def __init__(self, ClassGUID, DevInst = ""):        
        '''flags = SPINT_DEFAULT, SPINT_REMOVED, or SPINT_ACTIVE'''
        self._ClassGUID = None
        self._DevInst = None
        self._Reserved = None
        self._cbSize = None

    ###Getters:
    def getClassGUID(self):
        return self._ClassGUID
    def getDevInst(self):
        return self._DevInst
    def getReserved(self):
        return self._Reserved
    def getcbSize(self):
        return self._cbSize

    ###Setters:
    def setClassGUID(self, value):
        self._ClassGUID = value
    def setDevInst(self, value):
        self._DevInst = value
    def setReserved(self, value):
        self._Reserved = value
    def setcbSize(self):
        self._cbSize = sys.getsizeinfo(self)       

    ClassGUID = property(getClassGUID, setClassGUID, None, "Class GUID")
    DevInst = property(getDevInst, setDevInst, None, "Device Instance")
    Reserved = property(getReserved, setReserved, None, "RESERVED: DO NOT USE")
    cbSize = property(getcbSize, setcbSize, None, "CB Size. Set automatically") 
```

我尝试使用该属性，因为它给了我错误：

```
<type 'exceptions.TypeError'>: Don't know how to convert parameter 
```

否则，我会读到像这样定义参数可以解决问题，但事实并非如此，而且我不确定在这里做什么。

我想使用 WinUSB，因为我只需要从设备中读取并写入设备，仅此而已，而且 WinUSB 似乎有我需要的东西，但是在我能解决这个问题之前，我有点卡住了

有什么建议么？如何将类对象传递给使用 ctypes.windll.LoadLibrary(DLL) 加载的 DLL 函数？

如果有更简单的方法可以做到这一点，我也完全赞成。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T15:57:59.167

正如@Roland 所说，您必须从`ctypes.Structure`. 这是一个工作版本：

```
import ctypes
from ctypes import wintypes
import uuid

class _SP_DEVINFO_DATA(ctypes.Structure):
    _fields_ = [("cbSize", wintypes.DWORD),
                ("ClassGuid", ctypes.c_char * 16),
                ("DevInst", wintypes.DWORD),
                ("Reserved", wintypes.LPVOID)]

    def __init__(self, guid, inst):
        self.cbSize = ctypes.sizeof(_SP_DEVINFO_DATA)
        self.ClassGuid = uuid.UUID(guid).get_bytes()
        self.DevInst = (ctypes.c_ulong)(inst)
        self.Reserved = None

    def __repr__(self):
        return "_SP_DEV_INFO_DATA(cbsize={},ClassGuid={},DevInst={})".format(
            self.cbSize,uuid.UUID(bytes=self.ClassGuid),hex(self.DevInst))

sp = _SP_DEVINFO_DATA('08751880-13bb-11e2-96f0-402cf4ca5e51',0x12345678)
print sp 
```

输出：

```
_SP_DEV_INFO_DATA(cbsize=28,ClassGuid=08751880-13bb-11e2-96f0-402cf4ca5e51,DevInst=0x12345678L) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T22:57:31.033

你的类应该派生自[`ctypes.Structure`](http://docs.python.org/library/ctypes.html#ctypes.Structure).

```
import ctypes

class _SP_DEVINFO_DATA(ctypes.Structure):

    _fields_ = [("cbSize", ctypes.c_ulong),
                ("ClassGuid", ctypes.c_ubyte * 12),
                ("DevInst", ctypes.c_ulong),
                ("Reserved", ctypes.c_voidp)]

    def __init__(self, guid, inst):
        self.cbSize = 24
        # GUID doesn't work like this... Needs proper conversion
        #self.ClassGuid = (ctypes.c_ubyte * 12)(bytearray(guid))
        self.DevInst = (ctypes.c_ulong)(inst)
        self.Reserved = None 
```

# iphone - 当 json 数据的值发布到 .net Web 服务时出现 Json Failed 错误？

> ID：12829647
> 
> 赞同：0
> 
> 时间：2012-10-10T22:49:52.440
> 
> 标签：iphone, objective-c, ios, xcode

我将 json 数据发布到 .net webservice。我正在使用下面的代码。在检查 web 服务时它显示 MessageValue:Failed。

-(void)sentSignUpDetails { NSLog(@"sentSignUpDetails.......");

```
NSString *jsonRequest = [NSString stringWithFormat:@"{\"UserName\":\"%@\",\"Password\":\"%@\",\"DeviceToken\":\"%@\"}",self.emailtextfield.text,self.passwordtextfield.text,appDelegate.Devicetoken];

NSLog(@"jsonRequest is %@", jsonRequest);
NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"http://brewedlife.testshell.net/Brewedlife/AppSignup"]];

NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url
                                                       cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0];

NSLog(@"1239");
NSData *requestData = [NSData dataWithBytes:[jsonRequest UTF8String] length:[jsonRequest length]];

[request setHTTPMethod:@"POST"];
[request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
[request setValue:[NSString stringWithFormat:@"%d", [requestData length]] forHTTPHeaderField:@"Content-Length"];
[request setHTTPBody: requestData];

con = [NSURLConnection connectionWithRequest:request delegate:self]; 
```

}

*   （无效）连接：（NSURLConnection *）连接didReceiveData：（NSData *）data1

{

```
 if (!data) 
  {
    data = [[NSMutableData alloc] initWithData:data1];
  }

 else 
  {
    [data appendData:data1];
  } 
```

它得到 json failed 错误如下 -JSONValue failed。错误跟踪是：（“错误域=org.brautaset.JSON.ErrorDomain Code=3 \“无法识别的前导字符” UserInfo=0x15e880 {NSLocalizedDescription=无法识别的前导字符}请给出任何想法。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T23:23:47.947

像这样创建您的 JSON 请求

> NSDictionary *jsonDict = [NSDictionary dictionaryWithObjectsAndKeys: @"ValueOfUsername", @"keyOfUserName", @"ValueOfPassword", @"Password", @"ValueOfDeviceToken", @"DeviceToken",nil];
> NSString *req = [jsonDict JSONRepresentation];

如果您收到编码错误，请查看这是否有效`NSUTF8StringEncoding`

# javascript - 后台设置：Javascript

> ID：12829650
> 
> 赞同：0
> 
> 时间：2012-10-10T22:50:14.093
> 
> 标签：javascript

当我将图像设置为背景时，我无法将某个图像的大小调整为我拥有的容器的尺寸。

```
#container {
    position: relative;
    height: 400px;
    width: 600px;
    left: 15%;
    border: 1px solid black;
    margin: 0;
    background-repeat: no-repeat;
}
<script language="JavaScript">
  function option1() {
    background="url('image.png')";
    document.getElementById('container').style.backgroundImage = background;
  }
</script>
.
.
.
.
<a href="#" id="b1" onclick ='option1()'>x</a> 
```

我基本上是在尝试让我的链接（它们是 x）在单击它们时更改容器的背景。图像都有不同的大小，我正在尝试找到一种方法来更改或调整图像大小以适应容器，因为我正在调用该函数。我找不到任何东西，所以我放弃了，只是在图像编辑器中手动将每个图像调整为容器大小。有没有其他方法可以解决这个问题？我对 Javascript 有点陌生，我尝试查看其他代码，但有时它只会让我陷入循环。

```
__________________________________________
|                                        |
|                                        |
|                                        |
|__________________________________x_x_x_| 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T23:01:54.420

你可以在这里看到它的作用：http: [//jsfiddle.net/Shmiddty/Akypk/](http://jsfiddle.net/Shmiddty/Akypk/)

相关的 CSS 是：

```
background-size:100% auto; 
```

图像将填充容器的宽度，其高度将按比例缩放。

# validation - 通过命令行验证成功的 RDP 连接

> ID：12829652
> 
> 赞同：1
> 
> 时间：2012-10-10T22:50:18.703
> 
> 标签：validation, command-line, rdp

我一直在寻找一段代码，它可以让您实际连接到 RDP 并验证它是否有效，而不仅仅是确认端口正在侦听远程主机。这将确认如果在 TCP 握手期间出现错误，则 RDP 实际上无法开始。有什么建议，因为这个函数本身不是输出？

我已经有可以安排启动 RDP 会话的简单代码，但是如何检查是否允许 RDP 会话（请记住，如果您没有远程计算机的管理员权限，则无法通过“查询会话”进行验证/server:servername" 命令）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T02:09:57.433

您可以订阅远程桌面 ActiveX 控件公开的[OnLoginComplete 事件](http://msdn.microsoft.com/en-us/library/windows/desktop/aa382686%28v=vs.85%29.aspx)以获取此信息。当然，要做到这一点，您需要编写自己的应用程序来使用 ActiveX 控件，而不是启动 mstsc。

# android - 内容视图的宽度和高度

> ID：12829653
> 
> 赞同：3
> 
> 时间：2012-10-10T22:50:25.513
> 
> 标签：android, window, height, width

我正在使用以下步骤来了解我的显示屏上 contentview 的宽度和高度

```
ContentViewWidth = getWindow().findViewById(Window.ID_ANDROID_CONTENT).getWidth();
ContentViewHeight = getWindow().findViewById(Window.ID_ANDROID_CONTENT).getHeight(); 
```

但是这种方法在 onCreate 或 onResume 中不起作用，如果我在 onWindowFocusChanged 中使用这些步骤，我的手机上会出现强制关闭错误

请帮助我如何获得显示屏的内容视图。内容视图不包括状态栏和标题栏尺寸

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-29T08:45:55.780

我使用以下技术 - 发布一个可运行的`onCreate()`，将在创建视图时执行：

```
 contentView = findViewById(android.R.id.content);
    contentView.post(new Runnable()
    {
        public void run()
        {
            contentHeight = contentView.getHeight();
        }
    }); 
```

完成后，此代码将在主 UI 线程上运行`onCreate()`。

* * *

如果您尝试获取内容视图本身的高度，则需要从高度中减去填充 - 这是因为 Android 2.x 对视图的布局与 4.x 不同。

```
contentHeight = contentView.getHeight() - contentView.getTopPadding(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T01:34:18.197

这是我在我的活动中所做的，以找出我知道在屏幕上端到端拉伸的特定视图子的内容布局（在这种情况下是 web 视图）：

首先，继承自 OnGlobalLayoutListener：

```
public class ContainerActivity extends Activity implements ViewTreeObserver.OnGlobalLayoutListener {
... 
```

接下来，实现监听器接口的 onGlobalLayout 方法（注意我做了一些与计算中缩放倾斜有关的像素计算：

```
@Override
public void onGlobalLayout() {
    int nH = this.mWebView.getHeight();
    int nW = this.mWebView.getWidth();

    if (nH > 0 && nW > 0)
    {
        DisplayMetrics oMetrics = new DisplayMetrics();

        this.getWindowManager().getDefaultDisplay().getMetrics(oMetrics); 

        nH = (nH * DisplayMetrics.DENSITY_DEFAULT) / oMetrics.densityDpi;
        nW = (nW * DisplayMetrics.DENSITY_DEFAULT) / oMetrics.densityDpi;

        // do something with nH and nW                  

        this.mWebView.getViewTreeObserver().removeGlobalOnLayoutListener
            ( this
            );

            ...         
    }
} 
```

最后，确保告诉 onCreate() 中的视图元素（在本例中为 mWebView）您正在监听布局事件：

```
this.setContentView(this.mWebView = new WebView(this));

this.mWebView.getViewTreeObserver().addOnGlobalLayoutListener
    ( this
    ); 
```

这种方法适用于较旧的 android 版本。我相信 ics+ 为您可以绑定到的每个视图都有一个布局侦听器，因此，将以类似的方式使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-04T10:42:13.287

```
Rect rectangle = new Rect();
Window window = getWindow();
window.getDecorView().getWindowVisibleDisplayFrame(rectangle);
int contentHeight = window.findViewById(Window.ID_ANDROID_CONTENT).getHeight();
int contentWidth = window.findViewById(Window.ID_ANDROID_CONTENT).getWidth(); 
```

# scala - Scala 类层次结构中的不规则性

> ID：12829657
> 
> 赞同：4
> 
> 时间：2012-10-10T22:50:34.543
> 
> 标签：scala

Scala 在 Java 的类型系统上叠加了一个非常优雅的类层次结构，从顶部的 Any 膨胀到 AnyRef 和 A​​nyVal 以分别覆盖 Java 的 Objects 和原语，然后最终收敛，将引用类型折叠为 Null 并将所有类型折叠为 Nothing。据我了解，Nothing 是一切事物的子类型；将 AnyRef/java.lang.Object 的所有子类型的子类型设为空。[见[http://www.scala-lang.org/node/128](http://www.scala-lang.org/node/128) ]

然而，似乎有一些不规则之处，一些地方不能简单地将所有 Scala 类型视为无缝类型层次结构的元素。我觉得这很烦人，并想了解我可能会感到惊讶的地方。

到目前为止，我知道一些违规行为：

1) 虽然 Null 是 AnyRef 的子类型，但调用 null.isInstanceOf[AnyRef]（或 AnyRef 的其他子类型）返回 false。我怀疑选择这与 Java 的 instanceof 运算符的行为一致。

2) 无论方差注释如何，一切都与 Nothing 是协变的。如果我有一个返回未标记为协变的类型 T 的方法，我可以重写该方法以返回 Nothing 类型。**[注意：此说法是错误的，请参阅下面的答案和评论！]**

3）我不能将 isInstanceOf 应用于类型 AnyVal [请参阅[为什么 AnyVal 不能在 isInstanceOf 检查中使用？](https://stackoverflow.com/questions/11070859)以及[如何测试作为 AnyVal 的值？](https://stackoverflow.com/questions/10416658)]

4) 询问某事是否 isInstanceOf[Null] 是非法的，这是一个完全连贯的问题（尽管不是特别必要，因为“myVar == null”会给出相同的答案）

Scala 的类型层次结构中是否还有其他不规则或特殊情况的示例？我觉得这些值得学习和理解，以避免不受欢迎的惊喜。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T23:19:15.180

1)`"A string is a subtype of AnyRef".isInstanceOf[AnyRef]`返回`true`。对于 的其他子类型也是如此`AnyRef`，除了`Null`. 正如您所说，唯一的不规则之处在于与 Java 保持一致。

2) 如果`B`是 的子类型`A`，即`B <: A`，那么您总是可以覆盖一个方法：

```
def foo: A = ... 
```

到：

```
override def foo: B = ... 
```

这称为优化返回类型，并且始终是允许的。由于`Nothing`它是所有其他类型的子类型（`Nothing <: A`for all `A`），因此您始终可以将返回类型细化为`Nothing`（例如，通过在方法体中抛出异常）。这是一个非常常规的属性。[返回类型协方差与类型参数上的方差注释](http://www.scala-lang.org/node/129)没有直接关系。

3）其他问题很好地涵盖了这一点。

4) 这是因为该`Null`类型在 Java 运行时中不存在。我想如果你想模仿这个，你可以创建自己的`instanceOf`方法 - 你首先必须检查参数是否为`null`，否则，进行正常`isInstanceOf`检查。

还有其他违规行为，是的。例如：[如果 Int 不能为 null，那么 null.asInstanceOf[Int] 是什么意思？](https://stackoverflow.com/questions/10749010/if-an-int-cant-be-null-what-does-null-asinstanceofint-mean/10750800#10750800)

数组是另一个例子，你可以`instanceof`在运行时通过装箱/拆箱或检查来支付通用数组的一致性。被`new Array[Any]`转换为对象数组 - 将整数存储到数组中将导致装箱。每当您使用没有上限的 时，每次索引元素时，数组都会与正确的运行时数组类型匹配`Array[T]`。`T`

为了更好地理解您可能会感到惊讶，考虑这些构造如何转换到 JVM 是很有用的，在 JVM 中存在原始和引用类型、装箱/拆箱和不同数组类的概念。

# jquery - jQuery添加/删除多个元素的类

> ID：12829658
> 
> 赞同：1
> 
> 时间：2012-10-10T22:50:34.770
> 
> 标签：jquery, if-statement, addclass, toggleclass

我有许多按钮，我在点击时添加/删除一个类。我的脚本在打开单击的按钮之前关闭了所有按钮。这个问题是一个按钮总是设置为打开，当我希望能够在第二次单击它时将其关闭。我尝试过使用 if 语句和 is()，但还没有任何效果。有人可以帮帮我吗？

```
$('.silver_button').live('click', function () {
  $('.checked').text('Select').removeClass('checked');
  $(this).text("").addClass('checked');

  if ($('.challenge_card .silver_button').is('.checked')) {
    $('.silver_button').text("Select").removeClass("checked");
  }

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T23:02:08.993

试试这个：

```
$('.silver_button').live('click', function () {

    if ($(this).hasClass('checked')) {

        $(this).text("Select").removeClass("checked");

    } else {

        $('.checked').text('Select').removeClass('checked');
        $(this).text("").addClass('checked');

    }

}); 
```

# ios - 这个方法调用了什么：[NSPathStore2 setDelegate:]

> ID：12829661
> 
> 赞同：0
> 
> 时间：2012-10-10T22:50:50.737
> 
> 标签：ios, debugging, abort

我在非常有限的情况下中止了，我试图找出导致它的一个或多个语句。控制台说：

> 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[NSPathStore2 setDelegate:]：无法识别的选择器发送到实例 0x1d50dcb0”

NSPathStore2 没有出现在我的代码中的任何位置，因此必须由我正在使用的某个框架调用。实例地址没有出现在其他任何地方，所以我不知道那是什么。

我尝试使用断点来捕获中止发生的时间，但是它不再发生。所以可能是时间问题。我在其他帖子中读到 NSPathStore2 是 NSString 的一部分，所以我尝试将打印语句放在各种字符串语句周围，但这没有帮助。在 developer.apple.com 中搜索 NSPathStore2 没有找到任何东西。

我认为中止发生在 init 方法期间，但该方法很长，并且在完成之前它会调用其他长方法。此外，它仅在运行了 5 分钟的操作序列后并且仅在从 Xcode 全新安装后才会发生。如果我第二次运行该应用程序，它不会中止。因此，试图找到它的来源非常耗时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T00:44:06.017

这是一个非常常见的症​​状，即您有一个释放的对象仍在某处使用。在您的调试方案中选中“启用僵尸对象”并查找您在何处调用已释放对象的方法。

# hibernate - Hibernate Search 可以使用嵌入式集合字段实现 Lucene FullTextFilter 吗？

> ID：12829663
> 
> 赞同：0
> 
> 时间：2012-10-10T22:50:55.963
> 
> 标签：hibernate, lucene, hibernate-search

我有一个看起来像这样的 Hibernate Search 实体类：

```
@Entity
@Indexed
@FullTextFilterDefs({
   @FullTextFilterDef(name="myFilter", impl=MyFilterFactory.class)
})
public class Parent {
   ...
   @Column
   @Field
   private String name;

   @ManyToMany
   @IndexedEmbedded
   private Set<Child> children;
   ...
} 
```

关联的实体同样简单明了：

```
@Entity
@Indexed
public class Child {
   ...
   @Column
   @Field
   private String name;

   @ManyToMany(mappedBy="children")
   @ContainedIn
   private Set<Parent> parents;
   ...
} 
```

如果该`MyFilterFactory.getFilter()`方法使用这样的简单字段`Parent`（硬编码以便于说明）：

```
...
Term term = new Term("name", "daddy");
Query query = new TermQuery(term);
return new CachingWrapperFilter( new QueryWrapperFilter(query) );
... 
```

... then`FullTextQuery`启用此过滤器后，将按预期工作。

但是，如果我将过滤器更改为使用**嵌入字段的字段**：

```
...
Term term = new Term("children.name", "Junior");
Query query = new TermQuery(term);
return new CachingWrapperFilter( new QueryWrapperFilter(query) );
... 
```

...然后我每次都得到 0 次点击，尽管搜索表达式`children.name:parent=junior`在 Luke 中工作得很好。

我在这里缺少什么吗？显然信息就在那里，因为我可以在 Luke 中搜索它。`FullTextFilter`对于像这样的嵌入式字段，而不是简单的字段，您与 Hibernate Search 有什么特别的关系吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T16:24:31.867

在整理一个简单的单元测试来提交错误单时，我发现了真正的问题。问题不是简单字段与复杂字段的问题。问题在于对大小写的一个令人沮丧的愚蠢误解。

通常，当 Hibernate Search 构建 Lucene 索引时，标准分析器会将所有字段值转换为小写。当您主要使用 Hibernate Search DSL 进行查询时，您会习惯于不区分大小写。但是，当您直接使用 Lucene API 进行查询时，您有责任将搜索词设为小写以匹配索引。

我最初看到的行为是由于我的搜索词的情况。当我过滤一个简单的字段时，我碰巧使用了一个全小写的字符串。当我过滤一个复杂的字段时，我碰巧使用了一个带有大写字母的字符串。

确保过滤器参数转换为小写后，问题得到解决。

# xcode - 如何在 LLDB 调试器中调用方法或执行代码？

> ID：12829665
> 
> 赞同：75
> 
> 时间：2012-10-10T22:51:06.073
> 
> 标签：xcode, llvm, lldb

我知道我可以`print someFloatVariable`在设置断点时键入或`po [self someIvarHoldingAnObject]`，但我不能做有用的事情，例如：

```
[self setAlpha:1]; 
```

然后它吐出：

> 错误：'[self' 不是有效命令。

奇怪的是我可以打电话`po [self someIvarHoldingAnObject]`，它会打印它的描述。

我相信我在一年前看过一个视频，其中有人演示了如何在运行时通过控制台执行代码，如果我没记错的话，这个人还提供了参数并将对象分配给指针。怎么做？

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2012-10-11T00:21:15.300

gdb v. lldb 命令的规范参考是[http://lldb.llvm.org/lldb-gdb.html](http://lldb.llvm.org/lldb-gdb.html)

您想使用计算表达式的 expr 命令。它是除了参数之外还接受“原始输入”的 lldb 命令之一，因此您通常需要一个“--”来指示参数（到 expr）的结束位置和命令的开始位置。例如

```
(lldb) expr -- [self setAlpha:1] 
```

有一个快捷方式“p”，它为您执行 -- （但不允许任何参数），例如

```
(lldb) p [self setAlpha:1] 
```

如果您调用的函数不是程序的一部分，您通常需要显式声明它们的返回类型，以便 lldb 知道如何调用它们。例如

```
(lldb) p printf("hi\n")
error: 'printf' has unknown return type; cast the call to its declared return type
error: 1 errors parsing expression
(lldb) p (int)printf("hi\n")
(int) $0 = 3
hi
(lldb) 
```

顺便说一句，有一种巧妙的方法可以解决浮点参数问题。您创建一个“表达式前缀”文件，该文件将添加到您在 lldb 中输入的每个表达式中，并带有您的类方法的原型。例如，我有一个继承自 NSObject 的 MyClass 类，它有两个感兴趣的方法，“setArg:”和“getArg”，它们设置和获取一个浮点 ivar。这是一个愚蠢的小例子，但它展示了如何使用它。这是我为 lldb 编写的前缀文件：

```
@interface NSObject
@end
@interface MyClass : NSObject
- init;
- setArg: (float)arg;
- (float) getArg;
@end

extern "C" {
  int strcmp (const char *, const char *);
  int printf(const char * __restrict, ...);
  void puts (const char *);
} 
```

在我的`~/.lldbinit`文件中我添加

```
settings set target.expr-prefix /Users/jason/lldb-prefix.h 
```

现在我可以做

```
(lldb)    p [var getArg]
(float) $0 = 0.5
(lldb)    p [var setArg:0.7]
(id) $1 = 0x0000000100104740
(lldb)    p [var getArg]
(float) $2 = 0.7 
```

你会注意到我在这里也包含了几个标准的 C 库函数。完成此操作后，我不再需要转换这些返回类型，例如

```
(lldb) p printf("HI\n")
<no result>
HI
(lldb) p strcmp ("HI", "THERE")
(int) $3 = -12 
```

（针对“<no result>”的修复已经提交给 lldb TOT 源。）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-11-08T21:11:26.987

如果您需要多行，请使用`expression`：

```
expression

do {
  try thing.save()
} catch {
  print(error)
}

// code will execute now 
```

空行完成并执行代码。

# html - TINYMCE 编辑器中的 html、head、body 标签 - SEO 问题

> ID：12829666
> 
> 赞同：1
> 
> 时间：2012-10-10T22:51:06.997
> 
> 标签：html, seo, tinymce, meta-tags

我正在使用需要将我的 HTML 页面粘贴到 TINYMCE 编辑器（元素本地服务器）中的客户端。

当我尝试粘贴整个 HTML 页面时，它不起作用，甚至不会显示。一旦我将其剥离为基本的 html（省略 html、head、body 标签），它就可以正常工作了。

我的问题是，作为一家 SEO 公司，我需要有效地放置标题标签、描述、关键字等，但现在我剥离了代码，我真的不能再正确放置这些了吗？因为没有`<head>`标签了...

我还没有测试，但我可能只能拥有`<head>`标签并删除`<html>`和`<body>`标签，但我不确定。

如果可能，搜索引擎是否只允许`<head>`代码顶部的标签。

有没有人将完整的 html 页面粘贴到 TINYMCE 编辑器中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T07:33:48.343

Tinymce 不是文本区域，而是可内容编辑的 iframe。因此，您将能够将内容写入头部。确实，您必须首先去除 html、body 和 head 标签（因为它们已经存在），但您可以保存 head 标签并将其内容写入 tinymce iframe 头部。

这是获取tinymce iframe的方法：

```
var tinymce_iframe = $(your_editor_id + "_ifr").get(0); 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-10-10T23:00:13.000

您可以访问这个网站：[http ://www.siteavenger.com/image-uploads-with-tinymce.php](http://www.siteavenger.com/image-uploads-with-tinymce.php)

祝你好运

# java - 对象构造完成后，是否与其他线程建立了内存栅栏？

> ID：12829667
> 
> 赞同：5
> 
> 时间：2012-10-10T22:51:07.957
> 
> 标签：java, memory, concurrency, constructor, memory-fences

有人可以验证我对构造函数执行后建立的内存围栏的理解。例如，假设我有一个名为 Stock 的类。

```
public final class Stock{

       private final String ticker;
       private double qty;
       private double price;

       public Stock ( String ticker, double qty, double price ){
              this.ticker  = ticker;
              this.qty     = qty;
              this.price   = price;

              //I am assuming a memory fence gets inserted here.
       }

       public final void updateQty( double qty ){
           this.qty = qty;
       }

       public final void updatePrice( double price ){
           this.price = price;
       }

} 
```

此外，假设构造函数由 Thread1 执行**，**`updateQty()`然后由**Thread2**`updatePrice()`调用多次（始终由 Thread2 调用）。

 **我的论点是，在 Thread1 创建对象之后，对象的“可见性”与 jvm 中的所有其他线程建立起来。而且由于这两个可变变量仅由 Thread2 更改，因此我不需要任何锁定。我对么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T22:53:04.930

> 我的论点是，在 Thread1 创建对象之后，对象的“可见性”与 jvm 中的所有其他线程建立起来。

这是*不*正确的。没有隐含的构造函数内存屏障/栅栏，这就是为什么围绕构造函数重新排序的指令是这样一个问题。如果要`Stock`在构造它的线程之外的另一个线程中使用对象，则必须`synchronize`在调用任何更新方法之前对对象进行处理。

> 而且由于这两个可变变量仅由 Thread2 更改，因此我不需要任何锁定。

在您最初在对象上同步之后，`Thread2`您不需要任何*额外*的锁定，除非您想在其他线程中查看那些变异的字段。`Stock`如果多个线程在更改对象时从对象中读取数据，`Thread2`则所有线程都需要通过同步或使字段变为字段来跨越内存屏障`volatile`。

这与构造函数操作重新排序*和*内存可见性有关。有关构造函数重新排序的更多陷阱，请参阅此答案：

> [这是对象的安全发布吗？](https://stackoverflow.com/questions/10301061/is-this-a-safe-publication-of-object/10301179#10301179)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T22:58:04.433

很不幸的是，不行。构造函数（大部分）类似于 Java 内存模型中的普通方法。

但这很糟糕，它给程序员带来了无尽的困惑。**

# php - 覆盖 Magento 配置

> ID：12829669
> 
> 赞同：7
> 
> 时间：2012-10-10T22:51:23.343
> 
> 标签：php, magento

我正在寻找一个很好的解决方案来覆盖 Magento 配置而不更改默认值。

例如，我想在不删除现有值的情况下覆盖 core_config_data 表中的“web/unsecure/base_skin_url”项。因此，如果代码中的任何地方都调用了这个确切的代码：

```
Mage::getStoreConfig('web/unsecure/base_skin_url'); 
```

它会找到我设置的配置选项，而不是默认选项...

提前致谢！

查克

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-10T23:05:03.933

Magento 在运行时直接从配置对象的树形结构中读取其配置值，因此您需要使用配置对象的本地`setNode`方法来更改这些值。但是，由于 Magento[在作用域配置](http://alanstorm.com/category/magento#magento_config)（自链接）中加载的方式，它并不像看起来那么简单。

使用当前版本的 Magento（我相信，但尚未测试过旧版本），您需要在当前的节点集中设置配置值`store`。

第一步是获取当前设置的商店的代码。您可以使用以下程序以编程方式执行此操作

```
$store = Mage::app()->getStore();
$code  = $store->getCode(); 
```

然后，您可以使用以下调用设置配置值

```
$config = Mage::getConfig();
$config->setNode("stores/$code/web/unsecure/base_skin_url", 'value_to_set'); 
```

请记住，这一切都需要在Magento 引导配置对象**之后发生。**另外请记住，Magento 将在一段时间内加载配置，但不会加载存储对象。如果是这种情况，您将无法从存储对象加载存储代码。

我在[Pulse Storm Chaos 模块](http://alanstorm.com/magento_flat_collection_chaos)中做了类似的事情。如果您对工作代码感兴趣，请访问[Github](https://github.com/astorm/Chaos/blob/master/app/code/community/Pulsestorm/Chaos/Model/Entropy.php)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-04-30T09:36:47.030

Alan 的回答是正确的，但它并不关心配置缓存。例如，如果您调用`Mage::getStoreConfig('web/unsecure/base_skin_url')`两次并更改其间的值，则更改无效。要解决此问题，您应该使用`$store->setConfig('web/unsecure/base_skin_url', 'value_to_set')`. 它两者兼而有之：更新配置缓存并使用 Alan 的方法设置配置节点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T06:36:44.797

如果你想覆盖一些特殊的配置数据，你可以把它放在 app/etc/local.xml 中。但这仅对您自己的商店有用，不适用于公共模块。

`base_url`这是一种在不更改数据库的情况下覆盖用于开发目的的方法。

```
<config>
...
    <stores>
        <default>
            <web>
                <unsecure>
                    <base_url>http://dev.myshop.com/</base_url>
                </unsecure>
                <secure>
                    <base_url>http://dev.myshop.com/</base_url>
                </secure>
            </web>
        </default>
        <admin>
            <web>
                <unsecure>
                    <base_url>http://dev.myshop.com/</base_url>
                </unsecure>
                <secure>
                    <base_url>http://dev.myshop.com/</base_url>
                </secure>
            </web>
        </admin>
    </stores>
...
</config> 
```

# javascript - Javascript 数组、排序和分支预测

> ID：12829676
> 
> 赞同：10
> 
> 时间：2012-10-10T22:51:45.340
> 
> 标签：javascript, arrays

**编辑** 在花费了几个小时并使用@pst 之后，事实证明问题完全不同。

在代码中，您可以看到我使用了“+new Date()”的时间戳快捷方式。这会像标准的“new Date().getTime()”一样返回一个时间戳。

但是，+new Date() 在与数学运算（+、-、/）一起使用时表现非常非常糟糕。尽管 'start' 变量的 typeof() 表示为 'number'，但发生了一些事情让它变得非常缓慢。使用标准 getTime() 方法时，在进行时间减法时没有性能损失。

查看详细说明问题的 jsperf，[http:](http://jsperf.com/new-date-timing) //jsperf.com/new-date-timing 。

关于@pst 非常详细的答案以及我为复制链接问题所做的努力，请使用他的答案作为该问题的规范答案。

我将更改此问题的标题以准确反映@pst 的答案和我的初衷，但将保留原始标题和问题以供将来参考。

**新问题**

javascript 数组是否对随机排序和未排序数据的数组进行分支预测？

请参阅下面的@pst 的答案。

**原始标题和问题如下**

**标题：数组迭代在相同数据上花费 2 倍的时间**

我之前在看这个问题，[为什么处理排序数组比处理未排序数组更快？](https://stackoverflow.com/questions/11227809/why-is-processing-a-sorted-array-faster-than-an-unsorted-array)，并想尝试在 javascript 中设置相同的测试。

这让我想到了一些意想不到的事情。在下面小提琴链接的测试中，简单地使用相同的代码迭代相同的随机生成的数值数组会导致响应时间大不相同。

我已经在 Chrome、Safari、Firefox 和 node.js 中对此进行了测试。

在 Chrome & node 中，第一次迭代比第二次迭代快。在 Safari 和 Firefox 中，第一次迭代比第二次迭代*慢*。

这是小提琴，[http://jsfiddle.net/9QbWB/6/](http://jsfiddle.net/9QbWB/6/)

在链接的小提琴中，我禁用了排序（认为这最初是问题，但事实并非如此）。对数据进行排序使循环时间更长。

我已经非常彻底地检查了代码，以确保我已经删除了任何可能影响结果的内容。我感觉自己像是一组宣布 FTL 中微子的特殊科学家，我在实验中找不到问题，而且数据出乎意料。

在我下面包含的代码中，一些东西，如初始 setTimeout、jQuery DOM 可视化等，用于在 jsfiddle.net 中直观地显示数据。核心功能是一样的。

```
 //javascript test of https://stackoverflow.com/questions/11227809/why-is-processing-a-sorted-array-faster-than-an-unsorted-array

setTimeout(function(){

    var unsorted_list = $('#unsorted'),
        sorted_list = $('#sorted');

    var length = 32768,
        data = [];

    for(var i=0; i<length; i++){
        data[i] = Math.floor( Math.random()*256); 
    }

    var test = function(){
        var sum = 0,
            start = +new Date();

        for(var i=0; i<1000; i++){
            for(var c=0; c<length; c++){
                if( data[c] >= 128 ){
                    //sum += data[c];
                }
            }
        }

        return +new Date() - start;
    }

    //Unsorted
    var results = 0;
    for( var i=0; i<10; i++){
        var x = test();
        console.log(x);
        unsorted_list.append('<div>'+x+'</div>');
        results += x;
    }
    unsorted_list.append('<div>Final:'+(results/10)+'</div>');
    console.log( 'Unsorted: ', results/10 );

    //Sort array
    //data.sort();

    //Sorted
    var results = 0;
    for( var i=0; i<10; i++){
        var x = test();
        console.log(x);
        sorted_list.append('<div>'+x+'</div>');

        results += x;
    }
    sorted_list.append('<div>Final:'+(results/10)+'</div>');
    console.log( 'Sorted: ', results/10 );

},5000); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T23:20:07.800

（显然这个答案错过了这个问题 - 出于相关原因留在这里。）

* * *

这是*我的*jsperf 案例 - [http://jsperf.com/sorted-loop/2](http://jsperf.com/sorted-loop/2) - 也许更多的浏览器会显示足够的东西。我还包含了一个仅使用按位操作的测试用例，取自链接的帖子（我还没有验证 JS 中的有效性）。

**结论：**性能似乎与分支预测有关。

1.  *不*使用条件的“+按位”测试对在所有主要浏览器运行中的速度相同（对于同一浏览器）。（Chrome 比 FF 快，在按位操作上比 IE 快；请参阅其他 SO 帖子。）

2.  使用条件的“+cond”测试对受到很大影响，排序后的数据受到高度青睐。如果分支预测是一个因素，这是预期的结果。

# c# - CLR 字符串引用不（总是）匹配

> ID：12829679
> 
> 赞同：3
> 
> 时间：2012-10-10T22:52:05.530
> 
> 标签：c#, .net, .net-4.0

从 Richter 和[这个讨论](https://stackoverflow.com/questions/8482479/why-are-2-separate-string-references-equal-in-other-words-why-are-s-and-t-both)中，我希望任何两个“相同”的字符串都是相同的引用。但刚才在 LINQPad 中，我在这个主题上得到了不同的结果。这是代码：

```
void Main()
{
    string alpha = String.Format("Hello{0}", 5);
    string brava = String.Format("Hello{0}", 5);
    ReferenceEquals(alpha, brava).Dump();
    String.IsInterned(alpha).Dump();
    String.IsInterned(brava).Dump();

    alpha = "hello";
    brava = "hello";
    ReferenceEquals(alpha, brava).Dump();
} 
```

以下是 Dump() 调用的结果：

```
False
Hello5
Hello5
True 
```

我本来希望第一个和最后一个`ReferenceEquals`都是`True`. 发生了什么？

除了上面的例子，在其他什么情况下 ReferenceEquals 会失败？例如，多线程？

例如，如果我使用传递给方法的字符串参数作为对其进行锁定的对象，则此问题很重要。在这种情况下，参考最好是相同的！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T22:56:05.870

不保证会发生字符串实习。永远不应该依赖这一点。

您最后的比较产生`True`. 这不是因为发生了“临时”实习，而是因为两个字符串都是从相同的字符串*字面* `"hello"`量初始化的。在这种特殊情况下，他们将被拘留。Svick在[链接的答案中对此进行了解释。](https://stackoverflow.com/a/8489276/85371)

也没有真正的必要。

用于`String.Equals`比较字符串。

### **更新**锁定问题

您需要一个单独的锁定变量。通常的模式包括

```
private /*readonly*/ object lockObject = new object(); 
```

在包含它应该保护的对象（在本例中为字符串）的范围内。这是在引用发生变化的情况下它可以稳健工作的唯一方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T23:25:53.750

动态创建的字符串不会发生字符串驻留。这包括由 String.Format 和 StringBuilder 创建的那些（我相信 String.Format 在内部使用 StringBuilder）。MSDN 的[String.Intern](http://msdn.microsoft.com/en-us/library/system.string.intern.aspx)文档表明了这一点：

> 在以下示例中，值为“MyTest”的字符串 s1 已被实习，因为它是程序中的文字。System.Text.StringBuilder 类生成一个与 s1 具有相同值的新字符串对象。对该字符串的引用分配给 s2。Intern 方法搜索与 s2 具有相同值的字符串。因为存在这样的字符串，所以该方法返回分配给 s1 的相同引用。然后将该引用分配给 s3。引用 s1 和 s2 比较不相等，因为它们引用了不同的对象；引用 s1 和 s3 比较相等，因为它们引用相同的字符串。
> 
> ```
> string s1 = "MyTest";
> string s2 = new StringBuilder().Append("My").Append("Test").ToString();  
> string s3 = String.Intern(s2);  
> Console.WriteLine((Object)s2==(Object)s1); //Different references. 
> Console.WriteLine((Object)s3==(Object)s1); //The same reference. 
> ```

需要注意的关键是，对于 CLR，您生成的字符串`string.Format("Hello{0}", 5)`不会被视为文字字符串，因此在加载程序集时不会发生实习。`"hello"`另一方面，字符串由 CLR 执行。为了实习这些字符串，您必须使用 String.Intern 显式执行此操作。

**编辑**

关于您的锁定问题，理论上您可以使用字符串作为锁定对象，但我认为这是不好的做法。您不知道传递给您的应用程序的字符串来自何处，因此无法保证它们是相同的*引用*。字符串可能来自数据库读取调用、使用 StringBuilder、使用 String.Format 或用户输入。在这些情况下，您的锁定将无法确保一次只有一个线程在您的关键部分中，因为不能保证会发生字符串驻留。

即使您*可以*保证始终使用实习字符串，您仍然会遇到潜在的危险问题。现在，任何人都可以在您的应用程序（包括其他 AppDomains）的任何地方锁定相同的字符串引用。这是个坏消息。

我建议有一个明确声明的锁对象（对象类型）。如果出现线程问题，您将节省*大量*时间来调试线程问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T23:01:49.763

要回答您最初的问题，字符串实习[仅适用于常量字符串，并且当您明确要求它](https://stackoverflow.com/a/6654011/16800)时，至少按照该答案。

但是，如果您希望保证某个特定字符串被保留，您可以调用`string.Intern`.

```
string internedVersion = string.Intern("Some string"); 
```

相反，*如果存在则*`string.IsInterned`返回一个实习字符串。不能保证对于特定对象，您具有该实习字符串，除非您已调用或正在使用这些方法之一的**返回值。***`string``Intern``IsInterned`*

 ***> 例如，如果我使用传递给方法的字符串参数作为对其进行锁定的对象，则此问题很重要。在这种情况下，参考最好是相同的！！！

你永远不应该锁定一个字符串对象，你不知道（由于实习）这些字符串上的锁定是什么。

如果您需要锁定字符串，我建议您使用以下方法：

```
Dictionary<string,object> locks;
locks.Add("TEST", new object());
lock (locks["TEST"])
{
} 
```

请注意，由于字符串提供的默认相等性，此逻辑也适用于非内部字符串。

或者，您可以创建自己的类来包装字符串并处理相等性，但这对于锁来说可能是多余的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-10T23:18:58.673

[此博客条目](http://community.bartdesmet.net/blogs/bart/archive/2006/09/27/4472.aspx)解释了原因。

简而言之，如果您的字符串不是通过分配的`ldstr`（即它不是在您的代码中定义的字符串文字），它不会最终出现在实习字符串的（散列）表中，因此不会发生实习。

解决方案是调用[`String.Intern(str)`](http://msdn.microsoft.com/en-us/library/system.string.intern.aspx). Intern 方法使用实习生池来搜索等于 的值的字符串`str`。如果存在这样的字符串，则返回其在实习池中的引用。如果字符串不存在，则将*对 str 的引用添加到实习池，然后返回该引用。*

不要锁定字符串，尤其是当您尝试使用两个不同的引用变量来尝试指向相同（可能）的内部字符串时。

另请注意，实习字符串有一些缺点。因为字符串文字在程序的生命周期内不会发生变化，所以在程序退出之前不会对实习字符串进行垃圾收集。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-11T00:17:44.770

使第二种情况更有趣：

```
alpha = "hello";
brava = "hell" + "o";
ReferenceEquals(alpha, brava).Dump(); 
```

实现非常简单。有人必须*努力*识别特定字符串与字符串的另一个实例匹配。这需要时间，不可避免。运行时时间紧缺，字符串处理需要快速。但是编译器在寻找匹配项时有其美好的时光，它可以用字符串文字构建一个哈希表。所以基本规则是只有编译时常量字符串表达式会被实习。***

# python - 无法使用 Windows 提示符运行 python 脚本文件

> ID：12829680
> 
> 赞同：2
> 
> 时间：2012-10-10T22:52:16.557
> 
> 标签：python, python-2.7, pythonpath

我正在尝试从 Windows 命令提示符运行 python 脚本，但收到以下错误消息：

*“python：无法打开文件'pacman.py'：[Errno 2]没有这样的文件或目录”*

当我尝试命令时：

```
c:\Program Files (x86)\Python27>python pacman.py 
```

这个特定的 python 脚本文件*pacman.py*位于以下文件夹中：

C:\Users\Chris\Dropbox\edX\CS188x\search

所以我将此文件夹添加到 PYTHONPATH 并使用以下代码确认它在那里：

```
>>> import sys
>>> sys.path
['', 'C:\\Program Files (x86)\\Python27\\Lib\\idlelib', 'C:\\Users\\Chris\\Dropbox\\edX\\CS188x\\search', 'C:\\windows\\syste... 
```

我还检查了这个文件的权限：

```
>>> os.access("C:\Users\Chris\Dropbox\edX\CS188x\search\pacman.py",os.W_OK)
True
>>> os.access("C:\Users\Chris\Dropbox\edX\CS188x\search\pacman.py",os.R_OK)
True
>>> os.access("C:\Users\Chris\Dropbox\edX\CS188x\search\pacman.py",os.X_OK)
True 
```

所以我真的不知道为什么我不能运行这个文件，即使它的路径已经被添加到 PYTHONPATH 中。任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T23:42:36.490

Python 解释器使用 PYTHONPATH。它与 Windows 的 PATH 环境变量不同。您不能将其用作在命令行上将文件传递给解释器的搜索路径。

因此，您需要指定文件的有效路径。通过使用与您一直在尝试的相同命令，不同之处在于您的当前目录与 pacman.py 的位置相同，或者通过指定文件的完整路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T22:58:12.390

您是否尝试从其目录运行脚本？

我只能猜测，但可能是文件位于您的保管箱文件夹中的一些问题...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T00:56:07.387

解决了！所以评论是正确的，因为我必须将目录更改为文件的位置，但缺少的是我必须编辑系统环境变量 PATH 以包含 python.exe 的位置，我的情况是 C :\program files (x86)\python27 但对大多数人来说只是 C:\python27。感谢大家的帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T22:58:50.873

`python "C:\Users\Chris\Dropbox\edX\CS188x\search\pacman.py"`

或者

```
cd C:\Users\Chris\Dropbox\edX\CS188x\search\
"c:\prorgam files (x86)\python27\python" pacman.py 
```

# javascript - 访问要修改的对象的复制版本？

> ID：12829681
> 
> 赞同：1
> 
> 时间：2012-10-10T22:52:21.580
> 
> 标签：javascript

如果我将代码复制到这样的闭包中

```
(function(){
    var private1 = {},
        private2 = {},
        publik;

    publik.get(object){
         private1[object.name] = object;
    };

    window.publik = publik;
}())

publik.get({
    // API
    name: 'name_foo',
    functionA: function(){
        // I can not access private2 in here
    },
    functionB: function(){}
}) 
```

有没有一种 API 可以工作的方法，以便 functionA 和 functionB 可以访问闭包内的 private 2。

它们将被复制到闭包中，因此复制的版本应该可以访问它。这就是为什么我进行关闭并将 private1 和 private2 像这样放在一起的原因。

对象的书面版本（不是复制版本）在 jslint 中引发错误，我猜这是因为它违反了范围规则。

函数参数（不是参数）是全局范围内的未命名变量，无法访问闭包。

（直到被复制到其中:)

如果我做了`private1`并且`private 2`同一个对象说......只是`private`......然后使用`this`关键字访问它，它会起作用吗？

**不过，我更愿意将它们分开。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T23:39:06.053

您的代码有语法错误，并且*get*似乎更好地命名为*set*。此外，您的代码似乎并不特定于浏览器，因此最好使用更通用的*全局*对象而不是特定的*窗口*对象。

考虑类似的事情：

```
(function(global){
    var private1 = {name: 'private1'},
        private2 = {name: 'private2'},
        publik;

    publik = {
      set: function (object) {
        private1[object.name] = object;
      }
    };

    global.publik = publik;
}(this)) 
```

publik.set方法可以通过闭包访问*private1**和*private2 *，*您可以通过 Douglas Crockford 在他的文章[Private Members in JavaScript](http://www.crockford.com/javascript/private.html)中解释的特权方法访问它们。扩展上述内容，可能是：

```
 publik = {

      set : function (...) {
        ...
      },

      getPrivate1: function (name) {
        return (typeof name == 'string')? private1[name] : private1;
      },

      ...

    }; 
```

# unix - 在 shell 脚本中使用变量并作为 cron 作业运行

> ID：12829682
> 
> 赞同：0
> 
> 时间：2012-10-10T22:52:25.227
> 
> 标签：unix, amazon-ec2, sh

我有以下脚本 dbbackup.sh

```
mysqldump -P 3306 -h 436543545.amazonaws.com -u admin--password=goaway mydb > dump-1.sql
s3cmd put dump-1.sql s3://database-blah-bucket
rm -f -r dump-1.sql 
```

我需要进行以下更改

1.  以下格式的文件（dump-1.sql）是`dump-dd-mm-yyy-hh-mm.sql`
2.  `sh dbbackup.sh`每天凌晨 3 点运行我需要作为 cron 作业运行的脚本

对 UNIX 完全陌生，所以不知道上面该怎么做

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T22:59:17.543

您只需要使用`date`命令，请参见以下`shell`代码：

```
dump="dump-$(date +%d-%m-%Y-%H-%M).sql"
mysqldump -P 3306 -h 436543545.amazonaws.com -u admin--password=goaway mydb > "$dump"
s3cmd put "$dump" s3://database-blah-bucket
rm -f -r "$dump" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T23:01:23.377

内容`dbbackup.sh`：

```
#!/bin/bash

HOST="436543545.amazonaws.com"
PORT=3306
USER="admin"
PASSWORD="goaway"
DATABASE="mydb"

DATE_STR=$(date +%d-%m-%Y-%H-%M)

FILENAME="dump-${DATE_STR}.sql

mysqldump -P $PORT -h $HOST -u $USER --password=${PASSWORD} $DATABASE > $FILENAME
s3cmd put $FILENAME s3://database-blah-bucket
rm -f -r $FILENAME 
```

然后使用`crontab -e`. 进入：

```
0 3 * * *  /path/to/dbbackup.sh 
```

# scheme - 计算多项式函数[方案/球拍]

> ID：12829689
> 
> 赞同：1
> 
> 时间：2012-10-10T22:53:10.940
> 
> 标签：scheme, racket

我正在尝试编写一个**尾递归**函数`poly`，该函数将计算给定值和系数列表的多项式的值。如，如果 coeff 是系数列表，`(a0, a1, a2,...an)`则应`(poly x coeff)`计算该值`a0 + a1x +a2*x^2 + a3*x^3 + ...an*x^n`

这些函数也有望在线性时间内运行 (O(n))

我对此的想法是创建一个辅助函数，它有一个额外的参数（acc）来跟踪你在列表中的位置，所以你知道将它提升到什么权力，但我想不出该怎么做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T23:40:10.030

不需要辅助函数来跟踪您在列表中的位置，因为您一次只需要向前移动一个列表元素直到到达末尾。这是一个可能的骨架

```
(define (poly coeff)
  (let loop ((power 0) (total 0) (clist coeff))
    (cond
       ((null? clist) ???)
       (else (loop (+ 1 power) (??????) (cdr clist)))))) 
```

这就是为你完成的大部分工作。你真正需要做的就是弄清楚你应该如何计算指数和加法。有两个基本选项，我知道我会选择哪一个（更少的 cpu 周期）。

# jquery - 到 App Engine 的 ajax 帖子不起作用

> ID：12829690
> 
> 赞同：0
> 
> 时间：2012-10-10T22:53:13.560
> 
> 标签：jquery, python, ajax, google-app-engine

所以我有这个 html/js 试图测试一个 ajax 帖子

```
<html>

<head>
    <script src="js/jquery-1.8.2.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function() { 
            document.write("booo");
            var data = {"lat":5};
            $.ajax({
                    type: "POST",
                    url: "/geo",
                    data: data,
                });
            });
            var data = {"lat":5};
            $.ajax({
                    type: "POST",
                    url: "/geo",
                    data: data,
                });
    </script>
</head>

<body>
    <form method="post">
        <input name="lat" type="text">
        <input name="lon" type="text">
        <input type="submit">
    </form>
</body>
</html> 
```

现在我只是想发布数据，在 python 中获取它并将其写回/存储在 db 中，但是我的 ajax post 函数没有发生任何事情。这是我的蟒蛇，

```
class GeoHandler(Handler):

    def get(self):
        self.render("geo.html")

    def post(self):
        lat = self.request.get("lat")
        lon = self.request.get("lon")
        self.write(lat)
        loc = models.LocModel(coords = db.GeoPt(lat,lon), hm = str(lat).join(str(lon)))
        loc.put() 
```

我的网址处理程序是

```
 ('/geo', GeoHandler), 
```

最终，我尝试使用 javascript 来捕获我的用户的位置数据并对其进行映射...但是 app engine/webapp2 只喜欢抓取客户端的 ipv6，并且无法获取 ipv5 的位置数据，但是有用于地理数据的 html5/js 解决方案.. 但我什至无法将基本数据发布到服务器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T23:29:58.210

您没有将 包含`"lon"`在数据中。像这样的东西：

```
 var data = {"lat": 5, "lon": 6} 
```

您可能还想查看[请求标头](https://developers.google.com/appengine/docs/python/runtime#Request_Headers)，更具体地说是`X-AppEngine-CityLatLong`. 这是一个城市级别，当然这取决于您的应用程序。

# ruby-on-rails - 设计异步没有记录延迟作业中的attr_accessor？

> ID：12829699
> 
> 赞同：1
> 
> 时间：2012-10-10T22:54:38.393
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, delayed-job

我的应用是 Rails 3 + Delayed Job (2.1.4) + Devise(2.1.2) + Devise Async (0.3.1)。

我正在使用此设计设置来异步发送所有设计电子邮件。这适用于新用户，但在我的邀请流程中，我执行以下操作：

```
added_user = User.new(:email => email, :added_by => current_user, :added_to => @group) 
```

这里的问题是 added_by 和 added_to 是虚拟属性（attr_accessor）。并且当延迟作业异步将作业插入延迟作业时，虚拟属性不存在并且会发生错误。

关于如何处理这种情况的任何想法？这是延迟作业问题还是设计异步问题？我不完全确定从哪里开始，谷歌搜索也没有帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T02:39:07.177

我唯一能想到的是，您还没有通过批量分配使 added_by 和 added_to 可访问。在更高版本的 Rails 中，您可以让它引发`MassAssignmentSecurity`错误，但在您的情况下这可能不可用或启用。尝试将以下内容添加到您的模型中：

```
attr_accessible :added_by, :added_to 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-03T03:15:58.710

DelayedJob 在属性访问器方面存在重大问题（所以我非常怀疑您的问题与设计有关）。本质上，ActiveRecord::Base 的 encode_with 和 init_with 方法需要在使用 DelayedJob 时被覆盖以包含属性访问器——至少除非您使用自定义。我建议在[这里](https://stackoverflow.com/questions/10209986/delayed-job-with-custom-attributes)寻找有关如何解决此问题的想法。

# android - Android 单元测试：Bundle/Parcelable

> ID：12829700
> 
> 赞同：40
> 
> 时间：2012-10-10T22:54:40.933
> 
> 标签：android, unit-testing, bundle, parcelable

你如何对 Parcelable 进行单元测试？我创建了一个 Parcelable 类，并编写了这个单元测试

```
TestClass test = new TestClass();
Bundle bundle = new Bundle();
bundle.putParcelable("test", test);

TestClass testAfter = bundle.getParcelable("test");
assertEquals(testAfter.getStuff(), event1.getStuff()); 
```

我故意尝试通过在 中返回 null 来使测试失败`createFromParcel()`，但它似乎成功了。看起来它在需要之前不会被打包。如何强制捆绑到..捆绑？

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2013-01-27T14:19:54.790

我发现此链接显示如何对可打包对象进行单元测试：http: [//stuffikeepforgettinghowtodo.blogspot.nl/2009/02/unit-test-your-custom-parcelable.html](http://stuffikeepforgettinghowtodo.blogspot.nl/2009/02/unit-test-your-custom-parcelable.html)

`Bundle`如果你真的不需要像 zorch 的建议那样包含它，你实际上可以跳过它。然后你会得到这样的东西：

```
public void testTestClassParcelable(){
    TestClass test = new TestClass();

    // Obtain a Parcel object and write the parcelable object to it:
    Parcel parcel = Parcel.obtain();
    test.writeToParcel(parcel, 0);

    // After you're done with writing, you need to reset the parcel for reading:
    parcel.setDataPosition(0);

    // Reconstruct object from parcel and asserts:
    TestClass createdFromParcel = TestClass.CREATOR.createFromParcel(parcel);
    assertEquals(test, createdFromParcel);
} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-11-22T06:45:44.403

你可以这样做：

```
//Create parcelable object and put to Bundle
    Question q = new Question(questionId, surveyServerId, title, type, answers);
    Bundle b = new Bundle();
    b.putParcelable("someTag", q);

//Save bundle to parcel
    Parcel parcel = Parcel.obtain();
    b.writeToParcel(parcel, 0);

//Extract bundle from parcel
    parcel.setDataPosition(0);
    Bundle b2 = parcel.readBundle();
    b2.setClassLoader(Question.class.getClassLoader());
    Question q2 = b2.getParcelable("someTag");

//Check that objects are not same and test that objects are equal
    assertFalse("Bundle is the same", b2 == b);
    assertFalse("Question is the same", q2 == q);
    assertTrue("Questions aren't equal", q2.equals(q)); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-01-10T19:25:57.133

由于这个问题和答案帮助了我好几年，我想我会添加我自己的建议，那就是`assert`阅读`dataPosition()`结束时的 the 与写作结束时的相同。基于[Xilconic 的回答](https://stackoverflow.com/a/14548276/9195194)：

```
@Test
public void testTestClassParcelable(){
    TestClass test = new TestClass();

    // Obtain a Parcel object and write the parcelable object to it:
    Parcel parcel = Parcel.obtain();
    test.writeToParcel(parcel, 0);

    //>>>>> Record dataPosition
    int eop = parcel.dataPosition();

    // After you're done with writing, you need to reset the parcel for reading:
    parcel.setDataPosition(0);

    // Reconstruct object from parcel and asserts:
    TestClass createdFromParcel = TestClass.CREATOR.createFromParcel(parcel);
    assertEquals(test, createdFromParcel);

    //>>>>> Verify dataPosition
    assertEquals(eop, parcel.dataPosition());
} 
```

* * *

**背景：**这是在花了（令人尴尬的）时间调试一个 bad `Parcelable`. 就我而言，`writeToParcel`是从一个中等复杂的对象图中的一个对象编写一个重复的字段。因此，**随后**的对象被错误地读取，给出了误导性的异常，并且在使用特定行为不端的对象的测试中没有错误。

追踪起来很痛苦，然后我意识到检查`dataPosition`会更快地查明问题，因为我对内部对象和主容器进行了测试。

* * *

**Kotlin：**因为我在 Kotlin 工作，所以有点 lambda 和具体化魔法：

```
class ParcelWrap<T>(val value: T)

val <T> T.parcel: ParcelWrap<T> get() = ParcelWrap(this)

inline fun <reified T: Parcelable> ParcelWrap<T>.test(
        flags: Int = 0,
        classLoader: ClassLoader = T::class.java.classLoader,
        checks: (T) -> Unit
): T {
    // Create the parcel
    val parcel: Parcel = Parcel.obtain()
    parcel.writeParcelable(this.value, flags)

    // Record dataPosition
    val eop = parcel.dataPosition()

    // Reset the parcel
    parcel.setDataPosition(0)

    // Read from the parcel
    val newObject = parcel.readParcelable<T>(classLoader)

    // Perform the checks provided in the lambda
    checks(newObject)

    // Verify dataPosition
    assertEquals("writeToParcel wrote too much data or read didn't finish reading", eop, parcel.dataPosition())
    return newObject
} 
```

我现在可以很容易地按照这些思路进行测试，如果有一个完整且可靠的`equals()`：

```
testObject.parcel.test { assertEquals(testObject, it) } 
```

请注意，避免使用[此答案](https://stackoverflow.com/a/39598190/9195194)`.parcel.test`重新指定泛型类型参数。

或者，对于更复杂的断言：

```
testObject.parcel.test {
    assertEquals(123, it.id)
    assertEquals("dewey", it.name)
    // ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-17T08:12:05.413

我正在使用包裹助手类将对象转换为包裹。

看到这个要点：[https ://gist.github.com/scallacs/f749a7385bcf75829a98d7b651efd02e](https://gist.github.com/scallacs/f749a7385bcf75829a98d7b651efd02e)

用法很简单：

```
Model model = new Model("HelloWorld");
// Create an object from the parcel model
Model createdFromParcel = ParcelTestHelper.createFromParcel(model, model.CREATOR);

// Do your assertions...
assertEquals(model.value, createdFromParcel.value); 
```

实施：

```
import android.os.Parcel;
import android.os.Parcelable;

public class ParcelTestHelper {

    public static String DEFAULT_CREATOR_FIELD = "CREATOR";

    public static <T extends Parcelable> T createFromParcel(T input, Parcelable.Creator<T> creator) {
        Parcel parcel = toParcel(input);
        return fromParcel(parcel, creator);
    }

    public static <T extends Parcelable> T createFromParcel(T input) throws NoSuchFieldException, IllegalAccessException {
        return createFromParcel(input, getCreator(input));
    }

    public static <T extends Parcelable> Parcel toParcel(T input) {
        Parcel parcel = Parcel.obtain();
        input.writeToParcel(parcel, input.describeContents());
        parcel.setDataPosition(0);
        return parcel;
    }

    public static <T> Parcelable.Creator<T> getCreator(T input) throws NoSuchFieldException, IllegalAccessException {
        return getCreator(input, DEFAULT_CREATOR_FIELD);
    }

    public static <T> Parcelable.Creator<T> getCreator(T input, String field) throws NoSuchFieldException, IllegalAccessException {
        Object creator = input.getClass().getField(field).get(input);
        if (!(creator instanceof Parcelable.Creator)) {
            throw new InternalError("Should have field " + field + " instance of Parcelable.Creator");
        }
        return (Parcelable.Creator<T>) creator;
    }

    public static <T extends Parcelable> T fromParcel(Parcel parcel, Parcelable.Creator<T> creator) {
        return creator.createFromParcel(parcel);
    }
} 
```

# jquery - jQuery每隔几秒旋转一次

> ID：12829701
> 
> 赞同：0
> 
> 时间：2012-10-10T22:54:49.387
> 
> 标签：jquery, rotation, fade

```
$(document).ready(function(){
  $(".def").click(function(event){
    $("#l1").attr('class', 'active');
    $("#l2").attr('class', 'inactive');
    $("#l3").attr('class', 'inactive');
    $("#readmore").attr('action', 'http://www.facebook.com');
      $(".summary").fadeout(1000, function(){
        $("#s1").text('text here');
        $(".summary").fadein(1000);
      });
  });
  $("#l2").click(function(event){
    $(".summary").fadeout(1000, function(){
      $("#l2").attr('class', 'active');
      $("#l1").attr('class', 'inactive');
      $("#l3").attr('class', 'inactive');
      $("#readmore").attr('action', 'http://www.google.com');
        $("#s1").text('text here 2');
        $(".summary").fadein(1000);
    });
  });
  $("#l3").click(function(event){
    $(".summary").fadeout(1000, function(){
      $("#l3").attr('class', 'active');
      $("#l2").attr('class', 'inactive');
      $("#l1").attr('class', 'inactive');
      $("#readmore").attr('action', 'http://www.youtube.com');
        $("#s1").text('text here 3');
        $(".summary").fadein(1000);
    });
  });
}); 
```

上面的脚本是每当使用 id 或类单击指定的链接时，它都会更改网站区域的文本......但我也希望它每 10 秒自动旋转......什么是最好的方式将此实现到此脚本中...

谢谢！您可以查看整个页面 - 这里 -[链接](http://www.anavictoria.com/_/promo/tango/index.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T23:07:33.180

我不知道最好的方法是什么。您可以在此处构建一个 sleep 函数： [什么是 sleep() 的 JavaScript 版本？](https://stackoverflow.com/questions/951021/what-do-i-do-if-i-want-a-javascript-version-of-sleep)

```
function pausecomp(millis)
 {
  var date = new Date();
  var curDate = null;
  do { curDate = new Date(); }
  while(curDate-date < millis);
} 
```

然后有一个计数器来看看你在哪个旋转，有一个不断变化的while循环。

```
var counter = 0;
while(true)
{
   switch(counter) {
        case : 0 {
        $('.def').click();
        break;
        case : 1 {
        $('#l2').click();
        break;
        case : 2 {
        $('#l3').click();
        break;
   }
   counter = counter + 1;
   if(counter == 3)
       counter = 0;
} 
```

“粗鲁”的做法，但它应该工作:)

# objective-c - 以编程方式获取“下周日下午 5 点”的日期

> ID：12829705
> 
> 赞同：5
> 
> 时间：2012-10-10T22:55:14.670
> 
> 标签：objective-c, ios, nsdate

**2013 年 7 月 8 日编辑：Apple 有一组出色的 WWDC 视频，它们真正帮助我理解了 Objective-C 中的各种日期和时间类，以及如何正确地执行时间计算/操作。**

**“常见日期和时间挑战的解决方案”（[高清视频](http://devstreaming.apple.com/videos/wwdc/2013/227xax5xif2s7s531dsmfs1afo2/227/227-HD.mov?dl=1)、[标清视频](http://devstreaming.apple.com/videos/wwdc/2013/227xax5xif2s7s531dsmfs1afo2/227/227-SD.mov?dl=1)、[幻灯片（PDF）](http://devstreaming.apple.com/videos/wwdc/2013/227xax5xif2s7s531dsmfs1afo2/227/227.pdf?dl=1)）（WWDC 2013）**
**“执行日历计算”（[标清视频](https://developer.apple.com/videos/wwdc/2011/includes/performing-calendar-calculations.html#performing-calendar-calculations)、[幻灯片（PDF）](https://developer.apple.com/devcenter/download.action?path=/wwdc_2011/adc_on_itunes__wwdc11_sessions__pdf/117performing_calendar_calculations.pdf)）（WWDC 2011）**

**注意：链接需要免费的 Apple Developer 会员资格。**

我正在为朋友的播客编写应用程序。她每周日下午 5 点直播她的节目，我想在我的应用程序中编写一些代码来选择性地安排该时间的本地通知，以便提醒用户下次直播的时间。我将如何获得一个代表“太平洋时间下个星期日下午 5 点”的 NSDate 对象。（显然这必须转换为用户使用的任何时区）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-10T23:04:52.547

首先获取当前星期几：

```
NSDate *now = [NSDate date];
NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSCalendarIdentifierGregorian];

NSDateComponents *dateComponents = [calendar components:NSCalendarUnitWeekday | NSCalendarUnitHour fromDate:now];
NSInteger weekday = [dateComponents weekday]; 
```

[Apple 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDateComponents_Class/Reference/Reference.html)将工作日定义为：

> 工作日单位是数字 1 到 n，其中 n 是一周中的天数。例如，在公历中，n 为 7，星期日由 1 表示。

接下来计算要添加多少天才能到达下个星期日 5 点：

```
NSDate *nextSunday = nil;
if (weekday == 1 && [dateComponents hour] < 5) {
    // The next Sunday is today
    nextSunday = now;
} else {
    NSInteger daysTillNextSunday = 8 - weekday;
    int secondsInDay = 86400; // 24 * 60 * 60  
    nextSunday = [now dateByAddingTimeInterval:secondsInDay * daysTillNextSunday];
 } 
```

要在 5:00 获得它，您只需将小时和分钟更改`nextSunday`为 5:00。查看[从 [NSDate date] 获取当前日期，但将时间设置为上午 10:00](https://stackoverflow.com/questions/5611632/get-current-date-from-nsdate-date-but-set-the-time-to-1000-am)

# solr - 在 Solr DataImportHandler 中索引 HTML

> ID：12829708
> 
> 赞同：0
> 
> 时间：2012-10-10T22:55:31.190
> 
> 标签：solr, dataimporthandler

我目前正在使用 JdbcDataSource 从 SqlServer 后端导入文档。一些字段中包含原始 HTML。我想在索引之前剥离 HTML。问题是索引时某些东西正在编码开头的“<”字符。最终，我想使用 HTMLStripTransformer 从 JobDescription 字段中删除所有 HTML，但是，它不会删除任何内容，因为半编码内容看起来不像 html。

## 数据配置.xml

```
<dataConfig>
<dataSource type="JdbcDataSource"
            driver="com.microsoft.sqlserver.jdbc.SQLServerDriver"
            url="jdbc:sqlserver://SERVERNAME;databaseName=DBNAME;integratedSecurity=true;"
            applicationName="RHW_Jobs SOLR Data Import Handler"/>
<document>
    <entity name="job" query="SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;
        SELECT [JobID],[JobDescription] FROM [JobSeeker].[Solr].[Jobs]"
    transformer="HTMLStripTransformer,RegexTransformer,DateFormatTransformer">
        <field column="JobID" name="JobID" />
        <field column="JobDescription" name="JobDescription" stripHTML="true" />
    </entity>
</document> 
```

## 调试窗口的输出

```
<lst>
<arr name="JobID">
<str>373E383A-AD6C-4858-B5FB-C724486B186A</str>
</arr>
<arr name="JobDescription">
<str>&lt;td class="form">  &lt;ul>    &lt;li>      &lt;p>        &lt;span style="FONT-FAMILY: Georgia; FONT-SIZE: 12pt; mso-fareast-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'; mso-ansi-language: EN-US; mso-fareast-language: EN-US; mso-bidi-language: AR-SA">&lt;strong>&lt;u> 
... 
```

在数据库中，JobDescription 列具有以下内容：

```
<td class="form">  <ul>    <li>      <p>        <span style="FONT-FAMILY: Georgia; FONT-SIZE: 12pt; mso-fareast-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'; mso-ansi-language: EN-US; mso-fareast-language: EN-US; mso-bidi-language: AR-SA"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T00:46:22.467

看起来 HtmlStripFormatter 在导入数据时没有处理您的数据，您的索引字段中不应该有任何 html 标记。我检查了[DataImportHandler](http://wiki.apache.org/solr/DataImportHandler)的文档并注意到它的状态如下：

> 注意——转换器的值必须是完全限定的类名。如果类包是“org.apache.solr.handler.dataimport”，包名可以省略。索尔。如果该类属于“solr”包之一，也可以使用。此规则适用于所有可插入类，如 DataSource 、 EntityProcessor 和 Evaluator。

基于此，您需要完全限定您的转换器属性中的条目，因为 HTMLStripFormatter 来自*org.apache.solr.analysis*类。因此，需要进行如下修改：

```
 <entity name="job" query="SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;
    SELECT [JobID],[JobDescription] FROM [JobSeeker].[Solr].[Jobs]"
transformer="org.apache.solr.analysis.HTMLStripTransformer,RegexTransformer,DateFormatTransformer"> 
```

或者，您可以将[HtmlStripCharFilterFactory](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.HTMLStripCharFilterFactory)应用于索引中 JobDescription 字段的 fieldType，并让索引在分析该字段时删除 Html。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T14:58:53.477

好的，看起来我观察到的半编码结果只是“调试”控制台的输出。DIH 调试控制台必须对 HTML 进行部分编码，以使其可见且不呈现。此外，HTMLStripTransformer 似乎像宣传的那样工作。我遇到的问题是它不能很好地容忍糟糕的 HTML，比如 MS Word 吐出的那种。在启用 HtmlStripTransformer 重新索引后，仍然有一些带有 HTML 的记录，但似乎那些只是有错误的 HTML（即，其值未用单引号括起来的属性等）。

# cakephp - 如何使用“干净”的类名在 CakePHP 中扩展插件模型类？

> ID：12829709
> 
> 赞同：2
> 
> 时间：2012-10-10T22:55:34.887
> 
> 标签：cakephp, model, extend

我目前正在学习 CakePHP。我使用 CakePHP 2.2.3。我已经成功“安装”了一个用户管理插件。这个插件有一个模型类“用户”并使用表“用户”。现在，我想扩展这个 User 模型，以便将我自己的模型与它相关联，例如 Posts。

我通过以下代码设法做到了这一点：

```
App::import('Model', 'Usermgmt.User');

class MyUser extends User {
    var $hasMany = array('Post');
    var $useTable = 'users';
} 
```

这行得通。

但是，我不喜欢我必须将我的模型类称为“MyUser”之类的事实。它使一切都变得非常丑陋，也许——理论上——有时我想安装另一个使用类名“MyUser”的插件。是否有可能使用“干净”的类名并防止将来可能的名称冲突..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T07:56:10.630

不，这是不可能的，因为 CakePHP 还不支持命名空间。根据[路线图](http://cakephp.lighthouseapp.com/projects/42648/development-roadmap)，CakePHP 3 计划支持命名空间。

# java - 如何使用多个 c++ 文件构建 ndk

> ID：12829711
> 
> 赞同：3
> 
> 时间：2012-10-10T22:55:38.860
> 
> 标签：java, android, android-ndk, java-native-interface

请有人帮助我。

我正在开发一个简单的应用程序，使用 ndk 在 android 上进行阶乘。

我想要 2 个 .cpp 文件，一个用于类阶乘，一个是从该类调用方法的主要文件。在构建时我不知道如何处理标题问题，请帮助。

```
#include "com_lan_factorial_FacLib.h"

JNIEXPORT jlong JNICALL Java_com_lan_factorial_FacLib_fac
  (JNIEnv *env, jclass clazz, jlong n)

{

    jlong result = (jLong) (fac(n));

    return result;
} 
```

此代码调用 fac 方法。这是 Main.cpp

```
#include <stdio>
#include "com_lan_factorial_FacLib.h"

long fac(long n)
    {
        long f = 1;
        long i;
        for(i = 1; i <= n; i++)
        {
             f *= i;
        }
        return f;
    }
} 
```

此类创建 fac 方法。这是 fac.cpp

```
LOCAL_PATH:= $(call my-dir)
include $(CLEAR_VARS)
LOCAL_CFLAGS := -Wno-psabi
LOCAL_MODULE := libfac
LOCAL_SRC_FILES := fac.cpp
LOCAL_C_INCLUDES := $(LOCAL_PATH)
include $(BUILD_STATIC_LIBRARY)

include $(CLEAR_VARS)

LOCAL_CFLAGS := -Wno-psabi
LOCAL_MODULE := FacLib
LOCAL_SRC_FILES := Main.cpp 
LOCAL_STATIC_LIBRARIES := libfac
include $(BUILD_SHARED_LIBRARY) 
```

编译日志是：

```
C:\Users\Lan\workspace\Factorial>..\..\temp\android\android-ndk-r8b\ndk-build
"Compile++ thumb : FacLib <= Main.cpp
jni/Main.cpp: In function 'jlong Java_com_lan_factorial_FacLib_fac(JNIEnv*, jclass, jlong)':
jni/Main.cpp:7:30: error: 'fac' was not declared in this scope
make: *** [obj/local/armeabi/objs/FacLib/Main.o] Error 1 
```

我不确定为什么没有声明 fac

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T23:52:35.983

你的第二个文件真的被调用了`com_lan_factorial_fac.cpp.callMain`吗？它的问题是没有`.cpp`扩展名。它的扩展名是`callMain`. 重命名为以 结尾的`.cpp`名称，然后编辑您的 Anrdoid.mk 以列出两个文件名：

```
LOCAL_SRC_FILES := com_lan_factorial_callMain.cpp some_other_file_name.cpp 
```

您可以在一行中列出所有文件，也可以像这样拆分它：

```
LOCAL_SRC_FILES := com_lan_factorial_callMain.cpp \
    some_other_file_name.cpp 
```

另一个错误消息是`com_lan_factorial_fac.h`找不到文件。这样的文件存在吗？

编辑：你的 Android.mk 是错误的。您不是在构建两个库 - 您是从两个源文件构建一个。它应该是这样的：

```
LOCAL_PATH:= $(call my-dir) 
include $(CLEAR_VARS) 

LOCAL_CFLAGS := -Wno-psabi 

LOCAL_MODULE := libfac 

LOCAL_SRC_FILES := fac.cpp Main.cpp

include $(BUILD_STATIC_LIBRARY) 
```

`fac()`在您的 Main.cpp 中，您应该在 #include 行和函数之间声明一个名为存在的`Java_com_lan_factorial_FacLib_fac`函数：

```
extern long fac(long n); 
```

您的编译错误消息与缺少此行有关。

LOCAL_C_INCLUDES 行通常不是必需的。

顺便说一句，内置的 C 数据类型`long`和`jlong`Android JNI 定义的不一样。更好地重写你`fac()`的工作与`jlong`'s.

# c# - C# 列出 .findall，查找部分匹配项

> ID：12829718
> 
> 赞同：3
> 
> 时间：2012-10-10T22:56:22.727
> 
> 标签：c#, list

我在 c# 中使用列表，我试图在字符串中查找部分或完整结果

```
 List<GoogleMusicSong> artistname = gplaying.FindAll(delegate(GoogleMusicSong er) { return er.Artist == Txt_Search.Text; }); 
```

所以我想找到 txt_serch.txt 的所有匹配项，例如，如果我搜索部落，我希望它找到“A Tribe Called Quest”的结果

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T22:58:08.683

你的意思是这样的：

```
var artistName = 
    gplaying.FindAll(er => er.Artist.Contains(Txt_Search.Text)); 
```

请记住，这将导致搜索区分大小写。如果您想以不区分大小写的方式进行搜索，则必须使用以下内容：

```
var artistName =
    gplaying.FindAll(er => er.Artist
        .IndexOf(Txt_Search.Text, 
            StringComparison.InvariantCultureIgnoreCase) > 0); 
```

# php - 复杂的服务结构

> ID：12829722
> 
> 赞同：0
> 
> 时间：2012-10-10T22:56:48.497
> 
> 标签：php, restler

我真的很喜欢 Restler，但我想确保我能实现我的要求，我的第一次尝试失败了，但这可能是因为我没有完全理解它。

我想做的是拥有一系列服务，例如：

*   用户
*   应用程序
*   行动
*   关系

然后可以享受休息服务，例如：

*   [http://api.url.com/users/active](http://api.url.com/users/active)
*   [http://api.url.com/users/disabled](http://api.url.com/users/disabled)
*   [http://api.url.com/users/](http://api.url.com/users/) {id}/preferences
*   [http://api.url.com/users/](http://api.url.com/users/) {id}/goals

*   等等

理想情况下，我希望在子类型级别对类定义进行分段。因此，在上面的示例中，我将有一个“首选项”和“目标”类来处理服务架构的“用户”部分下的请求。

我已经尝试过自动和手动路由（使用@url 运算符），但我似乎无法让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T02:58:26.393

Restler 2和Restler 3在我们添加API Class时没有指定路径段时使用类名作为路径段

```
Restler::addAPIClass($classname, $path=null); 
```

映射偏好和目标如下

```
$r->addAPIClass('Preferences', 'user/preferences');
$r->addAPIClass('Goals', 'user/goals'); 
```

如果您想单独处理手动路由的所有内容（类中没有路径段）

```
$r->addAPIClass('Preferences', '');
$r->addAPIClass('Goals', ''); 
```

然后使用@url 注释

# msbuild - TFS 2010 无需构建即可部署 HTML

> ID：12829723
> 
> 赞同：1
> 
> 时间：2012-10-10T22:56:55.050
> 
> 标签：msbuild

每当将 HTML 文件签入到 TFS 时，我都需要将它们复制到本地网络服务器。在过去的 7 个小时里，我一直在网上搜索，并且一直在努力尝试创建 MSBuild 脚本，但没有成功。

我需要一组简单的步骤来复制文件而无需构建（我没有项目文件，实际上不需要编译任何东西。）

服务器的位置在网络上，可通过 Windows 资源管理器访问。

# python - mongokit 索引不起作用

> ID：12829724
> 
> 赞同：4
> 
> 时间：2012-10-10T22:57:09.037
> 
> 标签：python, mongodb, indexing, flask, mongokit

我正在使用 Flask 和 MongoDB 开发一个 Web 应用程序。我使用 (Flask-)MongoKit 来定义一个模式来验证我的数据。

在我的数据库中，有一个名为“users”的集合（见下文），其中包含一个字段“email”。我尝试按照 MongoKit 文档 (http://namlook.github.com/mongokit/indexes.html) 中的规定在该字段上创建唯一索引。但是，当我通过 MongoDB 客户端 shell 检查集合索引时，根本没有索引“电子邮件”。

我在网上发现了一个类似的问题：“唯一索引不起作用”（https://github.com/namlook/mongokit/issues/98）

有人知道为什么它不起作用吗？

用户收藏：

```
@db.register
class User(Model):

    __collection__ = 'users'

    structure = {
        'first_name': basestring,
        'last_name': basestring,
        'email': basestring,
        'password': unicode,
        'registration_date': datetime,
    }

    required_fields = ['first_name', 'last_name', 'email', 'password', 'registration_date']

    default_values = {
        'registration_date': datetime.utcnow,
    }

    # Create a unique index on the "email" field
    indexes = [
        {
            'fields': 'email',  # note: this may be an array
            'unique': True,     # only unique values are allowed 
            'ttl': 0,           # create index immediately
        },
    ] 
```

db.users.getIndexes() 输出：

```
[
{
    "v" : 1,
    "key" : {
        "_id" : 1
    },
    "ns" : "youthmind.users",
    "name" : "_id_"
},
] 
```

请注意，我也尝试不使用 'ttl':0，并且能够使用以下代码创建索引：

```
db.users.create_index('email', unique=True) 
```

我认为这直接使用了 pymongo Connection 对象。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T00:40:02.940

你正在按照你应该做的方式去做。自 0.7.1 版（可能是 0.8 版？）起，自动索引创建已从 MongoKit 中删除。 [这](https://github.com/namlook/mongokit/issues/44)是一个问题。

其背后的原因是它必须调用`ensureIndex`集合。名称的“确保”部分使它看起来像是会检查然后创建索引，如果它不存在，但来自 Mongo 的开发人员说它可能仍会结束（重新）创建整个索引，这可能非常昂贵。开发人员还表示，它应该被视为一项管理任务，而不是开发任务。

解决方法是为`create_index`您定义为升级/创建脚本的一部分的列表中的每个索引调用自己。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T08:13:27.527

是的，您需要使用单独的脚本来重新创建带有索引的数据库。如果需要，它将被调用，而不是每次服务器运行时。例子：

```
def recreatedb(uri, database_name):
    connection = Connection(uri)
    connection.drop_database(database_name)
    #noinspection PyStatementEffect
    connection[database_name]
    connection.register(_DOCUMENTS)
    for document_name, obj in connection._registered_documents.iteritems():
        obj.generate_index(connection[database_name][obj._obj_class.__collection__]) 
```

为了防止使用没有索引的数据库：

```
def init_engine(uri, database_name):
    global db
    connection = Connection(uri)
    if database_name not in connection.database_names():
        recreatedb(uri, database_name)
    connection.register(_DOCUMENTS)
    db = connection[database_name] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-18T17:03:31.227

我使用 Flask-Script，因此很容易将 Marboni 的答案作为命令添加到我的易于运行的管理脚本中。

```
@manager.command
def setup_indexes():
    """
    create index for all the registered_documents
    """
    for doc in application.db.registered_documents:
        collection = application.db[doc.__collection__]
        doc.generate_index(collection) 
```

我将我的数据库作为各种管理内容的应用程序 (application.db) 的成员。现在，每当我添加一些索引或更改任何内容时，我都会运行我的管理器命令。

```
./manage.py setup_indexes 
```

您可以在此处阅读有关管理器模块的更多信息 [http://flask-script.readthedocs.org/en/latest/](http://flask-script.readthedocs.org/en/latest/)

# mysql - Web应用程序的Mysql数据库结构

> ID：12829736
> 
> 赞同：1
> 
> 时间：2012-10-10T22:58:11.013
> 
> 标签：mysql, database, structure

到目前为止，我得到了这个架构：

```
广告公司表
  广告公司 ID
  姓名

放置表
  安置_id
  姓名

广告客户表
  广告客户 ID
  姓名

位置表
  location_id
  姓名

广告表
  ad_id
  尺寸
  价格
  广告公司 ID
  安置_id
  广告客户 ID
  location_id

```

问题 1：此架构是否正常，或者我应该更改什么？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T23:14:38.223

在不知道您的项目/客户要求的情况下很难说。但它看起来很简单，可能会作为一个足够好的基线起点。我会将以下字段添加到所有表中：

```
created DATETIME() [default NOW()]
created_by INT [user ID]
modified DATETIME()
midified_by INT [user ID] 
```

广告表

```
ad_start_time DATETIME()
ad_end_time DATETIME()
ad_type INT [you might need ad types?]
ad_invoice_id INT 
```

您是否在跟踪定价信息？

祝你好运

# php - 如何在 apache2 中使用 scriptAlias

> ID：12829738
> 
> 赞同：1
> 
> 时间：2012-10-10T22:58:18.007
> 
> 标签：php, apache2

我已经安装了 apache2。我有 3 个带有 index.php 的目录，都有相同的 index.php，但只有目录 doc2 有 data.php

*   -doc1----> index.php

*   -doc2----> index.php 和 data.php //在这个目录中我有 index.php，其中内容需要“dates.php”

    *   索引.php

        ```
        <?
        print "Hello";
        require 'data.php'; //when it works show Hello there ?> 
        ```

    *   数据.php

        ```
        ?> print "hello there" ?> 
        ```

*   -doc3----> index.php

我正在寻找将 data.php 从 -doc3 调用到 -doc1 index.php 和 -doc3 index.php 的方法 我听说过一些关于 ScriptAlias 的信息，但我对 apache2 很感兴趣，有人知道如何使用它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T01:23:55.693

您应该能够使用相对于当前运行的 php 文件的路径：

```
<?php

    require '../doc2/data.php'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T13:07:02.943

Alias 指令允许将文档存储在本地文件系统中，而不是在 DocumentRoot 下。以 URL-path 开头的 (%-decoded) 路径的 URL 将映射到以 directory-path 开头的本地文件。URL 路径区分大小写，即使在不区分大小写的文件系统上也是如此。

```
Alias /image /ftp/pub/image
<Directory /ftp/pub/image>
Order allow,deny
Allow from all
</Directory> 
```

# c# - 在基本表单级别执行事件

> ID：12829739
> 
> 赞同：1
> 
> 时间：2012-10-10T22:58:29.223
> 
> 标签：c#, winforms

这似乎很简单，但我无法完成它。我有一个 BaseForm 类，我的应用程序中的每个表单都继承了它。

我只想在每次以继承 BaseForm 的任何形式按下一个键时执行一行代码。在我的 BaseForm 中，我尝试了以下操作，但没有成功：

```
public class BaseForm : Form
{
     protected override void OnKeyPress(KeyPressEventArgs e)
     {
          //Perform action
     }

}

public class MainForm : BaseForm
{
     //All of my main form code goes here.
} 
```

任何帮助将不胜感激！提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T23:38:21.450

可能您需要设置`KeyPreview`基本表单以`true`使其能够从任何控件中捕获所有按键。考虑在表单设计器或基类构造函数中执行此操作。我猜你的派生表单上有一些编辑器（例如一个文本框），所以你需要将基本表单`KeyPreview`设置`true`为能够捕捉这些按键。

您可以覆盖该`OnKeyPress`方法（如您的问题中所示）或为`KeyPress`基本表单中的事件添加事件处理程序。

```
public class BaseForm : Form
{
     public BaseForm()
     {
         this.KeyPreview = true; //it's necessary!! 

         //or just override the OnKeyPress method instead
         this.KeyPress += new KeyPressEventHandler(BaseForm_KeyPress);
     }

     private void BaseForm_KeyPress(object sender, KeyPressEventArgs e)
     {
         //do your action
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T23:07:25.893

到目前为止，您所做的都是正确的。如果您的 OnKeyPress 没有被执行，那么您有问题 - 您是否有干扰的 OnKeyDown？

您接下来要做的是在派生形式中具有相同的覆盖：

```
public class MainForm : BaseForm
{
     //All of my main form code goes here.

     protected override void OnKeyPress(KeyPressEventArgs e)
     {
          //do whatever action this form needs to, if any

          base.OnKeyPress(e);
     }
} 
```

看到对 的调用了`base.OnKeyPress`吗？这将执行您在基础中拥有的那行代码。请注意，您可以将该调用放在函数中的任何位置，将其放在表单特定代码之前的开头可能更合适。

# ios - iOS 从 Google + OAuth 数据中解析用户信息

> ID：12829740
> 
> 赞同：0
> 
> 时间：2012-10-10T22:58:36.323
> 
> 标签：ios, google-oauth

我正在尝试为 iOS 使用 Google 的 OAuth 服务，并将以下范围传递给身份验证机制：

*   [https://www.googleapis.com/auth/plus.me](https://www.googleapis.com/auth/plus.me)
*   [https://www.googleapis.com/auth/userinfo.email](https://www.googleapis.com/auth/userinfo.email)
*   [https://www.googleapis.com/auth/userinfo.profile](https://www.googleapis.com/auth/userinfo.profile)

据我所知，登录工作正常（系统提示我输入 Google 凭据）；我可以从对象中解析出我的电子邮件`GTMOAuth2Authentication`，但我的问题是，我如何从“userinfo.profile”中获取数据，即姓名、性别等。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T21:49:00.477

您可以使用访问令牌通过调用 UserInfo 端点来获取用户的基本配置文件信息。

请参阅[https://developers.google.com/accounts/docs/OAuth2Login#userinfocall](https://developers.google.com/accounts/docs/OAuth2Login#userinfocall)

# jquery - JQuery 工具：选项卡 - 从外部链接难题中定位选项卡式内容

> ID：12829741
> 
> 赞同：1
> 
> 时间：2012-10-10T22:58:37.523
> 
> 标签：jquery, wordpress

我在 wordpress 中为主页选项卡式内容实现[http://cdn.jquerytools.org/1.2.7/all/jquery.tools.min.js 。](http://cdn.jquerytools.org/1.2.7/all/jquery.tools.min.js)但是，我在定位主页本身之外的特定标签时遇到了问题。我将选项卡式菜单加载到标题部分，以便从站点上的任何页面轻松访问，但无论如何，所有三个链接都默认为#first div 内容，即使它在地址栏中显示正确的#target。我没有在头部调用 JQuery，只在选项卡式内容所在的主页上调用。

这是我在 home.php 中的代码

```
 <div>
<div class="panes">
                <div id="first">

                </div>
                <div id="second">

                </div>
                <div id="third">

                </div>
</div>
<script>
                jQuery(function() {
                jQuery("ul.tabs").tabs(".panes > div", {effect: 'fade'});
                </script>
</div> 
```

这是我的functions.php文件中的外部菜单

```
echo '<div id="custom-nav">';
                echo  genesis_do_nav();
                echo '<div id="header-tab-wrap">
                    <ul class="tabs">
                        <li>
                            <a id="t1" href="http://www.site.net/#first">Home</a>
                        </li>
                        <li>
                            <a id="t2" href="http://www.site.net/#second">Aero Systems Engineering</a>
                        </li>
                        <li>
                            <a id="t3" href="http://www.site.net/#third">Aero BridgeWorks</a>
                        </li>
                    </ul>
                </div>';
            echo '</div>'; 
```

# git - 无法对 Heroku 进行初始推送 - 怎么了？

> ID：12829749
> 
> 赞同：2
> 
> 时间：2012-10-10T22:59:29.863
> 
> 标签：git, heroku

调用 heroku create [name] 后，我正在尝试执行 git push heroku master，但出现以下错误：

```
git@heroku.com: No such file or directory
fatal: The remote end hung up unexpectedly 
```

我环顾四周，无法弄清楚是什么原因造成的。我可以通过 SSH -v git@heroku.com 获取“进入交互式会话”。我可以推送到其他遥控器。我已经用 git remote -v 验证了正确的 Heroku 遥控器是否存在。这些是我的遥控器：

```
heroku  git@heroku.com:akicon.git (fetch) 
heroku  git@heroku.com:akicon.git (push) 
```

我应该怎么办？我已经尝试卸载所有内容并重新安装。事实上，这个问题似乎一开始就是这样出现的。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T04:51:50.453

你可能像这样设置你的 git 遥控器：

```
git remote add heroku git@heroku.com 
```

这就是我可以重现此问题的方式。

要解决此问题，请移除遥控器并添加正确的 URL：

```
git remote rm heroku
git remote add heroku git@heroku.com:[your-heroku-application's name].git 
```

# python - 如何在python中找到最后执行的代码行？

> ID：12829750
> 
> 赞同：0
> 
> 时间：2012-10-10T22:59:33.903
> 
> 标签：python

找到在 python 程序中执行的最后一行代码的最佳工具是什么？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T23:12:56.507

查看[跟踪](http://docs.python.org/library/trace.html)模块及其选项。更详细的示例可在[http://www.doughellmann.com/PyMOTW/trace/](http://www.doughellmann.com/PyMOTW/trace/)获得。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T23:11:22.930

试试这个[`dis`](http://docs.python.org/library/dis.html)模块：

```
>>> cc=compile("""
def func():print(func1(2))

def func1(x): return x**2

func()
print ("I am last")
"""
,"filename","exec")

>>> eval (cc)
4
I am last

>>> dis.dis(cc)
  2           0 LOAD_CONST               0 (<code object func at 0x9ccf770, file "gf", line 2>) 
              3 MAKE_FUNCTION            0 
              6 STORE_NAME               0 (func) 

  4           9 LOAD_CONST               1 (<code object func1 at 0x9cf63c8, file "gf", line 4>) 
             12 MAKE_FUNCTION            0 
             15 STORE_NAME               1 (func1) 

  6          18 LOAD_NAME                0 (func) 
             21 CALL_FUNCTION            0 
             24 POP_TOP              

  7          25 LOAD_NAME                2 (print) 
             28 LOAD_CONST               2 ('I am last') 
             31 CALL_FUNCTION            1 
             34 POP_TOP              
             35 LOAD_CONST               3 (None) 
             38 RETURN_VALUE 
```

# c - 强制 fscanf 使用可能的空白

> ID：12829752
> 
> 赞同：2
> 
> 时间：2012-10-10T23:00:11.657
> 
> 标签：c, whitespace, string-formatting, scanf

我有一个具有以下格式的多行 TSV 文件：

```
Type\tBasic Name\tAttribute\tA Long Description\n 
```

如您所见，基本名称和描述都可以包含一些空格。我正在尝试读取每一行并提取元素。现在，我已将其范围缩小到仅提取基本名称。我的 fscanf 如下：

```
fscanf(file_in, "%*[^ ]s\t%128[^ ]s\t%*[^ ]s\t%[^ ]s\n", name_string, desc_string); 
```

这不像我希望的那样起作用，而且我在缩小错误范围时遇到了麻烦。有谁知道我如何正确阅读这些行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T23:47:48.470

我大多同意 Pablo 的观点（这个`scanf`家族并不擅长解析器），但了解如何编写`scanf`模式是值得的。您正在寻找的模式是这样的：

```
fscanf(" %*[^\t] %128[^\t] %*[^\t] %128[^\n]", name_string, desc_string) 
```

笔记：

1.  `%[xyz]`是一个指令。`%[xyz]s`是两个指令，其中第二个与文字匹配`s`

2.  据我所知，没有办法匹配单个文字制表符，因为模式中的任何空格都匹配输入中任何数量的空格（包括无空格）。我在示例中使用了一个空格，它将匹配一个终止选项卡，但它也将匹配任意数量的连续选项卡，因此无法正确解析空字段。

3.  128 个字符的限制不包括终止 NUL 字符。

4.  此外，如果扫描因超出字符限制而停止，它不会自动跳过该字段的其余部分，因此您最终会与输入不同步。

更好的模式是：

```
fscanf(" %*[^\t] %128[^\t]%*[^\t] %*[^\t] %128[^\n]%*[^\n]", name_string, desc_string) 
```

如有必要，它会显式跳过字段中的剩余字符。更好的解决方案是使用`a`修饰符并为您获取`fscanf`内存`malloc`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T23:39:09.547

我宁愿用`strtok`这个。它比`fscanf`这个函数系列只在格式 100% OK 时才有效，否则你最终会丢失值。

看看[Parallel to PHP's "explode" in C: Split char* into char* using delimiter](https://stackoverflow.com/questions/12789883/parallel-to-phps-explode-in-c-split-char-into-char-using-delimiter/12790043#12790043)，我在这里更详细地解释了如何使用`strtok`.

所以，阅读每一行`fgets`并用`strtok`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T23:59:37.517

首先，正如已经指出的那样，the`%[]`本身就是一个转换说明符。后面没有`s`了`[]`。您在格式字符串中的`s`-es 不会被视为转换说明符的一部分。你必须摆脱那些`s`-es。

其次，正如您自己所说，您的文件是 TAB 分隔的。这立即意味着您应该使用`%[^\t]`转换说明符（或`%[^\n]`最后一部分的说明符）来提取序列的连续部分。你为什么使用`%[^ ]`它，你期望它如何工作？实际上在空格字符处停止解析，这`%[^ ]`与您想要的相反。

在您的示例中，说明符的正确组合将是

```
fscanf(file_in, "%*[^\t]\t%128[^\t]\t%*[^\t]\t%[^\n]\n", name_string, desc_string); 
```

此格式字符串假定字符串的所有 4 部分都保证存在，并且最后一部分保证以`\n`.

# c# - 如何反序列化这个 JSON？

> ID：12829757
> 
> 赞同：3
> 
> 时间：2012-10-10T23:00:34.720
> 
> 标签：c#, asp.net-mvc-4, asp.net-web-api, json.net

如何使用 Web API (JSON.Net) 反序列化以下 JSON？：

```
{
    "action": "edit",
    "table": "MainView",
    "id": "row_1377",
    "_group_id": "999",
    "data": {
        "ROTATION": "1", // This name/val can change
        "EQUIPMENT": [{
            "id": "6"
        },
        {
            "id": "8"
        }],
        "NOTES": ""
    }
} 
```

中的值`data`表示列并且可以更改，因此我无法使用例如名为“NOTES”的字符串创建一个固定对象，如[json.net 将字符串反序列化为嵌套类](https://stackoverflow.com/questions/7181983/json-net-deserialize-string-to-nested-class)。

通知`EQUIPMENT`包含多个值。当它以前只是一个 "string:string" like`NOTES`时，这个 JSON 反序列`data`化为 a `Dictionary<string, string>`，但现在我需要它表现得像它自己的字典。我最后一次尝试是反序列化为以下类型：

```
public class EditorSubmissionJoined
{
    public string _group_id { get; set; }
    public string action { get; set; }
    public string table { get; set; }
    public string id { get; set; }
    // "public" added below due to mistake noticed by Maggie Ying
    public Dictionary<string, object> data { get; set; } // Trouble
} 
```

我希望无论是（like ）还是字典（like ）`object`都可以包含任何内容。`data``KeyValuePair``NOTES``EQUIPMENT`

我也试过`Dictionary<string, ICollection<Object>>`, `Object`, 甚至`ICollection<Dictionary<string, Object>>`.

问题是我的控制器*总是*得到只有空值的 EditorSubmissionJoined：

```
public void Put(EditorSubmissionJoined ajaxSubmission) {
    // ajaxSubmission has only NULL values
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T23:44:19.767

尝试将您的“数据”属性设置为公共，您的 JSON 应该能够正确建模绑定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T23:49:05.767

有几种方法可以做到。一种方法是简单地使用 a`JObject`并按名称访问字段，例如：`jsonObject["data"]["ROTATION"]`。您可以使用“反序列化”它`JObject.Parse`并将 JSON 文本“解析”为`JObject`.

或者，您可以自己编写`JsonConverter`并告诉 JSON.net 在反序列化特定类型（例如`JsonConverterAttribute`）时使用该转换器。这需要在 ReadJson 覆盖中手动解析部分 JSON 文本，并且实际上取决于您期望的数据。

您还可以使用 Preston 评论的动态方法。

你选择哪种方法取决于你想要的东西有多强类型。

# javascript - CakePHP 2.x 如何在弹出窗口中打开元素

> ID：12829758
> 
> 赞同：0
> 
> 时间：2012-10-10T23:00:42.327
> 
> 标签：javascript, ajax, cakephp, plugins, popup

我发现这个插件适用于旧版本的 cakephp，它允许您打开一个包含元素的弹出窗口：[https ://github.com/webtechnick/CakePHP-Popup-Plugin](https://github.com/webtechnick/CakePHP-Popup-Plugin)

我无法让它在 Cake 2.x 中工作（也许有可能，但我就是想不通）。还有其他选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T23:33:19.517

在花了很多时间搜索之后，我得出结论，使用 javascript 插件，例如“ **lightbox** ”或“ **clearbox** ”（我使用后者），是最简单和更美观的方法。现在我可以将图片和 HTML 都显示为一种弹出窗口，但仍然是同一页面的一部分。我还没有设法以这种方式打开元素，但我可以打开视图链接，目前我可以接受。

# objective-c - Obj-C 中的最佳类层次结构

> ID：12829759
> 
> 赞同：1
> 
> 时间：2012-10-10T23:00:55.687
> 
> 标签：objective-c, cocos2d-iphone, abstraction

在我的项目（游戏）中，我有多个通过触摸操作的对象，所以我认为将所有可触摸对象作为“可触摸”抽象类的子类是一个好主意，类似于：

Touchable 是 CCSprite 的子类

Box 是 Touchable 的子类

Motor 是 Touchable 的子类

因此Box和Motor都是CCSprite，它们继承了Touchable的常用方法，并且可以覆盖它们

这是解决这个问题的正确方法，还是有其他方法来解决这个层次结构？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T08:05:20.530

我之前解释了为什么[子类化 CCSprite 几乎总是一个坏主意](https://stackoverflow.com/a/8043643/201863)。

顾名思义，“可触摸”是对象的一种能力。一个节点可以被触摸，也可以不被触摸。此外，这绝不能仅限于精灵。如果以后你想要一个可触摸的标签、一个可触摸的粒子效果或其他一些可触摸的节点类怎么办？

显然，您不能将 CCNode 子类化以使其可触摸，然后将该可触摸节点类的子类转回精灵、标签等，因为 cocos2d 已经建立了类层次结构——这就是这种层次结构系统的不灵活性表现出来的地方，并开始成为真正的痛苦。

您可以随时将这种可触摸（或可杀死、飞行、跳跃、可驾驶、可滑动等）能力添加到任何对象，也可以随时将其带走。这使它成为[插件类（组件）](http://www.learn-cocos2d.com/2010/06/prefer-composition-inheritance/)的候选者。任何能力，尤其是那些可能是临时的，都不应该是超类的一部分，而是可以添加到现有对象的附加对象，并根据需要启用/禁用。

解决此问题的一种方法是使用节点的 userObject 属性。编写一个 Abilities 容器类，并将其分配给节点的 userObject。然后将所需的能力类添加到节点的容器中。然后该节点通过转发更新方法更新 userObject 容器类，该更新方法将更新转发给所有能力。或者，Ability 容器本身向 CCScheduler 注册以接收更新。容器类和能力类唯一需要的是对拥有节点的（弱）引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T23:56:12.417

取决于“可触摸”是否表示每个类必须显式实现以支持的一组随机行为，或者是否可以有一个实现“仅适用于”继承（可能需要一些定制）。

如果是前者，那么你的想法基本上是正确的。如果是后者，那么 Jack 建议使用 an `@protocol`（很像 Java 中的接口）是有道理的。

就个人而言，我会保持它非常简单。从一个`SPAbstractSprite`作为子类的类开始`CCSprite`。然后，将其子类化为`SPBox`and `SPMotor`。

`SPBox`在和/或中开始您的实现，并且`SPMotor`当常见的事情发生时，将它们重构为`SPAbstractSprite`.

至于“可触摸”的概念，我暂时不会担心试图让它成为一个命名的东西。以与上述相同的方式接近它；在您的电机或盒子中实现可触摸支持，然后重构为抽象父类。

诚然，我是一个非常设计和代码交错的人，并且完全承认有些人真的很喜欢在编写一行代码之前坐下来画出一组漂亮的框/线/层次结构.

在任何情况下，您都应该注意，Apple 提供的类和示例的类层次结构往往很浅，并且不会做大量的这种抽象，尽管抽象仍然被大量使用（`UIView`是所有的抽象容器例如，所有这些子类都需要的类似 goop 的视图）。

# css - CSS 伪类。动态高度箭头

> ID：12829762
> 
> 赞同：1
> 
> 时间：2012-10-10T23:01:05.167
> 
> 标签：css, pseudo-class

我有菜单项，其样式如下：

![在此处输入图像描述](../Images/c4f72b186731abd5e55fbb2315716d21.png)

最后的箭头我用 :after pesudo-class 实现：

```
.ride-type-menu:after{
        content:"";
        border: 13px solid;
        border-color:  transparent #DBD7D7;
        border-right-color: transparent;
        right: -26px;
        top: 0;
        position: absolute;
        display: block;
    } 
```

我遇到的问题是这些菜单项延伸到多行时：

![在此处输入图像描述](../Images/6bfd1508dc7761425a10dc50bd7e34c9.png)

任何人都可以想到一种方法（即使必要时使用图像），我可以根据菜单项占用的行数自动增加箭头的高度（保持宽度）以实现如下目的：

![在此处输入图像描述](../Images/b5671b7d536d0c1950119eec6c720ce5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T00:48:43.410

好的！哈克解决方案来了！

你可以用 JS 来做到这一点，在你的菜单项中添加一个旋转的方形元素。您需要计算它的大小，使其对角线长度等于菜单项的高度。您还需要设置它的位置（您可以在 CSS 中静态地执行此操作），以便它的顶角位于菜单项的顶部边缘。

这是一个演示：http: [//jsbin.com/oxaxet/2/edit](http://jsbin.com/oxaxet/2/edit)

明显的问题是旋转元素的“宽度”随着父元素的高度而增长。我相信有可能通过转换进一步~~修复~~hack`skew`以解决这个问题，但是这个部分修复是我目前可以处理的所有数学。如果我稍后再戳它，我将编辑我的答案。

我认为用伪元素做你想做的事是不可能的，因为 1）CSS 不是程序化的，所以你不能计算尺寸 2）JS 不能接触伪元素*，所以一旦你计算了尺寸，你就不能申请他们。

我最接近纯CSS（使用伪元素）是使用`top: 0`和`bottom: 0`（或`height: 100%`也可以）`:after`使其高度与其父级相同，但之后无法`border-width`根据父级的高度设置值，所以随着父母的成长，箭头的尖端会被切断。

*iirc 这两个限制都有模糊的解决方法，但它们看起来从来没有足够可靠让我记住。如果您认为可以在这些方向上进一步破解，您可以自己查找“计算大小 CSS”或“javascript 伪元素”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T00:50:34.330

这是一个关于如何做到这一点的想法，使用 SVG 图像作为`li`背景，然后使用 CSS`background-size`属性调整它的大小。这适用于 IE 9、Firefox、Safari 和 Chrome，但在 Opera 中看起来有点时髦（可能有修复？）。

首先，您需要 SVG XML，将以下内容保存在一个新的文本文件中，将其保存为“right-arrow.svg”

**SVG**

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<svg
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   version="1.1"
   width="152.18813"
   height="175.7317"
   id="svg2"
   preserveAspectRatio="none">
  <defs
     id="defs4" />
  <metadata
     id="metadata7">
    <rdf:RDF>
      <cc:Work
         rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type
           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
        <dc:title></dc:title>
      </cc:Work>
    </rdf:RDF>
  </metadata>
  <g
     transform="translate(-37.842052,-201.63918)"
     id="layer1">
    <path
   d="m 37.842053,377.37089 -10e-7,-87.86586 0,-87.86585 76.094068,43.93293     76.09405,43.93293 -76.09406,43.93292 z"
       id="path2987"
       style="fill:#00f0ff;fill-opacity:1;stroke:none" />
  </g>
</svg> 
```

然后使用这个：

**HTML**

```
<ul>
    <li>first</li>
    <li>first<br>second<br>third</li>
    <li>first<br>second</li>
</ul> 
```

**CSS**

```
ul { margin: 0; padding: 0; list-style-type: none; }

li {
    margin-bottom: 5px;
    position:relative;
    width: 200px;
    background: url('right-arrow.svg') right center no-repeat;
    background-size: 15px 100%;
    padding: 15px;
}

li:after {
    content: ' ';
    display: block;
    position: absolute;
    top: 0; left: 0;
    width: 215px; /* (li width + padding) - background-size width */
    height: 100%;
    background-color: #00f0ff;
    z-index: -1;
} 
```

有点草率，但是您可以根据需要对其进行改进，这个想法就在那里。

# javascript - 围绕一系列值的索引

> ID：12829765
> 
> 赞同：-1
> 
> 时间：2012-10-10T23:01:24.917
> 
> 标签：javascript, arrays

考虑排序数组`arr`

1- 简单案例：

```
var arr = [3, 6, 12, 18];
indexesAround(6)
//> [1, 1]
indexesAround(7)
//> [1, 2] 
```

2-更复杂的情况：

```
var arr = [3, 3, 6, 6, 18, 18];
indexesAround(6)
//> [2, 3]
indexesAround(7)
//> [3, 4] 
```

您将如何实现（或伪代码）这样​​的`indexesAround(value)`功能？

--

这是我现在所拥有的，但我认为这可以得到增强：

```
function indexesAround(val) {
  var lower = 0;
  var upper = lower;

  var el;
  for (var i = 0, len = arr.length; i < len; i++) {
    el = arr[i];

    if (el > val) {break;}
    if (arr[lower] < el) {lower = upper = i;}
    if (arr[upper] <= el) {upper = i;}
  }

  return [lower, upper];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T23:25:33.963

考虑到数组已排序：

```
function indexesAround(arr, val) {
  if (!~arr.indexOf(val)) return false; // not found
  var start = arr.indexOf(val);
  var end = (arr.length - 1) - arr.reverse().indexOf(val);
  arr.reverse(); // restore original order
  return [start, end];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T23:17:01.143

该解决方案涵盖了所有可能性，并且完全符合 OP 的规范。[在 jsfiddle 上运行它](http://jsfiddle.net/dBc4F/1/)。

### 代码

```
function indexesAround(target,array) {
    var start;
    var len = array.length;

    for(i = 0; i < len; i++) {
        if (array[i] == target && !start) { start = i; }
        if (array[i] > target) {
            if(i == 0) { return [ 0, 0 ]; }   // Target lower than array range
            if(!start) { return [ i-1, i ]; } // Target inside array range but not found
            return [ start, i-1 ];            // Target found
        }
    }

    if(start) { return [ len-1, len-1 ]; } // Target higher than array range
    return [ start, len-1 ];               // Target found and extends until end of array
} 
```

# java - 如何在java中通过2个参数返回枚举值

> ID：12829766
> 
> 赞同：8
> 
> 时间：2012-10-10T23:01:33.807
> 
> 标签：java, enums

我在java中有这样的枚举类

```
 public enum MockTypes
    {
        // Atlantis mocks
        ATLANTIS_VERIFY("ATLANTIS", "verify"),
        ATLANTIS_CREATE_RECORD("ATLANTIS", "createRecord"),

    ...

        private String m_adaptor;

        private String m_step;

private MockTypes( String adaptor, String step)
    {
        m_adaptor = adaptor;
        m_step = step;
    }

             public String getAdaptor()
        {
            return m_adaptor;
        }

        public String getStep()
        {
            return m_step;
        } 
```

我必须实现通过适配器和步骤参数返回枚举值的方法。

```
public MockTypes getMockTypeByName(String adaptor, String step) 
```

但我不知道怎么做。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-10T23:13:17.697

```
public MockTypes getMockTypeByName(String adaptor, String step)
{
    for(MockTypes m : MockTypes.values())
    {
        if(m.getAdaptor().equals(adaptor) && 
           m.getStep().equals(step)) return m;
    }
    return null;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T00:26:38.577

如果您想要一个不涉及查找值的“常量时间”解决方案，您最好的选择是`Map`在类的静态块中初始化一个常量`MockType`。

如果您准备使用[Guava](http://guava-libraries.googlecode.com)，它实际上会相对愉快：

```
public enum MockType {
  ...

  private static final ImmutableTable<String, String, MockType> LOOKUP_TABLE;

  static {
    ImmutableTable.Builder<String, String, MockType> builder =
      ImmutableTable.builder();
    for (MockType mockType : MockType.values()) {
      builder.put(mockType.getAdaptor(), mockType.getStep(), mockType);
    }
    LOOKUP_TABLE = builder.build();
  }

  public static MockType getMockType(String adaptor, String step) {
    return LOOKUP_TABLE.get(adaptor, step);
  }
} 
```

（披露：我为 Guava 做出了贡献。）

替代方案将相对相似——`Map<String, Map<String, LookupType>>`在静态块中构造 a，并从那里进行查找——尽管它需要更多的工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T23:05:17.600

您可以使用`enum`'`values()`方法获取所有已定义值的列表。然后，您可以遍历此列表并找到您感兴趣的与作为参数发送到该方法的值相匹配的值。

# magento-1.7 - Campaign Monitor/Magento：如何将新订阅者添加到订阅者列表

> ID：12829769
> 
> 赞同：1
> 
> 时间：2012-10-10T23:01:38.570
> 
> 标签：magento-1.7

我正在使用 fontis magento/campaign 监视器扩展；安装一切OK，除了新订阅者被直接添加到取消订阅列表而不是订阅者列表。我正在使用我的 CM API 密钥（客户端密钥似乎不起作用）和客户端列表的 API 列表 ID。关于我哪里出错的任何想法。

# c - 一个简单的 c 程序的 Neen 帮助

> ID：12829778
> 
> 赞同：-5
> 
> 时间：2012-10-10T23:01:58.903
> 
> 标签：c

在一个简单的 c 程序上需要帮助。编写一个 TestValue 程序。程序运行但不返回字母等级。这就是我到目前为止所拥有的。

```
#include <stdio.h>
int main()
{
        double testValue;
        char getGrade;
        printf("Enter your score between o and 100:");
        scanf("%if", &testValue);
        printf("Your grade is %c\n", getGrade);
        return 1;
}
char getGrade(double value)
{
  if(value>=90)
    return'A';
  else if(value>=80)
    return'B';
  else if(value>=70)
    return'C';
  else if(value>=60)
    return'D';
  else if(value>=50)
    return'F';
  return 1;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T23:06:05.947

`%if`应该`%lf`

你还没有调用`getGrade`函数

您有两个具有相同名称的标识符。

删除`char getGrade;`声明并调用该`getGrade`函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T00:04:24.047

函数和变量使用相同的名称是一个坏主意。

你需要：

*   更改`%if`为`%lf`
*   消除`char getGrade;`
*   调用函数时，应该是`getGrade(testValue)`
*   将函数更改`char getGrade(double value)`为：

```
char getGrades(double value)    
{    
  if(value>=90)    
    return 'A';    
  else if(value>=80)    
    return 'B';    
  else if(value>=70)    
    return 'C';    
  else if(value>=60)    
    return 'D';    
  return 'F';    
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T23:05:13.637

getGrade 需要一个参数 getGrade(50) 例如

# c++ - OpenGL多线程，变量处理

> ID：12829782
> 
> 赞同：-1
> 
> 时间：2012-10-10T23:02:47.930
> 
> 标签：c++, multithreading, thread-safety

我编写了一个 OpenGL 程序，它以下列方式运行：

```
Main:
- Initialize SDL
- Create thread which has the OpenGL context:
    - Renderloop
        - Set camera (view) matrix with glUniform.
        - glDrawElements() .... etc.
        - Swapbuffers();
- Main SDL loop handling input events and such.
    - Update camera matrix of type glm::mat4\. 
```

这就是我将相机对象传递给处理 opengl 的类的方式。

```
Camera *cam = new Camera();
gl.setCam(cam); 
```

在哪里

```
void setCam(Camera *camera) {
    this->camera = camera;
} 
```

对于在 opengl 上下文线程中渲染，会发生这种情况：

```
glm::mat4 modelView = camera->view * model;
glUniformMatrix4fv(shader->bindUniform("modelView"), 1, GL_FALSE, glm::value_ptr(modelView)); 
```

然后在处理我的 SDL 和其他东西的主程序中，我重新计算视图矩阵。在我没有使用任何互斥锁的情况下，他的工作正常。它是否正确？

另一方面，我通过“上传队列”将对象添加到我的场景中，在这种情况下，我必须在向其添加项目时互斥锁我的上传队列向量（向量类类型），否则程序会崩溃。

总结：我在另一个线程中重新计算我的矩阵，然后在没有任何互斥锁的 opengl 线程中使用它。为什么这行得通？

**编辑：** 我认为我的问题类似于这里提出的问题：

1）[如果我只需要它在其他线程中的值，我是否应该将变量锁定在一个线程中，如果我不这样做，为什么它会起作用？](https://stackoverflow.com/questions/6935208/should-i-lock-a-variable-in-one-thread-if-i-only-need-its-value-in-other-thread?rq=1)，仅在我的情况下，仅更改一个矩阵就更加简单。

2）[当只有一个线程写入共享变量时，我需要锁吗？](https://stackoverflow.com/questions/859690/do-i-need-a-lock-when-only-a-single-thread-writes-to-a-shared-variable)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T01:47:31.113

> 为什么这行得通？

谁说它是？

多线程代码的经验法则非常简单：如果您的多线程代码不能*证明是线程安全的*，那么默认情况下它是错误的。

互斥锁和其他同步结构允许您证明您的代码有效。如果没有经过验证的功能，您只是在掷骰子。也许你在那台机器上很幸运。也许如果您重新启动计算机，它将停止工作。如果你打喷嚏，它可能会破裂。

仅仅因为某些事情*发生*如你所愿并不意味着它有效。只是你逃脱了它，就像一个小偷没有被警察抓住并不意味着他们再试一次就不会抓住他。

如果需要，您可以选择依赖未经验证的线程代码。或者你可以做正确的事而不必担心。

* * *

> 据我了解，这与我在哪里做的行为相同

不，不会的。

在您的第一种情况下，您正在传递一个指向堆栈对象的指针。当范围结束时，该堆栈对象将被销毁。从那时起，任何将该指针用于任何事情的尝试都将导致不良*后果*。

在第二种情况下，您将一个指针传递给一个新的堆分配对象。当*您*销毁该对象时，该对象将被销毁。必须有人负责删除此对象。大概当您将该指针传递给 时`gl.setCam`，该`gl`对象正在承担在适当的时间销毁它的责任。

这是这里的标准 C++ 东西；它与OpenGL，多线程，任何东西都没有关系。这完全是关于所有权的概念；您将堆栈拥有的内存传递给期望声明所有权的函数。你做了一个你无法兑现的承诺。因此，繁荣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T00:40:14.110

> 为什么这行得通？

我不知道，我的水晶球坏了，你没有给我们你的密码。由于 OpenGL 没有相机并且您使用相机类，我认为您可能有一些副本（可能泄漏内存）。

# objective-c - 如何让 NSTextField 根据命令行参数的输出不断更新其值？

> ID：12829787
> 
> 赞同：2
> 
> 时间：2012-10-10T23:03:08.913
> 
> 标签：objective-c, macos, command-line, nstask

我正在尝试在 Cbjective-C 中创建一个小型 rsync 程序。它目前通过 NSTask 访问终端命令行，并将命令行的输出读取到显示在 NSTextField 中的字符串；但是，当我在一个非常大的文件（大约 8 gb）上使用这个小程序时，它直到 RSYNC 完成后才会显示输出。我希望 NSTextField 在进程运行时不断更新。我有以下代码，正在寻找想法！：

```
 -(IBAction)sync:(id)sender
{
    NSString *sourcePath = self.source.stringValue;
    NSString *destinationPath = self.destination.stringValue;

    NSLog(@"The source is %@. The destination is %@.", sourcePath, destinationPath);

    NSTask *task;
    task = [[NSTask alloc] init];
    [task setLaunchPath:@"/usr/bin/rsync"];

    NSArray *arguments;
    arguments = [NSArray arrayWithObjects: @"-rptWav", @"--progress", sourcePath, destinationPath, nil];
    [task setArguments: arguments];

    NSPipe *pipe;
    pipe = [NSPipe pipe];
    [task setStandardOutput: pipe];

       // [task setStandardInput:[NSPipe pipe]];

    NSFileHandle *file;
    file = [pipe fileHandleForReading];

    [task launch];

    NSData *data;
    data = [file readDataToEndOfFile];

    while ([task isRunning])
    {
        NSString *readString;
        readString = [[NSString alloc] initWithData: data encoding:NSUTF8StringEncoding];

        textView.string = readString;
        NSLog(@"grep returned:\n%@", readString);

    }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T06:58:30.700

好的，问题在于您从管道读取数据的方式。您正在使用：

```
NSData *data = [file readDataToEndOfFile]; 
```

它将一口气读取子进程写入的所有内容，直到管道关闭（当子进程终止时）。

您需要做的是一次读取一个字符并重建输出行。您还想使用非阻塞模式，以便在没有数据要读取时不会中断主 UI 线程（更好的是，这应该在后台线程中完成，以便主 UI 线程保持完全不中断）。

# mysql - 产生截断儒略日的MYSQL公式是什么？

> ID：12829788
> 
> 赞同：0
> 
> 时间：2012-10-10T23:03:17.663
> 
> 标签：mysql

我想要一个简单的公式，它将导致截断的儒略日作为 SELECT 语句的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T23:41:49.673

我想到了：

```
SELECT (TO_DAYS(date_column) - TO_DAYS('1968-05-24')) 
```

在一些帮助下： [http ://www.csgnetwork.com/juliantruncdateconv.html](http://www.csgnetwork.com/juliantruncdateconv.html)

# matlab - Matlab乘法

> ID：12829801
> 
> 赞同：2
> 
> 时间：2012-10-10T23:05:01.440
> 
> 标签：matlab, matrix

如果矩阵 A 在 X 中，而矩阵 B 在 Y 中。

进行乘法运算只是 Z = X*Y。正确假设两个数组的大小相同。

如何使用 for 循环计算它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T01:47:26.260

ja72 的 anwser 是错误的，请参阅我的评论以了解原因。一般来说，在这些简单的线性代数运算中，您的代码不可能击败矢量化版本，即使您使用 C/mex 编写代码也不可能（除非您的矩阵中有一定的稀疏结构，您可以在代码中加以利用） ）。原因是，在底层，Matlab 将矩阵乘法的实际工作传递给用 Fortran 编写的 Lapack 库，然后调用 Blas 库，这些库针对特定的机器架构进行了优化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T13:16:29.067

是的，acai 是正确的，我记得当我开始使用 Matlab 时也曾想过同样的事情。只是为了提供更多关于 acai 所说的细节，LAPACK 是线性代数包，并且是许多其他语言用来解决这些类型问题的东西，Python 使用 SciPy、Java jlapack 等连接到它。BLAS 是基本线性代数处理您所询问的矩阵乘法的基本问题的子程序。Acai 也是对的，您永远无法超越 Matlab 为矩阵乘法提供的性能，这是他们的面包和黄油，他们已经花了几十年的时间来优化这些操作的性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T23:24:28.107

是的，矩阵乘法是`A*B`，逐个元素是`A*.B`。如果 A 是 (NxM) 而 B 是 (MxK) 大小，则代码`C=A*B`为

**更新**

```
for i=1:N
  for j=1:K
    C(i,j) = A(i,:)*B(:,j)
  end
end 
```

# jquery - $.ajax 调用后无法访问 $(document).ready() 代码

> ID：12829812
> 
> 赞同：0
> 
> 时间：2012-10-10T23:05:57.913
> 
> 标签：jquery

我在每个页面的页脚都有一个链接“全屏显示”。在 document.ready() 中，我有一个代码需要在单击此链接时执行。还有另外两个链接通过 $.ajax 调用从该页面上的下一页和上一页获取内容。内容加载正常，但是一旦处理了 ajax 调用，“go fullscreen”链接就会停​​止工作。本质上，它在 document.ready() 中的点击事件不会被调用。如何使位于 document.ready() 中的代码即使在 ajax 调用之后也始终有效。

代码

```
$.ajax({
    url: $j('#prev a').attr('href'),
    success: function(data) {
                data=$j(data).find('.container > .row');
                $j('.container').html(data);
                $j("#go-fullscreen").bind('click');
             }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T23:17:58.003

当你这样做时；

```
$j("#go-fullscreen").bind('click'); 
```

您没有绑定到任何特定的事件处理函数，因此单击时不会发生任何事情。您需要指定单击时要执行的功能。有关详细信息，请参阅[jQuery 文档](http://api.jquery.com/bind/)。

```
$j("#go-fullscreen").bind('click', function() { /* your code here */}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T23:10:45.457

由于您根本没有发布任何代码，因此我正在做出一些假设。听起来您正在动态加载/更改页脚内容。听起来您也正在使用以下方式连接点击：

`$('a').click(function() { //... });`

如果这一切都是真的，你想改变你对事件的连接方式。查看[.on](http://api.jquery.com/on/)。

`$('.container').on('click', '#go-fullscreen', function() { //... });`

# mysql - 为什么我们需要使用外键？

> ID：12829817
> 
> 赞同：11
> 
> 时间：2012-10-10T23:06:29.313
> 
> 标签：mysql, sql, foreign-keys, primary-key

> **可能重复：**
> [我应该使用外键吗？](https://stackoverflow.com/questions/599159/should-i-use-foreign-keys)

好的，假设我们有两个表，`users`并且`comments`. 在评论中，我们有一列`comment_made_by_user_id`，它表示哪个用户键入了该特定评论。为什么我们需要将其指定为外键？如果我们不这样做，它仍然可以工作。我们指定主键，因为据我所知，它使查询更快（我们只需要搜索一行，而当我们没有主键/索引时，我们必须遍历所有行）。这只是一个很好的编码实践吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-10T23:08:38.597

当您使用外键时，您会得到：

1.  **数据的完整性**
2.  更快的查询。

用户：
用户 ID：

*   1
*   2
*   3

**评论：**
用户：

*   1
*   2
*   *4 XXX 无效，因为 4 不在 users 表中。*

请阅读**维基百科以获取有关**[数据完整性](http://en.wikipedia.org/wiki/Data_integrity)的更多详细信息

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-10T23:11:47.413

它在数据库中创建数据完整性。假设您删除了一个用户，那么如果您忘记使用单独的查询手动删除评论，您最终会得到很多链接到无效用户的评论。使用外键，您可以将其设置为在删除用户时自动删除所有评论（或更新更改，例如更改用户 ID）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-11T08:50:31.437

首先，外键是一个**约束**。如果您在数据库中有*一对多*或*多对多的*关系，外键将非常有用。在此处查找更多信息 -[参照完整性](http://en.wikipedia.org/wiki/Referential_integrity)。

他们也有一些好的动作——限制、级联、设置为空、无动作；[在文档](http://dev.mysql.com/doc/refman/5.6/en/innodb-foreign-key-constraints.html)中阅读此信息。

因此，外键和数据库本身可以为您做一些工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T23:09:16.960

通过将其设为外键，您将强制执行表之间的关系。如果您有外键，则不能将 user_id 放在用户表中。

# jquery - jQuery onclick 消除位于

> ID：12829824
> 
> 赞同：1
> 
> 时间：2012-10-10T23:07:30.420
> 
> 标签：jquery, select

我有以下情况：

```
<div class='err'> 
Error 1
<span>
<a title='ignore'>x</a>
</span>
</div>

<div class='err'> 
Error 2
<span>
<a title='ignore'>x</a>
</span>
</div> 
```

“错误”以这种形式显示。我想要的是：当单击 x 时 x 所在的 div 消失。！？

```
$('.err span a ??').click(function() {
    $(this .err ??).hide();
}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T23:10:22.493

你可以使用`closest`方法。

```
$('.err span a').click(function(e) {
    // e.preventDefault();
    $(this).closest('div.err').hide();
}); 
```

[http://jsfiddle.net/eYXff/](http://jsfiddle.net/eYXff/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T23:13:20.330

试试这个

```
$('.err span a').click(function(e) {
    e.preventDefault();
    $(this).closest('div').hide();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T23:20:39.167

试试这个：

```
$(function() {

  $('.err span a').on('click', function() {
    $(this).closest(".err").hide();
  });

});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<div class='err'>
  Error 1
  <span>
<a title='ignore'>x</a>
</span>
</div>

<div class='err'>
  Error 2
  <span>
<a title='ignore'>x</a>
</span>
</div>
```

如果我使用的性能工具是正确的，使用最接近的方法与父母方法会更快。在这里试试：http: [//jsperf.com/parents-vs-closest-12829824](http://jsperf.com/parents-vs-closest-12829824)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T23:22:45.473

尝试：

```
$(this).parent().next("div").hide(); 
```

# javascript - JavaScript 设备检测几乎完成，但在 Google Chrome 的错误控制台中出现 1 个错误

> ID：12829828
> 
> 赞同：0
> 
> 时间：2012-10-10T23:07:49.253
> 
> 标签：javascript, device, detection, user-agent

我正在编写一个设备和功能检测库（不是真正用于任何实际用途，只是试验和玩耍），就设备检测而言，我应该完成，但我只有一个（我认为）问题。我的代码：

```
var $device = {

    mobile: {
        android: navigator.userAgent.match(/Android/i),
        blackberry: navigator.userAgent.match(/BlackBerry/i),
        iphone: navigator.userAgent.match(/iPhone/i),
        ipod: navigator.userAgent.match(/iPod/i),
        opera: navigator.userAgent.match(/Opera Mini/i),
        windows: navigator.userAgent.match(/(Windows Phone OS|Windows CE|Windows Mobile|IEMobile)/i)
    },

    tablet: {
        ipad: navigator.userAgent.match(/iPad/i),
        galaxy_tab: navigator.userAgent.match(/(GT-P1000|GT-P1000R|GT-P1000M|SGH-T849|SHW-M180S)/i),
        windows: navigator.userAgent.match(/Tablet PC/i)
    },

    desktop: {
        other: navigator.userAgent.match(/(Linux|X11)/i),
        mac: navigator.userAgent.match(/(Macintosh|Mac OS X)/i),
        windows: navigator.userAgent.match(/Windows/i)
    }

}

$device = {
    mobile: {
        any: $device.mobile.android || $device.mobile.blackberry || $device.mobile.iphone || $device.mobile.ipod || $device.mobile.opera || $device.mobile.windows
    },

    tablet: {
        any: $device.tablet.ipad || $device.tablet.galaxy_tab || $device.tablet.windows
    },

    desktop: {
        any: $device.desktop.other || $device.desktop.mac || $device.desktop.windows
    }
}

if($device.mobile.any) {
    $device = {
        type: "Mobile Phone"
    }
} else if($device.tablet.any) {
    $device = {
        type: "Tablet"
    }
} else if($device.desktop.any) {
    $device = {
        type: "Desktop"
    }
}

if($device.desktop.windows){alert("Hello")} 
```

现在，就 userAgent 字符串而言，我并不完全相信它们都是正确的，我还没有测试它们，但这不是我的问题。我的问题是，它不会`alert`“你好”，谷歌浏览器开发者工具中的错误消息是：Uncaught TypeError：无法读取未定义的属性“windows”

现在，根据我使用 Google 工具的经验，这告诉我在某处我的语法不正确，而不是我的方法，但我似乎无法理解。有什么帮助吗？（顺便说一句：我知道用户代理嗅探不好，这就是为什么我稍后也会用特征检测来支持它。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T23:13:25.287

你`$device`经常重新分配，吹走它以前的东西。到脚本到达底部时，`$device.desktop.windows`不再存在，因为那时`$device`只是将拥有`type`而没有其他属性。

不要每次都重新分配设备，而是添加：

```
var $device = {
    mobile: {
        ...
    }
};

...

$device.mobile.any = $device.mobile.android || $device.mobile.blackberry || ... ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T23:20:30.533

正如马特所说，但也不是替换`$device`对象：

```
> if($device.mobile.any) {
>     $device = {
>         type: "Mobile Phone"
>     } 
```

您可以简单地添加一个属性和值：

```
if($device.mobile.any) {
    $device.type = "Mobile Phone";
    } 
```

在任何情况下，您可能会发现使用为您解析字符串的[UA 字符串数据库会更好。](https://www.google.com.au/search?q=user%20agent%20string%20database&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla%3aen-GB%3aofficial&client=firefox-a)当然，对于新的和稀有的浏览器来说，它并不完全准确并且容易出错，但它可能会奏效。

# windows - Chrome 弹出窗口限制

> ID：12829829
> 
> 赞同：1
> 
> 时间：2012-10-10T23:07:51.220
> 
> 标签：windows, google-chrome, popup

我们已经为股票图表构建了一个应用程序，该应用程序在浏览器上运行了 aspx。当我们将 4 个股票图表作为单独的弹出窗口打开时，在 Chrome 下运行良好。当我们添加第 5 个弹出窗口时，Chrome 会在更新图表时显示白色闪烁。移除第 5 个弹出图表窗口，白色闪烁消失。这不会在 Firefox 或 IE 下发生，只有 Chrome。如果我们在选项卡而不是弹出窗口中打开图表，则不会出现白色闪烁。

Chrome 中打开的弹出窗口的数量是否有一些限制，我们能否以某种方式绕过限制？

# php - mPDF - 从另一个函数中调用时不生成 PDF

> ID：12829832
> 
> 赞同：1
> 
> 时间：2012-10-10T23:07:57.270
> 
> 标签：php, cakephp, mpdf

我有一个 mail_merge 函数（使用 cakephp），当直接从浏览器调用时，例如 domain.com/contacts/mail_merge 将生成 PDF 并根据需要使用数据库映射字段将其保存到服务器。

但是，当我尝试从另一个函数调用此 mail_merge 函数时。例如 $this->mail_merge($cond, 1); PDF 不会生成。数据库字段仍然会出现在 mail_merge 函数中，所以这不是这个问题。知道为什么会发生这种情况吗？我已经更新了下面的代码，现在包含一个简单的生成的 txt 文件，其中包含我试图放到 PDF 中的代码，这很有效，所以只有一些关于 mPDF 的东西在从函数调用时不会生成 PDF。

谢谢

我的 mail_merge 函数如下：

```
// FUNCTION GENERATE MAIL MERGE - mPDF
// -------------------------------------------------------------->
function mail_merge($conditions=NULL, $mail_merge_id=1)
{
    // REMOVE THE STANDARD LAYOUT
    // ------------------------------------------------------>
    $this->layout = null;

    // GET THE CONTACTS
    // ------------------------------------------------------------->
    $contacts = $this->Contact->Card->find('all', array(
                                                  'limit' => 10, 
                                                  //'fields' => $fields,
                                                'contain' => array('Contact', 'Prospect', 'SaleDetail'),
                                                  'conditions' => $conditions
                                                  ));
    $this->set('contacts', $contacts);

    // GE THE CONTENTS
    // ------------------------------------------------------------>
    $this->loadModel('MailMerge');
    $content = $this->MailMerge->find('first', array(
                                                'conditions' => array('MailMerge.id' => $mail_merge_id),
                                                'fields' => array('MailMerge.description')
                                                ));
    $this->set('content', $content);

    // initializing mPDF
    // --------------------------------------------------------------------------->
    $this->Mpdf->init();

    // RENDER THE VIEW AND SET AS A VARIABLE TO WRITE THE HTML
    // --------------------------------------------------------------------------->
    $response = $this->render('mail_merge');
    $thebody = $response->body();
    $this->Mpdf->WriteHTML($thebody);

    // setting filename of output pdf file
    // --------------------------------------------------------------------------->
    $thefilename = "mail_merge_".date("d.m.Y_His").".pdf";
    $this->Mpdf->setFilename(APP. WEBROOT_DIR . "/files/csv_exports/" . $thefilename); 

    // setting output to I, D, F, S
    // --------------------------------------------------------------------------->
    $this->Mpdf->setOutput('F');

    // TEMP - CREATE TXT FILE ON THE SERVER
    // ------------------------------------------------------------------------>
    $thefilenametxt = "mail_merge_".date("d.m.Y_His").".txt";
    $ourFileHandle = fopen(APP. WEBROOT_DIR . "/files/csv_exports/" . $thefilenametxt, 'w');
    fwrite($ourFileHandle, $thebody); 
    fclose($ourFileHandle); 

    return $thefilename;

} // END MAIL MERGE 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T23:40:45.067

我发现问题在于组件的 setOutput 函数。

当我改变时：

```
$this->Mpdf->setFilename(APP. WEBROOT_DIR . "/files/csv_exports/" . $thefilename); 
$this->Mpdf->setOutput('F'); 
```

至

```
$this->Mpdf->Output(APP. WEBROOT_DIR . "/files/csv_exports/" . $thefilename, 'F'); 
```

它根据需要工作。

# php - Codeigniter 无法启动

> ID：12829837
> 
> 赞同：-1
> 
> 时间：2012-10-10T23:09:06.223
> 
> 标签：php, codeigniter, netbeans

我正在使用 Ubuntu 11.10 运行 acer 决斗核心，我安装了 xampp 和 Codeigniter，将 codeigniter 的代码放在 xammp 的 htdocs 文件夹中，尝试在 netbeans 中运行 codeigniter，我得到的是：

此网页不可用 Chromium 与 localhost 的连接尝试被拒绝。该网站可能已关闭，或者您的网络可能未正确配置。

谁能告诉我我做错了什么...谢谢...

CodeIgniter 2.1.3 Xampp 1.8.1 Acer Aspire 5920 3gb 内存 Intel(R) Core(TM)2 Duo CPU T5450 @ 1.66GHz

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T23:34:12.777

有几件事：
1）Apache 启动了吗？
    转到 XAMPP 控制面板并确保 Apache（如果需要，还有 MySQL）都已启动。
2）“试图在netbeans中运行codeigniter”是什么意思？
    Codeigniter 是一个 PHP 框架，您可以使用它来构建应用程序，因此如果您已经安装了基本应用程序代码，如果您没有添加任何自己的视图、模型或控制器，则浏览器中只会显示一个页面. 在 Netbeans 中“运行”它并没有真正的意义，因此有关您正在尝试做什么的更多细节将会有所帮助。

# c - 取消引用指向不完整类型（节点）的指针

> ID：12829839
> 
> 赞同：1
> 
> 时间：2012-10-10T23:09:26.690
> 
> 标签：c, pointers, dereference

嘿，所以每当我尝试做这样的事情时，我都会收到这个错误：

```
void swap(struct lnode* n1){
    struct lnode*temp = n1->next;
} 
```

我认为我可以让临时指针指向 n1->next，但它给了我指向不完整类型错误的取消引用指针。谁能帮我？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T23:14:51.633

要访问结构的成员，这样的声明是不够的：

```
struct lnode; 
```

这为您提供了一个不完整的类型：编译器现在知道结构的名称，但不知道它包含哪些字段。您可以拥有指向不完整类型的指针，但您不能访问它们的成员、计算它们的大小或做任何其他需要了解结构成员的事情。

需要完整的定义。如：

```
struct lnode
{
    struct lnode *next;
    /* other fields */
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T01:12:16.820

您的问题表明编译器不知道lnode 是什么，即不是struct lnode 的全貌。也许您可以发布更多代码供我们帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T23:13:42.577

您需要完整声明`struct lnode`in 范围。否则，编译器如何知道在哪里可以找到该`next`成员？

# servicestack - 如何使用 ServiceStack 身份验证防止访问特定路径？

> ID：12829842
> 
> 赞同：1
> 
> 时间：2012-10-10T23:09:56.953
> 
> 标签：servicestack

当我们想阻止使用默认 asp.net 身份验证访问特定路径时，我们这样做：

```
<location path="routes.axd">
<system.web>
  <authorization>
    <allow roles="Agent"/>
    <deny users="*"/>
  </authorization>
</system.web> 
```

我们如何使用 ServiceStack？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T23:56:18.720

ServiceStack 中没有保护 /paths 的配置。

## 使用 [Authenticate] 属性

`[Authenticate]`您可以通过在任一操作上添加属性来保护服务：

```
class MyService : Service {
    [Authenticate] 
    public object Get(Protected request) { ... }
} 
```

请求 DTO

```
[Authenticate] 
class Protected { ... } 
```

或者服务实现

```
[Authenticate] 
class MyService : Service {
    public object Get(Protected request) { ... }
} 
```

或者通过从基类继承

```
[Authenticate] 
class MyServiceBase : Service { ... }

class MyService : MyServiceBase {
    public object Get(Protected request) { ... }
} 
```

## 使用全局请求过滤器

否则，如果您想以任何其他方式限制所有请求，则可以使用[全局请求过滤器，例如：](https://github.com/ServiceStack/ServiceStack/wiki/Request-and-response-filters)

```
appHost.RequestFilters.Add((httpReq, httpResp, requestDto) =>
{
    if (IsAProtectedPath(httpReq.PathInfo)) {
       new AuthenticateAttribute()
         .Execute(httpReq, httpResp, requestDto);
    }
}); 
```

# flash - 将调整大小的图像（通过闪存）上传到 servlet

> ID：12829844
> 
> 赞同：0
> 
> 时间：2012-10-10T23:10:23.793
> 
> 标签：flash, servlets, file-upload

当我使用 Flash 调整大小和上传图像时，如何在 Servlet 中读取 JPEG 图像？

我的`doPost()`方法中有它，但我找不到该文件。我无法得到它`request.getParameter(...)`。

当我得到它`request.getInputStream()`并将其写入文件时，我无法打开它。不知何故，JPEG编码已损坏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T02:14:33.160

通过 HTTP 的文件上传请求通常是使用`multipart/form-data`请求编码发送的，而**不是**`application/x-www-form-urlencoded`像您在`getParameter()`尝试时所期望的那样使用编码。为`getInputStream()`您提供了*整个*请求正文，这也不是您想要的。您基本上需要将其解析为可用部分并从中提取上传的文件。

如果您已经在使用 Servlet 3.0（已经发布了将近 3 年），那么只需使用它`getPart()`。

```
Part uploadedFile = request.getPart("fieldName");
InputStream uploadedFileContent = uploadedFile.getInputStream();
// Now just write it to an arbitrary OutputStream the usual way. 
```

或者，如果您仍在使用 Servlet 2.5 或更早版本，请使用[Apache Commons FileUpload](http://commons.apache.org/fileupload)。

### 也可以看看：

*   [HTML 规范第 17.13.4 章 - 表单内容类型](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.1)- 描述了不同的表单编码类型
*   [如何使用 JSP/Servlet 将文件上传到服务器？](https://stackoverflow.com/questions/2422468/how-to-upload-files-to-server-using-jsp-servlet/2424824#2424824)- 包含有关如何`multipart/form-data`在 servlet 中处理请求的更具体示例

# java - 阻止 Java 插件尝试下载压缩包的 pack.gz 版本

> ID：12829845
> 
> 赞同：4
> 
> 时间：2012-10-10T23:10:32.763
> 
> 标签：java, oracle, jvm, webserver, jvm-arguments

Java 1.7 插件坚持尝试为指定的存档文件下载 pack.gz。例如，对于这样的小程序标签：

```
<applet codebase="." code="com.whatever.Something" archive="applet/SomethingWhatever.jar" mayscript="true">
<param name="someKindOfSettingA" value="1234">
</applet> 
```

我们最终让 HTTP 服务器收到以下请求：

```
applet/SomethingWhatever.jar.pack.gz 
```

我意识到我们可以通过提供一个 pack.gz 来解决这个问题，这将是有益的。但现在我只想抑制额外的请求。有没有办法通过小程序标签或其他东西来做到这一点？

我们试过这个：

```
<PARAM NAME="java_arguments" VALUE="-Djnlp.packEnabled=false"/> 
```

基于此处说明的明显变化：http: [//docs.oracle.com/javase/7/docs/technotes/guides/jweb/tools/pack200.html](http://docs.oracle.com/javase/7/docs/technotes/guides/jweb/tools/pack200.html)。但这并没有什么不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:06:04.010

这是一个 JRE 错误：

请参阅[http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=8000291](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=8000291)

问候卡米尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T16:08:07.187

最合乎逻辑的设置是同时尝试真正的和快速的小程序标签：

```
 <APPLET CODE="HelloWorld.class" WIDTH=150 HEIGHT=25>
      <PARAM NAME  = "cache_archive" VALUE = "HelloWorld.jar"/>
      <PARAM NAME="java_arguments" VALUE="-Djnlp.packEnabled=true"/>
   </APPLET> 
```

和

```
 <APPLET CODE="HelloWorld.class" WIDTH=150 HEIGHT=25>
      <PARAM NAME  = "cache_archive" VALUE = "HelloWorld.jar"/>
      <PARAM NAME="java_arguments" VALUE="-Djnlp.packEnabled=false"/>
   </APPLET> 
```

或者你可以尝试删除这条线，看看你得到的结果（不是garuntees，但它偶尔会起作用）

```
 <APPLET CODE="HelloWorld.class" WIDTH=150 HEIGHT=25>
      <PARAM NAME  = "cache_archive" VALUE = "HelloWorld.jar"/>
   </APPLET> 
```

如果这些都不起作用，那么您实际上没有取消通话的选项。调用是在 pack.gz 进入 jar 之前进行的，如果不创建一个执行相同操作但根本不会调用 pack.gz 的新类，就没有办法解决这个问题。

当然，正如你所说：

> 我意识到我们可以通过提供一个 pack.gz 来解决这个问题，这将是有益的。

这就是我要做的，因为它a）更容易并且b）不会伤害任何东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T22:45:04.970

更新到最新版本的 JRE 可解决此问题。我在使用 jre 1.7_0_07 运行我的应用程序时遇到了同样的问题。但是升级到 jre 1.7_0_11 修复了它。

# asp.net - ajax MaskedEditValidator isValidEmpty 禁用所有 web 控件

> ID：12829849
> 
> 赞同：0
> 
> 时间：2012-10-10T23:10:53.840
> 
> 标签：asp.net, ajax, web-controls

或者应该如此，重点是：如果它**只是告诉您**将当前字段留空是无效的，您可以完成其他字段并可能*忘记* 那个..

点被清除。

现在，假设我想取消整个交易，我根本不会填写这张表格！

幸运的是有一个“取消”图像按钮

隐藏 `form`， **但它也被禁用**。

除了假装您要填写表格然后在`invalidEmpty-Error`清除后立即点击取消之外，还有其他解决方法吗？

MaskedEditExtender

```
<cc1:MaskedEditExtender enabled="true" MaskType="Date" ID="insertDate_MaskedEditExtender" runat="server"
    TargetControlID="TBXinsertDate"  InputDirection="LeftToRight"  CultureName="en-GB" 
    UserDateFormat="None" Mask="99/99/9999" MessageValidatorTip="true"  OnFocusCssClass="maskedFocus" ErrorTooltipEnabled="true" ErrorTooltipCssClass="toolTipForInvalid"
</cc1:MaskedEditExtender> 
```

MaskedEditValidator

```
<cc1:MaskedEditValidator Enabled="false" IsValidEmpty="false" ID="insertDate_MskValidator"  ControlExtender="insertDate_MaskedEditExtender" ControlToValidate="TBXinsertDate" runat="server"
    InvalidValueBlurredMessage="invalid date" EmptyValueBlurredText="requierd fileld"  ErrorMessage="Error" 
    MaximumValue="01/01/2015" MinimumValue="01/01/2008" MinimumValueBlurredText="please enter year above 2008" MaximumValueBlurredMessage="max year value is 2015" 
    CssClass="dateInValid">
</cc1:MaskedEditValidator> 
```

验证器的默认状态，`Enabled = false`因为我正在通过 `onClick`后面代码中的按钮事件将其启用。

```
 insertDate_MskValidator.Enabled = true; 
```

阶段1 -

启用验证器 = false

表格被隐藏

阶段 2 -

启用验证器 = true + 表单可见

第 3 阶段 -

取消或提交

如果表格有效，则提交即可。如果您进入其中一个文本框，则无法取消

你有什么办法可以想到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-29T17:05:54.313

```
<asp:TextBox ID="tbEffectiveTo" runat="server" Text='<%# Bind("EffectiveTo", "{0:MM/dd/yyyy}")%>' Width="8em" ToolTip="MM/DD/YYYY"></asp:TextBox>
<ajaxToolkit:MaskedEditExtender ID="meeEffectiveTo" runat="server" TargetControlID="tbEffectiveTo" Mask="99C99C9999" MessageValidatorTip="true" OnFocusCssClass="MaskedEditFocus"  OnInvalidCssClass="MaskedEditError" MaskType="None" ClearMaskOnLostFocus="false" Filtered="/" PromptCharacter=" " />
<ajaxToolkit:MaskedEditValidator ID="mevEffectiveTo" runat="server" ControlExtender="meeEffectiveTo" ControlToValidate="tbEffectiveTo" Display="Dynamic" IsValidEmpty="true" ValidationExpression="^\s{10}|(0[1-9]|1[012])/(0[1-9]|[12][0-9]|3[01])/(20\d\d)$" InvalidValueMessage="Invalid Date"></ajaxToolkit:MaskedEditValidator>
<ajaxToolkit:CalendarExtender ID="ceEffectiveTo" runat="server" Enabled="True" TargetControlID="tbEffectiveTo" CssClass="EffectiveDateCalendar" Format="MM/dd/yyyy"></ajaxToolkit:CalendarExtender> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T01:10:39.957

我找到了一种非凡的方法（所以我认为！）来解决它，因此您现在可以使用 Validation 属性 - `isValidEmpty=false` （当前字段是必填字段）

但是现在您仍然可以在字段为空时取消表单，即使默认情况下它不可用

修复了：留空字段时，导致周围控件被禁用的问题。

我需要做的就是当事件 `onblur`触发验证时

我将一个函数绑定到`target textbox` `onblur()`执行一个`setTimeOut`执行延迟以禁用验证器的函数，如下所示：

```
 function setTDisableValidation() {
        setTimeout('disableValidation()', 3500);
    }

    function disableValidation() {
        var myVal = document.getElementById('insertDate_MskValidator');
        myVal.disabled = true;
        myVal.ValidEmpty = true;

    }

            <asp:TextBox ID="TBXinsertDate" runat="server" ToolTip="insert date" Width="76px" onblur="setTDisableValidation();">
                    </asp:TextBox> 
```

我不是 javascript 专家，甚至在 asp.net 中也不是（还......）所以我认为这段代码可以重构/优化，所以它会更优雅，并且可以接受作为参数给出的任何控制

# php - 文件下载被PHP损坏，上传正常

> ID：12829857
> 
> 赞同：1
> 
> 时间：2012-10-10T23:11:39.020
> 
> 标签：php, file-io, download

当我从站点将文件上传到我的服务器时，它工作正常。但是，当我尝试下载它们时，文件每次都会损坏。如果我打开服务器上的文件管理器，我可以通过它下载文件，它们工作正常。我知道文件上传正常，下载过程似乎有错误。

这些文件保存在我的服务器上，由它们在表中的 ID 命名，后跟它们的扩展名。该名称是从数据库中检索的，并在下载时使用。

```
id  |  userid  |  filename   |   extension  |  size
1       2         test.jpeg       jpeg         123456

//the extension column is just for testing, yes I know it's redundant 
```

test.jpeg 将作为 1.jpeg 保存在我的服务器上。

```
//this is the very first bit of code on the page aside from starting the session
if(isset($_POST['downloadFile'])){
    $file = new fileprocessing;
    $fileID = mysql_real_escape_string($_POST['hiddenFileDownload']);
    $file->serveFile($fileID); 
} 
```

这是找到文件并允许用户下载它的 serveFile 函数

```
function serveFile($fileID){
    $sql = mysql_query("select * from files where id = '$fileID'");
    $file = mysql_fetch_array($sql);
    $ext = $file['extension'];

    header('Content-type: image/x-generic'); //I'm trying jpegs only right now

    header('Content-Disposition: attachment; filename="'.$file['filename'].".".$ext.'" ');

    readfile('/home/.../public_html/user_files/'. $fileID.".".$ext.' ');
} 
```

下载文件时，它具有正确的名称。我不确定这是哪里出错了。我没有正确打开文件吗？

**编辑 - 在我的 serverfile 函数中调整了我的扩展名**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T23:34:06.160

听起来很奇怪，我过去在查看“.jpeg”文件扩展名时遇到了问题（我有一个网站，人们必须上传产品图片）。但是，可以将扩展名重命名为“.jpg”并在没有任何中断的情况下查看相同的文件。您可以尝试在上传时将“.jpeg”扩展名重命名为“.jpg”，然后查看下载/查看的结果是否没有改变。

# c# - 从字符串中删除除特殊字符开头和数字结尾之外的空格到c#中

> ID：12829870
> 
> 赞同：2
> 
> 时间：2012-10-10T23:13:14.947
> 
> 标签：c#, regex

我想将以下使用正则表达式的测试替换为 c#

```
Input: P C $10000 F + T X (A)
Output: PC $10000 F+TX(A) 
```

表示除去美元金额以外的空间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T23:24:44.207

将以下正则表达式的所有匹配项替换为空字符串：

```
(?<!-?\$\d+(\.\d{2})?) +(?!-?\$) 
```

这将匹配一个或多个没有后跟 a`$`或前面没有美元金额的空格。

为此，您的正则表达式引擎需要支持可变长度的lookbehinds。这在 C# 中应该不是问题，但此正则表达式可能不适用于在线测试工具或其他语言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T23:32:34.027

```
using System;
using System.Text.RegularExpressions;

public static class Program
{
    public static void Main(string[] args)
    {
        string before = @"P C $10000 F + T X (A) ";
        string after = Regex.Replace(before, @"(?<a> -?\$?\s*-?\s*[\d.]+ )|(?<b>\s*.*?(\s?))", 
                    m => m.Groups["a"].Success? m.Value : m.Value.Trim());

        Console.WriteLine("before: '{0}', after: '{1}'", before, after);
    }
} 
```

我也冒昧地接受了其他金额，例如

```
$ 10000
$ -2.30 
```

# sql - 使用带有 IN 的 ILIKE 进行查询

> ID：12829875
> 
> 赞同：6
> 
> 时间：2012-10-10T23:13:26.643
> 
> 标签：sql, postgresql, join

是否可以使用带有 IN 函数的 ILIKE 运行查询？例如：

```
SELECT store_names
FROM stores
WHERE states ILIKE IN (SELECT location
                       FROM   locations
                       WHERE  stateID = 1) 
```

我想通过 ILIKE 函数运行嵌套查询返回的结果。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T23:24:48.637

您正在考虑比需要的多一个角落。可以更简单：

```
SELECT s.store_names, l.location
FROM   stores s
JOIN   (
   SELECT location
   FROM   locations
   WHERE  stateid = 1
   ) l ON s.states ILIKE l.location 
```

我只使用子选择来提高性能。不确定查询计划器是否足够聪明，可以通过这个更简单的查询（以及您的 Postgres 版本）使用相同的计划：

```
SELECT s.store_names, l.location
FROM   stores s
JOIN   locations l ON s.states ILIKE l.location
WHERE  l.stateid = 1 
```

也许您可以尝试（使用[`EXPLAIN ANALYZE`](http://www.postgresql.org/docs/current/interactive/sql-explain.html)）并报告他们是否使用相同的计划（并执行相同的计划）？

而且我怀疑您实际上需要`%`为您的目的添加：

```
... ON s.states ILIKE ('%' || l.location || '%') 
```

# database - 创建 Informix 函数时出错

> ID：12829877
> 
> 赞同：2
> 
> 时间：2012-10-10T23:13:30.970
> 
> 标签：database, stored-procedures, informix

我正在尝试创建以下函数，但它没有成功编译。我不确定问题出在哪里。这是我第一次尝试这个。有人可以指出错误吗？

```
CREATE FUNCTION resources:get_developers (proj_id varchar(10))

    RETURNING varchar(50);
    DEFINE developers varchar(200);
    DEFINE uid varchar(15);
    DEFINE dev_name varchar(50);
    FOREACH cursor1 FOR
        select dev_user_id into uid from proj_dev_map where project_id = proj_id;
        select user_name into dev_name from user where user_attuid = uid;
        LET developers = developers || dev_name || ', ';
    END FOREACH
    RETURN developers;
END FUNCTION 
```

我只是尝试获取与给定 proj_id 关联的名称作为逗号分隔值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T00:36:37.780

尽管您可以编写单例 SELECT 语句，但无论如何您都应该将这两个语句组合成一个查询，因为您只对名称感兴趣，而不对`uid`值感兴趣。

```
CREATE FUNCTION get_developers (proj_id varchar(10))
    RETURNING varchar(50);

    DEFINE developers varchar(200);
    DEFINE dev_name varchar(50);

    FOREACH SELECT u.user_name
              INTO dev_name
              FROM proj_dev_map AS p JOIN user AS u ON u.uid = p.user_attuid
             WHERE p.project_id = proj_id
        LET developers = developers || dev_name || ', ';
    END FOREACH

    RETURN developers;

END FUNCTION 
```

SPL 语法对分号也很奇怪/挑剔。SELECT 语句后（LET 前）不能有分号。您可能在 END FOREACH 之后有一个。上面的代码在我的数据库上编译。我省略了数据库名称，因为您不能在除当前数据库之外的任何东西中创建函数（我尝试过 Informix 反对这种表示法——而不是我没有名为 的数据库这一事实`resources`）。`DELETE FROM proj_dev_map WHERE CURRENT OF cursor1`除非您要执行or ，否则您不需要 FOREACH 中的游标名称`UPDATE proj_dev_map SET ... WHERE CURRENT OF cursor1`，尽管它并没有真正的危害。

`resources`对代码进行编译（在数据库中）的最小更改是：

```
CREATE FUNCTION resources:get_developers (proj_id varchar(10))
    RETURNING varchar(50);

    DEFINE developers varchar(200);
    DEFINE uid varchar(15);
    DEFINE dev_name varchar(50);
    FOREACH cursor1 FOR
        select dev_user_id into uid from proj_dev_map where project_id = proj_id -- ;
        select user_name into dev_name from user where user_attuid = uid;
        LET developers = developers || dev_name || ', ';
    END FOREACH
    RETURN developers;
END FUNCTION 
```

不同之处在于第一个 SELECT 后注释掉的分号。

# ruby-on-rails - Rails 项目：删除确认未显示

> ID：12829887
> 
> 赞同：0
> 
> 时间：2012-10-10T23:14:39.747
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

在我的 Rails 3.2 项目中`app/views/sites/index.html.erb`，我显示了所有站点，并带有删除链接。

```
<% @sites.each do |site| %>
  <tr>
    <td><%= site.url %></td>
    <td><%= site.html %></td>
    <td><%= link_to 'Destroy', site, method: :delete, data: { confirm: 'Hey, are you sure?' } %></td>
 </tr>
<% end %> 
```

在`app/controllers/sites_controller.rb`，我有`destroy`方法：

```
def destroy
  @site = Site.find(params[:id])
  @site.destroy

  respond_to do |format|
    format.html { redirect_to sites_url }
  end
end 
```

删除有效，但它没有显示确认框'嘿，你确定吗？'......我不明白为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T23:20:21.280

删除哈希数据：link_to ("Destroy", site, :method=> :delete, :confirm=> "嘿，你确定吗？")。请参阅文档[http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to)

# python - 在嵌套字典中查找 Max

> ID：12829889
> 
> 赞同：11
> 
> 时间：2012-10-10T23:14:49.673
> 
> 标签：python, dictionary

```
d = {
    "local": {
        "count": 1,
        "health-beauty": {
            "count": 1,
            "tanning": {"count": 1}
        }
    },
    "nationwide": {"count": 9.0},
    "travel": {"count": 0}
} 
```

在这种情况下`"nationwide"`是最大的。

下面的代码可以更容易地附加到脚本：

```
d = {'travel': {'count': 0}, 'local': {'count': 1, 'health-beauty': {'count': 1, 'tanning': {'count': 1}}}, 'nationwide': {'count': 9.0}} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-10T23:17:10.760

```
>>> max(d, key=lambda x: d[x]['count'])
'nationwide' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T23:17:56.890

这应该适用于嵌套字典：

```
def find_max(d, name=None):
    return max((v, name) if k == "count" else find_max(v, k) for k, v in d.items())

>>> find_max(d)
(9.0, 'nationwide') 
```

# algorithm - 你将如何验证两个彩色平面图是同构的？

> ID：12829892
> 
> 赞同：0
> 
> 时间：2012-10-10T23:15:01.657
> 
> 标签：algorithm, computer-science, graph-theory

推断两个彩色平面图是否同构的算法是什么？我知道同构对于一般的图来说是一个难题，但是，根据维基百科，如果图是平面的，则可以解决。

该算法的应用将是推断用一些基于图形的数据结构表示的两个平面分子是否相同（同构）。由于节点代表原子，因此图表的颜色只是原子的类型（氢、碳、氮等）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T17:59:21.390

我声称如果两个节点具有相同的度数，则一个图中的节点只能通过图同构映射到另一个图中的节点。

您可以通过将节点置于中心，放置节点以构成其周围的度数，并在中心节点和所有其他节点之间创建链接来创建具有任何所需度数的节点的小型平面图。通过将其缩小到您喜欢的程度，您可以安排将其作为子图添加到给定平面图的任何节点，而不会使其成为非平面图。

给定一个带有彩色节点的平面图，找到其中任何节点的最大度数，并在其上方创建小度数子图作为颜色标记：为每种颜色赋予其自己的度数并将该度数的单独小子图链接到每个节点那个颜色的。

现在解决这个增强图上的平面图同构问题，您就有了原始图的解决方案。类似地，原始图的任何解决方案都可以轻松地转换为增强图的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T18:19:00.097

**尝试 NetworkX 库**

您还没有提到您对哪种编程语言感兴趣，但是 Python 的[NetworkX 库](http://networkx.lanl.gov/index.html)有多种查找同构的方法。您可能想查看他们[对 VF2 算法的实现，](http://networkx.lanl.gov/reference/algorithms.isomorphism.vf2.html)其中包括子类化和定义“语义”评估的能力，该评估将解决您的问题中的原子元素匹配问题。语义评估已经在算法中，但具有始终返回 true 的占位符函数，因此如果您将占位符函数替换为评估原子元素的占位符函数，则算法类可能会为您工作，否则未经修改。

或者，您可以运行算法以匹配形状，然后查看`GM.mapping`参数（请参阅实现链接）并比较每个同构中等效节点处的元素以实现元素等效。

如果您正在寻找通用算法而不是编程库，请尝试本文（[此处为 PDF](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.101.5342&rep=rep1&type=pdf)，无付费专区）：

***LP Cordella, P. Foggia, C. Sansone, M. Vento，“一种用于匹配大图的改进算法”，第三届 IAPR-TC15 模式识别中基于图的表示研讨会，Cuen，第 149-159 页，2001***

2015 年 11 月更新：显然一位教授已经想出了如何在子 NP 时间内做到这一点！他还没有发表，但[这里有一个入门链接](http://www.scottaaronson.com/blog/?p=2521)，供那些进入纯数学的人使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T04:28:36.480

[这篇论文](http://cs.brown.edu/sites/jgaa/accepted/2004/KuklukHolderCook2004.8.3.pdf)（我在 citeseer 上找到的）似乎很有用，因为它包括算法的（大纲）和与其他算法的一些可能有用的基准比较，它还提供了参考书目。但是，我怀疑您正在查看的问题的规模不会出现在 Kukluk 等人的配置文件中。图形映射器胜过其他算法。

通用平面图同构算法甚至不尝试利用节点“颜色”（我会说标签，因为我通常认为颜色应用于边缘，但这并不是很重要），你很可能能够使用附加信息做得更好。但可以肯定的是，如果没有未着色/未标记的同构，那么就不可能有着色/标记的同构。不幸的是，能够构建单个同构不足以决定是否存在带有颜色/标签的同构；你需要尝试所有可能的同构。我认为分解留下的信息足以简化此搜索，但我不确定；这似乎是一个有趣的问题。

我了解您有一个特定的编程问题，并且确实（并且应该）偏向您对解决方案的搜索。所以请随意忽略以下一点：着色/标记同构在理论上不可能比一般同构更容易，因为所有节点都具有相同的颜色/标签是有效的。（我认为这与您的环境完全无关，因为您的目标分子都不会由单一元素组成，对吧？）

# excel - 在 Excel VBA 中合并私有子函数

> ID：12829893
> 
> 赞同：0
> 
> 时间：2012-10-10T23:15:05.477
> 
> 标签：excel, vba

我写了三个不同的**Private Sub**函数，所有这些函数都做同样的事情**Private Sub txt_noRooms_KeyPress**和**Private Sub txt_length_KeyPress**确保用户只能在引用的文本字段中输入值 1 到 9 而**Private Sub txt_studentNo_KeyPress**允许用户输入值 0 到 9 到引用的文本字段中。

有什么办法可以合并这三个函数并让它们仍然支持引用的单元格并保持相同的条件？我想这样做是为了使代码更有效率。

```
Private Sub txt_noRooms_KeyPress(ByVal KeyAscii As MSForms.ReturnInteger)
' Restrict entry to txt_noRooms
Select Case KeyAscii
    Case Asc("1") To Asc("9")
    Case Asc("-")
        If InStr(1, Me.txt_noRooms.Text, "-") > 0 Or Me.txt_noRooms.SelStart > 0 Then
            KeyAscii = 0
        End If
    Case Asc(".")
        If InStr(1, Me.txt_noRooms.Text, ".") > 0 Then
            KeyAscii = 0
        End If
    Case Else
        KeyAscii = 0
End Select
End Sub

Private Sub txt_length_KeyPress(ByVal KeyAscii As MSForms.ReturnInteger)   
' Restrict entry to txt_length
Select Case KeyAscii
    Case Asc("1") To Asc("9")
    Case Asc("-")
        If InStr(1, Me.txt_length.Text, "-") > 0 Or Me.txt_length.SelStart > 0 Then
            KeyAscii = 0
        End If
    Case Asc(".")
        If InStr(1, Me.txt_length.Text, ".") > 0 Then
            KeyAscii = 0
        End If
    Case Else
        KeyAscii = 0
End Select
End Sub

Private Sub txt_studentNo_KeyPress(ByVal KeyAscii As MSForms.ReturnInteger)
' Restrict entry to txt_studentNo
Select Case KeyAscii
    Case Asc("0") To Asc("9")
    Case Asc("-")
        If InStr(1, Me.txt_studentNo.Text, "-") > 0 Or Me.txt_studentNo.SelStart > 0 Then
            KeyAscii = 0
        End If
    Case Asc(".")
        If InStr(1, Me.txt_studentNo.Text, ".") > 0 Then
            KeyAscii = 0
        End If
    Case Else
        KeyAscii = 0
End Select
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T23:21:23.350

您可以设置一个私有函数并从每个按键调用它：

```
 Private Sub txt_noRooms_KeyPress(ByVal KeyAscii As MSForms.ReturnInteger)
' Restrict entry to txt_noRooms
If bclearfield(CLng(KeyAscii), Me.txt_noRooms.Text, Me.txt_noRooms.selStart,"1")  Then KeyAscii = 0
End Sub

Private Sub txt_length_KeyPress(ByVal KeyAscii As MSForms.ReturnInteger)
' Restrict entry to txt_length
If bclearfield(CLng(KeyAscii), Me.txt_length.Text, Me.txt_length.selStart,"1") Then KeyAscii = 0
End Sub

Private Sub txt_studentNo_KeyPress(ByVal KeyAscii As MSForms.ReturnInteger)
' Restrict entry to txt_studentNo
If bclearfield(CLng(KeyAscii), Me.txt_studentNo.Text, Me.txt_studentNo.selStart,"0") Then KeyAscii = 0
End Sub

Private Function bClearField(KeyAscii As Long, sText As String, lSelStart As Long,sLowLimit as string) As boolean

bClearField=false
Select Case KeyAscii
    Case Asc(sLowLimit ) To Asc("9")
    Case Asc("-")
        If InStr(1, sText, "-") > 0 Or lSelStart > 0 Then
            bClearField=true
        End If
    Case Asc(".")
        If InStr(1, sText, ".") > 0 Then
            bClearField=true
        End If
    Case Else
        bClearField=true
End Select

End Function 
```

# events - Grails: rabbitmq plugin vs rabbitmq-tasks plugin vs Plugin Platform Core Events Bus API

> ID：12829894
> 
> 赞同：2
> 
> 时间：2012-10-10T23:15:05.650
> 
> 标签：events, grails, rabbitmq, message-queue, grails-plugin-rabbitmq

我之前问过一个关于延迟处理事件的问题：[Grails non time based queueing](https://stackoverflow.com/questions/9525214/grails-non-time-based-queuing)。我开始使用 rabbitmq-plugin：[http](http://grails.org/plugin/rabbitmq) ://grails.org/plugin/rabbitmq ，一切都很好。

现在我看到我有一些新的选择，我总是试图搞砸一件好事。有一个新插件，rabbitmq-tasks 插件，我不认为我完全理解它带来的新功能：http: [//grails.org/plugin/rabbitmq-tasks](http://grails.org/plugin/rabbitmq-tasks)。此外，新的 grails 平台核心插件似乎有一个完全不同的方法，围绕`grails.events` [http://grailsrocks.github.com/grails-platform-core/guide/events.html](http://grailsrocks.github.com/grails-platform-core/guide/events.html)。

这三种处理任务的工具之间有哪些重要区别？在选择其中一个而不是另一个时，哪些考虑可能是重要的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-20T10:56:35.897

我也在尝试平台核心的事件总线。这实际上是一个很好的问题，我想你已经找到了答案。

如我错了请纠正我！

如果我正确理解了平台核心的事件总线，区别在于事件总线仅在本地工作，并将事件委托给同一主机上的侦听器。RabbitMQ 是一个消息传递框架。因此，您有一个服务器正在排队消息并将它们委托给侦听器，即使它位于另一台主机上。对于分布式系统，使用 RabbitMQ 会更舒服，因为使用事件总线将无法正常工作。您将使用事件总线来解耦您的模块/组件。

# objective-c - NSPredicate 在多对多关系中

> ID：12829897
> 
> 赞同：0
> 
> 时间：2012-10-10T23:15:54.167
> 
> 标签：objective-c, ios, core-data, nspredicate

我有以下实体关系 A <<-->> B，好吗？现在，在应用程序的生命周期中，我有两个 A 类型的对象，我想知道包含这些对象的 B 的所有对象......

我尝试在 B 实体上使用 ...ANY aRelationWithA.att == objectA1.att...，但是，另一个对象呢...？我找到了一个 SUBQUERIES 解决方案，但结果相同，因为使用 ...SUBQUERY(aRelationWithA, $object, $object.att == objectA1.att)...，但同样，另一个对象呢...？

我需要包含这些关系 A <<-->> B 中的那些 A 对象的 B 对象，问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T19:28:59.540

这很简单：

```
NSFetchRequest *r = [NSFetchRequest fetchRequestWithEntityName:@"B"];
[r setPredicate:[NSPredicate predicateWithFormat:@"ANY relationshipToA = %@ OR ANY relationshipToA = %@", objectA1, objectA2]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T18:13:18.920

暂时我使用了两个 NSPredicates 来验证那个条件......

```
NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"B"];
propertyRequest.predicate = [NSPredicate predicateWithFormat:@"ANY aRelationWithA.att == %@", objectA1.att];
NSError *error;
NSArray *collection1 = [context executeFetchRequest:request error:&error];
NSArray *collection2 = [collection1 filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"ANY aRelationWithA.att == %@", objectA2.att]];
if (collection2.count) NSLog(@"There are some objects with that condition"); 
```

感谢您的回复或一些参考，以了解有关此主题的更多信息！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-11T18:29:26.337

尝试使用这个谓词

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"ANY aRelationWithA in %@", [NSArray arrayWithObjects:objB1, objB2, nil]; 
```

# object - Ember.js 单击更改对象属性的操作

> ID：12829900
> 
> 赞同：0
> 
> 时间：2012-10-10T23:16:07.693
> 
> 标签：object, properties, click, ember.js

基本上，我有一个模板，它`Objects`显示`ArrayController`. 每个列出的项目都有一个按钮，该按钮应该更新该特定的属性`Object`。我觉得我让这变得比现在更困难，但我似乎无法弄清楚。

这是带有模板的 HTML：

```
 <script type="text/x-handlebars">
      {{view App.MainView}}
  </script>

  <script type="text/x-handlebars" data-template-name="item_template">
      {{#view App.addButtonView}}
          <div id="add_button"><span>Add Item</span></div>
      {{/view}}

      <div id="item_list">
          {{#each App.itemsController}}
              <div class="item_title">{{title}}</div>
                  {{#view App.updateTitleBtnView}}
                       <div class="title_btn">UPDATE THE TITLE</div>
                  {{/view}}
              </div>
          {{/each}}
      </div>
  </script> 
```

然后我的脚本是这样的：

```
var App = Em.Application.create({
    ready:function(){
        this.itemsController.createItem();
    }
});

App.Item=Em.Object.extend({
    title:"An Item"
});

App.itemsController = Ember.ArrayController.create({
    content: [],
    createItem: function(){
        var item = App.Item.create();
        this.pushObject(item);
    }
});

App.addButtonView = Ember.View.extend({
    click: function(){
          App.itemsController.createItem();
    }
});

App.updateTitleBtnView = Ember.View.extend({
    click: function(){

        ////////////////////////////////////////////////////////////////
        // Change the value of the title property for a single Object //
        ////////////////////////////////////////////////////////////////

    }
});

App.MainView = Ember.View.extend({
    templateName: 'item_template'
}); 
```

我需要在视图中包含哪些代码：`App.updateTitleBtnView`？我是否以正确的方式处理这些事情？

我是 Ember 的新手，如果这是一个愚蠢的问题，请原谅我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T02:11:03.027

您需要使用车把[{{action}}](http://emberjs.com/api/classes/Ember.Handlebars.helpers.html#method_action)处理程序。

```
<script type="text/x-handlebars">
  {{view App.MainView}}
</script>

<script type="text/x-handlebars" data-template-name="item_template">
  <button id="add_button" {{action addItem}}>Add Item</button>

  <div id="item_list">
      {{#each item in App.itemsController}}
          <div class="item_title">{{item.title}}</div>
          <a href="#" {{action updateTitle item}}>UPDATE THE TITLE</a>
      {{/each}}
  </div>
</script> 
```

现在将所有视图逻辑放在您的 App.MainView 上。

```
App.MainView = Ember.View.extend({
  templateName: 'item_template',
  addItem: function(event){
    App.itemsController.createItem();
  },
  updateTitle: function(event){
    event.context.updateTitle()
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T06:37:53.910

你也可以用`CollectionView`这个..

```
 var App = Em.Application.create();

    App.itemsController = Ember.ArrayController.create({
        content: [],
        createItem: function(){
            this.pushObject(
                Ember.Object.create({title:"old Title"})
            );
        }
    });

    App.MainView = Ember.CollectionView.extend({
      contentBinding: 'App.itemsController.content'
      itemViewClass: Ember.View.extend({
        update: ->
            this.get('content').set('title', "Updated Title")
      })
    })

    <script type="text/x-handlebars">
      <a {{action createItem target="App.itemsController"}} href="#">Add Item</a>
      {{#collection App.MainView}}
        Title: {{view.content.title}}
        <a {{action update}} href="#"> Update Title </a>
      {{/collection}}
    </script> 
```

# visual-studio-2010 - 即使代码正确，我的程序也不会调试

> ID：12829903
> 
> 赞同：1
> 
> 时间：2012-10-10T23:16:52.653
> 
> 标签：visual-studio-2010

我的程序不会在 Visual Studio 中调试，当我尝试调试此消息时，包含红色下划线出现在输出框中。

```
1>------ Build started: Project: abc, Configuration: Debug Win32 ------
1>Build started 10/10/2012 6:09:49 PM.
1>InitializeBuildStatus:
1>  Touching "Debug\abc.unsuccessfulbuild".
1>cl : Command line error D8016: '/ZI' and '/Ox' command-line options are incompatible 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T23:29:08.410

看起来你已经告诉 Visual Studio 优化你的调试版本。

那是行不通的；优化和调试彼此相当不兼容，因此通常不允许一起使用。优化倾向于以难以将代码地址与源代码行匹配的方式重新排列事物，这使得调试信息要么无法生成，要么即使可以生成也毫无用处。

您需要切换到发布版本，或者关闭优化。

# asp.net-mvc-2 - 控制器中未调用 ActionResult

> ID：12829904
> 
> 赞同：1
> 
> 时间：2012-10-10T23:16:57.193
> 
> 标签：asp.net-mvc-2

控制器中的 ActionResult 未被调用。设置断点表明 ActionResult fileUpload 没有被命中。

查看和控制器代码如下：（FileUpload.aspx/FileUploadController.cs）：

```
<% using (Html.BeginForm("fileUpload", "FileUpload", 
                FormMethod.Post, new { enctype = "multipart/form-data"  }))
           {%>
        <input type="file" name="file" id="file" />  
        <input type="submit" name="Submit" value="Upload File" />
        <span style="color: red; font-weight: bold">
            <%=TempData["UploadValidationMessage_Failure"]%>
        </span><span style="color: Green; font-weight: bold"> 
            <%=TempData["UploadValidationMessage_Success"]%>
        </span> 
        <%} %>

/// <summary>
    /// n/a
    /// </summary>
    /// <returns>set FileUpload view return value</returns>
    public ActionResult Index()
    {
        return View("FileUpload");
    }

        /// <summary>
        /// Uploads the file and store it in ~\Uploads directory.
        /// </summary>
        /// <returns></returns>
        [AcceptVerbs(HttpVerbs.Post)]
        public ActionResult fileUpload(HttpPostedFileBase file)
        {

            if (file.ContentLength > 0 & isXLSXFile > 0)
            {
                string filePath = Path.Combine(
                  Server.MapPath("~/Uploads"),
                  Path.GetFileName("ExcelFileUpload.xlsx"));  // save as new filename
                try
                {
                    file.SaveAs(filePath);
                    TempData["UploadValidationMessage_Success"] = "File upload succeeded";

                    return View();
                }
                catch (Exception e)
                {
                    TempData["UploadValidationMessage_Failure"] = "Failed to upload the file " + e.ToString();

                        return View();
                    }
                }
                else
                {
                    TempData["UploadValidationMessage_Failure"] = "Filename missing or filename extension is not .xlsx";

                    return View();
                }
    }
    }
public static void RegisterRoutes(RouteCollection routes)
        {
            routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            "Default", // Route name
            "{controller}.aspx/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        );

        routes.MapRoute(
          "Root",
          "",
          new { controller = "Home", action = "Index", id = "" }
        );
    } 
```

# linux - 用于运行第二个 mysql 服务器的 init.d 脚本失败

> ID：12829905
> 
> 赞同：0
> 
> 时间：2012-10-10T23:17:00.120
> 
> 标签：linux, init.d, mysql

我有 2 个 mysql 服务器，一个设置了所有 mysql 默认值（端口、套接字等），第二个设置为端口 3307 和另一个带有名为 my-dev.cnf 的默认文件的套接字。

当我运行时：

```
/usr/bin/mysqld_safe --defaults-file=/etc/my-dev.cnf 
```

服务器正常运行

我想要做的是有一个 init.d 脚本来运行它。我复制了 /etc/init.d/mysqld 脚本并更改了以下行：

```
exec="/usr/bin/mysqld_safe" 
```

到：

```
exec="/usr/bin/mysqld_safe --defaults-file=/etc/my-dev.cnf" 
```

但它一直在失败：

```
[ -x $exec ] || exit 5 
```

和：

> /etc/init.d/mysql-dev: 第 63 行: [: '/usr/bin/mysqld_safe': 期望二元运算符

我怎样才能让它工作，所以它将使用我在 /etc/my-dev.cnf 中设置的默认值？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T23:26:12.783

问题是`[ -x ]`测试文件是否可执行，但字符串不是可执行文件，它是您修改后的命令行。

将整个脚本粘贴到[http://pastie.org](http://pastie.org)上，我会修改它；）

# javascript - js函数优化

> ID：12829909
> 
> 赞同：1
> 
> 时间：2012-10-10T23:17:27.047
> 
> 标签：javascript, regex, optimization, nvl

我发现我自己经常从 JavaScript 中所谓的名称值列表中解析值。

我使用了一个自制的功能，它做得很好，但是我决定尝试原型属性。它似乎有效，但是我发现第二个函数“nvlSet”有点“丑陋”。

你认为是吗？如果是这样，你认为它如何能变成一种更“优雅”的方式来完成这项工作。

```
if(!String.prototype.nvlGet) {
    String.prototype.nvlGet = function(nme,def){
        return((rem0=new RegExp('(\\b|,)' + nme + '=([^\\b][^,]*)').exec(this)) ? rem0[2] : def);
    }
}
if(!String.prototype.nvlSet) {
    String.prototype.nvlSet = function(nme,val){
        var re0=new RegExp('(\\b' + nme + '=[^\\b][^,]*)');
        if(re0.test(this)) return(this.replace(re0,nme + "=" + val));
        re0.compile('(,' + nme + '=[^\\b][^,]*)');
        return(this.replace(re0,',' + nme + "=" + val));
    }
}

var lst='firstName=John,lastName=Smith,department=Sales';
alert(lst.nvlGet('firstName')); // John
alert(lst.nvlGet('surName','none')); // none
lst=lst.nvlSet('department','Research');
alert(lst.nvlGet('department','unknown')); // Research
alert(lst); // firstName=John,lastName=Smith,department=Research 
```

另外，我想避免像这里的“双重分配”：

```
lst=lst.nvlSet('department','Research'); 
```

对于这样的事情：

```
lst.nvlSet('department','Research'); 
```

但是我找不到办法做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T23:43:50.670

我建议将 nvls 序列化和反序列化为对象。一个相当简单的例子是：

```
function deserialize(nvl) {
  var re = /(\w+)=(\w+)/g, matches, props = {};
  while (matches = re.exec(nvl)) {
    props[matches[1]] = matches[2];
  }
  return props;
}

function serialize(props) {
  var prop, nvl = [];
  for (prop in props) {
    if (props.hasOwnProperty(prop)) {
      nvl.push(prop + '=' + props[prop]);
    }
  }
  return nvl.join(',');
} 
```

现在您的示例变为：

```
var props = deserialize('firstName=John,lastName=Smith,department=Sales');
alert(props.firstName); // John
alert(props.surName); // undefined
props.department = 'Research';
alert(props.department); // Research
alert(serialize(props)); // firstName=John,lastName=Smith,department=Research 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T23:59:02.213

字符串在 JavaScript 中是不可变的。您永远无法更改当前字符串对象的内容。这就是为什么所有对字符串进行操作的字符串方法都会返回一个新的字符串对象。所以，你想要的结构：

```
lst.nvlSet('department','Research'); 
```

您希望它修改当前字符串对象的地方无法完成。

您可以创建自己的常规对象来保存状态，然后具有获取或设置该状态的方法，如下所示：

```
function nvl(str) {
    this.data = {};
    if (str) {
        this.data = this.parse(str);
    }
}

nvl.prototype = {
    parse: function(str) {
        var result = {}, pieces;
        var items = str.split(",");
        for (var i = 0; i < items.length; i++) {
            pieces = items[i].split("=");
            result[pieces[0]] = pieces[1];
        }
        return(result);
    },
    get: function(key, defaultVal) {
        var val = this.data[key];
        if (val === undefined) {
            val = defaultVal;
        }
        return(val);
    },
    set: function(key, value) {
        this.data[key] = value;
    },
    serialize: function() {
        var arr = [];
        for (var i in this.data) {
            if (this.data.hasOwnProperty(i)) {
                arr.push(i + "=" + this.data[i]);
            }
        }
        return(arr.join(","));
    }
}; 
```

工作示例：http: [//jsfiddle.net/jfriend00/3urJF/](http://jsfiddle.net/jfriend00/3urJF/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T04:33:40.253

这个怎么样：

```
//add nvl as a method to String prototype
String.prototype.nvl = function(){

    //new prototype for the dictionary object that gets returned
    var proto = {

        //convert the object literal back into a nvl
        toNvl: function(){

            var str = [];
            for(var i in this){

                if( this.hasOwnProperty(i) ){
                    str.push(i+'='+this[i]);
                }

            }

            //return str.join(',');
            return str.join(',');
        }
    },
    //set the prototype of the object literal to our own
    dict = Object.create(proto);

    //convert the string into an object literal
    keys = this.split(',');

    keys.forEach(function(val, index, arr){
        arr = val.split('=');
        dict[arr[0]] = arr[1];
    });

    return dict;
}

var pop = 'color=blue,num=234'.nvl(); //convert the string to an object

pop.color = 'red'; //access object properties normally.

pop = pop.toNvl(); //convert back to nvl. reassignment is unfortunately necessary 
```

# python - pyside通过样式表设置背景图像不起作用

> ID：12829911
> 
> 赞同：1
> 
> 时间：2012-10-10T23:17:49.550
> 
> 标签：python, stylesheet, pyside

我正在尝试通过 pyside 设置 QGridLayout 小部件的背景图像（与应用程序位于同一文件夹中）但无济于事我查看了有关样式表的所有 tuts、文档和论坛帖子，但我仍然无法弄清楚找出我做错了什么。

```
from PySide.QtCore import *
from PySide.QtGui import *
import sys

class Main(QWidget):

    def __init__(self, parent=None):
        super(Main, self).__init__(parent)

        j = 0
        pos =  [(0, 0), (0, 1), (0, 2), (0, 3),
                (1, 0), (1, 1), (1, 2), (1, 3),
                (2, 0), (2, 1), (2, 2), (2, 3),
                (3, 0), (3, 1), (3, 2), (3, 3),
                (4, 0), (4, 1), (4, 2), (4, 3),
                (5, 0), (5, 1), (5, 2), (5, 3)]

        grid  = QGridLayout(self)
        items = ["one", "Two", 'Three','four','five']

        for e in items:
            picture = ImageLabel("Book.png", self)
            picture.name = e
            picture.setFixedSize(128,128)
            picture.mousepos = str(picture.pos())
            picture.imageClicked.connect(self.anotherSlot)
            grid.addWidget(picture, pos[j][0], pos[j][1])
            j = j + 1
            picture.setToolTip('This is' + str(e) + ' widget')
            picture.imageHovered.connect(self.Item_Hovered)

        self.setStyleSheet("QGridLayout {background-image: url(./image.jpg) }");

    def anotherSlot(self):
        sender = self.sender()
        print "I clicked item " + str(sender.name)

    def Item_Hovered(self):
        sender = self.sender()
        print "I'm Hovering over " + str(sender.name)

class ImageLabel(QLabel):

    imageClicked = Signal(str) # can be other types (list, dict, object...)
    imageHovered = Signal(str)
    imageLeave   = Signal(str)

    def __init__(self, image, parent=None):
        super(ImageLabel, self).__init__(parent)        
        self.setPixmap(image)
        # self.setMouseTracking(True)

    def mousePressEvent(self, event):
        print "from ImageLabel.mousePressEvent()"
        self.imageClicked.emit("Image Clicked")

    def enterEvent(self, event):
        print "from ImageLabel.enterEvent()"
        self.imageHovered.emit("Hovering")

    def leaveEvent(self, event):
        print "from ImageLabel.leaveEvent()"
        self.imageLeave.emit("Hovering No More")

a = QApplication([])
m = Main()
m.show()
sys.exit(a.exec_()) 
```

任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T23:26:23.660

即使它有效，你也不会得到预期的结果，我实现正确背景绘制的唯一方法是覆盖paintEvent

```
tile = QtGui.QPixmap("x.png")

def paintEvent(self, pe):
    painter = QtGui.QPainter(self)
    painter.drawTiledPixmap(self.rect(), tile)
    super(Console, self).paintEvent(pe) 
```

控制台是我的类`class Console(QtGui.QMainWindow):` 该示例适用于整个窗口。

我不确定画家构造函数是否可以移开`paintEvent`

**更新**：看起来`QPainter`需要在每个上创建`paintEvent`

我找到了一种最简单的方法，无需覆盖`paintEvent`

```
palette = QtGui.QPalette()
palette.setBrush(QtGui.QPalette.Background, tile)
self.setPalette(palette) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-12T15:57:18.837

检查[Qt Stylesheet Reference](http://qt-project.org/doc/qt-4.8/stylesheet-reference.html "Qt 样式表参考")，它列出了可以使用样式表自定义的小部件。

QGridLayout 继承自 QLayout、QLayoutItem 和 QObject。根据参考资料，这些都不能使用样式表进行样式设置。

无需自定义paintEvent 处理程序，只需尝试将您的布局放在QFrame 中。QFrame 支持 CSS 盒子模型，因此您可以在 QFrame 上使用 background-image 属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T08:50:09.577

正如 sherpya 在上面解释的那样，实现小部件/窗口的背景图像的最简单方法是自定义相关特定小部件的 paintEvent 处理程序，所以这里是基于上述解释的代码，最终有效。

```
def paintEvent(self, event):
    self.tile= QPixmap("bookshelf.png")
    painter = QPainter(self)
    painter.drawTiledPixmap(self.rect(), self.tile)
    super(Main, self).paintEvent(event) 
```

sherpyas 代码没有解释（这实际上帮助我理解了paintEvent）是self.tile 变量包含实际的像素图图像，如果在paint 变量本身中引用该图像。

```
self.tile= QPixmap("bookshelf.png") 
```

将图像绘制到样式表创建错误的小部件/窗口的背景！

# jquery - 如何使用javascript平滑水平滚动？

> ID：12829916
> 
> 赞同：1
> 
> 时间：2012-10-10T23:18:06.867
> 
> 标签：jquery, scroll

我在这里为客户制作了一个水平结构的网站：

[http://jules-photo.com/shhmgmt/](http://jules-photo.com/shhmgmt/)

他们要求，在加载时，页面会自动平滑地向右滚动，直到到达末尾并停止。理想情况下，我想控制滚动的速度。我觉得我已经插入了我可以在网上找到的每一点 javascript，但没有运气。谁能推荐一个解决这个问题的方法？

谢谢！

更新：

好的，所以我想我找到了使用 jQuery.ScrollTo 所需的代码：

```
$(...).scrollTo( { top:0, left:700},800 ); 
```

但我不完全确定如何将其实现到 jquery 脚本中，以便在页面加载时触发。到目前为止，我的 jquery（不成功）：

```
<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js'></script>
<script type='text/javascript' src='jquery.scrollTo-min.js'></script>
<script type="text/javascript">
// no conflict jquery
jQuery.noConflict();
//jquery stuff

$(document).ready(function(){

$(...).scrollTo( { top:0, left:700},800 );

});

</script> 
```

更新：我最终像这样使用 animate() ：

```
$(document).ready(function(){

$('html,body').animate({scrollLeft: $("body").width()},11000) 
    $(window).bind("mousewheel", function(ev) { 
        $("html, body").stop(); 
    });
 }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T23:22:32.167

jQuery 除了对滚动提供出色的天生支持外，还有各种与滚动相关的插件。

这个站点：[http](http://demos.flesler.com/jquery/scrollTo/) ://demos.flesler.com/jquery/scrollTo/有各种优秀的滚动演示，您可能会觉得有用。

我看到您使用 mootools... 尽管它也使用 $ 变量，但您可以使用 jQuery.noConflict() 串联使用这两者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T01:15:18.067

您正在寻找的功能是`animate()` Jquery 没有用于水平幻灯片的内置滑块控件，但下面是我发现的一些小提琴，希望能够为您指明正确的方向。

[http://jsfiddle.net/sg3s/rs2QK/](http://jsfiddle.net/sg3s/rs2QK/) - 这个幻灯片面板从左侧打开并关闭到右侧

[http://jsfiddle.net/sg3s/RZpbK/](http://jsfiddle.net/sg3s/RZpbK/) - 在打开新面板之前，面板从左到右滑动打开并靠近左侧。

来源： [http ://api.jquery.com/animate/](http://api.jquery.com/animate/)

# android - 为什么我的光标没有在 Android Activity 中关闭？

> ID：12829917
> 
> 赞同：4
> 
> 时间：2012-10-10T23:18:12.443
> 
> 标签：android, database, cursor

在我的 Android Activity 中，我需要从数据库中读取内容。我创建了一个帮助类来处理我的数据库访问。这个帮助类有几种不同的方法，旨在读取不同的东西并毫不费力地返回它们。这是一个例子。

```
public String GetName(int id)
{
    String toReturn = null;
    Cursor cursor = null;

    try
    {
        cursor = db.query(TABLE_NAME,
            new String[] {"name"},
            "id = " + id,
            null,
            null,
            null,
            null,
            null);

        assert(cursor.getCount() == 1);

        cursor.moveToFirst();

        toReturn = new String(cursor.getString(0)); 
    }
    finally
    {
        if(cursor != null)
            cursor.close();
    }

    return toReturn;
} 
```

我不断收到错误

> 10-10 15:52:18.991：W/SQLiteCompiledSql(28313)：在终结器中释放语句。请确保在光标上显式调用 close()：SELECT name FROM my_table WHERE id = 0 10-10 15:52:18.991: W/SQLiteCompiledSql(28313): android.database.sqlite.DatabaseObjectNotClosedException: Application did not close the在此处打开的游标或数据库对象

尽管 Activity 工作正常，但堆栈跟踪直接指向此函数（以及与之非常相似的函数）。我究竟做错了什么？我在这里看了一会儿，然后我添加了 try/finally 以确保我总是关闭光标，但我仍然收到错误。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T08:17:10.947

您正在正确关闭游标，但您还需要关闭数据库，请确保您也正在关闭数据库：

```
if(db.isOpen()) db.close(); 
```

# vb.net - 大图 - 如何最好地存储我的自定义应用程序文件？

> ID：12829919
> 
> 赞同：2
> 
> 时间：2012-10-10T23:18:26.197
> 
> 标签：vb.net, vb.net-2010

我是一名结构工程师，并编写了一些内部结构计算应用程序以在我们的 mac 上使用。Apple 的 Core Data 框架给我留下了深刻的印象，它制作图形对象模型、链接到自定义类以及让内置框架处理我所有的打开和保存功能是多么容易。现在我正在寻找使用 Visual Basic 2010 express 为 Windows 编写相同类型的应用程序。

我对 VB 相当熟悉，并且精通面向对象的编程。所以关于我的问题：

我的应用程序需要存储一些我希望对其执行计算的自定义对象的属性。例如，我希望检查其强度的梁或柱对象。我需要存储长度、材料、装载量等内容。主要是数字、布尔值和文本数据。其中一些元素链接在一起，因此我需要存储对另一个对象或对象数组的引用。

我应该编写一堆自定义类来建模我的数据，然后将它们序列化为自定义文件类型，还是建议使用某种数据库来存储这些数据？我没有任何数据库编程经验。我能否在 VB2010 中拥有一个具有自定义文件扩展名的数据库，我可以像普通文件一样打开、保存、另存为吗？我看到的每个数据库示例似乎都涉及到连接到预先存在的数据库。就我而言，每个新工作都需要一个新文件/数据库来存储我所有的项目对象/数据/计算。

你有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T23:25:28.770

这里基本上有两个问题：

*   如何在应用程序中表示数据
*   如何存储数据

就应用程序中的数据而言，您在为每个对象使用自定义类的正确轨道上。

对于存储，这取决于您的需求。如果您觉得您将拥有大量数据并且您需要对这些记录进行任何类型的排序或查询，那么数据库就是您的最佳选择。如果没有，您当然可以考虑使用您自己的自定义文件类型，其中您的类的实例被序列化。

# c# - 为什么 WatiN 有时只能通过 id 查找？

> ID：12829921
> 
> 赞同：0
> 
> 时间：2012-10-10T23:18:28.007
> 
> 标签：c#, html-table, watin, webautomation

我正在尝试做一些网络自动化来登录并在动态加载的网页上使用 WatiN 检查订单状态。我正在使用 Visual Studio C# Express 2010 和 IE 浏览器。

从昨天运行良好的 .Text 获取 .Text 的几段代码`<TD>`不再起作用。有`<TD>`问题的包含一个`<NOBR>`and `<INPUT>`，这是问题吗？

我需要的文本也在，`<INPUT>`但标签没有定义`ID`或`NAME`属性，并且包含在测试之间不一样的内部文本/值。我不能编辑有问题的网站，否则这在很久以前就已经修复了。

罪魁祸首：

```
public TableCell Status {
    get {
        return Document.TableCell(Find.ById("elementID")); 
    }
} 
```

其他 TableCells 不工作，但 TextFields 和按钮很好。我的预感是该网站很大，WatiN 可能偶尔会超时，试图找到该元素。不过，我相当肯定，WatiN 只是`ElementNotFoundException()`在文档结束时才抛出。（？？？）

表单元素在到达它们之前没有完全加载以进行调试，所以我认为这可能是一个问题，但不是元素的 for 元素都已正确加载并且存在对所有元素都是正确的。此外，这只是一个调试问题，当我使用 .dll 文件将 .exe 复制到桌面时，它运行良好。

我已经设置了我的调试器，以便禁用“启用属性评估和其他隐式函数调用”，但这并没有帮助。

当我运行直接 .exe 但不是通过 Visual Studio 时，该方法有效。然后，当我重新构建相同的代码并将 .exe 再次复制到桌面时，它停止工作。

更新：显然，要连接的网站的网络管理员做了一些改变，破坏了很多东西，所以也许我的代码毕竟还好？当我得到他的回复时，我会再次更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T21:48:26.093

我遇到了各种 WatiN 测试运行者无法“看到”页面上的元素的问题……例如链接。我发现的一个解决方法是在具有提升权限的帐户下打开测试运行器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T13:53:34.263

那么也许你可以尝试类似的东西：

```
Document.WaitForComplete(); 
```

或者

```
TableCell tc = Document.TableCell(Find.ById("elementID"));
tc.WaitUntilExists(); 
```

为了表格单元出现？

# nlp - 如何避免 NLP 中的顺序处理？

> ID：12829922
> 
> 赞同：4
> 
> 时间：2012-10-10T23:18:36.283
> 
> 标签：nlp

NLP 中的一般方法是一个流程链，如下所示：

1.  代币化
2.  形态分析
3.  词性标注
4.  句法分析，或命名实体识别，或名词短语分块等。
5.  分类（或程序的任何“最终目标”）

我总是觉得奇怪的是，每一步都在没有“咨询”后面的步骤的情况下做出决定。例如，您可以将一个词 POS 标记为名词，即使它使任何句法分析在处理过程中变得不可能。

我想知道是否有一些考虑到后验步骤的一般 NLP 问题的方法。一种信仰传播，如果你愿意的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T21:41:08.950

您可能想查看 Hollingshead 和 Roark 的“Pipeline Iteration” (http://acl.ldc.upenn.edu/P/P07/P07-1120.pdf)，以及 Kristy Hollingshead 的后续关于管道的一般工作和通信管道阶段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T10:54:22.540

您描述的管道通常是结构化的应用程序数量，但它不是唯一可能的架构。一些方法涉及多次通过管道，其中一个阶段的信息在下一个阶段使用。其他工作结合了您列出的一些步骤，例如形态分析和 PoS 标记。我最近阅读了一篇名为“A Hierarchical Dirichlet Process Model for Joint POS and Morphology Induction”的论文，其中 PoS 标签和形态学是一起诱导的，因为它们是相互依赖的。

# xcode - 如何在 Xcode 4.5 中放置观察点？

> ID：12829928
> 
> 赞同：1
> 
> 时间：2012-10-10T23:19:36.820
> 
> 标签：xcode

当有人将某个变量更改为某个值时，我需要设置一个断点。我想抓住发生这种情况的确切时刻

请问有什么提示吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T23:25:41.063

下意识的反应是暂停程序，通过键入手动添加观察点：

> 观看修改 -c '(myVar == 23)'

（或您想要评估的任何条件），然后让它继续。

您可以右键单击变量列表中的变量并选择“观察“变量名””，但似乎没有办法使其成为条件。

有关调试命令行样式界面的更多信息，请参阅[LLDB 教程](http://lldb.llvm.org/tutorial.html)；特别是您可能会对大约一半的“设置观察点”感兴趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T23:24:12.813

您可以在监视变量值的代码块内添加断点：

```
// Some code that might change the value of the variable

if (theVar != lastValueOfVar) {
    NSLog(@"Value changed!"); // Add a breakpoint here
    lastValueOfVar = theVar;
} 
```

从 Apple 关于向项目添加断点的文档中：

> 要设置断点，请打开源代码文件并单击要暂停执行的行旁边的间距。当您添加断点时，Xcode 会自动启用它。当执行过程中遇到启用的断点时，会导致程序暂停。
> 
> 要禁用断点，请单击装订线中的断点图标。再次单击断点图标以重新启用断点。
> 
> 要关闭断点，请单击工作区工具栏上的断点按钮。再次单击该按钮以重新打开断点。
> 
> 要移动断点，请将其拖动到新位置。要删除断点，请将其拖出装订线。

您还可以使用热键“Command + 反斜杠”( `⌘\`) 添加或删除断点。

# objective-c - 注销时缓存的清除图像

> ID：12829929
> 
> 赞同：0
> 
> 时间：2012-10-10T23:19:57.850
> 
> 标签：objective-c, ios, ios5, ios-simulator, cache-control

我在缓存中创建了一个图像，如下所示：

```
NSURL *cachesDirectoryURL = [[[NSFileManager defaultManager] URLsForDirectory:NSCachesDirectory inDomains:NSUserDomainMask] lastObject]; // iOS Caches directory

NSURL *profilePictureCacheURL = [cachesDirectoryURL URLByAppendingPathComponent:@"FacebookProfilePicture.jpg"];

BOOL cachedToDisk = [[NSFileManager defaultManager] createFileAtPath:[profilePictureCacheURL path] contents:newProfilePictureData attributes:nil];

NSLog(@"Wrote profile picture to disk cache: %d", cachedToDisk);

UIImage *image = [UIImage imageWithData:newProfilePictureData];

UIImage *mediumImage = [image thumbnailImage:280 transparentBorder:0 cornerRadius:0 interpolationQuality:kCGInterpolationHigh];
UIImage *smallRoundedImage = [image thumbnailImage:64 transparentBorder:0 cornerRadius:9 interpolationQuality:kCGInterpolationLow];

NSData *mediumImageData = UIImageJPEGRepresentation(mediumImage, 0.5); // using JPEG for larger pictures
NSData *smallRoundedImageData = UIImagePNGRepresentation(smallRoundedImage); 
```

我应该在另一种方法（用于注销）中添加什么来从缓存中清除此图像？

试过这个，它没有工作：

```
// Clear the cached profile and other images in cache 
NSFileManager *fileMgr = [NSFileManager defaultManager]; 
NSString *cachesDirectoryURL = [[[NSFileManager defaultManager]    URLsForDirectory:NSCachesDirectory inDomains:NSUserDomainMask] lastObject];

// iOS Caches directory 
NSArray *fileArray = [fileMgr contentsOfDirectoryAtPath:cachesDirectoryURL error:nil]; 
for (NSString *filename in fileArray) 
{ 
  [fileMgr removeItemAtPath:[cachesDirectoryURL stringByAppendingPathComponent:filename] error:NULL]; 
} – 
```

# ios - 为什么 Xcode 调试器不显示类型信息？

> ID：12829935
> 
> 赞同：2
> 
> 时间：2012-10-10T23:20:36.553
> 
> 标签：ios, xcode, gdb, lldb

很多时候 Xcode 不会在监视窗口中显示实例成员值。如果我有一个从具有十几个数据成员的 NSObject 派生的类型，当我单击楔形以显示我的类中的成员时，它只会将该对象显示为 NSObject。

在下面的示例中，我有一个 Search 对象数组。调试器似乎清楚地理解数组中的对象是搜索对象，但是当我单击楔形展开搜索对象时，它只是说“对不起。这些是 NSObjects”。我做错了什么还是苹果调试器技术只有 15 年的历史？

![在此处输入图像描述](../Images/9f624147df8cd23a9ff32da1ee439267.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T02:06:38.867

您使用的是 LLDB 还是 GDB？因为那些孩子看起来根本不像 LLDB 生成的。

# wpf - 使用命令模型的主要好处是什么？

> ID：12829949
> 
> 赞同：1
> 
> 时间：2012-10-10T23:22:02.430
> 
> 标签：wpf, prism

我想知道在 WPF 中使用命令模型的主要好处是什么。我来自 Windows 窗体和 MFC，我总是利用在事件处理程序中编写代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T01:19:06.030

这些命令允许轻松管理应该启用或不启用哪个 UI 元素（通过界面的`CanExecute`成员`ICommand`）。

在我看来，您可以在多个地方插入相同的命令，甚至可以从另一个命令调用命令，这种方式在架构上比使用事件更简洁。

使用命令，您可以编写尽可能接近真实用户在您的 UI 中单击的测试（再次使用`CanExecute`命令的成员，您可以轻松查看`command A`及其相关控件是否按计划对执行做出反应`command B`）

在维护方面，在阅读标记时更容易理解应用程序的作用，`<Button Name="SomeButton" Command="{Binding SaveClientDataCommand} />`而不是`<Button Name="SomeButton" OnClick="SomeButton_Click" />`当您放入以前没有从事过的项目时。

如果您使用[MVVM 模式](https://en.wikipedia.org/wiki/Model_View_ViewModel)，它们允许您将逻辑从 View 移动到 ViewModel。

很多这些观点都是关于个人偏好和意见的，但是当有几种方法可以做同样的事情时，情况往往会如此。轮子还没有被重新发明，你可能无法用基于事件的编程不可能的命令来做任何事情，但我觉得它更干净，更容易维护。

# java - 无法让 servlet 在 Tomcat 6 中工作

> ID：12829954
> 
> 赞同：2
> 
> 时间：2012-10-10T23:22:39.790
> 
> 标签：java, tomcat, web-applications, servlets

我是一名 Java 初学者，并试图让我的第一个示例工作。

我已经安装了**Tomcat6.0**并在**Windows**上使用了**Eclipse**。

 **我已将`HelloWorld`文件夹放在`webapps`. 在`WEB-INF`已放置类文件夹和`web.xml`.

当我将其作为 URL 放置时：`http://localhost:8080/HelloWorld/HelloWorld`

我收到以下错误：

> HTTP 状态 404：请求的资源 () 不可用。

当我尝试`http://localhost:8080`它工作正常并可以访问 Tomcat 的主页时，我可以从那里执行示例。

我`web.xml`的是：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- <!DOCTYPE web-app
 PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"
 "http://java.sun.com/dtd/web-app_2_3.dtd"> -->

<web-app>
    <servlet>
        <servlet-name>Hello</servlet-name>
        <servlet-class>HelloWorld</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>Hello</servlet-name>
        <url-pattern>/HelloWorld</url-pattern>
    </servlet-mapping>
</web-app> 
```

我的 HelloWorld.java 是：

```
import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;

public class HelloWorld extends HttpServlet { 
    public void doGet(HttpServletRequest request, HttpServletResponse response)
                throws ServletException,IOException {

        response.setContentType("text/html");

        PrintWriter pw = response.getWriter();
        pw.println("<html>");
        pw.println("<head><title>Hello World</title></title>");
        pw.println("<body>");
        pw.println("<h1>Hello World</h1>");
        pw.println("</body></html>");
    }
} 
```

请帮忙。从两天开始，我就被困在这上面了。编辑：解决了这个问题。谢谢。我在 web.xml 中添加了 HelloWorld，它起作用了。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T06:25:06.083

为此，您需要具备以下条件：

`$CATALINA_HOME/webapps`1）在目录内创建一个文件夹HellowWorld

`WEB-INF`2)在 HellowWorld 目录中创建一个名为的文件夹，并`web.xml`完全按照您提供给我们的方式放置。

3）将`HellowWorld.class`（不是.java）放在里面`WEB-INF/classes`（就像你给我们的那样）

4）然后启动你的tomcat服务器，监听8080端口（最好是全新安装）。

5) 调用`http://localhost:8080/HelloWorld/HelloWorld`（直接从浏览器的 url 或从带有 的表单`action=get`）

6）现在它应该可以正常工作（在我的tomcat7上工作）

如果您的配置有任何不同，那么这就是导致问题的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T05:19:47.483

请将 HelloWorld 文件夹放在 webapps 文件夹之外。**

# c++ - 打开 Watcom 错误无法执行（wpp）：没有这样的文件或目录*

> ID：12829958
> 
> 赞同：0
> 
> 时间：2012-10-10T23:23:08.653
> 
> 标签：c++, compiler-errors, dos, 16-bit, watcom

所以我正在尝试使用 Open Watcom FORTRAN 创建一个 16 位 MSDOS 应用程序。

我创建了一个新项目并制作了一个简单的 hello world cpp 文件，但是当我尝试通过按 f4 进行构建时，它以错误的方式猛烈抨击我：

*错误（E14）：无法执行（wpp）：没有这样的文件或目录*

我用谷歌搜索了几次，但找不到任何问题的答案。
PS：我在命令行中使用带有 GUI 的 Watcom

*这从这里前面的讨论继续，没有回答
[我如何编写一个可以在 msdos 上运行的 c++ 控制台 exe？](https://stackoverflow.com/questions/12806330/how-do-i-write-a-c-console-exe-which-i-can-run-on-msdos/12806416)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T01:12:53.627

“按F4”是什么意思？这是您的 IDE 或编辑器中的快捷方式吗？如果是这样，您使用的是什么 IDE/编辑器？

关于 OpenWatcom，他们的[wiki](http://www.openwatcom.org/index.php/Main_Page)包含大量信息。我建议您在遇到问题时将其作为您的第一站。对于您的特定情况，[参考手册](http://www.openwatcom.org/index.php/Reference_Manuals)页面将很有用。有关使用 OpenWatcom 的 IDE 创建和构建程序的演练，请参阅“入门指南”的第 3 章。如果您使用自己的 makefile 或构建脚本构建代码，请参阅“用户指南”以获取有关直接从命令行调用编译器的详细信息。

“程序员指南”包含示例项目（包括编译说明）。OpenWatcom 安装目录中的“samples”文件夹包含许多示例项目，所有项目都带有生成文件或构建说明。您可能可以将其中之一用作您的项目的模板。

# ios5 - 为电子邮件地址自定义 iOS 键盘

> ID：12829960
> 
> 赞同：1
> 
> 时间：2012-10-10T23:23:43.460
> 
> 标签：ios5

我能够弄清楚如何使用 Previous/Next 和 Done 按钮自定义 iOS 键盘（根据我的 github 源代码：[https](https://github.com/kalvish21/CustomKeyboard) ://github.com/kalvish21/CustomKeyboard ）。我的问题是，在 Mail（在 iPhone 应用程序上）中，它有 @ 和 . 靠近空格键，以便用户可以更轻松地输入他们的电子邮件地址。我怎样才能实现类似的功能？我试图在网上找到类似的东西，但找不到它......

是否也有一些 API 或者有一些例子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T23:38:00.273

你可以这样做：

`textField.keyboardType = UIKeyboardTypeEmailAddress`

# java - 如何抛出除以 0 的异常？

> ID：12829962
> 
> 赞同：1
> 
> 时间：2012-10-10T23:23:57.360
> 
> 标签：java, exception, constructor, try-catch, private-methods

如果我的斜率的分母为 0，如何抛出异常以输出“计算失败，x1 和 x2 之间没有变化”...以下块是类文件中的方法。

```
public double getSlope() {
    double rise = p2.getY() - p1.getY();
    double run  = p2.getX() - p1.getX();
    double slope = rise / run;
    return slope;
} 
```

我将结果输出到我的测试文件或包含主要方法的驱动程序类。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T23:28:02.983

```
if (run == 0) {
    throw new IllegalArgumentException("Divide by zero error");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T23:28:27.990

要抛出异常，您需要这样做：

```
public double getSlope() {
    double rise = p2.getY() - p1.getY();
    double run  = p2.getX() - p1.getX();
    if (run == 0) throw new Exception(
                   "Calculation failed, there is no change between x1 and x2");
    double slope = rise / run;
    return slope;
} 
```

注意方法中的关键字`throw`，这显然不会从方法中捕获`main`，因此会崩溃！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T23:33:56.197

你可以做

```
if(run == 0) {
    throw new java.lang.ArithmeticException("Calculation failed, there is no change between x1 and x2");
}
double slope = rise / run; 
```

Also, you can use `java.lang.IllegalStateException` instead, if it makes more sense.

Or, `java.lang.RuntimeException` if you only the message is relevant.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T23:39:15.443

When you divide by zero, it throws automatically an exception called java.lang.ArithmeticException.

If you really want to throw your own exception, to put your message or something similar, you can as bellow:

```
if(run == 0) {
    throw new ArithmeticException("Your message here");
} 
```

Please notice that this is a RuntimeException and you are not obligated to handle it. If you want to create something that forces the developer to handle, you can create your own Exception, but I think it's not the case.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T23:29:58.147

修改你的函数如下：

```
public double getSlope() throws DivideByZero{
    double rise = p2.getY() - p1.getY();
    double run  = p2.getX() - p1.getX();

    if (run == 0) {
        throw new MyException("Denominator is zero");
    }

    double slope = rise / run;
    return slope;
} 
```

我的回答还要求您创建一个名为`MyException`. 关于这样做的细节留给读者作为练习。（提示：谷歌是一个很棒的工具。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-10T23:32:03.397

试试这个：

```
public double getSlope() throws Exception {
    double rise = p2.getY() - p1.getY();
    double run  = p2.getX() - p1.getX();
    if (run == 0) throw new Exception("Calculation failed.");
    double slope = rise / run;
    return slope;
}

public class TestLine {
    public static void main(String[] args) {
        try{
            l1.getSlope();
        } catch (Exception e) {
            System.out.println(e.getMessage());
        }
} 
```

# javascript - 由动态生成的元素触发的事件不会被事件处理程序捕获

> ID：12829963
> 
> 赞同：52
> 
> 时间：2012-10-10T23:24:07.153
> 
> 标签：javascript, jquery

我有一个`<div>`使用`id="modal"`jQuery`load()`方法动态生成的 with：

```
$('#modal').load('handlers/word.edit.php'); 
```

`word.edit.php`包含一些输入元素，它们被加载到 modal`<div>`中。

使用 jQuery 的`keyup`方法，我可以在事件触发后捕获输入值，但是当元素被动态添加到模态 div 时，当用户输入他们的文本时，事件不再触发。

哪个 jQuery 方法支持处理由动态创建的元素触发的事件？

创建新输入元素的代码是：

```
$('#add').click(function() {
    $('<input id="'+i+'" type="text" name="translations' + i + '"  />')
      .appendTo('#modal'); 
```

捕获用户值的代码是：

```
$('input').keyup(function() {
    handler = $(this).val();
    name = $(this).attr('name'); 
```

第二个代码块似乎适用于原始元素，但它不会被新的动态生成的元素触发。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-10-10T23:31:20.813

您需要[将事件委托](http://api.jquery.com/on#direct-and-delegated-events)给页面中最近的静态祖先元素（另请参阅[“了解事件委托”](http://learn.jquery.com/events/event-delegation/)）。这只是意味着，绑定事件处理程序的元素在绑定处理程序时必须*已经存在*，因此对于动态生成的元素，您必须允许事件冒泡并进一步处理它。

jQuery[`.on`](http://api.jquery.com/on)方法是执行此操作的方法（或[`.delegate`](http://api.jquery.com/delegate)用于旧版本的 jQuery。）

```
// If version 1.7 or above

$('#modal').on('keyup', 'input', function() {
    handler = $(this).val();
    name = $(this).attr('name');
}); 
```

或者在旧版本中

```
// If version 1.6 or below

// note the selector and event are in a different order than above
$('#modal').delegate('input', 'keyup', function()
{
    handler = $(this).val();
    name = $(this).attr('name');
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-10T23:26:48.793

发生这种情况是因为您在连接事件*后添加了输入元素。*尝试[.on](http://api.jquery.com/on/)：

```
$('body').on('keyup', 'input', function() {
    handler = $(this).val();
    name = $(this).attr('name');
}); 
```

使用`.on`将确保`keyup`事件连接到最初在页面上的输入，以及以后动态添加的任何输入。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-10T23:29:01.780

当您动态更改 DOM 时，jQuery 不会将事件处理程序附加到它们。您需要使用[on() 和委托事件](http://api.jquery.com/on/)

对于您的输入项，您需要以下内容：

```
$("<parentSelector>").on("keyup", "input", function() { 
    handler = $(this).val();
    name = $(this).attr('name');
}) 
```

parentSelector 在 DOM 中比输入元素更高，并且是在页面加载时存在的元素，可能是表单 ID 或其他东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T23:30:08.627

功能绑定是在页面加载中进行的。使用函数 live() 处理动态创建的元素。例子：

```
$ ("p"). live ("click", function () {
    // Your function
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-08T21:39:05.703

如果您需要捕获所有表单元素的更改，尤其是选择框，我知道这里没有提到它们，但是知道它会有所帮助，请使用以下代码：

```
$(document).on('change', ':input', function () {
   alert('value of ' + $(this).attr('name') + ' changed')
}); 
```

这应该涵盖所有`input`, `textarea`, `select`, `checkbox`,`radio`等。

# iphone - Storyboard Table View Controller 不显示用户定义的音乐列表

> ID：12829967
> 
> 赞同：1
> 
> 时间：2012-10-10T23:24:34.313
> 
> 标签：iphone, xcode, uitableview, storyboard

我可能遗漏了一些非常明显的东西，但是：我正在尝试将一个项目迁移到 Storyboards 中，但是我正在努力让我的表格视图控制器显示用户定义的数据。

基本上，该项目使用媒体选择器来创建歌曲队列，应用程序可以完美地播放这些歌曲。当我尝试在表格视图中显示此用户定义列表时，我的麻烦就开始了，它根本不显示任何信息！（我的旧 .xib 文件工作正常！）。

我的 .h 表视图控制器：

```
#import <UIKit/UIKit.h>
#import <MediaPlayer/MediaPlayer.h>
#import "MusicViewController.h"

@protocol MusicTableViewControllerDelegate; // forward declaration

@interface MusicTableViewController : UITableViewController     <MPMediaPickerControllerDelegate, UITableViewDelegate> {

__unsafe_unretained id <MusicTableViewControllerDelegate>   delegate;

}

@property (nonatomic, assign) id <MusicTableViewControllerDelegate> delegate;
@property (nonatomic, strong) NSMutableArray *mediaItemCollectionTable;

@end

@protocol MusicTableViewControllerDelegate

// implemented in MainViewController.m
- (void) musicTableViewControllerDidFinish: (MusicTableViewController *) controller;
- (void) updatePlayerQueueWithMediaCollection: (MPMediaItemCollection *) mediaItemCollection;

@end 
```

和我的.m：

```
#import "MusicTableViewController.h"
#import "MusicViewController.h"

@interface MusicTableViewController ()

@end

@implementation MusicTableViewController

- (id)initWithStyle:(UITableViewStyle)style
{
self = [super initWithStyle:style];
if (self) {

}
return self;
}

@synthesize delegate;           // The main view controller is the delegate for this class.
@synthesize mediaItemCollectionTable;   // The table shown in this class's view.

// Configures the table view>
- (void)viewDidLoad
{
[super viewDidLoad];

}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{

 // Return the number of sections.
 return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
// Return the number of rows in the section.

MusicViewController *mainViewController = (MusicViewController *) self.delegate;
MPMediaItemCollection *currentQueue = mainViewController.userMediaItemCollection;

return [currentQueue.items count];

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

if (cell == nil) {

    cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault
                                 reuseIdentifier: @"Cell"];

}

MusicViewController *mainViewController = (MusicViewController *) self.delegate;
MPMediaItemCollection *currentQueue = mainViewController.userMediaItemCollection;
MPMediaItem *anItem = (MPMediaItem *)[currentQueue.items objectAtIndex:indexPath.row];

    cell.textLabel.text = [anItem valueForProperty:MPMediaItemPropertyTitle];

return cell;
}

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

[tableView deselectRowAtIndexPath: indexPath animated: YES];

@end 
```

我完全想念它为什么不返回任何东西！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T18:21:13.253

我最终解决了这个问题！- 由于将应用程序传输到基于 Storyboard 的结果，我需要使用 Prepare for Segue 将数据推送到表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T02:44:03.073

在情节提要中，检查您的表格内容是否设置为静态单元格，如果是，请将其更改为动态原型。

此外，在您的代码中，在 cellForRowAtIndexPath 中，您在哪里声明了 onbject 'cell'。我看到直接比较`if(cell == nil)`它没有在任何地方声明。

# java - Java - 用于 HTML JTextPane CSS 的 FontSizeAction

> ID：12829969
> 
> 赞同：0
> 
> 时间：2012-10-10T23:24:38.450
> 
> 标签：java, html, css, action, font-size

使用代码时：

```
Action sizeAction = new StyledEditorKit.FontSizeAction(String.valueOf(size), size); 
```

分配操作的按钮插入 HTML 标记：

```
<FONT SIZE="5"> My text here </FONT> 
```

当我去执行其他功能时，这会给出非常不准确的字体大小比例。相反，我想要的是插入一个样式标签来更改字体大小，例如

```
<FONT STYLE="font-size: 16pt;"> My text here </FONT> 
```

我将如何更改 FONTSIZE 操作插入的标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T00:22:46.203

找到了解决问题的更好方法！只需创建一个新动作并更改添加属性的方式。

```
private class FontSizeAction extends HTMLEditorKit.FontSizeAction {
    private int size;

    public FontSizeAction(int size) {
        super("font-size-" + size, size);
        this.size = size;
    }

    @Override
    public void actionPerformed(ActionEvent ae) {
        JEditorPane editor = getEditor(ae);
        if (size > 0) {
           MutableAttributeSet attr = new SimpleAttributeSet();
           attr.addAttribute(StyleConstants.FontSize, size + "pt");
           setCharacterAttributes(editor, attr, false);
        } else UIManager.getLookAndFeel().provideErrorFeedback(editor);   
    }
} 
```

# facebook - Facebook PhoneGap 插件。获取 FB 访问令牌正常，FB ID 未定义？

> ID：12829971
> 
> 赞同：1
> 
> 时间：2012-10-10T23:24:43.567
> 
> 标签：facebook, cordova

我已经敲了几个小时的头了。我终于将 Phonegap Facebook 插件集成到我的应用程序中，但每当我这样做时：

```
FB.api('/me', function(me){
    alert("ID: "+me.id);
}); 
```

或者

```
var fbid = "1";
FB.getLoginStatus(function(response) {
    if (response.status == 'connected') {
        fbid = response.authResponse.userID;
        var token = response.authResponse.accessToken;
    //  alert(response.authResponse.userID);
    //  alert(response.authResponse.accessToken);
    etc... 
```

令牌很好，但 ID 警报总是“未定义”，这看起来很奇怪，因为如果我正确，您需要 ID 来获取令牌？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T20:16:40.197

`FB.getLoginStatus`不返回用户的 Facebook ID，也不返回`signedRequest`字符串。它确实返回一个`accessToken`，然后您可以使用它通过 https://graph.facebook.com/me?access_token=[accessToken] 获取用户的 FB id。这将为您提供一个包含用户信息的 JSON 对象（如果`accessToken`有效）。

# c# - ContextMenuStrip 动态分配给下拉按钮项目 C# WINFORM

> ID：12829975
> 
> 赞同：0
> 
> 时间：2012-10-10T23:25:17.930
> 
> 标签：c#, winforms, user-interface, contextmenu, strip

我正在 WINFORMS 中构建 Web 浏览器。我`dropdown`在工具条中有一个按钮。的项目`dropdown`是在运行时从 XML 文件动态添加的。下拉按钮用于查看书签。我有一个`contextmenu`添加和删除书签选项。我看不到`contextmenuproperty`，因为`dropdownbutton items.`我需要在右键单击下拉按钮中的每个项目时显示上下文菜单。我什至找不到`mouseclick`项目的事件。因此没有`e.location`

```
//I have got these events do far (just handles the click)
    private void bookmarksDropDownButton2_DropDownItemClicked(object sender, ToolStripItemClickedEventArgs e)
            {
                tabControlBrowser.SelectedTab = tabControlBrowser.TabPages[tabControlBrowser.TabPages.Count - 1];
                getCurrentWebBrowser().Navigate(dictionary[e.ClickedItem.Text]);
                AddressComboBox1.Text = dictionary[e.ClickedItem.Text];
            } 
```

我在我的代码中以这种方式连接了事件

```
 foreach (ToolStripItem item in bookmarksDropDownButton2.DropDownItems)
            {
                item.MouseDown += new MouseEventHandler(item_MouseDown);
            }
    private void item_MouseDown(object sender, MouseEventArgs e)
        {
              BOOKcontextMenuStrip1.Show(e.Location);
              //this one pop's out the menu at the uppermost corner of the window.
        } 
```

![在此处输入图像描述](../Images/bc315f6a6e6c42d8ec57f0019ec3406e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T00:07:08.043

不幸的是，您不能将 a 连接到 a`ContextMenu`中的单个项目`ToolStrip`。您需要做的是在右键单击 DropDownButton 时将上下文菜单设置为`MouseDown`工具条本身的事件（检查哪个鼠标按钮）。

*   或者在这种情况下：

相反，您需要`MouseDown`为每个项目动态添加事件处理程序，以便您可以选择（悬停）实际项目。当一个项目被右键单击时，您将上下文菜单分配给工具条本身（您现在可以将单击的项目的 ID 存储在上下文菜单的 Tag 属性中）。

然后，在 ContextMenu`Closed`事件中，您从工具条 ( `.ContextMenuStrip=null`) 中删除菜单。

很抱歉，我现在没有 C# 示例。让我知道它是否足够清楚，在这种情况下，我将尝试添加一个示例。

# javascript - jQuery.validate，具有多个条件的表单

> ID：12829977
> 
> 赞同：2
> 
> 时间：2012-10-10T23:25:25.500
> 
> 标签：javascript, jquery, jquery-plugins, jquery-validate

***我有以下表格：***

![在此处输入图像描述](../Images/afad5fce887ada86ac86f20291c6e881.png)

***似乎很容易验证，但现在我有一些条件：***

*   至少一行`name`,`email`输入必须完成（按*完成*`form`按钮时不能为空）。

**   如果用户完成**1**、**2**或所有行`name`,`email`输入，则`form`必须验证用户在按下*完成*按钮时已完成的行。* 

 **（要知道，验证将在按下完成按钮时进行。这就是我删除实时验证的原因，请查看我帖子末尾的 jsFiddle 模板链接中的代码的第一行）。*

* * *

好吧，为了实现这一点，我的第一个想法是检测哪些`name`输入有文本。

然后使用文本捕获`name`输入并创建一个`jQuery.validate`实例来验证这些名称及其`email`输入。

问题是我不知道如何声明`jQuery.validate`my `form`，它只是验证用户已完成的行。考虑到用户可以按任何顺序完成行并随时清除它们，这似乎很难做到。这意味着验证必须更改并且以前的错误消息必须消失。

这就是我现在得到的：**[jsFiddle example](http://jsfiddle.net/oscarj24/fFD8m/1/)**，但看起来很乱，最好知道是否有一种方法`jQuery.validate`可以实现这种`form`验证。

*（我不确定我是否清楚自己要做什么，但是，如果不清楚，请发表评论并询问我）。*

* * *

***如果有人想提供帮助，我制作了这个模板：***

**[jsFiddle 模板](http://jsfiddle.net/oscarj24/FNcuJ/)**

* * *

***只是要知道，`html`可以修改，如果你们知道另一种方式或插件，只是建议它。***

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T02:43:30.863

我从修改 HTML 部分开始。我添加了类，但更重要的是，我在输入上添加了数据集。

```
<form id="inviteForm" action="" method="POST">
    <table>
        <tr class="sets set-1">
            <td>Name: <input data-set="1" class="input-name" name="name_1" type="text" value=""/></td>
            <td>E-mail: <input data-set="1" class="input-email" name="email_1" type="text" value=""/></td>
        </tr>
        <tr class="sets set-2">
            <td>Name: <input data-set="2" class="input-name" name="name_2" type="text" value=""/></td>
            <td>E-mail: <input data-set="2" class="input-email" name="email_2" type="text" value=""/></td>
        </tr>
        <tr class="sets set-3">
            <td>Name: <input data-set="3" class="input-name" name="name_3" type="text" value=""/></td>
            <td>E-mail: <input data-set="3" class="input-email" name="email_3" type="text" value=""/></td>
        </tr>
        <tr class="sets set-4">
            <td colspan="2"><input type="submit" value="Finish"/></td>
        </tr>
    </table>
</form>​ 
```

我还在 TR 上添加了课程。这是一个有用的技术。您可以使用 $(".sets") 调用所有 TR 或使用 $(".set-1") 调用特定的 TR。您将在下面看到为什么这很有用。

然后，我为规则声明了一个默认变量。

```
var defaultrules = {
        name: {
            required: true,
            minlength: 2,
            maxlength: 50,
            messages: {
                required: "*",
                minlength: jQuery.format("Min. {0} characters"),
                maxlength: jQuery.format("Max. {0} characters")
            }
        },
        email: {
            required: true,
            email: true,
            minlength: 5,
            maxlength: 150,
            messages: {
                required: "*",
                email: "Invalid format",
                minlength: jQuery.format("Min. {0} characters"),
                maxlength: jQuery.format("Max. {0} characters")
            }
        }
    } 
```

最后，我听取了改变的意见。当输入改变时，我只是将规则添加到验证中

```
$("#inviteForm input").on("change", function() {
        var ele = $(this);

        // Get the set!
        cur_set = ele.data("set");

        // Is it filled? 
        if (ele.val().length > 0) {
            // Add the rules to the current set, to the corresponding inputs
            $(".set-"+cur_set).find(".input-name").rules('add', defaultrules.name)
            $(".set-"+cur_set).find(".input-email").rules('add', defaultrules.email)
        }
    }) 
```

这是工作的jsFiddle：http: [//jsfiddle.net/maktouch/DC8eJ/1/](http://jsfiddle.net/maktouch/DC8eJ/1/)*

# lucene.net - Lucene .NET 死了吗？

> ID：12829981
> 
> 赞同：2
> 
> 时间：2012-10-10T23:25:42.350
> 
> 标签：lucene.net

[http://lucene.apache.org/lucene.net/是 404'ing 并且在](http://lucene.apache.org/lucene.net/)[https://svn.apache.org/repos/asf/incubator](https://svn.apache.org/repos/asf/incubator)的孵化器 SVN 上找不到它。

是什么赋予了？

# php - 调用未定义的方法 My_email::from()

> ID：12829987
> 
> 赞同：-1
> 
> 时间：2012-10-10T23:26:16.853
> 
> 标签：php

我在创建测试库以发送电子邮件时遇到问题。这是我的代码：

```
class My_email {

    public function my_send_mail() {

        $CI =& get_instance();
        $CI->load->library('email');

        $CI->email->from('xxx@xxx.com', 'Sender name');
        $CI->email->to('yyy@yyy.com');
        $CI->email->subject('Test');
        $CI->email->message('Testing');

        return $CI->email->send();

    }
 } 
```

我得到错误：

```
Call to undefined method My_email::from() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T23:30:17.733

该错误为您出现，因此您可以阅读它并解决问题。**阅读**你得到的错误，这就是它存在的原因：

调用**未定义**的方法

你必须在使用它之前定义它，就在你的`My_Email`课堂上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T23:36:54.940

该方法未定义，如果它是来自另一个类的方法，并且您想将它与此类使用`extends email`或您想要的任何东西一起使用。

这将使该类继承扩展类的所有内容。

实际上，不，首先，您的方法 from 甚至都不是问题，但是您尝试调用方法和我们一无所知的类....

# c++ - C++ - Coloured Pixels

> ID：12829991
> 
> 赞同：0
> 
> 时间：2012-10-10T23:26:50.537
> 
> 标签：c++, colors, interpolation, pixels

I'm new to C++ and I'm trying to create an 500x500 pixel RGB image. The image should be filled by linear interpolation of four colours, each defined for one of the corners so I should have something like:

```
Vec3b ul( 255, 0, 0 ); //upper left corner
Vec3b ur( 0, 255, 0 ); //upper right corner
Vec3b bl( 0, 0, 255 ); //bottom left corner
Vec3b br( 255, 0, 255 ); //bottom right corner 
```

The end result should look like this:

![enter image description here](../Images/a52238306a880c24c2a759ad12725812.png)

The program then displays the image in a window etc etc... I can do that stuff but I just need to figure out how to put the colours in the image. My code so far is this:

```
#include <QtCore/QCoreApplication>
#include <opencv/cv.h>
#include <opencv/highgui.h>
#include <iostream>
#include <string>
#include <sys/stat.h>

using namespace cv;
int main()
{

    Mat image;
    image.create( 500, 500, CV_8UC3);
    //upper left corner
    Vec3b ul( 255, 0, 0 );
    //upper right corner
    Vec3b ur( 0, 255, 0 );
    //bottom left corner
    Vec3b bl( 0, 0, 255 );
    //bottom right corner
    Vec3b br( 255, 0, 255 );

    namedWindow("Colored Pixels");
    imshow("Colored Pixels", image);
    // shows image for 5 seconds
    waitKey(5000);
    return 0;
} 
```

and the output is

![enter image description here](../Images/93d24682464de35a357f0fdcda53cd33.png)

I'd be glad to hear your suggestions!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T01:08:39.650

It sounds like what you're really asking is 'How do I set elements of an OpenCV Mat instance that represents an image?' A little Googling produces this [link](http://opencv.willowgarage.com/documentation/cpp/basic_structures.html), which documents the Mat interface. It includes a function with this signature:

> template _Tp& Mat::at(int i, int j)

So, you should be able to make calls like image.at(100,250) to get a reference to the pixel data for the pixel at 100,250\. Then, assign pixel data to the pixel.

As for how to assign the pixel data in the form the matrix understands... the following is also from the above link:

> If you are familiar with OpenCV CvMat ‘s type notation, CV _ 8U ... CV _ 32FC3, CV _ 64FC2 etc., then a primitive type can be defined as a type for which you can give a unique identifier in a form CV_{U|S|F}C . A universal OpenCV structure able to store a single instance of such primitive data type is Vec.

So, it sounds like an OpenCV Vec of type int and size 3 might be compatible. Something like:

```
image.at(i,j) = Vec<int,3>(r,g,b) 
```

is hopefully fairly close to what you're looking for.

Please note that I haven't used OpenCV and I haven't tested this code; this is just what I've gleaned from the linked documentation.

# r - 用重复数据重塑数据框

> ID：12829995
> 
> 赞同：9
> 
> 时间：2012-10-10T23:27:11.467
> 
> 标签：r, reshape2

我有什么应该是一个简单的重塑问题，但我无法弄清楚。我的部分数据如下所示：

```
foo <- structure(list(grade = c(3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 
3, 3, 4, 4, 5, 5, 6, 6), var.type = structure(c(3L, 2L, 3L, 2L, 
3L, 2L, 3L, 2L, 3L, 2L, 3L, 2L, 3L, 2L, 3L, 2L, 3L, 2L, 3L, 2L
), .Label = c("Raw Score", "SE", "SS"), class = "factor"), var.val = c(120L, 
47L, 120L, 46L, 120L, 46L, 120L, 47L, 120L, 46L, 120L, 46L, 120L, 
12L, 120L, 14L, 120L, 16L, 120L, 20L)), .Names = c("grade", "var.type", 
"var.val"), row.names = c(2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 
11L, 12L, 13L, 15L, 16L, 17L, 18L, 19L, 20L, 21L, 22L), class = "data.frame") 
```

或者

```
 grade var.type var.val
2     3       SS     120
3     3       SE      47
4     4       SS     120
5     4       SE      46
6     5       SS     120
7     5       SE      46 
```

我想让它看起来像这样：

```
grade    SS    SE
3        120   47
4        120   46
5        120   46 
```

等等。我已经尝试过 reshape、cast 和 dcast，就像在这个线程中一样：

[重塑数据集](https://stackoverflow.com/questions/10130579/reshaping-dataset)

但似乎没有任何效果。我真的很感激一些帮助。TIA。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-11T00:05:27.797

如果你想重塑并且你有重复，你需要给每一对一个唯一的 id：

```
foorle <- rle(foo$grade)
fooids <- rep(seq_len(length(foorle$values)), times=foorle$lengths)

fooids
 [1]  1  1  2  2  3  3  4  4  5  5  6  6  7  7  8  8  9  9 10 10 
```

现在您将能够正确使用 reshape ：

```
idfoo <- cbind(id=fooids, foo)

library(reshape)
dcast(idfoo, id+grade~var.type, value.var="var.val")

   id grade SE  SS
1   1     3 47 120
2   2     4 46 120
3   3     5 46 120
4   4     6 47 120
5   5     7 46 120
6   6     8 46 120
7   7     3 12 120
8   8     4 14 120
9   9     5 16 120
10 10     6 20 120 
```

编辑：请注意我假设您的数据是有序的，否则您将无法区分重复项。如果不是，您可以随时使用`order`它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-11T03:58:39.597

```
library(plyr)
library(reshape2)
# First we add a grouping variable to deal with the duplicates
foo <- ddply(foo, .(grade, var.type), function(x) { x$group <- 1:nrow(x); x })
dcast(foo, grade + group ~ var.type, value.var= "var.val")[-2]

 grade SE  SS
1      3 47 120
2      3 12 120
3      4 46 120
4      4 14 120
5      5 46 120
6      5 16 120
7      6 47 120
8      6 20 120
9      7 46 120
10     8 46 120 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-11T00:08:12.630

它不如 reshape 漂亮，但

```
data.frame(grade = foo[2 * (1:(nrow(foo)/2)),]$grade, 
           SS =  foo[foo$var.type == "SS", ]$var.val, 
           SE =  foo[foo$var.type == "SE", ]$var.val ) 
```

生产

```
 grade  SS SE
1      3 120 47
2      4 120 46
3      5 120 46
4      6 120 47
5      7 120 46
6      8 120 46
7      3 120 12
8      4 120 14
9      5 120 16
10     6 120 20 
```

为此，您必须假设数据成对出现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T16:09:06.527

如果您**没有**任何重复项，这将很好地工作：

```
ss <- subset(foo, var.type=='SS')
se <- subset(foo, var.type=='SE')
ss <- data.frame(grade=ss$grade,SS=ss$var.val)
se <- data.frame(grade=se$grade,SE=se$var.val)
bar <- merge(ss,se,by='grade') 
```

# database - Rails 创建没有迁移的表

> ID：12829996
> 
> 赞同：8
> 
> 时间：2012-10-10T23:27:13.777
> 
> 标签：database, ruby-on-rails-3, migration, create-table, rake-task

我有一个 rails 应用程序，它有一个特定的表，其中数据甚至结构是在 rails 和 ruby​​ 之外动态生成的。这是设计使然，它是一个特殊的表，其中结构独立于其余活动记录和关系。在它上面工作的模型也是原子的。同样都是设计的，有目的的。我不想要这个表的特定结构，这意味着每次初始化表时列名和列数都会改变。如果表结构发生更改，我可以管理对模型类的更改。

我的问题是 rails 迁移过程似乎妨碍了我，我不想在迁移和回滚之间来回走动，只是为了获得这个单表重置的状态。

我正在寻找的行为实际上是每次我“生成”该表的数据时，我想删除可能已经存在的表（在所有环境中：生产、开发和测试）。

有没有明确的方法可以绕过迁移过程？或者创建一个独立于应用程序中其他迁移序列的特殊迁移？

整个数据库不是一次性的，但这张表是一次性的。

关于如何实现这种行为的想法？

Rails 3、PostgreSQL 数据库、git 版本控制、heroku 托管

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T03:53:55.337

我认为简单的答案是“不要使用迁移”——它们旨在帮助您相对优雅地扩展静态数据库模式。除了生成/执行数据库的数据定义语言 (DDL) 之外，迁移还做了很多事情——它知道如何前进和后退，通过源代码 ( `schema.rb`) 和数据（在`schema_migrations`表中）之间的链接知道如何确定哪个需要运行迁移，等等。您所需要的只是执行 DDL 的部分（毕竟，这只是一种 SQL）。

并且至少其中一部分[在 TableDefinition API](http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/TableDefinition.html)中。您可能需要的所有基础设施似乎都已存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T04:04:01.123

您可以将其设置为包含用于构建表的 SQL/rails 命令的 rake 任务（听起来像您正在使用它），类似于使用`rake db:seed`

# apache-flex - 哪个事件触发了回调函数

> ID：12829997
> 
> 赞同：0
> 
> 时间：2012-10-10T23:27:15.640
> 
> 标签：apache-flex, events, actionscript

我有一个 FlexMouseEvent.MOUSE_DOWN_OUTSIDE 事件，用于与触发弹出窗口的 LinkBut​​ton 的单击事件相冲突的弹出窗口。本质上，我希望我的标签的单击事件在每次单击时像开关一样打开/关闭弹出窗口。关闭此弹出窗口的另一种方法是通过 FlexMouseEvent.MOUSE_DOWN_OUTSIDE。

这两个冲突特别是当 FlexMouseEvent.MOUSE_DOWN_OUTSIDE 在弹出触发链接按钮上单击时。

我在想的是，如果在 LinkBut​​ton/ 上单击该事件，我将停止传播该事件，但我该怎么做。本质上，如何在我的回调函数中检查实际触发的事件（元素有多个事件侦听器，因此它不是故障安全的）

这里有一些代码可以细细琢磨：

```
element.addEventListener(FlexMouseEvent.MOUSE_DOWN_OUTSIDE, callBackFunction, false, 0, true);  
element.addEventListener(AnotherEvent, callBackFunction, false, 0, true); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T00:29:14.223

这很简单。每个事件都有一个 currentTarget 属性，它是触发该事件的对象。您可以使用 e.currentTarget 来确定用户单击了哪个对象。

```
private function mouseDownOutside(e:FlexEvent = null):void{
    if ( e.currentTarget == obj ) {
         //do something
    }
} 
```

如果您需要它更通用或对象超出范围，您还可以进行简单的“是”检查。

```
if ( e.currentTarget is DataType ) {
    //do something
} 
```

当您在循环中创建大量对象时，这也很有帮助。一旦你离开循环，它们就会超出范围，所以你不能在之后真正调用它们。因此，假设您创建了一个包含 50 个缩略图的画廊，并且您想要加载用户单击的缩略图的全屏版本。在您的实例化循环中，您将`name`拇指的属性设置为循环中的迭代（通常是 var i），然后您可以使用`(e.currentTarget as DisplayObject).name`它与更大的图像相关联。

# objective-c - iOS：用户界面定制、设计指南/用户友好性和面向未来

> ID：12829998
> 
> 赞同：1
> 
> 时间：2012-10-10T23:27:15.803
> 
> 标签：objective-c, ios, uinavigationcontroller, uitabbarcontroller

最近随着 iOS 6 和 iPhone 5 的发布，屏幕尺寸有所不同，我从设计师和开发人员的角度对 UI 定制有一些想法，并有一些疑问。尤其是阅读后：

[http://www.raywenderlich.com/21703/user-interface-customization-in-ios-6](http://www.raywenderlich.com/21703/user-interface-customization-in-ios-6)

我的主要疑问如下。

**1\. UI 定制与 iOS 设计指南和用户友好性**

iOS 有自己的标准/默认 UI 设计（例如警报视图、按钮、标签栏等），它们都或多或少有自定义的能力，但它们也有可以自定义的限制，例如，你可以更改某些 UI 元素的色调颜色，但不是完整的纯色背景颜色或背景图像，我知道其中一些在 iOS 6 中已更改。

我相信 Apple 在设计 UI 时，会努力让它变得用户友好，比如每个标准 UI 组件的大小，它们之间的距离（用于界面构建器），bla bla ...

**问题 1**，在不违反 iOS 设计指南的情况下，我可以在尺寸和颜色（可能还有形状）方面自定义多少，以保持一定程度的用户友好性？例如，我的一个应用程序使用较小（即不太高）的标签栏，以便在一个屏幕上显示更多内容，并且标签栏的背景也是自定义的，具有实心的标签栏主体和小阴影标签栏的顶部。

**2\. UI 定制 vs 技术限制**

一些 UI 自定义是简单可行的，而有些则需要一些变通方法甚至破解，而其余的则根本不可能。

让我使用之前的标签栏示例，如果我只是使用较小的标签栏（即设置标签栏高度更小），我在 iOS 6 中没有尝试过，但在所有以前的版本中，我只会看到一个黑色区域在标签栏上方，对于标准高度标签栏的空间，我需要以编程方式更改视图的大小以填充该区域，这需要一些时间来实现和测试；此外，在 iPhone 5 中更改屏幕尺寸也是一个麻烦，因为使用手动尺寸设置而不是自动调整大小。当导航栏设置为非标准尺寸时也会发生这种情况。

那么**问题2**：在设计UI时我应该考虑什么，以确保设计的技术实现能够面向未来，从表面上我可以直接看到两点：自定义颜色但不要改变组件的大小，如果该组件有标准尺寸并且不能轻易更改。

**3\. 技术上的未来证明**

可以有不止一种方法来实现某些东西，而其中一些是面向未来的，而另一些则不是。

让我以导航栏为例，我们使用了一个非标准尺寸的导航栏，它有一些额外的按钮，比如说它是 80pt 高，那么我们必须在每个视图控制器中创建一个保持视图，并将其他视图作为子视图在holding view中，holding view的frame从36开始为(80-standard 44)=36，这在创建新的view controller时需要做很多工作，因为我们必须处理用户打电话的情况并且状态栏被扩展。

问题 3：我们应该坚持使用 iOS SDK 并且不应该超出它允许的范围，这是否正确（或应该强制）？例如，当您滚动 UIWebView 时，当您将其滚动到负数或超过内容大小的偏移量时，您会看到一些暗影，为了将其移除，您必须遍历 UIWebView 中的所有子视图并移除 UIImageView，如描述于：

[删除 UIWebView 阴影？](https://stackoverflow.com/questions/1074320/remove-uiwebview-shadow)

这可行，但看起来显然不太好，所以我们是否应该避免所有这些自定义，并在进行 UI 设计时牢记这些？

很抱歉这篇冗长的帖子，但如果有人能回答甚至讨论这些问题，我们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T09:43:19.553

我推荐[WWDC 2012 在线免费视频](https://developer.apple.com/videos/wwdc/2012/)，尤其是标题为

*   'Session 221 - iOS 用户界面设计'
*   'Session 216 - iOS 上的高级外观定制'

这可能是你 2 小时的时间，但我发现它是值得的。