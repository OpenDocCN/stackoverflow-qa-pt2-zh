# StackOverflow 问答 13112000-13112999

# java - DBUnit 中 XML 数据集的路径

> ID：13112004
> 
> 赞同：3
> 
> 时间：2012-10-28T19:02:15.977
> 
> 标签：java, jakarta-ee, integration-testing, dbunit

我正在使用 DBUnit 进行集成测试，并且能够创建 XML 数据集。我在资源文件夹（标准 Maven 项目）中添加了 dataset.xml 文件。但是，当我试图说它`new File("dataset.xml");`没有找到该文件并打印出它试图将我写的内容与我的 glassfish 域文件夹的路径结合起来时。我尝试了一条绝对路径并且它有效……但这不是正确的做法吗？

```
FlatXmlDataSetBuilder builder = new FlatXmlDataSetBuilder();
IDataSet dataSet = builder.build(new File("/home/dude/Projects/Java/SecretProject/Code/Backend/SuperApp/src/test/resources/dataset.xml")); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-12T23:33:08.837

我在 IntelliJ 项目中遇到了同样的问题......

我正在通过注释使用文件导入

```
@DatabaseSetup("UserServiceTest.xml") 
```

并在资源中放置与 java 包树相同的东西解决了我的问题，即：

```
src
  -main
    -test
      -java
        -com/site/service
          -userServiceTest
      -resources 
        -com/site/service
          -UserServiceTest.xml 
```

# django - 将当前用户 id 保存在 django 模型中

> ID：13112008
> 
> 赞同：1
> 
> 时间：2012-10-28T19:02:28.963
> 
> 标签：django, django-models, django-forms

我是 Django 的新手，我到处都找到了，但我还没有找到我要找的东西，这似乎很容易。当用户上传新轨道时，我需要在模型轨道中保护当前用户 ID。我只发现了这个：

```
class Track(models.Model):
     ...
     usuari = models.ForeignKey(User) 
```

但这会导致用户在不同的用户之间进行选择。我想在隐藏的营地或其他地方自动保护当前用户。

```
class TrackForm(forms.ModelForm):
    class Meta:
        model = Track

def pujar_track(request):
if request.method=='POST':
    formulari = TrackForm(request.POST, request.FILES)
    if formulari.is_valid():            
        formulari.save()
        return HttpResponseRedirect('/')
else:
    formulari = TrackForm()

return render(request,'trackForm.html',
    {'formulari':formulari}) 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T19:16:14.567

这是`instance`参数有用的地方。

```
# form
class TrackForm(forms.ModelForm):
    class Meta:
        model = Track
        exclude = ('useri',)

# view
@login_required()
def pujar_track(request):
    track = Track(usuari=request.user)

    if request.method=='POST':
        formulari = TrackForm(request.POST, request.FILES, instance=track)
        if formulari.is_valid():            
            formulari.save()
            return HttpResponseRedirect('/')
    else:
        formulari = TrackForm(instance=track)

    return render(request,'trackForm.html',
        {'formulari':formulari}) 
```

因此，用户将被预先填写，并且该字段不会显示给用户。

完整的[文档](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/)在这里。

# django - 删除上传文件失败

> ID：13112009
> 
> 赞同：1
> 
> 时间：2012-10-28T19:02:34.517
> 
> 标签：django, file-upload, delete-file

我想删除与文件字段关联的文件但它不起作用。

请问可以修吗？

## 模型.py

```
class Picture(models.Model):

    file = models.FileField(upload_to="pictures")
    slug = models.SlugField(max_length=50, blank=True)

    def __unicode__(self):
        return self.file

    def getFileName(self):
        return self.docfile.name 
```

## 视图.py

```
def delete(self, request, *args, **kwargs):
    """
    This does not actually delete the file, only the database record.
    """
    self.object = self.get_object()
    path = "/media/pictures" + '/' + self.object.name
    #path = MEDIA_ROOT + '/' + self.object.name
    #path = MEDIA_ROOT + '/' + self.object.getFileName()
    self.object.delete()
    os.remove(path) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T19:11:17.113

`FileField`您可以使用api删除文件对象：

```
Picture.objects.get(...).file.delete() 
```

这将使用[存储](https://docs.djangoproject.com/en/dev/ref/files/storage/)API 来删除文件。这样做的好处是，即使您想将存储切换到不同的系统（例如 Amazon S3），这种方法也有效。

# jquery - 尝试在 $.each 项目之前和之后添加 div，同时包括结果本身

> ID：13112013
> 
> 赞同：1
> 
> 时间：2012-10-28T19:03:10.450
> 
> 标签：jquery, append, each, prepend

我的 JS 是

```
b = "form#recipeSearch";
c = $(b).attr('action') + '?r';
f = "#searchResults";

var opentemplate = '<div class="row">';
var closetemplate = '</div>';

perPageLimit = response.max;
totalResults = response.total;

o = 0; // global counter

$.each(response.items, function(i,item) {

    var template = '                <div class="col3 boxee wrappedImg" id="' + item.uid + '">'
                 + '                    <div class="recipe-info">'
                 + '                        ' + item.nutritional.calories + ' CAL'
                 + '                        ' + item.rating 
                 + '                    </div>'
                 + '                    <a href="' + item.link + '" rel="popover" title="' + item.title + '" data-content="' + item.description + '"><img src="' + item.image + '" alt="' + item.title + '"></a>'
                 + '                </div>';      

    if(o == 0){ // if start of rows display open template
        $(f).append(opentemplate); 
    }        

    $(f).append(template); // inject template

    if(o == 4){ // if end of rows close template
        $(f).append(closetemplate); 
        o = 0; // reset global counter
    }  

    if(o == item.length - 1){ // if last item close the div
        $(f).append(opentemplate);
    }

    o++; //plus global counter
}); 
```

目前显示为：

```
<div class="row"></div> <!-- ONLY ONCE :( -->
<div class="col3 boxee wrappedImg"></div>
<div class="col3 boxee wrappedImg"></div>
<div class="col3 boxee wrappedImg"></div>
<div class="col3 boxee wrappedImg"></div>
<div class="col3 boxee wrappedImg"></div>
<div class="col3 boxee wrappedImg"></div>
<div class="col3 boxee wrappedImg"></div> 
```

等等...

**我在哪里寻找它**

```
<div class="row">
    <div class="col3 boxee wrappedImg"></div>
    <div class="col3 boxee wrappedImg"></div>
    <div class="col3 boxee wrappedImg"></div>
    <div class="col3 boxee wrappedImg"></div>
</div> 
```

**然后以此类推每4个项目，直到它到达末尾然后放</div>**

现在我试图让代码如果 i = 0 然后显示行标记的开头，然后在 4 个项目之后，关闭 div，然后继续直到他们得到最终结果，如果它是显示结束的结尾分区。

任何建议，我已经在这一段时间了..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T19:15:13.630

这对我来说似乎是一个问题：

```
if(o == item.length - 1){ // if last item close the div
        $(f).append(opentemplate);
} 
```

o 应该与 response.items.length 而不是 item.length 进行比较。

告诉我我是否错了？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T19:27:24.380

看看这个：http: [//jsfiddle.net/KwNFN/4/](http://jsfiddle.net/KwNFN/4/)

在`.each()`我创建了一个输出字符串之前，我`append`在字符串完成之前不会这样做。这对于性能也应该稍好一些，因为您不会（错误地）在每个元素之后更新 DOM。

您也不需要全局计数器，`i`就足够了。

最终代码将如下所示：

```
output = "";

$.each(response.items, function(i,item) {
    var template = '<div class="col3 boxee wrappedImg" id="item.uid">'
                 + '  <div class="recipe-info">'
                 + '  your template goes here'
                 + '  </div>'
                 + '</div>';

    if(i%4 == 0){ // if start of rows display open template
       template = opentemplate + template;
    }
    // if end of row, or if last item, close the div
    else if(i%4 == 3 || i == response.items.length-1 ){ 
        template = template + closetemplate;
    }  

    output = output + template; // update template
});

$(f).append(output); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T19:23:07.730

```
o = 0; // global counter 
```

为什么你需要它？

```
function(i,item) 
```

`i`- 集合中项目的索引`response.items` 并且`item`是当前项目

```
$(f).append(opentemplate); 
$(f).append(closetemplate); 
```

此代码更新 DOM，您无法插入`<div class="row">`，然后经过几次迭代添加`</div>`

**添加：**

```
var template;
$.each(response.items, function(index, item)
{
    if(index%4 == 0)
    {
        template = '<div class="row">';
    }

    template += '<div class="col3 boxee wrappedImg">...</div>';      

    if(index == response.items.length - 1 || index%4 == 3){
        $(f).append(template + '</div>');
    }
}); 
```

# android - Android Spinner 在后面的代码中获取字符串的位置

> ID：13112020
> 
> 赞同：1
> 
> 时间：2012-10-28T19:03:40.927
> 
> 标签：android, spinner

我有一个微调器，我像这样捕获 onClick：

```
public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
        position = pos;
    }

    public void onNothingSelected(AdapterView<?> arg0) {
    } 
```

我想检查例如 String`String example = "example"`是否在 Spinner ItemList 中并获取它的位置，这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T19:12:44.320

和

```
 spinner.getSelectedItem().toString(); 
```

您可以获得当前选择的文本。和

```
spinner.getSelectedItemPosition(); 
```

你可以得到当前的位置。您可以像这样比较选定的字符串：

```
if(spinner.getSelectedItem().toString().equals("example")){
//do something
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-22T12:20:49.747

```
for (int i = 0; i < adapter.getCount(); i++) {
    if (mSpinner.getItemAtPosition(i).equals(MY_STRING)) {
        mSpinner.setSelection(i);
        break;
    }
} 
```

如果您希望在微调器上设置一个项目 init`onNothingSelected`在这里对您没有帮助，因为仅当从可用项目列表中删除所选项目时才会调用此回调。

> 选择从此视图中消失时要调用的回调方法。例如，当触摸被激活或适配器变空时，选择可能会消失。

[文档](https://developer.android.com/reference/android/widget/AdapterView.OnItemSelectedListener.html#onNothingSelected%28android.widget.AdapterView%3C?%3E%29)

# ipad - MonoTouch - OpenGL 面板/分屏？

> ID：13112023
> 
> 赞同：1
> 
> 时间：2012-10-28T19:04:04.720
> 
> 标签：ipad, opengl-es, xamarin.ios

我需要在与某些控件、Web/文本内容等相同的屏幕上显示 OpenGL“面板”。有什么建议吗？理想情况下，我有一个 OpenGL 控件，它可以拖放到 Interface Builder 中的表单上，并以与按钮等相同的方式进行操作。

我想提供标准控件（如按钮、手势控制等）的良好 OpenGL UI 工具箱也可以工作。

目前我能想到的最好的类比是在 iPad 屏幕的顶部 1/3 处呈现 3D 内容，在底部呈现相关的文本和文本相关的导航控件，就像他们对一些教科书所做的那样Apple TV 广告。

我发现[了这个类似的问题](https://stackoverflow.com/questions/6763577/programmatically-defined-view-in-interface-builder)，但不是很清楚答案的含义。（这是我的第一个非“Hello World”iOS 应用，所以有些术语不熟悉。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:16:22.140

您应该能够使用`iPhoneOSGameView`OpenGL 渲染任何 3D 内容。

这是一个使用它的例子：[https ://github.com/xamarin/monotouch-samples/blob/master/GLPaint-GameView/PaintingView.cs](https://github.com/xamarin/monotouch-samples/blob/master/GLPaint-GameView/PaintingView.cs)

我认为您应该能够将其中一个视图放置`UISplitViewController`在 iPad 上，或者仅放置在屏幕的 1/3 上。例如，这就是您在邮件应用程序中看到的分屏控件。

此外，要使用 Interface Builder 中的类，您只需要：

```
[Register("MyClass")]
class MyClass { public MyClass(IntPtr handle) : base(handle) { } } 
```

所以你必须注册它，并包含 IntPtr 构造函数。

祝你好运，我还没有找到你想要做什么*的例子。*

# c++ - 使用 fstream 覆盖文件中的某些文本并删除文件的其余部分

> ID：13112026
> 
> 赞同：3
> 
> 时间：2012-10-28T19:04:17.110
> 
> 标签：c++, file, fstream

我正在尝试编写一个使用 fstream 读取文件的程序，然后重写一些文本并删除文件的其余部分这是我想要做的代码

```
#include<iostream>
#include<fstream>

using namespace std;
int main(int argc, char **argv){
    fstream *binf;
    fstream someFile("t.txt", ios::binary|ios::out|ios::in);
    int i;
    for(i=0;i<3;i++){
        char c;
        someFile.seekg(i);
        someFile.get(c);
        cout<<"c:"<<c<<endl;
    }
    someFile.seekp(i++);
    someFile.put("Y");
    someFile.seekp(i++);
    someFile.put("Y");
    //Delete the rest of the file
    return 0;
} 
```

请注意以下用于打开文件的标志

```
ios::in Open for input operations.
ios::out    Open for output operations.
ios::binary Open in binary mode.
ios::ate    Set the initial position at the end of the file. If this flag is not set to any value, the initial position is the beginning of the file.
ios::app    All output operations are performed at the end of the file, appending the content to the current content of the file. This flag can only be used in streams open for output-only operations.
ios::trunc  If the file opened for output operations already existed before, its previous content is deleted and replaced by the new one. 
```

我尝试了这些的许多组合，但没有一个可以帮助我做我想做的事情，我想阅读文件，直到找到文本。如果我找到我想要的文本，我会覆盖它并删除文件的其余部分。因此，应将文件重新调整为较小的文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T19:23:43.360

你不能用单个流对象来做到这一点。

可能的解决方案：

关闭您的文件并调用 truncate 函数：

```
 #include <unistd.h>
 int ftruncate(int fildes, off_t length);
 int truncate(const char *path, off_t length); 
```

MS Windows 版本的截断是`_chsize`- 请参阅[http://msdn.microsoft.com/en-us//library/dk925tyb.aspx](http://msdn.microsoft.com/en-us//library/dk925tyb.aspx)

```
int _chsize( 
   int fd,
   long size 
); 
```

或者以只读方式打开您的文件，读取/替换某些字符串流，然后将所有内容放入您的文件中，这次打开以进行覆盖：

```
fstream someFile("t.txt", ios::binary|ios::in);
stringstream ss;
// copy (with replacing) whatever needed from someFile to ss 
someFile.close();
someFile.open("t.txt", ios::binary|ios::out|ios::trunc);
someFile << ss.rdbuf();
someFile.close(); 
```

# javascript - Firebug 发现不存在的错误

> ID：13112030
> 
> 赞同：3
> 
> 时间：2012-10-28T19:04:36.970
> 
> 标签：javascript, html, firebug

```
<iframe id="player" src="http://www.youtube.com/embed..."></iframe> 
```

Firebug - 控制台选项卡：

```
Error: Permission denied to access property 'toString' 
```

我搜索整个站点 (Ctrl+F) 并且“toString”不存在。
当我删除 iframe - 错误消失。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T19:06:30.540

与 Flash 播放器相关的浏览器错误。你可以忽略它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-28T19:08:51.370

与其他答案一样，该错误存在于 iframe 内的页面上。如果您对究竟是什么导致错误感到好奇...浏览到源中的该页面，然后进行搜索。

# c# - 视图中的 MVC4 模型问题：在调试模式下模型缺少详细信息

> ID：13112035
> 
> 赞同：1
> 
> 时间：2012-10-28T19:04:56.303
> 
> 标签：c#, asp.net-mvc, entity-framework, view, ef-code-first

我遇到了一个非常奇怪（也很烦人）的问题：在 MVC 4 Web 应用程序中，同时从数据库加载数据并在视图中的模型上使用 foreach：

```
@foreach (var meeting in Model) 
```

我在方法的开始有一个断点并检查对象会议我发现它错过了一些数据（参考其他表）。如果我在会议中打开 (+) 其他对象，则会出现丢失的数据。

为什么？

谢谢！

这是我的控制器方法：

```
 public ActionResult GetMeetingMR(int id = 0)
    {
        var meetingPurpose = db.MeetingPurposes.ToList();
        ViewBag.MeetingPurpose = new SelectList(meetingPurpose, "MeetingPurposeID", "MeetingPurposeName");
        ViewBag.MRID = id;
        List<Meeting> meetings = (db.MortgageRequests.Find(id)).Meetings.ToList();
        return View(meetings);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T19:59:58.723

在您的问题中包含您的标题，我猜您在没有附加调试器的情况下（还）没有遇到问题。
正如其他人所评论的那样，这是由于`LazyLoading`.
有时可能会出现此问题，因为在渲染`View`实体容器时正在处理，很可能是因为它是由调用容器的析构函数的 GarbageCollector 收集的。

如果您希望访问您的实体，您`View`可以`Include`使用`ObjectSet`. 假设`MeetingPurposes`有一个关联`EntitySet`的`Dates`：如果您希望将它们包含在加载操作中，您可以执行以下操作： `db.MeetingPurposes.Include("Dates").ToList();`

```
public ActionResult GetMeetingMR(int id = 0)
{
    //Load the MeetingPurposes including their dates
    var meetingPurpose = db.MeetingPurposes.Include("Dates").ToList();
    ViewBag.MeetingPurpose = new SelectList(meetingPurpose,
                                            "MeetingPurposeID",
                                            "MeetingPurposeName");
    ViewBag.MRID = id;
    List<Meeting> meetings = (db.MortgageRequests.Find(id)).Meetings.ToList();
    return View(meetings);
} 
```

如果您希望这样做，`Meetings`并且 Meetings 有你们中的一个`EntitySet`人，`Dates`可以这样做：

```
public ActionResult GetMeetingMR(int id = 0)
{
    var meetingPurpose = db.MeetingPurposes.ToList();
    ViewBag.MeetingPurpose = new SelectList(meetingPurpose,
                                            "MeetingPurposeID",
                                            "MeetingPurposeName");
    ViewBag.MRID = id;
    var meetings = (from mee in db.Meetings.Include("Dates")
                    join mga in dbo.MortgageRequests.Where(m => m.Id == id)
                    on mee.MortgageRequestID equals mga.ID
                    select mee).ToList();
    return View(meetings);
} 
```

不太确定您的`Find`扩展方法是什么，所以我使用了`Where`on `MortgageRequests`.

# python - 改进我的扫雷求解算法

> ID：13112036
> 
> 赞同：13
> 
> 时间：2012-10-28T19:05:16.170
> 
> 标签：python, artificial-intelligence, minesweeper

我已经在 Python 中实现了一种用于解决游戏“扫雷”的算法。该程序的工作原理如下：

假设求解器单击了一个名为“a”的正方形。举例来说，让这样显示的数字等于 2。正方形的尚未点击的邻居（再次作为示例）命名为“b”和“c”。然后程序将正方形与表达式 [2, {'b', 'c'}] 相关联，并从所有其他表达式中删除 'a'。通过在两种情况下对这些表达式进行成对简化来推断哪些正方形是地雷，哪些不是地雷。

*   如果一个表达式中的平方是另一个表达式的平方的子集：

    ```
    [2, {'a', 'b', 'c'}], [1, {'a', 'b'}] -> [1, {'c'}], [1, {'a', 'b'}] 
    ```

*   如果一个表达式中的所有方格都被确定为地雷：

    ```
    [2, {'a', 'b'}], [1, {'b', 'c'}] -> [2, {'a', 'b'}], [0, {'c'}] 
    ```

然后，对于某个表达式`X`，如果`X[0] == 0`，我们可以自由点击所有在 中命名的方格`X[1]`，如果`X[0] == len(X[1])`，那么我们可以标记它们。

然而，我正在努力确定要简化*的*表达式对。我目前的做法是维护一堆方格；每当单击正方形或成功简化其表达式时，都会将其添加到堆栈中（如果尚未存在）。当从堆栈中弹出一个正方形时，会尝试在其表达式 ( `X`) 和任何其他表达式之间进行简化，`Y`例如`X[1] & Y[1] != set()`. 当堆栈耗尽时，算法终止。然而，目前，虽然这工作得很好，但它不能正确解决所有明确的配置，并且如果我用队列替换堆栈或使用某种算法来确定要弹出哪个方块，它在给定板上的性能会发生显着变化！

对于我的方法的任何先例或潜在探索途径，我将非常感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T07:48:38.567

几年前我写了一个扫雷求解器，但可惜我似乎从那以后丢失了代码。我记得的是，这是一种蛮力方法，它编译了一组潜在的地雷，而不是像你正在做的那样把组合打包。

我相信你正在使用的算法更有能力。如果它完全充满或没有地雷，或者它是另一个条件的子集，您的方法可以“解决”一个条件。但是，有一些扣除是无法处理的。例如，考虑这个小的 7x2 板，其中`a`通过`h`瓷砖是未知的：

```
a 2 1 2 1 2 i
b c d e f g h 
```

您的条件将是：

```
[2, {a, b, c, d}],
[1, {c, d, e}],
[2, {d, e, f}],
[1, {e, f, g}],
[2, {f, g, h, i}] 
```

如果我理解正确，您的算法无法对此做出任何推论。但是，如果您是一位经验丰富的扫雷玩家，您会发现`1 2 1`中心的图案只有一个解决方案，地雷低于`1`s：

```
a 2 1 2 1 2 i
b 2 * 2 * 2 h 
```

仍然有一些未知数，在 or 下有一个地雷，在or`a`下`b`还有另一个，但如果这是一个更大的谜题的一部分，您以后可能会弄清楚（或者您可能不得不猜测）。`h``i`

我相信我的一套地雷方法是这样工作的：

对于已扩展的每个图块，收集一组其所有未扩展的邻居（“区域”），以及包含该区域中可能出现的所有地雷组的列表。因此，例如，上面示例中的 5 个已知图块将生成（从左到右）：

```
 ({a, b, c, d}, [{a, b}, {a, c}, {a, d}, {b, c}, {b, d}, {c, d}])
 ({c, d, e}, [{c}, {d}, {e}])
 ({d, e, f}, [{d, e}, {d, f}, {e, f}])
 ({e, f, g}, [{e}, {f}, {g}])
 ({f, g, h, i}, [{f, g}, {f, h}, {f, i}, {g, h}, {g, i}, {h, i}]) 
```

无论如何，要结合两个条件，我首先通过与区域集相交来检查它们是否重叠。如果没有重叠，则不能有效地组合条件。

但是，如果存在重叠，则新条件将跨越其区域的联合。至于地雷的集合，我会做外部集合的笛卡尔积以获得内部集合对，然后检查是否存在矛盾。如果在这些区域的交叉点内，这两组没有完全相同的地雷，就会产生矛盾。如果没有矛盾，一个新的组合集合将由矿山位置的联合组成。以下是上面前两行的组合方式：

```
 Intersection of areas: {a, b, c, d} & {c, d, e} = {c, d}
 New combined area: {a, b, c, d} | {c, d, e} = {a, b, c, d, e}
 Cartesian product of mine sets (with X marking contradictions):
    |   {a, b}  {a, c}  {a, d}  {b, c}  {b, d}  {c, d}
 ---+-------------------------------------------------
 {c}|     X     {a, c}    X     {b, c}    X       X
 {d}|     X       X     {a, d}    X     {b, d}    X
 {e}| {a, b, e}   X       X       X       X       X

 New condition: ({a, b, c, d, e}, [{a, b, e}, {a, c}, {b, c}, {a, d}, {b, d}]) 
```

您可以通过简单地计算它属于多少组（相对于总共有多少组）来计算条件区域内的任何图块成为地雷的几率。因此，鉴于上述综合条件，您可以`a`计算出 3/5 的时间是地雷，而`e`只有 1/5 的时间。当程序需要在没有任何保证安全的图块时猜测要扩展的位置时，此信息很重要。我想我还做了一些复杂的组合来说明使用的地雷数量（因此上面的 {a, b, e} 案例的权重与其他案例略有不同，因为它使用三个地雷而不是两个），但恐怕我不记得细节了。

扫雷是一款非常具有挑战性的游戏。我相信我的程序能够在大约 50-60% 的时间内解决相当于“困难”难度的棋盘，大部分损失发生在开始时（当您必须猜测几乎没有信息可以工作时）或就在结束（当经常有一些无法解决的领域需要猜测时）。它通常非常快，尽管偶尔会出现一种瓷砖图案，导致它在下一步行动之前停滞 10 或 15 秒。（[Minesweeper 是 NP-complete 的](http://for.mat.bham.ac.uk/R.W.Kaye/minesw/ordmsw.htm)，所以有些输入不能快速求解也就不足为奇了！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T04:04:39.470

这就是我想到的，我无法完全想象你的方法到底是什么。
我希望以图形形式呈现我的内容将有助于节省您的精力。

图像按“阅读顺序”进行。

![](../Images/a0f3eb1805541237011719b2ce7f83fc.png)

它似乎与我在发布此内容后所做的工作相吻合，将赋予未知瓷砖的值添加到它从中获得其临时值的已知瓷砖的数量可能会进一步增加正确建模风险的可能性。
（使用这个，临时值 16（或第一种方法为 8）很重要，因为它是一个矿可以自己实现的数字）

* * *

没有早点看到这个，我觉得有点盲目。
![](../Images/a5f95af370ab52b6141b658fc7cb9648.png)

在我能找到的所有情况下，任何具有标准化为 100% 的值的东西都是我的。

# java - System.getenv() 和 System.getProperty() 之间的区别

> ID：13112038
> 
> 赞同：99
> 
> 时间：2012-10-28T19:05:16.967
> 
> 标签：java, environment-variables

> **可能重复：**
> [系统属性和环境变量有什么区别](https://stackoverflow.com/questions/2863674/whats-the-difference-between-a-system-property-and-environment-variable)

System.getenv() 和 System.getProperty() 有什么区别？

当我们使用 Processbuilder 运行任何命令时，我们可以设置环境变量，即：

```
String[] vCmd = { System.getenv("ANT_HOME") + "/bin/ant", "-f",
                ANT_BUILD_FILE, TARGET };
        ProcessBuilder pb = new ProcessBuilder(vCmd);
        Map<String, String> env = pb.environment();     
        env.put("CLASSPATH",
                antHome+"/lib/ant.jar:"
                        + antHome+"/lib/ant-launcher.jar:"
                        + antHome+"/lib/ant-nodeps.jar:"
                        );
        try{

            Process process = pb.start();
            InputStream is = process.getInputStream();
            InputStreamReader isr = new InputStreamReader(is);
            BufferedReader br = new BufferedReader(isr);
            String line;
            while ((line = br.readLine()) != null) {
                System.out.println(line);
            }
            pb.wait();
        }
        catch(Exception e)

            System.out.println(e.getMessage());

        } 
```

如果我在此方法之前使用 System.setProperties() 设置了一些属性，它是否可用于由 ProcessBuilder 启动的此进程？

* * *

## 回答 #1

> 赞同：197
> 
> 时间：2012-10-28T19:08:13.410

[`System.getenv`](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#getenv%28java.lang.String%29)获取一个*环境变量*。[`System.getProperty`](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#getProperty%28java.lang.String%29)获取 Java 属性。环境变量在操作系统级别指定。Java 属性是通过将`-D`选项传递给 JVM 来指定的（并且可以通过编程方式设置）。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-10-28T19:07:50.357

[`System.getenv()`](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#getenv%28java.lang.String%29)用于操作系统环境变量，而[`System.getProperty()`](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#getProperty%28java.lang.String%29)用于传递`-DpropName=value`给 Java 应用程序启动器 ( [`java`](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/java.html)) 的 JVM 参数。

# android - Android 链接到 edittext 和 textview 中的活动

> ID：13112044
> 
> 赞同：0
> 
> 时间：2012-10-28T19:05:48.267
> 
> 标签：android, android-activity, textview, android-edittext, hyperlink

我想要一个edittext或textview中的文本，其中包含一些可点击的单词（如链接）。我希望当用户单击链接时，将启动另一个活动。这该怎么做？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T19:13:48.240

尝试将 webview 用于您的目的

```
web.loadData(data, mimetype, encoding); 
web.setWebViewClient(new WebViewClient() { 

@Override public boolean shouldOverrideUrlLoading(WebView view, String url) {

      if (url.contains("some substring from your url ")) {
        // start new activity
        return true;
      }
      else {
        return false;
      }

    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T19:38:16.537

你想[链接](http://android-developers.blogspot.com/2008/03/linkify-your-text.html)你的文本。

# javascript - 矢量数据（点）在地图上的错误位置绘制（OpenLayers）

> ID：13112047
> 
> 赞同：0
> 
> 时间：2012-10-28T19:06:20.063
> 
> 标签：javascript, vector, openlayers, point

我需要显示一张地图（世界地图，使用默认`OpenLayers`WMS）和一个点（带有 onhover 等事件）。这是我的代码：

```
 var options = {
                            projection: new OpenLayers.Projection("EPSG:900913"),
                            maxResolution: 6000
                        };
                        map = new OpenLayers.Map('map', options);

                        var wmsLayer = new OpenLayers.Layer.WMS(
                        "OpenLayers WMS", 
                        "http://vmap0.tiles.osgeo.org/wms/vmap0",
                        {layers: 'basic'}
                    ); 

                    var vectors = new OpenLayers.Layer.Vector("Vector Layer");

                    point = new OpenLayers.Geometry.Point(20.088844299316406, 51.8321709083475);
                    vectors.addFeatures([new OpenLayers.Feature.Vector(point)]);

                    map.addLayers([wmsLayer, vectors]);

                    map.zoomToMaxExtent(); 
```

但是这段代码定位的点不是画在正确的地方，而是在非洲附近的某个地方（那个地方 lat 和 lon 是 0, 0）。**问题：为什么会发生这种情况，我可以解决它吗？**我只需要将点定位到正确的位置。悖论当我在控制台中打印这一点时，它显示点 lan 和 lon 是需要的（如定义的那样）。但它仍然在错误的地方......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T21:28:56.973

您的地图位于 900913 中，并指向 4326 投影。您必须将其从 4326 转换为 900913：

```
point = new OpenLayers.Geometry.Point(20.088844299316406, 51.8321709083475);
point.transform(
    new OpenLayers.Projection("EPSG:4326"),
    new OpenLayers.Projection("EPSG:900913")
); 
```

此外，请考虑按要素使地图居中。zoomToMaxExtent() 将地图中心设置为 0, 0。由于您已将 maxResolution 设置为 6000，因此只有一小部分地图可见，并且要素可能超出地图范围。

```
map.zoomToMaxExtent();
map.setCenter([point.x, point.y]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T20:08:36.613

Seems that `new OpenLayers.Feature.Vector()` uses `OpenLayers.Geometry` but not an `OpenLayers.Geometry.Point` type. But I never done such kind of app. Just a suggestion which looks reasonable.

# facebook - 如何下载我的 Facebook 群组内容？

> ID：13112048
> 
> 赞同：2
> 
> 时间：2012-10-28T19:06:28.640
> 
> 标签：facebook, download

我管理一个 Facebook 好友群，我想备份其中的所有数据，包括帖子、用户对这些帖子的评论、喜欢等。

那可能吗？我在编程方面非常愚蠢。我发现的唯一东西就是这个[http://community.nextanalytics.com/articles/2012/05/easily-download-facebook-wall-posts-and-comments/](http://community.nextanalytics.com/articles/2012/05/easily-download-facebook-wall-posts-and-comments/)

非常感谢您！:)

# ios - 在增强现实应用程序中实现雷达视图

> ID：13112050
> 
> 赞同：2
> 
> 时间：2012-10-28T19:06:47.033
> 
> 标签：ios, augmented-reality

我的雷达视图遇到了一些问题，我非常接近解决方案，但我不知道出了什么问题。为此，我创建了一个类radarView。问题是，当我浏览我周围的位置时，由几个白点表示的位置都分散在雷达视图的对角线上，从左上角到右下角。

以下是我根据位置方位角和我自己方位角之间的差异计算点坐标的方法：

```
-(float)calculateDelta:(double*)currentAzimuth withLoc:(ARGeoLocation *)location{
double deltaAzimuth;
deltaAzimuth = ABS(location.locationAzimuth - *currentAzimuth);

if (*currentAzimuth < 0.0)
    *currentAzimuth = 2*M_PI + *currentAzimuth;

else if (*currentAzimuth > 2*M_PI)
    *currentAzimuth = *currentAzimuth - 2*M_PI;

deltaAzimuth = location.locationAzimuth - *currentAzimuth;

if (deltaAzimuth < 0.0)
    deltaAzimuth = 2*M_PI + deltaAzimuth;

else if (deltaAzimuth > 2*M_PI)
    deltaAzimuth = deltaAzimuth - 2*M_PI;

return deltaAzimuth;
}

-(float)calculateXPointWithLoc:(ARGeoLocation *)loc andDelta:(float)delta{
float angle = radiansToDegrees(delta);
float dpx = ([myPos distanceFromLocation:loc.geoLocation]*20)/DISTANCE_FILTER;

if(0<=angle<=90)
    return self.center.x + sin(angle)*dpx;
else if(90<angle<=180)
    return self.center.x + cos(angle-90)*dpx;
else if(180<angle<=270)
    return self.center.x - cos(270-angle)*dpx;
else if(270<angle<360)
    return self.center.x - sin(360-angle)*dpx;
}

-(float)calculateYPointWithLoc:(ARGeoLocation *)loc andDelta:(float)delta{
float angle = radiansToDegrees(delta);
float dpx = ([myPos distanceFromLocation:loc.geoLocation]*20)/DISTANCE_FILTER;

if(0<=angle<=90)
    return self.center.y - cos(angle)*dpx;
else if(90<angle<=180)
    return self.center.y + sin(angle-90)*dpx;
else if(180<angle<=270)
    return self.center.y + sin(270-angle)*dpx;
else if(270<angle<360)
    return self.center.y - cos(360-angle)*dpx;
} 
```

上面的 dpx 表示该位置与雷达视图中心的距离（以像素为单位）。最后用这些数据更新雷达上的点，实际上 UIView 存储在radarView类的数组“plots”中：

```
-(void)updateRadar:(double*)currentAzimuth andRange:(float)range{
float x,y;
int i=0;
float deltaAz;
for(ARGeoLocation *loc in coordinates){
    deltaAz = [self calculateDelta:currentAzimuth withLoc:loc andRange:range];

    x = [self calculateXPointWithLoc:loc andDelta:deltaAz];
//        NSLog(@"x: %f",x);
    y = [self calculateXPointWithLoc:loc andDelta:deltaAz];
//        NSLog(@"y: %f",y);
    [[plots objectAtIndex:i] setFrame:CGRectMake(x, y, DIAMETER_PLOT, DIAMETER_PLOT)];
    i++;
}
} 
```

有没有人已经体验过创建雷达视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T11:10:44.927

我的错，我不应该问这个问题。我想我做的时候太累了，我的计算没有错，我没有意识到我做了一个愚蠢的复制和粘贴，所以而不是：

```
y = [self calculateXPointWithLoc:loc andDelta:deltaAz]; 
```

我应该写：

```
y = [self calculateYPointWithLoc:loc andDelta:deltaAz]; 
```

当调试器让我意识到这一点时，我真的很失望。

# java - 如何获取 Android 中的活动应用程序列表？

> ID：13112053
> 
> 赞同：0
> 
> 时间：2012-10-28T19:07:11.730
> 
> 标签：java, android

> **可能重复：**
> [如何获取正在运行的应用程序列表？](https://stackoverflow.com/questions/3304685/how-to-get-the-list-of-running-applications)

如何获取 Android 中的活动应用程序列表？感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T19:11:18.250

```
ActivityManager manager = (ActivityManager)this.getSystemService(ACTIVITY_SERVICE);
List<RunningAppProcessInfo> processes = manager.getRunningAppProcesses(); 
```

然后你有一个[RunningAppProcessInfo](http://developer.android.com/reference/android/app/ActivityManager.RunningAppProcessInfo.html)的集合，你可能想看看[这个](http://developer.android.com/reference/android/app/ActivityManager.RunningAppProcessInfo.html#processName)

# clojure - Noir uberjar 仅适用于构建目录

> ID：13112054
> 
> 赞同：4
> 
> 时间：2012-10-28T19:07:16.860
> 
> 标签：clojure, leiningen, noir

我正在尝试使用 clojure Web 框架 noir 分发一个小型 Web 应用程序构建。运行时按预期工作`lein run`。当我运行时`lein uberjar`，`java -jar project-1.0.0-standalone.jar`它按预期工作。但是，如果我移动 jar 文件（project-1.0.0-standalone.jar），它会运行，但每个页面都会导致 404。My`project.clj`是默认生成的，`lein noir new`除了我添加`:omit-source true`和`:aot :all`.

我在用着：

莱宁根 1.7.1

clojure 1.2.1

黑色 1.2.1

如何制作一个可以分发给其他人而无需来源的罐子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T19:59:14.650

如果您尚未`gen-class` 向命名空间定义添加调用，添加它们可能会解决此问题。您可以通过运行来测试它

```
 lein clean
  lein compile 
```

并确保您看到正在构建的每个类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T01:51:00.643

我相信您遇到的问题是由于 noir.server/load-views 需要命名空间的方式。如果您将其从 target/ 目录中移出，它将无法再找到您传递给 load-views 的 views 目录。

解决方法是明确要求所有视图，而不是使用 load-views 函数。然后你应该可以在任何地方运行 uberjar。

# c - fread 函数如何工作？

> ID：13112059
> 
> 赞同：-4
> 
> 时间：2012-10-28T19:07:43.517
> 
> 标签：c

```
int main()

{

  char  buffer[100];
  fread(buffer,1,4,stdin);
  int i=0;
  while(i<4)

  {
    printf ("%c,\n",buffer[i]);

    i=i+1;
  }

 getch();

} 
```

fread 函数如何知道，何时停止读取输入流，size 和 count 元素的含义是什么，以及如何操纵 size 和 count 以获得最大的流读取速度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T19:15:56.853

打印`int`?中的所有字节 请记住，an`int`是 32 位的，即 4 个字节。将其读入`char`缓冲区可以更轻松地访问`int`.

**编辑：**类型的一点解释`int`......

假设你有一个`int`：

```
int someIntValue = 0x12345678; 
```

这以 32 位存储在内存中。由于单个字节 ( `char`) 是 8 位，因此 . 有四个字节`int`。中的每个字节`int`都可以使用`char`数组或指针来访问：

```
char *someCharPointer = (char *) &someIntValue; 
```

现在您可以访问这四个单独的字节，并查看它们的值：

```
for (int i = 0; i < sizeof(int); i++)
    printf("someCharPointer[%d] = 0x%02x\n", i, someCharPointer[i]); 
```

以上将打印（在 x86 等小端机器上）：

```
someCharPointer[0] = 0x78
someCharPointer[1] = 0x56
一些字符指针[2] = 0x34
一些字符指针[3] = 0x12

```

如果您现在更改`someIntValue`为数字`1`

```
someIntValue = 1; 
```

并再次打印出来，你会看到*这样*的结果：

```
一些字符指针[0] = 0x00
一些字符指针[1] = 0x00
一些字符指针[2] = 0x00
一些字符指针[3] = 0x01

```

## 内存布局`int`

如果您`int`在内存中存储了一个类型为 value 的变量`0x12345678`，它的存储方式如下：

```
   8 位
,----^---。
| |

+--------+--------+--------+--------+
|00111000|01010110|00110100|00010010|
+--------+--------+--------+--------+

| |
`-----------------v-----------------'
                  |
               32 位

```

这`int`与四个字节（或）`char`、`0x78`和`0x56`相同。`0x34``0x12`

但是，如果我们将 更改`int`为数字，`1`那么它的存储方式如下：

```
   8 位
,----^---。
| |

+--------+--------+--------+--------+
|00000000|00000000|00000000|00000001|
+--------+--------+--------+--------+

| |
`-----------------v-----------------'
                  |
               32 位

```

这`int`与四个字节（或）`char`、`0x00`和`0x00`相同。`0x00``0x01`

因此，现在您希望可以看到`int`以.`char``int``int`

# algorithm - 电子金融交易所最常用的订单匹配算法有哪些？

> ID：13112062
> 
> 赞同：61
> 
> 时间：2012-10-28T19:08:01.307
> 
> 标签：algorithm, finance

电子金融交易所最常用的订单匹配算法有哪些？某处是否有订单匹配算法列表？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2013-08-30T03:03:55.873

一般来说，有两组匹配算法，一组用于市场的每个状态：

*   持续交易
*   拍卖

竞价交易的算法种类繁多，在开市前、收市时等使用，但大多数情况下，市场是*连续交易*的。因此，我将在这里进入后一类。

最常用的是**价格/时间优先**和**按比例**。两者都针对各种类型的产品和用例进行了调整和扩展，但为简洁起见，我将在这里只解释基础知识。

* * *

*价格/时间优先*，又名**FIFO**，确保

> 同一价位的所有订单均按时间优先成交；价格水平的第一个订单是第一个匹配的订单。

说订单簿，按价格和时间排序，如下所示：

```
Id   Side    Time   Qty   Price   Qty    Time   Side  
---+------+-------+-----+-------+-----+-------+------
#3                        20.30   200   09:05   SELL  
#1                        20.30   100   09:01   SELL  
#2                        20.25   100   09:03   SELL  
#5   BUY    09:08   200   20.20                       
#4   BUY    09:06   100   20.15                       
#6   BUY    09:09   200   20.15 
```

注意：按时间排序的顺序是买方订单升序，卖方订单降序，因此优先级最高的订单始终在中心，优先级向外递减（向上或向下，取决于侧面） .

现在想象一个新的限价单“**在 20.35 买入 250 股**”进来，然后它会被执行，顺序如下：

1.  20.25 100 股（订单#2）
2.  20.30 100 股（订单#1）
3.  20.30 50 股（订单#3）

这使订单簿处于以下状态：

```
Id   Side    Time   Qty   Price   Qty    Time   Side  
---+------+-------+-----+-------+-----+-------+------
#3                        20.30   150   09:05   SELL  
#5   BUY    09:08   200   20.20                       
#4   BUY    09:06   100   20.15                       
#6   BUY    09:09   200   20.15 
```

* * *

**Pro-Rata**忽略下订单的时间，并根据订单的相对数量将成交数量分配给一个价格水平的所有订单。再拿上面的初始订单簿，让我们匹配相同的“ **buy 250@20.35** ”订单。

填充物是：

1.  100@20.25（订单#2，留下150）
2.  50@20.30（订单 #1，150 x 1/3 = 50）
3.  100@20.30（订单 #3，150 x 2/3 = 100）

像这样留下以下订单：

```
Id   Side    Time   Qty   Price   Qty    Time   Side  
---+------+-------+-----+-------+-----+-------+------
#3                        20.30   100   09:05   SELL  
#1                        20.30    50   09:01   SELL  
#5   BUY    09:08   200   20.20                       
#4   BUY    09:06   100   20.15                       
#6   BUY    09:09   200   20.15 
```

* * *

CME 小组提供了他们使用[的匹配算法的列表](http://web.archive.org/web/20120626161034/http://www.cmegroup.com/confluence/display/EPICSANDBOX/Match+Algorithms)，以及每个算法的描述链接。

更多信息，您可能还想查看[Rajeev 页面](https://sites.google.com/site/rajeevranjansingh/downloads)上的“订单匹配”相关文档。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-28T19:48:20.400

通常他们使用**先进先出**的算法，因为它们最大化有效订单的数量。

每个交易所都有自己的一套规则，这些规则在他们的网站上进行了解释。这是一个例子[。](http://www.six-swiss-exchange.com/knowhow/exchange/trading/matching_en.html)

# jquery - 响应式、流畅、jquery 滑块调整大小存在对齐问题

> ID：13112063
> 
> 赞同：1
> 
> 时间：2012-10-28T19:08:03.703
> 
> 标签：jquery, animation, resize, responsive-design, fluid

**编辑** 重写这篇文章的大部分内容，因为我对代码进行了一些改进并将我的大脑围绕着这个问题......这个滑块是为了响应和流畅，滑动元素是，但是在调整活动元素的大小时不对齐。

要查看问题：

1.  选择数字 2 菜单项
2.  等待滑块移动到第二个场景
3.  调整屏幕大小。你会注意到第二个和第三个场景都是可见的！

[jsfiddle在这里](http://jsfiddle.net/hLHU9/)

我似乎无法弄清楚如何通过调整大小的像素量来移动边距。我即将开始寻找resize(window).before & resize(window).after！也许有更好的方法......请告诉我。

谢谢。

HTML：

```
<div id='main'>
    <div id="introAnime">
        <div class='sliderNav prevNext'>
            <button data-dir='prev' class='left'><span><</span></button>
            <button data-dir='next' class='right'><span>></span></button>
        </div>

    <div class='sliderNav sceneBtns'>
        <button data-dir='1'>1</button>
        <button data-dir='2'>2</button>
        <button data-dir='3'>3</button>
    </div>
        <div class="sliderContent">
            <ul>
              <li class="">1<div class="showScene"></div></li>
              <li class="">2<div class="showScene"></div></li>
              <li class="">3<div class="showScene"></div></li>
            </ul>
        </div>
    </div>
</div>​ 
```

JS：

```
$(window).resize(function() {

  grabVars();
  $('.showScene').css({
    'width' : contWidth + 'px'
  });
  naviSetup();

});

$(document).ready(function(){
    grabVars();
    naviSetup();
    animeSetup();

    $('.sliderNav').find('button').on('click', function(){
        moveTo = $(this).data('dir');
        move(moveTo);
    });
});

function grabVars(){
    introAnimeWidth = $('#introAnime').width();
    contWidth = $('.sliderContent').width();
    contHeight = $('.sliderContent').height();
    numScenes = $('.showScene').length;
    sceneMarginLeft = $('.sliderContent ul')
        .css('margin-left').replace('px','');
}
function naviSetup(){
    $('.sliderNav').show();
    $('.prevNext .right').css({
        'left' : ((introAnimeWidth - 43) + 'px')
    });
    sceneBtnsLeft = (introAnimeWidth - $('.sceneBtns').width())/2;
    $('.sceneBtns').css({
        'left' : sceneBtnsLeft
    });
}
function animeSetup(){
    $('.sliderContent').css({
        'overflow' : 'hidden'
    });
    $('.showScene').css({
        'width' : contWidth + 'px',
        'height' : contHeight + 'px'
    });
}
function move(moveTo){
    grabVars();
    if (moveTo == 'next')
    {
        if ( sceneMarginLeft <= (-1) * ((1*numScenes) - 1) * (contWidth*1) )
        {
            moveValue = 0;
        }
        else
        {
            moveValue = sceneMarginLeft - contWidth;
        }
    }
    else if (moveTo == 'prev')
    {
        if ( sceneMarginLeft >= 0 )
        {
            moveValue = (-1) * ((1*numScenes) - 1) * (contWidth*1);
        }
        else
        {
            moveValue = (1*contWidth) + (1*sceneMarginLeft);
        }
    }
    else
    {
        moveValue = -((moveTo-1) * contWidth);
    }

    $('.sliderContent ul').animate({
        'margin-left' : moveValue + 'px'
    }, 'slow');

}​ 
```

CSS：

```
#main{
    width: 80%;
    margin: auto;
}
#introAnime{
    width: 100%;
    position: relative;
    height:300px;
    border: 2px solid #cccccc;
    margin-bottom: 5%;
    margin-top: 2%;
    border-radius: 20px;
      box-shadow:
        1px 1px 0 0 #014D06,
        2px 2px 0 0 #014D06,
        3px 3px 0 0 #014D06,
        4px 4px 0 0 #014D06,
        5px 5px 5px 0 #000000;
}
.showScene{
    height: 200px;
    width: 680px;
}
#introAnime ul li:nth-child(1){
    background-color: #669900;
}
#introAnime ul li:nth-child(2){
    background-color: blue;
}
#introAnime ul li:nth-child(3){
    background-color: orange;
}
.sliderContent{
    overflow: scroll;
    margin: 50px;
    color:#ffffff;
    text-size: 3em;
}

.sliderContent ul {
    width: 10000px;
    height: 100%;
    list-style: none;

}
.sliderContent ul li{
    float:left;
    list-style-type: none;
}
.sliderNav{
    position: absolute;
    display: none;

}
.sliderNav button{
    cursor: pointer;
}
.prevNext {
    top: 255px;
}
.prevNext button{
    width: 40px;
    height: 40px;
    color: #ffffff;
    font-size: 1.5em;

}
.prevNext .left{
    position: absolute;
    border-bottom-left-radius: 20px;
    border-top-right-radius: 20px;
    left: 5px;

}
.prevNext .right{
    position: absolute;
    border-bottom-right-radius: 20px;
    border-top-left-radius: 20px;
    left: 737px;

}
.sceneBtns{
    border: 2px solid #cccccc;
    padding: 5px;
    border-top: 0px;
    border-bottom-left-radius: 20px;
    border-bottom-right-radius: 20px;
    left: 195px;
}
.sceneBtns button{
    background-color: #ffffff;
    border: none;
    font-size: 10pt;
    color: #669900;
    padding-left: 10px;
    padding-right: 10px;
}
.sceneBtns button:nth-child(1){
    border-right: 2px solid #669900;

}
.sceneBtns button:nth-child(2){
    border-right: 2px solid #669900;

}​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T00:42:10.153

固定和更新的小提琴！

关键是跟踪活动滑动元素并从窗口调整大小调用一个函数，该函数根据新宽度和活动幻灯片设置 ul 边距，如下所示：

```
function resizeMargin(){
    $('.sliderContent ul').css({
        'margin-left' : -1*(activeSlide-1)*contWidth + 'px'
    });        
} 
```

# jquery - && 在 drop 事件中

> ID：13112068
> 
> 赞同：0
> 
> 时间：2012-10-28T19:08:49.187
> 
> 标签：jquery, jquery-ui, draggable, droppable, logical-operators

我试图`drop`仅在所有内容都被删除的情况下触发一个事件`draggables`。

```
drop: function(event,ui){
            var dropd = "#"+ui.draggable.attr("id");
            if("#a_dra" && "#b_dra" && "#c_dra" && "#d_dra" == dropd){
                $("#whistle").get(0).play();
                dfd.resolve();
            };  
        }, 
```

这样`code`就有问题了。它在每个都`div`被丢弃并正确触发时起作用。**除非**我只删除`#a_dra`and `#d_dra`，否则它也会触发，这是不可取的，因为我需要它是随机的。

我在那里缺少什么？

提前致谢！:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T19:10:36.033

```
if("#a_dra" && "#b_dra" && "#c_dra" && "#d_dra" == dropd){ 
```

上面这行实际上意味着

```
if(("#a_dra" == true) && ("#b_dra" == true) && ("#c_dra" == true) && ("#d_dra" == dropd)) { 
```

您不能像这样对多个值进行速记比较。

您可以为每个被丢弃的可拖动对象保留状态，以便检查它们是否都已被丢弃，以便解决您的延迟问题：

```
var dropped = {}

....

drop: function(event,ui){
    var dropd = "#"+ui.draggable.attr("id");
    dropped[dropd] = true;
    if(dropped["#a_dra"] && dropped["#b_dra"] && dropped["#c_dra"] && dropped["#d_dra"]){
        $("#whistle").get(0).play();
        dfd.resolve();
    };  
}, 
```

# android - 如何在 GridView 中找到 ImageView？

> ID：13112074
> 
> 赞同：0
> 
> 时间：2012-10-28T19:09:38.200
> 
> 标签：android, android-imageview, android-view, android-gridview

我需要在我的 GridView 中获取特定的 ImageView。我试过这个，但它给出了 NullPointerException：

```
ImageView imageView = (ImageView) myGridView.getChildAt(1);
imageView.setSomething(); 
```

有人可以告诉我如何解决这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T19:18:43.407

我假设您在创建阶段（ 、 等）执行此操作`onCreate()`，`onResume()`但直到所有这些“创建”方法完成*后才会绘制视图。*可惜没有回调`onFinishedDraw()`...

但是，您可以将代码放在 Runnable 中：

```
Runnable tweakChild = new Runnable() {
    @Override
    public void run() {
        ImageView imageView = (ImageView) myGridView.getChildAt(1);
        imageView.setSomething();
    }
}; 
```

并将此 Runnable 传递给您的 GridView 的处理程序（`onCreate()`例如内部）：

```
myGridView.post(tweakChild); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-04T15:16:07.573

您只需在 ImagaViewAdapter 中实现 getItem() 方法。您必须返回 null。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T19:40:37.987

实际上，调整这些视图的经典方法是通过适配器的 getView()。

在这里查看一些解释：

[https://stackoverflow.com/a/6243248/1665128](https://stackoverflow.com/a/6243248/1665128)

[如何在 Android 的 gridview 中查找元素？](https://stackoverflow.com/questions/5976533/how-to-find-element-inside-a-gridview-in-android)

[http://androidforums.com/developer-101/146035-get-element-view-gridview.html](http://androidforums.com/developer-101/146035-get-element-view-gridview.html)

# iphone - 内存警告中的视图问题

> ID：13112077
> 
> 赞同：-1
> 
> 时间：2012-10-28T19:09:53.920
> 
> 标签：iphone, objective-c, ios, ipad

> **可能重复：**
> [模拟的内存不足警告不起作用](https://stackoverflow.com/questions/13106687/simulated-low-memory-warning-not-working)

所以我有一个 UIViewController 里面有一个 webview。我尝试将另一个视图控制器推入导航控制器，然后模拟内存警告，然后返回。现在带有 webview 的视图完全是空白的。我尝试添加一个视图并将背景颜色更改为此代码，但在内存警告后它没有添加它。我尝试调用 setNeedsLayout 和 setNeedsDisplay 也无济于事。就好像景色不存在一样。所以我仔细检查了视图框架，它是：

```
<UIView: 0x8aebd70; frame = (0 0; 768 960); clipsToBounds = YES; autoresize = W+H; layer = <CALayer: 0x8ae2830>> 
```

知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T19:47:07.727

您需要下载完整的 HTML 页面，然后将其存储在本地缓存中，然后告诉 webview 加载它。因此，每当 webview 收到 mem 警告时，它将卸载它的内存内容，当您返回时，它将在缓存中加载 HTML

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T08:36:40.613

这是正常的。在 iOS6 内存警告从不可见视图控制器中删除根视图之前，从 iOS6 中它只删除视图控制器拥有的不可见视图的后备存储。所以一切都取决于你告诉 webview 加载 html 页面的位置。我会建议你使用`-viewWillAppear`.

# php - 如果字段为真，则显示图像

> ID：13112078
> 
> 赞同：0
> 
> 时间：2012-10-28T19:10:17.630
> 
> 标签：php, mysql, database, mysqli

我有一个名为 user_badges 的表和一个名为 badge1 的字段，当用户解锁徽章时，默认值写为**“locked” ，该字段更新为****“unlocked”**

我想要的是检查表 **WHERE $username = $_SESSION['username'];中字段标记 1 中的值的脚本** 并显示位于我网站文件夹中的徽章图像。

我对如何去做有一个想法，但不确定如何完全执行。

```
//Connect to database
<?php
$connect = mysql_connect("host","username","password");
mysql_select_db("database_name");
?>

if field (field_name) from table (table_name) value= unlocked
echo/display image from (images/badges/fanaticbadge.png)

else echo/display (images/badges/locked.png) 
```

这可能吗？感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T22:20:05.057

```
$q = "SELECT badge1 FROM user_badges WHERE username='{$_SESSION['username']}' LIMIT 1";
$r = mysql_query($q);
$row = mysql_fetch_assoc($r);
$badge1 = $row['badge1'];

if($badge1 == "unlocked") {
 print "image if user has unlocked the badge";
  } else {
 print "image if user hasn't unlocked the badge";
} 
```

# jquery - 一种更简单的使用 document.ready 和 require js 的方法

> ID：13112080
> 
> 赞同：2
> 
> 时间：2012-10-28T19:10:24.400
> 
> 标签：jquery, requirejs

我正在为我当前的项目使用 require js 和 jquery。我想知道将 document.ready 与 require.js 结合使用的最佳方式是什么。

我当前的文件结构：

main.js

```
define(["Jquery"], function () {
$(document).ready(function () {
        $("#SomeButton").click(function () {});
}); 
```

测试.js

```
define(["main"], function () {
$(document).ready(function () {

        $("#AnotherButton").click(function () {
});
}); 
```

test1.js

```
define(["main"], function () {
$(document).ready(function () {
       $("#AnotherButton").click(function () {
});
}); 
```

如您所见，我在三个文件中都使用了 document.ready。编写使用 document.ready 的代码而不在每个模块文件中定义此事件的更好方法。我想保持这些模块原样，但只想确保 dom 在代码执行之前准备好。

我能做的一件事是在 main.js document.ready 事件中加载所有模块文件。但由于我有不同的页面使用不同的 js 文件，所以将它们组合在一起不是一种选择。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T19:13:27.550

我认为这已经足够了。您可以从多个位置触发 document.ready，但它们都将被异步调用。所以如果你想让它们按顺序触发，那么你应该考虑将它们安排在一个地方，否则应该没问题。

# c# - 将外部 EXE 设置为 TopMost

> ID：13112081
> 
> 赞同：2
> 
> 时间：2012-10-28T19:10:35.407
> 
> 标签：c#, process

您将如何使用 Process.Start 或类似的方式将程序设置为最顶层的应用程序

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T19:18:39.933

启动进程后，我将首先获取该[进程的窗口句柄](https://stackoverflow.com/questions/1421166/c-sharp-get-window-handle-after-starting-a-process)

然后，我会使用[SetWindowPos](http://www.pinvoke.net/default.aspx/user32.SetWindowPos)将其设置为[最顶层](https://stackoverflow.com/questions/1528473/c-sharp-make-a-window-topmost-using-a-window-handle)

请注意，这需要使用 PInvoke。3 个链接应该为您指明正确的方向。

# ios - iOS 写入 ubuntu 服务器上的文件

> ID：13112088
> 
> 赞同：0
> 
> 时间：2012-10-28T19:11:31.037
> 
> 标签：ios, ubuntu-server

有谁知道如何在 ubuntu 服务器上的现有文件上附加来自 iOS 的字符串？我尝试了 writeToURL 方法，但它没有工作......

谢谢，

戴夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T20:26:29.690

writeToURL 旨在与“file://”协议一起使用（例如本地），不支持其他网络协议（参见[NSData – writeToURL:options:error:](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/Reference/Reference.html#//apple_ref/occ/instm/NSData/writeToURL%3aoptions%3aerror%3a)）。

为了向远程服务器发送字符串或上传文件，它必须有专门的服务来处理收据。例如，它可以是 PHP 脚本。要编写的 Objective-C 代码取决于远程服务。

因此，在其他任何事情之前，您必须首先知道使用什么协议来与远程服务器通信。之后，您将需要试验[NSURLRequest](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSURLRequest_Class/Reference/Reference.html)和[NSURLConnection](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSURLRequest_Class/Reference/Reference.html)类。

简而言之：无法回答您的问题，因为我们不了解您的远程服务器的更多信息。

# prolog - 序言课程 - ailog

> ID：13112091
> 
> 赞同：1
> 
> 时间：2012-10-28T19:11:40.783
> 
> 标签：prolog, logic

我从未使用过 SWI Prolog 或 AIlog，但我认为语法是相同的（可能是错误的）。

将数字与存储的变量进行比较时遇到问题，例如：“ `is 10 < age_limit?`”。当我收到错误消息时：`"Error in built-in predicate 10 < age_limit."`

代码如下：

```
...

% data values
age_limit(18).

% 3 AGE CLASSIFICATION 1
patient_child <-
            age = X & X < age_limit.

% 4 AGE CLASSIFICATION 2
patient_adult <-
            age = X & X >= age_limit.

askable age = X. 
```

我不知道我做错了什么，也无法在手册中找到它。

请建议我正确的语法。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T06:15:28.417

在 Prolog 我们会写

```
patient_child <-
            age = X, age_limit(Y), X < Y. 
```

（由于 Prolog 没有`askable`，我假设`age = X`部分是正确的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T16:50:38.850

最后我让它工作了。与“Alexey Romanov”的建议类似，代码将是：

```
patient_child <- age = X & age_limit(AL) & X < AL. 
```

# javascript - 你能找到仅使用部分字符串的包含相同类的 s 吗？

> ID：13112092
> 
> 赞同：0
> 
> 时间：2012-10-28T19:11:49.780
> 
> 标签：javascript, html-table

我的表的`<td>`s 包含多个类。我需要找到每个`<td>`包含给定字符串的内容。
例如：

```
<table>
    <tr>
        <td class="hello there">foo</td>
        <td class="hello here">bar</td>
        <td class="not hello">baz</td>
    </tr>
</table> 
```

我需要找到每个包含“hello”的 td。
可以做到吗？简单`className ==`只会返回完全匹配。当然。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T19:13:45.747

这就是[`getElementsByClassName`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByClassName)：

```
document.getElementsByClassName('hello'); 
```

这将选择任何具有 class 的元素`hello`。

**注意：**该`class`属性包含一个空格分隔的类名列表。

* * *

如果您需要支持 IE8 及以下版本，请使用以下命令：

```
var elements = document.getElementsByTagName("td"),
    helloElements = [],
    i = elements.length;

for (i--) {
    if ( ~(' ' + elements[i].className + ' ').indexOf(' hello ') ) {
        helloElements.push(elements[i]);
    }
} 
```

这是一个演示：http: [//jsfiddle.net/AJEsp/](http://jsfiddle.net/AJEsp/)

* * *

根据@mplungjan 的建议，这里是按位波浪号 (~) 技巧的简短说明：

该`indexOf`函数返回一个整数，其中包含找到的子字符串的位置，因此`'abc'.indexOf('b')`将 return `1`，`'abc'.indexOf('c')`将 return `2`，依此类推。如果未找到子字符串，它将返回`-1`.

该`~`字符是[位运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Bitwise_Operators)之一，它会反转所有位。回避这究竟是如何发生的复杂问题，我们现在只需要知道return ，而在*其他任何东西*上使用波浪号都会`~-1`返回一个真实值。`0`

 *因此，`~'str'.indexOf('substring')`可以将其视为是否找到子字符串的布尔值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T19:14:28.537

使用这样的东西：

```
var tds = document.getElementsByTagName("td");

for (var i = 0; i < tds.length; i++) {
    var cur = tds[i];
    var the_class = cur.className;
    if (the_class.split(" ").indexOf("hello") > -1) {
        // cur has the class "hello"
    }
} 
```

不过还有其他解决方案。

您可以使用`.classList`尚未完全支持的属性 - [https://developer.mozilla.org/en-US/docs/DOM/element.classList](https://developer.mozilla.org/en-US/docs/DOM/element.classList)。

您可以使用`document.getElementsByClassName`- [https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByClassName](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByClassName)。

您可以使用`document.querySelectorAll`- [https://developer.mozilla.org/en-US/docs/DOM/Document.querySelectorAll](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelectorAll)。

```
var td_with_class = document.querySelectorAll("td.hello"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T19:14:41.677

`class="hello there"`表示 td 有两个类，`hello`并且`there`.

所以你可以使用

```
var elements = document.getElementsByClassName('hello'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-28T19:15:32.080

```
var tds = document.getElementsByTagName('td'),
    filtered = [];
for (var i = 0; i < tds.length; i++){
  if (tds[i].className.match(/\bhello\b/i)){
    filtered.push(tds[i]);
  }
} 
```

使用`RegExp`match 和`\b`符号将 tds 与指定的类匹配。或者，您可以从 class 开始向后过滤并按以下方式过滤`tagName`：

```
var hellos = document.getElementsByClassName('hello'),
    filtered = [];
for (var i = 0; i < hellos.length; i++){
  if (hellos[i].tagName == 'TD'){
    filtered.push(hellos[i]);
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-28T19:14:36.680

[https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByClassName](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByClassName)

> 获取同时具有 'red' 和 'test' 类的所有元素
> 
> ```
> document.getElementsByClassName('red test'); 
> ```

并将其限制在某个节点：

> 查找所有具有“测试”类的 div 元素
> 
> ```
> var tests = Array.prototype.filter( document.getElementsByClassName('test'), function(elem){
>     return elem.nodeName == 'TD';
> }); 
> ```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-28T19:15:08.993

一般的解决方案是通过标记名（“td”）获取所有项目。遍历每个项目并确定 hello 是否是类属性的子字符串。如果您需要代码，请告诉我！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-28T19:23:06.617

令人惊讶的是，没有人建议使用 jQuery [hasClass](http://api.jquery.com/hasClass/)

要不就

```
var allHello = $("td.hello"); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-28T20:03:24.327

有财产[`.classList`](https://developer.mozilla.org/en-US/docs/DOM/element.classList)。

```
elem.classList.contains( 'hello' ) 
```

返回元素是否包含`"hello"`类。

**现场演示：http:** [//jsfiddle.net/E7jMt/1/](http://jsfiddle.net/E7jMt/1/)

`.classList`在所有浏览器中实现（截至两天前），但在旧版本的 os IE（<10）中没有实现。*

# backbone.js - Backbone.marionette 嵌套的 ItemView 返回延迟而不是 el

> ID：13112093
> 
> 赞同：0
> 
> 时间：2012-10-28T19:11:56.777
> 
> 标签：backbone.js, marionette

我是新手，所以请多多包涵。我正在尝试将一个项目视图添加到另一个项目视图，但嵌套视图项目上的渲染方法返回一个延迟对象。

这是代码：

```
(function (ns, _, $, Backbone) {

///////////////////////////////////////////////////////////////////////////////////////
// Signup state
///////////////////////////////////////////////////////////////////////////////////////

var SignUp = Backbone.Marionette.ItemView.extend({
    template : "#signup-tmpl",
    events : {
        'click .signup' : 'signup'
    },

    signup : function () {
        console.log('signup clicked');
        ns.app.layout.app.show(ns.views.register);
    },
    onRender : function() {
        console.log('On render', this.el);

        var user = ns.views.user.render();
        // user returns an a deferred object
        // so the code below does not work

        this.$el.find('#user').html(test.el);

    }
});

ns.views.signup = new SignUp();

}(H5, _, $, Backbone)); 
```

我做了一些阅读，我发现的修复是渲染视图，但抓住它的 el 属性（[Backbone.Marionette 嵌套的 ItemView 要么不渲染或渲染“空白”视图/模板](https://stackoverflow.com/questions/13023229/backbone-marionette-nested-itemview-either-not-rendering-or-rendering-blank-vi)）后记。问题是“用户”返回一个延迟对象。

关于这里发生了什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T01:13:26.290

您正在使用 Marionette.Async 吗？从渲染返回延迟对象对于促进异步处理模板、数据和渲染的方式是必要的，这些都是异步完成的。

使渲染不返回延迟的唯一方法是不使用 Marionette.Async - 和 FWIW，我推荐该解决方案。异步不应该直接在视图中完成，IMO。它应该由应用程序工作流处理，在视图实现之上的一个或多个抽象步骤。

# iphone - 最后一个 TableView 单元格不起作用

> ID：13112101
> 
> 赞同：0
> 
> 时间：2012-10-28T19:13:08.463
> 
> 标签：iphone, ios, xcode, uitableview, tableview

我将尽我所能解释这一点，并希望有人能理解发生了什么：

我正在使用核心数据将数据加载到 UITableView 中。我正在尝试在 TableView 的末尾添加一个“最后一个单元格”以显示徽标。这是我的代码：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
return [[self.fetchedResultsController sections] count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
  numberOfRows = section;
return     [[[self.fetchedResultsController sections] objectAtIndex:numberOfRows] numberOfObjects]+1;

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";

cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[ReminderCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

cell.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"cellBackground.png"]];

row = indexPath.row;

if (row == [[[self.fetchedResultsController sections] objectAtIndex:numberOfRows] numberOfObjects]) {
    NSLog(@"%u",[[[self.fetchedResultsController sections] objectAtIndex:numberOfRows] numberOfObjects]);
    cell.productLabel.text = nil;
    cell.companyLabel.text = nil;
    cell.dateLabel.text = nil;
    cell.accessoryType = UITableViewCellAccessoryNone;
    cell.logo.hidden = NO;
    cell.renewLabel = nil;

}

else {

    Reminder *reminder = [self.fetchedResultsController objectAtIndexPath:indexPath];
    cell.productLabel.text = reminder.product;
    cell.companyLabel.text = reminder.company;
    cell.dateLabel.text = reminder.date;
    cell.logo.hidden = YES;

}

return cell;

}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{    
    row = [indexPath row];

if (row == [[[self.fetchedResultsController sections] objectAtIndex:numberOfRows] numberOfObjects]) {
    return 50;
}

return 78;

} 
```

正如你所知道的，我告诉最后一个单元格没有附件类型，而所有其他单元格都将有一个。

带辅助箭头的正常细胞： ![有配件箭头](../Images/add5197ca7486489f03b2cf70378c624.png)

最后一个单元格： ![最后一个单元格](../Images/0ad60a27666b3d6367bacf030fc3c2de.png)

一切都很好，直到我向下滚动到最后一个单元格所在的底部，然后向上滚动。附属箭头在一些应该有它的表格单元格中消失了！！（但不是全部）

相同的单元格，但箭头消失了： ![没有箭头](../Images/62255c47320dfe402c0fb53e151c4bea.png)

这里发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T19:28:56.617

那是因为排队机制。tableView 从它的缓存中取出一个任意单元格。如果该单元格恰好是您之前设置的单元格之一：

```
cell.accessoryType = UITableViewCellAccessoryNone; 
```

它没有附件指示器。解决这个问题的最简单方法（在我看来，当然你也可以使用不同的重用标识符）是像这样修改你的代码：

```
else {

    Reminder *reminder = [self.fetchedResultsController objectAtIndexPath:indexPath];
    cell.productLabel.text = reminder.product;
    cell.companyLabel.text = reminder.company;
    cell.dateLabel.text = reminder.date;
    cell.logo.hidden = YES;

    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T19:24:52.300

问题是调用`dequeReusableCellWithIdentifier:`，因为您的所有单元格都具有相同的标识符。这意味着当“最后一个单元格”出现然后滚动时，它是可重用单元格的下一个提示，并且由于所有单元格都有相同的标识符，每次其中一个从屏幕上掉下来，下一个一个就没有配件了。您需要提出一个实现，为“最后一个单元格”提供不同的标识符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T19:25:10.047

我会这样做，定义两个 CellIdentifier，一个用于正常单元，一个用于最后一个单元：

```
static NSString *CellIdentifier = @"Cell";
static NSString *CellIdentifierBottom = @"CellBottom"; 
```

如果构造，则创建您的单元格 i：

```
if (row != lastTableViewIndex) {
    //create cell with CellIdentifier
} else {
    //create cell with CellIdentifierBottom
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T19:48:24.033

您可以尝试使用[UITableViewDelegate](http://developer.apple.com/library/ios/ipad/#documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html)的以下回调在显示单元格后对其进行自定义：

```
-(void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath {
    if (indexPath.row != (yourDataSource.count-1) {
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    }else{
        cell.accessoryType = UITableViewCellAccessoryNone;
    }
} 
```

# python - 在 python 中使用 figtext

> ID：13112103
> 
> 赞同：0
> 
> 时间：2012-10-28T19:13:11.730
> 
> 标签：python, matplotlib

如何`figtext`在 Python 中使用该函数？

我试过`help(figtext)`了，但返回的说明太模糊了。

我正在尝试将方差和模式添加到数据图中。

我试着简单地做

```
figtext(median,mode) 
```

但这是不对的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T21:03:22.400

根据帮助和[文档](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.figtext)：

```
figtext(*args, **kwargs)
    Call signature::

      text(x, y, s, fontdict=None, **kwargs)

    Add text to figure at location *x*, *y* (relative 0-1
    coords). See :func:`~matplotlib.pyplot.text` for the meaning
    of the other arguments. 
```

因此

```
figtext(.3,.5,str(median))
figtext(.4,.5,str(mean)) 
```

将文本添加到图的中间。调整`x`和的`y`值以将文本放置在您想要的位置。您可能还希望使用格式化来避免获得大量无意义的数字 ( `'%.02f'%mean`)。

# android - 安卓图标不显示

> ID：13112115
> 
> 赞同：0
> 
> 时间：2012-10-28T19:14:31.120
> 
> 标签：android, drawable, android-icons

我尝试使用以下代码在我的应用程序中的几个地方使用图标

```
 android:icon="@drawable/app_logo" /> 
```

但他们也没有出现，我也没有收到错误/警告。我将 app_logo.png 放入 res/drawable 文件夹，然后放入任何其他可绘制文件夹（res/drawable-hdpi、res/drawable-ldpi ...），但 app_logo 不会出现在我的应用程序中。有人可以帮我追查错误吗？

编辑：我想在菜单和选项卡视图中使用它们，取自在线示例，例如

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
<item android:id="@+id/icon"
    android:icon="@drawable/help_logo" />
<item android:id="@+id/help"
    android:title="Help Text" />
<item android:id="@+id/icontext"
    android:title="App Logo Text"
    android:icon="@drawable/app_logo" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T19:17:14.057

你不能`android:icon`在“几个地方”使用。或者，从技术上讲，您可以，但是只有在支持属性的元素中使用它才有意义`android:icon`，否则它将被跳过。

**编辑**

`android:icon`对于 Android 2.x 上的 6 个菜单项（如果您获得超过 6 个，则为 5 个，因为在这种情况下，系统会占据第 6 位，以便您更多地扩展菜单）和更早的版本，一旦用户点击菜单按钮。如果您的菜单有更多项目，它将不会出现。如果您的设备运行的是 Android 3.0 及更高版本，它也不会出现。我建议放弃菜单并切换到操作栏模式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T22:24:33.977

由于[android Tab图标不显示，我终于找到了问题所在](https://stackoverflow.com/questions/9225868/android-tab-icons-dont-show-up)

我的应用仍然有标题栏 - 添加

```
 android:theme="@android:style/Theme.NoTitleBar" 
```

清单解决了一切。会很好奇如何同时保留 TitleBar 和图标。

# objective-c - 架构 armv7s 的未定义符号

> ID：13112122
> 
> 赞同：2
> 
> 时间：2012-10-28T19:14:52.483
> 
> 标签：objective-c, ios, xcode4.2

当我构建我的旧版本应用程序 ios 4.3 时，我有这个警告

```
Undefined symbols for architecture armv7s:
  "_OBJC_CLASS_$_SSSwitch", referenced from:
      objc-class-ref in LoginViewController.o
  "_OBJC_CLASS_$_SSHUDView", referenced from:
      objc-class-ref in ContractorInfoViewController.o
      objc-class-ref in ContractorListViewController.o
      objc-class-ref in EvenementBilleterieViewController.o
      objc-class-ref in EvenementCoupDeCoeurViewController.o
      objc-class-ref in EvenementRequestViewController.o
      objc-class-ref in GourmetCoupDeCoeurViewController.o
      objc-class-ref in GourmetRequestViewController.o
      ...
ld: symbol(s) not found for architecture armv7s
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

请帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T19:20:55.710

链接器错误通常意味着您正在尝试访问未链接到的库或类似库中的代码。在您的情况下，它看起来像是访问了某种 SS 库，但没有链接。通过在 File Navigator 中选择项目，确保将任何潜在的库添加到项目中，然后选择：

```
Target -> Build Phases -> Link binary with libraries 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-28T15:59:14.053

`armv7s`从部分中删除`valid architectures`，它将起作用。

**构建设置 --> 架构 --> 有效架构**

![Xcode 构建设置](../Images/880d70272d66272dc8980772bf7a15c9.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-18T18:23:57.073

每当发生这种情况时，进入违规类的 .m 并 CMD + 单击错误中指示的类。这将带您进入您需要添加的库的标题。现在您将知道缺少哪个库，您可以将其添加到项目中。

# java - 创建使用网站图标的 Javadoc HTML 页面

> ID：13112123
> 
> 赞同：3
> 
> 时间：2012-10-28T19:14:55.613
> 
> 标签：java, ant, javadoc, favicon

我想在`<head>`生成的 Javadoc HTML 中包含一个元素：

```
<link rel="shortcut icon" href="my-project-icon.ico" /> 
```

请注意，我正在使用 Ant 任务来生成 Javadoc。

我尝试使用`<header>`Ant 任务的元素，但放置在那里的任何标记最终都包含在一个`<h1>`标记中，这是无效的，因此被浏览器忽略。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T21:08:46.217

我肯定会将输出文件修改为一种简单的蛮力解决方案。但是一种复杂的方法是使用自定义 doclet。此 doclet 将是标准 doclet 的副本（[在哪里可以下载当前版本（1.5 或 1.6）的标准 JavaDoc doclet 的源代码](https://stackoverflow.com/q/6049686/772981)）。

里面有`HtmlDocletWriter.java`很多行`head.addContent`。您可以再添加一条这样的行，可能基于`HtmlTree.LINK`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T12:24:21.290

我们使用以下 bash/sed 脚本采用“蛮力”方法。

（请注意，javadoc 在创建的目录中创建了一些名为“*.html”的丑陋文件，这会在 sed 尝试处理它们时导致错误消息。我们还没有想出如何避免这种情况，但它似乎是对我们的目的无害！-)

当然，xslt 脚本会更专业，...

```
#!/bin/sh
# patch favicon into header of javadoc generated api doc html 
#
# assume started with P=`pwd` , then the args must be
# 1 directory to process / full path relative to  $P
# 2 favicon filename to insert / full path relative to $P
function patchIt () {
   for f in $1/*.html ; do  
     tmpfile=`mktemp -p . `
     sed -e " s%<HEAD>%<HEAD><link rel=\"icon\" href=\"$2\" type=\"image/png\"/>%" \
         $f > $tmpfile  ; mv $tmpfile  $f ; 
   done ; 
   for d in $1/* ; do 
     if [ -d $d ]; then echo "descending to "$d ; patchIt $d ../$2 ; fi ; 
   done
}
patchIt $1 $2 
#eof 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-08T00:18:39.603

Markus 的解决方案是一个好的开始。感谢您提供！

但是，它有一些问题：

*   如果目录不包含任何 .html 文件，则会创建一个名为 .html 的文件`*.html`。
*   它不会将网站图标添加到由 JDK 8 版本的 javadoc 生成的 HTML 文件中，该版本`<head>`使用`<HEAD>`.
*   如果多次运行，它会多次插入网站图标。
*   mktemp 命令不可移植（例如，它不适用于 Mac OS）。
*   它不保留文件权限。

这是纠正这些问题的版本。扩展[版本](https://github.com/plume-lib/html-tools/blob/master/html-add-favicon)可以在[html-tools](https://github.com/plume-lib/html-tools)存储库中找到。如果您发现问题或想提出改进建议，请在此处发表评论或使用[html-tools 问题跟踪器](https://github.com/plume-lib/html-tools/issues)。

```
#!/bin/sh
# Add favicon to header of HTML files.
# One use case is for javadoc-generated API documentation.
#
# Run like this:
# add-favicon <directory> <favicon.png>
# The arguments should be paths relative to the current working directory.

# Once this has been run, running it another time has no effect.

patchIt () {
  for f in $1/*.html ; do
    if [ -f "$f" ]; then     # if no .html files exist, f is literal "*.html"
      tmpfile=`mktemp patch_favicon_XXXXX`
      # This creates tmpfile, with the same permissions as $f.
      # The next command will overwrite it but preserve the permissions.
      # Hat tip to http://superuser.com/questions/170226/standard-way-to-duplicate-a-files-permissions for this trick.
      \cp -p $f $tmpfile
      sed -e " s%<head>\$%<head><link rel=\"icon\" href=\"$2\" type=\"image/png\"/>%" $f > $tmpfile
      mv -f $tmpfile $f
    fi;
  done ;
  for d in $1/* ; do
    if [ -d $d ]; then echo "descending to "$d ; patchIt $d ../$2 ; fi ;
  done
}

patchIt $1 $2

#eof 
```

# c++ - 实现二分查找

> ID：13112124
> 
> 赞同：0
> 
> 时间：2012-10-28T19:14:59.243
> 
> 标签：c++, algorithm, binary-search

这是我的二进制搜索：

```
int binarySearch(int arr[], int value, int min, int max){
  int pos = -1;

  while (max >= min && pos == -1) {
    int mid = (max+min)/2;

    if(arr[mid] ==  value){
      pos = mid;
    }else if(arr[mid] < value){
      min = mid +1;
    }else if(arr[mid] > value){
      max = mid -1;
    }

  }
  return pos;
} 
```

我这样称呼它：

```
 //Arr contain values 0-63
int i = binarySearch(arr, 64, 0, 64); 
```

这些是中间值

```
32 48 56 60 62 63 64 
```

在最后一次检查中，当数组中的最后一个位置是 63 时，我尝试访问 pos 64 处的元素。

我的实施有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T19:49:49.173

您的数组包含 0-63 的值（如您所述），并且您为 min 和 max 提供以下值：min=0，max=64。并更改以下行，以便您的代码可以处理高 int 值，否则可能会出现内存溢出。

```
 int mid = min+(max-min)/2; 
```

上面的公式简化为 (max+min)/2 本身，但保护整数溢出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T19:17:11.907

当 max==min 时，你的长度为 0，所以你不应该进入循环。将条件更改为`(max > min && ...)`如果您的高水位是“结束时”（并且您的高水位可能应该是“结束时”，这是一个非常有用的模式）

哦，让它`max = mid`代替`max = mid-1`，因为 max 代表“一个超出结尾”而不是最后一个元素。

作为一种通用的编码风格改进，在编写这种代码时，会在索引范围内的所有地方抛出断言。这不仅可以更早地发现问题，还可以帮助您推断哪些值在范围内，哪些不在范围内......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T19:25:48.413

试试这个代码

```
while (max > min && pos == -1) {
    int mid = (max+min)/2;

    if(arr[mid] ==  value){
        pos = mid;
    }else if(arr[mid] < value){
        min = mid;
    }else if(arr[mid] > value){
        max = mid;
    }
} 
```

# python - 如何在 python beautifulsoup 中解析出以下 HTML？

> ID：13112126
> 
> 赞同：4
> 
> 时间：2012-10-28T19:15:07.230
> 
> 标签：python, html, beautifulsoup

假设以下是 HTML 文档的子集...请注意，有多个重复的表，尽管`<a name="1">`可能是“2”、“3”、“4”等，每个表的文本不同。

```
<table align="center" width="550">
<tr>
<td valign="top" width="300"><b>Product:</b></img></td>
<td>
<a name="1"></a>1) Text Editor
<p>An application for the editing of text files.</p>
<br>
<b>Application Name: Notepad</b>
<br>            
<b>Type: Writing</b>
<br><br></td>
</tr>
</table> 
```

我希望能够找到一个等于特定“#”（在本例中为 1）的“a”标签，并能够以某种方式获取以下文本：“1）文本编辑器”。

我知道如果我对整个文档进行了漂亮的处理，我可以使用类似的东西`findAll("table")`给我所有的表格，但我不知道我怎么可能得到那个值。我也许可以做类似的事情`findAll("a")`，但是我将如何指定“名称”等于（在这种情况下为 1）？即使我能做到这一点，我也无法进入“1）文本编辑器”，因为“a”标签是空的......而且我也无法进入“ `<b>Application Name: Notepad</b>`”部分。

结合 python/beautifulsoup 的最佳解决方案是什么，或者是否有更好的方法来获取表格的“1）文本编辑器”和“应用程序名称”和“类型”部分，基于以下事实一个`<a name="1"></a>`在它之前？示例语法会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T19:25:43.010

看起来您可以轻松地传入`attrs`匹配的字典。这看起来像是包含`name`属性。

[http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html#arg-attrs](http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html#arg-attrs)

```
soup.findAll(attrs={'name' : '1'}) 
```

如果您还没有查看过它，文档提供了大量关于如何在 HTML 文档中查找元素的非常棒的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T19:34:36.777

`findAll`您可以使用...指定属性

```
>>> a = soup.findAll("a", attrs={"name": "1"})[0] 
```

...然后获取下一个节点...

```
>>> a.next
u'1) Text Editor\n' 
```

...和下​​一个`<b>`元素...

```
>>> a.findNext("b")
<b>Application Name: Notepad</b> 
```

... 等等。

顺便说一下，这个`attrs`参数是唯一的，因为`name`它是一个特殊的参数`findAll()`。如果它是其他属性，您可以使用例如

```
>>> a = soup.findAll("a", href="whatever") 
```

# html - iFrame - 我将如何过滤掉网页的顶部？

> ID：13112132
> 
> 赞同：1
> 
> 时间：2012-10-28T19:15:31.537
> 
> 标签：html, css, iframe, positioning

如何过滤 iFrame 中出现的信息？

目前在我的 iframe atm 中出现的是；

![http://i.stack.imgur.com/tBvAS.jpg](../Images/bebbf689a96e7b071d54052345540cca.png)

但我想过滤它；

![http://i.stack.imgur.com/dqpub.jpg](../Images/eee1220a0b63861a5a2e6158b8a95277.png)

?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-28T19:40:22.703

如果域不同，您将无法对 iFrame 内容执行任何操作，如您[在此处](https://stackoverflow.com/questions/2374697/how-can-you-access-an-external-iframes-contents-via-the-dom-javascript)和许多相关问题中所见。尽管这些通常以使用 Javascript 修改内容为中心，但同样的限制也适用于 CSS。

如果这些在同一个域上，您可以使用 Javascript 使用[类似的答案](https://stackoverflow.com/questions/3714880/how-to-apply-css-to-iframe-content)来完成。

如果它不在您的域中，则有一些解决方案供您选择。*如果 iFrame 位于页面的最顶部*，或者如果您将 iFrame 的顶部隐藏在另一个元素（如图像）后面，则第一个只是`HTML`并且`CSS`有效：您可以使用否定和隐藏滚动条。在这里查看[JSFiddle](http://jsfiddle.net/ucgZq/)。*`margin``overflow: hidden;`*

 *HTML：

```
<iframe src="http://sbc.swarthmore.edu" scrolling="no">​ 
```

CSS：

```
iframe {
    width: 600px;
    height: 500px;
    overflow: hidden;
    margin-top: -50px;
}​ 
```

尽管该`scrolling="no"`属性不是`HTML5`有效的，但据我所知，有必要摆脱 Chrome 中的条形。

第二种解决方案涉及在内部加载外部页面，然后指向该页面。这使您可以完全控制正在加载的页面的内容和样式。您可以使用多种语言执行此操作，但我将发布您如何使用`PHP`.

首先，将您的 iFrame 指向您域上的页面，您将在其中放置内容。

```
<iframe src="local-content.php" style="border: 0" width="800" height="600" frameborder="0" scrolling="no"></iframe> 
```

然后在 中`local-content.php`，首先将目标`HTML`文件加载到`DOMDocument`.

```
$dom = new DOMDocument;
$dom->loadHTMLfile("http://www.external-site.com/the-page.html"); 
```

然后，您可以使用[PHP DOM 函数](http://php.net/manual/en/book.dom.php)对其进行任何修改。一个示例是向其添加样式表：

```
$our_css_url = "static/css/style.css";
$element = $dom->createElement('link');
$element->setAttribute('type', 'text/css');
$element->setAttribute('rel', 'stylesheet');
$element->setAttribute('href', $our_css_url); 
```

将其添加到`head`您的页面：

```
$head = $dom->getElementsByTagName('head')->item(0);
$head->appendChild($element); 
```

然后，当然，你输出整个事情：

```
echo $dom->saveHTML(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T19:20:16.917

我认为您无法访问其中的内容，`<iframe>`这是一种画布或将呈现 src url 的 web 视图。您不能过滤或修改由外部源呈现的内容。*

# smarty - 插件目录冲突

> ID：13112134
> 
> 赞同：0
> 
> 时间：2012-10-28T19:15:50.033
> 
> 标签：smarty, smarty3

自从我开始开发自己的修改器函数以使我的 Smarty 环境以应有的方式工作以来，我一直在苦苦挣扎。具体来说，我似乎必须在能够使用“内置”功能或我自己的功能之间做出选择，但不能同时使用两者。我确定我缺少一些东西，希望有人能指出我需要做的事情。

我目前所做的是：

1.  当使用内置函数时——诸如大写、@debug_print_var 等修饰符——它似乎可以正常工作，而无需专门指向这些内置脚本所在的目录
2.  当我开发自己的脚本时——我现在有两个——我必须明确说明它们在哪里才能让它们被识别，所以我添加了下面的代码：

代码：

```
 public static function init () {
    $object = new Smarty();
    $object->setTemplateDir ( LG_FE_DIR . '/templates/uncompiled' );
    $object->setCompileDir ( LG_FE_DIR . '/templates/compiled'  );
    $object->setCacheDir ( LG_FE_DIR . '/templates/cache' );
    $object->setConfigDir ( LG_FE_DIR . '/templates/configs' );
    // $object->setPluginsDir ( LG_FE_DIR . '/externals/Smarty/libs/plugins');
    $object->setPluginsDir ( LG_FE_DIR . '/templates/plugins_dir' );

    return $object;
} 
```

正如您从注释掉的行中看到的那样，我还尝试对默认 Smarty 库和我自己的库进行两次“setPluginsDir()”调用，但它显然只允许注册一个目录。

任何和所有的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T10:32:20.570

试试`addPluginsDir`。使用这种方法，您可以添加一个或多个插件目录，而不是重写现有的。[http://www.smarty.net/docs/en/api.add.plugins.dir.tpl](http://www.smarty.net/docs/en/api.add.plugins.dir.tpl)您还可以使用 setPluginsDir 设置多个目录 ...`setPluginsDir(array(DIR_1,DIR_2))`

# erlang - ejabberd mod_archive_odbc 内部服务器错误

> ID：13112140
> 
> 赞同：0
> 
> 时间：2012-10-28T19:16:33.983
> 
> 标签：erlang, xmpp, ejabberd, strophe

我正在尝试使用 Strophe 从 ejabberd 服务器检索消息集合。我使用查询：

```
$iq({type: 'get'}).c('retrieve', {xmlns: 'http://www.xmpp.org/extensions/xep-0136.html#ns', with:'pivo@localhost/local',  start: '2012-10-28T17:38:00.000000Z'}).c('set', {xmlns: 'http://jabber.org/protocol/rsm'}).c('max').t('100'); 
```

这将为我生成以下 XMPP 数据包：

```
<iq type='get' xmlns='jabber:client'>
    <retrieve xmlns='http://www.xmpp.org/extensions/xep-0136.html#ns' with='pivo@localhost/local' start='2012-10-28T17:38:00.000000Z'>
        <set xmlns='http://jabber.org/protocol/rsm'>
            <max>100</max>
        </set>
    </retrieve>
</iq> 
```

但问题是服务器没有成功回复，他返回给我内部服务器错误。

如果我查看 Postgres 日志，我会发现以下错误：

```
**ERROR:  date/time field value out of range: "0000-01-01 00:00:00" at character 68** 
```

我正在使用 ejabberd 2.1.10、pgsql 9.1。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T11:43:10.927

首先你必须检查这个集合是否存在。你可以这样做：

```
<iq type='get' id='123456'>
  <list xmlns='http://www.xmpp.org/extensions/xep-0136.html#ns'
        with='jabbar@localhost'>
    <set xmlns='http://jabber.org/protocol/rsm'>
      <max>30</max>/*max number of collection that you want to retrieve*/ 
    </set>
  </list>
</iq> 
```

来自 ejabberd 的回应：

```
<iq xmlns='jabber:client'
    from='root@localhost'
    to='root@localhost/24975890851351278205927376'
    id='123456'
    type='result'>
<list xmlns='http://www.xmpp.org/extensions/xep-0136.html#ns'>
<chat with='jabbar@localhost/2021512663135182487476431'
      start='2012-10-24T13:45:17.000000Z'/>
<chat with='jabbar@localhost/9286394041351135710472543'
      start='2012-10-25T20:09:13.000000Z'/>
<chat with='jabbar@localhost/9286394041351135710472543'
      start='2012-10-25T21:22:13.000000Z'/>/****** I will retrieve this *****/
<chat with='jabbar@localhost/9286394041351135710472543'
      start='2012-10-25T22:05:13.000000Z'/>
<chat with='jabbar@localhost'
      start='2012-10-25T23:03:14.000000Z'/>
<chat with='jabbar@localhost'
      start='2012-10-25T23:35:37.000000Z'/>
<set xmlns='http://jabber.org/protocol/rsm'>
<first index='0'>
63518305517@1
</first>
<last>
63518427337@15
</last>
<changed>
2012-10-25T23:37:21.000000Z
</changed>
<count>
6
</count>
</set>
</list>
</iq> 
```

现在要从集合中检索消息，您必须在请求节中准确输入“start”和“with”：

```
<iq type='get' id='433534536'>
  <retrieve xmlns='http://www.xmpp.org/extensions/xep-0136.html#ns'
            with='jabbar@localhost/9286394041351135710472543'
            start='2012-10-25T21:22:13.000000Z'>
    <set xmlns='http://jabber.org/protocol/rsm'>
      <max>100</max>
    </set>
  </retrieve>
</iq> 
```

回复：

```
<iq xmlns='jabber:client'
    from='root@localhost'
    to='root@localhost/24975890851351278205927376'
    id='433534536'
    type='result'>
<chat with='jabbar@localhost/9286394041351135710472543'
      start='2012-10-25T21:22:13.000000Z'>
<from secs='0'>
<body>
dddddddddd
</body>
</from>
<from secs='1'>
<body>
dddddddd
</body>
</from>
<set xmlns='http://jabber.org/protocol/rsm'>
<first index='0'>
63518419333@103
</first>
<last>
63518419334@105
</last>
<changed>
2012-10-25T21:22:14.000000Z
</changed>
<count>
2
</count>
</set>
</chat>
</iq> 
```

# php - 无法从数据库中获取数据

> ID：13112141
> 
> 赞同：0
> 
> 时间：2012-10-28T19:16:46.947
> 
> 标签：php, mysql, mysqli

我想从数据库中获取 5 条数据。数据库看起来像这样......

id 用户名 密码 q1 q2 q3 q4 q5 hscore lscore

q1 代表问题一。hscore 和 lcore 代表高/最后得分。

q1 q2 q3 q4 和 q5 的值都是 5、-1 或 0。如果为 5，则表示他们答对了问题，如果 -1 表示他们答错了问题，如果为 0，则表示他们没有尝试那个问题呢。

我想从所有问题中获取所有值并将它们加在一起。然后这会给我一个最后的得分值，我可以在屏幕上打印并更新数据库。

这是我的尝试，它似乎不起作用。如果有人知道为什么或对我如何完成任务有解决方案，请随时提供帮助。

下面的代码试图仅获取 q1 的值并且不起作用。数据库中有不止一行，但我认为您不能在 SELECT 语句中使用 WHERE？

```
<?php

session_start();

$connection = mysql_connect("mysql15.000webhost.com", "a4987634_quiz", "jimbo1")
or die (mysql_error());

mysql_select_db("a4987634_quiz", $connection)
or die (mysql_error());

$username = $_SESSION["username"];
$password = $_SESSION["password"];

$sql = "Select * as total from users"

$result = mysql_query ($sql)

while($row = mysql_fetch_array($result)) {

$q1 = $row["q1"];

}

echo $q1 ;

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T19:19:55.713

`$q`在循环内部定义并在循环外部显示，其中`$q`已经超出范围。Make `print_r($q)`or `print_r($row)`inside 获取周期，你会看到你的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T20:18:09.187

```
$sql = "Select field1, field2 from users";
$total= 0;
$result =mysql_fetch_object($resultmysql_query ($sql))
foreach ( $result as $value)
{
    $total = $value["field1"] + $value["field2"];
    echo "$total<br/>";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T19:21:56.367

```
$sql = "Select id, username, password, q1, q2, q3, q4, q5, hscore, lscore from users WHERE username = '" . mysql_real_escape_string($username) . "'";

if (!($result = mysql_query ($sql))) {
    echo "DB error: " . mysql_errno() . " => " . mysql_error() . "\n"; 
}

if (mysql_num_rows($result) == 0) {
    echo "No rows found\n";
}
else if (mysql_num_rows($result) > 1) {
    echo "More than 1 row found for user $username\n";
}

$last_score = 0;

while($row = mysql_fetch_array($result)) {
    $user = $row["username"];
    $last_score = $row["q1"] + $row["q2"] + $row["q3"] + $row["q4"] + $row["q5"];
    echo "$user => $last_score\n";
} 
```

# c++ - unresolved external symbol PriorityQueue

> ID：13112145
> 
> 赞同：0
> 
> 时间：2012-10-28T19:17:14.713
> 
> 标签：c++, priority-queue, binary-heap

can anyone help me with this please. I am trying to build a priority queue but keep getting a unresolved external symbol error. Any help would be well appreciated.

Error 2 error LNK2019: unresolved external symbol "public: __thiscall Node::Node(void)" (??0Node@@QAE@XZ) referenced in function "public: __thiscall PriorityQueue::PriorityQueue(void)" (??0PriorityQueue@@QAE@XZ)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T19:20:21.630

You have forgotten to implement the Node constructor `Node::Node`.

Also a function with no parameters is written `Node()` and not `Node(void)` the latter is legacy.

# ruby-on-rails - 如何在 gem 中访问 Rails 的数据？

> ID：13112149
> 
> 赞同：2
> 
> 时间：2012-10-28T19:17:32.780
> 
> 标签：ruby-on-rails, activerecord, gem, faye, private-pub

我使用 faye 和私人酒吧作为推送服务器。当他订阅频道时，我需要将用户的状态更新为在线。

我已经分叉了 private_pub gem 并更改了一些代码，我的应用程序发送了 user_id，但我不知道如何找到用户并更新他的状态，因为订阅事件在 gem 中触发。

```
module PrivatePub
  # This class is an extension for the Faye::RackAdapter.
  # It is used inside of PrivatePub.faye_app.
  class FayeExtension

    def incoming(message, callback)
      p "user_id = #{message['ext']['user_id']}"
      if message["channel"] == "/meta/subscribe"
        authenticate_subscribe(message)
        # user = User.find(message['ext']['user_id'])
        # user.status = 'online'
        # user.save
      elsif message["channel"] !~ %r{^/meta/}
        authenticate_publish(message)
      end
      callback.call(message)
    end
  end
end 
```

我可以获得 user_id 但我不能在 gem 中使用用户模型。最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-22T10:49:13.323

尝试将环境添加到 private_pub.rb。例如。

```
require File.expand_path("../config/environment", __FILE__) 
```

# java - 用于简单 Java 动画的良好图形 API？

> ID：13112150
> 
> 赞同：3
> 
> 时间：2012-10-28T19:17:37.430
> 
> 标签：java, swing, animation

作为基于团队的项目的一部分，我正在研究一些潜在的 2D 框架/API，我们的系统可以使用它们来为数组设置动画（例如交换、删除） 到目前为止，我遇到了 Timing-Framework。我已经在这个框架中实现了一个基本的动画（简单的 x 到 y 运动），但它的库和示例似乎相当复杂。

有谁知道可以合并到 Eclipse 或任何其他合适的 IDE 中来构建这个简单动画的任何更简单的框架/API？我看过其他人，但从表面上看，大多数人似乎仍然相当复杂。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-28T19:41:55.393

java.awt.Robot 类用于生成本地系统输入事件，用于测试自动化、自运行演示和其他需要控制鼠标和键盘的应用程序。Robot 的主要目的是促进 Java 平台实现的自动化测试。

有关[演示](http://www.javalobby.org/java/forums/t84094.html)，请查看此站点或[java2s 中的演示](http://www.java2s.com/Tutorial/Java/0120__Development/0980__Robot.htm)

# iphone - iPad禁用开/关按钮

> ID：13112151
> 
> 赞同：-1
> 
> 时间：2012-10-28T19:17:52.240
> 
> 标签：iphone, ipad

寻找禁用 iPad 上的 ON/OFF 按钮的应用程序/程序。换句话说，iPad 无法关机。理想情况下，应用程序充当开关。打开时，电源按钮被禁用。关闭时，用户可以使用按钮正常打开或关闭 iPad。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T22:03:07.237

iOS6 可访问性首选项中有 Guided Access，它禁用按钮，但这是用户启用的，不确定是否有 API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T19:24:49.927

不可能。ios6 上有一个“kiosk”模式，您可以查看一下。取决于你实际想要达到的目标。

# php - 具有 GET 安全性的 PHP 访问数据库

> ID：13112152
> 
> 赞同：1
> 
> 时间：2012-10-28T19:17:56.120
> 
> 标签：php, database, security, get

我正在使用 PHP 编写数据库接口。数据库的功能之一是允许会员在线登录和注册活动。我想创建一个 php 文件，该文件将创建一个用户可以订阅的动态日历文件。www.hostname.net/my_calendar.php?memid=123 的效果。然后该文件将在数据库中搜索成员123已注册的事件并即时创建日历文件。我担心为此目的使用会员的身份证号码的安全性。是否有一种以合理数量的安全性来完成此任务的好方法，或者这里可能存在我没有考虑的安全问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T19:20:10.690

你不应该这样做`my_calendar.php?memid=123`。如果用户已登录，您将通过会话或 cookie 跟踪他的用户 ID。因此，您可以`/my_calendar.php`. 这样，用户就不能尝试查看其他人的日历。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T19:30:43.110

我没有链接会有任何安全问题，但这**取决于恶意用户可以使用该 ID 做什么。** 例如，StackOverflow 也使用用户 ID 作为他们的个人资料，例如[https://stackoverflow.com/users/ **808723** /gamescripting](https://stackoverflow.com/users/808723/gamescripting)。

如果您希望用户只看到自己的事件，请[遵循 xbonez 建议的方法](https://stackoverflow.com/a/13112173/808723)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T19:42:12.043

您可以尝试散列一些用户的公开详细信息。例如，您可以`user_id`使用此方法[http://blog.kevburnsjr.com/php-unique-hash](http://blog.kevburnsjr.com/php-unique-hash)合并用户的名字/姓氏和他的名字。这将生成一个类似于`cJio3`. 将`user_id`被混淆。这不会阻止任何黑客进入，但会减慢他们的速度。:)

# php - ajax 到 php 未定义索引

> ID：13112159
> 
> 赞同：0
> 
> 时间：2012-10-28T19:18:41.583
> 
> 标签：php, jquery, ajax

我见过这样的问题，但似乎没有一个答案对我有用。我试图将 POST 数据发送到一个单独的 php 文件，该文件会将其插入数据库。我收到一条 PHP 通知：未定义索引 arg1 和 arg2 .....这是 ajax：

```
function performAjaxSubmission() {
        $.ajax({
          url: 'likedata.php',
          method: 'POST',
          data: {
            'action': 'save',
            'arg1': '<?php echo $_SESSION['userId'];?>', 
            'arg2': '<?php echo $p;?>'

          },
          success: function() {
            alert("success!");
          }
        });
        return false; // <--- important, prevents the link's href (hash in this example) from executing.
      }

      jQuery(document).ready(function() {
        $(".icon-thumbs-up").click(performAjaxSubmission);
      }); 
```

这是likedata.php

```
if(isset($_POST)){
$liker = $_POST['arg1'];
$likee = $_POST['arg2'];

$profile->insertLikes($liker, $likee);

} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T20:14:11.293

```
$.post("likedata.php",{
'arg1': "<?php echo $_SESSION['userId'];?>", 
'arg2': "<?php echo $p;?>"postaction:'action' },
function(data){
  .
  .
  .
},'json'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T19:28:05.587

```
 'arg1': "<?php echo $_SESSION['userId'];?>", 
        'arg2': "<?php echo $p;?>" 
```

您在单引号内有单引号而没有转义。

# google-app-engine - 使用数据存储区 (NDB)、搜索 API 或两者来查看数据？

> ID：13112161
> 
> 赞同：5
> 
> 时间：2012-10-28T19:19:07.117
> 
> 标签：google-app-engine, full-text-search, google-cloud-datastore, app-engine-ndb

在 CMS 中，使用带有排序的常规 NDB 查询检索客户列表。为了允许过滤姓名、公司名称和电子邮件，我创建了几个（有时很多）索引。情况并不理想，但可行。

现在有（实验性）[搜索 API](https://developers.google.com/appengine/docs/python/search/overview)。它似乎与数据存储（或 NDB）无关，但我的数据已经存在。

我想同时使用全文搜索并在多个字段上放置过滤器，那么我应该将我的数据保留在数据存储中，并在搜索 API 的文档中复制部分数据吗？或者，正如[搜索示例所建议](http://code.google.com/p/google-app-engine-samples/source/browse/trunk/search/python)的那样，完全跳过数据存储区。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T08:34:57.070

我不太确定推荐的实现方法是什么，但 Search API 似乎主要用作附加的手动管理索引。在大多数情况下，将所有数据存储在 Search API 中并不理想，因为您可以轻松地使用您永远不需要过滤或搜索的字段来破坏搜索 API 索引的大小，也不是很好地设计用于需要定期写入的情况。

我个人的建议是将所有数据留在 NDB 中，并设计类以使用 Search API 创建包含相关可搜索数据的文档，通过每次写入数据存储时更新 Search API 版本来保持两种媒体之间的一致性版本（或者如果您要大量写入数据，则使用任务/crons 或类似系统）。在搜索 API 文档中过滤相关数据时，您应该存储您在 UI 中显示的任何数据，因为手动加入搜索 API 结果和数据存储数据是不必要的密集型，并且会严重减慢整个过程。

# excel - 按日期求和过滤

> ID：13112163
> 
> 赞同：0
> 
> 时间：2012-10-28T19:19:12.320
> 
> 标签：excel, excel-2007, excel-formula

在我的业务中，我所做的是提供一本 25 张优惠券的书。如果客户购买任何东西（从我给优惠券的特殊人士那里说人 A、人 B 等），人 A 给客户一张优惠券。我正在做的是在excel中维护相同的数据库。第一列有优惠券代码。然后是我详细记录的日期。然后是已售出的列，我在其中放置了已售优惠券的每日详细信息。然后我有剩余优惠券列，最后是相应优惠券簿中剩余的总优惠券

数据如下所示。

```
Coupon #    Date    Sold    Remaining   Starting Day Coupon Counter
Coupon A    22-Oct-12   22  3   25
Coupon B    22-Oct-12   16  9   25
Coupon C    22-Oct-12   24  1   25
Coupon A    23-Oct-12   3   0   3
Coupon B    23-Oct-12   9   0   9
Coupon C    23-Oct-12   1   0   1
Coupon D    23-Oct-12   5   20  25
Coupon E    23-Oct-12   8   17  25
Coupon F    23-Oct-12   2   23  25
Coupon D    24-Oct-12   20  0   20
Coupon E    24-Oct-12   17  0   17
Coupon F    24-Oct-12   23  0   23 
```

我想要的是相应日期的**相同数据**。我正在寻找的输出如下。

```
Date    Sold    Remaining   Starting Day Coupon Counter
22-Oct-12   62  13  75
23-Oct-12   28  60  88
24-Oct-12   60  0   60 
```

有什么想法可以完成吗？我知道如何得到总和，但不知道如何用任何东西过滤它。

## 编辑 1

我知道这可以使用宏来完成，但是我想使用 excel 中可用的预定义函数。

任何想法/建议如何完成这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T20:14:51.313

预先构建带有日期的报告表，然后像这样使用 SUMIF：

`=SUMIF(date range, date cell (date to get information for), entire column to sum for)`

这使用了法国公式，但您应该能够使其与您的工作簿一起工作，因为您知道它实际上是`SUMIF`。

![在此处输入图像描述](../Images/41c9f137411b9ea602677ae32d4396b7.png)

# android - Android：为什么 BufferedReader 会读取 EOF？

> ID：13112165
> 
> 赞同：1
> 
> 时间：2012-10-28T19:19:18.630
> 
> 标签：android, android-emulator, bufferedreader, eof, garbage

我正在模拟器中阅读我的 Android 应用程序中的单词词典，并发现 BufferedReader 正在阅读 EOF。为什么会这样做？这是使用 BufferedReader 的代码。

```
public void populateWordsTable(FileReader reader ) {
    try {
        BufferedReader br = new BufferedReader(reader);
        String s;
        while((s = br.readLine()) != null) {
            ContentValues cv=new ContentValues();
            String[] words = s.split(":");
            if ( words.length < 2 || words[1].isEmpty() || words[1].length() < 2 ) {
                System.out.println( "Skipping: " + s );
                continue; // only want words with lots of ending variations? to save time
            }
            String word  = words[0];
            System.out.println("adding: " + s);
            cv.put( WORD , word );
            db.insert( WORD_TABLE , null, cv);
        }
        br.close();
    }
    catch (IOException ex) {
        System.out.println( "Oh no, an exception: " + ex );
    }
    finally {
        reader.close();
    }
} 
```

以下是显示它出于某种原因读取过 EOF 的输出：

请注意，“zyrian: zyrians”是我正在读取的字典文件的最后一行。

```
10-28 18:51:37.933: I/System.out(4473): adding: zygospore: zygospores, 
10-28 18:51:38.056: I/System.out(4473): adding: zygote: zygotes, 
10-28 18:51:38.155: I/System.out(4473): Skipping: zygotene: 
10-28 18:51:38.174: I/System.out(4473): Skipping: zygotic: 
10-28 18:51:38.174: I/System.out(4473): Skipping: zyloprim: 
10-28 18:51:38.174: I/System.out(4473): Skipping: zymase: 
10-28 18:51:38.174: I/System.out(4473): adding: zymogen: zymogens, 
10-28 18:51:38.284: I/System.out(4473): Skipping: zymoid: 
10-28 18:51:38.328: I/System.out(4473): Skipping: zymology: 
10-28 18:51:38.328: I/System.out(4473): Skipping: zymolysis: 
10-28 18:51:38.364: I/System.out(4473): Skipping: zymosis: 
10-28 18:51:38.364: I/System.out(4473): Skipping: zymotic: 
10-28 18:51:38.364: I/System.out(4473): Skipping: zymurgy: 
10-28 18:51:38.384: I/System.out(4473): adding: zyrian: zyrians, 
10-28 18:51:38.604: I/System.out(4473): Skipping: PK?????Y\A?????????????????????????????res/layout/activity_main.xml?TMkA~'??n??4??(x?T?????bE???,6?awb
10-28 18:51:38.604: I/System.out(4473): adding: ??P????????k?t?k?:????<????}?y??@??#??5???("??3??[??##???O????B!l??nx?Gl?-?J?O?A???8q?hG07????? ?;$
10-28 18:51:38.716: D/dalvikvm(4473): GC_CONCURRENT freed 396K, 55% free 2658K/5831K, external 929K/1038K, paused 8ms+7ms
10-28 18:51:38.788: I/System.out(4473): Skipping: #M??????tR(?è???n???I?',?ZI??mJ???o/]?,?q??u5? m??8\?F??4?Bh?f?[.?(E?}??U?0 6???????/??@?<!?b
10-28 18:51:38.788: I/System.out(4473): adding: q?+?R?#?{ ~?????S?g?2??u0??g????e"?????????:?t??'4m
10-28 18:51:38.866: I/System.out(4473): Skipping: M?I?Ss?kn#W?4?\?(i?????8??}*?P?5%?s??u8??!??5?9???7??!?Z?YKS??yd5?=[??d\i?W[f>X??|?r??f%M?????0??{?K?t??y???g3~E
10-28 18:51:38.866: I/System.out(4473): Skipping: ??SC?=,?????|???1?^Rh?9???]??ngg?_w??;?<_??\???sS?yE??L?x???;?~??byp7g8?? 
```

等等

谢谢你的任何线索

**更新**：

speakcode 和 full.stack.ex 让我展示 FileReader 是如何创建的。

我关注了另一个关于如何通过给它一个错误的扩展名将文本文件解压缩到“资产”文件夹中的线程。像这样...

```
 public void populateTables() {
      //TODO: is there a way to get the assets from the application, or does it have
  // to happen in an Activity?

      ThisVsThatApplication myapp = (ThisVsThatApplication)getApplicationContext();
      WordsDB db = myapp.getDB();
      if ( db == null ) {
        myapp.printerizer( "The database was not initialized.");
        return;
      }
      try {
        AssetFileDescriptor descriptor = getAssets().openFd("dictionary.jpg");
        FileReader reader = new FileReader(descriptor.getFileDescriptor());
            db.populateWordsTable(reader);
      } 
      catch ( IOException ex ) {
        System.out.println( "Oh noes an exception: " + ex );
      }
  } 
```

那么，也许 FileReader 认为这是一个二进制文件？我想知道我是否可以直接告诉它是一个文本文件....

使用 full.stack.ex 建议的代码，在此处进行了更改，并且可以正常工作！

```
InputStream is = getAssets().open("dictionary.txt");
BufferedReader br = new BufferedReader(new InputStreamReader(is));
db.populateWordsTable(br); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T21:52:31.557

跟进评论，这是一段生产代码，删除了一些不相关的部分并保留了一些。如您所见，我们在资产中有一些子目录。请注意，它使用方法**open**而不是**openFd**。我可能仍然缺少一些东西，但是这些东西已经工作了很长时间。

```
public InputStream openInputStream(String inFileName) throws IOException {
    AssetManager assetManager = myContext.getAssets();
    String separator = "/";
    if ("".equals(getInputAssetSubdirectory())) {
        separator = "";
    }
    InputStream in = new BufferedInputStream(assetManager.open(getInputAssetSubdirectory() + separator + inFileName), BUFFER_SIZE);
    return in;
} 
```

# eclipse - Eclipse & TestNg：如何排除 testng 测试输出文件夹

> ID：13112167
> 
> 赞同：1
> 
> 时间：2012-10-28T19:19:37.137
> 
> 标签：eclipse, testng

目前，在从 Eclipse 内部进行 Maven 构建之后，我在问题选项卡中收到许多警告，这些警告与 /test-output 文件夹中 testng 生成的 html 输出相关。我无法找到从验证中排除此文件夹的方法。请记住，此文件夹显然不在构建路径中！

有任何想法吗？

谢谢，贝扎德

# c++ - OpenCV 无法读取 AVI 文件

> ID：13112168
> 
> 赞同：1
> 
> 时间：2012-10-28T19:19:43.640
> 
> 标签：c++, video, opencv, avi

我知道已经有很多类似的问题，但不幸的是，它们都无济于事。所以，这就是问题所在（我对 OpenCV 很陌生）。

试图简单地打开并显示一个 AVI 文件。该文件存在并且它的路径是正确的。

```
int main( int argc, char** argv )
{
    VideoCapture cap;

    if(!cap.open(argv[1]))
    {
        printf("Failed to open %s\n", argv[1]);
        return -1;
    }

    namedWindow("Video output", 1);

    for(;;)
    {
        Mat curFrame;

        cap >> curFrame;

        imshow("Video output\n", curFrame);

        if(waitKey(30) >= 0)
            break;
    }

    return 0;
} 
```

没有出现错误，open() 返回 false。

我之前已经用 mencode 转换了文件。以下是有关该文件的信息：

```
boris@boris-ubuntu:~$ ffmpeg -i out.avi 
ffmpeg version 0.8.3-4:0.8.3-0ubuntu0.12.04.1, Copyright (c) 2000-2012 the Libav developers
  built on Jun 12 2012 16:37:58 with gcc 4.6.3
*** THIS PROGRAM IS DEPRECATED ***
This program is only provided for compatibility and will be removed in a future release. Please use avconv instead.
Input #0, avi, from 'out.avi':
  Metadata:
    encoder         : MEncoder svn r34540 (Ubuntu), built with gcc-4.6
  Duration: 00:00:01.00, start: 0.000000, bitrate: 265458 kb/s
    Stream #0.0: Video: rawvideo, yuv420p, 1280x720, PAR 1:1 DAR 16:9, 24 tbr, 24 tbn, 24 tbc
At least one output file must be specified 
```

据我了解，OpenCV支持的视频格式yuv420p。

有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T20:33:37.317

好吧，问题是 OpenCV 是在没有 ffmpeg（或任何其他视频库）支持的情况下编译的。

感谢[这篇很棒的帖子](http://jayrambhia.wordpress.com/2012/06/20/install-opencv-2-4-in-ubuntu-12-04-precise-pangolin/)，我成功安装了 ffmpeg 并重新编译了 OpenCV，然后一切都很好。

# c# - 如何在 iTextSharp 字符串中使用 HTML 标签

> ID：13112171
> 
> 赞同：5
> 
> 时间：2012-10-28T19:20:02.047
> 
> 标签：c#, html-parsing, itextsharp

我有一个这样的 iTextSharp 页脚模板方法：

```
public PdfTemplate footerTemplate(){
    PdfTemplate footer = cb.CreateTemplate(500, 50);
    footer.BeginText();
    BaseFont bf2 = BaseFont.CreateFont(BaseFont.TIMES_ITALIC, "windows-1254", BaseFont.NOT_EMBEDDED);
    footer.SetFontAndSize(bf2, 11);
    footer.SetColorStroke(BaseColor.DARK_GRAY);
    footer.SetColorFill(BaseColor.GRAY);
    int al = -200;
    int v = 45 - 15;
        float widthoftext = 500.0f - bf2.GetWidthPoint(footerOneLine[0], 11);
        footer.ShowTextAligned(al, footerOneLine[0], widthoftext, v, 0);
    footer.EndText();
    return footer;
} 
```

footerTemplate() 得到这样的字符串：

```
footerOneLine.Add("<b>All this line is bold, and <u>this is bold and underlined</u></b>"); 
```

我还有另一种方法将字符串转换为 HTML。方法是：

```
private Paragraph CreateSimpleHtmlParagraph(String text) {
    //Our return object
    Paragraph p = new Paragraph();

    //ParseToList requires a StreamReader instead of just text
    using (StringReader sr = new StringReader(text)) {
        //Parse and get a collection of elements
        List<IElement> elements = iTextSharp.text.html.simpleparser.HTMLWorker.ParseToList(sr, null);
        foreach (IElement e in elements) {
            //Add those elements to the paragraph
            p.Add(e);
        }
    }
    //Return the paragraph
    return p;
} 
```

问题：我没有设法`CreateSimpleHtmlParagraph`在上述代码中使用方法。`footer.ShowTextAligned(al, footerOneLine[0], widthoftext, v, 0);`方法的数据类型是`footer.ShowTextAligned(int, string, float, float, float);` 你能帮我`CreateSimpleHtmlParagraph`在上面的代码中如何使用方法吗？亲切的问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:32:30.000

我不完全知道您是如何使用`PdfTemplate`的，但是您将 iTextSharp 的文本抽象（例如 a`Paragraph`和）`Chunk`与原始 PDF 命令（例如`ShowText()`. 抽象最终使用原始命令，但可以方便地帮助您处理通常必须手动计算的换行符和当前坐标。

好消息是，只要您愿意接受您有一个固定的矩形可以在其中绘制文本，就有一种称为`ColumnText`直接与对象一起工作的抽象。`PdfWriter.PdfContentByte`

```
//Create a ColumnText from the current writer
var ct = new ColumnText(writer.DirectContent);
//Set the dimensions of the ColumnText
ct.SetSimpleColumn(0, 0, 500, 0 + 20);
//Create two fonts
var helv_n = BaseFont.CreateFont(BaseFont.HELVETICA, BaseFont.WINANSI, BaseFont.NOT_EMBEDDED);
var helv_b = BaseFont.CreateFont(BaseFont.HELVETICA_BOLD, BaseFont.WINANSI, BaseFont.NOT_EMBEDDED);
//Create a paragraph
var p = new Paragraph();
//Add two chunks to the paragraph with different fonts 
p.Add(new Chunk("Hello ", new iTextSharp.text.Font(helv_n, 12)));
p.Add(new Chunk("World", new iTextSharp.text.Font(helv_b, 12)));
//Add the paragraph to the ColumnText
ct.AddElement(p);
//Tell the ColumnText to draw itself
ct.Go(); 
```

# excel - 使用没有 VBA 的公式在 Excel 中生成唯一的随机数

> ID：13112178
> 
> 赞同：2
> 
> 时间：2012-10-28T19:20:23.290
> 
> 标签：excel, random, excel-formula

我必须只使用公式而不是 VBA 来生成从 0 到 50 的五个不同的随机数。我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-28T20:09:53.953

假设 A1 为空白或文本标题，您可以在 A2 中使用此“数组公式”

`=SMALL(IF(COUNTIF(A$1:A1,ROW(INDIRECT("1:51"))-1)=0,ROW(INDIRECT("1:51"))-1),INT(RAND()*(51-ROWS(A$2:A2)+1)+1))`

使用 CTRL+SHIFT+ENTER 进行确认，以便像 { 和 } 这样的花括号出现在公式栏中的公式周围，现在复制到 A6

这将生成从 0 到 50 的 5 个整数而不会重复

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T19:33:46.247

您可能需要根据您的使用情况对以下内容进行四舍五入。

```
=RAND() * 50 
```

# sql - 如何在 Oracle 中编写长 group by/case 子句？

> ID：13112179
> 
> 赞同：0
> 
> 时间：2012-10-28T19:20:40.413
> 
> 标签：sql, oracle, oracle11g

我经常有一些查询，我想在其中按 case 子句进行分组，例如：

```
SELECT
    CASE WHEN FIELD IS NULL                     |
    AND (SOMETHING > 100 OR SOMETHINGELSE < 50) |
    AND THATDATE >= add_months(sysdate, -4)     | -> Case
        THEN 0 ELSE 1                           |                                                               
    END AS dim_1,                               |                                                               
    dim_2,
    sum(SOMEFIELD_TOTAL) as measure_1
FROM MY_TABLE
GROUP BY
    CASE WHEN FIELD IS NULL                     | 
    AND (SOMETHING > 100 OR SOMETHINGELSE < 50) | 
    AND THATDATE >= add_months(sysdate, -4)     | -> Same case
        THEN 0 ELSE 1                           |                                                                
    END,                                        |                                                                
    dim_2 
```

有没有办法可以将我为整个案例定义的别名用于`group by`, 像, `group by dim_1`？

找到[了这个解释](https://stackoverflow.com/questions/2681494/why-doesnt-oracle-sql-allow-us-to-use-column-aliases-in-group-by-clauses)，我仍然想知道是否有出路。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T19:24:43.610

我认为您过度关注重复表达。Oracle 和任何其他 DBMS 都会将该表达式识别为重复项并仅计算一次。如果您只是不想重复它（请注意，这只是***剪切和粘贴的***琐事），您可以使用派生表或公用表表达式。

```
SELECT 
    dim_1, dim_2, sum(SOMEFIELD_TOTAL) as measure_1
FROM (
    SELECT
        CASE WHEN FIELD IS NULL                     |
        AND (SOMETHING > 100 OR SOMETHINGELSE < 50) |
        AND THATDATE >= add_months(sysdate, -4)     | -> Case
            THEN 0 ELSE 1                           |                                                               
        END AS dim_1,                               |                                                               
        dim_2,
        SOMEFIELD_TOTAL
    FROM MY_TABLE
) AS SQ
GROUP BY
    dim_1, dim_2 
```

它看起来并没有更好，不是吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T05:43:05.930

你可以使用[`subquery factoring`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_10002.htm#i2077142)也知道`named subquery`和 `common table expression (CTE)`（感谢@a_horse_with_no_name）

```
WITH t as 
(
SELECT
    CASE WHEN FIELD IS NULL                     
    AND (SOMETHING > 100 OR SOMETHINGELSE < 50) 
    AND THATDATE >= add_months(sysdate, -4)     
        THEN 0 ELSE 1 END AS dim_1,         
    dim_2,
    SOMEFIELD_TOTAL as measure_1
FROM MY_TABLE
)
SELECT dim_1, dim_2, sum(SOMEFIELD_TOTAL)
FROM t
GROUP BY dim_1, dim_2 
```

这种方法的优点是您可以拥有许多子查询，而不必像在常规子查询中那样加入它们（内部选择）

# extjs - extjs：获取使用 form.buttons 创建的按钮的引用？

> ID：13112186
> 
> 赞同：0
> 
> 时间：2012-10-28T19:21:53.130
> 
> 标签：extjs

在带有按钮的表单上创建按钮后：[{ }]，这是整个停靠项语法的简写，检查显示 form.buttons 为空，并且按钮仅存在于 form.dokedItems 中。由于 .buttons 是一个配置，他们不应该能够以这种方式访问​​吗？会比潜入停靠的物品容易一点还是我很挑剔？:-) 蒂亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T20:04:44.933

You can use the down() selector to grab it:

```
Ext.require('*');

Ext.onReady(function() {

    var panel = Ext.create('Ext.panel.Panel', {
        renderTo: document.body,
        width: 400,
        height: 400,
        buttons: [{
            itemId: 'b1',
            text: 'Foo'
        }]
    });

    console.log(panel.down('#b1'));

}); 
```

# html - HTML5 视频 - durationhint 属性是否有效？

> ID：13112191
> 
> 赞同：0
> 
> 时间：2012-10-28T19:22:41.250
> 
> 标签：html, video, attributes, duration, hint

谷歌搜索：

持续时间提示 html5 视频

提出了一些结果，显示人们使用以下内容：

```
<video .... durationhint="120"> 
```

查看[w3c html5 视频标签规范](http://www.w3.org/wiki/HTML/Elements/video)，找不到 durationhint 。

这个属性有效吗？哪些浏览器实际使用它？它的目的是什么（请不要说“视频播放期间的提示”……我知道那部分……但它实际上是做什么的）？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T20:23:50.260

它没有列在当前的[W3C HTML5 工作草案中](http://www.w3.org/TR/2012/WD-html5-20121025/the-video-element.html#the-video-element)，也没有列在[WHATWG HTML 规范](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-video-element.html#the-video-element)中。所以这个属性的使用是无效的。

这个问题是谷歌搜索“HTML5 durationhint”的最佳结果之一，它暗示该属性并未广为人知/使用甚至指定。

在扫描了一些其他结果之后，在我看来，这是 Kaltura 视频播放器使用的专有属性（不过，对此并不感到满意）。从[Kaltura 问题](http://www.kaltura.org/support-seeking-flash-fallback-player)：

> `durationHint='XX:XX'`如果您将属性添加到您的标签，HTML5 视频接口支持先行搜索/伪流请求。

# jquery - 如果下一个开始，则结束上一个动画

> ID：13112197
> 
> 赞同：0
> 
> 时间：2012-10-28T19:23:14.853
> 
> 标签：jquery, jquery-animate

我有这样的动画

```
<hhtml>
<head>
<script type='text/javascript' src='jquery.js'></script>
<script type='text/javascript'>
$().ready(function(){

   $(".btn").click(function(){
var obj=$(this).parent().find("img");
var h=$(obj).height();
var w=$(obj).width();
var st=$(obj).offset().top;
var sl=$(obj).offset().left;    

$("body").append("<div id='mtc' style='position:absolute;z-index:100;top:"+st+"px;left:"+sl+"px;'></div>");

$(obj).clone().appendTo("#mtc");
$("#mtc").css({height:'100px',width:'100px',opacity: '0.8'});

$("#mtc").animate({ 
       left:"999px",
       top:"0px"
        },2000,function(){
            $(this).remove();
            });

     });

});
</script>
<style>
   div{
     width:200px;
     height:300px;
     margin:10px;
     padding:5px;
     float:left;
   }
   p{
      .....
    }
</style>
</head>
<body>
  <div> <h3>img1</h3> <img src='a.png'>  <p class='btn'>Click</p> </div>
  <div> <h3>img1</h3> <img src='a.png'>  <p class='btn'>Click</p> </div>
  <div> <h3>img1</h3> <img src='a.png'>  <p class='btn'>Click</p> </div>
  <div> <h3>img1</h3> <img src='a.png'>  <p class='btn'>Click</p> </div>
  <div> <h3>img1</h3> <img src='a.png'>  <p class='btn'>Click</p> </div>
</body>
</html> 
```

它工作正常，但是当 1 个动画正在进行时，我单击另一个 .btn 开始另一个。
当第二个动画开始时，两者都停止（并挂起一段时间）。
**我需要让他们顺利。**

# android - 控制 Xperia U 上的照明条

> ID：13112198
> 
> 赞同：0
> 
> 时间：2012-10-28T19:23:22.183
> 
> 标签：android, sony

我想控制我的 XperiaU 的“照明条”。我希望我的应用程序更改条形图的颜色和强度。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T21:40:25.327

索尼为开发人员提供了一个非常好的页面。我认为您的问题属于那里，因为它非常具体。 [索尼开发商](http://developer.sonymobile.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T22:45:04.203

我们现在有一个官方 API 来支持 Illumination。有关更多详细信息，请参见此处：

[http://developer.sonymobile.com/2013/06/20/new-experimental-illumination-bar-api-available/](http://developer.sonymobile.com/2013/06/20/new-experimental-illumination-bar-api-available/)

# css - 在 Twitter-Bootstrap 中调整按钮大小

> ID：13112200
> 
> 赞同：35
> 
> 时间：2012-10-28T19:23:27.480
> 
> 标签：css, twitter-bootstrap, button

我正在开发一个适合移动设备的网络应用程序，我希望它具有非常简单的用户界面，包括大到连安德烈巨人都可以轻松点击它们的按钮。

问题是，我看不到通过将引导按钮的宽度或高度设置为百分比、像素数或简单地让它们填充容器来显式调整引导按钮大小的简单方法。除了使用“btn btn-small”或“btn btn-large”类之外，是否有一种规范的方法可以大大扩大按钮，或者这被认为是一种不好的做法？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-10-28T20:41:45.443

Bootstrap 是一个很棒的框架，但它并没有涵盖所有内容。它知道并使用其 OOCSS 原则应该扩展到您的需求。

如果我自己调整 Bootstrap 组件，我通常会创建一个`bootstrap-extensions.css`文件，其中包含基本组件的任何扩展，例如超大按钮。

这是一个扩展类如何将一组新按钮添加到框架的示例实现。此示例还包括一个示例使用`.btn-block`，该示例已包含在框架中。

**CSS：**

```
/**
 * Extra large button extensions. Extends `.btn`.
 */
.btn-xlarge {
    padding: 18px 28px;
    font-size: 22px;
    line-height: normal;
    -webkit-border-radius: 8px;
       -moz-border-radius: 8px;
            border-radius: 8px;
    } 
```

**演示：http:** [//jsfiddle.net/Pspb9/](http://jsfiddle.net/Pspb9/)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-02-09T18:28:40.727

@amustill 的答案很容易适应**Bootstrap 3.1.0**：

```
.btn-xl {
    padding: 18px 28px;
    font-size: 22px;
    border-radius: 8px;
} 
```

**jsFiddle**：http: [//jsfiddle.net/Abdull/2rkkJ/](http://jsfiddle.net/Abdull/2rkkJ/)

这种适应会自动*`:hover`变暗*和*`:active`阴影嵌入*。

# android - 在 LinearLayout 中对齐 TextView 和 ImageView

> ID：13112205
> 
> 赞同：3
> 
> 时间：2012-10-28T19:24:40.133
> 
> 标签：android, xml, textview, imageview, android-linearlayout

我有一个带有自定义适配器的 ListView 和此列表中项目的布局。项目的布局只是一个带有 ImageView 的 TextView。图像应与屏幕右侧对齐。但是，图像的位置会发生一些变化，具体取决于 TextView 中文本的长度。这是它的样子：

![截屏](../Images/ae4058b4a6929021ea62bb512623baf4.png)

这是我的 XML 代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal"
    android:gravity="center_vertical" >

    <TextView
        android:id="@+id/txtCategoryName"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="10"
        android:singleLine="true"
        android:ellipsize="end"
        android:gravity="center_vertical"
        android:paddingTop="5dp"
        android:paddingBottom="5dp"
        android:textColor="@color/list_text_color"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <ImageView
        android:id="@+id/imgArrowRight"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:src="@drawable/right_arrow_44"
        android:contentDescription="@string/img_description_right_arrow"
        android:layout_gravity="right" />

</LinearLayout> 
```

如何使图像始终向右对齐，而不被轻推？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-28T19:34:15.423

[RelativeLayout](http://developer.android.com/reference/android/widget/RelativeLayout.html)`android:layout_alignParentRight`应该使用and很好地解决您的问题`android:layout_alignParentLeft`。就像是：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

<TextView
    android:id="@+id/txtCategoryName"
    android:layout_alignParentLeft="true"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:singleLine="true"
    android:ellipsize="end"
    android:gravity="center_vertical"
    android:paddingTop="5dp"
    android:paddingBottom="5dp"
    android:textColor="@color/list_text_color"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<ImageView
    android:id="@+id/imgArrowRight"
    android:layout_alignParentRight="true"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/right_arrow_44"
    android:contentDescription="@string/img_description_right_arrow"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T19:30:25.167

我认为您尝试使用[RelativeLayout](http://developer.android.com/reference/android/widget/RelativeLayout.html)并在图像上使用对齐父级并在 TextView 上左对齐父级。

# c - 简单的 Rand() 函数

> ID：13112210
> 
> 赞同：1
> 
> 时间：2012-10-28T19:25:03.550
> 
> 标签：c, function, loops, random

> 使用以下原型编写一个函数。int getRandomIntFrom0ToK(int K) 函数调用随机数生成器，该生成器生成一个均匀分布在区间 [0,1] 中的随机值，对于正整数 K，返回一个均匀分布在整数 {0,1,2, 上的随机数。 ..K}。编写一个程序来测试这个函数，它表明你的函数生成的随机整数以大致相等的概率命中 {0,1,2,...K} 中的每个数字。

那么，为什么有两个区间呢？

{0,K} 是可以理解的，但为什么需要 [0,1] 呢？

到目前为止我不知道我在做什么：

```
#include <stdio.h>

int getRandomIntFrom0toK(int K)
{
    int i=0;

    printf("enter k:");
    scanf("%d",&K);

    while (i<K)
    {
        int num=(rand()%(K-1)+1);
        printf("%d\n",num);
        i++;
    }
}

int main(void)
{
    int result=getRandomIntFrom0toK(1+rand()%(1));
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T19:50:15.157

区间 [0,1] 通常是随机数生成器在返回“实”数（即浮点数，而不是整数）时可能返回的值。这不是你*想要*的，这是你作为随机数生成器*得到的。*您的任务是将结果转换为您想要的，即 0 到 K 之间的整数。

碰巧的是，C rand() 函数返回一个 int 而不是 float，因此如果您正在测试代码，您可能希望除以 RAND_MAX 以获得相同的效果。

通过将结果乘以 K 将其转换为范围 [0,K]，然后添加偏移量 L 将其转换为范围 [L, L+K]。例如，如果你想要一个介于 -2 和 +2 之间的数字，你可以这样做：

```
float x = rand() / (float) RAND_MAX; /* x is between 0 and 1 */
x = x * 4; /* x is now between 0 and 4 */
x = x - 2; /* x is now between -2 and 2 */ 
```

在您的情况下，您需要一个介于 0 和 K 之间的整数，而不是浮点数。因此，完成转换后，您可以四舍五入到最接近的整数。但是您需要小心选择正确的范围，以便 0 和 K 与任何中间整数一样可能，并且您永远不会得到超出范围的值（例如 -1 或 K+ 1）。

# php - 会员资料的时区

> ID：13112213
> 
> 赞同：0
> 
> 时间：2012-10-28T19:25:31.397
> 
> 标签：php, datetime

我有这个应用程序，其中有一个会员注册页面。当用户注册时，我在数据库中保存的信息很少。像用户名，密码，名字，姓氏，电子邮件ID，国家。注册完成后，他们可以登录并查看他们的个人资料页面。在这里我需要给出他们注册的时间。目前，它向会员显示其注册时间的不同版本。

所以我修改了 date() 而不是 date()，而是使用 gmdate() 来节省时间。

现在它显示的是 GMT 版本的时间。

**问题 1-**如果会员看到他的个人资料，他应该根据他的时区看到时间。

**问题 2-**当夏令时等时区发生变化时，我将如何获取本地时区。

我知道我应该花时间通过 javascript，但我不能依赖它是正确的。有什么建议么 ？

我已经看到链接[Best way to convert to a member's timezone with offsets stored in database?](https://stackoverflow.com/questions/7465844/best-way-to-convert-to-a-members-timezone-with-offsets-stored-in-database) 但这是不同的。

# entity-framework - 实体框架日期时间字段和默认值的问题

> ID：13112219
> 
> 赞同：0
> 
> 时间：2012-10-28T19:26:50.980
> 
> 标签：entity-framework

它是正确的，因为我不完全理解，但我已经有几天了这些问题。

我有一个日期时间字段并使用实体框架。

场景：

1.  当我设置要计算的字段（数据库生成选项）时，我无法像这样更新字段：

    ```
     db.ComputeUnites.Find(this._ComputeGuid).HeartBeat = DateTime.UtcNow;
        db.SaveChanges(); 
    ```

2.  当我不将其设置为计算时，并将其设置为必需。当我尝试添加未设置字段的新元素时出现错误。（这是有道理的，但我已经在服务器上设置了默认值以将其设置为 ( `getutcdate()`) - 所以我希望它在未设置时会启动。

3.  我尝试将其设置为可选并再次使用默认值，然后我可以添加新对象，但不使用默认值，而是插入 0:0:0 00:000（不正确记住语法）时间.

我想要的是：当我没有在新添加的对象上设置字段时，应该使用默认值。如果我提供或更新该字段，它应该使用来自我的 c# 类的值。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T08:50:18.140

> 我想要的是：当我没有在新添加的对象上设置字段时，应该使用默认值。如果我提供或更新该字段，它应该使用来自我的 c# 类的值。

这是不支持的。您可以让它存储生成，EF 将使用数据库中设置的值，但从不使用应用程序中设置的值，或者您可以让它生成应用程序，EF 永远不会使用数据库中的默认值，因为它始终具有默认值您发送到服务器的应用程序。

最简单的解决方法是直接在应用程序中设置正确的默认值，不要使用数据库默认值并存储生成模式：

```
public class ComputeUnit {
    ...

    public ComputeUnit() {
        HeartBeat = DateTime.UtcNow;
    }

    ...
} 
```

# .net - 尝试连接数据库时SqlClient登录失败

> ID：13112220
> 
> 赞同：0
> 
> 时间：2012-10-28T19:27:11.207
> 
> 标签：.net, asp.net-mvc, sql-server-2008, ado.net, enterprise-library

这太奇怪了。好的，这是我的 MVC 4 项目的 web.config 中的连接字符串：

**这是我的单元测试项目的 App.Config 文件中的连接字符串：**

```
 <add name="ConnectionString" connectionString="Data Source=THESERVERNAME;Initial Catalog=THETABLE;Persist Security Info=True;Integrated Security=SSPI" providerName="System.Data.SqlClient" /> 
```

（我已将真实姓名替换为假名，仅用于此发布隐私）

**我的单元测试是：**

```
[Test]
public void GetMember_ByContractNumber_ReturnsAValidMember()
{
    // Arrang
    const Int64 contractNumber = 2604914977;

    // Act
    DTO.Member member = MemberCRUD.RetrieveMember(contractNumber);

    //Assert
    Assert.IsNotNull(member);
    Assert.IsNotNullOrEmpty(member.FirstName);
    Assert.IsTrue(member.ContractNumber > 0);
} 
```

它通过就好了！我从数据库 CRUD 调用中得到了一个有效的成员对象。

**问题：**

但同时，当我尝试从 MVC 控制器进行基本相同的调用和相同的连接字符串时，我的 DL 炸弹中的相同 CRUD 方法，它在代码中的这一点上：

我得到了这个例外：

```
{"Login failed for user 'OURDOMAIN\\MYPCNAMEISHERE$'."} System.Data.SqlClient.SqlException 
```

这个数据库是**远程**的，不在我的本地系统上。

所以显然这是权限，但我不知道如何解决这个问题。我认为我的单元测试通过的原因是因为它可能在调用数据库时使用我的 Windows 帐户作为身份，而我的 MVC 应用程序的 IIS 使用的是 AppPoolIdentity。所以不知道如何解决这个问题。在我的 web.config 中，我将身份验证设置为无，但我也尝试将其设置为 Windows 身份验证并在 IIS 中启用 Windows 身份验证......不走运。

我正在尝试运行我的设置，但到目前为止，没有任何组合可以解决此权限问题。

再次将 IIS 设置为使用 AppPoolIdentity，但我也尝试使用网络服务作为身份，并将网络服务添加为用户，并授予它对我的 SQL DB 的权限..不走运。我将尝试将 AppPoolIdentity 添加到我的 SQL Server 数据库中，但我怀疑它是否还能正常工作。不确定要尝试什么。-------------------------------- 支持图片/非常最新的设置 ------------ ------

在我的 web.config

（我在下面的 AD 帐户上拥有 dbo 权限） ![在此处输入图像描述](../Images/638b9c3416b7692f88d1fe3c64978314.png) ![在此处输入图像描述](../Images/f242674c4ec578203131646b34c0379e.png) ![在此处输入图像描述](../Images/d9d6ece947c7cee574cf120f54a38a6d.png)

更新：

**这是我最近尝试过的：**

**1) 将以下用户添加到我的数据库的 SQL Server 安全性并赋予他们 DBO 权限：**

*   NT AUTHORITY\匿名登录
*   域\MYPCNAME$
*   NT AUTHORITY\网络服务

**2) 将以下用户添加到我的应用文件夹的文件系统安全权限中：**

*   认证用户
*   IUSR
*   系统
*   网络服务
*   我的广告帐户（域\我的帐户）
*   IIS APPPOOL\MyAppPoolName

**3）然后尝试了一些事情..当我渲染 MVC 视图时，都失败了，出现了同样的错误（登录失败）：**

将应用程序池标识更改为使用**Local Service**。然后它尝试使用 NT AUTHORITY\ANONYMOUS LOGON 连接到 SQL DB - 我得到 NT AUTHORITY\ANONYMOUS LOGON 登录失败

将池标识更改为使用**Local System**。它尝试使用 'DOMAINNAME\MYPCNAME$' 对 SQL 进行身份验证 - 我的 DOMAINNAME\MYPCNAME$ 登录失败

将应用程序池标识更改为使用**Network Service**。它尝试使用 'DOMAINNAME\MYPCNAME$' 进行连接。- 我的 DOMAINNAME\MYPCNAME$ 登录失败

将应用程序池标识更改为使用**ApplicationPoolIdentity**。它尝试使用 'DOMAIN\MYPCNAMEN$' 进行连接。- 我的 DOMAINNAME\MYPCNAME$ 登录失败

![在此处输入图像描述](../Images/d9f1df7cd8f7ff4baa073b11dfcb5135.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T19:43:27.610

你有几个选择：

*   将运行应用程序池的帐户更改为（域）服务帐户，为该“用户”授予对数据库的适当权限，并在进行更改后运行 iisreset /noforce。
*   在连接到数据库之前在您的代码中使用模拟（例如[http://www.codeproject.com/Articles/10090/A-small-C-Class-for-impersonating-a-User](http://www.codeproject.com/Articles/10090/A-small-C-Class-for-impersonating-a-User)）。
*   让您的计算机帐户访问数据库（即您在异常消息中看到的帐户可以添加为数据库用户）。

# r - R：shell命令超时

> ID：13112229
> 
> 赞同：1
> 
> 时间：2012-10-28T19:27:51.660
> 
> 标签：r, benchmarking

我编写了一个 R 脚本，用于对带有一系列参数的 shell 命令进行基准测试。R 脚本只是从每个基准测试的结束时间中减去开始时间。问题是其中一些参数会导致 shell 命令（一个 Python 脚本）无休止地运行。

如何在一定时间后编写 R 来终止 shell 命令？在这一点上，我无法解决 Python 脚本的潜在问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T20:40:28.313

在 Unix 上，您可以将`timeout`其用作 shell-ed 命令的一部分：

```
timeout 5s sleep 20 
```

在 R 内，

```
cmd <- "sleep 20"
timeout <- 5
system(paste0("timeout ", timeout, "s ", cmd)) 
```

# ruby-on-rails - 带有帖子标题的请求

> ID：13112232
> 
> 赞同：0
> 
> 时间：2012-10-28T19:28:27.287
> 
> 标签：ruby-on-rails

我有一个帖子和请求。当用户在帖子页面上单击“添加请求”按钮并用他的姓名和电话号码填写表格时，我需要使用这两个参数，我在**requests#index**页面上有一个帖子标题或帖子 ID

我怎么能做到这一点？

* * *

[http://rostbiz.herokuapp.com/posts/1](http://rostbiz.herokuapp.com/posts/1) 当用户在此页面上单击蓝色按钮时。他在表格[http://rostbiz.herokuapp.com/requests/new](http://rostbiz.herokuapp.com/requests/new)上填写了他的姓名和电话号码。我需要知道，在页面 [http://rostbiz.herokuapp.com/requests/1](http://rostbiz.herokuapp.com/requests/1) 我看到了以下信息： 1 姓名 2 电话号码 3 帖子名称（来自[http://rostbiz.herokuapp.com/posts/1](http://rostbiz.herokuapp.com/posts/1)）

我需要 hidden_​​field :post_id，但是如何在[http://rostbiz.herokuapp.com/requests/new页面上接收此 ID](http://rostbiz.herokuapp.com/requests/new)

也许我可以使用 request.referer 获取 f.hidden_​​field 的 id：post_id、post_id 并验证 post_id？但我不知道如何做到这一点:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T20:05:31.610

发送 post_id 作为参数

```
<%= link_to "new request", new_request_path(post_id: @post.id) %> 
```

在 requests_controller 的新操作中查找帖子。

```
def new
  @post = Post.find(params[:post_id])
  @request = Request.new
end 
```

在新的申请表中像下面这样使用它

```
<%= f.hidden_field, :post_id, value: @post.id %> 
```

# xamarin.android - Visual Studio 2012 和单声道机器人

> ID：13112233
> 
> 赞同：1
> 
> 时间：2012-10-28T19:28:27.417
> 
> 标签：xamarin.android

刚开始使用 Visual Studio 2012 和 Mono droid 测试 android 应用程序开发。到目前为止一切顺利，但我注意到的第一件事是开始新项目它没有创建 AndroidManifest.xml。我发现您可以从 Project proporties 生成一个。结果：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android">
<uses-sdk />
<application>
</application>
</manifest> 
```

我还注意到在自动生成的 Activity1.cs 中有几行：

```
[Activity(Label = "Apptest", MainLauncher = true, Icon = "@drawable/icon")] 
```

但是当我尝试删除上面的那行代码并通过 manifest.xml 将其集成时，问题就出现了，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android">
  <uses-sdk />
  <application android:icon="@drawable/Icon">
     <activity class=".Activity1" 
               android:label="Apptests">
       <intent-filter>
         <action android:name="android.intent.action.MAIN" />
         <category android:name="android.intent.category.LAUNCHER" />
       </intent-filter>
    </activity>
  </application>
</manifest> 
```

![这是运行项目时发生的事情](../Images/e42ec18d68be5e25ab6d4a2c5cce5341.png)

如何在我的 AndroidManifest.xml 中正确描述 Activity1.cs？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T22:54:36.520

根据[Android 文档](http://developer.android.com/guide/topics/manifest/activity-element.html#nm)，没有`<Activity class="">`. 应该是`<Activity android:name="">`。

但是 Android 的 Mono 使用自定义属性处理 AndroidManifest.xml 中的几乎所有内容，因此您不必费心向其中添加任何内容。

所以在你的情况下，如果你坚持，你的 AndroidManifest.xml 的活动部分应该是这样的：

`<activity android:name=".Activity1" android:label="Apptests">`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T14:43:18.347

Monodroid 默认在构建时创建清单文件。它采用您的项目设置和注释，并从中创建清单文件。你真的不应该删除你活动的注释。把它留在里面，monodroid 会为你处理它，并将它与清单中的任何其他内容合并。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T06:46:02.530

AndroidManifest.xml 作为构建过程的一部分生成，在 Properties\AndroidManifest.xml 中找到的 XML 与基于自定义属性生成的 XML 合并。

# php - 用户 ''@'localhost' 拒绝访问数据库 'finalproject'

> ID：13112235
> 
> 赞同：0
> 
> 时间：2012-10-28T19:28:44.723
> 
> 标签：php, mysql, phpmyadmin

> **可能重复：**
> [PHP - MySQL 访问被拒绝错误 - 适用于其他程序](https://stackoverflow.com/questions/11112443/php-mysql-access-denied-error-works-in-other-programs)

我正在尝试创建一个登录过程，连接我的 phpmyadmin 中的 AdminLogin2.php 和 admin2 表，但它说访问被拒绝。我不知道我该怎么做才能解决它..希望有人可以在这里帮助我。这是我的代码，谢谢。

```
`<?php

$host="localhost";
$username="root";
$password="";
$database="finalproject";
$table="admin2";

$AdminID=$_POST['Field1'];
$Password=$_POST['Field3'];

mysql_connect("$host","$password") or die (mysql_error());
#echo"connected";
mysql_select_db("$database") or die (mysql_error());
#echo"database found";

// To protect MySQL injection (more detail about MySQL injection)
$AdminID = stripslashes($AdminID);
$Password = stripslashes($Password);
$AdminID = mysql_real_escape_string($AdminID);
$Password = mysql_real_escape_string($Password);
$sql="SELECT * FROM $admin2 WHERE username='$AdminID' and password='$Password'";
$result=mysql_query($sql);

// Mysql_num_row is counting table row
$count=mysql_num_rows($result);

// If result matched $myusername and $mypassword, table row must be 1 row
if($count==1){

// Register $myusername, $mypassword and redirect to file "login_success.php"
session_register("myusername");
session_register("mypassword"); 
header("location:AdminForm.php");
}
else {
echo "Wrong Username or Password";
}
?> 
```

`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-28T19:31:29.680

```
mysql_connect("$host","$password") 
```

它应该像

```
mysql_connect("$host","$username","$password") 
```

这就是为什么你从数据库中收到空用户名的错误

# r - cor.test() 的矩阵版本

> ID：13112238
> 
> 赞同：30
> 
> 时间：2012-10-28T19:29:07.510
> 
> 标签：r, correlation

`Cor.test()`接受向量`x`和`y`作为参数，但我有一个完整的数据矩阵，我想成对测试。`Cor()`将此矩阵作为参数就好了，我希望找到一种方法来为`cor.test()`.

其他人的常见建议似乎是使用`cor.prob()`：

> [https://stat.ethz.ch/pipermail/r-help/2001-November/016201.html](https://stat.ethz.ch/pipermail/r-help/2001-November/016201.html)

但是这些 p 值与由`cor.test()`!!!生成的 p 值不同。`Cor.test()`似乎也比`cor.prob()`.

有人有其他选择`cor.prob()`吗？如果解决方案涉及嵌套的 for 循环，那就这样吧（我足够新`R`，即使这对我来说也是个问题）。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-10-28T20:38:58.187

`corr.test`包中`psych`的目的是为了做到这一点：

```
library("psych")
data(sat.act)
corr.test(sat.act) 
```

如评论中所述，要将基函数的*p*值复制到`cor.test()`整个矩阵上，则需要关闭*p*值的调整以进行多重比较（默认是使用 Holm 的调整方法）：

```
 corr.test(sat.act, adjust = "none") 
```

[但在解释这些结果时要小心！]

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-28T19:45:26.807

如果您严格追求矩阵格式的 pvalues，那么这是从文森特（[链接](https://stackoverflow.com/questions/9917242/create-a-matrix-from-a-function-and-two-numeric-data-frames)`cor.test`）无耻地窃取的解决方案：

```
cor.test.p <- function(x){
    FUN <- function(x, y) cor.test(x, y)[["p.value"]]
    z <- outer(
      colnames(x), 
      colnames(x), 
      Vectorize(function(i,j) FUN(x[,i], x[,j]))
    )
    dimnames(z) <- list(colnames(x), colnames(x))
    z
}

cor.test.p(mtcars) 
```

注意：Tommy 还提供了一个更快的解决方案，但不太容易实现。哦，没有 for 循环 :)

**编辑**`v_outer`我的包中有一个函数`qdapTools`可以让这个任务变得非常简单：

```
library(qdapTools)
(out <- v_outer(mtcars, function(x, y) cor.test(x, y)[["p.value"]]))
print(out, digits=4)  # for more digits 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-05-26T18:58:58.383

可能最简单的方法是使用`rcorr()`来自 Hmisc 的。它只需要一个矩阵，因此`rcorr(as.matrix(x))`如果您的数据位于 data.frame 中，请使用它。它将返回一个列表，其中包含：1) r 成对矩阵，2) 成对 n 矩阵，3) r 的 p 值矩阵。它会自动忽略丢失的数据。

理想情况下，这种函数也应该采用 data.frames 并输出符合“[新统计](http://pss.sagepub.com/content/early/2013/11/07/0956797613504966)”的置信区间。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-09-14T01:59:39.053

公认的解决方案（心理包中的 corr.test 函数）有效，但对于大型矩阵来说非常慢。我正在使用与药物敏感性矩阵（~1,000 x ~500）相关的基因表达矩阵（~20,000 x ~1,000），我不得不停止它，因为它需要永远。

我从 psych 包中获取了一些代码，并直接使用了 cor() 函数，并得到了更好的结果：

```
# find (pairwise complete) correlation matrix between two matrices x and y
# compare to corr.test(x, y, adjust = "none")
n <- t(!is.na(x)) %*% (!is.na(y)) # same as count.pairwise(x,y) from psych package
r <- cor(x, y, use = "pairwise.complete.obs") # MUCH MUCH faster than corr.test()
cor2pvalue = function(r, n) {
  t <- (r*sqrt(n-2))/sqrt(1-r^2)
  p <- 2*(1 - pt(abs(t),(n-2)))
  se <- sqrt((1-r*r)/(n-2))
  out <- list(r, n, t, p, se)
  names(out) <- c("r", "n", "t", "p", "se")
  return(out)
}
# get a list with matrices of correlation, pvalues, standard error, etc.
result = cor2pvalue(r,n) 
```

即使有两个 100 x 200 矩阵，差异也是惊人的。一两秒对 45 秒。

```
> system.time(test_func(x,y))
   user  system elapsed 
  0.308   2.452   0.130 
> system.time(corr.test(x,y, adjust = "none"))
   user  system elapsed 
 45.004   3.276  45.814 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-09-25T09:23:06.597

“公认的解决方案（`corr.test`心理包中的函数）有效，但对于大型矩阵来说非常慢。”

如果你使用`ci=FALSE`，那么速度会快很多。默认情况下，会找到置信区间。但是，这会导致速度略有下降。所以，对于`rs`, `ts`and `ps`, set `ci=FALSE`。

# java - 处理阵列以进行波形渲染的快速方法

> ID：13112239
> 
> 赞同：3
> 
> 时间：2012-10-28T19:29:12.217
> 
> 标签：java, javascript, algorithm, gwt

我的 Web 应用程序有这个代码，我需要一些改进，它以某​​种方式工作，但结果很慢：

这段代码背后的想法是：

*   该函数获取当前缓冲区，然后将其转置为数组（采样率为 50ms）
*   在每次采样时，必须通过在 updateWave 函数中传递每个元素来呈现数组的元素
*   对于下一次迭代，再次获取当前缓冲区，但它包含先前的数据（因此不应呈现先前的数据/元素），必须再次呈现新元素。

**更新（简化代码）**：

```
private String data = "";   
// This function renders the waveform in the page, has been tested to
// render properly and smoothly by passing random double value at 50ms interval    
public void updateWave(String waveValue){
    wave.renderWaveOnFly(Double.parseDouble(waveValue));
}

public final native void waveIt()/*-{   
    var instance = this;
    $wnd._waver = setInterval(function(){
            // Get the current buffer from the flash interface
            // Note it fetches everything in the buffer
            var newData = $wnd.Recorder.audioData().toString();
            var strData = newData.toString();
            var arr = strData.split(',');
            var arrEl = arr.pop();
            instance.@com.mycode.wavegwt.showcase.client.Showcase::updateWave(Ljava/lang/String;)(arrEl.toString());
            //console.log(arrEl);
        }
    ,50);
}-*/;

// This function renders the waveform from math function 
// and the waveform is smooth and the UI is still responsive
public final native void waveItByRandomValue()/*-{  
    var instance = this;
    $wnd._waver = setInterval(function(){
            var arrEl = Math.cos(i++/25) - 0.2 + Math.random() * 0.3;
            instance.@com.mycode.wavegwt.showcase.client.Showcase::updateWave(Ljava/lang/String;)(arrEl.toString());
        }
    ,50);
}-*/;

public native void renderWaveOnFly(Double _data)/*-{
    var data = $wnd.data;
    data.push(_data);
    $wnd._waveform.update({
        data: data
    });
}-*/; 
```

`waveIt()`是一个从闪存接口（从麦克风获取数据）读取缓冲区的函数。对于演示，我将麦克风录音机设置为在触发时录制 10 秒，然后在录音开始时`waveIt()`，在 10 秒后通话`clearInterval($wnd._waver)`

**这个问题：**

*   `waveIt()`功能真的很慢，即运行时UI没有响应并且渲染速度很慢
*   与`waveItByRandomValue()`哪个渲染速度快并且运行此功能时 UI 仍然响应

我已经没有如何使这项工作正确的策略了。

要实时查看我的项目，请参阅： http: [//bitly.com/XGboA1](http://bitly.com/XGboA1)

我还在 Google 群组中解释了更多这个问题：http: [//bitly.com/SqSZVl](http://bitly.com/SqSZVl)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T23:15:53.303

这可能是解决方案的一部分，类型化数组：

[http://www.html5rocks.com/en/tutorials/webgl/typed_arrays/](http://www.html5rocks.com/en/tutorials/webgl/typed_arrays/)

# php - 如何从PHP中的复选框选择的数据库中保存一行数据

> ID：13112244
> 
> 赞同：0
> 
> 时间：2012-10-28T19:30:33.780
> 
> 标签：php, mysql, sql, arrays, checkbox

在这里，我对我的 MySql 数据库进行了查询，我正在取出有关课程的所有信息，这些信息要放在一行中并显示在我的表格中。表格的最后一列是一个复选框，*我想制作该复选框，以便它为选中的每一行保存数据行*。我选择的变量是`courses[]`，保存在数组中，然后保存在会话中，以便在其他地方访问。我不确定如何提取行数据以放入我的数组中。现在我有`value='$row2013`这行不通，因为当我`var_dump($courses) = array(5) { [0]=> string(5) "Array" [1]=> string(5) "Array" [2]=> string(5) "Array" [3]=> string(5) "Array" [4]=> string(5) "Array" }`选择了五门课程时。

总而言之，我没有保存正确的东西。

```
case 2013:
    $string2013 = "SELECT Course.CourseCode, Course.Title, Course.WeeklyHours, Semester.Term, Semester.SemesterCode
    FROM Course, CourseOffer, Semester WHERE Semester.YearNum='$selectedYear' AND Course.CourseCode=CourseOffer.CourseCode AND
    Semester.SemesterCode=CourseOffer.SemesterCode";
    if($Result2013 = mysqli_query($link, $string2013))
    {
        echo "<form action='CourseSelection.php' method='get'>
        <table><tr><th>Code</th><th>Course Title</th><th>Hours</th><th>Term</th><th>Select</th></tr>";
        while($row2013 = mysqli_fetch_assoc($Result2013))
        {
            echo "<tr><td>$row2013[CourseCode]</td><td>$row2013[Title]</td><td>$row2013[WeeklyHours]</td>
            <td>$row2013[Term]</td><td><input type='checkbox' name='courses[]' value='$row2013'></td></tr>";
        }
        echo "</table>";
    }
    else
    {
        echo "<p>" + mysqli_error($link) + "</p>";
    }
    break; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T19:35:55.760

`value='$row2013'`？？？应该是例如`value='$row2013["CourseCode"]'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T19:34:27.133

您可以使用 jQuery 来完成，您也可以使用它来处理和验证您的表单。或者，对于每一行，您可以为该行构建一个数组并将其作为隐藏值传递。然后当它发布时，看看是否选中了复选框，如果是，让脚本使用隐藏值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T19:59:01.637

**方式1：** 如果我可以假设您的课程表有一个主键列（“CourseCode”），那么您不必将整行保存为复选框中的值。您只需要保存选中行的 CourseCodes。然后，您可以通过将 CourseCode 附加到输入名称来为每个其他表格单元格添加唯一的隐藏输入，例如：

```
<input type='hidden' name='Title_" . $row['CourseCode'] . "' value='" . $row['Title'] . "'> etc. 
```

换句话说，$_GET["courses"] 将包含一个 CourseCodes 数组，它代表被点击的行。然后您可以遍历 $_GET["courses"] 并轻松读取其他变量的名称：

```
$lst_course_codes = !empty($_GET["courses"]) ? $_GET["courses"] : array();
foreach ($lst_course_codes as $code) {
    $title = $_GET["Title_$code"];
    etc...
} 
```

**方式 2**：将复选框值存储为 json 编码字符串：`json_encode($row2013)` 然后您可以再次迭代（在 CourseSelection.php 中）：

```
foreach ($_GET["courses"] as $json) {
   $arr_row = json_decode($json, true);
   $title = $arr_row["Title"];
   etc...
} 
```

我没有仔细检查错误，但你明白了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T20:03:33.523

您应该尝试仅将行 ID 保存在复选框的值中。通过这种方式，您可以通过 ID 轻松地从数据库中调用一行。`$row2013["CourseCode"]`应该管用。

当您执行 POST 请求时，您将获得一个 ID 数组 ( `$_POST['courses']`)。当然，您需要将其视为数组，因此您必须对其进行迭代才能获得您选择的所有行。

如果您`var_dump($_POST['courses'])`应该看到类似这样的内容，假设您选择了前 5 行：

```
array (size=5)
  0 => string '1' (length=1)
  1 => string '2' (length=2)
  2 => string '3' (length=3)
  3 => string '4' (length=4)
  4 => string '5' (length=5) 
```

现在只需根据选定的行查询数据库，就可以了：

```
SELECT * 
FROM Course
WHERE CourseCode = 1
   OR CourseCode = 2
   OR CourseCode = 3
   OR CourseCode = 4
   OR CourseCode = 5 
```

# ruby - Ruby：如何将文件加载到交互式 Ruby 控制台（IRB）中？

> ID：13112245
> 
> 赞同：95
> 
> 时间：2012-10-28T19:30:37.900
> 
> 标签：ruby, irb

我正在使用 IRB（交互式 Ruby 控制台）来学习如何使用 Ruby 进行编程。如果我先在文本编辑器中编写程序，如何将文件加载到控制台中？

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2013-01-09T17:41:30.250

如果您只需要将一个文件加载到 IRB 中，`irb -r ./your_file.rb`如果它在同一目录中，则可以调用它。

这会自动需要该文件，并允许您立即使用它。

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2015-01-09T22:46:36.280

在 Ubuntu 14.04 上使用 ruby​​ 1.9.3，我可以`irb`使用以下命令行将文件从当前目录加载到：

```
irb -I . -r foo.rb 
```

`foo.rb`我要从当前目录加载的文件在哪里。该`-I`选项对于将当前目录 ( `.`) 添加到 ruby​​ 的加载路径是必需的，如 ruby​​ 手册页中所述。这使得`require`从当前目录中获取文件成为可能，这是该`-r`选项要`irb`完成的任务。

当我遇到这个问题时，对我来说并不明显的关键部分是`-I`选项。完成此操作后，您可以`require 'foo.rb'`从内部调用`irb`当前目录中的任何文件。当然，您可以指定您想要的任何目录，而不仅仅是`.`使用`-I`选项。要在加载路径上包含多个目录，请用冒号 (:) 分隔它们，例如：

```
irb -I foo/:bar/:baz/ 
```

此命令会将目录`foo`、、`bar`和添加`baz`到 ruby​​ 的加载路径。

最后一种选择是在使用`require`或`-r`加载文件时使用文件的相对或绝对路径：

```
irb -r ./foo.rb 
```

或从内部`irb`：

```
> require './foo.rb' 
```

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2014-12-16T16:13:30.787

输入`irb`

接着

```
require './ruby_file.rb' 
```

这是假设 ruby​​_file.rb 在同一目录中。相应调整。

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2016-07-22T18:42:11.257

Two ways:

1.  to load source *without* running the program -- this gives access to all variables and functions:

`source("filename.rb")`

2.  to run program and then drop into interactive mode -- this only gives access to functions, not variables:

`require("filename.rb")`

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-10-28T19:37:53.220

这取决于你的红宝石。Ruby 1.8 包含您当前的路径，而 ruby​​ 1.9 不包含。评估`$:`以确定您的路径是否包含在内。因此，在 ruby​​ 1.9 中，您必须使用整个路径，这始终是一个安全的选择。

然后您可以使用`require`或`load`包含该文件。

`require`不要求您在尝试查找文件时添加文件后缀，并且只会包含该文件一次。 `require`应该使用而不是`load`大部分时间。

如果您要使用 ruby​​ 1.8，请查看[将目录添加到 $LOAD_PATH (Ruby)](https://stackoverflow.com/questions/837123/adding-a-directory-to-load-path-ruby)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-06-30T10:13:41.097

在文本编辑器中输入 ruby​​ 代码

使用扩展名**.rb**保存它（例如：**demo.rb**）。

在 linux 中，打开终端，然后将目录更改为该文件的当前位置（cd 命令用于更改目录）。

之后，输入 irb 和你的文件名（不要忘记包括你的扩展名（.rb））。

[![单击此处查看使用 irb 加载 ruby​​ 文件](../Images/5f7458b48c7a3e113fe0a18bda47b489.png)](https://i.stack.imgur.com/6nLxV.png)

在那个图像中，我加载了一个简单的 ruby​​ 文件，它只打印“ruby”。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-03-01T17:11:04.557

将路径加载到 irb 的另一种方法是输入 require 然后将文件拖放到终端中。- 使用 Linux Mint 进行测试。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2019-08-20T11:30:21.083

对于那些想要从不同目录加载 .rb 文件的人。只需将目录的字符串表示器添加到 $: 变量。

```
> $: << "/directory/to/the/required/rb/file"
> require "some_file" 
```

# eclipse - 无法在 Eclipse Juno 中输入 utf-8

> ID：13112248
> 
> 赞同：0
> 
> 时间：2012-10-28T19:31:12.673
> 
> 标签：eclipse

我正在使用 Eclipse Juno 编写 Android 应用程序。我有一个奇怪的问题：

*   如果我在其他文本编辑器（例如记事本）中键入文本（UTF8 字符），然后复制/粘贴到 Eclipse 中，字符会正确显示，但如果直接在 Eclipse 中键入，字符似乎会转换为 ANSI。

我已将项目的文本文件编码设置为 UTF8，但没有任何变化。右键单击文件 > 属性，Eclipse 显示文件编码为 UTF8，但如果我在 Notepad++ 中打开文件并检查编码菜单，Notepad++ 显示文件为 ANSI。

这里有什么问题？请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T20:10:10.170

这正是您将所有文本`strings.xml`存储在 android 上的文件中的原因。默认情况下，它们采用 UTF-8 编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T02:57:25.737

1.  编码不是文件的属性，它是关于如何处理这个文件。所以改变 ecnoding 实际上并没有改变任何东西。没关系。

2.  我认为您编辑了“* .properties”文件。在这种情况下，您不能使用“UTF-8”，因为它仅支持 ISO-8859-1，因为该文件将在运行时动态加载。

# c# - 自动完成扩展器和按钮事件不会在 updatepatel 中触发

> ID：13112249
> 
> 赞同：0
> 
> 时间：2012-10-28T19:31:17.560
> 
> 标签：c#, asp.net, ajax, updatepanel, autocompleteextender

在我的代码中，我创建了一个用户控件。放置两个带有 autocompleteextender 和提交按钮的文本框。访问两个文本框后，提交按钮单击事件不会触发。代码有什么问题。请帮助我。当我将更新面板放在之后它不起作用。我需要更新面板，因为两个文本框自动回发属性为真。

```
<asp:UpdatePanel runat="server" ID="UpQuote" UpdateMode="Always">
    <ContentTemplate>
        <div id="Quote">
            <table>
                <tr>
                    <td class="tbltdForQuote">
                    </td>
                </tr>
                <tr>
                    <td>
                        <asp:Label runat="server" ID="lblTitle" Text="Get an instant quote" CssClass="lblForQuote"
                            Font-Size="Large"></asp:Label>
                    </td>
                </tr>
                <tr>
                    <td class="tbltdForQuote">
                    </td>
                </tr>
                <tr>
                    <td>
                        <asp:Label runat="server" ID="lblTo" Text="Pick-up Location e.g. Heathrow" CssClass="lblForQuote"></asp:Label>
                    </td>
                </tr>
                <tr>
                    <td>
                        <asp:TextBox runat="server" ID="txtTo" AutoPostBack="true" autocomplete="off" CssClass="txtBoxForQuote" />
                        <ajaxToolkit:AutoCompleteExtender runat="server" BehaviorID="AutoCompleteEx1" ID="autoComplete1"
                            TargetControlID="txtTo" ServicePath="AutoComplete.asmx" ServiceMethod="GetCompletionList"
                            MinimumPrefixLength="1" CompletionInterval="1000" EnableCaching="true" CompletionSetCount="20"
                            CompletionListCssClass="autocomplete_completionListElement" CompletionListItemCssClass="autocomplete_listItem"
                            CompletionListHighlightedItemCssClass="autocomplete_highlightedListItem" DelimiterCharacters=";, :"
                            ShowOnlyCurrentWordInCompletionListItem="true">
                            <Animations>
                    <OnShow>
                        <Sequence>
                            <%-- Make the completion list transparent and then show it --%>
                            <OpacityAction Opacity="0" />
                            <HideAction Visible="true" />

                            <%--Cache the original size of the completion list the first time
                                the animation is played and then set it to zero --%>
                            <ScriptAction Script="
                                // Cache the size and setup the initial size
                                var behavior = $find('AutoCompleteEx1');
                                if (!behavior._height) {
                                    var target = behavior.get_completionList();
                                    behavior._height = target.offsetHeight - 2;
                                    target.style.height = '0px';
                                }" />

                            <%-- Expand from 0px to the appropriate size while fading in --%>
                            <Parallel Duration=".2">
                                <FadeIn />
                                <Length PropertyKey="height" StartValue="0" EndValueScript="$find('AutoCompleteEx1')._height" />
                            </Parallel>
                        </Sequence>
                    </OnShow>
                    <OnHide>
                        <%-- Collapse down to 0px and fade out --%>
                        <Parallel Duration=".4">
                            <FadeOut />
                            <Length PropertyKey="height" StartValueScript="$find('AutoCompleteEx1')._height" EndValue="0" />
                        </Parallel>
                    </OnHide>
                            </Animations>
                        </ajaxToolkit:AutoCompleteExtender>
                    </td>
                </tr>
                <tr>
                    <td class="tbltdForQuote">
                    </td>
                </tr>
                <tr>
                    <td>
                        <asp:Label runat="server" ID="lblFrom" Text="Drop-off Location e.g.E1 (Postcode)"
                            CssClass="lblForQuote"></asp:Label>
                    </td>
                </tr>
                <tr>
                    <td>
                        <asp:TextBox ID="txtFrom" AutoPostBack="true" runat="server" autocomplete="off" CssClass="txtBoxForQuote" />
                        <ajaxToolkit:AutoCompleteExtender runat="server" BehaviorID="AutoCompleteEx" ID="AutoCompletetxtFrom"
                            TargetControlID="txtFrom" ServicePath="AutoComplete.asmx" ServiceMethod="GetCompletionList"
                            MinimumPrefixLength="1" CompletionInterval="1000" EnableCaching="true" CompletionSetCount="20"
                            CompletionListCssClass="autocomplete_completionListElement" CompletionListItemCssClass="autocomplete_listItem"
                            CompletionListHighlightedItemCssClass="autocomplete_highlightedListItem" DelimiterCharacters=";, :"
                            ShowOnlyCurrentWordInCompletionListItem="true">
                            <Animations>
                    <OnShow>
                        <Sequence>
                            <%-- Make the completion list transparent and then show it --%>
                            <OpacityAction />
                            <HideAction Visible="true" />

                            <%--Cache the original size of the completion list the first time
                                the animation is played and then set it to zero --%>
                            <ScriptAction Script="
                                // Cache the size and setup the initial size
                                var behavior = $find('AutoCompleteEx');
                                if (!behavior._height) {
                                    var target = behavior.get_completionList();
                                    behavior._height = target.offsetHeight - 2;
                                    target.style.height = '0px';
                                }" />

                            <%-- Expand from 0px to the appropriate size while fading in --%>
                            <Parallel Duration=".2">
                                <FadeIn />
                                <Length PropertyKey="height" StartValue="0" EndValueScript="$find('AutoCompleteEx')._height" />
                            </Parallel>
                        </Sequence>
                    </OnShow>
                    <OnHide>
                        <%-- Collapse down to 0px and fade out --%>
                        <Parallel Duration="1">
                            <FadeOut />
                            <Length PropertyKey="hight" StartValueScript="$find('AutoCompleteEx')._height" EndValue="0" />
                        </Parallel>
                    </OnHide>
                            </Animations>
                        </ajaxToolkit:AutoCompleteExtender>
                    </td>
                </tr>
                <tr>
                    <td class="tbltdForQuote">
                    </td>
                </tr>
                <tr>
                    <td>
                        <asp:Button runat="server" ID="btnQuoteSubmit" Text="Get Quote >>" UseSubmitBehavior="false"
                            CssClass="QuoteButton" OnClick="btnQuoteSubmit_Click" CausesValidation="false" />
                    </td>
                </tr>
                <tr>
                    <td style="float: right">
                        <asp:HyperLink runat="server" ID="HyLogin" Text="Login to your account >>"></asp:HyperLink>
                    </td>
                </tr>
            </table>
        </div>
    </ContentTemplate>
</asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T11:24:59.810

您可以尝试两件事。1.`AutoPostBack="True"`在您的按钮声明中设置属性。或者如果这不起作用， 2\. 将按钮从更新面板中取出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T06:51:14.783

经过长时间的搜索，我找到了答案。基本上自动完成扩展器不能在用户控制中工作。因为他们使用 webmethod 并且它只适用于网页而不是用户控制

# vb.net - 布尔表达式的绝对值

> ID：13112250
> 
> 赞同：0
> 
> 时间：2012-10-28T19:31:28.287
> 
> 标签：vb.net

在 VB6 我有这样的代码：

> IsLast = Abs(CursorPos = Len(numText.Text))

什么将 false 评估为 0，将 true 评估为 1。

这行代码在 VB.NET 中产生错误。

如何正确写这个？

编辑：错误是：

```
Error   15  Overload resolution failed because no accessible 'Abs' can be called without a narrowing conversion:
'Public Shared Function Abs(value As Decimal) As Decimal': Argument matching parameter 'value' narrows from 'Boolean' to 'Decimal'.
'Public Shared Function Abs(value As Double) As Double': Argument matching parameter 'value' narrows from 'Boolean' to 'Double'.
'Public Shared Function Abs(value As Single) As Single': Argument matching parameter 'value' narrows from 'Boolean' to 'Single'.
'Public Shared Function Abs(value As Long) As Long': Argument matching parameter 'value' narrows from 'Boolean' to 'Long'.
'Public Shared Function Abs(value As Integer) As Integer': Argument matching parameter 'value' narrows from 'Boolean' to 'Integer'.
'Public Shared Function Abs(value As Short) As Short': Argument matching parameter 'value' narrows from 'Boolean' to 'Short'.
'Public Shared Function Abs(value As SByte) As SByte': Argument matching parameter 'value' narrows from 'Boolean' to 'SByte'. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T19:38:51.043

```
IsLast = If( CursorPos = Len(numText.Text), 1, 0 ) 
```

您是否正在尝试将更大的 VB6 迁移到 VB.Net？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T19:39:37.537

```
IsLast = CursorPos = Len(numText.Text) 
```

# javascript - 如何在 IE8 中上传二进制文件，然后使用 xmlhttprequest 将其发送到服务器

> ID：13112253
> 
> 赞同：3
> 
> 时间：2012-10-28T19:32:01.893
> 
> 标签：javascript, jquery, internet-explorer-8, xmlhttprequest, input-type-file

我正在处理嵌入式设备的网页。为了在网页和此设备的应用程序之间交换数据，我使用 xmlhttprequest。

现在我寻找一种允许客户端将二进制文件（以更新该设备的固件）上传到服务器的方法。

一个很大的限制：它需要在 IE8 中工作（跨浏览器解决方案是理想的，但必须首先在 IE8 上工作......）

详细说明我必须做什么：

1.  使用`<input type='file'>`选择客户端计算机上的文件
2.  将文件（使用 xmlhttprequest？）发送到服务器
3.  服务器将重新组装文件以及它需要对它做的任何事情......

我能够在 chrome 中从客户端获取到服务器的二进制文件，但在 IE8 中，我的方法不兼容。

相关的html文件：

```
<input id="uploadFile" type="file" /> 
```

在 javascript 中，我尝试了不同的方式来触发具有输入文件类型的事件

```
// does not work in IE8 (get an Obj doesnt support this property or method)
document.querySelector('input[type="file"]').addEventListener("change"),function(e)...
// tried with jQuery, does not work in IE8(I may not using it correctly...)
$('upload').addEvent('change', function(e)....
$('upload').change(function(e).... 
```

所以我的第一个问题是：如何在 IE8 中使用输入类型文件执行 onChange 事件？

还有我在 chrome 中使用的方法（在此页面上找到：http: [//www.html5rocks.com/en/tutorials/file/xhr2/](http://www.html5rocks.com/en/tutorials/file/xhr2/)）但这不适用于 IE8：

```
function upload(blobOrFile) {
  var xhr = new XMLHttpRequest();
  xhr.open('POST', '/server', true);
  xhr.onload = function(e) { ... };
  xhr.send(blobOrFile);
}

document.querySelector('input[type="file"]').addEventListener('change', function(e) {
  var blob = this.files[0];

  const BYTES_PER_CHUNK = 1024 * 1024; // 1MB chunk sizes.
  const SIZE = blob.size;

  var start = 0;
  var end = BYTES_PER_CHUNK;

  while(start < SIZE) {
     upload(blob.slice(start, end));

    start = end;
    end = start + BYTES_PER_CHUNK;
  }
}, false);

})(); 
```

因为document.querySelector在IE8中产生了错误，不知道这段代码的其余部分在IE8中是否可以工作（我希望它可以工作！）

任何帮助和建议将不胜感激！！！

# android - 在 Android 中隐藏文件夹

> ID：13112255
> 
> 赞同：-4
> 
> 时间：2012-10-28T19:32:23.420
> 
> 标签：android

我想在 android 中制作一个应用程序，它可以隐藏我选择的文件是来自 Sdcard 的文件夹。您的建议将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T19:35:41.483

在 Android 文件系统（`UNIX`基于）中，您可以在文件或文件夹名称前加上句点，它对标准文件浏览器是不可见的（尽管不是不可找到的）。例如，文件`.hidden`将被隐藏，而`visible`用户可以看到。

# linux - 使用linux shell命令比较两个带有数字的文件并找出差异

> ID：13112256
> 
> 赞同：0
> 
> 时间：2012-10-28T19:32:36.357
> 
> 标签：linux, shell

```
8       13
10      22
13      24
22      26
24      27
26      28
27      29
28      32
29      34
32      35
34      40
66
78 
```

我有两个像上面这样的文件，file1 是第一列，而文件 2 是第二列，我想得到这两个文件之间的区别，比如 8 在第一个文件中但不在我使用 comm 的第二个文件中，但结果是奇怪如何实现我想要的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T19:36:16.480

```
man diff 
```

读一读，我相信它会做你想要的。

# delphi - 如何在编译时判断项目是程序还是库？

> ID：13112257
> 
> 赞同：7
> 
> 时间：2012-10-28T19:32:37.633
> 
> 标签：delphi, compiler-directives

我想知道该项目是否是一个库，在阅读了帮助后，我编写了这个不起作用的代码：

```
{$IF DEFINED(LIBPREFIX)}
    {$DEFINE PROJECT_IS_EXECUTABLE}
    {$UNDEF PROJECT_IS_LIBRARY}
{$ELSE}
    {$DEFINE PROJECT_IS_EXECUTABLE}
    {$UNDEF PROJECT_IS_LIBRARY}
{$IFEND} 
```

我试过定义、声明和

```
{$IF (LIBPREFIX = '')} 
```

对于 DLL 和程序，每次尝试总是返回相同的结果。如何仅使用内置编译器指令来做到这一点？

**编辑**

我的目的是从“PE 文件”中删除额外的信息。

我直接在 .dpr 项目文件中执行此操作，因此无论其他单元如何编译，但我无法在 DLL 项目中执行相同操作。

因此，我正在寻找一种在 DLL 项目中阻止它的方法。

这就是我解决这个问题的方法，我将此指令添加到我的 .dpr 程序中：

```
 {$DEFINE STRIPE_PE_INFO}
  {$DEFINE STRIPE_RTTI}
  {$I DDC_STRIP.inc} 
```

而 DDC_STRIP.inc 拥有所有的逻辑。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-28T19:49:29.787

编译文件时无法知道这一点。源文件可以编译为 .dcu，然后链接到任何类型的项目。RTL 和 VCL 单元就是一个很好的例子。

可能你能做的最好的事情是在你的项目选项中定义一个条件来指示项目是否是一个库。但是您需要确保在构建任何使用此单元的项目时始终重新编译 .dcu。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-28T20:25:25.173

您无法在编译时确定这一点，但在运行时，您可以检查[`SysInit.ModuleIsLib`](http://docwiki.embarcadero.com/Libraries/XE3/en/SysInit.ModuleIsLib)（Delphi 2007）以确定代码是否在库（或包）中运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T20:21:57.587

我能想到的最好的事情是在包含文件中设置一个定义。您可以使用预构建操作（bat 文件）来修改包含文件。

# c# - 超过 1 种泛型类型的接口的 StructureMap 自动注册

> ID：13112258
> 
> 赞同：1
> 
> 时间：2012-10-28T19:32:40.320
> 
> 标签：c#, generics, dependency-injection, structuremap

我正在寻找一种基于约定的方法来替换我的 StructureMap 注册表中的以下行：

```
this.For<IMyFactory<ItemList, int>>().Use(x => x.GetInstance<GenericMyFactory<ItemList, int>>()); 
```

**澄清**

我所追求的是一种自动注册 IMyFactory 的方法，即以与接口声明相同的顺序创建具有相同类型的具体实例。我在上面声明的方式仅适用于 ItemList / int 组合 - 我想要的是一种使用任何类型组合的方式。

我在其他 SO 帖子上发现了这种方法，当只提供一种类型时，这似乎工作得很好，但我似乎无法找到一种在超过 1 种类型是通用的情况下可以工作的方法。以下给出了我的情况下的编译错误。

```
this.Scan(x =>
{
    x.TheCallingAssembly();
    x.AddAllTypesOf(typeof(IMyFactory<>));
    x.WithDefaultConventions();
}); 
```

资料来源：

[StructureMap 使用 Scan 自动注册泛型类型](https://stackoverflow.com/questions/516892/structuremap-auto-registration-for-generic-types-using-scan)

[结构图和泛型类型](https://stackoverflow.com/questions/2644941/structuremap-and-generic-types)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T09:45:44.460

您可以在 StructureMap 中注册开放的泛型类型，如下所示：

```
For(typeof(IMyFactory<,>)).Use(typeof(GenericMyFactory<,>))); 
```

# r - 根据 ifelse 情况用 R 定义不同的函数；“闭包”类型的对象错误

> ID：13112260
> 
> 赞同：1
> 
> 时间：2012-10-28T19:32:55.013
> 
> 标签：r, if-statement, plyr

感谢@BrianDiggs，我正在修改一些以前的代码：[](

这是我的可重现代码，因为我的实际代码使用数据文件，并且基于各种 ifelse 案例涉及更多。这会产生相同的错误：

**一、未修改和工作**

```
library(plyr)

df <- data.frame(name = LETTERS[1:3], var1 = c(1,5,10), var2 = c(2, 4, 6))

generator <- function(name, var1, var2) {

function(varA, varB) {

  ifelse(varA + varB < 10,
    10,
    100)
}

}

funs <- mlply(df, generator)

interactions <- expand.grid(one = seq(0, 20, by=5), two = seq(0, 20, by=5))

table <- ldply(funs, function(f) {
  data.frame(varA=interactions$one, varB=interactions$one,
  result=f(interactions$one, interactions$two))
}) 
```

我完全不明白`plyr`......但它的工作原理。根据我的最佳猜测，我创建了输入值，然后 plyr 创建了一种对象，其中包含函数定义（`funs`）。然后我创建我的第二层值并在整个组合表上运行第二个函数。

* * *

**修改，不工作**
无论如何，我想根据情况有两个不同的功能。这是我尝试过的：

```
library(plyr)

df <- data.frame(name = LETTERS[1:3], var1 = c(1,5,10), var2 = c(2, 4, 6))

generator <- function(name, var1, var2) {

ifelse(name == "A",

function(varA, varB) {

  ifelse(varA + varB < 10,
    10,
    100)
},

function(varA, varB) {

  varA + varB

})

}

funs <- mlply(df, generator)

interactions <- expand.grid(one = seq(0, 20, by=5), two = seq(0, 20, by=5))

table <- ldply(funs, function(f) {
  data.frame(varA=interactions$one, varB=interactions$one,
  result=f(interactions$one, interactions$two))
}) 
```

为此，我得到，`Error: Object of type 'closure' is not subsettable`

* * *

我还尝试在`ifelse()`第二个函数中进行拆分：

```
library(plyr)

df <- data.frame(name = LETTERS[1:3], var1 = c(1,5,10), var2 = c(2, 4, 6))

generator <- function(name, var1, var2) {

function(varA, varB) {

ifelse(name == "A",

  "foo",

  ifelse(varA + varB < 10,
    10,
    100))

}

}

funs <- mlply(df, generator)

interactions <- expand.grid(one = seq(0, 20, by=5), two = seq(0, 20, by=5))

table <- ldply(funs, function(f) {
  data.frame(varA=interactions$one, varB=interactions$one, result=f(interactions$one, interactions$two))
}) 
```

为此，我得到`In '[<-.factor'('*tmp*', ... : invalid factor level, NAs generated`.

* * *

如果我替换`ifelse(name == "A")`为`ifelse(0 < 1)`，我会如预期的那样得到所有结果`foo`。如果我用 替换`ifelse(name == 1)`，我得到的所有结果都是 10，这很奇怪，因为在很多情况下`varA + varB > 10`.

`df`有趣的是，我在of 中添加了另一列`criteria = c(1, 5, 10)`。我做不到`ifelse(criteria > 1)`，但我*可以*`ifelse(varA > criteria)`。为什么它不允许与静态数字进行比较，但允许在行变量之间进行比较？

* * *

无论如何，我希望能够做这样的事情：

```
generator <- function(var1, var2, ... , varN) {

function(varA, varB) {

ifelse(criteria based on any of var1 ... varN,

   do a bunch of stuff,

do different stuff if criteria not met)

}

} 
```

# jquery - jquery.post() 从 MVC 4 WebAPI 返回 200 OK，但错误处理程序被命中

> ID：13112261
> 
> 赞同：9
> 
> 时间：2012-10-28T19:32:55.263
> 
> 标签：jquery, cross-domain, asp.net-web-api, jquery-post

我有一个奇怪的情况，我的 jquery.post 返回代码 #200（OK），但错误处理程序被命中。

这是我的 MVC WebAPI 服务器端代码（它所做的只是返回代码 #200 OK）：

```
[HttpPost]
public HttpResponseMessage Post(T input)
{
    //_handler.Create(input);

    return Request.CreateResponse(HttpStatusCode.OK);
} 
```

这是我的客户端脚本

```
ServerAccess.prototype.Save = function (m) {

            $.post("http://localhost:55482/M/", m)
            .success(
                function (o) {
                    alert("success");
                })
            .error(
                function (xhr, textStatus, errorThrown) {
                    if (typeof console == 'object' && typeof console.log == 'function') {
                        console.log(xhr);
                        console.log(textStatus);
                        console.log(errorThrown);
                    }
                }
            );
        }; 
```

Firebug 中的控制台输出为：

> POST `http://localhost:55482/M/` 200 OK 894 毫秒
> 
> 标头
> 
> * * *
> 
> 响应标头
> 
> 内容长度 6
> 
> 内容类型应用程序/json；字符集=utf-8
> 
> 日期 2012 年 10 月 28 日星期日 18:55:17 GMT
> 
> 服务器 Microsoft-HTTPAPI/2.0
> 
> * * *
> 
> 请求标头
> 
> 接受 */*
> 
> 接受编码 gzip，放气
> 
> 接受语言 nb-no,nb;q=0.9,no-no;q=0.8,no;q=0.6,nn-no;q=0.5,nn;q=0.4,en-us;q=0.3,en ;q=0.1
> 
> 连接保持活动
> 
> 内容长度 21
> 
> 内容类型应用程序/x-www-form-urlencoded；字符集=UTF-8
> 
> 主机本地主机：55482
> 
> 原点空
> 
> 用户代理 Mozilla/5.0 (Windows NT 6.2; WOW64; rv:16.0) Gecko/20100101 Firefox/16.0

和

> 对象 { readyState=0, status=0, statusText="error"}
> 
> 错误
> 
> （一个空字符串）

我四处浏览并看到其他人也有类似的问题，通常响应中的 JSON 格式不正确。由于我只返回 200 OK 并且没有内容，这似乎不适合我的情况。但是我确实尝试像这样返回一个空对象

```
var o = new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(new T());

return Request.CreateResponse(HttpStatusCode.OK, o); 
```

服务器端从 Visual Studio 2012 运行，客户端只是一个带有一些 .js 文件的独立 .html。此外，在 VS 中有一个断点，我知道服务器收到了请求，并且使用 Postman for Chrome 一切都很好。

所以问题当然是：我在这里做错了什么？为什么错误处理程序会被命中？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T19:55:18.940

试试这个：

```
ServerAccess.prototype.Save = function (m) {
    $.ajax({
        "type": "POST",
        "url": "http://localhost:55482/M/",
        "data": m,
        "dataType": "json",
        "success": function (data, textStatus, xhr) {
            alert("success");
        },
        "error": function (xhr, textStatus, errorThrown) {
            if (typeof console === 'object' && typeof console.log === 'function') {
                console.log(xhr);
                console.log(textStatus);
                console.log(errorThrown);
            }
        }
    });
}; 
```

这允许您设置预期的返回 MIME 类型`application/json`。

**更新**

如果您在 上运行独立的 HTML 页面`http://localhost:55482`，则它不会是跨域的。如果您在`file:///C:/Users/.../Desktop/test.htm`其他地方或其他地方运行它，那么它将是一个跨域请求。`http`vs`https:`也有所作为。

`jsonp`请求是请求，`GET`不能是`POST`. 这是因为`jsonp`请求是通过向`<script>`页面添加一个元素来实现的，其中源设置为您的 url，`data`并附加到查询字符串（加上时间戳参数）。任何`POST`期望`jsonp`返回的请求都应自动转换为`GET`请求。

最后，由于您的例程需要返回数据，因此您需要返回一些实际数据，因为 jQuery 将尝试解析返回到对象中的 JSON（如果没有返回数据，则无法执行此操作）并且如果有数据将抛出错误无法解析。

尝试将您的响应消息更改为：

```
String o = "success";
System.Web.Script.Serialization.JavaScriptSerializer ser = new System.Web.Script.Serialization.JavaScriptSerializer();

return Request.CreateResponse(HttpStatusCode.OK, ser.Serialize(o)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-03T07:22:20.500

据我了解，您需要跨域，因此您应该有一个处理程序或服务调用者

阅读[这个](http://www.west-wind.com/weblog/posts/2012/Apr/02/Creating-a-JSONP-Formatter-for-ASPNET-Web-API)它可能对你有用。

在应用程序启动中添加 JsonpFormatter 作为过滤器，然后您就可以享受 jsonp 了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-25T14:14:21.027

这很可能与您发送的空响应有关。请参阅此错误报告：[http ://aspnetwebstack.codeplex.com/workitem/1664](http://aspnetwebstack.codeplex.com/workitem/1664)

您可以通过将空字符串设置为响应来解决此问题。

```
return Request.CreateResponse(HttpStatusCode.OK, ""); 
```

该错误报告包含一个解决方法，其中涉及创建一个消息处理程序，该处理程序在 content == null 的位置添加一个空字符串。

```
public class HttpResponseMessageHandler : DelegatingHandler
    {
        protected override async Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, System.Threading.CancellationToken cancellationToken)
        {

            var response = await base.SendAsync(request, cancellationToken);

            if (response.Content == null && request.Headers.Accept.Any(a => a.MediaType == "application/json"))
            {
                var content = new StringContent("{}");
                content.Headers.ContentLength = 2;
                content.Headers.ContentType = new System.Net.Http.Headers.MediaTypeHeaderValue("application/json");
                response.Content = content;
            }

            return response;
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-20T09:35:20.777

我刚刚在对 WebApi 2 服务使用 JSON 请求时遇到了这个问题。对我来说，只需更改成功和错误函数的参数列表即可解决（WebApi 端无需更改）

我从这里更改了我的代码

```
success: function (data) { alert(data); },
error: function (error) { jsonValue = jQuery.parseJSON(error.responseText); } 
```

对此

```
success: function (data, textStatus, xhr) 
{ 
  alert("data: " + data + "\ntextStatus: " + textStatus + "\nxhr: " + xhr);
},
error: function (xhr, textStatus, errorThrown)
{                       
  alert("xhr: " + xhr + "\ntextStatus: " + textStatus + "\nerrorThrown " + errorThrown);
} 
```

注意参数列表的变化

# asp.net-mvc-3 - HTML.ActionLink 重定向不会停止并在 $.ajax() 中返回 false

> ID：13112262
> 
> 赞同：0
> 
> 时间：2012-10-28T19:33:04.357
> 
> 标签：asp.net-mvc-3, jquery, html.actionlink

我有一个`HTML.ActionLink`视图。我正在做的是调用`$.ajax()`函数来检查从`anction`. 它击中动作，返回所需的结果真/假。但问题是当它返回 false 时。我需要显示一个`alert`并且重定向应该只在它返回真实的情况下..

**动作链接：**

```
<%: Html.ActionLink("Add Race", "AddRace",
     new {eventId = Model.EventId, fleetId=Model.SelectedFleet.ID}, 
          new{onclick="return checkFleetAddedandScroing()"}) %> 
```

**功能：**

```
 function checkFleetAddedandScroing() {
        debugger;
        $.ajax({
            type: "GET",
            url: '<%=Url.Action("CheckFleetExists", new {eventId=Model.EventId})%>',
            dataType: "json",
            cache: false,
            success: function (data, textStatus) {
                data = eval("(" + data + ")");
                if (data == true) {
                    alert('Ok button clicked');
                    return true;
                }
                else {
                    alert("Cannot delete this fleet becasue either you have already added races to this event or the fleet has used for boat registration.");
                    return false;
                }
            }, //success
            error: function (req) {

            }
        });
    } 
```

它总是重定向..它是否返回真/假..只有当它返回真时才应该重定向....

请纠正我做错的地方..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T19:38:50.550

您从 AJAX 回调返回 false 。

这与外部函数的返回值无关；AJAX 回调直到稍后才会开始运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T19:46:20.407

您必须等待您的请求接收结果，并且为此将 ajax 函数的异步参数设置为 false。

**编辑：**你对你的场景很幸运。你总是可以返回 false 并且在成功删除的情况下调用一个名为`DoRedirect`.

这是要走的路 ：

```
function checkFleetAddedandScroing() {
        debugger;
        $.ajax({
            type: "GET",
            url: '<%=Url.Action("CheckFleetExists", new {eventId=Model.EventId})%>',
            dataType: "json",        
            timeout: 30000,
            cache: false,
            success: function (data, textStatus) {
                data = eval("(" + data + ")");
                if (data == true) {
                    alert('Ok button clicked'); 
                    DoRedirect();
                }
                else {
                    alert("Cannot delete this fleet becasue either you have already added races to this event or the fleet has used for boat registration.");
                }
            }, //success
            error: function (req) {

            }
        });
        return false;
    }

  function DoRedirect(){
        //code for do redirect
  } 
```

干杯！

# c++ - C++ 向量参考

> ID：13112264
> 
> 赞同：13
> 
> 时间：2012-10-28T19:33:09.880
> 
> 标签：c++, vector

我对 C++ 如何管理向量中的对象感到困惑。假设我执行以下操作：

```
vector<MyClass> myVector;
myVector.push_back(a);
myVector.push_back(b);
MyClass & c = myVector[1];
myVector.erase(myVector.begin()); 
```

引用 c 是否仍然有效（或者更好的是，它是否保证有效）？如果没有，我是否必须始终从参考中复制以确保安全？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-28T19:58:49.103

与 Java 或 C# 引用（更像 C++ 指针而不是 C++ 引用）不同，C++ 中的引用与指针一样“愚蠢”，这意味着如果您获取对象的引用，然后将该对象移动到内存中，您的引用不再有效。

> 引用 c 是否仍然有效（或者更好的是，它是否保证有效）？

在您描述的情况下，当矢量内容发生变化（删除项目、调整矢量大小等）时，标准矢量不能保证将其包含的对象保留在内存中的同一位置。

这将使迭代器和指向所包含对象的指针/引用无效。

> 如果没有，我是否必须始终从参考中复制以确保安全？

有多种方法可以继续“指向”正确的对象，所有这些方法都暗示了一定程度的间接性。

## 完整/价值副本

最简单的是制作 MyClass 的完整副本：

```
vector<MyClass> x ;
x.push_back(a) ;
x.push_back(b) ;
MyClass c = x[1] ;    // c is a full copy of b, not a reference to b
x.erase(x.begin()) ; 
```

## 使用正确的容器

第二种最简单的方法是使用`std::list`专门为元素插入和删除而设计的 a，它不会更改包含的对象，也不会使指向它们的指针、引用或迭代器无效：

```
list<MyClass> x ;
x.push_back(a) ;
x.push_back(b) ;
list<MyClass> it = x.begin() ;
++it ;
MyClass & c = *it ;
x.erase(x.begin()) ; 
```

## 使用指针（不安全）

另一种方法是制作 a `std::vector<MyClass *>`，它包含指向`MyClass`而不是`MyClass`对象的指针。然后，您将能够使用稍微不同的表示法（因为额外的间接）来保留指向对象的指针或引用：

```
vector<MyClass *> x;
x.push_back(a);     // a being a MyClass *
x.push_back(b);     // b being a MyClass *
MyClass * c = x[1]; // c points to the same object as b
x.erase(x.begin()); // note that a will still need separate deallocation 
```

这是不安全的，因为没有明确的（就编译器而言）对象 a 和 b 的所有者，这意味着没有明确的代码负责在不再需要它们时释放它们（这就是内存泄漏的发生方式在 C 和 C++ 中）

因此，如果您使用这种方法，请确保代码被很好地封装，并且尽可能小以避免维护意外。

## 使用智能指针（更安全）

更好的方法是使用智能指针。例如，使用 C++11（或 boost's）`shared_ptr`：

```
vector< shared_ptr<MyClass> > x;
x.push_back(a);               // a being a shared_ptr<MyClass>
x.push_back(b);               // b being a shared_ptr<MyClass>
shared_ptr<MyClass> c = x[1]; // c points to the same object as b
x.erase(x.begin());           // No deallocation problem 
```

现在，如果您使用`shared_ptr`并且对 不了解`weak_ptr`，那么您就会遇到问题，因此您应该缩小差距。

## 使用智能指针 2（更安全）

另一种解决方案是使用 C++11's `unique_ptr`，它是指向对象的独占所有者。所以如果你想要一个指针或指针对象的引用，你将不得不使用原始指针：

```
vector< unique_ptr<MyClass> > x;
x.push_back(a);               // a being a unique_ptr<MyClass>
x.push_back(b);               // b being a unique_ptr<MyClass>
MyClass * c = x[1].get();     // c points to the same object as b
x.erase(x.begin());           // No deallocation problem 
```

请注意，向量是对象的唯一所有者，与上面的情况不同`smart_ptr`。

## 结论

您正在使用 C++ 进行编码，这意味着您必须为您的问题选择正确的方法。

但首先，您要确保了解指针添加的间接级别、指针的作用以及 C++ 引用的作用（以及为什么它们不是 C#/Java 引用）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-28T19:36:48.057

从[参考`vector`](http://www.sgi.com/tech/stl/Vector.html)：

> [5] 向量的迭代器在其内存被重新分配时失效。此外，在向量中间插入或删除元素会使指向插入或删除点之后的元素的所有迭代器无效。因此，如果您使用 reserve() 预分配向量将使用的尽可能多的内存，并且所有插入和删除都在向量的末尾，则可以防止向量的迭代器失效。

因此，您的迭代器*无效*`erase`，并且不能在and 之后使用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-28T19:35:02.310

如果您通常更改矢量的位置或大小，则对矢量内容的引用无效：有一些例外。如果您打算在使用数据之前修改向量中数据的位置，或者向量中元素的大小或数量，则只需进行复制。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-28T19:35:49.740

> 引用 c 是否仍然有效（或者更好的是，它是否保证有效）？

不，它现在处于未定义状态。

> 如果没有，我是否必须始终从参考中复制以确保安全？

如果在您检索它和使用它之间有可能它被删除或移动（等），那么是的，您确实需要制作一份副本。

# ant - Ant：如何在每次运行结束时始终执行任务（无论目标如何）

> ID：13112266
> 
> 赞同：5
> 
> 时间：2012-10-28T19:33:55.933
> 
> 标签：ant

有没有办法在 Ant 中定义一个总是在每次运行**结束**时执行的任务？这个[SO question](https://stackoverflow.com/questions/2318217/execute-ant-action-always-and-independently-from-target)提供了一种方法，在每次运行**开始**时，在执行任何其他目标之前，但我正在查看相反的情况。

我的用例是回显一条消息，警告用户如果在运行期间发现某个条件，但我想确保它在最后回显，以便引起注意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T09:52:55.083

使用 buildlistener，fe exec-listener，它为每个构建结果
（ BUILD SUCCESSFUL | BUILD FAILED ）提供一个任务容器，您可以将所有需要的任务放入其中，请参阅：
[https](https://stackoverflow.com/a/6391165/130683)
://stackoverflow.com/a/6391165/130683 for细节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T01:20:20.480

这是一个有趣的情况。通常，我会说您不能以自动方式执行此操作。您可以将 Ant 包装在一些 shell 脚本中来执行此操作，但 Ant 本身并不是一种完整的编程语言。

我唯一能想到的就是`<ant>`在每个任务结束时添加一个调用来回显你想要的内容。您可以设置它，如果变量不存在，则不会发生回声。当然，这意味着要调用同一个目标十几次才能得到 final `<echo>`。

我通过 AntXtras 和 Ant-Contrib 检查了可能的方法，但找不到任何方法。

对不起。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T21:51:23.790

将您的调用包装在顺序容器中。

[http://ant.apache.org/manual/Tasks/sequential.html](http://ant.apache.org/manual/Tasks/sequential.html)

# java - 如何实现在 JTextPane 中将 URL 作为超链接插入的 DocumentFilter？

> ID：13112270
> 
> 赞同：1
> 
> 时间：2012-10-28T19:34:48.727
> 
> 标签：java, swing, url, jtextpane, documentfilter

我有一个`JTable`用作`JTextPane`编辑器和渲染器的。我在编辑器中添加了一个 keyListener，它侦听“空格”字符并检查最后一个单词是否为 URL，如果是，则使用此属性将其作为超链接添加到编辑器中`attrs.addAttribute(HTML.Attribute.HREF, url);`：我很快发现当我粘贴文本时这不会将 URL 转换为超链接，所以我决定我需要使用`DocumentFilter`.

如何创建一个`DocumentFilter`检查要插入/替换的文本是否包含 URL，以及它是否使用`HTML.Attribute.HREF`属性和文本的其余部分插入/替换这些 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T06:21:32.227

看例子[http://java-sl.com/tip_autocreate_links.html](http://java-sl.com/tip_autocreate_links.html) 没有必要使用 DocumentFilter。监听器就足够了。

只需使用虚拟属性标记插入的内容，然后将其替换为超链接 html。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-28T19:55:11.227

```
// somewhere add text reformated as html link
setText("<HTML>Click the <FONT color=\"#000099\"><U>link</U></FONT>"
        + " to go to the Java website.</HTML>");

// somewhere add a listener for clicks
addActionListener(new OpenUrlAction());

// Define uri and open action
 final URI uri = new URI("http://java.sun.com");
    class OpenUrlAction implements ActionListener {
      @Override public void actionPerformed(ActionEvent e) {
        open(uri);
      }
    }

// Define open uri method
private static void open(URI uri) {
    if (Desktop.isDesktopSupported()) {
      try {
        Desktop.getDesktop().browse(uri);
      } catch (IOException e) { /* TODO: error handling */ }
    } else { /* TODO: error handling */ } 
```

# c++ - jpeg-8d 库的链接（或正确安装和链接）

> ID：13112274
> 
> 赞同：3
> 
> 时间：2012-10-28T19:35:33.387
> 
> 标签：c++, jpeg, static-libraries, codeblocks, libjpeg

我的项目需要 JPEG 处理能力，所以我决定使用 jpeg-8d 库，在下载我常用的包后`./configure; make and make install`。`make test`整个过程没有返回任何错误并且没有报告任何问题但是当我`example.c`在Code Blocks 10.05中打开时编译失败。我已经“搜索”了一些解决方案并添加了

```
#ifdef __cplusplus
extern "C" {
#endif
...
#ifdef __cplusplus
}
#endif 
```

在`jpeglib.h`文件中，重新编译，然后将这些行添加到代码块的链接器部分： `/usr/local/lib/libjpeg.a` `/usr/local/lib/libjpeg.so` 也将相应的目录添加到目录部分。但编译器仍然无法编译 example.c，以下是一些错误：

```
> /home/raff/CodeBlocks/jpeg-8d/example.c|116|warning: incompatible implicit declaration of built-in function ‘exit’|
> example.c|| undefined reference to 'image_width'
> example.c|| undefined reference to 'image_height' 
```

如果有人成功安装和使用 jpeg 库请帮忙，我在切换 IDE 和/或 linux 发行版时没有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T20:46:34.983

您的库安装似乎很好（否则它会抱怨`jpeglib.h`在编译过程中丢失）

该文件`example.c`应该是文档的一部分，而不是您可以编译和使用的代码。`main()`请注意，例如，没有。您应该将其用作有关如何编写压缩和解压缩 jpeg 文件的方法的参考。

变量`image_width`and `image_height`(and `image_buffer`) 被声明为`extern`，因此它们被假定在其他文件中定义。您可以编写程序来定义这些变量并填充缓冲区，然后才能使用提供的方法（`write_JPEG_file`和`read_JPEG_file`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T20:36:33.127

1.  您是在链接静态库还是共享库？
2.  如果它是静态的，你是否将它放在链接器命令行中的目标文件*之后？*
3.  如果它是共享的，并且您使用的是更新的工具链，这也可能是问题所在。
4.  如果链接正确，那么 readelf -s 会在共享库上显示什么？nm 在静态库上显示什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T19:29:50.210

我非常确定 example.c 实际上是使用这个库的一个例子，我没有检查它的内容。此外还有一些问题。编写正确的程序后，我遇到了一个错误：

```
error while loading shared libraries libjpeg.so.8: cannot open shared object file: No such file or directory 
```

但这已通过这对 shell 命令修复：

```
ranlib /usr/local/lib/libjpeg.a
ldconfig /usr/local/lib 
```

希望这可以帮助。

# jquery - jquery更改元素部分工作

> ID：13112275
> 
> 赞同：0
> 
> 时间：2012-10-28T19:35:34.330
> 
> 标签：jquery

我无法更改靠近另一个元素的元素中的文本。该功能相当简单，但由于某种原因，我无法使此文本更改生效。

当我单击#dislike_text 时，它会变为空白（应该如此），但 .like_text 不会改变。请注意，还有一个类似 post 的功能（与此功能相同，但相反，可以正常工作）。

```
function postdislike(elm) {

    var comment_id = $(elm).attr('href');

    $('#stuff').load(// --function-- 

      function (data) {

        $('#dislike_text' + comment_id).html(""); //works fine
        $(elm).closest('.like_text').html('Like'); //doesn't work
    });
    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T19:40:38.460

`closest`向上遍历祖先元素并找到与选择器匹配的第一个元素。如果 class 没有祖先元素，则`like_text`不会选择任何元素。

我认为您并不是要清除祖先元素，因为这会产生删除`#stuff`元素的效果。[因此，您需要使用 jQuery 的遍历函数](http://api.jquery.com/category/Traversing/)以其他方式找到通往其他元素的方法。最可能的方法是使用`closest`找到一个共同的祖先，然后`find`获取元素本身。例如：

```
$(elm).closest('div.someClass').find('.like_text').html('Like'); 
```

# php - 删除目录集

> ID：13112279
> 
> 赞同：1
> 
> 时间：2012-10-28T19:35:58.320
> 
> 标签：php, directory

我想删除一组目录，但首先我必须获取目录名称，所以假设我有以下站点`www.my_site.com`并将使用以下代码获取所有目录名称。

```
$get_dirs = glob("*", GLOB_ONLYDIR);

for ($i=0;$i<count($get_dirs);$i++){
echo $get_dirs[$i].'+'; // Will show results divided by + sign
} 
```

假设结果如下（如果我有 5 个目录并注意它除以 + 号）

```
dir1+dir2+dir3+dir4+dir5+ 
```

使用它

```
rrmdir(dir1); // that would delete only directory dir1 
```

**我的问题**

如何根据 + 号分解目录名称的结果，`dir1+dir2+dir3+dir4+dir5+`并在所有目录上使用 delete 函数循环，以便最终删除所有目录`dir1 and dir2 and dir3 and dir4 and dir5`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T20:01:09.253

我想这就是你想要做的？

```
 $dir  = trim('dir1+dir2+dir3+dir4+dir5+', '+');
 $arr = explode("+", $dir);

 foreach ($arr as $a){
      rrmdir($a);
 } 
```

最后你有一个额外的'+'，所以 trim($val ,'+')

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T20:00:28.560

您实际上在那里回答了您自己的问题：

```
$dirs = explode('+', $get_dirs);
foreach ($dirs as $dir) {
    rrmdir($dir);
} 
```

还是我理解错了？你为什么不在循环中做呢？

# mercurial - Mercurial (hg) 等效于 git reset（--mixed 或--soft）

> ID：13112280
> 
> 赞同：53
> 
> 时间：2012-10-28T19:36:12.740
> 
> 标签：mercurial

什么是等效的 mercurial 命令（或工作流程）

```
git reset --mixed HEAD^ 
```

或者

```
git reset --soft  HEAD^ 
```

即我想保持工作树完好无损，但将存储库恢复到上次提交之前的状态。令人惊讶的是，我在 stackoverflow 或谷歌上没有发现任何有用的东西。

请注意，我不能使用

```
hg rollback 
```

因为我在上次提交后使用 HistEdit 进行了一些历史重写。

**添加以澄清：** 经过一些变基和历史编辑后，我最终得到了 A<--B<--C。然后我使用 HistEdit 将 B 和 C 压缩在一起，得到 A<--C'。现在我想拆分提交 C'（我在 B 中提交了错误的文件）。我认为最简单的方法是将存储库恢复到状态 A（由于事先进行了所有变基和历史编辑，从技术上讲，它在存储库中从未存在过）并将工作树恢复到 C' 的状态，然后做两个提交。

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-09-28T06:21:59.220

正确的复制方法`git reset --soft HEAD^`（撤消当前提交但保留工作副本中的更改）是：

```
hg strip --keep -r . 
```

`-1`仅当您要剥离的提交是进入存储库的最后一次提交时才有效。`.`指当前签出的提交，这是 Mercurial 与 Git 的`HEAD`.

请注意，如果`.`有后代，它们也会被剥离。如果你想保留提交，那么一旦你有了提交 ID，你就可以：

```
hg update .^
hg revert --all -r <commit id> 
```

这将更新到提交的父级，然后将工作副本中的文件替换为该提交时的版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-10-12T17:14:16.927

我相信现在更现代、更简单的方法是`hg uncommit`. 请注意，这会留下一个空提交，如果您想稍后重用提交消息，这可能很有用。如果不这样做，请使用`hg uncommit --no-keep`不留下空提交。

> hg 取消提交 [选项]... [文件]...
> 
> 取消提交部分或全部本地变更集
> 
> ```
> This command undoes the effect of a local commit, returning the affected
> files to their uncommitted state. This means that files modified or
> deleted in the changeset will be left unchanged, and so will remain
> modified in the working directory.
> 
> If no files are specified, the commit will be left empty, unless --no-keep 
> ```

# android - 终结器抛出未捕获的异常：Google API 错误还是三星内核错误？

> ID：13112283
> 
> 赞同：23
> 
> 时间：2012-10-28T19:36:22.653
> 
> 标签：android, exception, finalizer, mapactivity

在我的 Galaxy Tab 2（三星）上启动我的应用程序时，我不断收到此错误。我正在开发的应用程序非常复杂，很难追踪此错误的来源。所以我开始逐步剥离我的应用程序，最后我只得到了一个 mapview 应用程序，你可以在[这里找到](https://developers.google.com/maps/documentation/android/hello-mapview)

剥离后，我最终得到了一个应用程序，它只是一个没有 overlayItem 的地图视图！所以按照教程直到第 1 部分第 9 点。

这是 MapView 活动：

```
package com.****.googlemapstutorial;

import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;
import android.os.Bundle;
import android.view.Menu;

public class MainActivity extends MapActivity 
{

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    MapView mapView = (MapView) findViewById(R.id.mapview);
    mapView.setBuiltInZoomControls(true);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) 
{
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
protected boolean isRouteDisplayed() {
    return false;
}
} 
```

我真的被踩到了！

有人有什么建议吗？

```
The error:
10-28 21:09:22.872: E/System(16840): Uncaught exception thrown by finalizer
10-28 21:09:22.872: E/System(16840): java.lang.IllegalStateException: Binder has been finalized!
10-28 21:09:22.872: E/System(16840): at android.os.BinderProxy.transact(Native Method)
10-28 21:09:22.872: E/System(16840): at android.database.BulkCursorProxy.close(BulkCursorNative.java:288)
10-28 21:09:22.872: E/System(16840): at android.database.BulkCursorToCursorAdaptor.close(BulkCursorToCursorAdaptor.java:133)
10-28 21:09:22.872: E/System(16840): at android.database.CursorWrapper.close(CursorWrapper.java:49)
10-28 21:09:22.872: E/System(16840): at android.content.ContentResolver$CursorWrapperInner.close(ContentResolver.java:1591)
10-28 21:09:22.872: E/System(16840): at android.content.ContentResolver$CursorWrapperInner.finalize(ContentResolver.java:1604)
10-28 21:09:22.872: E/System(16840): at java.lang.Daemons$FinalizerDaemon.doFinalize(Daemons.java:182)
10-28 21:09:22.872: E/System(16840): at java.lang.Daemons$FinalizerDaemon.run(Daemons.java:168)
10-28 21:09:22.872: E/System(16840): at java.lang.Thread.run(Thread.java:856) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T14:06:56.460

看起来游标可能仍处于打开状态，无论是在此代码文件中，还是在您的应用程序的其他位置。也许这个链接“ [Android list view with simplecursor adapter crash application](https://stackoverflow.com/questions/7265793/android-list-view-with-simplecursor-adapter-crashes-application-no-anr-shown) ”会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T17:30:05.993

问题并不完全是特定于设备或 Android 版本的。您在显示错误的设备上启用了严格模式。此外，您需要在尝试关闭数据库之前关闭游标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T05:42:35.137

未捕获的异常仅在您没有将代码块包围在 try catch 中时才会出现只需转到该特定文件的那一行，然后用 try catch 将其包围。我认为您正在关闭未占用（空）的光标，这就是为什么会出现此异常。或者做一件事....给我你所有的 .java 类名以及显示的完整错误。我一定会解决的：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-01T05:55:47.940

尝试在后台线程中运行您的代码。再加上一次更新您的 sdk 管理器，即 SDK 中的额外时间。

# c - FFTW+MPI，fftw_mpi_plan_dft_r2c_2d 刨床结果错误

> ID：13112287
> 
> 赞同：2
> 
> 时间：2012-10-28T19:36:52.323
> 
> 标签：c, mpi, fftw

我尝试使用 FFTW 3.3 的刨床 fftw_mpi_plan_dft_r2c_2d 计算傅立叶变换。不幸的是，我无法让它工作。如果 N0 等于处理器数量 (nb_proc)，则结果是正确的，但当 N0 != nb_proc 时结果是错误的。

显示我的问题的示例：

```
#include <stdio.h>
#include <complex.h>
#include <fftw3-mpi.h>

int main(int argc, char **argv)
{
/* if N0 (=ny) is equal to nb_proc, result are OK */
/* if N0 is not equal to nb_proc => bug */
const ptrdiff_t N0 = 4, N1 = 4;
int coef_norm = N0*N1;
fftw_plan plan_forward;
double *carrayX;
fftw_complex *carrayK;
ptrdiff_t n_alloc_local, i, j;
ptrdiff_t nX0loc, iX0loc_start, nK0loc, nK1loc;
/* X and K denote physical and Fourier spaces. */
int rank, nb_proc, irank;

MPI_Init(&argc, &argv);
fftw_mpi_init();

/*DETERMINE RANK OF THIS PROCESSOR*/
MPI_Comm_rank(MPI_COMM_WORLD, &rank); 
/*DETERMINE TOTAL NUMBER OF PROCESSORS*/
MPI_Comm_size(MPI_COMM_WORLD, &nb_proc);

if (rank==0) printf("program test_fftw3_2Dmpi_simple\n");
printf("I'm rank (processor number) %i of size %i\n", rank, nb_proc);

n_alloc_local = fftw_mpi_local_size_2d(N0, N1/2+1, MPI_COMM_WORLD,
                                       &nX0loc, &iX0loc_start);

carrayX = fftw_alloc_real(2 * n_alloc_local);
carrayK = fftw_alloc_complex(n_alloc_local);

/* create plan for out-of-place r2c DFT */
plan_forward = fftw_mpi_plan_dft_r2c_2d(N0, N1, 
                                        carrayX, carrayK, 
                                        MPI_COMM_WORLD,
                                        FFTW_MEASURE);

nK0loc = nX0loc;
nK1loc = N1/2+1;

/* initialize carrayX to a constant */
for (i = 0; i < nX0loc; ++i) for (j = 0; j < N1; ++j)
    carrayX[i*N1 + j] = 1.;

/* compute forward transform and normalize */
fftw_execute(plan_forward);
for (i = 0; i < nK0loc; ++i) for (j = 0; j < nK1loc; ++j)
    carrayK[i*nK1loc + j] = carrayK[i*nK1loc + j]/coef_norm;

/* print carrayK, there should be only one 1 in the first case for rank=0 */
for (irank = 0; irank<nb_proc; irank++)
{
    MPI_Barrier(MPI_COMM_WORLD);
    if (rank == irank)
    {
        for (i = 0; i < nK0loc; ++i) for (j = 0; j < nK1loc; ++j)
        {
             printf("rank = %i, carrayK[%ti*nK1loc + %ti] = (%6.4f, %6.4f)\n", 
                    rank, i, j,
                    creal(carrayK[i*nK1loc + j]), 
                    cimag(carrayK[i*nK1loc + j]));
        }
        printf("\n");
    }
}
MPI_Barrier(MPI_COMM_WORLD);

fftw_destroy_plan(plan_forward);
MPI_Finalize();
} 
```

这个例子有问题，但我不明白是什么。

对于这种情况（N0 = 4，N1 = 4），结果是正确的

```
mpirun -np 4 ./test_fftw3_2Dmpi_simple 
```

但不与

```
mpirun -np 2 ./test_fftw3_2Dmpi_simple 
```

PS：与标志 FFTW_MPI_TRANSPOSED_OUT 相同。

# c# - CustomControl 属性无法通过依赖属性设置

> ID：13112288
> 
> 赞同：1
> 
> 时间：2012-10-28T19:36:55.510
> 
> 标签：c#, wpf, wpf-controls

我创建了自定义控件，其中包含用于显示颜色的组合框和一个依赖属性`SelectedIndex`。我在页面中使用了这个控件，`mainwimdow.xaml`并尝试通过在 `mainwimdow.xaml.cs`页面中声明的依赖属性设置选定的索引值。

但是当我通过依赖属性设置任何值时它不起作用，如果我直接在`mainwimdow.xaml`页面中设置自定义控件属性它工作正常。所以这意味着自定义控件工作正常，只有值不是通过依赖属性设置的。

这是代码。

`MainWindow.xaml.cs`：

```
public partial class MainWindow : Window
{
    public static readonly DependencyProperty ConditionsSelectedIndexProperty = 
        DependencyProperty.Register(
           "ConditionsSelectedIndex", 
           typeof(int), 
           typeof(MainWindow), 
           new UIPropertyMetadata(3));

    public int ConditionsSelectedIndex
    {
        get { return (int)GetValue(ConditionsSelectedIndexProperty); }
        set { SetValue(ConditionsSelectedIndexProperty, value); }
    }

    public MainWindow()
    {
        InitializeComponent();
        SetCurrentValue(ConditionsSelectedIndexProperty, 5);
    }
} 
```

`MainWindow.xaml`：

```
<controls:ColorComboBoxControl x:Name="cmbConditions" 
          SelectedIndex="{Binding ConditionsSelectedIndex}" 
          Grid.Row="0" Grid.Column="0" /> 
```

如果我分配硬编码值，则以下代码可以正常工作

```
<controls:ColorComboBoxControl x:Name="cmbConditions" 
         SelectedIndex="5" Grid.Row="0" Grid.Column="0" /> 
```

如果我尝试这个来检查依赖属性是否工作，那么它的工作

```
<TextBlock Text="{Binding Path=ConditionsSelectedIndex}"
           Grid.Column="1" Height="25" Margin="42,143,77,143" >
</TextBlock> 
```

因此，如果独立测试，自定义控件和依赖属性都可以正常工作。但是当尝试通过另一个依赖属性设置自定义控件属性时它不起作用。

# c# - 如何在自定义服务器控件 asp 中使用 .resx 和 .resource 文件？

> ID：13112289
> 
> 赞同：5
> 
> 时间：2012-10-28T19:37:00.050
> 
> 标签：c#, asp.net, resx, resgen

我正在编写自己的服务器端控件，并且正在使用存储在`.resx`文件中的图像。在控制台应用程序中，此代码工作正常：

```
 ResXResourceReader rsxr = new ResXResourceReader("Resource1.resx");

     foreach (DictionaryEntry d in rsxr)
     {
        Console.WriteLine(d.Key.ToString() + ":\t" + d.Value.ToString());
     }

     rsxr.Close(); 
```

但在这儿

```
 protected override void RenderContents(HtmlTextWriter output)
    {
        ResXResourceReader rsxr = new ResXResourceReader("Resource1.resx");

        base.RenderContents(output);

        foreach (DictionaryEntry d in rsxr)
        {
            output.Write(d.Key.ToString());
        }

    } 
```

我收到此错误：

> 找不到文件“C:\Program Files\Common Files\Microsoft Shared\DevServer\10.0\Resource1.resx”

我尝试使用 ResourceManager，但它需要一个`.resource`文件。我无法访问该`resgen`工具（命令提示符不理解该`resgen`命令）并安装它（在尝试期间出现了一些错误）。

我的问题是：

1.  为什么我不能阅读`.resx`？

2.  如何`resgen`正确安装工具？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:13:47.560

根据您的描述，我了解到您需要找到并访问用户控件的资源文件。我发现它通过以下方式很好地工作：

1.  在项目级别创建**App_GlobalResources**（通过上下文菜单`Add -> Add ASP.NET Folder -> App_GlobalResources`）

2.  创建与控件同名的资源文件，但在**App_GlobalResources**内。例如，如果控件名为`myControl.ascx`，则默认语言的资源文件名称必须为`myControl.ascx.resx`

3.  为您需要的每种语言创建额外的资源文件。例如，如果您需要德语 (" `de-DE`")，则添加 myControl.ascx.de.resx

4.  添加类`MultiLanguageUserControl`如下：

    ```
    public class MultiLanguageUserControl : System.Web.UI.UserControl
    {
        public string getResValue(string id)
        {
            var ctrlPath = TemplateControl.AppRelativeVirtualPath;
            var ctrlFile = System.IO.Path.GetFileName(ctrlPath);
            var resObj = GetGlobalResourceObject(ctrlFile, id);
            if (resObj!=null)
                        return resObj.ToString();
            else
                        return string.Format("UNRESOLVED[{0}]", id);        
        }
    } 
    ```

5.  打开 myControl 后面的代码并使其继承`MultiLanguageUserControl`自`System.Web.UI.UserControl`：

    `public partial class myControl : MultiLanguageUserControl { //... }`

6.  在 HTML 代码中，使用新函数，例如：`<%=getResValue("resid")%>`，其中`"resid"`是您要查找的资源字符串的名称。您还可以使用 HTML 编码标记`<%:`代替`<%=`，具体取决于您的要求。或者，您可以使用`getResValue`用户控件中服务器端 C# 代码中的任何位置从资源文件中检索值。

7.  确保在`Page_Load`使用用户控件的页面事件中支持语言检测。[此处](http://www.codeproject.com/Articles/38907/ASP-NET-Localization-Quick-Reference)描述了如何执行此操作（查找功能`InitializeCulture`）。

**注意：**如果您想从用户控件内部读取页面的本地资源字符串，请查看[此处](https://stackoverflow.com/a/2288107/1016343)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T12:03:46.173

将资源文件存储`App_GlobalResources`在应用程序根目录下或`App_LocalResources`与用户控制文件同名的文件夹下被认为是一种很好的做法。因此，例如用户用户控件是 uc.ascx 本地资源文件夹中的文件应该是 uc.ascx.resx。这样更容易维护，asp.net 会自动检测到它。

现在你的答案：

**第一个问题：** 使用`Server.MapPath("~/")`指向您的 web.config 所在位置的物理点。如果要使用 Controls 文件夹中的资源文件，则必须编写`Server.MapPath("~/Controls/Resource1.resx")`以获取路径。

**不确定**要使用 resgen 工具做什么？当你编译你的应用程序时，资源文件也将被编译。选择您的资源文件并单击 F4，它将显示构建操作，在构建操作中选择资源，您的资源文件将包含在程序集中。

您可以查看此帖子以获取更多信息：[如何在 asp.net 网站中使用图像资源？](https://stackoverflow.com/questions/244807/how-to-use-image-resource-in-asp-net-website)

# django - django 列表文件夹失败

> ID：13112291
> 
> 赞同：0
> 
> 时间：2012-10-28T19:37:36.837
> 
> 标签：django, list, directory

我想列出一个文件夹（项目文件夹/媒体/图片/*）

我尝试了，但它失败了（网址错误，我不知道为什么）

## 楷模

```
class Picture(models.Model):

    file = models.FileField(upload_to="pictures")
    slug = models.SlugField(max_length=50, blank=True)

    def __unicode__(self):
        return self.file

    def getFileName(self):
        return self.docfile.name

    @models.permalink
    def get_absolute_url(self):
        return ('upload-new', ) 
```

## 网址

```
from django.conf.urls.defaults import *
from fileupload.views import PictureCreateView, PictureDeleteView

urlpatterns = patterns('fileupload.views',
    (r'^new/$', PictureCreateView.as_view(), {}, 'upload-new'),
    #BUG BUG
    #(r'^list/$', gallery),
    (r'^delete/(?P<pk>\d+)$', PictureDeleteView.as_view(), {}, 'upload-delete'),
) 
```

## 意见

```
def gallery(request):
    path="/media/pictures" 
    file_list =os.listdir(path)   
    return render_to_response('list.html', {'files': file_list}) 
```

* * *

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T21:03:09.557

`gallery`应该是一个字符串：

```
(r'^list/$', 'gallery') 
```

# python - 如何模拟 django 信号处理程序？

> ID：13112302
> 
> 赞同：51
> 
> 时间：2012-10-28T19:39:27.350
> 
> 标签：python, django, mocking, signals, django-signals

我有一个通过装饰器连接的信号处理程序，就像这个非常简单的：

```
@receiver(post_save, sender=User, 
          dispatch_uid='myfile.signal_handler_post_save_user')
def signal_handler_post_save_user(sender, *args, **kwargs):
   # do stuff 
```

我想要做的是在测试中**使用模拟库[http://www.voidspace.org.uk/python/mock/](http://www.voidspace.org.uk/python/mock/)**模拟它，以检查 django 调用它的次数。我现在的代码是这样的：

```
def test_cache():
    with mock.patch('myapp.myfile.signal_handler_post_save_user') as mocked_handler:
        # do stuff that will call the post_save of User
    self.assert_equal(mocked_handler.call_count, 1) 
```

这里的问题是即使模拟了原始信号处理程序也会被调用，很可能是因为`@receiver`装饰器在某处存储了信号处理程序的副本，所以我模拟了错误的代码。

所以问题是：我如何模拟我的信号处理程序以使我的测试工作？

请注意，如果我将信号处理程序更改为：

```
def _support_function(*args, **kwargs):
    # do stuff

@receiver(post_save, sender=User, 
          dispatch_uid='myfile.signal_handler_post_save_user')
def signal_handler_post_save_user(sender, *args, **kwargs):
   _support_function(*args, **kwargs) 
```

而我嘲笑`_support_function`，一切都按预期工作。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2015-10-02T18:07:43.247

可能更好的主意是模拟信号处理程序*内部*的功能，而不是处理程序本身。使用 OP 的代码：

```
@receiver(post_save, sender=User, dispatch_uid='myfile.signal_handler_post_save_user')
def signal_handler_post_save_user(sender, *args, **kwargs):
  do_stuff()  # <-- mock this

def do_stuff():
   ... do stuff in here 
```

然后模拟`do_stuff`：

```
with mock.patch('myapp.myfile.do_stuff') as mocked_handler:
    self.assert_equal(mocked_handler.call_count, 1) 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-10-29T09:47:37.533

所以，我最终得到了一种解决方案：模拟信号处理程序只是意味着将模拟本身连接到信号，所以这正是我所做的：

```
def test_cache():
    with mock.patch('myapp.myfile.signal_handler_post_save_user', autospec=True) as mocked_handler:
        post_save.connect(mocked_handler, sender=User, dispatch_uid='test_cache_mocked_handler')
        # do stuff that will call the post_save of User
    self.assertEquals(mocked_handler.call_count, 1)  # standard django
    # self.assert_equal(mocked_handler.call_count, 1)  # when using django-nose 
```

请注意，为了正确地在 a 上工作，`autospec=True`需要in ，否则 django 将引发一些异常并且连接将失败。`mock.patch``post_save.connect``MagicMock`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-09-28T20:38:32.810

您可以通过模拟 ModelSignal 类来模拟 django 信号，`django.db.models.signals.py`如下所示：

```
@patch("django.db.models.signals.ModelSignal.send")
def test_overwhelming(self, mocker_signal):
    obj = Object() 
```

这应该够了吧。请注意，无论您使用哪个对象，这都会模拟所有信号。

如果您有机会改用该`mocker`库，则可以这样做：

```
from mocker import Mocker, ARGS, KWARGS

def test_overwhelming(self):
    mocker = Mocker()
    # mock the post save signal
    msave = mocker.replace("django.db.models.signals")
    msave.post_save.send(KWARGS)
    mocker.count(0, None)

    with mocker:
        obj = Object() 
```

它的线条更多，但效果也很好:)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-29T05:41:07.987

看看 mock_django 。它支持信号

[https://github.com/dcramer/mock-django/blob/master/tests/mock_django/signals/tests.py](https://github.com/dcramer/mock-django/blob/master/tests/mock_django/signals/tests.py)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-05-26T06:39:11.187

在 django 1.9 中，您可以使用类似这样的方式模拟所有接收器

```
# replace actual receivers with mocks
mocked_receivers = []
for i, receiver in enumerate(your_signal.receivers):
    mock_receiver = Mock()
    your_signal.receivers[i] = (receiver[0], mock_receiver)
    mocked_receivers.append(mock_receiver)

...  # whatever your test does

# ensure that mocked receivers have been called as expected
for mocked_receiver in mocked_receivers:
    assert mocked_receiver.call_count == 1
    mocked_receiver.assert_called_with(*your_args, sender="your_sender", signal=your_signal, **your_kwargs) 
```

这会将所有接收器替换为模拟，例如您已注册的接收器、可插入应用程序已注册的接收器以及 django 本身已注册的接收器。`post_save`如果您使用它并且事情开始破裂，请不要感到惊讶。

您可能需要检查接收器以确定您是否真的要模拟它。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-12-16T09:22:12.320

有一种方法可以用小班模拟 django 信号。

您应该记住，这只会将该函数模拟为 django 信号处理程序，而不是原始函数；例如，如果 m2mchange 触发对直接调用您的处理程序的函数的调用，则 mock.call_count 不会增加。您需要一个单独的模拟来跟踪这些调用。

这是有问题的课程：

```
class LocalDjangoSignalsMock():
    def __init__(self, to_mock):
        """ 
        Replaces registered django signals with MagicMocks

        :param to_mock: list of signal handlers to mock
        """
        self.mocks = {handler:MagicMock() for handler in to_mock}
        self.reverse_mocks = {magicmock:mocked
                              for mocked,magicmock in self.mocks.items()}
        django_signals = [signals.post_save, signals.m2m_changed]
        self.registered_receivers = [signal.receivers
                                     for signal in django_signals]

    def _apply_mocks(self):
        for receivers in self.registered_receivers:
            for receiver_index in xrange(len(receivers)):
                handler = receivers[receiver_index]
                handler_function = handler[1]()
                if handler_function in self.mocks:
                    receivers[receiver_index] = (
                        handler[0], self.mocks[handler_function])

    def _reverse_mocks(self):
        for receivers in self.registered_receivers:
            for receiver_index in xrange(len(receivers)):
                handler = receivers[receiver_index]
                handler_function = handler[1]
                if not isinstance(handler_function, MagicMock):
                    continue
                receivers[receiver_index] = (
                    handler[0], weakref.ref(self.reverse_mocks[handler_function]))

    def __enter__(self):
        self._apply_mocks()
        return self.mocks

    def __exit__(self, *args):
        self._reverse_mocks() 
```

示例用法

```
to_mock = [my_handler]
with LocalDjangoSignalsMock(to_mock) as mocks:
    my_trigger()
    for mocked in to_mock:
        assert(mocks[mocked].call_count)
        # 'function {0} was called {1}'.format(
        #      mocked, mocked.call_count) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-05-06T10:00:09.720

正如你所提到的， `mock.patch('myapp.myfile._support_function')`是正确的，但`mock.patch('myapp.myfile.signal_handler_post_save_user')`也是错误的。

我认为原因是：

初始化测试时，一些文件导入信号的实现python文件，然后`@receive`装饰器创建一个新的信号连接。

在测试中，`mock.patch('myapp.myfile._support_function')`将创建另一个信号连接，因此即使被模拟，也会调用原始信号处理程序。

之前尝试断开信号连接`mock.patch('myapp.myfile._support_function')`，例如

```
post_save.disconnect(signal_handler_post_save_user)
with mock.patch("review.signals. signal_handler_post_save_user", autospec=True) as handler:
    #do stuff 
```

# git - git push :: 推前估计推的大概大小

> ID：13112304
> 
> 赞同：0
> 
> 时间：2012-10-28T19:39:43.403
> 
> 标签：git, version-control

有没有办法在实际推送之前猜测**git push**的大小？

我的用例是，较大的推送大小是一个很好的指标，表明我可能无意中在暂存区域中包含了一些二进制文件（因为我通常使用**git add . -A 添加**）。我知道我可以做一个**git add 。-A -n使用****grep**管道传输文件扩展名以供提防，但可以说，推空运行只是为了估计大小会提供一些额外的保证。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T19:52:58.897

你可以只使用

```
 git add -A 
```

你不需要期间。

您也可以继续添加然后提交所有内容。现在你可以做

```
git log -1 --stat 
```

这会告诉你你在推动什么。如果你想知道确切的尺寸，你可以

```
git bundle create HEAD^ HEAD 
```

并且它产生的文件大小将反映如果您要推送将要传输的内容。

现在您可以删除不需要的文件

```
git add -A && git commit --amend --no-edit 
```

这将修改最后一次提交以仅包含您想要的内容。任何编辑都不会重用您的原始提交消息。

# mod-rewrite - Drupal mod 重写目录以查询字符串

> ID：13112305
> 
> 赞同：1
> 
> 时间：2012-10-28T19:39:45.253
> 
> 标签：mod-rewrite, drupal-7, directory, query-string

我已经在 stackoverflow 上看到过这个问题被问过/回答了几次，但我找不到任何适合我的解决方案。我确定这是我误解 mod rewrite 的工作原理的一个案例。

我正在尝试重写：

node/45/done/sid/ 到 node/45/done?sid=

我正在使用 Drupal，所以已经有一些 mod 重写条目（见下文）可能会干扰我见过的其他解决方案。对于上面的任何解决方案，我应该把它放在哪里？

```
<IfModule mod_rewrite.c>
  RewriteEngine on

  RewriteRule "(^|/)\." - [F]

  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_URI} !=/favicon.ico
  RewriteRule ^ index.php [L]

  <IfModule mod_headers.c>
    RewriteCond %{HTTP:Accept-encoding} gzip
    RewriteCond %{REQUEST_FILENAME}\.gz -s
    RewriteRule ^(.*)\.css $1\.css\.gz [QSA]

    RewriteCond %{HTTP:Accept-encoding} gzip
    RewriteCond %{REQUEST_FILENAME}\.gz -s
    RewriteRule ^(.*)\.js $1\.js\.gz [QSA]

    RewriteRule \.css\.gz$ - [T=text/css,E=no-gzip:1]
    RewriteRule \.js\.gz$ - [T=text/javascript,E=no-gzip:1]

    <FilesMatch "(\.js\.gz|\.css\.gz)$">
      Header set Content-Encoding gzip
      Header append Vary Accept-Encoding
    </FilesMatch>
  </IfModule>
</IfModule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T20:25:18.053

由于正常的“RewriteRule ^ index.php [L]”规则具有 [L] 标志，因此不会再执行其他规则。因此，您需要在该规则之前添加您的规则。"RewriteRule "(^|/)." - [F]" 行是一项安全预防措施，因此我会在此之后立即添加您的规则。我相信如果您不将 [L] 标志添加到您的规则中，它将落入默认规则。

# ruby-on-rails - 生成重置密码令牌不保存在模型上

> ID：13112308
> 
> 赞同：2
> 
> 时间：2012-10-28T19:40:09.130
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2, railscasts

您好，我正在尝试为我的 rails 应用程序创建重置密码；但是当我尝试保存时，出现以下错误：

> 验证失败：密码不能为空、密码太短（最少为 6 个字符）、密码确认不能为空

这是我的用户模型。

```
class User < ActiveRecord::Base
  attr_accessible :email, :password, :password_confirmation
  has_secure_password

  before_save { |user| user.email = email.downcase }
  before_save :create_remember_token

  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  validates :email, presence: true, format: { with: VALID_EMAIL_REGEX }, uniqueness: { case_sensitive: false }
  validates :password, presence: true, length: { minimum: 6 }
  validates :password_confirmation, presence: true

    def send_password_reset
        self.password_reset_token = SecureRandom.urlsafe_base64
        self.password_reset_at = Time.zone.now
        self.password = self.password
        self.password_confirmation = self.password
        save!
    end

  private

    def create_remember_token
        self.remember_token = SecureRandom.urlsafe_base64
    end

end 
```

方法“send_password_reset”不会更新用户，我不明白为什么要尝试保存用户而不是仅更新 password_reset_token 和 password_reset_at。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-28T19:46:27.203

当您调用`save!`模型实例时，它将在您的模型上运行验证`User`；他们全部。

有许多方法可以有条件地跳过密码验证。一种是使用`Proc`

```
validates :password, presence: true, length: { minimum: 6 }, unless: Proc.new { |a| !a.new_record? && a.password.blank? } 
```

这将允许`User`保存实例，并且`:password`如果该字段为空且`User`不是新的*（已持久化到数据库）* ，则将跳过该字段的验证。

这是我在应用程序中使用的大部分密码验证

```
validates :password, confirmation: true,
                     length: {:within => 6..40},
                     format: {:with => /^(?=.*\d)(?=.*([a-z]|[A-Z]))([\x20-\x7E]){6,40}$/}, 
```

请注意，您不需要单独验证`:password_confirmation`. 相反，只需传递`confirmation: true`给`:password`验证器。

推荐阅读：

*   [http://guides.rubyonrails.org/active_record_validations_callbacks.html#confirmation](http://guides.rubyonrails.org/active_record_validations_callbacks.html#confirmation)

# mysql - MySQL - 如何优化表以提高速度

> ID：13112315
> 
> 赞同：2
> 
> 时间：2012-10-28T19:41:27.357
> 
> 标签：mysql

首先，我对 PHP / mySQL 还是很陌生，所以如果它对你来说太简单了，请原谅我的问题 :)

这是我的问题：我目前正在将大量数据存储到 mysql 数据库中。它基本上是我儿子学校的档案目录。

结构基本上是：

id、关键字、标题、描述、url、排名、哈希

```
id is int 11
keyword is varchar 255
title is varchar 255
description is text
url is varchar 255
rank is int 2
hash is varchar 50 
```

我们计划插入包含上述字段的大约 1000 万行，我的任务是能够尽可能快地查询数据库。

我的查询总是针对确切的关键字。

例如：

```
select * from table where keyword = "keyword" limit 10 
```

我真的只需要查询关键字而不是标题或描述或其他任何内容。每个关键字最多有 10 个结果 - 永远不会更多。

我对mysql索引和东西一无所知，但我读到如果你有一些索引它可以提高速度。

现在这是我需要专业人士帮助的地方。我的任务是能够以最快的速度运行查询，因此查询数据库不需要太长时间。由于我只查找关键字字段，我相信有一种方法可以确保即使您有数百万行，也可以快速返回结果。

你会建议我做什么。我应该将关键字字段设置为 INDEX 还是必须观看其他内容？由于我对索引没有真正的线索，因此感谢您的帮助，这意味着我不知道我是否应该使用索引，或者我是否必须将它们用于关键字、标题、描述等所有内容......

数据库会经常更新——以防万一。

您认为甚至可以在不到一秒的时间内存储数百万行并进行查询吗？

任何其他建议（例如自定义 my.cnf 设置等）也会有所帮助。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T19:46:02.260

`keyword`在列上添加索引。它将显着提高速度。那么以毫秒为单位查询数据应该是没有问题的。

一般来说，您应该在`where`子句中使用的字段上放置一个索引。这样，数据库可以真正快速地限制数据并返回结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T19:46:12.220

你的直觉是正确的——如果你只是`keyword`在你的`WHERE`子句中过滤，它应该被索引，如果你这样做，你可能*会*看到一些执行速度的提高。

```
CREATE INDEX `idx_keyword` ON `yourtable` (`keyword`) 
```

您可能正在使用像 PHPMyAdmin 这样的客户端，它使索引创建比执行命令更容易，但[请查看`CREATE INDEX`](http://dev.mysql.com/doc/refman/5.0/en/create-index.html). 您的案例非常普通，因此您不需要任何特殊选项。

尽管对您来说不是这种情况（正如您所说，每个 最多有 10 行`keyword`），但如果您已经有一个唯一约束或`PRIMARY KEY`或`FOREIGN KEY`定义在 上`keyword`，它也可以用作索引。

# r - 使用 lapply 和 if 来测试列表中的每个元素

> ID：13112316
> 
> 赞同：9
> 
> 时间：2012-10-28T19:41:41.933
> 
> 标签：r, if-statement, lapply

假设我有一个列表：

```
alist<- list(4,6,8,9) 
```

我想测试每个列表元素是否大于 7，如果为真则返回 1，如果为假则返回 0。

但是我必须使用 lapply。

```
lapply(alist,if,>7,1) or lapply(alist,if,cond>7,1) 
```

当然，这些都不起作用，我不断收到以下错误。

```
Error: unexpected ',' in "lapply(alist, if," 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-28T19:51:27.487

回答这个问题让我很痛苦，因为这样做非常不合理。您可以尝试更明确并使用括号，如下所示：

```
lapply(alist, function(x) if (x > 7) {1} else {0}) 
```

或者向量化的`ifelse`

```
lapply(alist, function(x) ifelse(x > 7, 1, 0)) 
```

或者最重要的是：

```
as.numeric(alist > 7) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-27T15:26:30.147

另外两个：

```
lapply(alist > 7, as.integer) 
```

或者

```
lapply(alist > 7, ifelse, 1, 0) 
```

# c++ - GlTexSubImage2D 速度慢，占用 4% 的 CPU

> ID：13112318
> 
> 赞同：2
> 
> 时间：2012-10-28T19:41:54.720
> 
> 标签：c++, opengl

我正在将 glTexSubImage2D 用于使用 openGL 的更新窗口。

我看到这个函数需要很长时间才能返回，并且还需要 4% 的 CPU。

这是我使用的代码：

```
glEnable(GL_TEXTURE_2D);
glBindTexture(GL_TEXTURE_2D, (*i)->getTextureID());
glTexSubImage2D(GL_TEXTURE_2D, 0, 0, 0, (*i)->getWidth(), (*i)->getHeightView(),
    GL_BGRA, GL_UNSIGNED_BYTE,(*i)->getBuffer()); 
```

有人知道更好的实现吗？性能更好但占用 CPU 更少的东西？

现在这使我的程序变得迟缓。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-28T20:04:22.970

There are some things you can do, though how much you can benefit from them depends on the circumstances.

First, make sure that your pixel upload format is correct for the driver's needs. You seem to have that taken care of with `GL_BGRA, GL_UNSIGNED_BYTE`, which is likely the driver's preferred format for `GL_RGBA8` image formats.

However, if you happen to have access to OpenGL 4.3 or a driver that implements [ARB_internalformat_query2](http://www.opengl.org/registry/specs/ARB/internalformat_query2.txt), you can actually detect at runtime what the preferred upload format will be. [Like this](http://www.opengl.org/wiki/GLAPI/glGetInternalFormat):

```
GLint pixelFormat, pixelType;
glGetInternalFormativ(GL_TEXTURE_2D, GL_RGBA8, GL_TEXTURE_IMAGE_FORMAT, 1, &pixelFormat);
glGetInternalFormativ(GL_TEXTURE_2D, GL_RGBA8, GL_TEXTURE_IMAGE_TYPE, 1, &pixelType); 
```

Of course, this means that you will need to be able to modify your data generation method to generate data in the above format/type pair.

Once you've taken steps to appease the driver, your next possibilities are using [buffer objects to store your pixel transfer data](http://www.opengl.org/wiki/Pixel_Buffer_Object). This probably won't help overall performance, but it can reduce the CPU burden.

*However*, in order to take the best advantage of this, you need to be able to generate your pixel data "directly" into the buffer object's memory by [mapping it](http://www.opengl.org/wiki/Buffer_Object#Mapping). If you are able to do this, then you can probably get back some of the CPU cost of the upload. Otherwise, it may not be worthwhile.

If you do this, you should use proper [buffer object streaming techniques](http://www.opengl.org/wiki/Buffer_Object_Streaming).

Double-buffering your texture may also help. That is, while you're rendering from one texture object, you're uploading to another one. This will prevent GPU stalls that wait for the prior rendering to complete. How much this helps really depends on how you're rendering.

Without knowing more about the specific circumstances of your application, there's not much more that can be said.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-28T19:58:20.867

如果您的纹理确实每帧都在变化，那么您将需要使用双缓冲区将数据传输到 GPU。（如果不是每一帧都改变，那么明显的优化就是只上传一次！）

每一帧，您将数据上传到一个缓冲区并从另一个缓冲区绘制数据，然后您切换每个帧使用的缓冲区。这将加速一切，因为 GPU 不必等待内存传输完成。

关于 PBO 的教程在某种程度上超出了我的回答能力，但“ [OpenGL Pixel Buffer Objects](http://www.songho.ca/opengl/gl_pbo.html) ”是一个不错的参考，我会查看“ [OGL Samples](http://sourceforge.net/projects/ogl-samples/) ”存储库以了解 PBO 是如何工作的。

**但是，**如果您不能提前计算纹理帧，那么使用 PBO 就没有真正的优势。只需使用`glTexSubImage2D`.

**也就是说，** 4% 的 CPU 可能*不是*问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T19:43:54.437

你不应该为了更新你的屏幕而改变每一帧的纹理数据。纹理意味着加载一次并且很少（如果有的话）更改。如果您尝试写入屏幕上的单个像素，我建议您不要使用 OpenGL，而是使用更适合该任务的东西，例如 SDL。

编辑：好的，这不一定是真的。请参阅下面的讨论。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-29T10:35:43.837

[正如我从这个答案](https://stackoverflow.com/a/13112332/7616532 "Xymotech 的回答")的评论线程中了解到的那样，您正在 CPU 端渲染一个网站（或渲染的图像通过 CPU），但对其应用 OpenGL 着色器。如果是这样，您需要一个 GPU 端渲染器，渲染网页**并**在 GPU 端应用着色器。这样一来，您将不再通过 CPU 将每一帧上传到 GPU，并且 CPU 将不再需要渲染，**因为它原本应该是**.

# jquery - jquery noConflict 在 php include() 中不起作用

> ID：13112325
> 
> 赞同：0
> 
> 时间：2012-10-28T19:43:05.053
> 
> 标签：jquery, php-include

jquery.noConflict 在使用 php 包含从外部文件加载时由于某种原因不起作用？aslo 注意到也许有些脚本也没有完全加载？

* * *

主文件.php

```
<script type="text/javascript" src="js.jquery/jquery.1.8.2.min.js"></script>

<?
include 'extrn_file.php';
?> 
```

// 结尾

//extrn_file.php

```
<script type="text/javascript" src="js.jquery/jquery.1.3.2.min.js"></script>
<script> $jq132 = jQuery.noConflict(true); </script>
<script type="text/javascript" src="js/animate.js"></script>

<script type="text/javascript">
execute_skills_doc();

function execute_skills_doc(){
$jq132(document).ready(function() {
alert("yes");//nothing happens
});

} 
```

//结尾

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T23:20:33.607

如果要`jQuery`在同一页面上使用多个版本，则必须`noConflict()`先加载第二个版本。由于您的 PHP 包含只是将两个文件的内容拉到一起，因此您最终会得到：

```
<script type="text/javascript" src="js.jquery/jquery.1.8.2.min.js"></script>
<script type="text/javascript" src="js.jquery/jquery.1.3.2.min.js"></script>
<script> $jq132 = jQuery.noConflict(true); </script> 
```

你真正想要的是：

```
<script type="text/javascript" src="js.jquery/jquery.1.8.2.min.js"></script>
<script type="text/javascript"> 
    // set version 1.8.2 to variable and remove globals
    $jq182 = jQuery.noConflict(true); 
</script>
<script type="text/javascript" src="js.jquery/jquery.1.3.2.min.js"></script>
<script type="text/javascript">
    // return jQuery version
    function getVersion(jq){
        return jq().jquery;
    }

    // set version 1.3.2 to variable and remove globals
    $jq132 = jQuery.noConflict(true); 
    // reset jQuery variable to 1.8.2
    jQuery = $jq182.noConflict();

    // your code that uses $ variable and jQuery 1.3.2
    (function($){
        $(document).ready(function(){ alert('Using $ v'+getVersion($)+'!'); });
    })($jq132);

    // your code that uses $ variable and jQuery 1.8.2
    (function($){
        $(document).ready(function(){ alert('Using $ v'+getVersion($)+'!'); });
    })($jq182);

    // your code that uses jQuery variable and jQuery 1.8.2
    jQuery(document).ready(function(){ alert('Using jQuery v'+getVersion(jQuery)+'!'); });

</script>​ 
```

此时，您将版本`1.8.2`加载到`$jq182`和`jQuery`变量中并`1.3.2`加载到`$jq132`变量中。上面的代码将提醒使用的变量和每个变量的版本。您可以在此处查看使用 Google API 托管库的示例：http: [//jsfiddle.net/2kX3E/](http://jsfiddle.net/2kX3E/)

# php - 由于 xml 错误，soap php 调用出现问题

> ID：13112326
> 
> 赞同：2
> 
> 时间：2012-10-28T19:43:24.247
> 
> 标签：php, xml, soap, webserver

我正在尝试对 Web 服务进行肥皂调用以传递运输数据。这是我到目前为止发送的请求：

```
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:ns1="http://weblabeling.gls-italy.com/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:enc="http://www.w3.org/2003/05/soap-encoding">
    <env:Body>
        <ns1:AddParcel env:encodingStyle="http://www.w3.org/2003/05/soap-encoding">
        <!-- bof shipping array --->
            <XMLInfoParcel>
                <Info>
                    <SedeGls>XXXX</SedeGls>
                    <CodiceClienteGls>XXXXX</CodiceClienteGls>
                    <PasswordClienteGls>XXXXXX</PasswordClienteGls>
                    <Parcel>
                        <CodiceContrattoGls>XXXXXX</CodiceContrattoGls>
                        <RagioneSociale>XXXXXX</RagioneSociale>
                        <!-- other stuff here -->
                    </Parcel>
                </Info>
            </XMLInfoParcel>
            <!-- eof shipping array --->
        </ns1:AddParcel>
    </env:Body>
</env:Envelope> 
```

相反，这是网络服务问我的

```
 <soap12:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap12="http://www.w3.org/2003/05/soap-envelope">
      <soap12:Body>
        <AddParcel xmlns="http://weblabeling.gls-italy.com/">
          <XMLInfoParcel>string</XMLInfoParcel>
        </AddParcel>
      </soap12:Body>
    </soap12:Envelope> 
```

我总是得到响应 xml 格式错误。

怎么了？运输数组是正确的，并且完全匹配请求之一。

提前致谢。

编辑：

这是我构建xml的方式：

```
//inseriamo i dati nei corretti array
$Label = array(
                'XMLInfoParcel' => array(
                'Info' => array(
                    'SedeGls' => $SedeGls,
                    'CodiceClienteGls' => $CodiceClienteGls,
                    'PasswordClienteGls' => $PasswordClienteGls,                
                    'Parcel' => array(
                                       'CodiceContrattoGls' => $cod_cont,
                                       'RagioneSociale' => $rag_soc,
                                       'Indirizzo' => $delivery_indirizzo,
                                       'Localita' => $delivery_city,
                                       'Zipcode' => $data['delivery_postcode'],
                                       'Provincia' => $data['zone_code'],
                                       'Bda' => '',
                                       'DataDocumentoTrasporto' => '',
                                       'Colli' => '1',
                                       'Incoterm' => '',
                                       'PesoReale' => '1,00',
                                       'ImportoContrassegno' => $imp_cont,
                                       'NoteSpedizione' => $data['customers_telephone'],
                                       'TipoPorto' => 'F',
                                       'Assicurazione' => $ass_ins,
                                       'PesoVolume' => '',
                                       'TipoCollo' => $tipo_collo,
                                       'FrancoAnticipata' => '',
                                       'RiferimentoCliente' => '',
                                       'NoteAggiuntive' => '',
                                       'CodiceClienteDestinatario' => '',
                                       'Email' => '',
                                       'Cellulare1' => $telefono_1,
                                       'Cellulare2' => '',
                                       'ServiziAccessori' => '',
                                       'ModalitaIncasso' => $mod_inc    
                                      ),),),                                
                );

$dom = new DOMDocumentExt('1.0', 'utf-8');              
$chiamta = $dom->loadArray($Label);
$dudy = $dom->saveXML(); 
```

@Iserni 我把---> 放在这里，这不在我的代码中，我要测试在线工具，我真的没有看到错误。

我仍然收到 xml 格式的错误，还有其他线索吗？

编辑：

我刚刚注意到我的请求有：

```
<ns1:AddParcel env:encodingStyle="http://www.w3.org/2003/05/soap-encoding"> 
```

而需要的是：

```
<AddParcel xmlns="http://weblabeling.gls-italy.com/"> 
```

所以我注意到在信封中也有一些与命名空间不同的东西。会不会是问题？

WSDL 似乎不适用于 gls 服务器，他们没有在文档中提供任何有关它的信息。

编辑：

也许我很笨，但这是请求 xml 架构：

![图式](../Images/2402637c11411d7a491968582cc5de75.png)

那么现在我应该在之前放置更多的空格吗？你怎么看？如果是这样怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T19:56:23.737

您的 XML 中有三个错误，但您可以使用`xmllint`（也[在线](http://www.awthomson.com/tools/xmllint.html)）轻松找到它们（以及将来的错误）。

基本上，您的 XML 注释应该以`-->`and not结尾`--->`，并且您应该检查标签打开/关闭。

此外，请求是针对`<XMLInfoParcel>string</XMLInfoParcel>`，但这不是您要发送的内容...？

# android - 如果应用程序已经在内存中，如何使启动画面不加载

> ID：13112329
> 
> 赞同：0
> 
> 时间：2012-10-28T19:43:35.910
> 
> 标签：android, android-activity, splash-screen

我有一些闪屏的问题。当我启动应用程序时，启动屏幕活动会启动几秒钟。主要活动启动后。

如果我按下主活动上的主页按钮，然后从应用程序列表重新启动应用程序，尽管应用程序已经在后台堆栈中，但启动活动会再次启动。但我希望主要活动能从记忆中恢复。

如果我在那个 android 之后按下返回按钮，我就会返回到主要活动的前一个副本。

我必须做什么才能使启动画面只出现一次？以及如何从单击主页按钮之前看到的最后一个屏幕重新启动我的应用程序？

```
 <activity
            android:name=".ui.SplashActivity"
            android:noHistory="true"
            android:screenOrientation="portrait"
            android:label="@string/app_name">

        <intent-filter>
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.LAUNCHER"/>
        </intent-filter>
    </activity>

    <activity android:name=".ui.MainActivity"/> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T19:52:16.767

这是一个设计问题。您的启动器活动不应该是您的启动屏幕活动。相反，在您的主要活动的 onCreate 方法中打开您的启动活动。这样，如果它是全新打开的，则会调用 onCreate 并显示初始屏幕。否则，如果应用程序只是恢复，它调用 onResume，则不会调用打开启动屏幕活动。

然后您可以将清单更改为：

```
<activity
        android:name=".ui.MainActivity"
        android:noHistory="true"
        android:screenOrientation="portrait"
        android:label="@string/app_name">

    <intent-filter>
        <action android:name="android.intent.action.MAIN"/>
        <category android:name="android.intent.category.LAUNCHER"/>
    </intent-filter>
</activity>

<activity android:name=".ui.SplashActivity"/> 
```

# jquery - jQuery 在页面加载时有时无法在 IE 中隐藏（）

> ID：13112331
> 
> 赞同：0
> 
> 时间：2012-10-28T19:43:43.790
> 
> 标签：jquery, jquery-ui, internet-explorer

我想找出为什么在页面加载时某些元素会隐藏在页面加载 IE 中，有时它们不会（在 IE9 中测试）。我正在尝试重新创建 jqueryui 手风琴行为，因为它做了同样的事情/有同样的问题。

在 php 中使用 header() 或什至使用标准链接重新加载或单击重定向/重新加载 ling 时，在某些情况下 hide() 不起作用，其他时候相同的链接有效并且元素隐藏。

IE 显示在 IE9 标准下工作，因为我发现 jQ/jQui 不正式支持怪癖，以确保我什至在文档头中有 X-UA-Compatible" content="IE=edge" 甚至发送相应的标题使用 php。

在**W3C 验证器文档**中，验证 /xhtml1 过渡/

相关的 html 标记是 /simplified/

```
<h3><a id="tog1" href="/....">...</a></h3>
<div class="smg" id="tog1e"> .... </div>

<h3><a id="tog2" href="/....">...</a></h3>
<div class="smg" id="tog2e"> .... </div>

<h3><a id="tog3" href="/....">...</a></h3>
<div class="smg" id="tog3e"> .... </div> 
```

在外部 js 文件中我有这个

```
jQuery(function() { 
// selectors are "a" (links)
$("#tog1").click( function(e){ 
 $("div.smg").hide(); $("#tog1e").show();e.preventDefault();});
$("#tog2").click( function(e){ 
 $("div.smg").hide(); $("#tog2e").show();e.preventDefault();});
$("#tog3").click( function(e){ 
 $("div.smg").hide(); $("#tog3e").show();e.preventDefault();});

if(document.location.href.indexOf('...link of tog1...') > -1 ) 
{  $("div.smg").hide(); $("#tog1e").show();}
else if ( document.location.href.indexOf('...link of tog2...') > -1 ) 
{ $("div.smg").hide(); $("#tog2e").show();}
else { $("div.smg").hide(); $("#tog3e").show();}

//.... other unrelated code follows after 
```

我仍然无法弄清楚为什么有时在 IE 中可以工作而有时不能。其他浏览器（当前的 Chrome 和 Firefox）总是可以正常工作。

## 添加

我刚刚提到它可能（或可能不）与页面上还使用其他框架（mootools）有关。然而，正如所说的 Firefox 和 Chrome 不会抱怨并且总是可以工作，而 IE 有时不会，但只是有时。

在 IE 中，我发现有时控制台会告诉我某些对象没有某些属性或功能（这可能与使用这两个框架有关）并且我已经开始使用 jQ 的 noconflict 以及将 '$' 替换为 'jQuery'在脚本中，但到目前为止它看起来没有帮助。

我该如何解决这个问题？我确实需要 MooTools 和 jQuery。

# facebook - Facebook API - 访问用户事件

> ID：13112333
> 
> 赞同：0
> 
> 时间：2012-10-28T19:44:21.363
> 
> 标签：facebook, api, events

我在 Facebook 上创建了一个测试应用程序。

我选择请求访问 API 调用的用户事件。

然后我通过 api 正确连接了我的用户，我可以通过 oauth 密钥获取该特定用户的用户详细信息，但我无法访问用户事件。

从 FB 提供的工具来看，我似乎能够访问用户事件，但调用中使用的 oauth 密钥与 FB 为该用户返回给我的不同。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T00:39:37.547

意识到仅在应用设置面板中指定范围是不够的。

对于用户的每个新 oauth 调用，需要指定要为其授权密钥的范围列表。

现在一切正常。

# java - 如果 int 为 0 表示北，1 表示东等...我如何反转方向？

> ID：13112334
> 
> 赞同：4
> 
> 时间：2012-10-28T19:45:10.037
> 
> 标签：java

我正在创建一个程序，我需要跟踪对象所面向的方向。（北东南西）

我不确定这是否是最好的方法，因此请在必要时纠正我。

在某些情况下，我需要向左或向右转，甚至是反向。实现这一目标的最简单方法是什么？

这是Java，我不能使用任何导入的东西。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-28T19:48:44.480

假设数字是这样的：

0 - 北 | 1 - 东 | 2 - 南 | 3 - 西

然后通过算法运行它

```
int reverse = (direction + 2) % 4; 
```

应该产生相反的方向。

让我们测试一下：

北：0 + 2 = 2。2 % 4 = 2：南

南：2 + 2 = 4。4 % 4 = 0：北

东：1 + 2 = 3。3 % 4 = 3：西

西：3 + 2 = 5。5 % 4 = 1：东

成功！

左转和右转就像加法或减法一样简单，然后取模数 4 以确保它循环回来。

```
int left = (direction +3) % 4;
int right = (direction + 1) % 4; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-28T19:50:16.973

使用值为 NORTH、EAST、SOUTH、WEST 的枚举类型：

如果

```
NORTH=0
EAST=1
SOUTH=2
WEST=3 
```

右转是

```
(dir + 1) % 4 
```

左转是

```
(dir + 3) % 4 
```

反转方向是

```
(dir + 2) % 4 
```

注意：通常，当您希望能够对整数进行加法并让它们环绕 (2, 3, 0, 1, 2, 3, 0, ...) 时，您需要使用模运算符 (%)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T19:50:47.503

```
int left   = (direction + 3) % 4;
int behind = (direction + 2) % 4;
int right  = (direction + 1) % 4; 
```

# java - Java-使用invokeAll按顺序获取未来结果，但仅适用于某些线程

> ID：13112336
> 
> 赞同：4
> 
> 时间：2012-10-28T19:45:15.570
> 
> 标签：java, threadpool, future, executors

我......真的不知道如何更好地表达标题。但基本上，我所拥有的是一个线程池，所有这些线程都在忙着工作。我希望他们按照分配的顺序报告他们的结果，但同时，我想分批工作。为了说明，例子是

```
ExecutorService exec = Executors.newFixedThreadPool(8);

class MyCallable implements Callable<byte[]> {
    private final int threadnumber;

    MyCallable(int threadnumber){
        this.threadnumber = threadnumber;
    }

    public byte[] call() {
        //does something
    }
}
List<Callable<byte[]>> callables = new ArrayList<Callable<byte[]>>();

for(int i=1; i<=20; i++) {
    callables.add(new MyCallable(i));
}
try {
    List<Future<byte[]>> results = exec.invokeAll(callables);
    for(Future<byte[]> result: results) {
            System.out.write(result.get(), 0, result.get().length);
    } 
```

基本上，池线程有 8 个线程，我最终有 20 个任务（这些只是示例）。如果我理解正确的话，它现在的工作方式是等到所有 20 个任务都完成后再按顺序输出它们（从 1 到 20）。这个程序应该做的是输出一个连续的字节流（由线程处理，由于我需要保持顺序不变，所以我使用了未来的接口）。虽然我不介意等到所有 20 个任务都完成后，但无论如何，线程是否可以按顺序简单地输出。

如果没有办法，或者我只是完全误解了 invokeAll 的工作原理，那么也欢迎澄清。提前致谢！执行者有点令人困惑，因为我才刚刚了解它们。

随机附录，我什至可以从可调用对象中返回字节数组吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-28T20:03:02.730

[`invokeAll()`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html#invokeAll%28java.util.Collection%29)等到所有结果都计算完才返回。

使用循环并[`submit()`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html#submit%28java.util.concurrent.Callable%29)一一代替，此方法立即返回带有未决结果的 Future ：

```
...
for(int i=1; i<=20; i++) {
    results.add(exec.submit(new MyCallable(i))); 
}
try {
    for(Future<Integer> result: results) {
            System.out.write(result.get(), 0, result.get().length);
    }
}
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-15T18:39:07.960

使用 invokeAll 也可以实现。

```
 List<Future<byte[]>> results = exec.invokeAll(callables); 
```

它将返回未来的对象列表。

ThreadPoll 将以随机顺序执行任务。任务执行顺序无法控制。

**未来对象**

1.  它是在 ThreadPool 中提交的任务的引用。

2.  它有一个方法**get()**。它是一种阻塞调用方法。如果您调用 get() 方法，调用将等到任务完成。

**如何保证Tasks提交顺序**

结果顺序与可调用顺序相同。甚至线程池也会以不同的顺序执行，我们可以以相同的顺序检索。

对于前。

三项任务 1,2,3

1 & 3 --> 完成。

2 ------> 执行时间长。

调用 invokeAll 方法后，它将以相同的顺序返回 Future 列表。

任务 1：Future#get 方法返回结果，因为它已经完成

任务 2：Future#get 方法等待任务完成。

即使第三个任务完成，迭代也会等待第二个任务完成。它不会从第三个线程得到结果。

# javascript - 从 JavaScript 中的数组创建饼图 (Google)

> ID：13112338
> 
> 赞同：1
> 
> 时间：2012-10-28T19:45:27.213
> 
> 标签：javascript, html, google-visualization

我想使用数据类型数组中的一组数据创建一个饼图，该数组返回一个字符串和一个双精度值，但是当我将这些值放在 drwchart 函数中时它什么也没给我，这是我最后一次尝试

```
function drawChart1() {

    // Create the data table.

    var data = new google.visualization.DataTable();
    data.addColumn('string', 'Topping');
    data.addColumn('number', 'Slices');

    data.addRows(largo);

    // Add empty rows

    for  (var i= 0;i = largo;i++){
        data.setCell(i, 0, est[i].getNombre() );
        data.setCell(i, 1, est[i].getmonto());
    }

    // Set chart options
    var options = {'title':'Ganancias por Juego',
                   'width':700,
                   'height':400};

    // Instantiate and draw our chart, passing in some options.
    var chart = new google.visualization.PieChart(document.getElementById('chart_div1'));
    chart.draw(data, options);
  } 
```

GetNombre() 返回一个 String 并且 getmonto() 返回一个 double 我不知道我做错了什么。在我使用这些函数之前，饼图可以正常工作，但 get 函数可以正常工作。

# css - 行内元素的水平对齐改进

> ID：13112339
> 
> 赞同：1
> 
> 时间：2012-10-28T19:45:46.580
> 
> 标签：css, html

在我的页面上，标题区域中有两个元素。我希望第一个元素位于标题区域的中间，第二个元素一直被推到标题区域的右侧。我使用以下代码达到了预期的效果：

```
<div id="header-area" style="text-align:center;width:100%;">
  <div id="partition1" style="display:inline-block;width:33%;"></div>
  <div id="partition2" style="display:inline-block;width:33%;">
    <div id="element1" style="display:inline;width:400px;height:100px;">
      <h3 style="display:inline;width:400px;">Main title Goes Here</h3><br/><br/>
      <p style="display:inline;width:400px;">Subtitle goes here</p>
    </div>
  </div>
  <div id="partition3" style="display:inline-block;width:33%;text-align:right;">
    <div id="Element2" style="display:inline;width:150px;vertical-align:middle;">
      <button onclick="history.back();" style="height:45px;width:100px;">
      Back</button>
    </div>
  </div>
</div> 
```

您会注意到我将它们划分为三个空间，并在它们各自的分区内`header-area`对齐`element1`& 。`element2`如何在不分区的情况下实现相同的布局`header-area`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T20:16:08.817

有几种方法可以做到这一点。这里有两个：

**选项#1：浮动**

的HTML：

```
<div id="header">
    <div class="right">Element on right end</div>
    <div class="center">Center-Aligned Element</div>
</div> 
```

CSS：

```
#header {
    text-align: center;
}

#header div.center {
    margin: 0 auto;
    text-align: center;
    width: 30%;
}

#header div.right {
    float: right;
    text-align: right;
} 
```

**选项#2：绝对位置**

的HTML：

```
<div id="header">
    <div>Center-Aligned Element</div>
    <div class="right">Element on right end</div>
</div> 
```

CSS：

```
#header {
    text-align: center;
}

#header div {
    text-align: center;
    width: 30%;
    margin: 0 auto;
}

#header div.right {
    position: absolute;
    top: 0;
    right: 0;
    text-align: right;
} 
```

**使用您的元素的示例：**

的HTML：

```
<div id="header">
    <h3>Main Title Goes Here</h3>
    <p>Subtitle Goes Here</h3>
    <button>Element on right end</button>
</div> 
```

CSS：

```
#header {
    text-align: center;
}

#header h3,
#header p {
    margin: 0 auto;
    text-align: center;
    width: 30%;
}

#header button {
    position: absolute;
    top: 0;
    right: 0;
} 
```

# ios - obj-c 将长字符串变成多维数组

> ID：13112341
> 
> 赞同：0
> 
> 时间：2012-10-28T19:46:10.910
> 
> 标签：ios

我有一个很长的 NSString，比如“t00010000t00020000t00030000”等等。我需要将其拆分为每个“t0001000”。

我在用着...

NSArray *tileData = [[GameP objectForKey:@"map"] componentsSeparatedByString:@"t"];

它把它分开了，但是我需要的“t”不见了（尽管我想我可以把它附加回来）。我猜另一种方法是通过计算 8 个字符来拆分它，尽管不知道该怎么做。

但理想情况下，我需要将它拆分为 [][] 类型的数组，这样我就可以使用类似...

NSString tile = [[tileData objectAtIndex:i] objectAtIndex:j]];

我是 obj-c 的新手，所以感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T19:55:24.077

如果它们*不是严格*分隔部分的`t`字符，即部分*总是*8 个字符长，那么很容易做到：

```
NSString *string = @"t00010000t00020000t00030000";
NSMutableArray *arr = [NSMutableArray array];
int i;
for (i = 0; i < string.length; i += 8) {
    [arr addObject:[string substringWithRange:NSMakeRange(i, 8)]];
} 
```

这里`arr`将包含 8 个字符的子字符串。

编辑：所以让我也为多维提供另一种解决方案。当然@KevinH 的字符解决方案非常优雅，但是如果你需要一个 NSString 并且你不介意实现另一种方法，那么添加这样的东西相当容易：

```
@implementation NSString (EightCarAdditions)

- (NSString *)charAsStringInSection:(NSInteger)section index:(NSInteger)index
{
    return [self substringWithRange:NSMakeRange(section * 8 + index, 1)];
}

- (unichar)charInSection:(NSInteger)section index:(NSInteger)index
{
    return [self characterAtIndex:section * 8 + index];
}

@end 
```

（请注意`characterAtIndex`返回 a`unichar`而**不是**a `char`- 为超过 1 字节宽的 UTF-(8, 16, 32) 内容做好准备。）然后您可以在 NSString 本身上调用这些方法，因此非常方便：

```
unichar ch = [string charInSection:1 index:3]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T20:05:21.937

H2CO3's answer is spot-on for the first part. For the second (the multi-dimensional array), if I understand what you want, you don't need another array for the individual characters. For each `NSString` in the array, you can access each character by calling `characterAtIndex`. So, extending the example above:

```
for (NSString *item in arr) {
    NSLog(@"The fifth character of this string is: %C", [item characterAtIndex:4]);
} 
```

And if you're looking to chain these together, as in your example, you can do that too:

```
NSLog(@"The fifth character of the fourth string is: %C",
    [[arr objectAtIndex:3] characterAtIndex:4]); 
```

# android - Phonegap +带有远程图像的Photoswipe

> ID：13112349
> 
> 赞同：3
> 
> 时间：2012-10-28T19:47:16.400
> 
> 标签：android, json, cordova, photoswipe

我一直在用 Phonegap 和 Photoswipe 苦苦挣扎。这是我所拥有的：

1）目前我正在通过 php JSON 调用请求远程图像（工作）

2）JSON图像返回并本地存储到Android设备（工作）

3）所有图像都显示在 Photswipe 缩略图库页面上（工作）

问题在这里 4) 当我点击缩略图时，我没有得到 Photoswipe 画廊格式，它只是将图像加载到空白页面。

我的猜测是在我将所有图像完全传递到 <#gallery 之前加载 photoswipe 脚本

我的问题是如何重新初始化 Photoswipe 以读取所有图像或如何将 Photoswipe 功能附加到附加到

我正在尝试发布我现在正在使用的代码，但这里的格式有问题。

```
//Global instance of DirectoryEntry for our data
var DATADIR;
var knownfiles = [];    

//Loaded my file system, now let's get a directory entry for where I'll store my   crap    
function onFSSuccess(fileSystem) {
fileSystem.root.getDirectory("Android/data/com.moto.photoloader",create:true,exclusive:false},gotDir,onError);
}

//The directory entry callback
function gotDir(d){
console.log("got dir");
DATADIR = d;
var reader = DATADIR.createReader();
reader.readEntries(function(d){
    gotFiles(d);
    appReady();
},onError);
}

//Result of reading my directory
function gotFiles(entries) {
console.log("The dir has "+entries.length+" entries.");
for (var i=0; i<entries.length; i++) {
console.log(entries[i].name+' dir? '+entries[i].isDirectory);
    knownfiles.push(entries[i].name);
    renderPicture(entries[i].fullPath);
}
}

function renderPicture(path){
$("#Gallery").append("<li><a href='"http://myurltofullimages"'><img src='"+path+"' alt=\"Image 018\"/></a></li>");
console.log("<li><a href='"/myurltofullimages"'><img src='"+path+"' alt=\"Image 018\"/></a></li>");

}

function onError(e){
console.log("ERROR");
console.log(JSON.stringify(e));
}

function onDeviceReady() {
//what do we have in cache already?
$("#status").html("Checking your local cache....");    
window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, onFSSuccess, null);    
}

function appReady(){
$("#status").html("Ready to check remote files...");
$.get("http://myurltojsonphp/photo_upload/json.php", {}, function(res) {
    if (res.length > 0) {
        $("#status").html("Going to sync some images...");
        for (var i = 0; i < res.length; i++) {
            if (knownfiles.indexOf(res[i]) == -1) {
                console.log("need to download " + res[i]);
                var ft = new FileTransfer();
                var dlPath = DATADIR.fullPath + "/" + res[i];
console.log("downloading crap to " + dlPath);
ft.download("http://myurl/photo_upload/am/woman/thumb/" + escape(res[i]), dlPath, function(){
renderPicture(e.fullPath);
console.log("Successful download of "+e.fullPath);
}, onError);         

            }
        }
    }
    $("#status").html("");
}, "json");

}

{
document.addEventListener("deviceready", onDeviceReady, true);

}
</script>

<script type="text/javascript">

    (function(window, PhotoSwipe){

        document.addEventListener('DOMContentLoaded', function(){

            var
                options = {},
                instance = PhotoSwipe.attach( window.document.querySelectorAll('#Gallery a'), options );

        }, false);

    }(window, window.Code.PhotoSwipe));

</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T14:35:42.330

通过 GET 调用接收到照片后，您必须初始化 photoswipe 画廊：

```
 $("ul.gallery a").photoSwipe(
            {
                allowUserZoom: false,
                jQueryMobile: true,
                autoStartSlideshow: false,
                backButtonHideEnabled: false,
                captionAndToolbarAutoHideDelay: 0,
                preventSlideshow: true
            }); 
```

# php - 向数据库 Symfony 2 添加和编辑表单字段

> ID：13112352
> 
> 赞同：0
> 
> 时间：2012-10-28T19:47:50.050
> 
> 标签：php, jquery, symfony, twig, symfony-2.1

我需要帮助来解决我的 Symfony2 问题。我很新。我有一个带有表单的树枝文件，我在其中添加了测试名称及其类别的名称，在每个类别字段上我设置了名称和类别的颜色。当我添加到我的表单时，它只在数据库中添加测试名称，而不是添加所有参数。我不明白我在添加类别时出错的地方，它是数据库的字段颜色，以及如何创建一个编辑表单，为当前测试编辑我的测试类别......

我的默认控制器：

```
 public function newAction( $options = 0 )
   {
    $em = $this->getDoctrine()->getManager();
    $tests =  $em->getRepository('LadelaOdeskTesterBundle:Test')->findAll();

    return compact( 'tests', 'options' );
}

/**
 * @Route("/add/test", requirements={"name" = "\s+"}, name="test.create")
 * @Method("Post")
 * @return array
 */
public function createAction()
{
    $success = 0;
    $name = $this->getRequest()->get('name');
    $category = $this->getRequest()->get('category-new');

    if( !empty($name) )
    {
        $test = new Test();
        $test->setName($this->getRequest()->get('name'));

        $em = $this->getDoctrine()->getManager();
        $em->persist($test);
        $em->flush();

        $success = 'Test '.$test->getName().' was created';
    }
    else
    {
        $success = 'Test name can not be empty';
    }

    if( !empty($category) )
    {
        $categoryName = new Category();
        $categoryName->setName($this->getRequest()->get('name'));
        $categoryName->setColor($this->getRequest()->get('color'));

        $em = $this->getDoctrine()->getManager();
        $em->persist($categoryName);
        $em->flush();

        $success = 'Category '.$categoryName->getName().' was created';
    }
    else
    {
        $success = 'Category name can not be empty';
    }
    return $this->redirect($this->generateUrl('test.new'));
}

/**
 * @Route("/edit/test", requirements={"category" = "\s+"}, name="edit.test")
 * @Method("GET")
 * @return array
 */   
public function editAction()
{
     $success = 0;
     $category = $this->getRequest()->get('category-new');

    if( !empty($category) )
    {
        $test = new Test();
        $test->setName($this->getRequest()->get('category'));

        $em = $this->getDoctrine()->getManager();
        $em->persist($test);
        $em->flush();

        $success = 'Category '.$test->getName().' was edited';
    }
    else
    {
        $success = 'Category name can not be empty';
    }

    return $this->redirect($this->generateUrl('category.new'));
    }
 } 
```

我的类别实体：

```
class Category
 {
/**
 * @var integer $id
 *
 * @ORM\Column(name="id", type="integer")
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="AUTO")
 */
private $id;

/**
 * @var string $name
 *
 * @ORM\Column(name="name", type="string", length=255)
 */
private $name;

/**
 * @var string $color
 *
 * @ORM\Column(name="color", type="string", length=255)
 */
private $color;

public function __construct()
{
    $this->color = '255,255,0'; // default color for category
}

/**
 * Get id
 *
 * @return integer
 */
public function getId()
{
    return $this->id;
}

/**
 * Set name
 *
 * @param string $name
 * @return Category
 */
public function setName($name)
{
    $this->name = $name;

    return $this;
}

/**
 * Get name
 *
 * @return string
 */
public function getName()
{
    return $this->name;
}

/**
 * Set color
 *
 * @param string $color
 * @return Category
 */
public function setColor($color)
{
    $this->color = $color;

    return $this;
}

/**
 * Get color
 *
 * @return string
 */
public function getColor()
{
    return $this->color;
}

} 
```

我的测试实体：

```
 class Test
  {
/**
 * @var integer $id
 *
 * @ORM\Column(name="id", type="integer")
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="AUTO")
 */
private $id;

/**
 * @var string $name
 *
 * @ORM\Column(name="name", type="string", length=255)
 */
private $name;

/**
 * @var \DateTime $created_at
 *
 * @Gedmo\Timestampable(on="create")
 * @ORM\Column(name="created_at", type="datetime")
 */
private $created_at;

/**
 * @Gedmo\Slug(fields={"name"})
 * @ORM\Column(length=128,unique=true)
 */
private $slug;

/**
 * @ORM\ManyToMany(targetEntity="Question")
 * @ORM\JoinTable(name="test_questions",
 *      joinColumns={@ORM\JoinColumn(name="test_id", referencedColumnName="id")},
 *      inverseJoinColumns={@ORM\JoinColumn(name="question_id",    referencedColumnName="id")}
 *      )
 * @var Collection $questions
 **/
protected $questions;

/**
 * @ORM\ManyToMany(targetEntity="Result")
 * @ORM\JoinTable(name="test_results",
 *      joinColumns={@ORM\JoinColumn(name="test_id", referencedColumnName="id")},
 *      inverseJoinColumns={@ORM\JoinColumn(name="result_id", referencedColumnName="id")}
 *      )
 * @var Collection $results
 **/
protected $results;

 /**
   * @ORM\ManyToMany(targetEntity="Category")
   * @ORM\JoinTable(name="test_categories",
    *      joinColumns={@ORM\JoinColumn(name="test_id", referencedColumnName="id")},
    *      inverseJoinColumns={@ORM\JoinColumn(name="category_id", 
    *      )
    * @var Collection $categories
    **/
 protected $categories;

/**
 * @var \DateTime $updated_at
 *
 * @Gedmo\Timestampable(on="update")
 * @ORM\Column(name="updated_at", type="datetime")
 */
private $updated_at;

public function __construct()
{
    $this->questions = new \Doctrine\Common\Collections\ArrayCollection();
    $this->categories = new \Doctrine\Common\Collections\ArrayCollection();
}

/**
 * Get id
 *
 * @return integer
 */
public function getId()
{
    return $this->id;
}

/**
 * Set name
 *
 * @param string $name
 * @return Test
 */
public function setName($name)
{
    $this->name = $name;

    return $this;
}

public function getSlug()
{
    return $this->slug;
}

/**
 * Get name
 *
 * @return string
 */
public function getName()
{
    return $this->name;
}

/**
 * Set created_at
 *
 * @param \DateTime $createdAt
 * @return Test
 */
public function setCreatedAt($createdAt)
{
    $this->created_at = $createdAt;

    return $this;
}

/**
 * Get created_at
 *
 * @return \DateTime
 */
public function getCreatedAt()
{
    return $this->created_at;
}

/**
 * Set updated_at
 *
 * @param \DateTime $updatedAt
 * @return Test
 */
public function setUpdatedAt($updatedAt)
{
    $this->updated_at = $updatedAt;

    return $this;
}

/**
 * Get updated_at
 *
 * @return \DateTime
 */
public function getUpdatedAt()
{
    return $this->updated_at;
}

/**
 *
 */
public  function getQuestions()
{
    return $this->questions;
}

public function addQuestion( Question $question )
{
    $this->questions[] = $question;
}

/**
 * Set slug
 *
 * @param string $slug
 * @return Test
 */
public function setSlug($slug)
{
    $this->slug = $slug;

    return $this;
}

/**
 * Remove questions
 *
 * @param Question $questions
 */
public function removeQuestion( Question $questions)
{
    $this->questions->removeElement($questions);
}

/**
 * Add results
 *
 * @param Result $results
 * @return Test
 */
public function addResult(Result $results)
{
    $this->results[] = $results;

    return $this;
}

/**
 * Remove results
 *
 * @param Result $results
 */
public function removeResult(Result $results)
{
    $this->results->removeElement($results);
}

/**
 * Get results
 *
 * @return Collection
 */
public function getResults()
{
    return $this->results;
}

public function countResults()
{
    return $this->results->count();
}

public function countQuestions()
{
    return $this->questions->count();
}

/**
 * Add categories
 *
 * @param Ladela\OdeskTesterBundle\Entity\Category $categories
 * @return Test
 */
public function addCategorie(\Ladela\OdeskTesterBundle\Entity\Category $categories)
{
    $this->categories[] = $categories;

    return $this;
}

/**
 * Remove categories
 *
 * @param Ladela\OdeskTesterBundle\Entity\Category $categories
 */
public function removeCategorie(\Ladela\OdeskTesterBundle\Entity\Category $categories)
{
    $this->categories->removeElement($categories);
}

/**
 * Get categories
 *
 * @return Doctrine\Common\Collections\Collection 
 */
public function getCategories()
{
    return $this->categories;
}
 } 
```

我的树枝文件：

```
 {% extends '::base.html.twig' %}

  {% block stylesheets %}
 {{ parent() }}
  <link rel="stylesheet" href="{{ asset('bundles/ladelaodesktester/css/new.css') }}"   
<link rel="stylesheet" href="{{ asset('bundles/ladelaodesktester/css/colorpicker.css') 
<link rel="stylesheet" href="{{ asset('bundles/ladelaodesktester/css/layout.css') }}" 
 {% endblock %}

  {% block body %}
 <ul id="breadcrumb">
<li><a href="{{path('homepage')}}" title="Home"><img src="{{  
asset('bundles/ladelaodesktester/images/home.png') }}" alt="Home" class="home" /></a>
</li>
<li><a href="{{path('test.new')}}" title="New"> New test </a></li>
<li> Please add data to new test </li>
 </ul>
 {#<div class="wrap">#}
 <div class="new-test">
  <h2>New test </h2>
   <form action="{{ path('test.create') }}" method="post">
        Test name: <input type="text" name="name-new"/><br>
        Category 1  <input class="color {valueElement:'myValue'}" type="text"
        name="category-new"><br>
        Category 2  <input class="color {valueElement:'myValue1'}" type="text"
        name="category-new"><br>
        Category 3  <input class="color {valueElement:'myValue2'}" type="text"
        name="category-new"><br>
        Category 4  <input class="color {valueElement:'myValue3'}" type="text" 
        name="category-new"><br>
        Category 5  <input class="color {valueElement:'myValue4'}" type="text"
        name="category-new"><br>
        Category 6  <input class="color {valueElement:'myValue5'}" type="text"
        name="category-new"><br>
        Category 7  <input class="color {valueElement:'myValue6'}" type="text" 
        name="category-new"><br>
        Category 8  <input class="color {valueElement:'myValue7'}" type="text"
         name="category-new"><br>

        Category 9  <input class="color {valueElement:'myValue8'}" type="text"
        name="category-new"><br>
        Category 10  <input class="color {valueElement:'myValue9'}" type="text" 
        name="category-new"><br>
        <input type="submit" value="Add">
     </form>
   </div>
 <table class="test-list">
<caption></caption>
<tbody>
    <tr>
        <th>Test name</th>
        <th># questions</th>
        <th># passed</th>
        <th># action</th>
    </tr>
    {% for test in tests %}
    <tr>
        <td>
           {{ test.name }}
        </td>
        <td>
           {{ test.countquestions }}
        </td>
        <td>
            {{ test.countresults }}
        </td>
        <td>
            <a href="{{ path('test.show', { 'slug': test.slug }) }}">analyze</a>|
            <a href="">new result</a> |
            <a href="{{ path('edit.test') }}">edit </a>
        </td>
      </tr>
      {% endfor %}
  </tbody>
 </table>
  {#</div>#}
  {% endblock %}
 {% block javascripts %}
{{ parent() }}
<script src="{{ asset('bundles/ladelaodesktester/js/new.js') }}" 
type="text/javascript"></script>
<script src="{{ asset('bundles/ladelaodesktester/js/jscolor.js') }}"
 type="text/javascript"></script>
 {% endblock %} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T20:19:14.150

您的类别输入在标记中没有`value`属性，因此除非用户填充它们，否则它们将无法正确提交。由于它们也都具有相同的名称，因此应添加`[]`到名称中，以便它们作为数组提交

# gridview - 如何禁用弹出编辑器中某些列的编辑？

> ID：13112353
> 
> 赞同：10
> 
> 时间：2012-10-28T19:48:05.643
> 
> 标签：gridview, kendo-ui

ASP.Net MVC 3、Kendo UI Web、Kendo 网格控件。

我将几个字段配置为只读：

```
.Model(model =>
      {
          model.Field(it => it.foobar).Editable(false);
          ... 
```

它在内联模式下按预期工作。但是当我将模式切换到弹出窗口时，编辑器会显示整个结构，因此我可以编辑我想要的任何字段（那些也标记为不可编辑的字段）。

那么如何标记它们，以便弹出编辑器只显示那些标记为编辑的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-29T00:52:02.583

Popup 编辑器使用 MVC 的编辑器模板，完全独立于 Kendo 的。如果您想将该字段标记为只读，则需要在代码中的模型中附加元数据属性。前任：

```
public class MyClassUsedInGrid
{
    [System.ComponentModel.DataAnnotations.Editable(false)]
    public string foobar {get;set;}
} 
```

**更新：**

抱歉，原来答案不完整。您需要创建一个自定义模板来处理这个问题，因为内置模板不支持它（我在我的项目中有这个并且忘记了它）。为此，请在 /Views/Shared/EditorTemplates/string.cshtml 下创建一个视图（我将在 Razor 中展示它，不过移植到 aspx 语法很容易）。

代码如下所示：

```
@model string
@if(ViewData.ModelMetadata.IsReadOnly){
    @Html.DisplayForModel()
}else{
    @Html.TextBox("", ViewData.TemplateInfo.FormattedModelValue, new { @class = "text-box single-line" })
} 
```

这将正确处理可编辑元数据属性。当然这只是针对字符串，你应该对其他对象做类似的事情。如果您正在寻找其他内置模板的外观，请查看此站点：[http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-3-default-templates。 html](http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-3-default-templates.html)

**性能旁注：**如果您只在应用程序的几个地方的一个地方执行此操作，最好将其放在 /Views/YourView/EditorTemplates/ 下。原因是内置模板被编译到框架中，并且通常工作得更快。或者将其保留在 Shared 文件夹中，但将其命名为 ExtendedString 之类的名称，然后在您查看标签属性中，您可以使用显式 UI 提示设置可编辑，如下所示：

```
[System.ComponentModel.DataAnnotations.Editable(false)]
[System.ComponentModel.DataAnnotations.UIHint("ExtendedString")]
public string foobar {get;set;} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-12-27T18:28:19.983

根据 KendoUI 文档（[http://docs.telerik.com/kendo-ui/aspnet-mvc/validation](http://docs.telerik.com/kendo-ui/aspnet-mvc/validation)），您应该使用`[HiddenInput(DisplayValue = false)]`

例子：

```
[HiddenInput(DisplayValue = false)]
public int Id { get; set; } 
```

测试和工作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-27T21:01:36.263

A similar, simpler but less general solution is to use a custom Editor Template:

```
column.Bound(a => a.foobar).EditorTemplateName("Empty"); 
```

Then put "Empty.cshtml" in your Views/Shared/EditorTemplates with nothing in it.

# c - 客户端服务器循环导致管道损坏 - C

> ID：13112356
> 
> 赞同：0
> 
> 时间：2012-10-28T19:48:20.887
> 
> 标签：c, client, pipe, infinite-loop

我在 C 中有一个简单的客户端和服务器程序，通过 TCP 进行通信。客户端向服务器发送消息，服务器将其写入文件。

我需要客户端无限循环，直到它读取 EOF 字符，并让服务器继续为请求提供服务。但是，目前我遇到了循环问题。它工作正常，没有任何循环，但是当我在客户端中放置一个 while(1) 时，服务器服务第一个请求很好，但第二个没有做任何事情，第三个导致管道损坏错误。我认为这是因为服务器过早地关闭了套接字，但我一直坚持如何修复它。

这是我的客户程序：

```
#include <stdio.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <netdb.h> 
#include <ctype.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>

#define BUFFERLENGTH 256

/* displays error messages from system calls */
void error(char *msg)
{
    perror(msg);
    exit(0);
}

int main(int argc, char *argv[])
{
    int sockfd, portno, n;
    struct sockaddr_in serv_addr;
    struct hostent *server;

    char buffer[BUFFERLENGTH];
    if (argc < 3) {
       fprintf (stderr, "usage %s hostname port\n", argv[0]);
       exit(1);
    }

    /* create socket */
    portno = atoi (argv[2]);
    sockfd = socket (AF_INET, SOCK_STREAM, 0);
    if (sockfd < 0) 
        error ("ERROR opening socket");

    /* enter connection data */
    server = gethostbyname (argv[1]);
    if (server == NULL) {
        fprintf (stderr, "ERROR, no such host\n"); // error message for when the provided hostname doesn't exist. 
        exit (1);
    }
    bzero ((char *) &serv_addr, sizeof(serv_addr));
    serv_addr.sin_family = AF_INET;
    bcopy ((char *)server->h_addr, 
         (char *)&serv_addr.sin_addr.s_addr,
         server->h_length);
    serv_addr.sin_port = htons (portno);

    /* connect to the server */
    if (connect (sockfd, (struct sockaddr *) &serv_addr, sizeof (serv_addr)) < 0) 
        error ("ERROR connecting");
while(1){
    /* prepare message */
    printf ("Please enter the message: ");
    bzero (buffer, BUFFERLENGTH);
    fgets (buffer, BUFFERLENGTH, stdin);

    /* send message */
    n = write (sockfd, buffer, strlen(buffer));
    if (n < 0) 
         error ("ERROR writing to socket");
    bzero (buffer, BUFFERLENGTH);

    /* wait for reply */
    n = read (sockfd, buffer, BUFFERLENGTH -1);
    if (n < 0) 
         error ("ERROR reading from socket");
    printf ("%s\n",buffer);

}
return 0;
} 
```

和服务器代码：

```
/* A threaded server which uses TCP to communicate with clients.
       Passes the port number and a file name in as arguments.
       Receives log entries from the clients and writes them to the file. */
    #include <stdio.h>
    #include <sys/types.h> 
    #include <sys/socket.h>
    #include <netinet/in.h>
    #include <ctype.h>
    #include <stdlib.h>
    #include <strings.h>
    #include <string.h>
    #include <unistd.h>
    #include <pthread.h>

    #define BUFFERLENGTH 256

    /* displays error messages from system calls */
    void error(char *msg)
    {
        perror(msg);
        exit(1);
    }

    FILE *file;
    int returnValue; 
    pthread_mutex_t mut; /* the lock */

    /* the procedure called for each request */
    void *processRequest (void *args) {
      int *newsockfd = (int *) args;
      char buffer[BUFFERLENGTH];
      int n, formed = 0;

      n = read (*newsockfd, buffer, BUFFERLENGTH -1);
      if (n < 0) 
        error ("ERROR reading from socket");

      printf ("Here is the message: %s\n",buffer);
      pthread_mutex_lock (&mut); /* lock exclusive access to variable isExecuted */

        //const char* string = "hello world";
        char buffer2[256];
        char* walker;
        int colon = 0;

        strcpy(buffer2,buffer);

    walker=buffer2;

    while(colon == 0){

        if(*walker == ':'){ // if it encounters a colon will successfully exit the loop.
            colon = 1;
        }
        if(*walker == '\0'){ // if it encounters the end of the string, will break the loop.
            break;
        }
        if(isalnum(*walker)){ // if it's not an alphanumeric character then it will break the loop, otherwise it will continue.
            walker++;
    } else {
    break;}

    }

    if(colon == 1){ // if the loop found a colon, then it will continue to search the rest of the string.
        while(*walker >= 32 && *walker<= 126){
                ++walker;
            if(*walker == '\n'){
                printf("Entry well formed.\n");
                fprintf(file,"%s",buffer); /*writes*/
                    fclose(file); /*done!*/ 
                formed = 1;
            }
            } 
    } else{
        perror("Entry not well formed.\n");
    }

      pthread_mutex_unlock (&mut); /* release the lock */

    if(formed==1){
      n = sprintf (buffer, "Message received and written to file.\n");
    }else{
        n = sprintf (buffer, "Message received but was not well formed and was not written to file.\n");
    }
      /* send the reply back */
      n = write (*newsockfd, buffer, BUFFERLENGTH);
      if (n < 0) 
        error ("ERROR writing to socket");

      close (*newsockfd); /* important to avoid memory leak */  
      free (newsockfd);

      returnValue = 0;  /* cannot guarantee that it stays constant */
      pthread_exit (&returnValue);
    }

    int main(int argc, char *argv[])
    {
         socklen_t clilen;
         int sockfd, portno;
         char buffer[BUFFERLENGTH];
         struct sockaddr_in serv_addr, cli_addr;
         pthread_t *server_thread;
         int result;

         if (argc < 3) {
             fprintf (stderr,"ERROR, arguments: port filename.\n"); /* Error message for if there isn't enough arguments. */
             exit(1);
         }

         /* create socket */
         sockfd = socket (AF_INET, SOCK_STREAM, 0);
         if (sockfd < 0) 
            error("ERROR opening socket");
         bzero ((char *) &serv_addr, sizeof(serv_addr));
         portno = atoi(argv[1]);
         serv_addr.sin_family = AF_INET;
         serv_addr.sin_addr.s_addr = INADDR_ANY;
         serv_addr.sin_port = htons (portno);

         /* bind it */
         if (bind(sockfd, (struct sockaddr *) &serv_addr,
                  sizeof(serv_addr)) < 0) 
                  error("ERROR on binding");

         /* ready to accept connections */
         listen (sockfd,5);
         clilen = sizeof (cli_addr);

         /* now wait in an endless loop for connections and process them */
         while (1) {

          file = fopen(argv[2], "a");
          if (file == NULL) {
             printf("I couldn't open results.txt for writing.\n");
             exit(0);
          }
           int *newsockfd; /* allocate memory for each instance to avoid race condition */
           pthread_attr_t pthread_attr; /* attributes for newly created thread */

           newsockfd  = malloc (sizeof (int));
           if (!newsockfd) {
         fprintf (stderr, "Memory allocation failed!\n");
         exit (1);
           }
           /* waiting for connections */
           *newsockfd = accept(sockfd, 
                  (struct sockaddr *) &cli_addr, 
                  &clilen);
           if (*newsockfd < 0) 
         error ("ERROR on accept");
           bzero (buffer, BUFFERLENGTH);

         /* create separate thread for processing */
         server_thread = malloc (sizeof (pthread_t));
         if (!server_thread) {
         fprintf (stderr, "Couldn't allocate memory for thread!\n");
         exit (1);
           }

         if (pthread_attr_init (&pthread_attr)) {
         fprintf (stderr, "Creating initial thread attributes failed!\n");
         exit (1);
         }

         if (pthread_attr_setdetachstate (&pthread_attr, !PTHREAD_CREATE_DETACHED)) {
             fprintf (stderr, "setting thread attributes failed!\n");
         exit (1);
         }
         result = pthread_create (server_thread, &pthread_attr, processRequest, (void *) newsockfd);
           if (result != 0) {
         fprintf (stderr, "Thread creation failed!\n");
         exit (1);
           }

         }
         return 0; 
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T23:15:45.023

请注意，您的服务器代码已被严重粘贴，并且包含多个`main()`混合副本。

在服务器中，您调用`accept()`以接收客户端连接。然后创建一个线程来处理连接。该线程只处理一条消息并退出，但它应该为来自客户端的所有消息提供服务，直到客户端受够了。

因此，您需要在服务器线程中放置一个循环以允许它处理多条消息。

请注意，当我运行您的服务器时，线程处理的第一条消息被正确接收（消息读取“hello”），但报告格式错误（消息`Entry not well formed.`）。在 OS-X 上运行。

另请注意，该行：

```
if (pthread_attr_setdetachstate (&pthread_attr, !PTHREAD_CREATE_DETACHED)) { 
```

不应该有'！' 在常量 PTHREAD_CREATE_DETACHED 前面。

# jbpm - 在 jbpm 5 中添加 pojos 作为流程变量

> ID：13112359
> 
> 赞同：0
> 
> 时间：2012-10-28T19:48:33.120
> 
> 标签：jbpm

我正在使用 jbpm 5.2 执行业务流程，有时需要将 pojo 变量存储到流程上下文中。一切正常，我可以从会话中取回 pojo。但是如果服务器重新启动，我将无法再获取我的变量，并且我有一个异常说“无法重新加载变量”。我认为这个问题与类加载有关，jbpm 引擎找不到它试图恢复的 pojo 的类或接口，并因 java.lang.IllegalArgumentException：无法重新加载变量而失败。知道如何解决这个问题吗？

# iis-7 - 找不到 ASP 包含文件

> ID：13112362
> 
> 赞同：3
> 
> 时间：2012-10-28T19:48:58.943
> 
> 标签：iis-7, asp-classic

我是系统管理员（不是为一家公司工作，只是为第三方公司工作），并且在从服务器浏览他的网站时在服务器端收到一个错误问题。

> 错误
> 
> 活动服务器页面错误“ASP 0126”
> 
> 找不到包含文件
> 
> /login.asp，第 3 行
> 
> 找不到包含文件“/includes/connect.asp”

我在 IIS 7 中启用了父路径，但仍然出现错误。我根本不是 ASP 专家，但 IIS 中的所有东西看起来都不错。是他的密码吗？有什么他可以尝试的吗？做研究的感觉与他的文件路径有关吗？

多谢你们

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T20:13:53.650

**当您尝试查看托管在 IIS 6 中的 ASP 网页时，您可能会收到“ASP 0126”错误消息**

请查看 MSDN 上的这篇文章。决议在那里。

[ASP 0126](http://support.microsoft.com/kb/920721)

只是为了给 Stack Overflow 带来答案。以下是解决方法。

**方法一：使用#include virtual 语句和绝对文件路径**

若要解决此问题，请在 Test.asp 网页中使用 #include 虚拟语句和绝对文件路径。请考虑以下代码示例： 以下代码行不起作用。

```
<!-- #include virtual ="../Date.asp" --> 
```

以下代码行有效。

```
<!-- #include virtual ="Samples/Includes/Date.asp" --> 
```

**方法二：使用#include file语句和相对文件路径**

要变通解决此问题，请使用#include 文件语句和Test.asp 网页中的相对文件路径。请考虑以下代码示例： 以下代码行不起作用。

```
<!-- #include virtual ="../Date.asp" --> 
```

以下代码行确实有效。

```
<!-- #include file ="..\Date.asp -->

Note By default, parent paths are disabled in IIS 6\. To enable parent paths, you must manually set the AspEnableParentPaths property in the metabase to TRUE. 
```

# java - Doxygen，如何描述一个Java包

> ID：13112364
> 
> 赞同：3
> 
> 时间：2012-10-28T19:49:12.743
> 
> 标签：java, package, doxygen

我不太确定我应该如何使用 Doxygen 记录 Java 包。在 C++ 中，您可以简单地描述一个名称空间，因为它已声明，但 Java 包从未真正显式声明。我尝试在包 mypackage.subpackage; 之前添加描述。声明但无济于事。我发现这种工作是如果我要制作一个新文件并简单地做

```
/**
@namespace mypackage.subpackage
@brief my description
*/ 
```

它会出现在 wiki 上，但这很奇怪，因为某些包被正确描述，而其余包被重复（没有描述要描述的包，而是创建了另一个空的并具有相同名称的包）

有谁知道在 Doxygen 中描述 Java 包的正确方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T10:03:12.110

来自[stackoverflow.com/questions/7368584/doxygen-and-package-html](https://stackoverflow.com/questions/7368584/doxygen-and-package-html)的复制粘贴，以便于参考：

为 Java 包提供文档的新替代方法是使用名为 package-info.java 的文件而不是 package.html。（故意选择文件名不是有效的类名。）

它有不同的语法：

```
/**
 * any javadoc comments (including tags)
 */
package name; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-12T21:41:56.310

如果您使用的是 Java 1.4 或更低版本，则必须有`package.html`一个完整的 html 文件。

在 1.4 之后你可以使用 package-info.java 文件的格式

```
/**
 * com.foo is a group of bar utils for operating on foo things.
 */
package com.foo; 
```

# css - 菜单移动到较小尺寸的下一行

> ID：13112366
> 
> 赞同：0
> 
> 时间：2012-10-28T19:49:31.620
> 
> 标签：css, html, alignment, text-alignment

只需通过在 chrome 中将页面大小调整为更小的尺寸来测试此处的响应能力，但菜单会转到下一行[http://as-team.com/shoploop/index.html](http://a-s-team.com/shoploop/index.html)

我尝试在 chrome 中按 ctlr 并向下滚动。您将看到菜单移至下一行。大多数移动浏览器都会发生这种情况。有什么办法解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T20:26:41.327

我认为这是因为 font-size: 12px; 尝试使用 % insted of px

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T20:27:40.943

这远非最佳解决方案，但它确实解决了问题：您可以完全阻止移动设备上的缩放：

```
<meta name="viewport" content="width=320, initial-scale=1, maximum-scale=1, user-scalable=0"/> <!--320--> 
```

如果您将此添加到您的页面并在您的 iPhone 上访问它，您会看到您将无法缩放。

# c++ - 用户定义的字符串文字与。其他用户定义的文字

> ID：13112369
> 
> 赞同：6
> 
> 时间：2012-10-28T19:49:37.197
> 
> 标签：c++, c++11, user-defined-literals

让我们考虑以下来自 C++11 标准（[准确地说是 N3376 草案](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3376.pdf)）的引用：

> (2.14.8.5)
> 
> 如果 L 是用户定义的字符串文字，则令 str 为不带 ud-suﬃx 的文字，令 len 为 str 中的代码单元数（即，其长度不包括终止空字符）。文字 L 被视为形式的调用
> 
> ```
>  operator "" X (str , len ) 
> ```

而对于所有其他类型的用户定义文字（浮点、整数、字符），即使文字本身作为字符串传递，长度也永远不会传递。例如：

```
42_zzz; // calls operator "" _zzz("42") and not operator "" _zzz("42", 2) 
```

为什么字符串和非字符串用户定义文字之间存在这种区别？或者我应该说，为什么实现为 UD 字符串文字传递 len？与其他文字的情况一样，长度可以通过空终止来推断。我错过了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-28T20:06:05.993

对于字符串文字，可以合理地想象空字符嵌入到字符串的序列中，例如`"a\0b"`. 为了允许实现消耗整个字符串文字，即使有嵌入的空字符，它也需要知道文字的长度。用户定义文字的其他形式不能包含嵌入的零字符。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-28T20:06:25.777

字符串在 C/C++ 中总是以 null 结尾，但这绝不意味着它们不能包含嵌入的`\0`字符，你可能有`"1234\05678"`，虽然这个字符串以 null 结尾，但它包含一个额外的 '\0'。

# ruby - 更改重定向的 sinatras 基本 url

> ID：13112370
> 
> 赞同：0
> 
> 时间：2012-10-28T19:49:42.133
> 
> 标签：ruby, redirect, sinatra

如果我`redirect to("/")`在我的 sinatra 应用程序中使用它，它总是将我重定向到 localhost。但我不希望它重定向到我的域。如何设置域？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T02:32:58.530

Sinatra 没有特定于基本 url 的配置。它[采用反向代理、负载均衡器、其他机架路由器等填充的值](https://github.com/sinatra/sinatra/blob/master/lib/sinatra/base.rb)（第 182-196 行）。您可以尝试调用

```
redirect "/" 
```

看看这对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T21:02:14.217

好的，我终于明白了：

在 nginx.conf 中，在 location 块中插入：

```
proxy_set_header Host %YOUR_HOST%; 
```

# php - 如何使用mysql和php制作级联下拉列表

> ID：13112376
> 
> 赞同：1
> 
> 时间：2012-10-28T19:50:26.403
> 
> 标签：php, mysql, ajax

我必须制作一个包含多个相互修改的下拉菜单的表单。菜单/数据库表是：

类别、样式、类型和机制

我试图用我对 Ajax 的有限知识来做到这一点，但似乎只能访问 MySQL 一次（在初始页面上）以填充 Categories 表，而无法通过查询下一组结果来更新 Styles 表。我收到一个错误，声称数据库为空。

我还尝试通过选项组填充下拉列表，以使用循环查询处理类别和样式，但仅显示类别标题，所有样式子值显示为空白。我的代码如下：

```
 $query1="SELECT categories.category_id, categories.Category_Name ";
                $query1.="FROM categories ";
                $query1.="ORDER BY categories.Category_Name ASC";
                $category_result=mysql_query($query1, $connection);

                if(!$category_result){
                    die("Database query failed: " . mysql_error());
                }

                $options="";

                $con=0;

                while ($category_row=mysql_fetch_array($category_result)) {
                    $category_name=$category_row["Category_Name"];
                    $CategoryID=$category_row["category_id"];

                    $options.="<OPTGROUP LABEL=\"$category_name\"> <br />";

                    $query2="SELECT categories.category_id, categories.Category_Name, ";
                    $query2.="styles.style_id, styles.Style_Name ";
                    $query2.="FROM categories, styles ";
                    $query2.="WHERE styles.Category_ID = $CategoryID ";
                    $style_result=mysql_query($query2, $connection);

                    if(!$style_result){
                        die("Database query failed: " . mysql_error());
                    }

                    while ($style_row=mysql_fetch_array($style_result)) {
                        $style_name=$row["Style_Name"];
                        $id=$row["style_id"];

                        $options.="<OPTION VALUE=\"$id\" <a href=\"#\" onClick=\"javascript:swapContent('$style_name');\" >".$style_name.'</OPTION>';
                    }
                    $options.='</OPTGROUP> <br />';
                }
            ?>

            <SELECT NAME="category_id">
                <OPTION VALUE=0></OPTION>
                <?php echo $options ?>choose
            </SELECT> 
```

任何洞察我做错了什么都将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T19:57:19.050

选项必须是数组。

```
$options[]="<OPTGROUP LABEL=\"$category_name\"> <br />";
<SELECT NAME="category_id">
   <?php foreach ($options as $value) 
           echo $value?>
</SELECT> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T22:26:54.443

最后只需要自己解决，但感谢那些试图提供帮助的人。

我将从我的 Class/Category/Style/Type 级联表中发布我的中间表。首先制作如下函数：

```
 <?php //Category Selection
    function Category_Selection($link) {
        global $connection;
        $options="";
        if(isset($_GET["class_id"])) {
            $query="SELECT categories.category_id, categories.Category_Name ";
            $query.="FROM categories ";
            $query.="ORDER BY categories.Category_Name ASC";
            $result=mysql_query($query, $connection);
            $class_id=$_GET['class_id'];

            if(!$result){
                die("Database query failed: " . mysql_error());
            }
            while ($row=mysql_fetch_array($result)) {
                $name=$row["Category_Name"];
                $id=$row["category_id"];
                $link2=$link."&category_id={$id}";
                $options.="<OPTION VALUE=\"$link2\" ";
                if(isset($_GET["category_id"])) {
                    $category_id = $_GET['category_id'];
                    if($id==$category_id) {
                        $options.=" selected=\"selected\" ";
                    }
                }
                $options.=" >".$name.'</OPTION>';
            }
        } else {
            $options.="<OPTION selected=\"selected\" VALUE=0>First Select Class</OPTION>";
        }
        return($options);
    }
?> 
```

然后放在你的主页上：

```
<?php session_start() ?>
    //Category
    if(isset($_GET['category_id'])) {
        $category_id=$_GET['category_id'];
        setcookie('category_id',$category_id);
        $link.="&category_id={$category_id}";
    }elseif(isset($_COOKIE['category_id'])) {
        $_GET['category_id']=$_COOKIE['category_id'];
        $category_id=$_COOKIE['category_id'];
        $link.="&category_id={$category_id}";
    } 
```

现在让您的选择下拉：

```
<?php //Category Selection
                $options=Category_Selection($link);
            ?>
            <center>
            <SELECT NAME="category_id" ONCHANGE="location = this.options[this.selectedIndex].value;">
                <OPTION VALUE=0></OPTION>
                <?php echo $options ?>
            </SELECT>
            </center> 
```

对每个必需的下拉菜单重复上述操作。

祝你好运...当然使用 MYSQLi 来保护您的网站，而不是上面显示的 MYSQL...

# mysql - 黑洞引擎优化/表锁定问题

> ID：13112377
> 
> 赞同：1
> 
> 时间：2012-10-28T19:50:29.773
> 
> 标签：mysql, optimization, database-tuning

我正在使用 BLACKHOLE 引擎向表中添加很多行。Processlist 显示有很多查询正在等待表锁。MySQL 分析器显示，对该表的 INSERT 是导致我的数据库过载的最大原因。我已经优化了列和数据。我没有任何大的领域等。你能告诉我如何解决这个问题吗？

# jquery - CSS3/Javascript：使用 jQuery/Modernizr 转换 IE 支持

> ID：13112381
> 
> 赞同：0
> 
> 时间：2012-10-28T19:50:47.953
> 
> 标签：jquery, css, css-transitions, modernizr

有谁知道我如何实现 IE 7-9 支持[（在 Codepen.io 中）](http://codepen.io/hwg/pen/FltaL)按钮悬停效果？

例如，特别是：

```
transition-duration: 0.5s;
transition-property: all;
transition-timing-function: ease;
margin-top: 5px; 
```

我试过[这个](https://stackoverflow.com/questions/6098856/using-modernizr-and-jquery-to-animate-if-css3-transitions-dont-exist)，但是，margin-top 不会动画。别人好像..

我究竟做错了什么？？感谢任何帮助。

我有 jQuery，Modernizr...

多谢

哈雷

（如果这是一个公然的重复，请提前道歉，只是我似乎有一个特别的问题）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T20:02:16.743

你的问题是这一行：

```
$(this).animate({margin-top:'5px'},{queue:false,duration:500}); 
```

您要么需要引用 CSS 值，要么使用驼峰式：

```
$(this).animate({marginTop:'5px'},{queue:false,duration:500});
$(this).animate({'margin-top':'5px'},{queue:false,duration:500}); 
```

这几乎适用于所有带有连字符等的 CSS 值。

# blackberry-10 - 获取 BlackBerry 10 日志的最佳方式？

> ID：13112383
> 
> 赞同：8
> 
> 时间：2012-10-28T19:50:53.260
> 
> 标签：blackberry-10, blackberry-ndk

与 iOS 和 Android 相比，BlackBerry 10 具有相当复杂的日志系统。我找到的唯一解决方案是使用`javaloader`这样的工具：

```
javaloader.exe -u eventlog > eventlog.txt 
```

但它似乎只适用于 10 之前的 BlackBerry OS 版本。我在 BlackBerry 10 NDK 中找不到此工具。

使用命令行获取日志的最简单方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-20T17:48:51.623

您还可以通过 SSH 连接到设备 (ssh devuser@169.254.0.1) 并运行：

```
slog2info -w 
```

这将显示 slogger2 日志。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-29T03:27:53.997

有两种方法，都记录在[发行说明](https://developer.blackberry.com/cascades/download/releasenotes/)中。

如果您可以通过定义如下函数将记录器流（用于应用程序）复制到控制台：

```
void myMessageOutput(QtMsgType type, const char* msg) {
    fprintf(stdout, "%s\n", msg);
    fflush(stdout);
} 
```

然后将其安装为消息处理程序：

```
int main(int argc, char **argv)
{
    Application app(argc, argv);
    qInstallMsgHandler(myMessageOutput);
    ...
} 
```

您可以使用 ssh 系统连接到模拟器或设备并使用 slog2info 命令。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-30T17:03:01.750

这是我发现从 Momentics IDE 转移到命令行的结果。

当应用程序执行时`printf()`，输出进入文件

```
/accounts/1000/appdata/[your application folder name]/logs/log 
```

你可以使用这个命令

```
blackberry-deploy -getFile [path-to-log] 
```

将该文件带到您的 PC 上。此外，您可以使用 IDE 中的目标文件系统导航器来检查此（或任何其他）文件。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-07-04T04:30:59.820

这与另一个答案类似，但包含对动态用户有用的其他详细信息（BlackBerry 10 IDE）

**1.在momentics IDE中启用终端视图**

窗口 --> 显示视图 --> 其他 --> 终端

选择终端并按 OK

**2.连接终端**

在视图窗口中选择终端选项卡（可能称为“终端 1”）。选择连接按钮，它是视图窗口右上角的绿色 N 形按钮。

**3.运行日志查看器命令**

```
$ slog2info -w 
```

要阅读有关此命令的更多信息：

```
$ slog2info --help 
```

*请注意，不需要提供 ssh 用户或密钥，当您使用此过程时，IDE 会处理这些用户或密钥。

**日志语句**

您可以使用以下命令将日志记录添加到您的应用程序

```
qDebug() << "This is debug";
qWarning() << "This is a warning";
qCritical() << "This is critical " << somevariable << ", some additional text";
qFatal() << "This is fatal" << somevariable; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-07-16T11:18:06.487

您可以从以下路径查看所有日志

```
/accounts/1000/appdata/[Application Name]/logs/log 
```

# google-app-engine - 如何更改与 GAE 中的数据存储记录关联的用户？

> ID：13112385
> 
> 赞同：0
> 
> 时间：2012-10-28T19:51:15.583
> 
> 标签：google-app-engine, google-cloud-datastore

我有一个用户更改了与他的 Google 帐户关联的电子邮件地址。他不再与曾经与他的用户对象相关联的数据存储记录相关联。

我可以用他的新电子邮件地址更新数据存储对象上的用户属性吗？我是否需要构造一个实际的用户对象来查询或更新这些记录，如果需要，我应该使用电子邮件、昵称还是 user_id？

如果重要，我正在使用 Python。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T22:54:13.980

来自文档：如果电子邮件地址与 Google 帐户相关联，则 user_id 返回用户的唯一永久 ID，即 str。无论用户是否更改其电子邮件地址，此 ID 对于用户始终是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T18:58:04.690

最终为我工作的解决方案片段：

```
 old_user = users.User(email="old@yahoo.com");
    new_user = users.User(email="new@gmail.com");
    changed = []

    things = model.Ball.all().filter("user =", old_user).fetch(500);
    for thing in things:
        thing.user = new_user
        changed += [thing]

    if len(changed) >= 500:
        db.put(changed)
        return

    ... 
```

# listview - 使用 WinRT 将 Web 链接嵌入到列表视图文本中

> ID：13112390
> 
> 赞同：0
> 
> 时间：2012-10-28T19:51:33.093
> 
> 标签：listview, windows-8, microsoft-metro, windows-runtime

是否可以在列表视图中嵌入链接，例如：[http](http://www.sun.com) ://www.sun.com ，以便该链接变得敏感？我的印象是只包含一个“http://”就可以了（就像一个 WebView 控件），但它似乎没有。

我希望能够显示一个在单击时启动外部浏览器的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T19:54:56.993

您可以`HyperlinkButton`为此添加`ListBox`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T11:34:08.083

您可以使用诸如 PointerEntered 和 PointerExited 之类的事件处理程序来更改元素的某些属性，当指针悬停在诸如 Foreground 之类的链接上以更改颜色时。

# javascript - OnKeyup 和 iframe

> ID：13112391
> 
> 赞同：1
> 
> 时间：2012-10-28T19:51:45.667
> 
> 标签：javascript, html, iframe

我正在制作自己的基本文本编辑器。我有一个 iframe，用户可以在其中输入他们的代码。

在 iframe 下方，有一个隐藏的 div。这个 div 通常会捕获 IFrame 中写入的内容，换句话说，用户将在上面的 Iframe 中输入的每个 HTML 和 CSS 代码，都会在下面的 div 中执行“OnKeyUp”操作。

现在下面的 div 是隐藏的，只有在用户单击按钮时才会预览。结果，这将在 JQuery 对话框中弹出。简而言之，将通过JQuery UI的对话框弹出div，向用户显示他/她正在编码的结果。

我知道我们可以在 textarea 中做到这一点，这只是“价值”的问题，但我没有通过 iframe 得到它。我做的：

```
function pcode () {
    var frame = document.getElementById('code').value;
    var div = document.getElementById('preview');
    divout.innerHTML = frameout;    
} 
```

上面的代码，只是抓取了写在Iframe中的值，然后在OnKeyUp下面的div中预览。现在，一旦用户单击按钮，在 JQuery UI 对话框中预览 div 的代码：

```
function preview() {
    $('#preview').dialog({modal:true, height:600, width:1280, title:"Preview", show:"slow", hide:"fast"});
}
$('#previewbutton').click(function() {
    preview();
}); 
```

问题是没有任何工作。如果你还没有理解这个问题，你可以问我一些问题，我自己对此感到压力。如果它是一个 textarea，一切都会好起来的，就像我之前用 textarea 做的那样，一切都很好。

出于同样的想法，我被建议在编写文本编辑器时使用 IFrame，因为如果我使用 textarea 执行此操作，用户的代码可能与我自己的页面 CSS 代码发生冲突。我想知道是否有可能单独使用 textarea 而不是 iframe，以防万一没有解决方案，但用户 CSS 和 HTML 代码不得与我自己的 CSS 代码冲突。例如，如果我声明了一个类或 ID 或将所有标题 1 设为蓝色，并且如果用户在文本区域中键入标题 1 标签，我的 CSS 代码也将适用于用户，所以我不不想要这个。

# ruby - 在 Ruby 中，为什么“或 " 必须与第一个条件在同一行？

> ID：13112396
> 
> 赞同：0
> 
> 时间：2012-10-28T19:52:16.103
> 
> 标签：ruby, compilation

```
@organization = Organization.where(:slug => subdomain).first 
  or raise ActiveRecord::RecordNotFound

SyntaxError (/Users/bmckim/Workspace/telvue/ion/app/controllers/application_controller.rb:36: syntax error, unexpected keyword_or, expecting keyword_end
  or raise ActiveRecord::RecordNotFound
    ^): 
```

为什么“或条件”必须与第一个条件在同一行？在整个语句周围使用括号也不起作用。以下工作按预期工作，并且无论如何可以说更好。

```
@organization = Organization.where(:slug => subdomain).first or 
  raise ActiveRecord::RecordNotFound 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T19:55:30.197

`@organization = Organization.where(:slug => subdomain).first`本身就是一个完整的表达式，因此解析器认为这就是您的意思。如果 Ruby 需要表达式终止符（分号或其他），则将`or`放在第二行就可以了。

# c - 这个二维字符数组的字符输入有什么问题？为什么它不采用总共 K*K 输入？

> ID：13112397
> 
> 赞同：-2
> 
> 时间：2012-10-28T19:52:18.103
> 
> 标签：c, char, getchar, getch

我正在尝试从用户那里获取二维字符数据，但它没有正确地从用户那里获取输入。您能否突出显示以下代码中的错误？

```
#include<stdio.h>
#include<stdlib.h>
#include<string.h>

int main()
{
int i, j, k;
char **ch;

printf("\nEnter k : ");
scanf("%d",&k);

ch = (char **) malloc (sizeof(char*) * k );
if(ch == NULL) { printf("\n Not enough memory for ch array "); exit(0);}
for(i = 0; i < k; i++)  {
    ch[i] = (char *) malloc (sizeof(char) * k );
    if(ch[i] == NULL) { printf("\n Not enough memory for ch array "); exit(0);}
}

printf("\nenter char matrix ( %d X %d )\n", k,k);
for(i = 0; i < k; i++) {
    for(j = 0; j < k; j++) {
        scanf("%c", (*(ch + i) + j) );
    }
}

printf("\n char matrix : \n");
for(i = 0; i < k; i++) {
    for(j = 0; j < k; j++) {
        printf("%c ",*(*(ch + i) + j));
    }
    printf("\n");
}

for(i = 0; i < k; i++)  free(*(ch + i));
free(ch);   
return 0;
} 
```

我尝试替换`char`为`int`. 它确实适用于整数。

`char`从 阅读有什么问题`stdin`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T20:06:47.787

问题：

```
scanf("%c", (*(ch + i) + j) ); 
```

在`scanf("%d",&k);`输入缓冲区中仍有换行符之后，它成为`char`矩阵的第一个条目。如果您在填充矩阵时输入更多换行符，它们也会成为矩阵条目。

在填充矩阵之前清除输入缓冲区。

```
int c;
do {
    c = getchar();
}while(c != '\n' && c != EOF);
if (c == EOF) {
    // input stream broken, yell
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T22:52:17.613

试用这个小程序，直到您对 scanf() 感到满意为止。了解 getchar() 和换行符。

```
#include <stdio.h>

int main(int argc, char **argv) {
    char a,b,c;
    scanf("%c", &a);
    scanf("%c", &b);
    scanf("%c", &c);
    printf("a='%c', b='%c', c='%c'\n", a, b, c);
    return 0;
} 
```

# mongodb - “gpgkeys: key 7F0CEB10 not found on keyserver” 尝试在 Ubuntu 上安装 mongodb 时的响应

> ID：13112400
> 
> 赞同：24
> 
> 时间：2012-10-28T19:52:30.673
> 
> 标签：mongodb, ubuntu, apt, gnupg

我正在尝试`mongodb`在我的`Ubuntu 12.04`桌面版上安装。`mongodb`首先，我希望在 Ubuntu 桌面版上安装没有任何问题。

我正在按照`mongodb`手册将[其安装在我的 Ubuntu 机器上](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-ubuntu/)。 **当**我尝试`10gen public GPG Key`使用说明（在手册中给出）导入时，通过

```
sudo apt-key adv --keyserver keyserver.ubuntu.com --recv 7F0CEB10 
```

我得到这个回应：

```
Executing: gpg --ignore-time-conflict --no-options --no-default-keyring --secret-keyring /tmp/tmp.WsHkMVxFlM --trustdb-name /etc/apt/trustdb.gpg --keyring /etc/apt/trusted.gpg --primary-keyring /etc/apt/trusted.gpg --keyserver keyserver.ubuntu.com --recv 7F0CEB10

gpg: requesting key 7F0CEB10 from hkp server keyserver.ubuntu.com

gpgkeys: key 7F0CEB10 not found on keyserver

gpg: no valid OpenPGP data found.

gpg: Total number processed: 0 
```

感谢您在这方面的任何帮助或提示。

提前致谢。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-29T03:41:19.920

绕过防火墙的一种方法：通过典型端口 (80) 进行查询：
`sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv 7F0CEB10`
您可能遇到的另一个问题是网络代理。如果您需要通过代理连接到互联网，请将代理设置导出到您的 bash 配置 - 添加您的代理地址行（如果需要：用户名/密码 - 没有它只是`http://proxyserver:port`）：
`export http_proxy=http://username:password@proxyserver:port/`
在文件末尾`/etc/bash.bashrc`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-09-22T13:35:19.213

像[@aniket-thakur](https://stackoverflow.com/users/2396539/aniket-thakur)的回答一样，您可以手动添加通过将此[页面](http://docs.mongodb.org/10gen-gpg-key.asc)`MongoDB public GPG Key`的内容复制到文件中然后使用命令行添加文件：`10gen-gpg-key.asc``apt-key add <file>`

```
sudo apt-key add 10gen-gpg-key.asc 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-02-01T06:08:08.397

[此链接](http://opensourceforgeeks.blogspot.in/2013/04/w-gpg-error-httpppalaunchpadnet-precise.html)中提到的第二种方法对我有用。手动下载密钥并添加。该链接提供了一步一步的过程来修复由于缺少密钥而发生的错误。

PS：上面的链接指向我的个人博客，其中包含有关如何执行此操作的详细步骤以及您可以尝试解决此问题的其他一些事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-04T11:44:05.387

我找不到任何正在运行的密钥：

```
sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 83FBA1751378B444 
```

我的解决方案是：

```
sudo launchpad-getkeys 
```

我终于可以运行“apt-get update”

# c# - 游戏边界的弹丸弹跳无法正常工作

> ID：13112405
> 
> 赞同：0
> 
> 时间：2012-10-28T19:53:29.953
> 
> 标签：c#, xna

在我的游戏中，有一个道具可以让玩家的弹丸从游戏区的墙壁上反弹。我似乎无法让它工作，游戏边界正常水平和垂直。

目前我的代码是这样的；

```
public void UpdatePlasma()
{
    Direction = new Vector2((float)Math.Cos(Angle), (float)Math.Sin(Angle));
    //Vector2 Velocity = new Vector2(1, 1);
    Position += Direction * projSpeed;

    if ((Position.X >= viewport.Width) || (Position.X <= 0))
    {
        Angle = -Angle;
    }

    else if ((Position.Y >= viewport.Height) || (Position.Y <= 0))
    {
        Angle = -Angle;
    }
} 
```

这类作品。射弹有时会在顶部和底部边界反弹（认为这可能是由于角度变为 0，因此在被否定和穿过时方向不会改变）并且根本不会在左右边界上反弹。然后我尝试将我的位置乘以注释掉的速度向量，然后否定 X 或 Y 坐标，但这根本不起作用，射弹只是继续超出边界。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T21:02:46.047

![逆时针弧度（正）](../Images/1ce01e944a013fc8fdd2c78c917e13d5.png) ![顺时针弧度（负）](../Images/a948171c090a2d655d044504e3987bc2.png)

这些图表说明了当您绕一圈顺时针或逆时针移动时的弧度角。我假设，在你的游戏中，红色箭头的方向相当于给定特定角度的球的运动（即，0 rad 是正确的，PI/2 rad 是向上的，等等）。

使用这些图作为参考，考虑球撞击墙壁的四种情况：分别向上、向右、向下和向左移动时的顶部、右侧、底部和左侧。

首先，我将使用当前代码查看案例，以说明为什么会发生不正确的行为。我将把“入射角”称为球在碰撞前（与相应的墙壁）的角度，将“偏转角”称为球在碰撞后应该具有的角度。

* * *

使用`deflected_angle = -incidence_angle`

**案例1：**球向上移动，撞到顶壁：

```
incidence_angle = PI/2 = up
deflected_angle = -PI/2 = 3PI/2 = down 
```

好的！

**案例2：**球向下移动，撞到底壁：

```
incidence_angle = 3PI/2 = down
deflected_angle = -3PI/2 = up 
```

好的！

**案例3：**球向右移动，撞到右墙：

```
incidence_angle = 0 = right
deflected_angle = -0 = 0 = right 
```

哎呀！

**案例4：**球向左移动，撞到左墙：

```
incidence_angle = PI = left
deflected_angle = -PI = PI = left 
```

哎呀！

* * *

因此，既然我们已经了解了为什么当前代码在某些情况下行为正确而在其他情况下不正确，我们必须想出一些解决方案。应该清楚的是，我们对简单地否定角度不感兴趣。相反，（至少对于四个示例案例），我们希望球向相反方向偏转；我们可以通过将 PI 添加到我们的角度来做到这一点，这是一个半圆转弯。

现在让我们用新方程来回顾一下我们的案例。

* * *

使用`deflected_angle = incidence_angle + PI`

**案例1：**球向上移动，撞到顶壁：

```
incidence_angle = PI/2 = up
deflected_angle = PI/2 + PI = 3PI/2 = down 
```

好的！

**案例2：**球向下移动，撞到底壁：

```
incidence_angle = 3PI/2 = down
deflected_angle = 3PI/2 + PI = 5PI/2 = PI/2 = up 
```

好的！（注意，`5PI/2`绕一圈，然后绕一圈。我们可以通过计算得到相同的角度`5PI/2 - 2PI`，即`PI/2`。）

**案例3：**球向右移动，撞到右墙：

```
incidence_angle = 0 = right
deflected_angle = 0 + PI = PI = left 
```

好的！

**案例4：**球向左移动，撞到左墙：

```
incidence_angle = PI = left
deflected_angle = PI + PI = 2PI = 0 = right 
```

好的！

* * *

我建议尝试此解决方案并观察结果。当球以我们正在考虑的四个角度以外的角度撞击侧面时，您仍然应该观察到奇怪的行为（特别是，它会朝它来的方向反弹，而不是像我们预期的那样偏转）。

为了纠正这个问题，当我们撞到垂直墙（左侧或右侧）时，我们想要计算偏转角为`deflected_angle = PI - incident_angle`，而当我们撞到水平墙（顶部或底部）时，我们想要计算角度为`deflected_angle = 2PI - incident_angle`。

下图说明了为什么会出现这种情况。为简洁起见，我们只看球击中顶壁的情况；其他情况类似说明。

红色矢量表示入射角，蓝色矢量表示偏转角。每个向量出现两次，只是被翻译过，这并没有改变它们的含义（唯一的目的是澄清图表）。此外，角度还被额外表示为圆弧`A`、`B`和`C`（即：红色矢量 和`A`、蓝色矢量 和`C`表示相同的事物）。

![偏转示例（垂直法线）](../Images/092479b89648a5f4411dc46137fabefc.png)

从这个图中，我们可以推导出`C = PI + B`和`B = PI - A`。我们把这些放在一起得出最终的等式。（注意这`C`是我们的偏转角，`A`是入射角）。

```
let:
C = PI + B
B = PI - A

then:
C = PI + (PI - A)
C = PI + PI - A
C = 2PI - A

note:
2PI = 0
therefore, C = -A
(this is why the top and bottom cases worked)

therefore:
deflected_angle = 2PI - incidence_angle 
```

同样，您可以以类似的方式检查其他情况并得出其余方程式。您会注意到，击中底部的球使用与击中顶部相同的方程求解，并且您会发现`deflected_angle = PI - incident_angle`左侧和右侧的方程相同。

如果您想进一步阅读，可以将球偏离任何线（即：不仅仅是水平或垂直）；这可以通过观察您要偏离的表面的法线来完成。我将避免列出和特定链接，因为它们可能会损坏；相反，我会推荐一些谷歌搜索（它们可能会存在一段时间；））。

* * *

# 其他注意事项

在游戏物理中您必须处理的另一个问题，至少在使用离散物理时（与尝试在碰撞发生之前确定碰撞时间的连续方法相反）是对象将相互穿透。要了解这个问题，请考虑如果您的球在边界之外停留超过一个更新周期会发生什么（这可能会也可能不会，具体取决于您的更新频率、球速、球加速度和碰撞分辨率） . 在第一个更新周期，假设您检测到球在边界上方，因此您正确计算偏转角度并将其设置为球的新角度。现在，在您的第二个更新周期中，您根据这个角度移动球，但球仍然在边界之上（即 考虑到它的速度和加速度，它没有移动足够远以重新进入边界）；您的代码将再次检测到球超出边界并将球向上偏转！结果是您的球要么在短时间内卡在墙上，要么永久卡在墙上，或者完全离开比赛场地。有许多方法可以解决这个问题，这些方法超出了这个特定问题主题的范围。

还有一个缺失的案例（好吧，实际上是四个，但所有的想法都是一样的）：如果球越过场地的角落怎么办？如果您只将球视为撞到了一面墙，那么您的偏转角度将不正确，并且会导致球飞出边界。因此，您需要额外的逻辑来说明这种可能性。

# mysql - 查询以查找日期在开始日期和结束日期之间的记录，其中日期可能重置为 0

> ID：13112411
> 
> 赞同：0
> 
> 时间：2012-10-28T19:54:16.547
> 
> 标签：mysql, ruby-on-rails, ruby, math

我们的应用程序中有每周重复发生的事件，并决定将每个事件的开始和结束时间存储为从一周开始（星期日上午 12 点）开始的秒数。这使得查询、排序等变得更加容易。

但是，有一个小问题：如果我们想获取在接近一周重置的时间发生的事件，该事件可以弥补这一差距，这使得查询变得困难。

一个正常的查询，在 99% 的时间都有效，用于获取给定时间在记录的开始时间和结束时间之间的记录。

```
time = 216000 # Tuesday, 12:00PM
SELECT * FROM events WHERE start_time <= 216000 AND end_time > 216000 
```

困难的部分是当有一个事件从星期六晚上 11 点开始，到星期天凌晨 2 点结束时：

```
time = 3600 # Sunday, 1am
SELECT * FROM events WHERE start_time <= 3600 AND end_time > 3600 
```

这不会返回任何内容`start_time`，因为它不会小于 3600，因为它在每周周期结束时开始。

我一直在绞尽脑汁想提出一个好的解决方案，但到目前为止还不够，所以我想把它开放给 SO 看看是否有我没有想到的解决方案的。我有一种感觉，我可以使用一些简单的数学方程式来完成这项工作，但数学不是我最好的科目:)

如果我需要更好地解释或给出更好的例子，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T20:14:52.357

您可以尝试以下方法：

```
select * from events 
   where (start_time <= 3600 or start_time>end_time) and end_time > 3600; 
```

这样，您将能够捕捉到在您休息时间之前开始并且仍在指定时间发生的事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T20:04:36.900

您可以将开始时间设置得非常高。

SELECT * FROM events WHERE start_time <= 590000 AND end_time > 3600

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T20:29:38.210

您应该将您的时间存储为时间戳，然后计算每周的 start_time 并做一些数学运算。这可以防止您描述的问题，然后您：

`select * from events where (start_time < SUNDAYS_TIMESTAMP and end_time > SUNDAYS_TIMESTAMP`或者你真正想尝试的任何东西。

您应该以通用格式存储数据，并从中找出您想要的内容。

# java - 文件的多线程读写，无法停止操作，写入坏文件

> ID：13112415
> 
> 赞同：2
> 
> 时间：2012-10-28T19:54:59.197
> 
> 标签：java, multithreading, concurrency, producer-consumer

我的任务是传输大文件，大小约为 5 GB 的文件，因此是读写操作。

我写了一个单线程版本，一次读取 5k，然后立即将 5K 写入另一个位置，单线程版本工作正常，我使用 412 MB 的 zip 文件夹进行测试，大约需要 5 秒。

我的目标是实际编写一个多线程版本，想到的自然设计模式是生产者（读者）消费者（作者）模式。

下面首先是我基于多线程版本的单线程版本：

* * *

```
 import java.net.*;
import java.io.*;
import java.nio.*;
import java.util.Arrays;

public class ReadWrite {

    URI readFrom = null;
    URI writeTo = null;
    //streams
    FileInputStream fis = null;
    FileOutputStream fos = null;
    // good buffer size in Java is generally between 2k to 8k
    byte[] byteBuffer = new byte[5 * 1024];
    //just for testing 
    private int readSoFar = 0;
    //const
    ReadWrite(URI readFrom, URI writeTo) {
        this.readFrom = readFrom;
        this.writeTo = writeTo;

    }

    public URI getReadFrom() {
        return readFrom;
    }

    public void setReadFrom(URI readFrom) {
        this.readFrom = readFrom;
    }

    public URI getWriteTo() {
        return writeTo;
    }

    public void setWriteTo(URI writeTo) {
        this.writeTo = writeTo;
    }

    public void process() throws FileNotFoundException {

        // by chunks therefore buffer
        File fileToRead = new File(readFrom);
        File fileToWrite = new File(writeTo);
        try {
            // if read & write destinations exist
            if (fileToRead.exists()) {
                fis = new FileInputStream(fileToRead);
                // instantiate OutputStream

                fos = new FileOutputStream(fileToWrite);
                // read a chunk, then write , update read position, until there
                // is no more to read
                try {
                    int writeCounter = 0;
                    // read
                    while ((fis.read(byteBuffer, 0, byteBuffer.length)) != -1) {

                        try {
                            //just for testing & seeing output/progress
                            readSoFar= readSoFar + byteBuffer.length;
                            System.out.println("readSoFar:" + readSoFar);
                            // write
                            fos.write(byteBuffer);
                            // clear previous data
                            Arrays.fill(byteBuffer, (byte) 0);
                            System.out.println("writeCounter: " + writeCounter);
                            writeCounter++;
                        } catch (IOException exc) {
                            exc.printStackTrace();

                        }
                    }
                } catch (IOException exc) {
                    exc.printStackTrace();
                }

            } else {
                throw new FileNotFoundException();
            }
        } finally {
            if (fis != null) {
                try {
                    fis.close();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
            if (fos != null) {
                try {
                    fos.flush();
                    fos.close();

                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        }
    }// end class ReadWrite

} 
```

* * *

主类 FileCopy（单线程）：

```
public class FileCopy {

    public static void main(String[] args) {

     try {
        try {
            //wls1033_dev.zip
            new ReadWrite( new URI("file:/C:/Users/anaim/Pictures/wls1033_dev.zip"),new URI("file:/C:/Users/anaim/Pictures/result/wls1033_dev.zip")).process();
        } catch (URISyntaxException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    }

}//end main class 
```

输出应如下所示：

. . . readSoFar：423198720 writeCounter：82655 readSoFar：423203840 writeCounter：82656 readSoFar：423208960 writeCounter：82657

很明显，目标文件不应该被修改并且与原始文件相同。

* * *

下面是多线程版本，它基于单线程代码，除了线程逻辑和锁通过同步，等待，通知实现。多线程实际上正在工作，没有死锁或活力问题，但是读/写操作不会终止。

问题似乎出在变量“ **readState”及其 getReadState()**方法上，当在主类中调用时，readState == -1 似乎无法正常运行，**而不是读/写应该终止。**

多线程读写（ReadProducerWriteConsumer 类）提供了一个 readProcess 和 writeProcess，它们根据“布尔空”变量/标志的值等待同步部分

```
import java.net.*;
import java.io.*;
import java.nio.*;
import java.util.Arrays;

public class ReadProducerWriteConsumer {

    URI readFrom = null;
    URI writeTo = null;
    //
    FileInputStream fis = null;
    FileOutputStream fos = null;
    // good buffer size in Java is generally between 2k to 8k
    byte[] byteBuffer = new byte[1024];
    //
    File fileToRead = null;
    File fileToWrite = null;
    //
    private int readSoFar = 0;
    int writeCounter = 0;
    //
    volatile private int readState = 0;
    // Consumer & Producer state , hence has anything been read in order to be
    // written
    boolean empty = true;

    ReadProducerWriteConsumer(URI readFrom, URI writeTo) {
        this.readFrom = readFrom;
        this.writeTo = writeTo;
        //
        fileToRead = new File(readFrom);
        fileToWrite = new File(writeTo);
    }

    public long getReadState() {
        return this.readState;
    }

    public void setReadState(int readState) {
        this.readState = readState;
    }

    public URI getReadFrom() {
        return readFrom;
    }

    public void setReadFrom(URI readFrom) {
        this.readFrom = readFrom;
    }

    public URI getWriteTo() {
        return writeTo;
    }

    public void setWriteTo(URI writeTo) {
        this.writeTo = writeTo;
    }

    public synchronized void readProcess() throws FileNotFoundException {

        // while false, while data is being written , wait
        while (empty == false) {
            try {
                wait();
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

        // by chunks therefore buffer
        File fileToRead = new File(readFrom);

        try {
            // if read & write destinations exist
            if (fileToRead.exists()) {
                fis = new FileInputStream(fileToRead);
                // read a chunk
                try {
                    // while readSoFar!=-1
                    while (((this.readState = fis.read(byteBuffer, 0,
                            byteBuffer.length)) != -1) && empty != false) {

                        // just for testing & seeing output/progress
                        readSoFar = readSoFar + byteBuffer.length;
                        System.out.println("readSoFar:" + readSoFar);

                        // read a chunck , now that buffer is full set emoty to
                        // false
                        empty = false;

                    }
                } catch (IOException exc) {
                    exc.printStackTrace();
                }

            } else {
                throw new FileNotFoundException();
            }
        } finally {
            if (fis != null) {
                try {
                    fis.close();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
            // new data has been read , notify all threads waiting to consume
            // data
            notifyAll();
        }
    }

    public synchronized void writeProcess() throws FileNotFoundException {
        // while true, therefore there is nothing to write, wait
        while (empty == true) {
            try {
                wait();
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
        // by chunks therefore buffer
        File fileToWrite = new File(writeTo);

        try {
            // instantiate OutputStream
            fos = new FileOutputStream(fileToWrite);
            // then write , update read position

            // write
            try {
                fos.write(byteBuffer);
                // clear previous data
                Arrays.fill(byteBuffer, (byte) 0);
                System.out.println("writeCounter: " + writeCounter);
                writeCounter++;
            } catch (IOException exc) {
                exc.printStackTrace();

            }

        } finally {

            if (fos != null) {
                try {
                    fos.flush();
                    fos.close();

                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
            // new data has been written , notify all threads waiting to
            // read/produce more data
            empty = true;
            notifyAll();
        }
    }

}//end class ReadProducerWriteConsumer 
```

* * *

readRunnable 类实现一个 runnable 并调用 ReadProducerWriteConsumer.readProcess()

```
import java.io.FileNotFoundException;

public class readRunnable implements Runnable {
    ReadProducerWriteConsumer ReaderProducerWriterConsumer = null;

    public readRunnable(ReadProducerWriteConsumer readerProducerWriterConsumer) {
        super();
        ReaderProducerWriterConsumer = readerProducerWriterConsumer;
    }

    @Override
    public void run() {
        // TODO Auto-generated method stub
        try {
            ReaderProducerWriterConsumer.readProcess();
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
    // call ReaderProducerWriterConsumer read method
}//end readRunnable class 
```

* * *

writeRunnable 类实现了一个 runnable 并调用 ReadProducerWriteConsumer.writeProcess()

```
import java.io.FileNotFoundException;

public class writeRunnable implements Runnable
    {
        ReadProducerWriteConsumer ReaderProducerWriterConsumer = null; 

        public writeRunnable (ReadProducerWriteConsumer readerProducerWriterConsumer) {
            super();
            ReaderProducerWriterConsumer = readerProducerWriterConsumer;
        }

        @Override
        public void run() {
            // TODO Auto-generated method stub
            try {
                ReaderProducerWriterConsumer.writeProcess();
            } catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
        //ReaderProducerWriterConsumer write method
    }//end writeRunnable 
```

* * *

实例化线程并创建读/写线程直到没有更多要读取的主类，使用 ReadProducerWriteConsumer.getReadState() 检查此条件

```
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.net.MalformedURLException;
import java.net.URI;
import java.net.URISyntaxException;
import java.net.URL;
import java.nio.ByteBuffer;
import java.nio.channels.FileChannel;
import java.nio.file.Paths;
import java.util.Arrays;

public class FileCopy {

    public static void main(String[] args) {

        ReadProducerWriteConsumer ReaderProducerWriterConsumer = null;
        try {
            ReaderProducerWriterConsumer = new ReadProducerWriteConsumer(
                    new URI("file:/C:/Users/anaim/Pictures/pic.png"), new URI(
                            "file:/C:/Users/anaim/Pictures/result/pic.png"));
        } catch (URISyntaxException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        Thread readThread = null;
        Thread writeThread = null;

        while (ReaderProducerWriterConsumer.getReadState() != -1) {

            readThread = new Thread(new readRunnable(
                    ReaderProducerWriterConsumer));

            writeThread = new Thread(new writeRunnable(
                    ReaderProducerWriterConsumer));

            readThread.start();
            writeThread.start();

            try {
                readThread.join();
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            try {
                writeThread.join();
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

    }

}// end main class 
```

因此，多线程版本的问题是读/写操作不会停止，因此写操作会产生损坏的文件。

请提供智能解决方案。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T20:41:40.550

错误在您的写入过程中，它不会循环：它只会写入一次然后退出，然后读取过程将重新填充缓冲区，并永远等待它再次变为空。

除此之外，你的设计很有趣，但有点不寻常。

它有几个问题：

*   FileInputStream.read 函数不一定返回您请求的字节数，返回值告诉您读取了多少字节。您应该将该值用于您的写入过程。

*   您正在使用循环来检查`empty`布尔值作为锁。使用信号量会更容易（参见[java.util.concurrent](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/package-summary.html)），

*   或者，您可以使用 BlockingQueue 来同步您的读取和写入。

*   还有一种称为循环缓冲区的数据结构，它可以让您在缓冲区中以“连续方式”存储读取的数据，但我不知道它是否存在于 Java 中。基本上，您在缓冲区中保留 2 个指针，一个指向缓冲区中可用剩余空间的开头，一个指向已用空间的开头。当您写入缓冲区时，您开始在可用空间的位置存储数据。如果到达缓冲区的末尾，则返回开始（因此是“循环”的想法）。您必须注意不要传递已用空间指针，但如果您的读取操作正确（也就是说，您要求的不超过剩余的可用空间），您应该能够避免这个问题。当你从缓冲区读取时，你从使用的空间指针开始，并读取缓冲区中可用的尽可能多的字节。也许您应该在稍后阶段尝试这种方法。

# c++ - 选择排序。如何将选择排序作为稳定算法？

> ID：13112417
> 
> 赞同：1
> 
> 时间：2012-10-28T19:55:04.430
> 
> 标签：c++, algorithm, sorting, stable-sort

我有选择排序算法的这种实现。如何使这个实现稳定？我觉得不可能/

```
int selection_sort1 ( int ai_numbers[], const int ci_count )
{
    int counter = 0;
    int i, minIndex, j;

    for ( i = 0; i < ci_count; i++ )
    {
        minIndex = i;
        for ( j = i + 1; j < ci_count; j++ )
        {
            if ( ai_numbers[j] < ai_numbers[minIndex] )
            {
                minIndex = j;
            }
        }
        swap ( &ai_numbers[i], &ai_numbers[minIndex] );
        counter++;
    }

    return counter;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T20:02:04.157

Taken straight from wikipedia:

> > > Selection sort can be implemented as a stable sort. If, rather than swapping in step 2, the minimum value is inserted into the first position (that is, all intervening items moved down), the algorithm is stable. However, this modification either requires a data structure that supports efficient insertions or deletions, such as a linked list, or it leads to performing Θ(n2) writes.

So basically you do have a stable sort, since you are always swapping a value that is less then the minimum value (as opposed to less then or EQUAL to the value).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T19:58:27.533

您的实现**不稳定**。在每次迭代中，您将元素放在`i`数组中的位置并将其放在剩余数组中的任意位置，因此您弄乱了原始顺序。

如果你想要一个稳定的排序，你必须：

*   像您已经做的那样从剩余列表中选择最小元素
*   **将其插入**到位`i`而不交换。这意味着将剩余的元素向右移动，以便为`i`您放置的第 th 个元素腾出空间。

这确保具有相同值的元素在排序后的数组和原始数组中以**相同的顺序放置。**

（感谢 Groo 在评论中指出错误）

# javascript - 将jquery移动主题值传递给带有主干的div标签

> ID：13112420
> 
> 赞同：0
> 
> 时间：2012-10-28T19:55:14.370
> 
> 标签：javascript, jquery-mobile, backbone.js, themes

我希望能够在应用程序运行时更改我的主题。我如何将值从主干传回，但不知道如何将其添加到页面 div。例如，在下面的代码中 {{-theme}} 被替换为实际值，比如 a。

```
 -- <div data-role="page" id="todopage" >
    --  <div data-theme="a" id="testr">{{-theme}}</span> 
```

我希望能够做这样的事情

```
 <div data-role="page" id="todopage" data-theme="<%{{-theme}} %>"> 
```

. 这可能吗？

我正在使用以下代码获得主题的价值

```
 self.setElement('#todopage')

  self.elem = {
      testr: self.$el.find('#testr')

 }
  self.tm = {
      testr: _.template( self.elem.testr.html() )
 } 
```

并在渲染 var loaded = app.model.state.get('theme')

```
 self.elem.testr.html( self.tm.testr({
      theme: loaded 
  }) ) 
```

我现在不确定是否将值直接传递回 div 标签。有人有什么想法吗？

谢谢标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T10:32:06.687

使用 $("#todopage").attr("data-theme", loaded) $("#todopage").attr("data-content-theme",loaded) $('#todopage') 让它工作。 page('destroy').page();

# php - 使用 php、jquery、mysql 自动完成

> ID：13112424
> 
> 赞同：-2
> 
> 时间：2012-10-28T19:55:27.707
> 
> 标签：php, javascript, jquery, ajax, autocomplete

我在我的项目中使用这个源代码：[http](http://www.htmlblog.us/jquery-autocomplete) ://www.htmlblog.us/jquery-autocomplete ，但是当我输入自动完成文本框时我无法获取结果。

我哪里错了？

我使用以下代码

**Javascript ：（**我为这个 javascript 使用了一个单独的文件，并检查了这个调用是否使用警报，并且我能够在运行时生成警报消息。）

```
jQuery(document).ready
 (
    function()
        {
                $('#CourseId').autocomplete( { url:'AutoComplete_Courses.php', minLength:2 } );                
        }
 ); 
```

**php：**

```
<?php

echo('Your password must be at least 8 characters long');
if ( !isset($_REQUEST['term']) )
    exit;

$dblink = mysql_connect('localhost', 'root', '') or die( mysql_error() );
mysql_select_db('mydatabase');

$rs = mysql_query('select courseid, coursename, creditpoints from coursedetails where coursename like "'. mysql_real_escape_string($_REQUEST['term']) .'%" order by coursename asc limit 0,10', $dblink);

$data = array();
if ( $rs && mysql_num_rows($rs) )
{
    while( $row = mysql_fetch_array($rs, MYSQL_ASSOC) )
    {
        $data[] = array(
            'label' => $row['courseid'] .', '. $row['coursename'] .' '. $row['creditpoints'] ,
            'value' => $row['courseid']
        );
    }
}

echo json_encode($data);
flush(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T19:58:22.687

`echo()`如果您通过在无条件输出中添加随机文本前缀来破坏预期的 JSON 结果，则它不会起作用。

删除：

```
echo('Your password must be at least 8 characters long'); 
```

否则自动完成插件将收到

```
garbage text here [{"json":"won't be readable"},...] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T20:14:24.947

查看 AutoComplete 插件的文档。看起来您使用了错误的对象属性。

[http://api.jqueryui.com/autocomplete/](http://api.jqueryui.com/autocomplete/)

如您所见，没有“ **url** ”属性，请改用“ **source** ”。

更改此行：

`$('#CourseId').autocomplete( { url:'AutoComplete_Courses.php', minLength:2 } );`

到

`$('#CourseId').autocomplete( { source:'AutoComplete_Courses.php', minLength:2 } );`

此外，每当我遇到来自数据库的数据时，我通常会将变量包装在 PHP 的内置输出函数 var_dump() 中，以查看 PHP 如何格式化数据。

[http://us2.php.net/manual/en/function.var-dump.php](http://us2.php.net/manual/en/function.var-dump.php)

# gridview - 如何在网格中编辑行时将组合框与外部数据源一起使用？

> ID：13112426
> 
> 赞同：1
> 
> 时间：2012-10-28T19:56:00.913
> 
> 标签：gridview, kendo-ui

ASP.Net MVC 3、Kendo UI Web、Kendo 网格控件。

我的主要数据源通过外键绑定使用外部数据源：

```
.Columns(columns =>
{
    columns.ForeignKey(p => p.FK_ID, (System.Collections.IEnumerable)ViewData["things"], "ID", "NAME");
    ... 
```

在视图模式下，绑定按预期工作，我看到`NAME`由“FK_ID - ID”关系绑定的属性。

但是，当我进入编辑模式时，会发生奇怪的事情：

*   在内联模式下——该列被禁用（即该字段没有任何类型的编辑器）

*   在弹出模式下——有一个编辑框编辑器，而不是组合框，所以尽管有绑定，我还是必须手动输入

在 Kendo 网站上，演示显示，如果外键处于编辑模式，则会显示组合框，并且选择仅限于外部数据源（非常常识）。

那么我应该怎么做才能显示组合框并仅从那里显示的值中选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T20:02:11.387

请问您是否有需要的外键编辑器？它应该位于 Views/Shared/EditorTemplates 文件夹下，其名称为**GridForeignKey.cshtml**（如果使用 ASPX 视图引擎，则为 .aspx）

如果它不存在，您可以使用上面的信息手动添加它。编辑器的内容是：

```
@( Html.Kendo().DropDownList()
    .Name(ViewData.TemplateInfo.GetFullHtmlFieldName(""))
    .BindTo((SelectList)ViewData[ViewData.TemplateInfo.GetFullHtmlFieldName("") + "_Data"])) 
```

# vim - vim 在最大化一个拆分窗口后恢复拆分屏幕布局

> ID：13112428
> 
> 赞同：5
> 
> 时间：2012-10-28T19:56:04.387
> 
> 标签：vim

所以我做了一个垂直分割并使用 CNTRL+| 最大化了一个分割窗口。. 现在我如何让它回到相同的大小？

编辑：让我详细说明我的问题，假设我有这样的布局

```
------------------
| one     | two  |
|-----------------
|three    | Four |
------------------ 
```

在上面的布局中，我最大化第三个窗口以捕获整个屏幕大小。现在，如果我只想在拆分视图中显示三个和四个，并最小化“一”和“二”，那该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-28T20:21:49.797

If you didn't do any resizing between the creation of the vertical split and `<C-w>|`, `<C-w>=` will return you to an "equalized" layout.

If you did some resizing you are out of luck as Vim doesn't keep a "resize history".

See `:help windows`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T20:21:37.957

If it's just the two windows, Ctrl-W = will make both the same width again, but if you have more windows, their size might be affected by this, too. If you have mouse support (e.g. in GVIM), you also just drag around the window border to resize.

# ruby - 查找已加载的 OmniAuth 提供程序

> ID：13112430
> 
> 赞同：6
> 
> 时间：2012-10-28T19:56:18.460
> 
> 标签：ruby, omniauth

我想知道[OmniAuth gem](https://github.com/intridea/omniauth)加载了哪些提供程序。我试过这个：

```
OmniAuth::Strategies.constants  # a method provided by the standard lib Module class
# => [:Developer, :OAuth, :Twitter] 
```

和这个：

```
OmniAuth.strategies.inspect # a method provided by the OmniAuth class, but which has no documentation or comments around it.
# => [OmniAuth::Strategies::OAuth] 
```

我期望（或想要）的答案`[:Developer, :Twitter]`就像在我的测试代码中一样，我只明确加载了 twitter，并且默认情况下加载了提供的开发人员。

（这一切都是为了让不同的库可以加载正确的东西以使其工作，这取决于 OmniAuth 正在运行的内容。）

如果有办法并且您知道，请告诉我。否则，我会务实地将 OAuth 从第一个示例中剔除。

Ruby 是 1.9.3，OmniAuth 是 v1.1.1

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-09-14T12:35:29.287

在这里为 Devise 用户添加这个，因为我需要与 iain 相同的列表。

我尝试在 Rails 项目中的设计初始化程序顶部使用接受的答案，但出现错误（@@providers 未定义）。

查看 Devise 源代码后，我使用以下代码获取符号数组：

```
Devise.omniauth_configs.keys # => [:facebook, :twitter] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-28T22:53:04.527

OmniAuth::Strategies 列出可用和注册的策略。不是那些正在“使用”的。如果您深入研究[OmniAuth builder](https://github.com/intridea/omniauth/blob/master/lib/omniauth/builder.rb)的代码，您会发现各种策略都使用`use`provider 块中的中间件传递到 Rack 上，这使得跟踪策略变得更加困难。另一种“务实”的方法是给 OmniAuth Builder 打补丁并跟踪提供者。

```
module OmniAuth
  class Builder < ::Rack::Builder
    def provider_patch(klass, *args, &block)
      @@providers ||= []
      @@providers << klass
      old_provider(klass, *args, &block)
    end
    alias old_provider provider
    alias provider provider_patch
    class << self
      def providers
        @@providers
      end
    end
  end
end 
```

在配置您的提供程序之前包含此补丁。加载所有提供程序后，`OmniAuth::Builder.providers`将为您提供所需的数组。

即使开发者策略可用，它也不会加载。仅在您指定时才加载

```
provider :developer 
```

# wordpress - 我想在 wordpress 中使用 Masonry，但它似乎不起作用

> ID：13112434
> 
> 赞同：2
> 
> 时间：2012-10-28T19:56:36.553
> 
> 标签：wordpress, jquery-masonry

我在一个 wordpress 网站上工作，我想在我的一个页面中使用 jQuery Masonry，但它不起作用。我搜索并尝试了许多更改，但没有结果。

我在这里：

在 header.php 我添加了这个：

```
 <?php wp_enqueue_script("jquery"); ?>

    <?php wp_head(); ?>

<script language="javascript" type="text/javascript" src="<?php bloginfo('template_url'); ?>/javascripts/jquery.masonry.min.js"></script>

<script language="javascript" type="text/javascript" src="<?php bloginfo('template_url'); ?>/javascripts/jquery.imagesloaded.js"></script>

<script language="javascript" type="text/javascript">

var $container = $('#masonry-list');
$container.imagesLoaded(function(){
  $container.masonry({
    itemSelector: '.masonry-item', isAnimated: true
  });
});

</script>

</head> 
```

在模板文件（list-objects.php）中我有这个标记：

```
<div id="masonry-list">
    <h3> this-is-list-object-page </h3>

        <?php $loop = new WP_Query( array( 'post_type' => 'objects', 'posts_per_page' => -1 , 'orderby' => 'rand' ) ); ?>

    <?php while ( $loop->have_posts() ) : $loop->the_post(); ?> 

    <div class="masonry-item">
        <?php the_title( '<a href="' . get_permalink() . '" title="' . the_title_attribute( 'echo=0' ) . '" rel="bookmark">', '</a>' ); ?>

        <a href="<?php the_permalink(); ?>" title="<?php the_title_attribute(); ?>" >
   <?php the_post_thumbnail(); ?>
   </a>
        <?php echo get_the_term_list( $post->ID, 'place', 'مکان قرار گیری: ', ', ', '' ); ?>
        <?php echo get_the_term_list( $post->ID, 'category', 'رده: ', ', ', '' ); ?>
    </div>

<?php endwhile; ?>
</div> 
```

我检查了所有 .js 文件是否已加载并且地址等没有问题。页面地址是：`http://5.144.130.63/?page_id=69`

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T20:03:44.613

You have at least two problems, possibly three:

1.  Your script is running before the page is fully loaded. You need to wrap it in the jQuery document ready function (example below)

2.  When using jQuery in WordPress, you need to reference it via the `jQuery` function - using the `$` function will end up with "collisions" with other libraries.

3.  It appears that you are using both the [imagesLoaded](http://desandro.github.com/imagesloaded/) and [masonry](http://masonry.desandro.com) plugins - are you sure there is no collission between the two, causing issues? They both aim to position images after they are loaded - I'd encourage you to remove the imagesLoaded and see if you get what you want.

Alter your script like below, and you should see it work:

```
<script language="javascript" type="text/javascript">  
    // This line tells the script to run after the page is loaded,
    // As well as allows you to use the `$` function within the script
    jQuery(function($) {  
        $('#masonry-list').masonry({
            itemSelector: '.masonry-item', 
            isAnimated: true
        });
    });
</script> 
```

# java - Java 如何在其 16 位 char 类型中存储 UTF-16 字符？

> ID：13112435
> 
> 赞同：23
> 
> 时间：2012-10-28T19:57:00.420
> 
> 标签：java, variables, unicode, encoding, utf-16

根据[Java SE 7 规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.1)，Java 使用 Unicode UTF-16 标准来表示字符。当把 a 想象`String`成一个*简单*的 16 位变量数组时，每个变量都包含一个字符，生活很简单。

不幸的是，有些代码点 16 位根本不够用（我相信它是所有 Unicode 字符的 16/17）。所以在 a 中`String`，这没有直接问题，因为当想要使用*额外的两个字节*存储这些 ~1.048.576 字符之一时，只需使用其中的两个数组位置`String`。

这在没有任何*直接*问题的情况下适用于`String`s，因为总是可以有额外的两个字节。虽然当涉及到与 UTF-16 编码相比具有*16 位固定长度的*单个变量时，如何存储这些字符，特别是 Java 如何使用其*2 字节“char”类型*？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-28T20:00:57.800

答案在[javadoc](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/Character.java)中：

> char 数据类型（以及因此 Character 对象封装的值）基于原始 Unicode 规范，该规范将字符定义为固定宽度的 16 位实体。此后，Unicode 标准已更改为允许表示需要超过 16 位的字符。
> 
> 合法代码点的范围现在是 U+0000 到 U+10FFFF，称为 Unicode 标量值。（请参阅 Unicode 标准中 U+n 表示法的定义。）从 U+0000 到 U+FFFF 的字符集有时称为基本多语言平面 (BMP)。码位大于 U+FFFF 的字符称为补充字符。Java 2 平台在 char 数组以及 String 和 StringBuffer 类中使用 UTF-16 表示。在此表示中，补充字符表示为一对 char 值，第一个来自高代理范围 (\uD800-\uDBFF)，第二个来自低代理范围 (\uDC00-\uDFFF)。
> 
> 因此，char 值表示基本多语言平面 (BMP) 代码点，包括代理代码点或 UTF-16 编码的代码单元。一个 int 值表示所有 Unicode 代码点，包括补充代码点。int 的低（最低）21 位用于表示 Unicode 代码点，高（最高）11 位必须为零。
> 
> 除非另有说明，否则关于补充字符和代理 char 值的行为如下： 仅接受 char 值的方法不支持补充字符。它们将代理范围中的 char 值视为未定义字符。例如，Character.isLetter('\uD840') 返回 false，即使此特定值后跟字符串中的任何低代理值将表示一个字母。接受 int 值的方法支持所有 Unicode 字符，包括补充字符。例如，Character.isLetter(0x2F81A) 返回 true，因为代码点值表示一个字母（CJK 表意文字）。在 Java SE API 文档中，Unicode 代码点用于 U+0000 到 U+10FFFF 范围内的字符值，Unicode 代码单元用于 16 位 char 值，它们是 UTF-16 编码的代码单元。有关 Unicode 术语的更多信息，请参阅 Unicode 词汇表。

简单地说：

*   char 规则的 16 位是为旧版本的 Unicode 标准设计的
*   您有时需要两个字符来表示不在基本多语言平面中的 unicode 符文（代码点）。这种“有效”是因为您不经常使用字符，尤其是在处理 BMP 之外的 unicode 符文时。

更简单的说：

*   java char 不代表 Unicode 代码点（嗯，并非总是如此）。

顺便说一句，可以注意到 Unicode 超越 BMP 的演变使得 UTF-16 在全球范围内变得无关紧要，因为 UTF-16 甚至不支持固定的字节字符比率。这就是为什么更现代的语言基于 UTF-8。这份[宣言](http://www.utf8everywhere.org/)有助于理解它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-28T20:01:17.160

基本上，字符串存储一系列 UTF-16 代码单元......这与存储 Unicode 代码点序列不同。

当需要基本多语言平面之外的字符时，它会占用`String`.

大多数`String`操作 - `length()`,`charAt`等`substring()`处理 UTF-16 代码单元的数量。但是，有些操作[`codePointAt()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#codePointAt%28int%29)将处理完整的 Unicode 代码点……尽管索引仍以 UTF-16 代码单元表示。

编辑：如果您想将非 BMP 代码点存储在单个`char`中，那么您基本上不走运。这就像想在一个变量中存储超过 256 个不同的值`byte`......它只是行不通。遵循在其他地方（例如 in `String`）表示代码点的约定，最好只使用`int`变量。

# command - CAR、CDR、CADAR等的解释

> ID：13112436
> 
> 赞同：16
> 
> 时间：2012-10-28T19:57:02.720
> 
> 标签：command, scheme

有人可以给我一个关于Scheme的变化`car`和作用的基本解释吗？`cdr`

如果我是正确的，`car`将返回列表中的第一项。 `cdr`将返回一个不包括第一个元素的列表。

我对这些的其他变体感到困惑，更具体地说，诸如`cadar`, `caddr`,`cddr`等之类的东西。

假设我有一个随机的例子：

```
define X '(a b (c d e))

(car X)
(cdr X)
(cadr X)
(cadar X) 
```

`(car X)`会生产*`a`*，`(cdr X)`会生产*`(b (c d e))`*，`cadr`会生产*`b`*。但我不知道如何推断`car`/ `cdr`like的任何其他变体`cadar`。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-28T20:01:24.983

您可以通过解析它们的名称来推断这些函数的含义：

在第一个字母 ('c') 和最后一个 ('r') 之间，“a”表示“汽车”，“d”表示“cdr”。

所以：

*   `cadr`是“cdr 的车”，
*   `cddr`是 cdr 的 cdr,
*   `cadar`是“汽车的 cdr 的汽车”（因此参数必须是列表的列表），
*   等等

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-28T20:03:33.870

The easiest way is to enter it into a scheme interpreter:

```
(car X)   -> a
(cdr X)   -> (b (c d e))
(cadr X)  -> (car (cdr X))       -> (car '(b (c d e))) -> b
(cadar X) -> (car (cdr (car X))) -> (car (cdr 'a))     -> error 
```

When you have more than one `a` or `d`, as you can see from the `cadr` example, you can read it backwards. First take the `cdr` (d) of the argument, then take the `car` (a) from the result, and so on until you get to the first one.

# java - 使用 GSON 将对象的“列表”（作为对象）解析为 JSON 中的整数对象（哈希图）

> ID：13112438
> 
> 赞同：0
> 
> 时间：2012-10-28T19:57:18.053
> 
> 标签：java, android, json, parsing, gson

我有这种json：

```
{
 "1": {"id": 1, "first": "mymethod", "second" : [true, true, false]} ,
 "4": {"id": 2, "first": "foo", "second" : [true, true, false]},
 "67": {"id": 67, "first": "bar", "second": [true, true, false]},
 "70": {"id": 70, "first": "foobar", "second" : [true, true, false]}
} 
```

我正在尝试使用 gson（使用 Android）解析它，但由于某种原因我不能。我尝试了很多组合`HashMaps<Integer, TheClass> ; TheClass[] ; ArrayList<TheClass>`：等等......但我仍然无法做到！

一切，当然，在泛型的情况下使用类型的辅助类：

```
public class TheClassList extends whatever<TheClass> {} 
```

和

```
gson.fromJson(jsonstr, TheClassList.class); 
```

任何帮助将不胜感激？非常感谢。

PS：注意每个对象的“索引”。它是一个整数，但它不是连续的 (1,2,99...)。

非常感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T22:08:31.863

请注意您的 JSON 是如何成为具有四个字段的单个对象的，因为根处有花括号 {} 而不是方括号 []。因此，任何将其解析为列表或数组的尝试都行不通。

假设 TheClass 定义如下：

```
public class TheClass {

    private int id;
    private String first;
    private boolean[] second; // List<Boolean> would work as well

} 
```

然后可以使用以下内容对其进行解析：

```
TypeToken<Map<Integer, TheClass>> token = new TypeToken<Map<Integer, TheClass>>() {};
Map<Integer, TheClass> map = new Gson().fromJson(jsonstr, token.getType()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T20:01:19.380

我可以建议以下库 - [http://code.google.com/p/json-simple/downloads/detail?name=json-simple-1.1.1.jar&can=2&q=](http://code.google.com/p/json-simple/downloads/detail?name=json-simple-1.1.1.jar&can=2&q=)

# json - JAXB 到 JSON 与 Jersey 使用的相同符号？

> ID：13112441
> 
> 赞同：0
> 
> 时间：2012-10-28T19:57:54.237
> 
> 标签：json, jaxb, jersey, jettison

我使用它来将 JAXB bean 转换为 JSON 代码：

```
private String marshall(final Book beanObject) throws Exception
{
  JAXBContext context = JAXBContext.newInstance(Book.class);
  Marshaller marshaller = context.createMarshaller();

  Configuration config = new Configuration();
  MappedNamespaceConvention con = new MappedNamespaceConvention(config);
  StringWriter jsonDocument = new StringWriter();
  XMLStreamWriter xmlStreamWriter = new MappedXMLStreamWriter(con, jsonDocument);
  marshaller.marshal(beanObject, xmlStreamWriter);

  return jsonDocument.toString();
} 
```

对于我的 Book 类，输出是：

```
{"bookType":{"chapters":["Genesis","Exodus"],"name":"The Bible","pages":600}} 
```

但是，我希望输出与 Jersey 兼容：

```
{"chapters":["Genesis","Exodus"],"name":"The Bible","pages":600} 
```

如何使用上述代码归档第二个 JSON 表示法并摆脱根元素？

**我的解决方案：**

现在切换到杰克逊，在那里你可以设置一个根解包选项。不过，如果有的话，我仍然对 Jettison 解决方案感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T18:07:33.830

您可以操作 Book 类的字符串输出以删除第一个 { 和第二个 { 之间的所有内容。这是如何做到的

```
public class AdjustJSONFormat { 
public static void main(String[] args){
        String inputS = "{\"bookType\":{\"chapters\":" +
                "[\"Genesis\",\"Exodus\"]," +
                "\"name\":\"The Bible\",\"pages\":600}}";
        String result = pruneJson(inputS);
        System.out.print(result);
}

public static String pruneJson(String input){
    int indexOfFistCurlyBrace = input.indexOf('{', 1);      
    return input.substring(indexOfFistCurlyBrace, input.length()-1);
} 
```

}

# android - 小部件并非在所有设备上都可用

> ID：13112447
> 
> 赞同：0
> 
> 时间：2012-10-28T19:58:48.110
> 
> 标签：android, android-widget

我开发了一个带有小部件的 Android 应用程序。该应用程序和小部件适用于许多版本，但自从最新版本以来，我收到了很多用户抱怨，这些小部件在某些设备上消失了。我看不出设备与问题之间有任何关联。更重要的是，我没有更改小部件的任何内容。我仔细检查了以前的版本，没有任何改变。唯一改变的是 Android SDK 和 Eclipse 版本。尽管我为相同的 API 级别构建，但我怀疑有些东西已经改变了。

我有两个不同的 Android 设备（2.3.6 和 4.1），并且在这两个小部件上都可以正常工作。我没有线索。

任何人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T20:10:41.590

找出哪些设备。尝试找到愿意与您一起解决问题的小部件问题的用户。您可以向他们发送带有额外调试输出、内存统计信息、版本等的自定义构建。或者尝试像他们一样使用设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T13:13:12.187

找到根本原因：出于某种原因，Play Store 发布部分中的复制保护字段设置为 OFF。因为`android:installLocation="preferExternal`在 AndroidManifest 文件中设置了一个选项，所以该应用程序现在突然自行安装在 SD 上。在此之前，复制保护阻止了这一点。我的两台设备都没有安装 SD 卡，这就解释了为什么我没有看到问题。

# objective-c - 如果手动生成顶点（然后初始化malloc），为什么我的对象不渲染，但如果静态分配则会渲染？

> ID：13112452
> 
> 赞同：4
> 
> 时间：2012-10-28T19:59:19.730
> 
> 标签：objective-c, ios, xcode, opengl-es-2.0, texture-mapping

最终，我试图通过为每个对象提供不同的纹理坐标来使用单个图像来纹理多个对象（六边形）。
使用 OpenGL ES 2.0 和 GLKit，我想出了一个这样做的方法，只是发现由于某种原因，如果我手动 malloc 和初始化顶点数组，对象将不会呈现。我特别不明白为什么这是因为顶点数组的静态分配版本工作得很好。

前面是我正在使用的结构：

```
typedef struct {
GLKVector3 position;
GLKVector4 color;
GLKVector2 texCoords;
}Vertex; 
```

因此，如果我在六边形的实现中执行此操作，我可以看到应用了纹理的各种六边形：

```
Vertex _Vertices[] = {
{{ 0,    0,     0}, {1, 1, 1, 0}, {0.50, 0.50}},//Z
{{ 1,    0,     0}, {1, 1, 1, 0}, {1.00, 0.50}},//A
{{ 0.5, -0.866, 0}, {1, 1, 1, 0}, {0.75, 0.00}},//B
{{-0.5, -0.866, 0}, {1, 1, 1, 0}, {0.25, 0.00}},//C
{{-1,    0,     0}, {1, 1, 1, 0}, {0,    0.50}},//D
{{-0.5,  0.866, 0}, {1, 1, 1, 0}, {0.25, 1.00}},//E
{{ 0.5,  0.866, 0}, {1, 1, 1, 0}, {0.75, 1.00}} //F
}; 
```

但是，如果我改为注释掉上面的声明并添加一个同名的实例变量（Vertex *Vertices 而不是 Vertex Vertices[]，因为我不能直接 malloc 到数组）然后执行以下操作，没有任何渲染：

```
-(void)setVertices{
_Vertices = malloc(sizeof(Vertex) * 7);

//Z
_Vertices[0].position.x = 0;
_Vertices[0].position.y = 0;
_Vertices[0].position.z = 0;
_Vertices[0].color.r = 1;
_Vertices[0].color.g = 1;
_Vertices[0].color.b = 1;
_Vertices[0].color.a = 0;
_Vertices[0].texCoords.x = 0.5;
_Vertices[0].texCoords.y = 0.5;

//A
_Vertices[1].position.x = 1;
_Vertices[1].position.y = 0;
_Vertices[1].position.z = 0;
_Vertices[1].color.r = 1;
_Vertices[1].color.g = 1;
_Vertices[1].color.b = 1;
_Vertices[1].color.a = 0;
_Vertices[1].texCoords.x = 1;
_Vertices[1].texCoords.y = 0.5;

//B
_Vertices[2].position.x = 0.5;
_Vertices[2].position.y = -0.866;
_Vertices[2].position.z = 0;
_Vertices[2].color.r = 1;
_Vertices[2].color.g = 1;
_Vertices[2].color.b = 1;
_Vertices[2].color.a = 0;
_Vertices[2].texCoords.x = 0.75;
_Vertices[2].texCoords.y = 0.00;

//C
_Vertices[3].position.x = -0.5;
_Vertices[3].position.y = -0.866;
_Vertices[3].position.z = 0;
_Vertices[3].color.r = 1;
_Vertices[3].color.g = 1;
_Vertices[3].color.b = 1;
_Vertices[3].color.a = 0;
_Vertices[3].texCoords.x = 0.25;
_Vertices[3].texCoords.y = 0;

//D
_Vertices[4].position.x = -1;
_Vertices[4].position.y = 0;
_Vertices[4].position.z = 0;
_Vertices[4].color.r = 1;
_Vertices[4].color.g = 1;
_Vertices[4].color.b = 1;
_Vertices[4].color.a = 0;
_Vertices[4].texCoords.x = 0;
_Vertices[4].texCoords.y = 0.5;

//E
_Vertices[5].position.x = -0.5;
_Vertices[5].position.y = 0.866;
_Vertices[5].position.z = 0;
_Vertices[5].color.r = 1;
_Vertices[5].color.g = 1;
_Vertices[5].color.b = 1;
_Vertices[5].color.a = 0;
_Vertices[5].texCoords.x = 0.25;
_Vertices[5].texCoords.y = 1;

//F
_Vertices[6].position.x = 0.5;
_Vertices[6].position.y = 0.866;
_Vertices[6].position.z = 0;
_Vertices[6].color.r = 1;
_Vertices[6].color.g = 1;
_Vertices[6].color.b = 1;
_Vertices[6].color.a = 0;
_Vertices[6].texCoords.x = 0.75;
_Vertices[6].texCoords.y = 1;
} 
```

这是我的设置功能：

```
-(void)setupGL{
self.effect = [[GLKBaseEffect alloc] init];

glGenBuffers(1, &_vertexBuffer);
glBindBuffer(GL_ARRAY_BUFFER, _vertexBuffer);
glBufferData(GL_ARRAY_BUFFER, sizeof(_Vertices), _Vertices, GL_STATIC_DRAW);

glGenBuffers(1, &_indexBuffer);
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, _indexBuffer);
glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(_Indices), _Indices, GL_STATIC_DRAW);
} 
```

这是我的绘图功能：

```
-(void)draw{
glPushGroupMarkerEXT(0,"drawHex");
_effect.texture2d0.envMode = GLKTextureEnvModeReplace;
_effect.texture2d0.target = GLKTextureTarget2D;
_effect.texture2d0.name = _texture.name;
[self.effect prepareToDraw];
glBindBuffer(GL_ARRAY_BUFFER, _vertexBuffer);
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, _indexBuffer);

glEnableVertexAttribArray(GLKVertexAttribPosition);
glVertexAttribPointer(GLKVertexAttribPosition, 3, GL_FLOAT, GL_FALSE, sizeof(Vertex), (const GLvoid *) offsetof(Vertex, position));

glEnableVertexAttribArray(GLKVertexAttribColor);
glVertexAttribPointer(GLKVertexAttribColor, 4, GL_FLOAT, GL_FALSE, sizeof(Vertex), (const GLvoid *) offsetof(Vertex, color));

glEnableVertexAttribArray(GLKVertexAttribTexCoord0);
glVertexAttribPointer(GLKVertexAttribTexCoord0, 2, GL_FLOAT, GL_FALSE, sizeof(Vertex), (const GLvoid *) offsetof(Vertex, texCoords));

//draw
glDrawElements(GL_TRIANGLES, sizeof(_Indices)/sizeof(_Indices[0]),GL_UNSIGNED_BYTE, 0);
glPopGroupMarkerEXT();
} 
```

如果重要，则在对象外部创建一次纹理，然后传入指向它的指针。像这样创建纹理：

```
-(void)setTextureImage:(UIImage *)image {
NSError *error;
_hexTexture = [GLKTextureLoader textureWithCGImage:image.CGImage options:nil error:&error];
if (error) {
    NSLog(@"Error loading texture from image: %@",error);
}} 
```

我对所有这些都是新手，试图弄清楚这里发生了什么变得非常令人沮丧。

在我的大量搜索中，我看到了一些关于“捕获 opengl es 框架”的信息，但它似乎没有为 Xcode 中的 iphone 模拟器启用，所以我无法深入研究它:(

我真的很想知道为什么会这样。

如果有帮助，我可以提供更多代码或解释。

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T20:40:21.857

关于 glBufferData 的参数，sizeof(_Vertices) 在静态和动态之间是不一样的。如果你想使用动态，你必须使用 sizeof(Vertex)*7 而不是 sizeof(_Vertices)。

# c - C：编译器在赋值中说“不兼容的类型”，但它们是相同的；和相关的东西

> ID：13112457
> 
> 赞同：-1
> 
> 时间：2012-10-28T19:59:37.367
> 
> 标签：c, windows, gcc, struct, variable-assignment

我刚刚偶然发现了 C 的一个非常奇怪的错误/功能（GCC 在 Windows 上设置为 C11）。

```
struct my_struct {
    char my_string[65];
};

void foo (struct my_struct * array1, struct my_struct * array2) {
    array2[0].my_string = array1[0].my_string;
}

int main () {
    struct my_struct array1[60];
    struct my_struct array2[60];
    strcpy(array1[0].my_string, "Hello World!");
    foo(array1, array2);
    printf("%s\n", array2[0].my_string);
    return 0;
} 
```

如果我尝试编译它，

```
error: incompatible types when assigning to type 'char[65]' from type 'char *' 
```

函数内部`foo`。

为什么？它们是完全相同的结构和数据类型。

另外，如果我将功能修改为

```
array2[0] = array1[0]; 
```

有用。但是我正在制作另一个程序，将字符串打印为`(null)`. 我不知道为什么，但我会尝试更多。如果我可以制作一个重现错误的片段，我将发布另一个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T20:12:00.260

错误消息令人困惑，但您遇到的基本问题是数组不是 C 中的第一类类型——您可以声明数组，但实际上不能直接对它们做任何事情。

任何在表达式中使用数组的尝试都将（静默）转换为指向数组第一个（或第零个，如果您愿意）元素的匿名指针。这个指针不能被赋值，它只能被取消引用。

因此，当您说 时`array2[0].my_string = array1[0].my_string;`，您正在尝试分配给无法分配的东西，即使它们看起来具有相同的类型。与您收到类似错误的方式大致相同`3 = 5;`，但在这种情况下，您可能会收到更清晰的错误消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T20:09:13.263

In the assignment

```
array2[0].my_string = array1[0].my_string; 
```

the `char[65]` `array1[0].my_string` is converted to a `char*`, a pointer to the first element of the array. That's how the `incompatible type` arises.

Generally, you can't assign to arrays anyway, so that won't work. Either assign the entire `struct`, or copy the array contents over.

# java - 获取网站的桌面版本

> ID：13112461
> 
> 赞同：1
> 
> 时间：2012-10-28T20:00:21.220
> 
> 标签：java, android, web

我正在使用 HTTP 连接来抓取“http://www.thecinemas.aw/main/”以获取数据，但是当我在手机上运行它时，它会转到移动版本。无论如何我可以强制它下载桌面版本吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-28T20:07:25.850

您可能必须设置`User-Agent`连接以假装它是桌面客户端。

如果您使用的是[HttpUrlConnection](http://developer.android.com/reference/java/net/HttpURLConnection.html)，则可以执行以下操作：

```
URL url = new URL( "http://www.thecinemas.aw/main/" );
HttpUrlConnection connection = (HttpUrlConnection)url.openConnection();
connection.setRequestProperty( "User-agent", "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4" ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T20:04:46.930

您可以尝试更改 HTTP 请求标头中的用户代理。

# c# - 控制 sendinput 鼠标移动速度

> ID：13112462
> 
> 赞同：1
> 
> 时间：2012-10-28T20:00:21.693
> 
> 标签：c#, winforms, mouse, sendinput

使用 Sendinput 方法时是否可以控制鼠标指针的速度？

例如这是我的代码：

```
 public static void ClickMouseDOWN(int x, int y)
    {
        INPUT mouseInput = new INPUT();
        mouseInput.type = (int)InputType.INPUT_MOUSE;
        mouseInput.mi.dx = CalculateAbsoluteCoordinateX(x);
        mouseInput.mi.dy = CalculateAbsoluteCoordinateY(y);
        mouseInput.mi.mouseData = 0;

// mouse teleports instantly
            mouseInput.mi.dwFlags = (int)MOUSEEVENTF.MOVE | (int)MOUSEEVENTF.ABSOLUTE;
            SendInput(1, new INPUT[] { mouseInput }, Marshal.SizeOf(mouseInput));
// mouse teleports instantly

        mouseInput.mi.dwFlags = (int)MOUSEEVENTF.LEFTDOWN;
        SendInput(1, new INPUT[] { mouseInput }, Marshal.SizeOf(mouseInput));

    } 
```

以下代码执行 MouseMovement + Mouse Button Press (down) 命令，但问题是指针传送到位置 (int x, int y) 而不是以某个恒定速度移动到该位置。

我希望能够控制那个速度。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-29T09:59:34.377

我找不到答案，所以最后我不得不使用本机方法：

```
Cursor.Position = new Point(x, y); 
```

我可以指定`Thread.Sleep(Z)`何时将光标移动到新位置

# android - Android - 动态构建的清单

> ID：13112467
> 
> 赞同：0
> 
> 时间：2012-10-28T20:00:33.593
> 
> 标签：android, android-manifest, android-contentprovider

我正在寻找一个外壳应用程序，然后用户下载要在应用程序中使用的数据“包”。

我的想法是，每个新的数据包基本上都是一个包含数据的内容提供者。

现在，我的问题是，如何让我的 shell 应用程序将所有内容提供程序加载到清单文件中。

我的想法/理论是

a) 具有内容提供者的通用 uri，或者以 * 或其他通配符结尾的内容提供者，因此可以访问具有相同起始包名称的所有内容提供者（这纯粹是理论上的。我不知道你是否可以这样做或不是）

例如 android:name="com.example.russ.*">

b）在我的清单中包含所有内容，因此它会检查是否安装了其中任何一个。如果我做 2 或 3 个数据包，这会很好，但我会有数百个

c) 首选 - 根据下载的数据包动态构建/生成清单文件，其名称存储在本地。

希望至少 a 或 c 之一是可行的。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T20:57:49.713

您不能动态更改清单。因此，可以在安装应用程序后授予应用程序任何权限。

# r - 将原始数据转换为频率

> ID：13112468
> 
> 赞同：0
> 
> 时间：2012-10-28T20:00:40.720
> 
> 标签：r, charts, dataset, frequency

我在尝试使用我拥有的这个数据集绘制某些图表时遇到了一些麻烦，该数据集类似于：

```
 Year Count        ENSO          NAO
1   1900     5  0.49063600 -0.073333333
2   1901     7 -0.34351300 -0.461666667
3   1902     5  1.43181000 -1.065000000
4   1903     9 -0.48638500  0.335000000
5   1904     5  0.66698600 -0.103333333
6   1905     3  1.12753000 -0.818333333
7   1906     8 -0.59783800 -0.040000000
8   1907     2 -0.43226700  0.111666667
9   1908     8 -0.48319500  0.421666667
10  1909     8 -1.17421000  0.153333333
11  1910     4 -0.68855800 -0.996666667
12  1911     5  0.38084300  0.115000000
13  1912     5 -0.06871800 -0.535000000 
```

我想做的是能够获取“计数”列并将其绘制为“计数”中每个值的频率的条形图，但是我不确定从哪里开始，我的所有指南我正在浏览的只是显示当您已经拥有相关频率时如何将数据绘制为条形图。

谁能帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T20:07:50.640

Probably this:

```
barplot(table(dat$Count)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T20:08:00.493

Not sure if this is what you are looking for:

```
a <- rnorm(1000)
h <- hist(a)
barplot(h$counts, names=h$mids) 
```

With your data, you could plot:

```
barplot(df$Count, names=df$Year) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T23:00:14.743

另一种`ggplot2`使用`geom_bar`

```
library(ggplot2)
ggplot(dat, aes(x = factor(Count))) + geom_bar() + xlab('Count') 
```

![在此处输入图像描述](../Images/a30b63e4cf1809697b8d2cf4f6540a32.png)

# jsp - Struts2 中的动态 JSP 标记文件

> ID：13112472
> 
> 赞同：0
> 
> 时间：2012-10-28T20:00:49.353
> 
> 标签：jsp, struts2

我正在使用 JSP 标记文件将“小部件”添加到我的应用程序页面。

是否有可能有一个与 JSP 标记文件关联的操作，因此它将像普通页面一样填充动态内容，然后在某个地方“注入”？

假设我有这样调用的标记文件：`<c:onlinemembers />`. 它显示在线成员列表。我需要有一种在显示之前用动态数据填充它的方法。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T20:04:09.677

I would either use Ajax and return the data as JSON and display using jQuery or create a custom JSP tag to do it. I'm not really fond of the latter. From your action just return JSON and using jQuery is a simple approach. Hope this helps.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T10:05:16.883

编辑：正如 Alexandr 所指出的，这在 Struts 2.0.x 上很好，其中 Struts 集成了 Dojo 标签。从 Struts 2.1.x 开始，应该使用 jQuery（具有类似的机制）。

一切都取决于您的 Struts2 版本。

* * *

或者，您可以使用内置的 Struts2/Dojo AJAX 功能。

```
<head>
    <script type="text/javascript">
      // Scripts executed when loading the JSP:
      function configPage(){
        // Dojo topic function subscribing:
        dojo.event.topic.getTopic("myTopic").subscribe(null, "updateDivFunction");
      }

      function updateDivFunction(param1, param2){
        // Get the Div
        var myDiv = dojo.widget.byId("myDynamicDiv"); 

        // Set a new href to the AJAX action to call, 
        // which will return a partial JSP (a snippet),
        // as mapped normally in struts.xml...      
        myDiv.href = "loadDynamicDivAjax.do?param1="+param1+"&param2="+param2;

        // Force the div to reload with AJAX now.
        resultDiv.refresh();
      }

      function updateDivWrapper(param1, param2){
        // Publishing the topic now, will invoke the 
        // "updateDivFunction" set in configPage()...
        dojo.event.topic.publish("myTopic", param1, param2);
      }

    </script>
</head>

<body onload="javascript:configPage();">
    <h1>My main JSP page</h1>

    <br/><br/>

    <s:div id="myDynamicDiv" theme="ajax" 
           loadingText="Loading..." 
           errorText="Errors occurred...">
    </s:div>

    <br/>

    <span>
        Click below links to load the DIV with DOJO 
        through an AJAX call, and different parameters.
    </span>

    <br/><br/>

    <a href="javascript:updateDivWrapper('1','2')">
        Update with param1=1 and param2=2
    </a>

    <br/><br/>

    <a href="javascript:updateDivWrapper('8','9')">
        Update with param1=8 and param2=9
    </a>
</body> 
```

在 Struts.xml 中，您应该将 loadDynamicDivAjaxAction 映射为返回一个正常的 JSP 片段作为结果。而已...

# python - Python Pyglet 应用程序在 Windows Emacs 中不起作用

> ID：13112473
> 
> 赞同：1
> 
> 时间：2012-10-28T20:00:50.593
> 
> 标签：python, windows, windows-7, emacs, python-3.3

我无法让 emacs 评估我的缓冲区。我将它置于 python 模式并启动了解释器，但 Cc Cc 似乎没有做任何事情。我还尝试 Cc Cl 加载文件，但选择文件后没有任何反应。直接输入 python shell 确实有效。

我在 linux 中进行了尝试，一切正常，所以我知道我使用了正确的命令并且我的代码没有问题。

我在 Windows 7 上运行 GNU Emacs 24.2.1 和 Python 3.3。我是 emacs 的新手，到目前为止我很喜欢它，但除非我能让 shell 工作，否则我需要切换到不同的编辑器。

**更新：**我正在尝试运行使用 Pyglet 库开发的应用程序，该库创建自己的窗口来显示图形。

**更新#2：**因此，如果我尝试评估缓冲区，然后转到 python 缓冲区并停止编译，然后再次评估它，那么它就可以工作。这显然不理想。

也可能相关，除非我进入 shell 并按 enter，否则任何错误或异常都不会显示在 shell 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T20:57:27.887

这里的输出到达缓冲区*Python*，不幸的是默认情况下不显示。Mx list-buffers 应该提到它。

# linux - 获取所有文件中单词的计数

> ID：13112475
> 
> 赞同：4
> 
> 时间：2012-10-28T20:01:00.817
> 
> 标签：linux, bash, grep, wc

我有一个目录树，其中包含一堆文件夹和子文件夹，以及这些子文件夹中的一堆文件。我需要在每个文件中获取单词'Hello'的计数并将结果显示为'文件'a'有'Hello'n次'，'文件'b'有'Hello'm次'等等. 我如何在 linux 中编写脚本，以便我可以在每个文件中获取单词 hello 的字数。浏览 net 后，我​​尝试了一些 grep 与 'wc' 的组合，但这给了我所有文件夹中所有文件的总数。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T20:08:07.660

Try something like this:

`find . -type f | xargs -n1 grep "Hello" -c`

Adding `-type f` to `find` ensures that it only returns files, not directories. Adding `-n1` to `xargs` makes it so that every file returned by `find` gets its own invocation of `grep`, so that you can get a per-file count. The `-c` argument to `grep` returns the count of matches instead of every match.

The above expression will count the number of lines that have 'Hello' in them. If you need the total number of Hellos, instead of just the number of lines that have Hello in them, you'll need to do something more sophisticated. You can use the `-o` option on grep to just print the matching section of a line, and then combine that with `wc -l` to get the number of total occurrences.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T20:11:38.877

使用`grep`语法是：

```
grep -Rc "Hello" your_dir/ 
```

我还推荐[`ack`](http://betterthangrep.com/)作为一个很好的替代品`grep`：

```
ack -lc "Hello" your_dir/ 
```

# c++ - 非逻辑代码流/无效向量操作

> ID：13112477
> 
> 赞同：1
> 
> 时间：2012-10-28T20:01:12.467
> 
> 标签：c++, vector

我在编写练习代码时遇到了这个奇怪的问题。

首先，当我选择第一个选项时，输入一个错误的条目。它应该转到`else`我的代码的一个分支，但它却卡在那里。我真的不知道为什么。当我输入一个中间有空格的“游戏标题”时也会发生这种情况。

其次，我在删除分支注释掉的那一行：

```
iter = gameTitles.erase(iter); 
```

......根本不起作用。我正在尝试做的是通过输入来删除一个条目，然后将其与一个条目进行比较，以便它知道要删除什么。这就是为什么我也在使用迭代器。

```
// Exercise 1
/*
Write a program using vectors and iterators that allows a user to maintain a list of
his or her favorite games. The program should allow the user to list all game titles,
add a game title, and remove a game title.
*/

#include <iostream>
#include <windows.h>
#include <string>
#include <vector>

using namespace std;

int main(){
    bool    bLoop   = true;
    int     nChoice;
    char    cChoice;
    string  sInput;

    vector<string>::const_iterator iter;
    vector<string> gameTitles;

    while(bLoop){
        // -Head
        cout << "///////////////////////////////////\n// My Favorite Games\n\n";
        cout << "1\. Add title\n2\. Delete title\n3\. Clear list\n\n";

        // -List
        if(!gameTitles.empty()){
            for(iter = gameTitles.begin(); iter!=gameTitles.end(); ++iter){
                cout << "-" << *iter << endl;
            }
        }

        cout << "\n:: ";
        cin  >> nChoice;

        // 1\. Add
        if(nChoice == 1){
            cout << "\nGame Title: ";
            cin >> sInput;
            gameTitles.push_back(sInput);
        }

        // 2\. Delete
        else if(nChoice == 2) {
            cout << "Delete Title: ";
            cin >> sInput;

            for(iter = gameTitles.begin(); iter!=gameTitles.end(); ++iter){
                if(*iter == sInput){
                    cout << "erased";
                    //iter = gameTitles.erase(iter);
                }
            }
        }

        // 3\. Clear
        else if(nChoice == 3){
            cout << "Are you sure? (y/n) ";
            cin >> cChoice;
            if(cChoice == 'y'){
                gameTitles.clear();
            }
        } else {
            cout << "\nInvalid Choice, Please try again.\n";
        }

        // -Clean
        system("PAUSE");
        system("cls");
    }
} 
```

编辑：解决了第一个问题。使用普通迭代器而不是常量迭代器

EDIT2：解决了第二个问题，这是我更正的代码：

```
// Exercise 1
/*
Write a program using vectors and iterators that allows a user to maintain a list of
his or her favorite games. The program should allow the user to list all game titles,
add a game title, and remove a game title.
*/

#include <iostream>
#include <windows.h>
#include <string>
#include <vector>

using namespace std;

int main(){
    bool    bLoop   = true;
    int     nChoice;
    char    cChoice;
    string  sInput;

    vector<string>::iterator iter;
    vector<string> gameTitles;

    while(bLoop){
        // -Head
        cout << "///////////////////////////////////\n// My Favorite Games\n\n";
        cout << "1\. Add title\n2\. Delete title\n3\. Clear list\n\n";

        // -List
        if(!gameTitles.empty()){
            for(iter = gameTitles.begin(); iter!=gameTitles.end(); ++iter){
                cout << "-" << *iter << endl;
            }
        }

        cout << "\n:: ";
        cin >> nChoice;

        if(cin.fail()){
            cin.clear();
            cin.ignore();
        }

        // 1\. Add
        if(nChoice == 1){
            cout << "\nGame Title: ";
            cin >> sInput;
            gameTitles.push_back(sInput);
        }

        // 2\. Delete
        else if(nChoice == 2) {
            cout << "Delete Title: ";
            cin >> sInput;

            for(iter = gameTitles.begin(); iter!=gameTitles.end(); ){
                if(*iter == sInput){
                    cout << "erased";
                    iter = gameTitles.erase(iter);
                } else {
                    ++iter;
                }
            }
        }

        // 3\. Clear
        else if(nChoice == 3){
            cout << "Are you sure? (y/n) ";
            cin >> cChoice;
            if(cChoice == 'y'){
                gameTitles.clear();
            }
        } else {
            cout << "\nInvalid Choice, Please try again.\n";
        }

        // -Clean
        system("PAUSE");
        system("cls");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T20:16:24.917

其实有两个问题：

1.  如果输入错误，为什么我的输入会卡住？您需要使用类似的东西来验证您的输入是否成功`if (std::cin >> nChoice) { /* actual processing */ }`。请注意，`nChoice`当输入失败时， 的值不会改变。如果输入失败，您需要进行一些错误恢复：流已进入失败状态（即，在错误标志中设置）并且在它被编辑`std::ios_base::failbit`之前不会拒绝做任何进一步的输入。`clear()`这仍然会在输入中留下您可能想要的违规字符`ignore()`。
2.  为什么循环使用`erase()`不当行为？当您实际执行`erase()`一个值时，您不想在循环结束时再次增加迭代器。如果这样做，它很可能会将迭代器移到末尾，从而导致未定义的行为。也就是说，循环应该是这样的：

    ```
    for(iter = gameTitles.begin(); iter!=gameTitles.end(); ) {
        if (*iter == sInput) {
             cout << "erased";
             iter = gameTitles.erase(iter);
        }
        else {
            ++iter;
        }
    } 
    ```

    当然，相同逻辑的简短版本是这样的：

    ```
    gamesTitles.erase(std::remove(gamesTitles.begin(), games.Titles.end(),
                                  sInput),
                      games.Titles.end()); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T20:14:47.410

我认为您弄错了，`iterator`从容器的方法返回`erase`的值永远不会指向从该容器中删除的值，假设是这样：

```
std::vector<std::string> v;
// push some items to v
v.push_back( "1" );
v.push_back( "2" );
v.push_back( "3" );
auto i = v.erase( v.end() - 1 );
// Now i point to end of v and you can't derefrence it 
```

相反，它指向您`vector`之前包含您的值的位置：

```
auto i = v.erase( v.begin() );
assert( *i == "2" ); 
```

# sqlite - Qt：如何连接到 SQLite？

> ID：13112478
> 
> 赞同：3
> 
> 时间：2012-10-28T20:01:13.847
> 
> 标签：sqlite, qt

我安装了 SQLite3（解压到 c:/sqlite），创建了一个数据库（c:/sqlite/mzsales）。现在我试图在 QTableView 中显示它的内容。

```
QSqlDatabase db = QSqlDatabase::addDatabase("QSQLITE");
db.setHostName("localhost");
db.setDatabaseName("mzsales");
bool db_ok = db.open(); 
```

db_ok 是真的。然后

```
QSqlTableModel *model = new QSqlTableModel(0, db);
model->setTable("person");
model->setEditStrategy(QSqlTableModel::OnManualSubmit);
bool tbl_ok = model->select(); 
```

tbl_ok 是假的。

我做错了什么？我如何连接到数据库？谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-28T20:36:54.770

得到了答案。这里是：

```
QSqlDatabase db = QSqlDatabase::addDatabase("QSQLITE");
db.setDatabaseName("C:\\sqlite\\mzsales");
bool db_ok = db.open(); 
```

无需连接，只需指定路径即可。

# image - 将随机图像保存并加载到隔离存储

> ID：13112482
> 
> 赞同：0
> 
> 时间：2012-10-28T20:01:28.023
> 
> 标签：image, windows-phone-7, isolatedstorage

我在我的项目中添加了一些图片（png），并在 stackpanel 加载了一个随机图像。我想将该图像保存到独立存储并从中加载，但是我如何保存随机图像？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T07:58:03.257

使用此代码将图像字节流保存到 IS：

```
 using (IsolatedStorageFileStream fileStream = new IsolatedStorageFileStream(tempJPEG, FileMode.Create, myIsolatedStorage))
            {
                using (BinaryWriter writer = new BinaryWriter(fileStream))
                {
                    Stream resourceStream = new MemoryStream(imageData); //Byte[] imageData
                    long length = resourceStream.Length;
                    byte[] buffer = new byte[32];
                    int readCount = 0;

                    using (resourceStream)
                    {   
                        resourceStream.Seek(0, SeekOrigin.Begin);

                        // Read file in chunks in order to reduce memory consumption and increase performance
                        while (readCount < length)
                        {
                            int actual = resourceStream.Read(buffer, 0, buffer.Length);
                            readCount += actual;
                            writer.Write(buffer, 0, actual);
                        }
                    }
                }

                fileStream.Close();
            } 
```

# neo4j - 为什么在使用 cypher 时使用 Neo4j::Rails::Model 时这个 Neo4j.query 不返回结果？

> ID：13112484
> 
> 赞同：0
> 
> 时间：2012-10-28T20:01:40.673
> 
> 标签：neo4j

我正在尝试使用 Neo4j::Rails::Models 对 Neo4j.rb 做一个简单的测试，即标记单个事物，然后执行查询以使用该标记再​​次找到该事物。

所以数据本质上是这样的，只有一个标签和一个东西：

（标签）-标签->（事物）

当我使用我的脚本运行查询时，我没有得到任何结果，但如果我使用 neo4j 附带的 webadmin 控制台运行等效查询，我会得到执行结果。

我只是不知道我做错了什么，但我认为这一定是我使用 Neo4j.query 块的方式。

这是我从控制台运行的，它给出了正确的结果。

```
neo4j-sh (0)$ START tag=node:Tag_exact(text='tag') MATCH tag-[:tags]->thing RETURN thing;

==> +------------------------------------------+
==> | thing                                    |
==> +------------------------------------------+
==> | Node[1]{name:"thing",_classname:"Thing"} |
==> +------------------------------------------+
==> 1 row
==> 197 ms
==> 
neo4j-sh (0)$ 
```

这是提供等效密码查询但不返回任何结果的测试脚本。

```
require 'rubygems'
require 'neo4j'
require 'fileutils'

# Create a new database each time
Neo4j::Config[:storage_path] = "test_neo"
FileUtils.rm_rf(Neo4j::Config[:storage_path])

# Models
class Tag < Neo4j::Rails::Model
    property :text, :index => :exact
end

class Thing < Neo4j::Rails::Model
    property :name
end

# Data
thing = Thing.new(:name => "thing")
thing.save

tag = Tag.new(:text => "tag")
tag.outgoing(:tags) << thing
tag.save

# Query
puts Neo4j::Cypher.query {
  lookup("Tag_exact", "text", "tag").outgoing(:tags).as(:thing)
}.to_s # START v1=node:Tag_exact(text="tag") MATCH (v1)-[:`tags`]->(thing) RETURN thing

results = Neo4j.query do
  lookup("Tag_exact", "text", "tag").outgoing(:tags).as(:thing)
end 

results.each do |result|
  p result["thing"]
end # nil, I want to get the name of thing back here 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T14:20:23.503

在倒数第二行中，使用符号而不是字符串来访问查询结果。

```
result.each do |result|
  p result[:thing]
end 
```

要知道返回了哪些列，请使用该`columns`方法，例如：

```
puts Neo4j.query { node(tag_id).outgoing(:tags).as(:thing) }.columns 
```

顺便说一句，请记住密码查询结果只能遍历一次。

# java - WebSphere: boundedbuffer.waitGet_ is using up most of the CPU

> ID：13112485
> 
> 赞同：2
> 
> 时间：2012-10-28T20:01:42.863
> 
> 标签：java, websphere

I used jvisualVM on some WAS 7.0.0.19 programs - and sampled the CPU. It appears that a huge chunk of it goes to boundedbuffer.waitGet_().

Can you explain if this is normal?

Thank you.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T20:06:59.217

是的，这实际上（有点）正常。这些计时是由处于以下状态的线程引起的：

```
"Deferrable Alarm : 0" - Thread t@35
   java.lang.Thread.State: TIMED_WAITING
        at java.lang.Object.wait(Native Method)
        - waiting on <6bc66bc6> (a com.ibm.ws.util.BoundedBuffer$GetQueueLock)
        at java.lang.Object.wait(Object.java:196)
        at com.ibm.ws.util.BoundedBuffer.waitGet_(BoundedBuffer.java:187)
        - locked <6bc66bc6> (a com.ibm.ws.util.BoundedBuffer$GetQueueLock)
        at com.ibm.ws.util.BoundedBuffer.poll(BoundedBuffer.java:609)
        at com.ibm.ws.util.ThreadPool.getTask(ThreadPool.java:899)
        at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1653) 
```

这些只是空闲并等待新任务的工作线程。它们不消耗任何 CPU 时间。出于某种原因，VisualVM 在分析数据中包含处于这种状态的线程，而不是仅仅忽略它们（就像其他等待线程一样）。

如果您查看 VisualVM 显示的数据，您可能还会注意到处于这种状态的线程只对“自时间”值有贡献，而对“自时间 (CPU)”没有贡献。如果您按“自用时间 (CPU)”排序，您实际上可以更真实地了解 WebSphere 进程的 CPU 使用情况。

# javascript - HTML5 FileReader: Could not convert JavaScript argument

> ID：13112488
> 
> 赞同：0
> 
> 时间：2012-10-28T20:02:01.343
> 
> 标签：javascript, html, firefox, filereader

I got a strange error while trying to read a local file with `FileReader` (I am using Firefox 16.0.2):

```
[20:57:48.440] reader = new FileReader()
[20:57:48.453] [object FileReader]
--
[20:58:15.104] reader.onload= function(evt) {alert('ok');}
[20:58:15.114] (function (evt) {alert("ok");})
--
[20:58:32.162] reader.readAsText('test.txt');
[20:58:32.170] [Exception... "Could not convert JavaScript argument arg 0 [nsIDOMFileReader.readAsText]"  nsresult: "0x80570009 (NS_ERROR_XPC_BAD_CONVERT_JS)"  location: "JS frame :: Web Console :: <TOP_LEVEL> :: line 1"  data: no] 
```

Any ideas of how to fix it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T20:30:55.393

FileReader 采用 File 或 Blob 参数。不是某种类似于文件名的字符串。文件来自输入类型=文件的拖放操作。

有关更多详细信息，请参阅此[html5rocks](http://www.html5rocks.com/en/tutorials/file/dndfiles/)文章或以下代码以读取图像。

```
$(function () {
        if (Modernizr.draganddrop) {
            var dropTarget = $('#dropTarget').get(0);

            dropTarget.addEventListener('dragover', function (e) {
                e.preventDefault();
            });

            dropTarget.addEventListener('drop', function (e) {
                e.preventDefault();

                if (e.dataTransfer.files === undefined) {
                    // IE doesn't support file drops yet.
                    $('#dropTarget').text('Drag & Drop of files is not supported');
                    return;
                }

                $.each(e.dataTransfer.files, function () {
                    var file = this;
                    var reader = new FileReader();
                    reader.onload = function () {
                        $('<img>')
                            .attr('title', file.name)
                            .attr('src', this.result)
                            .css('width', '75%')
                            .appendTo('#images');
                    };
                    reader.readAsDataURL(file);
                });
            });
        }
        else {
            $('#dropTarget').text('Drag & Drop is not supported');
        }
    }); 
```

# networking - SQL Server 2012 connection issues in Visual Studio 2012 Server Explorer

> ID：13112497
> 
> 赞同：0
> 
> 时间：2012-10-28T20:03:21.170
> 
> 标签：networking, windows-8, visual-studio-2012, sql-server-2012, remote-connection

I am trying to connect to SQL Server 2012 installed on Windows Server 2012 through Visual Studio 2012 but keep getting an error 25 connection string is not valid message when trying to connect through server explorer.

As far as I am aware it is sharing the same IP address as the main server. I am not connected to the domain but have checked that remote connections are enabled and port 1433\. I can also connect to the main server.

I am new to SQL Server so any advice is greatly appreciated. Thanks

![enter image description here](../Images/29ceb72ed4c37fe6e1d3e9635d76eb32.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T20:11:54.493

您必须具有正确的连接字符串。我在 C# 中显示代码：

```
string con = @"Data Source=.\SQLEXPRESS;AttachDbFilename='c:\users\pc\documents\visual studio 2010\Projects\WindowsFormsApplication1\WindowsFormsApplication1\Database1.mdf';Integrated Security=True;User Instance=True";
        SqlConnection concect = new SqlConnection(con); 
```

数据连接字符串位于连接字符串中的`yourdatabase.mdf`文件中。您将在视觉工作室中看到这一点。

更新 ：

在服务器资源管理器中右键单击数据连接，然后选择添加连接。然后在服务器名称中选择 Microsoft SQL Server 使用“。” 为您的服务器名称。然后您可以选择您的数据库，也可以附加您的数据库文件。

# java - Handle a POST request and write response to client socket

> ID：13112505
> 
> 赞同：0
> 
> 时间：2012-10-28T20:04:25.433
> 
> 标签：java, http, sockets, tcp, network-programming

I am trying to implement a proxy server.

I referred to the information in [this blog](http://blog.edendekker.me/a-java-proxy-server-with-caching-and-validation/).

1.  The method handles GET request but doesn't handle some websites like www.facebook.com (a GET request). What could be the issue.

2.  The method doesn't handle a POST request. How is handling a POST request and writing the response to client socket differ from handling a GET request.

Any pointers or reference links would be helpful.

# vb.net - Progress bar sincronizing in VB

> ID：13112511
> 
> 赞同：2
> 
> 时间：2012-10-28T20:04:51.713
> 
> 标签：vb.net, process, progress-bar

Is it possible sincronize the progress bar with the behaviour of one specific process, to have an idea of the remaning time to the end of that process?

For example I have found only this code, but it is useless because the process (that I launch with the button) finish before that the progress bar arrive to the max.

* * *

Button event:

```
Timer1.enabled = true 
```

* * *

```
If ProgressBar1.Value < 100 Then
           ProgressBar1.Value += 1
       ElseIf ProgressBar1.Value = ProgressBar1.Maximum Then
           Timer1.Stop()
           MsgBox("finish")
       End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T20:23:28.873

如果您没有合理的方法来估计流程将花费多长时间，并且当流程本身不提供进度指示时您很少这样做，那么您就无法合理地显示准确的进度指示**。**

所以不要尝试，将控件的Style属性设置为Marquee。启动过程时使其可见，完成后将其隐藏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T20:23:51.010

在显示进度时，使用计时器并不是最好的解决方案。执行时间可能因机器而异。

您应该找到一种`ProgressBar1`从流程中更新的方法。

# java - Integrate Applet to Spring web application

> ID：13112512
> 
> 赞同：1
> 
> 时间：2012-10-28T20:04:57.000
> 
> 标签：java, spring, web, applet

sorry about my english.

I have a problem and i cant find any solution. I have a spring web application and im trying integrate an applet to a jsp page.

Here is the code where i call the applet.

```
 <object type="application/x-java-applet;version=1.6" width="200" height="200" title="Java"><param name="code" value="cl.facele.sign.applet.WebSignApplet.class">
    <param name="archive" value="/frontend-1.4/lib/fea-signer-0.94.jar, /frontend-1.4/lib/httpcore-4.0.1.jar, /frontend-1.4/lib/httpmime-4.0.jar, /frontend-1.4/lib/apache-mime4j-0.6.jar, /frontend-1.4/lib/commons-codec-1.3.jar, /frontend-1.4/lib/httpclient-4.0.jar, /frontend-1.4/lib/commons-logging-1.1.1.jar"><param name="XML_IDS" value="{xmlIds}">
    <param name="DOCS_IDS" value="{docsIds}"><param name="WS_URL_SERVER" value="http://localhost:8080/efactoryapp">
    <param name="WS_GET_DOC_METHOD" value="/services.htm?faction=getDocument&amp;id=">
    <param name="WS_POST_DOC_METHOD" value="/services.htm?        faction=addDocumentDeclarado">
    <param name="urlRefreshTarget" value="">Para utilizar la componente de firma electrónica debe instalar plugin <a href="http://java.sun.com/update/1.6.0/jinstall-6u22-windows-i586.cab">Java v.1.6</a>
    </object> 
```

When the jsp page is loaded the JVM console show me this error.

```
 java.lang.ClassFormatError: Incompatible magic value 218762506 in class file cl/facele/sign/applet/WebSignApplet
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClassCond(Unknown Source)
at java.lang.ClassLoader.defineClass(Unknown Source)
at java.security.SecureClassLoader.defineClass(Unknown Source)
at sun.plugin2.applet.Applet2ClassLoader.findClass(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass0(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadCode(Unknown Source)
at sun.plugin2.applet.Plugin2Manager.createApplet(Unknown Source)
at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)
at java.lang.Thread.run(Unknown Source)
    Excepción: java.lang.ClassFormatError: Incompatible magic value 218762506 in class file cl/facele/sign/applet/WebSignApplet
    java.lang.ClassFormatError: Incompatible magic value 218762506 in class file         cl/facele/sign/applet/WebSignApplet
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClassCond(Unknown Source)
at java.lang.ClassLoader.defineClass(Unknown Source)
at java.security.SecureClassLoader.defineClass(Unknown Source)
at sun.plugin2.applet.Applet2ClassLoader.findClass(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass0(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadCode(Unknown Source)
at sun.plugin2.applet.Plugin2Manager.createApplet(Unknown Source)
at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)
at java.lang.Thread.run(Unknown Source)
    Excepción: java.lang.ClassFormatError: Incompatible magic value 218762506 in class file cl/facele/sign/applet/WebSignApplet 
```

Thank you for any help!

UPDATE:

If this help, im implementing my application and my applet with eclipse and tomcat.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T20:22:09.373

The most likely cause is that your web application is not actually serving the jar files as you think it is. Try hitting those urls with your web browser, or curl, or wget, and see what you get. I'm guessing that the result is an html-formatted error message, not the jar file.

There's a full explanation [here](http://mindprod.com/jgloss/runerrormessages.html#BADMAGICNUMBER)

The other, less likely possibility is that the applet was compiled with a much later version of the Java vm than the one that's trying to run it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-17T07:10:33.473

> 这应该是缓存和编译问题

尝试从 applet java 控制台清理所有 applet 临时文件，重新编译并生成新的 jar，这应该可以解决。我遇到了同样的问题，我使用重新编译、生成 jar 并使用 jarsigner 对其进行签名解决了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-21T11:24:08.180

如果您将 Java 报告的魔法值 (218762506) 转换为二进制，则可以帮助您确定返回的文件类型。在这种情况下：

```
0000 1101 = 13 - Carriage Return
0000 1010 = 10 - New Line
0000 1101 = 13 - Carriage Return
0000 1010 = 10 - New Line 
```

可能是文本文件的开头，甚至可能是 HTML，开头有几行空。

如果您能够通过将浏览器直接指向标签中指定的文件来成功下载 jar，那么可能是在幕后发生了重定向，导致 JVM 跳闸。如果可能，请尝试使用绝对 URL，至少对其进行测试。

# asp.net-mvc - MVC4 jQuery UI 不起作用

> ID：13112519
> 
> 赞同：3
> 
> 时间：2012-10-28T20:05:34.607
> 
> 标签：asp.net-mvc, jquery-ui, asp.net-mvc-4, jquery-ui-datepicker

我无法让 jQuery UI 在我的 ASP.NET MVC4 应用程序中工作。我尝试了对话框和日期选择器。这是我观点的部分代码。

```
<link href="../../Content/themes/base/jquery.ui.all.css" rel="stylesheet" type="text/css" />
<script src="../../Scripts/jquery-1.5.1.min.js" type="text/javascript"></script>
<script src="../../Scripts/jquery-ui-1.8.11.min.js" type="text/javascript"></script>
<script language="javascript" type="text/javascript">
$(document).ready(function () {
    alert('A');
    //$('#datepicker').val('test');
    $('#datepicker').datepicker();
    alert('B');
});
</script>
<h1>Test</h1>
<form id="testForm" action="#" method="get">
    <input type="text" id="datepicker" name="datepicker" class="datepicker" />
</form> 
```

显示警报 A。当我取消注释下一行时，将分配值测试。但是 datepicker 不工作并且不显示警报 B。

谢谢，彼得

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-01T15:13:55.360

在 layout.cshtml 视图中，移动

```
@Scripts.Render("~/bundles/jquery") 
```

从身体到头部并添加头部

```
@Scripts.Render("~/bundles/jqueryui") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T13:00:51.480

我花了很多时间来弄清楚如何让它工作。

最后步骤如下：

1.  创建 ASP .NET MVC4 项目 Internet 应用程序。

2.  清理最后几行，`_Layout.cshtml`使其看起来像这样

    ```
    <footer>
            <div class="content-wrapper">
                <div class="float-left">
                    <p>&copy; @DateTime.Now.Year - My ASP.NET MVC Application</p>
                </div>
            </div>
        </footer>

        @RenderSection("scripts", required: false) 
    ```

3.  像我在这里所做的那样更改标题

> ```
>  <head>
>         <meta charset="utf-8" />
>         <title>@ViewBag.Title - My ASP.NET MVC Application</title>
>         <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
>         <meta name="viewport" content="width=device-width" />
>         @Styles.Render("~/Content/css")
>         @Styles.Render("~/Content/themes/base/css")
>         @Scripts.Render("~/bundles/jquery")
>         @Scripts.Render("~/bundles/jqueryui")
>         @Scripts.Render("~/bundles/modernizr")
>         <script type="text/javascript">
>             $(document).ready(function () {
>                 // We will test DataPicker
>                 $('#datep').datepicker();
>                 // We will test TABS
>                 $(function () {
>                     $("#tabs").tabs();
>                 });
>             });
>         </script>
>     </head> 
> ```

4.  删除部分后的所有代码`@section featured {`并添加一些html到`Home/Index.cshtml`

    A.从[http://jqueryui.com/tabs/页面的](http://jqueryui.com/tabs/)***查看源***链接 放一些代码（在里面）`< div id="tabs" > ... < div >`

    B. 添加这个

> <div> 日期：<input id="datep" type="text" /></div>

完毕！！！

![在此处输入图像描述](../Images/f9c56d40aee6a2e965cd404371f42178.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-28T20:52:39.873

您的代码在小提琴中运行得很好：http: [//jsfiddle.net/m3QFL/](http://jsfiddle.net/m3QFL/)

检查控制台是否有错误以及脚本的路径。Chrome 包含一个控制台来帮助进行 js 调试，或者您可以运行 FireFox 和[FireBug](http://getfirebug.com/)。

任何一个都可以帮助您解决此类问题。

此外，jquery 和 jquery ui 的托管版本可通过 jquery 和 jquery ui 或 Google 获得。这是你的：

`<script src="//ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>`

`<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.8.11/jquery-ui.min.js"></script>`

[jquery ui](http://api.jqueryui.com/)在其主页底部有指向其托管版本的链接。

顺便说一句，`//`而不是`http://`允许脚本`http`从站点中获取前缀。如果您在 ssl 上，它会拾取，`https://`因此您的页面上没有安全和非安全项目。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-09T02:56:04.337

您需要在 _Layout.cshtml 中添加几行，以使 jQuery UI 开箱即用。首先是 javascript 包：

```
@*you should already have this line*@
@Scripts.Render("~/bundles/jquery")

@*add this line*@
@Scripts.Render("~/bundles/jqueryui") 
```

接下来，您还需要 jQuery UI 的 CSS：

```
@*you should already have this line*@
@Styles.Render("~/Content/css")

@*add this line*@
@Styles.Render("~/Content/themes/base/css") 
```

# python - Importing scrapy.conf.settings generates error

> ID：13112520
> 
> 赞同：1
> 
> 时间：2012-10-28T20:06:00.080
> 
> 标签：python, scrapy, web-crawler

Using scrapy version 0.16\. Trying to create a standalone spider runnable from a script as per [this gist](https://gist.github.com/484009). Importing the above generates this:

```
 Traceback (most recent call last):
  File "./spiderctl.py", line 8, in <module>
    from scrapy.conf import settings
  File "/usr/local/lib/python2.6/dist-packages/scrapy/conf.py", line 4, in <module>
    from scrapy.project import crawler
ImportError: cannot import name crawler 
```

The file conf.py contains the line:

```
from scrapy.project import crawler 
```

But the file scrapy.project is only a comment that the module is deprecated and users should instead implement the from_crawler class method. How do I implement this in the context of the code above?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:08:55.610

[您可以在这个新的常见问题解答](http://doc.scrapy.org/en/latest/faq.html#i-m-getting-an-error-cannot-import-name-crawler)中找到这个问题的答案：

基本上，您需要以不同的方式访问爬虫，使用`from_crawler`类方法而不是`crawler`从`scrapy.project`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T19:35:26.163

我认为您是旧版本的`scrapy`闲逛，因为最新版本没有您提到的那一行：

[https://github.com/scrapy/scrapy/blob/master/scrapy/conf.py](https://github.com/scrapy/scrapy/blob/master/scrapy/conf.py)

更新：

好吧，它就在那里：[https ://github.com/scrapy/scrapy/commit/e8e5a62c20b3d217cc55038f30e495ca183bbba7#L1R0](https://github.com/scrapy/scrapy/commit/e8e5a62c20b3d217cc55038f30e495ca183bbba7#L1R0)

尝试安装最新版本，看看它是否有效：

```
python setup.py install 
```

# c# - 时间：2019-01-01 标签：c#add checkboxes to panle wierd behavior

> ID：13112521
> 
> 赞同：0
> 
> 时间：2012-10-28T20:06:01.070
> 
> 标签：c#, winforms

我得到了一个从 Panle 驱动的名为 AdvancePanle 的类，我得到了一个从 CheckBox 驱动的名为 AdvnaceCheckBox 的类。

我在我的表单中创建了一个 AdvancePanle，现在我想向它添加一些 AdvnaceCheckBox。所以我创建了这个，简单的方法：

```
 private void addCheckBox()
    {
        AdvancedCheckBox checkbox;
        for (int i = 0; i < 10; i++)
        {
            checkbox = new AdvancedCheckBox();
            checkbox.Location = new Point(0, i + 5);
            checkbox.Text = "bla" + i;
            selectablePanel1.Controls.Add(checkbox);
        }
    } 
```

我在表单 onLoad 中调用此方法：

```
 protected override void OnLoad(EventArgs e)
        {
            addCheckBox();
            selectablePanel1.AutoScroll = true;

            base.OnLoad(e);
        } 
```

但是打开表单后，我只能在 Panle 中看到 1 个 CheckBox。我试着玩这个位置，但我总是只看到 1 个复选框。

我是否以一种磨损的方式添加复选框？

（对不起我的英语不好）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T20:45:59.937

你把它们放得太近了。`(0, 5+i)`将评估为：

```
(0,5)
(0,6)
(0,7)
(0,8)
... 
```

试试这个：

```
checkbox.Location = new Point(0, i*100 + 5); 
```

或这个：

```
checkbox.Location = new Point(0, i*checkbox.Height + 5); 
```

# python - Python performance issues

> ID：13112527
> 
> 赞同：0
> 
> 时间：2012-10-28T20:06:27.180
> 
> 标签：python, performance

I built a simple gravity simulation shown here:

![enter image description here](../Images/4ebe179687d7065a50b9afe27f68b24c.png)

At first, I used a variable timestep, by calculating how much it takes for one update, and applying that to the next one - standard stuff.

However, this method reduces determinism, and results can vary from simulation to simulation - something I definitely do not want.

I figured that I should use a fixed time step (10 seconds), but then I noticed that the simulation would speed up and down in regular intervals (of around 1 second).

Why is that happening? Does it have to do anything with Python itself?

# The code

The main loop:

```
while run:
    uni.update(10)

    for event in pygame.event.get():
        if event.type == QUIT:
            run = False 
```

The update method:

```
def update (self, dt):
    self.time += dt

    for b1, b2 in combinations(self.bodies.values(), 2):
        fg = self.Fg(b1, b2)

        if b1.position.x > b2.position.x:
            b1.force.x -= fg.x
            b2.force.x += fg.x
        else:
            b1.force.x += fg.x
            b2.force.x -= fg.x

        if b1.position.y > b2.position.y:
            b1.force.y -= fg.y
            b2.force.y += fg.y
        else:
            b1.force.y += fg.y
            b2.force.y -= fg.y

    for b in self.bodies.itervalues():
        ax = b.force.x/b.m
        ay = b.force.y/b.m

        b.position.x += b.velocity.x*dt
        b.position.y += b.velocity.y*dt

        nvx = ax*dt
        nvy = ay*dt

        b.position.x += 0.5*nvx*dt
        b.position.y += 0.5*nvy*dt

        b.velocity.x += nvx
        b.velocity.y += nvy

        b.force.x = 0
        b.force.y = 0 
```

# c# - 在 SQL 表中创建新行时如何自动获取日期？

> ID：13112528
> 
> 赞同：2
> 
> 时间：2012-10-28T20:06:32.763
> 
> 标签：c#, sql, date, row, sqldatatypes

我在学校做一个项目，我必须为销售人员创建一个网站工具来填写他们白天所做的事情，即报价金额、报价金额、订单、订单金额等。我使用的是 Visual Studio 2010，ASP。 NET 与 C# 和 SQL 数据库。

我必须创建一个包含不同列的表，我知道如何。但我需要的是有一个名为的列`Date`，它具有 datatype `date`。我需要它自动填写，而无需手动输入。添加新信息的同一日期。我已经在谷歌和其他地方搜索过解决方案，但我认为我搜索的关键字错误，希望你能帮助我。

我希望日期的格式是`DD-MM-YYYY`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T20:10:22.087

当您在 Google 上查找*SQL 默认日期时，您得到的第二个结果是*[这个](http://www.w3schools.com/sql/sql_default.asp)。

在那里，您有一个默认日期示例：

```
CREATE TABLE Orders
(
O_Id int NOT NULL,
OrderNo int NOT NULL,
P_Id int,
OrderDate date DEFAULT GETDATE()
) 
```

使用**DEFAULT**关键字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T20:11:15.853

在数据库中创建一个 sql 日期时间列，并根据您的需要指定 GetDate() 或 GetUtcDate() 的默认值。格式与输入端无关；您将不得不在选择端（或在您的 C# 代码中）使用格式化程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T20:12:46.897

您可以将列的默认值设置为当前日期时间。

```
 create table tblname (
    fieldname datetime default getdate()
    ) 
```

另请参阅此问题 [Add default value of datetime field in SQL Server to a timestamp](https://stackoverflow.com/questions/4888277/add-default-value-of-datetime-field-in-sql-server-to-a-timestamp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T20:13:52.420

您可以使用其中之一来插入表中。

*   `String s = System.DateTime.Now.ToString("dd.MM.yyyy");`
*   `DateTime now = System.DateTime.Now;`

第二个是您的选择，因为您的表中指定的类型是日期。如果不想从应用程序设置它，请指定您使用哪个数据库来获得特定答案。

# erlang - 与两个进程共享 ETS 表？

> ID：13112532
> 
> 赞同：5
> 
> 时间：2012-10-28T20:06:54.027
> 
> 标签：erlang, ets

我在一个进程中创建 ETS 表，我想在另一个进程中使用它。我如何在第二个过程中“打开”ETS 表？在手册页中找不到好的功能。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-28T21:02:55.670

您必须使用“named_table”和“public”选项创建 ets 表。

像

```
T = ets:new(yourtablename,[public,named_table]). 
```

在这种情况下，其他本地进程可以通过名称“yourtablename”使用此表。无需在其他进程中显式打开此表。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-29T18:06:56.830

如果您不希望您的表具有唯一的名称，您可以省略`named_table`并只使用`public`. 然后`ets:new`将返回一个整数，您需要将其传递给需要访问表的进程：

```
-module(foo).
-compile(export_all).

create_the_table(Pid) ->
    Table = ets:new(mytable, [public]),
    ets:insert(Table, {foo, bar}),
    Pid ! {the_table_is, Table},
    timer:sleep(infinity).

use_the_table() ->
    receive {the_table_is, Table} -> ok end,
    io:format("~p~n", [ets:lookup(Table, foo)]). 
```

从外壳尝试：

```
2> c(foo).
{ok,foo}
3> Pid1 = spawn(foo, use_the_table, []).
<0.43.0>
4> spawn(foo, create_the_table, [Pid1]).
[{foo,bar}]
<0.45.0> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-26T10:21:00.747

正如 Odobenus 和 legoscia 所说，您可以通过名称（使其命名为 named_table）或标识符（将标识符传递给其他进程）访问 ets 表，并将表公开。

是否从另一个模块访问它没有区别。

确保执行 ets:info 时，表已经创建（由其他进程）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-24T05:23:58.990

`new(Name, Options) -> tid() | atom()`在[这里](http://www.erlang.org/doc/man/ets.html#new-2)

> 创建一个新表并返回一个可用于后续操作的表标识符。可以将表标识符发送给其他进程，以便可以在节点内的不同进程之间共享表。
> 
> public 任何进程都可以读取或写入表。
> 
> protected 所有者进程可以对表进行读写。其他进程只能读取该表。这是访问权限的默认设置。
> 
> private 只有所有者进程可以读取或写入表。

# c - How values are evaluated in this expression in GCC

> ID：13112534
> 
> 赞同：1
> 
> 时间：2012-10-28T20:07:00.087
> 
> 标签：c, gcc, operator-precedence

> **Possible Duplicate:**
> [Could anyone explain these undefined behaviors (i = i++ + ++i , i = i++, etc…)](https://stackoverflow.com/questions/949433/could-anyone-explain-these-undefined-behaviors-i-i-i-i-i-etc)

I have an expression in a program, initial value of `i = 10`

```
int j = i++ + i++; 
```

it sets `j as 20` but

```
int j = i++ + ++i; 
```

it sets `j as 22`
Why is there a difference of two between statements? I think, difference should be of 1.
I know this is undefined in C, but why `GCC` is doing such things?

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-28T20:12:34.120

对于 i++，它就像：首先做方程，然后增加 i。

对于 ++ i 就像：首先增加 i 然后做方程。

所以我猜 i++ + ++i 被解释为 i + (++(++i)) 所以结果是 22。

有线的事情发生在有线的语法上，只是不要做这样的事情；）。

如果我是对的 ++i + ++i 也将是 22。

# regex - 是否有能够解析匹配符号的正则表达式？

> ID：13112537
> 
> 赞同：1
> 
> 时间：2012-10-28T20:07:33.447
> 
> 标签：regex, string, parsing

这个正则表达式

```
/\(.*\)/ 
```

不会匹配匹配的括号，而是字符串中的最后一个括号。是否有正则表达式扩展或类似的东西，具有允许这样做的适当语法？例如：

```
there are (many (things (on) the)) box (except (carrots (and apples))) 
```

`/OPEN(.*CLOSE)/`应该匹配`(many (things (on) the))`

括号可能有无限的层次。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-28T20:13:28.683

如果你只有一层括号，那么有两种可能性。

**选项 1：**使用不贪婪的重复：

```
/\(.*?\)/ 
```

当它遇到第一个`)`.

**选项 2：**使用否定字符类

```
/\([^)]*\)/ 
```

这只能重复不是 的字符`)`，因此它必然永远不会超过第一个右括号。由于性能原因，通常首选此选项。此外，这个选项更容易扩展以允许转义括号（这样你就可以匹配这个完整的字符串：`(some\)thing)`而不是扔掉`thing)`）。但这可能很少需要。

但是，如果你想要嵌套结构，这对于正则表达式来说通常太复杂了（尽管 PCRE 等一些风格支持递归模式）。在这种情况下，您应该自己遍历字符串并计算括号，以跟踪您当前的嵌套级别。

就像关于这些递归模式的旁注一样：在 PCRE`(?R)`中只表示整个模式，因此将其插入某处会使整个事物递归。但是括号的每个内容必须与整个匹配具有相同的结构。此外，实际上不可能用它来进行有意义的一步替换，以及在多个嵌套级别上使用捕获组。总而言之 - 你最好不要对嵌套结构使用正则表达式。

**更新：**由于您似乎渴望找到一个正则表达式解决方案，以下是您如何使用 PCRE 匹配您的示例（PHP 中的示例实现）：

```
$str = 'there are (many (things (on) the)) box (except (carrots (and apples)))';
preg_match_all('/\([^()]*(?:(?R)[^()]*)*\)/', $str, $matches);
print_r($matches); 
```

结果是

```
Array
(
    [0] => Array
        (
            [0] => (many (things (on) the))
            [1] => (except (carrots (and apples)))
        )   
) 
```

模式的作用：

```
\(      # opening bracket
[^()]*  # arbitrarily many non-bracket characters
(?:     # start a non-capturing group for later repetition
(?R)    # recursion! (match any nested brackets)
[^()]*  # arbitrarily many non-bracket characters
)*      # close the group and repeat it arbitrarily many times
\)      # closing bracket 
```

这允许无限嵌套级别以及无限并行级别。

请注意，不可能将所有嵌套级别作为单独的捕获组。您将始终只获得最内层或最外层的组。此外，像这样进行递归替换是不可能的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T20:14:29.947

正则表达式不足以找到匹配的括号，因为括号是嵌套结构。但是，有一个简单的算法可以找到匹配的括号，这在[这个答案](https://stackoverflow.com/questions/524548/regular-expression-to-detect-semi-colon-terminated-c-for-while-loops/524624#524624)中有描述。

如果您只是想在表达式中找到第**一个**右括号，则应在正则表达式中使用非贪婪匹配器。在这种情况下，您的正则表达式的非贪婪版本如下：

```
/\(.*?\)/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T20:47:47.527

给定一个包含嵌套匹配括号的字符串，您可以使用这个（非递归 JavaScript）正则表达式匹配最里面的集合：

```
var re = /\([^()]*\)/g; 
```

或者你可以用这个（递归 PHP）正则表达式匹配最外层的集合：

```
$re = '/\((?:[^()]++|(?R))*\)/'; 
```

但是您不能轻松地匹配位于最内层和最外层之间的匹配括号集。

还要注意（天真和经常遇到的）表达式：`/\(.*?\)/`将始终不正确地匹配（既不是最内层也不是最外层匹配集）。

# graph - 查找所有 BFS/DFS 遍历

> ID：13112542
> 
> 赞同：4
> 
> 时间：2012-10-28T20:08:06.897
> 
> 标签：graph, traversal, graph-traversal

给定一个无向循环图，我想通过广度优先搜索或深度优先搜索找到所有可能的遍历。给出一个图作为邻接列表：

```
A-BC
B-A
C-ADE
D-C
E-C 
```

所以来自根 A 的所有 BFS 路径都是：

```
{ABCDE,ABCED,ACBDE,ACBED} 
```

对于 DFS：

```
{ABCDE,ABCED,ACDEB,ACEDB} 
```

我将如何以一种有意义的方式在算法上生成这些遍历？我想可以生成字母的所有排列并检查它们的有效性，但这对我来说似乎是最后的手段。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T20:40:02.307

BFS 应该很简单：每个节点都有一定的深度可以找到它。在您的示例中，您在深度 0 处找到 A，在深度 1 处找到 B 和 C，在深度 2 处找到 E 和 D。在每个 BFS 路径中，您将拥有深度为 0 (A) 的元素作为第一个元素，然后是深度 1（B 和 C）的元素，然后是深度 2（E 和 D）的元素的任何排列，等等...如果您查看示例，您的 4 个 BFS 路径与该模式匹配。A 始终是第一个元素，然后是 BC 或 CB，然后是 DE 或 ED。您可以将其推广到具有更深深度的节点的图。要找到它，您只需要 1 个非常便宜的 Dijkstra 搜索。

在 DFS 中，您没有很好的深度分离，这使得 BFS 变得简单。我没有立即看到与上述算法一样高效的算法。您可以通过遍历图形和回溯来设置图形结构并构建路径。在某些情况下，这不是很有效，但对于您的应用程序来说可能就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T21:14:08.717

除了您实际执行所有可能的 DFS 和 BFS 遍历的明显方式之外，您可以尝试这种方法：

步骤 1\. 在从根 A 开始的 dfs 遍历中，像这样转换当前访问节点的邻接列表： 首先从列表中删除节点的父节点。其次生成调整列表中剩余节点的所有排列。

因此，如果您在来自节点 A 的节点 C，您将执行以下操作：

```
C -> ADE transform into C -> DE transform into C -> [DE, ED] 
```

第 2 步。在第 1 步之后，您有以下转换后的 adj 列表：

```
A -> [CB, BC]
B -> []
C -> [DE, ED]
D -> []
E -> [] 
```

现在您从 (A,0) 开始启动处理，其中对中的第一项是遍历路径，第二项是索引。假设我们有两个队列。一个 BFS 队列和一个 DFS 队列。我们将这对放入两个队列中。

现在我们重复以下操作，首先是一个队列，直到它为空，然后是另一个队列。

我们将第一对从队列中弹出。我们得到 (A,0)。节点 A 映射到 [BC, CB]。所以我们生成了两条新路径（ACB,1）和（ABC,1）。将这些新路径放入队列中。

将其中的第一个从队列中取出以获得 (ACB,1)。索引为 1，因此我们查看路径字符串中的第二个字符。这是 C。节点 C 映射到 [DE, ED]。

*   该路径的 BFS 子节点将是 (ACBDE,2) 和 (ACBED,2)，我们通过**附加**子置换获得。
*   该路径的 DFS 子代将是 (ACDEB,2) 和 (ACEDB,2)，我们通过**将**C 之后的子排列插入到路径字符串中来获得它们。

我们根据我们正在处理的队列生成新路径，基于上述并将它们放入队列中。因此，如果我们正在处理 BFS 队列，我们​​将放入 (ACBDE,2) 和 (ACBED,2)。我们队列的内容现在是：(ABC,1)、(ACBDE,2)、(ACBED,2)。

我们从队列中弹出 (ABC,1)。生成 (ABC,2) 因为 B 没有孩子。并获取队列：(ACBDE,2), (ACBED,2), (ABC,2) 等等。在某些时候，我们最终会得到一堆索引不包含在路径中的对。例如，如果我们得到 (ACBED,5)，我们知道这是一条完成的路径。

# sql-server-2008 - Syntax error in migrating from SQL Server 2008 to MySQL using SSIS

> ID：13112548
> 
> 赞同：0
> 
> 时间：2012-10-28T20:08:37.660
> 
> 标签：sql-server-2008, ssis, data-migration

This is my first SSIS package and I have followed some tutorials and everything looked good until I ran it. I am trying to sync the data from a SQL Server 2008 database to a MySQL database (only 1 table with 2 columns). After running the package I get the following error.

> *[ADO NET Destination [16]] Error: An exception has occurred during data insertion, the message returned from the provider is: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '"UPC", "Model") VALUES (p1, p2)' at line 1*

And on the next line

> [SSIS.Pipeline]
> Error: SSIS Error Code DTS_E_PROCESSINPUTFAILED.
> The ProcessInput method on component "ADO NET Destination" (16) failed with error code 0xC020844B while processing input "ADO NET Destination Input" (19).
> The identified component returned an error from the ProcessInput method. The error is specific to the component, but the error is fatal and will cause the Data Flow task to stop running. There may be error messages posted before this with more information about the failure.

My questions are:

1.  Why I am getting this error ?
2.  How to solve it ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T07:30:30.773

检查有关 ADO.NET 和 MySQL 问题的 MSDN 链接：http: [//blogs.msdn.com/b/mattm/archive/2009/01/07/writing-to-a-mysql-database-from-ssis.aspx](http://blogs.msdn.com/b/mattm/archive/2009/01/07/writing-to-a-mysql-database-from-ssis.aspx)

从 MSDN 文档：

注意，我建议在写入 MySQL 数据库时使用 ODBC 驱动程序，因为 MySQL .NET 连接器有一个额外的阻塞问题。如果你尝试一下，你会得到一个看起来像这样的错误：

```
Error: 2009-01-05 12:03:47.79 
   Code: 0xC020844B 
   Source: Data Flow Task 1 Destination - Query [28] 
   Description: An exception has occurred during data insertion, 
                the message returned from the provider is: 
                You have an error in your SQL syntax; check the manual that corresponds
                to your MySQL server version for the right syntax to use near 
                '"name", "date", "type", "remark") 
                VALUES (p1, p2, p3, p4), (p1,p2,p3,p4), (p1,p2' at line 1 
End Error 
```

请注意，“VALUES”部分具有参数名称，而不是实际值。这似乎是 MySQL 提供程序为其 ParameterMarkerFormat 返回的值的问题。我确实发现了一个针对他们的错误，但看起来他们决定不修复它。我听说 DevArt dotConnect 驱动程序没有这个问题，但我自己无法尝试。

# c# - 使用 Timer 为标签设置动画不起作用

> ID：13112550
> 
> 赞同：1
> 
> 时间：2012-10-28T20:08:43.737
> 
> 标签：c#, timer, label

我正在尝试在进程进行时为标签设置动画。我希望它是这样的（逐帧）：

```
Searching
Searching.
Searching..
Searching...
Searching 
```

等等。我试过这样做：

```
 Timer _animationTimer = new Timer();

    private void StartAnimation()
    {
        myLabel.Text = "Searching";
        _animationTimer.Interval = 250;
        _animationTimer.Tick += new EventHandler(this.AnimationEvent);
        _animationTimer.Start();
    }

    private void StopAnimation()
    {
        _animationTimer.Stop();
    }

    private void AnimationEvent(object sender, EventArgs e)
    {
        if (!myLabel.Text.EndsWith("..."))
        {
            myLabel.Text += ".";
        }
        else
        {
            myLabel.Text = "Searching";
        }
    } 
```

我这样使用它：

```
StartAnimation();
// ... do something.
StopAnimation();
myLabel.Text = "Something"; 
```

但它不起作用。它第一次运行时，动画完美。第二次显示：

```
Searching..
Searching
Searching..
Searching 
```

第三次显示：

```
Searching...
Searching..
Searching.
Searching
Searching... 
```

第四次它根本没有动画。从第五次开始，它会经历这个循环。

这真的很吸引我。有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T20:13:15.227

`StartAnimation()`每次启动时，您都会添加事件处理程序。这将导致您看到的问题。

第二次调用时，`StartAnimation()`您将有两个事件处理程序连接到 Tick 事件。它会每 250 秒调用两次您的代码，而不是一次。所以你看到了模式

```
Searching..
Searching
Searching..
Searching 
```

第三次有*三个*事件处理程序，你得到了模式

```
Searching...
Searching..
Searching.
Searching
Searching... 
```

等等。第四次什么都没有发生，因为它做了四次并返回到原始状态。

你可以移动

```
_animationTimer.Tick += new EventHandler(this.AnimationEvent); 
```

StartAnimation 之外的行 - 或检查它是否为空并仅在第一次添加它。

# asp.net - 默认情况下检查详细信息视图的复选框以插入新记录吗？

> ID：13112551
> 
> 赞同：4
> 
> 时间：2012-10-28T20:08:45.687
> 
> 标签：asp.net, checkbox, detailsview

我正在使用`DetailsView`它的`DefaultMode`：插入，我想让它的**复选框**默认被**选中，用户也可以将它更改为未选中，但绑定复选框我们应该使用**

```
Checked='<%# Bind("Cit_Visible") %>' 
```

这使得复选框的默认状态未被选中，那么我该如何解决呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T04:15:38.503

如果您希望在数据绑定时选中您的复选框，您可以为复选框的文本属性赋值。

```
<asp:CheckBox ID="chl" runat="Server" Checked="true" Text="<%# Bind('Cit_Visible') %>" /> 
```

在后面的代码上，您可以访问文本值以将其保存到 DB

```
 CheckBox MyCheckbox = new CheckBox();
    MyCheckbox = (CheckBox)DetailsView1.FindControl("chl");
    Response.Write(MyCheckbox.Checked); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-07T22:50:56.633

当使用 DetailsView 数据控件并且您有复选框值时，您可能会从处理所有显示模式的 asp:CheckBoxField 开始。如果您想保留复选框绑定，但也将默认设置为选中，您可以执行以下操作。

将字段转换为 TemplateField，可以通过 Visual Studio 的设计视图完成，也可以通过替换这种类型的块手动完成。

```
<asp:CheckBoxField DataField="Information" HeaderText="Information" SortExpression="Information" /> 
```

用这样的代码块

```
<asp:TemplateField HeaderText="Information" SortExpression="Information">
            <EditItemTemplate>
                <asp:CheckBox ID="chkInformation" runat="server" Checked='<%# Bind("Information") %>' />
            </EditItemTemplate>
            <InsertItemTemplate>
                <asp:CheckBox ID="chkInformation" runat="server" Checked='<%# Bind("Information") %>' />
            </InsertItemTemplate>
            <ItemTemplate>
                <asp:CheckBox ID="chkInformation" runat="server" Checked='<%# Bind("Information") %>' Enabled="false" />
            </ItemTemplate>
        </asp:TemplateField> 
```

然后设置要检查的复选框默认值，您可以在代码隐藏中执行此操作

```
Protected Sub dvInformation_PreRender(sender As Object, e As EventArgs) Handles dvInformation.PreRender
    If CType(sender, DetailsView).CurrentMode = DetailsViewMode.Insert Then
        Dim chk As Object = CType(sender, DetailsView).FindControl("chkInformation")
        If chk IsNot Nothing AndAlso chk.GetType Is GetType(CheckBox) Then
            CType(chk, CheckBox).Checked = True
        End If
    End If
End Sub 
```

C#（从 VB 转换而来

```
protected void dvInformation_PreRender(object sender, EventArgs e)
{
        if (((DetailsView)sender).CurrentMode == DetailsViewMode.Insert) {
            object chk = ((DetailsView)sender).FindControl("chkInformation");
            if (chk != null && object.ReferenceEquals(chk.GetType(), typeof(CheckBox))) {
                ((CheckBox)chk).Checked = true;
            }
        }
} 
```

当支持的数据库值是非空位字段时，这显然是最好的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-19T09:55:45.983

使用模板字段：

```
<asp:TemplateField>
    <ItemTemplate>
        <asp:CheckBox ID="chk1" runat="server" OnInit="chk1_Init" Checked='<%# Bind("Cit_Visible") %>' />
    </ItemTemplate>
</asp:TemplateField> 
```

在 Init 方法中设置复选框默认值：

```
protected void chk1_Init(object sender, EventArgs e)
{
    ((CheckBox)sender).Checked = true;
} 
```

# c# - 将参数传递给 ICommand

> ID：13112557
> 
> 赞同：17
> 
> 时间：2012-10-28T20:09:30.270
> 
> 标签：c#, wpf

我有一个简单的按钮，它在执行时使用命令，一切正常，但我想在单击按钮时传递一个文本参数。

我认为我的 XAML 没问题，但我不确定如何编辑我的`RelayCommand`类以接收参数：

```
<Button x:Name="AddCommand" Content="Add" 
    Command="{Binding AddPhoneCommand}"
    CommandParameter="{Binding Text, ElementName=txtAddPhone}" /> 
```

```
public class RelayCommand : ICommand
{
    private readonly Action _handler;
    private bool _isEnabled;

    public RelayCommand(Action handler)
    {
        _handler = handler;
    }

    public bool IsEnabled
    {
        get { return _isEnabled; }
        set
        {
            if (value != _isEnabled)
            {
                _isEnabled = value;
                if (CanExecuteChanged != null)
                {
                    CanExecuteChanged(this, EventArgs.Empty);
                }
            }
        }
    }

    public bool CanExecute(object parameter)
    {
        return IsEnabled;
    }

    public event EventHandler CanExecuteChanged;

    public void Execute(object parameter)
    {
        _handler();
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-28T20:20:00.720

更改`Action`为`Action<T>`使其接受一个参数（可能只是`Action<object>`最简单的）。

```
private readonly Action<object> _handler; 
```

然后只需将参数传递给它：

```
public void Execute(object parameter)
{
    _handler(parameter);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-01-04T00:08:54.517

你可以做

```
public ICommand AddPhoneCommand
{
    get
    {
        return new Command<string>((x) =>
        {
            if(x != null) { AddPhone(x); }
        };
    }
} 
```

然后，当然有你的`AddPhone`：

```
public void AddPhone(string x)
{
    //handle x
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-26T04:04:54.097

您可以简单地执行此操作（无需更改 RelayCommand 或 ICommand）：

```
private RelayCommand _addPhoneCommand;
public RelayCommand AddPhoneCommand
{
    get
    {
        if (_addPhoneCommand == null)
        {
            _addPhoneCommand = new RelayCommand(
                (parameter) => AddPhone(parameter),
                (parameter) => IsValidPhone(parameter)
            );
        }
        return _addPhoneCommand;
    }
}

public void AddPhone(object parameter)
{
    var text = (string)parameter;
    ...
}

public void IsValidPhone(object parameter)
    var text = (string)parameter;
    ...
} 
```

# c# - C# 线程，第一个任务 DoSomething，第二个任务更新 WinFormLabel（实时）？

> ID：13112561
> 
> 赞同：0
> 
> 时间：2012-10-28T20:09:41.730
> 
> 标签：c#, winforms, multithreading, parallel-processing

假设我有任务 1：

```
private void Task1()
{
    //Here is some Code, could be any "longer" Task - 
    //For Example: Grab all words from a .txt File and fill in a List<String>
} 
```

然后我还有另一个任务 2：

```
private void Task2(string word)
{
   //So lets say theres a Label on my WinForm..
   //Now While Task1 is grabbing the words, Task2 should fill a Label 
   //with the added 'word' (parameter) - (Task2 will be called from Task1
} 
```

实际上，我不知道如何使这成为可能，或者最好的方法是什么。在 UI 上，我应该能够看到`Label.Text`变化（每个字）。所以我需要创建第二个线程？我怎么能这样做？也许有人可以帮助我，干杯

**更新：**

我现在用Backgroundworker尝试过，但有些东西似乎是错误的..它实际上不起作用，表单上没有任何反应

代码：

```
public void CreateAndSaveAMatch(DateTime date) //That method is being called several times
{   
    //HERE IS CODE, WHICH CREATES AND SAVES A MATCH

    // Start the asynchronous operation.
    backgroundWorker1.RunWorkerAsync(date);

}

private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
{      
    backgroundWorker1.ReportProgress(0, Convert.ToDateTime(e.Argument).ToShortDateString());          
}

private void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
    label1.Text = (string)e.UserState; //here on the Label I would like to show the Date
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T20:13:44.200

用于[`BackgroundWorker`](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)报告第一个任务的进度。将此组件从工具箱拖到您的表单中，并订阅`DoWork`和`ProgressChanged`事件。还将属性设置`WorkerReportsProgress`为`true`. 然后异步启动你的第一个任务：

```
// this will execute code in `DoWork` event handler
backgroundWorker1.RunWorkerAsync(); 
```

下一步 - 使用`userState`对象传递处理过的单词：

```
private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
{      
    // grab words in a loop and report progress
    backgroundWorker1.ReportProgress(0, word);
} 
```

`ProgressChanged`最后一步 - 更新事件处理程序中的标签

```
void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
    label1.Text += (string)e.UserState; // this is your grabbed word
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T21:40:24.627

好的，试试这个。这是一个简单的示例，将向您展示如何使用`BackgroundWorker`. 另请注意，还有许多其他解决方案。要使用此示例，请在只有一个按钮和一个标签的新项目中创建一个表单。另请注意，这是对其他正确答案的补充。

```
public partial class Form1 : Form
    {
        BackgroundWorker createAndSaveAMatchBGW;
        public Form1()
        {
            InitializeComponent();
            createAndSaveAMatchBGW = new BackgroundWorker();
            createAndSaveAMatchBGW.DoWork += new DoWorkEventHandler(createAndSaveAMatchBGW_DoWork);
            createAndSaveAMatchBGW.ProgressChanged += new ProgressChangedEventHandler(createAndSaveAMatchBGW_ProgressChanged);
            createAndSaveAMatchBGW.RunWorkerCompleted += new RunWorkerCompletedEventHandler(createAndSaveAMatchBGW_RunWorkerCompleted);
            createAndSaveAMatchBGW.WorkerReportsProgress = true;
        }

        private void button1_Click(object sender, EventArgs e)
        {
            createAndSaveAMatchBGW.RunWorkerAsync(DateTime.Now);
        }

        void createAndSaveAMatchBGW_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
        {
            MessageBox.Show("BackgroundWorker finished");
        }

        void createAndSaveAMatchBGW_ProgressChanged(object sender, ProgressChangedEventArgs e)
        {
            label1.Text = ((DateTime)e.UserState).ToString("ss");
        }

        void createAndSaveAMatchBGW_DoWork(object sender, DoWorkEventArgs e)
        {
            //BackgroundWorker does something for a 10 seconds, each second it Reports
            BackgroundWorker bgw = (BackgroundWorker)sender;
            DateTime dt = (DateTime) e.Argument;
            for (int i = 0; i < 10; i++)
            {
                Thread.Sleep(1000);
                dt = dt.AddSeconds(1);
                bgw.ReportProgress(0, dt);
            }
        }
    } 
```

如果您在每次执行时仅从 CreateAndSave... 方法报告一次，那么您可以使用以下代码：

```
BackgroundWorker createAndSaveAMatchBGW;
        public Form1()
        {
            InitializeComponent();
            createAndSaveAMatchBGW = new BackgroundWorker();
            createAndSaveAMatchBGW.DoWork += new DoWorkEventHandler(createAndSaveAMatchBGW_DoWork);
            createAndSaveAMatchBGW.RunWorkerCompleted += new RunWorkerCompletedEventHandler(createAndSaveAMatchBGW_RunWorkerCompleted);
        }

        private void button1_Click(object sender, EventArgs e)
        {
            createAndSaveAMatchBGW.RunWorkerAsync(DateTime.Now);
        }

        void createAndSaveAMatchBGW_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
        {
            label1.Text = ((DateTime)e.Result).ToString();
        }

        void createAndSaveAMatchBGW_DoWork(object sender, DoWorkEventArgs e)
        {
            DateTime dt = (DateTime) e.Argument;
            //you do something with your DateTime
            dt = dt.AddDays(10);
            e.Result = dt;
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T20:14:02.637

实现这种事情的最简单方法是使用 BackgroundWorker。

[http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)

BackgroundWorker 自动处理线程编组并提供允许您更新 UI 的事件。事件处理程序在 UI 线程上运行。

您在 Task1 中所做的事情可以移动到 BackgroundWorker 中，并且您建议在 Task2 中执行的 UI 更新实际上可以响应来自 BackgroundWorker 的进度事件。

[ProgressChangedEventArgs](http://msdn.microsoft.com/en-us/library/system.componentmodel.progresschangedeventargs.aspx)提供了可以保存当前单词的用户定义数据。

但是，如果您打算显示您加载的每个单词，Winforms（实际上几乎所有 UI）将无法跟上单独的 CPU 线程仅从文件中加载单词。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T20:13:01.077

`Task1`可以在单独的线程上启动。

`Task2`除非执行一些复杂的逻辑来更新 TextBox，否则您实际上不需要 a 。你真正需要做的是使用`TextBox.Invoke()`从`Task1`.

# android - 找不到 Onclick 方法。尝试启动移动网络设置

> ID：13112563
> 
> 赞同：0
> 
> 时间：2012-10-28T20:09:58.367
> 
> 标签：android, android-intent

我正在尝试通过单击按钮在 android 4.1 中启动移动网络设置屏幕。单击按钮时，我收到“在活动类中找不到方法 onOKclicked(View)”。我的代码如下。任何帮助，将不胜感激！

```
public void onOKclicked (Intent intent){
    startActivityForResult(new Intent(android.provider.Settings.ACTION_NETWORK_OPERATOR_SETTINGS), 0);
    startActivity(intent);
}

<activity android:name="android.provider.Settings.ACTION_NETWORK_OPERATOR_SETTINGS"></activity>

<Button
    android:id="@+id/btnOK"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="@string/OkButton" 
    android:onClick="onOKclicked" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T20:11:53.900

它正在寻找一个以 as 参数命名的函数`onOKclicked`（`View`按钮）

```
public void onOKclicked (View v){
    startActivityForResult(new Intent(android.provider.Settings.ACTION_NETWORK_OPERATOR_SETTINGS), 0);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T20:11:25.333

尝试改变你的方法来`public void onOKclicked (View view)`代替。它正在寻找一种`view`传入的方法，而不是`intent`.

# iphone - 读入 .plist

> ID：13112573
> 
> 赞同：0
> 
> 时间：2012-10-28T20:11:23.420
> 
> 标签：iphone, plist

我想在我的 .plist 中阅读，但我的 NSLog 等于“（null）”。这是我的代码：

```
NSMutableDictionary* plistDict = [[NSMutableDictionary alloc] initWithContentsOfFile:@"data.plist"];

NSLog(@"%@", [plistDict objectForKey:@"id"]); 
```

这是我的.plist：[http ://cl.ly/image/2e3P3Q1z2Z1T](http://cl.ly/image/2e3P3Q1z2Z1T)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T20:15:00.210

你的路径是错误的。如果您的 plist 在您的应用程序资源中，那么您必须使用[`NSBundle`](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSBundle_Class/Reference/Reference.html)它来获取它的绝对路径。

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"data" ofType:@"plist"];
NSMutableDictionary *dict = [[NSDictionary dictionaryWithContentsOfFile:path] 
                              mutableCopy]; 
```

如果它在您应用的文档文件夹中，您可以执行以下操作：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *basePath = ([paths count] > 0) ? [paths objectAtIndex:0] : nil;
NSString *path = [basePath stringByAppendingPathComponent:@"data.plist"];
NSMutableDictionary *dict = [[NSDictionary dictionaryWithContentsOfFile:path] mutableCopy]; 
```

请注意，从 plist 加载的字典或数组始终是不可变的。您必须创建一个可变副本。

# c# - mvc3 - 如何防止布尔值被重置为假

> ID：13112575
> 
> 赞同：0
> 
> 时间：2012-10-28T20:11:24.320
> 
> 标签：c#, asp.net-mvc-3

我在视图模型类中有一个布尔值。我有一个 if 语句检查布尔值是真还是假。如果为假，我将值设置为真并调用视图。在视图中，我有按钮，当点击更新并再次调用视图时。我的问题是加载视图时 bool 一直设置为 false。我不知道为什么会这样。有没有办法阻止布尔值被改变？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T20:52:27.143

MVC 是无状态的，因此模型实例不会在服务器调用之间持久化（除非您手动执行此操作，例如通过保存到数据库）。假设您的模型是您的操作方法的参数，那么在该模型中填充值的唯一方法是（1）该属性的默认值（在您的情况下为 false），（2）在请求或 (3) 如果它是提交表单上的输入。

如果重新加载视图的按钮执行表单提交，您可以通过执行来保留该值

```
@Html.HiddenFor(m => m.BoolProperty) 
```

在你看来。如果按钮通过调用 url 刷新页面，则必须将 bool 属性作为路由值添加到 url：

```
var url = Url.Action("MyAction", "MyController", new { m.BoolProperty }); 
```

# c# - 如果查询字符串不同，则使用浏览器缓存中的同一页面

> ID：13112578
> 
> 赞同：0
> 
> 时间：2012-10-28T20:11:39.350
> 
> 标签：c#, asp.net-mvc, jqgrid, browser-cache, outputcache

ASP.NET MVC2 页面用于在浏览器中显示顺序，如 [如何从 jqgrid 数据中填充文档标题中所述](https://stackoverflow.com/questions/13107750/how-to-fill-document-header-from-jqgrid-data/13108019#13108019)

在页面加载时，javascript 从浏览器中检索正确的文档并将其绑定到页面元素。

文档 ID 在查询字符串中指定，例如：

```
www.mysite.com/GetDocument?Id=1
www.mysite.com/GetDocument?Id=2 
```

文档缓存在浏览器中：

```
[OutputCache(Location = OutputCacheLocation.Downstream, Duration = 20 * 60,VaryByParam = "*")]
public ActionResult Index(int id) 
```

但是不使用浏览器缓存，因为每个查询字符串都缓存了不同的页面。如何强制浏览器缓存不依赖于查询字符串中 id 参数的页面？还是在 post 参数中传递 id 更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T20:52:26.320

您必须更改`VaryByParam`属性。

如果 id 是唯一可能的查询字符串键，那么您可以编写：

```
[OutputCache(Location = OutputCacheLocation.Downstream, Duration = 20 * 60,VaryByParam = "none")]
public ActionResult Index(int id) 
```

所以它只会创建一个缓存页面。

如果可能有其他参数，您可以定义它们`VaryByParam`：

```
[OutputCache(Location = OutputCacheLocation.Downstream, Duration = 20 * 60,VaryByParam = "name;age")]
public ActionResult Index(int id) 
```

# javascript - jQuery，使用子元素中的数字对表中的行进行排序

> ID：13112583
> 
> 赞同：2
> 
> 时间：2012-10-28T20:12:10.343
> 
> 标签：javascript, jquery

我需要使用锚（某些行中不存在的锚）中的数字对表中的行进行排序。表格示例：

```
<table id="sortedtable" class="full">
    <tbody>
        <tr>
            <th>Main tr</th>
        </tr>
        <tr>
            <td>
                <div style="float: left;">Title</div>
                <a class="unreadcount" href="#">7</a>
            </td>
        </tr>
        <tr>
            <td>
                <div style="float: left;">No anchor here :(</div>
            </td>
        </tr>
        <tr>
            <td>
                <div style="float: left;">Javascripthatesme</div>
                <a class="unreadcount" href="#">15</a>
            </td>
        </tr>
        <tr>
            <td>
                <div style="float: left;">Yourox</div>
                <a class="unreadcount" href="#">2</a>
            </td>
        </tr>
        <tr>
            <td>
                <div style="float: left;">This has more than one word and no anchor</div>
            </td>
        </tr>
        <tr>
            <td>
                <div style="float: left;">Title</div>
                <a class="unreadcount" href="#">11</a>
            </td>
        </tr>
        <tr>
            <td>
                <div style="float: left;">Big Bang Theory is not funny</div>
                <a class="unreadcount" href="#">4</a>
            </td>
        </tr>   
    </tbody>
</table> 
```

使用[这个问题](https://stackoverflow.com/questions/3156851/using-jquery-how-do-you-reorder-rows-in-a-table-based-on-a-tr-attribute)中的解决方案，我能够制作一个半工作代码：

```
var $table = $('table');

var rows = $table.find('tr').get();
rows.sort(function(a, b) {
    var keyA = $(a).find('a.unreadcount').text();
    var keyB = $(b).find('a.unreadcount').text();
    if (keyA < keyB) return 1;
    if (keyA > keyB) return -1;
    return 0;
});
$.each(rows, function(index, row) {
    $table.children('tbody').append(row);
}); 
```

你可以看到它在[这个 jsFiddle](http://jsfiddle.net/hLvwz/1/)中工作。问题和我需要帮助的地方是数字的排序方式（例如，8 先于 32 或 12）并且我需要忽略第一行（“Main tr”所在的位置）并将其始终放在顶部。

另外，如果您可以指导我制作一个按钮，让表格再次按原始顺序排列，那就太棒了。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T20:21:14.443

您需要将文本值转换为数字以进行正确的数字排序。转换的简单方法是使用[一元加运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Arithmetic_Operators#-_.28Unary_Negation.29)。

要将标题行保留在适当的位置，只需不要将其包含在您排序的数组中，这很容易使用 jQuery 的[`.slice()`方法](http://api.jquery.com/slice/)。

要添加一个将表格恢复到其原始顺序的按钮，只需在排序之前保留数组的副本，我已经使用标准[Array`.slice()`方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/slice)完成了。

所以：

```
var $table = $('table');

var originalRows = $table.find('tr').slice(1).get(),
    rows = originalRows.slice(0);
rows.sort(function(a, b) {
    var keyA = +$(a).find('a.unreadcount').text();
    var keyB = +$(b).find('a.unreadcount').text();
    if (keyA < keyB) return 1;
    if (keyA > keyB) return -1;
    return 0;
});
$.each(rows, function(index, row) {
    $table.children('tbody').append(row);
});

// button that changes it back:
$("input").click(function(){
    $.each(originalRows, function(index, row) {
       $table.children('tbody').append(row);
    });
});
​ 
```

演示：http: [//jsfiddle.net/hLvwz/5/](http://jsfiddle.net/hLvwz/5/)

# algorithm - 将红盒包装在蓝盒中以优化成本具有挑战性

> ID：13112589
> 
> 赞同：0
> 
> 时间：2012-10-28T20:12:55.057
> 
> 标签：algorithm, optimization, graphics, linear-algebra, graph-algorithm

这主要是一个包装问题：假设有 20 个不同尺寸 r1 到 r8 的红色盒子（因此每个尺寸可能存在多个），它们应该使用蓝色包装盒运输，有 3 个尺寸 b1、b2 和b3。

*   无论重量如何，蓝盒 b1 的运费为 cost1，蓝盒 b2 的运费为 cost2，因此蓝盒 b3 的运费为 cost3。
*   我们可以使用任何尺寸组合的任意数量的蓝色盒子，但我们的目标是最大限度地降低运输成本。这意味着，如果我们考虑将多个红色盒子（可能大小不一）放在一个蓝色盒子里，如果它们合适的话。我们假设最大的红色盒子可以很容易地放入蓝色盒子 b1 以及 cost1,..cost3 之间的关系如下：

    成本1=2*成本2=3*成本3。

*   为简单起见，如果需要，我们可以选择任意值来定义每个红色框的尺寸，并为蓝色框选择相同的尺寸。

现在你会用什么方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T20:24:29.590

首先，您可以使用树形图或 kd-tree，您可以在此处找到示例：http: [//www.blackpawn.com/texts/lightmaps/default.html](http://www.blackpawn.com/texts/lightmaps/default.html)。也许您可以将其与装箱算法结合使用，例如 first-fit。

# jquery-plugins - 如何在 Adam Shaw Jquery 插件的完整日历中添加每日事件？

> ID：13112593
> 
> 赞同：1
> 
> 时间：2012-10-28T20:13:31.623
> 
> 标签：jquery-plugins, fullcalendar

我正在开发一个应用程序，该应用程序需要每天、每小时、每周事件或特定日事件设置事件。

我正在使用 fullcalendar 插件，但我无法每天设置事件。有没有办法每天设置事件？如果是，那么如何？

如果无法通过 fullcalendar，请向我推荐其他一些 jquery 插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T22:47:12.423

你的意思是像Lunch MF 1200-1300这样的套装？事件需要有日期，因此您可能需要使用[事件函数](http://arshaw.com/fullcalendar/docs/event_data/events_function/)，并`start`通过添加日期偏移量和设置小时来生成它们。检查 arshaw 的[xdate](http://arshaw.com/xdate/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-17T07:41:41.503

您可以通过指定星期几来进行日常活动。

```
{
    title: timecondition.name,
    start: moment(),
    end: moment(),
    color: '#' + timecondition.color,
    dow: [0, 1, 2, 3, 4, 5, 6],
    allDay: false,
} 
```

# android - 如何提高 Android Webkit 中的图像质量（与 iOS 相比）

> ID：13112602
> 
> 赞同：1
> 
> 时间：2012-10-28T20:14:16.567
> 
> 标签：android, html, ios, css, webkit

尝试在 iOS 和 Android (SGS2) 中加载[http://www.sciences-physiques.eu/appli/oneimage/ 。](http://www.sciences-physiques.eu/appli/oneimage/)

图片为1600*2262

结果是 iOS 上的图像更好。我知道 android 可以做得更好，因为我有一个缩小了这么大图像的应用程序，并且文本“更清晰”。

我对在css中添加一些代码很感兴趣，但它似乎不适用于webkit

以下是截图：

[http://tof.canardpc.com/show/9144d047-0aaf-4906-9c96-1a991112f9fc.html](http://tof.canardpc.com/show/9144d047-0aaf-4906-9c96-1a991112f9fc.html) http://tof.canardpc.com/show/36008198-e6ef-4b02-820b-fe2ca8b8df1c.html

代码是：

```
<!DOCTYPE HTML>
<html manifest="" lang="en-US">
<head>
    <meta charset="UTF-8">
    <title>carimage</title>
    <style type="text/css">
         img { width: 100%; }
        html, body {
            height: 100%;
            background-color: #1985D0
        }
        </style>
        <body>

<img src="1.png" />

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-29T07:08:18.317

iOS 应用中的图像质量优于 android（具有相同分辨率），图像质量通过指定代码得到改善，但加载时间增加。在为我的客户进行 android 应用程序开发时，我实现了代码并感受到了质量和加载时间的差异。

# file - 查找 gzip 的开始和结束？

> ID：13112604
> 
> 赞同：9
> 
> 时间：2012-10-28T20:14:22.497
> 
> 标签：file, gzip, archive

我有一些文件，有一些随机字节和多个 gzip 文件。如何在某个文件中找到 gzip 流的开始和结束？gzip 流之间有许多随机字节。所以，基本上我需要找到任何 gzip 文件并从那里获取它。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-28T20:54:45.533

阅读[RFC 1952 - GZIP](https://www.rfc-editor.org/rfc/rfc1952#page-5)：

每个 GZIP 文件只是一堆数据块（称为成员），每个文件包含一个数据块。

每个成员都以以下字节开头：

*   **0x1F (ID1)**
*   **0x8B (ID2)**
*   压缩方法。**0x08**用于`DEFLATE`d 文件。0-7 是保留值。
*   标志。**前三位**是保留的，必须**为零**。
*   (4 字节) 最后修改时间。可以设置为 0。
*   额外的标志，由压缩方法定义。
*   操作系统，实际上是文件系统。0=FAT，3=UNIX，11=NTFS

**成员的结尾没有分隔**。您必须实际步行整个成员。请注意，连接多个有效的 GZIP 文件会创建一个有效的 GZIP 文件。另请注意，超出成员*可能*仍会导致成功读取成员（除非解压缩库完全失败）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-28T20:59:07.300

搜索一个三字节的 gzip 签名，0x1f 0x8b 0x08。找到后，尝试解码以 0x1f 开头的 gzip 流。如果你成功了，那就是一个 gzip 流，它在它结束的地方结束。如果它是 1，则从该 gzip 流之后继续搜索，如果不是，则从 0x08 之后继续搜索。然后你会找到它们，你会知道它们的位置和跨度。

# forms - 如何在 Symfony 2 中使用 ChoiceListInterface？

> ID：13112607
> 
> 赞同：3
> 
> 时间：2012-10-28T20:14:30.537
> 
> 标签：forms, symfony, multiple-choice

我想在表单中显示复选框的动态列表。

到目前为止，我构建了一个嵌入复选框的静态列表的表单，并为不同语言的不同值创建了一个 Tag 实体并填充了数据库。我想用基于标签实体的动态列表替换静态复选框。

[文档](http://symfony.com/doc/2.0/reference/forms/types/choice.html#choice-list)说我应该使用ChoiceListInterface。但它的记录真的很差。你有一个例子或一个全局逻辑解释来帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T13:04:17.733

您可以扩展[LazyChoiceList](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Form/Extension/Core/ChoiceList/LazyChoiceList.php#L25)抽象类并实现[loadChoiceList()](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Form/Extension/Core/ChoiceList/LazyChoiceList.php#L137)方法，创建它的服务，将其注入表单并将其设置为`choice_list`选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T13:41:15.940

最后，我使用了实体字段类型：

```
->add('tags', 'entity', array(
            'class' => 'bndMyBundle:Tag',
            'query_builder' => function(EntityRepository $er){
                return $er->createQueryBuilder('t')
                        ->orderBy('t.en', 'ASC');
            },
            'expanded'   => true,
            'multiple'  => true,
            'property'  => 'en',
        )) 
```

然后，我只需要用用户当前的语言环境替换“en”值来选择正确的语言。

# javascript - 在带有照片的fancybox中添加facebook评论

> ID：13112617
> 
> 赞同：1
> 
> 时间：2012-10-28T20:16:06.613
> 
> 标签：javascript, jquery, fancybox, facebook-comments

如何在fancybox 中添加facebook 评论？在我的 HTML 中，我有这个：

```
<a  class="fb" data-fancybox-group="gallery" title="Laurea" href="http://mediablog.cadenadial.com/atrevete/files/2012/10/cocheespa%C3%B1a.jpg">
<img  src="http://mediablog.cadenadial.com/atrevete/files/2012/10/cocheespa%C3%B1a.jpg" alt=""   width="19%"/></a> 
```

然后在另一个名为 js.js 的文件中，我有一个 fancybox 函数：

```
(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/es_ES/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));

    $(".fb")
    .attr('rel', 'gallery')
    .fancybox({
        padding: 0,    
        afterShow : function(){
        var myContent = '<div id="myContent">
<iframe src="//www.facebook.com/plugins/like.php?href=' + this.href + '&amp;layout=button_count&amp;show_faces=true&amp;width=500&amp;action=like&amp;font&amp;colorscheme=light&amp;height=23" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:210px; height:30px;" allowTransparency="true">
</iframe>
<iframe src="http://www.facebook.com/plugins/comments.php?href=' + this.href + '&permalink=1"  scrolling="yes" frameborder="0" style="border:none; overflow:hidden; width="600" height="600"" allowTransparency="true">
</iframe>
  </div>';
 $(".fancybox-wrap").append(myContent);}
 }); 
```

如何在花式框中显示评论？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T17:04:07.893

我的猜测是它没有显示评论插件，因为该站点已经被解析并且它是动态添加的。在“追加”功能之后尝试以下操作：

[https://developers.facebook.com/docs/reference/javascript/FB.XFBML.parse/](https://developers.facebook.com/docs/reference/javascript/FB.XFBML.parse/)

因此，您要么仅用于`FB.XFBML.parse();`解析整个文档（再次），要么`FB.XFBML.parse(document.getElementById('foo'));`用于解析具有特定 id 的特定元素。也应该适用于子项目。

另外，使用正确的插件代码，而不是 iframe 版本：

[https://developers.facebook.com/docs/reference/plugins/comments/](https://developers.facebook.com/docs/reference/plugins/comments/)

# c - 为什么我们使用 char 数组来创建缓冲区

> ID：13112621
> 
> 赞同：3
> 
> 时间：2012-10-28T20:16:29.580
> 
> 标签：c

为什么我们使用 char 数组在内存中创建缓冲区而不是 int 数组，如果 int 数组可以用于创建缓冲区，如何从中获取输出？

```
int main()
{
    char  buffer[100];
    fread(buffer,sizeof(int),4,stdin);
    int i=0;
    while(i<4)
    {
        printf ("%d,\n",buffer[i]);
        i=i+1;
    }    
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T20:20:47.220

非常简单：如果我们想读取字节，我们使用一个 char 数组。

文本字符串，或者（更一般地）二进制对象。

“字节”通常是“整数”大小的 1/4。

此外，套接字“读取”和“写入”计数是字节计数。按照长期惯例，他们期望字节缓冲区。

'希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T20:22:44.490

因为`char`在`C`语言中正好是 1 个字节。因此，逐字节写入文件是合乎逻辑的。

# php - 客户端断开连接后的PHP终止脚本

> ID：13112622
> 
> 赞同：2
> 
> 时间：2012-10-28T20:16:34.477
> 
> 标签：php, apache, client, lithium, disconnect

目前我正在开发一个 PHP 系统（用于在 web 服务之间同步数据）（使用 Lithium 框架），它通过 curl 向不同的 web 服务发出多个请求。

对于请求中的每个响应（可能有很多，比如说 100 个）。但是，当客户端断开连接时（例如，在浏览器中按下停止），脚本会在客户端断开连接后“长时间”继续运行（日志行继续出现在日志文件中）。

从我读过的内容来看，PHP 仅在尝试将输出发送到浏览器时检测到客户端断开连接。所以现在我在每次请求（以及日志文件的每一行）到浏览器之后刷新一些数据。但 PHP 脚本继续运行。

我现在在每次日志调用后都有以下代码，但这似乎不起作用。

```
//Die on no connection
ignore_user_abort(false);
echo chr(0); flush(); ob_flush();
if(connection_aborted())
{
    die();
} 
```

该脚本一直在运行，我可以做些什么来确保在客户端（或至少在不久之后）断开连接后脚本停止？

编辑：为什么我总是在发布问题后找到解决方案。添加了“ob_flush”，这似乎有效。无论如何，感谢任何对此进行调查的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T20:23:17.570

尝试使用`ob_flush()`而不是`flush()`，这将刷新输出缓冲区..

# jquery - 处理多维数据

> ID：13112623
> 
> 赞同：0
> 
> 时间：2012-10-28T20:16:42.123
> 
> 标签：jquery, database-design, d3.js

此外，在 d3 论坛上发布：[https ://groups.google.com/forum/#!topic/d3-js/F2vDEiaCGqI](https://groups.google.com/forum/#!topic/d3-js/F2vDEiaCGqI)

继续我之前的帖子[https://groups.google.com/forum/#!searchin/d3-js/rk./d3-js/M288z95iMxA/mDTlSwhCq6UJ](https://groups.google.com/forum/#!searchin/d3-js/rk./d3-js/M288z95iMxA/mDTlSwhCq6UJ)

现在我正在为我的数据添加另一个维度。假设我正在收集 100 个城市的天气数据。我有以下参数：daily_high、daily_low、降水等，它们显示了整个月的平均值。现在，我想在选择特定城市时显示每日数据。即 2 次查看，1 次显示每月平均值的概览，第 2 次显示所选城市的详细信息。我该如何为此创建数据结构？意思是，我是否在单个文件或多个文件中拥有总/月平均值和每日数据？最初，我使用仅包含每月平均值的 csv 来形成表格。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T20:58:39.127

我建议您使用以下格式的 JSON：

```
{    
    "London" : {
        "January" : {
            "1" : {
                "high": 100,
                "low": 50,
                "precipitation": 300,
            },
            "2" : {
                "high": 100,
                "low": 50,
                "precipitation": 300,
            },
            MORE DAYS OF THE MONTH...
        },
        MORE MONTHS...
    },
    MORE CITIES...
} 
```

您可以在处理数据时动态计算平均值，而不是将它们包含在数据中。

# html - 下拉菜单项未与父项对齐

> ID：13112626
> 
> 赞同：0
> 
> 时间：2012-10-28T20:17:08.753
> 
> 标签：html, css

我无法在本网站上对齐主菜单的翻转元素... [http://www.mattmaclennan.co.uk/a2](http://www.mattmaclennan.co.uk/a2)

翻转元素应该与父母一致，有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T20:19:43.107

将 CSS 属性添加`position: relative`到类`mainNav`

```
ul#nav li.mainNav {
  display: inline;
  padding-left:15px;
  position: relative;
}
(line 44 of style.css) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T20:22:22.143

将您的CSS更改为此...

```
ul#nav li.mainNav {
display: inline-block;
padding-left: 15px;
} 
```

# php - 如何让注册用户在 Joomla 2.5 中编辑/维护自己的列表

> ID：13112627
> 
> 赞同：0
> 
> 时间：2012-10-28T20:17:19.440
> 
> 标签：php, list, components, joomla2.5

我试图在 Joomla 2.5 中做这样的事情：

[http://jsfiddle.net/Lt2EJ/](http://jsfiddle.net/Lt2EJ/)

当然，这是一个非功能模型，但简而言之，每个注册用户都需要能够维护他们收藏中的项目列表。

对于添加的每个项目，用户将选择项目的模式，然后编写项目的简短描述，然后单击`Add (+)`按钮。

然后，他们的列表将使用他们添加的最新项目进行更新。

他们还应该能够删除/编辑列表中的项目。

真正的问题是每个用户应该只能看到和编辑他们自己的项目。

实现这一目标的最简单方法是什么？

非常感谢！

辛西娅

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T20:24:37.873

您可以将它与连接到每个用户的数据库用户 ID 的 mysql 数据库链接以添加/拉取内容（可能必须将它放在一个模块中/对于 joomla），此链接可能会提供一些提示：[http ://www.alfystudio.com/ tutorials/56-creating-and-configuring-basic-joomla-module.html](http://www.alfystudio.com/tutorials/56-creating-and-configuring-basic-joomla-module.html)

# php - curl登录到网站不起作用

> ID：13112630
> 
> 赞同：1
> 
> 时间：2012-10-28T20:17:57.897
> 
> 标签：php, curl

我有一个登录网站的代码。它可以在 wordpress 之类的网站上运行，但在我想登录的网站上什么也没有发生。哪里没有错误信息或任何东西。这是我的代码：

```
<?php
print" <head>
        <base href='http://www.example.com/'/>
    </head>";

$url = 'http://www.example.com/login.php?';                        
$postdata = 'username=dasds&password=frkm'; 
$referer = $url; 
$cookie = "cookie.txt" ;
$ch = curl_init(); 
curl_setopt ($ch, CURLOPT_URL, $url); 
curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, true);
curl_setopt ($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:13.0) Gecko/20100101 Firefox/13.0");
curl_setopt($ch,CURLOPT_COOKIESESSION,false); 
curl_setopt ($ch, CURLOPT_TIMEOUT, 60); 
curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, false); 
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1); 
curl_setopt ($ch, CURLOPT_COOKIEJAR, $cookie);
curl_setopt ($ch, CURLOPT_POSTFIELDS, $postdata); 
curl_setopt ($ch, CURLOPT_POST, 1); 
$result = curl_exec ($ch);
print $result;
curl_close($ch);
?> 
```

和他们的html表单：

```
<form name="form" method="post" action="/login.php">
<label class="registration" for="username">
<span>Username</span>
<input name="username" type="text" id="username" size="30"/>
</label>
<label class="registration" for="password">
<span>Password</span>
<input name="password" type="password" id="password"/>
</label>
<input type="submit" name="Login" value="Login"/>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T20:24:08.007

**试试这个**：

*   删除尾随 ? 在网址中。
*   同时指定`COOKIEJAR`and`COOKIEFILE`并设置 cookie 文件的绝对路径：

**代码**：

```
curl_setopt ($ch, CURLOPT_COOKIEJAR, __DIR__.'/'.$cookie);
curl_setopt ($ch, CURLOPT_COOKIEFILE, __DIR__.'/'.$cookie); 
```

和：

*   在尝试登录之前加载主页一次以获取他们可能给您的任何 cookie。
*   确保不涉及验证码。在浏览器中跟踪 POST 过程 (FireFox + HttpFox)。

如果您在浏览器中跟踪登录请求 + 响应，则不会失败。

# c++ - 获取向量中的特定元素

> ID：13112634
> 
> 赞同：1
> 
> 时间：2012-10-28T20:18:32.373
> 
> 标签：c++, sdl, game-engine, stdvector

我正在尝试在向量中获取特定元素。例如，

可以说我有一个向量。

```
std::vector<Tile> TileList; 
```

向量的大小 MAP_HEIGHT = 30, MAP_WIDTH = 200 所以它的总大小是 MAP_HEIGHT * MAP_WIDTH = 6000。我使用双嵌套 for 循环来迭代并创建一个充满瓷砖的向量。

```
for(int Y = 0; Y < MAP_HEIGHT; Y++)
{
   for(int X = 0; X < MAP_WIDTH; X++)
   {
        Tile TempTile;

        fscanf(FileHandle, "%d:%d ", &TempTile.TileID, &TempTile.TypeID);

        TileList.push_back(TempTile);

   }

} 
```

现在我的问题是可以说我遍历

```
int ID = 0;

for(int Y = 0; Y < MAP_HEIGHT; Y++)
{
   for(int X = 0; X < MAP_WIDTH; X++)
   {
        TileList[ID].do stuff with it

        //Check for the tile above this tile
        // Find a way to calculate the ID of the tile above this tile
        int IDoftilabove = ID - do something;
        if(TileList[IDoftilabove].variable == TILE_SOMETHING)
        {
           do stuff
        }
       ID++;
    } 
```

如何根据我所在的当前元素计算向量内的上述元素的 ID（技术上在此 ID 之前）。

插图：假设我有一个 5x5 的矩阵，假设我的当前 ID 是 8。所以我在第二行第 3 行。

```
1  2 *3* 4  5
1  2 (3) 4  5
1  2  3  4  5
1  2  3  4  5
1  2  3  4  5 
```

现在我想要向量中直接在我上方的元素的 ID，即 ID 3，第一行号 3。这只是假设 MAP_WIDTH = 5 和 MAP_HEIGHT = 5。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T20:22:28.390

`8 - 5 = 3`

当前 - `MAP_WIDTH`= 以上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T20:26:35.103

您可以很容易地确定`(row,col)`给定的坐标`ID`：

```
row = ID / MAP_WIDTH;
col = ID % MAP_WIDTH; 
```

如果您想知道上面元素的坐标是什么：

```
row--;
ID_above = row * MAP_WIDTH + col; 
```

如果您想知道下面的元素是什么，这同样适用：

```
row++;
ID_below = row * MAP_WIDTH + col; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T20:30:19.130

似乎您想在线性索引和二维索引之间进行映射。这很简单。

```
 int rect2lin(int w, int x, int y) { return y*w+x; }
   void lin2rect(int w, int i, int * x, int * y) { *y = i/w; *x = i%w; } 
```

因此，在您的示例中，上述元素的 ID (X,Y) 将是 rect2lin(MAP_WIDTH, X,Y-1)，即 (Y-1)*MAP_WIDTH+X。这直接推广到更高的维数。例如，对于 3d，i=(z*h+y)*w+x，依此类推。

# html - 当 Adsense 在页面上时，Google Chart 不会显示

> ID：13112637
> 
> 赞同：0
> 
> 时间：2012-10-28T20:18:58.060
> 
> 标签：html, google-app-engine, adsense, google-visualization

所以我有一个使用谷歌图表 API 的测试站点。我想在这个网站上放一个 Adsense 横幅。当我添加 Adsense 代码时，图表不会显示，但广告会显示。取出 Adsense 代码，图表显示正常。

编辑：Adsense 代码放在哪里也没关系。如果它在那里，则图表不存在。

这是整个页面：

```
<html>
  <head>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
      google.load("visualization", "1", {packages:["corechart"]});
      google.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Date', 'Price'],

            ['Yesterday', 10.00],
            ['Today', 12.00],

        ]);

        var options = {
          title: 'kyurem'
        };

        var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
        chart.draw(data, options);
      }
    </script>
  </head>
  <body>
    <div>
        <h3>doeiqts's Pokemon Price Guide</h3>
    </div>

    <div id="adsense">
        <script type="text/javascript"><!--
        google_ad_client = "ca-pub-4255182576260971";
        /* Pokemon Graph */
        google_ad_slot = "2704848389";
        google_ad_width = 728;
        google_ad_height = 90;
        //-->
        </script>
        <script type="text/javascript"
        src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
        </script>
    </div>

    <div id="cardPicture" style="height: 400px; width: 227px; float: left;">
        <img src=http://pokegym.net/gallery/displayimage.php?imageid=53682 style="height: 320px; width: 227px; position: relative; top: 80px;" />
    </div>
    <div id="chart_div" style="width: 900px; height: 500px; float: left;"></div>

    <div style="clear: both;">
        <p>
        <br>
        <p>
        This site is not affiliated with Nintendo, Pokemon, PokeGym, or eBay.
    </div>

  </body>
</html> 
```

# c# - 检测应用程序启动和从另一个页面返回之间

> ID：13112639
> 
> 赞同：0
> 
> 时间：2012-10-28T20:19:10.307
> 
> 标签：c#, windows-runtime

我正在构建一个 win 8 Metro 应用程序。在我的主页中，我必须在我的应用启动时检查设置。但是如果我导航到另一个页面并返回，我不希望它再次执行。我怎样才能检测到这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T21:01:08.700

如果您想在应用程序启动时执行某项操作，请使用[Application.OnLaunched](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.application.onlaunched)方法。它已在 App.xaml.cs 中实现，您可以在其中添加代码。

# facebook-graph-api - Facebook Opengraph 控制台错误

> ID：13112641
> 
> 赞同：0
> 
> 时间：2012-10-28T20:19:29.420
> 
> 标签：facebook-graph-api, action, facebook-opengraph

大家好，我正在尝试在 Facebook 上发布图片的新操作，在发布过程中我遇到了一个错误，我无法使其正常工作

您尝试发布的操作无效，因为它没有指定任何引用对象。必须至少指定以下属性之一：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T20:37:58.323

要发布您的操作，使用 Javascript SDK 发布图片，您应该尝试以下操作：

```
FB.api('/me/bhlolzspot:laugh_out_loud', 'post', 
  { funniest_picture : 'OBJECT_URL',image[0][url]=http://www.yourdomain.com/images/image.jpg,image[0][user_generated]=true }); 
```

我假设`laugh_out_loud`是您的操作名称，并且`funniest_picture`是您的对象名称。在`OBJECT_URL`，你所有的元标签都应该就位，我可以看到缺少 og:image 标签，你应该把你想发布的图片放在 facebook 上。

希望能帮助到你。

# haskell - Haskell 在 Agda 中的 Arrow-Class 和 -> 在 Agda 中

> ID：13112642
> 
> 赞同：13
> 
> 时间：2012-10-28T20:19:39.357
> 
> 标签：haskell, agda, arrows

我有两个密切相关的问题：

首先，Haskell 的 Arrow 类如何在 Agda 中建模/表示？

```
 class Arrow a where 
      arr :: (b -> c) -> a b c
      (>>>) :: a b c -> a c d -> a b d
      first :: a b c -> a (b,d) (c,d)
      second :: a b c -> a (d,b) (d,c)
      (***) :: a b c -> a b' c' -> a (b,b') (c,c')
      (&&&) :: a b c -> a b c' -> a b (c,c') 
```

（以下[博客文章](http://sneezy.cs.nott.ac.uk/fplunch/weblog/?p=369#comment-78988)指出它应该是可能的......）

其次，在 Haskell 中，`(->)`是一等公民，只是另一种高阶类型，它可以直接定义`(->)`为`Arrow`类的一个实例。但是在阿格达呢？我可能是错的，但我觉得 Agdas`->`是 Agda 的一个更不可或缺的部分，而不是 Haskell 的`->`。那么，是否可以将 Agdas`->`视为一种高阶类型，即产生`Set`可以作为 的实例的类型函数`Arrow`？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-28T20:41:32.543

类型类通常在 Agda 中编码为记录，因此您可以将`Arrow`类编码为如下所示：

```
open import Data.Product -- for tuples

record Arrow (A : Set → Set → Set) : Set₁ where
  field  
    arr    : ∀ {B C} → (B → C) → A B C
    _>>>_  : ∀ {B C D} → A B C → A C D → A B D
    first  : ∀ {B C D} → A B C → A (B × D) (C × D)
    second : ∀ {B C D} → A B C → A (D × B) (D × C)
    _***_  : ∀ {B C B' C'} → A B C → A B' C' → A (B × B') (C × C')
    _&&&_  : ∀ {B C C'} → A B C → A B C' → A B (C × C') 
```

虽然您不能直接引用函数类型（类似于`_→_`无效的语法），但您可以为其编写自己的名称，然后在编写实例时可以使用它：

```
_=>_ : Set → Set → Set
A => B = A → B

fnArrow : Arrow _=>_  -- Alternatively: Arrow (λ A B → (A → B)) or even Arrow _
fnArrow = record
  { arr    = λ f → f
  ; _>>>_  = λ g f x → f (g x)
  ; first  = λ { f (x , y) → (f x , y) }
  ; second = λ { f (x , y) → (x , f y) }
  ; _***_  = λ { f g (x , y) → (f x , g y) }
  ; _&&&_  = λ f g x → (f x , g x)
  } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-30T21:41:43.540

虽然 hammar 的答案是 Haskell 代码的正确端口，但`_=>_`与 相比，定义太有限`->`，因为它不支持依赖函数。从 Haskell 改编代码时，如果您想将抽象应用于您可以在 Agda 中编写的函数，这是一个标准的必要更改。

此外，按照标准库的惯例，会调用这个类型类，`RawArrow`因为要实现它，您不需要提供实例满足箭头定律的证明；有关其他示例，请参见 RawFunctor 和 RawMonad（注意：从 0.7 版开始，标准库中看不到 Functor 和 Monad 的定义）。

这是一个更强大的变体，我用 Agda 2.3.2 和 0.7 标准库编写并测试了它（应该也适用于 0.6 版本）。请注意，我只更改了`RawArrow`' 的参数和的类型声明`_=>_`，其余的没有改变。但是，在创建`fnArrow`时，并非所有替代类型声明都像以前一样工作。

警告：我只检查了代码类型检查和 => 可以合理使用，我没有检查示例是否使用类型检查`RawArrow`。

```
module RawArrow where

open import Data.Product --actually needed by RawArrow
open import Data.Fin     --only for examples
open import Data.Nat     --ditto

record RawArrow (A : (S : Set) → (T : {s : S} → Set) → Set) : Set₁ where
  field  
    arr    : ∀ {B C} → (B → C) → A B C
    _>>>_  : ∀ {B C D} → A B C → A C D → A B D
    first  : ∀ {B C D} → A B C → A (B × D) (C × D)
    second : ∀ {B C D} → A B C → A (D × B) (D × C)
    _***_  : ∀ {B C B' C'} → A B C → A B' C' → A (B × B') (C × C')
    _&&&_  : ∀ {B C C'} → A B C → A B C' → A B (C × C')

_=>_ : (S : Set) → (T : {s : S} → Set) → Set
A => B = (a : A) -> B {a}

test1 : Set
test1 = ℕ => ℕ
-- With → we can also write:
test2 : Set
test2 = (n : ℕ) → Fin n
-- But also with =>, though it's more cumbersome:
test3 : Set
test3 = ℕ => (λ {n : ℕ} → Fin n)
--Note that since _=>_ uses Set instead of being level-polymorphic, it's still
--somewhat limited. But I won't go the full way.

--fnRawArrow : RawArrow _=>_
-- Alternatively:
fnRawArrow : RawArrow (λ A B → (a : A) → B {a})

fnRawArrow = record
  { arr    = λ f → f
  ; _>>>_  = λ g f x → f (g x)
  ; first  = λ { f (x , y) → (f x , y) }
  ; second = λ { f (x , y) → (x , f y) }
  ; _***_  = λ { f g (x , y) → (f x , g y) }
  ; _&&&_  = λ f g x → (f x , g x)
  } 
```

# r - R输入文件阿拉伯语？

> ID：13112646
> 
> 赞同：4
> 
> 时间：2012-10-28T20:20:06.487
> 
> 标签：r, input, arabic

我正在编写一个从 R 中的文本文件中读取阿拉伯文本的程序，每当我读取该文件时，我都会收到以下错误：

```
Warning messages:
1: In read.table("C:\\Users\\Mustafa\\Desktop\\arabic.txt", sep = "\n",  :
invalid input found on input connection 'C:\Users\Mustafa\Desktop\arabic.txt'
2: In read.table("C:\\Users\\Mustafa\\Desktop\\arabic.txt", sep = "\n",  :
incomplete final line found by readTableHeader on 'C:\Users\Mustafa\Desktop\arabic.txt'

File<-read.table("C:\\Users\\Mustafa\\Desktop\\arabic.txt",sep="    \n",col.names="ar",fileEncoding="UTF-8") 
```

我不知道错误在哪里，我使用的环境是windows，在mac os上它是工作文件，但是我必须在windows上运行它！任何帮助表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T03:30:59.923

此错误消息意味着您的文件不以`EOL`（行尾字符）结尾，例如`\n`或`\r\n`。

这有点像`warning`您的文件可能未完成。似乎在 MAC 上它被忽略了，但在 Windows 中它被认为是一个错误。

解决方案很简单，只需在文件末尾添加一个新行，保存并重试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-02T07:23:21.750

下面的代码对我有用。

```
Sys.setlocale("LC_ALL","Arabic") 
```

# jquery - Highcharts error #13 while instantiating highchart on ajax call

> ID：13112652
> 
> 赞同：2
> 
> 时间：2012-10-28T20:20:58.250
> 
> 标签：jquery, highcharts, highstock

> **Possible Duplicate:**
> [HighCharts uncaught exception](https://stackoverflow.com/questions/11486553/highcharts-uncaught-exception)

I'm trying to instantiate a highcharts objects with this code:

```
$(function () {
    var chart;
    var json = null;
    $.getJSON('{%  url ajax_search 'pie_chart'  %}?{{request.META.QUERY_STRING}}',
             function(data, textStatus, jqXHR)
            {
                json = data.template;
                            console.log(json);
                chart = new Highcharts.Chart(json);
            });
}) 
```

The console logs the returned json appropriately.

When I copy and past in the json to where the (json) is, the chart renders. However, as it is now, it throws the following error: Uncaught Highcharts error #13: www.highcharts.com/errors/13

Following that link it says:

> This error occurs if the chart.renderTo option is misconfugured so that Highcharts is unable to find the HTML element to render the chart in

However, again, if I copy and past the json (from the console) to where the variable would otherwise be, it works fine.

I'm sure this is something simple. What am I doing wrong here?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T09:19:17.343

您尝试将图表呈现到的元素/div 丢失，您可以分享`json`在控制台中打印的元素/div 吗？另外，如果您可以添加以下更多日志，以便我们更好地了解图片。

我用来解决 highcharts 错误 #13 的一组标准日志是

```
 console.log("JSON: " + JSON.stringify(chartingOptions));
        console.log("Render to element with ID : " + chartingOptions.chart.renderTo);
        console.log("Number of matching dom elements : " + $("#" + chartingOptions.chart.renderTo).length); 
```

这些应该在调用 Highcharts 构造函数之前添加

```
 chart = new Highcharts.Chart(chartingOptions); 
```

如果一切顺利，您应该会看到正确的元素 ID，长度为 1。

[排查 highcharts 错误 #13 | Highchart & Highstock @ jsFiddle](http://jsfiddle.net/jugal/avz9x/)

这是上面演示的日志

> JSON: {"chart":{"renderTo":"container"...}}
> 渲染到具有 ID 的元素：容器
> 匹配 dom 元素的数量：1

# ios - 使用多个不同的自定义单元创建复杂的 UITableView

> ID：13112654
> 
> 赞同：0
> 
> 时间：2012-10-28T20:21:13.647
> 
> 标签：ios, ios5, uitableview

我在具有自定义 UITableViewCell 的表视图中创建侧边菜单。

我创建了一个可重复使用的单元格，用于以下内容：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";
LeftMenuTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {

    NSArray* views = [[NSBundle mainBundle] loadNibNamed:@"LeftMenuTableViewCell" owner:nil options:nil];

    for (UIView *view in views) {
        if([view isKindOfClass:[UITableViewCell class]])
        {
            cell = (LeftMenuTableViewCell*)view;
            [cell.displayName setText:[NSString stringWithFormat:@"Cell 1"];

        }
    }
}

return cell; 
```

}

我想知道如何为这个表创建其他单元格。该表将类似于 Facebook/路径侧菜单。例如我的个人资料设置帮助注销

每个都具有相同的设计，但标签和旁边的图标的文本不同。还会在右侧加载不同的视图控制器。有人可以解释这是如何实现的吗？或者提供任何教程的链接，该教程解释了使用多个不同单元格制作自定义表格视图，我是否需要复制单元格 .h、.m 和 NIB 文件并分别创建每个自定义 UITabelViewCell？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T20:33:07.743

使用相同的单元格类并将其设置为（因为单元格没有设计更改，只有文本和图像在更改），

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
  //some code
  if () { //condition 1 
     cell.textLabel.text = @"My Profile";
     cell.imageView.image = [UIImage imageNamed:@"MyProfile.png"];
  } else if () { //condition 2
     cell.textLabel.text = @"Settings";
     cell.imageView.image = [UIImage imageNamed:@"Settings.png"];
  } else if () { //condition 3
     cell.textLabel.text = @"Logout";
     cell.imageView.image = [UIImage imageNamed:@"Logout.png"];
  } 
  //some code
} 
```

在`didSelectRowAtIndexPath`方法上，

```
if () { //condition 1, say indexpath.row == 0
  //go to firstviewcontroller
} else if () { //condition 2, say indexpath.row == 1
  //go to secondviewcontroller
} else if () { //condition 3, say indexpath.row == 2
  //go to thirdviewcontroller
} 
```

这应该对你有用吗？

# jquery - Keep BG video from reloading on WP site?

> ID：13112656
> 
> 赞同：1
> 
> 时间：2012-10-28T20:21:18.170
> 
> 标签：jquery, wordpress, video

I'm wondering if anyone has any info on how I might keep a fullscreen background video playing throughout my site without reloading every time a link is clicked. My site is [http://armandwho.com/site](http://armandwho.com/site)

Any help/advice is greatly appreciated!

Joe

# php - PDO 将设置字段值更新为 0？

> ID：13112661
> 
> 赞同：0
> 
> 时间：2012-10-28T20:21:40.240
> 
> 标签：php, database, pdo

我尝试将旧的 php sql 脚本转换为 PDO，但它一直将用户点设置为 0 而不是添加 +15

这里是原文

```
<?php

session_start();
$db = mysqli_connect("host", "username", "password", "dbname"); 
$username = $_SESSION['username'];
mysqli_query($db, "UPDATE login_users SET Points=Points+15 WHERE username='$username'");

?> 
```

这是我尝试创建的 PDO 语句。我的语法错了吗？

```
<?php

session_start();
$db = new PDO('mysql:host;dbname=dbname;charset=UTF-8', 'username', 'password');
$username = $_SESSION['username'];
$Points = $db->exec("UPDATE login_users SET Points='Points+15' WHERE username='$username'");

?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T20:22:51.277

'Points+15' 是文字。你需要它没有单引号。

```
UPDATE login_users SET Points=Points+15 WHERE username='$username' 
```

更好的是，利用参数化：

```
$Points = $db->prepare("UPDATE login_users SET Points=Points+15 WHERE username=?");
$Points->execute(array($username)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T20:23:11.587

摆脱这些报价

```
SET Points='Points+15' WHERE 
```

# awk - awk replace multiline, delete Nth occurrence

> ID：13112662
> 
> 赞同：0
> 
> 时间：2012-10-28T20:21:47.767
> 
> 标签：awk, replace, multiline

I'm trying to use awk to replace a multiple string in a file. I have a repeated set of lines that I need to replace and delete. For example the file has

```
INSTANCE "INVX1":"physical"
"A" : "reset"
"Y" : "pp_resetbar"

INSTANCE "INVX1":"physical"
"A" : "reset"
"Y" : "pp_resetbar"

INSTANCE "INVX1":"physical"
"A" : "reset"
"Y" : "pp_resetbar" 
```

and I want to change/replace the first two and delete the 3rd, 4th, ..., Nth

```
INSTANCE "INVX1":"physical"
"A" : "reset"
"Y" : "pp_resetbar_b"

INSTANCE "BUFX2":"physical"
"A" : "pp_resetbar_b"
"Y" : "pp_resetbar" 
```

To be honest I don't even know where to start. I created a script to replace the Nth occurrence but doesn't seem work for this. See below. Any help will be more than appreciated.

```
awk -v search=$2 -v replace=$3 -v cnt=$4 '$0 ~ search{c++;if(c==cnt){sub(search,replace);}}1' "$file" > temp && mv temp "$file" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T02:54:26.373

未经测试但应该接近：

```
awk -v RS= -v ORS="\n\n" '
    { c = ++count[$0] }
    c == 1 { <replace some stuff> }
    c == 2 { <replace other stuff> }
    c <= 2
' file 
```

# python - Having more informative error messages in IDLE

> ID：13112669
> 
> 赞同：-1
> 
> 时间：2012-10-28T20:22:25.643
> 
> 标签：python, python-idle

friends
I am newbee in a python and i have some problems with IDLE on Windows I try to write some code like this but have an error

```
def n_ary(f):
        def n_ary_f(x, *args):
            return f(x) if not args else f(x, n_ary_f(args[0], args[1:]) # problem  there
        return n_ary_f  #but IDLE underline return 
```

Can anybody explain me how I can have more descriptive error message in IDLE?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T20:24:06.250

您在第三行缺少右括号。只需添加它：

```
return f(x) if not args else f(x, n_ary_f(args[0], args[1:]))
#                                                           ^ 
```

# image-processing - 如何水平镜像ascii艺术？

> ID：13112671
> 
> 赞同：7
> 
> 时间：2012-10-28T20:22:33.403
> 
> 标签：image-processing, awk, ascii-art

所以......我知道我可以使用`tac`或其他一些工具来反转文件中的行顺序，但是如何在另一个维度（即水平方向）中重新排序？我正在尝试使用以下 awk 脚本来做到这一点：

```
{
    out="";
    for(i=length($0);i>0;i--) {
        out=out substr($0,i,1)}
    print out;
} 
```

这似乎颠倒了字符，但它是乱码，我不明白为什么。我错过了什么？

我在 awk 中这样做，但有更好的方法吗？ `sed`， 也许？

这是一个例子。输入数据如下所示：

```
$ cowsay <<<"hello"
 _______
< hello >
 -------
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     || 
```

输出如下所示：

```
$ cowsay <<<"hello" | rev
_______ 
> olleh <
------- 
^__^   \        
_______\)oo(  \         
\/\)       \)__(            
| w----||                
||     || 
```

请注意，无论我使用`rev`还是我自己的 awk 脚本，输出都是相同的。正如你所看到的，事情是颠倒的，但是......它被破坏了。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-28T22:00:56.563

`rev`很好，但它不填充输入行。它只是颠倒它们。

您看到的“修改”是因为一行可能有 20 个字符长，而下一行可能有 15 个字符长。在您的输入文本中，它们共享一个左侧列。但在您的输出文本中，他们需要共享右侧列。

所以你需要填充。哦，还有不对称反转，正如 Joachim 所说。

这是我的`revawk`：

```
#!/usr/bin/awk -f

# 
length($0)>max {
    max=length($0);
}

{
    # Reverse the line...
    for(i=length($0);i>0;i--) {
        o[NR]=o[NR] substr($0,i,1);
    }
}

END {
    for(i=1;i<=NR;i++) {
        # prepend the output with sufficient padding
        fmt=sprintf("%%%ds%%s\n",max-length(o[i]));
        printf(fmt,"",o[i]);
    }
} 
```

（我这样做了`gawk`；我认为我没有使用任何傻瓜，但如果您使用的是更经典的`awk`变体，您可能需要调整它。）

使用与使用 rev 相同的方式。

```
ghoti@pc:~$ echo hello | cowsay | ./revawk | tr '[[]()<>/\\]' '[][)(><\\/]'
                    _______ 
                   < olleh >
                    ------- 
            ^__^   /        
    _______/(oo)  /         
/\/(       /(__)            
   | w----||                
   ||     || 
```

如果您打算这样做，您甚至可以通过将 awk 脚本添加到最后`printf`一行来运行翻译：

```
 printf(fmt," ",o[i]) | "tr '[[]()<>/\\]' '[][)(><\\/]'"; 
```

但我不推荐它，因为它会降低该`revawk`命令对其他应用程序的用处。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-28T22:00:38.567

你的线条长度不一样，所以倒转牛会打破它。您需要做的是将线“填充”为相同的长度，然后反转。

例如;

```
cowsay <<<"hello" | awk '{printf "%-40s\n", $0}' | rev 
```

将其填充到 40 列，然后反转。

编辑：@ghoti 做了一个脚本，肯定会击败这个简单的反向，看看他的答案。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-28T23:21:16.267

**`GNU awk`这是使用和的一种方法`rev`**

像这样运行：

```
awk -f ./script.awk <(echo "hello" | cowsay){,} | rev 
```

内容`script.awk`：

```
FNR==NR {
    if (length > max) {
        max = length
    }
    next
}

{
    while (length < max) {
        $0=$0 OFS
    }
}1 
```

或者，这是单线：

```
awk 'FNR==NR { if (length > max) max = length; next } { while (length < max) $0=$0 OFS }1' <(echo "hello" | cowsay){,} | rev 
```

结果：

```
 _______ 
                   > olleh <
                    ------- 
            ^__^   \        
    _______\)oo(  \         
\/\)       \)__(            
   | w----||                
   ||     || 
```

## -------------------------------------------------- ------------------------------------------

**这是另一种使用方式`GNU awk`：**

像这样运行：

```
awk -f ./script.awk <(echo "hello" | cowsay){,} 
```

内容`script.awk`：

```
BEGIN {
    FS=""
}

FNR==NR { 
    if (length > max) {
        max = length
    }
    next
}

{
    while (length < max) {
        $0=$0 OFS
    }
    for (i=NF; i>=1; i--) {
        printf (i!=1) ? $i : $i ORS
    }
} 
```

或者，这是单线：

```
awk 'BEGIN { FS="" } FNR==NR { if (length > max) max = length; next } { while (length < max) $0=$0 OFS; for (i=NF; i>=1; i--) printf (i!=1) ? $i : $i ORS }' <(echo "hello" | cowsay){,} 
```

结果：

```
 _______ 
                   > olleh <
                    ------- 
            ^__^   \        
    _______\)oo(  \         
\/\)       \)__(            
   | w----||                
   ||     || 
```

## -------------------------------------------------- ------------------------------------------

***解释：***

这是第二个答案的解释。我假设有以下基本知识`awk`：

```
FS=""                 # set the file separator to read only a single character
                      # at a time.

FNR==NR { ... }       # this returns true for only the first file in the argument
                      # list. Here, if the length of the line is greater than the
                      # variable 'max', then set 'max' to the length of the line.
                      # 'next' simply means consume the next line of input

while ...             # So when we read the file for the second time, we loop
                      # through this file, adding OFS (output FS; which is simply
                      # a single space) to the end of each line until 'max' is
                      # reached. This pad's the file nicely.

for ...               # then loop through the characters on each line in reverse.
                      # The printf statement is short for ... if the character is
                      # not at the first one, print it; else, print it and ORS.
                      # ORS is the output record separator and is a newline. 
```

您可能需要了解的其他一些事项：

`{,}`通配符后缀是重复输入文件名两次的简写。不幸的是，它不是标准的 Bourne shell。但是，您可以改为使用：

```
<(echo "hello" | cowsay) <(echo "hello" | cowsay) 
```

此外，在第一个示例中，`{ ... }1`是`{ ... print $0 }`

HTH。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-29T09:13:11.167

您也可以使用 bash、coreutils 和 sed 来实现（要使其与 zsh 一起使用，需要将 while 循环包装在 中`tr ' ' '\x01' | while ... | tr '\x01' ' '`，尚不知道为什么）：

```
say=hello
longest=$(cowsay "$say" | wc -L)

echo "$say" | rev | cowsay | sed 's/\\/\\\\/g' | rev |
  while read; do printf "%*s\n" $longest "$REPLY"; done |
  tr '[[]()<>/\\]' '[][)(><\\/]' 
```

输出：

```
 _______ 
                   < hello >
                    ------- 
            ^__^   /        
    _______/(oo)  /         
/\/(       /(__)            
   | w----||                
   ||     || 
```

这在最后留下了很多多余的空间，追加`| sed 's/ *$//'`删除。

### 解释

需要引用 cowsay 输出，尤其是 sed 通过复制它们来处理的反斜杠。为了获得正确的线宽`printf '%*s' len str`，使用它`len`作为字符串长度参数。最后，不对称字符被对应的字符替换，如*ghoti 的*回答中所做的那样。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-28T22:34:28.980

我不知道您是否可以在 AWK 中执行此操作，但以下是所需的步骤：

确定原件最长线的长度，您需要它为任何较小的线提供适当的间距。

```
 (__)\       )\/\ 
```

对于每行的最后一个字符，根据您从第一步中获得的内容来绘制行首空格的需求。

```
< hello >
//Needs ??? extra spaces, because it ends right after '>'.
//It does not have spaces after it, making it miss it's correct position after reverse.
        (__)\       )\/\
< hello >??????????????? 
```

对于每一行，应用该行所需的空格数，然后以相反的顺序添加原始字符。

```
 _______ 
                   > olleh <
                    ------- 
            ^__^   \        
    _______\)oo(  \         
\/\)       \)__(            
   | w----||                
   ||     || 
```

最后，将所有非水平对称的字符替换为水平相反的字符。（`<`到`>`、`[`到`]`等）

```
 _______ 
                   < olleh >
                    ------- 
            ^__^   /        
    _______/(oo)  /         
/\/(       /(__)            
   | w----||                
   ||     || 
```

* * *

需要注意的两件事：

*   如您所见，文本不会随着还原而正确。
*   和 和`$`等字符不是水平对称的，但也可能没有对立面，除非您使用专门的 Unicode 块。`%``&`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-28T22:00:25.580

我会说你可能需要每行都是固定的列宽，所以每行都是相同的长度。因此，如果第一行是一个字符后跟一个 LF，则需要在反转之前用空格填充反转。

# objective-c - 在 Windows 中为 Objective c gui 安装 gorm

> ID：13112673
> 
> 赞同：0
> 
> 时间：2012-10-28T18:38:11.480
> 
> 标签：objective-c

我已经从 gnustep.org 安装了 msys、core 和 devel。我对目标c的gui感兴趣。据我了解，我需要gorm。我下载了gorm，但我不确定我应该在哪里提取它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T03:41:00.817

根据[wiki](http://wiki.gnustep.org/index.php/Gorm_Installation_On_Windows)页面，构建需要在`Go to the Gorm directory under gnustep/dev-apps/Gorm`. 我建议您按照我提到的网页上给出的步骤进行操作。
步骤如下：

1.  按照此处所述安装 mingw：[在 Windows 上安装](http://wiki.gnustep.org/index.php/Installation_on_Windows)
2.  进入 gnustep/dev-apps/Gorm 下的 Gorm 目录
3.  执行以下命令：

    *   ## 首先构建 InterfaceBuilder 库...

        `ln -s GormLib InterfaceBuilder
        cd InterfaceBuilder
        make install`

    *   ## 现在构建 Gorm 本身...

        `cd ../
        make`

    *   ## 现在将调色板安装到应用程序中并安装

        `make install`

## 对于 0.9.5 (CVS) 或 0.9.10 之后的 Gorm 版本

从 Gorm 的 0.9.10 版本开始，构建不需要特别考虑。对于这些版本的 Gorm，上述页面已过时。只需从 Gorm 目录中 Windows 上 MinGW shell 的命令行中执行“make install”即可正确安装 Gorm。

# bash - 在模式和行中搜索并替换为 sed

> ID：13112676
> 
> 赞同：0
> 
> 时间：2012-10-28T20:23:04.857
> 
> 标签：bash, sed, replace

我经历了很多类似的帖子，但没有一个可以应用于我的。

我想以仅匹配第**一次出现**的方式在某些特定行中使用 sed 进行搜索和替换；假设我有这部分脚本：

```
processor  <- read.table("../mall_all/adpcm/FULL_DB-constprop", header=TRUE, colClasses=c("reassociate"="factor", "scalarrepl"="factor", "inline"="factor", "sccp"="factor", "loop_reduce"="factor"))

processor<-processor[-c(20:40)]

processor$intensity <- processor$int_high - processor$int_low
processor$performance<- processor$perf_high - processor$perf_low
processor<-processor[-c(1:4)]
processor<-processor[,!names(processor) %in% c("constprop")] 
```

我想继续更改**$constprop**变量

`"../mall_all/adpcm/FULL_DB-constprop"`

和

```
[,!names(processor) %in% c("constprop")] 
```

在我写的一个循环中，问题是；我希望**colClasses 参数**和**其余脚本**在进入循环时保持不变（循环具有编译器选项，例如：重新关联、内联、constprop 等）

我想知道为什么我的搜索和替换不起作用：

```
set -x
compilerOptionList="constprop dce inline instcombine licm loop_reduce loop_rotate loop_unroll loop_unswitch loop_unswitch mem2reg memcpyopt reassociate scalarrepl sccp simplifycfg "

stringToBeReplaced=constprop

for compilerOption in $compilerOptionList
do
        echo "Using compiler option: $compilerOption"

        //here you could see  the sed scripts

        sed -i "1,15  /FULL_DB/,/header/ s/$stringToBeReplaced/$compilerOption/" r.scr
        stringToBeReplaced=$compilerOption
        make
        mv Rplots.pdf Rplots_adpcm_$compilerOption.pdf
        echo "DONE! $compilerOption"
done 
```

感谢大家的时间和帮助；）

阿米尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T21:26:29.023

我不确定是否正确理解了您的需求，但可能类似于

```
sed -e "
    1,15ba;
    /FULL_DB/,/header/ba;
    bb;
    :a;
    s/stringToBeReplaced/$compilerOption/;
    :b;
  " -i r.scr 
```

可以完成这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T13:42:08.083

这条线有问题

```
sed -i "1,15  /FULL_DB/,/header/ s/$stringToBeReplaced/$compilerOption/" r.scr 
```

这不是有效的 sed 命令语法。你需要将它的一部分括在这样的大括号中

```
sed -i "1,15  { /FULL_DB/,/header/ s/$stringToBeReplaced/$compilerOption/ }" r.scr 
```

* * *

但我认为一种更整洁的方法是使用单独的文件进行输入和输出`sed`，即将该行更改为

```
sed "1,15 s/constprop/$compilerOption/" r.scr_tmp >r.scr 
```

你不需要这个`stringToBeReplaced`变量。这样你总是替换“constprop”，而不必担心要替换的字符串出现在代码的其他地方。

`r.scr_tmp`将包含相同的代码，`r.scr`只是`constprop`部分`r.scr_tmp`保持不变。

# android - layout_margin 不是从包含的 ImageView 继承的

> ID：13112689
> 
> 赞同：1
> 
> 时间：2012-10-28T20:24:28.270
> 
> 标签：android, xml, android-layout

所以我有两个文件：

```
where_include_happens.xml

<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/hours"
    android:layout_height="wrap_content"
    android:layout_width="60dp">

    <include android:id="@+id/some_id" 
        layout="@layout/whats_included"
        android:layout_width="18dp"
        android:layout_height="18dp" />

</RelativeLayout> 
```

和

```
whats_included.xml

<?xml version="1.0" encoding="utf-8"?>
<ImageView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_margin="6dp"
    android:contentDescription="@string/some_description"
    android:src="@drawable/some_awesome_drawable"  /> 
```

我的问题是这些元素中的每一个都应该有`android:layout_margin="6dp"`参数，但它似乎被 include :( 忽略了。[文档](http://developer.android.com/guide/topics/resources/layout-resource.html)中唯一与我相关的是：

> **注意：**如果要使用标签覆盖布局属性，则必须同时覆盖 android:layout_height 和 android:layout_width 以使其他布局属性生效。

我的问题是：

**有什么我没有看到的，还是我注定要`android:layout_margin="6dp"`在我的项目的每一个包含中都写？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T20:36:00.110

由于您的 include.xml 仅由单个 ImageView 组成，因此您可以不使用 include 指令，而是为您的 ImageView 定义样式并根据需要应用该样式。

# javascript - Jslider 值最小值/最大值

> ID：13112692
> 
> 赞同：0
> 
> 时间：2012-10-28T20:24:53.503
> 
> 标签：javascript, jquery

我正在尝试使用 jslider（minprice，maxprice），就像在这个例子中一样：http://egorkhmelev.github.com/jslider/ [如何](http://egorkhmelev.github.com/jslider/)
获得最小值和最大值？h 只返回当前值：/

```
 jQuery("#Slider5").slider({ from: 0, to: 3000, step: 10, dimension: '', scale: ['0', '1000', '2000', '3000'], limits: false, calculate: function( value ){
                            var h = value;
                            return (h+" $");
                          }}) 
```

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:46:01.080

我试过了，它的工作原理和**pauljz**和**jacktheripper**描述的完全一样。

这是我使用“值”参数的代码：

```
callback: function( value ){
alert("values: " + value.toString());
} 
```

显示，例如：“值：1;12”

这是我使用 slider() 方法的代码：

```
callback: function( not_used ){
var values = $("#Slider5").slider("value");
alert("values using .slider() method: " + values.toString());
} 
```

显示，例如：“使用 .slider() 方法的值：1;12”

我还分开了这样的值：

```
callback: function( values ){
var splitVals = values.split(';');
alert("separate values: " + splitVals[0] + ", " + splitVals[1]);
} 
```

我正在使用来自 Egor Khmelev 的 jSlider： [http ://egorkhmelev.github.com/jslider/](http://egorkhmelev.github.com/jslider/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T20:28:45.747

使用`$('#Slider5').slider("value");`. 它会返回类似的东西`"600;720"`，你可以拆分以获得最小/最大值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T20:30:16.307

```
var values = $("#Slider5").slider("value") 
```

将返回一个值数组。最小值将是`values[0]`和最大值`values[1]`。

# c - float - c 数据类型

> ID：13112695
> 
> 赞同：3
> 
> 时间：2012-10-28T20:25:19.083
> 
> 标签：c, types, floating-point, floating-point-precision

```
int main() {
float a = 20000000;
float b = 1;
float c = a+b;

if (c==a) { printf("equal"); }

else { printf("not equal");}
return 0;
} 
```

当我运行它时，它说“相等”。但是当我将 a 的值更改为 2000000（少一个零）时，答案是否定的。为什么 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-28T20:33:42.357

通常，a`float`的精度为 24 位。数字 20000001 = 0x1312d01 需要 25 位才能准确表示，所以必须四舍五入。两个可表示值之间正好中间的值的正常舍入模式是舍入到最后一位零，因此 20000001 被舍入到 20000000 作为`float`.

2000001 = 0x1e8481 需要少于 24 位来表示 (21)，因此不需要四舍五入。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-28T20:30:53.887

浮点数通常是近似值而不是精确值。你可以在这里读到所有和它有关的：

[http://en.wikipedia.org/wiki/Floating_point](http://en.wikipedia.org/wiki/Floating_point)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T20:32:00.443

如果您将两个变量声明为 float 类型，那么即使您将这两个值相同。如果你比较相等，你会得到不可预测的结果。有关表示浮点数的 IEEE 标准 (IEEE 754) 的更多详细信息，请访问 Google。 [维基百科文章](http://en.wikipedia.org/wiki/IEEE_floating_point)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T20:31:11.240

浮动精度。

[在 16、32 和 64 位 IEEE-754 系统中可以表示什么范围的数字？](https://stackoverflow.com/questions/872544/precision-of-floating-point)

[http://en.wikipedia.org/wiki/Floating_point](http://en.wikipedia.org/wiki/Floating_point)

[http://en.wikipedia.org/wiki/Single-precision_floating-point_format](http://en.wikipedia.org/wiki/Single-precision_floating-point_format)

# javascript - 正常的 AJAX 到 jquery 的转换

> ID：13112696
> 
> 赞同：0
> 
> 时间：2012-10-28T20:25:19.897
> 
> 标签：javascript, jquery, xml, ajax

```
function func1(a,b) {
var xmlhttp;
if (window.XMLHttpRequest) {
xmlhttp=new XMLHttpRequest();
}

xmlhttp.onreadystatechange=function() {
if (xmlhttp.readyState==4 && xmlhttp.status==200) {
   document.getElementById("test").innerHTML=xmlhttp.responseText;
}
}
xmlhttp.open("GET","includes/funkcije.php?min="+a+"&max="+b,true);
xmlhttp.send(); 
```

我试图做点什么，但它不起作用。它只是把我放在页面的顶部

```
$('#page-01').ajax({
type: "GET",
url: "includes/funkcije.php",
data: "min=0&max=10",
success: function(data) {
    $('#test').text(data);
}
})
$('#page-02').ajax({
url: "includes/funkcije.php",
data: "min=10&max=20",
success: function(data) {
    $('#test').text(data);
}
}) 
```

这些是我按下执行 func1 的链接

```
<li><a id="page-01" href="javascript:func1(0,10)">1</a></li>
<li><a id="page-02" href="javascript:func1(10,20)">2</a></li> 
```

这是为了列出我的网站[Tristann.tk](http://tristann.tk "tristann.tk")上的帖子页面。有人可以帮我解决这个问题或告诉我制作这些页面的更好方法吗？

我用这段代码修复了它：

```
$(document).ready(function(){
$('#page-01').on('click', function () {
    $.ajax({
        type: "GET",
        url: "includes/funkcije.php",
        data: "min=0&max=10",
        success: function(data) {
            $('#test').html(data);
        }
    });
});

$('#page-02').on('click', function () {
    $.ajax({
        type: "GET",
        url: "includes/funkcije.php",
        data: "min=10&max=20",
        success: function(data) {
            $('#test').html(data);
        }
    });
});
}); 
```

链接是这样的：

```
<a id="page-01" href="javascript:void(0)">1</a>
<a id="page-02" href="javascript:void(0)">2</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T20:28:24.207

查看 jquery 加载并获取

```
$('#test').load("includes/funkcije.php?min=0&max=10"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T20:28:04.907

尝试

```
$('#page-01').on('click', function () {
    $.ajax({
        type: "GET",
        url: "includes/funkcije.php",
        data: "min=0&max=10",
        success: function(data) {
            $('#test').text(data);
        }
    });
});

$('#page-02').on('click', function () {
    $.ajax({
        type: "GET",
        url: "includes/funkcije.php",
        data: "min=10&max=20",
        success: function(data) {
            $('#test').text(data);
        }
    });
}); 
```

您不能在 jQuery 对象上调用 ajax 函数 - 您只能在成功函数中定位对象。查看[jQuery 文档](http://api.jquery.com/jQuery.ajax/)。

**编辑**

HTML：

```
<li><a id="page-01" href="javascript:func1(0,10)">1</a></li>
<li><a id="page-02" href="javascript:func1(10,20)">2</a></li> 
```

Javascript：

```
var func1 = function(min, max) {
    $.ajax({
        type: "GET",
        url: "includes/funkcije.php",
        data: "min=" + min + "&max=" + max,
        success: function(data) {
            $('#test').text(data);
        }
    });        
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T20:48:34.310

您可能想做这样的事情，您可以使用 $.ajax 而不是 getData 函数。

```
function getData(dest, param) {

  var XMLHttpRequestObject = false;

  if(window.XMLHttpRequest) {
    XMLHttpRequestObject = new XMLHttpRequest();
  } else if(window.ActiveXObject) {
    XMLHttpRequestObject = new ActiveXObject("Microsoft.XMLHTTP");
  }

  if(XMLHttpRequestObject) {

    var div = document.getElementById(dest);

    XMLHttpRequestObject.open("GET", "includes/funkcije.php?" + param);

    XMLHttpRequestObject.onreadystatechange = function() {

      if(XMLHttpRequestObject.readyState == 4 && XMLHttpRequestObject.status == 200) {

        div.innerHTML = XMLHttpRequestObject.responseText;
        XMLHttpRequestObject.delete;
        XMLHttpRequestObject = false;

      }
    }
    XMLHttpRequestObject.send(null);
  }
}

$("#page-01").click(getData("#test", "min=0&max=10"));
$("#page-02").click(getData("#test", "min=0&max=20")); 
```

# java - 如何从 src 在 java 中播放声音文件

> ID：13112699
> 
> 赞同：2
> 
> 时间：2012-10-28T20:25:34.883
> 
> 标签：java, eclipse

我有一个 mp3 文件，我试图从 eclipse (java) 中的源包播放，由于某种原因，当我在 eclipse 中运行它时它可以正常播放，但是当我尝试从 .jar 播放它时它不播放。图像显示正常，但声音没有，我想我可能需要像图像文件一样重新编码声音文件，但我不确定图像的代码如何：

```
JLabel TextBox = new JLabel(new ImageIcon(Toolkit.getDefaultToolkit().getImage(getClass().getResource("/Images/TextBox.png")))); 
```

和声音

```
Player player = Manager.createPlayer(new MediaLocator(getClass().getClassLoader().getResource("Sounds/Bonsai.mp3"))); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T20:35:49.537

这：

```
getClass().getClassLoader().getResource(....) 
```

确实返回了一个 URL。但是 MediaLocator 不能使用 jar:file:/ 形式的 URL

我建议将文件从 jar 复制到“临时”文件系统并从那里流式传输。如果需要，您可以在完成后将其删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T20:39:13.543

尝试将资源作为流获取。您可以通过这种方式检索文件。

```
InputStream fis = 
    ClassLoader.getSystemClassLoader().getResourceAsStream("/Sounds/bonsai.mp3");
p = new Player(fis);
p.play(); 
```

# mysql - 选择与内连接条件不匹配的行

> ID：13112701
> 
> 赞同：2
> 
> 时间：2012-10-28T20:25:53.060
> 
> 标签：mysql, join

我有两个表，一个包含大量链接（tvlinks），另一个包含要与链接名称匹配的子字符串列表（tvshows）：

```
tvlinks:
  id      (int 11) - primary index key
  name    (text)   - name of the tv show link
  link    (text)   - link to a website with information about the tv show

tvshows:
  id      (int 11) - primary index key
  name    (text)   - name of the tv show
  match   (text)   - substring to be matched against name in tvlinks table 
```

tvlink 中可以有多行名称完全相同但链接不同。没有重复的行。

我使用以下查询从 tvlinks 中获取所有行，其中 tvshows.match 是 tvlinks.name 的子字符串：

```
SELECT l.id,
       l.name,
       l.link
    FROM tvlinks tvl
  INNER JOIN tvshows tvs
  ON ( INSTR(tvl.name, tvs.match )
  ORDER BY tvl.name
; 
```

它工作正常，我的问题是我想组合另一个查询，它只返回与上面的查询不匹配的行。

一两个星期以来，我一直在不停地敲击键盘，我敢肯定这是一件非常简单的事情，我在很大程度上错过了它。:)

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T20:31:37.397

`select id from tvlinks where id not in (select l.id, FROM tvlinks tvl INNER JOIN tvshows tvs ON ( INSTR(tvl.name, tvs.match ) ORDER BY tvl.name ;)`

本身效率不高，完全取决于您的桌子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T20:31:10.493

`INSTR()`- 返回子字符串第一次出现的索引 - 不是你需要的条件

# ruby-on-rails - 运行 rake 任务时出现语法错误

> ID：13112703
> 
> 赞同：1
> 
> 时间：2012-10-28T20:26:11.540
> 
> 标签：ruby-on-rails, ruby, rake, rake-task

我是 ruby​​ 和 rails 的新手，所以我仍在尝试掌握 ruby​​ 的语法和结构。我正在按照[教程](http://dwradcliffe.com/2011/12/29/import-csv.html)使用任务和 rake 导入 csv 文件。我不断收到语法错误。我不确定我错过了什么，我看不出示例和我的代码之间有什么区别。

```
require 'csv'

    desc "Import Voters from CSV File"

    task :import => [:environment] do

      file ="db/my.csv"

      CSV.foreach(file, :headers => true) do |row|
        Voter.create{
          :last_name => row[0]
        }  

      end

(See full trace by running task with --trace)
Erics-MacBook-Air:cloudvoters ecumbee$ rake db:import --trace
rake aborted!
/Users/ecumbee/Desktop/cloudvoters/lib/tasks/import.rake:11: syntax error, unexpected tASSOC, expecting '}'
      :last_name => row[0], 
                   ^
/Users/ecumbee/Desktop/cloudvoters/lib/tasks/import.rake:12: syntax error, unexpected '}', expecting '='
    }  
     ^ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T20:35:41.577

您缺少括号，该括号将围绕您作为 create 函数参数提供的哈希

```
 Voter.create({
      :last_name => row[0]
    }) 
```

您也可以跳过括号和大括号

```
 Voter.create :last_name => row[0] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T04:40:24.923

正如@pjam 指出的那样，您必须在花括号之前使用括号，或者同时跳过两者。

例如。`Voter.create :last_name => row[0]`

与此相关的另一个问题`unexpected $end, expecting kEND end`是您缺少`end`

```
require 'csv'

desc "Import Voters from CSV File"

task :import => [:environment] do

  file ="db/my.csv"

  CSV.foreach(file, :headers => true) do |row|
    Voter.create{
      :last_name => row[0]
    }  

  end 
```

您正在`CSV.foreach`用最后一行结束块，`end`但没有结束`task` 所以通过添加额外的`end`这个错误将被删除。

希望这可以帮助。

# vb.net - 从通过以太网连接的条形码扫描仪捕获数据

> ID：13112704
> 
> 赞同：1
> 
> 时间：2012-10-28T20:26:20.890
> 
> 标签：vb.net, winforms, barcode-scanner

我有一个 vb.net 应用程序，它需要从 TextBox 中的条形码扫描仪中捕获读数。

据我所知，扫描仪将数据作为击键发送，但我不知道当它通过以太网电缆连接时是否仍然适用

那么，直截了当，扫描仪会自动将数据发送到文本框吗？还是需要使用套接字来处理读数？在那种情况下，请有人指出我正确的方向。

提前致谢。

-X-

如果您问，扫描仪是 COGNEX DATAMAN 500QL

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T06:17:54.540

您是否尝试过从他们的[支持站点](https://support.cognex.com/downloads/dataman/software-firmware)下载软件和驱动程序？

# windows-7 - 从桌面或程序中调用时，相同的 BAT 文件表现不同

> ID：13112711
> 
> 赞同：3
> 
> 时间：2012-10-28T20:27:07.713
> 
> 标签：windows-7, batch-file

我正在使用 Windows 7。一旦发生声音，我想触发一个 BAT 文件运行。

BAT 文件应触发 Skype 通话。

为此，我正在使用以下 BAT 命令：

```
c:\"Program Files"\Skype\Phone\skype /callto:someUsername 
```

Skype 应该在触发之前已经运行。如果我在我的桌面上双击这个BAT文件，它会流畅运行，弹出Skype，开始通话。

现在我正在使用[ISpy 软件](http://www.ispyconnect.com/)在指定的声音阈值上触发 BAT 文件。

ISpy 工作正常。它检测声音并触发 BAT 文件。但是当 BAT 文件开始运行时，它不会弹出 Skype，而是尝试加载新的 Skype 实例。

通过双击或在 ISpy 中调用 BAT 文件之间是否存在上下文差异？

我该如何克服呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T01:44:06.353

@PaulojFonseca 自此帖子发布一天后（即 2012 年 10 月 29 日）后就没有签到，所以他不太可能回来发布他的答案。即使他不会在这里接受他*自己的*答案，我也会发布它，这样至少它会出现。我已经对其进行了编辑，以使答案在没有太多上下文的情况下更易于阅读。

“...在运行 ISpy 时，...并非所有 [需要的] 权限都已启用。如果我在安全首选项中更改此设置，则批处理文件运行顺畅。”

# c# - 如何将子项添加到列表 C#

> ID：13112713
> 
> 赞同：0
> 
> 时间：2012-10-28T20:27:32.130
> 
> 标签：c#, polymorphism

好的，我是 C# 新手，有一个简短的问题。我现在正在学习 XNA，我需要一个循环来绘制我所有的项目。

```
public class DrawnObject
{
//Declare some Variables
    void draw()
    {
        //Draw Stuff
    }
}

public class child1 : Drawnobject
{
    //More Code
}

public class child2 : Drawnobject
{
    //More Code
}

public class Game1
{
    public List<DrawnObject> drawlist;
    child1 child1object;
    child2 child2object;
    DrawnObject parentobject;

    public void dosomthin()
    {
        drawlist.Add(child1);
        drawlist.Add(child2);
        drawlist.Add(parentobject);
    }
} 
```

这就是我所拥有的，遗憾的是它不起作用。它给了我错误：'ObjectParentTest.child1' 是一个'类型'，但它像一个'变量'一样使用。在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T20:28:28.423

您正在尝试将类型添加到列表中，而不是添加对象（您的字段名称是`child1object`，`child1`是您的字段的类型）：

```
drawlist.Add(child1object); // instead of drawlist.Add(child1)
drawlist.Add(child2object); // instead of drawlist.Add(child2) 
```

您还需要在将它们添加到列表之前为这些变量分配一些值：

```
public List<DrawnObject> drawlist = new List<DrawnObject>();
child1 child1object = new child1();
child2 child2object = new child2();
DrawnObject parentobject = new DrawnObject(); 
```

还有一个提示——在 C# 中，我们使用`Pascal`类型的名称。因此，它更好地使用`Child1`，`Child2`而不是。至少你会看到类型名称在哪里，变量的名称在哪里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T20:29:16.733

您正在使用类型`child1`而不是变量`child1object`，与`child2`.

# windows - 如何在 Windows 上运行 Git 服务器？

> ID：13112718
> 
> 赞同：16
> 
> 时间：2012-10-28T20:27:50.157
> 
> 标签：windows, git

如何在 Windows 上共享 Git 存储库？“正确”的方法似乎是运行“git-daemon”（特定于 unix）或运行 ssh（特定于 unix）或为 Git 运行 http 前端。如果我只有两个 Windows 机器并且不想安装 Unix 只是为了运行 Git，那么在两个机器之间共享存储库的最佳方式是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-28T20:50:45.277

如果两台机器在同一个 LAN 中，您可以将 repo 放在通过常规 Windows 网络协议 (SMB) 共享的目录中。

（免责声明：我不确定 SMB 的锁定语义，因此可能同时写入 repo 可能会破坏它。再说一次，Unix 可能也是如此。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-29T07:18:54.360

如果你想要最简单的方法，你必须在[SCM-manager看到](http://www.scm-manager.org/)

> 通过 http 共享和管理 Git、Mercurial 和 Subversion 存储库的最简单方法。

为了拥有具有良好[Web 前端](http://www.scm-manager.org/screenshots/)和管理的 http 服务存储库，您必须[只有 Java](https://bitbucket.org/sdorra/scm-manager/wiki/getting-started)（Java，而不是 JRE）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-29T02:29:53.923

另一种替代运行虚拟机的方法是在[Cygwin](http://www.cygwin.com/)中运行所有 Unix 的东西。使用 Cygwin，您可以在 Windows 机器上设置 ssh 服务器以及 gitolite。它在您的硬件而不是虚拟机上本机运行。

Cygwin 安装非常简单。它只是一个下载您需要的软件包的可执行文件。保留安装程序，因为您将使用它在 Cygwin 中添加和删除软件。

在 Cygwin 上运行 gitolite 并不那么简单，只需 google “cygwin gitolilte”，你会发现很多教程。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-29T04:27:05.057

Git 是一个分布式版本控制系统。因此，在大多数情况下，您不需要专门的程序来提供存储库中的内容，您只需要一种从两台机器访问存储库的方法。这样做的一种方法就像@thomas 建议的那样，并将存储库的克隆放置在共享网络位置。

作为一名破产的研究生，我过去发现的另一种成功方法是使用 Dropbox 作为“主”存储库。基本上，您将存储库 git 克隆到您的 Dropbox 目录中，然后您可以在两台机器上设置 Git 以从 Dropbox 存储库推/拉。Dropbox 将在后台执行同步魔法。这仅适用于轻度活跃的存储库。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T02:10:07.007

我过去所做的只是通过虚拟机在一台机器上运行带有小型 linux 客户端的 VM。您只需要端口转发 ssh 端口就可以了 - 无需将网络配置为 VM 上的复杂内容。

这将允许您运行诸如 gitolite 之类的东西来管理用户。

由于这个和许多其他原因，我已经切换到为我的所有机器运行 Linux，并且当我需要进行 Windows 开发时只在 VM 中运行 Windows。您可以在 Linux 上运行的许多出色服务比其他方式更容易从来宾操作系统连接。

如果您只有 2 台 windows 机器，您可以向远程添加一个 url，但要确保它是通过文件协议完成的。IE：

```
 git remote add origin file:///\\some-server/share/repo.git 
```

有些人声称，如果你只使用一条路径，git 会尝试在 2 个 repos 之间建立硬链接。AFAIK，msysgit 不这样做，您可以使用没有文件协议的路径：

```
 git remote add origin /z/somepath/repo.git 
```

如果 z 映射到另一台机器上的共享。我不需要在您的场景中运行服务器。

# mysql - 将大型 MySQL 表导出为多个较小的文件

> ID：13112720
> 
> 赞同：12
> 
> 时间：2012-10-28T20:27:59.913
> 
> 标签：mysql, export

我的本地开发服务器上有一个非常大的 MySQL 表：超过 800 万行数据。我使用 LOAD DATA INFILE 成功加载了表。

我现在希望导出这些数据并将其导入远程主机。

我尝试将 LOAD DATA LOCAL INFILE 加载到远程主机。但是，大约 15 分钟后，与远程主机的连接失败。我认为唯一的解决方案是将数据导出到多个较小的文件中。

我可以使用的工具是 PhpMyAdmin、HeidiSQL 和 MySQL Workbench。

我知道如何导出为单个文件，而不是多个文件。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-05-30T09:33:47.550

我刚刚对具有 5000 万条记录的（分区）表进行了导入/导出，只需 2 分钟即可将其从相当快的机器导出，并将其导入速度较慢的桌面只需 15 分钟。没有必要拆分文件。

mysqldump 是你的朋友，知道你有很多数据最好压缩它

```
 @host1:~ $ mysqldump -u <username> -p <database> <table> | gzip > output.sql.gz
 @host1:~ $ scp output.sql.gz host2:~/
 @host1:~ $ rm output.sql.gz
 @host1:~ $ ssh host2
 @host2:~ $ gunzip < output.sql.gz | mysql -u <username> -p <database>
 @host2:~ $ rm output.sql.gz 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-28T20:34:31.300

看看[mysqldump](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html)

您的线路应该是（从终端）：

从 mysql 中的 db_name 导出到 backupfile.sql：

```
mysqldump -u user -p db_name > backupfile.sql 
```

从备份文件导入到 mysql 中的 db_name：

```
mysql -u user -p db_name < backupfile.sql 
```

为了拆分信息，您有两种选择：

1.  将输出文本文件拆分为较小的文件（根据需要，使用许多工具来执行此操作，例如[split](http://en.wikipedia.org/wiki/Split_%28Unix%29)）。
2.  每次使用在 db_name 之后添加表名的选项导出一个表，如下所示：

    `mysqldump -u user -p db_name table_name > backupfile_table_name.sql`

压缩文件（文本文件）非常有效，可以将其最小化到原始大小的 20%-30% 左右。

将文件复制到远程服务器应使用[scp](http://en.wikipedia.org/wiki/Secure_copy)（安全复制）完成，并且应使用 ssh 进行交互（通常）。

祝你好运。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-29T00:33:10.130

我发现 phpMyAdmin 中的高级选项允许我选择要导出的行数以及起点。这使我可以根据需要创建尽可能多的转储文件，以将表放到远程主机上。

我不得不调整我的 php.ini 设置，加上 phpMyAdmin config 'ExecTimeLimit' 设置，因为生成转储文件需要一些时间（每个 500,000 行）。

我使用 HeidiSQL 进行导入。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-28T20:36:47.280

作为单个表的 mysqldump 方法的示例

```
mysqldump -u root -ppassword yourdb yourtable > table_name.sql 
```

然后导入就像

```
mysql -u username -ppassword yourotherdb < table_name.sql 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-12T11:48:17.917

如果您不习惯使用[mysqldump](https://dev.mysql.com/doc/refman/5.1/en/mysqldump.html)命令行工具，这里有两个 GUI 工具可以帮助您解决这个问题，尽管您必须能够通过 FTP 将它们上传到服务器！

**[Adminer](http://www.adminer.org/)**是一款小巧且非常高效的 DB Manager 工具，它至少与 PHPMyAdmin 一样强大，并且只有一个必须上传到服务器的单个文件，这使得它非常易于安装。与 PMA 相比，它适用于大型表/数据库的效果要好得多。

**[MySQLDumper](http://www.mysqldumper.net/)**是专门为导出/导入大型表/数据库而开发的工具，因此它对您描述的情况没有问题。唯一的缺点是安装起来有点乏味，因为有更多的文件和文件夹（约 350 个文件在 ~1.5MB 中），但通过 FTP 上传也不应该是问题，它肯定会得到完成的工作:)

所以我的建议是首先尝试Adminer，如果那个也失败了，那就走MySQLDumper路线。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-28T20:43:59.403

用于`mysqldump`将表转储到文件中。然后使用`tar`with`-z`选项压缩文件。将其传输到您的远程服务器（使用`ftp`或`sftp`其他文件传输实用程序）。然后在远程服务器上解压文件`mysql`用于导入文件。

没有理由拆分原始文件或导出多个文件。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-21T02:53:23.760

[如何将大型 MySQL 备份文件拆分为多个文件？](https://stackoverflow.com/questions/3840848/how-do-i-split-a-large-mysql-backup-file-into-multiple-files/35531703)

您可以使用 mysql_export_explode [https://github.com/barinascode/mysql-export-explode](https://github.com/barinascode/mysql-export-explode)

```
<?php 
#Including the class

include 'mysql_export_explode.php';
$export = new mysql_export_explode;

$export->db = 'dataBaseName'; # -- Set your database name
$export->connect('host','user','password'); # -- Connecting to database
$export->rows = array('Id','firstName','Telephone','Address'); # -- Set which fields you want to export
$export->exportTable('myTableName',15); # -- Table name and in few fractions you want to split the table
?>

At the end of the SQL files are created in the directory where the script is executed in the following format
---------------------------------------
myTableName_0.sql
myTableName_1.sql
myTableName_2.sql
... 
```

# ruby-on-rails - 包含嵌套表单的深层嵌套表单

> ID：13112741
> 
> 赞同：1
> 
> 时间：2012-10-28T20:30:30.853
> 
> 标签：ruby-on-rails, nested-forms

我看到了关于使用深度嵌套表单进行调查的 railscast：
[http ://railscasts.com/episodes/196-nested-model-form-revised?view=asciicast](http://railscasts.com/episodes/196-nested-model-form-revised?view=asciicast)

你将如何在 Rails 中构建类似的东西来实际 /take/ 调查，而不是仅仅构建它以在文本中显示？您将如何制作一个包含用户填写的调查表的深层嵌套表单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T17:50:39.403

需要考虑的几件事：使用 fields_for （这是构造子表单）。使用nested_form 继续构建子表单（n 数量） - [https://github.com/ryanb/nested_form](https://github.com/ryanb/nested_form)

# python - Python — bltinmodule.c 中 builtin_print 方法的参数

> ID：13112742
> 
> 赞同：0
> 
> 时间：2012-10-28T20:30:33.980
> 
> 标签：python

这个问题来自我之前的[问题](https://stackoverflow.com/questions/13098524/need-to-find-the-source-code-for-print-or-printf-in-python)。

我不必更改 builtin_print() 的整个实现。我只需要为例如'python'寻找一个特定的参数。

对于以下语句——</p>

```
from __future__ import print_function
print('python') 
```

每当有'python'的打印时，我希望我的代码做其他事情。问题是：

```
builtin_print(PyObject *self, PyObject *args, PyObject *kwds) 
```

args 是 PyObject 类型。我无法使用“Python”来 strcmp 或 memcmp args[1]。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T20:57:49.107

Python 解释器处理的对象是 Python 对象，而不是 C 对象。因此，您必须使用特定于解释器的函数来与 C 字符串进行比较，如下所示：

```
PyObject *o = PyTuple_GetItem(args, i);
if (PyUnicode_CheckExact(o) && PyUnicode_CompareWithASCIIString(o, "Python")==0){
    printf("Do something else ..\n");
} else {
    err = PyFile_WriteObject(o, file, Py_PRINT_RAW);
    if (err)
        return NULL;
} 
```

添加它来代替[当前代码](http://hg.python.org/cpython/file/937fa81500e2/Python/bltinmodule.c#l1671)。对于较旧的 2.7.3 版本，您必须使用 PyString* 系列函数，例如

```
if (PyUnicode_CheckExact(o)) {
    PyObject* utf8 = PyUnicode_AsUTF16String(o);
    if (strcmp(PyString_AsString(o), "Python")==0) {
        printf("Do something else (unicode)\n");
    }
    Py_DECREF(utf8);
} else if (PyString_CheckExact(o) && strcmp(PyString_AsString(o), "Python")==0){
    printf("Do something else (str) ..\n");
} else {
    err = PyFile_WriteObject(o, file, Py_PRINT_RAW);
    if (err)
        return NULL;
} 
```

请注意，这不处理 unicode 字符串 ( `u'Python'`)，您可以使用 . 您可能还对修改`case PRINT_ITEM`in感兴趣`Modules/ceval.c`，它处理 print*语句*。

请注意，除了调用之外，Python 程序还有其他打印方式`print`，包括写入`sys.stdout`或让原生 (C) 函数进行打印。

# ios - 在不同的表视图控制器之间传递对模型的引用

> ID：13112751
> 
> 赞同：0
> 
> 时间：2012-10-28T20:32:08.550
> 
> 标签：ios

我正在学习iOS。我有一个表格视图控制器，它采用 booksdatacontext 对象（存储图书对象）作为其数据源。我想显示一个按价格对这些书籍进行排序的报告作为第二个表格视图。我/应该如何在第二个表视图中引用模型（即作为数据源的数据控制器对象）？现在，我正在尝试在第一个视图的准备 segue 方法中分配第二个视图的 dataController ——但得到下面的错误。

```
if ([[segue identifier] isEqualToString:@"priceReport"]) {
    priceReportViewController  *priceController = [segue destinationViewController];
    priceController.dataController = self.dataController; //throws -[UINavigationController setDataController:]: unrecognized selector sent to instance 

} 
```

我在 priceReportViewController 的 .h 文件中声明了一个 datacontroller 属性

```
#import <UIKit/UIKit.h>
#import "booksDataController.h"

@class Book;

@interface priceReportViewController : UITableViewController
@property (strong, nonatomic) booksDataController *dataController;
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T21:02:35.503

你的 segue 的目的地是 UINavigationController。访问它的根视图控制器属性以获取价格列表视图控制器，然后设置它的 dataController 属性

编辑：或者，您可以（就像您所做的那样）将您的 segues 链接到情节提要中的实际视图控制器，而不是嵌入它们的导航控制器。

# php - 尝试使用 PHP 从数据库中删除一行

> ID：13112754
> 
> 赞同：-1
> 
> 时间：2012-10-28T20:32:57.973
> 
> 标签：php

我正在尝试在单击删除链接时从数据库中删除一行。但收到以下错误消息：

您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '' 附近使用正确的语法

下面是代码：

remove_db.php

```
<html>
<body>

<?php
//session_start();
$myusername = $_SESSION['uname'];

$host="localhost"; // Host name
$username="root"; // Mysql username
$password=""; // Mysql password
$db_name="vacation_tool"; // Database name
$tbl_name="login"; // Table name

// Connect to server and select databse.
$con = mysql_connect("$host", "$username", "$password")or die("cannot connect");
mysql_select_db("$db_name")or die("cannot select DB");

$query="select EmployeeID,FirstName,LastName,ManagerName from users";

$result=mysql_query($query);

$num=mysql_numrows($result) or die ("error in function_name: <br>Sql: " . $sql . "<br>" . mysql_error());

//mysql_close();
?>
<div id="bv_Text2" style="position:absolute;left:480px;top:250px;width:550px;height:16px;z-index:5;" align="left">
<table border="1" cellspacing="2" cellpadding="2">
<tr width = "100%">
<td width = "15%" align = "center"><font style="font-size:13px" color="#000000" face="Arial"><b>Employee ID</b></font></td>
<td width = "20%" align = "center"><font style="font-size:13px" color="#000000" face="Arial"><b>First Name</b></font></td>
<td width = "20%" align = "center"><font style="font-size:13px" color="#000000" face="Arial"><b>Last Name</b></font></td>
<td width = "20%" align = "center"><font style="font-size:13px" color="#000000" face="Arial"><b>Manager Name</b></font></td>

</tr>
</div>

<?php
$i=0;
while ($i < $num) {

$f1=mysql_result($result,$i,"EmployeeID");
$f2=mysql_result($result,$i,"FirstName");
$f3=mysql_result($result,$i,"LastName");
$f4=mysql_result($result,$i,"ManagerName");

?>
<div id="bv_Text2" style="position:absolute;left:480px;top:260px;width:144px;height:16px;z-index:6;" align="left">
<tr>
<td align = "center"><font style="font-size:13px" color="#000000" face="Arial"><?php echo $f1; ?></font></td>
<td align = "center"><font style="font-size:13px" color="#000000" face="Arial"><?php echo $f2; ?></font></td>
<td align = "center"><font style="font-size:13px" color="#000000" face="Arial"><?php echo $f3; ?></font></td>
<td align = "center"><font style="font-size:13px" color="#000000" face="Arial"><?php echo $f4; ?></font></td>
<td align = "center"><font style="font-size:13px" color="#000000" face="Arial"><?php echo '<td><a href="remove.php?EmployeeID=' . $num['EmployeeID'] . '">Remove</a></td>'; ?></font></td>
</tr>
</div>
<?php
$i++;
}
?>
</body>
</html> 
```

和 remove.php ：

```
<?php

session_start();
$myusername = $_SESSION['uname'];

$host="localhost"; // Host name
$username="root"; // Mysql username
$password=""; // Mysql password
$db_name="vacation_tool"; // Database name
$tbl_name="login"; // Table name

// Connect to server and select databse.
$con = mysql_connect("$host", "$username", "$password")or die("cannot connect");
mysql_select_db("$db_name")or die("cannot select DB");

// username and password sent from form

if (isset($_GET['EmployeeID']))
 {
 // get id value
 $EmployeeID = $_GET['EmployeeID'];

 // delete the entry

 $query = "DELETE FROM users WHERE EmployeeID = $EmployeeID";

 $result = mysql_query($query) or die(mysql_error());

 // redirect back to the view page
 header("Location: remove_user.php");
 }
 else
 // if id isn't set, or isn't valid, redirect back to view page
 {
 echo "Error";
 }

 ?> 
```

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T20:37:38.990

代替

```
$query = "DELETE FROM users WHERE EmployeeID = $EmployeeID"; 
```

和

```
$query = sprintf("DELETE FROM users WHERE EmployeeID ='%s'",
mysql_real_escape_string($EmployeeID)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T20:38:41.253

您的代码状态

```
<a href="remove.php?EmployeeID=' . $num['EmployeeID'] . '">Remove</a></td>'; ?></font> 
```

但是`EmployeeID`在里面`$f1`，不在里面`$num`。`$num`甚至不是一个数组。

所以除了上面的错误（你应该使用过`$f1`）之外，你正在做一些其他的事情，你可以做的不是那么好：

*   您还没有配置 PHP 来通知您可能收到的*所有*警告、错误等。
*   您正在接受来自外部的值并在查询中使用它，从而使自己暴露于 SQL 注入攻击（`EmployeeID = (int)$_GET['EmployeeID']`至少使用）
*   您正在使用[不鼓励](http://www.php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated)`mysql_*`使用的函数。请改用 PDO 或 mysqli。
*   您没有将 PHP 代码与 HTML 演示文稿分开。

虽然完全有可能在不注意上述任何提示的情况下进行编程，但您会发现遵循它们更容易、更有效率并且*更有趣。*我为这种傲慢的语气道歉，但我很难发现这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T20:39:33.373

看起来您传递了错误的员工 ID。员工 ID 分配给 $f1，并且您在 url 中使用 $num['employeeID']，它应该为空。

删除链接必须是：

```
 <td align = "center"><font style="font-size:13px" color="#000000" face="Arial"><?php echo '<td><a href="remove.php?EmployeeID=' . $f1 . '">Remove</a></td>'; ?></font></td> 
```

逐步调试总是有帮助的，这样您就可以自己弄清楚。在这种情况下 ：

1.  HTML查看源码，并查看URL
2.  打印 $_GET['employeeID']
3.  打印删除sql

注意：不推荐使用 mysql_query 函数。使用 PDO 或 mysqli 函数。此外，在直接用于任何 DML 语句之前，必须对 $_GET 进行清理。完全脆弱。

# mysql - SELECT 语句子查询

> ID：13112758
> 
> 赞同：0
> 
> 时间：2012-10-28T20:33:07.520
> 
> 标签：mysql, select

编辑：我需要那里的总总数减去直接和间接分钟数。

我正在尝试 SUM M. Minutes 作为别名“dminutes”。然后，再次取 M.minutes 的 SUM 并减去具有“间接”列值的 M.minutes（并给它“inminutes”别名）。但是，它显示为 null，因此语法错误。建议？

```
table = tasks
column = task_type

Example:
M.minutes total = 60 minutes
M. minutes (with "direct" task_type column value) = 50 minutes (AS dminutes)
M. minutes (with "indirect" task_type column value) = 10 minutes (AS inminutes) 
```

SQL 语句：

```
SELECT 
U.user_name,
SUM(M.minutes) as dminutes,
ROUND(SUM(M.minutes))-(SELECT (SUM(M.minutes)) from summary s WHERE ta.task_type='indirect') as inminutes
FROM summary S
JOIN users U ON U.user_id = S.user_id
JOIN tasks TA ON TA.task_id = S.task_id
JOIN minutes M ON M.minutes_id = S.minutes_id
WHERE DATE(submit_date) = curdate()
AND TIME(submit_date) BETWEEN '00:00:01' and '23:59:59'
GROUP BY U.user_name 
LIMIT 0 , 30 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T20:40:30.967

我认为这样的事情应该有效。

你可能需要稍微调整一下。

```
SELECT direct.duser_id, indirect.iminutes, direct.dminutes, 
    direct.dminutes - indirect.iminutes FROM
    (SELECT U.user_id AS iuser_id, SUM(M.minutes) AS iminutes
    FROM summary S
    JOIN users U 
    ON U.user_id = S.user_id
    JOIN minutes M 
    ON M.minutes_id = S.minutes_id
    JOIN tasks TA 
    ON TA.task_id = S.task_id
    WHERE TA.task_type='indirect'
    AND DATE(submit_date) = curdate()
    AND TIME(submit_date) BETWEEN '00:00:01' and '23:59:59'
    GROUP BY U.user_id) AS indirect
JOIN
    (SELECT U.user_id AS duser_id, SUM(M.minutes) AS dminutes
    FROM summary S
    JOIN users U 
    ON U.user_id = S.user_id
    JOIN minutes M 
    ON M.minutes_id = S.minutes_id
    JOIN tasks TA 
    ON TA.task_id = S.task_id
    WHERE TA.task_type='direct'
    AND DATE(submit_date) = curdate()
    AND TIME(submit_date) BETWEEN '00:00:01' and '23:59:59'
    GROUP BY U.user_id) AS direct
WHERE indirect.iuser_id = direct.duser_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T20:43:05.710

`SUM`是一个讨厌的小功能：

[http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_sum](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_sum)

> 返回 expr 的总和。如果返回集没有行，则 SUM() 返回 NULL。DISTINCT 关键字可用于仅对 expr 的不同值求和。
> 
> 如果没有匹配的行，SUM() 返回 NULL。

尝试将 SUM 包装为 COALESCE 或 IFNULL：

```
... COALESCE( SUM(whatever), 0) ... 
```

# sql - 如何在 SQL Server 中选择介于两个日期范围和两个输入参数 StartDate 和 EndDate 之间的记录？

> ID：13112759
> 
> 赞同：-1
> 
> 时间：2012-10-28T20:33:09.580
> 
> 标签：sql, sql-server, stored-procedures

在我的数据库中，我有一个小组可以在一周内活跃，开放时间。
A 组开始日期：22-10-2012 结束日期：28-10-2012（开始日期总是一周的开始）
A 组开始日期：29-10-2012 结束日期：04-11-2012（总是一周结束）

A组在这两周有两个不同的开放时间。

现在我有一个存储过程，它通过查看输入参数 StartDate 和 EndDate 返回活动组。如果这两个参数在一周的开始日期和结束日期之间，那么我得到了正确的开放时间。

但是当输入参数大约是两周（开始日期：22-10-2012 和结束日期：30-10-2012）时，我会得到两周的开放时间。

```
declare @Begindate datetime    
set @Begindate = '2012-10-22'

declare @Enddate datetime   
set @Enddate = '2012-11-02'

SELECT Id, Date, ..., ...   
FROM Table1 t1  
INNER JOIN Combinations c ON t1.Id=c.Table1Id
INNER JOIN Group g ON c.GroupId=g.Id  
WHERE t1.Date<= @Enddate) AND (t1.Date>= @Begindate  (gets dates I need)   
AND g.BeginDate <=@Enddate and g.Enddate >= @Begindate (Gets active groups)

Some table data:

Table1:

Id    Date         GroupId
1     2012-10-23   10
1     2012-10-29   10

Combinations: (holds the relation between Table1 and Group)

ID  Table1Id    GroupId
1   10          1

Group Table:

ID    Name     StartDate   EndDate     MondayOpen   MondayClose ...
1     Group A  2012-10-22  2012-10-28  08:00        18:00
1     Group A  2012-10-29  2012-11-04  13:00        18:00 
```

通过这个查询，我得到了一个组两次，因为两个输入参数都超过了两周。

如何获得日期（从 t1 开始）查看组开始和结束日期的正确开放日期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T22:14:46.707

您缺少 table1 和 [group] 之间的条件，这是下面查询中的最后一行。

```
SELECT *
FROM Table1 t1  
INNER JOIN Combinations c ON t1.Id=c.Table1Id
INNER JOIN [Group] g ON c.GroupId=g.Id  
WHERE t1.Date<= @Enddate AND t1.Date>= @Begindate 
AND g.BeginDate <=@Enddate and g.Enddate >= @Begindate
AND t1.Date between g.BeginDate and g.EndDate 
```

[SQLFiddle](http://sqlfiddle.com/#!3/3d0e8/1/0)

# android - Android：如何找出“不幸 [...] 已停止”的原因？

> ID：13112762
> 
> 赞同：1
> 
> 时间：2012-10-28T20:33:44.073
> 
> 标签：android, error-handling, logcat

当我使用模拟器运行我的 Android 应用程序时，它运行良好，在我的手机上也是如此，但在另一部手机上，尝试运行该应用程序时，我总是收到“不幸的是 [...] 已停止”错误。我怎样才能找出这个错误的原因（使用模拟器，我可以在 LogCat 中查找它，但不能在真机上查找）？？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T20:58:17.247

[Android Remote Stacktrace](http://code.google.com/p/android-remote-stacktrace/)是一个非常有用的库/脚本，可让您轻松添加手机以您的方式发送其崩溃日志的方式。

在这种情况下，最简单的可能是将其添加到您放在另一部手机上的测试版本中。由于它没有被积极开发（afaik），你可能不想把它放在一个正常的商店发布版本中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T21:08:41.883

在真机上，您可以使用工具[aLogCat](https://play.google.com/store/apps/details?id=org.jtb.alogcat&hl=en)查看设备本身的日志。您也可以通过 USB 将其连接到您的计算机并使用[adb logcat](http://developer.android.com/tools/help/logcat.html)工具，日志将在计算机的 shell 窗口中可见。

如果您更喜欢无线方法，也可以通过[WiFi ADB](https://play.google.com/store/apps/details?id=com.ttxapps.wifiadb&hl=en)等工具在无线网络上使用 Adb logcat 。

# java - 简单 Java RMI 示例中的 java.lang.AbstractMethodError

> ID：13112764
> 
> 赞同：0
> 
> 时间：2012-10-28T20:34:12.870
> 
> 标签：java, rmi

我用一个简单的例子开始 Java RMI。实际的例子工作正常（来自roseindia），但我已经扩展了一点，我得到了错误。远程接口文件如下：-

```
import java.rmi.*;

public interface RemoteInterface extends Remote
{
 public int add(int x,int y)throws Exception;  //original line
 public int sub(int x, int y)throws Exception; //added later by me
} 
```

现在生成错误的客户端文件的代码片段是：-

```
b.addActionListener(new ActionListener() {  // b is a JButton
public void actionPerformed(ActionEvent evt) {
int a = Integer.parseInt(t1.getText());     //t1 and t2 are TextField
int b = Integer.parseInt(t2.getText());
try {
int r  = s.add(a,b); 

 rs.setText("Sum of two no.s=" + r);       //rs is a Label
} catch (Exception epx) {
}
}
}); 
```

它工作正常。但是当我为另一个按钮添加以下内容时

```
 b2.addActionListener(new ActionListener() {
  public void actionPerformed(ActionEvent evt1) {
  int a1 = Integer.parseInt(t1.getText());
  int b2 = Integer.parseInt(t2.getText());
  try {
        int r2 = s.sub(a1, b2);
  rs.setText("Subtraction of two no.s =" + r2);
    } catch (Exception epx) {
     }
   }
    }); 
```

我收到以下错误

```
C:\Program Files\Java\jdk1.6.0_14\bin>java Client
Exception in thread "AWT-EventQueue-0" java.lang.AbstractMethodError: ServerImpl
ements_Stub.sub(II)I
    at Client$2.actionPerformed(Client.java:65)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:19
95)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.jav
a:2318)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel
.java:387)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:242
)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonL
    istener.java:236)
    at java.awt.Component.processMouseEvent(Component.java:6263)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3267)
    at java.awt.Component.processEvent(Component.java:6028)
    at java.awt.Container.processEvent(Container.java:2041)
    at java.awt.Component.dispatchEventImpl(Component.java:4630)
    at java.awt.Container.dispatchEventImpl(Container.java:2099)
    at java.awt.Component.dispatchEvent(Component.java:4460)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4574
   )
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4238)

    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4168)
    at java.awt.Container.dispatchEventImpl(Container.java:2085)
    at java.awt.Component.dispatchEvent(Component.java:4460)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:599)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThre
    ad.java:269)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.
  java:184)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThre
  ad.java:174)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)

    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)

    at java.awt.EventDispatchThread.run(EventDispatchThread.java:122) 
```

只是一个问题的提示就太有帮助了。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T23:53:42.417

您在没有重新编译所有依赖项的情况下更改了某些内容：在这种情况下，您还没有重新生成存根。重新编译所有内容并重新测试。

# objective-c - 不能在 XCode 4.5 中调用 release？

> ID：13112765
> 
> 赞同：0
> 
> 时间：2012-10-28T20:34:14.140
> 
> 标签：objective-c

我需要一些帮助，我是 Objective-C 的初学者，我尝试编写我的第一堂课，但不幸的是它没有用。这是我的代码

```
#import <Foundation/Foundation.h>
@interface Fraction :NSObject{
    int numerator ;
    int demoniratoe ;
}
-(void) print;
-(void) setnumerator: (int) n;
-(void) setdemoniratoe: (int) b;

@end

@implementation Fraction
-(void) print
{
    NSLog(@"%i/%i",numerator,demoniratoe);
}
-(void) setnumerator: (int) n{
    numerator = n;
}
-(void) setdemoniratoe: (int) b{
    demoniratoe = b;
}

@end
int main(int argc, const char * argv[])
{

@autoreleasepool {

    Fraction *myfraction;
    myfraction = [Fraction alloc];
    myfraction = [Fraction init];

    [myfraction setnumerator:1];
    [myfraction setdemoniratoe:3];

    NSLog(@"The value of Fraction is :");
    [myfraction print];
    [myfraction release];

}
    return 0;
} 
```

错误消息位于 [myfraction release] 版本不可用 我使用 XCode 版本 4.5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T20:39:25.723

由于较新版本的 Xcode 假定您使用自动引用计数 (ARC)，因此他们设置编译器来使用它，因此编译器会抱怨您尝试手动管理内存。

解决方案：要么关闭 ARC（**我建议您作为初学者这样做，**因为您应该真正了解手动内存管理 (MRC) 的工作原理！）或将您的代码转换为 ARC 兼容的，即删除所有`retain`,`release`和`autorelease`消息（和进行更多更改；您可以通过谷歌搜索了解它们`converting Objective-C code to ARC`）。您还可以使用 Xcode 将您的 MRC 兼容项目转换为 ARC 兼容项目。关于 ARC 的一般官方文档可以在[Apple Developer 上找到。](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)

要关闭 ARC，您可以在 Xcode 中转到您的项目，然后在 Build Settings 中，然后使用搜索栏搜索“Automatic”并关闭“Automatic Reference Counting”单元格。

稍后，当您对 MRC 有深入了解时，您可以（并鼓励您）切换到并学习 ARC。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T20:37:32.537

您正在使用自动引用计数 (ARC)，然后您不再使用 release、autorelease、retain，因为编译器会为您处理这些问题。

# android - 当有超过 1 个孩子时，使用 java 将元素添加到滚动视图

> ID：13112768
> 
> 赞同：2
> 
> 时间：2012-10-28T20:35:00.327
> 
> 标签：android, android-scrollview

我正在尝试将元素添加到我的滚动视图中，此滚动视图内部具有垂直线性布局。（我添加了另一个线性布局 - 水平线，里面将根据我分配的属性管理 2 个文本视图和一个图像），

我正在尝试将此内部布局的元素添加到我的滚动视图（id=insideLineLayout）（添加到滚动视图的每个元素都将包含这两个文本和一个图像），因为滚动视图只能有 1 个孩子我无法做到这一点. 将不胜感激一些帮助，这里似乎没有任何工作。谢谢。

我当前的 xml 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:id="@+id/searchScreenOuterLinearLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
         >

        <TextView
            android:id="@+id/catagoryselectedText"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="70dp"
            android:text="selected catagory"
            android:textSize="20dp" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="20dp"
        android:layout_marginTop="12dp"
        android:orientation="horizontal" >

        <EditText
            android:id="@+id/searchText"
            android:layout_width="200dp"
            android:layout_height="wrap_content"
            android:layout_marginLeft="8dp" />

        <ImageButton
            android:id="@+id/searchButton"
            android:layout_width="50dp"
            android:layout_height="40dp"
            android:background="@drawable/search_icon" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="20dp"
        android:layout_marginRight="10dp"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/radiusText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:paddingTop="5dp"
            android:text="Search Radius"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <SeekBar
            android:id="@+id/radiusBar"
            android:layout_width="140dp"
            android:layout_height="wrap_content"
            android:layout_marginLeft="20dp" />
    </LinearLayout>

    <ScrollView
        android:id="@+id/searchScrollView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <LinearLayout
            android:id="@+id/searchScrollViewLinear"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical"
            android:paddingTop="10dp" >

            <LinearLayout
                android:id="@+id/insideLineLayout"
                android:layout_width="fill_parent"
                android:layout_height="30dp"
                android:orientation="horizontal"
                android:weightSum="100"
                 >

                <TextView
                    android:id="@+id/linesPrice"
                    android:layout_weight="20"
                    android:layout_width="wrap_content"
                    android:layout_height="fill_parent"
                    android:text="tmp1"
                    android:textAppearance="?android:attr/textAppearanceMedium" />

                <TextView
                    android:id="@+id/linesInfo"
                     android:layout_weight="60"
                    android:layout_width="wrap_content"
                    android:layout_height="fill_parent"
                    android:paddingLeft="15dp"
                    android:paddingRight="15dp" 
                    android:text="tmp2"
                    android:textAppearance="?android:attr/textAppearanceMedium" />

                <ImageView
                    android:id="@+id/imageInfo"
                    android:layout_width="40dp"
                    android:layout_height="match_parent"
                    android:background="@drawable/tv_icon" />

            </LinearLayout>

        </LinearLayout>
    </ScrollView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T18:20:39.383

考虑一下您的列表可以得到多长时间，因为`ListView`已经在许多方面进行了优化，而常规滚动视图则没有。如果您有太多元素，您可能会开始出现内存不足异常。

为了向 a 动态添加视图，`ScrollView`您首先需要在`ScrollView`（很可能是 a `LinearLayout`）中获取容器视图，然后您只需为添加的每个视图执行以下操作：

```
View view = inflater.inflate(R.layout.view_to_add, container, false); // this is used if you create from xml, if you make it in code you'd use the regular constructor.
// update the view content (view.findViewById(); etc.)
container.addView(view); 
```

# javascript - jQuery单选按钮只选择一个（ID）

> ID：13112769
> 
> 赞同：0
> 
> 时间：2012-10-28T20:35:02.783
> 
> 标签：javascript, jquery

我有 2 组 raido 按钮，它们有不同的唯一 ID，如何使它们只能为每组选择一个。谢谢

```
<group>
<input type="radio" id="u1"/>1
<input type="radio" id="u2"/>2
<input type="radio" id="u3"/>3
</div >
</group>

<group>
<input type="radio" id="T1"/>4
<input type="radio" id="T2"/>5
<input type="radio" id="T3"/>6
</group> 
```

[http://jsfiddle.net/pZdWu/](http://jsfiddle.net/pZdWu/)

我不想改html，只想用jQuery来实现

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T20:43:37.857

如果你真的必须使用现有的 HTML，那么我建议通过 jQuery 修改 HTML 以简单地使用无线电输入的默认功能：

```
​$('group').each(
    function(i,e){
        $(e).find('input:radio').attr('name', 'group' + i);
    });​​​​​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/pZdWu/4/)。

参考：

*   [`attr()`](http://api.jquery.com/attr/).
*   [`each()`](http://api.jquery.com/each/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T20:37:23.740

使用 name 属性为组中的每个项目指定一个通用名称.....

```
<input type="radio" name="group1" id="u1"/>1
<input type="radio" name="group1" id="u2"/>2
<input type="radio" name="group1" id="u3"/>3 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T20:44:36.977

使用 jQuery，您可以使用如下内容：

[http://jsfiddle.net/pZdWu/5/](http://jsfiddle.net/pZdWu/5/)

```
$(document).ready(function () {
    $("input[type=radio]").click(function () {
        var $this = $(this);
        $this.siblings("input[type=radio]").prop("checked", false);
    });
}); 
```

但这假设您的 HTML 结构与您提供的完全一样。

如果单选按钮上有任何类型的 HTML 包装，或者以任何方式分组，`siblings`则无法使用 。您可能必须使用类似的东西：

[http://jsfiddle.net/pZdWu/7/](http://jsfiddle.net/pZdWu/7/)

```
$(document).ready(function () {
    $("input[type=radio]").click(function () {
        var $this = $(this);
        $this.parents("group:first").find("input[type=radio]").not($this).prop("checked", false);
    });
}); 
```

并且显然将“组”的使用更改为您实际使用的任何内容（我以为我看到您将原始问题编辑为不使用`<group>`）。

# jquery - 在其功能之外停止 setinterval

> ID：13112771
> 
> 赞同：0
> 
> 时间：2012-10-28T20:35:26.117
> 
> 标签：jquery, setinterval

我有一个名为“sliderFunction”的函数，它启动一个 setInterval：

```
function sliderFunction() {

    var inter;

    function autoSlider() {
        var cur_img_div_pos = $('.img_slider.in_view').attr('data-pos');
        var num_img = $('.img_slider').length;
        var play_icon = $('#play_icon');

        play_icon.attr('data-active', '1');

        if (inter) {
            clearInterval(inter);
        }

        inter = setInterval(function(){         
            var pos = parseInt(cur_img_div_pos) + 1;
            var limit = parseInt(num_img) - 1;

            slider(pos, num_img);

            if (cur_img_div_pos < limit) {
                cur_img_div_pos++;
            } else {
                cur_img_div_pos = 0;
            }
            console.log(pos);
        }, 5000);
        console.log('start');
    }

    function stopSlider() {     
        var play_icon = $('#play_icon');
        var pause_icon = $('#pause_icon');
        var pause_active = pause_icon.attr('data-active');

        if (pause_active == 0) {
            play_icon.attr('data-active', '0');     
            pause_icon.attr('data-active', '1');
            clearInterval(inter);
            showButton('pause_icon');
            console.log('stop');
        }
    }

    function showButton(bt_id) {
        // bt_id -> pause_icon or play_icon
        var button = $('#' + bt_id);            
        button.fadeIn()
            .queue(function() {
                $(this).delay(1000).fadeOut().removeAttr('style');
                $(this).dequeue();
            });
    }

    var cur_img_div_pos = $('.img_slider.in_view').attr('data-pos');

    autoSlider(cur_img_div_pos);

    $(document).on('click', '.thumbs_anchor', function() {  
        if (inter) {
            stopSlider();
        }           
    });

    $(document).on('mouseenter', '.img_slider_inner', function() {  
        stopSlider();
    });

    $(document).on('mouseleave', '.img_slider_inner', function() {  
        var play_icon = $('#play_icon');
        var pause_icon = $('#pause_icon');          
        var play_active = play_icon.attr('data-active');

        if (play_active == 0) {
            play_icon.attr('data-active', '1');     
            pause_icon.attr('data-active', '0');
            autoSlider(cur_img_div_pos);
            showButton('play_icon');
        }
    });

}

sliderFunction(); 
```

函数“stopSlider”工作得很好，因为它与“autoSlider”在同一个函数中。当我尝试在“sliderFunction”之外执行“clearInterval(inter)”时，出现此错误：

```
Uncaught ReferenceError: inter is not defined 
```

我尝试通过将 'var' 留在外面来使 'inter' 全局化，但是当函数第一次加载时出现错误。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T20:40:25.983

只需删除：

```
var inter; 
```

你就完成了。为了安全起见，您可以这样做：

```
window.inter=null; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T20:39:37.693

那是因为`inter`只存在于 sliderFunction 范围内。由于这两个函数都在该范围内，因此它们都可以访问该变量，但在 sliderFunction 之外您不能。

解决方案？更改 stopSlider 的声明：

```
this.stopSlider = function() { 
 ... 
```

然后，保存 sliderFunction 函数的结果：

```
var slider = sliderFunction(); 
```

现在，您可以使用该结果来调用该函数：

```
slider.stopSlider(); 
```

您已经有效地将sliderFunction 转换为具有名为stopSlider 的方法的对象。

# android - 为 Android 编写均衡器应用程序

> ID：13112774
> 
> 赞同：1
> 
> 时间：2012-10-28T20:35:44.117
> 
> 标签：android, equalizer

我想用我的 One X 在我的高保真系统上播放音乐。因为扬声器的音质不是那么完美，所以我需要对它们进行均衡。

大多数玩家只支持大约 5 个乐队，但我想要更多。

现在我想编写自己的应用程序。有没有办法将均衡器编程为“独立”，以便我可以运行其他音乐应用程序但使用我的 eq 应用程序更改音频输出？

使用 API 9 已经有一个 eq 类，我可以用它制作一个 .. 10 到 20 个频段的 eq（我希望我可以用手指控制它：>），但如果不是，我不想对整个音乐播放器进行编程必要的。

据我所知，我需要知道“getAudioSessionId（）”才能更改音频输出，但我可以在“musicplayer-app”之外获取那个SessionId吗？

# asp.net-mvc-3 - Razor 日期选择器未在更新中选择任何值

> ID：13112780
> 
> 赞同：0
> 
> 时间：2012-10-28T20:36:44.357
> 
> 标签：asp.net-mvc-3, razor, kendo-ui

我有带日期选择器的内联编辑网格。如果我使用本地数据库（PC 数据库），这可以正常工作，但如果我使用远程数据库，则无法正常工作

**共享/编辑器模板/DateTime.cshtml**

```
@model DateTime?

@(Html.Kendo().DatePickerFor(m => m).Format("M/dd/yyyy")) 
```

**看法：**

```
columns.Bound(p => p.DateCompleted).Format("{0:d}").Width(80) 
```

**模型：**

```
[UIHint("Date")]
 [DisplayName("Date Completed")]
 public DateTime? DateCompleted { get; set; } 
```

当我尝试更新并选择另一个尝试保存的日期时，日期值变为空，只有当我通过远程数据库连接时才会发生奇怪的情况

请指教

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T00:46:53.473

很可能您在推送时对 SQL 解释日期格式的方式有所不同。远程 sql 服务器上的本地机器文化设置可能不同，并且无法正确解析来自 .NET 应用程序的日期。

# c - c 中对“getline”的未定义引用

> ID：13112784
> 
> 赞同：20
> 
> 时间：2012-10-28T20:37:07.610
> 
> 标签：c, reference, undefined, getline, mingw32

我正在学习在 C 编程中使用 getline 并尝试了来自[http://crasseux.com/books/ctutorial/getline.html的代码](http://crasseux.com/books/ctutorial/getline.html)

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main(int atgc, char *argv[])
{
    int bytes_read = 1;
    int nbytes = 10;
    char *my_string;

    my_string = (char *)malloc(nbytes+1);

    puts("Please enter a line of text");

    bytes_read = getline(&my_string, &nbytes, stdin);

    if (bytes_read == -1)
    {
        puts ("ERROR!");
    }
    else
    {
        puts ("You typed:");
        puts (my_string);
    }

    return 0;
 } 
```

但是，问题在于编译器不断返回 this: **undefined reference to 'getline' 的**错误。你能告诉我问题是什么吗？谢谢！

我正在使用 Win7 64bit + Eclipse Indigo + MinGW

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-28T22:53:22.467

其他答案已经涵盖了大部分内容，但存在几个问题。首先，[`getline()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/getdelim.html)不在 C 标准库中，而是 POSIX 2008 扩展。通常，它可以与 POSIX 兼容的编译器一起使用，因为宏 _POSIX_C_SOURCE 将使用适当的值定义。您可能有一个以前`getline()`标准化的旧编译器，在这种情况下，这是一个 GNU 扩展，您必须`#define _GNU_SOURCE`先`#include <stdio.h>`启用它，并且必须使用与 GNU 兼容的编译器，例如 gcc。

此外，`nbytes`应该有 type `size_t`，而不是`int`。至少在我的系统上，它们的大小不同，`size_t`更长，并且使用 a`int*`而不是 a`size_t*`可能会产生严重后果（并且也不能使用默认的 gcc 设置进行编译）。有关详细信息，请参阅 getline 手册页 (http://linux.die.net/man/3/getline)。

进行该更改后，您的程序可以在我的系统上编译并正常运行。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-03-17T16:39:39.997

我也在使用 MinGW。我检查了 MinGW 头文件并`getline()`没有出现在任何 C 头文件中，它只出现在 C++ 头文件中。这意味着`getline()`MinGW 中不存在 C 函数。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-28T20:43:48.627

`getline`不是标准功能，根据我的手册页，您需要设置一个功能测试宏才能使用它，

```
_POSIX_C_SOURCE >= 200809L || _XOPEN_SOURCE >= 700 
```

对于 glibc 2.10 或更高版本，

```
_GNU_SOURCE 
```

在那之前。

# ruby-on-rails-3.2 - 静态页面上的 CSRF 保护

> ID：13112787
> 
> 赞同：2
> 
> 时间：2012-10-28T20:37:24.163
> 
> 标签：ruby-on-rails-3.2, security, csrf, csrf-protection

我有一个有表格的静态网站。表单提交到 Rails 端点，该端点捕获提交的数据。静态站点和 Rails 端点在同一个域上，在不同的子域上，所有流量都完全在 HTTPS 上。

我了解 Rails CSRF 如何用于服务器生成的表单。但就我而言，这些表单位于静态 HTML 页面上。我知道所有请求标头都可以伪造，所以不能依赖它。

如果在这种情况下不可能有一个强有力的解决方案，那么我的最后一个选择是转向服务器生成的表单（我现在想避免）。

任何有关解决此问题的好方法的建议都将受到欢迎。或任何指向已经执行此操作的系统或库的指针。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T06:35:39.613

我建议阅读[CSRF 预防备忘单](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_%28CSRF%29_Prevention_Cheat_Sheet)。

有两种静态方法可以使用。

1) 使用 JavaScript 获取令牌并重写静态 HTML 页面以包含 nonce。

2）[检查Referer和Origin标头](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_%28CSRF%29_Prevention_Cheat_Sheet#Checking_The_Referer_Header)

# java - Android REQUEST_DENIED Google 地方 API

> ID：13112791
> 
> 赞同：0
> 
> 时间：2012-10-28T20:37:41.797
> 
> 标签：java, android, google-maps, google-maps-api-3, google-maps-markers

我正在开发 Android Google 地图应用程序，但我用来获取用户附近地点结果的查询字符串不起作用。

```
http://maps.googleapis.com/maps/api/place/search/json?location=123.666,33.166&radius=50000&sensor=false&types=establishment&name=hotel&key={myKey}

```

我正在使用[此链接获取 Maps API 密钥](http://mobiforge.com/developing/story/using-google-maps-android)。

这是我收到的回复。

```
 {
         "html_attributions" : [],
         "results" : [],
         "status" : "REQUEST_DENIED"
      } 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T23:02:24.730

您需要通过以下方式生成 Places API 密钥： [https ://code.google.com/apis/console/](https://code.google.com/apis/console/)

更多信息请参见： [https ://developers.google.com/places/documentation/#Authentication](https://developers.google.com/places/documentation/#Authentication)

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T21:29:31.290

我很确定您使用的是错误/旧密钥。Lokk 在您的链接上，它已经超过 3 年了。最好尝试这种方式来获取新密钥：[获取 Google Maps Android API 密钥](https://developers.google.com/maps/documentation/android/mapkey)。这是官方网站。

# android - Android API 是否兼容其旧版本？

> ID：13112792
> 
> 赞同：2
> 
> 时间：2012-10-28T20:37:43.723
> 
> 标签：android, api, sdk

我正在下载 Android SDK，想知道 Android 的 API 是否与其以前的版本兼容？即，如果我安装了 Android API 16，我可以在 Android 4.0 (API 14) 上使用该应用程序吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T20:40:05.630

您可以在较新的系统上运行较旧的 API 版本，但反之则不行。例如，Android 4.0 可以运行为 Android 2.3.3 制作的程序，但 Android 2.3.3 不能运行 Android 4.0 程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T20:41:14.013

您必须在您的 android 清单中定义最低 sdk 级别。从这里开始的每个版本都支持该应用程序。您只能使用此指定版本支持的类和语言元素。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-28T20:48:36.573

这由清单文件中的以下内容控制：

```
<uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" /> 
```

这意味着：1）您的应用程序将无法在版本 < 8 的任何 Android 上运行。版本 < 8 的 Android 操作系统将不允许安装您的应用程序。

2）您的应用程序使用 Android API 15 版本。但是，在您的代码中，您可以检查 Android 版本（使用[Build.VERSION.SDK_INT](http://developer.android.com/reference/android/os/Build.VERSION.html#SDK_INT)），如果它小于 15，则不要运行某些代码。通常这样做是为了让应用程序在较新的 Android 版本上运行时可以使用较新的功能，但它也可以在较旧的版本上运行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-29T17:40:01.707

并非所有组件都向后兼容，但对于向后兼容的内容，请查看以下内容

我找到了最有用的库，可以让安卓应用向后兼容。

它被称为 Actionbarsherlock，它为您提供了所有 android 4.1+ 功能一直到 2.1（我正在开发的最小版本）

Its fairly simple to use, very well explained on their website: [http://actionbarsherlock.com/](http://actionbarsherlock.com/)

Enjoy

# tree - 如何插入完整的 B+ 树？

> ID：13112795
> 
> 赞同：1
> 
> 时间：2012-10-28T20:38:07.757
> 
> 标签：tree, b-tree

当每个位置都被填充时，我找不到任何关于如何插入 B+ 树的示例。我有一个 B+ 树 M=5 和 L=5 并且树是完整的，插入了 1-25 的值。如果我想将 26 插入树中，我将如何拆分树以便容纳 26？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T22:23:03.997

查看[B+Trees.pdf](http://baze.fri.uni-lj.si/dokumenti/B+%20Trees.pdf)，它显示了 B+Tree 的详细示例，包括插入到完整的叶子中。

# c# - 将带有委托的 C# 代码转换为 Java，以便与 Android 一起使用

> ID：13112796
> 
> 赞同：0
> 
> 时间：2012-10-28T20:38:28.127
> 
> 标签：c#, java, android

我正在潜入Android开发。我参与的大多数项目都是用 C# 编写的。代表是我经常使用的 C# 元素，我也使用过一些东西，比如使用扩展 EventArgs 的类或使用 set 和 get 的属性传递数据。凭借我的编程知识，我想我将能够非常顺利地开始 Android 开发。问题是我完全不知道如何处理类似于 Java 中的 C# delagte 的实现机制。

下面我将介绍一些在 C# 中运行良好的示例类，其中包含一些我想在未来的 Android 项目中使用的 C# 语言元素。有人可以为我提供此代码的翻译吗？我更喜欢使用我自己的示例，它的转换将使我能够更快地捕捉到它。此外，关于该主题的任何有价值的资源（不仅是代表，还有将 C# 转换为 Java 的一般主题）都会受到赞赏。

**倒计时计时器.cs**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace SampleDelegateApp
{
    public class CountdownTimer
    {
        Timer tmrTicks = new Timer();
        int secondsLeft = 0;
        int numberOfSecondsToCountdown = 0;

        public bool IsWorking
        {
            get { return tmrTicks.Enabled; }
        }

        public CountdownTimer(int seconds)
        {
            if (secondsLeft < 0) secondsLeft = 0; 
            numberOfSecondsToCountdown = seconds;
            secondsLeft = seconds;

            tmrTicks.Interval = 1000;
            tmrTicks.Tick += new EventHandler(tmrTicks_Tick);
            tmrTicks.Enabled = false;
        }

        void tmrTicks_Tick(object sender, EventArgs e)
        {
            secondsLeft--;
            if (secondsLeft >= 1) 
                WhenCountdownTimerTick(new CountdownTimerEventArgs(secondsLeft, numberOfSecondsToCountdown, false));
            else
            {
                Stop();
                WhenCountdownTimerTick(new CountdownTimerEventArgs(secondsLeft, numberOfSecondsToCountdown, true));
            }
        }

        public void Reset()
        {
            Stop();
            secondsLeft = numberOfSecondsToCountdown;
            if (secondsLeft < 0) secondsLeft = 0;
            WhenCountdownTimerTick(new CountdownTimerEventArgs(secondsLeft, numberOfSecondsToCountdown, false));
        }

        public void Stop()
        {
            tmrTicks.Enabled = false;
        }

        public void Start()
        {
            if (secondsLeft <= 0)
            {
                secondsLeft = 0;
                WhenCountdownTimerTick(new CountdownTimerEventArgs(secondsLeft, numberOfSecondsToCountdown, true));
            }
            else
            {
                tmrTicks.Enabled = true;
            }
        }

        public delegate void CountdownTimerTickEventHandler(object sender, CountdownTimerEventArgs ea);

        public event CountdownTimerTickEventHandler CountdownTimerTick;

        protected virtual void WhenCountdownTimerTick(CountdownTimerEventArgs ea)
        {
            if (CountdownTimerTick != null)
            {
                CountdownTimerTick(this, ea);
            }
        }
    }

    public class CountdownTimerEventArgs : EventArgs
    {

        public string timeString = "";
        public float procentOfTimeLeft = 0.0f;
        public bool countdownFinished = false;

        public CountdownTimerEventArgs(int secondsLeft, int SecondsToCountdown, bool isfinished)
        {
            countdownFinished = isfinished;
            timeString = string.Format("{0:00}:{1:00}", secondsLeft / 60, secondsLeft % 60);
        }
    }
} 
```

**frmTest.cs**

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace SampleDelegateApp
{
    public partial class frmTest : Form
    {
        CountdownTimer ctmrTest;

        public frmTest()
        {
            InitializeComponent();
            ctmrTest = new CountdownTimer(-44);
            ctmrTest.CountdownTimerTick += new CountdownTimer.CountdownTimerTickEventHandler(ctmrTest_CountdownTimerTick); 
        }

        void ctmrTest_CountdownTimerTick(object sender, CountdownTimerEventArgs ea)
        {
            lblTimer.Text = ea.timeString;
            if (ea.countdownFinished) countdownEnd();
        }

        private void btnStart_Click(object sender, EventArgs e)
        {
            ctmrTest.Reset();
            ctmrTest.Start();
        }

        void countdownEnd()
        {
            MessageBox.Show("Finish");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T20:44:10.657

这实际上与观察者模式有关。在 .NET 中，这通过委托和其他东西变得容易，在 Java 中，您必须手动实现它，使用处理程序的接口和 args 的普通对象。查一下，你会发现很多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T04:08:23.433

我显然在我的问题中使用了一些词，这使得一切都不清楚和/或试图帮助我的人完全误解了我对这个问题的需求。到处放“代表”这个词使它变得更加复杂。在以其他方式提出另一个问题后，我得到了答案，这使我能够回答我的问题：

[如何在java（Android）中实现c#事件行为](https://stackoverflow.com/questions/13262539/how-to-achieve-following-c-sharp-behaviour-in-java-android)

我并不是说下面的代码符合最佳编码标准，这里显示的示例在现实生活项目中有任何用途，但这正是我想要的。下面的工作示例：

**tester.java**

```
public class tester{
    public static void main(String[] args) {
        test test1 = new test(); 
        test1.start();
    }
} 
```

**测试.java**

```
public class test implements CountdownTextTickListener {

    public test() { }

    public void start() {
        CountdownText ctx = new CountdownText(100);
        ctx.setListener(this);
        ctx.Start();
    }

    @Override
    public void CountdownTextTickEventFired(Object sender, 
                        CountdownTextTickEventArgs eventArgs) {
            System.out.println(eventArgs.TimeString);
            if(eventArgs.isStopped) System.out.println("- END -");
    }
} 
```

**CountdownTextTickListener.java**

```
public interface CountdownTextTickListener {
     void CountdownTextTickEventFired(Object sender, CountdownTextTickEventArgs eventArgs);
} 
```

**CountdownTextTickEventArgs.java**

```
public class CountdownTextTickEventArgs {

    public String TimeString = "";
    public boolean isStopped = false;

    public CountdownTextTickEventArgs(int seconds, boolean isStoppedState) {
        TimeString = String.format("%02d:%02d",seconds/60, seconds % 60);
        isStopped = isStoppedState;
    }

} 
```

**CountdownText.java**

```
import java.util.Timer;
import java.util.TimerTask;

public class CountdownText {

    Timer tmrTicks = new Timer();
    int secondsLeft = 0;
    int numberOfSecondsToCountdown = 0;
    boolean isWorking = false;
    private CountdownTextTickListener listener = null;

    public boolean getIsWorking(){
        return isWorking;
    }

    public CountdownText(int seconds) {
        if (secondsLeft < 0) secondsLeft = 0; 
        numberOfSecondsToCountdown = seconds;
        secondsLeft = seconds;
    }

    void startTimer() {
        isWorking = true;
        fireEvent(secondsLeft, false);
        tmrTicks = new Timer();
        tmrTicks.scheduleAtFixedRate( new TimerTask(){
            @Override
            public void run(){
                tickTimer();
            }
        }, 1000, 1000); 
    }

    private void stopTimer() {
        isWorking = false;
        tmrTicks.cancel();
    }

    private void tickTimer() {
         secondsLeft--;
         if (secondsLeft >= 1) 
         {
             fireEvent(secondsLeft, false);
         }
         else
         {
             Stop();
             fireEvent(secondsLeft, true);
         }
    }

    public void Reset() {
        Stop();
        secondsLeft = numberOfSecondsToCountdown;
        fireEvent(secondsLeft, false);
    }

    public void Stop() {
        stopTimer();
    }

    public void Start() {
        if (secondsLeft <= 0)
        {
            secondsLeft = 0;
            fireEvent(secondsLeft, true);
        }
        else
        {
            startTimer();
        }
    }

    protected void fireEvent(int seconds, boolean isStoppedState) {
        if (listener != null) {
            Object sender = this; 
            CountdownTextTickEventArgs eventArgs = new CountdownTextTickEventArgs(seconds, isStoppedState);
            listener.CountdownTextTickEventFired(sender, eventArgs);
        }
    }

    public void setListener(CountdownTextTickListener listener) {
        this.listener = listener;
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-28T20:43:41.267

据我了解，实际上有一些方法可以让您的 C# 代码在 Android 中运行。如果您的情况允许您使用 C# 进行工作，我建议您查看[适用于 Android 的 Mono 。](http://xamarin.com/monoforandroid)您不仅可以将代码保留在 C# 中，还可以更轻松地将其移植到 iOS 的 MonoTouch 和 Windows Phone 的 .NET 4.5。如果没有，我无法帮助你，但我相信更有知识的人会。

# c - 在 C99 中创建二叉搜索树

> ID：13112797
> 
> 赞同：1
> 
> 时间：2012-10-28T20:38:31.300
> 
> 标签：c, tree, binary-tree, binary-search-tree

我有一个编程课作业，今晚 CDT 晚上 8 点到期，但我遇到了麻烦。我们将通过读取文件来获取以下数字的列表：

9 30 20 40 35 22 48 36 37 38

将它们放在一个数组中（很简单），然后使用 C 将它们读入二叉搜索树。列表中的第一个数字是树中元素的数量。其余的放置在以下结构中：

```
typedef struct node_struct {
    int data;
    struct node_struct* left;
    struct node_struct* right;
} Node; 
```

我想我已经完成了第一部分。把使用 fscanf 中的东西（我没有选择使用这种方法，我更喜欢 fgets），在数组的每个成员上调用一个插入函数，然后在插入函数内部调用一个“createNode”函数。

问题是，我只让一名成员加入 BST。此外，BST 必须满足条件`node->left->data <= node->data < node->right->data`……换句话说，节点在树中必须是有序的。

这是我到目前为止所拥有的：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

// def BST node struct
typedef struct node_struct {
    int data;
    struct node_struct* left;
    struct node_struct* right;
} Node;

// prototypes
Node* createNode(int data);
Node* bstInsert(Node* root, int data);
// helper function prototypes
void padding(char ch, int n);
void displayTree(Node* root, int depth);

int main(int argc, char **argv)
{
    FILE *in = NULL;
    int num_read, count=0, array_size = 0;

    if(argc != 2){
        printf("hw3 <input-file>\n");
        return 1;
    }

    in = fopen(argv[1], "r");

    if(in == NULL){
        printf("File can not be opened.\n");
        return 2;
    }

    // read in the first line to get the array size
    fscanf(in, "%d", &array_size);

    // declare the array
    int array[array_size];  

    // read from the second line to get each element of the array
    while(!feof(in)){
        fscanf(in, "%d", &num_read);
        array[count] = num_read;
        count++;
    }
    fclose(in);

    if (array_size != count) {
        printf("data error. Make sure the first line specifies the correct number of elements.");
        return 3;
    }

    Node *root1 = NULL, *root2 = NULL, *root3 = NULL;

    int i;
    // task1: construct a bst from the unsorted array
    printf("=== task1: construct a bst from the unsorted array ===\n");
    for (i = 0; i < array_size; i++) {
        root1 = bstInsert(root1, array[i]);
    }
    displayTree(root1, 0);
    return 0;
}   

Node* bstInsert(Node* root, int data) {
    if(root == NULL){
        root = createNode(data);

        if(root != NULL){
            root= createNode(data);
        }

        else{
            printf("%d not inserted, no memory available.\n", data);
        }
    }

    Node* current, previous, right;
    current = root;
    previous = root->left;
    next = root->right;
    else{
        if(previous->data <= current->data){

                }

     }
     return root;
}

Node* createNode(int data) {
    // TODO
    Node* aRoot;
    if(!data)
        return NULL;

    aRoot = malloc(sizeof(Node));
    if(!aRoot){
        printf("Unable to allocate memory for node.\n");
        return NULL;
    }
    aRoot->data = data;
    aRoot->left = NULL;
    aRoot->right = NULL;
    return aRoot;
}

    /* helper functions to print a bst; You just need to call displayTree when visualizing a bst */
void padding(char ch, int n)
{
    int i;
    for (i = 0; i < n; i++)
    printf("%c%c%c%c", ch, ch ,ch, ch);
}

void displayTree(Node* root, int depth){
    if (root == NULL) {
        padding (' ', depth);
        printf("-\n");
    }
    else {
        displayTree(root->right, depth+1);
        padding(' ', depth);
        printf ( "%d\n", root->data);
        displayTree(root->left, depth+1);
    }
} 
```

`main`, `createNode`, `displayTree`, 并且`padding`没问题，我相信。这`bstInsert`就是我遇到麻烦的地方。我只是不确定如何订购东西以创建有效的树。

编辑：

我编辑了 bstInsert 并注入了更多逻辑。它*应该*在树上打印出更多的叶子，但是，它只打印出数字“30”。这是新功能。

```
Node* bstInsert(Node* root, int data) {

if(root == NULL){
    root = createNode(data);

    if(root != NULL){
        root= createNode(data);
    }

    else{
        printf("%d not inserted, no memory available.\n", data);
    }
}
else{
    if(data < root->data){
        bstInsert(root->left, data);
    }
    else if(data > root->data || data == root->data){
        bstInsert(root->right, data);
    }
        }
return root;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T21:41:21.830

您必须将新创建的节点指针分配给树的正确部分。这段代码就是这样做的。关键变化是`bstInsert()`正确使用返回值。其他变化是装饰性的。请注意，我通过打印输出来检查输入数组；此外，在构建 BST 时打印出它是明智的。

不要`feof()`用作循环控制条件。用作循环控制时几乎总是错误的，但至少您还必须检查随后的输入操作。我写过很多程序。我几乎没用过`feof()`（我在自己的代码中发现了两个地方；在这两个地方，它都正确地用于区分 EOF 和输入失败后的错误。）

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

// def BST node struct
typedef struct node_struct
{
    int data;
    struct node_struct* left;
    struct node_struct* right;
} Node;

// prototypes
Node *createNode(int data);
Node *bstInsert(Node *root, int data);
// helper function prototypes
void padding(char ch, int n);
void displayTree(Node *root, int depth);

int main(int argc, char **argv)
{
    FILE *in = NULL;
    int num_read, count=0, array_size = 0;

    if (argc != 2)
    {
        printf("hw3 <input-file>\n");
        return 1;
    }

    in = fopen(argv[1], "r");

    if (in == NULL)
    {
        printf("File can not be opened.\n");
        return 2;
    }

    // read in the first line to get the array size
    fscanf(in, "%d", &array_size);

    // declare the array
    int array[array_size];  

    // read from the second line to get each element of the array
    while (count < array_size && fscanf(in, "%d", &num_read) == 1)
        array[count++] = num_read;
    fclose(in);

    if (array_size != count)
    {
        printf("data error. Make sure the first line specifies the correct number of elements.");
        return 3;
    }

    for (int i = 0; i < array_size; i++)
        printf("%d: %d\n", i, array[i]);

    Node *root1 = NULL;

    // task1: construct a bst from the unsorted array
    printf("=== task1: construct a bst from the unsorted array ===\n");

    for (int i = 0; i < array_size; i++)
    {
        root1 = bstInsert(root1, array[i]);
        displayTree(root1, 0);
    }

    displayTree(root1, 0);
    return 0;
}   

Node *bstInsert(Node *root, int data)
{
    if (root == NULL)
    {
        root = createNode(data);
        if (root == NULL)
            printf("%d not inserted, no memory available.\n", data);
    }
    else if (data < root->data)
        root->left = bstInsert(root->left, data);
    else
        root->right = bstInsert(root->right, data);
    return root;
}

Node *createNode(int data)
{
    Node *aRoot;

    aRoot = malloc(sizeof(Node));
    if (!aRoot)
    {
        printf("Unable to allocate memory for node.\n");
        return NULL;
    }
    aRoot->data = data;
    aRoot->left = NULL;
    aRoot->right = NULL;
    return aRoot;
}

/* helper functions to print a bst; You just need to call displayTree when visualizing a bst */
void padding(char ch, int n)
{
    for (int i = 0; i < n; i++)
        printf("%c%c%c%c", ch, ch, ch, ch);
}

void displayTree(Node *root, int depth)
{
    if (root == NULL) {
        padding (' ', depth);
        printf("-\n");
    }
    else {
        displayTree(root->right, depth+1);
        padding(' ', depth);
        printf ( "%d\n", root->data);
        displayTree(root->left, depth+1);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T21:27:47.470

好的，想想你想在不同的树配置中做什么：

*   当树为空时 -> 创建一个根节点
*   当树不为空时->要插入的值与根的值如何比较？
    *   上面 -> 插入右子树
    *   下面 -> 在左子树中插入
    *   相等 -> 什么都不做（这实际上取决于您的作业告诉您如何处理重复项）

从这个基本算法中，您应该能够找出所有极端情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T21:49:02.330

一个简化的解决方案（带有递归的简单插入，删除了数据输入噪声）：

```
#include <stdio.h>
#include <stdlib.h>
#include <assert.h>

static int nums[] = { 6, 8, 4, 1, 3, 7, 14, 10, 13 }; // instead of the user input

typedef struct _node {
    int value;
    struct _node *left;
    struct _node *right;
} node;

node *node_new(int v)
{
    node *n = malloc(sizeof(*n));
    assert(n);

    n->value = v;
    n->left = NULL;
    n->right = NULL;

    return n;
}

void insert(node **tree, node *leaf)
{
    if (*tree == NULL) {
        *tree = leaf;
    } else if (leaf->value > (*tree)->value) {
        insert(&((*tree)->right), leaf);
    } else {
        insert(&((*tree)->left), leaf);
    }
}

void dump(node *tree, int level)
{
    static const char *pad = "\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";

    if (tree != NULL) {
        printf("%sSelf: %d\n", pad + 16 - level, tree->value);
        if (tree->left) {
            printf("%sLeft node:\n", pad + 16 - level);
            dump(tree->left, level + 1);
        }
        if (tree->right) {
            printf("%sRight node:\n", pad + 16 - level);
            dump(tree->right, level + 1);
        }
    } else {
        printf("%sEmpty\n", pad + 16 - level);
    }
}

int main()
{
    size_t n = sizeof(nums) / sizeof(*nums);
    int i;
    node *tree = NULL;
    for (i = 0; i < n; i++) {
        insert(&tree, node_new(nums[i]));
    }

    dump(tree, 0);

    // give some work to the kernel
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T22:15:08.703

您应该考虑递归执行此操作。请记住，每个节点本身就是一棵树：

```
#include <stdio.h>
#include <stdlib.h>

typedef struct tree_struct {
    int value;
    struct tree_struct* left;
    struct tree_struct* right;
} Tree;

Tree* addToTree(int value, Tree* tree)
{
    if (tree == NULL) {
        tree = malloc(sizeof(Tree));
        tree->value = value;
        tree->left = NULL;
        tree->right = NULL;
    } else {
        if (value < tree->value) {
            tree->left = addToTree(value, tree->left);
        } else {
            tree->right = addToTree(value, tree->right);
        }
    }
    return tree;
}

int main(int argc, char** argv)
{
    Tree* tree = NULL;
    int in;
    while (scanf("%d", &in) != EOF) {
        tree = addToTree(in, tree);
    }

    return 0;
} 
```

# c# - 使用实体框架部署 MVC 4 应用程序

> ID：13112802
> 
> 赞同：0
> 
> 时间：2012-10-28T20:39:29.903
> 
> 标签：c#, asp.net-mvc, entity-framework, iis, asp.net-mvc-4

我创建了一个 mvc 应用程序。我使用实体框架来处理数据库。当我测试我的应用程序时，我通过我的应用程序的 Web 界面用一些数据填充了我的数据库。当我在 IIS 服务器上部署应用程序并将 .sdf 文件复制到已部署应用程序的文件夹时，出现错误：

> 不允许访问数据库文件。[ 1914，文件名 = C:\last_project\published\App_Data\Data.sdf,SeCreateFile]

如何在已部署的应用程序中获取工作数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T20:43:22.450

听起来像是权限问题。您是否确保 IIS 用户可以写入数据库文件？（我很确定在大多数情况下不是）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T21:04:34.997

您必须转到数据库所在的文件夹通常位于应用程序文件夹中，但您可以检查确切位置单击文件夹单击属性和安全性并添加新用户用户通常应该是这样的 IIS_IUSRS 并让用户阅读换句话说，你得到的错误是写权限是因为用户 iis 没有对该文件夹的权限。

# jquery - 如果我刷新页面，jQuery 可以工作，但不能在原始加载时工作。Chrome 扩展程序

> ID：13112805
> 
> 赞同：2
> 
> 时间：2012-10-28T20:39:34.400
> 
> 标签：jquery, google-chrome-extension

我正在创建一个 chrome 扩展。它有一个浏览器动作。单击该按钮时，将运行一个 javascript 文件。该文件创建一个新选项卡。在该选项卡中，有 div。我试图操纵他们的内容。重新表述这个问题：如何在第一次单击按钮时让它工作。（注意：如果我单击按钮然后刷新页面，则该版本的代码将有效，直到我更改代码然后再次刷新页面。）

从 Chrome 的帮助页面中，我发现：

> // 通过监听文档上的 // 事件，在 DOM 完全加载后添加事件监听器`DOMContentLoaded`，并在它触发时将监听器添加到 // 特定元素。document.addEventListener('DOMContentLoaded', function () { document.querySelector('button').addEventListener('click', clickHandler); });

[http://developer.chrome.com/extensions/contentSecurityPolicy.html](http://developer.chrome.com/extensions/contentSecurityPolicy.html)

清单中的 Javascript 文件：

```
chrome.browserAction.onClicked.addListener(function(tab) {

//This is to put the manager one tab to the right
var myIndex = tab.index;
chrome.tabs.create({index : myIndex + 1, url: "newTab.html"}); 
```

新标签.html

```
<script type="text/javascript" src="jquery.min-1.8.2.js"></script>
<script type="text/javascript" src="functionality02.js"></script>
<html><head>
<title>Title</title>

</head><body>
<div id='try'></div>

</body></html> 
```

功能02.js

```
function letsTryThis2(){

$("#try").append("<div>Some Content.</div>");
}

document.addEventListener('DOMContentLoaded', letsTryThis2); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T20:43:22.100

```
function letsTryThis2(){
    $("#try").append("<div>Some Content.</div>");
}
$(window).load(function () {
  letsTryThis2();
}); 
```

**编辑：** 作为我评论的（坏）替代品，你可以试试这个：

```
 function letsTryThis2(){
        $("#try").append("<div>Some Content.</div>");
    }
$(function(){
    setTimeout(function(){
        letsTryThis2();
    },2000);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T23:07:47.060

Chrome 扩展加载到浏览器中，就像网站上的 JavaScript 加载到页面上一样。如果更改源代码，最坏的情况是需要重新加载应用程序，最好的情况是刷新页面。

Chrome 扩展程序不是为实时更改而设计的，因为这效率低下，并且只有您（开发人员）会受到影响。

你看到的行为是完全正常的。该脚本在您加载时嵌入在页面中。要重新加载修改后的源，您必须重新加载页面以便再次应用它。考虑到您的用户永远不会遇到这个问题，除非他们是 Chrome 黑客并且玩弄代码，在这种情况下，他们可能知道刷新页面。;)

# java - 如何使用 Java 将当前日期插入 MySQL 数据库？

> ID：13112811
> 
> 赞同：17
> 
> 时间：2012-10-28T20:40:19.797
> 
> 标签：java, mysql

我想将当前日期和时间插入定义为日期时间类型的列中。

我输入了以下代码：

```
java.sql.Date sqlDate = new java.sql.Date(new java.util.Date().getTime());
PrepStmt.setDate(1, sqlDate); 
```

当我检查数据库时，我发现日期插入正确，但时间是：00:00:00。解决方法是什么？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-28T20:46:51.613

由于您使用`datetime`的是列类型，因此您需要使用`java.sql.Timestamp`来存储您的日期并`PrepareStatement.setTimestamp`插入它。

尝试使用这个： -

```
java.sql.Timestamp date = new java.sql.Timestamp(new java.util.Date().getTime());
PrepStmt.setTimestamp(1, date); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-28T20:43:20.150

你使用了错误的方法。你可以[`PreparedStatement#setTimestamp(int parameterIndex, Timestamp x)`](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html#setTimestamp%28int,%20java.sql.Timestamp%29)改用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-28T20:44:19.297

您需要使用的是[setTimestamp(int parameterIndex,Timestamp x)](http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html#setTimestamp%28int,%20java.sql.Timestamp%29)方法而不是 setDate() 方法。

您可以设置时间戳的方法之一如下：

```
Timestamp timestamp = new Timestamp(new Date().getTime()); 
```

然后，您可以将参数设置为：

```
PrepStmt.setTimestamp(1, timestamp); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-28T20:44:57.293

听起来你需要

```
java.sql.Timestamp 
```

您使用`java.sql.Date`的只是处理日期而不记录时间。或者，`java.sql.Time`如果您只需要时间，您可以使用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-28T20:45:40.747

尝试使用 setTimestamp 作为

```
PrepStmt.setTimestamp(1, sqlDate); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-12-15T12:34:23.743

```
java.sql.Timestamp date = new java.sql.Timestamp(new java.util.Date().getTime());
PrepStmt.setTimestamp(1, date); 
```

我用这个解决了它..

# prolog - 确定列表中的偶数位置并取出第二次出现

> ID：13112816
> 
> 赞同：0
> 
> 时间：2012-10-28T20:40:36.613
> 
> 标签：prolog

我刚学了一周的 prolog，我必须编写一个 prolog 程序来计算一个元素出现在列表 L 中偶数位置的次数。

我试图找出从上午 12:00 到现在（过去 16 小时凌晨 4:00）的问题，但失败了。

1.到目前为止我尝试过的就像

```
count(_,[],0).
count(E,[E|L],C):-!,count(E,L,C1),C is C1+1.
count(E,[A|L],C):-atom(A),count(E,L,C),!.
count(E,[A|L],C):-count(E,A,C1),count(E,L,C2),C is C1+C2. 
```

它只是可以计算整个列表在元素中的出现是一个列表。

2.第二个是取出列表中的第二个出现元素

我到目前为止所尝试的就像但是失败了

```
takeout(A,[A|B],B). 
takeout(A,[B|C],[B|D]) :- takeout(A,C,D). 
takeoutSecond(A,[B|C],[B|D]):- takeoutSecond(A,C,D). 
takeoutSecond(A,[A|B],[A|C]):- takeout(A,B,C). 
```

3.如果takeoutsecondlast没有reverse，你能给我一些提示吗？我会很感激的！

你能给我一些提示吗，我尽我所能。

我现在不会回复，因为我熬夜了，我为此道歉。感谢您阅读我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T09:53:15.947

您错过了 Prolog 模式匹配的一个非常简单的用法：即，匹配第二个元素只需忽略第一个元素

```
match_second(E, [_,E|Rest], Rest). 
```

您可以将其用作您的作业的“积木”，但它非常简单，您最好将它整合到您的工作中。在谓词的*头部*使用该模式。

# javascript - Spotify 网络浏览器按钮如何与 Spotify 应用程序交互？

> ID：13112822
> 
> 赞同：13
> 
> 时间：2012-10-28T20:41:26.863
> 
> 标签：javascript, browser, controls, spotify

看看这个播放按钮，看起来完全是用javascript写的：[spotify play button](https://developer.spotify.com/technologies/spotify-play-button/)。

请注意，按下播放将导致 Spotify 开始播放音乐。好的，我认为这是通过一些特定于应用程序的协议链接（如 spotify://play）完成的，尽管我可能是错的。但疯狂的是，如果您停止在 Spotify 中播放音乐，浏览器中的按钮将更新以显示音乐已停止播放！这是如何运作的？

你可以在[这里查看它的来源](https://embed.spotify.com/?uri=spotify%3atrack:4bz7uB4edifWKJXSDxwHcs)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-08-05T16:32:24.340

桌面`*.spotilocal.com`在您的计算机上运行服务器，然后在网络上，嵌入播放器（[示例](https://embed.spotify.com/?uri=spotify:user:spotify_uk_:playlist:5KH0TsoTmoErzBcapI998E)）将选择一个子域名（示例：）`fdxubmxkqp.spotilocal.com`。

然后它向本地服务器的 API 发出请求，示例：

```
https://fdxubmxkqp.spotilocal.com:4370/service/version.json
https://fdxubmxkqp.spotilocal.com:4370/simplecsrf/token.json 
```

它只返回一些 JSON：

```
{
"version": 9, 
"client_version": "1.0.10.107.gd0dfca3a"
} 
```

有关更多信息，请参阅[此屏幕截图](https://i.stack.imgur.com/s7Dqwm.jpg)，或者您可以通过访问[news.spotify.com](https://news.spotify.com/us/)并将网络检查`spotilocal`器用作过滤器来获取相同的信息。

[![在此处输入图像描述](../Images/cf8224177db0e00bce68b840a9de8b8e.png)](https://i.stack.imgur.com/s7Dqw.jpg)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-28T20:48:42.267

*（注意，这不是他们实际的做法，但对于希望实现类似功能的人来说，这仍然是一个有效的答案）*

## 使用自定义协议内容处理程序

它注册了一个自定义协议内容处理程序。您可以通过浏览器为任何`"web-*"`协议注册协议，以便让您的网站处理该协议，但您也可以在安装时让应用程序注册协议。（这就是 Spotify 的工作方式）。在这里看到这篇文章：

[将应用程序注册到 URL 协议](http://msdn.microsoft.com/en-us/library/aa767914%28v=vs.85%29.aspx)

您的浏览器可以配置为识别某些处理程序。

我不确定每个浏览器是如何做到的，我相信它可以根据上面链接的文章在 Internet Explorer 的注册表级别上运行。

无论如何，在 Chrome 和 Firefox 中都有`window.navigator.registerProtocolHandler`注册协议的功能。

见这里：[https ://developer.mozilla.org/en-US/docs/DOM/navigator.registerProtocolHandler](https://developer.mozilla.org/en-US/docs/DOM/navigator.registerProtocolHandler)

另外，请查看这篇非常[简短的文章](http://updates.html5rocks.com/2011/06/Registering-a-custom-protocol-handler)。（虽然信息非常稀少）

* * *

Chrome 13 终于包含`navigator.registerProtocolHandler`. 此 API 允许 Web 应用程序将自己注册为特定协议的可能处理程序。例如，用户可以选择您的应用程序来处理“mailto”链接。

注册一个协议方案，如：

```
navigator.registerProtocolHandler(
    'web+mystuff', 'http://example.com/rph?q=%s', 'My App'); 
```

* * *

如果我在回答中没有明确说明，我提供了有关 Web 应用程序如何注册自己的协议以及*桌面应用程序*如何注册新协议的信息。（任何网络应用程序，都需要前缀`web-*`以避免安全问题）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-01T22:19:04.933

spotify 播放按钮长轮询（通过 HTTPS）在 localhost 上运行的 spotify 应用程序以更新状态。

# httpclient - 无法使用 HttpClient 访问谷歌趋势

> ID：13112828
> 
> 赞同：3
> 
> 时间：2012-10-28T20:42:11.693
> 
> 标签：httpclient, apache-httpclient-4.x, google-api-java-client

我对此有点新手......基本上我需要运行一个脚本来从谷歌趋势下载.csv文件。我根据this [reference](http://www.vogella.com/articles/ApacheHttpClient/article.html)编写了以下代码，代码如下：

```
 HttpClient client = new DefaultHttpClient();
     HttpPost post = new HttpPost("https://www.google.com/accounts/ClientLogin");

     try {

         List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>;
         nameValuePairs.add(new BasicNameValuePair("Email", "myEmail"));
         nameValuePairs
                 .add(new BasicNameValuePair("Passwd", "myPasswd"));
         nameValuePairs.add(new BasicNameValuePair("accountType", "GOOGLE"));
         nameValuePairs.add(new BasicNameValuePair("source",
                 "Google-cURL-Example"));
         nameValuePairs.add(new BasicNameValuePair("service", "xapi"));

         post.setEntity(new UrlEncodedFormEntity(nameValuePairs));
         HttpResponse response = client.execute(post);
         BufferedReader rd = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));

         String line = "";
         while ((line = rd.readLine()) != null) {
             System.out.println(line);
             if (line.startsWith("SID=")) {
                 String key = line.substring(4);
                 // Do something with the key
         } catch (Exception e) {
                    } 
```

我得到了有关 SID、LSID、Auth 的信息，但不知道如何使用这些信息。我想我应该在我的以下请求中添加这些 cookie，但不知道具体如何。我编写了另一段代码来连接到某个 URL，但我不断收到此消息“您必须登录才能从 Google 趋势中导出数据”。如果有帮助，代码就在这里：

```
 URL url = new URL(myUrl);
        HttpURLConnection conn = (HttpURLConnection) url.openConnection();

        conn.setDoInput(true);
        conn.setDoOutput(true);
        conn.setInstanceFollowRedirects(true);
        conn.addRequestProperty("Content-Type", "application/x-www-form-urlencoded");
        conn.addRequestProperty("Authorization", "SID"+key);
        conn.addRequestProperty("Email", "myEmail");
        conn.addRequestProperty("Passwd", "myPasswd");
        conn.setReadTimeout(5000);
        conn.connect(); 
```

我搜索了一下，发现很少有用的信息，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:27:41.513

它必须是Java吗？在python中，就这么简单：

```
from pyGTrends import pyGTrends

connector = pyGTrends('google username','google password')
connector.download_report(('keyword1', 'keyword2'))
print connector.csv() 
```

您将需要[google 趋势 api 库](http://www.juiceanalytics.com/writing/programmatic-google-trends-api/)。

如果它必须是 Java，您可能需要查看 Apache 的[HttpClient 示例](http://hc.apache.org/httpcomponents-client-ga/examples.html)。“基于表单的登录”和“客户端身份验证”可能都相关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-04T09:06:15.910

我刚刚编码了这个：

[https://github.com/elibus/j-google-trends-api](https://github.com/elibus/j-google-trends-api)

它是 Google Trends API 的非官方 Java 实现。您可以使用它轻松访问 Google 趋势，或者您可能想查看代码以查看它是否有效。

无论如何，身份验证流程如下（所有步骤都是必需的）：

1.  获取[https://accounts.google.com/ServiceLoginAuth](https://accounts.google.com/ServiceLoginAuth)并解析 GALX id
2.  发布用户名/密码 + GALX
3.  获取[http://www.google.com](http://www.google.com)

然后，您可以使用针对经过身份验证的用户的宽松 QoS 策略访问 Google Trend。

# linux - TCL中使用ns2的参数

> ID：13112831
> 
> 赞同：0
> 
> 时间：2012-10-28T20:42:42.640
> 
> 标签：linux, bash, tcl, ns2

我怎样才能发送这个值

```
24.215729
24.815729
25.055134
27.123499
27.159186
28.843474
28.877798
28.877798 
```

tcl 输入参数？如您所知，我们不能使用管道命令，因为 tcl 以这种方式接受！我该怎么做才能将此数字存储在 tcl 文件中（变量中此数字的计数，可以是 0 到 N，在本例中为 7）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T22:23:58.410

这在 bash 中很容易做到，将值列表转储到文件中，然后运行：

```
tclsh myscript.tcl $(< datafilename) 
```

然后可以使用参数变量在脚本中访问这些值：

```
 puts $argc;  # This is a count of all values
 puts $argv;  # This is a list containing all the arguments 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T07:23:13.863

我在编码时使用的一种技术是将数据作为文字放入我的脚本中：

```
set values {
    24.215729
    24.815729
    25.055134
    27.123499
    27.159186
    28.843474
    28.877798
    28.877798
} 
```

现在我可以一次将它们输入一个命令`foreach`，或者将它们作为单个参数发送：

```
# One argument
TheCommand $values 
```

```
# Iterating
foreach v $values {
    TheCommand $v
} 
```

一旦您的代码使用文字，切换它以从文件中提取数据非常简单。您只需用代码替换文字即可读取文件：

```
set f [open "the/data.txt"]
set values [read $f]
close $f 
```

您还可以从标准输入中提取数据：

```
set values [read stdin] 
```

如果有很多值（例如，超过 10–20MB），那么您最好一次处理一行数据。以下是从标准输入读取的方法……</p>

```
while {[gets stdin v] >= 0} {
    TheCommand $v
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T22:36:28.993

您可以使用以下`stdin`命令读取通过管道传输的数据

```
set data [gets stdin] 
```

或从临时文件中，如果您愿意。例如，以下程序的第一部分（来自[wiki.tcl.tk](http://wiki.tcl.tk/367)的示例）从文件中读取一些数据，然后另一部分从`stdin`. 要对其进行测试，请将代码放入文件（例如`reading.tcl`），使其可执行，创建一个小文件`somefile`，然后通过例如执行

```
./reading.tcl < somefile

#!/usr/bin/tclsh
#  Slurp up a data file
set fsize [file size "somefile"]
set fp [open "somefile" r]
set data [read $fp $fsize]
close $fp
puts "Here is file contents:"
puts $data

puts "\nHere is from stdin:"
set momo [read stdin $fsize]
puts $momo 
```

# scala - Scala-GWT 状态

> ID：13112832
> 
> 赞同：8
> 
> 时间：2012-10-28T20:42:43.530
> 
> 标签：scala, gwt, playframework-2.0

有人知道**Scala-GWT**项目的当前状态吗？

那里的主要作者 Grzegorz Kossakowski 似乎在春季退出了该项目，转而研究 scalac。

然而，在 2011 年 11 月的一次[采访](http://www.infoq.com/news/2011/11/scala-gwt "面试")中，他说

> 我预计下一个版本是 0.1，只有到那时我才会积极鼓励人们在实际项目中尝试它。这个版本应该在几周内发布（肯定是在圣诞节之前）。

在我看来，Scala-GWT 是一个非常有前途的项目，因为它是对 Scala 的 Play2 的补充——Play 是创建具有轻量级、无状态架构的应用程序时的首选框架，而 Scala-GWT 是富客户端应用程序的框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-20T22:32:22.290

[斯卡拉+GWT](http://scalagwt.github.io/)

Scala+GWT 项目旨在通过 GWT 工具链为浏览器编译 Scala 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T00:38:21.453

我记得最近在邮件列表中读到一位主要（也是目前唯一的）开发人员，他因为个人原因离开了，并且他计划在不久的将来重新参与该项目。但事实上，该项目没有得到任何资金支持，而且开发人员数量众多，这并不能让它的未来充满希望。可悲的是。

# c - C - 简单模数表的问题，它不是那么简单

> ID：13112835
> 
> 赞同：1
> 
> 时间：2012-10-28T20:43:06.087
> 
> 标签：c, bit-manipulation, modulus

我一直在研究 Kernighan 和 Ritchie 的“C 编程语言”并阅读了`x mod y == x & y-1`. 所以，我用铅笔和纸解决了这个问题，效果很好，所以我尝试测试它，问题就在这里：

代码：

```
#include <stdio.h>

main()
{
  int i, j;

  for(i = 1; i < 10; i++){
    for(j = 1; j < 10; j++)
      printf("%3d",i & j-1);
    printf("\n");
  }
} 
```

给出输出：

```
 0  1  0  1  0  1  0  1  0
  0  0  2  2  0  0  2  2  0
  0  1  2  3  0  1  2  3  0
  0  0  0  0  4  4  4  4  0
  0  1  0  1  4  5  4  5  0
  0  0  2  2  4  4  6  6  0
  0  1  2  3  4  5  6  7  0
  0  0  0  0  0  0  0  0  8
  0  1  0  1  0  1  0  1  8 
```

和

```
#include <stdio.h>

main()
{
  int i, j;

  for(i = 1; i < 10; i++){
    for(j = 1; j < 10; j++)
      printf("%3d",i % j);
    printf("\n");
  }
} 
```

给出输出：

```
 0  1  1  1  1  1  1  1  1
  0  0  2  2  2  2  2  2  2
  0  1  0  3  3  3  3  3  3
  0  0  1  0  4  4  4  4  4
  0  1  2  1  0  5  5  5  5
  0  0  0  2  1  0  6  6  6
  0  1  1  3  2  1  0  7  7
  0  0  2  0  3  2  1  0  8
  0  1  0  1  4  3  2  1  0 
```

请注意，唯一的变化`%`是`&`. 任何输入将不胜感激

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-28T20:45:14.493

方程

```
x mod y == x & y-1 
```

*仅对*`y`2 的幂是正确的。

如果`y = 2^k`， 的二进制表示`y`是一个 1 位后跟`k`0 位（并且前面有多个 0 位，具体取决于类型的宽度），并且 的表示`y-1`是`k`1 位（前面有 0）。

那么如果你写`x = q*y + r`with `0 <= r < y`，二进制表示`r`最多需要位`k`，而 的最后一位都是 0，所以模的余数由 的最低有效位组成，这些位是通过按位和 with 获得的。`k``q*y``x``y``k``x``y-1`

对于奇数`y > 1`，`y-1`是偶数，所以`x & y-1`总是偶数，因此`(y+1) % y == 1 != (y+1) & (y-1)`。即使`y`不是 2 的幂，也将 1 替换为对应于 in 的最低设置位的 2 的`y`幂`y+1`。

# javascript - 在 javascript 中访问其他对象的属性

> ID：13112837
> 
> 赞同：2
> 
> 时间：2012-10-28T20:43:19.230
> 
> 标签：javascript, oop, binding

在属于 javascript 对象的 JavaScript 函数中，我想使用另一个对象属性的值：

```
var firstObject={
    says:"something"
}

var secondObject={
    speak:function(){console.log(this.saysToo)},
    saysToo:firstObject.says
}

secondObject.speak(); 
```

在我在调试器中检查“secondObject”时，“saysToo”具有正确的值。但是，如果我尝试通过“this.saysToo”访问它，它是未定义的。

如何从第二个对象中访问第一个对象的属性？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T23:05:54.847

两者`firstObject`和`secondObject`都是单独的对象。关键字`this`指的是其执行上下文的对象。

```
<script>
var firstObject = {
    says: "something",
    test: function() {
        //this == firstObject
        console.log(this == firstObject); //shows: true
    }
}

var secondObject = {
    speak: function() {
        //this == secondObject
        console.log(this.saysToo);
    },
    saysToo: firstObject.says,
    test: function() {
        //this == secondObject
        console.log(this == secondObject); //shows: true
        console.log(this == firstObject); //shows: false
    },
}

secondObject.speak();

//this == window
console.log(this===window); //shows: true

console.log(typeof this.saysToo); //shows: undefined
//because "this.saysToo" is same as "window.saysToo" in this (global) context
</script> 
```

可以使用`call`of`apply`方法将函数调用与其他对象绑定，以使`this`该函数表现为另一个对象。

```
<script>
var firstObject = {
    says: "something",
    saysToo: "other"
}

var secondObject = {
    speak: function() {
        console.log(this.saysToo);
    },
    saysToo: firstObject.says
}

secondObject.speak(); //shows: "something"

//bind with "firstObject"
secondObject.speak.call(firstObject); //shows: "other"
</script> 
```

# javascript - 根据父链接更改图像源？

> ID：13112841
> 
> 赞同：2
> 
> 时间：2012-10-28T20:43:30.477
> 
> 标签：javascript, html, image, src

我已经为此解决方案研究了 Javascript，但恐怕我对此的了解太有限了。我猜这个问题的解决方案必须用“节点”来解决，但我就是不*知道如何*......

我希望通过更改图像源来绕过以下网站上的图像删除。 [网站链接](http://www.last.fm/music/King+Crimson/+albums)

```
<a href="/music/King+Crimson/In+the+Court+of+the+Crimson+King" class="g3 album-item-cover link-hook" itemprop="url">
   <div class="cover-image  cover-image--no-content" style="background-image: url('http://cdn.last.fm/flatness/responsive/2/noimage/default_album_300_g4.png');">
      <img class="cover-image-image" src="http://cdn.last.fm/flatness/responsive/2/noimage/default_album_300_g4.png" alt="" />
      <div class="text-over-image ">
         <span class="text-over-image-text">In the Court of the Crimson King</span>
         <br/>
         <span class="text-over-image-text text-over-image-text--secondary">148,881 listeners</span>
      </div>
   </div>
</a> 
```

现在我已经尝试了非常基本的功能，比如“替换”。但我没有得到任何结果。有没有办法根据代码顶部的 URL 使用 JavaScript 更改以下内容？

例子：

```
<a href="/music/King+Crimson/URL-A">
...
<img class="cover-image-image" src="http://cdn.last.fm/flatness/responsive/2/noimage/default_album_300_g4.png" alt="" />
...
</a>

<a href="/music/King+Crimson/URL-B">
...
<img class="cover-image-image" src="http://cdn.last.fm/flatness/responsive/2/noimage/default_album_300_g4.png" alt="" />
...
</a> 
```

进入：

```
<a href="/music/King+Crimson/URL-A">
...
<img class="cover-image-image" src="COVERFORA.JPG" alt="" />
...
</a>

<a href="/music/King+Crimson/URL-B">
...
<img class="cover-image-image" src="COVERFORB.JPG" alt="" />
...
</a> 
```

我为自己提供的少量材料道歉，但我只是想知道是否真的有解决方案。感谢您花时间阅读这篇文章。

干杯!

编辑：

以下网站的一些源代码示例：[http ://www.last.fm/music/King+Crimson/+albums](http://www.last.fm/music/King+Crimson/+albums)

```
<a href="/music/King+Crimson/In+the+Court+of+the+Crimson+King"    class="g3 album-item-cover link-hook" itemprop="url">
    <img src="http://cdn.last.fm/flatness/responsive/2/noimage/default_album_300_g4.png" alt="Album cover for In the Court of the Crimson King" class="rounded" width="220" height="220" />
</a>

<a href="/music/King+Crimson/Red"    class="g3 album-item-cover link-hook" itemprop="url">
    <img src="http://cdn.last.fm/flatness/responsive/2/noimage/default_album_300_g4.png" alt="Album cover for Red" class="rounded" width="220" height="220" />
</a> 
```

现在，我的想法是将我自己的图像源插入到其中的每一个中，但显然这更棘手，因为所有链接都具有与默认相同的图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T22:05:28.153

```
$('a.album-item-cover > img.rounded'​).each(function(e) {
    var $this=$(this);
    $this.attr('src',this.parentElement.href
                          .replace(/^.*\/([^\/]+)$/,'Cover_for-$1.jpg'));
    }
    )​​​​​; 
```

`$1`这是最后一个 / 之后的字符串

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T22:14:24.227

不完全确定你想做什么

```
var albumCover = document.querySelectorAll('.g3.album-item-cover.link-hook'), // get all links
    i = albumCover.length,
    a, img,
    dict = {  // link dictionary, href : src
        '/music/King+Crimson/In+the+Court+of+the+Crimson+King' : 'http://photobucket.com/InTheCourt.jpg',
        '/music/King+Crimson/Discipline' : 'http://photobucket.com/Discipline.jpg'
    };
while( --i >= 0 ) {                         // loop over each link
    a = albumCover[i];                      // that link
    img = a.getElementsByTagName('img')[0]; // that image
    img.src = dict[a.getAttribute('href')]  // replace src on that image based on that link
              || img.src;                   // else no change
} 
```

# rdf - 在 OWL 中使用排除者

> ID：13112848
> 
> 赞同：2
> 
> 时间：2012-10-28T20:44:01.693
> 
> 标签：rdf, ontology, owl, reasoning, inference-engine

亲爱的语义网人，

我在质疑自己如何在 OWL 中定义“排除者”结构。目前我能想到的唯一解决方案是使用 disjointWith。示例代码中演示了“排除者”的含义。房屋对象是屋顶、墙壁、窗户和地板的交集。因此，如果其中一个课程错过，个人将不会成为众议院。但是推理器会进一步推理，因为特定交集的缺失类可能会成为真的。另一方面，House 类与 Tsunami 类具有脱节的关系。当我的个人是海啸班级时，我直接知道我的个人永远不会成为众议院班级。这是我在谈论“排除者”时所期望的行为。但也许其他人对此有不同的看法？

```
 <?xml version="1.0" encoding="UTF-8" standalone="no"?>

<!DOCTYPE rdf:RDF [
    <!ENTITY owl "http://www.w3.org/2002/07/owl#" >
    <!ENTITY rdf "http://www.w3.org/1999/02/22-rdf-syntax-ns#" >
]>

<rdf:RDF    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" 
            xmlns="http://www.almfluss.com/rdf/0.1/Ontology.owl#" 
            xmlns:owl="http://www.w3.org/2002/07/owl#">

<owl:Class rdf:about="#House">
    <owl:intersectionOf rdf:parseType="Collection">
        <rdf:Description rdf:about="#Roof"/>
        <rdf:Description rdf:about="#Wall"/>
        <rdf:Description rdf:about="#Windows"/>
        <rdf:Description rdf:about="#Floor"/>
    </owl:intersectionOf>
    <owl:disjointWith rdf:resource="#Tsunami"/>
</owl:Class>

<owl:NamedIndividual rdf:about="#instance_House">
    <rdf:type rdf:resource="#Roof"/>
    <rdf:type rdf:resource="#Wall"/>
    <rdf:type rdf:resource="#Windows"/>
    <rdf:type rdf:resource="#Floor"/>
    <rdf:type rdf:resource="#Tsunami"/>
</owl:NamedIndividual>

<owl:Class rdf:about="#Roof"/>
<owl:Class rdf:about="#Wall"/>
<owl:Class rdf:about="#Windows"/>
<owl:Class rdf:about="#Floor"/>
<owl:Class rdf:about="#Tsunami"/>

</rdf:RDF> 
```

问候， Martijn van der Plaat

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T21:22:20.703

老实说，我不太明白你在追求什么。但是，我感觉您正在尝试以完全错误的方式使用 OWL。因此，这里有一些获得更好模型的技巧，希望能让您更好地了解如何有效地使用 OWL。

您的示例本体中最重要的问题是您以一种没有意义的方式使用类-实例关系。您有一个类型为屋顶、墙壁、窗户和地板的个体。这在概念上只是胡说八道：一个东西怎么可能同时是这四种东西呢？

房屋和屋顶/墙壁/窗户之间的关系不是一个是另一个（isA），而是它们是彼此的*一部分*。因此，您不应使用交叉和不相交公理之类的东西来尝试对本体建模，而应使用关系和属性限制。

例如，要模拟房屋必须至少包含一个屋顶、四面墙和一扇窗户，您可以执行以下操作（使用[OWL Manchester 语法](http://www.w3.org/2007/OWL/wiki/ManchesterSyntax)）：

```
Prefix: : <http://example.org/>

Class: Roof

Class: Window

Class: Wall

Class: House 
   SubClassOf: hasRoof min 1 and hasWall min 4 and hasWindow min 1

Class Tsunami
   DisjointWith: House

ObjectProperty: hasRoof
   Domain: House
   Range: Roof

ObjectProperty: hasWall
   Domain: House
   Range: Wall

ObjectProperty: hasWindow
   Domain: House
   Range: Window

Individual: myHouse
   Types: House 
```

请注意我们如何将房屋类定义为所有具有至少四堵墙、一个屋顶和至少一扇窗户的事物的子类。请注意，我们使用的是子类关系（不是等价类关系），因为我们想说*如果*某物是房子，它必须有这些东西。我们不想说相反，因为毕竟确实存在有四面墙、一个屋顶和一扇窗户的东西，但它们不是房子（例如谷仓、棚子、商店）。

至于海啸：虽然房屋类别和海啸类别确实是不相交的，但我不太确定建模是否特别有用。海啸和房屋之间更有趣的关系可能是一个对另一个来说是危险的。

另请注意：这只是可能的建模方式的一个示例。您可以在建模中做出其他选择（例如，使用通用`hasPart`属性而不是特定的`hasRoof`/ `hasWall`/`hasWindow`属性来建模房屋与屋顶、墙壁和窗户之间的关系），这同样很好，具体取决于您的需求/品味。

# javascript - 如何在javascript中告诉包含对象？

> ID：13112854
> 
> 赞同：2
> 
> 时间：2012-10-28T20:44:51.990
> 
> 标签：javascript, json

我有 JSON 数据，我想知道是否有办法确定嵌套对象的父对象。例如，采用这种结构：

```
Vehicles[]
 ForSaleCars[]
  Car{}
   Make
   Model
   Year
 SoldCars[]
  Car{}
   Make
   Model
   Year 
```

假设这是在`var json = ;`并且已经填充了一些数据。像这样访问 ForSaleCars 数组中的第二辆车很容易：

```
var secondCar = json.Vehicles.ForSaleCars[1]; 
```

在这一点上，**仅从**变量中`secondCar`，是否可以判断它来自`ForSaleCars`而不是`SoldCars`？

我问的原因是我正在递归地遍历一个 json 对象图，很高兴看到对象有哪个父对象*而不进行*跟踪。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T20:46:08.657

> 此时，仅从 secondCar 变量，是否有可能判断它来自 ForSaleCars 而不是 SoldCars？

不会。JavaScript 不会自动跟踪引用的复制来源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T20:46:44.897

这不可能。您可以改为维护哈希。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T20:47:34.133

不，您正在从父级复制，JavaScript 不会跟踪父级引用曾经是什么。如果您希望能够对其进行跟踪，则需要添加参考：

```
var secondCar = json.Vehicles.ForSaleCars[1];
secondCar.parent = json.Vehicles; 
```

# actionscript-3 - AS3IsoLib 雪碧 SVG

> ID：13112856
> 
> 赞同：1
> 
> 时间：2012-10-28T20:45:08.393
> 
> 标签：actionscript-3

我正在尝试将精灵添加到我的网格中，并且使用 PNG 这样做可以正常工作，但使用 SVG 这样做不会产生相同的结果。是否可以将 SVG 图像用作精灵并将其添加到我的 as3isolib 网格中？

```
myLoader = new Loader();

myLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, OnComplete);
myLoader.load(new URLRequest('x.svg'));

function OnComplete():void
{
    player = new IsoSprite();
    player.moveTo(14, 15, 0);
    player.setSize(50, 50, 1);
    player.sprites = [myLoader];
    scene.addChild(player);
    scene.render();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T08:11:53.577

SVG 不是图像，它是 XML 类型的文件，因此您需要在显示之前以某种方式对其进行解析。比如说，使用这个[https://github.com/LucasLorentz/AS3SVGRenderer](https://github.com/LucasLorentz/AS3SVGRenderer)库。还有一些，我已经发布了第一个找到的。

# c++ - 使用单个分隔符拆分字符串

> ID：13112858
> 
> 赞同：0
> 
> 时间：2012-10-28T20:45:09.210
> 
> 标签：c++

> **可能重复：**
> [在 C++ 中拆分字符串](https://stackoverflow.com/questions/236129/splitting-a-string-in-c)

我正在尝试将带有分隔符的单个字符串对象拆分为单独的字符串，然后输出单个字符串。

例如，输入字符串是名字，姓氏-年龄-职业-电话

'-' 字符是分隔符，我只需要使用字符串类函数单独输出它们。

最好的方法是什么？我很难理解 .find 。substr 和类似的功能。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T20:49:57.240

我认为字符串流`getline`并使代码易于阅读：

```
#include <string>
#include <sstream>
#include <iostream>

std::string s = "firstname,lastname-age-occupation-telephone";

std::istringstream iss(s);

for (std::string item; std::getline(iss, item, '-'); )
{
    std::cout << "Found token: " << item << std::endl;
} 
```

这里只使用`string`成员函数：

```
for (std::string::size_type pos, cur = 0;
     (pos = s.find('-', cur)) != s.npos || cur != s.npos; cur = pos)
{
    std::cout << "Found token: " << s.substr(cur, pos - cur) << std::endl;

    if (pos != s.npos) ++pos;  // gobble up the delimiter
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T20:48:48.407

我会做这样的事情

```
do
{        
    std::string::size_type posEnd = myString.find(delim);
    //your first token is [0, posEnd). Do whatever you want with it.
    //e.g. if you want to get it as a string, use
    //myString.substr(0, posEnd - pos);
    myString = substr(posEnd);
}while(posEnd != std::string::npos); 
```

# php - Symfony2 Doctrine 插入/更新表单

> ID：13112860
> 
> 赞同：1
> 
> 时间：2012-10-28T20:45:24.117
> 
> 标签：php, symfony, doctrine, symfony-forms

我正在尝试编写一个非常基本的表单，它能够在数据库中插入和更新记录。我的问题是每次按下保存按钮时，都会在数据库中创建一个新行。你能指出我源代码中的问题吗？

控制器： http: [//pastebin.com/YjMAdHqp](http://pastebin.com/YjMAdHqp)

路由： http: [//pastebin.com/WSV6xCSw](http://pastebin.com/WSV6xCSw)

数据库中的 id 列是一个自增整数。

感谢您的任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-09T10:25:44.877

您的问题的正确答案是使用合并方法而不是持久化。例如：

```
$your_entity = $form->getData();
$this->em->merge($your_entity); // MERGE not PERSIST
$this->em->flush(); 
```

[您可以在官方文档](https://www.doctrine-project.org/projects/doctrine-orm/en/2.6/reference/working-with-objects.html#merging-entities)中阅读有关 Merge Method 的更多信息

干杯，

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-29T04:33:43.577

```
 if ($id == 0) {
    $task = new Task();
  } 
```

您的 ID 参数默认为 0，并且会创建一个新任务，而不是更新现有的 tast。

```
hello_index:
    pattern: /hello/index/{id}
    defaults: { _controller: AcmeHelloBundle:hello:index, id:0 } 
```

您应该单独创建和编辑/更新操作，并为每个操作创建一个路由。

[http://symfony.com/doc/2.0/book/doctrine.html#updating-an-object](http://symfony.com/doc/2.0/book/doctrine.html#updating-an-object)

# ios - 在 NIB 中更新 imageview 的图像

> ID：13112861
> 
> 赞同：0
> 
> 时间：2012-10-28T20:45:32.777
> 
> 标签：ios, ios5, uiimageview, imageview

我在一个自定义单元格中创建了多个图像视图。如何以更新 NIB 中的特定图像视图为目标？

我给了它一个恢复ID，我可以使用它访问它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T21:23:15.563

我想您可以为此使用标记...将一个视图与另一个视图区分开来

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSView_Class/Reference/NSView.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSView_Class/Reference/NSView.html)

在此处找到标记方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T21:54:56.490

将 imageview 设置为插座，以便我可以参考它的工作

# c# - 是否有任何控件或方法可以在 Windows 窗体中使用 DateTime 滑块

> ID：13112869
> 
> 赞同：1
> 
> 时间：2012-10-28T20:46:24.540
> 
> 标签：c#, winforms, slider, trackbar

我有一个 winForm，其中需要使用可以滑动的 Silder，`DateTime`并且根据所选日期刷新网格。

是否有任何控件提供上述功能。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T20:52:03.260

是的，这个控件有 name [`TrackBar`](http://msdn.microsoft.com/en-us/library/system.windows.forms.trackbar.aspx)。您可以在没有标签的情况下使用它：

```
DateTime beginDate = //
DateTime endDate = //
datesTrackBar.Maximum = (int)(endDate - beginDate).TotalDays; 
```

`Scroll`并根据事件过滤您的网格：

```
private void datesTrackBar_Scroll(object sender, EventArgs e)
{
    DateTime selectedDate = beginDate.AddDays(datesTrackBar.Value);
    // filter grid
} 
```

`TimeSlider`或者您可以通过继承`TrackBar`和覆盖它的`OnPaint`事件来创建自己的控件。

[在这里您可以看到创建自定义滑块](http://www.codeproject.com/Articles/13712/TimeSlider-A-time-based-TrackBar)的示例。

# python - 更新！：Tkinter python 2.7 问题

> ID：13112874
> 
> 赞同：-1
> 
> 时间：2012-10-28T20:47:01.440
> 
> 标签：python, tkinter

```
import Tkinter
import tkMessageBox

class MyApp(object):
    def __init__(self):
        self.topFrame = Tkinter.Frame()
        self.root = Tk()
        self.root.wm_title("My first window!")
        self.label = Label(self.root, text="Enter your weight")
        self.label.pack(padx=20,pady=10)
        self.labeltext = StringVar()
        self.labeltext.set("Enter your height!")
        Label(self.root, textvariable=self.labeltext).pack()
        self.entrytext2 = StringVar()
        Entry(self.root, textvariable=self.entrytext2).pack()
        self.entrytext2.trace('w', self.entry_changed)
        self.buttontext = StringVar()
        self.buttontext.set("Bouton")
        Button(self.root, textvariable=self.buttontext, command=self.clicked1).pack()
        self.entrytext = StringVar()
        Entry(self.root, textvariable=self.entrytext).pack()
        self.entrytext.trace('w', self.entry_changed)

    def calcBMI(self):
        weight = float(self.entrytext2.get())
        inches = float(self.entrytext.get())
        BMI = (weight * 703)/ inches **2
        if BMI > 18.5 and BMI < 25:
                self.labeltext.set(BMI)
        elif BMI < 18.5:
                print ' Your BMI is Underweight ', self.value.set(BMI)
        else:
                print ' Your BMI is Overweight ', self.value.set(BMI)

    def clicked1(self):
        response = tkMessageBox.askyesno("Confirm", "You clicked?")
        if response:
            self.labeltext.set("You've been clicked!")
            self.buttontext.set("Butttttttton")
            print response

MyApp() 
```

所以当我编辑它时，我得到：

```
File "window1.py", line 45, in <module>
    MyApp()
  File "window1.py", line 7, in __init__
    self.root = Tk()
NameError: global name 'Tk' is not defined 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T20:53:17.253

尝试只调用 Frame()，而不是 Tkinter.Frame()。您使用了一个狂野的导入，即这行代码......

```
from Tkinter import * 
```

因此，命名空间“Tkinter”已经通过该语句定义，并且来自该命名空间的每个单独的方法和类现在都可以直接使用。

Tkinter.Frame() 在使用的​​情况下可以工作

```
import Tkinter 
```

而不是前者。如果存在进一步的问题，我还没有测试您的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T20:52:47.173

由于您从 Tkinter 导入了“*”，因此您不能使用它的名称来引用它。要在程序中使用名称`Tkinter`，您必须像这样导入它：

```
import Tkinter 
```

或者你只是`Tkinter.`从你的代码中删除“”，然后像这样保留导入语句。

请阅读[http://docs.python.org/2/tutorial/modules.html](http://docs.python.org/2/tutorial/modules.html)

# excel - 通过在行中查找值来获取列

> ID：13112877
> 
> 赞同：1
> 
> 时间：2012-10-28T20:47:22.680
> 
> 标签：excel, excel-formula

在 Excel 中，我查看了`hlookup`, `vlookup`，`match`但`index`这些函数都没有执行以下操作：

我需要在其中找到一个文本值`A1:Z1`并获取它的列。例如，我在 中找到了值`F1`，那么我想要一个结果`F:F`。

编辑：这是我希望将其添加到的功能：

```
=COUNTIFS(Source!B:B;Result!C3;Source!AT:AT;Result!$D$2) 
```

我需要`Source!B:B`或者`Source!AT:AT`是一个搜索功能，它在我的表格行和不同工作表（源）的列中查找特定值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T08:46:35.203

INDEX 函数可以返回一整列，例如假设你想在 A1:Z1 中搜索“x”试试

`=INDEX(A:Z;0;MATCH("x";A1:Z1;0))`

注意：这不会返回像 F:F 这样的文本字符串，它会返回对相关列的引用，您通常会在需要整个列引用的函数中使用该引用，例如 SUM、SUMIF、LOOKUP 等。

编辑：您可以在 COUNTIFS 函数中使用上述内容，如下所示：

`=COUNTIFS(INDEX(Source!A:Z;0;MATCH("x";Source!A1:Z1;0));Result!C3;Source!AT:AT;Result!$D$2)`

这使得第一个范围是动态的（在列 A 和 Z 之间 - 根据需要扩展）基于在 Source!A1:Z1 中首次找到“x”的位置，例如，如果首先在 J1 中找到“x”，则 COUNTIFS 使用 Source!J： J 表示第一个范围 - 您可以对 COUNTIFS 中的任何范围执行此操作

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T20:56:09.263

您可以使用它（它将返回`E:E`，然后您可以使用`INDIRECT`它来返回一个可行的范围）。这使用“单词”作为匹配的单词并在第一个匹配时停止：

```
=SUBSTITUTE(
    ADDRESS(1,MATCH("words",$A$1:$Z$1,0),4),"1",
    ":"&
    SUBSTITUTE(ADDRESS(1,MATCH("words",$A$1:$Z$1,0),4),"1","")) 
```

![在此处输入图像描述](../Images/d38c81bc49460a454b2d800d5a40cfb2.png)

这可以通过使用`MATCH`在您的范围内查找出现的位置（在本例中为 5），然后使用`ADDRESS`, with `row_num`= 1 和`column_num`= 匹配的结果。使用`4`for`abs_num`参数可确保返回的值不带`$`'s。然后，您将`1`in替换`E1`为“：”并使用相同的公式将其连接起来，将您`E:E`作为字符串。然后，您可以根据该范围进行查找（使用`INDIRECT`），例如：

![在此处输入图像描述](../Images/4b3636e3805ca98223e0174deca303ff.png)

# c++ - 我想通过递归获得列表元素的每一个排列

> ID：13112879
> 
> 赞同：1
> 
> 时间：2012-10-28T20:47:32.493
> 
> 标签：c++, algorithm, recursion

我想获得列表元素的每一个排列。我试图通过在两个列表之间混洗这些元素并检查`list2`.

不过有些不对劲。你能帮我找到正确的解决方案吗？

```
void iterlist(list<int>& Lit)
{
    list<int>::iterator it;

    for (it=Lit.begin(); it!=Lit.end(); it++)
        cout << " " << *it;

    cout << endl;
}

void permutations(list<int>& L1, list<int>& L2)
{
    L2.push_back(L1.front());
    L1.pop_front();

    if(!L1.empty())
    {
        permutations(L1, L2);
    }

    L1.push_back(L2.back());
    L2.pop_back();

    iterlist(L2);
} 
```

我正在测试它的元素`L1 = 1,2,3,4,5`，我得到的唯一排列是：`1 2 3 4 5`和`5 4 3 2 1`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T22:48:30.240

从 N 项列表递归生成 N 长度排列的通用算法是：

对于列表中的每个元素 x

*   复制没有元素 x 的列表；称它为新列表
*   找到 newList 的所有排列（这就是递归，顺便说一句）
*   将元素 x 添加到 newList 的每个排列的开头

还有其他方法可以做到这一点，但我一直认为这是学习递归的人最容易理解的方法。您似乎正在使用的方法涉及将算法的迭代循环部分存储在第二个列表中，这非常好，但我警告您管理订单交换的算法在执行此操作时不会立即直观（因为您不会-怀疑在适当的时候发现）。

下面演示了一般算法（并不是特别有效，但您可以从中得到一般的想法）。

```
#include <iostream>
#include <list>

typedef std::list<int> IntList;
void iterlist(IntList& lst)
{
    for (IntList::iterator it=lst.begin(); it!=lst.end(); it++)
        cout << " " << *it;
    cout << endl;
}

std::list<IntList> permute(IntList& L1)
{
    if (L1.size() == 1)
        return std::list<IntList>(1,L1);

    std::list<IntList> res;
    for (IntList::iterator i = L1.begin(); i != L1.end();)
    {
        // remember this
        int x = (*i);

        // make a list without the current element
        IntList tmp(L1.begin(), i++);
        tmp.insert(tmp.end(), i, L1.end());

        // recurse to get all sub-permutations
        std::list<IntList> sub = permute(tmp);

        // amend sub-permutations by adding the element
        for (std::list<IntList>::iterator j=sub.begin(); j!=sub.end();j++)
            (*j).push_front(x);

        // finally append modified results to our running collection.
        res.insert(res.begin(), sub.begin(), sub.end());
    }
    return res;
}

int main()
{
    IntList lst;
    for (int i=0;i<4;i++)
        lst.push_back(i);
    std::list<IntList> res = permute(lst);
    for (std::list<IntList>::iterator i=res.begin(); i!=res.end(); i++)
        iterlist(*i);
    return 0;
} 
```

产生以下输出，所有排列均为 0..3：

```
 3 2 1 0
 3 2 0 1
 3 1 2 0
 3 1 0 2
 3 0 2 1
 3 0 1 2
 2 3 1 0
 2 3 0 1
 2 1 3 0
 2 1 0 3
 2 0 3 1
 2 0 1 3
 1 3 2 0
 1 3 0 2
 1 2 3 0
 1 2 0 3
 1 0 3 2
 1 0 2 3
 0 3 2 1
 0 3 1 2
 0 2 3 1
 0 2 1 3
 0 1 3 2
 0 1 2 3 
```

# c# - 从强类型数据集中返回单行

> ID：13112880
> 
> 赞同：1
> 
> 时间：2012-10-28T20:47:33.017
> 
> 标签：c#, asp.net, strongly-typed-dataset

在我的 C# ASP.Net 项目中，我使用 xsd 数据集链接到我的数据库。我想创建一个从强类型数据表中返回单行的函数，但是在 C# 中这样做有点困难。我以前使用代码在 VB.Net 中成功完成了此操作：

```
Public Function dr() As DataSet1.UsersRow
    Dim ta As New DataSet1TableAdapters.UsersTableAdapter
    Dim dt As DataSet1.UsersDataTable = ta.GetData
    Return dt.Rows(0)
End Function 
```

我的 C# 版本的代码是：

```
public DataSet1.UsersRow dr()
{
    DataSet1TableAdapters.UsersTableAdapter ta = new DataSet1TableAdapters.UsersTableAdapter();
    DataSet1.UsersDataTable dt = ta.GetData;
    return dt.Rows(0);
} 
```

我收到错误无法将类型“System.Data.DataRow”隐式转换为“MyProject.DataSet1.UsersRow”。存在显式转换（您是否缺少演员表？）

如何在 C# 中返回强类型行

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T21:23:21.880

您应该能够使用它进行强类型化

`dt[0];`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T20:47:33.017

解决方案是在我返回时显式转换 Rows 项目：

```
public DataSet1.UsersRow dr()
{
    DataSet1TableAdapters.UsersTableAdapter ta = new DataSet1TableAdapters.UsersTableAdapter();
    DataSet1.UsersDataTable dt = ta.GetData();
    return (DataSet1.UsersRow)dt.Rows(0);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T20:32:35.680

更有效的解决方案是按照 SELECT TOP 1 .. 的行向 tableadapter 添加查询。FROM 用户，（或更一般地，添加 WHERE 子句以返回所需的行。）这样您就不会为了检索一行而将整个表拉回来。

# xcode - 卸载视图时保存 UIImageView - Xcode 4.5.1

> ID：13112884
> 
> 赞同：1
> 
> 时间：2012-10-28T20:47:44.233
> 
> 标签：xcode, uiview, uiimageview, load, save

在 Xcode 4.5.1 上创建应用程序并想知道当我导航到不同的视图时如何将当前图像保存在指定的 UIImageView 中。然后当我返回视图时，它会将保存的图像加载到 UIImageView 中？

非常感谢，不胜感激 :D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T04:38:29.767

我在下面发布的代码涉及将 uiimage 传递给第二个视图控制器。它还包括每个控制器上的按钮，用于在两者之间来回移动。当您在视图之间切换时，保存的图像将保留在 uiimageview 中。

```
SecondView.h

#import <UIKit/UIKit.h>

@interface SecondView : UIViewController {

IBOutlet UIImageView *yourphotoview;

UIImage *yourimage;
}

@property (retain, nonatomic) UIImage *yourimage;

- (IBAction)back;

@end

SecondView.m

#import "ViewController.h"
#import "SecondView.h"

@interface SecondView ()
@end

@implementation SecondView

@synthesize yourimage;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
// Custom initialization
}
return self;
}

- (void)viewDidLoad
{
yourphotoview.image = image;
[super viewDidLoad];
// Do any additional setup after loading the view.
}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}

- (IBAction)back {
[self dismissViewControllerAnimated:YES completion:NULL];
}

- (void)dealloc {
[image release];
[super dealloc];
}

@end

ViewController.h

#import <UIKit/UIKit.h>
#import "SecondView.h"

@interface ViewController : UIViewController

{
IBOutlet UISlider *compression;
IBOutlet UISwitch *smurferderp;

SecondView *SecondViewdata;

}

@property (retain, nonatomic) SecondView *SecondViewdata;
@property (retain, nonatomic) IBOutlet UIImageView *theimage;

- (IBAction)switchview:(id)sender;

@end

ViewController.m

#import "ViewController.h"
#import "SecondView.h"

@interface ViewController ()
@end

@implementation ViewController

@synthesize SecondViewdata, theimage;

- (IBAction)switchview:(id)sender {
SecondView *secondview = [self.storyboard instantiateViewControllerWithIdentifier:@"rr"];

self.SecondViewdata = secondview;
SecondViewdata.yourimage = theimage.image;

[self presentViewController: secondview animated:YES completion:NULL];
}

- (void)dealloc {
[theimage release];
[super dealloc];
}

@end 
```

# vb.net - 在 Richtextbox 中搜索和替换 - Visual Basic

> ID：13112887
> 
> 赞同：1
> 
> 时间：2012-10-28T20:47:51.607
> 
> 标签：vb.net

我有一个富文本框，我只想搜索和替换整个单词。

我有一些代码，但是我有一种感觉，我这样做的方式可能不允许只使用整个单词。

代码：

```
 Dim search As String = TextBox1.Text
    Dim replace1 As String = TextBox2.Text

    Dim input As String

    input = Form1.RichTextBox1.Text.Trim

    Dim location As Integer

    search = search.Trim()
    replace1 = replace1.Trim()
    location = input.IndexOf(search)

    If location = -1 Then
        MsgBox("Text not found", MsgBoxStyle.Exclamation, "Not Found")
    Else
        Form1.RichTextBox1.Text = input.Remove(location, search.Length).Insert(location, replace1)
        MsgBox("Text " & search & " has been replaced with " & replace1, , )
    End If 
```

如果您有其他方法，请分享。

第二次尝试：现在有效，但是我只想找到整个单词。

```
 Dim search As String = TextBox1.Text
    Dim replace1 As String = TextBox2.Text
    Dim input As String
    input = Form1.RichTextBox1.Text.Trim
    search = search.Trim()
    replace1 = replace1.Trim()

    If Regex.IsMatch(input, search) = True Then

        Dim out As String = Regex.Replace(input, search, replace1)
        Form1.RichTextBox1.Text = out

        MsgBox(search & " has been replaced with " & replace1, MsgBoxStyle.Information, "Success")
    Else

        MsgBox("Not found", MsgBoxStyle.Exclamation, "Not Found")
    End If 
```

最终代码：

```
 Dim search As String = TextBox1.Text
    Dim replace1 As String = TextBox2.Text
    Dim input As String
    input = Form1.RichTextBox1.Text.Trim
    search = search.Trim()
    replace1 = replace1.Trim()

    If Regex.IsMatch(input, " " & search & " ") = True Then

        Dim out As String = Regex.Replace(input, " " & search & " ", " " & replace1 & " ")
        Form1.RichTextBox1.Text = out

        MsgBox(search & " has been replaced with " & replace1, MsgBoxStyle.Information, "Success")
        GoTo line

    Else
        GoTo line3

        MsgBox("Not found", MsgBoxStyle.Exclamation, "Not Found")

    End If
line3:

    If Regex.IsMatch(input, search & " ") = True Then

        Dim out As String = Regex.Replace(input, search & " ", replace1 & " ")
        Form1.RichTextBox1.Text = out

        MsgBox(search & " has been replaced with " & replace1, MsgBoxStyle.Information, "Success")
        GoTo line

    Else
        GoTo line2
        MsgBox("Not found", MsgBoxStyle.Exclamation, "Not Found")

    End If
line2:

    If Regex.IsMatch(input, " " & search) = True Then

        Dim out As String = Regex.Replace(input, " " & search, " " & replace1)
        Form1.RichTextBox1.Text = out

        MsgBox(search & " has been replaced with " & replace1, MsgBoxStyle.Information, "Success")
        GoTo line
    Else

        MsgBox("Not found", MsgBoxStyle.Exclamation, "Not Found")
        GoTo line
    End If

line: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T20:54:41.200

```
pattern = "\b" + Regex.Escape(search) + "\b";

if (Regex.Match(input, pattern).Success) {
  // found it
  Regex.Replace(input, pattern, replace1);
} 
```

\b 表示单词边界。它将匹配直接出现在标点符号和空格之后的单词，或者出现在字符串开头的单词...

[http://www.regular-expressions.info/wordboundaries.html](http://www.regular-expressions.info/wordboundaries.html)

# android - android avd 模拟器的替代品

> ID：13112889
> 
> 赞同：25
> 
> 时间：2012-10-28T20:48:12.073
> 
> 标签：android, avd

所以对我来说，模拟器永远不会工作。而且我不想进行USB调试。所以我的开发周期包括为我在 Eclipse 中所做的编辑打包一个新的 apk，然后通过 Dropbox 将它发送到我的手机，然后从那里安装和运行 apk，注意错误，然后重复这个周期。

我想知道是否有任何其他模拟器或更简单的方法来测试 apk。谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-08T08:52:00.030

[http://androvm.org/](http://androvm.org/)很有希望，它似乎和模拟器一样好用，如果不是更好的话，但你必须做更多的配置。

Androvm 现在变成了[http://www.genymotion.com/](http://www.genymotion.com/)，它比其他任何替代方案都更容易使用。我希望这是您想要使用的。

另一个选项是 adb over wifi，它可以让您在不执行保管箱步骤[http://forum.xda-developers.com/showthread.php?t=1685736](http://forum.xda-developers.com/showthread.php?t=1685736)的情况下使用手机。不过，要使其正常工作，您将需要 root。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-09-18T11:49:21.533

我听从了 Cyril Mottier 的建议

[http://cyrilmottier.com/2013/06/27/a-productive-android-development-environment/](http://cyrilmottier.com/2013/06/27/a-productive-android-development-environment/)

并下载了与 VirtualBox 一起使用的 Genymotion。

AVD 和 GenyMotion 没有可比性。Genymotion 使用虚拟化而不是仿真，为我们提供了令人难以置信的性能。

你可以在这里下载 ：

[http://www.genymotion.com/](http://www.genymotion.com/)

唯一的缺点是目前所有可用的虚拟机都在 API 16+ 上运行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-26T08:49:45.527

适用于 Android 的 Visual Studio 模拟器，无需安装 Visual Studio 即可使用它们 [http://www.techtimes.com/articles/72646/20150729/microsoft-outs-android-emulator-heres-how-to-use-it.htm](http://www.techtimes.com/articles/72646/20150729/microsoft-outs-android-emulator-heres-how-to-use-it.htm)

具有许多功能，例如 Google 通过 Emulator 2.0 发布的功能（当前未发布）

[![适用于 Android 的 Visual Studio 模拟器](../Images/0754a67b8801264cca4e7c13e81d3c12.png)](https://i.stack.imgur.com/I24Lf.png)

[![在此处输入图像描述](../Images/c5b594afacd2d171fa27b8e014b20a4a.png)](https://i.stack.imgur.com/B1Hja.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-09T09:07:12.447

[此链接](http://alternativeto.net/software/genymotion)包含所有 Genymotion 可能的替代方案，这些替代方案如：

*   [蓝栈](http://alternativeto.net/software/bluestacks/)。
*   [安卓-x86](http://alternativeto.net/software/android-x86/)。
*   [温德罗伊](http://alternativeto.net/software/windowsandroid/)。
*   [优波](http://alternativeto.net/software/youwave/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-12T09:16:01.993

研究发布在[Nodeclipse Share](http://www.nodeclipse.org/android/windows/pc/run/test/2014/03/04/Android-on-PC.html)上。

所有选项为：

*   安卓 SDK
*   安卓-x86
*   BlueStacks（测试版免费）
*   AndroVM 和 Genymotion 相关（免费版和付费版）
*   温德罗伊
*   YouWave，在网站上阅读（不是免费的，15-20 美元）

# java - 在一组 4 个数字中找到最常出现的数字的最有效算法

> ID：13112891
> 
> 赞同：2
> 
> 时间：2012-10-28T20:48:26.717
> 
> 标签：java, algorithm, byte

我正在逐字节读取四个文件并比较所有四个字节以从这四个字节中生成一个最终字节。它的工作方式是：

1.  如果所有字节都是`0`，则输出`0`
2.  如果除了 1 个字节之外的所有字节都是`0`，则输出奇数字节输出（如果字节是`0, 0, 1, 0`，那么我将输出 a `1`）
3.  如果 2 个字节是`0`，那么我随机输出一个非`0`字节
4.  如果 1 个字节是`0`，则我从其他 3 个字节中输出出现次数最多的字节，否则在平局的情况下，我从该集合中输出一个随机字节
5.  如果所有字节都不是`0`，那么我输出出现次数最多的字节，否则在平局的情况下，我从该集合中输出一个随机字节

需要注意的重要一点是，“随机”并不一定是随机的，我可以选择最方便的一个。

所以我对此进行了一些思考，但我仍然无法想出从这些数字中获得输出的绝对最快的方法。我注意到的一件事是，如果我读取的前两个字节相同且非零，那么我可以跳过接下来的两个字节并只输出前两个字节中的一个。如果前三个字节是`0`，那么我可以输出最后一个字节。我还可以用第一个字节和第二个字节检查第三个字节，看看它们是否相等，这样我就可以避免进入第 4 个字节，但我需要它尽可能高效。我需要运行这个算法大约 80 亿次，所以每一点都很重要 =)

所以无论如何，最有效的方法是什么？（伪代码？或其他）

这就是程序的样子（至少是它的外壳）：

```
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;

public class reconstructerv2 {
   public static void main(String[] args) throws IOException {

      FileInputStream in1 = null;
      FileInputStream in2 = null;
      FileInputStream in3 = null;
      FileInputStream in4 = null;
      FileOutputStream out = null;  

      try {
         in1 = new FileInputStream("1.dd");
         in2 = new FileInputStream("2.dd");
         in3 = new FileInputStream("3.dd");
         in4 = new FileInputStream("4.dd");
         BufferedInputStream in1b = new BufferedInputStream(in1);
         BufferedInputStream in2b = new BufferedInputStream(in2);
         BufferedInputStream in3b = new BufferedInputStream(in3);
         BufferedInputStream in4b = new BufferedInputStream(in4);
         out = new FileOutputStream("final.dd");
         int a;
         int b;
         int c;
         int d;
         int o; 

         while ((a = in1.read()) != -1) {
            b = in2.read();
            if (a == b && a != 0)
               o = a;
            else {
               c = in3.read();
               d = in4.read();
            }
            System.out.println((byte) c);
            out.write((byte) o);
         }
      } finally {
         if (in1 != null) {
            in1.close();
            in2.close();
            in3.close();
            in4.close();
         }
         if (out != null) {
            out.close();
         }
      }
   }
} 
```

编辑：80亿，不是800万

EDIT2：正如评论中所指出的，由于同步，我不能跳过阅读字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T21:08:23.440

这个 while 循环不起作用：

```
while ((a = in1.read()) != -1) {
    b = in2.read();
    if (a == b && a != 0)
        o = a;
    else {
        c = in3.read();
        d = in4.read();
    }
    System.out.println((byte) c);
    out.write((byte) o);
} 
```

因为有时您会读取 file1 和 file2，有时您会读取所有四个文件。

另一点：当您读取所有四个文件时`o`，未设置或具有前一轮的值。`c`如果您只读取 file1 和 file2，这也适用于。所以，为了解决这个问题，你*总是*必须阅读所有四个文件，然后你的循环的性能就没有那么重要了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T20:59:08.837

> 如果所有字节都为0，则输出0

输出 a+b+c+d。

> 如果除了 1 个字节之外的所有字节都是 0，则输出奇数字节输出（如果字节为 0,0,1,0，那么我将输出 1）

和上面一样。这已经为您节省了一个案例。如果任意三个字节为零，则输出总和。

> 如果 2 个字节为 0，则我随机输出一个非 0 字节如果 1 个字节为 0，则我从其他 3 个字节中输出出现次数最多的字节，否则在平局的情况下，我从该集合中输出一个随机字节如果所有字节都不为 0，则输出出现次数最多的字节，否则在平局的情况下，我从该集合中输出一个随机字节

这些案例其实都是一样的。输出出现次数最多的非零字节，或者在出现平局时输出随机字节。

所以实际上只有两种情况需要考虑：至少三个零字节，以及两个或更少。

事实上，*所有*的情况都是一样的。您可以将上述第二种解决方案应用于所有情况。完全不将它们分开可能会更快。

但首先在这些 FileInputStreams 周围添加了 BufferedInputStreams。

# sql-server - 如何获取美国邮政编码的边界坐标？

> ID：13112899
> 
> 赞同：19
> 
> 时间：2012-10-28T20:48:58.990
> 
> 标签：sql-server, geocoding, geospatial

是否有服务/API 将采用邮政/邮政编码并返回边界（周长）坐标，以便我可以在 MS SQL 数据库中构建几何对象？

通过边界坐标，我的意思是我想检索构建定义美国邮政编码的多边形的 GPS 坐标列表。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-10-29T00:39:23.763

详细说明我的评论，邮政编码不是多边形......

我们经常将邮政编码视为区域（多边形），因为我们说，“哦，我住*在*这个邮政编码中......”这给人一种包含区域的印象，也许邮政编码代表“*区域*改进计划”这一事实有助于与多边形的错误关联。

实际上，邮政编码是在某种意义上代表邮递员路线的行。在几何上，线没有面积。**正如线是沿坐标平面的点串一样，邮政编码线是USPS 指定地址的抽象空间中的*交货点串。***

它们与地理坐标*无关。*但是，您会发现它们*似乎*是面向地理的，因为运营商拥有完全与距离和位置无关的路线将是低效的。

这个“USPS 指定地址的抽象空间”是什么？这就是我描述美国邮政局维护的庞大而神秘的可交付地点数据库的方式。地址不是根据地理位置分配的，而是根据运营商旅行的路线分配的，这通常与街道和可旅行性有关。

一些 5 位数的邮政编码只是单个建筑物，或建筑物的综合体，甚至是建筑物的单个楼层（是的，多个邮政编码可以位于一个坐标，因为它们的交付点是垂直分层的）。其中一些——除其他外——是“独特的”ZIP。公司和大学经常为营销或组织目的获取自己的邮政编码。例如，[邮政编码“12345”属于](https://maps.google.com/maps?q=General+Electric+Co,+Schenectady,+NY&hl=en&sll=42.813977,-73.981504&sspn=0.048544,0.11158&oq=general+electric&hq=General+Electric+Co,&hnear=Schenectady,+New+York&t=m&fll=42.82084,-73.927732&fspn=0.024143,0.05579&z=15&iwloc=A)位于纽约州斯克内克塔迪的通用电气公司。（编辑：在以前版本的谷歌地图中，​​当您点击该链接时，您会注意到放置标记悬停，因为它指向一个邮政编码，而不是坐标。虽然大多数美国邮政编码用于显示谷歌地图上的一个区域，这些类型不能，因为 USPS 不“拥有”它们，可以这么说，

只是为了好玩，让我们尝试验证一个唯一邮政编码中的地址。前往[SmartyStreets](http://smartystreets.com)并在 12345 中输入一个虚假地址，例如：

> **街道：** 999 Sdf sdf
> 
> **邮编：** 12345

当您尝试验证时，请注意...它是有效的！为什么？USPS 将为该唯一邮政编码的容器提供一块，但此时，由 GE 分发它。邮政编码内部的几乎所有内容都与 USPS 无关，包括街道地址（技术上是“交付线 1”）。许多大学以类似的方式运作。[这是有关此的更多信息。](http://smartystreets.com/kb/faq/what-how-is-this-a-valid-address)

现在，尝试使用相同的虚假地址，但没有邮政编码，而是使用城市/州：

> **街道：** 999 Sdf sdf
> 
> **城市：**斯克内克塔迪
> 
> **州：**纽约

它不验证。这是因为即使 Schenectady 包含 12345，地址是“有效的”，它在几何上与 Schenectady 的“真实”邮政编码相交。

再举一个例子：军事。某些海军舰艇有自己的邮政编码。军事地址是*使用相同命名空间*的完全不同类别的地址。船只移动。地理坐标没有。

ZIP 精度是另一个有趣的。5 位数的邮政编码是最不“精确”的（尽管“特定”一词在这里可能更有意义，因为邮政编码不能精确定位任何东西）。7 位和 9 位邮政编码是最具体的，在市区通常下至街区或街区级别。但是由于每个邮政编码的大小不同，因此*很难*说出您所说的实际距离。

一个 9 位数的邮政编码可能会分配到建筑物的一层，因此您可能有数百个地址的重叠邮政编码。

**底线：与普遍看法相反，邮政编码不提供地理或边界数据。**它们差异很大，实际上非常无用，除非您要运送邮件或包裹……但是 USPS 的工作是设计有效的承运人路线，而不是将人口划分为如此多的协调区域。

这更多的是人口普查局的工作。他们编制了一个[制图边界列表，](http://www.census.gov/geo/www/cob/zt_metadata.html)因为邮政编码“方便”使用。为此，他们将成串的地址划分为人口普查块。然后，他们汇总了 USPS 邮政编码数据，以找出他们的人口普查区（有一些粗略的坐标数据）与邮政编码之间的关系。因此，我们对将线绘制为多边形的情况有了**近似值。**（显然，他们通过根据其内容转换 2D 多边形以适应线性数据——对于每个非唯一的常规邮政编码，将 1D 线转换为 2D 多边形。）

从他们的网站（上面的链接）：

> 邮政编码制表区域 (ZCTA) 是一个统计地理实体，它近似于美国邮政服务五位数或三位数邮政编码的投递区域。ZCTA 是人口普查区块的集合，这些区块具有与美国人口普查局主地址文件 (MAF) 中的地址相关联的相同主要邮政编码。三位数 ZCTA 代码适用于美国人口普查局在其 MAF 中没有五位数邮政编码信息的大片连续区域。ZCTA 并未准确描述邮政编码投递区域，也不包括用于邮件投递的所有邮政编码。美国人口普查局已将 ZCTA 建立为一个新的地理实体，类似于但取代了与 1990 年及更早的人口普查相关的邮政编码数据表。

USCB 的数据集不完整，有时甚至不准确。谷歌的数据仍然存在漏洞（12345 是一个很好的例子）——但谷歌最终会通过手工检查每个地址和邮政编码来修补它。他们已经这样做了，但还没有使他们所有的地图数据变得完美。自然，对这些数据的访问仅限于 API 条款，而且提出这些条款非常昂贵。

呸。我被打败了。我希望这有助于澄清事情。免责声明：我曾经是 SmartyStreets 的开发人员。[有关使用地址数据进行地理编码的更多信息。](http://smartystreets.com/kb/faq/how-accurate-is-your-geocoding-data)

[更多关于邮政编码的信息](http://www.georeference.org/doc/zip_codes_are_not_areas.htm)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T21:09:13.283

您要求的是提供“免费邮政编码地理编码”的服务。有一些质量参差不齐。由于以下几个原因，您自己编写这样的代码会很糟糕：

1.  邮政编码可以分配给单个建筑物或邮局。
2.  邮政编码**不**被视为多边形区域。将邮政编码投影到多边形区域将需要您有根据地猜测一个邮政编码和下一个邮政编码之间的边界在哪里。
3.  邮政编码地址数据仅指定邮政编码的中心位置。邮政编码数据提供地址的大致附近。一个邮政编码和另一个邮政编码之间存在的邮寄地址可能会对其实际所在的邮政编码存在争议。
4.  邮寄地址在物理上可能更接近邮政编码 11111，但其官方邮政编码是更远的邮政编码点 11112。

**谷歌地图有一个地理编码 API：**

谷歌地图 API 是客户端 javascript。您可以使用 http 请求直接从 php 查询地理编码系统。然而，谷歌地图只给你美国邮政服务给他们的东西。表示邮政编码中心的点。

[https://developers.google.com/maps/#Geocoding_Examples](https://developers.google.com/maps/#Geocoding_Examples)

[使用谷歌地图绘制城市/邮政编码多边形](https://stackoverflow.com/questions/10525132/map-city-zipcode-polygons-using-google-maps)

**关于将邮政编码投影到其纬度/经度边界框的思考**

美国大约有 43,000 个邮政编码。这个数字每个月都会波动，具体取决于所做的更改次数。USPS 使用的邮政编码不表示为多边形，也没有硬性和快速边界。

USPS（美国邮政服务）是定义每个邮政编码纬度/经度的机构。任何将邮政编码解析为地理位置的软件都需要每周更新。一家名为 alignstar 的公司提供邮政编码的人口统计和 GIS 数据 ( [http://www.alignstar.com/data.html](http://www.alignstar.com/data.html) )。

**给定一个物理（邮寄）地址，找到地理坐标以便在地图上显示该位置。**

如果您想可靠地预测邮政编码的形状，您将需要强行使用它并询问：“按邮政编码给我每个街道地址”，然后在那些畸形的斑点周围画框。然后，您可以大致了解邮政编码覆盖的地理区域。

[http://vterrain.org/Culture/geocoding.html](http://vterrain.org/Culture/geocoding.html)

如果您将数百万个邮寄地址点投入到将每个地址解析为纬度/经度的算法中，您可能能够构建该邮政编码的基本 blob 边界框。你必须重新运行这个算法，理论上它会在邮政编码移动时自行修复。

**其他想法**

[http://shop.delorme.com/OA_HTML/DELibeCCtpSctDspRte.jsp?section=10075](http://shop.delorme.com/OA_HTML/DELibeCCtpSctDspRte.jsp?section=10075)

[http://www.zip-codes.com/zip-code-map-boundary-data.asp](http://www.zip-codes.com/zip-code-map-boundary-data.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-02T22:51:27.247

我认为这就是您需要它使用美国人口普查作为存储库：美国邮政编码边界 API：[https ://www.mashape.com/vanitysoft/boundaries-io](https://www.mashape.com/vanitysoft/boundaries-io)

上面的 API 按邮政编码、城市和州显示美国边界（GeoJson）。您应该以编程方式使用 API 来处理大型结果。

![在此处输入图像描述](../Images/9170c1a9fddd83149600b67efd9560e6.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-26T12:56:08.407

第一步：下载cb_2018_us_zcta510_500k.zip

[https://www.census.gov/geographies/mapping-files/time-series/geo/carto-boundary-file.html](https://www.census.gov/geographies/mapping-files/time-series/geo/carto-boundary-file.html)

# 如果你想把它们保存在 mysql 中

第 2 步：在您的 mysql 中创建一个名为 :spatialdata 的数据库，运行此命令 `ogr2ogr -f "MySQL" MYSQL:"spatialdata,host=localhost,user=root" -nln "map" -a_srs "EPSG:4683" cb_2018_us_zcta510_500k.shp -overwrite -addfields -fieldTypeToString All -lco ENGINE=MyISAM`

我在 github 上上传了文件（[https://github.com/sahilkashyap64/USA-zipcode-boundary/blob/master/USAspatialdata.zip](https://github.com/sahilkashyap64/USA-zipcode-boundary/blob/master/USAspatialdata.zip)）

在您的“空间数据数据库”中，将有 2 个名为 map & geometry_columns 的表。

1.  在“地图”中会有一个名为“形状”的列。

shape 列属于“几何”类型，它包含多边形/多多边形文件

2.  在“geometry_columns”中将定义 srid

如何检查点是否落在多边形中

`SELECT * FROM map WHERE ST_Contains( map.SHAPE, ST_GeomFromText( 'POINT(63.39550 -148.89730 )', 4683 ) )`

并想在地图上显示边界

select `zcta5ce10`as `zipcode`, ST_AsGeoJSON( `SHAPE`) sh from `map`where ST_Contains( map.SHAPE, ST_GeomFromText( 'POINT(34.1116 -85.6092 )', 4683 ) )

"ST_AsGeoJSON" 这会将空间数据作为 geojson 返回。使用[http://geojson.tools/](http://geojson.tools/) "HERE maps" 检查geojson的形状

# 如果你想生成topojson

mapshaper 将 shapefile 转换为 topojson（无需将其转换为 kml 文件） `npx -p mapshaper mapshaper-xl cb_2018_us_zcta510_500k.shp snap -simplify 0.1% -filter-fields ZCTA5CE10 -rename-fields zip=ZCTA5CE10 -o format=topojson cb_2018_us_zcta510_500k.json`

# 如果要将 shapefile 转换为 kml

`ogr2ogr -f KML tl_2019_us_zcta510.kml -mapFieldType Integer64=Real tl_2019_us_zcta510.shp

我使用**mapbox gl**显示 2 个邮政编码

1.  示例：[https ://sahilkashyap64.github.io/USA-zipcode-boundary/](https://sahilkashyap64.github.io/USA-zipcode-boundary/)
2.  代码：[https ://github.com/sahilkashyap64/USA-zipcode-boundary](https://github.com/sahilkashyap64/USA-zipcode-boundary)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2016-02-24T07:07:31.253

我认为世界 geoJson 链接和谷歌地图地理编码 api 可以帮助你。示例：您可以使用地理编码 api 对 zip 进行编码，您将获得城市、州、国家，然后，您从[世界搜索，我们 geoJson](https://github.com/johan/world.geo.json/tree/master/countries)获得边界，我有一个美国州边界的示例，如[dsdlink](http://www.dsdlink.com)

# c# - 如何在 Windows Azure 上设置 Websocket 连接？

> ID：13112900
> 
> 赞同：4
> 
> 时间：2012-10-28T20:49:28.493
> 
> 标签：c#, asp.net, azure, websocket

Azure 是否支持将 WebSockets 用于 .NET，如果支持，如何启动和处理 Websocket 连接？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-04T19:30:42.657

Azure 网站现在支持 Web 套接字。要使用它们，请转到管理门户中的站点配置页面并打开 Web 套接字。

[![在此处输入图像描述](../Images/c9e685fe9bcd45184e2ea5eae3f9587e.png)](https://i.stack.imgur.com/2MhX8.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T20:12:44.080

正如 Sandrino 所说，除非您拥有带有 .net 4.5 的 win8/2012，否则这是不可能的。但是，那是如果您正在运行 SignalR（当然是 4.5 中的 WebSockets）。

我们在 Azure 上使用 websocket 已经有一段时间了，它运行得非常好。[您可以在http://live.xsockets.net](http://live.xsockets.net)或我们非常简单的游乐场[http://xfiddle.net](http://xfiddle.net)尝试一下

问候乌夫

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T21:08:47.717

目前这是不可能的。只有当 Azure（云服务或网站）在 Windows Server 2012 (IIS8) 上支持 .NET 4.5 时，您才会获得 websocket，目前情况并非如此。

目前 .NET 4.5 仅在使用 Windows Server 2008 R2 (IIS7) 的网站中可用。

**注意：**从技术上讲，您可以使用其他解决方案（而不是 IIS）在您的 Azure 应用程序中获取 websocket（如[Pokein](http://pokein.com/Home.aspx)、[SuperSocket](https://github.com/mdavid/SuperSocket) ......）

# javascript - 需要帮助在函数 (Javascript) 中围绕 document.write 语句创建边框

> ID：13112903
> 
> 赞同：0
> 
> 时间：2012-10-28T20:50:07.093
> 
> 标签：javascript, function, colors, border

因此，我希望人们输入的任何颜色（红色、蓝色或绿色）成为显示在第三个提示中的 document.write 语句周围的边框颜色。

我知道我可以在没有函数的情况下在 Body 中执行此操作，但我想知道在 thirdPrompt 发生后是否有任何方法可以让它工作。谢谢！

```
<style type = "text/css">

    div.red {border-style:solid;border-width:1em; border-color:red; padding:1em;}

    div.blue {border-style:solid;border-width:1em; border-color:blue; padding:1em;}

    div.green {border-style:solid;border-width:1em; border-color:green; padding:1em;}

    div.black {border-style:solid;border-width:1em; border-color:black; padding:1em;}

</head>
</style>

<script language="javascript" type="text/javascript">

        function firstPrompt()
        {
        document.bgColor=('gray')
        var background
            {
                borderColor = window.prompt ("Please enter the border color you want: red, green, or blue.");

                if (borderColor == "red" || borderColor == "green" || borderColor == "blue")
                    {
                    enterWord = window.prompt ("Enter a word in the text field, all alphabetic characters.");
                    secondPrompt();
                    }
                else
                {
                    window.alert ("You didn't enter a valid color (red, green, blue), border color will be black!");
                    borderColor = ('black');
                    enterWord = window.prompt ("Enter a word in the text field, all alphabetic characters.");
                    secondPrompt();
                }
            }
        }

        function secondPrompt()
        {
        if (/[^0-9A-Z" "]/.test(enterWord))
            {
            enterLetter = window.prompt ("Enter a letter in the text field below.")
            findVowels();
            }
        else
        {
            window.alert ("Sorry you entered an invalid word (" + enterWord + ") please re-enter!");
            enterWord = window.prompt ("Enter a word in the text field, all alphabetic characters.");
            secondPrompt();
        }
        }

        function findVowels()
            {
                totalVowels = 0;

                for (i = 0; i < enterWord.length; i++)
                    {
                    if (enterWord.charAt(i).match(/[a-z]/) !=null)
                    {
                    if (enterWord.charAt(i).match (/[aeiou]/))
                        {

                            totalVowels++;
                        }
                    }
                    }
                thirdPrompt();
                return totalVowels;
            }

    function thirdPrompt()
        {
            if (/[^0-9A-Z" "]/.test(enterLetter) && (enterLetter.length < 2))
            {
                document.write("<div class = "+borderColor+">");

                document.write ("<h2>Word Checker</h2>");
                document.write ("<h2>" + Date() + "</h2>");
                document.write ("<br />" + "The word you entered was "+ "<strong>" + enterWord + "</strong>" + ". <br/>");
                document.write ("It contains " + enterWord.length + " character(s)." + "<br/>");
                document.write ("It contains " + totalVowels + " vowel(s)." + "<br />");
                document.write ("String '" + enterWord + "' contains the letter '" + enterLetter + "' at position ");
                document.write('</div>');

                document.bgColor = ("gray");

            }

            else
            {
                window.alert ("You entered an invalid character (" + enterLetter + ") please re-enter");
                secondPrompt();
            }

        }

</script>

<body onload = "firstPrompt();">

    <h2>
        Word Checker
    </h2>

    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T20:56:11.423

替换这个：

```
document.write("<div class = "+borderColor+">"); 
```

有了这个：

```
document.write("<div style='border:solid 2px "+borderColor+"; padding:1em;'>"); 
```

和在哪里。`solid`_ 适应您的需求。[`border-style`](https://developer.mozilla.org/en-US/docs/CSS/border-style)`2px`[`border-width`](https://developer.mozilla.org/en-US/docs/CSS/border-width)

[**小提琴**](http://jsfiddle.net/ezKvp/)

* * *

## 编辑：

发现原始代码的问题，您的函数设置为在`onload`事件中运行（在页面完全加载后），并且您正在执行一个`document.write`在页面加载后执行时覆盖整个文档（包括 CSS）的函数。更多信息在[这里](https://stackoverflow.com/q/802854/1331430)。

如果您从主体`onload`事件中删除该函数并在页面加载期间简单地调用它，它将按预期工作：

```
<body>
    <h2>
        Word Checker
    </h2>
    <script>
        firstPrompt();
    </script>
</body> 
```

[**小提琴**](http://jsfiddle.net/jppcU/)

# asp.net-mvc - IIS 未在 azure webrole 应用程序上提供 javascript 和 css 请求

> ID：13112905
> 
> 赞同：0
> 
> 时间：2012-10-28T20:50:11.990
> 
> 标签：asp.net-mvc, iis, azure

需要你的帮助，我在我的本地主机上运行 azure 部署并获取没有 css 和 javascript 的网页，当我查看 fiddler 时，我看到 500 状态和以下错误：“ `It is an error to use a section registered as allowDefinition='MachineToApplication' beyond application level. This error can be caused by a virtual directory not being configured as an application in IIS`”在每个请求 javascript 或 css 文件时，我已经在 Windows 功能上启用了静态内容，但它没有帮助，我在 64 位 Windows Professional 上使用 iis 7.5 和 azure sdk 1.7，尝试了任何方法，但没有任何帮助，无法将网站更改为 Web 应用程序导致网站仅在我运行调试时存在于 iis 上，知道该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T21:18:44.747

您提供 JS/CSS 文件的目录是否包含**web.config**文件？如果是这种情况，这将导致问题。

您的 web.config 包含一个只能在真实 Web 应用程序中定义的元素（例如在应用程序的根目录中或 machine.config 中。要解决此问题，您需要打开 machine.config ( *C :\Windows\Microsoft.Net\Framework\v4.0.30319\Config\machine.config*）并查看此处定义的每个 configSection 也包含在您的 web.config 中（在包含 JS/CSS 文件的文件夹中）。

如果 machine.config 中的 configSection 包含`allowDefinition`具有 as 值的属性，`MachineToApplication`这意味着您不能在不在 Web 应用程序中的 web.config 中使用该 configSection。这意味着在您的情况下，您需要从包含 JS/CSS 文件的文件夹中的 web.config 中删除该 configSection。

如果您使用的是 ASP.NET MVC，这可能是您的**Content**文件夹。

# php - 使用递归递增数组值

> ID：13112908
> 
> 赞同：0
> 
> 时间：2012-10-28T20:50:42.740
> 
> 标签：php, arrays, recursion

我有一个例子只是为了展示我不知道该怎么做。当您调用该函数时，它返回 1 个水果，或者如果它滚动 5，那么我希望水果为它滚动的每个结果增加 1 倍并返回一个数组，如果那样的话，可能会进入类似的最大递归，20说得通！:)

```
function fruitBasket(&$fruit = array()) {
    $dice = rand(1, 5);
    switch($dice) {
        case 1:
            $fruit['watermelon'] = ++$watermelon;
        break;
        case 2:
            $fruit['orange'] = ++$orange;
        break;
        // etc...
        case 5:
            for($i = 1; $i <= rand(1, 5); $i++) {
                fruitBasket($fruit);
            }
        break;
    }
    return $fruit;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T21:14:34.317

我不确定我是否完全理解您的问题，因为您的描述有点令人困惑，我无法添加评论，但据我所知：

```
function fruitBasket(&$fruit = array(), $dice = 0, $depth = 1) {

    if($depth == 20)
    return $fruit;

    $dice = ($dice > 0 ? $dice : rand(1, 5));

    switch($dice) {
        case 1:
            $fruit['watermelon'] += 1;
        break;
        case 2:
            $fruit['orange'] += 1;
        break;
        // etc...
        case 5:
        $depth += 1;

            for($i = 1; $i <= rand(1, 5); $i++) {
                fruitBasket($fruit, $i, $depth);
            }
        break;
    }
    return $fruit;
} 
```

# java - Java-关于gzip解压的说明

> ID：13112911
> 
> 赞同：0
> 
> 时间：2012-10-28T20:51:18.637
> 
> 标签：java, compression, gzip, concatenation

所以我读了很多书，我想我明白了，但如果比我了解更多的人能证实一下，那就太好了。所以我知道 gzip -d 支持级联流的解压。这是否意味着，假设我接受一个输入（来自流、文件等）并将其分成两半。我分别压缩每一个（使用 GZIPOutputStream 或其他东西）。所以现在我有两个字节数组来保存所有这些信息（标题、数据、预告片）。我基本上有两个单独的 .gz 文件（如果我想将它们存储为文件）。如果我将这两个字节数组连接起来，中间没有添加任何内容，在一个巨大的字节数组中并将其发送到输出流，gzip 会返回原始输入吗？

或者更好的是，你有两个 .gz 文件，你抓取它们，连接它们，然后将它们作为 .gz 文件发送出去。gzip -d 会给你一个包含两个原始文件内容的文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T20:56:05.817

是的。

（Stackoverflow 不会让我回答“是”，所以我重复一遍，是的。）

# android - 如何将 R.drawable 资源添加到 android 的数组中？

> ID：13112919
> 
> 赞同：0
> 
> 时间：2012-10-28T20:52:33.757
> 
> 标签：android, arrays, image, integer, drawable

我想在整数数组中调用集合 R.drawable 的序列，以便以后可以选择访问它。但我想动态加载到对应于不同名称的 R.drawable。它的名称需要是根据外部值输入没有硬编码。我尝试了很多但喜欢使用列表、集合、数组转换等。请在这方面用一个片段或示例指导我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T21:07:48.467

我想，实现此功能的最佳方法是使用**Integer**的**ArrayAdapter**。

 **您只需按 id 添加可绘制资源。

如果您需要获取资源 id，但您会从用户那里获得字符串输入，您可以使用以下代码：

[Android，从字符串中获取资源ID？](https://stackoverflow.com/questions/4427608/android-getting-resource-id-from-string)**

# json - Spring Roo，JSON，分离的实体传递给持久化

> ID：13112921
> 
> 赞同：1
> 
> 时间：2012-10-28T20:52:40.523
> 
> 标签：json, spring, hibernate, jpa, spring-roo

我是学习 Spring roo 的新手。当我发布 JSON 以创建具有关系的实体时，我遇到了`org.hibernate.PersistentObjectException: detached entity passed to persist`异常。`MANY_TO_MANY`以下是详细信息：

.roo 文件：

```
project --topLevelPackage com.test.book --projectName bookmanager --java 6 --packaging JAR
jpa setup --provider HIBERNATE --database HYPERSONIC_IN_MEMORY

entity jpa --class ~.domain.Category
field string --fieldName title --sizeMin 2 --notNull

entity jpa --class ~.domain.Book
field string --fieldName name --notNull --unique
field set --fieldName categories --type ~.domain.Category --cardinality MANY_TO_MANY

focus --class ~.domain.Category
field set --fieldName books --type ~.domain.Book --cardinality MANY_TO_MANY --mappedBy categories

web mvc setup
web mvc all --package ~.web

json all --deepSerialize
web mvc json all After project is created I used following script to create entities 
```

创建项目后，我使用以下脚本创建实体：

```
// curl -i -X POST -H "Content-Type: application/json" -H "Accept: application/json" -d '{title:'cat1'}' http:// localhost: 8080/bookmanager/categorys 
```

工作得很好。`cat1`类别已成功创建。

但 ...

```
// curl -i -X POST -H "Content-Type: application/json" -H "Accept: application/json" -d '{name:'bookname1',categories:[{"id":1,"title":"cat1","version":0}]}' http:// localhost: 8080/bookmanager/books 
```

返回以下异常：

```
Data access failure
Sorry, a problem occurred while accessing the database.

Details
org.hibernate.PersistentObjectException: detached entity passed to persist: com.test.book.domain.Category; nested exception is javax.persistence.PersistenceException: org.hibernate.PersistentObjectException: detached entity passed to persist: com.test.book.domain.Category
org.springframework.orm.jpa.EntityManagerFactoryUtils.convertJpaAccessExceptionIfPossible(EntityManagerFactoryUtils.java:326)
org.springframework.orm.jpa.aspectj.JpaExceptionTranslatorAspect.ajc$afterThrowing$org_springframework_orm_jpa_aspectj_JpaExceptionTranslatorAspect$1$18a1ac9(JpaExceptionTranslatorAspect.aj:15)
com.test.book.domain.Book_Roo_Jpa_ActiveRecord.ajc$interMethod$com_test_book_domain_Book_Roo_Jpa_ActiveRecord$com_test_book_domain_Book$persist(Book_Roo_Jpa_ActiveRecord.aj:43)
com.test.book.domain.Book.persist(Book.java:1)
com.test.book.domain.Book_Roo_Jpa_ActiveRecord.ajc$interMethodDispatch1$com_test_book_domain_Book_Roo_Jpa_ActiveRecord$com_test_book_domain_Book$persist(Book_Roo_Jpa_ActiveRecord.aj)
com.test.book.web.BookController_Roo_Controller_Json.ajc$interMethod$com_test_book_web_BookController_Roo_Controller_Json$com_test_book_web_BookController$createFromJson(BookController_Roo_Controller_Json.aj:44)
com.test.book.web.BookController.createFromJson(BookController.java:1)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
java.lang.reflect.Method.invoke(Method.java:597)
org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:213)
org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter.doFilterInternal(OpenEntityManagerInViewFilter.java:147)
org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
com.springsource.insight.collection.tcserver.request.HttpRequestOperationCollectionValve.invoke(HttpRequestOperationCollectionValve.java:88)
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
java.lang.Thread.run(Thread.java:662) 
```

当我使用 spring roo 生成的 UI 创建对象时，它可以正常工作，但是当我尝试使用 JSON 时却不行。我想我可能没有以正确的格式传递 json 对象。请谁能告诉我如何发布 JSON 对象以创建与特定类别关联的新书实体。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T22:07:15.720

我认为 ROO 不知道您正在通过您的 json 请求传入一个新类别。因此，它假定该类别已经存在，这会导致分离实体异常。

# google-apps-script - 更改脚本 - 升级路径时，Google Apps 脚本授权会丢失？

> ID：13112923
> 
> 赞同：0
> 
> 时间：2012-10-28T20:53:05.267
> 
> 标签：google-apps-script

最近我一直在使用 Google Apps Script 进行大量工作，但有一件事情我仍然不清楚，文档根本没有暗示它：

将脚本发布为 WebApp（访问：`Anyone`，作为：）`User accessing the WebApp`并请求权限（例如`GMailApp`访问权限`UserProperties`和`Trigger`）然后更改该脚本（但不要求任何其他权限，只是更改代码）并再次发布时，似乎好像由用户事先授权的脚本运行的触发器失去了授权（例如，用户收到一封带有失败消息的电子邮件：`Authorization is required to perform that action.`来自该脚本）。

我读到了库根据它们的版本是独立的，但是`GMailApp`从库内或`Trigger`库内访问是不可能的，因为它需要活动用户？有没有办法解决？建议的升级路径是什么，例如，如何在不使现有用户失败的情况下对脚本进行（代码）更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T00:13:40.700

某些服务（肯定是 gmailApp 和 mailApp）被 Google 视为敏感事项，因此对代码的任何修改，即使是非常小的更改，都意味着更新授权。我现在不记得我在哪里读到了这些信息，但我很确定我读过它（！）而且我在这个论坛的某个地方也看到了它作为谷歌人的答案。请原谅我在参考文献方面不准确。无论如何......这解释了为什么你的脚本和AFAIK有这些授权问题，没有办法避免这个过程。也就是说，您的用户应该获得授权屏幕，而不是他们在您的应用中使用的服务的错误消息。如果您在应用程序中使用触发器（当然是您自己设置的），那么您应该自己手动运行这些函数以通过授权，因为触发器是在创建它们的人的权限下执行的，无论您的 webapp 是如何发布的。我希望我足够清楚，如果不是参考[关于可安装触发器的文档](https://developers.google.com/apps-script/execution_time_triggers)和[这个文档也是。](https://developers.google.com/apps-script/scripts_google_accounts#understandingPermissions)

# ruby-on-rails - 从 rails 调用一个 ruby 函数 - 它需要一个我不想要的视图

> ID：13112929
> 
> 赞同：1
> 
> 时间：2012-10-28T20:53:41.323
> 
> 标签：ruby-on-rails

我想在 rails 中创建一个 ruby​​ 函数。我关注[了这个问题](https://stackoverflow.com/questions/12375610/execute-ruby-function-in-rails)，但我被重定向到

```
http://localhost:3000/my_func?arg=arg 
```

我不想要。我只想在单击按钮时执行该功能，但保持在同一页面上！

编辑：

我修改了代码，或者更好的是，创建了一个临时站点来解决这个问题。我只做了：

```
rails new eraseme
cd eraseme
rails g controller public home 
```

应用程序/控制器/公共/home.html.erb

```
class PublicController < ApplicationController
  def home
  end

  def my_func

  end
end 
```

app/views/public/home.html.erb

```
<%= button_to "Button", {:action => "my_func", :arg => "arg"} %> 
```

我想要做的是`my_func`单击按钮时执行。但是当我点击时，我得到

```
No route matches {:action=>"my_func", :arg=>"arg", :controller=>"public"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T22:11:35.547

所以，据我所知。我认为您想制作一个按钮，该按钮将向控制器发送 AJAX/HTTP 请求以调用一个函数，该函数在完成时不会返回 HTML 文件。

为了实现这一点，您必须执行以下操作。

1.) 设置此调用的 HTTP 路由，这在 config/routes.rb 文件中。

```
match '/public/my_func' => 'public#my_func' 
```

这允许您的应用程序使用以下 URL 引导任何 HTTP 请求以在控制器中调用您的方法。由于 :action => "my_func" 参数，您的 button_to 方法将使用该 URL 发送此调用。

2.) 还包括 :remote => true, :form => { "data-type" => "json" } 作为 button_to 方法的更多参数。

这会将按钮从传统的 HTTP 请求转换为通过 AJAX 请求的 HTTP 请求。

让我知道这是如何工作的，我认为在这种情况下使用 AJAX 有其他选择，如果它是一个非常简单的方法，那么您也许可以将它作为 erb 包含在视图中。

# ajax - 删除项目后返回 JSON 结果

> ID：13112930
> 
> 赞同：0
> 
> 时间：2012-10-28T20:53:47.220
> 
> 标签：ajax, json, asp.net-mvc-3

我正在使用 MVC 3 开发一个 Web 应用程序，并希望在用户成功删除项目后向用户返回一条消息。

MyWallController 方法如下所示：

```
[HttpPost]
public ActionResult DeleteAlbum(Guid albumId)
{
    try
    {
        this.albumService.DeleteAlbum(albumId);
        return Json(new { success = true, msg = "Album successfully deleted" }, JsonRequestBehavior.AllowGet);
    }
    catch (FPSException e)
    {
        return Json(new { success = false, msg = e.Message });
    }
    catch (Exception)
    {
        throw new HttpException(500, "Error while deleting album");
    }
} 
```

链接：

```
<a class="open-DeleteAlbumDialog" href="http://localhost:2941/MyWall/DeleteAlbum?albumId=0f49b1ad-8ec1-4fca-b8e2-28bdbf47824e">Delete</a> 
```

JavaScript：

```
$(function () {
    $(document).on('click', '.open-DeleteAlbumDialog', function () {
    var answer = confirm('Are you sure you want to delete this album?')
    if (answer) {
        $.post(this.href, function (data) {
            if (data.success) {
                // do something
            } else {
                // do something else
            }
        });
    }
    else return false;
}); 
```

但是，在 post 中定义的函数永远不会被调用，我得到的是“找不到资源”。但该项目已成功删除。

各种帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T21:12:03.187

您的链接仍然有效。你需要`preventDefault`：

```
$(function () {
    $(document).on('click', '.open-DeleteAlbumDialog', function (e) {
    e.preventDefault();
    var answer = confirm('Are you sure you want to delete this album?')
    if (answer) {
        $.post(this.href, function (data) {
            if (data.success) {
                // do something
            } else {
                // do something else
            }
        });
    }
}); 
```

# php - isHex() 和 isOcta() 函数

> ID：13112934
> 
> 赞同：8
> 
> 时间：2012-10-28T20:54:18.877
> 
> 标签：php, hex, octal

我有两个功能。**IsOcta**和**isHex**。似乎无法使 isHex 正常工作。
isHex() 中的问题是它不能省略原始字符串*x23*的 'x' 表示法。

原始十六进制字符串也可以是*D1CE*。所以添加 x 然后比较是行不通的。

**isHex 函数是否有任何正确的解决方案。isOcta 也是正确的吗？**

```
function isHex($string){
    (int) $x=hexdec("$string");     // Input must be a String and hexdec returns NUMBER
    $y=dechex($x);          // Must be a Number and dechex returns STRING
    echo "<br />isHex() - Hexa Number Reconverted: ".$y;       

    if($string==$y){
        echo "<br /> Result: Hexa ";
    }else{
        echo "<br /> Result: NOT Hexa";
    }   
    }

function IsOcta($string){
    (int) $x=octdec("$string");     // Input must be a String and octdec returns NUMBER
          $y=decoct($x);            // Must be a Number and decoct returns STRING
    echo "<br />IsOcta() - Octal Number Reconverted: ".$y;          

    if($string==$y){
    echo "<br /> Result: OCTAL";
    }else{
    echo "<br /> Result: NOT OCTAL";
    }

} 
```

这是对函数的调用：

```
$hex    =   "x23";      // STRING 
$octa   =   "023";  // STRING 
echo "<br /    Original HEX = $hex | Original Octa = $octa <br /    ";

echo isHex($hex)."<br /    ";   
echo IsOcta($octa); 
```

这是函数调用的结果：

```
Original HEX = x23 | Original Octa = 023 

isHex() - Hexa Number Reconverted: 23
Result: NOT Hexa

IsOcta() - Octal Number Reconverted: 23
Result: OCTAL 
```

===== 完整答案 ====

感谢 Layke 指导测试字符串中是否存在十六进制字符的内置函数。还要感谢 mario 提示使用 ltrim。这两个函数都需要获取 isHexa 或者是要构建的十六进制函数。

--- 编辑功能 --

```
// isHEX function

function isHex($strings){

// Does not work as originally suggested by Layke, but thanks for directing to the resource. It does not omit 0x representation of a hexadecimal number. 
/*
foreach ($strings as $testcase) {
     if (ctype_xdigit($testcase)) {
        echo "<br /> $testcase - <strong>TRUE</strong>, Contains only Hex<br />";
    } else {
        echo "<br /> $testcase - False, Is not Hex";

   } 
}
*/

   // This works CORRECTLY
   foreach ($strings as $testcase) {
        if (ctype_xdigit(ltrim($testcase , "0x"))) {
           echo "<br /> $testcase - <strong>TRUE</strong>, Contains only Hex<br />";
       } else {
           echo "<br /> $testcase - False, Is not Hex";

      } 
   }
}

$strings = array('AB10BC99', 'AR1012', 'x23' ,'0x12345678');
isHex($strings); // calling 
```

可能现在，这是对“十六进制”功能的简单证明吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-28T20:58:04.067

## 是十六进制吗？

PHP 内置了十六进制的函数。

在这里查看函数：http `ctype_xdigit`: [//uk1.php.net/ctype_xdigit](http://uk1.php.net/ctype_xdigit)

```
<?php
$strings = array('AB10BC99', 'AR1012', 'ab12bc99');
foreach ($strings as $testcase) {
    if (ctype_xdigit($testcase)) {
        // TRUE : Contains only Hex
    } else {
        // False : Is not Hex
    }
} 
```

## 是八进制吗？

为了确定一个数字是否为[八进制](http://php.net/manual/en/function.octdec.php)，您可以翻转和翻转。

```
function isOctal($x) {
    return decoct(octdec($x)) == $x;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T20:58:14.913

您可以使用 then 清理您的输入字符串[`ltrim()`](http://php.net/ltrim)。只需在进行第一次转换之前添加它：

```
 $string = ltrim($string, "0x"); 
```

将删除前导零（不需要）和`x`字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-27T16:50:20.520

是十六进制 ::=

```
ctype_xdigit($testString) 
```

八进制 ::=

```
preg_match('/^[0-7]+$/', $testString); 
```

# java - 使用 Arquillian 时如何引用放置在 WEB-INF 文件夹中的文件？

> ID：13112936
> 
> 赞同：7
> 
> 时间：2012-10-28T20:54:43.463
> 
> 标签：java, jakarta-ee, maven, dbunit

我正在使用 Maven 和标准目录布局。所以我在 src/test/resources 文件夹中添加了一个 testdata.xml 文件，我也将它添加为：

```
.addAsWebInfResource("testdata.xml", "testdata.xml") 
```

在部署方法中，我已经确认它在那里。这将使文件出现在`/WEB-INF/testdata.xml`. 现在我需要在我的代码中引用这个文件，我尝试了几种不同的方法`getClass().getResourceAsStream(...)`并且一次又一次地失败，所以我现在需要一些建议。

我的 DBUnit 集成测试需要它。这不可能吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-05T05:34:17.857

**选项 A) 使用 ServletContext.getResourceXXX()**

你应该有一个 Aquillarian MockHttpSession 和一个 MockServletContext。例如：

```
@Test
   public void myTest()
   {
      HttpSession session = new MockHttpSession(new MockServletContext());
      ServletLifecycle.beginSession(session);

      ..testCode..

      // You can obtain a ServletContext (will actually be a MockServletContext 
      // implementation):
      ServletContext sc = session.getServletContext();
      URL url = sc.getResource("/WEB-INF/testdata.xml")
      Path resPath = new Path(url);
      File resFile = new File(url);
      FileReader resRdr = new FileReader(resFile);
      etc...

      ..testCode..

      ServletLifecycle.endSession(session);
   } 
```

您可以在以下位置创建资源文件和子目录：

1.  Web 模块文档根目录 - 可以从浏览器和类访问资源
2.  WEB-INF/classes/ - 资源可以被类访问
3.  WEB-INF/lib/*.jar 源 jar - 类可访问
4.  WEB-INF/lib/*.jar 专用的仅资源 jar - 可供类访问
5.  **WEB-INF/ 直接在目录中 - 类可访问**。这就是你所要求的。

在所有情况下，都可以通过以下方式访问资源：

```
URL url = sc.getResource("/<path from web doc root>/<resourceFileName>");
OR    
InputStream resIS = sc.getResourceAsStream("/<path from web doc root>/<resourceFileName>"); 
```

>

这些将被打包到 WAR 文件中，并且可能会分解到已部署的应用服务器上的目录中，或者它们可能会保留在应用服务器上的 WAR 文件中。无论哪种方式 - 访问资源的行为相同：使用 ServletContext.getResourceXXX()。

请注意，作为一般原则，(5) 顶级 WEB-INF 目录本身是供服务器使用的。不将您的网络资源直接放在此处或直接在此处创建自己的目录是“礼貌的”。相反，最好使用上面的（2）。

[JEE5 教程网络模块](http://docs.oracle.com/javaee/5/tutorial/doc/bnadx.html) [JEE6 教程网络模块](http://docs.oracle.com/javaee/6/tutorial/doc/bnadx.html)

**选项 B)：使用 Class.getResourceXXX()**

首先将资源从 WEB-INF 文件夹移到 WEB-INF/classes 中（或在 jar WEB-INF/lib/*.jar 中）。

如果您的测试课程是：

*   com.abc.pkg.test.MyTest 在文件 WEB-INF/classes/com/abc/pkg/test/MyTest.class

你的资源文件是

*   WEB-INF/classes/com/abc/pkg/test/resources/testdata.xml（或jar文件中的等价物）

使用相对文件位置访问文件，通过 Java 类加载器 - 查找相对于类路径的文件夹/罐子：

```
java.net.URL resFileURL = MyTest.class.getResource("resources/testdata.xml");
File resFile = new File(fileURL);    
OR
InputStream resFileIS = 
     MyTedy.class.getResourceAsStream("resources/testdata.xml"); 
```

使用完整的类包限定访问文件，使用 Java 类加载器 - 查找相对于类路径的文件夹/罐子：

```
java.net.URL resFileURL = MyTest.class.getResource("/com/abc/pkg/test/resources/testdata.xml");
File resFile = new File(fileURL);        
OR 
InputStream resFileIS = 
     MyTest.class.getResourceAsStream("/com/abc/pkg/test/resources/testdata.xml");   
OR 
java.net.URL resFileURL = MyTest.class.getClassLoader().getResource("com/abc/pkg/test/resources/testdata.xml");
File resFile = new File(fileURL);       
OR 
InputStream resFileIS = 
     MyTest.class.getClassLoader().getResourceAsStream("com/abc/pkg/test/resources/testdata.xml"); 
```

希望能搞定！@B)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-02T21:05:48.027

访问文件的方式`WEB-INF`是通过以下三种方法`ServletContext`：

1.  `getResource("/WEB-INF/testdata.xml")`给你一个网址
2.  `getResourceAsStream`给你一个输入流
3.  `getRealPath`为您提供相关文件在磁盘上的路径。

前两个应该始终有效，如果资源路径和磁盘上的文件之间没有直接对应关系，第三个可能会失败，例如，如果您的 Web 应用程序直接从 WAR 文件而不是解压缩的目录结构运行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-10T16:12:34.190

今天我在同样的要求上苦苦挣扎，还没有找到任何完整的源样本，所以我在这里进行了我可以放在一起的最小的自包含测试：

```
@RunWith(Arquillian.class)
public class AttachResourceTest {

    @Deployment
    public static WebArchive createDeployment() {
        WebArchive archive =  ShrinkWrap.create(WebArchive.class).addPackages(true, "org.apache.commons.io")
                .addAsWebInfResource("hello-kitty.png", "classes/hello-kitty.png");             
        System.out.println(archive.toString(true));
        return archive;
    }

    @Test
    public void attachCatTest() {
        InputStream stream = getClass().getResourceAsStream("/hello-kitty.png");
        byte[] bytes = null;
        try {
            bytes = IOUtils.toByteArray(stream);
        } catch (IOException e) {
            e.printStackTrace();
        }   
        Assert.assertNotNull(bytes);
    }
} 
```

在您的项目中 hello-kitty.png 文件转到**src/test/resources**。在测试存档中，它被打包到类路径上的**/WEB-INF/classes**文件夹中，因此您可以使用与用于测试场景的容器相同的类加载器来加载它。

IOUtils 来自 apache commons-io。

*附加说明：让我摸不着头脑的一件事与我的服务器路径中的空格以及 getResourceAsStream() 转义此类特殊字符的方式有关：[java中的 sysLoader.getResource() 问题](https://stackoverflow.com/questions/3263560/sysloader-getresource-problem-in-java)*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T06:57:33.670

将此类添加到您的项目中：

```
import java.io.UnsupportedEncodingException;
import java.net.URLDecoder;

public class Init {
    private static final String WEB_INF_DIR_NAME="WEB-INF";
    private static String web_inf_path;
    public static String getWebInfPath() throws UnsupportedEncodingException {
        if (web_inf_path == null) {
            web_inf_path = URLDecoder.decode(Init.class.getProtectionDomain().getCodeSource().getLocation().getPath(), "UTF8");
            web_inf_path=web_inf_path.substring(0,web_inf_path.lastIndexOf(WEB_INF_DIR_NAME)+WEB_INF_DIR_NAME.length());
        }
        return web_inf_path;
    }
} 
```

现在，无论您想获取文件的完整路径，请`"testdata.xml"`使用以下代码或类似代码：

```
String testdata_file_location = Init.getWebInfPath() + "/testdata.xml"; 
```

# qt - MS Access 和 QSqlQuery

> ID：13112940
> 
> 赞同：1
> 
> 时间：2012-10-28T20:55:05.520
> 
> 标签：qt

我的英语不是很好，但我会尝试描述我的问题。所以，我有原始代码：

```
 base = QSqlDatabase::addDatabase("QODBC");

 QSettings sets("FlowModel","Settings");

 currentBase = sets.value("currentBase").toString();

    base.setHostName("localhost");

    base.setDatabaseName(QString("DRIVER={Microsoft Access Driver (*.mdb)};FIL={MS Access};DBQ=%1").arg(currentBase));

 if(base.open())

  QMessageBox::information(0,"Все отлично!","База данных открыта","Ок");

 else

  QMessageBox::information(0,"Все не ахти!",base.lastError().text(),"Ок");

 QSqlQuery queryMaterials("SELECT * FROM Материал",base);

 int fieldNo = queryMaterials.record().indexOf("Название");

 int i = 0;

 while (queryMaterials.next()) {   

  comboBox->insertItem(i++,queryMaterials.value(fieldNo).toString());

     }

 queryMaterials.clear(); 
```

它工作正常，组合框从数据库中获取所有材料；但接下来是这段代码：

```
QSqlQuery queryInfo("SELECT * FROM Свойства_материала WHERE Название='Вода'",base);

fieldNo = queryInfo.record().indexOf("P");

pLine->setText(queryInfo.value(fieldNo).toString()); 
```

它没有用！查询返回一个空字符串（“”），但必须是一个数字。我在 Access 中测试了这个 SQL 查询，它在那里工作正常。请帮助了解我有什么问题。谢谢你。PS我试图使用 QSqlQuery::lastError().text() 方法，但它没有报告我。我不明白那是什么......因为这个表可以通过这段代码打开：

```
QSqlDatabase accessBase = QSqlDatabase::addDatabase("QODBC");

 accessBase.setHostName("localhost");

 accessBase.setDatabaseName("DRIVER={Microsoft Access Driver (*.mdb)};FIL={MS Access};DBQ=D:/ИТ.mdb");

 if(accessBase.open())

  QMessageBox::information(0,"Все отлично!","База данных открыта","Ок");

 else

  QMessageBox::information(0,"Все не ахти!",accessBase.lastError().text(),"Ок");

 QTableView tableGhost;

 QSqlTableModel tableDB;

 QString whtpn = QInputDialog::getText(0, "Какую таблицу открыть?",

   "Какую таблицу открыть?");

 tableDB.setTable(whtpn);

 tableDB.select();

 tableDB.setEditStrategy(QSqlTableModel::OnFieldChange);
 tableGhost.setModel(&tableDB);

tableGhost.show(); 
```

一切都好。但是通过查询没有（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T17:00:05.647

问题已解决。行前 pLine->setText(queryInfo.value(fieldNo).toString()); 不得不使用方法 QSqlQuery::next();

# javascript - jQuery倒计时插件多个实例不起作用

> ID：13112941
> 
> 赞同：0
> 
> 时间：2012-10-28T20:55:10.003
> 
> 标签：javascript, jquery, countdown, instances

我的脚本使用 jquery.countdown.js 插件有问题，它不会为我传递给它的每个元素设置多个实例，它总是为所有元素设置第一个实例，因此倒计时总是相同的。

插件链接：http: [//keith-wood.name/countdown.html](http://keith-wood.name/countdown.html)

```
 $(function(){

     $.each($('.countdown'), function() {
     var _element = '.countdown-'+$(this).attr("id");
     if($(_element).length > 0){
    var _expDate = $(_element).attr('data-expiration').split(',');
    var _datetime = Date(_expDate);
    init_countdown(_element,_datetime);
   }

});      
});

  function init_countdown(_element,_datetime){
    console.log(_element + ", " + _datetime)
    $(_element).countdown({
      until: _datetime,
      format: 'yowdHMS'
    });

  } 
```

HTML：

```
<h5 class="muted countdown countdown-1" id="1" data-expiration="2014,10,26,14,10,35"> 2014-10-26 14:10:35</h5>
<h5 class="muted countdown countdown-2" id="2" data-expiration="2014,10,26,16,10,35"> 2014-10-26 16:10:35</h5>
<h5 class="muted countdown countdown-3" id="3" data-expiration="2014,10,26,18,10,35"> 2014-10-26 18:10:35</h5> 
```

这就是它的输出方式

![在此处输入图像描述](../Images/ab28b387ad1d9dc9cdcab51a581d7e27.png)

我怎样才能解决这个问题？

```
console.log() 

.countdown-1, Sun Oct 28 2012 22:10:09 GMT+0100 (CET)

.countdown-2, Sun Oct 28 2012 22:10:09 GMT+0100 (CET)

.countdown-3, Sun Oct 28 2012 22:10:09 GMT+0100 (CET) 
```

@Asad 示例：

![在此处输入图像描述](../Images/b25522673d2478bf3d2b2c9564b7113e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T21:27:47.840

日期构造函数（以您使用的形式）接受多个整数值，而不是数组。您需要将拆分产生的数组中的每个值转换为整数（使用），然后**单独**`parseInt`传递每个参数，而不是作为数组传递。

 **尝试这个：

```
var _expDate = $(_element).attr('data-expiration').split(',');
_expDate.forEach(function(v,i,a){a[i]=parseInt(a[i]);});
var _datetime = new Date(_expDate[0],_expDate[1],_expDate[2],_expDate[3],_expDate[4],_expDate[5]); 
```**

# python - 退出并删除一个类实例python

> ID：13112942
> 
> 赞同：2
> 
> 时间：2012-10-28T20:55:20.027
> 
> 标签：python, sql, pypy

我读过[这个问题](https://stackoverflow.com/questions/865115/how-do-i-correctly-clean-up-a-python-object)，但我不清楚。我这样定义我的类：

```
from sqlite3 import Connection, Cursor, Row, connect

class myclass(object):
    def __init__(self,number):
        co = connect('C:\\mydatabase.sqlite')
        co.row_factory = Row
        with connection:            
            cu = connection.cursor()
            sql = '''SELECT * FROM mytable WHERE Number= {n} LIMIT 1'''.format(n = number)
            cu.execute(sql)
            for i in cu:
                self.classattribute1 = i['Field1']
                self.classattribute2 = i['Field2']
                etc. 
```

现在这可以正常工作，直到我想向我的类添加第三个属性，例如：

```
self.classattribute3 = self.classattribute1 + self.classattribute2 
```

> ```
> AttributeError: 'myclass' object has no attribute 'classattribute1' 
> ```

`SELECT`如果语句没有返回任何内容，如果数字不在数据库中，这将不起作用。

**现在，当我调用 myclass 的实例时，我想做的是：**

```
myclassinstance1 = myclass(100) 
```

我想写一些类似的东西：

```
if cu.fetchone() == None:
    #code to exit the method __init__ and to delete my class instance here 
```

**我不知道如何退出和删除我从内部调用的实例`myclass`。我需要删除这些实例，因为我不想使用空类实例**。

谢谢阅读。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T21:01:24.007

只需创建一个工厂函数，如果无法加载，它将返回一个新实例或 None ：

```
class MyClass(object):
    def __init__(self, attribute1, attribute2, ...):
        self.attribute1 = attribute1
        self.attribute2 = attribute2
        # ...

    @staticmethod
    def load_from_db(number):
        # set up and query database
        record = cursor.fetchone()
        if record == None:
            return None
        else:
            return MyClass(record['Field1'], record['Field2'], ...) 
```

然后从数据库加载 MyClass 对象：

```
my_obj = MyClass.load_from_db(number) 
```

您不能（从或任何地方）在 Python 中删除*对象*`__init__`，您只能从包含此引用的范围中删除*对对象的单个引用。*（例如作用域调用`MyClass()`，如`load_from_db()`上面代码中的函数。）

# vb.net - “字符串的一维数组”类型的值无法转换为“字符串”。(BC30311)

> ID：13112943
> 
> 赞同：1
> 
> 时间：2012-10-28T20:55:42.383
> 
> 标签：vb.net, .net-4.0

我有这段代码，它给出了一个错误：

```
'declaration
Dim strFieldValues As String
'split
strFieldValues = strRecord.Split(",") 'field are separated by commas 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T20:59:13.333

好吧，这个错误对我来说似乎是不言自明的。您已经声明了一个类型的变量`String`- 即它可以保存*单个`String`引用*的值：

```
Dim strFieldValues As String 
```

然后，您尝试为其从以下位置返回的值分配一个值`String.Split()`：

```
strFieldValues = strRecord.Split(",") 
```

现在[`String.Split()`](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)返回一个`String` *数组*，而不是单个字符串值。

因此，您可以采取两种行动：

*   更改`strFieldValues`为数组变量
*   更改您分配给它的值

我的猜测是你想要第一个，但我们不知道你想要实现什么。最简单的方法是结合声明和初始化：

```
Dim strFieldValues = strRecord.Split(",") 
```

您可能还需要将参数更改为`Split`- 我不知道 VB 将如何整理该调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T18:57:32.480

如果您只想检索结果字符串数组的任一侧，则可以像这样调用左侧或右侧部分：

```
strFieldValues = strRecord.Split(",")(0) ' Text to the left of the delimiter character 
```

或者

```
strFieldValues = strRecord.Split(",")(1) ' Text to the right of the delimiter character 
```

当然，这假设分隔符确实存在，因此您应该采取必要的预防措施，以确保如果在您要拆分的字符串上找不到该字符，您不会遇到运行时异常。

# javascript - html/Javascript 客户端用户登录

> ID：13112944
> 
> 赞同：0
> 
> 时间：2012-10-28T20:55:57.607
> 
> 标签：javascript, html, asp.net-mvc, authentication, asp.net-authentication

我正在向我的 Web 应用程序添加身份验证。它是一个 asp.net mvc 单页应用程序。当前，Web 应用程序仅将 asp.net mvc 用于一件事，即身份验证。我检查 AppController 中的 Request.IsAuthenticated，如果它没有经过身份验证，则我提供登录页面（否则我保存 app.html 页面）。在我的 AccountController 中，我有以下登录操作：

```
[HttpPost]
    [AllowAnonymous]
    [ValidateAntiForgeryToken]
    public ActionResult LogOn(LogOnModel model, string returnUrl)
    {
        if (ModelState.IsValid)
        {
            //VALIDATE USER NAME AND PASSWORD                
            if (Repository_Security.CheckUser(model.UserName, model.Password))
            {
                FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);
                if (Url.IsLocalUrl(returnUrl) && returnUrl.Length > 1 && returnUrl.StartsWith("/") && !returnUrl.StartsWith("//") && !returnUrl.StartsWith("/\\\\"))
                {
                    return Redirect(returnUrl);
                }
                else
                {
                    return RedirectToAction("Index", "App");
                }
            }
            else
            {
                ModelState.AddModelError("", "The user name or password provided is incorrect.");
            }
        }

        // If we got this far, something failed, redisplay form
        return View(model);
    } 
```

实际上，它只是获取用户名和密码并针对数据库进行验证。如果通过，则设置 AuthCookie。

我的问题是，如果我在浏览器中以 javascript 和 ajax 数据调用完全在客户端执行此操作，这可能吗？比能够在我的客户端代码中添加检查以查看用户是否经过身份验证，否则将它们扔到登录页面？

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T21:04:33.430

是的，MVC 非常适合工作客户端 Ajax。

您可以修改控制器以返回 JSON，并且通过 jquery ajax 调用，您可以使用客户端 javascript 处理返回的 json。

将最后一行（返回 View(model)）更改为如下所示

```
return Json(new {IsSuccess=successVariable, RedirectUrl=myRedirectUrl, Message=failedErrorMessage}); 
```

调整您的重定向行以设置 myRedirectUrl 变量。

**更新**

如果你想在你的项目中摆脱 MVC（因为它对于这样一个简单的任务来说有点过头了），向你的站点添加一个 Web 服务 (asmx)。在里面创建一个类似于以下的 webmethod：

```
[WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Json)] 
public LogonResponse Logon(LogonModel model){
    ... do login logic as your original code...
    return new LogonResponse() { IsSuccess = successVar, RedirectUrl=myRedirectUrl, Message=failedErrorMsg};
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T22:06:13.490

当您调用`FormsAuthentication.SetAuthCookie()`它时，它会将`Set-Cookie`标头发送回客户端，以便他们的浏览器可以存储身份验证 cookie。您可以使用 JavaScript 检查此 cookie 客户端是否存在。如果存在则继续，如果不存在则重定向（`window.location.href`）到登录页面，例如：

```
if (document.cookie.indexOf(".ASPXAUTH") >= 0) alert("You are logged in");
else window.location.href = "http://www.domain.com/login"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T21:08:36.813

您也可以从客户端执行此操作...但是如果您的应用程序需要完全安全，那么此模型将打开许多安全漏洞。

# wcf - IIS 是否适用于仅 http 的 WCF 服务？

> ID：13112952
> 
> 赞同：3
> 
> 时间：2012-10-28T20:57:21.583
> 
> 标签：wcf, iis, tcp

我不是 WCF 专家，所以请不要嘲笑我。
我需要编写一个通过 TCP 端点而不是 HTTP 接收数据的 WCF 服务。我仍然可以将它部署到 IIS 或 Azure 并利用所有内置的很酷的东西（负载分配等）吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T06:33:33.703

取决于 IIS 的版本。

*   **IIS v6**仅支持 HTTP
*   使用**IIS v7**，您还可以获得 WAS（Windows 进程激活服务），当托管在 IIS 中时，它还支持 TCP 和其他协议

看：

*   [如何：在 IIS 中托管 WCF 服务](http://msdn.microsoft.com/en-us/library/ms733766.aspx)
*   [在 IIS 7 中设置启用 netTcpBinding 的服务](http://galratner.com/blogs/net/archive/2010/10/08/setting-up-a-nettcpbinding-enabled-wcf-service-in-iis-7.aspx)

# ruby-on-rails - 运行 RSpec 集成测试时的 NoMethodError 未定义方法“合并”

> ID：13112959
> 
> 赞同：2
> 
> 时间：2012-10-28T20:58:12.790
> 
> 标签：ruby-on-rails, ruby, rspec

我正在关注**Micheal Hartl 的 Ruby on rails 教程 2.3 版**，并且我正确地遵循了集成测试的步骤。在**/sample_app/spec/integration**我有一个名为**layout_links_spec.rb**的文件，它看起来像这样。

```
require 'spec_helper'
describe "Layout links" do
 it "should have a Home page at '/'" do
  get '/'
   response.should render_template('pages/home')
  end
 end 
```

当我做

```
$ spec spec/ 
```

我收到以下错误

```
1)
NoMethodError in 'Layout links should have a Home page at '/''
undefined method `merge' for nil:NilClass
 /home/rails_projects/sample_app/spec/integration/layout_links_spec.rb:4:

Finished in 0.060225 seconds

1 example, 1 failure 
```

请帮我解决这个错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T03:22:04.403

基于这个问题，在我看来你正在关注他的教程的第一版。如果是这样，他用来生成集成测试的命令在第 178 页，第 5.2.1 节

```
rails generate integration_test layout_links 
```

结果是**spec/requests/layout_links_spec.rb下的一个文件**

* * *

如果您浏览他的应用程序的源代码，则没有**spec/integration**文件夹。看看[这里](https://github.com/railstutorial/sample_app/blob/master/spec/requests/layout_links_spec.rb)，看看这是否有帮助。希望如此。

**PS：**他评论说“在 RSpec 中，集成测试也称为*请求规范*——这个术语的起源对我来说是模糊的。”

在 RSpec [docs](https://www.relishapp.com/rspec/rspec-rails/v/2-11/docs/request-specs/request-spec)中，我发现了这一点：Request specs 为 Rails 的集成测试提供了一个精简的包装器，旨在通过整个堆栈来驱动行为，包括路由（由 Rails 提供）并且没有存根（这取决于你）。

# php - 如果我之前没有将它保存为变量，是否可以检查是否有与文件关联的句柄？

> ID：13112963
> 
> 赞同：0
> 
> 时间：2012-10-28T20:58:28.280
> 
> 标签：php, file, handle

假设我有`fopen('filename.ext', 'w');`，但我没有存储手柄。接下来我需要删除该文件。有没有办法找到这个文件附加了一个句柄，然后关闭那个未命名的句柄？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T21:02:37.967

从文档：

> 感谢 PHP 4 的 Zend 引擎引入的引用计数系统，自动检测到不再引用它的资源，并被垃圾收集器释放。因此，很少需要手动释放内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T21:04:36.277

在 Linux 上，可以[list`/proc/self/fd/`](https://stackoverflow.com/questions/6583158/finding-open-file-descriptors-for-a-process-linux-c-code)获取句柄和对应的文件名，但是没有平台无关的 php 函数。

您应该将`fopen`调用包装在 try .. finally 块中，而不是疯狂地关闭句柄（php 5.3+）：

```
$f = fopen('filename.ext', 'w');
if ($f !== false) {
  try {
     // Some code that may throw an exception
  } finally {
     fclose($f);
  }
} 
```

请注意，至少在 POSIX 系统上，您还可以在持有文件（名称）的句柄时删除文件（名称）。

# iphone - UITextView 中的文本下划线

> ID：13112965
> 
> 赞同：11
> 
> 时间：2012-10-28T20:58:50.263
> 
> 标签：iphone, objective-c, ios, xcode, uitextview

如何在`UITextView`. 我知道我需要创建一个 的子类`UITextView`，但是会发生什么`drawRect:`？

谢谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-28T21:56:15.497

尝试`NSAttributedString`如下使用并设置在`UITextView`. 这适用于 iOS6。

```
NSMutableAttributedString *attString = [[NSMutableAttributedString alloc] initWithString:@"Some String"];
[attString addAttribute:(NSString*)kCTUnderlineStyleAttributeName 
                   value:[NSNumber numberWithInt:kCTUnderlineStyleSingle] 
                   range:(NSRange){0,[attString length]}]; 
```

有关`NSAttributedString`检查此内容的更多信息，[您如何使用 NSAttributedString？](https://stackoverflow.com/questions/3482346/how-do-you-use-nsattributedstring)

例如：-

```
textView.attributedText = attString; 
```

从[UITextView 上的苹果文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/uitextview_class/Reference/UITextView.html)，

> 在 iOS 6 及更高版本中，此类通过使用属性文本属性支持多种文本样式。（iOS 的早期版本不支持样式化文本。）为此属性设置值会导致文本视图使用属性字符串中提供的样式信息。您仍然可以使用 font、textColor 和 textAlignment 属性来设置样式属性，但这些属性适用于文本视图中的所有文本。

## **属性文本：**

文本视图显示的样式化文本。

```
@property(nonatomic,copy) NSAttributedString *attributedText 
```

**讨论：**此属性默认为 nil。为该属性分配一个新值也会用相同的字符串数据替换 text 属性的值，尽管没有任何格式信息。此外，分配新的 a 值会更新 font、textColor 和 textAlignment 属性中的值，以便它们反映从属性字符串中位置 0 开始的样式信息。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-07-29T20:24:44.973

如果这是静态文本，您可以在 Interface Builder 中为它加下划线。确保首先通过在下拉菜单中选择“Attributed”来制作文本“Attributed”：

![在此处输入图像描述](../Images/bdbe8e4627e0bffa4b2fc07989a84d47.png)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-04-24T02:05:20.657

如果您想避免包含 CoreText，您可以使用具有此属性的属性字符串：

```
@{NSUnderlineStyleAttributeName: @(NSUnderlineStyleSingle)} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-06-01T12:56:06.813

```
textViewMessage.linkTextAttributes = @{NSForegroundColorAttributeName: [UIColor blueColor], NSUnderlineStyleAttributeName: [NSNumber numberWithInt:NSUnderlineStyleSingle]}; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-09-30T10:54:42.230

```
-(IBAction)underline:(id)sender
{
    NSDictionary *underlineAttribute = @{NSUnderlineStyleAttributeName: @(NSUnderlineStyleSingle)};
    texts.attributedText = [[NSAttributedString alloc] initWithString:texts.text
                                                           attributes:underlineAttribute];
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-28T21:21:50.060

如果你想格式化你的文本（带下划线的词、链接、彩色词......）我建议你使用[FTCoreText](https://github.com/FuerteInternational/FTCoreText)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-06-02T12:40:26.653

你不能使用 "kCTUnderlineStyleAttributeName" 或 "kCTUnderlineStyleSingle" 现在你必须这样做：

```
 NSMutableAttributedString *attString = [[NSMutableAttributedString alloc] initWithString:@"Text"];
[attString addAttribute:NSUnderlineStyleAttributeName
                  value:@(NSUnderlineStyleSingle)
                  range:(NSRange){0,[attString length]}]; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-26T07:25:07.347

我建议您使用[MFUnderlinedTextView](https://github.com/mfoxstudio/MFUnderlinedTextView/ "MFUnunderlinedTextView")，它会有所帮助。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-10-29T09:13:19.093

我建议您使用[CoreText](https://developer.apple.com/library/mac/#documentation/StringsTextFonts/Conceptual/CoreText_Programming/Introduction/Introduction.html)。基本教程[在 raywenderlich 上](http://www.raywenderlich.com/4147/how-to-create-a-simple-magazine-app-with-core-text)。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-10-28T21:03:03.237

如果您使用的是 iOS 6，那么您可以使用**UITextView**`attributedText`的属性。对文本应用下划线格式。如果您愿意，您还可以设置该属性以确保用户键入的文本具有一组特定的格式。**`typingAttributes`**

 *** * *

## 回答 #11

> 赞同：0
> 
> 时间：2022-02-04T16:45:44.230

```
 let someString = NSMutableAttributedString(string: "Your String", attributes: [NSAttributedString.Key.font : UIFont.boldSystemFont(ofSize: 20), NSAttributedString.Key.underlineStyle : NSUnderlineStyle.single.rawValue])
        someStringTextView.attributedText = titleAT 
```

你可以给你的字符串一堆属性，比如粗体、下划线等。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-12-02T17:17:59.280

这就是我使用 Swift 5 的方式：

```
let attributedString = NSMutableAttributedString(string: myTextView.text ?? "")
myTextView.linkTextAttributes = [NSAttributedString.Key(rawValue: NSAttributedString.Key.underlineStyle.rawValue): NSUnderlineStyle.single.rawValue] as [NSAttributedString.Key: Any]?
myTextView.attributedText = attributedString 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-03-06T23:30:11.547

Swift 5. As my UITextView if for inserting text, I created an extension function as bellow.

```
extension UITextView {

  func underlined() {
    let border = CALayer()
    let width = CGFloat(1.0)
    border.borderColor = UIColor.lightGray.cgColor
    border.frame = CGRect(x: 0, y: self.frame.size.height - 5, width:  self.frame.size.width, height: 1)
    border.borderWidth = width
    self.layer.addSublayer(border)
    self.layer.masksToBounds = true
    let style = NSMutableParagraphStyle()
    style.lineSpacing = 15
    let attributes = [NSAttributedString.Key.paragraphStyle : style, NSAttributedString.Key.foregroundColor : UIColor.darkGray, NSAttributedString.Key.font :  UIFont.systemFont(ofSize: 13)]
    self.attributedText = NSAttributedString(string: self.text, attributes: attributes)
  }

} 
```

The border is drawling the line and the style is adding the spacing between the lines. Usage in your UIView custom layout:

```
override func layoutSubviews() {
    super.layoutSubviews()
    self.dateAndTimeInput.underlined()
  } 
```

[Image with the result](https://i.stack.imgur.com/6LFYC.png)

* * *

## 回答 #14

> 赞同：-3
> 
> 时间：2013-03-23T13:43:20.377

要为文本添加下划线，您必须转到可以选择复制、剪切、删除选项的位置，现在有更多选项，例如 B/I/U（粗体、斜体、下划线）。选择此选项，就是这样。如果无法使用，请再次选择下划线选项。**

# hibernate - 运行程序后文件数据库中没有模式通过休眠持久化到 hsqldb:file

> ID：13112966
> 
> 赞同：0
> 
> 时间：2012-10-28T20:58:59.200
> 
> 标签：hibernate, hsqldb

这是hibernate.cfg.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
  <session-factory>
    <property name="hibernate.connection.url">jdbc:hsqldb:file:test_db_file</property>
    <property name="hsqldb.write_delay">false</property>
    <property name="hibernate.connection.driver_class">org.hsqldb.jdbcDriver</property>
    <property name="dialect">org.hibernate.dialect.HSQLDialect</property>
    <property name="hibernate.connection.username">combine1</property>
    <property name="hibernate.connection.password"></property>

    <!-- Enable Hibernate's automatic session context management -->
    <property name="current_session_context_class">thread</property>
    <!-- Disable the second-level cache  -->
    <property name="cache.provider_class">org.hibernate.cache.NoCacheProvider</property>
    <!-- Echo all executed SQL to stdout -->
    <property name="show_sql">true</property>
    <!-- Drop and re-create the database schema on startup -->
    <property name="hbm2ddl.auto">create</property>
    <!--
         few resources
    -->

  </session-factory>
</hibernate-configuration> 
```

当我将 hsqldb 更改为 mysql db 时，它工作正常。但是当我这样离开时，我将 hsqldb:file 连接为 NetBeans 中的数据库，公共模式中没有任何内容，我想在运行程序后找到创建的表。

在运行时，类是持久化的，我可以从会话等中加载它们，但是程序结束后，什么都没有。除了在 test_db_file.script 中是用于创建所需模式的查询，但不是我保存到数据库中的行。

正如我所写，这是我的简单主要内容，当我使用一些 mysql 数据库时，它可以工作：

```
import java.util.List;
import org.hibernate.Criteria;
import org.hibernate.Session;
import resources.HibernateUtil;
import website.Website;

public class MrhAdministration {

  public static void main(String[] args) {
    Session session = HibernateUtil.getSessionFactory().getCurrentSession();
    session.beginTransaction();

    WebsiteCreator.create(session);

    Criteria criterial = session.createCriteria(Website.class);
    for (Website w : (List<Website>) criterial.list()) {
      System.out.println("Sites: " + w.getSiteName() + " " + w.getSiteUrl());
    }
    session.getTransaction().commit();
  }
} 
```

感谢您的回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T21:45:06.603

最可能的问题是数据库文件的位置。`jdbc:hsqldb:file:test_db_file`当您使用不同的程序访问数据库时，您正在使用解析到不同位置的相对路径。尝试绝对路径，例如`jdbc:hsqldb:file:/db/test_db_file`

请注意，您对 username 和 write_delay 的其他设置对最新版本 2.2.x 及更高版本有效。它们不适用于 1.8.x 版本。

# java - 如何调用 batik-rasterizer.jar

> ID：13112967
> 
> 赞同：1
> 
> 时间：2012-10-28T20:59:02.630
> 
> 标签：java, batik

从 1.7 版开始使用`batik-rasterizer.jar`batik，我想知道如何正确调用 jar。

```
java -jar batik-rasterizer-1.7.jar -m image/png -q 0.8 $1 
```

这给了我：

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/batik/i18n/LocalizableSupport 
```

因此，我一直在寻找正确的`MainClass`并`ClassPath`使用。我会在一分钟内发布一个我想出的脚本作为答案......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-30T14:21:49.890

这将是 Maven 重新打包方法：

1.  根据下面的 pom.xml 创建一个 maven 项目
2.  添加 Java 类 Rasterizer
3.  添加 JUnit 测试 TestRasterizer
4.  添加示例文件 readandblue.svg
5.  运行 mvn 安装

你应该得到一个“阴影”jar 文件 target/com.bitplan.rasterizer-0.0.1.jar 已经包含了 java.awt.headless 调用：

*   [batik-rasterizer.jar - 将 svg 转换为 png](https://stackoverflow.com/questions/25094131/batik-rasterizer-jar-convert-svg-to-png)

您也可以使用 pom.xml “独立”并简单地更改其中的主类。

**Rasterize.java 包装类**

```
package com.bitplan.rasterizer;

import org.apache.batik.apps.rasterizer.Main;

/**
 * Rasterizer main class
 * https://stackoverflow.com/questions/13112967/how-to-call-batik-rasterizer-jar
 * @author wf
 *
 */
public class Rasterizer {
    /**
     * wrapper entry point for batik rasterizer
     * @param args
     */
  public static void main(String[] args) {
    System.setProperty("java.awt.headless", "true");
    // see 
    // http://www.docjar.org/html/api/org/apache/batik/apps/rasterizer/Main.java.html
    Main main=new Main(args);
    main.execute();
  }
} 
```

**TestRasterizer.java JUnit 测试用例**

```
package com.bitplan.rasterizer;

import static org.junit.Assert.*;

import java.io.File;

import org.junit.Test;

/**
 * test the rasterizer
 * @author wf
 *
 */
public class TestRasterizer {

    @Test
    public void testRasterizer() {
        File testFile=new File("src/test/data/redandblue.svg");
        File pngFile=new File("src/test/data/redandblue.png");
        if (pngFile.exists())
            pngFile.delete();
        assertTrue(testFile.exists());
        String [] args={"-scriptSecurityOff","-m","image/png","-q","0.8",testFile.getPath()};
        com.bitplan.rasterizer.Rasterizer.main(args);
        assertTrue(pngFile.exists());
    }

} 
```

**示例 svg 文件：readandblue.svg**

```
<svg xmlns="http://www.w3.org/2000/svg"
     width="467" height="462">
  <rect x="80" y="60" width="250" height="250" rx="20"
      style="fill:#ff0000; stroke:#000000;stroke-width:2px;" />

  <rect x="140" y="120" width="250" height="250" rx="40"
      style="fill:#0000ff; stroke:#000000; stroke-width:2px;
      fill-opacity:0.7;" />
</svg> 
```

**pom.xml：**

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.bitplan.java</groupId>
    <version>0.0.1</version>
    <artifactId>com.bitplan.rasterizer</artifactId>
    <name>com.bitplan.rasterizer</name>
    <description>Provide rasterizer access</description>
    <properties>
        <junit3.version>3.8.1</junit3.version>
        <junit4.version>4.11</junit4.version>
    </properties>
    <dependencies>
        <!-- batik rasterizer -->
        <dependency>
            <groupId>org.apache.xmlgraphics</groupId>
            <artifactId>batik-rasterizer</artifactId>
            <version>1.7</version>
        </dependency>
        <!--  https://issues.apache.org/bugzilla/show_bug.cgi?id=44682 -->
        <dependency>
            <groupId>org.apache.xmlgraphics</groupId>
            <artifactId>batik-codec</artifactId>
            <version>1.7</version>
        </dependency>
        <!-- Runtime Junit access -->
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>${junit4.version}</version>
        </dependency>
    </dependencies>
    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-shade-plugin</artifactId>
                <version>2.3</version>
                <executions>
                    <execution>
                        <phase>package</phase>
                        <goals>
                            <goal>shade</goal>
                        </goals>
                        <configuration>
                            <transformers>
                                <transformer
                                    implementation="org.apache.maven.plugins.shade.resource.ServicesResourceTransformer" />
                                <transformer
                                    implementation="org.apache.maven.plugins.shade.resource.ManifestResourceTransformer">
                                    <!--  <mainClass>org.apache.batik.apps.rasterizer.Main</mainClass> -->
                                    <mainClass>com.bitplan.rasterizer.Rasterizer</mainClass> -->
                                </transformer>
                            </transformers>
                            <filters>
                                <filter>
                                    <artifact>*:*</artifact>
                                    <excludes>
                                        <exclude>META-INF/*.SF</exclude>
                                        <exclude>META-INF/*.DSA</exclude>
                                        <exclude>META-INF/*.RSA</exclude>
                                    </excludes>
                                </filter>
                            </filters>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
</project> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T21:03:00.273

该脚本将所有必要的 jar 从 maven 存储库中获取到类路径变量中。可能有更好的方法，例如使用 maven 重新打包...

```
#!/bin/bash
#set -x
batikdir=$HOME/.m2/repository/org/apache/xmlgraphics/batik-rasterizer/1.7/
batik=batik-rasterizer-1.7.jar
main=org.apache.batik.apps.rasterizer.Main
jarlist=/tmp/jarlist$$.txt
cp=$batikdir/$batik
find $HOME/.m2/repository -type f -name *.jar > $jarlist
for j in batik-ext-1.7.jar batik-dom-1.7.jar batik-css-1.7.jar batik-svg-dom-1.7.jar batik-gvt-1.7.jar batik-parser-1.7.jar batik-script-1.7.jar batik-bridge-1.7.jar batik-anim-1.7.jar batik-transcoder-1.7.jar batik-awt-util-1.7.jar batik-codec-1.7.jar batik-util-1.7.jar batik-xml-1.7.jar xerces-2.5.0.jar xalan-2.6.0.jar xml-apis-1.3.04.jar xml-apis-ext-1.3.04.jar fop-0.94.jar batik-js.jar
do
  #echo $j
    p=`grep $j $jarlist`
    cp="$cp:$p"
done
#echo $cp
# http://tech.groups.yahoo.com/group/svg-developers/message/47939
java -cp $cp $main -scriptSecurityOff -m image/png -q 0.8 $1 
rm -f $jarlist 
```

为了获取库，我使用以下 pom.xml 创建了一个虚拟 maven 项目：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <!--
    install maven 2 to use this pom file
    run e.g. mvn dependency:go-offline to download all libraries
    -->
    <project>
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.bitplan.svg</groupId>
    <artifactId>com.bitplan.svg</artifactId>
    <version>0.0.1</version>
    <name>Dummy Project for SVG </name>
    <packaging>pom</packaging>
    <dependencies>
      <dependency>
        <groupId>org.apache.xmlgraphics</groupId>
            <artifactId>batik-rasterizer</artifactId>
        <version>1.7</version>
        </dependency>       
        <dependency>
            <groupId>org.apache.xmlgraphics</groupId>
                <artifactId>batik-codec</artifactId>
                <version>1.7</version>
        </dependency>
    </dependencies>
    <!-- configure jar plugin to build test-jar http://maven.apache.org/guides/mini/guide-attached-tests.html -->
    <build>
        <extensions>
            <extension>
                <groupId>org.apache.maven.wagon</groupId>
                <artifactId>wagon-ssh</artifactId>
                <version>1.0</version>
            </extension>
        </extensions>
    </build>
    </project> 
```

# html - CSS：IE 的轮廓偏移替代方案？

> ID：13112968
> 
> 赞同：11
> 
> 时间：2012-10-28T20:59:03.630
> 
> 标签：html, css, internet-explorer

我将以下代码用于不同颜色的 2 个边框以及边框之间的空间。我将该属性`outline-offset`用于边界之间的空间。然而，它在 IE 中不受支持（甚至 IE9 也不支持）。是否有任何替代解决方案也适用于 IE，而无需在 html 中添加另一个 div。

**HTML：**

```
<div class="box"></div> 
```

**CSS：**

```
.box{
    width: 100px;
    height: 100px;
    margin: 100px;
    border: 2px solid green;
    outline:2px solid red;
    outline-offset: 2px;    
} 
```

高度和宽度不固定，我只是用于示例。

**JSFiddle：http:** [//jsfiddle.net/xyXKa/](http://jsfiddle.net/xyXKa/)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-29T02:52:32.413

这里有两个解决方案。首先是 IE8+ 兼容，利用`pseudoelements`. [在JSFiddle](http://jsfiddle.net/fAMQw/2/)上查看它。

HTML：

```
<div class="box"></div> 
```

CSS：

```
.box {
    position: relative;
    width: 100px;
    height: 100px;
    margin: 100px;
    border: 2px solid green;
}
.box:after {
    content: "";
    position: absolute;
    top: -6px;
    left: -6px;
    display: block;
    width: 108px;
    height: 108px;
    border: 2px solid red;
} 
```

​我的第二个想法是一个非语义的解决方案，但给你 IE6+ 支持。[在JSFiddle](http://jsfiddle.net/Nq3bK/4/)上查看它。

HTML：

```
<div class="outer-box"><div class="inner-box"></div></div> 
```

​ CSS：

```
.outer-box {
    width: 104px;
    height: 104px;
    margin: 100px;
    border: 2px solid red;
    padding: 2px;
}
.inner-box {
    width: 100px;
    height: 100px;
    border: 2px solid green;
} 
```

​ 哦，糟糕，我刚看到你要求只留下一个`div`。嗯，第一个解决方案符合这些要求！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-20T14:08:47.243

Some more solutions. I've used them successfully:

1.

```
.box {
outline:2px solid green;
border:2px solid transparent;
box-shadow: 0 0 0 2px red inset;
} 
```

Restriction of this solution: "outline" property ignores "border-radius" one.

2.

```
.box {
border: 2px solid green;
box-shadow: 0 0 0 2px #fff inset, 0 0 0 4px red inset;
} 
```

Restriction of this solution: space between red and green borders can't be transparent because red box-shadow will be visible through it. So, any solid color needed, I've set #fff.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-07T14:48:57.597

为此，我对其他解决方案的问题：

"outline-offset" 与 IE 不兼容；伪元素方法需要绝对定位和像素比（对我的响应式设计没有好处）；插入框阴影不会显示在图像上。

这是我用来以与 IE 兼容的方式响应式构图的修复程序：

```
.container img { 
        border:2px solid white;
        outline:4px solid red;
        background-color: green;
        padding: 2px;
} 
```

“outline”定义了外边框，“border”定义了中间的空间，而内边框实际上是背景颜色，填充决定了它的宽度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-18T12:21:05.503

`::focus`在您为伪类设置样式的情况下，您将无法享受使用`::after`或`::before`伪类的奢侈，因为这些方法仅对**容器元素有效（** *有关更多信息，**请参阅[W3C 规范](https://www.w3.org/TR/CSS2/generate.html#before-after-content)*） 。

*释放这种抵消*效果的跨浏览器解决方案是使用`box-sizing`,`border`和`padding`.

您只需否定和交替填充和边框宽度值。

**默认/基本样式：**

```
input[type="text"] {
  ...
  padding:10px;
  border:1px solid grey;
} 
```

**伪类样式：**

```
input[type="text"]:focus {
  padding:8px;
  border:3px solid red;
} 
```

# python - 使用 pyinstaller 在 Mac 上制作独立文件

> ID：13112972
> 
> 赞同：0
> 
> 时间：2012-10-28T20:59:17.843
> 
> 标签：python, user-interface, tkinter, pyinstaller

我正在尝试将 pyinstaller 与 python 2.7 版一起使用来制作一个独立的文件，该文件将运行我使用 tkinter 制作的一个小应用程序，但是我在遵循文档时遇到了麻烦。我找到[了这个](http://www.blog.pythonlibrary.org/2010/08/10/a-pyinstaller-tutorial-build-a-binary-series/)，但它适用于 python 2.5 和 windows

[http://www.pyinstaller.org/export/v2.0/project/doc/Manual.html?format=raw#spec-files](http://www.pyinstaller.org/export/v2.0/project/doc/Manual.html?format=raw#spec-files)

我在桌面上创建了两个文件夹，一个用于 pyinstaller，一个包含我的文件。

在终端中，我将目录更改为 pyinstaller 文件夹。然后我输入了以下内容：

```
python pyinstaller.py /Users/.../Desktop/BuildFolder/menu.py
//buildfolder contains my files, menu.py is the file I run to start the app 
```

当它运行时，我收到一条消息，内容类似于“输出目录及其所有内容将被删除。继续y/n？” 选择是，然后创建目录

```
/Users/.../Desktop/pyinstaller-2.0/menu 
```

在该菜单文件夹中，有一个 .SPEC 文件。所以，我在终端运行以下

```
python pyinstaller.py /Users/.../Desktop/BuildFolder/menu/menu.spec 
```

运行后，我在该文件夹中找到了一个 .PKG 文件，但它没有像 menu.py 这样的标签。我不知道下一步该做什么，我不确定我是否应该运行其他文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T13:57:02.837

我不确定（还没有尝试过），但也许您必须在使用 .SPEC 文件时运行 Build.py？

# r - 更改条形图中特定条形的颜色

> ID：13112974
> 
> 赞同：19
> 
> 时间：2012-10-28T20:59:42.690
> 
> 标签：r, colors, bar-chart

我一直在创建一些条形图，我想知道是否可以根据它们位于 x 轴上方或下方来为图表上的条形着色？

为了澄清起见，这是我的意思的条形图类型：

![在此处输入图像描述](../Images/b7b98fd2a29348bdf45ca6baa3607ec8.png)

理想情况下，我希望能够将上面的条形与下面的单独颜色着色，这样图表看起来更有吸引力，我一直在搜索，但找不到任何方法，有人可以帮忙吗？

提前致谢。:)

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-28T21:06:00.083

这是一种策略：

```
## Create a reproducible example
set.seed(5)
x <- cumsum(rnorm(50))

## Create a vector of colors selected based on whether x is <0 or >0  
## (FALSE + 1 -> 1 -> "blue";    TRUE + 1 -> 2 -> "red")
cols <- c("blue", "red")[(x > 0) + 1]  

## Pass the colors in to barplot()   
barplot(x, col = cols) 
```

如果您想要两种以上的基于值的颜色，您可以采用类似的策略（使用`findInterval()`代替简单的逻辑测试）：

```
vals <- -4:4
breaks <- c(-Inf, -2, 2, Inf)
c("blue", "grey", "red")[findInterval(vals, vec=breaks)]
# [1] "blue" "blue" "grey" "grey" "grey" "grey" "red"  "red"  "red" 
```

![在此处输入图像描述](../Images/5e72d1d4d4384e750d3b3a8a7201cc84.png)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-10-28T23:09:28.060

A `ggplot2` solution using `geom_bar` with `stat_identity`.

```
library(ggplot2)
ggplot(dat, aes(x= seq_along(x), y = x)) + 
  geom_bar(stat = 'identity', aes(fill = x>0), position = 'dodge', col = 'transparent') + 
  theme_bw() + scale_fill_discrete(guide = 'none') + 
  labs(x = '', y = 'NAO Index') 
```

![enter image description here](../Images/a4ec8ddc69438c1aba1d6c19ca9fb598.png)

`scale_fill_discrete(guide = 'none')` removes the legend, `position = 'dodge'` stops the warning that comes from the default `position = 'stack'`.

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-10-28T21:10:32.017

一种方法是使用逻辑变量或因子变量来索引颜色向量（这是 R.

```
set.seed(1)
NAO <- rnorm(40)
cols <- c("red","black")
pos <- NAO >= 0
barplot(NAO, col = cols[pos + 1], border = cols[pos + 1]) 
```

这里的诀窍是`pos`：

```
> pos
 [1] FALSE  TRUE FALSE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE FALSE
[11]  TRUE  TRUE FALSE FALSE  TRUE FALSE FALSE  TRUE  TRUE  TRUE
[21]  TRUE  TRUE  TRUE FALSE  TRUE FALSE FALSE FALSE FALSE  TRUE
[31]  TRUE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE 
```

我们在调用中强制转换为数字 `barplot()`：

```
> pos + 1
 [1] 1 2 1 2 2 1 2 2 2 1 2 2 1 1 2 1 1 2 2 2 2 2 2 1 2 1 1 1 1 2
[31] 2 1 2 1 1 1 1 1 2 2 
```

`1`s 和s 的向量`2`从 color 的向量中选择元素`cols`，这样：

```
> cols[pos + 1]
 [1] "red"   "black" "red"   "black" "black" "red"   "black"
 [8] "black" "black" "red"   "black" "black" "red"   "red"  
[15] "black" "red"   "red"   "black" "black" "black" "black"
[22] "black" "black" "red"   "black" "red"   "red"   "red"  
[29] "red"   "black" "black" "red"   "black" "red"   "red"  
[36] "red"   "red"   "red"   "black" "black" 
```

这是传递给每个绘制的条的颜色。

在上面的代码中，我还通过参数将条形的边框设置为相关颜色`border`。

结果图应如下所示

![在此处输入图像描述](../Images/24063d793c89b69fa5b8833f78e68c6e.png)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-07-18T11:08:31.897

我在寻找有关如何根据因素为条形图中的各个条形着色的帮助时找到了此页面。我找不到任何其他信息来源，但多亏了这个页面，我想出了这个：

cols <- ifelse(df$Country == "格陵兰", "green","blue")

然后它以如上所述的通常方式传递到 barplot 中：

条形图（x，col = cols）

# java - catch 块中的 Java 多态行为怪异，需要解释

> ID：13112976
> 
> 赞同：1
> 
> 时间：2012-10-28T20:59:56.660
> 
> 标签：java, exception-handling, polymorphism

我正在尝试编写一个异常处理程序类来处理流中的各种异常。业务流程会引发大量异常，并且处理程序具有将所有这些异常作为参数并进行所需处理的方法。我无法理解的行为是，当在业务流程中我只捕获异常（而不是特定的异常）然后将此捕获的异常实例传递给处理程序时，只调用了句柄（异常）而不是特定的处理程序用于特定异常的方法。以下代码片段将解释我的困惑。

```
public class Scrap {

    public static void main(String[] args) {
        try {
            new Handler().handle(new BException());
            throw new BException();
        } catch (Exception e) {
            new Handler().handle(e);
        }
    }

    static class Handler {
        public void handle(AException e) {
            System.out.println(e.getClass());
            System.out.println("AAE");
        }
        public void handle(BException e) {
            System.out.println(e.getClass());
            System.out.println("BBE");
        }
        public void handle(Exception e) {
            System.out.println(e.getClass());
            System.out.println("E");
        }
    }

    static class AException extends Exception {
        private static final long serialVersionUID = 1L;
    }
    static class BException extends Exception {
        private static final long serialVersionUID = 1L;
    }
} 
```

输出是：

```
class Scrap$BException
BBE
class Scrap$BException
E 
```

如果我添加另一个 catch 块：

```
try {
    new Handler().handle(new BException());
    throw new BException();
} catch (BException e) {
    new Handler().handle(e);
} catch (Exception e) {
    new Handler().handle(e);
} 
```

那么输出是：

```
class Scrap$BException
BBE
class Scrap$BException
BBE 
```

为什么在第一种情况下对 Handler.handle 的调用不会转到具有特定异常的特定方法。

另一件需要注意的事情是，如果我在第一个代码上添加一个演员，就像

```
try {
    new Handler().handle(new BException());
    throw new BException();
} catch (Exception e) {
    new Handler().handle((BException)e);
} 
```

输出符合预期（与第二个片段相同）

我确信这种行为是有意的，我只需要指向该记录行为的指针，还有我遇到的问题是，我的业务流程抛出了大约 30 个异常，并且由于这种行为，我必须编写 30 个单独的 catch 块。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T21:04:48.093

这是关于 Java 中的静态与动态绑定。您可以利用动态调度（多态性）的唯一位置是方法调用中**的点之前。**括号内的任何参数都不受动态调度的影响，编译器会根据参数列表中声明的（静态）表达式类型选择一个明确的方法签名，该签名在运行时不能更改。

这是定义 Java 语言类型的基本特征：它是一种**单一的调度**语言，就像大多数其他 OOP 语言一样。Multiple-dispatch OOP 是一个完全不同的模型。例如，在这种情况下，每个人都假设的关于 OOP 的基本图景，即声明其方法的类，就会分崩离析：方法不属于任何特定的类，而是一个单独的实体。在您的特定情况下，该方法`handle`属于每个 Exception 类型和 Handler 类型一样多，并且在 Handler 中声明它没有多大意义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T21:02:40.663

> 为什么在第一种情况下对 Handler.handle 的调用会转到具有特定异常的特定方法。

在第一种情况下，您使用*编译时*类型的值调用它`BException`：

```
new Handler().handle(new BException()); 
```

在第二种情况下，您使用*编译时*类型的值调用它`Exception`：

```
catch (Exception e) {
   new Handler().handle(e);
} 
```

基本上，您需要知道*重载*（选择的方法签名）发生在*编译时*......它只是在*执行*时发生的签名的实现（方法调用目标的继承层次结构的上下） .

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T21:01:52.723

这种行为是因为在您的 catch 块中，`e`变量具有 type `Exception`。你需要做这样的事情来改变`handle()`基于`Exception`类型的调用：

```
public static void main(String[] args) {
    try {
        new Handler().handle(new BException());
        throw new BException();
    } catch (AException e) {
        new Handler().handle(e);
    } catch (BException e) {
        new Handler().handle(e);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-28T21:03:24.690

编译器将根据变量的编译时类型选择方法。您可以通过 instanceof 在运行时选择合适的方法。

# linker - 链接 Python 模块：链接 `ld` 和 `cc` 的区别

> ID：13112978
> 
> 赞同：1
> 
> 时间：2012-10-28T21:00:14.330
> 
> 标签：linker, ld, dynamic-linking, cc

这有效：

```
cc leveldb_ext.cc leveldb_object.cc -o leveldb.so -I /usr/include/python2.7 -lpython2.7 -lleveldb -lsnappy -shared -lc 
```

这不起作用：

```
cc -I /usr/include/python2.7 -g -c leveldb_ext.cc leveldb_object.cc
ld -shared -o leveldb.so -lpython2.7 -lleveldb -lsnappy leveldb_ext.o leveldb_object.o -lc 
```

在这两种情况下，我都没有收到任何编译器/链接错误。但是，当尝试导入它时，我收到此错误：

```
$ python -c "import leveldb"
Traceback (most recent call last):
  File "<string>", line 1, in <module>
ImportError: ./leveldb.so: undefined symbol: _ZNK7leveldb6Status8ToStringEv 
```

为什么？这两种方法有什么区别吗？有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T21:21:49.197

两种情况下目标文件和库的顺序不同。顺序很重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T23:47:34.420

通常使用 setup.py 脚本来编译 Python 模块。像这样的东西应该工作：

```
from setuptools.extension import Extension

ext_modules = [
    Extension(
        'yourmodule',
        sources=['yourmodule.c'],
        libraries=['a', 'b', 'c'],
        extra_compile_args=['-Wall', '-g'],
    )
]

setup(..., ext_modules=ext_modules) 
```

Setuptools 确保使用正确的标志调用编译器和链接器，避免出现问题中的问题。

顺便说一句，如果你想为 LevelDB 提供一个不错的 Python API，你应该看看 Plyvel。有关更多信息，请参阅[https://github.com/wbolster/plyvel](https://github.com/wbolster/plyvel)和[https://plyvel.readthedocs.org/](https://plyvel.readthedocs.org/)。（免责声明：我是作者。）

# php - 如何在aspx页面上打开图像href

> ID：13112980
> 
> 赞同：-2
> 
> 时间：2012-10-28T21:00:36.453
> 
> 标签：php, javascript, jquery, asp.net

单击缩略图时，我希望在 http//example.com/image.aspx 而不是 http//example.com/images/image.jpeg 上打开完整大小的图像，而无需为每个图像创建单独的页面并编辑每个链接。我知道这可以通过 php 实现，但我想知道是否有某种方法可以使用 javascript、jquery、asp.net 或...？如果可能的话（我可能会在这里拉伸它），是否也可以在母版页上为所有拇指运行它？拇指没有类或 id。现在它们是直接的 html 标记。我已经搜索了好几天，除了 php 之外，没有发现任何东西可以让我走上正确的道路。如果我可以实现这一点，我不需要目标空白，因为这将允许我在带有完整站点导航的 aspx 内容页面上打开图像。

```
<a target="_blank" href="image.jpg/jpeg"><img alt="something" src="pictures/image_small.jpg/jpeg"></a> 
```

我们网站的一个页面是[http://backalleypics.com/PeoplesPages/Sa~Se/SarahShahiPages/SarahShahi1.aspx](http://backalleypics.com/PeoplesPages/Sa~Se/SarahShahiPages/SarahShahi1.aspx)。php 类型的示例是[http://www.theplace2.ru/photos/gallery.php?id=47](http://www.theplace2.ru/photos/gallery.php?id=47)我真的不想要画廊、弹出窗口或灯箱。目的是获得每次图片点击的广告浏览量并在页面上进行导航。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T23:56:00.370

您可以使用现有的库来执行此操作，例如：[http ://highslide.com/](http://highslide.com/)

还有很多其他的，其中一些：
[http ://www.dynamicdrive.com/dynamicindex4/thumbnail.htm](http://www.dynamicdrive.com/dynamicindex4/thumbnail.htm)

[http://valums.com/javascript-image-galleries/](http://valums.com/javascript-image-galleries/)

# ada - 如何在 Ada 中读取大文件？

> ID：13112981
> 
> 赞同：4
> 
> 时间：2012-10-28T21:00:49.247
> 
> 标签：ada, filesize

我编写了一个加密文件的 Ada 程序。它逐块读取它们以节省目标机器上的内存。不幸的是，Ada 的目录库读取 Long_Integer 中的文件大小，将读取限制为近 2GB 文件。尝试读取超过 2GB 的文件时，程序在运行时失败，出现堆栈溢出错误。

[这里](http://www.martin.dowie.btinternet.co.uk/Directories/adabrowse/ada-directories.html#255_9)的文档是我上面理解的起源。如何将文件大小读入我自己定义的类型？我可以要求 25 个字节将上限增加到 100GB。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T16:06:03.450

我刚刚在此发布了[GCC 错误 55119](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=55119)。

在您等待时（！），下面的代码可以在 Mac OS X Mountain Lion 上运行。在 Windows 上，它更复杂。见`adainclude/adaint.{c,h}`。

Ada 规范：

```
with Ada.Directories;
package Large_Files is

   function Size (Name : String) return Ada.Directories.File_Size;

end Large_Files; 
```

和正文（部分复制自`Ada.Directories`）：

```
with GNAT.OS_Lib;
with System;
package body Large_Files is

   function Size (Name : String) return Ada.Directories.File_Size
   is
      C_Name : String (1 .. Name'Length + 1);
      function C_Size (Name : System.Address) return Long_Long_Integer;
      pragma Import (C, C_Size, "large_file_length");
   begin
      if not GNAT.OS_Lib.Is_Regular_File (Name) then
         raise Ada.Directories.Name_Error
           with "file """ & Name & """ does not exist";
      else
         C_Name (1 .. Name'Length) := Name;
         C_Name (C_Name'Last) := ASCII.NUL;
         return Ada.Directories.File_Size (C_Size (C_Name'Address));
      end if;
   end Size;

end Large_Files; 
```

和C接口：

```
/* large_files_interface.c */

#include <sys/stat.h>

long long large_file_length (const char *name)
{
  struct stat statbuf;
  if (stat(name, &statbuf) != 0) {
    return 0;
  } else {
    return (long long) statbuf.st_size;
  }
} 
```

您可能需要在其他 Unix 系统上使用`struct stat64`和。`stat64()`

正常编译 C 接口，然后添加`-largs large_files_interface.o`到 gnatmake 命令行。

编辑：在 Mac OS X（和 Debian）上，它们是 x86_64 机器，`sizeof(long)`是 8 个字节；所以评论`adaint.c`是误导性的，`Ada.Directories.Size`最多可以返回 2**63-1。

# python - 线程与异步网络（扭曲）Python

> ID：13112984
> 
> 赞同：4
> 
> 时间：2012-10-28T21:01:11.147
> 
> 标签：python, multithreading, asynchronous, twisted

我正在编写一个 NAT 的实现。我的算法如下：

1.  数据包进来
2.  如果是外部的，则检查查找表，如果是内部的，则添加到查找表
3.  交换源地址并在途中发送数据包

我一直在阅读关于 Twisted 的文章。我很好奇 Twisted 是否利用了多核 CPU？假设系统有数以千计的用户，一个数据包紧随其后。使用twisted，查找表操作可以在每个内核上同时进行。我听说 GIL 无论如何都不允许这样做。也许我可以从多处理中受益>

Nginix 是异步的，可以愉快地同时为成千上万的用户提供服务。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T05:51:06.800

不鼓励使用扭曲的线程。它在异步使用时具有非常好的性能，但是您为请求处理程序编写的代码不能阻塞。因此，如果您的处理程序是一段相当大的代码，请将其分解为更小的部分，并利用twisted 的著名`Deferreds`功能通过回调附加其他部分。它当然需要与大多数程序员习惯的有所不同的思维方式，但它有好处。如果代码有阻塞部分，比如数据库操作，或者通过网络访问其他资源以获得一些结果，请尝试为这些任务找到异步库，这样你也可以`Deferreds`在这些情况下使用。如果您不能使用异步库，您最终可能会使用该`deferToThread`函数，该函数将在不同的线程中运行您要调用的函数并返回一个`Deferred`为它，并在完成后触发你的回调，但最好将其用作最后的手段，如果没有别的办法。

以下是官方教程`Deferreds`：

[http://twistedmatrix.com/documents/10.1.0/core/howto/deferredindepth.html](http://twistedmatrix.com/documents/10.1.0/core/howto/deferredindepth.html)

还有另一个很好的指南，它可以帮助习惯于在“异步模式”下思考：

[http://ezyang.com/twisted/defer2.html](http://ezyang.com/twisted/defer2.html)

# c# - Visual Studio 2008 输出窗口 UTF-8 字符显示

> ID：13112988
> 
> 赞同：2
> 
> 时间：2012-10-28T21:02:01.710
> 
> 标签：c#, visual-studio-2008

如何在 Visual Studio 2008 输出窗口中编写 UTF-8 Char (Ş,İ, 阿拉伯字母)？

# java - Java map 替换一对一

> ID：13112989
> 
> 赞同：3
> 
> 时间：2012-10-28T21:02:12.100
> 
> 标签：java, regex, replace

例如，我有一个 String`"PARAMS @ FOO @ BAR @"`和 String 数组`{"one", "two", "three"}`。

您将如何将数组值一对一映射到字符串（替换标记），这样最后我会得到：`"PARAMS one, FOO two, BAR three"`.

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T21:04:35.937

你可以做

```
String str =  "PARAMS @ FOO @ BAR @";
String[] arr = {"one", "two", "three"};

for (String s : arr)
    str = str.replaceFirst("@", s); 
```

在此之后，`str`将举行`"PARAMS one FOO two BAR three"`。当然，要包含逗号，您可以替换为`s + ","`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T21:07:54.657

你也可以这样做： -

```
 String str = "PARAMS @ FOO @ BAR @";
    String[] array = new String[]{"one", "two", "three"};
    String[] original = str.split("@");

    StringBuilder builder = new StringBuilder();

    for (int i = 0; i < array.length; i++) {
        builder.append(original[i]).append(array[i]);
    }
    System.out.println(builder.toString()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T12:08:07.883

注意 - 类 String: 中非常有用的方法[`String.format`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#format%28java.lang.String,%20java.lang.Object...%29)。它有助于非常简洁地解决您的问题：

```
String str = "PARAMS @ FOO @ BAR @";
String repl = str.replaceAll( "@", "%s" ); // "PARAMS %s FOO %s BAR %s"
String result = String.format( repl, new Object[]{ "one", "two", "three" }); 
// result is "PARAMS one FOO two BAR three" 
```

# meteor - 如何在流星中使用回调？

> ID：13112995
> 
> 赞同：0
> 
> 时间：2012-10-28T21:02:46.390
> 
> 标签：meteor

我创建了一个助手，用于在我的 Meteor 应用程序（在咖啡脚本中）中显示通用模式。

这是 modal.coffee：

```
showModal = (modalType, title, body, callback) ->
  validModals = [ "Error", "YesNo" ]

  if not modalType in validModals
    alert "Invalid modal type specified"    # @todo - find a better way of handling this error

  Session.set "modalType", modalType
  Session.set "modalTitle", title or ""
  Session.set "modalBody", body or ""
  modalCallback = callback or undefined
  Session.set "showModal", true

Template.modal.title = () ->
  Session.get "modalTitle"

Template.modal.body = () ->
  Session.get "modalBody"

Template.modal.response = () ->
  switch Session.get "modalType" 
    when "Error"
      [{
        css: 'cancel',
        message: 'OK'
      }]
    when "YesNo"
      [
        {
          css: 'cancel',
          message: "No"
        },
        {
          css: 'btn-primary',
          message: "Yes"
        },
      ]

Template.page.shouldShowModal = () ->
  Session.get "showModal"

Template.modal.events {
  'click .cancel': ->  
    Session.set "showModal", false
    cb = modalCallback
    alert "here " + cb
    if cb
      cb(false)
  'click .btn-primary': ->
    Session.set "showModal", false
    cb = Session.get "modalCallback"
    if cb
      cb(true)
} 
```

模板很无聊。

这是我的客户端代码（在这个助手的调用者中）：

```
Template.details.events {
  'click .remove': () ->
    showModal "YesNo", 
      "Are you sure you want to delete this item?", 
      "Deleting an items can't be undone. Are you sure you want to delete?", 
      (response) =>
        if response
          Items.remove this._id, (err) =>
            if err
              showModal "Error", "Error removing item", err.reason

    return false;
} 
```

我无法让它执行回调。我看到的所有示例最终都将所有内容都放入了会话中，但显然它无法将函数转换为 json，因此当用户单击确定或取消按钮时，它无法正确反序列化它。

当用户响应我的模式时，我如何执行回调？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T16:09:53.247

当事人的例子展示了另一种我喜欢的模式。使用会话变量来显示/隐藏对话框/模式，并将回调放在模板事件处理程序中。

例如，请参阅此处的inviteDialog 模板： [https ://github.com/meteor/meteor/blob/master/examples/parties/client/parties.html#L194](https://github.com/meteor/meteor/blob/master/examples/parties/client/parties.html#L194)

此会话变量控制其可见性： [https ://github.com/meteor/meteor/blob/master/examples/parties/client/parties.html#L15](https://github.com/meteor/meteor/blob/master/examples/parties/client/parties.html#L15)

这是一个回调： [https ://github.com/meteor/meteor/blob/master/examples/parties/client/client.js#L257](https://github.com/meteor/meteor/blob/master/examples/parties/client/client.js#L257)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T06:46:59.973

我认为您所拥有的代码的问题在于该变量`modalCallback`是函数的本地变量（毕竟这是coffeescript）。

但是，您可能已经意识到，这种方法并不是真正的正确方法。问题是因为回调没有被保存在全局变量之外的任何地方，它会在热代码推送的情况下丢失。（即在对话框打开时尝试保存流星项目中的文件，然后查看随后关闭它时会发生什么）。

这实际上是一个非常好的问题，我一直在思考最好的方法。我现在最好的答案是使用*全局反应回调*。像这样的东西：

```
Meteor.autorun(function() {
  if (Session.equals('lastDialog', 'alert-dialog') && 
      Session.equals('dialogOpen', false) && 
      Session.equals('lastDialogSuccess', true)) {
    alert("I'm alerting");

    // ensure it doesn't happen again, e.g. on another HCP
    Session.set('lastDialog', null);
  }
}); 
```

该代码需要位于顶层，因此它可以在 HCP 上重新运行。看看我设置的这个项目，试图找出更好的方法： [https ://github.com/tmeasday/dialog-experiment/tree/global-reactivity](https://github.com/tmeasday/dialog-experiment/tree/global-reactivity)

也许更好的答案是“以更具声明性/反应性的方式以不同的方式做事”。我不确定。

# python - Python的urllib.urlencode的逆运算？

> ID：13112996
> 
> 赞同：0
> 
> 时间：2012-10-28T21:02:48.527
> 
> 标签：python

> **可能重复：**
> [Python，相反的函数 urllib.urlencode](https://stackoverflow.com/questions/3542881/python-opposite-function-urllib-urlencode)

我有一个 url 字符串，它已经用 key=value 对和 &'s 格式化，由 urllib 的 urlencode 函数创建。是否有一个标准的 Python 库实用程序来扭转这个过程？那是：

给定一个表示 url 的字符串，返回一个包含基本 url 的字符串和一个包含 url 中键值对的字典。

我可以自己编写一个简单的解决方案，为合理的 url 执行此操作，但我认为任意 url 可能会发生奇怪的事情。那么是否有一个标准库函数可以安全地做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T21:05:48.633

内置[`urlparse`](http://docs.python.org/2/library/urlparse.html)做你想要的：

```
>>> bits = urlparse.urlparse('http://www.example.com/foo?bar=zoo&a=b')
>>> bits.query
'bar=zoo&a=b'
>>> urlparse.parse_qs(bits.query)
{'a': ['b'], 'bar': ['zoo']} 
```

# iphone - NSBundle pathForResource:ofType: 偶尔会为一个资源返回 nil

> ID：13112998
> 
> 赞同：4
> 
> 时间：2012-10-28T21:02:59.447
> 
> 标签：iphone, ios

通常当尝试通过它在我的应用程序中加载特定资源`[[NSBundle mainBundle] pathForResource:@"iphone" ofType:@"splang"]`时工作正常，但每隔一段时间就会返回 nil 。有问题的 iphone.splang 文件是一个约 275 KB 的文本文件，它肯定与应用程序捆绑在一起（通常可以加载就证明了这一点）。

我已经验证它是 pathForResource:ofType: 返回 nil，而不是 mainBundle 方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T11:40:30.977

这可能是国际化的问题。根据[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSBundle_Class/Reference/Reference.html)， pathForResource 仅在找不到文件时才返回 nil 。但它也说：

> 该方法首先在指定包的非本地化资源目录中查找匹配的资源文件。[...] 如果找不到匹配的资源文件，它会在任何可用的特定语言“.lproj”目录的顶层查找。（特定语言目录的搜索顺序与用户的偏好相对应。）它不会在这些位置的任何其他子目录中递归。

也许您正在使用不同语言或模拟器的不同机器上尝试您的代码。

此外，`[NSBundle mainbundle]`可以返回 nil，因此对其执行任何调用也将返回 nil。

> [...] 请务必检查返回值以确保您拥有有效的捆绑包。