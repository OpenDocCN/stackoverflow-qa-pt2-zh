# StackOverflow 问答 13354000-13354999

# javascript - 在开发环境中全页加载时加快 Rails 加载 Backbone Javascript 资产的方法？

> ID：13354002
> 
> 赞同：2
> 
> 时间：2012-11-13T00:40:04.510
> 
> 标签：javascript, ruby-on-rails, backbone.js

我正在开发一个 Rails 3.2.6 + Backbone 应用程序，从 app/assets/javascripts 提供的 Javascript 文件的数量约为 91 个单独的文件（有很多子视图）。在开发环境中，这些资产当然不会捆绑在一起，因此每个资产都由 Rails 单独提供（使用 WEBrick 或 Thin），预期 304 Not Modified 因为它们被缓存了。

问题是：这对于开发迭代期间的整页重新加载已经开始变得非常繁重。从刷新到准备好 DOM 大约需要 13 秒，这对于快速开发来说是相当不利的，尤其是在更改大量 JS 和 CSS 时。而且我很确定这是唯一真正的瓶颈，因为我可以在终端中看到 Rails 登录，看到每个资产经过，如下所示：

> 在 2012-11-12 15:39:25 -0800 开始 GET "/assets/views/simple_dialog.js?body=1" for 127.0.0.1 服务资产 /views/simple_dialog.js - 304 未修改 (0ms)

有没有办法加快这个过程？我知道总会有取舍，但即使我能把它缩短到 6-7 秒，这也是一个巨大的进步。我知道 Sprockets 据说在 Rails 4 中得到了很多速度提升，但我正在寻找短期内的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T04:48:13.303

也许尝试以下方法：

*   在 config/environments/development.rb 中，设置`config.assets.debug = false`（参见： http: [//guides.rubyonrails.org/asset_pipeline.html#turning-debugging-off](http://guides.rubyonrails.org/asset_pipeline.html#turning-debugging-off)）。这将导致您的文件被合并到单个 application.js 文件中，这应该通过不需要如此大量的单独 HTTP 请求来减少加载时间。
*   尝试使用[rails-dev-tweaks](https://github.com/wavii/rails-dev-tweaks "rails-dev-tweaks") gem。它可以帮助加快对资产文件的请求。

希望这可以帮助！

# php - 如何解码这个 PHP？

> ID：13354003
> 
> 赞同：-2
> 
> 时间：2012-11-13T00:40:17.937
> 
> 标签：php, character-encoding

我正在尝试解码这个“快速”。我确实了解代码是如何工作的，5=e 等，但我将不得不重新编码我的更改，所以我想知道是否有人知道如何使用某种网络工具来解码？也许 ？

```
 ?><?php
/**
 * Th5 t5mpl1t5 f2r d4spl1y4ng th5 f22t5r.
 *
 * C2nt14ns th5 cl2s4ng 2f th5 4d=p1g5 d4v 1nd 1ll c2nt5nt 1ft5r
 *
 * @p1ck1g5 W2rdPr5ss
 */
?>

    </d4v> <!-- 5nd d4v #p1g5-4nn5r -->
    </d4v> <!-- 5nd d4v #p1g5 -->
    <!-- END PAGE -->

    <?php g5t_t5mpl1t5_p1rt( 'b2tt2m-m5n3' ); // o-C2l3mn B2tt2m M5n3 (b2tt2m-m5n3.php) ?>

    <!-- BEGIN FOOTER -->
    <d4v 4d="f22t5r">
    <d4v 4d="f22t5r-4nn5r" cl1ss="cl51rf4x">

        <d4v 4d="f22t5r-l5ft">
            <p>Th5m5 by <1 hr5f="http://s3v.r5v45w4t2nl4n5.n5t/" t4tl5="B5st SUV">B5st SUV</1><br />
            <1 hr5f="http://s3v.r5v45w4t2nl4n5.n5t/f35l-5ff4c45nt-s3vs/" t4tl5="F35l Eff4c45nt SUVs">F35l Eff4c45nt SUVs</1> | <1 hr5f="http://s3v.r5v45w4t2nl4n5.n5t/k41-s3v/" t4tl5="K41 SUV">K41 SUV</1> | <1 hr5f="http://s3v.r5v45w4t2nl4n5.n5t/bmw-s3v/bmw-xe-m/" t4tl5="BMW Xe M">BMW Xe M</1></p>
        </d4v> <!-- 5nd d4v #f22t5r-l5ft -->

        <d4v 4d="f22t5r-r4ght">
            <p>&c2py; <?php 5ch2 d1t5('Y');?> <1 hr5f="<?php bl2g4nf2('s4t53rl');?>/" t4tl5="<?php bl2g4nf2('n1m5');?>" ><?php bl2g4nf2('n1m5');?></1></p>
        </d4v> <!-- 5nd d4v #f22t5r-r4ght -->

    </d4v> <!-- 5nd d4v #f22t5r-4nn5r -->
    </d4v> <!-- 5nd d4v #f22t5r -->
    <!-- END FOOTER -->

</d4v> <!-- 5nd wr1pp5r -->

<?php wp_f22t5r(); ?>

</b2dy>
</html 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T00:44:13.107

在命令行上很简单：

```
cat script.php | tr 12345 aouie 
```

但这显然只会替换字符而不查看上下文。所以肯定会导致错误的结果。可能只适用于那个小片段。

没有像这样的自定义 leetpeak 编码的自动化工具。无论如何，那个无效的 HTML 应该如何工作超出了我的范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T00:56:50.987

您可以使用[str_replace()](http://php.net/manual/en/function.str-replace.php)

```
$str = <<<html
<?php
/**
 * Th5 t5mpl1t5 f2r d4spl1y4ng th5 f22t5r.
 *
 * C2nt14ns th5 cl2s4ng 2f th5 4d=p1g5 d4v 1nd 1ll c2nt5nt 1ft5r
 *
 * @p1ck1g5 W2rdPr5ss
 */
?>

    </d4v> <!-- 5nd d4v #p1g5-4nn5r -->
    </d4v> <!-- 5nd d4v #p1g5 -->
    <!-- END PAGE -->

    <?php g5t_t5mpl1t5_p1rt( 'b2tt2m-m5n3' ); // o-C2l3mn B2tt2m M5n3 (b2tt2m-m5n3.php) ?>

    <!-- BEGIN FOOTER -->
    <d4v 4d="f22t5r">
    <d4v 4d="f22t5r-4nn5r" cl1ss="cl51rf4x">

        <d4v 4d="f22t5r-l5ft">
            <p>Th5m5 by <1 hr5f="http://s3v.r5v45w4t2nl4n5.n5t/" t4tl5="B5st SUV">B5st SUV</1><br />
            <1 hr5f="http://s3v.r5v45w4t2nl4n5.n5t/f35l-5ff4c45nt-s3vs/" t4tl5="F35l Eff4c45nt SUVs">F35l Eff4c45nt SUVs</1> | <1 hr5f="http://s3v.r5v45w4t2nl4n5.n5t/k41-s3v/" t4tl5="K41 SUV">K41 SUV</1> | <1 hr5f="http://s3v.r5v45w4t2nl4n5.n5t/bmw-s3v/bmw-xe-m/" t4tl5="BMW Xe M">BMW Xe M</1></p>
        </d4v> <!-- 5nd d4v #f22t5r-l5ft -->

        <d4v 4d="f22t5r-r4ght">
            <p>&c2py; <?php 5ch2 d1t5('Y');?> <1 hr5f="<?php bl2g4nf2('s4t53rl');?>/" t4tl5="<?php bl2g4nf2('n1m5');?>" ><?php bl2g4nf2('n1m5');?></1></p>
        </d4v> <!-- 5nd d4v #f22t5r-r4ght -->

    </d4v> <!-- 5nd d4v #f22t5r-4nn5r -->
    </d4v> <!-- 5nd d4v #f22t5r -->
    <!-- END FOOTER -->

</d4v> <!-- 5nd wr1pp5r -->

<?php wp_f22t5r(); ?>

</b2dy>
</html>
html;

$find    = array(1,2,3,4,5);
$replace = array('a','o','u','i','e');
echo highlight_string(str_replace($find,$replace,$str),true); 
```

结果：

```
<?php
/**
 * The template for displaying the footer.
 *
 * Contains the closing of the id=page div and all content after
 *
 * @package WordPress
 */
?>

    </div> <!-- end div #page-inner -->
    </div> <!-- end div #page -->
    <!-- END PAGE -->

    <?php get_template_part( 'bottom-menu' ); // o-Column Bottom Menu (bottom-menu.php) ?>

    <!-- BEGIN FOOTER -->
    <div id="footer">
    <div id="footer-inner" class="clearfix">

        <div id="footer-left">
            <p>Theme by <a href="http://suv.reviewitonline.net/" title="Best SUV">Best SUV</a><br />
            <a href="http://suv.reviewitonline.net/fuel-efficient-suvs/" title="Fuel Efficient SUVs">Fuel Efficient SUVs</a> | <a href="http://suv.reviewitonline.net/kia-suv/" title="Kia SUV">Kia SUV</a> | <a href="http://suv.reviewitonline.net/bmw-suv/bmw-xe-m/" title="BMW Xe M">BMW Xe M</a></p>
        </div> <!-- end div #footer-left -->

        <div id="footer-right">
            <p>&copy; <?php echo date('Y');?> <a href="<?php bloginfo('siteurl');?>/" title="<?php bloginfo('name');?>" ><?php bloginfo('name');?></a></p>
        </div> <!-- end div #footer-right -->

    </div> <!-- end div #footer-inner -->
    </div> <!-- end div #footer -->
    <!-- END FOOTER -->

</div> <!-- end wrapper -->

<?php wp_footer(); ?>

</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T00:44:45.490

看起来只是小写元音正在被替换。

```
1=a
2=o
3=u
4=i
5=e 
```

只需在您的文本编辑器中搜索和替换，这样您就可以查看上下文（即，它确实不是数字 1-5）。

# api - 使用 Valence 获取用户数据

> ID：13354010
> 
> 赞同：0
> 
> 时间：2012-11-13T00:41:05.257
> 
> 标签：api, rest, desire2learn

根据文档，我可以通过调用获取用户数据：

```
GET /d2l/api/lp/1.0/users/ 
```

我可以使用 d2lId、用户名或书签参数。我只是通过将用户名字符串附加到 uri 来尝试过这个，但它没有用。uri 是否需要参数名称才能了解我提交给查询的参数？即 ?username="someUsername"

请注意，我已经能够通过简单地将 d2lId 附加到 uri 来返回用户特定的数据，因此 API 访问不是问题。LE 版本也不是问题——我使用的是 > 9.4.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:09:13.993

您将两个不同的电话混为一谈，这就是混乱的根源。[您的问题中提到的对路线](http://docs.valence.desire2learn.com/res/user.html#get--d2l-api-lp-%28D2LVERSION-version%29-users-)的[调用`users/`](http://docs.valence.desire2learn.com/res/user.html#get--d2l-api-lp-%28D2LVERSION-version%29-users-)是为所有用户取回数据（在数据页面中）：

*   `orgDefinedId`-- 提供一个组织定义的标识符，并寻找与之匹配的
*   `userName`-- 提供一个用户名，并寻找与之匹配的
*   `bookmark`-- 提供获取下一个数据页所需的书签

因此，在您的示例中，API 调用可能如下所示：

```
GET /d2l/api/lp/1.0/users/?userName=Bob%20Roberts 
```

请注意，还有一条路径可以获取由 LMS UserId 值标识[的特定用户的用户数据：](http://docs.valence.desire2learn.com/res/user.html#get--d2l-api-lp-%28D2LVERSION-version%29-users-%28D2LID-userId%29)

```
GET /d2l/api/lp/1.0/users/123456 
```

但这些实际上是两种不同的 REST 路由。您不能将 LMS UserId 用作`users/`路由的过滤器...

# jquery - 我已经成功地让图像推子只与标签一起使用，但不能让它与标签一起使用

> ID：13354016
> 
> 赞同：0
> 
> 时间：2012-11-13T00:41:55.457
> 
> 标签：jquery, html

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T00:48:44.740

您编写的代码中有一些语法错误。

```
does this line of code "var count = showing.parent().parent();" 
point to the div #slider 
```

是的，它指向滑块 div。

更好的 ..`showing.closest('div');`

我认为这没有任何意义

```
showing.parent().parent().next().children(':second'); 
```

根据上面的HTML，这将获得**不存在**的***第二个孩子..***`next div`

 **也`closest('#Slider').children(':second');`没有任何意义。。

**完整代码**..经过一些假设

```
function slideShow() {

    var showing = $('#slider .is-showing');
    var count = showing.closest('div');

    var next = count.next('div').length 
                ? showing.closest('div').next('div').children(':first') 
                :  count.find('img');

    showing.fadeOut(800, function() {
        next.fadeIn(800).addClass('is-showing');
    }).removeClass('is-showing');

    setTimeout(slideShow, 5000);
}​ 
```

**更新**

> 你说下一个 div 不存在，

我的意思是说`.children(':second');` 没有任何意义（不是 div 上的下一个），因为每个 div 只有一个子元素，即锚元素。.children() 将获得直接的孩子而不是嵌套的孩子..

> 第一张图片是一个“正在展示”的类，然后他使用 .next() 来获取下一个 img 元素

这对上面的 HTML 不起作用，因为 next 会得到直接的兄弟，当你对图像执行 .next() 时，你什么也得不到，因为图像没有兄弟。

> 为什么我们要在淡入淡出函数中添加和删除类（正在显示）

因为淡出功能是异步的..所以你需要在回调中做到这一点。否则会立即反映。**

# methods - Java程序使用参数和方法的麻烦

> ID：13354017
> 
> 赞同：-5
> 
> 时间：2012-11-13T00:42:14.707
> 
> 标签：methods

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T00:47:49.603

像所有初学者一样，您没有将问题分解成足够小的块，从而使问题变得太难了。

忘记用户输入和界面。获取使用您知道答案的硬连线输入的基本求解器算法。编写它，测试它，然后把它放在一边。然后开始开发另一个只处理获取输入值并将它们传递给实际工作的类的类。

当您发现自己被太多细节所淹没时，请将问题简化为您可以处理的较小部分。然后将它们编织在一起以解决您更大的问题。

这是调用分解。它是解决所有问题的基础，尤其是编程和计算机科学。

看在上帝的份上，它正在求解一个二次方程。豹？不必要的混乱。

不要被名字所迷惑。忘记所有花哨的输出，让基础求解器正常工作。有一些特殊情况您需要关注：

1.  两个真正的根源。
2.  一个零根，一个实根。
3.  两个复共轭根。

# javascript - 如何在 JQuery 中伪造 AJAX 开始/结束事件？

> ID：13354020
> 
> 赞同：4
> 
> 时间：2012-11-13T00:42:27.880
> 
> 标签：javascript, jquery

我正在听 ajaxStart() 和 ajaxStop() 来显示/隐藏一个微调器，并且在编写服务器时我正在 JS 中做一些模拟 AJAX 的东西。它只是调用一个函数来使用 setTimeout() 生成模拟数据。现在我只是在微调器上手动调用 hide() 和 show()，但我真的很想在我开始和停止我的“请求”时告诉 JQuery，并让事件通过这种方式，因此，当*真正的*ajax 请求仍在后台运行时，我不会意外地隐藏（）微调器。

这可以轻松完成吗？

**编辑：**这是我确定的代码，诀窍是保持`JQuery.active`计数：

```
function fakeAJAX(f) {
    if(jQuery.active++ === 0 ) {
        jQuery.event.trigger("ajaxStart");
    }
    setTimeout(function () {
        f();
        if(!(--jQuery.active)) {
            jQuery.event.trigger("ajaxStop");
        }
    }, Math.round(Math.random() * 3000 + 250));
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T00:49:36.437

根据您只需要调用的[来源：](https://github.com/jquery/jquery/blob/master/src/ajax.js#L604)

```
jQuery.event.trigger( "ajaxStart" ); 
```

和

```
jQuery.event.trigger( "ajaxStop" ); 
```

相应地。

[http://jsfiddle.net/zerkms/7RVbz/](http://jsfiddle.net/zerkms/7RVbz/)

# python - RegexValidator 不允许在 CharField 中使用 0-9

> ID：13354022
> 
> 赞同：3
> 
> 时间：2012-11-13T00:42:45.530
> 
> 标签：python, regex, django

我想*只*允许输入 Django 的所有字符使用 0-9 字符`CharField`。

当我`RegexValidator()`使用`regex = r'[^0-9]'`. 我可以在该字段中输入*除*0-9 之外的所有内容。实际上，它允许我输入像`"word"`, `"a4523"`, `"!#$%#^%"`, and之类的字符串`"5432bc"`，但*不能* `"4523"`。

如果我取出`^`and 设置`regex = r'[0-9]'`（见下面的代码），那么我*可以*输入`"4523"`, `"5432bc"`, and`"a4523"`但*不能* `"word"`输入or `"!#$%#^%"`。

删除`^`似乎让我朝着正确的方向前进，但不是完整的方式。我不想使用 a`PositiveSmallIntegerField`因为我想将数字输入视为字符串。

```
class Number(models.Model):
    number = models.CharField(
        max_length=14,
        validators=[
            RegexValidator(
                r'[0-9]',
                'Only 0-9 are allowed.',
                'Invalid Number'
            ),
            MinLengthValidator(4),
            MaxLengthValidator(14),
        ],
    ) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T00:55:38.990

正则表达式`[^0-9]`意味着匹配字符串中任意位置的非数字。您可能打算以 开头`^[0-9]`，这需要在字符串的开头有一个数字。对于一个完整的解决方案，我想你想要`^[0-9]*$`，它要求字符串中的所有字符都是数字。

# clang - 对于 Xcode 4.5.2，Clang 编译器似乎不依赖于 SDK 版本。为什么？

> ID：13354029
> 
> 赞同：2
> 
> 时间：2012-11-13T00:43:49.967
> 
> 标签：clang, xcode4.5

在 Xcode 4.4 和更早的版本中，每个 SDK 过去都有一个 Clang 编译器的副本或符号链接，可在

```
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/
    SDKs/iPhoneOS${IPHONE_SDKVERSION}.sdk/usr/bin/clang++ 
```

对于 Xcode 4.5.2，上述路径中没有 Clang 编译器。但是，我在

```
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang 
```

**b) 为什么它不再依赖于 SDK 版本？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-15T22:19:05.773

这是因为 clang 可以使用单个（顶级）二进制文件编译多个架构。以前基于 gcc 的工具链需要每个拱一个 gcc。

看看[macosx下如何用arch armv7s编译libcurl？](https://stackoverflow.com/questions/12636315/how-to-compile-libcurl-with-arch-armv7s-under-macosx)例如将拱标志传递给铿锵声。

此外，您可以使用 xcrun 来查找您的工具，而不是硬编码它们的位置。例如，针对 iOS 进行交叉编译时：

```
export CC=`xcrun --sdk iphoneos --find clang` 
```

# orm - Coldfusion ORM EntityToQuery NullPointerException

> ID：13354030
> 
> 赞同：0
> 
> 时间：2012-11-13T00:43:55.823
> 
> 标签：orm, coldfusion, nullpointerexception, coldfusion-9

我收到一个错误：

> java.lang.NullPointerException

当我打电话时：

```
<cfdump var="#posts#" top="2">
<cfset postsQuery = EntityToQuery(posts)> 
```

转储帖子应显示一组对象，但由于某种原因，EntityToQuery(posts) 正在中断。该错误消息不是告诉您它在哪一行中断等的正常消息之一。它只是以下结构：

```
message:      [empty string]
StackTrace:   java.lang.NullPointerException 
TagContext:   array[empty]
Type:         java.lang.NullPointerException 
```

有谁知道可能导致这种情况的原因？我认为它的数据相关，但我不知道要寻找什么。它只发生在此代码的一个实现上，而不是我正在处理的其他代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T02:28:07.370

下次重新启动冷融合服务时，奇怪的错误就停止了。

因此，如果其他人有这个问题....尝试重新启动 cf

# javascript - 提交表单时使用其他分隔符（不是 & 和 =）

> ID：13354034
> 
> 赞同：1
> 
> 时间：2012-11-13T00:44:30.833
> 
> 标签：javascript

> **可能重复：**
> [如何获取查询字符串值？](https://stackoverflow.com/questions/901115/how-can-i-get-query-string-values)
> [提交表单时如何更改 URL 的编码方式？](https://stackoverflow.com/questions/13353539/how-to-change-how-the-url-is-encoded-when-a-form-is-submitted)

我有我有表格的网站，当我按下按钮的发送时。发送时我想对提交进行编程，因为我想使用其他分隔符`&`和`=`. 这个有可能？

现在我写一个例子：

```
www.theuser.com/?Name=IBM&surname=PC 
```

如果发送时可编程功能

```
www.thepc.com/?Name%24+IBM+%23%+Surname%24+PC 
```

重复：当我发送参数时，我不想要这个分隔符`&`，或者`=`我想使用其他分隔符。

此查询字符串是我的项目的原始内容：

```
http://localhost:8100/index2?json_data=demo_title%24+Demo+title+%23+proc1_script%24+script.sh+parameters+%23+proc1_chk_make%24+on+%23+outputp2_value%24++%23+demo_input_description%24+hola+mundo+%23+outputp4_visible%24+on+%23+outputp4_info%24++%23+inputdata1_max_pixels%24+1024000+%23+tag%24++%23+outputp1_id%24+nanana+%23+proc1_src_compresion%24+zip+%23+proc1_chk_cmake%24+off+%23+outputp3_description%24++%23+outputp3_value%24++%23+inputdata1_description%24+input+data+description+%23+inputp2_description%24+bien%3F+%23+inputp3_description%24+funciona+%23+proc1_cmake%24+-D+CMAKE_BUILD_TYPE%3Astring%3DRelease++%23+outputp2_visible%24+on+%23+outputp3_visible%24+on+%23+outputp1_type%24+header+%23+inputp1_type%24+text+%23+demo_params_description%24+va+bien+%23+outputp1_description%24++%23+inputdata1_type%24+image2d+%23+proc1_chk_script%24+off+%23+demo_result_description%24+win%3F+%23+outputp2_id%24+nanfdsvfa+%23+inputp1_description%24+funciona+%23+demo_wait_description%24+boh+%23+outputp4_description%24++%23+inputp2_type%24+integer+%23+inputp2_id%24+papapa+%23+outputp1_value%24++%23+outputp3_id%24+nananartrtrt+%23+inputp3_id%24+pepepe+%23+outputp3_type%24+header+%23+inputp3_visible%24++off+%23+outputp1_visible%24+on+%23+inputdata1_id%24+id_lsd+%23+outputp4_value%24++%23+inputp2_visible%24+on+%23+proc1_source%24+lsd-1.5.zip+%23+inputp3_value%24+si+%23+proc1_make%24+-j4+-C++%23+images_config_file%24+cfgmydemo.cfg+%23+outputp2_type%24+header+%23+proc1_subdir%24+xxx-1.5+%23+proc1_url%24+http%3A%2F%2Fwww.ipol.im%2Fpub%2Falgo%2F...+%23+inputdata1_image_depth%24+1x8i+%23+inputp1_id%24+popopo+%23+inputp1_value%24+si+%23+inputp2_value%24+no+%23+demo_data_filename%24+data_saved.cfg+%23+inputdata1_info%24+info_lsd+%23+outputp3_info%24++%23+inputdata1_image_format%24+.pgm+%23+outputp1_info%24++%23+inputdata1_compress%24+False+%23+inputp1_visible%24+on+%23+proc1_id%24+lsd+%23+outputp4_id%24+nana+%23+outputp2_description%24++%23+outputp4_type%24+header+%23+outputp2_info%24++%23+inputp3_type%24+float+%23+&tag=&inputp4_id=hi&inputp4_type=text&inputp4_description=hello+program&inputp4_value=no&inputp4_info=bol&inputp4_visible=on 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T00:58:45.580

**tldr;** 编码是“正确的”；*然而*..

..错误地对完整 URL 进行了*百分比编码。*

*只对组件*（键和值）进行编码，而不是完整的 URL 或像这样的乱码。

`=`和`&`字符是URL 查询部分中的[有效保留字符](http://www.ietf.org/rfc/rfc3986.txt)，不应进行编码。

# validation - WADL 文件的验证

> ID：13354036
> 
> 赞同：9
> 
> 时间：2012-11-13T00:44:36.223
> 
> 标签：validation, wadl

有没有办法验证给定的 WADL 文件？

针对 XML Schema 进行验证不会捕获所有错误，因为这不会捕获诸如具有错误样式或未定义类型的方法参数之类的错误。

我还尝试了 apache cxf 中的命令行工具 WADL2java，但这并没有捕获所有违反 wadl 规范的行为——即使它会捕获所有错误，仅为了验证而生成代码似乎是不必要的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-07-29T18:51:07.393

1.  [使用 xsd](http://www.freeformatter.com/xml-validator-xsd.html)导航到在线 xml 验证器
2.  将您的 wadl xml 复制粘贴到“XML 输入选项 1”文本字段中
3.  [将此](https://www.w3.org/Submission/wadl/wadl.xsd)url粘贴到“XSD Input Option 2”文本字段中：
4.  单击“验证 XML”

# ajax - 下载src属性的图片（base64）

> ID：13354037
> 
> 赞同：3
> 
> 时间：2012-11-13T00:44:37.037
> 
> 标签：ajax, image, base64

通过 AJAX，我收到了 base64 中的图像，我将其附加到 img 标签的 src 属性。

我想提供一个下载该图像的选项，是否可以获取 src 属性的数据并下载它？这是因为我无法再次从服务器下载图像。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T00:48:31.633

只需将 设置`window.location`为编码的 URI（或打开一个弹出窗口），例如

```
window.location.href = 'data:image/png;base64,iVBORw0KGgo.... 
```

# java - 在不使构造函数混乱的情况下避免全局状态

> ID：13354044
> 
> 赞同：0
> 
> 时间：2012-11-13T00:45:36.603
> 
> 标签：java, architecture, singleton, dependencies, decoupling

我有一个需要重构的项目。它是一个 Java 桌面 SWT/JFace 应用程序，具有大约 40 个 GUI 组件，主要组件控制次要组件的生命周期。我想拥有低耦合的良好模块化设计，但是如果没有很长的构造函数，我找不到避免全局状态的方法。

例如，当前软件国际化的方法是这样的：

```
public class Main {
    public static void main(String[] args) {
        MyMessages.loadMessages();
    }
}
public class MyMessages {
    private static ResourceBundle messages;
    public static void loadMessages() {
        messagesBundle = ResourceBundle.getBundle("messages", "en");
    }

    public static void getMessage(String m) {
        return messagesBundle.getString(m);
    }
}

public class SomeComponent extends Component() {
    public void init() {
        String textboxLabel = MyMessages.getMessage("someMessage");
    }
} 
```

代码中的其他地方使用单例（用于数据模型），这使得随着代码库的增长很难分析依赖关系。

另一种方法是使`MyMessages`有状态的并通过 GUI 组件的层次结构一直传递它的实例。对我来说，与感知到的好处相比，这似乎很混乱，容易出错并且不值得麻烦。

还有什么其他方法可以设计成这样：

*   不依赖于本质上是全局变量。
*   使依赖关系明确。
*   不会用冗长的构造函数弄乱代码。

我应该考虑依赖注入框架，还是有另一种对小型桌面应用程序来说似乎并不过分的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T02:44:30.873

> 我应该考虑依赖注入框架，还是有另一种对小型桌面应用程序来说似乎并不过分的方法？

对于小型桌面应用程序，我建议使用依赖注入设计模式，但不要使用工业强度的 DI 框架。

在您的代码中，消息帮助程序类是可以的，但是您的 SomeComponent 类绝对不是 DI 友好的：

```
public class SomeComponent extends Component() {
    public void init() {
        String textboxLabel = MyMessages.getMessage("someMessage");
    }
} 
```

SomeComponent 现在绑定到 MyMessages。

而是使用类似的东西：

```
public class SomeComponent extends Component() {

    public void setTextBoxLabel(String value) {
        // implementation depends on requirements
    }

    public void init() {
        // do something with all the properties that were set
    }
} 
```

基本上只需将设置器添加到您的组件。这是 DI 的第一部分。让你的所有类都是松散耦合的，每个类都相信有人会负责设置它的所有属性。不需要全局状态，因为组件所需的一切都将被注入其中。

当然，一旦您这样做了，您的启动代码将成为一场噩梦，因为您必须创建所有这些对象并设置它们的所有属性，并且它们都与您的应用程序相关联。此时您开始重构您的启动代码并创建负责为您创建对象的构建器和/或工厂。

假设其中一个组件由属性文件初始化。您创建一个构建器来读取属性文件、实例化组件、设置组件属性并返回实例。该组件对属性文件一无所知。它只是有一些它知道将在启动时设置的 getter 和 setter。

稍后您决定使用 XML 作为文件格式 - 但对于不同的应用程序，同时仍将属性文件用于第一个应用程序。没问题 - 创建一个读取 XML 文件并构建组件的新 XML 构建器 - 但实际的 GUI 组件保持不变，因为它与初始化的方式完全分离。

关键是审查[创建设计模式](http://en.wikipedia.org/wiki/Design_Patterns_%28book%29#Creational)并找出哪些模式（构建器、工厂等）可以帮助您可靠地创建组件，同时避免全局状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T01:02:42.490

我会使用全局状态。特别是如果您正在重用视图。恕我直言，对将在整个应用程序中大量使用的各种组件进行某种查找并没有错。

请注意，如果您使用 DI 框架，那么可能会隐式使用某种全局状态（当然，这是依赖于 DI 框架的实现）。以 Spring 为例，ApplicationContext 是一个全局对象，它本身将保留各种组件和/或管理组件的生命周期，具体取决于各种 bean 的配置。

拥有全局组件不一定是坏事。如果权衡是巨大的构造函数签名和传递引用，我会随时使用全局引用（我会把它们放在某种`Application`对象中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T01:05:15.463

使用 java logger api 怎么样...此外 StreamHandler 类可以扩展并将输出流设置为组件。您还可以跟踪消息和相关的类和方法。

# r - R流水线功能

> ID：13354048
> 
> 赞同：15
> 
> 时间：2012-11-13T00:46:11.377
> 
> 标签：r, pipeline

有没有办法在 R 中编写流水线函数，其中一个函数的结果立即传递到下一个函数？我来自 F#，非常欣赏这种能力，但还没有找到如何在 R 中做到这一点。它应该很简单，但我找不到方法。在 F# 中，它看起来像这样：

```
let complexFunction x =
     x |> square 
     |> add 5 
     |> toString 
```

在这种情况下，输入将被平方，然后添加 5，然后转换为字符串。我希望能够在 R 中做类似的事情，但不知道如何做。我已经搜索过如何做这样的事情，但没有遇到任何事情。我想要这个来导入数据，因为我通常必须导入它然后过滤。现在，我分多个步骤执行此操作，并且真的希望能够像在 F# 中使用管道那样做一些事情。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-13T01:40:59.613

这是一种使用`Reduce`. 这实际上是一个例子`?Reduce`

```
square <- function(x) x^2
add_5 <- function(x)  x+5
x <- 1:5
## Iterative function application:
Funcall <- function(f, ...) f(...)

Reduce(Funcall, list(as.character, add_5, square,x), right = TRUE)
## [1] "6"  "9"  "14" "21" "30" 
```

* * *

或者更简单地使用`functional`包和`Compose`

这很好，因为它将为您创建功能

```
library(functional)
do_stuff <-   Compose(square,add_5,as.character )
do_stuff(1:5)
##  [1] "6"  "9"  "14" "21" "30" 
```

* * *

我注意到我不会认为这两种方法中的任何一种都是惯用的`R`（如果这甚至是一个短语）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-13T02:52:00.110

我们可以`Compose`从功能包中使用来创建我们自己的二元运算符，它执行类似于您想要的操作

```
# Define our helper functions
square <- function(x){x^2}
add5 <- function(x){x + 5}

# functional contains Compose
library(functional)

# Define our binary operator
"%|>%" <- Compose

# Create our complexFunction by 'piping' our functions
complexFunction <- square %|>% add5 %|>% as.character
complexFunction(1:5)
#[1] "6"  "9"  "14" "21" "30"

# previously had this until flodel pointed out
# that the above was sufficient
#"%|>%" <- function(fun1, fun2){ Compose(fun1, fun2) } 
```

我想我们可以在不需要功能包的情况下从技术上做到这一点——但它感觉非常`Compose`适合用于这项任务。

```
"%|>%" <- function(fun1, fun2){
    function(x){fun2(fun1(x))}
}
complexFunction <- square %|>% add5 %|>% as.character
complexFunction(1:5)
#[1] "6"  "9"  "14" "21" "30" 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-13T00:57:58.567

我认为您可能只想编写一个函数来执行您想要的步骤。

```
complexFunction <- function(x) {
    as.character(x^2 + 5)
} 
```

然后只需调用`complexFunction(x)`.

* * *

编辑以显示*R*在内部做什么（@mnel）——`R`解析和评估的方式`as.character(x^2 + 5)`是你想要的

您可以使用`codetools`来调查什么`R` 来查看值是如何传递给彼此的

```
flattenAssignment(quote(as.character(x^2+5)))
[[1]]
[[1]][[1]]
x

[[1]][[2]]
`*tmp*`^2

[[1]][[3]]
`*tmp*` + 5

[[2]]
[[2]][[1]]
`as.character<-`(`*tmp*`, value = `*tmpv*`)

[[2]][[2]]
`+<-`(`*tmp*`, 5, value = `*tmpv*`)

[[2]][[3]]
`^<-`(x, 2, value = `*tmpv*`) 
```

或者您可以获取 Lisp 样式表示以查看它是如何解析的（以及传递的结果）

```
showTree(quote(as.character(x^2+5)))
(as.character (+ (^ x 2) 5)) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-01-14T14:57:17.983

自从提出这个问题以来，[magrittr](https://cran.r-project.org/package=magrittr)管道在 R 中变得非常流行。所以你的例子是：

```
library (magrittr)

fx <- function (x) {
     x %>%
     `^` (2) %>%
     `+` (5)  %>%
     as.character ()
     } 
```

请注意，反引号表示法是因为我实际上是在使用 R 的内置函数，我需要特别引用它们才能以这种方式使用它们。更通常命名的函数（比如`exp`或者如果我创建了一个辅助函数`add`）不需要反引号，并且看起来更像你的例子。

另请注意，`%>%`将传入值作为第一个参数自动传递给下一个函数，尽管您可以更改它。另请注意，R 函数返回计算的最后一个值，因此我不需要`return`或分配计算来返回它。

这很像其他答案定义的很好的特殊运算符，但它使用了现在在 R 中广泛使用的特定函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-17T15:05:23.767

这适用于 R 在 F# 中非常相似：

```
"%|>%" <- function(x, fun){
    if(is.function(x)) {
      function(...) fun(x(...))
    } else {
      fun(x)
    }
} 
```

# jsp - jsp scriptlet中字符串比较的奇怪结果

> ID：13354049
> 
> 赞同：1
> 
> 时间：2012-11-13T00:46:14.713
> 
> 标签：jsp, javabeans

我的 .jsp 文件中有这段代码：

```
<%= formBean.getMonth() == "default" %> 
```

我首先打印该值以确保它等于“默认值”：

```
<%= formBean.getMonth() %> 
```

确实如此，但是当我像上面那样将它与“默认”进行比较时，它会打印错误。我很困惑可能是什么问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T00:48:18.790

使用`equals()`方法比较字符串值如下：

```
 <%= formBean.getMonth().equals("default") %> 
```

`==`将比较对象实例**并在您的情况下返回 false，因为 String 对象实例不一样**。

# java - 在 Java 中使用 ImageSearchDll.dll（来自 AutoIt）编辑：JNA

> ID：13354056
> 
> 赞同：9
> 
> 时间：2012-11-13T00:47:19.930
> 
> 标签：java, dll, import, jna, autoit

我想对我的 Java 程序中的屏幕事件做出反应，所以我想在我的实际屏幕中找到一个图像。我试图编写一种方法来从机器人类中获取屏幕截图，然后搜索像素 - 但它需要很长时间。

我知道在 AutoIt 中有一个外部 DLL 可以很好地完成这项工作，现在我试图让它在 java 中运行......但我被卡住了：/

.dll 在 AutoIt Includes 中被调用，如下所示：

```
Func _ImageSearch($findImage,$resultPosition,ByRef $x, ByRef $y,$tolerance)
   return _ImageSearchArea($findImage,$resultPosition,0,0,@DesktopWidth,@DesktopHeight,$x,$y,$tolerance)
EndFunc 
```

和：

```
Func _ImageSearchArea($findImage,$resultPosition,$x1,$y1,$right,$bottom,ByRef $x, ByRef $y, $tolerance)

if $tolerance>0 then $findImage = "*" & $tolerance & " " & $findImage
$result = DllCall("ImageSearchDLL.dll","str","ImageSearch","int",$x1,"int",$y1,"int",$right,"int",$bottom,"str",$findImage)

if $result[0]="0" then return 0

$array = StringSplit($result[0],"|")

$x=Int(Number($array[2]))
$y=Int(Number($array[3]))
if $resultPosition=1 then
  $x=$x + Int(Number($array[4])/2)
  $y=$y + Int(Number($array[5])/2)
endif
return 1
EndFunc 
```

我得到了 dll 并尝试了 jna 之类的东西，但我无法让它工作。我还尝试使用 AutoItX 让 AutoIt Functions 在 Java 中运行，但它不适用于包含。你能帮助我吗？

编辑：好的，我在 JNA 上做了另一次尝试，现在我得到了一个字符串 - 但字符串意味着错误。有什么问题？我有一个界面：

```
public interface ImageSearchDLL extends Library{
ImageSearchDLL INSTANCE = (ImageSearchDLL) Native.loadLibrary("ImageSearchDLL", ImageSearchDLL.class);
String ImageSearch(int x1, int y1, int x2, int y2, String findImage);   
} 
```

我这样称呼它：

```
static {
    File file = new File("libs", "ImageSearchDLL.dll");
    System.load(file.getAbsolutePath());
    }
(...)
String a = ImageSearchDLL.INSTANCE.ImageSearch(0, 0, 500, 500, "C:\myProg\OK.bmp"); 
```

我总是得到“0”，这意味着错误或未找到，就像我在 AutoIT 文件中看到的那样：

```
; If error exit
if $result[0]="0" then return 0 
```

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T23:34:09.767

您采用的路径的替代方法是使用`Runtime.getRuntime().exec()`生成执行图像搜索的应用程序（c、autoit 脚本等）并利用基于文件/轮询方法（或通过标准输出）在它们之间进行通信以将结果发送给您java应用程序。

# php - 简单的更新查询不起作用？

> ID：13354058
> 
> 赞同：0
> 
> 时间：2012-11-13T00:47:31.773
> 
> 标签：php, mysql, forms

在编写了一大堆更复杂且运行良好的代码之后，这就是给我带来问题的代码。

简单的模式

```
<form action="res/scripts/editsubscriber.php" method="post">
<label for="name">Name: </label>
<input name="name" type="text" value="<?php echo $name; ?>">
...etc, etc...
</form> 
```

提交到这个脚本：

```
 include('appvars.php');  
  if(isset($_POST['submit'])){
$id = $_POST['id'];
$name = $_POST['name'];
$email = $_POST['email'];
$month = $_POST['month'];
$day = $_POST['day'];
$year = $_POST['year'];
$date =  $_POST['date'];
$time = substr($date, 0, (stripos($date, " ")+1));
$time = str_replace($time, '', $date);
$created = $year.'-'.$month.'-'.$day.' '.$time;
$query = "UPDATE newslettersubscribers SET name = '$name', email = '$email', created = '$created' WHERE id = $id)";
mysqli_query($dbc, $query);
 } 
```

它发布，我已经回显了所有变量，它们改变得很好，但它仍然不会更新数据库。有人请告诉我我错过了什么......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T00:51:57.000

*   `)`在您的更新声明中删除额外内容
*   阅读文章以避免`SQL Injection`

    [在 PHP中**防止 SQL 注入**的最佳方法是什么？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T00:50:24.237

您的 SQL 查询中有一个奇怪的尾随`)`。您是否在 SQL 客户端中执行过它？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T00:51:48.673

你有身份证输入吗？

```
<input name="id" type="text" value="<?php echo $id; ?>"> 
```

此外，您没有转义 sql/html。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T00:52:46.383

此代码将严重危害您的数据库的安全性。由于在包含在查询中之前没有对任何参数进行清理，因此具有基本安全知识的任何人都可以在几秒钟内接管您的应用程序。

要解决安全问题**和**您的错误，您可能需要查看 [http://php.net/manual/en/pdo.prepared-statements.php](http://php.net/manual/en/pdo.prepared-statements.php)

# json - D3js json结构

> ID：13354063
> 
> 赞同：0
> 
> 时间：2012-11-13T00:47:57.463
> 
> 标签：json, d3.js

我正在做一些关于游戏的分析图表。这是基本假设。

玩家可以做出三种可能的动作。玩家可以攻击 玩家可以防御

玩家可以奔跑（向前和向后 2 个方向）

每个动作都可能发生在三个战场之一（bg a，bg b，bg c）

玩家可以是人类或外星人。每个种族的玩家都可以有一个级别。

每个玩家在特定时间执行特定动作。

现在我需要绘制这些东西。

玩家种族的饼图 行动发生地点的饼图（在 3 个战场中的哪一个） 玩家等级的条形图 基于时间的攻击折线图 基于时间的防御折线图 奔跑的折线图（每条线运行方向）基于时间

每个图表都需要连接到其他图表（交叉过滤器飞行图表是）。因此，例如，如果我单击带有玩家种族的饼图并选择人类，则其他图表会相应地更新以反映与该种族有关的级别、战场和行动。

底线是我很难构建我的 json 输入。有高手能给我一些提示吗？感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T23:20:42.647

在我看来，最灵活的方法是建立一个带有时间戳的“事件”数组（一个事件可以是玩家可能做的任何事情）。就像是：

```
var playerEvents = [
  { timestamp: 1352848500, player:'human', action:'attack', location:'bg A' },
  { timestamp: 1352848600, player:'alien', action:'run', meta:'dir=left', location:'bg B' },
  ....
] 
```

一旦你有了它，你想要显示的任何统计数据都将涉及将这一系列事件过滤到给定图形所需的任何内容。

# python - 尽管 GET 请求包含字段，但 FieldStorage 为空

> ID：13354071
> 
> 赞同：0
> 
> 时间：2012-11-13T00:48:49.317
> 
> 标签：python, get, cgi

我从 python CGI 编程开始，在 apache2 中使用 mod_python，并试图将 HTTP 请求中的 GET 字段检索到一个简单的 .py 页面。

编码：

```
#!/usr/bin/python                                                                                                                                                                                                       

import cgi
import cgitb; cgitb.enable()

print 'Content-type: text/html\n'
print '''                                                                                                                                                                                                               
<html>                                                                                                                                                                                                                  
<body>                                                                                                                                                                                                                  
'''
form = cgi.FieldStorage()
l = len(form.keys())
print "<p>%s field(s) set.</p>" % l
print '''                                                                                                                                                                                                               
</body>                                                                                                                                                                                                                 
</html>                                                                                                                                                                                                                 
''' 
```

页面打印“0 个字段集”。这里有什么问题？到目前为止，在我寻找答案的过程中，我还没有在 apache2 的 mod_python 中找到会阻止将 GET 字段传输到 CGI 脚本的参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T02:26:23.037

cgi.FieldStorage 依赖于 POST 的多部分表单，而不是通过 GET 发送。更改表单上的方法并确保表单标签中有 multipart：

```
<form action="" method="post" multipart>
  <input type="file" name="file">
  <input type="submit" name="submit" value="Submit">
</form> 
```

当您使用 GET 方法时，cgi.FieldStorage 只获取查询字符串，它最多可以为您提供您尝试提交的文件的名称。

# javascript - node.js 天蓝色操作？定义

> ID：13354073
> 
> 赞同：0
> 
> 时间：2012-11-13T00:48:59.867
> 
> 标签：javascript, node.js, azure

我正在使用 azure 查看节点中的代码

```
 .where('Key eq ?', key1) 
```

我想知道什么是“？” 意思是 .. 我知道 eq 是相等的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T18:00:37.177

这 ？是接下来传递的参数的占位符。`key1`在这种情况下。

# java - 在侦听器上启动时出现 Apache Tomcat 错误

> ID：13354074
> 
> 赞同：0
> 
> 时间：2012-11-13T00:49:02.067
> 
> 标签：java, jakarta-ee, tomcat, jstl, listener

由于某些奇怪的原因，当我启动我的应用程序时会发生此错误。

```
Nov 13, 2012 8:46:35 AM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\Users\John\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\webapps\contextlistener
Nov 13, 2012 8:46:35 AM org.apache.tomcat.util.digester.Digester endElement
SEVERE: End event threw exception
java.lang.IllegalArgumentException: Can't convert argument: null
    at org.apache.tomcat.util.IntrospectionUtils.convert(IntrospectionUtils.java:966)
    at org.apache.tomcat.util.digester.CallMethodRule.end(CallMethodRule.java:476)
    at org.apache.tomcat.util.digester.Digester.endElement(Digester.java:1051)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endElement(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanEndElement(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Source)
    at org.apache.tomcat.util.digester.Digester.parse(Digester.java:1537)
    at org.apache.catalina.startup.ContextConfig.parseWebXml(ContextConfig.java:1875)
    at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1256)
    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:878)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:369)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5173)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:618)
    at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1100)
    at org.apache.catalina.startup.HostConfig$DeployDirectory.run(HostConfig.java:1618)
    at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Nov 13, 2012 8:46:35 AM org.apache.catalina.startup.ContextConfig parseWebXml
SEVERE: Parse error in application web.xml file at jndi:/localhost/contextlistener/WEB-INF/web.xml
java.lang.IllegalArgumentException: Can't convert argument: null
    at org.apache.tomcat.util.digester.Digester.createSAXException(Digester.java:2687)
    at org.apache.tomcat.util.digester.Digester.createSAXException(Digester.java:2719)
    at org.apache.tomcat.util.digester.Digester.endElement(Digester.java:1054)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endElement(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanEndElement(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Source)
    at org.apache.tomcat.util.digester.Digester.parse(Digester.java:1537)
    at org.apache.catalina.startup.ContextConfig.parseWebXml(ContextConfig.java:1875)
    at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1256)
    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:878)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:369)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5173)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:618)
    at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1100)
    at org.apache.catalina.startup.HostConfig$DeployDirectory.run(HostConfig.java:1618)
    at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.IllegalArgumentException: Can't convert argument: null
    at org.apache.tomcat.util.IntrospectionUtils.convert(IntrospectionUtils.java:966)
    at org.apache.tomcat.util.digester.CallMethodRule.end(CallMethodRule.java:476)
    at org.apache.tomcat.util.digester.Digester.endElement(Digester.java:1051)
    ... 30 more 
```

错误太多了，不知道调试这种类型的错误，怎么办？

我的`web.xml`

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" version="3.0">
  <display-name>BlackJackWeb</display-name>

  <listener>
        <listener-class>org.blackjack.listeners.BlackJackInit</listener-class>
    </listener>

</web-app> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T01:04:37.797

**另一个编辑：**您可以尝试更改 web.xml 中的默认命名空间以使用根元素中的“旧”命名空间。

```
xmlns="http://java.sun.com/xml/ns/j2ee" 
```

[其他人](https://stackoverflow.com/questions/2293797/tomcat-startup-web-xml-issue "其他人")也有类似的问题，听起来您的 web.xml 文件引起了问题。试试他们的解决方案。

# r - 使用 R 中的 ghostcript

> ID：13354076
> 
> 赞同：1
> 
> 时间：2012-11-13T00:49:11.547
> 
> 标签：r, ghostscript

我正在尝试从 R 调用 ghostcript 来裁剪 pdf 文件，但无法使其工作。在命令提示符下使用 ghostscript 代码可以正常工作。使用 R 而不是直接使用 Ghostscrip 的原因是我必须处理许多从 R 中的循环创建的 pdf。

代码是：

```
argument<-c("C:\\gs9.06\\bin\\gswin32.exe -sDEVICE=pdfwrite -o C:\\cropped.pdf -c [/CropBox [0.3 12.5 116.2 169] /PAGES pdfmark -f C:\\uncropped.pdf")
system2(command="C:\\WINDOWS\\system32\\cmd.exe", args=argument) 
```

R返回：

```
'ropBox' is not recognized as an internal or external command,
operable program or batch file.
Warning message:
running command '"C:\WINDOWS\system32\cmd.exe" "C:\\gs9.06\\bin\\gswin32.exe -sDEVICE=pdfwrite -o J:\\Mapinfo\\cropped.pdf -c [/CropBox [0.3 12.5 116.2 169] /PAGES pdfmark -f J:\\Mapinfo\\testing.pdf"' had status 1 
```

似乎 R 不喜欢“/”符号，但我不知道如何解决这个问题。有什么建议吗？

-文森特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T01:11:13.920

我想你只需要重新安排你的电话。

```
system2("C:\\program.exe",args="-program arguments") 
```

我无法在我当前的机器上测试这个（运行风险自负），但我认为在你的例子中它看起来像：

```
system2("C:\\gs9.06\\bin\\gswin32c.exe",args="-sDEVICE=pdfwrite -o C:\\cropped.pdf -c [/CropBox [0.3 12.5 116.2 169] /PAGES pdfmark -f C:\\uncropped.pdf") 
```

# python - 从上到下查找通过树（嵌套字典）的所有路径

> ID：13354080
> 
> 赞同：6
> 
> 时间：2012-11-13T00:49:38.007
> 
> 标签：python, recursion, dictionary, tree

**编辑：**请参阅下面的建议答案以及它是如何还不完全正确的。

*Stack Overflow 上有很多与此类似的问题，但没有一个与 Python 中的完全一样。我是一个编程新手，所以请放轻松。*

我有一棵嵌套字典树，如下所示：

```
[{'word': 'The',
  'next': [{'word': 'End',
            'next': None},
           {'word': 'quick',
            'next': [{'word': 'brown',
                      'next': [{'word': 'fox',
                                'next': None}]}]},
           {'word': 'best',
            'next': [{'word': 'of',
                      'next': [{'word': 'times',
                                'next': None}]}]}]}] 
```

我想从上到下展平所有路径并最终得到这个：

```
[[{'word': 'The'},
  {'word': 'End'}],

 [{'word': 'The'},
  {'word': 'quick'},
  {'word': 'brown'},
  {'word': 'fox'}],

 [{'word': 'The'},
  {'word': 'best'},
  {'word': 'of'},
  {'word': 'times'}]] 
```

我做了一个可爱的小递归函数，它首先创建了原始结构，但我很难取消递归它。据我所知：

```
def flatten_combinations(result_tree, current_combo = None, all_combos = None):
    if current_combo is None:
        current_combo = []
    if all_combos is None:
        all_combos = []
    if result_tree is None:
        all_combos.append(current_combo)
        return
    for word in result_tree:
        current_combo.append({'word': word['word']})
        flatten_combinations(word['next'], current_combo, all_combos)
    return current_combo 
```

…返回这个：

```
[{'word': 'The'},
 {'word': 'End'},
 {'word': 'quick'},
 {'word': 'brown'},
 {'word': 'fox'},
 {'word': 'best'},
 {'word': 'of'},
 {'word': 'times'}] 
```

…这显然有点接近，但并不完全正确。

我知道这个函数可能非常不符合 Python 风格，但我正在自学编程，所以我什至没有尝试利用可能存在的语言特性，这些特性会让我从头开始思考这些东西（*”他说，张贴到一个问答网站，希望它的成员能帮助他消除一点想法*）。

所以：我做错了什么？

**编辑**：下面的 Moshe 纠正了几个问题：

```
def flatten_combinations(result_tree, current_combo = None, all_combos = None):
    if current_combo is None:
        current_combo = []
    if all_combos is None:
        all_combos = []
    if result_tree is None:
        all_combos.append(current_combo)
        return
    for word in result_tree:
        current_combo = current_combo[:]
        current_combo.append({'word': word['word']})
        flatten_combinations(word['next'], current_combo, all_combos)
    return all_combos 
```

这更接近了，但并不完全正确：

```
[{'word': 'The'}, 
 {'word': 'End'}],

[{'word': 'The'},
 {'word': 'End'},
 {'word': 'quick'},
 {'word': 'brown'},
 {'word': 'fox'}],

[{'word': 'The'},
 {'word': 'End'},
 {'word': 'quick'},
 {'word': 'best'},
 {'word': 'of'},
 {'word': 'times'}]] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T01:02:26.563

如果您在递归调用中传入 current_combo 的副本，那么您不会在 for 循环的下一次迭代中丢失当前路径。

此外，您不需要返回 current_combo，因为结果不用于递归。您可能希望返回 all_combos 而不是将其作为参数。或者，您可以有一个递归函数和一个非递归函数，其中非递归函数为 all_combos 创建列表并将其传递给递归函数，以便递归函数可以假定 all_combos 已设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T01:03:35.017

我会采取这个策略：对于每棵树，

1.  递归计算在这棵树的根词之后的句子列表。
2.  对于每个句子，在其前面添加当前单词。
3.  返回新扩展的句子列表。

你做过归纳证明吗？我发现归纳是我编程中最有用的数学技术之一：

1.  证明您的函数正确处理了 'next' 所在的树`None`。
2.  证明您的函数处理深度树`n`，假设它可以正确处理深度树`n-1`。

归纳然后将证明扩展到覆盖任何深度的树。完毕！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T01:08:31.680

其中有两个小错误：

1）您返回`current_combo`而不是`all_combos`. 这只会给你最后的结果

2）在每次**迭代**中，您修改`current_combo`. 先复制一份吧！

```
new_current_combo = current_combo[:]
new_current_combo.append({'word': word['word']})
flatten_combinations(word['next'], new_current_combo, all_combos) 
```

完整代码：

```
def flatten_combinations(result_tree, current_combo=None, all_combos=None):
    if current_combo is None:
        current_combo = []
    if all_combos is None:
        all_combos = []
    if result_tree is None:
        all_combos.append(current_combo)
        return
    for word in result_tree:
        new_current_combo = current_combo[:]
        new_current_combo.append({'word': word['word']})
        flatten_combinations(word['next'], new_current_combo, all_combos)
    return all_combos 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T01:10:22.253

只是使@JoshHeitzman 的答案具体化（并简化您的默认参数）：

```
def flatten_combinations(result_tree, current_combo = [], all_combos = []):
if result_tree is None:
    all_combos.append(current_combo)
    return
for word in result_tree:
    current_combo.append({'word': word['word']})
    flatten_combinations(word['next'], current_combo[:], all_combos)
return all_combos 
```

# java - 用线程闪烁字符串

> ID：13354084
> 
> 赞同：0
> 
> 时间：2012-11-13T00:50:09.397
> 
> 标签：java, string, multithreading, applet

我正在尝试编写一个 Java 小程序来显示用户输入的字符串，然后它应该通过在该字符串和另一个字符串之间切换来闪烁该字符串。我正在尝试使用线程来执行此操作，但我对这些和 Applets 很陌生，我不知道从现在开始该怎么做。

这是我到目前为止所拥有的：

```
public class FlashingLabel extends JApplet implements Runnable
{
String blank;
String input;
JLabel label; 
Thread t;

public void init() 
{
    input = JOptionPane.showInputDialog(null, "Enter String", "Flashing Label",   JOptionPane.QUESTION_MESSAGE);
    blank=" ";

    t=new Thread(this);
    t.start();
}

public void run() 
{
    while(true)
    {
        label=new JLabel(blank);
        add(label);
        this.repaint();
        label=new JLabel(input);
        add(label);
        this.repaint();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T01:05:07.560

*   永远不要在 Event Dispatching Thread 中做任何会阻塞它的事情（长时间运行的任务或 IO），它会让你的应用程序看起来像挂起一样。
*   切勿从除事件调度线程之外的任何线程创建或更新任何 UI 组件
*   不需要`JLabel`每次更新消息时都创建新的，简单的使用`JLabel#setText`。您的代码目前正在通过每个循环添加两个新标签

根据您的需要，一个简单的[`javax.swing.Timer`](http://docs.oracle.com/javase/7/docs/api/javax/swing/Timer.html)将执行您尝试实现的任务。

```
public class FlashApplet extends JApplet {

    @Override
    public void init() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                setLayout(new BorderLayout());
                add(new FlashPane());

            }
        });
    }

    @Override
    public void start() {
    }

    public static class FlashPane extends JPanel {

        protected static final String[] MESSAGES = {"Bad Boys", "What you gonna do"};

        private Timer flashTimer;
        private JLabel label;
        private int messageIndex = -1;

        public FlashPane() {
            setLayout(new BorderLayout());
            add((label = new JLabel()));
            label.setHorizontalAlignment(JLabel.CENTER);

            flashTimer = new Timer(500, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    messageIndex++;
                    if (messageIndex >= MESSAGES.length) {
                        messageIndex = 0;
                    }
                    label.setText(MESSAGES[messageIndex]);
                }
            });
            flashTimer.setRepeats(true);
            flashTimer.setCoalesce(true);
            flashTimer.setInitialDelay(0);
            flashTimer.start();
        }

    }

} 
```

您可能想阅读一下[Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T00:55:07.343

为了使您的代码安全，一个想法是将其包装在 invokeLater 中（或者做一些我不知道的疯狂线程安全的事情）。

```
 SwingUtilities.invokeLater(new Runnable(){
   public void run()
   {
    label=new JLabel(blank);
    add(label);
    for(int i =0;i < 4;i++)
    {
       label.setText(blank) ;

       try{
          Thread.sleep(1000);
        }catch(...){
         }
       label.setText(input);

    }
   } 
```

添加您的标签，它最初是空白的.. 睡一秒钟（根据您的需要进行更改），然后将其设置为您的输入。上次我做了这样的事情，它工作，它在主 UI 线程上。

# php - 它为我的一个 php 脚本显示一个空白页面

> ID：13354086
> 
> 赞同：0
> 
> 时间：2012-11-13T00:50:18.310
> 
> 标签：php

我试图让用户保持登录状态，直到他们单击注销链接或关闭浏览器。

我遇到的问题是，对于teacherlogin.php 页面，它只是显示一个空白页面。没有 php 错误或 javascript 错误，所以我的问题是我在下面的teacherlogin.php 代码中做错了什么；

**教师登录.php**

```
 <?php
/*
file: login.php
authorized (logged in) users must be redirected to a secure page (member.php) or (secure.php)
unauthorized (guests) users have to see the login form
*/

#include the class file and start it.

ini_set('display_errors', TRUE);
error_reporting(E_ALL);

require_once('session.class.php');
$session = new Session();

#check user's access
if($session->get("auth"))header("location:members.php");
?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
        <title>Teacher Login</title>
   <link rel="stylesheet" type="text/css" href="TeacherLoginStyle.css">
   </head>
<?php

// connect to the database
include('connect.php');
/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    die();
}

// required variables (make them explciit no need for foreach loop)
if (isset($_POST['submit'])) {
    $teacherusername = (isset($_POST['teacherusername'])) ? $_POST['teacherusername'] : '';
    $teacherpassword = md5(md5("g3f".$_POST['teacherpassword']."rt4"));  

    // don't use $mysqli->prepare here
    $query = "SELECT TeacherId, TeacherForename, TeacherSurname, TeacherUsername, TeacherPassword, Active FROM Teacher WHERE TeacherUsername = ? AND TeacherPassword = ? LIMIT 1";
    // prepare query
    $stmt=$mysqli->prepare($query);
    // You only need to call bind_param once
    $stmt->bind_param("ss",$teacherusername,$teacherpassword);
    // execute query
    $stmt->execute(); 
    // get result and assign variables (prefix with db)
    $stmt->bind_result($dbTeacherId, $dbTeacherForename,$dbTeacherSurname,$dbTeacherUsername,$dbTeacherPassword, $dbActive);

    while($stmt->fetch()) {
        if ($teacherusername == $dbTeacherUsername && $teacherpassword == $dbTeacherPassword) {
            if ($dbActive == 0) {
                $error = "You Must Activate Your Account from Email to Login";
            }else{
                $session->set('auth',TRUE);
                $session->set('active',TRUE);
                $session->set('teacherid',$dbTeacherId);
                $session->set('teacherusername',$dbTeacherUsername);
                header('Location: members.php') ;
            }
        }else{
            //password and username dont match
                $error = "The Username or Password that you Entered is not Valid. Try Entering it Again";
        }
    }

    /* close statement */
    $stmt->close();

    /* close connection */
    $mysqli->close();
}

include('noscript.php');

?>

<body>

    <h1>TEACHER LOGIN</h1>

  <form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post" id="teachLoginForm">        
  <p>Username</p><p><input type="text" name="teacherusername" /></p>      <!-- Enter Teacher Username-->
  <p>Password</p><p><input type="password" name="teacherpassword" /></p>  <!-- Enter Teacher Password--> 
  <p><input id="loginSubmit" type="submit" value="Login" name="submit" /></p>
  </form>

  <a href="./forgotpass.php">Forgot Password</a>

</body>

</html> 
```

**session.class.php**

```
<?php
/*
Simple PHP Session Class:
    a simple class to help managing the Session function in
    php for beginners and it introduces them to OOP where
    they can modify it and add new features and extend its
    functionality (session in database, track users actions,etc)
*/
#Session settings.

#Session cookie lifetime at the user browser. (seconds)
ini_set('session.cookie_lifetime', '0');

#Read the functions reference below before you change these values.
ini_set('session.gc_maxlifetime',7200);# 2 hours.
ini_set('session.gc_probability', '1'); #default PHP value.
ini_set('session.gc_divisor', '100'); #default PHP value.

/*====================================================================

ini_set('session.cookie_lifetime', '0');

    User cookie life time in seconds.
    0 means the cookie wont expire until the user closes the broswer

ini_set('session.gc_maxlifetime',7200); #default: 1440 (24 mins).

    Session Garbage Collection cleaner (GC). 

    7200(seconds) equals to (2 hours): The GC will try to
    clean session data in the server for (users who logged
    out, closed the browser AND users who are inactive for
    more than that time) however the clean function does
    not run directly, read the next block for more explaination.

    PHP manual:
        session.gc_maxlifetime specifies the number of
        seconds after which data will be seen as 'garbage'
        and potentially cleaned up. Garbage collection may
        occur during session start
        (depending on session.gc_probability and session.gc_divisor).

ini_set('session.gc_probability', '1'); #default PHP value (1).
ini_set('session.gc_divisor', '100'); #default PHP value (100).

    Garbage Collection (GC) Settings:
    PHP manual:
        session.gc_divisor coupled with
        session.gc_probability defines the probability
        that the gc (garbage collection) process is started
        on every session initialization. The probability is
        calculated by using gc_probability/gc_divisor
        e.g. 1/100 means there is a 1% chance that the GC
        process starts on each request.
        session.gc_divisor defaults to 100\.  
====================================================================*/

/*
    HOW TO USE:
    - include the session file in all your files and call the session object
    require_once('session.class.php');
    $session = new Session();

    GET SESSION ID:
    - $session->sid;
      @return type (string)
      @example:
      echo $session->sid;

    GENEREATE NEW SESSION ID:
    - $session->re();
      @return type (string)
      #note: returns the value of the new session id.
      @example:
      $sid = $session->sid;
      $new_sid = $session->re();
      echo "My Session ID is: {$sid} but I got a new one now: {$new_sid};

    ASSIGN NEW SESSION VALUE:
    - $session->set($key,$value);
      @return type (void)
      @examples:
        $session->set("name","foo bar");
        $session->set("age",24);
        $session->set("auth",TRUE);

    GET SESSION VALUE:
    - $session->get($key);
      @return type (boolean, int, string, array).
      #note: returns FALSE if the value is not set
      @examples:
      echo $session->get("name");
      if($session->get("auth")) echo "hello authorized user!";

      if(($age = $session->get("age")) > 21)
      echo "your age is {$age}, you can drive!";

    DELETE SESSION VALUE:
    - $session->delete($key);
      @return type (void);
      @example
      $session->delete("age");

    DESTROY SESSION
    - $session->destroy();
      @return type (void);
*/
/*==================================================================*/
class Session{
    public $sid;
    public function __construct() {
        @session_start();
        $this->sid = session_id();
    }
    public function re(){
        @session_regenerate_id();
        $this->sid = session_id();
        return $this->sid;
    }
    public function set($key, $val) {
        $_SESSION[$key] = $val;
        return true;
    }

    public function get($key) {
        if ( isset($_SESSION[$key]) ) {
            return $_SESSION[$key];
        }

        return false;
    }

    public function delete($key) {
        unset($_SESSION[$key]);
    }

    public function destroy() {
        $_SESSION = array();
        session_destroy();
    }
}            
?> 
```

**成员.php**

```
<?php
    ini_set('display_errors',1); 
    error_reporting(E_ALL);

    /*
    file: secure.php, profile.php, member.php
    authorized (logged in) users => log them out and show goodbye msg or send them to login.php
    unauthorized (guests) users => redirect them to login.php
    */
    require_once('session.class.php');
    $session = new Session();

    #if user is not logged in, he will be sent to the login.php page
    #note the (!) sign before the $session, it means if the $session->get("auth") == false
    if(!$session->get("auth")) header("location:teacherlogin.php");

    echo "hello, you are logged in";
    echo "<br />";
    echo "username: ".$session->get("teacherusername");
    echo "<br />";
    echo "teacherid: ".$session->get("teacherid");
    echo "<br />";
    echo "active status: ".$session->get("active") ? "Active" : "Not Active";
    echo "<br />";
    echo "<a href='logout.php'>Log out</a>";

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T01:42:29.803

将其放在脚本的最顶部...

```
error_reporting(E_ALL); 
```

ini_set('display_errors', '1');

这应该强制错误显示在屏幕上。如果不检查您的 Web 服务器日志，以了解有关您的服务器在此页面加载时给出的响应的详细信息。您将能够在那里看到错误信息。

# javascript - Javascript / jQuery - 整页滑块

> ID：13354092
> 
> 赞同：-1
> 
> 时间：2012-11-13T00:51:12.347
> 
> 标签：javascript, jquery

我正在寻找某种解决方案/插件来制作它，以便我可以获取整页内容，并将其从左侧或右侧滑入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T01:00:21.140

看看超大的jquery插件......

[http://buildinternet.com/project/supersized/](http://buildinternet.com/project/supersized/)

还有全屏狭缝滑块......

[http://tympanus.net/codrops/2012/06/05/fullscreen-slit-slider-with-jquery-and-css3/](http://tympanus.net/codrops/2012/06/05/fullscreen-slit-slider-with-jquery-and-css3/)

# c++ - C++重新声明局部变量有什么作用？

> ID：13354099
> 
> 赞同：2
> 
> 时间：2012-11-13T00:52:24.210
> 
> 标签：c++, variables, declaration

我一直在使用下面的代码从文本文件中读取两个不同的矩阵。该代码反复重新声明（至少，我*认为*它重新声明了）局部变量`stringvalues`和`iss`. 我刚刚意识到变量被重新声明了——我当然不打算重新声明它们。

**问题**：反复重新声明这些变量有什么影响？

仅供参考：我正在使用 GCC 4.4.3 进行编译。

```
fstream PW3_in("./input/PW.txt", ios::in);
for(int i=0; i<900; i++)
{
    PW3_in.getline(line, 450);

    string stringvalues;
    stringvalues = line;
    istringstream iss (stringvalues,istringstream::in);

    iss >> word1 >> word2 >> word3 >> word4 >> word5 >> word6 >> word7 >> word8 >> word9;

    num1 = strtod(word1, NULL);
    num2 = strtod(word2, NULL);
    num3 = strtod(word3, NULL);
    num4 = strtod(word4, NULL);
    num5 = strtod(word5, NULL);
    num6 = strtod(word6, NULL);
    num7 = strtod(word7, NULL);
    num8 = strtod(word8, NULL);
    num9 = strtod(word9, NULL);

    PW3[0+i*9]=num1;
    PW3[1+i*9]=num2;
    PW3[2+i*9]=num3;
    PW3[3+i*9]=num4;
    PW3[4+i*9]=num5;
    PW3[5+i*9]=num6;
    PW3[6+i*9]=num7;
    PW3[7+i*9]=num8;
    PW3[8+i*9]=num9;

}
PW3_in.close();

fstream PP3_in("./input/PP.txt", ios::in);
for(int i=0; i<900; i++)
{
    PP3_in.getline(line, 450);

    string stringvalues;
    stringvalues = line;
    istringstream iss (stringvalues,istringstream::in);

    iss >> word1 >> word2 >> word3 >> word4 >> word5 >> word6 >> word7 >> word8 >> word9;

    num1 = strtod(word1, NULL);
    num2 = strtod(word2, NULL);
    num3 = strtod(word3, NULL);
    num4 = strtod(word4, NULL);
    num5 = strtod(word5, NULL);
    num6 = strtod(word6, NULL);
    num7 = strtod(word7, NULL);
    num8 = strtod(word8, NULL);
    num9 = strtod(word9, NULL);

    PP3[0+i*9]=num1;
    PP3[1+i*9]=num2;
    PP3[2+i*9]=num3;
    PP3[3+i*9]=num4;
    PP3[4+i*9]=num5;
    PP3[5+i*9]=num6;
    PP3[6+i*9]=num7;
    PP3[7+i*9]=num8;
    PP3[8+i*9]=num9;

}
PP3_in.close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T00:55:12.117

是的，它重新声明了它们。但是每个声明实际上是一个不同的变量。就像您`x`在两个不同的函数声明中调用某些东西一样。

该变量显示在块的开头声明。在声明它的块结束后，一个变量会“超出范围”（即它被销毁并且不再存在）。

事实上，对于`for`循环的每次迭代，该变量都会被销毁并重新创建一次。每次它都具有相同的名称，但在概念上是一个完全不同的变量（即使它在内存中占据相同的位置）。

此外，如果您尝试`stringvalues`在两个`for`循环之间使用变量，编译器会给您一个错误，因为该变量在那里不存在。

因此，即使这两个变量声明声明了具有相同名称的变量，这些变量实际上是不同的变量。您可以将第二个块中的名称重命名`1`为在名称末尾添加一个，效果将完全相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T00:57:40.877

每个变量都是在作用域中创建的，而不是在函数或方法中。

在您的示例中，您有两个不同的范围，因此有两个不同的变量。`for`循环后，在 for 中声明的所有变量（包括`i`您的示例中的变量）都将被删除。你不能在循环之后使用它。

在`for`循环的情况下，每个变量都会被删除并在每轮重新创建。实际上，编译器在内存中使用相同的位置，但变量被重新初始化。

# plsql - 骆驼大小写和不区分大小写

> ID：13354101
> 
> 赞同：-2
> 
> 时间：2012-11-13T00:52:37.723
> 
> 标签：plsql, case-insensitive, camelcasing

我想听听您对在不区分大小写和过程语言（Oracle PL/SQL）中使用 Upper 或 lowerCamelCase 的意见。有些人想在我的工作中使用这种模式，但程序员不喜欢这个想法……Oracle Forms and Reports 不支持自动完成。

我的意见：我认为没有任何理由在不区分大小写的语言中使用 Camel Case...

你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T00:57:09.520

当您需要多字名称时，CamelCase 确实增加了变量的可读性，并且它比使用下划线作为空格更容易编写，特别是对于在大多数常用语言中一直使用它们的程序员。

从长远来看，不区分大小写应该让人们可以使用他们喜欢的任何大小写，所以不确定为什么这是一个问题，但我对 CamelCase 投了赞成票。SQL 关键字应该全部大写或全部小写，具体取决于您的商店标准。

# ios - 电话间隙条码扫描器插件中的奇怪行为。对于 iOS

> ID：13354106
> 
> 赞同：2
> 
> 时间：2012-11-13T00:53:15.143
> 
> 标签：ios, cordova, plugins, barcode

我似乎遇到了一个有趣的错误

在使用 apache Cordova 2.2 和来自 GitHub 存储库的最新条码扫描器插件创建 iOS 应用程序时，我们能够让应用程序以纵向和横向方式运行，并且条码覆盖和相机正确显示。

尝试在横向模式下读取条形码时会出现问题。尽管覆盖（红线、绿框）根据方向旋转，但读取捕获部分似乎保持纵向。

我的意思是在横向模式下，您必须将物理对象旋转 90 度 sudo 纵向模式？

有没有人遇到过这个？

# css - 在 GWT UiBinder 中设置“过滤器”css 值时出现警告

> ID：13354108
> 
> 赞同：3
> 
> 时间：2012-11-13T00:53:38.660
> 
> 标签：css, gwt, uibinder

我有以下警告：

```
00:48:06.843 [WARN] [XXXX] Line 71 column 11: encountered ":". 
Was expecting one of: "}" "+" "-" "," ";" "/" <STRING> <IDENT> <NUMBER> <URL> <PERCENTAGE> <PT> <MM> <CM> <PC> <IN> <PX> <EMS> <EXS> <DEG> <RAD> <GRAD> <MS> <SECOND> <HZ> <KHZ> <DIMEN> <HASH> <IMPORTANT_SYM> <UNICODERANGE> <FUNCTION> 
```

在行`71`中，我有以下行

```
<ui:style>
...
    .menuPopup {
        position:absolute; 
        top: 5px; 
        right: -80px;
        width:100px; 
        background-color: #F2F2F2; 
        -moz-box-shadow: -1px 2px 5px 1px rgba(0, 0, 0, 0.5); 
        -webkit-box-shadow: -1px 2px 5px 1px rgba(0, 0, 0, 0.5); 
        box-shadow:-1px 2px 5px 1px rgba(0, 0, 0, 0.5); 
        filter: progid:DXImageTransform.Microsoft.Shadow(color='#888888',Direction=135, Strength=3);    
    }
</ui:style> 
```

当我删除该`filter: progid:...`行时，它工作正常。

`filter`GWT的属性有问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T01:12:37.583

`filter`不遵循CSS语法，所以你必须使用GWT的[`literal()`功能](https://developers.google.com/web-toolkit/doc/latest/DevGuideClientBundle#Literal_function)`CssResource`：

```
filter: literal("progid:DXImageTransform.Microsoft.Shadow(color='#888888',Direction=135, Strength=3)"); 
```

# jquery - jCarousel 中的 get() 方法在 IE9 中失败

> ID：13354110
> 
> 赞同：0
> 
> 时间：2012-11-13T00:53:59.887
> 
> 标签：jquery, jquery-plugins, jcarousel

我试图通过获取从 add() 方法返回的项目（它使用 get() 方法获得）并向其添加单击事件处理程序，从而使我添加到 jcarousel 对象的项目可点击，如下所示：

```
for(n = 0; n < response.link_colors.length; n++) {
    item = carousel.add(n + 1, '<div style="background-color: ' + response.link_colors[n] + '; width: 75px; height: 75px;">&nbsp;</div>' );
    makeClickable(item, response.link_colors[n], 'linkcolor');
}

function makeClickable(item, selection, setting) {
    item.attr("sel", selection);

    item.click(function() { 
        eval("selections." + setting + " = $(this).attr('sel');");
        if(setting == 'layout') {
            $('#template_preview').show();
            $('#extracted_selections').show();
        }
        reloadFrame();
    }); 
} 
```

这在 Chrome、Firefox 等中按预期工作。但 IE9 告诉我返回的项目不是对象，因此 attr() 方法无效。

查看 jCarousel 代码，我看到了 get 方法：

```
 get: function(i) {
        return $('>.jcarousel-item-' + i, this.list);
    }, 
```

看起来很简单。我已经确认有一个具有适当类名的 LI 元素（例如 jcarousel-item-1），但即使`this.list`它引用的对象（由 jcarousel 构造函数创建）根据 IE9 似乎也是无效的。

知道如何解决这个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T00:22:03.900

经过一些进一步的研究，我意识到我并没有`var item;`像我想的那样在函数之外声明 item 变量。这在所有版本的 IE 中都修复了它。所以，让这成为你们所有人的一课（但，尤其是我）——声明你的变量，孩子们！喝你的阿华田。

# .net - 有没有办法重新生成丢失的 .resx 文件？

> ID：13354111
> 
> 赞同：15
> 
> 时间：2012-11-13T00:54:02.490
> 
> 标签：.net, resx

我有一个项目的源代码，但缺少 .resx 文件，这会阻止编译。有没有办法为它重新生成 resx 文件？这是我在 XP 机器上使用 Visual Studio 2010 Professional 创建的 C# 项目，我试图在 Windows 8 机器上使用 Visual Studio 2012 Ultimate 打开。

## 更新

它（Resources.resx）实际上在那里（在属性下），所以我猜“找不到”的意思是：“我不喜欢你给我的那个。”

当我捣碎 F6 再次尝试时，我收到警告，“自定义工具 'ResXFileCodeGenerator' 与文件 'Properties\Resources.resx' 相关联，但在项目中找不到自定义工具的输出。您可能尝试通过右键单击解决方案资源管理器中的文件并选择运行自定义工具来重新运行自定义工具。”

另外：“自定义工具‘SettingsSingleFileGenerator’与文件‘Properties\Settings.settings’相关联，但在项目中未找到自定义工具的输出。您可以尝试通过右键单击重新运行自定义工具解决方案资源管理器中的文件并选择运行自定义工具。”

我为 Resources.resx 和 Settings.settings 运行了“运行自定义工具”，但仍然得到相同的错误和两个警告。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T00:35:08.903

如果您过去编译过项目并且有可用的 dll/exe，则可以使用 JetBrains 的 DotPeek 应用程序从程序集中导出 resx XML

[在DotPeek](https://www.jetbrains.com/decompiler/)中打开 dll/exe

![在此处输入图像描述](../Images/f971a4eeb545a688aeb6f7f7c818ecc1.png)

然后双击每个资源以在窗口中查看 XML。然后，您可以将 XML 复制/粘贴到文本编辑器中并保存为 .resx 文件。

不要费心右键单击资源并尝试“将资源保存到文件”选项，因为这不会以您在屏幕上看到的相同格式创建文件。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-22T07:16:23.747

右键单击并删除 .resx 表单项目右键单击表单并更新资源管理器构建项目运行项目

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-06-19T04:21:17.197

我知道这个问题有点老了，但是我在生成 .resources.dll 文件时遇到了问题，并且在最近更改了 .NET Framework 版本之后，.ResX 文件仍然包含旧的 .NET Framework 版本。我可以通过打开受影响的表单并转到“设计”->“可本地化”并将其更改为“假”来解决此问题。然后我构建了项目，然后将其改回“True”，并重新生成了 .ResX 文件。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-05T16:19:14.523

我在为一个相当广泛的项目创建的表单上遇到了这个问题。我能够在同一个项目中简单地复制另一个表单的 resx，并更改文件名。

我浏览了项目中的十几个 resx 文件，发现其中大部分是相同的；少数没有，仅相差一两行。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-05-14T08:59:01.253

我来自未来，Visual Studio 2019。在更大的合并过程之后我遇到了同样的问题（出于某种原因，它要求我合并很多或全部 *.Design 文件）。很明显，我不得不以某种方式从 .resx 文件重新生成自动生成的代码。

解决方案：我更改了一个条目（名称，而不是值），保存它，改回来，保存它。这似乎迫使所有 .resx 文件重新生成，并且项目正在再次编译。

只需做一个需要更改自动生成代码的更改。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-13T01:10:44.897

据我所知，没有办法重新生成 .resx 文件，但您可以采用另一种方式创建另一个/相同的 win 应用程序及其所有控件方面。比取一个新创建的 resx 文件并添加到旧项目。试一试也许会奏效

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-13T16:13:56.487

以下是我的解决方法：我从记事本的另一个项目中打开了丢失的辅助文件（AssemblyInfo.cs、Resources.resx、Resources.Designer.cs、Settings.settings 和 Settings.Designer.cs），删除了那些没有的东西t 属于（例如对 ThemeEditor 的引用等），根据需要更改了其他内容（应用程序或包的名称），这些最终被接受为属于我的应用程序的那些。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-10-10T14:08:27.600

Visual Studio 2012-2015 用户 对于 Web 应用程序，只需在解决方案资源管理器中选择缺少 resx 的 Web 控件 (ascx) 或页面 (aspx)，然后转到项目菜单并选择“转换为 Web 应用程序”，然后按 OK提示。您应该在解决方案资源管理器中看到所选项目下的新文件。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-01-10T11:00:51.100

将项目中任何其他形式的文件复制`.resx`到项目文件夹中，然后重试。它对我有用。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-03-18T17:33:19.673

如果运行 VS 2017 或更高版本，我只是删除了该文件。

# r - 将二进制文件读入R

> ID：13354113
> 
> 赞同：4
> 
> 时间：2012-11-13T00:54:13.647
> 
> 标签：r, binaryfiles

我正在尝试将二进制文件读入 R，但该文件具有以二进制代码编写的数据行。因此，它没有属于一列的完整数据集，而是存储为数据行。这是我的数据的样子：

```
Bytes 1-4:            int        ID
Byte 5:               char       response character
Bytes 6-9:            int        Resp Dollars
Byte 10:              char       Type char 
```

任何人都可以帮我弄清楚如何将此文件读入R？

这是我到目前为止尝试过的代码。我尝试了几件事，但效果有限。不幸的是，我不能在公共网站上发布任何数据，抱歉。我对 R 比较陌生，所以在如何改进代码方面我需要一些帮助。

```
> binfile = file("File Location", "rb")
> IDvals = readBin(binfile, integer(), size=4, endian = "little")
> Responsevals = readBin(binfile, character (), size = 5)
> ResponseDollarsvals = readBin (binfile, integer (), size = 9, endian= "little")
Error in readBin(binfile, integer(), size = 9, endian = "little") : 
  size 9 is unknown on this machine
> Typevals = readBin (binfile, character (), size=4)
> binfile1= cbind(IDvals, Responsevals, ResponseDollarsvals, Typevals)
> dimnames(binfile1)[[2]]
[1] "IDvals"            "Responsevals"        "ResponseDollarsvals" "Typevals"  

> colnames(binfile1)=binfile
Error in `colnames<-`(`*tmp*`, value = 4L) : 
  length of 'dimnames' [2] not equal to array extent 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T02:21:34.483

您可以将文件作为原始文件打开，然后发出 readBin 或 readChar 命令来获取每一行。随时将每个值附加到一列。

```
my.file <- file('path', 'rb')

id <- integer(0)
response <- character(0)
... 
```

循环这个块：

```
id = c(id, readBin(my.file, integer(), size = 4, endian = 'little'))
response = c(response, readChar(my.file, 1))
...
readChar(my.file, size = 1) # For UNIX newlines.  Use size = 2 for Windows newlines. 
```

然后创建您的数据框。

见这里： http: [//www.ats.ucla.edu/stat/r/faq/read_binary.htm](http://www.ats.ucla.edu/stat/r/faq/read_binary.htm)

# ruby-on-rails - Rails 协会问题

> ID：13354115
> 
> 赞同：1
> 
> 时间：2012-11-13T00:54:26.533
> 
> 标签：ruby-on-rails

我似乎并没有完全理解 Rails 中的这种“关联”业务……希望有人能提供帮助。

**模型一**

```
class Vendor < ActiveRecord::Base
  has_many :products
end 
```

**模型二**

```
class Product < ActiveRecord::Base
  belongs_to :vendor
end 
```

当我去查找当前支持的所有“产品”然后关联供应商名称时......我没有得到正确的结果：

```
Product.where("is_supported = true").joins(:vendor) 
```

结果查询是：

```
 SELECT `products`.* FROM `products` INNER JOIN `vendors` ON `vendors`.`id` = `products`.`vendor_id` WHERE (is_supported = true) 
```

问题是 SELECT products.* 而不是 SELECT *

为了让供应商表将自己的字段与产品表连接起来，我缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T01:02:31.770

那是因为您正在进行 JOIN，现在您正在同时处理 2 个表。然后，rails 进行特定查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T01:07:26.637

初步评论：当使用 Ruby on Rails（或任何其他 SQL 隐藏框架）时，不应该（过多）担心底层 SQL 查询。它们是根据需要生成的（并且可能是“次优的”）

回答您的问题：“我如何从产品对象中获取供应商信息”（或者至少我是这样阅读的）

,`belongs_to`和`has_many`其他关联将属性添加到实现类（在您的情况下是`Product`and`Vendor`类）。您可以使用此属性来获取关联对象的信息。

```
p = getSomeProduct(...)
v = p.vendor
vendorName = p.vendor.name # or use v.name of course 
```

此代码可能（无法检查以确保 ATM）生成并执行多个 SQL 查询。这是使用对开发人员隐藏 SQL 的框架所付出的代价。

有关 Ruby on Rails 中的关联的更多信息，请阅读[Active Record 关联指南。](http://guides.rubyonrails.org/association_basics.html)

# iphone - 试图回到 App 的第一个 UIViewController

> ID：13354125
> 
> 赞同：0
> 
> 时间：2012-11-13T00:55:50.240
> 
> 标签：iphone, objective-c, xcode, uiviewcontroller

我有一个应用程序，我正在尝试从 MainViewController 重新加载原始视图控制器。没有 .xib 应用程序的第一个视图是在 AppDelegate 中创建的。在我加载了几个执行其他操作的 UIViewController 之后，我需要返回到应用程序在启动时启动的原始 webView (ViewController)。我真的很难在网络上研究任何东西。我只需要一种方法来重新加载应用程序开始时的原始视图。任何人都可以提供任何可能的解决方案供我尝试吗？我没有办法尝试了。

感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T01:10:58.440

您可以再次设置 rootViewController。

在应用程序委托中使用：

```
self.window.rootViewController = yourFirstViewController; 
```

祝你好运！

编辑：

此外，您可以使用以下方式全局访问应用程序委托：

```
[[[UIApplication sharedApplication] delegate] 
```

我发布了一个小示例项目，可以帮助您：

[https://github.com/luisespinoza/ChangeViewController](https://github.com/luisespinoza/ChangeViewController)

祝你好运！

# css - 在 Centered Div 内填充屏幕宽度的 Div

> ID：13354130
> 
> 赞同：1
> 
> 时间：2012-11-13T00:56:29.453
> 
> 标签：css

这可能吗？我将 Div2 专门定位在 Div1 内。现在唯一的事情是我希望 Div2 跨越整个屏幕的宽度，而不是仅仅跨越 Div1 的宽度。

```
|----------------------------------------------------------|
|                       Browser                            |
|                                                          |
|                                                          |
|                                                          |
|                                                          |
|           --------------------------------               |
|           |        Div1 (relative)       |               |
|           |                              |               |
|           |                              |               |
|-----------|------------------------------|---------------|
|           |           Div2               |               |
|           |(currently absolute & in Div1)|               |
|-----------|------------------------------|---------------|
|           |                              |               |
|           |                              |               |
|           |                              |               |
|           |                              |               |
|           --------------------------------               |
|                                                          |
|                                                          |
|                                                          |
|----------------------------------------------------------| 
```

这是我现在拥有的 CSS：

```
.page{
      height: 300px;
      width: 400px;}

.Div1{
    float:left; 
      left: 50%;
    height:200px; 
    width:100px;
    position:relative;
        background-color: red;
}

.Div2{
    position:absolute; 
    top:21px; 
    width:100%; 
    height:24px;
        background-color: yellow;
}​ 
```

这是针对我当前问题的 JSFiddle：http: [//jsfiddle.net/vBqgT/21/](http://jsfiddle.net/vBqgT/21/) 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T01:35:59.967

当然可以，但是如果您将 div2 设为 div1 的子级，则 div2 的位置是相对于 div1 给出的（因此 left:0 会将其与 div1 左对齐）。如果您不想将其相对于 div1 放置，您可以使 div2 成为 div1 的兄弟，也可以`position: relative;`从 div1 中删除。另一种选择是在 div2 上使用固定位置。所有这些都有可能不受欢迎的副作用......

有时有必要使用 javascript 来获得您想要的。例如，假设您要在一个轴上与 div1 对齐，而在另一轴上与 body 对齐。然后可能需要使用脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T01:49:16.633

试试这个 CSS：

```
.page{
      height: 300px;
      width: 100%;
    border: 0px solid red;
}

.Div1{
    margin: 0 auto;
    height:200px;
    width:100px;
    background-color: red;
}

.Div2{
    position:absolute;
    top:21px;
    width:100%;
    height:24px;
    background-color: yellow;
    left:0;
} 
```

这是演示：http: [//jsfiddle.net/ongisnade/SqG3c/](http://jsfiddle.net/ongisnade/SqG3c/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T03:02:58.190

你真的不需要 CSS3 来完成这个。由于`div2`在里面`div1`，它的宽度受`div1`. 因此，要使`div2`比 更宽`div1`：

```
.Div2{
    width:150%; 
} 
```

你也可以这样做：

```
.Div2{
    left: -25%;
} 
```

调整左边缘的`div2`开始位置。

请参阅[http://jsfiddle.net/jsxvK/](http://jsfiddle.net/jsxvK/)。

但是，如果主要目标是获取`div2`body 的属性（`page`在您的情况下），请考虑将标记`div2`放在 inside `page`，而不是 inside `div`。然后调整顶部位置`div2`以将其在文档中向上或向下移动。

# java - 如何在java中的多个线程之间传递值

> ID：13354134
> 
> 赞同：1
> 
> 时间：2012-11-13T00:57:03.717
> 
> 标签：java, multithreading, algorithm

在java中：

```
 r1=complexCalc1();
 r2=complexCalc2();
 r3=complexCalc3();
 r4=complexCalc4();
 r5=complexCalc5();
 return r1+r2+r3+r4+r5; 
```

假设运行时间如

```
complexCalc1() -> 5 mins 
complexCalc2() -> 3 mins
complexCalc3() -> 2 mins
complexCalc4() -> 4 mins
complexCalc5() -> 9 mins 
```

如果这个程序按顺序运行，计算 r1+r2+r3+r4+r5 需要 23 分钟。如果每个函数并行运行，即在单独的线程中的每个 complexCalc() 函数，r1+r2+r3+r4+r5 计​​算的总时间将是 9 分钟。

我的问题是如何实现它。我尝试了几种方法，但我仍然无法弄清楚任何具体的东西。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T01:15:40.130

仅使用标准 Java API 的解决方案草稿如下所示：

```
public class Main {
    private static final Callable<Integer> createCalculationSimulator (final int result, final int minutesToWait) {
        return new Callable<Integer> () {
            @Override
            public Integer call() throws Exception {
                Thread.sleep(minutesToWait*60*1000L);
                return result;
            }
        };
    }

    public static void main(String[] args) throws Exception {       
        final ExecutorService executorService = Executors.newFixedThreadPool (5);
        final long startTime = System.currentTimeMillis();
        final List<Future<Integer>> results = executorService.invokeAll(
            Arrays.asList(
                createCalculationSimulator(1, 5),
                createCalculationSimulator(2, 3),
                createCalculationSimulator(3, 2),
                createCalculationSimulator(4, 4),
                createCalculationSimulator(5, 9)));

        int resultSum = 0;
        for (final Future<Integer> result : results) {
            resultSum += result.get();
        }
        final long endTime = System.currentTimeMillis();
        System.out.println("The end result is " + resultSum + ". Time needed = " + (endTime - startTime)/1000 + " seconds.");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T01:12:54.197

如果您可以将任务划分为逻辑**独立的任务**（我相信您可以按照您已经指出的那样），那么使用 Java 5+ 就相当容易了。

*   在自己的 Callable 中实现每个任务
*   将它们全部提交给执行者。[ExecutorService.invokeAll(...)](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html#invokeAll%28java.util.Collection%29)
*   上述步骤返回一个列表，您将存储并确保所有这些都已完成（查看 api）

**笔记**

*   将线程池大小初始化为等于内核数（当然，您可以在配置文件后进行调整。
*   如果你可以有外部依赖，那么我建议使用[Guava 库](http://code.google.com/p/guava-libraries/)来简化 Executors 的使用。

# android - 使用 Cordova 配置 Eclipse 的问题

> ID：13354140
> 
> 赞同：0
> 
> 时间：2012-11-13T00:57:27.960
> 
> 标签：android, eclipse, cordova

在使用 Cordova 设置 Eclipse 后，我在让 IDE 在模拟器上运行一个简单的应用程序时遇到问题。我已将其设置为使用最新版本的 android SDK，并且我已经清理了项目。然而，我仍然得到这个错误：

应用程序包“AndroidManifest.xml”必须至少有 2 个段。

在 XML 文件下，包节点读取为“ **PACKAGE** ”。关于如何纠正这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T02:05:04.850

看起来科尔多瓦实际上改变了他们的文档。我应该运行创建批处理文件而不是作为项目打开 root

# mysql - 仅显示/喜欢数字（选择电话号码）

> ID：13354150
> 
> 赞同：1
> 
> 时间：2012-11-13T00:58:36.870
> 
> 标签：mysql, sql

我想在一个具有电话列的外包表中进行搜索，但在数据库中电话号码没有架构。所以电话号码是 varchar 并且有很多字符（例如：“”、-、+、/）

mysql查询什么只能喜欢varchar中的数字？

```
Example:  
input: 30321321

Database:
+36-30/321 32-1 
70/32132131 
0630-32-13-21 
```

我的点子：

```
Select * from foo where phone like "%3%0%3%2%1%3%2%1%"; 
```

只是这很丑陋且资源密集。该数据库有 100000 行和 2 个电话列。

有更好的主意吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-13T01:02:47.493

我会用`REGEXP`......（我想现在我有两个问题:)）

试试这个：

`SELECT * FROM foo WHERE phone REGEXP '3(.)?0(.)?3(.)?2(.)?1(.)?3(.)?2(.)?1'`

注意：这将忽略在 phone 列上定义的任何索引，因此如果针对具有大量行的表运行它时要小心。

# windows-8 - 是否可以将数据绑定到本地设置数据？

> ID：13354151
> 
> 赞同：0
> 
> 时间：2012-11-13T00:58:36.973
> 
> 标签：windows-8, winrt-xaml, textblock

我想将一些 TextBlock 组件绑定到本地设置数据。这是否可能，如果可能，如何在 XAML 中引用 LocalSettings 对象？

# css - CSS，改变链接中图标字体的悬停效果

> ID：13354157
> 
> 赞同：3
> 
> 时间：2012-11-13T00:59:23.800
> 
> 标签：css, icons, hover, font-awesome

我有一个像这样的导航元素......

```
<ul class="options-list">
    <li><a href="#"><i class="icon icon-print"></i> Print This</a></li>
    <li><a href="#"><i class="icon icon-envelope-alt"></i> Send This</a></li>
    <li><a href="#"><i class="icon icon-bookmark"></i> Bookmark This</a></li>
    <li><a href="#"><i class="icon icon-star"></i> Favourite This</a></li>
    <li><a href="#"><i class="icon icon-heart"></i> Like This</a></li>
</ul> 
```

我正在使用 Font Awesome 来生成图标。CSS如下：

```
.options-list li a {
  color: #888;
  display: block;
  border-bottom: 1px solid #e7e7e7;
  padding-top: 7px;
  padding-right: 0;
  padding-bottom: 7px;}

.options-list li:first-child a {margin: -15px 0 0 0;}
.options-list li:last-child a {border: none;}
.options-list li a:hover {color: #444;} 
```

显然，这让我在悬停到 #444 时更改了文本（和图标）颜色。现在我想做的是保留它，但在悬停时将图标更改为不同的颜色。（即文本更改为#444，图标在悬停时更改为#AE0000）

我不确定解决它的最佳方法。（对于 CCS/HTML 来说还是很新的，所以任何帮助都非常感谢！）

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-13T01:04:50.000

您想设置悬停元素`icon`内的类的颜色。`a`

```
.options-list li a:hover .icon {color: #ae0000;} 
```

# java - 如何查询列表 在 Jdbc 模板中？

> ID：13354158
> 
> 赞同：40
> 
> 时间：2012-11-13T00:59:40.747
> 
> 标签：java, jdbc, jdbctemplate, spring-jdbc

我正在使用 Spring`JdbcTemplate`并运行如下查询：

```
SELECT COLNAME FROM TABLEA GROUP BY COLNAME 
```

没有传递命名参数，但是，列名 ,`COLNAME`将由用户传递。

**问题**

1.  有没有办法使用占位符，比如`?`列名？例如`SELECT ? FROM TABLEA GROUP BY ?`

2.  如果我想简单地运行上述查询并获得`List<String>`最好的方法是什么？

目前我正在做：

```
List<Map<String, Object>> data = getJdbcTemplate().queryForList(query);
for (Map m : data) {
  System.out.println(m.get("COLNAME"));
} 
```

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2016-11-04T07:25:12.027

要填充字符串列表，您无需使用自定义行映射器。使用`queryForList`.

```
List<String>data=jdbcTemplate.queryForList(query,String.class) 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-11-13T01:16:04.717

> 有没有办法有占位符，比如？对于列名？例如选择？从 TABLEA 分组？

使用如下动态查询：

```
String queryString = "SELECT "+ colName+ " FROM TABLEA GROUP BY "+ colName; 
```

> 如果我想简单地运行上述查询并获得一个列表，最好的方法是什么？

```
List<String> data = getJdbcTemplate().query(query, new RowMapper<String>(){
                            public String mapRow(ResultSet rs, int rowNum) 
                                                         throws SQLException {
                                    return rs.getString(1);
                            }
                       }); 
```

编辑：要停止 SQL 注入，请检查 colName 中的非单词字符：

```
 Pattern pattern = Pattern.compile("\\W");
          if(pattern.matcher(str).find()){
               //throw exception as invalid column name
          } 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2016-08-04T05:17:29.517

使用以下代码

`List data = getJdbcTemplate().queryForList(query,String.class)`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T05:14:06.480

您不能将占位符用于列名、表名、数据类型名或基本上不是数据的任何内容。

# javascript - IE9 和 FF15+ 的 jQuery .show() 和 .hide() 问题

> ID：13354159
> 
> 赞同：0
> 
> 时间：2012-11-13T00:59:52.717
> 
> 标签：javascript, jquery, html

我在一页上有几个隐藏的 DIV，每个 DIV 都包含一个外部 Flash 播放器。为了隐藏/显示 DIV，我使用了这个 JS：

```
$('.showSingle').click(function(){

    $(".targetDiv").css("visibility","hidden");
    $(".targetDiv").hide("fast");

    $("#div"+$(this).attr('target')).css("visibility","visible");
    $('#div'+$(this).attr('target')).show('fast');

}); 
```

HTML 是：

```
<div id="div'.$x.'" class="targetDiv" style="visibility: hidden">';

//Player code

</div> 
```

Chrome、Opera、IE7 - 都很好。Flash 播放器是隐藏的，设置为可见时播放，隐藏后停止播放。

IE9（仅在设置 EmulateIE7 时有效）- Flash 播放器被隐藏，设置为可见时播放，但再次设置为隐藏时不会停止播放。

火狐。FF12 一切正常，虽然在 FF15+ 中，DIV 是隐藏的，但是一旦页面加载，所有的 Flash 播放器都会开始播放，不管是隐藏还是可见。

修复FF和IE9的任何解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T01:17:29.683

如果它们是您的 Flash 文件并且有 ActionScript 方法来暂停它们，那么最好的方法是通过 javascript 暂停它们。

您也可以尝试在 embed 命令中设置 autoplay= false 。

但是通过javascript控制它应该很容易。

这是一个如何通过 javascript 访问 Flash的 [示例](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html)

# chef-infra - Chef 和 Puppet Windows 支持

> ID：13354160
> 
> 赞同：4
> 
> 时间：2012-11-13T00:59:56.327
> 
> 标签：chef-infra, puppet

在 Chef 和 Puppet 之间，哪一个对 Windows 的支持更好？他们都声称这样做，但有几个问题可能在早期不清楚。例如，厨师不支持像

Git Ifconfig Link Package（但 gem_package - 对于 ruby​​ gems，确实有效） SCM Script Subversion ..

许多食谱都使用这些，我认为上面的内容使它们对 Windows 毫无用处。不确定 Windows 的 puppet 有多成熟？你比较过chef和puppet最新的windows支持吗？

# python - 在 SPARQL 过滤器语句中引用 OWL 类

> ID：13354166
> 
> 赞同：3
> 
> 时间：2012-11-13T01:00:46.427
> 
> 标签：python, sparql, owl, rdflib

我开发了一个本体，您可以通过下面代码中的链接访问它。除 FILTER 部分外，代码工作正常。如果我在 FILTER 中使用相等运算符，它不会返回任何内容。如果我使用不等于运算符 (!=)，它不会过滤任何内容。我想我在本体中使用“owl:Brands”对 Brands 类的引用不起作用。我缩短了 url，因为我不希望它被网络爬虫索引。我在代码中使用原始 URL。您可以使用缩短的网址访问原始网址。您可以通过编辑器浏览本体。我很确定“owl:Brands”不起作用，我尝试了许多其他可能性，但不知道如何使它起作用。

如果没有 FILTER 语句，它的工作原理等同于“FILTER(?sub!=owl:Brands)”，因为没有与 owl:Brands 匹配的内容。仅供参考，我正在使用 python 和 rdflib。

```
 plugin.register(
     'sparql', rdflib.query.Processor,
     'rdfextras.sparql.processor', 'Processor')
    plugin.register(
       'sparql', rdflib.query.Result,
           'rdfextras.sparql.query', 'SPARQLQueryResult')

       qres = g.query(
             """
                PREFIX owl: <http://goo.gl/ZwwgT>
                SELECT ?class WHERE { ?sub rdfs:subClassOf ?class .
                FILTER(?sub=owl:Brands)}

                """)

       for row in qres.result:
         print(row) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T12:50:00.847

我只能假设您错误地转录了您的示例，或者 rdflib 有错误。我加载了你的本体，执行了你的查询（使用你的本体的扩展 URL）并得到一个结果，啤酒。然而，我没有使用 RDFlib。您可以尝试将其提取为单个测试用例并将其提供给 RDFlib 作者，以便他们可以解决问题，和/或研究使用不同的数据库。

# html - 如何使用 HTML 在单个页面上使用元数据来描述多个员工？

> ID：13354168
> 
> 赞同：0
> 
> 时间：2012-11-13T01:01:25.113
> 
> 标签：html, metadata

我目前为每个员工都有一个页面，其中包含以下元标记作为示例

```
<meta name="cn" content="Angela"/>
<meta name="uid" content="angela"/>
<meta name="title" content="Manager"/>
<meta name="location" content="Room 1"/>
<meta name="telephoneNumber" content="12345" />
<meta name="manager" content="Maxim"/> 
```

然而，我想做的是有一个包含多个员工的页面，但能够以类似的方式描述员工。如何使用 HTML 实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T08:14:56.373

这取决于您使用或期望使用的元数据处理系统。大多数`meta`带有属性的标签`name`都是只写的：你可以随心所欲地写它们，没有人关心。

如果您只是在规划一个元数据系统（元数据结构和处理元数据的定义），那么您可以考虑使用一些主要搜索引擎定义的微数据和 Schema.org 词汇表。这*可能不会*让 Google 和朋友处理您的元数据并在专门的搜索中使用它（就像他们现在对地点、食谱、书籍等所做的那样），但有一天它*可能会*产生这样的影响。无论如何，他们在为元数据设计合理、有用的格式方面付出了一些努力。

例如，[http://schema.org/Person](http://schema.org/Person)描述了个人信息的元数据系统。它在标记方面相当冗长，但也相当复杂。[另见微数据](http://www.whatwg.org/specs/web-apps/current-work/multipage/microdata.html#encoding-microdata)的一般描述。

# android - 包含 # 符号的维基百科重定向目标

> ID：13354169
> 
> 赞同：0
> 
> 时间：2012-11-13T01:01:40.103
> 
> 标签：android, http, mediawiki, wikipedia

我正在通过 android 应用程序直接查询维基百科的网站。

但是，有时当我收到“重定向”查询，并且我的重定向建议中有一个 # 符号时，我真的不知道如何处理它。我知道我可以把# 符号后面的所有东西都扔掉，但这意味着我正在查找一些相对不重要的东西。

这是一个示例链接； [http://en.wikipedia.org/w/api.php?action=query&prop=extracts&titles=Poof_(The_Fairly_OddParents)&format=json](http://en.wikipedia.org/w/api.php?action=query&prop=extracts&titles=Poof_(The_Fairly_OddParents)&format=json)

我可以重定向到 List_of_The_Fairly_OddParents_characters，但我想知道我是否可以对“#Poof”做任何有用的事情，因为我确信这些信息的存在是有原因的。

我在 MediaWiki API 上找不到任何东西。

请帮忙！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T09:57:36.393

大多数情况下，散列后的部分是节标题（尽管它只是简单地附加到新 URL，因此它可以并且偶尔用于指向其他类型的锚点），因此您可以找到该节 (以`mobileview`操作为例）和部分索引，您可以查询该部分的 HTML。（`extracts`不支持部分，因此您必须使用其他内容并手动强制执行长度限制。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T01:03:39.897

哈希指向目标文档中的命名锚点或 ID。因此，如果您正在解析页面内容，那么理想情况下您会找到锚标记或 ID 并返回该元素之后的内容，而不是从内容的开头开始。

# objective-c - NSNumber如何获得最小公分母？就像 0.375 的 3/8 一样？

> ID：13354170
> 
> 赞同：0
> 
> 时间：2012-11-13T01:02:18.913
> 
> 标签：objective-c, ios, algorithm, nsnumber

假设我有一个 NSNumber，它介于 0 和 1 之间，并且可以使用 X/Y 表示，在这种情况下如何计算 X 和 Y？我不想比较：

```
if (number.doubleValue == 0.125)
{
    X = 1;
    Y = 8;
} 
```

所以我得到 0.125 的 1/8

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T01:09:00.707

这是相对简单的。例如，`0.375`等价于`0.375/1`。

第一步是将分子和分母相乘，直到分子为整数值^((a))，得到`375/1000`.

然后找到最大公约数并除以分子和分母。

GCD 的（递归）函数是：

```
int gcd (int a, int b) {
    return (b == 0) ? a : gcd (b, a%b);
} 
```

`375`如果你用and调用它`1000`，它会吐出，`125`所以当你将分子和分母除以它时，你会得到`3/8`。

* * *

^((a))正如评论中所指出的，精度位比整数类型多的数字可能存在问题（例如 IEEE754 双精度数与 32 位整数）。您可以通过选择具有更大范围的整数（长整数或类似 MPIR 的 bignum 库）或选择“足够接近”的策略来解决此问题（当小数部分与整数部分相比相对微不足道时，将其视为整数）。

另一个问题是某些数字在 IEEE754 中甚至不*存在*，例如臭名昭​​著的`0.1`和`0.3`.

除非一个数字可以表示为受可用精度限制的值的总和（例如是），否则您可以希望的最好结果是一个近似值。`2^(-n)``n``0.375``1/4 + 1/8`

例如，考虑单精度（你会在下面看到为什么，我懒得做整个 64 位）`1/3`。作为单精度值，它存储为：

```
s eeeeeeee mmmmmmmmmmmmmmmmmmmmmmm
0 01111101 01010101010101010101010 
```

在这个例子中，符号是`0`一个正数。

指数位给出 125，当你减去 127 偏差时，得到 -2。因此乘数将是或。`2^(-2)``0.25`

尾数位有点棘手。它们形成一个显式`1`与所有位值的总和，其中是 1 到 23（从左到右。所以尾数计算如下：`2^(-n)``1``n`

```
s eeeeeeee mmmmmmmmmmmmmmmmmmmmmmm
0 01111101 01010101010101010101010
            | | | | | | | | | | |
            | | | | | | | | | | +-- 0.0000002384185791015625
            | | | | | | | | | +---- 0.00000095367431640625
            | | | | | | | | +------ 0.000003814697265625
            | | | | | | | +-------- 0.0000152587890625
            | | | | | | +---------- 0.00006103515625
            | | | | | +------------ 0.000244140625
            | | | | +-------------- 0.0009765625
            | | | +---------------- 0.00390625
            | | +------------------ 0.015625
            | +-------------------- 0.0625
            +---------------------- 0.25
                           Implicit 1
                                    ========================
                                    1.3333332538604736328125 
```

当您将其乘以`0.25`（参见前面的指数）时，您会得到：

```
0.333333313465118408203125 
```

现在*这就是*为什么他们说您只能获得大约 7 位十进制数字的精度（IEEE754 双精度为 15 位）。

如果您通过我上面的算法传递该实际数字，您将不会得到`1/3`，而是会得到：

```
 5,592,405
---------- (or 0.333333313465118408203125)
16,777,216 
```

但这不是算法本身的问题，更多的是您可以表示的数字的限制。

感谢[Wolfram Alpha](http://www.wolframalpha.com/)帮助计算。如果您需要做*任何*让您的计算器压力过大的数学运算，那是完成这项工作的最佳工具之一。

* * *

> 顺便说一句，您无疑会注意到尾数位遵循某种模式：`0101010101...`. 这是因为`1/3`它是一个无限循环的二进制值以及一个无限循环的十进制值。您最终需要无限数量的`01`位来准确表示`1/3`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T01:18:54.963

你可以试试这个：

```
- (CGPoint)yourXAndYValuesWithANumber:(NSNumber *)number
{
    float x = 1.0f;
    float y = x/number.doubleValue;
    for(int i = 1; TRUE; i++)
    {
        if((float)(int)(y * i) == y * i)
        // Alternatively floor(y * i), instead of (float)(int)(y * i)
        {
            x *= i;
            y *= i;
            break;
        }
    }
    /* Also alternatively
    int coefficient = 1;
    while(floor(y * coefficient) != y * coefficient)coefficient++;
    x *= coefficient, y *= coefficient;*/
    return CGPointMake(x, y);
} 
```

如果输入无效，这将不起作用。X 和 Y 必须存在并且是有效的自然数（1 到无穷大）。一个会破坏它的好例子是 1/pi。如果你有限制，你可以做一些批判性的思考来实现它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-02T22:33:08.207

paxdiablo 概述的方法是正确的。

我只是想提供一个高效的 GCD 功能（迭代实现）：

```
int gcd (int a, int b){
    int c;
    while ( a != 0 ) {
        c = a; a = b%a; b = c;
    }
    return b;
} 
```

[来源](http://www.math.wustl.edu/~victor/mfmm/compaa/gcd.c)。

# asp.net-mvc - ASP.net MVC，我想要一个数据库，而不是多个

> ID：13354175
> 
> 赞同：0
> 
> 时间：2012-11-13T01:02:42.280
> 
> 标签：asp.net-mvc, entity-framework

我正在按照 asp.net 网站上的指南学习 asp.net mvc4。

链接：[www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/](http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/)

事情是，我想把我的电影表放在默认连接中。因为我希望所有数据都在一个数据库中，而不是两个。

我是说。我很困惑为什么我不能只拥有一个带有单独表的数据库。当然，多个数据库会给我的项目带来延迟以及可扩展性问题。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T01:30:51.867

该默认连接指向您的本地数据库，并且用于表单身份验证。该数据库中包含所有 asp.net 角色提供程序模式的内容，并且由于它是一个“互联网”项目，因此这是所有登录内容的所在。如果您希望在添加实体框架模型时将实体和模型挂接到同一个数据库中，请将其指向该数据库，然后您就可以使用了。

经过进一步调查：看起来[http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/adding-a-model](http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/adding-a-model)是您定义连接字符串的位置你的实体。我注意到`AttachDbFilename=|DataDirectory|\Movies.mdf`了，在验证了我的想法之后[http://social.msdn.microsoft.com/Forums/en-US/sqldataaccess/thread/f21c0728-935d-492a-baaf-ff2704e3683b/](http://social.msdn.microsoft.com/Forums/en-US/sqldataaccess/thread/f21c0728-935d-492a-baaf-ff2704e3683b/)看起来这就是旋转在应用程序的数据目录中创建第二个数据库，称为 movies.mdf。如果您想保留您的 1 默认数据库，请将 MovieDBContext 字符串中的连接字符串信息更改为默认连接的信息，并且它应该在同一数据库中创建新的电影结构。

# windows - 监视器、互斥体和信号量使用的同步级别（执行或内核）

> ID：13354178
> 
> 赞同：0
> 
> 时间：2012-11-13T01:03:24.720
> 
> 标签：windows, multithreading, kernel, semaphore, executives

我知道内核可以通过自旋锁方法同步进程。但是，当涉及到一个处理器时，它是如何做到的呢？它如何使用同步对象来确保互斥？

信号量是行政级别的吗？内核如何在这里发挥作用？

互斥锁是否仅在内核级别实现？当资源空闲时，它们不会发出信号或消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T01:42:12.130

你在这里有几个问题：

> 我知道内核可以通过自旋锁方法同步进程。但是，当涉及到一个处理器时，它是如何做到的呢？它如何使用同步对象来确保互斥？

在单处理器机器上，获取自旋锁只会将 IRQL 提升到 >DISPATCH_LEVEL - 无法抢占处于这种提升 IRQL 的线程，因此可以保证同步。

> 信号量是行政级别的吗？内核如何在这里发挥作用？

信号量、互斥体（以及大多数可等待的对象）是[内核调度对象](http://msdn.microsoft.com/en-us/library/windows/hardware/ff548068%28v=vs.85%29.aspx)。此类对象由内核实现，并通过 KERNEL32.DLL (CreateEvent/Mutex/Semaphore 等) 导出的各种函数提供给用户模式应用程序。此外，“内核发挥作用”通过调度线程等待和唤醒正在等待同步对象的线程。

> 互斥锁是否仅在内核级别实现？

Mutex 对象确实是内核调度对象（[KMUTEX](http://msdn.microsoft.com/en-us/library/windows/hardware/ff548097%28v=vs.85%29.aspx)）。互斥对象未拥有时会发出信号。当一个线程获得一个互斥体时，它的状态变为非信号状态，这意味着任何其他试图获得它的线程都将进入等待状态，直到获得互斥体或等待超时。

有关内核调度程序对象以及一般 Windows 同步的更详细说明，请查看最新版本的“ [Windows Internals](https://rads.stackoverflow.com/amzn/click/com/0735648735) ”——恕我直言，每个 Windows 开发人员都应该在他们的办公桌上拥有一份此副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T10:15:24.573

“当资源空闲时，它们不会发出信号或消息”——当然会——它们是线程间信号机制！当受保护的资源被释放时，等待互斥锁的线程会收到信号并准备好，因此获取互斥锁。

自旋锁通常不在单核处理器上使用——没有意义。TBH，自旋锁在多核和集群系统上也需要非常小心，如果它们的使用不会适得其反。

# iphone - 数组，用正确的索引替换对象，算法

> ID：13354182
> 
> 赞同：0
> 
> 时间：2012-11-13T01:03:41.740
> 
> 标签：iphone, objective-c, ios

我有对象数组，我需要用正确的索引替换对象 ![在此处输入图像描述](../Images/4fd50adfc3e11f9da08460a7718b9006.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T05:05:33.253

目标对象：**29、30、31、32、33、34**

1.  让对象移动和保留。
2.  removeObjectAtIndex：
3.  插入对象：atIndex：
4.  释放临时对象

# scheme - 方案：如何将列表拆分为奇数条目和偶数条目两个列表？

> ID：13354183
> 
> 赞同：2
> 
> 时间：2012-11-13T01:03:43.947
> 
> 标签：scheme, mergesort

我在方案中实现合并排序，我必须通过定义两个辅助方法来实现：合并和拆分。

Merge 需要两个列表（已经按升序排列）并将它们合并在一起。我这样做如下：

```
(define merge 
   (lambda (list1 list2)
       (if (null? list1)
          list2
             (if (null? list2)
                list1
                   (if (< (car list1) (car list2))
                      (cons (car list1) (merge (cdr list1) list2))
                      (cons (car list2) (merge (cdr list2) list1))))))) 
```

拆分方法让我很难过。我找到了一个用两种不同的方法（“奇数”和“偶数”）完成此操作的示例，但我想知道是否有一种方法可以将它们组合成一个称为“拆分”的方法？

此处找到的示例：[方案中的合并排序](http://www.cs.uc.edu/~franco/C511/html/Scheme/mergesrt.html)

我显然对计划很陌生，谁能帮我理解如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T01:08:07.670

一个简单的`split`实现，适合用作 a 的一部分`mergesort`，如下：

```
(define (split lst)
  (let ((half (quotient (length lst) 2)))
    (list (take lst half)
          (drop lst half)))) 
```

它将输入列表分成两半，以列表列表的形式返回它们——第一个列表对应于前半部分，第二个列表对应于输入列表的后半部分。

根据问题的要求，另一种选择是将列表拆分为奇数/偶数元素，如下所示：

```
(define (split lst)
  (list (filter odd? lst)
        (filter even? lst))) 
```

还有另一种选择，通过使用，`partition`您可以一次拆分输入列表：

```
(define (split lst)
  (let-values (((odds evens) (partition odd? lst)))
    (list odds
          evens))) 
```

请注意，*仅*当输入列表仅包含整数时，最后两个替代方案才有用，对于使用您自己的实现对其他数据类型的列表进行排序`mergesort`，最好使用我的第一个版本`split`。

# c# - 后面代码中的jquery隐藏字段值

> ID：13354192
> 
> 赞同：0
> 
> 时间：2012-11-13T01:04:50.900
> 
> 标签：c#, javascript, jquery, asp.net, code-behind

我正在为最好的方法寻找一些建议。

基本上我有一些 javascript 来检测用户是否在移动设备上，如果他们加载了一个 css 文件，一个移动类被添加到页面的主体，并且一个隐藏字段被赋予一个移动值。然后我检查这个隐藏字段的值，这样我就可以运行特定于移动设备的方法。

目前我的一切都按要求工作，但我被迫在第一页加载时进行 javascript 回发，以便可以从后面的代码访问隐藏字段的值。我只是想知道是否有更好的方法来做到这一点？

这是我的一些代码。

```
 if ( navigator.userAgent.match(/Android/i) || navigator.userAgent.match(/iPhone/i) || navigator.userAgent.match(/iPod/i)) {
     $("body").addClass("mobile");
     $('head').append('<link rel="stylesheet" href="Styles/mobile.css" type="text/css" />');
     $('head').append('<meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0;">');
     if ($("#hfdevice").val() != "mobile")
     {
          $("#hfdevice").val("mobile");
          __doPostBack('hfdevice','');
     }
   } 
```

.

```
HiddenField hfdevice = (HiddenField)Master.FindControl("hfdevice");
     if (hfdevice.Value == "mobile")
     {
          Do Stuff
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T01:59:07.643

如果您不想使用响应式设计，您可以像评论中提到的那样检测用户代理。后面的代码是：

```
 string theAgent = Request.UserAgent;
... run your check to see if mobile... change functionality, set cookie, etc. 
```

如果需要，您也可以在 global.ascx 中执行此操作并加载不同的 MasterPage（移动母版页）。

# css - 在图像上映射位置

> ID：13354193
> 
> 赞同：0
> 
> 时间：2012-11-13T01:04:53.093
> 
> 标签：css, xhtml, mapping

我正在研究办公桌位置映射解决方案。

目的是在平面图上的设置位置上有一个图像，我可以对其进行操作以显示工作站状态。

目前，我绘制平面图的过程非常漫长而整洁。

1.  我有一张从 PDF 中获取的地图。
2.  在 Pod 计算机周围放置一个矩形/方形 DIV
3.  将 pod div 位置设置为绝对位置，并通过设置：WIDTH、HEIGHT、TOP:#px、LEFT:#px 移动到位。
4.  在 pod DIV 内放置几个 20px x 20px DIV
5.  将每个工作站 div 位置设置为绝对位置，并通过设置：WIDTH、HEIGHT、TOP:#px、LEFT:#px 移动到位。
6.  在每个桌面 DIV 中放置一个图像（这些图像源由 PHP 根据数据库中该工作站的状态动态编写）

你们能建议更好的方法吗？

是否有程序可以帮助我执行此操作并导出代码？我会以完全错误的方式解决这个问题吗？

我听说一种方法是获取矢量图像并将其映射到图形程序中，然后将其移动到网站中？

![在此处输入图像描述](../Images/e1926c37f0943179202c5583eb8ae714.png)

CSS：

```
/*MAP POSITION*/
#map {height: 521px; width: 900px;  position: relative;}

/*POD POSITION*/
#deskGroup01-01{width:235px; height:120px;  position: absolute; left:8.5em; top: 4.5em;         }

/*WKS POSITIONS*/
#dg1Wks01-001{width:20px; height:20px;  position: absolute;left:1em;  top: 1.5em;}
#dg1Wks01-002{width:20px; height:20px;  position: absolute;left:4.5em; top: 6em;}
#dg1Wks01-003{width:20px; height:20px;  position: absolute;left:7.5em; top: 7.6em;}
#dg1Wks01-004{width:20px; height:20px;  position: absolute;left:14em; top: 7.5em;}
#dg1Wks01-005{width:20px; height:20px;  position: absolute;left:17em; top: 6em;}
#dg1Wks01-006{width:20px; height:20px;  position: absolute;left:19.9em; top: 1.4em;}
#dg1Wks01-007{width:20px; height:20px;  position: absolute;left:13.6em; top: 1.2em;}
#dg1Wks01-008{width:20px; height:20px;  position: absolute;left:10.5em; top: 2.5em;}
#dg1Wks01-009{width:20px; height:20px;  position: absolute;left:7.8em; top: 1.2em;} 
```

HTML：

```
<div id="map">
<img src="images/imagemap.png" border="0" width="900" height="520" usemap="map" />
 <!-- Desk Grouping 1 -->
     <div id="deskGroup01-01">
           <div id="dg2Wks01-001">
        <img  id="01-001" class="trigger" src="<?php select_icon($deskno, $location); ?>" alt="01-001" title="01-001">
       </div>
      </div><!-- end Desk Grouping 1 -->
</div><!-- end lvlmap --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T05:05:10.663

我决定最好的方法是不使用图标，而是使用带有颜色突出显示的图像映射。

我发现地图灯非常有帮助 [http://davidlynch.org/projects/maphilight/docs/](http://davidlynch.org/projects/maphilight/docs/)

对于 Coordinaite 映射，我使用的是 Dream Weaver 设计视图中的绘图工具。

这不像地图上的图标那么理想，但提供了更多的灵活性并且更容易映射。

如果有人有更强大的方法，请添加评论。

# emacs - 为什么 re-search-backward 在 python 模式下会给出不同的结果？

> ID：13354199
> 
> 赞同：3
> 
> 时间：2012-11-13T01:06:00.200
> 
> 标签：emacs, elisp

我已经使用 python-mode 很长时间了。而且我总是使用子词模式。但是 subword-mode 在 python-mode 中表现得很奇怪。例如，`M-b`运动。如果有一个名为的变量`test_varialbe`，并且我将光标放在该变量的末尾，则在 python 模式下`M-b`会使光标指向，`t`而在其他模式下它将转到`v`.

于是我查看了subword-mode的源码，发现如下函数：

```
(defun subword-backward-internal ()
  (if (save-excursion
        (let ((case-fold-search nil))
          (re-search-backward
           (concat
            "\\(\\(\\W\\|[[:lower:][:digit:]]\\)\\([[:upper:]]+\\W*\\)"
            "\\|\\W\\w+\\)")
           nil t)))
      (goto-char
       (cond
        ((and (match-end 3)
              (< 1 (- (match-end 3) (match-beginning 3)))
              (not (eq (point) (match-end 3))))
         (1- (match-end 3)))
        (t
         (1+ (match-beginning 0)))))
    (backward-word 1))) 
```

经过一些测试，我发现`re-search-backward`在不同的模式下给出不同的结果。如果我在python模式下`eval-expression`的表达式，光标会跳转到之前的空格，而在其他模式下它会跳转到。`(let ...)``test_varialbe``-`

为什么是这样？是什么导致`re-search-backward`行为不同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T02:05:33.493

原因是'_'的语法表定义存在差异。

在 Python 模式下，'_' 的语法定义为“word”，而在其他情况下，它被定义为“symbol”。查看[Elisp 手册：语法表](http://www.gnu.org/software/emacs/manual/html_node/elisp/Syntax-Tables.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T15:24:17.013

此外：

掌握标识符，像'forward-word'这样的基本命令在单词语法上使用“_”更有意义。AFAIK Emacs 不提供带有符号的相应命令 WRT。

# javascript - MVC3 应用程序我希望 javascript 方法在传入的路由值上触发

> ID：13354200
> 
> 赞同：0
> 
> 时间：2012-11-13T01:06:06.237
> 
> 标签：javascript, jquery, asp.net-mvc-3

我在 Visual Studio 2010 中有一个 MVC3 应用程序。

我有几个下拉列表的视图，这些下拉列表执行 javascript 调用以根据所选值填充下拉列表，其中一些最初被禁用。

这一切都适用于无的初始状态。但是，如果我将路由值从重定向到此操作传递给下拉列表，我确实正确设置了值，但它没有启用，例如它应该在下拉列表中，并且当我发布表单时，灰色的那些不是传回表格。

我该如何纠正？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T04:54:17.550

禁用的表单字段**不会**被`POST`编辑。将每个下拉列表的值放在单独的隐藏字段中，以便从 POST 开始在服务器上接收。

```
@Html.HiddenFor(x=>x.SomeID_1) 
```

或者

```
<%:Html.HiddenFor(x=>x.SomeID_1)%> 
```

另一种解决方案是使它们只读，但这样你就不能在编辑视图中编辑它们

# javascript - 知道一个字符串是空的还是只包含空格

> ID：13354203
> 
> 赞同：12
> 
> 时间：2012-11-13T01:06:47.027
> 
> 标签：javascript, jquery

我知道我可以使用以下内容来检查 JavaScript 中的字符串是否为空：

```
 if(Message != '') 
```

在这种情况下，我将如何检查字符串“消息”是否为空且不包含多个空格。例如：

```
 '    ' 
```

我需要使用正则表达式吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-13T01:09:26.680

jQuery 不会取代 Javascript。您可以使用：

```
if (Message.replace(/\s/g, "").length > 0) {
    // Your Code
} 
```

话虽如此，如果你真的想要 jQuery 版本，试试[这个](http://api.jquery.com/jQuery.trim/)：

```
if ($.trim(Message).length > 0) {
    // Your Code
} 
```

或者，只要您只针对 IE9+ 和现代浏览器，您就可以使用内置的[修剪](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/Trim)功能。

```
if (Message.trim().length > 0) {
    // Your Code
} 
```

# multithreading - 处理线程之间的状态变化

> ID：13354204
> 
> 赞同：0
> 
> 时间：2012-11-13T01:06:58.290
> 
> 标签：multithreading, oop, design-patterns, concurrency

我有工作线程，它需要根据另一个线程给出的命令（比如与用户交互的线程）执行各种任务。工作线程需要执行以下功能，

一个。一旦启动，工作线程需要等待用户线程给一个任务。
湾。一旦给定一个任务，工作线程需要继续执行该任务，除非另有说明。
C。在任何时间点，用户线程都可以要求工作线程停止（退出）、暂停、继续、暂停和等待另一个任务等。

在处理多线程程序时，我经常遇到这个用例，并且经常最终使用复杂的逻辑（很多 if/else、信号量信号/等待等）

所以我想知道这个用例是否有好的设计模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:09:07.763

[Actor 模型](http://en.wikipedia.org/wiki/Actor_model)可能非常适合这些情况。我正在研究[Akka 工具包，您可以在](http://akka.io)[文档](http://doc.akka.io/docs/akka/snapshot/general/actor-systems.html)中阅读有关使用演员构建软件的更多信息。为了让您对您描述的工作实体的外观有一些印象，请考虑以下代码（用 Scala 编写，但本身应该是描述性的）：

```
trait State
case object Idle extends State   // marker object for the no-work state
case object Active extends State // marker object for when there is work to do
case object Paused extends State // marker for when work is known but paused

class Worker extends Actor extends FSM[State, Option[Work]] {
  startWith(Idle, None) // start out with no work to do
  when(Idle) {
    case Event(DoWork(workPackage), _) =>
      self ! KickMe // message sent to this actor to make it perform some work
      goto(Active) using Some(workPackage)
  }
  when(Active) {
    case Event(KickMe, Some(work)) =>
      execute(work)
      self ! KickMe // this keeps the work going until told otherwise
      stay()
    case Event(Pause, _) =>
      goto(Paused)
  }
  when(Paused) {
    // KickMe messages are ignored in this state, leading to a pause
    case Event(Resume, _) =>
      self ! KickMe
      goto(Active)
  }
  whenUnhandled { // these cases apply in all three states
    case Event(Stop, _) =>
      stop()
    case Event(DropIt, _) =>
      goto(Idle) using None // zero out the current work package
  }

  def execute(work: Work) = ... // whatever there is to do
} 
```

然后，您可以通过向它发送消息来与这样的[状态机](http://en.wikipedia.org/wiki/Finite-state_machine)交互：

```
// initialize Akka
val system = ActorSystem("demo") 
// instantiate the actor, returning an ActorRef
val workerRef = system.actorOf(Props[Worker], name = "Fred")
// send the first work package to get it going
workerRef ! DoWork(new MyWork(...)) // whatever the work package
... // after some time
workerRef ! Pause
... // and then even later maybe
workerRef ! Resume
... // and finally
workerRef ! Stop 
```

上面的实现不是 100% 防弹的（因为我想专注于演示一般原则），而且它也不是在 Akka 中编写这样的东西的唯一方法。重要的部分是你不明确地管理线程，你只管理你的actor，Akka 会注意在线程上运行它们并在它们之间安全地传递消息。如果这看起来很有趣，请随时在[邮件列表](http://groups.google.com/group/akka-user)中查询更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T02:12:05.567

在这里，我发布了一种方法的标题 - 它帮助我作为 while 循环的先决条件：

```
private static final boolean conditionMet (
    final boolean isEventDispatchThread    
    , final List<AWTEvent> pendingEvents
    , final AtomicBoolean isDefaultEventQueue
    , final AtomicBoolean isEventQueueChanging
    , final AtomicReference<DispatchableEventQueue> newEventQueue
    , final AtomicReference<ProgressMonitor> processMessageBlocking
    , final AtomicInteger actionsRemaining
    , final AtomicBoolean interruptAction
    , final AtomicReference<Tuple2<IAction, Throwable>> throwableWasThrownFromChain        
    , final ConcurrentHashMap<IAction, Boolean> valuesReadyToBeSetFromEDT
    , final ConcurrentHashMap<IAction, Boolean> valuesWasSetFromEDT
    , final ConcurrentHashMap<IAction, Boolean> onSwingReadyToBeRunFromEDT
    , final ConcurrentHashMap<IAction, Boolean> onSwingWasActuallyRunFromEDT
    , final FlexReference<Map<String, Object>> remoteRef        
) throws InterruptedException { 
```

我可能仍然想知道这是否是一个好的设计模式，但是通过使用状态机与否，如果你试图在一个地方（同时）让事情变得更简单，那么在另一个地方弄得更大的混乱并不难（健康）状况）。对我来说，中间道路是更高级别的编程，并且理所当然地认为所有这些超时，而不是可用性和死亡。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T09:46:30.407

您的逻辑很可能很复杂，因为您试图让单个实体做太多工作（这会导致 O(N!) 复杂性）。

如果您将线程安全作为策略（线程安全/不安全队列、同步点、标志等）以及其他行为方面，那么工作人员和策略都将是简洁设计的紧凑可重用乐高积木。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T01:13:56.547

```
object thisLock;
bool paused;
bool exit;

void YourThread() {

    while (true)
    {

        lock (thisLock)
        {

            if (exit) return;

            while (paused)
                Monitor.Wait(thisLock);

        }

        //do some work
        //process one item
        //whatever

    }

} 
```

暂停——

```
paused = true; 
```

取消暂停 -

```
lock (thisLock)
{
    paused = false;
    Monitor.Pulse(thisLock);
} 
```

退出

```
exit = true; 
```

# python - 如何在 Homebrew 中对 python 进行符号链接？

> ID：13354207
> 
> 赞同：24
> 
> 时间：2012-11-13T01:07:13.437
> 
> 标签：python, symlink, homebrew

出于某种原因，当我运行“brew link python”时，它没有符号链接。我收到以下错误，我按照它告诉我的去做，但它不起作用。我已经尝试做它告诉我做的事情，但也许我没有正确设置公式名称。此外，当我执行“which python”时，它并不指向 Homebrew python，我也需要帮助修复它。

```
 Linking /usr/local/Cellar/python/2.7.3...Warning: Could not link python. 
    Unlinking....

   Error: Could not symlink file: /usr/local/Cellar/python/2.7.3/bin/smtpd.py
   Target /usr/local/bin/smtpd2.py already exists. You may need to delete it.
   To force the link and delete this file, do:
      brew link --overwrite formula_name 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-11-13T01:35:11.233

你试过了`brew link --overwrite python`吗？

# c# - 如何为整个 c# 应用程序设置默认文化信息

> ID：13354211
> 
> 赞同：61
> 
> 时间：2012-11-13T01:07:38.680
> 
> 标签：c#, c#-4.0, globalization, cultureinfo, invariantculture

我想为该类或整个应用程序设置默认文化信息。

例如在土耳其 3,2 = 英语 3.2

所以应用程序使用我的本地，但我希望它用作默认值

```
System.Globalization.CultureInfo.InvariantCulture 
```

我如何将其设置为该特定类或整个应用程序的默认值

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-11-13T01:11:20.810

不适用于整个应用程序或特定类。

CurrentUICulture 和 CurrentCulture 可以按线程设置，如此处讨论[的有没有为整个应用程序设置文化的方法？所有当前线程和新线程？](https://stackoverflow.com/questions/468791/setting-currentculture-and-currentuiculture-of-an-application). 你根本无法改变`InvariantCulture`。

更改当前线程文化的示例代码：

```
CultureInfo ci = new CultureInfo(theCultureString);
Thread.CurrentThread.CurrentCulture = ci;
Thread.CurrentThread.CurrentUICulture = ci; 
```

对于类，您可以在关键方法中设置/恢复文化，但是对于大多数将文化作为参数之一的格式化相关方法使用适当的覆盖将是非常安全的：

```
(3.3).ToString(new CultureInfo("fr-FR")) 
```

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2012-11-13T19:34:17.997

在 4.0 中，您将需要按照 Alexei 的描述为每个线程设置文化来自行管理。但是在 4.5 中，您可以为 appdomain 定义一种文化，这是处理此问题的首选方式。相关的 API 是[CultureInfo.DefaultThreadCurrentCulture](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.defaultthreadcurrentculture%28v=VS.110%29.aspx)和[CultureInfo.DefaultThreadCurrentUICulture](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.defaultthreadcurrentuiculture.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-28T08:54:16.757

如果您使用语言资源文件在应用程序中设置标签，则需要设置其值：

```
CultureInfo customCulture = new CultureInfo("en-US");
Languages.Culture = customCulture; 
```

# opengl - 带有着色器但没有使用 opengl 的 gluLookAt 的基本外观

> ID：13354216
> 
> 赞同：0
> 
> 时间：2012-11-13T01:08:36.707
> 
> 标签：opengl, shader

我有这个 obj 文件（也尝试过其他更多的 3d 模型）：

```
 Triangle                  
            v 0 0 0                 
            v 0 0.5 0               
            v 1 0 0     
            f 1 2 3 
```

我使用以下顶点着色器：

```
 uniform mat4 projection;
    attribute vec4 pos;

    void main(void)
    {
        gl_Position = projection* pos;
    } 
```

超级简单。如果我只用 uniform_Projection = 单位矩阵运行它，我会看到一个三角形，向上 0.5 和向右 1。似乎是对的。

现在，我想做的是使用相机 ala gluLookAt 以及一些透视投影。这就是我感到困惑的地方。

在世界坐标中，三角形位于上面的顶点位置。因此，让我们选择一只眼睛和一个观察点。眼睛 = (0,0,3)，看 = (0,0,0)。基本上我们希望眼睛位于原点。所以我们必须将世界原点移动到眼睛位置（即使它是单位矩阵也可以这样做）：

```
 | 1 0 0 0 |   | 1 0 0 0 |   | 1 0 0 0 |
   | 0 1 0 0 | * | 0 1 0 0 | = | 0 1 0 0 |
   | 0 0 1 -3|   | 0 0 1 0 |   | 0 0 1 -3| 
   | 0 0 0 1 |   | 0 0 0 1 |   | 0 0 0 1 | 
```

砰，三角形消失了。我所做的只是沿着原始相机的方向移动世界。eye = (0,0,3) 仍然消失.. 超级困惑：SI 已关闭任何形式的剔除等。有人可以向我解释这是如何工作的吗？

因为后来我的想法是这样的：

```
 v = normalize(lookat-eye)
       r = normalize(crossProduct(v, up));
       u = crossProduct(r, v);

       viewMatrix = |r1 r2 r3 -eye1|
                    |u1 u2 u3 -eye1|
                    |v1 v2 v3 -eye1|
                    |0  0  0   1   | 
```

作为一个投影矩阵，我在想（从我的讲座中）：

```
 projMatrix = |1 0 0    0|
                    |0 1 0    0|
                    |0 0 1    0|
                    |0 0 -1/d 1| 
```

或者这个链接： [gluPerspective 在 OpenGL 3.1 中被删除了，有什么替代品吗？](https://stackoverflow.com/questions/2417697/gluperspective-was-removed-in-opengl-3-1-any-replacements) 不能说我现在完全理解其中的任何一个。

对我来说，我似乎不了解坐标系如何工作的一些关键部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T02:32:21.240

你对这个矩阵的问题：

```
| 1 0 0 0 |   | 1 0 0 0 |   | 1 0 0 0 |
| 0 1 0 0 | * | 0 1 0 0 | = | 0 1 0 0 |
| 0 0 1 -3|   | 0 0 1 0 |   | 0 0 1 -3| 
| 0 0 0 1 |   | 0 0 0 1 |   | 0 0 0 1 | 
```

是你翻译了它，但你根本没有调整剪辑平面。默认的单位投影矩阵在 Z 轴上从 -1 剪辑到 1。您已将您的眼睛平移到 Z=3，因此您的新剪裁平面是从 4 到 2，并且您的三角形在此范围之外，因此它被剪裁了。

所以如果你想移动你的眼睛，你需要一个新的投影矩阵。由于您在谈论透视，我建议您自己从 gluPerspective 实现方程，或者下载一个将为您生成投影矩阵的库，例如[OpenGL 数学](http://glm.g-truc.net/)

# object - Corona SDK：连续旋转具有特定参考点的对象

> ID：13354218
> 
> 赞同：2
> 
> 时间：2012-11-13T01:08:38.667
> 
> 标签：object, rotation, coronasdk

我正在尝试通过将其侧向旋转并将其参考点设置为移动方向的底部来进行方形移动。

例如：如果我要将正方形向右移动，我会将它的参考点设置在它的右下角并动画旋转 90 度，移动完成后，我将正方形 X 增加它的宽度并将它的旋转集中设置为 90 度（这样我就可以跟踪它的位置）

问题是，我应该如何继续重复它？因为如果我尝试使用右下角参考点再旋转 90 度，它将不会使用正确的位置。我应该怎么做才能获得新的右下角相对位置？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T12:03:59.347

您将需要一些数学来跟踪新底部的位置，使用一些简单的 2D 旋转公式，因此您在旋转之前计算您希望修改的点。

然后你使用 xReference 和 yReference 变量:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T07:15:15.970

创建一个两倍于正方形宽和高的透明图像。将正方形放在左上角。围绕其中心旋转图像现在将以您描述的方式旋转正方形。

# regex - 正则表达式匹配 1 次或更少出现的字符串？

> ID：13354221
> 
> 赞同：27
> 
> 时间：2012-11-13T01:08:58.880
> 
> 标签：regex

假设我想要一个正则表达式来匹配“Jump over this bridge FOOL”以及“Jump over this bridge”。如何使“FOOL”成为可选（0 或 1 次出现）？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2016-05-05T22:59:25.660

您可以使用`?`标记将组的出现指定为可选（出现 0 或 1 次），也可以使用带有最小值/最大值为 0 和 1 的花括号，因此答案是：

```
Jump over this bridge( FOOL)? 
```

或者

```
Jump over this bridge( FOOL){0,1} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-11-13T01:10:12.653

[您可能想看一下正则表达式教程](http://www.regular-expressions.info/tutorial.html)。

正则表达式的可选部分用问号表示：

```
Jump over this bridge( FOOL)? 
```

如果您想匹配包含少于两次的*任何字符串，事情会变得有点复杂。*`FOOL`那么你最好使用更高级的[负前瞻](http://www.regular-expressions.info/lookaround.html)概念：

```
^(?!(.*FOOL){2}) 
```

这改变了逻辑并断言字符串*不*包含 2 个（或更多）实例`FOOL`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T01:10:05.653

尝试这样做：

```
Jump over this bridge( FOOL)? 
```

您也可以放置一组字符串：

```
Jump over this bridge( FOOL| FOOB)? 
```

# mysql - DISTINCT 和 GROUP BY 之间的性能差异

> ID：13354224
> 
> 赞同：2
> 
> 时间：2012-11-13T01:09:01.030
> 
> 标签：mysql, performance, group-by, distinct

我的理解是，在（My）SQL 中，a应该在所有列上`SELECT DISTINCT`做与 a 相同的事情，除了隐式排序，所以这两个查询应该是相同的：`GROUP BY``GROUP BY`

```
SELECT boardID,threadID FROM posts GROUP BY boardID,threadID ORDER BY NULL LIMIT 100;
SELECT DISTINCT boardID,threadID FROM posts LIMIT 100; 
```

他们都给了我相同的结果，并且他们给出了相同的输出`EXPLAIN`：

```
+----+-------------+-------+------+---------------+------+---------+------+---------+-----------------+
| id | select_type | table | type | possible_keys | key  | key_len | ref  | rows    | Extra           |
+----+-------------+-------+------+---------------+------+---------+------+---------+-----------------+
|  1 | SIMPLE      | posts | ALL  | NULL          | NULL | NULL    | NULL | 1263320 | Using temporary |
+----+-------------+-------+------+---------------+------+---------+------+---------+-----------------+
1 row in set 
```

但是在我的桌子上，查询`DISTINCT`始终会立即返回，而查询则`GROUP BY`需要大约 4 秒。我已禁用查询缓存来测试这一点。

有 25 列，所以我也尝试创建一个单独的表，其中*只*包含boardID 和 threadID 列，但同样的问题和性能差异仍然存在。

我*必须*使用`GROUP BY`而不是`DISTINCT`这样我才能包含其他列，而不会将它们包含在`DISTINCT`. 所以现在我不知道如何进行。为什么有区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T05:11:18.563

首先，您的查询并不完全相同 - GROUP BY 有 ORDER BY，但 DISTINCT 没有。

请注意，在任何一种情况下，都不会使用索引，这对性能没有好处。

我建议创建复合索引`(boardid, threadid)`- 这应该让两个查询都使用索引，并且都应该更快地开始工作

**编辑**：解释为什么`SELECT DISTINCT ... LIMIT 100`比`GROUP BY ... LIMIT 100`没有索引时更快。

要执行第一个语句 ( `SELECT DISTINCT`)，服务器只需要获取 100 行，可能会稍微多一些，并且一旦它有 100 行不同的行就可以停止 - 没有更多工作要做。这是因为原始 SQL 语句没有指定任何顺序，所以服务器可以随意传递任何 100 行，只要它们是不同的。但是，如果您`ORDER BY`之前对此施加任何无索引`LIMIT 100`，则此查询将立即变慢。

要执行第二条语句 ( `SELECT ... GROUP BY ... LIMIT 100`)，MySQL 总是隐含`ORDER BY`在 GROUP BY 中使用的相同列。换句话说，它不能在获取前 100+ 行之后快速停止，直到所有记录都被获取、分组和排序。之后，它会应用`ORDER BY NULL`您添加的内容（我猜这并没有多大作用，但删除它可能会加快速度），最后，它会获得前 100 行并丢弃剩余的结果。当然，这该死的慢。

当您拥有复合索引时，无论哪种情况，所有这些步骤都可以非常快速地完成。

# javascript - AWS Beanstalk 使用 perl 脚本运行 webapp

> ID：13354229
> 
> 赞同：3
> 
> 时间：2012-11-13T01:09:58.147
> 
> 标签：javascript, jquery, perl, amazon-web-services

我已经设置了一个 Beanstalk 应用程序，一切都运行良好，除了我使用 perl 脚本从某些服务器中引入一些 NTP 时间并且它似乎没有执行它。

我已经在我的正常托管服务上运行了这个，我不得不设置一些权限，因为我收到了 500 错误，但是使用 AWS 应用程序我根本没有收到任何错误，我只是得到了 NAN。

它运行一个tomcat实例。

任何帮助将不胜感激。

```
function ntpNewTime() {
    xmlhttp = new XMLHttpRequest();
    xmlhttp.open('GET', '/cgi-bin/server.pl', true);
    xmlhttp.onreadystatechange = updatePage;
    xmlhttp.setRequestHeader(
        'Content-Type',
        'application/x-www-form-urlencoded'
    );
    xmlhttp.send(null);
} 
```

这就是我正在使用的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-04T08:33:05.770

基本上可以使用jquery来测试服务

```
$.ajax( {
          url: '/url/to/post/to',
          type: 'POST',
          dataType: 'html',
          data: $('form#form_id').formSerialize(),
          complete: jsFunctionToCallBack
        }
      ); 
```

[cgiPathPrefix - CGI 搜索路径将从 Web 应用程序根目录 + File.separator + 此前缀开始。默认的 cgiPathPrefix 是 WEB-INF/cgi](http://tomcat.apache.org/tomcat-6.0-doc/cgi-howto.html)

如果您的服务可以通过“/cgi-bin/server.pl”访问，我认为这不是 cgiPathPrefix 问题..

[XMLHttpRequest - 也许这会有所帮助](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest)

此外，您可以在 Fav-Browser 中按 F12 来查看 ajax 调用。如果 ajax 调用使用状态码完成 - server.pl 无法正常工作

# java - KeyListener 不工作

> ID：13354230
> 
> 赞同：3
> 
> 时间：2012-11-13T01:10:00.377
> 
> 标签：java, swing, awt, keylistener

出于某种原因，我的 KeyListener 只是没有响应 KeyPressed 事件。

如果重要的话，我在 Ubuntu 12.04 上。每当按下一个键时，它都应该打印“Key Pressed”，但事实并非如此。

这是代码：

```
import java.awt.event.*;
import javax.swing.*;
import java.awt.Graphics;

public class DisplayPanel extends JPanel
{
    private Tile[][] tiles;
    private Creature[] creatures;
    private Dungeon dungeon;
    private Player player;

    public DisplayPanel(Dungeon dungeon, Tile[][] tiles, Creature[] creatures, Player player)
    {
        this.tiles = tiles;
        this.creatures = creatures;
        this.dungeon = dungeon;
        this.player = player;
        addKeyListener(new DungeonKeyListener());
        requestFocus();
    }

    protected void paintComponent(Graphics g)
    {
        int maximum = (getWidth() < getHeight()) ? getWidth() : getHeight();
        for (Tile[] row : tiles)
        {
            for (Tile tile : row)
            {
                if (tile != null && tile instanceof Tile)
                {
                    tile.draw(g, maximum/tiles.length, maximum/tiles[0].length);
                }
            }
        }
        for (Creature creature : creatures)
        {
            if (creature != null && creature instanceof Creature)
            {
                creature.draw(g, maximum/tiles.length, maximum/tiles[0].length);
            }
        }

        if (player != null && player instanceof Player)
        {
            player.draw(g, maximum/tiles.length, maximum/tiles[0].length);
        }
    }

    private class DungeonKeyListener extends KeyAdapter
    {
        public void keyReleased(KeyEvent e)
        {
            System.out.println("Key pressed!");
            dungeon.press(e.getKeyCode());
            repaint();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-13T01:12:53.230

*   致电`super.paintComponent`（与您的问题无关，但稍后会解决一些问题）
*   使组件“可聚焦” -[`Component#setFocusable`](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#setFocusable%28boolean%29)
*   使用键[绑定](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)`KeyListener`
*   使用`Component#requestFocusInWindow`过`Component#requestFocus`...

来自 Java 文档

> 由于此方法的焦点行为与平台相关，因此强烈建议开发人员尽可能使用 requestFocusInWindow

# ruby-on-rails - 为什么大型作业对象会错过队列？

> ID：13354231
> 
> 赞同：1
> 
> 时间：2012-11-13T01:10:01.510
> 
> 标签：ruby-on-rails, heroku, mongoid, delayed-job

在一个带有 的 rails 项目中`delayed_job`，我遇到了一些奇怪的事情。

我有一个`article`模型，这个模型可以很大，在几个字段中有很多文本段落。

如果我做：

```
an_article.delay.do_something 
```

创建的`Delayed::Job`不会进入队列，它永远不会被标记为失败或成功，而且我的日志不承认它的存在。但是，如果我这样做

```
def self.proxy_method(article_id)
  an_article = Article.find(article_id)
  an_article.do_something
end

Article.proxy_method(an_article.id) 
```

它按预期工作。

关于作业对象的大小是否有一些不成文的规定？为什么A不起作用，但B起作用？

我的一个理论是，因为我有点接近 mongolab（430 / 496 mb）的数据上限，所以这项工作永远不会进入数据库，但我没有日志或错误来真正证明这一点。

* * *

注意：delayed_job 在 heroku、rails 3.1 上使用 mongoid

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-10T12:11:12.500

根据我的经验，永远不要将对象推送到队列中，而是使用对象的 id。这是有问题的并且很难调试。

我在此主题上写了一篇详细的帖子： [https ://stackoverflow.com/a/15672001/226255](https://stackoverflow.com/a/15672001/226255)

# apache - 如何禁用 301 重定向，在 Apache 中将斜杠添加到目录名称

> ID：13354238
> 
> 赞同：14
> 
> 时间：2012-11-13T01:10:24.893
> 
> 标签：apache, mod-rewrite, url-rewriting, apache2

Apache 2.2.20 自动将所有指向目录且没有尾部斜杠的请求重定向到带有尾部斜杠的相同 URL，如下所示：

```
GET /some/path/to/dir HTTP/1.1
Host: www.some.org
...

301 Moved permanently
Location: http://www.some.org/some/path/to/dir/ 
```

在所有情况下，这是一个很好的行为，但我需要为一个特殊文件夹（不是全部）关闭此功能，并且找不到我能做到的。

搜索“重写”规则一无所获——只有指令 LoadModule mod_rewrite.so。此外，目录树中的目录服务器中没有 .htaccess 文件。有没有其他的指令？

**UPD1**我尝试使用下一个配置通过 HTTP 设置 SVN：

```
LoadModule dav_svn_module     /opt/libexec/mod_dav_svn.so
LoadModule authz_svn_module   /opt/libexec/mod_authz_svn.so

NameVirtualHost *:8000
<VirtualHost *:8000>
    ServerAdmin admin@some.host.org
    ServerName some.host.org
    DocumentRoot /path/to/wwwroot
    DAVLockDB /opt/var/lock/davlock/svndavlockdb

   <Directory /path/to/wwwroot>
        Options FollowSymLinks Indexes
#        #AllowOverride None
        Order allow,deny
        Allow from all
   </Directory>

   <Directory /path/to/wwwroot/svn>
        Options FollowSymLinks Indexes
        AllowOverride None
        Order allow,deny
        Allow from all
   </Directory>

    CustomLog /path/to/wwwroot/log/access_log.txt combined
    ErrorLog  /path/to/wwwroot/log/error_log.txt

    <Location /svn>

        #AllowOverride None
        #RewriteEngine Off
        #RewriteOptions AllowNoSlash
        DirectorySlash Off

        DAV svn
        SVNParentPath /path/to/wwwroot/svn
#        SVNListParentPath on

        AuthType Basic
        AuthName "Subversion Repository"
        AuthBasicAuthoritative Off
        AuthUserFile /path/to/wwwroot/svn/.htauthfile
        <Limit GET OPTIONS REPORT PUT POST DELETE PROPFIND PROPPATCH MKCOL COPY MOVE LOCK UNLOCK>
            Require valid-user
        </Limit>
    </Location>

</VirtualHost> 
```

**UPD2**似乎“DirectorySlash Off”指令仅适用于“some.host.org/svn”，不适用于“some.host.org/svn/repo1”、“some.host.org/svn/repo2”等- 子目录不继承此选项。

**UPD3**我尝试将以下行添加到配置中，但结果是相同的 - “DirectorySlash Off”仅适用于“/svn”，不适用于儿童。

```
<LocationMatch "/svn/.*">
    DirectorySlash Off
</LocationMatch> 
```

**已解决** 问题已解决。这是我的错误 - 我将 SVN 存储库根放在 DocumentRoot 文件夹下，所以 apache 和 web_dav 无法理解，谁必须处理请求。这至少适用于 TortoiseSVN 客户端。

来自 SVN 开发者的评论：

这意味着您的 httpd.conf 配置错误。通常，当您将 Subversion 虚拟“位置”定义为同时存在于两个不同的范围内时，就会发生此错误。

例如，如果您已将存储库导出为 ，但您还将 DocumentRoot 设置为 /www，那么您就有麻烦了。当请求 /www/foo/bar 时，apache 不知道是否在 DocumentRoot 中找到名为 /foo/bar 的真实文件，或者是否要求 mod_dav_svn 从 /www/foo 获取文件 /bar存储库。通常前一种情况会获胜，因此会出现“永久移动”错误。

解决方案是确保您的存储库不会重叠或存在于已导出为普通 Web 共享的任何区域内。

您也可能在 Web 根目录中有一个与您的存储库 URL 同名的对象。例如，假设您的 Web 服务器的文档根目录是 /var/www，而您的 Subversion 存储库位于 /home/svn/repo。然后，您将 Apache 配置为在[http://local.host/myrepo](http://local.host/myrepo)为存储库提供服务。如果您随后创建目录 /var/www/myrepo/ 这将导致发生 301 错误。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-13T01:16:22.520

使用 mod_dir 的[DirectorySlash 指令](http://httpd.apache.org/docs/2.2/mod/mod_dir.html#directoryslash)。来自文档的示例：

```
# see security warning in docs
<Location /some/path>
    DirectorySlash Off
    SetHandler some-handler
</Location> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-29T11:25:56.950

添加

```
DirectorySlash Off 
```

为`.htaccess`我工作得很好。

# escaping - 从 sh 中生成 sh 代码：转义

> ID：13354247
> 
> 赞同：2
> 
> 时间：2012-11-13T01:11:40.697
> 
> 标签：escaping, sh

我有一个 shell 变量（我们称之为`x`），其中包含一个带有 shell 元字符的字符串。例如，我可能有

```
abc  "def's"  ghi 
```

由

```
x='abc  "def'\''s"  ghi' 
```

我想从该字符串构建一个 shell 命令（存储在文件中，不执行）。我有哪些选择？

```
echo "prog $x"     >>file     # Doesn't work
echo "prog '$x'"   >>file     # Doesn't work
echo "prog \"$x\"" >>file     # Doesn't work 
```

当前的解决方案使用`sed`

```
y=`echo "$x" | sed 's/\([^a-zA-Z0-9._\-\/]\)/\\\\\1/g'`
echo "prog $y" >>file 
```

输出如下（虽然等效输出也可以）：

```
prog abc\ \ \"def\'s\"\ \ ghi 
```

问题是需要做的地方越来越多。有没有人有更好的解决方案？

笔记：

*   必须为`sh`（而不是`bash`）工作，并且任何东西都`sh`可能被合理地别名为（例如`bash`在`sh`仿真模式下）。
*   它必须尽可能便携（Windows 除外）。
*   使用`perl`是不可接受的，但可以使用*随处可见*的其他 unix 工具。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T01:35:33.650

`sh`有功能。

```
# to_shell_lit() - Creates a shell literal
# Usage:  printf '%s\n' "...$( quote "..." )..."
to_shell_lit() {
    printf \'
    printf %s "$1" | sed "s/'/'\\\\''/g"
    printf \'
} 
```

测试：

```
$ x='abc  "def'\''s"  ghi'

$ printf '%s\n' "$x"
abc  "def's"  ghi

$ printf '%s\n' "prog `to_shell_lit "$x"`"
prog 'abc  "def'\''s"  ghi'

$ printf '%s\n' "prog $( to_shell_lit "`pwd`" )"
prog '/home/ikegami/foo bar' 
```

```
$ printf '%s\n' "$( to_shell_lit "a'b" )"
'a'\''b'

$ printf '%s\n' "$( to_shell_lit '-n' )"
'-n'

$ printf '%s\n' "$( to_shell_lit '\\' )"
'\\'

$ printf '%s\n' "$( to_shell_lit 'foo
bar' )"
'foo
bar' 
```

* * *

采用多个参数的版本：

```
# to_shell_lit() - Creates a shell literal
# Usage:  printf '%s\n' "$( to_shell_lit "..." "..." "..." )"
to_shell_lit() {
    local prefix=''
    local p
    for p in "$@" ; do
        printf "$prefix"\'
        printf %s "$p" | sed "s/'/'\\\\''/g"
        printf \'
        prefix=' '
    done
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-06T06:42:49.530

以下解决方案适用于Bourne shell 可以处理的*所有*输入字符串（包括*换行符*），在大多数系统上不使用外部命令，并且可移植到所有现代 Bourne-like shell：放入此`esceval`函数的每个参数都单独正确打印转义/引用。（我将其命名`esceval`为“逃避评估”，以防您想知道。）

```
esceval()
{
    case $# in 0) return 0; esac
    while :
    do
        printf "'"
        unescaped=$1
        while :
        do
            case $unescaped in
            *\'*)
                printf %s "${unescaped%%\'*}""'\''"
                unescaped=${unescaped#*\'}
            ;;
            *)
                printf %s "$unescaped"
                break
            ;;
            esac
        done
        shift
        case $# in 0) break; esac
        printf "' "
    done
    printf "'\n"
} 
```

对我上面的保证进行了更迂腐的阐述：

1.  上面的代码可移植到所有具有功能的 shell（今天实际使用的所有 shell）`${foo#bar}`和`${foo%%bar}`替换（所有你需要关心的 shell，除非你的目标是 Solaris 10`/bin/sh`或类似的古代遗物）。
2.  上面的代码不需要 fork/exec 任何新进程，除非`printf`它不是你的 shell 中的内置程序（`printf`仅作为外部命令可用的情况很少见，例如`sed`，它几乎总是一个外部命令，我已经看到更多精简的系统有 a`printf`但没有 a `sed`，如果这很重要的话）。

`unescaped`注意：此处发布的版本将一个变量泄漏到全局命名空间`local unescaped`（花括号，虽然如果你走那条路，这在视觉上有点不明显，而且大多数 shell 确实为子 shell 分叉了一个额外的过程）。

另一方面，如果您*确实*需要支持没有那些可变子字符串替换的系统，您可以使用`sed`，但您需要小心正确地转义字符串中的换行等棘手的事情：

```
esceval()
{
    case $# in 0) return 0; esac
    while :
    do
        printf "'"
        printf %s "$1" | sed "s/'/'\\\\''/g"
        shift
        case $# in 0) break; esac
        printf "' "
    done
    printf "'\n"
} 
```

关于尾随换行符的最后说明：您应该注意 Bourne shell 从命令替换中删除尾随换行符（大多数删除所有尾随换行符，一些 shell 只删除一个）。换句话说，请对此感到厌倦：

```
# Literal strings work fine:
esceval 'foo

'

# Quoted variable substitution also works fine:
ln='
'
esceval "foo$ln$ln$ln$ln"

# Breaks - newlines never make it into `esceval`:
esceval "`printf 'foo\n\n\n\n'`" 
```

PS 还有我制作的这个怪物，它是一个 polyfill，它将在前两个版本之间进行选择，具体取决于你的 shell 是否能够支持必要的变量替换语法（虽然看起来很糟糕，因为只有 shell 的版本必须放在一个 eval-ed 字符串中，以防止不兼容的 shell 在看到它时停止）：[https ://github.com/mentalisttraceur/esceval/blob/master/sh/esceval.sh](https://github.com/mentalisttraceur/esceval/blob/master/sh/esceval.sh)

# c# - 为屏幕保护程序设置 SystemParametersInfo 未按预期运行

> ID：13354259
> 
> 赞同：0
> 
> 时间：2012-11-13T01:13:31.850
> 
> 标签：c#, dllimport, screensaver

所以我有一些我正在使用的代码应该禁用屏幕保护程序超时

```
 [DllImport("user32.dll", CharSet = CharSet.Auto)]
    private static extern bool SystemParametersInfo(
        int uAction, int uParam, ref int lpvParam,
        int flags);

    [DllImport("user32.dll", CharSet = CharSet.Auto)]
    private static extern bool SystemParametersInfo(
        int uAction, int uParam, ref bool lpvParam,
        int flags);

SystemParametersInfo(15, Value, ref nullVar, 2); 
```

我还有一个获取当前屏幕保护程序超时值的功能，

```
SystemParametersInfo(14, 0, ref value, 0); 
```

当我尝试将此值设置为 0 超时时，一旦我获得当前值，它就会返回 600 的值。

看起来好像我设置的值实际上并没有被设置。

有谁知道这可能是什么原因？顺便说一句，我在 Windows 7 x64 机器上，并且在设置此策略的域上（我相信）。

谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T01:34:21.150

尝试将其设置为 -1 而不是 0，也许它可以工作......

# php - 子文件夹中的 Codeigniter URL 尾部斜杠中断

> ID：13354265
> 
> 赞同：0
> 
> 时间：2012-11-13T01:14:46.577
> 
> 标签：php, .htaccess, codeigniter

我有一个基于 Codeigniter 的站点，当我在默认目录中时，www.removed.com... 我没有问题。如果我去这里：www.removed.com/ 它工作得很好。

问题是当我导航到 /admin 文件夹时（实际上只是 application/controllers/admin/dashboard.php .....在路由配置中正确路由。

如果我在 admin 下的任何内容（如 remove.com/admin/users/）的末尾添加一个斜杠，整个网站都会中断，并且 url 会尝试插入一个相对于我的根目录的 url： [http ://www.removed.com /home/accountName/public_html/skc/admin/users](http://www.removed.com/home/accountName/public_html/skc/admin/users)

有任何想法吗？

这是我的 .htaccess

```
<IfModule mod_rewrite.c>

RewriteEngine On

### Canonicalize codeigniter URLs

# If your default controller is something other than
# "welcome" you should probably change this
# RewriteRule ^(welcome(/index)?|index(\.php)?)/?$ / [L,R=301]
# RewriteRule ^(.*)/index/?$ $1 [L,R=301]

# Removes trailing slashes (prevents SEO duplicate content issues)
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.+)/$ $1 [L,R=301]

# Enforce www
# If you have subdomains, you can add them to 
# the list using the "|" (OR) regex operator
# RewriteCond %{HTTP_HOST} !^(www|subdomain) [NC]
# RewriteRule ^(.*)$ http://www.domain.tld/$1 [L,R=301]

# Enforce NO www
# RewriteCond %{HTTP_HOST} ^www\.removed\.com [NC]
# RewriteRule (.*) http://removed.com/$1 [R=301,L]

###

# Removes access to the system folder by users.
# Additionally this will allow you to create a System.php controller,
# previously this would not have been possible.
# 'system' can be replaced if you have renamed your system folder.
RewriteCond %{REQUEST_URI} ^ci.*
RewriteRule ^(.*)$ index.php/$1 [L]

# Checks to see if the user is attempting to access a valid file,
# such as an image or css document, if this isn't true it sends the
# request to index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L]

</IfModule>

<IfModule !mod_rewrite.c>

# Without mod_rewrite, route 404's to the front controller
ErrorDocument 404 /index.php

</IfModule> 
```

这是路线配置（根据要求）：

```
$route['default_controller'] = "main";
$route['404_override'] = '';
$route['about'] = "main/about";
$route['news'] = "main/news";
$route['bikes'] = "main/bikes";
$route['gallery'] = "main/gallery";
$route['contact'] = "main/contact";

$route['admin'] = "admin/dashboard";
$route['admin/login'] = "admin/dashboard/login";
$route['admin/logout'] = "admin/dashboard/logout";
$route['admin/users/view-user'] = "admin/users/view_user";
$route['admin/users/view-user/:num'] = "admin/users/view_user"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T13:09:40.720

更改此条件以排除 admin 目录：

```
RewriteCond %{REQUEST_URI} ^ci.* 
```

此外，您目前在这里使用黑名单方法，白名单方法会更有效。因此，例如，如果您将所有图像、css 和 javascript 文件都放在“资产”目录中，如果我们假设这是需要从外部世界访问的所有内容，您应该这样做：

```
RewriteCond %{REQUEST_URI} !^(index\.php|assets\/.*\..*) 
```

# php - PHP前端用户队列

> ID：13354266
> 
> 赞同：0
> 
> 时间：2012-11-13T01:14:47.527
> 
> 标签：php, javascript, mysql, queue

我正在建立一个用户可以控制网络摄像头左右转动的网站。每个用户都有一分钟的行动。网站上将有一个排队系统，允许用户一个一个地控制摄像机。所以我的问题如下，有人对如何构建这个排队系统有建议吗？我可以使用任何教程或代码吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T09:21:09.207

有一个数据库表来跟踪队列，例如：

> 队列（id、session_id、start_time、last_update）

当用户点击您的页面时，将他们插入到队列表中。在页面上使用常规的 ajax 调用（可能是 30 秒）来轮询服务器以查看当前用户是否已打开。如果用户是表中的第一条记录，那么就轮到他了，因此将 start_time 更新为当前时间并发送您的 ajax 响应，告诉浏览器显示带有相机移动按钮的 UI。

当一个按钮被按下时，在服务器端验证它实际上是这个用户转动并且他的 start_time 是 < 1 分钟前，然后才允许该操作。如果轮到他，将他从表中删除，以便下一个用户成为第一条记录并轮到他，然后向浏览器发送响应，以便它可以隐藏相机 UI 并发出消息。

除了在点击页面时插入队列之外，还要检查控制相机的用户是否有 1 分钟，如果有，则删除他的记录（或者可以在下面的 cronjob 上完成）。

每次 ajax 轮询触发时，`last_update`使用时间戳更新用户。使用 cronjob 或仅在服务器端调用来检查他队列中的任何记录是否有一个`last_update`早于较短时间的记录，例如 30 秒。如果找到任何记录，则删除它们，因为这些用户不再是在页面上。这也将防止攻击者试图填满您的队列。

在同一个 cronjob 上，检查轮到它的用户是否已`start_time`填充，如果 30 秒后他还没有启动，则从队列中删除。

ajax 调用将使它变得漂亮和无缝，但它们不是必需的，如果用户禁用了 Javascript，您仍然可以检测到并使用整个页面的元刷新来代替。

# php - 在 phpmyadmin 中查询成功，在 php 中查询失败

> ID：13354274
> 
> 赞同：0
> 
> 时间：2012-11-13T01:16:05.590
> 
> 标签：php, mysql, phpmyadmin

谁能告诉我一个查询在 php 中返回的数据与它在 phpmyadmin sql 上返回的数据不同的原因？

```
$query = "UPDATE `boards` SET `contestPlaces`=0, `contestPlacesFilled`=0";  
$result = mysql_query($query) or die("ERROR:QUERY_FAILED timeset 8" . mysql_error()); 

$query = "UPDATE `playerspoints` SET `points`=0";   
$result = mysql_query($query) or die("ERROR:QUERY_FAILED timeset 9" . mysql_error());

$query = "SELECT `avatarId`, `points` FROM `contestants`"; 
$result = mysql_query($query) or die("ERROR:QUERY_FAILED timeset 10" . mysql_error());

$qualified = array();

while($row = mysql_fetch_row($result));
{
    print_r($row);
    $qualified[] = $row;
} ` 
```

结果：数组（ [0] => ）成功。

我没有收到错误，它只返回一个空结果，而在 phpmyadmin sql 选项卡中，它运行良好。我与数据库正确连接，因为我在此之前运行查询。我检查了一下，这是唯一一个没有明显原因的失败。那么我应该怎么看才能知道出了什么问题呢？

我连接到数据库的用户具有以下权限： `SELECT, INSERT, UPDATE, DELETE, CREATE, DROP, INDEX, ALTER, CREATE TEMPORARY TABLES, CREATE VIEW, EVENT, TRIGGER, SHOW VIEW, CREATE ROUTINE, ALTER ROUTINE, EXECUTE`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T01:54:37.793

删除分号：

```
while($row = mysql_fetch_row($result));
                                      ^ 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-03-05T09:31:26.257

//这是php5.7.14中的最新代码并访问数据库.....但它仍然无法正常工作。//因此，我发现数据库联盟不是'utf_general_ci'，而是我保持默认导致'latin_swedish'。//一个错误可能会毁了你的项目。

```
<?php
$mysqli_hostname = "localhost";
$mysqli_user = "root";
$mysqli_password = "krunal";
$mysqli_database = "krunal";
$bd = mysqli_connect($mysqli_hostname, $mysqli_user,  $mysqli_password,$mysqli_database);  
if(mysqli_connect_errno()){die("database connection  failed");}
?>

<?php 
 $sql= "SELECT * FROM `done`;";
$result=mysqli_query($bd,$sql);
if(!$result){
die("database query failed". mysqli_connect_error()."    (".mysqli_connect_errno().")");}?>

<?php while($row=mysqli_fetch_row($result)){
var_dump($row); }?>

<?php mysqli_close($bd);?> 
```

# python - 使用 simpleMediaWiki 访问编辑令牌（无法识别操作字段）

> ID：13354275
> 
> 赞同：1
> 
> 时间：2012-11-13T01:16:18.010
> 
> 标签：python, api, mediawiki, token, mediawiki-api

我无法访问我的媒体 wiki 站点的编辑令牌。使用以下代码，我应该能够使用 simpleMediWiki 站点登录，然后请求编辑令牌，最后进行编辑。不幸的是，我收到一个错误，即“编辑”参数是一个无法识别的参数：

```
{'error': {'info': "Unrecognized value for parameter 'action': token", 'code': 'unknown_action'}} 
```

这是我的代码：

```
from simplemediawiki import MediaWiki

wiki = MediaWiki('http://domain/api.php')
#the following logs me in
loginData = wiki.call({'action':'login', 'lgname':'myUserName','lgpassword':'myPassword'})

#The following is a resubmission of the login token
personalLoginData = wiki.call({'action':'login', 'lgname':'myUserName','lgpassword':'myPassword','lgtoken': loginData['login']['token']})

#the following is THE TROUBLESOME REQUEST FOR AN EDIT TOKEN
editTokenDict = wiki.call({'action':'tokens','type':'edit'}) 

#the following is an edit
results = wiki.call({'action':'edit','title':"ArticleTitle",'text':"This is the page",'tokens':editTokenDict['login']['token']}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T08:00:16.643

我想通了，答案是 mediaWiki 1.19.2 不支持这个查询选项。最新版本的 mediaWiki 支持此查询选项，但是对于其他所有内容 - 您必须使用查询操作来访问编辑令牌。例如：

```
returnData = wiki.call({'action':'query','prop':'info', 'titles':'Main_Page','intoken':'edit'});

#keep in mind the edittoken is the same for every page, and that's why we preform the query action on the Main_Page
#then you must use the following to get the edittoken: 

edittoken = returnData['query']['pages']['1']['edittoken'] 
```

# c# - DataGridView CheckBox 单元格/列事件

> ID：13354277
> 
> 赞同：1
> 
> 时间：2012-11-13T01:16:56.487
> 
> 标签：c#, datagridview, checkbox, event-handling, click

如何在 DataGridView 的 CheckBoxColumn 中订阅 CheckBox 的事件处理程序，类似于常规 CheckBox 的 CheckChanged 或 Click 事件处理程序？我的应用程序的多个数据网格中有一个或多个列，我想为此执行此操作。

我查看了 CellContentClick 和 CellClick，但它们似乎完全不优雅，因为它们会在数据网格中的每次单击时触发，而不仅仅是针对感兴趣的 Cell 或 CheckBox。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T19:39:01.353

下面的解决方案来自于 MSDN 文档，以及在这里和 CodeProject 上的一些切线线程中的一点运气。

这个想法是创建一个派生自 DataGridViewCheckBoxCell 的类，其中包括一个与 ContentClick 一起触发的处理程序。这对于一个 DataGridView 来说可能看起来有很多开销，但我的应用程序有很多 DataGridView，所以这段代码是可重用的，从而节省了时间。

```
/// <summary>
/// DataGridView cell class for check box cells with a OnContentClick event handler.
/// </summary>
public class DataGridViewEventCheckBoxCell : DataGridViewCheckBoxCell
{
    /// <summary>
    /// Event handler for OnContentClick event.
    /// </summary>
    protected EventHandler<DataGridViewCellEventArgs> ContentClickEventHandler { get; set; }

    /// <summary>
    /// Empty constructor. Required. Used by Clone mechanism
    /// </summary>
    public DataGridViewEventCheckBoxCell()
        : base()
    { }

    /// <summary>
    /// Pass through constructor for threeState parameter.
    /// </summary>
    /// <param name="threeState">True for three state check boxes, True, False, Indeterminate.</param>
    public DataGridViewEventCheckBoxCell(bool threeState)
        : base(threeState)
    { }

    /// <summary>
    /// Constructor to set the OnContentClick event handler.  
    /// Signature for handler should be (object sender, DataGridViewCellEventArgs e)
    /// The sender will be the DataGridViewCell that is clicked.
    /// </summary>
    /// <param name="handler">Handler for OnContentClick event</param>
    /// <param name="threeState">True for three state check boxes, True, False, Indeterminate.</param>
    public DataGridViewEventCheckBoxCell(EventHandler<DataGridViewCellEventArgs> handler, bool threeState)
        : base(threeState)
    {
        ContentClickEventHandler = handler;
    }

    /// <summary>
    /// Clone method override.  Required so CheckEventHandler property is cloned.
    /// Individual DataGridViewCells are cloned from the DataGridViewColumn.CellTemplate
    /// </summary>
    /// <returns></returns>
    public override object Clone()
    {
        DataGridViewEventCheckBoxCell clone = (DataGridViewEventCheckBoxCell)base.Clone();
        clone.ContentClickEventHandler = ContentClickEventHandler;
        return clone;
    }

    /// <summary>
    /// Override implementing OnContentClick event propagation 
    /// </summary>
    /// <param name="e">Event arg object, which contains row and column indexes.</param>
    protected override void OnContentClick(DataGridViewCellEventArgs e)
    {
        base.OnContentClick(e);
        if (ContentClickEventHandler != null)
            ContentClickEventHandler(this, e);
    }

    /// <summary>
    /// Override implementing OnContentDoubleClick event propagation 
    /// Required so fast clicks are handled properly.
    /// </summary>
    /// <param name="e">Event arg object, which contains row and column indexes.</param>
    protected override void OnContentDoubleClick(DataGridViewCellEventArgs e)
    {
        base.OnContentDoubleClick(e);
        if (ContentClickEventHandler != null)
            ContentClickEventHandler(this, e);
    }
} 
```

因为我希望能够从列类中引用这个单元格类，所以我还实现了一个派生自 DataGridViewCheckBoxColumn 的类：

```
/// <summary>
/// DataGridView column class for a check box column with cells that have an OnContentClick handler.
/// </summary>
public class DataGridViewEventCheckBoxColumn : DataGridViewCheckBoxColumn
{
    /// <summary>
    /// Empty constructor.  Pass through to base constructor
    /// </summary>
    public DataGridViewEventCheckBoxColumn()
        : base()
    { }

    /// <summary>
    /// Pass through to base constructor with threeState parameter
    /// </summary>
    /// <param name="threeState">True for three state check boxes, True, False, Indeterminate.</param>
    public DataGridViewEventCheckBoxColumn(bool threeState)
        : base(threeState)
    { }

    /// <summary>
    /// Constructor for setting the OnContentClick event handler for the cell template.
    /// Note that the handler will be called for all clicks, even if the DataGridView is ReadOnly.
    /// For the "new" state of the checkbox, use the EditedFormattedValue property of the cell.
    /// </summary>
    /// <param name="handler">Event handler for OnContentClick.</param>
    /// <param name="threeState">True for three state check boxes, True, False, Indeterminate.</param>
    public DataGridViewEventCheckBoxColumn(EventHandler<DataGridViewCellEventArgs> handler, bool threeState)
        : base(threeState)
    {
        CellTemplate = new DataGridViewEventCheckBoxCell(handler, threeState);
    }
} 
```

修剪掉多余的代码，我像这样使用它：

```
public void AddCheckBoxColumn(DataGridView grid, EventHandler<DataGridViewCellEventArgs> handler, bool threeState)
{
   grid.Columns.Add(new DataGridViewEventCheckBoxColumn(handler, threeState));
} 
```

列类可以去掉，可以按如下方式使用：

```
public void AddCheckBoxColumn(DataGridView grid, EventHandler<DataGridViewCellEventArgs> handler, bool threeState)
{
   DataGridViewCheckBoxColumn column = new DataGridViewCheckBoxColumn(threeState);
   column.CellTemplate = new DataGridViewEventCheckBoxCell(handler, threeState);
   grid.Columns.Add(column);
} 
```

这是一个示例事件处理程序。数据网格中另一列的状态会根据该列的值和 WasReleased 属性中的某些状态信息进行更新。DataGridView 的 DataSource 是 Specimen 对象的集合，所以每一行的 DataBoundItem 都是一个 Specimen。Specimen 类是特定于应用程序的，但它具有属性 OnHold，由该列显示；IsReleased，由另一列显示；和被释放。

```
 public static void OnHoldCheckClick(object sender, DataGridViewCellEventArgs e)
    {
        if (sender is DataGridViewEventCheckBoxCell)
        {
            DataGridViewEventCheckBoxCell cell = sender as DataGridViewEventCheckBoxCell;

            if (!cell.ReadOnly)
            {
                // The rows in the DataGridView are bound to Specimen objects
                Specimen specimen = (Specimen)cell.OwningRow.DataBoundItem;
                // Modify the underlying data source
                if ((bool)cell.EditedFormattedValue)
                    specimen.IsReleased = false;
                else if (specimen.WasReleased)
                    specimen.IsReleased = true;
                // Then invalidate the cell in the other column to force it to redraw
                DataGridViewCell releasedCell = cell.OwningRow.Cells["IsReleased"];
                cell.DataGridView.InvalidateCell(releasedCell);
            }
        }
    } 
```

好的样式可能会将事件处理程序中的一些代码下推到 Specimen 类中的方法中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T01:32:42.777

您可以使用

e.Item.Cells[1].Text

这里 e 是当前行和第二个单元格记住单元格索引总是从 0 索引开始

# java - 如何在Java中找到数组中的第二大数字？

> ID：13354278
> 
> 赞同：3
> 
> 时间：2012-11-13T01:17:00.230
> 
> 标签：java, arrays

我只是在练习一些 MIT Java 作业。但是，我不确定如何找到第二大数字。[http://ocw.csail.mit.edu/f/13](http://ocw.csail.mit.edu/f/13)

```
 public class Marathon {
    public static void main(String[] arguments) {
        String[] names = { "Elena", "Thomas", "Hamilton", "Suzie", "Phil",
                "Matt", "Alex", "Emma", "John", "James", "Jane", "Emily",
                "Daniel", "Neda", "Aaron", "Kate" };

        int[] times = { 341, 273, 278, 329, 445, 402, 388, 275, 243, 334, 412,
                393, 299, 343, 317, 265 };

        for (int i = 0; i < names.length; i++) {
            System.out.println(names[i] + ": " + times[i]);
        }

        System.out.println();
        System.out.println("Largest Timing " + Largest(times));
        System.out.println();

    }

    public static int Largest(int[] times) {
        int maxValue = times[0];

        for (int i = 1; i < times.length; i++) {
            if (times[i] > maxValue) {
                maxValue = times[i];
            }
        }
        return maxValue;
    }

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T01:24:06.380

您可以简单地执行以下操作，而不是对数组进行排序：

*   保持一个`largestValue`和一个`secondLargestValue`
*   对于每个元素，遍历整个数组一次：
    *   检查当前元素是否大于`largestValue`：
        *   如果是这样，则分配`largestValue`给`secondLargestValue`，然后将当前元素分配给`largestValue`（将其视为将所有内容向下移动 1）
        *   如果不是，检查当前元素是否大于`secondLargestValue`
            *   如果是，则将当前元素分配给`secondLargestValue`
            *   如果没有，什么也不做。

**O(n)**运行时间

**O(1)**空间要求

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T01:24:51.723

简单地对数组进行排序以查找[订单统计信息](http://en.wikipedia.org/wiki/Order_statistic)太浪费了。您可以按照与您已有的算法类似的算法找到第二大元素，并使用一个表示第二大数字的附加变量。

目前，下一个元素可能大于最大值或等于/小于最大值，因此单个元素就`if`足够了：

```
if (times[i] > maxValue) {
    maxValue = times[i];
} 
```

考虑到两个变量，下一个元素可能是

*   **大于最大值**- 最大值变为第二大，下一个元素变为最大值
*   **小于最大值但大于第二大**- 下一个元素变为第二大。

必须特别注意初始状态。查看前两项，将较大的分配给`max`，将较小的分配给第二大；如果有元素，则从元素号 3 开始循环。

以下是您如何对其进行编码：

```
if (times[i] > maxValue) {
    secondLargest = maxValue;
    maxValue = times[i];
} else if (times[i] > secondLargest) {
    secondLargest = times[i];
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-03T07:15:26.503

```
private static int secLargest(int[] numbers) {
        int maxVal = 0;
        int nextMaxVal = 0;
        for (int i = 0; i < numbers.length; i++) {
            if (numbers[i] > maxVal) {
                nextMaxVal = maxVal;
                maxVal = numbers[i];

            }
            if (numbers[i] < maxVal) {
                nextMaxVal = maxVal;
                maxVal = numbers[i];

            }
        }
        return nextMaxVal;

    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-13T01:23:04.827

通常来说，一般来说：

有两个值——“最大”和“不完全”。

将两者都初始化为 -9999 或其他值。

浏览您的列表。如果数字大于“最大”，则将“最大”设置为该数字。但在你这样做之前，将旧的“最大”值复制到“notQuite”。

另一方面，如果该数字小于“最大”但**大于**“notQuite”，则将“notQuite”设置为该数字。

当您检查完所有数字后，“notQuite”包含第二大数字。

请注意，在填写上述数字时，您还可以保留“largestIndex”和“notQuiteIndex”，并用相应的数组索引值填写它们，以便识别“获胜”值。不幸的是，如果有多个相同的“最大”或“次大”值，简单的索引方案不起作用，您需要保留某种列表。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-06-26T10:55:39.493

```
 private void secondLargest(int arr[]){

    int maxOne=arr[0];
    int maxTwo=arr[1];

    for(int i=0;i<arr.length;i++){

        if(arr[i]>maxOne){

            maxTwo=maxOne;
            maxOne=arr[i];
        }else if (arr[i]>maxTwo) {

            maxTwo=arr[i];
        }

    }

    System.out.println(maxOne);
    System.out.println(maxTwo);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-26T11:50:28.640

更新：更改为 Java。

```
class Main {
  public static void main(String[] args) {
    int a = Integer.MIN_VALUE;
    int b = Integer.MIN_VALUE;
    int[] arr = {44,6,43,8,9,-10,4,15,3,-30,23};

    for(int i=0; i < arr.length; i++){ 
        if( arr[i] > a || arr[i] > b ){
          if( a < b ) {
            a = arr[i];
          } else {
            b = arr[i];
          }
        }
    }  
    int secondLargest = a < b ? a : b;
    System.out.println(secondLargest);
  }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-12T03:10:40.883

如果最大数字出现两次以及在单个 for 循环中，它还将提取第二大数字。

```
import java.util.*;
public class SecondLargestInArray
{
    public static void main(String[] args)
    {
        int arr[] = {99,14,46,47,86,92,52,48,36,66,85,92};
        int largest = arr[0];
        int secondLargest = arr[0];
        System.out.println("The given array is:" );
        for (int i = 0; i < arr.length; i++)
        {
            System.out.print(arr[i]+"\t");
        }

        for (int i = 0; i < arr.length; i++)
        {
            if (arr[i] > largest)
            {
                secondLargest = largest;
                largest = arr[i];
            }
            else if((arr[i]<largest && arr[i]>secondLargest) || largest==secondLargest)
            {
                secondLargest=arr[i];
            }
        }
        System.out.println("\nLargest number is:" + largest);
        System.out.println("\nSecond largest number is:" + secondLargest);
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-12-18T07:47:05.477

```
public static void main (String args[]) {
    int [] arr = {1,4,3,10,4,8,20,5,33};
    int largest = 0;
    int secondLargest = 0;
    for (int x : arr) {
        if (x > largest) {
            secondLargest = largest;
            largest = x;
        }
        else if (x > secondLargest) {
            secondLargest = x;
        }
    }
    System.out.println("secondLargest:"+secondLargest);
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-10-21T20:19:08.543

```
int largest=time[0];
int secondLargest=largest;
for(int i=0;i<time.length;i++){
    if(time[i]>largest){
        secondLargest=largest;
        largest=time[i];
    }
    else if(secondLargest<time[i] && time[i]<largest || secondLargest>=largest)
        secondLargest=time[i];
}
return secondLargest; 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-05-30T12:14:14.090

```
public void findMax(int a[]) {
    int large = Integer.MIN_VALUE;
    int secondLarge = Integer.MIN_VALUE;
    for (int i = 0; i < a.length; i++) {
        if (large < a[i]) {
            secondLarge = large;
            large = a[i];
        } else if (a[i] > secondLarge) {
            if (a[i] != large) {
                secondLarge = a[i];
            }
        }
    }
    System.out.println("Large number " + large + " Second Large  number " + secondLarge);
} 
```

上面的代码已经用具有重复条目、负值的整数数组进行了测试。一次检索最大数和第二大数。仅当数组仅包含相同数字的多个副本（例如 {8,8,8,8}）或只有一个数字时，此代码才会失败。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-06-09T03:52:39.923

查找给定数组中的第二大元素：

```
public static void findSecondMax(){
        int[] arr = {3, 2, 20, 4, 1, 9, 6, 3, 8};

        int max = 0;
        int secondMax = 0;

        for(int i =0; i< arr.length; i++) {

            if(max < arr[i]) max = arr[i];

            if((max > arr[i]) && (secondMax < arr[i])) secondMax = arr[i];

        }

        System.out.println(secondMax);
    } 
```

# iphone - Apple 为应用内购买提供什么样的内容，在什么条件下？

> ID：13354280
> 
> 赞同：9
> 
> 时间：2012-11-13T01:17:04.987
> 
> 标签：iphone, ios, ipad, in-app-purchase

我听说 Apple 为应用内购买提供托管内容。我们正在开发一个应用程序，用户可以在其中购买每个大约 5 MB 的小视频剪辑。

我找不到有关 Apple 托管的条件、托管方式以及收费多少的详细信息。一些开发人员说它只在 iOS 6 中可用。这令人困惑。

是否也可以在 Apple 托管内容，用户无需进行应用内购买即可轻松下载这些内容？

应用内购买可以免费吗？

有人可以澄清并提供苹果官方信息的链接吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T01:33:49.363

您可以在本文档（第 30 页）中找到有关条件的一些信息 -[使用 Application Loader](https://itunesconnect.apple.com/docs/UsingApplicationLoader.pdf)

它是免费的，但每个包最多可以托管 2 GB（应用程序的限制相同）

有用的文章：[为 iOS 6 应用内购买配置和创建 App Store 托管内容](http://www.techotopia.com/index.php/Configuring_and_Creating_App_Store_Hosted_Content_for_iOS_6_In-App_Purchases)以及[对 StoreKit 的更改](http://docs.xamarin.com/ios/Guides/Platform_Features/Introduction_to_iOS_6/Changes_to_StoreKit)

托管内容仅适用于非消耗品购买，不能免费。所以我认为在那里托管一些免费内容是不可能的。

# android - 适用于 Android 的 AR.Drone 开发

> ID：13354293
> 
> 赞同：0
> 
> 时间：2012-11-13T01:18:30.953
> 
> 标签：android, c++, iphone, ar.drone

我知道AR.Drone 是安卓手机可控的。

但是我找不到任何开放的 Java 源代码供我开发！

我发现的只是类型为 .h 的代码，我只知道 C++（iPhone 用户）！

任何人都可以给我一些想法在 Eclipse 上使用 Java 代码开发 AR.Drone 吗？

谢谢
:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T01:23:41.110

有 javadrone ( [http://code.google.com/p/javadrone/](http://code.google.com/p/javadrone/) ) 注意：这个库与 AR.Drone 2.0 有问题 - 已修复 (至少用于飞行)：[https ://github.com/xperimental /moder.AR.drone/blob/master/library_projects/javadrone-api/src/com/codeminders/ardrone/ARDrone.java](https://github.com/xperimental/moder.AR.drone/blob/master/library_projects/javadrone-api/src/com/codeminders/ardrone/ARDrone.java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-20T22:26:35.823

我们将[yaDrone](http://vsis-www.informatik.uni-hamburg.de/oldServer/teaching//projects/yadrone/)用于[自主无人机项目](http://henning-gross.de/tubesync.php?v=W3siaWQiOiJkNGgyUWpkUmVYdyIsInN0YXJ0IjowfSx7ImlkIjoieVpNRTNUbXBLUzgiLCJzdGFydCI6MH1d#play)——该库非常可靠。

此外，还有一个[yaDrone 的 eclipse 教程](http://vsis-www.informatik.uni-hamburg.de/oldServer/teaching//projects/yadrone/tutorial/tutorial.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T01:24:25.617

AR Drone 应用程序编程接口 API 可以在这里找到：

[https://projects.ardrone.org/](https://projects.ardrone.org/)

该 API 使用 c++ 编写，如果您打算为 iphone 开发，则必须从头开始编写应用程序，因为目前存在于 iphon 上的应用程序是商业应用程序。（封闭源）。

和 android 一样，因为它们是由 parrot 开发的。

我使用计算机为 ar 无人机开发，这要容易得多，这取决于您要在计算机上开发的内容。如果您需要更多帮助，我建议您在这里询问：

[http://www.ardrone-flyers.com/](http://www.ardrone-flyers.com/)

祝你好运

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-23T05:50:37.217

如果您需要构建一个 IOS 应用程序，您可以使用 Memo Akten 的 openFramework 和 ofxARDRone 来控制和获取视频。这个框架是用 C++ 编写的。您也可以在 XCode 中使用此框架并为 IOS 构建。

# python - Python numpy 掩码数组初始化

> ID：13354295
> 
> 赞同：5
> 
> 时间：2012-11-13T01:18:47.720
> 
> 标签：python, arrays, numpy, initialization

我在工作中一直使用屏蔽数组，但我遇到的一个问题是屏蔽数组的初始化有点笨拙。具体来说， ma.zeros() 和 ma.empty() 返回带有与**数组维度不匹配的掩码的掩码数组。**我想要这个的原因是，如果我不分配给我的数组的特定元素，默认情况下它会被屏蔽。

```
In [4]: A=ma.zeros((3,))
...
masked_array(data = [ 0\.  0\.  0.],
             mask = False,
       fill_value = 1e+20) 
```

我随后可以分配掩码：

```
In [6]: A.mask=ones((3,))
...
masked_array(data = [-- -- --],
             mask = [ True  True  True],
       fill_value = 1e+20) 
```

但是为什么我必须使用两行来初始化和数组？或者，我可以忽略 ma.zeros() 功能并在一行中指定掩码和数据：

```
In [8]: A=ma.masked_array(zeros((3,)),mask=ones((3,)))
...
masked_array(data = [-- -- --],
             mask = [ True  True  True],
       fill_value = 1e+20) 
```

但我认为这也很笨拙。我已经浏览了`numpy.ma`文档，但我找不到处理这个问题的简洁方法。我错过了什么明显的东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T01:33:44.223

嗯，掩码`ma.zeros`实际上是一个特殊的常数，`ma.nomask`，对应于`np.bool_(False)`。它只是一个占位符，告诉 NumPy 尚未设置掩码。使用`nomask`实际上大大加快了速度`np.ma`：如果我们事先知道没有掩码值，则无需跟踪掩码值的位置。

最好的方法是不要在不需要时明确设置掩码，并`np.ma`在需要时保留设置（即，当您最终尝试获取负数的日志时）。

* * *

旁注＃1：要将掩码设置为`False`与输入形状相同的数组，请使用

```
np.ma.array(..., mask=False) 
```

这样更容易打字。请注意，它实际上是 Python `False`，而不是`np.ma.nomask`...类似地，用于`mask=True`强制屏蔽所有输入（即，`mask`将是一个`ndarray`充满 的布尔值`True`，与 具有相同的形状`data`）。

* * *

旁注＃2：如果您需要在初始化后设置掩码，则不应使用赋值，`.mask`而是分配给特殊值`np.ma.masked`，这样更安全：

```
a[:] = np.ma.masked 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-09T15:18:22.633

不幸的是，您的旁注#2 建议中断了具有多于一维的数组：

```
a = ma.zeros( (2,2) )
a[0][0] = ma.masked
a
masked_array(data =
 [[ 0\.  0.]
 [ 0\.  0.]],
         mask =
 False,
   fill_value = 1e+20) 
```

像OP一样，我还没有找到解决这个问题的好方法。屏蔽一整行将正确初始化掩码：

```
 a[0] = ma.masked
 a
 masked_array(data =
 [[-- --]
 [0.0 0.0]],
             mask =
 [[ True  True]
 [False False]],
       fill_value = 1e+20) 
```

但如果这不是您想要做的，那么您必须`a[0] = ma.nomask`撤消它。`a[0] = ma.nomask`之后立即执行`a = ma.zeros( (2,2) )`没有效果。

# eclipse - m2eclipse 无法索引远程存储库

> ID：13354296
> 
> 赞同：1
> 
> 时间：2012-11-13T01:18:52.280
> 
> 标签：eclipse, maven, indexing, repository

我正在尝试将 Maven 的依赖管理（在 Eclipse 中）用于基于级联的 map/reduce 项目。我已经使用 Cascading 存储库信息更新了项目的 POM

```
<repository>
  <id>conjars.org</id>
  <url>http://conjars.org/repo</url>
</repository> 
```

并在存储库视图中启用索引。但是，eclipse 无法索引此存储库和报告

```
Error
Mon Nov 12 19:02:18 CST 2012
Unable to update index for conjars.org|http://conjars.org/repo 
```

我不在防火墙后面，所以不应该出现代理问题。我在 Mac OS X（山狮）上运行 eclipse。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T17:35:19.207

没关系。这是我自己对 Maven（我是新手）、m2eclipse 插件以及远程 3rd 方存储库如何/是否支持索引的误解。

明确指定我的组/工件/版本 ID（对于 Cascading 包），而不是依赖 Eclipse 插件中的关键字搜索来解决我的依赖关系解决了这个问题。

# sitecore - 在 HttpRequest 管道中访问 Session

> ID：13354298
> 
> 赞同：18
> 
> 时间：2012-11-13T01:19:13.140
> 
> 标签：sitecore

我正在尝试访问查询字符串参数并将其保存到 Session 变量中。由于我正在研究的解决方案有几个基本布局，最简单的方法是将其添加到管道处理程序中。但是，我的代码失败了，因为 args.Context.Session 为空：

```
public class SaveQueryStringToSession : HttpRequestProcessor
{
    public override void Process(HttpRequestArgs args)
    {
        Assert.ArgumentNotNull((object)args, "args");
        string queryString = WebUtil.GetQueryString("parm1");
        if (queryString.Length <= 0)
            return;
        args.Context.Session["parm1"] = queryString;
    }
} 
```

当此方法插入 HttpRequestBegin 或 HttpRequestEnd 管道时，会发生这种情况。很想知道为什么，以及是否有标准的解决方法或模式可以在这里使用。（是的，我将添加一个空检查。无需指出。）

我在 IIS 7.5（集成的 .Net 2.0）上运行 Sitecore Sitecore.NET 6.4.1（修订版 110720）

可能相关链接：

*   [假设上下文处理程序是 IRequiresSessionState 或 IReadOnlySessionState，Session 可访问的第一个 global.asax 事件是什么？](https://stackoverflow.com/questions/9500681/what-is-the-first-global-asax-event-that-session-is-accessible-assuming-the-cont)
*   [http://intothecore.cassidy.dk/2009/02/session-state-and-integrated-pipeline.html](http://intothecore.cassidy.dk/2009/02/session-state-and-integrated-pipeline.html)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-13T06:13:59.263

HttpRequestBegin 管道连接到 HttpApplication.BeginRequest 事件，并且在实例化 HttpSession 对象之前触发此事件。使用 HttpRequestEnd 管道不起作用，因为在触发 HttpApplication.EndRequest 事件时 HttpSession 对象已被释放。

触发 PostAcquireRequestState 事件后，会话变为可用。要截获此问题，请创建一个实现 IHttpModule 的类，并将其添加到 Web.config 中的 <httpModules> 元素中。HttpModule 代码需要检查请求是否需要会话状态，因为尝试读取静态资源请求的会话将引发异常。

这是访问 Session 和 QueryString 的 HttpModule 代码：

```
public class MyHttpModule :IHttpModule
{
   public void Init(HttpApplication context)
   {
       context.PostAcquireRequestState += RequestHandler;
   }

   public void Dispose()
   {
        //
   }

   public void RequestHandler(object sender, EventArgs e)
   {
       var app = (HttpApplication) sender;

       if (app.Context.Handler is IRequiresSessionState)
       {
           var session = app.Session;
           var queryString = app.Request.QueryString["test"];
           session["test"] = queryString;
       }
   }
} 
```

值得注意的是，Sitecore 的 HttpRequestBegin 和 HttpRequestEnd 管道通过 HttpModule 连接到 ASP.NET：

```
<add type="Sitecore.Nexus.Web.HttpModule,Sitecore.Nexus" 
name="SitecoreHttpModule" /> 
```

感谢@ddysart 为我指明了正确的方向，并感谢[此](https://stackoverflow.com/a/276373/402949)答案以获取正确的事件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-10-30T15:07:02.493

实际上，您可以使用 httpRequestProcessed 而不是 httpRequestBegin 或 HttpRequestEnd，在此期间，sitecore 处理 HttpRequest 以便您可以访问会话。

您将能够使用之前提供的相同代码。

```
public class SaveQueryStringToSession : HttpRequestProcessor
{
   public override void Process(HttpRequestArgs args)
   {
        Assert.ArgumentNotNull((object)args, "args");
        string queryString = WebUtil.GetQueryString("parm1");
        if (queryString.Length <= 0)
            return;
        args.Context.Session["parm1"] = queryString;
    }
} 
```

# java - Hibernate 的 nullable = false 在所有情况下都不起作用

> ID：13354300
> 
> 赞同：2
> 
> 时间：2012-11-13T01:19:27.770
> 
> 标签：java, sql, hibernate, postgresql

我有以下课程：

```
@Entity
@Table(name = "USERS")
public class User {

    private Long userID;

    @Id
    @Column(name = "userID")
    @GeneratedValue(generator = "increment")
    @GenericGenerator(name = "increment", strategy = "increment")
    public Long getUserID() {
        return userID;
    }

    @Column(nullable = false)
    private boolean isActive;

    @Column(nullable = false, unique = true)
    private String email;

    @Column(nullable = false)
    private String password;

    @Column
    @Temporal(TemporalType.TIMESTAMP)
    private Calendar lastLoggedIn;

    @Column(nullable = false)
    @Temporal(TemporalType.TIMESTAMP)
    private Calendar createdDate;

    @Version
    private Integer version;

    public String getEmail() {
        return email;
    }

    public boolean isActive() {
        return isActive;
    }

    public void setActive(boolean isActive) {
        this.isActive = isActive;
    }

    public void setEmail(String email) {
        this.email = email;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public Calendar getLastLoggedIn() {
        return lastLoggedIn;
    }

    public void setLastLoggedIn(Calendar lastLoggedIn) {
        this.lastLoggedIn = lastLoggedIn;
    }

    public Calendar getCreatedDate() {
        return createdDate;
    }

    public void setCreatedDate(Calendar createdDate) {
        this.createdDate = createdDate;
    }

    public Integer getVersion() {
        return version;
    }

    public void setVersion(Integer version) {
        this.version = version;
    }

    public void setUserID(Long userID) {
        this.userID = userID;
    }

    public User(Long userID, String email, String password, Calendar lastLoggedIn, Calendar createdDate, Integer version) {

    }

    // No argument constructor
    public User() {}
} 
```

当我运行我的应用程序时，Hibernate 会加载配置并为用户创建表。我正在使用 Postgresql。这是正在生成的 SQL 语句（由 hibernate 记录）：

```
Hibernate: create table USERS 
           (userID int8 not null, active boolean not null, createdDate timestamp, 
            email varchar(255), lastLoggedIn timestamp, 
            password varchar(255), version int4, primary key (userID)) 
```

为什么将布尔值创建为非空而字符串/时间戳不是？如果您尝试插入没有电子邮件或密码的用户，我不会有例外，但是使用此生成的模式不会。是否有另一种方法可以强制 Hibernate 将该字段创建为不可为空？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T01:46:41.790

从[5.1.4.1.2 开始。访问类型](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch05.html#mapping-declaration-property)：

> 默认情况下，类层次结构的访问类型由 @Id 或 @EmbeddedId 注释的位置定义。如果这些注释在字段上，则仅考虑字段以进行持久性，并通过字段访问状态。如果 getter 上有注释，那么只有 getter 被认为是持久性的，并且通过 getter/setter 访问状态。

`@Id`当您在 getter 上进行注释时，您正在使用属性访问。因此，hibernate 将忽略字段上标记的所有映射注释，并且只使用 getter 上的注释来生成 DDL。因为在 getter 上没有注释，所以使用默认设置。

如果您更改为注释而不是，您应该得到您想要`@Id`的`userID`结果`getUserID()`

# java - Maven：将本地依赖项添加到 jar

> ID：13354301
> 
> 赞同：7
> 
> 时间：2012-11-13T01:19:46.990
> 
> 标签：java, maven

我有依赖

```
 <dependency>
        <groupId>de.matthiasmann</groupId>
        <artifactId>twl</artifactId>
        <version>1.0.0</version>
        <scope>system</scope>
        <systemPath>${project.basedir}/lib/TWL.jar</systemPath>
    </dependency> 
```

然后我执行`mvn assembly:assembly`. 添加了所有本地文件和远程 maven 库，但没有这个 jar。

**更新**

当我试图运行应用程序时`java -jar myjar.jar`。它返回一个错误，即上述依赖项中没有类 (NoClassDefFoundError : de.matthiasmann.twl.ForExample)。我想将此 jar 中的类添加到 myjar.jar（与 maven 对远程依赖项所做的相同）。我如何配置 Maven 来做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-13T01:34:28.940

请参阅[Maven 2 assembly with dependencies: jar under scope "system" not included](https://stackoverflow.com/questions/2065928/maven-2-assembly-with-dependencies-jar-under-scope-system-not-included)，了解为什么不包括系统依赖项以及如何解决它，特别是`mvn install:install-file`代码是您想要的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-13T02:00:35.783

除非您的 Java EE 服务器/容器配置了该 jar，否则您不能使用 systemPath。

请记住，maven 只是开发和编译时间。一旦构建了war文件，maven除了将所有需要的jar放入WEB-INF/lib文件夹之外没有任何作用。

当您指定系统范围时，这意味着您有责任确保在部署战争时该 jar 存在。您已经有一个框架来执行此操作，并且您不希望使用该 jar 来阻碍您的构建依赖项，但您必须仅在开发期间通过 Maven 使其可用。

另一个类似的范围是“提供的”。例如，JBoss 或您的公司公共部署 Tomcat 框架已经提供了许多 jar，例如 Spring 和 Hibernate，它们由服务器启动加载并且对服务器中的所有应用程序都是通用的。因此，您不希望 maven build 将它们包含在 war 文件中。

正确的方法，Maven 大师会告诉你。是拥有自己的 maven 服务器并在该服务器中构建您需要的任何工件。但是，有时这是不可能的。

因此，在这种情况下，我会创建与项目一起分发的项目级存储库并签入版本控制。我运行命令`mvn install`来创建一个名为“project-repo”的项目级目录。

[http://maven.apache.org/plugins/maven-install-plugin/examples/specific-local-repo.html](http://maven.apache.org/plugins/maven-install-plugin/examples/specific-local-repo.html)（由于熟悉，大多数时候，我手动构建 repo 而不是运行 mvn install）。

然后在 POM 中，我将 file://${project.basedir}/project-repo 指定为存储库之一。需要注意的是，在 Windows 中，“file://”之后的斜杠以外的斜杠在引用 Windows 文件系统路径时必须是反斜杠。

```
 <repositories>
    <repository>
      <id>my-repo1</id>
      <name>my custom repo</name>
      <url>http://ho.ho.ho</url>
    </repository>
    <repository>
      <id>project-repo</id>
      <name>my project repo</name>
      <url>file://${project.basedir}\project-repo</url>
    </repository>
  </repositories> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-11T12:11:46.603

您可以通过多种方式实现此功能，请参阅下面的博客

[http://blog.valdaris.com/post/custom-jar/](http://blog.valdaris.com/post/custom-jar/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T08:40:11.940

如果您有这样的依赖项，最好的解决方案是首先使用[存储库管理器](http://maven.apache.org/repository-management.html)，然后将该依赖项简单地放入存储库管理器，然后将其用作简单依赖项。

# php - 我有一个变量，其名称中有另一个变量。如何将其更改为会话变量？

> ID：13354302
> 
> 赞同：1
> 
> 时间：2012-11-13T01:19:53.667
> 
> 标签：php, session, variables

基本上就是标题所说的。我知道如何将普通变量变成会话变量`($_SESSION['var'])`，但当它包含另一个 var 时不知道

这是我的代码：

```
<?php
session_start();

$_SESSION["uname"] = "Tyler";

if (isset($_SESSION["coins{$uname}"])) 
{
    echo "$_SESSION["uname"] : $_SESSION["coins{$uname}"]";
}
elseif ($_SESSION["uname"] == "LOut")
{
    $_SESSION["coins{$uname}"] = "0";
    echo "Log In";
}
else
{
    $_SESSION["coins{$uname}"] = 500;
    echo "$_SESSION["uname"] : $_SESSION["coins{$uname}"]";
}
?> 
```

我尝试了以下方法：

```
$_SESSION['{coins.$uname}']
$_SESSION['coins.$uname']
$_SESSION['coins.$_SESSION['uname']'] 
```

而且我不记得我是否尝试过其他任何方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T01:23:41.753

双引号是你想要的。

```
$_SESSION["coins.$uname"] 
```

或者

```
$_SESSION["coins.{$_SESSION['uname']}"] 
```

其中任何一个都应该可以正常工作。

**说明：** 单引号将按原样封装字符串。双引号实际上会解析字符串并替换其中包含的任何变量。有时，变量在字符串中无法清楚地识别，例如：

```
print "This is the $numberth time"; 
// Expected: 'This is the 50th time'
// Actual:   'This is the  time' 
```

在这种情况下，您可以使用花括号来清楚地分隔变量，即：

```
print "This is the {$number}th time"; 
```

根据经验，我通常将任何对象属性或数组值包裹在花括号内，即：

```
print "This is the {$this->number}th time";
print "This is the {$time['number']}th time"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T01:23:21.610

尝试

`$_SESSION["coins{$uname}"]`

不同的是...

`brace`1) 使用语法时的双引号

2）我假设您在`.`这里使用点字符进行连接？如果您使用大括号语法，则不需要它...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T01:44:00.860

你能试试这个吗？

```
 $$coins = "Tyler";

    if (isset($$coins)) 
    {
    echo "uname : {$$coins}";
    }
    elseif ($$coins == "LOut")
    {
    $$coins = "0";
    echo "Log In";
    }
    else
    {
    $$coins = 500;
    echo "$uname : $$coins";
    }
    ?>

    <br>
    <a href="test.php">Test</a>

    </div>

    <div id="footer">

    </div> 
```

所以你的会议将是

```
$_SESSION['$$coins'] 
```

这是我处理变量变量的方式......

丁斯

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T01:59:19.053

您说它不起作用，但您没有指定是否设置它或回显它是问题：根据您原来的、未经编辑的问题，有两个问题：

## 设置会话变量

这应该有效：

```
$_SESSION["coins{$uname}"] = 500; 
```

如果你不能让它工作，试着把它分解成几个步骤。

```
$tempname = 'coins'.$uname;
$_SESSION[$tempname] = 500; 
```

现在测试一下。

## 输出会话变量

`echo $_SESSION["coins{$uname}"];`或者`echo $_SESSION[$tempname];`

*编辑*

您的代码中存在语法错误：

```
echo "$_SESSION["uname"] : $_SESSION["coins{$uname}"]"; 
```

当您尝试为 ["uname"] 打开引号时，您错误地关闭了起始引号 (")。尝试：

```
echo "$_SESSION['uname'] : ".$_SESSION["coins{$uname}"]; 
```

# google-apps-script - wsdl 肥皂请求中的多个元素的问题

> ID：13354303
> 
> 赞同：4
> 
> 时间：2012-11-13T01:20:00.497
> 
> 标签：google-apps-script

我在使 wsdl soap 请求中的多个元素正常工作时遇到问题。当我直接在webservicex网站上直接尝试以下转换时，我得到了当前的货币转换。当我尝试在应用程序脚本中做同样的事情时，它总是返回“0”作为速率。我在这里想念什么？

```
function getCurrencyConversion2(){
  var fromCurr = "USD";
  var toCurr = "AUD";
  var wsdl = SoapService.wsdl("http://www.webservicex.net/CurrencyConvertor.asmx?WSDL");
  Logger.log(wsdl.getServiceNames());
  var currencyService = wsdl.getService("CurrencyConvertor");
  Logger.log(currencyService.getOperationNames());
  //var convertOp = currencyService.getOperation("ConversionRate");
  var param = Xml.element("ConversionRate", [
                                  Xml.attribute("xmlns", "http://www.webservicex.net/"),
                                  Xml.element("FromCurrency", [fromCurr]),
                                  Xml.element("ToCurrency", [toCurr])
             ]);
  var result = currencyService.invokeOperation("ConversionRate", [param]);

  return;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T06:58:54.010

你会爱上这个的。也难倒了我好一阵子。

问题是 的属性`xmlns`区分大小写。您正在添加它，因为`http://www.webservicex.net/`正确的版本是`http://www.webserviceX.NET/`. 注意`X.NET`最后的。

以下调整后的版本应该可以正常工作（以 0.9602 作为汇率记录 XML）。

```
function getCurrencyConversion2(){
  var fromCurr = "USD";
  var toCurr = "AUD";
  var wsdl = SoapService.wsdl("http://www.webservicex.net/CurrencyConvertor.asmx?WSDL");
  var currencyService = wsdl.getService("CurrencyConvertor");
  var param = Xml.element("ConversionRate", [
                                  Xml.attribute("xmlns", "http://www.webserviceX.NET/"),
                                  Xml.element("FromCurrency", [fromCurr]),
                                  Xml.element("ToCurrency", [toCurr])
             ]);
  var result = currencyService.invokeOperation("ConversionRate", [param]);
  Logger.log(result.toXmlString());
  return;
} 
```

由于 SOAP 的复杂性以及该服务没有返回有价值的错误消息这一事实，这很痛苦。

# java - 如何操作指定列上的 JTable 返回值？

> ID：13354306
> 
> 赞同：0
> 
> 时间：2012-11-13T01:20:21.560
> 
> 标签：java, swing, jtable, jtextfield, tablecelleditor

我有一个 JTable 有两列（*可编辑的 JTable*）。当用户在第二列输入内容时，我的要求如下：

*   用户只能输入数字和逗号

*   当用户输入错误的字符时，它会发出哔声`(Toolkit.getDefaultToolkit().beep();`）

我该如何实现这一目标？（*如果是 jtextfield 它需要文档过滤器或纯文档等，如果是 JTable，那么如何？*）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T01:40:40.683

实现一个[`TableCellEditor`](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/TableCellEditor.html)能够返回一个文本组件 ( `JTextField`)，该组件[`DocumentFilter`](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/DocumentFilter.html)附加了一个能够根据需要过滤传入的文本。

你可能想看看

*   [使用文档侦听器限制文本字段中的字符](https://stackoverflow.com/questions/12812844/limit-the-characters-in-the-text-field-using-document-listner/12812935#12812935)
*   [MDP 的博客](http://www.jroller.com/dpmihai/entry/documentfilter)
*   [在java中只接受一个数字](https://stackoverflow.com/questions/13224455/accept-only-a-single-digit-in-java/13224591#13224591)
*   [文本组件功能](http://docs.oracle.com/javase/tutorial/uiswing/components/generaltext.html)（查找“实施文档过滤器”）

**更新示例**

> 如果是jtextfield，它需要文档过滤器或纯文档等，如果是JTable，那么如何？

阅读教程，针对您遇到的问题提出问题。重要的是您要了解为什么事情以某种方式完成，而不是简单地复制和粘贴其他代码，否则您将不知道何时复制了坏主意；）

```
public class TestFilteredCellEditor {

    public static void main(String[] args) {
        new TestFilteredCellEditor();
    }

    public TestFilteredCellEditor() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new FilteredEditorPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class FilteredEditorPane extends JPanel {

        public FilteredEditorPane() {
            setLayout(new BorderLayout());
            JTable table = new JTable(new MyTableModel());
            TableColumnModel columnModel = table.getColumnModel();
            columnModel.getColumn(1).setCellEditor(new FilteredTableEditor());
            add(new JScrollPane(table));
        }
    }

    public class FilteredTableEditor extends AbstractCellEditor implements TableCellEditor {

        private JTextField editor;

        public FilteredTableEditor() {
            editor = new JTextField();
            ((AbstractDocument) editor.getDocument()).setDocumentFilter(new NumericDocumentFilter());
        }

        @Override
        public boolean isCellEditable(EventObject e) {
            return true;
        }

        @Override
        public Object getCellEditorValue() {
            return editor.getText();
        }

        @Override
        public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, int row, int column) {
            if (value instanceof String) {
                editor.setText((String) value);
            } else {
                editor.setText(null);
            }
            return editor;
        }
    }

    public class NumericDocumentFilter extends DocumentFilter {

        public void insertString(DocumentFilter.FilterBypass fb, int offset,
                String string, AttributeSet attr)
                throws BadLocationException {

            StringBuilder buffer = new StringBuilder(string);
            boolean isBad = false;
            for (int i = buffer.length() - 1; i >= 0; i--) {
                char ch = buffer.charAt(i);
                if (!Character.isDigit(ch)) {
                    buffer.deleteCharAt(i);
                    isBad = true;
                }
            }
            if (isBad) {
                Toolkit.getDefaultToolkit().beep();
            }
            super.insertString(fb, offset, buffer.toString(), attr);
        }

        public void replace(DocumentFilter.FilterBypass fb,
                int offset, int length, String string, AttributeSet attr) throws BadLocationException {
            if (length > 0) {
                fb.remove(offset, length);
            }
            insertString(fb, offset, string, attr);
        }
    }

    public class MyTableModel extends AbstractTableModel {

        @Override
        public int getRowCount() {
            return 1;
        }

        @Override
        public int getColumnCount() {
            return 2;
        }

        @Override
        public Object getValueAt(int rowIndex, int columnIndex) {
            return "";
        }

        @Override
        public boolean isCellEditable(int rowIndex, int columnIndex) {
            return true;
        }

        @Override
        public Class<?> getColumnClass(int columnIndex) {
            return String.class;
        }
    }
} 
```

# python - 使用 SQLite 进行复杂的 SQL 查询

> ID：13354309
> 
> 赞同：3
> 
> 时间：2012-11-13T01:20:30.827
> 
> 标签：python, sqlite, count, sql-order-by, distinct

我需要做一个复杂的查询，我需要帮助。以下是我拥有的示例：

```
id   |   Date   |  Validity

48   | 6-1-2009 |  notFound   
47   | 6-1-2009 |  valid   
46   | 6-1-2009 |  valid    
45   | 3-1-2009 |  invalid   
44   | 3-1-2009 |  invalid   
42   | 4-1-2009 |  notFound 
41   | 4-1-2009 |  notFound
48   | 4-1-2009 |  valid 
```

[这里是 SQL。]

查询结果如下所示：

```
 Date   |  valid   |  invalid   |    notFound

 3-1-2009 |   0      |     2      |       0
 4-1-2009 |   1      |     2      |       2
 6-1-2009 |   3      |     2      |       3 
```

我只能在 SQLite 中执行此操作吗？有人能帮我吗？我正在使用 Python。

我需要这个来生成一个折线图。例如：[折线图](http://i.stack.imgur.com/yOmVC.jpg)！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T01:43:16.073

我相信这应该这样做：

```
SELECT Date,
SUM(Validity = "valid") AS valid,
SUM(Validity = "invalid") AS invalid,
SUM(Validity = "notFound") AS notFound
FROM table_name
GROUP BY Date 
```

SUM 函数将统计各种有效性类型的总数。'=' 函数在 false 时返回 0，在 true 时返回 1，这就是允许它工作的原因。

** 编辑 **

我刚刚意识到这并不是您想要的，因为您正在寻找每个日期的总体汇总，其中还包括前一个日期的数据。这可以在 python 中相当容易地完成。

```
valid_sum = 0
invalid_sum = 0
notfound_sum = 0
for r in cursor.fetchall():
    date = r[0]
    valid_sum += int(r[1])
    invalid_sum += int(r[2])
    notfound_sum += int(r[3])
    # print aggregate data for this date 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T08:13:20.520

您的`Date`列无法正确排序，因为它没有以最重要的字段年份开头。

假设您将日期更改为正确的`yyyy-mm-dd`格式，您可以使用如下内容：

```
SELECT A.Date,
       (SELECT COUNT(*) FROM MyTable AS B
        WHERE B.Date <= A.Date
          AND B.Validity = 'valid') AS valid,
       (SELECT COUNT(*) FROM MyTable AS B
        WHERE B.Date <= A.Date
          AND B.Validity = 'invalid') AS invalid,
       (SELECT COUNT(*) FROM MyTable AS B
        WHERE B.Date <= A.Date
          AND B.Validity = 'notFound') AS notFound
FROM (SELECT DISTINCT Date FROM MyTable
      ORDER BY Date) AS A 
```

# sql-server - SQL 中的大规模单词替换

> ID：13354312
> 
> 赞同：2
> 
> 时间：2012-11-13T01:20:52.630
> 
> 标签：sql-server, tsql

我正在尝试对大型数据库中的字段执行数据清理。我有一个参考表，其中包含带有替换词的单词，如果您愿意，可以使用宏。我想以最有效的方式将这些更改应用于包含数百万行的表。话虽如此，让我在下面提供一些虚拟数据，以便您可以可视化该过程：

Street_Addresses 表：

```
Street_Name       | Expanded_Name
------------------+--------------
100 Main St Ste 5 | NULL
25 10th Ave Apt 2 | NULL
75 Bridge Rd      | NULL 
```

Word_Substitutions 表：

```
Word | Replacement
-----+------------
St   | Street
Ave  | Avenue
Rd   | Road
Ste  | Suite
Apt  | Apartment 
```

所以更新后的最终结果如下：

```
Street_Name       | Expanded_Name
------------------+--------------
100 Main St Ste 5 | 100 Main Street Suite 5
25 10th Ave Apt 2 | 25 10th Avenue Apartment 2
75 Bridge Rd      | 75 Bridge Road 
```

这里的挑战是需要进行大量替换，实际上是在单个值上进行多次替换。想到的最初想法是使用标量函数来封装这个逻辑。但正如您可以想象的那样，这在数百万行上并不高效。

```
CREATE FUNCTION Substitute_Words (@Text varchar(MAX))
RETURNS varchar(MAX) AS
BEGIN
    SELECT @Text = REPLACE(' ' + @Text + ' ', ' ' + Word + ' ',
    ' ' + Replacement + ' ') FROM Word_Substitutions
    RETURN LTRIM(RTRIM(@Text))
END 
```

我决定改用基于集合的操作，并提出以下建议：

```
WHILE (1 = 1)
BEGIN
    UPDATE A SET Expanded_Name = LTRIM(RTRIM(REPLACE(
    ' ' + ISNULL(A.Expanded_Name, A.Street_Name) + ' ',
    ' ' + W.Word + ' ', ' ' + W.Replacement + ' ')))
    FROM Street_Addresses AS A
    CROSS APPLY (SELECT TOP 1 Word, Replacement
    FROM Word_Substitutions WHERE CHARINDEX(' ' + Word + ' ',
    ' ' + ISNULL(A.Expanded_Name, A.Street_Name) + ' ') > 0) AS W

    IF (@@ROWCOUNT = 0)
        BREAK
END 
```

现在，根据我的实际数据集，这大约需要 2 个小时，如果可能的话，我想减少它 - 有人有优化建议吗？

**更新：**

通过只使用内部连接，我能够将执行时间减少到大约 5 分钟。我最初认为将更新与返回多行的内部联接一起使用是行不通的。更新似乎仍然有效，但源行将获得单个而不是多个更新。显然，SQL Server 为更新选择了一个随机结果行，而丢弃了其他行。

```
WHILE (1 = 1)
BEGIN
    UPDATE A SET Expanded_Name = LTRIM(RTRIM(REPLACE(
    ' ' + ISNULL(A.Expanded_Name, A.Street_Name) + ' ',
    ' ' + W.Word + ' ', ' ' + W.Replacement + ' ')))
    FROM Street_Addresses AS A
    INNER JOIN Word_Substitutions AS W ON CHARINDEX(' ' + W.Word + ' ',
    ' ' + ISNULL(A.Expanded_Name, A.Street_Name) + ' ') > 0

    IF (@@ROWCOUNT = 0)
        BREAK
END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T07:17:36.147

我认为这里最好的方法是将修改后的数据存储在您的数据库中。您可以使用 ID 和格式化的地址创建一个单独的表，或者您可以在当前表中添加额外的列。

然后，因为您已经有很多记录，您应该更新它们。在这里，您必须选择创建一个内部函数并将其用于更新当前记录（它可能很慢，但一旦结束，您的表中就会有数据）或创建[CLR](http://msdn.microsoft.com/en-us/library/ms254498%28v=vs.80%29.aspx)过程并使用常用表达。

[然后对于新插入的记录，创建 AFTER INSERT TRIGGER](http://msdn.microsoft.com/en-us/library/ms189799.aspx)将非常灵活，它将调用您的 SQL 或 CLR 函数并更新当前插入的记录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T21:58:11.403

您总是可以做一些荒谬的事情，并将其作为动态 SQL 运行，并内联所有替换：

```
declare @sql nvarchar(max)
set @sql = 'Street_Name'
select @sql = 'replace(' + @sql + ', '' ' + Word + ' '', '' ' + Replacement + ' '')'
from Word_Substitutions
set @sql = 'update Street_Addresses set Expanded_Name = ' + @sql
exec sp_executesql @sql 
```

是的，我完全期待一两次投票，但考虑到 UDF 和递归 CTE 在大型数据集上有时会非常慢，这种方法有时可以很好地工作。不时发布现成的解决方案很有趣。

无论如何，我很想知道这将如何运行，特别是如果结合@gotqn 提出的存储和基于触发器的更新的建议（我同意并赞成）。

我目前在一个普通的盒子上运行了大约 3 秒，有 275 个替换词和 100k 个地址。

# ios - 如何获取给定大小的 NSAttributedString？

> ID：13354316
> 
> 赞同：0
> 
> 时间：2012-11-13T01:21:40.057
> 
> 标签：ios, uitextview, core-text, nsattributedstring

我目前正在编写一个仅限 iOS 6 的应用程序，它的工作方式与 iBooks 类似。我在 NSAttributedString 中有一个大文本，并希望将其拆分为页面。

每个页面都有一个 UITextView 负责呈现文本。我使用 UITextView 而不是 CoreText 因为我想要选择文本以便用户可以突出显示文本。

**这是我的问题：**我希望能够将“完整”的 NSAttributedString 拆分为与我的 UITextView 大小相同的页面。

不幸的是，在 iOS 6 上，UITextView 以不同于 CoreText 的方式绘制 NSAttributedString。因此，使用 CTFrameGetVisibleStringRange 不是一种选择。

有谁知道获得特定大小的 NSAttributedString 的方法，而不是蛮力？

谢谢，

阿布拉斯

# macos - 在 mac 上安装 wxpython

> ID：13354317
> 
> 赞同：0
> 
> 时间：2012-11-13T01:22:01.800
> 
> 标签：macos, installation, wxpython

我是 Mac 新手，一直使用 Windows，我对如何安装 wxPython 感到困惑。我从网站上下载了 .dmg 文件，它包含三个文件：

一个 pkg 文件、一个自述文件和一个 uninstall.py

我打开了 pkg 文件，完成了这些步骤，但在它说“安装完成”之后我不确定它安装在哪里

另外，我在空闲时进行了 import wx，这导致了堆栈跟踪错误。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-09-24T02:39:47.233

根据在 Windows 7 和 Mac OSX 上安装 wxPython 的个人经验，我发现在安装后重新启动计算机会有所帮助，并且在“导入 wx”时出现在 Shell 中的堆栈跟踪错误。听起来很简单，但它对我有用。如果 'import wx' 后没有出现错误，则表示 wxPython 安装正确。要添加到上面 bouke 的答案，当前在终端中通过 homebrew 安装 Python 2.7 的方法：

```
brew install python 
```

要安装 wxPython：

```
brew install wxpython 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T08:54:01.837

至少对于开发，我建议使用自制软件安装（python 和）wx。它将安装 2.9 版，并确保 Apple 提供的系统库保持不变。

# c# - 如何以月/年计算一个人的年龄？

> ID：13354322
> 
> 赞同：0
> 
> 时间：2012-11-13T01:22:39.550
> 
> 标签：c#, .net

如何以月/年计算一个人的年龄，以使两岁以下的任何人都以月为单位报告，2 岁以上的人仅以年为单位报告？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T06:59:50.903

我会为此使用[NodaTime](http://noda-time.blogspot.com/)：

```
var d1 = new NodaTime.LocalDate(1997, 12, 10);
var d2 = new NodaTime.LocalDate(2012, 11, 13);

var period = NodaTime.Period.Between(d1, d2);
var m = period.Months;
var y = period.Years; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T02:39:52.833

我已经在这个挑战中浪费了一个多小时，我认为这很简单。在另一个可能有用的 SO 问题上找到了这个答案

[C# 格式化年龄 - 关于天、周、月 - 年](https://stackoverflow.com/questions/4901866/c-sharp-formatting-age-regarding-days-weeks-months-years)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T01:22:39.550

```
var now = DateTime.Today;

int months = 0;
while (true)
{
    var temp = dob.AddMonths((int)months);
    if (now < temp)
    {
        if (now.Day < temp.Day)
            months--; //accounts for short months
        break;
    }
    months++;
}

if (months < 24)
    return (months + " months");
else
    return (Math.Floor( (decimal)months / 12.0M) + " years"); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-13T02:30:29.357

```
private string Birthdate(DateTime birthday)
{
    var birthdayTicks = birthday.Ticks;
    var twoYearsTicks = birthday.AddYears(2).Ticks;
    var NowTicks = DateTime.Now.Ticks;

    var moreThanTwoYearsOld = twoYearsTicks < NowTicks;

    var age = new DateTime(DateTime.Now.Subtract(birthday).Ticks);

    return moreThanTwoYearsOld ? (age.Year-1).ToString() + " years" : (age.Year-1 >= 1 ? age.Month + 12 : age.Month).ToString() + " months";
} 
```

# apache2 - VirtualHost 文件都指向 Ubuntu 12.04 中的第一个 VirtualHost

> ID：13354325
> 
> 赞同：4
> 
> 时间：2012-11-13T01:22:59.680
> 
> 标签：apache2, virtualhost, ubuntu-12.04

所以我设置了 2 个虚拟主机文件，example1.com 和 example2.com，其中包含以下信息：

--第一个文件

```
<VirtualHost 127.0.0.1:80>
    ServerName  example1.com
    ServerAlias www.example1.com
    ServerAdmin admin@example1.com
    DocumentRoot    /var/www/example1.com
</VirtualHost> 
```

--第二个文件

```
<VirtualHost 127.0.0.1:80>
    ServerName  example2.com
    ServerAlias www.example2.com
    ServerAdmin admin@example2.com
    DocumentRoot    /var/www/example2.com
</VirtualHost> 
```

并设置我的主机文件以读取

```
127.0.0.1 locahost
127.0.0.1 example1.com
127.0.0.1 example2.com 
```

但是，如果我尝试访问 localhost、example1.com 或 example2.com，我的浏览器只会将我发送到 example1.com

默认的虚拟主机文件有：

```
<Directory />
    Options FollowSymLinks
    AllowOverride None
</Directory>
<Directory /var/www/>
    Options Indexes FollowSymLinks MultiViews
    AllowOverride All
    Order allow,deny
    allow from all
</Directory> 
```

我假设 /var/www 的 AllowOverride 优先于根目录，对吗？

所以后来我用 a2dissite 关闭了我所有的虚拟主机，并在主机文件中注释掉了这些行，但我的一半网站现在根本无法工作。

我的一个 wordpress 网站似乎无法提取它的 css 文件，因此它全部被劫持（24 小时前还好），一些网站似乎失去了与数据库的连接。

我不知道发生了什么，但一切都被劫持了。

编辑 - 我最初的问题是两个虚拟主机文件都指向 example1.com，这是复制粘贴失败，实际文件指向合法的网站 URL

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T18:41:11.007

在没有看到更多 apache 配置的情况下，我最好的猜测是您没有启用[基于名称的虚拟主机。](http://httpd.apache.org/docs/2.2/vhosts/name-based.html)为此，请在 Apache 配置中包含以下内容：

```
NameVirtualHost *:80 
```

基于 IP 的虚拟主机是 Apache 在没有该指令的情况下使用的默认机制。

顺便说一句，如果你这样做，`<VirtualHost>`blocks 的参数必须与`NameVirtualHost`指令的参数匹配，所以请改用它：

```
<VirtualHost *:80> 
```

如果您要在同一个盒子上处理许多不同的站点，您可能需要查看[mod_vhost_alias](http://httpd.apache.org/docs/2.2/mod/mod_vhost_alias.html)的文档。

# vb.net - 如何从 RichTextBox 中删除字符串？

> ID：13354327
> 
> 赞同：1
> 
> 时间：2012-11-13T01:23:03.750
> 
> 标签：vb.net, richtextbox, string-matching

我正在尝试解析垃圾并缩小一堆文本。如果 a 不匹配，如何删除当前行？我想完全删除该行：

```
For i As Integer = 0 To RichTextBox1.Lines.Length - 1
  Dim a As String = RichTextBox1.Lines(i).ToString
  If Not a = "SaveThisLine" Then
    'delete the active line
  End If
Next 
```

另外我将如何部分匹配？如`if not a = "SaveThisLine" & *`（使用通配符）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T02:45:57.387

我不会触摸原始文本，而是将*有效*行保存到 a`StringBuilder`中，因此如果行有效，则保存`AppendLine`到它。最后转储回`RichTextBox1.Text`使用`StringBuilder.ToString`.

对于 VB.NET 中的部分匹配，您可以使用本机`Like`运算符：

```
"aaa" Like "a*" 
```

退货`True`。

或者使用正则表达式：

```
System.Text.RegularExpressions.Regex.Match("aaa", "^a").Success 
```

也返回`True`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T07:00:39.200

你可以这样做：

```
 For i As Integer = 0 To RichTextBox1.Lines.Length - 1
        If RichTextBox1.Lines(i) = "2" Then
            RichTextBox1.Text = Replace(RichTextBox1.Text, RichTextBox1.Lines(i), "", , 1)
        End If
    Next 
```

# git - 为什么 git log --cherry-pick 这么慢？

> ID：13354328
> 
> 赞同：5
> 
> 时间：2012-11-13T01:23:12.707
> 
> 标签：git, performance, git-cherry-pick

我想得到两个给定标签之间的变化，命令是：

```
git log `Tag1...Tag2 --cherry-pick  --no-merges --right-only 
```

但它很慢。

我一一测试参数。只有在使用 时`--cherry-pick`，git log 才会非常慢。

为什么？有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T02:20:34.563

> --cherry-pick
> 当提交集受到对称差异的限制时，忽略任何引入与“另一侧”的另一个提交相同的更改的提交。
> 
> 例如，如果你有两个分支，A 和 B，列出所有提交仅在其中一侧的常用方法是使用 --left-right （参见下面的 --left-right 选项描述中的示例） . 然而，它显示了从另一个分支中挑选出来的提交（例如，“b 上的第 3 个”可能是从分支 A 中挑选出来的）。使用此选项，此类提交对将从输出中排除。

它必须比较所有提交以寻找相似之处——与根本不需要进行任何比较相比，这将是一个非常缓慢的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T13:44:23.933

我一直在使用

```
git log tag1 --not tag2 
```

这给了我所有在 tag1 上而不是在 tag2 上的提交。也适用于分支与标签。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-04-05T02:17:48.970

樱桃采摘可能不会那么快，因为它可能会将重命名检测为合并的一部分，这可能会很昂贵，尤其是当您采摘远离 HEAD 的东西时。

可能是您的 git config 具有`gc.auto = 0`( `git config --get gc.auto`)，因此请仔细检查它是否已启用，或者只是运行：

```
git gc 
```

为了清理不必要的文件并优化本地存储库。

您也可以尝试将`merge.renamelimit`配置变量设置为更小的值（例如 1，因为 0 表示*无限制*）。如果这没有帮助，请尝试分析您的 git（例如使用`strace`or `perf record git cherry-pick ...`）并找到瓶颈。

请参阅：[樱桃采摘很慢](http://git.661346.n2.nabble.com/cherry-pick-is-slow-td7554198.html)

> 对于合并递归，我们总是希望计算每一边和祖先之间的成对重命名。因此，与樱桃挑选目的地的差异总是会是一个昂贵的 O(# of changes between source and dest) 操作。
> 
> 如果不重命名，您可以通过三向树行走在实际合并中做得更好。例如，您看到某个子树位于`ours`和中的树 A`ancestor`处，但位于 中的树 B 处`theirs`。所以你不必进一步下降，只需说“拿走他们的”（好吧，你必须下降`theirs`才能得到值）。但我预计它与索引的交互会变得更加复杂（无论如何，由于重命名问题，可能不值得花费太多精力）。
> 
> -佩夫

# xml - 如何使用 Jquery 从 Internet 解析 XML 文件？

> ID：13354329
> 
> 赞同：-1
> 
> 时间：2012-11-13T01:23:11.177
> 
> 标签：xml, jquery, jquery-mobile

我在使用 AJAX 脚本时遇到问题，当我尝试从 Internet 解析 XML 文件时，没有响应。 [http://pastebin.com/hGe7siBB](http://pastebin.com/hGe7siBB) 我只想解析来自互联网的 XML 文件。PD：必须为 JQuery mobile 工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T01:28:06.817

您很可能会遇到同源策略的问题。

[http://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)

# matlab - 在matlab频谱图上绘制垂直线

> ID：13354330
> 
> 赞同：8
> 
> 时间：2012-11-13T01:23:20.943
> 
> 标签：matlab, user-interface

matlab谱图函数是否会锁定创建的图形？我想在图中画垂直线，但线功能似乎没有做任何事情。如何在 matlab 频谱图上画一条线？

```
clc; clear all; close all;
[data, fs, nbits] = wavread(<INSERT WAVE FILE HERE>);
% [data, fs, nbits] = wavread('white_0.05_6sec_aud.wav');

N_data=length(data); N_frame=128; N_half=N_frame/2; N_loop=N_data/(N_half);
output=zeros(N_data,1);
hz=0:(fs/2)/N_half:(fs/2)-(fs/2)/N_half;

spectrogram(data, hanning(N_frame), N_half, N_frame, fs);

x = [6500 6500];
y = [0 5.5];

H = gca;

% set(gca, 'NextPlot', 'add');
% line(x, y);

h = line([6500, 6500], [0, 5.5]);
set(h, 'parent', handles.predicted_ax);

% view(-90,90)
% set(gca,'ydir','reverse')
% 
% [y, x] = ginput(1)

% view(-90, 180); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T06:20:06.753

`spectogram`生成 a`surf`并将其设置`view`为`(0,90)`。将`surf`设置`zlim`为一些值（取决于`spectrogram`数据），显然，在当前绘图中添加一条线*不会改变*`zlim`（可能是因为以`spectrogram`某种方式锁定了轴；应该可以在 中找到`edit spectrogram`）。因此，在 中`view(0,90)`，线条完全消失（旋转绘图；您会看到线条出现在表面上方的某处）。

解决方法：添加线的方式默认为 -`z`坐标为的线`[0 0]`，对于许多`spectrogram`s，该线将*高于*设置的轴范围`spectrogram`。

发行

```
zl = zlim;
axis([xlim ylim zl(1) max(0, zl(2))])
view(0,90) 
```

之后`line`应该使该行出现。

另外：就我而言，线悬停的表面大部分是蓝色的，线也是如此。这无助于让它明显有一条线:) 我把它设为白色，与`surf`下面的蓝色/黄色/红色形成鲜明对比。

# python-3.x - python全局名称未定义-作业

> ID：13354334
> 
> 赞同：0
> 
> 时间：2012-11-13T01:23:42.300
> 
> 标签：python-3.x

```
from math import *
class GeometricObject():
     def __init__(self, color = "green", filled = True):
        self.color = color
        self.filled = filled

    def __str__(self):
        return "color: " + self.__color + \
               " and filled: " + str(self.__filled)

class Triangle(GeometricObject):
    def __init__(self, side1 = 1, side2 = 1, side3 = 1):
        super().__init__()
        self.side1 = float(side1)
        self.side2 = float(side2)
        self.side3 = float(side3)

    def getArea(self):
        return self.area

    def setArea(self, side1, side2, side3):
        s = (side1 + side2 + side3)/2
        area = sqrt(s*(s-side1)*(s-side2)*(s-side3))
        self.area = area

    def getPerimeter(self):
        return self.perimeter

    def setPerimeter(self, side1, side2, side3):
        perimeter = side1 + side2 + side3
        self.perimeter = perimeter

    def __str__(self):
        return "Triangle: " + "side 1 = " + str(self.side1)+ \
               " " + "side 2 = " + str(self.side2) + " " + \
                "side 3 = " + str(self.side3)

def main():
    side1 = eval(input("Enter a value for side 1: "))
    side2 = eval(input("Now enter a value for side 2: "))
    side3 = eval(input("Now enter a value for side 3: "))
    color = input("Enter the color of the triangle: ")
    filled = input("Enter true(filled) or false(not filled) " + \
                   "for the triangle being filled: ")
    go = GeometricObject(color, filled)
    tri = Triangle(side1, side2, side3)
    tri.setArea(side1, side2, side3)
    tri.setPerimeter(side1, side2, side3)

    print("\n\n")
    print("A Triangle: ", tri.__str__(), go.__str__())
    print("The area is: ", tri.getArea())
    print("The perimeter is: ", tri.getPerimeter())

main() 
```

以上是我的代码和我不明白的错误，大部分代码都是直接来自书中的示例并调整以适合我的程序。我该怎么做才能让它按照我需要的方式工作。这是家庭作业，我真的可以使用一些帮助来找出我的代码中有什么问题。

这并不是一个真正的错误，但我怎样才能让 GeometricObject 颜色和填充属性显示在其他三角形信息之后。

```
Enter a value for side 1: 3
Now enter a value for side 2: 4
Now enter a value for side 3: 5
Enter the color of the triangle: blue
Enter 1(filled) or 0(not filled) for the triangle being filled: 1

A Triangle:  Triangle: side 1 = 3.0 side 2 = 4.0 side 3 = 5.0 <__main__.GeometricObject object at 0x000000000312EA20>
The area is:  6.0
The perimeter is:  12 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T01:28:39.783

`tri.__str__`问题是没有正确访问其中的实例变量。为了访问属于类实例的变量，您需要在名称前加上`self.`

函数中的变量名称也不正确：它们应该是`__side1`、`__side2`和`__side3`。

用这个替换你的`__str__`函数，它应该可以工作：

```
def __str__(self):
    return "Triangle: " + "side 1 = " + str(self.__side1) +\
            "side 2 = " + str(self.__side2) + "side 3 = " + str(self.__side3) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T01:29:01.063

您的问题出在此功能中：

```
def __str__(self):
  return "Triangle: " + "side 1 = " + str(side1) +\
    "side 2 = " + str(side2) + "side 3 = " + str(side3) 
```

NameError 表示它无法识别变量“side1”，因为从未在该范围内声明“side1”。

现在，一个问题：side1、side2 和 side3 是从哪里引用的？你怎么能改变它们？

# eclipse - 服务器响应 COPY 请求发送了意外的返回值（502 Bad Gateway）

> ID：13354336
> 
> 赞同：3
> 
> 时间：2012-11-13T01:24:12.453
> 
> 标签：eclipse, spring, svn, repository, subclipse

我正在使用安装了最新 Subclipse 的 Spring Tool Suite 3.1.0。提交和更新工作得很好，直到我在尝试提交时收到以下消息：

服务器发送了意外的返回值（502 Bad Gateway）以响应对“某些文件名”的 COPY 请求

我的存储库的网址是：[https ://megiforge.pl/svn/zpi2012](https://megiforge.pl/svn/zpi2012)

现在我尝试用谷歌搜索我的问题的答案，但所有解决方案似乎都提到了更改 Apache 服务器配置，我无法在 Subclipse 配置中找到相应的文件。

唯一可能导致这种情况的是我将文件从一个文件夹移动到另一个文件夹，因为这是这与我之前的提交之间的唯一区别。想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T14:10:53.790

如果解决方案是修复您的 Apache 服务器配置，并且所有关于此问题的存档讨论都说是，那么您在客户端配置中无能为力。这是需要在服务器上进行的更改。听起来好像是服务器在 Apache 服务器前面配置了反向代理或 SSL 加速器时发生的。

这里的一个例子：http: [//svn.haxx.se/users/archive-2006-03/0549.shtml](http://svn.haxx.se/users/archive-2006-03/0549.shtml)

# java - Eclipse IFile（获取java类方法）

> ID：13354337
> 
> 赞同：1
> 
> 时间：2012-11-13T01:24:17.743
> 
> 标签：java, class, methods, eclipse-plugin, get

我正在开发一个 Eclipse 插件，我需要在其中检索方法的名称，或者只是从 Eclipse 中的任何类型的 Java 项目中检索类。这个想法是创建一个对象来访问项目的每个部分（IProject 扩展）。

例如：

```
public class MyProjectClass extends IProject{
   ...
   /* get all the java classes from the given project */
   public List<IProject> getJavaClasses(IProject p){}
   /* get all the methods from the given class */
   public List<?> getMethodsNames(AnyClass c){}
   ...
} 
```

到目前为止，我已经实现了从任何 IProject 中获取每个 IFile。我需要下一步的帮助。

可能吗？我需要制作解析器来获取方法吗？必须类似于创建 Eclipse 的大纲视图（其中有对所选类的每个方法的描述）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T01:27:28.417

我相信[JDT](http://www.vogella.com/articles/EclipseJDT/article.html#jdt_example)是您正在寻找的。请记住，JDT 可能要求您的项目具有适当的 Java 项目性质。代码片段有一个如何从项目/编译单元获取方法的示例。

# iphone - 如果我不从 nsnotification 中心删除观察者会发生什么？

> ID：13354341
> 
> 赞同：2
> 
> 时间：2012-11-13T01:24:52.927
> 
> 标签：iphone, objective-c, ios, notifications

正如我所想，如果我在实例被释放时不删除观察者，那么下次发布通知时，程序将由于未知的选择器异常而崩溃。

但是当我写一些测试代码时，发现它不是那样的，一切都很好，注意到发生了。而且我确定会调用 dealloc 方法。

那么它有什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T01:29:06.530

Apple 正在为您处理它，但我认为无论如何移除观察者是一种很好的形式。它可能会带来问题，并且众所周知，它会导致随机错误。

# java - java.sql.SQLException：在 SWT 中使用时数据库被锁定

> ID：13354343
> 
> 赞同：0
> 
> 时间：2012-11-13T01:25:30.157
> 
> 标签：java, database, sqlite, data-binding, swt

我正在尝试使用 SWT/Jface 数据通过 ibatis 实现删除 SWT 表行。

每当我尝试从客户端（SWT）进行插入或删除操作时，我都会遇到异常。

```
org.apache.ibatis.exceptions.PersistenceException: 
### Error committing transaction.  Cause: java.sql.SQLException: database is locked 
```

当我尝试直接通过 ibatis 访问 DB (SQLite) 时，不会发生这种情况。

下面是我正在使用 SWT 按钮执行删除操作并尝试删除 SWT 表行的代码部分。

SWT 代码....

```
btnDeleteWorkspaceRow.addSelectionListener(new SelectionAdapter() {
      @Override
      public void widgetSelected(SelectionEvent e) {
        IStructuredSelection selection = (IStructuredSelection) m_workplaceViewer.getSelection();                       
WorkplaceDetail workplaceDetail = (WorkplaceDetail) selection.getFirstElement();
boolean confirm = MessageDialog.openConfirm(shell,                          "Confirm Delete", "Are you sure you want to delete row"+                                    + workplaceDetail.getCode() + "'?");
if (confirm) {

 **int code =186;**   (Hardcoded row value- actual DB row number)                                       
 WorkplaceDaoImpl workplaceDaoImpl = new WorkplaceDaoImpl();

try {
**WorkplaceDaoImpl.deleteWorkplaceDetail(code);**                               
} catch (SQLException e1) {
                                                e1.printStackTrace();
}
m_bindingContext.updateModels();
}
}           
});

This is Ibatis DAO implementation code which i am invoking in SWT

**WorkplacseDaoImpl.java**

public void deleteWorkplaceDetail(int code)
            throws SQLException {
         SqlSession session = sqlSessionFactory.openSession();      
         session.delete("WorkplaceDetail.deleteWorkplaceById", code);    
         session.commit();
         session.close();        
}

**Ibatis Configuration**

  <delete id="deleteWorkplaceById">
    delete from Workplace where workplaceCode=#{code}
  </delete>

Please help me to resolve this issue. I am using SQLite DB 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T09:23:54.673

从您之前的描述和[相关问题](https://stackoverflow.com/questions/10707434/sqlite-in-a-multithreaded-java-application)来看，我认为您正试图同时在不同的线程中访问 SQLite 数据库。按钮事件处理程序代码在 SWT UI 线程内运行。您可能有其他代码尝试在其他线程中连接到数据库。

# php - PHP 对象创建、工厂方法和依赖注入

> ID：13354344
> 
> 赞同：0
> 
> 时间：2012-11-13T01:25:31.467
> 
> 标签：php, dependency-injection, factory-method

我期待一个很好的模式来创建绑定到数据库的对象。我将用一个简单的例子来说明我的想法：创建用户。

第一：创建/加载用户的工厂方法。用户配置在新创建的实例中完成。

```
$user = User::Create($db); // Flag the instance to create an user when save() is called
$user->setUsername('...'); 
$user->set...; 
$user->save(); // Will insert a new user into the database.

...
$user = User::Load($db, id); // Load an user from the database. Flag object to update.
$user->setUsername('...'); // Change username.
$user->save(); // Update existing object instead of inserting a new one. 
```

第二：立即创建新用户的工厂方法。

```
User::Create($db, $username, $password, ...); // Create and insert a new user.
...
$user = User::Load($db, 1);
$user->setUsername("..."); // Change username.
$user->save(); // Save only updates a user, no flag needed because an user is entirelly created by User::Create(). 
```

第三：使用带有静态工厂方法的工厂类。

```
Factory::newUser($db, $username, $password, ...); // May contain many other types of objects. 
```

我总是可以做这样的事情：

```
$factory = new Factory($db);
$user = $factory->newUser($username, $password, ...); 
```

另一件事是，我是否应该创建一个为数据库提供句柄的单例，该句柄将在应用程序上用于创建对象（而不对对象内部的句柄进行硬编码）？

例子：

```
class DB {
    public static function handle() { /* Do a lazy connection to a database once. */ }
}

...
$user = User::Create(DB::handle(), ...); 
```

所以，我真正的问题是，最好的模式是什么？我知道这可能太相对了，但我需要一些提示，当然，我想将依赖关系留在外面，而不是硬编码在对象内部。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T01:43:53.357

如果您的问题来自“模型层”，您应该寻找数据库模式，例如：

*   [数据映射器](http://en.wikipedia.org/wiki/Data_mapper_pattern)
*   [活动记录](http://en.wikipedia.org/wiki/Active_record_pattern)

# unix - 如何跳转到/在第 N 个逗号之后

> ID：13354346
> 
> 赞同：1
> 
> 时间：2012-11-13T01:25:36.960
> 
> 标签：unix, vim, navigation, editor

> **可能重复：**
> [在 VIM 上到达某个地点的最有效方法是什么？](https://stackoverflow.com/questions/11918601/what-is-the-most-efficient-way-to-reach-a-spot-on-sight-on-vim)

使用这样的代码：

```
[caret here]create_stage :pay_deposit, due: deposit_due_date, actual: deposit_paid_date, action: 'Deposit', status: status 
```

我想直接跳到/之前/之后的第 N 个逗号（或至少围绕）`actual: deposit_paid, [need to be here], action: 'etc'`

最有效的方法是什么？（我现在很`w-w-w`糟糕，也可以开始计算单词的数量来使用类似的东西，`12w`但这只会分散太多注意力）。

我不想搜索，因为我确实想保留当前的搜索和突出显示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T07:57:55.953

您可以将`f`动作与 a结合起来`[count]`，因此对于您的示例，`3f,`这将是最短的方式。（如果你数错了，你可以用`;`和更正`,`。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T01:34:01.003

`f``,``;``;``;`或使用 easymotion 和可能的骗局[What is the most effective way to reach a spot on VIM?](https://stackoverflow.com/questions/11918601/what-is-the-most-efficient-way-to-reach-a-spot-on-sight-on-vim/11918800)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T01:32:02.397

搜索逗号字符怎么样？

`/,`然后输入一个数字，说`3`然后键入`n`或`N`查找文档中的所有逗号？

# c# - 使用特定对象进行远程处理

> ID：13354348
> 
> 赞同：1
> 
> 时间：2012-11-13T01:25:51.217
> 
> 标签：c#, xna, remoting

我一直在玩 XNA，想尝试让游戏在 LAN 上运行，但事实证明，要做到这一点，我需要使用一种叫做远程处理的东西。无论如何，我设法让它工作

```
 public class TestObject : MarshalByRefObject
{
    int testInt;

    public Level()
    {
        this.testInt = 5.Zero;
    }

    public int GetNumber()
    {
        return testInt;
    }
} 
```

我的服务器频道 = new TcpChannel(4444); ChannelServices.RegisterChannel(channel, false);

```
 Type type = Type.GetType("Domain.Level,Domain");

        RemotingConfiguration.RegisterWellKnownServiceType(type,
            "FirstRemote",
            WellKnownObjectMode.Singleton); 
```

和客户

```
 this.chanel = new TcpChannel();
      ChannelServices.RegisterChannel(chanel, false);
      this.testObject = (TestObject)Activator.GetObject(typeof(TestObject),
         "tcp://localhost:4444/FirstRemote"); 
```

这样就可以了，但是问题是服务器无法访问该对象，并且我无法创建一个带有参数的构造函数，因此无法初始化测试对象上的任何数据。如何制作一个对象，然后让它使用它而不是制作一个新对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T18:20:04.610

不幸的是，您可能会发现游戏中的实时网络通信比您当前的方向更复杂。大多数游戏使用持久套接字连接在客户端之间来回传递信息，而其他方法通常对于*实时*网络来说太慢了。

我建议查看 Lidgren 网络库。Lidgren 对网络通信进行了抽象，并使得将数据序列化为非常小且快速的数据包变得更加容易，这些数据包可以通过 UDP 和 TCP 的多种可靠性模式进行传输。你可以在这里找到 Lidgren 项目： [http ://code.google.com/p/lidgren-network-gen3/](http://code.google.com/p/lidgren-network-gen3/)

附带说明一下，在这里阅读虚幻引擎如何建立网络对我来说非常有价值：http: [//udn.epicgames.com/Three/NetworkingOverview.html](http://udn.epicgames.com/Three/NetworkingOverview.html)

我写了一篇博客，展示了有关实现客户端/服务器模式的一些具体细节：http: [//syndicatex.com/flatredball/flatredball-and-lidgren-multiplayer-networking/](http://syndicatex.com/flatredball/flatredball-and-lidgren-multiplayer-networking/)

# iphone - 为什么我不能将我的视图控制器用作属性？

> ID：13354349
> 
> 赞同：0
> 
> 时间：2012-11-13T01:26:01.200
> 
> 标签：iphone, ios, xcode, uiviewcontroller

出于某种原因，我在这里收到错误

```
#import "OtherViewController.h"

@interface ViewController: UIViewController

@property (nonatomic, strong) OtherViewController *otherViewController; 
```

这给了我一个错误，说“未知类型名称 OtherViewController”为什么会发生在我身上？这不是向其他视图控制器发送消息的方式吗？如果是这样，你应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T02:53:51.790

从您发布的内容来看，您发布的内容没有任何问题。话虽如此，您不需要为其他 VC 声明属性。您需要做的是在 OtherViewController 上声明一个公共属性（如 NSString），然后您可以从 ViewController 类访问该属性。类似于（假设您使用的是故事板）：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
     if ([segue.identifier isEqualToString:@"MySegueID"]) {
         OtherViewController *ovc = segue.destinationViewController;
         ovc.myPublicNSStringProperty = @"Something";
     }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T08:43:28.000

尝试在 .m 文件中导入标头

```
#import "OtherViewController.h" 
```

并在头 .h 文件中添加

```
@class OtherViewController; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T03:47:32.357

由于没有提供足够的信息，我无法确定，但如果您有循环导入，我会看到类似的错误。也就是说，如果 OtherViewController.h 包含#import ViewController。

因此，您可以尝试在其中一个中使用 @class 来避免循环引用：

```
@class OtherViewController; 
```

确保包含在您的 ViewController.m 中：

```
#import "OtherViewController.h" 
```

# sql - rails/postgres 中的阈值求和

> ID：13354350
> 
> 赞同：1
> 
> 时间：2012-11-13T01:26:02.450
> 
> 标签：sql, ruby-on-rails, ruby-on-rails-3, postgresql, arel

我正在制作一个步行马拉松轨道应用程序。每个步行者都由承诺每圈最高金额的人赞助。

我有一个名为的表，其中包含、和`sponsorships`列。我想编写一个 SQL 查询来确定步行者筹集了多少钱。`walker_id``amount_per_lap``max_amount`

还有一个`walkers`包含`id`、`name`和`laps`列的表。

我知道这不是有效的 SQL，但我想要这样的东西，但不知道最好的方法。可以在执行查询之前提供 walker_id 和 laps。

> 选择总和（MIN（圈数 * 赞助商.amount_per_lap，赞助商.max_amount））从赞助商那里赞助商.walker_id = 1;

我在rails中制作这个，所以我试图弄清楚如何在Arel中做这样的事情，但无法弄清楚。

任何帮助将不胜感激。

*编辑*：澄清`walkers`表格。

*Edit2*：在伪代码中意外地有 max 而不是 min

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T02:57:25.107

我认为您正在寻找的 SQL 是这样的：

```
select w.id, w.name, sum(least(w.laps * s.amount_per_lap, s.max_amount))
from walkers w
join sponsorships s on w.id = s.walker_id
group by w.id, w.name 
```

该[`least`功能](http://www.postgresql.org/docs/current/static/functions-conditional.html#FUNCTIONS-GREATEST-LEAST)适用​​于您的“不超过`max_amount`”条件。既然您知道要选择什么，那么将其转换为 AR 对您来说应该是一件简单的事情；对于这样的事情，我倾向于直接使用 SQL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T01:38:48.300

我会尝试类似的东西：

```
class Sponsorship < ActiveRecord::Base
  name
  walker_id
  amount_per_lap
  max_amount

class Walker < ActiveRecord::Base
  name
  number_of_laps

walker_sum = 0
walker=walker.find(1) # For 1 walker.
walker.sponsorships.each do |sponsor| #
  walker_sum+= 
  min((sponsor.amount_per_lap * walker.number_of_laps), (sponsor.max_amount))
end 
```

# windows - 用户级线程内核级线程和纤程

> ID：13354351
> 
> 赞同：3
> 
> 时间：2012-11-13T01:26:08.350
> 
> 标签：windows, multithreading, kernel

我知道纤维在线程的上下文中运行。它们只是用户级别的。

我知道线程可以是用户级别或内核级别。

当您在用户级应用程序中创建线程时，它也是用户级的吗？

您可以在用户应用程序中创建内核级线程吗？

这些用户级线程也是内核调度的？

当您在 .NET 中调用 CreateThread 时，内核如何发挥作用？CreateThread 函数是否需要通过 susbsystem dll 到执行程序并一直到内核来创建用户级线程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T06:21:06.017

在 Windows 平台上，用户模式进程（应用程序）中的线程是用户模式线程，内核模式进程中的线程是内核模式线程。您不能在用户模式进程中创建内核模式线程。在 Windows 上，所有线程都由内核直接或间接调度（通过它如何配置 CPU 中断）。

.Net CreateThread 最终使用从 Kernel32.dll 导出的 CreateThread API。

# python - Python数独递归与蛮力回溯错误

> ID：13354353
> 
> 赞同：5
> 
> 时间：2012-11-13T01:26:29.997
> 
> 标签：python, recursion, sudoku, backtracking

我正在为家庭作业做一个数独解谜程序，但遇到了一些困难。代码现在循环通过解决方案，尽管它确实可以解决简单的难题，而对于更难的难题，它会无缘无故地卡在几个 9 上。我将不胜感激这方面的任何帮助。（check_cell 确定展示位置是否有效。）

1.  在这段代码中是否正确实现了回溯，如果没有，如何解决？
2.  如何阻止求解器冻结？它解决了大约 3 行然后冻结，将大部分值更改为 9s。

一些代码：

```
def solve_helper(self, row, col):
# Try placing a number in each column of current row
    board = self.the_board
    if board[row][col] != 0:
        ?????
    elif board[row][col] == 0:
        for i in range(1,10):
            print("Setting value at i with ") + str (i) + (" located at " ) + str(row) + str(col)
            self.set_cell(row, col, i)
            self.guesses = self.guesses + 1
            if self.check_cell(row, col):
                if self.solve_helper(row, col): return True
            else:
                self.set_cell(row, col, 0)
    else:
        return self.mover(row,col)
    return False

def mover(self, row, col):
    if col + 1 != 9:
        return self.solve_helper(row, (col+1))
    elif row + 1 != 9:
        print "Moving to row" + str(row + 1)
        return self.solve_helper((row+1),0)
    else:
        print "SOLUTION FOUND"
        return True 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T01:46:00.023

您遇到的麻烦是您的一些递归调用没有正确返回结果，因此您的解决方案在找到时会被遗忘在递归堆栈的几个级别。这是您需要的第一个修复，添加`return`到在中进行的递归调用`mover`：

```
def mover(self, row, col):
    if col + 1 != 9:
        return self.solve_helper(row, (col+1))  # added return
    elif row + 1 != 9:
        print "Moving to row" + str(row + 1)
        return self.solve_helper((row+1),0)     # here too
    else:
        print "SOLUTION FOUND"
        return True 
```

`solve_helper`在跳过预先解决的单元格的函数的特殊情况下，您还需要类似的东西。函数的结尾应该是：

```
else:
    return self.mover(row, col)  # added return
return False 
```

**编辑：**

好的，我在代码中发现了更多问题。其中两个是求解器的逻辑问题，一个是显示问题，除了在求解过程中看起来很奇怪之外不会引起任何实际问题。

问题：

1.  首先，你最新的代码有`solve_helper`自己调用，而不是调用`mover`. 这使得它在移动之前需要一个额外的函数调用（尽管我认为它实际上可能不会破坏求解器）。
2.  其次，如果`solve_helper`将一个单元格设置为 9，但随后回溯到（在某些后来的单元格无法解决之后），则 9 在进一步回溯之前不会重置为零。
3.  最后，显示问题。将单元格设置为 0 不会停止显示其旧值。这看起来很像 #2 中的问题（回溯后留下 9），但实际上它只是装饰性的。

第一个问题很容易解决。只需将`solve_helper`呼叫更改为呼叫即可`mover`。这实际上就是您在问题中输入的原始代码中的内容。直接调用`solve_helper`实际上并没有得到错误的结果（因为`solve_helper`第二次会跳过已经填写的单元格），但它会在递归的每个级别上添加不必要的额外函数调用。

第二个问题稍微复杂一些，这就是你卡在某些板上的地方。您需要做的是将执行的行`self.set_cell(row, col, 0)`移出`else`它当前所在的块。事实上，如果您愿意，您实际上可以将它完全移出循环（因为只有在您回溯之后才真正需要当前单元格的值都不起作用）。这是我认为这是 for 循环的最佳安排（也将`return False`语句向上移动）：

```
for i in range(1,10):
    print("Setting value ") + str (i) + (" at " ) + str(row) + ", " + str(col)
    self.set_cell(row, col, i)
    self.guesses = self.guesses + 1
    if self.check_cell(row, col):
        if self.mover(row, col):
            return True
print "Backtracking"
self.set_cell(row, col, 0)
return False 
```

最后，修复显示问题需要进行两项更改。首先，去掉 中的条件`set_cell`。您希望始终更新显示。接下来，在 中`update_textfield`，将`delete`调用移到`if`块之外，以便它始终发生（将 留在`insert`下方`if`）。这使得将单元格设置为零将删除先前的值，但不会使其显示实际的 0 字符（它不会显示任何内容）。

我认为应该这样做。请注意，您使用的算法仍然很慢。解决[我在互联网上通过谷歌快速搜索找到的一块板](http://sudokublog.typepad.com/sudokublog/sudoku_puzzles/)花了 122482 次猜测和 5 多分钟，但它终于奏效了。其他棋盘（尤其是前几个空位需要 8 或 9 的棋盘）可能需要更长的时间。

# c# - 使用窗口内的自定义关闭按钮关闭 kendoui 窗口

> ID：13354355
> 
> 赞同：25
> 
> 时间：2012-11-13T01:26:46.550
> 
> 标签：c#, javascript, asp.net-mvc, modal-dialog, kendo-ui

我正在使用 Kendo UI 的窗口组件，它类似于任何模式对话框。

我有一个关闭按钮，如何在单击该按钮时关闭窗口（而不是单击标题栏中的默认“x”按钮）

我窗口中的内容是从另一个视图加载的

```
@(Html.Kendo().Window()
           .Name("window")
           .Title("Role")
           .Content("loading...")
           .LoadContentFrom("Create", "RolesPermissions", Model.Role)
           .Modal(true)
           .Width(550)           
           .Height(300)           
           .Draggable()
           .Visible(false)
          ) 
```

在同样的观点中，我有

```
<span id="close" class="btn btn-inverse">Cancel</span> 
```

这就是我的主视图（调用窗口的视图）

```
$(document).ready(function () {
    var window = $("#window").data("kendoWindow");

    $("#open").click(function (e) {
        window.center();
        window.open();
    });

    $("#close").click(function(e) {
        window.close();
    });
}); 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-13T21:18:42.337

基本上你已经知道如何关闭窗口——你需要使用它的 API的**close方法来完成。**

```
$("#window").data("kendoWindow").close(); 
```

但是为了将处理程序附加到视图内的按钮，您需要等到内容加载 - 您需要使用[刷新](http://docs.kendoui.com/api/web/window#resize)事件。

*例如*

```
$('#theWindowId').data().kendoWindow.bind('refresh',function(e){
    var win = this;
    $('#close').click(function(){
         win.close();
    })
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T11:19:22.437

在 JavaScript 中 - HTML`window`是一个对象，表示浏览器中打开的窗口。试着把你定义`window`为别的东西。

```
$(document).ready(function () {
    var wnd = $("#window").data("kendoWindow");

    $("#open").click(function (e) {
        wnd.center();
        wnd.open();
    });

    $("#close").click(function(e) {
        wnd.close();
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T01:33:16.387

kendo ui中有一个事件，它应该是这样的

```
 $("#idofyourbutton").click(function () {
     $("#window").data("kendoWindow").close();
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-19T13:05:14.297

如果使用 ajax 加载的内容，Petur Subev 的答案是完美的！我想举一个使用模板的例子，它更简单（而并非所有请求都应该由 ajax 提出）。考虑下面的模板：

```
<script id="Template_Example1" type="text/kendo-tmpl">
<div class="i-contentWindow">
    <div>
        <a id="btn1" href="\#"><span class="k-icon k-i-cancel"></span>Button 1</a>
    </div>
</div> 
```

现在，让我们加载模板并调用窗口关闭方法：

```
function ExampleFn1(dataItem) {
    //create the template
    var template = kendo.template($("#Template_Example1").html());

    //create a kendo window to load content
    var kWindow = openKendoWindow({
        title: "Window Tests",
        iframe: false,
        resizable: false
    }).content(template(dataItem));

    // call window close from button inside template
    $("#btn1").click(function (e) {
        e.preventDefault();
        alert("btn1 on click!");
    });

    kWindow.open();
} 
```

# azure-sql-database - 具有动态数据库连接的 Azure 移动服务

> ID：13354359
> 
> 赞同：1
> 
> 时间：2012-11-13T01:27:24.357
> 
> 标签：azure-sql-database, azure-mobile-services

当我们添加一个 Azure 移动服务时，我们能够附加一个 Azure SQL 数据库，这意味着对于我们 SQL Azure 服务器中的每个数据库，我们都需要添加一个移动服务。

但是，如果我们有一个正在成长的应用程序并且对于每个客户我们都有一个数据库（每个客户的数据库可以增长到 5GB），那么最好的方法是什么，在这种情况下，为每个数据库拥有一个移动服务可能不是最好的选择。我认为最好的选择可能是让一个独特的移动服务连接到不同的数据库（甚至服务器），具体取决于用户凭据

问题是：这可能吗？有人知道怎么做吗？Azure 服务的管理面板非常有限，但如果可以使用代码会很棒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T21:44:53.893

我认为 Azure 移动服务可能不适合这种情况。听起来您正在尝试构建一个可以为多个客户部署的移动应用程序，对吗？每个客户需要不同的数据源，但 API 保持不变？

目前，Azure 移动服务似乎没有解决方案。我可能会建议您使用 ASP.NET Web API 之类的技术构建您自己的 REST API，然后从头开始构建您的应用程序。通过这种方式，您可以为您需要的每个客户部署单独的实例。也就是说，我希望 Azure 移动服务能够支持您在未来描述的场景。能够一次构建我的服务并为不同的应用程序部署各种实例会很酷。

# iphone - popViewController 强制导航栏标题左对齐

> ID：13354362
> 
> 赞同：3
> 
> 时间：2012-11-13T01:27:42.880
> 
> 标签：iphone, ios

我遇到了一个奇怪的故障，当调用 popViewControllerAnimated: 时，视图控制器上的正常标题视图突然左对齐。有没有人似乎遇到过类似的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T19:07:48.120

我试图查明这个问题，当我有这个设置时它就会发生：

`[[UIBarButtonItem appearance] setBackgroundVerticalPositionAdjustment:1.0f forBarMetrics:UIBarMetricsDefault];`

删除此行后，标题视图在弹出视图控制器时不会出现故障或左对齐。我还想指出，我有一个 barbuttonitem 的自定义背景图像。第一次遇到这样的问题，希望对大家有帮助。

# c++ - C++ 错误 - 架构 x86_64 的未定义符号：

> ID：13354363
> 
> 赞同：1
> 
> 时间：2012-11-13T01:27:46.767
> 
> 标签：c++

我正在学习 C++，并且有一个简单的 Date 类，我正在尝试为 Date 设置一个值。

这是源代码文件 -

日期.h

```
class Date{ 
private:
    int month;
    int day;
    int year;

public:
    Date();
    void setDate(int m, int d, int y);

}; 
```

和日期.cpp

```
#include "Date.h"

Date::Date()
{
    month = 1;
    day = 1;
    year = 80;

};

void Date :: setDate(int m1, int d1, int y1){
    month = m1;
    day = d1;
    year = y1;
}; 
```

但是，当我编译代码时，我收到错误消息 -

```
 Undefined symbols for architecture x86_64:
  "_main", referenced from:
      start in crt1.10.6.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status 
```

有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T01:29:44.373

您缺少一个主要功能。将此添加到新文件（如 main.cpp，并在编译和链接时包含它）或其他 .cpp 文件。

```
int main(int argc, char *argv[]) {  } 
```

并将运行程序的代码放在大括号中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T01:42:49.007

每个 C/C++ 程序都必须有一个`main`函数，该函数无条件地作为程序执行的入口点。

```
int main(int argc, char** argv) {
  Date d;
  d.setDate(11, 19, 1984);

  /* do something with this date... */

  return 0;
} 
```

一个常见的约定是将其放在`main.cc`/`main.cpp`中，并在这种情况下确保两者`main.cpp`和`Date.cpp`都被编译*并链接*到相同的目标二进制文件中。如果无法解析，链接器将无法继续`main(int, char**)`。如果这对您来说很明显，那么我只是要求您检查您的链接器命令行以确保包含`main`包含的源/目标文件。

此外，随机 C++ 最佳实践指南：您应该有一个非默认构造函数，它接受执行的参数`setDate`并通过初始化列表将它们分配给您的成员变量。在这种情况下，默认构造函数（无参数）对您的具体日期类毫无意义。

# mysql - 大集合sql查询

> ID：13354366
> 
> 赞同：1
> 
> 时间：2012-11-13T01:28:10.523
> 
> 标签：mysql, ruby

我正在使用 ruby​​ 对 MySQL 数据库执行查询。我正在寻找 uid 的匹配项：

```
WHERE uid in #{VERY_LARGE_COMMA_SEPARATED_LIST} 
```

VERY_LARGE_COMMA_SEPARATED_LIST 超过 30k 个条目

```
VERY_LARGE_COMMA_SEPARATED_LIST = ' "one","two","three",...,"30k" ' 
```

它会导致 sql 转储错误：

```
Mysql2::Error - MySQL server has gone away: 
```

有谁知道这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T01:42:32.253

这似乎是您的查询超时或内存不足 - 您是否在 MySQL 日志中看到任何表明这一点的错误？

我有一种感觉，你正在超载你的服务器。

你应该有：

`where uid in ( #{VERY_LARGE_CSV} )`

编辑：您可以拆分 CSV，然后运行类似：

```
SELECT * from TBL where uid in ( #{CSV_SUBSET} )t1
UNION
SELECT * from TBL where uid in ( #{CSV_REMAINDER} )t2 
```

等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T04:29:51.067

您必须经过典型的 1MB mysql SQL 命令缓冲区。

要解决您的问题，您应该创建`uids`仅包含 uid 的（可能是临时的）表，例如

```
CREATE TABLE uids (uid INT NOT NULL PRIMARY KEY); 
```

（确保索引存在`uid`）。

然后在如下几条语句中将必要的 uid 插入`uids`表中：

```
INSERT INTO uids (uid) VALUES (1),(5),(10),..; 
```

最后，将您的查询运行为：

```
 WHERE uid IN (SELECT uid FROM uids) 
```

或像这样加入：

```
 SELECT m.*
 FROM master m, uids u
 WHERE m.uid = u.uid
 ... 
```

最后，您可能想要放下您的`uids`桌子。

**编辑**：我错过了你`uid`的不是整数。只需调整定义以供它使用`VARCHAR`。

# php - 将特殊字符保存到数据库中

> ID：13354367
> 
> 赞同：0
> 
> 时间：2012-11-13T01:28:13.713
> 
> 标签：php, html, character-encoding

我目前正在为我的网站使用 html 和 php，但是在保存在 textarea 时遇到了这个问题。

每次我使用具有特殊字符（如 ' 和 " ）的不同字体时，它都会保存为 â��（内部带有问号的黑色菱形）。这通常发生在我从其他站点复制文本或复制文本文档然后粘贴时但是当我输入 textarea 时它工作正常。

样本：

> 不要接受否定的答案，是关心自己的人

这是我的html代码

```
 <form action="savepost.php" method="POST">
    <fieldset style="width:600px; height:580px">
    <br><strong>Title</strong> <input id="posttitle" name="posttitle" type="text">
    <br><br><strong>Content</strong>
    <br><textarea id="postform" name="postform" style="width:600px; height:450px; resize: none"></textarea>
    <br><input type="submit" value="Post" id="postbutton"/>
    </fieldset>
    </form> 
```

mysql插入

```
 $title = strtolower(mysql_real_escape_string($_POST['posttitle']));
    $post_title = preg_replace('/[^a-zA-Z0-9\s]/','', $title);
    $timestamp=time(); 
    $post = $_POST['postform'];

    $newtitle= preg_replace('/\\s+/', ' ',$post_title);
    $striptitle = trim($newtitle, ' ');
    $url = strtolower($timestamp.'/'.str_replace(" ", "-", $striptitle));

    mysql_query("INSERT INTO blog (title, url, timestamp, post) VALUES ('$title', '$url', '$timestamp', '$post')"); 
```

这里可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T01:42:39.227

这是一个字符编码问题 - 如果您从桌面程序 (MS Word) 复制内容，那么 Word 会放入斜引号而不是直引号，但如果 HTML 页面的编码不正确以显示该字符，它将显示如上。

尝试在您的页面标题中查找

`<meta charset="utf-8" />`

或类似的东西

如果不是`utf-8`或丢失，请尝试更改它，看看会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T01:43:37.337

您是从 Microsoft Word 中复制其中的一些文本吗？默认情况下，Word 会将您的常规“直”引号更改为“弯”引号。有一种方法可以[关闭此功能](http://office.microsoft.com/en-us/word-help/change-curly-quotes-to-straight-quotes-and-vice-versa-HP005190124.aspx "关闭此功能")。要修复您拥有的文本，您可能需要进行查找/替换。

# javascript - 需要帮助生成将 json 对象转换为特定结构的算法

> ID：13354368
> 
> 赞同：1
> 
> 时间：2012-11-13T01:28:29.290
> 
> 标签：javascript, json, algorithm

像这样考虑json对象

```
var data = {
   keyA: [ {keyA0: [keyA00]} ],
   keyB: [ {keyB0: [keyB00]} ]
} 
```

更直观地看起来像这样

```
-keyA
  - keyA0
      - keyA00
-keyB
  - keyB0
      - keyB00 
```

需要将其转换为类似的东西

```
var convertedData = {
   name: root
   children:[
              {name:keyA, children: [ {name: keyA0 : children: [{name:keyA0, children: []}]} ]},
              {name:keyB, children: [...]}
            ] 
} 
```

"..." 是递归结构，直到它遇到子节点为空数组的叶节点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T18:29:34.723

解决了它，也许它会被其他有类似问题的人使用。这里是 js 小提琴，[http://jsfiddle.net/tF3uH/20/](http://jsfiddle.net/tF3uH/20/)，并进一步参考代码

```
var data = {
    "KeyA": ["KeyA0", "KeyA1"],
    "KeyB": [{"KeyB0": ["KeyB00", "KeyB01"]}] 
};
/* EXPECTED OUTPUT
[
{name: KeyA: children:[{name:KeyA0, children:[]},
                       {name:keyA1, children:[]}
                      ]
},
{name: KeyB: children:[{name:KeyB0, children: [{name:KeyB00, children: []},
                                               {name:KeyB01, children: []}
                                              ]
                       }
                      ]
}
]
*/
function _doConversion(jsonData, treeList) {    
    if (typeof jsonData == typeof Object()) {
        $.each(jsonData, function(key, val) {
            var isArray = Array.isArray(val);
            var name = key;
            var children = [];
            if (isArray) {
                $.each(val, function(i, item) {
                    _doConversion(item, children);
                });
            }else{ //not array but object
                _doConversion(val,children);
            }
            treeList.push({
                name : name ,
                children: children
            });
        });
    } else { //a leaf (could be string,number,boolean...)
        var node = {
            name: jsonData,
            children: []
        };
        treeList.push(node);
    }
}

var list = [];
_doConversion(data, list);
$("body").text(JSON.stringify(list, null, "\n"));​ 
```

# sql-server-2008 - 基于分组的 SQL OVER

> ID：13354372
> 
> 赞同：0
> 
> 时间：2012-11-13T01:29:07.997
> 
> 标签：sql-server-2008

这个很难解释。我正在尝试在我的选择插入新表中执行 Row_Number() Over(Order by PickedDate)。

这适用于生产 1,2,3,4,5,6,7，但这不是我想要做的。我希望为每组水果生成第一行。

例如，我尝试插入以下表结构；ItemOrder int, FruitType nvarchar(100),DatePicked 日期时间,

有以下数据

```
水果类型|采摘日期  
苹果|2012 年 10 月 1 日  
苹果|2012 年 10 月 3 日  
苹果|2012 年 10 月 2 日  
李子|9/13/2011  
李子|9/14/2011  
李子|9/15/2011
樱桃|12/2/2012
樱桃|12/4/2012

```

我试图得到以下结果

```
FruitType|DatePicked|ItemOrder
苹果|10/1/2012|1
苹果|10/3/2012|3
苹果|10/2/2012|2
李子|2011/9/13|1  
李子|2011/9/14|2  
李子|2011/9/15|3
樱桃|12/2/2012|1
樱桃|12/4/2012|2

```

帮助大家

```
创建表#FruitStandPicked
(
   FruitType NVARCHAR (100),
   日期选择日期时间
);

插入#FruitStandPicked（FruitType，DatePicked）
值（'Apple'，'10/1/2012'），
       （“苹果”，“2012 年 10 月 3 日”），
       （“苹果”，“2012 年 10 月 2 日”），
       （“李子”，“2011 年 9 月 13 日”），
       （“李子”，“2011 年 9 月 14 日”），
       （“李子”，“2011 年 9 月 15 日”），
       （“樱桃”，“2012 年 12 月 2 日”），
       （“樱桃”，“2012 年 12 月 4 日”）；

创建表#FruitStandTable
(
   项目订单INT，
   FruitType NVARCHAR (100),
   日期选择日期时间
);

--这需要调整
插入#FruitStandTable（ItemOrder、FruitType、DatePicked）
   SELECT row_number () OVER (ORDER BY fruittype, datepicked),
          水果类型，
          选择日期
     来自#FruitStandPicked；

从#FruitStandTable中选择*；

删除表#FruitStandTable;
     删除表#FruitStandPicked；

```

同样，这在下订单的范围内有效，但我也需要通过分组来下订单。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T01:36:41.033

您仍然可以使用`ROW_NUMBER`with`PARTITION`子句。试试这个：

```
SELECT *, ROW_NUMBER() OVER(PARTITION BY Fruit ORDER BY PickedDate) ItemOrder
  FROM <YOUR-TABLE> 
```

# php - 如何从 GCM json 解码响应中提取错误消息

> ID：13354377
> 
> 赞同：1
> 
> 时间：2012-11-13T01:29:30.367
> 
> 标签：php

我对 PHP 还很陌生，而且我被困在这个大时代。

我试图在这种情况下提取错误消息“ **InvalidRegistration** ”，它似乎位于数组中的数组中，然后在我的 PHP 服务器中对其进行过滤和操作。

请注意，对于多个 regId 的多播消息，错误数组的深度可能大于 1。

任何帮助将不胜感激，谢谢！

* * *

***转储 GCM 服务器响应：***

object(stdClass)#3 (5) { ["multicast_id"]=> int(6225919148914620552) ["success"]=> int(0) ["failure"]=> int(1) ["canonical_ids"]=> int(0) ["results"]=> array(1) { [0]=> object(stdClass)#4 (1) { ["error"]=> string(19) " **InvalidRegistration** " } } }

**发送消息代码：**

```
 $dbf = new push_db_functions();  

    // a row id which contains an intentionally bad regId
    // to trigger the error from 'test' mySql database
    $id = '19'; 

    $result = $dbf->sendMessage($id);

    // dump GCM server response  
    $obj2 = json_decode($result);  
    var_dump($obj2);

   // TODO: (Question Subject)
   // how to extract and test for if('failure' == 1) { ...?
   // and then how to extract 'error' message so I can act upon it appropriately? 
```

**发送消息助手代码：**

```
public function sendMessage($id) {
    $sqlquery = "SELECT regid FROM test WHERE Id = '$id'";
    $results = mysql_query($sqlquery);
    $processed = mysql_fetch_row($results);
    $url = 'https://android.googleapis.com/gcm/send';
    $apiKey = "my api key";
    $message = "Hello World";
    $fields = array('registration_ids' => $processed, 'data' => array( "message" => $message),);
    $headers = array('Authorization: key=' . $apiKey, 'Content-Type: application/json');
    // open connection
    $ch = curl_init();
    // set the url, number of POST vars, POST data
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($fields));
    // execute post
    $response = curl_exec($ch); 
    curl_close($ch);
    return $response;
} 
```

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-07T04:33:37.680

JSON中的简单解码响应

```
$data = json_decode($response);
```

这个 if 的输出

```

{
    “multicast_id”：5020929399500020011，
    “成功”：0，
    “失败”：1，
    “canonical_ids”：0，
    “结果”： [{
        “错误”：“未注册”
    }]
}

```

现在您可以轻松解析错误并生成 json。

希望这对你们有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T01:40:16.783

要获取给出的错误代码，您应该能够使用

```
$obj2->results[0]->error; 
```

但是如果你想灵活地做，你可能希望做更多的事情......

```
$errors = array();

if( !empty($obj2->results) ) {
    foreach( $obj2->results as $result ) {
        $error = $result->error;
        // Do whatever you want with the error here. 
        // In this instance, I'm just putting it into a fancy array
        $errors[] = $error;
    }
}

// $errors = array( [0] => 'InvalidRegistration' ); 
```

# php - 将 AMFPHP 与 AS 文件连接时出现问题

> ID：13354379
> 
> 赞同：0
> 
> 时间：2012-11-13T01:30:12.627
> 
> 标签：php, actionscript-3, port, amfphp, netconnection

我试图将 AMFPHP 与动作脚本文件连接起来，除了它们之间的连接部分外，一切都运行良好。

这就是我尝试将 .as 文件与服务连接的方式：

```
_netConnection = new NetConnection(); 
_netConnection.addEventListener(NetStatusEvent.NET_STATUS, onNetStatus);
_netConnection.connect("http://localhost/Core/Gateway.php"); 
```

问题是，我不能让它工作。我也尝试将http替换为rtmpt（http隧道）但它也不起作用，我在localhost之后添加了端口，我尝试了几个，没有运气。

根据我在 localhost 之后添加的端口，甚至没有调用 onNetStatus，或者它说它无法连接。

有什么帮助吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T17:49:44.047

你的网址看起来很有趣。如果是 amfphp V2.x，您应该指向 Amfphp/（或 Amfphp/index.php）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T11:01:57.980

如果您能告诉我们您的 amfphp 版本，那么回答会更方便。假设您使用的是 Amphp v 2.x，这是一个概念。

在 flex 中，编写如下内容：

```
var _amf:RemoteObject = new RemoteObject();
    _amf.destination = "dummyDestination";
    _amf.endpoint = "/Amfphp/";
    _amf.source = "yourphp";
    _amf.phpFunctionYouWantToCallWithParameterIfNeeded; 
```

这就是在 flex 和 amfphp 2.x 之间创建连接所需的全部内容

# javascript - 是否有类似 kill-switch 的解决方案可以将域远程重定向到子文件夹？

> ID：13354380
> 
> 赞同：0
> 
> 时间：2012-11-13T01:30:21.393
> 
> 标签：javascript, jquery, css, redirect

我正在研究杀死开关的替代品。与我一起工作的人不喜欢[css 终止开关](http://csskillswitch.com/)使屏幕变黑，并要求一个终止开关一旦激活就远程重定向到子文件夹。因此，当我们的服务器上的终止开关被激活时，终止开关将从 www.domain.com 重定向到 www.domain.com/oldsite/，这将保存他们的旧站点文件。有这样的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T01:33:28.553

您可以使用他们正在使用的相同技巧，但使用 JavaScript。

首先，在他们文档的开头，将此链接添加到您服务器上的 JavaScript 文件中：

```
<script src="http://your-server.com/kill-switches/offending-site.js"></script> 
```

然后，在服务器的根目录中，创建一个名为`kill-switches`. 在那里，创建一个名为 的文件`offending-site.js`，并将其放入该文件中：

```
window.location = 'http://offending-site.com/oldsite'; 
```

然后，只需根据需要注释/取消注释该行。

* * *

**注意：**请记住，这与 CSS Kill Switch 一样不简单*。*您的客户可以删除该`script`行并完成它。

**PS**请务必提供非缓存标头，否则将无法正常工作。

# iphone - 核心情节 gridLines 不能让虚线工作？

> ID：13354382
> 
> 赞同：1
> 
> 时间：2012-11-13T01:30:35.013
> 
> 标签：iphone, objective-c, ios, core-plot

试图为我的 gridLines 获得一条简单的虚线，但无法让它工作（目前是块实线）。互联网上没有太多帮助！

```
 CPTMutableLineStyle *gridLineStyle = [CPTMutableLineStyle lineStyle];
        gridLineStyle.lineColor = [self axisGreyClr];
        //gridLineStyle.lineWidth = 1.0f;
        gridLineStyle.dashPattern = [NSArray arrayWithObjects:[NSNumber numberWithFloat:0.8f], nil];
        gridLineStyle.patternPhase=0.0f; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T06:11:19.987

What Eric said above ,Code to get the Dashed Line

```
CPTMutableLineStyle *gridLineStyle = [CPTMutableLineStyle lineStyle];

gridLineStyle.dashPattern=[NSArray arrayWithObjects:[NSDecimalNumber numberWithInt:1],[NSDecimalNumber numberWithInt:2],[NSDecimalNumber numberWithInt:3],[NSDecimalNumber numberWithInt:4],[NSDecimalNumber numberWithInt:5],[NSDecimalNumber numberWithInt:6],[NSDecimalNumber numberWithInt:7],[NSDecimalNumber numberWithInt:8],nil]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-14T00:33:12.197

# django - 将数据 URL 上传到 Django 服务器

> ID：13354383
> 
> 赞同：5
> 
> 时间：2012-11-13T01:30:48.443
> 
> 标签：django, html5-canvas, image-uploading, data-url

我正在尝试在 Django 中执行[此](http://standupweb.net/canvas/swSaveCanvas.php)操作（将画布异步上传为图像文件）。我正在使用演示中的 javascript（稍作修改的版本），它滚动了自己的 XHRHttpRequest，但我无法在服务器端找到上传的任何证据。

画布数据是这样提取的：

```
img_data = canvas.toDataURL('image/jpeg').replace("data:image/jpeg;base64,", ""); 
```

这是 xhr 标头：

```
xhr.setRequestHeader('content-type', 'multipart/form-data; boundary=multipartformboundary1352769538973'); 
```

这是 POST 内容：

```
--multipartformboundary1352769538973
Content-Disposition: form-data; name="user_file"; filename="test.jpeg"
Content-Type: application/octet-stream

/9j/4AAQSkZJRgABAgAAAQABAAD/2wCEAAUDAwUHD...snipping image data...
AJRRRQAUtJS018gA/9k=
--multipartformboundary1352769538973
Content-Disposition: form-data; name="username"

--multipartformboundary1352769538973
Content-Disposition: form-data; name="challenge"

--multipartformboundary1352769538973
Content-Disposition: form-data; name="galleryPath"

--multipartformboundary1352769538973-- 
```

当我让 Django 向我展示它看到的请求对象时，这就是我得到的：

```
<WSGIRequest
path:/samlite/save_frame,
GET:<QueryDict: {}>,
POST:<QueryDict: {u'username': [u''], u'challenge': [u''], u'galleryPath': [u'']}>,
COOKIES:{},
META:{'ARCHFLAGS': '-arch i386',
 'Apple_PubSub_Socket_Render': '/tmp/launch-wL0OpX/Render',
 'Apple_Ubiquity_Message': '/tmp/launch-ox20mG/Apple_Ubiquity_Message',
 'COMMAND_MODE': 'unix2003',
 'CONTENT_LENGTH': '34323',
 'CONTENT_TYPE': 'multipart/form-data; boundary=multipartformboundary1352769538973',
 'DISPLAY': '/tmp/launch-KzsfWx/org.x:0',
 'DJANGO_SETTINGS_MODULE': 'simsam.settings',
 'DYLD_LIBRARY_PATH': '/Applications/bitnami-djangostack/apps/django/lib/python2.7/site-packages:/Applications/bitnami-djangostack/apps/django/lib/python2.7/site-packages:/Applications/bitnami-djangostack/python/lib:/Applications/bitnami-djangostack/mysql/lib:/Applications/bitnami-djangostack/sqlite/lib:/Applications/bitnami-djangostack/apache2/lib:/Applications/bitnami-djangostack/common/lib:',
 'GATEWAY_INTERFACE': 'CGI/1.1',
 'HOME': '/Users/chris',
 'HTTP_ACCEPT': 'text/html, application/xml;q=0.9, application/xhtml+xml, image/png, image/webp, image/jpeg, image/gif, image/x-xbitmap, */*;q=0.1',
 'HTTP_ACCEPT_ENCODING': 'gzip, deflate',
 'HTTP_ACCEPT_LANGUAGE': 'en,en-US;q=0.9,ja;q=0.8,fr;q=0.7,de;q=0.6,es;q=0.5,it;q=0.4,pt;q=0.3,pt-PT;q=0.2,nl;q=0.1',
 'HTTP_CONNECTION': 'Keep-Alive',
 'HTTP_HOST': 'localhost:8000',
 'HTTP_REFERER': 'http://localhost:8000/samlite/',
 'HTTP_USER_AGENT': 'Opera/9.80 (Macintosh; Intel Mac OS X 10.7.5) Presto/2.12.388 Version/12.10',
 'LANG': 'en_US.UTF-8',
 ...less interesting stuff snipped...
}> 
```

所以正常的 POST 键/值对正在通过，但基于[此](https://docs.djangoproject.com/en/dev/ref/request-response/)，我希望看到一个 response.FILES 字典。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T12:40:41.787

事实证明，如果我只是 POSTed `canvas.toDataURL()`，如上修剪字符串，并在服务器上执行此操作，那么整个事情会变得容易得多：

```
img_data = img_string.decode("base64")
img_file = open("photo.jpg", "wb")
img_file.write(img_data)
img_file.close() 
```

**根据肖恩的评论编辑**

我在 POST 中发送的只是 base64 数据部分，这意味着从以下结果中删除这些前导字符`toDataURL()`：

```
data:image/jpeg;base64, 
```

这可以在客户端或服务器端完成，关键是您需要在将 base64 字符解码为二进制并写入图像文件之前删除这些内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T02:25:12.183

Django 在输出中不包含`FILES`字典。`repr()`尝试访问它：

```
print request.FILES 
```

在[Django 源代码](https://github.com/django/django/blob/master/django/http/request.py#L396)中，您可以看到包含`path`, `GET`, `POST`, `COOKIES`, 和`META`，但没有包含`FILES`。

# applescript - 编写applescript单击确定按钮弹出窗口

> ID：13354388
> 
> 赞同：-2
> 
> 时间：2012-11-13T01:31:20.487
> 
> 标签：applescript

我在编写可以单击“确定”按钮的苹果脚本时遇到问题。我玩在线扑克游戏，我必须点击几个“确定”按钮才能注册锦标赛。我想让脚本在屏幕上出现“确定”按钮时单击。因此，当我单击“注册”按钮时，弹出窗口显示“您确定要注册此锦标赛吗？”，我单击“确定”，然后另一个弹出窗口显示“您现在已注册”，而不是我必须单击“确定”，然后另一个弹出窗口显示“比赛将立即开始”，然后单击另一个“确定”按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T23:22:49.203

好的，乔，我在您问题的评论中看到了您的代码。按钮通常是窗口或工作表的一部分，并且您没有将其中任何一个作为“单击按钮注册”代码行的一部分。有趣的是，您确实将它作为下一行的一部分。无论如何，试试这个，看看“注册”是否是前窗口中按钮的名称之一。如果是这样，那么您只需将“窗口 1”添加到该代码行。如果不是，那么还有其他问题。

```
activate application "RPM Poker"
tell application "System Events"
    tell process "RPM Poker"
        return title of buttons of window 1 -- try "name" or "description" instead of "title" if it doesn't work
    end tell
end tell 
```

从看你的照片我怀疑“点击按钮任何东西”会起作用，因为那是一个网页，而不是一个普通的可可窗口。您可能必须使用某种 javascript 代码来单击网页上的内容。不管怎样，试试这个脚本，看看它是否能看到按钮。

# c++ - 解析标识符但不包括 BOOST Spirit 中的保留字

> ID：13354391
> 
> 赞同：2
> 
> 时间：2012-11-13T01:31:51.087
> 
> 标签：c++, parsing, boost, boost-spirit

我有一个 SPIRIT 语法，其中包含：

```
small %= char_("a-z");
large %= char_("A-Z");
digit %= char_("0-9");
symbol %= char_("!#$%&*+./<=>?@\\^|~:") | char_('-');
special %= char_("(),;[]`{}");
graphic %= small | large | symbol | digit | special | char_('"') | char_('\'');

dashes %= lit("--")>>*lit("-");

varsym %= ((symbol-lit(':'))>>*symbol)-reservedop-dashes;
reservedop %= string("..") | string(":") | string("::") | string("=") | string("\\") | string("|") | string("<-") | string("->") | string("@") | string("~") | string("=>"); 
```

Spirit 不需要单独的词法分析器和解析器（请参阅[使用词法分析器的好处是什么？](http://boost-spirit.com/home/2010/01/25/what-are-the-benefits-of-using-a-lexer/)），我遵循这种做法，将前六个规则定义为`qi::rule<Iterator, char()>`，将后三个规则定义为`qi::rule<Iterator, std::string()>`。请注意，这些规则因此没有空格跳过。

另外，请注意，我试图将事物解析为`varsym`，而不是`reservedop`。我只是`reservedop`用来排除 varsym 规则中的东西。

但是，在 varsym 中排除保留字不起作用。`==`应该是有效的`varsym`，但它被忽略了，因为它以`=`which is a开头`reservedop`。

另一个问题的答案建议定义类似

```
 reservedop_ %= reservedop >> !symbol 
```

然后使用它。不过，我不确定这是否有效，而且它看起来当然不是很优雅。

在 BOOST Spirit 中执行此操作的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T08:27:53.100

在我看来，您混淆了词法分析和解析阶段。

> 他在 varsym 中排除保留字不起作用。== 应该是一个有效的 varsym 但它被忽略了，因为它以 = 开头，它是一个保留操作。

该声明对于显示的代码没有多大意义，因为您从未展示过如何使用规则：

```
 rule1 = varsym | reservedop; // would parse "==" as varsym
 rule2 = reservedop | varsym; // would parse "==" as reservedop 
```

看着

*   qi::graph、qi::alpha、qi::alnum、qi::lower、qi::upper 等。

    *   [http://www.boost.org/doc/libs/1_52_0/libs/spirit/doc/html/spirit/qi/reference/char/char_class.html](http://www.boost.org/doc/libs/1_52_0/libs/spirit/doc/html/spirit/qi/reference/char/char_class.html)
*   Spirit Repository 中的关键字和不同的解析器：

    *   [http://www.boost.org/doc/libs/1_52_0/libs/spirit/repository/doc/html/index.html](http://www.boost.org/doc/libs/1_52_0/libs/spirit/repository/doc/html/index.html)

如果您想使用从“正则表达式”定义的标记，正如您的代码所建议的那样，请查看将 Spirit 与基于 Lex 的标记器一起使用：

*   [http://www.boost.org/doc/libs/1_52_0/libs/spirit/doc/html/spirit/lex.html](http://www.boost.org/doc/libs/1_52_0/libs/spirit/doc/html/spirit/lex.html)

# c++ - 从 const unordered_map 读取对象

> ID：13354394
> 
> 赞同：28
> 
> 时间：2012-11-13T01:32:28.987
> 
> 标签：c++

为什么我不允许从常量 unordered_map 中读取对象？

```
const unordered_map<int, int> z;
int val = z[5]; // compile error 
```

clang下的错误如下：

```
error: no viable overloaded operator[] for type 'const
      unordered_map<int, int>'
                        int val = z[5]; 
```

考虑到使用 a 的等效代码可以`const vector`正常工作，我有点困惑为什么我们会得到这种行为。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-13T01:36:00.960

该表达式`z[5]`调用映射的非常量成员函数。

这是因为`operator[]`如果找不到键，映射将插入一个新元素，所以显然它必须是非常量的。

对于由`vector`插入的无`operator[]`，该元素必须已经存在（否则您会得到未定义的行为，因此等效代码将访问空向量的第 6 个元素，这不好！）。

要查找密钥而不添加它，请使用：

```
int val = 0;
auto it = z.find(5);
if (it != z.end())
  val = it->second; 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2017-08-07T14:19:36.890

正如 Jonathan 已经说过的，该`operator[]`方法是非常量的，因为它可能会在未找到要查找的项目时添加默认值。

另一方面，正如 Benjamin 在评论中强调的那样，该`at()`方法也可用于 const。

```
const unordered_map<int, int> z;
int val = z.at(5); // Success! 
```

缺点是当被查找的值不在映射中时，`std::out_of_range`会引发异常，因此必须对其进行管理。

# php - php 不接受所有图像扩展名？

> ID：13354400
> 
> 赞同：4
> 
> 时间：2012-11-13T01:33:17.453
> 
> 标签：php, sql, file-upload

我正在尝试将我的文件上传到我的服务器上的 profile/ 目录，我相信一切都可能正常工作......但是在上传时它认为我的 jpeg png 和 gif 不是正确的文件类型。为什么要这样做。这里有什么问题？我如何解决它？

```
function change_profile_image($user_id, $file_temp, $file_extn) {
$file_path = 'profile/' . substr (md5(time()), 0, 10) . '.' . $file_extn;
move_uploaded_file($file_temp, $file_path);
mysql_query("UPDATE `users` SET `profile` = " . mysql_real_escape_string($file_path) . "' WHERE `user_id` = " . (int)$user_id);

}

 if (isset($_FILES['profile']) === true) {
    if (empty($_FILES['profile']['name']) === true) {
       echo 'y u no choose file!';
  } else {
       $allowed = array ('jpg', 'jpeg', 'gif', 'png');
       //this is the part i think may be brocken.
       $file_name = $_FILES['profile']['name'];
       $file_extn = strtolower(end(explode (' . ', $file_name)));
       $file_temp = $_FILES['profile']['tmp_name'];

       if (in_array($file_extn, $allowed) === true) {
        change_profile_image($session_user_id, $file_temp, $file_extn);

        header('Location: dontdelete.php');
        exit();

       }else {
        echo 'y u no jpg or png or gif';       

       }
  }
 }

if (empty($user_data['profile']) === false) {
    echo '<img src"', $user_data['profile'], '" alt="">'; 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T01:35:09.307

更改`explode (' . ', $file_name)`为`explode ('.', $file_name)`

您还需要检查它的有效图像，而不仅仅是以图像扩展名结尾。

`=`您的 img 输出中也缺少您，您也可以连接而不是回显 3 次：

`echo '<img src="'.$user_data['profile'].'" alt="">';`

# php - 在 Symfony2/Doctrine SQL 中使用 JOIN

> ID：13354401
> 
> 赞同：14
> 
> 时间：2012-11-13T01:33:23.530
> 
> 标签：php, symfony, doctrine, dql, query-builder

我在尝试使用 QueryBuilder 或 DQL 时遇到问题。

我有以下关系：

用户 <-1:n-> 配置文件 <-n:m-> 路由组 <-1:n-> 路由

我想制作一个列出特定用户可以访问的所有路由的 DQL。我可以使用以下代码获取此信息：

```
$usr = $this->container->get('security.context')->getToken()->getUser();
foreach ($usr->getProfiles() as $profile){
    foreach ($profile->getRoutegroups() as $routegroup){
        var_dump($routegroup->getRoutes()->toArray());
     }
} 
```

出于显而易见的原因，我不能使用此代码，否则我的服务器会超载，哈哈。

我尝试了以下方法：

数据质量：

```
$em->createQuery('SELECT p FROM CRMCoreBundle:User u
                  JOIN CRMCoreBundle:Profile p
                  JOIN CRMCoreBundle:RoleGroup rg
                  JOIN CRMCoreBundle:Role r
                  WHERE
                    u.id=:user')
        ->setParameter('user', $user->getId())
        ->getResult(); 
```

QueryBuilder（我尝试使用 u.profiles - 关系的名称而不是实体的名称 - 但这也不起作用）：

```
$em->createQueryBuilder()
        ->select('r')
        ->from('CRMCoreBundle:User', 'u')
        ->innerJoin('u.profiles','p')
        ->where('u.id = :user_id')
        ->setParameter('user_id', $user->getId())
        ->getQuery()
        ->getResult(); 
```

有人可以帮忙吗？？？

**更新：我尝试了 Zeljko 的解决方案并制作了这个脚本：**

```
 return $this->getEntityManager()
        ->createQueryBuilder()
        ->select('u, r')
        ->from('CRMCoreBundle:User', 'u')
        ->innerJoin('u.profiles','p')
        ->innerJoin('p.routegroups','rg')
        ->innerJoin('rg.routes','r')
        ->where('u.id = :user_id')->setParameter('user_id', $user->getId())
        ->getQuery()
        ->getResult(); 
```

但我得到了这个错误：

```
The parent object of entity result with alias 'r' was not found. The parent alias is 'rg'. 
```

如果我将“->select('u, r')”更改为“->select('r')”，我会得到：

```
[Semantical Error] line 0, col -1 near 'SELECT r FROM': Error: Cannot select entity through identification variables without choosing at least one root entity alias. 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-13T02:23:23.437

在尝试了一些替代方案后，我发现我可以进行反向查找，从路由到用户。解决方案如下：

```
return $this->getEntityManager()
        ->createQueryBuilder()
        ->select('r')
        ->from('CRMCoreBundle:Route', 'r')
        ->innerJoin('r.routegroup','rg')
        ->innerJoin('rg.profiles','p')
        ->innerJoin('p.users','u')
        ->where('u.id = :user_id')
        ->setParameter('user_id', $user->getId())
        ->getQuery()
        ->getResult(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T01:56:56.937

在您的 DQL 中，您正在获取用户，但您询问了如何获取路由。你实际上需要什么？

无论如何，在 RoutesRepository 中：

```
$this->createQueryBuilder("r")
  ->innerJoin("r.Profiles", "p")
  ->innerJoin("p.User", "u")
  ->where("u=:user")->setParameter("user", $user) 
```

我可能不理解这种关系，但我认为您可以更改它以反映您的代码。您必须使用innerJoin，而不是leftJoin。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-14T11:47:33.097

我不是 Doctrine 的专家，但只是解决了一个非常相似的问题。我通过在语句的 SELECT 部分的连接中包含您使用的所有实体来解决我的问题。

我没有对此进行测试，但这应该可以。

```
$em->createQuery('SELECT u, p, rg, r FROM CRMCoreBundle:User u
              JOIN CRMCoreBundle:Profile p
              JOIN CRMCoreBundle:RoleGroup rg
              JOIN CRMCoreBundle:Role r
              WHERE
                u.id=:user')
    ->setParameter('user', $user->getId())
    ->getResult(); 
```

我不知道确切原因，但是如果您不包含实体，那么 hydrator 不知道您用于实体的别名。

我希望这会有所帮助。

# python - 如何使用 python albatross 框架获取请求变量

> ID：13354406
> 
> 赞同：1
> 
> 时间：2012-11-13T01:33:52.383
> 
> 标签：python, apache, mod-python

我继承了一个python项目，我承认我对此很菜鸟，但该项目是使用albatross框架完成的。我在表单中添加了两个字段：“密码”和“随机”。我现在需要知道如何在后端检索这些表单字段。在 php 中，它将如下所示：

```
$password = $_REQUEST['password'];
$random = $_REQUEST['random']; 
```

我一直在使用 albatross 框架搜索有关如何执行此操作的信息，但在我继承的平台上找不到任何可以工作的东西时遇到了麻烦。这是在 apache 2.6 中，使用 mod_python，并依赖于 albatross.cgiapp 中的 RequestFields 功能。

有没有人知道如何做到这一点，快速而肮脏，或者通过一个体面的教程，这是特定于我正在使用的框架的？albatross 文档似乎没有说明如何从表单字段中获取数据，并且挖掘源代码似乎并没有出现太多。

感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T01:39:53.687

您是否阅读了手册中有关[使用表格](http://www.object-craft.com.au/projects/albatross/albatross/tempuser.html#using-forms-to-receive-user-input)的部分？这很好地解释了事情。

```
import cgi
form = cgi.FieldStorage() 
```

现在`form`应该包含一个包含所有表单数据的字典。

# sqlite - SQLite sqlite3_column_text 返回损坏的数据

> ID：13354408
> 
> 赞同：1
> 
> 时间：2012-11-13T01:34:10.650
> 
> 标签：sqlite, mfc, sqldatatypes, c-strings, corrupt

我已经尝试过 strcpy、memcpy 等。但不幸的是，在完成 sqlite 后，char 数据仍然损坏。但是 CString 数据没有任何反应。我知道我必须在完成之前将该字段复制到另一个字段中，但它不起作用。我也不确定是否可以安全地使用 CString 数据。

```
 CString StrDescription;
    char dbDescription1[110+1];

    const char *data = NULL;
    char *SQLString= new char[SQLStr.GetLength()+1] ;
    memset(SQLString,0x00,sizeof(SQLString)-1);wcstombs(SQLString,SQLStr,SQLStr.GetLength());SQLString[SQLStr.GetLength()]='\0';
    if ( sqlite3_prepare_v2( db,SQLString , -1, &stmt, NULL )!= SQLITE_OK)
    {
       sqlite3_finalize( stmt ); sqlite3_close(db); delete[] SQLString; return -1;
    }
    delete[] SQLString;

    if( sqlite3_step( stmt ) == SQLITE_ROW ) 
    {       
        data = (const char*)sqlite3_column_text( stmt, 4 ); sprintf(dbDescription1 ,"%s",data); 
        StrDescription = CString(data);
    }    

    AfxMessageBox(CString(dbDescription)); // Result is ok here..
    AfxMessageBox(StrDescription); // Result is ok here as well.

    sqlite3_finalize( stmt );  sqlite3_close(db);

    AfxMessageBox(CString(dbDescription)); // Result corrupt here
    AfxMessageBox(StrDescription); // Result still ok 

    Thanks 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:42:55.793

在我看来，这是因为 StrDescription 保留了字符串的副本，在 Sqlite 完成清理 dbDescription1 指向的内存后它仍然有效。所以是的，在这种情况下使用你的 CString 是安全的，并且在这种情况下优先于以 C 方式（使用 strcpy/strncpy 等）制作副本，因为字符串类（无论是 CString 还是 std::string 或其他）将保护您免受容易犯的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T14:46:36.163

SQLite 不检查列限制，因此有可能超过 110 个字符。

此外，在 UTF-8 中，字符不一定与字节相同，因此有可能超过 110 个字节。

使用`sqlite3_column_bytes`或`strlen`检查您需要分配多大的缓冲区，或者仅使用 a`CString`作为缓冲区。

# c# - 具有超类的泛型类

> ID：13354411
> 
> 赞同：2
> 
> 时间：2012-11-13T01:34:23.567
> 
> 标签：c#, generics, superclass

```
class Program
{
    static void Main(string[] args)
    {
        //GrandFather gf = new Son();
        IGF<Father> igf = new MyClass();
    }
}
public class Father
{

}
public class Son : Father
{
}
public class MyClass : IGF<Son>
{
    public void Method()
    {
        //DoSomething
    }
}
public interface IGF<T> where T : Father
{
    void Method();
} 
```

大家好，我在使用泛型类和超类时遇到一个问题。谁能告诉我为什么第 6 行是错误的，当我们使用列表时，我们总是说 IList ss=new List();

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T01:39:35.113

如果您使用的是 C# 4.0，则可以将`out`关键字添加到`IGF`实现中以使其成为[协变接口](http://blogs.msdn.com/b/csharpfaq/archive/2010/02/16/covariance-and-contravariance-faq.aspx)。这允许您拥有一个带有基类的泛型（此处`Father`），并让它指向具有派生泛型类型的同一接口的实例（`Son`）。

# objective-c - 比较 UILabel 分数

> ID：13354412
> 
> 赞同：1
> 
> 时间：2012-11-13T01:34:26.423
> 
> 标签：objective-c, ios, xcode

我有 2 个 UILables：

myScore.text; 和 hisScore.text;

当我的 NSTimer 达到 0 时，我有以下代码：

```
if (MainInt <= 0) {
        [Mytimer invalidate];

        if (myScore.text < hisScore.text) {
            UIAlertView *win = [[UIAlertView alloc]initWithTitle:@"Congrats" message:@"You WIN" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
            [win show];
        }
        else if(myScore.text > hisScore.text) {
            UIAlertView *lose = [[UIAlertView alloc]initWithTitle:@"Hmmmm" message:@"You lose :(" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
            [lose show];
        }

        else if(myScore.text == hisScore.text) {
            UIAlertView *tie = [[UIAlertView alloc]initWithTitle:@"Not Bad" message:@"No winners. TIE" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
            [tie show];
        }
    } 
```

如果我的分数大于他的分数，我该如何比较？我的代码不起作用。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T01:36:42.377

您当前正在比较两个字符串。

您将不得不比较这些字符串的整数值。要在 Objective-C 中访问字符串的整数值，可以使用如下`intValue`方法：

```
[myScore.text intValue] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T01:40:37.150

采用

```
[myScore.text integerValue]; 
```

或者

```
[myScore.text intValue]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T01:41:39.837

你为什么要为此比较标签的文本？您应该在班级中的某种整数变量中获得实际分数。视图应该只用于显示数据，而不是存储数据。如果您使用类型的 ivars`int`或其他适当的数据类型，那么您可以对这些值执行适当的操作。

保留标签以显示格式良好的数据表示。

但是如果您坚持使用标签，`int`请先将标签文本转换为值。

```
int scoreA = [myScore.text intValue]; 
```

编辑：这是对您当前代码有什么问题的进一步解释。在 Objective-C 中，NSString 类是一个类。它是一种对象类型。当你写：

```
if (myScore.text > hisScore.text) 
```

您实际上是在比较两个字符串对象的两个内存地址。所以比较这两个指针是没有意义的。

您可以像这样比较两个字符串：

```
if ([myScore.text compare:hisScore.text] == NSOrderedAscending) 
```

但这会进行字母比较，而不是数字比较。

但这里的关键是您很少希望将标准比较运算符与对象指针一起使用。使用适当的方法比较两个对象值。

# .htaccess - 如何使用 htaccess 删除 URL 参数但保留动态元素？

> ID：13354415
> 
> 赞同：1
> 
> 时间：2012-11-13T01:35:04.347
> 
> 标签：.htaccess, mod-rewrite, redirect

谷歌在一个网站的侧边栏中发现了一个寻呼机，它允许用户在博客条目上滚动浏览“标签”，每次寻呼机点击都会将您带到一个新的网址，例如`example.com/blog/article-title?page=1`。

由于博客有大约 500 篇文章，而分页器有大约 140 页标签，谷歌已经为我的网站索引了非常多的页面。我不想要这个有很多原因。我已经删除了此标记块上的寻呼机，因为它完全没有必要，但现在想对所有这些`?page=X`URL 进行 301 重定向，希望随着时间的推移，Google 会将它们从索引中删除。

URL 如下所示：

*   [http://example.com/blog/blog-article-title?page=0](http://example.com/blog/blog-article-title?page=0)
*   [http://example.com/blog/blog-article-title?page=1](http://example.com/blog/blog-article-title?page=1)
*   [http://example.com/blog/blog-article-title?page=2](http://example.com/blog/blog-article-title?page=2)

**如何通过 htaccess 进行 301 重定向，将用户发送到 `http://example.com/blog/blog-article-title` ？**

我已经尝试了很多变化

*   `RewriteRule ^blog/(.*).?page(.*)$ /$1/blog/$2? [R=301,L]`

和

*   `RedirectMatch 301 ^/blog/(.*)\?page(.*)$ /blog/$1`

但到目前为止还没有运气。任何帮助将非常感激。

**编辑：**对于其他可能偶然发现的人，Google 完全忽略了标头中定义的规范 URL，并将所有 30,000 多个 URL 组合编入索引。在下面接受的答案中进行 htaccess 重写是在这些页面上正确执行 301。当然，这需要我将寻呼机移到别处，但在我的特殊情况下已经处理过了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T01:44:18.067

您的问题是您试图重定向 URL 而不是查询字符串。看到这个问题：[Query string redirection with htaccess](https://stackoverflow.com/questions/7000110/query-string-redirection-with-htaccess)

基本上，您需要一个`RewriteCond`基于查询字符串。这将是两条线；IE：

```
RewriteCond %{QUERY_STRING} ......
RewriteRule .... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T02:53:42.060

如果没有 query_string 选项，这应该可以工作：

```
RewriteEngine On
# one url with many params
#RewriteRule ^blog/blog-article?(.*) http://www.yourblog.com/index\.php$1 [R=301,L]
# or many url
RewriteRule ^blog/sub(.*)\?(.*) http://www.yourblog.com/onething/$1?$2 [R=301,L] 
```

如果这不起作用，您的脚本中可能还有其他问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T15:30:08.980

```
RewriteEngine on
RewriteCond %{REQUEST_URI} ^/blog/
RewriteCond %{QUERY_STRING} page
RewriteRule (.*) /$1? [R=301,L] 
```

这应该可以实现您正在尝试做的事情。

# html - ios6 / Safari 上的 HTML5 视频标签自动播放

> ID：13354420
> 
> 赞同：1
> 
> 时间：2012-11-13T01:35:42.987
> 
> 标签：html, ios6, html5-video

我正在尝试建立一个可以轮流自动播放短视频（.mov）的网站。对 HTML5 来说似乎没问题，并且与 PC 上的 Chrome 配合得很好。但在 iPad 上运行时，视频不会自动播放，而是等待有人点击视频。没有办法自动播放吗？我试图通过javascript调用，但失败了。欢迎任何建议。我已经在 iPad2 上确认了 ios6.01 ..

标签如下：

```
 <video id="vidWindow" controls="controls"
           autoplay="autoplay"  poster="images/rbc3d.png">
        <source src="videos/28497184.mp4"   />
            Your browser does not support the video tag.
    </video> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T09:58:46.077

只需将“ **webkit-playsinline** ”属性添加到视频标签并执行以下 javacript 函数

```
function playVideo(){
   var video = document.getElementById("vidWindow");
   video.play();
}
playVideo(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T09:01:29.057

这是 Apple 故意禁用的（并且有充分的理由）。Safari 参考库指出：

在 iPhone OS（适用于所有设备，包括 iPad）上的 Safari 中，用户可能在蜂窝网络上并按数据单位收费，因此禁用了自动缓冲和自动播放。在用户启动数据之前不会加载数据。这意味着 JavaScript play() 和 load() 方法在用户开始播放之前也是不活动的，除非 play() 方法由用户操作触发。

# ember.js - Ember.js 路由器在 Firefox 和 IE 中推送额外状态，但在 Chrome 中没有

> ID：13354422
> 
> 赞同：3
> 
> 时间：2012-11-13T01:35:49.633
> 
> 标签：ember.js, ember-old-router

鉴于此 Ember.js 应用程序的基本路由器定义直接取自此处的 Ember API 文档：http: [//emberjs.com/api/classes/Ember.Router.html](http://emberjs.com/api/classes/Ember.Router.html)

```
App = Ember.Application.create({
  Router: Ember.Router.extend({
    root: Ember.Route.extend({
      index: Ember.Route.extend({
        route: '/'
      }),
      ... additional Ember.Routes ...
    })
  })
}); 
```

这将在 chrome 中生成以下 url：

本地主机/

但在 Firefox 和 IE 中会产生：

本地主机/#

它不仅在末尾添加了 hash bang，而且后退按钮在 Firefox 和 IE 中都有历史记录：

本地主机/

然而，这个“状态”不能被刷新。刷新将再次带您到：

本地主机/#

这似乎路由器以某种方式推动了 2 个状态，但其中一个并不是真正有效的。有人可以解释一下我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T18:00:36.133

默认情况下，Ember 应用程序在路由中有 #。我不确定您为什么会出现不一致，但是为了告诉路由器不要在 url 中使用 # 您可以设置“位置”选项：

```
App.Router = Ember.Router.extend({
  location: 'history'
}); 
```

这是文档中引用 location 属性的地方： http: [//emberjs.com/api/classes/Ember.Router.html#property_location](http://emberjs.com/api/classes/Ember.Router.html#property_location)

# ruby-on-rails-3 - 需要帮助编写此 RSpec 测试

> ID：13354425
> 
> 赞同：0
> 
> 时间：2012-11-13T01:36:28.890
> 
> 标签：ruby-on-rails-3, testing, rspec, capybara

我是 RSpec 和 BDD 的新手。我也是 Railscast 迷，我一直在尽可能多地关注测试、RSpec、BDD 和 Capybara。具体来说，我一直在一遍又一遍地观看[第 275 集](http://railscasts.com/episodes/275-how-i-test)，其中涵盖了在保存规范后使用 Guard 自动运行测试，并涉及 Capybara 和集成规范。

这就是我关于 BDD 和 RSpec/Capybara 的背景。我真的从今天开始。现在我的情况是这样的：

我有一个模型任务。当我创建一个新任务时，我应该会在顶部收到一条消息，说明它已成功创建并被定向到一个新的任务页面。然而，在我实现这个之前，我想先写一个测试来演示这个功能（正如鲍勃叔叔曾经说过的，你不应该写任何代码，直到你写了至少一个失败的测试）。我对我应该写什么类型的测试有点迷茫。这是集成规范还是控制器规范？或两者？这些测试会是什么样子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T01:54:04.193

这是一个通用示例，可​​帮助您入门：

```
describe "Creating a new Task" do
  before do
    # setup tasks for logging in a user with sufficient rights
    # create any objects ont which the new Task depends

    visit "/tasks/new"
    fill_in "name", :with => "Sample Task"
    click_button "Submit"
  end

  it "should show a success message" do
    page.should have_content "Task was created successfully"
  end

  it "should redirect to the show task page" do
    page.should have_content "Show Task"
    task = Task.last
    current_path.should == task_path(task)
  end
end 
```

# java - 如何在摇摆中将列表传递给初始帧

> ID：13354429
> 
> 赞同：0
> 
> 时间：2012-11-13T01:36:42.050
> 
> 标签：java, swing

```
public Lab7(File file) {
    List<Item> items = null;
    try {
        items = InventoryReader.read(file);
    } catch (ApplicationException e) {
        LOG.error(e.getMessage());
        return;
    }

    EventQueue.invokeLater(new Runnable() {         
        public void run() {
            try {
                for (LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) {
                    if ("Nimbus".equals(info.getName())) {
                        UIManager.setLookAndFeel(info.getClassName());
                        break;
                    }
                }
            } catch (Exception e) {
                // If Nimbus is not available, use the default.
            }
            try {
                MainFrame frame = new MainFrame(items); // THIS IS WHERE I HAVE TROUBLE
                frame.setVisible(true);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });
} 
```

背景：我将 MainFrame 的构造函数设置为接受一个列表。如何在我的应用程序的 main() 中执行此操作？

我得到错误：

无法引用以不同方法定义的内部类中的非最终变量“项目”

错误在于 `MainFrame frame = new MainFrame(items)` 我似乎无法将 MainFrame 类传递给 items 变量...这是为什么呢？

如何将此变量传递到 MainFrame 框架中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T01:49:52.470

你有两个选择......

## 选择一...

将`items`列表设为最终列表，以便可以从`Runnable`s 上下文中访问它...

```
public Lab7(File file) {
    final List<Item> items = null; // Make the items final...
    try {
        items = InventoryReader.read(file);
    } catch (ApplicationException e) {
        LOG.error(e.getMessage());
        return;
    }

    EventQueue.invokeLater(new Runnable() {         
        public void run() {
            try {
                for (LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) {
                    if ("Nimbus".equals(info.getName())) {
                        UIManager.setLookAndFeel(info.getClassName());
                        break;
                    }
                }
            } catch (Exception e) {
                // If Nimbus is not available, use the default.
            }
            try {
                MainFrame frame = new MainFrame(items); // THIS IS WHERE I HAVE TROUBLE
                frame.setVisible(true);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });
} 
```

## 选择二...

将`items`列表移动到`Runnable`s 上下文中

```
public Lab7(File file) {

    EventQueue.invokeLater(new Runnable() {         
        public void run() {
            // Load the items within the content of the runnable...
            List<Item> items = null;
            try {
                items = InventoryReader.read(file);
            } catch (ApplicationException e) {
                LOG.error(e.getMessage());
                return;
            }
            try {
                for (LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) {
                    if ("Nimbus".equals(info.getName())) {
                        UIManager.setLookAndFeel(info.getClassName());
                        break;
                    }
                }
            } catch (Exception e) {
                // If Nimbus is not available, use the default.
            }
            try {
                MainFrame frame = new MainFrame(items); // THIS IS WHERE I HAVE TROUBLE
                frame.setVisible(true);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T01:42:15.407

`List<Item> items`需要声明为final。

您正在从扩展的内部类访问非最终局部变量`Runnable`，这是不允许的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T01:45:47.557

声明`List<Item> items`为成员变量并使用您的构造函数来初始化您的列表。

```
public class Lab7 {

    private List<Item> items;

    public Lab7(File file) {
        try {
           items = InventoryReader.read(file);
        } catch (ApplicationException e) {
           LOG.error(e.getMessage());
           return;
        }

        EventQueue.invokeLater(new Runnable() {         
        public void run() {
            try {
                for (LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) {
                    if ("Nimbus".equals(info.getName())) {
                        UIManager.setLookAndFeel(info.getClassName());
                        break;
                    }
                }
            } catch (Exception e) {
                // If Nimbus is not available, use the default.
            }
            try {
                MainFrame frame = new MainFrame(items);
                frame.setVisible(true);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
        });
    }
} 
```

# java - HttpClient 4.x httpGet 与 cookie/会话

> ID：13354430
> 
> 赞同：1
> 
> 时间：2012-11-13T01:36:46.563
> 
> 标签：java, cookies, curl, httpclient

我正在尝试从给定的 URL 获取页面，该页面需要经过身份验证才能工作。

我已成功在登录 url 上使用 HttpPost 获取 cookie。我得到这样的cookie，所以看起来还可以：

```
Cookie: [version: 0][name: ASP.NET_SessionId][value:wqvdz0bvroatgi45ywpsto2q][domain:xxx][path:/][expiry: null] 

Cookie: [version: 0][name: lan][value: 2057][domain:xxx][path: /][expiry: Thu Dec 13 02:08:52 CET 2012] 
```

现在，当我尝试从已知 url 获取页面时，我最终只得到“登录”页面。

我正在从运行良好的 PHP 转换代码。我每次都放了我认为等效的东西。

```
 HttpClient httpClient = new DefaultHttpClient();
    httpClient.getParams().setParameter(CoreProtocolPNames.HTTP_CONTENT_CHARSET, CHARSET);

    //      curl_setopt($ch2, CURLOPT_COOKIESESSION, false);
    httpClient.getParams().setParameter(ClientPNames.COOKIE_POLICY, CookiePolicy.IGNORE_COOKIES);

    //      curl_setopt($ch2, CURLOPT_FOLLOWLOCATION, true);
    httpClient.getParams().setParameter(ClientPNames.HANDLE_REDIRECTS,true);
    //      curl_setopt($ch2, CURLOPT_MAXREDIRS, 10);
    httpClient.getParams().setParameter(ClientPNames.MAX_REDIRECTS, 10);
    //      curl_setopt($ch2, CURLOPT_USERAGENT, USER_AGENT);
    httpClient.getParams().setParameter(CoreProtocolPNames.USER_AGENT,USER_AGENT); 
    //      curl_setopt($ch2, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_1);
    httpClient.getParams().setParameter(CoreProtocolPNames.PROTOCOL_VERSION, HttpVersion.HTTP_1_1);

    //      curl_setopt($ch2, CURLOPT_COOKIEFILE, COOKIE_FILE);
    Connexion con = new Connexion();
    CookieStore oldCookieStore = con.getCookieStore();
    CookieStore cookieStore = new BasicCookieStore();
    for (Cookie c : oldCookieStore.getCookies()) {
        cookieStore.addCookie(c);
    }

    HttpContext context = new BasicHttpContext();
    context.setAttribute(ClientContext.COOKIE_STORE, cookieStore);

    HttpGet httpGet = new HttpGet(URL);

    HttpResponse response = httpClient.execute(httpGet, context);

    // Examine the response status
    System.out.println(response.getStatusLine());

    // Get hold of the response entity
    HttpEntity entity = response.getEntity();

    ... ( treat entity ) 
```

我还没有找到这些行的等价物，我认为这是与生俱来的：

> ```
> //        curl_setopt($ch2, CURLOPT_BINARYTRANSFER, true);
> //        curl_setopt($ch2, CURLOPT_RETURNTRANSFER, true);
> //        curl_setopt($ch2, CURLOPT_AUTOREFERER, true) 
> ```

以下是日志，我们可以看到 3 次尝试最终以登录 URL 结束：

```
DEBUG [org.apache.http.impl.conn.BasicClientConnectionManager] Get connection for route {}->http://xxx
DEBUG [org.apache.http.impl.conn.DefaultClientConnectionOperator] Connecting to xxx:80
DEBUG [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: ignoreCookies
DEBUG [org.apache.http.client.protocol.RequestAddCookies] Cookie [version: 0][name: ASP.NET_SessionId][value: wqvdz0bvroatgi45ywpsto2q][domain: xxx][path: /][expiry: null] match [xxx:80/GENERAL.aspx]
DEBUG [org.apache.http.client.protocol.RequestAddCookies] Cookie [version: 0][name: lan][value: 2057][domain: xxx][path: /][expiry: Thu Dec 13 02:08:52 CET 2012] match [xxx:80/GENERAL.aspx]
DEBUG [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context
DEBUG [org.apache.http.client.protocol.RequestTargetAuthentication] Target auth state: UNCHALLENGED
DEBUG [org.apache.http.client.protocol.RequestProxyAuthentication] Proxy auth state: UNCHALLENGED
DEBUG [org.apache.http.impl.client.DefaultHttpClient] Attempt 1 to execute request
DEBUG [org.apache.http.impl.conn.DefaultClientConnection] Sending request: GET /GENERAL.aspx?id=6414 HTTP/1.1
DEBUG [org.apache.http.headers] >> GET /GENERAL.aspx?id=6414 HTTP/1.1
DEBUG [org.apache.http.headers] >> Host: xxx
DEBUG [org.apache.http.headers] >> Connection: Keep-Alive
DEBUG [org.apache.http.headers] >> User-Agent: User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:16.0) Gecko/20100101 Firefox/16.0
DEBUG [org.apache.http.impl.conn.DefaultClientConnection] Receiving response: HTTP/1.1 302 Found
DEBUG [org.apache.http.headers] << HTTP/1.1 302 Found
DEBUG [org.apache.http.headers] << Cache-Control: private
DEBUG [org.apache.http.headers] << Content-Length: 229
DEBUG [org.apache.http.headers] << Content-Type: text/html; charset=utf-8
DEBUG [org.apache.http.headers] << Location: /Default.aspx?ReturnUrl=%2fGENERAL.aspx%3id=6414
DEBUG [org.apache.http.headers] << Server: Microsoft-IIS/7.5
DEBUG [org.apache.http.headers] << X-AspNet-Version: 2.0.50727
DEBUG [org.apache.http.headers] << X-Powered-By: ASP.NET
DEBUG [org.apache.http.headers] << Date: Tue, 13 Nov 2012 01:08:51 GMT
DEBUG [org.apache.http.impl.client.DefaultHttpClient] Connection can be kept alive indefinitely
DEBUG [org.apache.http.impl.client.DefaultRedirectStrategy] Redirect requested to location '/Default.aspx?ReturnUrl=%2fGENERAL.aspx%3id=6414'
DEBUG [org.apache.http.impl.client.DefaultHttpClient] Redirecting to 'http://xxx/Default.aspx?ReturnUrl=%2fGENERAL.aspx%3id=6414' via {}->http://xxx
DEBUG [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: ignoreCookies
DEBUG [org.apache.http.client.protocol.RequestAddCookies] Cookie [version: 0][name: ASP.NET_SessionId][value: wqvdz0bvroatgi45ywpsto2q][domain: xxx][path: /][expiry: null] match [xxx:80/Default.aspx]
DEBUG [org.apache.http.client.protocol.RequestAddCookies] Cookie [version: 0][name: lan][value: 2057][domain: xxx][path: /][expiry: Thu Dec 13 02:08:52 CET 2012] match [xxx:80/Default.aspx]
DEBUG [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context
DEBUG [org.apache.http.client.protocol.RequestTargetAuthentication] Target auth state: UNCHALLENGED
DEBUG [org.apache.http.client.protocol.RequestProxyAuthentication] Proxy auth state: UNCHALLENGED
DEBUG [org.apache.http.impl.client.DefaultHttpClient] Attempt 2 to execute request
DEBUG [org.apache.http.impl.conn.DefaultClientConnection] Sending request: GET /Default.aspx?ReturnUrl=%2fGENERAL.aspx%3id=6414 HTTP/1.1
DEBUG [org.apache.http.headers] >> GET /Default.aspx?ReturnUrl=%2fGENERAL.aspx%3id=6414 HTTP/1.1
DEBUG [org.apache.http.headers] >> Host: xxx
DEBUG [org.apache.http.headers] >> Connection: Keep-Alive
DEBUG [org.apache.http.headers] >> User-Agent: User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:16.0) Gecko/20100101 Firefox/16.0
DEBUG [org.apache.http.impl.conn.DefaultClientConnection] Receiving response: HTTP/1.1 302 Found
DEBUG [org.apache.http.headers] << HTTP/1.1 302 Found
DEBUG [org.apache.http.headers] << Cache-Control: private
DEBUG [org.apache.http.headers] << Content-Length: 165
DEBUG [org.apache.http.headers] << Content-Type: text/html; charset=utf-8
DEBUG [org.apache.http.headers] << Location: /LOGIN.aspx
DEBUG [org.apache.http.headers] << Server: Microsoft-IIS/7.5
DEBUG [org.apache.http.headers] << X-AspNet-Version: 2.0.50727
DEBUG [org.apache.http.headers] << X-Powered-By: ASP.NET
DEBUG [org.apache.http.headers] << Date: Tue, 13 Nov 2012 01:08:52 GMT
DEBUG [org.apache.http.impl.client.DefaultHttpClient] Connection can be kept alive indefinitely
DEBUG [org.apache.http.impl.client.DefaultRedirectStrategy] Redirect requested to location '/LOGIN.aspx'
DEBUG [org.apache.http.impl.client.DefaultHttpClient] Redirecting to 'http://xxx/LOGIN.aspx' via {}->http://xxx
DEBUG [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: ignoreCookies
DEBUG [org.apache.http.client.protocol.RequestAddCookies] Cookie [version: 0][name: ASP.NET_SessionId][value: wqvdz0bvroatgi45ywpsto2q][domain: xxx][path: /][expiry: null] match [xxx:80/LOGIN.aspx]
DEBUG [org.apache.http.client.protocol.RequestAddCookies] Cookie [version: 0][name: lan][value: 2057][domain: xxx][path: /][expiry: Thu Dec 13 02:08:52 CET 2012] match [xxx:80/LOGIN.aspx]
DEBUG [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context
DEBUG [org.apache.http.client.protocol.RequestTargetAuthentication] Target auth state: UNCHALLENGED
DEBUG [org.apache.http.client.protocol.RequestProxyAuthentication] Proxy auth state: UNCHALLENGED
DEBUG [org.apache.http.impl.client.DefaultHttpClient] Attempt 3 to execute request
DEBUG [org.apache.http.impl.conn.DefaultClientConnection] Sending request: GET /LOGIN.aspx HTTP/1.1
DEBUG [org.apache.http.headers] >> GET /LOGIN.aspx HTTP/1.1
DEBUG [org.apache.http.headers] >> Host: xxx
DEBUG [org.apache.http.headers] >> Connection: Keep-Alive
DEBUG [org.apache.http.headers] >> User-Agent: User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:16.0) Gecko/20100101 Firefox/16.0
DEBUG [org.apache.http.impl.conn.DefaultClientConnection] Receiving response: HTTP/1.1 200 OK
DEBUG [org.apache.http.headers] << HTTP/1.1 200 OK
DEBUG [org.apache.http.headers] << Cache-Control: no-cache
DEBUG [org.apache.http.headers] << Pragma: no-cache
DEBUG [org.apache.http.headers] << Content-Length: 66322
DEBUG [org.apache.http.headers] << Content-Type: text/html; charset=utf-8
DEBUG [org.apache.http.headers] << Server: Microsoft-IIS/7.5
DEBUG [org.apache.http.headers] << X-AspNet-Version: 2.0.50727
DEBUG [org.apache.http.headers] << X-Powered-By: ASP.NET
DEBUG [org.apache.http.headers] << Date: Tue, 13 Nov 2012 01:08:52 GMT
DEBUG [org.apache.http.impl.client.DefaultHttpClient] Connection can be kept alive indefinitely
HTTP/1.1 200 OK
DEBUG [org.apache.http.impl.conn.BasicClientConnectionManager] Releasing connection org.apache.http.impl.conn.ManagedClientConnectionImpl@4cf7c31d
DEBUG [org.apache.http.impl.conn.BasicClientConnectionManager] Connection can be kept alive indefinitely 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T02:29:25.353

你的代码：

```
 httpClient.getParams().setParameter(ClientPNames.COOKIE_POLICY, CookiePolicy.IGNORE_COOKIES); 
```

导致 HttpClient 不存储任何 cookie。

我假设服务器通过 cookie 跟踪您的登录，因此由于您没有存储任何内容，因此您似乎总是未经身份验证，因此登录页面。

# javascript - 我将如何创建这样的输入系统？

> ID：13354433
> 
> 赞同：0
> 
> 时间：2012-11-13T01:37:08.507
> 
> 标签：javascript, web

这个周末我刚开始用 javascript 进行文字冒险。

我意识到提示输入系统会变得非常烦人，所以我想切换到一个条形输入系统，它会收集输入并将其存储在“动作”变量中（参见源代码），就像我的这个例子一样设法找到：http: [//iainlobb.com/dork/](http://iainlobb.com/dork/)

来源：[http ://dl.dropbox.com/u/96609235/mainfile.txt](http://dl.dropbox.com/u/96609235/mainfile.txt)

（我知道这可能不是进行文本冒险的最有效方式，所以我真的不想要布局方面的课程）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T01:47:09.847

偷他的;-)

或者，如果您想自己制作，基本上只需：

1.  宽度=“100%”的输入；这将是“栏输入”
2.  将按键事件处理程序附加到该输入，并监听发生的任何输入按键
3.  当该事件触发时，让您的处理程序......处理它（将用户移动到下一个房间或其他）
4.  每当您向用户写入更多文本时，重新定位输入（取决于您使用的 HTML/CSS，这可能会自动发生）。

# haskell - 编写一个 Haskell 程序 insert xnk lt 在列表 lt 的特定第 k 个元素之后插入 xn 次

> ID：13354435
> 
> 赞同：-6
> 
> 时间：2012-11-13T01:37:33.577
> 
> 标签：haskell

编写一个 Haskell 程序插入 xnk lt，在列表 lt 的特定第 k 个元素之后插入 xn 次。例如：- 插入 1 2 3 [1,2,3,4] = [1,2,3,1,1,4]

在这里，我尝试了很多方法，但无法找到解决的确切方法。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T08:07:11.277

我会给你一些提示。

您正在制作的东西包含三个部分：原始列表的第一位、中间的新部分和原始列表的其余部分，所以请在[hoogle](http://www.haskell.org/hoogle)上查找

```
 splitAt 
```

和

```
replicate 
```

并考虑如何将事物重新组合在一起。

# oracle - Oracle 中的字符集不匹配错误

> ID：13354436
> 
> 赞同：12
> 
> 时间：2012-11-13T01:37:56.850
> 
> 标签：oracle

我有以下我正在尝试运行的查询：

```
SELECT Script from (

SELECT 9 as ColOrder, ' INSERT INTO PROJ VALUES(' || ID || ',''' || Name || ''', ''' || Version || ''', ''ABCD'', sysdate , ''ABCD'', sysdate);' as Script FROM PROJ where Name like '%[Param.1]%'

union

SELECT 11 as ColOrder,' INSERT INTO PROJMOD VALUES(' || ID || ', ' || ProjID || ', ' || ModID || ', ' || ObjID || ', ''ABCD'', sysdate, ''ABCD'', sysdate);' as Script FROM PROJMOD where ProjID in ( select ID from PROJ where Name like '%[Param.1]%')

) x

Order by ColOrder 
```

但它给了我`ORA-12704: character set mismatch error.`

当我单独运行两个 select 语句时，它给了我正确的输出，但是当我对两个 select 进行联合时，它给出了 tme 字符集不匹配错误。

这里有什么问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-14T01:30:51.223

正如你已经确认有些东西是 NVARchar'd ..cast the nvarchar to char 例如

```
SQL> create table tab(a nvarchar2(2));

Table created.

SQL> insert into tab values ('a');

1 row created.

SQL> select 1, 'hi' from dual
  2  union all
  3  select 2, a from tab;
select 1, 'hi' from dual
          *
ERROR at line 1:
ORA-12704: character set mismatch 
```

失败，因为“A”是 NVARCHAR。所以 to_char 它：

```
SQL> select 1, 'hi' from dual
  2  union all
  3  select 2, to_char(a) from tab;

         1 'HI'
---------- ----
         1 hi
         2 a 
```

或将字符串文字 'hi' 转换为 Nvarchar

```
 SQL> select 1, n'hi' from dual
      2  union all
      3  select 2, a from tab;

             1 N'
    ---------- --
             1 hi
             2 a 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T05:40:22.730

```
SELECT Script from (

SELECT 9 as ColOrder, ' INSERT INTO PROJ VALUES(' || to_char(ID) || ',''' || to_char(Name) || ''', ''' || to_char(Version) || ''', ''ABCD'', sysdate , ''ABCD'', sysdate);' as Script FROM PROJ where Name like '%[Param.1]%'

union

SELECT 11 as ColOrder,' INSERT INTO PROJMOD VALUES(' || to_char(ID) || ', ' || to_char(ProjID) || ', ' || to_char(ModID) || ', ' || to_char(ObjID) || ', ''ABCD'', sysdate, ''ABCD'', sysdate);' as Script FROM PROJMOD where ProjID in ( select ID from PROJ where Name like '%[Param.1]%')

) x

Order by ColOrder 
```

我刚刚添加了 TO_CHAR 函数，这将起作用。显然，您的字段具有无法由 Oracle 隐式转换的字符数据类型，因此您只需要自己显式地转换它，但是要小心避免由于转换导致的任何字符丢失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-26T11:58:24.160

如果你犯了这个错误，你应该看看两个条件。

1.  所有表的所有列名或别名必须相同
2.  所有列的类型必须相同 TableA(col NVARCHAR2), TableB(col NVARCHAR2)

# visual-studio-2012 - 控制台应用程序在 Visual Studio 2012 中运行的应用程序帐户是什么？

> ID：13354439
> 
> 赞同：1
> 
> 时间：2012-11-13T01:38:10.883
> 
> 标签：visual-studio-2012, console-application

我的控制台应用程序没有对我系统中的一组文件的读/写访问权限。因此，我需要知道他们正在使用什么应用程序帐户，以便我可以为该帐户提供适当的权限。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T01:38:53.667

Windows 和控制台应用程序以调用它们的用户身份运行。
如果启用了 UAC，除非您右键单击并单击以管理员身份运行，否则它们将不会以管理权限运行。（您可以在清单中强制执行此操作）

# asp.net - 将光标样式添加为指针的 C# 代码

> ID：13354441
> 
> 赞同：0
> 
> 时间：2012-11-13T01:38:33.903
> 
> 标签：asp.net

我`HyperLink`在后面的代码中创建 a 并将其添加到`Div`. 我想添加一个属性，所以光标样式必须变为`Hand`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T01:44:11.547

假设您的超链接控件是`linkControl`. 然后试试这个：

```
linkControl.Style["cursor"] = "pointer"; 
```

顺便说一句，`cursor`超链接的默认样式是`pointer`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-14T05:33:15.477

您也可以`Cursor`通过如下代码设置：

![光标](../Images/41880d503d76fc80b3264d2805f7362e.png)

希望有所帮助！

# eclipse - Cloudfoundry Eclipse 插件错误打开隧道

> ID：13354446
> 
> 赞同：0
> 
> 时间：2012-11-13T01:39:17.113
> 
> 标签：eclipse, cloud-foundry

我已经安装了 CF Eclipse 插件，但是当我尝试打开隧道时，出现错误

```
'Open Tunnel' has encountered a problem
I/O Error:connection refused;
nested expection is java.net.ConnectionExpection:Connection refused 
```

有什么解决办法吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T13:34:31.960

请确保 caldecott gem 已成功安装，以便在您尝试隧道时可以部署它。如果可能，您可能想先尝试通过隧道连接到 api.cloudfoundry.com 上的服务。

# django - 使用 Apache 和 mod_wsgi 让简单的 Django Web 应用程序工作时遇到问题

> ID：13354453
> 
> 赞同：1
> 
> 时间：2012-11-13T01:40:09.357
> 
> 标签：django, apache, webserver, centos, mod-wsgi

我一直坚持将我的 Django 项目移动到由 DreamHost 托管的生产 CentOS 服务器。安装了 Apache 2.2.23 和 Python 2.6.6。我已经安装并配置了 Django 1.4 和 mod_wsgi 3.4。当我通过键入重新启动 Apache（希望 Web 应用程序能够完美运行）时

```
sudo apachectl restart 
```

我在 /usr/local/apache/logs/ 中查看 Apache 的 error_log 并看到：

```
[Mon Nov 12 18:05:24 2012] [info] Init: Seeding PRNG with 144 bytes of entropy
[Mon Nov 12 18:05:24 2012] [notice] SSL FIPS mode disabled
[Mon Nov 12 18:05:24 2012] [info] Loading certificate & private key of SSL-aware server
[Mon Nov 12 18:05:24 2012] [info] Init: Generating temporary RSA private keys (512/1024 bits)
[Mon Nov 12 18:05:24 2012] [info] Init: Generating temporary DH parameters (512/1024 bits)
[Mon Nov 12 18:05:24 2012] [info] Init: Initializing (virtual) servers for SSL
[Mon Nov 12 18:05:24 2012] [info] Configuring server for SSL protocol
[Mon Nov 12 18:05:24 2012] [warn] RSA server certificate is a CA certificate (BasicConstraints: CA == TRUE !?)
[Mon Nov 12 18:05:24 2012] [info] mod_ssl/2.2.23 compiled against Server: Apache/2.2.23, Library: OpenSSL/1.0.0-fips
[Mon Nov 12 18:05:24 2012] [notice] suEXEC mechanism enabled (wrapper: /usr/local/apache/bin/suexec)
[Mon Nov 12 18:05:24 2012] [info] Init: Seeding PRNG with 144 bytes of entropy
[Mon Nov 12 18:05:24 2012] [notice] SSL FIPS mode disabled
[Mon Nov 12 18:05:24 2012] [info] Loading certificate & private key of SSL-aware server
[Mon Nov 12 18:05:24 2012] [info] Init: Generating temporary RSA private keys (512/1024 bits)
[Mon Nov 12 18:05:24 2012] [info] Init: Generating temporary DH parameters (512/1024 bits)
[Mon Nov 12 18:05:24 2012] [info] Init: Initializing (virtual) servers for SSL
[Mon Nov 12 18:05:24 2012] [info] Configuring server for SSL protocol
[Mon Nov 12 18:05:24 2012] [warn] RSA server certificate is a CA certificate (BasicConstraints: CA == TRUE !?)
[Mon Nov 12 18:05:24 2012] [info] mod_ssl/2.2.23 compiled against Server: Apache/2.2.23, Library: OpenSSL/1.0.0-fips
[Mon Nov 12 18:05:24 2012] [info] mod_wsgi (pid=30259): Starting process 'myproject.mysite.net' with uid=99, gid=99 and threads=1.
[Mon Nov 12 18:05:24 2012] [info] mod_wsgi (pid=30259): Initializing Python.
[Mon Nov 12 18:05:24 2012] [info] mod_wsgi (pid=30260): Initializing Python.
[Mon Nov 12 18:05:24 2012] [info] mod_wsgi (pid=30261): Initializing Python.
[Mon Nov 12 18:05:24 2012] [info] mod_wsgi (pid=30262): Initializing Python.
[Mon Nov 12 18:05:24 2012] [info] mod_wsgi (pid=30263): Initializing Python.
[Mon Nov 12 18:05:24 2012] [info] mod_wsgi (pid=30264): Initializing Python.
[Mon Nov 12 18:05:24 2012] [notice] Apache/2.2.23 (Unix) mod_ssl/2.2.23 OpenSSL/1.0.0-fips mod_auth_passthrough/2.1 mod_bwlimited/1.4 FrontPage/5.0.2.2635 mod_wsgi/3.4 Python/2.6.6 configured -- resuming normal operations
[Mon Nov 12 18:05:24 2012] [info] Server built: Oct 21 2012 05:57:19
[Mon Nov 12 18:05:24 2012] [info] mod_wsgi (pid=30259): Attach interpreter ''.
[Mon Nov 12 18:05:24 2012] [info] mod_wsgi (pid=30260): Attach interpreter ''.
[Mon Nov 12 18:05:24 2012] [info] mod_wsgi (pid=30262): Attach interpreter ''.
[Mon Nov 12 18:05:24 2012] [info] mod_wsgi (pid=30261): Attach interpreter ''.
[Mon Nov 12 18:05:24 2012] [info] mod_wsgi (pid=30263): Attach interpreter ''.
[Mon Nov 12 18:05:24 2012] [info] mod_wsgi (pid=30264): Attach interpreter ''.
[Mon Nov 12 18:05:28 2012] [info] mod_wsgi (pid=30270): Initializing Python.
[Mon Nov 12 18:05:28 2012] [info] mod_wsgi (pid=30270): Attach interpreter ''.
[Mon Nov 12 18:07:50 2012] [info] mod_wsgi (pid=30311): Initializing Python.
[Mon Nov 12 18:07:50 2012] [info] mod_wsgi (pid=30311): Attach interpreter ''.
[Mon Nov 12 18:07:51 2012] [info] [client 24.143.104.168] (32)Broken pipe: core_output_filter: writing data to the network
[Mon Nov 12 18:10:44 2012] [info] [client 180.76.5.64] (104)Connection reset by peer: core_output_filter: writing data to the network
[Mon Nov 12 18:11:26 2012] [info] mod_wsgi (pid=30356): Initializing Python.
[Mon Nov 12 18:11:26 2012] [info] mod_wsgi (pid=30356): Attach interpreter ''. 
```

我觉得这可能与 Python 路径有关。不过只是猜测。看起来 Python 一直在崩溃。

```
/home
  /myproject
    /public_html (server document root)
    /django_proj
      /myproject (django project root)
        settings.py
        other files and app directories for this django project
        /apache
          wsgi.py
          django.wsgi 
```

这是 httpd.conf 的相关部分：

```
<VirtualHost *:80>

    ServerName myproject.mysite.net
    ServerAdmin myemail@abc.com

    DocumentRoot /home/myproject/django_proj/myproject

    <Directory /home/myproject/django_proj/myproject>
    AllowOverride All
    Order allow,deny
    Allow from all
    </Directory>

    WSGIDaemonProcess myproject.mysite.net processes=1 threads=1 display-name=%{GROUP}
    WSGIProcessGroup myproject.mysite.net
    WSGIApplicationGroup %{GLOBAL}

    WSGIScriptAlias / /home/myproject/django_proj/myproject/apache/django.wsgi

    <Directory /home/myproject/django_proj/myproject/apache>
    Order allow,deny
    Allow from all
    </Directory>

</VirtualHost> 
```

这是我的wsgi.py：

```
import os

path = '/home/myproject/django_proj'
if path not in sys.path:
    sys.path.append(path)

os.environ.setdefault("DJANGO_SETTINGS_MODULE", "myproject.settings")

# This application object is used by the development server
# as well as any WSGI server configured to use this file.
from django.core.wsgi import get_wsgi_application
application = get_wsgi_application() 
```

这是我的 django.wsgi：

```
def application(environ, start_response):
    status = '200 OK'
    output = 'Hello World!'

    response_headers = [('Content-type', 'text/plain'),
                        ('Content-Length', str(len(output)))]
    start_response(status, response_headers)

    return [output] 
```

我还尝试将其托管为 URL“myproject.mysite.net”，而不仅仅是“mysite.net”。也不确定我是否做对了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T10:30:56.890

实际问题是什么？当您提出请求时，您实际上是否遇到错误。

日志输出看起来完全正常。所有单独的进程都是因为 Python 也在 Apache 子工作进程中被初始化。放：

```
WSGIRestrictEmbedded On 
```

他们会走开，应该只看到一个过程。

有关该指令的说明，请参见：

[http://blog.dscpl.com.au/2009/11/save-on-memory-with-modwsgi-30.html](http://blog.dscpl.com.au/2009/11/save-on-memory-with-modwsgi-30.html)

顺便说一句，使用 'processes=1 threads=1' 似乎是一个糟糕的选择。一次只能处理一个请求。

# expressionengine - 折叠选项和 EE “保存布局”功能

> ID：13354456
> 
> 赞同：1
> 
> 时间：2012-11-13T01:40:17.737
> 
> 标签：expressionengine, expresso-store

默认情况下，“运输”和“高级”选项是折叠的，但是当我尝试打开它们并使用“保存布局”EE 功能时，它不会“粘住”。

有没有简单的方法解决这个问题？我想默认保持这些选项打开。

另外，是否有一种简单的方法来自定义字段的名称？在我的情况下，“深度”比“长度”更有意义……</p>

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T03:21:29.897

不幸的是，当您在 EE 中使用保存布局时，我认为商店“运输”和“高级”部分不会保存为打开/关闭（它们都默认为关闭）。

您可以这样做的唯一方法是在`store/views`. 同样，如果要更改文本，则必须在`store/language`.

# c# - 在没有只读属性的 C# 中创建目录

> ID：13354457
> 
> 赞同：2
> 
> 时间：2012-11-13T01:40:23.240
> 
> 标签：c#, attributes, directory

当我尝试这样做时：

```
Directory.CreateDirectory([folderPath]);
File.CreateText([folderPath]); 
```

我有一个例外 -

```
System.UnauthorizedAccessException was unhandled by user code
  HResult=-2147024891
  Message=Access to the path 'C:\[folderPath]' is denied.
  Source=mscorlib
  StackTrace:
       at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
       at System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy, Boolean useLongPath, Boolean checkHost)
       at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, String msgPath, Boolean bFromProxy, Boolean useLongPath, Boolean checkHost)
       at System.IO.StreamWriter.CreateFile(String path, Boolean append, Boolean checkHost)
       at System.IO.StreamWriter..ctor(String path, Boolean append, Encoding encoding, Int32 bufferSize, Boolean checkHost)
       at System.IO.StreamWriter..ctor(String path, Boolean append)
       at System.IO.File.CreateText(String path)
       at Contest.Service.FileSystem.CreateFileAndFolderForAttempt(IAttempt attempt) in c:\Users\Mif\Documents\Visual Studio 2012\Projects\Contest\Contest.Service\FileSystem.cs:line 33
       at Contest.Service.Tests.FileSystemTests.TestCreateFileAndFolderForAttempt() in c:\Users\Mif\Documents\Visual Studio 2012\Projects\Contest\Contest.Service.Tests\UnitTest1.cs:line 32
  InnerException: 
```

文件资源管理器向我展示：

属性：[三态/不确定复选框] 只读（仅适用于文件夹中的文件）

但是`Debug.WriteLine(CurrentContestDirectory.Attributes.ToString());` 给我看 - `Directory`。而不是只读属性！

我在 Google 中寻找“使用 C# 删除目录上的只读属性”，但所有答案都对我没有帮助。我需要做什么？

所有代码都在我的本地计算机上运行 Windows 8。管理员帐户。如果我手动取消选中只读属性，在代码运行后它会切换回来。

这是简单的控制台应用程序。

现在我手动创建文件夹。默认情况下它是只读的。

cmd 中的 attrib -r C:\new /s 不起作用！！！

如果我手动取消选中只读并单击确定，那么如果我单击属性 -**只读回来**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T01:53:40.277

试试这个代码：

```
 Directory.CreateDirectory(@"c:\newfolder");
 File.CreateText(@"c:\newfolder\textfile.txt"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T01:53:29.670

我将验证您运行此代码的应用程序本身在 Windows 中是否具有适当的权限。例如，右键单击应用程序并单击“以管理员身份运行”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-23T21:11:14.797

```
File.CreateText([folderPath]); 
```

可能是错的。当文件路径实际上是文件夹路径时，任何创建文件（或打开流）的尝试都将以

```
UnauthorizedAccessException 
```

该例外非常具有误导性，并要求您查看所有错误的地方。去过，看过。

# python - Python 库中的简单终端文件选择器

> ID：13354460
> 
> 赞同：1
> 
> 时间：2012-11-13T01:40:39.550
> 
> 标签：python, terminal

我编写了几个简单的命令行/终端 Python 程序来解析我们在心理学实验室中使用的实验运行软件中的数据文件。这些程序将由通常精通计算机的人使用，但不一定能使用带有标志的完整 unix 样式命令，所以我通常只让程序问诸如“您要处理哪个文件？ " 并让用户从列表中选择，如下所示：

```
import textwrap
import os
import sys

def get_folder():
    """ Print a numbered
    list of the subfolders in the working directory
    (i.e. the directory the
    script is run from),
    and returns the directory
    the user chooses.
    """
    print(textwrap.dedent(
    """
    Which folder are your files located in?
    If you cannot see it in this list, you need
    to copy the folder containing them to the
    same folder as this script.
    """
    )
    )
    dirs = [d for d in os.listdir() if os.path.isdir(d)] + ['EXIT']
    dir_dict = {ind: value for ind, value in enumerate(dirs)}
    for key in dir_dict:
        print('(' + str(key) + ') ' + dir_dict[key])
    print()
    resp = int(input())
    if dir_dict[resp] == 'EXIT':
        sys.exit()
    else:
        return dir_dict[resp] 
```

Python 库中是否有这些类型的文件选择器的实现？我通常只是在需要时自己快速实现它们，但我最终不得不将代码从一个文件复制并粘贴到另一个文件，并针对我使用它们的特定情况进行修改。

# php - 如何使用 php 更改最大文件大小限制

> ID：13354467
> 
> 赞同：1
> 
> 时间：2012-11-13T01:41:01.157
> 
> 标签：php, apache, unix, webserver

> **可能重复：**
> [PHP 更改最大上传文件大小](https://stackoverflow.com/questions/2184513/php-change-the-maximum-upload-file-size)

我认为我在 UNIX 上使用免费的 Web 托管服务 (Apache/2.2.17)。我使用 php 脚本将数据附加到我的主目录中的某个文件，代码如下：

```
$my_handle = fopen($my_file_name, 'ab');
$bytes = fwrite($my_handle, $my_data);
fclose($my_handle); 
```

当文件大小达到 128 MB 时，脚本会终止，但不会产生错误。所以，我必须将数据保存在 128 MB 的部分中。有什么方法可以更改此“128 MB 文件大小限制”？
谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T01:49:04.030

您可以在 PHP 设置中更改配置，但免费主机上没有该选项。升级您的主机。

# javascript - AJAX - 使用 JSON 与回显 HTML

> ID：13354468
> 
> 赞同：1
> 
> 时间：2012-11-13T01:41:08.937
> 
> 标签：javascript, jquery, html, ajax, handlebars.js

我有下面的ajax调用。

```
jQuery.post('index.php',{
                        'option'    : 'com_one',
                        'controller': 'product',
                        'task'  : 'loadColors',
                        'format'    : 'raw',            
                        'design_id' : design_id,
                        'collar_id' : collar_id                        
                }).success(function(result) { 
                    jQuery('div#color_wrapper').html(result); 
                }).error(function() { 
                    jQuery('div#color_wrapper').html('<h1>ERROR WHILE LOADING COLORS</h1>');
                }); 
```

***方法 1*** 它返回大量 HTML。然后将它们分配给`div#color_wrapper`. 我在这里所做的就是`echo`model.php 中我想要的所有HTML。

***方法 2*** 我刚刚知道我可以将数据作为 JSON 对象获取，并使用 JavaScript 模板（ [handlebarsjs](http://handlebarsjs.com/)）将它们呈现在页面内。

据我了解，它是客户端处理（方法 2）与服务器端处理（方法 1）。

我的问题是哪种方法更快？哪种方法是行业标准？这两种方法有什么优缺点吗？我应该使用什么方法，为什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T01:43:59.573

我认为 JSON 方法更好，因为连续请求传输的数据更少。

如果你*真的很*在意性能，你应该[预编译你的模板](http://handlebarsjs.com/precompilation.html)。

此外，如果您预编译模板，您甚至不必发送`handlebars.js`给客户端。您可以向浏览器发送更小的内容`handlebars.runtime.js`，进一步减少加载时间！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T01:47:42.670

我不知道“行业标准”一定是判断这种事情的最佳方式。我猜您的典型开发人员甚至不知道 handlebars.js 是什么，并且只会像您当前所做的那样将 HTML 加载到 div 中。

您必须测试哪种方法更快。显然，使用 JSON 会使请求更快并需要更少的带宽，从而更好地提高服务器性能，但执行将最终 HTML 插入文档的总时间必须是您测试的东西。

如果我要做很多 AJAX 调用，并且可以使用像把手这样的模板系统，并且担心服务器性能和带宽，我会倾向于 JSON 方法。

如果我只需要一个一次性的 AJAX 调用，并且只需要一些快速而肮脏的东西并且正在处理一个低流量的网站，我可能会只做 HTML 响应。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T01:45:26.210

JSON 肯定更好，特别是如果您使用像 Google 的 AngularJS 这样的 MVC 框架。理想情况下，您应该只需要加载一次数据。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-13T01:53:04.537

我更喜欢使用第二种方法。

处理时间通常并不重要，无论是服务器端还是客户端。

相比之下，带宽是使网站浏览者愉快与否的重要因素。发送繁重的 HTML 响应，尤其是重复响应时，如果用户没有良好的 Internet 连接，每次都会强制用户等待。

现在是等待鼓励用户退出网页的时候了。

# node.js - uploadify 无法获取服务器响应数据

> ID：13354471
> 
> 赞同：0
> 
> 时间：2012-11-13T01:41:29.903
> 
> 标签：node.js, upload, express, uploadify

我使用带有 express.js 的 uploadify 将视频上传到节点服务器，它工作正常，但是在我生成视频缩略图后，我需要返回缩略图路径，这就是我所做的

```
exports.upload = function(req, res,next){
    var tmp_path = req.files.product_video.path;
    var target_path = 'F:/shopping/shop/' +req.body.shop_id+'/'+ req.files.product_video.name;

    fs.rename(tmp_path, target_path, function(err) {
        if (err) {
            console.log(err)
        }
        else{
            fs.unlink(tmp_path, function() {
                if (err){
                    console.log(err)
                }else{
                    exec("C:/ffmpeg/bin/ffmpeg -i shop/"+ req.body.shop_id+ '/' + req.files.product_video.name  + " -ss 00:01:00.00 -r 1 -an -vframes 1 -s 250x150 -f mjpeg shop/"+ req.body.shop_id+ '/'  + req.files.product_video.name  + "_thumbnail.jpg", function(err){
                        // res.send({'thumb' : 'shop/'+ req.body.shop_id+ '/'  + req.files.product_video.name  + "_thumbnail.jpg",});
                        var data = {
                            'thum_src':'shop/'+ req.body.shop_id+ '/'  + req.files.product_video.name  + "_thumbnail.jpg"
                        }
                        res.send(data);
                    });
                }
            });
        }
    });
}; 
```

这是前端代码

```
function addVideo(){
    $('#input_product_video').uploadify({
        'formData':{'shop_id':$('#shop_id').val()},
        'buttonText'    : 'add video',
        'fileSizeLimit' : '100MB',
        'fileObjName' : 'product_video',
        'uploader'    : '/uploads',
        'swf'         :'/public/javascripts/lib/uploadify/uploadify.swf',
        'onUploadSuccess':function(file,data){
            console.log(data.thum_src);

        }
    });
} 
```

这

```
console.log(data.thum_src); // always end of "undefined" 
```

但

```
 console.log(data) ; //will output the json data like this
                                         {
                                            'thum_src':'path'
                                          } 
```

没看懂？？？为什么我不能像 data.thum_src 一样访问 thum_src ？？？

好吧，它看起来不是一个对象，而是一个字符串，很奇怪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T02:32:33.680

您在服务器代码中的响应需要添加标头 {Content-Type:'application/json'} 否则默认将解释为文本。或者你可以做 JSON.parse(data) 在前端将文本转换为 json 对象。

# c# - 如何在 Windows 应用商店应用程序中与 SQL 交互

> ID：13354473
> 
> 赞同：3
> 
> 时间：2012-11-13T01:41:45.360
> 
> 标签：c#, windows-8, windows-runtime, windows-store-apps

我被要求开始开发我们公司的 LOB Web 应用程序的 Windows Store 版本。与外部数据存储交互的最佳方式是什么？

我的第一个倾向是走 HTML/JavaScript(JQuery) 路线并使用 Web 服务来检索数据，但我想尝试使用 C#/XAML，因为我熟悉 XAML，这将是完美的有机会深入了解 XAML。

Javascript 是与 sql 服务器通信的唯一方法，还是我可以通过 C#/XAML 实现这一点？如果是这样，谁能指出我正确的方向，或者提供一个如何在 WINRT 框架和 SQL 之间“连接点”的一般示例？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T06:15:57.843

您可以使用 C# 或 JavaScript 完成它，并且您可以通过服务以几乎相同的方式完成它。Windows 应用商店 (C#/VB) 应用程序没有桌面应用程序通过 ODBC、JDBC、SQL Native Client 等接口访问数据库的相同功能，因此您不会将 Win RT 应用程序与 SQL 连接，您将通过本身直接访问数据库的托管服务连接它。

根据 LOB Web 应用程序的分区方式，您可以将现有功能公开为服务层，然后通过 HTTP 请求从 Windows 应用商店应用程序调用这些服务。[HttpClient 示例](http://code.msdn.microsoft.com/windowsapps/HttpClient-sample-55700664)应该会有所帮助，并且根据服务实现，您还可以在 Windows 应用商店应用中使用[WCF 客户端功能。](http://msdn.microsoft.com/en-us/library/hh556233.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T01:56:36.587

XAML 是一种基于 XML 的声明性语言，javascript 是一种脚本语言。我建议您在深入研究之前先阅读一些基础知识。

是的，您可以使用 C# 与远程服务器和/或 Web 服务进行通信......

也许这会有所帮助：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh974581.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh974581.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T08:54:32.927

如果你想要本地数据库，你可以使用 SQLite，但我猜你想要外部数据库

我的一个应用程序是通过网络与 DB 连接。数据库位于 Azure 中。我通过简单的 .net webapi 连接它们。因此，我的 Windows Store 应用程序正在通过 HttpClient 从 Azure db 通过 webapi 获取数据。这很容易做到。3行代码。我将数据作为 JSON 序列化字符串发送，它们占用的空间最少。这是一个好方法，但您需要记住，当您想要使用大对象等时，您需要考虑缓存结果、检查缓存、清理缓存等。

# c - RAM总是被未知函数写入，为什么？

> ID：13354487
> 
> 赞同：0
> 
> 时间：2012-11-13T01:43:14.263
> 
> 标签：c, embedded, arm

在我的项目中，我使用NXP LPC2368芯片作为嵌入式系统核心。我使用的网络通信模块是RL-ARM lib。我们来看看：

```
int main(int argc,char**)
{
...
init_TcpNet();
.../*my program to deal with data from network,like callback function.etc*/
while(1)
{
...
main_TcpNet();
...
}
} 
```

不幸的是，我在插入网线时发现RAM中的一个段0x40004730~0x4000476f总是被写入，否则不会发生。然后，我禁用`init_TcpNet()`，它没有发生。另一方面，当它禁用...（我的程序）时，它发生了。所以，我猜测问题是由 lib 函数引起的

```
init_TcpNet() 
```

最后，我尝试禁用`main_TcpNet()`not `init_TcpNet()`。第一个输出显示 RAM 已写入，但之后 RAM 没有再次写入。有没有人遇到过这个问题并且可以解决它？谢谢并恭祝安康！

# ruby-on-rails - 详细 rspec be_valid

> ID：13354489
> 
> 赞同：0
> 
> 时间：2012-11-13T01:43:18.007
> 
> 标签：ruby-on-rails, rspec

`it { should be_valid }`我发现了一个很好的技巧，可以在失败 时输出更有意义的错误消息。[详细的 be_valid RSpec 匹配器](https://gist.github.com/820666) hack 用匹配器重载了 be_valid。但我不确定在哪里放置这个文件。我尝试将其添加到：`.rvm/gems/ruby-1.9.3-p286/gems/rspec-rails-2.11.0/lib/rspec/rails/matchers`然后进行捆绑安装，但更改没有任何区别。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T01:59:15.223

为了使用自定义匹配器，您只需将代码添加到应用程序的新文件中，并在您希望它可用的任何地方都需要它。如果您只有一个自定义匹配器，我可能会将其粘贴在 spec/verbose_be_valid.rb 中，然后在您的 spec_helper.rb 文件中使用它。

# jquery - 淘汰赛内联编辑绑定

> ID：13354491
> 
> 赞同：4
> 
> 时间：2012-11-13T01:43:32.540
> 
> 标签：jquery, knockout.js, inline-editing

我去寻找一个淘汰的内联编辑绑定，但我发现的唯一一个有[外部依赖](http://blog.fawnanddoug.com/2012/05/inline-editor-custom-binding-for.html)项而不是 jQuery，或者[使用的不仅仅是一个绑定](http://craigcav.wordpress.com/2012/05/18/simple-inline-editing-with-knockoutjs/)。

所以我想我会分享我想出的简单答案（当然欢迎其他答案，尤其是那些只使用淘汰赛的答案）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T14:41:04.477

作为替代方案：我用于内联编辑的代码如下所示：

```
ko.bindingHandlers.hidden = {
    update: function(element, valueAccessor) {
        ko.bindingHandlers.visible.update(element, function() { return !ko.utils.unwrapObservable(valueAccessor()); });
    }        
};

ko.bindingHandlers.clickToEdit = {
    init: function(element, valueAccessor) {
        var observable = valueAccessor(),
            link = document.createElement("a"),
            input = document.createElement("input");

        element.appendChild(link);
        element.appendChild(input);

        observable.editing = ko.observable(false);

        ko.applyBindingsToNode(link, {
            text: observable,
            hidden: observable.editing,
            click: observable.editing.bind(null, true)
        });

        ko.applyBindingsToNode(input, {
            value: observable,
            visible: observable.editing,
            hasfocus: observable.editing
        });
    }
}; 
```

[http://jsfiddle.net/rniemeyer/Rg8DM/](http://jsfiddle.net/rniemeyer/Rg8DM/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-13T01:43:32.540

这是我的[内联编辑绑定（小提琴）](http://jsfiddle.net/tyrsius/TpsSm/9/)，它依赖 jQuery 进行一些 DOM 操作。

HTML：

```
<p>
    Set an alarm for <span data-bind="inline: startTime"></span>
    using <span data-bind="inline: snoozeCount"></span> Snooze(s).
</p> 
```

JS：

```
ko.bindingHandlers.inline= {
    init: function(element, valueAccessor) {
        var span = $(element);
        var input = $('<input />',{'type': 'text', 'style' : 'display:none'});
        span.after(input);

        ko.applyBindingsToNode(input.get(0), { value: valueAccessor()});
        ko.applyBindingsToNode(span.get(0), { text: valueAccessor()});

        span.click(function(){
            input.width(span.width());
            span.hide();
            input.show();
            input.focus();
        });

        input.blur(function() { 
            span.show();
            input.hide();
        });

        input.keypress(function(e){
            if(e.keyCode == 13){
               span.show();
               input.hide();
           }; 
        });
    }
}; 
```

由于 Dom Ready 上的宽度不可靠，因此在 click 函数中设置了宽度：一半时间它显示为 0。

我还为切换（布尔值）制作了一个，您只需单击即可切换：

```
ko.bindingHandlers.inlineToggle = {
    init: function(element, valueAccessor, allBindingsAccessor) {

        var displayType = allBindingsAccessor().type || "bool";
        var displayArray = [];

        if (displayType == "bool") {
            displayArray = ["True", "False"];
        } else if (displayType == "on") {
            displayArray = ["On", "Off"];
        } else {
           displayArray = displayType.split("/");
        } 

        var target = valueAccessor();  
        var observable = valueAccessor()
        var interceptor = ko.computed(function() {
            return observable() ? displayArray[0] : displayArray[1];
        });

        ko.applyBindingsToNode(element, { text: interceptor });
        ko.applyBindingsToNode(element, { click: function(){ target (!target())} });
    }
}; 
```

像这样应用（第二个参数是可选的）：

```
<span data-bind="inlineToggle: alert, type: 'on'"></span> 
```

小提琴还包含一个 for`select`和`multi-select`，但现在多选会导致显示跳转。我需要解决这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-28T21:35:30.613

即使答案已经被接受，我相信我找到了更好的解决方案，所以我想分享它。

我最终使用了这里的文档[http://knockoutjs.com/documentation/custom-bindings-controlling-descendant-bindings.html#example-supplying-additional-values-to-descendant-bindings](http://knockoutjs.com/documentation/custom-bindings-controlling-descendant-bindings.html#example-supplying-additional-values-to-descendant-bindings)

并提出了这个装订草稿：

```
ko.bindingHandlers['textinlineeditor'] = {
    init: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {

        var observable = valueAccessor();
        var value = ko.utils.unwrapObservable(observable);

        var saveHandler = allBindingsAccessor().editorsavehandler || function (newValue) { observable(newValue); return true; };
        var inputType = allBindingsAccessor().editorinputtype || "text";            

        var vm = new inlineEditorViewModel({ val: value, saveHandler: saveHandler });

        $(element).append("<span data-bind=\"text: editableValue, hidden: editing\"></span>");
        $(element).append("<input type=\"" + inputType + "\" data-bind=\"value: editableValue, visible:editing\"/>");
        $(element).append("<div class=\"pull-right\"></div>");
        $(element).find("div.pull-right").append("<span class=\"glyphicon glyphicon-edit\" aria-hidden=\"true\" data-bind=\"click: edit, hidden: editing\"></span>");
        $(element).find("div.pull-right").append("<span class=\"glyphicon glyphicon-check\" aria-hidden=\"true\" data-bind=\"click: save, visible:editing\"></span>");
        $(element).find("div.pull-right").append("<span class=\"glyphicon glyphicon-remove-circle\" aria-hidden=\"true\" data-bind=\"click: cancelSave, visible:editing\"></span>");

        var innerBindingContext = bindingContext.extend(vm);
        ko.applyBindingsToDescendants(innerBindingContext, element);

        return { controlsDescendantBindings: true };
    }
}; 
```

我在代码中使用的模型是

```
var inlineEditorViewModel = function (init) {
    var self = this;

    self.editableValue = ko.observable(init.val);
    self.lastEditableValue = ko.observable(init.val);

    self.editing = ko.observable(false);

    self.edit = function () {
        self.editing(true);
    };

    self.save = function () {
        if (init.saveHandler(self.editableValue())) {
            self.lastEditableValue(self.editableValue());
            self.editing(false);
        }
    };

    self.cancelSave = function () {
        self.editableValue(self.lastEditableValue());
        self.editing(false);
    };
}; 
```

在您的 html 中，您会像使用它一样使用它

```
<div data-bind="textinlineeditor: name, editorsavehandler: saveName"></div> 
```

注意：我使用的是 Bootstrap，所以这是绑定 html 中的图标的来源。

# java - 有人可以向我解释这告诉我要做什么吗？

> ID：13354498
> 
> 赞同：2
> 
> 时间：2012-11-13T01:44:10.550
> 
> 标签：java, algorithm

> 设计一个线性算法，在 N 个长整数序列中找到最多为 M 的连续子序列，该序列在所有此类子序列中总和最大。实现您的算法，并确认其运行时间的增长顺序是线性的。

我已经读了几次，但我很难理解它要我做什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T01:49:11.177

假设一行中有 10 个整数。您可以按顺序选择其中的任何 1,2 或 3 个并将它们相加。您需要找出您会选择哪些以使总和最大。在这种情况下，M=3，N=10。您的算法必须在线性时间内运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T02:29:48.060

我认为它的意思是这样的（根据亚历克斯的回答）：

```
N = 10
144  23  89   21  145  2   11  9  1   69

M = 3 (this is max)

take 1 number
highest is 145

take 2 numbers consequtive
highest is 144 + 23 = 167

take 3 numbers consequtive
highest is 144 + 23 + 89 = 256

Therefore answer = 144, 23, 89 
```

负数或零包括：

```
N = 10
0  -23  -89   21  -145  -2   11  -1  1   69

M = 3 (this is max)

take 1 number
highest is 69

take 2 numbers consequtive
highest is 1 + 69 = 70

take 3 numbers consequtive
highest is -1 + 1 + 69 = 69

Therefore answer = 1, 69 
```

请评论我是对还是错。

~~我找不到子序列中的数字计数可以小于 M 的情况。不管我怎么想，它必须是 M。~~`*`只有窗口不需要总是包含 N 个整数中的最高值。

`*`好的，我发现了一种计数小于 M 的情况。请参见上面的第二个代码块。

# objective-c - 点击项目时，TabBar 上的 setBackgroundImage 不起作用

> ID：13354504
> 
> 赞同：0
> 
> 时间：2012-11-13T01:44:49.813
> 
> 标签：objective-c, ios, uitabbarcontroller, uitabbar, setbackground

我可以设置一次背景，但之后它就再也不会改变了。我在stackoverflow上看过所有的例子。代码示例看起来总是一样的。我已经设置了代表。图像一切正常。我已将它们一个接一个地设置为默认图像，并将显示。但是在应用程序完成启动后，后台不再发生任何事情。

这是我的代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    [self customizeInterface];

    // Override point for customization after application launch.
    self.tabController = (UITabBarController *)self.window.rootViewController;
    self.tabController.delegate = self;
...
}

- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController
{
    int tabitem = self.tabController.selectedIndex;
    NSLog(@"tabitem: %i", tabitem);
    [self switchTabBarImage:tabitem];
    //[[tabController objectAtIndex:tabitem] popToRootViewControllerAnimated:YES];
}

- (void)switchTabBarImage:(int)selectedIndex
{
    NSLog(@"selected: %i", selectedIndex);
    if (selectedIndex == 0) {
        NSLog(@"0");
        UIImage *tabBarBackground = [UIImage imageNamed:@"tabbar-1.png"];
        [[UITabBar appearance] setBackgroundImage:tabBarBackground];
    }
    if (selectedIndex == 1) {
        NSLog(@"1");
        UIImage *tabBarBackground = [UIImage imageNamed:@"tabbar-2.png"];
        [[UITabBar appearance] setBackgroundImage:tabBarBackground];
    }
    if (selectedIndex == 2) {
        NSLog(@"2");
        UIImage *tabBarBackground = [UIImage imageNamed:@"tabbar-3.png"];
        [[UITabBar appearance] setBackgroundImage:tabBarBackground];
    }
    if (selectedIndex == 3) {
        NSLog(@"3");
        UIImage *tabBarBackground = [UIImage imageNamed:@"tabbar-4.png"];
        [[UITabBar appearance] setBackgroundImage:tabBarBackground];
    }
}

- (void)customizeInterface
{

    UIImage *tabBarBackground = [UIImage imageNamed:@"tabbar-1.png"];
    [[UITabBar appearance] setBackgroundImage:tabBarBackground];

    UIImage *selectionIndicator = [UIImage imageNamed:@"tabbar-icon-clean.png"];
    [[UITabBar appearance] setSelectionIndicatorImage:selectionIndicator];

} 
```

调试器显示：

```
2012-11-13 02:42:06.147 soundapp[9060:c07] tabitem: 1
2012-11-13 02:42:06.148 soundapp[9060:c07] selected: 1
2012-11-13 02:42:06.148 soundapp[9060:c07] 1
2012-11-13 02:42:07.739 soundapp[9060:c07] tabitem: 2
2012-11-13 02:42:07.739 soundapp[9060:c07] selected: 2
2012-11-13 02:42:07.740 soundapp[9060:c07] 2 
```

我正在寻找几个小时，但无法弄清楚为什么它只工作一次。有人在我的代码中看到错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T02:19:03.340

又过了一个小时，我在网上的其他地方找到了解决方案（http://felipecypriano.com/2012/02/27/how-to-customize-uitabbar-on-ios-5/）

```
- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController
{
    int tabitem = self.tabController.selectedIndex;
    NSLog(@"tabitem: %i", tabitem);
    [self switchTabBarImage:tabitem];
    //[[tabController objectAtIndex:tabitem] popToRootViewControllerAnimated:YES];
}

- (void)switchTabBarImage:(int)selectedIndex
{

    switch (selectedIndex) {
        case 0:
            [[[self tabController] tabBar] setBackgroundImage:[UIImage imageNamed:@"tabbar-1.png"]];
            break;
        case 1:
            [[[self tabController] tabBar] setBackgroundImage:[UIImage imageNamed:@"tabbar-2.png"]];
            break;
        case 2:
            [[[self tabController] tabBar] setBackgroundImage:[UIImage imageNamed:@"tabbar-3.png"]];
            break;
        case 3:
            [[[self tabController] tabBar] setBackgroundImage:[UIImage imageNamed:@"tabbar-4.png"]];
            break;
    }
}

- (void)customizeInterface
{

    UIImage *tabBarBackground = [UIImage imageNamed:@"tabbar-1.png"];
    [[UITabBar appearance] setBackgroundImage:tabBarBackground];

    UIImage *selectionIndicator = [UIImage imageNamed:@"tabbar-icon-clean.png"];
    [[UITabBar appearance] setSelectionIndicatorImage:selectionIndicator];

} 
```

我真的不明白为什么有两种不同的方式来改变背景。令人困惑的是，这两条不同的代码行只在不同的地方工作。我不明白。但现在它起作用了。

# android - 如何知道哪个地理点最接近我的实际当前位置？

> ID：13354506
> 
> 赞同：0
> 
> 时间：2012-11-13T01:45:25.507
> 
> 标签：android, android-location, geopoints

希望有人可以阐明我的问题。我有 9 组地理点数据。有没有办法决定/选择离我当前 GPS 位置最近的地理点（p1 到 p9）？

```
public class LocationCalc extends Activity {
GeoPoint p1, p2, p3, p4, p5, p6, p7, p8, p9;
float result;

public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_location_calc);
//<---GPS DATA starts here
String coordinates[] = {"2.976720", "101.7340622","2.9739549","101.7302322","2.9708705", "101.7306824","2.9700341", "101.7316818", "2.9681962", "101.7278519", "2.96585", "101.7311020", "2.9625874", "101.7255707", "2.9755125", "101.7287445", "2.9779000", "101.7305298" };
float lat0 = Float.parseFloat(coordinates[0]);
float lng0 = Float.parseFloat(coordinates[1]);
float lat1 = Float.parseFloat(coordinates[2]);
float lng1 = Float.parseFloat(coordinates[3]);
float lat2 = Float.parseFloat(coordinates[4]);
float lng2 = Float.parseFloat(coordinates[5]);
float lat3 = Float.parseFloat(coordinates[6]);
float lng3 = Float.parseFloat(coordinates[7]);
float lat4 = Float.parseFloat(coordinates[8]);
float lng4 = Float.parseFloat(coordinates[9]);
float lat5 = Float.parseFloat(coordinates[10]);
float lng5 = Float.parseFloat(coordinates[11]);
float lat6 = Float.parseFloat(coordinates[12]);
float lng6 = Float.parseFloat(coordinates[13]);
float lat7 = Float.parseFloat(coordinates[14]);
float lng7 = Float.parseFloat(coordinates[15]);
float lat8 = Float.parseFloat(coordinates[16]);
float lng8 = Float.parseFloat(coordinates[17]);
p1 = new GeoPoint(
    (int)(lat0*1E6),
    (int)(lng0*1E6));
p2 = new GeoPoint(
    (int)(lat1*1E6),
    (int)(lng1*1E6));
p3 = new GeoPoint(
    (int)(lat2*1E6),
    (int)(lng2*1E6));
p4 = new GeoPoint(
    (int)(lat3*1E6),
    (int)(lng3*1E6));
p5 = new GeoPoint(
    (int)(lat4*1E6),
    (int)(lng4*1E6));
p6 = new GeoPoint(
    (int)(lat5*1E6),
    (int)(lng5*1E6));
p7 = new GeoPoint(
    (int)(lat6*1E6),
    (int)(lng6*1E6));
p8 = new GeoPoint(
    (int)(lat7*1E6),
    (int)(lng7*1E6));
p9 = new GeoPoint(
    (int)(lat8*1E6),
    (int)(lng8*1E6));

String[] myString = new String[17]; //create array
for (int number = 0; number < myString.length; number++) { 
    float[] result = new float[17];
    Location loc = null;
    Location.distanceBetween(loc.getLatitude(), loc.getLongitude(), lat[], lng[], result);

//<---- I'm stucked at this part where I'm not sure how to use For loop and to decide the shortest distance(p1 to p9)
}
} 
```

添加了代码，我被困在了距离之间，我的道歉我还处于学习android的阶段。我也发现使用下面 Eric 提到的 For 循环有困难。请做一些灯。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T02:20:43.410

为什么不直接使用[`Location.distanceBetween`](http://developer.android.com/reference/android/location/Location.html#distanceBetween%28double,%20double,%20double,%20double,%20float%5b%5d%29)？

如：

```
float results = new float[1];
Location.distanceBetween(lat1, long1, lat2, long2, results); 
```

您可以在基本`for`循环中使用它来检测最小值（`lat1`并且`long1`可以是起点，并且您可以在循环的每次迭代中更改`lat2`和`long2`），然后返回距离最短的点。

# c# - 是否可以从 Windows RT 生成可执行文件？

> ID：13354507
> 
> 赞同：0
> 
> 时间：2012-11-13T01:45:25.857
> 
> 标签：c#, windows, windows-8

是否可以从 Windows RT 和 .Net 4.5 中生成任何类型的可执行文件？在桌面上我知道可以使用 CSharpCodeProvider，但在 Windows RT 中似乎不允许。目标是为 C# 制作一个 IDE。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T01:48:18.667

我自己没有玩过它，但我认为[Project Roslyn](http://msdn.microsoft.com/en-us/vstudio/roslyn.aspx)会很合适。我认为您应该能够从 WinRT 前端调用这些 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T19:51:16.707

WinRT 不打算（截至今天）创建此类应用程序，最接近的是 Javascript 上的 eval 函数，但它是唯一的。

# error-handling - Fortran 错误含义

> ID：13354510
> 
> 赞同：2
> 
> 时间：2012-11-13T01:45:56.533
> 
> 标签：error-handling, fortran, scientific-computing

我一直在关注关于用 FORTRAN 编写的书籍和 PDF 来编写集成程序。我用 gfortran 编译代码并得到以下错误的几个副本。

```
1)Unexpected data declaration statement at (1)
2)Unterminated character constant beginning at (1)
3)Unclassifiable statement at (1)
4)Unexpected STATEMENT FUNCTION statement at (1)
5)Expecting END PROGRAM statement at (1)
6)Syntax error in data declaration at (1)
7)Statement function at (1) is recursive
8)Unexpected IMPLICIT NONE statement at (1) 
```

我不知道他们真正的意思或如何解决它们，谷歌搜索已被证明是无效的，而本网站上的其他主题是关于其他错误的。对于错误 5）我像在 C++ 中一样放入 Program main 和 end program main 但仍然得到相同的结果。错误 7) 没有意义，我正在尝试在程序中进行递归。错误 8) 我读到了隐式没有是为了防止不必要的减速。

我会发布代码本身，但我对编译错误更感兴趣，因为我仍然需要微调数组数据处理，但在我让它工作之前我不能这样做。

```
 Program main
  implicit none      
  real, dimension(:,:), allocatable :: m, oldm
  real a
  integer io, nn
  character(30) :: filename
  real, dimension(:,:), allocatable :: alt, temp, nue, oxy
  integer locationa, locationt, locationn, locationo, i
  integer nend
  real dz, z, integral
  real alti, tempi, nuei, oxyi
  integer y, j

  allocate( m(0, 0) ) ! size zero to start with?

  nn = 0
  j = 0

   write(*,*) 'Enter input file name: '

   read(*,*) filename

   open( 1, file = filename )

  do !reading in data file

   read(1, *, iostat = io) a

   if (io < 0 ) exit

   nn = nn + 1

   allocate( oldm( size(m), size(m) ) )

   oldm = m 

   deallocate( m )

   allocate( m(nn, nn) )

   m = oldm

   m(nn, nn) = a ! The nnth value of m

   deallocate( oldm )

  enddo

  ! Decompose matrix array m into column arrays [1,n]

  write(*,*) 'Enter Column Number for Altitude'
  read(*,*) locationa
  write(*,*) 'Enter Column Number for Temperature'
  read(*,*) locationt
  write(*,*) 'Enter Column Number for Nuetral Density'
  read(*,*) locationn 
  write(*,*) 'Enter Column Number for Oxygen density'
  read(*,*) locationo

  nend = size(m, locationa) !length of column #locationa

  do i = 1, nend

   alt(i, 1) = m(i, locationa)

   temp(i, 1) = log(m(i, locationt))

   nue(i, 1) = log(m(i, locationn))

   oxy(i, 1) = log(m(i, locationo))

  enddo

  ! Interpolate Column arrays, Constant X value will be array ALT with the 3 other arrays

  !real dz = size(alt)/100, z, integral = 0
  !real alti, tempi, nuei, oxyi
  !integer y, j = 0
  dz = size(alt)/100

  do z = 1, 100, dz
  y = z !with chopped rounding alt(y) will always be lowest integer for smooth transition.
  alti = alt(y, 1) + j*dz ! the addition of j*dz's allow for all values not in the array between two points of the array. 

   tempi = exp(linear_interpolation(alt, temp, size(alt), alti))

   nuei = exp(linear_interpolation(alt, nue, size(alt), alti))

   oxyi = exp(linear_interpolation(alt, oxy, size(alt), alti))
   j = j + 1

   !Integration

   integral = integral + tempi*nuei*oxyi*dz 

  enddo

  end program main

  !Functions

  real function linear_interpolation(x, y, n, x0)

   implicit none

   integer :: n, i, k

   real :: x(n), y(n), x0, y0

   k = 0

  do i = 1, n-1

   if ((x0 >= x(i)) .and. (x0 <= x(i+1))) then  

    k = i ! k is the index where: x(k) <= x <= x(k+1)
    exit ! exit loop

   end if

  enddo

  if (k > 0) then  ! compute the interpolated value for a point not in the array

   y0 = y(k) + (y(k+1)-y(k))/(x(k+1)-x(k))*(x0-x(k))

  else

   write(*,*)'Error computing the interpolation !!!'

   write(*,*) 'x0 =',x0, ' is out of range <', x(1),',',x(n),'>'

  end if

  ! return value

     linear_interpolation = y0

  end function linear_interpolation 
```

我可以提供对确切错误的更详细描述，我希望错误名称就足够了，因为每种类型都有一些。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T15:56:25.690

我想我可以在您的代码示例中发现一些严重的错误。语法错误是`exp(...`语句中的括号不平衡。它们应该是这样的：

```
tempi = exp(linear_interpolation(alt, temp, size(alt), alti) ) ! <- extra ")"
nuei = exp(linear_interpolation(alt, nue, size(alt), alti) )
oxyi = exp(linear_interpolation(alt, oxy, size(alt), alti) ) 
```

正是这样的事情会产生一长串令人困惑的错误，就像你得到的那样；因此，Dave 和 Jonathan 给出的建议不能被重复多次。

另一个错误（“不可分类声明”）适用于您的循环：

```
do(i=1, nend)
! ...
do(z=1, 100, dz)
! ... 
```

这些应该写不带括号。

“数据声明错误”源于您尝试声明和初始化多个变量，例如

```
real dz = size(alt)/100, z, integral = 0 
```

除了在代码中定位不正确（如前所述）外，这只能使用双冒号分隔符来完成：

```
real :: dz = size(alt)/100, z, integral = 0 
```

我个人建议总是写这样的声明。`save`但是必须注意，像这样初始化变量具有隐式赋予它们属性的副作用。这在主程序中没有影响，但知道这一点很重要；您可以通过将初始化放在单独的行上来避免它。

# parallel-processing - 指定隔离级别时，它会持续多长时间？

> ID：13354513
> 
> 赞同：0
> 
> 时间：2012-11-13T01:46:02.120
> 
> 标签：parallel-processing, database, isolation-level

隔离级别是否仍然适用，直到指定不同的级别，还是仅适用于下一个事务？

例如：

```
SET TRANSACTION READ WRITE
 ISOLTATION LEVEL READ UNCOMMITTED;
 SELECT foo FROM aTable;
 SELECT bar FROM aTable; 
```

读取列`bar`时隔离级别是否恢复为默认可序列化？

为了确保我不会感到困惑，在指定隔离级别时它是 dbms 宽的，对吗？

# asp.net-mvc - 在 MVC 应用程序的实体框架中共享对象上下文

> ID：13354516
> 
> 赞同：4
> 
> 时间：2012-11-13T01:46:39.183
> 
> 标签：asp.net-mvc, entity-framework, objectcontext

我正在开发一个 ASP.NET MVC 应用程序（使用 Entity Framework1.0 的 Microsoft .NET Framework 版本 3.5 SP1）。我的 MySQL 数据库中有大约 30 个表。到目前为止，我已经创建了 10 个模型类。我的所有模型中都有一个数据实体实例。

示例模型类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
namespace MyProj.Models
{
    public class SSDModel
private ddms_dataEntities2 db = new ddms_dataEntities2();

public ssd searchbyId(string id)
        {
            return db.ssd.FirstOrDefault(d => d.ssd_id_text == id);
        }

 public void add(ssd item)
        {
            db.AddTossd(item);
        }
} 
```

当我尝试通过实例化 SSDModel 的对象从另一个模型类访问方法 searchbyId() 时，我遇到了一个异常 - objectcontext 未共享。

我试图找出在模型类之间共享对象上下文的最佳方式。我确实通过 SO 和其他网站寻找解决方案。我知道最好的方法之一是每个 HttpRequest 有一个对象上下文。但是，我在网上找到的所有内容都是关于实体框架 4.0。我不想将应用程序迁移到另一个版本。

请推荐一个我可以参考的好的文档/博客/示例应用程序。这是我的第一个 MVC 应用程序，任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T03:51:35.223

`SSDModel`您可以在创建对象时将 Context 传递给构造函数，

```
public class SSDModel
       private ddms_dataEntities2 db;

       public SSDModel(ddms_dataEntities2  context){
          db=context;
       }

       public ssd searchbyId(string id)
        {
            return db.ssd.FirstOrDefault(d => d.ssd_id_text == id);
        }

        public void add(ssd item)
        {
            db.AddTossd(item);
        }
} 
```

当您要初始化多个模型类时，只需创建一个上下文并将其传递给所有构造函数。

```
var ddms_dataEntities2 db = new ddms_dataEntities2();
SSDModel ssd=new SSDModel(db);
OtherModel other=OtherModel(db); 
```

保留每个请求的上下文的一种简单方法是在[这里](https://stackoverflow.com/questions/6334592/one-dbcontext-per-request-in-asp-net-mvc-without-ioc-container)
describerd 或者您可以使用[IOC 容器](http://completedevelopment.blogspot.com/2012/06/dependency-injection-with-entity.html)。

# vb.net - 将 Visual Basic 6.0 类型转换为 VB.NET 'Structure'

> ID：13354517
> 
> 赞同：9
> 
> 时间：2012-11-13T01:46:40.620
> 
> 标签：vb.net, vb6-migration

编辑：让它在 32 位下工作，我现在正试图让它在 64 位下工作。我已经获得了 DLL 的源代码，并且 DLL 和应用程序都被编译为 64 位。我每次都遇到访问冲突。这是 DLL 代码（[Visual Studio 2005](http://en.wikipedia.org/wiki/Microsoft_Visual_Studio#Visual_Studio_2005)中的 C++ ）：

```
#pragma pack( push, 2 )
// Output Results Structure
typedef struct tagTVA_RESULTS {
    int   iID;             /* Difference ID 1 .. n */
    int   iLeft;           /* Bounding rectangle */
    int   iRight;
    int   iTop;
    int   iBottom;
    double dCx;            /* Center of gravity */
    double dCy;
    double dMajor;         /* Shape information */
    double dMinor;
    double dAngle;         /* Rotational information */
    int    lArea;          /* Number of pixels */
    int    iEdge;          /* Set if difference is at the edge of the image */
    double dNormalDensity;
    int    iNormalCount;
    double dDifferenceDensity;
} TVA_RESULTS, *PTVA_RESULTS;
#pragma pack ( pop ) 
```

请注意，它将包设置为 2。我也尝试在应用程序中将其设置为 2，但失败了。我尝试了其他值，甚至尝试了不同的值。我已经尝试显式使用 4 作为整数大小和 8 作为双倍大小。但我会假设（知识有限）如果两个包装尺寸相同，它应该可以工作。

在这一点上，我怀疑该函数是如何被调用的。它的第一个参数是一个指向这些结构数组的指针。应用程序传入数组 ByRef 的第一个元素，我认为它可以实现这一点。但是有一个错误的指向数组的指针可以解释这些症状。这是DLL中的函数定义。

```
int WINAPI MNtvaAnalyzeVB (TVA_RESULTS *pResults, int iMaxCount) 
```

我的老板建议这可能是一个[大/小字节序](https://en.wikipedia.org/wiki/Endianness)问题，但如果它们都在同一个环境中编译，这似乎不太可能。

我该怎么办？

> > > 编辑结束>>>

* * *

我正在将 Visual Basic 6.0 应用程序转换为 VB.NET。我有几个结构可以传递给外部 DLL 文件。这不起作用，我感觉这是由于结构没有正确传递。

这是原始结构：

```
Public Type TVA_PARAMETERS
    iStandardFilterOnOff As Long
    iSampleFilterOnOff As Long
    iDifferenceFilterOnOff As Long
    iRotationCorrectionOnOff As Long
    iLocalCorrectionOnOff As Long
    iStandardAOIx As Long
    iStandardAOIy As Long
    iStandardAOIdx As Long
    iStandardAOIdy As Long
    iSampleAOIx As Long
    iSampleAOIy As Long
    iSampleAOIdx As Long
    iSampleAOIdy As Long
    iRepeatHorizontal As Long
    iRepeatVertical As Long
    dSensitivity As Double
    iMergeWidth As Long
    iMergeHeight As Long
    iMinimumDifferenceArea As Long
    iMaximumDifferenceArea As Long
End Type 
```

如果我在 Visual Basic 6.0 中对该类型的变量执行 LenB，我会得到 84 个字节。（注意：我不确定这是否是确定其大小的有效方法。）

因此，我试图将其转换为 VB.NET：

```
Public Structure TVA_PARAMETERS
    Public iStandardFilterOnOff As Integer
    Public iSampleFilterOnOff As Integer
    Public iDifferenceFilterOnOff As Integer
    Public iRotationCorrectionOnOff As Integer
    Public iLocalCorrectionOnOff As Integer
    Public iStandardAOIx As Integer
    Public iStandardAOIy As Integer
    Public iStandardAOIdx As Integer
    Public iStandardAOIdy As Integer
    Public iSampleAOIx As Integer
    Public iSampleAOIy As Integer
    Public iSampleAOIdx As Integer
    Public iSampleAOIdy As Integer
    Public iRepeatHorizontal As Integer
    Public iRepeatVertical As Integer
    Public dSensitivity As Double
    Public iMergeWidth As Integer
    Public iMergeHeight As Integer
    Public iMinimumDifferenceArea As Integer
    Public iMaximumDifferenceArea As Integer
End Structure 
```

在 VB.NET 中，[System.Runtime.InteropServices.Marshal.sizeof()](https://msdn.microsoft.com/en-us/library/vstudio/system.runtime.interopservices.marshal.sizeof%28v=vs.100%29.aspx)给出 88 个字节。我希望因为这些只是数值，所以这会起作用（我知道字符串可能会很痛苦）。我没有外部函数的代码，但它是这样声明的：

```
Declare Function MNtvaParameters Lib "MNTva.dll" (ByRef pParameters As TVA_PARAMETERS) As Integer 
```

我猜这个结构的大小不一样，所以 DLL 文件调用失败，但我没有收到错误，正如我所说，我没有代码来查看它。它返回一个零，如果它成功则应该返回一个零，但显然它实际上没有效果。

我已经玩了一些[Runtime.InteropServices.StructLayoutAttribute](https://msdn.microsoft.com/en-us/library/vstudio/system.runtime.interopservices.structlayoutattribute%28v=vs.100%29.aspx)，但如果这是答案，我无法确定正确的参数。

我有另一个这样的结构，但它是如此相似。我猜如果我能解决这个问题，我就能解决另一个问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-13T01:58:28.117

当然，我尝试的下一件事就是解决了这个问题。像这样定义结构：

```
<Runtime.InteropServices.StructLayout(Runtime.InteropServices.LayoutKind.Sequential, Pack:=1)> _
Public Structure TVA_PARAMETERS
  Public iStandardFilterOnOff As Integer
  ...
  etc. 
```

解决了这个问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T08:44:05.107

这里有很好的资源：

*   Visual Basic 6.0：*[数据类型](http://www.developerfusion.com/article/32/data-types/)*
*   VB.NET 2012：*[数据类型摘要 (Visual Basic)](http://msdn.microsoft.com/en-us/library/47zceaw7(v=vs.110).aspx)*

您的转换看起来不错，`long`Visual Basic 6.0 中的 a 是 4 个字节，即 32 位，在 VB.NET 中是一个整数。在 VB.NET 和 Visual Basic 6.0 中双精度都是 8 个字节（根据上述文章）。我还在 VB.NET 中获得了 84 个字节。

```
Option Strict On

Public Class Form1

    Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
        Dim A As New TVA_PARAMETERS
        MsgBox(A.ByteCount.ToString)
    End Sub

    Public Structure TVA_PARAMETERS
        Public iStandardFilterOnOff As Int32
        Public iSampleFilterOnOff As Int32
        Public iDifferenceFilterOnOff As Int32
        Public iRotationCorrectionOnOff As Int32
        Public iLocalCorrectionOnOff As Int32
        Public iStandardAOIx As Int32
        Public iStandardAOIy As Int32
        Public iStandardAOIdx As Int32
        Public iStandardAOIdy As Int32
        Public iSampleAOIx As Int32
        Public iSampleAOIy As Int32
        Public iSampleAOIdx As Int32
        Public iSampleAOIdy As Int32
        Public iRepeatHorizontal As Int32
        Public iRepeatVertical As Int32
        Public dSensitivity As Double
        Public iMergeWidth As Int32
        Public iMergeHeight As Int32
        Public iMinimumDifferenceArea As Int32
        Public iMaximumDifferenceArea As Int32

        Function ByteCount() As Integer
            Dim Results As New List(Of Byte)
            AddBytesToList(Results, BitConverter.GetBytes(iStandardFilterOnOff))
            AddBytesToList(Results, BitConverter.GetBytes(iSampleFilterOnOff))
            AddBytesToList(Results, BitConverter.GetBytes(iDifferenceFilterOnOff))
            AddBytesToList(Results, BitConverter.GetBytes(iRotationCorrectionOnOff))
            AddBytesToList(Results, BitConverter.GetBytes(iLocalCorrectionOnOff))
            AddBytesToList(Results, BitConverter.GetBytes(iStandardAOIx))
            AddBytesToList(Results, BitConverter.GetBytes(iStandardAOIy))
            AddBytesToList(Results, BitConverter.GetBytes(iStandardAOIdx))
            AddBytesToList(Results, BitConverter.GetBytes(iStandardAOIdy))
            AddBytesToList(Results, BitConverter.GetBytes(iSampleAOIx))
            AddBytesToList(Results, BitConverter.GetBytes(iSampleAOIy))
            AddBytesToList(Results, BitConverter.GetBytes(iSampleAOIdx))
            AddBytesToList(Results, BitConverter.GetBytes(iSampleAOIdy))
            AddBytesToList(Results, BitConverter.GetBytes(iRepeatHorizontal))
            AddBytesToList(Results, BitConverter.GetBytes(iRepeatVertical))
            AddBytesToList(Results, BitConverter.GetBytes(dSensitivity))
            AddBytesToList(Results, BitConverter.GetBytes(iMergeWidth))
            AddBytesToList(Results, BitConverter.GetBytes(iMergeHeight))
            AddBytesToList(Results, BitConverter.GetBytes(iMinimumDifferenceArea))
            AddBytesToList(Results, BitConverter.GetBytes(iMaximumDifferenceArea))
            Return Results.Count
        End Function

        Sub AddBytesToList(ByRef List As List(Of Byte), addBytes As Byte())
            For Each B As Byte In addBytes
                List.Add(B)
            Next

        End Sub
    End Structure

End Class 
```

# geolocation - 将 UGC 或 FIPS6 地理编码映射到多边形？

> ID：13354519
> 
> 赞同：3
> 
> 时间：2012-11-13T01:46:41.913
> 
> 标签：geolocation, coordinates, cap

我希望将 UGC 或 FIPS6 地理编码转换为多边形（甚至是粗略的纬度/经度坐标 + 半径）。可以在此处找到地理编码的示例：[http ://alerts.weather.gov/cap/us.php?x=0](http://alerts.weather.gov/cap/us.php?x=0)

有人知道我在哪里可以找到这些地理编码的映射吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-10T17:02:27.627

NWS使用的数据可以在这里找到： [http ://www.nws.noaa.gov/geodata/](http://www.nws.noaa.gov/geodata/)

为了真正从数据中获取坐标，我使用程序 OpenJump 将数据保存为 CSV 格式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-06-03T03:51:08.510

**2019 年 6 月的更新答案**

NWS 公共预报区可以从[https://www.weather.gov/gis/PublicZones下载为 shapefile](https://www.weather.gov/gis/PublicZones)

我使用[QGIS](https://www.qgis.org/en/site/)将 shapefile 转换为 WGS84 (EPSG:4326) 并使用[WKT geometry](https://en.wikipedia.org/wiki/Well-known_text_representation_of_geometry)导出为 CSV 。这产生了一个 122MB 的 CSV 文件。

**Windows QGIS 3.4.3 使用说明**

1.  下载并解压`z_02ap19.zip`
2.  在 QGIS 中，图层 -> 添加图层 -> 添加矢量图层...（或按 Ctrl+Shift+V）
3.  源类型 =**文件**，编码 =**系统**，矢量数据集 =`z_02ap19.shp`提取的早期变量。然后单击**添加**。
4.  [结果](https://i.stack.imgur.com/wiVGw.png)
5.  [可选] 右键单击​​图层，设置 CRS -> 设置图层 CRS... 并将 CRS 设置为`EPSG:4326`.
6.  右键单击图层，导出 -> 将要素另存为...
7.  格式 =**逗号分隔值 [CSV]**
8.  选择文件位置。
9.  选择一种编码，通常是**System**或**UTF-8**。
10.  取消选中“将保存的文件添加到地图”
11.  确保选中所有字段
12.  几何类型应该是**自动**的（它们最终都是多边形）
13.  图层选项：
    *   `CREATE_CSVT`= **YES**（创建描述字段类型的单个文件，用于将文件重新导入其他 GIS 程序）
    *   `GEOMETRY`= **AS_WKT**
    *   `LINEFORMAT`= **CRLF** (Windows) 或**LF** (Unix)，从历史上看，但现在大多数程序都可以同时处理
    *   `SEPARATOR`=**逗号**（由您决定）
    *   `STRING_QUOTING`=**总是**（可能无关紧要，因为数据无论如何都不包含引号）
    *   `WRITE_BOM`= **NO**（字节顺序标记，由您决定）
14.  单击确定，QGIS 将生成需要几秒钟的文件。

# php - XSS_clean 不能与 codeigniter 一起使用

> ID：13354521
> 
> 赞同：1
> 
> 时间：2012-11-13T01:46:50.403
> 
> 标签：php, codeigniter, validation, xss

我正在使用 codeigniter 并且我正在尝试执行 form_validation 但 XSS_CLean 不起作用，不知道为什么，我在 config.php $config['global_xss_filtering'] = TRUE;

控制器.php

```
$this->load->library('form_validation');
$this->form_validation->set_rules('username', 'Username', 'required|trim|min_length[4]|max_length[12]|xss_clean'); 
```

必需，min_length 和更多功能完美但 xss_clean 不...我尝试通过 '"<> 并且它通过了，我做错了什么？

pd：对不起我的英语！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T02:01:24.800

`<>`不是 XSS 尝试。该脚本删除了潜在的 XSS 攻击。该功能允许使用无害标签，例如`<b>, <p>`.

[您可以阅读代码本身。](https://github.com/EllisLab/CodeIgniter/blob/develop/system/core/Security.php#L272) 你可能会学到很多。

如果要对所有 HTML 实体进行编码，可以使用[`htmlentities`](http://php.net/manual/en/function.htmlentities.php)PHP 形式的函数。

# javascript - jQuery显示隐藏多次

> ID：13354523
> 
> 赞同：-2
> 
> 时间：2012-11-13T01:46:57.890
> 
> 标签：javascript, jquery, html

我有一个类似于 Reddit 的评论树。人们需要能够通过单击回复链接来回复评论，然后应该会出现一个带有文本区域的表单。我尝试使用该`.show()`方法，但评论不止一条，当您单击回复时，它会显示每条评论的所有表单。我怎样才能解决这个问题？我应该调查什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T02:15:00.083

1.  您需要为每个设置一个班级（每个`textarea`班级都有一个不同的班级）。比方说：

    `<textarea class="commentAnswerBox1">Answer here...</textarea>`

2.  现在您必须为每个评论答案按钮设置一个类 像这样

    `<input type="button" class="btnAnswer1" value="Answer this comment" />`

3.  现在你可以调用一个函数来识别哪个`btnAnswer`被点击了，并且只显示对应的`commentBox`。

您可以使用 Class 或 ID，也可以创建属性，没关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T01:58:27.200

在我看来，问题源于您的 DOM 选择器。看起来您只想显示最后一个文本区域。如果是这种情况，那么你想要类似的东西

`$('textarea:last').show();`

发布更多信息，以便我们提供更好的答案。

# java - 运行 Pythontranscriber.py 时出错

> ID：13354525
> 
> 赞同：-1
> 
> 时间：2012-11-13T01:47:23.897
> 
> 标签：java, jython, voice-recognition, importerror, cmusphinx

当我尝试运行 pythontranscriber.py 时，它失败并出现以下错误：

```
Traceback (most recent call last):
  File "PythonTranscriber.py", line 14, in <module>
  from edu.cmu.sphinx.decoder import Decoder
  ImportError: No module named edu 
```

我的脚本 PythonTranscriber.py：

```
import sys

libDir = "/home/karen/sphinx4-1.0beta5-scr/sphinx4-1.0beta5/src/sphinx4/" 
classPaths = [
    "sphinx4.jar",
    "jsapi.jar" ] 
for classPath in classPaths:
    sys.path.append(libDir + classPath)

true = 1 
false = 0

from edu.cmu.sphinx.decoder import Decoder 
from edu.cmu.sphinx.decoder import ResultListener 
from edu.cmu.sphinx.decoder.pruner import SimplePruner 
from edu.cmu.sphinx.decoder.scorer import ThreadedAcousticScorer 
from edu.cmu.sphinx.decoder.search import PartitionActiveListFactory 
from edu.cmu.sphinx.decoder.search import SimpleBreadthFirstSearchManager 
from edu.cmu.sphinx.frontend import DataBlocker 
from edu.cmu.sphinx.frontend import FrontEnd 
from edu.cmu.sphinx.frontend.endpoint import NonSpeechDataFilter 
from edu.cmu.sphinx.frontend.endpoint import SpeechClassifier 
from edu.cmu.sphinx.frontend.endpoint import SpeechMarker 
from edu.cmu.sphinx.frontend.feature import DeltasFeatureExtractor 
from edu.cmu.sphinx.frontend.feature import LiveCMN 
from edu.cmu.sphinx.frontend.filter import Preemphasizer 
from edu.cmu.sphinx.frontend.frequencywarp import MelFrequencyFilterBank 
from edu.cmu.sphinx.frontend.transform import DiscreteCosineTransform 
from edu.cmu.sphinx.frontend.transform import DiscreteFourierTransform 
from edu.cmu.sphinx.frontend.util import AudioFileDataSource 
from edu.cmu.sphinx.frontend.window import RaisedCosineWindower 
from edu.cmu.sphinx.instrumentation import BestPathAccuracyTracker 
from edu.cmu.sphinx.instrumentation import MemoryTracker 
from edu.cmu.sphinx.instrumentation import SpeedTracker 
from edu.cmu.sphinx.jsapi import JSGFGrammar 
from edu.cmu.sphinx.linguist.acoustic import UnitManager 
from edu.cmu.sphinx.linguist.acoustic.tiedstate import Sphinx3Loader 
from edu.cmu.sphinx.linguist.acoustic.tiedstate import TiedStateAcousticModel 
from edu.cmu.sphinx.linguist.dictionary import FastDictionary 
from edu.cmu.sphinx.linguist.flat import FlatLinguist 
from edu.cmu.sphinx.recognizer import Recognizer 
from edu.cmu.sphinx.util import LogMath 
from java.util.logging import Logger 
from java.util.logging import Level 
from java.net import URL 
from java.util import ArrayList

# if (args.length < 1) {
#  throw new Error("USAGE: GroovyTranscriber <sphinx4 root> [<WAV file>]")
# }

root = "../../.."

# init common  
Logger.getLogger("").setLevel(Level.WARNING) 
logMath = LogMath(1.0001, true) 
absoluteBeamWidth = -1 
relativeBeamWidth = 1E-80 
wordInsertionProbability = 1E-36 
languageWeight = 8.0

# init audio data 
audioSource = AudioFileDataSource(3200, None) 
audioURL =  URL("file:" + root + "/src/apps/edu/cmu/sphinx/demo/transcriber/10001-90210-01803.wav")

# (args.length > 1) ?
#  File(args[0]).toURI().toURL() :   audioSource.setAudioFile(audioURL, None)

# init front end 
dataBlocker = DataBlocker(
        10 # blockSizeMs ) speechClassifier = SpeechClassifier(
        10,     # frameLengthMs,
        0.003, # adjustment,
        10,     # threshold,
        0       # minSignal 
)

speechMarker = SpeechMarker(
        200, # startSpeechTime,
        500, # endSilenceTime,
        100, # speechLeader,
        50,  # speechLeaderFrames
        100  # speechTrailer 
)

nonSpeechDataFilter = NonSpeechDataFilter()

premphasizer = Preemphasizer(
        0.97 # preemphasisFactor 
) 
windower = RaisedCosineWindower(
        0.46, # double alpha
        25.625, # windowSizeInMs
        10.0 # windowShiftInMs 
) 
fft = DiscreteFourierTransform(
        -1, # numberFftPoints
        false # invert 
) 
melFilterBank = MelFrequencyFilterBank(
        130.0, # minFreq,
        6800.0, # maxFreq,
        40 # numberFilters 
) 
dct = DiscreteCosineTransform(
        40, # numberMelFilters,
        13  # cepstrumSize 
) 
cmn = LiveCMN(
        12.0, # initialMean,
        100,  # cmnWindow,
        160   # cmnShiftWindow 
) 
featureExtraction = DeltasFeatureExtractor(
        3 # window 
)

pipeline = [
        audioSource,
        dataBlocker,
        speechClassifier,
        speechMarker,
        nonSpeechDataFilter,
        premphasizer,
        windower,
        fft,
        melFilterBank,
        dct,
        cmn,
        featureExtraction ]

frontend = FrontEnd(pipeline)

# init models 
unitManager = UnitManager()

modelLoader = Sphinx3Loader(
        "file:" + root + "/models/acoustic/tidigits/model.props",
        logMath,
        unitManager,
        true,
        true,
        39,
        "file:" + root + "/models/acoustic/tidigits/wd_dependent_phone.500.mdef",
        "file:" + root + "/models/acoustic/tidigits/wd_dependent_phone.cd_continuous_8gau/",
        0.0,
        1e-7,
        0.0001,
        true)

model = TiedStateAcousticModel(modelLoader, unitManager, true)

dictionary = FastDictionary(
        URL("file:" + root + "/models/acoustic/tidigits/dictionary"),
        URL("file:" + root + "/models/acoustic/tidigits/fillerdict"),
        ArrayList(),
        false,
        "<sil>",
        false,
        false,
        unitManager)

# init linguist 
grammar = JSGFGrammar(
        # URL baseURL,
        URL("file:" + root + "/src/apps/edu/cmu/sphinx/demo/transcriber/"),
        logMath, # LogMath logMath,
        "digits", # String grammarName,
        false, # boolean showGrammar,
        false, # boolean optimizeGrammar,
        false, # boolean addSilenceWords,
        false, # boolean addFillerWords,
        dictionary # Dictionary dictionary 
)

linguist = FlatLinguist(
        model, # AcousticModel acousticModel,
        logMath, # LogMath logMath,
        grammar, # Grammar grammar,
        unitManager, # UnitManager unitManager,
        wordInsertionProbability, # double wordInsertionProbability,
        1.0, # double silenceInsertionProbability,
        1.0, # double fillerInsertionProbability,
        1.0, # double unitInsertionProbability,
        languageWeight, # float languageWeight,
        false, # boolean dumpGStates,
        false, # boolean showCompilationProgress,
        false, # boolean spreadWordProbabilitiesAcrossPronunciations,
        false, # boolean addOutOfGrammarBranch,
        1.0, # double outOfGrammarBranchProbability,
        1.0, # double phoneInsertionProbability,
        None # AcousticModel phoneLoopAcousticModel 
)

# init recognizer 
scorer = ThreadedAcousticScorer(frontend, None, 10, true, 0)

pruner = SimplePruner()

activeListFactory = PartitionActiveListFactory(absoluteBeamWidth, relativeBeamWidth, logMath)

searchManager = SimpleBreadthFirstSearchManager(
        logMath, linguist, pruner,
        scorer, activeListFactory,
        false, 0.0, 0, false)

decoder = Decoder(searchManager,
        false, false,
        ArrayList(),
        100000)

recognizer = Recognizer(decoder, None)

# allocate the resourcs necessary for the recognizer recognizer.allocate()

# Loop unitl last utterance in the audio file has been decoded, in which case the recognizer will return None. 
result = recognizer.recognize() 
while (result != None):
    resultText = result.getBestResultNoFiller()
    print resultText
    result = recognizer.recognize() 
```

我已经安装了 Jython！

请帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:01:35.940

要加载 Java 代码，请尝试将 jar 添加到您的[classpath](http://en.wikipedia.org/wiki/Classpath_%28Java%29)。

如果您不熟悉如何执行此操作，请使用

```
 export CLASSPATH=$CLASSPATH:/path/to/sphinx4.jar:/path/jsapi.jar 
```

或者将其添加到您的命令行脚本中：

```
java -cp /path/to/jars -jar /home/karen/jython-installer-2.5.3/jython.jar PythonTranscriber.py 
```

**编辑：**

1.  因此，我按照[此处](http://www.robbrewer.me/projects/speechlion/INSTALL.html)的说明下载并安装了 Sphinx-4。jar 文件的路径与您在脚本中的路径不同。他们在`sphinx4/lib`目录下。您可能需要仔细检查路径的正确性。

2.  我按如下方式运行了您的脚本（已修改，但没有重大更改）：

    ```
    import sys,os
    lib_dir = '/home/.../jars/sphinx4/lib/'
    classpaths = [ 'sphinx4.jar', 'jsapi.jar' ]
    for cp in classpaths:
        sys.path.append(os.path.join(lib_dir,cp))

    from edu.cmu.sphinx.decoder import Decoder
    from ... import ...
    etc.
    from java.util import ArrayList 
    ```

    使用命令：

    ```
    jython python_transcriber.py 
    ```

3.  这几乎奏效了，除了您还有一个导入错误：

    ```
    from edu.cmu.sphinx.jsapi import JSGFGrammar 
    ```

    根据[javadoc](http://cmusphinx.sourceforge.net/sphinx4/javadoc/edu/cmu/sphinx/jsgf/JSGFGrammar.html)，应该是：

    ```
    from edu.cmu.sphinx.jsgf import JSGFGrammar 
    ```

这为我解决了。没有尝试其余代码，但至少所有导入都有效。

# cocos2d-iphone - cocos2d: 子类化 CCMenuItem 会触发很多“removeChildByTag: child not found!”

> ID：13354526
> 
> 赞同：0
> 
> 时间：2012-11-13T01:47:30.007
> 
> 标签：cocos2d-iphone, ccmenuitem

我正在尝试使用以下代码对 CCMenuItem 进行子类化：

通用按钮.h

```
#import <Foundation/Foundation.h>
#import "cocos2d.h"

@interface GenericButton : CCMenuItemSprite {

}
+(id) itemwithTitle:(NSString*)title withBGColor: (ccColor3B) bgColor andFGColor:(ccColor3B)fgColor;
@end 
```

通用按钮.m

```
#import "GenericButton.h"
#import "HelpfulClasses.h"

@implementation GenericButton

+(id) itemwithTitle:(NSString*)title withBGColor: (ccColor3B) bgColor andFGColor:(ccColor3B)fgColor{

CCSprite*genericButtonBG = [CCSprite spriteWithSpriteFrameName:@"genericButtonBG.png"];
genericButtonBG.color=bgColor;

CCSprite*genericButtonBGPressed = [CCSprite spriteWithSpriteFrameName:@"genericButtonBGPressed.png"];
genericButtonBGPressed.color=bgColor;

CCMenuItemSprite*button = [CCMenuItemSprite itemWithNormalSprite:genericButtonBG selectedSprite:genericButtonBGPressed];

CCSprite*fgButton = [CCSprite spriteWithSpriteFrameName:@"genericButton.png"];
fgButton.color=fgColor;
[button addNodeInMiddleOfParent:fgButton];

CCLabelBMFont *buttonTitle = [CCLabelBMFont labelWithString:title fntFile:@"font.fnt"];
if ([title length]>7) {
buttonTitle.scale=0.85;
}
buttonTitle.color=ccYELLOW;
[fgButton addNodeInMiddleOfParent:buttonTitle];

return button;

}
// on "dealloc" you need to release all your retained objects
- (void) dealloc
{
// in case you have something to dealloc, do it in this method
// in this particular example nothing needs to be released.
// cocos2d will automatically release all the children (Label)

// don't forget to call "super dealloc"
[super dealloc];
}

@end 
```

但是每当我使用 GenericButton*button = [GenericButton item....] 时，在 CCScene 中，有很多“removeChildByTag: child not found!” 显示在控制台上。难道我做错了什么？干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T03:09:58.713

两个月后，您可能已经自己弄清楚了。这个网站没有办法PM某人吗？很抱歉，如果我复活旧线程。

您没有包含此类的所有代码。但是，我可以指出我看到的一些问题，并且可能是您问题的根源。在您的类方法中，您正在创建并返回一个指向“CCMenuItemSprite”的指针，称为“按钮”。这应该是指向您的类“GenericButton”的指针。

# maven - Maven project.build.directory

> ID：13354531
> 
> 赞同：197
> 
> 时间：2012-11-13T01:47:55.997
> 
> 标签：maven

在 Maven 中，`project.build.directory`指的是什么？我有点疑惑，是引用了Maven项目中的源代码目录还是目标目录？

* * *

## 回答 #1

> 赞同：254
> 
> 时间：2012-11-13T06:24:29.317

你可以在超级 pom.xml 中找到那些 maven 属性。

你在这里找到罐子：

```
${M2_HOME}/lib/maven-model-builder-3.0.3.jar 
```

使用 7-zip 或其他存档器（或使用 jar 工具）打开 jar。

导航

```
org/apache/maven/model 
```

在那里你会找到`pom-4.0.0.xml`.

它包含所有这些“捷径”：

```
<project>
    ...
    <build>
        <directory>${project.basedir}/target</directory>
        <outputDirectory>${project.build.directory}/classes</outputDirectory>
        <finalName>${project.artifactId}-${project.version}</finalName>
        <testOutputDirectory>${project.build.directory}/test-classes</testOutputDirectory>
        <sourceDirectory>${project.basedir}/src/main/java</sourceDirectory>
        <scriptSourceDirectory>src/main/scripts</scriptSourceDirectory>
        <testSourceDirectory>${project.basedir}/src/test/java</testSourceDirectory>
        <resources>
            <resource>
                <directory>${project.basedir}/src/main/resources</directory>
            </resource>
        </resources>
        <testResources>
            <testResource>
                <directory>${project.basedir}/src/test/resources</directory>
            </testResource>
        </testResources>
        ...
    </build>
    ...
</project> 
```

* * *

## 更新

经过一番游说后，我添加[了`pom-4.0.0.xml`](https://github.com/apache/maven/blob/trunk/maven-model-builder/src/main/resources/org/apache/maven/model/pom-4.0.0.xml#L53). 这允许您在不打开本地 jar 文件的情况下查看属性。

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2012-11-13T01:53:15.567

它指向您的顶级输出目录（默认为`target`）：

[https://web.archive.org/web/20150527103929/http://docs.codehaus.org/display/MAVENUSER/MavenPropertiesGuide](https://web.archive.org/web/20150527103929/http://docs.codehaus.org/display/MAVENUSER/MavenPropertiesGuide)

**编辑：**正如已经指出的那样，Codehaus 现在很遗憾地不复存在了。您可以在此处从 Sonatype 中找到有关这些属性的详细信息：

[http://books.sonatype.com/mvnref-book/reference/resource-filtering-sect-properties.html#resource-filtering-sect-project-properties](http://books.sonatype.com/mvnref-book/reference/resource-filtering-sect-properties.html#resource-filtering-sect-project-properties)

> *如果你曾经试图在 Maven 中引用输出目录，你永远不应该使用像target/classes*这样的字面值。相反，您应该使用属性引用来引用这些目录。
> 
> ```
>  project.build.sourceDirectory
>     project.build.scriptSourceDirectory
>     project.build.testSourceDirectory
>     project.build.outputDirectory
>     project.build.testOutputDirectory
>     project.build.directory 
> ```
> 
> `sourceDirectory`, `scriptSourceDirectory`, 并`testSourceDirectory`提供对项目源目录的访问。`outputDirectory`并`testOutputDirectory`提供对 Maven 将放置字节码或其他构建输出的目录的访问权限。`directory`指包含所有这些输出目录的目录。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-11-14T18:52:33.840

您可以找到项目中价值的最新答案，只需执行

```
mvn3 help:effective-pom 
```

命令并`<build> ... <directory>`在有效 pom 中的结果中找到标签的值。除非您已覆盖，否则它将显示 Super POM 的值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-09-22T12:55:13.407

除了@Verhás István 的回答（我喜欢这个），我还期待这个问题的单句：

`${project.reporting.outputDirectory}``target/site`在您的项目中解析为。

# c++ - 是否可以在编译时错误检查 case 语句选项？

> ID：13354532
> 
> 赞同：3
> 
> 时间：2012-11-13T01:48:13.700
> 
> 标签：c++, runtime, switch-statement, compile-time

我如何重写此代码，以便用户在通过有效方向时始终显示正确的状态（CA、AL 等）字符串。

即，我如何确保在编译期间而不是在运行时，方向枚举中的每个 enum_types 都有一个有效的 case 语句？

为了。例如。我特意注释掉了东部的案例陈述。有没有办法在编译时捕获它。

我的直觉是（否）这就是语言提供默认情况的原因，因此这可能是不可能的。但我会把这个留给专家。

```
#include <iostream>
#include <string>

using namespace::std;

typedef enum 
{
    min_dir = -1,
    north,
    south,
    east,
    west,
}directions;

directions get_direction( string user_choice)
{
    if(user_choice == "north")
    {
        return north;
    }
    else if (user_choice == "south")
    {
        return south;   
    }
    else if (user_choice == "east")
    {
        return east;    
    }
    else if (user_choice == "west")
    {
        return west;    
    }
    else 
    {
        return min_dir;
    }
}

int main()
{
    string user_direction;
    cout << "Enter direction\n";
    cin >> user_direction;

    directions my_dir = get_direction(user_direction);
    cout << " Print direction's description\n";

    if( my_dir == min_dir)
    {
        // User passed junk
        return -1;
    }

    switch(my_dir)
    {
    case north:
        cout << "North - New york\n";break;
    case south:
        cout << "South - Alabama\n";break;
//  case east:
//      cout << "East - North Carolina\n";break;
    case west:
        cout << "West - California\n";break;
    default:
        cout << "Should Ideally never get here\n";break;
    }
    system("pause");
    return 0;
} 
```

编辑：这只是说明这一点的一个例子。这适用于工作中的代码。他们已经在 Windows（MSVC）和 linux（gcc）中编译了这个。这只是一个警告吗？我需要更严格的执法。

如果枚举没有 case 语句，我可以编写一些在 make 过程中出错的代码吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T01:56:21.650

在 GCC (g++) 和 Clang 中，有`-Wswitch-enum`, 如果您没有 a `case`for`enum`您正在`switch`处理的类型的可能值（即使您有`default`案例），它会警告您。

在 MSVC 中，有类似的[C4062](http://msdn.microsoft.com/en-us/library/fdt9w8tf.aspx)`default`来自警告级别 3，但如果您有声明，它不会警告您。如果在这种情况下需要警告，则需要启用级别 4 警告[C4061](http://msdn.microsoft.com/en-us/library/96f5t7fy.aspx)，即使提供了默认情况，它也会在缺少枚举值时生成警告。

就使其成为错误而言：所有编译器都有一个“将警告视为错误”选项。在 GCC 和 Clang 中，它是`-Werror`; 在 MSVC 中，它是`/WX`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T02:22:42.320

如果您使用一个函数数组，该数组的大小与您的枚举相符并在声明时进行了初始化，那么您可以对数组的大小与枚举计数进行静态断言，以验证所有成员是否存在。通过在数组中使用仿函数而不是函数指针，您还可以确定您没有提供 nullptr 作为值，因为每个仿函数都将被构造。

```
typedef enum 
{
    min_dir = -1,
    north = 0,
    south,
    count_dir
}directions;

class GoDir
{
public:
    virtual void operator()() {}
};

class GoNorth : public GoDir
{
public:
    virtual void operator()() {}
};

class GoSouth : public GoDir
{
public:
    virtual void operator()() {}
};

static GoDir actions[count_dir] = {GoNorth(), GoSouth()};
static_assert(sizeof(actions)/sizeof(actions[0]) == count_dir, "Error"); 
```

# asp.net - 从网络外部上传时，生产服务器上的文件上传问题

> ID：13354534
> 
> 赞同：1
> 
> 时间：2012-11-13T01:48:45.437
> 
> 标签：asp.net, silverlight, file-upload, firewall

我们刚刚部署到生产服务器的文件上传功能存在问题。该代码在我们的开发和质量检查服务器上运行良好，但是当我们将其部署到生产服务器时，我们在从网络外部上传文件时遇到问题。当我们从网络内部执行此操作时，它工作正常，但是一旦我们尝试从网络外部上传文件，它就不会上传任何内容，也不会给出任何错误。我们的应用程序是在 ASP.net 4 中开发的，我们使用 Silverlight 多文件上传控件来执行上传过程。在所有服务器上，我们都有 Windows server 2008 R2 和 IIS 7。我们已授予文件夹上网络服务帐户的全部权限，并且我们使用端口 80。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T04:49:55.800

确保 Silverlight 组件在生产中部署时能够解析并附加到服务器端点。这很可能是网络 IP 地址/主机名解析问题，也可能是安全/权限问题。

# python - 将 JSON blob 列表传递给 django 模板

> ID：13354535
> 
> 赞同：1
> 
> 时间：2012-11-13T01:48:54.110
> 
> 标签：python, django, json, serialization, python-2.7

如何将 JSON blob 的 python 列表传递给 django 模板，以便我可以将它从 JSON 解析为 javascript 对象？

使用 jquery，我`$.parseJSON('{{list_of_JSON_blobs|escapejs}}')`在模板中尝试过类似的方法，但是 python 列表的“字符串表示”会导致语法错误。

这样做`json.dumps(list_of_JSON_blobs)`也不起作用，因为它对已经序列化的 JSON blob 进行了字符串化。

目前我正在做`dumps( [loads(blob) for blob in list_of_JSON_blobs])`，但这显然不是最佳方法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:15:33.623

解决了：

使用`join`, 并将结果字符串封装在括号中

```
'[' + ','.join(list_of_JSON_blobs) + ']' 
```

# perl - perl 计算昨天在日志文件中的点击次数

> ID：13354537
> 
> 赞同：2
> 
> 时间：2012-11-13T01:49:09.383
> 
> 标签：perl, count, logfiles

我正在做一个任务，我需要解析一个日志文件并根据所述日志文件创建一个网站。要求之一是我计算昨天发生的点击次数，当涉及到这个时我迷路了，我附上了我的代码和我正在使用的日志文件，希望有人可以提供一些建议，谢谢

```
#!/usr/bin/perl
use strict;
use warnings;
use Time::Piece;
use Time::Seconds qw(ONE_DAY);

my $yesterday = localtime() - ONE_DAY();
print $yesterday;

open(LOGFILE,"<", "access.log")or die"Could not open log file.";
my $yesterdayHits=0;

my $totalhits=0;
my $webPage='log.html';

open(WEBPAGE,">",$webPage);
print WEBPAGE ("<HEAD><TITLE>Access Counts</TITLE></HEAD>");
print WEBPAGE ("<BODY>");
print WEBPAGE ("<H1> today is: ",scalar(localtime), "</H1>");
print WEBPAGE ("<h3>Yesterday was $yesterday</h3>");
print WEBPAGE ("<TABLE BORDER=1 CELLPADDING=10 width='500px'>");

foreach my $line (<LOGFILE>) {
    $totalhits++;
    my $w = "(.+?)";
    $line =~ m/^$w $w $w \[$w:$w $w\] "$w $w $w" $w $w/;

    my $site     = $1;
    my $logName  = $2;
    my $fullName = $3;
    my $date     = $4;
    my $time     = $5;
    my $gmt      = $6;
    my $req      = $7;
    my $file     = $8;
    my $proto    = $9;
    my $status   = $10;
    my $length   = $11;
    #if($line =~ m/$yesterday/){$yesterdayHits++}

print WEBPAGE ("<Tr><TD>$site</TD><TD>$line</TD></Tr>\n\n");

}

close(LOGFILE);
print WEBPAGE ("<h2>Total hits: $totalhits</h2>");
print WEBPAGE ("<h3>Hits Yesterday: $yesterdayHits</h3>");
print WEBPAGE ("</TABLE></P>");
print WEBPAGE ("</BODY></HTML>");
close(WEBPAGE); 
```

访问日志

```
66.249.65.107 - - [11/Nov/2012:19:33:01 -0400] "GET /support.html HTTP/1.1" 200 11179 
111.111.111.111 - - [11/Nov/2012:19:33:01 -0400] "GET / HTTP/1.1" 200 10801
111.111.111.111 - - [08/Oct/2007:11:17:55 -0400] "GET /style.css HTTP/1.1" 200 3225
123.123.123.123 - - [26/Apr/2000:00:23:48 -0400] "GET /pics/wpaper.gif HTTP/1.0" 200 6248
123.123.123.123 - - [26/Apr/2000:00:23:40 -0400] "GET /asctortf/ HTTP/1.0" 200 8130
123.123.123.123 - - [26/Apr/2000:00:23:48 -0400] "GET /pics/5star2000.gif HTTP/1.0" 200 4005
123.123.123.123 - - [26/Apr/2000:00:23:50 -0400] "GET /pics/5star.gif HTTP/1.0" 200 1031
123.123.123.123 - - [26/Apr/2000:00:23:51 -0400] "GET /pics/a2hlogo.jpg HTTP/1.0" 200 4282
123.123.123.123 - - [26/Apr/2000:00:23:51 -0400] "GET /cgi-bin/newcount?jafsof3&width=4&font=digital&noshow HTTP/1.0" 200 36 
172.16.130.42 - - [26/Apr/2000:00:00:12 -0400] "GET /contacts.html HTTP/1.0" 200 4595 
10.0.1.3 - - [26/Apr/2000:00:17:19 -0400] "GET /news/news.html HTTP/1.0" 200 16716
129.21.109.81 - - [26/Apr/2000:00:16:12 -0400] "GET /download/windows/asctab31.zip HTTP/1.0" 200 1540096
192.168.198.92 - - [22/Dec/2002:23:08:37 -0400] "GET / HTTP/1.1" 200 6394
192.168.198.92 - - [22/Dec/2002:23:08:38 -0400] "GET /images/logo.gif HTTP/1.1" 200 807
192.168.72.177 - - [22/Dec/2002:23:32:14 -0400] "GET /news/sports.html HTTP/1.1" 200 3500 
192.168.72.177 - - [22/Dec/2002:23:32:14 -0400] "GET /favicon.ico HTTP/1.1" 404 1997
192.168.72.177 - - [04/Nov/2012:23:32:15 -0400] "GET /style.css HTTP/1.1" 200 4138
192.168.72.177 - - [22/Dec/2002:23:32:16 -0400] "GET /js/ads.js HTTP/1.1" 200 10229
192.168.72.177 - - [22/Dec/2002:23:32:19 -0400] "GET /search.php HTTP/1.1" 400 1997
127.0.0.1 - - [10/Apr/2007:10:39:11 +0300] "GET / HTTP/1.1" 500 606 
127.0.0.1 - - [10/Apr/2007:10:39:11 +0300] "GET /favicon.ico HTTP/1.1" 200 766 
139.12.0.2 - - [10/Apr/2007:10:40:54 +0300] "GET / HTTP/1.1" 500 612 
139.12.0.2 - - [10/Apr/2007:10:40:54 +0300] "GET /favicon.ico HTTP/1.1" 200 766 
127.0.0.1 - - [10/Apr/2007:10:53:10 +0300] "GET / HTTP/1.1" 500 612
127.0.0.1 - - [10/Apr/2007:10:54:08 +0300] "GET / HTTP/1.0" 200 3700 
127.0.0.1 - - [10/Apr/2007:10:54:08 +0300] "GET /style.css HTTP/1.1" 200 614
127.0.0.1 - - [10/Apr/2007:10:54:08 +0300] "GET /img/pti-round.jpg HTTP/1.1" 200 17524
127.0.0.1 - - [10/Apr/2007:10:54:21 +0300] "GET /unix_sysadmin.html HTTP/1.1" 200 3880
217.0.22.3 - - [04/Nov/2012:10:54:51 +0300] "GET / HTTP/1.1" 200 34 
217.0.22.3 - - [10/Apr/2007:10:54:51 +0300] "GET /favicon.ico HTTP/1.1" 200 11514
217.0.22.3 - - [10/Apr/2007:10:54:53 +0300] "GET /cgi/pti.pl HTTP/1.1" 500 617 
127.0.0.1 - - [10/Apr/2007:10:54:08 +0300] "GET / HTTP/0.9" 200 3700 
217.0.22.3 - - [10/Apr/2007:10:58:27 +0300] "GET / HTTP/1.1" 200 3700 
217.0.22.3 - - [10/Apr/2007:10:58:34 +0300] "GET /unix_sysadmin.html HTTP/1.1" 200 3880 
217.0.22.3 - - [10/Apr/2007:10:58:45 +0300] "GET /talks/Fundamentals/read-excel-file.html HTTP/1.1" 404 311 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T04:30:05.723

```
use POSIX;

$yesterday = strftime("%d/%b/%Y",localtime(time()-86400)); 
```

$yesterday 现在以日志文件的格式包含昨天的日期（例如“11/Nov/2012”）。您可以通过检查来过滤行`$line =~ /$yesterday/;`

[http://perldoc.perl.org/POSIX.html](http://perldoc.perl.org/POSIX.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T02:08:02.163

一种基本方法是像这样修改`$yesterday`变量（与日志文件相同）：

```
$yesterday =~ s!\w+\s+(\w+)\s+(\d+)\s+\d{2}:\d{2}:\d{2}\s+(\d+)!$2/$1/$3!; 
```

现在您可以取消注释并更改行

```
if ($date eq $yesterday) { $yesterdayHits++ } 
```

开始计数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T02:36:19.777

不那么快但相当精确的版本；使用 UNIX 时间戳：

```
#!/usr/bin/env perl
use strict;
use warnings 'all';

use HTTP::Date;
while (<>) {
    my $stamp;
    print if
        m{\s+\[(.+?)\]\s+\"}x
        and $stamp = str2time($1)
        and $stamp > time - 86_400 * 2
        and $stamp < time - 86_400;
} 
```

# android - 在 Android 中，如何给 Rect 一个 X 和 Y 位置？

> ID：13354539
> 
> 赞同：4
> 
> 时间：2012-11-13T01:49:12.473
> 
> 标签：android, rect

我正在尝试在 X 坐标为 360、Y 坐标为 0 的 Canvas 上绘制一个简单的 Rect。如果我将 X 坐标设为 0，我可以绘制我的 Rect，但是当我将其设为 360 时，正方形变得扭曲并变成矩形而不是正方形。我的屏幕尺寸是 640px 宽，所以这里应该没有问题。我可以绘制相同规格的位图，它会正常绘制。为什么 Rects 不能正确绘制？X坐标是否仅在DP而不是PX中？那为什么这会影响 Rect 的实际大小呢？我真的很困惑。

```
 Rect square6 = new Rect();
            square6.set(360, 0, 60, 60); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T01:57:53.473

您应该阅读 Android 中对[Rect](http://developer.android.com/reference/android/graphics/Rect.html)的引用，Rect的 set func 是 public void set (int left, int top, int right, int bottom)，您将 rect 设置为从 (360, 0) 开始并在 (60) 结束, 60)，您应该将 parmas 更改为 (360, 0, 420, 60)。它会起作用的。

# c++ - Xcode 中 POSIX RegEx 的奇怪结果

> ID：13354542
> 
> 赞同：1
> 
> 时间：2012-11-13T01:49:49.047
> 
> 标签：c++, regex, xcode, posix

我刚刚使用 regex.h（跨平台）切换到内置的正则表达式功能。并且使用以下简单的正则表达式，许多有效的输入，例如**as@abc.com**现在会失败（**ab@abc.com**仍然可以正常工作）：

```
^[^@\s]+@[^@\s]+\.[^\s\.@]+$ 
```

调用代码是：

```
return Common::regexMatch("^[^@\\s]+@[^@\\s]+\\.[^\\s\\.@]+$", userInput); 
```

这是实现：

```
#import "regex.h"

bool Common::regexMatch(const string& regex, const string& text) {
   //return [[NSString stringWithCString:text.c_str() encoding:NSUTF8StringEncoding] isMatchedByRegex:[NSString stringWithCString:regex.c_str() encoding:NSUTF8StringEncoding]];

   regex_t re = {0};
   if (regcomp(&re, regex.c_str(), REG_NOSUB | REG_EXTENDED | REG_ICASE) != 0)
      return false;
   int status = regexec(&re, text.c_str(), (size_t)0, NULL, 0);
   regfree(&re);
   if (status != 0)
      return false;
   return true;   
} 
```

令人费解的是，当正则表达式模式中根本没有字母规范时，它会根据不同的字母进行区分。它不喜欢哪些输入非常一致。TIA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-12T17:39:08.483

事实证明，POSIX Extended 不支持转义空格字符，但对于文字空格就很好了，所以我将所有的 "\s" 替换为 " " 并立即启动。

有关更多信息，请参阅[https://stackoverflow.com/a/400316/497357](https://stackoverflow.com/a/400316/497357)

# java - 使用 DatastoreService 查询字符串

> ID：13354545
> 
> 赞同：0
> 
> 时间：2012-11-13T01:50:42.577
> 
> 标签：java, google-app-engine

使用`DatastoreService`我如何查询`String`包含一些类似于 Java 的字符串`String`：

*   包含
*   以。。开始
*   以。。结束

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T03:50:03.633

在查询字符串属性时，完全匹配是最简单的，因为这种行为“开箱即用”。

“startsWith”查询可以通过转换为 来相当容易地完成`property startsWith: abc`，`property >= 'abc' and property < 'abd'`您可以在其中计算范围的结尾。

“endsWith”可以通过存储字符串的反向副本来完成，并像上面一样创建查询，但目标是反向的。即，`property endsWith: 'abc'`变为 `propertyReversed >= 'cba' 和 propertyReversed < 'cbb'。

“包含”是一个很大的挑战。有几种方法，适合您情况的方法取决于您的情况。如果字符串相对较短（例如，地址的名称），您可以存储尾随子字符串的列表，并使用上述范围查询与它们进行匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T20:58:40.873

正如 Dave 在他的回答中提到的，`contains`它不能作为 Datastore 原语使用。如果您正在寻找包含查询，[搜索 API](https://developers.google.com/appengine/docs/java/search/overview)是一个不错的选择（注意：它仍处于试验阶段）。

# extjs - 在网格面板组标题中隐藏展开/折叠按钮

> ID：13354547
> 
> 赞同：1
> 
> 时间：2012-11-13T01:50:59.067
> 
> 标签：extjs, extjs4

在我的网格中，我想保留分组功能以及`groupHeaderTpl`（当前在标题中显示一些自定义文本），但我想从标题中隐藏 [+/-] 按钮。

我用 CSS 样式尝试过，但没有成功。有人可以帮助我实现这一目标吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T08:41:12.050

像这样实现**[可折叠](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.feature.Grouping-cfg-collapsible)**属性

```
features: [{ftype:'grouping', collapsible : false}] 
```

# java - 实现可比接口作业

> ID：13354548
> 
> 赞同：0
> 
> 时间：2012-11-13T01:50:59.690
> 
> 标签：java

我是计算机编程的初学者，我正在使用 Java。对于我的家庭作业，我被指示根据以下规范创建一个通讯录：

1.  首先，联系人被定义为元组：firstName、lastName、phoneNumber 和 email。

2.  您将创建一个允许获取和设置这些变量的类 Contact 以及一个 toString() 方法和一个 equals() 方法。**Contact 类应该实现 Comparable 接口。**

3.  您将使用静态方法创建一个类 ArrayOperation，该方法对实现 Comparable 接口的对象的一维数组进行排序

4.  接下来，ContactBook 类应该能够搜索、创建和生成包含所有已排序联系人的字符串。

5.  一个主类（随便你怎么称呼它）应该提供一个菜单，询问要创建多少个联系人，然后提供上面的三个选项。

6.  添加时，收集来自用户的输入，ContactBook.addContact(Contact c) 方法将该联系人存储在内存中。

7.  如果用户正在搜索，程序会询问用户所有的联系信息，并使用 equals 方法搜索所需的联系人。当用户按“q”时程序退出

我在实现 Comparable 接口时遇到了麻烦。这是我到目前为止所拥有的：

```
public class Contact implements Comparable
{
  private String firstName, lastName, phoneNumber, email;

  public void setFirstName(String fName){firstName = fName;}
  public void setLastName(String lName){lastName = lName;}
  public void setPhoneNumber(String num){phoneNumber = num;}
  public void setEmail(String email){this.email = email;}

  public String getFirstName(){return firstName;}
  public String getLastName(){return lastName;}
  public String getPhoneNumber(){return phoneNumber;}
  public String getEmail(){return email;}

  public String toString()
  {
    return "First Name: " + firstName +
           "\nLast Name: " + lastName +
           "\nPhone Number: " + phoneNumber +
           "\nEmail: " + email;
  }

  public boolean equals(Contact cont)
  {
    return this.firstName.equals(cont.firstName) &&
           this.lastName.equals(cont.lastName) &&  
           this.phoneNumber.equals(cont.phoneNumber) &&
           this.email.equals(cont.email);
  }

  public int compareTo(Contact cont)
  {
    if(this.firstName.equals(cont.firstName) &&
           this.lastName.equals(cont.lastName) &&  
           this.phoneNumber.equals(cont.phoneNumber) &&
           this.email.equals(cont.email))
      return 0;
    return 1;
  }
} 
```

*   每次我编译代码时，编译器都会显示一个错误，说我的类不是抽象的，即使它不应该是抽象的。
*   另外，坦率地说，我不知道如何处理 compareTo() 方法。我想比较我的 Contact 类的两个实例，但我无法在 compareTo 方法中使用“this.Contact”。
*   最后，我对 compareTo() 方法返回 -1 和 1 时要比较的内容感到困惑。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T01:53:58.403

您需要 `Comparable`在类声明中使用泛型 for 来匹配您正在比较的对象`compareTo`：

```
public class Contact implements Comparable<Contact> { 
```

还要在您的方法中使用String.compareTo ( ) [。](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#compareTo%28java.lang.String%29)这方面的[例子很多](https://stackoverflow.com/questions/369512/best-way-to-compare-objects-by-multiple-fields)。`String.equals()``compareTo`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T02:01:41.223

您的实现`compareTo`没有意义：

```
if(this.firstName.equals(cont.firstName) &&
       this.lastName.equals(cont.lastName) &&  
       this.phoneNumber.equals(cont.phoneNumber) &&
       this.email.equals(cont.email))
  return 0;
return 1; 
```

请记住，它返回一个`int`（可能是 -1、0 或 1），而不是一个`boolean`. 也使用`.compareTo`代替`.equals`那里。`.equals`方法用于相等性检查（表示真或假），而不用于比较（表示小于、等于或大于）。

实现`Comparable`接口的目的是让您可以对对象进行排序，这不会正确地对对象进行排序。

# javascript - Javascript 随机停止工作

> ID：13354549
> 
> 赞同：1
> 
> 时间：2012-11-13T01:51:12.653
> 
> 标签：javascript, html

我无法让我的 Javascript 执行。它昨天随机停止工作，我一直在搞砸试图让它工作。我尝试编写一个简单的代码来查看它是否可以工作，但是我没有运气。这是代码：

HTML：

```
<script type="text/javascript" src="js\hello.js"></script>
<form id="hello" onsubmit="return hello();">
<input type="submit" />
</form> 
```

Javascript（在名为 js 的子文件夹中）：

```
function hello()
{
    alert("HELLO");
    return false;
} 
```

这真的让我很恼火，因为我所有的 Javascript 代码都无法正常工作，但昨天它们工作得非常好。我不确定发生了什么...

我的意思是发出警报，我只是没想到。无论如何它仍然不起作用。就好像它甚至没有调用该函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T01:53:23.320

使用`alert("HELLO");`代替回声。echo 是 PHP 而不是 javascript。

如果要输出到特定标签，请使用`document.getElementById("idOfTag").innerHTML = "HELLO";`

# c# - MVC Dropdownlist 出现问题，不知道如何设置

> ID：13354552
> 
> 赞同：0
> 
> 时间：2012-11-13T01:51:49.627
> 
> 标签：c#, asp.net-mvc, razor

我想创建一个能够设置 ID 的下拉列表（因为我有两个来自同一个视图包）。就像是

```
@Html.DropDownList("startTimes", (SelectList)ViewBag.times, new { @class = "date" })

@Html.DropDownList("endTimes", (SelectList)ViewBag.times, new { @class = "date" }) 
```

现在，我有

> ViewBag.times = getTimeList();
> 
> ```
>  private List<SelectListItem> getTimeList()
>     {
>         List<SelectListItem> times = new List<SelectListItem>();
>         for (int Minutes = 60; Minutes < 770; Minutes += 30)
>         {
>             TimeSpan TS = TimeSpan.FromMinutes(Minutes);
>             String TSString = String.Format("{0:00}:{1:00}", TS.Hours, TS.Minutes);
>             SelectListItem item = new SelectListItem();
>             item.Text = TSString;
>             item.Value = TS.Minutes.ToString();
>             times.Add(item);
>         }
> 
>         return times;
>     } 
> ```

但我收到一个错误：无法将类型“System.Collections.Generic.List”转换为“System.Web.Mvc.SelectList”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T02:40:39.993

干得好

```
@Html.DropDownList("endTimes", new SelectList(ViewBag.times, "Value", "Text"), new { @class = "date" }) 
```

正如错误所述，您需要创建一个新`SelectList`的才能使其正常工作，而不仅仅是从现有的可枚举中转换。`DropDownList`辅助重载应该向您展示这一点。

你也可以用谷歌搜索这个问题并自己找到答案，例如在[这个 SO question](https://stackoverflow.com/questions/7208924/asp-net-mvc-select-list)中。

更新：

现在重新阅读您的问题，您正在谈论`id`为下拉列表设置，这实际上与您的错误无关。`id`将从第一个参数设置为助手`DropDownList`（它是方法中的“名称”参数）。

# c++ - C++ 服务器 - 线程还是不线程？

> ID：13354553
> 
> 赞同：1
> 
> 时间：2012-11-13T01:51:54.790
> 
> 标签：c++, multithreading

我正在使用 C++ 编写的游戏服务器，我正在尝试确定要使用多少线程以及要线程处理哪些任务。基本的服务器骨架由键盘 I/O 和输出到控制台、接受传入连接、发送传出连接和执行游戏“东西”组成。

我想知道的是应该给哪些东西一个单独的线程。每个连接都应该有自己的线程吗？我知道这是可变的，它取决于项目左右，但我希望它能够支持相当数量的玩家（如果可能的话，在数百人中）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T02:06:34.123

标准答案应该始终是：首先尝试最简单的方法，只有在简单的方法不够好时才寻找提高性能的方法。但是，重新构建大型 C++ 程序可能是一种痛苦的经历，因此提前对性能进行一些猜测可能是合适的。

从理论上讲，在现代机器上可能有数百个线程是可以的。我记得，Linux 的 NPTL 实现已经用数万个线程进行了测试。如果这是您实施的最简单方法，那可能是正确的答案。

但是，高性能 Web 服务器和类似服务器通常使用事件驱动模型。考虑一个像[libevent](http://libevent.org/)这样的库。我确信有相同目的的 C++ 库。

我个人认为，没有一流延续的语言，或者至少是协同程序，对于这类工作来说是糟糕的选择，但是 C 语言家族是我们今天完成工作的方式，所以我们走吧。:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T02:08:28.353

一个好的解决方案可能是使用 [Thread pool](http://en.wikipedia.org/wiki/Thread_pool_pattern)。

想法是让主线程在固定数量的线程中公平地调度所有连接。通过良好的设计，您可以轻松设置运行时的线程数。

[您可以在此处](http://en.wikipedia.org/wiki/Producer-consumer_problem)找到更多信息。

* * *

创建多于 CPU 内核的线程是没有效率的，并且添加过多的线程会降低性能，因为在线程之间切换需要时间。
例如，对于编译一个大型项目（它并不完全相同，但对两种情况都有效），通常建议使用的线程数不超过 CPU 内核数 + 1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T02:10:01.540

如果您设置连接并以导致线程阻塞等待 IO 的方式使用它们，那么您应该能够在一个线程上为所有连接和键盘提供服务。您可能不想将控制台输出放在同一个线程上，正如我所看到的情况（至少在 Windows 上），写入控制台的速度实际上是一个瓶颈（即，如果控制台窗口最小化，则进程运行快得多）。

如果您的游戏引擎的工作并行化得很好，那么您可能希望设置使用与 CPU 数量一样多的线程（对于操作系统和其他两个线程）。如果您希望客户端在同一台机器上运行，服务器将希望检测到它并缩减它使用的线程数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T02:00:35.673

一种非常常见的技术是让游戏服务器在一个线程上运行，通过在每个套接字上使用一个选择来监视多个连接（即套接字）。当数据可用时，获取数据并将其放入生产者/消费者类型模型中，以供游戏引擎获取。

这绝不是万能的实现，但它应该足以让您入门。听起来是个很酷的项目。祝你好运！

# c++ - 使用 lower_bound、upper_bound 和 binary_search 查找具有相等成员字段的对象

> ID：13354556
> 
> 赞同：5
> 
> 时间：2012-11-13T01:52:06.647
> 
> 标签：c++, search, stl

我有一个看起来像这样的结构，

```
struct Foo {
    int a;
}; 
```

我有一个看起来像这样的结构的向量，

```
vector<Foo> foos; 
```

所有的`Foo`s 都使用 STL sort() 函数按整数`a`升序排序。现在我想获取`Foo`成员字段`a`小于或等于给定数字的对象，例如 STL lower_bound() 函数。问题是 STL 的 lower_bound 函数声明如下所示：

```
template <class ForwardIterator, class T, class Compare>
  ForwardIterator lower_bound ( ForwardIterator first, ForwardIterator last,
                                const T& value, Compare comp ); 
```

所以当我想做类似的事情时，

```
lower_bound(foos.begin(), foos.end(), 5, custom_comp); 
```

我不能，因为我正在寻找的 int （在这种情况下为 5）不是 type `Foo`。我遇到了lower_bound()、upper_bound() 和binary_search() 的问题。custom_comp 只定义了排序，并没有定义 a = 5 的对象实际上等于 int 5。

用 STL 有什么优雅的方法吗？

编辑：

我意识到我的例子并不能完全代表我的问题。我实际上拥有的是 Foo 包含两个整数，a 和 b。当我调用lower_bound 时，我无权访问b（因为我不关心它）。现在 billz 答案的问题是我必须定义一个仅`a`作为参数的构造函数，这在我看来不是很优雅（因为 b 未定义或任意，并且此构造函数可以在任何地方使用）代码）。但如果这是唯一的选择，我会接受。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T01:55:17.417

你可以为你的 struct Foo 提供一个构造函数

```
struct Foo {
  Foo(int x):a(x){
  }
    int a;
}; 
```

您现在可以致电：

```
std::lower_bound(foos.begin(), foos.end(), 5, custom_comp); 
```

或者

```
std::lower_bound(foos.begin(), foos.end(), Foo(5), custom_comp); 
```

或者

```
Foo f(5);
std::lower_bound(foos.begin(), foos.end(), f, custom_comp); 
```

建议的方法是：

```
struct Foo {
  explicit Foo(int x):a(x){
  }
    int a;
};

std::lower_bound(foos.begin(), foos.end(), Foo(5), custom_comp); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T02:03:10.800

在 C++11 中，您可以使用以下内容：

```
std::lower_bound(foos.begin(), foos.end(), Foo{5},
    [](const Foo& f1, const Foo& f2) { return f1.a < f2.a; }); 
```

或者在 C++03 中：

```
Foo f = {5};
std::lower_bound(foos.begin(), foos.end(), f, custom_comp); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T02:03:03.617

让您的 custom_comp 同时接受`foo`和`int`作为参数。这意味着它要么需要是一个仿函数，要么它可以接受`foo_sort_helper`参数（可以从 an`int`或 a构造`foo`）并对它们进行排序。

或者，明确地说：

```
struct FooSortHelper
{
  int ordering;
  FooSortHelper( Foo const& foo ):ordering(foo.value) {}
  FooSortHelper( int i ): ordering(i) {}
  FooSortHelper( FooSortHelper const& other):ordering(other.ordering) {}
  bool operator<( FooSortHelper const& other ) { return ordering < other.ordering }
};

auto lower = std::lower_bound( vec.begin(), vec.end(), 5,
  []( FooSortHelper left, FooSortHelper right ) {
    return left < right;
  }
); 
```

你看我怎么封装怎么`Foo`排序的`FooSortHelper`？通过允许它从 int 构造，我允许`Foo`与`int`无缝比较。

我提到的另一种方法是创建一个在每对`Foo`and `int`（全部 4 个）上重载 operator() 的类。我觉得上面的更容易。

如果您要排序的类型复制成本很高（例如`std::string`），则`FooSortHelper`可以存储对所述字段的引用。

# objective-c - 如何检查 NSMutableArray 是否有具有相同标志的对象？

> ID：13354558
> 
> 赞同：0
> 
> 时间：2012-11-13T01:52:16.660
> 
> 标签：objective-c

我有一个 Card 对象，它有一个标志 isFlipped。我将它们存储在 NSMutableArray 中。我想检查我的数组中的两个对象是否打开了标志，如果有，我将它们删除。据我了解，我需要遍历数组，但是如何获得另一个带有标志的对象？

```
- (void) checkCards
{
    for (Card *card in cards) {

        if (card.flipped)
        {
            if ( ??? )
            {

            }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T02:05:17.893

将要删除的卡片的索引存储在变量中，如果设置了两个变量的值，则只需删除卡片。请参阅以下内容

```
- (void) checkCards {
    int card1 = -1;
    int card2 = -1;
    for(int i = 0; i < [cards count]; i++) {
        Card *card = [cards objectAtIndex: i];
        if(card.flipped) {
            if(card1 == -1) {
                card1 = i;
            } else {
                card2 = i;
            }

            if(card1 != -1 && card2 != -1) {
                // remove cards
                break;
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T03:14:39.863

我会使用 NSArray 方法，indexesOfObjectsPassingTest:。你可以像这样使用它：

```
 NSIndexSet *indexSet = [cards indexesOfObjectsPassingTest:^BOOL (Card *obj, NSUInteger idx, BOOL *stop) {
        return obj.isFlipped = YES;
    }];
    [cards removeObjectsAtIndexes:indexSet]; 
```

这将删除所有 isFlipped 为 YES 的卡片，因此如果可能超过 2 个，而您只想删除 2 个，则必须遍历 indexSet 并在删除 2 个后停止。

# ios - 在 iOS 中从 Page Curl 呈现 VC 的视图

> ID：13354559
> 
> 赞同：1
> 
> 时间：2012-11-13T01:52:19.640
> 
> 标签：ios, uiviewcontroller, page-curl

这可能在其他地方有所涉及，但我要么没有找到适合/有效的答案，要么只是不了解正在发生的事情。

我有一个带有地图视图的 VC。有一个页面卷曲显示按钮，就像在 iOS 地图应用程序中更改主视图（从地图到列表到网格）。

当我选择页面卷曲下的按钮之一时，如果我要进出地图视图（这实际上只是关闭当前显示的视图控制器），一切正常。但是，如果我尝试从列表到网格或从网格到列表，我会得到：

```
 Attempt to present <a ViewController: 0x9d2f280> on <parent ViewController: 0xc080bd0> whose view is not in the window hierarchy! 
```

我有一个处理程序，比如说，列表视图的 VC 来处理网格按钮单击，它展开页面然后回调父（呈现 VC）来完成工作，这只是：

```
 [self performSegueWithIdentifier:@"mySegue" sender:self]; 
```

逻辑对我来说似乎是正确的，但我不断得到父 VC 视图不在视图层次结构中。

我究竟做错了什么？

# objective-c - 监视特定文件夹的更改并检测 Cocoa 中更改了哪些文件

> ID：13354561
> 
> 赞同：1
> 
> 时间：2012-11-13T01:52:36.653
> 
> 标签：objective-c, cocoa, filesystems, filesystemwatcher

我正在尝试制作一个应用程序，它只监视特定文件夹的更改并输出更改的文件的路径。稍后它将对这些更改的文件进行一些处理。我将如何在原生可可中做到这一点？我尝试过以下所列的内容：http: [//developer.apple.com/library/mac/#featuredarticles/FileSystemEvents/_index.html](http://developer.apple.com/library/mac/#featuredarticles/FileSystemEvents/_index.html)

但我不知道如何有效地完成任务。

代码示例将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-13T11:17:29.817

看看[Peter Hosey](https://stackoverflow.com/users/30461/peter-hosey) 的[fs-notifier](https://bitbucket.org/boredzo/fs-notifier/wiki/Home)

```
@interface Notifier : NSObject {
    NSArray *paths; //Actually just one.
    FSEventStreamRef stream;
    struct FSEventStreamContext context;
}

+ (id) notifierWithCallback:(FSEventStreamCallback)newCallback path:(NSString *)newPath;
- (id) initWithCallback:(FSEventStreamCallback)newCallback path:(NSString *)newPath;

- (void) start;
- (void) stop;

@end
#import "Notifier.h"

@implementation Notifier

+ (id) notifierWithCallback:(FSEventStreamCallback)newCallback path:(NSString *)newPath {
    return [[[self alloc] initWithCallback:newCallback path:newPath] autorelease];
}
- (id) initWithCallback:(FSEventStreamCallback)newCallback path:(NSString *)newPath {
    if((self = [super init])) {
        paths = [[NSArray arrayWithObject:newPath] retain];
        context.version = 0L;
        context.info = newPath;
        context.retain = (CFAllocatorRetainCallBack)CFRetain;
        context.release = (CFAllocatorReleaseCallBack)CFRelease;
        context.copyDescription = (CFAllocatorCopyDescriptionCallBack)CFCopyDescription;

        stream = FSEventStreamCreate(kCFAllocatorDefault, newCallback, &context, (CFArrayRef)paths, kFSEventStreamEventIdSinceNow, /*latency*/ 1.0, kFSEventStreamCreateFlagUseCFTypes);
        if (!stream) {
            NSLog(@"Could not create event stream for path %@", newPath);
            [self release];
            return nil;
        }

        FSEventStreamScheduleWithRunLoop(stream, CFRunLoopGetCurrent(), kCFRunLoopDefaultMode);
    }
    return self;
}

- (void) dealloc {
    [self stop];
    FSEventStreamUnscheduleFromRunLoop(stream, CFRunLoopGetCurrent(), kCFRunLoopDefaultMode);
    CFRelease(stream);
    [super dealloc];
}

- (void) start {
    FSEventStreamStart(stream);
}
- (void) stop {
    FSEventStreamStop(stream);
}

@end

#import "Notifier.h"

static void gotEvent(ConstFSEventStreamRef streamRef, 
                     void *clientCallBackInfo, 
                     size_t numEvents, 
                     void *eventPaths, 
                     const FSEventStreamEventFlags eventFlags[], 
                     const FSEventStreamEventId eventIds[]);

int main (int argc, char **argv) {
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

    NSArray *paths = [[NSProcessInfo processInfo] arguments];

    NSMutableArray *streams = [NSMutableArray arrayWithCapacity:[paths count]];
    for (NSString *path in paths) {
        [streams addObject:[Notifier notifierWithCallback:gotEvent path:path]];
    }

    [streams makeObjectsPerformSelector:@selector(start)];
    CFRunLoopRun();

    [pool drain];
    return EXIT_SUCCESS;
}

static void gotEvent(ConstFSEventStreamRef stream, 
                     void *clientCallBackInfo, 
                     size_t numEvents, 
                     void *eventPathsVoidPointer, 
                     const FSEventStreamEventFlags eventFlags[], 
                     const FSEventStreamEventId eventIds[]
) {
    NSArray *eventPaths = eventPathsVoidPointer;
    NSString *streamName = clientCallBackInfo;
    NSLog(@"%@: %@", streamName, [eventPaths objectAtIndex:0UL]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T16:21:05.703

示例是做你想做的事情的基本方法。

查看[使用 FSEvents 框架](https://developer.apple.com/library/mac/#documentation/Darwin/Conceptual/FSEvents_ProgGuide/UsingtheFSEventsFramework/UsingtheFSEventsFramework.html)文档。它会告诉您启动和运行所需的一切。我在这里给出的代码示例与文档中列出的相同。

# sql - 比较两个字符串的 TSQL 函数

> ID：13354564
> 
> 赞同：1
> 
> 时间：2012-11-13T01:52:56.393
> 
> 标签：sql, sql-server, user-defined-functions

谁能给我一些示例 TSQL 代码来比较两个电子邮件地址以检查它们是否相等？

CLR 函数不是一个选项。我试过了，但我们的 DBA 出于某种原因完全反对在 SSMS 中使用 CLR 函数。

我知道如何从电子邮件地址获取域名（例如：mycompany.com）。

非常感谢任何建议
提前谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-13T06:51:27.430

不太确定你在找什么。根据您的问题，我了解到您需要检查 2 个电子邮件地址的相似性/不相似性。

为什么你不能用这个？

```
declare @email1 varchar(100) set @email1 = 'billg@microsoft.com'
declare @email2 varchar(100) set @email2 = 'melinda@microsoft.com'
IF
@email1=@email2
BEGIN
    PRINT 'Same Email'
END
ELSE
BEGIN
    PRINT 'Not Same Email'
END 
```

拉吉

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-13T09:36:56.910

在 SQL Server 2005+ 中使用函数 CHECKSUM()

CHECKSUM 在其参数列表上计算一个哈希值，称为校验和。哈希值旨在用于构建哈希索引。如果 CHECKSUM 的参数是列，并且在计算的 CHECKSUM 值上构建索引，则结果是哈希索引。这可用于列上的相等搜索。[有关CHECKSUM()](http://msdn.microsoft.com/en-us/library/ms189788.aspx)的更多信息

```
DECLARE @email1 varchar(100) = 'billg@microsoft.com'
DECLARE @email2 varchar(100) = 'melinda@microsoft.com'
SELECT CASE WHEN CHECKSUM(@email1) = CHECKSUM(@email2) THEN 'Same Email' 
                                                       ELSE 'Different Email' END 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-10T20:36:32.303

虽然这是一篇旧文章，但我认为使用 CHECKSUM 评论解决方案很重要。根据定义，校验和属于有限空间，因此具有有限数量的不同值。对于 32 位数字，有 4,294,967,295 个可能的值。我很想说当两个电子邮件地址产生相同的校验和时，只有 4,294,967,295 个可能的值会导致潜在的冲突。Raj 建议的纯字符串比较 (email1 = email2) 可以防止这种冲突，因为电子邮件地址本质上是唯一的。

cf: [ [https://msdn.microsoft.com/en-us/library/ms189788(v=SQL.100).aspx?ranMID=24542&ranEAID=TnL5HPStwNw&ranSiteID=TnL5HPStwNw-pDIZxu_YsTXD2vBagzBEKA&tduid=(e03e708849bdae31622c749be9e951f9)(256380)(2459594)( TnL5HPStwNw-pDIZxu_YsTXD2vBagzBEKA)()][1]](https://msdn.microsoft.com/en-us/library/ms189788(v=SQL.100).aspx?ranMID=24542&ranEAID=TnL5HPStwNw&ranSiteID=TnL5HPStwNw-pDIZxu_YsTXD2vBagzBEKA&tduid=(e03e708849bdae31622c749be9e951f9)(256380)(2459594)(TnL5HPStwNw-pDIZxu_YsTXD2vBagzBEKA)()][1])

[ [http://preshing.com/20110504/hash-collision-probabilities/][2]](http://preshing.com/20110504/hash-collision-probabilities/][2])

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-01-23T13:00:48.207

--patindex() 函数呢？
-- 小例子：

```
create table t1 (tkey integer, val nvarchar(20) )  
create table t2 (tkey integer, val nvarchar(20) )  
insert into t1 (tkey, val) values (1, 'abc' )  
insert into t1 (tkey, val) values (2, 'efgh' )  
insert into t1 (tkey, val) values (3, 'xyz' )  

insert into t2 (tkey, val) values (1, 'abc' )  
insert into t2 (tkey, val) values (2, '  efgh' )  
insert into t2 (tkey, val) values (3, 'xy z' )  

select t1.val, t2.val, patindex( t1.val, t2.val )  
from t1, t2  
where t1.tkey = t2.tkey 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-13T02:23:35.837

测试两个电子邮件地址是否具有相同的域：

```
declare @email1 varchar(100) set @email1 = 'billg@microsoft.com'
declare @email2 varchar(100) set @email2 = 'melinda@microsoft.com'

select 
  case when 
    right(@email1, len(@email1) - charindex('@', @email1)) =
    right(@email2, len(@email2) - charindex('@', @email2))
  then 'Same domain'
  else 'Different domains'
  end 
```

# ios - 旋转在 iOS5 故事板中不起作用

> ID：13354566
> 
> 赞同：1
> 
> 时间：2012-11-13T01:53:06.893
> 
> 标签：ios, xcode, cocoa-touch

我正在开发一个故事板应用程序，并且旋转适用于 iOS6 设备，但是当我在我的 iOS5 设备上运行它时，它不会旋转。我在导航控制器中嵌入了一个视图控制器（因此导航控制器是窗口的根视图控制器），并且我覆盖了以下方法：

```
- (BOOL)shouldAutorotate
{
    return YES;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return UIInterfaceOrientationLandscapeRight;
}

- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskLandscapeRight|UIInterfaceOrientationMaskLandscapeLeft|UIInterfaceOrientationMaskPortrait;
}

-(BOOL)shouldAutoRotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{

     if ((interfaceOrientation == UIInterfaceOrientationLandscapeLeft) || (interfaceOrientation == UIInterfaceOrientationLandscapeRight) || (interfaceOrientation ==UIInterfaceOrientationPortrait)){
        return YES;
     } else {
         return NO;
     }
} 
```

我的 plist 中也允许 3 个方向，我的部署目标是 iOS5，基本 SDK iOS6 和自动布局已关闭，以及为什么这不起作用？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T03:02:54.260

你的评论让我仔细看了看。这是因为你在自转中有一个大写的“R”。

将您的方法名称更改为： `shouldAutorotateToInterfaceOrientation:`

# html - 如何扩展网站以适应 iPhone/iPad/Android 手机/Android 平板电脑屏幕？

> ID：13354574
> 
> 赞同：0
> 
> 时间：2012-11-13T01:53:40.863
> 
> 标签：html

我正在使用这个视口标签：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
```

然而，iPhone/iPad/Android 设备的页面比屏幕大得多。我只能看到网站的左上角。我的网站宽 900 像素。

接下来我将视口更改为：

```
<meta name="viewport" content="width=device-width"> 
```

现在在 iPhone 和 iPad 上，内容被缩小以填满屏幕，结果还可以。我不确定 iPad，因为我没有其中一个可以测试。在 Android 设备上，此更改没有任何作用。

设置视口以使网站填充浏览器宽度的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T05:27:27.757

尝试添加`target-densitydpi=device-dpi`到您的第二个示例。这是特定于 Android 的，`width=device-width`用于告诉设备您希望缩放页面以适应所有设备分辨率。

# css - 带有字体真棒图标的自定义 li 列表样式

> ID：13354578
> 
> 赞同：176
> 
> 时间：2012-11-13T01:54:08.263
> 
> 标签：css, html-lists, font-awesome

我想知道是否可以利用 font-awesome（或任何其他标志性字体）类来创建自定义`<li>`列表样式类型？

我目前正在使用 jQuery 来执行此操作，即：

```
$("li.myClass").prepend("<i class=\"icon-chevron-right\"></i>"); 
```

`<li>`但是，当文本环绕页面时，这不会正确设置样式，因为它认为图标是文本的一部分，而不是实际的项目符号指示符。

有小费吗？

* * *

## 回答 #1

> 赞同：366
> 
> 时间：2012-11-13T02:12:43.423

[CSS Lists and Counters Module Level 3](http://www.w3.org/TR/css3-lists/#marker-pseudoelement)引入了伪`::marker`元素。据我了解，它会允许这样的事情。[不幸的是，似乎没有浏览器支持它](http://caniuse.com/#search=%3A%3Amarker)。

您可以做的是向父级添加一些填充`ul`并将图标拉到该填充中：

```
ul {
  list-style: none;
  padding: 0;
}
li {
  padding-left: 1.3em;
}
li:before {
  content: "\f00c"; /* FontAwesome Unicode */
  font-family: FontAwesome;
  display: inline-block;
  margin-left: -1.3em; /* same as padding-left set on li */
  width: 1.3em; /* same as padding-left set on li */
}
```

```
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<ul>
  <li>Item one</li>
  <li>Item two</li>
</ul>
```

根据您的喜好调整填充/字体大小/等，就是这样。

您可以也应该将间距单位放在 css 变量中，而不是在整个代码中重复它。

=====

这适用于任何类型的标志性字体。然而，FontAwesome 提供了他们自己的方式来处理这个“问题”。查看下面 Darrrrrren 的答案以获取更多详细信息。

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2015-06-09T20:14:26.200

根据[字体真棒文档](https://fontawesome.com/how-to-use/on-the-web/styling/icons-in-a-list)：

```
<ul class="fa-ul">
  <li><i class="fa-li fa fa-check"></i>Barbabella</li>
  <li><i class="fa-li fa fa-check"></i>Barbaletta</li>
  <li><i class="fa-li fa fa-check"></i>Barbalala</li>
</ul> 
```

或者，使用 Jade：

```
ul.fa-ul
  li
    i.fa-li.fa.fa-check
    | Barbabella
  li
    i.fa-li.fa.fa-check
    | Barbaletta
  li
    i.fa-li.fa.fa-check
    | Barbalala 
```

* * *

## 回答 #3

> 赞同：52
> 
> 时间：2013-06-21T15:41:48.003

我想提供一个替代的、更简单的特定于 FontAwesome 的解决方案。如果您使用不同的标志性字体，JOPLOmacedo 的答案仍然非常适合使用。

[FontAwesome 现在使用 CSS 类在内部处理列表样式](https://fontawesome.com/how-to-use/on-the-web/styling/icons-in-a-list)。

这是官方的例子：

```
<ul class="fa-ul">
  <li><span class="fa-li"><i class="fas fa-check-square"></i></span>List icons can</li>
  <li><span class="fa-li"><i class="fas fa-check-square"></i></span>be used to</li>
  <li><span class="fa-li"><i class="fas fa-spinner fa-pulse"></i></span>replace bullets</li>
  <li><span class="fa-li"><i class="far fa-square"></i></span>in lists</li>
</ul> 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-12-19T19:12:49.450

我想补充一下 JOPLOmacedo 的答案。他的解决方案是我最喜欢的，但是当 li 有不止一行时，我总是遇到缩进问题。找到带有边距等的正确缩进是很繁琐的。但这可能只与我有关。

对我来说，`:before`伪元素的绝对定位效果最好。我在 ul 上设置，元素`padding-left`左侧的负位置，与 ul 的相同。为了获得内容与元素的距离，我只需将li 设置为。当然， li 必须具有相对位置。例如`:before``padding-left``:before``padding-left`

```
ul {
  margin: 0 0 1em 0;
  padding: 0 0 0 1em;
  /* make space for li's :before */
  list-style: none;
}

li {
  position: relative;
  padding-left: 0.4em;
  /* text distance to icon */
}

li:before {
  font-family: 'my-icon-font';
  content: 'character-code-here';
  position: absolute;
  left: -1em;
  /* same as ul padding-left */
  top: 0.65em;
  /* depends on character, maybe use padding-top instead */
  /*  .... more styling, maybe set width etc ... */
} 
```

希望这很清楚，并且对我以外的其他人有一些价值。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-07-15T20:55:18.613

我做了两件受@OscarJovanny 评论启发的事情，还有一些技巧。

步骤1：

*   [从Here](https://fontawesome.com/icons/check-circle?style=solid)下载图标文件为 svg ，因为我只需要来自 font awesome 的这个图标

第2步：

```
<style>
ul {
    list-style-type: none;
    margin-left: 10px;
}

ul li {
    margin-bottom: 12px;
    margin-left: -10px;
    display: flex;
    align-items: center;
}

ul li::before {
    color: transparent;
    font-size: 1px;
    content: " ";
    margin-left: -1.3em;
    margin-right: 15px;
    padding: 10px;
    background-color: orange;
    -webkit-mask-image: url("./assets/img/check-circle-solid.svg");
    -webkit-mask-size: cover;
}
</style> 
```

**结果**

![在此处输入图像描述](../Images/d2700add9886720e42f27f8b840d11b7.png)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-11-27T22:48:55.400

我是这样做的：

```
li {
  list-style: none;
  background-image: url("./assets/img/control.svg");
  background-repeat: no-repeat;
  background-position: left center;
} 
```

或者如果你想改变颜色，你可以试试这个：

```
li::before {
  content: "";
  display: inline-block;
  height: 10px;
  width: 10px;
  margin-right: 7px;

  background-color: orange;
  -webkit-mask-image: url("./assets/img/control.svg");
  -webkit-mask-size: cover;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-30T06:14:07.340

请参阅参考：[https ://fontawesome.com/v5.15/how-to-use/on-the-web/styling/icons-in-a-list](https://fontawesome.com/v5.15/how-to-use/on-the-web/styling/icons-in-a-list)

```
<ul class="fa-ul">
  <li><span class="fa-li"><i class="fas fa-check-square"></i></span>List icons can</li>
  <li><span class="fa-li"><i class="fas fa-check-square"></i></span>be used to</li>
  <li><span class="fa-li"><i class="fas fa-spinner fa-pulse"></i></span>replace bullets</li>
  <li><span class="fa-li"><i class="far fa-square"></i></span>in lists</li>
</ul> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-08-31T08:43:14.310

这是我的版本：[FontAwesome 5 ul](https://jsfiddle.net/fredericklim/23vLynao/2/)

```
ul {
  list-style-position: inside;
  padding-left: 0;
}
ul li {
  list-style: none;
  position: relative;
  padding-left: 20px;
}
ul li::before {
  position: absolute;
  top: calc(50% - 4px); /* half font-size */
  left: 0px;
  font-family: "Font Awesome 5 Free";
  content: "\f111";
  font-size: 8px;
  font-weight: 900;
}
```

```
<script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
<ul>
  <li>Line 1</li>
  <li>Line 2</li>
  <li>Line 3</li>
  <li>Line 4</li>
  <li>Line 5</li>
</ul>
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-11-05T18:54:59.810

现在该`::marker`元素在[常绿](https://en.wikipedia.org/wiki/Evergreen_(software)) [浏览器](https://caniuse.com/?search=%3A%3Amarker)中可用，这就是您可以使用它的方式，包括`:hover`用于更改标记。如您所见，现在您可以使用任何您想要的 Unicode 字符作为列表项标记，甚至可以使用自定义计数器。

```
@charset "UTF-8";
@counter-style fancy {
  system: fixed;
  symbols:   ;
  suffix: " ";
}

p {
  margin-left: 8em;
}

p.note {
  display: list-item;
  counter-increment: note-counter;
}

p.note::marker {
  content: "Note " counter(note-counter) ":";
}

ol {
  margin-left: 8em;
  padding-left: 0;
}

ol li {
  list-style-type: lower-roman;
}

ol li::marker {
  color: blue;
  font-weight: bold;
}

ul {
  margin-left: 8em;
  padding-left: 0;
}

ul.happy li::marker {
  content: "";
}

ul.happy li:hover {
  color: blue;
}

ul.happy li:hover::marker {
  content: "";
}

ul.fancy {
  list-style: fancy;
}
```

```
<p>This is the first paragraph in this document.</p>
<p class="note">This is a very short document.</p>
<ol>
  <li>This is the first item.
    <li>This is the second item.
      <li>This is the third item.
</ol>
<p>This is the end.</p>

<ul class="happy">
  <li>Item 1</li>
  <li>Item 2</li>
  <li>Item 3</li>
</ul>

<ul class="fancy">
  <li>Item 1</li>
  <li>Item 2</li>
  <li>Item 3</li>
</ul>
```

# c# - 保持对下一个按钮的关注

> ID：13354581
> 
> 赞同：0
> 
> 时间：2012-11-13T01:54:26.470
> 
> 标签：c#, winforms

希望有一个非常简单的解决方案。

我有一个程序，用户必须单击下一步才能完成设置过程。

当用户在文本框中输入信息时，保持对下一个按钮的关注的最佳方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T01:59:01.433

好吧，这取决于设计，但将按钮标记为“默认”应该不是问题。如果我没记错的话，在winforms中它被称为“AcceptButton”。

[http://msdn.microsoft.com/en-us/library/system.windows.forms.form.acceptbutton%28v=VS.100%29.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.acceptbutton%28v=VS.100%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T03:32:40.743

一种解决方法是处理每个文本框的返回键。所以当用户按下回车键时，它可以模拟按下下一步按钮。

首先将下一个按钮中的代码移动到空白处。

```
private void GoNext()
        {
            //Do something
        }

private void btnNext_Click(object sender, EventArgs e)
        {
            GoNext();
        } 
```

现在处理按键。

```
 private void textBox1_KeyDown(object sender, KeyEventArgs e)
        {
            if (e.KeyCode == Keys.Return)
            {
                e.Handled = true;
                GoNext();

            }
        } 
```

出于视觉目的，您还可以在下一个按钮的丢失焦点事件中绘制焦点矩形。

# asp.net-mvc - 为什么我的视图操作链接包括 MVC3 中的当前操作参数

> ID：13354582
> 
> 赞同：0
> 
> 时间：2012-11-13T01:54:33.137
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4, asp.net-mvc-routing, asp.net-mvc-areas

我正在开发一个 MVC3 应用程序。

在我看来，我正在使用@Html.ActionLink 作为锚链接。一切正常。但是这些链接在链接中包含当前 url 的参数。

如果我当前的链接是`http://localhost:25466/Blog/all/2`

正在生成的操作链接是`http://localhost:25466/Blog/Blog/shoes/2`

在上面的链接中，实际上我没有做任何事情来在 url 中包含“2”。但它仍在被添加。

我的路线配置是

```
routes.MapRoute(
                "Blog", "Blog/Blog/{tag}/{id}",
            new { controller = "Blog", action = "Blog", tag = UrlParameter.Optional,id="1" }
            );

            routes.MapRoute(
                name: "Default",
                url: "{controller}/{action}/{id}",
                defaults: new { controller = "Home", action = "Index", id = "1" },
                constraints: new { id = @"\d+" }
            ); 
```

而我的行动是

```
 public ActionResult All(int id)
        {
            var context = new BlogCore.DbContext.BlogContext();
            var list = context.Get(id,20);
            return View(list);
        }

        public ActionResult Blog(string tag,int id)
        {
            var context = new BlogCore.DbContext.BlogContext();
            var list = context.Get(HttpUtility.UrlEncode(tag), id, 20);
            return View("All", list);
        } 
```

这就是我使用 actionlink 生成锚链接的方式

```
@Html.ActionLink(blog.PostTitle, "Blog", "Blog", new { tag = blog.PostRewriteName }, null) 
```

如何在操作链接中避免 2。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T02:11:50.100

我认为您必须明确设置该参数，例如：

```
@Html.ActionLink(blog.PostTitle, "Blog", "Blog", new { tag = blog.PostRewriteName, id = 1 }, null) 
```

我相信在使用 ActionLink 创建链接时会考虑实际的视图字典。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T07:23:01.573

MVC 将在查找生成 url 的路由时使用当前查询字符串中的任何变量。所以你的变量 id 将被包括在内。为避免这种情况，您需要在传递给 ActionLink 帮助器的 routedata 中显式设置 id 为 null：

```
@Html.ActionLink(blog.PostTitle, "Blog", "Blog", new { tag = blog.PostRewriteName, id = null }, null) 
```

# xml - 如何使用xslt从每条记录中获取基于另一个元素值的元素值

> ID：13354583
> 
> 赞同：1
> 
> 时间：2012-11-13T01:54:34.050
> 
> 标签：xml, xslt, tibco

我需要根据每条记录中的另一个元素值获取一个元素值。我必须根据第二个元素值将它们分为两组。标准：

如果 RECORD_TYPE='WARNING' 那么我必须打印 WARNINGS:ERROR_DESC 下所有记录的所有 ERROR_DESC 值 如果 RECORD_TYPE='ERROR' 然后我必须打印 ERRORS:ERROR_DESC 下所有记录的所有 ERROR_DESC 值

每个错误描述都应打印在新行中。

```
<root>
<SellOutErrorRecord>
        <RECORD_TYPE>WARNING</RECORD_TYPE>
        <ERROR_DESC>record 1:location id is invalid</ERROR_DESC>
        <RECORD_NO>1</RECORD_NO>
        <LOCATION_NAME>XYZ el</LOCATION_NAME>
        <PRODUCT_NUMBER>336549R-001</PRODUCT_NUMBER>
        <PRODUCT_OPTION>0D1</PRODUCT_OPTION>
        <PRODUCT_LINE>LA</PRODUCT_LINE>
    </SellOutErrorRecord>
    <SalesInErrorRecord>
        <RECORD_TYPE>ERROR</RECORD_TYPE>
        <ERROR_DESC>record 1:location id is invalid</ERROR_DESC>
        <RECORD_NO>1</RECORD_NO>
        <LOCATION_NAME>XYZ el</LOCATION_NAME>
        <PRODUCT_NUMBER>336549R-001</PRODUCT_NUMBER>
        <PRODUCT_OPTION>0D1</PRODUCT_OPTION>
        <PRODUCT_LINE>LA</PRODUCT_LINE>
        <PRODUCT_LINE_TYPE>C</PRODUCT_LINE_TYPE>
    </SalesInErrorRecord>
    <SellOutErrorRecord>
        <RECORD_TYPE>ERROR</RECORD_TYPE>
        <ERROR_DESC>record 2:SO:invoiced net amount is invalid</ERROR_DESC>
        <RECORD_NO>2</RECORD_NO>
        <LOCATION_NAME>XYZ el</LOCATION_NAME>
        <PRODUCT_NUMBER>3X-KN73C-DB</PRODUCT_NUMBER>
        <PRODUCT_OPTION>0D1</PRODUCT_OPTION>
        <PRODUCT_LINE>HA</PRODUCT_LINE>
        <PRODUCT_LINE_TYPE>E</PRODUCT_LINE_TYPE>
    </SellOutErrorRecord>
    <SellOutErrorRecord>
        <RECORD_TYPE>ERROR</RECORD_TYPE>
        <ERROR_DESC>record 3:SO:transaction currency is invalid</ERROR_DESC>
        <RECORD_NO>3</RECORD_NO>
        <LOCATION_NAME>XYZ el</LOCATION_NAME>
        <PRODUCT_NUMBER>339112-B25</PRODUCT_NUMBER>
        <PRODUCT_OPTION>0D1</PRODUCT_OPTION>
        <PRODUCT_LINE>J3</PRODUCT_LINE>
        <PRODUCT_LINE_TYPE>E</PRODUCT_LINE_TYPE>
    </SellOutErrorRecord>
    <SalesInErrorRecord>
        <RECORD_TYPE>WARNING</RECORD_TYPE>
        <ERROR_DESC>record 3:SI:buy quantity is zero</ERROR_DESC>
        <RECORD_NO>3</RECORD_NO>
        <LOCATION_NAME>XYZ el</LOCATION_NAME>
        <PRODUCT_NUMBER>339112-B25</PRODUCT_NUMBER>
        <PRODUCT_OPTION>0D1</PRODUCT_OPTION>
        <PRODUCT_LINE>J3</PRODUCT_LINE>
        <PRODUCT_LINE_TYPE>E</PRODUCT_LINE_TYPE>
    </SalesInErrorRecord>
    <SalesInErrorRecord>
        <RECORD_TYPE>ERROR</RECORD_TYPE>
        <ERROR_DESC>record 3:SI:transaction document id is invalid</ERROR_DESC>
        <RECORD_NO>3</RECORD_NO>
        <LOCATION_NAME>XYZ el</LOCATION_NAME>
        <PRODUCT_NUMBER>339112-B25</PRODUCT_NUMBER>
        <PRODUCT_OPTION>0D1</PRODUCT_OPTION>
        <PRODUCT_LINE>J3</PRODUCT_LINE>
        <PRODUCT_LINE_TYPE>E</PRODUCT_LINE_TYPE>
    </SalesInErrorRecord>
    <SellOutErrorRecord>
        <RECORD_TYPE>WARNING</RECORD_TYPE>
        <ERROR_DESC>record 4:SO:invoiced net amount is invalid</ERROR_DESC>
        <RECORD_NO>4</RECORD_NO>
        <LOCATION_NAME>XYZ el</LOCATION_NAME>
        <PRODUCT_NUMBER>445860-B21</PRODUCT_NUMBER>
        <PRODUCT_OPTION>0D1</PRODUCT_OPTION>
        <PRODUCT_LINE>MV</PRODUCT_LINE>
        <PRODUCT_LINE_TYPE>C</PRODUCT_LINE_TYPE>
    </SellOutErrorRecord>
    <SalesInErrorRecord>
        <RECORD_TYPE>ERROR</RECORD_TYPE>
        <ERROR_DESC>record 5:SI:transaction currency is null or invalid</ERROR_DESC>
        <RECORD_NO>5</RECORD_NO>
        <LOCATION_NAME>XYZ el</LOCATION_NAME>
        <PRODUCT_NUMBER>339112-B25</PRODUCT_NUMBER>
        <PRODUCT_OPTION>0D1</PRODUCT_OPTION>
        <PRODUCT_LINE>J3</PRODUCT_LINE>
        <PRODUCT_LINE_TYPE>E</PRODUCT_LINE_TYPE>
    </SalesInErrorRecord>
    <InventoryErrorRecord>
        <RECORD_TYPE>ERROR</RECORD_TYPE>
        <ERROR_DESC>record 6:product id is invalid</ERROR_DESC>
        <RECORD_NO>6</RECORD_NO>
        <LOCATION_NAME>XYZ XYZ</LOCATION_NAME>
        <PRODUCT_NUMBER>331184-B21</PRODUCT_NUMBER>
        <PRODUCT_OPTION>0S1</PRODUCT_OPTION>
        <PRODUCT_LINE>R8</PRODUCT_LINE>
        <PRODUCT_LINE_TYPE>E</PRODUCT_LINE_TYPE>
    </InventoryErrorRecord>
    <SellOutErrorRecord>
        <RECORD_TYPE>ERROR</RECORD_TYPE>
        <ERROR_DESC>record 6:SO:invoiced net amount is invalid</ERROR_DESC>
        <RECORD_NO>6</RECORD_NO>
        <LOCATION_NAME>XYZ el</LOCATION_NAME>
        <PRODUCT_NUMBER>339112-B25</PRODUCT_NUMBER>
        <PRODUCT_OPTION>0D1</PRODUCT_OPTION>
        <PRODUCT_LINE>J3</PRODUCT_LINE>
        <PRODUCT_LINE_TYPE>E</PRODUCT_LINE_TYPE>
</SellOutErrorRecord>
</root> 
```

预期的输出是

```
ERRORS:
<ERROR>record 1:location id is invalid</ERROR>
<ERROR>record 2:SO:invoiced net amount is invalid</ERROR>
<ERROR>record 3:SO:transaction currency is invalid</ERROR>
<ERROR>record 3:SI:transaction document id is invalid</ERROR>
<ERROR>record 5:SI:transaction currency is null or invalid</ERROR>
<ERROR>record 6:product id is invalid</ERROR>
<ERROR>record 6:SO:invoiced net amount is invalid</ERROR>

WARNINGS:
<ERROR>record 1:location id is invalid</ERROR>
<ERROR>record 3:SI:buy quantity is zero</ERROR>
<ERROR>record 4:SO:invoiced net amount is invalid</ERROR> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T02:53:09.987

**This transformation:**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*">
     <xsl:apply-templates select="*[RECORD_TYPE = 'ERROR']"/>
     <xsl:apply-templates select="*[RECORD_TYPE = 'WARNING']"/>
 </xsl:template>

 <xsl:template match="root/*">
  <xsl:if test="position() = 1">
   <xsl:value-of select="concat('&#xA;', '&#xA;', RECORD_TYPE, 'S:', '&#xA;')"/>
  </xsl:if>
  <ERROR><xsl:value-of select="ERROR_DESC"/></ERROR>
 </xsl:template>
</xsl:stylesheet> 
```

**when applied on the provided XML document:**

```
<root>
    <SellOutErrorRecord>
        <RECORD_TYPE>WARNING</RECORD_TYPE>
        <ERROR_DESC>record 1:location id is invalid</ERROR_DESC>
        <RECORD_NO>1</RECORD_NO>
        <LOCATION_NAME>XYZ el</LOCATION_NAME>
        <PRODUCT_NUMBER>336549R-001</PRODUCT_NUMBER>
        <PRODUCT_OPTION>0D1</PRODUCT_OPTION>
        <PRODUCT_LINE>LA</PRODUCT_LINE>
    </SellOutErrorRecord>
    <SalesInErrorRecord>
        <RECORD_TYPE>ERROR</RECORD_TYPE>
        <ERROR_DESC>record 1:location id is invalid</ERROR_DESC>
        <RECORD_NO>1</RECORD_NO>
        <LOCATION_NAME>XYZ el</LOCATION_NAME>
        <PRODUCT_NUMBER>336549R-001</PRODUCT_NUMBER>
        <PRODUCT_OPTION>0D1</PRODUCT_OPTION>
        <PRODUCT_LINE>LA</PRODUCT_LINE>
        <PRODUCT_LINE_TYPE>C</PRODUCT_LINE_TYPE>
    </SalesInErrorRecord>
    <SellOutErrorRecord>
        <RECORD_TYPE>ERROR</RECORD_TYPE>
        <ERROR_DESC>record 2:SO:invoiced net amount is invalid</ERROR_DESC>
        <RECORD_NO>2</RECORD_NO>
        <LOCATION_NAME>XYZ el</LOCATION_NAME>
        <PRODUCT_NUMBER>3X-KN73C-DB</PRODUCT_NUMBER>
        <PRODUCT_OPTION>0D1</PRODUCT_OPTION>
        <PRODUCT_LINE>HA</PRODUCT_LINE>
        <PRODUCT_LINE_TYPE>E</PRODUCT_LINE_TYPE>
    </SellOutErrorRecord>
    <SellOutErrorRecord>
        <RECORD_TYPE>ERROR</RECORD_TYPE>
        <ERROR_DESC>record 3:SO:transaction currency is invalid</ERROR_DESC>
        <RECORD_NO>3</RECORD_NO>
        <LOCATION_NAME>XYZ el</LOCATION_NAME>
        <PRODUCT_NUMBER>339112-B25</PRODUCT_NUMBER>
        <PRODUCT_OPTION>0D1</PRODUCT_OPTION>
        <PRODUCT_LINE>J3</PRODUCT_LINE>
        <PRODUCT_LINE_TYPE>E</PRODUCT_LINE_TYPE>
    </SellOutErrorRecord>
    <SalesInErrorRecord>
        <RECORD_TYPE>WARNING</RECORD_TYPE>
        <ERROR_DESC>record 3:SI:buy quantity is zero</ERROR_DESC>
        <RECORD_NO>3</RECORD_NO>
        <LOCATION_NAME>XYZ el</LOCATION_NAME>
        <PRODUCT_NUMBER>339112-B25</PRODUCT_NUMBER>
        <PRODUCT_OPTION>0D1</PRODUCT_OPTION>
        <PRODUCT_LINE>J3</PRODUCT_LINE>
        <PRODUCT_LINE_TYPE>E</PRODUCT_LINE_TYPE>
    </SalesInErrorRecord>
    <SalesInErrorRecord>
        <RECORD_TYPE>ERROR</RECORD_TYPE>
        <ERROR_DESC>record 3:SI:transaction document id is invalid</ERROR_DESC>
        <RECORD_NO>3</RECORD_NO>
        <LOCATION_NAME>XYZ el</LOCATION_NAME>
        <PRODUCT_NUMBER>339112-B25</PRODUCT_NUMBER>
        <PRODUCT_OPTION>0D1</PRODUCT_OPTION>
        <PRODUCT_LINE>J3</PRODUCT_LINE>
        <PRODUCT_LINE_TYPE>E</PRODUCT_LINE_TYPE>
    </SalesInErrorRecord>
    <SellOutErrorRecord>
        <RECORD_TYPE>WARNING</RECORD_TYPE>
        <ERROR_DESC>record 4:SO:invoiced net amount is invalid</ERROR_DESC>
        <RECORD_NO>4</RECORD_NO>
        <LOCATION_NAME>XYZ el</LOCATION_NAME>
        <PRODUCT_NUMBER>445860-B21</PRODUCT_NUMBER>
        <PRODUCT_OPTION>0D1</PRODUCT_OPTION>
        <PRODUCT_LINE>MV</PRODUCT_LINE>
        <PRODUCT_LINE_TYPE>C</PRODUCT_LINE_TYPE>
    </SellOutErrorRecord>
    <SalesInErrorRecord>
        <RECORD_TYPE>ERROR</RECORD_TYPE>
        <ERROR_DESC>record 5:SI:transaction currency is null or invalid</ERROR_DESC>
        <RECORD_NO>5</RECORD_NO>
        <LOCATION_NAME>XYZ el</LOCATION_NAME>
        <PRODUCT_NUMBER>339112-B25</PRODUCT_NUMBER>
        <PRODUCT_OPTION>0D1</PRODUCT_OPTION>
        <PRODUCT_LINE>J3</PRODUCT_LINE>
        <PRODUCT_LINE_TYPE>E</PRODUCT_LINE_TYPE>
    </SalesInErrorRecord>
    <InventoryErrorRecord>
        <RECORD_TYPE>ERROR</RECORD_TYPE>
        <ERROR_DESC>record 6:product id is invalid</ERROR_DESC>
        <RECORD_NO>6</RECORD_NO>
        <LOCATION_NAME>XYZ XYZ</LOCATION_NAME>
        <PRODUCT_NUMBER>331184-B21</PRODUCT_NUMBER>
        <PRODUCT_OPTION>0S1</PRODUCT_OPTION>
        <PRODUCT_LINE>R8</PRODUCT_LINE>
        <PRODUCT_LINE_TYPE>E</PRODUCT_LINE_TYPE>
    </InventoryErrorRecord>
    <SellOutErrorRecord>
        <RECORD_TYPE>ERROR</RECORD_TYPE>
        <ERROR_DESC>record 6:SO:invoiced net amount is invalid</ERROR_DESC>
        <RECORD_NO>6</RECORD_NO>
        <LOCATION_NAME>XYZ el</LOCATION_NAME>
        <PRODUCT_NUMBER>339112-B25</PRODUCT_NUMBER>
        <PRODUCT_OPTION>0D1</PRODUCT_OPTION>
        <PRODUCT_LINE>J3</PRODUCT_LINE>
        <PRODUCT_LINE_TYPE>E</PRODUCT_LINE_TYPE>
    </SellOutErrorRecord>
</root> 
```

**produces the wanted, correct result:**

```
ERRORS:
<ERROR>record 1:location id is invalid</ERROR>
<ERROR>record 2:SO:invoiced net amount is invalid</ERROR>
<ERROR>record 3:SO:transaction currency is invalid</ERROR>
<ERROR>record 3:SI:transaction document id is invalid</ERROR>
<ERROR>record 5:SI:transaction currency is null or invalid</ERROR>
<ERROR>record 6:product id is invalid</ERROR>
<ERROR>record 6:SO:invoiced net amount is invalid</ERROR>

WARNINGS:
<ERROR>record 1:location id is invalid</ERROR>
<ERROR>record 3:SI:buy quantity is zero</ERROR>
<ERROR>record 4:SO:invoiced net amount is invalid</ERROR> 
```

# sql - 如何使用 SQLDEV 中的 PL/SQL 高级脚本创建将表从另一个模式复制到我的模式的脚本？

> ID：13354585
> 
> 赞同：1
> 
> 时间：2012-11-13T01:54:44.173
> 
> 标签：sql

因此，我正在尝试创建一个脚本，该脚本将生成 SQL 代码，用于将表从 HR 模式复制到我自己的模式中。

到目前为止我得到的是这个，但它是不正确的......有人会帮助我或给我提示吗？

```
select 'create table ' || USER_TABLES || '_copy as select *  from ' || USER_TABLES || ';'from hr_tables; 
```

请帮助我，我是新手，非常绝望。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T01:58:34.010

尝试这个：

```
SELECT 'CREATE TABLE ' ||table_name || '_copy AS SELECT *  FROM ' || table_name || ';'
  FROM all_tables
 WHERE OWNER = 'HR'; 
```

# jquery - 如何从左侧知道 margin-left 自动像素？

> ID：13354586
> 
> 赞同：0
> 
> 时间：2012-11-13T01:54:55.530
> 
> 标签：jquery

我正在使用 jQuery mousemove 逐个图像跟踪光标（我只为一个 div 执行此操作）。我将整个页面居中（左边距：自动；右边距：自动；）。但是问题来了：

```
$('.friendSelection').mousemove(function(e){
                $('.follow').show();
                $(".follow").css({left:e.pageX-690, top:e.pageY-30});}); 
```

e.pageX 给出的不是主 div 的 x 轴，而是整个页面的 x 轴（并且图像离光标真的很远）。现在如果用户有更大的屏幕，那么我必须知道有多少像素，margin-left auto 移动了整个页面，以更改光标位置（ $(".follow").css({left:e.pageX-690,顶部：e.pageY-30}））。有任何想法吗？

PS我的html代码：

```
<html>
<body>
<div class="mainBody">
<div class="friendSelection">
<div class="friend" id="1"></div>
<div class="friend" id="2"></div>
<div class="friend" id="3"></div>
</div>
<div class="follow"></div>
</div>
</body>
</html> 
```

那些朋友类总是从上到下下降，这是我的跟随图像是 115x185px 并且当鼠标移动时图像跟随它，但是如果鼠标在整个图像中移动则图像不跟随光标

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T02:45:06.923

试试这个...

这是一个有效的[**FIDDLE**](http://jsfiddle.net/videsignz/7a6qS/)

```
$("body").on({

    mousemove: function(e){
         $('.follow').fadeIn(500).css({'left' : e.pageX, 'top' : e.pageY});
     },

    mouseout: function(e){
         $('.follow').fadeOut(500);
     }

}, ".friendSelection" ); 
```

您还可以将“.follow”元素放在光标的中心，并将此功能用于多个“.friendSelection”元素。

[**小提琴**](http://jsfiddle.net/videsignz/7a6qS/2/)

# python - python：通过海报在stringIO中发布数据？

> ID：13354589
> 
> 赞同：3
> 
> 时间：2012-11-13T01:55:44.280
> 
> 标签：python, post, stringio

```
params = {'file': open("test.txt", "rb"), 'name': 'upload test'}
datagen, headers = poster.encode.multipart_encode(params)
request = urllib2.Request(upload_url, datagen, headers)
result = urllib2.urlopen(request) 
```

我使用海报库来发布 HTTP。它运作良好。我对此很满意。

但我想尝试一些东西。如您在上面看到的，要发送文件数据，我必须打开一个文件。但是有没有办法不制作一个真正的文件来做到这一点？我们可以使用 STREAM, like`StringIO`来处理文件之类的数据，对吗？但是，我不是很了解`poster`。所以，我想知道使用 STREAM 的方法`poster`。

## 添加

实际上，我试图发布图像数据。我在下面写了这个

```
from PyQt4 import QtCore, QtGui
from poster.encode import multipart_encode
from poster.streaminghttp import register_openers
import urllib2, os

register_openers()
app = QtGui.QApplication(sys.argv)
pixmap = QtGui.QPixmap("c:/test_img.png")
byte_array = QtCore.QByteArray()
buffer = QtCore.QBuffer(byte_array)
buffer.open(QtCore.QIODevice.WriteOnly)
pixmap.save(buffer, "PNG")
from cStringIO import StringIO
datagen, headers = multipart_encode({"image": StringIO(str(byte_array.toBase64()))})
request = urllib2.Request(upload_url, datagen, headers)
_rnt = urllib2.urlopen(request) 
```

但是，我收到此错误：

```
Traceback (most recent call last):
  File "<pyshell#25>", line 1, in <module>
    _rnt = urllib2.urlopen(request)
  File "C:\Python26\lib\urllib2.py", line 126, in urlopen
    return _opener.open(url, data, timeout)
  File "C:\Python26\lib\urllib2.py", line 397, in open
    response = meth(req, response)
  File "C:\Python26\lib\urllib2.py", line 510, in http_response
    'http', request, response, code, msg, hdrs)
  File "C:\Python26\lib\urllib2.py", line 435, in error
    return self._call_chain(*args)
  File "C:\Python26\lib\urllib2.py", line 369, in _call_chain
    result = func(*args)
  File "C:\Python26\lib\urllib2.py", line 518, in http_error_default
    raise HTTPError(req.get_full_url(), code, msg, hdrs, fp)
HTTPError: HTTP Error 500: Internal Server Error 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T02:01:02.863

`file`参数是您传递文件对象的位置。那么，如果您改为传递类似文件的对象会发生什么？

```
>>> params = {'file': cStringIO.StringIO('upload test data'), 'name': 'upload test'}
>>> datagen, headers = poster.encode.multipart_encode(params)
>>> headers
{'Content-Length': '317', 'Content-Type': 'multipart/form-data; boundary=0c56082b1e134424a918b2b083391467'} 
```

看起来它奏效了。

[文件](http://atlee.ca/software/poster/poster.encode.html#poster.encode.multipart_encode)怎么说？

> 值可以是字符串参数值，也可以是用作参数值的类似文件的对象。类文件对象必须支持 .read() 和 .fileno() 或同时支持 .seek() 和 .tell()。

因此，您可以使用`StringIO`对象，因为它们支持`seek()`和`tell()`.

但你不必这样做。您应该能够只使用原始字符串。让我们试试看：

```
>>> params = {'file': 'upload test data', 'name': 'upload test'}
>>> datagen, headers = poster.encode.multipart_encode(params)
>>> headers
{'Content-Length': '317', 'Content-Type': 'multipart/form-data; boundary=0c56082b1e134424a918b2b083391467'} 
```

看看那个，文档是正确的。

# jquery - jQuery 切换子列表项

> ID：13354590
> 
> 赞同：1
> 
> 时间：2012-11-13T01:55:48.183
> 
> 标签：jquery, html, list

我想通过单击父列表项来切换单个子项的可见性。

我有一个像这样的文件树：

```
<div id="browser">
  <ul><li class='folder'>Musik
      <ul><li class='folder'>Alben
        <ul><li class='folder'>100JahreEAV
          <ul>
            <li class='file'>000_erste_allgemeine_verunsicherung_-_100_jahre_eav-backcover.jpg</li>
          <li class='file'>000_erste_allgemeine_verunsicherung_-_100_jahre_eav-frontcover.jpg</li>
          <li class='file'>101_alles_gute_eav.mp3</li><li class='file'>102_popstar.mp3</li>
          <li class='file'>103_samurai.mp3</li><li class='file'>104_kuess_die_hand_schoene_frau.mp3</li>
          <li class='file'>105_coconut_island.mp3</li><li class='file'>106_johnny_i_fahrscheine.mp3</li>
        </ul>
      </li></ul>
    </li></ul>
  </li></ul>
</div> 
```

到目前为止，这是我的代码：

```
$("div#browser ul li ul").hide();
$("li").click(function() {
    if($(this).hasClass('active')) {
        $(this).removeClass('active').children().hide();
    } else {
        $(this).addClass('active').children().show();
    }
}); 
```

​ ​问题是如果我点击任何地方，所有父列表项都会受到影响。你能告诉我如何一次只切换一个项目吗？

[http://jsfiddle.net/g3hWZ/](http://jsfiddle.net/g3hWZ/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T01:58:25.973

**[演示](http://jsfiddle.net/g3hWZ/1/)**- 添加`e.stopPropagation();`可防止事件传播到嵌套元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T01:58:45.370

停止内部列表项中点击[的传播。](http://api.jquery.com/event.stopPropagation/)

```
$("li").on("click", function( event ) {
    event.stopPropagation();
    // rest of your logic here
}); 
```

当您单击嵌套列表项时，单击事件不会沿祖先树向上传播。

# ios - 关于使用情节提要的标签栏

> ID：13354591
> 
> 赞同：1
> 
> 时间：2012-11-13T01:55:51.527
> 
> 标签：ios, uitabbarcontroller, uitabbar, uistoryboard

我想使用具有登录窗口和标签栏控制器的情节提要创建一个应用程序。

因此，流程将在点击登录按钮后，应用程序将被重定向到标签栏控制器及其视图。

我已经这样做了： ![在此处输入图像描述](../Images/907d10e61a4f97a56222e4750f9bc6d2.png)

但参考[苹果文档：UITabBarController](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITabBarController_Class/Reference/Reference.html)

> 因为 UITabBarController 类继承自 UIViewController 类，所以标签栏控制器有自己的视图，可以通过 view 属性访问。部署选项卡栏界面时，您必须将此视图安装为窗口的根目录。与其他视图控制器不同，标签栏界面永远不应安装为另一个视图控制器的子级。

所以这意味着我不允许这样做？

**另外：** 我的tab bar引用的3个view，那么每个view又多了自己的child view，但是child view中的tab bar没有了。可能会发生什么？我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T02:35:27.423

我在所有结构相似的应用程序中所做的是让第一个视图控制器检查有效身份验证，如果失败，则显示登录 VC。该登录 VC 定义了一个委托，它将在成功登录后传回用户凭据，然后关闭模式登录 VC 所做的任何事情。

这是一个示例布局： ![布局](../Images/ff6c5a3d972d8322d59dec66e5d7f9d0.png)

委托协议如下所示：

```
@protocol LoginViewControllerDelegate
    -(void)finishedLoadingUserInfo:(UserInfo *)curUser;
@end 
```

`UserInfo`我用于用户信息的模型在哪里（在我的例子中是 NetworkID、FullName 等）。

当用户成功通过身份验证时，我会触发在呈现它的类中处理的委托方法。如果您需要更多详细信息，我可以提供帮助 - 但过程很简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T02:05:34.477

您可以先从 appDelegate 启动登录屏幕，然后在登录成功后设置并启动 tabBarViewController。

另一种设计是执行以下步骤：1\. 设置 tabBarViewController，2\. 禁用选项卡，3\. 以模态方式启动登录视图控制器，4\. 启用 tabViewController 选项卡

这两种方法中的任何一种都应该有效。

# ruby-on-rails-3 - Unicorn with Foreman - 套接字已使用错误

> ID：13354594
> 
> 赞同：0
> 
> 时间：2012-11-13T01:56:17.743
> 
> 标签：ruby-on-rails-3, capistrano, bundle, foreman

我想在工头 procfile 中控制独角兽进程。这是我的 Procfile

```
web: bundle exec unicorn -c config/unicorn/local.rb -E local
thinking_sphinx: bundle exec rake ts:start
delayed_job: ./script/delayed_job start
delayed_delta: ./script/delayed_delta start
mail_receiver: ./scripts/mail_receiver_runner start 
```

这是我的独角兽配置。

```
app_path =  /home/deploy/apps/local.myapp.com/myapp/current
worker_processes 1
preload_app false
timeout 180
listen "#{app_path}/tmp/pids/unicorn.sock", backlog: 1024
pid    "#{app_path}/tmp/pids/unicorn.pid"
working_directory app_path
stderr_path "log/unicorn.log"
stdout_path "log/unicorn.log" 
```

当我开始它时，`cap foreman:start`它会引发这些错误：

```
adding listener failed addr=/home/deploy/apps/local.myapp.com/myapp/current/tmp/pids/unicorn.sock (in use)
/home/deploy/apps/local.myapp.com/myapp/shared/bundle/ruby/1.9.1/gems/unicorn-4.4.0/lib/unicorn/socket_helper.rb:140:in `initialize': Address already in use - /home/deploy/apps/local.myapp.com/myapp/current/tmp/pids/unicorn.sock (Errno::EADDRINUSE)
    from /home/deploy/apps/local.myapp.com/myapp/shared/bundle/ruby/1.9.1/gems/unicorn-4.4.0/lib/unicorn/socket_helper.rb:140:in `new'
    from /home/deploy/apps/local.myapp.com/myapp/shared/bundle/ruby/1.9.1/gems/unicorn-4.4.0/lib/unicorn/socket_helper.rb:140:in `bind_listen'
    from /home/deploy/apps/local.myapp.com/myapp/shared/bundle/ruby/1.9.1/gems/unicorn-4.4.0/lib/unicorn/http_server.rb:228:in `listen'
    from /home/deploy/apps/local.myapp.com/myapp/shared/bundle/ruby/1.9.1/gems/unicorn-4.4.0/lib/unicorn/http_server.rb:751:in `block in bind_new_listeners!'
    from /home/deploy/apps/local.myapp.com/myapp/shared/bundle/ruby/1.9.1/gems/unicorn-4.4.0/lib/unicorn/http_server.rb:751:in `each'
    from /home/deploy/apps/local.myapp.com/myapp/shared/bundle/ruby/1.9.1/gems/unicorn-4.4.0/lib/unicorn/http_server.rb:751:in `bind_new_listeners!'
    from /home/deploy/apps/local.myapp.com/myapp/shared/bundle/ruby/1.9.1/gems/unicorn-4.4.0/lib/unicorn/http_server.rb:140:in `start'
    from /home/deploy/apps/local.myapp.com/myapp/shared/bundle/ruby/1.9.1/gems/unicorn-4.4.0/bin/unicorn:121:in `<top (required)>'
    from /home/deploy/apps/local.myapp.com/myapp/shared/bundle/ruby/1.9.1/bin/unicorn:23:in `load'
    from /home/deploy/apps/local.myapp.com/myapp/shared/bundle/ruby/1.9.1/bin/unicorn:23:in `<main>' 
```

它与独角兽或工头的配置问题有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T09:17:47.097

从独角兽配置中删除这一行可以解决问题。

```
pid "#{app_path}/tmp/pids/unicorn.pid" 
```

# android - wcf 用户认证

> ID：13354595
> 
> 赞同：0
> 
> 时间：2012-11-13T01:56:19.037
> 
> 标签：android, wcf, oauth-2.0

我打算创建一个 android 应用程序，它与 wcf 服务进行通信，该服务执行所有业务操作并将所有数据返回给应用程序。我想知道如何在此服务上进行用户身份验证的最佳方式。我在想，但不知道当用户登录 facebook 时是否可以使用该令牌和信息在我的 wcf 服务中进行身份验证。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T08:35:55.030

看看[Oauth2](http://developer.android.com/training/id-auth/authenticate.html)，这对你可以做什么有一个非常完整的解释。

# google-app-engine - Google Cloud Endpoints 会取代 ProtoRPC API 吗？

> ID：13354597
> 
> 赞同：0
> 
> 时间：2012-11-13T01:56:22.813
> 
> 标签：google-app-engine, protorpc, google-cloud-endpoints

刚刚观看了 google I/O 2012 中的端点演示（http://www.youtube.com/watch?v=NU_wNR_UUn4 以及[http://endpoints-trusted-tester.appspot.com/](http://endpoints-trusted-tester.appspot.com/)）。

如果我理解正确，这将取代 ProtoRPC API 提供的功能，并提供一种自动准备客户端 API 端点的方法。

由于这会影响我在未来项目中使用 ProtoRPC 的决定，是否有人知道 Endpoints 是否会取代 ProtoRPC？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T07:41:05.980

Endpoints 的 Python 实现是基于 ProtoRPC 构建的。与其将其视为替代品，不如将其视为补充品。

# jquery - 带字母的电话号码 - 点击拨打

> ID：13354600
> 
> 赞同：1
> 
> 时间：2012-11-13T01:56:49.770
> 
> 标签：jquery, html, css

是否可以将包含字母（为了生效）的电话号码作为点击通话号码被移动设备识别，并且只能被移动设备识别？

客户是注册会计师，他们恰好有 4CPA 作为最后 4 位数字，这对他们来说真的很重要……但对我来说重要的是这个网站是可用的。

我发现了这个问题： [如何在网页中检测移动设备](https://stackoverflow.com/questions/6439777/how-to-detect-a-mobile-device-in-a-web-page)

但我不确定如何实现 PHP，也不确定如何编写 PHP 来填写 if/then。

（我希望在没有 PHP 的情况下做到这一点。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T02:03:50.673

将以下 HTML 放在网页上，然后访问并单击 iPhone 上的链接，它会调用号码 [+1 (555) 222-333]：

```
<a href="tel:+1-555-ABCDEF">+1-555-ABCDEF</a> 
```

*更新：*

仅限移动设备（**iPhone**和**Android 移动设备**）解决方案：

```
<script>
$(function(){
    if(navigator.userAgent.match(/(iPhone|Android.*Mobile)/i))
    {
        $('a[data-tel]').each(function(){
            $(this).prop('href', 'tel:' + $(this).data('tel'));
        });
    }
})
</script>

<a data-tel="+1-555-ABCDEF">+1-555-ABCDEF</a> 
```

这只会将*浏览*器中的电话号码与包含`iPhone` **or** `Android`和的用户代理字符串链接起来`Mobile`。

（请参阅：[检测 Android 手机](http://googlewebmastercentral.blogspot.com/2011/03/mo-better-to-also-detect-mobile-user.html)）

# wpf - WPF datagrid 单击时折叠详细信息行

> ID：13354603
> 
> 赞同：5
> 
> 时间：2012-11-13T01:57:20.033
> 
> 标签：wpf, datagrid, collapse, rowdetails

当用户单击它时，我需要折叠 WPF DataGrid 的详细信息行，并在他们再次单击时重新显示它。我还想使用单选保留 VisibleWhenSelected 的 DataGridRoDetailsVisibilityMode。

我根据其他地方的这篇文章提出了这个解决方案：http: [//social.msdn.microsoft.com/Forums/en-US/wpf/thread/0a45b3a7-46d0-45a9-84b2-0062f07f6fec#eadc8f65-fcc6- 41df-9ab9-8d93993e114c](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/0a45b3a7-46d0-45a9-84b2-0062f07f6fec#eadc8f65-fcc6-41df-9ab9-8d93993e114c)

```
 private bool _rowSelectionChanged;

    private void dgCompletedJobs_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        _rowSelectionChanged = true;
    }

    private void dgCompletedJobsMouseUp(object sender, System.Windows.Input.MouseButtonEventArgs e)
    {
        DependencyObject dep = (DependencyObject)e.OriginalSource;

        //navigate up the tree
        while (dep != null &&
            !(dep is DataGridCell) &&
            !(dep is DataGridColumnHeader))
        {
            dep = VisualTreeHelper.GetParent(dep);
        }

        if (dep == null)
        {
            return;
        }

        DataGridCell dgc = dep as DataGridCell;
        if (dgc != null)
        {
            //navigate further up the tree
            while (dep != null && !(dep is DataGridRow))
            {
                dep = VisualTreeHelper.GetParent(dep);
            }

            DataGridRow dgr = dep as DataGridRow;
            DataGrid dg = sender as DataGrid;
            if (dg != null && dgr != null)
            {
                if (dgr.IsSelected && !_rowSelectionChanged)
                {
                    dg.RowDetailsVisibilityMode =
                        (dg.RowDetailsVisibilityMode == DataGridRowDetailsVisibilityMode.VisibleWhenSelected)
                            ? DataGridRowDetailsVisibilityMode.Collapsed
                            : DataGridRowDetailsVisibilityMode.VisibleWhenSelected;
                }
                else
                {
                    dg.RowDetailsVisibilityMode = DataGridRowDetailsVisibilityMode.VisibleWhenSelected;
                }
            }
        }
        _rowSelectionChanged = false;
    } 
```

这似乎很好地解决了我的问题，但我怀疑这可以更简单、更优雅地完成，特别是因为我在这个项目上使用了 MVVM。但是，我认为这是事件驱动代码隐藏的可接受用法，因为它纯粹是表示逻辑。

有没有人有更清洁的解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T09:29:49.363

要使用“正确”的 MVVM 执行此操作，您应该将 RowDetailsVisibilityMode 绑定到视图模型上的属性：

```
<DataGrid x:Name="dgCompletedJobs" RowDetailsVisibilityMode="{Binding RowDetailsVisible}"/> 
```

您的视图模型属性将类似于：

```
private DataGridRowDetailsVisibilityMode _rowDetailsVisible;
public DataGridRowDetailsVisibilityMode RowDetailsVisible
{
    get { return _rowDetailsVisible; }
    set {
        _rowDetailsVisible = value;
        if (PropertyChanged != null) {
             PropertyChanged(this, new PropertyChangedEventArgs("RowDetailsVisible"));
        }
    }
} 
```

要将鼠标单击事件链接到属性的更改，您可以执行一些花哨的附加行为命令，如此处所示[，](http://marlongrech.wordpress.com/2008/12/13/attachedcommandbehavior-v2-aka-acb/)或者只是使用后面的代码直接调用视图模型（我经常为简单的任务自己这样做）：

```
private void dgCompletedJobsMouseUp(object sender, System.Windows.Input.MouseButtonEventArgs e)
{
    Window1ViewModel viewModel = (Window1ViewModel)DataContext;
    if (viewModel.RowDetailsVisible == DataGridRowDetailsVisibilityMode.Collapsed) {
        viewModel.RowDetailsVisible = DataGridRowDetailsVisibilityMode.VisibleWhenSelected;
    } else {
        viewModel.RowDetailsVisible = DataGridRowDetailsVisibilityMode.Collapsed;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T08:35:56.200

为什么不使用 sender 参数？如果事件是在 DataGrid 上定义的，则发送者始终是 DataGrid！使用安全强制转换检查 null 是安全的，但这应该可以解决问题。

当您通过可视化树从原始源返回到 DataGrid 时，代码似乎不必要的复杂。

```
 private void dataGridMouseLeftButtonUp(object sender, MouseButtonEventArgs e)
    {
        DataGrid dg = sender as DataGrid;
        if (dg == null)
            return;
        if (dg.RowDetailsVisibilityMode == DataGridRowDetailsVisibilityMode.VisibleWhenSelected)
            dg.RowDetailsVisibilityMode = DataGridRowDetailsVisibilityMode.Collapsed;
        else
            dg.RowDetailsVisibilityMode = DataGridRowDetailsVisibilityMode.VisibleWhenSelected;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-20T13:52:58.840

这结合了 Grafix 的答案和 Prethen 的答案。

如果您希望仅在已选择行时切换行详细信息，请使用它：

```
private void DataGrid_PreviewMouseLeftButtonDown(object sender, MouseButtonEventArgs e)
{
    if (sender is DataGrid dataGrid && 
        e.OriginalSource is FrameworkElement frameworkElement && 
        frameworkElement.DataContext == dataGrid.SelectedItem)
    {
        if (dataGrid.RowDetailsVisibilityMode == DataGridRowDetailsVisibilityMode.VisibleWhenSelected)
            dataGrid.RowDetailsVisibilityMode = DataGridRowDetailsVisibilityMode.Collapsed;
        else
            dataGrid.RowDetailsVisibilityMode = DataGridRowDetailsVisibilityMode.VisibleWhenSelected;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-14T13:04:07.103

我想出了一种不同的方式，但不是“正确的” MVVM 方式，因为它使用后面的代码（就像上面建议的答案中的一些代码一样），但它只用几行代码就可以解决问题。

通过针对 PreviewMouseUp 事件进行编码，我能够获得所需的确切行为。该代码确保您实际上单击了网格中的某些内容，并且要折叠它必须是已经打开的同一行。

```
 private void UIElement_OnPreviewMouseDown(object sender, MouseButtonEventArgs e)
    {
        DataGrid grid = sender as DataGrid;

        if (grid != null)
        {
            FrameworkElement element = e.OriginalSource as FrameworkElement;

            if (element?.DataContext is MyCustomObject)
            {
                if (grid.SelectedItem == (MyCustomObject) ((FrameworkElement) e.OriginalSource).DataContext)
                {
                    grid.SelectedIndex = -1;
                    e.Handled = true;
                }
            }
        }
    } 
```

# cpu - 在 MIPS 中注册文件转发

> ID：13354606
> 
> 赞同：3
> 
> 时间：2012-11-13T01:57:48.400
> 
> 标签：cpu, mips, cpu-architecture

我正在阅读计算机组织和设计中的第 4.7 节：关于数据转发的硬件/软件接口。在书中给出的示例中，有寄存器文件转发。（这正是它在书中[示例](https://books.google.com/books?id=H7wxDQAAQBAJ&pg=PA298&lpg=PA298&dq=register+file+forwarding&source=bl&ots=bCWJPrpl8V&sig=9sFzV_jYbRHrEygK2nPM0RpdFIw&hl=en&sa=X&ved=0ahUKEwickuPOzt_UAhWHxYMKHRKKB0gQ6AEIVTAJ#v=onepage&q=register%20file%20forwarding&f=false)中出现的方式）

为什么需要注册文件转发？寄存器中的数据在时钟的前半部分写入，在时钟的后半部分读取，所以不转发应该是安全的。

只是为了澄清上面链接中给出的示例：左侧阴影`Reg`意味着它被写入，右侧 - 被读取。

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T16:06:51.313

![图 4.53 计算机组织和设计，(c)2009 Elsevier](../Images/e62f7c7cbeeb2e78d5a569fb6dacd5a0.png)

您需要注册文件转发以防止停顿。

如果仔细观察，第二条指令 ( `and $12, $2, $5`) 需要使用 register `$2`，但在前一条指令 ( `sub $2, $1, $3`) 中计算的值将在时钟周期 5 中写回到寄存器文件中。因此，如果不是因为寄存器文件转发，第二条指令必须停止，直到寄存器`$2`被写回。转发在指令 1 的 ALU 运算结果和指令 2 的 ALU 运算的第一个参数之间用一条天蓝色线表示。

同样，第三条指令 ( `or $13, $6, $2`) 也需要使用 $2 才能被第一条指令实际写回寄存器文件。因此，再次，为了防止停顿，寄存器转发用于使用第一条指令的结果作为第三条指令的参数。

另一方面，第四条指令`add $14, $2, $2`（操作说明。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-07-14T21:53:47.710

由于接受的答案实际上并没有回答手头的问题，我会在这里尝试一下。如果您的设计在前半部分写入数据并在后半部分读取数据，那么您就不会有问题。但是，实际的“寄存器”将在时钟的正沿写入数据，因此上述情况不正确。在两条指令读写同一个寄存器的情况下，数据必须在同一个周期内从寄存器文件的写输入转发到读输出。

# c# - 基于sql实例枚举获取sql server中的数据库列表

> ID：13354611
> 
> 赞同：1
> 
> 时间：2012-11-13T01:58:21.717
> 
> 标签：c#, windows

我尝试在此代码中获取服务器中的 SQL 数据库的名称 我使用 sqldatasource 枚举器在名为 sever 的组合框中列出了我计算机中的所有 sql 实例现在我试图在另一个组合框中获取所有 sql 数据库名称的名称从服务器组合框中选择一个特定的 sql 实例，但它不起作用

```
 private void Connect_Load(object sender, EventArgs e)
    {
        sqlservertable = sqlenumeratotr.GetDataSources();

         server.DataSource = sqlservertable;

         server.DisplayMember = sqlservertable.Columns["servername"].ToString();
         server.ValueMember = sqlservertable.Columns["servername"].ToString();

    }

    private void server_SelectedIndexChanged(object sender, EventArgs e)
    {
        servername = server.SelectedValue.ToString();
        constring = "server=servername;Integrated Security = sspi";
        SqlConnection con = new SqlConnection(constring);

        con.Open();
        dbltables = con.GetSchema("Databases");

        con.Close();
        databases.DataSource = dbltables;
        databases.DisplayMember = dbltables.Columns["database_name"].ToString();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T15:33:59.410

如果我正确理解了这个问题，我认为[Heather](https://stackoverflow.com/users/376463/heather)的回答足以解决这个问题，我会稍微扩展一下。

您需要运行[Heather](https://stackoverflow.com/users/376463/heather)提到的查询，然后将结果绑定到另一个 ComboBox。

```
private void server_SelectedIndexChanged(object sender, EventArgs e)
{
    string serverName = server.SelectedValue.ToString();
    string connString = string.Format("server={0};Integrated Security = sspi", serverName);
    using (var con = new SqlConnection(connString))
    {
        using (var da = new SqlDataAdapter("SELECT Name FROM master.sys.databases", con))
        {
            var ds = new DataSet();
            da.Fill(ds);
            databases.DataSource = ds.Tables[0].Rows.Select(x => x["Name"].ToString());
            //...
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T02:01:07.840

```
select name from master.sys.databases 
```

# function - 使用方案查找两个字符串在结构上是否相等

> ID：13354621
> 
> 赞同：1
> 
> 时间：2012-11-13T01:59:33.493
> 
> 标签：function, scheme, conditional

编写一个 Scheme 谓词函数来测试两个给定列表的结构相等性。如果两个列表具有相同的列表结构，则它们在结构上是相等的，尽管它们的原子可能不同。

(123) (456) 可以 (1(23))((12)3) 不行

我不知道该怎么做。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T02:22:06.513

这里有一些提示。这个写起来有点重复，因为这个问题看起来像家庭作业我会让你填写细节：

```
(define (structurally-equal l1 l2)
  (cond ( ? ; if both lists are null
         #t)
        ( ? ; if one of the lists is null but the other is not
         #f)
        ( ? ; if the `car` part of both lists is an atom
         (structurally-equal (cdr l1) (cdr l2)))
        ( ? ; if the `car` part of one of the lists is an atom but the other is not
         #f)
        (else
         (and (structurally-equal ? ?)     ; recur over the `car` of each list
              (structurally-equal ? ?))))) ; recur over the `cdr` of each list 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T12:32:52.947

有两种方法可以解决这个问题。第一个使用函数生成表示列表结构的输出。

1.  考虑一种方法，您可以将任何列表的结构表示为唯一的字符串或数字，这样任何具有相同结构的列表都将具有相同的表示形式，并且没有其他列表会生成相同的输出。
2.  编写一个函数来分析任何列表的结构并生成该输出。
3.  通过函数运行两个列表并比较输出。如果相同，则它们具有相同的结构。

第二种方法是 Oscar 采用的方法，即同时遍历两个列表。在这里，您将两个列表传递给一个函数，该函数执行以下操作：

1.  第一个列表的第一个元素是否（结构上）与第二个列表的第一个元素相同？如果不是，则返回 false。
2.  这些是第一个元素列表吗？如果是，则返回结果`(and (recur on the first element of both lists) (recur on the rest of both lists))`
3.  如果不是，则返回 的结果`(recur on the rest of both lists)`。

第二种方法在您想要比较两个列表的简单情况下更有效。一旦发现差异，它就会立即返回，只需要完整地处理两个列表，其中两个列表实际上在结构上是相同的。

如果您有大量列表并且可能想要随时比较任意两个列表，则第一种方法可能更有效，因为您可以存储结果，因此任何列表只需要处理一次。它还允许您

*   例如，通过创建一个哈希映射来组织您的列表集合，该哈希映射将具有相同结构的所有列表组合在一起。
*   比较列表的结构*相似性*（例如，这些列表是否以相同的结构开始和/或结束，即使它们在中间不同？）

不过，我怀疑你的作业最好用第二种方法。

# matlab - MatLab Daubechies 彩色图片形式的过滤器 - 不使用预设功能

> ID：13354623
> 
> 赞同：1
> 
> 时间：2012-11-13T02:00:12.977
> 
> 标签：matlab, image-processing, fft, wavelet, haar-wavelet

这是我的第一篇文章。我希望有人可以帮助我开始。所以我一直在为一个班级项目进行图像处理。我们从头开始创建一个 Haar 变换函数，这很简单，然后将其应用于预设图片，例如 cameraman.tif。但是，该示例图片是灰度和方阵。

现在我们取得了很大的飞跃，我们应该将过滤器应用于任何矩形彩色图片。我知道，如果我`imread(picture)`将创建一个包含三个值的数组矩阵，分别代表红色、绿色和蓝色 (RGB)。我也明白，原则上我必须使用一个`for`循环来遍历每个颜色通道。然而，它让我不知道如何为不同的频道创建它并将图像重新组合在一起。

我在这里经历了一些很棒的答案，并且能够重建女人和[水果篮的例子](https://stackoverflow.com/questions/6766210/matlab-wavelet-transform-for-n-dimensionmodified?rq=1)，但不幸的是它们都使用了预设`DWT`功能，我不能这样做。

最终代码应该是这样的： 1）询问用户需要多少次迭代：

```
pic =   input('What picture would you like? Type "1" for an example or a URL  '); 
```

2）向用户询问阈值

```
t   =   input('Threshold?'); 
```

3）询问用户多少次迭代（1-3）

```
i   =   input('How many iterations do you want? Choose 1-3\.  '); 
```

作为示例图像，我选择了一个矩形位图，因为它还没有被压缩并且使用“1”作为一个简单的标识符：

```
if pic ==1;
   A = imread ('http://readingeagle.com/BlogUploads/11/Birds%20in.bmp');
else A = imread(pic) ;
end

%[m,n]=Matrix dimensions, c=channels
[m,n,c]=size (A) ; 

%plot original
imshow (A); 
```

现在我们必须执行 Daubchechies 小波变换，无论用户指定多少次迭代，同时将阈值绝对值之外的值设置为零。在重建图像之前。

我希望我提供了足够的信息，如果我已经出错了，请纠正我（我希望不会）。每次我实现循环并尝试处理通道时，我的代码都会开始中断。仅供参考，这里是适用于原始 cameraman.tif 图像的 Haar 变换：

```
%HWTM - Haar Wavelet Transform Matrix

function W = HWTM(N)

while mod(N,2) ~= 0;
    N = N-1;
end 

W=zeros(N);
for k=1:N/2
    W(k,2*k)=1/2;
    W(k,2*k-1)=1/2;
    W(N/2+k,2*k)=1/2;
    W(N/2+k,2*k-1)=-1/2;
end
end 
```

太感谢了！

# project-management - 什么是 LOE？

> ID：13354624
> 
> 赞同：2
> 
> 时间：2012-11-13T02:00:22.477
> 
> 标签：project-management

我不知道，我用谷歌搜索过，没有骰子。

在上下文中：“我们对此有LOE吗？他们一直在问我哈哈。:)”

我已经用谷歌搜索和谷歌搜索，但不能把手放在它周围。有人可以像我五岁一样向我解释吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T02:02:44.460

***努力程度***是最有可能的。这里也列出了一堆： [http ://www.acronymfinder.com/Business/LOE.html](http://www.acronymfinder.com/Business/LOE.html)

我猜到了这个，因为它是在项目管理的背景下，这是 PM 需要知道的事情的类型。

它特别显示在这里：[http](http://www.all-acronyms.com/LOE/tag/project_management) ://www.all-acronyms.com/LOE/tag/project_management作为“LOE 项目管理首字母缩写词”搜索的第一个 Google 结果

# vim - 如何在普通 vim 中安装 pyclewn？

> ID：13354626
> 
> 赞同：0
> 
> 时间：2012-11-13T02:00:25.237
> 
> 标签：vim

我注意到 pyclewn 可以从 7.3 版开始安装在普通的 vim 中，因为它支持 netbeans。
所以我在我的 vim73 中启用了 netbeans_intg 和 autocmd 功能。
但是，当我尝试通过以下方式安装它时：
`$sudo python setup.py install --force`
我收到一条返回消息：
`"Failed to run 'gvim' as Vim."`
我很确定我已将环境变量 EDITOR 设置为 /usr/bin/vim。
任何想法？

谢谢，
习

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-29T09:40:17.197

Given the output message "'gvim' as Vim". It is most likely that you set EDITOR incorrectly

```
> EDITOR=vim
> echo EDITOR 
```

this should return 'vim'. Then,

```
> export EDITOR
> vimdir=$HOME/.vim python setup.py install --force --home=$HOME 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T23:38:45.653

尝试他们的本地安装方法。这可能对您更有效。从他们的安装说明：

## 二进制文件和运行时

pyclewn 二进制文件和运行时文件的本地安装使用以下命令完成：

```
vimdir=$HOME/.vim python setup.py install --force --home=$HOME 
```

# javascript - Javascript，将文本字段复制到新的 li 类

> ID：13354627
> 
> 赞同：1
> 
> 时间：2012-11-13T02:00:29.840
> 
> 标签：javascript, copy, field, zendesk

**更新，更清楚：**

**我当前包含值“1201026404”的字段（每次都会更改）：**

```
<input id="ticket_fields_20323656" name="ticket[fields][20323656]" size="30" style="width:125px;" type="text" value="1201026404" tabindex="11"> 
```

**当页面加载时，我希望复制的值“1201026404”（每次都会改变）去的 LI：**

```
<ul class="multi_value_field" style="width: 99.5%;">
<li class="choice" choice_id="1201026404">1201026404<a class="close">×</a><input type="hidden" name="ticket[set_tags][]" value="1201026404" style="display: none;"></li>
</ul> 
```

**我已经制作但需要帮助的 Javascript：**

```
<script type="text/javascript">
copy = function()
{
    var n1 = document.getElementById("ticket_fields_20323656");
    var n2 = ‘what goes here??’
    n2.value = n1.value;
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T03:48:34.370

您将不得不在 li 元素上使用 ID。

```
 <li id="choice_20323656"> 
```

然后你可以像这样复制它

```
<script type="text/javascript">
copy = function()
{
    var n1 = document.getElementById("ticket_fields_20323656");
    var n2 = document.getElementById("choice_20323656");
    n2.innerHTML = n1.value;
}
</script> 
```

## 编辑：

如果您可以使用 jQuery 1.6 或更高版本，这将起作用：

```
$("#ticket_fields_20323656").keyup(function(e) {
    $(".choice")
        .attr("choice_id",e.currentTarget.value)
        .html(e.currentTarget.value
              + "<a class=\"close\">×</a><input" 
              + " type=\"hidden\" name=\"ticket" 
              + "[set_tags][]\" value=\"" 
              + e.currentTarget.value 
              + "\" style=\"display: none;\">");
});​ 
```

这是一个演示： http: [//jsfiddle.net/JKirchartz/V2L25/](http://jsfiddle.net/JKirchartz/V2L25/)，但是你应该知道，如果你有多个类的东西，`choice`它们的值会以同样的方式改变：http: [//jsfiddle.net/ JKirchartz/V2L25/4/](http://jsfiddle.net/JKirchartz/V2L25/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T03:49:38.700

这在 Firefox 中有效吗：

```
<script type="text/javascript">
copy = function()
{
    var n1 = document.getElementById("ticket_fields_20323656");
    var n2 = document.querySelectorAll("ul.multi_value_field li:first");
    n2.innerHTML = n1.value;
}
</script> 
```

this uses querySelectorAll which doesnt exist in IE6,7,8 - otherwise you need to use the id of the element which im not sure you have

# javascript - 避免在浏览器中缓存页面

> ID：13354636
> 
> 赞同：0
> 
> 时间：2012-11-13T02:02:20.227
> 
> 标签：javascript, asp.net, popup

我正在使用 iframe 来显示子页面。其中一个特定页面包含隐藏的 div，我通过更改隐藏 div 的可见性将其显示为类似于 javascript 的弹出窗口。

问题是在显示隐藏的 div 之前，一些操作是在服务器级别完成的，我在像这样的操作之后从 C# 代码调用 div

```
Page.ClientScript.RegisterStartupScript(GetType(), "MyKey", "javascript:OpenModelPopup('cb','cs');", true); 
```

所以页面被发回并显示了div。

在此之后，如果我点击浏览器返回到下一页后，它会显示带有隐藏 div 的页面，并且在下次点击浏览器返回时会显示没有隐藏 div 的页面。

但我只想显示页面的初始阶段，即。在不显示隐藏 div 的情况下，不应缓存具有隐藏 div 的阶段，或者不应在单击浏览器返回时显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T04:16:19.347

我相信您将需要 no-cache 和 no-store 指令来强制浏览器重新加载页面。但是，您的里程可能因浏览器而异。

# java - Java 类加载器委托

> ID：13354640
> 
> 赞同：2
> 
> 时间：2012-11-13T02:03:19.817
> 
> 标签：java, jar, classloader

我有一个关于 java ClassLoaders 的问题。我正在尝试使用不同的 ClassLoader 来在同一个程序中运行不同版本的 JAR。

我在某处听说，如果您使用一个 ClassLoader 加载一个类，则从该类中调用（正在加载）的所有类都将使用相同的 ClassLoader。它是否正确？

如果没有，是否有一种巧妙的方法来设置 ClassLoader 的上下文（比如说，从特定类/库调用的所有内容都应该使用相同的 ClassLoader）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T02:44:32.153

这不是一个简单的主题，我建议在网上做更多的研究，因为这里的答案几乎不够深入。但是，作为一个简短的概要：

*   通过普通类引用加载的类（即类 A 中的一行代码，它使用静态类型 B 的变量）将使用与初始类相同的类加载器加载。
*   *然而*，由于类加载器委托，一个类实际上可能不会*被*最初开始搜索的类加载器加载。例如，我有由类加载器 LA 和父类加载器 LP 加载的 A 类。B 类由 A 引用，因此对 B 类的搜索将从 LA 开始。但是，B 的类字节实际上是在 LP 中找到的，因此 LP 加载该类并将其交给 LA，后者将其返回。然而，B 最终归 LP*而非*LA 所有。
*   使用通过反射加载类的实用程序（例如序列化、JAXB、Hibernate 等）或通常与嵌套类加载器一起使用的框架（例如 Java EE 应用程序服务器），所有的赌注都没有了。 *通常*像这样的实用程序/框架使用[上下文类加载器加载类](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#getContextClassLoader%28%29)，但情况并非总是如此。对于使用哪个类加载器，每个实用程序可能有不同的优先级和回退。此外，许多有在运行时显式提供类加载器的方法。

根据经验，在执行您知道来自嵌套类加载器的代码时（可能是因为您设置了它），您应该适当地设置当前上下文类加载器。

# google-maps - apache openmeetings 2.0 集成google map 有什么好的方法吗？

> ID：13354642
> 
> 赞同：2
> 
> 时间：2012-11-13T02:03:53.263
> 
> 标签：google-maps, video-streaming, openlaszlo, lzx, openmeetings

有没有好办法把google map 集成到apache openmeetings 2.0？我搜了一下发现openlaszlo 的用法[http://code.google.com/p/openlaszloincubator/source/browse/trunk/googlemapsonlaszlo/?r=32 #googlemapsonlaszlo%253Fstate%253Dclosed](http://code.google.com/p/openlaszloincubator/source/browse/trunk/googlemapsonlaszlo/?r=32#googlemapsonlaszlo%253Fstate%253Dclosed) 和网站[http://code.google.com/p/openmeetings/source/browse/trunk/singlewebapp/WebContent/lps/components/incubator/googlemap.lzx?r=3529](http://code.google.com/p/openmeetings/source/browse/trunk/singlewebapp/WebContent/lps/components/incubator/googlemap.lzx?r=3529) 没有基于openmeetings 2.0！有人实现了吗？</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T12:02:23.053

Google 已于[2011 年底弃用 Google Maps Flash API](http://googlegeodevelopers.blogspot.de/2011/09/maps-api-for-flash-deprecation.html)。

> “因此，我们决定弃用 Maps API for Flash，以便将注意力集中在 JavaScript Maps API v3 上。这意味着尽管 Maps API for Flash 应用程序将继续按照 Maps 中给出的弃用政策运行API 服务条款，不会开发新功能，只会修复严重的错误、回归和安全问题。我们将继续为使用 Maps API for Flash 的现有 Google Maps API Premier 客户提供支持，但将逐步结束开发者关系参与 Maps API for Flash 论坛。”

因此 - 如果您还不是现有的 Google Maps API Premier 客户 - 您将无法[在孵化器中使用 Google Maps OpenLaszlo 组件](http://svn.openlaszlo.org/openlaszlo/trunk/lps/components/incubator/googlemap.lzx)。您应该改用[Google JavaScript Maps API v3](https://developers.google.com/maps/documentation/javascript/)。可以使用SWF 运行时中的[<html /> 标签集成地图对象。](http://labs.openlaszlo.org/trunk-nightly/docs/reference/lz.html.html)如果您只打算使用 DHTML 运行时，您可以将地图对象直接附加到视图的显示对象。

由于当前版本的 OpenMeetings 似乎仍然使用 SWF 运行时作为默认目标运行时，因此您可以选择通过`<html src="" />`标记使用 iFrame。

这是一个基于您在评论中的代码的简单示例。该示例使用两个文件：一个 LZX 文件和一个包含 Google 地图示例的 HTML 文件。这是LZX代码：

```
<canvas height="500">

  <class name="showGISWindow"
     extends="view"
     width="464" height="440">
    <method name="setLatLong" args="lat,lng">
        this.maps.callJavascript('centerMap(' + lat + ', ' + lng + ')' );
    </method>

    <button text="Show New York"
            align="center"
            onclick="parent.setLatLong(40.69847032728747, -73.9514422416687)" />

    <html name="maps" src="gmaps.html"
      x="15" y="45"
      width="${parent.width - 30}"
      height="${parent.height - 45}" />

  </class>

  <showGISWindow id="gis" x="10" y="10" />

</canvas> 
```

以及对应的 gmaps.html 页面内容，加载到 iFrame 中：

```
<!DOCTYPE html>
<html>
  <head>
    <title>Google Maps JavaScript API v3 Example: Map Simple</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <style>
      html, body, #map_canvas {
        margin: 0;
        padding: 0;
        height: 100%;
      }
    </style>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
    <script>
      var map;
      function initialize() {
        var mapOptions = {
          zoom: 8,
          center: new google.maps.LatLng(-34.397, 150.644),
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(document.getElementById('map_canvas'),
            mapOptions);
      }

      function centerMap(lat, lng) {
        map.setCenter(new google.maps.LatLng(lat, lng));
        map.setZoom(11);
      }

      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
  </head>
  <body>
    <div id="map_canvas"></div>
  </body>
</html> 
```

单击该按钮时，OpenLaszlo 应用程序会调用`centerMap(lat, lng)`HTML 页面中的函数，并将地图以纽约为中心。这是 SWF10 运行时中应用程序的屏幕截图：

![OpenLaszlo 谷歌地图示例](../Images/4c327e3a11da818dc1980a167dddd32b.png)

# c# - switch 语句是否优于双条件和贯穿 if 语句？

> ID：13354643
> 
> 赞同：3
> 
> 时间：2012-11-13T02:04:04.697
> 
> 标签：c#, clr, conditional-statements

当我必须编写多个条件语句时，我通常会使用**switch**语句，通常是在三个或更多定义良好的条件下。

但是，为了处理**包含失败行为的双条件语句**，我经常在简单的**if、else if、else**语句和**switch**语句之间犹豫不决：

```
if (condition1)
{
    // handling condition1.
}
else if (condition2)
{
    // handling condition2.
}
else 
{
    // handling fall-through.
} 
```

或者

```
switch (n)
{
    case condition1:
    // handling condition1.
    break;

    case condition2:
    // handling condition2.
    break;

    default:
    // handling fall-through.
    break;
} 
```

[Wikipedia **Switch 声明**文章](http://en.wikipedia.org/wiki/Switch_statement#Advantages)指出：

> 在某些语言和编程环境中，使用 case 或 switch 语句被认为优于等效的一系列 if-else 语句，因为它是：
> 
> *   更易于调试（例如，如果调试器没有条件断点功能，则在代码与调用表上设置断点）
> *   更容易阅读（主观）
> *   更容易理解，因此
> *   更容易维护
> *   **更快的执行潜力**

关于 .NET 公共语言运行时，在这种情况下，switch 语句的**更快执行潜力是否可行？**

我很想知道公共语言运行时如何处理这两种情况，以及其中一种情况如何优于另一种情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T02:08:15.047

更快的执行潜力意味着它尽可能尝试使用二进制搜索（而不是线性搜索，在这种`if... else if...`情况下）。

但是，`if... else if...`通常更强大，因为它可以做一些`switch`不能做的事情。

所以我想如果你需要做的只是比较一个字符串或一个整数，使用`switch`. 它也有助于提高可读性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T01:43:22.240

我认为 If 是“条件”，而 Switch 是“选项”

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-13T02:12:56.237

如果您正在考虑编译时间的目的，那么 IF CONDITION 总是更可取的。如果条件比切换情况检查更快。

但是，如果您以编程方式瘦身，那么 If 条件只是一系列布尔检查。为了让程序有效地工作，应该使用 switch case（虽然它会消耗时间）。

# c++ - c++ 不能出现在常量表达式中|

> ID：13354644
> 
> 赞同：0
> 
> 时间：2012-11-13T02:04:13.153
> 
> 标签：c++

> **可能重复：**
> [如何在 switch 语句中选择一系列值？](https://stackoverflow.com/questions/9432226/how-do-i-select-a-range-of-values-in-a-switch-statement)

我遇到了一些错误，我已经搜索了一段时间，但我不知道错误的原因是什么。（我对编程很陌生。）

以下是我得到的错误：

```
error: 'Essais' cannot appear in a constant-expression| (line 200)
warning: overflow in implicit constant conversion| (line 202) 
```

我有case和cote：

```
 char AfficherCote (int Essais)
 {
 char Cote;
 switch (Essais)
  {
(line200)       case Essais<=20:
    {
(line 202)           Cote='Excellent';

        return (Cote);
        break;
    }
    case Essais<=40:
    {
        Cote='Très bon';
        return (Cote);
        break;
    }
    case Essais<=60:
    {
        Cote='Bon';
        return (Cote);
        break;
    }
    case Essais<=80:
    {
        Cote='Moyen';
        return (Cote);
        break;
    }
    case Essais<=100:
    {
        Cote='Muvais';
        return (Cote);
        break;
    }
    case Essais>=100:
    {
        Cote='Très mauvais';
        return (Cote);
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T02:08:45.327

`switch-case`仅适用于常量值^((*))（例如`3`或`'a'`），不适用于范围（例如`<=100`）。您也不得在`case`语句中包含变量名称。正确的语法如下：

```
switch (Essais)
{
case 1:
   /* ... */
  break;
case 2:
   /* ... */
   break;
default:
   /* ... */
} 
```

如果您需要范围测试，请使用`if`而不是`switch-case`：

```
if (Essais <= 80)
  return "Cote";
else if (Essais <= 100)
  return "Muvais"; 
```

另请注意，您不能对字符串使用单引号`'`。请改用双引号`"`，并使用类型`std::string`(not `char`) 的变量来存储字符串。

* * *

^((*))准确地说，`case`语句中给出的条件必须是整数类型、枚举类型或*可转换为整数或枚举类型的类类型的**常量表达式*（详见 C++ 标准第 6.4.2/2 节）。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T02:12:07.917

这不是`switch`块的工作方式。你需要做这样的事情：

```
switch (Essais) {
    case 20:
        ...
    case 40:
        ...
    case 60:
        ...
    /* etc, etc */
} 
```

每个都`case`将`switch`语句中的值与特定的常量值进行比较。如果它们相等，则执行该块。在您的代码中，编译器抱怨，因为表达式 like`Essais<=20`不是它可以在编译时评估的常量。

鉴于您正在尝试做的事情，`if ... else if ... else`链条会更合适。 `switch`块只能针对特定值进行测试，并且无法处理测试范围，这似乎是您正在尝试做的事情。*

# asp.net-mvc-3 - mvc3 和 jquery - 检查 RadioButtonFor

> ID：13354647
> 
> 赞同：0
> 
> 时间：2012-11-13T02:04:55.880
> 
> 标签：asp.net-mvc-3, jquery-selectors

我有 3 个在 mvc3 视图中呈现的单选按钮。我正在使用视图模型，以下是呈现 radioButtonFor 的 View.aspx 页面：

```
<%= Html.RadioButtonFor(model => model.Input.YesNoMaybe, item.Value, new { id = String.Format("Input_YesNoMaybe_{0}", item.Value) })%> 
```

有人可以帮我弄清楚如何简单地访问和选择3 个单选按钮中的**第二个**以使用 jQuery进行**检查吗？**

到目前为止，我已经尝试了以下多种变体：

```
$("input[name='Input.YesNoMaybe_1']").attr('checked', 'checked'); 
```

这是正在呈现的 HTML：

```
<div id="divEscrowFeeSplit">
<input type="radio" value="1" name="Input.YesNoMaybe" id="Input_YesNoMaybe_1" data-val-required="required." data-val-range-min="1" data-val-range-max="2147483647" data-val-range="select a valid option" data-val-number="Must be a number." data-val="true">
<label for="Input_YesNoMaybe_1">Yes</label>&nbsp;
<input type="radio" value="2" name="Input.YesNoMaybe" id="Input_YesNoMaybe_2">
<label for="Input_YesNoMaybe_2">No</label>&nbsp;
<input type="radio" value="3" name="Input.YesNoMaybe" id="Input_YesNoMaybe_3" checked="checked">
<label for="Input_YesNoMaybe_3">Maybe</label>&nbsp; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T02:12:45.093

试试这个：

```
$("#Input_YesNoMaybe_1").attr('checked', 'checked'); 
```

# sql-server-2008 - sql 根据前一个 int 列更新 int 列

> ID：13354653
> 
> 赞同：0
> 
> 时间：2012-11-13T02:05:27.517
> 
> 标签：sql-server-2008

我有一个基本表 FoodSales，其中有 3 列 SaleForDay decimal (10,2), SalesToDate decimal (10,2), ItemOrder Int

数据是这样的

```
SaleForDay|SalesToDate|ItemOrder
4.99|4.99|1  
12.99||2
14.99||3
5.99||4

```

我试图得到结果

```
SaleForDay|SalesToDate|ItemOrder
4.99|4.99|1  
12.99|17.98|2
14.99|32.97|3
5.99|38.96|4

```

这里的方法是 SalesToDate = 上一个 itemorder SalesToDate + Current SaleforDay 值。

来帮忙。

```
创建表#FruitSales
(
   SaleForDay 十进制 (10, 2),
   SalesToDate DECIMAL (10, 2),
   ItemOrder INT
);

插入#FruitSales（SaleForDay、SalesToDate、ItemOrder）
值（'4.99'，'4.99'，'1'），
       ('12.99', NULL, '2'),
       ('14.99', NULL, '3'),
       ('5.99', NULL, '4');

从#FruitSales中选择*；

删除表#FruitSales；

```

感谢您的帮助，我意识到这可能很简单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T02:36:10.633

尝试这个：

```
;WITH CumulativeData AS
(
SELECT b.ItemOrder, SUM(a.SaleForDay) AS TotalSales
  FROM #FruitSales a INNER JOIN #FruitSales b
    ON a.ItemOrder <= b.ItemOrder
 GROUP BY  b.ItemOrder
)
UPDATE a
SET a.SalesToDate =  TotalSales 
  FROM #FruitSales a INNER JOIN CumulativeData  b
    ON a.ItemOrder = b.ItemOrder; 
```

另一种选择：

```
UPDATE a
SET SalesToDate = TotalSales 
  FROM #FruitSales a CROSS APPLY 
       (SELECT SUM(SaleForDay) TotalSales FROM #FruitSales b WHERE b.ItemOrder <= a.ItemOrder) b 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T02:37:16.677

```
CREATE TABLE #FruitSales
(
   SaleForDay    DECIMAL (10, 2),
   SalesToDate   DECIMAL (10, 2),
   ItemOrder     INT
);

INSERT INTO #FruitSales (SaleForDay, SalesToDate, ItemOrder)
VALUES ('4.99', '4.99', '1'),
       ('12.99', NULL, '2'),
       ('14.99', NULL, '3'),
       ('5.99', NULL, '4');

update f
SET SalesToDate = (select sum(saleforday) from #FruitSales ff where ff.itemorder <= f.itemorder)
from #FruitSales f

SELECT * FROM #FruitSales; 
```

# c# - 如何在C#中显示计时器的刻度

> ID：13354661
> 
> 赞同：1
> 
> 时间：2012-11-13T02:07:04.283
> 
> 标签：c#, timer

我想知道我怎样才能实现这个目标？

```
 private void btnProcess_Click(object sender, EventArgs e)
{
    timer1.Start();
    //100 plus line of code here
    timer1.Stop();
}

int i = 0;

private void timer1_Tick(object sender, EventArgs e)
{
    i++;
    label1.text = i.toString();
} 
```

我想要发生的是，当我按下按钮时，计时器将运行并在 label1.text 中显示时间，它会停止，直到达到计时器停止功能

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T02:13:37.967

```
var sw = Stopwatch.StartNew();
//100 lines of code... 
label1.Text = sw.Elapsed.ToString(); 
```

？？？

# macos - NSPasteboard readObjectsForClasses:options: 返回值两次

> ID：13354663
> 
> 赞同：0
> 
> 时间：2012-11-13T02:07:38.200
> 
> 标签：macos, cocoa, osx-mountain-lion, duplicate-data, nspasteboard

切入正题，然后：

第一个片段（AppDelegate）：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {
    //...code taken out...

    [NSEvent addGlobalMonitorForEventsMatchingMask:NSKeyDownMask handler:^(NSEvent *incomingEvent) {
        if ([incomingEvent type] == NSKeyDown) {
            NSUInteger flags = [incomingEvent modifierFlags] & NSDeviceIndependentModifierFlagsMask;
            if (flags==NSCommandKeyMask && ([incomingEvent keyCode] == 8)) {
                [ClipboardUtilities logger:@"cmd+c recognized"];
                [self determineAndAddToHistory];
            }
        }
    }];
} 
```

第二个片段（AppDelegate）：

```
-(void) determineAndAddToHistory {
    id clipDat = [ClipboardUtilities getClipboardDataNatively];
    if ([clipDat isKindOfClass:[NSAttributedString class]])
        NSLog(@"clipDat.string = %@",((NSAttributedString*)clipDat).string);
} 
```

第三个片段（ClipboardUtilities 类）：

```
+(id) getClipboardDataNatively {
    NSPasteboard *pasteboard = [NSPasteboard generalPasteboard];
    NSArray *classArray = @[[NSAttributedString class], [NSImage class]];
    NSDictionary *options = [NSDictionary dictionary];

    NSArray *objectsToPaste = nil;
    BOOL ok = [pasteboard canReadObjectForClasses:classArray options:options];
    if (ok) {
        objectsToPaste = [pasteboard readObjectsForClasses:classArray options:options];
    }
        NSLog(@"objectsToPaste count = %li",[objectsToPaste count]);
    return [objectsToPaste objectAtIndex:0];
} 
```

我注意到一些奇怪的行为，我将尝试用一个例子来解释：

**输入**

1.  Cmd+C 字符串“A”
2.  Cmd+C 字符串“B”
3.  Cmd+C 字符串“C”
4.  Cmd+C 字符串“D”

**从确定AndAddToHistory 的输出**

1.  一个
2.  一个
3.  乙
4.  C

所以我注意到它出于某种原因保留了第一个项目......然后每次都返回我第二个最近的项目。我尝试在 getClipboardDataNatively 方法中输出 objectsToPaste 数组，但仍然如此。有人可以让我知道我将如何解决这个问题，或者他们是如何解决的吗？

PS 我的 ClipboardUtilities 类没有实现任何委托，或者继承自 NSObject 以外的任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T04:31:06.540

好吧，我想既然没有人喜欢长问题（我必须弄清楚如何缩短这个问题），我想出了一些办法。出于某种原因，我很快就得到了热键调用（实际上调用键后剪贴板得到更新）。结果，我只是有一点延迟，我的模型现在已正确更新：

```
NSTimer* briefDelay = [NSTimer scheduledTimerWithTimeInterval:0.1 target:self selector:@selector(determineAndAddToHistory) userInfo:nil repeats:NO];
[[NSRunLoop mainRunLoop] addTimer:briefDelay forMode:NSRunLoopCommonModes]; 
```

根据文档，我不会手动使计时器无效：

```
repeats
    If YES, the timer will repeatedly reschedule itself until invalidated. If NO, the timer will be invalidated after it fires. 
```

# php - PHP上的SQL链接服务器查询错误

> ID：13354665
> 
> 赞同：1
> 
> 时间：2012-11-13T02:07:49.900
> 
> 标签：php, sql-server, linked-server

我有一个使用链接服务器的 MSSQL 查询。该查询非常适合 MSSMS。

但我不能让它在 PHP 上工作。

```
SELECT 
l.USER_KEY as id, 
l.USER_ID as username, 
CASE WHEN l.PASSWORD = 'x' THEN 'blaze' WHEN l.PASSWORD = 'b' THEN 'xtreme' END AS server, 
CASE WHEN l.CHECKLOGIN = 0 THEN 'offline' WHEN l.CHECKLOGIN = 1 THEN 'online' WHEN l.CHECKLOGIN = 2 THEN 'banned' END AS status,
l.LOGINIP AS ip_address,
CASE WHEN l.PASSWORD = 'x' THEN g.CHARID0 WHEN l.PASSWORD = 'b' THEN xg.CHARID0 END AS slot1,
CASE WHEN l.PASSWORD = 'x' THEN g.CHARID1 WHEN l.PASSWORD = 'b' THEN xg.CHARID1 END AS slot2,
CASE WHEN l.PASSWORD = 'x' THEN g.CHARID2 WHEN l.PASSWORD = 'b' THEN xg.CHARID2 END AS slot3,
Convert(varchar, LOGINTIME,111) AS last_login
FROM game.dbo.CHAR_INFOR AS g
    JOIN login.dbo.USER_CHECK_LOGIN AS l 
    ON g.USER_KEY = l.USER_KEY
    JOIN XTREME.game.dbo.CHAR_INFOR AS xg --this is a linked server
    ON xg.USER_KEY = l.USER_KEY
    WHERE PASSWORD LIKE 'sbhacker0%'
ORDER BY last_login 
```

此查询在 PHP 上返回：（错误）

```
 Heterogeneous queries require the ANSI_NULLS and ANSI_WARNINGS options to be set for the connection. This ensures consistent query semantics. Enable these options and then reissue your query. (severity 16) 
 General SQL Server error: Check messages from the SQL Server (severity 16)
 Query failed 
```

这是我在 PHP 中的脚本，请查看。

```
$con = mssql_connect('host\INST','user','pass') 
    or die('Could not connect to the server!');

// Select a database:
mssql_select_db('login') 
    or die('Could not select a database.');

// Example query: (TOP 10 equal LIMIT 0,10 in MySQL)
$SQL = "SELECT 
l.USER_KEY as id, 
l.USER_ID as username, 
CASE WHEN l.PASSWORD = 'x' THEN 'blaze' WHEN l.PASSWORD = 'b' THEN 'xtreme' END AS server, 
CASE WHEN l.CHECKLOGIN = 0 THEN 'offline' WHEN l.CHECKLOGIN = 1 THEN 'online' WHEN l.CHECKLOGIN = 2 THEN 'banned' END AS status,
l.LOGINIP AS ip_address,
CASE WHEN l.PASSWORD = 'x' THEN g.CHARID0 WHEN l.PASSWORD = 'b' THEN xg.CHARID0 END AS slot1,
CASE WHEN l.PASSWORD = 'x' THEN g.CHARID1 WHEN l.PASSWORD = 'b' THEN xg.CHARID1 END AS slot2,
CASE WHEN l.PASSWORD = 'x' THEN g.CHARID2 WHEN l.PASSWORD = 'b' THEN xg.CHARID2 END AS slot3,
Convert(varchar, LOGINTIME,111) AS last_login
FROM game.dbo.CHAR_INFOR AS g
    JOIN login.dbo.USER_CHECK_LOGIN AS l 
    ON g.USER_KEY = l.USER_KEY
    JOIN XTREME.game.dbo.CHAR_INFOR AS xg
    ON xg.USER_KEY = l.USER_KEY
    WHERE PASSWORD LIKE 'sbhacker0%'
ORDER BY last_login";

// Execute query:
$result = mssql_query($SQL) 
```

请指教，谢谢。

# javascript - 为使用 forloop.counter 的 Div 设置样式

> ID：13354671
> 
> 赞同：0
> 
> 时间：2012-11-13T02:08:42.860
> 
> 标签：javascript, css, django

我有一个文本区域的 contenteditable div，我想设置它的样式

```
<div id="reply_body{{forloop.counter}}" name="reply_body"  contenteditable="true">Begin typing </div> 
```

但是，我使用 {{forloop.counter}} 因为我将 div 中的信息传递给 javascript 函数。IE，

```
<script type="text/javascript">
function copycontent(x)
{
document.getElementById('replies'+x).value=
document.getElementById('reply_body'+x).innerHTML;
};
</script> 
```

所以，我的问题是，如果 id 的一部分是 {{forloop.counter}}，我该如何设置这个 contenteditable div 的样式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T02:14:10.243

使用一个类来设置它的样式：

```
<div id="..." class="reply"> 
```

CSS：

```
.reply {
    /* Your styles here */
} 
```

ID（`#`在 CSS 中表示）对于一个元素必须是唯一的，类（`.`在 CSS 中表示）可以与多个元素一起使用。

# functional-programming - 如何判断一个序列是否在增加？

> ID：13354673
> 
> 赞同：2
> 
> 时间：2012-11-13T02:08:48.490
> 
> 标签：functional-programming, scheme

这是一个更大任务的一个片段，但我真的很挣扎。scheme/lisp 的资源比 C、Java 和 Python 更有限。

如果我传入一个包含数字列表的 var list1，我如何判断该列表是否单调递增？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T03:18:44.523

如果一个列表的元素少于两个，那么我们会说“是”。

如果一个列表有两个或更多元素，那么如果第一个大于第二个，我们会说“不”，否则在列表的尾部递归。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T04:47:59.173

```
(define (monotonically-increasing? lst)
  (apply < lst)) 
```

或者，如果你想要单调不递减：

```
(define (monotonically-non-decreasing? lst)
  (apply <= lst)) 
```

是的，就这么简单。完全 O(n)，不需要手动递归。

**奖金：**为了更好的衡量标准：

```
(define (sum lst)
  (apply + lst)) 
```

:-P

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T02:35:06.793

如果效率不是问题，您可以这样做：

```
(equal? list1 (sort list1 <=)) 
```

这是一个`O(n log n)`解决方案，因为排序。对于最佳解决方案，只需将每个元素与下一个元素进行比较，并测试当前元素是否小于或等于下一个元素，注意最后一个元素（没有下一个元素）。这将产生一个`O(n)`解决方案。

这是需要做什么的总体思路，以功能性风格编写。仍然不是编写解决方案的最快方法，但至少它`O(n)`很短；您可以将其用作从头开始编写更简单解决方案的基础：

```
(define (increasing? lst)
  (andmap <=
          lst
          (append (cdr lst) '(+inf.0)))) 
```

上面检查每个数字`lst`是否小于或等于下一个数字。该`andmap`过程测试`<=`条件是否适用于两个列表中的所有元素对。第一个列表是作为参数传递的列表，第二个列表是同一个列表，但向右移动了一个位置，最后添加了正无穷值以在两个列表中保持相同的大小 - 它适用于最后一个元素，因为任何数字都将小于无穷大。例如，使用此列表：

```
(increasing? '(1 2 3)) 
```

上面的过程调用将检查`(<= 1 2)`and `(<= 2 3)`，`(<= 3 +inf.0)`因为所有条件都计算为`#t`整个过程返回`#t`。如果只有一个条件失败，整个过程就会返回`#f`。

# grails - Grails设置脚手架下拉框的默认值

> ID：13354674
> 
> 赞同：0
> 
> 时间：2012-11-13T02:09:06.597
> 
> 标签：grails

是否可以在 Grails 中为生成的（脚手架的）状态下拉框设置默认值？我希望这是我可以在域类或控制器类中做的事情：

```
class State {

    String name
    String code

    static mapping = { sort name: "asc" }

    String toString() {
        return this.name;
    }
}

class Person implements Comparable {

    String firstName
    String lastName
    State state

    String toString() {
        return this.lastName + ", " + this.firstName;
    }
} 
```

我已经尝试在 State 域类中显式设置`String name="Pennsylvania"`和但没有运气。`String code="PA"`我在 Bootstrap.groovy 中引导状态数据：

```
def init = { servletContext ->
    if (!State.count()) {
        new State(name: "Alabama", code:"AL").save(failOnError: true)
        new State(name: "Alaska", code:"AK").save(failOnError: true)
        new State(name: "Arizona", code:"AZ").save(failOnError: true)
        new State(name: "Arkansas", code:"AR").save(failOnError: true)
        ....
    }
} 
```

* * *

更新：

PersonController.groovy：

```
def create() {
    // [personInstance = new Person(params)]
    def personInstance = new Person(params)
    personInstance.state = new State("Pennsylvania", "PA")
    [personInstance: personInstance]
} 
```

状态.groovy：

```
public State(String name, String code) {
    this.name = name
    this.code = code
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T02:23:34.917

如果您尝试为“new Person”页面设置状态下拉列表的默认值，那么您可能希望将 Person 的“state”成员的默认值设置为您在 Bootstrap 中创建的“Pennsylvania”状态。

实际上，我认为更好的方法是实际生成 PersonController，然后修改“create”闭包以设置 Person.state 的初始值

# php - 使用 2 个相同的递归来做 2 个不同的事情

> ID：13354676
> 
> 赞同：1
> 
> 时间：2012-11-13T02:09:19.257
> 
> 标签：php, jquery, html, recursion

我试图用**expand 和 collapse**`tree`来显示数据。`JQuery`

 **```
For example my database 
Parent A has AA, AB, AC children
Parent AA has AAA, AAB, AAC
Parent AC has ACA, ACB, ACD
etc. 
```

所以我使用递归来显示数据库中的所有数据。

但是我还需要声明 JQuery，所以我使用相同的`Recursion`代码来生成脚本

我想问的是，有没有办法使用递归一次来生成这两种东西？数据显示在`<body>`标签内，JQuery 在`<head>`标签处声明。

因为我觉得做同样的事情两次会浪费内存。

这是我的`<body>`代码

```
 <?   
      $temp = "";                
      $parent = "";
      $level = 0;
      loadFolders($parent, $level, $temp);

      function loadFolders($parent, $level, $temp){
        $getLevelSql = mysql_query("select * from folders where parent='$parent' and level='$level'");
        $level++;
        while ($getLevelSqlRow = mysql_fetch_array($getLevelSql)){
          $parentID = $getLevelSqlRow['id'];
          $child = $getLevelSqlRow['child'];
          $checkChild = mysql_query("select * from folders where parent='$parentID' and level='$level' ");
          if (mysql_num_rows($checkChild)){
          ?>
            <div class="level1 redFont" id="levelID<?echo $getLevelSqlRow['id'];?>">
              <?echo "$child";?>
            </div>  
            <div class="level2" id="childID<?echo $getLevelSqlRow['id'];?>">
          <?
            loadFolders($parentID, $level, $temp);
          ?>
            </div>
          <?  
          } else {
          ?>
            <div><?echo "$child";?></div>  
          <?
          }
        }
      }
    ?> 
```

这是我的`<head>`代码

```
<script> 
    $(document).ready(function(){

    <?
      include "config.php";
      $temp = "";                
      $parent = "";
      $level = 0;
      loadFolder($parent, $level, $temp);

      function loadFolder($parent, $level, $temp){
        $getLevelSql = mysql_query("select * from folders where parent='$parent' and level='$level'");
        $level++;
        while ($getLevelSqlRow = mysql_fetch_array($getLevelSql)){
          $parentID = $getLevelSqlRow['id'];
          $child = $getLevelSqlRow['child'];
          $checkChild = mysql_query("select * from folders where parent='$parentID' and level='$level' ");
          if (mysql_num_rows($checkChild)){
          ?>
            $("#levelID<?echo $getLevelSqlRow['id'];?>").click(function(){
            $("#childID<?echo $getLevelSqlRow['id'];?>").slideToggle("slow");
          });
          <?
            loadFolder($parentID, $level, $temp);
          ?>
          <?  
          }
        }
      }
    ?>

    });
  </script> 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T02:22:38.757

我没有对此进行测试，因为我没有数据可以做到这一点，但基本上你真的只需要在你的 jquery 代码中使用选择器来从任何点击点找到子部分。

我会嵌套子元素以使其更容易。像这样的东西：

```
 <?   
  $temp = "";                
  $parent = "";
  $level = 0;
  loadFolders($parent, $level, $temp);

  function loadFolders($parent, $level, $temp){
    $getLevelSql = mysql_query("select * from folders where parent='$parent' and level='$level'");
    $level++;
    while ($getLevelSqlRow = mysql_fetch_array($getLevelSql)){
      $parentID = $getLevelSqlRow['id'];
      $child = $getLevelSqlRow['child'];
      $checkChild = mysql_query("select * from folders where parent='$parentID' and level='$level' ");
      if (mysql_num_rows($checkChild)){
        // ** notice I've added item class and nested the children inside
      ?>
        <div class="level1 redFont item" id="levelID<?echo $getLevelSqlRow['id'];?>">
          <?echo "$child";?>
          <div class="children" id="childID<?echo $getLevelSqlRow['id'];?>">
        </div>  

      <?
        loadFolders($parentID, $level, $temp);
      ?>
        </div>
      <?  
      } else {
      ?>
        <div><?echo "$child";?></div>  
      <?
      }
    }
  }
?> 
```

然后你的 jquery 就变成了这样：

```
$(document).ready(function(){

    $('div.item').click(function(){
        $(this).find('>div.children').slideToggle("slow");
    });

}); 
```

无需循环两次并生成一百个处理程序..**

# php - 为什么我的数据会翻倍？

> ID：13354678
> 
> 赞同：-2
> 
> 时间：2012-11-13T02:09:21.753
> 
> 标签：php

出于某种原因，当我显示预订引擎的结果时，它显示的结果如下：

主房间
主房间 2
主房间
主房间 2
备用房间
备用房间 2
备用房间
备用房间 2

它应该显示为：

主房间
主房间 2
备用房间
备用房间 2

希望有人能明白为什么它会因此翻倍。

```
<?php 

$array_rooms =null;

    if (get_user_meta(get_current_user_id(),'admin',true)) {
        $admin = true;
    } else {
        $admin = false;
        }

    ?>

<head>
    </head>

    <body id="results">

        <h1>Available <em>Rooms</em></h1>
      <table>

          <?php
          if($array_rooms != null){
              foreach($array_rooms as $key=>$room) { 

              $special = '';
              $roomRatePlanID = 119;
              if($key==0){ 
                    $room['desc'] = "Main Room"; 
                    $special = '&whp=1';
                    $roomRatePlanID = 68;
              }
              if($key==1){ 
                    $room['desc'] = "Main Room 2"; 
                    $special = '&whp=1';
                    $roomRatePlanID = 68;
              }
              if($key==2){ 
                    $room['desc'] = "Spare Room"; 
                    $special = '&whp=1';
                    $roomRatePlanID = 68;
              }
              if($key==3){ 
                    $room['desc'] = "Spare Room 2"; 
                    $special = '&whp=1';
                    $roomRatePlanID = 68;
              }
?>
          <tr<?php if (!get_user_meta(get_current_user_id(),'admin',true) && strpos($room['desc'],'Main Room') !== false) echo ' class="disabled"'; ?>>
              <td>
                  <div>
                      <h2><a href="/rooms/" target="_blank"><?php echo $room['desc'] ." " . $room['available'] ;?></a></h2>
                      <div><?php
                        if ($room['desc'] == "Main Room"){
                            echo "<strong>Rate: $89.00</strong>';
                        }elseif(($room['desc'] == "Main Room 2")){
                            echo "<strong>$79.00</strong>";
                        } else{
                            if ($admin)
                                $netrate = number_format($room['rates'][119],2);
                            else
                                $netrate = number_format($room['rates'][20] - ($room['rates'][20] / 100 * get_user_meta(get_current_user_id(),'package',true)),2);

                            echo "Customer Rate: <strong>$".number_format($room['rates'][20],2).'</strong> / Net Rate: <strong>$'.$netrate.'</strong>';
                        }?></div>
                      <div><a href="/book/summary?roomTypeCode=<?php echo $room['roomTypeCode'] . $special;?>">Book</a></div>
                      </div>
              </td>
          </tr>

    <tr<?php if (!get_user_meta(get_current_user_id(),'admin',true) && strpos($room['desc'],'Main Room') !== false) echo ' class="disabled"'; ?>>
                  <td>
                      <div>
                          <h2><a href="/rooms/" target="_blank"><?php echo $room['desc'] ." " . $room['available'] ;?></a></h2>
                          <div><?php
                            if ($room['desc'] == "Spare Room"){
                                echo "<strong>Rate: $59.00</strong>';
                            }elseif(($room['desc'] == "Spare Room 2")){
                                echo "<strong>$49.00</strong>";
                            } else{
                                if ($admin)
                                    $netrate = number_format($room['rates'][119],2);
                                else
                                    $netrate = number_format($room['rates'][21] - ($room['rates'][21] / 100 * get_user_meta(get_current_user_id(),'package',true)),2);

                                echo "Customer Rate: <strong>$".number_format($room['rates'][20],2).'</strong> / Net Rate: <strong>$'.$netrate.'</strong>';
                            }?></div>
                          <div><a href="/book/summary?roomTypeCode=<?php echo $room['roomTypeCode'] . $special;?>">Book</a></div>
                          </div>
                  </td>
              </tr>
          <?php } }else{ echo 'no results'; }?>

    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T02:20:56.593

据我所见，这整件事是为每一个`$room`. `h2`在每种情况下都会打印两个s。他们两个`echo $room['desc']`，似乎都包含你只想拥有一次的字符串。所以我猜你只是把你的第一个包裹`<tr>...</tr>`在`if ($room[desc] == "Main Room" || $room[desc] == "Main Room 2"):`... `endif;`。和第二个在同一件事上`Spare Room`。但是，如果您的描述不是这四个值中的任何一个，我不知道您想做什么。现在`<tr>`打印两个 s 是有道理的，因为s`else`内部的条件`<div>`似乎不同。

# list - F# 对象列表

> ID：13354679
> 
> 赞同：1
> 
> 时间：2012-11-13T02:09:37.507
> 
> 标签：list, f#, dynamic-list

对于我的一个项目，我需要一个可以携带多种类型的列表，并且我不想做任何转换，所以我尝试使用`obj list`s. 下面是一些示例代码来展示一些应该可以工作的东西，但由于某种原因不能：

```
type Fruit() =
  member this.Kind = "I'm a tasty fruit!"

type Apple() =
  inherit Fruit()
  member this.Kind = "I'm a crispy apple!"

type Cherry() =
  inherit Fruit()
  member this.Kind = "I'm a juicy cherry!"

> (new Fruit()).Kind
val it : string = "I'm a tasty fruit!"

... // And so on; it works as expected for all three fruits

> let aFruit = [new Fruit()]
val aFruit : Fruit list = [FSI_0002+Fruit]

> aFruit.Head.Kind                          // Works just fine
val it : string = "I'm a tasty fruit!"

> let fruits : obj list = [new Fruit(); new Apple(); new Cherry]
val fruits : obj list = [FSI_0002+Fruit; FSI_0002+Apple; FSI_0002+Cherry]

> fruits.Head                               // Okay, so we can extract items just fine. It also kept the property!
val it : obj = FSI_0002+Fruit {Kind = "I'm a tasty fruit!";}

> it.Kind                                   // This doesn't work. Why? What am I missing?
 error FS0039: The field, constructor or member 'Kind' is not defined 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T02:28:58.070

问题是`it`具有类型`obj`，因为列表是一个`obj list`并且`obj`没有`.Kind`成员。您可以使用父类型 - 比如

```
let fruits : Fruit list = [new Fruit(); new Apple(); new Cherry()];;

val fruits : Fruit list = [FSI_0003+Fruit; FSI_0003+Apple; FSI_0003+Cherry] 
```

然后通过以下方式访问它：

```
fruits.Head.Kind;;
val it : string = "I'm a tasty fruit!" 
```

# c - 在c中找到2个文本文件之间的区别

> ID：13354681
> 
> 赞同：-2
> 
> 时间：2012-11-13T02:10:59.340
> 
> 标签：c

我的代码中的一个条件不起作用。这个条件是如果第一个文件变成 4 行，第二个文件变成 5 行。两个文件的前 4 行相同，但第二个文件的第 5 行可能不同或相同。我的输出必须显示“是的，第 5 行有不同”，但它表示这些文件是相同的。如何修复此代码？

**第一个文件：**

```
one
two
three
four 
```

**第二个文件：**

```
one
two
three
four
five 
```

**我的代码：**

```
void diff(char* fileptr1, char* fileptr2)
{
  int maxlinelen=BUFF; //maximum line length buffer size

 /** string arrays pointers **/
  char *linebuffer1; 
  char *linebuffer2;      

  /** file pointers **/
  FILE *fp1;
  FILE *fp2;

  int line=0;    //line counter
  int counter=0; //identical flag

  linebuffer1=(char*)malloc(maxlinelen * sizeof(char*)); //memory allocation for linebuffers
  linebuffer2=(char*)malloc(maxlinelen * sizeof(char*));

  if((linebuffer1==NULL) || (linebuffer2==NULL))   //check memory allocating process
    {
     fprintf(stderr,"Command:diff :Memory allocating failed!\n");
      exit(1);
    }
  if(((fp1=fopen(fileptr1,"r"))!=NULL)&&((fp2=fopen(fileptr2,"r"))!=NULL))  //make sure both files open?
    {
      //read both files lines till end of line
      while(((fgets(linebuffer1,maxlinelen,fp1))!=NULL)&&((fgets(linebuffer2,maxlinelen,fp2))!=NULL)) 
    {
      while(strlen(linebuffer1)==maxlinelen-1) // perfect time for memory reallocating
        {
          maxlinelen*=DOUBLE;  //grow size
          linebuffer1=realloc(linebuffer1,maxlinelen * sizeof(char)); //reallocate memory to new size
          if(linebuffer1==NULL) //make sure allocation is succesfull
        {
          fprintf(stderr,"Command : diff :Memory reallocating failed for linebuffer1\n");
          exit(1);
        }
          fgets(linebuffer1+(maxlinelen/DIV-1),(maxlinelen/DIV)+1,fp1); //continue read line after reallocation
        }
      while(strlen(linebuffer2)==maxlinelen-1)
      {
        maxlinelen*=DOUBLE;
        linebuffer2=realloc(linebuffer2,maxlinelen * sizeof(char));
        if(linebuffer2==NULL)
          {
        fprintf(stderr,"Memory reallocating failed for linebuffer2\n");
        exit(2);
          }
        fgets(linebuffer2+(maxlinelen/DIV-1),(maxlinelen/DIV)+1,fp2);  //
      }
      line++;  //increae line counter

      if(strcmp(linebuffer1,linebuffer2)!=0)  //compare both line string arrays if not
             {
           printf("The files are different.The first difference is in line %d\n",line); //diff. here 
           exit(1);
         }

      if(strcmp(linebuffer1,linebuffer2)==0) //compare both line string arrays if same
             {
           counter++; //increase identical counter
         }
    }
      if(counter==line) //if identical counter equal total line
    {
      printf("The files are identical.\n");
    }
    }
  else {
    fprintf(stderr,"Command: diff :File  open failed!\n");

 }

  //fclose(fp1);fclose(fp2);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T02:24:34.423

我相信当任一文件结束时，您对读取文件循环的退出比较都会失败。这导致您不读取文件中的最后一行，从而增加行计数器变量。

您将需要辅助变量来记录每行的 fgets 的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T02:22:22.330

在这里，您使用“&&”作为两个文件的 fgets 结果。因此，当任一文件达到 EOF 时，比较就结束了。

你的第 5 行永远不会被比较。

```
while(((fgets(linebuffer1,maxlinelen,fp1))!=NULL)&&((fgets(linebuffer2,maxlinelen,fp2))!=NULL) 
```

更改此 while 循环条件并修改相关逻辑将帮助您更正代码。

# arrays - 从散列中的数组中获取随机元素

> ID：13354682
> 
> 赞同：-2
> 
> 时间：2012-11-13T02:11:33.113
> 
> 标签：arrays, perl, random

我在 google 上看到了很多关于如何获取随机数组索引的结果，但我无法将其应用于这种情况。

考虑以下：

```
my %hash;
my @array = {"foo", "bar", "poo"};

$hash->{mykey} = @array; 
```

如何从 $hash->{mykey} 中的数组中获取随机元素？类似于以下代码的东西不起作用：

```
my $element = $hash->{mykey}[rand($hash->{mykey})]; 
```

编辑：所以下面的答案对此非常有用。*使我的*问题特别复杂的是我正在使用线程模块，并且完全忘记了共享我附加到散列元素的数组！因此，答案对我不起作用。

在修复了该疏忽之后，以下解决方案完美运行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T03:02:09.987

三个错误。

* * *

1\. 以下创建一个包含一个元素的数组，即对哈希的引用：

```
my @array = {"foo", "bar", "poo"}; 
```

你肯定打算使用

```
my @array = ("foo", "bar", "poo"); 
```

* * *

2.

```
$hash->{mykey} = @array; 
```

是一样的

```
$hash->{mykey} = 3; 
```

您不能以标量存储数组，但可以存储对数组的引用。

```
$hash->{mykey} = \@array; 
```

* * *

3\. 会是

```
rand(@a)    # rand conveniently imposes a scalar context. 
```

对于一个数组，所以它是

```
rand(@{ $ref }) 
```

对数组的引用。这意味着您需要以下内容：

```
my $element = $hash->{mykey}[ rand(@{ $hash->{mykey} }) ]; 
```

或者你可以把它分成两行。

```
my $array = $hash->{mykey};
my $element = $array->[ rand(@$array) ]; 
```

* * *

总之，我们有以下几点：

```
my @array = ( "foo", "bar", "poo" );
my $hash = { mykey => \@array };

my $element = $hash->{mykey}[ rand(@{ $hash->{mykey} }) ]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-13T02:16:41.460

我认为您的第一个问题是数据结构的构建：

```
#always
use strict;
use warnings;

my %hash;
my @array = ("foo", "bar", "poo");

$hash{mykey} = \@array; 
```

您可能应该阅读[perldoc perlreftut](http://p3rl.org/reftut)以熟悉 Perl 与嵌套数据结构（引用）相关的语义。

此时您可以一次创建所有结构，这可能就是您的意思：

```
#always
use strict;
use warnings;

my %hash = ( 
  mykey => ["foo", "bar", "poo"],
); 
```

要找到长度，您只需使用常规 Perl 机制来获取数组的长度：

```
my $length = @{ $hash{mykey} }; 
```

然后是随机元素

```
my $elem = $hash{mykey}[rand $length]; 
```

# python - 如何返回 2 的幂的数字列表？

> ID：13354685
> 
> 赞同：7
> 
> 时间：2012-11-13T02:11:53.493
> 
> 标签：python

```
def problem(n):
myList = []
for j in range(0, n):
    number = 2 ** j
    myList.append(number)
return myList 
```

我希望此代码根据 2 的前 n 个幂返回 2 的幂。例如，如果我输入 4，我希望它返回 [2,4,6,8,16]。现在，如果我输入 4，代码将返回 [1,2,4,8]。我认为是我的范围弄乱了代码。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-13T02:13:18.287

只需使用`range(1,n+1)`它就应该一切正常。 `range`对某些人来说有点混乱，因为它不包括端点。因此，`range(3)`返回列表`[0,1,2]`并`range(1,3)`返回`[1,2]`。

* * *

作为旁注，表单的简单循环：

```
out = []
for x in ...:
   out.append(...) 
```

通常应替换为列表推导：

```
out = [ 2**j for j in range(1,n+1) ] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-01-04T11:42:32.553

没有幂运算符的另一个简单有效的解决方案（O(1) 中的每一步）：

```
def problem(n):
    return [1 << i for i in range(n)] 
```

1 << i 操作是按位操作，对于 i 整数正数转换为 2 ^ i。

[https://en.wikipedia.org/wiki/Arithmetic_shift](https://en.wikipedia.org/wiki/Arithmetic_shift)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T02:20:00.713

如果你想在 O(1) 中完成每一步：

```
def gen(x):
   i = 2
   for n in range(x + 1):
       yield i
       i <<= 1

>>> list(gen(4))
[2, 4, 8, 16, 32] 
```

PS：问题中有一个错字，如果您想要 4 个数字`gen(4)`，请`range(x)`改用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T03:20:40.320

正如@JBernardo 指出的那样，我认为您的问题中有错字。

```
def squares(n):
    power = n
    square_list = []
    for i in range(1,n+1):
        square_list.append(2 ** i)
    return square_list

print squares(4) 
```

将返回

[2,4,8,16]

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-05T06:05:23.083

```
import math
n = input()
a = [i for i in xrange(2, n+1) if (math.log(i)/math.log(2)).is_integer()]
print a
>>> [2, 4, 8, 16 ...] 
```

返回小于或等于 n 的 2 的幂列表

**解释：**
一个数只能是 2 的幂，如果它的对数除以 2 的对数是一个整数。

例如。log(32) = log(2^5) = 5 * log(2)
5 * log(2) 除以 log(2) 得到 5，它是一个整数。

列表中还将有 floor(math.log(n, 2)) 元素，因为如果 n 本身不是 2 的幂，则这是 n 之下 2 的幂数的公式

# c# - DataGridView 单元格在 CellLeave 上为空

> ID：13354688
> 
> 赞同：5
> 
> 时间：2012-11-13T02:12:42.273
> 
> 标签：c#, datagridview, visual-studio-2012

当单元格离开时，我正在尝试对单元格的内容进行一些文本处理。我有以下代码，但是当我在单元格中输入任何文本然后离开时出现以下异常。

```
An unhandled exception of type 'System.NullReferenceException' occurred in Program.exe

Additional information: Object reference not set to an instance of an object. 
```

如果我打破并将鼠标悬停在它上面`.value`确实为空，但我已将数据输入到单元格中！那么给了什么？

```
private void dataGridView1_CellLeave(object sender, DataGridViewCellEventArgs e)
{
    if (e.ColumnIndex == 3)
    {
        string entry = "";
        MessageBox.Show(dataGridView1.Rows[e.RowIndex].Cells[e.ColumnIndex].Value.ToString());
        MakeTextFeet(entry);
    }
    if (e.ColumnIndex == 4)
    {
        string entry = dataGridView1[e.ColumnIndex, e.RowIndex].Value.ToString();
        MakeTextFeet(entry);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T05:23:45.703

当 DataGridView CellLeave 事件触发时，单元格的值处于瞬态。这是因为 DataGridView 可能绑定到数据源，而更改尚未提交。

您最好的选择是使用[CellValueChanged](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.cellvaluechanged.aspx)事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T03:44:33.477

添加一些检查：

```
DataGridViewCell MyCell =  dataGridView1[e.ColumnIndex, e.RowIndex];

if (MyCell != null)
{
    if (MyCell.Value != null)
    {
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T05:03:50.227

我认为你想处理 CellEndEdit 而不是 CellLeave。

在 CellLeave 上，已编辑单元格的 Value 属性仍保持不变（即，您通过破坏和检查 Value 观察到空单元格为 null）。在 CellEndEdit 上，它的新值已设置。

尝试这样的事情，其中​​我试图一般坚持你的原始代码：

```
private void dataGridView1_CellEndEdit(object sender, DataGridViewCellEventArgs e)
{
    DataGridViewCell cell = dataGridView1[e.ColumnIndex, e.RowIndex];

    if (e.ColumnIndex == 3 || e.ColumnIndex == 4)
    {
        string entry = "";
        if (cell.Value != null)
        {
            entry = cell.Value.ToString();
        }
        MessageBox.Show(entry);
        MakeTextFeet(entry);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T02:32:58.780

我认为您正在留下一个空白单元格并尝试处理其值。

当您将留下以下代码的空白单元格值时：

```
string entry = dataGridView1[e.ColumnIndex, e.RowIndex].Value.ToString(); 
```

字符串条目中的值将是空格（entry=""），当您通过将其传递给另一个函数[ MakeTextFeet(entry);] 进一步处理此值时，它会给您错误。

从我的角度来看，这个问题的解决方案是>>>

将每一行代码也放入上述方法中，并将 MakeTextFeet(Entry) 也放入 try 块中。

当您将编写 catch 块时，将该块留空。例如。

```
try
{
.
.
.
}
catch(Exception)
{
} 
```

通过这个东西，你的异常自然会被捕获，但由于它微不足道，它不会显示给你。

# javascript - 如何将我的字符串转换为 Javascript 中的数字？

> ID：13354693
> 
> 赞同：-1
> 
> 时间：2012-11-13T02:12:59.240
> 
> 标签：javascript

> **可能重复：**
> [如何在 javascript 中将 String 变量转换为 int？](https://stackoverflow.com/questions/12040769/how-to-convert-string-variable-to-int-in-javascript)

我有以下内容：

```
var dataElapsed = $("#stats-list").attr("data-elapsed"); 
```

这会创建一个名为 dataElapsed 的字符串，但我需要一个数字。我怎样才能转换这个？

有什么方法可以用 JQuery 进行转换吗？还是我必须使用一些 Javascript 方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T02:14:33.277

试试这个（假设数据属性具有有效的数值）：

```
var dataElapsed = parseFloat($("#stats-list").attr("data-elapsed")); //for decimal. 
```

或者

```
var dataElapsed = parseInt($("#stats-list").attr("data-elapsed"), 10); //for integer. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T02:17:18.177

您可以使用该[`.data()`](http://api.jquery.com/data/#data-html5)方法从数据属性中获取值

```
var dataElapsed = $("#stats-list").data("elapsed"); 
```

# python-3.x - python3打开文件和读取行

> ID：13354694
> 
> 赞同：6
> 
> 时间：2012-11-13T02:13:07.150
> 
> 标签：python-3.x

你能解释一下这段代码发生了什么吗？我似乎不明白如何打开文件并逐行读取它，而不是在 for 循环中同时读取所有句子。谢谢

假设我在文档文件中有这些句子：

```
cat:dog:mice
cat1:dog1:mice1
cat2:dog2:mice2
cat3:dog3:mice3 
```

这是代码：

```
from sys import argv

filename = input("Please enter the name of a file: ")
f = open(filename,'r')

d1ct = dict()
print("Number of times each animal visited each station:")
print("Animal Id           Station 1           Station 2")

for line in f:
     if '\n' == line[-1]:
          line = line[:-1]
     (AnimalId, Timestamp, StationId,) = line.split(':')
     key = (AnimalId,StationId,)
     if key not in d1ct:
          d1ct[key] = 0
     d1ct[key] += 1 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-13T02:18:24.517

神奇之处在于：

```
for line in f:
     if '\n' == line[-1]:
          line = line[:-1] 
```

Python`file`对象的特殊之处在于它们可以在 for 循环中进行迭代。在每次迭代中，它检索文件的下一行。因为它包含行中的最后一个字符，可能是换行符，所以检查和删除最后一个字符通常很有用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-13T09:11:40.970

正如 Moshe 所写，可以迭代打开的文件对象。只是，它们不是`file`Python 3.x 中的类型（就像它们在 Python 2.x 中一样）。如果文件对象以文本模式打开，则迭代单位是一个文本行，包括`\n`.

您可以使用`line = line.rstrip()`删除`\n`加号尾随空格。

如果您想一次读取文件的内容（读入多行字符串），您可以使用`content = f.read()`.

代码中有一个小错误。打开的文件应始终关闭。我的意思是`f.close()`在for循环之后使用。或者，您可以将 open 包装到`with`将为您关闭文件的较新构造——我建议您习惯后一种方法。

# php - jQuery 没有向 codeigniter 发送数据

> ID：13354698
> 
> 赞同：0
> 
> 时间：2012-11-13T02:13:45.983
> 
> 标签：php, jquery, ajax, codeigniter

我正在尝试让 ajax 与 codeigniter 安装一起工作。

这是我的 PHP 函数：

```
 function test() {
            return print_r("hey");
    } 
```

这是JS：

```
 $.ajax({
          type: "POST",
            url: "http://localhost/code/test",
            success: function(data) {
                    alert(data);    
            }
    }); 
```

这很好用，但是，一旦我添加数据，它就不起作用了。

```
 $.ajax({
          type: "POST",
            url: "http://localhost/code/test",
            data: {bar:"foo"}, 
            success: function(data) {
                    alert(data);    
            }
    }); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T08:55:26.173

请检查以下内容

```
$.ajax({
          type: "POST",
            url: "http://localhost/code/test",
            data: "&bar=foo&isAjax="+true, 
            success: function(data) {
                    alert(data);    
            }
    }); 
```

和控制器...

```
function test() {
            if($this->input->post('isAjax')){
                  return print_r("hey");
            }
            else{
                  //do another thing
            }

    } 
```

还有一件事，如果你想以 json 格式添加数据，那么你必须在 $.ajax 对象中添加另一个属性，即`datatype: "json"`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T09:16:38.797

使用以下：

```
$.ajax({
          type: "POST",
          url: "http://localhost/code/test",
          dataType: 'json',
          data: {'bar':'foo'},
          success: function(data) {
                  alert(data);    
          }
    }); 
```

或者您可以使用速记版本：

```
$.post("http://localhost/code/test", {'bar':'foo'}, function(data) {
    alert(data);
}); 
```

你的php代码应该是：

```
function test() {
    echo "hey";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T12:28:45.110

尝试以下操作：

```
$.ajax({
    type: "POST",
    url: "http://localhost/code/test",
    data: "bar=foo&name=cyberbob", 
    success: function(data) {
            alert(data);    
    }
}); 
```

# python - Python：如何重构循环导入

> ID：13354700
> 
> 赞同：8
> 
> 时间：2012-11-13T02:14:18.293
> 
> 标签：python, refactoring

我有一个你可以做的事情，`engine.setState(<state class>)`它会实例化你给它的类类型并开始在新状态下运行。

里面有`SelectFileState`一个按钮可以去`NewFileState`，on `NewFileState`，有一个按钮可以返回`SelectFileState`。

现在，在开始时`SelectFileState`，我正在导入`NewFileState`（所以我可以稍后在课堂上做`engine.setState(NewFileState)`。在开始时`NewFileState`，我也在导入`SelectFileState`（所以我以后可以回到`SelectFileState`）。

但是，这会创建循环导入，如其他一些帖子中所述。有人说循环导入表明设计不好，应该重构。

我知道我可以通过`SelectFileState`在需要使用它之前直接导入来解决这个问题，但我宁愿以正确的方式做事并重构它。

现在我想知道..你会如何重构它？

谢谢。

*编辑*： *Pydsigner 建议我将这两个文件合并为一个，因为它们彼此非常相关。但是，我不能将每个具有循环依赖关系的状态都放入一个文件中，因此必须有一种更好的方法。有任何想法吗？*

*2编辑*： *我现在通过不使用`from x import y`语法来规避这个问题，而只是做`import x`. 这不是一个可取的解决方案，我想知道解决这种事情的“Pythonic”方式。只是将文件合并在一起不能永远解决问题。*

编码：

**选择文件状态**

```
from states.state import State
from states.newfilestate import NewFileState

from elements.poster import Poster
from elements.label import Label
from elements.button import Button
from elements.trifader import TriFader

import glob
import os

class SelectFileState(State):
    def __init__(self, engine):
        super().__init__(engine)

    def create(self):
        self.engine.createElement((0, 0), Poster(self.engine.getImage('gui_loadsave')), 1)
        self.engine.createElement((168, 30), Label("Load a game", 40), 2)
        self.engine.createElement((400, 470), Button("New save", code=self.engine.createElement, args=((0, 0), TriFader(NewFileState, False), -240)), 3)

        ycounter = 150

        globs = glob.glob("save\\*.mcw")
        for file in globs:
            self.engine.createElement((200, ycounter), Button(os.path.basename(file)[:-4]), 2)
            ycounter += 50 
```

**新文件状态**

```
from states.state import State
from states.selectfilestate import SelectFileState

from elements.poster import Poster
from elements.label import Label
from elements.button import Button
from elements.inputbox import InputBox
from elements.trifader import TriFader

class NewFileState(State):
    def __init__(self, engine):
        super().__init__(engine)

    def create(self):
        self.engine.createElement((0, 0), Poster(self.engine.getImage('gui_loadsave')), 1)
        self.engine.createElement((135, 30), Label("Make a new save", 40), 2)

        self.lvlname = self.engine.createElement((180, 212), InputBox(length=25, text="World name"), 2)
        self.engine.createElement((200, 240), Button(text="Ok", code=self.createSave, args=()), 2)

    def createSave(self):
        open("save\\" + self.lvlname.getText() + ".mcw", 'w')
        self.engine.createElement((0, 0), TriFader(SelectFileState), -240) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T02:18:05.467

在没有看到代码的情况下，最有意义的是合并这两个文件。如果它们如此紧密地交织在一起，您可能可以将它们放在一起，而不会出现任何奇怪的不合适的地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T02:38:09.943

在 Python 中，导入不必出现在模块的开头。实际上它们可以出现在函数中，因此在 NewFileState.py 中，您可以将 SelectFileState 的导入移动到 NewFileState.create 中，您可以对 SelectFileState.py 进行类似的更改

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T02:54:44.967

你可以在这里做的是，因为当代码运行时你只需要互惠类，类被实例化和方法被调用，就是让类名对父模块可用 - “状态”并从那里导入你的名字：

状态。**初始化**.py

```
from states.selectfilestate import SelectFileState
from states.newfilestate import NewFileState 
```

此时，两个子模块都将被初始化——即使在执行主体期间他们将“看到”模块的不完整版本，但`states` 在此阶段不会访问该模块。当任何一个类被实际实例化时，`states.__init__.py`都将完成执行，并且对模块的引用`states`将指向完整的模块对象。

在 state.selectfilestate 中：

```
import states
...
        self.engine.createElement((0, 0), TriFader(states.SelectFileState), -240) 
```

在 state.newfilestare 上：

```
import states
...
        self.engine.createElement((0, 0), TriFader(SelectFileState), -240) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T04:04:30.210

您可以在字典映射中隐藏实际的类引用，而不是传递类引用，而是传递一个映射到真实类的常量值。这可以作为一个独立模块中的 dict 保存，或者它可以包装在一个单独的 StateManager 类中，该类处理检索下一个状态。

这种方法的问题是您需要手动更新状态列表和从常量到类引用的映射。

这是一个示例实现：

**states.const**

```
# This module is states.const

(
    STATE_SELECT_FILE,
    STATE_NEW_FILE,
) = range(2) # manually update this number when you add/remove states 
```

**状态映射**

```
# This module is states.mapping
from states.const import *
from states.newfilestate import NewFileState
from states.selectfilestate import SelectFileState

STATE_MAPPING = {
    STATE_SELECT_FILE : SelectFileState,
    STATE_NEW_FILE : NewFileState,
} 
```

**选择文件状态**

```
from states.const import STATE_NEW_FILE
# ... snip ...
... TriFader(STATE_NEW_FILE, False) ... 
```

**新文件状态**

```
from states.const import STATE_SELECT_FILE
# ... snip ...
... TriFader(STATE_SELECT_FILE) ... 
```

**引擎.setState()**

```
from states.mapping import STATE_MAPPING

def setState(class_key):
    obj = STATE_MAPPING[class_key]()
    # ... do other stuff ... 
```

# android - android - 小部件按钮点击次数

> ID：13354702
> 
> 赞同：0
> 
> 时间：2012-11-13T02:14:32.370
> 
> 标签：android, android-widget

事情是这样的：

我有一个小部件，上面有很多按钮。现在，我想跟踪是否从小部件中单击按钮。在正常布局中：

```
public void onClick(...){
     // other codes
     Log.d("", "clicked");
} 
```

在小部件中怎么样？谢谢。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T03:02:08.683

您可以像这样设置 onclickpendingintent

```
views.setImageViewResource(R.id.imagebutton, R.drawable.buttonw);
Intent i = new Intent(context, top.class);
i.putExtra("widget", "1");
PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, i, 0);
views.setOnClickPendingIntent(R.id.imagebutton, pendingIntent); 
```

这是一个将 onclick 设置为 imageview 的示例，该 imageview 将在单击 imageview 时启动应用程序

如果您有任何问题，请随时在评论中提问

# eclipse - Eclipse 启动问题

> ID：13354705
> 
> 赞同：6
> 
> 时间：2012-11-13T02:14:46.700
> 
> 标签：eclipse

突然之间，曾经完美运行的 Eclipse 将不再启动。这是日志：

```
!SESSION 2012-11-13 11:10:21.718 -----------------------------------------------
eclipse.buildId=M20060921-0945
java.version=1.7.0_09
java.vendor=Oracle Corporation
BootLoader constants: OS=win32, ARCH=x86, WS=win32, NL=ko_KR
Framework arguments:  -vm C:\j2sdk1.4.2_19\bin\javaw.exe
Command-line arguments:  -os win32 -ws win32 -arch x86 -vm C:\j2sdk1.4.2_19\bin\javaw.exe

!ENTRY org.eclipse.equinox.common 4 0 2012-11-13 11:10:23.281
!MESSAGE FrameworkEvent.ERROR
!STACK 0
org.osgi.framework.BundleException: The bundle could not be resolved. Reason: Missing Constraint: Bundle-RequiredExecutionEnvironment: CDC-1.0/Foundation-1.0,J2SE-1.3
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:294)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.resume(AbstractBundle.java:329)
    at org.eclipse.osgi.framework.internal.core.Framework.resumeBundle(Framework.java:1046)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:573)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.incFWSL(StartLevelManager.java:495)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.doSetStartLevel(StartLevelManager.java:275)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:455)
    at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:189)
    at org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run(EventManager.java:291)

!ENTRY org.eclipse.update.configurator 4 0 2012-11-13 11:10:23.312
!MESSAGE FrameworkEvent.ERROR
!STACK 0
org.osgi.framework.BundleException: The bundle could not be resolved. Reason: Missing Constraint: Bundle-RequiredExecutionEnvironment: J2SE-1.4,CDC-1.0/Foundation-1.0,J2SE-1.3
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:294)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.resume(AbstractBundle.java:329)
    at org.eclipse.osgi.framework.internal.core.Framework.resumeBundle(Framework.java:1046)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:573)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.incFWSL(StartLevelManager.java:495)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.doSetStartLevel(StartLevelManager.java:275)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:455)
    at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:189)
    at org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run(EventManager.java:291)

!ENTRY org.eclipse.core.runtime 4 0 2012-11-13 11:10:23.328
!MESSAGE FrameworkEvent.ERROR
!STACK 0
org.osgi.framework.BundleException: The bundle could not be resolved. Reason: Missing Constraint: Bundle-RequiredExecutionEnvironment: CDC-1.0/Foundation-1.0,J2SE-1.3
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:294)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.resume(AbstractBundle.java:329)
    at org.eclipse.osgi.framework.internal.core.Framework.resumeBundle(Framework.java:1046)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:573)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.incFWSL(StartLevelManager.java:495)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.doSetStartLevel(StartLevelManager.java:275)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:455)
    at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:189)
    at org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run(EventManager.java:291)

!ENTRY org.eclipse.osgi 4 0 2012-11-13 11:10:23.328
!MESSAGE Bundle initial@reference:file:plugins/org.eclipse.equinox.common_3.2.0.v20060603.jar/ was not resolved.

!ENTRY org.eclipse.osgi 4 0 2012-11-13 11:10:23.328
!MESSAGE Bundle initial@reference:file:plugins/org.eclipse.update.configurator_3.2.2.R32x_v20070111.jar/ was not resolved.

!ENTRY org.eclipse.osgi 4 0 2012-11-13 11:10:23.328
!MESSAGE Bundle initial@reference:file:plugins/org.eclipse.core.runtime_3.2.0.v20060603.jar/ was not resolved.

!ENTRY org.eclipse.osgi 4 0 2012-11-13 11:10:23.343
!MESSAGE Application error
!STACK 1
java.lang.IllegalStateException: Unable to acquire application service. Ensure that the org.eclipse.core.runtime bundle is resolved and started (see config.ini).
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:65)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:400)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:177)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.core.launcher.Main.invokeFramework(Main.java:336)
    at org.eclipse.core.launcher.Main.basicRun(Main.java:280)
    at org.eclipse.core.launcher.Main.run(Main.java:977)
    at org.eclipse.core.launcher.Main.main(Main.java:952)

!ENTRY org.eclipse.osgi 2 0 2012-11-13 11:10:23.625
!MESSAGE The following is a complete list of bundles which are not resolved, see the prior log entry for the root cause if it exists:
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-11-13 11:10:23.625
!MESSAGE Bundle update@plugins/com.ibm.etools.emf.event_3.0.0.v20060918_M.jar [4] was not resolved.
!SUBENTRY 2 com.ibm.etools.emf.event 2 0 2012-11-13 11:10:23.625
!MESSAGE Missing required bundle org.eclipse.emf.ecore_[2.2.0,3.0.0).
!SUBENTRY 2 com.ibm.etools.emf.event 2 0 2012-11-13 11:10:23.625
!MESSAGE Missing required bundle org.eclipse.core.runtime.compatibility_[3.1.0,4.0.0).
!SUBENTRY 2 com.ibm.etools.emf.event 2 0 2012-11-13 11:10:23.625
!MESSAGE Missing required bundle org.eclipse.core.runtime_[2.1.0,4.0.0).
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-11-13 11:10:23.625
!MESSAGE Bundle update@plugins/com.jcraft.jsch_0.1.28.jar [7] was not resolved.
!SUBENTRY 2 com.jcraft.jsch 2 0 2012-11-13 11:10:23.625
!MESSAGE Missing Constraint: Bundle-RequiredExecutionEnvironment: J2SE-1.4
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-11-13 11:10:23.625
!MESSAGE Bundle update@plugins/org.apache.ant_1.6.5/ [8] was not resolved.
!SUBENTRY 2 org.apache.ant 2 0 2012-11-13 11:10:23.625
!MESSAGE Missing Constraint: Bundle-RequiredExecutionEnvironment: J2SE-1.2
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-11-13 11:10:23.625
!MESSAGE Bundle update@plugins/org.apache.axis_1.3.0.v200608161946/ [9] was not resolved.
!SUBENTRY 2 org.apache.axis 2 0 2012-11-13 11:10:23.625
!MESSAGE Missing required bundle org.apache.ant_[1.6.5,1.7.0).
!SUBENTRY 2 org.apache.axis 2 0 2012-11-13 11:10:23.625
!MESSAGE Missing optionally required bundle org.apache.commons.httpclient_[3.0.0,4.0.0).
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-11-13 11:10:23.625
!MESSAGE Bundle update@plugins/org.apache.lucene_1.4.103.v20060601/ [13] was not resolved.
!SUBENTRY 2 org.apache.lucene 2 0 2012-11-13 11:10:23.625
!MESSAGE Missing Constraint: Bundle-RequiredExecutionEnvironment: J2SE-1.3
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-11-13 11:10:23.625
!MESSAGE Bundle update@plugins/org.apache.wsil4j_1.0.0.v200608161946/ [14] was not resolved.
!SUBENTRY 2 org.apache.wsil4j 2 0 2012-11-13 11:10:23.625
!MESSAGE Missing required bundle org.uddi4j_[2.0.4,2.1.0).
!SUBENTRY 2 org.apache.wsil4j 2 0 2012-11-13 11:10:23.625
!MESSAGE Missing required bundle org.apache.axis_[1.3.0,1.4.0).
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-11-13 11:10:23.625
!MESSAGE Bundle update@plugins/org.eclipse.ant.core_3.1.100.v20060531.jar [16] was not resolved.
!SUBENTRY 2 org.eclipse.ant.core 2 0 2012-11-13 11:10:23.625
!MESSAGE Missing required bundle org.eclipse.core.variables_[3.1.0,4.0.0).
!SUBENTRY 2 org.eclipse.ant.core 2 0 2012-11-13 11:10:23.625
!MESSAGE Missing required bundle org.eclipse.core.runtime_[3.2.0,4.0.0).
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-11-13 11:10:23.625
!MESSAGE Bundle update@plugins/org.eclipse.ant.ui_3.2.1.r321_v20060828.jar [17] was not resolved.
!SUBENTRY 2 org.eclipse.ant.ui 2 0 2012-11-13 11:10:23.625
!MESSAGE Missing optionally required bundle org.eclipse.ui.ide_[3.2.0,4.0.0).
!SUBENTRY 2 org.eclipse.ant.ui 2 0 2012-11-13 11:10:23.625
!MESSAGE Missing optionally required bundle org.eclipse.ui.views_[3.2.0,4.0.0).
!SUBENTRY 2 org.eclipse.ant.ui 2 0 2012-11-13 11:10:23.625
!MESSAGE Missing optionally required bundle org.eclipse.jface.text_[3.2.0,4.0.0).
!SUBENTRY 2 org.eclipse.ant.ui 2 0 2012-11-13 11:10:23.625
!MESSAGE Missing optionally required bundle org.eclipse.ui.workbench.texteditor_[3.2.0,4.0.0).
!SUBENTRY 2 org.eclipse.ant.ui 2 0 2012-11-13 11:10:23.625
!MESSAGE Missing optionally required bundle org.eclipse.ui.editors_[3.2.0,4.0.0).
!SUBENTRY 2 org.eclipse.ant.ui 2 0 2012-11-13 11:10:23.625
!MESSAGE Missing required bundle org.apache.ant_1.6.5.
!SUBENTRY 2 org.eclipse.ant.ui 2 0 2012-11-13 11:10:23.625
!MESSAGE Missing required bundle org.eclipse.ant.core_[3.1.0,4.0.0).
!SUBENTRY 2 org.eclipse.ant.ui 2 0 2012-11-13 11:10:23.625
!MESSAGE Missing required bundle org.eclipse.core.filesystem_[1.0.0,2.0.0).
!SUBENTRY 2 org.eclipse.ant.ui 2 0 2012-11-13 11:10:23.625
!MESSAGE Missing required bundle org.eclipse.core.resources_[3.2.0,4.0.0).
!SUBENTRY 2 org.eclipse.ant.ui 2 0 2012-11-13 11:10:23.625
!MESSAGE Missing required bundle org.eclipse.core.filebuffers_[3.2.0,4.0.0).
!SUBENTRY 2 org.eclipse.ant.ui 2 0 2012-11-13 11:10:23.640
!MESSAGE Missing required bundle org.eclipse.core.variables_[3.1.0,4.0.0).
!SUBENTRY 2 org.eclipse.ant.ui 2 0 2012-11-13 11:10:23.640
!MESSAGE Missing required bundle org.eclipse.ui.externaltools_[3.1.0,4.0.0).
!SUBENTRY 2 org.eclipse.ant.ui 2 0 2012-11-13 11:10:23.640
!MESSAGE Missing required bundle org.eclipse.ui_[3.2.0,4.0.0).
!SUBENTRY 2 org.eclipse.ant.ui 2 0 2012-11-13 11:10:23.640
!MESSAGE Missing required bundle org.eclipse.ui.console_[3.1.0,4.0.0).
!SUBENTRY 2 org.eclipse.ant.ui 2 0 2012-11-13 11:10:23.640
!MESSAGE Missing required bundle org.eclipse.debug.core_[3.2.0,4.0.0).
!SUBENTRY 2 org.eclipse.ant.ui 2 0 2012-11-13 11:10:23.640
!MESSAGE Missing required bundle org.eclipse.debug.ui_[3.2.0,4.0.0).
!SUBENTRY 2 org.eclipse.ant.ui 2 0 2012-11-13 11:10:23.640
!MESSAGE Missing required bundle org.eclipse.jdt.ui_[3.2.0,4.0.0).
!SUBENTRY 2 org.eclipse.ant.ui 2 0 2012-11-13 11:10:23.640
!MESSAGE Missing required bundle org.eclipse.jdt.debug.ui_[3.2.0,4.0.0).
!SUBENTRY 2 org.eclipse.ant.ui 2 0 2012-11-13 11:10:23.640
!MESSAGE Missing required bundle org.eclipse.jdt.launching_[3.2.0,4.0.0).
!SUBENTRY 2 org.eclipse.ant.ui 2 0 2012-11-13 11:10:23.640
!MESSAGE Missing required bundle org.eclipse.core.runtime_[3.2.0,4.0.0).
!SUBENTRY 2 org.eclipse.ant.ui 2 0 2012-11-13 11:10:23.640
!MESSAGE Missing required bundle org.eclipse.jdt.core_[3.2.0,4.0.0).
!SUBENTRY 2 org.eclipse.ant.ui 2 0 2012-11-13 11:10:23.640
!MESSAGE Missing required bundle org.eclipse.team.core_[3.2.0,4.0.0).
!SUBENTRY 2 org.eclipse.ant.ui 2 0 2012-11-13 11:10:23.640
!MESSAGE Missing required bundle org.eclipse.ltk.core.refactoring_[3.2.0,4.0.0).
!SUBENTRY 2 org.eclipse.ant.ui 2 0 2012-11-13 11:10:23.640
!MESSAGE Missing required bundle org.eclipse.core.expressions_[3.2.0,4.0.0).
!SUBENTRY 2 org.eclipse.ant.ui 2 0 2012-11-13 11:10:23.640
!MESSAGE Missing imported package com.ibm.icu.text_0.0.0.
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-11-13 11:10:23.640
!MESSAGE Bundle update@plugins/org.eclipse.compare_3.2.1.M20060711.jar [18] was not resolved.
!SUBENTRY 2 org.eclipse.compare 2 0 2012-11-13 11:10:23.640
!MESSAGE Missing required bundle org.eclipse.ui_[3.1.0,4.0.0).
!SUBENTRY 2 org.eclipse.compare 2 0 2012-11-13 11:10:23.640
!MESSAGE Missing required bundle org.eclipse.core.resources_[3.1.0,4.0.0).
!SUBENTRY 2 org.eclipse.compare 2 0 2012-11-13 11:10:23.640
!MESSAGE Missing required bundle org.eclipse.jface.text_[3.1.0,4.0.0).
!SUBENTRY 2 org.eclipse.compare 2 0 2012-11-13 11:10:23.640
!MESSAGE Missing required bundle org.eclipse.ui.ide_[3.1.0,4.0.0).
!SUBENTRY 2 org.eclipse.compare 2 0 2012-11-13 11:10:23.640
!MESSAGE Missing required bundle org.eclipse.ui.views_[3.1.0,4.0.0).
!SUBENTRY 2 org.eclipse.compare 2 0 2012-11-13 11:10:23.640
!MESSAGE Missing required bundle org.eclipse.ui.workbench.texteditor_[3.1.0,4.0.0).
!SUBENTRY 2 org.eclipse.compare 2 0 2012-11-13 11:10:23.640
!MESSAGE Missing required bundle org.eclipse.core.runtime_[3.1.0,4.0.0).
!SUBENTRY 2 org.eclipse.compare 2 0 2012-11-13 11:10:23.640
!MESSAGE Missing imported package com.ibm.icu.util_0.0.0.
!SUBENTRY 2 org.eclipse.compare 2 0 2012-11-13 11:10:23.640
!MESSAGE Missing imported package com.ibm.icu.text_0.0.0.
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-11-13 11:10:23.640
!MESSAGE Bundle update@plugins/org.eclipse.core.boot_3.1.100.v20060603.jar [19] was not resolved.
!SUBENTRY 2 org.eclipse.core.boot 2 0 2012-11-13 11:10:23.640
!MESSAGE Missing Constraint: Bundle-RequiredExecutionEnvironment: CDC-1.0/Foundation-1.0,J2SE-1.3
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-11-13 11:10:23.640
!MESSAGE Bundle update@plugins/org.eclipse.core.commands_3.2.0.I20060605-1400.jar [20] was not resolved.
!SUBENTRY 2 org.eclipse.core.commands 2 0 2012-11-13 11:10:23.640
!MESSAGE Missing required bundle org.eclipse.equinox.common_[3.2.0,4.0.0).
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-11-13 11:10:23.640
!MESSAGE Bundle update@plugins/org.eclipse.core.contenttype_3.2.0.v20060603.jar [21] was not resolved. 
```

从原因：缺少约束：Bundle-RequiredExecutionEnvironment：CDC-1.0/Foundation-1.0，J2SE-1.3，我的理解是它与J2SE有某种版本冲突，但日志正确显示了我当前的java版本，所以我是根本不知道问题是什么。

协助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T04:15:53.513

那是带有**新**JRE的**旧版本的 Eclipse。**我不会猜测如何/为什么包含 Java 7 JRE，但要么更新您的 Eclipse，要么返回使用实际的 1.4 JRE。**`c:\j2sdk1.4.2_19`**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-20T14:19:18.957

我有一个类似的问题，通过修改**startAnOldEclipse.bat文件中的****PATH**以使 PATH 指向 jre bin 目录，以获取该版本 Eclipse 所需的 jre 版本。这个 PATH 也包含足够的 Windows 东西，例如，

 **```
set PATH=<tool suite stuff>;c:\j2sdk1.4.2_19\bin;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem 
```

我猜你的 Eclipse 停止工作是因为安装了新的 JRE 并且修改了 PATH 以指向新的 JRE。

在我的例子中，“工具套件的东西”是一个 gcc 交叉编译器，它与一个旧的 eclipse 一起打包。

**指定特定 JRE 的另一种方法**： [这](http://wiki.eclipse.org/FAQ_How_do_I_run_Eclipse%3F)表示：“为 Eclipse 指定运行 JVM 的最推荐方法是将启动配置放入 eclipse.ini”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-29T16:45:10.963

我通过下载 JDK 1.4 的 OLD 版本、配置局部变量的 PATH 并将新路径添加到`C:\j2sdk1.4.2_19\bin`. 这在重新启动 Eclipse 后有效。****

# php - 进行 MySQL INSERT 查询时是否需要 NULL？

> ID：13354710
> 
> 赞同：0
> 
> 时间：2012-11-13T02:15:39.177
> 
> 标签：php, mysql, null

我要问的是在 MySQL 数据库中插入一行时是否需要包含为空的列。例如，当我使用 phpMyAdmin 插入一行时，它会执行以下操作：

```
INSERT INTO table 
(
`col1`,
`col2`,
`col3`,
`col4`
)
VALUES
(
'value1',
NULL,
NULL,
'value2'
) 
```

假设字段默认为空，我可以从插入语句中删除列和空值吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T02:17:45.203

默认情况下，当您创建列时，它可以为空（*除非您已`NOT NULL`对其*进行设置）。因此，当您只想为特定列插入记录时，您可以省略该列并且它的值是自动的`null`。

```
INSERT INTO table (`col1`  ,`col4`)
           VALUES ('value1','value2') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T02:17:26.607

你可以删除它们。

如果有默认值 - 你会得到它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T02:17:30.910

如果列名*也*被省略，是：将假定*默认值*^(1 。)

* * *

¹ `NULL`通常是 - 但并非总是如此！- 可空列的默认值。必须参考模式来验证这个假设。

# c# - ConcurrentBag 的浅拷贝到 C# 中的非并发集合

> ID：13354711
> 
> 赞同：1
> 
> 时间：2012-11-13T02:16:04.670
> 
> 标签：c#, data-structures

C# 中是否存在与 ConcurrentBag 的非并发类比？我需要创建一个 concurrentBag 的快照，所以我需要一个浅拷贝并且我不需要线程安全。请注意，concurrentbag 可以包含重复项。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T06:10:48.143

也许更接近的类比是创建一个`Queue<T>`，因为它支持采取（`Dequeue`方法）。

```
ConcurrentBag<MyType> bag = new ConcurrentBag<MyType>();

// create a queue
Queue<MyType> q = new Queue<MyType>(bag); 
```

# ruby-on-rails - 有没有办法防止评论在 Rails 视图中呈现？

> ID：13354712
> 
> 赞同：3
> 
> 时间：2012-11-13T02:16:25.760
> 
> 标签：ruby-on-rails, haml

我想知道是否有一种方法可以防止在 Rails 视图中呈现评论（除了删除它们）。我在我的观点中的评论主要是针对开发人员的，我不希望用户能够在 html 中阅读它们。我可以设置一些去除所有评论的渲染选项吗？

如果这很重要，我正在使用haml。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T02:40:11.257

您可以在视图中留下两种不同类型的评论：

1) 用户查看源代码时始终可以看到的 HTML 注释：

```
<!-- this is a comment --> 
```

2) Ruby 注释将被解释为服务器上的注释，而不是作为 HTML 发送

哈姆勒：

```
-# This is a comment 
```

再培训局：

```
<%# This is a comment %> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T02:39:53.783

在 ruby​​ 上下文中呈现您的评论：

```
#haml
- #bla bla bla

#html
<% #bla bla bla %> 
```

# python - ValueError：矩阵未对齐

> ID：13354715
> 
> 赞同：2
> 
> 时间：2012-11-13T02:16:48.100
> 
> 标签：python, numpy, linear-algebra, slice, matrix-multiplication

我应该编写一个 for 循环，它执行以下操作：使用对应于最大 n 奇异值的奇异向量（Ur 等的列和 VrT 等的行）创建相同的新 R、G 和 B 矩阵尺寸为原始图像（500 x 375）

这是我到目前为止所拥有的

```
from PIL import Image
from Image import new
from numpy import *
import numpy as np
from scipy.linalg import svd

r, g, b = im.split()
R = np.array(r.getdata())
R = np.asmatrix(R)
R = np.reshape(R, (375, 500), order = 'F')
G = np.array(g.getdata())
G = np.asmatrix(G)
G = np.reshape(G, (375, 500), order = 'F')
B = np.array(b.getdata())
B = np.asmatrix(B)
B = np.reshape(B, (375, 500), order = 'F')
Ur, Sr, VrT = svd(R.T, full_matrices=False)
Ug, Sg, VgT = svd(G.T, full_matrices=False)
Ub, Sb, VbT = svd(R.T, full_matrices=False)
R1 = np.dot(Ur, diag(Sr))
R1 = np.dot(R1, VrT)
G1 = np.dot(Ug, diag(Sg))
G1 = np.dot(G1, VgT)
B1 = np.dot(Ub, diag(Sb))
B1 = np.dot(B1, VbT)
R1 = np.around([R1])
G1 = np.around([G1])
B1 = np.around([B1])
R1 = np.uint8(R1)
G1 = np.uint8(G1)
B1 = np.uint8(B1)
R1 = R1.T
G1 = G1.T
B1 = B1.T
R1 = R1.flatten('F')
G1 = G1.flatten('F')
B1 = B1.flatten('F')
R1 = tuple(R1)
G1 = tuple(G1)
B1 = tuple(B1)
zipped = zip(R1,G1,B1)
newim = im.putdata(zipped,1,0)
im.show(newim)

for i in xrange(5):
N = array([200,100,50,10,1])
newUr = Ur[0:N[i], : ]
newSr = newSr[0:N[i]]
newVrT = VrT[ 0:N[i], :]
newUg = Ug[0:N[i], : ]
newSg = Sg[0:N[i]]
newVgT = VgT[ 0:N[i], :]
newUb = Ub[0:N[i], : ]
newSb = Sb[0:N[i]]
newVbT = VbT[ 0:N[i],:]
newR = dot(dot(newUr, diag(newSr), newVrT))
newG = dot(dot(newUg, diag(newSg), newVgT))
newB = dot(dot(newUb, diag(newSb), newVbT))
zipped = zip(newR,newG,newB)
newim = im.putdata(zipped,1,0)
im.show()
i = i+1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T02:46:03.673

`S`您可以在using中找到 n 个最大值`np.argsort`。例如，

```
In [31]: S = np.array([1,3,5,2,4,7])

In [32]: np.argsort(S)[-3:]
Out[32]: array([4, 2, 5])

In [33]: idx = np.argsort(S)[-3:]

In [34]: S[idx]
Out[34]: array([4, 5, 7]) 
```

* * *

```
import Image
import numpy as np
linalg = np.linalg
N = 10

def ngreatest(arr, n):
    idx = np.argsort(arr)[-n:]
    return idx

img = Image.open(filename).convert('RGB')
arr = np.asarray(img)
r, g, b = np.rollaxis(arr, axis = -1)

Ur, Sr, VrT = linalg.svd(r, full_matrices=False)
idx = ngreatest(Sr, N)
Sr = np.diag(Sr[idx])
VrT = VrT[idx]
Ur = Ur[:,idx]

print(Ur.shape, Sr.shape, VrT.shape) 
```

# python - 尝试在python中解析文本文件以进行数据分析

> ID：13354725
> 
> 赞同：2
> 
> 时间：2012-11-13T02:18:10.747
> 
> 标签：python, parsing, numpy, scipy, pandas

我在 perl 中进行了大量数据分析，并尝试使用 pandas、numpy、matplotlib 等在 python 中复制这项工作。

一般工作流程如下：

1) glob 目录中的所有文件

2）解析文件，因为它们有元数据

3) 使用正则表达式来隔离给定文件中的相关行（它们通常以诸如'LOOPS'之类的标签开头）

4) 拆分匹配标签的行并将数据加载到哈希中

5）做一些数据分析

6）制作一些情节

这是我通常在 perl 中执行的示例：

```
print"Reading File:\n";                              # gets data
foreach my $vol ($SmallV, $LargeV) {
  my $base_name = "${NF}flav_${vol}/BlockedWflow_low_${vol}_[0-9].[0-9]_-0.25_$Mass{$vol}.";
  my @files = <$base_name*>;                         # globs for file names
  foreach my $f (@files) {                           # loops through matching files
    print"... $f\n";
    my @split = split(/_/, $f);
    my $beta = $split[4];
    if (!grep{$_ eq $beta} @{$Beta{$vol}}) {         # constructs Beta hash
      push(@{$Beta{$vol}}, $split[4]);
    }
    open(IN, "<", "$f") or die "cannot open < $f: $!"; # reads in the file
    chomp(my @in = <IN>);
    close IN;
    my @lines = grep{$_=~/^LOOPS/} @in;       # greps for lines with the header LOOPS
    foreach my $l (@lines) {                  # loops through matched lines
      my @split = split(/\s+/, $l);           # splits matched lines
      push(@{$val{$vol}{$beta}{$split[1]}{$split[2]}{$split[4]}}, $split[6]);# reads data into hash
      if (!grep{$_ eq $split[1]} @smearingt) {# fills the smearing time array
        push(@smearingt, $split[1]);
      }
      if (!grep{$_ eq $split[4]} @{$block{$vol}}) {# fills the number of blockings
        push(@{$block{$vol}}, $split[4]);
      }
    }
  }
  foreach my $beta (@{$Beta{$vol}}) {
    foreach my $loop (0,1,2,3,4) {         # loops over observables
      foreach my $b (@{$block{$vol}}) {    # beta values
        foreach my $t (@smearingt) {       # and smearing times
          $avg{$vol}{$beta}{$t}{$loop}{$b} = stat_mod::avg(@{$val{$vol}{$beta}{$t}{$loop}{$b}});     # to find statistics
          $err{$vol}{$beta}{$t}{$loop}{$b} = stat_mod::stdev(@{$val{$vol}{$beta}{$t}{$loop}{$b}});
        }
      }
    }
  }
}
print"File Read in Complete!\n"; 
```

我希望将这些数据加载到分层索引数据结构中，其中 perl 哈希的索引成为我的 python 数据结构的索引。到目前为止，我遇到的关于 pandas 数据结构的每个示例都是高度人为的，其中整个结构（索引和值）是在一个命令中手动分配的，然后进行操作以演示数据结构的所有功能。不幸的是，我不能一次全部分配数据，因为我不知道要分析的数据中的质量、贝塔、大小等。我这样做是错误的吗？有谁知道这样做的更好方法？数据文件是不可变的，我将不得不使用我理解的正则表达式来解析它们。我需要帮助是将数据放入适当的数据结构中，以便我可以取平均值，

典型数据的标题行数未知，但我关心的内容如下所示：

```
Alpha 0.5 0.5 0.4
Alpha 0.5 0.5 0.4
LOOPS 0 0 0 2 0.5 1.7800178
LOOPS 0 1 0 2 0.5 0.84488326
LOOPS 0 2 0 2 0.5 0.98365135  
LOOPS 0 3 0 2 0.5 1.1638834
LOOPS 0 4 0 2 0.5 1.0438407
LOOPS 0 5 0 2 0.5 0.19081102
POLYA NHYP 0 2 0.5 -0.0200002 0.119196 -0.0788721 -0.170488 
BLOCKING COMPLETED
Blocking time 1.474 seconds
WFLOW 0.01 1.57689 2.30146 0.000230146 0.000230146 0.00170773 -0.0336667
WFLOW 0.02 1.66552 2.28275 0.000913101 0.00136591 0.00640552 -0.0271222
WFLOW 0.03 1.75 2.25841 0.00203257 0.00335839 0.0135 -0.0205722
WFLOW 0.04 1.83017 2.22891 0.00356625 0.00613473 0.0224607 -0.0141664
WFLOW 0.05 1.90594 2.19478 0.00548695 0.00960351 0.0328218 -0.00803792
WFLOW 0.06 1.9773 2.15659 0.00776372 0.0136606 0.0441807 -0.00229793
WFLOW 0.07 2.0443 2.1149 0.010363 0.018195 0.0561953 0.00296648 
```

我（认为）我想要的，我以 think 开头，因为我是 python 新手，专家可能知道更好的数据结构，是一个看起来像这样的分层索引系列：

```
volume   mass   beta   observable   t   value

1224     0.0    5.6    0            0   1.234
                                    1   1.490
                                    2   1.222
                       1            0   1.234
                                    1   1.234
2448     0.0    5.7    0            1   1.234 
```

依此类推： http: [//pandas.pydata.org/pandas-docs/dev/indexing.html#indexing-hierarchical](http://pandas.pydata.org/pandas-docs/dev/indexing.html#indexing-hierarchical)

对于那些不了解 perl 的人：

我需要的肉和土豆是这样的：

```
push(@{$val{$vol}{$beta}{$split[1]}{$split[2]}{$split[4]}}, $split[6]);# reads data into hash 
```

我这里有一个名为“val”的哈希。这是数组的散列。我相信在 python 中，这将是一个列表的字典。这里的每件事看起来像这样：'{$something}' 是哈希 'val' 中的一个键，我将存储在变量 $split[6] 中的值附加到数组的末尾，即指定的哈希元素通过所有 5 个键。这是我的数据的基本问题，我感兴趣的每个数量都有很多键。

==========

# 更新

我想出了以下导致此错误的代码：

```
Traceback (most recent call last):
  File "wflow_2lattice_matching.py", line 39, in <module>
    index = MultiIndex.from_tuples(zipped, names=['volume', 'beta', 'montecarlo_time, smearing_time'])
NameError: name 'MultiIndex' is not defined 
```

代码：

```
#!/usr/bin/python

from pandas import Series, DataFrame
import pandas as pd
import glob
import re
import numpy

flavor = 4
mass = 0.0

vol = []
b = []
m_t = []
w_t = []
val = []

#tup_vol = (1224, 1632, 2448)
tup_vol = 1224, 1632
for v in tup_vol:
  filelist = glob.glob(str(flavor)+'flav_'+str(v)+'/BlockedWflow_low_'+str(v)+'_*_0.0.*')
  for filename in filelist:
    print 'Reading filename:  '+filename
    f = open(filename, 'r')
    junk, start, vv, beta, junk, mass, mont_t = re.split('_', filename)
    ftext = f.readlines()
    for line in ftext:
      if re.match('^WFLOW.*', line):
        line=line.strip()
        junk, smear_t, junk, junk, wilson_flow, junk, junk, junk = re.split('\s+', line)
        vol.append(v)
        b.append(beta)
        m_t.append(mont_t)
        w_t.append(smear_t)
        val.append(wilson_flow)
zipped = zip(vol, beta, m_t, w_t)
index = MultiIndex.from_tuples(zipped, names=['volume', 'beta', 'montecarlo_time, smearing_time'])
data = Series(val, index=index) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T04:45:07.257

您将获得以下信息：

```
NameError: name 'MultiIndex' is not defined 
```

因为在导入 Series 和 DataFrame 时没有直接导入 MultiIndex。

你有 -

```
from pandas import Series, DataFrame 
```

你需要 -

```
from pandas import Series, DataFrame, MultiIndex 
```

或者您可以使用 pd.MultiIndex 来引用 MultiIndex，因为您将 pandas 导入为 pd

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T11:02:25.110

要全局化您的文件，请使用 Python 中的内置`glob`模块。

要在对它们进行通配后读取 csv 文件`read_csv`，您可以使用导入的功能来`from pandas.io.parsers import read_csv`帮助您做到这一点。

至于`MultiIndex`您在使用后实例化的 pandas 数据框中的功能`read_csv`，您可以使用它们来组织您的数据并根据需要对它们进行切片。

3个相关链接供您参考。

*   了解`MultiIndex`pandas 中的数据框 -[了解 MultiIndex](https://stackoverflow.com/questions/13261691/understanding-multiindex)和Pandas 多索引[的好处？](https://stackoverflow.com/questions/13226029/benefits-of-pandas-multiindex)
*   在目录中使用`glob`来抓取和操作您的文件 -[在 python 中提取值/重命名文件名](https://stackoverflow.com/questions/13243098/extract-values-renaming-filename-in-python/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T02:37:29.500

希望这可以帮助您入门？

```
import sys, os

def regex_match(line) :
  return 'LOOPS' in line

my_hash = {}

for fd in os.listdir(sys.argv[1]) :           # for each file in this directory 
  for line in open(sys.argv[1] + '/' + fd) :  # get each line of the file
    if regex_match(line) :                    # if its a line I want
      line.rstrip('\n').split('\t')           # get the data I want
      my_hash[line[1]] = line[2]              # store the data

for key in my_hash : # data science can go here?
  do_something(key, my_hash[key] * 12)

# plots 
```

ps 做第一行

```
#!/usr/bin/python 
```

（或任何`which python`返回）作为可执行文件运行

# haskell - 在 QuickCheck 中使用自定义生成器与任意实例

> ID：13354726
> 
> 赞同：5
> 
> 时间：2012-11-13T02:18:15.943
> 
> 标签：haskell, quickcheck

这是一个简单的功能。它接受一个输入`Int`并返回一个（可能为空的）`(Int, Int)`对列表，其中输入`Int`是任何对的立方元素的总和。

```
cubeDecomposition :: Int -> [(Int, Int)]
cubeDecomposition n = [(x, y) | x <- [1..m], y <- [x..m], x^3 + y^3 == n] 
  where m = truncate $ fromIntegral n ** (1/3)

-- cubeDecomposition 1729
-- [(1,12),(9,10)] 
```

我想测试上述是否属实的属性；如果我对每个元素进行立方体并对任何返回元组求和，那么我会得到我的输入：

```
import Control.Arrow 

cubedElementsSumToN :: Int -> Bool
cubedElementsSumToN n = all (== n) d
    where d = map (uncurry (+) . ((^3) *** (^3))) (cubeDecomposition n) 
```

出于运行时的考虑，我想在`Int`使用 QuickCheck 进行测试时将输入 s 限制为一定的大小。我可以定义一个合适的类型和`Arbitrary`实例：

```
{-# LANGUAGE GeneralizedNewtypeDeriving #-}

import Test.QuickCheck

newtype SmallInt = SmallInt Int
    deriving (Show, Eq, Enum, Ord, Num, Real, Integral)

instance Arbitrary SmallInt where
    arbitrary = fmap SmallInt (choose (-10000000, 10000000)) 
```

然后我想我必须定义使用`SmallInt`而不是的函数和属性的版本`Int`：

```
cubeDecompositionQC :: SmallInt -> [(SmallInt, SmallInt)]
cubeDecompositionQC n = [(x, y) | x <- [1..m], y <- [x..m], x^3 + y^3 == n] 
  where m = truncate $ fromIntegral n ** (1/3)

cubedElementsSumToN' :: SmallInt -> Bool
cubedElementsSumToN' n = all (== n) d
    where d = map (uncurry (+) . ((^3) *** (^3))) (cubeDecompositionQC n)

-- cubeDecompositionQC 1729
-- [(SmallInt 1,SmallInt 12),(SmallInt 9,SmallInt 10)] 
```

这工作正常，标准的 100 次测试按预期通过。但是当我真正需要的只是一个自定义生成器时，似乎没有必要定义一个新的类型、实例和函数。所以我尝试了这个：

```
smallInts :: Gen Int
smallInts = choose (-10000000, 10000000)

cubedElementsSumToN'' :: Int -> Property
cubedElementsSumToN'' n = forAll smallInts $ \m -> all (== n) (d m)
    where d =   map (uncurry (+) . ((^3) *** (^3)))
              . cubeDecomposition 
```

现在，我前几次运行它，一切正常，所有测试都通过了。但在随后的运行中，我观察到了失败。增加测试大小可靠地找到一个：

```
*** Failed! Falsifiable (after 674 tests and 1 shrink):  
0
8205379 
```

*由于存在从 QuickCheck 返回的两个*缩小的输入 - 0 和 8205379，我在这里有点困惑，我直观地期待一个。此外，这些输入按预期工作（至少在我的可显示属性上）：

```
*Main> cubedElementsSumToN 0
True
*Main> cubedElementsSumToN 8205379
True 
```

`Gen`因此，使用我定义的自定义的属性似乎显然存在问题。

我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T02:55:30.813

我很快意识到我写的这个属性显然是不正确的。这是使用原始`cubedElementsSumToN`属性的正确方法：

```
quickCheck (forAll smallInts cubedElementsSumToN) 
```

读起来很自然。

# javascript - 在单击 jQuery / JavaScript 时附加和加载脚本

> ID：13354728
> 
> 赞同：0
> 
> 时间：2012-11-13T02:18:45.900
> 
> 标签：javascript, jquery, html, ajax, dom

我目前有一个我正在开发的网站，其中有一个脚本，只需要在单击某个元素时加载和显示。我们正在加载的脚本是外部的，加载速度非常慢，并且会阻止 dom 尽可能快地加载。我希望在单击时附加此脚本或将其内容加载到某个元素中。我已经高高在上，并尝试了许多不同的方法来做到这一点，但都没有成功。我知道这是可能的，并且以前做过，但不记得是怎么做的。

请注意，我已尝试将 url 的内容加载到 iframe 中，然后克隆并添加到元素中。

下面的代码说明了我想要做什么

```
$("#button").click(function(e){
      e.preventDefault();
      var $slowLoadingScript = $('<script src="http://external-slow-script.com/script.js"></script>');      

    $slowLoadingScript.load(function(){
      $("#Element").append(slowLoadingScript);         
    });

  }); 
```

请注意脚本的内容如下所示：

```
document.write("a long list of html and js"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T02:22:53.403

```
$('#button').click(function(e){
    e.preventDefault();
    $.getScript('http://external-slow-script.com/script.js');
}); 
```

jQuery`$.getScript()`在[http://api.jquery.com/jQuery.getScript/](http://api.jquery.com/jQuery.getScript/)的解释。

# c++ - Python -> C++ 习惯用法：将 lambda 表达式存储在映射/容器中

> ID：13354729
> 
> 赞同：4
> 
> 时间：2012-11-13T02:18:50.887
> 
> 标签：c++, qt, boost, lambda, idioms

我正在利用我的 python/pyqt4 经验学习 C++（通过 Qt4），但我似乎无法掌握将 lambda 表达式存储到容器中以用作回调的正确习惯用法。

我有一个包含一堆字段的结构。我想创建一个回调映射，可以以特定方式正确格式化字段。

这是我想做的python等价物：

```
from PyQt4.QtCore import QVariant, QString

class AType(object):
    def __init__(self):
        self.name = "FOO"
        self.attr2 = "BAR"
        self.attr3 = "BAZ"
        # ...

callbacks = {}
callbacks['name'] = lambda x: QVariant(QString(x.name))
callbacks['attr2'] = lambda x: QVariant(QString(x.attr2))
callbacks['attr3'] = lambda x: QVariant(QString(x.attr3))    

a = AType()
variant = callbacks['name'](a)

print variant.toString()
# PyQt4.QtCore.QString(u'FOO') 
```

起初我在 C++ 中找到了原生 lambdas 并开始尝试，但后来发现它显然是 C++11 的一个特性。**编辑：**在我开始调查是否可以将标志引入项目的构建系统之前，我想知道是否有 C++11 之前的方法。

然后我查看了boost解决方案。我的项目已经在使用 boost，所以我认为这可能是一个解决方案。我看到有[`lambda`](http://www.boost.org/doc/libs/1_51_0/doc/html/lambda.html)和[`Phoenix`](http://www.boost.org/doc/libs/1_51_0/libs/phoenix/doc/html/index.html)选项。为了表明我至少尝试过完成这项工作，这是我令人尴尬的失败：

```
## my_class.h ##

#include <QVariant>
#include <QMap>
#include <boost/function.hpp>

QMap< uint, boost::function<QVariant (AType&)> > callbacks;

## my_class.cpp ##

#include <boost/lambda/lambda.hpp>
#include <boost/bind/bind.hpp>
#include "my_class.h"

// I invite you to laugh at this 
callbacks[0] = boost::bind(&QVariant, boost::bind(&QString::fromStdString, boost::bind(&AType::name, _1))); 
```

在我写完最后一行之后，我意识到我正在转动我的轮子，最好向更多有经验的 C++ 开发人员询问创建 lambda 回调映射的惯用方法（与 Qt 兼容）。

我的目标是能够采用已知索引和已知`AType`实例，并能够返回正确的格式`QVariant`

## 更新

根据接受的答案，这是我发现可行的解决方案。使用 C++98 兼容的解决方案。

```
#include <QMap>
#include <QVariant>
#include <QString>
#include <QDebug>

struct AType {
    AType();
    std::string name, attr2, attr3;
};

AType::AType() {
    name = "FOO";
    attr2 = "BAR";
    attr3 = "BAZ";
}

typedef QMap< QString, QVariant (*)( AType const& ) > Callbacks;

struct ATypeFieldMapper
{
    static QVariant name( AType const& x )
    { return QVariant(QString::fromStdString(x.name)); }

    static QVariant attr2( AType const& x )
    { return QVariant(QString::fromStdString(x.attr2)); }

    static QVariant attr3( AType const& x )
    { return QVariant(QString::fromStdString(x.attr3)); }
};

int main()
{
    Callbacks callbacks;
    callbacks["name"] = &ATypeFieldMapper::name;
    callbacks["attr2"] = &ATypeFieldMapper::attr2;
    callbacks["attr3"] = &ATypeFieldMapper::attr3;

    AType a;

    qDebug() << callbacks["name"](a).toString();
    qDebug() << callbacks["attr2"](a).toString();
    qDebug() << callbacks["attr3"](a).toString();

}

//"FOO" 
//"BAR" 
//"BAZ" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T02:29:31.120

在 C++ 中，lambda 只不过是语法糖，它允许您内联编写函子定义。*函子*是一个带有`operator()`. 因此，如果您不能使用 C++11（一个原因可能是因为您被迫使用旧的编译器？）那么您总是可以只定义函子类，或者如果这些概念 lambda 没有捕获任何内容，那么您可以只使用*普通的旧功能*。

:-)

凯，我要写一个例子。就几分钟...

* * *

开始…

```
struct QString{ QString( wchar_t const* ){} };
struct QVariant { QVariant( QString const& ) {} };
struct AType{ wchar_t const* name() const { return L""; } };

#include <functional>       // std::function
#include <map>              // std::map
#include <string>           // std::wstring
using namespace std;

void cpp11()
{
    typedef map< wstring, function< QVariant( AType const& ) > > Callbacks;
    Callbacks callbacks;
    callbacks[L"name"] = []( AType const& x )
        { return QVariant( QString( x.name() ) ); };

    auto const a = AType();
    auto variant = callbacks[L"name"]( a );
}

void cpp03Limited()
{
    typedef map< wstring, QVariant (*)( AType const& ) > Callbacks;
    Callbacks callbacks;

    struct SimpleConversion
    {
        static QVariant convert( AType const& x )
        { return QVariant( QString( x.name() ) ); }
    };

    callbacks[L"name"] = &SimpleConversion::convert;

    AType const a = AType();
    QVariant const variant = callbacks[L"name"]( a );
}

void cpp03General()
{
    struct IConversion
    {
        virtual QVariant convert( AType const& ) const = 0;
    };

    struct ConversionInvoker
    {
        IConversion const*  pConverter;

        QVariant operator()( AType const& x ) const
        {
            return pConverter->convert( x );
        }

        explicit ConversionInvoker( IConversion const* const p = 0 )
            : pConverter( p )
        {}
    };

    typedef map< wstring, ConversionInvoker > Callbacks;
    Callbacks callbacks;

    struct SimpleConversion: IConversion
    {
        virtual QVariant convert( AType const& x ) const
        { return QVariant( QString( x.name() ) ); }
    };
    SimpleConversion const simpleConversionFunc;

    callbacks[L"name"] = ConversionInvoker( &simpleConversionFunc );

    AType const a = AType();
    QVariant const variant = callbacks[L"name"]( a );
}

int main()
{} 
```

免责声明：未经测试的代码（除了它使用 msvc 和 mingw g++ 编译）。

# python - 如何在python中将文件读入字典

> ID：13354734
> 
> 赞同：0
> 
> 时间：2012-11-13T02:19:34.363
> 
> 标签：python

我有一个格式如下的文本文件：

```
hsa04012 [[['7039', '1956', '1398', '25'], ['7039', '1956', '1399', '25']], [['1839', '1956', '1398', '25'], ['1839', '1956', '1399', '25']], [['1399', '25']], [['1398', '25']], [['727738', '1956', '1398', '25'], ['727738', '1956', '1399', '25']], [['1956', '1398', '25'], ['1956', '1399', '25']], [['1950', '1956', '1398', '25'], ['1950', '1956', '1399', '25']], [['374', '1956', '1398', '25'], ['374', '1956', '1399', '25']], [['2069', '1956', '1398', '25'], ['2069', '1956', '1399', '25']], [['685', '1956', '1398', '25'], ['685', '1956', '1399', '25']]]
hsa02331... 
```

如何将文件读入字典，其中键作为包含 hsa 的文本...，值作为括号内的数字 [作为列表]。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T02:20:26.223

我会使用`str.split`and [`ast.literal_eval`](http://docs.python.org/2/library/ast.html#ast.literal_eval)。这似乎最简单...

```
with open(datafile) as f:
    d = {}
    for line in f:
        key,value = line.split(None,1)
        d[key] = ast.literal_eval(value) 
```

虽然，您也可以玩一些游戏`json`来获取列表。这些列表看起来是非常有效的 JSON 数组，因为它们被称为。

# refactoring - Bullet 物理是否应该重构以在 DirectX 应用程序中使用？

> ID：13354735
> 
> 赞同：1
> 
> 时间：2012-11-13T02:19:37.970
> 
> 标签：refactoring, directx, physics, bulletphysics, particle-system

我玩过一些例子，它们看起来真的很好。

但是我注意到 Bullet 使用它自己的向量结构和数学实用程序。我将 DirectXMath 用于 DirectX 应用程序的其余部分。所以这意味着我有两组数学函数。

我相信 DirectXMath 的效率更高，但 Bullet 有 130,000 行长，所以在开始重构之前我必须确定。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T07:13:12.917

几乎不需要重构。

这听起来是一项艰巨的任务，特别是考虑到过程中可能引入的错误数量（并且子弹数学也非常快，其优势在于内联而不是调用 d3d 函数）。

只需使用子弹数据类型进行模拟，并在需要时将它们转换为 d3d 数学数据类型（因为它们具有相同的内存布局，指针转换将完成这项工作并且成本几乎为零，使用一些 c++ 转换运算符它也将使该过程几乎透明的）

# scala - 如何让操作员在类中调用它

> ID：13354743
> 
> 赞同：1
> 
> 时间：2012-11-13T02:21:07.090
> 
> 标签：scala, operators, dsl

我正在编写一个小型 DSL。从其他角度来看，它可以用作自定义控制结构。

这是一个小例子

```
case class Reference(var value : Double) {
  def apply() = value
  def update(v : Double) = value = v
}
implicit def toReference(ref:Reference) = ref.value

trait Store {
  import scala.collection.mutable.Buffer
  val index : Buffer[Reference] = Buffer()
  def ++ (v : Double) : Reference = {
    val r = Reference(v)
    index += r
    r
  }
  implicit def toSelf(u : Unit) = this
}

class ExampleStore extends Store {
  val a = () ++ 1.0
  val b = () ++ 2.0
  val c = () ++ 0.5
}

val store = new ExampleStore
store.c() = store.a + store.b 
```

我想访问没有前面的类运算符，但除了至少在表达式的开头`this`指定之外找不到其他方法。`()`我需要一个“前缀”表格

一些方法来重写这个例子如下

```
class ExampleStore extends Store {
  val a =++ 1.0
  val b =++ 2.0
  val c =++ 0.5
} 
```

任何人都可以想出一些技巧让 scala 接受这样的约定吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T07:23:01.810

写作`++ 1.0`意味着它`++`是`1.0`（Double 类）的一元运算符。但是，在 Scala 中，一元运算符仅限于`! ~ - +`. 所以没有办法实现你想要的语法。

但是你仍然可以使用括号：

```
class ExampleStore extends Store {
  val a = ++(1.0)
  val b = ++(2.0)
  val c = ++(3.0)
} 
```

# objective-c - 无法修复错误：没有可用于签名的身份

> ID：13354749
> 
> 赞同：0
> 
> 时间：2012-11-13T02:22:20.393
> 
> 标签：objective-c, xcode, app-store

将应用程序分发到 App Store 时收到此错误消息。

我试图按照教程一步一步解决这个问题，但我仍然收到相同的消息。

你有解决它的想法吗？

问候，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T02:41:19.043

那么，您将需要一个配置文件。并且您需要在构建设置中使用创建的身份配置 Xcode 的“代码签名”。

我建议您通过创建一个 Apple 帐户来清楚地阅读 Apple 的 App Store 提交指南。做更多的谷歌搜索以获得答案。

# javascript - 处理内存泄漏的 IE 的最佳/标准 addEventListener 解决方法是什么？

> ID：13354754
> 
> 赞同：1
> 
> 时间：2012-11-13T02:22:39.893
> 
> 标签：javascript, internet-explorer, dom-events, addeventlistener, attachevent

在我广泛的研究中，我看到了许多解决此问题的解决方法。（[**有关一些好的链接，请参阅此 SO 帖子**](https://stackoverflow.com/questions/12046128/what-is-the-current-best-practice-following-the-addevent-saga)。）我主要关心的是处理来自`attachEvent()`在 IE 中使用的内存泄漏。无论如何，经过我所有的研究，我发现了这个解决方法：

```
// written by Dean Edwards, 2005
// with input from Tino Zijdel - crisp@xs4all.nl
// http://dean.edwards.name/weblog/2005/10/add-event/
function addEvent(element, type, handler)
{
    if (element.addEventListener)
        element.addEventListener(type, handler, false);
    else
    {
        if (!handler.$$guid) handler.$$guid = addEvent.guid++;
        if (!element.events) element.events = {};
        var handlers = element.events[type];
        if (!handlers)
        {
            handlers = element.events[type] = {};
            if (element['on' + type]) handlers[0] = element['on' + type];
            element['on' + type] = handleEvent;
        }

        handlers[handler.$$guid] = handler;
    }
}
addEvent.guid = 1;

function removeEvent(element, type, handler)
{
    if (element.removeEventListener)
        element.removeEventListener(type, handler, false);
    else if (element.events && element.events[type] && handler.$$guid)
        delete element.events[type][handler.$$guid];
}

function handleEvent(event)
{
    event = event || fixEvent(window.event);
    var returnValue = true;
    var handlers = this.events[event.type];

    for (var i in handlers)
    {
        if (!Object.prototype[i])
        {
            this.$$handler = handlers[i];
            if (this.$$handler(event) === false) returnValue = false;
        }
    }

    if (this.$$handler) this.$$handler = null;

    return returnValue;
}

function fixEvent(event)
{
    event.preventDefault = fixEvent.preventDefault;
    event.stopPropagation = fixEvent.stopPropagation;
    return event;
}
fixEvent.preventDefault = function()
{
    this.returnValue = false;
}
fixEvent.stopPropagation = function()
{
    this.cancelBubble = true;
}

// This little snippet fixes the problem that the onload attribute on the body-element will overwrite
// previous attached events on the window object for the onload event
if (!window.addEventListener)
{
    document.onreadystatechange = function()
    {
        if (window.onload && window.onload != handleEvent)
        {
            addEvent(window, 'load', window.onload);
            window.onload = handleEvent;
        }
    }
}​ 
```

现在我有几个问题。找到这段代码并不容易，所以我可以假设没有多少人在使用这段代码。这让我相信其他人正在使用不同的代码并且他们的代码没有问题。如果是这种情况，那么我刚刚发布的这段代码是否矫枉过正？

我还担心，在我的研究中，我发现了大量与此类似的解决方法：

```
if (el.addEventListener){  
  el.addEventListener('click', callback, false);   
} else if (el.attachEvent){  
  el.attachEvent('onclick', callback);  
} 
```

这段代码不处理IE引起的内存泄漏。所以现在我的问题是：**使用纯 JavaScript 处理的最佳/标准解决方法是什么，`attachEvent()`以及它在 IE 中的内存泄漏？**

# java - 避免休眠延迟初始化异常

> ID：13354766
> 
> 赞同：5
> 
> 时间：2012-11-13T02:24:08.807
> 
> 标签：java, hibernate, spring-mvc

我有两个课程，称为讲师和课程。我的 Lecturer 类有一个课程对象列表和一个变量，如图所示

```
@OneToMany(mappedBy = "lecturer")
@NotFound(action = NotFoundAction.IGNORE)
private List<Course> courseList = new ArrayList<Course>(); 
```

在我的课程中，我有一个 Lecturer 对象作为变量，如下所示。

```
@ManyToOne
@JoinTable(name = "course_lecturer", joinColumns = @JoinColumn(name = "course_id"), inverseJoinColumns = @JoinColumn(name = "lecturer_id"))
private Lecturer lecturer; 
```

现在我有一个 spring Controller 方法，它返回 Lecturer 的 json 对象，如下所示。

```
@RequestMapping(value = "/getlecturerbyid", method = RequestMethod.POST)
public @ResponseBody
Object getLecturer(@ModelAttribute(value = "id") Lecturer lecturer) {
    Map<String, Object> response = new HashMap<String, Object>();
    response.put("message", "succeess");
    response.put("lecturer", lecturer);
    return response;
} 
```

问题是它抛出了一个惰性初始化异常。因此，我将 Lecturer 和 Course 类的两个变量中的 fetch 类型设置为 eager。现在的问题是它无限地尝试急切地获取对象（如果我取消设置任何一个的获取，它会引发相同的异常）。

另一方面，如果我删除任一类的变量，则休眠状态不知道另一个类的关系。例如：如果我从 Lecturer 中删除课程列表并删除其中一个 Lecturer 对象，则休眠不会删除与已删除 Lecturer 对象相关的课程对象。所以我必须编写一个休眠查询并在代码中手动删除它。

你能建议我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T02:33:05.313

这是因为**循环引用(parent -> child ->parent)**发生的。我相信你已经明白了。

您的问题最简单的解决方案是迭代课程列表并将其设置`Lecturer`为空，然后再放入`response`以打破循环关系，如下所示：

```
 Object getLecturer(@ModelAttribute(value = "id") Lecturer lecturer) {
       Map<String, Object> response = new HashMap<String, Object>();
       response.put("message", "succeess");

       //break the circular relationship
       if(lecturer.getCourses() != null){
          for(Course course: lecturer.getCourses()){
               course.setLecturer(null);
          }
       }
       response.put("lecturer", lecturer);
       return response;
   } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-08T17:12:16.597

如果您使用杰克逊映射器，则可以通过使用 @JsonIgnore 注释来解决此问题。 [此链接](https://stackoverflow.com/questions/13778970/a-better-way-to-avoid-hibernate-lazy-init-exception-when-serializing-in-to-a-jso)解决了杰克逊的问题。

# java - Spring JTATransactionManager 无法在单个会话中绑定 Hibernate 和 JDBC

> ID：13354770
> 
> 赞同：0
> 
> 时间：2012-11-13T02:25:10.200
> 
> 标签：java, spring, hibernate, jta

我使用 JTATransactionManager 来管理事务。我想用 Spring 的`@Transactional`注释包装的一段代码有 2 个数据库调用——一个使用 Hibernate SessionFactory，另一个使用普通的 JDBC。两者都使用相同的数据源。因此，我希望两者都受同一个事务的约束。

但它看起来不像使用一个事务。相反，每个人都打开自己的事务。这可能是什么原因。? 如何确保使用单个事务来绑定这两个操作。?

如果需要，我可以提供配置和代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T02:42:40.360

确保在您的两个数据库调用中，您使用传播`Propagation.NESTED`作为

```
 @Transactional(propagation=Propagation.NESTED) 
```

在包装方法中，您提到`Propagation.REQUIRED or`Propagation.REQUIRED_NEW` 作为

```
 @Transactional(propagation=Propagation.REQUIRED) 
```

或者

```
 @Transactional(propagation=Propagation.REQUIRED_NEW) 
```

通过这样做，您提到两个数据库调用都将继承包装方法的事务边界。

# asp.net - 基于另一个下拉列表加载下拉列表

> ID：13354779
> 
> 赞同：0
> 
> 时间：2012-11-13T02:27:32.707
> 
> 标签：asp.net

我有两个下拉菜单。根据选择一个，必须填写另一个下拉列表。使用 Ajax 是一种方法，但有时加载第二个下拉菜单需要时间。

如何避免这种情况？

是否有任何事情像我提取所有数据并在客户端进行所有操作并使用服务器资源和 ajax 显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T02:30:13.397

您可以预加载几个隐藏的下拉菜单，然后在选择第一个下拉菜单时显示适当的下拉菜单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T02:30:24.820

您可以预加载所有值（假设它们不是太多，例如 <1000），然后用脚本填充第二个下拉列表，而不是再次访问服务器。

# android - viewpager 自动滚动太快

> ID：13354780
> 
> 赞同：1
> 
> 时间：2012-11-13T02:27:50.677
> 
> 标签：android, android-viewpager

我有一个`ViewPager`4 页，我希望它自动滚动。

我正在做的事情 与一个预先计算的整数`viewPager.setCurrentItem(index);`绑定在一起。`TimerTask``index`

逻辑工作正常，但是当它滚动（由 触发`setCurrentImte`）时，动画太快了。

如何控制它的滚动速度？请注意，我说的是滚动动画速度，而不是 2 次连续滚动的间隔。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T03:48:59.543

为什么不使用[ViewFlipper](http://developer.android.com/reference/android/widget/ViewFlipper.html)呢？ViewFlipper 内置了处理视图之间自动滚动的功能，这意味着您可以转储计时器。此外，它还实现[了 ViewAnimator](http://developer.android.com/reference/android/widget/ViewAnimator.html)，让您可以完全控制动画。创建自定义动画相对简单，您可以控制动画所需的时间。可以在[此处](http://www.techrepublic.com/blog/app-builder/a-dog-limps-into-a-saloon-a-tutorial-on-androids-viewflipper-widget/634)找到幻灯片动画的简单教程。记下动画 xml 文件的持续时间属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T02:37:06.793

看起来[ViewPager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)没有提供这样的 API。我建议执行以下任何操作：

*   获取 VieWPager 代码（它在您的 android sdk extras 文件夹下）并按照您需要的方式调整它（例如添加必要的 API）。现在它似乎使用内部常量（`MAX_SETTLE_DURATION`）；
*   自己拦截触摸并调用[fakeDragBy()](http://developer.android.com/reference/android/support/v4/view/ViewPager.html#fakeDragBy%28float%29)（不确定是否是您要查找的内容）；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-17T17:23:20.837

为什么不尝试这样的事情呢？使用值动画器为滚动值设置动画，然后更新定位以便正确处理片段加载。对我来说很好:)。

```
if(pager != null){
        ValueAnimator scrollAnimator = ValueAnimator.ofInt(pager.getScrollX(), pager.getScrollX()+2560);
        final int virtualPage = pager.getCurrentItem();
        scrollAnimator.setDuration(1000);
        scrollAnimator.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() {
            @Override
            public void onAnimationUpdate(ValueAnimator animation) {
                pager.setScrollX((Integer)animation.getAnimatedValue());
            }
        });
        scrollAnimator.addListener(new Animator.AnimatorListener() {
            @Override
            public void onAnimationStart(Animator animation) {

            }

            @Override
            public void onAnimationEnd(Animator animation) {
                pager.setCurrentVirtualItem(virtualPage, false);
            }

            @Override
            public void onAnimationCancel(Animator animation) {

            }

            @Override
            public void onAnimationRepeat(Animator animation) {

            }
        });
        scrollAnimator.start();
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-06T11:46:57.907

我对正在开发的应用程序有相同的要求，我的解决方案就是这样。

```
 Observable.range(1, vpAdapter.getCount() - 1)
            .concatMap(i-> Observable.just(i).delay(5000, TimeUnit.MILLISECONDS))
            .observeOn(AndroidSchedulers.mainThread())
            .subscribe(integer -> {
                currentAutoPage = integer;

                binding.vpTour.beginFakeDrag();
                lastFakeDrag = 0;
                ValueAnimator va = ValueAnimator.ofInt(0, binding.vpTour.getWidth());
                va.setDuration(1000);
                va.addUpdateListener(animation -> {
                    if (binding.vpTour.isFakeDragging()) {
                        int animProgress = (Integer) animation.getAnimatedValue();
                        binding.vpTour.fakeDragBy(lastFakeDrag - animProgress);
                        lastFakeDrag = animProgress;
                    }
                });
                va.addListener(new AnimatorListenerAdapter() {
                    @Override
                    public void onAnimationEnd(Animator animation) {
                        super.onAnimationEnd(animation);
                        if (binding.vpTour.isFakeDragging()) {
                            binding.vpTour.endFakeDrag();
                        }
                    }
                });
                va.start();
            }, Throwable::printStackTrace, () -> {
                if (autoPageChangeDisposable != null && !autoPageChangeDisposable.isDisposed()) {
                    autoPageChangeDisposable.dispose();
                }
            }); 
```

如果您还想在用户手动更改页面时停止自动滑动，而不仅仅是从我编写的代码中获取一次性用品，例如：“Disposable autoPageChangeDisposable = Observable.range(1, vpAdapter ....”然后注册和 OnPageChangedListener 并执行此操作：

```
 vpTour.addOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
            @Override
            public void onPageSelected(int position) {
                if (position != currentAutoPage) {
                    if (autoPageChangeDisposable != null && !autoPageChangeDisposable.isDisposed()) {
                        autoPageChangeDisposable.dispose();
                    }
                }
            }
        }); 
```

# c++ - 在单个 FBO 上的多个深度纹理之间切换

> ID：13354781
> 
> 赞同：1
> 
> 时间：2012-11-13T02:27:51.583
> 
> 标签：c++, opengl, textures, fbo, depth-buffer

我正在创建一个延迟渲染器并尝试使用 FBO 来实现这一点。首先，我使用了 3 个不同的 FBO（gbuffer、lbuffer 和“screen”）并且它工作正常。但是，它的性能非常差。我[在这里](http://http.download.nvidia.com/developer/presentations/2005/GDC/OpenGL_Day/OpenGL_FrameBuffer_Object.pdf "这里")读到，仅使用一个 FBO 并使用 glFramebufferTexture2D 切换纹理要快得多。

这种技术的问题是我从深度纹理中得到了大量无法解释和不可预测的行为（我正在进行深度剥离，因此在两个深度纹理之间切换）。似乎每次我从深度纹理 A 切换到纹理 B 时，A 都会被清除为零，反之亦然。

有谁知道使用 glFramebufferTexture2D 为同一个 FBO 切换深度纹理是否存在问题？我正在使用 gDebugger 检查纹理。

我正在使用 Visual C++ 2010 进行开发。

# android - 使用 SimpleAdapter 过滤 listView 数据

> ID：13354782
> 
> 赞同：0
> 
> 时间：2012-11-13T02:27:58.120
> 
> 标签：android

我正在使用 simpleAdapter 在 listView 中显示名称。我想添加一个edittext小部件以允许用户过滤他们想要查找的名称。但是，我不知道该怎么做。有人可以解释我怎么能做到这一点。这是我的代码：

```
 import java.util.ArrayList;
   import java.util.HashMap;
   import java.util.jar.Attributes.Name;

   import org.apache.http.NameValuePair;
   import org.json.JSONArray;
   import org.json.JSONException;
   import org.json.JSONObject;

   import android.app.Dialog;
   import android.app.ListActivity;
   import android.app.ProgressDialog;
   import android.os.AsyncTask;
   import android.os.Bundle;
   import android.text.Editable;
   import android.text.TextWatcher;
   import android.util.Log;
   import android.view.View;
   import android.widget.AdapterView;
   import android.widget.AdapterView.OnItemClickListener;
   import android.widget.EditText;
   import android.widget.ListAdapter;
   import android.widget.ListView;
   import android.widget.SimpleAdapter;
   import android.widget.SimpleCursorAdapter;
   import android.widget.TextView;
   import android.widget.Toast;

   public class Patients extends ListActivity{

  private static final String ID = "id";
  private static final String NAME = "name";
  private static final String PATIENTS = "patients";

  private ProgressDialog dialog;

      private EditText search; 

   //URL to get the patient info
   private static final String URL = "http://10.0.2.2:8080/HMS2/patients.php";

   ListAdapter adapter;

    //for getting the parse  data
        JSONParser jParser = new JSONParser();

   // patients JSON ARRAY 
   JSONArray patients = null;

  ArrayList<HashMap<String, String>> patientsList;

 @Override
 protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    setContentView(R.layout.all_patients);

    search = (EditText) findViewById(R.id.inputSearch);

    new LoadPatients().execute();

    //selecting single listView
    ListView list = getListView();

    list.isTextFilterEnabled();

    list.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> arg0, View view, int position,
                long id) {

            String name = ((TextView) findViewById(R.id.name)).getText().toString();
        }

    });

} 

 class LoadPatients extends AsyncTask<String, String, String>
  {

    @Override
    protected void onPreExecute() {
        super.onPreExecute();

        dialog = new ProgressDialog(Patients.this);
        dialog.setMessage("Loading patients info...");
        dialog.setIndeterminate(false);
        dialog.setCancelable(false);
        dialog.show();
    }

    @Override
    protected String doInBackground(String... params) {

        //HashMap for ListView
        patientsList = new ArrayList<HashMap<String,String>>();

        HashMap<String, String> map = new HashMap<String, String>();

        ArrayList<NameValuePair> query = new ArrayList<NameValuePair>();

        //gets the JSON object 
        JSONObject json = jParser.getJSONFromUrl(URL, query, "POST");

        Log.e("error",json.toString());

        try 
          {
            //gets the JSON array which is patients 
            patients = json.getJSONArray(PATIENTS);

            //loop through the JSON array
            for(int x= 0; x < patients.length(); x++)
             {
                //gets the  key=> value position 
                JSONObject key = patients.getJSONObject(x);

                //gets the id value 
                int value = key.getInt(ID);
                String id = Integer.toString(value);

                //gets the name value
                String name = key.getString(NAME);

                //put the key => value in a HashMap
                map.put(NAME,  name);
                map.put(ID, id);

                //add the HashMap values to the ArrayList
                patientsList.add(map);

             }
          }
        catch (JSONException e) 
         {  
            Toast.makeText(getApplicationContext(), "Connection problem", Toast.LENGTH_LONG);
         }

        return null;
    }

    @Override
    protected void onPostExecute(String result) 
     {
        super.onPostExecute(result);

          //dismiss the dialog after getting all products
          dialog.dismiss();

          adapter = new SimpleAdapter(getApplicationContext(),patientsList,R.layout.list_item,
                        new String[]{NAME}, new int[]{R.id.name});

          setListAdapter(adapter);              

        }

     }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T03:38:38.140

最好的方法可能是向 EditText 小部件添加一个[TextWatcher](http://developer.android.com/reference/android/text/TextWatcher.html)，然后使用由 SimpleAdapter 实现的[Filterable](http://developer.android.com/reference/android/widget/Filterable.html)接口。不过，这可能有点痛苦，因此您可能会发现自己处理过滤更容易，方法是为您的适配器创建一个新列表，并在用户键入时，将该列表中的值设置为与搜索查询匹配的原始列表。每次更新适配器使用的列表时，您都希望使数据无效，因此将重新创建列表。

# php - Paypal IPN 监听器总是返回 INVALID，但在 live paypal 中交易成功

> ID：13354783
> 
> 赞同：0
> 
> 时间：2012-11-13T02:28:06.217
> 
> 标签：php, paypal, paypal-ipn

我正在使用贝宝自适应支付，我的 IPN 监听器在沙盒中运行良好，但现在我们正在测试实时交易，它总是返回“无效”，但实际资金已经转移。

任何关于为什么我总是收到“INVALD”的帮助表示赞赏。

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Paypal_ipn extends CI_Controller {

    public function index() {

        log_message('error', '');
        log_message('error', '');
        log_message('error', '##################');
        log_message('error', '##################');

        // read the post from PayPal system and add 'cmd'
        $req = 'cmd=_notify-validate&'.file_get_contents("php://input");
        $header = null;

        // post back to PayPal system to validate

        $header .= "POST /cgi-bin/webscr HTTP/1.0\r\n";
        $header .= "Host: www.sandbox.paypal.com\r\n";  // this line is needed for sandbox, but may not be needed for prod. 
        $header .= "Content-Type: application/x-www-form-urlencoded\r\n";
        $header .= "Content-Length: " . strlen($req) . "\r\n\r\n";
        $fp = fsockopen ('ssl://www.sandbox.paypal.com', 443, $errno, $errstr, 30);

        $raw_post = file_get_contents("php://input");
        $post_array = $this->decodePayPalIPN($raw_post);

        log_message('error', "!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!");
        $log1 = var_export($post_array, true);

        log_message('error', $log1);
        log_message('error', "!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!");
        log_message('error', "sender_email = ".$post_array['sender_email']);
        if(isset($post_array['sender_email'])) {

            $sender_email = $post_array['sender_email'];
        }
        if(isset($post_array['status'])) {
            $status = $post_array['status'];
        }
        if(isset($post_array['payment_request_date'])) {
            $payment_request_date = $post_array['payment_request_date'];
        }
        if(isset($post_array['transaction'][0]['receiver'])) {
            $receiver0 = $post_array['transaction'][0]['receiver'];
        }
        if(isset($post_array['transaction'][1]['receiver'])) {
            $receiver1 = $post_array['transaction'][1]['receiver'];
        }
        if(isset($post_array['transaction'][0]['id'])) {
            $id0 = $post_array['transaction'][0]['id'];
        }
        if(isset($post_array['transaction'][1]['id'])) {
            $id1 = $post_array['transaction'][1]['id'];
        }
        if(isset($post_array['transaction'][0]['invoiceId'])) {
            $invoiceId0 = $post_array['transaction'][0]['invoiceId'];
        }
        if(isset($post_array['transaction'][1]['invoiceId'])) {
            $invoiceId1 = $post_array['transaction'][1]['invoiceId'];
        }
        if(isset($post_array['transaction'][0]['amount'])) {
            $amount0 = $post_array['transaction'][0]['amount'];
        }
        if(isset($post_array['transaction'][1]['amount'])) {
            $amount1 = $post_array['transaction'][1]['amount'];
        }
        if(isset($post_array['transaction'][0]['status'])) {
            $status0 = $post_array['transaction'][0]['status'];
        }
        if(isset($post_array['transaction'][1]['status'])) {
            $status1 = $post_array['transaction'][1]['status'];
        }
        if(isset($post_array['transaction'][0]['id_for_sender_txn'])) {
            $id_for_sender_txn0 = $post_array['transaction'][0]['id_for_sender_txn'];
        }
        if(isset($post_array['transaction'][1]['id_for_sender_txn'])) {
            $id_for_sender_txn1 = $post_array['transaction'][1]['id_for_sender_txn'];
        }
        if(isset($post_array['transaction'][0]['status_for_sender_txn'])) {
            $status_for_sender_txn0 = $post_array['transaction'][0]['status_for_sender_txn'];
        }
        if(isset($post_array['transaction'][1]['status_for_sender_txn'])) {
            $status_for_sender_txn1 = $post_array['transaction'][1]['status_for_sender_txn'];
        }
        if(isset($post_array['transaction'][1]['pending_reason'])) {
            $pending_reason0 = $post_array['transaction'][1]['pending_reason'];
        }
        if(isset($post_array['transaction'][1]['pending_reason'])) {
            $pending_reason1 = $post_array['transaction'][1]['pending_reason'];
        }

        if (!$fp) {
            log_message('error', 'Problem with !$fp');
            // HTTP ERROR
        } else {
            $counter = 0;
            fputs ($fp, $header . $req);

            $res = '';

            while (!feof($fp)) {

                $res .= fgets ($fp, 1024);

                log_message('error', "res = $res");

                if (strcmp ($res, "VERIFIED") == 0) {

                    log_message('error', 'we verified');
                    if($status0 == "Completed") {
                        log_message('error', 'we completed');
                        $this->load->model('customer_model');
                        $results = $this->customer_model->get_invoice_info($invoiceId0);

                        if($results != false) {
                            log_message('error', 'results is NOT false');
                            foreach($results as $row) {
                                if($row->amount_verified != 1) {
                                    log_message('error', 'row->amount_verified is NOT equal to 1');
                                    log_message('error', "row->amount = ".$row->amount);

                                    if($row->amount == $amount0) {
                                        //log_message('error', 'row->amount is equal to amount0');
                                        if($this->customer_model->verify_amount($invoiceId0)) {
                                            $subject = 'Successful transaction';
                                            $message = 'There was a successful transaction. View the log for details /public_html/application/logs';
                                            $this->_send_email($subject, $message);
                                        }
                                    } else {
                                        //log_message('error', 'we in the else');
                                        //log_message('error', 'invoiceId0 = '.$invoiceId0);
                                        if($this->customer_model->update_amount_and_verify($invoiceId0, $row->amount)) {
                                            //log_message('error', 'we inside update_amount_and_verify');
                                            $subject = 'Successful transaction';
                                            $message = 'There was a successful transaction. View the log for details /public_html/application/logs';
                                            $this->_send_email($subject, $message);
                                        }
                                    }
                                }
                            }
                        } else {
                            $subject = 'Results Equal False';
                            $message = 'View the log for details /public_html/application/logs';
                            $this->_send_email($subject, $message);
                        }
                    } else {
                        $subject = 'Status NOT Complete!';
                        $message = 'View the log for details /public_html/application/logs';
                        $this->_send_email($subject, $message);
                    }

                    log_message('error', "sender_email = $sender_email");
                    log_message('error', "payment_request_date = $payment_request_date");
                    log_message('error', "status = $status");
                    log_message('error', "receiver0 = $receiver0");
                    log_message('error', "receiver1 = $receiver1");
                    log_message('error', "id0 = $id0");
                    log_message('error', "id1 = $id1");
                    log_message('error', "invoiceId0 = $invoiceId0");
                    log_message('error', "invoiceId1 = $invoiceId1");
                    log_message('error', "amount0 = $amount0");
                    log_message('error', "amount1 = $amount1");
                    log_message('error', "status0 = $status0");
                    log_message('error', "status1 = $status1");
                    log_message('error', "id_for_sender_txn0 = $id_for_sender_txn0");
                    log_message('error', "id_for_sender_txn1 = $id_for_sender_txn1");
                    log_message('error', "status_for_sender_txn0 = $status_for_sender_txn0");
                    log_message('error', "status_for_sender_txn1 = $status_for_sender_txn1");
                    log_message('error', "pending_reason0 = $pending_reason0");
                    log_message('error', "pending_reason1 = $pending_reason1");

                    // check the payment_status is Completed
                    // check that txn_id has not been previously processed
                    // check that receiver_email is your Primary PayPal email
                    // check that payment_amount/payment_currency are correct
                    // process payment
                    $counter++;
                }
                else if (strcmp ($res, "INVALID") == 0) {
                    log_message('error', 'WE INVALIDDDDDDDDDDDDDDDDDD');
                    $test = var_export($res, true);
                    $test = str_replace(array("\r","\n"), '', $test);

                    log_message('error', $test);
                    log_message('error', "Problem with IPN. res = $test");
                }

            }
            fclose ($fp);
        }

    }

    function decodePayPalIPN($raw_post)
    {
        //log_message('error', "testing");
        if (empty($raw_post)) {
            return array();
        } # else:
        $post = array();
        $pairs = explode('&', $raw_post);
        foreach ($pairs as $pair) {
            list($key, $value) = explode('=', $pair, 2);
            $key = urldecode($key);
            $value = urldecode($value);
            # This is look for a key as simple as 'return_url' or as complex as 'somekey[x].property'
            preg_match('/(\w+)(?:\[(\d+)\])?(?:\.(\w+))?/', $key, $key_parts);
            switch (count($key_parts)) {
                case 4:
                    # Original key format: somekey[x].property
                    # Converting to $post[somekey][x][property]
                    if (!isset($post[$key_parts[1]])) {
                        $post[$key_parts[1]] = array($key_parts[2] => array($key_parts[3] => $value));
                    } else if (!isset($post[$key_parts[1]][$key_parts[2]])) {
                        $post[$key_parts[1]][$key_parts[2]] = array($key_parts[3] => $value);
                    } else {
                        $post[$key_parts[1]][$key_parts[2]][$key_parts[3]] = $value;
                    }
                    break;
                case 3:
                    # Original key format: somekey[x]
                    # Converting to $post[somkey][x] 
                    if (!isset($post[$key_parts[1]])) {
                        $post[$key_parts[1]] = array();
                    }
                    $post[$key_parts[1]][$key_parts[2]] = $value;
                    break;
                default:
                    # No special format
                    $post[$key] = $value;
                    break;
            }#switch
        }#foreach

        return $post;
    }#decodePayPalIPN()

    private function _send_email($subject, $message) {
        //log_message('error', 'we in send_email');
        $this->load->library('email');

        $this->email->from('do-not-reply@mysite.com', 'Title');
        $this->email->to('myemail@gmail.com'); 

        $this->email->subject($subject);
        $this->email->message($message);

        $this->email->send();
        //log_message('error', 'email error = '.$this->email->print_debugger());
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T04:58:55.300

如果您现在正在测试实时交易，您的代码仍在沙箱中显示 -

```
$header .= "Host: www.sandbox.paypal.com\r\n";  // this line is needed for sandbox, but may not be needed for prod. 
...
$fp = fsockopen ('ssl://www.sandbox.paypal.com', 443, $errno, $errstr, 30); 
```

确保您更改为 -

```
// $header .= "Host: www.sandbox.paypal.com\r\n"; line removed, not needed
...
$fp = fsockopen ('ssl://www.paypal.com', 443, $errno, $errstr, 30); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T03:45:45.933

没有机会尝试您的代码，但您可以尝试我们在 X.com [https://www.x.com/developers/PayPal/documentation-tools/code-sample/216623](https://www.x.com/developers/PayPal/documentation-tools/code-sample/216623)上的代码示例吗？我们实际上推荐使用 curl 而不是 socket io。

# c - c 从 BMP 获取数据

> ID：13354785
> 
> 赞同：2
> 
> 时间：2012-11-13T02:28:22.957
> 
> 标签：c, bmp

我发现自己正在编写一个简单的程序来从 bmp 文件中提取数据。我刚开始，我正处于 WTF 时刻之一。

当我运行程序并提供此图像时：[http ://www.hack4fun.org/h4f/sites/default/files/bindump/lena.bmp](http://www.hack4fun.org/h4f/sites/default/files/bindump/lena.bmp)

我得到输出：

```
type: 19778
size: 12
res1: 0
res2: 54
offset: 2621440 
```

实际图像大小为 786,486 字节。为什么我的代码报告 12 个字节？

[http://en.wikipedia.org/wiki/BMP_file_format](http://en.wikipedia.org/wiki/BMP_file_format)中指定的标题格式 与我的 BMP_FILE_HEADER 结构相匹配。那么为什么它会充满错误的信息呢？

图像文件似乎没有损坏，并且其他图像给出同样错误的输出。我错过了什么？

```
#include <stdio.h>
#include <stdlib.h>

typedef struct {
    unsigned short type;
    unsigned int size;
    unsigned short res1;
    unsigned short res2;
    unsigned int offset;
} BMP_FILE_HEADER;

int main (int args, char ** argv) {
    char *file_name = argv[1];

    FILE *fp = fopen(file_name, "rb");

    BMP_FILE_HEADER file_header;

    fread(&file_header, sizeof(BMP_FILE_HEADER), 1, fp);

    if (file_header.type != 'MB') {
        printf("ERROR: not a .bmp");
        return 1;
    }

    printf("type: %i\nsize: %i\nres1: %i\nres2: %i\noffset: %i\n", file_header.type, file_header.size, file_header.res1, file_header.res2, file_header.offset);
    fclose(fp);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T02:43:08.143

这里是十六进制的标题：

```
0000000 42 4d 36 00 0c 00 00 00 00 00 36 00 00 00 28 00
0000020 00 00 00 02 00 00 00 02 00 00 01 00 18 00 00 00 
```

长度字段是字节 36 00 0c 00`，按 intel 顺序排列；作为 32 位值处理，它是 0x000c0036 或十进制 786,486（与保存的文件大小匹配）。

可能您的 C 编译器正在将每个字段对齐到 32 位边界。启用包结构选项、编译指示或指令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T02:48:26.450

我可以在您的代码中找到两个错误。

第一个错误：您必须将结构打包为 1，因此每种类型的大小都是其应有的大小，因此编译器不会将其对齐，例如 4 字节对齐。所以在你的代码中`short`，它不是 2 个字节，而是 4 个字节。诀窍是使用编译器指令来打包最近的结构：

```
#pragma pack(1)

typedef struct {
    unsigned short type;
    unsigned int size;
    unsigned short res1;
    unsigned short res2;
    unsigned int offset;
} BMP_FILE_HEADER; 
```

现在它应该正确对齐。

另一个错误在这里：

```
if (file_header.type != 'MB') 
```

您正在尝试使用 1 个字节的类型（使用）检查`short`2 个字节的类型。可能编译器会就此向您发出警告，单引号仅包含 1 个 1 字节大小的字符是规范的。`char``''`

为了解决这个问题，您可以将这 2 个字节分成 2 个 1 字节字符，它们是已知的 (`M`和`B`)，然后将它们组合成一个`word`. 例如：

```
if (file_header.type != (('M' << 8) | 'B')) 
```

如果你看到这个表达式，就会发生这种情况：

`'M'`（`0x4D`在 ASCII 中）向左移动 8 位，将导致`0x4D00`，现在您可以*将*或*或*下一个字符添加到右边的零：（`0x4D00 | 0x42 = 0x4D42`在ASCII 中的位置）`0x42`。`'B'`这样想，你可以写：

```
if (file_header.type != 0x4D42) 
```

然后你的代码应该可以工作。

# c++ - boost::variant 实现

> ID：13354787
> 
> 赞同：9
> 
> 时间：2012-11-13T02:28:35.263
> 
> 标签：c++, boost, boost-variant

我只是对`boost::variant`' 的实现感到好奇。

它像这样工作吗？

两名成员：

1.  表示当前存储类型的数字（即第一个模板参数为 0，第二个模板参数为 1 等）
2.  所有可能类型的联合（当然是最大的）。

`apply_visitor()`：

有一个`switch`关于表示当前存储类型的数字的语句以调用正确的重载（在最坏的情况下，这将被编译为跳转表，因此需要恒定的时间）。

我知道还有一些优化可以肯定`boost::variant`不需要像[这里](http://www.boost.org/doc/libs/1_52_0/doc/html/variant/design.html#variant.design.never-empty.optimizations)详述的那样动态分配内存，但我想我明白了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T03:15:15.323

它几乎按照您描述的方式工作。长话短说：

1.  它有一个整数`which`，指示使用哪种数据类型。

2.  存储是使用 boost 实现的`aligned_storage`，它基本上是最大数据大小的缓冲区。（它在一个联合中，但出于对齐目的）

最后，访问者确实是用`switch`, 在编译时生成的，使用宏来展开所有类型的可能性。

# asp.net-web-api - WebApi：复杂对象集合的属性始终为空

> ID：13354791
> 
> 赞同：0
> 
> 时间：2012-11-13T02:29:02.123
> 
> 标签：asp.net-web-api

我正在尝试在 web api 中返回这个类：

```
 public IEnumerable<Product> Get()
    {
        var fruits = new Category("Fruits");
        var veggies = new Category("Veggies");

        var apple = new Product("apple");
        apple.Categories = new List<Category>() { fruits };

        var potato = new Product("Potatoes");
        potato.Categories = new List<Category>() { veggies };

        var banana = new Product("Banana");
        banana.Categories = new List<Category>() { fruits };

        List<Product> list = new List<Product>(){
          apple, potato, banana
        };

        return list; 
    } 
```

无论出于何种原因，类别集合总是返回空......我错过了什么吗？

谢谢！

更新：

```
 public class Category
    {
        public string Id { get; private set; }
        public string Name { get; private set; }

        public Category() { }

        public Category(string name)
        {
            if (string.IsNullOrEmpty(name))
                throw new ArgumentException("name must be set");

            this.Name = name;
        }
    } 
```

Aaand.. 它不会显示类别，因为 Category 类中的两个属性都没有公共设置器。

让我想知道为什么序列化程序正在检查 setter 的访问修饰符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T09:25:50.103

类别类有 2 个属性，都具有私有设置器；带有私有 setter 的属性不会被序列化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T19:13:00.790

我已验证私有集问题已在 web api RTM 版本中得到修复。

# delphi - SMTP.host 变量问题

> ID：13354792
> 
> 赞同：0
> 
> 时间：2012-11-13T02:29:07.930
> 
> 标签：delphi, smtp, indy

这是我的问题。我正在使用 Delphi 5 和 Indy 9。目前我也没有选择升级。我正在尝试通过 gmail 发送电子邮件，并且我将字符串硬编码为“smtp.google.com”，它工作得很好。但是，如果 smtp.host 从变量中获取主机名，则会失败并出现错误 11001，我无法弄清楚原因。我是使用 indy 的新手，所以我可能遗漏了一些愚蠢的东西，但我不明白为什么它可以接受字符串作为主机，但不能接受保存字符串的变量。（它必须是一个变量，因为我需要根据登录的用户传递不同的 SMTP 主机。这是代码：

```
procedure TFormEmail.SendSimpleMail(ToEmail, MyAttachment: string);
var
  Msg: TIdMessage;
  DestAddr: TIdEmailAddressItem;
  SMTP: TIdSMTP;
  SSLHandler : TidSSLIOHandlerSocket;
  Attachment: TIdAttachment;
  SMTPHost1 :string;
begin
  Msg := idMessage1;
  Msg.From.Text := EmailName(My_User);
  Msg.From.Address := EmailAddress(My_User);
  msg.Subject := 'Test';//email subject
  DestAddr := Msg.Recipients.Add;
  DestAddr.Text := '';//receiver's name (optional)
  DestAddr.Address := ToEmail;//where its going
  Msg.Body.Add(edtEmailBody.text); //email body
  SMTP := IdSMTP1;
  SMTP.IOHandler := idSSLIOHandlerSocket1;
  SMTPhost1 := SMTPHost(My_User);
  SMTPhost1 := 'smtp.google.com';  
  //SMTP.Host := SMTPhost1;  //<--FAILS
  SMTP.Host := 'smtp.google.com'; //<--SUCCEEDS
  SMTP.Port := SMTPPort(My_User);
  SMTP.AuthenticationType := atLogin; //error here (2 error)
  SMTP.Username := EmailAddress(My_User);
  SMTP.Password := SMTPPassword(My_User);
  If not empty(MyAttachment) then
    Attachment := TIdAttachment.Create(Msg.MessageParts, MyAttachment);//loads Att
  Try
    SMTP.Connect;
  except
    SMTP.Connect;//refire if exception (issue with INDY)
  end;
  if useSSL(My_User) then
    SMTP.SendCmd('STARTTLS');//load TLS 
  SMTP.Authenticate;
  SMTP.Send(Msg);
  SMTP.Disconnect;//disconnect from server
end; 
```

我标记了一个失败的和一个成功的，但我不明白我做错了什么。任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T16:03:05.143

看来您对一个问题有更多问题，我只能帮助您解决一个问题。

我对 Connect 也有同样的问题，我只是从 IdSSLOpenSSLHeaders 调用了 Load 方法。

尝试以下操作：

```
SMTP := IdSMTP1;
IdSSLOpenSSLHeaders.Load;
SMTP.IOHandler := idSSLIOHandlerSocket1; 
```

# php - MySQL 查询无法正常工作

> ID：13354793
> 
> 赞同：1
> 
> 时间：2012-11-13T02:29:11.143
> 
> 标签：php, mysql, database

正如您从下面的代码中看到的那样，我正在尝试执行附加查询。

我在执行第二个查询时遇到问题。似乎代码无法识别第二个查询。有人可以请教吗？

提前致谢。

```
$query  = "SELECT * FROM tst WHERE status ='active' order by created DESC LIMIT 9";
$result = mysql_query($query);
if (!$result) die  ("database access failed : "  .   mysql_error());

while($row = mysql_fetch_array($result))
{
  echo"<ul class='gallery'><li>";
  echo "<td>" . $row['adid'] . "</td>";
  $subquery = ("SELECT * FROM match_item_image where adid = '.$row['adid'].'  LIMIT 1 ");
  $results = mysql_query($subquery) or die ("Error in query: $subquery " . mysql_error());
  $rows = mysql_fetch_array($results);
  $rows = mysql_num_rows($results);

  echo   '  <a href="viewad.php?adid='.$row['adid'].'&subcat='.$row['subcat'].'">  <img src= "upload/'.$rows['image'].'"height="175" width="200"border="0"  /> </a> ';
  echo "<h2><a href=''>".$row['state'] . "</a></h2>";
  echo   "<h2><a href=''>".$row['loc'] . "</a></h2>";
  echo"
   </li>
 </ul>";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T02:34:01.357

查询不起作用，因为您在查询中包含`$row['adid']`了字符串而不是值，请像这样连接它

```
"SELECT * FROM match_item_image where adid = '" . $row['adid'] . "'  LIMIT 1 " 
```

并且您的查询现在很容易受到攻击`SQL Injection`，请阅读下面的文章

*   [**在 PHP 中防止 SQL 注入的最佳方法**](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection)

# javascript - 使用数据表启用 History API

> ID：13354797
> 
> 赞同：5
> 
> 时间：2012-11-13T02:29:51.657
> 
> 标签：javascript, jquery, datatables, html5-history

我在页面上有一个对象，表示我需要使用要添加以下功能`dataTable`的 url 跟踪的版本列表`/releases`

1.  如果`/releases?query=<query>`，`dataTable`将使用提供的查询进行初始化
2.  `query`如果用户更改搜索词，则更新参数
3.  浏览器中的后退和前进按钮转到相应的查询

到目前为止，我可以做前 2 个，但是当我监听`popstate`事件时，重绘表格会触发`pushState`我不知道如何防止的事件。到目前为止，这是我的代码：

```
$(document).ready(function(){
  var prevSearch;
  var table = $('#releases').dataTable({
    "bJQueryUI" : true,
    "sPaginationType" : "full_numbers",
    "iDisplayLength" : 50,
    "oSearch": {"sSearch": '#{params[:query]}'},
    "fnDrawCallback": function(oSettings) {
        var curSearch = oSettings.oPreviousSearch.sSearch;
        if (!prevSearch) {
          prevSearch = curSearch;
        } else if (curSearch != prevSearch) {
          console.log("changed to: " + curSearch);
          history.pushState({query: curSearch}, "title", "releases?query=" + curSearch);
          prevSearch = curSearch;
        }
     }
  });
  window.addEventListener("popstate", function(e) {
    if (e.state) {
      table.fnFilter(e.state.query);          
    }
  });
}); 
```

请注意，我使用的是`rails`后端，这是页面中提供的内联 javascript。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T06:25:21.980

您在这里只有 2 个选项：

*   将 pushState 代码移出 drawCallback。当用户输入某些内容时，必须有一些其他代码导致数据表绘制。把你的 pushState 代码放在那里。这是理想的解决方案
*   添加这样的黑客

    ```
    $(document).ready(function () {
        var prevSearch;
        var saveState = true;
        var table = $('#releases').dataTable({
            "bJQueryUI":true,
            "sPaginationType":"full_numbers",
            "iDisplayLength":50,
            "oSearch":{"sSearch":'#{params[:query]}'},
            "fnDrawCallback":function (oSettings) {
                var curSearch = oSettings.oPreviousSearch.sSearch;
                if (!prevSearch) {
                    prevSearch = curSearch;
                } else if (curSearch != prevSearch) {
                    console.log("changed to: " + curSearch);
                    if (saveState) {
                        history.pushState({query:curSearch}, "title", "releases?query=" + curSearch);
                    }
                    prevSearch = curSearch;
                }
            }
        });
        window.addEventListener("popstate", function (e) {
            if (e.state) {
                saveState = false;
                table.fnFilter(e.state.query);
                saveState = true;
            }
        });
    }); 
    ```

# mysql - 编辑：SQL多表实例

> ID：13354798
> 
> 赞同：4
> 
> 时间：2012-11-13T02:29:53.947
> 
> 标签：mysql, sql

我有这张桌子：

```
SUBSCRIPTION

NAME SUBSCRIBER 
```

它本质上是一个包含相互订阅的人员列表的表格。我想编写一个查询，输出一个元组列表，这样，如果集合 B 代表所有订阅 A 的人，B 也代表那些 A 不订阅的人。即，查找未相互订阅的人员列表。

这是我写的查询：

```
SELECT A.name, B.name 
FROM subscription AS A, subscription AS B 
WHERE A.subscriber=B.name AND A.name!=B.subscriber; 
```

即，它应该显示两列 A 和 B，其中 B 订阅 A 而 A 不订阅 B。

我得到的只是很多行重复的垃圾。我在这做错了什么？

好吧，我在说明样品时犯了一个错误。样本是这样的：

梅丽莎，琼订阅约翰。查尔斯，约翰订阅琼。查尔斯订阅了梅丽莎。梅丽莎，琼订阅查尔斯。

第一部分是指订阅者列，第二部分是指名称列。即，约翰的名字和梅丽莎，琼订阅约翰。

因此，它应该输出 (melissa,john) 因为 john 不订阅 melissa。

这将如何改变查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T02:39:28.813

听起来你想做一个 LEFT JOIN。这将返回所有 A 名称并将它们链接到所有 B 名称。每个 A 名称将至少有 1 条记录，但可能很多。最多有多少个 B 名字订阅了名字 A。如果没有 B 订阅者，那么将有一个 A 名字，但 B 列的值为 NULL。

```
SELECT A.name, B.name FROM subscription AS A 
LEFT JOIN subscription AS B ON A.subscriber=B.name AND A.name!=B.subscriber; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T03:26:17.013

这将从订阅表中提取所有记录，其中订阅表中没有对应订阅的对应匹配项。

```
select subscriber, name
from subscription a
where not exists (
  select 1
  from subscription b
  where a.subscriber = b.name
        and a.name = b.subscriber) 
```

# matlab - matlab中的陷波滤波器和谐波噪声

> ID：13354799
> 
> 赞同：2
> 
> 时间：2012-11-13T02:30:04.713
> 
> 标签：matlab, filtering, signal-processing, noise

所以基本上，我的问题是我有一个 .wav 格式的语音信号，它被某个频率的谐波噪声源破坏。我的目标是确定这种噪声发生的频率，并使用陷波滤波器去除所述噪声。到目前为止，我已经使用以下命令将语音信号读入 matlab：

```
[data, Fs] = wavread('signal.wav'); 
```

我的问题是如何确定谐波噪声发生的频率，一旦我做到了，我该如何在该频率下实现陷波滤波器？

注意：由于我当前使用的 MATLAB 版本（2010），我无法访问 iirnotch() 命令或 fdesign.notch()。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T08:40:41.830

一般程序是分析频谱，识别有问题的频率，然后围绕该频率设计一个滤波器。对于大多数实际应用来说，这有点模糊：频率会四处移动，并且没有简单的方法可以将噪声与信号区分开来，因此您必须使用巧妙的技术和一些猜测。但是，如果您知道您有单调损坏，那么，是的，FFT 和陷波滤波器可能会解决问题。

您可以使用 来分析信号`fft`并设计滤波器，`fir1`我相信这是信号处理工具箱的一部分。如果您没有信号处理工具箱，您可以“手动”完成，如转换到频域，删除您不想要的频率（通过将频率向量的相关元素归零）和转换回时域。[这里](http://www.codeproject.com/Articles/317054/Simple-FFT-and-Filtering-Tutorial-with-Matlab)有一个关于这个的教程。

`fft`和函数有很好的`fir1`文档记录：搜索 Mathworks 站点以获取代码示例以帮助您启动和运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T16:01:40.200

要添加/修改 xenoclast 的答案，频域中的过滤可能对您有用，也可能对您不起作用。频域滤波有很多棘手的问题，这里介绍了其中的一些：http: [//blog.bjornroche.com/2012/08/why-eq-is-done-in-time-domain.html](http://blog.bjornroche.com/2012/08/why-eq-is-done-in-time-domain.html)

另一个问题是，如果您尝试一次处理整个文件，过滤器的“宽度”或 Q 将取决于文件的长度。这可能对您有用，也可能不会。如果您有许多不同长度的文件，请不要期望以这种方式获得类似的结果。

要设计您自己的 IIR 陷波滤波器，您可以使用[RBJ 音频滤波器说明书](http://www.musicdsp.org/files/Audio-EQ-Cookbook.txt)。如果您需要帮助，我在这里写了一个教程：

[http://blog.bjornroche.com/2012/08/basic-audio-eqs.html](http://blog.bjornroche.com/2012/08/basic-audio-eqs.html)

我的教程使用钟形/峰值滤波器，但很容易遵循它，然后用 RBJ 的陷波滤波器替换它。

最后一点：假设这实际上是您的 .wav 文件中的音频信号，您也可以用耳朵查找并修复问题频率：

*   在音频编辑程序中打开该文件，该程序可让您实时调整过滤器设置（我不确定 Audacity 是否允许您这样做，但可能）。
*   使用设置为高增益的“增强”或“参数”滤波器并扫描频率设置，直到您听到最突出的噪声。
*   用相同频率的陷波滤波器代替升压滤波器。您可能需要调整宽度以权衡噪声消除与信号保留。
*   根据需要重复（由于许多谐波）。
*   保存生成的文件。

当然，一些音频编辑应用程序具有内置的谐波降噪功能，特别适用于 50/60 Hz 噪声。

# c# - 如何快速仅将数组的一部分复制到另一个数组？

> ID：13354806
> 
> 赞同：0
> 
> 时间：2012-11-13T02:32:06.580
> 
> 标签：c#, .net, arrays, performance, sizeof

我正在编写一个高性能的数据结构。我遇到的一个问题是似乎无论如何都不会将数组的一部分复制到另一个数组（最好尽快）。我也使用泛型，所以我不确定我会如何使用`Buffer.BlockCopy`，因为它需要字节地址，而且似乎不可能客观地确定对象的大小。我知道 Buffer.BlockCopy 在字节级别上工作，但它是否也将填充计为一个字节？

例子：

```
var tmo=new T[5];
var source = new T[10];
for(int i=5;i<source.Length;i++)
{
  tmp[i-5]=source[i];
} 
```

我将如何以更快的方式执行此操作，例如 Array.CopyTo？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T02:36:10.440

您可以使用`Array.Copy()`.

```
Array.Copy(source , 5, tmp, 0, tmp.Length); 
```

# assembly - ASSEMBLY：有人能解释一下 leaq 指令的这一行是做什么的吗？

> ID：13354808
> 
> 赞同：4
> 
> 时间：2012-11-13T02:32:18.710
> 
> 标签：assembly, 64-bit

我正在运行一些汇编代码，但我无法弄清楚一行代码的作用。代码是：

```
 leaq   0(,%rax,4), %rdx 
```

我知道`lea`基本上是一种`mov`指令，但它只移动地址。所以我们将某物的地址移动到`%rdx`（使`%rdx`“指向”堆栈上的某物）。我知道`%rax`堆栈上的指向（例如`-28(%rbp)`），但我很困惑如何将它与 4 相乘来得到我的答案。会`%rdx`指向`4*(-28) = -112(%rbp)`?

谢谢！

编辑：对于上下文，以下代码在此指令之前：

```
pushq   %rbp 
movq    %rsp, %rbp 
movl    %esi, -28(%rbp)
movl    -28(%rbp), %eax 
cltq 
leaq    0(,%rax,4), %rdx 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T05:24:45.917

您的等效 C 代码类似于：

```
extern int32 arr[];
int my_func(int32 n, ...) {
   int32 a=n;
   ...
   arr[a];
   ...
} 
```

n 作为单个 32 位寄存器 esi 传递，存储到本地堆栈帧。该参数随后用于评估 64 位表达式 4*a。如果链接器应该将它重定位到地址“arr”，则可以解释“0”。

那么我的猜测是汇编代码不是由 生成的 `gcc -S foo.c`，而是由`gcc -c foo.c; objdump -d foo.o`

```
 // Similar code from a 32-bit machine
   0:   55                      push   %ebp
   1:   89 e5                   mov    %esp,%ebp
   3:   8b 45 08                mov    0x8(%ebp),%eax
   6:   8b 04 85 00 00 00 00    mov    0x0(,%eax,4),%eax
   d:   5d                      pop    %ebp
   e:   c3                      ret
   f:   90                      nop 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T02:50:16.663

我相信代码正在将地址中的任何内容`%rbp-28`移入`%eax`. 这可能是一个整数。然后它只是将其`value*4`移入`%rdx`（`%eax`类似于方式的64位版本`%ah`是 的高位字节`%eax`）。[这个问题](https://stackoverflow.com/questions/13127611/not-sure-why-we-add-the-registers-rdx-and-rax-when-the-assembly-code-has-been)似乎讨论了一个类似的问题。

# java - 如何在 Splash Activity 中获取用户身份验证

> ID：13354812
> 
> 赞同：0
> 
> 时间：2012-11-13T02:32:43.023
> 
> 标签：java, android

我正在开发一个具有启动画面和用户登录的小应用程序。

我想根据用户 ID 启动不同的选项卡菜单。

假设我有一个 ID ==“100”的管理员将获得 AdminTabActivity，其他人将获得 UserTabActivity。所以我是这样写的。我只是将用户 ID 从这里传递给 MainActivity。

SplashActivity.java

```
public void run(){
        try{
        sleep(1000);
            Intent in = new Intent(getApplicationContext(), MainActivity.class);
            startActivity(in);  
            finish();

        } catch (InterruptedException e){
            e.printStackTrace();
        }finally {                                  

        }
    } 
```

登录活动.java

```
//Stores and Grabs the user ID from sqlite db
db.addUser(json_user.getString(KEY_ID), 
           json_user.getString(KEY_NAME));                                                 

Intent i = new Intent(getApplicationContext(), MainActivity.class);                 

    i.putExtra(KEY_ID, id);
    startActivity(i);

    finish(); 
```

MainActivity.java

```
Intent i = getIntent();
String id = i.getStringExtra(KEY_ID);

if("001".equals(id)){

    /* Launch Admin Screen if ID == 100 */

    Intent in = new Intent(getApplicationContext(), AdminTabActivity.class);           
    startActivity(in);          
    finish();

}else{

    /* Launch User Screen if ID !== 100 */

    Intent in = new Intent(getApplicationContext(), UserTabActivity.class);                        
    startActivity(in);      
    finish();

} 
```

如果用户退出应用程序并返回，它将跳过 LoginActivity 并直接从 Splash 转到 MainActivity （我希望它是），但是即使用户有 ID == 也会跳过这个**if 块**“100”。希望这是有道理的，如果没有，请告诉我，以便我可以解释更多。谢谢！

# css - 怎么去掉图片下的1px？

> ID：13354814
> 
> 赞同：2
> 
> 时间：2012-11-13T02:32:57.350
> 
> 标签：css

[http://down123.xxmn.com/wemade/](http://down123.xxmn.com/wemade/) 图片下方没有填充或边距。但我不知道为什么图像下方大约有 1px。它位于页面的右上角。 ![在此处输入图像描述](../Images/751cece09dccd6dd0adece02f604ac0d.png)

如何删除图像下的1px ix？谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T02:46:45.843

虽然 Andres 的解决方案有效，但它实际上并没有直接处理问题，即图像的垂直对齐。修复它的方法是给图像一个除 之外的对齐方式`baseline`，例如`top`或`bottom`。

这是我通常使用的：

```
img {
    vertical-align: top;
} 
```

这样，您就不会通过更改图像的自然显示模式来“破解”解决方案，而是直接处理问题。

另外，如果您担心内联锚包裹内联图像的方式，那么更改锚上的显示模式，而不是图像（即块或内联块）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T02:37:06.757

只需将您的图像定义为块级元素，以允许您的链接正确环绕您的图像；

```
#top a img {
    display: block;
} 
```

# groovy - GORM - 更新对象而不先检索它

> ID：13354816
> 
> 赞同：2
> 
> 时间：2012-11-13T02:33:24.220
> 
> 标签：groovy, grails-orm

我希望能够更新我有一个 id 的以前持久化的对象，而不必先检索它。我要避免的主要事情是，当从数据库中检索到对象时，必须将多个值复制到对象的字段中。我在映射中有这些值，其键对应于字段名称，因此通过构造函数以映射作为参数来创建对象是微不足道的。不幸的是，以这种方式创建的对象在保存时会导致新的数据库记录，即使 id 字段设置为现有记录的字段也是如此。

我目前在[此处](https://stackoverflow.com/questions/9072307/copy-groovy-class-properties)显示的示例中使用了一个细微的变化来复制 Groovy 类属性，但由于多种原因，它不是一个非常优雅的解决方案。

基本上我希望能够做这样的事情：

```
class Foo {
    int a
    String b
}

def data = [id: 99, a: 11, b: "bar"]    //99 is the id of an existing record
def foo = new Foo(data)
foo.update()    //or some other comparable persistence mechanism 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T08:13:15.840

您可以在 GORM 域类上使用[executeUpdate 方法：](http://grails.org/doc/latest/ref/Domain%20Classes/executeUpdate.html)

```
Foo.executeUpdate("update Foo f set f.a=:a, f.b=:b where f.id=:id", data) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T18:41:04.500

只要您的映射键与您的对象属性具有相同的名称，您就可以使用 executeUpdate 而无需使用闭包或函数指定各个属性名称，如下所示：

```
def updateString = { obj, map ->
        def str = ""
        map.each { key, value ->
            str += "${obj}.${key}=:${key},"
        }

        return str[0..-2]
    }

    def data= [foo:"bar", machoMan:"RandySavage"] 
```

在这种情况下，`println updateString("f", data)`返回`"f.foo=:foo,f.machoMan=:machoMan"`。

然后你可以这样做：

```
Foo.executeUpdate("update Foo f set ${updateString("f", data)}", data) 
```

或者当然你可以将它们组合成一个闭包或函数。

# android - 使用 GPS 的应用程序，每 X 分钟查询一次 Web 服务

> ID：13354821
> 
> 赞同：1
> 
> 时间：2012-11-13T02:34:15.227
> 
> 标签：android, gps, android-service, battery

我正在尝试构建一个在我的 Android 后台运行的应用程序，并且每个 X 时间单位将位置发送到返回一些数据或 null 的远程 Web 服务。每次咨询都需要发送职位。手机需要初始化事件。用例是我在城市中行走，当我靠近地图中的某个点时，我的单元格会提供有关该地点的信息。

处理这个不会耗尽电池的最佳方法是什么？

我的想法是在后台运行 gps 处理程序，每十分钟获取一次当前位置，并拥有一个将信息发送到 Web 服务的服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T02:56:47.987

其中大部分是在[优化电池寿命](http://developer.android.com/training/monitoring-device-state/index.html)的帮助下完成的。

从本质上讲，优化电池寿命最重要的事情是尽量减少请求数据的次数，并在大约同一时间拨打所有电话。当您拨打电话时，无线电会在几秒钟后打开高功率。每秒 10 次查询比每 6 秒 1 次查询要好得多。

GPS也是如此。如果您可以仅每 10 分钟更新一次，那将大大节省时间。我的猜测是，如果您的应用程序只需要如此不频繁的间隔数据，您可能会使用粗略的位置，这将不需要使用 GPS 天线，从而进一步节省电池电量。

# ios - 显示自定义对象的 MKAnnotation

> ID：13354822
> 
> 赞同：2
> 
> 时间：2012-11-13T02:34:16.373
> 
> 标签：ios, mapkit, mkannotation

我有一个对象列表，每个对象都有标题、名称、描述、纬度、经度和地址。是否可以将此对象显示为 MKAnnotations？我已经坚持了几个小时了。当我试图使对象具有 CLLocationCoordinate2D 时，我不断收到关于纬度或经度不可分配的错误。

```
#import <Foundation/Foundation.h>
#import <MapKit/MapKit.h>

@interface Oficina : NSObject <MKMapViewDelegate>

@property (nonatomic, readwrite) CLLocationCoordinate2D oficinaCoordinate;
@property (nonatomic, strong) NSString *oficinaCiudad;
@property (nonatomic, strong) NSString *oficinaEstado;
@property (nonatomic, strong) NSString *oficinaTitulo;
@property (nonatomic, strong) NSString *oficinaTelefono;
@property (nonatomic, strong) NSString *oficinaLatitud;
@property (nonatomic, strong) NSString *oficinaLongitud;
@property (nonatomic, strong) NSString *oficinaID;
@property (nonatomic, strong) NSString *oficinaDireccion;
@property (nonatomic, strong) NSString *oficinaHorario;
@property (nonatomic, strong) NSString *oficinaTipoDeOficina;
@property (nonatomic, strong) NSString *oficinaServicios;
@property (nonatomic, strong) NSString *oficinaTipoDeModulo;

@end 
```

因此，在使用互联网服务后，我得到了大约 70 个这样的对象。现在我希望能够将其中的每一个都变成地图注释。这是我尝试分配纬度的方法之一，但我收到错误“表达式不可分配”..

```
currentOffice.oficinaCoordinate.latitude = [parseCharacters floatValue]; 
```

currentOffice 是我的自定义对象的一个​​实例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T04:43:33.333

可以将标题、名称、描述、纬度、经度和地址显示为 MKAnnotations。

您是否尝试将坐标属性更改为“分配”？

```
@interface MyAnnotation : NSObject<MKAnnotation> 
{   
 CLLocationCoordinate2D coordinate;
 NSString *title;
 NSString *name;
 NSString *description;
}
@property (nonatomic, assign) CLLocationCoordinate2D    coordinate;
@property (nonatomic, copy) NSString *title;
@property (nonatomic, copy) NSString *name;
@property (nonatomic, copy) NSString *description; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T04:44:59.430

这是我如何解决这个问题的一些示例代码。首先加载mapView注解数组：

```
 CLLocationCoordinate2D location;
        Annotation *myAnn;

        if (!self.locationsMutableArray) self.locationsMutableArray = [NSMutableArray array];

        NSMutableArray *tmpMutableArray = [NSMutableArray array];
        for (NSDictionary *subArr in arr)
        {
                    myAnn = [[Annotation alloc] init];
                    myAnn.address = [NSString stringWithFormat:@"%@, %@, %@, %@",
                                     [subArr objectForKey:@"address"],
                                     [subArr objectForKey:@"city"],
                                     [subArr objectForKey:@"state"],
                                     [subArr objectForKey:@"zip"]];
                    location.latitude = [[subArr objectForKey:@"lat"] doubleValue];
                    location.longitude = [[subArr objectForKey:@"lon"] doubleValue];
                    myAnn.coordinate = location;
                    myAnn.title = [subArr objectForKey:@"name"];
                    myAnn.subtitle = [subArr objectForKey:@"siteSpecialtyCategory"];
                    myAnn.siteType = [subArr objectForKey:@"siteType"];
                    myAnn.phoneNumber = [subArr objectForKey:@"phoneNumber"];
                    [tmpMutableArray addObject:myAnn];
         }
        [self.locationsMutableArray addObject:tmpMutableArray];

        [self.mapView addAnnotations:array]; 
```

实际上，您需要创建一个`MKAnnotationView`名为我的自定义子类`Annotation`。它还必须符合`<MKAnnotation>`协议，您可以将它们作为自定义注释添加到地图视图中。

让你的`Oficina`头文件像这样开始：

```
#import <Foundation/Foundation.h>
#import <MapKit/MapKit.h>

@interface Oficina : MKAnnotationView <MKAnnotation>

@property (nonatomic, readwrite) CLLocationCoordinate2D oficinaCoordinate;
@property (nonatomic, strong) NSString *oficinaCiudad;
@property (nonatomic, strong) NSString *oficinaEstado;
@property (nonatomic, strong) NSString *oficinaTitulo;
@property (nonatomic, strong) NSString *oficinaTelefono;
@property (nonatomic, strong) NSString *oficinaLatitud;
@property (nonatomic, strong) NSString *oficinaLongitud;
@property (nonatomic, strong) NSString *oficinaID;
@property (nonatomic, strong) NSString *oficinaDireccion;
@property (nonatomic, strong) NSString *oficinaHorario;
@property (nonatomic, strong) NSString *oficinaTipoDeOficina;
@property (nonatomic, strong) NSString *oficinaServicios;
@property (nonatomic, strong) NSString *oficinaTipoDeModulo;

@end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T23:42:54.333

获取被点击的 MKAnnotation 的对象详细信息的方法是添加：

```
id<MKAnnotation> selectedOffice = view.annotation; 
```

到委托方法

```
-(void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control { } 
```

在我的特定情况下，我的 MKAnnotation 是一个名为 Oficina 的自定义对象，所以我只是将它传递给我的新视图控制器，如下所示：

```
showOfficeDetail = (Oficina *)selectedOffice; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-16T10:11:22.340

这非常简单，只需循环您的对象数组并`MKPointAnnotation`使用坐标创建一个并以您想要的格式创建标题和副标题。然后通过该方法将它们添加到地图中`addAnnotation`，图钉将出现在地图上。

```
for(Event *event in events){
    CLLocationCoordinate2D coordinate = CLLocationCoordinate2DMake(event.lat, event.lon);
    MKPointAnnotation *point = [MKPointAnnotation.alloc initWithCoordinate:coordinate title:event.name subtitle:event.venue.name];
    [self.mapView addAnnotation:point];
} 
```

如果您对默认图钉的外观或行为不满意，那么您可以通过实现来创建自定义图钉，`viewForAnnotation`但您必须注意您支持地图上所有不同类型的注释，而不仅仅是您创建的注释，例如用户当前位置的注释。

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation{
    if([annotation isKindOfClass:MKPointAnnotation.class]){
        MKPinAnnotationView *view = (MKPinAnnotationView *)[mapView dequeueReusableAnnotationViewWithIdentifier:@"CustomPin"];
        if(!view) {
            // create our custom pin view
            view = [MKPinAnnotationView.alloc initWithAnnotation:annotation reuseIdentifier:@"CustomPin"];
            view.canShowCallout = YES;
            view.rightCalloutAccessoryView = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
        }else{
            // update the previously created custom pin
            view.annotation = annotation;
        }
        return view;
    }
    else if([annotation isKindOfClass:MKUserLocation.class]){
        return nil; // use the default view for user location
    }
    return nil; // use the default view for any other annotations
} 
```

# powershell - Powershell：相当于 Perl 的“for”命令？

> ID：13354825
> 
> 赞同：3
> 
> 时间：2012-11-13T02:34:44.170
> 
> 标签：powershell, for-loop, replace

我在 Perl 中无数次使用过这种东西：

```
for ( $someVariable ) {
    s/findthis/replaceitwiththis/g;
    s/findthat/replaceitwithsomethingelse/g;
} 
```

的值`$someVariable`暂时在`$_`，变量“就地”更新；每个新的替换命令都会继续更新/覆盖变量的内容。这是在一个简单的循环中完成大量更改的一种方便且紧凑的方法。

Powershell 是否具有与“for”等价的用法？

***在@neolisk 的回复之后添加评论，以便我可以使用格式。***

```
$s = 'abcde'
$s | foreach {
    $_ -replace 'a','x'
    $_ -replace 'e','z'
}
write-host "And: $s" 
```

屏幕上看到的结果：

```
xbcde
abcdz
And: abcde 
```

也试过`$_ = $_ -replace 'a','x'`等等。这里必须有一些额外的语法才能获得“就地”替换......

***在@Nacht 回复后进一步编辑***。这行得通，尽管我对反引号并不感到疯狂：

```
$s = 'now is the time for all good individuals blah blah'
Write-Host $s
$s = $s `
  -replace "now", 'NEVER' `
  -replace 'time', 'moment' `
  -replace "blah\s+blah", '-- oh, WHATEVER'
Write-Host $s 
```

输出：

```
now is the time for all good individuals blah blah
NEVER is the moment for all good individuals -- oh, WHATEVER 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T02:53:00.410

It is exactly like this in Powershell, but the syntax is slightly different:

```
$someVariable | foreach {
    Write-Host $_;
} 
```

If you want to do in-place replace, keep in mind that `$_` is immutable, i.e. readonly. The proper way would be to output new string on pipeline and collect into another variable, so for your example it can look like this:

```
$s = 'abcde' 
$newS = $s | foreach {
    $_ -replace 'a','x' -replace 'e','z'    
}
write-host "And: $newS"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T22:39:01.647

我不知道在这里以这种方式回答我自己的问题是否合适。如果不是，请指教。总结几种方法（全部选中）：

```
$s = 'abcde' (likewise for all below)
$s | foreach {
    $_ `
    -replace 'a', 'X' `
    -replace 'e', 'Z'
} 
```

`XbcdZ`在执行期间显示。$s*不变*。

```
$s = $s `
    -replace 'a', 'X' `
    -replace 'e', 'Z' 
```

$s 已“就地”更新；现在的价值`XbcdZ`

```
$t = $s | foreach {
    $_ `
    -replace 'a', 'X' `
    -replace 'e', 'Z'
} 
```

$s*不变。*$t 的值：`XbcdZ`

```
$t = $s `
  -replace 'a', 'X' `
  -replace 'e', 'Z' 
```

$s 不变。$t 的值：`XbcdZ`

```
($t = $s) `
  -replace 'a', 'X' `
  -replace 'e', 'Z'
Write-Host "`$s: $s -- `$t: $t" 
```

添加了括号以查看可能发生的情况。
两个变量的值都不会改变。打印到通过 Write-Host 打印的行*上方*`XbcdZ`的控制台。

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T03:56:28.287

这是你要找的吗？

```
$s = 'abcde'
$s = $s -replace 'a','x' -replace 'e','z'
write-host "And: $s" 
```

输出：

```
And: xbcdz 
```

你也可以像这样在几行上做到这一点：

```
$s = 'abcde'
$s = $s -replace 'a','x'
$s = $s -replace 'e','z'
write-host "And: $s" 
```

* * *

以下不起作用，因为每一行都是单独输出的：

```
$s | foreach {
    $_ -replace 'a','x'
    $_ -replace 'e','z'
} 
```

以下不起作用，因为赋值语句不输出任何内容：

```
$s | foreach {
    $_ = $_ -replace 'a','x'
} 
```*

# c# - 在 vs 2010 中创建一个 MSBuild 文件

> ID：13354826
> 
> 赞同：1
> 
> 时间：2012-11-13T02:34:58.273
> 
> 标签：c#, visual-studio-2010, build, msbuild

我有一个基于 .net 3.5 的 Web 应用程序，它是使用 VS 2010 专业版构建的。我正在尝试自动执行 msbuild 的构建任务。有没有办法在 VS 2010 中制作我的项目的构建文件？还是我必须从头开始制作构建文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T03:00:40.723

有一个工具可以帮助您创建自己的 msbuild 文件，它还有 GUI，MS Build Sidekick： http: [//www.attrice.info/msbuild/](http://www.attrice.info/msbuild/)

MS Build Sidekick 不是免费的，但很便宜（55 美元），他们还提供 14 天的试用版。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T02:50:54.213

you need to do it from scratch... file->new->text file...

pretty good tutorial on msdn: [http://msdn.microsoft.com/en-us/library/dd576348.aspx](http://msdn.microsoft.com/en-us/library/dd576348.aspx)

# c# - 计算 PivotItem 的高度？

> ID：13354828
> 
> 赞同：2
> 
> 时间：2012-11-13T02:35:14.770
> 
> 标签：c#, windows-phone, windows-phone-8

以下是 Windows Phone 8 应用程序的一个非常基本的布局。我有`PivotControl`一个`PivotItem`。的标题`PivotControl`用红色勾勒，而 的标题`PivotItem`用绿色勾勒。我将`Canvas`占用 100% 的空间，`PivotItem`因此我需要能够相应地计算它的尺寸（因为高度/宽度将决定其他控件的大小和位置）。

所以现在我可以`PivotItem`用这个计算我的宽度，其中`margin`是所有四个边的边距量（左右乘以 2）：

```
double width = Application.Current.Host.Content.ActualWidth - (margin * 2); 
```

高度更加困难，因为我需要获取屏幕总高度并减去 StatusBar 高度和标题高度（我的图像中的红色矩形）。

有谁知道我怎样才能得到我的身高`PivotItem`？有没有比像我一样尝试计算它更简单的方法？现在`Height`和`ActualHeight`属性都是 0.0。

![在此处输入图像描述](../Images/25c9b3e2e36d416c631d05c0590f2bc4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T14:20:30.427

默认高度和宽度将根据手机的分辨率而变化。以下是根据 Blend 的数据透视项目模板大小。

WVGA (480x800)：456 x 603

WXGA (480x1280)：456 x 603

720p (720x1280)：456 x 656

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T20:43:48.423

如果我理解正确，你有一个 Canvas 占据了整个 PivotItem？像这样的东西：

```
<phone:Pivot>
    <phone:Pivot.Items>
        <phone:PivotItem Header="menu">
            <Canvas x:Name="Canvas" />
        </phone:PivotItem>
        <phone:PivotItem Header="game" />
    </phone:Pivot.Items>
</phone:Pivot> 
```

如果是这样，检索画布的高度非常简单：

```
Debug.WriteLine(this.Canvas.ActualHeight); 
```

注意：该`ActualHeight`属性不会在`Loaded`事件之前填充。因此，如果您尝试从构造函数或`OnNavigatedTo`方法中读取它，则该属性将等于 0。

完整的 XAML 代码：

```
<phone:PhoneApplicationPage 
    x:Class="WP7ForumTest.Page3"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    FontFamily="{StaticResource PhoneFontFamilyNormal}"
    FontSize="{StaticResource PhoneFontSizeNormal}"
    Foreground="{StaticResource PhoneForegroundBrush}"
    SupportedOrientations="Portrait" Orientation="Portrait"
    Loaded="Page_Loaded">

    <!--LayoutRoot is the root grid where all page content is placed-->
    <Grid x:Name="LayoutRoot" Background="Transparent">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
            <phone:Pivot>
                <phone:Pivot.Items>
                    <phone:PivotItem Header="menu">
                        <Canvas x:Name="Canvas" />
                    </phone:PivotItem>
                    <phone:PivotItem Header="game" />
                </phone:Pivot.Items>
            </phone:Pivot>
        </Grid>

</phone:PhoneApplicationPage> 
```

和代码隐藏：

```
private void Page_Loaded(object sender, RoutedEventArgs e)
{
    MessageBox.Show(this.Canvas.ActualHeight.ToString());
} 
```

# javascript - 确定 npm 包的位置（如 `gem which`）

> ID：13354830
> 
> 赞同：2
> 
> 时间：2012-11-13T02:35:38.460
> 
> 标签：javascript, gem, npm

给定一个包名，我如何向 npm 询问它的位置？

换一种说法，我要求的是与`gem which`命令等效的 npm：

```
$ gem which rack
$ /absolute/path/to/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack.rb 
```

* * *

**编辑**：人们提出了建议`npm ls [--long]`，但这并没有给我项目安装包的本地路径。

```
$ npm ls --long

node-project@0.0.1
│ /Users/pje/node-project
│ 
└── underscore@1.4.2
    JavaScript's functional programming helper library.
    git://github.com/documentcloud/underscore.git
    http://underscorejs.org

$ npm --version
1.1.65 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T18:35:29.203

`npm list <pkg> --parseable`将仅返回 的`realPath`属性`pkg`。例如：

```
$ npm list underscore --parseable
/absolute/path/to/node-project/node_modules/underscore 
```

通过有用的[npm list 文档](https://npmjs.org/doc/list.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T02:58:35.427

据我所知，没有，但你可以很容易地`grep`通过。`npm ll`

# python - 比较两个列表以找到平均值

> ID：13354838
> 
> 赞同：0
> 
> 时间：2012-11-13T02:36:41.640
> 
> 标签：python, python-3.x

该列表应包含所有 1 月和所有 2 月的平均利润等；我认为你可以这样做的方法是与列表进行比较，例如第 1 年的列表对于 1 月、2 月、3 月、...、12 月具有价值，从那里我可以找到基于年份的平均利润，这没有'没有工作，我不知道从这里去哪里。有什么建议么？

```
MONTHS = 12
def average_profit(years):
    assert years >= 0, "Years cannot be negative"
    total = 0.0
    monthly_average = 0.0
    total_months = years * MONTHS
    total_list = []
    average_list=[]
    percentage_list = []
    for i in range(0, years):
        yearly_total = 0.0
        for j in range(1, 13):
            monthly_profit = float(input("Please enter the profit made in month {0}: ".format(j)).strip())
            monthly_average = monthly_average + monthly_profit
            month_average = monthly_average/j
            total_list.append(monthly_profit)
            average_list.append(month_average)
            yearly_total = yearly_total + monthly_profit
            total_percent = (monthly_profit/12)*100
            percentage_list.append(total_percent)
        print("Total this year was ${0:.2f}".format(yearly_total))
        total = total + yearly_total
    average_per_month = total / total_months
    return total, average_per_month, total_months, total_list, average_list,          percentage_list 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T02:46:42.317

It seems to me that a better data structure could help with this a good bit. It's hard to tell what your best bet will be, but one suggestion could be to use a `dict` (`defaultdict` is even easier):

```
from collections import defaultdict:
d = defaultdict(list)
for i in range(0,years):
    for month in range(1,13)
        d[month].append(float(input()))

#now find the sum for each month:
for i in range(1,13):
    print sum(d[i])/len(d[i]) 
```

Of course, we could use a list instead of a dictionary, but the dictionary would allow you to use month names instead of numbers (which may be kind of nice -- and I bet you could get their names pretty easily from the `calendar` module.)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T02:43:59.027

您的问题很可能`for i in range(0, years)`应该更改为`for i in range(0, years)`. 您可以在几个月内正确地做到这一点，但在几年内正确地做到这一点同样重要。

# javascript - d3 作用域导致 SVG 恢复为初始数据？

> ID：13354846
> 
> 赞同：0
> 
> 时间：2012-11-13T02:37:38.923
> 
> 标签：javascript, d3.js

我是 d3.js 的新手，一般来说仍然是 javascript 的初学者。我已经让 d3 基于数组中的单个值正确绘制了单个 SVG 矩形。当我通过输入字段增加区域中数字的值，然后调用 reDraw 函数时，矩形会在一秒钟内更改为新大小，然后切换回初始大小。我想我一定有一个范围界定问题，但无法弄清楚。有任何想法吗？

```
var dataset, h, reDraw, svg, w;

w = 300;

h = 400;

dataset = [1000];

// Create SVG element
svg = d3.select("#left").append("svg").attr("width", w).attr("height", h);

// set size and position of bar
svg.selectAll("rect").data(dataset).enter().append("rect").attr("x", 120).attr("y", function(d) {
  return h - (d / 26) - 2;
}).attr("width", 60).attr("height", function(d) {
  return d / 26;
}).attr("fill", "rgb(3, 100, 0)");

// set size and position of text on bar
svg.selectAll("text").data(dataset).enter().append("text").text(function(d) {
  return "$" + d;
}).attr("text-anchor", "middle").attr("x", 150).attr("y", function(d) {
  return h - (d / 26) + 14;
}).attr("font-family", "sans-serif").attr("font-size", "12px").attr("fill", "white");

// grab the value from the input, add to existing value of dataset
$("#submitbtn").click(function() {
  localStorage.setItem("donationTotal", Number(localStorage.getItem("donationTotal")) + Number($("#donation").val()));
  dataset.shift();
  dataset.push(localStorage.getItem("donationTotal"));
  return reDraw();
});

// redraw the rectangle to new size
reDraw = function() {
  return svg.selectAll("rect").data(dataset).attr("y", function(d) {
    return h - (d / 26) - 2;
  }).attr("height", function(d) {
    return d / 26;
  });
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T09:22:21.450

~~您需要告诉 d3 如何将新数据与`reDraw`函数中的现有数据进行匹配。也就是说，您选择了所有矩形，`reDraw`然后将数据绑定到它，而不告诉它新旧之间的关系。因此，在调用 之后`data()`，当前选择（您正在操作的选择）应该是空的（不确定为什么会发生某些事情），而`enter()`选择包含新数据，而选择包含旧数据`exit()`。~~

您有多种选择来完成这项工作。您可以在当前设置中对`enter()`和`exit()`选项进行操作，即删除旧的并添加新的，或者重组您的数据以便能够匹配新旧数据。例如，您可以使用具有适当属性的对象而不是单个数字。后者的优点是您可以添加从旧尺寸到新尺寸的过渡。

~~查看[本教程](http://mbostock.github.com/d3/tutorial/circle.html)以获取有关数据连接的更多信息。~~

**编辑：**

事实证明这实际上不是问题，请参阅评论。

# function - 功能; for 循环还是 if 语句？

> ID：13354853
> 
> 赞同：1
> 
> 时间：2012-11-13T02:38:52.063
> 
> 标签：function, loops, if-statement, for-loop

```
function validEmail (emailAddress)
{
    for (var index=0; index < emailAddress.length; index++)
    {
        if ( emailAddress[index] == "@") 
        {
            for (var  count=0; count <emailAddress.length; count++)
            {
                if (emailAddress[count] == ".")
                {
                    return true;
                }
            }
        }
        else
        {
            return false;
        }
    }
}

function btnParseAddress_onclick()
{
    var emailAddress = addressTextbox.value;

    var userName = emailUsername(emailAddress);
    var domain = emailDomain (emailAddress);
    var valid = validEmail (emailAddress);

    if (valid)
    {
        outputTextbox.value = "Username:" + userName + "\nDomain:" + domain
    } 
    else
    {
        outputTextbox.value = "Invalid Email Address"
    }
} 
```

现在这个分配的重点是从输入的电子邮件地址返回用户名和域。我删除了其他函数和变量，以帮助更好地关注问题。

我需要先验证电子邮件地址。我需要确保有一个“@”和一个“。” 在输入的字符串中，并以真或假返回值。真有弦，假没有弦。当我运行文件时，返回值总是假的。我不知道它是我在 validEmail 函数中的 for 循环还是 btnParseAddress_onclick 函数中的 if 语句

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T02:43:48.743

`for`您可以通过使用`IndexOf`两次来避免循环：

```
if (emailAddress.IndexOf('.', emailAddress.IndexOf('@')+1) > 0) {
    Console.WriteLine("The e-mail address looks valid.");
} 
```

# html - Tidesdk 是否支持视频/音频标签？

> ID：13354854
> 
> 赞同：1
> 
> 时间：2012-11-13T02:39:03.193
> 
> 标签：html, audio, video, tidesdk

像标题一样，Tidesdk 是否支持视频/音频标签？

我的英语很差，希望你能理解！</p>

谢谢 ！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T16:49:08.997

您应该知道 OSX 可以很好地处理 HTML5 音频和视频标签。我们正在努力为所有平台更新 WebKit 支持。在 1.3.1 公开发布之后，我们将重点放在内部库的升级上。从那里，我们将连续发布，直到所有库都完全升级。

# android - 从列表视图中获取所选项目

> ID：13354855
> 
> 赞同：1
> 
> 时间：2012-11-13T02:39:06.240
> 
> 标签：android, android-intent

我做了一些搜索，这个论坛上的问题似乎都与我的不匹配。

**我要完成的工作：**
我的应用程序中有一个**列表视图**。当我选择和项目时，我希望应用程序能够读取该项目是什么并相应地执行我希望它执行的操作。
我正在制作的 App 是一款基于文本的 RPG 游戏。例如：您进入商店，在**列表视图**中看到一个“青铜头盔”，售价 100 金币。当您单击青铜头盔时，我希望它能够理解，“用户单击青铜头盔，让该用户减去 100 金币并给他头盔”

**我试过的：**

```
if (MeleeArmourList.getItemAtPosition(1).toString() == "(100G) Bronze Helmet") {
                int gold Integer.parseInt(textViewShopGoldValue1.getText().toString()) - 100;
                textViewShopGoldValue1.setText("" + gold);
            } 
```

现在这完美无缺。但是这里还有几行代码来演示正在发生的事情：

```
if (MeleeArmourList.getItemAtPosition(2).toString() == "(250G) Bronze Chestplate") {
                int gold = Integer.parseInt(textViewShopGoldValue1.getText().toString()) - 250;
                textViewShopGoldValue1.setText("" + gold);
            }
if (MeleeArmourList.getItemAtPosition(3).toString() == "(125G) Bronze Leggings") {
                int gold = Integer.parseInt(textViewShopGoldValue1.getText().toString()) - 125;
                textViewShopGoldValue1.setText("" + gold);
            }
if (MeleeArmourList.getItemAtPosition(4).toString() == "(100G) Bronze Boots") {
                int gold = Integer.parseInt(textViewShopGoldValue1.getText().toString()) - 100;
                textViewShopGoldValue1.setText("" + gold);
            } 
```

所以现在发生的事情是：当我点击“青铜头盔”时，它不仅会减去头盔上的 100 金币，还会减去胸甲、护腿等上的金币……

**所以我的问题是：**
如何让应用程序单独读取一行并将其与所选字符串进行比较？我还尝试了：“getSelectedItem()”，但这给了我一个 nullPointerException。

有任何想法吗？

**编辑**

```
MeleeArmourList.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {

            if (MeleeArmourList.getSelectedItemPosition() == 1) {
                int gold = Integer.parseInt(textViewShopGoldValue1
                        .getText().toString()) - 100;
                textViewShopGoldValue1.setText("" + gold);
            }
        }

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T04:12:43.080

`int`传递给的参数`onItemClick()`是被单击的列表项的位置，因此无需调用任何其他方法来检索它。

如果我正确理解您的目标，您可以使用类似于以下内容的内容：

```
MeleeArmourList.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> adapterView, View view, int position,
            long item_id) {

        switch(position) {
        case 1:
            // (100G) Bronze Helmet
            int gold = Integer.parseInt(textViewShopGoldValue1.getText().toString()) - 100;
            textViewShopGoldValue1.setText("" + gold);
            break;
        case 2:
            // (250G) Bronze Chestplate
            ...
            break;
        }
        ...
    }

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T02:49:47.297

`getItemAtPosition`返回与该位置关联的项目，与它是否被选中无关。

似乎您希望在选择项目时设置回调：这 `setOnItemSelectedListener`似乎是正确的方法。

请参阅[getItemAtPosition](http://developer.android.com/reference/android/widget/AdapterView.html#getItemAtPosition%28int%29)和[setOnItemSelectedListener的文档](http://developer.android.com/reference/android/widget/AdapterView.html#setOnItemSelectedListener%28android.widget.AdapterView.OnItemSelectedListener%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T03:36:29.703

```
if (MeleeArmourList.getItemAtPosition(1).toString() == "(100G) Bronze Helmet"){
} 
```

您正在将字符串内容与 == 运算符进行比较

尝试使用 equals() 运算符

```
if ("(100G) Bronze Helmet".equals(MeleeArmourList.getItemAtPosition(1).toString() )){
} 
```

或者

```
 if (MeleeArmourList.getItemAtPosition(1).toString().equals("(100G) Bronze Helmet"))
       {

        } 
```

您可以使用此代码检查您选择的项目位置

```
listView.setOnItemClickListener(new OnItemClickListener() {
  @Override
  public void onItemClick(AdapterView<?> parent, View view,
    int position, long id) {
    Toast.makeText(getApplicationContext(),
      "Click ListItem Number " + position, Toast.LENGTH_LONG)
      .show();
  }
}); 
```

# python - Pandas：使用 MultiIndex 进行选择

> ID：13354866
> 
> 赞同：4
> 
> 时间：2012-11-13T02:41:12.427
> 
> 标签：python, pandas

考虑以下数据帧

```
In [136]:
df = pd.DataFrame({'A':[1,1,2,2],'B':[1,2,1,2],'C':np.arange(10,30,5)}).set_index(['A','B'])
df
Out[136]:
      C
A B    
1 1  10
  2  15
2 1  20
  2  25

In [130]:
vals = pd.DataFrame({'A':[1,2],'values':[True,False]}).set_index('A')
vals
Out[130]:
  values
A       
1   True
2  False 
```

如何仅选择 中`df`具有相应`True`值的行`vals`？

如果我`reset_index`在两个框架上，我现在可以合并/加入它们并按照我的意愿进行切片，但是我如何使用（多）索引来做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T09:32:59.853

布尔索引一路...

```
In [65]: df[pd.Series(df.index.get_level_values('A')).isin(vals[vals['values']].index)]
Out[65]: 
      C
A B    
1 1  10
  2  15 
```

请注意，您可以在多索引上使用 xs。

```
In [66]: df.xs(1)
Out[66]: 
    C
B    
1  10
2  15 
```

# jquery - jquery ui：嵌套手风琴都搞砸了

> ID：13354867
> 
> 赞同：0
> 
> 时间：2012-11-13T02:41:17.573
> 
> 标签：jquery, jquery-ui

我有一些使用 php 生成的代码。它输出一个嵌套的手风琴。出于某种原因，手风琴看起来很糟糕。以至于我什至无法解释。这是生成的代码：

```
<div class='accordion'>
    <h3>2012</h3>
    <div class='accordion'>
        <h3>October 2012</h3>
        <div>October 5, 2012</div>
        <div>October 5, 2012</div>
        <div>October 4, 2012</div>
        <div>October 4, 2012</div>
        <div>October 4, 2012</div>
        <div>October 3, 2012</div>
        <div>October 3, 2012</div>
        <div>October 3, 2012</div>
        <div>October 1, 2012</div>
        <div>October 1, 2012</div>
        <div>October 1, 2012</div>
        <div>October 1, 2012</div>
    </div>
    <div class='accordion'>
        <h3>September 2012</h3>
        <div>September 30, 2012</div>
        <div>September 29, 2012</div>
        <div>September 29, 2012</div>
        <div>September 26, 2012</div>
        <div>September 26, 2012</div>
        <div>September 25, 2012</div>
        <div>September 24, 2012</div>
        <div>September 19, 2012</div>
        <div>September 19, 2012</div>
        <div>September 19, 2012</div>
        <div>September 19, 2012</div>
        <div>September 19, 2012</div>
        <div>September 11, 2012</div>
        <div>September 5, 2012</div>
    </div>
    <div class='accordion'>
        <h3>August 2012</h3>
        <div>August 19, 2012</div>
        <div>August 17, 2012</div>
        <div>August 9, 2012</div>
        <div>August 4, 2012</div>
        <div>August 4, 2012</div>
        <div>August 4, 2012</div>
        <div>August 4, 2012</div>
        <div>August 4, 2012</div>
        <div>August 4, 2012</div>
        <div>August 2, 2012</div>
    </div>
    <div class='accordion'>
        <h3>July 2012</h3>
        <div>July 1, 2012</div>
        <div>July 1, 2012</div>
    </div>
</div> 
```

我称之为：

```
$(document).ready(function(){
    $('div.accordion').accordion({
            autoHeight:false,
            collapsible:true,
            active:false});
}); 
```

这看起来应该可以工作。要查看它在做什么，请访问： http: [//lonewolfdigital.com/misc/test/](http://lonewolfdigital.com/misc/test/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T03:11:53.967

手风琴有一个标题..然后是内容..所以你想要的是这个结构

```
<div class='accordion'> <!-- tells its an accordion -->
     <h3>2012</h3> <!-- this is the first heading  -->

    <div class='accordion'> <!-- tells its another accordion  -->
         <h3>October 2012</h3> <!-- first heading  -->

        <div> <!-- the headings content - only one content per heading and so on  -->
            <div>October 5, 2012</div>
            <div>October 5, 2012</div>
            <div>October 4, 2012</div>
            <div>October 4, 2012</div>
            <div>October 4, 2012</div>
            <div>October 3, 2012</div>
            <div>October 3, 2012</div>
            <div>October 3, 2012</div>
            <div>October 1, 2012</div>
            <div>October 1, 2012</div>
            <div>October 1, 2012</div>
            <div>October 1, 2012</div>
        </div>
         <h3>September 2012</h3>

        <div>
            <div>September 30, 2012</div>
            <div>September 29, 2012</div>
            <div>September 29, 2012</div>
            <div>September 26, 2012</div>
            <div>September 26, 2012</div>
            <div>September 25, 2012</div>
            <div>September 24, 2012</div>
            <div>September 19, 2012</div>
            <div>September 19, 2012</div>
            <div>September 19, 2012</div>
            <div>September 19, 2012</div>
            <div>September 19, 2012</div>
            <div>September 11, 2012</div>
            <div>September 5, 2012</div>
        </div>
         <h3>August 2012</h3>

        <div>
            <div>August 19, 2012</div>
            <div>August 17, 2012</div>
            <div>August 9, 2012</div>
            <div>August 4, 2012</div>
            <div>August 4, 2012</div>
            <div>August 4, 2012</div>
            <div>August 4, 2012</div>
            <div>August 4, 2012</div>
            <div>August 4, 2012</div>
            <div>August 2, 2012</div>
        </div>
         <h3>July 2012</h3>

        <div>
            <div>July 1, 2012</div>
            <div>July 1, 2012</div>
        </div>
    </div>​
</div> 
```

[http://jsfiddle.net/c8qW3/](http://jsfiddle.net/c8qW3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T02:52:13.163

请参阅以下小提琴以获取包含在正确 div 中的代码：http: [//jsfiddle.net/ufEyn/2/](http://jsfiddle.net/ufEyn/2/)

```
$(document).ready(function() {
$('.subaccordion,.accordion1').accordion({
    autoHeight: false,
    collapsible: true,
    active: false
}); 
```

# python - 有没有办法将操作系统信息添加到标头（或其他一些地方）以使 GET/POST 请求看起来像是来自某个系统？

> ID：13354872
> 
> 赞同：1
> 
> 时间：2012-11-13T02:41:28.323
> 
> 标签：python, header, http-headers, urllib2

例如，我可以轻松地“发出”来自 FireFox 的请求：

```
import urllib2

header = {"User-Agent": "Mozilla/5.0 (Windows NT 5.1; rv:14.0) Gecko/20100101 Firefox/14.0.1"}
req = urllib2.request("http://google.com", None, header)
response = urllib2.urlopen(req) 
```

我想知道，有没有办法将操作系统信息添加到标题或其他地方，让它看起来像是来自某个操作系统？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T02:43:39.563

操作系统也在用户代理字符串中。试试下面的字符串。

```
Mozilla/5.0 (X11; Linux i686; rv:10.0) Gecko/20100101 Firefox/10.0 
```

有关用户代理的更多详细信息：[https ://developer.mozilla.org/en-US/docs/Gecko_user_agent_string_reference](https://developer.mozilla.org/en-US/docs/Gecko_user_agent_string_reference)

# java - 捕获 NumberFormatException

> ID：13354875
> 
> 赞同：0
> 
> 时间：2012-11-13T02:42:13.147
> 
> 标签：java, numberformatexception

下面是别人写的课。

我面临的问题是，当它进入`parse method`with 时`null as the rawString`，它正在抛出`NumberFormatException`。

所以我想做的是，我应该抓住那个 NumberFormatException 和`set the value itself as null`. 那么我的做法对吗？

```
public class ByteAttr {

    @JExType(sequence = 1)
    private Byte value;

    public static ByteAttr parse(String rawString) {
        ByteAttr attr = new ByteAttr();
        try {
            attr.setValue(Byte.valueOf(rawString));
        } catch (NumberFormatException nfEx) {
            attr.setValue(null);
        }
        return attr;
    }

    public Byte getValue() {
        return this.value;
    }

    public void setValue(Byte value) {
        this.value = value;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T02:49:04.413

正确的方法取决于你想在程序中完成什么。

*   如果稍后在您的程序`ByteAttr.getValue()`中返回是有意义的，那么您的方法可能会奏效。`null`
*   但是，您需要考虑是否*应该*`parse`在使用难以辨认的参数（包括 ）调用时抛出异常`null`。另一种方法是捕获`NumberFormatException`并抛出一个在程序中具有语义意义的不同异常。

```
    公共静态 ByteAttr 解析（字符串 rawString）抛出 BadAttributeException {
        ByteAttr attr = new ByteAttr();
        尝试 {
            attr.setValue(Byte.valueOf(rawString));
        } 捕捉（NumberFormatException nfEx）{
            抛出新的 BadAttributeException(nfEx); // 包装原始异常
        }
        返回属性；
    }

```

*   另一种技术是在无法辨认`parse`的情况下将默认值传递给：`rawString`

```
    公共静态 ByteAttr 解析（字符串 rawString，字节 defaultValue）{
        ByteAttr attr = new ByteAttr();
        尝试 {
            attr.setValue(Byte.valueOf(rawString));
        } 捕捉（NumberFormatException nfEx）{
            attr.setValue（默认）；
        }
        返回属性；
    }

```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T02:56:21.630

你需要做四件事：

1.  确定在您将使用该方法的上下文中不可解析的数字字符串的含义。这是否意味着程序中存在内部问题？损坏的文件？用户错字？没有错，但是该字符串需要以不同的方式处理？
2.  考虑到这一点，决定处理它的最佳方式。几乎总是，如果错误是由外部输入触发的，您需要将其报告回来。替换 null**可能**是处理它的好方法。
3.  记录你决定做什么。如果一个方法要返回具有某种特定含义的 null，则需要将其写为注释，最好是 Javadoc 注释。
4.  执行你的决定。

我得到的印象，也许是不公平的，你直接跳到了第 4 步，没有考虑问题的可能原因和适当的报告。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T02:46:04.080

您可以使用以下条件添加提前退出：

```
if (rawString != null) {
    return attr; // or other value you prefer
} 
```

您还可以确保 parse 方法的调用者测试空值，并避免在空值时调用 parse。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T02:49:53.303

这取决于您的应用程序中对空值的容忍度。如果您希望用户不将空字符串传递给该`parse()`方法，那么您应该进行防御性空检查并抛出异常。

```
if (null == rawString) {
    throw new CustomException("rawString cannot be null");
} 
```

这同样适用于 NumberFormatException 的 catch 块，在该块中，您不应将 Byte 属性的值静默设置为 null，而应引发带有适当消息的异常。

但如果`null`完全可以接受，那么您应该执行防御性空检查并将 Byte 属性设置为空。NumberFormatException 当然不应该被压制，恕我直言。

# http-get - 读取数据并将数据发送到数据库

> ID：13354876
> 
> 赞同：1
> 
> 时间：2012-11-13T02:42:18.740
> 
> 标签：http-get

我正在尝试在我的数据库中使用 android 应用程序。我知道如何检索信息并将其发送到数据库，但我不知道如何在 Android 中进行。当我在浏览器中输入 URL 时，让我们说“http://01.01.001.001/api/example”，我可以看到：

```
<ArrayOfArrayOfstring xmlns:i="http://www.w3.org/2001/XMLSchema-instance"
xmlns="http://schemas.microsoft.com/2003/10/Serialization/Arrays">
<ArrayOfstring>
<string>52</string>
<string>Pregunta español prueba 52</string>
<string>NO</string>
<string>SI</string>
<string>NO</string>
<string/>
<string/>
<string/>
<string/>
<string/>
<string/>
<string/>
<string i:nil="true"/>
</ArrayOfstring>
<ArrayOfstring>
<string>53</string>
<string>Pregunta 53 NIVEL 2</string>
<string>NO</string>
<string>53 mucho</string>
<string>53 Algo</string>
<string>53 Nada</string>
<string>53 Poco</string>
<string>53 Fin</string>
<string i:nil="true"/>
<string i:nil="true"/>
<string i:nil="true"/>
<string i:nil="true"/>
<string i:nil="true"/>
</ArrayOfstring> 
```

这是一堆字符串。如何将每个字符串放在android中的变量中？如果我尝试

```
public static InputStream getInputStreamFromUrl(String url) {
    InputStream content = null;
    try {
        HttpGet httpGet = new HttpGet(url);
        HttpClient httpclient = new DefaultHttpClient();
        // Execute HTTP Get Request
        HttpResponse response = httpclient.execute(httpGet);
        content = response.getEntity().getContent();
    } catch (Exception e) {
        //handle the exception !
    }
    return content;

} 
```

使用 URL 时内容始终为空。一旦内容不为空，如何将其转换为一组字符串？

非常感谢！

# c# - EasyHook，.NET Remoting 客户端和服务器之间的共享接口？

> ID：13354882
> 
> 赞同：2
> 
> 时间：2012-11-13T02:43:35.430
> 
> 标签：c#, c#-4.0, remoting, .net-remoting, easyhook

*IPC客户端和*IPC服务器如何调用共享远程接口（继承MarshalByRefObject的类）进行通信，而不必将接口类放在注入应用程序中？例如，如果我将接口类放在被注入目标进程的*注入*库项目中，我的注入应用程序将无法引用该接口。

编辑：我已经回答了下面的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T02:43:35.430

从[EasyHook Commit 66751](http://easyhook.codeplex.com/SourceControl/changeset/66751)（绑定到 EasyHook 2.7 alpha）开始，似乎无法在客户端（*启动*DLL 注入的进程）和服务器（运行您的*注入*进程）中获取远程接口的实例。注入的DLL）。

我是什么意思？

好吧，在[FileMon](http://easyhook.codeplex.com/SourceControl/changeset/view/66751#612833)和[ProcessMonitor](http://easyhook.codeplex.com/SourceControl/changeset/view/66751#612779)示例中，请注意共享远程处理接口（*[`FileMonInterface`](http://easyhook.codeplex.com/SourceControl/changeset/view/66751#612833)嵌入在[Filemon](http://easyhook.codeplex.com/SourceControl/changeset/view/66751#612833)[`Program.cs`](http://easyhook.codeplex.com/SourceControl/changeset/view/66751#612833)中，而[DemoInterface](http://easyhook.codeplex.com/SourceControl/changeset/view/66751#612775)在其自己的文件中，对于[ProcessMonitor](http://easyhook.codeplex.com/SourceControl/changeset/view/66751#612779)*）是如何放置在*注入*程序集中的。`FileMonInterface`在 FileMon 项目中。`DemoInterface`在 ProcessMonitor 项目中。

为什么不是另一轮？为什么不放入`FileMonInterface`项目FileMonInject，并放入`DemoInterface`ProcMonInject？*因为这样调用应用程序（FileMon 和 ProcessMonitor）将无法再访问这些接口。*

原因是因为 EasyHook 内部使用：

```
RemotingConfiguration.RegisterWellKnownServiceType(
                typeof(TRemoteObject),
                ChannelName,
                InObjectMode); 
```

此远程调用允许客户端调用您的（服务器）接口，但服务器本身（您，应用程序）无法调用它。

**解决方案**

相反，使用：

```
// Get the instance by simply calling `new RemotingInterface()` beforehand somewhere
RemotingServices.Marshal(instanceOfYourRemotingInterfaceHere, ChannelName); 
```

我所做的是向 EasyHook 的 RemoteHook.IpcCreateServer() 添加一个重载，以接受我进行 .NET 远程处理的新“方式”。

这很丑陋，但它有效：

# 编码

用以下代码替换整个 IpcCreateServer 方法（从大括号到大括号）。这里显示了两种方法。一是更详细的过载。第二个是调用我们重载的“原始”方法。

```
public static IpcServerChannel IpcCreateServer<TRemoteObject>(
        ref String RefChannelName,
        WellKnownObjectMode InObjectMode,
        TRemoteObject ipcInterface, String ipcUri, bool useNewMethod,
        params WellKnownSidType[] InAllowedClientSIDs) where TRemoteObject : MarshalByRefObject
    {
        String ChannelName = RefChannelName ?? GenerateName();

        ///////////////////////////////////////////////////////////////////
        // create security descriptor for IpcChannel...
        System.Collections.IDictionary Properties = new System.Collections.Hashtable();

        Properties["name"] = ChannelName;
        Properties["portName"] = ChannelName;

        DiscretionaryAcl DACL = new DiscretionaryAcl(false, false, 1);

        if (InAllowedClientSIDs.Length == 0)
        {
            if (RefChannelName != null)
                throw new System.Security.HostProtectionException("If no random channel name is being used, you shall specify all allowed SIDs.");

            // allow access from all users... Channel is protected by random path name!
            DACL.AddAccess(
                AccessControlType.Allow,
                new SecurityIdentifier(
                    WellKnownSidType.WorldSid,
                    null),
                -1,
                InheritanceFlags.None,
                PropagationFlags.None);
        }
        else
        {
            for (int i = 0; i < InAllowedClientSIDs.Length; i++)
            {
                DACL.AddAccess(
                    AccessControlType.Allow,
                    new SecurityIdentifier(
                        InAllowedClientSIDs[i],
                        null),
                    -1,
                    InheritanceFlags.None,
                    PropagationFlags.None);
            }
        }

        CommonSecurityDescriptor SecDescr = new CommonSecurityDescriptor(false, false,
            ControlFlags.GroupDefaulted |
            ControlFlags.OwnerDefaulted |
            ControlFlags.DiscretionaryAclPresent,
            null, null, null,
            DACL);

        //////////////////////////////////////////////////////////
        // create IpcChannel...
        BinaryServerFormatterSinkProvider BinaryProv = new BinaryServerFormatterSinkProvider();
        BinaryProv.TypeFilterLevel = TypeFilterLevel.Full;

        IpcServerChannel Result = new IpcServerChannel(Properties, BinaryProv, SecDescr);

        if (!useNewMethod)
        {
            ChannelServices.RegisterChannel(Result, false);

            RemotingConfiguration.RegisterWellKnownServiceType(
                typeof(TRemoteObject),
                ChannelName,
                InObjectMode);
        }
        else
        {
            ChannelServices.RegisterChannel(Result, false);

            ObjRef refGreeter = RemotingServices.Marshal(ipcInterface, ipcUri);
        }

        RefChannelName = ChannelName;

        return Result;
    }

    /// <summary>
    /// Creates a globally reachable, managed IPC-Port.
    /// </summary>
    /// <remarks>
    /// Because it is something tricky to get a port working for any constellation of
    /// target processes, I decided to write a proper wrapper method. Just keep the returned
    /// <see cref="IpcChannel"/> alive, by adding it to a global list or static variable,
    /// as long as you want to have the IPC port open.
    /// </remarks>
    /// <typeparam name="TRemoteObject">
    /// A class derived from <see cref="MarshalByRefObject"/> which provides the
    /// method implementations this server should expose.
    /// </typeparam>
    /// <param name="InObjectMode">
    /// <see cref="WellKnownObjectMode.SingleCall"/> if you want to handle each call in an new
    /// object instance, <see cref="WellKnownObjectMode.Singleton"/> otherwise. The latter will implicitly
    /// allow you to use "static" remote variables.
    /// </param>
    /// <param name="RefChannelName">
    /// Either <c>null</c> to let the method generate a random channel name to be passed to 
    /// <see cref="IpcConnectClient{TRemoteObject}"/> or a predefined one. If you pass a value unequal to 
    /// <c>null</c>, you shall also specify all SIDs that are allowed to connect to your channel!
    /// </param>
    /// <param name="InAllowedClientSIDs">
    /// If no SID is specified, all authenticated users will be allowed to access the server
    /// channel by default. You must specify an SID if <paramref name="RefChannelName"/> is unequal to <c>null</c>.
    /// </param>
    /// <returns>
    /// An <see cref="IpcChannel"/> that shall be keept alive until the server is not needed anymore.
    /// </returns>
    /// <exception cref="System.Security.HostProtectionException">
    /// If a predefined channel name is being used, you are required to specify a list of well known SIDs
    /// which are allowed to access the newly created server.
    /// </exception>
    /// <exception cref="RemotingException">
    /// The given channel name is already in use.
    /// </exception>
    public static IpcServerChannel IpcCreateServer<TRemoteObject>(
        ref String RefChannelName,
        WellKnownObjectMode InObjectMode,
        params WellKnownSidType[] InAllowedClientSIDs) where TRemoteObject : MarshalByRefObject
    {
        return IpcCreateServer<TRemoteObject>(ref RefChannelName, InObjectMode, null, null, false, InAllowedClientSIDs);
    } 
```

就是这样。这就是你需要改变的一切。您不必更改 IpcCreateClient()。

# 使用代码

以下是如何使用新的重载方法：

说你有

```
public class IpcInterface : MarshalByRefObject { /* ... */ } 
```

作为您的共享远程接口。

创建它的一个新实例，并存储它的引用。您将使用它与您的客户沟通。

```
var myIpcInterface = new IpcInterface(); // Keep this reference to communicate! 
```

以下是您之前创建该远程处理通道的**方式**：

```
 ipcServer = RemoteHooking.IpcCreateServer<IpcInterface>(ref IpcChannelName, WellKnownObjectMode.Singleton, WellKnownSidType.WorldSid); 
```

以下是您现在创建该远程处理通道的**方法**：

```
 ipcServer = RemoteHooking.IpcCreateServer<IpcInterface>(ref IpcChannelName, WellKnownObjectMode.Singleton, myIpcInterface, IpcChannelName, true, WellKnownSidType.WorldSid); 
```

**别忘了...**

我从[这个 StackOverflow 帖子](https://stackoverflow.com/a/493594/555547)中得到了这个解决方案。请务必照他说的做，并重写 InitializeLifetimeService 以返回 null：

```
public override object InitializeLifetimeService()
{
    // Live "forever"
    return null;
} 
```

我认为这应该可以防止客户端丢失远程接口。

**用途**

现在，您不必被迫将远程接口文件与注入项目放在同一目录中，而是可以专门为您的接口文件创建一个库。

对于那些有过 .NET 远程处理经验的人来说，这个解决方案可能是常识，但我对此一无所知（可能在这篇文章中使用了错误的接口一词）。

# java - jcuda 或 cuda：over 与其他的优缺点

> ID：13354889
> 
> 赞同：1
> 
> 时间：2012-11-13T02:44:22.807
> 
> 标签：java, c, cuda, gpu, jcuda

我的母语是 Java（我知道我知道，但你不能改变你是谁）。

所以我想了解做 CUDA 与 JCUDA 的优缺点。

我刚刚发现有一个[jcuda.org](http://www.jcuda.org/)

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T05:46:45.510

[cuda](http://www.nvidia.com/getcuda)代表对 C 或 C++（或 Fortran）的语言扩展。[JCuda](http://jcuda.org)提供了一个绑定 API，以便可以从 Java 调用库调用（例如，用于线性代数的 cublas，或用于 fft 的 cufft 等）和用 C 或 C++ 编写的任意 cuda 函数。如果您想编写在 GPU 上运行的 java 内核代码，您可能还对[root beer](https://github.com/pcpratts/rootbeer1)感兴趣。Root beer 允许您直接编写在 GPU 中的线程处理器上运行的内核代码，而不需要任何 CUDA C。但是，您仍然需要安装 CUDA 工具包来启用 Root Beer“Java 编译器”。

# c# - 从 RGB 整数转换为十六进制

> ID：13354892
> 
> 赞同：23
> 
> 时间：2012-11-13T02:44:38.063
> 
> 标签：c#, bitmap, bit-shift

我所拥有的是 R:255 G:181 B:178，并且我正在使用 C#（对于 WP8，更具体地说）

我想将其转换为十六进制数字以用作颜色（设置 WriteableBitmap 的像素颜色）。我正在做的是以下内容：

```
int hex = (255 << 24) | ((byte)R << 16) | ((byte)G << 8) | ((Byte)B<<0); 
```

但是当我这样做时，我只是变得蓝色。

任何想法我做错了什么？

此外，要撤消此操作，检查 RGB 值，我将：

```
int r = ((byte)(hex >> 16)); // = 0
int g = ((byte)(hex >> 8)); // = 0
int b = ((byte)(hex >> 0)); // = 255 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-11-13T02:51:34.070

试试下面的：

```
using System.Drawing;
Color myColor = Color.FromArgb(255, 181, 178);
string hex = myColor.R.ToString("X2") + myColor.G.ToString("X2") + myColor.B.ToString("X2"); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2018-08-07T15:42:56.963

使用字符串插值，这可以写成：

```
$"{r:X2}{g:X2}{b:X2}" 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-12-22T20:56:32.883

您可以使用较短的字符串格式来避免字符串连接。

```
string.Format("{0:X2}{1:X2}{2:X2}", r, g, b) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-09-21T20:43:07.117

您可以为此使用[ColorHelper](https://www.nuget.org/packages/ColorHelper/)库：

```
using ColorHelper;
RGB rgb = new RGB(100, 0, 100);
HEX hex = ColorConverter.RgbToHex(rgb); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-08-23T15:40:08.510

问候人类同胞，

```
//Red Value
int integerRedValue = 0;
//Green Value
int integerGreenValue = 0;
//Blue Value
int integerBlueValue  = 0;

string hexValue = integerRedValue.ToString("X2") + integerGreenValue.ToString("X2") + integerBlueValue.ToString("X2"); 
```

# c - 使用倾斜堆来保存 C 中的结构

> ID：13354894
> 
> 赞同：1
> 
> 时间：2012-11-13T02:44:55.310
> 
> 标签：c, struct, heap, skew

> **可能重复：**
> [斜堆的 C 实现](https://stackoverflow.com/questions/13353281/c-implementation-of-skew-heap)

我有以下结构：

```
typedef struct Task_t {
   float length;
   int value;
} task_t; 
```

我正在尝试使用倾斜堆来使用“值”来保存这些结构。因此，具有最低“值”的结构将是根。我的倾斜堆实现如下：

```
typedef struct node
{
int value;
struct node * root;
struct node * leftchild;
struct node * rightchild;
} Node;

typedef Node * skewHeap;

struct skewHeap
{
    struct node * root;
};
void skewHeapInit (struct skewHeap *sk)
{
    sk->root = 0;
}
void skewHeapAdd (struct skewHeap *sk)
{
    struct node *n = (struct node *) malloc(sizeof(struct node));
    struct node *s;
    assert(n != 0);
    n->value = 0;
    n->leftchild = 0;
    n->rightchild = 0;
    s->root = skewHeapMerge(s->root,n);
}

void skewHeapRemoveFirst (struct skewHeap *sk)
{
    struct node * n = sk->root;
    sk->root = skewHeapMerge(n->leftchild, n->rightchild);
    free(n);

}

struct node * skewHeapMerge(struct node *left, struct node *right)
{

    struct node *temp;

    if (left == NULL)
        return right;

    if (right == NULL)
        return left;

    if (left->value < right->value)
    {
        temp = left->leftchild;
        left->leftchild = skewHeapMerge(left->rightchild, right);
        left->rightchild = temp;
        return left;
     }
     else
     {
        temp = right->rightchild;
                right->rightchild = skewHeapMerge(right->leftchild, left);
        right->leftchild = temp;
        return right;
    }
} 
```

我的问题是我不知道如何从这个倾斜堆中正确插入和删除结构。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T04:19:57.073

与其`value`直接存储在堆中的每个节点中，不如存储一个指向任务的指针。您的插入方法应采用指向您要添加的任务的指针。它将需要为节点中的任务分配内存，然后将相关数据复制进去。您需要在删除方法中释放它。

例如

```
typedef struct node
{
    Task_t *task;
    struct node *root;
    struct node *left;
    struct node *right;
} Node;

// your add should have passed in a value, because the only thing your code adds to the heap is zeros
void skewHeapAdd (struct skewHeap *sk, Task_t *task); 
```

老实说，你可以只存储`Task_t task;`而不是使用指针，因为它只包含一个 int 和一个浮点数，所以复制它并不是很昂贵，但更一般地，你应该使用指向任务的指针。在您的情况下，您还会通过存储实际结构而不是指向结构的指针来浪费更多内存，因为您在每个节点中都有一个明确的根指针。我强烈建议摆脱它（它既不优雅也完全没有必要），但这需要重写你的代码。

# sas - 如何遍历SAS中的宏变量

> ID：13354896
> 
> 赞同：4
> 
> 时间：2012-11-13T02:45:06.673
> 
> 标签：sas

我有一个这样的例子：

```
proc sql;
select dealno into :deal_no 
from deal_table; 
```

现在我想遍历`deal_no`现在包含表 deal_table 中所有 dealno 的变量，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T09:31:41.040

另一种选择是在 sql 代码中添加“分隔符”，这将为值添加分隔符。然后，您可以在数据步骤中使用 SCAN 函数或在宏中使用 %SCAN 来循环遍历这些值并执行您想要的任何任务。下面的例子。

```
proc sql noprint;
select age into :age separated by ','
from sashelp.class;
quit;

%put &age.;

data test;
do i=1 by 1 while(scan("&age.",i) ne '');
    age=scan("&age.",i);
    output;
end;
drop i;
run; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-13T07:08:16.267

如果你这样做

```
%put &deal_no; 
```

你可以看到它只包含 的第一个值`dealno`，而不是全部。为避免这种情况，您可以执行以下操作：

```
proc sql;
    create table counter as select dealno from deal_table;
    select dealno into :deal_no_1 - :deal_no_&sqlobs
    from deal_table;
quit;

%let N = &sqlobs;

%macro loop;
%do i = 1 %to &N;
    %put &&deal_no_&i;
%end;
%mend;

%loop; run; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-18T20:29:38.123

这是另一个解决方案。

```
proc sql noprint;
  select age into :ageVals separated by ' '
  from ageData;
quit;  

%put &ageVals;

%macro loopAgeVals;   %let i = 1;   %let ageVal = %scan(&ageVals, &i);

  %do %while("&ageVal" ~= "");
    %put &ageVal;

    %let i = %eval(&i + 1);
    %let ageVal = %scan(&ageVals, &i);   
  %end; 

%mend;

%loopAgeVals; 
```

# php - Require.js 和 Zend 框架

> ID：13354899
> 
> 赞同：2
> 
> 时间：2012-11-13T02:45:33.973
> 
> 标签：php, jquery, zend-framework, requirejs

在 Zend 框架中包含 Require.js 的最佳方式是什么？我目前在zend框架中调用js文件的方式如下：

```
<?php echo $this->jQuery()->setLocalPath($this->path('js/jquery/jquery-1.7.1.min.js'))
    ->enable()
    ->setUiLocalPath($this->path('js/jquery/jquery-ui-1.8.16.custom.min.js'))
    ->uiEnable()
    ->addStylesheet($this->path('css/jquery/jquery-ui-1.8.16.custom.css'));

    echo $this->headScript()->appendFile($this->path('js/jquery.tipTip.js'))

        ->appendFile($this->path('js/customScripts/facebook.js'))
        ->appendFile($this->path('js/facebook/jquery.facebook.multifriend.select.js'))
        ->appendFile($this->path('js/customScripts/logindialog.js'))
        ->appendFile($this->path('js/customScripts/globalFunctions.js'))
        ->appendFile($this->path('js/kendo.web.min.js'))
        ->appendFile($this->path('js/customScripts/fancyAlert.js'))
        ->appendFile($this->path('js/inc/jquery.mousewheel.min.js'))
        ->appendFile($this->path('js/pagination-jq.js'))

        ->appendFile($this->path('js/jquery.tools.min.js'))
        ->appendFile($this->path('js/fancybox/jquery.fancybox-1.3.4.pack.js'))
        ->appendFile($this->path('js/jq-history/scripts/jquery.history.min.js'));

    ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T03:04:50.670

使用 require.js，您只需将一个脚本文件添加到您的头脑中（或在关闭之前`</body>`）。

然后，您将在 require.js 配置文件和模块中实际定义每个模块的依赖关系。

在您的情况下，我将手动添加脚本文件：

```
<script src="require.js" data-main="path/to/mainScriptFile"></script> 
```

或者，在 Zend 中你可以这样做：

```
$this->headScript()
    ->setAllowArbitraryAttributes(true)
    ->appendFile($this->path('js/require.js'), "text/javascript", array('data-main' => 'path/to/mainScriptFile'); 
```

但是此时，只需手动输入脚本标签，开销就更少了。

希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-30T11:48:20.847

在您的 html 文件中，您可以在标签之间添加行。`<head></head>`这是最好的方法

```
<script src="/path/to/require.js"></script> 
```

或者您可以使用 jquery

```
var jsScript = $("<script src='/path/to/require.js'></script>");
$('body').append(txt2); 
```

这会将js附加到正文的底部

# php - 如何强制 php 在不结束会话的情况下释放一些内存？

> ID：13354900
> 
> 赞同：0
> 
> 时间：2012-11-13T02:45:41.533
> 
> 标签：php

我有一个在一个会话中运行多次的 php 脚本。
看来，在这些多次运行期间，我的脚本达到了[128MB 内存限制](http://www.php.net/manual/en/ini.core.php#ini.memory-limit)
如何在不同脚本运行之间强制释放内存，而不会丢失一些非常小的会话变量？
谢谢。
------------------------------
更新：
问题似乎出在其他地方:-(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T03:49:58.537

您可以尝试在每个脚本中最后一次使用变量后手动使用 unset() ，以确保 PHP 在不应该保留变量时不保留变量。除此之外，在不了解您尝试实施的情况下，我怀疑是否有任何方法可以提供更多帮助。

# android - 关于外部Jar的一些问题——android-support-v13.jar

> ID：13354904
> 
> 赞同：2
> 
> 时间：2012-11-13T02:46:05.283
> 
> 标签：android, eclipse, android-viewpager

我想实现页面之间切换的效果。像 android 4.0 中的 Contracts，包括 AndroidBar 、Tab 和 ViewPager。

但是当我通过eclipse创建android项目时，它显示“您的项目包含错误，请在运行您的应用程序之前修复它们”。

我已经将 jar 从 android SDK 导入到项目中，路径是

```
 **\android-sdk\extras\android\support\v13\android-support-v13.jar** 
```

jar的导入方式是这样的：

```
**project --> Properties --> Java build path --> 
  Libraries --> Add external JARs.. --> android-support-v13.jar --> OK** 
```

但是在java代码中，eclipse会自动跟随代码导入

```
 **import com.example.android.supportv13.R;
    ...** 
```

然后，我删除了包含 com.example 的导入语句。这是同样的问题。

我已经多次清理了这个项目。它不起作用。

android-support-v13.jar 文件不合适吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T03:36:38.570

jar的导入方式是这样的：

**项目 --> 属性 --> Java 构建路径 --> 库 --> 添加外部 JAR .. --> android-support-v13.jar --> 确定**

然后清理项目并重新启动 eclipse 。

没关系。

# php - 数组中的错误，标量？

> ID：13354906
> 
> 赞同：-1
> 
> 时间：2012-11-13T02:46:12.263
> 
> 标签：php

代码：

```
$i=0;
    while ($i < $rows) {
        $storage_id     =   mysql_result($giftCards,$i,"id");
        $result[$storage_id]['display_name'] = mysql_result($giftCards,$i,"display_name");
        $result[$storage_id]['image_icon'] = mysql_result($giftCards,$i,"image_icon");
        $result[$storage_id]['currency'] = mysql_result($giftCards,$i,"currency");
        $i++;
    }
    return $result; 
```

导致错误：

```
Warning: Cannot use a scalar value as an array in /home/chosen/public_html/classes/giftcards.class.php on line 13 
```

在几行。

任何人都知道如何纠正这个问题？唯一一次出现这种情况是我设置的新 VPS。在其他服务器上运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T02:48:39.977

您尚未将 $result 声明为数组。在循环之前
放一个 。`$result = array();`

# php - PHP 只有字母、数字、字符串中剩余的空格

> ID：13354917
> 
> 赞同：1
> 
> 时间：2012-11-13T02:48:02.660
> 
> 标签：php, string, preg-match

> **可能重复：**
> [PHP - 正则表达式只允许字母和数字](https://stackoverflow.com/questions/4345621/php-regex-to-allow-letters-and-numbers-only)

首先对不起我的英语不好。我有问题。

我有一个字符串（这只是一个例子）

```
$string = 'on"c,e. //up!@#on$# a @#ti'][;me 2012'; 
```

我需要做什么才能使字符串看起来像：

```
$string_after_clean_up = 'once upon a time 2012'; 
```

我需要删除除字母/数字和空格之外的所有符号。我正在尝试使用 preg_mach() 但我失败了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T02:57:42.387

`$string_after_clean_up = preg_replace("/[^a-z0-9\s]/i", "", $string);` `$string_after_clean_up = preg_replace("/\s\s+/", " ", $string_after_clean_up);`

# java - How to sort an arraylist of objects using one common property

> ID：13354918
> 
> 赞同：1
> 
> 时间：2012-11-13T02:48:24.623
> 
> 标签：java, parsing, sorting, arraylist

I have an arraylist of Student objects which have several properties including first and last name, gpa, UID (university ID number), and more. I am stumped on how to sort the arraylist using the UID. The UID is an integer number, however, I'm forced to have it in String format for this project. If I can parse the numeric string into an int, how then can I sort the arraylist from lowest to highest using that number?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:17:01.783

```
List<Student> students = // create and populate your list...
Collections.sort(students, new Comparator<Student>() {
    @Override
    pulbic int compare(Student s1, Student s2) {
        return Integer.valueOf(s1.getUid())
                .compareTo(Integer.valueOf(s2.getUid));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-04T12:47:24.567

```
 Collections.sort(users, new Comparator<User>() {
            @Override
            public int compare(User first, User second) {
                return Double.compare(first.getAge(), second.getAge());
            }
        }); 
```

# python - Multi-threading for embedded loops in python

> ID：13354921
> 
> 赞同：2
> 
> 时间：2012-11-13T02:48:34.317
> 
> 标签：python, multithreading, loops, for-loop, parallel-processing

I have a python code which does some manipulation of data contained in a Shapefile.

Among others stuffs, the code does this:

```
 xxx=0
 for i in channels:
      ptsi=mat(shapes[i].points)
      xx = ptsi[:,0]
      yy = ptsi[:,1]

      nanx=argwhere(isnan(xx))      
      nany=argwhere(isnan(yy))

      if (nanx == nany and len(nanx) != 0):
          xx[nanx] = []
          yy[nany] = []
      elif (len(nanx) != 0 or len(nany) != 0):
          xx = []
          yy = []

      if (len(xx) > 0):          
       yyy = 0 
       dd = str(i*100/N_channels) + '%\r\r'
      # os.write(1,dd)
       dist = zeros(len(xx)-1)

       dist = dist_min
       for j in channels:
           pts=mat(shapes[j].points)
           xx2 = pts[:,0]
           yy2 = pts[:,1]

           nanx=argwhere(isnan(xx2))          
           nany=argwhere(isnan(yy2))

           if (nanx == nany and len(nanx) != 0):
            xx2[nanx] = []
            yy2[nany] = []
           elif (len(nanx) != 0 or len(nany) != 0):
            xx2 = []
            yy2 = []
           if (len(xx2) > 0):  
            if (i != j): 
               ds = gaa(xx,yy,xx2[0],yy2[0])
               de = gaa(xx,yy,xx2[-1],yy2[-1])
               nande = ~isnan(de)
               nands = ~isnan(ds)
               fe = np.argwhere(de<=dist)
               fs = np.argwhere(ds<=dist)
               nozeroe = array(where(de != 0))
               nozeroe = nozeroe[0]
               nozeros = array(where(ds != 0))
               nozeros = nozeros[0] 
               if(fs.size >0):
                    iis=array(np.argwhere(array(ds==min(ds))))

                    iis = iis.flatten()
                    iis = iis[0]
                    p1 = xxx + iis 
                    p2 = yyy
                    G.add_edge(p2,p1,weight=w_con)

               elif (fe.size > 0):
                    iie=array(np.argwhere(array(de==min(de))))
                    iie = iie.flatten()
                    iie = iie[0]
                    p1 = xxx + iie
                    p2 = yyy  + len(pts) -1
                    G.add_edge(p2,p1,weight=w_con)

           yyy = yyy + len(pts)

      xxx = xxx + len(ptsi) 
```

Basically, the code scans over polylines and search for a minimal distance in order to merge then in a common graph (using Networkx). This part works fine except that this is really slow as I deal with more than 100's of thousand of objects (It takes roughly 20 hours in its current version).

These embedded loops are not efficient, so I'd like to know, if using multithreading could be helpful and if so, how can I modify this very part of the code? I'm fine with CUDA or OpenCL if it can help.

Thanks for any feedback!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T03:03:14.527

由于[Global Interpreter Lock](http://en.wikipedia.org/wiki/Global_Interpreter_Lock)，Python 代码无法通过多线程充分利用多核，需要使用多处理才能充分利用多核。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T02:53:46.613

More threads will not help; more processes might, but if you can use CUDA, that would probably be a good move. A thread is just a way to allow multiple things to share a processes CPU time, it does not speed up slow code, but will just slow you down more.

# ruby-on-rails - Rails 字符编码错误：UTF-16LE 上的“\x00”不完整

> ID：13354926
> 
> 赞同：3
> 
> 时间：2012-11-13T02:49:18.990
> 
> 标签：ruby-on-rails, character-encoding, railstutorial.org

我正在关注 Ruby on Rails 教程 (http://ruby.railstutorial.org/chapters/a-demo-app#sec-modeling_demo_users) 并成功完成了第 2.2.1 节的练习。

现在，当我尝试加载在 2.2.1 中创建的任何用户资源（例如 localhost:3000/users 和 localhost:3000/user/new）时遇到字符编码问题，这基本上是开箱即用的代码生成：

> C:\Users\Dennis\rails_projects\demo_app> rails 生成脚手架用户名：字符串电子邮件：字符串

我的环境：

*   Windows 7 64 位
*   红宝石 1.9.3p194 (2012-04-20) [i386-mingw32]
*   导轨 3.2.9

Rails 返回一个错误页面，开头为：

> 用户#index 中的编码::InvalidByteSequenceError
> 
> 显示 C:/Users/Dennis/rails_projects/demo_app/app/views/layouts/application.html.erb 其中第 6 行提出：
> 
> ```
> incomplete "\x00" on UTF-16LE
>   (in C:/Users/Dennis/rails_projects/demo_app/app/assets/javascripts/users.js.coffee) 
> ```
> 
> 提取的源代码（在第 6 行附近）：
> 
> ```
> 3: <head>
> 4:   <title>DemoApp</title>
> 5:   <%= stylesheet_link_tag    "application", :media => "all" %>
> 6:   <%= javascript_include_tag "application" %>
> 7:   <%= csrf_meta_tags %>
> 8: </head>
> 9: <body> 
> ```

users.js.coffee 的内容：

```
# Place all the behaviors and hooks related to the matching controller here.
# All this logic will automatically be available in application.js.
# You can use CoffeeScript in this file: http://jashkenas.github.com/coffee-script/ 
```

application.html.erb 的内容：

```
<!DOCTYPE html>
<html>
<head>
  <title>DemoApp</title>
  <%= stylesheet_link_tag    "application", :media => "all" %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>
</head>
<body>

<%= yield %>

</body>
</html> 
```

index.html.erb 的内容：

```
<h1>Listing users</h1>

<table>
  <tr>
    <th>Name</th>
    <th>Email</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

<% @users.each do |user| %>
  <tr>
    <td><%= user.name %></td>
    <td><%= user.email %></td>
    <td><%= link_to 'Show', user %></td>
    <td><%= link_to 'Edit', edit_user_path(user) %></td>
    <td><%= link_to 'Destroy', user, method: :delete, data: { confirm: 'Are you sure?' } %></td>
  </tr>
<% end %>
</table>

<br />

<%= link_to 'New User', new_user_path %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T05:11:27.593

重命名`users.js.coffee`为`users.js`将起作用。

# objective-c - NSString：删除前导 0 使 '00001234' 变为 '1234'？

> ID：13354933
> 
> 赞同：4
> 
> 时间：2012-11-13T02:49:55.540
> 
> 标签：objective-c, ios, nsstring

> **可能重复：**
> [从字符串中删除前导零](https://stackoverflow.com/questions/3657833/removing-leading-zeroes-from-a-string)

我需要删除 an 中的前导 0，`NSString`我能想到的一种快速方法是将字符串转换为 an`NSNumber`然后转换回`NSString`它会给我一个干净的字符串，尽管我不确定它是否有效。有没有其他方法可以做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-13T04:43:56.593

所以只是为了好玩，我决定用各种方法来计时。这绝不是一项科学测试，主要是为了我的消遣，但你们中的一些人可能还是想看看。

我创建了一个方法并替换了各种例程来处理表示数字 0 - 100,000 的字符串，所有这些字符串都带有三个前导 0。

但是请记住，如果您只有一个（甚至一百个）这些字符串需要修剪，那么即使是最慢的方法也完全可以接受。（使用数字格式化程序大约需要 0.000012039905 秒，或大约 1/100 毫秒。）除非您确实需要处理一个充满像这样的字符串。我个人最喜欢的仍然是正则表达式，因为它相对较快，并且即使没有文档，您想要完成的*事情也很明显。*

以下是结果（从最快到最慢）：

**遍历字符串**

```
// I tried this by looping through the utf8String and got the same times
// (actually, ever so slightly longer, probably since it had to create the c string)
//
// I did find that using `[string getCharacters:buffer range:range]` and
// iterating over the character buffer that it took another 0.01 seconds
// off the time.  Hardly worth it though.  :)
NSUInteger length = [string length];
for (NSUInteger i = 0; i < length; i++)
{
    if ([string characterAtIndex:i] != '0')
    {
        return [string substringFromIndex:i];
    }
}
return @"0";

// Time 1: 0.210126
// Time 2: 0.219159
// Time 3: 0.201496 
```

**转换为 int 然后再转换回 NSString**

```
int num = [string intValue];
return [NSString stringWithFormat:@"%d", num];

// Time 1: 0.322206
// Time 2: 0.345259
// Time 3: 0.324954

long long num = [string longLongValue];
return [NSString stringWithFormat:@"%lld", num];

// Time 1: 0.364318
// Time 2: 0.344946
// Time 3: 0.364761
// These are only slightly slower, but you can do bigger numbers using long long 
```

**使用 NSScanner**

```
NSScanner *scanner    = [NSScanner scannerWithString:string];
NSCharacterSet *zeros = [NSCharacterSet
                         characterSetWithCharactersInString:@"0"];
[scanner scanCharactersFromSet:zeros intoString:NULL];

return [string substringFromIndex:[scanner scanLocation]];

// Time 1: 0.505277
// Time 2: 0.481884
// Time 3: 0.487209 
```

**使用正则表达式**

```
NSRange range = [string rangeOfString:@"^0*" options:NSRegularExpressionSearch];
return [string stringByReplacingCharactersInRange:range withString:@""];

// Time 1: 0.610879
// Time 2: 0.645335
// Time 3: 0.637690 
```

**使用静态数字格式化程序**

```
static NSNumberFormatter *formatter = nil;
if (formatter == nil)
{
    formatter             = [NSNumberFormatter new];
    formatter.numberStyle = NSNumberFormatterDecimalStyle;
}

NSNumber *number = [formatter numberFromString:string];
return [formatter stringFromNumber:number];

// Time 1: 1.774198
// Time 2: 1.753013
// Time 3: 1.753893 
```

**使用数字格式化程序**

```
NSNumberFormatter *formatter = [NSNumberFormatter new];
formatter.numberStyle        = NSNumberFormatterDecimalStyle;

NSNumber *number             = [formatter numberFromString:string];
return [formatter stringFromNumber:number];

// Time 1: 11.978336
// Time 2: 12.039905
// Time 3: 11.904984
// No wonder Apple recommends reusing number formatters! 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-13T03:27:31.987

你可以使用正则表达式。

```
NSString *numStr = @"0001234";
NSRange range = [numStr rangeOfString:@"^0*" options:NSRegularExpressionSearch];
NSString *result = [numStr stringByReplacingCharactersInRange:range withString:@""]; 
```

如果您经常这样做（如数千次），您可能会从使用已编译的`NSRegularExpression`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T03:18:29.593

这行得通，我已经测试过了。而且我认为这是一个非常好的方法。更少的代码更少的错误。[亲吻](http://en.wikipedia.org/wiki/KISS_principle)。

```
NSString *numStr = @"000123";
int num = numStr.intValue;
numStr = [NSString stringWithFormat:@"%d", num]; 
```

# networking - 联网。通过互联网提供程序

> ID：13354937
> 
> 赞同：0
> 
> 时间：2012-11-13T02:50:48.177
> 
> 标签：networking

我想创建一个程序，用户在其中输入数据并将其保存在文本文件中。例如，他们输入姓名和年龄，然后保存并加载。问题是我希望用户可以在任何计算机上随时使用该程序，这意味着该程序在线。

我需要使程序具有网络功能吗？或者我可以只拥有一台服务器或主机来保存程序并让客户端直接访问它吗？（比如使用谷歌的电子表格）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T02:53:17.663

可能有多种方法可以实现您的目标，但最简单和最有用的方法可能是创建一个实现此功能的网页。

许多好处中的一些包括

*   无需安装特殊软件。只需要一个网络浏览器。
*   在具有网络浏览器的任何平台（包括移动设备）上运行。
*   没有软件更新推送给用户。更新您的网站，每个人都会获得最新的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T06:43:22.827

我不知道您所说的“我需要使程序具有网络功能”是什么意思。如果您选择避开网站路由，那么您需要有一个服务器和客户端应用程序。如果您希望程序能够将数据保存到服务器，那么您需要进行一些套接字编程。

要创建服务器，您需要：

*   创建一个套接字
*   将套接字绑定到地址和端口
*   监听传入连接
*   等待客户
*   接受客户
*   发送和接收数据

要创建客户端，您需要：

*   创建一个套接字
*   连接到服务器
*   发送和接收数据

希望这可以帮助！

# google-checkout - How can custom data be passed via a BuyNow form and be available via Notification History API?

> ID：13354939
> 
> 赞同：0
> 
> 时间：2012-11-13T02:50:56.307
> 
> 标签：google-checkout, payment-processing, android-pay

I have a Google Wallet/Checkout BuyNow button with code similar to the following (generated from the site tools):

```
<form action="..." id="BB_BuyButtonForm" method="post" name="BB_BuyButtonForm" target="_top">
  ...
            <select name="item_selection_1">
                <option value="1">$10 Gift Certificate</option>
                ... other options ...
            </select>
            <input name="item_option_name_1" type="hidden" value="$10 Gift Certificate"/>
            <input name="item_option_price_1" type="hidden" value="10.0"/>
            <input name="item_option_description_1" type="hidden" value="A $10 Gift Certificate"/>
            <input name="item_option_quantity_1" type="hidden" value="1"/>
            <input name="item_option_currency_1" type="hidden" value="USD"/>
            <input name="shopping-cart.item-options.items.item-1.digital-content.url" type="hidden" value="https://example.com/gift-certificate?id=1234&amount=25"/>
            ...
            <input alt="" src="https://checkout.google.com/buttons/buy.gif?merchant_id=...&amp;w=117&amp;h=48&amp;style=trans&amp;variant=text&amp;loc=en_US" type="image"/>
   ...
</form> 
```

Now, when the buyer clicks the button, they can purchase the item and are directed to the digital content URL, but I don't know how I can make the connection to the particular item they purchased. I could put a dynamic id as a URL parameter for the digital content URL, but I still can't see how to connect that to the Google Checkout order number.

For example, I'm using the Notification & Notification History APIs and see a sequence of notifications after purchase, including the notification with information about the buyer and a shopping cart:

```
<shopping-cart>
<items>
  <item>
    <digital-content>
      <url>https://example.com/gift-certificate?id=1224&amount=25</url>
    </digital-content>
    <item-name> $25 Gift Certificate</item-name>
    <item-description>A $25 Gift Certificate</item-description>
    <quantity>1</quantity>
    <unit-price currency="USD">25.0</unit-price>
  </item>
</items> 
```

I can see that I could parse out the id parameter from the digital-content url, but that seems messy.

Is there a nice way to just include an extra hidden form field and have that value passed through to the notification? (even with a single item BuyNow button?)

Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T03:17:32.127

可以使用以下方式传递商家 ID 甚至任意私有数据：

```
...
<input type="hidden" name="shopping-cart.item-options.items.item-1.merchant-item-id" value="SKU123">
<input type="hidden" name="shopping-cart.item-options.items.item-1.merchant-private-item-data" value="<opts><token>a5f6b4c</token></opts>">
... 
```

（merchant-private-item-data 不需要是 XML，但如果您使用 Rails google4r-checkout Gem，使用上述 XML 会导致通知将其解析为项目哈希属性：@private_data={" opts"=>{"token"=>"a5f6b4c"}} )

# vb.net - Printing with Brother SDK to Brother Network Shared Printer

> ID：13354941
> 
> 赞同：0
> 
> 时间：2012-11-13T02:51:53.443
> 
> 标签：vb.net, printing

I am developing with vb.net to print barcode label using Brother Printer PT 98OOPCN. I am using Network Shared, not Peer to Peer. There is my code

```
Dim objDoc As bpac.Document
objDoc = CreateObject("bpac.Document")
Dim PrinterName As String = "\\hostprinterserver\printer1"

If (objDoc.Open("Label_Barcode\Label_Ex.lbx")) Then
   objDoc.GetObject("dateObject").Text = "10/23/2012"
   objDoc.GetObject("barcodeObject").Text = "100123239734"

   objDoc.SetPrinter(PrinterName, True)
   objDoc.StartPrint("", PrintOptionConstants.bpoDefault)
   objDoc.PrintOut(1, PrintOptionConstants.bpoDefault)
   objDoc.EndPrint()
   objDoc.Close()  
End If 
```

Is it possible to print with Brother SDK to Network Shared Printer? if it is possible how to do that think?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T18:34:10.403

```
Dim PrinterName As String = "printer1 on hostprinterserver'sIP"
For instance:
Dim PrinterName As String = "Brother PT-9600 on 192.168.1.45" 
```

它对我有用！

# php - 在PHP中获取多个复选框的值

> ID：13354942
> 
> 赞同：1
> 
> 时间：2012-11-13T02:51:54.287
> 
> 标签：php, html, checkbox

如果有人可以告诉我，我需要这方面的帮助，那将非常棒且很有帮助。

我试图通过复选框显示一个以上的值，PHP 中的此信息已发送到电子邮件。应用时，我可以让所选列表中的任何人单独工作

这是我的 PHP 和 HTML 代码，一切正常，只是程序只会发送所选列表中的一个，即使我选择了多个。

**$ch1, $ch2, $ch3, $ch4,$ch5**

**PHP**

```
<?php
if(isset($_POST['email'])) {

    $email_to = "";
    $email_subject = "";

    function died($error) {
        // Error Code
        echo "We are very sorry, but there were error(s) found with the form you submitted. ";
        echo "These errors appear below.<br /><br />";
        echo $error."<br /><br />";
        echo "Please go back and fix these errors.<br /><br />";
        die();
    }

    // validation expected data exists
    if(!isset($_POST['firstname']) ||
        !isset($_POST['lastname']) ||
        !isset($_POST['checkboxes']) ||
        !isset($_POST['gender']) ||
        !isset($_POST['email']) ||
        !isset($_POST['subject']) ||
        !isset($_POST['telephone']) ||
        !isset($_POST['message'])) {
        died('We are sorry, but there appears to be a problem with the form you submitted.');       
    }

    $firstname = $_POST['firstname']; // required
    $lastname = $_POST['lastname']; // required
    $ch1 = 'unchecked'; // required
    $ch2 = 'unchecked'; // required
    $ch3 = 'unchecked'; // required
    $ch4 = 'unchecked'; // required
    $ch5 = 'unchecked'; // required
    $male_status = 'unchecked'; // required
    $female_status = 'unchecked'; // required
    $email_from = $_POST['email']; // required
    $subject = $_POST['subject']; // required
    $telephone = $_POST['telephone']; // required
    $message = $_POST['message']; // required

    $error_message = "";
    $email_exp = '/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/';
  if(!preg_match($email_exp,$email_from)) {
    $error_message .= 'The Email Address you entered does not appear to be valid.<br />';
  }
    $string_exp = "/^[A-Za-z .'-]+$/";
  if(!preg_match($string_exp,$firstname)) {
    $error_message .= 'The First Name you entered does not appear to be valid.<br />';
  }
  if(!preg_match($string_exp,$lastname)) {
    $error_message .= 'The Last Name you entered does not appear to be valid.<br />';
  }
  if(!preg_match($string_exp,$subject)) {
    $error_message .= 'The Subject you entered does not appear to be valid.<br />';
  }

  if (isset($_POST['checkboxes'])) {

    $selected_checkboxes = $_POST['checkboxes'];

    if (isset($_POST['ch1'])) {
        $ch1 = $_POST['checkboxes'];

        if ($ch1 == 'googlechrome') {
            $ch1 = 'checked';
        }
    }

    if (isset($_POST['ch2'])) {
        $ch2 = $_POST['checkboxes'];

        if ($ch2 == 'firefox') {
            $ch2 = 'checked';
        }
    }

    if (isset($_POST['ch3'])) {
        $ch3 = $_POST['checkboxes'];

        if ($ch3 == 'safari') {
            $ch3 = 'checked';
        }
    }

    if (isset($_POST['ch4'])) {
        $ch4 = $_POST['checkboxes'];

        if ($ch4 == 'internetexplorer') {
            $ch4 = 'checked';
        }
    }

    if (isset($_POST['ch5'])) {
        $ch5 = $_POST['checkboxes'];

        if ($ch5 == 'opera') {
            $ch5 = 'checked';
        }
    }
}

  if (isset($_POST['gender'])) {

    $selected_radio = $_POST['gender'];

        if ($selected_radio == 'male') {
            $male_status = 'checked';

        }
        else if ($selected_radio == 'female') {
            $female_status = 'checked';
        }
    }
  if(strlen($message) < 2) {
    $error_message .= 'The Message you entered do not appear to be valid.<br />';
  }
  if(strlen($error_message) > 0) {
    died($error_message);
  }
    $email_message = "Form details below.\n\n";

    function clean_string($string) {
      $bad = array("content-type","bcc:","to:","cc:","href");
      return str_replace($bad,"",$string);
    }

    $email_message .= "First Name: ".clean_string($firstname)."\n";
    $email_message .= "Last Name: ".clean_string($lastname)."\n";
    $email_message .= "Gender: ".clean_string($selected_radio)."\n";
    $email_message .= "Telephone: ".clean_string($telephone).
"\n";
    $email_message .= "Email: ".clean_string($email_from).
"\n";
    $email_message .= "Subject: ".clean_string($subject).
"\n";
$email_message .= "Browsers Used: ".clean_string($selected_checkboxes)."\n";
    $email_message .= "Message: ".clean_string($message).
"\n";

// create email headers
$headers = 'From: '.$email_from."\r\n".
'Reply-To: '.$email_from."\r\n" .
'X-Mailer: PHP/' . phpversion();
@mail($email_to, $email_subject, $email_message, $headers);  
?>

Thank you for contacting us. We will be in touch with you very soon.

<?php
}
?> 
```

**HTML**

```
<form id="contact" name="contact" action="contact.php" method="post">
  <p>
    <label for="firstname">First Name *<br>
    </label>
    <input  type="text" name="firstname" maxlength="50" size="30" id="firstname" placeholder="First Name" required autofocus>
    <label for="lastname"><br>
      <br>
      Last Name *<br>
    </label>
    <input  type="text" name="lastname" maxlength="50" size="30" id="lastname" placeholder="Last Name" required>
    <label for="email"><br>
      <br>
      Email Address *<br>
    </label>
    <input  type="text" name="email" maxlength="80" size="30" id="email" placeholder="example@domain.com" required>
    <label for="telephone"><br>
      <br>
      Telephone <br>
    </label>
    <input  type="text" name="telephone" maxlength="30" size="30" id="subject" placeholder="Phone Number" required>
    <br>
    <br>
    <label for="subject">Subject *</label>
    <br>
  <input type="text" name="subject" maxlength="30" size="30" id="subject" placeholder="Hello" required>
    <br>
    <br>
    <Input type = "Radio" Name ="gender" value= "Male">Male
  <Input type = "Radio" Name ="gender" value= "Female" >Female
  <br>
  </p>
  <p>&quot;What browser are you using, to view this website&quot;<br>
    <Input type = "Checkbox" Name ="checkboxes" value="Google Chrome">Google Chrome
    <Input type = "Checkbox" Name ="checkboxes" value="Firefox">Firefox
    <Input type = "Checkbox" Name ="checkboxes" value="Safari">Safari
    <Input type = "Checkbox" Name ="checkboxes" value="Internet Explorer" >Internet Explorer
    <Input type = "Checkbox" Name ="checkboxes" value="Opera" >Opera
    <br>
    <br>
    Message *<br>
    </label>
    <textarea  name="message" maxlength="1000" cols="90" rows="6" id="message" placeholder="Type message here" required></textarea>
    <br>
    <input type="submit" value="Submit">
  </p>
</form> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T02:54:11.490

```
<Input type = "Checkbox" Name ="checkboxes[]" value="Google Chrome">Google Chrome
<Input type = "Checkbox" Name ="checkboxes[]" value="Firefox">Firefox
<Input type = "Checkbox" Name ="checkboxes[]" value="Safari">Safari
<Input type = "Checkbox" Name ="checkboxes[]" value="Internet Explorer" >Internet Explorer
<Input type = "Checkbox" Name ="checkboxes[]" value="Opera" >Opera 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T02:54:13.463

正确的方法是为您的复选框指定不同的名称。

```
<input type="checkbox" name="chrome" value="Google Chrome" />Chrome
<input type="checkbox" name="firefox" value="Firefox" />Firefox
<input type="checkbox" name="safari" value="Safari" />Safari
<input type="checkbox" name="ie" value="Internet Explorer" />IE
<input type="checkbox" name="opera" value="Opera" />Opera 
```

* * *

仅供参考，该`<label>`标签在这里非常有用，因此当您单击或悬停时，文本将“绑定”到框上。

```
<label for='cb1'>
    <input id='cb1' type = "Checkbox" name ="chrome" value="Google Chrome" />Chrome
</label> 
```

你可以像这样设计它

```
label:hover { background:orange; } 
```

这也适用于单选按钮。

* * *

此外，最好避免混淆属性的大写和小写（`type`、`name`等称为属性）。您希望尽可能使用小写字母。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T03:00:21.390

如果将 html 中的 name 参数更改为 checkboxes[]：

```
<Input type = "Checkbox" Name ="checkboxes[]" value="Google Chrome">Google Chrome
<Input type = "Checkbox" Name ="checkboxes[]" value="Firefox">Firefox
<Input type = "Checkbox" Name ="checkboxes[]" value="Safari">Safari
<Input type = "Checkbox" Name ="checkboxes[]" value="Internet Explorer" >Internet Explorer
<Input type = "Checkbox" Name ="checkboxes[]" value="Opera" >Opera 
```

然后`$_POST['checkboxes']`将包含一个选定值的数组。

请注意，它不会为未选中的复选框返回任何内容，因此您需要跟踪所有值以与选中的值进行比较。

# jquery - Conditional Ajax Calls

> ID：13354947
> 
> 赞同：0
> 
> 时间：2012-11-13T02:52:19.153
> 
> 标签：jquery, ajax, json

I have a script that performs client-side validation, then fires off an AJAX post to submit form field values to an external address validation program - then returns a JSON response.

I have a select field in the form that allows a person to manually enter their address. I've added a class of "manual" to this select option. Otherwise, they can select any number of pre-defined addresses. The predefined addresses do not have a class associated with them.

I DO NOT want the AJAX post to fire if a pre-defined select option is selected. Only if the select option has a class of manual. I DO, however, want to preserve the client-side validation.

This is what I thought would work:

```
if (!$("#ShipTos option:selected").hasClass("manual"))
    {
        $("#Forms").submit();
        return false;
    } 
```

**Form HTML**

```
 <form name="Form" id="Forms" method="post" action="WebCatPageServer.exe" class="uniForm">
     <input name="IsAjax" type="hidden" value="Yes" />
    <input name="Action" type="hidden" value="SHIPTOVALIDATE"/>
    <!-- <input name="Action" type="hidden" value="VerifyOrder"/>-->

<fieldset class="inlineLabels top">
   <h2>Order Details</h2>
    <div class="ctrlHolder first">
    <label for="orderdesc">Order Description</label>
       <input name="Order Desc" id="OrderDesc" type="text" class="textInput small" tabindex="1" value="SPI_PlaceOrder_Desc"/>
    </div>
       <div class="ctrlHolder">
      <label for="po">PO # <span class="redasterisk">*</span></label>
      <input name="Cust Po" id="PoJobNo" type="text" class="textInput small required" maxlength="20" tabindex="2" value="SPI_PlaceOrder_PONum"/>
    </div>
<!--    <div class="ctrlHolder">
      <label for="jobname">Job Name</label>
      <input name="Job Name" id="CustJobName" type="text" class="textInput small" maxlength="15" tabindex="3" value="SPI_PlaceOrder_JobName"/>
    </div> -->
    <div class="ctrlHolder">
      <label for="shipvia">Ship Via <span class="redasterisk">*</span></label>
      <select name="Ship Via" id="shipvia"  class="selectInput small required"  tabindex="4"/>
       <option value="" class="default">Select Ship Method</option>
        SPI_ShipVia
        </select>   
    </div>

    <div class="ctrlHolder" id="pickupdate">
    <label for="datepickup">Requested Pickup Date <span class="redasterisk">*</span></label>
    <input name="datepickup" id="datepickup" type="text" class="textInput small"  tabindex="5" value="SPI_PlaceOrder_DateReq">
    </div>

    <div class="ctrlHolder" id="shipdate">
    <label for="dateship">Requested Delivery Date <span class="redasterisk">*</span></label>
    <input name="dateship" id="dateship" type="text"  class="textInput small" value="" tabindex="6">
    </div>

    <div class="ctrlHolder" id="shipto">
     <label for="ShipTo">Ship To <span class="redasterisk">*</span></label>
    <select name="ShipTos" id="ShipTos" class="selectInput auto required" tabindex="7">
       <option value="">Select an Option</option>
       <option value="ShipToManual" class="manual">Manually Enter Address</option>
    SPI_ShipToList
    </select>
    <br />
    </div>
</fieldset>

 <fieldset class="inlineLabels" id="shipinfo">
   <h2>Shipping Information</h2>
    <div class="ctrlHolder first">
      <label for="YourName">Your Name <span class="redasterisk">*</span></label>
      <input name="Your Name" id="Your_Name" type="text" class="textInput small required"  tabindex="8" value="SPI_CustContact" />
    </div>
    <div class="ctrlHolder">
      <label for="CompanyName">Company Name <span class="redasterisk">*</span></label>
      <input name="Company Name" id="Company Name" type="text" class="textInput small required"  tabindex="9" value="SPI_CustCName"/>
    </div>
    <div class="ctrlHolder">
      <label for="Address1">Address 1 <span class="redasterisk">*</span></label>
      <input name="Address_1" id="Address_1" type="text" maxlength="30"  class="textInput small required" tabindex="10" value="SPI_CustAddr1"/>
    </div>
    <div class="ctrlHolder">
      <label for="Address2">Address 2</label>
      <input name="Address_2" id="Address_2" type="text" maxlength="30"  class="textInput small" tabindex="11" value="SPI_CustAddr2"/>
    </div>
    <div class="ctrlHolder">
      <label for="City">City <span class="redasterisk">*</span></label>
     <input name="City"  id="City" type="text" maxlength="25" class="textInput small required" tabindex="12" value="SPI_CustCity"/>
    </div>
    <div class="ctrlHolder">
      <label for="State">State <span class="redasterisk">*</span></label>
     <select name="State" id="State" class="selectInput small required" tabindex="13">
              <option value="">Select State</option>
              SPI_StateList 
            </select>
    </div>
    <div class="ctrlHolder">
      <label for="ZipCode">Zip Code <span class="redasterisk">*</span></label>
      <input name="Zip"  id="Zip" type="text" maxlength="6" class="textInput small required zipcode"  tabindex="14" value="SPI_CustZip"/>   
    </div>
    <div class="ctrlHolder">
      <label for="Phone">Phone <span class="redasterisk">*</span></label>
      <input name="Phone Number"  id="Phone" type="text" class="textInput small required phone" alt="phone-us"  tabindex="15" value="SPI_CustPhone"/>
    </div>
    <div class="ctrlHolder">
      <label for="Fax">Fax</label>
      <input name="FaxNumber"  id="Fax Number" type="text" class="textInput small fax" alt="phone-us"  tabindex="16" value="SPI_CustFax"/>
    </div>

    <div class="ctrlHolder">
      <label for="">E-mail <span class="redasterisk">*</span></label>
      <input name="Email" id="Email" type="text" class="textInput small required email"  tabindex="17" value="SPI_CustEmail"/>
    </div>
    </fieldset>

<fieldset class="inlineLabels">
<h2>Order/Shipping Notes</h2>
<!-- SPI_Html_Optional_OrdNotes
<div class="ctrlHolder first">
      <label for="notes">Order Notes </label>
      <textarea name="OrderNotes" id="ta" cols="26" rows="7" tabindex="18"></textarea><br />
      <p class="formHint"><b>(Maximum characters: 175) &nbsp; <span id="charLeft"></span>  &nbsp; Characters left</b><br />
(Cross streets, special instructions, etc.)</p>
    <br />
    </div>
SPI_Html_Optional_OrdNotes -->
<!-- SPI_Html_Require_OrdNotes
         <div class="ctrlHolder">
      <label for="notes">Order Notes (Cross streets, etc.) <span class="redasterisk">*</span></label>
      <textarea name="OrderNotes" id="notes" cols="26" rows="7" tabindex="19"> </textarea>
        <p class="formHint">(Cross streets, special instructions, etc.)</p>
    <br />
    </div>  
SPI_Html_Require_OrdNotes -->
</fieldset>
<fieldset class="inlineLabels">
<h2>Continue To Next Step</h2>
<div class="buttonHolder">
<label for="freightmsg">**Applicable freight charges will be applied at the time of invoicing.**</label>
<input name="continuetocheckout" type="submit" class="button red smallrounded" value="Continue &gt;" alt="Continue to Next Step" tabindex="20"/>
</div>
</fieldset>
</form> 
```

**Validation & AJAX Functions**

```
jQuery(document).ready(function($) {
  $.metadata.setType("attr", "validate");
  $("#Forms").validate({
    rules: {
      datepickup: {
      required: true,
      date: true
    },
    dateship: {
      required: true,
      date: true
  }}
});
});

$(function() {
  //$("#Forms").submit(function() {
  $("input[name='continuetocheckout']").click(function() {
    if (!$("#Forms").valid())
      return false;

if (!$("#ShipTos option:selected").hasClass("manual"))
{
    $("#Forms").submit();
    return false;
}

    $.ajax({
      type: 'post',
      url: 'WebCatPageServer.exe',
      dataType : 'json',
      data: $("#Forms").serialize(),
      success:function(data){
       $.each(data, function(index, val) {
         $("input[name='"+index+"'], select[name='"+index+"']").val(val);
       });
       if (data.AddressError==false && data.ZipError == false )
       {
          $("input[name='Action']").val('VerifyOrder');
          $("input[name='IsAjax']").val("No");
          $("#Forms").submit();
         return true;
       }
       else
       {
          if(data.ZipError==true && data.AddressError==false)
          {
            $("input[name='City'], select[name='State'], input[name='Zip']").addClass('error');
            $("input[name='City']").after('<label class="error" for="Zip" generated="true">This City/State/Zip is not valid. Please correct.</label>')
          }
          if(data.AddressError==true && data.ZipError==true)
          {
            $("input[name='City'], select[name='State'], input[name='Zip'], input[name='Address_1']").addClass('error');
            $("input[name='Address_1']").after('<label class="error" for="Address_1" generated="true">This address is not valid. Please correct.</label>')
          }
          return false;
       }
    }
    });
    return false;
  });
});
</script> 
```

I appreciate your help!

# ruby - 是否在不关闭泄漏内存的情况下使用 Ruby“文件”类？

> ID：13354948
> 
> 赞同：0
> 
> 时间：2012-11-13T02:52:45.513
> 
> 标签：ruby, io

`File`所以我正在对Ruby中的类进行一些研究。当我在挖掘时，我了解到这`File`是`IO`. 据我了解，当您创建一个`IO`对象（或`File`对象）时，会为该文件打开一个缓冲区，允许您读取和写入该文件。我不完全理解缓冲区是什么，但显然它会保持打开状态，直到您调用`#close`对象上的方法。据我了解，无论您打电话`File.new`还是`File.open`（如果我在这方面有任何错误，请纠正我），这个缓冲区都会打开。

所以说你喜欢将`File`类用于路径和类似这样的东西：

```
f = File.new('spec/tmp/testfile.md')
File.basename(f) 
```

但你从不打电话`f.close`。让这个缓冲区打开泄漏内存吗？如果我为文件系统中的一棵树调用了数百次，我会遇到大麻烦吗？

感谢您的回复！

**PS**我知道你可以`File.basename('spec/tmp/testfile.md')`改用，我只是用这个作为例子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T05:34:52.287

### 是的

除了`sys*`操作族之外，Ruby 的 IO 操作最终会同时分配文件描述符和缓冲区。

如果您不关闭`IO`对象，那么您是正确的……您很可能会同时泄漏 fd 和缓冲区。

现在，如果您以覆盖或以其他方式结束旧引用的生命周期的方式分配它，那么 Ruby 可以 g/c 整个对象。这肯定会释放缓冲区，最终也会释放 FD。

*然而，在所有语言中，依赖*ag/c 触发的终结器被认为是非常糟糕的做法，因为它无法预测需要多长时间以及一次将存在多少出色的操作系统级资源。在 g/c 机器启动之前，您可能会超过一些本地限制。

一般规则是同步分配和释放操作系统资源。

* * *

^(只要我把对象打死，就有例外。如果你要分配固定数量的描述符什么的，而且无论如何它们都必须同时存在，并且程序在完成工作后要退出，那么离开它们就可以了。操作系统清理一切。例如，最好不要在退出前释放内存。如果程序即将退出，管理堆所需的处理就完全浪费了。操作系统只是将程序的每一页都放在它的空闲列表中。并且有一个例外的例外。如果是家庭作业，我会释放一切。)

# c# - 只读变量线程安全吗？

> ID：13354949
> 
> 赞同：5
> 
> 时间：2012-11-13T02:52:54.660
> 
> 标签：c#, multithreading

> **可能重复：**
> [C# 线程中的只读字段是否安全？](https://stackoverflow.com/questions/8286222/is-a-readonly-field-in-c-sharp-thread-safe)

一个很简单的程序

```
private readonly string _data1;
private readonly int _data2;
private readonly MyAnotherClass _data3;

public MyClass(string data1, int data2, MyAnotherClass data3)
{
    _data1 = data1;
    _data2 = data2;
    _data3 = data3;
} 
```

`_data1, _data2 and _data3`线程安全吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-13T02:55:45.253

只读变量保证在被访问之前被初始化。在对象完全分配之前，在对象的构造过程中分配初始值。

> 变量初始化器被转换为赋值语句，并且这些赋值语句在基类实例构造函数的调用之前执行。这种排序确保**所有实例字段在执行任何有权访问该实例的语句之前由其变量初始化程序初始化**。

参考：C# Spec，10.11.3 构造函数执行（强调我的）

> 对只读字段的赋值只能作为字段声明的一部分或在同一类的构造函数中发生

参考：C# 规范，1.6.5 字段

因此，该值将在任何线程可用之前设置，并且不会更改，因此它是线程安全的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-13T02:55:49.473

是的，它们是因为一旦构建了类，任何软件都无法更改它们。

**编辑**

虽然数据字段是线程安全的，但 _data3 的内容不是线程安全的。不同的线程可以“同时”修改 _data3。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T03:05:15.173

Joh Skeets 在[Is a readonly field in C# thread safe？](https://stackoverflow.com/questions/8286222/is-a-readonly-field-in-c-sharp-thread-safe)给出了大部分答案 - 对于不可变类型（如`int`/ `string`），它是线程安全的。

如果自定义类型不是不可变的，引用本身将是线程安全的，但`readonly`不保证对象内容的任何内容。所以`_data3`对象的所有属性都需要有自定义的线程安全保护。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T02:55:38.817

只要您以后不更改它们，是的。

编辑：

```
class Class1
{

    readonly string bigbuddy;

    public Class1()
    {

        bigbuddy = "1";

        Thread thread1 = new Thread(SomeThread);
        thread1.Start(this);

        Thread.Sleep(1000);

        bigbuddy = "2";

        Thread thread2 = new Thread(SomeThread);
        thread2.Start(this);

    }

    public void SomeThread(object state) {

        Class1 class1 = (Class1)state;

        Debug.WriteLine(class1.bigbuddy);

    }

} 
```

采用：

```
 Class1 asd = new Class1(); 
```

输出：

```
1
The thread '<No Name>' (0xe0c) has exited with code 0 (0x0).
2
The thread '<No Name>' (0x129c) has exited with code 0 (0x0). 
```

# node.js - Node.js 在第一次启动时给出不可预测的 ajax 响应

> ID：13354953
> 
> 赞同：1
> 
> 时间：2012-11-13T02:53:09.853
> 
> 标签：node.js, jquery, canjs

我使用 node.js 作为后端，使用 canjs 作为前端库。

节点代码：

```
var express = require('express');
var app = express();
var http = require("http");
var fs = require("fs");
var cons = require('consolidate')

app.configure(function(){
      app.engine('html', cons.handlebars);
      app.set('view engine', 'html');
      app.set('views', __dirname)
      app.use(express.favicon())
      app.use(express.logger('dev'))
      app.use(express.static(__dirname ))
      app.use(express.bodyParser())
      app.use(express.methodOverride())
      app.use(express.cookieParser("secret"))
      app.use(express.session({ secret: 'keyboard cat' }))
      app.use(app.router)
    });

app.init = function(){
    fs.readFile('./sample.json', 'utf8', function(error, data) {
        if (error) {
            throw(error);
        }
        else
            app.set("json", data);
    })};

app.get('/things', function(req, res){
    app.init();
    res.set('Content-Type', 'text/json');
    res.send(app.get("json"));
});

app.get('/things/:id', function(req, res){
    app.init();
    res.set('Content-Type', 'text/json');
    res.send((JSON.parse(app.get("json")))[req.param('id')]);
});

app.get('/main.html', function(req, res){
    app.init(function(error, data){
        if (error) {throw error}
        res.render('main.html');
    });
});

app.listen(3000); 
```

Can.js 代码：

```
Todo = can.Model({
    findAll: "GET /things",
    findOne: "GET /things/{id}",
},{});

$(document).ready(function(){

    Todo.findAll({}, function(todos){
        console.log(JSON.stringify(todos));
    })

    Todo.findOne( { id: 1 }, function( todo ) {
        console.log( todo );
    })

}); 
```

HTML：

```
<script type="text/javascript" charset="utf-8" src="./jquery-1.8.2.js"></script>
<script type="text/javascript" charset="utf-8" src="./can.jquery-1.0.7.js"></script>
<script type="text/javascript" charset="utf-8" src="./can.fixture.js"></script>
<script type="text/javascript" charset="utf-8" src="./master.js"></script> 
```

JSON：

```
{"0":{"id":1,"name":"do the dishes"},"1":{"id":2,"name":"go to dentist"},"2":{"id":3,"name":"go swimming"},"4":{"id":5,"name":"masturbate"}} 
```

每次启动服务器时，控制台都会找到两个函数（findAll 和 findOne）的 ajax GET 响应，返回未定义或 500 错误：

```
XHR finished loading: "http://localhost:3000/things". jquery-1.8.2.js:8416
undefined master.js:12

GET http://localhost:3000/things/1 500 (Internal Server Error) jquery-1.8.2.js:8416
XHR finished loading: "http://localhost:3000/things/1". jquery-1.8.2.js:8416
Uncaught TypeError: Function.prototype.apply: Arguments list has wrong type 
```

但是如果我在此之后刷新页面，这两个功能将正常工作，给出：

```
XHR finished loading: "http://localhost:3000/things". jquery-1.8.2.js:8416
{"0":{"id":1,"name":"do the dishes"},"1":{"id":2,"name":"go to dentist"},"2":{"id":3,"name":"go swimming"},"4":{"id":5,"name":"masturbate"},"length":0,"_namespace":".observe2"} master.js:12
XHR finished loading: "http://localhost:3000/things/1". jquery-1.8.2.js:8416
Constructor {name: "go to dentist", _data: Object, id: 2, _namespace: ".observe3"}
 master.js:16 
```

到底是怎么回事？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T03:21:41.843

问题是您在回调 in`app.get("json");`设置其值之前调用（这发生在第一次调用返回之后的某个时间）。`fs.readfile``app.init``app.init();`

您可能应该将代码更改为只调用`app.init`一次，并且在其工作完成之前不要监听请求。

```
app.init = function(callback){
    fs.readFile('./sample.json', 'utf8', function(error, data) {
        if (error) {
            throw(error);
        } else {
            app.set("json", data);
            callback();
        }
    });
};

...

app.init(function() {
    app.listen(3000);
}); 
```

# openerp - Exporting product csv file with a scheduler in OpenERP v6.1

> ID：13354962
> 
> 赞同：1
> 
> 时间：2012-11-13T02:54:10.477
> 
> 标签：openerp

Is there a way to export the products to a csv file using a scheduler? I tried the csv python package discussed in this link: ( [The best way to export openerp data to csv file using python](https://stackoverflow.com/questions/11187086/the-best-way-to-export-openerp-data-to-csv-file-using-python) ) but it seems I miss something.

I take advantage of the export_data as stated and I point my scheduler to that method but when I run it, nothing happen so I don't know if it runs or not but the scheduler keeps running.

Thanks for replies.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-12T22:49:36.370

我不是 OpenERP（或 Odoo）专家。以我目前对 Odoo 的了解，我将通过[ERPpeek](https://github.com/tinyerp/erppeek)沿着以下路线开始

```
erppeek [YOUR OPENERP DETAILS]
>>> l = model('product.product').browse([])
>>> import csv
>>> with open('test.csv', 'w') as fp:
    a = csv.writer(fp, delimiter=',')
    for prod in l: a.writerow(prod.read().values()) 
```

我会进一步将其构建成脚本，然后将脚本放入 cron 中。

不过，可能有更好、更标准的 Odoo 方式。

# python - 在 Python 中分离列表元素

> ID：13354965
> 
> 赞同：4
> 
> 时间：2012-11-13T02:54:17.333
> 
> 标签：python, string, list

给定以下代码中的列表 (listEx)，我试图将字符串、整数和浮点类型分开，并将它们全部放在各自的列表中。如果我只想从 listEx 列表中提取字符串，程序应该通过 listEx，并将字符串放入一个名为 strList 的新列表中，然后将其打印给用户。对于整数和浮点类型也是如此。但是，如果我能找出正确的方法来做一个，我会对其他人很好。到目前为止没有运气，已经在这里待了一个小时。

```
listEx = [1,2,3,'moeez',2.0,2.345,'string','another string', 55]
strList=['bcggg'] 

for i in listEx:
    if type(listEx) == str:
        strList = listEx[i]
        print strList[i]
    if i not in listEx:
        break
    else:
        print strList

for i in strList:
    if type(strList) == str:
        print "This consists of strings only"
    elif type(strList) != str:
        print "Something went wrong"
    else:
        print "Wow I suck" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T03:02:26.227

也许代替`if type(item) == ...`,`item.__class__`用来让`item`告诉你它的类。

```
import collections
listEx = [1,2,3,'moeez',2.0,2.345,'string','another string', 55]
oftype = collections.defaultdict(list)
for item in listEx:
    oftype[item.__class__].append(item)

for key, items in oftype.items():
    print(key.__name__, items) 
```

产量

```
int [1, 2, 3, 55]
str ['moeez', 'string', 'another string']
float [2.0, 2.345] 
```

因此，您要查找的三个列表可以作为`oftype[int]`、 `oftype[float]`和访问`oftype[str]`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T02:59:18.210

只需更改`type(strList)`和。您正在遍历列表，但随后检查*列表*是否为字符串，而不是*项目*是否为字符串。`type(listEx)``type(i)`

 *** * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T03:24:48.233

```
integers = filter(lambda x: isinstance(x,int), listEx)

strings = filter(lambda x: isinstance(x,str), listEx) 
```

等等...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-13T03:07:11.947

Python`for`循环[迭代](http://www.tutorialspoint.com/python/python_for_loop.htm)实际的对象引用。您可能会看到奇怪的行为，部分原因是您将对象引用 i 提供给数字列表索引应该去的地方（该语句`listEx[i]`没有意义。数组索引可以是 i = 0...length_of_list 的值，但在某一点 i= “莫伊兹”）

每次找到一个项目时，您也会替换整个列表 ( `strList = listEx[i]`)。相反，您可以使用 将新元素添加到列表的末尾，但这里有一个更简洁且稍微更 Python 的替代方法，它使用称为[list comprehensions](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)`strList.append(i)`的非常有用的 Python 构造在一行中创建整个列表。

```
listEx = [1,2,3,'moeez',2.0,2.345,'string','another string', 55]
strList = [ i for i in listEx if type(i) == str ] 
```

给出：

```
print strList
>>> print strList
['moeez', 'string', 'another string'] 
```

对于其余的，

```
>>> floatList = [ i for i in listEx if type(i) == float ] 
>>> print floatList
[2.0, 2.345]

>>> intList = [ i for i in listEx if type(i) == int ] 
>>> intList
[1, 2, 3, 55]

>>> remainders = [ i for i in listEx 
    if ( ( i not in  strList ) 
          and (i not in  floatList ) 
          and ( i not in intList) )  ]
>>> remainders
[] 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-13T15:39:37.773

```
 python 3.2
     listEx = [1,2,3,'moeez',2.0,2.345,'string','another string', 55]

     strList = [ i for i in listEx if type(i) == str ] 
     ## this is list comprehension ##

     ###  but you can use conventional ways.

     strlist=[]                   ## create an empty list.          
     for i in listex:             ## to loop through the listex.
             if type(i)==str:     ## to know what type it is
                    strlist.append(i)        ## to add string element
     print(strlist)    

     or:
     strlist=[]
     for i in listex:
            if type(i)==str:
                strlist=strlist+[i]

     print(strlist) 
```**

# javascript - jQuery偏移量错误

> ID：13354966
> 
> 赞同：0
> 
> 时间：2012-11-13T02:54:24.877
> 
> 标签：javascript, jquery

我试图让一个 div 出现在另一个 div 下方，以便我可以向下滑动顶部 div 以显示附加的第二个。

我离得很远，但我不断收到一个错误，即 jquery `[offset][1]`（我想用它来获取顶部 div 的位置）返回未定义。

也许这只是错误的方法。任何帮助表示赞赏。

```
$(document).ready(function() {
    $('.obscure').on('click', function() {

        var blueDiv = $('.blue').clone();

      //  blueDiv.css('display', 'none');
        $('#wrapper').append(blueDiv);
        var obscure = $('#obscure');
        var offset = obscure.offset();
        console.log(offset);
        /*Uncaught TypeError: Cannot read property 'top' of undefined */
        var y = offset.top;
        var x = offset.left;
        console.log(y);
        //blueDiv.css('top', y);

        $('.obscure').css('z-index', 10000);

    });
});​ 
```

[http://jsfiddle.net/loren_hibbard/U7tAV/](http://jsfiddle.net/loren_hibbard/U7tAV/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T03:00:10.710

你的意思`var obscure = $('#obscure');`是读书`var obscure = $('.obscure');`吗？

# javascript - 平滑滚动停止工作 - 我做错了什么？

> ID：13354968
> 
> 赞同：0
> 
> 时间：2012-11-13T02:54:41.603
> 
> 标签：javascript, jquery, wordpress, scroll, smooth-scrolling

我已经在我的主页上实现了[CSS-Tricks Smooth Scrolling 片段](http://css-tricks.com/snippets/jquery/smooth-scrolling/)，它运行良好，直到我决定重建我的主页。现在它根本不起作用。

这是我所做的一些历史。我正在尝试建立一个单页滚动网站。最初，我在 Wordpress 中创建了一个页面并插入了 3 个名为“关于”、“工作”和“联系人”的 div。我实现了平滑滚动片段，一切都运行良好。然而，后来我决定做更多的研究，在此期间发现了 Wordpress 自定义帖子类型的魔力。我决定使用自定义模板 (page-include.php) 重建我的主页，该模板使用 WP_query 包含 3 个不同的页面。其中两个页面（“关于”和“联系”）是实际的 Wordpress 页面，但第三个（“工作”）只是一个自定义循环，用于拉动我的自定义帖子类型。长话短说，当我转到设置>阅读并将主页更改为指向新页面时，平滑滚动停止工作。当您单击导航栏中的链接时，页面会跳转到适当的位置，但根本不会滚动。如果我将主页更改回旧版本，滚动仍然可以正常工作。关于它为什么停止工作的任何想法？

如果有帮助，[这是我的网站](http://www.mcography.com/test/)。另外，如果您想知道，我的主题是基于[Roots](http://www.rootstheme.com/)的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T11:53:49.830

JavaScript 执行时发生错误，这就是脚本退出的原因，因此没有应用平滑滚动。

我已经看到，您的脚本`plugins.js`在`href`. 不幸的是，您的导航栏中有一个链接，如下所示：`<a href="#anchor3">Anchor 3</a>`

现在您的网站中没有类似的部分`<div id="#anchor3">`，这就是您的脚本引发错误的原因。

问题是您的 plugins.js 中的这行代码，大约在第 30 行：

```
var targetOffset = $target.offset().top; 
```

$target 为空，尝试`alert($target.length)`或`console.log($target.length)`获取证明。现在要解决此问题，请更改此行：

```
if (target) { 
```

对此：

```
if (target && $target.length) { 
```

现在在调用`.offset()`您的脚本之前将检查您的 jQuery 选择中是否有任何元素。如果`$target`为空，则不会触发，脚本将继续工作。

# google-apps-script - 根据匹配值将数据从另一个工作表复制到工作表

> ID：13354970
> 
> 赞同：2
> 
> 时间：2012-11-13T02:55:04.620
> 
> 标签：google-apps-script, google-sheets

这与我的上一个问题有点不同，但我无法将代码转移到这个问题上。

表 1 有带有公司名称的个人联系人。每个人都有一个名字，但公司名称可能会根据工作表中的个人数量出现多次。所以：

```
Name        Company       Work Address
John Smith  ABC Company
Jim Smith   XYZ Company
Bob Smith   ABC Company 
```

表 2 的公司及其工作地址：

```
Company        Work Address
ABC Company    1234 Street, USA
XYZ Company    5678 Street, USA 
```

如何编写脚本以使公司地址转到个人联系表？

我尝试过使用数组并搜索行/列索引，但我遗漏了一些东西。这段代码让我最接近，但不能让它工作（代码列和行号与示例不匹配，它们只是我正在尝试处理的当前数组，仅供参考）：

```
function populateCofieldsincontact() {
  var writeSheet = sskey.getSheetByName('POCs');
  var sourceSheet = sskey.getSheetByName('Businesses');

  var writeData = writeSheet.getRange(1, 6, writeSheet.getLastRow(), 5).getValues();Logger.log(writeData)
  for (var w = 0; w < writeData.length; w++ ) {

    var sourceData = sourceSheet.getRange(1, 2, sourceSheet.getLastRow(), 3).getValues();
    var dest = [];
    for (var i = 0; i < sourceData.length; i++ ) {
      if (writeData ==sourceData[i][0].toString().match(writeData)) {
        dest.push(sourceData[i][2]); 
      }
    }
  }
  if (dest.length > 0 ) {
      writeSheet.getRange(2,10,dest.length,1).setValue(dest.toString());
    }
} 
```

非常感谢任何帮助！

快速更新 - 我能够获取 setValue（不是由于某种原因无法工作的 setValues）并将地址写入正确的列，但我认为让它写入循环的唯一方法是使用 getLastRow，我只知道如何为工作表执行此操作。所以我最终将所有地址都放在了正确的列中，但是从实际数据的底部开始写成行。我不知道如何让它写入顶行，然后向下，呃。

**最终**（希望）代码：我在@Adam 代码的第 13 行`[w][0]`第二次提到的旁边插入了一个，`writeData`经过几次测试后它似乎可以正常工作。谢谢@Adam 和@Serge ！！：

```
function populateCofieldsincontact() {
  var writeSheet = sskey.getSheetByName('POCs');
  var sourceSheet = sskey.getSheetByName('Businesses');

  var writeData = writeSheet.getRange(2, 6, writeSheet.getLastRow() - 1).getValues();
  var sourceData = sourceSheet.getRange(2, 2, sourceSheet.getLastRow(), 12).getValues();
  var dest = [];
  var temp;

  for (var w = 0; w < writeData.length; w++) {
    temp = null;
    for (var i = 0; i < sourceData.length; i++) {
      if (writeData[w][0] == sourceData[i][0].toString().match(writeData[w][0])) {
        temp = sourceData[i][11];
        break;
      }
    }
    dest.push([temp]);
  }
  if (dest.length > 0 ) {
      writeSheet.getRange(2, 13, dest.length, 1).setValues(dest);  Logger.log(dest)
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T06:10:34.257

看看这是否按预期工作，希望我的假设是正确的*（编辑：根据评论纠正错字）*：

```
function populateCofieldsincontact() {
  var writeSheet = sskey.getSheetByName('POCs');
  var sourceSheet = sskey.getSheetByName('Businesses');

  var writeData = writeSheet.getRange(2, 6, writeSheet.getLastRow() - 1).getValues();
  var sourceData = sourceSheet.getRange(1, 2, sourceSheet.getLastRow(), 3).getValues();
  var dest = [];
  var temp;

  for (var w = 0; w < writeData.length; w++) {
    temp = null;
    for (var i = 0; i < sourceData.length; i++) {
      if (writeData[w][0] == sourceData[i][0].toString().match(writeData[w][0])) {
        temp = sourceData[i][2];
        break;
      }
    }
    dest.push([temp]);
  }
  if (dest.length > 0 ) {
      writeSheet.getRange(2, 10, dest.length, 1).setValues(dest);
  }
} 
```

我想您的代码存在一些问题，但我认为重要的信息（像我这样的菜鸟花了很长时间才解决）是，当您使用 getValues 和 setValues 时，您总是在处理二维数组，即使数组只有一列宽。因此，位中的方括号`dest.push([temp])`- 您实际上是在逐步将长度为 1 的数组推入 dest 数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T05:57:52.123

您应该使用两个循环并在第一个循环的每个步骤中迭代第二个循环。如果在第二个循环中没有找到匹配项，那么您应该在第一个数组中压入一个空项，以保持第一个数据表中的数据对齐。我相信你可以通过这个...

# android - 通过 SAX Parser 获取值时始终返回 null

> ID：13354971
> 
> 赞同：0
> 
> 时间：2012-11-13T02:55:29.787
> 
> 标签：android, xml, saxparser

嗨，我正在练习从 XML 中获取价值。
我从教程中复制它，但我总是进入捕获区并将文本设置为空。
这是代码：
MainActivity.java

```
 /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle icicle) {
            super.onCreate(icicle);

            /* Create a new TextView to display the parsingresult later. */
            TextView tv = new TextView(this);
            try {
                    /* Create a URL we want to load some xml-data from. */
                    URL url = new URL("http://www.anddev.org/images/tut/basic/parsingxml/example.xml");

                    /* Get a SAXParser from the SAXPArserFactory. */
                    SAXParserFactory spf = SAXParserFactory.newInstance();
                    SAXParser sp = spf.newSAXParser();

                    /* Get the XMLReader of the SAXParser we created. */
                    XMLReader xr = sp.getXMLReader();
                    /* Create a new ContentHandler and apply it to the XML-Reader*/
                    ExampleHandler myExampleHandler = new ExampleHandler();
                    xr.setContentHandler(myExampleHandler);

                    /* Parse the xml-data from our URL. */
                    xr.parse(new InputSource(url.openStream()));
                    /* Parsing has finished. */

                    /* Our ExampleHandler now provides the parsed data to us. */
                    ParsedExampleDataSet parsedExampleDataSet =
                                                                    myExampleHandler.getParsedData();

                    /* Set the result to be displayed in our GUI. */
                    tv.setText(parsedExampleDataSet.toString());

            } catch (Exception e) {
                    /* Display any Error to the GUI. */
                    tv.setText("Error: " + e.getMessage());
            }
            /* Display the TextView. */
            this.setContentView(tv);
    } 
```

}

这是 Logcat：

```
11-13 12:02:40.689: W/System.err(1061): android.os.NetworkOnMainThreadException
11-13 12:02:40.749: W/System.err(1061):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
11-13 12:02:40.789: W/System.err(1061):     at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
11-13 12:02:40.789: W/System.err(1061):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
11-13 12:02:40.809: W/System.err(1061):     at java.net.InetAddress.getAllByName(InetAddress.java:214)
11-13 12:02:40.859: W/System.err(1061):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:70)
11-13 12:02:40.859: W/System.err(1061):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
11-13 12:02:40.879: W/System.err(1061):     at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:341)
11-13 12:02:40.879: W/System.err(1061):     at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:87)
11-13 12:02:40.952: W/System.err(1061):     at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
11-13 12:02:40.952: W/System.err(1061):     at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:315)
11-13 12:02:40.959: W/System.err(1061):     at libcore.net.http.HttpEngine.connect(HttpEngine.java:310)
11-13 12:02:40.959: W/System.err(1061):     at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:289)
11-13 12:02:41.009: W/System.err(1061):     at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:239)
11-13 12:02:41.029: W/System.err(1061):     at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:273)
11-13 12:02:41.029: W/System.err(1061):     at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:168)
11-13 12:02:41.029: W/System.err(1061):     at java.net.URL.openStream(URL.java:462)
11-13 12:02:41.099: W/System.err(1061):     at com.example.xmltestfinal1_1.MainActivity.onCreate(MainActivity.java:38)
11-13 12:02:41.099: W/System.err(1061):     at android.app.Activity.performCreate(Activity.java:5008)
11-13 12:02:41.152: W/System.err(1061):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
11-13 12:02:41.179: W/System.err(1061):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
11-13 12:02:41.179: W/System.err(1061):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
11-13 12:02:41.239: W/System.err(1061):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
11-13 12:02:41.289: W/System.err(1061):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
11-13 12:02:41.289: W/System.err(1061):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-13 12:02:41.299: W/System.err(1061):     at android.os.Looper.loop(Looper.java:137)
11-13 12:02:41.359: W/System.err(1061):     at android.app.ActivityThread.main(ActivityThread.java:4745)
11-13 12:02:41.359: W/System.err(1061):     at java.lang.reflect.Method.invokeNative(Native Method)
11-13 12:02:41.399: W/System.err(1061):     at java.lang.reflect.Method.invoke(Method.java:511)
11-13 12:02:41.409: W/System.err(1061):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-13 12:02:41.442: W/System.err(1061):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
11-13 12:02:41.449: W/System.err(1061):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T04:31:15.333

在这条线上

```
xr.parse(new InputSource(url.openStream())); 
```

**您正在主**线程中执行网络操作

长操作应该在后台线程中执行，如下所示

1.  网络操作（下载文件等）
2.  文件操作（读取文件内容等）
3.  复杂的计算...

为了实现这一点。你应该使用[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)

您可以在`onPostExecute()`

额外的，

如果要从后台线程中设置 UI 对象中的数据，请使用`Handler`对象

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T04:17:56.970

您正在从应用的主 (UI) 线程访问网络，这在最新版本的 Android 中是不允许的。这就是`NetworkOnMainThreadException`Logcat 输出中出现的原因。如果网络速度较慢，您的用户可能会看到“应用程序无响应”警告，您的应用程序可能会因此被终止。

您需要使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)在后台线程中下载和解析您的 XML 线程。这使您的应用程序能够在后台线程处理 XML 数据时与用户进行交互。如果您需要更多详细信息，有很多`AsyncTask`关于 SO 的教程可以提供帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-04T12:42:59.953

` 公共无效 demoxml()

```
{ 
    AssetManager manager = getAssets();
    InputStream stream;

    try {
        XMLDOMParser parser = new XMLDOMParser();
        stream = manager.open("game.xml");
        Document doc = parser.getDocument(stream);

        DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
        DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
        Log.i("DocumentBuilder--->", "Document Building is complete--> ready for parsing");

       // Document doc = dBuilder.parse("http://myinfo.comuf.com/ram/game.xml");
        doc.getDocumentElement().normalize();

        Log.i("Document--('-')->","it is open");

        //get all tabs
        NodeList nodeList=doc.getElementsByTagName("string");
        int lengthq = nodeList.getLength();
        Log.i("Node length is ", ""+String.valueOf(lengthq));
        NodeList nl = doc.getElementsByTagName("array");
        int length = nl.getLength();
        Log.i("Node length is ", ""+String.valueOf(length));

        for(int i=0; i<length; i++ ){
            Node currentNode = nl.item(i);
           // RSSItem item = new RSSItem();

            Log.i("Main Node-->"+i+"---",currentNode.toString());

            NodeList nchild = currentNode.getChildNodes();
            int clength = nchild.getLength();

            //get the required element from each item
            for(int j=1;  j<clength; j=j+2){

                Node thisNode = nchild.item(j);

                String theString;
                String nodeName = thisNode.getNodeName();
                theString = nchild.item(j).getFirstChild().getNodeValue();

                Log.i("('-')ChildNode--->"+nodeName+"="+j+"---",theString.toString());
            }
        }
    } catch (ParserConfigurationException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

}` 
```

# javascript - 读取表格然后删除并显示新的

> ID：13354973
> 
> 赞同：1
> 
> 时间：2012-11-13T02:55:31.173
> 
> 标签：javascript, jquery, html, css

这是我第一次显示页面（实际上行和列中的数据是从服务器代码和数据库生成的）。还请注意每个数据的属性

```
 <table>
        <tr>
            <td id="1" class="decorate">Item3</td>
            <td class="decorate"><p>Description<p></td>
        </tr>
        <tr>
            <td class="decorate">Item1</td>
            <td class="decorate"><p>Description1</p><p>Description2</p></td>
        </tr>
        <tr>
            <td id="2" class="decorate">Item2</td>
            <td class="decorate"><p>Description3<p></td>
        </tr>
    </table>
                <div id="tablediv"></div> 
```

这是用于在 OnLoad 事件上读取该数据并在排序后将数据附加到“tablediv”中的 js 代码。

```
$(document).ready(function() {
    var arr = new Array();
    $('table tr').each(function() {
        var $row = $(this);
        var key = $row.find('td:first').html();
        var value = $row.find('td:last').html();
        console.log(value);
        arr.push([key, value]);
    });

    arr.sort(function(a, b) {
        var valueA, valueB;
        valueA = a[0]; // sort by the first value of array
        valueB = b[0];
        if (valueA < valueB) {
            return -1;
        }
        else if (valueA > valueB) {
            return 1;
        }
        return 0;
    });

    var root=document.getElementById('tablediv');
    var table=document.createElement('table');
    var tbo=document.createElement('tbody');
    var row, cell;
    for(var i=0;i<arr.length;i++)
    {
        row=document.createElement('tr');
        for(var j=0;j<2;j++)
        {
            cell=document.createElement('td');
            cell.appendChild(document.createTextNode(arr[i][j]));
            row.appendChild(cell);
        }
        tbo.appendChild(row);
    }
    table.appendChild(tbo);
    root.appendChild(table);
}); 
```

但是，我不喜欢将其放入，`tablediv`而是要完全替换上一个表（上一个表没有 id 或类让我知道它在 jquery 代码中的位置）。

我怎样才能做到这一点 ？而且我还想在前一个表的 td 中保留属性。我在这里使用的数组需要更多的实现......:-(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T03:30:05.290

就地排序：http: [//jsfiddle.net/CrossEye/T44Nn/](http://jsfiddle.net/CrossEye/T44Nn/)

```
var $table = $("table")
var rows = $table.find("tr").toArray();
rows.sort(function(a, b) {
    var left = $(a).find("td:first").html(), // .text() ??
        right = $(b).find("td:first").html();
    return left < right ? -1 : left > right ? +1 : 0;
});
$(rows).each(function() {
    $(this).appendTo($table);
});​ 
```

这应该意味着您不必从一个表复制到另一个表，只需完整地重用行。

# javascript - 对于页面中的所有文本框，使用 jquery 将数字向下舍入到最接近的整数？

> ID：13354984
> 
> 赞同：0
> 
> 时间：2012-11-13T02:57:13.700
> 
> 标签：javascript, jquery, asp.net

在网页中，我有许多来自服务器的文本框，它们可能具有 int 或 float 格式的值。

要求是在页面加载之前检查客户端的值，如果任何文本框具有浮点或十进制值（例如 1.00 或 1.67），则将值向下舍入到文本框中最接近的整数。

请指导我如何做到这一点。我有点理解它需要在页面加载或 jquery 的文档就绪事件时完成，并且需要使用 Regex 但不知道如何编写这个语法。请帮帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T03:03:32.120

**演示**：http: [//jsfiddle.net/sCQc3/](http://jsfiddle.net/sCQc3/)

使用 JavaScript 的`floor()`方法 ( [W3Schools](http://www.w3schools.com/jsref/jsref_floor.asp) )，您可以将数字向下舍入到最接近的整数。

# c++ - 我的类默认构造函数出错

> ID：13354987
> 
> 赞同：0
> 
> 时间：2012-11-13T02:57:39.703
> 
> 标签：c++

我有一个类，它为另一个类设置了一些变量，但我似乎无法让它工作，因为我得到一个错误。

所以我有这个：

* * *

```
MainMenu::MainMenu(std::map<std::string,std::string>& theme){ 
    CreateSprite Background(theme["Background"]);
}

void create(sf::RenderWindow& output){
    output.draw( Background.callback() );
} 
```

它的标题：

* * *

```
class MainMenu
{
private:

CreateSprite Background;

public:
MainMenu(std::map<std::string, std::string>&);
void create(sf::RenderWindow&);

}; 
```

问题是我得到：

`error C2512: 'CreateSprite' : no appropriate default constructor available`

我的课程`CreateSprite`设置如下：

* * *

```
CreateSprite::CreateSprite(std::string& imagefile) {

if(!image.loadFromFile(imagefile)){
    exit(2);
}

sprite = sf::Sprite(image);
}

sf::Sprite CreateSprite::callback(){
return sprite;
} 
```

这个类的相关`header`内容是：

* * *

```
class CreateSprite
{
public:

CreateSprite(std::string&);
sf::Sprite callback();

private:

sf::Texture image;
sf::Sprite  sprite;

}; 
```

我有什么不正确的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T03:03:04.510

我猜你`MainMenu`已经声明了一个成员`Background`，你应该从成员初始化器中初始化它：从

```
MainMenu::MainMenu(std::map<std::string,std::string>& theme){ 
    CreateSprite Background(theme["Background"]);
} 
```

到

```
MainMenu::MainMenu(std::map<std::string,std::string>& theme)
:Background(theme["Background"])
{     
} 
```

# iphone - mov 0x40(%eax),%eax 是什么意思？

> ID：13354988
> 
> 赞同：0
> 
> 时间：2012-11-13T02:57:41.450
> 
> 标签：iphone, ios, gdb

做什么

```
0x01b55ee2  <+0014>  mov    0x40(%eax),%eax 
```

意思是？我应该如何解释 0x40()，因为我的代码在该位置崩溃时遇到问题。%eax 寄存器的内容为 0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T03:00:10.507

您正在查看的代码`%eax + 0x40`视为一个地址，并将 32 位从该地址移动到`%eax`. 如果`%eax`为零，这意味着您正在处理的基本上是一个 NULL 指针取消引用。

# c# - 通过另一端损坏的套接字发送

> ID：13354991
> 
> 赞同：0
> 
> 时间：2012-11-13T02:58:20.003
> 
> 标签：c#, objective-c, ios, client-server

我已经处理这个问题几天了，我无法弄清楚问题是什么。我正在尝试通过套接字从 iOS 将声音文件发送到基于 C# 的服务器。代码如下：

目标 C：

```
NSData * data = [NSData dataWithContentsOfFile:uri];

int length = 0;
int totalLen = [data length];
uint8_t buffer[1024];
Byte * readBytes = (uint8_t *)[data bytes];

//Tell the server what this is
int headerInt = 2;
NSData *header = [NSData dataWithBytes:&headerInt length:sizeof(int)];
[outputStream write:[header bytes] maxLength:sizeof(int)];
//Fill up the rest of the header (132 bytes total)
UTF8Char emptyHead[128];
[outputStream write:emptyHead maxLength:sizeof(char) * 128];

do
{
    int indexLen = (1024 > (totalLen - length) ? (totalLen- length) : 1024);
    memcpy(buffer, readBytes, indexLen);

    int written = [outputStream write: buffer maxLength: 1024];

    if (written < 0)
    {
        break;
    }

    length += written;

    readBytes += written;
}
while (length < [data length]);

[self sendENDS]; //Inform the server I am done 
```

在C#端读取数据（会尽量缩短代码），如下：

```
 if (read > 0)
        {
            //Write this into an overall buffer
            obj.bufferStream.Write(obj.buffer, 0, read);
            obj.bufferStream.Flush();

            if (obj.buffer.Length > 4)
            {
                //Check if the client sent an "end of stream" flag
                byte[] checkBuff = obj.buffer.Skip(read - 4).Take(4).ToArray();
                string terminator = ASCIIEncoding.ASCII.GetString(checkBuff);
                if (terminator == "ENDS")
                {
                    obj.readMe = false;
                }
            }
            if (obj.readMe == true)
            {
                obj.buffer = new byte[ConnectionObject.bufferSize];//I keep forgetting to clear the buffer
                localSocket.BeginReceive(obj.buffer, 0, ConnectionObject.bufferSize, SocketFlags.None, new AsyncCallback(recieve), obj);
            }
        }
//...the rest takes care of taking the obj.streamBuffer and writing it into a file along with handling other types of requests 
```

我遇到的问题是我正在发送一个记录在 iPhone 上的 .caf 文件。但是，当我尝试在服务器机器上播放它时，QuickTime 告诉我无法播放该文件。此外，以字节为单位的文件大小似乎比原始文件略短（大约短 20kb）。有任何想法吗？我为抛出这么多代码而道歉。任何帮助是极大的赞赏！

PS。连接正确打开，并且以相反的方式发送数据完美。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T03:25:50.073

只有当它有可用空间而不是假设它总是准备好时，您才需要写入流。实现委托方法：

```
[_ostream setDelegate:self];
[_ostream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
[_ostream open];

- (void)stream:(NSStream*)aStream handleEvent:(NSStreamEvent)event
{
    switch (event)
    {
        ...
        case NSStreamEventHasSpaceAvailable:
        {
            NSInteger written = [_ostream write:buffer maxLength:1024];
            ...

            if (transferredDataLength == dataLength])
            {
                [_ostream close];
                [_ostream removeFromRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
                _ostream = nil;
            }
        }
        ...
    }
} 
```

您可能需要处理其他事件，例如`NSStreamEventErrorOccurred`,`NSStreamEventEndEncountered`等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T19:04:45.593

事实证明，虽然 Davyd 非常正确，但实际问题在于缓冲区大小设置不正确。我在字节文件前面有一个空白，导致读取它时出现问题。下次对齐你的缓冲区/套接字读取:)

# ruby - 创建文件夹时出现 EACCES 错误

> ID：13354996
> 
> 赞同：0
> 
> 时间：2012-11-13T02:59:13.187
> 
> 标签：ruby, sinatra, capistrano, rack, file-permissions

我是 Linux 和 Ruby 菜鸟，所以请多多包涵。

我正在使用 Sinatra 编写一个小型 Rub​​y 应用程序，并使用 Capistrano 将其部署到 Linux 服务器。我能够在本地成功运行该应用程序，甚至远程使用`rack -p 4567`.

`/foo`我的应用程序使用`Dir::mkdir`, 以及该目录内的子目录和文件创建了一个目录（我们称之为） `/foo`。当我使用 daemon -D 选项执行 rack 时，在创建`/foo`文件夹时突然出现文件权限错误。

```
rackup -D -p 4567 
```

我知道这与文件权限有关，但我不确定在这里设置什么。网络推荐 chmod，但那是在你从 shell 运行的情况下，对吧？我尝试过传递`0700`或传递`0777`，`Dir::mkdir`但他们似乎没有帮助。如何授予守护程序创建目录和文件的权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T22:03:06.517

事实证明，这是因为我没有在我的应用程序中使用绝对路径。所以当前工作目录指向的是ruby所在的/usr/bin。

用于`File.expand_path(File.dirname(__FILE__))`获取脚本所在的路径。

# node.js - 如何设计分布式 node.js Web 服务器

> ID：13354998
> 
> 赞同：8
> 
> 时间：2012-11-13T02:59:19.007
> 
> 标签：node.js, scalability, distributed, multicore

假设我需要实现一个具有大量并发用户的 Web 应用程序。我决定使用 node.js，因为它可以很好地扩展，它具有良好的性能，开源社区等等。然后，为了避免瓶颈，因为我可以在同一个事件循环中拥有大量的用户，我决定使用一个集群进程以利用多核 CPU。此外，我有 3 台机器（main + 2），因为我需要使用 Cassandra 处理大数据。太棒了，这意味着我有 3*n node.js 进程，其中 n 是 cpu 的核心数（机器是相同的）。

好的，然后我开始研究，并以以下模式结束：

*   Nginx 监听 80 端口，仅用于提供静态内容（img、css、js 等）。
    将动态流量转发到 haproxy。我知道怎么配置nginx，但是还是得看一下haproxy，所以我就说haproxy正在监听4000端口。Nginx和haproxy安装在主机（入口点）。
*   3 台机器之间的 Haproxy 负载平衡。它将流量转发到 4001 端口，即 node.js 进程正在监听 4001。
*   每个 node.js 都有一个由 n 个进程组成的集群，监听 4001。

如果我是正确的，单个 http 请求将被转发到单个 node.js 进程。

创建会话很正常，对吗？一个会话只是一个映射，而这个映射是一个对象，这个对象存在于一个 node.js 进程中。Haproxy 将配置循环调度程序，因此可以将同一用户转发到不同的 node.js 进程。如何在所有 node.js 进程中共享相同的会话对象？我如何共享一个全局对象（这包括在同一台机器（node.js 集群）和整个网络中）？我应该如何使用 node.js 设计分布式 Web 应用程序？是否有任何模块可以简化同步任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-10T03:57:00.983

正如 Ivan 所指出的，您将会话对象存储在 memcache 或 redis 甚至 Couchbase（memcache 存储桶）中。我还想补充一点，如果您想构建一个可扩展的系统，您的目标应该是以一种可以线性扩展的方式构建系统，以根据需求增加吞吐量。我的意思是，您应该能够随时（最好在高峰期）将更多主机添加到基础架构中的不同层以处理需求。

因此，您必须非常小心选择何种技术以及在开发过程中做出的设计决策。

> 假设我需要实现一个具有大量并发用户的 Web 应用程序。

我想补充的另一件事是，如果你无法衡量它，你就无法管理它。一个好的开始是定义“大量并发用户”对您意味着什么？那是 facebook 或 whatsApp 类型的卷/并发吗？首先通过与您的利益相关者（如果有）合作来定义这些，然后您可以开始制定设计决策和挑选技术。

在构建可扩展系统时，一个好的试金石是问自己：“是否存在单点故障？” 如果是，那么您的系统将无法扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-13T13:40:56.183

您可以使用 memcache 或 redis 来存储会话对象。这在重启节点进程的情况下非常有用（如果会话数据存储在进程的内存中，它将丢失）。

您还可以检查[pm2](http://pm2.keymetrics.io/)功能列表，也许其中一些对您有用。

构建微服务架构将具有良好的可扩展性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-10T04:13:22.957

正如另一位用户所建议的那样；对于这个问题，使用[Redis](http://redis.io)是一个完全可以接受的解决方案。

它的底层是使用服务来存储会话对象，让中间件处理其他所有事情。如前所述，它在节点进程重新启动、崩溃等情况下很有用。将会话数据存储在节点进程中存在风险。使用微服务（如 Redis）的好处之一是降低了这些风险。

假设你使用`Express`你的中间件，你可以使用一个叫做`Session store`. 有很多模块可以利用此功能。

一个这样的模块是[connect-redis](http://github.com/tj/connect-redis)

安装像往常一样轻而易举：

```
npm install connect-redis express-session 
```

然后你会像这样使用它：

```
var session = require('express-session')
var RedisStore = require('connect-redis')(session)

app.use(session({
    store: new RedisStore(options),
    secret: 'keyboard cat'
})) 
```

现在您可以像往常一样使用会话对象。( `req.session`)

**例子：**

要设置会话信息（例如，来自表单 POST）：

```
req.session.email = req.body.email 
```

要检索会话信息：

```
console.log( req.session.email ) 
```