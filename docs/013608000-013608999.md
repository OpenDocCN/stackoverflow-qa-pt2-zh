# StackOverflow 问答 13608000-13608999

# html - 我的链接在我网站的标题部分不起作用？

> ID：13608000
> 
> 赞同：0
> 
> 时间：2012-11-28T14:58:09.393
> 
> 标签：html, css, hyperlink

好的，我已经尝试了我能想到的一切来解决这个问题......我网站顶部的链接不起作用。

其他地方的链接都很好。

这是我的html：

```
<div id="header" class="header1" align="center">
</div><!--end blue header div-->

<div class="logo" align="center"> 
 <table align="center" width="800px"><tr><td width="800px" align="center">
 <img align="middle" src="images/phwm_sc_logo.png" width="170" height="212" alt="logo" />
   </td></tr></table>
  <!--must be same width as navigation "header2  div"-->
</div> 
<!--end logo div-->

<div id="header" class="header2" align="center">
<table width="800px" height="80px" style="padding-top:10px"> <!--height of table must match height of div "header 2" -->
<tr>
<td width="138"><h1><a href="index.html">[ HOME ]</a></h1></td>
<td width="149"><h1><a href="index.html">[ TEAMS ]</a></h1></td>
<td width="220"><h1></td>
<td width="137"><h1><a href="index.html">[ STAFF ]</a></h1></td>
<td width="132"><h1>[ GALLERY ]</h1></td>

</tr>
</table>
</div><!--end red navigation header div--> 
```

这是我的外部 CSS：

```
a.ex1:link {
color:#666335;
text-decoration:none
}    /* unvisited link */
a.ex1:visited {
color:#666335;
text-decoration:none
} /* visited link */
a.ex1:hover {
color:#D85D27;
text-decoration:none
}   /* mouse over link */
a.ex1:active {
color:#D85D27;
text-decoration:none
}  /* selected link */.header1 { position:fixed; top: 0px;
width: 100%; height:50px;
background-color: rgba(0, 54, 103, 0.6); /* Color white with alpha 0.9*/
}
.header2 { position:fixed; top:60px; 
width: 100%; height:80px;
background-color: rgba(210, 6, 46, 0.4); /* Color white with alpha 0.9*/
}

.logo {position:fixed; top: 5px;
 z-index:10; width:100%; 
} 
```

如果需要，我总是可以包含更多的 HTML 和 CSS...帮助！我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:01:39.287

包含您的中心徽标的表格覆盖了链接，因此当您认为您正在点击链接时，您实际上是在点击表格 - 阻止了链接被访问。使徽标容器与徽标大小相同，您应该没问题。

# lotus-notes - 如何清除 PickList 中的任何列排序

> ID：13608001
> 
> 赞同：1
> 
> 时间：2012-11-28T14:58:08.977
> 
> 标签：lotus-notes, lotusscript

你们中的任何人都知道如何在选择列表中打开视图之前清除任何列排序吗？

我有一个视图，其中包含可以在单击时对其进行排序的列。现在，有关视图的信息按列排序并保留。

如果我改变视图并单击我的按钮，其中包含显示视图的选项列表。然后记住列排序。

如何清除视图中的任何列排序？我已经尝试过resortview 方法，但无法使其正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T15:24:22.490

我认为您可以在 Notes 首选项中禁用此功能。从菜单文件 - 首选项 - 基本 Notes 客户端配置中选择并禁用选项“保留视图列排序” 注意：此设置会影响任何 Lotus Notes 数据库，它是您的 Notes 客户端的全局设置。

# esb - Mule FunctionalTestCase - 它是否为每个测试加载 mule 服务器？

> ID：13608004
> 
> 赞同：2
> 
> 时间：2012-11-28T14:58:30.110
> 
> 标签：esb, mule

我想知道，如果我说 10 个测试，每个测试都扩展了 Mule 中的 FunctionalTestCase - 它实际上是否在测试的生命周期中加载了一个 Mule 服务器并在它运行的每个测试中将其拆除？这对我来说似乎是一个开销 - 无论轻量级的骡子可能是什么。

仅供参考 - 我所有的测试都扩展了 AbstractMuleTest ，后者又扩展了 FunctionalTestCase 并实现了 getConfigResoures() 方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T16:09:40.870

是的，这样做是有原因的：保证每个测试都与其他测试隔离，因此事情不会仅仅因为之前在 Mule 的另一个测试中发生过其他事情而无法正常工作。

也就是说，您可以通过在测试用例类构造函数中添加以下内容来关闭此功能：

```
setDisposeContextPerClass(true); 
```

# php - jQuery 对话框下拉

> ID：13608008
> 
> 赞同：3
> 
> 时间：2012-11-28T14:58:38.383
> 
> 标签：php, javascript, jquery, wordpress

```
jQuery( "#dialog" ).dialog({ width: 'auto', zIndex: 9999, height: 370, resizable: false, draggable: false,
    open :function(event, ui) {
        jQuery('body').addClass('black-overlay');
    },
    show: { effect: 'drop', direction: "up", mode: 'slow'},
    close:function(event, ui) {
        jQuery('body').removeClass('black-overlay');
    } 
}); 
```

我希望对话框窗口应该从浏览器窗口的开始处删除，并且该对话框没有边框

并且从顶部掉下来应该很慢

当前对话框是 Drop up 非常快，而不是从浏览器窗口的开始

任何人都可以帮助我吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:01:35.773

降低默认动画速度以夸大效果

```
 $.fx.speeds._default = 3000; 
```

把这段代码放在前面：

```
 jQuery( "#dialog" ).dialog({... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T18:58:39.503

您可以将 duration:1000 添加到显示属性

`show: { effect: 'drop', direction: "up", mode: 'slow' ,duration:1000}`

# entity-framework - 清除本地后数据检索失败

> ID：13608012
> 
> 赞同：1
> 
> 时间：2012-11-28T14:58:54.127
> 
> 标签：entity-framework, entity-framework-5

我正在使用 Effort in memory db 为实体框架编写单元测试。

在一组测试中，EF 部分创建一个对象并将一些现有对象添加到其中的子列表中（想想 Master / Detail）。然后它 SavesChanges

然后在单元测试中，我从 EF 检索记录并检查它是否真的到达那里并且孩子们就位：他们是。

但是，我想确定我不只是从缓存中读取数据，而且它实际上已经被持久化了。所以我清除（） DbSet 中的本地缓存。

当我这样做时，我可以检索主记录，但未检索到子记录。

如果我针对 SQL Server 和 Effort 运行代码，这是真的（所以它不是 Effort）。

如果我处理上下文并创建一个新上下文，则相同的方法会正确检索包含子项的数据。

因此，清除本地缓存会干扰数据检索。我已经尝试清除主记录以及子记录的缓存 - 没有区别。

任何建议，将不胜感激。

# php - 允许用户点击一个按钮，在这种情况下，倒数计时器不能被中断/刷新

> ID：13608014
> 
> 赞同：0
> 
> 时间：2012-11-28T14:59:01.613
> 
> 标签：php, mysql, timer

我有以下问题： 有一个基于 php+MySQL 的站点。在特定页面上有： - 一个倒数计时器，它会在 10 秒内自动将用户重定向到另一个页面

```
header("Refresh: 10; URL=http://localhost:81/redirect.php?user_id=" . $user_id); 
```

- 正在更新表格的表单上的按钮。

```
if(isset($_POST['button_1')){
$u = "UPDATE users SET name = 'Name' WHERE user_id = '$user_id'";
$ru = mysqli_query ($dbc, $u) or trigger_error("Query: $q\n<br />MySQL Error: " . mysqli_error($dbc));} 
```

一旦用户在 10 秒内点击按钮 - 计数器从开始开始，因为 POST 方法以某种方式刷新它。

我的目标是允许用户点击一个按钮，在这种情况下，倒数计时器不能被中断/刷新。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:03:39.590

在向客户端执行任何输出之前，您需要拥有这段代码，否则 else 条件将失败

```
if(isset($_POST['button_1')){
   $u = "UPDATE users SET name = 'Name' WHERE user_id = '$user_id'";
   $ru = mysqli_query ($dbc, $u) or trigger_error("Query: $q\n<br />MySQL Error: " .     mysqli_error($dbc));}
else{
   header("Refresh: 10; URL=http://localhost:81/redirect.php?user_id=" . $user_id);
} 
```

# spring - 会话复制的优缺点

> ID：13608016
> 
> 赞同：0
> 
> 时间：2012-11-28T14:59:04.097
> 
> 标签：spring, spring-mvc, jboss, spring-webflow

我真的需要会话复制吗？

我正在为一家公司从事一些网络项目。大多数项目都是大约一两页输入，然后保存到 mysql 数据库。非常基础的项目。我的 SA 正在努力尝试让会话复制在 JBoss 中工作，但我真的没有看到任何需要它以及它的所有开销。

我们需要负载平衡和集群，因此如果服务器确实出现故障，我们可以将新请求移动到备份服务，但我在会话复制方面并不大。

这是非常低容量的项目。我的眼睛当服务器在一两页上出现故障时，用户参与项目的几率是多少。

我需要让 SA 相信会话复制在这种情况下是不必要的并发症。我正在寻找会话复制的优缺点，以便更好地构建我的论点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:12:09.123

好吧，“优点”是您有会话故障转移，无论是在有意的集群成员重新启动还是在无意的集群成员故障中。就是这样。

一些“缺点”是：

1.  会话对象及其包含的对象必须是`Serializable`
2.  您必须选择会话持久性或复制并管理它们的配置和/或数据存储
3.  您必须考虑会话持久性/复制策略（例如，每次写入、请求结束、时间安排），并且如果在存储/复制最近的更改之前发生故障，仍然有丢失会话或丢失会话最新状态的风险
4.  复制或持久的非零性能影响，与复制策略的稳健程度成反比。（也就是说，您越有可能迅速复制每个会话更改，性能就越差。）

我们进行会话复制是因为我们在几年前开始此操作时认为故障转移是绝对要求，但我认为如果我重新做一遍，我建议我们不要为大多数应用程序烦恼。

# php - 在 ZEND 中无法访问模型内 的函数

> ID：13608017
> 
> 赞同：0
> 
> 时间：2012-11-28T14:59:04.667
> 
> 标签：php, class, zend-framework, model

谁能明白为什么我的 check_multi 函数会返回一个 --

> 致命错误：在第 21 行的 /var/www/vhosts/aero.onelinksoftware.com/application/models/Design.php 中调用未定义函数 check_multi()

出现上述错误，我不确定我做错了什么。我尝试将我的功能设置为公共、私有、静态和其他组合，但无论我尝试什么；系统仍然出错。你不能在 Zend 的模型中调用函数吗？我不明白如果我创建的函数在我创建的类中，为什么我不能使用它。

如果我在 check_multi 调用之前回显并死掉；我可以看到我的文字等。我还对语法进行了 php 测试，据报告它是有效的。

```
class Model_Design
{
    /**
     * Constructs our partials.
     *
     * @return void
     */
    public function __construct($key)
    {
        // Get the DB Connection
        $db = Zend_Registry::Get('db');
        // Setup the SQL Statement
        $sql = $db->select()->from('design', array('id'));
            // Get the Result
            $result  = $sql->query();
            // Get our Row
            $row     = $result->fetchAll();

            if(check_multi($key, $row)) {
                echo "omg"; die();
            }

        // Make sure the id isn't empty
        if (empty($key)) {
            throw new Exception('You have a disturbing lack of variables.');
        }

        // Store the id
        $this->variables = $key;

        // Construct our query
        $sql = $db->select()->from('design')->where('`id` = ?', $key);
            // Get the result
            //$result    = $sql->query();
            //$row   = $result->fetch();
    }

    private function check_multi($n, $arr)
    {
        foreach ($arr as $key => $val) {
            if ($n===$key) {
                return $key;
            }
        }
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:11:20.673

尝试：

```
$this->check_multi($key, $row); 
```

要从容器类内部访问变量或函数，您必须使用 $this。$this 是类的当前实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T15:13:08.440

你如何调用函数？使用`$this->check_multi($n,$arr);`或者你可以尝试[function_exists()](http://php.net/manual/en/function.function-exists.php)来检查函数是否真的存在

# web-services - Jboss 异常：javax.xml.soap.SOAPException：不支持的内容类型：文本/纯文本。响应：内部服务器错误/500

> ID：13608022
> 
> 赞同：0
> 
> 时间：2012-11-28T14:59:32.833
> 
> 标签：web-services, soap, jboss, jax-ws, wsimport

当我尝试向 Web 服务发出请求时，出现以下错误：

java.io.IOException：无法传输消息

org.jboss.remoting.CannotConnectException：无法连接 http 客户端调用程序。javax.xml.soap.SOAPException：不支持的内容类型：文本/纯文本。响应：内部服务器错误/500。

你知道可能是什么原因吗？

已使用 wsimport jvm 命令自动生成 WSDL java 类

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-02T08:37:17.273

我使用另一个 web 服务实现自动生成类。我使用 AXIS 而不是 wsimport。
在我的自动生成类的标题中，我有这个文本：

*   此文件是从 WSDL 自动生成的
*   Apache Axis 1.4 Apr 22, 2006 (06:55:48 PDT) WSDL2Java 发射器。

希望这对面临与我相同问题的其他人有所帮助

干杯

# visual-studio-2012 - 尝试运行转换后的 VS 2010 项目时出现 System.Exception

> ID：13608023
> 
> 赞同：0
> 
> 时间：2012-11-28T14:59:40.243
> 
> 标签：visual-studio-2012

我已经安装了最新版本的 Visual Studio 2012，以及最新的修补程序。

我有一个完美的工作项目，在 VS 2010 中制作，我（自动）转换为 VS 2012 项目。它可以构建，但是当我尝试运行它时，会弹出一个窗口：System.Exception。有谁知道这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:23:24.427

在将任何 VS 2010 项目转换为 VS 2012 之前，您应该安装 VS 2010 SP1。如果您没有这样做，打开的项目会导致许多不相关的行为。

此外，VS 2010 中的任何安装程序/设置项目都不会在 VS 2012 中打开。

# python - python中的数组/图像插值

> ID：13608029
> 
> 赞同：3
> 
> 时间：2012-11-28T14:59:57.323
> 
> 标签：python, arrays, numpy, pixel, interpolation

我一年`numpy`中的每一天都有 365 个二维数组，显示如下图像：

![http://i50.tinypic.com/34i62gw.jpg](../Images/eaeb2cede1177ce0474ab8e6845c1226.png)

我将它们全部堆叠在一个 3d numpy 数组中。像素值代表我要去掉的云，我想搜索前 7 天或后 7 天（前 7 层，后 7 层）以找到除云之外的值，然后替换云该像素的其他可能值的值（相应像素在其他天/层中经历的值）。

我是python新手，有点迷茫。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T18:36:21.613

您实际上是在尝试为您的数组编写一个过滤器。

首先，您需要编写一个函数，当给定一个值数组时，中间一个是当前检查的元素，将返回这些值的一些计算。在您的情况下，该函数将期望采用一维数组并返回最接近非云的中间索引的元素：

```
import numpy as np
from scipy.ndimage.filters import generic_filter

_cloud = -1

def findNearestNonCloud(elements):
    middleIndex = len(elements) / 2
    if elements[middleIndex] != _cloud:
        return elements[middleIndex] # middle value is not cloud

    nonCloudIndices, = np.where(elements != _cloud)
    if len(nonCloudIndices) == 0:
        return elements[middleIndex] # all values were cloud

    prevNonCloudIndex = np.where(nonCloudIndices < middleIndex, 
            nonCloudIndices, -1).max()
    nextNonCloudIndex = -np.where(nonCloudIndices > middleIndex, 
            -nonCloudIndices, 1).min()
    # -1 means no non-cloud index

    # pick index closest to middle index    
    if (abs(prevNonCloudIndex - middleIndex) 
            <= abs(nextNonCloudIndex - middleIndex)):
        return elements[prevNonCloudIndex]
    else:
        return elements[nextNonCloudIndex] 
```

现在您需要将此函数应用于您感兴趣的元素。为此，您需要一个掩码来指示您对特定元素感兴趣的其他元素。

```
from scipy.ndimage.filters import generic_filter

# creates 5 days worth of a 3x3 plot of land
input = np.ones((5, 3, 3)) * _cloud
input[0,:,:] = 10 # set first "image" to all be 10s
input[4,0,0] = 12 # uppper left corner of fourth image is set to 12
print "input data\n", input, "\n"

mask = (5, 1, 1)
# mask represents looking at the present day, 2 days in the future and 2 days in 
# the past for 5 days in total.

print "result\n", generic_filter(input, findNearestNonCloud, size=mask)
# second and third images should mirror first image, 
# except upper left corner of third image should be 12 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T12:35:48.593

我通过这个解决了它：

```
interpdata = []
j = 0
for i in stack:
    try:
        temp = np.where( stack[j] == 50, stack[j-1], modis[j] )
        temp = np.where( temp == 50, stack[j+1], temp )
        temp = np.where( temp == 50, stack[j-2], temp )
        temp = np.where( temp == 50, stack[j+2], temp )
        temp = np.where( temp == 50, stack[j-3], temp )
        temp = np.where( temp == 50, stack[j+3], temp ) 
        temp = np.where( temp == 50, stack[j-4], temp )
        temp = np.where( temp == 50, stack[j+4], temp )
    except IndexError:
        print 'IndexError Passed'       
        pass
    else:
        pass
    interpdata [j, :, :] = temp
    j = j + 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T15:28:15.240

我认为您可以执行以下操作：

```
data = somehow_get_your_3d_data() #indexed as [day_of_year,y,x]
for i,dat in enumerate(data):
    weeks2 = data[max(i-7,i):min(i+7,len(data)), ... ]
    new_value = get_new_value(weeks2) #get value from weeks2 here somehow
    dat[dat == cloud_value] = new_value 
```

# symfony - Symfony 2 Sonata Admin - ListMapper 中的自定义排序

> ID：13608030
> 
> 赞同：3
> 
> 时间：2012-11-28T15:00:01.723
> 
> 标签：symfony, sonata-admin

我有一个`Customer`实体，其中包含 FirstName、LastName 等字段。

我也有这样的实体方法：

```
public function getFullName() {
        return sprintf("%s %s", $this->getLastName(), $this->getFirstName());
} 
```

我的`configureListFields`函数如下所示：

```
protected function configureListFields(ListMapper $listMapper)
{
    $listMapper
        ->add('fullName')
        ->add('birthday')
        ->add('email')
        ->add('phone')
    ;
} 
```

如何使字段**fullName**可排序？

如何在有或没有 Doctrine ORM 的情况下添加自定义排序条件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T09:05:24.517

我想你可以使用自定义模板来破解，如果只对姓氏进行排序是可以的。

```
protected function configureListFields(ListMapper $listMapper)
{
    $listMapper
        ->add('last', null, array(
            'sortable' => true,
            'template' => 'YourAdminBundle:CRUD:fullname.html.twig')
        ->add('birthday')
        ->add('email')
        ->add('phone')
    ;
} 
```

在您的模板中：

```
{% extends 'SonataAdminBundle:CRUD:base_list_field.html.twig' %}
{% block field%}
{{ object.lastName }} {{ object.firstName }} 
{% endblock %} 
```

问题是它只会排序 lastName 而不是 lastName firstName :-(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-24T17:04:53.893

你可以这样做：

实体：

```
public function getTextFullName() 
{
   return $this->LastName . $this->FirstName;
} 
```

并列出字段：

```
protected function configureListFields(ListMapper $listMapper)
{
    $listMapper
        ->add('textFullName')
        ->add('birthday')
        ->add('email')
        ->add('phone')
    ;
} 
```

# forms - ZF2 - 保护表单元素

> ID：13608031
> 
> 赞同：1
> 
> 时间：2012-11-28T15:00:06.580
> 
> 标签：forms, zend-framework2

我有一个包含各种表单元素的表单。在创建模式下，所有元素都必须可编辑，但在编辑模式下，我需要锁定某些元素。

我试图设置属性“只读”或“禁用”，它在浏览器视图中工作。但是当用户在 FireFox 或其他中使用 Webdeveloper 工具（Forms->Enable Form Fields）来操作 POST 请求时，这些值会从 zend 表单中被接受。

如何安全保护/锁定表单元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:41:39.817

只需不要使用您不需要的已发布数据修改您的实体/模型。对于这个东西，类似的功能`$myModel->populate($request->getPost())`可能不是最好的方法。而是给自己写一个函数，比如`$myModel->populateForEdit($request->getPost())`只修改允许在某个操作上修改的字段。

永远记住：任何用户都可以向您发送他想要的任何数据。在填充模型之前过滤数据由您决定！

# javascript - 无法在 setTimeout 内正确访问数组元素

> ID：13608032
> 
> 赞同：1
> 
> 时间：2012-11-28T15:00:10.040
> 
> 标签：javascript, asynchronous

这就是我想要做的。我有一个像下面这样的数组

`var my_array = ['1', '2', '3' ... ,'1000000000000000'];`

我想要做的是为该数组的每个元素创建一堆 HTML 元素，并且由于该数组可以包含大量元素，我尝试执行以下操作，因此浏览器不会冻结。

```
for(var i in my_array)
{
    if(my_array.hasOwnProperty(i))
    {
       setTimeout(function(){
             do_something_with_data(my_array[i]);
       });
    }
 } 
```

但发生的情况是 setTimeout 中的 my_array[i] 没有应有的值。

更准确地说，当我尝试`console.log(my_array[i])`得到的结果是这样的：

```
"getUnique" function (){
   var u = {}, a = [];
   for(var i = 0, l = this.length; i < l; ++i){
      if(u.hasOwnProperty(this[i])) {
         continue;
      }
      a.push(this[i]);
      u[this[i]] = 1;
   }
   return a;
} 
```

getUnique 是我添加到 Array 原型中的一个函数，如下所示：

```
Array.prototype.getUnique = function(){
   var u = {}, a = [];
   for(var i = 0, l = this.length; i < l; ++i){
      if(u.hasOwnProperty(this[i])) {
         continue;
      }
      a.push(this[i]);
      u[this[i]] = 1;
   }
   return a;
}; 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T15:04:50.490

setTimeout 在循环完成后执行，`i`是最后一个键或某个垃圾值。你可以像这样捕捉我：

```
for (var i in my_array) {
    if (my_array.hasOwnProperty(i)) {
        (function(capturedI) {
            setTimeout(function() {
                do_something_with_data(my_array[capturedI]);
            });
        })(i);
    }
} 
```

您也不应该`for..in`对数组使用循环，因为它`.hasOwnProperty`比 for 循环慢一个数量级（尤其是检查时），并且没有定义迭代顺序

如果你有 jQuery 或者愿意为旧版浏览器添加一些额外的代码，你可以这样做：

```
my_array.forEach( function( item ) {
     setTimeout( function() {
         do_something_with_data( item );
     }, 1000);
}); 
```

使用 jQuery：

```
$.each( my_array, function( index, item ) {
     setTimeout( function() {
         do_something_with_data( item );
     }, 1000);
}); 
```

请参阅文档[`[].forEach`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T15:04:35.950

问题是您正在创建的函数具有对变量的*引用*`i`，而不是其*value*的副本，因此当它们运行时，它们会看到`i`当时的状态（大概是在数组末尾之后）。（更多：[*闭包并不复杂*](http://blog.niftysnippets.org/2008/02/closures-are-not-complicated.html)）

我会推荐一种完全不同的方法（如下），但首先，让我们看看如何使您现有的方法发挥作用。

为了做你想做的事情，使用`for`循环，你必须让函数关闭一些不会改变的东西。通常的方法是使用工厂函数来创建超时函数，以便它们关闭工厂的参数。或者实际上，您可以传入数组元素的值而不是索引变量。

```
for(var i in my_array)
{
    if(my_array.hasOwnProperty(i))
    {
       setTimeout(makeFunction(my_array[i]));
    }
 }

function makeFunction(entry) {
    return function(){
        do_something_with_data(entry);
    };
} 
```

**但是**，我可能会重组代码，这样您就不会不必要地创建大量的函数对象。相反，使用*一个*函数，并让它关闭它递增的索引：

```
// Assumes `my_array` exists at this point, and that it
// has at least one entry
var i = 0;
setTimeout(tick, 0);
function tick() {
    // Process this entry
    if (my_array.hasOwnProperty(i)) {
        do_something_with_data(my_array[i]);
    }

    // Move to next
    ++i;

    // If there are any left, schedule the next tick
    if (i < my_array.length) {
        setTimeout(tick, 0);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T15:04:38.380

这只是一个猜测。试试看：

```
for(var i in my_array)
{
    if(my_array.hasOwnProperty(i))
       setTimeout("do_something_with_data('"+my_array[i]+"')", 500);
} 
```

# css - OSX10.8 字体大小/平滑拧紧加载谷歌地图时

> ID：13608036
> 
> 赞同：0
> 
> 时间：2012-11-28T15:00:25.833
> 
> 标签：css, macos, google-maps, fonts, osx-lion

**仅在 OSX 中发生**

在我的导航中，我有一个子菜单，用 css 和 jQuery 完成：

（这只发生在 OSX 中，我在 OSX Lion 10.8 中尝试过，在大多数主要浏览器上）当存在谷歌地图时，该子菜单的字体“缩小”而不是大小，但看起来更薄，我一直在研究位并且可能是字体平滑或字体粗细，但我没有设法修复它。

我在 jsfiddle 中提取了我的代码，因为它足够大，让人感到困惑，html css 和 javascript 都是提取的，我试图最小化代码以使你们更容易。还添加了两个功能非常简单的按钮来添加和删除谷歌地图，所以你可以看到问题，你甚至不必刷新：

[http://jsfiddle.net/SGWMx/](http://jsfiddle.net/SGWMx/)

我很确定问题出在 gmap/css 上，因为我隔离了它，开始了一个空白页面并开始删除东西，直到我得到它。正如您在示例中看到的那样，我大量减少了 javascript，即使是谷歌地图加载也非常基本，即使它搞砸了我的字体。

```
function initialize(){

    var coords = new google.maps.LatLng(55.378051, -3.43597299999999);

    var mapOptions = {
        zoom: 5,
        center: coords,
        mapTypeId: google.maps.MapTypeId.HYBRID
    };

    map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);
} 
```

也不是字体本身，因为在我的电脑上我实际上使用的是另一种字体，只需将其设置为 helvetica/arial 以实现兼容性

**仅在 OSX 中发生**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:33:20.267

好的，所以实际的问题是 `-webkit-transform: translateZ(0);`财产`#map_canvas`和它的孩子。不幸的是，您无法删除它；它被谷歌地图使用。

这个答案可能会让您了解正在发生的事情：[How to prevent Webkit text rendering change during CSS transition](https://stackoverflow.com/questions/12502234/how-to-prevent-webkit-text-rendering-change-during-css-transition)

因此，根据我的评论，唯一真正的解决方案是避免使用`subpixel-aliased`.

```
html {
    -webkit-font-smoothing: antialiased
} 
```

# ruby-on-rails-3 - 将 Rails/AngularJS 应用程序部署到 Heroku 时出现未知的提供程序错误

> ID：13608039
> 
> 赞同：23
> 
> 时间：2012-11-28T15:00:32.137
> 
> 标签：ruby-on-rails-3, angularjs

我有一个在本地开发环境中运行良好的 Rails/AngularJS 应用程序。但是，当我将此应用程序部署到 Heroku 时，AngularJS 不起作用并返回此错误：

```
Unknown provider: eProvider <- e 
```

我做了一些研究，似乎它与资产的预编译和缩小有关，但我不知道该怎么做才能解决这个问题。有任何想法吗？谢谢！

这是控制器的外观：

```
function RemindersCtrl($scope, $http) {
  $http.get('/reminders.json').success(function(data) {
    $scope.reminders = data;
    console.log(data);
  });
} 
```

这是视图中的代码：

```
 %section.reminders
      %div{"ng-controller" => "RemindersCtrl"}
        %ul
          %li{"ng-repeat" => "reminder in reminders"}
            .title {{reminder.title}} 
```

更新：我将控制器更改为此，但结果相同：

```
var RemindersCtrl = function($scope, $http) {
  $http.get('/reminders.json').success(function(data) {
    $scope.reminders = data;
    console.log(data);
  });
}
RemindersCtrl.$inject = ['$scope','$http']; 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-03T14:50:23.440

根据 AngularJS 教程（[http://docs.angularjs.org/tutorial/step_05](http://docs.angularjs.org/tutorial/step_05)），您可以将其添加到控制器中以防止出现缩小问题：

```
function RemindersCtrl($scope, $http) {
  ...
}
RemindersCtrl.$inject = ['$scope', '$http']; 
```

或者不是定义这样的函数：

```
function RemindersCtrl($scope, $http) {
  ...
} 
```

应该这样做：

```
var RemindersCtrl = ['$scope', '$http', function($scope, $http) {
  ...
}]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-28T18:13:42.393

您可能将控制器定义为`FooController = function($http) {}`，您应该定义为`FooController = ["$http", function($http){}]`

看[这里](http://docs.angularjs.org/guide/di)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-11-09T00:45:26.083

Angular 团队（也是一般来说）建议我们不要污染全局范围。

.controller 方法，

```
var myApp = angular.module('myApp',[]);

myApp.controller('GreetingCtrl', ['$scope', function($scope) {
  $scope.greeting = 'Hola!';
}]); 
```

对我来说很好。这记录在[Angular Understanding Controllers 文档中](http://docs.angularjs.org/guide/controller#setting-up-the-initial-state-of-a-object)

# iphone - 如何简单地从 iphone 4 尺寸切换到 iphone 5 尺寸？

> ID：13608040
> 
> 赞同：0
> 
> 时间：2012-11-28T15:00:32.050
> 
> 标签：iphone, objective-c, xcode, iphone-5, screen-size

我想知道如何使我的应用程序支持 iphone 5 标准（尤其是屏幕尺寸）。

我目前有一个专为 iPhone 4 设计的应用程序，因此所有视图的高度均为 460 像素。

我可以做一些简单的自动更新来使它适用于 iPhone 5 吗？在不破坏 iPhone 4 风格的情况下，我希望这个应用程序在两者上都可用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T15:05:11.663

没有神奇的代码可以让应用自行调整，只是`Default-568h@2x.png`顶部告诉 iOS 你的应用支持新的 4" 高度。

最重要的部分是您如何设置视图的自动调整大小蒙版。如果 then 设置为增长 ( `UIViewAutoresizingFlexibleHeight`) 那么它们将增长以填满屏幕。

检查按钮的alginment是否具有正确的Autoresize遮罩的每个视图，例如，如果按钮位于屏幕的按钮上，请确保将Autoresize遮罩设置为将其自身固定到底部并nog默认顶部.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T15:04:36.273

首先，看看你的应用在 iPhone 5 上的样子。这可以通过`Default-568h@2x.png`在你的项目中包含一个来完成。这是 iPhone 5 的启动图像，向操作系统表明您支持更高的屏幕尺寸。

如果您已经很好地对应用程序进行了编程（例如，使用了不错的 Autoresize 掩码），那么操作系统应该会为您处理大部分内容，并且它看起来已经不错了。如果你想在 iOS 6 中使用 AutoLayout，这对 iPhone 5 也有帮助。

如果它看起来不太好，那么您可以使用宏对 iPhone 5 进行一些有条件的修改：

```
#define IsTallPhone() ([UIDevice currentDevice].userInterfaceIdiom == UIUserInterfaceIdiomPhone && [UIScreen mainScreen].bounds.size.height == 568) 
```

例如：

```
if (IsTallPhone()) {
    frame = CGRectMake(0,0,200,500); // Use Tall Frame
}
else {
    frame = CGRectMake(0,0,200,300); // Use Normal Frame
} 
```

条件可以为任何事情完成，例如加载不同的 .xib 文件。这完全取决于你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T15:03:32.400

在 xcode 4.5 中打开您的项目，然后在启动图像中添加 iPhone5 分辨率的默认图像。所有其他屏幕将被拉伸以填满 iPhone 5 屏幕。转到目标摘要并添加视网膜 4 英寸启动图像。

但这实际上取决于它们可能会出现拉伸的图形，如果需要，请使用单独的 xib

# jquery - Mouseenter / Mouseleave 简化 jQuery

> ID：13608041
> 
> 赞同：1
> 
> 时间：2012-11-28T15:00:36.647
> 
> 标签：jquery, mouseenter, mouseleave, simplify

我正在为公司推广建立一个网站，页面上有 24 个地图形状的“热点”，可以打开 24 个单独的 div。不是我的设计，但我不够高，无法为我的案子辩护，所以我同意了。同事写的代码很丑（至少我是这么认为的）---

```
$(".hover1").mouseenter(function(){
    $(".winner1").fadeIn();
}).mouseleave(function(){
    $(".winner1").stop().fadeOut();
}); 
```

(x24)

对于所有 24 个不同的“热点”和 div。所以你可以想象每一个都变成“.hover2”、“.hover3”等……和“.winner2”、“.winner3”等一样……

这段代码大约 120 行。

我的问题，因为我不是 jQuery 专家，所以如何简化这个？我知道必须有办法，我只是不知道。

每个 div 和热点都被这样标记——“hover1”/“winner1”、“hover2”/“winner2”等——并以这种方式连接。

任何帮助将不胜感激，在此先感谢！！

:-)

**编辑**

这是HTML

对于地图

```
<map name="Map">
    <area shape="rect" coords="6,1,258,232" class="hover1"/>
</map> 
```

因此，当您将鼠标悬停在上面时，就会出现

```
<div class="winner1 badge male">
    <div class="winnerText">
        <p><span>Winner:</span> Clay Cauley</p>
        <p><span>Date:</span> December 3<sup>rd</sup>, 2012</p>
        <p><span>Prize:</span> XBOX 360</p>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T15:05:33.853

而不是 .hover 和 .winner 的唯一类，做这样的标记：

```
<div class="container">
    <div class="hover">
        Hovercontent #1
    </div>

    <div class="winner">
        Winnercontent #1
    </div>
</div>

<div class="container">
    <div class="hover">
        Hovercontent #2
    </div>

    <div class="winner">
        Winnercontent #2
    </div>
</div> 
```

然后像这样编写你的javascript。

```
$('.hover').on('mouseenter', function() {
    $(this).siblings('.winner').fadeIn();
}.on('mouseleave', function() {
    $(this).siblings('.winner').stop().fadeOut();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T15:15:30.063

假设您可以修改 HTML，请尝试以下操作：

```
<map name="Map">
    <area shape="rect" coords="6,1,258,232" class="hover" data-target="winner1" />
    <area shape="rect" coords="2,2,2,2" class="hover" data-target="winner2" />
    <area shape="rect" coords="3,3,3,3" class="hover" data-target="winner3" />
    <area shape="rect" coords="4,4,4,4" class="hover" data-target="winner4" />
    <area shape="rect" coords="5,5,5,5" class="hover" data-target="winner5" />
</map> 
```

```
$(".hover").hover(function() {
    $("." + $(this).data("target")).fadeIn();
},
function() {
    $("." + $(this).data("target")).stop().fadeOut();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T15:10:14.183

您可以将 mouseenter 和 mouseleave 事件附加到所有热点，并确定应在函数中显示/隐藏哪个 div。这假设当您说它们被“标记”时，您的意思是 id 或其他一些 HTML 属性。就像是 -

```
$("map").mouseenter(function(event){
    var index = [some function to find the index of the event.target]; // For example, the index of "hover1" is 1
    $("winner" + index).fadeIn();
}).mouseleave(function(event){
   var index = [some function to find the index of the event.target];
   $("winner" + index).stop().fadeOut();
}) 
```

Javascript 字符串解析函数应该很容易找到以完成从 id 或类似的东西中解析索引。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T15:15:29.423

如果更改 HTML 是不可能的，并且类形成一个序列，您仍然可以在循环中附加处理程序。请记住为处理程序捕获迭代变量（或连接的字符串`".winner"+i`）的值：

```
for(i=1;i<=24;i++){
  (function(i){
    $(".hover"+i).mouseenter(function(){
      $(".winner"+i).fadeIn();
    }).mouseleave(function(){
      $(".winner"+i).stop().fadeOut();
    });
  }(i);
}; 
```

# spring - Spring form：select 不使用选项“selected”属性呈现

> ID：13608051
> 
> 赞同：2
> 
> 时间：2012-11-28T15:01:21.767
> 
> 标签：spring, binding, converter, selected

我遇到了转换器和绑定的问题。我有一个带有表单的页面：选择我将对象列表与 itemValue 绑定的位置

```
<form:select id="id_a" items="${items}" path="builder" itemValue="id" /> 
```

我创建了 2 个转换器来转换这个 bean。一个从 bean 转换为显示描述的字符串，另一个从 id 转换以从 DB 获取 bean。

```
private Converter<BuilderType, String> getBuilderTypeToStringConverter(){
   return new Converter<BuilderType, String>(){
       public String convert(BuilderType builder){
           return builder.getDescription();
       }
   };
}

private Converter<String,BuilderType> getStringToBuilderTypeConverter(){
   return new Converter<String, BuilderType>(){
       public BuilderType convert(String id){
           return builderService.findById(new Long(id));
       }
   };
} 
```

因此，当我创建 bean 时一切正常，我在选择字段中看到了描述，当提交表单时，id 被转换为真正的 bean 并在到达控制器之前放入模型属性中。

问题是当我尝试更新时，我的选择仍然正确填充，但未选择实际值。没有属性“selected”的选项可以正确初始化选择。

这真的很奇怪，因为我有一个 spring roo 的示例应用程序（宠物诊所），实际上使用相同类型的转换器正确填充了选择。

我发现让这个工作的唯一方法是在路径中添加“.id”：

```
<form:select id="id_a" items="${items}" path="builder.id" itemValue="id" /> 
```

但是通过这种方式提交时，我在控制器中收到了一个空的“构建器”，其中只有 id 集，而不是在调用正确的转换器时我通常收到的完整对象。

我真的不知道使一个工作而不是另一个工作的两个应用程序之间有什么区别......甚至弹簧库版本都是一样的！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T14:05:43.480

我发现了问题。似乎在工作应用程序的 web.xml 中有另一个我没有使用的过滤器，只需添加它就可以使一切正常：

```
<filter>
    <filter-name>Spring OpenEntityManagerInViewFilter</filter-name>
    <filter-class>org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>Spring OpenEntityManagerInViewFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

**这真的很奇怪，因为我没有发现这是强制性的，甚至与弹簧标签几乎没有联系以使它们按预期工作！**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T13:45:53.903

我认为您应该为实体类（BuilderType）定义equals方法并按id比较实例。否则，表单生成无法从选项项目列表中找到当前值。

当在 BuilderType 中实现时，您可以通过检查对 equals 的调用来验证这一点。

我遇到了同样的问题，并且能够在[此评论和](http://blog.codecentric.de/en/2009/07/multiple-selects-mit-spring-mvc-2/#comment-134213)[Spring Data book](https://github.com/SpringSource/spring-data-book)中的示例代码（AbstractEntity.java）的帮助下解决它。

# java - Hibernate 中的弱实体映射

> ID：13608054
> 
> 赞同：0
> 
> 时间：2012-11-28T15:01:34.493
> 
> 标签：java, hibernate, mapping

我有 2 节课：

```
@Entity
class A{
    @Id
    long id
    @???
    List<B> bs;
}

@????
class B{
    @ManyToOne
    A a;
    @OneToOne
    C c;
    Integer a,b,c,d,e;
} 
```

我怎样才能让休眠来处理它？我不想将 id 放在 B 类上，因为它是一个弱实体？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T15:06:30.457

你所说的“弱”实体是什么意思？只是没有身份证？采用

```
@ElementCollection
List<B> bs; 
```

随着

```
@Embeddable
class B {} 
```

[在此处](http://en.wikibooks.org/wiki/Java_Persistence/ElementCollection)查找示例

# javascript - Google Maps API fitBounds 导致 0,0 位置

> ID：13608061
> 
> 赞同：1
> 
> 时间：2012-11-28T15:02:01.533
> 
> 标签：javascript, google-maps, google-maps-api-3, fitbounds

我正在尝试使用以下代码行来使地图边界适合标记：

```
var latlngbounds = new google.maps.LatLngBounds();
latlngbounds.extend(latlng);    
map.fitBounds(latlngbounds); 
```

由于某种原因，地图会缩放到地图上的位置 0,0。

**更新 1：**似乎可以在 IE9 中运行，但不能在 Chrome 中运行。在 Chrome 开发者模式下得到如下错误信息：`Port error: Could not establish connection. Receiving end does not exist.`

**更新 2：**在 IE9 中重新加载页面后，它也停止工作。

这是我的代码。我必须做一些基本的错误吗？

```
//variables
var map;
var markers = [];
var latlngbounds;
//initialize google map
function initialize()
{
    var myOptions = {
        center: new google.maps.LatLng(-26.17706, 28.34613),
        zoom: 10,
        mapTypeId: google.maps.MapTypeId.ROADMAP};

    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
    latlngbounds = new google.maps.LatLngBounds();

    //display markers
    updateMarkersDisplayed(); 
}

//displays google map after site load complete
google.maps.event.addDomListener(window, 'load', initialize);

//retrieves markers for map
function updateMarkersDisplayed()
{
    //php get url
    var searchUrl = 'getCoords.php';

    downloadUrl(searchUrl, function(data) {
        var xml = parseXml(data);   
        var markerNodes = xml.documentElement.getElementsByTagName("marker");
        for (var i = 0; i < markerNodes.length; i++) {
            var id = markerNodes[i].getAttribute("device_id");
            var latlng = new google.maps.LatLng(
                parseFloat(markerNodes[i].getAttribute("lat")),
                parseFloat(markerNodes[i].getAttribute("lng")));

            createMarker(latlng, id);      
            latlngbounds.extend(latlng);    
        }
    }); 
    //zoom map to display all markers
    map.fitBounds(latlngbounds);    
}

//create marker and display on map if not already visible
function createMarker(latlng, id) {      

    var iconUrl = 'images/phones.png';              
    var marker = new google.maps.Marker({
        map: map,
        position: latlng,
        title: id,
        icon: iconUrl
    });     

    markers.push(marker);   
    markers[markers.length-1].setMap[map];

}

//download xml file containing markers specified by the GET parameters contained in the url passed
function downloadUrl(url,callback)
{
    var request = window.ActiveXObject ?
        new ActiveXObject('Microsoft.XMLHTTP') :
        new XMLHttpRequest();

    request.onreadystatechange = function() {
        if (request.readyState == 4) 
        {
            request.onreadystatechange = doNothing;
            callback(request.responseText, request.status);
        }
    };

    request.open('GET', url, true);
    request.send(null);
}

//parse text returned by php script
function parseXml(str) {
    if (window.ActiveXObject) 
    {
        var doc = new ActiveXObject('Microsoft.XMLDOM');
        doc.loadXML(str);
        return doc;
    } 
    else if (window.DOMParser) 
    {
        return (new DOMParser).parseFromString(str, 'text/xml');
    }
}

//capture extra XMLHttpRequest responses
function doNothing() {} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T16:24:53.407

以 0,0 为中心的 google.maps.LatLngBounds 是空边界的症状。

您将 XML 用于标记数据。不工作的浏览器可能不喜欢您的 XML，请尝试将这些浏览器直接指向 XML 提要并修复报告的任何问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T07:56:49.183

必须在 XML 下载完成之前调用函数`map.fitBounds(latlngbounds);`内部。`downloadUrl(searchUrl, function(data) {``fitBounds`

```
 downloadUrl(searchUrl, function(data) {
        var xml = parseXml(data);   
        var markerNodes = xml.documentElement.getElementsByTagName("marker");
        for (var i = 0; i < markerNodes.length; i++) {
            var id = markerNodes[i].getAttribute("device_id");
            var latlng = new google.maps.LatLng(
                parseFloat(markerNodes[i].getAttribute("lat")),
                parseFloat(markerNodes[i].getAttribute("lng")));

            bounds.extend(latlng);      
            createMarker(latlng, id);           
        }
        //zoom map to display all markers
        map.fitBounds(bounds);
    }); 
```

# java - 复杂语法的 Antlr AST 树方法

> ID：13608062
> 
> 赞同：0
> 
> 时间：2012-11-28T15:02:02.203
> 
> 标签：java, antlr

我写了一个复杂的语法。语法如下：

```
grammar i;

options {
output=AST;
}

@header {
package com.data;
}

operatorLogic   : 'AND' | 'OR';
value       : STRING;
query       : (select)*;
select      : 'SELECT'^ functions 'FROM table' filters?';';
operator    : '=' | '!=' | '<' | '>' | '<=' | '>=';
filters : 'WHERE'^ conditions;
conditions  : (members (operatorLogic members)*);
members : STRING operator value;
functions   : '*';
STRING  : ('a'..'z'|'A'..'Z')+;
WS      : (' '|'\t'|'\f'|'\n'|'\r')+ {skip();}; // handle white space between keywords 
```

输出是使用 AST 完成的。以上只是一个小样本。但是，我正在开发一些大语法，并且需要有关如何处理此问题的建议。

例如根据上面的语法可以产生以下内容：

```
SELECT * from table;
SELECT * from table WHERE name = i AND name = j; 
```

此查询可能会变得更复杂。我已经在 J​​ava 代码中实现了 AST，并且可以取回 Tree。我想把语法和逻辑分开，所以它们是有凝聚力的。所以 AST 是最好的方法。

用户将以字符串形式输入查询，我的代码需要以最佳方式处理查询。如您所见，函数解析器当前是 * 表示全选。将来，这可能会扩展到包括其他事物。

我的代码如何处理这个？最好的方法是什么？

我可以做这样的事情：

```
String input = "SELECT * from table;";
if(input.startsWith("SELECT")) {
    select();
} 
```

如您所见，这种方法更复杂，因为我还需要处理 * 可选过滤器。也需要做 AND 和 OR 的 operatorLogic。

什么是最好的方法？我在网上看过，但找不到任何关于如何处理这个问题的例子。

你能举出任何例子吗？

编辑：

```
String input = "SELECT * FROM table;";
if(input.startsWith("SELECT")) {
   select();
}
else if(input.startsWith("SELECT *")) {
  findAll();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:41:29.040

处理多个起始规则（“SELECT ...”、“UPDATE...”等）的最简单方法是让 ANTLR 语法在单个顶级起始规则中为您完成工作。你几乎已经拥有了，所以只需更新你所拥有的。

目前，您的语法仅限于一种命令类型的输入（“SELECT ...”），因为这就是您定义的全部内容：

```
query       : (select)*; //query only handles "select" because that's all there is.
select      : 'SELECT'^ functions 'FROM table' filters?';'; 
```

如果`query`是您的起始规则，那么接受额外的顶级输入就是定义`query`接受超过`select`：

```
query       : (select | update)*; //query now handles any number of "select" or "update" rules, in any order.
select      : 'SELECT'^ functions 'FROM table' filters?';';
update      : 'UPDATE'^ ';';  //simple example of an update rule 
```

现在该`query`规则可以处理诸如`SELECT * FROM table;`、`UPDATE;`或之类的输入`SELECT * FROM table; UPDATE;`。添加新的顶级规则时，只需更新`query`以测试该新规则。这样，您的 Java 代码就不需要测试输入，它只需调用`query`规则并让解析器处理其余部分。

如果您只想从输入中处理一种类型的输入，请定义`query`如下：

```
query       : select*  //read any number of selects, but no updates
            | update*  //read any number of updates, but no selects
            ; 
```

该规则`query`仍然处理`SELECT * FROM table;`and `UPDATE;`，但不是混合命令，例如`SELECT * FROM table; UPDATE;`.

* * *

一旦你`query_return`从调用中得到你的 AST 树`query`，你现在就有了一些有意义的东西，你的 Java 代码可以处理，而不是一个字符串。该树代表解析器处理的所有输入。

您可以像这样穿过树的孩子：

```
iParser.query_return r = parser.query();
CommonTree t = (CommonTree) r.getTree();

for (int i = 0, count = t.getChildCount(); i < count; ++i) {
    CommonTree child = (CommonTree) t.getChild(i);
    System.out.println("child type: " + child.getType());
    System.out.println("child text: " + child.getText());
    System.out.println("------");
} 
```

遍历整个 AST 树是递归调用`getChild(...)`所有父节点的问题（我上面的示例仅查看顶级子节点）。

* * *

处理备选方案与`*`您定义的任何其他备选方案没有什么不同：只需在要扩展的规则中定义备选方案。如果你想`functions`接受超过`*`，定义`functions`接受超过`*`。;)

这是一个例子：

```
functions: '*'      //"all"
         | STRING   //some id
         ; 
```

现在解析器可以接受`SELECT * FROM table;`and `SELECT foobar FROM table;`。

请记住，您的 Java 代码*没有理由*检查输入字符串。每当您想这样做时，请寻找一种方法来让您的语法进行检查。然后，您的 Java 代码将根据需要查看 AST 树的输出。

# ruby - 避免“缺少关联记录”导致错误

> ID：13608063
> 
> 赞同：0
> 
> 时间：2012-11-28T15:02:03.273
> 
> 标签：ruby, ruby-on-rails-3, simple-form

我发现自己在我的视图中重复检查以避免来自 nil 类的错误。显然在这种情况下，如果服务器有父级，我想用该值预先填写一个表单，但是如果服务器没有父级，如果我没有这个检查，视图就会出错。然而，我是一个 Ruby Bambi，他认为有一个很好的方法来编辑这个，但还没有找到。

我在模型中有一个关联...

```
belongs_to :parent, :class_name => "Server" 
```

在我看来：

```
 <% if @server.parent %>
    <%= f.input :parent, input_html: { id: "server_typeahead", value: @server.parent.name } %>
 <% else %>
    <%= f.input :parent, input_html: { id: "server_typeahead" } %>
 <% end %> 
```

# java - 如何序列化/反序列化正确的 BST（通用类型） - 实现（单独的类或子类）

> ID：13608064
> 
> 赞同：0
> 
> 时间：2012-11-28T15:02:06.493
> 
> 标签：java

序列化/反序列化 BST（通用类型）的正确方法是`class Serialize`什么？序列化类？哪种方法是正确的？（类似java）

序列化类必须是独立类还是可以是容器的子类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:53:12.803

要序列化 ​​Java 类，您应该：

1.  实现 Serializable 接口
2.  确保你的类的所有成员变量都可以序列化

如果您只有一个由原语组成的简单数据类型，这就像在您的类中添加“实现可序列化”一样简单。

更多关于实现 Serializable 的细节可以在[这里](http://docs.oracle.com/javase/7/docs/api/java/io/Serializable.html)找到。

可以在[此处](http://www.tutorialspoint.com/java/java_serialization.htm)找到序列化和反序列化的示例。

# webdeploy - WebDeploy 运行命令问题

> ID：13608066
> 
> 赞同：0
> 
> 时间：2012-11-28T15:02:19.180
> 
> 标签：webdeploy

我正在尝试使用 WebDeploy V3 部署一个包。安装过程是在远程计算机上的源文件夹和目标文件夹之间进行同步，并在同步完成后运行某个 powershell 脚本。正在执行的命令是：

```
'"C:\Program Files\IIS\Microsoft Web Deploy V3\msdeploy.exe" -verb:sync -source:dirPath='C:\source' -dest:dirPath='D:\destination',computerName=XXX -postSync:runcommand='powershell -inputformat none D:\destination\Install.ps1',successReturnCodes=0' 
```

这会产生以下错误：

```
Info: Using ID '49edd786-d8a0-4acf-be7b-95dd6e1391cc' for connections to the remote server.  Performing '-postSync'... Info: 
Using ID '5ef9d005-82fa-4811-9f51-1741c8d622de' for connections to the remote server. 
Info: Adding MSDeploy.runCommand (MSDeploy.runCommand). 
Error: (11/28/2012 4:34:24 AM) An error occurred when the request was processed on the remote computer. Error: The entry type 'Unknown' was not expected at this time. The serialization stream may be corrupted.
Error count: 1.
Error during '-postSync'.  Total changes: 0 (0 added, 0 deleted, 0 updated, 0 parameters changed, 0 bytes copied) 
```

在网上搜索此错误，我没有看到任何人在使用 runco​​mmand 提供程序时遇到它。如果有人遇到类似的问题并有想法或建议，我将不胜感激..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T09:05:33.860

从我所见，`runCommand`用于执行任意命令行可能有点错误。尝试将命令行移动到`bat`or`cmd`文件中并提供（完整？）路径。只要您不尝试向其传递任何参数，该文件就会被上传并执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-01T05:18:46.473

For future viewers of this post: I encountered this same specific error (`Error: The entry type 'Unknown' was not expected at this time. The serialization stream may be corrupted`) after adding runCommand provider usage to my MyProject.wpp.targets file for the Web Publishing Pipeline MSBuild process. The path was direct cmd shell input used in order to clear readonly flags with `attrib -R`.

In my case, my build server was configured with WebDeploy 3.0, while the server targeted by the deployment package was configured with Webdeploy 2.0\. After upgrading the target server to Webdeploy 3.0 this particular problem was resolved.

However due to other errors surrounding runCommand (providing the correct path to the destination executable at package runtime) my solution still doesn't work entirely so take this all with a grain of salt.

# jquery - 解决 jQuery 无法在 IE8 中加载的问题

> ID：13608068
> 
> 赞同：0
> 
> 时间：2012-11-28T15:02:20.193
> 
> 标签：jquery, internet-explorer-8, cross-browser

我建立[了这个网站](http://www.streetofwalls.com)，并在我可以从 IE8 及更高版本获得的所有浏览器上对其进行了测试。在我的 IE8 版本和我能够测试的任何版本上一切正常。

问题：我的网站在我的客户端版本的 IE8 中无法正常工作。他们报告的错误消息表明 jQuery 没有被加载，这（不足为奇）正在左右破坏脚本。他们向我保证没有防火墙阻止 jquery 从外部站点加载。我还让他们确认在 Internet 选项下启用了 Active Scripting。我对为什么*他们的*IE8 不工作但我的工作没有任何想法。

他们在 Windows XP 上。这是我得到的 IE8 的完整版本号：v8.06001.18702c0 128bit

有谁知道可能会发生什么？我需要以某种方式尝试追踪那个确切的版本吗？

客户向我展示了此错误消息的屏幕截图。我检查了引用的每一行，一旦在这些脚本中引用了 jQuery，它基本上就会抛出错误。 ![在此处输入图像描述](../Images/c98fe647e3a5a16edfa07e819b2ec579.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T15:07:06.107

作为快速修复，在调用远程脚本时始终使用回退，以防远程服务器不可用：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js" type="text/javascript"></script>
<script>window.jQuery || document.write('<script src="/js/jquery.js" type="text/javascript"><\/script>')</script> 
```

这样，如果找不到远程，则会加载本地版本。不确定这是否会解决您的问题，但值得一试。此外，请确保在调用任何方法之前实际加载了 jQuery：

```
jQuery(document).ready(function($)
{
...your script
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:31:39.403

我不完全理解这个解决方案，但是当客户端打开开发人员工具（工具 > 开发人员工具）并从“IE8 兼容性视图模式”切换到 IE8 模式时，问题得到了解决。对我（以及我认识的其他所有人）来说，这已经是默认设置了。客户在办公室工作，他们的所有软件都有很多防火墙和安全设置，所以我认为他们的浏览器是出于某种与安全相关的原因而设置的。

我快速浏览了一下，发现这个关于兼容模式的相当有指导意义的页面：http: [//blogs.msdn.com/b/askie/archive/2009/03/23/understanding-compatibility-modes-in-internet-explorer-8 .aspx](http://blogs.msdn.com/b/askie/archive/2009/03/23/understanding-compatibility-modes-in-internet-explorer-8.aspx)

# c# - 将数据从 AuthorizeCore 传递到 HandleUnauthorizedRequest 然后在 ASP.NET MVC4 中操作

> ID：13608070
> 
> 赞同：5
> 
> 时间：2012-11-28T15:02:38.200
> 
> 标签：c#, asp.net-mvc-4, authorize-attribute

如果我覆盖以下方法，我有一个处理未经授权的用户访问的自定义实现`AuthorizeAttribute`：*，*`AuthorizeCore`然后`HandleUnauthorizedRequest`.

*   检查用户访问的逻辑在`AuthorizeCore.`
*   到控制器/动作的重定向在`HandleUnauthorizedRequest`.

现在，我想知道**如何将数据从 AuthorizeCore 发送到控制器/动作？**按照这个顺序：

1.  `AuthorizeCore`创建一条消息。
2.  `HandleUnauthorizedRequest`执行重定向并传递先前创建的消息。
3.  控制器/动作接收消息。

**注意：**我不想通过 QueryString 接收消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:09:48.157

有几种方法可以做到这一点。您可以尝试添加：

```
filterContext.Controller.TempData["auth_fail_message"] = "Error message"; 
```

在 HandleUnauthorizedRequest 方法中。然后您可以从错误操作中访问临时数据。
您也可以使用 asp.net 会话对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-15T06:42:43.820

尝试这个;

```
public string Messages { get; set; } // declare "Messages"
protected override bool AuthorizeCore(HttpContextBase httpContext)
{
     Messages = "bla bla";// Or set in controller
     ....
     ....
     ....
     ....
     base.AuthorizeCore(httpContext); 
}

protected override void HandleUnauthorizedRequest(AuthorizationContext filterContext)
{
   Messages.ToString(); // Read Message ="bla bla"
   base.HandleUnauthorizedRequest(filterContext);
} 
```

2.方法使用控制器设置消息；

```
[CustomAuthorize(Messages = "Bla Bla Bla")]
public ActionResult Index()
{
    return View();
} 
```

# c# - 根据用户输入创建数据库和实体模型

> ID：13608071
> 
> 赞同：3
> 
> 时间：2012-11-28T15:02:38.150
> 
> 标签：c#, entity-framework, dynamic

目前我正在调整一个与 Entity Framework 一起工作的系统以连接到 SQL Server 2008 R2 数据库。

对于新部分，关键用户需要添加、更改和删除普通用户可以使用的实体。在我创建一个保存具有名称和属性的对象的系统之前，我想看看是否可以使用关键用户提供的实体（通过简化的实体设计器）动态创建数据库。

我已经搜索了一点，但在互联网上但没有找到类似的东西。也许这里有人知道一些东西可以把我推向正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:07:02.537

听起来你最好动态地定义表、列、索引和外键。如果您要使用带有实体和属性的“数据库的数据库”模式，您将无法有效地索引数据库。查询变得异常缓慢和讨厌。

您可以使用 SQL Server 管理对象 (SMO) 查询和更改数据库架构。我已经多次使用它们。他们工作并且很好地合作。

我不相信实体框架在这里带来了很多好处。EF 非常适合在静态模式上表达查询和 DML。如果您要使用动态模式，您将失去大部分好处。当然，一些好处仍然存在，例如实体密钥管理和能够使用 Entity SQL 而不是 T-SQL。不利的一面是，您必须在运行时创建所有 EF 元数据（可能生成 EDMX 文件或动态程序集）。

我认为这不值得。我强烈考虑在运行时构建数据库模式并使用动态构建的 T-SQL 对其执行查询。这样做比使用 EF 对系统进行操作要容易得多。

`DataTables`从这个意义上说，你又回到了`GridViews`5 年前被认为是好的风格。这可能还不算太糟糕。

# php - 更新记录电视节目数据库 - PHP MYSQL

> ID：13608072
> 
> 赞同：1
> 
> 时间：2012-11-28T15:02:39.820
> 
> 标签：php, mysql

我正在尝试为我的电视项目创建一个背板。MySql 数据库由两个表组成。“节目”和“季节”。

节目表由节目 ID（主键）、节目标题和日期组成。Seasons 表由Season ID（主键）、Show ID（外键）、Season、发布日期组成。

您在控制面板中看到的第一件事是数据库中以表格格式显示的所有节目。例如，如果您编辑“Dexter”，它将带您进入显示 dexter 季节的输入框的编辑页面。像第 1 季、第 2 季等……我有这种工作。我的意思是它在输入框中正确显示但是当我去提交它只是重定向回同一个编辑页面并且没有任何更新。

我的主 index.php 后面板中的代码允许您编辑：

```
<td><a href="edit.php?id=<?php echo $row['show_id']; ?>">edit</a></td> 
```

来自edit.php的代码：

```
<?php
$playlist_id=$_GET['id'];
// this makes it so it grabs the season records that match the show id
$sql="SELECT * FROM seasons WHERE show_id='$show_id'";
$result=mysql_query($sql);
$count=mysql_num_rows($result);
?>

<table>
<form name="form1" method="post" action="">
<tr>
<td>
<table>
<tr>
<td align="center"><strong>Id</strong></td>
<td align="center"><strong>Season Name</strong></td>
</tr>

<?php
while($rows=mysql_fetch_array($result)){
?>

<tr>
<td align="center">
<input name="season_id[]" type="text" id="season_id" value="<?php echo $rows['season_id']; ?>">
</td>
<td align="center">
<input name="Season[]" type="text" id="Season" value="<?php echo $rows['Season']; ?>">
</td>
</tr>

<?php
}
?>

<tr>
<td></td>
<td></td>
<td colspan="4" align="right"><input type="Submit" name="Submit" value="Submit"></td>
</tr>
</table>
</td>
</tr>
</form>
</table>

<?php

$result1 = FALSE;
if (isset($_GET['Submit'])) {
for($i=0;$i<$count;$i++){
$sql1="UPDATE seasons SET Season='$Season[$i] WHERE Season_id='$Season_id[$i]'";
$result1=mysql_query($sql1);
}
}

if($result1){
header("location:update.php");
}
mysql_close();
?> 
```

您可能想知道为什么我要编辑季节的名称，但一旦我克服了这个障碍，我最终会让它变得更复杂并添加更多字段。就像我说它显示正确但是当我点击提交时它只是重新加载页面并且没有任何变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:07:20.720

您正在发布数据，因此您需要将此 isset($_GET['Submit']) 更改为 isset($_POST['Submit'])

您在更新查询中有错误。在 $Season[$i] 之后缺少 '

$sql1="UPDATE seasons SET Season='$Season[$i]' WHERE Season_id='$Season_id[$i]'";

您可以使用 mysql_affected_rows() 检查行是否已更新。

```
if(mysql_affected_rows() == 1){
echo "Updated";
} else { echo "error"; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T15:20:41.913

您希望在发布页面时执行查询。您的 edit.php 页面应如下所示：

```
<?php
if (isset($_POST['submit'])) {
    $sql = "UPDATE `table_name` (`column1`, `column2`) VALUES (:value1, :value2)";
    $statement = $pdo->prepare($sql);
    $statement->bindParam(':value1', $_POST['some_field_name']);
    $statement->bindParam(':value1', $_POST['some_field_name']);
    $statement->execute();
    // record's updated; either redirect or display error message
}
?>
<!-- HTML of form here; will be shown if nothing’s been POSTed --> 
```

其中“提交”是您提交按钮的名称，即`<input type="submit" name="submit" value="Update" />`.

您还应该使用[PDO](http://php.net/manual/en/book.pdo.php)之类的东西而不是`mysql_`函数，因为这些函数现在已被弃用。

# c# - 如何使用 EditMode.EditProgrammatically 捕获在 DataGridView 的单元格中键入的第一个字符？

> ID：13608073
> 
> 赞同：1
> 
> 时间：2012-11-28T15:02:42.410
> 
> 标签：c#, winforms, datagridview

我已经设定

```
EditMode = DataGridViewEditMode.EditProgrammatically; 
```

在我的 DataGridView 上，因为我不想重复单击以启动编辑模式。（所有其他 EditMode 设置都会发生这种情况）。

现在我已经覆盖了 OnKeyDown 并调用 BeginEdit 在用户键入时开始编辑单元格。

```
protected override void OnKeyDown(KeyEventArgs e)
{
  BeginEdit(true);
  base.OnKeyDown(e);
} 
```

问题是事件处理似乎吞下了第一个按键，或者 BeginEdit 调用得太晚了。

这是一些可以粘贴到演示问题的新 VS C# 项目中的代码。（粘贴时只需替换生成的Form1定义即可。）

```
 public class MyDataGridView : DataGridView
  {
    public MyDataGridView()
    {
      this.EditMode = DataGridViewEditMode.EditProgrammatically;
    }

    protected override void OnKeyDown(KeyEventArgs e)
    {
      BeginEdit(true);
      base.OnKeyDown(e);
    }
  }

  public partial class Form1 : Form
  {
    private System.Windows.Forms.DataGridView dataGridView1;

    public Form1()
    {
      this.dataGridView1 = new MyDataGridView();
      ((System.ComponentModel.ISupportInitialize)(this.dataGridView1)).BeginInit();
      this.SuspendLayout();

      this.dataGridView1.AutoSizeColumnsMode = System.Windows.Forms.DataGridViewAutoSizeColumnsMode.Fill;
      this.dataGridView1.ColumnHeadersHeightSizeMode = System.Windows.Forms.DataGridViewColumnHeadersHeightSizeMode.AutoSize;
      this.dataGridView1.Dock = System.Windows.Forms.DockStyle.Fill;

      this.Controls.Add(this.dataGridView1);

      ((System.ComponentModel.ISupportInitialize)(this.dataGridView1)).EndInit();
      this.ResumeLayout(false);

      this.dataGridView1.Columns.Add("", "foo");
      this.dataGridView1.Columns.Add("", "bar");
      this.dataGridView1.Rows.Add(3);
    }
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T15:22:41.790

您可以尝试改写 OnKeyPress 事件并发送按下的键：

```
protected override void OnKeyPress(KeyPressEventArgs e) {
  if (!IsCurrentCellInEditMode) {
    BeginEdit(true);
    SendKeys.Send(e.KeyChar.ToString());
  }
  base.OnKeyPress(e);
} 
```

# mysql - 从一系列类别中选择

> ID：13608074
> 
> 赞同：0
> 
> 时间：2012-11-28T15:02:48.933
> 
> 标签：mysql, sql

> **可能重复：**
> [逗号分隔列表的Mysql WHERE问题](https://stackoverflow.com/questions/3946831/mysql-where-problem-with-comma-separated-list)

我在表格中有下一个信息

```
name     categories
------   -----------
John      1,4
Jim       4,1
JAck      4,1 
```

其他之间。

我想选择属于类别 4 的所有行，但是这个语句..

```
SELECT name, categories
FROM `mytable`
WHERE 4 IN (categories) 
```

仅返回“Jim”和“Jack”，但不返回“John”。我究竟做错了什么？

**编辑**：可悲的是我不能改变表格的结构。我需要使用那种逗号列表样式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:05:40.020

我不确定为什么要将逗号分隔的列表存储在单列中。但是你不能改变表结构，你会想用它`LIKE`来比较数据：

```
select name, categories
from yourtable
where categories like '%4%' 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/10980/1)

或者您可以使用以下[`FIND_IN_SET`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set)功能：

```
select name, categories
from yourtable
where FIND_IN_SET(4,categories) > 0 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/10980/2)

我的建议是更改您的表格，不要以这种逗号分隔的格式存储您的数据，这只会导致问题。

# java - 使用 EPL 跟踪一系列事件

> ID：13608078
> 
> 赞同：1
> 
> 时间：2012-11-28T15:03:07.193
> 
> 标签：java, event-handling, esper, complex-event-processing

我正在编写一个基于 Java 的 Web 服务器监控应用程序，它应该能够检测用户何时在特定时间范围内以特定顺序浏览给定的一组页面。为此，我正在使用[Esper 库](http://esper.codehaus.org/)。我对查询的最佳表述有一些疑问。

我首先声明了一个“访问”对象，用于存储到达我的 Web 服务器的 HTTP 请求的所有信息。每当向服务器发出新请求时，都会实例化一个新的 Access 对象并将其作为事件发送到 EPL 处理核心。

假设我想跟踪浏览页面 A、页面 B 和页面 C 的所有用户。处理这种情况的最佳方法是什么？我是否需要执行多个连接，每个转换一个，如下例所示？

```
select * from Access(request='GET /A HTTP/1.1').win:time(30 sec) as a1,
Access(request='GET /B HTTP/1.1').win:time(30 sec) as a2, 
Access(request='GET /C HTTP/1.1').win:time(30 sec) as a3
where a1.IP=a2.IP AND a2.IP=a3.IP 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T05:39:39.750

```
select * from pattern[ every
    a=pageA ->
    b=pageB(a.IP=b.IP) ->
    c=pageC(a.IP=b.IP and c.IP=b.IP) within timer.interval(30s)]; 
```

如果您想按特定顺序获得，希望这可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T15:49:50.577

当订单未定义时使用连接，即用户可以按任意顺序浏览A/B/C。

使用模式（EPL 或基于正则表达式的匹配识别）来检测特定顺序。

# php - Apache mod_deflate 和 zlib.output_compression

> ID：13608079
> 
> 赞同：2
> 
> 时间：2012-11-28T15:03:09.667
> 
> 标签：php, apache

Apache mod_deflate 已经为我的站点启用，我可以`zlib.output_compression`在 PHP.INI 中启用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T15:20:53.113

如果您离开 zlib.output_compression，PHP 文件将使用此压缩，而 mod_deflate 的效率并不高。因此 apache 将压缩所有其他文件，但不压缩 php，而 zlib 将压缩 php 文件。没有必要同时使用它们。如果你感兴趣的是加速你的 php 代码，你总是可以使用 Xcache 来保持 php 文件的预编译。

# c# - 如何从类文件中获取会话变量？

> ID：13608080
> 
> 赞同：3
> 
> 时间：2012-11-28T15:03:11.247
> 
> 标签：c#, asp.net, vb.net, socialauth

任何熟悉 SocialAuth.NET 的人？请点击此链接查看[SocialAuth.NET](http://code.google.com/p/socialauth-net/)。与许多提供商无缝集成，例如 Facebook、Twitter、Google 等。

好了，介绍够了。现在，`SocialAuth.NET`将所有内容存储在会话中。例如，要获取我们调用的 Facebook 用户 ID `SocialAuthUser.GetCurrentUser.GetProfile.ID`，因为它是基于会话的，所以当我尝试从 Web 服务或类文件调用时，我会收到此错误消息**“对象引用未设置为对象的实例” 。**`SocialAuthUser.GetCurrentUser.GetProfile.ID`

知道如何让它在类文件中为我工作吗？非常感谢任何帮助。

如果这`System.Web.HttpContext.Current.Session("NameHere")`是我应该使用的……大括号里应该放什么？

更新：请不要将此问题标记为**Duplicate**。我看过这个[问题](https://stackoverflow.com/questions/621549/how-to-access-session-variables-from-any-class-in-asp-net)，不确定这是否是我应该做的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T18:19:04.080

我为进行这些调用的类实现了[IRequireSessionState 。](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.irequiressessionstate.aspx)这是为了让班级知道当前的会话状态。

# c# - 在 C# 中将图像或文本转换为指向另一个页面的链接

> ID：13608081
> 
> 赞同：-3
> 
> 时间：2012-11-28T15:03:13.840
> 
> 标签：c#, wpf, xaml

我可以将图像或文本转换为链接以导航到 C# 中同一项目中的另一个页面吗？如果是这样，请告诉我。我似乎无法弄清楚该怎么做。问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:30:16.937

Wpf 支持[NavigationService](http://msdn.microsoft.com/en-us/library/system.windows.navigation.navigationservice.aspx)，可用于在页面之间[导航](http://msdn.microsoft.com/en-us/library/ms750478.aspx)但我从不使用它，通常[MVVM 模式](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)是最好的方法，你可以[在这里找到示例项目](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T15:28:26.493

您不能只制作图像或文本字段并对其执行单击命令吗？

然后在点击命令中打开相应的页面。

# c# - ASMX Web 服务返回 HTML 标记

> ID：13608084
> 
> 赞同：1
> 
> 时间：2012-11-28T15:03:30.077
> 
> 标签：c#, web-services, asmx

我有一系列 Web 服务，当遇到身份验证问题时，我需要返回一个空响应。我将身份验证代码包装在 try 块中，catch 块如下所示：

```
 HttpContext.Current.Response.Clear();
    HttpContext.Current.Response.StatusCode = (int)HttpStatusCode.Forbidden;
    HttpContext.Current.Response.End(); 
```

此代码在我的开发环境中按预期工作，但是一旦遇到身份验证问题时部署它，它就会返回默认的 403 错误页面标记，它甚至没有包含在任何东西中，它只是纯 HTML 标记。环境之间的配置是相同的。有人知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T19:58:47.863

终于能够在 system.webserver 部分下的 web.config set < httpErrors existingResponse="PassThrough"> 中得到一个空响应。

# javascript - 如何覆盖事件并仍然执行旧事件？

> ID：13608087
> 
> 赞同：1
> 
> 时间：2012-11-28T15:03:32.850
> 
> 标签：javascript, oop, events, dom-events

我正在寻找覆盖事件并仍然执行它的操作。

意思是这样的：

```
var oldOnError = window.onerror;
window.onerror = function(msg, url, line) {
 oldOnError();
}; 
```

现在这将被执行，**但是**，`onerror`事件可以接受几个参数，我不知道也不知道有哪些。

所以 ：

*   有一个简单的解决方案吗？
*   如果没有，我怎么知道`oldOnError`期望得到什么参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:09:50.067

为什么不使用 addEventListener()

```
var listener = function(msg, url, line) {
 // your code
};

if (window.addEventListener) {
    window.addEventListener('error', listener, false);
} else if ( window.attachEvent ) { // for versions previous to IE9
    window.attachEvent( 'onerror', listener );
} 
```

这样您就不会覆盖现有的事件侦听器。

要注意的另一件事是，即使您指定了 3 个参数，您的函数在调用时也会传递一个事件对象。所以实际上你的函数应该定义如下。

```
var listener = function( event ) {
    // your code
} 
```

[**在此处**](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener)查看MDN 站点以获取更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-17T19:43:35.353

您可以做的一件事是使用 apply 方法和 arguments 变量：

[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions_and_function_scope/arguments](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions_and_function_scope/arguments) [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function /申请](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/apply)

```
var oldOnError = window.onerror;
window.onerror = function(msg, url, line) {
    oldOnError.apply(window, arguments);
}; 
```

但正如@Bruno 所说，无论如何都应该只将一个参数传递给处理程序（事件）。

# javascript - 如果选择字段发生更改，如何运行一段代码（js/jquery）

> ID：13608088
> 
> 赞同：0
> 
> 时间：2012-11-28T15:03:32.930
> 
> 标签：javascript, jquery, select

我已经用 jquery 构建了一个选择字段样式插件，这很好用，但是一些用户正在使用 js/jquery 向选择字段添加新选项，所以我需要一种插件自动更新它的方法。我不想重新调用插件，有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:08:51.277

```
 $(selector).change(function(){
     // do something when select is changed
     alert( $(this).val() );
  }); 
```

# exception-handling - 有没有办法获得 SSIS 可以引发的所有异常消息的列表

> ID：13608090
> 
> 赞同：0
> 
> 时间：2012-11-28T15:03:34.940
> 
> 标签：exception-handling, ssis

我需要将 SSIS 异常消息转换为用户可以理解的消息。这些消息是否在任何地方定义？

如何[将此](http://msdn.microsoft.com/en-us/library/ms345164%28v=sql.105%29.aspx)消息列表下载到我的 sql 表中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:31:55.413

我使用宏来构建 2008 错误消息。你在找这样的东西吗？[表格格式的 SSIS 错误列表](http://billfellows.blogspot.com/2011/08/ssis-error-list-in-tabular-format.html)

# html5-video - Html5 视频不可搜索

> ID：13608092
> 
> 赞同：0
> 
> 时间：2012-11-28T15:03:43.440
> 
> 标签：html5-video, mp4, flowplayer

我真的不知道这是一个 SO 问题还是 SF 问题。

我正在使用 flowplayer 5.2.0。该视频已准备好使用 ffmpeg 进行流式传输（moov 移动到文件头，使用 h.264 等进行编码）。但是，使用 debug: true 选项我看到以下输出：

```
Object {url: "http://188.254.8.34/video/2012/03/20/jvk6abVbQog.mp4", seekpoints: Array[20], src: "http://188.254.8.34/video/2012/03/20/jvk6abVbQog.mp4", width: 1280, seekable: false…} 
```

此媒体文件不可搜索。但：

```
debug.metadata Object {videoframerate: 25, seekpoints: Array[20], audiocodecid: "mp4a", moovposition: 40, audiochannels: 2…} 
```

有一些搜索点。

我应该怎么做才能使这个文件可搜索？

Mp4 由带有 mp4 模块的 nginx 提供服务——支持范围请求。

*编辑*：

我有一个假设，我需要按关键帧对 mp4 进行分段。但我不知道如何使用 ffmpeg v.>0.8 来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:13:40.343

看起来 flowplayer（它是非 Flash 版本）不支持 HTTP 渐进式下载。但是，它的 Flash 版本可以。

# c# - 无法分配从后台工作人员返回的 ListView

> ID：13608094
> 
> 赞同：0
> 
> 时间：2012-11-28T15:03:46.130
> 
> 标签：c#

我有一个到目前为止运行良好的列表视图。我遇到的问题是，当我正在考虑添加 1000 多个项目时，有时需要几秒钟来填充。

所以我决定用 BackgroundWorker 填充 ListView，但我遇到的问题是我无法在 BackgroundWorker 线程上使用 UI 线程中的控件。

为了解决这个问题，我编写了您在下面看到的代码。我知道返回的 ListView 充满了项目，但是当我将它分配给我的表单中的 ListView 组件时，什么都没有显示，我不知道为什么。

在我开始拍自己之前请帮助我:)

```
public ListView listImages(string path, BackgroundWorker worker)
{
    ListView lv = new ListView();
    lv.Items.Clear();
    int count = 0;
    int total = 0;
    string[] extensions = new string[] { ".jpg", ".JPG", ".png", ".PNG", ".bmp", ".BMP" };
    lv.Columns.Add("Filename", 300);
    lv.Columns.Add("Date taken", 150);
    lv.Columns.Add("Size", 150);
    DirectoryInfo dir = new DirectoryInfo(path);
    IEnumerable<FileInfo> files = dir.EnumerateFiles("*.*", SearchOption.AllDirectories).Where(f => extensions.Contains(f.Extension));
    total = files.Count();
    foreach (FileInfo f in files)
    {
        DateTime dt = File.GetCreationTime(Path.Combine(f.Directory.ToString(), f.Name));
        string fsize = FormatBytes(f.Length);

        count++;
        ListViewItem lSingleItem = lv.Items.Add(f.Name);

        lSingleItem.SubItems.Add(dt.ToString("dd MMMM yyyy"));
        lSingleItem.SubItems.Add(fsize);
        lSingleItem.Tag = Path.Combine(f.Directory.ToString(), f.Name);

        worker.ReportProgress((count * 100) / total);
    }
    return lv;
}

private void buttonLeftBrowse_Click(object sender, EventArgs e)
{
    if (_bwListImages.IsBusy != true)
    {
        pgf = new ProgressBarForm();

        if (folderBrowserDialog.ShowDialog() == DialogResult.OK)
        {
            string path = folderBrowserDialog.SelectedPath;
            this.textBoxLeftFolder.Text = path;
            object[] parameters = new object[] { path };

            _bwListImages.RunWorkerAsync(parameters);
            pgf.ShowDialog();
       }
    }
}

private void _bwListImages_DoWork(object sender, DoWorkEventArgs e)
{
    BackgroundWorker worker = sender as BackgroundWorker;
    object[] parameters = e.Argument as object[];
    resetViewsColor();
    disableButtons();

    e.Result = core.listImages((string)parameters[0], worker);

    checkButtons();
}

private void _bwListImages_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
    pgf.progressBar.Value = e.ProgressPercentage;
}

private void _bwListImages_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
    listViewLeft = (ListView)e.Result;
    pgf.Close();
} 
```

谢谢克鲁兹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:07:04.187

我怀疑问题可能是您正在`ListView`后台线程中创建`ListView`.

也许使用后台线程只返回项目列表，并将它们分配给`ListView`UI 线程。

您的后台工作者工作方法应该返回一个`List<string>`文件名，并且在后台工作者完成事件中，您应该使用`ListView.Items.Addrange`将文件名添加到`ListView`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T15:07:23.683

什么是`listViewLeft`？我猜是`ListView`吗？`listViewLeft.ItemsSource`您应该在`wpf`或`listViewLeft.DataSource`在 的情况下分配`winform`，但不是`ListView`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T06:27:51.570

正如Rotem指出的那样，您可以通过在工作线程中引发事件（例如AssignListview）来做到这一点，然后您可以通过以下方式将调用委托给实际分配 this.BeginInvoke((MethodInvoker)delegate { ActualAssignmentFunction(); }) ;

实际分配函数（）；在 UI 线程中执行。

# css - 使用 ajax 重新加载模态时丢失 css

> ID：13608098
> 
> 赞同：1
> 
> 时间：2012-11-28T15:04:04.850
> 
> 标签：css, ruby-on-rails, ajax, forms

我有一个模态表单，当它包含验证错误时不会提交。如果提交失败，我会在我的表单中使用 :remote => true 重新加载模式和这个 javascript：

```
$('#modal-treating').html('<%= escape_javascript(render('treating_form')) %>'); 
```

不幸的是，在重新加载模态表单时，我失去了原始模态表单中的所有 css（javascript 只是重新加载相同的模态表单）。我需要在我的 javascript 中添加什么以确保我的样式不会丢失？我听说过 .live() 和 .die() 函数，但我不确定这是如何工作的，或者为什么。

谢谢你。

编辑（treating_form 部分。它不是 DRY，但我只是在测试它）：

```
<% if current_user %>
  <%= simple_form_for(@treating, :action => 'new', :remote => true)  do |f| %>

    <% if @treating.errors.any? %>

      <div id="modal-treating">
        <div class="modal-header">
          <h3><%= @user.first_name + " " + @user.last_name[0] + "." %></h3>
          <p>
            <% if @user.picture_url %>
              <%= image_tag(@user.picture_url, :size => "30x30") %>
            <% else %>
              <%= image_tag('smiley_small.png', :size => "30x30") %>
            <% end %> 
            <%= @user.headline %>
          </p>
        </div>

        <div class="modal-body">
          <div class="row-fluid">
            <form action="#" class="span12">
              <label for="treating-message"><h5>Introduce yourself to <%= @user.first_name %> (sample introductions):</h5></label>

              <%= f.hidden_field :requestee_id %>

              <div class="control-group">
                <%= f.label :intro, "Introduce yourself to " + @user.first_name + ":" %>
                <%= f.input :intro, :input_html => { :id => "treating-message", :class => "span12" } %>
              </div>

              <label for="treating-date-time">When?</label>
              <div class="control-group">
                <%= f.simple_fields_for :t_date_times_attributes do |t_date_time| %>
                  <%= t_date_time.simple_fields_for :"0" do |zero| %>
                    <%= zero.input :date, :input_html => { :class => "input-small datepicker" } %>
                    <%= zero.input :time, :input_html => { :class => "timepicker input-small" } %>
                  <% end %>
                <% end %>
              </div>

              <%= f.simple_fields_for :proposed_venues_attributes do |venue| %>
                <%= venue.simple_fields_for :"0" do |zero| %>
                  <%= zero.input :foursquare_id, :input_html => { :class => 'bigdrop', :id => 'e7' } %>
                <% end %>
              <% end %>

            </form>
          </div>
        </div>

        <div class="modal-footer">
            <div class="field">
            <a href="#" class="btn btn-link" data-dismiss="modal">Close</a>
            <%= f.submit "Send", id: "send-button" %>
            </div>
        </div>

      </div>

    <% else %>

      <div id="modal-treating" class="modal hide fade">
      <div class="modal-header">
        <h3><%= @user.first_name + " " + @user.last_name[0] + "." %></h3>
        <p>
          <% if @user.picture_url %>
            <%= image_tag(@user.picture_url, :size => "30x30") %>
          <% else %>
            <%= image_tag('smiley_small.png', :size => "30x30") %>
          <% end %> 
          <%= @user.headline %>
        </p>
      </div>

      <div class="modal-body">
        <div class="row-fluid">
          <form action="#" class="span12">
            <label for="treating-message"><h5>Introduce yourself to <%= @user.first_name %> (sample introductions):</h5></label>

            <%= f.hidden_field :requestee_id %>

            <div class="control-group">
              <%= f.label :intro, "Introduce yourself to " + @user.first_name + ":" %>
              <%= f.input :intro, :input_html => { :id => "treating-message", :class => "span12" } %>
            </div>

            <label for="treating-date-time">When?</label>

              <div class="control-group">
                <%= f.simple_fields_for :t_date_times_attributes do |t_date_time| %>
                  <%= t_date_time.simple_fields_for :"0" do |zero| %>
                    <%= zero.input :date, :input_html => { :class => "input-small datepicker" } %>
                    <%= zero.input :time %>
                  <% end %>
                <% end %>
              </div>

            <%= f.simple_fields_for :proposed_venues_attributes do |venue| %>
              <%= venue.simple_fields_for :"0" do |zero| %>
                <%= zero.input :foursquare_id, :input_html => { :class => 'bigdrop', :id => 'e7' } %>
              <% end %>
            <% end %>

          </form>
        </div>
      </div>

      <div class="modal-footer">
          <div class="field">
          <a href="#" class="btn btn-link" data-dismiss="modal">Close</a>
          <%= f.submit "Send", id: "send-button" %>
          </div>
      </div>

    </div>

    <% end %>
  <% end %>
<% end %> 
```

并从我的控制器：

```
def create

    @treating = current_user.sent_treatings.build(params[:treating])
    @user = @treating.requestee

    if params[:treating][:proposed_venues_attributes][:"0"][:foursquare_id] != ""
      build_proposed_venue_by_id(@treating,params[:treating][:proposed_venues_attributes][:"0"][:foursquare_id])
    end

    respond_to do |format|
      if @treating.save
        format.js { render :js => "window.location.replace('#{url_for(:controller => :treatings, :action => :index)}');" }
      else 
        format.html { render :action => "new" }
        format.xml  { render :xml => @treating.errors, :status => :unprocessable_entity }
        format.js { render 'modal_error' }
      end
    end

  end 
```

（modal_error 是我在问题顶部的 javascript 文件）。

谢谢你

# php - 在for循环期间将文件输入ID存储在变量中| PHP

> ID：13608104
> 
> 赞同：2
> 
> 时间：2012-11-28T15:04:22.393
> 
> 标签：php, html, file, file-upload, for-loop

我正在使用以下 HTML 和 PHP 代码将多个图像移动到我的服务器。

**有没有办法使用我的代码将特定的输入元素与上传的文件相关联？**

所以在我**的 for 循环**中，我可以发现“ **image_22** ”中的图像何时被处理。这可以使用我当前的代码吗？

梦幻世界会将值**“image_22”**存储在变量**$imageNum 中**:-)

这是我目前正在使用的一个片段......

**HTML：**

```
<input id="image_22" name="images[]" type="file"  />
<input id="image_8" name="images[]" type="file"  />  
... 
```

**PHP：**

```
<?php
    if (isset($_POST['Submit'])) {
    $number_of_file_fields = 0;
    $number_of_uploaded_files = 0;
    $number_of_moved_files = 0;
    $uploaded_files = array();
    $upload_directory = dirname(__file__) . '/uploaded/'; //set upload directory

    /**
     * we get a $_FILES['images'] array ,
     * we procee this array while iterating with simple for loop
     * you can check this array by print_r($_FILES['images']);
     */
    for ($i = 0; $i < count($_FILES['images']['name']); $i++) {
        $number_of_file_fields++;
        if ($_FILES['images']['name'][$i] != '') { //check if file field empty or not
            $number_of_uploaded_files++;
            $uploaded_files[] = $_FILES['images']['name'][$i];
            if (move_uploaded_file($_FILES['images']['tmp_name'][$i], $upload_directory . 
    $_FILES['images']['name'][$i])) {
                $number_of_moved_files++;
            }

        }

    }
    echo "Number of File fields created $number_of_file_fields.<br/> ";
    echo "Number of files submitted $number_of_uploaded_files . <br/>";
    echo "Number of successfully moved files $number_of_moved_files . <br/>";
    echo "File Names are <br/>" . implode(',', $uploaded_files);
    }
    ?> 
```

谢谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T15:07:16.850

在您的 HTML 中，只需将该值包含在`[]`.

```
<input id="image_22" name="images[22]" type="file"  />
<input id="image_8" name="images[8]" type="file"  /> 
```

在您的循环中，使用 with index 代替增量 for 循环，`foreach`这是 PHP 中比增量类型更常见的模式。将`$index`是 中提供的数字`[]`：

```
// Loop over the ['name'] key in $_FILES['images'] to get all the named indexes
foreach ($_FILES['images']['name'] as $index => $filename) {

  if ($filename != '') {
     // not empty...
     $number_of_uploaded_files++;

     // Check for validity (see below)...

     // Use the name concatenated with _$index to supply store the index with the filename
     $uploaded_files[] = $filename . "_$index";
     if (move_uploaded_file($_FILES['images']['tmp_name'][$index], $upload_directory . $filename . "_$index")) {
       // successful rename
       $number_of_moved_files++;
     }
  }
} 
```

请注意，您的脚本目前容易受到路径注入攻击。您必须过滤`name`每个文件的内容，以防止包含`../`可能强制将文件保存在文件系统上的任何位置（可由 Web 服务器写入）的内容！建议使用可接受值的正则表达式检查名称：

```
// Verify that the uploaded filename contains only letters, numbers, hyphen, underscore, space before the `.` and letters only after the `.`
// You could also insist that it end in `.(jpg|gif|png)` or whatever your acceptable formats are
// Most important is to prevent things like `../`
if (preg_match('/^[a-z0-9_- ]+\.[a-z]+$/i', $filename)) {
  // It's an ok filename
} 
```

# c# - 如何在实体框架插入上使用 SqlFunctions.SoundCode？

> ID：13608105
> 
> 赞同：3
> 
> 时间：2012-11-28T15:04:23.157
> 
> 标签：c#, entity-framework

我正在尝试使用 Entity Framework 将一个对象插入到我的数据库中，其中两个属性表示 SQL Server soundex 函数的结果，但我找不到任何指向正确方向的东西。

我的代码的一个大大简化的示例：

C# 对象

```
public class Person{
    string FirstName
    string LastName
    string FirstNameSE
    string LastNameSE
} 
```

表结构：

```
FirstName   varchar(50)
LastName    varchar(50)
FirstNameSE varchar(4)
LastNameSE  varchar(4) 
```

插入方法

```
public static void InsertIntoDatabase(Person vPerson){
    using (var db = new DatabaseContext()) {
        db.People.Add(vPerson);
        db.SaveChanges();
    }
} 
```

这可行，但我需要将 FirstNameSE 和 LastNameSE 分别设置为 soundex(FirstName) 和 soundex(LastName)，我无法弄清楚如何在插入时执行此操作。

我发现了如何在 LINQ to Entities 选择语句中使用 SqlFunctions 类，但是当我尝试插入数据时这对我没有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T15:21:59.417

我想你可能会被困在几次往返旅行中。这样的事情可能就足够了（为简洁起见，省略了错误处理）：

```
public static void InsertIntoDatabase(Person vPerson){
    using (var db = new DatabaseContext()) {
        var soundExQuery = db.People.Select(p => 
              new { 
                      FirstNameSE = SqlFunctions.SoundCode(vPersion.FirstName), 
                      LastNameSE = SqlFunctions.SoundCode(vPersion.LastName) 
            }
        ).Take(1);

        var result = soundExQuery.ToArray();

        vPerson.FirstNameSE = result[0].FirstNameSE;
        vPersion.LastNameSE = result[0].LastNameSE;
        db.People.Add(vPerson);
        db.SaveChanges();
    }
} 
```

进行一次往返以获取声音代码，然后插入它们。

是的，它不是很干净，但我认为您唯一的其他选择是直接使用 SQL。

```
db.ExecuteStoreCommand(
    @"INSERT INTO People (FirstName, LastName, FirstNameSE, LastNameSE) 
    VALUES ({0}, {1}, SOUNDEX({0}), SOUNDEX({1}))"
    , vPerson.FirstName, vPerson.LastName); 
```

请注意，`ExecuteStoreCommand`会自动执行 SQL 参数化。（它不是一个`string.Format`）。

[http://msdn.microsoft.com/en-us/library/system.data.objects.objectcontext.executestorecommand.aspx](http://msdn.microsoft.com/en-us/library/system.data.objects.objectcontext.executestorecommand.aspx)

# sql - SQL 代码（SSRS 2008 版）

> ID：13608107
> 
> 赞同：1
> 
> 时间：2012-11-28T15:04:32.060
> 
> 标签：sql, ssrs-2008

我需要在 SQL 中编写以下内容：

我有一个表，其中包含我感兴趣的 2 列（ID、文本字段）。每个 ID 在文本字段中可能有几个值。

```
ID   TEXT
1   value1
1   value2
2   value1
2   value2
2   value4 
```

我需要创建一个列出以下内容的报告

```
ID     value1        value2       value3        value4         etc.  
1        yes          yes
2        yes          yes                        yes 
```

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:25:59.883

```
SELECT 
   ID, 
   Value1 = MAX(case WHEN [Text] = 'Value1' THEN 'yes' ELSE '' END),
   Value2 = MAX(case when [Text] = 'Value2' THEN 'yes' ELSE '' END),
   Value3 = MAX(case when [Text] = 'Value3' Then 'yes' ELSE '' END)
GROUP BY
   ID 
```

# mysql - SqlAlchemy 用 ORM 截断表

> ID：13608116
> 
> 赞同：14
> 
> 时间：2012-11-28T15:04:42.313
> 
> 标签：mysql, orm, sqlalchemy

我一直在为我的应用程序使用orm，并且在不同dbms之间切换时尽量不要使用sql以避免sql语法错误。

目前我正在使用 sqlite 和 mysql 进行测试。我想删除一个我们可以使用的表：

`db.session.query(models.MyTable).delete()`

不幸的是，这种方法并没有真正“截断”表格，因为它不会将自动增量的计数重置为 0。

无论如何要在 SqlAlchemy orm 中进行真正的截断？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T15:31:22.610

SQLAlchemy`delete(...)`方法被翻译成 SQL`DELETE FROM`查询。此查询*不会*重置任何 AUTO_INCREMENT 计数器。要重置 MySQL 中的计数器，您必须运行如下查询：

```
ALTER TABLE tbl AUTO_INCREMENT = 100; 
```

如果我没记错的话，它在 SQLAlchemy 中没有类似物。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-16T20:19:39.663

由于没有`truncate()`操作，sqlalchemy 中用于从表中删除所有条目并重置自动增量计数的简单解决方法是删除并重新创建表，如下所示：

```
Base.metadata.drop_all(engine, tables=[YourTable.__table__])
Base.metadata.create_all(engine, tables=[YourTable.__table__]) 
```

（有关删除表的替代 sqlalchemy 语法示例，请查看此[stackoverflow 帖子](https://stackoverflow.com/questions/35918605/how-to-delete-a-table-in-sqlalchemy)）

# c# - 如果课程尚未完成/测试 - 添加诸如过时之类的信息？

> ID：13608117
> 
> 赞同：3
> 
> 时间：2012-11-28T15:04:43.330
> 
> 标签：c#, class

我看到如果不推荐类/方法或将很快删除，人们可以添加 Obsolete。

```
[Obsolete("Crap, dont use it, we have something better", true)] 
```

有未完成/未经测试的课程吗？我的意思是我在这里有一堂课，这堂课很快就会做很多好东西，每个人都应该使用它——它还没有完成。另一个已完成但未 100% 测试的课程。我可以添加类似的内容：

```
[Whatever("not tested yet... whatever", true)] 
```

或者我还能选择什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T15:23:23.053

.NET 框架中没有诸如 a`[WillBeAvailableSoon]`或`[Untested]`or之类的属性。`[Whatever]`正如 Paolo 所提到的，最好的办法是在完全实施和测试后发布该类。

但是，您可以使用`ObsoleteAttribute`自定义文本以不会产生编译器错误但仍会产生警告的方式使用：

```
[Obsolete("This method is untested and will be stable after Release 1.2", false)]
public void DoSomething()
{
    throw new NotImplementedException();
} 
```

虽然我个人强烈建议听从保罗的建议......

鉴于您的代码在某个源代码控制系统中，您无需担心任何人使用您的不稳定代码。签入的所有内容都应该编译干净，但不需要完全实现或测试。希望您的队友知道您在做什么，并且您可能会签入不稳定的代码，以使您的同事能够在您一夜之间生病或类似情况时继续您的工作......

# ruby-on-rails - 当我执行 heroku toolbelt 安装的 'pik add' ruby 192 时出错

> ID：13608119
> 
> 赞同：0
> 
> 时间：2012-11-28T15:04:45.900
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, pik

我安装了 pik 并放入了 ruby​​ 187 和 193。然后我安装了 Heroku toolbel 来加载我的应用程序，它会自动将 ruby​​ 192 安装在：

```
C:\Program Files (x86)\ruby​​-1.9.3\bin 
```

但我不能将它添加到 pik ......我尝试这样做和类似的：

```
pik add C:\Program Files (x86)\ruby​​-1.9.3\bin 
```

但控制台给了我错误：

```
could not find a ruby version at C:\Program 
```

可能是命令空格有问题，我找不到解决方案！使用 'where ruby​​' 控制台返回：

```
C:\Program Files (x86)\ruby​​-1.9.3\bin\ruby.exe
C:\Ruby193\bin\ruby.exe
C:\Ruby187\bin\ruby.exe 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:08:47.010

错误消息表明，pik 尝试添加“C:\Program”，这意味着它不喜欢路径中的空格。您可能需要在引号中给出路径，如下所示：

```
pik add "C:\Program Files (x86)\ruby​​-1.9.3\bin" 
```

# c# - 一分钟后无人值守模式更改为挂起

> ID：13608120
> 
> 赞同：0
> 
> 时间：2012-11-28T15:04:48.120
> 
> 标签：c#, .net, windows-mobile, windows-ce, power-management

在我的应用程序（C#、.Net CE 3.5、WM 6.5）中，我有一个与 Web 服务同步的线程。如果设备进入空闲模式，我希望线程继续运行。所以我使用一些 Windows CE API，以无人值守模式运行我的线程，并在此过程中保持 WiFi 开启。[（来自这里](https://stackoverflow.com/questions/873816/keep-windows-mobile-app-running-in-standby-mode)的 API ）。这完美地工作并且系统进入待机状态而不是挂起并且使用WiFi运行的线程处于打开状态。但待机 1 分钟后，设备进入暂停模式并停止执行。

```
Win32.CoreDLL.PowerPolicyNotify(Win32.PPNMessage.PPN_UNATTENDEDMODE, -1);
IntPtr wifiHabdle= Win32.CoreDLL.SetPowerRequirement(wifiDeviceName,  CEDEVICE_POWER_STATE.D1, DevicePowerFlags.POWER_NAME | DevicePowerFlags.POWER_FORCE, IntPtr.Zero, 0);

//Connect to web service and do jobs ...

Win32.CoreDLL.ReleasePowerRequirement(wifiHabdle);
Win32.CoreDLL.PowerPolicyNotify(Win32.PPNMessage.PPN_UNATTENDEDMODE, 0); 
```

当我更改设备上的电源配置并将“如果设备未使用时关闭屏幕”设置为 2 分钟，无人值守模式变为暂停前 2 分钟。（奇怪的关系）。
只要我打电话，我如何强制设备保持无人值守模式`PowerPolicyNotify(Win32.PPNMessage.PPN_UNATTENDEDMODE, 0)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T19:09:05.457

AFAIK 您还需要为您的应用程序使用 SetPowerRequirement 和/或定期使用 SystemIdleTimerReset：[http ://www.brianpeek.com/category/Windows-Mobile](http://www.brianpeek.com/category/Windows-Mobile)

虽然，过去我没有成功使用 SystemIdleTimerReset 而是将电池电源管理的超时更改为永不挂起并直接控制电源需求（请求无人值守模式）。

# c# - 使用国际字符的 PGP 加密

> ID：13608121
> 
> 赞同：1
> 
> 时间：2012-11-28T15:04:48.787
> 
> 标签：c#, asp.net, encoding, pgp

我有一个用 C# 构建的 Web 应用程序，它根据用户输入信息创建一个 txt 文件。然后通过命令行工具将此 txt 文件转换为应用程序中的 PGP。

如果用户输入国际字符，则在解密 PGP 文件时会更改这些字符。
例如。如果用户输入：“ó”，在我解密 PGP 后，它会转换为“Ã³”。

创建的 txt 文件中包含正确的字符，但在转换回 txt 时却没有。我想这是一个编码问题，但我不确定要尝试什么。

这就是我的代码的样子：

```
//Create the text file
            using (StreamWriter sw = File.CreateText(filePath + fileName)) //Create text file 
            {
                sw.Write(bodyText); //Add body text to text file.
            }
//PGP Encrypt
            using (Process cmd = new Process()) //Open the pgp command line tool and start it using the arguments.
            {
                cmd.StartInfo.WorkingDirectory = "C:\\Program Files\\PGP Corporation\\PGP Command Line\\";
                cmd.StartInfo.UseShellExecute = false;
                cmd.StartInfo.FileName = "pgp.exe";
                cmd.StartInfo.Arguments = arguments;
                cmd.StartInfo.CreateNoWindow = true;
                cmd.StartInfo.RedirectStandardInput = true;
                cmd.StartInfo.RedirectStandardOutput = true;
                cmd.StartInfo.RedirectStandardError = true;
                cmd.Start();
                cmd.WaitForExit();
                cmd.Close();
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:20:53.803

您的 PGP 解密工具似乎将文件解释为 UTF-8 编码。所以尝试将文件写入UTF-8编码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:42:07.600

**编辑：**实际上，用 BOM 写入文件对我来说更有意义`sw.Write`，但 PGP 解密可能不会，所以如果你用记事本打开，当没有 BOM 时默认为 Windows-1252？如果是这种情况，您可以尝试使用 C# 读取解密文件，并在打开文件时将编码指定为 UTF8。

我发现的`Ã`字符通常来自`Encoding.GetEncoding(1252)`被解释为 UTF8 的 Windows-1252，反之亦然。一些较旧的程序将默认使用它，或者来自网络资源，因此问题可能比您的 PGP 加密更严重。

尝试将文件写为 Windows-1252（也许 PGP 实际上默认为 Windows 上的那个），或者确保当你写出文件时它有一个UTF8的[BOM](http://en.wikipedia.org/wiki/Byte_order_mark)

# php - selected.js 多选，使用 php 数组填充选择的下拉列表

> ID：13608125
> 
> 赞同：1
> 
> 时间：2012-11-28T15:04:49.440
> 
> 标签：php, database, jquery-chosen

我一直在为一个项目使用选择，并且要克服最后一个障碍，选择的工作很好，并且能够使用以下方法对返回的数组进行内爆...

```
<select name="uassociations[]" data-placeholder="Choose Associations"   value="$associations" class="chzn-select" multiple style="width:350px;" tabindex="4"> 
```

并使用...提取返回的数组

```
$imp_associations = implode(",", $associations); 
```

但我想从使用逗号分隔的数据库中填充所选的多项选择，我可以用 epxlode 字符串但不能让它填充所选的框:(

任何人都可以为我阐明这一点，因为它确实没有记录得那么好

尝试了以下..

```
$imp_associations = implode(",", $associations); 
```

并尝试在 html 中添加 this

```
value="$associations 
```

任何帮助或指导都会很棒；）

# c++ - 无法将文件读入 char 数组（一些指针问题，像往常一样）

> ID：13608126
> 
> 赞同：1
> 
> 时间：2012-11-28T15:04:52.817
> 
> 标签：c++, arrays, pointers, crash, char

是的，我有这种问题，因为我总是很难遵循指针操作。所以，我有这个简单的代码：

```
struct myfile {
    char* name;
    char* content;
    long size;
};

myfile this_file;

int main() {
    read();
    return 0;
}

void read() {
    output("Please, specify file name: ");
    cin >> (this_file.name = new char);
    FILE *stream;
    stream = fopen(code.name, "r");
    if (stream != NULL) {
        fseek(stream , 0, SEEK_END);
        myfile.size = ftell(codefile);
        myfile.content = new char[myfile.size];
        fseek(myfile, 0, SEEK_SET);
        if ((fread(myfile.content, 1, myfile.size, stream)) == 0) {
            fclose(codefile);
            cout << "File is empty!\n");
        }
    }
 } 
```

它正确地获取了文件的名称，它获取了内容的大小，但是当尝试为`content`成员分配空间时，程序崩溃了，我知道这是一些指针问题，但是像往常一样，不记得/弄清楚什么是吗。到达此行时崩溃：`myfile.content = new char[myfile.size];`

我再次需要你的帮助。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T15:08:26.203

这导致缓冲区溢出：

```
cin >> (this_file.name = new char); 
```

因为`operator>>()`它将消耗下一个空白字符的字符并写入`this_file.name`只有足够空间容纳单个字符的字符。

使用[`std::string`](http://en.cppreference.com/w/cpp/string/basic_string)（而不是`char*`）与[`std::getline()`](http://en.cppreference.com/w/cpp/string/basic_string/getline)：

```
std::string name;
if (std::getline(cin, name))
{
    // Use 'name'.
} 
```

如果您正在调查指针，则需要分配一个数组`char`并防止读取超出分配的数组：

```
this_file.name = new char[32];
if (cin.getline(this_file.name, 32))
{
} 
```

记住 to`delete`和`delete[]`什么是`new`or `new[]`。

有一种替代方法可以`std::string`使用流将文件的内容读入。请参阅[在 C++ 中将整个文件读入 std::string 的最佳方法是什么？](https://stackoverflow.com/questions/116038/what-is-the-best-way-to-slurp-a-file-into-a-stdstring-in-c).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T15:17:39.963

*要清楚这是告诉你指针问题，你不应该在任何生产代码中使用这样的指针，使用字符串或向量，这就是他们的用途！*

这一行：- cin >> (this_file.name = new char); 是不是有点……奇怪

虽然这样做是合法的，但任何有经验的 c++ 编程都会对此感到惊讶。

另外，您只分配一个字符，足以存储终止空字符，但没有实际文本。

做这样的事情 -

```
this_file.name = new char[100];
cin >> this_file.name; 
```

正如其他人所说，除了学习之外不要在现实生活中这样做，你必须猜测输入会有多大，如果用户发送更多它会破坏事情。您在浏览器中读到的所有那些安全漏洞等等？他们就是这样发生的！:)

这段代码似乎还有其他问题，例如创建一个名为 this_file 的变量，然后显然希望它在下一部分被称为“代码”，因此它需要更多地修复这个指针问题。

另外，请记住“delete[] this_file.name”在最后释放内存。如果您真的想在这里使用自己的内存分配，最好还是使用 std::unique_ptr 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T15:08:06.650

使用 std::string 代替 char* 和 std::ifstream 代替 FILE*，所有问题都将迎刃而解。

# php - 两个验证消息都出现在 javascript 和 php 上

> ID：13608127
> 
> 赞同：0
> 
> 时间：2012-11-28T15:04:56.263
> 
> 标签：php, javascript, jquery, html

在下面的代码中，我有两种类型的验证。我使用 javascript 验证，当用户在课程文本输入中没有输入任何内容时，它会显示错误消息。

然后我有一个php验证，如果它不包含查询结果的行，该查询检查用户在课程文本输入中输入的课程中是否有任何评估，然后它会显示一条消息，说明没有找到评估。

我遇到的问题是，如果用户没有在“课程”文本输入中输入任何内容并且他们单击提交按钮，它会同时显示 javascript 验证和 php 验证。

这是不正确的，应该发生的是：

*   如果用户在课程文本输入中没有写任何东西，那么它应该只显示 javascript 验证而不是 php 验证。

    *   如果用户在课程文本输入中写了一些东西并提交了表单，但是它无法从查询中找到任何结果，那么它应该只显示 php 验证。

我的问题是我需要在代码中进行哪些更改才能不能同时显示两个验证消息，并且在应该显示正确的验证消息时只显示它们？

换句话说，如果 javascript 验证失败，我如何阻止表单提交？然后很明显我如何确保如果javascript验证成功，那么它确实提交了表单。

**Javascript**

```
function validation() {

    var isDataValid = true;

    var courseTextO = document.getElementById("coursesDrop");

    var errModuleMsgO = document.getElementById("moduleAlert");

    if (courseTextO.value == "") {
        $('#targetdiv').hide();
        $('#assessmentForm').hide();
        $('#updateForm').hide();
        $('#submitupdatebtn').hide();
        errModuleMsgO.innerHTML = "Please Select a Course";
        isDataValid = false;
    } else {
        errModuleMsgO.innerHTML = "";
    }
    return isDataValid;

}​ 
```

**PHP/HTML**

```
<?php

// connect to the database
include('connect.php');

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    die();
}

$sql = "SELECT CourseId, CourseNo, CourseName FROM Course ORDER BY CourseId"; 

$sqlstmt=$mysqli->prepare($sql);

$sqlstmt->execute(); 

$sqlstmt->bind_result($dbCourseId, $dbCourseNo, $dbCourseName);

$courses = array(); // easier if you don't use generic names for data 

$courseHTML = "";  
$courseHTML .= '<input type="text" name="courses" id="coursesDrop" />' . PHP_EOL; 

?>

<form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post" onsubmit="return validation();">
    <table>
        <tr>
            <th>Course: <?php echo $courseHTML; ?></th>
        </tr>
    </table>
    <p>
        <input id="moduleSubmit" type="submit" value="Submit Course and Module" name="moduleSubmit" />
    </p>
    <div id="moduleAlert"></div>
    <div id="targetdiv"></div>
</form>

<?php

if (isset($_POST['moduleSubmit'])) {    

    $sessionquery = "
    SELECT SessionId, SessionName, SessionDate, SessionTime, CourseId, SessionActive
    FROM Session
    WHERE (CourseId = ? AND SessionActive = ?)
    ORDER BY SessionName 
    ";

    $active = 1;

    $sessionqrystmt=$mysqli->prepare($sessionquery);
    // You only need to call bind_param once
    $sessionqrystmt->bind_param("si",$course, $active);
    // get result and assign variables (prefix with db)

    $sessionqrystmt->execute(); 

    $sessionqrystmt->bind_result($dbSessionId,$dbSessionName,$dbSessionDate,$dbSessionTime, $dbCourseId, $dbSessionActive);

    $sessionqrystmt->store_result();

    $sessionnum = $sessionqrystmt->num_rows();   

    if($sessionnum == 0) {
        echo "<p><span style='color: red'>Sorry, You have No Assessments under this Module</span></p>";
    } 
    else 
    { 
        echo "";
    }

    ...

}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T15:36:24.440

尝试彻底停止提交事件（您正在遭受[jQuery-itis](http://fuelyourcoding.com/jquery-events-stop-misusing-return-false/)，导致您滥用`return false`）：

```
method="post" onsubmit="return validation(event);"> 
```

在 JS 中：

```
function validation(e)
{
    //your checks
    if (isDataValid === false)
    {
        if (e.preventDefault)
        {
            e.preventDefault();
            e.stopPropagation();//VERY important
        }
        e.returnValue = false;
        e.cancelBubble = true;
    }
    return isDataValid;
} 
```

要了解这两种方法的作用，请查看[MDN](https://developer.mozilla.org/en-US/docs/DOM/event.stopPropagation)必须说的内容
。要了解*您*在调用`stopPropagation`（或设置`cancelBubble`为`true`）时要停止的内容，我建议您使用[quirksmode：事件顺序](http://www.quirksmode.org/js/events_order.html)非常容易遵循，相当全面的描述，以及，以防万一：[他们也介绍了 JS 事件](http://www.quirksmode.org/js/introevents.html)。

*更新*
针对您的评论：

```
<?php

// connect to the database
include('connect.php');

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    die();
}

$sql = "SELECT CourseId, CourseNo, CourseName FROM Course ORDER BY CourseId"; 

$sqlstmt=$mysqli->prepare($sql);

$sqlstmt->execute(); 

$sqlstmt->bind_result($dbCourseId, $dbCourseNo, $dbCourseName);

$courses = array(); // easier if you don't use generic names for data 

$courseHTML = "";  
$courseHTML .= '<input type="text" name="courses" id="coursesDrop" />' . PHP_EOL; 
$pHTML = '&nbsp;';//default paragraph inner
if (isset($_POST['moduleSubmit'])) {    
        $sessionquery = "
    SELECT SessionId, SessionName, SessionDate, SessionTime, CourseId, SessionActive
    FROM Session
    WHERE (CourseId = ? AND SessionActive = ?)
    ORDER BY SessionName 
    ";
    $active = 1;
    $sessionqrystmt=$mysqli->prepare($sessionquery);
    // You only need to call bind_param once
    $sessionqrystmt->bind_param("si",$course, $active);
    // get result and assign variables (prefix with db)
    $sessionqrystmt->execute(); 
    $sessionqrystmt->bind_result($dbSessionId,$dbSessionName,$dbSessionDate,$dbSessionTime, $dbCourseId, $dbSessionActive);

    $sessionqrystmt->store_result();

    $sessionnum = $sessionqrystmt->num_rows();   

    if($sessionnum == 0) {//error msg?
        $pHTML =  "<span style='color: red'>Sorry, You have No Assessments under this Module</span>";
    } 
}

?>
    <p id="warnings"><?php echo $pHTML;?></p><!-- echo the innerHTML created server-side -->
<form id="myForm" action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post" onsubmit="return validation(event);">
    <table>
        <tr>
            <th>Course: <?php echo $courseHTML; ?></th>
        </tr>
    </table>
    <p>
        <input id="moduleSubmit" type="submit" value="Submit Course and Module" name="moduleSubmit" />
    </p>
    <div id="moduleAlert"></div>
    <div id="targetdiv"></div>
</form> 
```

调整 JS - 因为您使用的是 jQuery，所以我将使用它，因为[在 IE 中委派更改事件很痛苦](https://stackoverflow.com/questions/11331203/javascript-how-to-simulate-change-event-in-internet-explorer-delegation)：

```
$('#myForm').delegate('change','select',function()
{
    $('#warnings').html('');//clears current warnings
}); 
```

或者，更有效但更复杂的方法：

```
$('#myForm').delegate('change','select',(function(warnings)
{
    return function()
    {
        warnings.html('');
    };
}($('#warnings')))); 
```

别忘了把它包起来`$(document).ready(function(){[here]});`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T15:14:51.440

我相信`action`并且`onsubmit`都会触发，即使`return false`onsubmit 函数中有一个。我建议删除该操作并将表单 POST 移动到 Javascript 函数，以便在成功的前端验证时调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T15:11:53.183

我认为这是因为您缺少 .value

```
var courseTextO = document.getElementById("coursesDrop").value;
// add line of debug
alert(courseText0); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T15:12:37.617

它必须同时返回，因为您的操作是调用 php 验证，并且您还有一个调用 javascript 验证的 onsubmit。

发生的情况是，您的代码首先执行 javascript，然后执行 php.ini。

解决问题的最佳方法是在 from-tag 中完全不设置任何操作，并根据结果在 javascript 验证函数中设置表单的操作。

# arrays - 递归函数测试所有可能的组合并找到较小的组合

> ID：13608129
> 
> 赞同：0
> 
> 时间：2012-11-28T15:04:57.307
> 
> 标签：arrays, recursion, combinations, allocation, segments

我正在处理一个问题，试图制作一种递归方法来测试所有可能的组合并向我展示“最便宜”的组合。

任务是：

*   我有一个 Array[n] 数字，它是动态分配和填充的。{1, 3, 4, 2} 例如。数组定义为
    `int *array;`
*   我喜欢数组的大小并放入变量 Size。
*   数组中的每 2 个数字表示一个段的顶部和底部，因此在这种情况下，数组有 3 个段。这些段是：A = 1 3 ，B = 3 4 ，C = 4 2 。
*   我必须按照他们的顺序加入他们。我可以从最后两个开始加入到第一个，或者我可以从中心到两侧开始，但我必须选择“最便宜”的方式。
*   每次我加入两个段： A = 1 3 和 B = 3 4 。我这样计算它的成本：(1 * 4) + 3。我将段末端的数字相乘，然后将总和与段之间的数字相乘。
*   输入将始终是 2 个或更多段，表示数组中的 3 个或更多数字。

实际上我需要它做的是：

`For two segments: array= "1 2 3"
A={1,2},B={2,3} ---- (1*3)+2 -> Cost = 5`

`For three segments: array= "30 20 25 10"
A={30,20},B={20,25},C={25,10} ----
case1 - [(30*25)+20] + [(30*10)+25] -> Cost = 1095
case2 - [(20*10)+25] + [(30*10)+20] /> Cost = 545`

所以我们可以清楚地看到第二个成本更好，所以我们返回那个值。对于更多的段，计算的数量将急剧增加，但这对于我的需要来说是可以的。

我已经以不同的方式尝试了很多次，但我对所有的指针都感到困惑，而且我对递归函数也不擅长。我不知道我是否足够具体，如果有不清楚的地方，我会很乐意解释。

我当然不需要整个代码，也许会得到一些解释或关于如何做到这一点的想法:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:03:21.537

让我们的数字`A`数组，第 j 个元素和 A 的子数组，第 i 个到第 k 个元素，包括。索引从 0 开始计数，因此. 加入操作的结果是什么？例如有两个部分，我正确地假设连接在一起会是？`n``A[j]``A[i,k]``A = A[0, n-1]``A = { 1, 2, 3 }``1,2``2,3``1,3`

由于每个连接都将 A 分成两部分，因此您可以通过测试 的所有可能连接（`A`即`n-2`可能性）来递归，选择成本最低的连接。也许这个方程给你一个想法。

```
/* cost of join two segments of A ending respective starting at j */
cost(A,j) = ( A[j-1]*A[j+1] ) + A[j]

 /* minmal cost of joining(A) when joining at j */
mincost(A,j) = mincost( A[0,j-1] ) + cost(A,j) + mincost( A[j+1,n-1] )

/* test all possible join, use minimal one */
mincost(A) = min[j]: mincost(A,j) 
```

结束递归时`n=3`，使用`cost(A,1)`.

对于可用的算法，您可能必须缓存`mincost(A[x,y])`这称为动态编程。

在 C `A[j]`中可以翻译为`*(A+j)`where as`A[i,k]`不直接对应一个 C 构造，但可以大致翻译为如下

```
 struct Array { 
          int * A; 
          int index_first;
          int index_last;
 }; 
```

# mysql - 当一张表引用其他几张表时的关系数据库设计

> ID：13608131
> 
> 赞同：0
> 
> 时间：2012-11-28T15:05:02.257
> 
> 标签：mysql, database-design, innodb

例如，让我们想象一个“ `appointments`”表，它跟踪几种约会类型（眼睛、牙齿……）。这个表可以有一个`ID, date, doctor_id, Appointment_type`和其他所有约会类型共有的列。然后，每种类型的约会都有自己的表来保存特定于该约会类型的数据。

我选择了这种设计，因为我们有大量的数据共享给所有约会，所以我不想重复它，而且每个约会都包含非常不同类型的数据，所以只有一个有很多 NULL 字段的约会表似乎不方便。

知道我主要需要一次查询所有约会类型，组织这些表的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:44:42.530

有两种方法：

每个层次一个表（又名单表继承）您将所有约会类型的所有属性放在一个表中，并使用“类型”字段来区分约会类型。这很快，因为没有连接。但是这个表可能有许多列。

每个子类一个表（又名多表继承） 这样您就有一个包含公共字段的基类表，并使用多态关联链接到子类表中的记录。这比较慢，需要更多的表。如果要查询所有约会类型，连接可能很难编写。

我认为对于您的应用程序（查询所有约会类型），每个层次结构一个表更好。

# sockets - 手动接受 tcp 客户端

> ID：13608140
> 
> 赞同：-4
> 
> 时间：2012-11-28T15:05:28.007
> 
> 标签：sockets, client, tcpclient, tcplistener

有没有一种方法可以选择我`TcpListener`接受的客户？或者将我设置`TcpListener`为仅接受来自特定 IP 的连接？

C#、.NET 4.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:24:57.513

在应用软件中构建 IP 地址过滤器是一个坏^(主意)。在防火墙上进行过滤和/或实施正确的连接身份验证。

# facebook - 开发者关系和安全 API

> ID：13608142
> 
> 赞同：0
> 
> 时间：2012-11-28T15:05:32.997
> 
> 标签：facebook, security

我们正在开发一个与安全相关的 Facebook 应用程序。出于安全原因，我们无法在此处发布我们的问题。有谁知道如何联系 Facebook 的开发团队？他们有开发者关系小组吗？如果有，有没有人有邮箱或联系方式？

谢谢 - 非常感谢任何指导，很抱歉这不是你典型的“堆栈”问题，但我们不知道还能去哪里......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:29:21.390

最好的办法是提交一个可以标记为机密的错误。但是，不能保证您会收到满意的答复。 [https://developers.facebook.com/bugs](https://developers.facebook.com/bugs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T14:38:02.980

在developers.facebook.com.bugs 上发布您的问题并标记为机密。

# graph-theory - 二分最小边

> ID：13608144
> 
> 赞同：3
> 
> 时间：2012-11-28T15:05:34.573
> 
> 标签：graph-theory, bipartite

我正在寻找一种简单的算法来获得二分图的边中的最小加权边。我搜索了一下，我都知道这意味着二分图的覆盖边，换句话说，如果我们有二分图并且每条边都有一个数字权重，如何获得其中最小的数字

![例子](../Images/d391ded0b5e941dd31eed542c054dda5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:27:56.967

提出这个问题的方式使其非常不清楚。我从中得到的一种解释是：“给定一个加权二部图 G，我如何获得 G 的最小边覆盖？”。如果是这种情况，那么[匈牙利算法](http://en.wikipedia.org/wiki/Hungarian_algorithm)（参见[http://reference.wolfram.com/mathematica/ref/FindEdgeCover.html](http://reference.wolfram.com/mathematica/ref/FindEdgeCover.html)也可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T13:47:23.000

你需要匈牙利算法。单击[此处](http://math.mit.edu/~goemans/18433S09/matching-notes.pdf) 获取讲义。

在处理之前，你应该有一个成本矩阵，其中每个条目是从节点A到节点B的边成本。匹配步骤如下：

* * *

1.  减去每行中最小的条目
2.  减去每列中最小的条目
3.  通过适当的行和列画线，以便覆盖成本矩阵的所有零条目并使用此类线的最小数量
4.  最优测试：（1）如果覆盖线的最小数量为n，则最优分配是可能的，我们就完成了。(2) 如果覆盖线的最小数量小于 n，则零的最佳分配是不可能的。转到第 5 步。
5.  确定未被任何行覆盖的最小条目。从每个未覆盖的行中减去该条目，然后将其添加到每个已覆盖的列。返回步骤 3。

* * *

上面的算法是基于一个数学定理

*   如果一个数字被添加到成本矩阵的任何一行或一列的所有条目中或从其中减去一个数字，则结果成本矩阵的最佳分配也是原始成本矩阵的最佳分配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-17T17:04:32.980

[Jonker-Volgenant ( LAPJV](http://rd.springer.com/article/10.1007%2FBF02278710) ) 算法甚至比其他答案中建议的匈牙利算法更好。

看看这个名为[Bipartite Solver](https://github.com/dberm22/Bipartite-Solver)的 GitHub 存储库，它基本上是一个关于如何在代码中实现 LAPJV 的教程，并带有一个可运行的图形示例。

它的速度非常快，能够在一秒钟内完成 1000 到 1000 次。

库中还包括贪心搜索，它甚至更快，但不能保证最优性。

如果您想尝试算法而不必从源代码构建它，该库还有一些[可执行文件。](https://github.com/dberm22/Bipartite-Solver/tree/master/bin)

# windows-services - Installutil 不会卸载：“指定的服务不作为已安装的服务存在”

> ID：13608157
> 
> 赞同：6
> 
> 时间：2012-11-28T15:06:10.003
> 
> 标签：windows-services, uninstallation, installutil

我一直在尝试使用 installutil: 安装 Windows 服务`installutil /u GSIS.FileMoverService.exe`。

我得到的输出是：

> 卸载程序集“C:\FMS\GSIS.FileMoverService.exe”。受影响的参数是：
> 
> logtoconsole = 日志文件 = C:\FMS\GSIS.FileMoverService.InstallLog
> 
> assemblypath = C:\FMS\GSIS.FileMoverService.exe 正在删除 EventLog 源文件移动器服务。
> 
> 警告：源文件移动器服务未在本地计算机上注册。服务文件移动器服务正在从系统中删除...
> 
> 卸载 System.ServiceProcess.ServiceInstaller 安装程序时发生异常。System.ComponentModel.Win32Exception：指定的服务不作为已安装的服务存在卸载时发生异常。
> 
> 此异常将被忽略，卸载将继续。但是，卸载完成后应用程序可能不会完全卸载。

当我尝试卸载时，该服务已停止。它肯定已注册为服务。我已经重新启动，它仍然在服务小程序 (services.msc) 中可见。它还可以从服务小程序成功启动和停止，因此看起来它没有成功（或仅部分）安装。

我从 VS2010 命令提示符（单击以管理员身份运行）调用 installutil。

有任何想法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-28T15:51:56.370

最后，我曾经`sc delete GSIS.FileMoverService`删除了该服务。这行得通。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-06T19:01:49.400

所以我希望这与您扩展 System.Configuration.Install.Installer 的类有关。在您的类的构造函数中，您应该将 System.ServiceProcess.ServiceProcessInstaller 和 System.ServiceProcess.ServiceInstaller 添加到安装程序，例如：

```
public MyServiceInstaller(string displayName = null, string description = null, ServiceAccount account = ServiceAccount.LocalSystem, string username = "", string password = "", ServiceStartMode startType = ServiceStartMode.Automatic, bool delayedAutoStart = false, string[] servicesDependedOn = null)
{
    Installers.Add(new ServiceProcessInstaller
        {
            Account = ServiceAccount.LocalSystem,
            Username = username,
            Password = password
        });
Installers.Add(new ServiceInstaller
    {
        ServiceName = GetType().Name,
        StartType = startType,
        DisplayName = displayName ?? serviceName,
        Description = description ?? string.Empty,
        ServicesDependedOn = servicesDependedOn,
        DelayedAutoStart = delayedAutoStart
    });

} 
```

ServiceInstaller 中的 ServiceName 需要与安装服务时分配给 ServiceInstaller 的 ServiceName 匹配。如果没有，那么您将收到此异常，因为它在尝试卸载之前找不到已安装的服务。

# c# - 将 TPL 任务与 HttpWebRequest 一起使用

> ID：13608159
> 
> 赞同：3
> 
> 时间：2012-11-28T15:06:14.843
> 
> 标签：c#, windows-phone-7, asynchronous, httpwebrequest, task-parallel-library

我希望在我的 WP7 项目中使用 System.Threading.Task 库来处理我的异步 Web 请求。但是，在 WP7（我相信）中，您必须将 HttpWebRequest 类用于 http 请求（我的应用程序经常这样做）。HttpWebRequest 类只有一个 BeginGetResponse 方法，该方法通过要求您传入回调参数来强制您使用旧的异步编程模型。

有什么方法可以使用 WP7 进入现代性，还是我坚持使用 HttpWebRequests 和回调？

更新 Jon 给了我一些很好的指导，让我找到了使用 Task.Factory.FromAsync 将 APM 代码转换为 TPL 的正确方法，但我在使用 Task.Factory.FromAsync 方面真的很挣扎。第一个参数是 IAsyncResult，我假设它是您的 BeginGetResponse 或 BeginGetRequest 方法。但是第二个参数，我读过的文档通常建议应该是你的 end 方法，是一个 Func。HttpWebRequest 的 EndGetRequest 和 EndGetResponse 方法返回一个 Stream ......那时，我迷路了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T15:09:23.773

通常，您可以使用从开始/结束方法对[`TaskFactory.FromAsync`](http://msdn.microsoft.com/en-us/library/dd321335.aspx)构建一个。`Task<T>`

我不知道 TPL 的 WP7 版本是否支持这一点，但这是我要开始的地方。

另请参阅：[“TPL 和传统 .NET Framework 异步编程”](http://msdn.microsoft.com/en-us/library/dd997423.aspx)。

# sql - SQL加入拆分？

> ID：13608160
> 
> 赞同：0
> 
> 时间：2012-11-28T15:06:20.423
> 
> 标签：sql, sql-server, sql-server-2008

我想对包含我想拆分的值的列执行连接。因此，如果该列包含电子邮件地址，我想加入“@”符号之前的部分。

我已经看到了 split 函数，但是我没有看到可以从拆分结果中选择哪个数组元素的任何地方？

所以像：

```
JOIN ON dbo.split('@',T1.Column)(0)? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:33:53.587

我认为你最好只加入到@符号的子字符串：

```
SELECT *
FROM Email 
LEFT JOIN EmailName ON Substring(Email.Address, 1, CharIndex('@', Email.Address) - 1) = EmailName.Name 
```

在这里看小提琴： [http ://www.sqlfiddle.com/#!6/5d0f5/8](http://www.sqlfiddle.com/#!6/5d0f5/8)

# jodatime - jodatime DateTime.getMillis 是 UTC，对吗？时代

> ID：13608161
> 
> 赞同：3
> 
> 时间：2012-11-28T15:06:21.023
> 
> 标签：jodatime

因此，System.currentTimeMillis 在 UTC 时区返回毫秒。DateTime.getmillis 是否与我所知道的几乎所有库都相同，因为纪元总是在 UTC 中？joda-time也一样吗？

谢谢，院长

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T16:50:14.133

> System.currentTimeMillis 在 UTC 时区返回毫秒

这是不正确的。 `System.currentTimeMillis`返回一个**时间间隔**（以毫秒为单位），从一个特定的（明确指定的，普遍的）**时刻**(tA)，直到另一个时刻 (tB=当前时刻)。这两个瞬间都是“物理”时间线中的点，它们与时区完全无关。

可能会出现混淆，因为“初始”时间 (tA) 被指定为“1970 年 1 月 1 日 00:00:00 UTC”，但这无关紧要，这只是一种明确指定瞬间的方式（'ta' = 瞬间伦敦的时钟标记为 1 月 1 日的 00:00')。我们可以选择另一个起源：例如，tA=阿波罗十一号登陆月球的瞬间。你会同意，如果我定义这个新纪元：“从那一刻'tA'到现在的毫秒数”，你和我将得到相同的数字（在同一时刻），它与我们的时区没有任何关系。

# symfony - 如何同时使用@Template 和缓存？

> ID：13608162
> 
> 赞同：0
> 
> 时间：2012-11-28T15:06:22.037
> 
> 标签：symfony, symfony-2.1

有没有办法修改 $response 来设置缓存，并且仍然返回一个数组？（我不想使用模板名称和渲染）

我只能使用 @Cache 注释来做到这一点，但确定一定有另一种方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:28:57.220

您可以使用[Events](http://symfony.com/doc/current/book/internals.html#handling-requests)操作响应对象。

例如，处理 kernel.response 事件使您可以在呈现视图后设置缓存头。

# php - 如何将我的日期值转换为 unix 时间戳，以便我可以使用 php 的日期函数？

> ID：13608169
> 
> 赞同：0
> 
> 时间：2012-11-28T15:06:39.867
> 
> 标签：php

我正在从数据库中检索格式为 YYYYMMDD 的日期。它是一个 wordpress 值，必须像这样存储，以便我使用它执行适用于 wordpress 的特定查询。

我想将它转换为无前导零日和短月份，例如 3 DEC，对于 20121203。但是 php 的日期函数说它需要一个 unix 时间戳，所以我需要先将其转换为这样才能操作它。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:09:12.610

`strtotime`应该能够将该格式转换为 UNIX 时间戳

```
$date = '20120101';
echo date('j M', strtotime($date));

// output: 1 Jan 
```

顺便说一句，这也取决于您的语言环境设置。

编辑：重要提示：如果日期不明确，strtotime 将返回 false！

您还可以使用该`mktime()`函数，它接受小时、分钟、秒、月、日、年的整数值来生成 unix 时间戳：

```
$year = 2012;
$month = 1;
$day = 1;

$timestamp = mktime(0,0,0,$month,$day,$year);
echo date('j M', $timestamp);

// output: 1 Jan 
```

编辑：另一种方法是从已经格式化的数据库中检索值（假设 MySQL）：

```
SELECT UNIX_TIMESTAMP(20120101)

// outputs 1325372400 (== mktime(0,0,0,1,1,2012)) 
```

# php - PHP fread不返回字符串

> ID：13608170
> 
> 赞同：0
> 
> 时间：2012-11-28T15:06:41.643
> 
> 标签：php, logging, fread

```
 log_email("email to: " . $to . " at: " . $time);
}

function log_email($message){
    $dir = dirname(__FILE__);
    $filename = $dir . "/logs/email_log.txt";       
        echo $filename;

    if(is_readable($filename)){        
        $handle = fopen($filename, "w+");
        $contents = fread($handle, filesize($filename));
        fwrite($handle, $message . "\n" . $contents);
        fclose($handle); 
    }else{
        echo 'The file is not readable.';
    }
} 
```

该文件具有 777 访问权限，该文件包含一些文本。我收到一条警告说：*警告：fread（）：长度参数必须大于 0 in* ...

$contents 变量最终什么都不包含？有任何想法吗？目录必须正确，因为如果我删除文件，我的 is_readable 会返回 false。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T15:23:24.643

当您最初使用此行打开文件时，您正在[截断文件。](http://php.net/manual/en/function.fopen.php)

```
$handle = fopen($filename, "w+"); 
```

因此，在触发该警告时，大小将为零。

你可能应该做这样的事情：

```
function log_email($message){
    $dir = dirname(__FILE__);
    $filename = $dir . "/logs/email_log.txt";       
        echo $filename;

    if(is_readable($filename)){        
        // This will append to the file without destroying its contents
        $handle = fopen($filename, "a+"); 
        fwrite($handle, $message . "\n");
        fclose($handle); 
    }else{
        echo 'The file is not readable.';
    }
} 
```

# sql - 如何在 SQL Server 2008 r2 中的函数中返回记录

> ID：13608171
> 
> 赞同：0
> 
> 时间：2012-11-28T15:06:48.197
> 
> 标签：sql, sql-server-2008, tsql

我想编写一个以 INT 形式返回的函数，它是符合特定条件的记录数。

我试过这个，它运行......但它保持安静 - 它不返回任何东西。我猜它只是在后台运行选择。

```
ALTER FUNCTION [dbo].[f_InboundCallsPerUser](@p_User varchar(50), @p_sd datetime, @p_ed datetime)
RETURNS INT
WITH EXECUTE AS CALLER
AS
BEGIN
Return(SELECT  COUNT(*) 
FROM CallDetail
WHERE LocalUserID = @p_user
AND InitiatedDate BETWEEN @p_sd AND @p_ed
AND UPPER(CallDirection) = 'OUTBOUND'
AND LineDurationSeconds > 0);
END; 
```

你是怎样做的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T15:09:59.847

采用

```
SELECT [dbo].[f_InboundCallsPerUser](@p_User, @p_sd , @p_ed) 
```

我猜你可能是`EXEC`-ing它。在这种情况下你需要做

```
DECLARE @Result INT
EXEC @Result =[dbo].[f_InboundCallsPerUser] @p_User, @p_sd , @p_ed 
SELECT @Result 
```

查看返回值。

# c++ - 如何使用写时复制来最小化 c++ 程序的内存消耗？

> ID：13608182
> 
> 赞同：8
> 
> 时间：2012-11-28T15:07:19.880
> 
> 标签：c++, linux, memory, optimization, profiling

我正在开发一个应用程序，该应用程序最多可分叉 8 次以实现并行性。每个分叉都有一个来自分叉时原始进程的内存空间的完整副本。分叉很快，因为 Linux 在进程之间共享页面，并且仅在修改时创建新页面。实际上，我的应用程序的内存消耗增长似乎大约是 3 倍。对于用于识别会减少增长的更改的工具或技术有什么建议吗？

一种想法是查看修改页面的页面碎片。还只是对分叉进程中分配的内容进行了蛮力检查。无论哪种情况，您都可以推荐哪些技术或工具来执行该分析？

请记住，即使使用并行性，该程序也需要几个小时才能完成，并且内存占用量高达 1TB，因此检测选项有限。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T15:14:16.477

您可以使用`vmstat`,`systemtap`和 或`glibc`'s[`malloc-hooks`](http://www.gnu.org/software/libc/manual/html_node/Hooks-for-Malloc.html)来监控消耗。您可以使用`perf`查看故障发生的位置，以了解消耗的实际影响。

如果您的应用程序在使用大内存池时面临 TLB 压力（例如，您正在处理大量数据），您可以使用大/大页面来减轻 4k 页面的开销。

您还可以使用`madvise`在您的进程中告诉内核您可能要对分配的内存做什么。

# javascript - jquery 旋转 div 并使其向上移动。

> ID：13608185
> 
> 赞同：1
> 
> 时间：2012-11-28T15:07:28.543
> 
> 标签：javascript, jquery, rotation

嗨，大家好。我有一张图片，我把它放在了一个 div 里面。基本上我想弄清楚如何旋转它然后让它移动。我已经尝试了一些代码，但它不工作。在这个问题上的任何帮助都会很棒。

```
<script type="text/javascript">
$(function() {
    var $elie = $("#super");
    rotate(22);

    function rotate(degree) {        
        $elie.css({ WebkitTransform: 'rotate(' + degree + 'deg)'});  
        $elie.css({ '-moz-transform': 'rotate(' + degree + 'deg)'});                      
        timer = setTimeout(function() {
            rotate(++degree);
        },22);
    }
});
</script> 
```

由于某种原因，代码无法正常工作并使图像旋转。再次感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:19:23.673

也许是因为您在定义它之前调用了该函数。

# javascript - 试图在圆的边缘绘制坐标

> ID：13608186
> 
> 赞同：19
> 
> 时间：2012-11-28T15:07:29.413
> 
> 标签：javascript, math, geometry, points

我正在尝试以编程方式围绕一个圆圈绘制坐标。在这里，它被硬编码以显示我所追求的：

[http://jsfiddle.net/jE26S/1/](http://jsfiddle.net/jE26S/1/)

```
var iteration = 4;
var left = [94,200,104,-6];
var top = [-6,94,200,94];    

for(var i=0; i<iteration; i++){

    $("#center").append("<div class='point' style='left:"+left[i]+"px;top:"+top[i]+"px'></div>");    

} 
```

数学绝对不是我的强项。

我需要将人们表示为围绕一个大圆圈的小圆圈。但是，会有随机数量的人，并且他们都需要等距。我不确定我是否应该从一个中心点工作。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-28T15:20:49.607

假设这`(x0, y0)`是你的圆心，并且`r`是半径：

```
var items = 4;
for(var i = 0; i < items; i++) {

    var x = x0 + r * Math.cos(2 * Math.PI * i / items);
    var y = y0 + r * Math.sin(2 * Math.PI * i / items);   
    $("#center").append("<div class='point' style='left:"+ x +"px;top:"+ y +"px'></div>");    

} 
```

# actionscript-3 - 使用 Papervision3D 操作导入的模型

> ID：13608189
> 
> 赞同：1
> 
> 时间：2012-11-28T15:07:34.470
> 
> 标签：actionscript-3, 3d, papervision3d

对于熟悉 Papervision 和一般 3D 的人来说，这可能是一个愚蠢的问题，但请记住，我不是那些人，呵呵。

我的问题是，如果我用 Papervision 导入模型，有没有办法通过代码改变它的顶点位置？例如，如果我有一个头部模型，我想根据某些参数动态更改它，那可能吗？还是模型在导入后会保持不变？只允许常规缩放、应用材料等内容。

提前感谢您的帮助。

# javascript - 使用javascript检测浏览器

> ID：13608193
> 
> 赞同：-1
> 
> 时间：2012-11-28T15:07:58.573
> 
> 标签：javascript, jquery

我想在我的网页上做这样的事情：如果访问该页面的浏览器是 Internet Explorer 8.0 或更早版本，我想提醒用户您需要升级浏览器并且不要加载该页面。否则，如果您使用其他浏览器，则只需加载页面并正常继续。

* * *

原因，我现在不想在 IE 中加载页面是因为 css3 在 IE 中变得疯狂，它在 Chrome、Mozilla 等中完美运行。我正在努力并希望在一天内修复它或二。同时，我不希望任何人能够使用 IE 8.0 或更早版本打开我的网页。

* * *

我尝试了这些，但无济于事：

```
<script type="text/javascript">
    nav=navigator.appName;
    if (nav.indexOf("IE 8.0")!=-1)
    {
       alert("You are using an older version");
    }
    else
    {
       alert("Switch to a new version");
    }
</script> 
```

* * *

我想使用 Javascript 来做到这一点。我该怎么做 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:10:41.770

jQuery 确实有内置的[浏览器检测](http://api.jquery.com/jQuery.browser/)：

```
if ($.browser.mise && $.browser.version <= 8) {
    alert("Get a better browser!");
} 
```

更好的解决方案是使用特征检测。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T15:09:41.237

```
if($.browser.msie && parseInt($.browser.version, 10) <= 7) {
    //Do alert
} 
```

在 IE 上使用**Modernizr**，您可以获得检测浏览器版本的类，以便仅使用**CSS**显示或隐藏文档上的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T15:48:34.890

jQuery 让这一切变得简单。

```
if($.browser.msie){ ... } 
```

[https://github.com/jquery/jquery-browser](https://github.com/jquery/jquery-browser)

对于非 jquery 用户，我做了一个不依赖 jQuery 的 fork： [https ://github.com/yukulele/browser](https://github.com/yukulele/browser)

```
if(browser.msie){ ... } 
```

但是使用 Modernizer 进行特征检测是一种更好的方法：[http ://www.modernizr.com/](http://www.modernizr.com/)

# c# - .NET QuickFix 登录时发送的错误注销消息

> ID：13608197
> 
> 赞同：1
> 
> 时间：2012-11-28T15:08:06.593
> 
> 标签：c#, .net, quickfix

我正在使用 QuickFix 的 .NET 包装器以及来自 QuickFix 站点 (1.13.3) 的最新二进制文件。

该会话被配置为接受者，并安排在每天**06:10:00**到**15:35:00 之间**。

问题是，当对方早上第一次尝试登录时，我们的引擎会发送一条不需要的`Logout`消息，并且不会从最后一天重置序列号。

我在方法中添加了`Session`属性的自定义日志记录，`toApp`当对方发送第一`Logon`条消息时会记录下来（toApp 时间是 UTC+1）：

```
20121128-06:46:14.546 : 8=FIX.4.2|9=63|35=A|49=OTHER_PARTY|56=US|34=1|52=20121128-06:46:14|98=0|108=60|141=Y|10=046

2012-11-28 07:46:14,546 [3] DEBUG FixAcceptor.FIX.4.2-US-OTHER_PARTY [(null)] <(null)> - Session 'FIX.4.2:US->OTHER_PARTY',   isLoggedOn: False,   isSessionTime: True,   sentLogon: False,   sentLogout: False,   receivedLogon: False  

20121128-06:46:14.546 : 8=FIX.4.2|9=50|35=5|34=79|49=US|52=20121128-06:46:14.546|56=OTHER_PARTY|10=225| 
```

我不明白为什么`Logout`要发送此消息。前一天的会话以双方正常注销结束。当对方发送另`Logon`一条消息时，一切顺利并`Logon`发送正常响应：

```
20121128-06:46:24.765 : 8=FIX.4.2|9=63|35=A|49=OTHER_PARTY|56=US|34=2|52=20121128-06:46:24|98=0|108=60|141=Y|10=048  
20121128-06:46:24.780 : 8=FIX.4.2|9=67|35=A|34=1|49=US|52=20121128-06:46:24.780|56=OTHER_PARTY|98=0|108=60|141=Y|10=000 
```

任何想法为什么会发生这种情况？

**编辑** 我今天再次检查了日志，昨天的注销程序已正确完成，但序列号没有重置，今天早上再次发送了注销消息：

```
20121128-15:07:22.248 : 8=FIX.4.2|9=54|35=5|49=OTHER_PARTY|56=US|34=262|52=20121128-15:07:22|58=END|10=192|  
20121128-15:07:22.248 : 8=FIX.4.2|9=51|35=5|34=262|49=US|52=20121128-15:07:22.248|56=OTHER_PARTY|10=007|  
20121129-06:23:25.326 : 8=FIX.4.2|9=63|35=A|49=OTHER_PARTY|56=US|34=1|52=20121129-06:23:25|98=0|108=60|141=Y|10=044|  
20121129-06:23:25.341 : 8=FIX.4.2|9=51|35=5|34=263|49=US|52=20121129-06:23:25.341|56=OTHER_PARTY|10=004|  
20121129-06:23:35.544 : 8=FIX.4.2|9=63|35=A|49=OTHER_PARTY|56=US|34=2|52=20121129-06:23:35|98=0|108=60|141=Y|10=046|  
20121129-06:23:35.560 : 8=FIX.4.2|9=67|35=A|34=1|49=US|52=20121129-06:23:35.560|56=OTHER_PARTY|98=0|108=60|141=Y|10=250| 
```

因此，如果错误的序列号是发送注销消息的原因，那么问题仍然是为什么 QuickFix 不重置序列号。我已经检查过，在会话配置期间没有设置 StartDay/EndDay 配置参数，只有 StartTime/EndTime。还有什么我应该检查的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:37:15.210

```
Logon 34=1

Logout 34=79 
```

预期的序列号可能是 78。要么你必须重置你的序列号，要么需要让发起者使用它上次用来向你的接受者发送消息的序列号。

配置文件中的以下标签应该可以帮助您。默认情况下它们都是 N，您可能必须将所需的标签更改为 Y 以允许在登录/注销/断开连接时重置序列号。

```
ResetOnLogon    
ResetOnLogout   
ResetOnDisconnect
RefreshOnLogon 
```

我的假设是会话注销没有正确发生，因为 Quickfix 仍然保留旧的序列号。并在第一次注销时重置序列号。可能设置了 ResetOnLogout。

# node.js - 重定向时未在 Express 上设置 Csrf 令牌

> ID：13608199
> 
> 赞同：1
> 
> 时间：2012-11-28T15:08:17.723
> 
> 标签：node.js, redirect, express, csrf

我将`csrf`中间件与*Express*框架一起使用。我的*登录*页面是这样的：

```
app.get('/', getUserOrLogin, function (req, res) {
  // do something...
}); 
```

在哪里`getUserOrLogin`：

```
// Return the user otherwise redirect to login page
var getUserOrLogin = function (req, res, next) {
  var user = req.session.user;

  if (user == null) {
    req.session.backTo = req.originalUrl; 
    res.redirect('/login');
  } else {
    req.user = user;
    next();
  }
}; 
```

当我尝试访问`/`时，它会将我正确重定向到，但未设置 cookie 中`/login`的`csrf`令牌。

我是在功能上做错了什么`getUserOrLogin`还是 Express 错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T09:43:02.293

我发现了错误。因为我不想`csrf`控制每个页面，所以我使用了条件函数：

```
// Disable CSRF for some requests
var conditionalCSRF = function (req, res, next) {
  var whitelist = ['/inbound'];

  if (req.method !== 'POST') {
    next();
    return;
  }
  if (whitelist.indexOf(req.url) !== -1) {
    next();
  } else {
    (express.csrf())(req, res, next);
  }
};

app.use(conditionalCSRF); 
```

`csrf`但是在用户需要一个需要它的页面之前，该函数不会设置令牌。所以我就这样修改了

```
var connect = require('connect');

// Disable CSRF for some requests
var conditionalCSRF = function (req, res, next) {
  var whitelist = ['/inbound'];

  req.session._csrf || (req.session._csrf = connect.utils.uid(24));

  if (req.method !== 'POST') {
    next();
    return;
  }
  if (whitelist.indexOf(req.url) !== -1) {
    next();
  } else {
    (express.csrf())(req, res, next);
  }
};

app.use(conditionalCSRF); 
```

# windows-phone-7 - 在 wp7 中以正确的方向以编程方式选择 PivotItem

> ID：13608204
> 
> 赞同：1
> 
> 时间：2012-11-28T15:08:29.710
> 
> 标签：windows-phone-7, c#-4.0, silverlight-4.0

投票

您好 WP 开发人员！

我有一个以编程方式滚动数据透视项目的问题。

想象你有两个项目“第一”和“第二”。主动是“第一”。

然后在特殊项目点击上，我尝试滚动到下一个枢轴项目（将 SelectedIndex 从 0 设置为 1）。

出于某种原因，滚动方向从右到左动画（而不是我期望的从左到右）。

ps 如果我有两个以上的项目，一切都很好。如果 Pivot Item Change Animation 似乎是一个错误。

有谁知道如何解决这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T04:03:02.927

它似乎不是一个错误。只需在名称下创建一个新项目，**Windows Phone Pivot Application**

在此模板中，您将看到两个枢轴项目，它工作得非常好。`SelectedIndex`从第二项到第一项时，您可能设置错误。

请提供一些代码示例，以便我们分析情况。

# android - 使用 Twitter4j 的 Twitter 流 API

> ID：13608211
> 
> 赞同：0
> 
> 时间：2012-11-28T15:08:53.163
> 
> 标签：android, twitter4j, twitter-streaming-api

我需要流式传输所有包含某个主题标签的公共推文并回复某个帐户（我拥有）并将它们存储在数据库中。但是，我无法让 Twitter4j 为我做这件事。

有什么我想念的吗？我只能流式传输我的时间线。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T15:17:39.293

您不能使用过滤流指定诸如“回复某个帐户”之类的条件。但是，可以使用 Status#getUserMentionEntites() 检测推文是否是对某个帐户的回复。代码将是这样的：

```
public void onStatus(Status status){
  for(UserMentionEntity mention : status.getUserMentionEntities()){
    if(mention.getScreenName().equals("yusuke")){
      // do whatever you want
      break;
    }
  }
} 
```

# sql - TSQL跳过exec语句而不运行存储过程

> ID：13608218
> 
> 赞同：0
> 
> 时间：2012-11-28T15:09:24.833
> 
> 标签：sql, sql-server, tsql, stored-procedures

我有一个正常运行的 SQL Server 存储过程。但是，对于一个记录，当我浏览存储过程时，它“跳过”了一行而不运行它。

```
if not exists ( select * ... ) begin
    exec @Result = InsertRecord_A @AccountNo, @ID, @EventID;
    if @Result <> 0 return @Result;

    -- Do something else
    insert into ...
    select ...
end 
```

在这种情况下，该行将`exec @Result...`被跳过。通常它会启动该程序`InsertRecord_A`，但我无法让它在此记录上运行。

有任何想法吗？

更新：有以下错误信息：

```
Msg 201, Level 16, State 4, Procedure InsertRecord_A, Line 0
Procedure or function 'InsertRecord_A' expects parameter '@EventID', which was not supplied. 
```

错误消息的奇怪之处在于，当浏览它时，@EventID 显示它的值为 460，这是正确的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T15:35:47.690

尝试将参数显式设置为正确的值，而不是按序号位置传递它们并希望它们的顺序正确：

```
exec @Result = InsertRecord_A @AccountNo = @AccountNo, @ID = @ID, @EventID = @EventID; 
```

这当然是假设您的`InsertRecord_A`过程确实需要 3 个与您的变量同名的过程。

如果您对此不确定，可以运行`exec sp_help InsertRecord_A`或查看`sys.parameters`表格以检查它们的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T15:38:49.550

我认为@SchmitzIT 要求的是过程 InsertRecord_A 的实际 SQL 代码（CREATE PROCEDURE 等），而不是错误代码。只是一个猜测：你得到的错误是我过去在不小心更改过程定义中的参数数量时遇到的错误。如果您的 proc 已像这样更改：

```
CREATE PROCEDURE InsertREcord_A @ExtraParameter int, @AccountNo int,@ID int,@EventID int 
```

那么它将在位置 4 中寻找 @EventID 参数。事实上，您在位置 3 中传递了一个名为 @EventID 的有效参数，这将无济于事！在这种情况下，位置 3 的传入参数和位置 4 的预期参数都称为@EventID，这一事实令人困惑。

（这就是为什么我总是在过程定义中为参数加上 p 前缀）

# c# - 覆盖继承中的空方法

> ID：13608219
> 
> 赞同：2
> 
> 时间：2012-11-28T15:09:32.787
> 
> 标签：c#, oop

需要一点 OOP 帮助。

我有一个由`SendPayment() UpdateRecord()`实现不同支付格式的子类组成的基本支付，例如 PayPal、SagePay。

虽然都有`SendPayment()`方法，但它们的实现方式都不同。所以我重写了基类以在每个子类中应用我自己的实现。基类不包含任何实现，只是空方法。这是 OOP 的一种好方法，即拥有空方法然后在每个子类中实现覆盖代码或删除基类中的空方法并在子类中拥有这些方法？

谢谢...

抱歉快速编辑。我确实将基类用于某些场景，例如计算。这涵盖了所有支付类型，例如按成本计算产品数量和从表中删除记录。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T15:11:52.060

我建议将您的基类作为`abstract`类并将未实现的方法作为`abstract`方法。

```
 public abstract class BasePayment {

        //abstract method: unimplemented        
        public abstract void sendPayment();

        //implemented method    
        public void UpdateRecord(){
            .....
        }

    } 
```

`Abstract`类适用于您希望混合实现和未实现的方法的这种场景。这里的另一个好处是：每个扩展类都将被迫实现自己的`sendPayment`方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T15:11:58.673

如果您的子类在不覆盖基方法的情况下没有意义，请保留基方法`abstract`。

但是如果基类只包含抽象方法，并且没有任何状态（我猜是你的情况）最好使用接口，因为接口让实现者有权拥有另一个基类

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T15:20:37.833

没关系。但这取决于您将如何使用基类。您可以标记方法或类`abstract`，在这种情况下，所有子类都必须实现它们。如果您将它们标记为`virtual`子类，则可以在需要时覆盖它们或留空。
如果您不在基类中指定方法，您将无法充分利用抽象和多态性。例如，如果您有付款列表 ( `List<Payment>`) （无论实际付款类型是什么），并且您想发送所有付款，您将无法执行以下操作：

```
foreach(Payment payment in payments)
{
   payment.SendPayment();
} 
```

# highcharts - 自定义 Highcharts 饼图选择状态，以便切片在选择时不会动画

> ID：13608225
> 
> 赞同：2
> 
> 时间：2012-11-28T15:09:51.733
> 
> 标签：highcharts

我正在尝试自定义 Highcharts 饼图切片的选择状态，以便在选择时不会移出。HighCharts[选择状态文档](http://api.highcharts.com/highcharts#plotOptions.series.marker.states.select)为选择状态提供了“半径”选项，但这些设置对饼图没有影响：

```
$(function () {
var chart = new Highcharts.Chart({
    chart: {
        renderTo: 'container',
        type: 'pie'
    },        
    plotOptions: {
        series: {
            allowPointSelect: true,
            marker: {
                states: {
                    select: {
                        radius: 0,
                        fillColor: '#666'
                    }
                }
            }
        }
    },

    series: [{
        data: [['Jan', 29.9], ['Feb', 71.5], ['Mar', 106.4], ['Apr', 129.2], ['May', 144.0], ['Jun', 176.0], ['Jul', 135.6], ['Aug', 148.5], ['Sep', 216.4], ['Oct', 194.1], ['Nov', 95.6], ['Dec', 54.4]]        
    }]
});
});​ 
```

请参阅[工作示例](http://jsfiddle.net/AajYd/1/)。

以下示例说明了更改所选切片的颜色，但未[记录](http://api.highcharts.com/highcharts#plotOptions.series.states)这些设置，并且添加“半径”属性无效：

```
$(function () {
var chart = new Highcharts.Chart({
    chart: {
        renderTo: 'container',
        type: 'pie'
    },        
    plotOptions: {
        series: {
            allowPointSelect: true,
            states: {
                select: {
                    color: '#666'
                }
            }
        }
    },

    series: [{
        data: [['Jan', 29.9], ['Feb', 71.5], ['Mar', 106.4], ['Apr', 129.2], ['May', 144.0], ['Jun', 176.0], ['Jul', 135.6], ['Aug', 148.5], ['Sep', 216.4], ['Oct', 194.1], ['Nov', 95.6], ['Dec', 54.4]]        
    }]
    });
});​ 
```

查看[工作示例](http://jsfiddle.net/AajYd/3/)

是否有人设法禁用饼图切片选择动画，同时仅对所选切片应用填充颜色？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T17:43:27.063

感谢 Sebastian 和 Pawel 在[Highcharts 支持论坛](http://highslide.com/forum/index.php)上的帮助，切片动画通过“slicedOffset：0”设置禁用：

```
$(function () {
  var chart = new Highcharts.Chart({
    chart: {
      renderTo: 'container',
      type: 'pie'
    },        
    plotOptions: {
      series: {
        allowPointSelect: true,
        slicedOffset: 0,
        states: {
            select: {
                color: '#666'
            }
        }
    }
},

series: [{
    data: [['Jan', 29.9], ['Feb', 71.5], ['Mar', 106.4], ['Apr', 129.2], ['May', 144.0], ['Jun', 176.0], ['Jul', 135.6], ['Aug', 148.5], ['Sep', 216.4], ['Oct', 194.1], ['Nov', 95.6], ['Dec', 54.4]]        
    }]
  });
});​ 
```

查看[工作示例](http://jsfiddle.net/AajYd/15/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-15T11:44:48.750

基本上，您希望无论何时单击饼图，您单击的切片都不会消失。所以简单地这样做：

```
allowPointSelect: false, 
```

它将停止该切片出去并且无需设置任何**slicedOffset** 这是一个[JsFiddle](http://jsfiddle.net/AajYd/125/)

# php - php curl url ip地址绑定

> ID：13608234
> 
> 赞同：1
> 
> 时间：2012-11-28T15:10:14.073
> 
> 标签：php, curl, lwp-useragent

我正在使用 LWP::UserAgent::DNS::Hosts 将一些 perl 代码转换为 php。

perl 代码所做的是针对负载平衡池中的多个单独的服务器进行页面加载时间测量。由于服务器使用基于名称的虚拟主机，perl 代码使用这一行将 url/hostname 更改为 ip 绑定：

```
 LWP::UserAgent::DNS::Hosts->register_host(
    'www.mytesturl.com' => '22.22.22.22',
    );

    my $ua = LWP::UserAgent->new;
    $ua->timeout(10);
    $ua->env_proxy;

    #actually enforces new DNS settings as if they were in /etc/hosts
    LWP::UserAgent::DNS::Hosts->enable_override;

    $Timerstart=[gettimeofday];

    my $response= $ua->get('http://www.mytesturl.com');

    $TimeElapsed = tv_interval ($Timerstart,[gettimeofday]);

    if ($response->is_success) {
       print "<br>Response detected - Time to Load: $TimeElapsed seconds\r\n"
    } 
```

我知道我可以使用原始套接字操作来做到这一点，但我希望我可以使用 cURL 或 PHP 中的其他类库来做到这一点。perl 代码实际上在一个循环中重复了这一点，其中有几个不同的 IP 用于相同的 url（每个 ip 是一个特定的服务器），以单独测试服务器。

谢谢-

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T20:49:55.583

我这样使用它：

curl_setopt($ch, CURLOPT_INTERFACE,'eth0');

或者您也可以使用 IP：

curl_setopt($ch, CURLOPT_INTERFACE,'85.128.174.26');

# knockout.js - 淘汰赛 - 模板何时重新渲染

> ID：13608235
> 
> 赞同：1
> 
> 时间：2012-11-28T15:10:15.010
> 
> 标签：knockout.js

我们有一个简单的模板，可以在可编辑和不可编辑之间切换。基本上它只是隐藏输入字段并显示一个跨度，或者相反。

```
<script type="text/html" id="inputTextTemplate">
    <input type="text" data-bind="value: field, visible: $data.isEdit" />
    <span data-bind="text: field, visible: !$data.isEdit"></span>
</script> 
```

我们也有一些通过 JQuery 应用的样式，但问题是每次模板从可编辑和不可编辑切换时，它都会重新渲染并且这些样式都消失了。

这是问题的jsFiddle。

[http://jsfiddle.net/uCWx4/4/](http://jsfiddle.net/uCWx4/4/)

为什么会这样？我们如何解决这个问题，使模板只呈现一次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T16:11:12.037

看起来问题在于我向它发送了一个值，而不是一个可观察的。如果我制作一个可观察的或计算的，那么模板只渲染一次。所以在调用模板之前

```
isEdit: isEdit() == 'true' 
```

如果我创建一个计算

```
this.isEditable = ko.computed(function(){
    return self.isEdit() == 'true';
}); 
```

并调用它

```
isEdit: isEditable 
```

它按预期工作。

[http://jsfiddle.net/uCWx4/8/](http://jsfiddle.net/uCWx4/8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T15:27:48.727

您可以执行以下操作：
**HTML 代码**
我已经为像 this`css: { first: $data.isEdit }`和 this 这样的两个控件添加了 css 类`css: { second: !$data.isEdit }`

```
 <script type="text/html" id="inputTextTemplate">
        <input type="text" data-bind="css: { first: $data.isEdit }, value: field, visible: $data.isEdit" />
        <span data-bind="css: { second: !$data.isEdit }, text: field, visible: !$data.isEdit">   </span>
    </script> 
```

还有一些**CSS**

```
​.first{
  color: red;
}
.second{
  color: blue;
} 
```

[​<br/> css绑定](http://knockoutjs.com/documentation/css-binding.html)请阅读官方文档

另外，这里是[DEMO](http://jsfiddle.net/pkysylevych/dGLey/)

希望对你有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T15:17:17.200

你小提琴实际上并没有通过 jQuery 应用任何样式，但是我在使用[with](https://stackoverflow.com/questions/10143670/changing-with-property-changes-styles)时遇到了类似的问题。

解决方案是不这样做。考虑一下是否可以改用 ViewModel 中的 observable 在模板中应用样式。否则，每次重新渲染模板时，您都需要通过 jQuery 重新应用这些样式。

# android - 在服务上处理 onActivityResult

> ID：13608236
> 
> 赞同：15
> 
> 时间：2012-11-28T15:10:16.297
> 
> 标签：android, service, speech

所以我有一个简单的问题，如果此活动是从同一服务启动的（使用 Intent），是否可以在服务中处理方法 onActivityResult()？

在我的情况下，我想启动 SpeechRegnition 、 Speak 并在服务上获取结果，一切都在后台（主要服务从小部件开始），

谢谢 。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-28T15:16:46.080

感谢最近的投票，无论是谁。我在 2012 年给出的上一个答案完全是胡说八道，所以我决定写一个正确的答案。

您不能在服务中处理活动结果，但您可以将从 onActivityResult() 检索到的任何数据传递给服务。

如果您的 Service 已经在运行，您可以使用新的 Intent 调用 startService() 来处理事件，如下所示

```
@Override
public void onActivityResult(final int requestCode, final int resultCode, final Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if (requestCode == CODE && resultCode == RESULT_OK) {
        notifyService(data);
    }
}

private void notifyService(final Intent data) {
    final Intent intent = new Intent(this, MyService.class);
    intent.setAction(MyService.ACTION_HANDLE_DATA);
    intent.putExtra(MyService.EXTRA_DATA, data);
    startService(intent);
} 
```

并在服务中处理操作。如果已经在运行，则不会重新启动，否则将启动

```
@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    if (intent != null) {
        final String action = intent.getAction();
        if (action != null) {
            switch (action) {
                case ACTION_HANDLE_DATA:
                    handleData(intent.getParcelableExtra(EXTRA_DATA));
                    // Implement your handleData method. Remember not to confuse Intents, or even better make your own Parcelable
                    break;
            }
        }
    }
    return START_NOT_STICKY;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-11-01T08:25:14.437

从服务中打开透明活动并在服务中使用 BroadcastReceiver。详细按照步骤操作。

1.从Service开启透明Activity

```
Intent i = new Intent(mContext, FloatingServiceSupportActivity.class);
i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
i.putExtra("action", "SpeechRegnition");
mContext.startActivity(i); 
```

// 对于透明活动，请在 AndroidManifest.xml 中使用此代码

```
<activity
android:name=".FloatingServiceSupportActivity"
android:theme="@style/Theme.Transparent" /> 
```

2.在Service中创建BroadcastReceiver

```
BroadcastReceiver brOnActivityResult = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        // TODO:
    }
}; 
```

3.在服务的onCreate中注册这个广播

```
IntentFilter brintent = new IntentFilter();
brintent.addAction("brActionFloatingServiceOnActivityResult");
mContext.registerReceiver(brOnActivityResult, brintent); 
```

4\. 在 onDestroy of Service 中取消注册这个广播

```
mContext.unregisterReceiver(brOnActivityResult); 
```

5\. 使用 startActivityForResult 在 Activity 中工作，并从 Activity 的 (FloatingServiceSupportActivity) onActivityResult 发送广播

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
super.onActivityResult(requestCode, resultCode, data);

Intent i = new Intent();
i.setAction("brActionFloatingServiceOnActivityResult");
i.putExtra("action", "initTextToSpeech");
mActivity.sendBroadcast(i);

mActivity.finish();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-10T17:40:12.207

我最近偶然发现了同样的问题，如何将 onActivityResult() 结果连接到从上述服务启动的活动的服务。鉴于 Activity 泄漏是一种不好的做法，我不想将 Activity 存储在静态变量中。所以我在 Activity 处理 onActivityResult() 中添加了一个静态监听器，它实现了一个适当的接口，并将这个监听器实例化为 Service 类的私有成员。

简化形式的代码如下所示：

```
public class MyActivity extends FragmentActivity {

    public Interface ResultListener {
       onPositiveResult();
       onNegativeResult();
    }

    private static ResultListener mResultListener;

    public static setListener(ResultListener resultListener) {
        mResultListener = resultListener;
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (resultCode == Activity.RESULT_OK && mResultListener != null) {
            mResultListener.onPositiveResult(); 
        } else if (resultCode == Activity.RESULT_CANCELED && mResultListener != null) {
            mResultListener.onNegativeResult(); 
        }
        mResultListener = null;
    }
}

public class MyService {

    private MyActivity.ResultListener mListener = new MyActivity.ResultListener() {
        onPositiveResult() { 
            // do something on RESULT_OK
       }
       onNegativeResult() {
            // do something on RESULT_CANCELED 
       }
    }

    private void startActivityForResultFromHere() {
        MyActivity.setListener(mListener);
        Intent intent = new Intent();
        intent.setClass(this, MyActivity.class);
        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        startActivity(intent);
    } 
} 
```

如您所见，由于设备旋转问题，我无法避免静态引用，但我认为这种解决方案更合适；尽管很冗长。

# google-apps-script - Google Script 将表单数据导入新电子表格，然后以 PDF 格式发送

> ID：13608240
> 
> 赞同：1
> 
> 时间：2012-11-28T15:10:25.770
> 
> 标签：google-apps-script, google-sheets, google-forms

感谢大家提供这么棒的资源。我是谷歌脚本的新手，它对我帮助很大。

我正在尝试创建一个脚本，该脚本采用谷歌表单信息，创建一个新电子表格，将该数据导入新电子表格以进行计算并制作图表，然后将该表格的 PDF 通过电子邮件发送给表单用户。

我以为我接近了，但遇到了一个问题。数据导入到新的电子表格，但数据没有显示在我电子邮件的 PDF 中。

几个问题; 你们是否看到我可以对代码进行任何更改以帮助 PDF 显示数据？有没有更好或更简单的方法来完成我想做的事情？

谢谢！！

```
//Template Info
  var docTemplate = "myssID";

  var docName = "MotionControlReport";

function formSubmitCreate(e) {

  //Variables

  var userOrientation = e.values[1];
  var userStroke = e.values[2];
  var userStrokeUnits = e.values[3];
  var userName = e.values[11];
  var userCompany = e.values[12];
  var userEmail = e.values[13];
  var userPhone = e.values[14];

  //Template Info
  var copyId = DocsList.getFileById(docTemplate).makeCopy(docName+' for '+userName).getId();
  var copyDoc = SpreadsheetApp.openById(copyId);
  var copyBody = copyDoc.getActiveSheet();

  copyBody.getRange(1, 1).setValue(userName);
  copyBody.getRange(1, 2).setValue(userCompany);
  copyBody.getRange(1, 3).setValue(userEmail);
  copyBody.getRange(1, 4).setValue(userPhone);
  copyBody.getRange(1, 5).setValue(userOrientation);
  copyBody.getRange(1, 6).setValue(userStroke);
  copyBody.getRange(2, 6).setValue(userStrokeUnits);

  //Save as PDF and send e-mail
  var pdf = DocsList.getFileById(copyId).getAs("application/pdf");
  var subject = "Motion Control Report";
  var body = userName + ",  Thank you very much for using our online Linear Motion Sizing Tool.";
  MailApp.sendEmail(userEmail, subject, body, {htmlBody: body, attachments: pdf});
  //Deletes temporary Document
  DocsList.getFileById(copyId).setTrashed(true);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T15:41:37.847

您忘记刷新电子表格，数据从缓存中保存的时间稍晚于转换为 PDF 的时间。我检查了您的代码（带有冲洗），它运行良好，并为我从表单中以 PDF 格式邮寄正确的数据。

电子表格应用程序().flush()

# android - 枚举安装在 Android 手机上的 SD 卡

> ID：13608241
> 
> 赞同：0
> 
> 时间：2012-11-28T15:10:35.597
> 
> 标签：android, sd-card, mount

如何从 Java 或本机代码枚举安装在 Android 手机上的所有 SD 卡？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:19:23.163

这不仅会列出已挂载的 SD 卡，还会列出 Android 设备上所有已挂载的文件系统。

```
Runtime rt = Runtime.getRuntime();
Process proc = rt.exec("cat /proc/mounts");
BufferedReader stdInput = new BufferedReader(new 
     InputStreamReader(proc.getInputStream()));
BufferedReader stdError = new BufferedReader(new 
     InputStreamReader(proc.getErrorStream()));
// read the output from the command
while ((s = stdInput.readLine()) != null) {
    System.out.println(s);
} 
```

# javascript - jQuery Autocomplete - 在 IE 中显示焦点值列表

> ID：13608242
> 
> 赞同：1
> 
> 时间：2012-11-28T15:10:36.107
> 
> 标签：javascript, jquery, jquery-ui, jquery-autocomplete, jquery-ui-autocomplete

以前我问过这个[问题](https://stackoverflow.com/questions/13574849/jquery-autocomplete-display-list-of-values-on-focus)并接受了答案，因为它在 Chrome 中有效。但是，此答案不适用于 IE 8 或 IE 9（也可能是早期版本）。我所说的“不起作用”的意思是，在 IE 中，当从列表中选择一个值时，菜单应该关闭，但它仍然处于打开状态。我认为这是因为输入在选择值时保持焦点。如何在 IE 中修复它？

我创建了一个[jSFiddle](http://jsfiddle.net/GxsEC/4/)来说明这一点（在 IE 中打开它）。

```
$(document).ready(function() {
    $("#cityInput").autocomplete({
        minLength: 0,
        source: ['one', 'two', 'three', 'four', 'five']
    }).focus(function() {
        $(this).autocomplete("search", "");
    });
});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T15:48:20.547

尝试`false`从事件处理程序返回：

```
$("#cityInput").autocomplete({
    minLength: 0,
    source: ['one', 'two', 'three', 'four', 'five']
}).focus(function () {
    $(this).autocomplete("search", "");
    return false;
}); 
```

**更新小提琴：http:** [//jsfiddle.net/GxsEC/5/](http://jsfiddle.net/GxsEC/5/)

# linux - 如何将控制台命令作为字符串返回给正在运行的软件？

> ID：13608243
> 
> 赞同：0
> 
> 时间：2012-11-28T15:10:35.940
> 
> 标签：linux, shell, grails, groovy, terminal

举个简单的例子：
在 Linux 环境中，我有一个 Grails 脚本，我想使用**ls**命令获取所有目录：

```
def ls = "ls".execute()
println ls
// result is java.lang.UNIXProcess@f16b42 
```

我不想获得进程 ID，而是想获得与终端相同的输出

Ps.：这只是一个例子，我真的不需要列出目录。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T15:14:29.987

快速的方法是：

```
String output = 'ls'.execute().text
println output 
```

然而！如果它写了很多输出，阅读器就会填满，然后它就会全部阻塞。因此，您需要执行以下操作：

```
String output = new StringWriter().with { out ->
    Process proc = 'ls'.execute()
    proc.consumeProcessOutput( out, System.err )
    proc.waitFor()
    out.toString()
}
println output 
```

当然，您可能想要检查`proc.waitFor()`返回的 exitCode，并对错误流做一些更好的处理，然后将其发送到`System.err`，但您明白了 ;-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T01:56:02.007

你也可以做这样的事情。

```
File directory = new File(args[0])
Process p = "ls".execute([], directory)            
p.waitForProcessOutput(System.out, System.err) 
```

如果这是一个名为 listFiles.groovy 的脚本，您可以运行

```
groovy listFiles ~/blah 
```

并查看 blah 目录中的所有内容。这将等待该过程完成，然后再执行任何其他命令。

查看[Process](http://groovy.codehaus.org/groovy-jdk/java/lang/Process.html)的 groovy 文档。那里有很多有趣的东西。

# java - Spring-RMI-Callback 的端口号

> ID：13608246
> 
> 赞同：0
> 
> 时间：2012-11-28T15:10:49.053
> 
> 标签：java, spring, callback, port, rmi

我正在开发一个基于 spring 2.0 堆栈的应用程序，该应用程序具有通过 RMI 连接到服务器的富客户端。服务器正在侦听 RM​​I 注册表上的传入连接，该端口已在 spring 描述符中设置：

```
<bean class="org.springframework.remoting.rmi.RmiServiceExporter">
    <property name="serviceName" value="service.context" />
    <property name="service" ref="service.context" />
    <property name="serviceInterface" value="myApp.context.IServerContext" />
    <property name="registryPort" value="${server.port}" />
</bean> 
```

当连接发生时，我们还使用扩展的类建立 RMI 回调功能`UnicastRemoteObject`。

但我找不到指定此连接将在哪个端口（或端口范围）上建立的方法。在我的公司网络决定实施强大的防火墙策略之前，这不是问题。

现在我想知道（或决定）将使用哪些端口，以便可以在防火墙中声明它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:04:06.483

在回调类的构造函数中通过 super(port) 指定端口号。

# iphone - 在 ios 中解析嵌套对象和数组 json

> ID：13608251
> 
> 赞同：1
> 
> 时间：2012-11-28T15:10:58.943
> 
> 标签：iphone, ios, xcode

我正在尝试解析这样的json，其中使用了许多数组和对象如何解析它。

```
[
    {
        "MusicData": [
            {
                "user_music_id": "199",
                "music_id": "2",
                "music_name": "Country"
            },
            {
                "user_music_id": "200",
                "music_id": "2",
                "music_name": "Country"
            }
        ]
    },
    {
        "SportData": [
            {
                "user_sport_id": "179",
                "sport_id": "4",
                "sport_name": "Hockey"
            }
        ]
    },
    {
        "HobbyData": []
    },
    {
        "RelationData": []
    },
    {
        "MovieData": [
            {
                "user_movie_id": "144",
                "movie_id": "6",
                "movie_name": "Drama"
            }
        ]
    },
    {
        "BookData": []
    },
    {
        "CarrerData": [
            {
                "user_carrer_id": "186",
                "carrer_id": "7",
                "carrer_name": "Marketing"
            },
            {
                "user_carrer_id": "187",
                "carrer_id": "8",
                "carrer_name": "Sales"
            }
        ]
    }
] 
```

MyMusic 是一个字典，它有一个包含许多索引的数组。

如何一一解析其数据？使用标签 MyMusic、SportData 等。

我正在尝试使用以下代码从此 json 解析 CarrerData：

```
musicTemp._id = [NSString stringWithFormat:@"%@",[[[responseDict objectAtIndex:0] valueForKey:@"MusicData"] valueForKey:@"user_music_id"]]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:17:10.877

似乎您正在跳过一个数组，请尝试：

```
musicTemp._id = [NSString stringWithFormat:@"%@",[[[[responseDict objectAtIndex:0] valueForKey:@"MusicData"] objectAtIndex:0] valueForKey:@"user_music_id"]];` 
```

" `{}`" 代表字典
" `[]`" 代表数组

因此，要迭代您可以执行的对象：

```
 NSArray* array=[[responseDict objectAtIndex:0] valueForKey:@"MusicData"]; 
   for (NSDictionary *dict in array) {
        NSString *userMusicID=[dict objectForKey:@"user_music_id"];
        NSString *musicID=[dict objectForKey:@"music_id"];
        //etc 
    } 
```

您可以对其他元素执行相同的操作。

# parsing - Antlr3 搜索引擎语法

> ID：13608254
> 
> 赞同：1
> 
> 时间：2012-11-28T15:11:09.820
> 
> 标签：parsing, antlr3

创建一个语法来解析像 antlr3 这样的搜索引擎是我需要帮助的任务。

语法应该允许：

*   在术语之间省略 AND：示例 dog cat = dog AND cat
*   AND 应该优先于 OR：cat dog or boat = (cat AND dog) or boat
*   括号中术语的任意封装：cat OR( dog and (fish cow) OR bird)

实施上述所有标准是一个挑战（对我来说）。请查看我的语法建议错误和修复，因为无法满足所有标准。

**语法**

```
tokens {
FOR;
END;
FIELDSEARCH;
TARGETFIELD;
RELATION;
ANDNODE;
}
startExpression  : orEx;

expressionLevel4    
: LPARENTHESIS! orEx RPARENTHESIS! | atomicExpression;

expressionLevel3    
: (fieldExpression) | expressionLevel4 ;

expressionLevel2    
: (nearExpression) | expressionLevel3 ;

expressionLevel1    
: (countExpression) | expressionLevel2 ;

notEx   : (NOT^)? expressionLevel1;

andEx   : (notEx        -> notEx)
(AND? a=notEx -> ^(ANDNODE $andEx $a))*;

orEx    : andEx (OR^  andEx)*;

countExpression  : COUNT LPARENTHESIS WORD RPARENTHESIS (LESSTHEN|MORETHEN) EQUAL? NUMBERS -> ^(COUNT WORD ^(RELATION LESSTHEN? MORETHEN? EQUAL?) NUMBERS);

nearExpression  : NEAR^ LPARENTHESIS! (WORD|PHRASE) MULTIPLESEPERATOR! (WORD|PHRASE) MULTIPLESEPERATOR! NUMBERS RPARENTHESIS!;

fieldExpression : WORD PROPERTYSEPERATOR WORD -> ^(FIELDSEARCH ^(TARGETFIELD WORD));

atomicExpression 
: WORD
| PHRASE ;

LPARENTHESIS : '(';
RPARENTHESIS : ')';

LESSTHEN : '<';
MORETHEN : '>';
EQUAL : '=';

AND    : ('A'|'a')('N'|'n')('D'|'d');
OR     : ('O'|'o')('R'|'r');
ANDNOT : ('A'|'a')('N'|'n')('D'|'d')('N'|'n')('O'|'o')('T'|'t');
NOT    : ('N'|'n')('O'|'o')('T'|'t');
COUNT:('C'|'c')('O'|'o')('U'|'u')('N'|'n')('T'|'t');
NEAR:('N'|'n')('E'|'e')('A'|'a')('R'|'r');
PROPERTYSEPERATOR : ':';
MULTIPLESEPERATOR : ',';

fragment NUMBER : ('0'..'9');
fragment CHARACTER : ('a'..'z'|'A'..'Z'|'0'..'9'|'*'|'?');
fragment QUOTE     : ('"');

fragment SPACE     : ('\u0009'|'\u0020'|'\u000C'|'\u00A0');

//fragment UNICODENOSPACES  :  ('\u0000'..'\u0008'|'\u0010'..'\u0019'|'\u0021'..'\009F'|'\u00A1'..'\009F');
fragment UNICODENOSPACES  :  ('\u0021'..'\u0039'|'\u003B'..'\u007E'|'\u00A1'..'\uFFFF');

WS     : (SPACE) { $channel=HIDDEN; };
NUMBERS : (NUMBER)+;
PHRASE : (QUOTE)(CHARACTER)+((SPACE)+(CHARACTER)+)+(QUOTE);
WORD   : (UNICODENOSPACES)+; 
```

* * *

给定输入：

```
title:cats AND  fish OR Bird AND (bird and dirt) OR (bart or title:bard OR bird AND title:dort) 
```

此 AST 已创建，请注意在 WORD 术语中捕获的 ( )。 ![在此处输入图像描述](../Images/f1c3e7bd909762e11c1d0e1993e33d44.png)

可能还有其他错误或愚蠢的实现细节。这是我第一次使用 antlr。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:42:26.090

对于 ANTLR 的第一次尝试，您所做的不仅仅是一份出色的工作。

你的标记中有`'('`and的事实是因为范围包含括号。ANTLR 的词法分析器贪婪地匹配字符，*并*尝试尽可能多地匹配（！）。由于最后一条规则（匹配尽可能多的字符），它将根据输入（例如（a标记））创建单个标记，而*不是*两个标记（a和 a ）。只要确保括号不包含在任何需要匹配的内容中。`')'``WORD``'\u0021'..'\u0039'`*`"(bird"``WORD`*`LPARENTHESIS``WORD``WORD`**

 **如果我复制您的语法并更改`WORD`为：

```
WORD : CHARACTER+; 
```

您的输入被解析为：

![在此处输入图像描述](../Images/46328c9ecf071e9ba80380db3749d108.png)

## 编辑

> 是否可以将括号作为术语的正常部分？例如，blabla(bla(a)blabla 是否被识别为 2 个 WORDS？解析器必须决定括号是否引入了子项，或者只是形成 WORD 的普通字符。

您*可以在**lexer-level*上这样做，假设`(a...`and中的括号`...a)`是表达式的一部分，而不是 a 的一部分`WORD`：

```
WORD : UNICODENOSPACES ((UNICODENOSPACES | '(' | ')')* UNICODENOSPACES)? 
```

现在只允许在 a 中使用括号`WORD`。您可以通过允许 a`(`结尾的 a`WORD`也更有效，但我不确定这是否是一个好主意。**

# javascript - 在 AngularJS 中处理大型数据集

> ID：13608257
> 
> 赞同：2
> 
> 时间：2012-11-28T15:11:13.707
> 
> 标签：javascript, angularjs

首先：我认为这个问题适用于当今大多数（如果不是全部）具有持久层的 JavaScript MVWTF 框架。

我目前的任务是用 Angular 重写网站的评论管理部分，以加快那些必须批准或将评论标记为垃圾邮件的人的工作流程。该网站已经有相当多的评论，并且每天都有更多评论。

问题是：如何在 Angular 中处理这个数据集？我看到的所有示例都很好而且很漂亮，但是它们都适用于小型数据数组。

我们集思广益，最好的一个是：在启动 JS 应用程序时下载最新的 X 评论，然后在对现有（客户端）数据集应用 Angular 过滤器后搜索或优化列表时从服务器中提取匹配数据（或匹配数据的子集，如果我们正在分页）并将其与我们在客户端上已有的数据合并。这样，客户端上的数据将变得越来越广泛，随后的客户端搜索有望越来越精确。

希望这是有道理的。

还有其他想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T16:31:45.197

您必须小心的最重要的事情是通过在整个应用程序的多个范围内复制大型对象/数组而产生的膨胀。这可以简单地通过将大对象放在控制器的 $scope 中，然后将其传递给指令的 $scope（例如 ng-repeat）来引起。在您的应用程序中调查此问题的一个好方法是查看[Angular Batarang](https://github.com/angular/angularjs-batarang)

如果您将在多个控制器、指令和服务（我假设是）中使用大量数据，则将其放在 $rootScope 或它自己的服务中可能是个好主意。$rootScope 的情况是，如果您只想将其存储为数据并随心所欲地访问它。服务的情况是，如果您希望有可重用的方法来查询/添加/删除大块数据，您甚至可以让服务处理数据的 $http.get。

我希望这会有所帮助。

# wso2esb - WSO2ESB 4.5.1 axi2 属性 ssl.client.auth.cert.X509 始终为 NULL

> ID：13608258
> 
> 赞同：3
> 
> 时间：2012-11-28T15:11:17.450
> 
> 标签：wso2esb

当使用 NIO SSL 侦听器 (org.apache.synapse.transport.nhttp.HttpCoreNIOSSLListener) 时，不再`HttpServletContext`可用（显然），因此深入研究可以解决我发现的客户端证书的可能 Axis2 属性：

```
ssl.client.auth.cert.X509 
```

无论如何，此属性始终为空（我能够访问其他属性，因此我的访问代码似乎很好）。查看`HttpCoreNIOSSLListener`，似乎只要通过 HTTPS 完成请求，它就会被填充，但在我的情况下不起作用。

我在寻找合适的房产吗？有没有人成功找回这个属性？这是一个错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-03T14:46:08.533

报告的问题已在 WSO2 ESB 4.8.1 上进行了测试，并且按预期工作。

# android - 如何让 ColorStateList 中的“state_enabled”在 Spinner 中工作？

> ID：13608259
> 
> 赞同：1
> 
> 时间：2012-11-28T15:11:17.440
> 
> 标签：android

我觉得我错过了一些明显的东西，但我有这个名为“voices_spinner_white_text_color_states”的 ColorStateList，见下文：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item 
    android:state_enabled="false"
    android:color="@color/color_white_light_alpha" />

<item 
    android:state_enabled="true"
    android:color="@color/color_white" />
</selector> 
```

我在我的 SpinnerAdapter 中这样引用：

```
@Override
public View getView(int position, View convertView, ViewGroup parent)
{
    View item;

    if( convertView != null ){
        item = (GenericSpinnerItem)convertView;
    } else {
        item = new GenericSpinnerItem( context, false );
        ((GenericSpinnerItem)item ).valueText.setTextColor( context.getResources().getColorStateList(R.drawable.voices_spinner_white_text_color_states) );
        AbsListView.LayoutParams layoutParams = new AbsListView.LayoutParams( LayoutParams.MATCH_PARENT, M.dp(30));
        item.setLayoutParams(layoutParams);
    }

    ( (GenericSpinnerItem)item ).setup(values.get(position));

    return item;
} 
```

我期待当我打电话时

```
spinner.setEnabled( false ) 
```

微调器的文本将显示禁用状态。它很好地显示了启用状态，但是当我将微调器的启用状态更改为 false 时，它​​根本不显示禁用状态。

事实上，如果我将“android:state_enabled="false”更改为“android:state_enabled=" **true** ”，那么为了测试，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item 
    android:state_enabled="true"
    android:color="@color/color_white_light_alpha" />

<item 
    android:state_enabled="true"
    android:color="@color/color_white" />
</selector> 
```

“禁用状态”出现。不知道我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:01:19.037

[由于我无法评论你的问题，我会写一个答案。]

我经历过完全一样的。

有趣的是，TextView 对象可以成功地启用和禁用，并在它们自己时对这个设置做出适当的反应。

我此时的假设是 Spinner 根本不会（至少）将其启用状态（更改）传播到其子（ren），在这种情况下尤其是 TextView。

我认为这是一个错误或设计缺陷，因为它（不必要地）限制了人们可以开箱即用地更改微调器外观的方式，仅举一个方面。

当然，可以将 Spinner 子类化并（至少）将此事件传递给 TextView。但是，我不会认为这是一个干净的解决方案，除非有人可以指出 Spinner 在这方面符合 Android 的基本设计原则，这样行为就不会改变。

**[21012 年 12 月 7 日更新]**

还有两个（意外）发现。

首先，关于**android:addStatesFromChildren**，请参阅下面的评论。

其次，**android:disableChildrenWhenDisabled**显然是为 Holo 样式引入的，因为如果没有该功能，Holo Spinners 看起来就不好看，请参阅[https://android.googlesource.com/platform/frameworks/base/+/42b7e99b11a5ab1cbc0beebe0b15e46bdf462dff%5E!/](https://android.googlesource.com/platform/frameworks/base/+/42b7e99b11a5ab1cbc0beebe0b15e46bdf462dff%5E!/ "https://android.googlesource.com/platform/frameworks/base/+/42b7e99b11a5ab1cbc0beebe0b15e46bdf462dff%5E!/")。尽管用词不当，但如果设置为 true，则 Spinner 应该将其启用状态（*即*true*和*false，即）传播给其子级。

据推测，使用您的应用程序定位 Holo（或更高版本）主题会将其设置为 true，而如果您定位较旧的主题（相应的 Android 版本），它应该是 false（相应的不存在）。

目前看来，在 Eclipse 中明确处理此属性可能会出现问题，因为在 Eclipse 插件中添加它的时间相当晚，请参阅[https://android.googlesource.com/platform/sdk/+/8381e23ec6d557059d15c73ea313d8324359f762% 5E2..8381e23ec6d557059d15c73ea313d8324359f762/](https://android.googlesource.com/platform/frameworks/base/+/42b7e99b11a5ab1cbc0beebe0b15e46bdf462dff%5E!/ "https://android.googlesource.com/platform/frameworks/base/+/42b7e99b11a5ab1cbc0beebe0b15e46bdf462dff%5E!/")

换句话说，当一个人为启用 Holo 或更高版本的设备进行开发时，可以期望 Spinner 将其启用状态传播给他们的孩子。到今天为止，Android 2 设备仍在销售并占有一定的市场份额，在许多情况下，人们将不得不使用开箱即用的旧版 Spinner。

# perl - 我想启动一个 CMD（命令提示符），然后传递两个值并使用 PERL 运行相同的值

> ID：13608262
> 
> 赞同：2
> 
> 时间：2012-11-28T15:11:21.813
> 
> 标签：perl

到目前为止，我正在这样做：启动一个 cmd，然后输入以下命令“D:\hi.pl”“D:\123\hi.xml”并回车。

我想使用 perl 脚本执行上述过程，因为有多个 xml 文件。

但不确定如何在 cmd 启动后传递 perl 和 XML 文件的路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:25:33.350

根据[perlvar](http://perldoc.perl.org/perlvar.html)，

```
 $^X     The name used to execute the current copy of Perl, from C's
           "argv[0]" or (where supported) /proc/self/exe. 
```

所以，你可以试试：

```
system $^X, 'D:\hi.pl' 'D:\123\hi.xml'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T20:34:32.487

你为什么不在命令提示符下输入这个：

```
for /r d:\123 %a in (*.xml) do @perl "D:\hi.pl" "%a" 
```

`hi.pl`这将为下的每个`*.xml`文件`d:\123`和所有子目录启动脚本。

# asp.net - ASP.NET 网站 - 默认命名空间

> ID：13608263
> 
> 赞同：0
> 
> 时间：2012-11-28T15:11:31.580
> 
> 标签：asp.net

在 Visual Studio 中，您可以使用以下屏幕为 VB.NET 应用程序设置默认命名空间：

![在此处输入图像描述](../Images/f37dac592a872058736b555409219806.png)

您可以对作为 ASP.NET Web 应用程序的 Visual Studio 项目执行相同的操作。它不适用于 ASP.NET 网站，为什么？我在一个网站上看到了这个：

![在此处输入图像描述](../Images/91496e2ca6f55240b7c5423ebd2e177e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T15:32:08.617

由于 ASP.NET 网站的分发和编译方式，没有理由使用默认命名空间，因为每个 ASP.NET 文件都是在第一次加载页面时动态编译并转换为自己的 DLL（“旧方式”做 ASP.NET)。

但是，对于 Web 应用程序，一堆代码隐藏文件（以及可能的其他代码文件）被预编译到单个 DLL 中，这会造成将所有这些文件放入单个命名空间中的好主意。

你可以把它想象成一个 Web Site 是一个 Web Pages 的集合，而一个 Web Application 是一个统一的整体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T15:15:23.823

简短的回答：网站项目缺少 Web 应用程序项目所具有的许多功能。

请参阅[ASP.NET：网站还是 Web 应用程序？](https://stackoverflow.com/questions/398037/asp-net-web-site-or-web-application)进行详细比较。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-27T23:32:43.810

我正在使用网站，我需要一种从 Global.asax 文件中访问 BundleConfig、IdentityConfig 和 RouteConfig 类和模块的方法。我能够将这些文件放入“App_Code”文件夹中，该文件夹允许您在类和模块周围放置名称空间。

这是一个例子：

```
Namespace TCEmpSite
    Public Module RouteConfig
        Sub RegisterRoutes(ByVal routes As RouteCollection)
            Dim settings As FriendlyUrlSettings = New FriendlyUrlSettings()
            settings.AutoRedirectMode = RedirectMode.Permanent
            routes.EnableFriendlyUrls(settings)
        End Sub
    End Module
End Namespace 
```

然后在 Global.asax 文件中我能够做到这一点：

```
Private Sub Application_Start(sender As Object, e As EventArgs)
        ' Code that runs on application startup
        TCEmpSite.RouteConfig.RegisterRoutes(RouteTable.Routes)
        TCEmpSite.BundleConfig.RegisterBundles(BundleTable.Bundles)
        TCEmpSite.IdentityConfig.ConfigureIdentity()
    End Sub 
```

希望这对某人有帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T15:29:27.750

网站不会创建 dll，但会创建网络应用程序。要为网站创建 dll，请使用 web_deploy 项目。

# asp.net - Internet Explorer 8 不显示加载页面 ASP.NET

> ID：13608266
> 
> 赞同：0
> 
> 时间：2012-11-28T15:11:50.703
> 
> 标签：asp.net, internet-explorer-8

当我第一次打开一个站点时，它会很好地加载，但是一旦加载并单击页面上的任何链接，就会出现问题。

Internet Explorer 8 不显示页面的加载，一旦该页面完全加载，我会在几秒钟后突然到达单击的页面。每个使用 IE8 打开我们网站的人都会遇到这种情况。

这可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:09:41.510

该问题是由 nivo 滑块（jquery 插件）引起的。不知道是什么，但我有 2.4 版本，当我切换到 3.1 时，问题已解决。

# c# - 使用重载函数迭代列表

> ID：13608271
> 
> 赞同：0
> 
> 时间：2012-11-28T15:12:16.663
> 
> 标签：c#, generics, overloading, variance

给定以下类结构：

```
class Base {}
class DerivedA: Base {}
class DerivedB: Base {}
class Container
{
    public List<Base> Items { get; }
} 
```

随着我的应用程序开发更多功能，派生对象列表会随着时间的推移而增长。我正在尝试做：

```
Container container = ReturnsContainer();
foreach (var item in container.Items)
{
    doStuff(item);
} 
```

其中 doStuff(item) 被派生类型重载。

```
void doStuff(DerivedA) {}
void doStuff(DerivedB) {} 
```

这不起作用，因为编译器说“无法从'Base'转换为'DerivedA'”和“最佳重载方法匹配doStuff（DerivedA）有一些无效参数”。我能想到的最好方法是：

```
Container container = ReturnsContainer();
foreach (var item in container.Items)
{
    if (item is DerivedA)
    {
        doStuff((DerivedA)item);
    }
    else if (item is DerivedB)
    {
        doStuff((DerivedB)item);
    }
} 
```

关于如何使这个更清洁的任何想法？由于我的 Derived 类型只会随着时间的推移而增长，因此我必须返回并添加到这个 long if 结构才能继续进行这项工作。

我认为随着派生类型数量的增加，container.Items.OfType<> 解决方案将转化为不断增长的（和不必要的）性能损失。

我必须为此使用通用代表吗？*对于感觉*应该是简单的多态性的东西来说，这似乎是一个过于复杂的解决方案。

**编辑**：为了更清楚起见，假设 Base 和 Derived 类型层次结构位于单独的 API 层上，并且不可修改（最终类）。该解决方案必须使用现有的继承结构，并且不能扩展 Base 和 Derived 对象。尽管随着时间的推移，API 层可以增长新的派生类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T15:15:56.353

您要么必须使用运行时类型信息（例如反映类型）来确定调用哪个函数，要么可以使用`doStuff`在基类上声明并在派生类中实现的抽象方法（ ）。在许多情况下，您希望避免使用反射的解决方案，但如果您无法修改所涉及的类，则没有其他选择，并且使用`dynamic`其他答案中提出的方法是实现您想要的非常简单的方法。

例如实现两个重载：

```
void doStuff(DerivedA a) {
  ...
}

void doStuff(DerivedB b) {
  ...
} 
```

并从循环中调用它们：

```
foreach (dynamic item in container.Items)
  doStuff(item); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T15:18:08.823

这里有几个选项，但归根结底`doStuuf`是如果将来要添加新的派生类型，怎么知道该怎么做？

因此，一种选择是，如果`Container`确实一次只包含一种类型，那么您可以将其设为通用：

```
class Container<T> where T: Base
{
    public List<T> Items { get; }
} 
```

现在当你迭代它时，你知道这`Items`是一个`DerivedA`或`DerivedB`

```
Container<DerivedA> container = ReturnsContainerOfDerivedA();
foreach (var item in container.Items)
{
    doStuff(item); // item is definately DerivedA
} 
```

这意味着您要么有多种`doStuff`方法

```
public void doStuff(DerivedA item){...}
public void doStuff(DerivedB item){...} 
```

或者如果更合适，您可以使用 1 以作为基础

```
public void doStuff(Base item){...} 
```

*这*就是*简单多态*的优点！

* * *

如果您使用的是 C#3.5 ，则第二个选项是定义`doStuff`为采取`dynamic`

```
public void doSomething(dynamic item){..} 
```

但我个人会避免这个选项！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T15:18:44.897

最简单的解决方案（不改变`Base`/`DerivedA`等）是将您的对象转换为[`dynamic`](http://msdn.microsoft.com/en-us/library/dd264736.aspx)：

```
foreach (dynamic item in container.Items)
{
    doStuff(item);
} 
```

所以实际调用的方法是在运行时确定的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T15:24:11.887

对象的用户`Base`应该需要知道`Base`它是什么类型的对象。在这种情况下，很明显它`Base`应该是抽象的，它应该有一个抽象方法来定义对象`doStuff`需要的任何行为`Base`。（如果`Base`不能选择抽象，您可以让它定义一个没有要覆盖的主体的虚拟方法，或者您可以让所有派生对象实现一个接口。）

完成后，每个派生对象都可以覆盖定义的方法，以提供每种类型之间的任何不同行为。

完成后，`Container`不需要将对象转换/转换为 以外的任何东西`Base`，每个对象`Base`都已经拥有单个`doStuff`方法所需的所有信息。

# mysql - 如何将今年的第一个日期放在 WHERE 子句中。MYSQL

> ID：13608272
> 
> 赞同：1
> 
> 时间：2012-11-28T15:12:18.237
> 
> 标签：mysql, database, where

我需要我的查询来选择今年的第一个日期和当前日期之间的所有日期。（即今年数据库中的所有日期），但是我的代码在过去 12 个月内这样做。如何更改我的代码以确保其唯一日期从今年开始？

```
WHERE DATE_SUB(CURDATE(), INTERVAL 1 YEAR) <= date 
```

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T15:14:16.243

```
SELECT ...
FROM   ...
WHERE DATE_SUB(CURDATE(), INTERVAL 1 YEAR) <= date AND
      YEAR(your_datecolumn) = YEAR(CURDATE()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T15:36:06.693

```
where created_date between MAKEDATE(YEAR(now()), 1) and now(); 
```

MAKEDATE(YEAR(now()), 1) 给你 '01/01/(thisyear)'

# c# - 在 AppDomain 中创建委托

> ID：13608273
> 
> 赞同：0
> 
> 时间：2012-11-28T15:12:19.503
> 
> 标签：c#, reflection, delegates, c++-cli, appdomain

如何使用反射在应用程序域中创建委托的实例？

我有一个 C++/CLI DLL，我从中动态加载一个 C# DLL。由于 C# DLL 位于网络共享上，因此我将其加载到单独的 AppDomain（其中 PermissionSet 为 PermissionState.Unrestricted）。

这在创建类时工作正常：

```
AppDomain^ appDomain = AppDomain::CreateDomain( ... );
Object^ obj = appDomain->CreateInstanceAndUnwrap(
    assemblyName,
    "MyNamespace.MyClass",
    false, // ignoreCase
    BindingFlags::CreateInstance | BindingFlags::Public | BindingFlags::Instance,
    nullptr, // binder
    args, // constructor arguments
    nullptr, // culture
    nullptr); // activationAttributes 
```

但是，当以相同方式创建委托时：

```
array<Object^>^ args = gcnew array<Object^>(1);
args[0] = MyFunctionThatIWantTheDelegateToWrap;
Object^ obj = appDomain->CreateInstanceAndUnwrap(
    assemblyName,
    "MyNamespace.MyDelegate",
    false, // ignoreCase
    BindingFlags::CreateInstance | BindingFlags::Public | BindingFlags::Instance,
    nullptr, // binder
    args, // constructor arguments
    nullptr, // culture
    nullptr); // activationAttributes 
```

我得到错误：

> 未处理的异常：System.MissingMethodException：找不到类型“MyNamespace.MyDelegate”的构造函数。

所以我假设我不能使用`CreateInstanceAndUnwrap()`. 所以我的问题是，我如何创建一个？

如果您想知道，这里是委托定义：

```
namespace MyNamespace
{
    public delegate string MyDelegate(int fieldId, int size);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:16:13.510

看看[AppDomain.DoCallBack](http://msdn.microsoft.com/en-us/library/system.appdomain.docallback.aspx)方法。请注意实际方法中使用的类型。您可能需要手动加载其他程序集，或者将其他 AppDomain 的[基本目录](http://msdn.microsoft.com/en-us/library/system.appdomainsetup.applicationbase.aspx)和[私有 bin 路径](http://msdn.microsoft.com/en-us/library/system.appdomainsetup.privatebinpath.aspx)设置为与您的主程序集相同。

# html - 文本在 HTML5 中的显示方式不同

> ID：13608275
> 
> 赞同：-1
> 
> 时间：2012-11-28T15:12:25.993
> 
> 标签：html, unicode, right-to-left

我正在构建一个适用于 iPhone 和 Android 的 HTML5 应用程序。当我以这种形式显示文本时：

```
"the number is between 10%-15% 2\. the number between 25%-35% 3.the number between 25%-35%...." 
```

在 Android 中，我看到它输入正确，但在 iPhone 中，我看到了这个

```
"the number is between 10%-15 2.%" 
```

任何想法如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:30:15.160

你没有给我们太多的工作，但我会调查文本编码与 iOS 不兼容的可能性（例如，文件是 UTF-8 编码的）。另一个可能的问题是您在上面显示的文本被视为 URL 编码。

在这里阅读：

[UTF-8 与 Unicode](https://stackoverflow.com/questions/643694/utf-8-vs-unicode)

[stringByAddingPercentEscapesUsingEncoding 转义的字符是什么？](https://stackoverflow.com/questions/8693923/what-are-the-characters-that-stringbyaddingpercentescapesusingencoding-escapes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T18:59:43.210

尝试`the number is between 10%%-15%% 2\. the number between 25%%-35%% 3.the number between 25%%-35%%`

# database - 具有时间同步的分布式数据库的解决方案/设计，PK/FK的解决方案

> ID：13608276
> 
> 赞同：1
> 
> 时间：2012-11-28T15:12:25.960
> 
> 标签：database, architecture, key, distributed, offline

这个问题更多的是关于架构和想法，而不是关于代码。

问题：让我们有一个存储所有内容的后端主数据库。然后我们有一个前端本地数据库（SQLLite 或类似的），它只存储用户/设备的相关数据。

用户可以在前端创建数据。然而，多个用户可以同时创建相同的类型（即收据），如果我们使用简单的 int autoincrement PK，后端会发生冲突。

建议的解决方案是：我们使用复合 PK，其中 PK 包括： -autoincrement integer -device ID -user ID

现在，从逻辑上讲，deviceID 和 userID 应该是设备和用户表的 FK，但是由于多种原因，将所有设备/用户存储在每个前端设备上是不切实际的/不可能的，因此 FK 会造成问题。

建议的解决方案是在前端省略 FK req 并仅在后端检查数据完整性，但老实说，我不确定风险/收益是否值得。

有没有人到过这一点和/或在部署它后有一些经验？你觉得呢？你有没有什么想法？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T22:11:33.183

弗拉德，

我认为您要解决的难题是：设备如何生成在所有设备上唯一的标识符？过去该问题的答案是创建一个“全局唯一标识符”(GUID) 或“通用唯一标识符”(UUID)，其中包含“设备 ID”、“时间戳”和随机数等唯一标识信息. 可以在此处找到执行此操作的 IETF 标准：[RFC4122](https://www.rfc-editor.org/rfc/rfc4122)。

因此，大多数数据库供应商至少提供了一个 UUID() 或 GUID() SQL 函数来返回这些唯一标识符之一。顺便说一句，我不知道[SQLLite](http://www.sqlite.org/lang_corefunc.html)是否提供了一个，但我知道[SequelSphereDB](http://www.sequelsphere.com)确实提供了 UUID() 函数。最终结果是您可以使用这些来为行创建唯一标识符。

因此，与其拥有由数字、设备 ID 和用户 ID 组成的组合主键，不如使用单列 CHAR(36) 来存储在创建行时动态生成的 UUID。

UUID 优点：

*   单列
*   在客户端生成，无需联系任何其他设备
*   “保证”是独一无二的，或者至少比其他可能性要独特得多。

UUID 缺点：

*   列存储很大：CHAR(38)。
*   与代理键 one-up 生成器相比，生成速度较慢。

# java - 在 JSP 中检索多个选择值时出现空指针异常

> ID：13608282
> 
> 赞同：-1
> 
> 时间：2012-11-28T15:12:44.270
> 
> 标签：java, html, jsp

使用 JSP，在我的 HTML 中，我有一个提交到另一个页面的表单。该表单有一个包含多个元素的选择列表。在提交表单之前，在 java 脚本中，我确保选择了列表中的所有元素。然后我将表单提交到下一页。在下一页中，我将列表中的选定值分配给 java 数组。当我尝试显示数组的大小或该数组中的任何值时，我得到空指针异常。

这是我的列表表格：

```
<form name="inputGenesForm" id="test" method="POST" ACTION="result.jsp" enctype="multipart/form-data">          
    <div style=" position:absolute;top:6%;left:39%;">
    ...
    ...
    <select id="inputSet2" multiple="multiple" style="position:absolute; top: 93px; left: 270px; width: 200px; height: 200px;"> 
```

在 result.jsp 中，

```
<body background="image/geneBG.jpg">
<%       
    String [] selectedGenes= request.getParameterValues("inputSet2");
%>

<script>    
    alert(<%=selectedGenes.length%>);
</script> 
```

任何人都可以帮忙吗？谢谢你。

向 result.jsp 提交表单时出错：

```
type Exception report

message

descriptionThe server encountered an internal error () that prevented it from fulfilling this request.

exception

org.apache.jasper.JasperException: java.lang.NullPointerException
root cause

java.lang.NullPointerException
note The full stack traces of the exception and its root causes are available in the GlassFish Server Open Source Edition 3.1.2.2 logs. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:27:29.477

在 results.jsp 文件中提醒这个：

```
alert(<%=request.getParameterValues("inputSet2")%>); 
```

并删除这一行：

```
String [] selectedGenes= request.getParameterValues("inputSet2"); 
```

确定 inputSet2 字段为空的事实。

此外，为了能够查看发送到结果页面的内容，请更改您的表单发布方法以获取：

```
<form name="inputGenesForm" id="test" method="get" action="result.jsp"> 
```

如果你不能缩小到下面的问题，我做了一个小测试，然后开始工作。

表单.jsp

```
<html>
<head>
<title>Testing MultiSelect</title>
<script>
var validate= function() {
   if(document.forms.form1.select2.selectedIndex == -1) {
        alert("Please select one or more options");
        return false;
   }
   return true;
};
</script>
</head>
<body>
<form id="form1" name="form1" method="get" action="result.jsp">
      <select name="select2" size="3" multiple="multiple" tabindex="1">
        <option value="1">one</option>
        <option value="2">two</option>
        <option value="3">three</option>
        <option value="4">four</option>
        <option value="5">five</option>
        <option value="6">six</option>
        <option value="7">seven</option>
        <option value="8">eight</option>
        <option value="9">nine</option>
        <option value="10">ten</option>
      </select>
      <br>
      <input type="submit" name="Submit" value="Submit" tabindex="2" onclick="return validate()" />
</form>
</body>
</html> 
```

结果.jsp

```
<html>
<head>
<title>Results Page</title>
</head>
<body>
<h1>These Are Your Results</h1>
<p>
<% String [] selectedGenes = request.getParameterValues("select2");
   for (String selectedGene : selectedGenes)
        out.println(selectedGene + "<br>");
%>
</body>
</html> 
```

我选择了前三个选项，get url 是

```
result.jsp?select2=1&select2=2&select2=3&Submit=Submit 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T15:43:17.307

尝试在选择中添加名称属性

```
<select name="inputSet2" ...> 
```

“只有具有 name 属性的表单元素在提交表单时才会传递它们的值。” [http://www.w3schools.com/tags/att_input_name.asp](http://www.w3schools.com/tags/att_input_name.asp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T21:06:00.173

request.getParameterValues() 不能与“enctype="multipart/form-data" 结合使用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T15:14:12.887

你不应该先检查这个是否有空值吗？

```
selectedGenes.length 
```

[getParameterValues()](http://docs.oracle.com/javaee/1.3/api/javax/servlet/ServletRequest.html#getParameterValues%28java.lang.String%29)的文档说：

> 返回包含给定请求参数具有的所有值的 String 对象数组，*如果参数不存在，则返回 null*。

（我的重点）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-23T12:59:12.973

我有同样的问题，我解决了：

```
String [] selectedGenes = request.getParameterValues("select2[]"); 
```

# iphone - 如何处理所有的贬义

> ID：13608284
> 
> 赞同：1
> 
> 时间：2012-11-28T15:12:48.817
> 
> 标签：iphone, objective-c, ios, ios6

这可能是一个转储问题，但是面对 iOS6 中的所有折旧，您如何处理向后兼容性？我目前不确定如何自己处理它们。

例子：

`UITextAlignment`已弃用，但`NSTextAlignment`在使用 iOS 5 及更低版本的设备上无法使用

`dismissModalViewControllerAnimated:`也被弃用，有利于`dismissViewControllerAnimated: completion:`

那么如何/应该如何保持与旧 iOS 版本的兼容性？有没有办法在 XCode 4.5 模拟器中测试旧版本？

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T15:50:32.873

要在您的代码中获取所有不推荐使用的方法，只需将应用程序的部署目标设置为 iOS 6.0，然后编译您的代码，然后您将收到每个不推荐使用的方法的警告。

为了解决弃用问题，请使用以下方法之一：

1-

```
float systemVersion = [[[UIDevice currentDevice]systemVersion]floatValue];

    if(systemVersion < 6.0)
    {
        calendarArray = [self.eventStore calendars];
    }
    else
    {
        calendarArray = [self.eventStore calendarsForEntityType:EKEntityTypeEvent];
    } 
```

2-`respondToSelecter`检测对象是否响应此类选择器的 USer 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T15:15:34.907

您可以下载较旧的模拟器版本。Xcode（本地应用程序菜单）> Preferences > Downloads > 单击以安装所需的模拟器版本。可用版本：4.3、5.0、5.1

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T15:21:02.040

在方法的情况下，您可以使用`respondToSelector:`方法来检测*新方法*是否可用，例如：

```
if ([controller respondToSelector:@selector(dismissViewControllerAnimated:completion:)]) {
    [controller dismissViewControllerAnimated:YES completion:nil];
} else {
    [controller dismissModalViewControllerAnimated:YES];
} 
```

# java - 与java相比，c中的openssl摘要不同

> ID：13608286
> 
> 赞同：1
> 
> 时间：2012-11-28T15:12:55.033
> 
> 标签：java, c, openssl, digital-signature, message-digest

以下是作为 DigitalSigning 处理程序一部分的代码

```
final String NAMESPACEURI_WSSECURITY_WSU= 
  "http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd";
final String NAMESPACEURI_WSSECURITY_WSSE =
      "http://docs.oasisopen.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-
      1.0.xsd";
final String NAMESPACEURI_XMLSIGNATURE_DS = "http://www.w3.org/2000/09/xmldsig#";
final String ATTRIBUTENAME_X509TOKEN = 
   "http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile
    -1.0#X509v3";
final String ENCODINGTYPE_BASE64 = 
  "http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-
   security-1.0#Base64Binary";

SOAPHeaderElement securityElement = header
    .addHeaderElement(new QName(
            NAMESPACEURI_WSSECURITY_WSSE, "Security",
                            "wsse"));
//securityElement.setMustUnderstand(true);
securityElement.addNamespaceDeclaration("wsu",
                    NAMESPACEURI_WSSECURITY_WSU);
securityElement.addNamespaceDeclaration("ds",
                    NAMESPACEURI_XMLSIGNATURE_DS);
SOAPBody body = envelope.getBody();
String bodyIdRef = "Id-1-BD-1";
body.addAttribute(new QName(NAMESPACEURI_WSSECURITY_WSU, "Id",
                    "wsu"), bodyIdRef);
// Prepare security token element
SOAPElement binarySecurityTokenElement = securityElement
.addChildElement("BinarySecurityToken", "wsse");

String tokenIdRef = "Id-1-TK-1";
binarySecurityTokenElement.addAttribute(new QName(
           NAMESPACEURI_WSSECURITY_WSU, "Id", "wsu"), tokenIdRef);
binarySecurityTokenElement.addAttribute(new QName("ValueType"),
                    ATTRIBUTENAME_X509TOKEN);
binarySecurityTokenElement.addAttribute(new QName(
    "EncodingType"), ENCODINGTYPE_BASE64);
// Open keystore and insert encoded certificate
KeyStore store = KeyStore.getInstance("PKCS12"); //default is "JKS" 
store.load(new FileInputStream(new File(KEYSTORE_LOC)),
        KEYSTORE_STOREPASS.toCharArray());
KEYSTORE_KEYALIAS = (String)store.aliases().nextElement();
Certificate certificate = store
        .getCertificate(KEYSTORE_KEYALIAS);
binarySecurityTokenElement.addTextNode(new String(Base64Coder
        .encode(certificate.getEncoded())));

// Prepare digest for Signature generation
XMLSignatureFactory signFactory = XMLSignatureFactory
    .getInstance("DOM");
C14NMethodParameterSpec spec1 = null;
CanonicalizationMethod c14nMethod = signFactory
    .newCanonicalizationMethod(
CanonicalizationMethod.EXCLUSIVE, spec1);
DigestMethod digestMethod = signFactory.newDigestMethod(
            DigestMethod.SHA256, null);
String methodNS = "http://www.w3.org/2001/04/xmldsig-more#rsa-sha256";
SignatureMethod signMethod = signFactory.newSignatureMethod(
                    methodNS, null);
TransformParameterSpec spec2 = null;
Transform transform = signFactory.newTransform(
        CanonicalizationMethod.EXCLUSIVE, spec2);
List<Transform> transformList = Collections
        .singletonList(transform);
List<Reference> referenceList = new ArrayList<Reference>();
Reference reference1 = signFactory.newReference(
    "#" + bodyIdRef, digestMethod, transformList, null,
                    null);
referenceList.add(reference1);
SignedInfo signInfo = signFactory.newSignedInfo(c14nMethod,
                signMethod, referenceList);
// Get Private key
Key privateKey = store.getKey(KEYSTORE_KEYALIAS,
                KEYSTORE_KEYPASSWORD.toCharArray());
// Create <SignatureValue>
DOMSignContext dsc = new DOMSignContext(privateKey,
                    securityElement);
dsc.setDefaultNamespacePrefix("ds");
XMLSignature signature = signFactory.newXMLSignature(signInfo,
                    null);
signature.sign(dsc);
// Prepare key info element
SOAPElement signatureElement = (SOAPElement) securityElement
                    .getLastChild();
SOAPElement keyInfoElement = signatureElement
                    .addChildElement(new QName(
NAMESPACEURI_XMLSIGNATURE_DS, "KeyInfo", "ds"));
            SOAPElement

securityTokenReferenceElement = keyInfoElement.addChildElement(
                    "SecurityTokenReference", "wsse");
SOAPElement referenceElement = securityTokenReferenceElement
                .addChildElement("Reference", "wsse");
referenceElement.setAttribute("URI", "#" + tokenIdRef);
referenceElement.setAttribute("ValueType",
                ATTRIBUTENAME_X509TOKEN); 
```

我启用了 SOAP 调用的日志记录，并提取了正在计算 SHA-256 形式的摘要的字符串。我使用相同的字符串来计算 c 中的摘要。以下是计算该值的 C++ 代码。这两个值都不同。

```
 #include <openssl/sha.h>
  #include <openssl/evp.h>
  #include <string>
  #define std::string String

  String conString = "String from logs ";
  unsigned char md[SHA256_DIGEST_LENGTH];
  unsigned int size = 0;
  EVP_Digest(conString.c_str(), conString.size(), md, &size, EVP_sha256(),
        NULL); 
```

在这方面的任何帮助都会有所帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:17:46.683

非常奇怪，但以下用于计算 sha256 的片段会生成与 java 输出匹配的正确哈希。

```
String sha256(const String& string)
{

   unsigned char hash[SHA256_DIGEST_LENGTH];
   SHA256_CTX sha256;
   SHA256_Init(&sha256);
   SHA256_Update(&sha256, string.c_str(), string.size());
   SHA256_Final(hash, &sha256);
   const char* digest = mcommons::util::base64(&hash[0], SHA256_DIGEST_LENGTH);
   String   conString = digest;
    free((char*) digest);
   return conString;
} 
```

:)

# cuda - 我们如何使用 cuPrintf()？

> ID：13608287
> 
> 赞同：3
> 
> 时间：2012-11-28T15:12:55.010
> 
> 标签：cuda, nvcc

我们必须做什么才能使用 cuPrintf()？（设备计算能力 1.2，Ubuntu 12）我找不到“cuPrintf.cu”和“cudaPrintf.cuh”，所以我下载了它们的代码并包含它们：

```
#include "cuPrintf.cuh"
#include "cuPrintf.cu" 
```

顺便说一句，这是代码的其余部分：

```
__global__ void hello_kernel (float f) {
printf ("Thread number %d. f = %d\n", threadIdx.x, f);
}

    int main () {
    dim3 gridSize = dim3 (1);
    dim3 blockSize = dim3 (16);
    cudaPrintfInit ();
    hello_kernel <<< gridSize, blockSize >>> (1.2345f);
    cudaPrintfDisplay (stdout, true);
    cudaPrintfEnd ();
    return (0);
} 
```

但是nvcc还是报错：

```
max@max-Lenovo-G560:~/CUDA/matrixMult$ nvcc printfTest.cu -o printfTest

printfTest.cu(5): error: calling a __host__ function("printf") from a __global__
function("hello_kernel") is not allowed 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T15:34:32.400

在你的内核中，而不是这个：

```
printf ("Thread number %d. f = %d\n", threadIdx.x, f); 
```

你应该做这个：

```
cuPrintf ("Thread number %d. f = %d\n", threadIdx.x, f); 
```

除此之外，我相信您的代码是正确的（它适用于我）。

这个[SO question/answer](https://stackoverflow.com/questions/6557051/cuprintf-problem)提供了有关正确使用 cuPrintf 的更多提示。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-28T15:37:12.760

包含`<stdio.h>`和编译`-arch=sm_20`.

**详情**：

代码：

```
#include <stdio.h>
__global__ void hello_kernel (float f) {
    printf ("Thread number %d. f = %d\n", threadIdx.x, f);
}

int main(){
    return 0;
} 
```

汇编：

```
 nvcc -arch=sm_20 -o printfTest printfTest.cu 
```

# java - 在运行时编译动态生成的类而不写入文件

> ID：13608290
> 
> 赞同：3
> 
> 时间：2012-11-28T15:13:04.527
> 
> 标签：java, code-generation

我正在使用 JCodeModel 生成 java 源代码，现在想在运行时编译。但我不想以前将 Java 文件写入光盘。

据我所知，使用 javax.tools.JavaCompiler 可以进行动态编译（[参见示例](http://www.accordess.com/wpblog/an-overview-of-java-compilation-api-jsr-199/)），但看起来我需要源代码。

不幸的是，我找不到直接从 JDefinedClass 获取源代码的方法。似乎我需要将 JDefinedClass 写入磁盘上的 File 对象，然后再读取源代码。

这真的有必要还是有一些解决方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T11:03:38.780

您可以使用以下代码来避免磁盘操作，并使用以下方法将代码直接写入内存`SingleStreamCodeWriter`：

```
JCodeModel jCodeModel = createJCodeModel(); // create and prepare JCodeModel 
ByteArrayOutputStream baos = new ByteArrayOutputStream();
CodeWriter codeWriter = new SingleStreamCodeWriter(baos);
jCodeModel.build(codeWriter);

String code = baos.toString(); // you can use toString(charset) if there are special characters in your code 
```

# jquery - jQuery单击并取消绑定

> ID：13608298
> 
> 赞同：1
> 
> 时间：2012-11-28T15:13:47.910
> 
> 标签：jquery, onclick, jquery-events, unbind

我不是软件开发人员，刚开始学习 jQuery。在下面的代码中，我在单击时将`.green`类添加到`.show_hide`div，并且我想在再次单击时删除`.green`类，`.show_hide`并且还应该关闭`.slidingDiv`。

```
<div><a href="#" class="show_hide">Show/hide</a></div>
<div class="slidingDiv">
Fill this space with really interesting content. <a href="#" class="show_hide">hide</a></div>​

.slidingDiv {
    height:300px;
    background-color: #99CCFF;
    padding:20px;
    margin-top:10px;
    border-bottom:5px solid #3399FF;
}

.show_hide {
    display:none;
}
.green {
    background: green;
}​

$(document).ready(function(){

    $(".slidingDiv").hide();
    $(".show_hide").show();

    $('.show_hide').click(function(){
        $(".slidingDiv").slideToggle();
        $(".show_hide").addClass("green");
    });    

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:19:55.153

看看这个，你需要使用`toogleClass`函数。

**现场演示：**

[http://jsfiddle.net/oscarj24/Waq4W/](http://jsfiddle.net/oscarj24/Waq4W/)

# java - Java 多个拖放面板不起作用

> ID：13608303
> 
> 赞同：2
> 
> 时间：2012-11-28T15:13:57.817
> 
> 标签：java, swing, drag-and-drop

我在具有边界布局的 Jpanel 上分层了多个 DnD 面板。每个 DnD 面板都有一个文本字段设置为放置目标。只有最后一个 DnD 面板获得焦点。其他人不充当丢弃目标。这是 DnD 面板的代码

```
public class DnDPanel extends javax.swing.JPanel {
/** Creates new form DnDPanel */

public DnDPanel() {
    initComponents();        
    dndTextField.setDropTarget(new DropTarget() {

        @Override
        public synchronized void drop(DropTargetDropEvent evt) {
            try {
                dndTextField.setBackground(Color.WHITE);
                evt.acceptDrop(DnDConstants.ACTION_COPY);
                List<File> droppedFiles = (List<File>) evt.getTransferable().getTransferData(
                        DataFlavor.javaFileListFlavor);
                for (File file : droppedFiles) {
                    dndTextField.setText(file.getAbsolutePath());
                }
                dndTextField.setBackground(Color.getHSBColor(0.56f, 1.0f, 0.9f));
            } catch (Exception ex) {
                ex.printStackTrace();
            }
        }

        @Override
        public synchronized void dragEnter(DropTargetDragEvent dtde) {
            //Change cursor...
            Cursor cursor = new Cursor(Cursor.HAND_CURSOR);
            setCursor(cursor);
            dndTextField.setText("Drop Here !!");
            dndTextField.setBackground(Color.getHSBColor(0.56f, 1.0f, 0.9f));
        }

        @Override
        public synchronized void dragExit(DropTargetEvent dtde) {
            Cursor cursor = new Cursor(Cursor.DEFAULT_CURSOR);
            setCursor(cursor);
            dndTextField.setBackground(Color.WHITE);
            dndTextField.setText("Drag n drop a Folder");
        }
    });
}

public static void setText(String text)
{
    dndTextField.setText(text);
}

public static String getPath()
{
    return dndTextField.getText();
}

/** This method is called from within the constructor to
 * initialize the form.
 * WARNING: Do NOT modify this code. The content of this method is
 * always regenerated by the Form Editor.
 */
@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">
private void initComponents() {

    dndTextField = new javax.swing.JTextField();

    setPreferredSize(new java.awt.Dimension(250, 250));

    dndTextField.setHorizontalAlignment(javax.swing.JTextField.CENTER);
    dndTextField.setText("DnD");
    dndTextField.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            dndTextFieldActionPerformed(evt);
        }
    });

    org.jdesktop.layout.GroupLayout layout = new org.jdesktop.layout.GroupLayout(this);
    this.setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
        .add(layout.createSequentialGroup()
            .add(dndTextField, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 244, Short.MAX_VALUE)
            .addContainerGap())
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
        .add(layout.createSequentialGroup()
            .add(dndTextField, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 244, Short.MAX_VALUE)
            .addContainerGap())
    );
}// </editor-fold>

private void dndTextFieldActionPerformed(java.awt.event.ActionEvent evt) {                                             
    // TODO add your handling code here:
}                                            

// Variables declaration - do not modify
private static javax.swing.JTextField dndTextField;
// End of variables declaration
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T15:21:46.010

一个主要问题是您为 JTextField 使用了一个静态变量：

```
private static javax.swing.JTextField dndTextField; 
```

解决方案很简单：不要这样做！如果您希望每个 JPanel 都拥有自己的 JTextField，而 JTextField 的行为独立于另一个，那么它们应该是非静态的。事实上，你应该努力在你的程序中尽量减少静态任何东西的使用，除非有*非常*强烈的迹象表明这样做。

# ruby-on-rails - 工厂女孩多重嵌套属性

> ID：13608306
> 
> 赞同：3
> 
> 时间：2012-11-28T15:14:02.933
> 
> 标签：ruby-on-rails, rspec, factory-bot, nested-attributes

我有模型

```
class Rating < ActiveRecord::Base
  attr_accessible :type_id, :value
  belongs_to :review

class Review < ActiveRecord::Base
  attr_accessible :name, :description, :user_id, :relationship_type_id, :ratings_attributes    
  belongs_to :facility
  has_many :ratings
  accepts_nested_attributes_for :ratings, limit: Rating::RATE.count 
```

我需要创建一个包含 4 个嵌套评级的工厂评论，它用于测试评论验证，但我不知道如何做到这一点这是我的工厂：

```
 factory :review do
    facility
    sequence(:name) { |n| "Name of review #{n}" }
    sequence(:description) { |n| "asdasdasdasdasdasd #{n}" }
    user_id 1
    relationship_type_id 1
  end
  factory :rating do
    type_id 2
    value 3
    review  
    factory :requred_rating do
      type_id 1
    end
  end 
```

在控制器中，我正在编写带有嵌套属性的初始化审查：

```
 @review = Review.new
  Rating::RATE.each do |rate|
    @review.ratings.build(type_id: rate[1])
  end 
```

并创建带有评级的新评论：

```
 @review = @facility.reviews.build(params[:review])
  if @review.save 
```

所有工作都很好，但我需要测试它

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-18T06:04:40.920

您可以将特征添加到评论工厂，然后创建具有如下评级的评论：`FactoryGirl.create(:review, :with_ratings)`

审查具有特征的工厂：

```
factory :review do
  facility
  sequence(:name) { |n| "Name of review #{n}" }
  sequence(:description) { |n| "asdasdasdasdasdasd #{n}" }
  user_id 1
  relationship_type_id 1

  trait :with_ratings do
    after(:create) do |review|
       Rating::RATE.each do |rate|
         FactoryGirl.create(:rating, review: review, type_id: rate[1])
       end 
    end
  end
end 
```

# jquery - 检查 div 是否为空问题

> ID：13608309
> 
> 赞同：1
> 
> 时间：2012-11-28T15:14:12.080
> 
> 标签：jquery

我想检查 div 是否为空，如果我想向其中添加文本“空”。

我究竟做错了什么？谢谢！

[js小提琴文件](http://jsfiddle.net/HuWUV/)

**HTML**

```
<div class="staff-row">
    <img alt="" src="foo.jpg" />
    <h2>Lorem Ipsum! FOOO!</h2>
    <p>Lorem Ipsum</p>
  </div>
  <!-- eo : staff-row --> 
```

**jQuery**

```
$('.staff-row').mouseenter(function() {
    if ($('.staff-row').is(':empty')) {
        $('.staff-row').text('empty');
    } else {
        $('.staff-row').text('full');
    }
});​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T15:16:40.330

您需要使用`$(this)`而不是`$('.staff-row')`, 也`make sure there is not space between div opening and closing tag.`

**[现场演示](http://jsfiddle.net/HuWUV/10/)**

```
$('.staff-row').mouseenter(function() {
    if ($(this).is(':empty')) {
        $(this).text('empty');
    } else {
        $(this).text('full');
    }
});​ 
```

*`if($.trim($(this).text()).length == 0)`如果你想在 div 标签之间有空格，你可以使用*

**[现场演示](http://jsfiddle.net/HuWUV/16/)**

```
$('.staff-row').mouseenter(function() {
    if($.trim($(this).text()).length == 0){
        $(this).text('empty');
    } else {
        $(this).text('full');
    }
});​ 
```

# android - 缺少 Android SpeechRecognizer 额外的“calling_package”

> ID：13608312
> 
> 赞同：2
> 
> 时间：2012-11-28T15:14:14.523
> 
> 标签：android, speech-recognition

我需要在 Adob​​e Air 生成的应用程序中集成 Android 语音识别功能。为此，我围绕 Android 框架的 SpeechRecognizer 类构建了一个 ANE。

它在我的 Transformer TF300 ( **4.1.1** ) 上运行良好，但我无法让它在任何其他设备上运行。我已经尝试过使用 Acer Iconiatab A200 ( **4.0.3** ) 和 Galaxy S2 ( **2.3** )。

我总是收到以下错误：

> 语音搜索意图中缺少必需的额外“calling_package”。

我尝试使用**intent.putExtra**方法手动添加此额外内容，但没有成功。

有人有解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T15:52:44.040

我总是像这样添加一个虚拟包。它适用于我测试过的所有手机。

看[这里](https://github.com/gast-lib/gast-lib/blob/master/library/src/root/gast/speech/SpeechRecognizingActivity.java)

```
public void recognizeDirectly(Intent recognizerIntent)
{
    // SpeechRecognizer requires EXTRA_CALLING_PACKAGE, so add if it's not
    // here
    if (!recognizerIntent.hasExtra(RecognizerIntent.EXTRA_CALLING_PACKAGE))
    {
        recognizerIntent.putExtra(RecognizerIntent.EXTRA_CALLING_PACKAGE,
                "com.dummy");
    }
    SpeechRecognizer recognizer = getSpeechRecognizer();
    recognizer.startListening(recognizerIntent);
} 
```

# javascript - 如果访问的url包含#，什么都不做，否则重定向

> ID：13608315
> 
> 赞同：2
> 
> 时间：2012-11-28T15:14:17.767
> 
> 标签：javascript, redirect, anchor

我希望我的单页水平网站的访问者被重定向到被认为是“主页”的部分（它位于正文的中心）。现在，当他们访问主 URL 时，他们只会看到水平网站的最左侧部分。

问题是，我希望能够通过锚链接共享网站的其他部分，而不会将我的访问者重定向到 #Home 锚。

所以我基本上想要的是：

*   如果访问的 URL 包含 #，则不执行任何操作（因为所有锚链接都包含 #）
*   如果访问的 URL 不包含 #，则重定向到 #Home 锚点。（如果它不包含 #，我认为 url 无效，或者他们只是访问主页而 URL 中没有锚点。

现在，我有这个 JS 代码：

```
if (window.location.href.indexOf('#') > -1){
    // do nothing   
}
else {
    top.location.href = "http://www.url.com/#Home";
} 
```

这段代码有什么问题，我应该如何以正确的方式做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:19:58.673

我猜您的网页中某处有一个锚点，称为 home。您可以尝试模拟单击它。像：

```
$('[href="#Home"]').click();
location.href = location.href+ '#Home'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T15:20:32.493

这将起作用：

```
if(!!~window.location.href.indexOf('#')){
    //do nothing   
}else{
    top.location.href = "http://www.url.com/#Home";
} 
```

该`!!~`部分会将结果`indexOf`转换为适当的布尔值。(`!!`将 true 或 false 值转换为`true`and `false`，如果字符串包含 needle ( )，波浪号 ( `~`) 将 的输出转换`ìndexOf`为 true 值`"#"`)

这确实会在 Google Chrome 中的指定网址为我重新加载页面。

# google-maps - 谷歌地图 api v2 停止工作

> ID：13608317
> 
> 赞同：2
> 
> 时间：2012-11-28T15:14:28.600
> 
> 标签：google-maps, google-maps-api-2

很久以前，我使用旧的 API 版本（v2）设置了一个谷歌地图项目。我知道 Google Maps API v2 已被弃用，我正在为新版本重写它，但在那之前我需要它。

突然，地图停止工作，并在警告框中抛出此错误：

> Google 已禁用此应用程序的 Maps API。本网站无权使用所提供的 Google 地图客户端 ID。如果您是此应用程序的所有者，您可以在此处了解有关注册 URL 的更多信息： [http ://code.google.com/apis/maps/documentation/premier/guide.html#URLs](http://code.google.com/apis/maps/documentation/premier/guide.html#URLs)

我没有更改当前应用程序中的任何内容，并且每天的请求数少于 1000（与每日配额相差甚远）。我注意到的第一件事是没有指定允许的推荐人。但即使它们被设置为（用我的域替换 sitename.com）：

```
sitename.com
sitename.com/*
www.sitename.com
www.sitename.com/*
*.sitename.com
*.sitename.com/* 
```

即使过了几个小时也没有任何结果。这个应用程序突然停止工作的原因对我来说仍然是一个谜（再一次 - 我的代码或谷歌帐户没有任何改变），但最重要的是我需要非常快速的解决方案。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:09:11.903

听起来您可能正在使用 v2.x。最近发布了 v2。如果您不使用 v2.s；您可以尝试（或 v=2），看看它是否能解决您的问题（目前，他们在 v2 上进行了为期 2 周的升级周期：“我们已将 v=2.x 更新为 2.441。v=2 将是2 周内更新，v=2.s 4 周内更新。")

# java - 读取串口但显示其他类型的字符

> ID：13608323
> 
> 赞同：0
> 
> 时间：2012-11-28T15:14:53.037
> 
> 标签：java, serial-port

我正在读取一个串行端口，其中有一些字符，如 skljdf85789^& *^eeb 等。在超级终端中，我可以看到带有普通字符的端口。现在，当我使用 java、eclipse 阅读它时，在控制台中我应该看到 skljdf85789^&* ^eeb 等 smt 等。相反，我看到了一系列频繁的矩形。我认为这是不兼容类型的问题。我试过这些：

```
 public void serialEvent(SerialPortEvent arg0) {
        int data;

        switch (arg0.getEventType()) {
        case SerialPortEvent.DATA_AVAILABLE:

            try {

                int len = 0;
                int bet=0;
                while ((data = in.read()) > -1) {
                    if (data == ' '||data == '  ' ){
                        break;
                    }
                    buffer[len++] = (byte) data;

                }// it writes to a buffer from the port
                                    String meterbuf = new String(buffer, 0, len);//buffer is a byte array, it casted  to String here.
                                    System.out.println("string from m485: " + meterbuf);
                                    for(int k=0;k<meterbuf.length();k++)
                {
                    char c=meterbuf.charAt(k);
                    System.out.print(Character.valueOf(c)+" ");
                                    }// I tried to get chars one by one, it did not work, too. 
```

你有什么建议吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:05:31.297

问题是波特率。我忘了设置波特率。我正在使用 c，“iar 嵌入式系统”写入端口，我正在使用 Java，“eclipse”从端口读取。在这两个程序中，波特率应该相等。如果它们不同，角色会很傻:)

# javascript - 反垃圾邮件检查后调用 jQuery 表单验证器？

> ID：13608328
> 
> 赞同：0
> 
> 时间：2012-11-28T15:15:17.477
> 
> 标签：javascript, jquery-plugins, spam-prevention

这可能是一个非常基本的 JavaScript 问题，但我还不知道如何去做。

在成功调用要求用户添加两个数字的[基本反垃圾邮件解决方案](http://sourcefirst.wordpress.com/2007/05/02/simple-javascript-captcha/)后，如何让表单继续使用 jQuery 的表单验证器？

```
<html>

<head>
  <script type="text/javascript">
    var a = Math.ceil(Math.random() * 10);
    var b = Math.ceil(Math.random() * 10);       
    var c = a + b
    function DrawBotBoot()
    {
        document.write("R&eacute;sultat de "+ a + " + " + b +"? ");
        document.write("<input id='BotBootInput' type='text' maxlength='2' size='2'/>");
    }    
    function ValidBotBoot(){
        var d = document.getElementById('BotBootInput').value;
        if (d == c) return true;        
        return false;
    }
  </script>

  <script>
  //Used by jQuery to validate all form fields
  $(document).ready(function(){
    $("#myform").validate();
  </script>
</head>

<body>
 <form action="send.php" method="post" id="myform">
 <input type="text" maxlength="25" id="name" name="name" class="required"/>
 Are you human?<br />
 <script type="text/javascript">DrawBotBoot()</script>
 <input id="Button1" type="button" value="Send" onclick="alert(ValidBotBoot());"/> 
 </form>
</body>
</html> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:28:01.477

验证有一个提交处理程序处理程序

尝试这个：

```
 $("#myform").validate({
      submitHandler: function(form) { 
           form.submit();
    }
 }); 
```

# r - 覆盖嵌套列表并保留命名/结构

> ID：13608336
> 
> 赞同：5
> 
> 时间：2012-11-28T15:15:52.527
> 
> 标签：r

在创建嵌套列表时，我认为 R 具有对列表元素有用的命名结构。我有一个列表列表，并希望应用任何列表中包含的每个向量的函数。 `lapply`这样做但随后剥离列表的命名结构。如何`lapply`在不剥离名称的情况下对嵌套列表的每个向量元素进行处理？我尝试传递索引，但这似乎做同样的事情（条带名称）。

```
TEST <- list(n1=list(a="5", b="65"), n2=list(a="f", b= "f6"))
TEST
lapply(TEST, function(x) gsub("6", "foo", x))
lapply(seq_along(TEST), function(i) gsub("6", "foo", TEST[[i]])) 
```

控制台输出：

```
> TEST
$n1
$n1$a
[1] "5"

$n1$b
[1] "65"

$n2
$n2$a
[1] "f"

$n2$b
[1] "f6"

> lapply(TEST, function(x) gsub("6", "foo", x))
$n1
[1] "5"    "foo5"

$n2
[1] "f"    "ffoo" 
```

期望的结果：

```
$n1
$n1$a
[1] "5"

$n1$b
[1] "foo5"

$n2
$n2$a
[1] "f"

$n2$b
[1] "ffoo" 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-28T15:20:33.103

看来您想要`rapply`*apply 系列的变体

```
rapply(TEST, function(x){gsub("6", "foo", x)}, how = "list")

$n1
$n1$a
[1] "5"

$n1$b
[1] "foo5"

$n2
$n2$a
[1] "f"

$n2$b
[1] "ffoo" 
```

您也可以这样做以避免编写匿名函数

```
rapply(TEST, gsub, pattern = "6", replacement = "foo", how = "list") 
```

# google-chrome - chrome 是否会在更新时删除扩展程序？

> ID：13608342
> 
> 赞同：2
> 
> 时间：2012-11-28T15:16:22.707
> 
> 标签：google-chrome, google-chrome-extension

google chrome 在将自身更新到较新版本时是否会删除当前的扩展？

我在网上商店有一个扩展 谷歌已将其删除，因为我使用了一张由另一家公司注册的图片，并附有任何通知

我失去了所有用户。当谷歌浏览器自我更新时，它会删除所有扩展吗？或者只是检查商店中是否仍然存在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T23:25:26.183

我更新时从未让 Chrome 删除我的扩展程序。

# c - 编译C时出现奇怪的错误

> ID：13608346
> 
> 赞同：0
> 
> 时间：2012-11-28T15:16:36.587
> 
> 标签：c, list, compilation, linked-list

所以我在这个问题上已经有一段时间了，似乎找不到问题，甚至我的老师也找不到。

所以我有这个头文件：

```
 #include <stdio.h>
    #include <stdbool.h>

    void print_list(void);
    int delete_from_list(int iWordID);
    wordData * create_list(int iWordID, char * cWord);
    wordData * add_to_list(int iWordID, char * cWord, bool add_to_end);
    wordData * search_in_list(int iWordID, struct wordData **prev);
    void print_list(void);

    typedef struct _wordData
    {
    int iWordID;
    char * cWord;
    struct _wordData *next;

    } wordData; 
```

在包含此标头的 C 文件中，我具有以下功能：

```
 wordData* create_list(int iWordID, char * cWord)
    {
     //printf(cWord);

    printf("\n creating list with headnode as [%d] %s\n",iWordID,cWord);
    wordData *ptr = (struct wordData*)malloc(sizeof(struct wordData));
    if(NULL == ptr)
    {
    printf("\n Node creation failed \n");
    return NULL;
    }

    ptr->iWordID = iWordID;

    //char * temp = (char*)malloc(sizeof(cWord));
    ptr -> cWord = cWord;

    ptr->next = NULL;

    head = curr = ptr;
    return ptr;
    } 
```

所以当我编译这个错误发生： list.h|6|error: expected '=', ',', ';', 'asm' or ' **attribute** ' before '*' token|

我已经搜索了很多关于这个错误的 awnsers，但似乎找不到可以帮助我的错误。

请帮忙 ：）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-28T15:18:38.220

将`wordData` `struct`定义移动到标题的顶部 - 它需要在您在原型中使用它之前出现（或者您需要转发声明它）。

```
#include <stdio.h>
#include <stdbool.h>

typedef struct _wordData
{
int iWordID;
char * cWord;
struct _wordData *next;

} wordData;

void print_list(void);
int delete_from_list(int iWordID);
wordData * create_list(int iWordID, char * cWord);
wordData * add_to_list(int iWordID, char * cWord, bool add_to_end);
wordData * search_in_list(int iWordID, struct wordData **prev);
void print_list(void); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-28T15:19:16.100

将上面的结构定义移到头文件中使用的位置：

```
#include <stdio.h>
#include <stdbool.h>

typedef struct _wordData
{
int iWordID;
char * cWord;
struct _wordData *next;

} wordData;

void print_list(void);
int delete_from_list(int iWordID);
wordData * create_list(int iWordID, char * cWord);
wordData * add_to_list(int iWordID, char * cWord, bool add_to_end);
wordData * search_in_list(int iWordID, struct wordData **prev);
void print_list(void); 
```

您必须在使用它之前对其进行定义。

```
wordData * search_in_list(int iWordID, struct wordData **prev);
                                             ^
                                             |
                             This is also incorrect. Should be "wordData **prev"
                              That's what the typedef is for. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T15:23:18.907

除了在您使用的点之前移动结构的定义之外，您还需要进行另一项更改：

您已键入定义`struct _wordData`为`wordData`.

所以你要么使用`struct _wordData`or `wordData`，但你正在使用`struct wordData`which 不存在。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T15:24:44.240

您的代码中有两个独立的错误。

首先，typedef-name`wordData`必须在使用*前*定义。

其次，在`search_in_list`声明中您指的是`struct wordData`类型。您的程序中根本没有这种类型`struct wordData`。你有`struct _wordData`。`malloc`然后在 C 文件（等）中重复第二个错误。

# android - “在 WebView 上实现 WebViewClient 类”

> ID：13608349
> 
> 赞同：0
> 
> 时间：2012-11-28T15:16:44.533
> 
> 标签：android, eclipse

我正在尝试对活动中的 WebView 进行一些操作，并且想知道如何检测网页何时加载（这与广告服务系统有关）。我给速度非常慢的广告代理技术支持团队发了电子邮件，他们最终回复“您可以在 WebView 中使用 HTML 横幅，您需要在 WebView 上实现 WebViewClient 类”。我不是 100% 确定这意味着什么，但我的第一个猜测是在我的活动中添加“实现 WebViewClient”这些词，即：

```
public class MyActivity extends Activity implements WebViewClient
{ 
```

然后我完全期待 eclipse 告诉我我缺少一些导入，然后它会给我添加的选项......但令我惊讶的是，这两个选项是“创建接口 WebViweClient”和“修复项目设置”。所以现在我很困惑，不知道下一步该怎么做。

谁能给我看一些示例代码或给我一个提示，让我朝着正确的方向前进？

编辑：我正在尝试在 webview 上加载广告，然后在稍后的某个时间（并检查广告加载是否完成），我将显示 webview。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T15:23:00.143

```
import android.app.Activity;
import android.graphics.Bitmap;
import android.os.Bundle;
import android.view.KeyEvent;
import android.webkit.WebView;
import android.webkit.WebViewClient;

/*
 * Demo of creating an application to open any URL inside the application and clicking on any link from that URl
should not open Native browser but  that URL should open in the same screen.
 */
public class WebViewClientDemoActivity extends Activity {
    /** Called when the activity is first created. */

    WebView web;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        web = (WebView) findViewById(R.id.webview01);
        web.setWebViewClient(new myWebClient());
        web.getSettings().setJavaScriptEnabled(true);
        web.loadUrl("http://www.google.com");
    }

    public class myWebClient extends WebViewClient
    {
        @Override
        public void onPageStarted(WebView view, String url, Bitmap favicon) {
            // TODO Auto-generated method stub
            super.onPageStarted(view, url, favicon);
        }

        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            // TODO Auto-generated method stub

            view.loadUrl(url);
            return true;

        }
    }

    // To handle "Back" key press event for WebView to go back to previous screen.
   @Override
   public boolean onKeyDown(int keyCode, KeyEvent event)
  {
    if ((keyCode == KeyEvent.KEYCODE_BACK) && web.canGoBack()) {
        web.goBack();
        return true;
    }
    return super.onKeyDown(keyCode, event);
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T15:23:46.050

`WebViewClient`是一个`class`不是一个`interface`。

您将必须创建自己的类，例如`MyWebViewClient extends WebViewClient`，`Activity`您可以将 设置`WebViewClient`为您的`WebView`，如下所示：

```
WebView myWebView = (WebView) findViewById(R.id.myWebView);
myWebView.setWebViewClient(new MyWebViewClient()); 
```

# windows - 是否有适用于 Windows Vista/7/8 的新 Midi API？

> ID：13608351
> 
> 赞同：7
> 
> 时间：2012-11-28T15:16:46.037
> 
> 标签：windows, winapi, midi, multimedia

我知道 midiXxx API，但我看到它目前列在 msdn 的“旧版”下。 [http://msdn.microsoft.com/en-us/library/windows/desktop/dd743619(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd743619(v=vs.85).aspx)

我应该使用其他一些 API 来针对较新的 Windows 版本吗？

旧 API 是否仍可在 Windows 7 和 8 上运行？

谢谢，马克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T20:40:29.277

对于 dektop 应用程序（非 Metro），您仍然可以安全地使用旧版 API。

可悲的是，对于 WinRT/Metro，根本没有 midi 支持（参见msdn 上的[讨论](http://social.msdn.microsoft.com/Forums/en-US/winappswithnativecode/thread/72f78574-02c3-4986-8d5f-623b31c89765.)）。

希望他们会改变这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-10T06:22:30.523

上周五，Microsoft 发布了一个预览版 Windows Runtime API for MIDI。在此处查看 //build/ 会话：http: [//channel9.msdn.com/Events/Build/2014/3-548](http://channel9.msdn.com/Events/Build/2014/3-548)

MSDN：http: [//msdn.microsoft.com/en-us/library/windows/apps/dn643522.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/dn643522.aspx)

虽然是预览版，但应用程序可以上线并部署到 Windows 应用商店。请让我们知道您喜欢或不喜欢什么。快乐的应用程序构建！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T00:56:38.590

Catflier 是正确的，WinRT 中没有对 MIDI 的直接支持（在 API 级别）。但是，如果您想在您的应用程序中拥有类似 MIDI 的功能，则有一些变通方法。越来越流行的协议是[基于网络的 OSC（开放声音控制）。](http://opensoundcontrol.org/)由于它是基于网络的，因此您可以使用它。

例如，可以使用从 MIDI 转换为 OSC[的 The Missing Link 之类的外部硬件。](http://wifimidi.com/)您将 MIDI 设备连接到[The Missing Link](http://wifimidi.com/)，然后将其转换为发送到计算机的 OSC 消息。然后，您的应用程序可以接收 OSC 消息并与 MIDI 设备对话。我没有任何代码可以在这里显示，但我已经看到了这个工作的演示。

您可以在 iOS 上看到 OSC 以及[TouchOSC 等](http://hexler.net/software/touchosc)流行应用程序的使用情况。

# c# - 可以将 web.config 键值对用作 asp.net c# 中的编译时间常数吗？

> ID：13608354
> 
> 赞同：5
> 
> 时间：2012-11-28T15:16:52.287
> 
> 标签：c#, asp.net-mvc, web-config

我正在尝试在下面执行此操作，有没有办法执行此操作，或者 web.configs 仅在运行时可用，因为我收到一条红线错误，说必须是编译时间常数？

应用设置：

```
 <add key="MyString" value="TheValueOfTheString"/> 
```

代码：

```
 public const string MyString = ConfigurationManager.AppSettings["MyString"]; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-28T15:21:23.160

问题是const的使用。const 表示该值在设计时是硬编码的。

```
const string MyString = "the text..."; 
```

appsettings 值直到运行时才知道，因此它不是一个常量值。相反，您可以使用静态只读值

```
static readonly MyString = ConfigurationManager.AppSettings["MyString"]; 
```

不同之处在于如何在编译时对值进行解释。当使用常量时，引用的是实际值，而不是变量`MyString`。一个`static readonly`值被编译为变量。

# asp.net - 无法在 MasterPage 上设置背景

> ID：13608356
> 
> 赞同：2
> 
> 时间：2012-11-28T15:16:55.523
> 
> 标签：asp.net, css, background

我需要为我的网站设置背景，以便母版页的每个 Web 表单子项都显示背景图像。我用谷歌搜索并找到了一些答案，但他们没有做任何事情。我附上了我的母版页 html 代码和显示我想要的背景的图像：

```
 <%@ Master Language="C#" AutoEventWireup="true" CodeFile="MasterPage.master.cs" Inherits="Pages_MasterPage" %>

<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="asp" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>Qwik ProjecTrace</title>
    <asp:ContentPlaceHolder id="head" runat="server">
    </asp:ContentPlaceHolder>

    <style type="text/css">
        .style1
        {
            width: 100%;
        }
        .style2
        {
            text-align: center;
            font-size: 40pt;
            color: #0066CC;
        }
        .style3
        {
            font-size: x-large;
        }

        body
        {
            background:url('/style/images/IMS-Backgroung.jpg') no-repeat left top;
        }

</style>
    <link href="../Style/site.css" rel="stylesheet" type="text/css" />

</head>
<body>
    <form id="form1" runat="server">

    <asp:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server">
    </asp:ToolkitScriptManager>

    <table class="style1">
        <tr>
            <td runat="server" style="direction: ltr">
                <asp:Image ID="mes1" runat="server" style="text-align: left" />
            </td>
            <td class="style2">
                <strong style="font-size: 40">Qwik ProjecTrace<br />
                <span class="style3">you see what we do 24/7</span></strong></td>
            <td runat="server" style="direction: rtl">
                <asp:Image ID="mes2" runat="server" style="text-align: right" />
            </td>
        </tr>
    </table>
    <div>
        <asp:ContentPlaceHolder id="ContentPlaceHolder1" runat="server">

            <p></p>

        </asp:ContentPlaceHolder>
    </div>
    </form>
</body>
</html> 
```

![这是背景图像的路径：](../Images/39e65b8c16329bdece94ea57406997e5.png)

有谁知道我的代码有什么问题？以及如何设置背景？

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:31:38.150

像这样改变身体风格：

```
body
{
    background-image: url('/style/images/IMS-Backgroung.jpg');
    background-repeat:no-repeat;
} 
```

确保您访问的页面“位于”“/style/images/”的父文件夹中。

我建议您使用 asp.net 主题，您可以在其中指向这样的图像： background-image: url('IMS-Backgroung.jpg') 并且适用于整个 Web 应用程序结构。

有关主题的更多信息，请参阅[ASP.NET 主题和皮肤](http://msdn.microsoft.com/en-us/library/ykzx33wh%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T07:07:42.810

这是代码解决方案（在我的情况下，包含文件夹似乎存在某种问题）：

```
body
    {
        background-image: url('../style/images/Background.jpg'); 
        background-repeat:no-repeat;
    } 
```

# html - 悬停时闪烁的背景

> ID：13608357
> 
> 赞同：0
> 
> 时间：2012-11-28T15:16:58.200
> 
> 标签：html, css

我正在设置地图，当您将鼠标悬停在橙色小圆圈上时，一条鱼会出现。示例可以在这里看到，[http://www.simagine.nl/kaartje](http://www.simagine.nl/kaartje)

然而，如果你将最右边的圆圈悬停在澳大利亚上方一点点，悬停本身就会不断闪烁，因此图像也会不断闪烁。

用于此的 CSS 是：

```
a.tonijn {
position:absolute;
text-indent:-9999px;
height:10px;
width:10px;
top:156px;
left:355px;
display:block; 
```

}

```
a.tonijn:hover {
background:url(tonijn.png) no-repeat;
height:83px;
width:106px;
top:65px;
left:329px; 
```

}

认为这是一个愚蠢的答案，但我找不到它......

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T15:25:01.873

当您悬停时，您正在更改锚标记的样式。我建议创建一个设置为“可见性：隐藏”的 div，然后在 a.tonijn:hover 上将相同的 div 设置为“可见性：可见”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T15:20:42.040

中的规则`a.tonijn:hover`更改`a`元素的区域。

您需要向您的 a-tag 添加一个子元素，并将背景图像应用于该元素。

尝试这个：

```
<a href="tonijn" class="tonijn">Tonijn<span></span></a>

/* Selector changed */
a.tonijn:hover span {
    background: url(tonijn.png) no-repeat;
    height: 83px;
    width: 106px;

    top: -83px; /* Value changed */
    left: -26px; /* Value changed */

    position: absolute; /* Attribute added */
    display: block; /* Attribute added */
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T15:23:51.603

尝试为您的链接添加边框，发现它太小而无法悬停，所以增加尺寸，看看我制作的红色边框，我只是增加了链接的高度和宽度，例如

```
height: 20px;
width: 20px; 
```

并将其正确放置在您的橙色圆圈周围，使橙色圆圈位于框的中心，然后您就可以开始了

![在此处输入图像描述](../Images/29126ced5fa2f045da46030cf183e8e0.png)

# forms - 在 xhtml 中是未选中单选按钮的正确语法

> ID：13608364
> 
> 赞同：0
> 
> 时间：2012-11-28T15:17:26.443
> 
> 标签：forms, checkbox, xhtml, radio-button

在 XHTML 中，我知道这对于选中的单选按钮是正确的：

```
<input type="radio" checked="checked" name="bar" value="baz" /> 
```

并且没有选中属性意味着单选按钮未选中：

```
<input type="radio" name="bar" value="baz" /> 
```

但这对于未选中的单选按钮是否也是正确的：

```
<input type="radio" checked="" name="bar" value="baz" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:25:37.217

没有实际使用

```
<input type="radio" checked="" name="bar" value="baz" /> 
```

还将呈现在我见过的浏览器中选中的复选框（看起来多么奇怪）！

# nhibernate - 如何将 Fluent NHibernate 中的布尔字段映射到 DB2 iSeries

> ID：13608367
> 
> 赞同：0
> 
> 时间：2012-11-28T15:17:33.120
> 
> 标签：nhibernate, fluent-nhibernate, boolean, db2-400

我有以下代码：

```
private static ISessionFactory CreateSessionFactory()
{
    ISessionFactory factory = null;

    var cfg = new Configuration();

    // Do this to map bool true/false to DB2 char('0') or char('1')
    var props = new Dictionary<string, string>(); 
    props.Add("query.substitutions","true=1;false=0");
    cfg.AddProperties(props);

    cfg.DataBaseIntegration(x =>
    {
        x.ConnectionString = CONNECTION_STRING;
        x.Dialect<DB2400Dialect>();
        x.Driver<DB2400Driver>();
    });

    factory = Fluently.Configure(cfg)
        .Mappings(m => m.FluentMappings.AddFromAssembly(Assembly.GetExecutingAssembly()))
        .BuildSessionFactory();

    return factory;
} 
```

在我的 POCO 中，我有以下财产：

```
public virtual bool QCCount { get; set; } 
```

在我的映射中，我有

```
Map(x => x.QCCount, "QCNT36"); 
```

在 DB2 中，没有位字段，只有带有 '0' 或 '1' 的 char(1)。

据我了解， props.Add("query.substitutions","true=1;false=0"); 应该将这些 0 和 1 映射到布尔 POCO 对象，但是，它似乎不起作用。

我是否需要在字段的映射中添加一些东西来告诉它使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T17:27:18.763

我找到了一个似乎可行的解决方案。

[http://lostechies.com/rayhouston/2008/03/23/mapping-strings-to-booleans-using-nhibernate-s-iusertype/](http://lostechies.com/rayhouston/2008/03/23/mapping-strings-to-booleans-using-nhibernate-s-iusertype/)

我将“Y”、“N”更改为“0”和“1”，然后映射列并且处理正常。

代码：

```
public class CharBoolType : IUserType
{
    public bool IsMutable
    {
        get { return false; }
    }

    public Type ReturnedType
    {
        get { return typeof(CharBooleanType); }
    }

    public SqlType[] SqlTypes
    {
        get { return new[] { NHibernateUtil.String.SqlType }; }
    }

    public object NullSafeGet(IDataReader rs, string[] names, object owner)
    {
        var obj = NHibernateUtil.String.NullSafeGet(rs, names[0]);

        if (obj == null) return null;

        var trueFalse = (string)obj;

        if (trueFalse != "1" && trueFalse != "0")
            throw new Exception(string.Format("Expected data to be '0' or '1' but was '{0}'.", trueFalse));

        return trueFalse == "1";
    }

    public void NullSafeSet(IDbCommand cmd, object value, int index)
    {
        if (value == null)
        {
            ((IDataParameter)cmd.Parameters[index]).Value = DBNull.Value;
        }
        else
        {
            ((IDataParameter)cmd.Parameters[index]).Value = (bool)value ? "1" : "0";
        }
    }

    public object DeepCopy(object value)
    {
        return value;
    }

    public object Replace(object original, object target, object owner)
    {
        return original;
    }

    public object Assemble(object cached, object owner)
    {
        return cached;
    }

    public object Disassemble(object value)
    {
        return value;
    }

    public new bool Equals(object x, object y)
    {
        if (ReferenceEquals(x, y)) return true;

        if (x == null || y == null) return false;

        return x.Equals(y);
    }

    public int GetHashCode(object x)
    {
        return x == null ? typeof(bool).GetHashCode() + 473 : x.GetHashCode();
    }
} 
```

映射：

```
Map(x => x.QCCount, "QCNT36").CustomType<CharBoolType>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T17:05:50.580

似乎 NHibernate DB2 方言将布尔值映射到 SMALLINT（https://github.com/nhibernate/nhibernate-core/blob/master/src/NHibernate/Dialect/DB2Dialect.cs）：

```
RegisterColumnType(DbType.Boolean, "SMALLINT"); 
```

query.substitutions 用于将 HQL 查询中的某些标记自动替换为其他标记，我认为它不会影响阅读。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-01T16:57:12.030

如果要将 SMALLINT 用于布尔列，则必须从 BooleanType 继承 usertype 类

代码：

```
public class IntBoolUserType : BooleanType, IUserType
{
    public new bool Equals(object x, object y)
    {
        if (ReferenceEquals(x, y)) return true;

        if (x == null || y == null) return false;

        return x.Equals(y);
    }

    public int GetHashCode(object x)
    {
        return x.GetHashCode();
    }

    public object DeepCopy(object value)
    {
        return value;
    }

    public object Replace(object original, object target, object owner)
    {
        return original;
    }

    public object Assemble(object cached, object owner)
    {
        return cached;
    }

    public object Disassemble(object value)
    {
        return value;
    }

    public override SqlType SqlType
    {
        get
        {
            return new SqlType(DbType.Int32);
        }
    }

    public new SqlType[] SqlTypes
    {
        get { return new SqlType[] { SqlType }; }
    }

    public Type ReturnedType
    {
        get { return typeof(bool); }
    }

    public new void NullSafeSet(IDbCommand cmd, object value, int index)
    {
        var val = !((bool)value) ? 0 : 1;
        NHibernateUtil.Int32.NullSafeSet(cmd, val, index);
    }

    public object NullSafeGet(IDataReader rs, string[] names, object owner)
    {
        return NHibernateUtil.Boolean.NullSafeGet(rs, names[0]);
    }

    public override void Set(IDbCommand cmd, object value, int index)
    {
        var val = !((bool)value) ? 0 : 1;
        ((IDataParameter)cmd.Parameters[index]).Value = val;
    }
} 
```

映射：

```
Property(x => x.IsDeleted, map => { map.NotNullable(true); map.Type<IntBoolUserType>(); }); 
```

# javascript - 从 javascript 访问 Silverlights 集合

> ID：13608370
> 
> 赞同：0
> 
> 时间：2012-11-28T15:17:35.673
> 
> 标签：javascript, silverlight

我在页面中嵌入了 Silverlight 类，在 App.xaml.cs 中注册了这个组件以允许从 javascript 调用 SL 方法，它工作正常。

但现在我想访问的不是方法，而是集合。例如，我有公共财产

```
[ScriptableMember]
ICollection<FileInfo> Files {get;set;} 
```

在运行时，我检查了 Files 成员的可访问性：

```
silverlightPlugin.Content.Uploader.Files    | {...}  | Object 
```

已定义并具有 Object 类型

但是当我试图调用以下任何一个时：

```
silverlightPlugin.Content.Uploader.Files.Count
silverlightPlugin.Content.Uploader.Files.Count()
silverlightPlugin.Content.Uploader.Files.get_Count
silverlightPlugin.Content.Uploader.Files.get_Count() 
```

我有一个异常“输入字符串的格式不正确”。

有什么方法可以从 JS 访问集合或者我需要实现特殊方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T12:49:21.383

不幸的是，这是不可能的。我使用函数来获取所需的数据。

# sql - sql更新部分字符串并修剪尾随值

> ID：13608374
> 
> 赞同：2
> 
> 时间：2012-11-28T15:17:38.830
> 
> 标签：sql, oracle11g

我正在尝试更新一个字符串，但我还需要清除找到的字符串后面的其余值。我不能使用替换，因为最后的值会改变，但中间部分对于许多记录将保持不变。如果您不知道字符串中的确切值或位置，我还没有看到删除字符串尾随部分的帖子。
我通过 SQL Developer 使用 Oracle 作为我的数据库来更新数据。

```
"keep this data" "search on keyword" "wipe out trailing data"     "result data"
xyz                 @                     psu.edu                 xyz 
```

列数据值 = xyz@psu.edu

我会搜索列名如 '@%' 的记录

消除 ”@％”

最终结果值 = xyz

列数据值 = ABCabc123

我会搜索列名如 'abc%' 的记录

删除“abc%”

最终结果值 = ABC

我还没有看到此类更新的任何答案。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:55:07.563

如果找不到所需的字符串，您可能需要检查：

```
SELECT CASE
          WHEN INSTR('xyz@psu.edu','@', 1, 1) > 0
             THEN SUBSTR('xyz@psu.edu',1,INSTR('xyz@psu.edu','@', 1, 1)-1)
             ELSE 'xyz@psu.edu'
          END as "Result Data"
FROM DUAL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T15:35:32.920

```
select substr('xyz@psu.edu',1, instr('xyz@psu.edu','@') - 1) from dual

select substr('ABCabc123',1, instr('ABCabc123','abc') - 1) from dual 
```

# java - 运行一个进程，发现它已经启动

> ID：13608375
> 
> 赞同：0
> 
> 时间：2012-11-28T15:17:41.107
> 
> 标签：java, exe

我需要运行`.exe`文件，并在启动此文件后在进程加载并运行后执行一些脚本，然后再终止。`.exe`因此，如果先前未完全加载，脚本将引发异常..

我怎么知道该`.exe`文件已完全加载？

我可以用它`Timer`来安排脚本执行到某个时间，但这不是一个好主意，因为`.exe` 在一些安排时间之后文件可能仍然无法启动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:24:25.890

查看[Apache Commons Exec](http://commons.apache.org/exec/)，它处理了很多进程启动的痛苦。特别看一下[DefaultExecuteResultHandler](http://commons.apache.org/exec/apidocs/org/apache/commons/exec/DefaultExecuteResultHandler.html)，它会在启动的进程退出时获得回调。只要您没有收到该回调，您启动的进程仍在运行。

请注意（如果不清楚），如果您的 Java 进程启动一个可执行文件，它将在该进程终止时立即获得回调，前提`Process.waitFor()`是已被调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T15:25:14.550

作为 exe 文件职责中的最后一件事，在共享位置创建一个文件。从您的其他代码中检查文件。这样该共享文件将充当锁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T15:26:43.427

您可以定期检查正在运行的进程列表，直到在列表中找到可执行文件 - 一旦您看到它，您就知道它已经启动。

注意：例如，如果可执行文件在 1 秒后结束，并且您每 10 秒检查一次进程，您可能会错过它。

# liferay - 将网页内容导入 Liferay 数据库

> ID：13608376
> 
> 赞同：1
> 
> 时间：2012-11-28T15:17:47.613
> 
> 标签：liferay, liferay-6, web-content

我想将网页内容保存在 liferay 数据库中。目前 JPG 位于另一台服务器上的另一个文件系统中，我想将其移至 liferay 数据库。有没有办法将这些 JPG/Web 内容批量导入 liferay db？我在想的一个选择是每天安排一个从文件系统导入新文件的工作。想知道是否有其他人做过以及如何做到的？

我发现有一个东西叫做Database Hook。但据我了解，这可以让您仅将通过 Liferay 中的图片库上传的那些文件保存到数据库。这与必须以编程方式从另一个文件系统导入文件有点不同。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T23:22:13.073

当您访问 Liferay 的文档库（或 6.0 中的图像库）时，您会在每个文件夹中找到“从桌面访问”链接。这可用于通过 WebDAV 连接，因此您可以连接到 Liferay 的文档库，就好像它是网络共享一样。然后只需复制批处理文件或资源管理器（拖放），它们就会出现在 doclib 中。双向工作。

对于 Liferay 6.1，您还可以考虑 Liferay Sync，这是一个类似于 Dropbox 的客户端，它只是将文档库与本地（从服务器远程）系统上的文件夹同步。

最复杂的变体（在这里只是为了完整）是使用 Liferay 的 API 以编程方式插入文档。这里的优点是您还可以在导入过程中使用它来标记和分类内容，但它肯定比拖放文件更多工作。

# c# - 验证属性从未使用 Moq 设置

> ID：13608382
> 
> 赞同：6
> 
> 时间：2012-11-28T15:18:20.950
> 
> 标签：c#, unit-testing, properties, moq, verify

> **可能重复：**
> [起订量 - 如何验证属性值是否通过设置器设置](https://stackoverflow.com/questions/1641919/moq-how-to-verify-that-a-property-value-is-set-via-the-setter)

我希望以下测试失败：

```
public interface IObjectWithProperty
{
    int Property { get; set; }
}

[TestMethod]
public void Property_ShouldNotBeCalled()
{
    var mock = new Mock<IObjectWithProperty>();

    mock.Object.Property = 10;

    mock.Verify(x => x.Property, Times.Never());
} 
```

然而，这个测试通过了，即使`Property`在`Verify`.

所以它似乎`Verify`实际上意味着`VerifyGet`。

我应该如何验证从未设置过属性？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-28T15:38:19.653

Use the following code instead:

`mock.VerifySet(x => x.Property = It.IsAny<int>(), Times.Never());`

# c# - excel xlsx文件解析——使用koogra

> ID：13608383
> 
> 赞同：5
> 
> 时间：2012-11-28T15:18:29.650
> 
> 标签：c#, excel, .net-4.0, xml-parsing, text-parsing

在使用 git hub 尝试了几个包之后，并尝试解析/处理这个相当大的 excel 文档。我尝试的每一种方法都在`out of memory`.

我在谷歌上搜索了更多内容，发现这个名为 GNU 库的名称*似乎*`koogra`只是我认为适合这项工作的唯一一个，因为我的这部分项目的时间已经不多了，所以不能打扰太多并继续搜索。

我现在得到的代码正在通过“内存不足”问题的一部分，

所以剩下的就是我如何正确解析 Excel 文档，以便可以提取说一种字典集合键是一列，值是另一列。

[这是有问题的文件](http://www.seobook.com/learn-seo/top10000sept.xlsx)

这是我到目前为止的代码

```
var path = Path.Combine(Environment.CurrentDirectory, "tst.xlsx");
Net.SourceForge.Koogra.Excel2007.Workbook xcel = new Net.SourceForge.Koogra.Excel2007.Workbook(path);
var ss = xcel.GetWorksheets(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T16:01:23.443

被更多人找到了...... google *ing* ... 2007 年使用的第一行（`xlsx`）

第二行是`xls`版本

```
 Net.SourceForge.Koogra.IWorkbook genericWB = Net.SourceForge.Koogra.WorkbookFactory.GetExcel2007Reader("tst.xlsx");

        //genericWB = Net.SourceForge.Koogra.WorkbookFactory.GetExcelBIFFReader("some.xls");

        Net.SourceForge.Koogra.IWorksheet genericWS = genericWB.Worksheets.GetWorksheetByIndex(0);

        for (uint r = genericWS.FirstRow; r <= genericWS.LastRow; ++r)
        {
            Net.SourceForge.Koogra.IRow row = genericWS.Rows.GetRow(r);

            for (uint c = genericWS.FirstCol; c <= genericWS.LastCol; ++c)
            {
                // raw value
                Console.WriteLine(row.GetCell(c).Value);

                // formatted value
                Console.WriteLine(row.GetCell(c).GetFormattedValue());
            }
        } 
```

我希望我能帮助遇到同样“内存不足”问题的其他人......'享受

**对上面代码**的一个小更新****

 **好的..我已经玩了一点，就它与图表排名所依据的文件内容有关`Unique IP`，当前代码是

```
 //place source file within your current:
            //project directory\bin\debug and you should find extracted file next to the source file 
            var pathtoRead = Path.Combine(Environment.CurrentDirectory, "tst.xlsx");
            var pathtoWrite = Path.Combine(Environment.CurrentDirectory, "tst.txt");

            Net.SourceForge.Koogra.IWorkbook genericWB = Net.SourceForge.Koogra.WorkbookFactory.GetExcel2007Reader(pathtoRead);
            Net.SourceForge.Koogra.IWorksheet genericWS = genericWB.Worksheets.GetWorksheetByIndex(0);
            StringBuilder SbXls = new StringBuilder();
            for (uint r = genericWS.FirstRow; r <= genericWS.LastRow; ++r)
            {
                Net.SourceForge.Koogra.IRow row = genericWS.Rows.GetRow(r);
                string LineEnding = string.Empty;
                for (uint ColCount = genericWS.FirstCol; ColCount <= genericWS.LastCol; ++ColCount)
                {

                    var formated = row.GetCell(ColCount).GetFormattedValue();
                    if (ColCount == 1)
                        LineEnding = Environment.NewLine;
                    else if (ColCount == 0)
                        LineEnding = "\t";
                    if (ColCount > 1 == false)
                        SbXls.Append(string.Concat(formated, LineEnding));
                }
            }
            File.WriteAllText(pathtoWrite, SbXls.ToString()); 
```**

# java - 在单个 Hibernate 事务中保存多个新实体

> ID：13608387
> 
> 赞同：1
> 
> 时间：2012-11-28T15:18:59.170
> 
> 标签：java, hibernate, persistence, ejb-3.0, cascade

我正在尝试创建一个 EJB 服务方法，该方法创建两个新的实体对象并将它们相互关联并与现有实体关联。类之间的关系如下所示：

```
ClassA 1:N ClassB
ClassA 1:N ClassC
ClassB 1:N ClassC 
```

目前，所有关系都是双向的，我将每个关系的 CascadeType 设置为“ALL”。将使用实体管理器查找 ClassA 的实例。ClassB 和 ClassC 是作为此方法的一部分创建的新实例。我想做的是建立关系，保留所有更改，并返回更新后的 ClassC 实例。问题是，当我实际尝试提交事务时，总是会收到如下错误：

> “（javax.resource.ResourceException：事务未激活：tx = TransactionImple < ac，BasicAction：0：ffff7f000001：126a：50b6222c：c2状态：ActionStatus.ABORT_ONLY >）”

有谁知道如何去做这样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-03-21T09:21:10.380

您可能从已将事务标记为已回滚的事务方法（用 注释）中捕获了一个错误`@TransactionAttribute`，因此在您提交时当前事务不再有效（已由容器回滚）。

# c# - 如何在我的 asp.net Web 应用程序中调用嵌入在 dll 中的 javascript 文件？

> ID：13608388
> 
> 赞同：5
> 
> 时间：2012-11-28T15:19:02.820
> 
> 标签：c#, asp.net, embedded-resource

在我为我的 asp.net 构建的库中，是否可以将 javascript 文件嵌入为嵌入式资源，并且仍然能够通过 URL 调用和/或脚本标记检索它，而无需创建辅助 ashx 来加载 javascript ?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T15:59:33.867

这是完全可能的。

一个快速的谷歌想出了这个非常好的教程[在 ASP.NET 中管理你的 JavaScript 库](http://www.codeproject.com/Articles/196727/Managing-Your-JavaScript-Library-in-ASP-NET)

# php - 测试 cidr 表示法的网络是否与另一个网络重叠

> ID：13608394
> 
> 赞同：9
> 
> 时间：2012-11-28T15:19:35.410
> 
> 标签：php, ipv4, cidr

我正在寻找一种 php 算法，可以有效地测试一个 cidr 表示的网络是否与另一个重叠。

基本上我有以下情况：

cidr 地址数组：

```
$cidrNetworks = array(
    '192.168.10.0/24',
    '10.10.0.30/20',
    etc.
); 
```

我有一个将网络添加到数组的方法，但是当添加的网络与数组中已经存在的网络重叠时，此方法应该引发异常。

所以即。如果添加了 192.168.10.0/25，则应抛出异常。

有没有人有/知道/“可以想到”一种有效测试它的方法？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-28T19:02:41.800

这是之前在聊天中讨论的课程的更新版本。它可以做你需要的事情，以及许多其他有用的事情。

```
<?php

    class IPv4Subnet implements ArrayAccess, Iterator {

        /*
         * Address format constants
         */
        const ADDRESS_BINARY = 0x01;
        const ADDRESS_INT = 0x02;
        const ADDRESS_DOTDEC = 0x04;
        const ADDRESS_SUBNET = 0x08;

        /*
         * Constants to control whether getHosts() returns the network/broadcast addresses
         */
        const HOSTS_WITH_NETWORK = 0x10;
        const HOSTS_WITH_BROADCAST = 0x20;
        const HOSTS_ALL = 0x30;

        /*
         * Properties to store base address and subnet mask as binary strings
         */
        protected $address;
        protected $mask;

        /*
         * Counter to track the current iteration offset
         */
        private $iteratorOffset = 0;

        /*
         * Array to hold values retrieved via ArrayAccess
         */
        private $arrayAccessObjects = array();

        /*
         * Helper methods
         */
        private function longToBinary ($long) {
            return pack('N', $long);
        }
        private function longToDottedDecimal ($long) {
            return ($long >> 24 & 0xFF).'.'.($long >> 16 & 0xFF).'.'.($long >> 8 & 0xFF).'.'.($long & 0xFF);
        }
        private function longToByteArray ($long) {
            return array(
                $long >> 24 & 0xFF,
                $long >> 16 & 0xFF,
                $long >> 8 & 0xFF,
                $long & 0xFF
            );
        }
        private function longToSubnet ($long) {
            if (!isset($this->arrayAccessObjects[$long])) {
                $this->arrayAccessObjects[$long] = new self($long);
            }
            return $this->arrayAccessObjects[$long];
        }
        private function binaryToLong ($binary) {
            return current(unpack('N', $binary));
        }
        private function binaryToDottedDecimal ($binary) {
            return implode('.', unpack('C*', $binary));
        }
        private function binaryToX ($binary, $mode) {
            if ($mode & self::ADDRESS_BINARY) {
                $result = $binary;
            } else if ($mode & self::ADDRESS_INT) {
                $result = $this->binaryToLong($binary);
            } else if ($mode & self::ADDRESS_DOTDEC) {
                $result = $this->binaryToDottedDecimal($binary);
            } else {
                $result = $this->longToSubnet($this->binaryToLong($binary));
            }
            return $result;
        }
        private function byteArrayToLong($bytes) {
            return ($bytes[0] << 24) | ($bytes[1] << 16) | ($bytes[2] << 8) | $bytes[3];
        }
        private function byteArrayToBinary($bytes) {
            return pack('C*', $bytes[0], $bytes[1], $bytes[2], $bytes[3]);
        }

        private function normaliseComparisonSubject (&$subject) {
            if (!is_object($subject)) {
                $subject = new self($subject);
            }
            if (!($subject instanceof self)) {
                throw new InvalidArgumentException('Subject must be an instance of IPv4Subnet');
            }
        }

        private function validateOctetArray (&$octets) {
            foreach ($octets as &$octet) {
                $octet = (int) $octet;
                if ($octet < 0 || $octet > 255) {
                    return FALSE;
                }
            }
            return TRUE;
        }

        /*
         * Constructor
         */
        public function __construct ($address = NULL, $mask = NULL) {
            if ($address === NULL || (is_string($address) && trim($address) === '')) {
                $address = array(0, 0, 0, 0);
            } else if (is_int($address)) {
                $address = $this->longToByteArray($address);
            } else if (is_string($address)) {
                $parts = preg_split('#\s*/\s*#', trim($address), -1, PREG_SPLIT_NO_EMPTY);
                if (count($parts) > 2) {
                    throw new InvalidArgumentException('No usable IP address supplied: Syntax error');
                } else if ($parts[0] === '') {
                    throw new InvalidArgumentException('No usable IP address supplied: IP address empty');
                }
                if (!empty($parts[1]) && !isset($mask)) {
                    $mask = $parts[1];
                }
                $address = preg_split('#\s*\.\s*#', $parts[0], -1, PREG_SPLIT_NO_EMPTY);
            } else if (is_array($address)) {
                $address = array_values($address);
            } else {
                throw new InvalidArgumentException('No usable IP address supplied: Value must be a string or an integer');
            }

            $suppliedAddressOctets = count($address);
            $address += array(0, 0, 0, 0);
            if ($suppliedAddressOctets > 4) {
                throw new InvalidArgumentException('No usable IP address supplied: IP address has more than 4 octets');
            } else if (!$this->validateOctetArray($address)) {
                throw new InvalidArgumentException('No usable IP address supplied: At least one octet value outside acceptable range 0 - 255');
            }

            if ($mask === NULL) {
                $mask = array_pad(array(), $suppliedAddressOctets, 255) + array(0, 0, 0, 0);
            } else if (is_int($mask)) {
                $mask = $this->longToByteArray($mask);
            } else if (is_string($mask)) {
                $mask = preg_split('#\s*\.\s*#', trim($mask), -1, PREG_SPLIT_NO_EMPTY);

                switch (count($mask)) {
                    case 1: // CIDR
                        $cidr = (int) $mask[0];
                        if ($cidr === 0) {
                            // Shifting 32 bits on a 32 bit system doesn't work, so treat this as a special case
                            $mask = array(0, 0, 0, 0);
                        } else if ($cidr <= 32) {
                            // This looks odd, but it's the nicest way I have found to get the 32 least significant bits set in a
                            // way that works on both 32 and 64 bit platforms
                            $base = ~((~0 << 16) << 16);
                            $mask = $this->longToByteArray($base << (32 - $cidr));
                        } else {
                            throw new InvalidArgumentException('Supplied mask invalid: CIDR outside acceptable range 0 - 32');
                        }
                        break;
                    case 4: break; // Dotted decimal
                    default: throw new InvalidArgumentException('Supplied mask invalid: Must be either a full dotted-decimal or a CIDR');
                }
            } else if (is_array($mask)) {
                $mask = array_values($mask);
            } else {
                throw new InvalidArgumentException('Supplied mask invalid: Type invalid');
            }

            if (!$this->validateOctetArray($mask)) {
                throw new InvalidArgumentException('Supplied mask invalid: At least one octet value outside acceptable range 0 - 255');
            }
            // Check bits are contiguous from left
            // TODO: Improve this mechanism
            $asciiBits = sprintf('%032b', $this->byteArrayToLong($mask));
            if (strpos(rtrim($asciiBits, '0'), '0') !== FALSE) {
                throw new InvalidArgumentException('Supplied mask invalid: Set bits are not contiguous from the most significant bit');
            }

            $this->mask = $this->byteArrayToBinary($mask);
            $this->address = $this->byteArrayToBinary($address) & $this->mask;
        }

        /*
         * ArrayAccess interface methods (read only)
         */
        public function offsetExists ($offset) {
            if ($offset === 'network' || $offset === 'broadcast') {
                return TRUE;
            }

            $offset = filter_var($offset, FILTER_VALIDATE_INT);
            if ($offset === FALSE || $offset < 0) {
                return FALSE;
            }

            return $offset < $this->getHostsCount();
        }
        public function offsetGet ($offset) {
            if (!$this->offsetExists($offset)) {
                return NULL;
            }

            if ($offset === 'network') {
                $address = $this->getNetworkAddress(self::ADDRESS_INT);
            } else if ($offset === 'broadcast') {
                $address = $this->getBroadcastAddress(self::ADDRESS_INT);
            } else {
                // How much the address needs to be adjusted by to account for network address
                $adjustment = (int) ($this->getHostsCount() > 2);
                $address = $this->binaryToLong($this->address) + $offset + $adjustment;
            }

            return $this->longToSubnet($address);
        }
        public function offsetSet ($offset, $value) {}
        public function offsetUnset ($offset) {}

        /*
         * Iterator interface methods
         */
        public function current () {
            return $this->offsetGet($this->iteratorOffset);
        }
        public function key () {
            return $this->iteratorOffset;
        }
        public function next () {
            $this->iteratorOffset++;
        }
        public function rewind () {
            $this->iteratorOffset = 0;
        }
        public function valid () {
            return $this->iteratorOffset < $this->getHostsCount();
        }

        /*
         * Data access methods
         */
        public function getHosts ($mode = self::ADDRESS_SUBNET) {
            // Parse flags and initialise vars
            $bin = (bool) ($mode & self::ADDRESS_BINARY);
            $int = (bool) ($mode & self::ADDRESS_INT);
            $dd = (bool) ($mode & self::ADDRESS_DOTDEC);
            $base = $this->binaryToLong($this->address);
            $mask = $this->binaryToLong($this->mask);
            $hasNwBc = !($mask & 0x03);
            $result = array();

            // Get network address if requested
            if (($mode & self::HOSTS_WITH_NETWORK) && $hasNwBc) {
                $result[] = $base;
            }

            // Get hosts
            for ($current = $hasNwBc ? $base + 1 : $base; ($current & $mask) === $base; $current++) {
                $result[] = $current;
            }

            // Remove broadcast address if present and not requested
            if ($hasNwBc && !($mode & self::HOSTS_WITH_BROADCAST)) {
                array_pop($result);
            }

            // Convert to the correct type
            if ($bin) {
                $result = array_map(array($this, 'longToBinary'), $result);
            } else if ($dd) {
                $result = array_map(array($this, 'longToDottedDecimal'), $result);
            } else if (!$int) {
                $result = array_map(array($this, 'longToSubnet'), $result);
            }

            return $result;
        }
        public function getHostsCount () {
            $count = $this->getBroadcastAddress(self::ADDRESS_INT) - $this->getNetworkAddress(self::ADDRESS_INT);
            return $count > 2 ? $count - 1 : $count + 1; // Adjust return value to exclude network/broadcast addresses
        }
        public function getNetworkAddress ($mode = self::ADDRESS_SUBNET) {
            return $this->binaryToX($this->address, $mode);
        }
        public function getBroadcastAddress ($mode = self::ADDRESS_SUBNET) {
            return $this->binaryToX($this->address | ~$this->mask, $mode);
        }
        public function getMask ($mode = self::ADDRESS_DOTDEC) {
            return $this->binaryToX($this->mask, $mode);
        }

        /*
         * Stringify methods
         */
        public function __toString () {
            if ($this->getHostsCount() === 1) {
                $result = $this->toDottedDecimal();
            } else {
                $result = $this->toCIDR();
            }
            return $result;
        }
        public function toDottedDecimal () {
            $result = $this->getNetworkAddress(self::ADDRESS_DOTDEC);
            if ($this->mask !== "\xFF\xFF\xFF\xFF") {
                $result .= '/'.$this->getMask(self::ADDRESS_DOTDEC);
            }
            return $result;
        }
        public function toCIDR () {
            $address = $this->getNetworkAddress(self::ADDRESS_DOTDEC);
            $cidr = strlen(trim(sprintf('%b', $this->getMask(self::ADDRESS_INT)), '0')); // TODO: Improve this mechanism
            return $address.'/'.$cidr;
        }

        /*
         * Comparison methods
         */
        public function contains ($subject) {
            $this->normaliseComparisonSubject($subject);

            $subjectAddress = $subject->getNetworkAddress(self::ADDRESS_BINARY);
            $subjectMask = $subject->getMask(self::ADDRESS_BINARY);

            return $this->mask !== $subjectMask && ($this->mask | ($this->mask ^ $subjectMask)) !== $this->mask && ($subjectAddress & $this->mask) === $this->address;
        }

        public function within ($subject) {
            $this->normaliseComparisonSubject($subject);

            $subjectAddress = $subject->getNetworkAddress(self::ADDRESS_BINARY);
            $subjectMask = $subject->getMask(self::ADDRESS_BINARY);

            return $this->mask !== $subjectMask && ($this->mask | ($this->mask ^ $subjectMask)) === $this->mask && ($this->address & $subjectMask) === $subjectAddress;
        }
        public function equalTo ($subject) {
            $this->normaliseComparisonSubject($subject);

            return $this->address === $subject->getNetworkAddress(self::ADDRESS_BINARY) && $this->mask === $subject->getMask(self::ADDRESS_BINARY);
        }
        public function intersect ($subject) {
            $this->normaliseComparisonSubject($subject);

            return $this->equalTo($subject) || $this->contains($subject) || $this->within($subject);
        }

    } 
```

为了做你想做的事，该类提供了 4 种方法：

```
contains()
within()
equalTo()
intersect() 
```

这些的示例用法：

```
// Also accepts dotted decimal mask. The mask may also be passed to the second
// argument. Any valid combination of dotted decimal, CIDR and integers will be
// accepted
$subnet = new IPv4Subnet('192.168.0.0/24');

// These methods will accept a string or another instance
var_dump($subnet->contains('192.168.0.1')); //TRUE
var_dump($subnet->contains('192.168.1.1')); //FALSE
var_dump($subnet->contains('192.168.0.0/16')); //FALSE
var_dump($subnet->within('192.168.0.0/16')); //TRUE
// ...hopefully you get the picture. intersect() returns TRUE if any of the
// other three match. 
```

该类还实现了`Iterator`接口，允许您遍历子网中的所有地址。迭代器不包括网络地址和广播地址，可以单独检索。

例子：

```
$subnet = new IPv4Subnet('192.168.0.0/28');
echo "Network: ", $subnet->getNetworkAddress(),
     "; Broadcast: ", $subnet->getBroadcastAddress(),
     "\nHosts:\n";
foreach ($subnet as $host) {
    echo $host, "\n";
} 
```

该类还实现`ArrayAccess`了 ，允许您将其视为一个数组：

```
$subnet = new IPv4Subnet('192.168.0.0/28');
echo $subnet['network'], "\n"; // 192.168.0.0
echo $subnet[0], "\n"; // 192.168.0.1
// ...
echo $subnet[13], "\n"; // 192.168.0.14
echo $subnet['broadcast'], "\n"; // 192.168.0.15 
```

注意：访问子网主机地址的迭代器/数组方法将返回另一个`IPv4Subnet`对象。该类实现`__toString()`，如果它代表一个地址，它将以点分十进制形式返回 IP 地址，如果它代表多个地址，则返回 CIDR。`get*()`通过调用相关方法并传​​递所需的标志（参见类顶部定义的常量），可以直接以字符串或整数形式访问数据。

所有操作都是 32 位和 64 位安全的。兼容性应该是（虽然没有经过彻底测试）5.2+

[看到它工作](http://codepad.viper-7.com/BqB6bO)

* * *

为了完整起见，我想您的用例将按照以下方式实现：

```
public function addSubnet ($newSubnet) {
    $newSubnet = new IPv4Subnet($newSubnet);
    foreach ($this->subnets as &$existingSubnet) {
        if ($existingSubnet->contains($newSubnet)) {
            throw new Exception('Subnet already added');
        } else if ($existingSubnet->within($newSubnet)) {
            $existingSubnet = $newSubnet;
            return;
        }
    }
    $this->subnets[] = $newSubnet;
} 
```

[看到它工作](http://codepad.viper-7.com/LUgb1V)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T16:24:27.730

正如在 PHP 聊天中简要讨论的那样，我将如何实现它，以比较任意两个地址。

1.  将 IP 地址转换为其二进制形式
2.  从 CIDR 格式中提取掩码
3.  取两者中的最小掩码（最不具体=包含更多地址）
4.  对两种二进制表示都使用掩码。
5.  比较两者。

如果存在匹配，则一个包含在另一个中。

这是一些示例代码，它不是很漂亮，您需要对其进行调整以适应您的阵列。

```
function bin_pad($num)
{
    return str_pad(decbin($num), 8, '0', STR_PAD_LEFT);
}

$ip1 = '192.168.0.0/23';
$ip2 = '192.168.1.0/24';

$regex = '~(\d+)\.(\d+)\.(\d+)\.(\d+)/(\d+)~';

preg_match($regex, $ip1, $ip1);
preg_match($regex, $ip2, $ip2);

$mask = min($ip1[5], $ip2[5]);

$ip1 = substr(
    bin_pad($ip1[1]) . bin_pad($ip1[2]) .
    bin_pad($ip1[3]) . bin_pad($ip1[4]),
    0, $mask
);

$ip2 = substr(
    bin_pad($ip2[1]) . bin_pad($ip2[2]) .
    bin_pad($ip2[3]) . bin_pad($ip2[4]),
    0, $mask
);

var_dump($ip1, $ip2, $ip1 === $ip2); 
```

我在使它与 32 位兼容时遇到了麻烦，这就是为什么我最终选择将 IP 地址的每个八位字节单独转换为二进制文件，然后使用`substr`.

我开始使用`pack('C4', $ip[1] .. $ip[4])`但在使用完整的 32 位掩码时遇到了将其转换为二进制的问题（因为 PHP 整数是有符号的）。考虑未来的实施！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T15:48:54.750

直觉上，我建议您执行以下操作：

1.  让新条目成为`X`
2.  转换`X`为单个整数形式，令该整数为`Y`
3.  让任何条目的掩码长度`A`为`mask(A)`
4.  比较任何现有条目`mask(entry) = mask(Y)`
5.  屏蔽现有条目`mask(entry) > mask(Y)`并与之比较`Y`
6.  屏蔽`Y`每个现有条目 where `mask(entry) < mask(X)`，这样`mask(Y) = mask(entry)`和比较

如果你没有遇到碰撞，一切都很好。

当然，这不会检查建议的子网是否有效。

我在这里的正确性主张是，我想不出一个反例，但很可能有一个，所以我提供这个作为进一步思考的基础——希望这会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T16:43:23.870

```
<?php
    function checkOverlap ($net1, $net2) {

        $mask1 = explode("/", $net1)[1];
        $net1 = explode("/", $net1)[0];
        $netArr1 = explode(".",$net1);

        $mask2 = explode("/", $net2)[1];
        $net2 = explode("/", $net2)[0];
        $netArr2 = explode(".",$net2);

        $newnet1 = $newnet2 = "";

        foreach($netArr1 as $num) {
            $binnum = decbin($num);
            $length = strlen($binnum);
            for ($i = 0; $i < 8-$length; $i++) {
                $binnum = '0'.$binnum;
            }
            $newnet1 .= $binnum;
        }

        foreach($netArr2 as $num) {
            $binnum = decbin($num);
            $length = strlen($binnum);
            for ($i = 0; $i < 8-$length; $i++) {
                $binnum = '0'.$binnum;
            }
            $newnet2 .= $binnum;
        }

        $length = min($mask1, $mask2);

        $newnet1 = substr($newnet1,0,$length);
        $newnet2 = substr($newnet2,0,$length);

        $overlap = 0;
        if ($newnet1 == $newnet2) $overlap = 1;

        return $overlap;
    }

    function networksOverlap ($networks, $newnet) {

        $overlap = false;

        foreach ($networks as $network) {
            $overlap = checkOverlap($network, $newnet);
            if ($overlap) return 1;
        }

        return $overlap;        

    }

    $cidrNetworks = array(
        '192.168.10.0/24',
        '10.10.0.30/20'
    );

    $newnet = "192.168.10.0/25";

    $overlap = networksOverlap($cidrNetworks, $newnet);
?> 
```

不确定这是否 100% 正确，但试试看它是否有效。

# exception - 上传 logstash 1.1.15 时出现问题 - 将整体 jar 作为 Cloud Foundry 应用程序。

> ID：13608395
> 
> 赞同：2
> 
> 时间：2012-11-28T15:19:47.953
> 
> 标签：exception, elasticsearch, cloud-foundry, vmc, logstash

当我运行 vmc update logstash。我得到错误。

上传应用程序：检查可用资源：OK 处理资源：OK 打包应用程序：OK 上传（55M）：OK HTTP 异常：RestClient::RequestTimeout:Request Timeout

有没有人成功地将logstash推送到云代工（不是微）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T00:11:37.963

Logstash 是一个需要 jruby 的独立应用程序 (jar)。Cloudfoundry 在战争中支持 jruby，但在独立的运行时环境中尚不支持。

# ios - 首次启动时的 Ios 警报以设置通知

> ID：13608397
> 
> 赞同：2
> 
> 时间：2012-11-28T15:19:54.870
> 
> 标签：ios, notifications, uialertview

我使用dreamweaver/phonegap 创建了一个摄影任务生成器应用程序，并在xcode 中进行了一些收尾工作。我已经设置了一个设置包，用户可以在其中设置每日提醒。它被预设为关闭，因为我不想惹恼不想要它的人。因为我是使用dreamweaver 完成的，所以我找不到访问设置包的方法，所以用户必须转到设置，轻按开关，然后重新启动应用程序才能使其生效。

我想做的是让应用程序在第一次启动应用程序时询问他们是否愿意设置每日提醒。如果他们点击是，它应该将提醒设置设置为 ON/YES，如果不是，它应该继续使用默认设置为 no。
如果我能有一个“也许以后”按钮，那就更棒了。

我不擅长编程，要完成这项工作对我来说需要做很多工作（感谢这里和网络上其他网站的伟大人物的帮助）我尝试过使用各种 IF/THEN，但我可以让它工作。

所以这是我到目前为止所拥有的......如果你们中的任何人能够帮助我解决这个问题，我将不胜感激。
谢谢诺埃尔·切尼尔

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOtions:(NSDictionary *)launchOptions 
```

{

```
[[UIApplication sharedApplication]
 registerForRemoteNotificationTypes:
 UIRemoteNotificationTypeAlert | UIRemoteNotificationTypeSound];

NSUserDefaults *defaults =[NSUserDefaults standardUserDefaults];
NSDictionary *appDefaults =[NSDictionary dictionaryWithObject:@"NO" forKey:@"enableNotifications"];
[defaults registerDefaults:appDefaults];
[defaults synchronize];

UILocalNotification *localNotif= [launchOptions objectForKey:UIApplicationLaunchOptionsLocalNotificationKey];
if (localNotif) {
    NSLog(@"Recieved Notification %@",localNotif);
}

/*NSArray *keyArray = [launchOptions allKeys];
 if ([launchOptions objectForKey:[keyArray objectAtIndex:0]]!=[nil)

 {
 NSURL *url = [launchOptions objectForKey:[keyArray objectAtIndex:0]];
 self.invokeString = [url absoluteString];

 }*/

return  [super application:application didFinishLaunchingWithOptions:launchOptions]; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:33:41.400

这是一项非常简单的任务，尤其是考虑到您已经在使用`NSUserDefaults`. 您需要做的就是`BOOL`在每次应用启动时将 a 存储在您的默认值中。例如：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOtions:(NSDictionary *)launchOptions {
    NSUserDefaults* defaults = [NSUserDefaults standardUserDefaults];
    if(![defaults boolForKey:@"firstLaunch"]) {
        //this key has never been set - this is the first launch
        [defaults setBool:YES forKey:@"firstLaunch"];

        //show your alert here that you only want to show on the
        //first application launch
        UIAlertView* alert = [[UIAlertView alloc] initWithTitle:@"Some Title" 
            message:@"Some message" delegate:self cancelButtonTitle:@"Cancel" 
            otherButtonTitles:@"Some Button", @"Another Button", @"One More Button", 
            nil];
        [alert show];
    }
} 
```

# javascript - 当项目嵌套在同一个括号中时读取 XML 文件

> ID：13608399
> 
> 赞同：1
> 
> 时间：2012-11-28T15:20:01.827
> 
> 标签：javascript, xml

我在读取 XML 文件的 Javascript 函数中有这段代码：

```
var title = $(this).children('Title').text(); 
```

这适用于此 XML 代码

```
<Title>
Nice long title
</Title> 
```

在同一个 XML 文件中，我有嵌套在括号中的信息，如下所示：

```
<ProductSearch>

 <Products totalResultsAvailable="0" firstResultPosition="1" totalResultsReturned="0" searchOperator="or"/>

</ProductSearch> 
```

我需要什么代码来提取 totalResultsAvailable 整数？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:26:07.887

```
var totalResultsAvailable = $(this).children('ProductSearch').children('Products').getAttribute("totalResultsAvailable"); 
```

# asp.net - ASP.NET MVC 日期属性被忽略

> ID：13608402
> 
> 赞同：0
> 
> 时间：2012-11-28T15:20:17.157
> 
> 标签：asp.net, asp.net-mvc, data-annotations

我有以下模型属性和属性：

```
 [DataType(DataType.Date)]
    public Nullable<DateTime> DateOfBirth { get; set; } 
```

我的 EditScreen.cshtml 有以下部分来显示出生日期：

```
 <div class="editor-label">
            Date of Birth
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.DateOfBirth)
            @Html.ValidationMessageFor(model => model.DateOfBirth)
        </div> 
```

但是，尽管有 DataType.Date 属性，页面上仍会显示完整的日期和时间，例如 06/04/1971 00:00:00

为什么日期的时间部分仍在显示，我错过了任何“陷阱”吗？

我尝试将 Nullable 更改为日期时间，但没有任何区别。必须有一些基本的东西阻止日期被格式化，但我不知道那可能是什么，也不知道如何找出来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:21:48.537

您可能只需要创建一个编辑器模板来修改 EditorFor 中的日期格式。

为此，请在 Views\Shared 下创建一个新文件夹（如果它不存在）并将其命名为“EditorTemplates”。在该文件夹中添加一个新的局部视图并将其命名为“DateTime.cshtml”。

在新的“DateTime.cshtml”文件中添加以下代码：

```
@model System.DateTime ?
@Html.TextBox("", (Model.HasValue ? Model.Value.ToShortDateString() : string.Empty)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T15:27:10.943

您可以尝试添加

```
 [DataType(DataType.Date)]
   [DisplayFormat(DataFormatString = "{0:yyyy-MM-dd}", ApplyFormatInEditMode = true)] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T12:24:57.060

```
[DataType(DataType.Date)]
(DataFormatString = "{0:MMMMMMMMMM dd,yyyy}")]
public Nullable<DateTime> DateOfBirth { get; set; } 
```

尝试这个。

# c++ - boost 使用 c++11 的效果如何？

> ID：13608403
> 
> 赞同：10
> 
> 时间：2012-11-28T15:20:19.843
> 
> 标签：c++, boost, c++11

Boost 本质上是一个 c++03 库（它激发了 c++11 标准）。我正在考虑使用一些 boost 库（那些没有在 c++11 中实现的库）。如果我使用的是 c++11，boost 是否编译（可能存在不可复制但可移动的对象的问题）？以及 boost 对 c++11 特性的使用效果如何（可变参数模板是[由一些 boost 库] 使用的显而易见的东西，而不是 boost MPL 的大部分）？（我在 boost FAQ 中找不到这个）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-28T17:01:36.467

Boost 正朝着使用 C++11 特性的方向发展。

但要记住的一点是，boost 不是“库”，而是库的集合。其中一些（例如`boost::array`）可能永远不会更新为使用许多 c++11 功能。为什么要这样做，当你有`std::array`标准时（这是基于`boost::array`？）

另一方面，Boost 希望对仍在使用 C++03 的人保持有用。

*注意：尽管我写的“Boost”好像是一个单一的实体，但有很多人为 Boost 做出贡献，他们有很多不同的意见。;-)*

要了解各种 boost 库如何与 C++11 编译器配合使用，您可以查看[Boost Testing](http://www.boost.org/development/tests/trunk/developer/summary.html)网页。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T17:19:18.507

C++11 尽可能向后兼容。除非 boost 使用的是 C++11 新的保留关键字，否则我没有理由知道为什么它不应该用新标准编译得很好。

# c# - 使用 Open XML 在 Excel 中的指定单元格中插入

> ID：13608409
> 
> 赞同：2
> 
> 时间：2012-11-28T15:20:36.353
> 
> 标签：c#, xml

谁能帮助我如何使用 C# 中的 Open XML 将值插入到 Excel 工作表中的指定单元格中？例如，我想插入 Excel 工作表中的“E10”行，我该怎么做？我正在使用 Open XML SDK v2.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:23:43.817

您可以为此使用[Excel 帮助程序库](http://ehl.codeplex.com/)。像这样的东西： -

```
excel.Add(new ExcelCell(1, 1, "test1,1"));
excel.Add(new ExcelCell(1, 2, "test1,2"));
excel.Add(new ExcelCell(2, 2, "test2,2"));
excel.Add(new ExcelCell(2, 3, "test2,3")); 
```

# python - matplotlib中许多变量的累积图？

> ID：13608416
> 
> 赞同：2
> 
> 时间：2012-11-28T15:20:43.897
> 
> 标签：python, matplotlib

有没有一种简单的方法可以用 matplotlib/numpy 绘制许多变量的累积图？

我正在考虑这样的图表[http://atlassian.wpengine.netdna-cdn.com/jira/cumulative-flow-diagram.png](http://atlassian.wpengine.netdna-cdn.com/jira/cumulative-flow-diagram.png)。

例如，我有数据`a=[0,3,6]`，`b=[0,3,4]`这应该成为计数图 `[(0, a=1, b=1), (3, a=2, b=2), (4, a=2, b=3), (6, a=3, b=3)]`。因此没有分箱，而是所有 x 值都得到一个点，特定变量的计数低于该值。a 和 b 值应相互堆叠。

我可以想象如何使用 bisect 实现复杂的交错预处理，但我看不到一个简单的解决方案。

有什么建议么？

编辑：累积计数的另一种解释：我有多个带有 x 值的数据行。例如`a=[0,3,6]`, `b=[0,3,4]`,`c=[1, 7]`

我需要每个数据行的图表。图的 x 坐标的可能值是所有数据行值的并集。在这里`[0,1,3,4,6,7]`。

对于这些总 x 值中的每一个，特定行的 y 值将是该数据中有多少值低于 x 坐标。因此，对于 x 坐标，`x=[0,1,3,4,6,7]`我会得到`ya=[1,1,2,2,3,3]`, `yb=[1,1,2,3,3,3]`, `yc=[0,1,1,1,1,2]`. 当然我会使用堆积图:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T15:32:44.593

您在链接中提到的情节类型可以通过`stackplot`. 参见例如画廊的这个例子：http: [//matplotlib.org/examples/pylab_examples/stackplot_demo.html](http://matplotlib.org/examples/pylab_examples/stackplot_demo.html)

我对示例数据的意思并不完全清楚。你能给出一个更详细的例子来说明你拥有的数据以及你想要获得什么吗？

编辑：一个非常简单的方法：

```
>>> a=[0,3,6]
>>> b=[0,3,4]
>>> c=[1, 7]
>>> 
>>> x = [0,1,3,4,6,7]
>>> 
>>> ya = []
>>> 
>>> val = 0
>>> for i in x:
...     if i in a:
...         val += 1
...         ya.append(val)
...     else:
...         ya.append(val)
... 
>>> ya
[1, 1, 2, 2, 3, 3] 
```

但可能会有更有效的方法。您使用 numpy 还是 pandas 进行分析？还是使用普通列表？

# android - android中带有保存和取消按钮的微调器

> ID：13608424
> 
> 赞同：0
> 
> 时间：2012-11-28T15:20:59.643
> 
> 标签：android, spinner

嗨，我想设计一个带有保存和取消按钮的微调器，看起来像 iphone 下拉列表。

请给我一些例子。

我厌倦了搜索，但找不到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:28:38.887

你最好的选择是在里面创建一个自`AlertDialog`定义`Spinner`。[这是Custom`AlertDialog`](http://www.mkyong.com/android/android-custom-dialog-example/)的示例。在为 android 制作应用程序时，我建议遵循 Android 设计指南而不是模仿 iOS 设计，因为这会让用户感到困惑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T15:26:33.940

打开“res/values/strings.xml”文件，定义将在 Spinner 中显示的项目列表（下拉列表）。

```
<?xml version="1.0" encoding="utf-8"?>
<string name="spn_prompt">Choose one</string>
<resources>
    <string-array name="spn_arrays">
        <item>Save</item>
        <item>Cancel States</item>        
    </string-array>

</resources> 
```

将它们设置在您的布局中

```
 <Spinner
    android:id="@+id/spinner1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:entries="@array/spn_arrays"
    android:prompt="@string/spn_prompt" /> 
```

# xcode - 断点在 xcode 4 中不起作用

> ID：13608427
> 
> 赞同：1
> 
> 时间：2012-11-28T15:21:04.393
> 
> 标签：xcode, macos, makefile, breakpoints

我刚开始使用 Xcode 来编写一个 C++ openCV 项目。该项目使用外部 makefile 设置，/usr/bin/gnumake 作为构建工具，程序编译并运行良好。但是，无论我做什么，都会跳过断点。我尝试过创建一个新项目，在 gdb 和 LLDB 之间进行选择，重新启动 Xcode++ 关于这个问题有很多线程，但大多数都在谈论“Load Symbols Lazily”，但据我所知，这在 Xcode 4.5 中不是问题。 2\. 可能是我有限的 Xcode 知识导致了错误。非常感谢您的帮助。

![截屏](../Images/f48f35c720a9311472982df5a98b28eb.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T10:38:51.737

我可以通过禁用调试构建设置的“链接时间优化”来解决我的类似问题。

确保在调试构建设置（代码剥离、优化等）中禁用任何类型的代码优化。然后检查您是否真的运行调试版本而不是发布版本。

如果 XCode 能够在您有可能破坏调试器的构建设置时自动警告您，那就太好了……

# xcode - 无法安装 cocos2d 扩展

> ID：13608431
> 
> 赞同：1
> 
> 时间：2012-11-28T15:21:12.557
> 
> 标签：xcode, cocos2d-iphone, cocos2d-extensions-ios

我已经安装了 cocos2d 并且可以工作，但是无法安装 cocos2d 扩展。

我看到了很多来自谷歌的教程和来自 youtube 的视频，但都没有成功，我总是收到文件丢失错误。我按照教程一步一步来。首先我从 cocos2d 扩展中删除 cocos2d 空文件夹，然后创建一个名为 cocos2d 源的新文件夹，并从下载的 cocos2d 源文件夹中添加 cocos2d 文件夹。

右键单击 cocos2d 源文件夹，没有教程显示的“进入”选项，因为 Xcode 4.5.2 中缺少此选项。因此，当我添加 cocos2d 文件夹时，我检查了 cocos 库和 allTests，在构建后我得到 kazmath/kazmath.h 在添加 kazmath 文件夹后缺少文件，我必须更改所有输入目录以指向 kazmath 文件，而不是 kazmat/kazmath.h 用于 ej . 之后我得到了 Mach O Linker 错误。有什么帮助吗？这是我的截图

![在此处输入图像描述](../Images/10287d722c1b4348e71002444fdc7922.png)

![在此处输入图像描述](../Images/b5b3b5638ef0f5e215bbee894b467e99.png)

![在此处输入图像描述](../Images/202df5674d35edf7e63896b4ac7587db.png)

![在此处输入图像描述](../Images/5c4223005c9878ba84178c7310238c21.png)

[http://imageshack.us/photo/my-images/198/cocos1.png/](http://imageshack.us/photo/my-images/198/cocos1.png/)

[http://imageshack.us/photo/my-images/801/cocos2.png/](http://imageshack.us/photo/my-images/801/cocos2.png/)

[http://imageshack.us/photo/my-images/51/cocos3.png/](http://imageshack.us/photo/my-images/51/cocos3.png/)

[http://imageshack.us/photo/my-images/811/cocos4.png/](http://imageshack.us/photo/my-images/811/cocos4.png/)

# jquery - 如何为 HTML5 应用程序调用 json 数据 web 服务？

> ID：13608432
> 
> 赞同：2
> 
> 时间：2012-11-28T15:21:11.133
> 
> 标签：jquery, ajax, json, html, jqxgrid

我需要有关 HTML5 的代码帮助。我有网络服务运行数据库并返回 JSON 数据。但是，对于 HTML5 客户端部分，如何使用它以及如何显示对我来说是一个问题。

WebMethod 是“GetItemData”，JSON 数据的返回类型是 String。数据库表包括：ItemID、ItemName、ItemPrice 和 ItemOnHand 列。

我正在成功发布我的网络服务。

请帮我解决这个编码问题。我附上 HTML5 客户端代码，以及这封邮件。[从这里](http://www.jqwidgets.com/download/)下载脚本和样式。JqxGrid 是一个 DataGrid 控件，可以显示从 JSON 到 Grid 的整个数据。

```
<!DOCTYPE html>
<html>
<head>
    <title></title>
    <script src="Scripts/jquery-1.8.2.min.js" type="text/javascript"></script>
    <link href="Styles/jqx.base.css" rel="stylesheet" type="text/css"/>
    <link href="Styles/jqx.classic.css" rel="stylesheet" type="text/css"/>
    <script src="Scripts/jqxcore.js" type="text/javascript"></script>
    <script src="Scripts/jqxbuttons.js" type="text/javascript"></script>
    <script src="Scripts/jqxdata.js" type="text/javascript"></script>
    <script src="Scripts/jqxgrid.js" type="text/javascript"></script>
    <script src="Scripts/jqxgrid.selection.js" type="text/javascript"></script>
    <script src="Scripts/jqxmenu.js" type="text/javascript"></script>
    <script src="Scripts/jqxscrollbar.js" type="text/javascript"></script>

<script type="text/javascript">
    function GetItemsData() {
        try {
            url = "http://localhost:1806/HTMLWebService.asmx/Getjsonitems",
            source = {
                datatype: "json",
                datafields: [
               { name: 'ItemID' },
               { name: 'ItemName' },
               { name: 'ItemPrice'}, 
               { name: 'ItemOnHand'}] 
               };

            $.ajax({
                type: "POST",
                dataType: "json",
                async: false,
                url: "http://localhost:1806/HTMLWebService.asmx/Getjsonitems",
                cache: false,
                contentType: "application/json; charset=utf-8",
                success: SucceedFunc,
                data: "{}",
                failure: FailedFunc
            });
        }
        catch (e) {
            alert('failed to call web service. Error: ' + e);
        }
    }

    function SucceedFunc(data, status) {
        debugger;
        alert("Enter into Success");
        source.localdata = data.d;
        alert(source.localdata = data.d);

        //Preparing the data for use
        var dataAdapter = new $.jqx.dataAdapter(source);
        $("#jqxgrid").jqxGrid({
            source: dataAdapter,
            theme: 'classic',
            columns: [
           { text: 'Item ID', dataField: 'ItemID', width: 250 },
           { text: 'Item Name', dataField: 'ItemName', width: 150 },
           { text: 'Item Price', dataField: 'ItemPrice', width: 180 },
           { text: 'Items On Hand', dataField: 'ItemOnHand', width: 180 }
           ]
        });
    }

    function FailedFunc(request, status, error) {
        debugger;
        alert("Error occured");
    }
</script>
</head>

<body onload="GetItemsData()">
<div id="jqxgrid"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T06:30:57.100

尝试这个

```
$.ajax({
        cache: false,
        type: "GET",
        async: false,
        data: {},
        url: "1231212312312312.svc/webBinding/Result?metaTag=" + meta,
        contentType: "application/json; charset=utf-8",
        crossDomain: true,
        success: function(){},
        error: function(){}
      }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-05T06:16:49.373

如果您可以发布您遇到的错误/问题，那么人们会更容易提供帮助。期望代表您运行代码会导致很少有人愿意提供帮助。

切入正题：您确定代码“POST”中使用的 HTTP 方法是否正确。从网络服务的作用来看，它只是从数据库中获取数据。因此，用于这种 Web 服务的常用 HTTP 动词（因为它只是读取数据而不是修改）是 GET。在这种情况下，您也应该在 $.ajax 中使用 GET ......

尝试，

```
$.ajax({
                type: "GET",
                url: "http://localhost:1806/HTMLWebService.asmx/Getjsonitems",
                async: false,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                cache: false,
                success: SucceedFunc,
                data: "{}", // You don't necessarily have to put this.
                failure: FailedFunc
            }); 
```

# android - android InterstitialAd 未显示

> ID：13608434
> 
> 赞同：1
> 
> 时间：2012-11-28T15:21:19.777
> 
> 标签：android, layout, admob, interstitial

我的应用使用了以下 InterstitialAd，以下是从谷歌示例中获得的标准编码。但是，我想问一下为什么没有广告节目？（应用程序正确显示吐司：在 ReceiveAd 上）

我的 main_first_page 布局底部也有一个广告横幅。这会影响 InterstitialAd 吗？

谢谢！！

```
public class StartUp extends Activity implements AdListener {

    private InterstitialAd interstitialAd;   
    AdView adView;
    private static final String LOG_TAG = "IQ!";

       public static final  String MY_PUBLISHER_ID = "abc"; 

       @Override
       public void onCreate(Bundle savedInstanceState) 
       {
          super.onCreate(savedInstanceState); // call the superclass's method
          setContentView(R.layout.main_first_page); // inflate the GUI

          Button ButtonNum= (Button) findViewById(R.id.buttonB);
          Button ButtonHeart= (Button) findViewById(R.id.buttonC);
          Button ButtonMath= (Button) findViewById(R.id.buttonD);             

           interstitialAd = new InterstitialAd(this, MY_PUBLISHER_ID); // Create an ad.  
              interstitialAd.setAdListener(this); // Set the AdListener.
              AdRequest adRequest = new AdRequest();
              adRequest.addTestDevice(AdRequest.TEST_EMULATOR);
              interstitialAd.loadAd(adRequest);       

              if (interstitialAd.isReady()) {interstitialAd.show();} 
              else {Log.d(LOG_TAG, "Interstitial ad was not ready to be shown.");}            
       }
/** Called when an ad is clicked and about to return to the application. */
          @Override
          public void onDismissScreen(Ad ad) {
            Log.d(LOG_TAG, "onDismissScreen");
            Toast.makeText(this, "onDismissScreen", Toast.LENGTH_SHORT).show();
          }

/** Called when an ad was not received. */
          @Override
          public void onFailedToReceiveAd(Ad ad, AdRequest.ErrorCode error) {
            String message = "onFailedToReceiveAd (" + error + ")";
            Log.d(LOG_TAG, message);
            Toast.makeText(this, message, Toast.LENGTH_SHORT).show();
          }

/** Called when an ad is clicked and going to start a new Activity that will
           * leave the application (e.g. breaking out to the Browser or Maps
           * application).
           */
          @Override
          public void onLeaveApplication(Ad ad) {
            Log.d(LOG_TAG, "onLeaveApplication");
            Toast.makeText(this, "onLeaveApplication", Toast.LENGTH_SHORT).show();
          }

/* Called when an Activity is created in front of the app (e.g. an
           * interstitial is shown, or an ad is clicked and launches a new Activity).
           */         
        @Override
        public void onPresentScreen(Ad arg0) {
            // TODO Auto-generated method stub          
        }

/** Called when an ad is received. */
        @Override
          public void onReceiveAd(Ad ad) {
            Log.d(LOG_TAG, "onReceiveAd");
            Toast.makeText(this, "onReceiveAd", Toast.LENGTH_SHORT).show();
        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T23:42:01.160

插页式广告需要时间来加载。您正在检查它是否在加载后直接准备好，所以它肯定还没有准备好。检查您的 logcat 输出，您可能会看到`"Interstitial ad was not ready to be shown."`您记录的消息。

`onReceiveAd()`在调用回调之前，插页式广告不会准备好。您可以安全地放置`interstitialAd.show()`在`onReceiveAd()`回调中，插页式广告会立即显示。

另一个用例可能是您希望稍后显示插页式广告，例如游戏关卡的结束。在这种情况下，您将在关卡开始时预加载插页式广告，并在关卡`isReady`结束时查看标志以查看插页式广告是否已准备好。

# python - 如何使用 python 在 json 变量中获取关联值？

> ID：13608435
> 
> 赞同：0
> 
> 时间：2012-11-28T15:21:20.670
> 
> 标签：python, json, dictionary

当 2 在字典中时，如何查找与一个人的“姓名”相关的“id”？

```
user = 'PersonA'
id = ? #How do I retrieve the 'id' from the user_stream json variable? 
```

# json，存储在名为“user_stream”的变量中

```
[
  {
    'name': 'PersonA',
    'id': '135963'
  },
  {
    'name': 'PersonB',
    'id': '152265'
  },
] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T15:22:58.623

您必须解码 JSON 结构并遍历所有字典，直到找到匹配项：

```
for person in json.loads(user_stream):
    if person['name'] == user:
        id = person['id']
        break
else:
    # The else branch is only ever reached if no match was found
    raise ValueError('No such person') 
```

如果您需要进行多次查找，您可能希望将此结构转换为 a`dict`以简化查找：

```
name_to_id = {p['name']: p['id'] for p in json.loads(user_stream)} 
```

然后直接查找`id`：

```
id = name_to_id.get(name)  # if name is not found, id will be None 
```

上面的示例假定名称是唯一的，如果不是，请使用：

```
from collections import defaultdict

name_to_id = defaultdict(list)
for person in json.loads(user_stream):
    name_to_id[person['name']).append(person['id'])

# lookup
ids = name_to_id.get(name, [])  # list of ids, defaults to empty 
```

这始终是一种权衡，您以内存换取速度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T15:28:35.823

Martijn Pieters 的解决方案是正确的，但如果您打算进行许多此类查找，最好加载 json 并仅对其进行一次迭代，而不是每次查找。

```
name_id = {}

for person in json.loads(user_stream):
    name = person['name']
    id = person['id']
    name_id[name] = id

user = 'PersonA'
print name_id[user] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T15:29:25.550

```
persons = json.loads(...)
results = filter(lambda p:p['name'] == 'avi',persons)
if results:
    id = results[0]["id"] 
```

`results`当然可以超过1..

# c# - 返回零行的 XML 流

> ID：13608437
> 
> 赞同：1
> 
> 时间：2012-11-28T15:21:30.270
> 
> 标签：c#, xml

我有一个包含 XML 数据的文本字符串（尽管它没有标题信息），并且我正在尝试填充包含其元素的 DataTable。我没有收到任何错误消息，但是我的 DataTable 在 .ReadXml 命令之后包含 0 行。Xml如下：

```
<items>
 <item>
  <Date>05-Feb-2008</Date>
  <User>Unknown</User>
  <Comment>Due date moved</Comment>
  <Restricted>True</Restricted>
 </item>
 <item>
  <Date>07-Nov-2008</Date>
  <User>Unknown</User>
  <Comment>Priority increased. Due date moved to end Oct</Comment>
  <Restricted>False</Restricted>
 </item>
</items> 
```

我创建 DataTable 的代码如下：

```
Stream xmlStream = new MemoryStream();
StreamWriter writer = new StreamWriter(xmlStream);
string xml = (string)row["XmlComments"];
writer.Write(xml);
writer.Flush();
xmlStream.Position = 0;

DataTable xmlComments = new DataTable();

xmlComments.Columns.Add("User", typeof(string));
xmlComments.Columns.Add("Date", typeof(DateTime));
xmlComments.Columns.Add("Comment", typeof(string));
xmlComments.Columns.Add("OSG_Only", typeof(string));

xmlComments.ReadXml(xmlStream); 
```

任何人都可以阐明我在这里缺少的东西吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:38:17.000

这应该工作

```
DataTable xmlComments = new DataTable();

xmlComments.TableName = "item"; //<---- Added
xmlComments.Columns.Add("User", typeof(string));
xmlComments.Columns.Add("Date", typeof(string)); //<---- Type changed
xmlComments.Columns.Add("Comment", typeof(string));
xmlComments.Columns.Add("Restricted", typeof(string)); //<---- Column name changed

xmlComments.ReadXml(xmlStream); 
```

# magento - 尝试启用系统>工具>编译后Magento错误

> ID：13608439
> 
> 赞同：2
> 
> 时间：2012-11-28T15:21:36.863
> 
> 标签：magento

我在 Magento 1.7 CE 上，为了加快站点速度，转到系统 > 工具 > 编译并点击启用。我的网站宕机了！

首先，我应该更改服务器上的哪个文件来解决这个问题？其次，您是否真的从未启用此功能，而只是单击“运行编译过程”？如果是这样，多久一次？

谢谢。-TM值

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T16:21:40.560

您必须先运行编译。只要您不更新代码，就可以保持这种状态。当您更新（使用 svn update 的 fi）时，您需要再次重新编译才能使用新代码。

禁用是可能的，如在上面的评论中，或通过评论

```
#define('COMPILER_INCLUDE_PATH', dirname(__FILE__).DIRECTORY_SEPARATOR.'src');
#define('COMPILER_COLLECT_PATH', dirname(__FILE__).DIRECTORY_SEPARATOR.'stat'); 
```

在文件夹中：`/includes/config.php`

# java - JBoss 类中的 LocalVariableTable 损坏

> ID：13608442
> 
> 赞同：1
> 
> 时间：2012-11-28T15:21:54.547
> 
> 标签：java, jboss, bytecode, java-bytecode-asm

我正在使用 ASM 4.0，并且遇到了 JBoss 发行版中的 org/jboss/jms/client/delegate/ClientClusteredConnectionFactoryDe​​legate.class 类的一个奇怪问题

问题是，在这个类的方法之一的无操作转换之后，

public synchronized byte[] org$jboss$jms$client$delegate$ClientClusteredConnectionFactoryDe​​legate$getClientAOPStack$aop() 具有以下内容

```
 LineNumberTable:
    line 232: 0
    line 240: 52
    line 242: 77

   LocalVariableTable:
    Start  Length  Slot  Name   Signature
    52      -52      2    aopStackProvider
Lorg/jboss/jms/delegate/ConnectionFactoryDelegate;
    0      0      2    e
Lorg/jboss/jms/exception/MessagingNetworkFailureException;
    36      -36      1    server       I
    0      0      0    this
Lorg/jboss/jms/client/delegate/ClientClusteredConnectionFactoryDelegate; 
```

在转型之前，这些是：

```
 LineNumberTable:
    line 232: 0
    line 234: 34
    line 238: 45
    line 240: 52
    line 242: 77
    line 244: 84
    line 246: 85
    line 234: 116
    line 250: 122

   LocalVariableTable:
    Start  Length  Slot  Name   Signature
    52      32      2    aopStackProvider
Lorg/jboss/jms/delegate/ConnectionFactoryDelegate;
    85      31      2    e
Lorg/jboss/jms/exception/MessagingNetworkFailureException;
    36      86      1    server       I
    0      132      0    this
Lorg/jboss/jms/client/delegate/ClientClusteredConnectionFactoryDelegate; 
```

结果我有 java.lang.ClassFormatError: Invalid length 65484 in LocalVariableTable in class file org/jboss/jms/client/delegate/ClientClusteredConnectionFactoryDe​​legate

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T16:54:23.470

我的一位同事发现：如果由于某种原因，在原始字节码 LocalVariableTable 中包含无效的偏移量，该偏移量不是指向指令的末尾，而是在指令的中间，然后通过 ASM 访问后，得到负偏移量. 解决方案是通过使用 ASM 的 ClassReader.SKIP_DEBUG 选项完全去除调试信息。或者检测 ASM 何时无法确定局部变量的结束偏移量，并在`visitLocalVariable`方法中跳过该特定变量`MethodAdapter`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T15:42:59.863

当您将不完整的字节数组（或流）作为输入传递给 ClassReader 时，通常会发生这种情况。您可以通过比较字节数组的大小以及将 CheckClassAdapter 添加到无操作转换访问者链中来检查这一点。

# c# - 加载大量数据时出现 WPF 内存不足错误

> ID：13608447
> 
> 赞同：0
> 
> 时间：2012-11-28T15:22:11.993
> 
> 标签：c#, wpf, xaml, exception, charts

我需要将大量数据处理成一个`List<ChartData>`用于自定义控件的数据。在达到列表计数 80,00,000 后，大约 300 万点它工作正常它会引发内存不足错误。List 有计数限制吗？是意味着我应该使用任何其他集合而不是列表。

有没有更好的技术将大量数据加载到内存中？问题出在以下函数中。如果 ChartIndexedDataPoint.Count 达到 30,00,000 以上

```
 protected override void CalculateSegments(ChartSeries series, ChartIndexedDataPoint[] points)
    {
        double[] yCoef={0};
        IChartDataPoint startPoint = null;
        IChartDataPoint endPoint = null;
        ChartPoint startControlPoint = null;
        ChartPoint endControlPoint = null;
        if (points.Length >= 2)
        {
            NaturalSpline(points, out yCoef);
            if (series.ShowEmptyPoints == false && series.Area.EnableLazyLoading == true)
            {
                allpoints = new List<IChartDataPoint>();
                if (series.ActualYAxis.IsAutoSetRange == true || series.ActualXAxis.IsAutoSetRange == true)
                {
                    series.Segments.Clear();
                    series.Adornments.Clear();

                    for (int i = 0, count = points.Length; i < count - 1; i++)
                    {
                        startPoint = points[i].DataPoint;
                        endPoint = points[i + 1].DataPoint;
                        GetBezierControlPoints(startPoint, endPoint, yCoef[i], yCoef[i + 1], out startControlPoint, out endControlPoint);
                        allpoints.Add(startPoint);
                        allpoints.Add(startControlPoint);
                        allpoints.Add(endControlPoint);
                        allpoints.Add(endPoint);
                    }
                    series.Segments.Add(new ChartFastSplineSegment(allpoints, points, series)); 
                    return;
                }
                if (series.Segments.Count != 0)
                {
                    ChartFastSplineSegment segment = ((ChartFastSplineSegment)series.Segments[0]);

                    if (segment.Points != null && segment.Points.Count < points.Length)
                    {
                        segment.GetSegmet(points[points.Length - 1].DataPoint, series);
                    }
                    else if (segment.Points == null || segment.Points.Count > points.Length)
                    {                           
                        for (int i = 0, count = points.Length; i < count - 1; i++)
                        {
                            startPoint = points[i].DataPoint;
                            endPoint = points[i + 1].DataPoint;
                            GetBezierControlPoints(startPoint, endPoint, yCoef[i], yCoef[i + 1], out startControlPoint, out endControlPoint);
                            allpoints.Add(startPoint);
                            allpoints.Add(startControlPoint);
                            allpoints.Add(endControlPoint);
                            allpoints.Add(endPoint);
                        }
                        segment.UpdateSegment(allpoints, series);
                        segment.refresh = true;
                    }
                }
                else
                {                        
                    for (int i = 0, count = points.Length; i < count - 1; i++)
                    {
                        startPoint = points[i].DataPoint;
                        endPoint = points[i + 1].DataPoint;
                        GetBezierControlPoints(startPoint, endPoint, yCoef[i], yCoef[i + 1], out startControlPoint, out endControlPoint);
                        allpoints.Add(startPoint);
                        allpoints.Add(startControlPoint);
                        allpoints.Add(endControlPoint);
                        allpoints.Add(endPoint);
                    }
                    series.Segments.Add(new ChartFastSplineSegment(allpoints, points, series)); 
                }
            }
            else if (series.Segments.Count == 0 || series.internaldata_modified || allpoints.Count > points.Length)
            {
                allpoints = new List<IChartDataPoint>();
                series.Segments.Clear();
                series.Adornments.Clear();
                ChartIndexedDataPoint[] pts = points;
                List<ChartIndexedDataPoint> tempPointArray = new List<ChartIndexedDataPoint>();                    
                for (int i = 0; i < pts.Length-1; i++)
                {
                    switch (pts[i].DataPoint.EmptyPoint)
                    {
                        case false:
                            {
                                startPoint = points[i].DataPoint;
                                endPoint = points[i + 1].DataPoint;
                                GetBezierControlPoints(startPoint, endPoint, yCoef[i], yCoef[i + 1], out startControlPoint, out endControlPoint);
                                allpoints.Add(startPoint);
                                allpoints.Add(startControlPoint);
                                allpoints.Add(endControlPoint);
                                allpoints.Add(endPoint);
                                tempPointArray.Add(pts[i]);
                                break;
                            }
                        case true:
                            {
                                if (allpoints.Count > 0)
                                {
                                    if (i < points.Length)
                                    {
                                        startPoint = points[i].DataPoint;
                                        endPoint = points[i + 1].DataPoint;
                                        GetBezierControlPoints(startPoint, endPoint, yCoef[i], yCoef[i + 1], out startControlPoint, out endControlPoint);
                                        allpoints.Add(startPoint);
                                        allpoints.Add(startControlPoint);
                                        allpoints.Add(endControlPoint);
                                        allpoints.Add(endPoint);
                                    }
                                    tempPointArray.Add(points[i]);

                                }
                                break;
                            }
                    }
                }
                if (tempPointArray.Count != 0 && allpoints.Count != 0)
                {
                    series.Segments.Add(new ChartFastSplineSegment(allpoints, tempPointArray.ToArray(), series));
                }
            }
            if (series.Segments.Count > 0)
            {
                List<ChartIndexedDataPoint> tempPointArray = new List<ChartIndexedDataPoint>();
                List<ChartIndexedDataPoint> pts = points.ToList();

                if (!series.Contains_emptypt)
                {
                    int cnt = (allpoints.Count+4)/4;
                    while ((allpoints.Count + 4) / 4 != points.Length && (allpoints.Count + 4) / 4 < points.Length)
                    {
                        startPoint = points[cnt-1].DataPoint;
                        endPoint = points[cnt].DataPoint;
                        GetBezierControlPoints(startPoint, endPoint, yCoef[cnt-1], yCoef[cnt], out startControlPoint, out endControlPoint);
                        allpoints.Add(startPoint);
                        allpoints.Add(startControlPoint);
                        allpoints.Add(endControlPoint);
                        allpoints.Add(endPoint);
                        cnt++;
                    }
                }
                (series.Segments[0] as ChartFastSplineSegment).m_points = allpoints;
                if (series.ActualXAxis.IsAutoSetRange || series.Zoomactionenabled)
                {                        
                    double X_MAX = allpoints.Max(x => x.X);
                    double X_MIN = allpoints.Min(x => x.X);
                    (series.Segments[0] as ChartFastSplineSegment).xRange = new DoubleRange(X_MIN, X_MAX);//xRange + cdpt.X;
                    if (series.ActualXAxis.RangeCalculationMode == RangeCalculationMode.AdjustAcrossChartTypes)
                    {
                        (series.Segments[0] as ChartFastSplineSegment).xRange += (series.Segments[0] as ChartFastSplineSegment).xRange.Start - 0.5;
                        (series.Segments[0] as ChartFastSplineSegment).xRange += (series.Segments[0] as ChartFastSplineSegment).xRange.End + 0.5;
                    }
                    (series.Segments[0] as ChartFastSplineSegment).SetRange(series);

                }
                if (series.ActualYAxis.IsAutoSetRange || series.Zoomactionenabled)
                {                        
                    double Y_MAX = allpoints.Max(y => y.Y);
                    double Y_MIN = allpoints.Min(y => y.Y);

                    (series.Segments[0] as ChartFastSplineSegment).yRange = new DoubleRange(Y_MIN, Y_MAX);//yRange + cdpt.Y;

                    if (series.ActualXAxis.RangeCalculationMode == RangeCalculationMode.AdjustAcrossChartTypes)
                    {
                        (series.Segments[0] as ChartFastSplineSegment).xRange += (series.Segments[0] as ChartFastSplineSegment).xRange.Start - 0.5;
                        (series.Segments[0] as ChartFastSplineSegment).xRange += (series.Segments[0] as ChartFastSplineSegment).xRange.End + 0.5;
                    }

                    (series.Segments[0] as ChartFastSplineSegment).SetRange(series);
                    if (series.Zoomactionenabled)
                    {
                        series.Zoomactionenabled = false;
                    }
                }
            }
        }     
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T17:23:15.360

您的应用程序可以利用数据虚拟化吗？[http://www.codeproject.com/Articles/34405/WPF-Data-Virtualization](http://www.codeproject.com/Articles/34405/WPF-Data-Virtualization)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T17:41:19.100

即使没有记忆问题，也没有有意义的方式来一次呈现所有这些信息而不以某种方式对其进行总结。您拥有的数据点比 1920x1080 屏幕中的像素多。您需要想办法减少对您的用例有意义的点数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T16:51:28.273

最后我解决了这个问题。

```
allpoints.Add(startPoint);
allpoints.Add(startControlPoint);
allpoints.Add(endControlPoint);
allpoints.Add(endPoint); 
```

allpoints 到 4 个列表中

```
startPoints<IChartDataPoint>
endControlPointS<IChartDataPoint>
endControlPointS<IChartDataPoint>
endPointS<IChartDataPoint> 
```

# matlab - 在 MATLAB 中查找 .wav 文件的采样频率

> ID：13608448
> 
> 赞同：1
> 
> 时间：2012-11-28T15:22:15.320
> 
> 标签：matlab, frequency, sample, wav

我正在阅读 Matlab 中的 .wav 文件。然后我以指定的采样频率 44100Hz 播放读取的文件。但是当我尝试播放以低采样频率采样的文件时，它会像我在快进模式中播放一样播放，这是因为我正在播放的采样频率高于文件的采样频率。

所以我的问题是如何找到我在 Matlab 中使用 wavread() 读取的文件的采样频率。我试图在频谱中转换读取信号，然后传递 fft() 信号的幅度，但它没有用。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T15:24:10.827

观察[`wavread`](http://www.mathworks.com/help/matlab/ref/wavread.html)可以返回采样频率`Fs`如下：

```
[y, Fs] = wavread(filename) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-28T15:20:42.797

首先，您可以使用此函数找到采样频率：

```
def read_samplepoints(file_name):

    sampFreq, snd1 = wavfile.read(file_name)

    samp_points = len(snd1)

    data_type = snd1.dtype

    return samp_points, data_type, sampFreq 
```

使用 'folder_name'.'class_name'.read_samplepoints(file_name) 在终端中执行。返回序列中的最后一个数字将是采样频率。

要增强歌曲的低音，您需要使用低频段滤波器来仅捕获较低频率并保留较高频率。但是，这会使您文件中的所有频率出现您可能不想要的情况。另一种方法是将您的文件放入 audacity（或类似程序）并转到效果部分并调整低音和高音级别（类似于 iTunes 上的均衡器）。这是两个选项，可能还有更多选项，但请先尝试这些选项，看看它们会引导你到哪里。

# mysql - 将 mysql 视图转储到 csv 的 Bash 脚本

> ID：13608450
> 
> 赞同：0
> 
> 时间：2012-11-28T15:22:44.390
> 
> 标签：mysql, bash, scripting, centos

我正在尝试使用 bash 脚本将 MYSQL 视图的输出转储到 CSV 中。

作为灵感，我使用了这篇文章：[How to use a bash script to write to a mysql table](https://stackoverflow.com/questions/9026709/how-to-use-a-bash-script-to-write-to-a-mysql-table)

奇怪的是 SELECT column1,column2,column3 FROM 语法工作正常，但是当你有大约 15 列时它是不切实际的......

SELECT count(*) FROM 也有效

但是 SELECT * FROM 会引发 MYSQL 语法错误

```
#!/bin/bash

fpath=/tmp/
fname=`date +%Y%m%d-%H%M%S`.csv
savedest=\'$fpath$fname\'

echo "Saving into"$savedest

params="-u root -p mydb"
 s1="SELECT * FROM flat_view INTO OUTFILE "
s2=" FIELDS TERMINATED BY ','"
s3=" ENCLOSED BY '\"'"
s4=" LINES TERMINATED BY '\\n'"
selectend=";"

echo $s1$savedest$s2$s3$s4$selectend | mysql $params 
```

我在想我没有正确地逃脱一些东西。

PS。这是 Centos 5.8 和 mysql Ver 14.12 Distrib 5.0.95

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:25:22.133

在输入问题时，我决定再尝试一件事来笑：

```
s1="SELECT flat_view.* FROM flat_view INTO OUTFILE " 
```

它奏效了！

我发现 SELECT * 阅读 MySQL 文档可能存在歧义的参考：http: [//dev.mysql.com/doc/refman/5.5/en/select.html](http://dev.mysql.com/doc/refman/5.5/en/select.html)

不过，奇怪的是 SELECT * FROM 在 mysql 命令行中运行良好，但在 bash 脚本中却不行。

# java - 将数据从android发送到php

> ID：13608453
> 
> 赞同：-1
> 
> 时间：2012-11-28T15:22:55.673
> 
> 标签：java, php, android

我需要帮助将数据从 android 发送到 php。我有这个android的java代码；

```
public void sendToDb()
{
    ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
    nameValuePairs.add(new BasicNameValuePair("pLat",Double.toString(lat)));
    nameValuePairs.add(new BasicNameValuePair("pLng",Double.toString(lng)));

    try{
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new      
                HttpPost("http://123456.com/welcome.php");
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpResponse response = httpclient.execute(httppost);
        Log.i("postData", response.getStatusLine().toString());
    }

    catch(Exception e)
    {
        Log.e("log_tag", "Error in http connection "+e.toString());
    }           
} 
```

我在我的 php 文件夹中有这个代码；

```
<?php
 $pLat = $_POST['pLat'];
 $pLng = $_POST['pLng'];

 $result = mysql_query("update Users set lat='$pLat',lon='$pLng' where username='ozi');      
 if (mysql_affected_rows()==0) 
   {
    $query = "INSERT INTO Users ";
    $query .= "(lat,lon) VALUES ('$pLat','$pLng')";
   }
 }
?> 
```

当我从手机发送数据时没有问题，但是在我查看 mysql lat 和 lot 行之后不是空的而是空的。您是否在代码中看到了问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T21:19:47.410

乍一看，我已经可以看到这里有些疯狂。为什么要指定`where username= { $_SESSION['username']}`呼叫来自 android 设备的时间？有什么会议？此外，如果这失败了，您插入时没有用户名。但从不运行查询。

```
 if (mysql_affected_rows()==0) 
   {
    $query = "INSERT INTO Users ";
    $query .= "(username, lat,lon) VALUES ('ozi', '$pLat','$pLng')";
    mysql_query($query) or die(mysql_error()); // <---- this would need to be run
   }
 } 
```

我建议您先解决这两个非常关键的观察结果，然后用更有针对性的问题更新您的问题。然后我可能会更新这个答案以使其更有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:40:23.757

阅读您的评论后，您想要做的（我认为）是持久化数据。php 文件只运行您拥有的代码。只有在请求中传递 POST 变量时，它们才有效。请求来自 Android 应用程序以及 POST 变量，并且对 Android 应用程序的响应将具有正确的输出。

来自浏览器的请求是“GET”，不发送 pLat 或 pLng 变量，因此没有要输出的变量。

这是您必须掌握的 HTTP 的一个非常基本的概念。

您要做的是将数据保存在某处。PHP 可以通过将其保存到数据库（例如 MySQL）或简单地将 POST 变量输出到本地文件来做到这一点。一个快速的谷歌搜索可以告诉你如何保存文件和打开数据库。哎呀，您甚至可以将它们通过电子邮件发送给自己。

PHP 脚本只会在脚本的生命周期内保存这些变量，然后永远将它们从内存中释放出来。您可以使用 PHP 的强大功能将这些变量保存在其他地方。

# c - 使用 cudaBindTexture2D 将二维数组绑定到 GPU 的纹理内存会产生错误

> ID：13608459
> 
> 赞同：0
> 
> 时间：2012-11-28T15:23:02.397
> 
> 标签：c, cuda

我正在尝试使用 CUDA API 在计算能力 1.3 GPU 中执行内核。绑定一维数组按预期工作，但以下代码会产生错误：

```
#include <cuda.h>
#include <stdio.h>
#include <stdlib.h>

#define checkCudaErrors(err)           __checkCudaErrors (err, __FILE__, __LINE__)

inline static void __checkCudaErrors( cudaError err, const char *file, const int line )     {

    if( cudaSuccess != err) {
        fprintf(stderr, "%s(%i) : CUDA Runtime API error %d: %s.\n", file, line, (int)err, cudaGetErrorString( err ) );
        exit(-1);
    }
}

texture<int, cudaTextureType2D> tex_transition;

int main ( void ) {

    int m = 8, p_size = 100, alphabet = 20;

    size_t pitch;

    int *transition = ( int * ) malloc ( ( m * p_size + 1 ) * alphabet * sizeof ( int ) );
    memset ( transition, -1, ( m * p_size + 1 ) * alphabet * sizeof ( int ) );

    int *d_transition;

    checkCudaErrors ( cudaMallocPitch ( &d_transition, &pitch, alphabet * sizeof ( int ), ( m * p_size + 1 ) ) );

    checkCudaErrors ( cudaMemcpy2D ( d_transition, pitch, transition, alphabet * sizeof ( int ), alphabet * sizeof ( int ), ( m * p_size + 1 ), cudaMemcpyHostToDevice ) );

    cudaChannelFormatDesc desc = cudaCreateChannelDesc<int>();
    checkCudaErrors ( cudaBindTexture2D ( 0, tex_transition, d_transition, desc, alphabet * sizeof ( int ), ( m * p_size + 1 ), pitch ) );

    cudaFree ( d_transition );

    return 0;
} 
```

执行时出现错误“test.cu(33): CUDA Runtime API error 11: invalid argument.”。通过将字母设置为 10，错误就消失了。如果我没记错的话，每个绑定到纹理的数组的最大大小可以是 65000 x 65000 字（在这种情况下是整数），但*转换*数组要小得多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T16:37:59.233

您在 cudaBindTexture2D 调用中有一个参数错误。纹理的尺寸以*texel*为单位，而不是字节，所以调用应该是：

```
cudaChannelFormatDesc desc = cudaCreateChannelDesc<int>();
cudaBindTexture2D ( 0, 
                    tex_transition, 
                    d_transition, desc, 
                    alphabet,            // in texels
                    ( m * p_size + 1 ),  // in texels
                    pitch ); 
```

字节宽度仅在分配调用中是必需的。纹理绑定使用 pitch 参数来计算 2D 分配的内存布局。

# java - Lotus Notes 6.5 中的 JavaAgent 使用轴 api 给出异常“没有为 org.apache.commons.logging.LogFactory 定义实现”

> ID：13608460
> 
> 赞同：2
> 
> 时间：2012-11-28T15:23:07.457
> 
> 标签：java, web-services, lotus-notes, axis, javaagents

我需要在 Lotus Notes 6.5 DB 中编写 JavaAgent 来访问 Web 服务。为此，我使用了 Axis Apache API。我创建了一个 Java 代理，并使用编辑项目按钮在代理中添加了轴的 jar 文件。

下面是代理代码：

```
import lotus.domino.*;
import javax.xml.*;
import org.apache.axis.client.Call;
import org.apache.axis.client.Service;
import javax.xml.namespace.QName;
import java.net.URL;

public class JavaAgent extends AgentBase {

    public void NotesMain() {

        try {

            Session session = getSession();
            AgentContext agentContext = session.getAgentContext();

            String  endpoint = "http://ws.apache.org:5049/axis/services/echo";
            Service service = new Service();
            Call     call    = (Call) service.createCall();
            call.setTargetEndpointAddress(new java.net.URL(endpoint) );

            call.setOperationName(new QName("http://soapinterop.org/", "echoString"));
            String ret = (String) call.invoke( new Object[] { "Hello!" } );
            System.out.println("Sent 'Hello!', got '" + ret + "'");

        } catch(Exception e) {
            e.printStackTrace();
        }
    }
} 
```

下面是抛出的异常：

```
java.lang.ExceptionInInitializerError: org.apache.commons.discovery.DiscoveryException: No implementation defined for org.apache.commons.logging.LogFactory

    at org.apache.commons.discovery.tools.SPInterface.newInstance(SPInterface.java:197)

    at org.apache.commons.discovery.tools.DiscoverClass.newInstance(DiscoverClass.java:579)

    at org.apache.commons.discovery.tools.DiscoverSingleton.find(DiscoverSingleton.java:418)

    at org.apache.commons.discovery.tools.DiscoverSingleton.find(DiscoverSingleton.java:378)

    at org.apache.axis.components.logger.LogFactory$1.run(LogFactory.java:84)

    at java.security.AccessController.doPrivileged(Native Method)

    at org.apache.axis.components.logger.LogFactory.getLogFactory(LogFactory.java:80)

    at org.apache.axis.components.logger.LogFactory.<clinit>(LogFactory.java:72)

    at org.apache.axis.configuration.EngineConfigurationFactoryFinder.<clinit>(EngineConfigurationFactoryFinder.java:94)

    at org.apache.axis.client.Service.<init>(Service.java:111)

    at JavaAgent.NotesMain(JavaAgent.java:17)

    at lotus.domino.AgentBase.runNotes(Unknown Source)

    at lotus.domino.NotesThread.run(NotesThread.java:218) 
```

我试着在互联网上关注一些链接，比如，但我无法准确地得到它要求做的事情。例如：[http ://www-10.lotus.com/ldd/nd6forum.nsf/55c38d716d632d9b8525689b005ba1c0/40d033fba3897f4d85256cd30034026a?OpenDocument](http://www-10.lotus.com/ldd/nd6forum.nsf/55c38d716d632d9b8525689b005ba1c0/40d033fba3897f4d85256cd30034026a?OpenDocument)

任何帮助都会很棒。我想做的就是编写一个代理，以便我可以访问 Web 服务，比如 w3schools 上的温度转换 Web 服务。[http://www.w3schools.com/webservices/tempconvert.asmx?op=FahrenheitToCelsius](http://www.w3schools.com/webservices/tempconvert.asmx?op=FahrenheitToCelsius)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T09:37:50.670

我用你的错误信息用谷歌搜索，这是第一个命中：

[http://croarkin.blogspot.fi/2010/08/commons-logging-headaches-with-axis.html](http://croarkin.blogspot.fi/2010/08/commons-logging-headaches-with-axis.html)

它建议使用**commons-logging.properties**文件：

```
org.apache.commons.logging.Log = org.apache.commons.logging.impl.Log4JLogger  
org.apache.commons.logging.LogFactory = org.apache.commons.logging.impl.LogFactoryImpl 
```

或将其放入您的代码中：

```
@BeforeClass  
public static void beforeClass() {  
 System.setProperty("org.apache.commons.logging.Log", "org.apache.commons.logging.impl.Log4JLogger");  
 System.setProperty("org.apache.commons.logging.LogFactory", "org.apache.commons.logging.impl.LogFactoryImpl");  
} 
```

可能您已经尝试过这个，因为它是谷歌的第一个热门，但以防万一......

# android - 多表查询android

> ID：13608461
> 
> 赞同：-1
> 
> 时间：2012-11-28T15:23:13.497
> 
> 标签：android, sqlite

我有三张桌子

```
 Article            Group            Code
 --------          --------        --------
   id                id              id
  Name             GroupName       CodeName    
  NameInfo        Group value     code value
   Bla
   bla
 groupname
 codename
  something
   bla 
```

你能告诉我如何制作表格，以便我可以在我的第一个表格中看到另一个表格中的文章值组名和代号吗？然后如何进行选择查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:29:40.813

您应该创建关系数据库结构，

![在此处输入图像描述](../Images/5c7c1d297a6d5f485270785024ec3e9c.png)

```
select * from Article a 
inner join Group g on  (a.groupid = g.groupid)
inner join Code c on (a.codeid = c.codeid) 
```

# visual-studio-2010 - 更改 csproj 文件中的 PublishUrl 属性

> ID：13608463
> 
> 赞同：6
> 
> 时间：2012-11-28T15:23:16.093
> 
> 标签：visual-studio-2010, msbuild, vsto, clickonce, target

我需要能够更改 Excel VSTO 项目的 csproj 文件中的 PublishUrl 属性，以便根据配置管理器中设置的配置来管理使用的发布 url。无论开发人员在发布向导或项目属性窗口中输入什么，这都需要发生。我真的需要根据配置集在发布时对其进行控制。我没有找到有效的解决方案，而且这似乎比我发现的更常见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T19:55:07.493

我想[这篇文章](https://blogs.msdn.microsoft.com/vsto/2009/04/29/signing-and-re-signing-manifests-in-clickonce-saurabh-bhatia/)会对你有所帮助。您可以创建一个小脚本来重新签署文件，并且当您这样做时，您可以设置 URL。该文章显示了一个示例（但没有 URL - 它只是使用 mage 时可用的另一个选项）。

# javascript - 如何使用 jQuery 为背景图像设置动画

> ID：13608468
> 
> 赞同：1
> 
> 时间：2012-11-28T15:23:23.040
> 
> 标签：javascript, jquery, html, css, jquery-animate

嗨，我正在尝试使用 jQuery 为背景图像设置动画，我尝试[在此处遵循本教程](http://snook.ca/archives/javascript/jquery-bg-image-animations)，但是我的测试页面没有运气，我看到蓝色的 Facebook 图标，但是在鼠标悬停时它不会向上显示动画灰色标志。请帮忙！谢谢，我是 jQuery 菜鸟。

**我的测试页面： http:** [//leongaban.com/_stack/bg_animation/](http://leongaban.com/_stack/bg_animation/)

Facebook 图标应该向上动画，完整图像如下：

![在此处输入图像描述](../Images/2314e76b288ee2d5df15f081b2bbc2d2.png)

*我的 CSS*

```
<style>
    #facebook_icon li {
        padding: 0;
        width: 120px;
        height: 119px;
        list-style: none;
        background: red;
        background:url('img/fb_120x238.png') repeat 0 0;
    }
</style> 
```

*HTML*

```
<ul id="facebook_icon">
    <li><a href="#"><div class="box"></div></a></li>
</ul> 
```

*Javascript*

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript" src="js/jquery.bgpos.js"></script>

<script>

    (function() {
        $('#facebook_icon li')
            .css( {backgroundPosition: "0 0"} )
            .mouseover(function(){
                $(this).stop().animate(
                    {backgroundPosition:"(0 -119px)"},
                    {duration:500})
                })
            .mouseout(function(){
                $(this).stop().animate(
                    {backgroundPosition:"(0 0)"}, 
                    {duration:500})
                })
    })();

</script> 
```

**更新：工作 CSS 3 解决方案**

*CSS 3*

```
#facebook_icon li {
        padding: 0;
        width: 120px;
        height: 119px;
        list-style: none;
        background: red;
        background:url('img/fb_120x238.png') repeat 0 0;

        -moz-transition: background-position 1s;
        -webkit-transition: background-position 1s;
        -o-transition: background-position 1s;
        transition: background-position 1s;
        background-position: 0 0;
    }

    #facebook_icon li:hover{
        background-position: 0 -119px;
    }

    .box {
        width: 120px;
        height: 119px;
    } 
```

*HTML*（添加了空的 div 框以供点击）

```
<ul id="facebook_icon">
    <li><a href="#"><div class="box"></div></a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T15:30:03.093

一个简单的解决方案应该是使用 css3 过渡。你可以这样做：

在你的 CSS 中

```
#facebook_icon li{
    -moz-transition: background-position 1s;
    -webkit-transition: background-position 1s;
    -o-transition: background-position 1s;
    transition: background-position 1s;
    background-position: 0 0;
}

#facebook_icon li:hover{
     background-position: 0 -119px;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T15:27:35.860

谢天谢地，这个非常简单。您`background-position`在锚点上制作动画，但实际图像在 li 上。

只需在 JavaScript 中更改选择器：

```
 $('#facebook_icon li') 
```

但是，我建议您更改您的标记（以及随附的 CSS），以便在`a`内部`li`而不是`ul`. 这样你的标记是有效的。

**更新：**

嘿，所以我完全同意使用 CSS3。这正是我将如何实现的。但只是为了结束这个问题：要让`bgpos`插件与 jQuery 1.8.2 一起工作，请将`backgroundPosition`方法的前两行更改为：

```
 if (fx.start === 0 && typeof fx.end == 'string') {
    var start = $.css(fx.elem,'backgroundPosition'); 
```

# forms - 任何符合我要求的wordpress表单构建插件？

> ID：13608470
> 
> 赞同：0
> 
> 时间：2012-11-28T15:23:32.927
> 
> 标签：forms, validation, plugins, wordpress

我正在寻找一个 WP 插件，它可以让我创建不同的表单并将它们嵌入页面，以下是要求：

1.  这些表单中的每一个都只需要一个文本框

2.  只有在文本框中输入了自定义条目/答案时，才会显示提交按钮。（基本上是客户端验证）

3.  提交的答案应与 usermeta（或仅登录用户的用户名）一起存储在后端，以便我可以以 csv 等格式导出条目。

有什么想法吗？

PS 我找到了一个，但不确定它的 PRO 版本是否允许我验证自定义文本。这是插件：[http ://wordpress.org/extend/plugins/visual-form-b​​uilder/](http://wordpress.org/extend/plugins/visual-form-builder/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:39:43.993

Gravity Forms 是最强大的 WordPress 表单构建器插件。凭借正确的知识和技能，你可以让它做任何你想做的事情。你可以在这里找到它：[重力形式](http://www.gravityforms.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-01T04:39:03.580

很好，我找到了这个。实际上有很好的插件，但是您必须购买它。我在找一个免费的。[http://www.webdesignboom.com/2013/formcraft-wordpress-form-b​​uilder/](http://www.webdesignboom.com/2013/formcraft-wordpress-form-builder/)

# sql - SQL：添加两个求和字段并将求和值与另一个字段值进行比较

> ID：13608475
> 
> 赞同：2
> 
> 时间：2012-11-28T15:23:48.887
> 
> 标签：sql, database, oracle, sum

好的，伙计们关于这个话题的最后一个问题（我希望）。

我需要做的是对两个不同表中的字段求和，将它们加在一起，并检查这个总数是否大于客户的信用额度。

我已将我的问题分解为较小的任务，以便我可以尝试提出整体解决方案。（这些较小的代码对我来说可以正常工作，但是当在第三段代码中组合时，它们的总和不正确）。首先，我计算了第一个求和字段，如下所示：

```
 --summmed open invoices

 SELECT company,  sum(unit_price * invoice_qty) as open_invoices

 FROM 
  (SELECT arc.company, ard.unit_price, ard.invoice_qty, arc.credit_limit
   FROM iqms.arprepost_detail ard, iqms.arprepost arp, iqms.arcusto arc
   WHERE ard.arprepost_id = arp.ID
       AND arp.arcusto_id = arc.ID)

 GROUP BY company
 ORDER BY company; 
```

总结时，这里的数字是正确的，我已经手动检查过。接下来我总结了我需要的其他字段，如图所示：

```
 --summed open orders

 SELECT company, (sum (unit_price * total_qty_ord)) as total_open_orders

 FROM 
   (SELECT arc.company, od.unit_price, od.total_qty_ord, arc.credit_limit   
    FROM iqms.arcusto arc, iqms.orders o, iqms.ord_detail od
    WHERE od.orders_id = o.ID
       AND o.arcusto_id = arc.ID
       AND (od.cumm_shipped < od.total_qty_ord  OR od.cumm_shipped IS NULL))

 GROUP BY company
 ORDER BY company; 
```

这些数字再次在人工检查中正确显示。

我现在需要将这两个计算加在一起，并检查该数字是否大于该客户的“credit_limit”字段。我已经为此编写了代码，但数字超出了他们应该得到的结果（这段代码在下面给出）。

```
 --summmed open invoices + open orders

  SELECT company, credit_limit, 
        round(sum(i_up * invoice_qty)) AS total_invoices, 
        round(sum (o_up * total_qty_ord)) AS total_orders,
        round(sum(i_up * invoice_qty) + sum (o_up * total_qty_ord)) as overall_total

 FROM 
   (SELECT arc.company, arc.credit_limit, ard.unit_price as i_up, ard.invoice_qty, od.unit_price as o_up, od.total_qty_ord 
    FROM iqms.arprepost_detail ard, iqms.arprepost arp, iqms.arcusto arc, iqms.orders o, iqms.ord_detail od
    WHERE 
       ard.arprepost_id = arp.ID      
       AND arp.arcusto_id = arc.ID
       AND od.orders_id = o.ID
       AND o.arcusto_id = arc.ID
       AND (od.cumm_shipped < od.total_qty_ord  OR od.cumm_shipped IS NULL)
   )

 GROUP BY company, credit_limit
 HAVING ((sum(i_up * invoice_qty)) + (sum (o_up * total_qty_ord)) > credit_limit)
 ORDER BY company; 
```

我不确定我哪里出错了。也许这是一个简单的修复，或者我的逻辑有问题。非常感谢任何见解。非常感谢您一直以来的支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:30:43.723

在这种情况下，由于这两个查询是不同的，我建议您使用[UNION ALL](http://docs.oracle.com/cd/E11882_01/server.112/e26088/queries004.htm#i2054381)：

```
SELECT company, SUM(open_invoices) total /*should rename the column in query 1*/ 
  FROM ([QUERY1]
        UNION ALL
        [QUERY2])
 GROUP by company 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T15:44:53.820

我的第一个观察是你应该使用[显式连接而不是隐式连接](https://sqlblog.org/2009/10/08/bad-habits-to-kick-using-old-style-joins)，隐式连接已经过时了 20 年

您不能像您所做的那样组合您的 2 个查询，因为它们来自不同的表，使用隐式连接这样做会导致交叉连接。我认为最简单的方法是为每个查询使用 2 个左连接：

```
SELECT  arc.Company,
        arc.Credit_Lime,
        COALESCE(Open_Orders, 0) AS Open_Orders,
        COALESCE(Open_Invoices, 0) AS Open_Invoices
        COALESCE(Open_Orders, 0) + COALESCE(Open_Invoices, 0) AS Total_Amount
FROM    iqms.arcusto arc
        LEFT JOIN
        (   SELECT  o.arcusto_ID
                    SUM(od.unit_price * od.total_qty_ord) AS Open_Orders
            FROM    iqms.orders o
                    INNER JOIN iqms.ord_detail od
                        ON od.orders_ID = o.ID
            WHERE   od.Cumm_Shipped < od.Total_qty_Ord
            OR      od.Cumm_Shipped IS NULL
            GROUP BY o.arcusto_ID
        ) openOrders
            ON openOrders.Arcusto_ID = arc.ID
        LEFT JOIN
        (   SELECT  arp.arcusto_id,
                    SUM(Unit_Price * Invoice_Quantity) AS Open_Invoices
            FROM    iqms.arprepost_detail ard
                    INNER JOIN iqms.arprepost arp
                        ON  ard.arprepost_id = arp.ID
            GROUP BY arp.arcusto_id
        ) OpenInvoices
            ON OpenInvoices.Arcusto_ID = arc.ID
WHERE   COALESCE(Open_Orders, 0) + COALESCE(Open_Invoices, 0) > arc.Credit_Limit; 
```

您还可以将这两个查询联合如下：

```
SELECT  arc.Company,
        arc.Credit_Lime,
        SUM(COALESCE(Open_Orders, 0)) AS Open_Orders
FROM    iqms.arcusto arc
        LEFT JOIN
        (   SELECT  o.arcusto_ID
                    SUM(od.unit_price * od.total_qty_ord) AS Open_Orders
            FROM    iqms.orders o
                    INNER JOIN iqms.ord_detail od
                        ON od.orders_ID = o.ID
            WHERE   od.Cumm_Shipped < od.Total_qty_Ord
            OR      od.Cumm_Shipped IS NULL
            GROUP BY o.arcusto_ID
            UNION ALL
            SELECT  arp.arcusto_id,
                    SUM(Unit_Price * Invoice_Quantity) AS Open_Invoices
            FROM    iqms.arprepost_detail ard
                    INNER JOIN iqms.arprepost arp
                        ON  ard.arprepost_id = arp.ID
            GROUP BY arp.arcusto_id
        ) OpenInvoices
            ON OpenInvoices.Arcusto_ID = arc.ID
GROUP BY arc.Company, arc.Credit_Limit
HAVING  SUM(Open_Orders) > arc.Credit_Limit; 
```

但我认为第一个在确定 Open_Orders 或 Open_Invoices 是否超出信用额度方面提供了更大的灵活性

# javascript - 如何将字符串值从 C++ 返回到 javascript (windows/Visual Studio 2008)？

> ID：13608480
> 
> 赞同：2
> 
> 时间：2012-11-28T15:24:09.640
> 
> 标签：javascript, c++, visual-studio, idl

我有以下 IDL，可以很好地将字符串值从 JS 传递到 C++。JS 代码将一个字符串值传递给 c++/COM 对象。

```
[id(1), helpstring("method DoSomething")] HRESULT DoSomething([in] BSTR otlToken); 
```

我现在需要添加另一种方法来将字符串返回给 javascript 调用者。我在 IDL 中添加了以下内容：

```
[id(3), helpstring("method GetValue")]  HRESULT GetValue([out] BSTR *nicknames); 
```

在 JS 方面工作的开发人员说，他会收到一条关于参数数量错误和其他事情的消息，这取决于他是尝试调用该方法还是将其作为属性访问。

JS 是否需要通过引用调用才能获得此信息，还是我必须将一个 BSTR* 参数作为 [in,out] 传递？

我怎样才能让它工作？（从 C++/IDL 获取字符串值到 JS 调用者？

IDL 应该是什么样子，JS 代码应该是什么样子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T23:32:06.077

Javascript 本身并不知道如何处理通过参数返回的值。您必须明确声明哪个参数是返回值，否则 COM 将简单地返回 HRESULT。您可以使用以下方法执行此操作。

```
[id(3), helpstring("method GetValue")]  HRESULT GetValue([out, retval] BSTR *nicknames); 
```

# haskell - 类型系列 - 无法匹配类型

> ID：13608486
> 
> 赞同：0
> 
> 时间：2012-11-28T15:24:32.523
> 
> 标签：haskell, type-families

我对收到的这个编译器错误消息感到困惑。函数 addAgent 和 withAgent 具有相似的类型签名和相似的实现，所以我不明白为什么 addAgent 编译但 withAgent 没有。预先感谢您的任何帮助！

```
{-# LANGUAGE TypeFamilies, FlexibleContexts #-}

import Control.Monad.IO.Class (liftIO)
import Control.Monad.State (StateT, execStateT, gets, modify)

class AgentDatabase d where
  type Elem d
  addAgent :: Elem d -> StateT d IO ()
  withAgent :: 
     (Elem d -> StateT d IO (Elem d)) -> String -> StateT d IO ()

data SimpleUniverse d = SimpleUniverse {
    agentDB :: d
    -- plus other fields
  }

-- I want the methods of class AgentDatabase to "penetrate" through
-- the outer wrapper of SimpleUniverse and operate on the agentDB field.
instance (AgentDatabase d) => 
    AgentDatabase (SimpleUniverse d) where
  type Elem (SimpleUniverse d) = Elem d

  -- When addAgent is invoked on a SimpleUniverse, apply it to the
  -- agentDB field inside.
  addAgent a = do
    db <- gets agentDB
    db' <- liftIO $ execStateT (addAgent a) db
    modify (\u -> u { agentDB=db' } )

  -- When withAgent is invoked on a SimpleUniverse, apply it to the
  -- agentDB field inside.
  withAgent program name = do
    db <- gets agentDB
    db' <- liftIO $ execStateT (withAgent program name) db -- line 33
    modify (\u -> u { agentDB=db' } ) 
```

我得到的错误信息是......

```
amy3.hs:33:11:
    Couldn't match type `d' with `SimpleUniverse d'
      `d' is a rigid type variable bound by
          the instance declaration at amy3.hs:19:25
    When using functional dependencies to combine
      Control.Monad.State.Class.MonadState s (StateT s m),
        arising from the dependency `m -> s'
        in the instance declaration in `Control.Monad.State.Class'
      Control.Monad.State.Class.MonadState
        (SimpleUniverse (SimpleUniverse d)) (StateT (SimpleUniverse d) IO),
        arising from a use of `gets' at amy3.hs:33:11-14
    In a stmt of a 'do' block: db <- gets agentDB
    In the expression:
      do { db <- gets agentDB;
           db' <- liftIO $ execStateT (withAgent program name) db;
           modify (\ u -> u {agentDB = db'}) }
Failed, modules loaded: none. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T16:14:54.110

`program`有类型

```
Elem (SimpleUniverse d) -> StateT (SimpleUniverse  d) IO (Elem (SimpleUniverse d)) 
```

这确实简化了，但是

```
Elem d -> StateT (SimpleUniverse d) IO (Elem d) 
```

并且内部`withAgent`采用类型的程序

```
Elem d -> StateT d IO (Elem d) 
```

要解决此问题，此功能将有助于：

```
stateMap :: Monad m => (s -> t) -> (t -> s) -> StateT s m a -> StateT t m a
stateMap f g (StateT h) = StateT $ liftM (fmap f) . h . g 
```

# c# - 需要比 XML 更简洁的数据源

> ID：13608488
> 
> 赞同：5
> 
> 时间：2012-11-28T15:24:43.013
> 
> 标签：c#, xml

我目前正在开展一个项目，该项目将在一段时间内接收大量数据。我目前无法访问将部署我的软件的网络上的任何数据库引擎。因此，我正在使用 XML 数据集，并使用 MVC 类型框架。我最初选择 XML 是因为它可以在一定程度上模仿数据库的关系设计。我将数据存储在单例中，我的 win-forms 通过我的单例中的对象访问数据，win-forms 不直接了解底层数据结构。

我正在使用 .NET 3.5，因为我的软件将部署在 XP 计算机上且未连接互联网，因此无法下载 .NET 4.0。我正在使用 LINQ to XML 对象访问 XML，并将元素/属性值存储到可以通过数据访问层中的属性和方法访问的对象和集合中。

我主要担心的是随着 XML 文件变大，开销可能会变得过于繁琐。除了设置数据库服务器，还有比 XML 更好的数据存储系统吗？我需要我的数据遵循我想要完成的关系格式。我已经研究过使用分隔/csv 格式，但这些格式不满足我的项目要求。

编辑：这个数据源不能嵌入到应用程序中，并且会有多个应用程序访问数据源。将使用 2 个应用程序，一个将管理数据的“主机”应用程序和一个将用于数据收集的“客户端”应用程序。“客户端”应用程序将在 LAN 上的多个工作站上拥有多个实例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T15:43:53.483

SQL Server Express LocalDB 是 SQL Server 的嵌入式版本，但只需要运行它的机器上的文件。这可能是一个不错的选择，比 XML 更小、更快、更容易使用，与真正的 SQL 服务器具有相同的语法和相似的性能，并且您无需安装即可使用所有内置的 .Net SQL 库和功能第三方数据存储。

您还可以让多个应用程序连接到同一个数据库文件，并且仍然可以获得 SQL 服务器的 ACID 功能。

[http://www.microsoft.com/sqlserver/en/us/editions/2012-editions/express.aspx](http://www.microsoft.com/sqlserver/en/us/editions/2012-editions/express.aspx)

[http://blogs.msdn.com/b/sqlexpress/archive/2011/07/12/introducing-localdb-a-better-sql-express.aspx](http://blogs.msdn.com/b/sqlexpress/archive/2011/07/12/introducing-localdb-a-better-sql-express.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T15:28:45.297

如果文件大小是您最关心的问题，您可以对文件使用压缩以使它们在磁盘上更小。.NET 3.5 内置了一些压缩算法。XML 是非常重复的文本，压缩得非常好。如果您可以自由地将数据分成许多文件，那么这些文件也有助于减小文件大小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T15:29:09.813

JSON 比 XML 更轻量。至于您是否可以以关系方式使用它，这将取决于您正在尝试做什么。此处介绍了 JSON 的一些关系用法：

[像使用关系 SQL 数据库 (Javascript) 一样使用 JSON](https://stackoverflow.com/questions/7802489/using-json-like-a-relational-sql-database-javascript)

# java - 在 Apache 服务器上部署 Netbeans REST Web 服务

> ID：13608492
> 
> 赞同：1
> 
> 时间：2012-11-28T15:24:56.470
> 
> 标签：java, web-services, netbeans

我正在研究不同语言的网络服务，现在，我被困在 Netbeans 上。我在 localhost 上轻松创建了一个“带有数据库的 RESTful Web 服务”。因此，我使用 MySQL（Connector/J 驱动程序）连接 GlassFish 服务器。

我的问题是：Apache 服务器和 GlassFish 之间有什么区别？事实上，我的目标是在 Apache 服务器上部署这个 web 服务，但我不知道如何去做。

有人有提示或方法可以帮助我吗？非常感谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:32:34.763

我假设您遵循[本教程](http://netbeans.org/kb/docs/websvc/rest.html#create-services-from-db)。

如果您的意思是旧的可信赖的[Apache httpd](http://httpd.apache.org/)，您将无法将您创建的项目部署到该服务器，您创建的是一个 Java Enterprise 应用程序（更具体地说是一个 WAR，一个 Webapplication ARchive），您将需要一个能够部署该类型应用程序的服务器——当然像 Glassfish，还有[Apache Tomcat](http://tomcat.apache.org/)、[jetty](http://jetty.codehaus.org/jetty/)或任何[Java 企业版服务器](http://en.wikipedia.org/wiki/Java_Platform,_Enterprise_Edition#Certified_application_servers)

仍然假设您在谈论 Apache httpd，它和 Glassfish 是完全不同的野兽，服务于不同的目的，Glassfish 确实能够通过 http 提供内容，但它包含的功能远不止于此，请参阅上面关于 Java 的 Wikipedia 链接EE 获取更多链接和指针。

编辑：你不能运行像Tomcat这样的servlet容器或像GlassFish这样的Java EE服务器“内部”一个Apache服务器，就像你用mod_php在Apache“内部”运行php一样，但是很容易将它们一起运行，其中Apache httpd server 是面向外的，基本上将调用转发到后端 Java 服务器。有几种技术可以实现此结果，最流行的可能是使用 mod_jk，如此[处针对 Tomcat](http://tomcat.apache.org/connectors-doc/webserver_howto/apache.html)和[此处针对 Glassfish 进行](http://docs.oracle.com/cd/E19798-01/821-1751/gixqw/index.html)的说明。[或者，您可以设置 mod_proxy，在 SO 上](https://stackoverflow.com/questions/1081918/apache-to-tomcat-mod-jk-vs-mod-proxy)比较这两种情况。

无论如何，并不总是需要将 Tomcat 或 Glassfish 与 Apache 放在一起，但如果网站提供部分用 php 或其他 apache 托管脚本语言编写的混合内容或避免使用 servlet 容器来提供服务，则可能需要它大量的静态内容，通常不是他们的强项。对于许多应用程序来说，让 Tomcat 或 Glassfish 提供所有内容是完全可以的，避免了 mod_proxy 或 mod_jk 引入的额外复杂性以及两个服务器的双重管理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T10:13:16.927

在 apache tomcat 的 conf 文件夹中打开 server.xml 文件。并检查线路

在这里可以看到port =5051 表示apache tomcat 配置在5051 端口

打开我们的浏览器并输入`http://localhost:5051`

然后点击“Tomcat 管理器”

输入您的用户名和密码

在下一个屏幕中，您可以看到“要部署的 WAR 文件”部分。选择您的 Web 服务战争文件并单击部署

# java - Eclipse 生成 JAXB 类 - 懦弱地拒绝写入不存在的目录“src”

> ID：13608497
> 
> 赞同：3
> 
> 时间：2012-11-28T15:25:19.823
> 
> 标签：java, jaxb

按照使用 Eclipse JUNO EE 的 JAXB 教程，我得到以下关于生成 JAXB 类的信息。

我相信我正在遵循这些步骤，但是搜索网络返回的结果很少，感谢您提供任何帮助。

```
cowardly refuses to write to a non-existent directory "src"

Usage: xjc [-options ...] <schema file/URL/dir/jar> ... [-b <bindinfo>] ...
If dir is specified, all schema files in it will be compiled.
If jar is specified, /META-INF/sun-jaxb.episode binding file will be compiled.
Options:
  -nv                :  do not perform strict validation of the input schema(s)
  -extension         :  allow vendor extensions - do not strictly follow the
                        Compatibility Rules and App E.2 from the JAXB Spec* 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-14T02:48:26.110

***-d***参数[表示](https://jaxb.java.net/2.2.4/docs/xjc.html)“输出目录必须已经存在*，XJC 绑定编译器不会为您创建它。”*

src 目录必须在那里，否则 xjc 库将[懦弱](http://peter-eichenauer.de/safari/blog/entry/cowardly_refuses)地拒绝。

# javascript - CKEditor：如何在 DIV 中强制 P？

> ID：13608502
> 
> 赞同：1
> 
> 时间：2012-11-28T15:25:30.493
> 
> 标签：javascript, html, ckeditor

在我正在处理的 CMS 中，我需要插入一些自定义 HTML（有效）：

```
var element = CKEDITOR.dom.element.createFromHtml("<div class='sidebar'>Edit Sidebar Text</div>"); 
```

问题在于，在编辑侧边栏元素内的内容时，按 ENTER 会复制侧边栏 DIV，而不是在侧边栏中添加 P 标签。我如何告诉编辑器改用一个段落？

我期望这个：

```
<div class="sidebar">
    Enter sidebar text
<p></p>
</div> 
```

得到这个：

```
<div class="sidebar">
    Enter sidebar text</div>
<div class="sidebar">
    &nbsp;</div> 
```

我没有对“进入模式”设置进行任何更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T15:38:07.877

您几乎猜到了首选项的名称：http: [//docs.cksource.com/ckeditor_api/symbols/CKEDITOR.config.html#.forceEnterMode](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.config.html#.forceEnterMode)（是的，我认为这个设置应该默认为 true，但至少我们有设置它的选项）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T15:59:52.903

除了 Alfonso 的帖子之外，您需要做的第二件事是插入您自己的段落作为包装元素的一部分。这样 CK 将`<p>`在包装器内创建一个普通标签，而不是`<p class="sidebar">`.

```
var element = CKEDITOR.dom.element.createFromHtml("<div class='sidebar'><p>Edit Sidebar Text</p></div>"); 
```

从这里找到这个线索：http: [//ckeditor.com/forums/CKEditor-3.x/inside](http://ckeditor.com/forums/CKEditor-3.x/inside)

# objective-c - 在 iOS 中加载自动分页 pdf，如 iBook

> ID：13608504
> 
> 赞同：1
> 
> 时间：2012-11-28T15:25:35.557
> 
> 标签：objective-c, ios, pdf, core-graphics, cgpdfdocument

在 iBook 中，当您打开 PDF 时，您可以自动格式化和分页 pdf，例如在 iPhone 中，有 5 页，但当您使用 iPad 查看时，它只包含 2 页。

当您更改文本大小时，页面也会自动更新。

如何使用`CGPDFDocumentRef`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T22:29:33.490

我假设您在谈论 iPad 上的 Apple iBooks？您确定您正在观察 PDF 而不是 ePub 文件的行为吗？

iBooks 的原生格式是 ePub 或 iBooks Author 创建的格式。

PDF 文件通常（在绝大多数情况下）以非回流方式使用。重现页面的确切视觉外观——明确地没有重排——正是 PDF 被发明的原因。

您可以向 PDF 文件添加一些结构，使它们与 HTML 和 ePub 等格式更相似；这些结构可以用样式标记文本，在逻辑上定义段落、列和表格等等。通常，它们用于制作适合长期存档（根据 ISO PDF/A 标准）或可访问（例如适合视力障碍者通过屏幕阅读器软件阅读）的 PDF 文件。这样的 PDF 文件通常被称为标记的 PDF。

据我所知，iBooks 实际上并不支持带标签的 PDF（也就是说，它不使用此类 PDF 文件中的信息来重排文件）。据我所知，您无法使用内置的 iOS 库创建必要的标签和结构。

如果您的目标应用程序是 iBooks，那么您最好考虑生成 ePub ...

# api - Soundcloud - 通过 API 加入/混合样本

> ID：13608508
> 
> 赞同：0
> 
> 时间：2012-11-28T15:25:49.993
> 
> 标签：api, merge, soundcloud

任何人都知道是否可以向 Soundcloud 提交一系列样本以编译为一个连续文件？

更好的是，可以通过 API 将样本混合和合并在一起。

这将是伟大的，但意识到这可能是不可能的。

就是想？

干杯

麦克风

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:49:27.923

不，很遗憾，我们目前不提供此类功能。

# c# - ASP.NET MVC ENTITY Framework - 使用不同的数据库或数据集？

> ID：13608516
> 
> 赞同：0
> 
> 时间：2012-11-28T15:26:10.117
> 
> 标签：c#, asp.net-mvc-3, entity-framework

[我在asp.net/mvc](http://asp.net/mvc) 上观看 Scott Allen 的 Pluralsight 教程，我有一个关于全球化的问题。在这些视频中，他建议使用资源文件 ( **.resx** ) 来存储特定于语言的字符串。
我尝试过，但是当我想使用代码中的这些字符串时失败了。所以我有了想法，使用带有实体框架的数据库来存储它们。我的问题是：

1.  我对资源文件做错了吗？我应该使用它们还是不使用它们？
2.  如果我不应该，最好为文本创建一个新数据库或添加一个`DataSet<>`？

*我是 ASP.NET MVC 的新手，但我真的很喜欢这个想法，所以我想从一开始就做好一切。这就是为什么我要问这么“基本”的问题。*

谢谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:39:08.170

使用资源文件。

Guy Smith-Ferrier 是这方面的最佳资源。

[如何在 ASP.NET MVC 4 中实现世界（就绪）统治](http://channel9.msdn.com/Events/aspConf/aspConf/How-To-Achieve-World-Ready-Domination-In-ASP-NET-MVC-4)

> 因此，您已经编写了 ASP.NET MVC 应用程序并希望它以另一种语言工作？那么本次会议适合您。World-Readiness 是开发人员为使应用程序全球化并使其可本地化（即能够本地化）而需要做的所有工作。在本次会议中，我们将介绍本地化 HTML 和 HTML 助手、本地化和全球化数据注释、本地化和全球化 JavaScript 以及本地化 URL。不需要以前的 ASP.NET 本地化经验。

[幻灯片](http://www.guysmithferrier.com/downloads/I18NMVC.pdf)和 [来源](http://www.guysmithferrier.com/downloads/I18NMVCSource.zip)

也许读一本书：[.NET Internationalization: The Developer's Guide to Building Global Windows and Web Applications](https://rads.stackoverflow.com/amzn/click/com/0321341384)

# spring - 春天。将 post 方法请求绑定到基本 url，不带斜杠

> ID：13608517
> 
> 赞同：1
> 
> 时间：2012-11-28T15:26:19.557
> 
> 标签：spring, model-view-controller, controller, request

我有问题哪个解决方案可能很明显。

我想将 post 和 get 方法绑定到应用程序基本 url。我正在使用带注释的控制器，其中一种方法如下所示：

```
@RequestMapping(value = { "/*" }, method = { RequestMethod.GET, RequestMethod.POST })
public void init(HttpServletRequest request) {
     logger.info("Method: " + request.getMethod());
} 
```

在这两种情况下，当我发送 get 或 post 请求时，我总是得到结果“方法：GET”。我怎么解决这个问题？

似乎应用程序中的某个地方有重定向，但找不到任何重定向。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T22:59:38.173

问题在于您如何测试程序，您只能通过在浏览器窗口中输入 url 来使用 GET 方法来测试 POST 您可以创建简单的 html 页面，其内容如下

```
<form action="http://localhost:8080/yourapp/yourEntryPoint" method="post">
  <input type="text" name="data" value="mydata" />
  <input type="submit" />
</form> 
```

并在浏览器中打开

或使用插件到您选择的浏览器（谷歌）“REST 服务测试”

更多关于 Spring MVC [http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/htmlsingle/#mvc-ann-requestmapping](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/htmlsingle/#mvc-ann-requestmapping)

为了将其映射到该控制器的基本 url，您不需要将 value= 放在方法上

```
 @Controller
    @RequestMapping("/yourEntryPoint")
    public class YourClass {

        @RequestMapping(method =  {RequestMethod.GET, RequestMethod.POST })
         public void get() {
            logger.info("Method: " + request.getMethod());
        }

       @RequestMapping(value="/new", method = RequestMethod.GET)
        public void getNewForm() {
        logger.info("NewForm" );
    }

    } 
```

这会将请求 POST 和 GET 映射到 url

```
http://host:port/yourapp/yourEntryPoint 
```

这将映射到 GET

```
http://host:port/yourapp/yourEntryPoint/new 
```

# prolog - 从列表中删除一些元素

> ID：13608520
> 
> 赞同：1
> 
> 时间：2012-11-28T15:26:33.173
> 
> 标签：prolog

我想要做的是删除另一个列表ieeg中指定的列表的一部分

```
?- deleteSome([1,4,3,3,2,2],[1,2,4],Z).
Z = [3,3,2]. 
```

我首先定义了以下内容。那里没问题。

```
deleteOne(X, [X|Z], Z).
deleteOne(X, [V|Z], [V|Y]) :-
    X \== V,
    deleteOne(X,Z,Y). 
```

然后，以下内容无法按预期工作。

```
deleteSome([], [], _).
deleteSome([X|Xs], Y, Zs) :- 
    deleteSome(Xs, Y, [X|Zs]).
deleteSome([X|Xs], Y, Zs) :- 
    member(X,Y),
    deleteOne(X,Y,Y),
    deleteSome(Xs, Y, Zs). 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T15:46:28.773

我会使用强大的 select/3 内置

```
deleteSome(L, D, R) :-
  select(E, L, L1),
  select(E, D, D1),
  !, deleteSome(L1, D1, R).
deleteSome(L, _, L). 
```

测试：

```
?- deleteSome([1,4,3,3,2,2],[1,2,4],Z).
Z = [3, 3, 2]. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T15:36:16.553

我必须承认，我根本不懂你的`deleteSome`代码。这是我要做的（这里没有 Prolog，所以可能包含错误）：

```
deleteSome(X, [], X).
deleteSome(X, [Y|Ys], Z) :-
    deleteOne(Y, X, T),
    deleteSome(T, Ys, Z). 
```

即如果没有要删除的内容，则没有更改。否则，结果是我们删除第一个要删除的对象，然后删除其余的。

有一些混淆，您似乎`deleteOne`有（Original，ToDelete，Result）参数，但`deleteSome`有（ToDelete，Original，Result）。为了一致性，我宁愿重写它，以便签名兼容：

```
deleteSome([], Y, Y).
deleteSome([X|Xs], Y, Z) :-
    deleteOne(X, Y, T),
    deleteSome(Xs, T, Z). 
```

# php - Yii 控制台应用程序：是否可以将命令分组到文件夹中？

> ID：13608526
> 
> 赞同：2
> 
> 时间：2012-11-28T15:26:52.083
> 
> 标签：php, yii, console

我有一个“大”控制台应用程序，有很多命令

我们正在清理设计，但实际上我们想将一些命令分组到文件夹中......但是有没有办法从子文件夹中调用命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:20:18.823

有[CConsoleApplication.commandMap](http://www.yiiframework.com/doc/api/1.1/CConsoleApplication/#commandMap-detail)，它允许您指定所需的所有命令，但您必须指定完整路径。我相信您可以将其作为构建过程的一部分。

# javascript - jquery 中的花哨的盒子：它是如何工作的？

> ID：13608527
> 
> 赞同：-3
> 
> 时间：2012-11-28T15:26:52.503
> 
> 标签：javascript, jquery, fancybox

我知道如何使用精美的盒子，而且我知道它们有很多。 **我的目标是创建一个非常简单的**，更多用于教程目的和好奇心。

我只是想知道它们是如何工作的。如果我理解得很好，一个花哨的盒子是：

1）**禁用html页面上的所有事件**

2）**在顶部显示半透明图像**

3）在顶部显示一个居中的 div。

第3点似乎很清楚。我只是想知道第 1 点和第 2 点是如何工作的。

有什么线索吗？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T15:32:29.443

1和2是一回事。通过在整个页面上放置一个半透明的覆盖（这通常是一个绝对定位的 div，具有 100% 的宽度和高度），您可以防止用户与任何内部元素进行交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T15:37:14.617

[http://jsfiddle.net/75LTD/](http://jsfiddle.net/75LTD/) Like so:

```
<body style="width:100%; height:1024px;">
<div class="overlay">

    <div class="lightbox"></div>
</div>
<p>sdjfhsd</p>
</body>
​ 
```

CSS:

```
.overlay{width:100%; height:100%; position:fixed; left:0; background:rgba(0,0,0,0.6); }
.lightbox{position:absolute; top:50%; margin-top:-100px; left:50%; margin-left:-100px; height:200px; width:200px; background:#FFF; border-radius:10px;} 
```

​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T15:33:26.243

灯箱/花式箱本质上是两个分隔元素；一个覆盖整个页面（因此是半透明的），一个包含“弹出”内容。它们有几种共同的口味和特点，但这两件事是最重要的。

# php - 如何在禁用的文本输入中显示值

> ID：13608528
> 
> 赞同：0
> 
> 时间：2012-11-28T15:26:57.760
> 
> 标签：php, jquery, html

所以当用户访问页面时，表格应该如下所示：

```
Marks Per Answer                                             Total Marks    Marks Remaining
(blank text input)                                                 4              4
(blank text input)                                                 6              6
(disabled text input = 4 (same value as under Total Marks))        4              0 
```

我的问题是，如何通过更改下面的 jquery 来解决上述两个步骤：

```
$(function() {   
//alert("here");         
var questions = $('#markstbl td[class*="_ans"]').length;

//disable single entry
for (var i=0;i<=questions;i++){   
if($("[class*=q"+i+"_mark]").length ==1){
var t_marks = $("[class*=q"+i+"_ans]").html();
//alert(t_marks);
$("[class*=q"+i+"_mark]").val(t_marks).attr('readonly',true);
//$("[class*=q"+i+"_mark]").attr('readonly',true);
}                    
}

//find each question set and add listeners
for (var i=0;i<=questions;i++){                                     
$('input[class*="q'+i+'"]').keyup(function(){
var cl = $(this).attr('class').split(" ")[1]
var questionno = cl.substring(cl.indexOf('q')+1,cl.indexOf('_'));
var tot_marks = $(".q"+questionno+"_ans_org").val();
//alert(tot_marks);
var ans_t=0;
$("[class*=q"+questionno+"_mark]").each(function(){
var num = (isNaN(parseInt($(this).val())))?0:parseInt($(this).val());
ans_t+=parseInt(num);                             
});
ans_t=tot_marks-ans_t;                             
//alert(ans_t);
//var fixedno = tot_marks;
var ans = ans_t;
var answerText='<strong>'+ans+'</strong>';
$(".q"+questionno+"_ans").val(ans);
$(".q"+questionno+"_ans_text").html(answerText);
});
}
}); 
```

下面是动态 HTML 表格：

```
<form id="Marks" action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">

<table border='1' id='markstbl'>
<thead>
<tr>
<th class='questionth'>Question No.</th>
<th class='questionth'>Question</th>
<th class='answerth'>Answer</th>
<th class='answermarksth'>Marks per Answer</th>
<th class='totalmarksth'>Total Marks</th>
<th class='noofmarksth'>Marks Remaining</th>
</tr>
</thead>
<tbody>
<?php
$row_span = array_count_values($searchQuestionId);
$prev_ques = '';
foreach($searchQuestionId as $key=>$questionId){

?>

<tr class="questiontd">
    <?php
    if($questionId != $prev_ques){
    ?>
    <td class="questionnumtd" name="numQuestion" rowspan="<?php echo$row_span[$questionId]?>"><?php echo$questionId?> <input type="hidden" name="q<?php echo$questionId?>_ans_org" class="q<?php echo$questionId?>_ans_org" value="<?php echo$searchMarks[$key]?>"><input type="hidden" name="q<?php echo$questionId?>_ans" class="q<?php echo$questionId?>_ans" value="<?php echo$searchMarks[$key]?>"></td>
    <td class="questioncontenttd" rowspan="<?php echo$row_span[$questionId]?>"><?php echo$searchQuestionContent[$key]?> </td>
    <?php
    }
    ?>
<td class="answertd" name="answers[]"><?php echo$searchAnswer[$key]?></td>
<td class="answermarkstd">
<input class="individualMarks q<?php echo$questionId?>_mark_0"  q_group="1" name="answerMarks[]" id="individualtext" type="text" />
</td>
<?php
    if($questionId != $prev_ques){
    ?>
<td class="totalmarkstd" rowspan="<?php echo$row_span[$questionId]?>"><?php echo$totalMarks[$key]?></td>
<td class="noofmarkstd q<?php echo$questionId?>_ans_text"  q_group="1" rowspan="<?php echo$row_span[$questionId]?>"><?php echo"<strong>".$searchMarks[$key]."</strong>"?></td>
<?php
    }
    ?>
</tr>
<?php
$prev_ques = $questionId;
}
?>
</tbody>
</table>
</form> 
```

目前在 jquery 函数中，我正在尝试使用 t_marks 变量来显示文本输入中的值，但是当我警告 t_marks 时没有显示任何内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:28:41.087

您可以使用 readonly 而不是 disabled

改变

```
$("[class*=q"+i+"_mark]").val(t_marks).attr("disabled","disabled"); 
```

至

```
$("[class*=q"+i+"_mark]").val(t_marks).attr('readonly',true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T15:32:24.780

或者你可以在它获得焦点时让它聚焦

```
<input type="text" id="myTxt" onfocus="$(this).blur()"/> 
```

# android - Tapit“没有可用的广告素材”

> ID：13608533
> 
> 赞同：0
> 
> 时间：2012-11-28T15:27:18.963
> 
> 标签：android, admob, ads

我收到以下带有 Tapit 广告的消息（通过使用 admob 的中介）：

11-28 16:18:41.512: D/TapIt(20993): {"error":"No available creatives"}

这是否意味着没有广告可显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T23:37:20.403

您在使用 AdMob 中介吗？

TapIt 可能会记录此消息，表示它没有广告。但是，如果您正在与其他网络进行中介，您可能会从其中一个网络中收到针对相同请求的广告，因此这并不一定意味着 AdMob 中介没有可展示的广告。如果 AdMob 中介无法从您配置的任何网络中获取广告，它会通过`onFailedToReceiveAd`回调通知您。

# intellij-idea - IDEA 11.1.4 中的 Glassfish 3.1.2.2：“PWC6345：调用 javac 时出错。需要完整的 JDK（不仅仅是 JRE）”

> ID：13608539
> 
> 赞同：3
> 
> 时间：2012-11-28T15:27:47.840
> 
> 标签：intellij-idea, glassfish-3

我正在尝试在新解压的 Glassfish 3.1.2.2 下在新安装的 IDEA 11.1.4 Ultimate (Windows 7) 中启动并运行我们的 Mavenized Web 应用程序。我在 Eclipse 中做过很多次，但对 IDEA 并不熟悉。

我可以很好地构建和部署它，但是当我尝试使用 JSP 内容访问页面时，我得到：

```
PWC6345: There is an error in invoking javac.  A full JDK (not just JRE) is required 
```

Glassfish 应用服务器条目将 javax.ejb.jar、javax.servlet-api.jar 和 javax.servlet.jsp-api.jar 添加为库。

我已将项目 SDK 设置为指向完整的 JDK，从而导致：

![ ](../Images/d5d841db7b0fc9b8357b62f278ec5b75.png)

（它似乎不包括一个带有 javac 的 jar）

到目前为止我发现的 IntelliJ 教程没有提到这个问题。我的猜测是“请开始使用*此*JDK”信息不会传递给 Glassfish，因此它只会获取系统 JRE。

我错过了哪些配置步骤？我不想编辑配置文件——如果我知道如何告诉它，我希望 IntelliJ 插件能够做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-05-06T12:12:14.777

我收到了相同的通知，只是在管理端口 -> 配置 -> 服务器配置 -> JVM 设置 -> Java Home 中更改为“C:\Program Files\Java\jdk1.8.0_72”，然后它就开始工作了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-07-17T09:06:26.787

PWC6345：调用 javac 时出错。需要完整的 JDK（不仅仅是 JRE）。

重新启动 glassfish 4 服务器后，我遇到了同样的错误。当我尝试访问我部署的应用程序时，它说要提到完整的 JDK。

1.  登录到 Glassfish 管理控制台。( [http://localhost:4848](http://localhost:4848) )。
2.  转到配置---->服务器配置--->JVM设置
3.  使用正确的 jdk 主目录设置 java 主目录（例如：C:\Program Files (x86)\Java\jdk1.8.0_121）。
4.  重新启动服务器。

它会正常工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-29T12:51:55.447

下一个解决方案帮助了我

来源：[http ://alvinalexander.com/blog/post/java/fixing-glassfish-jdk-path-problem-solved](http://alvinalexander.com/blog/post/java/fixing-glassfish-jdk-path-problem-solved)

1.  找到您的 asenv.bat 文件。C:\Program Files\glassfish-4.0\glassfish\config\asenv.bat
2.  在文本编辑器中打开它并找到像“set AS_ = blahblah”这样的字符串
3.  在此处添加此字符串“set AS_JAVA=C:\Program Files\Java\jdk1.7.0_60”（在此处打​​印您自己的 JDK 路径）。如果字符串“set AS_JAVA= blahblah”已经存在，那么只需修复路径。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T15:31:42.760

将`JDK_HOME\lib\tools.jar`文件添加到 JDK 配置**Classpath**。

但是，您的问题可能会有所不同，因为 Glassfish JDK 不是从 IntelliJ IDEA 设置中获取的，这个问题可能会有所帮助：

*   [如何为 glassfish 域指定 jdk？](https://stackoverflow.com/questions/10444959/how-do-i-specify-the-jdk-for-a-glassfish-domain)

# asp.net - Linq include() 适用于 dev 但不适用于 azure

> ID：13608544
> 
> 赞同：0
> 
> 时间：2012-11-28T15:28:03.473
> 
> 标签：asp.net, linq, azure, include

我有一个数据库模式如下：

```
FailureItem
---------------
FailureID int foreign key references Failure (FailureID)
DatabaseID int NULL foreign key references Items (DatabaseID)
FailureDescription varchar(200)

Item
---------------
DatabaseID int primary key identity(1,1)
ItemDescription varchar(200) 
```

我正在使用 linq 将其绑定到 gridview，如下所示：

```
Dim items as List(Of FailureItems) =
    context.FailureItems.include("Item").where(function(x) x.FailureID = _failureID)

<asp:GridView ID="gv1" runat="server">
    <Columns>
        <asp:BoundField DataField="databaseID" Visible="false" />
        <asp:BoundField DataField="FailureDescription" headertext="Failure Description" />
        <asp:BoundField DataField="Item.ItemDescription" headertext="Item Description" />
    </Columns>
</asp:GridView> 
```

这在我的开发机器上完美运行。当我将它发布到 azure 上时，我收到错误“在所选数据源上找不到名为 'Item.ItemDescription' 的字段或属性”。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T16:05:11.767

我最终将代码更改为以下内容，这很有效：

```
Dim items =
    (from fi in context.FailureItems
     where(fi.FailureID = _failureID)
     select new with {
         fi.databaseID,
         fi.FailureDescription,
         ItemDescription = If(fi.Item isnot nothing, fi.Item.ItemDescription, nothing)
     }).ToList 
```

# c# - 如何裁剪图像

> ID：13608545
> 
> 赞同：1
> 
> 时间：2012-11-28T15:28:10.353
> 
> 标签：c#, jquery, crop, jcrop

我正在使用 Jcrop 尝试裁剪和图像并保存它。

```
http://deepliquid.com/content/Jcrop.html 
```

在演示中，这是我正在实施的演示：

```
http://deepliquid.com/projects/Jcrop/demos.php?demo=handler 
```

它给了我几个坐标 x1, y1, x2, y2, x, y

一旦这些被提交，我如何使用它们来裁剪图像？

我看过[http://www.switchonthecode.com/tutorials/csharp-tutorial-image-editing-saving-cropping-and-resizing](http://www.switchonthecode.com/tutorials/csharp-tutorial-image-editing-saving-cropping-and-resizing)

这是最好的方法吗？它只使用 x、y、w 和 h

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T15:34:07.673

使用[Graphics.DrawImage](http://msdn.microsoft.com/en-us/library/ktyfbs10.aspx)是在 c# 中裁剪图像的更好主意

```
Rectangle cropRect = new Rectangle(...);
Bitmap src = Image.FromFile(fileName) as Bitmap;
Bitmap target = new Bitmap(cropRect.Width, cropRect.Height);

 using(Graphics g = Graphics.FromImage(target))
 {
  g.DrawImage(src, new Rectangle(0, 0, target.Width, target.Height), 
                cropRect,                        
                GraphicsUnit.Pixel);
 } 
```

从源[线程](https://stackoverflow.com/questions/734930/how-to-crop-an-image-using-c)

# python - 读取超过 100 个字段的表时出错_pyodbc

> ID：13608547
> 
> 赞同：0
> 
> 时间：2012-11-28T15:28:14.217
> 
> 标签：python, linux, pyodbc

运行时出现问题

```
cursor.execute("select * from ObjTransaction_20121115;")
row = cursor.fetchone() 
```

该表有 100 多个字段，所以在执行 fetchone 后，我得到一个错误 "bus error" 。如果它在具有多个字段的表上启动，则没有问题。

那么你能建议我如何解决这个问题吗？也许这是一个内存错误。

在我的系统中，有很多这样的表。

我的 pyodbc 是 Opensuse 12.2 64b 上的 pyodbc-3.0.2-1.x86_64

# smtp - 如何使用 phpmailer 获取 smtp 错误代码

> ID：13608548
> 
> 赞同：-4
> 
> 时间：2012-11-28T15:28:17.897
> 
> 标签：smtp, phpmailer

我使用 phpmailer 收到了 smtp 的邮件错误消息。但我需要那个错误信息的错误代码。

我如何得到它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:32:18.280

这可能是与邮件服务器的连接错误。您应该尝试从运行 PHP 的应用服务器到邮件服务器进行 telnet 连接或 ping，例如

```
telnet <mail_host> <port> 
```

您还应该检查服务器上的防火墙设置。

# php - 将数组转换为具有整数的特定键

> ID：13608549
> 
> 赞同：0
> 
> 时间：2012-11-28T15:28:18.747
> 
> 标签：php

我想验证一个数组是否具有并且只有“a”、“b”和“c”作为关联键，并且值是整数或 NULL 或 0（更容易）。

例如，`array('a'=>123,'b'=>'abc', 'd'=>321)`应转换为`array('a'=>123,'b'=>0, 'c'=>0)`.

我可以做类似下面的事情，但它有点难以阅读，如果我不只是有 3 个元素而是 300 个元素，它会变得很大。

```
$newArr=array(
 'a'=>(isset($arr['a']))?(int)$arr['a']:0,
 'b'=>(isset($arr['b']))?(int)$arr['b']:0,
 'c'=>(isset($arr['c']))?(int)$arr['c']:0
); 
```

另一种选择类似于以下内容：

```
$newArr=array();
foreach (array('a','b','c') as $key)
{
 $newArr[$key]=(isset($arr[$key]))?(int)$arr[$key]:0;
} 
```

我想这已经足够好了，但是，我很好奇是否有一些我不知道的光滑的数组转换功能会更好。有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:42:54.717

数组映射很好[http://php.net/manual/en/function.array-map.php](http://php.net/manual/en/function.array-map.php)

```
$arr = array('a'=>123,'b'=>'abc', 'd'=>321);
function intize($n){return (int)$n;}

$arr = array_map("intize",$arr);
print_r($arr); 
```

或者对于键，array_walk

```
$arr = array('a'=>123,'b'=>'abc', 'd'=>321);
function intize(&$n,$key){
    if($key =='a'||$key=='b'||$key=='c')
        $n= (int)$n;
    else
        unset($n);
}

array_walk($arr,"intize");
print_r($arr); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T15:56:24.823

这是一个可能的解决方案...

```
// create array of required keys with default values
$defaultKeys = array('a','b','c');
$defaultVals = array_fill(0, count($defaultKeys), 0); 
$defaults = array_combine($defaultKeys, $defaultVals);

$args = array('a'=>123,'b'=>'abc', 'd'=>321);

// merge arguments with defaults, overwriting default values with arg values and preserving keys
$args = array_merge($defaults, $args);

// remove key/value pairs present in args that don't exist in defaults 
$args = array_intersect_key($args, $defaults);

// filter values, replacing anything that isn't an integer of 0 or greater value with a 0
$args = array_map( function($v) { return (is_integer($v) && $v >= 0) ? $v : 0; }, $args ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T15:57:08.017

可以使用以下组合重写您的函数：

*   [`array_intersect_key`](http://www.php.net/manual/en/function.array-intersect-key.php)删除多余的键
*   [`array_merge`](http://www.php.net/manual/en/function.array-merge.php)添加缺少的键
*   [`array_map`](http://www.php.net/manual/en/function.array-map.php)将所有内容更改为 NULL 或整数

然而，这只会使它变得复杂。IMO 最巧妙的方法是：

```
$test = array("a" => 123, "b" => "x", "d" => 123);
$testcopy = array();
foreach (array("a", "b", "c") as $key) {
    $testcopy[$key] = array_key_exists($key, $test)
        ? filter_var($test[$key], FILTER_VALIDATE_INT, array("options" => array("default" => NULL)))
        : NULL;
}
var_dump($testcopy); 
```

输出：

```
array(3) {
    ["a"]=> int(123)
    ["b"]=> NULL
    ["c"]=> NULL
} 
```

# javascript - 根据 iframe 中的内容调整 iframe 高度

> ID：13608555
> 
> 赞同：0
> 
> 时间：2012-11-28T15:28:38.643
> 
> 标签：javascript, jquery, html, iframe, expand

![默认展开前](../Images/4673af45144a5646793f43bdb8215a50.png)![展开时](../Images/61a70ed93f8d9b7bb33dae51702ebcfe.png) 到目前为止，我的研究似乎没有帮助。我不是 jquery sabbie，但它似乎不起作用。iframe 中有链接，一旦您单击每个链接，它就会展开并为您提供该链接的内容。好吧，iframe 高度不会随之移动。这是我的代码。这是标题中的内容。

```
<script type="text/javascript">$(document).ready(function () {$('iframe').iframeAutoHeight({debug: true});});</script> 
```

身体标签：

```
<iframe src="http://www.promero.com/defaultNewsTest.asp" class="auto-height"scrolling="no" frameborder="0"></iframe><script>$('iframe.auto-height').iframeAutoHeight({minHeight: 240});</script> 
```

该网站是[http://promerostage.promero.com/](http://promerostage.promero.com/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:46:46.183

看看下面的文章。我希望它会解决您的问题，因为您正在寻找解决方案。

[http://sonspring.com/journal/jquery-iframe-sizing](http://sonspring.com/journal/jquery-iframe-sizing)

# msmq - 将 nservicebus 部署到生产环境时，mqsvc.exe 将 cpu 固定在完全使用状态

> ID：13608560
> 
> 赞同：1
> 
> 时间：2012-11-28T15:28:44.437
> 
> 标签：msmq, nservicebus

当我将使用 nservice 的站点部署到新的生产机器时，它的速度非常慢......

经过一些调试，我发现 mqsvc.exe 占用了 50% 的 CPU 使用率，而另外 50% 被 w3wp.exe 占用

我在这里找到了这篇文章：http: [//geekswithblogs.net/michaelstephenson/archive/2010/05/07/139717.aspx](http://geekswithblogs.net/michaelstephenson/archive/2010/05/07/139717.aspx)

其中推荐了以下内容：

> *   确保将 NserviceBus 通用主机的 Windows 服务设置为正确的凭据
>     
>     
> *   确保您已设置具有正确权限的队列
>     
>     
> *   确保在 NServiceBus 中打开正确的日志记录配置

所以我认为问题与权限有关，但即使尝试正确设置权限（我认为）我仍然无法解决问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T15:28:44.437

问题最终确实是网站需要被授予对队列的明确权限。

我在网上找到了许多资源告诉我这一点，但我仍然不得不花费大量时间来查看确切需要访问哪个帐户...结果发现，由于我的应用程序池设置为作为 ApplicationPoolIdentity 运行，我需要通过将以下帐户添加到 nservicebus 队列来授予帐户权限：

```
IIS AppPool\{APP POOL NAME} 
```

我授予了完全访问权限，但我相信您可以根据需要对其进行一些改进。

希望这将帮助遇到相同问题的任何人。

（这是我第一次尝试“回答你自己的问题”机制，所以如果我做错了什么，请告诉我..）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T18:20:39.517

如果您允许 NServiceBus 创建自己的队列，那么它将使用所需的正确权限创建它们。

当您设置 Web 应用程序，然后创建队列，然后应用程序在其下运行的身份发生更改时，问题就出现了。然后你就会得到这个问题。NServiceBus 尝试检查队列中的消息，但它无权执行此操作，因此它会立即一遍又一遍地重试，并且您会触发处理器。

修复：删除队列。重新启动 Web 应用程序。NServiceBus 接管。

**编辑：**如评论中所述，NServiceBus 3.x 默认情况下不会调用安装程序，这意味着除非您要求，否则不会在生产中自动创建队列。有关更多详细信息，请参阅[安装程序的文档页面。](http://docs.particular.net/nservicebus/operations/installers)

对于 Web 应用程序（或任何其他不使用 NServiceBus.Host 的情况），您可以调用安装程序作为 fluent 配置的一部分。NServiceBus 下载中有一个完整的示例，但这里是[GitHub 上相关文件的链接](http://docs.particular.net/samples/)。

# javascript - 带有反斜杠的路径到带有正斜杠的路径 javascript

> ID：13608564
> 
> 赞同：14
> 
> 时间：2012-11-28T15:28:48.013
> 
> 标签：javascript, replace, backslash

我正在尝试为一些同事制作一个解析“应用程序”的**本地**xml 文件，并且我正在使用当前函数来检索文件：

```
function ShowFolderFileList(folderspec) {
    var fso, f, f1, fc, s;
    fso = new ActiveXObject("Scripting.FileSystemObject");
    f = fso.GetFolder(folderspec);
    fc = new Enumerator(f.files);
    s = "";
    for (; !fc.atEnd(); fc.moveNext()) {
        var pathString = fc.item();
        $("#test").append(pathString + "<br />");
    }
} 
```

这个函数的问题是它返回一个类似于以下的字符串：

```
C:\Users\SomeUser\Desktop\cool\Archief\CDATA1.xml 
```

我需要将反斜杠替换为整个字符串的正斜杠。这个怎么做？

我尝试了替换方法：

```
pathString.replace(/\\/g, "/") 
```

但这似乎没有奏效。

你们能帮帮我吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-28T15:33:28.210

该`replace`方法不会改变字符串的当前实例，而是返回一个新实例。看看这是否有效：

```
pathString = pathString.replace(/\\/g,"/"); 
```

请参阅[jsfiddle 上的此示例](http://jsfiddle.net/NWCAn/)。

# adsense - Ajax 网站 - Google DFP Small Business 和 Adsense

> ID：13608567
> 
> 赞同：4
> 
> 时间：2012-11-28T15:28:59.093
> 
> 标签：adsense, google-dfp

我正在建立一个基于 ajax 的网站。对于基于 Ajax 的网站来说，DFP 似乎是一个很好的赚钱解决方案。同样在 DFP 中，您可以启用 Adsense 来展示广告（您可以参考下面的链接）。

[http://support.google.com/dfp_sb/bin/answer.py?hl=en&answer=1670087](http://support.google.com/dfp_sb/bin/answer.py?hl=en&answer=1670087)

[http://support.google.com/dfp_sb/bin/answer.py?hl=en&answer=112640](http://support.google.com/dfp_sb/bin/answer.py?hl=en&answer=112640)

**1) DFP :-**您可以在 ajax 代码中使用它

**2) Adsense :-**您不能直接使用 Ajax 显示它（根据条款和条件）

但是我们可以在我使用 ajax 加载的 DFP 中显示 Adsense 吗？有人使用这种方法还是违反了 Ad sense 的条款和条件？

谢谢你们

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T01:25:48.957

你能行的。我在 2012 年秋季 Google 的“AdSense in Your City”活动中亲自问过这个问题，代表说这是可以接受的，实际上是提倡这样做。

仅使用 DFP 作为 AdSense 的载体是完全可以接受的。您不必使用 DFP 来管理仅 AdSense 作为后备的其他广告。您将了解 DFP 的优点和缺点。你提到了其中一个好处。另一个主要功能是内置定位...例如，您可以向有效每千次展示费用较低国家/地区的用户展示更大、更令人讨厌的广告，以抵消他们较低的投资回报率。缺点之一是 DFP 的加载速度比 AdSense 慢，而且它与 AdSense 报告和渠道的集成很差。DFP AdSense 单元似乎也比“原生”AdSense 获得了新的 AdSense 功能。

# zend-framework - 在 Zend 表单元素提交中禁用转义

> ID：13608571
> 
> 赞同：1
> 
> 时间：2012-11-28T15:29:16.997
> 
> 标签：zend-framework, zend-form

我不能在 Zend_Form_Element_Submit 中禁用转义，所以当标签有特殊字符时，它不会显示它的值..

这是我实际的 Zend Form 代码：

```
$this->submit = new Zend_Form_Element_Submit('submit');
$this->submit->setLabel('Iniciar Sesión');
$this->submit->setIgnore(true);
$this->addElement($this->submit); 
```

我试过`$this->submit->getDecorator('Label')->setOption('escape', false);`了，但我得到一个“非对象”错误（可能提交没有使用“标签”装饰器）..

我也按照建议尝试过，`$this->submit->setAttrib('escape', false);`但也不会显示任何文字..有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:34:42.173

Submit 元素使用的助手默认转义。与标签装饰器不同，提交标签包含在 HTML 属性中，因此需要对其进行转义。

您的标签 - Iniciar Sesión - 是一个完全有效的 UTF-8 字符串，因此它的转义版本将是相同的。如果您的标签没有出现，那么其他地方出了问题。我猜您的页面使用的字符集与 Zend View 使用的字符集不匹配（默认为 UTF-8）。

查看页面源代码以查看实际输出的内容 - 这可能会给您更多线索。或者，如果此表单所在的页面是公开的，如果您可以提供一个 URL，我们或许能够发现问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T17:02:36.617

默认情况下，提交表单元素没有标签装饰器（这就是您收到错误的原因）。该`$this->submit->setLabel('Iniciar Sesión');`值转到 Zend_View_Helper_FormSubmit，它总是进行转义并将标签用作值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T16:19:02.220

应该像这样做一样简单：

`$element->addDecorator('Label', аrray('escape'=>false));`

或见`setEscape()`。 [http://framework.zend.com/manual/1.12/en/zend.form.standardDecorators.html](http://framework.zend.com/manual/1.12/en/zend.form.standardDecorators.html)

关于未能检索命名装饰器...尝试`getDecorators()` 您在结果中看到“标签”吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-23T21:24:13.787

我遇到了类似的问题。在我的例子中，我向文本字段元素添加了标签和描述。这行代码允许我关闭附加到该字段元素的描述的 html 转义：

```
$form->getElement('txtUPC')->getDecorator('description')->setOption('escape', false); 
```

在我的测试中，`setEscape()`表单元素或其装饰器无法识别。

# iphone - 从 UIButton 向 ViewController 发送通知

> ID：13608572
> 
> 赞同：1
> 
> 时间：2012-11-28T15:29:16.823
> 
> 标签：iphone, objective-c, ios

我在故事板的外部 Nib 中创建了一个 UITableViewCell。我已经设置了一个从 UITableViewController 到另一个 ViewController 的 segue，它在测试时效果很好。

我想知道如何让 Nib 中的 UIButton 在 `[performSegueWithIdentifier:@"identifier" sender:self];`按下时调用。

有任何想法吗？我仍然很业余，所以如果你能解释清楚，我会非常感激。

问候，
迈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:36:14.100

在您的 ViewController.h 中执行以下操作：

```
- (IBAction)buttonPressed:(id)sender; 
```

在您的 .m 文件中执行以下操作：

```
- (IBAction)buttonPressed:(id)sender {
    [self performSegueWithIdentifier:@"identifier" sender:self];
} 
```

现在转到您的`.xib`文件并将按钮选择器连接到您的控制器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T15:51:02.180

你也可以在故事板上完成同样的事情；右键单击按钮并将箭头拖动到要导航到的视图控制器，它将提供 segue 选项（推送、模式、自定义），然后选择一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T15:49:38.407

在调用 VC 中处理它

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

    if ([[segue identifier] isEqualToString:@"identifier"]) {
        >yoursecondVC> *secondViewController = [segue destinationViewController];
        secondViewController.<param> = <param>;
    }

} 
```

# ios - 将自定义 UIView 添加到 UINavigationItem

> ID：13608575
> 
> 赞同：2
> 
> 时间：2012-11-28T15:29:21.400
> 
> 标签：ios, uinavigationitem

我有 3 个按钮，我试图将它们作为自定义标题添加到我的应用程序中的某些视图中。将它们添加到情节提要中效果很好，我可以将它们连接到视图控制器中的方法。

我最近想将这些按钮添加到其他一些页面，并希望将它们抽象为一个可以在不同页面上重复使用的控件。我已经设置好了，但是使用普通方法添加它时遇到了困难。

![也许这张照片将有助于解释我在说什么](../Images/b71df8cf737ea200b3122c7a93a54a92.png)

通常我将视图控制器添加为子视图控制器，然后将视图添加为子视图，在这种情况下，我将其添加到情节提要中的占位符中，代码如下所示：

```
// Setup Header
HeaderViewController * headerViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"HeaderViewController"];
[headerViewController.view setFrame:CGRectMake(0.0f, 0.0f, [headerViewController.view frame].size.width, [headerViewController.view frame].size.width)];
[_headerView addSubview:headerViewController.view]; 
```

这使我可以使视图看起来正确，但是当我单击按钮时它会崩溃，因为它找不到具有与按钮单击关联的 IBActions 的视图控制器。通常我会添加以下代码，它会得到照顾：

```
[self addChildViewController:headerViewController]; 
```

但是，在这种情况下，我收到一条错误消息：

由于未捕获的异常“UIViewControllerHierarchyInconsistency”而终止应用程序，原因：“子视图控制器：应该有父视图控制器：但实际父视图是：”

我理解这意味着它认为自定义标题视图控制器的父级应该是导航控制器，将其设置为导航控制器的子级也不起作用。它将标题视图添加到正在显示的 PageViewControllers 视图之上。我可能错过了一些简单的东西

我尝试过的一些组合在模拟器上工作，但它们都不能在设备上工作，所以如果你使用类似的配置，请确保在设备上查看它，如果它似乎在模拟器中工作。

有什么想法或其他信息可以提供帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T15:41:20.173

Put your IBActions on the header view controller instead and bind them in the xib without referencing any other view controller.

Then, in the header view controller you can pass them down to it's parent. That way it's determining who recieves the action at runtime, not as part of your xib.

```
- (IBAction)button1Pressed {
    if ([self.parentViewController respondsToSelector:@selector(button1Pressed)])
        [self.parentViewController performSelector(button1Pressed)];
    else
        NSLog(@"Parent doesn't care about button 1 : %@", self.parentViewController);
} 
```

You can also check to see if the parent can respond or not :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T16:45:44.983

我无法使用建议的其他方法来完成这项工作，并不是说他们错了，我只是无法让他们工作。

我最终创建了一个带有相应 xib 的 UIView 子类，并将 IBActions 放入 UIView 子类中。这需要到持有视图控制器的弱链接，以便为触发的 IBAction 适当地显示模态视图。

# java - 如何在java中将数字数组四舍五入为3位数字

> ID：13608578
> 
> 赞同：0
> 
> 时间：2012-11-28T15:29:33.173
> 
> 标签：java, rounding, out-of-memory

我试图在java中将一个数字数组四舍五入到小数点后三位，原因是我遇到了OutOfMemoryError（数组超出了VM的限制）。我很好奇是否有一种方法可以做到这一点，而无需编写全新的方法或类似的任何激烈的东西。

编辑：这是所有代码

```
public class GuitarHero {
public static void main(String[] args) {

    int index = 0;
    double sample = 0.0;
    String keyboard ="1234567890qwertyuiopasdfghjklzxcvbnm,";

    GuitarString[] string = new GuitarString[keyboard.length()];

    for(int i = 0; i < 37; i++) {
        double concert = 110.0 * Math.pow(2,i-24);
        string[i] = new GuitarString(concert);
    }

    while (true){

        if (StdDraw.hasNextKeyTyped()) {
            char key = StdDraw.nextKeyTyped();
            index = keyboard.indexOf(key);

            if (index >= 0 && index < 37){
                string[index].pluck();
            }
            //sample = string[index].sample() + string[index+1].sample();
            //StdAudio.play(sample);
        }

        for(int i=0; i<37; i++){
            sample = string[i].sample();

            StdAudio.play(sample);
        }

            for(int i = 0; i < 37; i++){
                    string[i].tic();
            }           
        }   

    }
} 
```

代码1结束

```
public class GuitarString {

    private RingBuffer buffer; // ring buffer
    // YOUR OTHER INSTANCE VARIABLES HERE
    private int ticTimes = 0;
    // create a guitar string of the given frequency
    public GuitarString(double frequency) {
        // YOUR CODE HERE
    int N;
    N = (int)(44100/frequency);
    buffer = new RingBuffer(N);
    for (int i=1; i <=N; i++ ){
       buffer.enqueue(0.0);        
        }
    }

    // create a guitar string whose size and initial values are given by the array
    public GuitarString(double[] init) {
        // YOUR CODE HERE
    buffer = new RingBuffer(init.length);
    for (int i = 0; i < init.length; i++){
        buffer.enqueue(init[i]);
        }
    }

    // pluck the guitar string by setting the buffer to white noise
    public void pluck() {
        // YOUR CODE HERE
        while(!buffer.isEmpty()) buffer.dequeue();
    while(!buffer.isFull()){
    buffer.enqueue(Math.random()-0.5);
}
}

    // advance the simulation one time step
    public void tic() {
        // YOUR CODE HERE
    double value1, value2;
    value1 = buffer.dequeue();
    value2 = buffer.peek();
        buffer.enqueue(((value1+value2)/2)*0.996);
    ticTimes++;
    }

    // return the current sample
    public double sample() {
        // YOUR CODE HERE
    return buffer.peek();
    }

    // return number of times tic was called
    public int time() {
        // YOUR CODE HERE

    return ticTimes;
    }

  public static void main(String[] args) {
      int N = Integer.parseInt(args[0]);
      double[] samples = { .2, .4, .5, .3, -.2, .4, .3, .0, -.1, -.3 };  
      GuitarString testString = new GuitarString(samples);
      for (int i = 0; i < N; i++) {
          int t = testString.time();
          double sample = testString.sample();
          System.out.printf("%6d %8.4f\n", t, sample);
          testString.tic();
      }
  }

} 
```

代码2结束

```
public class RingBuffer {
private int first;            // index of first item in buffer
private int last;             // index of last item in buffer
private int size;             // current number of items of buffer
private double[] buffer;

// create an empty buffer, with given max capacity
public RingBuffer(int capacity) {
    // YOUR CODE HERE
    buffer = new double[capacity];
    first =0;
    last  =capacity-1;
    size  =0;
}

// return number of items currently in the buffer
public int size() {
    // YOUR CODE HERE
    return size;
}

// is the buffer empty (size equals zero)?
public boolean isEmpty() {
    // YOUR CODE HERE
    if (size == 0) 
    return true;
    else 
    return false;
}

// is the buffer full (size equals array capacity)?
public boolean isFull() {
    // YOUR CODE HERE
    if (size == buffer.length)
    return true;  
    else
    return false;

}

// add item x to the end
public void enqueue(double x) {
    if (isFull()) { throw new RuntimeException("Ring buffer overflow"); }
    // YOUR CODE HERE
    last = (last+1)%buffer.length;
    buffer[last]=x;
    size++;
}

// delete and return item from the front
public double dequeue() {
    if (isEmpty()) { throw new RuntimeException("Ring buffer underflow"); }
    // YOUR CODE HERE
    double temp = buffer[first];
    first = (first+1)% buffer.length;
    size--;
    return temp;
}

// return (but do not delete) item from the front
public double peek() {
    if (isEmpty()) { throw new RuntimeException("Ring buffer underflow"); }
    // YOUR CODE HERE
    return buffer[first];
}

// a simple test of the constructor and methods in RingBuffer
public static void main(String[] args) {
    int N = Integer.parseInt(args[0]);
    RingBuffer buffer = new RingBuffer(N);
    for (int i = 1; i <= N; i++) {
    buffer.enqueue(i);
    }
    double t = buffer.dequeue();
    buffer.enqueue(t);
    System.out.println("Size after wrap-around is " + buffer.size);
    while (buffer.size() >= 2) {
    double x = buffer.dequeue();
    double y = buffer.dequeue();
    buffer.enqueue(x + y);
    }
    System.out.println(buffer.peek());
}

} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T16:07:08.397

那么在该循环的第一次迭代中，代码试图分配一个包含 1,681,534,603 个双精度数 (44100 / (110 * 2^-22)) 的数组，这将需要大约 3GB 的内存。我建议你找到一个不同的解决方案。

# windows-8 - 带有线程的 Windows 8 xaml Modern 应用程序中的错误

> ID：13608582
> 
> 赞同：0
> 
> 时间：2012-11-28T15:29:51.930
> 
> 标签：windows-8, windows-runtime, winrt-xaml, winrt-async

我有以下两种方法。当用户从 ui 中单击开始按钮时，geoLocator_PositionChanged 方法中的步骤 geoLocator_PositionChanged 被触发并调用另一个方法 geoLocator_PositionChanged。但是当在执行第一条语句时尝试块时，它会引发以下错误：

“应用程序调用了一个为不同线程编组的接口。（来自 HRESULT 的异常：0x8001010E (RPC_E_WRONG_THREAD)）”

私有异步无效 btnStartStop_Click_1（对象发送者，RoutedEventArgs e）

```
 {
      geoLocator.PositionChanged += geoLocator_PositionChanged; 
     } 
```

async void geoLocator_PositionChanged（地理定位器发件人，PositionChangedEventArgs 参数）

```
 {

        MessageDialog msgdlg = null;
        bool bDisplayDialog = false;
        try
        {
            lblAltValue.Text = args.Position.Coordinate.Altitude.ToString();  
    }
    catch
    {
    }
    } 
```

任何帮助我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T15:40:17.670

您尝试从另一个访问 UI 线程。

尝试类似的东西

```
Windows.ApplicationModel.Core.CoreApplication.MainView.CoreWindow.Dispatcher.RunAsync
(Windows.UI.Core.CoreDispatcherPriority.Normal, () => 
{
    //HERE GOES THE UI ACCESS LIKE this.textbox.text = "MY AWESOME TEXT"; 
}); 
```

# asp.net-mvc - customErrors 在 asp.net mvc3 中没有工作

> ID：13608583
> 
> 赞同：0
> 
> 时间：2012-11-28T15:29:52.077
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我是 ASP.net MVC 的新手。我在 web.config 中将 customErrors 设置为 on，并且 global.ascx.cs 包含以下代码：

```
public static void RegisterGlobalFilters(GlobalFilterCollection filters)
{
    filters.Add(new HandleErrorAttribute());
} 
```

但是当我抛出异常时，我仍然看到显示堆栈跟踪的黄页错误。我还应该做什么？提前感谢任何帮助。

**编辑**

这是我的 web.config 内容的一部分：

```
<system.web>
    <customErrors mode="On"/>
    <httpHandlers>
      <add path="*" verb="*" type="System.Web.HttpNotFoundHandler"/>
    </httpHandlers>
    <pages
        validateRequest="false"
        pageParserFilterType="System.Web.Mvc.ViewTypeParserFilter, System.Web.Mvc,     Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"
        pageBaseType="System.Web.Mvc.ViewPage, System.Web.Mvc, Version=3.0.0.0,     Culture=neutral, PublicKeyToken=31BF3856AD364E35"
        userControlBaseType="System.Web.Mvc.ViewUserControl, System.Web.Mvc,     Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
      <controls>
        <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral,     PublicKeyToken=31BF3856AD364E35" namespace="System.Web.Mvc" tagPrefix="mvc" />
      </controls>
    </pages>
</system.web> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T22:02:13.870

If what you want to happen is that the application shows the default Error view, your customErrors config should be:

```
 <customErrors mode="On" defaultRedirect="Error" /> 
```

If you're trying to achieve something else, please provide details.

# sql-server-ce-3.5 - SQL Server Compact Edition 使用内部联接删除

> ID：13608584
> 
> 赞同：1
> 
> 时间：2012-11-28T15:29:55.613
> 
> 标签：sql-server-ce-3.5

是否可以在 SQL Server Compact Edition 中将删除与内部联接一起使用？此 SQL Server 查询的 CE 等效项是什么？

```
delete a from employee a inner join department b 
on a.departmentID=b.departmentID where b.departmentStatus='closed' 
```

# wikipedia-api - 维基百科 API 的限制

> ID：13608589
> 
> 赞同：14
> 
> 时间：2012-11-28T15:30:10.557
> 
> 标签：wikipedia-api

我读到维基百科的 API 叫做 MediaWiki。我的问题是关于这个 API。这个 API 每天/小时/分钟是否有最多调用？我似乎找不到它。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-04-02T06:36:03.590

他们声明了一些[API:Etiquette](http://www.mediawiki.org/wiki/API:Etiquette)和[API:FAQ](http://www.mediawiki.org/wiki/API:FAQ)。

> 读取请求没有硬性限制，但我们要求您体谅并尽量不要关闭网站。如果您确实危及他们网站的稳定性，大多数系统管理员保留不客气地阻止您的权利。
> 
> 如果您以串行方式而不是并行方式发出请求（即在发送新请求之前等待一个请求完成，这样您就不会同时发出多个请求），那么您肯定没问题。还可以尝试将事物合并到一个请求中（例如，在标题参数中使用多个标题，而不是为每个标题发出新请求

API FAQ 指出，每个 API 请求可以检索 50 个页面。

如果您需要离线内容（可能有点过时），您也可以使用[数据转储。](https://meta.wikimedia.org/wiki/Data_dumps)

为了在您达到任何限制时优雅地终止您的脚本，您可以使用[这些](http://www.mediawiki.org/wiki/API:Errors_and_warnings)状态消息处理 API 调用中的错误和警告。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-28T15:44:01.453

有关最新的速率限制（2022 年每秒 200 个请求），请参阅 wikimedia REST API [“条款和条件” 。](https://www.mediawiki.org/wiki/Wikimedia_REST_API#Terms_and_conditions)你打算用 Wikipedia API 做什么？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-28T23:02:08.707

如果不需要“实时样本”，最好使用[data-dump](https://meta.wikimedia.org/wiki/Data_dumps)。

# sql - 如何将单个数字值转换为 sqlite3 支持的日期格式？[值 0 填充]

> ID：13608593
> 
> 赞同：0
> 
> 时间：2012-11-28T15:30:16.920
> 
> 标签：sql, c, database, sqlite

根据 sqlite3 手册，它说格式应该是**YYYY-DD-MM。** 如果我有一个 842、2、4 的变量，以及如何转换成相同的格式？

我尝试了**strftime**和**date**这两个函数，但如果数字是单个，它不会填充值“0”。

例子：

```
'842-2-4' 
```

需要转换为

```
'0842-02-04'. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:36:45.647

```
int yyyy = 842;
int dd = 2;
int mm = 4;

char buf[11];

sprintf(buf,"%04d-%02d-%02d",yyyy,dd,mm); 
```

# asp.net - 同时使用 Kendo UI 和另一个 jQuery 版本

> ID：13608595
> 
> 赞同：4
> 
> 时间：2012-11-28T15:30:25.987
> 
> 标签：asp.net, kendo-ui, jquery

Kendo UI（Q3 2012）的当前 jQuery 版本是 1.8.2。

我想在现有站点上使用这个库。该站点已经使用 jQuery，但版本为~~1.5.0~~ 1.4.4。将此版本升级到 1.8.2 不是一种选择，因为它会破坏~~整个页面~~，某些页面上的某些组件。

他们两个可以在同一个站点/页面上同时运行吗？

Telerik.ASP.NET.Ajax 使用 jQuery 代理，确保其控件始终使用正确的 jQuery 库：

```
$telerik = $; 
```

KendoUI 有类似的东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T16:02:15.150

你应该能够做到这一点：

```
<script src="jquery-1.5.0.min.js"></script>
<!-- plugins for 1.5.0 first... -->
<script src="jqueryui.min.js"></script>
<script src="jquery.hoverintent.min.js"></script>
<!-- then your code -->
<script src="main.js"></script> 
```

其中 main.js 包含：

```
var $jqueryold = $.noConflict(true);
(function($){
    // do stuff with $
    $(document).ready(function(){
        // ...
    });
})($jqueryold); 
```

如果您的所有代码都在准备好的文档中，您也可以跳过立即执行的功能：

```
var $jqueryold = $.noConflict(true);
$jqueryold(document).ready(function($){
    // do stuff with $
    $("#tabs").tabs();
}); 
```

然而，理想的解决方案是更新旧代码以使用新版本的 jQuery。

# c++ - Qt 5 beta2、Qt Creator 2.6、MSVC 错误：Qt Creator 需要设置编译器才能构建。在套件选项中配置编译器

> ID：13608596
> 
> 赞同：4
> 
> 时间：2012-11-28T15:30:30.210
> 
> 标签：c++, qt

> **可能重复：**
> [Qt Creator 的 VC++ 编译器](https://stackoverflow.com/questions/1519743/vc-compiler-for-qt-creator)

我是新手。我正在尝试在 Windows 的 Qt 5 beta 附带的 qt creator 2.6 中编译以下代码：

```
#include <QCoreApplication>
#include <QDebug>
int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);
    qDebug() << "hello Qt5";
    return a.exec();
} 
```

我收到以下错误：

```
Qt Creator needs a compiler set up to build. Configure a compiler in the kit options.
File not found: 
```

Qt creator > tools > options > build and run > kits 如下： Name:
Auto-detect:
Desktop Qt 5.0.0 beta2 MSVC2010 32bit (SDK) (default)
Manual: (none)
重要的是没有选择编译器

当我单击“管理”按钮时，它会将我带到“编译器”选项卡：
自动检测：
Microsoft Windows SDK for Windows 7 (7.1.1700.0.30514)(x86)
Microsoft Windows SDK for Windows 7 (7.1.1700.0.30514 )(amd64)
适用于 Windows 7 的 Microsoft Windows SDK (7.1.1700.0.30514)(ia64)
适用于 Windows 7 的 Microsoft Windows SDK (7.1.1700.0.30514)()
....

Microsoft Visual C++ 编译器 10.0 (x86)
Microsoft Visual C++ 编译器 10.0 (x86)
Microsoft Visual C++ 编译器 10.0 (amd64)
...

Qt 版本选项卡如下：
自动检测：Qt 5.0.0 beta2 MSVC2010 32bit (SDK)

我正在使用：操作系统：Windows 7
首先我尝试了“Microsoft Windows SDK for Windows 7 and .NET Framework 4”，但未能编译代码。然后我安装了VS2010，也编译失败。
有谁能够帮我？？

我想发布我的 qt creator 2.6 构建和运行选项的图像，但 Stack Overflow 不允许我这样做，因为我是它的新成员。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:40:29.177

Go to the "Qt Versions" tab, select the Details button in the Helpers row and select the compiler that you want to use (it must be compatible with the compiler used to compile the Qt libraries).

# javascript - 如何进行旋转然后停止？

> ID：13608598
> 
> 赞同：2
> 
> 时间：2012-11-28T15:30:33.087
> 
> 标签：javascript, jquery, rotation

我有一个 div 开始旋转，但我不知道如何让它以某个角度停止。目前所发生的只是它继续前进。我的问题是如何让它停在像 96 的角度。

```
<script type="text/javascript">
$(function() {
var $elie = $("#super");
rotate(1);
function rotate(degree) {        
    $elie.css({ WebkitTransform: 'rotate(' + degree + 'deg)'});  
    $elie.css({ '-moz-transform': 'rotate(' + degree + 'deg)'});                      
    timer = setTimeout(function() {
     rotate(++degree);
    },2);
}
});
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T15:33:27.010

要在 96 度停止，试试这个：

```
if (degree < 96) {
    timer = setTimeout(function() {
        rotate(++degree);
    }, 2);
} 
```

[**示例小提琴**](http://jsfiddle.net/XYcAB/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T15:37:55.813

Try something like this:

```
<script type="text/javascript">

var stopAtValue = 96;

$(function() {
var $elie = $("#super");
rotate(1);
function rotate(degree) {        
    $elie.css({ WebkitTransform: 'rotate(' + degree + 'deg)'});  
    $elie.css({ '-moz-transform': 'rotate(' + degree + 'deg)'});                      
    timer = setTimeout(function() {
    if(degree==stopAtValue) {
      // do nothing
    } else {
      rotate(++degree);
    },2);
}
});
</script> 
```

# php - 用php读取大文件（超过500mb）

> ID：13608599
> 
> 赞同：0
> 
> 时间：2012-11-28T15:30:35.317
> 
> 标签：php, readfile

我需要阅读一个大文件来找到一些标签并创建一个动态表单。我不能使用`file()`或`file_get_contents()`因为文件大小。如果我使用以下代码逐行读取文件

```
set_time_limit(0);    
$handle = fopen($file, 'r');
    set_time_limit(0);
    if ($handle) {
        while (!feof($handle)) {
            $line = fgets($handle);
            if ($line) {            
             //do something.
            }
        }
    }

    echo 'Read complete'; 
```

我在 Chrome 中收到以下错误：

> 错误 101 (net::ERR_CONNECTION_RESET)

几分钟后出现此错误，因此`max_input_time`我认为不是问题。（设置为 60）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:39:13.103

你用什么浏览器软件？阿帕奇，Nginx？您应该将最大接受文件上传设置在高于 500MB 的位置。此外，php.ini 中的最大上传大小也应该大于 500MB，我认为必须允许 PHP 生成大于 500MB 的进程。（在你的 php 配置中检查这个）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T15:42:58.613

设置内存限制`ini_set("memory_limit","600M");`还需要设置超时限制

```
set_time_limit(0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T16:07:17.977

通常，在用户等待它们完成时，不应执行长时间运行的进程。我建议使用可以处理此类工作并且可以查询作业状态（运行/完成/错误）的后台作业导向工具。

我的第一个猜测是中间的某些东西由于超时而中断了连接。无论是 Web 服务器超时（PHP 无法知道）还是某些防火墙，都没有关系，PHP 会收到关闭连接的信号并且脚本停止运行。您可以使用[ignore-user-abort(true)](http://php.net/manual/en/function.ignore-user-abort.php)来规避这种行为，这与 set_time_limit(0) 一起应该可以解决问题。

需要注意的是，任何导致连接中止的原因仍然会执行，尽管脚本仍然会完成它的工作。一个非常烦人的副作用是，这个脚本可能会被并行执行多次，而它们都没有完成。

同样，我建议使用一些后台任务来执行此操作，并为最终用户（浏览器）提供一个界面来验证该任务的状态。您还可以通过 cron 作业和保存状态的数据库/文本文件自己实现一个基本的。

# jsf-2 - JSF：在具有多个提交操作的向导表单中设置属性

> ID：13608600
> 
> 赞同：0
> 
> 时间：2012-11-28T15:30:40.203
> 
> 标签：jsf-2, primefaces, javabeans

我有这种情况：在 primefaces 向导组件的第一个选项卡中，我有一些字段和一个按钮。该按钮保存一些数据，执行一些业务逻辑，并使用结果设置表单 bean（位于 ViewScope 中）的一些属性，这些属性与表单的特定字段无关。我检查了在调用应用程序阶段，这些值设置正确。
在第二个选项卡中，我有另一个按钮，它必须使用第一个选项卡设置的值执行一些业务逻辑，但是在进行一些调试时，我注意到这些值，即使与表单的任何字段无关，也会被覆盖，我认为在我单击第二个按钮时调用的更新模型阶段。

我怎样才能避免这种情况？有没有办法获得正确的行为？
我环顾四周，但找不到任何包含多个提交的向导表单的示例。感谢帮助！

```
<p:wizard widgetVar="wiz" render="true" id="wizard" showNavBar="false">
    <p:tab id="step0" title="Step0" step="0">
        <!-- Some other fields-->
        <p:commandButton value="Save and do some business logic"
            action="#{formBean.save}"
            oncomplete="wiz.loadStep (wiz.cfg.steps [1], false)">
        </p:commandButton>
    </p:tab>
    <p:tab id="step1" title="Step1" step="1">
        <!-- Some other fields-->
        <p:commandButton value="Second button: use the previous informations"
            action="#{formBean.doSomething}"
            oncomplete="wiz.loadStep (wiz.cfg.steps [2], false)">
        </p:commandButton>
    </p:tab>
</p:wizard> 
```

**编辑：**
举个例子，我可以说我的 bean 包含一个业务逻辑对象。在第一次提交期间，该对象被保存，因此数据库（Mysql 和 Hibernate）为其分配了一个渐进式 ID。
在第二次提交期间，当我尝试读取此 id 时，该值为零，所以很明显，我得到了一个错误。

就像是：

```
public class FormBean{
      private BLObject object;
      // Constructor Getters and setters

      // Method executed during the first submission
      public void save(ActionEvent actionEvent) {
          //Save the object and set his id
          PersistanceClass.getInstance().save(object);
      }

      // Method executed during the second submission
      public void doSomethingWhitTheId(ActionEvent actionEvent) {
          //Access the id... id=0 returned
          int id = object.getId();

      }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:47:44.213

问题是，从一个页面导航到另一个页面，Primefaces 向导使用字符串来标识选项卡。返回此 String 的值（非 null 或 void）会使视图 bean 超出范围。当你有一个简单的表单时没关系，但是如果你想在流程中设置一些与表单元素无关的属性，它们会在选项卡更改期间被覆盖。
我解决了向表单添加链接到我想要保留的属性的隐藏参数的问题。

```
<h:inputHidden value="formBean.idToPreserve" id="inputHidden" /> 
```

# javascript - 是否可以使用 pure.js 插入新的 HTML

> ID：13608602
> 
> 赞同：2
> 
> 时间：2012-11-28T15:30:52.210
> 
> 标签：javascript, pure-js

我正在寻找从 JSON 数据文件开始呈现 HTML 模板的东西。

问题是我正在搜索的插件/框架/库必须`<html>`从非常简单的东西开始创建自己的模板结构。

例如，我有一个像这样的简单 html：

```
<ul>
  <li><li>
</ul> 
```

和这样的json：

```
{
   "mylist":{
      "listone": 
          {"img" : "/img/pippo.gif" ,
           "text1" : "pluto",
           "text2" : "topolino",
           "link" : "http://www.sito.it"        
           },
      "listtwo":
          {"img" : "/img/pippo.gif" ,
           "text1" : "pluto",
           "text2" : "topolino",
           "link" : "http://www.sito.it"        
          }
   }
} 
```

我希望数据像这样在我的文档中呈现：

```
<ul>
  <li>
    <img src="/img/pippo.gif" />
    <h1>pluto</h1>
    <p><a href="http:://www.sito.it>topolino</a></p>
  </li>
</ul> 
```

如果我已经开始了我可以`pure.js`像往常一样使用的整个结构，但是，由于我在 中没有内部标签，我可以用指令`li`注入 HTML 代码吗？`pure.js`还是只能使用`JsRender`或类似？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T13:24:41.253

纯 JS 允许您使用带有[指令](http://beebole.com/pure/documentation/using-js-functions-with-directives/)的 JavaScript 函数。无论从该函数返回什么，都将用作指令的值。

> 该函数的参数是一个具有以下属性的对象：
> 
> *   **context**：这是为转换传递的完整 JSON
> *   **item*** : 当前循环项
> *   **items*** : 循环的所有项目
> *   **pos***：循环中的当前位置。迭代数组时的整数，迭代集合的属性名

以下示例显示了如何执行此操作。

```
var data = {
  "img": "/img/pippo.gif",
    "text1": "pluto",
    "text2": "topolino",
    "link": "http://www.sito.it"
}

var directive = {
  'li': function (arg) {
    return "<img src=\""+arg.context.img+"\" /><h1>"
      +arg.context.text1+"</h1><p><a href=\""
      +arg.context.link+"\">"+arg.context.text2+"</a></p>"
  }
}

$('ul').render(data, directive); 
```

给定的 HTML：

```
<ul><li></li></ul> 
```

将变为如下（渲染后）：

```
<ul>
  <li>
    <img src="/img/pippo.gif">
    <h1>pluto</h1>
    <p>
      <a href="http://www.sito.it">topolino</a>
    </p>
  </li>
</ul> 
```

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T17:23:44.477

这比回答更建议。我会建议您反对您要完成的工作。用于模板的强大概念是将 HTML 与代码分开。当您保持这种分离时，您可以弄清楚如何编写代码并理解遵循这种分离的代码。这样代码就会更容易编写和理解，不仅是你自己，其他遵循同样原则的人也是如此。

在您的示例中，您的 HTML 模板应如下所示：

```
<ul>
  <li>
    <img src="/img/pappo.gif" />
    <h1>marte</h1>
    <p><a href="http:://www.sito.it>guille</a></p>
  </li>
</ul> 
```

和这样的json：

```
{
   "mylist":{
      "listone": 
          {"img" : "/img/pippo1.gif" ,
           "text1" : "pluto1",
           "text2" : "topolino1",
           "link" : "http://www.sito1.it"       
           },
      "listtwo":
          {"img" : "/img/pippo2.gif" ,
           "text1" : "pluto2",
           "text2" : "topolino2",
           "link" : "http://www.sito2.it"       
          }
   }
} 
```

最终应该是这样的：

```
<ul>
  <li>
    <img src="/img/pippo1.gif" />
    <h1>pluto1</h1>
    <p><a href="http:://www.sito1.it>topolino1</a></p>
  </li>
  <li>
    <img src="/img/pippo2.gif" />
    <h1>pluto2</h1>
    <p><a href="http:://www.sito2.it>topolino2</a></p>
  </li>
</ul> 
```

我可以解释如何做到这一点的最简单方法是让您的 JSON 数据结构几乎一对一地遵循您的 HTML。巨大的区别在于，一旦完成，模板将很容易编写，并且编写 JSON 转换最终将比编写 HTML 转换更容易。此外，您的 HTML 模板将 100% 可由浏览器呈现，并且 100% 可由非程序员修改。这里的关键是，尽管您的最终产品是 HTML，但采用 JSON 对象路由会产生更好的代码。它不会消除创建 JSON 的实际问题，您需要调整、学习和找到工具来做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T14:59:13.643

当然有可能。搜索“javascript DOM createElement”，您会发现大量示例（包括整个 stackoverflow）。

# android - 在 ListView 中移动

> ID：13608603
> 
> 赞同：0
> 
> 时间：2012-11-28T15:30:53.143
> 
> 标签：android, listview

在我的 android 应用程序中，我有一个加载了很多项目的 ListView。我希望用户可以在列表中快速移动。我已经看到在某些应用程序中，当加载列表并且用户开始滚动时，屏幕右侧会出现一个图标，该图标可用于在列表中快速移动。

我怎样才能做到这一点？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:32:53.637

你想要[android:fastScrollEnabled="true"](http://developer.android.com/reference/android/widget/AbsListView.html#attr_android%3afastScrollEnabled)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T15:35:54.320

[请在此处](http://vardhan-justlikethat.blogspot.in/2012/06/android-android-listview.html)查看 Vardhan 为 android 实现的 Fast Scroll 。

> 如果您希望能够自定义您的快速滚动条，例如选择您自己的滚动条图像来显示，我推荐使用这个源：
> 
> [https://github.com/nolanlawson/CustomFastScrollViewDemo/](https://github.com/nolanlawson/CustomFastScrollViewDemo/)
> 
> 基本上，您的列表视图适配器必须实现一个sectionindexer。如果您不想使事情复杂化并在整个列表长度上提供简单的快速滚动，则此部分索引器可以非常精简。
> 
> fastscroller 的直接来源在这里：
> 
> [https://github.com/nolanlawson/CustomFastScrollViewDemo/blob/master/src/com/nolanlawson/customfastscrollviewdemo/CustomFastScrollView.java](https://github.com/nolanlawson/CustomFastScrollViewDemo/blob/master/src/com/nolanlawson/customfastscrollviewdemo/CustomFastScrollView.java)
> 
> 将此视图放在您的列表视图周围（将您的列表视图嵌套在您的 xml 布局文件中的此视图中）并在您的列表视图上设置 android:fastScrollEnabled="true"。
> 
> 您可能还想查看以前的答案： [ListAdapter 和 SectionIndexer 的快速滚动显示问题](https://stackoverflow.com/questions/3225092/fast-scroll-display-problem-with-listadapter-and-sectionindexer)

资料来源：[如何在 android 中使用快速滚动？](https://stackoverflow.com/questions/9374830/how-to-use-fast-scroll-in-android)

# json - 无法在 extjs 4 的 Treepanel 中显示 json 数据

> ID：13608604
> 
> 赞同：2
> 
> 时间：2012-11-28T15:30:55.943
> 
> 标签：json, extjs4.1, treepanel

我正在努力在 EXTJS 4 TreePanel 中显示 JSON 数据。但我的树没有显示任何数据。请让我知道我错在哪里。让我在下面发布我的代码：

查看部分：它有树面板

```
xtype: 'treepanel', 
title: 'Standard Geographies',
height: 250,
width: 310,
store: 'Data',  
border: 1,          
displayField: 'name',
useArrows: true,
rootVisible: true,
multiSelect: true,
preventHeader: true,                                            
renderTo: Ext.getBody(),

columns: [{
    xtype: 'treecolumn',
text: 'Standard Geographies',
flex: 1,
sortable: false,
//renderer : change,
dataIndex: 'name'
}], 
```

模型部分：使用 json 数据

```
Ext.define('TA.model.TAModel', {
    extend: 'Ext.data.Model',
    fields: ['name','typeId'],
//fields: ['abbr','type'],['name','typeId']

    proxy: {
        type: 'ajax',
        url : 'data/StandardGeoTree.json',
        actionMethods: {
            read: 'POST'
        },
        reader: {
            type: 'json',
            root: 'geographyOptions' 
        },
    }   
 }); 
```

商店部分：我希望商店部分一切都好

```
Ext.define('TA.store.Data', {
//extend: 'Ext.data.Store',
//model: 'TA.model.TAModel',

extend: 'Ext.data.TreeStore',
model: 'TA.model.TAModel', 
autoSync: true,
autoLoad: true,     
listeners: {
    load:function(){
        console.log('Schemes Data store loaded');
    }
},      
proxy: {
    type: 'ajax',
    //url : 'data/StandardGeoTree.json',
    api: {
        //read: 'data/StandardGeo.json',
        read: 'data/StandardGeoTree.json',
        //update: 'data/updateTradeArea.json'
    },
    reader: {
        type: 'json',
        root: 'root',
        successProperty: 'success',
        idProperty : 'typeId'
    }
},  
root : {
    text: 'Root',
    id: 'typeId',
    expanded : true,
    loaded : true,
    children: []
}
}); 
```

JSON

```
{
"success": true,
"root" : [
    {   
        "name": "001-USA", 
        "typeId" : "1",

        "children":[        
            {"name": "USA", "typeId" : "1", "leaf":"true"},
            {"name": "State", "typeId" : "2", "leaf":"true"},
            {"name": "DMA", "typeId" : "3", "leaf":"true"},
            {"name": "CSA", "typeId" : "4", "leaf":"true"},

            ]
    }
]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T03:31:10.747

树组件的存储配置其实不需要这么复杂。例如下面的简单商店声明就足够了：

```
var treestore = Ext.create('Ext.data.TreeStore', {
    proxy: {
        type: 'ajax',
        url: 'data/StandardGeoTree.json'
    }
}); 
```

`store: treestore`然后在您的树配置集中`rootVisible: false`

最后，商店期望 json 以这种格式响应：

```
[{
    "text": "To Do", 
    "cls": "folder",
    "expanded": true,
    "children": [{
        "text": "Go jogging",
        "leaf": true
    },{
        "text": "Take a nap",
        "leaf": true
    },{
        "text": "Climb Everest",
        "leaf": true
    }]
}] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T15:35:39.160

在您的 JSON 中，您的根属性必须与您的孩子相似。所以它要么是“根”，要么是“孩子”，但不是两者兼而有之。有关完整说明，请参阅[此问题](https://stackoverflow.com/questions/11865288/treestore-empty-is-json-valid/11881664#11881664)。

所以只要你坚持：

```
reader: {
    type: 'json',
    root: 'root',
    successProperty: 'success',
    idProperty : 'typeId'
} 
```

您的 JSON 应如下所示：

```
{
"success": true,
"root" : [
    {   
        "name": "001-USA", 
        "typeId" : "1",

        "root":[        
            {"name": "USA", "typeId" : "1", "leaf":"true"},
            {"name": "State", "typeId" : "2", "leaf":"true"},
            {"name": "DMA", "typeId" : "3", "leaf":"true"},
            {"name": "CSA", "typeId" : "4", "leaf":"true"},

            ]
    }
]
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T07:21:53.983

没有什么可以作为解决方案。所以我不得不在我的视图中编写下面的代码部分来解决我的问题。我正在粘贴下面的代码部分：

```
 var treeStore = Ext.StoreManager.lookup('Data');
    treeStore.load(); 
```

但我希望我的商店自动加载。如果您有任何自动加载商店的解决方案，请告诉我。

# c++ - Oracle SQL 删除位于 Array/CArray/DataStructure 中的值

> ID：13608607
> 
> 赞同：1
> 
> 时间：2012-11-28T15:31:04.227
> 
> 标签：c++, sql, oracle, mfc

我有带有 ID 的 CArray/CMap。
SQL 表上有：ID、Value、StartTime、EndTime。
我收到 StartTime 和 EndTime 并且需要删除该 CArray 上出现的所有 ID。
因此需要查询，例如：
“从表中删除 id in (list[0], list[1], list[2]. ... list[n]) 和 T1 和 T2 之间的时间”
我的问题是如何实现“in (..)”如何传输 CArray 上的 ID？

将 CDatabase.executeSQL(QUERY) 与 CommitTrans 和 CommitTrans 一起使用

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T00:45:34.360

你可以做的很简单（假设你有 CArray 并且它被称为 arId）：

```
CString sql, item;
sql = _T("delete from table where id ");
if(arId.GetCount() == 1)
{
  item.Format(_T(" = %d"), arId[0]);
  sql += item;
}
else
{
  for(int i = 0; i < arId.GetCount(); ++i)
  {
    if(i == 0) sql += _T("IN (");
    item.Format(_T("%d"), arId[0]);
    if(i == arId.GetCount()-1)
      item += _T(")");
    else
      item += _T(", ");
    sql += item;
  }
}
CDatabase.executeSQL(sql); 
```

对于 CMap，将 for(i = 0;...) 替换为 POSITION pos = mapId.GetStartPosition() 等。

# cakephp - CakePHP Plugins - 为插件实现配置文件的最佳方式？

> ID：13608613
> 
> 赞同：1
> 
> 时间：2012-11-28T15:31:11.533
> 
> 标签：cakephp, cakephp-2.0

我正在开发一个插件，并试图找到为其设置一组默认配置选项的最佳方法，这些选项在加载插件时自动使用，但也能够为特定应用程序自定义它们。

我正在努力为 Cake 2.0+ 找到任何关于此的好的文档

大多数解决方案似乎都涉及在主应用程序引导程序中配置某些内容或在主应用程序中创建配置文件，这似乎是个坏主意，因为如果您忘记做任何这些事情或没有正确地做这些事情，插件不起作用，它依赖于“外部”应用程序，这似乎不正确。

同时，让用户在插件中编辑某种配置文件似乎也是一个坏主意，因为他们会篡改插件本身。

最好的方法是什么（或者每个人通常都做什么）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-28T08:43:43.757

看看这个

[http://api.cakephp.org/2.4/class-Configure.html](http://api.cakephp.org/2.4/class-Configure.html)

我试图弄清楚同样的事情，然后我在 Twitter 插件中看到了它。他们在插件文件夹中有自己的配置文件

您需要在文件中放置一个 $config 变量。它什么也没做，但如果你不这样做，Cake 会抱怨。

此设置适用于我目前正在开发的插件。

例子：

/Plugin/CakeCommerce/config/config.php

```
$config = '';
Configure::write('CC.default_email' , array('admin@server.com'=>'Server Admin')); 
```

加载配置文件。在插件 AppController 中的 __construct 调用中执行此操作。

```
class CakeCommerceAppController extends AppController {
    public function __construct($request = null, $response = null)
    {
        parent::__construct($request, $response);
        Configure::load('CakeCommerce.config' , 'default' , false); 
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T15:54:06.597

你应该做的是将你的配置设置放在插件引导文件中`Plugins/PluginDirectory/Config/bootstrap.php`。

然后在加载插件时，用户可以选择是否使用插件的引导文件（参见[CookBook](http://book.cakephp.org/2.0/en/plugins.html#plugin-configuration)）。虽然这似乎是全部或全部，但您确实具有始终可以使用默认配置设置的优势，因此用户不必自己创建任何配置设置。

* * *

我[在面包店找到了一篇插件开发文章](http://bakery.cakephp.org/articles/sky_l3ppard/2010/01/31/plugin-development-tips-and-tricks)，发现了这个注释：

> **注意**：请注意配置设置，因为插件配置文件将覆盖匹配的应用程序设置，最好使用插件前缀命名设置

这对我来说表明您不能从应用程序的引导文件中覆盖单个插件设置。用户将不得不修改插件的引导文件。

（这篇文章很旧，似乎是针对旧版本的蛋糕，所以我不知道最近的版本是否发生了变化。像你一样，我很难找到关于这个主题的很多信息）

# powershell - 选择图像的大小 - PowerShell

> ID：13608614
> 
> 赞同：0
> 
> 时间：2012-11-28T15:31:12.547
> 
> 标签：powershell, powershell-2.0

我有这段代码可以从 prtscreen 创建图像：

```
$Bitmap = new-object System.Drawing.Bitmap (2200,2200)
$Size = New-object System.Drawing.Size 2400,1800
$FromImage = [System.Drawing.Graphics]::FromImage($Bitmap)
$FromImage.copyfromscreen(0,0,0,0, $Size, ([System.Drawing.CopyPixelOperation]::SourceCopy))
$Bitmap.Save("c:\temp\screenshot.jpg",([system.drawing.imaging.imageformat]::bmp)) 
```

我的问题是我需要创建大尺寸图像。我可以使用 imageformat BMP 来做到这一点，但现在我需要以 MB 为单位选择图像的大小。我需要从 1 到 50 MB 中进行选择。

你能帮助我吗 ？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:11:24.163

使用 BMP 格式，创建文件的大小将基于位图的宽度/高度。我还注意到您将此图像保存为 JPEG。在这种情况下，您可能应该使用`[Drawing.Imaging.ImageFormat]::Jpeg`.

尝试不同的 PixelFormat，例如：

```
$Bitmap = new-object System.Drawing.Bitmap (2200,2200,'Format24bppRgb') 
```

# azure - 为什么我的静态构造函数在 Azure Web 角色中被调用了两次？

> ID：13608617
> 
> 赞同：3
> 
> 时间：2012-11-28T15:31:19.563
> 
> 标签：azure, azure-web-roles

我正在尝试为在 Azure Web 角色中运行的 WCF 服务初始化我的依赖项注册，但我看到一个非常不寻常的行为，即我的类的静态构造函数被调用了两次。

这是`Dependencies`我用作应用程序依赖项的注册表点的类。

```
public static class Dependencies
{
    private static IUnityContainer container;

    static Dependencies()
    {
        Dependencies.container = new UnityContainer();
    }

    public static IUnityContainer Container
    {
        get
        {
            ...
        }

        set
        {
            ...
        }
    }

    public static void ConfigureContainer()
    {
        var container = new UnityContainer();

        // Configure container.

        Dependencies.container = container;
    }
} 
```

在我的重载中`RoleEntryPoint.OnStart()`，我调用了一个静态`ConfigureContainer`方法来设置容器，并注册了我的依赖项：

```
public override bool OnStart()
{
    // Configure container for dependency resolution.
    Dependencies.ConfigureContainer();

    return base.OnStart();
} 
```

我的期望是`Dependencies`类的静态成员应该由这段代码初始化，并且可以用于应用程序的组件。

我所看到的（使用断点和 VS2012 调试器）是静态构造函数`Dependencies`被调用了两次：一次是在应用程序的原始初始化期间，一次是在**第一次**请求服务期间。后续请求不会调用静态构造函数（如预期的那样）。

我很想听听为什么运行时会以这种方式运行以及我应该做什么来生成我的静态依赖项注册表的解释。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T19:02:19.813

这可能是因为当您在完整的 IIS 中托管 webrole 时，RoleEntryPoint 代码和 web 应用程序的其余部分在不同的 AppDomain 中运行。

[http://blogs.msdn.com/b/windowsazure/archive/2010/12/02/new-full-iis-capabilities-differences-from-hosted-web-core.aspx](http://blogs.msdn.com/b/windowsazure/archive/2010/12/02/new-full-iis-capabilities-differences-from-hosted-web-core.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T09:13:34.637

默认情况下，您在 Web 角色中使用“完整 IIS”模式，您将获得两个进程 - 用于处理 HTTP 请求的 IIS 工作进程和用于运行`RoleEntryPoint`后代代码的角色工作进程。根据您的代码的设计方式，您最终可能会在两个进程中使用该静态构造函数，然后它将被调用两次。

# android - 将带有日文文件名的文件推送到android模拟器中安装的sdcard

> ID：13608620
> 
> 赞同：1
> 
> 时间：2012-11-28T15:31:29.127
> 
> 标签：android, android-emulator, android-sdcard

我目前正在开发一个 mp3 播放器，android 应用程序。我几乎完成并准备一些测试。所以我需要将一些mp3文件直接推送到sdcard（在命令行中使用adb，更容易）。除了具有非英文文件名的 mp3 文件外，我可以推送任何 mp3 文件。

例：テスト.mp3、汉字.mp3

而且我还尝试通过 DDMS 的文件资源管理器创建文件夹，文件夹名称为日语，但无法做到。

有什么方法可以将这些 mp3 推送到模拟器的 sd 卡或创建日文文件夹？

我正在以下环境中工作。

Windows 7 Home 64 位（日文操作系统）。

Eclipse 作为 IDE。

Android SDK API 16.

SDK 工具 Rev21

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T00:18:43.510

我没试过，但看看这个程序：

[https://github.com/knhnnh/adbpushex](https://github.com/knhnnh/adbpushex)

它似乎首先使用临时非多字节名称复制文件，然后在设备上重命名为其原始日文名称。即使该程序不能与模拟器一起使用，您也可以了解如何在模拟器上获取多字节文件名（例如：先用 ASCII 命名，然后以某种方式从模拟器本身重命名它们）。

# perl - 如何在perl中将°解码为度ASCII字符

> ID：13608625
> 
> 赞同：0
> 
> 时间：2012-11-28T15:31:44.780
> 
> 标签：perl

我试过使用：

```
my $nomIHMBloc = $1;
print decode_entities($nomIHMBloc), "\n";
$nomIHMBloc = decode_entities($nomIHMBloc), "\n"; 
```

但没有运气。有什么问题吗？我收到错误：

```
Undefined subroutine &main::decode_entities called at "same perl file" 
```

谢谢你的帮助。

PS：确切的代码在这里：

```
 while($blocVars =~ m/\[(.*?)\]/g){
                binmode STDOUT, ':utf8';
                my $nomIHMBloc = $1;
                print decode_entities($nomIHMBloc), "\n";
                $nomIHMBloc = decode_entities($nomIHMBloc);
                print "nomIHMBloc::::::::$nomIHMBloc=============$1\n";
                print "insert into ASSOC_VAR_BLOC (ID_BLOC, ID_VAR, DOC_ID_MAQUETTAGE) VALUES ($id_bloc, (SELECT ID_VAR FROM VARIABLE WHERE NOM_IHM='$nomIHMBloc'),'$docId')\n";
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T16:58:30.877

在这里工作正常：

```
#!/usr/bin/env perl

use strict;
use warnings;
use open ':locale';
use HTML::Entities;

# example text
'42&deg;' =~ /(.*)/; # 42°

# your code
my $nomIHMBloc = $1;
print decode_entities($nomIHMBloc), "\n";
#$nomIHMBloc = decode_entities($nomIHMBloc), "\n"; 
```

您的最后一行包含语法错误。如果要在分配给标量时添加换行符，请使用字符串连接运算符`.`。

```
$nomIHMBloc = decode_entities($nomIHMBloc) . "\n"; 
```

它之所以有效，`print`是因为它是一个列表运算符并接受一个参数列表，然后将它们与*输出字段分隔符* `$,`（请参阅[perlvar](http://p3rl.org/perlvar)）连接起来，该分隔符默认包含空字符串，并且充当简单的字符串连接。但是，输出是

42°

# python - 如何将大数据导入 NDB

> ID：13608636
> 
> 赞同：-1
> 
> 时间：2012-11-28T15:32:12.250
> 
> 标签：python, google-app-engine, app-engine-ndb

我有一个 NDB 模型：

```
class mymodel(ndb.Model):
  id =ndb.IntegerProperty(indexed=True)
  region_id = ndb.IntegerProperty()
  name = ndb.TextProperty()
  address =ndb.TextProperty()
  is_enabled   = ndb.BooleanProperty() 
```

我的应用程序是高复制类型，我想从本地数据中导入超过 3,000,000 条记录。我尝试通过 csv 文件导入，每次可以导入 3,000-4,000 条记录。请告诉我这些数据的正确方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:58:46.010

[远程 api](https://developers.google.com/appengine/docs/python/tools/remoteapi)似乎是一个完美的候选者。

# mysql - Liferay 不再显示 UTF8 字符

> ID：13608638
> 
> 赞同：1
> 
> 时间：2012-11-28T15:32:21.737
> 
> 标签：mysql, linux, liferay, mysql-workbench

我刚刚从 mysql workbench 进行了数据库恢复，发现 liferay 不显示 UTF-8 规范字符，例如 ÅÄÖ，这些字母显示为问号。我想知道是否有人知道这个问题的解决方案？导入 sql 文件时是否必须指定字符集？如果是这样，我该如何在 mysql 工作台中做到这一点？

老实说，我不知道 mysql 还原是否对发生的事情有直接影响，我只是在描述我在问题发生之前所做的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T23:18:08.323

如果您还原到新数据库，请确保此数据库默认字符集为 UTF-8：

```
create database lportal character set utf8; 
```

然后将您的数据导入该表。

让我也借此机会链接我最喜欢的网站以生成出色的 UTF-8 测试数据：http://www.fliptitle.com [-](http://www.fliptitle.com)如果您需要测试数据，供只知道 ASCII 语言但仍需要立即反馈正确编码的人使用他们能够解释的数据。你似乎不是他们中的一员，但我想这个小组中的其他人可能会在以后偶然发现这一点。

# java - 是否可以找到 XToolkit 的描述？

> ID：13608641
> 
> 赞同：0
> 
> 时间：2012-11-28T15:32:30.953
> 
> 标签：java, solaris

我尝试将我们的项目从 jre1.6 迁移到 jre1.7。我们使用 uspec4j 在 Solaris 上测试 swing GUI。并且 uspec 在 jre1.7 上不能正常工作。所以，我正在修复 Uspec4j，它有助于一些测试。但是有些问题仍然存在，它们属于 XToolkit。我找到了一些 src：

[http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/sun/awt/X11/XToolkit.java#XToolkit.getScreenInsets%28java.awt.GraphicsConfiguration%29](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/sun/awt/X11/XToolkit.java#XToolkit.getScreenInsets%28java.awt.GraphicsConfiguration%29)

但这还不够。我不明白如何模拟 XNETProtocol 的激活。（也许它不会有帮助，这只是一个想法）

```
 XNETProtocol netProto = XWM.getWM().getNETProtocol();
669         if ((netProto == null) || !netProto.active())
670         {
671             return super.getScreenInsets(gc);
672         } 
```

也许 XToolkid 代码的一些描述会对我有所帮助。但我无法通过谷歌找到它。也许你知道我在哪里可以找到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:36:31.687

来自[维基百科](http://en.wikipedia.org/wiki/X_Toolkit_Intrinsics)：

> X Toolkit Intrinsics（也称为 Xt，代表 X 工具包）是 X 窗口系统中使用的库。更准确地说，它是一个使用低级 Xlib 库并提供友好的（面向对象的）API 来开发具有图形小部件的 X11 软件的库。它可以在 C 或 C++ 语言中使用。

这（PDF 链接！）是直接来自 X.org的[XToolkit Intrinsics 手册。](http://www.x.org/docs/Xt/intrinsics.pdf)正如您将看到的，它是一个强大的 API，我怀疑您对它所做的任何事情都不是微不足道的。

# android - Android 上的 SQLite 性能选择

> ID：13608643
> 
> 赞同：3
> 
> 时间：2012-11-28T15:32:32.213
> 
> 标签：android, sqlite

我正在使用 SQLite 在 Android 上开发应用程序。我对 SQLite 很陌生，所以我想问一下设计选择。

如果您想将一个对象（代表数据库中的一行）从一个活动传递到另一个活动，以下哪一项更快和/或资源效率更高？

*   将对象序列化为 JSON，有意发送并在另一端反序列化
*   在其他活动中仅发送记录 ID 并再次从数据库中提取记录

无论哪种情况，这两种选择之间的性能差异是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:36:10.303

这确实取决于行的大小。如果它相对较小（少数原语），则传递序列化数据并不是什么大问题，尽管您可能希望使用比 JSON 更轻的东西。如果您有大量数据（blob 等），那么从磁盘中获取行与序列化和反序列化对性能的影响可能甚至更小。理想情况下，您只需获取一次数据并将其存储在一个单例中，以供不同的活动（可能是 POJO）访问。

# ruby-on-rails - 从其他控制器访问嵌套模型

> ID：13608652
> 
> 赞同：0
> 
> 时间：2012-11-28T15:33:00.050
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个模型：

用户有_许多食谱，食谱属于_用户

食谱有_许多评论，评论属于_食谱

我的食谱嵌套在评论中，我可以毫无问题地访问 Recipes_controller 上的评论。

如果我尝试从用户访问它，我得到未定义的方法错误。

我的用户控制器：

```
@user = User.find(params[:id])
@recipes = @user.recipes.paginate(page: param[:page])
@comments = @user.recipes.comments 
```

如何访问用户的评论？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:35:32.573

@user.recipes 是该用户的所有食谱的数组。您必须选择一个特定的来调用“评论”。就像是

```
@user.recipes.first.comments 
```

# .net - MSBuild - 复制所有 Bin 输出 - 调试|发布

> ID：13608653
> 
> 赞同：4
> 
> 时间：2012-11-28T15:33:06.707
> 
> 标签：.net, msbuild, build-script

我有以下 MSBuild 目标文件（如下）。

我将如何在默认之后添加一个额外的步骤，将所有项目`\bin\Debug`或`\bin\Release`从其中一个项目复制到一个名为 的文件夹，该文件`binaries`夹与文件运行位于同一文件夹中`.targets`？

如果我能让它更聪明地了解它是否使用 Debug 或 Release 更好。

**更新**：我已经更新了我到目前为止得到的代码。能够以两种操作模式运行启动此 msbuild 的 .bat 文件仍然会很不错：Release 和 Debug，然后在 Binaries 文件夹中有两个不同的文件夹

```
 <ItemGroup>
    <SolutionFiles Include=".\**\*.sln"/>
  </ItemGroup>

  <ItemGroup>
    <DebugBinFiles Include=".\src\Sample.Core\Sample.Core.Infrastructure\bin\Debug\**\*.*"/>
  </ItemGroup>

  <ItemGroup>
    <ReleaseBinFiles Include=".\src\Sample.Core\Sample.Core.Infrastructure\bin\Release\**\*.*"/>
  </ItemGroup>

  <Target Name="Default" AfterTargets="AfterBuild">
    <MSBuild Projects="@(SolutionFiles)" Condition=""/>
  </Target>

  <Target Name="AfterBuild">
    <Copy SourceFiles="@(BinFiles)" DestinationFolder=".\binaries\Debug" />
  </Target>

</Project> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T20:17:25.620

1.  在您的目标文件`Configuration`属性默认值中定义
2.  在输出路径中使用此属性值
3.  而不是`AfterTargets`use `DependsOnTargets`，而是作为默认目标定义最后一个，因此目标将以相同的顺序执行，但只是以相反的顺序链接
4.  将下面的 XML 保存为`final.targets`或您希望如何命名
5.  在命令行中运行 msbuild`final.targets /p:Configuration=RELEASE`以进行发布配置构建

```
<Project ToolsVersion="4.0"
         xmlns="http://schemas.microsoft.com/developer/msbuild/2003"
         DefaultTargets="CopyBinOutput">

   <PropertyGroup>
      <!-- define defaults -->
      <Configuration Condition="$(Configuration)==''">DEBUG</Configuration>
   </PropertyGroup>

   <Choose>
      <When Condition=" '$(Configuration)'=='DEBUG' ">
         <ItemGroup>
            <BinFiles Include=".\src\Sample.Core\Sample.Core.Infrastructure\bin\Debug\**\*.*" />
         </ItemGroup>
      </When>

      <When Condition=" '$(Configuration)'=='RELEASE' ">
         <ItemGroup>
           <BinFiles Include=".\src\Sample.Core\Sample.Core.Infrastructure\bin\Release\**\*.*"/>
          </ItemGroup>
      </When>
  </Choose>

  <Target Name="EntryPointTarget">
      <Message Text="EntryPointTarget started" />
      <!-- here is build your solution -->
  </Target>

  <Target Name="CopyBinOutput" DependsOnTargets="EntryPointTarget">
      <Message Text="CopyBinOutput started" />
     <Copy SkipUnchangedFiles="True" OverWriteReadOnlyFiles="true"
           SourceFiles="@(BinFiles)" 
           DestinationFiles="@(BinFiles->'.\binaries\$(Configuration)\%(RecursiveDir)%(Filename)%(Extension)')" />

      <Message Text="CopyBinOutput finished, destination is .\binaries\$(Configuration)" />
  </Target>

</Project> 
```

# security - Wordpress 链接到受密码保护的内容

> ID：13608662
> 
> 赞同：1
> 
> 时间：2012-11-28T15:33:31.557
> 
> 标签：security, wordpress

我刚刚重做了我公司的 Joomla 网站以在 WP 平台上工作。我的问题是有些内容需要登录才能访问。在我们的时事通讯中，我需要链接到需要登录的内容。目前，如果我链接到该内容并且客户未登录，他们会收到 404 错误。将内容公开访问不是一种选择。

是否有插件或某种方式发生这种情况：

将时事通讯链接到特定内容 --> 使用凭据登录 --> 重定向到特定内容

非常感谢您对此的帮助！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T16:44:12.327

在管理页面的帖子/页面编辑表单中，“发布”字段上有一个“可见性”选项。只需检查受密码保护的密码，您就可以使用密码隐藏页面/帖子。

希望有帮助..

# .net - 自定义属性 blob（字符串）使用哪种格式？

> ID：13608665
> 
> 赞同：3
> 
> 时间：2012-11-28T15:33:39.577
> 
> 标签：.net, attributes, blob, il

所以，我试图弄清楚带有 blob 的自定义属性是如何工作的。二进制格式似乎很……奇怪。

来自 ildasm 的示例

```
.custom instance void [mscorlib]System.Runtime.Versioning.TargetFrameworkAttribute::.ctor(string) = 
       ( 01 00 19 57 69 6E 64 6F 77 73 50 68 6F 6E 65 2C   // ...WindowsPhone,
        56 65 72 73 69 6F 6E 3D 76 38 2E 30 01 00 54 0E   // Version=v8.0..T.
        14 46 72 61 6D 65 77 6F 72 6B 44 69 73 70 6C 61   // .FrameworkDispla
        79 4E 61 6D 65 11 57 69 6E 64 6F 77 73 20 50 68   // yName.Windows Ph
        6F 6E 65 20 38 2E 30 )                            // one 8.0 
```

这是什么格式的？我不太清楚这是否是真正的 UTF-8，为什么前两个字节是 0x01 和 0x00？此外，反编译器会选择它作为属性：

```
[assembly: TargetFramework("WindowsPhone,Version=v8.0", FrameworkDisplayName = "Windows Phone 8.0")] 
```

这一切究竟是如何运作的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T16:31:42.280

其格式在[ECMA Common Language Infrastructure 标准](https://www.ecma-international.org/publications/files/ECMA-ST/ECMA-335.pdf)中列出，特别是标题为“CustomAttribute：0x0C”的第 II.22.10 节（第 216 页）。

它以“这仅包含信息性文本”部分开头：

> 所有二进制值都以小端格式存储...

并在第 6 点继续：

> 6.  以下规则适用于值“blob”的整体结构（§II.23.3）：
> 
> *   Prolog 应为 0x0001 [错误]

这就是为什么您会看到`[ 0x01, 0x00 ]`.

文本的其余部分继续指定其余部分的布局方式，但这一切都在规范中。

还有一个[深入的分析](http://www.simple-talk.com/blogs/2011/06/03/anatomy-of-a-net-assembly-custom-attribute-encoding/)，显示了它在 CLR 中的表示方式以及它如何影响属性 blob 的存储。

# ruby-on-rails - 使用 Nokogiri 读取格式错误的 XML：URL 字段中未转义的 & 符号

> ID：13608666
> 
> 赞同：2
> 
> 时间：2012-11-28T15:33:47.597
> 
> 标签：ruby-on-rails, ruby, xml, nokogiri

我正在尝试在我的 rails 项目中使用 Nokogiri 从第三方读取 XML 文件。我无法解析的节点之一包含一个带有非转义 & 符号的 URL（如`foo.com/index.html?page=1&query=bar`）

我知道这被认为是格式错误的 XML，并且 Nokogiri 无论如何都会尝试解析它，从而导致`foo.com/index.html?page=1=bar`.

如何获取完整的 URL？我可以调整 Nokogiri 吗？您会进行搜索和替换预运行还是最佳实践？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-10T18:33:46.703

在使用包含 & 符号的图像链接解析 SVG 时遇到了同样的问题。

将 SVG 解析为 HTML 似乎可以正确处理链接、转义 &。

```
fixed_svg = Nokogiri::HTML.fragment(raw_svg).to_html
# proceed with XML parsing
svg = Nokogiri::XML(fixed_svg) 
```

# php - php clearstatcache() 性能及参数说明

> ID：13608671
> 
> 赞同：9
> 
> 时间：2012-11-28T15:34:01.713
> 
> 标签：php, stat, filemtime

我正在使用`filemtime`html 中的外部资源进行指纹识别，例如：

```
<link rel="stylesheet" href="screen-<?=md5(filemtime('screen.css'));?>.css"> 
```

我注意到有效更新和返回的时间戳之间存在显着延迟`filemtime`，因此我`clearstatcache()`在顶部添加，这似乎解决了问题。但根据[php手册](http://php.net/manual/en/function.clearstatcache.php)：

> 如果您对同一个文件名执行多个操作并且需要不缓存有关该特定文件的信息，则只需要调用 clearstatcache() 。

所以我想知道我是否正确使用它。

另外，我担心每次调用时完全清除缓存的性能。谁能告诉我它是否会导致服务器显着减速？

* * *

`clearstatcache`还接受两个附加参数，但我不确定它们的含义：

> **clear_realpath_cache**是否清除真实路径缓存。
> 
> **文件名**仅清除特定文件名的真实路径和统计缓存；仅在 clear_realpath_cache 为 TRUE 时使用。

我不明白“真实路径缓存”是什么意思，也找不到任何有关它的信息。以这种方式调用是否有意义`clearstatcache`：

```
clearstatcache(true,'/path/to/screen.css'); 
```

目的是只清除与该特定文件相关的信息（从而减少 的“影响” `clearstatcache`）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T15:39:06.190

$clear_realpath_cache 与调用[realpath](http://php.net/manual/en/function.realpath.php)函数有关，其结果也被缓存。这应该不会影响您对 filemtime 的调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T15:39:07.223

我无法直接给出答案。

但我建议你使用`md5_file('screen.css')`而不是`md5(filemtime('screen.css'))`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T15:43:52.760

看来您正在正确使用该功能。除非您使用您希望缓存的其他统计功能（如文档中所列），*否则*我不知道它会导致显着减速的原因。

当 you 时`include('somefile')`，`somefile`可能在多个不同的位置，由诸如 your `include_path`、 cwd 等确定。realpath 缓存只是消除了重复搜索这些位置的需要。

供您使用，您的代码看起来不错。

# ruby-on-rails - ruby on rails Postgres 重复键

> ID：13608675
> 
> 赞同：0
> 
> 时间：2012-11-28T15:34:23.040
> 
> 标签：ruby-on-rails

我有几个工作正常的代码表。现在，当我尝试添加记录时，我得到：

```
PG::Error: ERROR:  duplicate key value violates unique constraint  "classcodes_pkey"
DETAIL:  Key (id)=(3) already exists. 
```

型号代码：

```
class Classcode < ActiveRecord::Base
has_many :worequests
default_scope :order => 'classcode ASC'
def class_desc
"#{self.classcode} - #{self.classdesc}"
end

scope :archived, where(:archive => true)
scope :active, where(:archive => false)

end 
```

架构：

```
 create_table "classcodes", :force => true do |t|
  t.string   "classcode"
  t.string   "classdesc"
  t.datetime "created_at"
  t.datetime "updated_at"
  t.boolean  "archive",    :default => false
end 
```

Classcodes 有 key = id [PK] serial 并且已经包含记录 1 到 9。

有任何想法吗？

谢谢

PS - 有人建议我运行 rake db:reset - 现在问题消失了 - 但是，现在我需要重新加载我的数据。

# c - 数组定义后 const 参数发生变化

> ID：13608678
> 
> 赞同：0
> 
> 时间：2012-11-28T15:34:34.787
> 
> 标签：c, constants

我有一个我认为非常奇怪的问题。我有一个具有以下原型的函数：

```
void generateNodes(const int maxX, const int maxY, node nodes[]); 
```

作为该函数中的第一件事，我定义了一个 2d 短裤数组，我将其用作布尔值。但是当我调用这个函数时，maxY 的值会变成一个很大的值。有问题的代码如下：

```
void generateNodes(const int maxX, const int maxY, node nodes[]){
    int i, currentX, currentY;

    short used[MAX_NODES][MAX_NODES];

    //Generate the nodes
    for(i = 0; i < MAX_NODES; i++){
        currentX = randomNumber(0,maxX);
        currentY = randomNumber(0,maxY);

        nodes[i].color = 0;
        nodes[i].numberOfConnections = 0;
        nodes[i].id = i;
        nodes[i].distanceFromStart = NOT_SET;
        nodes[i].parent = NULL;

        if(!used[currentX][currentY]){
            nodes[i].x = currentX;
            nodes[i].y = currentY;

            used[currentX][currentY] = 1;
        } else {
            i--;
        }
    }

    int numberOfConnections, j, currentNeighbor;

    //Generate the connections
    for(i = 0; i < MAX_NODES; i++){
        numberOfConnections = randomNumber(1,5); //Between one and five outgoing connections

        for(j = 0; j < numberOfConnections; j++){

            currentNeighbor = randomNumber(0,19); //Select the neighbor

            while(currentNeighbor == i){
                currentNeighbor = randomNumber(0,19); //Try again while the selected is self
            }

            nodes[i].canReach[++(nodes[i].numberOfConnections)] = &nodes[currentNeighbor];

            nodes[currentNeighbor].canReach[++(nodes[currentNeighbor].numberOfConnections)] = &nodes[i];
        }
    } 
} 
```

MAX_NODES 定义为 20。

有谁知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T15:40:08.643

很可能中的代码`...`访问超出了 的末尾`used`，导致参数被破坏。没有代码，当然不可能说。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T15:59:58.703

由于您似乎没有初始化数组`used`，因此很可能认为某些元素已被使用（`!= 0`），因为堆栈上的数组未初始化为零，而是采用之前在该内存区域中的任何内容。如果认为使用了 X,Y 对，则将循环计数器递减，可能超过零进入负范围，可能会覆盖 - 在下一次迭代中 - 堆栈的一部分。这也可能会更改参数，因为它们也位于本地数组之前的同一堆栈中。

从初始化开始`used`，并考虑重写循环以不更改循环变量，除非在`for`语句中。

# java - 初始化数组列表 >[] 值；

> ID：13608679
> 
> 赞同：0
> 
> 时间：2012-11-28T15:34:35.607
> 
> 标签：java, generics, arraylist

大家好，我该怎么做才能初始化

```
ArrayList<Record<T>> [] values; 
```

有许多行和列？例如，三行四列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T16:05:55.793

使用泛型类型的数组（例如`ArrayList<T>`）是一种通向地狱的方式。以下行甚至没有编译：

```
ArrayList<Record<T>>[] values = new ArrayList<Record<T>>[SIZE_ARRAY]; 
```

编译器发出此错误：

```
Cannot create a generic array of ArrayList<Record<T>> 
```

唯一明智的解决方案是创建一个列表列表：

```
// create matrix
ArrayList<ArrayList<Record<T>>> matrix = new ArrayList<ArrayList<Record<T>>>();

// add 3 rows:
for (int i = 0; i < 3; i++) {
    ArrayList<Record<T>> row = new ArrayList<Record<T>>();
    matrix.add(row);

    // add 4 elements to each row
    for (int j = 0; j < 4; j++) {
        Record<T> record = ... // get the record
        row.add(record);
    }
} 
```

现在您可以访问 [2][3] 处的元素（最后一行的最后一个元素）：

```
Record<T> record = matrix.get(2).get(3); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T19:41:36.900

做就是了：

```
ArrayList<Record<T>>[] values = (ArrayList<Record<T>>[])new ArrayList<?>[SIZE_ARRAY]; 
```

会有一个未经检查的演员表警告，你基本上可以忽略。

不允许创建参数化类型的数组的真正原因有点深奥。Java 中的数组（与泛型集合不同）具有（并且一直具有）在运行时检查它们的特性——即每次将元素放入其中时，它都会检查该元素是否是数组组件类型的实例（其中它在运行时知道）。如果不是，它会引发异常 (ArrayStoreException)。

现在，考虑参数化类型的数组。鉴于您知道数组的上述行为，您会期望参数化类型的数组会检查放入其中的东西是否是该参数化类型的实例。除了在 Java 中不可能在`ArrayList<Something>`运行时检查某事物是否是参数化类型 ( ) 的实例。您最多可以检查它是一个`ArrayList`，而不是它的参数。

由于它不会完全符合人们的期望，Java 设计者决定完全禁止创建参数化类型的数组。您仍然可以创建原始类型的数组（例如`new ArrayList[5]`）或通配符类型的数组（例如`new ArrayList<?>[5]`），因为在这些情况下，*可以*在运行时检查对象是否是实例（即`obj instanceof ArrayList`并且`obj instanceof ArrayList<?>`是合法的，但`obj instanceof ArrayList<Something>`不是）。（他们还可以创建一个特殊情况，即参数化类型的数组只检查原始类型的元素，而不是参数化类型，但这会造成不一致。）但是，可能大多数遇到这个问题的人都没有考虑过这种能力的数组在运行时检查它们的元素类型——他们可能只是想创建一个正常使用的数组。

您还可以将数组转换回参数化类型的数组类型。这是一个未经检查的强制转换，因为如上所述，参数化类型的数组无法满足数组的约定来完全检查其元素类型——例如，现在如果你有一个`ArrayList<String>[]`，就`ArrayList<Integer>`可以添加一个到数组而不产生异常。然而，99% 的人并不关心这个功能，未经检查的演员说，嘿，我们知道这个限制，但无论如何我们都想做。

# asp.net - sql server 报表服务和其他报表工具有什么区别

> ID：13608680
> 
> 赞同：7
> 
> 时间：2012-11-28T15:34:34.497
> 
> 标签：asp.net, reporting-services, crystal-reports, report

我是一名自学成才的学生，我使用 Entity Framework 和 SQL Server 在 ASP.NET 中创建了一些 Web 应用程序。

对于报告，我使用 Entity SQL 动态创建数据库查询。提取结果后，我以 HTML 或 Excel 等其他格式显示结果。

我想做一些专业的报道，但我不知道我应该往哪个方向发展。

我听说过 SQL Server 报告服务、Crystal Report、Stimul Report 和 Fast report。他们都做同样的事情吗？我想知道我应该学习和使用哪些工具或技术？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T16:14:26.650

> 他们都做同样的事情吗？

对于 80% 以上的用例，是的。但是每种产品都有自己的利基和独特的功能。

SSRS 是纯 MS 开发环境中的明确选择。它受益于庞大的 MS 帮助和支持基础架构，并与 Excel 和 SharePoint 等其他 MS 产品进行了大量内置集成

Crystal Reports 拥有强大的动力和历史。它的错误不比其他人少，但有许多成熟的用户组、论坛等，只有极少的机会你会遇到其他人尚未解决、修复和发布的答案的任何问题。此外，许多公司坚持将其作为标准工具，因为在 SSRS 之前，没有任何产品真正威胁到 CR 作为市场份额领导者的地位。（并不是说 SSRS 立即威胁到 CR，而是因为 SSRS 作为 SQL Server 的一部分免费赠送，所以它开发了大量的追随者，即 SSRS 通常“足够好”并且在您支付后不需要额外的许可SQL 服务器。

我不熟悉 Fast Report，我对 Stimulsoft Reporting 的理解是它在使用多种类型数据源的环境中运行良好。

> 我想知道我应该学习和使用哪些工具或技术？

假设您想要一份使用这些工具的工作，答案就在于您想要工作的市场。如果您的就业市场主要是为特定的报告系统招聘，那很容易：研究您当地公司主要使用的那个招聘。（听起来很明显，但我经常看到年轻的技术人员出于学术原因研究特定产品，然后对当地公司对他们投入学习精力的产品不感兴趣感到沮丧。）

如果您的就业市场是中性的（或者您不在乎在哪里找到工作），我建议您选择大公司（SSRS、Crystal Reports 是您提到的名单中的参与者），因为那里的工作更多。

从那里，选择您最熟悉的理念：（注意，前面的概括）SSRS 在以 MS 为中心的环境中效果最好，并且由于其价格而被新贵公司更多地使用。如果您喜欢新的开发、小型公司和初创公司，这是您的选择。（仅我个人观点：SSRS 是一个不断发展的产品，得到了 Microsoft 的坚定支持。它甚至还没有达到它的“黄金时代”，并且在未来的 SQL 版本中会继续变得更好。）Crystal Reports 在大型企业中的应用更为广泛具有大量数据库和一长串遗留系统的环境。如果您喜欢更大的公司环境并维护已建立的系统，那么这是您的选择。（仅个人观点：水晶报表在90年代有它的黄金时代，市场意义正在逐渐下降。它'

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T16:00:18.533

在谈论“面向客户”的报告时，我的建议往往是针对 Crystal Reports：发票、报表、确认书等

对于所有以数字为中心的表格报告，SSRS 是我最喜欢的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T15:41:27.697

The only experience I have is with Crystal Reports. They seem to be nice to use once you get used to the quirks. Also if you want to print labels and such they are fairly robust. Exporting to Excel is nice but not as amazing as SSRS. I would use CR for a clientele that is somewhat savvy with computers. They can modify the reports themselves which is nice.

# url - 我想在我网站的页面上添加类似 facebook 的按钮，但让 URL 转到我网站中完全不同的页面。是否有可能做到这一点？

> ID：13608681
> 
> 赞同：0
> 
> 时间：2012-11-28T15:34:37.790
> 
> 标签：url, dynamic, facebook-like

我想在我的网站页面上添加类似 facebook 的按钮，但是让 URL 转到我网站中一个完全不同的页面，该页面具有更多详细信息。是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:43:44.293

是的，您可以向类似 fb 的 div 添加“data-href”属性，如下所示：

```
<div class="fb-like" data-href="http://www.DOMAIN.com/PATH/TO/MORE/DETAILED/PAGE" data-send="true" data-width="450" data-show-faces="true"></div> 
```

[在此处](https://developers.facebook.com/docs/reference/plugins/like/?locale2=es_ES)找到的文档

# asp.net-mvc-3 - 检查 IsInRole 而不需要 Authorize 属性？

> ID：13608682
> 
> 赞同：1
> 
> 时间：2012-11-28T15:34:44.490
> 
> 标签：asp.net-mvc-3, isinrole

我创建了自己的 Authorize 属性，称为 Authorise...

```
Imports System.Security.Principal

<AttributeUsage(AttributeTargets.Method Or AttributeTargets.[Class], Inherited:=True, AllowMultiple:=True)>
Public Class AuthoriseAttribute
    Inherits AuthorizeAttribute

    Public Overrides Sub OnAuthorization(filterContext As AuthorizationContext)

        Dim CookieName As String = FormsAuthentication.FormsCookieName

        If Not filterContext.HttpContext.User.Identity.IsAuthenticated OrElse filterContext.HttpContext.Request.Cookies Is Nothing OrElse filterContext.HttpContext.Request.Cookies(CookieName) Is Nothing Then
            HandleUnauthorizedRequest(filterContext)
            Return
        End If

        Dim AuthCookie = filterContext.HttpContext.Request.Cookies(CookieName)
        Dim AuthTicket = FormsAuthentication.Decrypt(AuthCookie.Value)
        Dim Roles As String() = AuthTicket.UserData.Split(","c)

        Dim UserIdentity = New GenericIdentity(AuthTicket.Name)
        Dim UserPrincipal = New GenericPrincipal(UserIdentity, Roles)

        filterContext.HttpContext.User = UserPrincipal
        MyBase.OnAuthorization(filterContext)

   End Sub

End Class 
```

我已经这样做了，所以我可以在属性上使用角色参数，就像这样......

```
<Authorise(Roles:="Admin")> 
```

这在我需要授权的页面上完美运行。但是，在不需要授权（因此没有 Authorize 属性）的主页上，我想根据用户是否（a）登录和（b）他们是管理员还是管理员来显示不同的项目不是。例如...

```
@If HttpContext.Current.User.Identity.IsAuthenticated Then
    ' Display a welcome message (this works)
    @If HttpContext.Current.User.IsInRole("Admin") Then
        ' Display a settings link (this does not work)
    End If
End If 
```

“欢迎消息”部分会触发，但“设置链接”部分不会。这是有道理的，因为这个视图没有 Authorize 属性。

如何在没有 Authorize 属性的页面上检查 IsInRole？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T15:51:17.080

我对此没有适当的解决方案。在有人发布正确的解决方案之前，只是一个解决方法可能会有所帮助。

我将 [Authorize] 属性用于操作，但每当我处于局部视图中时，我都会手动执行“OnAuthorization”。

```
public class Authorize : AuthorizeAttribute
{
 public override void OnAuthorization(AuthorizationContext filterContext)
 {
   ....
 }

 public static void ManualOnAuthorization(HttpContext context)
 {
    if (context.User.Identity.IsAuthenticated && context.User.Identity.AuthenticationType == "Forms")
    {
        FormsIdentity fIdent = (FormsIdentity)context.User.Identity;
        var user = new CustomUser(fIdent.Ticket.UserData);
        var ci = new CustomIdentity(user);
        var p = new CustomPrincipal(ci);
        HttpContext.Current.User = p;
        Thread.CurrentPrincipal = p;
    }
 }
} 
```

我已将它放在 Authorize 类中，并在部分视图中如下使用它。

```
@if(User.Identity.IsAuthenticated)
    {
        Authorize.ManualOnAuthorization(HttpContext.Current); 
        if (User.IsInRole("Admin"))
        {
        }
    } 
```

# ruby-on-rails - 随机布局和 before_filters 的生产问题

> ID：13608683
> 
> 赞同：0
> 
> 时间：2012-11-28T15:34:45.833
> 
> 标签：ruby-on-rails, ruby-on-rails-3, caching, nginx, before-filter

我有一个只在生产中发生的疯狂问题。我根本无法在开发中复制它。

由于各种原因，我有以下设置：

```
class OrdersController < PublicController
class PublicController < CommonController
class CommonController < ApplicationController 
```

在 CommonController 内部，我有一个这样的方法：

```
def mobile_ready
 # set request format
  if mobile_view?
    request.format = :mobil      
    self.class.layout 'apps/dmvcs' 
  else 
    request.format = :html
  end 
end 
```

现在事情变得奇怪了：

在 OrdersController 我有这个：

```
before_filter :mobile_ready 
```

在 PublicController 我有这个：

```
layout :select_layout

protected 

def select_layout
    mobile_view? ? 'public_mobile' : 'public'
end 
```

我已经跟踪了调用的顺序，并且在 select_layout 之前调用了 mobile_ready 方法，我认为应该如此。

但令人难以置信的是，在上述考试中，订单页面没有以公共布局呈现！！？？它使用“app/dmvcs”布局（WTF！？）呈现。我已经检查并三重检查和 mobile_view？在桌面上是 FALSE，但它仍然使用错误的布局。

更奇怪的是，如果我有这个：

```
class PublicController < CommonController
  layout 'public' # set this so there is a default layout
  layout :select_layout 
```

它有 70% 的时间工作，这意味着它可能会呈现正确的布局，也可能不会！？

有没有人见过这样的事情？显然，这似乎是某种奇怪的缓存或 nginx 问题，但我不知道该怎么做。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:28:02.820

这让我发疯了，我不是 100% 我有正确的解决方案，但长话短说我删除了

```
 self.class.layout 'apps/dmvcs' 
```

当我读到一些线程安全问题时，从 CommonController 开始，然后我将`select_layout`PublicController 中的方法更改为：

```
def select_layout
 if mobile_view?
   if request.format == :mobile
     'apps/dmvcs' 
   else
     'public_mobile'
   end
 else
   'public'
 end
end 
```

现在这一切*似乎*都在起作用。生病必须继续监控，但这很烦人。希望这有助于其他人避免在 before_filter 中设置布局，除非他们想处理 Rails 缓存/线程问题！

# c# - HTTP 和 HTTPS 绑定

> ID：13608684
> 
> 赞同：0
> 
> 时间：2012-11-28T15:34:47.190
> 
> 标签：c#, .net, wcf, wcf-binding

我有一个使用 WCF Web 服务的应用程序。

我已将其配置为使用 https 绑定。它工作正常。我还想为它添加一个 HTTP 绑定。

我的要求是，如果我的客户端在我的域（或 VPN）上，我需要他们使用 HTTP 绑定。如果他们是外部客户端，我希望他们使用 HTTPS 绑定。我该怎么做呢？我对 WCF 很陌生，这是我第一次尝试它。

我已附上我的配置文件以供参考。我不知道在哪里添加 HTTP 绑定的端点。任何帮助都将不胜感激。

```
<system.serviceModel>
    <services>
      <service name="{service name}"
                behaviorConfiguration="httpsBehavior">
        <!--HTTPS END POINT-->
        <endpoint address=""
                  binding="basicHttpBinding"
                  bindingConfiguration="SecureHTTPBinding"
                  contract="{service contract}" />

    <!--METADATA ENDPOINT--> 
    <endpoint address="mex"
              binding="mexHttpsBinding"
              contract="IMetadataExchange" />
  </service>
</services>

<behaviors>
  <serviceBehaviors>
    <behavior name="httpsBehavior">
      <serviceMetadata httpsGetEnabled="true" httpsGetUrl="" />
      <serviceDebug includeExceptionDetailInFaults="false"/>
    </behavior>

    <behavior name="httpBehavior">
      <serviceMetadata httpGetEnabled="true"/>
      <serviceDebug includeExceptionDetailInFaults="false"/>
    </behavior>

  </serviceBehaviors>
</behaviors>

<bindings>
  <basicHttpBinding>
    <!--HTTPS BINDING-->
    <binding name="SecureHTTPBinding">
      <security mode="Transport">
        <transport clientCredentialType="None" />
      </security>
    </binding>

    <!--HTTP BINDING-->
    <binding name="BasicHttpBinding">
      <security mode="None" />
    </binding>

  </basicHttpBinding>
</bindings> 
```

**编辑**：添加 netTCP 绑定

```
<system.serviceModel>
    <services>
      <service name="{Service Name}"
                behaviorConfiguration="httpsBehavior">
        <!--HTTPS END POINT-->
        <endpoint address="https://localhost/Service1.svc"
                  binding="basicHttpBinding"
                  bindingConfiguration="SecureHTTPBinding"
                  contract="{Service Contract}"  name="httpsEndPoint"/>

    <!--METADATA ENDPOINT--> 
    <endpoint address="mex"
              binding="mexHttpsBinding"
              contract="IMetadataExchange" />

    <!--HTTP END POINT-->
    <endpoint address="http://localhost/Service1.svc"
              binding="basicHttpBinding"
              bindingConfiguration="HttpBinding"
              contract="{Service Contract}" name="httpsEndPoint"/>

    <!--TCP METATADATA END POINT-->
    <endpoint address="mextcp" binding="mexTcpBinding" contract="IMetadataExchange"/>
    <host>
      <baseAddresses>
        <add baseAddress="net.tcp://localhost:808/Service1.svc" />
      </baseAddresses>
    </host>

    <!--TCP ENDPOIN-->
    <endpoint address="net.tcp://localhost:808/Service1.svc" binding="netTcpBinding" contract="{Service Contract}" name="netTCPEndPoint" />

  </service>
</services>

<behaviors>
  <serviceBehaviors>
    <behavior name="httpsBehavior">
      <serviceMetadata httpsGetEnabled="true" httpsGetUrl="" />
      <serviceDebug includeExceptionDetailInFaults="true"/>
    </behavior>

  </serviceBehaviors>
</behaviors>

<bindings>
  <basicHttpBinding>
    <!--HTTPS BINDING-->
    <binding name="SecureHTTPBinding" allowCookies="true"
             maxReceivedMessageSize="20000000"
             maxBufferSize="20000000"
             maxBufferPoolSize="20000000">
      <readerQuotas maxDepth="32"
             maxArrayLength="200000000"
             maxStringContentLength="200000000"/>

      <security mode="Transport">
        <transport clientCredentialType="None" />
      </security>
    </binding>

    <!--HTTP BINDING-->
    <binding name="HttpBinding" allowCookies="true"
             maxReceivedMessageSize="20000000"
             maxBufferSize="20000000"
             maxBufferPoolSize="20000000">
      <readerQuotas maxDepth="32"
             maxArrayLength="200000000"
             maxStringContentLength="200000000"/>
      <security mode="None" />
    </binding>

  </basicHttpBinding>

  <!--TCP BINDING-->
  <netTcpBinding>
    <binding transferMode="Buffered" />
  </netTcpBinding>

</bindings> 
```

我知道代码中的数字可能存在 Dos 攻击，我会解决它。现在只是想让它工作。当我使用这个配置文件时，我遇到了错误，上面写着

**找不到与端点 MetadataExchageTcpBinding 的方案 net.tcp 匹配的基地址。注册的基地址是 [http,https]**

有人可以帮我为我的服务公开一个 net.tcp 绑定吗？任何帮助都会得到帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:45:40.260

用于`netTcpBinding`您的域客户端。默认情况下，您的网络防火墙几乎肯定会阻止原始 TCP 流量，同时允许 HTTP 流量，因此它自然会确保每个客户端都转到适当的端点。您很可能会在讨价还价中为域客户获得额外的性能提升。

如果您不想这样做（例如，您的 WCF 主机不支持它，或者您的 VPN 客户端有问题），那么只需为所有客户端公开一个 HTTPS 端点，无论位置如何。与首先进行跨网络调用的开销相比，SSL 的成本将微不足道。

**背景：**

*   `netTcpBinding`以紧凑的二进制格式传输数据，这比通过 HTTP 发送 XML 文本更有效。缺点是：它与非.NET 客户端不兼容，您必须在防火墙上打开特定端口才能让它通过。不过，这些问题都不会成为您的方案的问题。
*   您可以在 WCF 服务中公开任意数量的终结点，只要它们都具有地址/绑定/合同的唯一不同组合。因此，您可以将 HTTPS 和 TCP 端点暴露给同一服务，因为它们将具有不同的地址和绑定。

# xml - 编码属性和xml文件大小

> ID：13608690
> 
> 赞同：0
> 
> 时间：2012-11-28T15:35:05.387
> 
> 标签：xml, xslt, filesize

我在一个 11 MB 的 xml 文件上运行身份转换，它会生成一个 5.5 MB 的文件。我正在使用撒克逊 9.4.0.6。如果我向输出元素添加编码属性，结果文件大小将保持在 11 MB。

带编码：

```
<xsl:output method="xml" cdata-section-elements="Value" indent="no" encoding="utf-16"/> 
```

无编码：

```
<xsl:output method="xml" cdata-section-elements="Value" indent="no"/> 
```

最大的不同来自哪里？谢谢

XSLT：

```
<?xml version="1.0" encoding="utf-16"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" cdata-section-elements="Value" indent="no"/>
<xsl:strip-space elements="*"/>

<xsl:template match="/">
    <xsl:apply-templates select="*"/>
</xsl:template>

<xsl:template match="node()|@*">
    <xsl:copy>
        <xsl:apply-templates select="node()|@*" mode="#current"/>
    </xsl:copy>
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:45:08.503

不同之处在于[ASCII 字符在 UTF-8 中占用 1 个字节，但在 UTF-16 中占用 2 个字节](http://www.joelonsoftware.com/articles/Unicode.html)。

# java - 正确读取两行时出现 InputMismatchException？

> ID：13608691
> 
> 赞同：0
> 
> 时间：2012-11-28T15:35:22.310
> 
> 标签：java

我正在读取两行 .txt 文件（ui.UIAuxiliaryMethods; 用于此）来计算患者的 BodyMassIndex(BMI)，但是当达到 patientLenght 时，我得到一个 inputmismatchexception。这是我的两行输入，由 \t 分隔：

```
Daan Jansen M   1.78    83
Sophie Mulder   V   1.69    60 
```

它按名称 - 性别 - 长度 - 重量排序。这是我将所有元素保存在字符串、双精度和整数中的代码：

```
package practicum5;

import java.util.Scanner;
import java.io.PrintStream;
import ui.UIAuxiliaryMethods;

public class BodyMassIndex {

    PrintStream out;

    BodyMassIndex() {
        out = new PrintStream(System.out);
        UIAuxiliaryMethods.askUserForInput();
    }

    void start() {
        Scanner in = new Scanner(System.in);

        while(in.hasNext()) {
            String lineDevider = in.nextLine(); //Saves each line in a string

            Scanner lineScanner = new Scanner(lineDevider);

            lineScanner.useDelimiter("\t");
            while(lineScanner.hasNext()) {
                String patientNames = lineScanner.next();
                String patientSex = lineScanner.next();
                double patientLength = lineScanner.nextDouble();
                int patientWeight = lineScanner.nextInt();
            }   
        }   
        in.close();
    }
    public static void main(String[] args) {
        new BodyMassIndex().start();
    }
} 
```

有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T15:37:26.787

Your name has two tokens not one, so `lineScanner.next()` will only get the token for the first name.

Since a name can have more than 2 tokens theoretically, consider using `String.split(...)` instead and then parsing the last two tokens as numbers, double and int respectively, the third from last token for sex, and the remaining tokens for the name.

One other problem is that you're not closing your lineScanner object when you're done using it, and so if you continue to use this object, don't forget to release its resource when done.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T15:41:09.657

Your name field has two token. and you are trying to treat them as one. that;s creating the problem. You may use a " (double quote) to separate the name value from others. String tokenizer may do your work.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T12:49:59.813

我将输入文件中的点更改为逗号。万岁。

# html - HTML锚到日历？

> ID：13608699
> 
> 赞同：5
> 
> 时间：2012-11-28T15:35:41.973
> 
> 标签：html, uri, anchor

有没有办法创建一个通用链接来创建一个日历事件作为 HTML 锚的 URI？例如，您可以创建一个使用 来创建电子邮件的链接`<a href="mailto:address@example.com?Subject=Subject%20line&body=Body%20content.">Link text</a>`，并且您可以创建一个使用 发起电话呼叫的链接`<a href="callto:5551234567">Link text</a>`。**对于不是程序特定的日历，是否有这样的语法？**（我知道有些东西`outlook://`，iCal 可以使用`.ics`文件，但我想要一个与程序无关的东西）

我正在寻找类似的东西`<a href="cal:Event%20title?start=timestamp&end=timestamp&description=Arbitrary%20description%20text>Link text</a>`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T15:44:11.017

您需要结合使用[`webcal`](http://en.wikipedia.org/wiki/Webcal)链接以及动态创建的 ics 文件。的用法`webcal`如下：

```
<a href="webcal://createCal.php?title=Title&amp;start=timestamp&amp;end=timestamp&amp;description=Arbitrary%20description%20text">Link</a> 
```

但是，为了获得最佳兼容性，我认为您最好的选择是直接链接到该`ics`文件：

```
<a href="createCal.php?title=Title&amp;start=timestamp&amp;end=timestamp&amp;description=Arbitrary%20description%20text">Link</a> 
```

然后，在该`createCal.php`文件（或您选择的任何一种编程语言）中，您可以执行与本文类似的操作[来](https://stackoverflow.com/questions/5750249/create-ics-file-dynamically)动态创建一个`ics`文件，用户可以将其导入到他们选择的日历程序中。

这是我为 PHP 文件的内容找到的另一个示例（请注意，这未经测试，但更多的是一个起点）：

```
<?php
//Set the content-type of the file
header("Content-Type: text/Calendar");
header("Content-Disposition: inline; filename=Calendar.ics");
echo "BEGIN:VCALENDAR\n";
echo "PRODID:-//Microsoft Corporation//Outlook 12.0 MIMEDIR//EN\n";
echo "VERSION:2.0\n";
echo "METHOD:PUBLISH\n";
echo "X-MS-OLK-FORCEINSPECTOROPEN:TRUE\n";
echo "BEGIN:VEVENT\n";
echo "CLASS:PUBLIC\n";
echo "CREATED:".date('Ymd\THis', time())."\n";
echo "DESCRIPTION:".$_GET['description'];
echo "DTEND:".date('Ymd\THis', $_GET['end'])."\n";
echo "DTSTAMP:".date('Ymd\THis', time())."\n";
echo "DTSTART:".date('Ymd\THis', $_GET['start'])."\n";
echo "LAST-MODIFIED:".date('Ymd\THis', time())."\n";
echo "LOCATION:\n";
echo "PRIORITY:5\n";
echo "SEQUENCE:0\n";
echo "SUMMARY;LANGUAGE=en-us:".$_GET['title']."\n";
echo "TRANSP:OPAQUE\n";
echo "UID:040000008200E00074C5B7101A82E008000000008062306C6261CA01000000000000000\n";
echo "X-MICROSOFT-CDO-BUSYSTATUS:BUSY\n";
echo "X-MICROSOFT-CDO-IMPORTANCE:1\n";
echo "X-MICROSOFT-DISALLOW-COUNTER:FALSE\n";
echo "X-MS-OLK-ALLOWEXTERNCHECK:TRUE\n";
echo "X-MS-OLK-AUTOFILLLOCATION:FALSE\n";
echo "X-MS-OLK-CONFTYPE:0\n";
//Here is to set the reminder for the event.
echo "BEGIN:VALARM\n";
echo "TRIGGER:-PT1440M\n";
echo "ACTION:DISPLAY\n";
echo "DESCRIPTION:Reminder\n";
echo "END:VALARM\n";
echo "END:VEVENT\n";
echo "END:VCALENDAR\n";
?> 
```

# click - Watir 提交 :tag_name=>"button" not found

> ID：13608702
> 
> 赞同：5
> 
> 时间：2012-11-28T15:35:49.377
> 
> 标签：click, submit, watir

我被以下片段的简单单击命令所跺脚

```
<TR>  
    <TD>  
       <P><INPUT TYPE="SUBMIT" NAME="Send" VALUE="SEND">  
       <INPUT TYPE="RESET" NAME="Clear" VALUE="Clear">
    </TD>  
</TR> 
```

以下 watir 行似乎不起作用

```
browser.button(:name=>'Send').click 
```

我明白了 `/.rvm/gems/ruby-1.9.3-p194/gems/watir-webdriver-0.6.1/lib/watir-webdriver/elements/element.rb:365:in ``assert_exists': unable to locate element, using {:name=>"Send", :tag_name=>"button"} (Watir::Exception::UnknownObjectException)`

尝试过：name 和 :value 的不同组合。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T17:29:49.490

[我相信这个问题与Watir-Webdriver Issue 72](https://github.com/watir/watir-webdriver/issues/72)中描述的区分大小写问题有关。基本上是因为按钮有`TYPE="SUBMIT"`，因为 watir 正在寻找“提交”（注意大小写差异），所以没有找到它。

作为一种解决方法，您可以执行以下操作：

```
#Using input type
browser.input(:name => 'Send').click

#Using css locator
browser.element(:css => 'input[type=submit][name=Send]').click 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-14T19:04:15.210

```
browser.button(type: "submit").click 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-11-28T15:43:31.683

这个怎么样--- browser.button(:name, "Send").click

# c# - 在装配怪异中查找自定义属性

> ID：13608705
> 
> 赞同：1
> 
> 时间：2012-11-28T15:35:53.933
> 
> 标签：c#, reflection, attributes, unity3d

为什么以下工作可以找到使用我的自定义属性的类，但是，

```
 Assembly [] assemblies = AppDomain.CurrentDomain.GetAssemblies();
    foreach(Assembly a in assemblies)
    {
        foreach(Type t in a.GetTypes())
        {
            object [] attributes = t.GetCustomAttributes(typeof(TestingAttribute), false);
            foreach(object o in attributes)
            {
                Debug.Log(o is TestingAttribute);
            }
        }
    } 
```

这种方法和我在 StackOverflow 上找到的类似方法都没有。此代码在 Unity3d 中执行。结果是空的。

```
 Assembly [] assemblies = AppDomain.CurrentDomain.GetAssemblies();
    foreach(Assembly a in assemblies)
    {
        var attributes = a
                   .GetCustomAttributes(typeof(TestingAttribute), false)
                   .Cast<TestingAttribute>();
        foreach(TestingAttribute t in attributes)
        {
            Debug.Log(t);
        }
    } 
```

# mysql - 在 MySQL 数据库上使用版本控制 (Git)

> ID：13608706
> 
> 赞同：65
> 
> 时间：2012-11-28T15:35:55.477
> 
> 标签：mysql, git, version-control

我是一名 WordPress 设计师/开发人员，他越来越多地参与使用版本控制，尤其是 Git，尽管我确实在某些项目中使用 SVN。我目前正在为我的远程仓库使用 Beanstalk。

将所有 WordPress 文件添加到我的 repo 没有问题，如果我想知道我可以 .gitignore wp-config 文件，但由于我是目前唯一的开发人员，而且这些项目是闭源的，它确实使意义不大。

与任何 CMS 一样，WordPress 严重依赖数据库来保留文本内容和许多设置，具体取决于我使用的特定插件/主题配置。我想知道在数据库上使用版本控制的最佳方式是什么，如果可能的话。我想我可以做一个 SQL 转储，尽管我的 MySQL 服务器在 Windows 上运行（读作：我不知道该怎么做），然后将 SQL 转储添加到我的存储库中。但是当我推送一些东西时，这会带来巨大的安全威胁。

这样做有公认的做法吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-03T18:42:13.227

您可以在 git 存储库中备份数据库。当然，如果你将数据以二进制形式放入 git 中，你将失去 git 使用差异（更改）有效存储数据的所有能力。所以第一个最佳实践是：以文本序列化格式存储数据。

mysqldump 是一个合适的程序来帮助你做到这一点。虽然它并不完美。如果有任何东西扰乱了项目的序列化顺序（例如，由于创建新表等），那么人为的中断将进入差异。这会降低存储效率。您可以编写一个自定义序列化程序来仅序列化更改 - 但是您正在做 git 已经擅长的艰苦工作。只需使用 sql 转储。

话虽如此，您想要做的并不是开发人员在谈论将数据库放入 git 时通常所说的意思。例如，如果您阅读 @eggyal 发布的链接（[链接到 codinghorror](http://www.codinghorror.com/blog/2008/02/get-your-database-under-version-control.html)），您会看到实际放置在 git 中的是生成初始数据库所需的脚本。可能还有其他脚本，例如用干净状态填充数据库数据或用测试数据填充数据库数据的脚本。所有此类 sql 脚本都是文本文件，并且与您从 mysqldump 获得的 sql 转储格式几乎相同。因此，您也没有理由不能以这种方式处理您的日常数据。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-07-13T03:18:45.110

可用于版本控制数据库（如 MySQL 和 MongoDB）的软件并不多。

但其中一个正在开发中，测试版即将推出。查看[Klonio - 数据库的版本控制](http://www.klonio.com)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-06-26T13:38:33.117

文章[如何使用版本控制同步本地和远程 WordPress 博客](http://code.tutsplus.com/tutorials/how-to-sync-a-local-remote-wordpress-blog-using-version-control--wp-22135)提供了有关如何使用 Mercurial 在 WordPress 博客的两个实例（开发、生产）之间自动同步的建议。提到对于这种情况，Git 和 Mercurial 非常相似。

第 4 步（同步数据库）在这里很重要。

> 数据库内容将导出到由修订控制跟踪的文件。每次我们拉取更改时，数据库内容都会被这个文件替换，从而使我们的数据库保持最新。

然后，它详细说明了冲突和工作的脚本部分。

[Mercurial](http://hginit.com/)中有一个版本控制教程，如果你不熟悉的话。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-05-11T17:25:51.717

如果您只对版本控制下的架构更改感兴趣，那么有一个很好的东西[SqlRog](https://github.com/stpatrickw/sqlrog)。它将模式提取到可以放在 git 下的项目文件中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-24T15:06:52.570

请注意，Wordpress 将所有新闻提要内容都存储在数据库中，因此即使您不进行任何更改，也会有很多更改的内容。

# objective-c - 在 iOS 项目中使用目标的最佳实践

> ID：13608708
> 
> 赞同：2
> 
> 时间：2012-11-28T15:36:06.910
> 
> 标签：objective-c, ios, xcode

我正在开发一个 iOS 应用程序，我有两个项目（*两个客户端*）。我通过复制第一个目标创建了第二个目标，我的问题是如何测试我是否在`targetX`/中`targetY`？开发具有多个目标的 iOS 应用程序时的最佳实践是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T15:49:24.300

我不知道这是否是最佳实践，但一种方法是在目标的构建设置中添加一个*其他 C 标志*（见图）。例如：

目标A：

```
-DAPP_ZENDER=1 
```

目标 B：

```
-DAPP_ZENDER=2 
```

然后在代码中你可以检查这个定义：

```
- (NSInteger)appZender {
#if APP_ZENDER == 1
    return 1;
#elif APP_ZENDER == 2
    return 2;
#endif
} 
```

![“构建设置”选项](../Images/7741624aefea171c11c2326bf3b83860.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:43:14.470

检查代码中的目标似乎不是适合您的情况的最佳解决方案，无论是什么。我会考虑创建两个或多个子类来处理逻辑上的差异，或者使用多个本地化字符串文件，如果这样就足够了。

# reporting-services - SSRS 中的 NaN 和 Infinity 值

> ID：13608712
> 
> 赞同：6
> 
> 时间：2012-11-28T15:36:13.207
> 
> 标签：reporting-services

我正在使用 Visual Studio 来构建我的报告，并且我尝试使用这三个表达式：

```
=IIF(Fields!A.Value = 0 or Fields!B.Value = 0, 0,SUM(Fields!A.Value)/SUM(Fields!A.Value)

=IIF(SUM(Fields!A.Value) = 0 or SUM(Fields!B.Value =0),0,SUM(Fields!A.Value)/SUM(Fields!A.Value)

=Replace(Round((((SUM(Fields!A.Value)/SUM(Fields!B.Value)))*100),0),"NaN","0")+"%" 
```

前 2 只给我 0 作为 %，最后一个没有摆脱 Infinity 但确实摆脱了 NaN。

当我使用前 2 个或最后一个时，有人可以帮我一起使用这两个表达式，而不是只得到 0% 和 Infinity 吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-11-05T11:51:48.183

首先，您需要确保用于计算值的字段确实是数字。

通常，`NaN`当您尝试除以 0 / 0 或`Infinity`将任何数字除以 0 时，您会得到。

因此，一个**通用的解决**方案`NaN`，`Infinity`甚至`#Error`（当一个空值被传递给一个部门时发生）是创建一个可以为你处理这个值的函数。

右键单击报告的背景，然后转到报告属性，如下所示：

![访问 BID 2008 上的报表属性](../Images/16a3e0cbd226d9868b4127801567930e.png)

然后您可以继续选项卡`Code`并添加您的自定义代码：

```
Public Function Divide(ByVal dividend As Double, ByVal divisor As Double) As Double
   If IsNothing(divisor) Or divisor = 0 Or IsNothing(dividend) Or dividend = 0 Then
      Return 0
   Else
      Return dividend / divisor
   End If
End Function 
```

我们使用`IsNothing()`to 避免`#Error`并检查除数或被除数是否为 0 来避免`NaN`and `Infinity`。

然后您将表达式替换为：

```
= Code.Divide(Sum(Fields!A.Value), Sum(Fields!B.Value)) 
```

为了使它看起来像一个百分比，我强烈建议您更改`Textbox`属性。因此，右键单击它，继续文本框属性和选项卡编号。选择类别百分比。

通过这样做，您可以确保 de SSRS 将此值视为**百分比而不是文本**，即使将其导出到 Excel 等其他平台也是如此。

您还可以查看[有关将代码添加到报告 (SSRS) 的 Microsoft 文档](http://msdn.microsoft.com/en-us/library/ms156028.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T19:18:54.627

如果你得到 0% 和 NaN，我会检查你的字段数据类型。您应该至少有一个非整数，并且两者都必须是数字。我仍然希望看到一些 1，但这是从 0% 和 NaN 开始的。在您的检查方面，您只需检查分母，以避免计算错误。尝试：

```
=IIF(Sum(Fields!B.Value) <> 0 , Sum(Fields!A.Value) / Sum(Fields!B.Value), 0 ) 
```

使用文本框格式属性或方程式编号属性控制您的演示文稿（小数位、% 符号等）。

# android - 无法从 Android 应用程序连接到 wamp 服务器

> ID：13608721
> 
> 赞同：0
> 
> 时间：2012-11-28T15:36:28.220
> 
> 标签：android, wamp, avd

我知道我的 php 文件有效，我可以从 localhost 调用它并得到响应。我也知道我有从 AVD 调用它的正确 IP 地址，因为当我从 AVD 中的浏览器调用 url 时，我得到了响应。所以问题出在我的 asynctask 函数中。

这是我的 asynctask 类的代码。

```
protected String doInBackground(String... args) {
    HttpClient httpclient = new DefaultHttpClient();
    HttpResponse response;
    try {
        response = httpclient.execute(new HttpGet(url));
    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return null;
}

protected void onPostExecute(String str) {
    // updating UI from Background Thread
    resp=str;
    returned();
} 
```

我从父类调用这个类，并将字符串从 onpostexecute() 放到字符串 resp，它是父类中的一个字符串。响应始终为空。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T15:51:35.590

好吧，您正在返回`null`，因此您的代码按编写的方式工作。

也许您想返回部分 h​​ttp 响应而不是`return null`in ？`doInBackground()`

# flash - 如何将影片剪辑中的所有帧转换为关键帧？

> ID：13608723
> 
> 赞同：1
> 
> 时间：2012-11-28T15:36:36.537
> 
> 标签：flash, automation, jsfl, flash-ide

如何自动将库中使用 Classic Tween 的所有 Movie Clip (SymbolItem) 项转换为关键帧？

![在此处输入图像描述](../Images/861dab02a2f20eea8752fb21c77f1feb.png)

![在此处输入图像描述](../Images/ff89b33511b2519e0b524e916ce9bdec.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:36:36.537

您可以使用此*JSFL*脚本，Adobe Flash Professional CS4 及更高版本支持

可在此处找到文档：http: [//help.adobe.com/en_US/flash/cs/extend/index.html](http://help.adobe.com/en_US/flash/cs/extend/index.html)

```
var document = fl.getDocumentDOM();

var library = document.library;

for (var libraryItemIndex in library.items) {
    var libraryItem = library.items[libraryItemIndex];

    fl.trace(libraryItem.name + " is " + libraryItem.itemType);

    if(libraryItem.itemType == "movie clip") {

        fl.trace(" processing movie clip");

        library.selectItem(libraryItem.name);
        library.editItem(libraryItem.name);

        var timeline = libraryItem.timeline;

        fl.trace(" contains " + timeline.layerCount + " layers");
        fl.trace(" selected layers " + timeline.getSelectedLayers());

        for (var layerIndex in timeline.layers) {
            fl.trace(" trying to select layer " + layerIndex);
            timeline.setSelectedLayers(Number(layerIndex));
            fl.trace(" converting to key frames");
            timeline.convertToKeyframes(0, libraryItem.timeline.frameCount - 1);
        }
    }
    else {
        fl.trace(" ignoring");
    }
} 
```

输出将如下所示：

![在此处输入图像描述](../Images/d6abf8625d010263993e48f3a71698fa.png)

**注意：**注意方法`timeline.setSelectedLayers()`，`Number`强制转换为

# android - 在从数据库填充的列表视图上实现搜索过滤器

> ID：13608724
> 
> 赞同：0
> 
> 时间：2012-11-28T15:36:38.003
> 
> 标签：android, baseadapter, custom-adapter

我正在填充`ListView`从`Database`. 我正在使用`CustomAdapter`which extends`BaseAdapter`来填充`ListView`数据。的每一行`ListView`包含 2`TextView`和 1 `CheckBox`。现在我要做的是`EditText`在顶部放置一个，`Activity`当用户键入一些文本时，例如应该显示所有以 J 开头的联系人。请指导我`J`。`ListView`

**自定义适配器代码**

```
public class MyCustomAdapter extends BaseAdapter {

Context mContext;
private LayoutInflater mInflater;
SparseBooleanArray mSparseBooleanArray;
private ArrayList<String> mData = new ArrayList<String>();
private ArrayList<String> mNumber = new ArrayList<String>();

public MyCustomAdapter(Context mContext) {
    mInflater = (LayoutInflater) mContext
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    mSparseBooleanArray = new SparseBooleanArray();
}

public ArrayList<String> getCheckedItems() {
    ArrayList<String> mTempArry = new ArrayList<String>();
    for (int i = 0; i < mData.size(); i++) {
        if (mSparseBooleanArray.get(i)) {
            //mTempArry.add(mData.get(i));
            mTempArry.add(mNumber.get(i));
        }
    }
    return mTempArry;
}

public int getCount() {
    return this.mData.size();
}

public void addItem(String paramString1, String paramString2) {
    this.mData.add(paramString1);
    this.mNumber.add(paramString2);
    notifyDataSetChanged();
}

public Object getItem(int paramInt) {
    return (String) this.mData.get(paramInt);
}

public long getItemId(int paramInt) {
    return paramInt;
}

public View getView(final int paramInt, View paramView,
        ViewGroup paramViewGroup) {
    if (paramView == null) {
        paramView = mInflater.inflate(R.layout.multiplecontactview, null);
    }
    TextView txtName = (TextView) paramView.findViewById(R.id.txtContactName);
    TextView txtNumber = (TextView) paramView.findViewById(R.id.txtContactNumber);
    CheckBox mCheckBox = (CheckBox) paramView.findViewById(R.id.checkBox1);
    mCheckBox.setTag(paramInt);
    mCheckBox.setChecked(mSparseBooleanArray.get(paramInt));
    mCheckBox.setOnCheckedChangeListener(mCheckedChangeListener);
    txtName.setTextColor(Color.BLACK);
    txtNumber.setTextColor(Color.BLACK);
    for (int i = 0; i < mData.size(); i++) {
        txtName.setText(mData.get(paramInt).toString());
        txtNumber.setText(mNumber.get(paramInt).toString());
    }
    return paramView;
}

OnCheckedChangeListener mCheckedChangeListener = new OnCheckedChangeListener() {
    public void onCheckedChanged(CompoundButton buttonView,
            boolean isChecked) {
        mSparseBooleanArray.put((Integer) buttonView.getTag(), isChecked);
    }
};

public static class ViewHolder {
    public CheckBox cb;
    public TextView nameView;
    public TextView numberView;
}

} 
```

**填充数据的代码`LISTVIEW`ONCREATE()**

```
ArrayList<Contact> contacts = db.getAllContacts();
        for (Contact cn : contacts) {
            mAdapter.addItem(cn.getName(), cn.getPhoneNumber());
        }
        mAdapter.notifyDataSetChanged();
        mListView.setAdapter(mAdapter); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:47:18.930

我必须为我不久前制作的一个应用程序实现这一点。由于它是开源的，您可以查看代码。我用`SearchView`这个。

[https://github.com/royale1223/HwaSettings](https://github.com/royale1223/HwaSettings)

# css - CSS自适应高度问题

> ID：13608725
> 
> 赞同：0
> 
> 时间：2012-11-28T15:36:38.840
> 
> 标签：css

我在构建自适应网站时遇到了一些问题。看看它应该是怎样的：

[http://tweakers.net/ext/f/O1sEWJd53lwKA3Gv3W0CJDgW/full.png](http://tweakers.net/ext/f/O1sEWJd53lwKA3Gv3W0CJDgW/full.png)

我的css中有这段代码：

```
.HTML { 
    min-width: 100%; 
    height: 100%; 
} 

.page { 
    margin-top: 4.3%; /* 215px : 4960px */ 
    margin-left: 4.76%; /* 172px : 3615px */ 
    margin-right: 4.6%; /* 168px : 3615px */ 
    height: 100%; 
} 

.header { 
    width: 100%; 
    height: 13.95%; /* 661px : 4737px */ 
} 

.logo { 
    margin-left: 7.51%; /* 246px : pagewidth */ 
    width: 28%; /* 918px : pagewdith */ 
    height: auto; 
    float: left; 
} 

.searchbox { 
    margin-top: 24.4%; /* 161px : 661px */ 
    float:right; 
    width: 22.4%; /* 737px : pagewidth */ 
} 
```

徽标按原样显示，但搜索框的 margin-top 似乎是 HTML 顶部的边距，而不是标题类顶部的边距。它变得太低了。我需要它是响应式的，因为图像的高度也是响应式的，所以搜索框应该适应徽标的高度，因为它们的底部是对齐的。

此外，我还有另一个类的高度应该是标题高度的 5%，但是当我给它高度时：5%; 它在 Chrome 23 中的高度为 0px ......这是怎么来的？

我的 HTML：

```
<body>
    <div class="page">
        <div class="header">
            <div class="logo">
                <img />
            </div>
            <div class="searchbox"></div>
        </div>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T08:49:01.647

“尝试放置一个位置：相对于父级和位置：绝对到子级。” -数码相机

资料来源：[http ://css-tricks.com/forums/discussion/9608/solved-margin-extends-beyond-parent/p1](http://css-tricks.com/forums/discussion/9608/solved-margin-extends-beyond-parent/p1)

这个解决方法是我解决这个问题的最接近的方法。

# android - Android & Maven：加速项目编译和部署

> ID：13608732
> 
> 赞同：9
> 
> 时间：2012-11-28T15:36:52.323
> 
> 标签：android, maven

有没有办法使用 maven 加快编译和部署到 android 项目的设备？

我在 IntelliJ Idea 中测试了一个空白 android 项目（使用“android create project”从命令行创建）的构建时间——从按下“运行”按钮到在设备上启动应用程序需要 4 秒。然后我为它添加了 maven 支持——现在它需要将近 7 秒。

对于更大的项目，它需要更多的时间。例如，添加了 ActionBarSherlock 依赖项的空白项目需要大约 25-30 秒来编译、部署和运行。

有没有办法加快这个过程？

我想听听 Square 开发人员（尤其是 Jake Wharton）的回答 :) 编译您的 android 项目需要多长时间？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-18T07:26:15.497

我做的几件事让我有了一点进步：

*   关闭调试版本的 dex 优化
*   打开库预索引（这会减慢第一次构建但加快以下构建速度）

配置类似于：

```
<plugin>
    <groupId>com.jayway.maven.plugins.android.generation2</groupId>
    <artifactId>android-maven-plugin</artifactId>
    <inherited>true</inherited>
    <configuration>
        <!-- All your current configuration -->
        <dexOptimize>false</dexOptimize>
         <dex>
            <preDex>true</preDex>
            <preDexLibLocation>/tmp/predexedLibs</preDexLibLocation>
        </dex>
    </configuration>
</plugin> 
```

顺便说一句，我怀疑增量编译器存在一些问题，并且每次所有代码都是从头开始重新编译的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-24T21:00:49.270

Maven 3 具有多线程构建。我至少会尝试一下。鉴于你已经在 20 秒，它可能不会做太多，但它确实加快了我们更大的 maven 构建

```
mvn -T 4 clean install # Builds with 4 threads
mvn -T 1C clean install # 1 thread per cpu core
mvn -T 1.5C clean install # 1.5 thread per cpu core 
```

[Maven 3 中的并行构建](https://cwiki.apache.org/MAVEN/parallel-builds-in-maven-3.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-18T07:16:23.810

25-30 秒制作、部署和运行应用程序？幸运的人！我正在使用 Windows 笔记本电脑...

以下是我为加快开发速度所做的几件事：

*   通过将模拟器映像和 SD-Drive 放在 SSD 上，我取得了一些不错的进展。
*   从快照运行模拟器会更快地启动它。
*   如果有可能，我会在实际设备而不是模拟器上运行我的代码 - 根据实际设备，即使使用虚拟化模拟器，这也会更快（在我的 Sony Xperia 上是 2 倍）。当然，这样做的缺点是，您无法测试不同的 Android 版本和设备配置文件。

但是模拟器中的所有小变化仍然存在，部署通过 TCP/IP 堆栈进行，这是它的瓶颈。

PS：我不是Jake Wharton，也不认识他。但是，如果他可以更改部署中的某些内容，他应该这样做:-)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T15:46:21.010

您可以尝试为 MAVEN_OPTS 设置更高的 -Xms 和 -Xmx 选项。

此外，确保没有将idea中的maven配置为每次都下载/同步jar的存储库。

你也可以通过一些体面的硬件升级;-)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-28T14:44:37.057

答案有点奇怪，但 Jake Wharton 建议转向真正增量的[gradle-builds 。](http://www.stylingandroid.com/archives/1872)此外，使用[Genymotion](http://www.genymotion.com/)代替 SDK 仿真器和 USB 设备使我急需减少部署时间。

所以现在我的构建时间从 ~1m 减少到 ~10-20sec。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-16T00:28:59.370

您可以尝试使用仅将增量更改上传到模拟器的工具：仅将更改的类推送到设备，应该节省一些时间。您可以尝试该工具： http: [//www.instareloader.com/download/](http://www.instareloader.com/download/)使用“inirwetrust”作为密码

# javascript - 那里有 JavaScript 的地理库吗？

> ID：13608734
> 
> 赞同：1
> 
> 时间：2012-11-28T15:36:57.050
> 
> 标签：javascript

我一直在寻找一个图书馆来简化地理任务。例如，计算两点之间的距离。

我看过一些博客和网站上写的方法，但我想知道一些“完整”的库。

你在用一个吗？

谢谢！

PS：我不是指地理编码库，尽管我不介意它是否包含它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:40:29.533

您可以查看[Google Maps API](https://developers.google.com/maps/)。再说一次，这是一个 API，而不是可下载的库。不过，它可能对您有所帮助……或者对于您想要的东西可能有点矫枉过正。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T15:42:38.680

我个人更喜欢[Proj4js](http://trac.osgeo.org/proj4js/)和[OpenLayers](http://openlayers.org/)，而不是[Google Maps API](https://developers.google.com/maps/)。

# javascript - 找出 ExtJs 中 Ext.panel.tree 中的选定项目是否有子项

> ID：13608736
> 
> 赞同：0
> 
> 时间：2012-11-28T15:37:04.730
> 
> 标签：javascript, extjs, extjs4

有谁知道在 ExtJS 中找出一个选定项目`Ext.tree.Panel`是否有一个孩子的方法？我知道你可以通过做找到一个选定的项目，`tree_dir.getSelectionModel().getSelection()`但我看不到任何方法来检查它是否有任何孩子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:41:51.317

The instance returned by `tree_dir.getSelectionModel().getSelection()` should have `hasChildNodes()` method specifically for that purpose.

# c# - 在 WPF 框架中手动处理 NavigationCommands.BrowseBack

> ID：13608739
> 
> 赞同：1
> 
> 时间：2012-11-28T15:37:09.280
> 
> 标签：c#, .net, wpf

我在 WPF 窗口中有一个框架。如果我单击页面上的后退按钮，我可以轻松地进行一些检查并调用 Frame.GoBack()。但是，如果我单击键盘或遥控器上的退格键或特殊的后退键，则 Frame 在此调用冒泡到主窗口之前会拦截此调用，因此我的代码不会运行。

有没有办法阻止 wpf 框架收听 NavigationCommands.BrowseBack？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:01:10.743

我设法通过加倍 CommandBindings 解决了这个问题。我现在有由窗口和框架处理的事件。将 CommandBinding 添加到框架似乎已经覆盖了框架本机所做的任何事情。

```
<Frame x:Name="MainFrame" NavigationUIVisibility="Hidden" Focusable="False">
    <Frame.CommandBindings>
        <CommandBinding Command="NavigationCommands.BrowseBack" Executed="CommandBinding_Executed_BrowseBack"/>
    </Frame.CommandBindings>
</Frame> 
```

# ios - 使用 iOS 6 自动布局，在 UINavigationController 上方显示某些内容的正确方法是什么？

> ID：13608740
> 
> 赞同：2
> 
> 时间：2012-11-28T15:37:10.843
> 
> 标签：ios, uiview, ios6, modal-dialog, autolayout

在我的应用程序中，我有一个主视图控制器，它有时会在其顶部带来一个模态视图。这个模态视图是一个带有导航栏的 UINavigationController。我想在导航栏上方显示一个图像，并让导航栏出现在图像下方。

我不想继承任何东西并且应用程序使用自动布局，我不想要一堆委托回调和帧计算。导航控制器内部的视图（实际的模态内容）仍然必须正确响应不同的屏幕尺寸，例如旋转、调用状态栏等。另外，请不要 IB 解决方案，这些视图都是在代码中管理的。

我如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:52:54.877

我会关闭 AutoLayout 并将图像放在顶部

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T18:00:19.447

我不认为你可以用你的模态视图作为导航控制器来做到这一点。我会通过将该模态控制器设置为您设置为自定义容器控制器的 UIViewController 来做到这一点。您可以将图像视图添加到此控制器视图的顶部，并将子视图控制器（将是导航控制器）的视图添加到底部。这在使用容器视图的故事板中会容易得多，但它当然可以在代码中完成。

# c# - Draw Sprite On Pixel Color

> ID：13608742
> 
> 赞同：1
> 
> 时间：2012-11-28T15:37:13.477
> 
> 标签：c#, colors, xna, sprite, pixel

I've done a small game with a simple tile engine that draws a sprite corresponding to a number in a .txt file. And now I want to advance, I want to make so the game reads a .png or something and for every pixel it draws a sprite. And with different colors within the image, a different sprite draws. Can some one help me with this? Also, I'm doing this in C# XNA 4.0.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:55:07.757

首先，使用管道将图像加载到 Texture2D 中。然后在您的代码中使用 texture2d.GetData 来获取像素的颜色。

MSDN texture2d.GetData 示例[http://msdn.microsoft.com/en-us/library/bb197093.aspx](http://msdn.microsoft.com/en-us/library/bb197093.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T21:07:30.300

`Texture2D.GetData`如果您使用它来制作瓦片地图（我假设地图将是瓦片的 2D 网格），使用它可能会很棘手，因为 Texture2D . [GetData](http://msdn.microsoft.com/en-us/library/bb197093.aspx)返回一个一维数组。

首先，您将需要您的地图数组，但是您存储它可能如下所示：

```
Color[,] tiles = new Color[LEVEL_WIDTH,LEVEL_HEIGHT]; 
```

我使用以下技术从文件加载预制结构

```
//Load the texture from the content pipeline
Texture2D texture = Content.Load<Texture2D>("Your Texture Name and Directory");

//Convert the 1D array, to a 2D array for accessing data easily (Much easier to do Colors[x,y] than Colors[i],because it specifies an easy to read pixel)
Color[,] Colors = TextureTo2DArray(texture); 
```

而且功能...

```
 Color[,] TextureTo2DArray(Texture2D texture)
    {
        Color[] colors1D = new Color[texture.Width * texture.Height]; //The hard to read,1D array
        texture.GetData(colors1D); //Get the colors and add them to the array

        Color[,] colors2D = new Color[texture.Width, texture.Height]; //The new, easy to read 2D array
        for (int x = 0; x < texture.Width; x++) //Convert!
            for (int y = 0; y < texture.Height; y++)
                colors2D[x, y] = colors1D[x + y * texture.Width];

        return colors2D; //Done!
    } 
```

现在您可能想要将地图设置为颜色，所以只需这样做`tiles = Colors`，您就可以使用 ! 轻松访问数组中的数据`Colors[x,y]`！

例子：

```
 using System;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework;
namespace YourNameSpace
{
    class Game
    {
        //"Global" array for the map, this holds each tile
        Color[,] tiles = new Color[LEVEL_WIDTH, LEVEL_HEIGHT];
        protected override void Initialize() //OR wherever you load the map and stuff
        {
            //Load the texture from the content pipeline
            Texture2D texture = Content.Load<Texture2D>("Your Texture Name and Directory");

            //Convert the 1D array, to a 2D array for accessing data easily (Much easier to do Colors[x,y] than Colors[i],because it specifies an easy to read pixel)
            Color[,] Colors = TextureTo2DArray(texture);
        }
        Color[,] TextureTo2DArray(Texture2D texture)
        { //ADD THE REST, I REMOVED TO SAVE SPACE
        }
    }
} 
```

# python - Python - use lxml to return value of title.text attrib

> ID：13608745
> 
> 赞同：2
> 
> 时间：2012-11-28T15:37:17.033
> 
> 标签：python, parsing, lxml

I'm trying to figure out how to use lxml to parse the xml from a url to return the value of the title attribute. Does anyone know what I have wrong or what would return the Title value/text? So in the example below I want to return the value of 'Weeds - S05E05 - Van Nuys - HD TV'

XML from URL:

```
<?xml version="1.0" encoding="UTF-8"?>
<subsonic-response xmlns="http://subsonic.org/restapi" status="ok" version="1.8.0">
<song id="11345" parent="11287" title="Weeds - S05E05 - Van Nuys - HD TV" album="Season 5" artist="Weeds" isDir="false" created="2009-07-06T22:21:16" duration="1638" bitRate="384" size="782304110" suffix="mkv" contentType="video/x-matroska" isVideo="true" path="Weeds/Season 5/Weeds - S05E05 - Van Nuys - HD TV.mkv" transcodedSuffix="flv" transcodedContentType="video/x-flv"/>
</subsonic-response> 
```

My current Python code:

```
import lxml
from lxml import html
from urllib2 import urlopen

url = 'https://myurl.com'

tree = html.parse(urlopen(url))
songs = tree.findall('{*}song')
for song in songs:
    print song.attrib['title'] 
```

With the above code I get no data return, any ideas?

print out of tree =

```
<lxml.etree._ElementTree object at 0x0000000003348F48> 
```

print out of songs =

```
[] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T15:54:24.813

首先，您实际上并没有`lxml`在代码中使用。您导入`lxml`HTML 解析器，否则忽略它，而只使用标准库[`xml.etree.ElementTree`模块](http://docs.python.org/2/library/xml.etree.elementtree.html)。

其次，您搜索`data/song`但`data`文档中没有任何元素，因此不会找到匹配项。最后但并非最不重要的一点是，您有一个使用名称空间的文档。您必须在搜索元素时包含这些元素，或使用`{*}`通配符搜索。

以下为您查找歌曲：

```
from lxml import etree

tree = etree.parse(URL)  # lxml can load URLs for you
songs = tree.findall('{*}song')
for song in songs:
    print song.attrib['title'] 
```

要使用显式命名空间，您必须将`{*}`通配符替换为完整的命名空间 URL；默认命名`.nsmap`空间在对象的命名空间字典中可用`tree`：

```
namespace = tree.nsmap[None]
songs = tree.findall('{%s}song' % namespace) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T17:52:59.790

感谢您的帮助，我使用了您的两个组合来使其正常工作。

```
import xml.etree.ElementTree as ET
from urllib2 import urlopen

url = 'https://myurl.com'
root = ET.parse(urlopen(url)).getroot()
for song in root:
    print song.attrib['title'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T15:56:11.850

整个问题在于`subsonic-response`标签具有一个`xmlns`属性，表明存在一个有效的 xml 命名空间。下面的代码考虑到了这一点，并正确地添加了歌曲标签。

```
import xml.etree.ElementTree as ET
root = ET.parse('test.xml').getroot()
print root.findall('{http://subsonic.org/restapi}song') 
```

# java - Hibernate versioning with OracleDB 11g "_" invalid character

> ID：13608747
> 
> 赞同：0
> 
> 时间：2012-11-28T15:37:32.390
> 
> 标签：java, database, hibernate, oracle11g, versioning

Using hibernate with Oracle db 11g express edition release 2.

When using the annotation `@Versioned` for a table "`Organizations`" for example,

hibernate seems to try to create a table `Public.Organizations_versions` with some columns.

The problem is that some of those columns (`_revision`, `_revision_type`) start with an underscore and Oracle db does not allow creating a table with columns who start with underscore.

Any solutions ?

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T21:21:43.470

更改您的 Envers 版本。如果我记得，版本 1.0.0 是一个非常古老的版本。至少使用：

```
1.2.2.GA-hibernate3.3 
```

以下是[Envers FAQ](https://community.jboss.org/wiki/EnversFAQ?_sscc=t)的摘录：

对于当前的**Hibernate-4/3.6**兼容版本，您应该使用新的组和工件 ID。使用此依赖项：

```
<dependency>
  <groupId>org.hibernate</groupId>
  <artifactId>hibernate-envers</artifactId>
  <version>4.1.0-Final</version>
</dependency>

<dependency>
  <groupId>org.hibernate</groupId>
  <artifactId>hibernate-envers</artifactId>
  <version>3.6.10-Final</version>
</dependency> 
```

（您希望将版本号与例如 hibernate-core 和 hibernate-entitymanager 匹配）

如果您想使用较旧的**Hibernate-3.3**兼容版本，请使用旧组和工件，将此依赖项添加到您的 pom.xml：

```
<dependency>
  <groupId>org.jboss.envers</groupId>
  <artifactId>jboss-envers</artifactId>
  <version>1.2.2.GA-hibernate-3.3</version>
</dependency> 
```

# python - Column Differences in Python Pivot-Table

> ID：13608748
> 
> 赞同：4
> 
> 时间：2012-11-28T15:37:36.400
> 
> 标签：python, pandas, pivot-table

I have a pandas pivot_table that aggregates 2 data sets in 2 columns across several rows. I would like to add another column that is the difference between the aggregated values in the two existing columns by row. Is there a way to implement this directly in the pivot_table() call? I know that the returned pivot is a dataframe so I can calculate it through other means, but just curious if there is a more efficient way.

Simple example of my data:

```
 Set     Type   Val
  S1       A     1
  S1       B     2
  S1       B     3
  S2       A     4
  S2       B     5
  S2       C     6 
```

Using the following code where data is my df

```
piv=pivot_table(data,'Val',rows='Type',cols='Set',aggfunc=sum,fill_value=0.0) 
```

I get the below

```
 S1  S2
A   1   4
B   5   5
C   0   6 
```

I would like the output to be

```
 S1  S2 Diff
A   1   4   3
B   5   5   0
C   0   6   6 
```

or just

```
 Diff
A   3
B   0
C   6 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T23:31:52.053

简单的。数据框（以及一般的矩阵）使一次操作多个元素变得容易。

定义要应用的功能。

```
>>> def abs_diff(x, y):
>>>     return abs(x - y) 
```

然后，应用它。

```
>>> df['Diff'] = abs_diff(df['S1'], df['S2'])

>>> df

   S1  S2  Diff
A   1   4     3
B   5   5     0
C   0   6     6 
```

当然，如果您只想渲染特定列：-

```
>>> df['Diff']

A    3
B    0
C    6
Name: Diff 
```

（`>>>`当然是python shell提示符）

# xslt - replace a character with a set of characters and display message in xslt

> ID：13608750
> 
> 赞同：0
> 
> 时间：2012-11-28T15:37:42.123
> 
> 标签：xslt, xslt-1.0

Input:

```
<Data>
    <info>the %text ^with *special chars asxbajx @ fagfa ~</info>   
</Data> 
```

output:

```
<Data>
    <info> the ++text ++with ++special chars asxbajx ++ fagfa ++</info>
</Data> 
```

Requirement:

Search for some particluar set of characters and replace them with the text "++". If the charecter is encountered need to display message to user.

xslt:

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:my="aaa">

          <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>
          <my:pNames>
            <n>%</n>
            <n>^</n>
            <n>*</n>
            <n>@</n>
            <n>~</n>
          </my:pNames>

          <xsl:template match="node() | @*">
            <xsl:copy>
              <xsl:apply-templates select="node() | @*"/>
            </xsl:copy>
          </xsl:template>

          <xsl:template match="text()">

            <xsl:param name="pText" select="."/>

            <xsl:for-each select="document('')/*/my:pNames/n">

              <xsl:variable name="testvar1" select="."/>    
              <xsl:if test="contains($pText,$testvar1)">
                <xsl:message terminate="no">
                 <xsl:value-of select="$pText"/>
                </xsl:message>
              </xsl:if>
            </xsl:for-each>

            <xsl:variable name="testvar" select="document('')/*/my:pNames"/>

            <xsl:value-of select="
                    translate(
                        .,
                        $testvar,
                        '+'
                        )
                    "/>

          </xsl:template>
        </xsl:stylesheet> 
```

I am not getting the exact output.

Can any one help me.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T09:10:59.320

您遇到的第一个问题是**translate**函数仅将单个字符“翻译”为另一个单个字符。所以不能用`%`双字符串替换单字符`++`。此外，您通常具有相同长度的第二个和第三个参数

```
translate(., '%^*@~', '+++++') 
```

这是因为 'from' 字符被 'to' 字符串中相应位置的字符替换。如果你只做 translate(., '%^*@~', '+') 那么字符`^*@~`将被替换为空！

XSLT1.0 没有替换功能（虽然 XSTL2.0 中存在替换功能），所以首先您需要找到一个递归模板来完成这项工作。这是一个！

```
<xsl:template name="string-replace-all">
 <xsl:param name="text"/>
 <xsl:param name="replace"/>
 <xsl:param name="by"/>
 <xsl:choose>
   <xsl:when test="contains($text,$replace)">
     <xsl:value-of select="substring-before($text,$replace)"/>
     <xsl:value-of select="$by"/>
     <xsl:call-template name="string-replace-all">
       <xsl:with-param name="text" select="substring-after($text,$replace)"/>
       <xsl:with-param name="replace" select="$replace"/>
       <xsl:with-param name="by" select="$by"/>
     </xsl:call-template>
   </xsl:when>
   <xsl:otherwise>
     <xsl:value-of select="$text"/>
   </xsl:otherwise>
 </xsl:choose>
</xsl:template> 
```

与其依次为每个参数调用它，不如先使用 translate 函数将所有有趣的字符替换为一个有趣的字符（例如，`%`）

首先定义一个变量来保存你的第一个字符参数

```
<xsl:variable name="firstchar" select="document('')/*/my:pNames/n[1]" /> 
```

然后像这样定义两个变量

```
 <xsl:variable name="testvar">
     <xsl:apply-templates select="document('')/*/my:pNames/n" mode="replace"/>
  </xsl:variable>

  <xsl:variable name="replace">
     <xsl:apply-templates select="document('')/*/my:pNames/n" mode="by"/>
  </xsl:variable> 
```

相应的模板如下所示

```
<xsl:template match="my:pNames/n" mode="replace">
   <xsl:value-of select="."/>
</xsl:template>

<xsl:template match="my:pNames/n" mode="by">
   <xsl:value-of select="$firstchar"/>
</xsl:template> 
```

这意味着**testvar**变量将设置为`%^*@~`，并且**replace**将设置为`+++++`。然后，您可以使用**翻译**功能将所有出现的有趣字符替换为相同的字符

```
translate(., $testvar, $replace) 
```

这意味着您只需要调用一次替换模板

```
 <xsl:call-template name="string-replace-all">
     <xsl:with-param name="text" select="translate(., $testvar, $replace)" />
     <xsl:with-param name="replace" select="$firstchar" />
     <xsl:with-param name="by" select="'++'" />
  </xsl:call-template> 
```

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:my="aaa">
   <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>
   <my:pNames>
      <n>%</n>
      <n>^</n>
      <n>*</n>
      <n>@</n>
      <n>~</n>
   </my:pNames>

   <xsl:variable name="firstchar" select="document('')/*/my:pNames/n[1]" />

   <xsl:template match="node() | @*">
      <xsl:copy>
         <xsl:apply-templates select="node() | @*"/>
      </xsl:copy>
   </xsl:template>

   <xsl:template match="text()">
      <xsl:param name="pText" select="."/>
      <xsl:for-each select="document('')/*/my:pNames/n">
         <xsl:variable name="testvar1" select="."/>
         <xsl:if test="contains($pText,$testvar1)">
            <xsl:message terminate="no">
               <xsl:value-of select="$pText"/>
            </xsl:message>
         </xsl:if>
      </xsl:for-each>

      <xsl:variable name="testvar">
         <xsl:apply-templates select="document('')/*/my:pNames/n" mode="replace"/>
      </xsl:variable>

      <xsl:variable name="replace">
         <xsl:apply-templates select="document('')/*/my:pNames/n" mode="by"/>
      </xsl:variable>

      <xsl:call-template name="string-replace-all">
         <xsl:with-param name="text" select="translate(., $testvar, $replace)" />
         <xsl:with-param name="replace" select="$firstchar" />
         <xsl:with-param name="by" select="'++'" />
      </xsl:call-template>
   </xsl:template>

   <xsl:template match="my:pNames/n" mode="replace">
      <xsl:value-of select="."/>
   </xsl:template>

   <xsl:template match="my:pNames/n" mode="by">
      <xsl:value-of select="$firstchar"/>
   </xsl:template>

   <xsl:template name="string-replace-all">
     <xsl:param name="text"/>
     <xsl:param name="replace"/>
     <xsl:param name="by"/>
     <xsl:choose>
       <xsl:when test="contains($text,$replace)">
         <xsl:value-of select="substring-before($text,$replace)"/>
         <xsl:value-of select="$by"/>
         <xsl:call-template name="string-replace-all">
           <xsl:with-param name="text" select="substring-after($text,$replace)"/>
           <xsl:with-param name="replace" select="$replace"/>
           <xsl:with-param name="by" select="$by"/>
         </xsl:call-template>
       </xsl:when>
       <xsl:otherwise>
         <xsl:value-of select="$text"/>
       </xsl:otherwise>
     </xsl:choose>
   </xsl:template>   
</xsl:stylesheet> 
```

当应用于您的输入 XML 时，将输出以下内容

```
<Data>
   <info>the ++text ++with ++special chars asxbajx ++ fagfa ++</info>
</Data> 
```

# java - Create new file on server with shared directory (java)

> ID：13608752
> 
> 赞同：1
> 
> 时间：2012-11-28T15:37:44.290
> 
> 标签：java, windows, file, shared-directory

I am not familiar with Windows shared folders, but here is what I have:

```
filePath = //server/TEMP/ **(1)** 
```

server = another machine. TEMP = shared folder.

If I open this line with Explorer it goes to

```
http://server/TEMP/ 
```

and I can see list of files and create new.

If I change

```
filePath = \\server\TEMP\ **(2)** 
```

(slashes replacement) I CAN'T open this directory.

in java code (1.6) I have

```
File f = new File(filePath); 
```

where filePath can be (1) or (2) - no matters, after creating the File object its `.toString()` gives me

> \\server\TEMP\ **(2)**

which CAN'T execute `.createNewFile()` with this exception:

> java.io.IOException: The network path was not found at
> 
> java.io.WinNTFileSystem.createFileExclusively(Native Method) at
> 
> java.io.File.createNewFile(Unknown Source)

How to say to java not to convert my slashes? or how to create file without java.io.File?

Thanks, Roman.

# php - Pass Variable in URL Drupal 7

> ID：13608753
> 
> 赞同：0
> 
> 时间：2012-11-28T15:37:45.427
> 
> 标签：php, mysql, variables

I am trying to pass variable in the url but without success.

In Drupal I have a page with:

```
require_once 'uploaded_files/individual_funds.php?id=8'; 
```

But I get an error: Fatal error: require_once() [function.require]: Failed opening required 'uploaded_files/individual_funds.php?id=8

I understand that Drupal is looking specifically for this url and that why it's not working. But I need to pass the variable into that page. Is there a work around.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:38:54.120

您只能包含文件。您不能通过 调用它们`require`，但**可以**执行以下操作：

```
$_GET['id'] = 8';
require_once 'uploaded_files/individual_funds.php'; 
```

这将为所需文件中的函数设置 get`id`参数。

# qt - Qt5, Phonon and Multimedia kit

> ID：13608755
> 
> 赞同：7
> 
> 时间：2012-11-28T15:37:51.233
> 
> 标签：qt, phonon, qt5

I´m quite new to Qt development and I´m using Qt5 Beta1 on MacOSX.

For the last two days I´ve been reading the docs and looking for information about the different possibilities that I have in order to implement a widget that displays the frame of a video which corresponds to a concrete moment in time. A good old preview, in short. First I thought that, since I did not need anything fancy, Phonon would be the right choice, as it´s called to be "on a higher level (than QTMultimedia) and in many cases more suitable for application developers." I read its documentation and even found some discussions that could help me starting, like this; [http://www.qtcentre.org/threads/13221-QT-4-4-Phonon-Video-Rendering-a-single-frame](http://www.qtcentre.org/threads/13221-QT-4-4-Phonon-Video-Rendering-a-single-frame). But then, when I tried to make something on my own, I realized that I did not have the Phonon library. Surprised from it, I research about Phonon and Qt5\. And that´s when all the trouble began.

I started reading conversation such as this one: [http://comments.gmane.org/gmane.comp.lib.qt.user/1581](http://comments.gmane.org/gmane.comp.lib.qt.user/1581) or this one: [http://comments.gmane.org/gmane.comp.lib.qt.devel/3905](http://comments.gmane.org/gmane.comp.lib.qt.devel/3905) or this other link: [https://bugreports.qt.io/browse/QTBUG-26471](https://bugreports.qt.io/browse/QTBUG-26471). And I got really confused, without knowing if it was a good idea to download the Phonon library or it was not going to be supported on Qt5 after some time. So I decided to go a step back and think again about using QTMultimedia instead of Phonon. I looked at their VideoWidget example [http://doc.qt.io/qt-4.8/qt-multimedia-videowidget-example.html](http://doc.qt.io/qt-4.8/qt-multimedia-videowidget-example.html) and when I tried to run it, it threw several errors (I´m posting just the beginning of the output):

```
In file included from ../VideoExample/videoplayer.cpp:43:
In file included from ../VideoExample/videowidget.h:44:
../VideoExample/videowidgetsurface.h:57:11: warning: 'VideoWidgetSurface::isFormatSupported' hides overloaded virtual function [-Woverloaded-virtual]
 bool isFormatSupported(const QVideoSurfaceFormat &format, QVideoSurfaceFormat *similar) const;
      ^
../../Downloads/qt-everywhere-opensource-src-5.0.0-beta1/qtbase/include/QtMultimedia/../../../qtmultimedia/src/multimedia/video/qabstractvideosurface.h:78:18: note: hidden overloaded virtual function 'QAbstractVideoSurface::isFormatSupported' declared here
virtual bool isFormatSupported(const QVideoSurfaceFormat &format) const;
             ^
../VideoExample/videoplayer.cpp:61:40: error: expected a type
 QAbstractButton *openButton = new QPushButton(tr("Open..."));
                                   ^
../VideoExample/videoplayer.cpp:62:6: error: no matching member function for call to 'connect'
 connect(openButton, SIGNAL(clicked()), this, SLOT(openFile()));
 ^~~~~~~
../../Downloads/qt-everywhere-opensource-src-5.0.0-beta1/qtbase/include/QtCore/../../src/corelib/kernel/qobject.h:211:36: note: candidate function not viable: cannot convert argument of incomplete type 'QAbstractButton *' to 'const QObject *'
static QMetaObject::Connection connect(const QObject *sender, const char *signal, 
```

And this is the moment when I felt I was completely lost and wrote here :/

So my actual questions are:

1.  Does anyone knows the actual state of Phonon and if it´s a good idea to use it for Qt5? Is so, what do I have to make it work? I guess I´m mixing concepts here, but I´m terribly lost between what belongs to Qt and what no, and what are the implications of both possibilities.
2.  Any idea why the example from QTMultimedia does not work?

In general, thoughts about this topic would be greatly appreciated.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T17:09:08.570

[Qt 5（ Qt 和关键技术](http://qt-project.org/doc/qt-5.0/technology-apis.html)）中似乎不包含 Phonon 框架。

您测试的示例似乎仅适用于 Qt 4.7，而不适用于 Qt 5。可以在[此处](http://qt-project.org/doc/qt-5.0/qtmultimedia/multimediawidgets-videowidget.html)找到 Qt 5.0 版本。Qt 5.1 版本可以在[这里](http://qt-project.org/doc/qt-5.1/qtmultimediawidgets/videowidget.html)找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-09T14:56:14.933

尝试安装声子开发套件。

`yum install phonon-devel`

# matlab - How to concatenate blocks of matrices to a single matrix in matlab?

> ID：13608757
> 
> 赞同：-1
> 
> 时间：2012-11-28T15:37:52.570
> 
> 标签：matlab, matrix, octave

I have 8x8 blocks of matrices. I want to concatenate all the blocks into a single matrix. Can anyone suggest me how to do it in matlab?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T15:41:45.200

Lets look at a small example, suppose you have four 3x3 matrices:

```
A = rand(3);
B = rand(3);
C = rand(3);
D = rand(3); 
```

Then you can concatenate them by doing:

```
M = [A B;C D] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T15:40:55.367

我认为您可以通过在 matlab 中使用 horzcat 函数来做到这一点。[http://www.mathworks.in/help/matlab/ref/horzcat.html](http://www.mathworks.in/help/matlab/ref/horzcat.html) 看看这是否可以帮助你

# html - Is Raphael.js still supported?

> ID：13608759
> 
> 赞同：8
> 
> 时间：2012-11-28T15:38:00.377
> 
> 标签：html, svg, raphael

I was about to start using [http://raphaeljs.com/](http://raphaeljs.com/) for the first time on quite a big project but I'm wondering about learning a new library that many not be supported.

The github page shows 33 pull requests and the last commit 9 months ago. SHould this should be a concern or should I dive in?

# google-maps - kml global extent

> ID：13608760
> 
> 赞同：0
> 
> 时间：2012-11-28T15:38:03.340
> 
> 标签：google-maps, kml

I have a kml document that contains a polygon that should cover the whole world but it is rendered as a line along the antimeridian (i.e. the international date line) in Google Maps. Here is the offending snippet:

```
<Polygon>
    <outerBoundaryIs>
        <LinearRing>
            <coordinates>-180.0,-90.0 -180.0,90.0 180.0,90.0 180.0,-90.0 -180.0,-90.0</coordinates>
        </LinearRing>
    </outerBoundaryIs>
</Polygon> 
```

Workaround? Any hints?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T00:37:52.883

添加一些额外的点（似乎是走捷径，但不是那么简单），这似乎工作：

```
 <Placemark>
  <MultiGeometry>
    <Polygon>
      <outerBoundaryIs>
        <LinearRing>
          <coordinates>180.0,-85.0 180.0,0.0 180.0,85.0 90.0,85.0 0.0,85.0 0.0,0.0 0.0,-85.0 90.0,-85.0 180.0,-85.0</coordinates>
        </LinearRing>
      </outerBoundaryIs>
    </Polygon>
    <Polygon>
      <outerBoundaryIs><LinearRing>
          <coordinates>-180.0,-85.0 -90.0,-85.0 0.0,-85.0 0.0,0.0 0.0,85.0  -90.0,85.0 -180.0,85.0 -180.0,0.0 -180.0,-85.0</coordinates>
        </LinearRing>
      </outerBoundaryIs>
    </Polygon>
  </MultiGeometry>
</Placemark> 
```

[不太工作的例子](https://maps.google.com/maps?q=http%3a%2F%2Fwww.geocodezip.com%2Fgeoxml3_test%2FCoverWorldMG_kml.xml%3F0&hl=en&ll=-2.811371,132.1875&spn=132.694816,346.289063&sll=0,-45&sspn=132.74551,346.289063&t=h&z=2&iwloc=lyrftr%3akml%3acjy5Wd1IV6vbsEDb7g4q2m1n_MDcKmey4FV29MidhAg,g4dd84188512a233c,8.407168,121.939455)

[尽管在 Google Maps 和在Google Maps API v3](http://www.geocodezip.com/v3_GoogleEx_layer-kml_linktoB.html?filename=http://www.geocodezip.com/geoxml3_test/CoverWorldMG_kml.xml)中使用 KmlLayer 显示它的不同缩放级别似乎确实存在问题。

[geoxml3 似乎工作正常](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?filename=http://www.geocodezip.com/geoxml3_test/CoverWorldMG_kml.xml)

# autocomplete - KendoUI Autocomplete with external datasource

> ID：13608761
> 
> 赞同：2
> 
> 时间：2012-11-28T15:38:06.067
> 
> 标签：autocomplete, datasource, kendo-ui

need some help before my brain explodes.. cant seem to understand what im doing wrong

have a quite simple autocomplete.

```
$(document).ready(function () {

    var data =new kendo.data.DataSource({
        serverFiltering: true,
        transport: {
            read: "data/output.txt" 
        }
    });
  $("#input").kendoAutoComplete({
            dataSource: data
      });
        }); 
```

But no matter how hard i try i dont get the result i want, just the list with one letter vertical..? I dont know how am the external file supposed to look? as now it just is:

```
"value1",
"value2",
"value3" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:31:14.703

发生这种情况是因为您的 dataSource 认为源是作为该文本文档内容的字符串，并且它为字符串中的每个字符创建一个项目。

[要么使用像这里](http://jsbin.com/edamuj/110/edit)这样的本地绑定。

或者创建一个服务/操作，它将为您提供适当的 json、odata 或其他数据。包含符号的文本文件不是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T00:20:35.553

您返回数据的方式不是最方便的。您应该尝试将其作为 JSON 数组返回：

```
[ 
    "text1",
    "text2",
    "text3"
] 
```

但是，KendoUI 开发人员非常好，允许您在可以转换格式`parse`的地方定义一个函数。`DataSource.schema`

尝试使用如下`DataSource`定义：

```
var data = new kendo.data.DataSource({
    serverFiltering:true,
    transport      :{
        read:"data/output.txt"
    },
    schema         :{
        parse:function (a) {
            return JSON.parse("[" + a + "]");
        }
    }
}); 
```

# openerp - 限制选择选项

> ID：13608764
> 
> 赞同：3
> 
> 时间：2012-11-28T15:38:11.383
> 
> 标签：openerp

如何限制视图中的选择选项？例如`account.voucher`有 4 个类型选项，但我只想显示其中两个。您如何在视图定义中实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T16:09:09.570

如果选择应用于关系字段（o2m、m2m），您可以在 xml 视图本身上使用域。如果选择实际上是一个选择字段，恐怕你不能从 XML 中做到这一点。

您应该能够通过覆盖`fields_view_get`（或`fields_get`现在不记得）来做到这一点。从那里你可以操作所有你想要的东西，但你必须处理 python 代码和 XML 构建。

`grep "def $your_method_here" *`进入插件文件夹是你的朋友；）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T18:11:03.750

使用`domain`属性。

```
<field name="voucher_id" domain="[('type','in',['payment','receipt'])]"/> 
```

这也可以直接在业务对象模型中完成：

```
_columns = {
    'voucher_id': fields.many2one('account.voucher', 'Voucher', 
                  domain="[('type','in',['payment','receipt'])]",
} 
```

# tcl - 彩色放入文本小部件

> ID：13608766
> 
> 赞同：0
> 
> 时间：2012-11-28T15:38:17.240
> 
> 标签：tcl

当我想在终端中输出彩色字符串（红色）时，我使用：

```
puts "\033\[00;31m Test String \033\[0m" 
```

但是当我在文本小部件中打印这个字符串时，我得到：

```
[00;31m Test String [0m 
```

如何在文本小部件中打印相同的彩色字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T13:42:31.947

据我了解，它是关于将格式应用于与 Tk 而不是转义序列有关的文本小部件内容的问题。这可以通过标签来实现。这是创建文本小部件的代码，在其中放入两行并用红色突出显示第二行。

```
set t [text .t -height 10 -width 40]
pack $t
$t insert end "text1\n"
$t insert end "text2\n"
$t tag add my_red 2.0 2.end
$t tag configure my_red -foreground red 
```

如果问题只是关于格式，我希望这会有所帮助。

PN

# jquery - Maintain last viewed page after server post using $.mobile.changePage

> ID：13608770
> 
> 赞同：0
> 
> 时间：2012-11-28T15:38:30.667
> 
> 标签：jquery, jquery-mobile

I used `$.mobile.changePage("#page3")` in my code and designed as

```
/* Default.aspx */
<div data-role="page" id="page1">HomePage</div>
<div data-role="page" id="page2">Something</div>
<div data-role="page" id="page3">
     <asp:Button ID="btnSubmit" runat="server" Text="Submit" OnClick="cmdsubmit_Click"/>
</div>
<div data-role="page" id="page4">Something</div> 
```

In code behind

```
/* Default.cs */
cmdsubmit_Click(object sender, EventArgs e)
{
//Open DB Connection
//Insert Records
//Status bind to label
} 
```

I have written some DB process in button click event. My problem is when changed to 'page3' and clicked button, after the response 'page1' is displaying instead of 'page3'. But in URL showing as 'ActualURL#page3'. How can I maintain last viewed page 'page3'?

# .net - “运行一次”大量数据插入......本地VS网络连接？

> ID：13608771
> 
> 赞同：0
> 
> 时间：2012-11-28T15:38:35.303
> 
> 标签：.net, sql-server, optimization, entity-framework-4

所以我有这个一次性交易，我必须从不同的数据库/表中获取数据，切片和切块并将其插入到一个表中。

这是通过 Windows Form C# .NET 4.0 应用程序完成的。

对于我们将在 CRM 环境中使用的每个不同实体，我必须（显然）运行一次一次性交易流程。

对于某些实体，只需插入 20,000 行，因此网络 SQL 连接就可以了。

但这另一个是 800,000 长，需要很长时间才能完成。

我想知道是否可以通过在 SQL Server 本身上安装应用程序并在我的连接字符串中指定本地连接而不是网络连接来获得任何速度。

我必须提出正式请求才能获得对该服务器的远程桌面访问权限，这就是为什么我在实际测试之前询问其他人是否曾经在这里成功使用过这种方法。

此外，我正在通过 Entity Framework 4 进行`SaveChanges()`插入，我在每个插入的行中调用它。也许，那里也有优化的空间，我愿意阅读您的意见。

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T15:42:37.540

任何时候您可以消除网络，您都会看到性能提升。对于 800k 行，我会使用 SqlBulkCopy 类。它非常易于使用，基本上相当于在封面下进行 BULK INSERT。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T15:56:40.387

除非所有数据库/表都在同一台服务器上，否则不会有太多收获。如果您在同一个物理盒子上执行插入，是的，这会提高插入速度，但您仍然有网络在读取。

一次插入一行是最慢的本地或远程插入。

查看 SqlBulkCopy (+1 Philip)、TVP 或 Drapper 以优化插入。

切片和切丁？这有多复杂？它需要.NET吗？这可以用 TSQL 完成吗？

# android - query about data storing in android

> ID：13608773
> 
> 赞同：1
> 
> 时间：2012-11-28T15:38:39.613
> 
> 标签：android, database

How can I store data about books like author name, price, category etc in a book shopping android app and retrieve all books with details including corresponding image on selecting a category of book in a activity page?

I want to create stock inventory for my app that contain images with other data and retrieve these data. I'm using eclipse for developing my android app.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:42:08.257

这个问题实在是太笼统了，无法回答。但是这个项目应该为您想要的东西提供一个良好的开端：[货架](http://code.google.com/p/shelves/)。

一旦你开始，回来提出更具体的问题，不要低估搜索功能和谷歌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T15:41:53.293

I think you should use some light weight database. Some options as below:

1.  [**SQLite**](http://www.sqlite.org/): SQLite is a software library that implements a self-contained, serverless, zero-configuration, transactional SQL database engine. SQLite is the most widely deployed SQL database engine in the world. The source code for SQLite is in the public domain.

2.  [**HSQL**](http://hsqldb.org/): HSQLDB (HyperSQL DataBase) is the leading SQL relational database engine written in Java. It offers a small, fast multithreaded and transactional database engine with in-memory and disk-based tables and supports embedded and server modes. It includes a powerful command line SQL tool and simple GUI query tools.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T15:43:13.327

最有效的方法是使用`SQLite`数据库。要参加速成课程`SQLite`，请到[这里](http://mobile.tutsplus.com/tutorials/android/android-sqlite/)。至于存储图片，你应该将它存储在 sdcard 中，并将图像的路径保存在`SQLite` `database`.

# asp.net-mvc-3 - 如何将值从全局过滤器传递到控制器？

> ID：13608778
> 
> 赞同：1
> 
> 时间：2012-11-28T15:38:48.700
> 
> 标签：asp.net-mvc-3, controller, filtering, global, global-filter

在 MVC3 应用程序中，我需要一个全局过滤器来获取一个值，并且在执行任何控制器之前，但是我以后如何从控制器中获取该值？

```
public class MyGlobalFilter : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        int i = 10;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T15:57:27.880

您可以使用[HttpContext.Items](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.items.aspx)

```
public class MyGlobalFilter : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        HttpContext.Current.Items["I"] = 10;
    }
}
public class MyController : Controller
{
    private int _i;
    protected override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        _i = (int)HttpContext.Items["I"];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T16:03:39.100

我发现可以通过动作控制器上下文设置一个新的 ViewBag 值，如下所示

```
filterContext.Controller.ViewBag.MyNewValue = 1 
```

# core-audio - 将回调附加到远程 IO 的输出元素

> ID：13608789
> 
> 赞同：2
> 
> 时间：2012-11-28T15:39:19.887
> 
> 标签：core-audio

我想从 iOS 设备的麦克风捕获音频并将其写入 .caf 文件。

我能够将远程 IO 音频单元连接到多通道混音器单元 (MCMU) 并将回调附加到 MCMU 的输入。在该回调中，我可以使用 ExtAudioFileAsyncWrite() 成功地将麦克风中的音频数据写入文件。

我想简化事情并从图片中删除 MCMU。我的想法是我可以简单地将回调附加到远程 IO 输入范围的输出总线，并在该回调中调用 ExtAudioFileAsyncWrite()。

但是，当我尝试这个 ExtAudioFileAsyncWrite() 返回 -50 (paramError)。

不能将回调附加到远程 IO 的输入元素的输出总线吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T21:59:56.927

有可能的。您将要使用`AudioUnitSetProperty`来设置[`kAudioOutputUnitProperty_SetInputCallback`](http://developer.apple.com/library/ios/documentation/AudioUnit/Reference/AudioUnitPropertiesReference/Reference/reference.html#//apple_ref/doc/c_ref/kAudioOutputUnitProperty_SetInputCallback)属性。这个回调函数的功能很像渲染回调，但只要 RemoteIO / mic 为您提供一些新数据（而不是作为来自您的程序的数据请求），就会调用此回调。

例子：

```
AURenderCallbackStruct callbackInfo = {YourInputCallback, NULL};
AudioUnitSetProperty(remoteIO,
                     kAudioOutputUnitProperty_SetInputCallback,
                     kAudioUnitScope_Global,
                     0,
                     &callbackInfo,
                     sizeof(callbackInfo)); 
```

`YourInputCallback`这将在有新批次样本时进行 RemoteIO / mic 调用。`ExtAudioFileWriteAsync`您可以像以前一样使用此回调进行调用。请注意，您还必须调用`AudioUnitRender`RemoteIO，才能从中获取新样本。

关于 -50 错误，这不是一个非常有用的错误诊断。它基本上只是说“您的一个参数有错误”。您很可能`ExtAudioFile`是 NULL 或未正确设置（在这种情况下，`ExtAudioFile*`您之前使用的函数之一会返回一个更有用的错误代码，您可以使用它来诊断它）。

# xcode - 对象为 Nil 时的行为 MutableCopy

> ID：13608795
> 
> 赞同：4
> 
> 时间：2012-11-28T15:39:29.097
> 
> 标签：xcode, nsmutablearray, immutability, mutable

（我在网上找不到这个）

所有代码都在一个对象中。在 .h 文件中，我定义了一个 NSMutableArray。我在初始化中分配它。

```
-(id)init{
    self = [super init];
    if(self) {
        definitionArray=[[NSMutableArray alloc] init];
        [self initialLoadDefinitionData];

        if([definitionArray isKindOfClass:[NSMutableArray class]]) {
           NSLog(@"Array is Mutable");
        } else {
           NSLog(@"Array is Not Mutable");
        }

    }
    return self;
} 
```

我想根据 NSUserDefaults 值进行初始化，所以我从 init 调用另一个函数。这称为 initialLoadDefinitionData:theCollection 是非常基本的。

```
-(void)loadDefinitionData{
    definitionArray=[[[NSUserDefaults standardUserDefaults] objectForKey:@"SOMEKEY"] mutableCopy];
} 
```

我在 init 函数中添加了 isKindOfClass 仅用于调试目的。有趣的是，当可以从 NSUserDefaults 获取数据时，该 IF 语句返回 MUTABLE。但是，如果 @"SOMEKEY" 不可用，则 objectForKey 返回 nil，并且 definitionArray 突然变为 IMMUTABLE。即使指定了 mutableCopy。

所以我的结论是，如果 objectForKey 找不到对象，则返回值是 NOT MUTABLE。这个结论正确吗？或者不能 MutableCopy 不能处理一个对象，因为它是 Nil 的可变对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T16:16:03.800

不，你的结论是不对的。如果`objectForKey`返回`nil`，那么您发送的`mutableCopy`消息`nil`当然会返回`nil`（发送到`nil`ObjC 中的每条消息都会返回`nil`），这就是您看到该`else`部分的原因。（该`Array is Not Mutable`消息具有误导性，因为此时您甚至没有`NSArray`实例）。

# c# - 递归触发 SizeChanged 事件

> ID：13608799
> 
> 赞同：2
> 
> 时间：2012-11-28T15:39:41.357
> 
> 标签：c#, wpf, events

我的一个窗口中有一个 SizeChanged 事件。其中一个用户控件 Width 的行为很有趣，因此我决定在 SizeChanged 事件中静态设置窗口的宽度。问题是，当我在 size changed 事件中设置窗口的大小时，它会触发另一个 size changed 事件！我希望用户能够调整窗口大小，然后只触发一次事件。我试过了 ：

```
e.Handled = true; 
```

以及在窗口构造函数中添加事件处理程序，并在大小更改事件中删除它。（这使得它只能触发一次，并且在窗口的生命周期内永远不会再次触发）。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:57:47.973

您应该使用私有 bool 并在大小更改时更改其值

```
bool _sizeChanged=false;
void handleResize(Object sender, EventArgs e)
{
  if (_sizeChanged==false)
  {
    // do stuff
  }
   _sizeChanged=true;
} 
```

**但这还不够**，因为您应该在其他地方再次更改它的值。如果您不更改其值（例如在其他地方更改为 false），它将永远不会再次通过“if”条件。所以问题是，你应该在哪里改变它的价值。

我认为您可以在事件中更改值`MouseButtonUp`，因为调整大小是用鼠标完成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T15:46:47.917

您可以使用 a`boolean`来确定是否处理您的事件。

```
private bool m_handleResizeEvent;
private void HandleResize(object sender, EventArgs e)
{
    if (m_handleResizeEvent)
    {
         m_handleResizeEvent = false;
         // perform your resize here
         m_handleResizeEvent = true;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T16:27:06.103

原来是我的 Window 的 XAML 中的 SizeToContent="Width" 属性导致 SizeChanged 被多次调用。删除此属性解决了我的问题，并允许我调整窗口大小而无需多次触发事件。感谢其他所有人的回答和投入！

# qt - 在 qt5 的 qtquick 2.0 中渲染自定义 opengl

> ID：13608802
> 
> 赞同：14
> 
> 时间：2012-11-28T15:39:52.117
> 
> 标签：qt, opengl, qt-quick, qt5

我正在寻找一种方法来在 qtquick 2.0 项目中呈现我的自定义 opengl 调用。给你一些背景信息：我有一个使用 opengl 进行渲染的 C++ 3d 引擎。目标是让它在 qtquick 2.0 UI 中呈现。

我发现在 qt 5.0 (qtquick 2.0) 之前，您可以使用 QtGlWidget 并将其嵌入到 QDeclarativeView 中。我发现的另一种方法是使用 QtDeclarativeItem 并覆盖 void QDeclarativeItem::paint(QPainter *p, const QStyleOptionGraphicsItem *o, QWidget *w) 方法。

据我了解，这是不可能的，因为 QtQuick 2.0 使用了基于 OpenGL 的新渲染器。因此，它似乎不像覆盖绘画方法那么容易。

有人知道我将如何实现一个允许渲染我的 opengl 调用的 QQuickItem 吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-04T06:03:24.377

你可以做两件事之一。将您的内容渲染到纹理中，或者通过使用`QQuickWindow::beforeRendering`or`QQuickWindow::afterRendering`信号挂钩在场景图的 OpenGL 上下文中渲染。

关于如何使用 FBO 和纹理的示例可以在这里找到：http: [//doc.qt.io/qt-5/qtquick-scenegraph-textureinsgnode-example.html](http://doc.qt.io/qt-5/qtquick-scenegraph-textureinsgnode-example.html)

可以在此处找到有关如何直接渲染到场景图的 OpenGL 上下文的示例：http: [//doc.qt.io/qt-5/qtquick-scenegraph-openglunderqml-example.html](http://doc.qt.io/qt-5/qtquick-scenegraph-openglunderqml-example.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T13:17:10.940

在您的 3D 引擎中，渲染成纹理并在您的`QQuickItem`使用`QSGSimpleTextureNode`中显示渲染结果。QtQuick 维护它自己的 GL 状态，否则您可能会搞砸，这就是为什么建议仅使用 QSG* 类来显示自定义内容的原因。基本上，普通的 QtQuick 是一种用于渲染矩形的工具，而不是一般的 3D 内容。

（跛脚）示例：

```
QScopedPointer<QSGTexture> texture_;

QSGNode* MyItem::updatePaintNode(QSGNode* node, UpdatePaintNodeData*)
{
  if (width() <= 0 || height() <= 0)
  {
    texture_.reset();

    delete node;
    return 0;
  }
  else
  {
    if (!node)
    {
      node = new QSGSimpleTextureNode;

      static_cast<QSGSimpleTextureNode*>(node)
        ->setFiltering(QSGTexture::Nearest);
    }
    // else do nothing

    static_cast<QSGSimpleTextureNode*>(node)->setRect(boundingRect());

    getTheTextureFrom3DEngine(texture_);

    Q_ASSERT(texture_);
    static_cast<QSGSimpleTextureNode*>(node)->setTexture(texture_.data());

    return node;
  }
} 
```

您还需要实例化一个 Timer 来更新内容。您可以在 QQuickItem 中执行此操作。

# sql - SQL：如果第一个查询没有返回任何行，则调用第二个查询

> ID：13608803
> 
> 赞同：1
> 
> 时间：2012-11-28T15:39:58.407
> 
> 标签：sql, database, join, db2

我正在努力将我放在一起的这两个语句组合成一个语句。

我的第一个语句实际上是 3 个语句，其中我只希望第一个返回值的语句被返回，这是一种享受。

```
SELECT ReferenceKey, ReferenceValue FROM
(   
    SELECT a.GBNK076 AS ReferenceKey, TRIM(a.GBNK076) ||' - '||  b.BANM11 AS ReferenceValue, 1 as preference 
    FROM THTFU.THAP076P AS a LEFT OUTER JOIN OSLTHLF3.CSP11  AS b ON  b.BANK11 = a.GBNK076  AND b.CONO11 = a.CONO076 
    WHERE a.CONO076 = '01' AND a.PMTH076 = 'BMG' AND a.CURN076 = 'EUR'  
    UNION
    SELECT a.GBNK076 AS ReferenceKey, TRIM(a.GBNK076) ||' - '||  b.BANM11 AS ReferenceValue, 3 as preference 
    FROM THTFU.THAP076P AS a LEFT OUTER JOIN  OSLTHLF3.CSP11  AS b ON  b.BANK11 = a.GBNK076 AND b.CONO11 = a.CONO076 
    WHERE a.CONO076 = '01' AND a.PMTH076 = 'BMG' AND a.CURN076 = ''
    UNION
    SELECT a.GBNK076 AS ReferenceKey, TRIM(a.GBNK076) ||' - '||  b.BANM11 AS ReferenceValue, 3 as preference 
    FROM THTFU.THAP076P AS a LEFT OUTER JOIN  OSLTHLF3.CSP11  AS b ON  b.BANK11 = a.GBNK076 AND b.CONO11 = a.CONO076 
    WHERE a.CONO076 = '01' AND a.PMTH076 = '' AND a.CURN076 = ''
)BankPayingFrom ORDER BY preference
FETCH FIRST 1 ROWS ONLY 
```

但是，如果这三个语句都没有返回任何信息，我希望能够触发下面的 SQL 语句来检索所有可能的记录。

```
SELECT BANK11 as ReferenceKey, TRIM(BANK11) ||' - '|| BANM11 as ReferenceValue From OSLTHLF3.CSP11 WHERE CONO11 = '01' 
```

如何将这两个语句连接在一起，以便我只需从我的 Web 服务调用一次后端数据库（AS/400 DB2 数据库）？

我会很感激任何帮助。

非常感谢克里斯蒂安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T17:33:47.713

在不知道您的数据集的情况下，很难确定，但我相信这可能是一个更干净的选择。它*也可能*执行得更快，但我不能保证。

```
WITH  BankPayingFrom (referenceKey, referenceValue) as (
      SELECT a.GBNK076, TRIM(b.BANK11) ||' - '||  b.BANM11 -- typo? 'b.BANK11'?
      FROM THTFU.THAP076P as a
      LEFT JOIN OSLTHLF3.CSP11 as b
                ON b.BANK11 = a.GBNK067
                   AND b.CONO11 = a.CONO076
      WHERE a.CONO076 = '01'
            AND ((a.PMTH076 = 'BMG' AND a.CURN076 = 'EUR')
                 OR (a.PMTH076 = 'BMG' AND a.CURN076 = '')
                 OR (a.PMTH076 = '' AND a.CURN076 = ''))
            -- You may be able to use the following, but only if
            -- a.PMTH076 is set for every set value of a.CURN076
               -- AND (a.PMTH076 = 'BMG' OR a.PMTH067 = '')
               -- AND (a.CURN076 = 'EUR' OR a.CURN076 = '')
      ORDER BY a.PMTH076 DESC, a.CURN076 DESC
      FETCH FIRST 1 ROW ONLY)

SELECT referenceKey, referenceValue 
FROM BankPayingFrom
UNION 
SELECT BANK11 as referenceKey, TRIM(BANK11) ||' - '|| BANM11 as referenceValue
FROM  OSLTHLF3.CSP11
WHERE CONO11 = '01'
      AND NOT EXISTS (SELECT '1'
                      FROM BankPayingFrom) 
```

...尽管进一步观察，唯一真正的区别在于`a.GBNK076`CTE。如果存在“匹配”行，您是否只需要 1 行`THAP076P`，否则您想要所有行？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T19:29:56.313

不确定 AS/400 (iSeries)，但这是我在 Linux Unix Windows 上的操作方式：

```
WITH BankOrderFromOne(ReferenceKey, ReferenceValue)
AS (
    SELECT ReferenceKey, ReferenceValue FROM
    (   
        SELECT a.GBNK076 AS ReferenceKey, TRIM(a.GBNK076) ||' - '||  b.BANM11 AS ReferenceValue, 1 as preference 
        FROM THTFU.THAP076P AS a LEFT OUTER JOIN OSLTHLF3.CSP11  AS b ON  b.BANK11 = a.GBNK076  AND b.CONO11 = a.CONO076 
        WHERE a.CONO076 = '01' AND a.PMTH076 = 'BMG' AND a.CURN076 = 'EUR'  
        UNION
        SELECT a.GBNK076 AS ReferenceKey, TRIM(a.GBNK076) ||' - '||  b.BANM11 AS ReferenceValue, 3 as preference 
        FROM THTFU.THAP076P AS a LEFT OUTER JOIN  OSLTHLF3.CSP11  AS b ON  b.BANK11 = a.GBNK076 AND b.CONO11 = a.CONO076 
        WHERE a.CONO076 = '01' AND a.PMTH076 = 'BMG' AND a.CURN076 = ''
        UNION
        SELECT a.GBNK076 AS ReferenceKey, TRIM(a.GBNK076) ||' - '||  b.BANM11 AS ReferenceValue, 3 as preference 
        FROM THTFU.THAP076P AS a LEFT OUTER JOIN  OSLTHLF3.CSP11  AS b ON  b.BANK11 = a.GBNK076 AND b.CONO11 = a.CONO076 
        WHERE a.CONO076 = '01' AND a.PMTH076 = '' AND a.CURN076 = ''
    )BankPayingFrom ORDER BY preference
    FETCH FIRST 1 ROWS ONLY
)

SELECT ReferenceKey, ReferenceValue FROM BankOrderFromOne

UNION

SELECT BANK11 as ReferenceKey, TRIM(BANK11) ||' - '|| BANM11 as ReferenceValue From OSLTHLF3.CSP11 WHERE CONO11 = '01'
AND NOT EXISTS (SELECT ReferenceKey, ReferenceValue FROM BankOrderFromOne) 
```

# django - 有 Django 和 Tastypie 的身份验证示例吗？

> ID：13608804
> 
> 赞同：1
> 
> 时间：2012-11-28T15:40:06.030
> 
> 标签：django, django-models, tastypie, django-authentication

是否有 Django 和 Tastypie 的基本身份验证示例？我对 Django 中的身份验证如何工作，特别是 Tastypie 有点困惑。我想知道身份验证如何与 api 密钥一起工作，以及如何使用 Django 拥有的内置用户模型对用户进行身份验证。任何建议或代码都非常感谢。谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-07-28T20:14:47.463

只是为了回答您有关身份验证的问题：

**Django 中的身份验证如何工作？**

需要 Django 身份验证才能`SessionMiddleware`工作。加载会话后，Django 身份验证后端会读取一个特殊的 cookie `_auth_user`(IIRC)，其中包含当前登录的用户 ID。如果您可以访问 django shell，您可以操作它并让自己以任何用户身份登录！一旦后端注意到有一个`_auth_user`键，它就会向请求中添加一个惰性用户对象（因此它会延迟它`User.objects.get(...)`直到真正需要它）。如果会话字典中没有这样的键，则声称用户是匿名的，而是将 的实例`AnonymousUser`添加到请求对象中。

**Tastypie 中的身份验证如何工作？**

在执行资源视图之前，会调用一个方法，`Resource.is_authenticated(request)`该方法又会调用您选择的后端的`is_authenticated(request)`方法。如果该方法返回，则声称身份验证失败并返回错误。如果方法返回 a ，则返回响应。如果该方法返回，则声称该请求已通过身份验证。`authentication``Resource``False``Unauthorized``HttpResponse``True`

**用户模型认证如何在 Tastypie 中工作？**

用户模型认证可以使用`SessionAuthentication`Tastypie 本身提供的后端来执行。它所做的是为当前请求创建一个会话，以便身份验证中间件可以自动将相关的用户模型插入到请求中。请注意，要使此方法起作用，您的 API 客户端必须支持存储 cookie 并在以后的请求中重新发送它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T22:36:06.893

您可能会发现这很有用。它允许您根据 Django 会话 cookie 对用户进行身份验证。

[https://github.com/amezcua/TastyPie-DjangoCookie-Auth/blob/master/DjangoCookieAuth.py](https://github.com/amezcua/TastyPie-DjangoCookie-Auth/blob/master/DjangoCookieAuth.py)

我在我的应用程序中使用它并且它有效！

# javascript - 如何从外部停止正在运行的功能

> ID：13608807
> 
> 赞同：-1
> 
> 时间：2012-11-28T15:40:11.047
> 
> 标签：javascript

有没有办法从这个函数之外停止正在运行的 Javascript 函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T15:45:51.410

不，JS 中没有函数的“外部”。一旦运行脚本在函数“外部”，该函数就完成了运行。

**更新**

如果在特定函数运行时某些条件可能变为真，您希望使该函数退出，那么您可以定期检查函数内部的该条件，如果为真则退出该函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T15:49:21.390

HTML5 支持[web Worker的多线程](http://www.sitepoint.com/javascript-threading-html5-web-workers/)

# xamarin.ios - 单点触控对话框单个视图上的多个无线电组（单个根元素）

> ID：13608810
> 
> 赞同：3
> 
> 时间：2012-11-28T15:40:20.627
> 
> 标签：xamarin.ios, monotouch.dialog

我想在一个带有单点触控对话框的单个 rootelelement 中使用多个无线电组。每个广播组都有自己的部分。我找不到使这项工作的方法，因为单个无线电组只能分配给根元素

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T10:12:42.597

svn！

这是我的解决方案

```
public class CustomRootElement : RootElement
{
    private RadioGroup _defaultGroup = new RadioGroup(0);
    private Dictionary<string, RadioGroup> _groups = new Dictionary<string, RadioGroup>();

    public CustomRootElement(string caption = "") : base(caption , new RadioGroup("default",0))
    {
    }

    public CustomRootElement(string caption, Group group, Func<RootElement, UIViewController> createOnSelected) : base(caption, group)
    {

        var radioGroup = group as RadioGroup;

        if(radioGroup != null)
        {
            _groups.Add(radioGroup.Key.ToLower(), radioGroup);
        }

        this.createOnSelected = createOnSelected;
    }

    public override UITableViewCell GetCell(UITableView tv)
    {
        var cell =  base.GetCell(tv);

        cell.SelectionStyle = UITableViewCellSelectionStyle.None;

        return cell;
    }

    public int Selected(string group)
    {
        if (string.IsNullOrEmpty(group))
        {
            throw new ArgumentNullException("group");
        }

        group = group.ToLower();
        if (_groups.ContainsKey(group))
        {
            return _groups[group].Selected;
        }

        return 0;
    }

    public void Select(string group, int selected)
    {
        if (string.IsNullOrEmpty(group))
        {
            throw new ArgumentNullException("group");
        }

        var radioGroup = GetGroup(group);
        radioGroup.Selected = selected;
    }

    internal RadioGroup GetGroup(string group)
    {
        if (string.IsNullOrEmpty(group))
        {
            throw new ArgumentNullException("group");
        }

        group = group.ToLower();
        if (!_groups.ContainsKey(group))
        {
            _groups[group] = new RadioGroup(group , 0);
        }

        return _groups[group];
    }

    internal NSIndexPath PathForRadioElement(string group, int index)
    {

        foreach (var section in this)
        {       
            foreach (var e in section.Elements)
            {
                var re = e as SlRadioElement;
                if (re != null 
                    && string.Equals(re.Group, group,StringComparison.InvariantCultureIgnoreCase)
                    && re.Index == index)
                {
                    return e.IndexPath;
                }
            }
        }

        return null;
    }

}

public class CustomRadioElement : RadioElement
{
    public event Action<CustomRadioElement> ElementSelected;

    private readonly static NSString ReuseId = new NSString("CustomRadioElement");
    private string _subtitle;
    public int? Index  { get; protected set; }

    public CustomRadioElement(string caption, string group = null, string subtitle = null) :base(caption, group)
    {
        _subtitle = subtitle;
    }

    protected override NSString CellKey
    {
        get
        {
            return ReuseId;
        }
    }

    public override UITableViewCell GetCell(UITableView tv)
    {

        EnsureIndex();

        var cell = tv.DequeueReusableCell(CellKey);
        if (cell == null)
        {
            cell = new UITableViewCell(UITableViewCellStyle.Subtitle , CellKey);
        }

        cell.ApplyStyle(this);

        cell.TextLabel.Text = Caption;
        if (!string.IsNullOrEmpty(_subtitle))
        {
            cell.DetailTextLabel.Text = _subtitle;
        }

        var selected = false;
        var slRoot = Parent.Parent as CustomRootElement;

        if (slRoot != null)
        {
            selected = Index == slRoot.Selected(Group);

        }
        else
        {
            var root = (RootElement)Parent.Parent;
            selected = Index == root.RadioSelected;
        }

        cell.Accessory = selected ? UITableViewCellAccessory.Checkmark : UITableViewCellAccessory.None;

        return cell;
    }

    public override void Selected(DialogViewController dvc, UITableView tableView, NSIndexPath indexPath)
    {
        var slRoot = Parent.Parent as CustomRootElement;

        if (slRoot != null)
        {
            var radioGroup = slRoot.GetGroup(Group);

            if (radioGroup.Selected == Index)
            {
                return;
            }

            UITableViewCell cell;

            var selectedIndex = slRoot.PathForRadioElement(Group, radioGroup.Selected);
            if (selectedIndex != null)
            {
                cell = tableView.CellAt(selectedIndex);
                if (cell != null)
                {
                    cell.Accessory = UITableViewCellAccessory.None;
                }
            }

            cell = tableView.CellAt(indexPath);
            if (cell != null)
            {
                cell.Accessory = UITableViewCellAccessory.Checkmark;
            }

            radioGroup.Selected = Index.Value;

            var handler = ElementSelected;
            if (handler != null)
            {
                handler(this);
            }

        }
        else
        {
            base.Selected(dvc, tableView, indexPath);
        }
    }

    private void EnsureIndex()
    {
        if (!Index.HasValue)
        {
            var parent = Parent as Section;

            Index = parent.Elements.IndexOf(this);
        }
    }
} 
```

希望这有帮助！

# jquery - Building JSON from SQLite Data in jQuery/javascript

> ID：13608812
> 
> 赞同：3
> 
> 时间：2012-11-28T15:40:23.030
> 
> 标签：jquery, json, sqlite

I'm currently working on a prototype mobile app that should support pulling data from a server to the device, storing that data in an SQLite DB on the device, allow the user to manipulate the data, then push the data from the SQLite DB back up to the server. So far, everything is working great until the last part. I'm having trouble getting information back out of the SQLite tables and into a JSON object to push back up to the server.

My basic issue at this point is figuring out how to build a JSON object from the data in SQLite given that all db transactions in javascript are asynchronous from my understanding.

I've got a jsFiddle with some example code: [http://jsfiddle.net/uu29g/](http://jsfiddle.net/uu29g/)

My hope is to push something up to the server that looks like this:

```
[{"order_num": "2001", "custnum": "ABC123", "custname": "Demo Customer", "status": "S", "id": 1, "lineitems": [{"id": 1, "line_num": "1", "part_num": "WSC599", "part_desc": 'Widget A', "qty": "2.0", "price": "15.00"}, {"id": 2, "line_num": "2", "part_num": "FFC898B", "part_desc": 'Dongle B', "qty": "1.0", "price": "32.98"},
{"id": 3, "line_num": "3", "part_num": "RQFG", "part_desc": 'Dooflatchie', "qty": "5.0", "price": "200"}]},{"order_num": "2002", "custnum": "ZXY987", "custname": "Another Customer", "status": "S", "id": 2, "lineitems": [{"id": 1, "line_num": "1", "part_num": "GHJH11", "part_desc": 'Lightsaber - Green', "qty": "1.0", "price": "1500.00"}, 
{"id": 2, "line_num": "2", "part_num": "C3P0", "part_desc": 'Protocol Droid', "qty": "1.0", "price": "9811.04"}]}] 
```

Given the database in the jsFiddle example, what would be the best way to generate an object like the above from the SQLite data? **Edit**: Specifically, how do I build that object from three async queries? My current train of thought is to get a list of order numbers from the order_header table (in my jsFiddle example), loop over those order numbers and pull the order_header info and order_detail/line item info from the tables for each order and push that into an object, then push each order object into a final array/object. Where I'm struggling is with how to get the header and detail data from SQLite when the sql queries are asynchronous. (And I might be going about this totally wrong).

*FYI: I'm still learning about Deferred objects in jQuery. The app I'm working on is built using jQuery Mobile, and meant to work on iOS/Android and will be turned into a native app via phoneGap

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:50:20.550

你可以使用[JSON.stringify](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)。将任何 JavaScript 对象转换为字符串。

此外，如果您在[jQUery ajax 请求](http://api.jquery.com/jQuery.ajax/)中设置了一个 JavaScript 对象，它将作为字符串传输。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T19:58:13.490

好的，由于网络上的一些不同来源以及大量的反复试验，我终于弄清楚了这一点。 [jsFiddle 示例：](http://jsfiddle.net/BYzLx/5/)

基本上我最终做的是以下几点：

1.  运行延迟 SQL 事务来获取我需要提取的订单。
2.  将延迟事务的结果通过管道传输到匿名函数中。
3.  循环遍历匿名函数中的结果并填充延迟函数数组，传入我需要提取数据的订单号。
4.  在延迟函数的延迟数组上执行 $.when.apply(null, deferreds) 函数。
5.  在延迟数组中每个订单调用的延迟函数内部，我执行所有 SQL（通过延迟函数）作为 s $.when(...).done() 函数的一部分，并在完成回调中运行函数来处理所有延迟查询的结果，并将我生成的订单对象推送到全局数组中。

现在我只需要在第 5 步中让我的延迟函数返回一个承诺，这样我就可以在每个人都完成后对全局数组做一些事情。

我确信这可以写得更好，并且我确信我的逻辑存在潜在的缺陷，但希望如果其他人有类似的问题，这将使他们走上正轨。

无论如何，这不是世界上最干净的代码，但它可以工作（参见 jsFiddle 了解 SQL 语句、db init 等）。

```
var ordersArr = [];

/*
Thanks to Josh Ross's answer here for how to do SQL transactions that return a deferred object
http://stackoverflow.com/questions/8058679/wrapping-websql-executesql-calls-in-a-jquery-deferred-promise
*/
function successWrapper(d) {
//console.log(d);
return (function (tx, data) {
    d.resolve(data)

})
};

function failureWrapper(d) {
console.log("Sql failed");
return (function (tx, error) {
    d.reject(error)
})
};  

function getMyOrdersSQL() {
return $.Deferred(function (d) {
    db.transaction(function (tx) {
                    tx.executeSql(getSyncableOrdersStatement, [], 
                    successWrapper(d), failureWrapper(d));
                });
    });
}

function getHeaderDataSQL(ordernum) {
return $.Deferred(function (d) {
    db.transaction(function (tx) {
                    tx.executeSql(getOrdHeaderSingleStatement, [ordernum], 
                    successWrapper(d), failureWrapper(d));
                });
    });
}

function getDetailDataSQL(ordernum) {
return $.Deferred(function (d) {
    db.transaction(function (tx) {
                    tx.executeSql(getOrderDetStatement, [ordernum], 
                    successWrapper(d), failureWrapper(d));
                });
    });
}

function getNoteDataSQL(ordernum) {
return $.Deferred(function (d) {
    db.transaction(function (tx) {
                    tx.executeSql(getDriverNoteStatment, [ordernum], 
                    successWrapper(d), failureWrapper(d));
                });
    });
}

function getOrders() {

$.when(getMyOrdersSQL()).pipe(function(dta) {
    var deferreds = [];
    //build an array of deferred SQL transactions
    //each deferred transaction should populate an order object, then push it into the final ordersArr array
    if (dta.rows.length > 0) {
        for (var i=0; i<dta.rows.length; i++) {
            //console.log(dta.rows.item(i).order_num);
            deferreds.push(getOrdStuff(dta.rows.item(i).order_num)); //push in a function for each order in the getMyOrdersSQL resultset
        }
        $.when.apply(null, deferreds); //run all the deferred functions

    }else {
        console.log(dta.rows);  
        alert("No records found!");
    }
}).done(function() {

}).fail(function() {
    alert("Failed!");
});
}

function getOrdStuff(ordernum) {
console.log(ordernum);
return $.Deferred(function(d) {
    var orderObj = new Object(); //object to hold the order info
    //getDriverNoteStatment
    //getOrdeDetSingle
    //getOrdHeaderSingleStatement

    $.when(getHeaderDataSQL(ordernum), getDetailDataSQL(ordernum), getNoteDataSQL(ordernum)).done(
    function(dta1, dta2, dta3) {
        //dta1 is the deferred promise/result from the getHeaderDataSQL function
        //dta2 is the deferred promise/result from the getDetailDataSQL function
        //dta3 is the deferred promise/result from the getNoteDataSQL function                      
        var orderHeader = dta1.rows.item(0); 

        var orderNotes = dta3.rows.item(0);

        orderObj.order_num = orderHeader.order_num;
        orderObj.status = orderHeader.status;
        orderObj.shipto_num = orderHeader.shipto_num;
        orderObj.po_num = orderHeader.po_num;
        orderObj.billto_num = orderHeader.billto_num;

        var onObj = new Object(); //order notes object
        orderObj.notes = orderNotes.notes;
        orderObj.notes_dtstamp = orderNotes.dtstamp;

        var odArr = []; //order detail array to hold order line items objects

        for (var k = 0; k<dta2.rows.length; k++) { //loop over line item results
            console.log(dta1.rows.item(0).order_num+' has '+dta2.rows.length+' line items');
            var odObj = new Object();
            var orderDetails = dta2.rows.item(k);
            odObj.line_num = orderDetails.line_num;
            odObj.part_num = orderDetails.part_num;
            odObj.qty = orderDetails.qty;
            odObj.part_desc = orderDetails.part_desc;
            odArr.push(odObj); //push each line item object into the detail array

        }           

        orderObj.lineitems = odArr;
        ordersArr.push(orderObj);
        console.log("got stuff");
        console.log(ordersArr);
        return function(d) {
            d.resolve();    //return the promise
        }

    }).fail(function(etx, err) {
         d.reject(err, etx) //return the error if any transaction failed
    });

});

} 
```

# bash - 令人尴尬的并行工作流创建了太多的输出文件

> ID：13608816
> 
> 赞同：2
> 
> 时间：2012-11-28T15:40:29.877
> 
> 标签：bash, file-io, parallel-processing, embarrassingly-parallel

在 Linux 集群上，我运行许多 ( `N > 10^6`) 独立计算。每次计算只需要几分钟，输出是几行。很小的时候`N`，我能够将每个结果存储在一个单独的文件中，以便以后解析。`N`但是，我发现我在浪费存储空间（用于文件创建），并且由于 bash: 的内部限制，像需要`ls`特别小心的简单命令`-bash: /bin/ls: Argument list too long`。

每个计算都需要通过`qsub`调度算法运行，因此我无法创建一个简单地将输出数据聚合到单个文件的主程序。当两个程序同时完成并交错输出时，附加到单个的简单解决方案会失败。我没有对集群的管理员访问权限，因此不能选择安装系统范围的数据库。

**如何在令人尴尬的并行计算变得无法管理之前整理输出数据？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T17:02:35.770

1）正如你所说，这不是`ls`失败的；它是在启动之前进行全局扩展的外壳`ls`。您可以使用类似的方法轻松解决该问题

```
find . -type f -name 'GLOB' | xargs UTILITY 
```

例如。：

```
find . -type f -name '*.dat' | xargs ls -l 
```

您可能想要对输出进行排序，因为`find`（为了提高效率）（通常）不对文件名进行排序。还有许多其他选项`find`（例如设置目录递归深度、以更复杂的方式过滤等）和`xargs`（每次调用的最大参数数量、并行执行等）。阅读`man`页面了解详情。

2）我不知道你是如何创建单个文件的，所以提供具体的解决方案有点困难，但这里有几个想法：

1.  如果您自己创建文件，并且您可以将文件创建延迟到作业结束（例如，通过缓冲输出），并且文件存储在支持咨询锁定或其他一些锁定机制（如原子链接）的文件系统上，然后您可以通过在输出输出之前锁定它，然后解锁，将各种作业多路复用到一个文件中。但这是很多要求。在集群中，您很可能能够使用单个文件来处理在单个主机上运行的所有作业，但同样您可能不会。

2.  同样，如果您自己创建文件，您可以将每一行自动写入共享文件。（即使 NFS 支持原子写入*，但它不支持原子追加，请参见下文*。）您需要在每行前面添加一个唯一的作业标识符，以便您可以将其解复用。但是，如果您使用一些自动机制，例如“我的作业写入`stdout`然后调度框架将其复制到文件”，这将不起作用，这很遗憾很常见。（本质上，这个建议与策略非常相似`MapReduce`。也许你可以使用？）

3.  其他一切都失败了，也许你可以只使用子目录。几千个目录，每个目录包含一千个文件，比一个目录包含几百万个文件更易于管理。

祝你好运。

**编辑**根据要求，关于 2.2 的更多详细信息：

您需要为此使用 Posix I/O 函数，因为，afaik，该`C`库不提供原子写入。在 Posix 中，[write](http://pubs.opengroup.org/onlinepubs/009695399/functions/write.html)函数总是以原子方式写入，前提是您`O_APPEND`在打开文件时指定。（实际上，它在任何情况下都以原子方式写入，但如果您未指定，`O_APPEND`则每个进程都会在文件中保留自己的位置，因此它们最终会相互覆盖。）

所以你需要做的是：

1.  在程序的开头，`open`一个带有 options 的文件`O_WRONLY|O_CREATE|O_APPEND`。（与我之前所说的相反，这不能保证在 NFS 上工作，因为 NFS 可能无法`O_APPEND`正确处理。较新版本的 NFS 理论上可以处理仅附加文件，但它们可能不会。稍后对此进行一些思考.) 您可能不想总是使用同一个文件，所以在其名称中添加一个随机数，以便您的各种工作有多种选择。`O_CREAT`总是原子的，afaik，即使是糟糕的 NFS 实现。

2.  对于每个输出行，`sprintf`该行到一个内部缓冲区，在开头放置一个唯一的 id。（你的工作必须有某种唯一的 id；只要使用它。）[如果你偏执，用某种记录分隔符开始该行，然后是剩余行中的字节数——你必须在格式化后输入这个值——所以该行看起来像hex 01 或类似的东西`^0274:xx3A7B29992A04:<274 bytes>\n`在哪里。]`^`

3.  `write`文件的整行。*检查返回码和写入的字节数。*如果写入失败，请重试。如果写的很短，希望你遵循上面的“如果你是偏执狂”的说明，也可以再试一次。

真的，你不应该写短文，但你永远不知道。写长度很简单；多路分解有点复杂，但你可以在需要时跨过那座桥:)

使用 NFS 的问题有点烦人。与 2.1 一样，最简单的解决方案是尝试在本地写入文件，或者使用一些正确支持附加的集群文件系统。（NFSv4 允许您仅请求“附加”权限而不是“写入”权限，如果其他进程已经设法写入您将要使用的偏移量，这将导致服务器拒绝写入。在这种情况下，您'd需要寻找到文件的末尾并再次尝试写入，直到最终成功。但是，我的印象是这个功能实际上并没有实现。我可能是错的。）

如果文件系统不支持追加，您将有另一种选择：决定行长，并始终写入该字节数。（显然，如果所选的固定行长度比可能的最长行长，则更容易，但只要它们具有序列号，就可以编写多个固定长度的行。）您需要保证每个作业都写入不同的偏移量，您可以通过将作业的作业编号分为文件编号和交错编号，并将特定作业的交错处的所有行以交错数取模，写入名称包含文件编号的文件中。（如果作业按顺序编号，这是最简单的。）可以在文件末尾之外写入，因为 unix 文件系统将 - 或至少，

处理不支持追加但支持建议字节范围锁定（NFSv4 支持此）的文件系统的另一种方法是使用固定行长度的想法，如上所述，但在之前要写入的范围上获得锁定写它。使用非阻塞锁，如果无法获得锁，则在下一个行偏移倍数处重试。如果能获得锁，则读取该偏移处的文件，在写入之前验证它没有数据；然后释放锁。

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T10:16:12.487

如果你只关心空间：

```
parallel --header : --tag computation {foo} {bar} {baz} ::: foo 1 2 ::: bar I II ::: baz . .. | pbzip2 > out.bz2 
```

或更短：

```
parallel --tag computation ::: 1 2 ::: I II ::: . .. | pbzip2 > out.bz2 
```

GNU Parallel 确保输出不混杂。

如果您关心查找结果的子集，请查看 --results。

观看介绍视频以了解更多信息：[https ://www.youtube.com/playlist?list=PL284C9FF2488BC6D1](https://www.youtube.com/playlist?list=PL284C9FF2488BC6D1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T04:42:17.490

另一种可能性是使用 N 个文件，其中 N 大于或等于集群中的节点数，并以循环方式将文件分配给您的计算。这应该避免并发写入任何文件，前提是您对计算的执行顺序有合理的保证。

# mysql - Query not complete - MYSQL

> ID：13608817
> 
> 赞同：0
> 
> 时间：2012-11-28T15:40:40.080
> 
> 标签：mysql, database

My query so far:

```
SELECT CD_no, purchasedate, COUNT(*) mostsales
FROM Sales A
GROUP BY CD_no, purchasedate
HAVING COUNT(*) =
        (SELECT MAX(mostsales)
         FROM
            (SELECT CD_no, purchasedate, COUNT(*) AS mostsales
                FROM Sales
            GROUP BY CD_no, purchasedate) B
            WHERE CD_no = A.CD_no) 
```

My query so far generates from an input of CD_no's and purchase's, finds date had the most sales for that specific CD. However this only returns one value for each CD number. However there may be a possibility that a CD_no may have the exact same maximal purchases on two different dates, and therefore should display both dates against the CD number.

Current output:

```
CD_NO           mostsales
1             2011-12-30
2             2012-03-22
3             2012-04-24 
```

Desired output:

```
CD_NO           mostsales
1             2011-12-30
2             2012-03-22
3             2012-04-24
3             2012-04-22 
```

From the following input:

```
CD_NO         purchase_date
1              2011-12-30
1              2011-12-30
1              2011-12-29
1              2011-12-28
2              2012-03-22
2              2012-03-22
2              2012-03-21
3              2012-04-24
3              2012-04-24
3              2012-04-22
3              2012-04-22              
3              2012-04-21 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T15:44:24.157

~~听起来您需要添加一个聚合函数：~~

 ~~```
SELECT CD_NO, purchase_date, Count(purchase_date) totalSales
FROM Artist
GROUP BY purchase_date
ORDER BY CD_NO 
```~~ 

MySQL 允许您限制字段的数量，`GROUP BY`因此上面仅对`purchase_date`.

在其他 RDBMS 中，您可以使用子查询：

```
SELECT a1.CD_NO, a1.purchase_date, a2.TotalSalesByDate
FROM Artist a1
INNER JOIN
(
    SELECT count(purchase_date) TotalSalesByDate, purchase_date
    FROM Artist
    GROUP BY purchase_date
) a2
   on a1.purchase_date= a2.purchase_date
ORDER BY a1.CD_NO 
```

 ~~编辑：根据您的更新，您应该能够使用类似于以下内容的内容：

```
SELECT a1.CD_NO, date_format(a1.purchase_date, '%Y-%m-%d') MostSales
FROM Artist a1
INNER JOIN
(
    SELECT count(purchase_date) TotalSalesByDate, purchase_date
    FROM Artist
    GROUP BY purchase_date
) a2
   on a1.purchase_date= a2.purchase_date
group by a1.CD_NO, a1.purchase_date
having max(TotalSalesByDate) = (select max(Total) totalsales
                                 from
                                 (
                                    SELECT cd_no, purchase_date, Count(purchase_date) Total
                                    FROM Artist a1
                                    GROUP BY cd_no, purchase_date
                                 ) src
                                 where a1.cd_no = src.cd_no
                                 GROUP BY cd_no); 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/0f46d/59)

结果：

```
| CD_NO |  MOSTSALES |
----------------------
|     1 | 2011-12-30 |
|     2 | 2012-03-22 |
|     3 | 2012-04-22 |
|     3 | 2012-04-24 | 
```~~

# svn - 如何强制SVN默认将UTF-16 XML文件检测为纯文本文件？

> ID：13608819
> 
> 赞同：3
> 
> 时间：2012-11-28T15:40:53.963
> 
> 标签：svn, mime-types, smartsvn

我们有许多 xml 文件，其中大多数是 UTF-16 编码的。

当我使用 SmartSVN 将文件添加到 subversion 时，它总是得到 svn:mime-type=application/octet-stream。

这可以防止 SmartSVN 的可视 DIFF 工具处理这些非常烦人的文件。

来自 SVN 常见问题解答： [http ://subversion.apache.org/faq.html#binary-files](http://subversion.apache.org/faq.html#binary-files)

> 当您第一次将文件添加或导入到 Subversion 时，会检查该文件以确定它是否为二进制文件。目前，Subversion 只查看文件的前 1024 个字节；如果任何字节为零，或者超过 15% 不是 ASCII 打印字符，则 Subversion 调用文件二进制。然而，这种启发式可能会在未来得到改进。

当使用 UTF-16 文件时，这是非常愚蠢的，因为它们在大多数情况下包含约 50% 的零。

我还读到有一种方法可以从 SVN 客户端自动设置属性： [http ://www.mediawiki.org/wiki/Subversion/auto-props](http://www.mediawiki.org/wiki/Subversion/auto-props)

这是否也允许删除自动检测到的二进制 mime 类型？

是否可以以某种方式在存储库/svn 服务器上设置它，所以我不必在每个工作站上都​​设置它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T10:46:26.343

1.  您不能仅为 UTF-16 XML 重新定义 mime-type（但可以 - 对于所有 xml）
2.  我不知道在服务器或每个存储库的基础上重新定义 mim-type 的好方法

如果以上几点没有吓到您，您可以全局（每个客户端的主机）在客户端的 subversion 配置文件中重新定义 mime-type: `%AppData%\Subversion\config`,`[auto-props]`部分。就像是

```
*.xml = svn:mime-type=text/xml 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T09:39:11.253

`svn:mime-type`是一个 SVN 属性，所以你应该能够修改它。如果您将它设置在一台机器上并提交它，它应该在更新后反映在其他机器上。

然而，“二进制文件范式”是 SVN 内部工​​作的重要组成部分，尤其是目前不可更改的提交算法。差异实际上以二进制形式保存并附加到存储库中的每个文件。嗯，这是我从 SVN 1.6 文档中记得的内容。所以我不确定您是否可以更改“自动 mime 类型”应用程序。

您可以使用钩子（可能是提交后？）来检测正在按某些标准提交的文件，并在提交后对那些（那些）文件应用属性更改。当然，您当然可以通过一些编码来利用[hooks 子系统](http://svnbook.red-bean.com/en/1.7/svn-book.html#svn.ref.reposhooks)为您执行此操作。（我不知道您使用的是哪个 SVN 版本，所以我提供了最新稳定版本的链接 - 1.7 书）

哦，还有一点来自 SVN 文档的复制/粘贴：

> 为了确定上下文合并是否可行，Subversion 检查 svn:mime-type 属性。如果文件没有 svn:mime-type 属性，或者具有文本的 MIME 类型（例如 text/*），Subversion 假定它是文本。否则，Subversion 假定文件是二进制文件。Subversion 还通过在 svn import 和 svn add 命令中运行二进制检测算法来帮助用户。这些命令会很好地猜测，然后（可能）在要添加的文件上设置二进制 svn:mime-type 属性。（如果 Subversion 猜错了，**用户可以随时删除或手动编辑属性**。）

所以简短的回答是，您可能无法强制 SVN 自动检测，但您可以对其进行编程。:)

希望这有帮助。

# git - 在 Windows 上使用 Github

> ID：13608822
> 
> 赞同：2
> 
> 时间：2012-11-28T15:40:59.273
> 
> 标签：git, github

寻找在 Windows 上开发并将其源代码存储在 GitHub 上的人的一些意见/经验。

我正在为一家大公司（600 多名开发人员）评估 git，因为 subversion 在远程工作和有争议的签入等方面并不能很好地扩展。我喜欢 git 的想法，但它的可用性似乎真的很弱。

我和大多数其他开发人员一样，在 Windows 上开发并部署到 Linux。因此，我想要在 Windows 上轻松运行的源代码控制环境（通过命令外壳）。我知道 Subversion 在 Windows 命令行访问方面领先于游戏，但肯定有成千上万的开发人员使用 Windows。

任何人都可以指出我在 Windows 机器上使用 git 的优秀教程/初学者指南。

以下是我遇到的一些令人沮丧的问题：

每当您尝试办理登机手续时，您都必须继续输入：

```
git config --global user.name "USER_NAME"
git config --global user.email "EMAIL" 
```

github帮助只是说每次打开命令shell时都必须执行上述操作。

尝试使用`git@github.com:...`签入版本时，我收到消息：

```
Permission denied (publickey) 
```

然后环顾互联网，所有响应和帮助都再次出现在 linux 领域。

任何不涉及使用 linux 模拟器的指南或帮助将不胜感激。

谢谢亚当

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:50:57.547

您需要将 SSH 公钥存储在 GitHub 中。

要在您的机器上生成一个，只需运行您的`Git Bash`，然后调用`ssh-keygen`并按回车多次！这将生成一个`id_rsa.pub`在您当前用户目录中的子目录中调用的文件`.ssh`。复制该文件中的所有内容并将其粘贴到 GitHub 上允许您添加 SSH 密钥的框中。

在 Github 上：

1.  登录到您的帐户
2.  点击右上角的账户设置
3.  单击左侧的 SSH 密钥
4.  单击添加 SSH 密钥
5.  粘贴`id_rsa.pub`文件的内容

您现在将有权从这台机器上的 GitHub 存储库推送/拉取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T23:39:34.053

如果您正在评估 git，您应该将两个不同且不同的关注点分开

1.  更改为 DVCS（即 git）和

2.  在 Windows 上工作的小麻烦。

使用 DVCS 是一种全新的工作方式，无论您使用内部中央服务器，还是使用 GitHub（或其他提供商）。将项目分离到单独的存储库中（例如，参见 gitolite [http://sitaramc.github.com/gitolite/](http://sitaramc.github.com/gitolite/)；使用（大量）功能分支；经常（非常）在本地提交，无需审查；选择具有变体的工作流程，根据项目规模和复杂性；等等。您所有的集中控制过程都可能是“错误的”，或者至少不适合 600 多名开发人员！

鉴于 git 是 Linux，Windows 有一些尴尬的时刻，但与 DVCS 之旅相比，它们将是次要的。Git-Gui 是可靠的，Git Extensions 提供了一个 windows 风格的 gui 舒适毯。

做几个试点项目。

寻找想要使用 git 并且有能力 [nous] 理解并坚持下去的开发人员。小心而稳定地向外建造。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T04:02:59.473

**常见注意事项**

恐怕以这种准备移民和解决问题的方式，你和“大公司”正在走向地狱：

*   “大公司”和 GitHub 存储库——CSO 将“高兴”

Git 的任何 GUI 都只是前端，它隐藏了（部分）核心的复杂性。如果你不知道base，你只能将GUI用作“手榴弹的猴子”

不同的 Windows Git-GUI 可能有不同的范式并使用不同的隐喻，因此 -**公司**必须选择客户端并*为该客户端的员工提供培训课程*

适用于 Windows 的 Git GUI 客户端的范围相当广泛

*   TortoiseGit
*   Git 扩展
*   SmartGit
*   Perforce Git Fusion（可能是企业 Git 市场的绝佳选择）

# android - Android illegal URL error...but what's illegal?

> ID：13608823
> 
> 赞同：0
> 
> 时间：2012-11-28T15:41:02.783
> 
> 标签：android

I construct a URL with the following bit of code:

```
String login = rootActivity.getString(R.string.url_authentication);
login = login + "user=" + mySharedPreferences.getString("username", "invalid") + "&" + "key=" + mySharedPreferences.getString("key", "invalid");
login = login.toLowerCase(Locale.US);
System.out.println("Logging in at " + login);
new HttpConnection(handler).get(login); 
```

The URL is valid, as far as I can see visually, but the HttpConnection fails because there's an illegal character in the URL at the index of the ampersand. What really flummoxes me is, the app has between 1,000 and 5,000 installs, and we have a total of two reports of this over the past year – both from American users using Samsung devices, so I doubt it's a character encoding issue.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:44:39.770

有一个原始的 & (amplisand) 会导致错误，你应该编码你的特殊字符。

做这个：

```
 String login = URLEncoder.encode(login); 
```

[http://developer.android.com/reference/java/net/URLEncoder.html#encode(java.lang.String)](http://developer.android.com/reference/java/net/URLEncoder.html#encode%28java.lang.String%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T15:45:47.623

不要忘记对您的参数进行 urlEncode。

```
login = login + "user=" + URLEncoder.encode( mySharedPreferences.getString("username", "invalid") ) + "&" + "key=" + URLEncoder.encode( mySharedPreferences.getString("key", "invalid") ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T15:43:52.557

不知道登录是什么，但是最后有问号吗？如果您不是 www.example.comuser="something"&key="somethingElse" 之类的东西，那将行不通。

# mysql - MYSQL - 创建一个指示问题是否已回答的临时列

> ID：13608829
> 
> 赞同：0
> 
> 时间：2012-11-28T15:41:24.633
> 
> 标签：mysql

嗨，我目前正在开发一种测验应用程序。在“发现”部分，我得到了热门和最新的问题。但是当我得到它们时，我还应该检查当前用户是否已经回答了问题。

这是我的表格：问题：（media_id 是主键，player_id 是问题的创建者）

```
media_id - player_id - answer0 - answer1 - ... 
```

答案：（media_id 是主键，player_id 是回答问题的人）

```
media_id - player_id - result - ... 
```

这就是我得到热门问题的方式：

```
select * from questions where order by popularity_count 
```

**编辑：** 让我通过示例展示我想要实现的目标：

问题行：

```
media_id - player_id - answer0 - answer1
0123456    abc123      bla       bla
6543210    hjk789      lor       ips 
```

回答行：

```
media_id - player_id - result
6543210    abc123      1 
```

因此，当用户“abc123”得到热门问题时，结果应该是：

```
media_id - player_id - answer0 - answer1 - is_answered
0123456    abc123      bla       bla       0
6543210    hjk789      lor       ips       1 
```

问题是我需要在查询结果中有一个临时列，指示当前用户是否回答了问题。我怎样才能做到这一点？

我可以通过使用两个查询来查找问题是否已经回答了流行部分。首先，我得到了热门问题，然后我只是检查每个问题是否得到了回答，这似乎是无效的方式。我怎样才能只用一个查询来实现这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:47:40.967

由于您具有非规范化的表结构，因此您似乎没有正确解决此问题。

您应该有一个单独的表格，其中包含按行的答案。

**问题**（id、media_id、player_id、问题）

**答案**（id、media_id、player_id、question_id、答案）

通过这种方式，您可以`LEFT JOIN` `answers`轻松`questions`查看哪些问题没有得到回答，如下所示：

```
SELECT q.question, a.answer
FROM question q
LEFT JOIN answers a ON a.question_id = q.id
  AND a.media_id = q.media_id
  AND a.player_id = q.player_id 
```

## [看到它在行动](http://sqlfiddle.com/#!2/12b17/2)

要将列添加到当前查询，您可以将其附加到您的查询中`SELECT`并使用`CASE`语句来检查它是否已被回答。

```
SELECT ..., 
    CASE
        WHEN answer0 IS NOT NULL
            THEN 'Yes'
        ELSE 'No'
    END AS 'Answered'
FROM ... 
```

**更新**

根据您的更新，您似乎只`JOIN`在`player_id`. 我相信您打算`JOIN`同时使用`player_id`和`media_id`。[查看您提供的数据](http://sqlfiddle.com/#!2/630ce/2)与[我认为您想要](http://sqlfiddle.com/#!2/6f4e36/1)的数据之间的差异。

# jquery - Calculation with jquery and grouping of sub-totals

> ID：13608830
> 
> 赞同：2
> 
> 时间：2012-11-28T15:41:25.820
> 
> 标签：jquery, html, math

I'm working on a web application and want to create something like an invoice calculation, but with sub-groups, so at the end I need the result of the group-totals and the sub-totals.

This is what I got so far: [Fiddle](http://jsfiddle.net/yaMRQ/9)

```
$(function() {
    $("#items").keyup(function(event) {
        var total = 0;
        $("#items .targetfields").each(function() {
            var qty = parseInt($(this).find(".quantity").val());
            var rate = parseInt($(this).find(".rate").val());
            var subtotal = qty * rate;
            $(this).find(".subtotal").val(subtotal);
            if (!isNaN(subtotal)) total += subtotal;
        });
        $("#total").html(total);
    });
}) 
```

Ultimately, I'm working towards something like this:

![enter image description here](../Images/5842817219e49469c358e03f5c7d45e6.png)

I have found a lot of examples about invoice calculation but not with groups or sub-totals.

I hoped someone could help me out with a little example.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:14:43.517

看看这是不是你的想法：http: [//jsfiddle.net/yaMRQ/23/](http://jsfiddle.net/yaMRQ/23/)

```
<table class="items">
    <tr class="targetfields"> 
        <td><input type="text" name="quantity" class="quantity" /></td>
        <td><input type="text" name="rate" class="rate" size="5" /></td>
        <td><input type="text" name="sub_total" class="subtotal" /></td> 
    </tr> 
    <tr class="targetfields"> 
        <td><input type="text" name="quantity" class="quantity" /></td>
        <td><input type="text" name="rate" class="rate" size="5" /></td>
        <td><input type="text" name="sub_total" class="subtotal" /></td> 
    </tr>
    <tr>
        <td>Group:</td>
        <td colspan="2" align="right" class="g_total"></td>
    </tr>
</table>
<table class="items">
    <tr class="targetfields"> 
        <td><input type="text" name="quantity" class="quantity" /></td>
        <td><input type="text" name="rate" class="rate" size="5" /></td>
        <td><input type="text" name="sub_total" class="subtotal" /></td> 
    </tr> 
    <tr class="targetfields"> 
        <td><input type="text" name="quantity" class="quantity" /></td>
        <td><input type="text" name="rate" class="rate" size="5" /></td>
        <td><input type="text" name="sub_total" class="subtotal" /></td> 
    </tr>
    <tr>
        <td>Group:</td>
        <td colspan="2" align="right" class="g_total"></td>
    </tr>
</table>
<br/>---<br/>Total: <span id="total"></span> 
```

​</p>

```
$(function() {
    $(".items").keyup(function(event) {
     var total = 0;
     $(".items").each(function(){
         var gtotal = 0;
         $(this).find(".targetfields").each(function() {
             var qty = parseInt($(this).find(".quantity").val());
             var rate = parseInt($(this).find(".rate").val());
             var subtotal = qty * rate;
             $(this).find(".subtotal").val(subtotal);
             if(!isNaN(subtotal))
                 gtotal+=subtotal;
         });
         $(this).find(".g_total").html("EUR "+gtotal); 
         total+=gtotal
     });
     $("#total").html("EUR "+total);
    });
})​ 
```

# sql - Date returned as Day of week Number 1-7

> ID：13608837
> 
> 赞同：2
> 
> 时间：2012-11-28T15:41:35.180
> 
> 标签：sql, ms-access

I am having difficulty with the Day of week number function in SQL. The excel equivalent i use frequently is...

```
=WEEKDAY("datevalue",1) 
```

This of course will return Sunday = 1, Monday = 2 etc... What is the Access Sql equivalent?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T15:45:33.107

这足以得到所需的答案。

```
weekday(date) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T15:43:31.627

我相信您正在寻找`DatePart`：

```
DatePart ("w", date) 
```

[参考](http://www.techonthenet.com/access/functions/date/datepart.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T15:44:40.237

这会有所帮助

```
DATEPART(dd, date) 
```

[返回整数](http://www.w3schools.com/sql/func_datepart.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T15:46:05.660

它是日期部分（）

> 例如
> 
> DatePart ("yyyy", #15/10/1998#) 将返回 1998
> 
> DatePart ("m", #15/10/2003#) 将返回 10
> 
> DatePart ("d", #15/10/2003#) 将返回 15

# java - NullPointerException when trying to draw a polygon

> ID：13608839
> 
> 赞同：0
> 
> 时间：2012-11-28T15:41:38.537
> 
> 标签：java

When I'm trying to draw a polygon I get a `NullPointerException`. This is how I am trying to do it:

```
Roi roi = imp.getRoi();
Polygon p = roi.getPolygon();
Graphics g=null;
g.drawPolygon(p.xpoints, p.ypoints, p.npoints); 
```

Please suggest how I can fix this.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:44:01.907

您没有使用正确的 Graphics 对象。这应该在 JComponent 的`paintComponent(...)`方法中完成，并且您应该使用 JVM 传入的 Graphics 对象。要么使用从它获得的 Graphics2D 对象，要么在 BufferedImage 中绘制它`createGraphics()`。

关于您的编辑：**哎呀！**

这保证每次都会抛出 NPE。

```
Bar bar = null
bar.someMethod(); 
```

# javascript - 删除 Disqus 投票

> ID：13608844
> 
> 赞同：1
> 
> 时间：2012-11-28T15:42:01.817
> 
> 标签：javascript, disqus

我正在使用 disqus 2012。我已经在我的网站上实施了评级系统，因此希望删除评论右上角的星号，因为它有点令人困惑。当我将鼠标悬停在上面时，它会说“投票”。无论如何要从我的评论中删除它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T22:43:45.290

加注星标有一个非常重要的功能，用户可以“收藏”或“点赞”讨论并与关注他们的用户分享，因此无法删除。

悬停状态现在也应该说*Star this discussion*更明确地表明这仅适用于评论线程。希望这可以减轻混淆用户的任何担忧。

# php - 无法获取 $_POST 变量

> ID：13608845
> 
> 赞同：0
> 
> 时间：2012-11-28T15:42:00.937
> 
> 标签：php, html, multi-upload

**应该是图片的多重上传表单**

我得到了上传表单的 HTML 代码：

```
<form action="upload.php" method="post" id="uploadform" name="uploadform" enctype="multipart/form-data">  
        <label id="filelabel" for="fileselect">Choose the Pictures</label>
        <input type="file" id="fileselect" class="fileuplaod" name="uploads[]" multiple />
        <span class="text">Exist Album</span><br />
        <select id="existAlbum" name="existAlbum" size="1">
            <option value="noAlbum">SELECT ALBUM</option>       
        </select>
        <span class="text">OR</span>
        <span class="text">New Album</span><br />
        <input id="newAlbum" name="newAlbum" type="text" maxlength="20" placeholder="ALBUM NAME"/>
        <input type="submit">
    </form> 
```

upload.php 的表单链接。但我得到：

```
Notice: Undefined index: existAlbum in E:\xampp\htdocs\fotokurs\upload\upload.php on line 11

Notice: Undefined index: newAlbum in E:\xampp\htdocs\fotokurs\upload\upload.php on line 12 
```

这是upload.php：

```
<?PHP  
$allowedExtensions = array('png', 'jpg', 'jpeg'); 

$maxSize = 20971520;  

$i = 0;  

$first = 0;

$exist_album = $_POST['existAlbum']; 
$new_album = $_POST['newAlbum']; 
```

我的错在哪里？我找不到它...

**编辑** 在我的代码中添加以下内容：

```
if( isset( $_POST['existAlbum'] ) or isset( $_POST['newAlbum'] ) ){
    $exist_album = $_POST['existAlbum']; 
    $new_album = $_POST['newAlbum'];
}else{
    echo 'no album <br />';
}
print_r($_POST); 
```

新输出：

```
no album 
Array ( ) 
Notice: Undefined variable: new_album in E:\xampp\htdocs\fotokurs\upload\upload.php on line 20

Notice: Undefined variable: exist_album in E:\xampp\htdocs\fotokurs\upload\upload.php on line 21

Notice: Undefined variable: new_album in E:\xampp\htdocs\fotokurs\upload\upload.php on line 22

Notice: Undefined variable: exist_album in E:\xampp\htdocs\fotokurs\upload\upload.php on line 23 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T15:48:15.957

您的问题之一是`existAlbum`没有与之关联的实际值。

您有`<option>Select Album</option>`which 没有与 option 元素关联的值。如果没有关联的值，则不会将 select 元素发布到服务器。您应该将其更改为：

`<option value="">Select Album</option>`

**编辑**

由于用户只需要提供一个或另一个，您应该使用以下设置您的变量：

```
$existsAlbum = (isset($_POST['existAlbum']) && !empty($_POST['existAlbum'])) ? $_POST['existAlbum'] : 'defaultValue';
$newAlbum = (isset($_POST['newAlbum']) && !empty($_POST['newAlbum'])) ? $_POST['newAlbum'] : 'defaultValue'; 
```

需要注意的重要一点是[Internet Explorer 不支持占位符属性](http://www.w3schools.com/html5/att_input_placeholder.asp)。

**编辑 2**

这是我运行 test.php 的快速测试页面：

```
 <form action="upload.php" method="post" id="uploadform" name="uploadform" enctype="multipart/form-data">  
    <label id="filelabel" for="fileselect">Choose the Pictures</label>
    <input type="file" id="fileselect" class="fileuplaod" name="uploads[]" multiple />
    <span class="text">Exist Album</span><br />
    <select id="existAlbum" name="existAlbum" size="1">
      <option value="noAlbum">SELECT ALBUM</option>       
    </select>
    <span class="text">OR</span>
    <span class="text">New Album</span><br />
    <input id="newAlbum" name="newAlbum" type="text" maxlength="20" placeholder="ALBUM NAME"/>
    <input type="submit" value="Submit">
  </form> 
```

上传.php

```
 <pre>
<?php print_r($_POST); ?>
<?php print_r($_FILES); ?>
    </pre> 
```

结果

```
Array
(
    [existAlbum] => noAlbum
    [newAlbum] => 
)
Array
(
    [uploads] => Array
        (
            //Contents here
        )
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T15:44:57.467

如果 select 没有被选中，你根本不会得到它（你希望它是空的，这是不正确的）。你必须先检查

```
$exist_album = isset($_POST['existAlbum']) ? $_POST['existAlbum'] : '<DEFAULT VALUE>'; 
```

复选框也一样。

这个`newAlbum`东西应该可以工作，因为文本输入总是在那里。看

```
print_r($_POST); 
```

看看里面到底有什么，就我而言，它是 - 在“空”提交时，我得到：

```
Array
(
    [existAlbum] => SELECT ALBUM
    [newAlbum] => 
) 
```

顺便说一句：你应该使用`<?php`而不是`<?PHP`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T15:46:29.513

尝试是否设置了值 existsAlbum，因为如果您没有选择任何内容，它不会返回任何值。你可以给 existsAlbum 选择器一个 default='1' 或其他东西：

```
 if isset($_POST['existAlbum']){
        echo 'yes';
 }
 else{
      echo 'no';
 } 
```

我认为规则 enctype="multipart/form-data" 有问题。尝试删除它，它应该由您的浏览器自动设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T15:50:51.157

您对选项选择专辑没有任何价值，即使您不打算使用该选项，也可以给它一个值，例如 0，以便始终在 POST 变量中设置它。

```
<option value="0">SELECT ALBUM</option>
<option value="some album">Some Album</option>
... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T15:51:59.307

`print_r($_POST);`使用确保您的表单操作正确打印 $_POST 数组

```
<form action="upload.php" method="post" id="uploadform" name="uploadform" enctype="multipart/form-data"> 
```

# asp.net - 如何更改 gridview 删除按钮名称？

> ID：13608846
> 
> 赞同：2
> 
> 时间：2012-11-28T15:42:02.160
> 
> 标签：asp.net, gridview

如何更改删除“按钮”上的文本？例如，如果我想在那里“禁止用户”。

![删除按钮](../Images/763aa75e898f224f9bace5ac9729bf74.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T15:46:28.867

使用`DeleteText`属性设置命令的名称

```
<Columns>
   <asp:CommandField ShowDeleteButton="True" DeleteText="Ban User"/> 
```

如果是这样，`TemplateField`您可以这样做：

```
<asp:TemplateField ShowHeader="False">
    <ItemTemplate>
        <asp:LinkButton ID="LinkButton1" runat="server" 
                         CommandName="Delete" Text="Ban User"/>
     </ItemTemplate>
</asp:TemplateField> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T15:46:51.620

在您的`markup`页面上

如果它是一个`CommandField, DeleteText="REMOVE"`

```
<asp:CommandField ButtonType="Link" ... DeleteText="REMOVE" /> 
```

如果它是一个`ButtonField, Text="REMOVE"`

```
<asp:ButtonField ButtonType="Link" ... Text="REMOVE" /> 
```

# php - 从jQuery调用PHP文件不起作用

> ID：13608850
> 
> 赞同：-1
> 
> 时间：2012-11-28T15:42:09.397
> 
> 标签：php, jquery, html, call, execute

我正在尝试通过某个链接的 onClick 事件执行整个 PHP 文件。

```
<a onClick="phpSubmit();" class="submitButton">Submit</a> 
```

成功调用此 jQuery 函数

```
function phpSubmit()
{
    alert('submitting');

    $.post("/submit.php");

    alert('submitted'); 
} 
```

无法执行同一目录中的 PHP 文件“submit.php”。

有任何想法吗？

我尝试过 $.ajax、$.get 和“submit.php”以及“/submit.php”。我不知道为什么这不起作用，如果您认为我做错了什么，请重新发布 $.ajax 内容。

**编辑：**

总是小事，当我导入 jQuery 脚本时我输入了一个错误的字符，这就是 $.ajax 未定义的原因。

上述方法**有效**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:44:56.320

而不是使用 $.post 我更喜欢，并且发现它更容易调试，使用类似的东西：

```
$.ajax({
   dataType: 'html',
   type: 'POST',
   url: 'submit.php',
   cache: false,
   data: 'foo=bar',
   error: function(e){
      alert(e.status);
   },
   success: function(response){
      alert(response);
   }
}); 
```

我还建议删除`/`前面的`submit.php`- 如果它在同一目录中，则不需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T15:44:06.643

`$.post("submit.php");`不加斜线使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T15:47:19.193

如果无法将数据发布到 PHP 文件，您会收到错误消息。使用 $.ajax();

```
 error : function(XMLHttpRequest,textStatus,ErrorThrown)
          {
                alert(textStatus);
          } 
```

# java - HTTP 请求之间的休眠会话

> ID：13608851
> 
> 赞同：0
> 
> 时间：2012-11-28T15:42:10.513
> 
> 标签：java, hibernate

我正在开发一个 Web 应用程序，其中模型包含 a `Group`，其中包含`List`许多`Users`. 一个 HTTP 请求来显示`Group`. 这些`Users`都加载了，`FetchType.LAZY`因为我不想要它们。被`Group`保存到`HTTP session`并且`Hibernate Session`被关闭。然后应用程序通过显示`Group`名称和描述来响应。然后可能会出现一个新的 HTTP 请求以显示该组中的一些用户。从`Group`中提取`HTTP Session`并且应用程序尝试访问该列表。Hibernate 不会抛出异常，因为每个代理`User`都与`Hibernate Session`之前关闭的代理相关联？如何在 HTTP 会话中跨 HTTP 请求进行延迟加载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:01:00.750

您不应将用户或组（作为对象）放入会话中。最好的方案是将组 ID 放入会话中，并在必要时加载组和用户。

担心性能？让 Hibernate 二级缓存解决这个问题。如果您正确配置对象映射，缓存甚至应该支持按组检索所有用户，例如：

```
<class name="Group" table="...">
   <cache .../>

   <bag name=users" ...>
     <cache ....>
     ...
   </bag>
</class> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T15:47:21.573

我认为您不需要或不应该将其存储在会话中。当您需要关联时，您可以查询它。

* * *

**更新**

避免`Eager`加载，除非集合大小很小或可管理。例如，您`Groups`在每个组中有少量用户。

如果您有反向映射，您可以`group id`在后续调用中使用查询用户列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T16:52:20.173

您是否考虑过在视图中打开会话？

[在视图中打开会话](https://community.jboss.org/wiki/OpenSessionInView)

# drupal - 如何删除属于模块内容类型的字段痕迹？

> ID：13608852
> 
> 赞同：6
> 
> 时间：2012-11-28T15:42:19.427
> 
> 标签：drupal, drupal-7, drupal-modules, content-type

我正在尝试学习如何从我的模块中以编程方式创建自定义内容类型。

但是，在卸载并重新安装我的模块后，我收到一条错误消息，指出我试图创建的一个或多个字段无法创建，因为它们已经存在。

所以我对我的数据库进行了黑客攻击，删除了内容类型和属于它的所有表。

同样的结果——字段已经存在。

接下来我去了 Drupal API 网站寻找删除字段和字段实例的方法，结果遇到了

```
field_delete_field() 
```

和

```
field_delete_instance() 
```

我创建了一个 php 页面来尝试删除我创建的字段，只是得到一个错误，指出我试图删除的表不存在。

所以我有点卡住了——我不能创建字段，因为它们已经存在，我不能删除它们，因为它们不存在！

顺便说一句，我为我的模块建模的代码是在 Drupal[示例模块](http://drupal.org/project/examples)的“node_example”部分中找到的代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T18:17:53.190

哎呀，手动删除数据库表从来都不是一个好主意 - Drupal 不是那么宽容:)

只是为了解决安装/启用挂钩中的代码，将字段创建包装在：

```
if (!field_info_field('field_name')) {
  field_create_field(...
} 
```

这将阻止问题再次发生。或者，如果您不想这样做，请确保在卸载/禁用挂钩中删除该字段。显然，该方法可能会导致数据丢失。

要解决当前问题，请遵循以下流程：

*   完全卸载（不仅仅是禁用）您的自定义模块。如果它处于不一致的状态，只需删除它在`system`表中的行。
*   `field_config`从和`field_config_instance`表中删除该字段的所有痕迹。
*   手动截断所有缓存表（任何以 开头的表`cache_`）。
*   不是绝对必要的，但清除任何挥之不去的内容：

    ```
    $nids = db_query('SELECT nid FROM {node} WHERE type = :type', array(':type' => 'type'))->fetchCol();
    node_delete_multiple($nids); 
    ```

那应该这样做。

每当您通过 UI 或以编程方式删除字段时，您都需要运行 cron 或调用[`field_purge_batch()`](http://api.drupal.org/api/drupal/modules!field!field.crud.inc/function/field_purge_batch/7)“硬”删除字段，因为它们仅在第一个实例中被标记为删除。

# saml - SAMLart 是如何构建的？

> ID：13608853
> 
> 赞同：0
> 
> 时间：2012-11-28T15:42:31.817
> 
> 标签：saml

好吧，我有 2 个应用程序（idp，sp），我试图为 Artifact 进行通信......但我不知道怎么做......我发现谷歌搜索了这些步骤：[http://docs.oasis-open。 org/security/saml/Post2.0/sstc-saml-tech-overview-2.0-cd-02_html_19b6d40c.gif](http://docs.oasis-open.org/security/saml/Post2.0/sstc-saml-tech-overview-2.0-cd-02_html_19b6d40c.gif) 但现在我质疑......如何通过（使用Java的第4步到第5步之间）进行操作？我必须构建什么对象才能将其传递给 SAMLart 参数？

感谢提前！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:53:19.230

看起来你可以在opensaml中使用这个类[http://www.jarvana.com/jarvana/view/org/opensaml/opensaml/2.4.1/opensaml-2.4.1-javadoc.jar!/org/opensaml/saml2/核心/Artifact.html](http://www.jarvana.com/jarvana/view/org/opensaml/opensaml/2.4.1/opensaml-2.4.1-javadoc.jar!/org/opensaml/saml2/core/Artifact.html)

我的猜测是你用这个把它发送到 SP [http://www.jarvana.com/jarvana/view/org/opensaml/opensaml/2.4.1/opensaml-2.4.1-javadoc.jar!/org/ opensaml/saml2/binding/encoding/HTTPArtifactEncoder.html](http://www.jarvana.com/jarvana/view/org/opensaml/opensaml/2.4.1/opensaml-2.4.1-javadoc.jar!/org/opensaml/saml2/binding/encoding/HTTPArtifactEncoder.html)

# css - CSS中伪元素前的“&”是什么意思？

> ID：13608855
> 
> 赞同：91
> 
> 时间：2012-11-28T15:42:36.197
> 
> 标签：css, twitter-bootstrap, sass, less

在以下来自[Twitter Bootstrap](http://twitter.github.com/bootstrap/components.html#misc)的 CSS 中，& 字符是什么意思？

```
.clearfix {
  *zoom: 1;
  &:before,
  &:after {
    display: table;
    content: "";
  }
  &:after {
    clear: both;
  }
} 
```

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2012-11-28T15:43:54.480

那是[LESS](http://lesscss.org)，而不是 CSS。

此语法允许您嵌套选择器修饰符。

```
.clearfix { 
  &:before {
    content: '';
  }
} 
```

将编译为：

```
.clearfix:before {
  content: '';
} 
```

使用`&`，嵌套选择器编译为`.clearfix:before`.
没有它，它们将编译为`.clearfix :before`.

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2016-03-23T00:08:11.933

嵌套`&`选择 SASS 和 LESS 中的父元素。它不仅适用于伪元素，还可以与任何类型的选择器一起使用。

例如

```
h1 {
    &.class {

    }
} 
```

相当于：

```
h1.class {

} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-07-05T10:59:54.690

这是一个 SCSS/LESS 示例：

```
a {
   text-decoration: underline; 
   @include padding(15px);
   display: inline-block;

     & img  {
                padding-left: 7px;
               margin-top: -4px;
             }
 } 
```

及其在 CSS 中的等价物：

```
a {
  text-decoration: underline; 
  @include padding(15px);
  display: inline-block;
}

a img  {
     padding-left: 7px;
     margin-top: -4px;
   } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-10-28T06:18:11.763

'&' 在 Sass 和 Less 预处理器中都是有用的特性。用于嵌套。与 CSS 相比，它可以节省时间。

# asp.net - 为什么映射驱动器时asp.net中的“本地设备名称已在使用中”但命令行可以

> ID：13608859
> 
> 赞同：0
> 
> 时间：2012-11-28T15:42:50.643
> 
> 标签：asp.net, directory-structure, net-use, drive-mapping

在命令行中它工作正常： net USE T: \123.45.67.89\TEST mytestuser /user:MYTESTUSER

但是使用asp.net，使用以下代码，映射驱动器时总是抛出具有以下错误的异常：'本地设备名称已在使用中'

我尝试先断开所有驱动器的连接，映射到不同的驱动器号。我已经*从*不同的服务器和不同的服务器*完成了这个*

肯定是驱动器号的问题吗？

```
temp = MapDrive("T", "\\123.45.67.89\TEST", "MYTESTUSER", "mytestuser")

Public Shared Function MapDrive(ByVal DriveLetter As String, ByVal Path As String, ByVal Username As String, ByVal Password As String) As Boolean

    Dim ReturnValue As Boolean = False

    Dim p As New System.Diagnostics.Process()
    p.StartInfo.UseShellExecute = False
    p.StartInfo.CreateNoWindow = True
    p.StartInfo.RedirectStandardError = True
    p.StartInfo.RedirectStandardOutput = True
    p.StartInfo.FileName = "net.exe"
    p.StartInfo.Arguments = " use " & DriveLetter & ": " & Path & " /user:" & Username & " " & Password & " /persistent:yes"
    p.Start()
    p.WaitForExit()
    Dim ErrorMessage As String = p.StandardError.ReadToEnd()
    Dim OuputMessage As String = p.StandardOutput.ReadToEnd()
    Dim StoreFile As System.IO.Directory
    Dim Files As String()
    Dim File As String

If ErrorMessage.Length > 0 Then
        Throw New Exception("Error:" & ErrorMessage)

    Else
        ReturnValue = True
    End If

     Files = StoreFile.GetFiles("T:\FINDTHIS\", "*")

     For Each File In Files

        HttpContext.Current.Trace.Warn(File)
     Next

    Return ReturnValue
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:14:52.367

映射驱动器不是特定于运行`net`命令的用户吗？

您的 asp.net 页面通常以与当前用户不同的身份运行。这意味着您的代码可能会在您第一次运行时成功映射网络路径。然后，当您第二次运行它时，您将收到该错误。

但是随后您徒劳地寻找删除`cmd`窗口中该字母的映射，因为驱动器不是通过您的用户身份映射的（`cmd`毕竟您的窗口正在运行）

然后还有运行`net`命令所需的权限，尽管这可能会引发不同的错误。

# java - 在 MySQL 数据库上存储歌曲（BLOb 支持）

> ID：13608866
> 
> 赞同：1
> 
> 时间：2012-11-28T15:43:07.503
> 
> 标签：java, mysql, database, blob

我正在尝试在 MySQl db 上存储歌曲和歌词。我搜索了如何执行此操作的示例，但没有帮助。但是，我能够存储图像：

```
 con = DriverManager.getConnection(connectionURL, "root", "");
PreparedStatement ps = con.prepareStatement("INSERT INTO image VALUES(?,?)");
 File file = new File("E://guitar.gif");
FileInputStream fs = new FileInputStream(file);
ps.setInt(1,id);
ps.setBinaryStream(2,fs,fs.available());
int i = ps.executeUpdate();
ps.close();
con.close();
//rest code 
```

谁能帮助我如何存储歌曲？例如？以及如何找回它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T15:51:51.837

存储歌曲与存储图像没有什么不同。您可以为文件名添加另一列，并且您可以执行类似的操作来存储文件：

```
//..
PreparedStatement ps = con.prepareStatement("INSERT INTO data_table VALUES(?, ?, ?)");
//...
ps.setInt(1,id);
ps.setString(2, file.getName());
ps.setBinaryStream(3, fs,fs.available());
int i = ps.executeUpdate();
//... 
```

然后检索它：

```
PreparedStatement ps = con.prepareStatement("SELECT file_name, content from data_table where *some condition*");
ResultSet rs = ps.executeQuery();
while(rs.hasNext) {
    rs.next();
    String fileName = rs.getString("file_name");
    Blob blob = rs.getBlob("content");
    byte[] content = blob.getBytes(1, (int) blob.length());
    //now content contains the data, you ca store it in a file if you need
    OutputStream os = new FileOutputStream(new File("d:/test/" + fileName));
    os.write(content);
    os.close();
} 
```

不要忘记异常处理！

编辑：另一个带有字节数组的版本：写：

```
//..
PreparedStatement ps = con.prepareStatement("INSERT INTO data_table VALUES(?, ?, ?)");
//...
byte[] content = new byte[fs.available()];
ps.setInt(1,id);
ps.setString(2, file.getName());
ps.setBytes(3, content);
int i = ps.executeUpdate();
//... 
```

读：

```
PreparedStatement ps = con.prepareStatement("SELECT file_name, content from data_table where *some condition*");
ResultSet rs = ps.executeQuery();
while(rs.hasNext) {
    rs.next();
    String fileName = rs.getString("file_name");
    byte[] content = rs.getBytes("content");
    //now content contains the data, you ca store it in a file if you need
    OutputStream os = new FileOutputStream(new File("d:/test/" + fileName));
    os.write(content);
    os.close();
} 
```

# camera - iPhone相机可以检测到闪烁吗？（如在闪烁的图像中？）

> ID：13608872
> 
> 赞同：1
> 
> 时间：2012-11-28T15:43:29.867
> 
> 标签：camera, ios6

iPhone相机可以检测到闪烁吗？（如在闪烁的图像中？）我希望得到一些帮助，这对整个 x 代码世界来说是相当新的，所以您可以提供的任何建议将不胜感激。

# java - 如何在java中正确清除列表

> ID：13608875
> 
> 赞同：0
> 
> 时间：2012-11-28T15:43:37.277
> 
> 标签：java, list

假设我有一个这样的列表：

```
private LinkedList<String> messages = new LinkedList<String>(); 
```

当我的方法第一次被调用时，这个列表中添加了一些字符串。而且我还有另一种方法，我需要从以前添加的值中清除此列表。要清除它，我可以使用：

```
messages.clear(); 
```

这将从列表中删除所有元素。我也可以像这样创建一个新实例：

```
messages = new LinkedList<String>(); 
```

哪种方式更适合清除列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T15:45:15.123

```
messages.clear(); 
```

实际上会清除列表，`messages = new LinkedList<String>();`只会设置`messages`为引用一个新的列表实例，因此您可能会争辩说第一种方法更“正确”来清除列表实例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T15:49:42.273

假设您有一个由两个变量 a 和 b 引用的列表。像这样（它们不必像这样彼此靠近，它们甚至可能在不同的文件中..）：

```
final List<String> a = new LinkedList<String>();
final List<String> b = a; 
```

现在，两者之间有很大的不同

```
a.clear(); 
```

这将使 a 和 b 引用相同的空列表，并且

```
a = new LinkedList<String>(); 
```

这将使'a'引用一个新的空列表，'b'引用旧的填充列表。（所以他们不引用相同的列表）。

由于您可能希望它们引用相同的列表，因此首选 a.clear()，因为当您查看 b 引用的列表时不会有任何意外（您可能认为它是空的，但结果是如果您使用新方法，则填充）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T15:46:50.653

我更喜欢第一种方法，即`messages.clear();`它清除了元素，但列表不会被破坏和重新创建。根据需要删除所有元素。

**但是有一个副作用**：它会迭代您的列表并一次删除一个项目，因此如果列表很大，那么这是不必要的开销。

```
 for (Node<E> x = first; x != null; ) {
        Node<E> next = x.next;
        x.item = null;
        x.next = null;
        x.prev = null;
        x = next;
    }
    first = last = null;
    size = 0;
    modCount++; 
```

同样，**第二种方法也有一个副作用**：如果您在程序中的其他地方使用 r 列表的对象引用，则需要正确处理，否则您可能会得到一些意外的惊喜，例如，如果您将列表添加到其他对象/变量，那么第一种方法将清除引用它的每个地方的元素，而第二种方法则不会。

**摘要**：两种方法的结果在低级性质上是不同的；尽管它们似乎可以满足您的高级要求（清除列表）。**根据您的低级别要求仔细决定。**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T15:46:26.693

它们几乎相似，但我想说`messages.clear()`更灵活。

第二种方法很简单并且被广泛使用，但是`final`你的列表中有修饰符的问题你不能那样清除它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-28T15:46:52.113

```
messages.clear(); 
```

效率更高。为了更安全，您可以询问此列表是否为空

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-28T15:48:05.180

我个人更喜欢使用[LinkedList#clear](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/LinkedList.html#clear%28%29)，因为在阅读代码时可以更清楚地理解你在做什么。

但是它`new LinkedList<String>();`也可以正常工作。所以用什么就看你自己了！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-28T15:46:51.027

第一个更可取。第二个给垃圾收集器带来了额外的负担。但第一个不是。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-28T15:47:52.527

这显然取决于您的需要。

如果您想保留对列表对象实例的引用（例如，如果在其中调用 clear 方法的方法中调用`messages`是一个参数，那么调用 to`.clear()`是最好的解决方案。

另一方面，如果要清除的列表是当前方法所属对象的成员字段（或方法中的局部变量），则可以`new LinkedList<String>();`毫无问题地调用。

请注意，为了避免第一个（我倾向于不赞成），我通常总是返回我修改的对象作为修改它们的方法的结果。

# php - 试图理解为什么要使用这种类型的数据库设置

> ID：13608878
> 
> 赞同：1
> 
> 时间：2012-11-28T15:43:52.237
> 
> 标签：php, mysql, database, pdo

我最近遇到了一个以这种方式设置的数据库。

```
<?php
ini_set( "display_errors", true );
date_default_timezone_set( "Australia/Sydney" );  // http://www.php.net/manual/en/timezones.php
define( "DB_DSN", "mysql:host=localhost;dbname=cms" );
define( "DB_USERNAME", "root" );
define( "DB_PASSWORD", "" );
define( "CLASS_PATH", "classes" );
define( "TEMPLATE_PATH", "templates" );
define( "HOMEPAGE_NUM_ARTICLES", 5 );
define( "ADMIN_USERNAME", "admin" );
define( "ADMIN_PASSWORD", "mypass" );
require( CLASS_PATH . "/Article.php" );

function handleException( $exception ) {
  echo "Sorry, a problem occurred. Please try later.";
  error_log( $exception->getMessage() );
}

set_exception_handler( 'handleException' );
?> 
```

我了解它的工作原理，但我从未见过这样设置连接，您是否有理由希望以这种方式设置数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:30:30.270

这是一个非常常见的场景。我创建了一个在我的 PHP 项目中使用的 MySQL 类，并且可以从任何地方调用它来连接到数据库。你可以在这里抓住它：

[http://pastebin.com/2FrPHVLR](http://pastebin.com/2FrPHVLR)

对于需要连接到我的数据库的任何页面，我加载一个需要该类的全局配置文件，并添加我的凭据，例如

```
$db_hostspec = 'localhost';
$db_database = 'mydb';
$db_username = 'root';
$db_password = 'MySekretPassw0rd';
$db_port = '3306'; 
```

然后，我可以连接到数据库

```
$db = new MySQL($db_hostspec, $db_username, $db_password, $db_database); 
```

我可以通过以下方式调用数据库：

```
$products = $db->execute("SELECT * FROM Products"); 
```

# python - 管理员中的 stdimage 图像路径无效

> ID：13608887
> 
> 赞同：4
> 
> 时间：2012-11-28T15:44:06.977
> 
> 标签：python, django

我对 django 有点陌生，我在模型中使用了 stdimage 模块。当我通过管理员上传图像并保存时，在打开模型对象时，我发现该字段包含三件事

1.  当前图片：提供已上传图片的链接，例如uploaded_images/2012/11/28/map_7.jpeg
2.  更改：这是更改图像的规定
3.  删除：带有用于删除上传图像的复选框。当我添加图像并保存对象时，在 /admin/oxer/site/41/ 处出现错误 IOError，当我单击图像链接时出现 404 错误，图像 url 显示为 itech.com/admin/oxer /site/49/uploaded_images/2012/11/04/image_1.jpeg 而不是 itech.com/static/uploaded_images/2012/11/04/image_1.jpeg （注意我已经删除了 'admin/oxer/site/49'并替换为“静态”）。

我猜 ioerror 是由错误的 url 带来的。我怎样才能让它有正确的网址？

这是我的模型：

```
class Site(CommonMixin, ImageMixin):

    __metaclass__ = TransMeta

    name = models.CharField(max_length=255, verbose_name=_("Name"))
    description = models.TextField(verbose_name=_("Description"))
    has_airport = models.BooleanField(default=False)
    rating = models.IntegerField()
    order = models.IntegerField()
    do_not_miss = models.TextField(verbose_name=_("Do not miss"))
    recommended_stay = models.TextField(verbose_name=_("Recommended stay"))
    address = models.CharField(max_length=255, verbose_name=_("Address"))
    state = models.CharField(max_length=100, verbose_name=_("State"))
    price = models.TextField(verbose_name=_("Price"))
    good_to_know = models.TextField(verbose_name=_("Good to know"))
    link = models.URLField(blank=True, null=True)
    region = models.ManyToManyField('Region', blank=True, null=True)
    interests = models.ManyToManyField('Interest', blank=True, null=True)
    map = StdImageField(
        upload_to='uploaded_images/%Y/%m/%d',
        max_length=255,
        height_field='height',
        width_field='width',
        size=(453, 294, True),
        thumbnail_size=(195, 150, True),
        blank=True,
        null=True
    )
    location_lat = models.DecimalField(
        u'Location (latitude)', max_digits=10, decimal_places=7, default=0,
        help_text=u"You can use http://www.getlatlon.com to get a location's coordinates"
    )
    location_lon = models.DecimalField(
        u'Location (longitude)', max_digits=10, decimal_places=7, default=0,
        help_text=u"You can use http://www.getlatlon.com to get a location's coordinates"
    ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:47:45.243

ImageField 的 URL 是这样的

```
upload_to='uploaded_images/%Y/%m/%d', 
```

此路径与您的 MEDIA_URL 相关。假设您正在访问`http://site/admin/auth/user`. 如果在此页面中您有此类型的链接

```
<a href="uploaded_images/2012/11/28/file.ext">Anchor</a> 
```

该链接将指向

```
http://site/admin/auth/user/uploaded_images/2012/11/28/file.ext 
```

这是你得到的，显然是错误的。

长话短说，答案是您必须预先存储路径，`MEDIA_URL` 其中可能是

```
MEDIA_URL = '/media/' (the slash at the beginning points to the domain root) 
```

或者

```
MEDIA_URL = 'http://domain/media/' (might be redundant) 
```

# php - php strpos 在nl2br（）之后搜索时不起作用

> ID：13608889
> 
> 赞同：0
> 
> 时间：2012-11-28T15:44:11.843
> 
> 标签：php, strpos

我无法`strpos`正确使用。如果我搜索`<br />`它会找到它。如果我搜索`<br /><br /><br />`之间有或没有空格，它不会并且使用`htmlspecialchars`我可以告诉字符串已满。

```
 <?php
   $picArray = glob('projectData/' . $data['folder'] . '/*.jpg',GLOB_BRACE);

    $text = nl2br($data['definition']).'<br />';

    $cutP = 0;
    foreach($picArray AS $insert) {

        if(strpos($text,'<br /> <br /> <br />',$cutP) !== FALSE){
            $cutP = strpos($text,'<br /> <br /> <br />',$cutP)+6;
            echo $cutP.'_';
            $str_to_insert = '<img class="inTextImg" title="int" src="'.$insert.'" />';
            $text = substr($text, 0, $cutP) . $str_to_insert . substr($text, $cutP);
        }
        else {
            echo 'haha';
            $text .= '<img class="inTextImg" title="outText!" src="'.$insert.'" />';
        }
    }
    ?> 
```

谢谢你的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T15:58:00.263

这是因为`nl2br`将原始换行符保留在原位，就在`'<br />'`. 您需要在要搜索的字符串中包含换行符。由于可能有几种不同的模式，因此最容易使用正则表达式来匹配它：

```
$text = preg_replace('/(?:<br \/>\r?\n?){3}/', $str_to_insert, $text); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T15:50:55.457

您是否尝试过使用 preg_match() ？

```
if(preg_match("\(<br />)+\",$text) > 0){
    // code
} 
```

不是 100% 的正则表达式，但你会想要一个检查一个或多个 br 标签

# ruby - 如何使用 watir 滚动网页

> ID：13608890
> 
> 赞同：15
> 
> 时间：2012-11-28T15:44:11.200
> 
> 标签：ruby, cucumber, watir, watir-webdriver

我正在尝试滚动网页以查找并单击滚动页面时延迟加载的内容。我正在使用以下命令

```
require 'watir-webdriver'

@browser = Watir::new :firefox
@browser.send_keys :space 
```

我正在使用带有 Firefox 的网络驱动程序，并且我在 ubuntu 上，但它无法正常工作。在下面的 ruby​​ 代码中，我试图向下滚动页面，直到找不到具有 :id 的元素。该元素正在延迟加载。几秒钟后我超时，知道以下代码有什么问题。

```
When /^deal (\d+) is loaded$/ do |id|
  (0..5).each do |click|    
    @browser.send_keys :space
  end
end 
```

使用 watir-driver 滚动页面的最佳方法是什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-28T16:06:49.223

如果您启用了 JavaScript，您可以访问底层驱动程序并执行一些 JavaScript 以在页面上滚动。

```
@browser.driver.executeScript("window.scrollBy(0,200)") 
```

将沿 y 轴向下滚动页面 200 像素。

有关该方法的文档，请参见此处：

[http://www.w3schools.com/jsref/met_win_scrollby.asp](http://www.w3schools.com/jsref/met_win_scrollby.asp)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-01-07T22:46:22.147

我使用一个名为“watir-scroll”的宝石来帮助我解决这个问题。虽然它通常需要滚动到的地方，但它也会滚动到坐标。

[https://github.com/p0deje/watir-scroll](https://github.com/p0deje/watir-scroll) **自从 Watir v6.16 `watir-scroll`gem 合并到`watir`**

您可以滚动到特定元素

```
button1 = @browser.input(:class => "mileage_rate")
@browser.scroll.to button1 
```

或者只是滚动到顶部中间或中心

```
@browser.scroll.to :top
@browser.scroll.to :center
@browser.scroll.to :bottom 
```

或滚动到一个坐标

```
browser.scroll.to [0, 200] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-08-04T16:46:36.103

这为我节省了很多时间：

```
browser.div(:id => 'start-date-holder').wd.location_once_scrolled_into_view 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-01-06T18:39:50.947

抱歉，我无法对最后一个答案发表评论，因为我是新来的，还没有足够的代表点数，所以我刚刚创建了一个新答案。无论如何，如果有人在多次滚动时遇到问题，试试这个（添加一个循环和睡眠）：

```
maximum_times_needed = max # of times you need the page to scroll down

maximum_times_needed.each do
@browser.driver.executeScript("window.scrollBy(0,200)")
sleep 0.15
end 
```

`0.15`可能会因页面加载所需的时间而异。 `0.15`为 0.15 秒，因此请根据需要进行调整，以留出足够的时间来加载页面。200可能还需要调整到更大的像素量。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-03-20T07:47:21.987

```
 300.times do
      @browser.driver.execute_script("window.scrollBy(0,200)")
      sleep 0.05
    end 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-17T00:17:53.230

您可以访问底层驱动程序并执行一些 javascript。例如，如果您想滚动到页面底部，您将使用

```
@browser.driver.execute_script( "window.scrollBy(0,document.body.scrollHeight)" ) 
```

它在 y 轴上滚动到页面底部。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-06-07T07:59:46.393

有用

```
evaluate_script("document.getElementsByTagName('body')[0].scrollTop=0;") 
```

# c++ - 如何使用 pthreads 使多线程正常工作，而不是使用 C++ 在类中提升

> ID：13608898
> 
> 赞同：-1
> 
> 时间：2012-11-28T15:44:23.323
> 
> 标签：c++

我有一个项目，我在这里总结了一些伪代码来说明问题。我没有编译器问题，无论是使用 boost 还是 pthreads，我的代码都能很好地编译。请记住，这是旨在说明问题的伪代码，不能直接编译。

我遇到的问题是，对于多线程函数，内存使用和处理时间总是比使用串行编程（例如 for/while 循环）实现相同的函数要长。

这是我面临的问题的简化版本：

```
class aproject(){

public:

typedef struct
{
char** somedata;
double output,fitness;
}entity;

entity **entity_array;

int whichthread,numthreads;
pthread_mutex_t mutexdata;

aproject(){
numthreads = 100;
*entity_array=new entity[numthreads];
for(int i;i<numthreads;i++){
entity_array[i]->somedata[i] = new char[100];
}

/*.....more memory allocations for entity_array.......*/
this->initdata();
this->eval_thread();

}
void initdata(){
/**put zeros and ones in entity_array**/

}
float somefunc(char *somedata){

float output=countzero();       //someother function not listed

return output;
}

void* thread_function()
{
    pthread_mutex_lock (&mutexdata);

    int currentthread = this->whichthread;
    this->whichthread+=1;

        pthread_mutex_unlock (&mutexdata);

    entity *ent = this->entity_array[currentthread];

    double A=0,B=0,C=0,D=0,E=0,F=0;
    int i,j,k,l;

         A = somefunc(ent->somedata[0]);
         B = somefunc(ent->somedata[1]);

        t4 = anotherfunc(A,B);

        ent->output   = t4;
        ent->fitness  = sqrt(pow(t4,2)); 

                    }

static void* staticthreadproc(void* p){

return reinterpret_cast<ga*>(p)->thread_function();

}

void eval_thread(){

//use multithreading to evaluate individuals in parallel 

int i,j,k;
nthreads = this->numthreads;
pthread_t threads[nthreads];

//create threads
pthread_mutex_init(&this->mutexdata,NULL);
this->whichthread=0;

for(i=0;i<nthreads;i++){

pthread_create(&threads[i],NULL,&ga::staticthreadproc,this);

//printf("creating thread, %d\n",i);
}

//join threads
for(i=0;i<nthreads;i++){

pthread_join(threads[i],NULL);

}

}

}; 
```

我在这里使用 pthreads 是因为它在内存较少的机器上比 boost 效果更好。每个线程都在 eval_thread 中启动并在那里终止。我正在使用互斥锁来确保每个线程都以 entity_array 的正确索引开始，因为每个线程仅将其工作应用于由变量 this->whichthread 索引的相应 entity_array。这个变量是唯一需要被互斥锁锁定的东西，因为它是为每个线程更新的，并且不能被其他线程更改。您可以愉快地忽略除了 thread_function、eval_threads 和 staticthreadproc 之外的所有其他函数，因为它们是唯一相关的函数，假设除了 init 之外的所有其他函数都是处理器和内存密集型的。

所以我的问题是为什么以这种方式使用多线程比**完全不**使用线程的传统方法在内存和速度方面的成本更高？

**我必须重申代码是伪代码，问题不在于它是否会编译**

谢谢，如果您对 pthreads 和/或 boost 解决方案有任何建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T15:46:42.050

每个线程都需要它自己的调用堆栈，这会消耗内存。函数的每个局部变量（以及调用堆栈上的所有其他函数）都计入该内存。

创建新线程时，为其调用堆栈保留空间。我不知道 pthreads 的默认值是什么，但您可能想研究一下。如果您知道所需的堆栈空间比默认保留的要少，则可以通过在生成线程时显式指定所需的堆栈大小来显着减少内存消耗。

至于性能部分 - 它可能取决于几个问题。通常，您不应期望将数字运算操作并行化到比您拥有的内核更多的线程上来提高性能（不知道这里是否是这种情况）。由于上下文切换的额外开销、缓存未命中数量的增加等原因，这最终可能会变慢。有一些方法可以对此进行分析，具体取决于您的平台（例如，[Visual Studio 分析器可以计算缓存未命中](http://msdn.microsoft.com/en-us/library/bb385772.aspx)，并且还有[适用于 Linux 的工具](https://stackoverflow.com/questions/2486840/linux-c-how-to-profile-time-wasted-due-to-cache-misses)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:02:27.207

创建线程是一项相当昂贵的操作。如果每个线程只做非常少量的工作，那么你的程序可能会被创建它们所花费的时间所支配。此外，大量活动线程会增加调度它们所需的工作，从而降低系统性能。而且，正如另一个答案所提到的，每个线程都需要自己的堆栈内存，因此内存使用量将随着线程数的增加而增长。

另一个问题可能是缓存失效；当一个线程将其结果写入其`entity`结构时，它可能会使附近的缓存内存无效并强制其他线程从更高级别的缓存或主内存中获取数据。

如果您使用较少数量的线程，每个线程处理较大的数据子集，您可能会获得更好的结果。对于这样的 CPU 密集型任务，每个 CPU 一个线程可能是最好的——这意味着您可以让所有 CPU 保持忙碌，并且无需浪费时间在每个 CPU 上调度多个线程。确保每个线程处理的实体都位于数组中，因此不会使其他线程缓存的实体无效。

# symfony - Symfony2 表单类型和下拉列表

> ID：13608904
> 
> 赞同：0
> 
> 时间：2012-11-28T15:44:46.980
> 
> 标签：symfony, symfony-2.1

# **设想**

我有一个表单类型，用于创建或编辑我的实体。**这些实体以x 对多的**方式与其他实体有某种关系。这意味着 - 相对于保存操作 - 我的下拉列表将填充受约束实体的列表。

假设 - 在形式上 - 有这样的东西：

主要实体：MiniCooper
附件列表
产品 1：[用户可以使用此表单直接插入和保存
的输入属性列表] 产品 2：[用户可以使用此表单直接插入和保存的输入属性列表]
......
产品*n*：[用户可以使用此表单直接插入和保存的输入属性列表]

其中 Product[1,2,....,n] 是关系的“多”方（将“主要实体”视为关系的“x”方；对于我们的示例而言，实际上是否应该这样做并不重要）是 n 对 m 关系）并假设这些相关实体在创建“主要实体”本身时“自动”分配给我的主要实体。

当我通过实体类型呈现我的表单时，我将获得 Product 1 ， Product 2 ， .... ， Product N 将呈现为下拉列表，并选择了相应的元素。
但是.....我不想要这种行为。我更喜欢它们可能是某种“标签”或类似的东西（因此没有人可以更改选择并产生相同“产品”的多重分配）。我如何编写我的实体类型——现在这些字段是“实体”类型的——来获得这个？

此外，我必须强制使用数据转换器吗？

# 截屏

[![想象](../Images/f1730f9daacf6cfc7312fa798690d488.png)](https://i.stack.imgur.com/aYyJO.png)

正如您从屏幕截图中看到的那样，所有下拉列表（“价格类型”除外）都不应该是下拉列表（我知道我可以制作单值下拉列表，但我不想要它们）。
希望这张图片能帮助你更好地理解我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:02:10.687

> 我更喜欢它们可能是某种“标签”或类似的东西（所以没有人可以改变选择并产生相同“产品”的多重分配）

从您的描述听起来好像您想要显示数据，而不是提供一个表单来编辑它（也就是说，您想要在页面上列出实体及其附件）。

解决这个问题的方法是完全避免使用表单，而只是让实体在视图中可用并直接呈现信息。

或者，如果您尝试在（为简单起见）一对多关系中的相关项目中以“多项选择”的形式表示，则“实体”表单字段类型的“扩展”和“多项”选项应该做你想要什么。

如果这些都不是答案，那是因为我正在努力理解这个问题:)。

# php - 将 int-date 转换为 RSS PubDate RFC 822 PHP

> ID：13608908
> 
> 赞同：1
> 
> 时间：2012-11-28T15:44:56.620
> 
> 标签：php, validation, rss, w3c, pubdate

我有一个让我抓狂的问题，我的任务是从 API 解析日期并将其转换为 RFC 822 格式，因为输出的提要出现验证错误

API 中的日期如下所示：

```
<review created="2012-10-23 14:51:12.0"> 
```

我在通过 substr 进行的描述中有一个日期

```
$xtime = substr($review["created"], 0, 16);
$jahr = substr($xtime,0,4);
$mon  = substr($xtime,5,2);
$tag  = substr($xtime,8,2);
$datneu = $tag.'.'.$mon.'.'.$jahr; 
```

此日期将呈现为：

```
23.10.2012 
```

对于我所做的发布

```
$xtime = substr($review["created"], 0, 16);
$xxl = $pubtime . " GMT"; 
```

呈现为：

```
2012-10-23 14:51:12 GMT 
```

W3C 提要验证器说它没有验证，因为 pubDate 不是 RFC 822 形式

```
Sorry

This feed does not validate.

line 10, column 38: pubDate must be an RFC-822 date-time: 2012-10-29 11:51:23 GMT (5 occurrences) [help]

          <pubDate>2012-10-29 11:51:23 GMT</pubDate> 
```

它需要看起来像：

```
<pubDate>Wed, 02 Oct 2002 13:00:00 GMT</pubDate> 
```

我可以想象一个 hacky 解决方案来表达“if (month = 01){ actualmonth = Jan}”，但我真的不知道如何处理这些日子，

另外我对 PHP 不太满意，但我需要尽快解决这个问题。

希望你能帮助我，一定有一个我在类似问题上没有找到的解决方案

问候约翰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T15:55:02.463

看看`DateTime::createFromFormat()`或`date_create_from_format`。

[http://fr2.php.net/manual/en/datetime.createfromformat.php](http://fr2.php.net/manual/en/datetime.createfromformat.php)

```
<?php
$date = date_create_from_format('Y-m-d H:i:s', '2012-10-23 14:51:12.0');
echo date_format($date, 'D, d M Y H:i:s');
?> 
```

查看可能的日期格式

[http://fr2.php.net/manual/en/function.date.php](http://fr2.php.net/manual/en/function.date.php)

编辑：固定

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T15:50:26.923

嗨，在 PHP 中，你应该看看这个：[函数日期](http://php.net/manual/en/function.date.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T22:35:39.770

是的，对我有用，**太棒**了！

对于其他人来说，我的案例的确切解决方案是

* * *

```
$before = "2012-10-23 14:51:12.0";

$timetwo = substr($before, 0, 16);

$timethree = date_create_from_format('Y-m-d H:i:s', $timetwo);

$timefinal = date_format(timethree, 'D, d M Y H:i:s');

$after = $timefinal . ' GMT' ; 

$after = "Mon, 23 Oct 2012 14:51:12 GMT"; 
```

非常感谢您的快速回答，您太棒了！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-29T09:28:51.530

这对我有用....

```
date("r", strtotime($yourdate)) 
```

$yourdate 是**2013**年 10 月 27 日，我得到了**Sun，2013 年 10 月 27 日 00:00:00 +0000**

# tridion - 在 SDL Tridion 2011 Sp1 中的 RTF 字段的 XSL 格式功能中显示消息

> ID：13608910
> 
> 赞同：4
> 
> 时间：2012-11-28T15:45:00.793
> 
> 标签：tridion, tridion-2011

我在模式中的一个 RTF 字段中添加了一些 xsl 格式化功能。

我在其中使用了以下代码段。对于任何错误，我需要停止组件保存并向用户显示一些自定义消息。

```
<xsl:message terminate="yes">
         <xsl:value-of select="'Some error message'"/>
</xsl:message> 
```

它停止组件保存，但不显示消息。

任何人都可以让我知道是否有更好的方法。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T16:19:22.310

此处的 XSLT 模板不能用于显示消息，只能用于转换内容。

如果您想向用户显示错误消息，我建议您查看以下 2 个博客：

[在保存时验证内容 - 第 1 部分](http://nunolinhares.blogspot.co.uk/2012/07/validating-content-on-save-part-1-of.html)

[在保存时验证内容 - 第 2 部分](http://www.curlette.com/?p=913)

# ruby-on-rails - rails bootstrap popover点击不起作用

> ID：13608912
> 
> 赞同：0
> 
> 时间：2012-11-28T15:45:07.920
> 
> 标签：ruby-on-rails, twitter-bootstrap, click, popover

我正在尝试使用[twitter bootstrap example](http://twitter.github.com/bootstrap/javascript.html#popovers)中的弹出框，所以当你点击一个按钮时它会出现，当你点击它时它会消失。

我在 application.js

```
//= require bootstrap-tooltip.js
//= require bootstrap-popover.js
$(function () {
$('.popover-test').popover(); 
```

});

在我看来 _fof.html.erb

```
<button class="popover-test" id="button1" data-content="Popover Content">
    <%= 'ciao' %>
</button> 
```

但是popover只有在鼠标悬停时才会出现，当我继续前进时它就会消失。我必须在js中实现函数on_click吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:56:23.400

默认情况下，弹出框由鼠标悬停触发，而不是通过单击触发。如果您在链接到的 Bootstrap 文档网页上向下滚动，您将看到一个选项列表，包括如何设置触发器。

```
Name: trigger
Type: string
Default: 'click'
Description: how popover is triggered - click | hover | focus | manual 
```

所以调用它会是这样的：

```
$('.popover-test').popover({target: "click"}); 
```

# javascript - 使用多个下拉菜单更改 p 标签类

> ID：13608913
> 
> 赞同：0
> 
> 时间：2012-11-28T15:45:09.797
> 
> 标签：javascript, jquery, css, arrays, class

有人能告诉我如何有多个下拉菜单，包括大小、重量、字体颜色和字体系列。一旦用户从每个下拉列表中选择一个，点击提交和 p 或 div 元素会改变吗？我有一个代码，但不确定如何更改多个？我还需要更改为单击按钮，并且显示出现在 ap 标签中，而不是实际按钮中。

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>JS Change Class</title>
<style type="text/css" media="screen">
.red { border: 1px solid red; }
.blue { border: 1px solid blue; }
.green { border: 1px solid green; }
</style>
</head>

<body>

<select id="colors">
    <option value="red">Red</option>
    <option value="blue">Blue</option>
    <option value="green">Green</option>
</select>

<input type="button" class="red" value="This is a button" id="button" />

<script type="text/javascript" charset="utf-8">

var colors = document.getElementById('colors');
var button = document.getElementById('button');

addEvent(colors, 'change', function() {
    button.className = colors.value;
});

// Based on the lessons from Nettuts
function addEvent(obj, evt, fn) {
    evt = evt.replace('on', '');
    if( obj.attachEvent )
        obj.attachEvent('on' + evt, fn);
    else
        obj.addEventListener(evt, fn, false);
}

</script>   

</body>
</html> 
```

**更新：我想添加三个下拉菜单，大小 x3 选项，字体系列 x3 选项和字体粗细 x3 选项。用户应该能够从每个中选择，然后单击提交按钮，它将显示在 ap 标签中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:53:52.710

使用 jQuery，更改此行：

```
button.className = colors.value; 
```

对此：

```
$(":button").each(function(){
   this.className = colors.value;
}) 
```

# python - Python：如何通过引用传递字符串？

> ID：13608919
> 
> 赞同：32
> 
> 时间：2012-11-28T15:45:25.530
> 
> 标签：python, string

从此链接：[如何通过引用传递变量？](https://stackoverflow.com/questions/986006/python-how-do-i-pass-a-variable-by-reference)，我们知道，Python在作为参数传递给函数的时候会复制一个字符串（一个不可变的类型变量），但是我认为如果字符串很大的话会浪费内存。很多情况下，我们需要用函数来包装一些对字符串的操作，所以想知道怎么做更有效？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-28T15:46:49.930

Python 不会复制传递给函数的对象（包括字符串）：

```
>>> def foo(s):
...     return id(s)
...
>>> x = 'blah'
>>> id(x) == foo(x)
True 
```

如果您需要在函数中“修改”字符串，请返回新字符串并将其分配回原始名称：

```
>>> def bar(s):
...     return s + '!'
...
>>> x = 'blah'
>>> x = bar(x)
>>> x
'blah!' 
```

不幸的是，当对大字符串进行小的更改时，这可能非常低效，因为大字符串会被复制。处理这个问题的pythonic方法是将字符串保存在一个列表中，并在你拥有所有部分后将它们连接在一起。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-06-14T22:11:39.833

Python**确实**通过引用传递了一个字符串。请注意，具有相同内容的两个字符串被认为是相同的：

```
a = 'hello'
b = 'hello'
a is b        # True 
```

由于当 b 被一个值赋值，并且该值已经存在于内存中时，它使用相同的字符串引用。请注意另一个事实，如果字符串是动态创建的，即使用字符串操作（即连接）创建，新变量将引用同一字符串的新实例：

```
c = 'hello'
d = 'he'
d += 'llo'
c is d        # False 
```

话虽如此，创建一个新字符串将在内存中分配一个新字符串并返回一个新字符串的引用，但使用当前创建的字符串将重用相同的字符串实例。因此，将字符串作为函数参数传递**将**通过引用传递，或者换句话说，将传递字符串在内存中的地址。

现在到了您正在寻找的地方-如果您更改函数内部的字符串，则函数外部的字符串将保持不变，这源于字符串的不变性。更改字符串意味着在内存中分配一个新字符串。

```
a = 'a'
b = a    # b will hold a reference to string a
a += 'a'
a is b   # False 
```

**底线：**

你不能真正改变一个字符串。可能与其他所有编程语言相同（但不要引用我的话）。当您将字符串作为参数传递时，您传递了一个引用。当您更改它的值时，您将变量更改为指向内存中的另一个位置。但是当你改变一个变量的引用时，其他指向同一个地址的变量自然会保留它们持有的旧值（引用）。希望解释足够清楚

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-28T15:48:24.680

```
In [7]: strs="abcd"

In [8]: id(strs)
Out[8]: 164698208

In [9]: def func(x):
    print id(x)
    x=x.lower() #perform some operation on string object, it returns a new object
    print id(x)
   ...:     

In [10]: func(strs)
164698208              # same as strs, i.e it actually passes the same object 
164679776              # new object is returned if we perform an operation
                       # That's why they are called immutable 
```

但是对字符串的操作总是返回一个新的字符串对象。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-11-28T16:20:11.087

```
def modify_string( t ):
  the_string = t[0]
  # do stuff

modify_string( ["my very long string"] ) 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-12-18T17:33:37.410

如果您想潜在地更改传入的值，请将其包装在 dict 或列表中：

这不会改变

```
def x(s):
  s += 1 
```

这确实改变了 s：

```
def x(s):
  s[0] += 1 
```

这是“通过引用传递”的唯一方法。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-02-28T12:34:12.650

将字符串包装成一个类将使其通过引用传递：

```
 class refstr:
       "wrap string in object, so it is passed by reference rather than by value"
       def __init__(self,s=""):
          self.s=s
       def __add__(self,s):
          self.s+=s
          return self
       def __str__(self):
          return self.s

    def fn(s):
       s+=" world"

    s=refstr("hello")
    fn(s) # s gets modified because objects are passed by reference
    print(s) #returns 'hello world' 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-28T15:46:50.990

只需像传递任何其他参数一样传递它。内容不会被复制，只有引用会。

# mysql - 有什么方法可以让我在只知道父 ID 的情况下通过一个查询获得一整棵树？

> ID：13608925
> 
> 赞同：1
> 
> 时间：2012-11-28T15:45:37.357
> 
> 标签：mysql, tree

我正在寻找一种非递归解决方案来进行 MySQL 查询以选择节点的所有叶节点（子节点、孙子节点等），同时只知道节点的直接子节点是谁。

目前我有以下表格：

> 节点：
> 
> *   身份证 (INT)
> *   数据（VARCHAR）
> 
> 关系：
> 
> *   父 ID (INT)
> *   childId (INT)
> *   childNodeOrder (INT)

我目前的方式只能选择父节点的**直接**子节点（对于这个例子，让父 Id = 1）：

```
SELECT * FROM  Nodes n
JOIN Relationships r ON r.childId = n.id
WHERE r.parentId = 1
ORDER BY r.childNodeOrder; 
```

有什么方法可以让我轻松地更改这个数据库**而不**使用递归调用（在我的服务器端代码上）并且能够获取父级的所有后代叶子？

到目前为止，我已经看过像[这样](https://stackoverflow.com/questions/8252323/mysql-closure-table-hierarchical-database-how-to-pull-information-out-in-the-c)的问题，这似乎是一个根本性的变化，而且不太容易切换......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:26:08.813

请参阅 NESTED SET 数据模型，它可能在这里有所帮助。

[http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)

编辑：由于需要更多上下文，这里是详细信息。

父节点将具有覆盖范围 [left, right] 的 left 和 right 属性。

所有子节点都将包含在该范围内，因此：

parent.left <= child.left <= child.right <= parent.right。

所有叶子节点的范围都是 1，因此 left + 1 = right 仅适用于叶子。

要从父节点获取所有叶子，请使用类似于以下的 where 子句：

WHERE (left + 1 = right) AND (left >= parent.left) AND (right <= parent.right)

# mongodb - 多参数mongodb查询

> ID：13608929
> 
> 赞同：0
> 
> 时间：2012-11-28T15:45:46.360
> 
> 标签：mongodb, mongoose

找出成本最低、评分最高、平均评分最高的项目。这是正确的方法吗？

```
exports.getBestEconomicalProject = function(number, callback){  
    var result = ProjectModel.find().sort({averageCost: 1}, {ratingCount : -1}, {averageRating : -1}).select({_id: 1}).limit(number).exec(
            function(err, projects) {
                callback(null, projects)
            }
        );  
    return result;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T18:39:42.020

您需要将所有[`sort`](http://mongoosejs.com/docs/api.html#query_Query-sort)术语组合成一个对象：

```
exports.getBestEconomicalProject = function(number, callback){  
    var result = ProjectModel.find()
        .sort({averageCost: 1, ratingCount : -1, averageRating : -1})
        .select({_id: 1})
        .limit(number)
        .exec(
            function(err, projects) {
                callback(null, projects)
            }
        );  
    return result;
} 
```

或者使用字符串格式`sort`：

```
exports.getBestEconomicalProject = function(number, callback){  
    var result = ProjectModel.find()
        .sort('averageCost -ratingCount -averageRating')
        .select({_id: 1})
        .limit(number)
        .exec(
            function(err, projects) {
                callback(null, projects)
            }
        );  
    return result;
} 
```

# java - 在从文件中读取时使用 compareto() 并将其保存在双链表中

> ID：13608932
> 
> 赞同：0
> 
> 时间：2012-11-28T15:45:48.587
> 
> 标签：java, nullpointerexception, inverted-index

我从文件中读取单词并将其放入双链表中我使用 .equals() 方法来检查单词是否在双链表中并且该方法工作正常但是当我使用 compareto() 方法对单词进行排序时它显示了这些异常：-

```
 Exception in thread "main" java.lang.NullPointerException
    at DoubleLinkedList.insert(DoubleLinkedList.java:49)
    at FileSystemIndexer.indexFile(FileSystemIndexer.java:88)
    at FileSystemIndexer.IndexDirectory(FileSystemIndexer.java:18)
    at TestPhase1.main(TestPhase1.java:15) 
```

方法 ：-

```
 import java.io.*;
import java.util.*;

public class FileSystemIndexer {

    private  DoubleLinkedList<Index> invertedIndex;

    public  FileSystemIndexer (){
        invertedIndex=new DoubleLinkedList<Index>();
    }

    public void IndexDirectory(File dir){

         File[] files =dir.listFiles();
         for(int i=0 ; i<files.length; i++){
             indexFile(files[i]);    //FileSystemIndexer.java:18
         }

    }

    public void indexFile(File file ){
        Scanner input = null;
        try{
            input = new Scanner(file);
        }
        catch(Exception e) {
            System.out.println(e);
        }

            String c;
            input.useDelimiter(",|\\.|:|\\s+");
        while(input.hasNext()) {
        c=input.next();
        if(c.equals("")){
            c=input.next();

        }else{
        //System.out.println("here: " + c);

         if(invertedIndex.empty()){

        invertedIndex.insert( new Index(c,file));
         }else{
             invertedIndex.FindFirst();
             while(!invertedIndex.last()){

                 if(invertedIndex.retrieve().getWord().compareTo(c)==-1){
                     System.out.println("here: " + c);
                     invertedIndex.FindPrevious();
                     invertedIndex.insert(new Index(c,file));
                 }else if(invertedIndex.retrieve().getWord().compareTo(c)==1){
                     System.out.println("here: " + c);
                     invertedIndex.findNext();  
            invertedIndex.insert(new Index(c,file));  //FileSystemIndexer.java:88
                 }
                     else if(invertedIndex.retrieve().getWord().compareTo(c)==0){ 
                         System.out.println("here: " + c);
                         invertedIndex.retrieve().getFiles().insert(file);
                     }

                 /*
                 if(invertedIndex.retrieve().getWord().equals(c)){
                     invertedIndex.retrieve().getFiles().insert(file);

                 }

                 invertedIndex.findNext();
             } 
             if(invertedIndex.retrieve().getWord().equals(c)){
                 invertedIndex.retrieve().getFiles().insert(file);

             }else {
                 Index i=new Index(c,file);
                 invertedIndex.insert(i);
             }

         }/**/

        }                       if(invertedIndex.retrieve().getWord().compareTo(c)==-1){
             invertedIndex.FindPrevious();
             invertedIndex.insert(new Index(c,file)); 
         }else if(invertedIndex.retrieve().getWord().compareTo(c)==1){
             invertedIndex.findNext();
             invertedIndex.insert(new Index(c,file));
         }
             else if(invertedIndex.retrieve().getWord().compareTo(c)==0){ 
                 invertedIndex.retrieve().getFiles().insert(file);
             }

                }
            }
        }
        input.close();

       //}
        //catch (Exception e){
            //  System.out.println(e);
            //}

        } 
```

双链表中的插入方法：-

```
public void insert(T val ){
        Node<T> tmp= new Node<T> (val);  
        if(empty()){
            current=head=tmp;
        }else{
            tmp.next=current.next; //DoubleLinkedList.java:49
            tmp.previous=current;
            if(current.next !=null)
                current.next.previous=tmp;
            current.next=tmp;
            current=tmp;
        }
    } 
```

我对双链表的实现：

```
 public class DoubleLinkedList<T> {
    private Node<T> head;
    private Node<T> current ;

    public DoubleLinkedList(){
        head=current=null;
    }
    public boolean empty(){
        return head==null;

    }
    public boolean last(){
        return current.next==null;

    }
    public boolean first(){
        return current.previous==null;
    }

    public boolean full(){
         return false ;
    }
    public void FindFirst(){
        current=head;
    }
    public void findNext(){
        current=current.next;
    }
    public void FindPrevious(){
        current=current.previous;
    }
    public T retrieve(){
        return current.data;

    }

    public void update(T val ){
        current.data=val;
    }

    public void insert(T val ){
        Node<T> tmp= new Node<T> (val);  
        if(empty()){
            current=head=tmp;
        }else{
            tmp.next=current.next;
            tmp.previous=current;
            if(current.next !=null)
                current.next.previous=tmp;
            current.next=tmp;
            current=tmp;
        }/*
           if(empty()){
                current=head=tmp;
            }else{
                tmp.previous = current;
                tmp.next = current.next;
                if(current.next != null)
                    current.next.previous = tmp;
                current.next = tmp;
            }*/
        }

    public void remove(){
        if(current==head){
            head=head.next;
            if(head!=null)
                head.previous=null;
        }else{
            current.previous.next=current.next;
            if(current.next !=null)
                current.next.previous=current.previous;
        }

        if(current.next==null)
            current=head;
        else
                current=current.next ;
    }

    public void remove2(){

        if(current==head)
            head=head.next;
        else
            current.previous.next=current.next;

        if(current.next !=null)
            current.next.previous=current.previous;
        if(current.next==null)
            current=head;
        else
            current=current.next;

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:36:06.433

如果您的插入意图是在列表末尾添加一个新节点，则插入代码必须更改如下...

```
 public void insert(T val ){
        Node<T> tmp= new Node<T> (val);  
        if(empty()){
            current=head=tmp;
        }else{
            tmp.previous=current;
            current.next=tmp;
            current=tmp;
        }
    } 
```

但是如果你想在中间的某个地方插入 Val，那么你的代码就可以了，但你不能将你的 current 设置为 tmp。因此，必须从您的代码中删除最后一行。

```
 public void insert(T val ){
        Node<T> tmp= new Node<T> (val);  
        if(empty()){
            current=head=tmp;
        }else{
            tmp.previous = current;
            tmp.next = current.next;
            if(current.next != null)
                current.next.previous = tmp;
            current.next = tmp
        }
    } 
```

如果它不起作用，那么您必须提供 DoubleLinkedList 的实现，否则将无法提供任何解决方案。

# c++ - 获取有关分区的信息

> ID：13608934
> 
> 赞同：0
> 
> 时间：2012-11-28T15:45:52.670
> 
> 标签：c++, windows

我从 msdn 获得了一个 c++ 代码示例，我在其中尝试获取有关我的分区的信息，但在此代码中，我的 DeviceIoControl 方法返回 0，结束错误代码 3。如何解决此错误？

代码在这里：

```
#define WINVER 0x0500

#include <windows.h>
#include <winioctl.h>
#include <iostream>
#include <stdio.h>

void DisplayVolumeInfo(CHAR *volume)
{
    HANDLE hDevice = CreateFileA(
            volume,
            GENERIC_READ | GENERIC_WRITE,
            FILE_SHARE_WRITE | FILE_SHARE_READ,
            NULL,
            OPEN_EXISTING,
            FILE_ATTRIBUTE_SYSTEM,
            NULL);

if (hDevice != INVALID_HANDLE_VALUE)
{
    PARTITION_INFORMATION partInfo;
    DWORD retcount = 0;

    BOOL res = DeviceIoControl(
                hDevice,
                IOCTL_DISK_GET_PARTITION_INFO,
                (LPVOID)NULL,
                (DWORD)0,
                (LPVOID)&partInfo,
                sizeof(partInfo),
                &retcount,
                (LPOVERLAPPED)NULL);

    if (res)
        std::cout << "Volume size = " << partInfo.PartitionLength.QuadPart << " bytes (" << (unsigned long long)(partInfo.PartitionLength.QuadPart / 1024 / 1024) << "Mb)" << std::endl;
    else
        std::cout << "Can't do IOCTL_DISK_GET_PARTITION_INFO (error code=" << GetLastError() << ")" << std::endl;

    DISK_GEOMETRY diskGeometry;
    retcount = 0;
    res = DeviceIoControl(
                hDevice,
                IOCTL_DISK_GET_DRIVE_GEOMETRY,
                NULL, 0,
                &diskGeometry, sizeof(diskGeometry),
                &retcount,
                (LPOVERLAPPED)NULL);

    if (res)
    {
        std::cout << "Cylinders = " << diskGeometry.Cylinders.QuadPart << std::endl;
        std::cout << "Tracks/cylinder = " << diskGeometry.TracksPerCylinder << std::endl;
        std::cout << "Sectors/track = " << diskGeometry.SectorsPerTrack << std::endl;
        std::cout << "Bytes/sector = " << diskGeometry.BytesPerSector << std::endl;
    }
    else
        std::cout << "Can't do IOCTL_DISK_GET_DRIVE_GEOMETRY (error code=" << GetLastError() << ")" << std::endl;

    CloseHandle(hDevice);
}
else
    std::cout << "Error opening volume " << volume << " (error code=" << GetLastError() << ")" << std::endl;
}

int main()
{
    DWORD  CharCount            = 0;
    char   DeviceName[MAX_PATH] = "";
    DWORD  Error                = ERROR_SUCCESS;
    HANDLE FindHandle           = INVALID_HANDLE_VALUE;
    BOOL   Found                = FALSE;
    size_t Index                = 0;
    BOOL   Success              = FALSE;
    char   VolumeName[MAX_PATH] = "";
    //
    //  Enumerate all volumes in the system.
    FindHandle = FindFirstVolumeA(VolumeName, MAX_PATH);

if (FindHandle == INVALID_HANDLE_VALUE)
{
    Error = GetLastError();
    printf("FindFirstVolume failed with error code %d\n", Error);
    return 0;
}

for (;;)
{
    //
    //  Skip the \\?\ prefix and remove the trailing backslash.

    Index = strlen(VolumeName) - 1;

    if (VolumeName[0]     != '\\' ||
        VolumeName[1]     != '\\' ||
        VolumeName[2]     != '?'  ||
        VolumeName[3]     != '\\' ||
        VolumeName[Index] != '\\')
    {
        Error = ERROR_BAD_PATHNAME;
        printf("FindFirstVolume/FindNextVolume returned a bad path: %s\n", VolumeName);
        break;
    }

    //
    //  QueryDosDeviceW does not allow a trailing backslash,
    //  so temporarily remove it.
    VolumeName[Index] = '\0';

    CharCount = QueryDosDeviceA(&VolumeName[4], DeviceName, MAX_PATH);

    VolumeName[Index] = '\\';

    if ( CharCount == 0 )
    {
        Error = GetLastError();
        printf("QueryDosDevice failed with error code %d\n", Error);
        break;
    }

    printf("\nFound a device:\n %s", DeviceName);
    printf("\nVolume name: %s", VolumeName);
    printf("\n");

    DisplayVolumeInfo(VolumeName);

    //
    //  Move on to the next volume.
    Success = FindNextVolumeA(FindHandle, VolumeName, MAX_PATH);

    if ( !Success )
    {
        Error = GetLastError();

        if (Error != ERROR_NO_MORE_FILES)
        {
            printf("FindNextVolumeW failed with error code %d\n", Error);
            break;
        }

        //
        //  Finished iterating
        //  through all the volumes.
        Error = ERROR_SUCCESS;
        break;
    }
}

FindVolumeClose(FindHandle);
FindHandle = INVALID_HANDLE_VALUE;

return 0;
} 
```

有人遇到过这个问题吗？

PS我在Windows 7 x32上工作

# shortcut - 安卓手机安装应用快捷方式

> ID：13608935
> 
> 赞同：1
> 
> 时间：2012-11-28T15:45:52.907
> 
> 标签：shortcut

已安装应用程序的快捷方式存储在哪里？什么文件夹/目录？长按在主屏幕上显示的快捷方式？主屏幕上按下以打开应用程序的快捷方式？

谢谢....

# spreadsheetgear - 电子表格列宽更改事件？

> ID：13608937
> 
> 赞同：2
> 
> 时间：2012-11-28T15:46:04.873
> 
> 标签：spreadsheetgear

电子表格中是否有任何事件用于更改工作表列宽？当用户单击列分隔符并拖动它以更改其在工作表中的宽度时，我想执行一些操作。

当用户通过列标题更改列宽或从行标题更改行高时，我想要做的是显示一个小工具提示，指示列/行的宽度/高度。Microsoft Excel 有这种行为，当我们更改列/行的宽度/高度时，我们可以看到列标题附近出现一个工具提示。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T22:22:07.783

WorkbookView 类有一个名为 RangeChanged 的​​事件，该事件在用户更改列宽时触发。

如果要在更改后捕获新的 ColumnWidth，则 RangeChangedEventArgs 参数具有该值。

```
public void workbookView1_RangeChanged(object sender, RangeChangedEventArgs e)
{
    ToolTip ttip = new ToolTip();
    ttip.Show(e.Range.ColumnWidth.ToString(), (SpreadsheetGear.Windows.Forms.WorkbookView)sender);
} 
```

请务必将以下代码添加到您的设计器中。

```
 this.workbookView1.RangeChanged += new SpreadsheetGear.Windows.Forms.RangeChangedEventHandler(this.workbookView1_RangeChanged); 
```

# javascript - 字符串拆分不起作用

> ID：13608939
> 
> 赞同：6
> 
> 时间：2012-11-28T15:46:05.973
> 
> 标签：javascript, max-msp-jitter

我在 Max/MSP 中的 Javascript 中拆分字符串时遇到问题。

outlet 是 printf 等的 Max/MSP 版本。

字符串奇怪地分裂，但它似乎只输出逗号分隔的两个单词。

```
function sample_callback(args)  // Callback
{
    var keyword=args;
    var trackname=keyword.toString().split(" ");
    var name = trackname[0]; // trackname[1] outputs nothing.
    outlet(0, name);
} 
```

任何帮助都会受到极大的欢迎。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-28T16:14:44.167

非常感谢 Aaron Kurtzhals 。希望评论中的赞成票对您的代表有帮助！

一个简单的被忽略的字符串检查帮助了我。哎呀。工作代码现在..

```
function sample_callback(args)  // Callback
{
  var keyword=args.toString();
  var trackname=keyword.split(",");
  var name = trackname[0];
  outlet(0, name);
} 
```

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-14T19:56:02.223

```
function sample_callback(args)  // Callback
{
    var keyword=args.toString()`enter code here`;
    var trackname=keyword.toString().split(" ");
    var name = trackname[0]; // trackname[1] outputs nothing.
    outlet(0, name);
} 
```

# file - 如何在windows phone 7的isolatedStorageDevice中导入一组现有的txt文件

> ID：13608947
> 
> 赞同：0
> 
> 时间：2012-11-28T15:46:27.777
> 
> 标签：file, windows-phone-7, save, isolatedstorage

我在 .txt 中有 17 个文件，我想将所有这些文件导入到 isolatedStorageDevice。

我怎样才能做到这一点？？？

记住：我不想写一个文件，我想把一个现有的文件放在那里。

文件位于 Project 的文件夹中，例如：(/Files/user.txt)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:10:11.567

手动

使用任何现有的 Windows Phone 独立存储资源管理器工具

以编程方式

您必须编写文件副本。假设有一个 CordovaSourceDictionary.xml 作为您的项目的一部分，它指定必须将哪些文件移动到 IsolatedStorage

```
<CordovaSourceDictionary>
    <FilePath Value="www\img\logo.png"/>
    <FilePath Value="www\js\index.js"/>
    <FilePath Value="www\cordova-2.1.0.js"/>
    <FilePath Value="www\css\index.css"/>
    <FilePath Value="www\index.html"/>
</CordovaSourceDictionary> 
```

然后你可以使用下面的代码复制你的文件

```
StreamResourceInfo streamInfo = Application.GetResourceStream(new Uri("CordovaSourceDictionary.xml", UriKind.Relative));

if (streamInfo != null)
{
    StreamReader sr = new StreamReader(streamInfo.Stream);
    //This will Read Keys Collection for the xml file

    XDocument document = XDocument.Parse(sr.ReadToEnd());

    var files = from results in document.Descendants("FilePath")
                select new
                {
                    path = (string)results.Attribute("Value")
                };
    StreamResourceInfo fileResourceStreamInfo;

    using (IsolatedStorageFile appStorage = IsolatedStorageFile.GetUserStoreForApplication())
    {

        foreach (var file in files)
        {
            fileResourceStreamInfo = Application.GetResourceStream(new Uri(file.path, UriKind.Relative));

            if (fileResourceStreamInfo != null)
            {
                using (BinaryReader br = new BinaryReader(fileResourceStreamInfo.Stream))
                {
                    byte[] data = br.ReadBytes((int)fileResourceStreamInfo.Stream.Length);

                    string strBaseDir = AppRoot + file.path.Substring(0, file.path.LastIndexOf(System.IO.Path.DirectorySeparatorChar));

                    if (!appStorage.DirectoryExists(strBaseDir))
                    {
                        Debug.WriteLine("INFO: Creating Directory :: " + strBaseDir);
                        appStorage.CreateDirectory(strBaseDir);
                    }

                    // This will truncate/overwrite an existing file, or
                    using (IsolatedStorageFileStream outFile = appStorage.OpenFile(AppRoot + file.path, FileMode.Create))
                    {
                        Debug.WriteLine("INFO: Writing data for " + AppRoot + file.path + " and length = " + data.Length);
                        using (var writer = new BinaryWriter(outFile))
                        {
                            writer.Write(data);
                        }
                    }
                }
            }
            else
            {
                Debug.WriteLine("ERROR: Failed to write file :: " + file.path + " did you forget to add it to the project?");
            }
        }
    }
} 
```

# primes - J（默契）埃拉托色尼筛

> ID：13608950
> 
> 赞同：3
> 
> 时间：2012-11-28T15:46:37.193
> 
> 标签：primes, j, sieve-of-eratosthenes

我正在寻找一个 J 代码来执行以下操作。

假设我有一个随机整数列表（已排序）， 2 3 4 5 7 21 45 49 61 我想从第一个元素开始并删除列表中元素的任何倍数，然后移动到下一个元素取消它的倍数， 等等等等。

因此，我正在查看的输出是 2 3 5 7 61。基本上是 Eratosthenes 的筛子。如果有人也可以解释代码将不胜感激，因为我正在学习 J 并且发现很难获得大多数代码:(

问候， babsdoc

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T00:38:37.193

这不完全是您所要求的，但这里有一个更惯用（而且**速度**更快）的 Sieve 版本。

基本上，您需要检查哪个数字是哪个数字的倍数。你可以从模数表中得到这个：`|/~`

```
l =: 2 3 4 5 7 21 45 49 61
|/~ l
  0 1 0 1 1  1  1  1  1
  2 0 1 2 1  0  0  1  1
  2 3 0 1 3  1  1  1  1
  2 3 4 0 2  1  0  4  1
  2 3 4 5 0  0  3  0  5
  2 3 4 5 7  0  3  7 19
  2 3 4 5 7 21  0  4 16
  2 3 4 5 7 21 45  0 12
  2 3 4 5 7 21 45 49  0 
```

每对倍数都会`0`在桌子上给出一个。现在，我们对`0`对应于自模的 s（2 mod 2、3 mod 3 等；`0`对角线上的 s）不感兴趣，所以我们必须删除它们。一种方法是`1`在它们的位置添加 s，如下所示：

```
=/~ l
  1 0 0 0 0 0 0 0 0
  0 1 0 0 0 0 0 0 0
  0 0 1 0 0 0 0 0 0
  0 0 0 1 0 0 0 0 0
  0 0 0 0 1 0 0 0 0
  0 0 0 0 0 1 0 0 0
  0 0 0 0 0 0 1 0 0
  0 0 0 0 0 0 0 1 0
  0 0 0 0 0 0 0 0 1
(=/~l) + (|/~l)
  1 1 0 1 1  1  1  1  1
  2 1 1 2 1  0  0  1  1
  2 3 1 1 3  1  1  1  1
  2 3 4 1 2  1  0  4  1
  2 3 4 5 1  0  3  0  5
  2 3 4 5 7  1  3  7 19
  2 3 4 5 7 21  1  4 16
  2 3 4 5 7 21 45  1 12
  2 3 4 5 7 21 45 49  1 
```

这也可以写成`(=/~ + |/~) l`。

从这个表中，我们得到了最终的数字列表：列中包含`0`, 的每个数字都被排除在外。

我们只需乘以列即可构建此排除列表。如果一列包含 a `0`，则其乘积为`0`正数：

```
*/ (=/~ + |/~) l
   256 2187 0 6250 14406 0 0 0 18240 
```

在执行最后一步之前，我们必须对此进行一些改进。没有理由执行长乘法，因为我们只对`0`s 和`not-0`s 感兴趣。因此，在构建表格时，我们将只保留`0`s 和`1`s 通过获取每个数字的“符号”（这是[`signum`:`*`](http://www.jsoftware.com/help/dictionary/d110.htm)）：

```
* (=/~ + |/~) l
  1 1 0 1 1 1 1 1 1
  1 1 1 1 1 0 0 1 1
  1 1 1 1 1 1 1 1 1
  1 1 1 1 1 1 0 1 1
  1 1 1 1 1 0 1 0 1
  1 1 1 1 1 1 1 1 1
  1 1 1 1 1 1 1 1 1
  1 1 1 1 1 1 1 1 1
  1 1 1 1 1 1 1 1 1 
```

所以，

```
*/ * (=/~ + |/~) l
  1 1 0 1 1 0 0 0 1 
```

从排除列表中，您只需`copy`：`#`将数字添加到最终列表中：

```
l #~ */ * (=/~ + |/~) l
   2 3 5 7 61 
```

或者，

```
(]#~[:*/[:*=/~+|/~) l
   2 3 5 7 61 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T20:31:45.617

默示迭代通常使用连词[Power](http://www.jsoftware.com/help/dictionary/d202n.htm)完成。当完成测试需要不是达到一个固定点时，[Do While](http://www.jsoftware.com/jwiki/Essays/Do%20While)构造运行良好。

在这个解决方案`filterMultiplesOfHead`中，重复应用，直到没有更多的数字没有被应用或过滤。已应用的数字将累积在部分答案中。当要处理的列表为空时，部分答案是结果，在剥离用于将已处理数据与未处理数据分离的装箱之后。

```
 filterMultiplesOfHead=: {. (((~: >.)@ %~) # ]) }.
   appendHead=: (>@[ , {.@>@])/
   pass=: appendHead ; filterMultiplesOfHead@>@{:
   prep=: a: , <
   unfinished=: [: -. a: -: {:
   sieve=: [: ; [: pass^:unfinished^:_ prep

   sieve 2 3 4 5 7 21 45 49 61 
2 3 5 7 61

   prep 2 3 4 7 9 10
┌┬────────────┐
││2 3 4 7 9 10│
└┴────────────┘
   appendHead prep 2 3 4 7 9 10
2
   filterMultiplesOfHead 2 3 4 7 9 10
3 7 9
   pass^:2 prep 2 3 4 7 9 10
┌───┬─┐
│2 3│7│
└───┴─┘
   sieve 1-.~/:~~.>:?.$~100
2 3 7 11 29 31 41 53 67 73 83 95 97 
```

# postgresql - 如何从登录角色中撤销所有组角色

> ID：13608951
> 
> 赞同：0
> 
> 时间：2012-11-28T15:46:37.600
> 
> 标签：postgresql

如何从登录角色中撤销所有组角色？有没有办法自动做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T16:12:04.817

由于您可以同时[`GRANT`/`REVOKE`](http://www.postgresql.org/docs/current/interactive/sql-revoke.html)多个角色，使用动态 SQL 的单个`DO`命令会更简单/更快（在 RDBMS 中，基于集合的操作通常比循环更快）：

```
DO
$$
BEGIN
EXECUTE (
    SELECT 'REVOKE ' || string_agg(quote_ident(rolname), ', ')
            || ' FROM ' || u.usename
    FROM   pg_user         u
    JOIN   pg_auth_members m ON (m.member = u.usesysid) 
    JOIN   pg_roles        r ON (r.oid = m.roleid) 
    WHERE  u.usename = 'my_user'
    GROUP  BY u.usename
    );
END
$$ 
```

该[`DO`](http://www.postgresql.org/docs/current/interactive/sql-do.html)命令以及[`string_agg()`聚合函数](http://www.postgresql.org/docs/9.0/interactive/functions-aggregate.html)需要 PostgreSQL 9.0 或更高版本。

`quote_ident()`确保非标准标识符不会造成麻烦（包括 SQL 注入）。

有效地执行如下命令：

```
REVOKE role_a, role_b, "FROM postgres; DELETE * FROM usr; --" FROM my_user; 
```

如果没有找到 GRANT，则不做任何事情。
[请注意双引号中的棘手名称，但正确引用`quote_ident()`.](http://bobby-tables.com/)

顺便说一句：这会撤销*所有*GRANT 的“组角色”。这对 PostgreSQL 来说只是角色，有些有`LOGIN`特权，有些没有（“组角色”）。`user`和之间的区别`group`是历史。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T15:58:57.707

认为需要查询所有角色

```
select usename, rolname 
from pg_user 
join pg_auth_members on (pg_user.usesysid=pg_auth_members.member) 
join pg_roles on (pg_roles.oid=pg_auth_members.roleid) 
```

并循环遍历结果以 REVOKE rolname FROM usename;

# ruby-on-rails - 耙子有问题

> ID：13608953
> 
> 赞同：0
> 
> 时间：2012-11-28T15:46:40.543
> 
> 标签：ruby-on-rails, ruby, rake

我正在尝试运行我刚刚创建的数据库迁移。Rake 以前工作得很好，我想我搞砸了依赖项或版本。这是我跑步时得到的。

```
rake:db:migrate --trace

rake aborted!
no such file to load -- rake/rdoctask
/var/lib/gems/1.8/gems/railties-3.0.7/lib/rails/tasks/documentation.rake:1:in `require'
/var/lib/gems/1.8/gems/railties-3.0.7/lib/rails/tasks/documentation.rake:1
/var/lib/gems/1.8/gems/railties-3.0.7/lib/rails/tasks.rb:15:in `load'
/var/lib/gems/1.8/gems/railties-3.0.7/lib/rails/tasks.rb:15
/var/lib/gems/1.8/gems/railties-3.0.7/lib/rails/tasks.rb:6:in `each'
/var/lib/gems/1.8/gems/railties-3.0.7/lib/rails/tasks.rb:6
/var/lib/gems/1.8/gems/railties-3.0.7/lib/rails/application.rb:214:in `require'
/var/lib/gems/1.8/gems/railties-3.0.7/lib/rails/application.rb:214:in `initialize_tasks'
/var/lib/gems/1.8/gems/railties-3.0.7/lib/rails/application.rb:139:in `load_tasks'
/var/lib/gems/1.8/gems/railties-3.0.7/lib/rails/application.rb:77:in `send'
/var/lib/gems/1.8/gems/railties-3.0.7/lib/rails/application.rb:77:in `method_missing'
/home/maaz/Desktop/rails_apps/todo/Rakefile:7
/var/lib/gems/1.8/gems/rake-10.0.2/lib/rake/rake_module.rb:25:in `load'
/var/lib/gems/1.8/gems/rake-10.0.2/lib/rake/rake_module.rb:25:in `load_rakefile'
/var/lib/gems/1.8/gems/rake-10.0.2/lib/rake/application.rb:581:in `raw_load_rakefile'
/var/lib/gems/1.8/gems/rake-10.0.2/lib/rake/application.rb:87:in `load_rakefile'
/var/lib/gems/1.8/gems/rake-10.0.2/lib/rake/application.rb:158:in `standard_exception_handling'
/var/lib/gems/1.8/gems/rake-10.0.2/lib/rake/application.rb:86:in `load_rakefile'
/var/lib/gems/1.8/gems/rake-10.0.2/lib/rake/application.rb:70:in `run'
/var/lib/gems/1.8/gems/rake-10.0.2/lib/rake/application.rb:158:in `standard_exception_handling'
/var/lib/gems/1.8/gems/rake-10.0.2/lib/rake/application.rb:68:in `run'
/var/lib/gems/1.8/gems/rake-10.0.2/bin/rake:37
/usr/local/bin/rake:19:in `load'
/usr/local/bin/rake:19 
```

# facebook - 分享 facebook 应用程序的特定 URL

> ID：13608954
> 
> 赞同：1
> 
> 时间：2012-11-28T15:46:41.340
> 
> 标签：facebook, share, facebook-sharer

我正在开发一个由问题和答案组成的应用程序，我正在努力实现一些目标：

我在问题中添加了分享按钮，在分享并从 facebook 个人资料中单击后，我需要将该用户重定向到该特定问题，

例如现在我的应用程序的标签 URL 看起来像 [https://www.facebook.com/mypage/app_3774862XXXXXX](https://www.facebook.com/mypage/app_3774862XXXXXX)

在问题的实际网址下方看起来像

[https://myapp.com/index.php?controller=questions&id=20](https://myapp.com/index.php?controller=questions&id=20)

* ***如何修改我的 Tab url 以传递共享功能，以便将用户重定向到 facebook 下应用程序的特定 URL。

谢谢 ！

# css - 强制 Internet Explorer 9 进入 Quirks 模式

> ID：13608956
> 
> 赞同：2
> 
> 时间：2012-11-28T15:46:44.527
> 
> 标签：css, html, browser

我有一个网页设计课，我们的老师希望我们强制浏览器进入怪癖模式。

他们是否有任何 CSS 功能或 html 5 功能可以完成这项工作？它是一个讨论问题，但我需要制作一个简单的网页。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T15:49:09.140

不要提供 doctype，它会自行进入 quirks 模式。

```
<html>
    <head>
        <title>I'm in Quirks Mode</title>
    </head>
    <body>
        <p>Quirks mode supports the JavaScript functionality of 
        IE6, and the Quirks mode of IE7 and IE8.</p>
    </body>
</html> 
```

如果您需要引用的内容：

> 如果您的网页使用需要 IE9 模式的一项或多项功能并且您不包含符合标准的 !DOCTYPE 指令，则 Internet Explorer 9 默认情况下以 IE5 (Quirks) 模式显示您的网页，该模式不支持需要 IE9 的功能模式。[来源](http://msdn.microsoft.com/en-us/library/ie/gg699338(v=vs.85).aspx)

此外，您还可以通过开发者工具强制它进入 Quirks 模式；只需按 F12 并更改文档模式。请注意，此方法通常仅用于快速测试，并且仅影响您的本地副本。

![在此处输入图像描述](../Images/87929bb6415cf06db344b9a21ad9c90e.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T15:49:53.317

> 在您的标签上方添加任何 HTML 注释块将使 IE9 进入 Quirks 模式！

像这样

```
<!-- -->
<!DOCTYPE html>
<html> 
```

来源[http://timjames.me/force-ie9-into-quirks-mode](http://timjames.me/force-ie9-into-quirks-mode)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T15:49:35.360

试试没有`doctype`，但这不是一个好主意

或尝试

```
<!-- -->
<!DOCTYPE html> 
```

# c# - 将控件的大小重置为其默认值

> ID：13608961
> 
> 赞同：3
> 
> 时间：2012-11-28T15:46:49.373
> 
> 标签：c#, .net, winforms, size, controls

如何在 Windows 窗体中将控件的大小重置为其默认值？

我尝试将大小设置为（-1，-1），但这不起作用，尽管高度被设置为默认值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T16:00:21.973

您可以使用反射来获取`DefaultSize`控件的属性。

```
Size GetDefaultSize(Control ctrl)
{
    PropertyInfo pi = ctrl.GetType().GetProperty("DefaultSize", BindingFlags.NonPublic | BindingFlags.Instance);
    return (Size)pi.GetValue(ctrl, null);
}

myCtrl.Size = GetDefaultSize(myCtrl); 
```

[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.defaultsize.aspx)：

> DefaultSize 属性表示控件最初创建时的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:35:08.313

我修改了以下代码，现在可以工作了。

```
public struct myControl
{
    public string name;
    public Size size;
}

List<myControl> lstControlSize = new List<myControl>();
myControl defControl = new myControl();

public Form1()
{
    InitializeComponent();
    SaveAllControls();
}

public void SaveAllControls()
{
    foreach (Control defaultControl in this.Controls)
    {
        if (defaultControl != null)
        {
            defControl.name = defaultControl.Name;
            defControl.size = defaultControl.Size;
            this.lstControlSize.Add(defControl);
        }
    }
}

public void ResetSizeAllControls()
{
    foreach (myControl defaultControl in this.lstControlSize)
    {
        foreach (Control resizeControl in this.Controls)
        {
            if (resizeControl != null)
            {
                if (resizeControl.Name == defaultControl.name)
                {
                    resizeControl.Size = defaultControl.size;
                    break;
                }
            }
        }
    }
} 
```

# jquery - 如何删除 $.get 以获取 mustache.js 模板

> ID：13608970
> 
> 赞同：3
> 
> 时间：2012-11-28T15:47:03.023
> 
> 标签：jquery, templates, mustache

使用 mustache.js，

我希望依靠浏览器标准页面加载器来加载我的 mustaches.js 模板。

换句话说，我想删除 JQuery 请求 ($.get) 以将模板放入内存，但将模板留在单独的 html 文件中。现在这项工作：

* * *

**文件contact.html：**

```
<script id="tpl-test" type="text/html">
   <h1> {{firstname}} </h1>
</script> 
```

**文件 my.js**

```
$.get("tpl/contact.html", function(templates){
   var template = $(templates).filter('#tpl-test').html();
   var jdata={firstname: 'fname'};
   $('body').append(Mustache.render(template, jdata));
}); 
```

* * *

我希望有类似的东西：

* * *

**文件contact.html（保持原样）**

而不是 jquery $.get 请求，我更喜欢：

**在 index.html 中：**

```
<script id="tpl-test" src="tmpl/contact.html" type="text/html"></script> 
```

***更新：***在 Chrome 中，模板是这样加载的： ![在此处输入图像描述](../Images/cf18e9e36f6dc7fa0586766abb09b0a4.png)

* * *

**文件 my.js（我的愿望，但这不起作用）**

```
function ondemand(){
   var template = $(templates).filter('#tpl-test').html();
   var jdata={firstname: 'fname'};
   $('body').append(Mustache.render(template, jdata));
}); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T16:10:47.983

正如我在评论中所说，您将无法像您想要的那样引用模板文件（使用`script`和`src`属性）。

如果我能猜到您可能不喜欢`$.get`的原因，那就是它让您在实际请求文件时等待使用模板。

我想建议对您的代码进行一些小改动，以实现您想要的效果：

```
// Somewhere that runs immediately
// contactTemplate will contain a jqXHR object
var contactTemplate = $.get( "tmpl/contact.html ");

// Somewhere later in your code
function ondemand(){
   contactTemplate.done( function ( template ) {
       var jdata={firstname: 'fname'};
       $('body').append(Mustache.render(template, jdata));
   });
}); 
```

这允许您的模板很可能在`ondemand`调用时被加载，但如果不是，`done`回调将等待它返回。这消除了对竞争条件的担忧，并且仍然可以快速加载模板。

加载后，后续调用`ondemand`将立即调用`done`回调。

这使用了`$.get`支持 jQuery Deferreds 的较新的 jqXHR 返回值。

**更新**

只是为了评论我如何在我的项目中处理这个问题。我使用[RequireJS](http://requirejs.org)和`text`插件来处理模板。我还使用`r.js`优化器，所以我的所有模板和 JS 代码都可以捆绑到生产站点上的单个资源中。这让我可以指定使用它的依赖项（JavaScript），但不必怀疑我的模板是否在我去使用它们时被加载。

为了让您了解这在 require 中的外观，假设我有一个`contact.js`我的`ondemand`电话：

```
define( [
  "jquery",
  "mustache",
  "text!tmpl/contact.tmpl"
], function ( $, Mustache, contactTemplate ) {
  function ondemand(){
    var jdata={firstname: 'fname'};
    $('body').append(Mustache.render(contactTemplate, jdata));
  });

  return {
     show: ondemand
  };
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T00:26:38.240

[此解决方案](https://stackoverflow.com/questions/8366733/external-template-in-underscore)可以避免所有这些 $.get

该解决方案满足以下需求：

1.  有一个外部文件（不是 .html 而是 .js）来包含所有模板。
2.  拥有相应 .js 文件的`<script>`句柄`$.get`。
3.  与 coffeescript 一起使用以删除行尾转义时简化。
4.  加载 .js 字符串可能更快，然后必须加载和处理每个文件以最终以 .js 字符串结束。

# mocking - 模拟存储库/功能

> ID：13608976
> 
> 赞同：0
> 
> 时间：2012-11-28T15:47:32.230
> 
> 标签：mocking, repository, expression, moq

我有这个代码

```
public ViewResult Index(String u="", String p="")
{
var q = this.repository.First(x => x.UserName == "x" && x.Password == "y"); 
```

我用最小起订量模拟这个：

```
repository.Setup(method => method.First(
        x => x.UserName == "x" && x.Password == "y"
         )
    ).Returns(foo); 
```

这很好用。

现在我更改控制器代码：

```
public ViewResult Index(String u="", String p="")
{
var q = this.repository.First(x => x.UserName == u && x.Password == p); 
```

但是现在，我在 q 中得到了 null，所以我的嘲笑不起作用。怎么了？

谢谢博克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T06:30:52.930

这是正在测试的代码：

```
public ViewResult Index(String u="", String p="")
{
var q = userRepository.First(x => x.UserName == u && x.Password == p);

if (q==null )
{
  //view login denied
}
else
{
    //view ok
} 
```

单元测试代码的第一个变体/没有编译错误，但在测试时总是返回 null：

```
var userRepository = new Mock<IUserRepository>();
var user = new User {UserName = "x", Password = "y"};

String u="x";
String p = "y";

userRepository.Setup(method => method.First(
    x => x.UserName == u && x.Password == p
    )
).Returns(user); 
```

单元测试代码的第二个变体/编译错误：

```
var userRepository = new Mock<IUserRepository>();
var user = new User {UserName = "x", Password = "y"};

// I have broken the code on 2 lines, so that the problem can be seen.
Expression<Func<User, bool>> exp =  It.IsAny<Func<User, bool>>();  //here compile error

userRepository.Setup( r => r.First( exp ) ).Returns(user);  //no compile error 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:38:13.543

首先，我希望那些不是纯文本密码。

你得到的原因`q = null`是

```
x => x.UserName == "x" && x.Password == "y" 
```

不一样

```
x => x.UserName == u && x.Password == p 
```

如果您对验证逻辑不感兴趣，您可以匹配任何这样的输入（假设接收的委托类型`First`是`Func<User, bool>`）：

```
repository
   .Setup(r => r.First(It.IsAny<Func<User, bool>>()))
   .Returns(foo); 
```

否则，您可以使用回调测试谓词是否匹配测试用户：

```
var testUser = new User { userName = "", password = "" };

repository
   .Setup(r => r.First(It.IsAny<Func<User, bool>>()))
   .Callback<Func<User, bool>>(predicate => Assert.IsTrue(predicate(testUser)))
   .Returns(foo); 
```

您还可以将谓词存储在回调中，然后稍后在测试方法中执行断言。如果您想更彻底地测试谓词，这可能会更好。

# android - 如何创建一个事件来处理 TextView 上的键盘移除

> ID：13608977
> 
> 赞同：0
> 
> 时间：2012-11-28T15:47:31.667
> 
> 标签：android, event-handling, textview

我的应用程序在键盘妨碍的对话框中有一系列 TextView。我正在尝试使用以下代码来使用事件使键盘消失。它不会编译，因为它说'void 是变量构建器的无效类型'！

```
@Override
protected Dialog onCreateDialog(int id) {
    LayoutInflater layoutInflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    final View layout = layoutInflater.inflate(R.layout.exindex_dialog, (ViewGroup) findViewById(R.id.ex_index));

    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setView(layout);

    builder.setOnItemSelectedListener((OnItemSelectedListener) arg0);
    {
         public void builder.filterStr2.isSelected();  //error is here
         {
             InputMethodManager mgr = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
             mgr.hideSoftInputFromWindow(filterStr2.getWindowToken(), 0);
         }      
    }
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T18:32:33.933

好吧，编译器不明白你要做什么，但我也不...

是什么`arg0`？

也许您正在尝试`OnItemSelectedListener`为您`builder`的 .

因此，我不明白“isSelected”行......

也许，你想做的更像是：

```
builder.setOnItemSelectedListener(new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
            if (arg3 == filterStr2.id) { // You should maybe change this
                                            // conditional
                InputMethodManager mgr = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
                mgr.hideSoftInputFromWindow(filterStr2.getWindowToken(), 0);
            }
        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {
            // Do nothing
        }

    }); 
```

# c# - 数据绑定 NaN

> ID：13608978
> 
> 赞同：1
> 
> 时间：2012-11-28T15:47:35.257
> 
> 标签：c#, wpf, binding, pixelsense

我正在使用来自[WPF 答案的代码：如何将线条绑定到 UI 元素？](https://stackoverflow.com/questions/5009157/wpf-how-to-bind-lines-to-ui-elements) 而且我得到“BindingExpression 产生的值对目标属性无效。；值='NaN'”。我的代码和链接中的唯一区别是我不设置`Point point = null;`只是`Point point;`因为它会产生转换问题。MidpointConcerter.cs 与链接中的完全相同。我的绑定方法：

```
 private void BindLineToScatterViewItems(Line line, ScatterViewItem StartItem, ScatterViewItem EndItem)
        {
            var x = new MidpointConverter(false);
            var y = new MidpointConverter(true);

            BindingOperations.SetBinding(line, Line.X1Property,
               new Binding { Source = StartItem, Converter = x, ConverterParameter = MidpointSide.Bottom });
           BindingOperations.SetBinding(line, Line.Y1Property,
                new Binding { Source = StartItem, Converter = y, ConverterParameter = MidpointSide.Bottom });
//old in the middle
BindingOperations.SetBinding(line, Line.X2Property,
                                        new Binding { Source = EndItem, Path = new PropertyPath("ActualCenter.X") });
            BindingOperations.SetBinding(line, Line.Y2Property,
                                         new Binding { Source = EndItem, Path = new PropertyPath("ActualCenter.Y") });
        } 
```

有人可以帮我说什么是错的，我该如何解决？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-28T15:56:47.617

这是因为您的变量未初始化。`Point point = null`正在他们的代码中初始化。

```
Point point; 
```

仅定义变量。您可能拥有的唯一其他选择就是像这样初始化它

```
Point point = new Point(); 
```

因为您不能绑定到未初始化的变量。

![截屏](../Images/e20ccc416ce8c76f250b0ff53b6b8824.png)

![在此处输入图像描述](../Images/432fafc8ddab2c9cbfab44980a5827ac.png)

# c++ - 使用索引运算符插入带有指向 std::map 的指针的元素

> ID：13608984
> 
> 赞同：0
> 
> 时间：2012-11-28T15:47:50.267
> 
> 标签：c++, data-structures, std

假设我有一个 std::map 类型，例如定义如下。

```
std::map<int, int>* someMap; 
```

如果我不使用指针，我可以简单地使用索引运算符添加一个元素。但是在这种情况下，由于我有一个指针，以下是使用索引运算符插入的正确方法。

```
(*someMap)[someIndex] = someValue; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T15:52:22.053

是的。为类`operator []`重载`Map`。它必须直接与对象一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T15:50:56.047

确保你*指向* `someMap`某物。否则，它只包含一个从堆栈上的垃圾派生的无意义地址。这是从堆中分配的示例：

```
 std::map<int, int>* someMap = new std::map<int, int>(); 
```

完成后，是的，您的使用方法是正确的：

```
 (*someMap)[someIndex] = someValue; 
```

并确保自己清理

```
 delete someMap; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T15:50:32.163

是的，您的代码很好：

```
(*someMap)[someIndex] = someValue; 
```

# java - Java 1.5 是否总是可以使用包装类而不是原语？

> ID：13608985
> 
> 赞同：0
> 
> 时间：2012-11-28T15:47:48.623
> 
> 标签：java, wrapper

前段时间我们用 int 字段构建了我们的 DTO 类，在使用它们进行了数周的开发后，我被要求将这些字段的类型从 int 更改为 Integer。我认为不可能简单地更改声明中的类型，但是经过几次修改后没有任何编译错误。就这么简单吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T15:50:42.113

是的，这是因为自动装箱。请参阅[http://docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html](http://docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html)。

但是，请注意如果 Integer 对象为空，则将 Integer 对象隐式更改为 int 可能会导致空指针异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T15:52:36.140

Java 5 提供了自动装箱/拆箱，这就是为什么您没有看到任何编译问题的原因。

int（原始数据类型）到Integer的转换称为Autoboxing，反之称为Unboxing。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T15:55:32.127

我宁愿不这样做。在某些情况下，盒子类型不如原始类型（例如，因为它们是对象，您可以将它们放在集合中），但是用它们的盒子类型替换所有原始类型很少有回报。正如其他人已经提到的，您必须检查空值。*另请注意，监督新*对象的创建也很容易。

# regex - 使用 gsub 从开始到第一次出现字符

> ID：13608988
> 
> 赞同：9
> 
> 时间：2012-11-28T15:47:52.463
> 
> 标签：regex, r

我有以下正则表达式，我想抓住从句子开头到第一个的所有内容`##`。我可以`strsplit`像我演示的那样使用它来完成这项任务，但我更喜欢一个`gsub`解决方案。如果`gusub`不是正确的工具（我认为是），我更喜欢基本解决方案，因为我想学习基本的正则表达式工具。

```
x <- "gfd gdr tsvfvetrv erv tevgergre ## vev fe ## vgrrgf"

strsplit(x, "##")[[c(1, 1)]]  #works

gsub("(.*)(##.*)", "\\1", x)  #I want to work 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-28T15:56:41.197

只需添加一个字符，`?`在第一个量词之后加上一个使其“非贪婪”：

```
gsub("(.*?)(##.*)", "\\1", x) 
# [1] "gfd gdr tsvfvetrv erv tevgergre " 
```

这是相关文档，来自`?regex`

> 默认情况下，重复是贪婪的，因此使用最大可能的重复次数。可以通过附加“？”将其更改为“最小”。到量词。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-28T15:53:07.950

我会说：

```
sub("##.*", "", x) 
```

删除所有内容，包括第一次出现`##`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-28T15:54:04.583

在这种情况下，我会反过来说，即用`#`空字符串替换后面的所有内容：

```
gsub("#.*$", "", x)
[1] "gfd gdr tsvfvetrv erv tevgergre " 
```

但是您也可以使用 non-greedy 修饰符`?`使您的正则表达式按照您建议的方式工作：

```
gsub("(.*?)#.*$", "\\1", x)
[1] "gfd gdr tsvfvetrv erv tevgergre " 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-28T16:48:01.853

这是另一种使用更多字符串工具而不是更复杂的正则表达式的方法。它首先找到第一个 ## 的位置，然后提取到该点的子字符串：

```
library(stringr)
x <- "gfd gdr tsvfvetrv erv tevgergre ## vev fe ## vgrrgf"
loc <- str_locate(x, "##")
str_sub(x, 1, loc[, "start"] - 1) 
```

一般来说，我认为这种循序渐进的方法比复杂的正则表达式更易于维护。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-28T15:50:55.423

试试这个作为你的正则表达式

```
^[^#]+ 
```

从字符串的开头开始并匹配任何不 a`#`到第一个的`#`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-28T16:02:42.550

这里已经有几个更简单的答案，但是由于您在问题中指出您想了解基础 R 中的正则表达式支持，所以这是另一种方式，使用积极的前瞻性断言`(?=#)`和非贪婪选项`(?U)`。

```
regmatches(x, regexpr('(?U)^.+(?=#)', x, perl=TRUE))
[1] "gfd gdr tsvfvetrv erv tevgergre " 
```

# mysql - 如何在mysql中将两个varchar值与前导零进行比较

> ID：13608991
> 
> 赞同：3
> 
> 时间：2012-11-28T15:48:05.803
> 
> 标签：mysql, sql, varchar

我必须比较 mysql 中具有 varchar 数据类型的 2 列。但是有些数据的前导为“0”，这在比较时会产生问题。

例如：**我必须比较实际上相等的“02653”和“2653”，但在这里我的查询失败并给出不同的结果。**

请提出任何想法，什么应该是正确的查询。

我试图像这样运行 **SELECT DISTINCT `table1`。`store_id` FROM `table2` WHERE CONVERT('first_column' AS INTEGER) = CONVERT('second_column' AS INTEGER)**

显示此错误
** 在 AS INTEGER 附近使用正确的语法 **

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:51:42.303

将 varchar 转换为整数，然后进行比较

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T15:51:15.813

```
...
WHERE CONVERT(column1 AS INTEGER) = CONVERT(column2 AS INTEGER) 
```

# java - 使用 DefaultHandler 实现 LexicalHandler 的 Sax 解析器

> ID：13608992
> 
> 赞同：0
> 
> 时间：2012-11-28T15:48:11.590
> 
> 标签：java, xml-parsing, sax

我有一个带有这个签名的处理程序：

```
class XMLReaderHandler extends DefaultHandler implements LexicalHandler 
```

我将它与 sax 解析器（ javax.xml.parsers.SAXParser ）一起使用

是否有可能在像`<id></id>`解析器这样的空标签的情况下没有调用该方法

```
characters(char[] ch, int start, int length)
        throws SAXException 
```

这就是我在存在空标签的情况下进行调试的结果。我仍然需要做字符的事情，因为在这种情况下我想添加一个空字符串。

PS：不建议使用 XPath，因为我已经在使用它，我正在使用 Sax 实现它，以防我需要处理大数据。

谢谢

编辑：

所以一些新的信息。我在我的架构中使用`xs:anyType`with `processContents="skip"`。显然 SaxParser 会跳过这样的事情，所以我发现我可以使用类似的东西：

```
saxParserFactory.setFeature(
"http://java.sun.com/xml/schema/features/report-ignored-element-content-whitespace", 
true); 
```

但它给了我`org.xml.sax.SAXNotRecognizedException: Feature 'http://java.sun.com/xml/schema/features/report-ignored-element-content-whitespace' is not recognized.`

# gxt - GXT3 网格单元渲染

> ID：13608998
> 
> 赞同：5
> 
> 时间：2012-11-28T15:48:25.867
> 
> 标签：gxt

如何使用 GXT 3 网格将网格列渲染为多线网格列。

例如

```
ColumnConfig<ExceptionEntry, String> name = new ColumnConfig<ExceptionEntry, String>(props.name(), 50, "Name");
name.setColumnStyle(new SafeStyles(){
        @Override
        public String asString() {
            return // what styles to use for multiline rendering;
        }
    });

name.setCell(new AbstractCell<String>() {
    @Override
        public void render(com.google.gwt.cell.client.Cell.Context context,
                String value, SafeHtmlBuilder sb) {
             ??? what needs to be done to render the column as multiline column
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-03T15:27:55.237

您可以通过简单和困难的方式做到这一点。

最简单的：

```
name.setCell(new AbstractCell<String>() {
    @Override
    public void render(com.google.gwt.cell.client.Cell.Context context, String value, SafeHtmlBuilder sb) {
         sb.appendHtmlConstant("<div style=\"white-space: normal;\" >" + value + "</div>");
    }
}); 
```

艰难（但更好）的方式：

1）`GridAppearance`从您的主题中创建要使用的自定义而不是默认的：

```
import com.google.gwt.core.client.GWT;
import com.sencha.gxt.theme.base.client.grid.GridBaseAppearance;

public class YourGridAppearance extends GridBaseAppearance {

  public interface YourGridStyle extends GridStyle {
  }

  public interface YourGridResources extends GridResources {

    @Source({ "com/sencha/gxt/theme/base/client/grid/Grid.css", "YourGrid.css" })
    @Override
    YourGridStyle css();
  }

  public YourGridAppearance() {
    this(GWT.<YourGridResources> create(YourGridResources.class));
  }

  public YourGridAppearance(YourGridResources resources) {
    super(resources);
  }
} 
```

2）复制`/theme-you-use/client/grid/Grid.css`到`YourGrid.css`您创建`YourGridAppearance`类的同一文件夹中。这是一个基于**灰色**主题的示例：

```
@CHARSET "UTF-8";
.rowHighlight {
    border: 1px dotted #535353;
}

.rowAlt .cell {
    background-color: #FAFAFA;
}

.rowOver .cell {
    background-color: #EEEEEE;
}

.cell {
    border-color: #FAFAFA #EDEDED #EDEDED;
    border-right: 0 solid #EDEDED;
    font: 14px tahoma,arial,verdana,sans-serif; 
}

.cellSelected {
    background-color: #C9C9C9 !important;
    color: #000000;
}

.cellInner {
    white-space: normal;
    line-height: 15px;
}

.columnLines .cell {
    border-right-color: #EDEDED;
}

.rowOver .cell,.rowOver .rowWrap {
    border-color: #DDDDDD;
}

.rowWrap {
    border-color: #FAFAFA #EDEDED #EDEDED;
    border-right: 0 solid #EDEDED;
    border-style: solid;
    border-width: 1px;
    overflow: hidden;
}

.rowSelected .cell,.rowSelected .rowWrap {
    background-color: #DFE8F6 !important;
    border-color: #A3BAE9;
}

.footer {
    background: #F7F7F7 none repeat scroll 0 0;
    border-top: 1px solid #DDDDDD;
    border-bottom: 1px solid #DDDDDD;
    display: block;
    overflow: hidden;
    position: relative;
} 
```

其中最重要的部分是这个：

```
.cellInner {
    white-space: normal;
} 
```

3) 用您的自定义网格外观替换默认网格外观。为此，您必须将以下行添加到**your-project.gwt.xml**：

```
<replace-with class="package.name.of.your.custom.theme.class.YourGridAppearance">
  <when-type-is class="com.sencha.gxt.widget.core.client.grid.GridView.GridAppearance" />
</replace-with> 
```

# c - C 语法说明

> ID：13608999
> 
> 赞同：3
> 
> 时间：2012-11-28T15:48:28.277
> 
> 标签：c

我正在学习 C 语言我需要一些关于代码段的解释，

```
int *p;
p = (int *) malloc(sizeof(int)); 
```

(int *) 是什么意思，当你执行上面的代码时到底发生了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-28T15:50:06.637

`(int *)`是所谓的*强制转换*运算符。它用于将运算符右侧的值转换为括号中的类型。

在这里，它用于将`void *`返回的指针转换`malloc()`为 an `int *`，即指向整数的指针。

这是一个非常糟糕的用法，[你不应该这样做](https://stackoverflow.com/a/605858/28169)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T15:51:39.227

`malloc`有返回类型`void*`，它读作pointer-to-void，意思是指向某物的指针。

`p`有 type `int*`，所以是指向 int 的指针。为了分配`malloc`into的结果`p`，您需要以某种方式转换`int*`为`void*`。

如果你写：

```
int* p = malloc(...) 
```

转换自动发生（“隐式转换”）。

如果你出于某种原因决定写：

```
int* p = (int*) malloc(...) 
```

结果是相同的，但转换是显式的（即“强制转换”）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T15:50:31.133

试试这个链接[man malloc](http://www.manpagez.com/man/3/malloc/)

在C中，不需要类型转换，`malloc`所以直接写

`p = malloc(sizeof(int));`

仅供参考，这`(int *)`不过是类型转换。由于许多函数返回`void*` ，因此它需要在各自的类型中进行类型转换，以便进一步使用指针进行操作。

在 malloc 的情况下，它会被隐式处理

`(type)`在 C 中称为类型转换运算符。

假设例如，

```
int a;
float b = 11.4; 
```

您想输入`b`in的整数值`a`。使用类型转换

`a = (int)b`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T15:53:07.060

[这是](http://www.cplusplus.com/reference/cstdlib/malloc/)关于 malloc 的文档。

您正在分配一个 int 大小的内存块（此值可能会根据系统/编译器组合而变化）。

(int *) 将右侧转换为 int *，这在 C 中不是必需的，您只需要 malloc。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-28T15:58:14.703

```
int *p;  // pointer to an integer
p = (int *) malloc(sizeof(int)); // assignment of enough memory for an integer 
```

这`(int *)`部分称为类型转换，您是在告诉编译器：

“我知道 malloc() 给了我一个 void *，但我要把它分配给别的东西”。

类型转换有一些有用的理由，但它也可能很危险。在这种情况下，因为`malloc()`返回 a`void *`您不需要进行类型转换，因为它会自动安全地转换为其他指针类型。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-28T16:40:22.230

Unwind 已经给了你答案，但我想稍微扩展一下。

在 C 中，有些类型是不*兼容*的；您不能直接将 type 的值分配给 type`T`的变量`Q`；例如，您不能将指针分配给`int`类型指针指向的变量`double`：

```
double *q;
int *p;
...  
q = p; // will cause a diagnostic to be issued 
```

但是，如果您确实需要进行该分配，则可以使用强制转换*表达式*，它将值转换为目标类型：

```
q = (double *) p; 
```

这告诉编译器将 的值转换为指向的`p`指针`double`并将结果分配给`q`.

在 C 的原始 K&R 版本中，`malloc`返回了`char *`，因此如果要将结果分配给`malloc`不同类型的指针，则必须应用强制转换：

```
int *p = (int *) malloc(SIZE); 
```

这在 1989 年发生了变化，当时引入了第一个 C 标准。该版本引入了一种`void *`类型来充当“通用”指针类型。type 的值`void *`可以直接分配给其他指针类型，而不需要强制转换。因此，从 C89 及更高版本开始，您可以简单地编写

```
int *p = malloc(SIZE); 
```

这不仅更清洁，而且更安全；如果您忘记包含`stdlib.h`或没有`malloc`在范围内的声明，编译器将假定`malloc`返回一个`int`值并相应地生成代码。由于`int`无法将值直接分配给指针类型，因此您将获得诊断。但是，如果您添加了演员表，则该警告将被禁止，并且您可能会在运行时遇到问题。

1999 年的标准摆脱了隐含的`int`假设，因此这不再是一个真正的危险，但放弃`malloc`呼叫仍然是更好的风格。