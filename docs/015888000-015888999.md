# StackOverflow 问答 15888000-15888999

# quartz.net - 如何检查现有的 Quartz.net 调度程序？

> ID：15888003
> 
> 赞同：2
> 
> 时间：2013-04-08T20:08:47.883
> 
> 标签：quartz.net, quartz.net-2.0

最近将我的嵌入式 Quartz.net 调度程序升级到 2.x，此时我不得不[放弃给我的零线程调度程序提供唯一名称](https://stackoverflow.com/q/14965860/229930)，现在我遇到一个问题，即（很少）尝试创建 ZT 调度程序实例的对象抛出一个异常，因为另一个对象已经实例化了 ZT 调度程序的实例，并且由于我所有的 ZT 调度程序现在都有默认的“QuartzScheduler”名称，这会引发异常......

`MySchedFactory.AllSchedulers.Count`我尝试在调用后检查调度程序计数，`MySchedFactory = new StdSchedulerFactory(properties)`但是 StdSchedulerFactory 在实例化后立即创建 ZT 调度程序的实例，而不是在`GetScheduler()`调用方法时创建，所以这是一个死胡同......

在实例化之前我找不到任何其他检查现有调度程序的方法，`StdSchedulerFactory`并且正如我已经提到的，一旦它被实例化，它就会创建一个 ZT 调度程序的实例，所以我最终在我的 catch 块中使用了一个 while 循环只是一个可怕的解决方案，所以我希望有人知道检查现有 ZT 调度程序的更好方法......

```
 try
        {                
            //setting properties
            MySchedFactory = new StdSchedulerFactory(properties);
            BaseScheduler = schedFactory.GetScheduler();
        }
        catch (Exception ex)
        {
            var exMsg = ex.InnerException == null ?
                    ex.Message :
                    ex.Message + Environment.NewLine + ex.InnerException.Message;
            while (exMsg.Contains("Scheduler with name 'QuartzScheduler' already exists"))
            {
                try
                {
                    MySchedFactory = new StdSchedulerFactory(properties);
                    BaseScheduler = schedFactory.GetScheduler();
                }
                catch (Exception vex)
                {
                    exMsg = vex.InnerException == null ?
                        vex.Message :
                        vex.Message + Environment.NewLine + vex.InnerException.Message;
                }                    
            }
        } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T11:44:43.573

将调度程序工厂的引用保留为单例而不是创建一个新的如何？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T11:47:23.357

Quartz.net 调度程序必须是单例的。[你可以在这里](http://geekswithblogs.net/TarunArora/archive/2013/01/19/quartz.net-windows-service-on-server-important-configuration-steps-to-remember.aspx)读到一些东西。

# visual-studio - 为 TFS 2012 中的现有团队项目创建一个填充有默认设置的 Sharepoint 站点

> ID：15888004
> 
> 赞同：0
> 
> 时间：2013-04-08T20:08:49.320
> 
> 标签：visual-studio, tfs

在 TFS 2012 中创建团队项目*后*，Microsoft 是否解决了创建 SP 站点的困难？我知道[这里列出的方法](http://www.ewaldhofman.nl/post/2009/12/11/Configure-TFS-portal-afterwards-Beta-2.aspx)，但我希望他们在新版本中提出了一些更巧妙的方法。如果没有，是否有人知道比上一个链接中建议的方法或工具更好的方法或工具？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:38:58.150

TFS Power Tools 有一个命令`tfpt addprojectportal`，可以在创建团队项目后为您创建 SharePoint 网站。您将需要知道用于创建团队项目的流程模板。您将能够使用`/?`开关找到该命令所需的所有选项。

# c# - 在.Net中存储然后显示日期时间的正确方法是什么？

> ID：15888009
> 
> 赞同：3
> 
> 时间：2013-04-08T20:09:01.077
> 
> 标签：c#, .net, asp.net-mvc, datetime

我想我可能已经在山洞里生活了一段时间，因为它的复杂性`DateTime`直到今天才沉没。我读过一些文章，建议始终将其存储`DateTime`在`UTC`数据库中，然后在视图中将它们显示为本地时间。

但是，然后我点击了那些说它不是那么简单的文章，您需要考虑“即时”并且由于使用或使用不安全而将用户输入`DateTime`转换为困难，或者您可以让发布和使用来显示当地时间但是如果我有一个模型属性的视图怎么办？即使依靠显然也不能被认为是安全的。`UTC``TimeZone Id``ToUniversalTime()``JavaScript``UTC DateTime``JS``Razor``DateTime``ToLocalTime()`

我从 Jon Skeet 那里听说过 Noda Time，我希望它能解决所有这些问题，尽管我知道他评论说它并不完美。

那么，即使是非常简单的 Web 应用程序，人们到底在使用`.Net`什么呢？

是否有一个正确的示例可以提供或链接到哪些帖子，然后呈现与时区相关的值？

看来无知是福。

**更新：**例如，用户有一个来自 jQuery 的 DateTimePicker，他们选择了一个事件的日期时间。该应用程序的用户是全球性的，因此如果他们选择美国东部时间上午 10 点，英国用户的视图中应该显示为下午 6 点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:05:31.400

让我们看看我们拥有的所有技术： SQL Server（我认为您使用 SQL Server，因为 MS Stack） - [DATETIME](http://msdn.microsoft.com/en-us/library/ms187819.aspx)类型不存储时区偏移范围，因此除了保留它们之外，这并没有给我们提供其他选择在UTC。

.NET 为您提供了使用 DateTime 类型的时区进行操作的选项。因此，您可以从数据库加载值并以某种方式将其更改为用户时区。这是个好问题，如何确定用户时区是什么？好的，所以如果用户注册了大小 - 您可以使用“您的时区”之类的设置并将其存储给所有用户（站点的一个分支执行此操作，例如 Sharepoint），因此每次渲染视图时 - 您都使用此设置和使用正确的时区渲染视图。这样做的问题可能是，如果您需要使用缓存 - 您将需要根据用户时区进行缓存（不是最好的，呵呵）...

但是，如果您有一些匿名用户并且您没有关于他的信息怎么办？

让我们看一下JavaScript。JavaScript 允许您使用时区进行操作。您可以在服务器上将所有与日期相关的字符串呈现为`<date>2013-04-08T12:00:00Z</date>`，这表明该日期为 UTC，之后`onload`您可以启动 JS 代码，该代码将`date`在视图中找到所有标签并将它们转换为浏览器时区。（我有一篇关于这个问题的文章[Developing web application with time zone support](http://outcoldman.com/en/blog/show/198)，它有很多语法错误，很抱歉）。

所以，对我来说 - 正确的方法是将所有内容保持在 UTC 中，直到您不会向用户显示它。只有 View 应该使用用户时区中的日期进行操作（在您的情况下，这应该只是 JavaScript 层），每次您需要将带有日期的数据发送到服务器时 - 您需要将此日期转换为 UTC。每次从服务器获取日期 - 首先将它们转换为浏览器时区，然后将其显示给用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T21:22:41.923

我可以告诉你我是怎么做的。.NET 有一个名为[Kind](http://msdn.microsoft.com/en-us/library/system.datetime.kind.aspx)的属性。我所做的是我的数据库中有一个名为 UserTimeZome 的字符串字段，并且在用户设置的某处，用户可以设置他或她的时区。[您可以使用此代码](http://msdn.microsoft.com/en-us/library/bb397781.aspx)枚举下拉列表。

一旦用户选择了他或她的时区，我将[DisplayName](http://msdn.microsoft.com/en-us/library/system.timezoneinfo.displayname.aspx)存储在数据库的 UserTimeZone 字段中。现在我可以将 UTC 时间转换为当地时区，反之亦然。我可以使用[ConvertTimeToUtc](http://msdn.microsoft.com/en-us/library/bb495915.aspx)方法或[ConvertTimeFromUtc](http://msdn.microsoft.com/en-us/library/system.timezoneinfo.converttimefromutc.aspx)方法。请务必通过创建新的 DateTime 并在 DateTime 构造函数上设置 Kind 来更新 Kind 属性。

除此之外，我可以将任何日期/时间转换为本地时间或 UTC 时间。现在，如果您需要从 javascript 而不是从 C# 执行此操作，我使用[MomentJs](http://momentjs.com/)。[MomentJs 可以使用UTC 函数](http://momentjs.com/docs/#/parsing/utc/)在 UTC 和本地时间之间进行转换。

我希望这可以帮助你

# python - Django - mysql IntegrityError 1062

> ID：15888017
> 
> 赞同：0
> 
> 时间：2013-04-08T20:09:28.000
> 
> 标签：python, mysql, django-models

我有一个 cron 作业，每天晚上 3 点从 MySQL 下载数据。我可以测试这个连接并下载它，它可以工作。有时下载会部分失败。（部分下载）如果我尝试重新运行 py 脚本，它会狂吠。键 2 的重复输入错误。

我希望能够运行一个脚本并只删除前一天晚上的条目，这样我就可以重新运行填充数据库的脚本。还有其他三个表与此相关联。如果创建一个删除昨天记录的 SQL 脚本，django 会做什么？它会自动删除对其他表的必要添加，还是我也应该在脚本中这样做？

```
Traceback (most recent call last):
  File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/usr/local/lib/python2.6/site-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/usr/local/lib/python2.6/site-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/usr/local/lib/python2.6/site-packages/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/usr/local/lib/python2.6/site-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/usr/local/django/grease/greaseboard/management/commands/import_patients.py", line 27, in handle
    mrn = row.MRN,
  File "/usr/local/lib/python2.6/site-packages/django/db/models/manager.py", line 134, in get_or_create
    return self.get_query_set().get_or_create(**kwargs)
  File "/usr/local/lib/python2.6/site-packages/django/db/models/query.py", line 449, in get_or_create
    obj.save(force_insert=True, using=self.db)
  File "/usr/local/lib/python2.6/site-packages/django/db/models/base.py", line 463, in save
    self.save_base(using=using, force_insert=force_insert, force_update=force_update)
  File "/usr/local/lib/python2.6/site-packages/django/db/models/base.py", line 551, in save_base
    result = manager._insert([self], fields=fields, return_id=update_pk, using=using, raw=raw)
  File "/usr/local/lib/python2.6/site-packages/django/db/models/manager.py", line 203, in _insert
    return insert_query(self.model, objs, fields, **kwargs)
  File "/usr/local/lib/python2.6/site-packages/django/db/models/query.py", line 1576, in insert_query
    return query.get_compiler(using=using).execute_sql(return_id)
  File "/usr/local/lib/python2.6/site-packages/django/db/models/sql/compiler.py", line 910, in execute_sql
    cursor.execute(sql, params)
  File "/usr/local/lib/python2.6/site-packages/django/db/backends/util.py", line 40, in execute
    return self.cursor.execute(sql, params)
  File "/usr/local/lib/python2.6/site-packages/django/db/backends/mysql/base.py", line 114, in execute
    return self.cursor.execute(query, args)
  File "/usr/local/lib/python2.6/site-packages/MySQLdb/cursors.py", line 174, in execute
    self.errorhandler(self, exc, value)
  File "/usr/local/lib/python2.6/site-packages/MySQLdb/connections.py", line 36, in defaulterrorhandler
    raise errorclass, errorvalue
django.db.utils.IntegrityError: (1062, "Duplicate entry '000xxxxxxxx' for key 2") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:37:36.617

不知道工作量有多大，但是对于类似的问题，我在保存点旁边使用了事务 - [https://docs.djangoproject.com/en/dev/topics/db/transactions/#savepoints](https://docs.djangoproject.com/en/dev/topics/db/transactions/#savepoints)

所以给出类似的东西：

```
transaction.auto_commit(False)
try:
    for raw_input in streaming_filelikeobject.readline():
        product = do_work(raw_input)
        MyTable(**product).save()
except SomeFileIOError:
    transaction.rollback()
else:
    transaction.commit() 
```

另一个想法是有一个 batch_id 列并在每个批次的开始分配它。

对于非常大的数据集，您可以使用 Memcache/Redis 之类的东西来管理库存。

```
transaction.auto_commit(False)
try:

   for raw_input in streaming_filelikeobject.readline():
       product = do_work(raw_input)
       if redis_conn.sadd("my_input_set", product['some_unique_id']):
           MyTable(**product).save()

except SomeFileIOError:
    transaction.rollback()
else:
    transaction.commit() 
```

.sadd() 是一个 Redis 命令，如果元素不存在于 redis 集中，则返回 true。

请注意，我是在脑海中输入这些内容，因此方法 django 事务方法签名可能不具有权威性。

# java - SQL 错误：Java 中的关闭连接

> ID：15888019
> 
> 赞同：5
> 
> 时间：2013-04-08T20:09:38.623
> 
> 标签：java, sql, jdbc, database-connection, sqlexception

即使我没有关闭 finally 块，连接也会自动关闭。

```
 public String look( long id, String codeName, Connection conn ) throws SQLException
    {
        try
        {
            StringBuffer sel = new StringBuffer().append(property);
            stmt = conn.prepareCall( sel.toString() );           /*   fileCode.java:194    */

            stmt.setString( 1, nameC );
            stmt.setLong( 2, valueI );
            stmt.registerOutParameter( 3, oracle.jdbc.OracleTypes.VARCHAR );
            stmt.execute();

            return stmt.getString( 3 );
        }
        catch ( SQLException e )
        {
            if ( e.getMessage().toUpperCase().contains( "NO DATA" ) )
            {
                return "Value not found";
            }
            throw e;
        }
        catch ( Exception e )
        {
            e.printStackTrace();

        }
        finally
        {
            System.out.println( " CONNNNNN closed ? : " + conn.isClosed() ); 
        }

    } 
```

方法调用look方法，

```
public class Verfication 
    {   

    public void verify ( , , , , , , ,conn )
    {
      try
      {
         if ( x ==1 )
         {
           ManageCode mCode = new ManageCode();
           System.out.println( "----- 1st Call -----" );
           String mCodeBlock = mCode.look( , , conn);
           String cCodeBlocked = checkBackup ( , , , , , , , , );
           /* connection is closed in this part */ 
           System.out.println( "----- 2nd Call -----" );
           String nCodeBlock = mCode.look ( , , conn );
         }

      }catch(    )
      {

      }

    }
} 
```

我确实得到了如下所述的输出，我不确定连接有什么问题？我还添加了系统输出。

输出：

```
 ----- 1st Call -----
     CONNNNNN closed ? : false

     ----- 2nd Call -----
     CONNNNNN closed ? : true

    SEVERE: Line:71 CodePointChecker ERROR: java.sql.SQLException: Closed Connection
    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:125)
    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:162)
    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:227)
    at oracle.jdbc.driver.PhysicalConnection.prepareCall(PhysicalConnection.java:839)
    at oracle.jdbc.driver.PhysicalConnection.prepareCall(PhysicalConnection.java:802)
    at com.XXXXXXXXXXXXXXX.code.fileCode.look(fileCode.java:194) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:25:59.467

JDBC 连接可以出于多种原因关闭 - 不仅仅是您故意。这就是为什么有这么多连接池实现的原因。

我已经看到连接关闭，因为连接运行的端口已关闭。我看到连接关闭*只是因为数据库感觉像它*（主要是使用 Oracle）。

当然 - 最明显的可能性是您在其他地方意外关闭连接 - 也许在另一个线程中。

道德 - 使用*适当的*连接池。它会为你省去很多悲伤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T20:14:55.693

它一定是您的 SQL 查询发生的事情，它触发了一个导致连接关闭的 SQLException。

# import - 过程导入。从 excel 文件中将字符值导入为“空白”

> ID：15888021
> 
> 赞同：0
> 
> 时间：2013-04-08T20:09:41.657
> 
> 标签：import, sas

我正在尝试使用下面的代码导入多个 excel 文件。每个 excel 文件中都有一个包含数字和文本值的列，但 proc import 仅导入数字值，并将文本值作为空白 ('.')。

谁能帮我解决这个问题？非常感谢。

```
%let subdir=S:\Temp\;  

filename dir "&subdir.*.xls";

data new;

length filename  fname $ 32767;

infile dir  eof=last filename=fname;

input ;

last: filename=fname; 

run; 

proc sort data=new nodupkey;

by filename;

run;

data null;

set new end=last;

call symputx(cats('filename',_n_),filename);

call symputx(cats('dsn',_n_),scan(scan(filename,7,'\'),1,'.'));

if last then call symputx('nobs',_n_);

run;

%put &nobs;

%macro import;

%do i=1 %to &nobs;

proc import datafile="&&filename&i" out=&&dsn&i 

dbms=excel replace;

sheet = "Sheet1";

getnames=yes;

mixed=yes;

run;

%end;

%mend import;

%import 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T23:23:08.613

在导入的 Excel 工作簿中控制数据类型的最佳方法是使用`DBSASTYPE`带有 libname 的数据集选项。这在处理其他数据类型（如日期时间和时间值）时特别有用。

例如，假设受影响的列名为**MY_VAR**，并且应始终被读取为最大长度为 30 的字符。还假设您有一个名为**START_TIME**的电子表格列，其中包含 Excel 编码的日期和时间戳。您的宏可能会修改如下：

```
libname x "&&filename&i";
data &&dsn&i;
   set x.'Sheet1$'n(dbsastype=(MY_VAR=char30 START_TIME=datetime));
run;
libname x clear; 
```

只要您知道导致问题的 Excel 列的名称，这应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T21:27:33.470

Mixed=Yes 应该为您解决问题，但如果不是，那么有一些解决方案。

首先，您可能需要检查您的扫描值。您可以在这里看到一个可能的位置：http: [//support.sas.com/kb/35/563.html](http://support.sas.com/kb/35/563.html)

HKEY_LOCAL_MACHINE ► 软件 ► Microsoft ► Office ► 12.0 ► 访问连接引擎 ► 引擎

如果您有旧版本的 Office（2007 年之前），它被称为“JET 引擎”，并且位于稍微不同的地方（您可以谷歌搜索）。您的“12.0”可能会有所不同，具体取决于您安装的内容（12.0 是 Office 2007）。

其次，您可以强制列为特定类型。DBSASTYPE 选项是你需要去的地方；参见[http://www2.sas.com/proceedings/sugi31/020-31.pdf](http://www2.sas.com/proceedings/sugi31/020-31.pdf)例如（大约在文档中间，搜索 DBSASTYPE）。

# sql - TSQL 将行转换为列

> ID：15888029
> 
> 赞同：2
> 
> 时间：2013-04-08T20:10:13.280
> 
> 标签：sql, sql-server, tsql, pivot

我有一个查询，它返回一些看起来像这样的数据：

```
Description
----------
Thing1
Thing2
Thing3
Thing4
Thing5
Thing6
Thing7 
```

我想让数据看起来像这样：

```
Desc1    Desc2  Desc3
-----    -----  -----
Thing1   Thing2 Thing3
Thing4   Thing5 Thing6
Thing7 
```

有人可以提供一个如何做到这一点的例子吗？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T20:23:01.090

您说`Desc`列中数据的顺序无关紧要。

如果是这种情况，那么您可以使用以下 which 实现`NTILE`and `row_number()`：

```
;with cte as
(
  select description,
    'desc'+cast(ntile(3) over(order by Description) as varchar(10)) col
  from yt
)
select desc1, desc2, desc3
from
(
  select description, col,
    row_number() over(partition by col order by col) rn
  from cte
) d
pivot
(
  max(description)
  for col in (desc1, desc2, desc3)
) piv; 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/aec0e/13)。

该[`NTILE`](http://msdn.microsoft.com/en-us/library/ms175126%28v=sql.90%29.aspx)函数将行分配到单独的组中。完成后，`row_number()`在分组时应用 a 为每一行提供一个唯一编号。

这给出了一个结果：

```
|  DESC1 |  DESC2 |  DESC3 |
----------------------------
| Thing1 | Thing4 | Thing6 |
| Thing2 | Thing5 | Thing7 |
| Thing3 | (null) | (null) | 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T20:33:54.270

这样做的另一种方法，如果顺序确实重要，并跳过 PIVOT 功能：

```
WITH CTE AS 
(
    SELECT 
        (ROW_NUMBER() OVER (ORDER BY [Description])+2) /3 AS RowID,
        (ROW_NUMBER() OVER (ORDER BY [Description])+2) % 3 +1 AS ColID,  
        [Description] 
    FROM Table1
)
SELECT 
     MIN(CASE WHEN ColID = 1 THEN [Description] END) DESC1
    ,MIN(CASE WHEN ColID = 2 THEN [Description] END) DESC2
    ,MIN(CASE WHEN ColID = 3 THEN [Description] END) DESC3
FROM CTE
GROUP BY RowID 
```

[SQLFiddle 演示](http://www.sqlfiddle.com/#!6/b676a/1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T21:17:06.693

我使用来自@NenadZivkovic 的 sqlfiddle 的基本数据来提供不同的解决方案

[http://www.sqlfiddle.com/#!6/b676a/15](http://www.sqlfiddle.com/#!6/b676a/15)

```
WITH Numbered AS 
(
  SELECT 
    ROW_NUMBER() OVER (ORDER BY Description) as rn,
    (ROW_NUMBER() OVER (ORDER BY Description) - 1) % 3 as colid,
    (ROW_NUMBER() OVER (ORDER BY Description) - 1) / 3 as line,
    Description 
  FROM Table1
)
SELECT desc1.description as DESC1, desc2.description as DESC2, desc3.description as DESC3
FROM   (SELECT line, description FROM Numbered WHERE colid=0) as desc1
LEFT JOIN 
       (SELECT line, description FROM Numbered WHERE colid=1) as desc2
ON (desc1.line = desc2.line)
LEFT JOIN 
       (SELECT line, description FROM Numbered WHERE colid=2) as desc3
ON (desc2.line = desc3.line) 
```

# java - 在独立模式下组装 hadoop 时出现 Maven 错误

> ID：15888030
> 
> 赞同：1
> 
> 时间：2013-04-08T20:10:15.797
> 
> 标签：java, hadoop

我是hadoop和maven的新手。我想从源代码编译 hadoop 2.0.3 并安装它。我正在遵循 [http://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-common/SingleCluster.html的说明](http://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-common/SingleCluster.html)

到目前为止，我已经设法下载了 hadoop 源代码，并从源目录发出了“mvn clean install -Pnative”接下来我尝试执行 mvn assembly:assembly，但出现以下错误：

无法在项目 hadoop-main 上执行目标 org.apache.maven.plugins:maven-assembly-plugin:2.3:assembly (default-cli)：读取程序集时出错：未找到程序集描述符。-> [帮助 1]

请帮助，以便我可以继续前进。

另外，上面提到的安装链接，没有提到“$HADOOP_COMMON_HOME/$HADOOP_HDFS_HOME”的值应该是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:06:05.093

我编译 1.0.4 只是作为一个学术练习。不确定它是否适用于 2.0.3

这应该在开始编译之前完成（在 Ubuntu 上），以确保所有需要的东西都在那里：

```
sudo apt-get -y install maven build-essential protobuf-compiler autoconf automake libtool cmake zlib1g-dev pkg-config libssl-dev 
```

我没有颠覆，所以我也这样做了：

```
sudo apt-get install subversion 
```

之后我检查了代码：

```
svn checkout http://svn.apache.org/repos/asf/hadoop/common/tags/release-1.0.4/ hadoop-common-1.0.4 
```

然后转到新创建的文件夹“hadoop-common-1.0.4”并给出命令：

```
ant clean package 
```

你可以参考我的博客了解整个故事： [http ://hadoopmagic.wordpress.com/](http://hadoopmagic.wordpress.com/)

# riak - 使用 Java Client 在 Riak 中存储对象时如何添加二级索引的示例？

> ID：15888031
> 
> 赞同：2
> 
> 时间：2013-04-08T20:10:16.873
> 
> 标签：riak

我将哈希映射存储在 riak 存储桶中，如下所示：

```
bucket.store(key, docHashMap).execute();

```

我想用二级索引存储对象。

我将如何做到这一点？我知道`IRiakObject`有一个`addIndex`方法，但是在存储之前如何访问`IRiakObject`它？

我认为我正在尝试做的是预期的用例，但我无法找到任何文档或示例。如果您能指出我将不胜感激的一个。

谢谢！

**更新：**

@Brian Roach 在 Riak 邮件列表及下方回答了这个问题。这是我编写的扩展 HashMap 的自定义类：

```
class DocMap extends HashMap<String, Object> {
    /**
     * Generated id
     */
    private static final long serialVersionUID = 5807773481499313384L;

    @RiakIndex(name="status") private String status;

    public String getStatus() {
        return status;
    }

    public void setStatus(String status) {
        this.status = status;
    }
} 
```

我仍然可以将该对象用作普通的哈希图并存储键和值，但它也会将“状态”写入二级索引（实际上最终被称为“状态_bin”，因为它是一个字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T22:50:19.113

如果您只是传递核心 Java HashMap 的一个实例......你不能。

`JSONConverter`元数据（例如索引）的默认工作方式是通过注释。

传入的对象需要有一个用 注释的字段 `@RiakIndex("index_name")`。该字段可以是`Long`/`Set<Long>`或 `String`/ `Set<String>`（分别代表`_int`和`_bin`索引）。

这些不会转换为 JSON，因此它们不会影响您的序列化数据。您可以为多个索引设置多个字段。

您不必将“_int”或“_bin”附加到注释中的索引名称 - 它会根据类型自动完成。

最简单的事情是扩展 HashMap 并简单地添加带注释的字段。

# php - 如何在html的textarea中对齐文本

> ID：15888032
> 
> 赞同：3
> 
> 时间：2013-04-08T20:10:16.877
> 
> 标签：php, textarea

我有一个`textarea`并且我还在编写一些 PHP 代码来预填充`textarea`刷新时。“预填充”部分工作正常。

我的问题是当我开始输入时`textarea`，文本没有左对齐。它从`textarea`盒子中的某个随机点开始。我希望它像普通文本框一样左对齐。

这是我的代码：

```
<TEXTAREA rows = 10 cols = 95 name = answer5>
<?php echo stripslashes(htmlentities($_POST['answer5'])); ?>
</TEXTAREA> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-02T11:53:42.440

修剪不是最好的选择。

它将修剪所有甚至需要的空间。我遇到了同样的问题，我所做的就是将所有代码放在一行中。

这取决于您在文本中的空格。我的代码以前有时是这样的

```
<div class="controls">
<textarea name="about" class="span12" id="terms" rows="5">
<?php include('includes/terms.php');?>
</textarea>
</div> 
```

现在我得到的输出是这样的：

```
 Terms and Conditions

Point one
Point two
Point 3

Last Paragraph

// Here was huge space right at the bottom of textbox 
```

所以所做的是，以这种方式修改了我的代码：

```
<div class="controls"><textarea name="about" class="span12" id="terms" rows="5"><?php include('includes/terms.php');?></textarea></div> 
```

现在一切都在单行中，以前存在的空格和新行条目现在都消失了。我的文字打印如下：

```
Terms and Conditions

Point one
Point two
Point 3

Last Paragraph

// Huge space is gone 
```

您还应该检查 textarea 元素中包含的文本中的空格，除了起点和终点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T20:25:30.297

尝试两件事：

*   全部放在 1 行
*   修剪回显值

所以像这样

```
<TEXTAREA rows = 10 cols = 95 name = answer5><?php echo trim(stripslashes(htmlentities($_POST['answer5']))); ?></TEXTAREA> 
```

这是因为 textarea 有一些特殊的规则违反（我称之为）正常的标记规则。从来没有真正理解过。但是textarea里面的数据总是按原样使用，包括前导和多个空格等。甚至textarea里面的html注释也会被输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T20:36:42.750

textarea 标记可能继承了使文本居中的样式。您可以向 textarea 添加样式以使其左对齐。IE

```
<TEXTAREA style='text-align:left;' rows = 10 cols = 95 name = answer5> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-09T05:05:15.513

```
textarea {
border: 1px solid #ddd;
background: #fff url(../img/input-shaddow.gif) no-repeat left top;
font: 11px Arial, Helvetica, sans-serif;
color: #000;
padding: 5px;
width: 262px;
float: left;
margin: 0 10px 0 0;
height: 50px;
overflow: hidden; 
```

}

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-11-05T22:48:56.283

**解决方案很容易将所有内容放在一行中：**`<textarea>votre addresse</textarea>`

[结果](https://i.stack.imgur.com/OZwqw.png)

# php - 计算一周的mysql值，然后从星期一重新开始计算？

> ID：15888033
> 
> 赞同：0
> 
> 时间：2013-04-08T20:10:18.563
> 
> 标签：php, mysql

我有一个计数查询，用于计算用户查看其他用户个人资料的次数。它目前只计算表中的所有行，但是我想知道 php 中是否有一种方法可以使用计算从周一到周日计算表 'ptb_profile_views' 中的所有行，然后在下面再次从 0 开始星期一并计算该周的所有值，并且不包括前一周的任何计数，我不确定这是可能的想法，因为它需要一些内存方面的时间，

我想知道的另一个选项是是否有一个 mysql 语句，我可以添加每个星期天上午 00:00 从 ptb_profile_views 中删除所有内容，然后我们在星期一重新开始。

有人可以帮我解决任何问题吗，谢谢

我的桌子看起来像：

```
id   |   profile_id   |   viewed_id

1           4                 8
2           5                 6 
```

mysql

```
function check_profile_views() {
            global $connection;
            global $_SESSION;
            $query = "SELECT COUNT(DISTINCT profile_id) totalCOUNT FROM ptb_profile_views WHERE viewed_profile_id=".$_SESSION['user_id']." AND profile_id!='-1'";
            $check_profile_views_set = mysql_query($query, $connection);
            confirm_query($check_profile_views_set);
            return $check_profile_views_set;        
        } 
```

php

```
 <?
    $check_profile_views_set = check_profile_views();
    while ($views = mysql_fetch_array($check_profile_views_set)) {

    echo"".$views['totalCOUNT'].""; } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:15:15.927

您可以按星期几、一年中的星期几过滤，例如

```
SELECT count(*), YEAR(datefield), WEEK_OF_YEAR(datefield)
FROM yourtable
GROUP BY YEAR(datefield), WEEK_OF_YEAR(datefield) 
```

删除逻辑将是相似的。删除这一年中比“本周”早一周的所有记录，然后也删除前几年的所有记录：

```
DELETE FROM yourtable
WHERE (YEAR(datefield) < YEAR(now()))
   OR (YEAR(datefield) = YEAR(now()) AND (WEEK_OF_YEAR(datefield) < WEEK_OF_YEAR(now())) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T20:15:27.190

既然您提到您不会为每次有人访问个人资料而保留日期时间的历史记录，而只是计数，唯一的解决方案是在每个星期一的 00:00 重置您的计数器。

您可以通过 cron 作业来做到这一点。您应该能够从您的主机管理面板创建一个。

或者，您可以在每个星期一手动运行 cron-page 以重置计数器。

如果您想让事情变得更复杂，您可以让 cron-page 创建/更新一个日志文件，您可以在其中保存总访问次数。

然而，最好的解决方案是重新考虑您的数据库设计并创建一个表格，以正确的日期时间很好地记录每次访问。

# http - 由于 Netty 服务器中的内容字符集设置，Firefox 中的像素无效

> ID：15888035
> 
> 赞同：2
> 
> 时间：2013-04-08T20:10:21.233
> 
> 标签：http, firefox, character-encoding, netty

我正在用 Netty 开发一个 http 服务器。在某些情况下，服务器必须回答一个 1x1 透明像素。所以我在 base64 中硬编码了一个 GIF 透明像素，并使用以下代码返回它：

```
String pixel_string= new String (Base64.decodeBase64("R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="));
HttpResponse response = new DefaultHttpResponse(HttpVersion.HTTP_1_1, HttpResponseStatus.OK);
response.setContent(ChannelBuffers.copiedBuffer(pixel_string, CharsetUtil.UTF_8)); 
```

编辑：我还设置了内容类型： response.setHeader(HttpHeaders.Names.CONTENT_TYPE, "image/gif"); 在 Chrome 中，一切都很好。但是，Firefox 告诉我它无法显示像素（这对我的应用程序来说非常糟糕），因为像素数据无效。经过多次调查，我终于找到了解决办法，将字符集更改为 Iso-8859-1。

```
response.setContent(ChannelBuffers.copiedBuffer(
            responseBuilder.pixel_string, CharsetUtil.ISO_8859_1)); 
```

我不明白它为什么会起作用，这让我觉得在某些情况下我可能会遇到麻烦。我尝试更改 Firefox 首选项（默认使用 UTF8），但变化不大。

**为什么 Firefox 接受 ISO-8859 编码，而不是 UTF-8 ？**我可以改变吗？有人会知道问题的根源以及如何确保无论用户的设置如何都能正常工作吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:22:12.200

接受或不接受编码的不是 Firefox。是你的服务器。

当您进行 base64 解码时，您会生成一个包含一些字符的字符串……但是您真正生成的是*字节*，然后您会以某种方式将其视为字符。由于 Java 字符串是一个包含 UTF-16 字符串的容器，因此实际上您所做的是获取每个字节，将其视为 16 位整数并构造由这些代码单元组成的 UTF-16“字符串” .

但是当你想把所有这些都放在网络上时，你必须将你的字符串转换为字节，并且参数 to`copiedBuffer`说明了如何做到这一点。如果转换为 UTF-8，任何来自设置了高位的字节的字符最终都会被编码为两字节的 UTF-8 序列。另一方面，如果转换为 ISO-8859-1，则转换只会丢弃每个 UTF-16 代码单元的高字节（在您的情况下始终为零）。

因此，转换为 ISO-8859-1 会产生您从 base64 解码中得到的实际字节数组，而转换为 UTF-8 会产生....其他一些可能或可能没有任何意义的东西，具体取决于确切的字节价值观。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T20:15:32.867

您调用的`copiedBuffer`构造函数不适合您使用的数据类型（二进制）。根据 Netty API 的 JavaDoc，您调用的是：

> 创建一个新的大端缓冲区，其内容是以指定字符集编码的指定字符串。

这意味着您的二进制数据正在“转换”为 UTF-8（这是没有意义的）。如果您尝试保存生成的文件并使用十六进制编辑器查看它，您可能会发现它已损坏。

试试这样的东西（未经测试的代码）：

```
static byte[] pixel_data = Base64.decodeBase64("R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==");
HttpResponse response = ...
response.setHeader(HttpHeaders.Names.CONTENT_TYPE, "image/gif");
response.setContent(ChannelBuffers.copiedBuffer(pixel_data)); 
```

# iphone - 搜索栏过滤器不起作用

> ID：15888040
> 
> 赞同：1
> 
> 时间：2013-04-08T20:10:40.613
> 
> 标签：iphone, ios, ipad, uisearchbar

我正在务实地创建一个搜索栏过滤器，但遗憾的是它不起作用。我相信我遗漏了一个小细节。表格视图工作正常，只是搜索栏过滤器没有。我没有为这个项目使用故事板或 xib 文件。

。H

```
 UISearchBar *searchBar;
  NSMutableArray * getterms;
  @property (strong, nonatomic) NSMutableArray* allTableData;
  @property (strong, nonatomic) NSMutableArray* filteredTableData;
  @property (nonatomic, retain) UITableView *tableView;
  @property (nonatomic, assign) bool isFiltered; 
```

.m

```
-(void)ViewDidLoad{    
searchBar.delegate = self;
searchBar = [[UISearchBar alloc] initWithFrame:CGRectMake(30, 10, 750, 31)];
searchBar.placeholder = @"Search";  //place holder
searchBar.backgroundColor = [UIColor whiteColor];
searchBar.autocorrectionType = UITextAutocorrectionTypeNo;
searchBar.backgroundColor = [UIColor clearColor];
searchBar.keyboardType = UIKeyboardTypeDefault;
self.navigationItem.titleView = searchBar;
searchBar.layer.cornerRadius = 5;
searchBar.layer.masksToBounds = YES;

   UITableView *tableView = [[UITableView alloc] initWithFrame:CGRectMake(10.0, 10.0, 1000.0, 200.0) style:UITableViewStylePlain];
self.tableView = tableView;
[self.view addSubview:tableView];
self.tableView.dataSource = self;

 }

   -(void)searchBar:(UISearchBar*)searchBar textDidChange:(NSString*)text
   {
if(text.length == 0)
{
    isFiltered = FALSE;
}
else
{
    isFiltered = true;
    filteredTableData = [[NSMutableArray alloc] init];

    for (Food* food in allTableData)
    {
        NSRange nameRange = [food.name rangeOfString:text options:NSCaseInsensitiveSearch];
        NSRange descriptionRange = [food.description rangeOfString:text options:NSCaseInsensitiveSearch];
        if(nameRange.location != NSNotFound || descriptionRange.location != NSNotFound)
        {
            [filteredTableData addObject:food];
        }
       }
     }

    [self.tableView reloadData];
     }

    - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *MYCellIdentifier = @"MyCellIdentifier";

UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:MYCellIdentifier];
 if (cell == nil)
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:MYCellIdentifier];

Food* food;
if(isFiltered)
    food = [filteredTableData objectAtIndex:indexPath.row];
else
    food = [allTableData objectAtIndex:indexPath.row];

cell.textLabel.text = food.name;
cell.detailTextLabel.text = food.description;

return cell;

}
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
return 1;
}

   - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
int rowCount;
if(self.isFiltered)
    rowCount = filteredTableData.count;
else
    rowCount = allTableData.count;

return rowCount;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:12:39.637

```
searchBar.delegate = self; 
```

是在 searchBar 分配之前。将其移至下方：

```
searchBar = [[UISearchBar alloc] initWithFrame:CGRectMake(30, 10, 750, 31)];
searchBar.delegate = self; 
```

# javascript - 表未使用 knockoutjs 刷新

> ID：15888042
> 
> 赞同：0
> 
> 时间：2013-04-08T20:10:59.173
> 
> 标签：javascript, html, knockout.js

我正在使用带有简单二维数组到表绑定的 knockoutJs。表格渲染正常，点击功能正常触发，甚至 rightindex 也在更新。但用户界面没有得到刷新。

这是我的代码：

**的HTML：**

```
<table>
    <tbody data-bind="foreach: representation ">
        <tr data-bind="foreach: $data, click: $parent.clickMe">
            <td data-bind="text: $data ">
            </td>
        </tr>
    </tbody>
</table> 
```

**JS：**

```
$(function () {

    var ViewModel = function () {
        var self = this;
        self.clickMe = function (data, event) {
            var target;
            if (event.target) target = event.target;
            else if (event.srcElement) target = event.srcElement;

            if (target.nodeType == 3) // defeat Safari bug
                target = target.parentNode;

            self.representation()[target.parentElement.rowIndex][target.cellIndex] = 1;
        };

        self.representation = ko.observableArray([
                    [0, 0, 0],
                    [0, 0, 0],
                    [0, 0, 0]
                ]);
    };
    ko.applyBindings(new ViewModel());
}); 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:22:50.300

如果您希望每个表示中的各个值更新 UI，那么您也需要使它们成为可观察的，我猜：

```
 self.representation = ko.observableArray([
     [ko.observable(0), ko.observable(0), ko.observable(0)],
     [ko.observable(0), ko.observable(0), ko.observable(0)],
     [ko.observable(0), ko.observable(0), ko.observable(0)]
 ]); 
```

然后使用以下方法更新它们：

```
self.representation()[target.parentElement.rowIndex][target.cellIndex](1); 
```

# java - Javascript 对象到 Java 列表

> ID：15888050
> 
> 赞同：-1
> 
> 时间：2013-04-08T20:11:39.587
> 
> 标签：java, javascript, json, jersey

我有以下类型的 JSON 我想发送到 Java（我正在使用 Jersey 和它附带的默认 JSON Parser）

```
{ "something" : "1", "someOtherThing" : "2" , ... } 
```

但是，我不想在 Java 中创建具有所有这些属性的对象，而是希望有一个 Single HashMap（或其他），它允许我仍然可以访问 Key 和 Value

这样的事情可能吗？

我真的没有任何代码可以进行转换，我像这样使用 Jersey

```
 @POST
    @Path("/purchase")
    @Produces(MediaType.APPLICATION_JSON)
    @Consumes(MediaType.APPLICATION_JSON)
    public StatusResult purchase(UserPurchaseRequest upr) {     
    } 
```

如果我将属性 something 和 someOtherThing 作为字符串放在我的 UserPurchaseRequest 对象中，一切都会好起来的，但我想把所有东西都放在一个结构中（因为我不知道我会得到多少值，我也需要它们的名字)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:18:57.563

是的，有可能。但是，这仍然取决于您使用的是什么 JSON java API。例如，使用 Jackson JSON，您可以像这样创建 HashMap json 字符串

```
 ObjectMapper obj = new ObjectMapper();
  String json = pbj.writeValue(<HashMap object>); 
```

或相反亦然

```
 HashMap obj = obj.readValue(json, HashMap.class); 
```

注意 - org.codehaus.jackson.map.ObjectMapper

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T20:52:08.100

你只需要像这样向你的对象添加一个属性

```
 private HashMap<String,String> purchaseValues; 
```

Jersey 负责其余的工作，由于某种原因，在您调试时，大多数条目在 HashMap 中显示为 null

# sql - Rails 3 Sum 两个字段的乘积

> ID：15888051
> 
> 赞同：6
> 
> 时间：2013-04-08T20:11:40.820
> 
> 标签：sql, ruby-on-rails, ruby, ruby-on-rails-3

我需要计算我的 Rails 3 应用程序中两个字段的乘积之和（即相当于 Excel 的 sumproduct 函数）。Rails 中是否有一种方法可以解决这个问题，如果没有，那么使用自定义 sql 的 rails 代码是什么？

例如，一家酒店有很多房间。房间具有 sqft（平方英尺）、数量（该大小）和 hotel_id 的属性。我想计算给定酒店所有房间的总平方英尺。在 SQL 中，对于 Hotel.id = 8，我相信以下语句会起作用：

```
select sum(rooms.sqft * rooms.quantity) as SumSqft from rooms inner join hotels on rooms.hotel_id = hotels.id where hotels.id = 8; 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-08T20:14:59.243

是的 ：

```
Room.where(hotel_id: 8).sum("sqft * quantity") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T20:18:43.457

```
def calculate
  @hotel=Hotel.find(params[:id]
  @rooms=Room.all.where(:hotel_id=>@hotel.id)
  sum=0
  @rooms.each do |room|
    sum=sum+room.sqft*room.quantity
  end
  return sum
end 
```

# facebook - 另一个 facebook 致命错误：未捕获的 CurlException

> ID：15888054
> 
> 赞同：1
> 
> 时间：2013-04-08T20:11:45.070
> 
> 标签：facebook, facebook-graph-api

我正在使用最新的 base_facebook.php [https://github.com/facebook/facebook-php-sdk/blob/master/src/base_facebook.php](https://github.com/facebook/facebook-php-sdk/blob/master/src/base_facebook.php)以通过 facebook 向我的 Web 应用程序验证用户。

直到今天一切正常。我突然在我的网络应用程序中收到这样的消息

> 致命错误：未捕获的 CurlException：7：无法连接到 2a03:2880:10:6f01:face:b00c:0:8：在 /var/www/pygmaxia2.gr/templates/pygmaxia2gr/base_facebook.php 中抛出网络无法访问第 977 行

昨天我工作正常，今天一整天都没有问题。当我删除一个不需要且与文件完全无关的文件夹时，问题似乎出现了。当我使用 Firefox 进行 ctrl F5 刷新时，消息消失了，一切似乎都正常了。但过了一会儿，只需在页面中单击一下，它就会再次出现。

我见过很多人有这个问题，但就我而言，还没有解决方案。问题会自行出现和消失，而没有可见的原因。我还需要提一下，我使用的是 ubuntu 12.04 系统，今天我进行了更新。你认为它会破坏 ipv6 相关文件吗？但是为什么它会定期消失然后再次出现？我的系统中也没有防火墙。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:16:22.260

我现在遇到了完全相同的问题，在我看来我无法完全连接到developers.facebook.com。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T21:00:22.190

似乎 Facebook 现在在多个国家/地区已关闭一个多小时……请稍等！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-04T12:29:09.260

# 设置代理以连接 Facebook.com

## 在 base_facebook.php 中查找代码 ##

```
public static $CURL_OPTS = array(
        CURLOPT_CONNECTTIMEOUT => 10,
        CURLOPT_RETURNTRANSFER => true,
        CURLOPT_TIMEOUT        => 60,
        CURLOPT_USERAGENT      => 'facebook-php-3.2',
      ); 
```

并添加选项

```
 public static $CURL_OPTS = array(
    CURLOPT_CONNECTTIMEOUT => 10,
    CURLOPT_RETURNTRANSFER => true,
    CURLOPT_TIMEOUT        => 60,
    CURLOPT_USERAGENT      => 'facebook-php-3.2',
    CURLOPT_PROXY      => '199.200.120.140:8089',
  ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-11T11:50:16.843

我遇到了类似的 curl 异常，因为它尝试使用 IPv6 但无法使用。在我通过 curl_setopt() 强制 curl 使用 IPv4 后可以让它工作。遵循此链接中的建议 - [http://www.tech-and-dev.com/2012/07/how-to-fix-facebook-connect-error.html](http://www.tech-and-dev.com/2012/07/how-to-fix-facebook-connect-error.html)

# javascript - 表示和解析嵌入对象的 URL GET 参数

> ID：15888057
> 
> 赞同：0
> 
> 时间：2013-04-08T20:11:59.553
> 
> 标签：javascript, node.js, url, get

我正在研究一个由多个相互关联的集合组成的 API。我想让用户有机会通过 GET url 参数急切地从关联的集合中获取记录。

为实例

```
/api/clients/ 
```

将返回一个对象数组，每个对象代表一个客户端。

但是客户有“员工”和“模板”。“模板”也有“修订版”。最后，“修订”有“组”

我对 url 参数格式的策略是这样的：

```
/api/clients?expand=[employees][templates[revisions[groups]]] 
```

其中代表：

```
clients
 + employees
 + templates
   + revisions
     + groups 
```

我的问题是，什么是解析这种格式的字符串的好方法：`[employees][templates[revisions[groups]]]` 到达这样的对象：

```
{
  "employees": {},
  "templates": {
    "revisions": {
      "groups": {}
    }
  }
} 
```

或者类似的易于使用的东西。我在 NodeJS 中工作，所以任何特定于该环境的答案都是一个加号。正则表达式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:44:50.783

离开@Kovge 的建议，我将使用在我的 URL 获取请求中传递的 JSON 字符串来处理这种情况。这有点冗长，但应该可以接受。

下面是我如何表示我渴望获取的关联集合记录：

```
[
  {
    "resource": "employees"
  },
  {
    "resource": "templates",
    "extend": [
      {
        "resource": "revisions",
        "extend": [
          {
            "resource": "groups"
          }
        ]
      }
    ]
  }
] 
```

基本上使用带有“资源”参数和可选“扩展”参数的对象数组。我的请求最终将如下所示：（url 编码）

```
http://example.com/api/clients?extend=%5B%7B%22resource%22%3A%22employees%22%7D%2C%7B%22resource%22%3A%22templates%22%2C%22extend%22%3A%5B%7B%22resource%22%3A%22revisions%22%2C%22extend%22%3A%5B%7B%22resource%22%3A%22groups%22%7D%5D%7D%5D%7D%5D 
```

# 编辑：

这就是我的结果最终的样子，仍然在玩东西。 ![在此处输入图像描述](https://i.stack.imgur.com/XAAz2.png)

# java - 干扰 ScheduledThreadPoolExecutor 的调度

> ID：15888063
> 
> 赞同：4
> 
> 时间：2013-04-08T20:12:29.527
> 
> 标签：java, timer, scheduled-tasks

我曾经`ScheduledThreadPoolExecutor.scheduledAtFixedRate`安排一些任务在每个`dt`间隔运行。

但有时，我确实想强制任务立即执行。任务执行后，我希望计划恢复正常。（即，`dt`在此“强制”执行后的一段时间内，应再次执行该任务）。

有可能做到这一点`ScheduledThreadPoolExecutor`吗？你能告诉我怎么做吗？一些简单的例子会很棒！

我想可以通过简单地关闭计划、手动执行任务并`scheduleAtFixedRate`再次调用来做到这一点，但我想知道这是否是一种好习惯。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T20:17:16.090

这是个好问题。也许你可以调用你从调用中收到的`cancel()`，使用手动提交任务，然后当它回来时再次重新安排你的固定费率任务？我想您必须检查该任务是否尚未运行。`ScheduledFuture<T>``scheduledAtFixedRate()``submit()``Future`

一些伪代码...

```
ScheduledFuture<Thingy> sf = executor.scheduleAtFixedRate(myTask, etc...);
sf.cancel();
final Future<Thingy> f = executor.submit(myTask);
f.get();
sf = executor.scheduleAtFixedRate(myTask, etc...); 
```

我从来没有做过，这是一个有趣的问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-08T20:35:09.490

对于一次性执行使用

```
ScheduledFuture<Thingy> sf = executor.schedule(myTask, 0, SECONDS); 
```

这将`myTask`立即执行一次，但不会停止执行之前安排的任务。这真的是个问题吗？

# ios - 标签栏不显示

> ID：15888068
> 
> 赞同：1
> 
> 时间：2013-04-08T20:12:40.027
> 
> 标签：ios, push-notification

从通知打开我的应用程序时，我有一个特定的视图打开。导航栏出现并且导航正常工作。我遇到的问题是让标签栏显示出来。这是我的 didFinishLaunchingWithOptions 方法。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // This prevents the UA Library from registering with UIApplcation by default when
    // registerForRemoteNotifications is called. This will allow you to prompt your
    // users at a later time. This gives your app the opportunity to explain the benefits
    // of push or allows users to turn it on explicitly in a settings screen.
    // If you just want everyone to immediately be prompted for push, you can
    // leave this line out.
    // [UAPush setDefaultPushEnabledValue:NO];

    //Create Airship options dictionary and add the required UIApplication launchOptions
    NSMutableDictionary *takeOffOptions = [NSMutableDictionary dictionary];
    [takeOffOptions setValue:launchOptions forKey:UAirshipTakeOffOptionsLaunchOptionsKey];

    // Call takeOff (which creates the UAirship singleton), passing in the launch options so the
    // library can properly record when the app is launched from a push notification. This call is
    // required.
    //
    // Populate AirshipConfig.plist with your app's info from https://go.urbanairship.com
    [UAirship takeOff:takeOffOptions];

    // Set the icon badge to zero on startup (optional)
    [[UAPush shared] resetBadge];

    // Register for remote notfications with the UA Library. This call is required.
    [[UAPush shared] registerForRemoteNotificationTypes:(UIRemoteNotificationTypeBadge |
                                                         UIRemoteNotificationTypeSound |
                                                         UIRemoteNotificationTypeAlert)];

    // Handle any incoming incoming push notifications.
    // This will invoke `handleBackgroundNotification` on your UAPushNotificationDelegate.
    [[UAPush shared] handleNotification:[launchOptions valueForKey:UIApplicationLaunchOptionsRemoteNotificationKey]
                       applicationState:application.applicationState];

    // self.tabBarController = [[UITabBarController alloc] initWithNibName:@"KFBViewController" bundle:nil];
    KFBViewController *rootView = [[KFBViewController alloc] initWithNibName:@"KFBViewController" bundle:nil];
    KFBNavControllerViewController *navController = [[KFBNavControllerViewController alloc] initWithRootViewController:rootView];
    navController.delegate = rootView;
    UIViewController *aboutUs = [[AboutUs alloc] initWithNibName:@"AboutUs" bundle:nil];
    KFBNavControllerViewController *navController1 = [[KFBNavControllerViewController alloc] initWithRootViewController:aboutUs];

    UIViewController *contactUs = [[ContactUs alloc] initWithNibName:@"ContactUs" bundle:nil];
    KFBNavControllerViewController *navController2 = [[KFBNavControllerViewController alloc] initWithRootViewController:contactUs];

    UIViewController *kyfb = [[KYFB alloc] initWithNibName:@"KYFB" bundle:nil];
    KFBNavControllerViewController *navController3 = [[KFBNavControllerViewController alloc] initWithRootViewController:kyfb];

    // UIViewController *rsfm = [[RSFM alloc] initWithNibName:@"RSFM" bundle:nil];
    // KFBNavControllerViewController *navController4 = [[KFBNavControllerViewController alloc] initWithRootViewController:rsfm];

    // UIViewController *li = [[LegislatorInfo alloc] initWithNibName:@"LegislatorInfo" bundle:nil];
    // KFBNavControllerViewController *navController5 = [[KFBNavControllerViewController alloc] initWithRootViewController:li];

    // UIViewController *events = [[Events alloc] initWithNibName:@"Events" bundle:nil];
    // KFBNavControllerViewController *navController6 = [[KFBNavControllerViewController alloc] initWithRootViewController:events];
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    //self.viewController = [[KFBViewController alloc] initWithNibName:@"KFBViewController" bundle:nil];
    //self.window.rootViewController = self.viewController;
    self.tabBarController = [[KFBTabBarViewController alloc] init];
    self.tabBarController.viewControllers = @[navController, navController1, navController2, navController3];
    // self.tabBarController.customizableViewControllers = nil;

    self.window.rootViewController = self.tabBarController;
    self.window.backgroundColor = [UIColor whiteColor];
    [self.window makeKeyAndVisible];

    // If application is launched due to  notification,present another view controller.
    UILocalNotification *notification = [launchOptions objectForKey:UIApplicationLaunchOptionsRemoteNotificationKey];

    if (notification)
    {
        ActionAlertsViewController *actionAlerts = [[ActionAlertsViewController alloc] initWithStyle:UITableViewStylePlain];
        WebViewController *wvc = [[WebViewController alloc]init];
        [actionAlerts setWebViewController:wvc];
        KFBNavControllerViewController *navController7 = [[KFBNavControllerViewController alloc] initWithRootViewController:actionAlerts];
        [self.window.rootViewController presentViewController:navController7 animated:NO completion:nil];
    }

    return YES;
} 
```

# jquery - Javascript 未在我的 SPA 中呈现

> ID：15888074
> 
> 赞同：0
> 
> 时间：2013-04-08T20:12:54.023
> 
> 标签：jquery, single-page-application, durandal

我的 home.js 文件中写了以下内容：

```
 define(['services/logger'], function (logger) {
 var vm = {
    activate: activate,
    title: 'Home View'
 };

 return vm;

 //#region Internal Methods
 function activate() {
    logger.log('Home View Activated', null, 'home', true);
    return true;
 }
 //#endregion
 var editor, html = '';

 function createEditor() {
    if (editor)
        return;

    // Create a new editor inside the <div id="editor">, setting its value to html
    var config = {};
    editor = CKEDITOR.appendTo('editor', config, html);
 } 

 function removeEditor() {
    if (!editor)
        return;

    // Retrieve the editor contents. In an Ajax application, this data would be
    // sent to the server or used in any other way.
    document.getElementById('editorcontents').innerHTML = html = editor.getData();
    document.getElementById('contents').style.display = '';

    // Destroy the editor.
    editor.destroy();
    editor = null;
}
function MultiSelect() {
    ("#Sites").multiselect();
}
}); 
```

我的 home.html 文件包含以下内容：

```
<section>
<h2 class="page-title" data-bind="text: title"></h2>
</section>
<section id ="Recipients">
 <article>
    <div class="row">
        <div class="span6">
        <label for="Study">Study: </label>
        <ul class="dropdown-menu" id="Study"></ul><br />
        <label for="Sites">Sites: </label>
        <ul class="dropdown-menu" data-bind="text: Sites" title="Sites" id="Sites" ></ul><br />
        <label for="Distribution">Distribution: </label>
        <input type="checkbox" data-bind="text: Distribution" title="Distribution" />
    </div><!-- span6 -->
    </div><!-- row -->
    <div class="row">
    <div class="span6">
        <label for="Recipients">Recipients: </label>
        <input type="checkbox" data-bind="text: Recipients" title="Recipients"/><br />
    </div><!-- span8 -->
    </div><!-- row -->
</article>
</section>

<section id ="Communication">
<article>
    <label for="SendFrom">Send From: </label>
    <label id="SendFrom"></label><br />
    <label for="Subject">Subject: </label>
    <input id="Subject" /><br />
    <div id="editor">

    </div>
</article>
</section> 
```

Bootstrap 类没有呈现我指定的布局。此外，JQuery 多选和 ckEditor 也没有呈现。我已经仔细检查了解决方案文件是否包含 jquery、bootstrap 等。我还需要更改哪些其他内容以确保正确呈现 javascript？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T23:08:42.707

您的 viewmodel 活动方法可能被 durandal 调用，但我在您的`activate`方法中没有看到任何会调用 amd 模块中其余函数的内容。此外，通过查看您发布的代码，我认为您可能会遇到[提升](http://www.adequatelygood.com/JavaScript-Scoping-and-Hoisting.html)问题。

此外，如果您尝试在视图上获取对 dom 对象的引用，那么您将希望不在`activate`函数中而是在函数内部使用它`viewAttached`。

`activate`在视图模型绑定到视图之前和附加到 dom 之前的生命周期中发生。

[viewAttached](http://durandaljs.com/documentation/Composition/)发生在 viewmodel 绑定到视图之后以及附加到 dom 之后的生命周期中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T19:19:34.650

在我看来，您的模块定义函数在定义其他函数之前正在返回（返回 vm;）。

将 vm 创建和返回语句移到其他函数下方，您应该开始看到预期的行为。

但这不是最佳实践，就像 Evan 说的那样，您应该利用 viewAttached 生命周期函数来操作 DOM。

# javascript - 根据 Javascript 中的类型对函数输入进行排序的最佳方法是什么？

> ID：15888075
> 
> 赞同：0
> 
> 时间：2013-04-08T20:12:55.607
> 
> 标签：javascript, jquery

我有一个带有多个输入的函数，我希望在调用该函数时可以选择。每个输入都是不同的类型，例如字符串、数组或数字。使用这样的代码：

```
function doStuff(str, arr, num){
    if typeof(str) != 'undefined' { $('#stringDiv').text(str)}

    if typeof(arr) != 'undefined' {
        for(var i=0; i < arr.length; i++){
            $('<li>').text(arr[i]).appendTo('#arrayUl')
        }
    }

    if typeof(num) != 'undefined' { $('#numberDiv').text(num)}
}

jQuery(document).ready(function() {
    doStuff("i'm a string", [1,2,3,4,5], 7)
}) 
```

我可以解释我的参数可能是可选的这一事实，但不能解释这样一个事实，即如果我缺少`arr`，那么我的数字参数 ( `num`) 将排在第二位，而不是第三位。

为了解决这个问题，我还可以将我的输入转储到一个数组中，然后对数组进行排序并查找每种类型的这个，就像我在[这个小提琴中所做的那样。](http://jsfiddle.net/bGTva/4/)这似乎很草率，并且根据我在其函数中看到的执行此操作的库的数量，似乎可能有更好的方法。有一个更好的方法吗？还是循环论证并寻找我最好的选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:16:28.030

使用一个对象

```
function doStuff(args) {
    // Do something with args.num
    if (typeof args.num !== "undefined") { ... }
    // Same for arr and str
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T20:19:32.993

您可以省略所有参数并使用`arguments`列表查看传递的内容。

但是，更好的方法是创建一个像这样的对象：

```
{
    str: "i'm a string",
    arr: [1, 2, 3, 4],
    num: 3.14
} 
```

然后检查这些键的对象：

```
function doStuff(args):
    if ('str' in args) {
        $('#stringDiv').text(args.str);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T20:25:11.303

> 还是循环论证并寻找我最好的选择？

是的，这很好。无需对它们进行排序。此外，您可以使用类似数组的[`arguments`对象](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments)，因此您不必`args`从固定数量的参数手动构建该数组。

```
function doStuff() {
    for (var i=0; i<arguments.length; i++) {
        var a = arguments[i];
        if (typeof a == 'string')
            $('#stringDiv').text(str);
        else if (Array.isArray(a)) // or check typeof a == 'object'
            for(var j=0; j < a.length; j++)
                $('<li>').text(a[j]).appendTo('#arrayUl');
        else if (typeof a == 'number')
            $('#numberDiv').text(num);
    }
} 
```

# c# - 如何在用户控件中引用 linq？

> ID：15888080
> 
> 赞同：1
> 
> 时间：2013-04-08T20:13:08.463
> 
> 标签：c#, .net, linq, sharepoint, user-controls

我正在尝试`linq`在 a中使用`user control`，但在参考中出现此错误`"System.Linq"`。

> 错误："c:\Program Files\Common Files\Microsoft Shared\Web Server Extensions\14\TEMPLATE\CONTROLTEMPLATES\MyUserControl.ascx.cs(23)：错误 CS0234：类型或命名空间名称 'Linq' 不存在于命名空间“系统”（您是否缺少程序集引用？）”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T20:17:14.390

检查您的`.Net`框架版本。[System.Linq](http://msdn.microsoft.com/en-us/library/system.linq.aspx)受 .Net Framework 3.5 及更高版本支持。

然后简单地编写 using 语句来包含命名空间

```
using System.Linq; 
```

您可以在项目的属性选项下检查框架版本

![在此处输入图像描述](https://i.stack.imgur.com/CWQjo.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T20:36:30.577

我知道这是其他答案的重复，但这就是您所拥有的？
根据另一个答案（您应该标记为答案）。
LINQ 直到 3.5 版才出现。
可能是您在计算机上安装了 3.5，但您的项目指向的是旧版本。
在参考下检查系统的版本。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.Linq;

namespace LotsOfUpDownKeys
{
    /// <summary>
    /// Interaction logic for UserControl1.xaml
    /// </summary>
    public partial class UserControl1 : UserControl
    {
        public UserControl1()
        {
            InitializeComponent();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T06:18:40.217

此外，这通常是假设的，但请检查项目中的引用（引用文件夹）。您应该参考 System.Core

# apple-push-notifications - 无法通过 urbanairship 向 APNS 推送通知

> ID：15888081
> 
> 赞同：2
> 
> 时间：2013-04-08T20:13:10.417
> 
> 标签：apple-push-notifications, urbanairship.com

我在开发模式下为我的应用程序使用 APNS。根据他们在门户网站上提供的入门文档，我与 Urban Airship 集成：

在 Apple 配置门户中创建了证书。将 .p12 文件导入 Urban Airship 应用程序（在启用调试的开发模式下）

现在，当我打开应用程序时，它会向我显示警报并询问我是否允许启用通知。完成后，我尝试使用生成的设备令牌测试将消息从 Urban Airship 门户推送到我的设备，我收到常见错误：

`Apple Push service rejected device token "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"`

我在google上搜索，发现这是一个非常普遍的问题；但是没有解决方案。大多数答案都提到产品和开发环境冲突是原因，但在我的情况下并非如此，因为我没有在 Urban Airship 或 APNS 开发证书中创建产品应用程序。我的 AirshipConfig.plist 中的设置是：

```
APP_STORE_OR_AD_HOC_BUILD : NO  
Development_App_Key: XXXXXXXXXXX   
Development_App_secret: XXXXXXXXXX 
```

（不是主密码，只是开发应用程序密码。）

我在任何地方都没有找到任何提出问题并后来得到解决的用户的回复。所以，我不确定人们遇到困难时是如何解决的。所有人都建议重新检查环境冲突，这在我的情况下不存在。

如果有人有任何想法，请提出可能的解决方案，因为这是我们发布的障碍。如果这是几乎每个人在使用 Urban Airship 时都会遇到的一般错误，并且如果免费 UA 帐户不是用于测试的可行服务，请也做出回应。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-19T07:34:27.317

过去几天我一直在与这些问题作斗争。为我修复它的事情是创建一个使用开发配置文件的非通配符标识符。
在我这样做之前，我只能拥有`APP_STORE_OR_AD_HOC_BUILD : YES`

值得检查的事情：

*   供应配置文件设置为开发
*   应用程序包 ID 与 Urban Airship 包 ID 匹配。
    您可以通过以下方式查看使用的 Urban Airship 捆绑包 ID：
    1.  设置
    2.  API Keys
        （见右侧，应该有一个包含 iOS Bundle ID 的框。）
*   最后确保您在 plist 中的键都匹配。

您可能也知道，您无法使用模拟器测试推送通知。我希望这有帮助。

# javascript - Firebug 中的“迭代器”功能是什么？

> ID：15888083
> 
> 赞同：3
> 
> 时间：2013-04-08T20:13:17.577
> 
> 标签：javascript, iterator, firebug

在 Firebug 中，当查看`getElementsByTagName`类型为数组时，`HTMLCollection`我看到列出了以下函数：

*   `item()`
*   `iterator()`
*   `namedItem()`

我知道如何使用`item(number of item)`和`namedItem(name of item)`。但是 iterator() 有什么用呢？

我找不到答案，所以我在这里问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T20:21:45.603

[例如，当您使用for...of](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for...of)循环遍历一个对象时，它就是 JavaScript 调用的方法。

见： [http ://wiki.ecmascript.org/doku.php?id=harmony:iterators#for-of_loop_bodies](http://wiki.ecmascript.org/doku.php?id=harmony:iterators#for-of_loop_bodies)

一个例子：

```
var myobj = {
  iterator: function() {
    for (let i = 0; i < 5; i++)
      yield i;
  }
}

for (let value of myobj)
  console.log(value); 
```

另请参阅[产量](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/yield)。

在这种情况下，`HTMLCollection`它可以帮助您编写如下代码：

```
let divs = document.getElementsByTagName("div");

for (let div of divs) {
  // do something with `div`
} 
```

# android - Android 设备与模拟器上垃圾收集器行为的差异

> ID：15888084
> 
> 赞同：4
> 
> 时间：2013-04-08T20:13:19.420
> 
> 标签：android, android-emulator, garbage-collection

我正在模拟器上测试我的应用程序的内存使用情况。问题是，在模拟器上，应用程序堆只是不断增长，只是释放了一点资源。如果没有收集，它将在大分辨率屏幕上导致 OutOfMemory 异常。

我下载了 Sony SDK，Xperia Z 有一个模拟器配置，分辨率为 1080x1920，默认堆为 64MB。我认为该分辨率的堆大小很小，因为我的应用程序仅在启动时使用 40MB。但是在我的手机上，它使用 15MB 的 64MB（分辨率为 540x960）。所以这个非常小的堆大小（可能不是真的？）+ GC 行为导致 OutOfMemory 非常快。

在真实设备上（我只在我的设备上测试过），GC 运行得非常好，它释放了不再使用的资源，但我真的无法预测这是否适用于其他手机。

我应该忽略 GC 在我的模拟器上的工作方式还是我的应用程序的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T10:55:23.587

模拟器上堆的增长表明在某些时候你有内存泄漏。

当您在不同的应用程序之间发送意图时，它们很常见（例如从图库中选择图像）。大多数设备可以毫无问题地处理此类泄漏。

堆长大的另一个原因：低效的内存操作。这意味着有时您需要大量内存（例如，您从图库中选择了 5M 图像，为其创建了 inpuststream 并将其作为位图保存在内存中，因此您要求 15+M 仿真器将显示只有高堆增长，但大多数设备会显示错误）。

如果您看到堆增长 - 分析您的内存使用情况并检测泄漏。[Link](http://android-developers.blogspot.com/2011/03/memory-analysis-for-android.html)
如果你没有检测到任何奇怪的东西，你几乎可以安全地忽略堆警告。

注意：堆显示提供的空间，未使用。

# image - 加载图像时Delphi流读取错误

> ID：15888089
> 
> 赞同：0
> 
> 时间：2013-04-08T20:13:39.907
> 
> 标签：image, delphi, fault

我的程序加载了很多图像，但我有一个问题，使用打印屏幕按钮从游戏中复制它的 1 个图像，但它是 bmp，就像其他所有图像一样。每当我运行程序时，它都会说 project1.exe 引发异常类 Ereaderror 并显示消息“流读取错误”进程停止......

代码是这样的：

```
procedure TForm1.FormCreate(Sender: TObject);
var path, destination:string;
begin
path:=paramstr(0);
destination:=extractfilepath(path)+'Leagueoflegendsdesktop.bmp';
image1.Picture.LoadFromFile(destination);
end; 
```

哪个是对的。你有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:33:58.733

唯一的解释是该文件不是有效的 Windows 位图（可能文件被截断）。或者该文件可能使用了 Delphi 不支持的一些深奥的格式。例如，它是否使用游程编码。

如果该文件不存在，您会得到一个不同的错误，表明不存在这样的文件。因此，该文件存在但无法加载。因此，它不是 Windows 位图。

诊断此问题的第 1 步是查看文件的格式。加载位图文件头并检查这些值是否有意义。可能最简单的方法是在调试器下运行程序时单步执行 VCL 代码。启用 Debug DCUs 选项以便您执行此操作。`TBitmap.ReadStream`在单元中设置断点`Graphics`并从那里获取。

说了这么多，您可能更容易避免尝试调试问题。如果您可以将图像加载到图像编辑器中，只需以 Delphi 可以读取的格式保存图像的新副本。例如普通的普通 Windows 位图，或者更好的是允许压缩的 PNG 文件。

# oauth-2.0 - Google+ 登录 - 停止请求与您有联系的人

> ID：15888094
> 
> 赞同：4
> 
> 时间：2013-04-08T20:13:57.263
> 
> 标签：oauth-2.0, google-plus

有没有办法让 Google+ 登录不请求用户的“您在 Google+ 上连接的人的列表”？

我的目标是今天使用 G+ 登录进行身份验证，并且将来还将其用于社交共享功能。作为请求登录的服务的所有者/运营商，我不在乎谁在用户的圈子中。

是否可以删除与用户相关的所有人员的请求？我错过了什么吗？例如，如果我没有请求用户的所有相关人员，用户将不再能够与他们共享吗？

我知道 Google OpenId 登录功能，但它没有提供我将来想要的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T23:00:51.630

每当您使用 Google+ 登录按钮时，都会添加范围 plus.login。因此，它会请求“知道你在 Google+ 上的身份”和“与你有联系的人列表”。对此有几点说明：

1.  用户可以控制他们与您分享哪些人，因此如果他们不想分享此信息，则在他们的控制范围内。

2.  如果您对未来的信息感兴趣 - 使用人们现有的联系是改善您的网站的好方法 - 您将可以访问。

如果您仍然觉得您应该能够请求用户的个人资料，请在此处向问题跟踪器添加星标/功能请求：

[https://developers.google.com/+/](https://developers.google.com/+/)

关于您为什么要这样做的信息越多，您的请求解释越清楚越好！

# .net - Assembly.Location 不返回 dll 位置

> ID：15888096
> 
> 赞同：0
> 
> 时间：2013-04-08T20:13:59.810
> 
> 标签：.net

我正在寻找一种在运行时返回我的程序集位置的方法，我不能使用 Assembly.Location，因为它在 NUnit 下运行时会返回影子复制程序集的路径。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T20:15:46.457

改用 CodeBase 属性，它返回原始 dll 位置，而不是影子复制的 dll 位置。

例如：

```
Assembly assembly = GetType().Assembly;    
Uri codeBaseUri = new Uri(assembly.CodeBase);
string path = codeBaseUri.LocalPath; 
```

# sql-server-2005 - 唯一约束似乎没有约束任何东西

> ID：15888098
> 
> 赞同：1
> 
> 时间：2013-04-08T20:14:04.237
> 
> 标签：sql-server-2005

我有一个名为 Models 的表，设置如下：

1.  ID - PK，身份
2.  制造商 FK - Int32
3.  PriModel FK - Int32
4.  SecModel FK - Int32
5.  外形尺寸 FK - Int32
6.  活跃字符(1)

我想要的是 2,3,4,5 列只接受一组唯一的值。我跑了：

```
ALTER TABLE dbo.Models ADD CONSTRAINT uc_Models UNIQUE (Manufacturer, PriModel, SecModel, FormFactor) 
```

报告的命令已成功完成，我看到添加了索引，但不是约束。我还可以使用 Insert 和 Update 命令创建 cols 2-5 的副本。我不确定问题是外键还是其他问题。

```
USE [inventory_v2]
GO

    /****** Object:  Table [dbo].[Models]    Script Date: 4/8/2013 2:01:41 PM ******/
    SET ANSI_NULLS ON
    GO

    SET QUOTED_IDENTIFIER ON
    GO

    SET ANSI_PADDING ON
    GO

    CREATE TABLE [dbo].[Models](
        [ID] [int] IDENTITY(1,1) NOT NULL,
        [Manufacturer] [int] NOT NULL,
        [PriModel] [int] NOT NULL,
        [SecModel] [int] NOT NULL,
        [FormFactor] [int] NOT NULL,
        [Active] [char](1) NOT NULL,
     CONSTRAINT [PK_Models] PRIMARY KEY CLUSTERED 
    (
        [ID] ASC
    )WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY],
     CONSTRAINT [uc_Models] UNIQUE NONCLUSTERED 
    (
        [Manufacturer] ASC,
        [PriModel] ASC,
        [SecModel] ASC,
        [FormFactor] ASC
    )WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
    ) ON [PRIMARY]

    GO

    SET ANSI_PADDING OFF
    GO

    ALTER TABLE [dbo].[Models]  WITH CHECK ADD  CONSTRAINT [FK_Models_Models_FormFactor] FOREIGN KEY([FormFactor])
    REFERENCES [dbo].[Models_FormFactor] ([ID])
    GO

    ALTER TABLE [dbo].[Models] CHECK CONSTRAINT [FK_Models_Models_FormFactor]
    GO

    ALTER TABLE [dbo].[Models]  WITH CHECK ADD  CONSTRAINT [FK_Models_Models_OEMs] FOREIGN KEY([Manufacturer])
    REFERENCES [dbo].[Models_OEMs] ([ID])
    GO

    ALTER TABLE [dbo].[Models] CHECK CONSTRAINT [FK_Models_Models_OEMs]
    GO

    ALTER TABLE [dbo].[Models]  WITH CHECK ADD  CONSTRAINT [FK_Models_Models_PriModels] FOREIGN KEY([PriModel])
    REFERENCES [dbo].[Models_PriModels] ([ID])
    GO

    ALTER TABLE [dbo].[Models] CHECK CONSTRAINT [FK_Models_Models_PriModels]
    GO

    ALTER TABLE [dbo].[Models]  WITH CHECK ADD  CONSTRAINT [FK_Models_Models_SecModels] FOREIGN KEY([SecModel])
    REFERENCES [dbo].[Models_SecModels] ([ID])
    GO

    ALTER TABLE [dbo].[Models] CHECK CONSTRAINT [FK_Models_Models_SecModels]
    GO 
```

# javascript - 获取标头包含链接的 json

> ID：15888126
> 
> 赞同：0
> 
> 时间：2013-04-08T20:15:35.910
> 
> 标签：javascript, html

我喜欢使用 json 对网站进行本地化。想要在 html 中包含文件。以后如何在 javascript 中访问 json 对象？

```
<link rel="localization" hreflang="en" href="lang/en.json" type="application/l10n+json"/> 
```

我不喜欢直接在 javascript 中使用路径字符串。链接元素会自动加载吗？我是否应该使用不同的标头标记来声明 json 文件的路径。如何访问标题标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:21:00.363

如果你有 jQuery，你可以使用 AJAX 请求：

```
$.getJSON("lang/en.json", function(data) {
    alert(data);
}); 
```

没有 jQuery 会变得复杂：使用没有 jQuery 的[JSON 数据（没有 getJSON）](https://stackoverflow.com/questions/3238457/consuming-json-data-without-jquery-sans-getjson)

# c - mingw，collect2.exe：错误：ld 返回 1 退出状态错误

> ID：15888135
> 
> 赞同：1
> 
> 时间：2013-04-08T20:16:06.293
> 
> 标签：c, eclipse, mingw

首先，我想明确一点，我刚开始在大学学习“C 语言”。我才刚开始，所以我可能无法理解你们使用特定词语等所说的话。这也是为什么我发现关于我的同一个问题的大多数其他主题有点没用：我不太了解。无论如何，我们走吧。我今天在我的电脑上安装了mingw，最新版本；我关注了我在下载页面中找到的每一条笔记。然后我安装了eclipse（这两个软件是我们老师推荐的）。问题是：每当我尝试编译一个小程序时，例如

```
/*
 * Esercitazione.c
 *
 *  Created on: 08/apr/2013
 *      Author: Fra
 */

#include<stdio.h>
int main(int argc, char *argv[]) {

    printf("Hello world! \n");
    return (0);
} 
```

我收到此错误[http://puu.sh/2wrk2](http://puu.sh/2wrk2) “那么让我们尝试使用老式的命令提示符。” 我想。所以我前往我的文件夹并使用命令“gcc FirstProgram Esercitazione.c”。现在，另一个问题：每当我打开刚刚生成的 .exe 文件时，我几乎看不到它打开：我的意思是它打开和关闭的速度如此之快，以至于我花了相当多的努力才注意到屏幕上实际上打印了“你好世界！” 就像在代码中一样。我真的不知道该怎么做，现在一些帮助会非常方便。提前致谢！

# .net - 保护 WCF 服务的最佳方法是什么？

> ID：15888140
> 
> 赞同：3
> 
> 时间：2013-04-08T20:16:24.217
> 
> 标签：.net, wcf

保护 WCF 服务的最佳方法是什么？我应该在服务调用中添加一个标头并在客户端上有一个消息检查器来验证标头吗？

我需要确保此人提供正确的用户名和密码以使用该服务，并且所有内容都已加密。它在 Internet 上，将使用 HTTP 绑定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T20:20:06.043

这取决于您所说的“安全”是什么意思。您可以从 SSL (https) 开始，如果您想对客户端进行身份验证，则可以继续使用身份验证技术。你真的需要详细说明你的目标......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T20:24:55.090

您应该查看[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/ms734769.aspx)，其中总结了这些选项。

与典型的 Web 应用程序非常相似，您有多种方法来保护站点：

1.  传输安全 (SSL)
2.  消息安全（消息安全标头）
3.  使用消息凭据传输（组合）

答案取决于您需要为应用程序使用的安全级别。在许多情况下，运输安全可能就足够了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T20:49:44.163

如果您仅限于 HTTP，那么它会降低性能，但更便携。
但我认为您可以使用 WS-Security 加密和保护 HTTP。

传输和消息安全模式

WCF 中使用两种主要机制来实现传输安全：
传输安全模式和消息安全模式。

传输安全模式使用传输层协议（如 HTTPS）来实现传输安全。传输模式的优点是被广泛采用，可在许多平台上使用，并且计算复杂度较低。但是，它的缺点是只能从点对点保护消息。

另一方面，消息安全模式使用 WS-Security（和其他规范）来实现传输安全。由于消息安全性直接应用于 SOAP 消息并包含在 SOAP 信封中，与应用程序数据一起，它具有独立于传输协议、更具可扩展性和确保端到端安全性（相对于点对点）；它的缺点是比传输安全模式慢几倍，因为它必须处理 SOAP 消息的 XML 特性。

[选择凭证类型](http://msdn.microsoft.com/en-us/library/ms733836.aspx)

[如何：使用用户名和密码进行身份验证](http://msdn.microsoft.com/en-us/library/ms733131.aspx)

# java - 使用OGNL获取参数

> ID：15888143
> 
> 赞同：4
> 
> 时间：2013-04-08T20:16:33.717
> 
> 标签：java, jsp, struts2, el, ognl

在一个 JSP 页面中，我包含另一个 JSP 页面并传递一个参数：

```
<jsp:include page="/WEB-INF/somepage.jsp" flush="true">
    <jsp:param name="location" value="menu"/>
</jsp:include> 
```

在包含的页面中，我可以使用 EL 访问参数。这有效：

```
${param.location} 
```

但是我不能使用 OGNL 等效项来获得相同的参数。这些都不起作用：

```
#parameters.location
#parameters['location']
%{#parameters.location}
%{#parameters['location']} 
```

我知道有一个使用`<s:set var="location">${param.location}</s:set>`or`<c:set var="location">${param.location}</c:set>`然后使用 OGNL 的解决方法：`#location`但我想避免这种情况。我也不想使用小脚本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T11:50:53.703

Struts2 等价于 include 标记[`<s:include>`](https://struts.apache.org/tag-developers/include-tag.html)，这就是您应该在代码中替换的内容，然后将其应用于[`<s:param>`](https://struts.apache.org/tag-developers/param-tag.html)参数化。

```
<s:include value="/WEB-INF/somepage.jsp">
    <s:param name="location" value="menu"/>
</s:include> 
```

之后，您可以使用 OGNL。

# javascript - html5预览中的图像方向错误

> ID：15888144
> 
> 赞同：3
> 
> 时间：2013-04-08T20:16:34.853
> 
> 标签：javascript, html

假设我的图像不是直立的（我在窗口浏览器中打开它并且图像不是直立的），但是当我将它上传到某个服务器（例如 gmail、stackoverflow）时。图像变得直立。

我问这个问题是我正在用 html5 和 javascript 编写预览逻辑。我谈论的图像显示了我在窗口浏览器中看到的确切内容。只是想知道服务器是否做了一些技巧来调整方向？

窗口中显示的图像：

![在此处输入图像描述](https://i.stack.imgur.com/9VZ2e.jpg)

直接上传到栈溢出的图片：

![在此处输入图像描述](https://i.stack.imgur.com/oEJCW.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T20:24:10.303

我猜你是在谈论你使用一个`canvas`元素生成或操作客户端的图像，然后将其呈现回`img`标签。正确的？

在服务器端，可以通过查看图像的 EXIF 方向标志来确定方向。[可以使用jQuery fileExif 之](https://github.com/sanisoft/jQuery-fileExif)类的库在客户端检查此标志。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T20:23:13.297

如果您使用[ImageInfo](http://www.nihilogic.dk/labs/imageinfo/)之类的脚本，您可以获取 EXIF 数据（如果图像有）。如果没有，您实际上无法知道它为什么会发生。可能是您正在使用的计算机上的一些“假”显示。一些图像管理器可能会保留原始旋转图像的副本。

EXIF 属性`Orientation`可能会根据图像的尺寸与方向的比较来告诉您图像是否已更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-24T09:19:22.743

在服务器端：
您可以使用 Graphics Magic 之类的工具来正确地自动定位图像：http: [//www.graphicsmagick.org/GraphicsMagick.html](http://www.graphicsmagick.org/GraphicsMagick.html)

```
gm.exe -convert -auto-orient MyImage.jpg MyImageCorrectOrientation.jpg 
```

# sql - EF 5 + Azure + MigrationFirst 覆盖数据库名称。为什么？

> ID：15888150
> 
> 赞同：1
> 
> 时间：2013-04-08T20:17:01.280
> 
> 标签：sql, entity-framework, azure, database-migration

我在 Azure 中创建了一个数据库，设置了我自己的自定义名称。然后我创建了 EF 5 代码优先实体并添加了迁移。在应用程序启动时，我调用了这两行：

```
 Database.DefaultConnectionFactory = new SqlConnectionFactory(connectionString);
        Database.SetInitializer(new MigrateDatabaseToLatestVersion<MyDataContext, MyConfiguration>()); 
```

连接字符串直接取自 Azure：Server=tcp:xxx.database.windows.net,1433;Database=dbName;User ID=yyy;Password=zzz;Trusted_Connection=False;Encrypt=True;Connection Timeout=30;

在第一次通话中，我预计数据库 dbName 将根据 POCO 模式填充表。但是，使用我的上下文的完整命名空间名称生成了一个新数据库：MyService.Business.Entity.MyContext

为什么迁移不接受连接字符串中指定的数据库名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:41:16.983

我的经验是，如果连接字符串是在代码中传递的，而不是从 app.config 中获取的，EF 对它获取连接字符串的方式很奇怪。

我必须添加一个继承自 IDBContectFactory 的类

```
 public class ContextFactory : IDbContextFactory<Context>
  {
    public Context Create()
    {
        var s = (string)AppDomain.CurrentDomain.GetData("ConnectionString");
        var context = new Context(s);

        return context;
    }
} 
```

此外，为了创建迁移，我需要在我的上下文类中

```
// uncomment when creating migration - comment out after migration is created
public Context() : base("ConnectionStringName"){} 
```

ConnectionStringName 在我的 app.config 中设置的位置。

我仍然很困惑我必须这样做并在[这里询问过](https://stackoverflow.com/questions/15856703/is-adding-a-class-that-inherits-from-something-a-violation-of-the-solid-principl)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T00:09:17.153

您可以在 DbContext 的构造函数中指定数据库名称或连接字符串名称：

```
public class MyDataContext : DbContext
{
    public MyDataContext: base("DbNameOrConntectionStringNameHere")
    {
    }
} 
```

# ruby-on-rails - 设计管理员在本地工作，但不在 Heroku 上

> ID：15888153
> 
> 赞同：2
> 
> 时间：2013-04-08T20:17:15.363
> 
> 标签：ruby-on-rails, heroku, devise, router

我正在使用 Ruby On Rails 和 Devise 创建一个应用程序。我已经创建了一个用户模型和一个管理员模型，当我在本地运行它时，我的应用程序运行良好，但是当我在 heroku 上运行它时，我遇到了问题。问题是当我尝试创建一个新管理员时，我会看到一条错误消息，上面写着“我们很抱歉，但出了点问题”。我已经完成了 rake db:migrate 和 heroku run rake db:migrate。当我检查 heroku 日志时，我看到了这个：

```
2013-04-08T19:34:49+00:00 app[web.1]: Started GET "/admins/sign_up" for 98.154.183.5 at 2013-04-08 19:34:49 +0000
2013-04-08T19:34:49+00:00 app[web.1]: Processing by Admins::RegistrationsController#new as HTML
2013-04-08T19:34:50+00:00 app[web.1]:   Rendered devise/registrations/new.html.erb within layouts/application (431.3ms)
2013-04-08T19:34:50+00:00 app[web.1]: ActionView::Template::Error (undefined method `name' for #<Admin:0x00000005207678>):
2013-04-08T19:34:50+00:00 app[web.1]: Completed 500 Internal Server Error in 549ms
2013-04-08T19:34:50+00:00 app[web.1]: 
2013-04-08T19:34:50+00:00 app[web.1]:     3: <%= simple_form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => { class: 'form-horizontal'}) do |f| %>
2013-04-08T19:34:50+00:00 app[web.1]:     4:     <%= f.error_notification %>
2013-04-08T19:34:50+00:00 app[web.1]:     5: 
2013-04-08T19:34:50+00:00 app[web.1]:     6:     <%= f.input :name %>
2013-04-08T19:34:50+00:00 app[web.1]:     8:     <%= f.input :password %>
2013-04-08T19:34:50+00:00 app[web.1]:   app/views/devise/registrations/new.html.erb:6:in `block in _app_views_devise_registrations_new_html_erb___3397140481100313441_30072880'
2013-04-08T19:34:50+00:00 app[web.1]:   app/views/devise/registrations/new.html.erb:3:in `_app_views_devise_registrations_new_html_erb___3397140481100313441_30072880'
2013-04-08T19:34:50+00:00 app[web.1]:     7:     <%= f.input :email %>
2013-04-08T19:34:50+00:00 app[web.1]:     9:     <%= f.input :password_confirmation %>
2013-04-08T19:34:50+00:00 app[web.1]: 
2013-04-08T19:34:50+00:00 app[web.1]: 
2013-04-08T19:34:50+00:00 heroku[router]: at=info method=GET path=/admins/sign_up host=protected-cliffs-2228.herokuapp.com fwd="98.154.183.5" dyno=web.1 connect=1ms service=559ms status=500 bytes=643 
```

出于某种我不知道的原因，heroku 没有链接到 admins/registrations/new.html.erb，而是链接到 devise/registrations/new.html.erb，它正在读取显示为未定义方法的“名称”属性错误。

我的 controllers/admins/registrations_controller.rb 文件如下所示：

```
class Admins::RegistrationsController < Devise::RegistrationsController

end 
```

我的 routes.rb 文件如下所示：

```
MyFirstApp::Application.routes.draw do
  get "users/show"

  devise_for :admins, :controllers => { :registrations => "admins/registrations", :sessions => "admins/sessions" } do
    get   "/admins/sign_up" => "admins/registrations#new"
    get   "/admins/sign_in" => "admins/sessions#new"
  end

  resources :posts

  devise_for :users
  match 'users/:id' => 'users#show'

  root :to => 'pages#home'
  get 'about' => 'pages#about'

end 
```

我的 development.rb 文件

```
MyFirstApp::Application.configure do
  # Settings specified here will take precedence over those in config/application.rb

  # In the development environment your application's code is reloaded on
  # every request. This slows down response time but is perfect for development
  # since you don't have to restart the web server when you make code changes.
  config.cache_classes = false

  # Log error messages when you accidentally call methods on nil.
  config.whiny_nils = true

  # Show full error reports and disable caching
  config.consider_all_requests_local       = true
  config.action_controller.perform_caching = false

  # Don't care if the mailer can't send
  config.action_mailer.raise_delivery_errors = false

  # Print deprecation notices to the Rails logger
  config.active_support.deprecation = :log

  # Only use best-standards-support built into browsers
  config.action_dispatch.best_standards_support = :builtin

  # Raise exception on mass assignment protection for Active Record models
  config.active_record.mass_assignment_sanitizer = :strict

  # Log the query plan for queries taking more than this (works
  # with SQLite, MySQL, and PostgreSQL)
  config.active_record.auto_explain_threshold_in_seconds = 0.5

  # Do not compress assets
  config.assets.compress = false

  # Expands the lines which load the assets
  config.assets.debug = true

  config.action_mailer.default_url_options = { :host => 'localhost:3000' }
end 
```

我的 production.rb 文件

```
MyFirstApp::Application.configure do
  # Settings specified here will take precedence over those in config/application.rb

  # Code is not reloaded between requests
  config.cache_classes = true

  # Full error reports are disabled and caching is turned on
  config.consider_all_requests_local       = false
  config.action_controller.perform_caching = true

  # Disable Rails's static asset server (Apache or nginx will already do this)
  config.serve_static_assets = false

  # Compress JavaScripts and CSS
  config.assets.compress = true

  # Don't fallback to assets pipeline if a precompiled asset is missed
  config.assets.compile = false

  # Generate digests for assets URLs
  config.assets.digest = true

  # Defaults to nil and saved in location specified by config.assets.prefix
  # config.assets.manifest = YOUR_PATH

  # Specifies the header that your server uses for sending files
  # config.action_dispatch.x_sendfile_header = "X-Sendfile" # for apache
  # config.action_dispatch.x_sendfile_header = 'X-Accel-Redirect' # for nginx

  # Force all access to the app over SSL, use Strict-Transport-Security, and use secure cookies.
  # config.force_ssl = true

  # See everything in the log (default is :info)
  # config.log_level = :debug

  # Prepend all log lines with the following tags
  # config.log_tags = [ :subdomain, :uuid ]

  # Use a different logger for distributed setups
  # config.logger = ActiveSupport::TaggedLogging.new(SyslogLogger.new)

  # Use a different cache store in production
  # config.cache_store = :mem_cache_store

  # Enable serving of images, stylesheets, and JavaScripts from an asset server
  # config.action_controller.asset_host = "http://assets.example.com"

  # Precompile additional assets (application.js, application.css, and all non-JS/CSS are already added)
  # config.assets.precompile += %w( search.js )

  # Disable delivery errors, bad email addresses will be ignored
  # config.action_mailer.raise_delivery_errors = false

  # Enable threaded mode
  # config.threadsafe!

  # Enable locale fallbacks for I18n (makes lookups for any locale fall back to
  # the I18n.default_locale when a translation can not be found)
  config.i18n.fallbacks = true

  # Send deprecation notices to registered listeners
  config.active_support.deprecation = :notify

  # Log the query plan for queries taking more than this (works
  # with SQLite, MySQL, and PostgreSQL)
  # config.active_record.auto_explain_threshold_in_seconds = 0.5

  #In production, :host should be set to the actual host of your application.
  config.action_mailer.default_url_options = { :host => 'myfirstapp.heroku.com' }

  #Configuring Amazon S3 for Paperclip file uploads
  config.paperclip_defaults = {
    :storage => :s3,
    :s3_credentials => {
      :bucket => ENV['AWS_BUCKET'],
      :access_key_id => ENV['AWS_ACCESS_KEY_ID'],
      :secret_access_key => ENV['AWS_SECRET_ACCESS_KEY']
    }
  }
end 
```

我的 .gitignore 文件

```
# See http://help.github.com/ignore-files/ for more about ignoring files.
#
# If you find yourself ignoring temporary files generated by your text editor
# or operating system, you probably want to add a global ignore instead:
#   git config --global core.excludesfile ~/.gitignore_global

# Ignore bundler config
/.bundle

# Ignore the default SQLite database.
/db/*.sqlite3

# Ignore all logfiles and tempfiles.
/log/*.log
/tmp
doc/
*.swp
*~
.project
.DS_Store
.idea

# Ignore Paperclip unloaded files
/public/system 
```

我会很感激我能得到的任何帮助！这是我第一次创建应用程序，所以如果我的问题很愚蠢，我很抱歉，但我被卡住了，我需要一些帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:22:04.167

首先检查您的 gitrepo 以确保该文件或相关文件由于某种原因已被忽略。

如果这不是问题，那么只需核对 heroku 项目并重新开始。

Heroku 有一种特殊的方式，有时无法正确创建新的存储库/项目。失败率很小，但你可能只是翻了个白眼。

如果这不起作用，请发布您的 production.rb 和 development.rb。

# c# - 调试 Dllimport 代码

> ID：15888158
> 
> 赞同：0
> 
> 时间：2013-04-08T20:17:20.237
> 
> 标签：c#, dll, native

是否可以查看/调试 C# 编译器为具有 DllImport 属性的方法生成的代码？我尝试进入在 VS 调试器中使用 DllImport 属性定义的方法，但它不允许我这样做。在反汇编视图中，我可以看到对特定地址的调用指令，但是当我按下 F11 键（步入）时，它只会跳过它。我在项目属性中选中了“启用本机代码调试”复选框。

**更新**

如果我理解正确，编译器会在看到`DllImportAttribute`附加到方法时执行一些操作。`DllImportAttribute`我在类文档中找不到任何东西。类的源代码`DllImportAttribute`也只有一个非常基本的类定义。在调试器中调用外部函数时，我可以看到一条`call FFA0C0C8`汇编指令，当我进入它时，它会立即移动到导入的函数体，但导入的函数的地址与 FFA0C0C8 不同。我无法将反汇编视图更改为该地址。看起来所有的 dll 加载逻辑都在这个函数中，调试器跳过了这个函数。我想知道这是一些库函数还是编译器生成的一些函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T22:07:36.227

如果您启用本机调试，并且您有 dll 的符号和源，您可以调试 P/Invoke 调用。

如果您尝试单步执行对某些 Windows dll 的 P/Invoke 调用，那么您可能会失败，因为您没有该 dll 的源代码。

**编辑**

如果您的意思是要调试执行编组的实际 CLR 代码和对 dll 的实际本机调用，那么答案是否定的 - 我认为这是不可能的。

# python - django modelmultiplechoicefield和widget checkboxselectmultiple

> ID：15888161
> 
> 赞同：4
> 
> 时间：2013-04-08T20:17:24.667
> 
> 标签：python, django, django-forms, django-admin

我想要类似管理界面的东西。

这是表单的代码：

```
class NewRoleFrom(forms.Form):
    role = forms.ModelMultipleChoiceField(
        queryset=Role.objects.all(),
        widget=forms.CheckboxSelectMultiple
    ) 
```

所以，很简单，我有角色标签（角色:)，然后数据库中的每个角色都用一个复选框呈现。像这样我可以取回用户选择的所有角色对象。但是在每行的开头我都有一个项目符号，我该如何删除它？`list_display`那么是否可以像我们在 中定义 a 时一样添加彼此的属性`admin.py`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-05T20:30:32.817

在您的表单模板中，只需遍历角色

# 表单.html

```
{% for role in form.role %}
    <div class="checkbox">
      {{ role }}
    </div>
{% endfor %} 
```

然后就可以使用 css 了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:25:46.460

Here is the source for that widget from django.forms.widgets module :

```
class CheckboxSelectMultiple(SelectMultiple):
    def render(self, name, value, attrs=None, choices=()):
        if value is None: value = []
        has_id = attrs and 'id' in attrs
        final_attrs = self.build_attrs(attrs, name=name)
        output = [u'<ul>']
        # Normalize to strings
        str_values = set([force_unicode(v) for v in value])
        for i, (option_value, option_label) in enumerate(chain(self.choices, choices)):
            # If an ID attribute was given, add a numeric index as a suffix,
            # so that the checkboxes don't all have the same ID attribute.
            if has_id:
                final_attrs = dict(final_attrs, id='%s_%s' % (attrs['id'], i))
                label_for = u' for="%s"' % final_attrs['id']
            else:
                label_for = ''

            cb = CheckboxInput(final_attrs, check_test=lambda value: value in str_values)
            option_value = force_unicode(option_value)
            rendered_cb = cb.render(name, option_value)
            option_label = conditional_escape(force_unicode(option_label))
            output.append(u'<li><label%s>%s %s</label></li>' % (label_for, rendered_cb, option_label))
        output.append(u'</ul>')
        return mark_safe(u'\n'.join(output))

    def id_for_label(self, id_):
        # See the comment for RadioSelect.id_for_label()
        if id_:
            id_ += '_0'
        return id_ 
```

You can see the bullets are due to django CSS for lists. So to remove them, think about creating a new wudget inheriting from CheckboxSelectMultiple with adding a class to the "ul" html tag, and then add your own css with the solution detailed [here](https://stackoverflow.com/questions/7357057/overriding-admin-css-in-django).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-20T22:11:32.223

我会用自定义类覆盖 CheckboxSelectMultiple 类，并直接在渲染输出中插入样式更改。请参阅下面的代码

```
class CustomCheckboxSelectMultiple(forms.CheckboxSelectMultiple):
    def __init__(self, attrs=None):
        super(CustomCheckboxSelectMultiple, self).__init__(attrs)

    def render(self, name, value, attrs=None, choices=()):
        output = super(CustomCheckboxSelectMultiple, self).render(name, value, attrs, choices)

        style = self.attrs.get('style', None)
        if style:
            output = output.replace("<ul", format_html('<ul style="{0}"', style))

        return mark_safe(output) 
```

然后以您的形式：

```
class NewRoleFrom(forms.Form):
    role = forms.ModelMultipleChoiceField(
        queryset=Role.objects.all(),
        widget=CustomCheckboxSelectMultiple(attrs={'style': 'list-style: none; margin: 0;'})
    ) 
```

# angularjs - AngularJS $http 错误函数从未被调用

> ID：15888162
> 
> 赞同：24
> 
> 时间：2013-04-08T20:17:38.267
> 
> 标签：angularjs

我有那个简单的代码：

```
$http.get("/api/test")
    .success(function (data, status, headers, config) {
        console.log(data);
        return data;
    }).error(function (data, status, headers, config) {
        alert("error");
        return status;
}); 
```

它工作正常，但永远不会调用错误函数，即使我从服务器返回 404（未找到）......在这种情况下，它调用状态 = 404 的“成功”函数......

那是对的吗？

谢谢

提琴手：

```
Request

GET http://localhost:41234/api/test HTTP/1.1
Host: localhost:41234
Connection: keep-alive
Accept: application/json, text/plain, */*
X-Requested-With: XMLHttpRequest
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.22 (KHTML, like Gecko)    Chrome/25.0.1364.172 Safari/537.22
Referer: http://localhost:41234/
Accept-Encoding: gzip,deflate,sdch
Accept-Language: pt-BR,pt;q=0.8,en-US;q=0.6,en;q=0.4
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
Cookie: ASP.NET_SessionId=bd1b3rib5j4beub0xbuhb1hm; FormsAuthentication=xxxxx

Response

HTTP/1.1 404 Not Found
Cache-Control: no-cache
Pragma: no-cache
Expires: -1
Server: Microsoft-IIS/8.0
X-AspNet-Version: 4.0.30319
X-SourceFiles: =?UTF-8?B?RDpcUGVzc29hxvY2FyLkFwaVxhcGcg==?=
X-Powered-By: ASP.NET
Content-Length: 0 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2014-03-15T15:00:08.053

我遇到了同样的问题，老实说，按照这篇文章的提示，我走错了方向……所以，我分享了我的案例/解决方案，这样在我同样情况下的其他人可以节省时间。

我正在使用 Angular.js 1.2.14 + WebApi 2。这是我对 NotFound 状态的响应：

```
Cache-Control:no-cache
Content-Length:0
Date:Sat, 15 Mar 2014 14:28:35 GMT
Expires:-1
Pragma:no-cache
Server:Microsoft-IIS/8.0
X-AspNet-Version:4.0.30319
X-Powered-By:ASP.NET
X-SourceFiles:=?UTF-8?B?QzpcU3ZpbHVwcG9EaXNjaXR1clxhcGlcTWFnMTRcYXBpXGxlc3Nvblw4NA==?= 
```

如您所见，Content-Lenght:0，但没关系。

我的问题是 Angular.js 拦截器的不正确使用，尤其是这样的：

```
responseError: function (result) {
                // check something 
                return result;
            } 
```

返回结果而不抛出异常或拒绝承诺（[如文档中所写](http://docs.angularjs.org/api/ng/service/%24http)）使 Angular 相信我想以正确的分辨率转换拒绝，然后调用成功回调。

我更正我的代码如下：

```
responseError: function (result) {                    
                // check something 
                return $q.reject(result);
            } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-12T01:37:05.483

[问题是您的网络服务器，它将 content-length 设置为 0，这意味着您可以在HTTP/1.1 规范](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.13)中看到这是一个有效值。

我还在 JSFiddle 上做了一个示例，显示了错误和成功示例。见[这里](http://jsfiddle.net/danielcsgomes/cAMc6/1/)。

错误示例中的标题：

要求：

```
GET /error/ HTTP/1.1
Host: fiddle.jshell.net
Connection: keep-alive
Accept: application/json, text/plain, */*
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_3) AppleWebKit/537.31 (KHTML, like  Gecko) Chrome/26.0.1410.65 Safari/537.31
DNT: 1
Referer: http://fiddle.jshell.net/danielcsgomes/cAMc6/1/show/
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: UTF-8,*;q=0.5
Cookie: csrftoken=4tNVNxC5v6BSq9yJCKkHlGFJBz3cClqd` 
```

回复：

```
HTTP/1.1 404 NOT FOUND
Server: nginx/0.8.54
Date: Fri, 12 Apr 2013 00:38:07 GMT
Content-Type: text/html; charset=utf-8
Transfer-Encoding: chunked
Connection: keep-alive
Vary: Cookie
Content-Encoding: gzip 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-08T20:35:04.040

如果您使用 AngularJS 1.1.1 或更高版本...

附加“.json”有效吗？：

```
$http.get("/api/test.json")
  .success(function (data, status, headers, config) {
      console.log(data);
      return data;
  }).error(function (data, status, headers, config) {
      alert("error");
      return status;
}); 
```

如果是这样，它也可以通过以下方式修复：

```
myModule.config(['$httpProvider', function ($httpProvider) {
  $httpProvider.defaults.headers.common['X-Requested-With'] = 'XMLHttpRequest';
}]); 
```

看到这个 => [Angular JS 在从 1.1.0 升级到 1.1.1 后失败](https://stackoverflow.com/questions/15811062/angular-js-fails-after-upgrade-from-1-1-0-to-1-1-1)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-03-21T11:54:42.173

也许有点晚了，但是......目前 Angular $http 请求为您提供了一个前提，因此您可以将其更改为：

```
$http({
    method: "yourMethod",
    url: "yourUrl",
    data: {yourDataObj}
}).then(function (res) {     //first function "success"
    console.log(res.data);
}, function (err) {          //second function "error"
    console.log(err);
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-30T14:33:14.960

我们将帖子移至工厂，我们并不真正关心测试 $http 的东西，只关心它对成功或错误的作用：

```
factoryModule.factory('GiftFactory', function ($http, Settings) {
    var saveUrl = Settings.endpoints.saveUrl;

    return {
        createGift: function (data) {
            var gift = { gift: JSON.stringify(angular.toJson(data.gift)) };
            return $http.post(saveUrl, gift);
        }
    };
}); 
```

我们这样称呼它：

```
 $scope.submit = function () {
        $scope.submitting = true;
        GiftFactory.createGift($scope)
            .success(function () {
                $window.location = Giving.endpoints.indexUrl;
            }).error(function() {
                $scope.submitting = false;
                alert('an error occurred');
        });
    }; 
```

我们像这样测试它：

```
describe('donation controller', function () {
var $scope, q, window, controller;

beforeEach(module('giving.donation'));
beforeEach(inject(function ($controller, $rootScope, $q) {
    $scope = $rootScope.$new();
    window = {};
    q = $q;
    giftFactory = {};
    controller = $controller('DonationController', { $scope: $scope, $window: window, GiftFactory: giftFactory });
}));

describe('submit', function () {
    var deferred;
    beforeEach(function () {
        deferred = q.defer();

        deferred.promise.success = function (fn) {
            deferred.promise.then(
                function (response) {
                    fn(response.data, response.status, response.headers);
                });
            return deferred.promise;
        };
        deferred.promise.error = function (fn) {
            deferred.promise.then(null,
                function (response) {
                    fn(response.data, response.status, response.headers);
                });
            return deferred.promise;
        };
    });

    it('should redirect on success', function () {
        //Arrange
        Giving = { endpoints: { indexUrl: "/testurl" } };

        giftFactory.createGift = function () {
            return deferred.promise;
        };

        //Act
        $scope.submit();

        deferred.resolve({});
        $scope.$apply();

        //Assert
        expect($scope.submitting).toBeTruthy();
        expect(window.location).toBe('/testurl');
    });

    it('should set submitting back to false on error', function () {
        //Arrange
        Giving = { endpoints: { indexUrl: "/testurl" } };

        giftFactory.createGift = function () {
            return deferred.promise;
        };

        //Act
        $scope.submit();

        deferred.reject({});
        $scope.$apply();

        //Assert
        expect($scope.submitting).toBeFalsy();
        expect(window.location).toBeUndefined();
    });
});

}); 
```

# php - 使用 preg_match 或 regx 替换 html 中的大量单词

> ID：15888166
> 
> 赞同：0
> 
> 时间：2013-04-08T20:17:46.857
> 
> 标签：php, regex, html-parsing

我有什么好的解决方案来转换以下格式的html

```
 <span xmlns:v="http://rdf.data-vocabulary.org/#">
                <span typeof="v:Breadcrumb">
                    <a href="http://link1.com/" rel="v:url" property="v:title">Home</a>
                </span> 
                / 
                <span typeof="v:Breadcrumb">
                    <a href="http://link2.com/" rel="v:url" property="v:title">Child 2</a>
                </span>
                / 
                <span typeof="v:Breadcrumb">
                    <a href="http://link3.com/" rel="v:url" property="v:title">Child 3</a>
                </span> 
                / 
                <span typeof="v:Breadcrumb">
                    <span class="breadcrumb_last" property="v:title">Child 4</span>
                </span>
            </span> 
```

进入

```
 <span itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                <span typeof="v:Breadcrumb">
                    <a href="http://link1.com/" itemprop="url">
                        <span itemprop="title">Home</span>
                    </a>
                </span> 
                /
                <span typeof="v:Breadcrumb">
                    <a href="http://link2.com/" itemprop="url">
                        <span itemprop="title">Child 2</span>
                    </a>
                </span> 
                / 
                <span typeof="v:Breadcrumb">
                    <a href="http://link3.com/" itemprop="url">
                        <span itemprop="title">Child 3</span>
                    </a>
                </span> 
                / 
                <span>
                    <span class="breadcrumb_last">
                        <span itemprop="title">Child 4</span>
                    </span>
                </span>
            </span> 
```

用php？我想将 RDFa 中的面包屑结构转换为微数据。感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:24:10.610

使用正则表达式的解决方案，这适用于您的示例代码，但是当属性顺序更改时，它会失败：

```
 $pattern = '#(?:rel\=\"v\:url\"\)? property\=\"v\:title\"\>([^\<]*)\<#ui';
 $replacement = ' itemprop="url"><span itemprop="title">$1</span><';
 $output = preg_replace($pattern,$replacement,$original); 
```

如果可能的话，当你想要操作 HTML/XML 源时，总是想着 HTML/XML 解析，这里有一个强大的工具：[https](https://code.google.com/p/phpquery/) ://code.google.com/p/phpquery/ 。如果你使用 jQuery js 框架，这个工具对你来说会很容易；）见：

```
require_once 'phpquery/phpQuery.php';
$dom = phpQuery::newDocument($original);
foreach($dom->find('a[rel="v:url"]') as &$item){
    $txt = $this->text();
    $item->
       removeAttr('rel')->
       removeAttr('property')->
       attr('itemprop','url')->
       html("<span itemprop=\"title\">$txt</span>");        
}
$output = "$original"; 
```

# c++ - 使用 getline 和向量的 C++ 问题

> ID：15888169
> 
> 赞同：1
> 
> 时间：2013-04-08T20:18:01.840
> 
> 标签：c++, vector, getline

我有一个问题，我正在使用 getline 从文件中读取一行，并使用 stringstream 使用逗号作为分隔符来分隔不同的变量。问题是变量的标准 cout 正确显示了 seatDes，但是使用向量我得到了名称而不是 seatDes。不知道为什么会这样。

文件中的标准行：Jane Doe,04202013,602,1A

```
#include <iostream>
#include <fstream>
#include <string>
#include <sstream>
#include <vector>
#include <cstdlib>

#include "reservation.h"

int main(int argc, char **argv)
{
std::ifstream flightFile;
std::string name, date, seatDes, flightNum, line;
int error = 0, conFlightNum;

flightFile.open("reservations.txt");

if(!flightFile)
{
    //returns a error value if there is a problem reading the file
    error = 1;
    return error;
}
else
{
    //Start reading files and sticks them into a class object and sticks the object into         the vector set        
    while (std::getline(flightFile, line))
    {
       std::istringstream ss(line);
       std::getline(ss, name, ',');
       std::getline(ss, date, ',');
       std::getline(ss, flightNum, ',');
       conFlightNum = atoi(flightNum.c_str());
       ss >> seatDes;
       reservation newRes(name, date, conFlightNum, seatDes);
       std::cout << name << std::endl << date << std::endl << conFlightNum << std::endl << seatDes << std::endl;
       std::cout << "Vector Component" << std::endl;
       std::cout //<< newRes.getName() << std::endl << newRes.getDate() << std::endl << newRes.getFlightNum() 
       << std::endl << newRes.getSeatDesg() << std::endl;
    }
}

flightFile.close();
return 0;
} 
```

保留.h 文件

```
class reservation {
private:
std::string name, seatDesg, date;
int flightNum;

public:
//Default Constructor
reservation(){}
//Big Constructor
reservation(std::string name, std::string date, int flightNum, std::string seatDesg)
{
    this->name = name;
    this->seatDesg = name;
    this->date = date;
    this->flightNum = flightNum;
}

//Setters
void setName(std::string name)
{ this->name = name; }

void setFlightNum(int flightNum)
{ this->flightNum = flightNum; }

void setSeatDesg(std::string seatDesg)
{ this->seatDesg = seatDesg; }

void setDate(std::string date)
{ this->date = date; }

//Getters
std::string getName()
{ return name; }

std::string getSeatDesg()
{ return seatDesg; }

std::string getDate()
{ return date; }

int getFlightNum()
{ return flightNum; }

}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T20:28:35.420

```
reservation(std::string name, std::string date, int flightNum, std::string seatDesg)
{
    this->name = name;
    this->seatDesg = name;  // Here is your problem
    this->date = date;
    this->flightNum = flightNum;
} 
```

应该

```
this->seatDesg = seatDesg; 
```

# asp.net-mvc - 为 ASP.NET MVC 4 中的视图提供公共数据的操作过滤器

> ID：15888172
> 
> 赞同：0
> 
> 时间：2013-04-08T20:18:08.973
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我正在尝试为我所有派生自`ViewModelBase`. 除了我遇到了一种 Catch-22 ......

my 的共同属性`ViewModelBase`是：`User`和`Environment`（还有更多，但对于这个问题，这两个就足够了）。

现在，我有一个分配这两个属性的全局过滤器 -`ViewModelBase.User`属性是从 分配的`BaseController.User`，它之前是由授权过滤器分配的。

它在所有情况下都运行良好，但是：授权过滤器有时会根据业务逻辑决定将用户重定向到“尚未批准”页面。这样做是这样的：

```
var notApprovedView = new ViewResult();
notApprovedView.ViewName = "NotYetApproved";
filterContext.Result = notApprovedView; 
```

除了在这种情况下，ViewModel 还没有应该由全局过滤器分配的公共属性，这会导致运行时异常。

处理我需要分配公共属性并且某些公共属性可能会根据授权而改变的情况的正确（即最佳实践，而不是hack）方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:27:26.627

我想我可能因为这棵树上的树而错过了森林……对不起。

我可以在授权过滤器中执行以下操作：

```
var notApprovedView = new ViewResult();
notApprovedView.ViewName = "NotYetApproved";

// add this line    
notApprovedView.Model = new ViewModelBase(){User = this.user};

filterContext.Result = notApprovedView; 
```

# javascript - 手风琴不会使页面更长

> ID：15888174
> 
> 赞同：0
> 
> 时间：2013-04-08T20:18:22.407
> 
> 标签：javascript, html, css, twitter-bootstrap

我正在使用这样的手风琴： ![在此处输入图像描述](https://i.stack.imgur.com/Pr7GG.png)

html 看起来像：

```
 <div id="cal-container">
        <div id="cal-side">
            <div class="accordion" id="accordion2">
                <div class="accordion-group">
                    <div class="accordion-heading">
                        <a class="accordion-toggle project-header" data-toggle="collapse" data-parent="#accordion2" href="#project-list">Projects
                        </a>
                    </div>
                    <div id="project-list" class="accordion-body collapse">
                        <div class="accordion-inner">
                            <div class="event-container project-container">
                            </div>

                        </div>
                    </div>
                </div>
                <div class="accordion-group">
                    <div class="accordion-heading">
                        <a class="accordion-toggle task-header" data-toggle="collapse" data-parent="#accordion2" href="#task-list">Tasks
                        </a>
                    </div>
                    <div id="task-list" class="accordion-body collapse">
                        <div class="accordion-inner">
                            <div class="event-container task-container">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="accordion-group">
                    <div class="accordion-heading">
                        <a class="accordion-toggle case-header" data-toggle="collapse" data-parent="#accordion2" href="#case-list">Cases
                        </a>
                    </div>
                    <div id="case-list" class="accordion-body collapse">
                        <div class="accordion-inner">
                            <div class="event-container case-container">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <div id="cal">
            <div id='calendar'>
            </div>
        </div>
    </div> 
```

CSS看起来像：

```
 .calendar
        {
            margin:16px;
            border-collapse:separate !important;
                -webkit-border-radius: 7px;
            border-radius: 7px;
            border-spacing:0;
        }

        .cal-container
        {
            margin-left:auto;
            margin-right:auto;
            display: table;
            width:100%;
        }

    #cal-side
    {
        float:right;
        height:100%;
        width:200px;
        margin:50px 5px 5px 5px;
    }

    #cal-container
    {
        width:100%;
    }

    .top-link
    {
        display:inline-block;
    }

    .accordion-inner
    {
        padding:2px 2px !important;
    }

#cal{ 
    overflow:hidden;
} 
```

问题是当我有太多事件时，页面不会在内容底部消失。

我怀疑导致它的风格是：

```
 #cal{ 
        overflow:hidden;
    } 
```

没有它，它确实会滚动到底部，但是日历也会到底部...

我需要一种方法让它看起来像我的图像，但页面底部应该在底部。事件不应该穿透它。

如果项目比父 div / cal-side 大，我想要一个滚动条

谢谢

![在此处输入图像描述](https://i.stack.imgur.com/0Vwpu.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:21:14.163

您为什么不将手风琴组设置为`overflow:auto`以便在必要时产生滚动条？我认为这会显得更优雅。

更新

```
#case-list {
  overflow:auto;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T20:29:02.607

尝试添加`height: auto`到包含元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T20:43:21.050

上述答案的替代方案。代码仅用于说明。

```
 <div id="calendar">
    <div id="calside-back">
    </div>
    <div id="calside-front">
    </div>
  </div> 
```

CSS

```
#calendar {
  width: 100%;
  height: 70%;
  position: relative;
}

#calside-back {
  width: 40%;
  height: 100%;
  float: right;
}

#calside-front {
  width: 40%;
  height: 150%;
  position: absolute;
  right: 0;
} 
```

calside-front 元素是绝对的，因此会溢出其父元素，而 calside-back 元素将“保留”父元素中的空间，以便日历不会隐藏在 calside-front 后面。

如果 calside-front 比页面高，那么页面滚动条就会出现。

演示[在这里](http://jsbin.com/azezob/1/edit)

# google-chrome-extension - 从内容脚本到后台 html 的 Chrome 扩展 sendMessage 错误

> ID：15888177
> 
> 赞同：10
> 
> 时间：2013-04-08T20:18:31.437
> 
> 标签：google-chrome-extension

我刚刚将我的 chrome 扩展更新为 json 版本 2，并试图让我的扩展再次工作。问题是 sendRequest 在此过程中被贬值了。[所以我将https://developer.chrome.com/extensions/messaging.html](https://developer.chrome.com/extensions/messaging.html)中的代码复制 到我的脚本中，并将其修改为我自己的变量名，它不起作用。

所以然后我回去输入原始代码，它仍然不起作用。我已经阅读了多个类似的问题[希望这不会因为重复而被关闭，因为它们都与我的情况不同]。

**清单.json：**

```
{
   "background": {
        "page": "background.html"
        },
    ... ... ...
   "content_scripts": [ {
      "css": [ "style.css" ],
      "js": [ "jq.js", "script.js" ],
      "matches": [ "http://*.craigslist.org/*/*.htm*" ]
   } ],
   ... ... ...
   "permissions": [ "tabs", "http://*.craigslist.org/*/*.htm*" ],
   "manifest_version": 2,
   "update_url": "http://clients2.google.com/service/update2/crx",
   "version": "3.0"
} 
```

**背景.html：**

```
<html>
<script type='text/javascript'>
   chrome.runtime.onMessage.addListener(
  function(request, sender, sendResponse) {
    console.log(sender.tab ?
                "from a content script:" + sender.tab.url :
                "from the extension");
    if (request.greeting == "hello")
      sendResponse({farewell: "goodbye"});
  });
    });
</script>
</html> 
```

**脚本.js：**

```
chrome.runtime.sendMessage({greeting: "hello"}, function(response) {
  console.log(response.farewell);
}); 
```

现在我运行一个页面 [on craigslist]，然后转到控制台，这是错误：

```
Port error: Could not establish connection. Receiving end does not exist.
TypeError: Cannot read property 'farewell' of undefined
    at chrome-extension://dhmjefbokfkjpdbigkadjpgjeflchgea/script.js:9:23 
```

我在 Ubuntu 12.10 64 位上使用 Chrome Beta *（Google Chrome：27.0.1453.15（官方版本 191758）测试版）*

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-08T20:23:23.977

您正在从您的背景和内容脚本发送消息，但根本没有尝试接收它们。尝试在其中一个或两个地方收听消息。此外，内联代码[违反 CSP](https://stackoverflow.com/questions/11913575/port-error-while-changing-chrome-extension-from-manifest-v1-to-v2)，因此将其全部移至外部文件。

例如：

**清单.json**

```
"background": {
    "scripts": ["background.js"]
}, 
```

**背景.js**

```
chrome.runtime.onMessage.addListener(function(message,sender,sendResponse){
  sendResponse({farewell:"goodbye"});
}); 
```

**脚本.js**

```
chrome.runtime.sendMessage({greeting: "hello"}, function(response) {
  console.log(response.farewell);
}); 
```

此外，`chrome.tabs.getSelected()`也已弃用，因此请[`chrome.tabs.query()`](http://developer.chrome.com/extensions/tabs.html#method-query)改用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-08T21:26:39.217

**后台脚本**

```
chrome.tabs.getAllInWindow(null, function(tabs) {
      $.each(tabs, function() {
        chrome.tabs.sendRequest(this.id, {"action":"action_name"} );
      });
    }); 
```

**内容脚本**

```
chrome.extension.onRequest.addListener(function(request, sender, sendResponse){
  if(request.action === 'action_name')
  {
    alert('handle event in the content script!!!!')
  }
}); 
```

# sql-server - 将列加入字符串

> ID：15888179
> 
> 赞同：0
> 
> 时间：2013-04-08T20:18:37.703
> 
> 标签：sql-server, xml, tsql, xpath

我*认为*我需要更好地理解 FOR XML PATH 才能使其正常工作。也许您可以通过这个简单的示例帮助我：

给定

```
DECLARE @p VARCHAR(200)
DECLARE @phn TABLE (Phone VARCHAR(25))
INSERT INTO @phn VALUES('204-721-1532')
INSERT INTO @phn VALUES('306-922-2058')
INSERT INTO @phn VALUES('204-728-3852') 
```

我想将@phn.Phone 中的所有行更改为 VARCHAR，如果它只是 Python，则类似于

```
SET @p = ', '.join(@phn.Phone) # Alas 
```

现在，**这**在一定程度上起作用：

```
SELECT DISTINCT Phone+', ' FROM @phn FOR XML PATH('')
==> 204-721-1532, 204-728-3852, 306-922-2058, 
```

有那个尾随逗号，但那里没有问题。我需要的是将此结果转换为 VARCHAR 变量，例如

```
SELECT DISTINCT @p = Phone+', ' FROM @phn FOR XML PATH('') 
```

但这是不允许的（消息 6819，级别 16，状态 3，第 45 行/ASSIGNMENT 语句中不允许使用 FOR XML 子句。）

最终，这将进入一个标量函数，我希望该函数返回连接的字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:54:31.403

您不需要 XML 路径，只需选择即可

```
DECLARE @p VARCHAR(200)
DECLARE @phn TABLE (Phone VARCHAR(25))
INSERT INTO @phn VALUES('204-721-1532')
INSERT INTO @phn VALUES('306-922-2058')
INSERT INTO @phn VALUES('204-728-3852')

SET @p = ''
SELECT @p = @p + phone + ', '  from @phn

SELECT @P 
```

[演示](http://sqlfiddle.com/#!6/d41d8/3444)

你想如何处理空值取决于你。你可以

*   添加`COALESCE(Phone,'')`
*   使用 case 语句`CASE WHEN phone is not null THEN phone + ', ' ELSE '' END`
*   使用 where`WHERE phone is not null`
*   甚至`CONCAT_NULL_YIELDS_NULL = OFF`，但这应该被弃用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T20:55:36.563

我认为这是你需要的：

[Sql 小提琴](http://sqlfiddle.com/#!3/d41d8/12165)

```
DECLARE @p VARCHAR(200)
DECLARE @phn TABLE (Phone VARCHAR(25))
INSERT INTO @phn VALUES('204-721-1532')
INSERT INTO @phn VALUES('306-922-2058')
INSERT INTO @phn VALUES('204-728-3852')

--Using Isnull() function to eliminate tralling comma
select @p = isnull(@p + ', ','') + Phone
from @phn

select @p

Results: 
204-721-1532, 306-922-2058, 204-728-3852 
```

# c++ - 计算点之间的角度

> ID：15888180
> 
> 赞同：14
> 
> 时间：2013-04-08T20:18:39.323
> 
> 标签：c++, opencv

使用 C++ 和 opencv

我正在尝试计算两点之间的角度.....我有一个 2D 平面，其边界框的中心点发生了变化，现在如果第 1 帧中的中心点在第 2 帧中改变了它的位置，我需要找到这两点的角度。

这是我正在尝试做的示例：

![在此处输入图像描述](https://i.stack.imgur.com/1tgcj.jpg)

有人可以建议解决这个问题的方法......吗？某种数学解决方案，或者可能是 C++ 函数。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-08T20:21:46.540

使用[点积](http://en.wikipedia.org/wiki/Dot_product)：

```
v1.v2 = v1.x * v2.x + v1.y * v2.y

v1.v2 = |v1| * |v2| * cos(theta)
---------------------------------+
                                 |
                                 +-->  theta = acos(v1.v2 / |v1|*|v2|) 
```

示例代码是：

```
float angleBetween(const Point &v1, const Point &v2)
{
    float len1 = sqrt(v1.x * v1.x + v1.y * v1.y);
    float len2 = sqrt(v2.x * v2.x + v2.y * v2.y);

    float dot = v1.x * v2.x + v1.y * v2.y;

    float a = dot / (len1 * len2);

    if (a >= 1.0)
        return 0.0;
    else if (a <= -1.0)
        return PI;
    else
        return acos(a); // 0..PI
} 
```

它计算 v1 和 v2 之间的角度，如下图所示

![在此处输入图像描述](https://i.stack.imgur.com/kSJUi.jpg)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-09-04T09:59:12.320

假设您要计算两点之间相对于 2D 平面原点的角度，您可以使用点积来计算两点之间的角度（就像这个问题的其他[答案](https://stackoverflow.com/a/15888243/1647057)所描述的那样）。

OpenCV 具有计算点积和点长度的实现。两点的点积为：

```
v1.dot(v2) // v1.x * v2.x + v1.y * v2.y 
```

向量的长度（通常称为向量的 L2 范数）使用[`cv::norm`](https://docs.opencv.org/2.4/modules/core/doc/operations_on_arrays.html#norm)的是：

```
cv::norm(v1) // sqrt(v1.x * v1.x + v1.y * v1.y) 
```

使用 OpenCV 的点积实现和向量的长度，我们有以下示例代码

```
double angle(const Point& v1, const Point& v2)
{
    double cosAngle = v1.dot(v2) / (cv::norm(v1) * cv::norm(v2));
    if (cosAngle > 1.0)
        return 0.0;
    else if (cosAngle < -1.0)
        return CV_PI;
    return std::acos(cosAngle);
} 
```

该解决方案不仅限于二维点。它也可用于计算 3D 点之间的角度。

请注意，角度以[弧度](https://en.wikipedia.org/wiki/Radian)为单位。

如果你想要度数，你应该乘以 180 / Pi：

```
return std::acos(cosAngle) * 180 / CV_PI 
```

# javascript - 如何在 webdriverjs 中执行自定义 JavaScript 代码

> ID：15888183
> 
> 赞同：3
> 
> 时间：2013-04-08T20:18:55.737
> 
> 标签：javascript, node.js, webdriver

如何在 webdriverjs ( [https://code.google.com/p/selenium/wiki/WebDriverJs](https://code.google.com/p/selenium/wiki/WebDriverJs) ) 中执行自定义 javascript 代码我找到了执行方法，但它的目的完全不同。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T05:47:15.097

干得好：

```
var yourClientJSFunction = function (param1, param2) {
    // the JS code you want to run in the browser 
}

driver.executeAsyncScript(yourClientJSFunction, param1, param2).then(function (res) {
    // deal with the response
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-11T11:03:45.167

如果您在节点上使用[camme/webdriverjs](https://github.com/camme/webdriverjs)，则可以使用以下代码段：

```
client
  .execute(function() {
    return $('ul li').length;
  }, [], function (err, result) {
    console.log(result.value); // 4
  })
  .call(done); 
```

在这里，我们使用 jquery 获取列表项的数量。我们在回调函数中处理结果，通过访问`result.value`.

它也可以在这里作为要点：[https ://gist.github.com/ragulka/10458018](https://gist.github.com/ragulka/10458018)

# python-2.7 - 无法从 Explorer [2013] 通过 IDLE 运行 Python - IDLE 的子进程未建立连接

> ID：15888186
> 
> 赞同：10
> 
> 时间：2013-04-08T20:19:01.520
> 
> 标签：python-2.7, python-3.x, python-idle

*2013 年 4 月 15 日解决。* 在 Windows 7（64 位）Windows 资源管理器中，当我右键单击 Python 文件并选择“使用 IDLE 编辑”时，编辑器会正确打开，但是当我运行（或 f5）Python 3.3.1 程序时，它会失败并显示“ ***IDLE 的子进程未建立连接。IDLE 无法启动子进程或个人防火墙软件阻止了连接。”*** 错误信息。启动 IDLE 以运行我的 python 3.3.1 程序的所有其他方法都运行良好。即使是“发送到”方法也有效，但它笨拙得令人无法接受。我已经花了四天时间（到目前为止）对此进行研究并尝试了各种方法，包括多次重新安装 Python。不，它不是防火墙阻止它。我已经尝试完全关闭防火墙，但没有任何效果。

这是一个重要的线索：一开始我安装并配置了 python 3.3 64 位，**一切**正常，包括从“使用 IDLE 编辑”运行，但最近当我需要一个仅在 Python 2 中可用的库时，我安装了 python 2.7.4，从那时起关于所述问题开始了。有一次，我完全删除了这两个版本的所有痕迹并重新安装了 Python 3.3.1 64 位。问题依然存在。

然后我尝试安装了两个**32 位**版本，但仍然没有运气。然后在我糊里糊涂的某个时刻，我失去了“使用 IDLE 编辑”的选项，并花了一天时间尝试一切，包括在 Regedit 中进行编辑。那里也没有运气。我重新安装了 Python 3.3.1 仍然没有“使用 IDLE 编辑”，然后最后我卸载了所有版本的 Python，并删除了对环境变量 PATH 和 PYTHONPATH 的 python 引用。然后我删除了windows注册表中所有与Python相关的键，删除了卸载懒得删除的C:\python33目录。当然，矫枉过正，然后我重新启动了 Windows 并再次安装了 Python 3.3.1 64 位版本，幸运的是，“使用 IDLE 进行编辑”的选项又回来了。我*一时*高兴，我打开 Windows 资源管理器，右键单击一个 python 程序，选择“使用 IDLE 编辑”选择运行（闭眼），你猜对了，同样的原始错误消息 **“IDLE 的子进程没有建立连接。IDLE 无法启动子进程或个人防火墙软件阻止了连接。”**

我完全被这个问题困住了，真的需要帮助。很确定你可以看到我，而不是一个快乐的露营者。最重要的是，我想我还不了解 StackOverflow，我已经在各种版本中请求帮助了 5 天，但没有任何人回复。相信我，我已经查看了 stackoverflow 以及其他网站中的所有内容，但我看不到答案。几乎好像我必须回答我自己的问题并发布它，麻烦的是，到目前为止我还不能。

不管怎样，谢谢收听。是的，我对 Python 很陌生，但多年来我一直在编程和克服问题（也许太多了）。任何人？个人没有熟悉 Python 的人，这很困难，我怎样才能与 Python 专家取得联系以进行快速电话交谈？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-14T20:18:24.000

我今天遇到了同样的问题。我发现另一个堆栈溢出帖子，其中有人`tkinter.py`在同一目录中有一个文件`python`，他们通过删除该`tkinter.py`文件来修复它。当我查看我的`python`目录时，我意识到我已经创建了一个名为`random.py`并将其放在那里的脚本。我怀疑它与 python 中的普通随机模块冲突。当我删除这个文件时，python 又开始工作了。

所以我建议你查看你的主要 python 目录，看看是否有任何`.py`文件可以移动到不同的地方。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-06-13T18:39:27.277

我正在运行 Windows 7 64 位。我今天看到了同样的错误。我为我找到了原因，希望它会帮助你。我在后台打开了 IDLE 好几天。今天尝试在IDLE中运行脚本，得到“IDLE的子进程没有建立连接。IDLE无法启动子进程或个人防火墙软件阻塞了连接。” 错误。所以我关闭了所有 IDLE 窗口，并尝试重新启动 IDLE。然后导致弹出相同的错误，现在 IDLE 无法成功打开。

原因是在后台运行了一个额外的 pythonw.exe 进程。如果我打开一个 IDLE 实例，然后打开第二个，第二个连接有问题，然后关闭。但它不会关闭它打开的 pythonw.exe 实例，一个会在后台运行。然后，该额外实例会阻止将来尝试打开 IDLE。

打开任务管理器并杀死所有 pythonw.exe 进程修复了 IDLE，现在它在我的机器上正常运行（虽然一次打开 1 个实例！）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-02-22T16:11:21.687

在您的主要 python 文件夹中查找您可能以“threading.py”、“tkinter.py”等名称创建的文件以及与您的 Lib 文件夹重叠的其他名称并移动/删除它们

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-07-24T19:32:23.493

添加到现有答案 - 实际上可以在不使用 -n 标志运行时让防火墙阻止 IDLE。我已经有几个月没有使用 IDLE 了，并决定尝试一下它是否可以与新安装的 python3.3（在 Linux Mint 13 x86 上）一起正常工作。在这期间，我让`iptables`设置更加激进，显然它阻止`idle-python3.3`了连接到 Python RPC 服务器。有时这正是信息所说的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-01T13:47:23.800

我有同样的错误信息。将 Python 安装目录中的所有 *.exe 文件添加到 Windows 防火墙例外列表后，未出现错误。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-04-05T19:23:10.723

当我禁用所有防火墙和防病毒软件时，我终于让它工作了，因为一些防病毒软件也有防火墙控制。前任。阿瓦斯特

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-01-01T13:03:04.727

如果您碰巧有一个，请删除文件夹中的 copy.py

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-06-10T00:04:30.620

我遇到了完全相同的问题：“IDLE 的子进程没有建立连接。IDLE 无法启动子进程或个人防火墙软件阻止了连接。”

我从这个 stackoverflow 网站找到了答案。我创建了一个名为 string.py 的文件，并与普通的 python 文件分类。我删除了 string.py，现在一切正常。谢谢各位。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-07-06T14:39:09.667

使用Windows 7 64位安装Python 2.7.10 Shell 我以管理员身份打开程序解决了上述问题。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-02-03T11:22:26.997

我也遇到过这个问题。你可以做两件事

1.  您可能已经有一个进程正在运行调用 pythonw.exe，它会阻止 IDLE 启动。结束该任务并尝试再次运行 IDLE
2.  使用 pythonwin 或 python 命令行

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-05-27T09:16:14.803

我在 os win7 64Bit 和 Python 3.1 上遇到了相同的问题并找到了解决方法，因为我有一个包含许多 .py 文件的项目，只有一个给出了这个错误。- 解决方法是复制一个工作文件并将内容从非工作文件复制到工作文件。（我使用另一个编辑器作为空闲。该解决方法的问题是......你重命名它不工作的文件。注意只是重命名不工作的文件对我不起作用。只是那个复制粘贴。 - 约翰

# database-design - 在这种情况下如何处理关系 - 项目、文章和位置？

> ID：15888190
> 
> 赞同：1
> 
> 时间：2013-04-08T20:19:13.113
> 
> 标签：database-design, relational-database

我有一张表格，其中包含我可以在许多地方拥有的物品、文章的信息。例如，我可以将物品放在仓库或商店中。所以我有一个带有商店信息的表格和一个带有仓库信息的表格。

将物品与可能的位置联系起来的最佳方法是什么？

我认为一个选项是在表项中有两个外键，一个用于商店，另一个用于仓库。如果我在店里有 FK，那么仓库的 FK 必须为空。如果将来该项目可以在其他位置，我可以在项目表中添加新字段。

但是当我想显示信息时，我必须检查哪个FK不为空并显示具体位置的信息。但是如果我使用视图来显示项目的信息和位置的主要信息，我有很多字段为空，因为不是项目所在的位置。

但这是最好的方法吗？还有其他选择还是这是最正确的方法？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:44:30.793

> 我认为一个选项是在表项中有两个外键，一个用于商店，另一个用于仓库。

这是一个[合法的解决方案](https://stackoverflow.com/a/15135338/533120)，当您只能链接到几种位置时应该可以正常工作。但如果有（或将来可能有）多种位置，请考虑这样做：

![在此处输入图像描述](https://i.stack.imgur.com/HWYjL.png)

该符号![在此处输入图像描述](https://i.stack.imgur.com/Xco8m.png)表示继承（又名类别、子类型、子类化、泛化层次结构等）。[请在ERwin 方法指南](http://tangra.si.umich.edu/~radev/654/resources/ERMGALL.PDF)中搜索“子类型关系”以获取更多信息，并查看[这篇文章](https://stackoverflow.com/a/12037398/533120)以了解有关物理数据库中可能的实施策略的一些详细信息。

另见[这篇文章](https://stackoverflow.com/a/15648237/533120)和[这篇文章](https://stackoverflow.com/a/11127749/533120)。

> 但是如果我使用视图来显示项目的信息和位置的主要信息，我有很多字段为空，因为不是项目所在的位置。

没有什么可以帮助你。如果两条数据具有不同的结构，您就不能盲目地将它们“强制”成统一的行。要么留下一些可选的字段（就像你已经做的那样），或者只获取公共字段（如果你可以忍受的话），或者只是为每种位置使用单独的查询/视图 - 没有规则说你必须得到一切都在一个单一的数据库往返¹！

* * *

*¹实际上，根据您的客户端库，您实际上可能能够在单个数据库往返中打包多个逻辑独立的查询。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T20:45:56.617

听起来您应该有一个位置表，然后让该项目通过外键包含对该表的引用。

```
Item
-----------
ItemId (PK)
ItemName
LocationId (FK)

Location
-----------
LocationId (PK)
LocationName 
```

# c# - 在 for 循环中使用转义键退出

> ID：15888191
> 
> 赞同：0
> 
> 时间：2013-04-08T20:19:19.677
> 
> 标签：c#, visual-studio-2010

我有这个循环并且正在工作：

```
 for (int x = 0; x < nombres.Length; x++)
            {
                ValidXX.Text = x.ToString(); ValidXY.Text = nombres.Length.ToString();

                origen = nombres[x];
                cambia = nombres[x];
                pedrito = control.ValidarDocumentoXML(cambia);
                if (pedrito == true)
                { }
                else
                  /*  File.Move (origen , destino );*/
                try
                { }
                catch(IOException iox)
                {  MessageBox.Show(iox.Message); }
                { /* corrupto[x] = cambia; */ MessageBox.Show("malo" + cambia); }
            } 
```

我想用转义键打破这个循环，我试过这个：

```
 private void Importar2_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.KeyCode == Keys.Escape) { }   
    } 
```

但我不能将此 key_down 写入 for 循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:25:32.123

你可以这样做：

```
 bool escPressed = false;

        ....
        //run your loop in a different thread
        Thread thread = new Thread(new ThreadStart(MyLoop));
        thread.Start();
        ....        

    void MyLoop()
    {
        for (int x = 0; x < nombres.Length; x++)
        {
            if(escPressed) break;
            ValidXX.Text = x.ToString(); ValidXY.Text = nombres.Length.ToString();

            origen = nombres[x];
            cambia = nombres[x];
            pedrito = control.ValidarDocumentoXML(cambia);
            if (pedrito == true)
            { }
            else
              /*  File.Move (origen , destino );*/
            try
            { }
            catch(IOException iox)
            {  MessageBox.Show(iox.Message); }
            { /* corrupto[x] = cambia; */ MessageBox.Show("malo" + cambia); }
        } 
    }

    private void Importar2_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.KeyCode == Keys.Escape) { escPressed = true;}   
    } 
```

# iphone - 如何在 ModelController.m 中为页面视图控制器构建数据源的方法中实现“取消”按钮

> ID：15888192
> 
> 赞同：0
> 
> 时间：2013-04-08T20:19:24.183
> 
> 标签：iphone, ios, objective-c, cocoa

我有一个在 3 个文件中实现的页面视图控制器。其中之一，ModelController.m 实现了“generateData”方法，它基本上只是为这个页面视图控制器构建和格式化所有页面。在这个方法中，我做的第一件事是创建一个带有“取消”按钮的进度条弹出窗口。然后，在 while() 循环中，我继续构建页面，同时，每 10 页更新一次进度条，让用户看到应用程序仍在生成输出。

一旦“generateData”方法完成，即构建所有页面（可能有超过 1,000 甚至 10,000 个页面，具体取决于用户输入），它会将“self”返回给 RootViewController.m 中的一个方法，该方法反过来传递生成的数据在 DataViewController.m 中的“dataObject”到“viewWillAppear”，最终向用户显示该对象中的页面。

这一切都很好，除了“取消”按钮。因为“generateData”方法在主线程上运行，所以它阻塞并且“取消”按钮变得完全没有响应。“块”当然是指它占用所有 CPU 周期，不允许执行任何其他操作，生成 10,000 个页面可能需要一分钟以上，所以我真的希望允许用户取消操作。

我尝试为包含取消按钮的进度条弹出窗口创建一个单独的线程，但这不起作用，因为所有 UI 操作都需要在应用程序的主线程上执行。

*几乎*似乎起作用的是，当我将“generateData”方法放在单独的线程上并将进度条保留在主线程上时。这可以正常工作，只是现在“generateData”被放在另一个线程上以在后台执行并立即返回，因此返回空的“self”或者更确切地说是空的“dataObject”，导致崩溃，因为该对象中没有任何内容显示。

那么如何检查“generateData”线程是否已完成，并且仅在完成后才“返回自我”？我真的不能有一些 BOOL 真/假变量并在循环中执行，因为主线程上的循环将再次阻塞“取消”按钮。

或者，在 iOS 的冗长方法上实现“取消”按钮的正确方法是什么？也许我做错了，但对于我的一生，我找不到正确的食谱。

提前感谢您的帮助，代码相当广泛，这就是我没有包含任何代码的原因，但我希望我的描述能让您对正在发生的事情有一个很好的了解。如果有帮助，我可以提供代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:24:24.440

正确的方法是异步加载数据（在后台线程上）并更新主（UI）线程以更新进度条等...但是您可能不需要进度条，因为您可能可以加载这些页面的速度快于用户翻转它们的速度，因此加载 100 并让用户玩，而您继续加载下一个 99,900... 除了这些可能不是您应该使用的确切数字...

如果您继续使用进度视图和取消按钮，那么您将在用户按下“取消”时取消后台线程，这会响应，因为您的数据生成是在后台线程上...

查看[Grand Central Dispatch](http://developer.apple.com/library/ios/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)或[NSInvocationOperations](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSInvocationOperation_Class/Reference/Reference.html)

[这是 Ray Wenderlich 的一个很好的教程，可以帮助您入门。](http://www.raywenderlich.com/19788/how-to-use-nsoperations-and-nsoperationqueues)

# azure - 服务总线代理 VS 中继消息传递

> ID：15888195
> 
> 赞同：12
> 
> 时间：2013-04-08T20:19:36.663
> 
> 标签：azure, servicebus, azureservicebus, azure-servicebusrelay

我有一个令我困惑的问题，服务总线类型、代理消息传递和中继消息传递之间有什么区别？我不是从开发的角度来寻找它，而是我想更多地了解这个概念以及它们之间的区别。

谢谢你。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-09T02:18:08.640

Service Bus Relay 和 Service Bus Brokered Messaging 都是用于开发分布式和混合应用程序的机制。但是，它们针对不同的开发和访问模式。

*   服务总线 (SB) 中继提供了一种简单且安全的**远程服务**方式，即，它使您能够安全地将托管在私有云上的服务公开给外部客户端。与服务远程处理方案一样，客户端显式调用“中继”服务公开的方法。SB Relay 的主要优势在于，无需对防火墙设置进行任何更改或对公司网络基础设施进行任何侵入性更改即可公开服务。

*   另一方面，SB Brokered Messaging 提供了一个持久的消息传递平台，其中包含队列、主题和订阅等组件。这些可用于实现复杂的模式，例如应用程序不同部分之间的发布-订阅和时间解耦。由于代理消息传递基础架构可以可靠地存储消息，因此发送者和接收者不必同时在线，或者不必以相同的速度处理消息。

因此，中继消息传递适用于您想要向外部客户端公开服务的场景。客户端与“中继”服务的交互方式与它们在本地网络上的交互方式相同，只是它们通过 SB 中继端点访问它。由于这是一个服务远程处理方案，因此响应会立即受到网络延迟的影响。但是，如果由于某种原因该服务此时不可用，则客户端的请求将始终失败。

在代理消息传递的情况下，由于发送和接收操作是分离的，因此发送方可以继续发送可靠存储在服务上的消息，而不管接收方是否在线。但是，这种弹性的折衷是请求将根据接收方检索和处理消息的能力进行处理。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-10T09:32:04.363

我认为主要区别在于连接的同步与异步性质。

中继主要是一种防火墙友好的方式，可以将 Web 服务暴露给公共世界（甚至在防火墙、NAT 设备等之后），而消息传递更多地是一种通过队列和主题以异步方式交换消息的方式。（将其视为具有云支持的下一个版本 MSMQ :)）

一切都取决于场景，但如果您正在寻找 - 路由（发布/订阅） - 松散耦合发送方和接收方 - 负载均衡 那么您绝对应该使用消息传递。

如果您想让外部世界轻松访问您的服务，中继服务是您的朋友。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-08T22:42:08.620

从 Azure 的网站：

**中继**

> 服务总线中继服务使您能够构建在 Windows Azure 数据中心和您自己的本地企业环境中运行的混合应用程序。服务总线中继通过使您能够将驻留在公司企业网络中的 Windows Communication Foundation (WCF) 服务安全地公开给公共云来促进这一点，而无需打开防火墙连接或需要对公司网络基础结构进行侵入性更改。

Relay 还为您处理负载平衡（您可以让多个应用程序在同一个端点侦听大多数绑定）。

**代理消息**

> 第二个消息传递解决方案是最新版本的服务总线中的新功能，它支持“代理”消息传递功能。这些可以被认为是异步的或解耦的消息传递功能，支持使用服务总线消息传递基础结构的发布-订阅、时间解耦和负载平衡方案。解耦通信有很多优点；例如，客户端和服务器可以根据需要连接并以异步方式执行它们的操作。

代理消息传递包括允许您异步发送/接收消息的队列和主题/订阅。

主要区别在于，对于中继，您有应用程序在端点上侦听。当您发送消息时，应用程序会在收到该消息时对其进行处理。对于代理消息传递，消息在客户端收到时存储，并且可以随时处理。

# javascript - 没有 js、php 或 target 的下拉 onclick

> ID：15888197
> 
> 赞同：0
> 
> 时间：2013-04-08T20:19:37.203
> 
> 标签：javascript, css, drop-down-menu, menu, onclick

我想在没有 JavaScript 的情况下制作 onclick 下拉菜单，也不能使用 PHP。我正在使用目标，但每次单击它时页面都会跳转，因为它不在页面顶部。是否可以在没有 JS 和 PHP 的情况下制作下拉菜单，但可以点击？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:25:14.480

如果你想要“onclick”事件，你需要 JavaScript。悬停可以试试这个： http: [//line25.com/tutorials/how-to-create-a-pure-css-dropdown-menu](http://line25.com/tutorials/how-to-create-a-pure-css-dropdown-menu)

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T21:51:16.427

您所追求的实际上是可能的，尽管*我不建议您实际使用这种技术*。这无异于黑客攻击，语义上非常不正确，并且可能是 SEO 的噩梦。

考虑到这一点，我将把这项技术解释为概念证明：

首先确保你像这样组织你的**html**：

```
<nav>
    <ul>
        <li> 
            <label for='item-1'>main item 1</label>
            <input type="checkbox" id="item-1"/>
            <ul>
                <li><a href="#">sub 1</a></li>
                ...
            </ul>
        </li>
        ...
    </ul>
</nav> 
```

`:checked`选择器和兄弟选择器的一些巧妙使用`+`现在允许您模拟单击下拉菜单。相关的**CSS**如下所示：

```
/* we hide the checkboxes, they are just there to store the 'state' in the background */
/* their state will be triggered by clicking the corresponding label */
nav input[type="checkbox"] {
    display: none;
}
/* we hide the sub menu's by default */
nav > ul > li > ul {
   display: none;   
}
/* we show the sub menu, if it follows a checked checkbox */
nav input[type="checkbox"]:checked + ul {
   display: block;   
} 
```

对于一个工作示例，请检查我设置的小提琴：http: [//jsfiddle.net/Xj8Ce/](http://jsfiddle.net/Xj8Ce/)

# php - PDO：无效参数号：混合命名参数和位置参数

> ID：15888198
> 
> 赞同：15
> 
> 时间：2013-04-08T20:19:45.803
> 
> 标签：php, parameters, pdo

我遇到了以前从未见过的警告：

> 警告：PDOStatement::execute() [pdostatement.execute]: SQLSTATE[HY093]: 无效参数号：混合命名参数和位置参数...

参考下面的 PDO 查询（为了便于阅读，做了简化的功能）：

```
$offset = 0;
$limit = 12;
function retrieve_search_posts($searchfield, $offset, $limit){

        $where = array();

        $words = preg_split('/[\s]+/',$searchfield);

        array_unshift($words, '');
        unset($words[0]);

        $where_string = implode(" OR ", array_fill(0,count($words), "`post_title` LIKE ?"));

        $query = "
                                SELECT  p.post_id, post_year, post_desc, post_title, post_date, img_file_name, p.cat_id
                                FROM    mjbox_posts p
                                JOIN    mjbox_images i
                                ON      i.post_id = p.post_id
                                        AND i.cat_id = p.cat_id
                                        AND i.img_is_thumb = 1
                                        AND post_active = 1
                                WHERE $where_string
                                ORDER BY post_date
                                LIMIT :offset, :limit
                                DESC";
        $stmt = $dbh->prepare($query);

        foreach($words AS $index => $word){
            $stmt->bindValue($index, "%".$word."%", PDO::PARAM_STR);
        }
        $stmt->bindParam(':offset', $offset, PDO::PARAM_INT);
        $stmt->bindParam(':limit', $limit, PDO::PARAM_INT);
        $stmt->execute();

        $searcharray = $stmt->fetchAll(PDO::FETCH_ASSOC);

        return $searcharray;
    } 
```

函数和 PDO 查询在查询中不包含偏移量和限制变量的情况下可以正常工作。那么可能导致此警告的原因是什么？

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-08T20:36:49.013

改变

```
LIMIT :offset, :limit 
```

到

```
LIMIT ?, ? 
```

和

```
$stmt->bindParam(':offset', $offset, PDO::PARAM_INT);
$stmt->bindParam(':limit', $limit, PDO::PARAM_INT); 
```

到：

```
$stmt->bindValue($index+1, $offset, PDO::PARAM_INT);
$stmt->bindValue($index+2, $limit, PDO::PARAM_INT); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-08T20:26:07.620

在你使用的 where_string`?`中，这是一个位置参数，在你使用的 limit 和 offset`:`中，这是一个导致警告的命名参数，不要混合它们

# ios - 从调整大小的nsdata处理视网膜图像的正确方法是什么？

> ID：15888201
> 
> 赞同：3
> 
> 时间：2013-04-08T20:19:56.837
> 
> 标签：ios, uiimage, retina-display

当用户从他们的照片库中选择一张图片时，我正在调整它的大小，然后将其上传到我的服务器，然后在应用程序中的某个其他位置，用户可以查看他们的所有照片。（我正在简化工作流程）

“详细信息”屏幕上的 uiimageview 为 320 x 320。基于以下方法，我应该使用：

`UIImage *image = [UIImage imageWithCGImage:img];`

或者

`UIImage *image = [UIImage imageWithCGImage:img scale:[UIScreen mainScreen].scale orientation:img.imageOrientation];`

B 部分是当我请求下载图像（nsdata）时我应该使用`imageWithCGIImage`还是`imageWithCGIImage:scale:orientation`

```
- (UIImage *)resizedImageForUpload:(UIImage *)originalImage {

  static CGSize __maxSize = {640, 640};

  NSMutableData *data = [[NSMutableData alloc] initWithData:UIImageJPEGRepresentation(originalImage, 1.0)];

  CFMutableDataRef dataRef = (__bridge CFMutableDataRef)data;
  CGImageSourceRef imgSrc  = CGImageSourceCreateWithData(dataRef, NULL);

  CGFloat width = [originalImage maxDimensionForConstraintSize:__maxSize];

  NSNumber *maxWidth    = [NSNumber numberWithFloat:width];
  NSDictionary *options = @{
                            (__bridge NSString *)kCGImageSourceCreateThumbnailFromImageAlways : @YES,
                            (__bridge NSString *)kCGImageSourceCreateThumbnailWithTransform: @YES,
                            (__bridge NSString *)kCGImageSourceThumbnailMaxPixelSize : maxWidth
                            };

  CFDictionaryRef cfOptions     = (__bridge CFDictionaryRef)options;
  CGImageRef img                = CGImageSourceCreateThumbnailAtIndex(imgSrc, 0, cfOptions);
  CFStringRef type              = CGImageSourceGetType(imgSrc);
  CGImageDestinationRef imgDest = CGImageDestinationCreateWithData(dataRef, type, 1, NULL);

  CGImageDestinationAddImage(imgDest, img, NULL);
  CGImageDestinationFinalize(imgDest);

  UIImage *image = [UIImage imageWithCGImage:img];

  CFRelease(imgSrc);
  CGImageRelease(img);
  CFRelease(imgDest);

  return image;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T20:40:24.187

看来我已经找到了自己问题的答案。`resizeImageForUpload`不应尝试根据设备进行扩展。由于我定义了最大尺寸 640,640（我的 320,320 uiimageview 的视网膜尺寸），因此无需进行其他操作。我为图像添加了一些缓存，此时我正在处理缩放：

`UIImage *image = [UIImage imageWithData:imgData scale:[UIScreen mainScreen].scale];`

然后返回。我认为我搞砸了的原因是我试图缩放*已经*缩放的图像。得到教训。

# ruby-on-rails - Link_to 和 Ajax 请求 Rails

> ID：15888208
> 
> 赞同：0
> 
> 时间：2013-04-08T20:20:09.747
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, routes, instance-variables

希望我可以解释这一点，以便人们能够理解我想要实现的目标。目前我创建了多个帖子，它们显示在此 url 以供公众查看

```
/tynewyddnews 
```

与标准相反

```
/posts/:id 
```

仅对管理员用户可用

该页面分为 2 个，占据大部分页面的最新帖子和页面左侧列出的历史帖子，每个通过范围呈现略有不同

范围

```
scope :tynewydd_posts, :include => :department, :conditions => {"departments.name" => "Ty Newydd"}, :order => "posts.published_on DESC" 
```

最新的帖子

```
@tynewyddpostlatest = Post.tynewydd_posts.first 
```

历史帖子

```
tynewyddpost = Post.tynewydd_posts.reverse
tynewyddpost.pop
@tynewyddpost = tynewyddpost 
```

在我看来，我像这样渲染每个

左手边

```
<% @tynewyddpost.reverse.each do |t| %>
<%= link_to t.title, t %> 
```

主要的

```
<%= @tynewyddpostlatest.title %> 
```

我想要实现的是，当单击左侧帖子的链接时，它将通过 ajax 代替中心的主要帖子。到目前为止，我想出的东西在一定程度上起作用，标题和评论通过 ajax 调用呈现，但我点击的帖子的照片没有在视图中呈现，即使在萤火虫中它们显示为正在呈现.（尽管它们的大小为 0x0 像素）

左侧帖子

```
<% @tynewyddpost.reverse.each do |t| %>
<%= link_to t.title, tynewyddnews_path(:type => 'tynewyddnews'), :remote => true %>
<% end %> 
```

tynewyddnews.js.erb

```
<% if params[:type] == 'tynewyddnews' %>
 $('.post-item').html('<%= escape_javascript(render partial: 'tynewyddnewspost') %>');
<% end %> 
```

部分的

```
<div class="post-item">
  <% @tynewyddpost.each do |t| %>
   <h2><%= t.title %></h2>
    <div id="work-samples"> 
     <% for photo in t.photos %>
      <%= image_tag(photo.avatar.url(:news_images), :class => 'work-sample') %>
     <% end %>
   </div>  
  <p class="post-description"><%= t.comments.html_safe %></p><a class="post-more" href="#">Continue Reading&nbsp;&raquo;</a>
   <div class="post-item-panel">
      <ul>
       <li class="date">
        <p><%= date_output(t.published_on) %></p>
       </li>
      </ul>
  </div>
</div>
  <% end %> 
```

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:45:46.633

您可以先删除此行吗：

```
<%= @tynewyddpostlatest.title %> 
```

如果错误继续显示，请尝试。如果是这样，您可以删除：

```
<% @tynewyddpost.reverse.each do |t| %>
<%= link_to t.title, t %> 
```

错误是否仍然显示？

# ruby-on-rails - 对 Rails 中正确 BDD 方法的怀疑

> ID：15888211
> 
> 赞同：0
> 
> 时间：2013-04-08T20:20:22.573
> 
> 标签：ruby-on-rails, testing, tdd, bdd

我正在通过以下方式进行 BDD：

> -> 创建 Cucumber 场景（用于集成测试）
> -> 创建所需的模型 Rspe 单元测试
> 
> --> 回到 Cucumber 场景。

但是，我听说使用单元测试（例如使用 Rspec）来测试控制器也很好。我想知道这是一个好主意，还是测试“太多”。例如，著名的[Rails Tutorial](http://ruby.railstutorial.org/)不做控制器测试，它只做集成测试（直接使用 Rspec）和模型单元测试（也使用 Rspec）。

那么，对此有什么建议吗？什么是好方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T21:17:23.710

当然，这是一个颇受争议的问题，但这里有一篇重要的博客文章详细介绍了测试控制器的论点：

[http://solnic.eu/2012/02/02/yes-you-should-write-controller-tests.html](http://solnic.eu/2012/02/02/yes-you-should-write-controller-tests.html)

# android - 如何使用两个不同的活动将数据放在两个不同的表中

> ID：15888212
> 
> 赞同：0
> 
> 时间：2013-04-08T20:20:22.677
> 
> 标签：android, http, android-layout, android-intent, http-headers

在我的应用程序的第一个活动中，我使用以下代码将数据存储到 mysql 中。Java代码：

```
public class MainActivity extends Activity {

EditText et;
Button b;
InputStream is;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    et = (EditText) findViewById(R.id.editText1);
    b = (Button) findViewById(R.id.button1);

    b.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub

            String name = et.getText().toString();
            ArrayList<NameValuePair> params = new ArrayList<NameValuePair>();
            params.add(new BasicNameValuePair("name", name));

            try {
                HttpClient httpclient = new DefaultHttpClient();
                HttpPost httppost = new HttpPost("http://10.0.2.2/insert1.php");
                httppost.setEntity(new UrlEncodedFormEntity(params));
                HttpResponse response = httpclient.execute(httppost);
                HttpEntity entity = response.getEntity();
                is = entity.getContent();
                Toast.makeText(getBaseContext(), "Congrats! ur added", Toast.LENGTH_LONG).show();

                Intent mainpage = new Intent("com.example.test.PLACE");
                startActivity(mainpage);
            } catch (Exception e) {
                e.printStackTrace();
                Toast.makeText(getBaseContext(), "Not connected to DataBase", Toast.LENGTH_LONG).show();
            }

        }
    });

} 
```

为了简单起见，我在这里只使用了一个字段。现在我尝试在其他活动中从用户那里获取另一个字段，并尝试使用上述代码的相同概念将其存储在不同的表中。但它没有被存储。任何人都可以在这个问题上帮助我.. 我尝试了很长时间它不起作用。请帮助我。下面给出了我在其他中使用的其他 java 代码。我想要的是我需要在不同的活动中获取名称和位置，并且我想将它们存储在不同的表中。请帮助我..

```
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.place);

    t = (EditText) findViewById(R.id.editText1);

    tv = (TextView) findViewById(R.id.textView1);

    View bb = (Button) findViewById(R.id.button1);
    bb.setOnClickListener(this);

}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    String place = t.getText().toString();
    ArrayList<NameValuePair> namevalueparams = new ArrayList<NameValuePair>();
    namevalueparams.add(new BasicNameValuePair("place", place));

    try {
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://10.0.2.2/insert11.php");
        httppost.setEntity(new UrlEncodedFormEntity(namevalueparams));
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        iss = entity.getContent();
        Toast.makeText(getBaseContext(), "Congrats! ur added", Toast.LENGTH_LONG).show();

    } catch (Exception e) {
        e.printStackTrace();
        Toast.makeText(getBaseContext(), "Not connected to DataBase", Toast.LENGTH_LONG).show();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:49:25.130

好吧，您在上面的代码中调用了 insert1.php，在下面的代码中调用了 insert11.php。如果第一个有效而第二个无效，则必须与您的两个不同 PHP 中的内容有所不同。

期望不同的代码库有不同的结果:)

# javascript - jquery - 一旦另一个函数返回一个值，如何继续执行一个函数

> ID：15888214
> 
> 赞同：0
> 
> 时间：2013-04-08T20:20:24.750
> 
> 标签：javascript, jquery, callback, return, promise

我目前有一个名为 showAuthorInfo 的函数，它执行动画，然后在动画完成后执行一些其他代码逻辑：

```
self.showAuthorInfo = function(){
  var authorID = $authorLink.attr('data-author-id'); //PL-INT - determine what info needs be captured here
  var isActive = $modalInfoWindow.hasClass('active');
  self.$modalInfoWindow.animate({ 'bottom': '0px' },200,function(){

    self.$modalInfoWindow.addClass('active');
    self.loadAuthorInfo(authorID);

  })

} 
```

但是，因为我想通过各种函数调用显示和隐藏这个模态窗口，每次动画完成时执行不同的回调，我想将动画包装成一个函数。问题是，我可以使用上述函数调用发生动画的自定义函数，并让该动画函数向该函数返回一个值，然后它可以继续执行吗？

我会将函数分解为多个函数，但我觉得这可能会变得复杂，尤其是因为我必须传递某些不适用于所有情况的特定于函数的参数（例如，在上面的代码中，如果我将调用一个动画函数，然后调用一个 loadAuthorInfo 函数，动画函数必须接受 authorID，以便它可以将其传递给 loadAuthorInfo，即使动画函数只需要 authorID（如果它由 showAuthorInfo 调用）。

这里有什么建议吗？

我宁愿不做的例子：

```
self.showAuthorInfo = function(){
  var authorID = $authorLink.attr('data-author-id'); //PL-INT - determine what info needs be captured here
  var callback = self.displayAuthorContent();
  self.animateInfoWindow(authorID,callback);
}

self.animateInfoWindow = function(authorID,callback){
  self.$modalInfoWindow.animate({ 'bottom': '0px' },200,function(){

    //create conditional where if there's an authorID, pass it to the callback function, otherwise just call the callback function without parameters

  })
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T03:06:08.107

Mheavers，您已用 标记了您的问题`promise`，这意味着您的思路是正确的。

*jQuery 允许从 jQuery 集合中形成临时*承诺`$(selector).promise(type, target)`，通常在较长的方法链的末尾带有 ，这可能很少有人理解。`type`默认为“fx”（标准动画队列），目标是可选的（此处不相关）。

因此，`self.animateInfoWindow`在它开始的动画完成后，可能会幸福地不知道会发生什么。它需要做的就是返回上述类型的承诺，从而允许在`self.animateInfoWindow`调用位置进行链接。

```
self.animateInfoWindow = function() {
    return self.$modalInfoWindow.animate({'bottom':'0px'}, 200).promise();
}; 
```

并且`self.showAuthorInfo`可以在不传递任何参数的情况下执行动画后操作`self.animateInfoWindow`。

```
self.showAuthorInfo = function() {
    var authorID = $authorLink.data('authorId') || null; //PL-INT - determine what info needs be captured here
    self.animateInfoWindow().done(function() {
        self.$modalInfoWindow.addClass('active');
        self.loadAuthorInfo(authorID);
  });
}; 
```

注意，`|| null`在第一行中确保`authorID`不是`undefined`. （如果 0（零）的 authorId 有效，则稍微复杂一些）。

唯一的另一件事是确保`self.loadAuthorInfo`被通过`null`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T20:55:25.953

您可以将回调传递给动画并避免不必要的函数包装：

```
 self.showAuthorInfo = function(){
      var authorID = $authorLink.attr('data-author-id'); //PL-INT - determine what info needs be captured here
      var callback = self.displayAuthorContent();
      self.animateInfoWindow(authorID,function(){
        //do something here
      });
    }

    self.someOtherFunction = function(){
      var authorID2 = $authorLink2.attr('data-author-id2'); //PL-INT - determine what info needs be captured here
      var callback2 = self.displayAuthorContent2();
      self.animateInfoWindow(authorID2,function(){
        //do something different
      });
    }

    self.animateInfoWindow = function(authorID,callback){
      self.$modalInfoWindow.animate({ 'bottom': '0px' },200,callback)
    } 
```

这是一个小提琴：http: [//jsfiddle.net/95kwD/](http://jsfiddle.net/95kwD/)

我真的不知道你想完成什么：

```
var callback = self.displayAuthorContent(); 
```

您在调用函数之前调用回调，这是回调函数的全部目的。也许它只是函数`var`iable的名称

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T21:13:29.967

如果你想让 animateWindow 尽可能通用，那么只需一个回调并且没有参数。回调可以更具上下文感知能力以提供灵活性。

```
self.showAuthorInfo = function(){
   var authorID = $authorLink.attr('data-author-id');
   var customCallback = function(){
       self.loadAuthorInfo(authorID);
   };
   self.animateInfoWindow(customCallback);
}
self.animateInfoWindow = function(callback){
   self.$modalInfoWindow.animate({ 'bottom': '0px' },200,callback);
} 
```

# javascript - 比较 JavaScript 中的两个函数

> ID：15888223
> 
> 赞同：0
> 
> 时间：2013-04-08T20:18:15.420
> 
> 标签：javascript, comparison, function

我正在为我妻子的一年级班级开发一个移动应用程序，以便他们可以练习视觉词汇。我是 JavaScript 的新手，但我能够实现我的第一个目标，即获取一个 JavaScript 数组并从中提取一个随机单词。我的第二个目标是让用户输入他们看到的单词，单击一个按钮并将他们输入的单词与随机单词进行比较。我试图用第二个函数来做到这一点，但它没有做到。我在控制台中没有收到任何错误，所以我对如何让它工作有点迷茫。我和一大群一年级学生将不胜感激任何帮助。这是我到目前为止的代码。

```
<!DOCTYPE html>
<html>
<body>
<h1>Practice Spelling Test</h1>
<p id="aWord"></p>

<input id="yourTurn">

<button onclick="myFunction()">New Word</button>
<button onclick="checkSpelling()">Check My Spelling</button>

<p id="result"></p>

<script>

var sightWord = ["hoof", "hook", "shook", "hood", "wood", "took", "book", "good", "food", "mood", "look"];
var yourTurn = document.getElementById("yourTurn").value;
var aWord = document.getElementById("aWord").value;
var checkWord = (yourTurn == aWord)?"Nice Job!":"So close! Try again!";

function myFunction() {
    var showWord = sightWord[Math.floor((Math.random()*10)+1)];
    aWord.innerHTML = showWord;
}

function checkSpelling(result) {
    document.getElementById("result").innerHTML=checkWord;
}

</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:31:17.900

问题是您`checkWord`只评估一次，当浏览器运行您的 JavaScript 时。

所以，`checkWord`变量总是“干得好！”。

另一个问题是你`value`在一个`p`元素上使用。`p`元素没有这样的属性。

最后一个问题是您将 2 个值与`==`. 这还不够，因为`"" == undefined`，`undefined`作为元素返回`value`的内容。`p`

总而言之，您想`checkWord`每次都进行评估，并且想将苹果与苹果进行比较。这将导致这种代码：

```
function checkSpelling(result) {
    var yourTurn = document.getElementById("yourTurn").value;
    var aWord = document.getElementById("aWord").innerHTML;
    var checkWord = (yourTurn == aWord)?"Nice Job!":"So close! Try again!";
    document.getElementById("result").innerHTML=checkWord;
} 
```

最后一件事：我在`innerHTML`那里使用，但它很糟糕。你不想要 HTML，你想要文本。最好使用`textContent`, 或`innerText`在较旧的 IE（6、7、8）上。如果您不想担心这种跨浏览器的混乱，请使用库来抽象出所有这些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T20:32:51.690

你混在一起`value`了`innerHTML`。

`value`用于`input`和`textarea`元素，`innerHTML`几乎用于其他元素

此代码将为您工作：

```
<!DOCTYPE html>
<html>
<body>
<h1>Practice Spelling Test</h1>
<p id="aWord"></p>

<input id="yourTurn">

<button onclick="myFunction()">New Word</button>
<button onclick="checkSpelling()">Check My Spelling</button>

<p id="result"></p>

<script>

var sightWord = ["hoof", "hook", "shook", "hood", "wood", "took", "book", "good", "food", "mood", "look"];
var yourTurn = document.getElementById("yourTurn");
var aWord = document.getElementById("aWord");

function myFunction() {
    var showWord = sightWord[Math.floor((Math.random()*10)+1)];
    aWord.innerHTML = showWord;
}

function checkSpelling(result) {

  var checkWord = (yourTurn.value == aWord.innerHTML)?"Nice Job!":"So close! Try again!";
    document.getElementById("result").innerHTML=checkWord;
}

</script>

</body>
</html> 
```

在此处查看实时代码：http: [//jsbin.com/ubofus/1/edit](http://jsbin.com/ubofus/1/edit)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T20:44:16.937

好的，我让它为你工作。我在 JS Fiddle 中有它：http: [//jsfiddle.net/D6ERg/4/](http://jsfiddle.net/D6ERg/4/)

```
<!DOCTYPE html>
<html>
<body>
<h1>Practice Spelling Test</h1>
<p id="aWord"></p>

<input id="yourTurn">

<button onclick="window.wordApp.newWord()">New Word</button>
<button onclick="window.wordApp.checkSpelling()">Check My Spelling</button>

<p id="result"></p>

<script>

window.wordApp = (function() {
    var sightWord = ["hoof", "hook", "shook", "hood", "wood", "took", "book", "good", "food", "mood", "look"];
    var aWord = document.getElementById("aWord");

    return {
        newWord : function() {
            var showWord = sightWord[Math.floor((Math.random()*10)+1)];
            aWord.innerText = showWord;
        },
        checkSpelling : function() {
            var yourTurn = document.getElementById("yourTurn").value;
            var checkWord = (yourTurn == aWord.innerText)?"Nice Job!":"So close! Try again!";
            document.getElementById("result").innerHTML=checkWord;

        }
    }

})();
</script>

</body>
</html> 
```

你有很多问题。更新的东西需要在函数中。我还删除了全局变量以获得最佳实践和更轻松的调试。

功能（） {}）（）; 设计模式现在对你来说可能太高级了，但你可以查看闭包或观看视频 Paul Irish 谈论 jQuery 的工作原理。你会学到很多东西。Crockford 的 Javascript The Good Parts 一书也是我希望在开始时阅读的一本书。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T20:31:24.580

稍微清理了你的代码，也摆弄了一下：http: [//jsfiddle.net/3Ptzu/](http://jsfiddle.net/3Ptzu/)

```
var sightWord = ["hoof", "hook", "shook", "hood", "wood", "took", "book", "good", "food", "mood", "look"];

var yourTurn = document.getElementById("yourTurn").value;
var aWord = document.getElementById("aWord").value;

function myFunction() {
   var showWord = sightWord[Math.floor((Math.random()*10)+1)];
   document.getElementById("aWord").innerHTML = showWord;
}

function checkSpelling(result) {
    var challengeWord = document.getElementById("aWord").innerHTML;
    var checkWord = document.getElementById("yourTurn").value;

    var result = (challengeWord == checkWord) ? "Nice Job!":"So close! Try again!";
    document.getElementById("result").innerHTML = result;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T20:34:10.600

[这个避免了内联脚本](http://jsfiddle.net/QtESD/)：

HTML

```
<h1>Practice Spelling Test</h1>

<p id="aWord"></p>
<input id="yourWord">
<button id="newWord">New Word</button>
<button id="spellCheck">Check My Spelling</button>
<p id="result"></p> 
```

JS

```
//list of words
var sightWord = ["hoof", "hook", "shook", "hood", "wood", "took", "book", "good", "food", "mood", "look"];
//variable containing the current word
var currentWord;
//reference to the "congrats" box
var result = document.getElementById('result');
//reference to the input
var yourWord = document.getElementById('yourWord');

//when new word is clicked
document.getElementById('newWord').onclick = function () {
  //get a new word from the list
  aWord.innerHTML = currentWord = sightWord[Math.floor((Math.random() * 10) + 1)];
}

//when spell check is clicked
document.getElementById('spellCheck').onclick = function () {
  //compare and announce accordingly
  var check = (yourWord.value === currentWord) ? "Nice Job!" : "So close! Try again!";
  result.innerHTML = check;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-08T20:50:23.873

`innerHTML`和之间有区别`value`；这`value`实际上是`input`标签的一个属性。这是处理此问题的跨浏览器方法，无需任何内联 JavaScript：

```
<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
        <title>Practice Spelling Test</title>
        <meta charset="UTF-8" />
        <script>
            (function(d){
                var modern = (d.addEventListener) ? true : false, load = function(fn){
                    if(modern) {
                        d.addEventListener("DOMContentLoaded", fn, false);
                    } else {
                        d.attachEvent("onreadystatechange", function(){
                            if(d.readyState === "complete") {
                                fn();
                            }
                        });
                    }
                }, event = function(obj, evt, fn){
                    if(modern) {
                        obj.addEventListener(evt, fn, false);
                    } else {
                        obj.attachEvent("on" + evt, fn);
                    }
                }, init = function(){
                    var sightWord = ["hoof", "hook", "shook", "hood", "wood", "took", "book", "good", "food", "mood", "look"], newWordButton = d.getElementById("newWord"), checkSpellButton = d.getElementById("checkSpell"), aWord = d.getElementById("aWord"), yourTurn = d.getElementById("yourTurn"), result = d.getElementById("result"), lastWord = null, newWord = function(){
                        var count = Math.floor(Math.random()*(sightWord.length - 1));
                        if(count == lastWord) {
                            newWord();
                        } else {
                            aWord.innerHTML = sightWord[count];
                            lastWord = count;
                        }
                    }, checkSpell = function(){
                        var curr = aWord.innerHTML, input = yourTurn.value;
                        if(curr && input) {
                            result.innerHTML = (curr == input) ? "Nice Job!" : "So close! Try again!";
                        }
                    };
                    event(newWordButton, "click", newWord);
                    event(checkSpellButton, "click", checkSpell);
                };
                load(init);
            })(document);
        </script>
    </head>
    <body>
        <h1>Practice Spelling Test</h1>
        <p id="aWord">&nbsp;</p>
        <input id="yourTurn" type="text" />
        <button id="newWord">New Word</button>
        <button id="checkSpell">Check My Spelling</button>
        <p id="result"></p>
    </body>
</html> 
```

# ruby-on-rails - 如何轻松移除 Rails 引擎？

> ID：15888226
> 
> 赞同：2
> 
> 时间：2013-04-08T20:21:06.690
> 
> 标签：ruby-on-rails, aop, rails-engines

我希望引擎能够让我轻松地在应用程序中添加或删除功能。但是，每当我看到如何使用引擎时，没有人谈论干净地禁用/卸载/卸载它们。我怎样才能做到这一点？

该案例将是一个非常相似的应用程序产品线。我将开始开发具有大多数功能的变体，然后通过禁用功能来获取应用程序的其他变体。

我希望这有点像 AOP 中的方面，我可以在其中声明依赖项（在两个方向上），这样当我想删除方面/引擎时，连接到该引擎的所有代码都被删除/禁用。每当我尝试使用 Rails 引擎执行此操作时，都必须有很多纠缠不清的自定义代码（例如，当在视图中使用引擎的某些部分时）。

# c# - 单击子菜单项后返回母版页

> ID：15888228
> 
> 赞同：0
> 
> 时间：2013-04-08T20:21:18.843
> 
> 标签：c#

我有一个母版页，其中有菜单列表项：- 添加员工、添加地点、添加时间表、设置、发票。设置的子菜单项有：- 一般设置、用户、角色、分包商。我担心的是当我点击 General Setting 时，我的整个页面的用户都会被回复。我不希望这种情况发生。相反，我只想要需要刷新/更改的内容。我的第二个问题是：- 当我从常规设置转到用户时，所有设置页面上显示的所有设置子菜单项是如何发生的。

上述问题的任何快速/简单的解决方案？

请帮忙。

![在此处输入图像描述](https://i.stack.imgur.com/PoKee.png)

![在此处输入图像描述](https://i.stack.imgur.com/iyqqx.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T22:41:57.207

你有两个选择：

1.  使用 ASP.NET 标记来使用 Ajax 异步更改选项卡。

2.  （更好）使用像 JQuery 或 Dojo 这样的 javascript 框架在 javascript 中创建效果。（请注意，Microsoft 在较新的 Web 模板中包含 JQuery）

# jquery - 如何在 jquery 回调中更改“this”

> ID：15888229
> 
> 赞同：1
> 
> 时间：2013-04-08T20:21:20.543
> 
> 标签：jquery, plugins, this

我编写了一个 jQuery 插件，它在 div 中输入一个数字，然后将其计数。我试图添加一个回调，所以当它完成时，它会从下一个 div 开始。

当它开始处理下一个 div 时，它首先重置当前 div 中的数字，然后按预期继续下一个 div。我怀疑它与在插件内部使用“this”有关。

[这是一个完整的（非）工作示例 -->](http://codepen.io/sheepysheep60/pen/DnJit)

我该如何防止这种情况发生？谢谢

我的插件：

```
(function( $ ) {
$.fn.countUp = function(options) {

    var settings = $.extend( {
        'startFrom'     : 0,
        'countTo'       : Number(this.text()),
        'start'         : 10,
        'frequency'     : 200,
        'jump'          : 1,
        'target'        : this,
        'log'           : false,
        'callback'      : ''
    }, options);

    var intRegex = /^\d+$/;
    if(intRegex.test(settings.countTo) && intRegex.test(settings.startFrom) ) {
        // Both settings are integers, get started:
        if(settings.startFrom<settings.countTo){
            offset = settings.jump;
        }else{
            offset = -1 * settings.jump;
        }
        current_number = settings.startFrom;
        settings.target.html(current_number);

        checkNumber();
        var timer;
        function checkNumber(){
            if(offset<0){
                if(current_number <= settings.countTo)
                {
                    current_number = settings.counTo;
                    clearTimeout(timer);
                    if (typeof settings.callback == 'function') { // make sure the callback is a function
                        settings.callback.call(this); // brings the scope to the callback
                    }
                }
                else
                {
                    current_number += offset;
                    timer=setTimeout(function(){checkNumber()},settings.frequency);
                }
            }else{
                if(current_number >= settings.countTo)
                {
                    current_number = settings.counTo;
                    clearTimeout(timer);
                    if (typeof settings.callback == 'function') { // make sure the callback is a function
                        settings.callback.call(this); // brings the scope to the callback
                    }
                }
                else
                {
                    current_number += offset;
                    timer=setTimeout(function(){checkNumber()},settings.frequency);
                }
            }
            settings.target.html(current_number);
            if(settings.log){console.log(settings.target.attr('id'))};
        }   

    }else{
       if(settings.log){console.log('From countUp: Please use an integer for startFrom and countTo arguments.');}
    }
};
})( jQuery ); 
```

这就是我所说的：

```
$(document).ready(function(){
    $("#output").countUp({
        'log' : true,
        'callback' : call2
    });

    function call2(){
        $("#output2").countUp({
            'log' : true,
            'callback' : call3
        });
    }

    function call3(){
        $("#output3").countUp({'log' : true});
    }
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:25:10.230

在设置为的范围之外创建一个变量`this`

```
var $this = this; 
```

如果我正确阅读问题，那将解决问题。`this`将被函数范围覆盖。

**更新**

仅供参考，您的代码中有一个错字：

```
current_number = settings.counTo; 
```

我认为应该是`settings.countTo`？

**编辑代码**

```
(function( $ ) {
$.fn.countUp = function(options) {

    var $this = this;

    var settings = $.extend( {
        'startFrom'     : 0,
        'countTo'       : Number($this.text()),
        'start'         : 10,
        'frequency'     : 200,
        'jump'          : 1,
        'target'        : $this,
        'log'           : false,
        'callback'      : ''
    }, options);

    var intRegex = /^\d+$/;
    if(intRegex.test(settings.countTo) && intRegex.test(settings.startFrom) ) {
        // Both settings are integers, get started:
        if(settings.startFrom<settings.countTo){
            offset = settings.jump;
        }else{
            offset = -1 * settings.jump;
        }
        current_number = settings.startFrom;
        settings.target.html(current_number);

        checkNumber();
        var timer;
        function checkNumber(){
            if(offset<0){
                if(current_number <= settings.countTo)
                {
                    current_number = settings.counTo;
                    clearTimeout(timer);
                    if (typeof settings.callback == 'function') { // make sure the callback is a function
                        settings.callback.call($this); // brings the scope to the callback
                    }
                }
                else
                {
                    current_number += offset;
                    timer=setTimeout(function(){checkNumber()},settings.frequency);
                }
            }else{
                if(current_number >= settings.countTo)
                {
                    current_number = settings.counTo;
                    clearTimeout(timer);
                    if (typeof settings.callback == 'function') { // make sure the callback is a function
                        settings.callback.call($this); // brings the scope to the callback
                    }
                }
                else
                {
                    current_number += offset;
                    timer=setTimeout(function(){checkNumber()},settings.frequency);
                }
            }
            settings.target.html(current_number);
            if(settings.log){console.log(settings.target.attr('id'))};
        }   

    }else{
       if(settings.log){console.log('From countUp: Please use an integer for startFrom and countTo arguments.');}
    }
};
})( jQuery ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T22:44:45.967

一些变量是从设置中创建的，但是它们没有被清除。通过在这些变量中的每一个前面添加 var ，作用域就留在了函数内部并解决了问题。

```
(function( $ ) {
$.fn.countUp = function(options) {

var settings = $.extend( {
    'startFrom'     : 0,
    'countTo'       : Number(this.text()),
    'start'         : 10,
    'frequency'     : 200,
    'jump'          : 1,
    'target'        : this,
    'log'           : false,
    'callback'      : ''
}, options);

var intRegex = /^\d+$/;
if(intRegex.test(settings.countTo) && intRegex.test(settings.startFrom) ) {
    // Both settings are integers, get started:
    if(settings.startFrom<settings.countTo){
        offset = settings.jump;
    }else{
        offset = -1 * settings.jump;
    }
    current_number = settings.startFrom;
    settings.target.html(current_number);

    checkNumber();
    var timer;
    function checkNumber(){
        if(offset<0){
            if(current_number <= settings.countTo)
            {
                current_number = settings.counTo;
                clearTimeout(timer);
                if (typeof settings.callback == 'function') { // make sure the callback is a function
                    settings.callback.call(this); // brings the scope to the callback
                }
            }
            else
            {
                current_number += offset;
                timer=setTimeout(function(){checkNumber()},settings.frequency);
            }
        }else{
            if(current_number >= settings.countTo)
            {
                current_number = settings.counTo;
                clearTimeout(timer);
                if (typeof settings.callback == 'function') { // make sure the callback is a function
                    settings.callback.call(this); // brings the scope to the callback
                }
            }
            else
            {
                current_number += offset;
                timer=setTimeout(function(){checkNumber()},settings.frequency);
            }
        }
        settings.target.html(current_number);
        if(settings.log){console.log(settings.target.attr('id'))};
    }   

}else{
   if(settings.log){console.log('From countUp: Please use an integer for startFrom and countTo arguments.');}
}
};
   })( jQuery ); 
```

# c - 将纬度和经度值分配给像素

> ID：15888230
> 
> 赞同：0
> 
> 时间：2013-04-08T20:21:22.690
> 
> 标签：c, geocoding, latitude-longitude

这是我一段时间以来一直试图解决的问题。我有一个二进制文件，经过处理后，我得到一个二进制 bmp 文件，即像素只有两个值。现在，我有以下 HDR 文件：

```
ENVI
description = {
PolSARpro File Imported to ENVI}
samples = 2618
lines   = 2757
bands   = 1
header offset = 0
file type = ENVI Standard
data type = 4
interleave = bsq
byte order = 0
map info = {UTM, 1, 1, 399711.555, 2641320.529, 12.500, 12.500, 45, North, WGS-84}
wavelength units = meters
band names = {
SPF_L1.bin } 
```

由 ENVI 和 PolSARPro 生成。我面临的问题是像 ENVI 这样的软件会计算每个像素的纬度和经度值，而我无法在我的程序中找到任何复制相同像素的方法（我使用 C，使用 PolSARPro 的源文件作为基础）。如果有人可以通过解释如何分配位置信息来帮助我，将不胜感激！

PS：从我的角度来看，地图信息 -`lists geographic coordinates information in the order of projection name (UTM), reference pixel x location in file coordinates, pixel y, x pixel size, y pixel size, Projection Zone, North or South for UTM only.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:31:47.300

看起来所有信息都可以做你想做的事。

你有一个像素大小（我想是米）和一个参考。获取特定像素的坐标涉及将参考坐标偏移适当的量（12.5 米乘以像素数）。看起来两个方向都是一样的。

`399711.555`和`2641320.529`是 UTM 中的东向和北向坐标。（印度钢铁城附近？）

不过，您需要进行另一次转换才能获得纬度/经度。

# java - 捆绑并放置Extra

> ID：15888233
> 
> 赞同：2
> 
> 时间：2013-04-08T20:21:24.837
> 
> 标签：java, android

我是新学习者

当我从我买的书中复制练习代码时，它告诉我 putExtra 没有为 Bundle 定义

我可以改用 putLong 吗？或者是什么？

```
public class ReminderEditActivity extends FragmentActivity {
@Override
public void onCreate (Bundle savedInstanceState) {
    super.onCreate (savedInstanceState);
    setContentView (R.layout.reminder_edit_activity);
    Fragment fragment = getSupportFragmentManager().findFragmentByTag(ReminderEditFragment.DEFAULT_EDIT_FRAGMENT_TAG);
    if (fragment == null) {
    fragment = new ReminderEditFragment();
    Bundle args = new Bundle();
    args.putExtra(ReminderProvider.COLUMN_ROWID, getIntent().getLongExtra(ReminderProvider.COLUMN_ROWID, 0L));
    fragment.setArguments(args);

    FragmentTransaction transaction = getSupportFragmentManager ().beginTransaction();
    transaction.add (R.id.edit_container, fragment, ReminderEditFragment.DEFAULT_EDIT_FRAGMENT_TAG);
    transaction.commit();
    }

} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T20:24:44.430

是的，你可以试试 putLong 方法，Bundle 没有 putExtra()。putLong(String key, long value) - 将 long 值插入此 Bundle 的映射中，替换给定键的任何现有值。选中此项以查看所有 Bundle 方法： [Bundle](http://developer.android.com/reference/android/os/Bundle.html)

# c# - C#中的线程安全增量

> ID：15888234
> 
> 赞同：9
> 
> 时间：2013-04-08T20:21:25.320
> 
> 标签：c#, multithreading, thread-safety, increment

我正在尝试在 C# 的列表中增加一个元素，但我需要它是线程安全的，因此计数不会受到影响。

我知道您可以对整数执行此操作：

`Interlocked.Increment(ref sdmpobjectlist1Count);`

但这不适用于列表我到目前为止有以下内容：

```
lock (padlock)
{
     DifferenceList[diff[d].PropertyName] = DifferenceList[diff[d].PropertyName] + 1;
} 
```

我知道这行得通，但我不确定是否有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:56:05.320

正如 David Heffernan 所说，ConcurrentDictionary 应该提供更好的性能。但是，性能增益可能可以忽略不计，具体取决于多个线程尝试访问缓存的频率。

```
using System;
using System.Collections.Concurrent;
using System.Threading;

namespace ConcurrentCollections
{
    class Program
    {
        static void Main()
        {
            var cache = new ConcurrentDictionary<string, int>();

            for (int threadId = 0; threadId < 2; threadId++)
            {
                new Thread(
                    () =>
                    {
                        while (true)
                        {
                            var newValue = cache.AddOrUpdate("key", 0, (key, value) => value + 1);
                            Console.WriteLine("Thread {0} incremented value to {1}",
                                Thread.CurrentThread.ManagedThreadId, newValue);
                        }

                    }).Start();
            }

            Thread.Sleep(TimeSpan.FromMinutes(2));
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T22:10:36.797

如果您使用 a`List<int[]>`而不是 a `List<int>`，并且列表中的每个元素都是一个单项数组，那么您将能够做到`Increment(ref List[whatever][0])`并使其成为原子的。如果定义一个可以稍微提高存储效率

```
class ExposedFieldHolder<T> {public T Value;} 
```

然后使用 a `List<ExposedFieldHolder<int>>`and 语句`Increment(ref List[whatever].Value)`来执行增量。如果内置类型提供了一种将项目公开为 a 的方法，`ref`或者允许派生类对它们的内部进行足够的访问以自己提供这种能力，那么事情可能会更有效。但是，它们没有，因此必须要么从头开始定义自己的集合类型，要么将每个项目封装在其自己的类对象中[使用数组或包装类]。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-08T20:34:48.630

检查您锁定在“padLock”上的变量，通常，您可以将其定义为`private static Object padLock = new Object()`. 如果您不将其定义为静态，则每个对象都有自己的副本，因此它将不起作用。

# java - 如何在 mouseExit 事件的一定毫秒数后取消选择 jList 中的项目

> ID：15888244
> 
> 赞同：1
> 
> 时间：2013-04-08T20:21:46.887
> 
> 标签：java, swing, timer, jlist, listselectionlistener

我有一个名为`todoList`

当用户单击列表中的某个项目时，它会保持选中状态。但是我希望列表中当前选定的项目在鼠标退出 jList 400 毫秒后取消选择“自行”。

仅当列表中已选择某些内容时才必须运行。

我正在使用 Netbeans IDE，这是迄今为止尝试过的：

```
private void todoListMouseExited(java.awt.event.MouseEvent evt) {                                     
    if (!todoList.isSelectionEmpty()) {
        Thread thread = new Thread();
        try {
            thread.wait(400L);
            todoList.clearSelection();
        } catch (InterruptedException ex) {
            System.out.println(ex);
        }
    }
} 
```

和

```
 private void todoListMouseExited(java.awt.event.MouseEvent evt) {                                     
    if (!todoList.isSelectionEmpty()) {
        Thread thread= Thread.currentThread();
        try {
            thread.wait(400L);
            todoList.clearSelection();
        } catch (InterruptedException ex) {
            System.out.println(ex);
        }
    }
} 
```

这些都只是让一切都停止工作。

我的过程是我需要创建一个等待 400 毫秒的新线程，然后运行 ​​jList 的 clearSelection() 方法。每次鼠标退出列表时都会发生这种情况，并且仅当列表中有已被选中的内容时才会运行。

我希望我足够彻底地解释我的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T20:32:06.493

问题是您阻塞了 AWT-Event-Thread。

解决方案是使用[摇摆计时器](http://docs.oracle.com/javase/6/docs/api/javax/swing/Timer.html)：

```
private void todoListMouseExited(java.awt.event.MouseEvent evt) 
{
   if (!todoList.isSelectionEmpty()) {
        new Timer(400, new ActionListener() {
              public void actionPerformed(ActionEvent evt) {
                  todoList.clearSelection();
              }
        }).start();
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T20:26:55.880

问题是`Object#wait`正在等待（而不是*sleep*）被通知，但这并没有发生。相反，超时导致`InterruptedException`绕过对`clearSelection`.

不要`Threads`在`Swing`应用程序中使用 raw。而是使用`Swing Timer`旨在与 Swing 组件交互的 a。

```
if (!todoList.isSelectionEmpty()) {
   Timer timer = new Timer(400, new ActionListener() {
      public void actionPerformed(ActionEvent evt) {
         todoList.clearSelection();
      }
   });
   timer.setRepeats(false);
   timer.start();
} 
```

# matlab - 根据matlab中的分布选择数据

> ID：15888245
> 
> 赞同：2
> 
> 时间：2013-04-08T20:21:47.867
> 
> 标签：matlab, random, distribution, normal-distribution

我在向量中有一组数据。如果我要绘制数据的直方图，我可以（通过巧妙的检查）看到数据分布为三个分布的总和；

一个以 x_1 为中心的正态分布，方差为 s_1；一个以 x_2 为中心的正态分布，方差为 s_2；一次对数正态分布。

我的数据显然是“真实”数据的一个子集。

我想做的是从我的数据中取出我的数据的一个随机子集，确保生成的子集是原始数据的合理代表性样本。

我想在 matlab 中尽可能容易地做到这一点，但对统计和 matlab 都是新手，我不确定从哪里开始。

感谢您的任何帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T01:24:29.557

如果您可以识别 3 个分布中的每一个（从某种意义上说，您可以估计它们的参数），一种方法可能是选择数据的随机子集，然后尝试估计每个分布的参数并查看它们是否足够接近（根据您自己对“关闭”的定义）原始分布的参数。您应该多次重复此过程并查看给定随机子集大小的平均差异。

# xml - 仅计算特定元素

> ID：15888246
> 
> 赞同：-2
> 
> 时间：2013-04-08T20:21:49.240
> 
> 标签：xml, xslt

编辑：对不起，这个问题有点不清楚，我试图在计算单个 p 节点的同时返回 p 节点及其子节点中的所有文本。所以 <1> 指第一个 p 节点， <2> 指第二个，依此类推。

我试图计算单个元素的出现，无论它出现在 xml 文档的结构中的哪个位置。我已经尝试过使用和不使用 for-each 循环的 position() 和 count() 的变体，但似乎找不到任何可行的方法。任何人都知道如何做到这一点？

一个示例文档是：

```
<text>
   <body>
     <div1>
       <p>abc</p>
         <div2>
           <p>def</p>
         </div2>
     </div1>
     <div1>
       <p>ghi</p>
         <div2>
           <p>jkl <name>adam</name></p>
           <div3>
              <p>mno</p>
           </div3>
         </div2>
     <p>qrs</p>
     </div1>
 </body>
</text> 
```

与回报：

```
<1>abc
<2>def
<3>ghi
<4>jkl adam
<5>mno
<6>qrs 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:13:31.397

`xsl:number`是你的朋友吗？只需使用它来获取号码

```
<xsl:number select="p" level="any" /> 
```

注意`level`在这种情况下的使用。

试试这个 XSLT

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="text" />

   <xsl:template match="p">
       <xsl:number select="p" level="any" />
       <xsl:value-of select="concat(') ', ., '&#10;')" />
   </xsl:template>

   <xsl:template match="text()"/>
</xsl:stylesheet> 
```

这应该输出以下内容

```
1) abc
2) def
3) ghi
4) jkl adam
5) mno
6) qrs 
```

请注意使用模板匹配`text()`来停止元素中的文本而不是`p`输出（如果有的话）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T21:36:43.630

在看到蒂姆的回答之前，我认为您可能对任何*地方的**任何*文本节点都感兴趣。

 *我仍然不确定你的意思只是`p`节点，所以这是我的解决方案，它列出了所有没有文本祖先的文本节点，这会产生相同的结果。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="1.0">

  <xsl:output method="text"/>
  <xsl:strip-space elements="*"/>

  <xsl:template match="/">

    <xsl:for-each select="//*[text()][not(ancestor::text())]">
      <xsl:value-of select="concat('&lt;', position(), '&gt; ', current(), '&#x0A;')"/>
    </xsl:for-each>

  </xsl:template>
</xsl:stylesheet> 
```

**输出**

```
<1> abc
<2> def
<3> ghi
<4> jkl adam
<5> adam
<6> mno
<7> qrs 
```*

# php - 使用 AJAX 而不是发送表单

> ID：15888247
> 
> 赞同：-4
> 
> 时间：2013-04-08T20:21:54.210
> 
> 标签：php, jquery, html, ajax, forms

在这种情况下，什么相当于使用 AJAX 而不是发送表单

```
<form action="" method="post">
 <div style="padding-left: 10 px:"></div>
 <input id ="datetime" style="display:none;" type="text" name="datetime" VALUE="yyyy/MM/dd HH:mm:ss" SIZE="5"   > 
 <A  HREF="#" onClick="cal.select(document.forms[0].datetime,'anchor','MM/dd/yyyy'); return false;"             
     TITLE="cal.select(document.forms['example'].datetime,'anchor','MM/dd/yyyy'); return false;" 
     NAME="anchor" ID="anchor"><i class="icon-calendar"></i>
 </A>
 <input style="font-size: Bold 8pt;" id = "done" type="submit" value="Done" />
</form> 
```

我想使用 AJAX 帖子来获取我的新变量，而不是发送表单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:24:30.957

它只是

```
$("#done").click(function() {
    $.post("/",{"datetime": $("#datetime").val()});
    return false;
}) 
```

更多关于`$.post`：[http ://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

# opengl - 安装最新的 NVidia Quadro 驱动程序 (311.35) 后出现着色器链接错误

> ID：15888255
> 
> 赞同：0
> 
> 时间：2013-04-08T20:22:23.860
> 
> 标签：opengl, gpu

我刚刚为 Quadro 4000 卡安装了最新的 NVidia 驱动程序。从这一刻起，我的任何着色器链接都因着色器链接错误而失败。值得注意的是，我正在使用带有单独着色器对象的 OpenGL 4.2。我的操作系统是 Windows7 64bit 。在更新之前，我有 309.x 版本的驱动程序，一切正常。现在我回滚到 295.x 版本，它又可以工作了。有人知道吗？它可能是驱动程序错误吗？如果是，可以做些什么呢？

这是一个简单的通过顶点着色器失败：

```
#version 420 core

layout(location = 0) in vec4 position;
layout(location = 1) in vec2 uvs;
layout(location = 2) in vec3 normal;

smooth out vec2 uvsOut;
void main()
{
    uvsOut=uvs;
    gl_Position = position;
} 
```

另一个问题，NVIdia 是否有可能收紧着色器版本的语义规则？我的意思是，我使用的是 OpenGL 兼容性配置文件，但在 GLSL 标记中 #version 420 核心。这可能是问题吗？

**更新：**

来自程序信息日志的更多信息：

**错误 C7592：ARB_separate_shader_objects 要求在访问其成员之前重新声明内置块 gl_PerVertex。**

是的，驱动程序作者也有拼写错误“访问”；）

现在，我实际上通过添加以下内容解决了链接错误：

```
out gl_PerVertex
{
    vec4 gl_Position;
}; 
```

奇怪的是，以前的驱动程序没有强制重新定义 gl_PerVertex 块。现在，虽然这个插件解决了链接问题，但它打开了另一个，其中一些不同的制服不起作用。例如，我在顶点着色器中：

```
 out vec4 diffuseOut; 
```

在片段着色器中：

```
 in vec4 diffuseOut; 
```

然后

```
 OUTPUT = diffuseOut;/// returns black while red is expected. 
```

**更新 2：** 好的，现在很清楚了 - 新驱动程序对着色器输入/输出变量更严格。使用旧驱动程序，我可以在顶点着色器中定义多个“输出”，但无需在片段着色器中定义它们的“输入”匹配.它起作用了。现在看来我被迫在vert和frag程序中声明的“ins”和“outs”之间完全匹配。奇怪的是没有抛出错误，但结果是定义的“ins”在目的地。

# objective-c - 确定何时释放 UITableViewCell

> ID：15888257
> 
> 赞同：2
> 
> 时间：2013-04-08T20:22:26.327
> 
> 标签：objective-c, memory-management, uitableview

我在我的应用程序中使用核心数据以及`NSFetchedResultsController`填充表格。我的数据库有 40k+ 个条目，所以表很长。每个表格单元格都有一个使用[SDWebImage](https://github.com/rs/SDWebImage)从 Web 加载的缩略图图像。如果我慢慢滚动，一切都会很好，如果我在几秒钟内开始快速滚动，我会崩溃。

*NSZombies 没有显示任何有用的东西。*

我猜它与网络有关`SDWebImage`并从网络加载。工作方式`SDWebImage`是在后台加载图像，然后在完成下载后设置下载的图像（罗嗦）。我的想法是单元格正在被释放`UITableView`，然后`SDWebImage`尝试在释放的单元格上设置图像。因此，如果我可以确定何时`UITableViewCell`将被释放，我可以停止`SDWebImage`下载过程并希望解决问题。

我试图添加

```
- (void)dealloc {
    NSLog(@"dealloc");
} 
```

赶上单元格何时被释放，但我什么也没得到。

**编辑** 我`-(void)dealloc`在子类 UITableViewCell 中有我的方法。

**编辑** 这是我创建单元格的位置/方式

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
 {
 static NSString* inventoryCellID = @"InventoryCustomCellID";

 InventoryCustomCell* cell = (InventoryCustomCell *)[tableView dequeueReusableCellWithIdentifier:inventoryCellID forIndexPath:indexPath];

 [self configureCell:cell atIndexPath:indexPath];

 return cell;
 }

- (void)configureCell:(InventoryCustomCell *)cell atIndexPath:(NSIndexPath *)indexPath {

    [cell formatCellWithProduct:[fetchedResultsController objectAtIndexPath:indexPath] enableAdding:NO];

    cell.openThumbnailButton.tag = indexPath.row;

    [cell.openThumbnailButton addTarget:self action:@selector(presentThumbnailViewWithCell:) forControlEvents:UIControlEventTouchUpInside];
} 
```

在我的自定义单元格中，这是被调用的配置方法：

```
- (void)formatCellWithProduct:(Product*)product enableAdding:(bool)addingEnabled {

    self.titleLabel.text = product.part_number;
    self.partNumberLabel.text = [[[product.manufacturer allObjects] objectAtIndex:0] name];

    //The SDWebImage UIImageView category method
    [self.thumbImageView setImageWithURL:[NSURL URLWithString:product.photo] placeholderImage:[UIImage imageNamed:@"icon.png"]];
} 
```

**编辑** 这是下载图像并设置它的 SDWebImage 方法。

```
- (void)setImageWithURL:(NSURL *)url placeholderImage:(UIImage *)placeholder options:(SDWebImageOptions)options progress:(SDWebImageDownloaderProgressBlock)progressBlock completed:(SDWebImageCompletedBlock)completedBlock;
{
    [self cancelCurrentImageLoad];

    self.image = placeholder;

    if (url)
    {
        __weak UIImageView *wself = self;
        id<SDWebImageOperation> operation = [SDWebImageManager.sharedManager downloadWithURL:url options:options progress:progressBlock completed:^(UIImage *image, NSError *error, SDImageCacheType cacheType, BOOL finished)
        {
            __strong UIImageView *sself = wself;
            if (!sself) return;
            if (image)
            {
                sself.image = image;
                [sself setNeedsLayout];
            }
            if (completedBlock && finished)
            {
                completedBlock(image, error, cacheType);
            }
        }];
        objc_setAssociatedObject(self, &operationKey, operation, OBJC_ASSOCIATION_RETAIN_NONATOMIC);
    }
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-09T03:00:23.193

表格视图不倾向于分配和取消分配表格视图单元格。创建单元格的成本很高，因此它们会在可能的情况下被重复使用，而不是在它们离开屏幕时被丢弃。

该`UITableViewDelegate`方法`-tableView:didEndDisplayingCell:forRowAtIndexPath:`是更新单元格以取消下载或其他不再相关的操作的更好地方。

不过，看起来每个调用`-setImageWithURL:etc:etc:`都试图取消该图像视图的先前下载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T20:29:25.463

你没有解释你把dealloc方法放在哪里..

我认为您可以尝试向您的视图控制器添加一个类别以进行调试，以测试您的单元格的释放是否被调用（不是 tu subclass `UITableviewCell`）。

例如：

```
@implementation UITableViewCell(Dealloc)

 - (void)dealloc {
   NSLog(@"dealloc");
   [super dealloc];
 }

@end 
```

你用ARC吗？如果没有，你忘了

```
InventoryCustomCell* cell = (InventoryCustomCell *)[[tableView dequeueReusableCellWithIdentifier:inventoryCellID forIndexPath:indexPath] autorelease]; 
```

# java - 由于发布请求和历史记录，如何管理会话属性

> ID：15888258
> 
> 赞同：0
> 
> 时间：2013-04-08T20:22:26.603
> 
> 标签：java, session, spring-mvc, thymeleaf

我有以下问题：

由于安全原因，我想使用 POST 在模块（不同的控制器）之间发送信息。我的逻辑是这样的：

用户搜索 > 点击特定项目 > 向控制器发送带有发布请求的表单 > 控制器显示特定项目的视图 > 用户点击子项目页面 > 向子项目的控制器发送带有发布请求的表单

但是，由于 POST 的工作方式，当从子项目页面返回项目页面时，它会给我“网页已过期”消息。

`HttpSession`感谢这篇[文章](https://stackoverflow.com/questions/15650746/how-do-you-store-information-in-session-memory-in-spring-mvc-to-fetch-later)，我对这个问题的解决方案是将这些参数保存在 Java中。但是，我不是特别确定如何去做。

例如，这里是我的一些代码片段（作为记录，我使用 thymeleaf 作为视图解析器）：

**Search.html 片段**

```
<tr th:each="customer:${results.pageList}">
   <td>
       <form method="POST" id="goToUser" name="goToUser" action="/customer/">
           <input type="hidden" name="acctCustNbr" th:value="${customer.acctCustNbr}"/>
            <a href="javascript:;" onclick="javascript:document.getElementById('goToUser').submit();"
                th:text="${customer.acctCustNbr}">000010</a>
       </form>
   </td>
 <!-And so on--> 
```

**接收此请求的客户（或示例中的项目）控制器：**

```
@RequestMapping(value = "/customer/", method = RequestMethod.POST)
public String getCustomer(@RequestParam(value = "acctCustNbr", required = false) String acctCustNbr,
                          Model model,
                          HttpSession session) {
    boolean error = false;
    String errorMsg;
    logger.info("acctCustNbr obtained is >" + acctCustNbr + "<");
    if(acctCustNbr==null){
        acctCustNbr = (String) session.getAttribute("acctCustNbr");
    }
    else
        session.setAttribute("acctCustNbr", acctCustNbr);

    /*Service methods and model additions*/ 
```

现在我该如何度过这个初始阶段？看来我的子项目的控制器可以很好地获取会话属性，但是在浏览器上回击仍然会打开那个可怕的过期警报。

我的逻辑是如果用户点击返回按钮到`/customer/`他将发送的这个页面`acctCustNbr==null`。显然我错了，因为这不起作用。

所以我的问题是，我在这里做错了什么？

* * *

* * *

**解决方案感谢@skirsch**

我将我的控制器方法重命名为：

```
@RequestMapping(value = "/customer/", method = RequestMethod.GET)
public String getCustomer(Model model, HttpSession session) {
    boolean error = false;
    String errorMsg;
    /** service invocations and stuff**/ 
```

并添加了这个：

```
@RequestMapping(value = "/customer1/", method = RequestMethod.POST)
public String storeAcctCustNbrInSession(@RequestParam(value = "acctCustNbr", required = false) String acctCustNbr,
                                        Model model, HttpSession session) {
    session.setAttribute("acctCustNbr", acctCustNbr);
    return "redirect:/customer/";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:17:05.803

在会话中存储数据后，您需要将浏览器重定向到另一个位置。这个其他地方可能是

```
@RequestMapping(value = "/customer/", method = RequestMethod.GET)
public String getCustomerFromSessionValue(Model model, HttpSession session) { ... } 
```

当您使用 GET 方法重定向时，您不会遇到“可怕的过期警报”。
请参阅[*发布后重定向*](http://www.theserverside.com/news/1365146/Redirect-After-Post)

# java - 无法启动活动 ComponentInfo{..}：java.lang.NullPointerException

> ID：15888259
> 
> 赞同：1
> 
> 时间：2013-04-08T20:22:32.523
> 
> 标签：java, android

当单击 Button playlistBtn 时，我正在尝试启动一个新活动，并且我得到一个 NullPointerException，但我看不出我的引用哪里出错了。

完整的错误日志：

```
04-08 17:02:07.847: E/AndroidRuntime(5869): FATAL EXCEPTION: main
04-08 17:02:07.847: E/AndroidRuntime(5869): java.lang.RuntimeException: Unable to start activity ComponentInfo{app.and.androidmusic/app.and.androidmusic.PlaylistActivity}: java.lang.NullPointerException
04-08 17:02:07.847: E/AndroidRuntime(5869):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
04-08 17:02:07.847: E/AndroidRuntime(5869):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
04-08 17:02:07.847: E/AndroidRuntime(5869):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-08 17:02:07.847: E/AndroidRuntime(5869):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-08 17:02:07.847: E/AndroidRuntime(5869):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-08 17:02:07.847: E/AndroidRuntime(5869):     at android.os.Looper.loop(Looper.java:137)
04-08 17:02:07.847: E/AndroidRuntime(5869):     at android.app.ActivityThread.main(ActivityThread.java:5039)
04-08 17:02:07.847: E/AndroidRuntime(5869):     at java.lang.reflect.Method.invokeNative(Native Method)
04-08 17:02:07.847: E/AndroidRuntime(5869):     at java.lang.reflect.Method.invoke(Method.java:511)
04-08 17:02:07.847: E/AndroidRuntime(5869):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-08 17:02:07.847: E/AndroidRuntime(5869):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-08 17:02:07.847: E/AndroidRuntime(5869):     at dalvik.system.NativeStart.main(Native Method)
04-08 17:02:07.847: E/AndroidRuntime(5869): Caused by: java.lang.NullPointerException
04-08 17:02:07.847: E/AndroidRuntime(5869):     at app.and.androidmusic.PlaylistActivity.onCreate(PlaylistActivity.java:68)
04-08 17:02:07.847: E/AndroidRuntime(5869):     at android.app.Activity.performCreate(Activity.java:5104)
04-08 17:02:07.847: E/AndroidRuntime(5869):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
04-08 17:02:07.847: E/AndroidRuntime(5869):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144) 
```

MainActivity.java：

```
 public class MainActivity extends ListActivity {
...
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
...
Button btnPlaylist = (Button) findViewById(R.id.playlistBtn);
btnPlaylist.setOnClickListener(new View.OnClickListener() {                 
                     @Override
            public void onClick(View arg0) {
            Intent in = new Intent(getApplicationContext(), PlaylistActivity.class);
                        startActivity(in); 
```

播放列表活动.java：

```
public class PlaylistActivity extends ListActivity{
...
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_playlist); { 
```

AndroidManifest.xml：

```
<activity
            android:name="app.and.androidmusic.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>        
        <activity
            android:name=".PlaylistActivity" /> 
```

好的，这里是你问的activity_main.xml，它很长：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <app.and.androidmusic.DragNDropListView
        android:id="@+id/android:list"
        android:layout_width="match_parent"
        android:layout_height="300dp"
        android:layout_below="@+id/playlistBtn"
        android:layout_alignParentLeft="true" >

  </app.and.androidmusic.DragNDropListView>

    <Button
        android:id="@+id/playBtn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
       android:layout_below="@id/android:list"
        android:layout_toRightOf="@+id/prevBtn"
        android:text="@string/playBtn" />

    <Button
        android:id="@+id/pauseBtn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/android:list"
        android:layout_toRightOf="@+id/playBtn"
        android:text="@string/pauseBtn" />

    <Button
        android:id="@+id/prevBtn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/android:list"
        android:text="@string/prevBtn" />

    <Button
        android:id="@+id/nextBtn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/android:list"
        android:layout_toRightOf="@+id/pauseBtn"
        android:text="@string/nextBtn" />

     <Button
        android:id="@+id/songsBtn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/songTxt"
        android:text="@string/songsBtn" />

     <Button
        android:id="@+id/playlistBtn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/songTxt"
        android:layout_toRightOf="@+id/songsBtn"
        android:text="@string/playlistBtn" />

     <Button
        android:id="@+id/eqBtn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/songTxt"
        android:layout_toRightOf="@+id/playlistBtn"
        android:text="@string/eqBtn" />

     <TextView
         android:id="@+id/songTxt"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_alignParentTop="true"
         android:layout_centerHorizontal="true"
         android:text="" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T20:36:38.590

胡乱猜测：

`btnPlaylist`为 null 并且没有 Button 的 id`playlistBtn`为`activity_main.xml`.

**编辑：**

问题在内部`PlaylistActivity`（第 68 行）。无论您要访问的对象都是空的。

# postgresql - 检索聚合列表的 PostgreSQL 查询

> ID：15888261
> 
> 赞同：0
> 
> 时间：2013-04-08T20:22:40.333
> 
> 标签：postgresql

我有四个表用户、角色、用户角色和电子邮件。我需要开发一个查询来检索用户信息（用户名、姓氏和名字）、用户电子邮件地址（来自电子邮件表）和所有角色的聚合列表（它连接到用户表，有很多-多表用户角色）。我开发了下面的查询，它有一个问题。聚合列表具有重复的角色名称条目。

```
SELECT DISTINCT ON (u.username)
    u.username AS "Username", u.lastname AS "Last Name", u.firstname AS "First Name", e.name AS "Email Address"
    , string_agg(r.name, ';'  ORDER BY r.name) AS "Roles"
FROM    users u
    LEFT OUTER JOIN user_role ur ON (u.id=ur.user_id)
    LEFT OUTER JOIN roles r ON (ur.role_id = r.id)
    INNER JOIN email e ON e.user_id = u.id
WHERE   u.active = 1 AND length(r.name) > 0 AND r.active = 1 AND ur.active = 1
GROUP BY u.username, u.lastname, u.firstname, e.name
ORDER BY u.username 
```

如果我注释掉内部电子邮件连接和关联的电子邮件字段（见下文），我会在 string_agg 中获得正确的角色名称。

```
SELECT DISTINCT ON (u.username)
    u.username AS "Username", u.lastname AS "Last Name", u.firstname AS "First Name",
--  e.name AS "Email Address"
    , string_agg(r.name, ';'  ORDER BY r.name) AS "Roles"
FROM    users u
    LEFT OUTER JOIN user_role ur ON (u.id=ur.user_id)
    LEFT OUTER JOIN roles r ON (ur.role_id = r.id)
--  INNER JOIN email e ON e.user_id = u.id
WHERE   u.active = 1 AND length(r.name) > 0 AND r.active = 1 AND ur.active = 1
GROUP BY u.username, u.lastname, u.firstname, 
--  e.name
ORDER BY u.username 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T23:06:05.730

这可能会解决问题。这是一个有根据的猜测。问题中没有足够的信息。

```
SELECT DISTINCT ON (u.username)
        u.username AS "Username"
      , u.lastname AS "Last Name"
      , u.firstname AS "First Name"
      , e.emails AS "Email Addresses"
      , string_agg(r.name, ';'  ORDER BY r.name) AS "Roles"
FROM    users u
LEFT    JOIN user_role ur ON u.id = ur.user_id
LEFT    JOIN roles     r  ON ur.role_id = r.id
LEFT    JOIN **(
   SELECT user_id, string_agg(name, ', ') AS emails
   FROM   email
   GROUP  BY 1
   )** e  ON e.user_id = u.id
WHERE  u.active = 1
AND    r.name  ''
AND    r.active = 1
AND    ur.active = 1
GROUP  BY u.username, u.lastname, u.firstname, e.emails 
ORDER  BY u.username 
```

旁白：`r.name <> ''`和 一样`length(r.name) > 0`，只是更快。

这是否应该是`LEFT JOIN`电子邮件而不是 a`JOIN`是一个不相关的问题。
但我想它应该是，所以我也改变了它。

# salesforce - 在 salsforce 中创建一个选择对象字段

> ID：15888266
> 
> 赞同：0
> 
> 时间：2013-04-08T20:22:51.530
> 
> 标签：salesforce, apex-code, visualforce

首先，我只是salesforce的初学者，开始使用apex学习visualforce页面，

基本上我有默认对象“人”，其中有很多记录

现在是写一个“支付”可视页面，让人们选择人记录

它们是主从关系，我应该在页面端和顶点类中使用什么顶点标签？类似于下面的时间选择器之一：

页面代码：

```
<apex:inputField value="{!proxyObject.closeDate}"/> 
```

班级：

```
opportunity o = new Opportunity();

public Opportunity getProxyObject() { return o; } 
```

任何机构可以帮助我吗？欢迎任何形式的建议！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T05:31:22.077

如果您有从机会到人们的查找字段，只需在页面上写下这样的内容 `<apex:inputField value="{!proxyObject.people__c}"/>`

# sql - 为什么 noSQL 数据库比 SQL 更具可扩展性？

> ID：15888267
> 
> 赞同：3
> 
> 时间：2013-04-08T20:22:53.993
> 
> 标签：sql, nosql, scalability

最近我读了很多关于 noSQL DBMS 的文章。我了解 CAP 定理、ACID 规则、BASE 规则和基本理论。但是没有找到任何关于为什么 noSQL 比 RDBMS 更容易扩展的资源（例如，在需要大量数据库服务器的系统的情况下）？我猜想保持约束和外键会消耗资源，并且当 DBMS 被分发时，它要复杂得多。但我预计还有更多。

有人可以解释一下 noSQL/SQL 如何影响可伸缩性吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T20:28:26.503

这真的取决于您的问题，每种数据库类型都有其优势，而 Nether SQL 和 noSQL 更擅长扩展，它们是不同的。这完全取决于您拥有的数据，如果您的数据本质上是关系，那么 SQL 可能会更好，如果您的数据是基于文档的（没有定义的模式），那么 noSQL 可能会更好。我们在产品中使用这两种类型的数据库，我们有很多不同的数据，有些适合 SQL，有些适合 noSQL。

你在考虑什么样的规模？并行访问，处理大量查询还是处理非常大的数据？您的问题非常广泛，在不知道您要解决什么问题的情况下回答有点困难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T21:54:57.070

SQL/noSQL 的性能不是在概念级别上衡量的。事实上，当关系模型（比 SQL 更准确地说）问世时，它被认为是低效率的，然后它接管了世界。在计算机科学中，评估的是特定算法（使用特定结构）的时间复杂度。

在任何类型的数据库中，都使用具有多个操作（插入、删除、搜索）的多个数据结构。即使对相同数据结构的相同操作也可能使用不同的算法，从而提供不同的性能。不同的 RDBMS 可能使用不同的数据结构/算法或变体。

这对 noSQL 数据库更有效，其中有不同的类型 ( [http://en.wikipedia.org/wiki/NoSQL](http://en.wikipedia.org/wiki/NoSQL) )。

因此，我认为在如此高的水平上比较性能是没有意义的。您需要查看具体算法并根据问题的需要进行选择。

还要考虑一些人在 RDBM 中成功实现 noSQL，在无模式模型的意义上，有大量数据：[http ://backchannel.org/blog/friendfeed-schemaless-mysql](http://backchannel.org/blog/friendfeed-schemaless-mysql)

最后，也许是更主观的意见，具体而言，我只知道当您必须更改架构时性能会有所不同。当表很大时，大多数 RDBM 都在努力进行更改。这并不是说它们在概念上存在问题或不如 noSQL。这不是问题，因为设计过去被认为是稳定的。

RDBMS 开始适应，参见例如。MariaDB 中的动态列：[https ://kb.askmonty.org/en/dynamic-columns/](https://kb.askmonty.org/en/dynamic-columns/)

# android - ios和android的Cocos2d-x和CocosBuilder多分辨率

> ID：15888268
> 
> 赞同：2
> 
> 时间：2013-04-08T20:22:57.047
> 
> 标签：android, ipad, retina-display, cocos2d-x, cocosbuilder

我按照以下链接中的说明进行操作，无需 cocosBuilder 即可在 ios 平台上进行多分辨率工作。 [http://www.cocos2d-x.org/projects/cocos2d-x/wiki/Multi_resolution_support](http://www.cocos2d-x.org/projects/cocos2d-x/wiki/Multi_resolution_support)

当我使用 cocosbuilder ccbi 文件时，ipad 屏幕上显示的图像仍然是 iphone 图像。

cocosbuilder这样发布资源目录 ![cocosbuilder 发布目录](https://i.stack.imgur.com/FR9Nn.png)

但似乎 cocos2d-x 没有从正确的目录中为正确的分辨率选择正确的图像。

这是我在代码中的资源设置。我在 ipad 3 上用高清测试它。

```
#define DESIGN_RESOLUTION_480X320 0
#define DESIGN_RESOLUTION_1024X768 1
#define DESIGN_RESOLUTION_2048X1536 2

/* If you want to switch design resolution, change next line */
#define TARGET_DESIGN_RESOLUTION_SIZE DESIGN_RESOLUTION_2048X1536

typedef struct tagResource {
cocos2d::CCSize size;
char directory100;
}Resource;

static Resource smallResource = { cocos2d::CCSizeMake(480, 320), "ccb/resources-iphone" };
static Resource mediumResource = { cocos2d::CCSizeMake(1024, 768), "ccb/resources-ipad" };
static Resource largeResource = { cocos2d::CCSizeMake(2048, 1536), "ccb/resources-ipadhd" };

#if (TARGET_DESIGN_RESOLUTION_SIZE == DESIGN_RESOLUTION_480X320)
static cocos2d::CCSize designResolutionSize = cocos2d::CCSizeMake(480, 320);
#elif (TARGET_DESIGN_RESOLUTION_SIZE == DESIGN_RESOLUTION_1024X768)
static cocos2d::CCSize designResolutionSize = cocos2d::CCSizeMake(1024, 768);
#elif (TARGET_DESIGN_RESOLUTION_SIZE == DESIGN_RESOLUTION_2048X1536)
static cocos2d::CCSize designResolutionSize = cocos2d::CCSizeMake(2048, 1536);
#else
#error unknown target design resolution!
#endif

// The font size 24 is designed for small resolution, so we should change it to fit for current design resolution
#define TITLE_FONT_SIZE (cocos2d::CCEGLView::sharedOpenGLView()->getDesignResolutionSize().width / smallResource.size.width * 24)

#endif /* APPMACROS_H */ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T06:15:44.770

我正在使用最新版本的 cocos2d-x 2.1.2 和 cocosbuilder 3.0。经过半天的努力，我找到了解决方案。

原因是 cocosbuilder 在发布资源时，创建了一个非常漂亮的目录结构，可以将不同分辨率的图片放到不同的文件夹中。我假设 cocos2d-x 将使用 cocosbuilder 发布的文件结构选择正确的目录。我错了。我不得不手动设置 cocos2d-x 中的资源目录以匹配 cocosbuilder 发布的目录。在我这样做之后，一切正常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-06T15:56:52.583

以下教程介绍了如何将 CocosBuilder 3.0 多分辨率资源集成到 cocos2d-x 项目中：http: [//2sa-studio.blogspot.com/2013/04/setup-cross-platform-project-with.html](http://2sa-studio.blogspot.com/2013/04/setup-cross-platform-project-with.html)。这可能会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T21:03:39.603

我认为无论您将图像存储在哪个“文件夹”中，都必须根据通常的模式命名它们以符合 cocos2d 约定。

```
fish.png
fish-hd.png 
```

也许您的文件夹结构来自 Android 项目？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-16T15:40:17.353

错误，cocosbuilder 3.0 alpha 不再支持为 fish.png 附加 -hd。相反，您必须使用 ipadhd 分辨率将资源放在“resources-auto”文件夹中。cocosbuilder 将为每个屏幕分辨率创建一个目录，其中您的资源文件具有适当的分辨率但具有相同的文件名。

我遇到的问题是，如果我将 ipad、iPhone-hd、iPhone-hd 的这些目录作为目标添加到我的 iOS 项目中，我会收到 COPYPNG 错误，因为我必须复制多个具有相同名称的文件。

# android - 通过 Google Play 购买的每台设备订阅

> ID：15888270
> 
> 赞同：7
> 
> 时间：2013-04-08T20:23:07.863
> 
> 标签：android, in-app-billing, android-billing

我想为将通过 Google Play 销售的应用设置基于订阅的计费方式。是否可以在不同的设备上向同一用户出售相同的订阅？那么用户尝试使用该应用程序的每台设备都需要有效订阅吗？

我在想我可以将设备 ID 和用户 ID 存储在我自己的服务器上并以这种方式对其进行身份验证，但是用户不能多次购买同一个订阅是否正确？那么，如果用户希望购买多个“许可证”，我是否需要一个基本相同的订阅池？Google Play Billing 可以原生处理这些吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-03T16:24:47.267

谷歌的文档最初似乎使这不可能实现，但深入挖掘，我发现了以下内容......

在 Google Play API 2.0 版中，您可以创建所谓的“非托管”产品类型，允许用户多次购买相同的东西。这似乎在 API 3.0 中部分消失了，尽管 Google 开发者控制台明确支持这一点。我认为它仍然受支持，因为使用 2.0 API 的应用程序仍然存在，而 Google 不能放弃对它的支持。

然而，在 3.0 中，“非托管”产品类型未在 API 文档中列出，但文档说明了以下关于对同一产品类型进行多次购买（一次性购买或订阅）：

> 如果您使用的是版本 3 API，您还可以在应用程序中使用托管项目。您通常会为可以多次购买的物品（例如游戏内货币、燃料或魔法）实施消耗。购买后，在您通过向 Google Play 发送消费请求消费该项目之前，无法再次购买受管理的项目。要了解有关应用内产品消费的更多信息，请参阅消费项目

[http://developer.android.com/google/play/billing/api.html#consume](http://developer.android.com/google/play/billing/api.html#consume)

**重要提示：不能使用订阅，这意味着如果您希望客户定期更新他们的许可证，您必须联系他们并告诉他们必须再次购买许可证。如果您的服务需要定期更新，那将是不利的。**

要获得您想要的东西，您将需要一个后端服务器来处理设备注册并存储应用程序在购买时从 Google Play 收到的令牌。当用户想要从另一台设备购买您的许可、功能、服务（或其他）时，另一台设备必须首先通过称为“消费”的过程向 Google Play 释放其对产品的“所有权”。它或多或少会像这样工作：

1.  第一台设备进行购买并从 Google Play 接收 purchaseToken 字符串。
2.  purchaseToken 与设备 ID 一起从应用程序发送到您的服务器并存储。
3.  用户转到第二台设备并希望为该设备购买许可证。该应用程序首先需要访问您的服务器并获取purchaseToken（第一台设备上传的），然后使用consumePurchase 调用Google Play，从而释放用户对产品的“所有权”。
4.  然后，该应用程序从 Google Play 购买新许可证（或其他），获取新的 purchaseToken 并将其与设备 ID 一起存储在您的服务器上。

从本质上讲，Google Play 不会跟踪哪个设备拥有该产品。它仅将 Google 帐户与所购买的产品相关联。由您的应用程序和服务器来管理许可证。

我发现您需要解决一个潜在问题。如果由于某种原因应用程序无法将 purchaseToken 发送回您的服务器（您的服务器已关闭，用户丢弃了他们的设备并损坏了它，您的应用程序在将令牌保存到设备上之前崩溃了，等等），那么您可能不会知道用户是否为服务付费。Google 确实提供了一个服务器 API，让您的后端服务器可以在 Google 的服务器上查询 Google Play 以获取有关购买的信息，但我不熟悉它，也不熟悉它的局限性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T20:59:42.513

您将需要像对任何其他应用内商品一样实施应用内购买。

确保在开发控制台中创建项目时，它是非托管的，因为每个帐户只能购买一次托管项目。

当您收到购买非托管商品的确认信息时，请将唯一 ID 等详细信息发送到您的服务器并将其存储在那里。

现在，每当您的应用程序启动时，请检查您的服务器是否是授权设备。如果不是，提示用户购买。如果是，让他们继续使用该应用程序。

这仅在您需要一次性付款时才有效。如果您需要订阅，则必须一次性支付多次，因为订阅类似于托管购买，并且只能由任何帐户支付一次。

# ios - 使用 UIPanGestureRecognizer，有没有办法只经常行动，比如在 x 多个像素被平移之后？

> ID：15888276
> 
> 赞同：12
> 
> 时间：2013-04-08T20:23:27.530
> 
> 标签：ios, objective-c, uigesturerecognizer, uipangesturerecognizer

现在，我的 UIPanGestureRecognizer 可以识别每一个平移，这很好且必要，但由于我使用它作为滑动手势来增加和减少变量的值，因此我只想经常执行此方法。如果我每次检测到它时都增加 1，那么值上升得太快了。

有没有办法做这样的事情，每 10 个平移像素执行一次，或类似的事情？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-09T00:58:56.270

您正在寻找[`translationInView:`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIPanGestureRecognizer_Class/Reference/Reference.html#//apple_ref/occ/instm/UIPanGestureRecognizer/translationInView%3a)，它会告诉您平底锅已经前进了多远，并且可以根据您的最小距离进行测试。此解决方案不涵盖您以等于最小距离的量在一个方向上来回移动的情况，但如果这对您的场景很重要，则添加起来并不难。

```
#define kMinimumPanDistance 100.0f

UIPanGestureRecognizer *recognizer;
CGPoint lastRecognizedInterval;

- (void)viewDidLoad {
    [super viewDidLoad];

    recognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(didRecognizePan:)];
    [self.view addGestureRecognizer:recognizer];
}

- (void)didRecognizePan:(UIPanGestureRecognizer*)sender {
    CGPoint thisInterval = [recognizer translationInView:self.view];

    if (abs(lastRecognizedInterval.x - thisInterval.x) > kMinimumPanDistance ||
        abs(lastRecognizedInterval.y - thisInterval.y) > kMinimumPanDistance) {

        lastRecognizedInterval = thisInterval;

        // you would add your method call here
    }
} 
```

# python - 在 python 中使用 optparse 时抑制帮助中的选项之一

> ID：15888278
> 
> 赞同：3
> 
> 时间：2013-04-08T20:23:38.530
> 
> 标签：python, optparse

考虑以下：

```
parser.add_option("-f", "--file", "--secret", action = "append", type = "string", dest = "filename", default = [], help = "specify the files") 
```

我想在调用帮助时对用户隐藏 --secret 选项。我可以通过以下方式做到这一点吗？

```
parser.add_option("-f", "--file", action = "append", type = "string", dest = "filename", default = [], help = "specify the files")
parser.add_option("--secret", action = "append", type = "string", dest = "filename", default = [], help = "specify the files") 
```

我这样做是否遗漏了任何隐藏的问题？如果是这样，任何人都可以提出另一种方法来实现这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T20:27:10.170

试试这个`help=SUPPRESS_HELP`技巧（见[文档](http://docs.python.org/2/library/optparse.html#optparse.Option.help)）：

```
from optparse import OptionParser, SUPPRESS_HELP

parser.add_option("-f", "--file", action = "append", type = "string", dest = "filename", default = [], help = "specify the files")
parser.add_option("--secret", action = "append", type = "string", dest = "filename", default = [], help=SUPPRESS_HELP) 
```

# c# - SmtpClient.SendMailAsync 方法线程安全吗？

> ID：15888279
> 
> 赞同：7
> 
> 时间：2013-04-08T20:23:58.987
> 
> 标签：c#, .net-4.5, async-await

[SmtpClient 类](http://msdn.microsoft.com/en-us/library/4971yhhc.aspx)声明实例成员不是线程安全的。[如果对Send](http://msdn.microsoft.com/en-us/library/swas0fwc.aspx)或[SendAsync](http://msdn.microsoft.com/en-us/library/x5x13z6h.aspx)进行并发调用，则可以看到这一点。如果第一次调用尚未完成，这两种方法都将在第二次调用时抛出 InvalidOperationException。

.NET 4.5 中引入的方法[SendMailAsync](http://msdn.microsoft.com/en-us/library/hh193922.aspx)没有将 InvalidOperationException 列为抛出的异常。新的 .NET 4.5 方法是否实现了某种排队？Reflector 无法阐明此类的实现细节，因此我假设这已在本机方法中实现。

多个线程能否安全地调用 SMTP 客户端共享实例上的 SendMessageAsync 方法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-08T21:09:06.240

我不确定为什么使用 Reflector 对您不起作用。如果我反编译它，我会看到以下代码：

```
[HostProtection(SecurityAction.LinkDemand, ExternalThreading=true)]
public Task SendMailAsync(MailMessage message)
{
    TaskCompletionSource<object> tcs = new TaskCompletionSource<object>();
    SendCompletedEventHandler handler = null;
    handler = delegate (object sender, AsyncCompletedEventArgs e) {
        this.HandleCompletion(tcs, e, handler);
    };
    this.SendCompleted += handler;
    try
    {
        this.SendAsync(message, tcs);
    }
    catch
    {
        this.SendCompleted -= handler;
        throw;
    }
    return tcs.Task;
} 
```

如您所见，它是一个简单的 TAP 包装器，用于`SendAsync()`. 如果`SendAsync()`抛出异常，`SendMailAsync()`只需重新抛出它。

因此，结论是它**`SendMailAsync()`不是线程安全的**，并且它的异常没有被充分记录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-31T09:34:28.693

作为注释（因为我没有足够的评论），编写异步操作的传统方法是使用异步编程模型（APM），但今天我们通常使用基于任务的异步模式（TAP）和它的 async/await 关键字。尽管在 APM 方法周围看到 TAP 包装器并不罕见，但也可以在 TAP 方法周围看到 APM 包装器。

# node.js - 无法在 node.js 中用猫鼬填充数组

> ID：15888291
> 
> 赞同：0
> 
> 时间：2013-04-08T20:24:44.397
> 
> 标签：node.js, mongoose

这是我在课程中的模式

```
var CourseSchema = mongoose.Schema({
    students:[{ type: ObjectId, ref: 'User' }]
});
var CourseModel = mongoose.model('Course',CourseSchema);

var UserSchema = mongoose.Schema({ name:String})
var UserModel = mongoose.model('User',UserSchema); 
```

在mongodb中，我已经创建了已有的课程和用户，当用户想参与课程时，用户引用会添加到课程模型中的students数组中。

这是我尝试将用户引用添加到学生的方法

```
function joinCourse(cid,uid,callback){
    var options = { new: false };   
    var uid = mongoose.Types.ObjectId(uid);
    CourseModel.findOneAndUpdate({'_id':cid},{'$addToSet':{'students':uid}},options,function(err,ref){
        if(err) {
            console.log('update joinCourse'.red,err);
            callback(err, null);
        }else{
            console.log('update joinCourse  '.green+ref);                 
            callback(null,ref);
        }
    })

} 
```

执行上述函数时，students 数组具有用户的 objectID 或引用。但是，当我想从课程模型中填充学生时，它不起作用。

```
var id = mongoose.Types.ObjectId(id);
CourseModel.findById(id).populate('students').exec(function(err, users) { 
    if(err){callback(err, null);}
    else{
            //// users.length == undefined 
        console.log("findCourseStudentsById".green,users.length);
        callback(null, users);
    }      
}) 
```

我没有发现填充函数有任何问题，所以我想知道 joinCourse 函数有什么问题吗？所以我将功能更改为

```
 courseModel.findCourseById(cid,function(err,course){
            if(err) next(err);       
        else{
            course.students.push({'_id': mongoose.Types.ObjectId(uid)});

                course.save(function (err) {
                 if (err) next(err); 

                });
            }
   }) 
```

但填充仍然不起作用。注意，我使用的是猫鼬 3.6

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T20:45:28.370

`populate`填充模型实例，但回调传递的是您调用填充的模型实例，而不是填充的数据本身：

```
CourseModel.findById(id).populate('students').exec(function(err, course) { 
  if(err){callback(err, null);}
  else{
    console.log("findCourseStudentsById".green, course.students.length);
    callback(null, course);
  }      
}); 
```

# java - 将 wsdl 结果转换为多行列表

> ID：15888294
> 
> 赞同：0
> 
> 时间：2013-04-08T20:24:55.943
> 
> 标签：java, string, netbeans-platform

在我的编程课中，我们被分配了一项任务，即从 wsdl 获取结果并将结果分离到一个列表中。例如，

儿童和家庭；儿童；家庭；朋友

任务是在每个“;”处分隔行 并在下一行输入信息，因此它从一行转换为一个列表，例如..

儿童和家庭
儿童
家庭
朋友

我该怎么做呢？我已经被困了很长一段时间了。

顺便说一句，这都是Java

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:31:57.763

说`String wsdlString`的是你得到的输入，你的方法的结果应该是`ArrayList<String>`：

```
public ArrayList<String> seperateIntoList(String wsdlString){
      String[] resultArray =  wsdlString.split(";");
      ArrayList<String> resultList = new ArrayList<String>(resultArray.size());

      for(String listItem: resultArray) {
          resultList.add(listItem);
      }

      return resultList;
} 
```

我不太确定，但如果你只想要一个带换行符的字符串而不是`List`你可以使用`wsdlString.replace(";","\n");`

# jasper-reports - 使用 JasperReports Server 将报告导出为 XHTML 格式

> ID：15888297
> 
> 赞同：1
> 
> 时间：2013-04-08T20:25:07.490
> 
> 标签：jasper-reports, jasperserver

我需要在*JasperReports Server*的帮助下以 XHTML 格式导出报告。

我正在使用这样的网址：`http://localhost:8080/JasperReports/report?_repName=test&_repFormat=pdf&_dataSource=default&_outFilename=myTest.pdf&_repLocale=es_DO&_repE ncoding=UTF-8`.

我可以导出为多种格式（pdf、html、xls、...），但我不知道如何导出为 XHTML 格式。只是更改参数的值`_repFormat=xhtml`不起作用。

它可以在*iReport*预览中使用，但不能通过*JR 服务器的*url。

我在 Jasper 文档和网络论坛中都找不到任何有用的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T04:56:57.287

看看这里列出的答案：http: [//community.jaspersoft.com/questions/531694/xhtml-render-or-export](http://community.jaspersoft.com/questions/531694/xhtml-render-or-export)

# iphone - 如何更好地拖动 UIButton？未调用 UIButton UIControlEventTouchUpInside 事件

> ID：15888304
> 
> 赞同：2
> 
> 时间：2013-04-08T20:25:24.943
> 
> 标签：iphone, ios, objective-c, uiview, uitouch

我的可拖动按钮正在使用这些事件进行拖动：

```
[button addTarget:self action:@selector(beganDragging:)
                     forControlEvents:UIControlEventTouchDown];
[button addTarget:self action:@selector(wasDragged:withEvent:)
                     forControlEvents:UIControlEventTouchDragOutside | UIControlEventTouchDragInside];
[button addTarget:self action:@selector(exitDragging:)
                     forControlEvents:UIControlEventTouchUpInside]; 
```

上面是直截了当的。方法`wasDragged`将 UIButton 的中心调整到 UITouch 位置。但是，在某些情况下，我最终会挂起按钮（通常在手指释放后它会捕捉到网格），因为`UIControlEventTouchUpInside`从未调用过！

如何？假设我开始拖动一个按钮，并在按住它的同时制作屏幕截图（Power+Home）。当我释放按钮时，不会调用任何事件（即`UIControlEventTouchUpInside`）。因此，我的按钮被卡住并且没有捕捉到方法中的网格`exitDragging`

任何灯如何确保`exitDragging`始终运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:11:12.557

也许将 UIView API 与 等一起使用会更`touchesBegan`容易`touchesEnded`。

看来您无论如何都没有使用 UIButton 功能。我认为使用 UIButton 的目标机制管理拖动并不是它的本意。

# dart - 有没有办法禁用所有这些符号链接到包目录？

> ID：15888308
> 
> 赞同：4
> 
> 时间：2013-04-08T20:25:36.640
> 
> 标签：dart, dart-pub

我正在按照本指南使用 Dart Eclipse 插件： [http](http://blog.dartwatch.com/2013/01/integrating-dart-into-eclipse-and-your.html) ://blog.dartwatch.com/2013/01/integrating-dart-into-eclipse-and-your.html （没有 Maven 集成）

如果我使用 pubspec.yaml 文件，我的项目会收到这些包符号链接的垃圾邮件。（我正在使用 Eclipse 的“包资源管理器”视图）我想控制这些文件的创建位置。

我会争辩说网络根目录，也许一个脚本目录就足够了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T16:45:19.413

目前，不，没有办法控制哪些目录获取“包”目录，哪些不获取。Pub 会将“packages”目录放置在“bin”、“example”、“test”、“tool”和“web”以及它们的任何子目录中。

这些是包可能具有 Dart 入口点的所有目录。由于入口点需要在其旁边有一个“包”目录才能使用“包：”导入，因此 pub 将在其中放置一个。

它不会将“包”目录放在其他任何地方。

> 我会争辩说网络根目录，也许一个脚本目录就足够了。

“工具”是 pub 对“脚本”目录的约定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T20:25:36.640

我在 dart-sdk\util\pub\entrypoint.dart 中找到了生成这些目录的代码。

有一个方法叫做：_linkSecondaryPackageDir。

如果我添加： if (path.basename(dir) != 'web') return;

包文件夹只在根文件夹和 web 文件夹中创建，就像我想要的那样。

我会测试这是否会破坏任何东西并报告回来。

# html - HTML文本框输出网页值

> ID：15888311
> 
> 赞同：0
> 
> 时间：2013-04-08T20:25:50.940
> 
> 标签：html, dynamic, textbox

实际上，我有一个网页文本框，我希望它加载它在转到链接时输出的值。

我有一个名为 www.mydomin.com/number.html 的链接

此页面仅显示一个数字（假设它显示 1234）。

然后我有一个名为 show.html 的页面。

这个页面只有一个基本的 html 文本框。

我希望这个基本的 html 文本框在 www.mydomin.com/number.html 显示输出编号

所以这个文本框理论上应该显示 1234

我试过 value="www.mydomin.com/number.html" 但这只是显示实际链接。

有任何想法吗？非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:31:16.567

如果需要，您始终可以使用 jQuery AJAX 请求（尽管我完全同意 @Madara 的第一条评论）：

```
$.get("number.html",function(data){
   $("#myinput").attr("value", data);
} 
```

# perl - 将两个空格分隔的文本文件按公共列处理为一个

> ID：15888312
> 
> 赞同：1
> 
> 时间：2013-04-08T20:25:53.853
> 
> 标签：perl

我有两个看起来像的文本文件：

```
col1 primary col3 col4
blah 1       blah  4
1    2       5     6
... 
```

和

```
colA primary colC colD
1    1       7    27
foo  2       11   13 
```

我想将它们合并到一个更宽的表中，例如：

```
primary  col1 col3 col4 colA colC colD
1        blah blah 4    a    7    27
2        1    5    6    foo  11   13 
```

我对 Perl 很陌生，所以我不确定最好的方法是什么。请注意，列顺序无关紧要，并且有**几百万行。**不幸的是，我的文件也没有排序。

我目前的计划，除非有替代方案：对于其中一个文件中的给定行，扫描另一个文件以查找匹配的行，并根据需要将它们都附加到新文件中。不过，这听起来很慢而且很麻烦。

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-08T20:37:54.403

*   **解决方案 1。**

    1.  使用标准的 CPAN 分隔文件解析器逐行读取两个文件中较小的一个，就像`TXT::CSV_XS`解析列一样。

    2.  将每条记录（作为列的数组引用）保存在哈希中，合并列是哈希键

    3.  完成后，使用标准 CPAN 分隔文件解析器逐行读取两个文件中较大的一个，`TXT::CSV_XS`以解析列。

    4.  对于每条记录，找到连接键字段，从存储文件#1 的数据的哈希中找到匹配的记录，根据需要合并 2 条记录，然后打印。

    **注意**：这是非常占用内存的，因为整个较小的文件将存在于内存中，但不需要您读取其中一个文件数百万次。

* * *

*   **解决方案 2。**

    1.  将 file1（使用 Unix`sort`或一些简单的 Perl 代码）排序为“file1.sorted”

    2.  将 file2（使用 Unix`sort`或一些简单的 Perl 代码）排序为“file2.sorted”

    3.  打开两个文件进行阅读。循环直到两者都被完全读取：

        *   如果该文件的缓冲区为空（缓冲区只是一个包含下一条记录的变量），则将每个文件的 1 行读入缓冲区。

        *   比较两行之间的索引。

        *   如果 index1 < index2，将 file1 的记录写入输出（不合并）并清空 buffer1。重复步骤 3

        *   如果 index1 > index2，将 file2 的记录写入输出（不合并）并清空 buffer2。重复。

        *   如果index1 == index2，合并2条记录，将合并后的记录写入输出并清空两个缓冲区（假设连接索引列是唯一的，如果不是唯一的，这一步比较复杂）。

    **注意**：这***不需要***您将整个文件保存在内存中，除了对文件进行排序（如果需要，可以以内存受限的方式完成）。

# ruby-on-rails-3 - 注销的用户看到错误消息“nil:NilClass 的未定义方法 `leads'”

> ID：15888314
> 
> 赞同：0
> 
> 时间：2013-04-08T20:25:57.260
> 
> 标签：ruby-on-rails-3

我制作了一个简单的应用程序，让用户可以跟踪他们的销售线索。除了注销用户的主页外，一切正常，他们收到错误消息 - nil:NilClass 的未定义方法“leads”。

线索控制器中的索引：

```
 def index
    @leads = current_user.leads.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @leads }
    end
  end 
```

主页：

```
<% if user_signed_in? %>
<div class="row">
    <div class="span3">
        <h2>Leads</h2>
    </div>
    <div class="pull-right">
        <%= link_to 'Add New Lead', new_lead_path, class: 'btn btn-primary' %>
    </div>
</div>
<div>
<table id="leads" class="display">
    <thead>
      <tr>
        <th>Company</th>
        <th>Contact</th>
        <th>Phone</th>
        <th class="hidden-tablet hidden-phone hidden-desktop-small">Website</th>
        <th class="hidden-tablet hidden-phone hidden-desktop-small">Email</th>
        <th class="hidden-tablet hidden-phone hidden-desktop-small">Notes</th>
        <th class="hidden-tablet hidden-phone hidden-desktop-small">Last Updated</th>    
      </tr>
    </thead>
    <tbody>
    <% @leads.each do |lead| %>
      <tr>
        <td><%= link_to lead.company_name, lead %></td>
        <td><%= lead.contact %></td>
        <td><%= lead.phone %></td>
        <td class="hidden-tablet hidden-phone hidden-desktop-small"><%= lead.website %></td>
        <td class="hidden-tablet hidden-phone hidden-desktop-small"><%= lead.email %></td>
        <td class="hidden-tablet hidden-phone hidden-desktop-small"><%= lead.notes %></td>
        <td class="hidden-tablet hidden-phone hidden-desktop-small"><%= lead.updated_at.strftime("%d %b %y") %></td>    
      </tr>
    <% end %>
    </tbody>
</table>
</div>

<% else %>
<div class="hero-unit">
    <h1>Welcome to SnapLeads</h1>
    <p>
        The simplest CRM ever.
    </p>
    <p>
        <%= link_to "Sign up now!", new_user_registration_path, class: "btn btn-primary btn-large" %>
    </p>
</div>

<% end %> 
```

如果用户已注销，为什么页面会尝试访问潜在客户方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:47:17.870

因为索引操作中的代码总是被执行。您可以在控制器中使用类似以下内容：

```
 def index
    @leads = current_user ? current_user.leads.all : nil

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @leads }
    end
  end 
```

# python - 如何在 JSON (Python) 中处理 Salesforce REST 错误响应

> ID：15888319
> 
> 赞同：0
> 
> 时间：2013-04-08T20:26:03.747
> 
> 标签：python, json, rest, salesforce, portal

我只是想知道如何正确处理我正在开发的门户的 Salesforce 错误响应。或者更笼统地说，就是如何处理 JSON 错误响应。例如，如果我向数据库查询不存在的信息，如果用户提供了不正确的登录凭据等。我正在寻找一个被广泛接受的 Pythonic 解决方案来解决这个问题。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:31:07.120

检查响应，如果有错误，引发异常。

理想情况下，Exception 应该与 API 返回的错误消息相匹配，并包含 API 返回的所有信息。

如果您正在编写一个库，这将让最终用户决定他们想要如何进行。

* * *

这是我为 Salesforce REST API 包装器编写的代码示例：

例外：

```
class SOQLException(SFDCException): 
    def __init__(self, errorCode, message):
        self.errorCode = errorCode
        self.message = message 
```

在发出请求的代码中，将 JSON 加载为`data`.

也许这改变了，但 Salesforce 过去常常在数组中返回错误字典：

```
 if len(data) == 1 and u"errorCode" in data[0]:
        error = data[0]
        raise SOQLException(**error) 
```

# clojure - 打嗝不起作用：FileNotFoundException：无法在类路径上找到 ../as__init.class 或 ../as.clj

> ID：15888321
> 
> 赞同：2
> 
> 时间：2013-04-08T20:26:08.390
> 
> 标签：clojure, hiccup

我刚开始使用clojure，我正在尝试构建一个小型网络应用程序。我想试试打嗝，但它似乎不起作用。我的代码如下。

项目.clj

```
 (defproject WebTest "0.1.0-SNAPSHOT"
  :description "FIXME: write description"
  :url "http://example.com/FIXME"
  :dependencies [[org.clojure/clojure "1.4.0"]
                 [compojure "1.1.5"]
                 [hiccup "1.0.3"]
                 [org.clojure/java.jdbc "0.2.3"]
                 [net.sourceforge.jtds/jtds "1.2.4"]
                 ]
  :plugins [[lein-ring "0.8.2"]
            [lein-idea "1.0.1"]]
  :ring {:handler WebTest.handler/app}
  :profiles
  {:dev {:dependencies [[ring-mock "0.1.3"]]}}) 
```

处理程序.clj

```
 (ns WebTest.handler
  (:use compojure.core)
  (:require [compojure.handler :as handler]
            [compojure.route :as route]
            [WebTest.Content :as pages]
            [hiccup.core :as templ]))

(defroutes app-routes
  (GET "/" [] (templ/html [h1 "Hello world"]))
  (GET "/Greeting/:name" [name] (str "<h1>Hello " name "</h1>"))
  (GET "/Date/:year/:month/:day" [year month day] (str "<h1>It is " month "/" day "/" year "</h1>"))
  (route/not-found "Not Found"))

(def app
  (handler/site app-routes)) 
```

我得到的错误是

```
Exception in thread "main" java.io.FileNotFoundException: Could not locate hiccu
p/core/as__init.class or hiccup/core/as.clj on classpath:
        at clojure.lang.RT.load(RT.java:432)
        at clojure.lang.RT.load(RT.java:400)
        at clojure.core$load$fn__4890.invoke(core.clj:5415)
        at clojure.core$load.doInvoke(core.clj:5414) 
```

紧随其后的是一个很长的堆栈跟踪。任何洞察我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T20:46:28.970

尝试像您一样要求 WebTest.Content 对我来说失败了，尽管如果我删除它，其余的工作正常：

```
(ns WebTest.handler
  (:use compojure.core)
  (:require [compojure.handler :as handler]
            [compojure.route :as route]
            ;[WebTest.Content :as pages]
            [hiccup.core :as templ])) 
```

`[]`如果在 handler.clj 表单的 :require 部分中存在不匹配的 s，则您提到的错误将是这种情况，`ns`尽管它们不是由您显示的它引起的。

# .net - MSBuild 文件运行代码分析而不重叠

> ID：15888322
> 
> 赞同：12
> 
> 时间：2013-04-08T20:26:12.877
> 
> 标签：.net, msbuild, continuous-integration

我正在创建一个 MSBuild 文件，以将我需要在构建服务器上执行的一些任务合并到一个步骤中。此过程的一部分需要运行代码分析。我的问题是我为多个顶级项目运行代码分析，但它们每个都对其他项目（如我们的实用程序库）具有相同的依赖关系。这意味着每次运行代码分析都会重复运行实用程序库的代码分析。这是我的 MSBuild 文件：

```
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003" DefaultTargets="Build" ToolsVersion="4.0">
    <PropertyGroup>
        <Configuration Condition=" '$(Configuration)' == '' ">Dev</Configuration>
        <Platform Condition=" '$(Platform)' == '' ">AnyCPU</Platform>
        <RunCodeAnalysis>true</RunCodeAnalysis>
        <CodeAnalysisTargets>C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\CodeAnalysis\Microsoft.CodeAnalysis.targets</CodeAnalysisTargets>
        <CodeAnalysisTreatWarningsAsErrors>true</CodeAnalysisTreatWarningsAsErrors>
        <StyleCopTreatErrorsAsWarnings>false</StyleCopTreatErrorsAsWarnings>
        <DefineConstants>TRACE;DEBUG;CODE_ANALYSIS</DefineConstants>
        <BuildInParallel>true</BuildInParallel>
        <WebProjectTargets>Clean;Build;Package</WebProjectTargets>
        <OtherProjectTargets>Clean;Build</OtherProjectTargets>
        <GenerateSerializationAssemblies>Off</GenerateSerializationAssemblies>
    </PropertyGroup>

    <Target Name="Build">
        <!-- Web Projects -->
        <MSBuild
            Projects="$(MSBuildProjectDirectory)\Source\WebProjects\WebApp1\WebApp1.csproj"
            Properties="
                Configuration=$(Configuration);
                PackageLocation=$(MSBuildProjectDirectory)\Packages\WebApp1.zip;
                RunCodeAnalysis=$(RunCodeAnalysis);
                CodeAnalysisTargets=$(CodeAnalysisTargets);
                CodeAnalysisTreatWarningsAsErrors=$(CodeAnalysisTreatWarningsAsErrors);
                StyleCopTreatErrorsAsWarnings=$(StyleCopTreatErrorsAsWarnings);
                DefineConstants=$(DefineConstants);
                BuildInParallel=$(BuildInParallel);
                GenerateSerializationAssemblies=$(GenerateSerializationAssemblies);
                "
            Targets="$(WebProjectTargets)" />
        <MSBuild
            Projects="$(MSBuildProjectDirectory)\Source\WebProjects\WebApp2\WebApp2.csproj"
            Properties="
                Configuration=$(Configuration);
                PackageLocation=$(MSBuildProjectDirectory)\Packages\WebApp2.zip;
                RunCodeAnalysis=$(RunCodeAnalysis);
                CodeAnalysisTargets=$(CodeAnalysisTargets);
                CodeAnalysisTreatWarningsAsErrors=$(CodeAnalysisTreatWarningsAsErrors);
                StyleCopTreatErrorsAsWarnings=$(StyleCopTreatErrorsAsWarnings);
                DefineConstants=$(DefineConstants);
                BuildInParallel=$(BuildInParallel);
                GenerateSerializationAssemblies=$(GenerateSerializationAssemblies);
                "
            Targets="$(WebProjectTargets)" />
        <MSBuild
            Projects="$(MSBuildProjectDirectory)\Source\WebProjects\Administrator\Administrator.csproj"
            Properties="
                Configuration=$(Configuration);
                PackageLocation=$(MSBuildProjectDirectory)\Packages\Administrator.zip;
                RunCodeAnalysis=$(RunCodeAnalysis);
                CodeAnalysisTargets=$(CodeAnalysisTargets);
                CodeAnalysisTreatWarningsAsErrors=$(CodeAnalysisTreatWarningsAsErrors);
                StyleCopTreatErrorsAsWarnings=$(StyleCopTreatErrorsAsWarnings);
                DefineConstants=$(DefineConstants);
                BuildInParallel=$(BuildInParallel);
                GenerateSerializationAssemblies=$(GenerateSerializationAssemblies);
                "
            Targets="$(WebProjectTargets)" />
        <MSBuild
            Projects="$(MSBuildProjectDirectory)\Source\OtherProjects\Service\Service.csproj"
            Properties="
                Configuration=$(Configuration);
                RunCodeAnalysis=$(RunCodeAnalysis);
                CodeAnalysisTargets=$(CodeAnalysisTargets);
                CodeAnalysisTreatWarningsAsErrors=$(CodeAnalysisTreatWarningsAsErrors);
                StyleCopTreatErrorsAsWarnings=$(StyleCopTreatErrorsAsWarnings);
                DefineConstants=$(DefineConstants);
                BuildInParallel=$(BuildInParallel);
                GenerateSerializationAssemblies=$(GenerateSerializationAssemblies);
                "
            Targets="$(OtherProjectTargets)" />
    </Target>
</Project> 
```

在这种情况下如何防止代码分析在同一个程序集中运行不止一次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-03T18:57:52.963

通常，我在“打包”我的二进制发行版之后运行代码分析命令行工具。MSBuildCodeMetrics是一个“胚胎”项目，用于在构建中运行指标[。](https://github.com/ericlemes/MSBuildCodeMetrics)

如果某些用户提交的方法具有太多行或具有太多圈复杂度，则其想法是中断构建，但该项目还没有达到这种成熟度。

无论如何，如果您想通过命令行运行指标，请尝试：

[http://msdn.microsoft.com/en-us/library/bb385914.aspx](http://msdn.microsoft.com/en-us/library/bb385914.aspx)

当然，您需要一些魔法才能将所有程序集复制到临时目录（如您的最终包），然后根据此目录运行指标。

# ios - 如何为通用浏览器提供内容？（使用用户代理）

> ID：15888324
> 
> 赞同：1
> 
> 时间：2013-04-08T20:26:13.883
> 
> 标签：ios, http-live-streaming, browser-detection

所以我在我的博客上发布了一些视频 - 请注意，这是儿童照片，可能很快就会导致儿童昏迷。

我想为 iOS 和 Mac 上的视频显示 HTTP Live 流媒体版本，但为其他所有人显示标准 MP4 文件。因此，如果有逻辑为任何人提供 Safari 的 m3u8 和其他人的 mp4，那就太好了。谢谢！

就目前而言，我必须提供 2 个不同的播放器（看起来很糟糕）

```
 <!-- Begin Video.js Responsive Wrapper -->
    <div style='max-width:800px;'>
        <div class='video-wrapper' style='padding-bottom:45.875%;'>

<!-- Begin Video.js -->
<video id="example_video_id_2142731582" class="video-js vjs-default-skin" width="800" height="367" poster="http://blog.thetroutmans.net/wp-content/uploads/2013/04/1stBikeRide/poster.png" controls preload="none" data-setup="{}">
    <source src="http://blog.thetroutmans.net/wp-content/uploads/2013/04/1stBikeRide/1stBikeRide.m3u8" type='video/mp4' />

</video>
<!-- End Video.js -->

        </div>
    </div>
    <!-- End Video.js Responsive Wrapper -->
    </p>

    <!-- Begin Video.js Responsive Wrapper -->
    <div style='max-width:800px;'>
        <div class='video-wrapper' style='padding-bottom:45.875%;'>

<!-- Begin Video.js -->
<video id="example_video_id_621346600" class="video-js vjs-default-skin" width="800" height="367" poster="http://blog.thetroutmans.net/wp-content/uploads/2013/04/1stBikeRide/poster.png" controls preload="none" data-setup="{}">
    <source src="http://blog.thetroutmans.net/wp-content/uploads/2013/04/1stBikeRide/First%20Bike%20Ride-Wi-Fi%20High.mp4" type='video/mp4' />

</video>
<!-- End Video.js -->

        </div>
    </div>
    <!-- End Video.js Responsive Wrapper -->
    </p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:50:41.643

您可以添加多个`<source>`元素，浏览器将遍历列表，直到找到它支持的源元素：

```
<video id="example_video_id_621346600" class="video-js vjs-default-skin" width="800" height="367" poster="http://blog.thetroutmans.net/wp-content/uploads/2013/04/1stBikeRide/poster.png" controls preload="none" data-setup="{}">
    <source src="http://blog.thetroutmans.net/wp-content/uploads/2013/04/1stBikeRide/First%20Bike%20Ride-Wi-Fi%20High.m3u8" type='application/x-mpegURL' />
    <source src="http://blog.thetroutmans.net/wp-content/uploads/2013/04/1stBikeRide/First%20Bike%20Ride-Wi-Fi%20High.mp4" type='video/mp4' />
</video> 
```

这是我不久前偶然发现并添加书签的[随机博客文章，其中更多地讨论了这一点。](http://designm.ag/tutorials/code-a-mobile-friendly-html5-video-stream-with-multiple-sources/)

# scala - 在 play framework 2.1.1 中更改模板中文本的语言

> ID：15888330
> 
> 赞同：2
> 
> 时间：2013-04-08T20:26:32.573
> 
> 标签：scala, templates, web, internationalization, playframework-2.1

我希望应用程序的用户可以更改我的 play2（play 2.1.1，scala 2.10.1）Web 应用程序中的语言。我在 i18n 的模板中使用 @Messages.get(...)。

我有

```
application.langs="en,ru" 
```

在 application.conf 中。我将“en”或“ru”传递给该方法：

```
def index = Action {
   Ok(views.html.index())
}

def changeLanguage(lang:String) = Action {
  implicit request =>
    Logger.logger.debug("Change user lang to : " + lang)
    val referrer = request.headers.get(REFERER).getOrElse(HOME_URL)
    Redirect(referrer).withLang(Lang(lang))
} 
```

路线：

```
GET     /                           controllers.Application.index
GET     /index                      controllers.Application.changeLanguage(lang ?= "ru") 
```

模板束（views.html.index）：

```
@()(implicit l: Lang)

@import play.i18n.Messages

...

<a href="/about">@Messages.get("about")</li>

...

<a href="index?lang=ru" id="ru"></a>
<a href="index?lang=en" id="en"></a>
... 
```

重定向页面后，我以相同的语言看到它。:(

我阅读了许多旧答案：我的模板中的隐式语言参数不起作用，重定向或使用 withLang(...) 方法调用的操作。这么久都没有好的解决办法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T07:45:53.003

我让它工作，所以有我的变化。在应用程序代码中（没有请求实例播放不知道从哪里获取带有语言的 cookie？）：

```
def index = Action {
 implicit request=>
   Ok(views.html.index())
} 
```

在模板中（play.api.i18n 自动导入）：

```
@()(implicit l: Lang)

...

<a href="/about">@Messages("about")</li>

...

<a href="index?lang=ru" id="ru"></a>
<a href="index?lang=en" id="en"></a>
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T14:35:10.017

我遇到了同样的问题，并在 play.i18n 上添加了我自己的消息解析类。

对于消息解析，您可以在此处有一个示例（在 Java 中）：[https ://github.com/adericbourg/proto-poll/blob/dev/app/util/user/message/Messages.java#L76](https://github.com/adericbourg/proto-poll/blob/dev/app/util/user/message/Messages.java#L76)

我的控制器 changeLang 的方法称之为：[https ://github.com/adericbourg/proto-poll/blob/dev/app/util/security/CurrentUser.java#L71](https://github.com/adericbourg/proto-poll/blob/dev/app/util/security/CurrentUser.java#L71)

它不认为这是一个好的解决方案（它需要更多代码，而且我是一个懒惰的人），但它确实有效。希望这可以帮助...

# php - CodeIgniter Helper Functions 可以使用数据库函数吗？

> ID：15888332
> 
> 赞同：15
> 
> 时间：2013-04-08T20:26:34.230
> 
> 标签：php, codeigniter, recursion, controller, helper

我的 CodeIgniter 控制器函数之一需要调用递归函数作为其功能的一部分。如果我把它放在控制器类中，函数调用会阻塞，如果我把它放在类之外，它就不能访问数据库函数`($this->db->get())`。让它成为一个辅助函数可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-04-08T20:34:08.237

您可以获得实例：

```
 $CI =& get_instance(); 
```

之后，您将能够使用`$CI->db`查询..

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-08T20:38:11.270

如果你想在库、助手中使用 $this 并访问所有方法：

```
 $this->ci =& get_instance();
    $this->ci->load->database(); 
```

你也可以这样做：

```
 $this->ci->config->item('languages'); 
```

或者

```
 $this->ci->load->library('session'); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-06-28T11:53:23.643

我们可以在 helper 中定义一个函数

```
if (!function_exists('getRecordOnId'))
{
    function getRecordOnId($table, $where){
        $CI =& get_instance();
        $CI->db->from($table);
        $CI->db->where($where);
        $query = $CI->db->get();
        return $query->row();
    }
} 
```

我们可以从视图中调用

```
$recordUser = getRecordOnId('users', ['id' => 5]); //here 5 is user Id which we can get from session or URL. 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-05-28T06:04:38.753

```
 //Select Data:

$this->db->select(‘fieldname seperated by commas’);

$this->db->from(‘table’);

$query = $this->db->get();

$results=$query->result() ;

//Joins:

$this->db->select(‘*’);
$this->db->from(‘table1′);
$this->db->join(‘table2′, ‘table2.id = table1.id’);

$query = $this->db->get(); 
```

我们可以从 [http://skillrow.com/codeignitor-database-functions/得到它](http://skillrow.com/codeignitor-database-functions/)

# javascript - OpenTextFile 给出错误自动化服务器无法创建对象

> ID：15888341
> 
> 赞同：1
> 
> 时间：2013-04-08T20:27:19.610
> 
> 标签：javascript, filesystems

我创建了这个方法来创建一个文本文件作为页面的日志，该页面具有不同的按钮，这些按钮使用来自不同文本字段的参数调用函数：

```
function WriteToFile(data) {
    var currentdate = new Date(); 
    var datetime = "Time: " + currentdate.getDate() + "/" + (currentdate.getMonth()+1)  + "/" + currentdate.getFullYear() + " @ " + currentdate.getHours() + ":" + currentdate.getMinutes() + ":" + currentdate.getSeconds();
    var fso = new ActiveXObject("Scripting.FileSystemObject");
    var a = fso.OpenTextFile("C:\\logs\\log.txt", 8);
    a.WriteLine(datetime);
    a.WriteLine(data + "\n");
    a.Close();
 } 
```

当我使用 C: 驱动器时，它工作得非常好。不幸的是，这将在 Z: 驱动器中用于生产，因此其他人也可以使用该页面。当我将它复制到 Z: 驱动器并更改此行时：

```
var a = fso.OpenTextFile("C:\\logs\\log.txt", 8); 
```

到以下：

```
var a = fso.OpenTextFile("Z:\\logs\\log.txt", 8); 
```

它给了我一个错误说：

> 自动化服务器无法创建对象

我正在使用 IE8。关于我做错了什么以及如何解决这个问题的任何想法？

# sql - 如何在增加变量和加入结果后运行 sql n 次

> ID：15888342
> 
> 赞同：0
> 
> 时间：2013-04-08T20:27:23.123
> 
> 标签：sql, sql-server-2008, tsql

我有一个带有 的事务表（历史）`CreatedDate`，这个事务与员工事务表有关。（transact_id 中的内连接）

话虽如此，问题来了：我需要查询这些表并按月获取状态，因为在一年中，`CreatedDate`可能会发生变化。例如，7 月份的员工更新将创建一个新行，但这不应影响 3 月份的总数。

该解决方案看起来像一个**forech**，但我如何才能在最后加入所有行？结果应该是这样的：

*   一月 - 123 美元
*   二月 - 234 美元
*   三月 - 123 美元
*   ...

我得到每个员工的最后状态：

```
select AllTransact.id_employee, AllTransact.id_department from (

select id_employee, id_department, rank() over (partition by id_employee order by created_date desc) desc_rank
from Transact_Employee TransEmployee
inner join Transact     on TransEmployee.ID_Transact = Transact.ID_Transact 
                        and Transact.Status = 8 
                        and Transact.Created_Date < @currentMonth) AllTransact

where desc_rank = 1 
```

*我不想复制并粘贴所有代码 12 次。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:22:16.537

您可以对许多列进行分区。`rank() OVER (partition BY [id_employee],datepart(month,[Created_Date]) ORDER BY [Created_Date] DESC)`会给你你现在拥有的东西，但每个月（它不关心那个月是哪一年，所以你也需要按年分区或添加对 created_date 的限制）。

# php - Nivo Slider 不会从 PHP 文件加载 Ajax 响应

> ID：15888345
> 
> 赞同：0
> 
> 时间：2013-04-08T20:27:33.563
> 
> 标签：php, jquery, ajax, image, nivo-slider

我正在尝试使用 PHP 将图像导入 HTML，但 NivoSlider 没有加载它。我寻找问题的原因。我正在打印一条*响应*和正确的警报消息。

这是 HTML 和 AJAX 查询：

```
<div id="workcontent" class="pcontent" style="display:none;">
        <div class="slider-wrapper theme-default">
            <div id="slider" class="nivoSlider">

            </div>
        </div>
        <script>
            $(document).ready(function() {
                var wl = $('#worklist div');
                wl.on('click', function(){
                    var name = $(this).attr('id');
                    console.log(name);
                    $.ajax({
                        url: 'read.php',
                        type: 'POST',
                        data: { data : name }
                    }).done(function (response) {
                        $('#slider').prepend(response);
                        alert(response);
                    });

                });
            });
        </script>
        <div id="back"></div>
    <div id="backcontainer">
        <div id="back">
            <a href="index.php">Back</a>
        </div>
    </div><!--End backcontainer-->
</div><!--End content--> 
```

这是另一个 jQuery：

```
<script>
    $(document).ready(function() {
        $('#slider').nivoSlider(function(){alert('OK');});
    });
</script> 
```

不显示此警报！):

最后，这是PHP代码：

```
<?php
if (isset($_POST["data"])){
    if ($_POST["data"] == "") {
            echo "data ures";
    } else {
        $data = $_POST["data"];
        $fname = "content/".$data."/*.*";
        $files = glob($fname);
        for ($i=0; $i<count($files); $i++)
        {
            $num = $files[$i];
            echo '<img src="'.$num.'" data-thumb="'.$num.'">';
        }
    }
} else {
    echo "nem jott data";
}
?> 
```

对不起，我的英语不好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:49:34.430

**NivoSlider 不将函数作为参数。**

也`.nivoSlider()`可能在AJAX 调用返回它的响应**之前调用。**更好的解决方案是：

```
$(document).ready(function() {
    $.ajax({
        url: 'read.php',
        type: 'POST',
        data: { data : name }
    }).done(function (response) {
        $('#slider').prepend(response).nivoSlider( {} );    
    });
}); 
```

现在您可以确定`#slider`包含来自响应正文的图像，以便 NivoSlider 可以对它们进行操作。

# php - 是否可以从我的站点中的其他站点打开 RSS 提要链接？

> ID：15888346
> 
> 赞同：1
> 
> 时间：2013-04-08T20:27:34.207
> 
> 标签：php, rss, feed

我只是在徘徊，是否可以从显示 RSS 提要的同一站点内的其他站点打开 RSS 提要链接？

例如：

我从天空体育获得 RSS 提要，并在我自己的网站上显示图像、标题和链接……当有人点击 RSS 提要的链接时，他们将被指向该新闻的天空体育页面。现在，我是否可以在我自己的网站中打开新闻页面而不是将用户/读者指向天空的网站？

我不知道，但也许使用 iframe？

这就是我获取 RSS 提要的方式：

```
<?php
$rss = simplexml_load_file('http://www.fifa.com/rss/index.xml');
$limit = 1; // Change this number to however many items you want to display
$counter = 1;
if($rss)
{
$items = $rss->channel->item;
}
?>

<?php
$rss = simplexml_load_file('http://www.skysports.com/rss/0,20514,12010,00.xml');
$limit = 1; // Change this number to however many items you want to display
$counter = 1;
if($rss)
{
$items = $rss->channel->item;
}
foreach ($rss->channel->item as $item) {
    if($counter <= $limit) {
  echo "<div style='border: solid #0C0 1px; width:150px; height:100px;'><img src=\"" . (string)$item->enclosure['url'][0] . "\" style='width:150px; height:100px;'></div>";
   echo "<p>" . $item->description . "</p>";

  $counter++;
    }
} 
?> 
```

# algorithm - 包含电话号码的庞大数据集的散列和加密技术

> ID：15888351
> 
> 赞同：6
> 
> 时间：2013-04-08T20:28:08.997
> 
> 标签：algorithm, security, encryption, cryptography, hash-function

**问题描述：** 我正在处理一个高度敏感的数据集，其中包含人们的电话号码信息作为列之一。我需要应用（对它们进行加密/散列函数）将它们转换为一些编码值并进行分析。它可以是单向散列 - 即，在处理加密数据后，我们不会将它们转换回原始电话号码。本质上，我正在寻找一个匿名器，它可以获取电话号码并将它们转换为一些我可以进行处理的随机值。建议执行此过程的最佳方法。欢迎就使用的最佳算法提出建议。

**更新：数据** 集的大小 我的数据集非常大，有数百 GB。

**更新：敏感** 敏感，我的意思是电话号码不应该是我们分析的一部分。所以，基本上我需要一个单向散列函数但没有冗余 - 每个电话号码应该映射到唯一的值 - 两个电话号码应该不映射到相同的值。

**更新：实施？**

感谢您的回答。我正在寻找详细的实现。我正在通过 python 的 hashlib 库进行散列，它是否一定会执行您建议的相同步骤？[链接在这里](http://docs.python.org/2/library/hashlib.html)

你能给我一些示例代码来实现这个过程，最好是在 Python 中吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T21:07:01.093

为您的数据集（16 或 32 字节）生成密钥并保密。使用此密钥对您的数据使用[Hmac-sha1 ，然后使用 base 64 对其进行编码，并且每个电话号码都有一个随机的唯一字符串，该字符串不可逆（没有密钥）。](http://en.wikipedia.org/wiki/Hash-based_message_authentication_code)

**[使用Keyczar](https://pypi.python.org/pypi/python-keyczar)的示例（具有 256 位密钥的 Hmac-Sha1）：**

创建随机密钥：

```
$> python keyczart.py create --location=path_to_key_set --purpose=sign
$> python keyczart.py addkey --location=path_to_key_set --status=primary 
```

匿名电话号码：

```
from keyczar import keyczar

def anonymize(phone_num):
  signer = keyczar.Signer.Read("path_to_key_set");
  return signer.Sign(phone_num) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T21:32:29.600

如果您要使用密码学，您希望对每个电话号码应用[伪随机函数](http://en.wikipedia.org/wiki/Pseudorandom_function_family)并丢弃密钥。诸如 SHA-256 之类的防冲突散列不能提供正确的安全保证。但是，真的有*这么多*不同的电话号码，您不能只是逐步构建一个表示实际随机函数的地图吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T23:05:24.477

按相应的列对数据进行排序并开始计算不同的值...用它们各自的计数器值替换实际值...无冲突...一种方式...

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-08T22:55:29.943

“*所以，基本上我需要一个单向散列函数，但没有冗余——每个电话号码应该映射到唯一的值——两个电话号码不应该映射到相同的值。* ”

这需要基于加密哈希函数的解决方案。MD5 和 SHA-1 是最著名的例子，并且在这方面工作得很好。您会读到“MD5 已被破解”，但对于您的目的而言，这并不重要。

# excel - 使用 vba 连接多个范围

> ID：15888353
> 
> 赞同：8
> 
> 时间：2013-04-08T20:28:14.903
> 
> 标签：excel, vba, concatenation

我有许多范围可以独立连接，并将连接范围的值放入不同的单元格中。

我想：
连接范围 A1:A10 中的值并将结果放入 F1
然后连接范围 B1:B10 并将结果放入 F2
然后连接范围 C1:C10 并将结果放入 F3 等。

以下宏连接范围 A1:A10，然后将结果放入 F1 （这是我想要的）。然而，它还将第一个串联的信息存储到内存中，这样当它进行下一个串联时，在单元格 F2 中，我得到了 F1 和 F2 的串联结果。

```
Sub concatenate()

    Dim x As String
    Dim Y As String

For m = 2 To 5

    Y = Worksheets("Variables").Cells(m, 5).Value 

    'Above essentially has the range information e.g. a1:a10 in sheet variables

    For Each Cell In Range("" & Y & "") 'i.e. range A1:A10
        If Cell.Value = "" Then GoTo Line1 'this tells the macro to continue until a blank cell is reached
        x = x & Cell.Value & "," 'this provides the concatenated cell value
    Next

Line1:

    ActiveCell.Value = x

    ActiveCell.Offset(1, 0).Select

Next m

End Sub 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-09T07:25:24.020

这是我的 ConcatenateRange。如果您愿意，它允许您添加分隔符。它经过优化以处理大范围，因为它通过将数据转储到变体数组中并在 VBA 中使用它来工作。

你会像这样使用它：

```
=ConcatenateRange(A1:A10) 
```

编码：

```
Function ConcatenateRange(ByVal cell_range As range, _
                    Optional ByVal seperator As String) As String

Dim newString As String
Dim cellArray As Variant
Dim i As Long, j As Long

cellArray = cell_range.Value

For i = 1 To UBound(cellArray, 1)
    For j = 1 To UBound(cellArray, 2)
        If Len(cellArray(i, j)) <> 0 Then
            newString = newString & (seperator & cellArray(i, j))
        End If
    Next
Next

If Len(newString) <> 0 Then
    newString = Right$(newString, (Len(newString) - Len(seperator)))
End If

ConcatenateRange = newString

End Function 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-08T20:49:16.963

...我会以非常不同的方式这样做...为什么不按照以下方式创建一个函数：

```
Function ConcatMe(Rng As Range) As String

Dim cl As Range

   ConcatMe = ""

   For Each cl In Rng
      ConcatMe = ConcatMe & cl.Text
   Next cl

End Function 
```

然后，例如，设置 F1 =`ConcatMe(A1:A10)`或，然后编写代码将函数分配给您想要的单元格......

或者，正如@KazJaw 在他的评论中提到的那样，只是`x=""`在重新循环之前设置。

希望这可以帮助

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-14T12:29:53.357

它与这里已经发布的想法相似。但是，我使用 for each 循环而不是带有嵌套 for 循环的数组设置。

```
Function ConcRange(ByRef myRange As Range, Optional ByVal Seperator As String = "")

ConcRange = vbNullString

Dim rngCell As Range

For Each rngCell In myRange
    If ConcRange = vbNullString Then
        If Not rngCell.Value = vbNullString Then
            ConcRange = CStr(rngCell.Value)
        End If
    Else
        If Not rngCell.Value = vbNullString Then
            ConcRange = ConcRange & Seperator & CStr(rngCell.Value)
        End If
    End If
Next rngCell

End Function 
```

我想这会比设置的数组更快，因为每次运行此函数时都不会创建一个新数组。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-06-06T14:15:39.527

在 Next m 之前插入简单语句：x="" – KazimierzJawor 2013 年 4 月 8 日 20:43

我花了几分钟才注意到这个答案在评论中：p

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T22:01:55.053

谢谢大家，出于我的目的，我修改了你的建议并修改了我的代码，因为它不太适合一个简洁的函数，因为我需要它更加动态。请参阅下面的代码。它正是我需要的。

```
Sub concatenate()

Dim x As String
Dim Y As String

For Q = 1 To 10 'This provides a column reference to concatenate - Outer For statement
For T = 1 To 10 'This provides a rows reference to concatenate - Inner for statement

For Each Cell In Cells(T, Q) 'provides rows and column reference
If Cell.Value = "" Then GoTo Line1   'this tells the macro to continue until a blank cell is reached
x = x & Cell.Value & ","   'This provides the concatenated cell value and comma separator
Next ' this loops the range

Next T  'This is the inner loop which dynamically changes the number of rows to loop until a blank cell is reached

Line1:
On Error GoTo Terminate 'Terminates if there are less columns (max 10) to concatenate

ActiveCell.Value = Mid(x, 1, Len(x) - 1) 'This basically removes the last comma from the last concatenated cell e.g. you might get for a range 2,3,4, << this formula removes the last comma to
'give 2,3,4

ActiveCell.Offset(1, 0).Select 'Once the concatenated result is pasted into the cell this moves down to the next cell, e.g. from F1 to F2

x = ""  'The all important, clears x value after finishing concatenation for a range before moving on to another column and range

Next Q 'After one range is done the second column loop kicks in to tell the macro to move to the next column and begin concatenation range again

Terminate: 'error handler
End Sub 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-17T23:28:30.450

@Issun 的解决方案不接受工作表数组公式的输出作为“cell_range”参数的参数。但是对@Issun 的代码稍作修改可以解决这个问题。我还添加了一个检查，该检查忽略值为`FALSE`.

```
Function ConcatenateRange( _
        ByVal cellArray As Variant, _
        Optional ByVal seperator As String _
            ) As String

    Dim cell As Range
    Dim newString As String
    Dim i As Long, j As Long

    For i = 1 To UBound(cellArray, 1)
        For j = 1 To UBound(cellArray, 2)
            If Len(cellArray(i, j)) <> 0 Then
                If (cellArray(i, j) <> False) Then
                    newString = newString & (seperator & cellArray(i, j))
                End If
            End If
        Next
    Next

    If Len(newString) <> 0 Then
        newString = Right$(newString, (Len(newString) - Len(seperator)))
    End If

    ConcatenateRange = newString

End Function 
```

例如：

```
A       B       (<COL vROW)
------  ------  -----------------
one     1         3
two     1         4
three   2         5
four    2         6 
```

在单元格 C1 中输入下面的公式，然后按 CTRL+ENTER 将公式存储为数组公式：

```
{=ConcatenateRange(IF(B3:B6=1,A3:A6),CHAR(10))} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-14T13:18:33.573

`ConcatenateRange`如果它们不为空且为空“”字符串，则连接范围内的所有单元格的函数。

```
 Function ConcatenateRange(cellRange As Range, Optional Delimiter As String) As String
    Dim cel As Range, conStr As String

    conStr = ""
    If Delimiter <> "" Then
      For Each cel In cellRange
        If VarType(cel) <> vbEmpty And Trim(cel) <> "" Then conStr = conStr & cel & Delimiter
      Next
      ConcatenateRange = Left(conStr, Len(conStr) - Len(Delimiter))
    Else
      For Each cel In cellRange
        If VarType(cel) <> vbEmpty And Trim(cel) <> "" Then conStr = conStr & cel
      Next
      ConcatenateRange = conStr
    End If
End Function 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-01-02T14:09:11.403

我正在进一步寻找是否有更好的方法来编写连接函数并发现了这一点。似乎我们都有相同的功能工作原理。所以没关系。

但我的函数不同，它可以接受多个参数，结合范围、文本和数字。

我假设分隔符是强制性的，所以如果我不需要它，我只需将“”作为最后一个参数）。

我还假设不会跳过空白单元格。这就是为什么我希望函数采用多个参数的原因，所以我可以轻松地省略那些我不想在连接中使用的参数。

使用示例：

`=JoinText(A1:D2,F1:I2,K1:L1,";")`

您还可以在参数中同时使用文本和数字：

`=JoinText(A1:D2,123,F1:I2,K1:L1,"PQR",";")`

我很想听听任何可以改进的意见或建议。

这是代码。

```
Public Function JoinText(ParamArray Parameters() As Variant) As String
    Dim p As Integer, c As Integer, Delim As String

    Delim = Parameters(UBound(Parameters))

    For p = 0 To UBound(Parameters) - 1
        If TypeName(Parameters(p)) = "Range" Then
            For c = 1 To Parameters(p).Count
                JoinText = JoinText & Delim & Parameters(p)(c)
            Next c
        Else
            JoinText = JoinText & Delim & Parameters(p)
        End If
    Next p

    JoinText = Replace(JoinText, Delim, "", , 1, vbBinaryCompare)

End Function 
```

* * *

## 回答 #9

> 赞同：-5
> 
> 时间：2014-04-17T06:28:31.873

**它非常简单的兄弟，**从 Excel 中看出来。不需要所有繁琐的公式或 VBA。

只需复制您需要连接的所有单元格并将其粘贴到记事本中。现在只需选择行/列之间的空间（实际上是 TAB 空间）并找到并替换它.. 完成.. 所有单元格都连接起来。现在只需将其复制并粘贴到列中并验证.. 就是这样:) 享受。

我建议您为此使用 Notepad++ :) Koodos

**Vimarsh 博士植物生物技术。** /

# emacs - Gnus：如何根据发送电子邮件的帐户归档电子邮件？[gcc-self 没有按预期工作]

> ID：15888354
> 
> 赞同：4
> 
> 时间：2013-04-08T20:28:17.040
> 
> 标签：emacs, gnus

我有两个邮件帐户，`foo.bar@uni.edu`并且`foo.bar@gmail.com`. 我想在相应的“已发送邮件”文件夹 (`nnimap+foo.bar@uni.edu:Sent Items`和`foo.bar@gmail.com:[Google Mail]/Sent Mail`) 中存档我从任一邮件发送的邮件。

我试图设置

```
(setq gnus-message-archive-group
  '(("uni" "nnimap+foo.bar@uni.edu:Sent Items")
    ("gmail" "nnimap+foo.bar@gmail.com:[Google Mail]/Sent Mail")
    )) 
```

但这并没有设置 Gcc（新消息没有 Gcc；这里有什么解决方案吗？）。因此，如果我在 *Group* via 中打开一条新消息，我会回到`(setq gnus-message-archive-group "nnimap+foo.bar@uni.edu:Sent Items")`正确设置 Gcc（对于主帐户） 。`foo.bar@uni.edu``m`

然后我尝试使用`gcc-self`via`gnus-parameters`正确存档发送的邮件：

```
(setq gnus-parameters
       `((,(rx "nnimap+foo.bar@uni.edu")
         (gcc-self . "nnimap+foo.bar@uni.edu:Sent Items"))
         (,(rx "nnimap+foo.bar@gmail.com")
         (gcc-self . "foo.bar@gmail.com:[Google Mail]/Sent Mail")))) 
```

手册（[http://www.gnus.org/manual/gnus_28.html](http://www.gnus.org/manual/gnus_28.html)）说如果`gcc-self`是一个字符串，它只是简单地作为 Gcc 标头插入。我做了以下经验：无论我在 *Group* via 中开始一条新消息`C-u m`（`m`如前所述，Gcc 是“nnimap+foo.bar@uni.edu:Sent Items”），Gcc 都被认为是点的名称在`m`被击中之前在 *Group* 中播放。因此，如果点是 on `nnimap+foo.bar@gmail.com:Drafts`，则 Gcc 将是`Gcc: nnimap+foo.bar@gmail.com:Drafts`（而不是`foo.bar@gmail.com:[Google Mail]/Sent Mail`）。如果通过写入，如何解决此问题并将消息存档在相应的已发送邮件文件夹中`C-u m`？换句话说，为什么`Gcc`' 没有正确设置？

[这是在 Emacs 24.3.50.1，Gnus v5.13 上]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T20:19:31.627

我和你有完全一样的问题。即使我在发送消息时将 gcc-self 参数添加为“INBOX.Sent”，但它最终以“nnfolder+archive:sent.YYYY-MM”结尾

我的设置是我有一个默认帐户（家庭）和一个辅助帐户（工作）两个 imap（但不是 Gmail，希望这个答案仍然适用）

通过大量的试验和错误，我设法让它按我想要的方式运行：工作电子邮件保存在工作发送文件夹中，家庭电子邮件保存在家庭发送文件夹中。

在 gnus-parameters 中，我只是将我的`gcc-self`参数更改为 gcc 并且它起作用了！但是，仅适用于辅助地址。

对于我设置的默认地址`gnus-message-archive-group`

我的 ~/.gnus 文件的删减

```
(setq gnus-select-method
      '(nnimap "home"
                (nnimap-address "mail.homeaddress.com")
                (nnimap-server-port 143)
                (nnimap-stream starttls)
                (nnimap-inbox "INBOX")
                 ))

(setq gnus-secondary-select-methods
      '((nnimap "work"
                (nnimap-address "mail.workaddress.com")
                (nnimap-server-port 143)
                (nnimap-stream starttls)
                (nnimap-inbox "INBOX"))))
(setq gnus-parameters
      '(
        ("work"
         (posting-style
          (address "me@workaddress.com")
          (gcc "nnimap+work:INBOX.Sent")))))

(setq gnus-message-archive-group "nnimap:INBOX.Sent") 
```

请注意，我没有任何`posting-styles`回家。

我希望这有帮助。

Emacs 版本 24.3.1，Gnus v5.13

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-25T13:59:05.580

我在 Gnus 设置过程中遇到了同样的问题。我将 Gmail 用于个人资料，将 Outlook 用于工作。我的目标是使用我目前在 Gnus 中使用的相应帐户来撰写/回复消息。根据[robearles](https://stackoverflow.com/users/1308653/robsearles)的建议，我设法使用`gnus-posting-styles`. 这是我使用的示例代码。

```
;; Archive outgoing email in Sent folder on imap.gmail.com
(setq gnus-message-archive-method '(nnimap "imap.gmail.com")
      gnus-message-archive-group "[Gmail]/Sent Mail")

;; Set return email address based on incoming email address
(setq gnus-posting-styles
      `((".*"
        (address "foo.bar@gmail.com")
        (name "Foo Bar")
        ("X-Message-SMTP-Method" "smtp smtp.gmail.com 587 foo.bar@gmail.com")
       )
       ("^nnimap[+]outlook:.*"
       (address "foo.bar@outlook.com")
       (name "Foo Bar")
       ("X-Message-SMTP-Method" "smtp smtp-mail.outlook.com 587 foo.bar@outlook.com")
       (gcc "\"nnimap+outlook:Sent Items\"")
       )
      )
    ) 
```

`gnus-message-archive-method`并设置将`gnus-message-archive-group`邮件归档到我的 Gmail 文件夹的默认归档行为`Sent`。中的`gcc`标记指示 Gnus在我使用 Outlook 帐户时`gnus-posting-styles`将邮件归档到我的 Outlook文件夹中。`Sent`我还可以根据我使用`X-message-SMTP-Method`标签处理的电子邮件帐户自动选择外发邮件服务器。Outlook 似乎会在发送邮件时自动将邮件存档到`Sent`文件夹中，因此我`(gcc nil)`在实际设置中使用它来避免重复。您当然可以将 Outlook 更改为您正在使用的任何邮件服务。

# ruby-on-rails - 是否可以查看是否存在名称与给定正则表达式匹配的参数？

> ID：15888359
> 
> 赞同：0
> 
> 时间：2013-04-08T20:28:28.773
> 
> 标签：ruby-on-rails, regex, ruby-on-rails-3, parameters

我说的是参数名称，而不是值。我真的找不到任何东西。

我想知道是否有名称匹配 /[a-zA-Z]+_page/ 的参数。该值不相关。

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T20:32:41.743

尝试以下操作：

```
params.keys.any? { |key| key.match /[a-zA-Z]+_page/ } 
```

# javascript - 遍历父元素

> ID：15888360
> 
> 赞同：2
> 
> 时间：2013-04-08T20:28:29.303
> 
> 标签：javascript, jquery, html, css, iteration

我有一些看起来像这样的 HTML（示例 1）：

```
<tr id="q_19030" class="q_grid " style="background: none repeat scroll 0% 0% yellow;">
  <a class="reset-button" data-question-id="g_1363"></a>
</tr> 
```

我也有一些看起来像这样的 HTML（示例 2）：

```
<fieldset id="q_19044" class="q_default " style="background: none repeat scroll 0% 0% yellow;">
  <a class="reset-button" data-question-id="q_19044"></a>
</fieldset> 
```

我有一些这样的 jQuery 代码：

```
$(document).ready(function() {
  $('.surveyor_radio').parent().parent().append('<a class="reset-button">Reset</a>');

  $('.reset-button').click(function () {
      $('#'+$(this).data('question-id') + ' input[type="radio"]:checked').prop('checked', false).trigger('change');
  });

  $('fieldset').each(function () {
      var qid = $(this).attr('id');
      $('.reset-button', $(this)).attr('data-question-id', qid);
  });
}); 
```

jQuery 代码具有三个功能：

一个向单选问题添加一个重置按钮，另一个在单击重置按钮后取消选中这些问题，而第三个将适当的 ID 号分配给`data-question-id`重置按钮的属性。

## 问题

**示例 2**中的代码是正确的，其中`data-question-id`id 与其父对象的 id 匹配`fieldset id`。

但是，字段集并不总是包含**示例 1**`data-question-id`中所示的正确值，其中它是特定行的 id。

 **始终可以依赖的一个假设是正确的 id 将始终是重置按钮的父级。

## 问题

如何适当地迭代每个重置按钮父级，获取其 id，然后设置`data-question-id`重置按钮的。

我最好的尝试是`$(".reset-button").parent().each().attr("id");`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:30:25.663

遍历`.reset-button`元素，并将每个元素设置`data-question-id`为父 id ：

```
$(".reset-button").each(function() {
    $(this).data('question-id', $(this).parent().attr('id'));
}); 
```

请注意，在 DOM 检查器中查看它时，这不会更改 data 属性，因为 jQuery 在内部存储它，但会更改稍后检索到的值`data();`

你也可以这样做：

```
$(".reset-button").attr('data-question-id', function(i, val) {
    return this.parentNode.id || val;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T20:31:33.413

```
$(".reset-button").each(function() {
    var rid = $(this).parent().prop('id'); // get the parent ID
    $(this).data('question-id',rid); // set the data-question-id of the reset button 
}); 
```**

# visual-studio - 卸载 IE10 后 Visual Studio 2010 无法调试 javascript

> ID：15888361
> 
> 赞同：3
> 
> 时间：2013-04-08T20:28:30.693
> 
> 标签：visual-studio

我的开发机器从 IE9 自动更新到 IE10。后者在我们的开发网站上已损坏，因此我卸载了 IE 10“更新”以恢复到 IE9。

Visual Studio 2010 将不再将其调试器附加到浏览器。我可以在 IE9 开发者模式下调试，或者尝试启动一个新的 VS'10 实例来调试（但这也不起作用。）

如何恢复 VS'10 和 IE'09 之间的链接？

编辑：我得到标题为“Visual Studio Just-In-Time Debugger”的对话框。

“在 iexplore.exe [4824] 中发生未处理的异常（'脚本断点'）

可能的调试器：Microsoft Visual Studio 2010 的新实例 ....“我无法附加到已经运行的 VS 实例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T12:39:53.250

尝试重新安装 .net 库。

[.Net 库](http://www.microsoft.com/en-us/download/details.aspx?id=21)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T14:30:39.830

这篇文章提出了一个[解决方案](https://stackoverflow.com/questions/14343268/visual-studio-fails-debugging-javascript-in-ie9-says-the-correct-version-of-p)：

> 解决方法如下： 关键是消息说 pdm.dll 的错误版本没有注册。显然 IE10 安装提供了一个新的 pdm.dll 并且重新安装 IE9 并没有替换它。我在另一个系统上找到了一个旧版本，将它复制到 C:\Program Files\Common Files\microsoft shared\VS7Debug 文件夹，注册它，现在 VS2010 调试又可以工作了。

但是，我还不确定如何下载此解决方案中所需的文件。

# php - PHP 检查有效的函数返回

> ID：15888362
> 
> 赞同：0
> 
> 时间：2013-04-08T20:28:32.103
> 
> 标签：php, function, return

我有这个代码：

`$myVariable = someRanDomFunction($blah)`

问题是它`someRanDomFunction()`可能返回一个数组、一个对象、一个空数组、布尔值或 NULL。

如果最好的检查方法`$myVariable`有一些数据怎么办？

现在我正在这样做：

`!empty($myVariable )`

它会涵盖所有情况吗？或者我应该这样做`($myVariable != NULL && !empty($myVariable ))`？

**更新***

“一些数据”是指`TRUE`如果它的布尔值，不是空数组，以及除 NULL 以外的任何值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T20:30:57.417

```
var_dump(empty(NULL)); // returns bool(true) 
```

空就够了。如果您说布尔值没有数据，请检查 !is_bool。（`empty(false)`也返回`true`）

或者更好，只使用`if ($result)`; 这应该足够了。

或者你称之为“一些数据”？

更新：你需要什么：

> php > var_dump(!empty([]));
> 
> > 布尔（假）
> 
> php > var_dump(!empty(""));
> 
> > 布尔（假）
> 
> php > var_dump(!empty(false));
> 
> > 布尔（假）
> 
> php > var_dump(!empty(true));
> 
> > 布尔（真）
> 
> php > var_dump(!empty(null));
> 
> > 布尔（假）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T20:33:20.403

简单地进行隐式布尔检查将排除`false`,`array()`和`null`.

```
if ($myVariable) {
    //will execute as long as myVariable isn't an empty array, false, null, or 0 / '0'
} 
```

`!empty()`做同样的事情，增加了关于未定义变量/数组索引的警告的抑制。不过，它有点措辞。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T20:33:44.423

如果检查null，则需要使用`!==`（严格检查[http://php.net/manual/en/language.operators.comparison.php](http://php.net/manual/en/language.operators.comparison.php)）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T20:33:56.843

如果您的 someRanDomFunction 可能返回一个数组、对象、布尔值或 null，那么这是不好的方法。逻辑有问题。

但是，您可以使用**OR** (||) 运算符，而不是 AND。

```
($myVariable != NULL || !empty($myVariable) || $myVariable == false) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T20:34:43.160

如果您事先期望一些特定的数据，最好明确地检查它。PHP 有很多函数要做，所以它们从`is_`

基本上空是检查空值，所以你的第二种方法是多余的。你也可以使用 isset

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-08T20:41:50.067

如果数组、对象和布尔值 true 是数据 AND 其余：空数组、布尔值 false 或 NULL，则不是“数据”。

那么解决方案就是这个：

```
$myVariable = someRanDomFunction($blah);

if(!empty($myVariable)) {
//...
} 
```

# java - ScheduledThreadPoolExecutor 的构造函数中“核心池大小”的含义

> ID：15888366
> 
> 赞同：16
> 
> 时间：2013-04-08T20:28:46.027
> 
> 标签：java, threadpool, threadpoolexecutor

我是新手`ScheduledThreadPoolExecutor`（因为我通常使用 simple `Timer`，但人们一直反对它），我不太明白传递给`ScheduledThreadPoolExecutor(int)`构造函数的适当整数值是什么。

谁能解释一下？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2016-08-19T13:31:25.363

在 的情况下`ScheduledThreadPoolExecutor`，`corePoolSize`是为执行计划操作而创建的最大线程数。这个线程池是固定大小的，空闲线程保持活动状态。

DrunkenRabbit 的答案很简单，因为`ScheduledThreadPoolsExecutor`文档明确表示（根本不会出现线程数峰值）：

> 虽然这个类继承自 ThreadPoolExecutor，但一些继承的调优方法对它没有用。特别是，**因为它充当使用 corePoolSize 线程**和无界队列的固定大小的池，所以**对 maximumPoolSize 的调整没有有用的效果。**

现在至于值，合理的数字将是应用程序正在运行的 CPU 内核数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T20:36:19.547

本质上，corePoolSize 是要在池中维护的线程数。

例如。如果您希望定期有 10 个并发请求，但峰值为 20。corePoolSize 应为 10，最大值为 20。这样，执行程序将创建最多 10 个新线程，即使空闲线程可用。

如[JavaDocs中所述](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ThreadPoolExecutor.html)

> 核心和最大池大小
> 
> ThreadPoolExecutor 将根据 corePoolSize（请参阅 getCorePoolSize()）和 maximumPoolSize（请参阅 getMaximumPoolSize()）设置的边界自动调整池大小（请参阅 getPoolSize()）。当在方法 execute(java.lang.Runnable) 中提交了一个新任务，并且运行的线程少于 corePoolSize 时，即使其他工作线程处于空闲状态，也会创建一个新线程来处理该请求。如果运行的线程数多于 corePoolSize 但少于 maximumPoolSize，则仅当队列已满时才会创建新线程。通过将 corePoolSize 和 maximumPoolSize 设置为相同，您可以创建一个固定大小的线程池。通过将 maximumPoolSize 设置为基本上无界的值，例如 Integer.MAX_VALUE，您允许池容纳任意数量的并发任务。最典型的是，

# php - mail.ru 上的俄语编码与 phpmailer 不一致

> ID：15888378
> 
> 赞同：0
> 
> 时间：2013-04-08T20:29:47.020
> 
> 标签：php, encoding, phpmailer

我向俄罗斯用户发送自动电子邮件，我使用 utf-8 编码，当他们在 gmail 中打开时显示完美，在 Outlook 中显示不正确，但在俄罗斯用户流行的电子邮件帐户 mail.ru 中显示为 gobblygook。

所以我们用acryllic从Outlook向mail.ru发送了一封电子邮件，它显示相同的内容没有问题，然后我将编码更改为windows-1251，它再次在gmail中显示正常，但在mail.ru中（谁没有选项我可以找到切换编码并且不支持 UTF-8）它显示为不同类型的 gooblygook。

代码在这里：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=koi8-r" />
<title>Untitled Document</title>

</head>

//error_reporting(E_ALL);
error_reporting(E_STRICT);

date_default_timezone_set('America/Toronto');

require_once('PHPMailer_5.2.2/class.phpmailer.php');
//include("class.smtp.php"); // optional, gets called from within class.phpmailer.php if not already loaded

$mail             = new PHPMailer();

$body = "Это письмо отправлено потому. This is english";

$mail->IsSMTP(); // telling the class to use SMTP
$mail->Host       = "smtp.gmail.com"; // SMTP server
$mail->SMTPDebug  = 1;                     // enables SMTP debug information (for testing)
                                           // 1 = errors and messages
                                           // 2 = messages only
$mail->SMTPAuth   = true;                  // enable SMTP authentication
$mail->SMTPSecure = "ssl";                 // sets the prefix to the servier
$mail->Host       = "smtp.gmail.com";      // sets GMAIL as the SMTP server
$mail->Port       = 465;                   // set the SMTP port for the GMAIL server
$mail->Username   = "xxx@gmail.com";  // GMAIL username
$mail->Password   = "xxx";            // GMAIL password

$mail->SetFrom('xxx@gmail.com', 'xxx');

$mail->AddReplyTo("xxx@gmail.com","xxx");

$mail->Subject    = "Urgent";

$mail->AltBody    = "To view the message, please use an HTML compatible email viewer!"; // optional, comment out and test

$mail->MsgHTML($body);

$address1 = "xxx@mail.ru";
$address2 = "xxx@gmail.com";

if(!$mail->Send()) {
  echo "Mailer Error: " . $mail->ErrorInfo;
} else {
  echo "Message sent!";
} 
```

当然有一种方法可以将俄语消息发送到 mail.ru，我显然做了一些愚蠢的事情，即使从 Outlook 发送，因为丙烯酸的作品，但也许我必须将编码放在除标题之外的其他地方。

我的计划是它会自动编码消息，但由于他们不支持 UTF-8，我的新计划是显示一条消息，用俄语显示“单击此处在网页中查看此消息”，然后我可以自己控制编码，它会显示正常，但我什至无法弄清楚如何将俄语消息发送到 mail.ru，因为它都显示在 gobblygook 中，用于 win-1251、UTF-8 甚至 kio

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:36:08.217

您在 HTML 标头中设置的字符集绝对不会**影响**稍后在同一脚本中运行的 php 代码。PHP 不太关心客户端字符集，直到客户端将一些数据发送回 php。您需要生成正确的 MIME 电子邮件，并为此在标题中设置正确的字符集。

我强烈建议使用 PHPMailer 或 Swiftmailer，它们都可以让发送 MIME 电子邮件变得微不足道，而且比 PHP 的`mail()`功能完全垃圾更容易和更可靠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-13T00:11:27.523

您还可以添加：

$mail->SetLanguage("ru","phpmailer/language");

它可以使用或不使用，但在我发现用俄语发送时会强制执行。

# javascript - 按值检查复选框

> ID：15888379
> 
> 赞同：2
> 
> 时间：2013-04-08T20:29:54.653
> 
> 标签：javascript, jquery

我一直在使用此代码来获取所有选中复选框的逗号分隔列表。

```
$(".hidFeedsIds").val($.map($(':checkbox[name=channel\[\]]:checked'), function (n, i) {
    return n.value;
}).join(',')); 
```

现在我需要做相反的事情，我有列表，但需要检查值所在的所有复选框。

谁能告诉我如何做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T20:33:12.827

除了您的代码在语法上无效的事实之外......

```
$('input:checkbox').filter(function() {
    return valuesArray.indexOf(this.value) > -1
}).prop('checked', true); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-08T20:34:10.647

另一种方式，补充@Matt的答案。

```
$.each(valuesArray, function (i, v) {

    // or use .prop() if you like, depending on jQuery version
    $("input:checkbox[value='" + v + "']").attr("checked", true);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T20:46:11.860

`**[LIVE DEMO](http://jsbin.com/imijis/3/edit)**`

如果您的元素值共享相同的 ID，例如：

```
<input type="checkbox" id="a" value="a" />
<input type="checkbox" id="b" value="b" /> 
```

比你能做的：

```
$('#'+ valuesArray.join(', #') ).prop('checked', true); 
```

* * *

`function`顺便说一句，您在原始脚本中丢失了。应该：

```
var valuesArray = $('input:checkbox:checked').map(function(){
    return $(this).val();
}).get().join(); 
```

# scala - 使用索引变量的 scala 替代方案

> ID：15888380
> 
> 赞同：2
> 
> 时间：2013-04-08T20:30:05.830
> 
> 标签：scala

假设我们有一个矩阵，它有基列和非基列。我们需要能够获得矩阵的基部分或非基部分。哪些列是数组中指定的基数，声明如下`var base: Array[Boolean]`

目前我正在这样做：

```
 def getMatrix(matrix: DenseMatrix[Double], pred: Boolean, m: Int, n: Int): DenseMatrix[Double] = {
    var a = DenseMatrix.zeros[Double](m, n)
    var scanPos: Int = 0
    var insertPos: Int = 0
    for (el <- base) {
      if (el == pred) {
        a(::, insertPos) := matrix(::, scanPos)
        insertPos += 1
      }
      scanPos += 1
    }
    return a
  } 
```

但是这段代码很丑，我真的很讨厌它。必须有一个更优雅的解决方案，我要求它

PS：来自微风库的 DenseMatrix 类，可以被视为二维数组

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T22:45:34.157

我不确定微风是否提供了更好的方法来做到这一点，但你可以这样做：

```
 def getMatrix(matrix: DenseMatrix[Double], pred: Boolean, m: Int, n: Int): DenseMatrix[Double] = {
    val data = base
      .zipWithIndex
      .filter(_._1 == pred)
      .map(b => matrix(::, b._2).toArray)
      .flatten

    new DenseMatrix(m, n, data)
  } 
```

像这样的东西也应该起作用：

```
 def getMatrix(matrix: DenseMatrix[Double], pred: Boolean, m: Int, n: Int): DenseMatrix[Double] = {
    val a = DenseMatrix.zeros[Double](m, n)

    for {
      x <- base.zipWithIndex.filter(_._1 == pred).zipWithIndex
      ((el, matrixIndex), newIndex) = x
    } yield a(::, newIndex) := matrix(::, matrixIndex)

    a
  } 
```

# arrays - 循环遍历由数字和字符串组成的数组，但仅返回数字之和 ActionScript

> ID：15888382
> 
> 赞同：1
> 
> 时间：2013-04-08T20:30:11.617
> 
> 标签：arrays, actionscript-3, loops, for-loop, foreach

这应该是非常基本的，但是那里没有太多的 ActionScript 教程。JavaScript很接近，但我也找不到如何做到这一点。我希望能够拥有一个由字符串和数字数据类型组成的混合数组，遍历数组并在忽略字符串的同时获得数字的总和。

示例数组：

```
var myArray:Array = [13, 10, "blah", 5, "eh", 10, "Twenty", "Thirty"]; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T20:31:56.670

像下面这样的东西应该可以解决问题：

```
var total:Number = 0.0;
for (var i:int=0; i<myArray.length; i++)
{
    if(myArray[i] is Number)
        total += myArray[i];
}
trace(total); 
```

# java - 使用 XMLEncoder 实现 Java Bean 持久性

> ID：15888383
> 
> 赞同：3
> 
> 时间：2013-04-08T20:30:18.523
> 
> 标签：java, persistence, javabeans

我编写了一个包含 HashMultiMap 的 bean 类（来自 Guava 库）。我想使用 JRE 的 XMLEncoder 对 bean 进行 XML 编码。使用自定义 PersistenceDelegate 我已成功将 bean 写入文件。但是，当我尝试反序列化 XML 时，我得到了异常：

`java.lang.NoSuchMethodException: <unbound>=HashMultimap.put("pz1", "pz2")`

我究竟做错了什么？

```
// create the bean
SomeBean sb = new SomeBean();

// add some data
HashMultimap<String, String> stateMap = HashMultimap.create();    
stateMap.put("pz1", "pz2");
stateMap.put("pz3", "pz4");

sb.setStateMap(stateMap);

// encode as xml 
FileOutputStream os = new FileOutputStream("myXMLFile.xml");
XMLEncoder encoder = new XMLEncoder(os);
encoder.setPersistenceDelegate(HashMultimap.class, new CustomPersistenceDelegate());
encoder.writeObject(sb);

// decode the xml
FileInputStream is = new FileInputStream("myXMLFile.xml"); 
XMLDecoder decoder = new XMLDecoder(is);
Object deSerializedObject = decoder.readObject();

class CustomPersistenceDelegate extends DefaultPersistenceDelegate
{
    protected Expression instantiate(Object oldInstance, Encoder out)
    {
        return new Expression(oldInstance, oldInstance.getClass(), "create", null);
    }

    protected void initialize(Class<?> type, Object oldInstance, Object newInstance,
                              Encoder out)
    {
        super.initialize(type, oldInstance, newInstance, out);

        com.google.common.collect.HashMultimap<String, String> m =
            (com.google.common.collect.HashMultimap) oldInstance;

        for (Map.Entry<String, String> entry : m.entries())
        {
            out.writeStatement(new Statement(oldInstance, "put", 
            new Object[] { entry.getKey(), entry.getValue() }));
        }

    }
}

public class SomeBean
{
    private HashMultimap<String, String> stateMap;

    public HashMultimap<String, String> getStateMap()
    {
        return stateMap;
    }

    public void setStateMap(HashMultimap<String, String> stateMap)
    {
        this.stateMap = stateMap;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T21:26:02.963

我没有解决方案（还）。但这里至少澄清了这个问题。Java 7 build 15 及更高版本中所做的一些更改似乎破坏了您的 Statement 所需的方法查找。如果您将 ExceptionListener 添加到 XmlEncoder，它可以让您更好地了解这是如何失败的：

```
 encoder.setExceptionListener(new ExceptionListener() {
        @Override
        public void exceptionThrown(Exception e) {
            System.out.println("got exception. e=" + e);
            e.printStackTrace();
        }
    }); 
```

然后您将看到完整的堆栈跟踪：

```
java.lang.Exception: Encoder: discarding statement HashMultimap.put(Object, Object);
at java.beans.Encoder.writeStatement(Encoder.java:306)
at java.beans.XMLEncoder.writeStatement(XMLEncoder.java:400)
at test2.XmlEncoderTest$CustomPersistenceDelegate.initialize(XmlEncoderTest.java:83)
at java.beans.PersistenceDelegate.writeObject(PersistenceDelegate.java:118)
at java.beans.Encoder.writeObject(Encoder.java:74)
at java.beans.XMLEncoder.writeObject(XMLEncoder.java:327)
at java.beans.Encoder.writeExpression(Encoder.java:330)
at java.beans.XMLEncoder.writeExpression(XMLEncoder.java:454)
at java.beans.PersistenceDelegate.writeObject(PersistenceDelegate.java:115)
at java.beans.Encoder.writeObject(Encoder.java:74)
at java.beans.XMLEncoder.writeObject(XMLEncoder.java:327)
at java.beans.Encoder.writeExpression(Encoder.java:330)
at java.beans.XMLEncoder.writeExpression(XMLEncoder.java:454)
at java.beans.DefaultPersistenceDelegate.doProperty(DefaultPersistenceDelegate.java:194)
at java.beans.DefaultPersistenceDelegate.initBean(DefaultPersistenceDelegate.java:253)
at java.beans.DefaultPersistenceDelegate.initialize(DefaultPersistenceDelegate.java:400)
at java.beans.PersistenceDelegate.writeObject(PersistenceDelegate.java:118)
at java.beans.Encoder.writeObject(Encoder.java:74)
at java.beans.XMLEncoder.writeObject(XMLEncoder.java:327)
at java.beans.Encoder.writeExpression(Encoder.java:330)
at java.beans.XMLEncoder.writeExpression(XMLEncoder.java:454)
at java.beans.PersistenceDelegate.writeObject(PersistenceDelegate.java:115)
at java.beans.Encoder.writeObject(Encoder.java:74)
at java.beans.XMLEncoder.writeObject(XMLEncoder.java:327)
at java.beans.Encoder.writeObject1(Encoder.java:258)
at java.beans.Encoder.cloneStatement(Encoder.java:271)
at java.beans.Encoder.writeStatement(Encoder.java:301)
at java.beans.XMLEncoder.writeStatement(XMLEncoder.java:400)
at java.beans.XMLEncoder.writeObject(XMLEncoder.java:330)

    ...

Caused by: java.lang.NoSuchMethodException: HashMultimap.put(Object, Object);
    at java.beans.Statement.invokeInternal(Statement.java:313)
    at java.beans.Statement.access$000(Statement.java:58)
    at java.beans.Statement$2.run(Statement.java:185)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.beans.Statement.invoke(Statement.java:182)
    at java.beans.Statement.execute(Statement.java:173)
    at java.beans.Encoder.writeStatement(Encoder.java:304)
    ... 51 more 
```

*Caused by*部分显示它未能找到*put*方法。在我看来，这是因为它不能再正确匹配方法签名了。它在 java bean MethodFinder 中失败，但由于源代码不包含在 JDK 中，我无法很好地追踪它。

如果我能找到确切的原因，我会更新这个。只是想在此期间为您提供更多信息。

**更新**

我认为这是这些更高版本中的错误。这是一个更直接地暴露错误（或意外行为）的单元测试。下面的失败正是您的代码中发生的事情：

```
@Test
public void testMethodFinder() throws Exception {

    Method m0 = MethodFinder.findMethod(this.getClass(), "setUp", new Class<?>[0]);
    assertNotNull(m0);

    // this is okay, because method is declared in the type referenced
    Method m = MethodFinder.findMethod(Multimap.class, "put", new Class<?>[] { Object.class, Object.class });
    assertNotNull(m);

    try {
        // this fails, apparently because method is not declared in this subclass (is inherited from parent class)
        Method m2 = MethodFinder.findMethod(HashMultimap.class, "put", new Class<?>[] { Object.class, Object.class });
        assertNotNull(m2);
    } catch (Exception e) {
        System.out.println("got exception. e=" + e);
    }
} 
```

# sql-server - 为什么我不能使用数据库设置默认值？

> ID：15888388
> 
> 赞同：0
> 
> 时间：2013-04-08T20:30:30.233
> 
> 标签：sql-server, entity-framework

为什么我不能在实体框架中使用数据库集默认值？当我设计我的数据库时，我添加了适当的默认值（即“默认值或绑定”字段）。现在看来，除非我使用，否则我无论如何都必须在我的代码中指定这些默认值，`StoreGeneratedPattern.Computed`但是以后不允许我更改该值。如果我没有在代码中指定默认值，我会得到一个异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:49:46.070

这里有一些逻辑。

在您的实体中，您有 public int ExampleInt { get; 放; }。假设您将 Example 列的默认值设置为 100。

想象一下创建实体对象的情况。它是一个 C# 对象，默认值由运行时填充。ExampleInt 初始化为值 0。此时，实体对象对 db 一无所知。然后您决定保存实体。EF 必须创建一行，然后插入您指定的值。可是等等？这应该是 0 还是 100？EF 必须跟踪您是否对该字段进行了更改，但如果您创建实体对象，EF 在您附加/保存它之前不会知道它。

只是一个想法：如果您在构造函数中运行查询以检查默认值怎么办？这将在您创建对象时使用默认值填充。如果对象是由 EF 创建的，则该值将被您在 db 中的内容覆盖。其实，我有一个更好的主意。

为什么不使用工厂来创建新的实体对象？工厂可以查询数据库的默认值吗？它仍然不是很好，但比在构造中运行查询要好得多。所以：

```
public class ExampleFactory
{
   public static GetExample ()
   {
       // obviously you want to run it only once. This is example only.
       int defaultValue = dbContext.Database.SQLQuery("SqlToGetTheDefaultValue");
       return new Example { ExampleInt = defaultValue };
   }
} 
```

所以你去。现在你知道为什么 EF 不能这样做了。我还给了你（坏的）想法，你怎么能解决这个问题。

# visual-studio - 打开 Visual Studio 2012 时如何恢复浮动窗口？

> ID：15888389
> 
> 赞同：2
> 
> 时间：2013-04-08T20:30:38.203
> 
> 标签：visual-studio, visual-studio-2012

打开 Visual Studio，我喜欢浮动一个单独的窗口。例如：打开一个 TFS 查询，右键单击选项卡并选择 Float。浮动它并关闭/重新打开 Visual Studio 后，浮动窗口不再打开。此外，当我重新打开 Visual Studio 时，该特定窗口不再浮动，而是在我浮动它之前的位置打开（在“主文档组”中）。

**补充：**有两种浮动。在任务栏中不会导致另一个程序图标的浮动窗口有效（例如，Igor 建议的浮动解决方案资源管理器）。但是任何提供第二个任务栏程序图标的浮动窗口（在你的任务栏中你有主视觉工作室，然后你有第二个窗口）都不会留下。

有谁知道如何强制VS：

1.  记住在 VS 关闭/重新打开后重新打开它时窗口是否浮动
2.  自动重新打开我上次关闭 VS 时打开的浮动窗口

我显然更喜欢#2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:00:10.243

据我所知，布局设置存储在`C:\Users\USERNAME\Documents\Visual Studio 2012\Settings\CurrentSettings.vssettings`. （见[http://msdn.microsoft.com/en-us/library/zbhkx167.aspx](http://msdn.microsoft.com/en-us/library/zbhkx167.aspx)）

设置文件可以通过`|Tools|Options|Environment|Import and Export Settings|`. 检查您是否有权访问在那里设置的文件或/并尝试更改它。

Visual Studio 也可能在注册表中存储窗口位置，如下所述：http: [//msdn.microsoft.com/en-us/library/vstudio/bb165452%28v=vs.110%29.aspx](http://msdn.microsoft.com/en-us/library/vstudio/bb165452%28v=vs.110%29.aspx)

# asp.net - 在单个视图上显示多个部分视图的 MVC4 问题

> ID：15888390
> 
> 赞同：3
> 
> 时间：2013-04-08T20:30:40.370
> 
> 标签：asp.net, asp.net-mvc, razor, asp.net-mvc-4

我一直在努力解决这个问题，但无济于事。使用 MVC4，我希望通过局部视图在单个视图上显示 3 个模型。单一视图由 3 个部分视图（3 个数字列表）组成。我可以让一个模型显示在视图中，但不知道如何显示其他 2 个。

这是视图控制器的内容：

```
[AllowAnonymous]
    public ActionResult Dashboard()
    {
        //Database.SetInitializer<AlertsContext>(null);
        Database.SetInitializer<MemberUsersContext>(null);
        //Database.SetInitializer<ClubsContext>(null);

        //AlertsContext db = new AlertsContext();
       MemberUsersContext db = new MemberUsersContext();
        //ClubsContext db = new ClubsContext();
        //db.MemberUsers.ToList()
        return View(db.MemberUsers.ToList());
    } 
```

这就是我作为 View 本身的模型（为了编译，我删除了不在 @model IENumerable 语句下的两个：

```
 @model IEnumerable<GMC.Models.MemberUsers>

    <div class="dashboard_alerts">    
      @Html.Partial("DashboardAlerts")
   </div>

    <div class="dashboard_pending_clubs">    
       @Html.Partial("DashboardClubs")
    </div>

    <div class="dashboard_verified_members">    
       @Html.Partial("DashboardMembers")
     </div> 
```

在每个部分视图中，标题如下：

仪表板俱乐部

```
 @model IEnumerable<GMC.Models.Clubs> 
```

仪表板成员

```
 @model IEnumerable<GMC.Models.MemberUsers> 
```

仪表板警报

```
 @model IEnumerable<GMC.Models.Alerts> 
```

现在我的问题是如何将三个数据库上下文传递到仪表板？我非常困惑并且正在挣扎。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T20:43:36.957

有很多方法可以做到这一点并使其通用，但它们大多都有一个 ViewModel。您专门为支持仪表板视图而创建的类：

```
public class DashboardViewModel {   
  public IEnumerable<GMC.Models.Clubs> Clubs {get;set;}
  public IEnumerable<GMC.Models.MemberUsers> MemberUsers {get;set;}
  public IEnumerable<GMC.Models.Alerts> Alerts {get;set;}
} 
```

如果这些只是数据库中的不同表，则它们都应该通过相同的上下文访问，因为上下文管理您的连接和其他资源。但是，如果没有看到该代码，我将不会继续下去。

```
[AllowAnonymous]
    public ActionResult Dashboard()
    {
        //populate data into our view model(vm)
        var vm = new DashboardViewModel{
           Clubs = db.Clubs.ToList(),
           MemberUsers = db.MemberUsers.ToList(),
           Alerts = db.Alerts.ToList()
        };
        return View(vm);
    } 
```

仪表板视图：

```
 @model DashboardViewModel

    <div class="dashboard_alerts">    
      @Html.Partial("DashboardAlerts", Model.Alerts)
   </div>

    <div class="dashboard_pending_clubs">    
       @Html.Partial("DashboardClubs", Model.Clubs)
    </div>

    <div class="dashboard_verified_members">    
       @Html.Partial("DashboardMembers", Model.MemberUsers)
     </div> 
```

就个人而言，我不会使用 Html.Partial，而是使用 Action/RenderAction，因为它们将允许您实际调用另一个返回 PartialViewResult 的操作，因此每个操作都负责检索自己的数据。我并不总是这样做，但如果合适的话，那么动作/局部视图更可重用。

这看起来更像这样：

```
 public ActionResult Dashboard()
    {
        return View();
    }

    public PartialViewResult Clubs()
    {
       ....
        return PartialView(db.Clubs.ToList());//this assumes the partial view is named Clubs.cshtml, otherwise you'll need to use the overload where you pass the view name
    }

    public PartialViewResult Alerts()
    {
       ....
        return PartialView(db.Alerts.ToList());
    } 
```

...

仪表板.cshtml

```
 <div class="dashboard_alerts">    
      @Html.Action("Alerts")
   </div>

    <div class="dashboard_pending_clubs">    
       @Html.Action("Clubs")
    </div>

    <div class="dashboard_verified_members">    
       @Html.Action("Members")
     </div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T20:39:42.370

您需要为仪表板页面创建一个特定的 ViewModel。

```
public class DashboardViewModel
{
  public IEnumerable<GMC.Models.Clubs> Clubs { get; set; }
  public IEnumerable<GMC.Models.MemberUsers> Users  { get; set; }
  public IEnumerable<GMC.Models.Alerts> Alerts  { get; set; }
} 
```

然后，在仪表板操作方法中，您将填充每个列表：

```
myModel.Users = db.MemberUsers.ToList();
... 
```

然后，您需要更新视图以采用这个新的 ViewModel

```
 @model DashboardViewModel 
```

最后，在视图中，您需要将数据传递给每个部分：

```
@Html.Partial("DashboardAlerts", Model.Alerts)

@Html.Partial("DashboardClubs", Model.Clubs) 
```

# eclipse - eclipse调用层次结构不完整

> ID：15888394
> 
> 赞同：5
> 
> 时间：2013-04-08T20:30:44.583
> 
> 标签：eclipse, eclipse-indigo, call-hierarchy

当我执行调用层次结构（Eclipse Indigo）时，我收到的结果比我知道的要少。奇怪的是，这个功能似乎只在几周前才起作用。

当我在 Juno 的同一个工作区上运行相同的操作时，我得到了我期望的调用层次结构结果。

Eclipse 会自动更新吗？还有什么可能导致这种情况？

# ruby - Rake 依赖项未执行但调用有效

> ID：15888400
> 
> 赞同：7
> 
> 时间：2013-04-08T20:31:01.043
> 
> 标签：ruby, rake, rake-task

我一直在尝试运行`rake db:test:clone_structure`，但它一直无法重建数据库。我终于看了一下任务本身：

```
task :clone_structure => [ "db:structure:dump", "db:test:load_structure" ] 
```

当我运行跟踪时，我注意到它`db:test:load_structure`没有被执行：

```
$ rake db:test:clone_structure --trace
** Invoke db:test:clone_structure (first_time)
** Invoke db:structure:dump (first_time)
** Invoke environment (first_time)
** Execute environment
** Execute db:structure:dump
** Invoke db:test:purge (first_time)
** Invoke environment 
** Execute db:test:purge
** Execute db:test:clone_structure 
```

现在，当我将`clone_structure`任务更改为*调用* `load_structure`...

```
task :clone_structure => [ "db:structure:dump", "db:test:load_structure" ] do   
  db_namespace["test:load_structure"].invoke
end 
```

...一切都突然起作用了！

```
$ rake db:test:prepare --trace

** Invoke db:test:clone_structure (first_time)
** Invoke db:structure:dump (first_time)
** Invoke environment (first_time)
** Execute environment
** Execute db:structure:dump
** Invoke db:test:purge (first_time)
** Invoke environment 
** Execute db:test:purge
** Execute db:test:clone_structure
** Invoke db:test:load_structure (first_time)
** Invoke db:test:purge 
** Execute db:test:load_structure
** Invoke db:structure:load (first_time)
** Invoke environment 
** Invoke db:load_config (first_time)
** Execute db:load_config
** Execute db:structure:load 
```

什么可能导致这种行为？我正在使用 Rails 3.2.14 和 Rake 10.1.0。

**更新：**我将 Rails 从 3.2.11 升级到 3.2.13，但它仍然是一个问题。

**更新了第二个：**我将 Rails 升级到 3.2.14 并将 Rake 升级到 10.1.0，但这仍然是一个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-05T19:06:38.603

我会说你快到了。据我所知，这方面的[rake](http://rake.rubyforge.org/Rake/Task.html)约定是……

```
task :clone_structure => [ "db:structure:dump", "db:test:load_structure" ] do   
  Rake::Task["clone_structure"].invoke
end 
```

否则，我更喜欢...

```
task :clone_structure do   
  Rake::Task["db:structure:dump"].invoke
  Rake::Task["db:test:load_structure"].invoke
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-16T16:11:05.540

在我知道正在调用的任务之一中粘贴堆栈跟踪后，我发现了问题。它与 ActiveRecord 或 Rake 无关，与我也在使用的[activerecord-oracle_enhanced-adapter gem 无关。](https://github.com/rsim/oracle-enhanced)

基本上，gem 会像这样覆盖`db:test:clone_structure`任务：

```
redefine_task :clone_structure => [ "db:structure:dump", "db:test:purge" ] 
```

请注意，它错过了对`db:test:load_structure`.

我已经向该项目提交了一个[问题](https://github.com/rsim/oracle-enhanced/issues/326)和[拉取请求](https://github.com/rsim/oracle-enhanced/issues/327)，所以它应该有望在不久的将来得到解决。

# postgresql - 更新与排序无关的列后行排序发生变化

> ID：15888402
> 
> 赞同：0
> 
> 时间：2013-04-08T20:31:04.027
> 
> 标签：postgresql

有一个 ORM 生成的 SQL，如下所示：

```
SELECT * FROM "games" WHERE "competition_id" IN
(SELECT "id" FROM "competitions" WHERE "id"  IN (1,2,3))
ORDER BY "date" LIMIT 10 
```

它显示第 1 到 10 行。

然而之后：

```
UPDATE "games" SET "season_id"=2 
```

同样`SELECT`返回行，如 1,2,3 ... 11, 12 而不是 1,2,3 ... 9, 10

是的，返回的行仍然是 10，但最后一行总是替换为 10 之后的行......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:33:58.070

`LIMIT`如果范围内存在多个匹配结果，则不保证将返回哪些行`ORDER BY`。因此，如果您有超过 10 行具有相同的`date`，或者如果大多数具有不同的日期但碰巧第 9、10、11 和 12 行具有相同的`date`，则不能保证获得将返回的一致结果第 9 和第 10 个插槽。PostgreSQL 将自行决定选择这些 - 当记录更新时这通常会改变。

尝试添加`id`到 ORDER BY 列表以解决此问题。

# c# - 即使在我设置 Visible = true 后，DevExpress XtraGrid 也不可见

> ID：15888417
> 
> 赞同：0
> 
> 时间：2013-04-08T20:31:35.630
> 
> 标签：c#, winforms, devexpress, xtragrid

我在我当前的 WinForms 项目中使用 DevExpress 的工具。我正在处理的页面有一个用于子机构的网格，该网格是否可见取决于名为`IsParentAgency`. 如果该机构是一个父机构，那么该网格应该对该机构的所有子机构都是可见的。如果不是，那么网格应该是不可见的。

但是，无论我做什么，我似乎都无法让网格可见。即使在我给它一个数据源、强制它初始化并填充列之后。我什至尝试过直接设置`SubAgenciesGridControl.Visible = true`。无论我做什么，它总是将 Visible 设置为 false （即使在调试之后的行时`SubAgenciesGridControl.Visible = true`）。

这是我用来设置网格并切换其可见性的代码（我在 WinForms 之上使用 MVP 模式）：

```
SubAgenciesGridControl.DataSource = Model.SubAgencies;
SubAgenciesGridControl.ForceInitialize();
SubAgenciesGridView.PopulateColumns();
SubAgenciesGridControl.Visible = Model.IsParentAgency; 
```

如何让网格可见？它正在将其添加到控件中，如评论中所示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T05:52:04.150

如果您正在使用，请`LayoutControl`尝试设置`LayoutControlItem`'`Visible`属性。`LayoutControl`如果您使用的是布局渲染，则控件自己的可见属性不会发挥作用。

# asp.net-mvc-4 - 每次视图加载时的 MVC 4 更新菜单

> ID：15888419
> 
> 赞同：-1
> 
> 时间：2013-04-08T20:31:40.617
> 
> 标签：asp.net-mvc-4

我有一个共享视图 _layout.cshtml，其中将包含用户的未读消息数。每次用户访问新视图时，我们都需要检查新消息。目前，我认为不需要对定时 ajax 类型的调用执行此操作。

我可以整天使用 .NET Webforms 上的 Master Pages 来做这件事，但我很难用 MVC 做这么简单的事情。

我的问题是：如何在每次视图加载时触发数据库调用，以检查消息数量是否发生变化并更新 _layout.cshtml 中的文本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T01:38:15.677

1.  创建一个包含未读消息等的局部视图
2.  创建模型以传递给视图
3.  创建“部分操作”
4.  从您的_Layout，调用`Html.RenderAction`（或`Html.Action()`）

我们用下划线作为部分前缀。

**视图\共享\_UnreadMessagesPartial.cshtml**

```
@model UnreadMessagesViewModel

Unread messages: @Model.UnreadMessagesCount 
```

**UnreadMessagesViewModel.cs**

```
public class UnreadMessagesViewModel
{
    private DbContext _db;

    public int UnreadMessagesCount;

    public UnreadMessagesViewModel() {
        _db = new DbContext();
        UnreadMessages = _db.Messages.Count();
    }
} 
```

**家庭控制器.cs**

```
public class HomeController : Controller
{
    // mark this action as unavailable to the general public
    [ChildActionOnly]
    public ActionResult _UnreadMessagesPartial()
    {
        UnreadMessagesViewModel viewModel = new UnreadMessagesViewModel();
        return PartialView(viewModel);
    }
} 
```

**视图\共享\_Layout.cs**

```
@{
    Html.RenderAction("_UnreadMessagesPartial");
} 
```

我希望我的 C# 没问题，必须在我的脑海中从 VB.NET 转换。

# javascript - 是否可以实时悬停功能？

> ID：15888421
> 
> 赞同：0
> 
> 时间：2013-04-08T20:31:44.170
> 
> 标签：javascript, jquery, jquery-animate

我有一个 div`#conteudo`和 2 个链接`#linkPrev`和`#linkNext`.

当悬停在链接上时，它会`.animate()`向左或向右 div `#conteudo`。

html:

```
<div id="conteudo">
    <div class="boxes" id="content1">
    <div class="boxes" id="content2">
    <div class="boxes" id="content3">
</div>
<a id="linkPrev" class="linksNav"></a>
<a id="linkNext" class="linksNav"></a> 
```

CSS：

```
#conteudo{width:2000;position:relative; height:1080px;}
.box{width:0; overflow:hidden; float:left;} 
```

js：

```
$('#linkNext').on({

                mouseenter: function(){
                    if ($('#conteudo .boxes').hasClass('ativo')) {
                        $('#conteudo .boxes').removeClass('ativo');
                        $('.boxAberto').animate({width:'0'},600, function(){
                            console.log('sad')
                        });
                    } else {
                        this.iid = setInterval(function() {
                            if (cont > -565) {
                                cont -= 5;
                                $('#conteudo').attr('style','left:'+cont+'px'); 
                                console.log(cont)
                            }
                            if (cont <= -565){
                                $('#linkNext').hide();
                            }       
                        }, 0);
                    }
                },
                mouseleave: function(){
                    this.iid && clearInterval(this.iid);
                }
            }); 
```

如果用户单击 a `.boxes`，它将添加一个类`.ativo`和`.animate({width:X},600)`单击的 div。

问题是，当我悬停任何链接时，如果`.boxes`有一个类“.ativo”，它应该关闭该框，`width:0`并且我放置一个回调函数以继续`.animate()`向左或向右。但它只会关闭盒子。我必须做一个鼠标离开并悬停它继续`.animate`向右或向左。

有人能帮我吗？

PS：我刚才提到的功能`#linkNext`，`#linkPrev`功能是工作。只是为了防止大文本。

# c++ - GetShortPathNameW 返回文件扩展名。我希望它忽略 .exe

> ID：15888423
> 
> 赞同：0
> 
> 时间：2013-04-08T20:31:53.607
> 
> 标签：c++

我在 C++ 中有 GetShortPathNameW 和 MSVC 2008 免费版。我只想使用它，以便它可以搜索或返回不带 .exe 扩展名的文件名。有人可以帮助我吗？代码如下：

```
WCHAR buffer[MAX_PATH];
    LPCWSTR dataFilePath = wArgv[datafile_argv];

        // Hack for Windows in case there are unicode chars in the path.
    // The normal argv[] array has ????? instead of the unicode chars
    // and fails, so instead we manually get the short file name, which
    // is always using ANSI chars.
    if (wcschr(dataFilePath, '\\') == NULL)
    {
        GetCurrentDirectoryW(MAX_PATH, buffer);
        wcscat(buffer, L"\\");
        wcscat(buffer, dataFilePath);
        dataFilePath = &buffer[0];

    }

    if (GetShortPathNameW(dataFilePath, directoryPathBuffer, MAX_PATH) == 0)
    {
        platform->DisplayAlert("Unable to determine startup path: GetShortPathNameW failed.");
        game_file_name = NULL;
        return;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T21:28:54.153

> 我只想使用它，以便它可以搜索或返回不带 .exe 扩展名的文件名。

当然，只需使用该[`PathRemoveExtension`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773746.aspx)功能。您只需向它传递一个包含字符串的长度缓冲区`MAX_PATH`，然后它就地剥离扩展名（如果存在）。

```
std::wstring path(MAX_PATH, L'\0');
if (!GetCurrentDirectoryW(MAX_PATH, &path[0]))
{
    throw std::runtime_error("The GetCurrentDirectory function failed");
}
PathRemoveExtension(&path[0]); 
```

我会推荐使用[`PathCombine`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773571.aspx)或[`PathAppend`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773565.aspx)来连接路径元素，而不是 C 风格的字符串操作函数。这些函数旨在使用路径，并为您自动添加反斜杠（或任何其他路径分隔符）。

但我真的不明白你在问题中发布的代码，从评论开始：

```
// Hack for Windows in case there are unicode chars in the path.
// The normal argv[] array has ????? instead of the unicode chars
// and fails, so instead we manually get the short file name, which
// is always using ANSI chars. 
```

也许更简单的解释方式是标准`argv[]`数组，作为参数传递给 C 程序的入口点，必须是类型为 的数组`char`。在 Windows 上，这意味着它不支持 Unicode 字符。对 Unicode 的支持要求您使用`wchar_t`（或等效的宏之一）。

您可以在 Windows 中专门解决此问题，方法是使用`wmain`作为入口点，而不是`main`. 对于这个函数，`argv[]`是一个宽字符数组 ( `wchar_t`)。我假设您正在为多个操作系统交叉编译代码，在这种情况下，您需要使用一些预处理器魔法来确保在针对 Windows 时获得正确的入口点。

如果你绝对不能这样做，那么只需调用[`GetCommandLine`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683156.aspx)and[`CommandLineToArgv`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb776391.aspx)函数来检索命令行参数，然后将它们转换为`argv[]`包含宽字符的样式数组。

作为替代方案，您可以按照 Alf 的建议执行并调用该[`GetModuleFileName`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683197.aspx)函数，`NULL`作为第一个参数传递，以检索可执行文件的路径。

无论您采用哪种方法，重要的是要意识到转换短路径是一种*非常*丑陋的黑客攻击，如果底层文件系统禁用了短名称，它实际上会受到破坏。由于您的代码在任何地方都使用 Unicode API，因此只要您首先获得有效的路径字符串，处理路径中的 Unicode 字符应该没有问题。

# geoserver - GeoServer WMS 崩溃

> ID：15888432
> 
> 赞同：2
> 
> 时间：2013-04-08T20:32:23.133
> 
> 标签：geoserver, wms

我正在使用 WinXP (sp3)、GeoSever 2.3.0 和 JRE 1.6，并试图让任何图层显示为 WMS。使用 GeoServer 管理 Web 界面 (GeoServer/web) 的图层预览功能，它会导致 GeoServer 为任何 WMS 格式抛出异常。这是全新安装的 GeoServer。我也尝试过 JRE 1.7，但行为没有改变。洞察力受到赞赏。

```
Request: getMap
        Filters = null
        Palette = null
        Tiled = false
        SRS = EPSG:26713
        FeatureVersion = null
        Styles = [StyleImpl[ name=capitals]]
        Layers = [org.geoserver.wms.MapLayerInfo@6f893642]
        MaxFeatures = null
        Bbox = ReferencedEnvelope[590223.4382724703 : 608462.4604629107, 4914107.882513998 : 4920523.89081033]
        RemoteOwsType = null
        RemoteOwsURL = null
        Env = {}
        FormatOptions = {}
        Angle = 0.0
        CQLFilter = null
        Elevation = []
        FeatureId = null
        StartIndex = null
        ViewParams = null
        Crs = PROJCS["NAD27 / UTM zone 13N",
  GEOGCS["NAD27",
    DATUM["North American Datum 1927",
      SPHEROID["Clarke 1866", 6378206.4, 294.9786982138982, AUTHORITY["EPSG","7008"]],
      TOWGS84[2.478, 149.752, 197.726, 0.526, -0.498, 0.501, 0.685],
      AUTHORITY["EPSG","6267"]],
    PRIMEM["Greenwich", 0.0, AUTHORITY["EPSG","8901"]],
    UNIT["degree", 0.017453292519943295],
    AXIS["Geodetic longitude", EAST],
    AXIS["Geodetic latitude", NORTH],
    AUTHORITY["EPSG","4267"]],
  PROJECTION["Transverse_Mercator", AUTHORITY["EPSG","9807"]],
  PARAMETER["central_meridian", -105.0],
  PARAMETER["latitude_of_origin", 0.0],
  PARAMETER["scale_factor", 0.9996],
  PARAMETER["false_easting", 500000.0],
  PARAMETER["false_northing", 0.0],
  UNIT["m", 1.0],
  AXIS["Easting", EAST],
  AXIS["Northing", NORTH],
  AUTHORITY["EPSG","26713"]]
        BgColor = java.awt.Color[r=255,g=255,b=255]
        Transparent = false
        SldBody = null
        ValidateSchema = false
        Sld = null
        SldVersion = null
        TilesOrigin = null
        Exceptions = SE_XML
        Height = 330
        Width = 938
        Filter = null
        Time = []
        Format = image/png
        Buffer = 0
        Request = GetMap
        RawKvp = {BBOX=590223.4382724703,4914107.882513998,608462.4604629107,4920523.89081033, VERSION=1.1.0, FORMAT=image/png, SERVICE=WMS, HEIGHT=330, REQUEST=GetMap, LAYERS=sf:bugsites, STYLES=, WIDTH=938, SRS=EPSG:26713}
        Get = true
        BaseUrl = http://localhost:80/geoserver/
        RequestCharset = UTF-8
        Version = 1.1.0
08 Apr 10:21:34 ERROR [geoserver.ows] -
java.lang.NoClassDefFoundError: Could not initialize class org.geotools.image.ImageWorker
        at org.geoserver.wms.map.PNGMapResponse.formatImageOutputStream(PNGMapResponse.java:117)
        at org.geoserver.wms.map.RenderedImageMapResponse.write(RenderedImageMapResponse.java:122)
        at org.geoserver.ows.Dispatcher.response(Dispatcher.java:919)
        at org.geoserver.ows.Dispatcher.handleRequestInternal(Dispatcher.java:276)
        at org.springframework.web.servlet.mvc.AbstractController.handleRequest(AbstractController.java:153)
        at org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter.handle(SimpleControllerHandlerAdapter.java:48)
        at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
        at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
        at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
        at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:707)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
        at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:487)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1093)
        at org.geoserver.filters.ThreadLocalsCleanupFilter.doFilter(ThreadLocalsCleanupFilter.java:27)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1084)
        at org.geoserver.filters.SpringDelegatingFilter$Chain.doFilter(SpringDelegatingFilter.java:74)
        at org.geoserver.filters.SpringDelegatingFilter.doFilter(SpringDelegatingFilter.java:45)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1084)
        at org.geoserver.platform.AdvancedDispatchFilter.doFilter(AdvancedDispatchFilter.java:49)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1084)
        at org.vfny.geoserver.filters.SetCharacterEncodingFilter.doFilter(SetCharacterEncodingFilter.java:109)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1084)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:311)
        at org.geoserver.security.filter.GeoServerCompositeFilter$NestedFilterChain.doFilter(GeoServerCompositeFilter.java:68)
        at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)
        at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
        at org.geoserver.security.filter.GeoServerCompositeFilter$NestedFilterChain.doFilter(GeoServerCompositeFilter.java:72)
        at org.geoserver.security.filter.GeoServerCompositeFilter.doFilter(GeoServerCompositeFilter.java:91)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        at org.geoserver.security.filter.GeoServerCompositeFilter$NestedFilterChain.doFilter(GeoServerCompositeFilter.java:68)
        at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
        at org.geoserver.security.filter.GeoServerCompositeFilter$NestedFilterChain.doFilter(GeoServerCompositeFilter.java:72)
        at org.geoserver.security.filter.GeoServerCompositeFilter.doFilter(GeoServerCompositeFilter.java:91)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        at org.geoserver.security.filter.GeoServerAnonymousAuthenticationFilter.doFilter(GeoServerAnonymousAuthenticationFilter.java:53)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        at org.geoserver.security.filter.GeoServerCompositeFilter$NestedFilterChain.doFilter(GeoServerCompositeFilter.java:68)
        at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:150)
        at org.geoserver.security.filter.GeoServerCompositeFilter$NestedFilterChain.doFilter(GeoServerCompositeFilter.java:72)
        at org.geoserver.security.filter.GeoServerCompositeFilter.doFilter(GeoServerCompositeFilter.java:91)
        at org.geoserver.security.filter.GeoServerBasicAuthenticationFilter.doFilter(GeoServerBasicAuthenticationFilter.java:82)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        at org.geoserver.security.filter.GeoServerCompositeFilter$NestedFilterChain.doFilter(GeoServerCompositeFilter.java:68)
        at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
        at org.geoserver.security.filter.GeoServerSecurityContextPersistenceFilter$1.doFilter(GeoServerSecurityContextPersistenceFilter.java:46)
        at org.geoserver.security.filter.GeoServerCompositeFilter$NestedFilterChain.doFilter(GeoServerCompositeFilter.java:72)
        at org.geoserver.security.filter.GeoServerCompositeFilter.doFilter(GeoServerCompositeFilter.java:91)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:173)
        at org.geoserver.security.GeoServerSecurityFilterChainProxy.doFilter(GeoServerSecurityFilterChainProxy.java:103)
        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1084)
        at org.geoserver.filters.LoggingFilter.doFilter(LoggingFilter.java:75)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1084)
        at org.geoserver.filters.GZIPFilter.doFilter(GZIPFilter.java:42)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1084)
        at org.geoserver.filters.SessionDebugFilter.doFilter(SessionDebugFilter.java:47)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1084)
        at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:360)
        at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
        at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)
        at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:726)
        at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:405)
        at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:206)
        at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114)
        at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
        at org.mortbay.jetty.Server.handle(Server.java:324)
        at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:505)
        at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:828)
        at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:514)
        at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:211)
        at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:380)
        at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:395)
        at org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:450) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T18:45:06.393

我解决了这个问题。显然，Oracle 已决定不与 JRE 一起分发 PYCC.pf，而仅与 JDK 一起分发。我将副本放在 jre\lib\cmm 目录中，WMS 开始工作。也许 GeoServer 安装应该添加这个必需的文件，因为 JRE 不再这样做。

# java - Jtable cellRenderer 改变行的背景

> ID：15888434
> 
> 赞同：0
> 
> 时间：2013-04-08T20:32:31.150
> 
> 标签：java, swing, jtable, cellrenderer

我已经尝试了一段时间并在互联网上寻找解决方案，但是我失败了。我要做的是动态更改 Jtable 的行背景。我创建了 arrayList ，它保留了选定行的数量（每次用户按 alt+单击单元格时添加它们）并在我自己的 tableCellRenderer 中添加

```
for(Integer c: leftSelectedCells){
if(c.equals(row)){comp.setForeground(Color.red); }
else { comp.setForeground(Color.black);}
} 
```

它正在工作，对于少数单元格，或者在选定的列恢复其原始颜色的一段时间后，我已经检查过，整数仍然在数组中，所以这不是问题，知道可能导致问题的原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T00:35:13.870

正如上面评论中已经建议的那样，您需要为所有必需的列提供自定义渲染器。作为替代方案，您可以`JTable.prepareRenderer`根据受影响的行列表覆盖以设置背景。[@camickr 的表格行渲染](http://tips4java.wordpress.com/2010/01/24/table-row-rendering/)解释了这种方法。下面是一个突出显示使用鼠标 +`Alt`键单击的行的示例。为简单起见，突出显示的行列表保留为客户端属性。

```
import java.awt.Color;
import java.awt.Component;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.util.ArrayList;
import java.util.List;

import javax.swing.*;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.TableCellRenderer;

public class TableHighlight {
    TableHighlight() {
        JFrame frame = new JFrame("TableHighlight");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        Object[][] data = { { "Column 1", "Column 2" },
                { "Column 1", "Column 2" }, { "Column 1", "Column 2" },
                { "Column 1", "Column 2" } };

        Object[] columnNames = { "Column 1", "Column 2" };

        DefaultTableModel model = new DefaultTableModel(data, columnNames);

        final JTable table = new JTable(model) {
            @Override
            public Component prepareRenderer(TableCellRenderer renderer,
                    int row, int column) {
                Component c = super.prepareRenderer(renderer, row, column);
                List<Integer> selectedRows = (List<Integer>) getClientProperty("highlightRows");
                c.setBackground(selectedRows.contains(row) ? Color.cyan : getBackground());
                return c;
            }
        };

        table.putClientProperty("highlightRows", new ArrayList<Integer>());

        table.addMouseListener(new MouseAdapter() {
            @Override
            public void mouseClicked(MouseEvent evt) {
                if (!evt.isAltDown())
                    return;
                int row = table.rowAtPoint(evt.getPoint());
                if (row == -1)
                    return;
                List<Integer> selectedRows = (List<Integer>) table
                        .getClientProperty("highlightRows");
                int index = selectedRows.indexOf(row);
                if (index != -1)
                    selectedRows.remove(index);
                else
                    selectedRows.add(row);
                table.repaint();
            }
        });

        frame.add(new JScrollPane(table));
        frame.setLocationByPlatform(true);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String args[]) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                new TableHighlight();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T09:00:30.813

我建议使用 CTRL 代替 ALT 进行多选。一方面，任何想要多选的用户都已经知道怎么做，因为 CTRL 是多选事实上的标准修饰键。其次，您可以免费获得您想要的行为，而无需实现任何特殊的东西（也许除了您喜欢的配色方案）。

```
package com.example.table.multiselect;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Component;

import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.table.DefaultTableCellRenderer;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.TableCellRenderer;

public class MultiRowTableSelect extends JFrame {

    public MultiRowTableSelect() {
        DefaultTableModel model = new DefaultTableModel(0, 3);
        model.addRow(new Integer[]{1, 2, 3});
        model.addRow(new Integer[]{4, 5, 6});
        model.addRow(new Integer[]{7, 8, 9});
        model.addRow(new Integer[]{10, 11, 12});

        JTable tbl = new JTable(model);
        tbl.setRowSelectionAllowed(true); // when you click a cell, the entire row will be highlighted

        /* Assuming you want all cells to be rendered using the custom renderer
         * unless otherwise overridden, you can simply set the JTable's default
         * renderer.  The implementation is so simple here that I'm just
         * creating an anonymous subclass of DefaultTableCellRenderer.
         */
        tbl.setDefaultRenderer(Object.class, new DefaultTableCellRenderer() {
            @Override
            public Component getTableCellRendererComponent(JTable table, Object value,
                    boolean isSelected, boolean hasFocus, int row, int column) {

                Component c = super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);

                if (isSelected) {
                    c.setForeground(Color.RED); // you can set the foreground and/or background here
                }

                return c;
            }
        });

        add(new JScrollPane(tbl), BorderLayout.CENTER);

        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setLocationByPlatform(true);
        pack();
        setSize(400, 200);
        setVisible(true);
    }

    /**
     * @param args
     */
    public static void main(String[] args) {
        new MultiRowTableSelect();
    }

} 
```

# extjs - ExtJs 4.2 使用指南针编译主题

> ID：15888435
> 
> 赞同：1
> 
> 时间：2013-04-08T20:32:32.103
> 
> 标签：extjs, themes, extjs4.2

根据 Sencha 的文档，应该使用 Sencha CMD 创建和编译新主题。

我想创建一个新主题（它将继承自现有主题）并能够使用 Compass 编译它**而无需**Sencha CMD。

知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:44:57.850

如果您想从头开始创建一个新主题，那可能会有点不知所措，我建议您先尝试扩展现有主题。基本上，一个主题由两大部分组成：CSS 模板和 JavaScript 覆盖；CSS 反过来又分为 SASS 代码、mixin 和变量。

有讨论 4.2 主题构建的[主题指南；](http://docs.sencha.com/ext-js/4-2/#!/guide/theming)对于继承示例，您可以查看现有主题：例如，扩展经典主题的灰色主题，该主题又继承自中性主题，其中性主题具有基础主题作为父主题。Neptune 也可以为您提供大量 JavaScript 覆盖示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T21:34:03.287

我们已经在我们的应用程序中进行了主题化，因为上次发布的 Ext 4 没有使用 sencha 命令工具。请记住，这是 4.1 代码，自 4.2 以来可能已经更改。您需要安装 ruby​​/compass 并为 compass 创建一个配置文件，告诉它加载 ext 特定变量，您可以设置 compass 配置变量。 [http://compass-style.org/help/tutorials/configuration-reference/](http://compass-style.org/help/tutorials/configuration-reference/)

这是一个名为 config.rb 的示例配置文件（我认为它需要命名为 config.rb 但不要引用我的话。）这是取自 extDir/resources/sass

```
# $ext_path: This should be the path of where the ExtJS SDK is installed
# Generally this will be in a lib/extjs folder in your applications root
# <root>/lib/extjs
$ext_path = "../extjs/4.1"

# sass_path: the directory your Sass files are in. THIS file should also be in the Sass folder
sass_path = File.dirname(__FILE__)

# css_path: the directory you want your CSS files to be.
# Generally this is a folder in the parent directory of your Sass files
css_path = File.join(sass_path, "css")

# We need to load in the Ext4 themes folder, which includes all it's default styling, images, variables and mixins
load File.join(File.dirname(__FILE__), $ext_path, 'resources', 'themes')

#Compass config variable
relative_assets = true 
```

这是目录结构

*   萨斯/config.rb
*   萨斯/redTheme.sass
*   萨斯/CSS

redTheme.sass 可能看起来像：

```
$base-color: red;

@import 'compass';
@import 'ext4/default/all'; 
```

在 sass 目录中编译指南针后，它将创建 redTheme.css

*   萨斯/css/redTheme.css

# macos - coursera，“Scala 中的函数式编程原理”，在 OSX 上设置 IntelliJ

> ID：15888438
> 
> 赞同：0
> 
> 时间：2013-04-08T20:32:42.940
> 
> 标签：macos, scala, intellij-idea, sbt

“Scala 中的函数式编程原理”课程是为 Eclipse 准备的。

这里有一个关于在课程中使用 IntelliJ 而不是 Eclipse 的教程： [http ://www.guardian.co.uk/info/developer-blog/2012/sep/21/functional-programming-principles-scala-setting-up -智能](http://www.guardian.co.uk/info/developer-blog/2012/sep/21/funtional-programming-principles-scala-setting-up-intellij)

但是，它失败了：

```
sbt
gen-idea
[error] Not a valid command: gen-idea
[error] Expected '/'
[error] Expected ':'
[error] Not a valid key: gen-idea
[error] gen-idea
[error]         ^ 
```

可能是什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T20:58:02.003

根据错误，您似乎没有安装 sbt intellij 插件。您需要将此依赖添加到您的 sbt 配置中：

addSbtPlugin("com.github.mpeltonen" % "sbt-idea" % "1.3.0")

您可以将此行添加到 YOUR_PROJECT/project/plugins.sbt - 这将起作用，但您必须为每个项目执行此操作（请注意，您可能必须创建 plugins.sbt）。

一种更方便的方法：在 ~/.sbt/plugins/build.sbt 中添加依赖项 - 这样，每次启动 sbt 时插件都可用，无论项目特定配置如何。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T20:35:08.937

安装 scala 2.10.0 和 IntelliJ，如下所示： [在 Mac OSX 上的 IntelliJ 中运行 playframework 的第一个示例](https://stackoverflow.com/questions/15751139/running-the-first-example-of-playframework-in-intellij-on-a-mac-osx)

如果您使用的是 scala playframework，则暂时清理 ivy2（[因为与 sbt-idea 和 playframework 存在命名空间冲突](https://github.com/typesafehub/sbt-idea/pull/1)）

```
rm -rf ~/.ivy2 
```

按照以下说明进行操作：

[https://class.coursera.org/progfun-002/forum/thread?thread_id=9&post_id=24#post-24](https://class.coursera.org/progfun-002/forum/thread?thread_id=9&post_id=24#post-24)

[http://www.guardian.co.uk/info/developer-blog/2012/sep/21/funional-programming-principles-scala-setting-up-intellij](http://www.guardian.co.uk/info/developer-blog/2012/sep/21/funtional-programming-principles-scala-setting-up-intellij)

除了那个：

*   文件 ~/.sbt/plugins/build.sbt 应该包含：

    addSbtPlugin("com.github.mpeltonen" % "sbt-idea" % "1.2.0")

*   使用 scala 2.10.0 而不是 scala 2.9.2

然后它起作用了，至少对我来说。

# android - 获取视图被夸大的资源 id

> ID：15888441
> 
> 赞同：5
> 
> 时间：2013-04-08T20:32:49.823
> 
> 标签：android, android-layout, listview, android-resources

有没有办法获取视图膨胀的布局的资源 id（如 R.layout.viewtoInflate）？

我正在尝试实现一个列表视图，它使用 2 个自定义布局作为列表项。使用哪个项目布局取决于用于填充列表视图的对象中的字段。

我在自定义适配器中缺少的是一种了解我在 getView() 中获得的“convertView”是从哪个资源膨胀的方法。如果我可以获得该信息，我可以比较并确定是否可以按原样重新使用转换视图，或者是否必须将其替换为当前项目的适当布局。

所以理想情况下它会是这样的：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder holder;

    JSONObject currItem = mItems.getJSONObject(position);

    int layoutType;

    if (currItem.getBoolean("alternate"))
        layoutType = R.layout.list_item_b;
    else
        layoutType = R.layout.list_item_a;

    if (convertView == null || <convertView.resourceID> != layoutType ) {
        convertView = inflater.inflate(layoutType, null);

        //Finish setting up new View and its holder
    }
    else {
        //Get view holder for view reuse
    }

    //populate view with the required content

    return convertView;
} 
```

在最坏的情况下，我根本无法重用视图，只是每次都增加我需要的布局，但这似乎非常浪费。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T20:35:36.363

有一种使用多种布局的官方方法，只需覆盖`getViewTypeCount()`和`getItemViewType()`. 这些方法通知适配器期望多个布局，并且`convertView`始终是适当的布局（因此不需要检查资源 id。）请参阅[此示例](https://stackoverflow.com/a/13297339/1267661)以获取一些示例代码。

但是，如果您想找出哪个布局是哪个，只需检查一个独特的特征。例如，您可以`findViewById()`在仅存在于一种布局中的 View 上使用，然后检查它是否返回`null`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T20:37:26.677

列表视图支持多种布局 - 您需要返回 中使用的布局计数`getViewTypeCount()`和正确的布局类型`getItemViewType()`。

如果您仍然想知道它是从哪个布局膨胀的，那么您可以使用将任何信息附加到视图`setTag()`并稍后使用它来检索它`getTag()`- 它可以是您的 layoutId 或其他任何内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-11T18:29:37.293

我所做的是在创建视图时将膨胀视图的资源 ID 保存在视图持有者中。这允许我在填充视图时获取布局资源 ID。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-08T21:47:39.490

如果您要求从您膨胀的布局中获取项目的 ID。它是这样的： -

```
//Suppose you have an TextView in the inflated layout of id textView1\. Here you go

convertView = inflater.inflate(layoutType, null);
TextView tv = (TextView)convertview.findViewById(R.id.textView1); 
```

# jquery - 如何禁用基于其他选定选项的选择？

> ID：15888444
> 
> 赞同：1
> 
> 时间：2013-04-08T20:32:57.997
> 
> 标签：jquery, jquery-selectors, option

我对 jQuery 函数有疑问。我想基于一个选定的选项来禁用其他选择。就我而言，如果选择了 select 1 中的选项 1，我想禁用 select2。所以我使用这个jQuery函数：

```
$(document).ready(function(e) {
$('.select1').change(function(e) {
    if ($('.select1').val()==1){
        $('.select2').attr('disabled','disabled');
    }
    else{
        $('.select2').removeAttr('disabled');
    }
})
}); 
```

但这仅在我首先选择选项 2（或此选择中的任何其他选项）然后重新选择选项 1（我想这是因为使用更改功能）时才有效。当默认选择1设置为选项1时如何禁用选择2？？？

```
$(document).ready(function(e) {
    if ($('.select1').val()==1){
    $('.select2').attr('disabled','disabled');
}
else{
    $('.select2').removeAttr('disabled');
}
}) 
```

这也行不通：/

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T20:35:43.773

听起来您想在启动时触发“更改”事件。

```
$('.select1').trigger('change'); 
```

所以，

```
$(document).ready(function(e) {
    $('.select1').change(function(e) {
        if ($('.select1').val()==1){
            $('.select2').attr('disabled','disabled');
        }
        else{
            $('.select2').removeAttr('disabled');
        }
    });
    $('.select1').trigger('change');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T20:36:37.203

几乎相同的代码。

```
$(document).ready(function(e) {
 change('.select1');
 $('.select1').change(function(e) {
   change(this);
 }) });  function change(sel){
if ($(sel).val()==1){
    $('.select2').attr('disabled','disabled');
  }
  else{
    $('.select2').removeAttr('disabled');
 } } 
```

# javascript - “.on()”动作监听器似乎停止工作

> ID：15888450
> 
> 赞同：5
> 
> 时间：2013-04-08T20:33:24.767
> 
> 标签：javascript, jquery

我想我将从一个[指向我项目的 jsfiddle 的链接开始](http://jsfiddle.net/4WSKC/10)

我将解释它应该如何工作以及我的主要问题。

基本上，它在顶部由选择器框描绘了三个“线”。每行都有不同数量的“部分”显示在左侧边栏上。选择零件后，表格会向上滑动以输入信息（但现在可以忽略）。提交后，应将新的“作业”添加到列表中。到目前为止，这一切都很好。

当我换线时，我的问题就来了。出于某种原因，每当我从默认的第一行切换行时，我就无法再将作业添加到列表中。我的 .on() 监听器只是停止识别我正在单击按钮。

基本上，我是一名工程专业的学生，​​正在从事他的高级设计项目，并且必须自学所有这些 Web 编程内容，因为这是客户想要的（即使它不完全在我的领域专长范围内）。无论如何，我知道这是一个很长的问题，所以人们不会那么倾向于帮助我，但我无法描述我会多么感激。由于有几百行代码，我会回答我能回答的任何问题。

以下是我认为可能相关的代码部分：

```
$('ul#parts').find('button').on('click', function(){
  ADDUPDATETOGGLE = "ADD";
  CSPC = $(this).attr("data-part");
  showForm();
});

$('select.lineChoice').on('click', function(){
  currentLine = updatePartList(currentLine);
  updateJobList(jobListByLine[currentLine]);
});

function updateJobList(newJobList){
  $("ul#jobs").html(newJobList);
}

function updatePartList(currentLine){
  var   cLine = $('select.lineChoice').find('option:selected').attr('value'),
        buttonArray = [['A5843', 'A5844', 'B3173', 'B3174', 'B3940', 'B4220', 'B6645', 'B6646', 'B6647', 'B6648', 'B6649', 'B6650', 'B7657', 'B7658', 'B7659', 'B7660'],
        ['A2279', 'A2280', 'A4451', 'A4453', 'A4454', 'A6499', 'A6500', 'B0934', 'B0935', 'B3810', 'B3871', 'B5532', 'B5533', 'B5709'],
        ['B0929', 'B0991', 'B1097', 'B3483', 'B3484', 'B3485', 'B6634', 'B7814']],
        partList =  $("ul#parts");
  if ( cLine == "G1" ){
        currentLine = 0;
  }
  else if( cLine == "R1" ){
        currentLine = 1;
  }
  else if( cLine == "BB3"){
        currentLine = 2;
  }
  else{
        alert("LINE ERROR");
        currentLine =  99;
  }
  partList.html(buttonHTML(buttonArray[currentLine]));
  return currentLine;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T20:37:18.690

这：

```
$('ul#parts').find('button').on('click', function(){
  ADDUPDATETOGGLE = "ADD";
  CSPC = $(this).attr("data-part");
  showForm();
}); 
```

应该：

```
$('ul#parts').on('click', 'button', function(){
  ADDUPDATETOGGLE = "ADD";
  CSPC = $(this).attr("data-part");
  showForm();
}); 
```

您希望绑定到一个稳定的父元素，以便当按钮全部更改时您仍然可以响应事件。通过使用`.find()`，您将处理程序直接附加到初始按钮集。一旦这些被替换，处理程序就丢失了。

# asp.net-mvc - 有没有更好的方法来使用 MVC 4 和 Entity Framework 5 添加子记录？

> ID：15888452
> 
> 赞同：4
> 
> 时间：2013-04-08T20:33:35.673
> 
> 标签：asp.net-mvc, entity-framework, asp.net-mvc-4, entity-framework-5

我只是在学习 MVC 并结合实体框架处理它的无状态性质。我的问题是，有没有更优雅的方式来处理下面的场景？

我有两个 POCO 实体：

```
public class Contest
{
    public long ID { get; set; }
    ....   .....
    public ICollection<ContestPrize> Prizes { get; set; }
}

public class ContestPrize
{
    public long ID { get; set; }

    public Contest Contest { get; set; }

} 
```

然后我有一个 MVC 视图，它显示了比赛和与之相关的所有奖品。在该视图中，我有一个“创建奖品”链接来创建一个新奖品，它将比赛的 ID 传递给 ContestPrize 控制器，如下所示：

```
@Html.ActionLink("Create Prize", "Create", "ContestPrizes", new { ContestId = Model.ID }, null) 
```

ContestId 作为提交新奖品的表单中的隐藏字段保留，以便我可以在创建时检索它。奖品控制器上的创建方法如下：

```
 [HttpPost]
    public ActionResult Create(int ParentID, ContestPrize ContestPrize)
    {

        if (ModelState.IsValid)
        {

            db.ContestPrizes.Add(ContestPrize);
            db.SaveChanges();
            return RedirectToAction("Index", "Contests", ParentID);
        }

        return View(ContestPrize);
    } 
```

这就是我遇到一些我不喜欢的丑陋的地方。以下是问题：

1.  测试`ModelState.IsValid`失败。这是因为父级的导航属性在模型上为空。它没有被填充。我可以跳过对模型的验证并直接进入数据库，但是有没有办法在不执行下面的 #2 的情况下填充它？
2.  此时未填充父属性，但我确实有来自隐藏表单字段的 ParentID。由于一切都是无状态的，因此 db 对象没有父对象（这很好）。因此，我可以执行另一个数据库读取以使用 parentID 获取父对象，然后执行`Parent.Prizes.Add(ContestPrize)`or `ContestPrize.Contest = Parent`。但我真的不喜欢这样，因为当我拥有创建子记录所需的所有信息时，我正在做一个额外的数据库访问来读取父级。

那么，Entity Framework 有没有办法只设置父对象的 ID 并保存子对象而无需检索父对象？或者...理想情况下，有没有办法使用 MVC 在创建时使用父对象预填充新模型，因为在进入创建视图之前我确实有父对象？在 ViewData 中传递父对象以使其可用会有多糟糕？

我可以通过重新加载父母来完成这项工作。但如果可能的话，我想避免它。

想法？

**更新：** 添加`ContestID`到 ContestPrize POCO，然后`[ForeignKey("ContestID")]`按照@NSGaga 的建议装饰导航属性完美地工作，并消除了一些混乱的 ParentID 传递问题。新的 POCO 如下所示：

```
public class Contest
{
    public long ID { get; set; }
    ....   .....
    public ICollection<ContestPrize> Prizes { get; set; }
}

public class ContestPrize
{
    public long ID { get; set; }

    public long ContestID { get; set; }

    [ForeignKey("ContestID")]
    public Contest Contest { get; set; }

} 
```

我可以消除在视图中传递的 ParentID 并将其设置为隐藏字段，因为 MVC 中的数据绑定负责新实体上的 ContestID（我仍然必须将 id 传递到初始视图中，但仅此而已。它是刚从那里绑定）。Controller 上的新 Create 操作如下所示：

```
[HttpPost]
public ActionResult Create(ContestPrize ContestPrize)
{
    if (ModelState.IsValid)
    {
        db.ContestPrizes.Add(ContestPrize);
        db.SaveChanges();
        return RedirectToAction("Index", "Contests", ContestPrize.ContestID);
    }

    return View(ContestPrize);
} 
```

干净简单，没有乱七八糟的。我喜欢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T20:37:34.597

如果您使用“代码优先”（所有事情都建议），那么您可以执行类似...

```
public class ContestPrize
{
    public long ID { get; set; }

    public long ContestID { get; set; }
    public Contest Contest { get; set; }
} 
```

这应该创建（按照惯例）并将 ContestID 映射到 FK。在某些复杂的情况下，您可能需要在 fluent 代码中指定该关系，但这通常就足够了。

> 然后，您可以通过`ContestID`填写来引用父级 - 然后执行`Add`。

这是粗略的笔触，如果您需要更多信息，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T20:38:35.943

您可能不应该直接将实体用作视图模型。我建议使用这样的东西：

```
// Entitiy Type
public class ContestPrize { ... }

// ViewModel Type
public class ContestPrizeViewModel { ... }

// In your controller
[HttpPost]
public ActionResult Create(int ParentID, ContestPrizeViewModel ContestPrize)
{
    if (ModelState.IsValid)
    {
        var entity = db.Create<ContestPrize>();
        entity.ContestID = ParentID;
        entity.Blah = ContestPrize.Blah
        db.ContestPrizes.Add(entity);
        db.SaveChanges();
        return RedirectToAction("Index", "Contests", ParentID);
    }

    return View(ContestPrize);
} 
```

这使您可以轻松地将域逻辑与视图逻辑分开。它可能需要额外的代码，但它是一种更强大的做事方式。

# plone - 从 Plone 中完全删除“Products.qPloneDropDownMenu.browser”时遇到问题

> ID：15888464
> 
> 赞同：2
> 
> 时间：2013-04-08T20:34:28.953
> 
> 标签：plone

尝试在 Plone 中使用其他产品时出现以下错误。我卸载了以下产品并在没有它的情况下重建了 Plone。但似乎安装时留下了一些东西。关于如何完全删除这个包的任何想法？

这个不再安装

```
"Products.qPloneDropDownMenu.browser"

Request URL   
http://x.x.x.x:8080/site2/xxx/portal_cache_settings/cache_tool_config

Traceback (innermost last):
    Module ZPublisher.Publish, line 125, in publish
    Module Zope2.App.startup, line 238, in commit
    Module transaction._manager, line 96, in commit
    Module transaction._transaction, line 395, in commit
    Module transaction._transaction, line 495, in _commitResources
    Module ZODB.Connection, line 510, in commit
    Module ZODB.Connection, line 555, in _commit
    Module ZODB.Connection, line 582, in _store_objects
    Module ZODB.serialize, line 407, in serialize
    Module ZODB.serialize, line 416, in _dump
PicklingError: Can't pickle <class 'Products.qPloneDropDownMenu.browser.interfaces.IQPloneDropDownMenuLayer'>: import of module Products.qPloneDropDownMenu.browser.interfaces failed 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:53:45.577

You can use wildcard.fixpersitentutilities to remove the persistent class, read this post from David Breitkreutz for detailed informations:

[http://davidjb.com/blog/2010/06/plone-sitemanager-leftovers-not-the-good-kind/](http://davidjb.com/blog/2010/06/plone-sitemanager-leftovers-not-the-good-kind/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T07:47:37.877

如果使用 fixpersitentutilities 的（仍然正确的）答案对您不起作用，有时我们会使用这种干净但更长的方式：

1) 重新添加产生问题的产品 2) 重新安装 3) 手动提供缺少的卸载 Generic Setup 卸载步骤。

在您的情况下，您需要添加“卸载”配置文件，以及（至少）一个 browserlayer.xml 所以就是这样：

```
<layers>
   <layer name="qPloneDropDownMenu"
     interface="Products.qPloneDropDownMenu.browser.interfaces.IQPloneDropDownMenuLayer"
     remove="True" />
</layers> 
```

4）再次卸载

# php - 只允许注册用户从我的 Amazon S3 存储桶下载

> ID：15888465
> 
> 赞同：15
> 
> 时间：2013-04-08T20:34:29.207
> 
> 标签：php, amazon-web-services, amazon-s3

我正在构建一个 PHP 网站，它将其内容文件保存在 Amazon S3 上。网站文件（使用 PHP 代码）托管在传统服务器上。用户将在网站上注册，注册并登录后，他们将可以访问 S3 上的文件。

**问题是，如何只让登录用户下载文件并阻止其他人下载？AWS IAM 是否必须以某种方式参与？**

我不想要过期的 URL。我只想向特定用户授予对文件的访问权限，并且我不希望他们在任何时间段内与其他任何人共享链接。

将来我还想限制注册用户对文件的访问——根据用户帐户的类型，用户可以访问不同的文件。

提前谢谢回复！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T13:56:03.307

这可以做到...我使用 ROR 而不是 PHP，我的应用程序控制对 S3 存储桶中数据的访问。我有我的应用程序可以访问的存储桶，并且文件访问权限受到他们在我的应用程序中的凭据的限制。说得通？

我有一个公共存储桶来存储我的资产（公开可用的图像）和一个只有我的应用程序才能访问的存储桶。我的应用程序中的用户只能根据他们的凭据访问存储桶的某些位。

数据库存储对确切 s3 文件/位置的引用、如何访问它（交易期间传递的加密凭据和密钥）以及谁可以访问它。

阅读有关从 S3 存储桶提供 Web 资产并创建上传表单到 S3 存储桶的信息。这将使您了解如何与 S3 存储桶进行交互。一旦您可以与存储桶内容进行交互，您就可以控制对您的 Web 应用程序的访问。

祝你好运！

# java - 从 Java 中的 inOrder 和 preOrder 数据构建二叉树

> ID：15888466
> 
> 赞同：1
> 
> 时间：2013-04-08T20:34:31.097
> 
> 标签：java

我已经通过这个程序几次，但我真的看不出这个问题。基本上，它应该从 inOrder 和 preOrder 遍历数据（作为整数数组发送）重建二叉树。它是整数的二叉树。

这是我正在使用的树：

```
 234
    /   \
  98    678
 / \      \
45 124    1789 
```

preOrder 是 234, 98, 45, 124, 678, 1789 inOrder 是 45, 98, 124, 234, 678, 1789

出现的问题是 1789。代码将树重建到 1789，但出于某种奇怪的原因将其排除在外。我决定在 inOrder 数组中切换 678 和 1789，将 1789 放在 678 的左侧，将 0 放在 678 的右侧。在下面的代码中，数组按照它们应该是的顺序（或者什么我认为应该是）。

构建树代码：

```
public class BuildTree
{

public static BinaryTreeNode buildTree(int inOrder[], int preOrder[], int preIndex )
{               
    if (inOrder.length > 1)  
    {
        int inIndex = 0;
        for (int i = 0; i < inOrder.length; i++)
        {
            if (preOrder[preIndex] == inOrder[i])
            {
                inIndex = i ;
                break;                  
            }
        }

        if (inIndex > 0)
        {          
            BinaryTreeNode node = new BinaryTreeNode(inOrder[inIndex]);

            if (preIndex < preOrder.length - 1 )
            {
            node.setLeft(buildTree(leftArray(inOrder, inIndex), preOrder, preIndex + 1));
            node.setRight(buildTree(rightArray(inOrder, inIndex), preOrder, inIndex + 1));  
            }

            return node;
        }           
    }       
    return new BinaryTreeNode(inOrder[0]);
}

public static int[] leftArray(int[] input, int index)
{        
    int left[] = new int [index];

    for (int i = 0 ; i < index ; i ++)
    {
        left[i] = input[i] ;
    }

    return left;        
}

public static int[] rightArray(int[] input, int index)
{               
    int right[] = new int [index];
    int x= 0;

    for (int i = index +1  ; i < input.length  ; i ++)
    {
        right[x] = input[i] ;
        ++x;
    }

    return right;       
}
} //end class 
```

二叉树节点：

```
public class BinaryTreeNode
{
    private int data;
    private BinaryTreeNode left;
    private BinaryTreeNode right;

    BinaryTreeNode()
    {

    }

    BinaryTreeNode(int data)
    {
        this.data = data;
    }

    public void setData(int data) {
        this.data = data;
    }

    public void setLeft(BinaryTreeNode left) {
        this.left = left;
    }

    public void setRight(BinaryTreeNode right) {
        this.right = right;
    }

    public int getData() {
        return data;
    }

    public BinaryTreeNode getLeft() {
        return left;
    }

    public BinaryTreeNode getRight() {
        return right;
    }
} 
```

主要测试方法：

```
public static void main(String[] args)
{
    int[] preOrder = {234, 98, 45,  124, 678, 1789};
    int[] inOrder =  {45,  98, 124, 234, 678, 1789};

    BinaryTreeNode bsTree = BuildTree.buildTree(inOrder, preOrder, 0);

    System.out.println(bsTree.getData());
    System.out.println(bsTree.getLeft().getData());
    System.out.println(bsTree.getLeft().getLeft().getData());
    System.out.println(bsTree.getLeft().getRight().getData());
    System.out.println(bsTree.getRight().getData());
    System.out.println(bsTree.getRight().getRight().getData());
    System.out.println(bsTree.getRight().getLeft().getData());

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:29:51.383

至少有以下几个问题：

1.  `inIndex`可以等于 0，则可以在 inOrder 列表的第一个位置找到一个元素。
2.  `return new BinaryTreeNode(inOrder[0]);`仅当 inOrder 列表中有元素时才应返回。当树不完整时，您缺少叶节点，您应该`return null;`
3.  `rightArray`您需要分配元素，而`input.length-index-1`不仅仅是`index`.

除了上述问题之外，逻辑正在运行，至少在您提供的测试中。

# c# - 需要获取页面标题

> ID：15888468
> 
> 赞同：0
> 
> 时间：2013-04-08T20:34:34.393
> 
> 标签：c#, asp.net

此代码显示时，它具有主窗体的页面标题，如何获取此页面的页面标题？

```
<asp:Content ID="Content1" ContentPlaceHolderID="MainContent" Runat="Server">

    <table cellpadding="5" cellspacing="5" border="0">
        <tr>
            <td colspan="2" style="width:100px;">
                <dx:ASPxLabel ID="ASPxLabel1" runat="server" Text="Facility Name:"></dx:ASPxLabel>
                </td>
            <td colspan="9">
                <dx:ASPxTextBox ID="tbFacility" runat="server" Width="800px"></dx:ASPxTextBox>
                </td>
        </tr>
        <tr>
            <td colspan="2">
                <dx:ASPxLabel ID="ASPxLabel3" runat="server" Text="Resident Name:"></dx:ASPxLabel>
                </td>
            <td colspan="3">
                <dx:ASPxTextBox ID="tbResidentName" runat="server" Width="200px"></dx:ASPxTextBox>
                </td>
            <td >
                 <dx:ASPxLabel ID="ASPxLabel2" runat="server" Text="Physician Name:"></dx:ASPxLabel>
                </td>
            <td colspan="5">
                <dx:ASPxTextBox ID="tbPhysicianName" runat="server" Width="200px"></dx:ASPxTextBox>
                </td>
        </tr>
        <tr>
            <td colspan="2">
        <dx:ASPxLabel ID="ASPxLabel4" runat="server" Text="Allergies:"></dx:ASPxLabel>
            </td>
            <td colspan="9">
        <dx:ASPxTextBox ID="tbAllergies" runat="server" Width="200px"></dx:ASPxTextBox>
            </td>
        </tr>
        <tr>
            <td colspan="2">
        <dx:ASPxLabel ID="ASPxLabel5" runat="server" Text="Diagnosis:"></dx:ASPxLabel>
            </td>
            <td colspan="9">
        <dx:ASPxTextBox ID="tbDiagnosis" runat="server" Width="200px"></dx:ASPxTextBox>
            </td>
        </tr>
        <tr>
            <td>
                    <dx:ASPxLabel ID="ASPxLabel8" runat="server" Text="DOB:" Width="50px"></dx:ASPxLabel>
                </td>
            <td align="left">
                    &nbsp;</td>
            <td>
                    <dx:ASPxTextBox ID="tbDOB" runat="server" Width="100px"></dx:ASPxTextBox>
                </td>
            <td align="right">
                    <dx:ASPxLabel ID="ASPxLabel9" runat="server" Text="Weight:" Width="50px"></dx:ASPxLabel>
                </td>
            <td align="left">
                    <dx:ASPxTextBox ID="tbWeight" runat="server" Width="100px"></dx:ASPxTextBox>
                </td>
            <td align="right">
                    <dx:ASPxLabel ID="ASPxLabel10" runat="server" Text="Height:" Width="50px"></dx:ASPxLabel>
                </td>
            <td align="left">
                    <dx:ASPxTextBox ID="tbHeight" runat="server" Width="100px"></dx:ASPxTextBox>
                </td>
            <td align="right">
                    <dx:ASPxLabel ID="ASPxLabel11" runat="server" Text="BP:" Width="50px"></dx:ASPxLabel>
                </td>
            <td align="left">
                     <dx:ASPxTextBox ID="tbBP" runat="server" Width="100px"></dx:ASPxTextBox>
                </td>
            <td align="right">
                    <dx:ASPxLabel ID="ASPxLabel12" runat="server" Text="Pulse:" Width="50px"></dx:ASPxLabel>
                </td>
            <td align="left">
                     <dx:ASPxTextBox ID="tbPulse" runat="server" Width="100px" ></dx:ASPxTextBox>
                </td>
        </tr>
        <tr>
            <td colspan="11" style="height: 180px">
                <dx:ASPxRoundPanel ID="ASPxRoundPanel1" runat="server" BackColor="#FFFFCC" 
                    HeaderText="REASON FOR REQUEST" Width="100%">
                    <HeaderStyle Font-Bold="True" />
                    <PanelCollection>
<dx:PanelContent ID="PanelContent1" runat="server" SupportsDisabledAttribute="True">
    <table cellpadding="2" style="width: 100%">
        <tr>
            <td width="200">
                <dx:ASPxCheckBox ID="ASPxCheckBox1" runat="server" CheckState="Unchecked" 
                    Text="Short term stay">
                </dx:ASPxCheckBox>
            </td>
            <td>
                <dx:ASPxTextBox ID="ASPxTextBox1" runat="server" Width="650px">
                </dx:ASPxTextBox>
            </td>
        </tr>
        <tr>
            <td>
                <dx:ASPxCheckBox ID="ASPxCheckBox2" runat="server" CheckState="Unchecked" 
                    Text="Anticipated discharge date">
                </dx:ASPxCheckBox>
            </td>
            <td>
                <dx:ASPxTextBox ID="ASPxTextBox2" runat="server" Width="650px">
                </dx:ASPxTextBox>
            </td>
        </tr>
        <tr>
            <td>
                <dx:ASPxCheckBox ID="ASPxCheckBox3" runat="server" CheckState="Unchecked" 
                    Text="Significant chagne in condition">
                </dx:ASPxCheckBox>
            </td>
            <td>
                <dx:ASPxTextBox ID="ASPxTextBox3" runat="server" Width="650px">
                </dx:ASPxTextBox>
            </td>
        </tr>
        <tr>
            <td>
                <dx:ASPxCheckBox ID="ASPxCheckBox4" runat="server" CheckState="Unchecked" 
                    Text="Other">
                </dx:ASPxCheckBox>
            </td>
            <td>
                <dx:ASPxTextBox ID="ASPxTextBox4" runat="server" Width="650px">
                </dx:ASPxTextBox>
            </td>
        </tr>
    </table>
    <br />
                        </dx:PanelContent>
</PanelCollection>
                </dx:ASPxRoundPanel>
            </td>
        </tr>
        <tr>
            <td colspan="11">

                <dx:ASPxRoundPanel ID="ASPxRoundPanel2" runat="server" BackColor="#FFFFCC" 
                    HeaderText="CLINICAL DESCRIPTION OF NEED FOR REVIEW (please check all that apply and explain)" 
                    Width="100%" Height="416px">
                    <HeaderStyle Font-Bold="True" />
                    <PanelCollection>
<dx:PanelContent ID="PanelContent2" runat="server" SupportsDisabledAttribute="True">
    <table cellpadding="2" style="width: 100%">
        <tr>
            <td style="width:200px;">
                <dx:ASPxCheckBox ID="ASPxCheckBox5" runat="server" CheckState="Unchecked" 
                    Text="Anorexia and/or unplanned weight loss or gain">
                </dx:ASPxCheckBox>
            </td>
            <td>
                <dx:ASPxTextBox ID="ASPxTextBox5" runat="server" Width="650px">
                </dx:ASPxTextBox>
            </td>
        </tr>
        <tr>
            <td>
                <dx:ASPxCheckBox ID="ASPxCheckBox6" runat="server" CheckState="Unchecked" 
                    Text="Behavioral changes, unusual behavioe patterns (incl. increased distressed behavior)">
                </dx:ASPxCheckBox>
            </td>
            <td>
                <dx:ASPxTextBox ID="ASPxTextBox6" runat="server" Width="650px">
                </dx:ASPxTextBox>
            </td>
        </tr>
        <tr>
            <td>
                <dx:ASPxCheckBox ID="ASPxCheckBox7" runat="server" CheckState="Unchecked" 
                    Text="Bowel function changes incl. constipation; impaction">
                </dx:ASPxCheckBox>
            </td>
            <td>
                <dx:ASPxTextBox ID="ASPxTextBox7" runat="server" Width="650px">
                </dx:ASPxTextBox>
            </td>
        </tr>
        <tr>
            <td style="height: 27px">
                <dx:ASPxCheckBox ID="ASPxCheckBox8" runat="server" CheckState="Unchecked" 
                    Text="Confusion, Cognitive decline, worsening of dementia (incl. Delirium) of recent onset">
                </dx:ASPxCheckBox>
            </td>
            <td style="height: 27px">
                <dx:ASPxTextBox ID="ASPxTextBox8" runat="server" Width="650px">
                </dx:ASPxTextBox>
            </td>
        </tr>
         <tr>
            <td width="200">
                <dx:ASPxCheckBox ID="ASPxCheckBox9" runat="server" CheckState="Unchecked" 
                    Text="Dehydration, fluid/electrolyte imbalance">
                </dx:ASPxCheckBox>
            </td>
            <td>
                <dx:ASPxTextBox ID="ASPxTextBox9" runat="server" Width="650px" Text="   ">
                </dx:ASPxTextBox>
            </td>
        </tr>
        <tr>
            <td>
                <dx:ASPxCheckBox ID="ASPxCheckBox10" runat="server" CheckState="Unchecked" 
                    Text="Depression; Mood disturbance">
                </dx:ASPxCheckBox>
            </td>
            <td>
                <dx:ASPxTextBox ID="ASPxTextBox10" runat="server" Width="650px">
                </dx:ASPxTextBox>
            </td>
        </tr>
        <tr>
            <td>
                <dx:ASPxCheckBox ID="ASPxCheckBox11" runat="server" CheckState="Unchecked" 
                    Text="Dyshangia, swallowing difficulty">
                </dx:ASPxCheckBox>
            </td>
            <td>
                <dx:ASPxTextBox ID="ASPxTextBox11" runat="server" Width="650px">
                </dx:ASPxTextBox>
            </td>
        </tr>
        <tr>
            <td>
                <dx:ASPxCheckBox ID="ASPxCheckBox12" runat="server" CheckState="Unchecked" 
                    Text="Excessive sedation, insomnia, or sleep disturbance">
                </dx:ASPxCheckBox>
            </td>
            <td>
                <dx:ASPxTextBox ID="ASPxTextBox12" runat="server" Width="650px">
                </dx:ASPxTextBox>
            </td>
        </tr>
         <tr>
            <td width="200">
                <dx:ASPxCheckBox ID="ASPxCheckBox13" runat="server" CheckState="Unchecked" 
                    Text="Falls, dizziness, or evidence of impaited condition">
                </dx:ASPxCheckBox>
            </td>
            <td>
                <dx:ASPxTextBox ID="ASPxTextBox13" runat="server" Width="650px">
                </dx:ASPxTextBox>
            </td>
        </tr>
        <tr>
            <td>
                <dx:ASPxCheckBox ID="ASPxCheckBox14" runat="server" CheckState="Unchecked" 
                    Text="Gastrointestinal bleeding">
                </dx:ASPxCheckBox>
            </td>
            <td>
                <dx:ASPxTextBox ID="ASPxTextBox14" runat="server" Width="650px">
                </dx:ASPxTextBox>
            </td>
        </tr>
        <tr>
            <td>
                <dx:ASPxCheckBox ID="ASPxCheckBox15" runat="server" CheckState="Unchecked" 
                    Text="Headaches, muscle pain, generalized aching or pain">
                </dx:ASPxCheckBox>
            </td>
            <td>
                <dx:ASPxTextBox ID="ASPxTextBox15" runat="server" Width="650px">
                </dx:ASPxTextBox>
            </td>
        </tr>
        <tr>
            <td>
                <dx:ASPxCheckBox ID="ASPxCheckBox16" runat="server" CheckState="Unchecked" 
                    Text="rash; prutus">
                </dx:ASPxCheckBox>
            </td>
            <td>
                <dx:ASPxTextBox ID="ASPxTextBox16" runat="server" Width="650px">
                </dx:ASPxTextBox>
            </td>
        </tr>
         <tr>
            <td width="200">
                <dx:ASPxCheckBox ID="ASPxCheckBox17" runat="server" CheckState="Unchecked" 
                    Text="Seizure activity">
                </dx:ASPxCheckBox>
            </td>
            <td>
                <dx:ASPxTextBox ID="ASPxTextBox17" runat="server" Width="650px">
                </dx:ASPxTextBox>
            </td>
        </tr>
        <tr>
            <td>
                <dx:ASPxCheckBox ID="ASPxCheckBox18" runat="server" CheckState="Unchecked" 
                    Text="Spontaneousor unexplained bleeding/bruising">
                </dx:ASPxCheckBox>
            </td>
            <td>
                <dx:ASPxTextBox ID="ASPxTextBox18" runat="server" Width="650px">
                </dx:ASPxTextBox>
            </td>
        </tr>
        <tr>
            <td>
                <dx:ASPxCheckBox ID="ASPxCheckBox19" runat="server" CheckState="Unchecked" 
                    Text="Unexplained decline in functional status (e.g. ADL's, vision)">
                </dx:ASPxCheckBox>
            </td>
            <td>
                <dx:ASPxTextBox ID="ASPxTextBox19" runat="server" Width="650px">
                </dx:ASPxTextBox>
            </td>
        </tr>
        <tr>
            <td>
                <dx:ASPxCheckBox ID="ASPxCheckBox20" runat="server" CheckState="Unchecked" 
                    Text="Urinary retention or incontinence">
                </dx:ASPxCheckBox>
            </td>
            <td>
                <dx:ASPxTextBox ID="ASPxTextBox20" runat="server" Width="650px">
                </dx:ASPxTextBox>
            </td>
        </tr>
    </table>
                        </dx:PanelContent>
</PanelCollection>
                </dx:ASPxRoundPanel>

            </td>
        </tr>

    </table>

<br />

</asp:Content> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:45:02.437

看起来您正在使用母版页。

如果您想要每个页面的特定标题（我假设您的意思是标题？即浏览器作为窗口标题的内容），那么您需要在`<title>`标签中指定一个值。

如果您还没有`<head>`内容的占位符，请制作一个，然后使用那里的标题。

IE

在您的页面中：

```
<asp:Content ID="headContent" ContentPlaceHolderID="headContentPlaceholder" Runat="Server">
    <title><asp:Label> .... </asp:Label></title>
</asp:Content> 
```

在你的主人：

```
<head>
    <asp:ContentPlaceholder ID="headContentPlaceholder" Runat="Server"></asp:Content>
</head> 
```

# c++ - 程序返回不正确的值 (C++)

> ID：15888476
> 
> 赞同：1
> 
> 时间：2013-04-08T20:34:59.237
> 
> 标签：c++, arrays

我编写了一个简单的代码来处理二维数组，代码的目的是使用矩阵方法求解两个线性联立方程（表示方阵中的系数，计算逆，将逆乘以输出的每个方程找到两个变量的结果）。代码编译时没有警告，所以我不知道问题可能是什么。

```
#include <iostream>
using namespace std;

double determinant(double parameterMatrix[2][2])
{
    return parameterMatrix[1][1] * parameterMatrix[2][2] - parameterMatrix[1][2] *     parameterMatrix[2][1];
}

void invertMatrix (double parameterMatrix[2][2], double inverseMatrix[2][2])
{
    double parameterDeterminant = determinant(parameterMatrix);

    inverseMatrix[1][1] = parameterMatrix[2][2] / parameterDeterminant;
    inverseMatrix[1][2] = - parameterMatrix[1][2] / parameterDeterminant;
    inverseMatrix[2][1] = - parameterMatrix[2][1] / parameterDeterminant;
    inverseMatrix[2][2] = parameterMatrix[1][1] / parameterDeterminant;
}

int main()
{
    double resultVector[2];
    double coefficientMatrix[2][2];

    cout << "Enter equations of lines, which are of the form ax+by=c" << endl;

    cout << "a = "; cin >> coefficientMatrix[1][1];
    cout << "b = "; cin >> coefficientMatrix[1][2];
    cout << "c = "; cin >> resultVector[1];

    cout << "a = "; cin >> coefficientMatrix[2][1];
    cout << "b = "; cin >> coefficientMatrix[2][2];
    cout << "c = "; cin >> resultVector[2]; cout << endl << endl;

    double inverseCoefficientMatrix[2][2];
    invertMatrix(coefficientMatrix, inverseCoefficientMatrix);

    double x = inverseCoefficientMatrix[1][1] * resultVector[1] + inverseCoefficientMatrix[1][2] * resultVector[2];
    double y = inverseCoefficientMatrix[2][1] * resultVector[1] + inverseCoefficientMatrix[2][1] * resultVector[2];

    cout << "The lines intersect at the point (" << x << ", " << y << ")" << endl;
    return 0;
} 
```

如果你用一个简单的例子来试试，例如，x + 2y = 3 和 3x + 2y = 1，它应该返回 x = -1 和 y = 2，它返回的值是 -0.5 和 0.1875。我一直在代码中插入行以打印出每个阶段的所有值，我得出的结论是行列式函数正在改变 resultVector 的值，但我不知道为什么，所以任何帮助都会不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T20:40:48.637

在 C/C++ 中，数组索引从 0 开始，而不是从 1 开始。和`double a[2]`也是如此。 **没有****。**（*有，但不是你的*）`a[0]``a[1]`**`a[2]`**

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T20:40:25.577

数组在 C++ 中从零开始：

```
double determinant(double parameterMatrix[2][2])
{
    return parameterMatrix[0][0] * parameterMatrix[1][1] - parameterMatrix[0][1] * parameterMatrix[1][0];
}
etc... 
```*

# delphi - Delphi7：TBitmap.Canvas.Handle = 0

> ID：15888483
> 
> 赞同：0
> 
> 时间：2013-04-08T20:35:30.277
> 
> 标签：delphi, handle

我长期面临这个问题，并没有找到任何可以帮助我解决它的东西。我使用 TBitmap 接收来自相机（流）的数据，然后将图像保存到磁盘。有时会发生异常。经过几次测试我发现了缺陷：TBitmap的Canvas的handle属性值为0。为了绕过这个问题，当我在handle中检测到这个值为0时，重新启动应用程序（销毁并重新创建TBitmap不起作用），但有时这个错误经常发生。有没有人遇到过这样的问题？我可能做错了什么？欢迎任何帮助。谢谢你。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-08T21:04:05.210

TBitmap 在内部为 TBitmap.Canvas 使用 TBitmapCanvas 包装对象。如果您有权访问源 (Graphics.pas)，您应该看看。发生错误时，一个或多个 WinAPI GDI 调用可能不处理返回值。一些 GDI 调用失败的可能性很小，因此省略检查每个返回的值以获得一些性能有点像赌博，但在高负载的情况下，这些可能是出现问题的第一个指标反正。

我建议您尝试使用调试 DCU 使用 TBitmap.Canvas 逐步执行您的程序，列出用于使事情正常工作的 GDI 调用，然后对这些操作进行编码，检查返回的值并正确处理任何错误。这应该使您能够了解更多当与相机的连接失败时发生的情况，并且可能会减少使用 TBitmap 的一些开销。

# javascript - 图像加载事件未在 Firefox 中触发

> ID：15888487
> 
> 赞同：3
> 
> 时间：2013-04-08T20:35:44.617
> 
> 标签：javascript, jquery, firefox

我正在创建一个图像预加载器。它在除 Firefox 之外的所有浏览器中都能正常工作（使用 Firefox 10.0 进行测试）。基本上，输入是一个图像数组，称为`image_list`. 这些图像被动态附加到文档的正文中，并附加了一个调用函数的加载回调`update_progress`。代码如下：

```
$(image_list).each(function() {
      var x = $('<img />')
       .load(function() {update_progress(percent_loaded += step);})
       .attr('src', this)
       .appendTo('body')
       .css('display', 'none');
       .each(function() {
          if(this.complete)
             update_progress(percent_loaded += step);
      });
}); 
```

在 Firefox 中，加载回调`update_progress`永远不会被调用。然而，完全相同的代码在我测试过的 chrome 和所有其他浏览器中运行良好。有什么方法可以检测图像何时在 Firefox 中加载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-23T05:55:41.977

我会首先通过检查其高度属性来检查图像是否具有高度。

```
if (the_image.height > 0) {
  // The image is already loaded (possibly cached)
} 
```

如果您有任何缓存的图像等，这应该可以帮助您解决这个问题。

# c# - ListBox 显示 System.Collection.ArrayList

> ID：15888490
> 
> 赞同：0
> 
> 时间：2013-04-08T20:35:55.873
> 
> 标签：c#, asp.net, arraylist, listbox

我在一个页面上有一个列表框，它将列表框中的项目带到另一个页面上的另一个列表框中，但是当第二个列表框显示“System.Collection.ArrayList”时。

第 1 页：

```
protected void btnCheckout_Click(object sender, EventArgs e)
{

    Session["Name"] = NameText.Text;
    Session["PhoneNumber"] = PhoneTextBox.Text;
    Session["Address"] = AddressText.Text;
    Session["Email"] = emailText.Text;
    Session["City"] = cityTextBox.Text;
    ArrayList al = new ArrayList();
    for (int i = 0; i < ItemListBox.Items.Count; i++)
    {
        if (ItemListBox.Items[i].Selected == true)
        {
            al.Add(ItemListBox.Items[i].Value);
        }
    }
    Session["selectedValues"] = al;
    Response.Redirect("Invoice.aspx");

} 
```

第2页：

```
protected void Page_Load(object sender, EventArgs e)
{
    string phoneNumber = (string)(Session["PhoneNumber"]);
    string homeAddress = (string)(Session["Address"]);
    string name = (string)(Session["Name"]);
    string email = (string)(Session["Email"]);
    string city = (string)(Session["City"]);
    phoneLabel.Text = phoneNumber;
    addressLabel.Text = homeAddress;
    nameLabel.Text = name;
    emailLabel.Text = email;
    cityLabel.Text = city;
    invoiceListBox.Items.Add(Session["selectedValues"].ToString());
} 
```

所有其他标签会话都可以工作，只有列表框不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T20:37:06.093

那是因为您将集合的 toString() 结果（字符串）添加为单个项目。

试试`.AddRange`吧

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T21:02:39.600

由于所有对象都存储在`Session`type`object`中，因此您需要将它们转换回它们的原始类型，然后才能访问它们的属性。这应该让您了解如何完成。这里的关键是`ArrayList al = Session["selectedValues"] as ArrayList;`

```
ArrayList al = Session["selectedValues"] as ArrayList;

if(al != null)
{
    foreach(var item in al)
    {
        invoiceListBox.Items.Add(new ListItem {Value = item.toString(), Text = item.toString()});
    }
} 
```

**添加** 了这是一个工作示例。

**默认.aspx**

```
Phone Number: <asp:TextBox ID="txtPhoneNumber" runat="server" />
    <br />
    <asp:ListBox ID="ItemListBox" runat="server" SelectionMode="Multiple">
        <asp:ListItem Value="1">One</asp:ListItem>
        <asp:ListItem Value="2">Two</asp:ListItem>
        <asp:ListItem Value="3">Three</asp:ListItem>
        <asp:ListItem Value="4">Four</asp:ListItem>
    </asp:ListBox>
    <br />
    <asp:Button ID="btnSave" runat="server" Text="Save" OnClick="btnSave_Click" />
    <br />
    <br />
    <a href="page2.aspx">Page 2</a> 
```

**默认.aspx.cs**

```
namespace SO15888490
{
    public partial class _Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void btnSave_Click(object sender, EventArgs e)
        {
            Session["PhoneNumber"] = txtPhoneNumber.Text;

            ArrayList al = new ArrayList();

            for (int i = 0; i < ItemListBox.Items.Count; i++)
            {
                if (ItemListBox.Items[i].Selected == true)
                {
                    al.Add(ItemListBox.Items[i].Value);
                }
            }

            Session["ItemsList"] = al;
        }

    } 
```

**page2.aspx**

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        Phone Number: <asp:Literal ID="litPhoneNumber" runat="server" />
        <br />
        Selected Items<br />
        <asp:Literal ID="litItemsList" runat="server" />
        <br />
        <a href="Default.aspx">Back to default.aspx</a>
    </div>
    </form>
</body>
</html>
} 
```

**page2.aspx.cs**

```
namespace SO15888490 {
    public partial class page2 : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            litPhoneNumber.Text = (string)Session["PhoneNumber"];

            ArrayList al = Session["ItemsList"] as ArrayList;
            if (al != null)
            {
                foreach (var item in al)
                {
                    litItemsList.Text += item.ToString() + "<br/>";
                }
            }
        }
    } } 
```

# ruby-on-rails - 如何用绝对路径 URL 替换相对路径 URL

> ID：15888491
> 
> 赞同：3
> 
> 时间：2013-04-08T20:36:05.867
> 
> 标签：ruby-on-rails, ruby

我将 HTML 内容存储在数据库中，我希望将所有相对资产引用转换为使用绝对路径。例如，我所有的图像标签看起来都是这样的：

```
<img src=\"/system/images/146/original/03.png?1362691463\"> 
```

我正在尝试预先`"http://example.com"`设置`"/system/images/"`路径。我有以下代码，我希望能处理它，但遗憾的是它似乎并没有导致任何变化：

```
text = "<img src=\"/system/images/146/original/03.png?1362691463\">"
text.gsub(%r{<img src=\\('|")\/system\/images\/}, "<img src=\"http://virtualrobotgames.com/system/images/") 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-09T19:22:37.010

不要使用普通的字符串操作来操作 URL 字符串，而是使用为这项工作制作的工具。Ruby 包含[URI](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/uri/rdoc/URI.html)类，还有更全面的[Addressable](https://github.com/sporkmonger/addressable) gem。

如果我有一些带有我想要重写的链接的 HTML，我会这样做：

首先，解析文档：

```
require 'nokogiri'
require 'uri'

SOURCE_SITE = URI.parse("http://virtualrobotgames.com")

html = '
<html>
<head></head>
<body>
  <img src="/system/images/146/original/03.png?1362691463">
  <script src="/scripts/foo.js"></script>
  <a href="/foo/bar.html">foo</a>
</body>
</html>
'
doc = Nokogiri::HTML(html) 
```

然后，您就可以浏览文档并修改诸如`<a>`,`<img>`之类的标签`<script>`以及您想要的任何其他标签：

```
# find things using 'src' and 'href' parameters
tags = {
  'img'    => 'src',
  'script' => 'src',
  'a'      => 'href'
}
doc.search(tags.keys.join(',')).each do |node|

  url_param = tags[node.name]

  src = node[url_param]
  unless (src.empty?)
    uri = URI.parse(src)
    unless uri.host
      uri.scheme = SOURCE_SITE.scheme
      uri.host = SOURCE_SITE.host
      node[url_param] = uri.to_s
    end
  end
end

puts doc.to_html 
```

运行后，输出：

```
# >> <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
# >> <html>
# >> <head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head>
# >> <body>
# >>   <img src="http://virtualrobotgames.com/system/images/146/original/03.png?1362691463">
# >>   <script src="http://virtualrobotgames.com/scripts/foo.js"></script>
# >>   <a href="http://virtualrobotgames.com/foo/bar.html">foo</a>
# >> </body>
# >> </html> 
```

这并不意味着是一个完整的、完全有效的示例。这适用于绝对链接，但您必须处理相对链接、具有同级/对等主机名的链接、缺少参数。

您还需要`errors`在解析后检查“doc”的方法，以确保它是有效的 HTML。解析器可以重写/修剪无效 HTML 中的节点以试图理解它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-11T20:13:52.467

你不能只使用'base' HTML 标签来做到这一点吗？假设您直接从 URL 读取 HTML 内容，您可以执行以下操作：

```
response = RestClient.get(<original_url>)
base_url = '<your_base_url>'
html_content = response.body
if html_content.index('<head>')
    html_content = html_content.gsub!('<head>', "<head><base href='#{base_url}'>")
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T20:41:29.110

显然这是我传递的搜索参数的问题，不需要转义序列。

```
%r{<img src=\\('|")\/system\/images\/} 
```

变得简单：

```
%r{<img src="/system/images/} 
```

# android - 禁用自动滑动。图书馆 android-menudrawer

> ID：15888493
> 
> 赞同：2
> 
> 时间：2013-04-08T20:36:15.323
> 
> 标签：android, libraries, slide

我在我的项目中使用这个库：

android-ManuDrawer [https://github.com/SimonVT/android-menudrawer](https://github.com/SimonVT/android-menudrawer)

它工作得很好，问题是我的英语不是很好，而且我找不到一种方法来禁用它每隔 x 秒自动滑动。

我猜这将是一个参数滚动类，但无法正确理解代码。

需要禁用自动滑动

我很感激任何帮助。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-10T17:00:23.763

只是不要调用 mMenuDrawer.peekDrawer()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T20:46:25.320

有什么不良影响？什么时候发生？你能展示你用来处理这个库的代码吗？

编辑：

原因在于这种方法（[https://github.com/SimonVT/android-menudrawer/blob/master/library/src/net/simonvt/menudrawer/MenuDrawer.java](https://github.com/SimonVT/android-menudrawer/blob/master/library/src/net/simonvt/menudrawer/MenuDrawer.java)）第58行：

```
@Override
public void postOnAnimation(Runnable action) {
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN) {
        super.postOnAnimation(action);
    } else {
        postDelayed(action, ANIMATION_DELAY);
    }
} 
```

我想这应该是有原因的。如果效果不理想，您可以避免将其称为注释第 745 行，但应该有它存在的原因以及为什么没有为用户提供摆脱它的选项的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-03T13:32:06.967

```
mMenuDrawer.setTouchMode(MenuDrawer.TOUCH_MODE_NONE); 
```

# jsf-2 - 在 Controller bean 中引用 managedBean

> ID：15888494
> 
> 赞同：0
> 
> 时间：2013-04-08T20:36:17.513
> 
> 标签：jsf-2, managed-bean

我想在 Controller bean 中传递我的 Managedbean 的引用作为参数。我的域实体是品牌。我想从 JSF 页面组件中设置品牌属性。我想在控制器方法和这个控制器 addBrand 方法 getBrandService 中传递 managedBean 引用并保存各自的品牌 Bean。请指导我。谢谢 :) 这是我的托管 bean 代码：

```
@ManagedBean
@RequestScoped
public class BrandBean implements Serializable{
    private static final long serialVersionUID = 1L;
    private String brandName;
    private String brandDecription;
//getters and setters
} 
```

这是我的品牌控制器 bean：// addBrand 方法将品牌实例作为参数。品牌是模型对象。

```
@ManagedBean
@RequestScoped
public class BrandController extends AbstractController{
    private IBrandService brandService;

    public IBrandService getBrandService() {
        brandService = new BrandService();
        return brandService;
    }

    public void setBrandService(IBrandService brandService) {
        this.brandService = brandService;
    }

    @Override
    protected ModelAndView handleRequestInternal(HttpServletRequest request,
            HttpServletResponse response) throws Exception {
        return null;
    }
    public void addBrand(String brandName, String brandDecription){
        try{
            Brand brand = new Brand();
            brand.setBrandName(brandName);
            brand.setBrandDecription(brandDecription);
            getBrandService().addBrand(brand);
        }
        catch(Exception ex){
            ex.printStackTrace();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T19:06:27.060

```
@ManagedBean
@RequestScoped
@SuppressWarnings("serial")
public class BrandBean implements Serializable {
    private int brandId;
    private String brandName;
    private String brandDescription;
    private List<Brand> brands;
    private List<Brand> filter;

    public List<Brand> getFilter() {
        return filter;
    }
    public void setFilter(List<Brand> filter) {
        this.filter = filter;
    }
    public List<Brand> getBrands() {
        return brands;
    }
    public void setBrands(List<Brand> brands) {
        this.brands = brands;
    }
    public int getBrandId() {
        return brandId;
    }
    public void setBrandId(int brandId) {
        this.brandId = brandId;
    }
    public String getBrandName() {
        return brandName;
    }
    public void setBrandName(String brandName) {
        this.brandName = brandName;
    }
    public String getBrandDescription() {
        return brandDescription;
    }
    public void setBrandDescription(String brandDescription) {
        this.brandDescription = brandDescription;
    }

}

@ManagedBean
@RequestScoped
public class BrandController {
    private BrandBean bean;
    @ManagedProperty(value = "#{BrandService}")
    private BrandService brandService;
public BrandController() {
        bean = new BrandBean();

    }
    } 
```

# latex - 小文章、信件、简历的最佳标记语言

> ID：15888496
> 
> 赞同：1
> 
> 时间：2013-04-08T20:36:18.560
> 
> 标签：latex, markup, asciidoc

我想对标记语言的正确选择提出建议。我需要写一些简短的技术文章、商业信函和简历。所需的输出是：

*   PDF格式
*   HTML
*   RTF/DOCX

以下是其他要求：

*   块的右对齐
*   符号的使用（用于电子邮件、移动地址）
*   无边框表格
*   页码和页脚

下面是一个字母的例子。你会用什么语言制作它？我不使用 WORD/OPENOFFICE，因为我想从 MySQL 数据库中的数据开始生成文档。目前我正在使用具有moderncv 风格的Latex，但我认为latex2word 之类的工具不足以制作RTF/DOCX 输出。

```
-------------------------------------------------- -------------------------------------------------- -------------------------------------------------- --

                                                                                                                                  马克热罗尼莫，
                                                                                                                          54坎贝尔游行，
                                                                                                                                     邦迪海滩，
                                                                                                                                     悉尼 2022
                                                                                                                                  新南威尔士州-澳大利亚
                                                                                                                       手机：+61-0421-233732
                                                                                                      电子邮件：mark.jeronimo@gmail.com

                                                                                                                                      2013 年 4 月 8 日

亲爱的先生或女士，

                                                        回复：关于 IT 业务的提案

关于您的电子邮件，我想表达我有兴趣与您会面以提出 IT 建议
商业
呜呜呜
呜呜呜

您忠诚的，

马克热罗尼莫

-------------------------------------------------- -------------------------------------------------- -------------------------------------------------- --

```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T20:38:28.547

考虑使用[pandoc](http://johnmacfarlane.net/pandoc/)。它支持许多输入和输出格式，包括您指定的格式。对于标记，其中一种选择是带有 pandoc 扩展的 Markdown。您要求的功能都是可能的。您可以使用 HTML、LaTeX 等中的自定义模板来对表格和页码等内容进行样式化。

# javascript - 即使 draggable=true，传单标记也不能拖动

> ID：15888505
> 
> 赞同：10
> 
> 时间：2013-04-08T20:36:50.403
> 
> 标签：javascript, drag-and-drop, leaflet

我正在使用带有[标记](http://leafletjs.com/reference.html#marker)的传单地图。

当用户在我的页面上单击“编辑”时，我想让标记可拖动。如果我将`draggable`每个标记的属性设置为 true，它就不起作用。

当我创建一个新标记并从头开始设置属性时，它可以工作。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-09T14:35:04.797

你必须这样做：

```
marker.dragging.disable(); // marker.dragging.enable(); 
```

我的第一次尝试只改变了技术属性，而不是[行为](http://leafletjs.com/reference.html#marker-dragging)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-21T23:00:45.273

受@mc0e 有关“未定义”的问题的启发。这是一个例子。

（基于[Leafletjs.com](http://leafletjs.com/index.html "传单索引")和[Leafletjs quick start](http://leafletjs.com/examples/quick-start/ "传单快速入门")的代码）

1.  打开**[维基媒体地图](https://maps.wikimedia.org "维基媒体地图")**（基于相关框架）。
2.  打开浏览器控制台（`Ctrl`+`j`或`Ctrl`+ `k`）放置一个标记（您需要先定义一个变量）。使用代码 1。

**控制台中的代码 1：**

```
var markerLondon = L.marker()
    .setLatLng([51.5, -0.09])
    .bindPopup('Centre of London')
    .addTo(map)
    .openPopup(); 
```

3.  现在你有一个不可拖动的标记。使用 Code-2 使标记可拖动。

**控制台中的代码 2：**

```
markerLondon.dragging.enable(); 
```

* * *

进一步阅读：**[标记 API 参考](http://leafletjs.com/reference.html#marker "传单 API 参考：标记")**。

PS：一旦 Wikimedia 开始使用其他东西，您可以使用为制作静态 OpenStreetMap 图像而创建的[BigMap 2](http://bigmap.osmz.ru/ "大地图2")（也基于相同的框架）对其进行测试。

# java - 临时字符串布尔值？

> ID：15888506
> 
> 赞同：0
> 
> 时间：2013-04-08T20:36:51.487
> 
> 标签：java

我正在尝试为我正在创建的项目创建一种设置系统，但是我遇到了一些问题。我正在尝试使用字符串（考虑到这些设置以后必须保存到文本文件中）作为临时布尔值。所以，我需要能够在真假之间切换这个字符串。我认为以下方法会起作用，但由于某种原因，无论如何它总是设置为 true。据我所知，这是代码中唯一设置变量的地方。

我不知道为什么下面的代码不应该工作，我已经彻底搜索无济于事。

```
if("true".equals(settings[0])) 
   settings[0] = "false";             //This is *always* skipped
else if("false".equals(settings[0])) 
   settings[0] = "true";` 
```

因此，我来​​到了这里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:49:24.353

将字符串转换为布尔值和逆结果。样本

```
String[] settings = {"tRue"};
boolean settingBool = !Boolean.parseBoolean(settings[0]);
System.out.println(settingBool); 
```

输出：

```
false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T20:58:58.397

更好的方法是首先使用布尔值，并且仅在需要时将它们转换为字符串并返回。

正如 JB Nizet 在他的评论中所写，这将使代码更具可读性和健壮性。在您的情况下，这意味着保留布尔值而不是字符串：

```
public static Boolean[] settings = new Boolean[] { Boolean.FALSE, Boolean.TRUE,
                                                  Boolean.TRUE, BOOLEAN.FALSE }; 
```

要切换布尔值，请使用

```
settings[0] = !settings[0]; 
```

要转换为字符串以保存设置，请使用`Boolean#toString`, 从设置中读取`Boolean#valueOf(String)`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T21:00:12.157

总结评论：

> 您是否检查了 settings[0] 实际包含的内容？
> 
> 是的，默认情况下它等于“假”。
> 
> 设置 [0] 是否在其他任何地方更改？
> 
> 不

如果 settings[0] 为假，那么你**应该**期望你的 if 语句的第一个分支总是被跳过。

# azure - MemcacheShimEmulator 错误

> ID：15888511
> 
> 赞同：1
> 
> 时间：2013-04-08T20:37:06.213
> 
> 标签：azure, memcached, azure-diagnostics

我有一个正在开发中的解决方案，它托管在 Azure 上并且运行良好，但现在我想添加 memcache 以确保可伸缩性。我添加了 Windows Azure Caching 1.8.1.0，然后通过 Nuget 添加了 Windows Azure Caching Memcache Shim 1.8.0.0。我有 memcache_default 的端点，内部端口为 11212（以避免端口冲突，因为 11211 正在使用中），并且我在我的 Web 角色中启用了缓存。

当我运行我的应用程序时，网络角色会循环，并且在每个循环中重复的事件日志中都会出现许多错误......

第一的....

```
Log Name:      Application
Source:        .NET Runtime
Date:          08/04/2013 21:11:56
Event ID:      1026
Task Category: None
Level:         Error
Keywords:      Classic
User:          N/A
Computer:      DRAKE
Description:
Application: MemcacheShimInstaller.exe
Framework Version: v4.0.30319
Description: The process was terminated due to an unhandled exception.
Exception Info: System.TypeInitializationException
Stack:
   at Microsoft.ApplicationServer.Caching.MemcacheShimInstaller.MemcacheShimInstaller.Main(System.String[]) 
```

第二....

```
Faulting application name: MemcacheShimInstaller.exe, version: 1.0.4797.0, time stamp: 0x506f41f4
Faulting module name: KERNELBASE.dll, version: 6.1.7601.18015, time stamp: 0x50b8479b
Exception code: 0xe0434352
Fault offset: 0x0000000000009e5d
Faulting process id: 0x1f40
Faulting application start time: 0x01ce349550d2f050
Faulting application path: C:\DevProjects\MyWebRole\csx\Debug\roles\MyWebRole\approot\bin\WindowsAzure.Caching.MemcacheShim\MemcacheShimInstaller.exe
Faulting module path: C:\Windows\system32\KERNELBASE.dll
Report Id: 90968bce-a088-11e2-9abd-00266c50c008 
```

第三....

```
Application: MemcacheShimEmulator.exe
Framework Version: v4.0.30319
Description: The process was terminated due to an unhandled exception.
Exception Info: System.Reflection.TargetInvocationException
Stack:
   at Microsoft.ApplicationServer.Caching.MemcacheShimEmulator.MemcacheShimEmulator.Main(System.String[]) 
```

最后...

```
Faulting application name: MemcacheShimEmulator.exe, version: 1.0.4797.0, time stamp: 0x506f41f6
Faulting module name: KERNELBASE.dll, version: 6.1.7601.18015, time stamp: 0x50b8479b
Exception code: 0xe0434352
Fault offset: 0x0000000000009e5d
Faulting process id: 0x7ac
Faulting application start time: 0x01ce349551b479fd
Faulting application path: C:\DevProjects\MyWebRole\csx\Debug\roles\MyWebRole\bin\WindowsAzure.Caching.MemcacheShim\MemcacheShimEmulator.exe
Faulting module path: C:\Windows\system32\KERNELBASE.dll
Report Id: 910f8e24-a088-11e2-9abd-00266c50c008 
```

我正在尝试查找更多日志记录信息，但我不知道在哪里查找。如果我创建一个全新的云服务解决方案并尽可能配置它，我可以成功运行，那么我如何才能找到这个问题的原因？

# objective-c - NSMenu 更新标题

> ID：15888514
> 
> 赞同：1
> 
> 时间：2013-04-08T20:37:17.173
> 
> 标签：objective-c, nsmenuitem, nsmenu

我创建了一个动态创建的 NSMenu 并列出了连接到计算机的 HDD。其中每一个都是一个子菜单，其中包含一个 NSMenuItem，它是用标题“正在计算大小...”创建的。在另一个线程上，我正在枚举一些特定的文件夹以返回一个将替换此标题的字符串。

我已经正确设置了这一切，但是如果我在枚举完成时选择了其中一个子菜单，它不会反映标题的变化，直到我突出显示该项目或选择不同的子菜单并返回。

实现此更新的正确方法是什么？

# sql-server - 使用 SQL Server 创建区分大小写的数据库

> ID：15888518
> 
> 赞同：3
> 
> 时间：2013-04-08T20:37:24.957
> 
> 标签：sql-server

默认情况下，使用 SQL Server 创建的数据库不区分大小写。如果我添加 2 个名称相同但大小写不同的键，则第二次插入将被拒绝。

如何更改此行为并使数据库区分大小写？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-08T20:40:52.847

您需要将数据库排序规则更改为 Latin1_General_CS_AS

以下是使用 T-Sql 的方法：

```
ALTER DATABASE yourdatabase
   COLLATE Latin1_General_CS_AS 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T20:42:14.240

区分大小写取决于数据的整理。

默认情况下，使用 SQL Server 创建的数据库继承服务器排序规则。默认情况下，在数据库中创建的表中的列继承数据库排序规则。在这些选项之间，有很多机会为您的数据选择区分大小写的排序规则，可以在创建数据库时选择一种，也可以在设计表时选择一种。

阅读[使用 SQL Server 排序规则](http://msdn.microsoft.com/en-us/library/ms144260%28v=sql.105%29.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T20:42:00.850

您需要更改数据库的排序规则。但是，请在继续之前深入阅读其中固有的所有问题。

# c# - 如何在没有隔离存储文件的情况下将 silverlight 与 sqlite 连接

> ID：15888522
> 
> 赞同：1
> 
> 时间：2013-04-08T20:37:30.557
> 
> 标签：c#, database, silverlight, sqlite, local-storage

```
IsolatedStorageFile isf = IsolatedStorageFile.GetUserStoreForApplication();

isf.DeleteFile("mydb.db");

using (SqliteConnection conn = new SqliteConnection())
{
    conn.ConnectionString = "Version=3,uri=file:mydb.db";
    conn.Open();

    using (SqliteCommand cmd = conn.CreateCommand())
    {

        cmd.CommandText = "CREATE TABLE test_table ( [id] INTEGER PRIMARY KEY, [col] INTEGER UNIQUE, [col2] INTEGER, [col3] REAL, [col4] TEXT, [col5] BLOB)";
        cmd.ExecuteNonQuery();

        cmd.Transaction = conn.BeginTransaction();
        cmd.CommandText = "INSERT INTO test_table(col, col2, col3, col4, col5) VALUES(@col, @col2, @col3, @col4, @col5);SELECT last_insert_rowid();";
        cmd.Parameters.Add("@col", null);
        cmd.Parameters.Add("@col2", null);
        cmd.Parameters.Add("@col3", null);
        cmd.Parameters.Add("@col4", null);
        cmd.Parameters.Add("@col5", null);

        DateTime start = DateTime.Now;
        this.lstResult.Items.Add("Inserting 100 Rows with transaction");

        for (int i = 0; i < 100; i++)
        {
            cmd.Parameters["@col"].Value = i;
            cmd.Parameters["@col2"].Value = i;
            cmd.Parameters["@col3"].Value = i * 0.515;
            cmd.Parameters["@col4"].Value = "hello world" + i;
            cmd.Parameters["@col5"].Value = Encoding.UTF8.GetBytes("test");

            object s = cmd.ExecuteScalar();
        }
        cmd.Transaction.Commit();
        cmd.Transaction = null;
        this.lstResult.Items.Add("Time taken :" + DateTime.Now.Subtract(start).TotalMilliseconds + " ms.");

        cmd.CommandText = "SELECT * FROM test_table";
        using (SqliteDataReader reader = cmd.ExecuteReader())
        {
            while (reader.Read())
            {
                var bytes = (byte[])reader.GetValue(5);
                this.lstResult.Items.Add(string.Format("{0},{1},{2},{3},{4}, {5}",
                    reader.GetInt32(0),
                    reader.GetInt32(1),
                    reader.GetInt32(2),
                    reader.GetDouble(3),
                    reader.GetString(4),
                    Encoding.UTF8.GetString(bytes, 0, bytes.Length)));
            }
        }

        conn.Close();
    }
} 
```

此代码运行良好，但无论如何都可以连接到我`D:`驱动器上的数据库

```
conn.ConnectionString = @"Version=3,uri=file:d:\mydb.db"; 
```

或任何其他方式连接到任何类型的数据库而不使用`IsolatedStorageFile`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:42:41.370

数据库在服务器上还是用户电脑上？

如果它在服务器上，您将需要创建一个访问数据库的 WCF 服务，然后让 Silverlight 与 WCF 服务交互。

如果它在用户计算机上，则无法直接访问本地文件系统。您将需要向用户展示一个`OpenFileDialog`. 用户将选择文件，该文件将`FileStream`作为`OpenFileDialog`.

如果这是一个 Silverlight OOB 应用程序，情况会发生一些变化。您可以更多地访问用户的系统，但我对 Silverlight OOB 不够熟悉，无法提出任何建议。

# c - UDP 服务器套接字 IP 分配

> ID：15888525
> 
> 赞同：3
> 
> 时间：2013-04-08T20:37:34.440
> 
> 标签：c, linux, sockets, posix

我运行下面的服务器代码来打开一个 UDP 套接字。我的 linux 机器上有两个网络接口，两个接口连接到两个不同的网络。我希望程序监听指定的网络（通过分配 IP 地址），因此我在 UDP 套接字上分配了一个 IP 地址。

如果我使用`servaddr.sin_addr.s_addr = htonl(INADDR_ANY);`服务器能够接收广播和单播消息。但是，如果我定义了，`servaddr.sin_addr.s_addr =inet_addr("10.0.0.6");`那么服务器可以接收源自的消息`10.0.0.6`但不能接收广播`10.0.0.255`消息（网络掩码是**/24**）。 [这里](http://pastebin.com/9GYbaKRf)是广播消息的代码，单播代码在[这里](http://pastebin.com/wHgLFAyJ)。

是我分配的 IP 地址错误还是广播代码错误？

服务器代码是：

```
#define BUFSIZE 512
char *SERVER_IP = "10.0.0.6";

int main() {
    int error_count=0, r=0, n=0;
    int sockfd = 0;
    struct sockaddr_in servaddr, cliaddr ,a ;
    socklen_t len; //integer type of width of at least 32 bits
    char mesg[1000];

    sockfd = socket(AF_INET, SOCK_DGRAM, 0); // for datagram
    while(sockfd < 0){ //error handling for socket opening
        usleep(500000);
        if (++error_count == 20){//10 times itteration
             fprintf(stderr, "errno:%s - socket opening error - line 223\n ", strerror(errno));
            exit(1);
        }
         sockfd = socket(AF_INET, SOCK_DGRAM, 0);
    }
error_count = 0;

    memset(&servaddr, 0, sizeof(servaddr));
    servaddr.sin_family = AF_INET;
    servaddr.sin_port = htons(33333); //server listens on this port

   // servaddr.sin_addr.s_addr = htonl(INADDR_ANY);
     servaddr.sin_addr.s_addr =inet_addr(SERVER_IP);
    printf("servaddr.sin_addr:%lu\n",servaddr.sin_addr );
    printf("a.sin_addr:%lu\n",a.sin_addr );

    r = bind(sockfd,(struct sockaddr *) &servaddr, sizeof(servaddr));
    while(r < 0){ //error handling for socket binding
        usleep(500000);
        if (++error_count == 20){//10 times itteration
             fprintf(stderr, "errno:%s - socket binding error - line 239\n ", strerror(errno));
            exit(1);
        }
          r = bind(sockfd,(struct sockaddr *) &servaddr, sizeof(servaddr));
    }
error_count = 0;

    while(1){
       len = sizeof(cliaddr);
    next:
printf("server is listening\n");
       n = recvfrom(sockfd, mesg, 1000, 0, (struct sockaddr *) &cliaddr, &len);
printf("line195: packet is received: %s\n", mesg);
       if(n < 0){
           fprintf(stderr, "recvfrom error occured - line254\n");
           n = 0;
           goto next;
       }
}
  return 0;
} 
```

这是我的`ifconfig -a wlan8`

```
wlan8     Link encap:Ethernet  HWaddr 64:70:02:18:1f:b6  
          inet addr:10.0.0.6  Bcast:10.0.0.255  Mask:255.255.255.0
          inet6 addr: fe80::6670:2ff:fe18:1fb6/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:206 errors:0 dropped:0 overruns:0 frame:0
          TX packets:297 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:37857 (37.8 KB)  TX bytes:54526 (54.5 KB) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T11:46:22.770

您**可以**根据需要让服务器正常工作，`INADDR_ANY`并正确调用[`setsockopt`](http://linux.die.net/man/3/setsockopt).

它应该是这样的，就在套接字创建之后：

```
memset(&ifr, 0, sizeof(ifr));
snprintf(ifr.ifr_name, sizeof(ifr.ifr_name), "wlan8");
if (setsockopt(sockfd, SOL_SOCKET, SO_BINDTODEVICE,
            (void *)&ifr, sizeof(ifr)) < 0) {
     fprintf(stderr, "error at setsockopt, ensure it is running as root.\n");
     exit(1);
} 
```

显然，您还必须在开头`#include <net/if.h>`定义 .`struct ifreq ifr;``main`

这样，您的服务器将接收针对任何`wlan8`接口地址（广播和单播）的每个数据报，但它将忽略其他接口。

`SO_BINDTODEVICE`已经为 DHCP 客户端和服务器引入 linux，但需要 root 权限。您可以[`sudo`](http://linux.die.net/man/8/sudo)从 root 使用或执行以下命令来设置 SUID（因此您可以通过组关联控制程序执行）

```
chmod 4750 server_name 
```

显然，您应该小心使用此类程序，否则您将在系统中打开安全漏洞。

最后我建议你阅读

*   [应用程序设计人员的单播 UDP 使用指南](https://www.rfc-editor.org/rfc/rfc5405)
*   [Warren Gay 的 Linux Socket Programming by Example 第 13 章](http://alas.matf.bg.ac.rs/manuals/lspe/cnode=111.html)（一个古老但仍然很有价值的资源）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T21:28:16.287

你没有做错什么。除非套接字绑定到广播地址或 INADDR_ANY，否则 Linux 不会接收广播数据报。您需要将一个套接字绑定到单播地址，将另一个套接字绑定到广播地址，或者如果绑定到 INADDR_ANY，则可以使用 IP_PKTINFO 查找目标地址。[Get destination address of a received UDP packet](https://stackoverflow.com/questions/5281409/get-destination-address-of-a-received-udp-packet)有一些示例代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T20:40:27.887

如果您希望它只收听接口`wlan8`，请尝试收听整个网络 -`10.0.0.0`在这种情况下。如果您绑定到接口的 IP，它可能只会接收以它为目标的消息。

# mysql - MySQL连接表并计算where子句中的行数

> ID：15888528
> 
> 赞同：0
> 
> 时间：2013-04-08T20:37:49.533
> 
> 标签：mysql, sql

我知道下面的 SQL 语句是完全错误的，但我希望它给出了一个我想做的例子。我有一个用户表、一个付款（用户付款不是订单付款）表和一个订单表。我想随机选择 10 个已经向我们支付了 6 次或更多付款但还没有下过任何订单的用户。

在支付表中，对于每个用户进行的每次付款，都有多行。在订单表中它是相同的，但它包含已完成和未完成的订单，我正在寻找没有任何已完成订单的用户，因此`o.order_status`必须是`0`订单表中的所有订单。

我希望这是有道理的，如果您需要更多信息，请告诉我，我会更新帖子。感谢帮助。

```
SELECT u.*, COUNT(p.id) as payment_count, COUNT(o.id) as order_count
                    FROM users as u
                    INNER JOIN payments as p
                    ON u.id = p.user_id
                    INNER JOIN orders as o
                    ON u.id = o.user_id
                    WHERE o.order_status = 0
                    AND COUNT(p.id) > 6
                    AND COUNT(o.id) = 0
                    ORDER BY RAND()
                    LIMIT 10 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:40:36.463

如果不深入研究您的代码，按 COUNT 或任何聚合函数的结果进行过滤，您需要使用 HAVING 子句。

看起来您也缺少 GROUP BY 子句。作为第一步，我会阅读 HAVING 和 GROUP BY。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T21:20:39.810

您实际上与您的查询非常接近。正如其他人所提到的，使用`GROUP BY`and`HAVING`并且你是那里的大部分。此外，外连接到*订单*并在连接中包含“order_status = 0”检查，以帮助完成“无状态为零的订单”要求。结果：

```
SELECT 
    u.id, 
    COUNT(p.id) as payment_count, 
    COUNT(o.id) as order_count
FROM users as u
    INNER JOIN payments as p
        ON u.id = p.user_id
    LEFT OUTER JOIN orders as o
        ON u.id = o.user_id
            AND o.order_status = 0
GROUP BY u.id
HAVING COUNT(p.id) >= 6
    AND COUNT(o.id) = 0
ORDER BY RAND()
LIMIT 10 
```

*如果要将用户*表中的其他列`GROUP BY`包含在`SELECT`. 此外，这可能只是一个疏忽，但您也需要`>= 6`(not `> 6`) 条款的第一部分`HAVING`。

# websocket - Jetty 9 中的 OnWebSocketClose 何时触发

> ID：15888533
> 
> 赞同：1
> 
> 时间：2013-04-08T20:38:07.097
> 
> 标签：websocket, jetty, embedded-jetty

我有一个简单的嵌入式 Jetty 9 websocket 服务器。我在带注释的 websocket 实现中有这样的方法：

```
@OnWebSocketClose
void onClose(int statusCode, String reason) {
    logger.info "Closed connection [${this}]"
    connectionManager.remove(this)
    Event closeEvent = commsEventFactory.buildCloseEvent(this, statusCode, reason)
    eventReceiver.postEvent(closeEvent)
} 
```

我有一个使用 async-http-client 连接到服务器的 spock 测试。我获得了成功的连接，并且可以来回发送消息。

但是，永远不会调用 onClose()（当我调用 async-http-client 的 websocket.close() 或 client.close() 时，甚至当测试 JVM 死机时）。

当套接字的远端消失时，我预计 onClose 会立即触发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:26:48.063

onClose() 将触发以指示本地端 websocket 已将状态更改为关闭。

它可能源于：

*   远程端点已收到正确的 websocket 关闭握手（也称为干净关闭）
*   任何将尝试发出干净关闭（状态代码 1002）的协议违规（在解析或生成中）。注意：由于这种情况的性质，此关闭可能不是干净的关闭握手。
*   连接超时，导致异常（非干净）关闭。（状态代码 1006）
*   套接字上的任何读取 I/O 异常，导致异常（非干净）关闭。（状态代码 1006）
*   套接字上的任何写入 I/O 异常，导致异常（非干净）关闭。（状态代码 1006）

# java - Java GUI 将 JList 添加到另一个文件中的类

> ID：15888536
> 
> 赞同：1
> 
> 时间：2013-04-08T20:38:17.083
> 
> 标签：java, swing, user-interface, arraylist, jlist

我正在尝试调用一个类中的 JList 并将其添加到另一个类中但无济于事，因为它告诉我有关静态和非静态函数的信息

我在一个类中有一个名为 finalList 的 ArrayList，其中填充了值，并且已经通过打印列表进行了检查。

然后我在另一个名为cupboard 的文件中有另一个类，我想将项目放入那里的JList 中。

```
 finalList.add(si); 
```

是添加项目的位置，其中 si 是数组项目，finalList 是新数组，然后在我的橱柜类文件中，目前我有

```
 public Cupboard() 
{
    cupboardContent = new JList(ShoppingList.finalList.toArray());
} 
```

cupboardContent 是我想要物品去的新 JList。

谢谢，如果有人有任何想法。我敢肯定这很简单，我只是很愚蠢！似乎在将普通流程与 GUI 结合起来时，由于我对使用 GUI 很陌生，我正在努力建立联系！

//编辑

没错，第一段代码就是将项目添加到数组中，但我需要弄清楚如何在新类中调用它。目前，这就是我所拥有的

```
 public class KitchenCupboard extends JPanel //implements ActionListener
    {
private JList cupboardContent;
private JButton usedItem;

ShoppingList items = new ShoppingList();

public KitchenCupboard() 
{
    System.out.println(ShoppingList.finalList);

    cupboardContent = new JList(items.finalList.toArray());
    cupboardContent.setVisibleRowCount(10);
    cupboardContent.setFixedCellHeight(30);
    cupboardContent.setFixedCellWidth(200);
    cupboardContent.setFont(new Font ("sansserif", Font.BOLD, 13));
    cupboardContent.setSelectionMode(ListSelectionModel.MULTIPLE_INTERVAL_SELECTION);
    add(new JScrollPane(cupboardContent));
} 
```

}

ShoppingList 中的数组是

```
 static ArrayList<ShoppingItem> finalList = new ArrayList<ShoppingItem>(); 
```

它使用两个类/文件：ShoppingList.java 和 KitchenCupboard.java

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T21:31:57.870

因为 finalList 是 ShoppingList 的成员，所以您可以做两件事之一。任何一个：

将 finalList 声明为`static`ShoppingList 的成员，从而允许您完全按照上面的方式访问它：

```
cupboardContent = new JList(ShoppingList.finalList.toArray()); 
```

或将对 ShoppingList 对象的引用传递给`Cupboard`允许您通过该引用访问 finalList 的构造函数：

```
public Cupboard(ShoppingList list) 
{
    cupboardContent = new JList(list.finalList.toArray());
} 
```

然后创建一个新的橱柜：

```
Cupboard c = new Cupboard(<some ShoppingList instance>); 
```

我还可以建议您将生成的 Array 转换为您需要的类型，因为 Java 7 引入了新的基于泛型的 swing 组件，因此包含任何内容的 Array`finalList`可能更有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T22:24:43.677

我不确定您是否对此感到满意，但我可以建议您使用[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)吗？Java 内置了[Observer](http://docs.oracle.com/javase/7/docs/api/java/util/Observer.html)和[Observable](http://docs.oracle.com/javase/7/docs/api/java/util/Observable.html)类来帮助您解决这些问题。

我已经制作了一个小示例程序，说明如何使用它*来*解决问题，但它远非一个有效的示例。

### 主.java

```
public class Main {

    public static void main(String... args){
        final Controller appController = new Controller();
        final ObjectListModel listModel = new ObjectListModel();
        appController.addObserver(listModel);

        //Event is fired, lists are updated.
        appController.addObject(new Object()); 
    }
} 
```

### 控制器.java

```
import java.util.ArrayList;
import java.util.List;
import java.util.Observable;

public class Controller extends Observable {

    private final List<Object> objectList = new ArrayList<>();

    public void addObject(Object obj) {
        objectList.add(obj);
        this.setChanged();
        this.notifyObservers(obj);
    }
} 
```

### 对象列表模型.java

```
import java.util.ArrayList;
import java.util.List;
import java.util.Observable;
import java.util.Observer;
import javax.swing.AbstractListModel;

public class ObjectListModel extends AbstractListModel implements Observer{

    private List<Object> objectList = new ArrayList<>();

    @Override
    public int getSize() {
        return objectList.size();
    }

    @Override
    public Object getElementAt(int index) {
        return objectList.get(index);
    }

    @Override
    public void update(Observable o, Object arg) {
        if(arg instanceof Object){
            objectList.add(arg);
        }
    }

} 
```

简单地说，这一切的工作原理如下：

您有 1 个`Controller`类，所有不同的组件都在其中相互交谈。其余的，在这个例子中，听着`Controller`告诉他们该做什么。

作为`Controller`extends `Observable`，它能够告诉所有注册`Observer`的类一个状态已经改变并且他们需要更新。

在我们的示例中，我们将`ListModel`您的 future设置`JList`为等待由控制器控制的主数据源的更改。当用户添加另一个数据对象时，会触发一个事件，该事件会更新主数据源并告诉列表模型也进行更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T21:23:52.137

检查这个，在这个程序中，我有列表“城市列表”，我在其中添加了我的所有元素，之后我有列表“第二个列表”，IA 在其中移动我的元素，这个程序还反转了，意味着它移动元素，从第二个列表到城市列表。为了更好地理解，请运行此程序...

```
import javax.swing.JList;
import javax.swing.JTextField;
import javax.swing.*;

import java.awt.*;
import java.awt.event.*;

/*
 * Combo BOX pROBLEM
 */

public class ComboBoxProblem extends JFrame 
    {
        // made them static , so I can use them over & over
        static JLabel citiesLabel = new JLabel();

        static JList citiesList = new JList();
        static JScrollPane citiesScrollPane = new JScrollPane();

        static JLabel SecondLabel = new JLabel();
        static JList SecondList = new JList();
        static JScrollPane SecondScrollPane = new JScrollPane();

        // these are button to move the elements
        static JButton AssignButton = new JButton();
        static JButton RemoveButton = new JButton();

        static JList made_list = new JList();

public static void main(String args[]) 
    {
        new ComboBoxProblem().show();
    }

public ComboBoxProblem() 
    {
        // create frame
        setTitle("Flight Planner");
        setResizable(false);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        getContentPane().setLayout(new GridBagLayout());

        GridBagConstraints gridConstraints;
        citiesLabel.setText("Destination City");
        gridConstraints = new GridBagConstraints();
        gridConstraints.gridx = 0;
        gridConstraints.gridy = 1;
        gridConstraints.insets = new Insets(10, 0, 0, 0);

        getContentPane().add(citiesLabel, gridConstraints);
        citiesScrollPane.setPreferredSize(new Dimension(150, 100));
        citiesScrollPane.setViewportView(citiesList);
        gridConstraints = new GridBagConstraints();
        gridConstraints.gridx = 0;
        gridConstraints.gridy = 2;
        gridConstraints.insets = new Insets(10, 10, 10, 10);
        getContentPane().add(citiesScrollPane, gridConstraints);

        final DefaultListModel List1= new DefaultListModel();
        List1.addElement("San Diego");
        List1.addElement("Los Angeles");
        List1.addElement("Orange County");
        List1.addElement("Ontario");
        List1.addElement("Bakersfield");

        citiesList.setModel(List1);

        SecondLabel.setText("Moved");
        gridConstraints = new GridBagConstraints();
        gridConstraints.gridx = 1;
        gridConstraints.gridy = 1;
        gridConstraints.insets = new Insets(10, 0, 0, 0);

        getContentPane().add(SecondLabel, gridConstraints);
        SecondScrollPane.setPreferredSize(new Dimension(150, 100));
        SecondScrollPane.setViewportView(SecondList);
        gridConstraints = new GridBagConstraints();
        gridConstraints.gridx = 1;
        gridConstraints.gridy = 2;
        gridConstraints.insets = new Insets(10, 10, 10, 10);
        getContentPane().add(SecondScrollPane, gridConstraints);

        final DefaultListModel List2 = new DefaultListModel();

        SecondList.setModel(List2);

        AssignButton.setText("Move");
        gridConstraints = new GridBagConstraints();
        gridConstraints.gridx = 0;
        gridConstraints.gridy = 3;
        gridConstraints.insets = new Insets(0, 0, 10, 0);
        getContentPane().add(AssignButton, gridConstraints);
        AssignButton.addActionListener(new ActionListener() 
            {
                public void actionPerformed(ActionEvent e) 
                    {
                        for(int i = 0; i < List1.getSize(); i++)
                            {
                                if(citiesList.isSelectedIndex(i))
                            {
                                List2.addElement(List1.getElementAt(i));
                                List1.removeElementAt(i);
                                i--;
                            }

                    }
            }
            });

        RemoveButton.setText("Reverse");
        gridConstraints = new GridBagConstraints();
        gridConstraints.gridx = 1;
        gridConstraints.gridy = 3;
        gridConstraints.insets = new Insets(0, 0, 10, 0);
        getContentPane().add(RemoveButton, gridConstraints);
        RemoveButton.addActionListener(new ActionListener() 
            {
                public void actionPerformed(ActionEvent e) 
                    {

                        for(int i = 0; i < List2.getSize(); i++)
                            {
                                if(SecondList.isSelectedIndex(i))
                                {
                                    List1.addElement(List2.getElementAt(i));
                                    List2.removeElementAt(i);
                                    i--;
                                }
                            }

                    }
            });

        pack();

      }
 } 
```

# javascript - 交叉过滤器过滤和显示数组属性

> ID：15888540
> 
> 赞同：3
> 
> 时间：2013-04-08T20:38:28.693
> 
> 标签：javascript, crossfilter

我有一个这样的数据对象数组：

```
{
  index: "M1",
  first: "First",
  last: "Last",
  distance: 5,
  specialties: ["Pediatrics", "Internal"],
  languages: ["English", "French"]
} 
```

除了按距离过滤：

```
var cf = crossfilter(physicians);
var byDistance = cf.dimension(function (d) {
    return d.distance;
}); 
```

我想按专业过滤。我看过[这个问题](https://stackoverflow.com/questions/12044935/crossfilter-query)，但这只是给了我一个结构，其中包含整个数据集的每个专​​业的计数。

理想情况下，我想根据距离过滤器显示匹配的专业，并使用专业来进一步过滤结果。

考虑到我的对象的结构，这可能吗？是否有一些更简单的方法来表示更适合过滤的数据？

谢谢。在这里小提琴：http: [//jsfiddle.net/colin_young/xRQjX/35/](http://jsfiddle.net/colin_young/xRQjX/35/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T04:12:21.803

crossfilter-1.2.0 中添加了[对自定义过滤器功能的支持。](https://github.com/square/crossfilter/pull/64)您现在应该能够：

```
var specialties = cf.dimension(function(d) {
    return d.specialties;
});

specialties.filterFunction(function(d) {
    return d.indexOf("specialty") >= 0;
}); 
```

或者，您可以为每个可能的专业制作一个维度：

```
var pediatrics = cf.dimension(function(d) {
    return d.specialties.indexOf("pediatrics") >= 0;
});

var internal = cf.dimension(function(d) {
    return d.specialties.indexOf("internal") >= 0;
}); 
```

并在这些上运行过滤器（但这仅支持 AND 条件）。

# xamarin.ios - 为 Monodevelop 使用 Stylecop 插件时出现问题

> ID：15888542
> 
> 赞同：0
> 
> 时间：2013-04-08T20:38:38.413
> 
> 标签：xamarin.ios, monodevelop, stylecop

我正在尝试将 Stylecop 插件用于 Monodevelop - [http://addins.monodevelop.com/Project/Index/54](http://addins.monodevelop.com/Project/Index/54)。我有一个在 Visual Studio 中使用的自定义策略文件（它是一个 Settings.Stylecop 文件），现在我想在 Monodevelop（Xamarin Studio）中使用它。我将 Settings.Stylecop 文件放在解决方案目录中，但 Stylecop 似乎并没有真正使用该文件中的策略。有没有人在 Monodevelop (Xamarin Studio) 中使用 stylecop 插件？在这种情况下，Stylecop 从哪里读取政策？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T08:53:48.343

好吧，我只是能够通过重新启动 Xamarin Studio 来让它工作，然后将 Settings.Stylecop 文件放回解决方案。它现在拿起了我的规则。

# com+ - 尝试导出 COM+ 库时出现目录错误

> ID：15888544
> 
> 赞同：0
> 
> 时间：2013-04-08T20:38:41.697
> 
> 标签：com+, component-services

我们有一个旧的 VB6 COM+ 组件，它在 64 位 Windows 2003 R2 Server with SP2 上运行。我需要在新 PC 上安装代理，发现 .MSI 不存在，所以我想我会进入组件服务并导出它。我试过了，但收到以下错误消息：

“目录错误处理最后一个操作时发生错误。错误代码 8002801D - 库未注册。

事件日志可能包含其他故障排除信息。”

好吧，事件日志没有包含任何其他信息。无论如何，我对此错误感到困惑，因为站点周围的几个应用程序正在该服务器上使用此 COM+ 服务运行，所以我不知道为什么它会说该库未注册。但更重要的是，我在服务器上的组件服务中看到了该包并且它正在运行。为什么我不能导出要在新 PC 上使用的代理？

# mips - mips 关联浮点数

> ID：15888545
> 
> 赞同：0
> 
> 时间：2013-04-08T20:38:47.910
> 
> 标签：mips, floating

好吧只是为了测试我有这个代码

```
 .data
    # This shows you can use a .word and directly encode the value in hex
    # if you so choose
num1:   .word 0x3F800000
num2:   .float 1234.567

num3: .float 45.67834
num4: .float 0.0004
result: .word 0
string: .asciiz "\n"

    .text
main:
    la $t0, num1
    lwc1 $f2, 4($t0)
    lwc1 $f4, 8($t0)
    lwc1 $f6, 12($t0)

    # Print out the values of the summands

    li $v0, 2
    mov.s $f12, $f2
    syscall

    li $v0, 4
    la $a0, string
    syscall

    li $v0, 2
    mov.s $f12, $f4
    syscall

    li $v0, 4
    la $a0, string
    syscall
    li $v0, 4
    la $a0, string
    syscall

    # Do the actual addition

    add.s $f12, $f2, $f6
    add.s $f12, $f12, $f4

    # Transfer the value from the floating point reg to the integer reg

    swc1 $f12, 8($t0)
    lw $s0, 8($t0)

    # At this point, $f12 holds the sum, and $s0 holds the sum which can
    # be read in hexadecimal

    li $v0, 2
    syscall
    li $v0, 4
    la $a0, string
    syscall

    # This jr crashes MARS
    # jr $ra 
```

我有这个

```
 add.s $f12, $f2, $f6
    add.s $f12, $f12, $f4 
```

我试着交换命令说

```
 add.s $f12, $f4, $f6
    add.s $f12, $f12, $f2 
```

但结果是一样的

我检查了维基百科以获取不同的浮点加法示例，但这总是 1280.2457

[http://en.wikipedia.org/wiki/Floating_point](http://en.wikipedia.org/wiki/Floating_point)

他们发生了这种情况：

```
 a = 1234.567, b = 45.67834, c = 0.0004
 (a + b) + c:
     1234.567   (a)
   +   45.67834 (b)
   ____________
     1280.24534   rounds to   1280.245
    1280.245  (a + b)
   +   0.0004 (c)
   ____________
    1280.2454   rounds to   1280.245  <--- (a + b) + c
 a + (b + c):
   45.67834 (b)
 +  0.0004  (c)
 ____________
   45.67874
   1234.567   (a)
 +   45.67874 (b + c)
 ____________
   1280.24574   rounds to   1280.246 <--- a + (b + c) 
```

对我来说并没有发生，它只适用于我尝试的任何值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:12:50.090

纳米，我明白了

```
a=0.00004
b=45.67840
c=1234.567 
```

# java - 如何解读“公 T readObjectData(... 类 类型）”在Java中？

> ID：15888551
> 
> 赞同：46
> 
> 时间：2013-04-08T20:39:12.893
> 
> 标签：java, generics

我有这个 Java 代码。

```
public <T> T readObjectData(ByteBuffer buffer, Class<T> type) {
...
T retVal = (T) summaries;
return retVal; 
```

如何解释这段代码？为什么我们需要`public <T> T`而不是`public T`？

如何将参数赋予第二个参数（`Class<T> type`）？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-04-08T20:42:19.927

这声明了`readObjectData`泛型方法，带有一个类型参数，`T`.

```
public <T> ... 
```

那么返回类型是`T`.

```
... T readObjectData(... 
```

如果没有作为泛型类型声明的 initial `<T>`，符号`T`将是未定义的。

在参数列表中，`Class<T> type`是参数之一。因为返回类型和这个参数都引用了`T`，这保证了如果你传入 a `Class<String>`，那么它将返回 a `String`。如果你传入 a `Class<Double>`，那么它将返回 a `Double`。

要传入参数，请传入任何`Class`对象，例如`String.class`.

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-04-08T20:42:21.537

该`<T>`部分是声明一个*泛型类型参数* `T`。如果您省略这部分，编译器可能会抱怨该类型`T`不存在。

在这种情况下，`T`用作实际类型的占位符，仅在使用非泛型类型参数实际调用方法时才确定。

```
public <T> T readObjectData(...
        ^  ^
        |  + Return type
        + Generic type argument 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-04-08T20:47:10.153

`<T>`是一个参数类。没有名为 的类`T`。您可以将此方法与通过名为 的第二个方法参数指定的任何类一起使用`type`。

因为方法定义如下：

`public <T> T readObjectData(ByteBuffer buffer, Class<T> type)`

你可以这样称呼它：

`MyClass obj = o.readObjectData(buffer, MyClass.class);`

请注意，您不必将返回值转换为`readOjectData()`to `MyClass`。曾几何时，在 java 5 之前，此方法将被定义为：

`public Object readObjectData(ByteBuffer)`

它的用法看起来像：

`MyClass obj = (MyClass)o.readObjectData(buffer);`

由于铸造可能会导致`ClassCastException`这是一种不好的做法。这是发明仿制药的原因。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2016-10-19T01:57:03.663

您可能对类似且更常见的声明感到困惑：

```
class MyClass<T> {
   private  T myMethod(T a){
       return  a;
   }
} 
```

在上述情况下，不需要`"<T>"`在 private ( `private <T> T myMethod(T a)`)之后

因为`T`它使用的和类中定义的一样`MyClass<T>`

更重要的是，如果你写

```
class MyClass<T> {
   private <T> T myMethod(T a){
       return  a;
   }
} 
```

那么意思是 myMethod 返回类型（可能）与 MyClass 类型不同。就好像你写了这个：

```
class MyClass<T1> {
   private <T2> T2 myMethod(T2 a){
       return  a;
   }
} 
```

学分：以“Kanagavelu Sugumar”对[How to use Class<T> in Java?](https://stackoverflow.com/questions/462297/how-to-use-classt-in-java)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-09T12:30:09.157

这是[JsonPath](https://github.com/json-path/JsonPath/)使用的模式，它允许您使用以下语义：

```
String author        = JsonPath.read(json, "$.store.book[0].author");
List<String> authors = JsonPath.read(json, "$.store.book[*].author"); 
```

这是最接近动态编程语言（例如 Javascript）中使用的鸭子类型的东西，目前可以用 Java 完成。

# delphi - 通过“in”Delphi 传递参数

> ID：15888554
> 
> 赞同：0
> 
> 时间：2013-04-08T20:39:15.923
> 
> 标签：delphi, parameters, bde

我需要使用 BDE 将参数传递给 Delphi 中的 SQL 以使用“in”，示例如下：

```
select * from customers where id in (:p_in) 
```

我需要通过：p_in 客户列表。但是`Query.ParamByName.('p_in').AsString: = '1, 2,3 ',`它没有用..将不得不制作一个数组？还是通过 AsVariant 传递？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T21:45:06.947

您必须动态构建 SQL。（不过，请参阅我的答案的后半部分。）

```
var
  SQLStr: string;
  i: Integer;
begin
  SQLStr := 'SELECT * FROM Customers WHERE id IN (';
  for i := 0 to CustomerList.Count - 1 do
    SQLStr := SQLStr + QuotedStr(CustomerList[i]) + ',';
  // Replace final extra comma with closing ')'
  SQLStr[Length(SQLStr)] := ')';
  MyQuery.SQL.Text := SQLStr;
  ...
end; 
```

请注意，为了防止 SQL 注入，您**应该**使用参数化 SQL 来执行此操作，尽管这需要更多工作。这也可以，并且更安全：

```
var
  SQLStr: string;
  i: Integer;
begin
  SQLStr := 'SELECT * FROM Customers WHERE id IN (';

  // Add parameters to hold values like `:ID`
  for i := 0 to CustomerList.Count - 1 do
    SQLStr := SQLStr + Format(':ID%d,' [i]);

  // Remove final extra comma and replace with closing ')', and
  // then assign it to MyQry.SQL; the query will parse the params
  if CustomerList.Empty then
    SQLStr := SQLStr + ')'
  else
    SQLStr[Length(SQLStr)] := ')';
  MyQuery.SQL.Text := SQLStr;

  // Populate the parameters
  for i := 0 to CustomerList.Count - 1 do
    MyQuery.ParamByName(Format('ID%d', [i])).AsString := CustomerList[i];

  // Execute query
  MyQuery.Open;
end; 
```

你也可以直接替换它们，如果你在SQL中没有其他参数，但是如果你稍后更改查询并添加一个新参数，直接通过索引访问它们会导致问题！只需将第二个`for`循环替换为：

```
for i := 0 to CustomerList.Count - 1 do
  MyQuery.Params[i].AsString := CustomerList[i]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T21:11:27.573

试试这个 ：

```
p_in  : String ;

for i := 0 to Customerlist.count do
   p_in := p_in +Customerlist[i] + ','; 

MyQuery.text := 'select * from customers where id in (' + p_in  + ' )' ; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T06:43:47.713

由于不推荐使用 BDE，请考虑使用允许替换参数的现代组件。例子：

```
SomeDataSet.SQL.Add('select foo from bar where baz in (:TESTIDS)');
SomeDataSet.DeclareVariable('TESTIDS', otSubst);  // <- this does the trick
// Place here some loop that fills the list of test-id separated by a ","
// And then:
SomeDataSet.SetVariable('TESTIDS', myIDList);  // Drop the list into the variable 
```

不同的组件制造商可能为此使用不同的名称。

# php - PHP、Ajax、JSON 和 Handlebars

> ID：15888560
> 
> 赞同：1
> 
> 时间：2013-04-08T20:39:47.040
> 
> 标签：php, jquery, ajax, json, handlebars.js

如果这是一个多余的问题，请让我知道并指出我那里，但我没有找到确切的问题/答案组合，也没有找到两者的混合。

我在 jquery 中有一些从 php 页面调用函数的 ajax。如果没有车把，json 数据会很好地返回。那里没有问题。但是，我似乎无法让 ajax 将我的结果写入车把模板。这是我现在拥有的代码：

```
$.ajax({
type: "post",
    url: "../includes/db_functions.inc.php",
    data: ({ p : p, p2 : p2, f : f }),
    dataType: "json",
    success: function(results){
$.each(results, function(i, item){
     var context = [ 
     {
            id : item[i].id, 
            clock_number : item[i].clock_number,
     }
    ],
    template = Handlebars.compile( $('#template').html() );
    $('table.entries').append( template(context) );
});
}
}); 
```

有人知道我在这里可能会错过什么吗？我 99% 确定它在上下文区域中，但只是没有找到它。

[编辑]

```
<table class="entries">
    <script id="template" type="text/x-handlebars-template">
            <tr>
                <td>{{id}}</td>
                <td>{{clock_number}}</td>
            </tr>
    </script>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T20:55:43.330

从[Handlebars - Getting Started 开始](http://handlebarsjs.com/)，我会说，省略数组并仅使用对象作为上下文

```
var context = {
    id : item[i].id, 
    clock_number : item[i].clock_number,
},
template = Handlebars.compile($('#template').html());
$('table.entries').append(template(context)); 
```

在 ajax`success`代码中，有对`$.each(results, function(i, item) {...})`. 在这种情况下，`item`已经是`i`第 th 个元素，如果`results`是一个数组。也许你可以把它减少到

```
success: function(results) {
    var template = Handlebars.compile($('#template').html());
    $.each(results, function(i, context) {
        $('table.entries').append(template(context));
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:04:38.373

好的，所以这里实际上有几件事是错误的。

首先，我在表单本身中有一个错字，虽然它没有解决问题会导致我找不到修复程序。

其次，由于某种原因，它不能使用 $('#submit').on("click", function()) 它只是不喜欢它。我将其更改为 $('#textbox).on("blur", function()) 并立即开始从成功函数中获取结果。

第三，是的，我不知道这是否真的是一个问题，但它有效，所以我称它为答案的一部分。使用 $.each 执行 @Olaf Dietsche 的操作，如下所示：

```
$.each(results, function(i, context){
   $('div.entry').append( template(context) );
}); 
```

# ruby - 迄今为止 ddmmyyyy 格式的字符串

> ID：15888561
> 
> 赞同：0
> 
> 时间：2013-04-08T20:39:49.307
> 
> 标签：ruby, arrays, date, datetime

我有一个文件夹，其中包含一堆文件夹，所有文件夹的命名约定为`mmddyyyy`（例如`04102013`，`04092013`等）。我有一个包含所有这些路径的文本文件，并且已经在 Ruby 中成功编写了一个删除路径的数组，所以我们只剩下日期（但我相信它被存储为一个字符串）。

我现在需要做的是获取数组中的日期并向它们添加天数。天数将是静态的，并且需要对数组中的所有内容全面应用相同的值。在第 8 行，我得到一个无效的日期 ( `ArgumentError`)。最终结果需要是一个数组，数组中的每个项目都有 +7 天。现在我什至无法将值转换为日期格式。

```
require 'date'
myarray = IO.readlines "/path/to/myfile.txt"
myarray.each do |s|
  s.gsub!('/path/to/my/dated/folders/', '')
end
print myarray 

myarray.map! {Date.strptime("%m%d%Y")}
# myarray.map! {+(7)}
print myarray 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:47:00.530

尝试：

```
myarray.map!{|s| Date.strptime(s, '%m%d%Y') + 7} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T20:47:07.390

你很亲近！您需要将数组值传递给日期构造函数。

```
myarray.map!{|date| Date::strptime(date, "%m%d%Y") + 7} 
```

# knockout.js - knockout.js 如何初始化tinymce？

> ID：15888563
> 
> 赞同：2
> 
> 时间：2013-04-08T20:40:06.210
> 
> 标签：knockout.js, tinymce

我正在尝试将 timyMCE 集成到淘汰赛中，想法是，当单击链接时，将内容显示为不可编辑，然后单击测试以编辑以打开 tinymce。然后创建一个按钮来保存和切换编辑模型到视图模型。这是示例代码，tinyMCE 现在不起作用...感谢您的帮助。

通常我们应该如何调试淘汰赛？

```
Sample code here:
http://jsfiddle.net/Princa/zADEK/3/ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T07:50:15.103

1）您需要这些绑定将tinymce与您的淘汰赛模型绑定。 [https://github.com/SteveSanderson/knockout/wiki/Bindings---tinyMCE](https://github.com/SteveSanderson/knockout/wiki/Bindings---tinyMCE)

2）您的 HTML 与您的 textareas 和显示区域。

```
<a href="javascript:void(0)" data-bind="click:function(){showEditor(true)}">Show Editor</a> | 
<a href="javascript:void(0)" data-bind="click:function(){showEditor(false)}">Hide Editor</a>
<br/>

<div data-bind="text: fieldOne, visible:!showEditor()"></div>

<div data-bind="css:{'nodisplay':!showEditor()}">
    <textarea class="tinymce" data-bind="tinymce: fieldOne"></textarea>
</div>

<hr/>

<h2>Debug</h2>
<div data-bind="text: ko.toJSON(viewModel)"></div> 
```

3) 你的 JS

```
var viewModel = {
    fieldOne: ko.observable("one"),
    showEditor:ko.observable(false)
};

ko.applyBindings(viewModel); 
```

你可以检查这个jsfiddle。 [http://jsfiddle.net/billaraw/kwpRV/](http://jsfiddle.net/billaraw/kwpRV/)

# ruby - 等效于 ruby debug 'p' 语句的方案

> ID：15888564
> 
> 赞同：2
> 
> 时间：2013-04-08T20:40:12.670
> 
> 标签：ruby, scheme, racket

我正在尝试调试一些方案代码。如果我可以打印变量的内容或绑定出来会很有帮助。

是否有与 Scheme 中 Ruby 的“p”语句等效的语句。

特别是，我正在使用 Racket。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T22:10:13.193

没有 p 等价物，但很容易自己动手。

```
#lang racket

(define-syntax-rule (p e)
  (let ([ans e])
    (printf "~a => ~a\n" (quote e) ans)
    ans))

(p (+ 1 2)) 
```

输出

```
(+ 1 2) => 3
3 
```

作为低技术替代品，您可能还对[Racket 中的 Cc Cl 键盘快捷键](http://docs.racket-lang.org/drracket/Keyboard_Shortcuts.html)感兴趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T20:41:24.670

您可以使用 来在评估窗口上显示变量的内容[`display`](http://docs.racket-lang.org/reference/Writing.html#%28def._%28%28quote._~23~25kernel%29._display%29%29)，或者如果您想要更多地控制输出的格式，请使用[`printf`](http://docs.racket-lang.org/reference/Writing.html#%28def._%28%28quote._~23~25kernel%29._printf%29%29)。但这仅相当于在 Ruby 中调用——鉴于 Ruby对对象的调用，`puts`我想不出直接相当于在 Scheme 中的调用。`p``p``inspect`

# java - 运行 CXF JAX WS 服务的问题

> ID：15888569
> 
> 赞同：0
> 
> 时间：2013-04-08T20:40:28.767
> 
> 标签：java, jax-ws, cxf, mule

我已经通过 HTTP 出站使用 CXF JAXWS 服务公开了一个 Web 服务。

下面给出了我的 Mule 配置中的端点声明的语法。

```
<http:inbound-endpoint address="http://localhost:8080/HelloService"  exchange-pattern="request-response">
        <cxf:jaxws-service serviceClass="com.example.service.HelloServiceImpl" wsdlLocation="wsdl/helloservice.wsdl"
        namespace="http://example.org/HelloService"          
         port="HelloServicePort"   service="HelloService"  > 
```

但这是行不通的。尝试在 mule 服务器上运行它时会出现以下错误。

```
2013-04-08 16:34:35,252 ERROR [main] mule.MuleServer (MuleServer.java:474) - 
********************************************************************************
* A Fatal error has occurred while the server was running:                     *
* Could not find definition for port                                           *
* {http://service.example.com/}HelloServiceImplPort.                *
* (org.apache.cxf.service.factory.ServiceConstructionException)                *
*                                                                              *
* The error is fatal, the system will shutdown                                 *
******************************************************************************** 
```

它正在寻找与我在服务端点声明中提到的不同的端口。

请帮助我理解，问题是什么。

下面给出的是该服务的 wsdl。

我已经创建了这个 WSDL，然后使用 cfx 的 wsdl2java 生成了代码。然后实现了服务接口操作。然后在 Mule 流中配置服务。

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<wsdl:definitions xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://example.org/HelloService" 
xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:xsd="http://www.w3.org/2001/XMLSchema"
name="HelloService" targetNamespace="http://example.org/HelloService"
 xmlns:per="http://example.org/HelloService/person"
 xmlns:comp="http://example.org/HelloService/company"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  >

    <wsdl:types>        
    <xsd:schema targetNamespace="http://example.org/HelloService/company" >    
        <xsd:include schemaLocation="company.xsd"  ></xsd:include>    
    </xsd:schema>
    <xsd:schema targetNamespace="http://example.org/HelloService/person"> 
        <xsd:include schemaLocation="person.xsd"  ></xsd:include>    
    </xsd:schema>
  </wsdl:types>

  <wsdl:message name="addCompanyRequest">
    <wsdl:part element="comp:Company" name="company"/>
  </wsdl:message>

  <wsdl:message name="addPersonRequest">
    <wsdl:part element="per:Person" name="person"/>
  </wsdl:message>

  <wsdl:message name="addCompanyResponse">
    <wsdl:part element="comp:CompResponse" name="response"/>
  </wsdl:message>

  <wsdl:message name="addPersonResponse">
    <wsdl:part element="per:PerResponse" name="response"/>
  </wsdl:message>

  <wsdl:portType name="HelloService">
    <wsdl:operation name="addCompany">
      <wsdl:input message="tns:addCompanyRequest" name="addCompanyRequest" />
      <wsdl:output message="tns:addCompanyResponse" name="addCompanyResponse" />
    </wsdl:operation>

    <wsdl:operation name="addPerson">
      <wsdl:input message="tns:addPersonRequest" name="addPersonRequest" />
      <wsdl:output message="tns:addPersonResponse"  name="addPersonResponse" />
    </wsdl:operation>

  </wsdl:portType>

  <wsdl:binding name="HelloServiceSOAP" type="tns:HelloService">
        <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
    <wsdl:operation name="addCompany">
      <soap:operation soapAction=""  style="document" />
      <wsdl:input name="addCompanyRequest">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="addCompanyResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>

    <wsdl:operation name="addPerson">
      <soap:operation soapAction=""  style="document" />
      <wsdl:input name="addPersonRequest">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="addPersonResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>

  </wsdl:binding>

  <wsdl:service name="HelloService">
    <wsdl:port binding="tns:HelloServiceSOAP" name="HelloServicePort">
      <soap:address location="http://localhost:8080/HelloService"/>
    </wsdl:port>
  </wsdl:service>  

</wsdl:definitions> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T21:42:03.317

我`cxf:jaxws-service`用`port`属性配置 a 绝对没有问题，所以我认为问题出在您的配置中。

例如，错误说 CXF 正在寻找，`{http://service.example.com}HelloServiceImplPort`但令人惊讶的是，您将服务命名空间配置为`http://example.org/HelloService`. 虽然它不需要保持一致，但通常是一致的。

查看您的 WSDL，事情似乎是正确的，所以我的猜测是`@WebService`注释上`HelloServiceImpl.class`包含时髦的值。

它应该是：

```
@WebService(endpointInterface = "...interface class...", targetNamespace = "http://example.org/HelloService", serviceName = "HelloService", portName = "HelloServicePort", wsdlLocation = "wsdl/helloservice.wsdl") 
```

请注意，如果配置正确`@WebService`，您只需要在 Mule XML 配置中使用它：

```
<cxf:jaxws-service serviceClass="com.example.service.HelloServiceImpl" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:26:12.590

不是本[例](http://www.mulesoft.org/documentation/display/current/Building+Web+Services+with+CXF)`<cxf:jaxws-service serviceClass="interface-name and not implementation name>`中引用的

# jquery - 手动触发 jquery-ui 可排序的接收事件

> ID：15888578
> 
> 赞同：3
> 
> 时间：2013-04-08T20:41:06.013
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

到目前为止，[这是我的代码的工作演示。](http://jsfiddle.net/Yr8QD/)

当您拖入开放空间时，将创建一个空组。我可能会以错误的方式解决这个问题，但我希望将拖到新组的项目填充到列表中。有没有办法从 jquery-ui sortables 小部件调用接收事件来实现这一点。

或者，我是否应该使用可放置项目的 drop 方法预先填充正在添加的组

```
drop: function (event, ui){
    $(element).append($(ui.helper).clone());
} 
```

或类似的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-21T13:22:51.830

您可以使用 jQuery 的[`.trigger()`](http://api.jquery.com/trigger/)事件手动触发可排序事件，如下所示：

`$('#sortable-name').trigger('sortreceive');`

我确实认为您的代码看起来有点奇怪，但这可能是因为我从未见过有人以小部件格式使用 jQuery UI。

乔什

# scala - 运行 Akka 微内核时获取命令行参数？

> ID：15888579
> 
> 赞同：5
> 
> 时间：2013-04-08T20:41:07.457
> 
> 标签：scala, command-line, akka, microkernel

我有下面的[Akka 微内核](http://doc.akka.io/docs/akka/2.1.0/scala/microkernel.html)：

```
class ServiceKernel extends Bootable {

  val system = ActorSystem("service-kernel")

  def startup = {
    system.actorOf(Props(new Boot(false))) ! Start
  }

  def shutdown = {
    system.shutdown()
  }
} 
```

因为内核扩展`Bootable`而不是`App`，我将如何访问启动内核时使用的命令行参数？例如，如果我使用`start namespace.ServiceKernel -d rundevmode`或类似方式运行内核。谢谢！

## 附加信息

我认为值得在微内核中添加有关启动脚本的信息。在`/bin/start`您注意到以下内容：

```
#!/bin/sh

AKKA_HOME="$(cd "$(cd "$(dirname "$0")"; pwd -P)"/..; pwd)"
AKKA_CLASSPATH="$AKKA_HOME/config:$AKKA_HOME/lib/*"
JAVA_OPTS="-Xms256M -Xmx512M -XX:+UseConcMarkSweepGC -XX:+CMSClassUnloadingEnabled -XX:ParallelGCThreads=2"

java $JAVA_OPTS -cp "$AKKA_CLASSPATH" -Dakka.home="$AKKA_HOME" akka.kernel.Main "$@" 
```

尽管 om-nom-nom 最初建议`-D`使用选项，但它看起来正在使用中，并且主要启动参数正在传递给`akka.kernel.Main`类（在这种情况下是`ServiceKernel`上面的类）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T21:14:07.847

这是最小的示例：

```
object Foo extends App {
    val debugModeOn = System.getProperty("debugmode") != null
    val msg = if (debugModeOn) "in debug mode" else "not in debug mode"
    println(msg)
}

» scala Foo -Ddebugmode
in debug mode
» scala Foo            
not in debug mode 
```

你可以做额外的检查来克服这个问题：

```
» scala Foo -Ddebugmode=false
in debug mode 
```

PS 你可能还想使用[Properties helper](http://www.scala-lang.org/api/current/index.html#scala.util.Properties%24)，它包含一堆方法，如 propOrNone、propOrElse 等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T14:51:05.297

看起来在 sh 脚本中，他们给了你一个提供 JAVA_OPTS 的机会，如果没有，他们给你一个他们预先定义的。我想你可以在一个脚本中设置 JAVA_OPTS，然后调用这个脚本，在 JAVA_OPTS 中为你的自定义参数指定一个 -D 选项。这样，您可以确保您的自定义参数通过您指定的 -D 系统属性传入。Hackish，但我认为它应该工作。-D 的美妙之处在于您可以提供任意数量的内容，因此他们已经将它用于自己的某些系统属性这一事实并不重要。

# c# - 在ListPicker中选择一个项目后如何刷新当前页面

> ID：15888582
> 
> 赞同：0
> 
> 时间：2013-04-08T20:41:18.033
> 
> 标签：c#, windows-phone-7, listpicker

我想知道如何刷新当前页面

`heNavigationService.Navigate(new Uri(NavigationService.Source + "?Refresh=true", UriKind.Relative));`

在我在 ListPicker 中选择一个元素之后。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:55:14.423

我想您正在为 Windows Phone 使用 MVVM Light。在这种情况下，您应该在页面中捕获事件，然后在 ViewModel 上触发命令。

例子：

**页面的代码隐藏**

```
private void Listbox_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    ViewModelClass vm = this.DataContext as ViewMoedlClass;
    if (vm != null)
    {
        vm.RefreshCommand.Execute();
    }
} 
```

**视图模型**

```
class ViewModelClass
{
    public ViewModelClass
    {
        this.RefreshCommand = new RelayCommand(() =>
        {
            NavigationService.Navigate(new Uri(NavigationService.Source + "?Refresh=true", UriKind.Relative));
        }   
    }

    public RelayCommand RefreshCommand { get; set;}

} 
```

**Xaml**

```
<ListBox SelectionChanged="Listbox_SelectionChanged" /> 
```

从理论上讲，您不必在代码隐藏中执行此操作，您可以将 ViewModel 中的命令直接绑定到 SelectionChanged 事件，但这在 Windows Phone 中（直接）是不可能的。如果你想走这条路，你可以看看 EventToCommand。此页面更详细地解释了这些步骤：[http ://www.geekchamp.com/articles/how-to-bind-a-windows-phone-control-event-to-a-command-using-mvvm-light](http://www.geekchamp.com/articles/how-to-bind-a-windows-phone-control-event-to-a-command-using-mvvm-light)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-08T20:43:34.403

将您的自动回发设置为 true，示例：

```
 <asp:DropDownList  OnSelectedIndexChanged="dropDown_indexChange" ID="DropDownList1" runat="server" AutoPostBack="True"> 
```

# ember.js - Ember 路由器转换到带有参数的嵌套路由

> ID：15888587
> 
> 赞同：2
> 
> 时间：2013-04-08T20:41:29.483
> 
> 标签：ember.js, ember-data

```
App.Router.map(function() {
    this.resource('documents', { path: '/documents' }, function() {
        this.route('edit', { path: ':document_id/edit' });
    });
    this.resource('documentsFiltered', { path: '/documents/:type_id' }, function() {
        this.route('edit', { path: ':document_id/edit' });
        this.route('new');
    });
}); 
```

这个控制器带有一个子视图事件，基本上转换为过滤后的文档

```
App.DocumentsController = Ember.ArrayController.extend({
    subview: function(context) {
    Ember.run.next(this, function() {
        //window.location.hash = '#/documents/'+context.id;
        return this.transitionTo('documentsFiltered', context);
    });
},
}); 
```

我的问题是，当页面的哈希发生变化时，这段代码可以正常工作。

但是当我运行上面的代码而不是 location.hash 位和使用 Ember 本机时`transitionTo`，我得到了一个神秘的

> 未捕获的类型错误：对象 [对象对象] 没有方法“切片”

有什么线索吗？

谢谢

更新：

```
App.DocumentsFilteredRoute = Ember.Route.extend({
model: function(params) {
    return App.Document.find({type_id: params.type_id});
},
});

{{#collection contentBinding="documents" tagName="ul" class="content-nav"}}
<li {{action subview this}}>{{this.nameOfType}}</li>
{{/collection}} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T08:44:44.873

问题是您的**模型挂钩返回一个数组**，而在您的**transitionTo 中您使用的是单个对象**。根据经验，您对 transitionTo 的调用应该传递与模型挂钩返回的相同数据结构。按照这个经验法则，我建议执行以下操作：

```
App.DocumentsController = Ember.ArrayController.extend({
    subview: function(document) {
        var documents = App.Document.find({type_id: document.get("typeId")});
        Ember.run.next(this, function() {
            return this.transitionTo('documentsFiltered', documents);
        });
    }
}); 
```

**注意：**我假设 type_id 存储在属性 typeId 中。也许您需要根据自己的需要对其进行调整。

# backbone.js - 骨干集合导出问题

> ID：15888591
> 
> 赞同：0
> 
> 时间：2013-04-08T20:41:39.407
> 
> 标签：backbone.js, backbone-events

我有一个用户集合（模型用户）模型有一个布尔值：isExport 我有一个按钮，点击后应该将所有用户发布到服务器 isExport=true 有人可以为这个问题提出一个合适的解决方案吗？

我知道可以将集合包装为模型并覆盖 toJSON 函数，但到目前为止无法管理它（有人可以给出代码示例吗？）

```
App.User = Backbone.Model.extend({ defaults: {isExport: false}...});
App.Users = Backbone.Collections.extend({model: App.User...}); 
```

谢谢！罗伊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:50:18.920

默认情况下，骨干集合对服务器没有任何写入操作，因此您需要向您的 Collection 子类添加一个新方法，例如`doExport`，用于`.where`获取模型`isExport=true`及其`toJSON()`获取对象数组，然后您可以使用`Backbone.sync`or发送到服务器`$.post`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T00:39:26.097

Backbone 带有 RESTful 支持。因此，如果您为每个集合提供一个指向集合休息服务的 url，那么您可以使用一些函数（创建、保存）来处理服务器请求。

```
App.Models.User = Backbone.Model.extend();
App.Collections.Users = Backbone.Collection.extend({
    url: 'users',
    model: App.Models.User
}); 
```

因此，通过这种方式，您可以：

```
var users = new App.Collections.Users();
users.fetch(); // This will call yoursite.com/users
               // Expecting a json request 
```

然后你可以：

```
users.create({ name: 'John', isExport: true }); 
```

这将向服务器发送一个发布请求，以创建新记录。你可以在服务器端检查它是否有你想要的标志。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T09:23:48.897

```
App.Views.ExportAll = Backbone.View.extend({
el: '#exportAll',

events: {
    'click': 'exportAll'
},

exportAll: function(e){
    e.preventDefault();
    console.log('exporting all');
    console.log(this.collection.toJSON());

    var exportModel = new App.Models.Export;
    exportModel.set("data", this.collection.toJSON());
    console.log(exportModel.toJSON());
    exportModel.save();
}
}); 
```

我认为这是解决问题的最佳方法

# ajax - 构建列表并发送到 AJAX 方法

> ID：15888594
> 
> 赞同：0
> 
> 时间：2013-04-08T20:41:51.190
> 
> 标签：ajax, jquery

我正在从一个数组构建一个列表，然后使用 data 参数通过 AJAX 传递该列表。

当我将列表写到控制台时，一切看起来都很好，但我的 AJAX 方法不喜欢它。

```
for (i = 0; i < carList.length; i++) {

    var carData = { "data": { "CarId": '"' + CarList[i] + '"', "PassengerCar": "true", "Automatic":"true" } };
    console.log(carData);
}

$.ajax({
dataType: "json",
data: carData 
.... 
```

我在做不正当的事吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T20:46:30.493

```
var carData = {};

for (i = 0; i < carList.length; i++) {

    carData["data_"+i] = {
                          CarId       : CarList[i], 
                          PassengerCar: true, 
                          Automatic   : true
                          };

}

$.ajax({
    url     : 'someurl.php',
    dataType: 'json', //expects returned data from server to be JSON
    data    : carData
}).done(function(data) {
    console.log(data);
}); 
```

# titanium - 合金资源文件夹在哪里

> ID：15888595
> 
> 赞同：3
> 
> 时间：2013-04-08T20:42:00.190
> 
> 标签：titanium

我正在使用 Titanium Alloy 3.0.2 GA（在 Mac 上）构建跨平台移动应用程序

为什么**资源**文件夹不显示在 Titanium Studio 中，即使它存在于文件系统中？

我想存储一些将在应用程序中显示的图像，并且我相信我应该将它们存储在**Resources**文件夹中的某个位置。

当我查看 Studio 中的 Project Explorer 时，我没有看到 /Resources 文件夹。

![来自项目资源管理器的图像](https://i.stack.imgur.com/fvf0Z.png)

当我尝试将**Resources**文件夹添加到根目录时，我被告知已经有一个**Resources**文件夹！

![添加文件夹时出错](https://i.stack.imgur.com/XL6Rg.png)

Finder 确认有一个**Resources**文件夹。

那么，如何让资源文件夹显示在 Studio 项目资源管理器中？

此外，它也不会出现在 App Explorer 视图中。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-08T21:54:42.333

是的，我也遇到了这个问题，但幸运[的是，这在指南部分中有记录。](http://docs.appcelerator.com/titanium/latest/#!/guide/Alloy_Debugging_and_Troubleshooting-section-34637808_AlloyDebuggingandTroubleshooting-Debugging)以下是相关信息：

> 如果您的 Resources 文件夹已隐藏，请在 App Explorer 视图中单击 View Menu 按钮（向下的直角三角形）并选择 Customize Views...，然后出现 Available Customizations 对话框。在 Filters 选项卡中，取消选中 Titanium Resources Folder 复选框，然后单击 OK 按钮。Resources 文件夹应该出现在 App Explorer 视图中。

对我来说，实际上是在“项目资源管理器”视图中找到了向下的白色箭头，在“可用的自定义”对话框中，我不得不一直滚动到“过滤器”选项卡的底部并取消选中“钛资源文件夹”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T15:53:40.380

唔...

是的，我可以通过进入 Studio 中的“自定义视图”选项来查看资源文件夹。

但是放置本地文件（在我的例子中是汽车图像）的正确位置是在 \app\assets\ 文件夹下。\assets* 作为构建的一部分被复制到 \Resources 文件夹。

所以我只是把我的 .jpg 文件放在一个新的 \car_images 文件夹下（在 \app\assets 下），并且能够在我的代码中访问它们

```
 var image = Ti.UI.createImageView({
    image: '/car_images/Acura.jpg'
}) 
```

所以实际上没有必要查看/修改 \Resources 文件夹，因为它由构建过程管理

谢谢

# jquery - 隐藏/显示具有许多变量的内容

> ID：15888597
> 
> 赞同：0
> 
> 时间：2013-04-08T20:42:03.663
> 
> 标签：jquery

我正在使用 jQuery 来显示/隐藏单击事件的内容，如下所示：

```
$('#staffer1').click(function() {
    $("#staff1").show();
    $("#staff2").hide();
    $("#staff3").hide();
});     

$('#staffer2').click(function() {
    $("#staff2").show();
    $("#staff1").hide();
    $("#staff3").hide();
}); 

$('#staffer3').click(function() {
    $("#staff3").show();
    $("#staff1").hide();
    $("#staff2").hide();    
}); 
```

这个问题在于数量。如果我们有 60 名员工，有没有办法避免为每个点击事件列出 60 行？

HTML 是这样的：

```
<div>
<p><a id="staffer1">Staff Name 1</a></p>
<p><a id="staffer2">Staff Name 2</a></p>
<p><a id="staffer3">Staff Name 3</a></p>
</div>

<div id="staff1">
<div class="slider">
<img src="image.jpg">
</div>
<div class="staff_bio">
<p>Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugi.</p>
</div>
</div>  

<div id="staff2">
<div class="slider">
<img src="image.jpg">
</div>
<div class="staff_bio">
<p>Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugi.</p>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T20:45:36.217

为每个人员元素添加一个名为的类`staff`，然后使用它来隐藏所有其他元素：

```
$('#staffer1').click(function() {
    $(".staff").hide();
    $("#staff1").show();
}); 
```

更好的是，也有一个`staffer`类，然后你可以有一个处理所有东西的处理程序：

```
$('.staffer').click(function() {
    $(".staff").hide();
    var num = $(this).attr(id).replace(/staffer/, '');
    $("#staff"+num).show();
}); 
```

我不知道您的 html 是什么样的，但您也可以使用其他方法，例如使用`data-`和`.data()`存储/检索员工编号：

[http://jsfiddle.net/hcvWQ/](http://jsfiddle.net/hcvWQ/)

用来`.index()`确定哪个`.staffer`被点击：

[http://jsfiddle.net/zmXqx/](http://jsfiddle.net/zmXqx/)

或者，仅使用 html 结构将链接/按钮与信息相关联，如下例所示：

[http://jsfiddle.net/kde9J/](http://jsfiddle.net/kde9J/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T21:08:23.000

我完全同意 Jeff B 的观点。您应该为每个 HTML 元素添加一个类，并且应该使用 jQuery 将函数附加到元素上。

我强烈推荐[http://jqueryui.com/](http://jqueryui.com/)而不是发明自己的 UI 和交互。

这是您最近的 HTML 编辑中的一个功能小提琴。
[http://jsfiddle.net/krets/VgrTE/](http://jsfiddle.net/krets/VgrTE/)

只需按照 Jeff B 的建议添加类即可。

```
<p><a id="staffer1" class="staffer">Staff Name 1</a></p>
...
<div id="staff1" class="staff">
...

$(function() {
    $('.staffer').each(function(i){
        $(this).click(function(){
            $('.staff').hide()
            var num = $(this).attr("id").replace(/staffer/, '');
            $("#staff"+num).show()
        });
    });
}); 
```

# jython - 在 Pig 11 中的组内排名

> ID：15888602
> 
> 赞同：1
> 
> 时间：2013-04-08T20:42:14.973
> 
> 标签：jython, apache-pig

猪的问题，

我通过以下方式设置数据。

```
Function    Group   Home    Name
Rent    MX  1   John
Rent    MX  1   Jake
Rent    MX  1   Pat
Rent    DG  2   Jason
Rent    DG  6   Patrick
Rent    DG  6   Smith
Rent    DG  6   Joe 
```

我想做的是按功能、组和家庭分组，然后在该组中排名。

```
Function    Group   Home    Name    Rank
Rent    MX  1   John    1
Rent    MX  1   Jake    2
Rent    MX  1   Pat 3
Rent    DG  6   Patrick 1
Rent    DG  6   Smith   2
Rent    DG  6   Joe 3 
```

Pig 中的 RANK 功能不允许我在组内排名。有什么建议吗？Jython UDF ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T06:36:39.093

查看 DataFu 中的 Enumerate UDF，它会为您执行此操作。[http://datafu.incubator.apache.org/docs/datafu/1.1.0/datafu/pig/bags/Enumerate.html](http://datafu.incubator.apache.org/docs/datafu/1.1.0/datafu/pig/bags/Enumerate.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T06:50:35.173

我会给出一些指示。

在 Cascading API 中，我使用了[缓冲区](http://docs.cascading.org/cascading/1.2/userguide/html/ch05s05.html)，它允许我们迭代组值。

我读到[级联](http://www.cascading.org/)也有一个供`Jython`开发人员使用的 api，你可以探索一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T12:06:52.300

好的，这有效

```
def num_bag(input):
output = []
for rank, item in num(input):
    output.append(tuple([rank] + list(item)))
return output 
```

# c# - 一个控制器的两个视图

> ID：15888603
> 
> 赞同：0
> 
> 时间：2013-04-08T20:42:16.427
> 
> 标签：c#, asp.net-mvc, listview

我目前有一个查看页面，将用户列为带有他们的图像的画廊，但我还想创建一个按名称列出用户的查看页面。我想为他们两个使用一个控制器，我创建了一个`ListView`页面，并在原始`View`页面中按图像显示用户 - 我有一个查看`ListView`页面的链接。我尝试单击链接，但页面未显示。这是我所拥有的：

**图片查看页面**

```
 <h2>Users</h2>
<div>
    <a href="~/Views/Users/ListView">Click Here for List view</a>
</div>

<section id="Images">
    <section id="users" data-bind="foreach: Users">
        <div id="nameImage">
            <figure id="content">
                <img width="158" height="158" alt="Gravatar" data-bind="attr:{src: GravatarUrl}"/>
                <figcaption>
                   ...
                </figcaption>
            </figure>
            <p data-bind="text:Name"></p>
        </div>
    </section>
</section>

@section scripts{
@Scripts.Render("~/bundles/user" + ViewBag.Layout.AppVersionForUrls)

<script type="text/javascript">
    (function ($) {
        $.views.User.GetUser('@url');
    })(jQuery);
</script>
} 
```

**列表视图页面**

```
<div class="accordion-inner">
<div data-bind="foreach: Users">
    <div>
        <img width="158" height="158" alt="Gravatar" data-bind="attr:{src: GravatarUrl}"/>
        <p data-bind="text:Name"></p>
    </div>
</div> 
```

```
 @section scripts{
    @Scripts.Render("~/bundles/user" + ViewBag.Layout.AppVersionForUrls)

    <script type="text/javascript">
        (function ($) {
            $.views.User.GetUser('@url');
        })(jQuery);
    </script>
    } 
```

**控制器**

```
public ActionResult View(int id)
{
    // get the menu from the cache, by Id
    ViewBag.SideBarMenu = SideMenuManager.GetRootMenu(id);
    ViewBag.UserApiURL = "/api/User/" + id.ToString();
    return View(); 
}

public ActionResult ListView(int id)
{
    // get the menu from the cache, by Id
    ViewBag.SideBarMenu = SideMenuManager.GetRootMenu(id);
    ViewBag.RosterApiURL = "/api/User/ListView" + id.ToString();
    return View();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T20:47:40.327

MVC 中的概念是你永远不会链接到视图，你链接到控制器中的动作，然后决定（基于传递的参数）哪个视图以及应该渲染哪个模型。因此，如果您的控制器名为 UsersController，则

```
<a href="~/Views/Users/ListView">Click Here for List view</a> 
```

行应该是：

```
<a href="/Users/ListView">Click Here for List view</a> 
```

甚至更好

```
@Html.ActionLink("ListView") 
```

# ios - 未显示 Youtube 视频缩略图

> ID：15888606
> 
> 赞同：1
> 
> 时间：2013-04-08T20:42:21.723
> 
> 标签：ios, facebook, facebook-graph-api, youtube

我正在使用 iOS SDK 3.2.1 发布用户墙。一切都很好，但如果我发布 Youtube 视频，它的缩略图不会显示。我的发布代码是这样的：

```
postParams =[[NSMutableDictionary alloc] init];
[postParams setObject:link forKey:@"link"];
[postParams setObject:name forKey:@"name"];
[postParams setObject:desc forKey:@"description"];
[postParams setObject:url forKey:@"source"];
[postParams setObject:message forKey:@"message"];

AppDelegate *appdel=[[UIApplication sharedApplication] delegate];
appdel.session=[[FBSession alloc] init];
[appdel.session openWithCompletionHandler:^(FBSession *session,
                                                    FBSessionState status,
                                                    NSError *error)
         {
         }];
        [FBSession setActiveSession:appdel.session];
        [FBRequestConnection startWithGraphPath:@"me/feed" parameters:postParams                 HTTPMethod:@"POST" completionHandler:^(FBRequestConnection *connection,id result,
                                         NSError *error) {
        if (error)
        {
            [self failedToPublishPost];
        }
        else
        {
            [self finishedPublishingPost];
        }
        }]; 
```

你怎么看待这件事？

# c# - wpf c#按钮等待按钮按下

> ID：15888608
> 
> 赞同：-5
> 
> 时间：2013-04-08T20:42:30.790
> 
> 标签：c#, wpf, events, button

好的，我是编码的初学者

所以我想要做的是等待
用户点击多个其他按钮之一以继续的按钮

```
void Mainbutton()
{  

    //the program run throw so method  

    //Wait for the user to choose one  button (I made a numeric pad with buttons)  

    //Then use this information to work

} 
```

我知道我的英语不是很好 非常感谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-08T21:07:02.410

尝试这样的事情：

```
bool gotResponse = false;
//you need to run MainTask in a different thread
Thread thread = new Thread(new ThreadStart(DoWork));
thread.Start();

void DoWork()
{
     //do some work
     //when something else needed from user then popup message
     MessageBox.Show("say whatever you need to say");
     while(!gotResponse)
     {
          //note: this loop doesn't stop until gotResponse = true; 
     }
     //do rest of your work
}

private button_Click(object sender, RoutedEventArgs e)
{
     gotResponse = true;
} 
```

# json - 将json文件导入mongodb

> ID：15888609
> 
> 赞同：0
> 
> 时间：2013-04-08T20:42:34.383
> 
> 标签：json, mongodb

我是一名在读 IT 本科的学生。到目前为止，我已经使用 RDBMS 完成了所有数据管理。我使用 java -jdbc - rdbms 构建了几个独立系统。在了解 NoSQL 概念之后，我想在未来的项目工作中使用 MongoDB。我有几个问题。我将阅读 Mongodb 文档并学习 CRUD 操作. 我想选择一个像样的数据集并将其导入 mongodb 并进行某种搜索操作和分析..是否有任何链接可以实际演示将 json 数据导入 mongodb ..？我对此完全陌生？你能帮我么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T23:49:23.987

例如在窗口上启动您的 mongod 实例，如下所示

mongod --dbpath mydb\data --logpath mylogs\logs\log09April2013.log --logappend -journal --rest

现在使用 mongoimport 导入您的数据

mongoimport --db pcat -c zips < zips.json

连接到： 127.0.0.1 Mon April 09 11:59:03 9600 3200/second Mon April 09 11:59:06 19500 3250/second Mon April 09 11:59:08 导入了 29470 个对象

问候

阿德耶米·阿德比勒

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T21:06:13.763

这是关于如何插入数据的文档（[http://docs.mongodb.org/manual/core/create/），MongoDB](http://docs.mongodb.org/manual/core/create/)使用 BSON（它是 JSON，具有更多类型以支持二进制数据）。创建一个数据库，然后创建一个集合并插入您的数据。有许多基于语言的库可以让您连接到 Mongo，然后以编程方式插入到集合中。

# html - Firefox 中的 UndoManager 支持

> ID：15888611
> 
> 赞同：2
> 
> 时间：2013-04-08T20:42:36.117
> 
> 标签：html, firefox, undo-redo

我对如何在 Firefox 中使用 undoManager 有点困惑。根据[Mozilla](https://developer.mozilla.org/en-US/docs/Firefox_20_for_developers)的说法，Firefox 20 现在支持它，但我不知道在哪里。我已经在 、 等下进行了检查`document`，`Objects`但在任何地方都找不到。我确定我遗漏了一些明显的东西，所以有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T07:15:10.677

到目前为止，您必须设置“dom.undo_manager.enabled”首选项才能使用它，因为规范仍在不断变化。

# c# - 为什么打开 OpenLDAP 需要 cn=username？

> ID：15888614
> 
> 赞同：1
> 
> 时间：2013-04-08T20:42:55.127
> 
> 标签：c#, openldap

我正在使用 C# 连接到 OpenLDAP，当我传入我的用户名和密码时，我必须将它们作为 cn=Username,Password 传递到我的 LdapConnection 对象中。如果我只是传入用户名和密码，我对 Bind 的调用将失败。为什么我必须这样做？我的 OpenLDAP 服务器是否配置错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:20:38.647

这只是实施的副产品。Novell 的 eDirectory 解决方案采用了非常相似的方法，我使用相同的`Novell.Directory.Ldap`代码来处理对 eDirectory 和 OpenLDAP 的绑定请求。现在很明显，用户自己在授权时不必输入他们的整个 CN - 我们可以根据他们的 UID 对他们进行搜索：

```
//Setup the initial bind for the admin user
var lc = new LdapConnection();
lc.SecureSocketLayer = SSL;
lc.UserDefinedServerCertValidationDelegate += delegate { return true; };
lc.Connect(ServerName, Port);
lc.Constraints.TimeLimit = Timeout;
lc.Bind(AdminUsername, AdminPassword); 
```

现在我只过滤用户，并使用他们的专有名称或完整的容器名称 (CN) 进行绑定：

```
//Ex. (uid=jsmith)
string filter = config.LdapAuth.LdapFilter.Replace("{{uid}}", username);

//Find the user we're trying to authorize
var lsc = lc.Search(config.LdapAuth.LdapDomain, LdapConnection.SCOPE_SUB, filter, null, false);

if (lsc.hasMore())
{
    LdapEntry nextEntry = lsc.next();

    //Check the Entries DN so we can properly bind 
    lc.Bind(nextEntry.DN, Password);
} 
```

这是我能找到的最广泛使用的方法，到目前为止效果很好。

# ios - 我可以在不使用 KVO 的情况下过日子吗？

> ID：15888616
> 
> 赞同：-1
> 
> 时间：2013-04-08T20:43:04.367
> 
> 标签：ios, objective-c, key-value-observing

奇怪的语法，但我想问一下，如果我不使用 KVO（键值观察），应用程序是否无法执行某些操作/功能？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T20:50:49.517

Key Value Observing 提供了独特的功能和行为，并且对开发人员肯定有用，在同样的情况下，提供了对原本不透明的值的一瞥。

例如，如果您想知道 Cocoa 中动画的精确持续时间（否则为黑盒）（例如，键盘显示动画持续时间），KVO 是我知道您可以确定的唯一方法。

除此之外，它对于编程涉及数据的应用程序来说是一种有用的模式（见图）。因此，它是开发人员工具包中的另一个工具。

没有它你能过得去吗？当然。有很多工具你可以不用，而这一个需要一点点努力才能让你一开始就明白这一点。但是你应该避免它吗？不，我不这么认为——你为什么要这么做？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T20:50:39.640

您几乎从不需要 KVO。
只有当你需要一些特殊的东西，或者想规避 Apple sw 设计时。
对于少数情况，您会找到演示代码，所以不要太担心 KVO。

# ios - 通过 CGMutablePathRef 为 drawRect 中绘制的框设置动画

> ID：15888619
> 
> 赞同：2
> 
> 时间：2013-04-08T20:43:14.273
> 
> 标签：ios, objective-c, uiview, drawrect, uiviewanimation

我的目标是在我的 UIView 上画一个空的圆形框，它应该显示为一个洞，以显示下面的内容。我通过覆盖 drawRect 方法来做到这一点，如下所示。这使我能够创建我的 holeRect 属性（它是一个 CGRect）大小的圆角矩形，将内部阴影放入其中并将其放置在我的视图上，清除（使用**clearColor**和**CGContextSetBlendMode(context, kCGBlendModeSourceOut)**）此框覆盖的区域并揭示了我的观点背后的内容（我从[这个](https://stackoverflow.com/questions/4431292/inner-shadow-effect-on-uiview-layer)问题中获取了一些代码并对其进行了修改）。现在我的问题是我必须用动画移动和调整这个矩形的大小，我找不到这样做的方法，也许我选择了错误的方法来做这件事，但我不是很擅长绘画所以任何提示将不胜感激。

```
- (void)drawRect:(CGRect)rect
{

//I set the frame of my "holey" rect
CGRect bounds =  self.holeRect;
CGContextRef context = UIGraphicsGetCurrentContext();
CGFloat radius = 20;

//fill my whole view with gray
CGContextSetFillColorWithColor( context, [UIColor colorWithRed:.5 green:.5 blue:.5 alpha:.8].CGColor );
CGContextFillRect( context, rect );

// Create the "visible" path, which will be the shape that gets the inner shadow
// In this case it's just a rounded rect, but could be as complex as your want
CGMutablePathRef visiblePath = CGPathCreateMutable();
CGRect innerRect = CGRectInset(bounds, radius, radius);
CGPathMoveToPoint(visiblePath, NULL, innerRect.origin.x, bounds.origin.y);
CGPathAddLineToPoint(visiblePath, NULL, innerRect.origin.x + innerRect.size.width, bounds.origin.y);
CGPathAddArcToPoint(visiblePath, NULL, bounds.origin.x + bounds.size.width, bounds.origin.y, bounds.origin.x + bounds.size.width, innerRect.origin.y, radius);
CGPathAddLineToPoint(visiblePath, NULL, bounds.origin.x + bounds.size.width, innerRect.origin.y + innerRect.size.height);
CGPathAddArcToPoint(visiblePath, NULL,  bounds.origin.x + bounds.size.width, bounds.origin.y + bounds.size.height, innerRect.origin.x + innerRect.size.width, bounds.origin.y + bounds.size.height, radius);
CGPathAddLineToPoint(visiblePath, NULL, innerRect.origin.x, bounds.origin.y + bounds.size.height);
CGPathAddArcToPoint(visiblePath, NULL,  bounds.origin.x, bounds.origin.y + bounds.size.height, bounds.origin.x, innerRect.origin.y + innerRect.size.height, radius);
CGPathAddLineToPoint(visiblePath, NULL, bounds.origin.x, innerRect.origin.y);
CGPathAddArcToPoint(visiblePath, NULL,  bounds.origin.x, bounds.origin.y, innerRect.origin.x, bounds.origin.y, radius);
CGPathCloseSubpath(visiblePath);

// Fill this path
UIColor *aColor = [UIColor clearColor];
[aColor setFill];
CGContextAddPath(context, visiblePath);
CGContextSetBlendMode(context, kCGBlendModeSourceOut);
CGContextFillPath(context);

// Now create a larger rectangle, which we're going to subtract the visible path from
// and apply a shadow
CGMutablePathRef path = CGPathCreateMutable();
//(when drawing the shadow for a path whichs bounding box is not known pass "CGPathGetPathBoundingBox(visiblePath)" instead of "bounds" in the following line:)
//-42 cuould just be any offset > 0
CGPathAddRect(path, NULL, CGRectInset(bounds, -42, -42));

// Add the visible path (so that it gets subtracted for the shadow)
CGPathAddPath(path, NULL, visiblePath);
CGPathCloseSubpath(path);

// Add the visible paths as the clipping path to the context
CGContextAddPath(context, visiblePath);
CGContextClip(context);

// Now setup the shadow properties on the context
aColor = [UIColor colorWithRed:0.0f green:0.0f blue:0.0f alpha:0.5f];
CGContextSaveGState(context);
CGContextSetShadowWithColor(context, CGSizeMake(0.0f, 1.0f), 5.0f, [aColor CGColor]);

// Now fill the rectangle, so the shadow gets drawn
[aColor setFill];   
CGContextSaveGState(context);   
CGContextAddPath(context, path);
CGContextEOFillPath(context);

// Release the paths
//CGPathRelease(path);
CGPathRelease(visiblePath);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T02:08:27.830

看看我对一个关于在 UIImageView 中打孔的问题给出的答案：

[https://stackoverflow.com/a/8632731/341994](https://stackoverflow.com/a/8632731/341994)

请注意，它的工作方式是 UIImageView 的 superview 层有一个子层来进行遮罩，从而打孔。这意味着要为孔设置动画，您所要做的就是为该子层的移动设置动画。正如我的书中所述，Core Animation 很简单：

[http://www.aeth.com/iOSBook/ch17.html#_using_a_cabasicanimation](http://www.apeth.com/iOSBook/ch17.html#_using_a_cabasicanimation)

换句话说，如果您可以将您正在做的所有事情封装为一个图层，那么通过移动图层来为其设置动画是微不足道的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T01:59:31.727

按照您已经进行的设置，您要做的是将切口的位置存储在视图类（实现此`drawRect`方法的类）的实例变量中，并使用 NSTimer 定期更新位置。例如，在您的视图代码中，您可以像这样创建一个预定的计时器：

```
[NSTimer scheduledTimerWithTimeInterval:1.0/30.0 target:self selector:@selector(updateCutoutPosition) userInfo:nil repeats:YES]; 
```

然后实现更新方法：

```
- (void)updateCutoutPosition {
    // Do whatever you need to do to update the position of the cutout.
    [self setNeedsDisplay]; // Will cause drawRect to be called again soon.
} 
```

# javascript - 在 JavaScript 构造函数中分配“this”的值

> ID：15888623
> 
> 赞同：0
> 
> 时间：2013-04-08T20:43:25.577
> 
> 标签：javascript, html, canvas, this

我正在学习 JavaScript，目前正在使用 html5 canvas api。由于我首先必须创建画布元素，然后获得 2d/3d 上下文（即 2 个未连接的变量），因此创建将这两者合并为一个的东西似乎是合乎逻辑的。

想法是拥有图形（`gfx`）对象（实际上是上下文对象）并且`graphics.canvas`它是对画布元素的引用，这样我就可以做类似的事情`gfx.fillRect(0,0,150,75);`，也许可以用`gfx.canvas.width = x;`等重新调整画布的大小......

当我尝试创建一个构造函数时，它并没有真正奏效，我想出了一个解决方案来返回`context`具有 as 属性的对象，`canvas`但我不确定这是否是正确的方法。

**解决这个问题的最佳方法是什么？**

这是我的代码：

```
function Canvas (context, width, height) {
    var canvas = document.createElement('canvas'),
    contex = canvas.getContext(context);

    this = contex; // <<-- Getting error here
    this.canvas = canvas;

    this.canvas.width = width;
    this.canvas.height = height;

    this.append = function () {
        document.body.appendChild(this.canvas);
    };
}

function Canvas2 (context, width, height) {
    var canvas = document.createElement('canvas'),
    contex = canvas.getContext(context);

    contex.canvas = canvas;

    contex.canvas.width = width;
    contex.canvas.height = height;

    contex.append = function () {
        document.body.appendChild(this.canvas);
    };

    return contex;
}

var gfx = new Canvas('2d', 400, 400),
gfx2 = Canvas2('2d', 400, 400);

gfx.append();
gfx2.append(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T20:45:40.823

`this`是 JavaScript 中的保留字，指的是*只读的*上下文变量。您不能重新分配它。

如果没有理由不能简单地继续使用该`contex`变量，那就这样做。如果您需要创建一个局部变量，则将其命名为其他名称：

```
var that = contex; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-22T00:30:23.430

使用 ES2015 你可以做

```
Object.assign(this, contex) 
```

# c# - Excel：将单元格属性转储到数组

> ID：15888629
> 
> 赞同：0
> 
> 时间：2013-04-08T20:43:57.610
> 
> 标签：c#, excel, .net-3.5, vsto

我知道我可以快速将 excel 单元格的值转储到一个数组中，如下所示：

```
object[,] values = workSheet.UsedRange.Value2 as object[,]; 
```

我可以对单元格的属性而不是它们的值做类似的事情吗？例如，我想获取单元格颜色，但`object[,] cc = workSheet.UsedRange.Interior.Color as object[,];`结果`cc`为空。

遍历工作表以获取单元格属性需要更长的数量级。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-09T18:48:59.120

迟到总比不到好。简而言之，在没有代码存根的情况下，

将工作表另存为 xml 格式的文件。使用 xml 阅读器读取文件，在 xml 对象中查询 styleID（或您想要或需要的任何其他内容）。查询 styleID 的颜色属性，并与每个单元格匹配。xml 数据库上的 LINQ 查询应该只需要几行就可以完成所有这些操作。

# javascript - 关于 Ajax 响应的表单提交确定

> ID：15888630
> 
> 赞同：0
> 
> 时间：2013-04-08T20:44:10.363
> 
> 标签：javascript, ajax, forms

用户填写表格并单击提交按钮。数据被发送回服务器，并根据服务器服务器的响应提交或不提交表单（以及是否重定向页面）。问题是表单总是在收到服务器响应之前提交并且页面重定向。

```
 function SubmitForm(name, data1)
        {
            var result;
            var checkResult = function(result)
            {
                alert("final value is: "+result)
                return result
            }
            var xmlhttp
            if (window.XMLHttpRequest)
            {// code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp=new XMLHttpRequest();
            }
            else
            {// code for IE6, IE5
                xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
            }
            xmlhttp.onreadystatechange=function()
            {
                if(xmlhttp.readyState == 4 && xmlhttp.status == 200)
                {
                    if(xmlhttp.responseText)
                    {
                        result = true
                    }
                    else
                    {
                        document.getElementById("report").innerHTML = "blah blah blah"
                        result = false
                    }
                    checkResult(result)
                }
            }
            xmlhttp.open("POST", "Checkdata1.php", true);
            xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded")
            xmlhttp.send("name="+encodeURIComponent(name.value)+"&data1="+encodeURIComponent(data1.value))
            //return false
        } 
```

这是调用上述 JavaScript 函数的表单的 HTML。

```
<form onsubmit="return isPasswordCorrect(document.getElementById('name'), document.getElementById('txtField1'))" action="nextpage.php" method="GET"> 
```

我知道这个想法是让函数返回`false`以防止表单被提交，但我如何让它等待足够长的时间让服务器通过 Ajax 回复？顺便说一句，我不需要 JQuery，如果没有必要，我不想现在就开始使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:52:56.290

我会使用`<button>`不提交表单的（类型不是`"submit"`）：

```
<form ...>
...
<button onclick="SubmitForm(...)">Submit</button>
</form> 
```

然后在最后`SubmitForm`，你可以放：

```
document.querySelector("form").submit(); 
```

当您要提交表单时。

# highcharts - Highcharts - 如何防止带有换行符的长标题溢出字幕

> ID：15888631
> 
> 赞同：1
> 
> 时间：2013-04-08T20:44:10.487
> 
> 标签：highcharts

我有一个三种语言的图表，其中的数据是从数据库中填充的。一些翻译的标题会中断并填充两行。如果不采取任何预防措施，这将溢出字幕：

```
title: {
    text: 'The quick brown fox jumps over the lazy dog and even more',
    style: {
        width: '320px'
    }
},
subtitle: {
    text: 'Lorem ipsum dolor sit amet, consetetur sadipscing elitr'
}, 
```

请参阅此示例：http:  [//jsfiddle.net/puhtu/](http://jsfiddle.net/puhtu/)

如果主标题分成两行，有没有办法动态移动字幕？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:59:25.643

它看起来像一个错误，所以我已将其报告给我们的开发人员[https://github.com/highslide-software/highcharts.com/issues/1704](https://github.com/highslide-software/highcharts.com/issues/1704)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-22T12:57:46.727

虽然不久前，以下为我修复了它，因为这仍然是一个问题：

```
 title: {
                text: "Hello very strange world where people tend to make long chart titles",
                style: {
                    fontSize: '1.9vmin',
                    fontWeight: 'bold',
                    color: '#1381bc',
                    lineHeight: '15em' //This line did the trick
                },
                align: 'left',
                x: 30,
                y: 10
            }, 
```

# google-maps - 在 Fusion Tables 中将 Google 地图与自然地球数据集结合使用

> ID：15888633
> 
> 赞同：2
> 
> 时间：2013-04-08T20:44:22.637
> 
> 标签：google-maps, wordpress, geocoding, google-fusion-tables

我正在尝试为 wordpress 创建一个插件，它只需要在帖子或页面创建中输入一组国家名称（很像标签），并使用 Google Maps APIv3 生成地图，突出显示所有国家（使用来自自然地球数据集），但我在寻找有关如何将这两种技术合并在一起的资源方面非常缺乏。

我非常熟悉 Google Maps API 以及如何使用 PHP 在 wordpress 中操作它，并且变量提供了 post 对象，但我似乎无法弄清楚如何将它与自然地球数据集中提供的数据合并。

我偶然发现了这些，但仍然无法弄清楚。

[使用 Google Map API v3 的国家边界](https://stackoverflow.com/questions/10888958/country-boundries-using-google-map-api-v3)

[Google Maps V3：绘制德国州多边形？](https://stackoverflow.com/questions/10874686/google-maps-v3-draw-german-state-polygons)

[http://www.geocodezip.com/geoxml3_test/v3_FusionTables_query_sidebarF_local.html?country=Germany](http://www.geocodezip.com/geoxml3_test/v3_FusionTables_query_sidebarF_local.html?country=Germany)

最后一个链接非常接近我想要做的，除了多个国家，这只是以国家的形式添加更多 POI 的问题。但我不能让它在我的网站上工作。

有谁知道如何做到这一点的任何好的教程？或者更好的是，有没有人已经成功地完成了这种类型的事情？

这是我目前拥有的：

```
<head>

<script type="text/javascript"src="https://maps.googleapis.com/maps/api/&sensor=false"></script>

        <script type="text/javascript">
          function initialize() {
        map = new google.maps.Map(document.getElementById('map-canvas'), {
          center: new google.maps.LatLng(27.246933444275317, 318.515625),
          zoom: 2,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        });

        layer = new google.maps.FusionTablesLayer({
          map: map,
          heatmap: { enabled: false },
          query: {
            select: "col38",
            from: "19lLpgsKdJRHL2O4fNmJ406ri9JtpIIk8a-AchA",
            where: "col2 in (\x27CAN\x27, \x27MEX\x27, \x27USA\x27, \x27JPN\x27
    )"
          },
          options: {
            styleId: 9,
            templateId: 8
          }
        });
      }

      google.maps.event.addDomListener(window, 'load', initialize);
        </script>
<head>

<body>
      <div id="map-canvas" style="width: 100%; height: 400px;"></div>
</body> 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T22:50:53.110

我认为您需要“IN”运算符：

[例子](https://www.google.com/fusiontables/embedviz?viz=MAP&q=select+col38+from+19lLpgsKdJRHL2O4fNmJ406ri9JtpIIk8a-AchA+where+col2+in+%28%27CAN%27%2C+%27MEX%27%2C+%27USA%27%29&h=false&lat=27.246933444275317&lng=318.515625&z=2&t=1&l=col38&y=9&tmplt=8)

我建议使用“iso”列来减小查询字符串的大小。

[你的代码对我有用](http://www.geocodezip.com/v3_FusionTables_multipleCountriesA.html)

注意：我确实修复了这个“未终止的字符串”：

```
 where: "col2 in (\x27CAN\x27, \x27MEX\x27, \x27USA\x27, \x27JPN\x27
)" 
```

允许选择多个国家的示例：

[http://www.geocodezip.com/v3_FusionTables_MultiCountryBrowser.html?countries=阿富汗、阿尔巴尼亚、阿尔及利亚、巴西](http://www.geocodezip.com/v3_FusionTables_MultiCountryBrowser.html?countries=Afghanistan,Albania,Algeria,Brazil)

# jquery - 为什么只有存在某些类时我才能附加图像？

> ID：15888634
> 
> 赞同：1
> 
> 时间：2013-04-08T20:44:24.690
> 
> 标签：jquery, append

我正在尝试仅在三个类之一存在时才使用 jQuery 将图像标记附加到 div，但它似乎不起作用。它要么附加到所有元素，要么根本不附加。

这是HTML代码：

```
<figure class="donut minus">
    <div class="figure-value"></div>
</figure> 
```

这是jQuery：

```
if ($("figure.donut").hasClass("minus") || $("figure.donut").hasClass("plus") || $("figure.donut").hasClass("plus-minus")) {
        $(".figure-value").append('<img src="../images/schoolProfile/donut-plus-minus.png" />');
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T20:50:02.183

而不是 if 尝试使用过滤器：

```
$("figure.donut")
    .filter(".plus, .minus, .plus-minus")
    .find(".figure-value")
    .append('<img src="../images/schoolProfile/donut-plus-minus.png" />'); 
```

这将找到所有带有 donut 类和 plus、minus 或 plus-minus 的图形，然后找到其中带有一个 figure-value 类的元素并附加图像。

JSFiddle 示例 - [http://jsfiddle.net/7FUam/](http://jsfiddle.net/7FUam/)

在回答下面的评论时，更改附加以创建一个 jQuery 对象并将 css 应用于该对象：

```
.append($('<img src="../images/schoolProfile/donut-plus-minus.png" />')
            .css({"top": -100+"px", "left": 0+"px"})); 
```

更新示例 - [http://jsfiddle.net/infernalbadger/7FUam/1/](http://jsfiddle.net/infernalbadger/7FUam/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T20:46:07.360

在这部分代码中：

```
$(".figure-value").append('<img src="../images/schoolProfile/donut-plus-minus.png" />'); 
```

您正在选择具有类别的所有元素`.figure-value`并附加图像。

解决方案是这样使用`$.each`(`$.each`允许您迭代元素集合并执行操作：

```
$('figure').each(function(){
    if ( $(this).hasClass('plus') ) {
        $(this).find('.figure-value')
        .append('<img src="http://placehold.it/125x125" />');   
    }
}); 
```

这是一个小提琴：http: [//jsfiddle.net/mV56V/1/](http://jsfiddle.net/mV56V/1/)

这个例子将获取每个`figure`元素并检查它是否有一个类`.plus`- 如果元素有一个`.plus`类，则会在它的相关`.figure-value`元素中插入一个图像。

# c# - Entity Framework 的 SQL 运算符函数对 SQL 注入安全吗？

> ID：15888635
> 
> 赞同：10
> 
> 时间：2013-04-08T20:44:24.910
> 
> 标签：c#, entity-framework, sql-injection

这些函数允许访问 SQL 中的特殊函数 (SqlClient)。例如“喜欢”或“之间”。它们还为它们提供了一个更好的通用抽象层。不要与另一个[问题](https://stackoverflow.com/questions/11107456/do-entity-framework-functions-automatically-escape-input-to-protect-against-inje)的主题存储过程“函数”相混淆。

我似乎无法找到完整答案的问题是。它们可以安全使用，还是我将系统打开到[SQL 注入攻击](http://en.wikipedia.org/wiki/SQL_injection)？在编写常规 SqlCommands 时，我总是使用绑定变量。

但是在转向实体框架。对 SQL 语句的控制较少。我不介意，但是当我连接来自浏览器的字符串并将其传递给函数时，我不禁担心。

这是一个例子：

```
var QueryResult = EFContext.Table.Where(x => 
    SqlFunctions.PatIndex("%" + Potentially_unsafe_search_keyword + "%", 
                          x.Column) > 0); 
```

我做了一些测试并跟踪了发送到服务器的实际 SQL。单引号会自动转义。所以很明显那里有一些保护。正在进行一些消毒。插入语句确实使用绑定变量。我应该满足于单引号替换吗？幕后还有其他事情发生吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T06:03:12.620

Linq 中的每个常量、变量、参数都作为 IDbCommand 中的命令参数传递，而这些参数又被底层驱动程序转义。

除非存在错误，否则所有 EF 查询和 SQL 帮助函数都可以安全地抵御 SQL 注入攻击。

# linux - 为什么 strftime 大写标志 '^' 不起作用？

> ID：15888636
> 
> 赞同：0
> 
> 时间：2013-04-08T20:44:27.093
> 
> 标签：linux, perl, unix, solaris

我有以下命令`$(perl -e 'use POSIX;print strftime "%d-%^b-%Y",localtime time-86400;')`适用于 Red Hat Linux 机器，但不适用于 Sun Solaris 9 机器。

问题 1：从我[在这里](http://linux.die.net/man/3/strftime)读到的内容，'^' 是由 glibc 提供的......这是正确的吗？

问题 2：我如何找出它在 Solaris 机器上不起作用的原因？（最终，我该如何让它发挥作用？）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T21:06:21.203

Solaris 不是*Linux*，虽然它是 Unix :-)，系统调用在不同系统上的行为不同，这就是为什么你会在 C 程序中看到很多 #ifdef。您可以在 RedHat 和 Solaris 上编译[一些时间函数的 C 示例](http://www.gnu.org/software/libc/manual/html_node/Time-Functions-Example.html)并查看差异（将 %B 转换为 %^B，您将看到它不会以大写形式打印）。最好的解决方案是使用 Perl 的`uc`函数。

# indexing - 多个索引同一列sql

> ID：15888637
> 
> 赞同：0
> 
> 时间：2013-04-08T20:44:27.693
> 
> 标签：indexing, db2

对于 DB2 数据库，将表`tbl`( `colA`, `colB`, `colC`) 和查询视为

```
select *
 from tbl
where tbl.colA = 1234.

select *
from tbl
where tbl.colA =1234
and tbl.colB = 73874 
```

`colA` 如果我们在ii) 复合上创建两个索引 i) 会有帮助吗？`colA,colB`

如果上面的 sql 经常被访问，那么上面有两个索引会有所帮助。优化器是否会根据查询选择正确的索引。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T20:52:40.040

您只需要索引 (ii)。只要搜索数据位于列的前缀中，就会使用复合索引。因此，当您搜索、、和时，`colA,colB,colC,colD`将使用on 的索引。`colA``colA and colB``colA, colB, and colC``colA, colB, colC, and colD`

# php - 使用 Propel 和 Backbone 的多行 toJSON 函数

> ID：15888640
> 
> 赞同：2
> 
> 时间：2013-04-08T20:44:39.207
> 
> 标签：php, json, orm, propel, slim

我正在尝试使用 Propel ORM 制作一个非常简单的“列出所有”功能 - 供 Backbone.js 阅读。这就是我想要做的，在我看来，应该工作：

```
$users = UsersQuery::create()
->find();

echo $users->toJSON(); 
```

但是，当我运行它时，我得到的结果是：

```
{"Users_0":{"Id":1,"EmailAddress":"sdf","Password":"sdf","CreatedAt":null,"ModifiedAt":null},
"Users_1":{"Id":2,"EmailAddress":"dsf","Password":"sdf","CreatedAt":null,"ModifiedAt":null}} 
```

虽然它是有效的 JSON，但每一行都是主数组中的一个数组这一事实正在抛弃我的 JSON。我需要它返回的是这样的 JSON：

```
[{"Id":1,"EmailAddress":"sdf","Password":"sdf","CreatedAt":null,"ModifiedAt":null},{"Id":2,"EmailAddress":"dsf","Password":"sdf","CreatedAt":null,"ModifiedAt":null}] 
```

我已经创建了以下函数（作为测试）并且它运行良好，但肯定 Propel（或 Slim，我正在使用的框架）有办法阻止数组中的所有内容？这里是黑客；

```
$users = UsersQuery::create()
->find();

$json = '[';
foreach($users as $user){
    $json = $json.$user->exportTo('JSON').',';
}
$json = $json.']';
echo str_replace("},]", "}]", $json); 
```

任何帮助将不胜感激！谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T22:08:04.140

我不想这么说，但我认为这只是“Propel 就是这样工作的”情况之一。也就是说，您可以稍微改进您的辅助功能以使其更加健壮。

我会把这段代码放在你的 UserQuery 类中：

```
class UsersQuery extends BaseUsersQuery {
  ...

  public function toJSONArray() {
    $users = $this->find();
    $userArray = array();
    foreach($users as $user){
      array_push($userArray, $user->toArray());
    }
    return json_encode($userArray);
  }
} 
```

然后像这样使用它...

```
$userJSON = UsersQuery::create()->toJSONArray(); 
```

或者，如果您有其他标准...

```
$userJSON = UsersQuery::create()
              ->filterBySomeField("someValue")
              // other Criteria ...
              ->toJSONArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T07:23:38.143

是否有可能的解决方案在一个语句中使用这个和一个选择过滤器。像这样的东西：

```
 $ojson = TblproductQuery::create()
        ->select(array('ProdtID', 'DivnID'))
        ->toJsonArray(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-19T22:33:23.073

接受的答案没有解决的一件事是当您有一个带有嵌套集合的对象时。就像你有一堆测试一样，答案是这样的：

```
[
  {
    id:test1,
    answers : [
      { id: 1, answer: pig},
      { id: 2, answer: dog}
    ]
  },
  {
    id:test2,
    answers : [
      { id: 5, answer: duck},
      { id: 6, answer: swan}
    ]
  }
] 
```

当您尝试使用已接受的答案时，上述内容无法与骨干集合很好地配合。`PropelCollection::toArray()`这是因为每个推进模型都会在其自身的任何推进集合上 调用该方法

该`PopelCollection::toArray()`方法只会将自身作为 php 中的关联数组返回，该数组将转换为 JSON 中的未排序集，而不是数组。主干集合仅排序（数组）。

为了解决这个问题，我只是将`toArray()`propel 源文件`PropelCollection.php`中的方法更改为以下内容：

```
public function toArray(
    $keyColumn = null, 
    $usePrefix = false, 
    $keyType = BasePeer::TYPE_PHPNAME, 
    $includeLazyLoadColumns = true, 
    $alreadyDumpedObjects = array()){

  $ret = array();
  foreach ($this as $key => $obj) {
    array_push($ret, $obj->toArray($keyType, $includeLazyLoadColumns, 
      $alreadyDumpedObjects, true);
  }

  return $ret;
} 
```

我还没有看到这如何影响 toXML 或 toYAML 方法，但它允许 toJSON 方法像我上面的示例一样使用嵌套集合。

# python - 设置 GAE 命名空间

> ID：15888643
> 
> 赞同：0
> 
> 时间：2013-04-08T20:44:51.297
> 
> 标签：python, google-app-engine, namespaces

此功能在交互式控制台上运行良好：

```
from google.appengine.api import namespace_manager
from google.appengine.ext import db

namespace_manager.set_namespace("some_namespace")

class Class(db.Model):
    c = db.StringProperty()

x = Class(c="text")
x.put() 
```

但是当登录执行时，`namespace_manager.set_namespace(user.namespace)`所有检索并存储在数据存储中的数据都属于根（空）命名空间。

这提出了问题

1.  我是否设置了错误的命名空间？
2.  我是否必须在每次检索和存储数据之前设置它（在留言簿示例中不是这种情况）
3.  如果在服务器端设置了 namespece，它如何知道哪个 post/get() 属于哪个命名空间？

请不要将我指向此链接：[https](https://developers.google.com/appengine/docs/python/multitenancy/multitenancy) ://developers.google.com/appengine/docs/python/multitenancy/multitenancy文档非常...

**编辑** 这回答了这个问题

> “set_namespace(namespace) 设置当前 HTTP 请求的命名空间。”

我想“为什么留言簿示例不同”的答案在`appengine_config.py`.

现在唯一的问题是 - 登录用户时，他必须能够读取根命名空间，所以显然我必须将用户数据存储在根命名空间中，但是一旦他登录并且他的命名空间设置为特定的东西，我的 cookie 检查功能无法访问根命名空间并导致错误。

我该如何解决？（感觉像是在自言自语）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:54:08.743

您将需要在处理程序函数中设置命名空间，因为如果您在导入下设置命名空间，例如，该部分代码将被缓存并且不会为每个请求重新执行。如果您将其设置在代码的非动态部分中，则相同。

所以我认为发生的是第一次加载代码时没有用户并且命名空间不会改变。当然它可以在交互式控制台中工作，因为整个代码部分都会被执行。

```
# this will be the namespace of the user when the code loads or nothing
# and it will never change as long as the instance is up
namespace_manager.set_namespace(user.namespace)  

class YourHandler(webapp2.RequestHandler):
    def get(self):
       # get the user....
       namespace_manager.set_namespace(user.namespace)
       # setting the namespace here will change it for each request. 
```

# c# - 使方法异步

> ID：15888644
> 
> 赞同：1
> 
> 时间：2013-04-08T20:44:51.377
> 
> 标签：c#, async-await, bing-api

我有一个调用 Bing Api 的方法。

```
IEnumerable<WebResult> Search(string query) 
```

我想让这个异步，这样如果我对它进行多次调用，每个调用都是独立的。因此，按照[此处](http://msdn.microsoft.com/en-gb/library/vstudio/hh191443.aspx)的建议，我将签名更改为

```
async Task<IEnumerable<WebResult>> SearchAsynch(string query) 
```

但我收到警告

```
This async method lacks 'await' operators and will run synchronously... 
```

我希望整个方法是异步的（至少我认为它应该是这样工作的）。我怎么做？这是我的代码

```
public async Task<IEnumerable<WebResult>> SearchAsynch(string query)
        {
            if (query == null)
            {
                throw new ArgumentNullException("query cannot be null");
            }

            DataServiceQuery<WebResult> webQuery = _bingContainer.Web(query, null, null, null, null, null, null, null);
            IEnumerable<WebResult> webResults = webQuery.Execute();
            return webResults;
        } 
```

问题是我不确定在这段代码中要等待什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T21:00:04.793

该`async`关键字不会创建新的异步操作，它只是一种更轻松地为已经存在的任务（即异步操作）配置延续的方法。

在这种情况下，`DataServiceQuery`该类已经提供了一种异步执行查询的方法。不幸的是，它使用的是旧的异步模型，而不是新`Task`的基于模型，所以你需要使用`Task.Factory.FromAsync`它来翻译它：

```
public Task<IEnumerable<WebResult>> SearchAsynch(string query)
{
    DataServiceQuery<WebResult> webQuery = _bingContainer.Web(query, null, null, null, null, null, null, null);

    return Task.Factory.FromAsync(webQuery.BeginExecute(null, null)
        , asyncResult => webQuery.EndExecute(asyncResult)));

} 
```

`async`在这种特殊情况下，因为除了创建不需要或根本不需要的任务之外您不需要做任何事情`await`，您可以只返回构造的任务。如果你想在得到结果后做某事，你可以改为`await`任务：

```
public async Task<IEnumerable<WebResult>> SearchAsynch(string query)
{
    DataServiceQuery<WebResult> webQuery = _bingContainer.Web(query, null, null, null, null, null, null, null);
    var results = await Task.Factory.FromAsync(webQuery.BeginExecute(null, null)
            , asyncResult=> webQuery.EndExecute(asyncResult));
    Console.WriteLine("Hi there");
    return results;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-08T20:53:26.417

我对 Bing API 不是很熟悉，但是如果 API 不包含异步方法，您可以通过将调用包装在 started 中来实现异步`Task`。`async`修饰符不会使您的方法自动异步，它只允许`await`内部的其他异步方法。

因此，就您而言，这可能是最简单的：

```
public Task<IEnumerable<WebResult>> SearchAsync(string query)
    {
        if (query == null)
        {
            throw new ArgumentNullException("query cannot be null");
        }

        return Task.Run(() => 
            {
                DataServiceQuery<WebResult> webQuery = _bingContainer.Web(query, null, null, null, null, null, null, null);
                return webQuery.Execute();
            }
    } 
```

然后你可以`await`在其他方法中将此方法标记为`async`：

```
var result = await SearchAsync("yourQuery"); 
```

如果 Bing API 具有异步方法对`Begin/End`，您可以使用`Task.Factory.FromAsync`从异步方法对创建任务。Servy 的回答在那里更详细。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T20:52:15.300

根据 MSDN

> 通常，由 async 关键字修改的方法至少包含一个 await 表达式或语句。该方法同步运行，直到它到达第一个等待表达式，此时它被挂起，直到等待的任务完成。同时，控制权返回给方法的调用者。如果该方法不包含等待表达式或语句，则它会同步执行。编译器警告会提醒您注意任何不包含 await 的异步方法，因为这种情况可能表示错误。有关详细信息，请参阅编译器警告（级别 1）CS4014。

编辑：我想我会添加到这个，但它已经在这篇文章的评论部分。标记为 的方法在遇到关键字`async`之前实际上不会异步运行。`await`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-03T04:27:46.263

这是在独立项目中使用异步的示例。

```
private async void button2_Click(object sender, EventArgs e)
{
    DataTable dtMessages = await getMessages2(string sqlConn2, nMessage);
}
public async Task<DataTable> getMessages2(string sqlConn, int n)
{
    //create your query and command
    var o = await cmd2.ExecuteReaderAsync();
    DataTable dtMessages = o;
    return dtMessages;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-08T20:50:30.173

该警告只是告诉您，无论您在哪里调用 SearchAsynch，它都需要在它之前等待。

`var result = await SearchAsynch(query);`

但是，SearchAsynch 没有像其他人所说的那样正确实现。

# python - 是否可以使用熊猫在数据框中的任意位置插入一行？

> ID：15888648
> 
> 赞同：82
> 
> 时间：2013-04-08T20:45:01.703
> 
> 标签：python, pandas

我有一个类似于这个的 DataFrame 对象：

```
 onset    length
1      2.215    1.3
2     23.107    1.3
3     41.815    1.3
4     61.606    1.3
... 
```

我想做的是在某个索引值指定的位置插入一行，并相应地更新以下索引。例如：

```
 onset    length
1      2.215    1.3
2     23.107    1.3
3     30.000    1.3  # new row
4     41.815    1.3
5     61.606    1.3
... 
```

最好的方法是什么？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2013-04-08T21:10:49.017

你可以切片并使用 concat 来得到你想要的。

```
line = DataFrame({"onset": 30.0, "length": 1.3}, index=[3])
df2 = concat([df.iloc[:2], line, df.iloc[2:]]).reset_index(drop=True) 
```

这将在您的示例输出中生成数据框。据我所知， concat 是在 pandas 中实现插入类型操作的最佳方法，但不可否认，我绝不是 pandas 专家。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2018-07-27T15:22:28.707

我发现排序而不是切片和连接更具可读性。

```
line = DataFrame({"onset": 30.0, "length": 1.3}, index=[2.5])
df = df.append(line, ignore_index=False)
df = df.sort_index().reset_index(drop=True) 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2020-09-04T06:57:09.877

我认为没有 concat 或 append 会更容易：

```
df.loc[2.5] = 30.0, 1.3
df = df.sort_index().reset_index(drop=True) 
```

（假设索引如提供，从1开始）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-10-23T09:14:39.060

```
line = DataFrame({"onset": 30.0, "length": 1.3}, index=[3])
df2 = concat([df.iloc[:2], line, df.iloc[3:]]).reset_index(drop=True) 
```

此解决方案正在替换该索引值，我只想添加一个索引而不替换索引值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-21T21:45:55.563

如果您想保留原始索引，这可能会更好：

```
df = pd.DataFrame(dict(x=[0, 1, 2, 3, 4]))
df_update = pd.DataFrame(dict(x=[10, 11, 12]), index=[3, 4, 5])

# concat df_update first
df = pd.concat([df_update, df], axis=0)

# drop duplicates, updates will be prioritized
df = df.iloc[df.index.drop_duplicates()]

# sort to regain order
df.sort_index(inplace=True) 
```

# php - 使用 php 在 Windows 资源管理器中启动文件夹

> ID：15888651
> 
> 赞同：0
> 
> 时间：2013-04-08T20:45:24.133
> 
> 标签：php, command

嗨，我正在尝试在 Windows 资源管理器中启动一个文件夹，但似乎可以正常工作我正在尝试的代码是

```
$contain_path = 'E:\Something\Some Folder';
$folder = '9999 - Some Folder Name Here';
$command = 'explorer "'.$contain_path.'\\'.$folder.'\\"';
system($command,$var); 
```

我什至尝试过，但没有成功

```
system($command,$var); 
```

它只是一个本地 wampserver 项目。我正在这样做，当我按下按钮时。ajax 脚本调用 php 页面，然后 php 页面执行上面的代码，然后弹出资源管理器窗口，就像我通过命令提示符执行上面给出的命令一样。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-05-04T02:47:17.663

这是这个问题的答案。我假设 PHP 代码将在 Windows PC 上运行。**如果用户正在运行WAMP**或类似设置，则可能出现这种情况。

```
<?PHP

$file_location = 'C:\Users\User\Documents';
exec("start \"\" \"{$file_location}\"");

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T20:47:06.497

最快的猜测`explorer`应该是`c:\windows\explorer.exe`

# php - 无法使用 php 将 android 应用程序连接到 mysql 错误与我的 android 代码有关

> ID：15888653
> 
> 赞同：0
> 
> 时间：2013-04-08T20:45:28.523
> 
> 标签：php, android

```
import android.os.Bundle;

import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import java.io.IOException;
import java.io.UnsupportedEncodingException;
import java.util.ArrayList;
import java.util.List;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;

import android.os.StrictMode;
import android.util.Log;
import android.widget.EditText;

public class login extends Activity {
Button button2;

@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_login);
EditText breakfast= (EditText)  findViewById(R.id.breakfast) ;
        EditText lunch = (EditText) findViewById(R.id.lunch);
        EditText dinner = (EditText) findViewById(R.id.dinner);
        EditText supper = (EditText) findViewById(R.id.supper);
        Button button = (Button) findViewById(R.id.button1) ;

        final String breakf = breakfast.getText().toString();
        final String lun = lunch.getText().toString();
        final String din = dinner.getText().toString();
        final String sup = supper.getText().toString();
button2=(Button)this.findViewById(R.id.button2);
button2.setOnClickListener(new OnClickListener() {
@Override
public void onClick(View arg0) {
   // generate your params:
   List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
   nameValuePairs.add(new BasicNameValuePair("breakfast", breakf));
   nameValuePairs.add(new BasicNameValuePair("Lunch", lun));
   nameValuePairs.add(new BasicNameValuePair("Dinner", din));
   nameValuePairs.add(new BasicNameValuePair("supper", sup));

   // send them on their way
   try {
       DefaultHttpClient httpClient = new DefaultHttpClient();

       HttpPost httpPost = new HttpPost("http://blahblah php?$username=caroline$password=scamper"); 
```

我有一个合适的网址，我只是把它删掉了

```
 // httpPost.setEntity(new UrlEncodedFormEntity(nameValueParams));

       HttpResponse httpResponse = httpClient.execute(httpPost);
       HttpEntity httpEntity = httpResponse.getEntity();

   } catch (UnsupportedEncodingException e) {
       e.printStackTrace();
   } catch (ClientProtocolException e) {
       e.printStackTrace();
   } catch (IOException e) {
       e.printStackTrace();
   }
}});}
//@Override
        public void onClick(View v) {
finish();
System.exit(0);
}
});
Intent intent = new Intent(Login.this, .class);
Login.this.startActivity(intent);
//new lister for save start db code their
//take info from button with sql

   @Override
   public void onClick(View arg0) {
       // TODO Auto-generated method stub
       postData();
});

   //
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
// Inflate the menu; this adds items to the action bar if it is present.
getMenuInflater().inflate(R.menu.main, menu);
return true;
} 
```

我知道我有一些错误，但我一直在改变它并且无法弄清楚为什么它不会改变任何帮助将非常感谢 php 应该可以工作我没有从应用程序中获得任何信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:37:32.723

您不应该在主线程中调用网络连接。尝试使用 AsyncTask 以在后台线程上运行网络操作。

像这样试试

```
Class Login extends Activity
{
   protected void onCreate(Bundle savedInstanceState) 
   {
     button2.setOnClickListener(new OnClickListener() 
     {
       public void onClick(View arg0) 
       {
         Task t = new Task();
         t.execute();
       }
   }
   class Task extends AsyncTask<ArgType,ArgType,ArgType>
   {
     protected type doInBackground(ArgType... urls) 
     {
       try
       {
          //initiate httpconnection and get result
       }
       catch
       {
       }
     }
     protected void onPostExecute(ArgType result) 
     {
       //update some view or do some thing when background thread work is done
     }
   }
} 
```

或者您可以参考[http://www.android-ever.com/2012/10/android-asynctask-example.html](http://www.android-ever.com/2012/10/android-asynctask-example.html)了解更多关于 AsyncTask 的信息。

# java - Java 对 for each 或 for 循环执行 while 循环

> ID：15888655
> 
> 赞同：3
> 
> 时间：2013-04-08T20:45:36.583
> 
> 标签：java, sling

我对 Java 很陌生，并试图弄清楚如何将下面的代码转换为 for 循环或 for each 循环。

```
do {
    testPages.push(testParentPage);
    if(homePage != null && testParentPage.getPath().equals(homePage.getPath())){
        isParent = true;
        break;
    }
} while((testParentPage = testParentPage.getParent()) != null); 
```

任何帮助是极大的赞赏！谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T20:51:29.067

它可以在 for 循环中重写，如下所示：

```
for (; testParentPage != null; testParentPage = testParentPage.getParent()) {
    testPages.push(testParentPage);
    if(homePage != null && testParentPage.getPath().equals(homePage.getPath())){
        isParent = true;
        break;
    }
} 
```

我想我必须承认我不知道它是否有任何好处。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-08T20:51:37.750

尝试

```
for(; testParentPage != null; testParentpage = testParentPage.getParent()) {
    ...
} 
```

for循环结构是（变量初始化；布尔测试；赋值）——通常变量是整数，测试是<或>，赋值是增量，但不一定是这样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T20:52:26.383

实际上，`do .. while`在这种情况下，循环看起来非常合适。如果你有一个“正常”的集合或给你一个迭代器的东西，一个`for`或`foreach`循环将是选择的工具。但在这种情况下（向上导航树结构）使用`for`循环恕我直言实际上会令人困惑。

除此之外，`for`循环的条件总是在执行循环体*之前进行评估。*由于您需要至少执行一次主体，这会使事情变得更加困难和/或复杂。

编辑：当然，在循环开始时执行空值检查实际上可能是有意义的，因为您`testParentPage`在循环体中调用了一个方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T20:52:49.693

**回复：for-each 循环。**

for each 循环遍历 Collection 或数组[（请参阅文档）](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)，因此您将无法（立即）将您的 do-while 循环转换为 for-each 循环，因为您正在遍历自定义的层次结构。

如果您有一个`List<TestPageParent>`（或任何类型的名称），它将起作用。也会`TestPageParent[]`。或`Collection<TestPageParent>`。

# c# - 无法弄清楚如何创建一个 get set 语句

> ID：15888657
> 
> 赞同：0
> 
> 时间：2013-04-08T20:45:40.943
> 
> 标签：c#, forms, combobox

我试图`get` `set`发表声明，但它不起作用。我不知道为什么。基本上我有一个名为的表单`form1`，其中包含一个带有名称和一个按钮的组合框。

该按钮会打开一个`form2`包含文本框的新表单。我希望能够将文本框中的文本添加到`form1`. 我在网上搜索了一下，发现为了做到这一点，我需要创建`get`和`set`声明，而不是玩弄控件的隐私。

`set`and`get`语句不起作用。它说只有赋值调用递增递减和新对象可以用作语句。

非常感谢您的帮助。

```
public string GuideNameFunc(){
    Get { return GuideName.Text; }
    set { GuideName.Text = value; }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T21:08:53.477

只需将其`()`从您的代码中删除即可。

```
public string GuideNameFunc{
    get { return GuideName.Text; }
    set { GuideName.Text = value; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T21:07:50.553

```
public string GuideNameField{
    get { return GuideName.Text; }
    set { GuideName.Text = value; }
} 
```

# asp.net - 更新 2 后发布到文件夹消失 - Visual Studio

> ID：15888659
> 
> 赞同：2
> 
> 时间：2013-04-08T20:45:48.563
> 
> 标签：asp.net, visual-studio-2012, web, publish

正如我一直在做右键单击项目

单击发布站点，但仅出现以下屏幕。没有定期发布到文件夹选项。

![在此处输入图像描述](https://i.stack.imgur.com/LtBiW.png)

这发生在 Visual Studio 2012 Update 2 之后

如何解决这个问题呢 ？

![在此处输入图像描述](https://i.stack.imgur.com/G6KYG.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:38:16.957

单击下拉菜单并使用所需设置创建一个新配置文件。

# c - “开始”的存储大小未知

> ID：15888672
> 
> 赞同：0
> 
> 时间：2013-04-08T20:46:41.743
> 
> 标签：c

`error: storage size of 'start' isn't known`当我编译我的程序时，我有这个消息。错误在这里：

```
struct _timeb start, finish; 
```

当我放置声明和原型时，我制作了一个头文件

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/timeb.h>
#include <time.h> 
```

在我的 .c 文件中，我把

```
#include "image.h"
#include <math.h> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T20:48:34.987

这通常表明尚未遇到所提及结构的描述，因此您正在尝试创建编译器尚不知道的类型的变量。您可能缺少标题：

```
#include <sys/timeb.h> 
```

# php - 精细上传器实现

> ID：15888673
> 
> 赞同：1
> 
> 时间：2013-04-08T20:46:52.420
> 
> 标签：php, web-applications, fine-uploader

我有我的`HTML`文件：

```
<html>
  <head>
    <meta charset="utf-8">
    <title>Fine Uploader Demo</title>
    <link href="fineuploader-3.4.1.css" rel="stylesheet">
  </head>
  <body>
    <div id="fine-uploader"></div>
   <script src="jquery-1.7.2.min.js"></script>
    <script src="jquery.fineuploader-3.4.1.js"></script>
    <script>

      function createUploader() {
       var uploader = new qq.FineUploader({
          // Pass the HTML element here
         element: document.getElementById('fine-uploader'),
          // or, if using jQuery
          // element: $('#fine-uploader')[0],
          // Use the relevant server script url here
          // if it's different from the default “/server/upload”
         request: {
            endpoint: 'qqFileUploader'
          }
        });
      }

      window.onload = createUploader;
    </script>
  </body>
</html> 
```

我的 PHP 代码 qqFileUploader.php

```
<?php

class qqFileUploader {

    public $allowedExtensions = array();
    public $sizeLimit = null;
    public $inputName = 'qqfile';
    public $chunksFolder = 'chunks';

    public $chunksCleanupProbability = 0.001; // Once in 1000 requests on avg
    public $chunksExpireIn = 604800; // One week

    protected $uploadName;

    function __construct(){
        $this->sizeLimit = $this->toBytes(ini_get('upload_max_filesize'));
    }

    /**
     * Get the original filename
     */
    public function getName(){
        if (isset($_REQUEST['qqfilename']))
            return $_REQUEST['qqfilename'];

        if (isset($_FILES[$this->inputName]))
            return $_FILES[$this->inputName]['name'];
    }

    /**
     * Get the name of the uploaded file
     */
    public function getUploadName(){
        return $this->uploadName;
    }

    /**
     * Process the upload.
     * @param string $uploadDirectory Target directory.
     * @param string $name Overwrites the name of the file.
     */
    public function handleUpload($uploadDirectory, $name = null){

        if (is_writable($this->chunksFolder) &&
            1 == mt_rand(1, 1/$this->chunksCleanupProbability)){

            // Run garbage collection
            $this->cleanupChunks();
        }

        // Check that the max upload size specified in class configuration does not
        // exceed size allowed by server config
        if ($this->toBytes(ini_get('post_max_size')) < $this->sizeLimit ||
            $this->toBytes(ini_get('upload_max_filesize')) < $this->sizeLimit){
            $size = max(1, $this->sizeLimit / 1024 / 1024) . 'M';
            return array('error'=>"Server error. Increase post_max_size and upload_max_filesize to ".$size);
        }

        // is_writable() is not reliable on Windows (http://www.php.net/manual/en/function.is-executable.php#111146)
        // The following tests if the current OS is Windows and if so, merely checks if the folder is writable;
        // otherwise, it checks additionally for executable status (like before).

        $isWin = (strtoupper(substr(PHP_OS, 0, 3)) === 'WIN');
        $folderInaccessible = ($isWin) ? !is_writable($uploadDirectory) : ( !is_writable($uploadDirectory) && !is_executable($uploadDirectory) );

        if ($folderInaccessible){
            return array('error' => "Server error. Uploads directory isn't writable" . (!$isWin) ? " or executable." : ".");
        }

        if(!isset($_SERVER['CONTENT_TYPE'])) {
            return array('error' => "No files were uploaded.");
        } else if (strpos(strtolower($_SERVER['CONTENT_TYPE']), 'multipart/') !== 0){
            return array('error' => "Server error. Not a multipart request. Please set forceMultipart to default value (true).");
        }

        // Get size and name

        $file = $_FILES[$this->inputName];
        $size = $file['size'];

        if ($name === null){
            $name = $this->getName();
        }

        // Validate name

        if ($name === null || $name === ''){
            return array('error' => 'File name empty.');
        }

        // Validate file size

        if ($size == 0){
            return array('error' => 'File is empty.');
        }

        if ($size > $this->sizeLimit){
            return array('error' => 'File is too large.');
        }

        // Validate file extension

        $pathinfo = pathinfo($name);
        $ext = isset($pathinfo['extension']) ? $pathinfo['extension'] : '';

        if($this->allowedExtensions && !in_array(strtolower($ext), array_map("strtolower", $this->allowedExtensions))){
            $these = implode(', ', $this->allowedExtensions);
            return array('error' => 'File has an invalid extension, it should be one of '. $these . '.');
        }

        // Save a chunk

        $totalParts = isset($_REQUEST['qqtotalparts']) ? (int)$_REQUEST['qqtotalparts'] : 1;

        if ($totalParts > 1){

            $chunksFolder = $this->chunksFolder;
            $partIndex = (int)$_REQUEST['qqpartindex'];
            $uuid = $_REQUEST['qquuid'];

            if (!is_writable($chunksFolder) && !is_executable($uploadDirectory)){
                return array('error' => "Server error. Chunks directory isn't writable or executable.");
            }

            $targetFolder = $this->chunksFolder.DIRECTORY_SEPARATOR.$uuid;

            if (!file_exists($targetFolder)){
                mkdir($targetFolder);
            }

            $target = $targetFolder.'/'.$partIndex;
            $success = move_uploaded_file($_FILES[$this->inputName]['tmp_name'], $target);

            // Last chunk saved successfully
            if ($success AND ($totalParts-1 == $partIndex)){

                $target = $this->getUniqueTargetPath($uploadDirectory, $name);
                $this->uploadName = basename($target);

                $target = fopen($target, 'wb');

                for ($i=0; $i<$totalParts; $i++){
                    $chunk = fopen($targetFolder.DIRECTORY_SEPARATOR.$i, "rb");
                    stream_copy_to_stream($chunk, $target);
                    fclose($chunk);
                }

                // Success
                fclose($target);

                for ($i=0; $i<$totalParts; $i++){
                    unlink($targetFolder.DIRECTORY_SEPARATOR.$i);
                }

                rmdir($targetFolder);

                return array("success" => true);

            }

            return array("success" => true);

        } else {

            $target = $this->getUniqueTargetPath($uploadDirectory, $name);

            if ($target){
                $this->uploadName = basename($target);

                if (move_uploaded_file($file['tmp_name'], $target)){
                    return array('success'=> true);
                }
            }

            return array('error'=> 'Could not save uploaded file.' .
                'The upload was cancelled, or server error encountered');
        }
    }

    /**
     * Returns a path to use with this upload. Check that the name does not exist,
     * and appends a suffix otherwise.
     * @param string $uploadDirectory Target directory
     * @param string $filename The name of the file to use.
     */
    protected function getUniqueTargetPath($uploadDirectory, $filename)
    {
        // Allow only one process at the time to get a unique file name, otherwise
        // if multiple people would upload a file with the same name at the same time
        // only the latest would be saved.

        if (function_exists('sem_acquire')){
            $lock = sem_get(ftok(__FILE__, 'u'));
            sem_acquire($lock);
        }

        $pathinfo = pathinfo($filename);
        $base = $pathinfo['filename'];
        $ext = isset($pathinfo['extension']) ? $pathinfo['extension'] : '';
        $ext = $ext == '' ? $ext : '.' . $ext;

        $unique = $base;
        $suffix = 0;

        // Get unique file name for the file, by appending random suffix.

        while (file_exists($uploadDirectory . DIRECTORY_SEPARATOR . $unique . $ext)){
            $suffix += rand(1, 999);
            $unique = $base.'-'.$suffix;
        }

        $result =  $uploadDirectory . DIRECTORY_SEPARATOR . $unique . $ext;

        // Create an empty target file
        if (!touch($result)){
            // Failed
            $result = false;
        }

        if (function_exists('sem_acquire')){
            sem_release($lock);
        }

        return $result;
    }

    /**
     * Deletes all file parts in the chunks folder for files uploaded
     * more than chunksExpireIn seconds ago
     */
    protected function cleanupChunks(){
        foreach (scandir($this->chunksFolder) as $item){
            if ($item == "." || $item == "..")
                continue;

            $path = $this->chunksFolder.DIRECTORY_SEPARATOR.$item;

            if (!is_dir($path))
                continue;

            if (time() - filemtime($path) > $this->chunksExpireIn){
                $this->removeDir($path);
            }
        }
    }

    /**
     * Removes a directory and all files contained inside
     * @param string $dir
     */
    protected function removeDir($dir){
        foreach (scandir($dir) as $item){
            if ($item == "." || $item == "..")
                continue;

            unlink($dir.DIRECTORY_SEPARATOR.$item);
        }
        rmdir($dir);
    }

    /**
     * Converts a given size with units to bytes.
     * @param string $str
     */
    protected function toBytes($str){
        $val = trim($str);
        $last = strtolower($str[strlen($str)-1]);
        switch($last) {
            case 'g': $val *= 1024;
            case 'm': $val *= 1024;
            case 'k': $val *= 1024;
        }
        return $val;
    }
} 
```

当我作为文件上传时，出现以下两个错误并且我的文件上传失败：

**错误 1**

```
OPTIONS file:///C:/Users/upload/qqFileUploader  jquery.fineuploader-3.4.1.js:3903
handleStandardFileUpload jquery.fineuploader-3.4.1.js:3903
api.upload jquery.fineuploader-3.4.1.js:3989
upload jquery.fineuploader-3.4.1.js:3041
qq.FineUploaderBasic._upload jquery.fineuploader-3.4.1.js:1437
qq.FineUploaderBasic._uploadFileOrBlobDataList jquery.fineuploader-3.4.1.js:1415
qq.FineUploaderBasic.addFiles jquery.fineuploader-3.4.1.js:1049
qq.FineUploaderBasic._onInputChange jquery.fineuploader-3.4.1.js:1340
qq.UploadButton.onChange jquery.fineuploader-3.4.1.js:1117
(anonymous function) jquery.fineuploader-3.4.1.js:680 
```

**错误 2**

```
[FineUploader] Error when attempting to parse xhr response text (SyntaxError: Unexpected end of input) jquery.fineuploader-3.4.1.js:155
qq.log jquery.fineuploader-3.4.1.js:155
qq.FineUploaderBasic.log jquery.fineuploader-3.4.1.js:939
qq.UploadHandler.log jquery.fineuploader-3.4.1.js:1146
parseResponse jquery.fineuploader-3.4.1.js:3683
onComplete jquery.fineuploader-3.4.1.js:3732
(anonymous function) jquery.fineuploader-3.4.1.js:3766 
```

当调试设置为真时，我得到这个：

```
[FineUploader] xhr - server response received for 0 jquery.fineuploader-3.4.1.js:150
[FineUploader] responseText = <!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>404 Not Found</title>
</head><body>
<h1>Not Found</h1>
<p>The requested URL php/qqFileUploader.php was not found on this server.</p>
<hr>
<address>Apache/2.2.15 (CentOS) Server at Port 80</address>
</body></html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T20:50:23.623

你没有正确设置你的端点，它出现了。您的端点必须是指向服务器设置位置的相对或绝对 URL，以处理 Fine Uploader 的请求。看起来您可能没有在网络服务器中运行您的应用程序。似乎您只是打开一个 Web 浏览器并指向文件系统上的一个 html 文件。那永远行不通。

请参阅fineuploader.com 上的演示以及自述文件中的[请求选项文档](http://docs.fineuploader.com/integrating/options/fineuploaderbasic.html#request-option-properties)。

# visual-studio-2012 - 为 Visual Studio 2012 Update 2 创建脱机包是否包括来自 Update 1 的更新？

> ID：15888682
> 
> 赞同：4
> 
> 时间：2013-04-08T20:47:23.063
> 
> 标签：visual-studio-2012, updates

我通过以下方式下载`VS2012.2.exe`并运行它：

```
VS2012.2.exe /layout 
```

获取安装程序的离线版本。

现在我想知道这是否包括自 Visual Studio 2012 的 RTM 以来的整套更新，还是仅包括自 Update 1 以来的那些更新。

[下载页面上](http://www.microsoft.com/visualstudio/eng/downloads#d-visual-studio-2012-update)的描述并不完全明确：

> 此更新是 Visual Studio 2012 累积的一系列功能添加和错误修复中的最新更新。

累积是有道理的，但没有提到基线。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T05:19:53.590

来自： http: [//support.microsoft.com/kb/2797912](http://support.microsoft.com/kb/2797912)

Visual Studio 2012 Update 2 是一个累积版本，其中包括 Visual Studio 2012 Update 1 中提供的新功能和修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T09:16:52.983

答案是**累积**词。

来自“服务包”的维基百科描述：

> 服务包可以是“增量的”，这意味着它只包含以前的服务包中不存在的更新，或者它可以是**累积**的，这意味着它**包括其所有前辈的内容**。

因此，它是自 Visual Studio 的 RTM 以来的一整套更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-20T16:58:46.047

您可以下载并使用 microsoft 创建的更新 iso，访问

[http://blogs.msdn.com/b/visualstudio/archive/2013/05/03/announcing-availability-of-isos-for-visual-studio-updates.aspx](http://blogs.msdn.com/b/visualstudio/archive/2013/05/03/announcing-availability-of-isos-for-visual-studio-updates.aspx)

[http://go.microsoft.com/fwlink/?LinkID=298533](http://go.microsoft.com/fwlink/?LinkID=298533)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-31T18:47:05.973

更新： [下载 Visual Studio 2012 Update 4（离线安装程序/ISO）](http://go.microsoft.com/fwlink/?LinkId=327544)

# c# - datagridview 中可以有两个不同类型的链接列吗？

> ID：15888684
> 
> 赞同：0
> 
> 时间：2013-04-08T20:47:42.240
> 
> 标签：c#, winforms

如果是这样，我们如何分别处理每个的 cellcontentclick 事件？我正在动态添加列。这是我的代码：-
`dataGridViewShow.Columns.Add(new DataGridViewTextBoxColumn { HeaderText = "Date", DataPropertyName = "Date", CellTemplate = new DataGridViewTextBoxCell() });`

```
DataGridViewLinkColumn toComputer = new DataGridViewLinkColumn();
        toComputer.HeaderText = "Status";
        toComputer.Name = "link1";
        toComputer.UseColumnTextForLinkValue = true;
        toComputer.Text = "Save to File";
        toComputer.ActiveLinkColor = Color.White;
        toComputer.LinkColor = Color.Blue;
        toComputer.TrackVisitedState = true;
        toComputer.VisitedLinkColor = Color.Green;
        dataGridViewShow.Columns.Add(toComputer);
        dataGridViewShow.CellContentClick += (SaveFileType_click);  

DataGridViewLinkColumn toNet = new DataGridViewLinkColumn();
        toLinx.HeaderText = " ";
        toLinx.Name = "link2";
        toLinx.UseColumnTextForLinkValue = true;
        toLinx.Text = "Send to Net";
        toLinx.ActiveLinkColor = Color.White;
        toLinx.LinkColor = Color.Blue;
        toLinx.TrackVisitedState = true;
        toLinx.VisitedLinkColor = Color.Green;            
        dataGridViewShow.Columns.Add(toNet);
        dataGridViewShow.CellContentClick += ("Don't know how this gets handled"); 
```

上面的代码确实显示了两个不同的链接类型列，但是我不知道如何分别处理每个事件？

```
private void SaveFileType_click(object sender, DataGridViewCellEventArgs e)
    {
        selectedRow = e.RowIndex;

        if (e.ColumnIndex == 0)
        {
            //some code goes here
        }if (e.ColumnIndex == 1 && (string)dataGridViewShow[e.ColumnIndex, e.RowIndex].Value != "Complete")
        {
            //some code goes here
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T20:54:47.280

您不单独处理事件。您需要处理[`OnCellClick`](http://msdn.microsoft.com/en-GB/library/system.windows.forms.datagridview.oncellclick%28v=vs.80%29.aspx)或[`CellContentClick`](http://msdn.microsoft.com/en-GB/library/system.windows.forms.datagridview.cellcontentclick.aspx)事件。然后使用`DataGridViewCellEventArgs`object `e`，您可以获得被点击的列和行。根据选择的单元格，您以不同的方式处理事件

```
public void dataGridView1_OnCellClick(object sender,
    DataGridViewCellEventArgs e)
{
    if (e.ColumnIndex == YourLinkColumnIndexA)
        //some code goes here.
    else if (e.ColumnIndex == YourLinkColumnIndexB)
        //some code goes here.
} 
```

因此，您可以像以前那样在代码中连接事件，但只连接*一次*。

我希望这有帮助。

# javascript - 使用 jQuery 动态调整 div 的大小

> ID：15888685
> 
> 赞同：2
> 
> 时间：2013-04-08T20:47:44.867
> 
> 标签：javascript, jquery, html

我有一个`div`( `id="mainDiv"`)，如果用户更改浏览器窗口的大小，我需要动态调整它的大小。我已经编写了以下代码来尝试让它工作，但这似乎并没有设置我的高度`div`：

```
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script>
    var height = $(window).height(); 
    $("#mainDiv").height(height);
</script>
<body>
    <div id="mainDiv"></div>
</body> 
```

我不太了解jQuery，我是否犯了一个明显的错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T20:54:42.410

这里有一些问题：

1.  您的代码将在您的文档完成加载之前立即执行。
2.  您的代码将仅在加载脚本时执行，而不是在调整大小时执行
3.  您没有设置 mainDiv 的高度 - 您正在使用 id:accordianMain 设置另一个元素的高度（但我猜你知道这一点）。

您需要处理浏览器调整大小事件以等待浏览器调整大小，然后获取窗口的尺寸并相应地应用。你可以通过处理 window.resize 事件来做到这一点：

```
var $win = $(window);

$win.on('resize',function(){
    $("#mainDiv").height($win.height());
}); 
```

您可能想要做的是通过添加超时等待调整大小完成，这样它也不会经常触发：

```
var timer,
    $win = $(window); 

$win.on('resize',function(){
    clearTimeout(timer);
    timer = setTimeout(function(){
        $("#mainDiv").height($win.height());
    }, 500);

}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T20:49:45.700

您需要将其包装在调整大小函数中：

```
$(window).on('resize',function(){
    var height = $(window).height(); 
    $("#mainDiv").height(height);
}); 
```

尽管我应该指出您的工作可以通过 CSS 轻松实现：

```
body,#mainDiv {
    height:100%;
} 
```

这更多地指出了“它需要在调整大小事件包装器中”更大的一点，以防你想做一些实际需要事件的逻辑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T20:54:06.673

是的，错误是使用jquery hehehe

你用 CSS 做这个

```
<body>
    <div id="mainDiv" style="height:100%"></div>
</body> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T20:50:47.110

使用事件侦听器来调整窗口大小（并且您应该在使用 JQuery 访问元素之前等待页面加载）：

```
$(function() {
  $(window).on('resize', function() {
    var height = $(window).height(); 
    $("#mainDiv").height(height);
  });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T20:58:14.813

我在页面中使用了 div 内容和 div 页脚，我将在我的 js 中设置此代码以设置 div 内容的动态高度。

```
 footer = $("div[data-role='footer']");
    content = $("div[data-role='content']");
    viewHeight = $(window).height();
    contentHeight = viewHeight - footer.outerHeight();
    contentHeight -= (content.outerHeight() - content.height());
    content.height(contentHeight); 
```

# r - 为ggplot添加适当的标题

> ID：15888687
> 
> 赞同：6
> 
> 时间：2013-04-08T20:48:00.413
> 
> 标签：r, ggplot2

我整个早上都在尝试这个，但在阅读了关于 stackoverflow 的相关帖子后仍然找不到解决方案

我有以下代码：

```
names <- colnames(df[17:length(df)])

counter = 17L

for (i in 1:length(names)) {
  df.tax <- subset(df, df[,c(counter)] != 0)
  counter = counter + 1L
  meta <- subset(df.tax, select=c(1:16))
  meltmeta <- melt(meta, id=c("Collector", "Year","Week","Cities","Provinces"))
  ppv <- ggplot(meltmeta, aes(title = paste(names[i]), factor(Provinces), value))
  ppv + geom_boxplot() + geom_boxplot(aes(fill=Collector), alpha=I(0.5)) + geom_point(aes(color=Collector), size=1) +facet_wrap(~variable, scale="free")
  ggsave(file = paste(names[i], sep=".","provinces_vs_climate.pdf"), width=16, height=8)
} 
```

我的问题是，我无法为 ggplot 添加正确的标题。在 for 循环的每次迭代中，我通过子集 df 的部分来生成一个名为 df.tax 的新数据帧。我融化了 df，然后尝试使用 ggplot 生成一个图。

我设法在 ggsave 上的每次迭代中使用不同的文件名（基于名称数组）保存每个图，但 ggplot 只是继续为每个图生成标题“paste（names [i]）”。

我试过了，get()、paste()、labs()...等，但都没有用

有谁知道我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-08T21:13:05.997

正如[joran](https://stackoverflow.com/users/324364/joran)所提到的，从 ggplot2 的 0.9.2 版开始，为情节设置标题的最简单方法是使用[`ggtitle`](http://docs.ggplot2.org/current/labs.html). 使用`ggtitle`您的代码将如下所示：

```
for (i in 1:length(names)) {
  df.tax <- subset(df, df[,c(counter)] != 0)
  counter = counter + 1L
  meta <- subset(df.tax, select=c(1:16))
  meltmeta <- melt(meta, id=c("Collector", "Year","Week","Cities","Provinces"))
  ppv <- ggplot(meltmeta, aes(factor(Provinces), value))
  ppv <- ppv + geom_boxplot() 
  ppv <- ppv + geom_boxplot(aes(fill=Collector), alpha=I(0.5)) 
  ppv <- ppv + geom_point(aes(color=Collector), size=1) 
  ppv <- ppv + facet_wrap(~variable, scale="free")
  ppv <- ppv + ggtitle(paste(names[i]))
  ggsave(file = paste(names[i], sep=".","provinces_vs_climate.pdf"), width=16, height=8)
} 
```

# android - 适当使用 BaseAdapter 类具体的 getView 方法

> ID：15888689
> 
> 赞同：0
> 
> 时间：2013-04-08T20:48:11.957
> 
> 标签：android, performance, listview, gridview

到目前为止，我已经看到了几个使用`BaseAdapter`和`ArrayAdapter<?>`. 但我仍然不完全清楚为什么应该这样。

第一个例子是继承自`ArrayAdapter<?>`，这个例子用在ListView中，下面是getView方法

```
@override
public View getView(int position, View convertView, ViewGroup parent) {

    View row = convertView;
    Holder holder = null;

    // Holder represents the elements of the view to use
    // Here are initialized   
    if(null == row) {               
        row = LayoutInflater.from(mContext).inflate(LAYOUT_ITEM_ID, parent, false);                

        holder = new Holder();
        holder.titleTextView = (TextView)row.findViewById(android.R.id.title);            

        row.setTag(holder);
    } else {
        holder = (Holder) row.getTag();
    }       

    // here do operations in holder variable example
    holder.titleTextView.setText("Title " + position);

    return row;
}

public static class Holder {        
    TextView titleTextView;     
} 
```

现在在第二个示例中`BaseAdapter`，在 GridView 上使用 found 这是 getView 方法

```
// create a new ImageView for each item referenced by the Adapter
public View getView(int position, View convertView, ViewGroup parent) {
    ImageView imageView;
    if (convertView == null) {  // if it's not recycled, initialize some attributes
        imageView = new ImageView(mContext);
        imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
        imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
        imageView.setPadding(8, 8, 8, 8);
    } else {
        imageView = (ImageView) convertView;
    }

    imageView.setImageResource(mThumbIds[position]);

    return imageView;
} 
```

我的问题是：为了正确使用适配器，必须使用“Holder”静态类，这对应用程序性能和多个设备上的兼容性有什么影响（最低 API 8）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T21:38:03.777

没有必要使用持有者类；确保尽可能重复使用 convertView 更为重要，因为这会显着提高速度。话虽如此，使用支架确实提供了更好的性能，尤其是在您显示大量项目时，因为 getView 不必每次都膨胀 xml。

该视频更详细地解释了这一点： [http ://www.youtube.com/watch?v=wDBM6wVEO70](http://www.youtube.com/watch?v=wDBM6wVEO70)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T21:48:35.730

首先，我想向您介绍在 Google I/O '10 期间举行[的 ListView 世界会议](http://www.google.com/events/io/2010/sessions/world-of-listview-android.html)。值得观看该演示文稿（或通读 pdf）以更好地理解`ListView`机制以及为什么“ViewHolder/RowWrapper”模式可以显着加快速度。

`getView()`优化逻辑基本上有两个关键要素：

*   使用回收视图（`convertView`传入的参数`getView()`）
*   尽量减少（昂贵的）`findViewById()`通话次数

在您的第一个示例中，如果没有可用的回收视图，则仅应用 ViewHolder 模式来膨胀行视图 - 这很好。其次，它通过使用 ViewHolder 对象标记行来减少视图查找的数量，该对象充当`TextView`之前已检索的包装器。

您的第二个示例不会扩展行视图，而是在运行时实例化它。它仍然会检查回收的视图是否可用，并在可能的情况下使用它——再一次，这很好。此外，由于行视图（或本例中的网格视图）只是一个`ImageView`,`convertView`可以简单地转换为`ImageView`. 请注意，如果行/网格视图**不仅包含单个视图**，则第一个片段中的 ViewHolder 方法将是合适的方法。

话虽如此，由于第一个片段中的行视图也只是一个`TextView`，因此可以使用与第二个片段中相同的 cast-convertView-approach 来简化它。行视图通常由多个视图组成，因此我建议始终使用 ViewHolder 模式，因为这将为您提供最大的灵活性以适应未来的变化。

# ruby-on-rails - 公共/图像中的文件出现奇怪的错误“403 Forbidden”

> ID：15888690
> 
> 赞同：3
> 
> 时间：2013-04-08T20:48:22.993
> 
> 标签：ruby-on-rails, nginx, asset-pipeline

我有一个奇怪的错误 - 目录中的图像“403 Forbidden” `public/images`。但是来自嵌套目录的其他图像加载没有问题（例如来自`public/images/product`）。我正在使用 Nginx + 乘客 + capistrano。在 production.rb 我有`config.serve_static_assets = true`. 也许资产管道中的错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T20:51:54.843

你检查过文件夹的权限吗？如右键单击-> 属性或“chmod”到“755”？

# python - Python Matplotlib 和 MySQL 和 Ginput

> ID：15888693
> 
> 赞同：0
> 
> 时间：2013-04-08T20:48:34.583
> 
> 标签：python, mysql, matplotlib

我正在研究将 Python 与 MySQLdb 和 Matplotlib 一起使用。我正在寻找基于 ginput 图在 matplotlib 散点图中使用查询的值。我有以下工作：

```
import matplotlib.pyplot as plt
import matplotlib.image as mpimg
import numpy as np
from pylab import *
import random
import MySQLdb as mdb
import sys
from collections import defaultdict

##### Start the query ####
db = mdb.connect('localhost', 'root', 'password', 'xbee')
start = raw_input("Enter Start Date: ")

part_1 = "SELECT XBEE_ADDRESS_AL, XBEE_TEMPERATURE FROM xbeereadings WHERE Date='"
part_2 = start
part_3 = "'"
query_1 = part_1 + part_2 + part_3
cur = db.cursor()
cur.execute(query_1)

s = cur.fetchall()
print s
d = defaultdict(list)
for k, v in s:
    d[k].append(v)

i = 0
temp = [item[i] for item in d.values()]

figure(figsize=(15, 8))
img = mpimg.imread('floor.png')
imgplot = plt.imshow(img, cmap=cm.hot)
print "Left click to plot the sensors point on the image - Middle Click to remove the last point - Right click to End plotting"

# pts would be used with ginput to collect the place the sensor would be located. It returns the example array below
pts = ginput(n=0, timeout=0, mouse_add=1, mouse_pop=2, mouse_stop=3)

x = map(lambda x: x[0],pts) # Extract the values from pts
y = map(lambda x: x[1],pts) 
t = temp

result = zip(x,y,t)

img = mpimg.imread('floor.png')
imgplot = plt.imshow(img, cmap=cm.hot, vmin=-20, vmax=40)
scatter(x, y, marker='h', c=t, s=150, vmin=-20, vmax=40) #add colour c=?
print t

# Add cmap
colorbar()
show() 
```

编辑：我得到了问题的前一部分（如何使用查询值作为 cmap 值），如新代码所示。我已经测量了温度（除以 100 以获得有效数字），然后将其放在图中。

我现在想要一些帮助/代码/起点的问题是：

1 - 如何从查询中将 ginput 点分配给传感器 ID？图上将放置 3 个传感器，因此我想将 id 和温度分配给一个点。我遇到的问题是它将 t 的第一个值分配给第一个点 - 将 t 的第二个值分配给第二个点。如何设置分配给特定点的温度值？

如果我在 1 小时内全部获取，它将为同一个传感器提供多个值。我想要某种时间控制，我可以为每个传感器绘制第一组结果 - 然后按下一个按钮，然后绘制每个传感器的下一个结果。它们都将同时运行，因此每个传感器 id 总会有一个值要绘制。

它也给出了这个错误 -

```
C:\Python27\lib\site-packages\matplotlib\colorbar.py:808: RuntimeWarning: invali
d value encountered in divide
  z = np.take(y, i0) + (xn-np.take(b,i0))*dy/db
Traceback (most recent call last):
  File "heatmap2.py", line 51, in <module>
    show()
  File "C:\Python27\lib\site-packages\matplotlib\pyplot.py", line 143, in show
    _show(*args, **kw)
  File "C:\Python27\lib\site-packages\matplotlib\backend_bases.py", line 108, in
 __call__
    self.mainloop()
  File "C:\Python27\lib\site-packages\matplotlib\backends\backend_tkagg.py", lin
e 69, in mainloop
    Tk.mainloop()
  File "C:\Python27\lib\lib-tk\Tkinter.py", line 325, in mainloop
    _default_root.tk.mainloop(n)
KeyboardInterrupt 
```

那是因为两个值相同，所以 cmap 只有 1 个值？如果我将查询中的一个温度设置为 0.56，它就会消失。

我希望这是有道理的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:07:15.610

您遇到了`ScalarMappables`. 他们负责将数据标准化为范围 [0, 1] 并将该值传递给颜色映射。默认情况下，它将范围的底部设置为`min(values_you_are_mapping)`最大值，将顶部设置为最大值，如果您的所有值都相同，则会导致范围的宽度为零，并且映射会`(v - max_v) / (max_v - min_v)`爆炸。解决方案是告诉它范围应该是多少

```
imshow(..., vmin=min_t, vmax=max_t)
scatter(..., vmin=min_t, vmax=max_t) 
```

在哪里`max_t`，`min_t`是你能得到的最高和最低温度。这也将使所有图形的颜色映射保持一致。

# android - 检查空数据库会引发错误

> ID：15888695
> 
> 赞同：2
> 
> 时间：2013-04-08T20:48:35.070
> 
> 标签：android, sqlite

我有

```
public boolean isEmpty()
{
    if (database == null) {
        database = dbHelper.getReadableDatabase(); // or similar method that   
    }
    Cursor cursor = database.rawQuery("SELECT COUNT(*) FROM " + DatabaseHelper.TABLE_ENCOURAGEMENTS, null);
    if (cursor != null) {
        return false;
    } else {
        return true;
    }
} 
```

但是当我在空数据库上运行它时，它会崩溃。

有什么建议么？

错误是：

```
java.lang.IllegalStateException: Could not execute method of the activity
at android.view.View$1.onClick(View.java:2144)
Caused by: android.database.CursorIndexOutOfBoundsException: Index 0 requested, 
with a size of 0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T20:53:19.700

```
Caused by: android.database.CursorIndexOutOfBoundsException: Index 0 requested, 
with a size of 0 
```

我认为您需要将您的条件修改为：

```
public boolean isEmpty() {
   int count = -1;
   if (cursor != null && cursor.moveToFirst()) {
      count = cursor.getInt(0);
      if (count > 0) {
         return false;
      }
      else {
         return true;
      }
   }
   return true;
} 
```

## 解释：

**moveToFirst()**是一个方便的方法，如果 Cursor 为空则返回**false 。**检查 Cursor 是否被分配`NULL`是不够的。您需要始终调用它来检查光标的状态，因为每个光标都隐式定位在第一行之前，因此您需要始终调用它。

由于您正在选择`COUNT(*)`，因此它始终返回至少一行具有计数值的行。您需要检查此值是否大于零。如果是，则 db 不为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T20:58:33.770

好吧，也许 dbHelper 没有返回数据库。您应该再次检查数据库是否为空。

```
public boolean isEmpty()
{
    if (database == null) {
        database = dbHelper.getReadableDatabase(); // or similar method that   
    }
    if (database != null) {
        Cursor cursor = database.rawQuery("SELECT COUNT(*) FROM " + DatabaseHelper.TABLE_ENCOURAGEMENTS, null);
        if (cursor != null) {
            return false;
        } else {
            return true;
        }
    }
} 
```

# sql-server - 将 varchar 2007-12-19-11.57.1 7.366731 转换为 datetime 数据类型

> ID：15888701
> 
> 赞同：1
> 
> 时间：2013-04-08T20:49:17.613
> 
> 标签：sql-server, sql-server-2008-r2

我有如下数据

```
2007-12-19-11.57.17.366731 
```

并且数据类型是`varchar(26)`

我只想将数据类型更改为`datetime`.

我尝试了所有语法但没有用，我得到了

> 将 varchar 数据类型转换为 datetime 数据类型导致值超出范围。

这是我正在尝试的示例

```
SELECT CONVERT(Datetime, '2007-12-19-11.57.17.366731', 120) 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:59:47.263

好吧，首先，您需要添加一些字符串魔术来将您的数据转换为`DATETIME`. 而且您还需要使用更少的毫秒数（因为`DATETIME`您有 3 位数字），在 SQL Server 2008 中您可以使用`DATETIME2`它。尝试以下操作：

```
DECLARE @Value VARCHAR(26)
SET @Value = '2007-12-19-11.57.17.366731'

SELECT  CONVERT(DATETIME,LEFT(@Value,10) + ' ' + 
                         REPLACE(SUBSTRING(@Value,12,8),'.',':') + '.' +
                         SUBSTRING(@Value,21,3), 120) ValueAsDatetime,
        CONVERT(DATETIME2,LEFT(@Value,10) + ' ' + 
                         REPLACE(SUBSTRING(@Value,12,8),'.',':') + '.' +
                         RIGHT(@Value,6), 120) ValueAsDatetime2 
```

结果：

```
╔═════════════════════════╦═════════════════════════════╗
║     ValueAsDatetime     ║      ValueAsDatetime2       ║
╠═════════════════════════╬═════════════════════════════╣
║ 2007-12-19 11:57:17.367 ║ 2007-12-19 11:57:17.3667310 ║
╚═════════════════════════╩═════════════════════════════╝ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T20:54:18.900

您正在尝试提供不可接受的`datetime`格式。这是正确的格式：

```
SELECT CONVERT(Datetime, '2007-12-19 11:57:17.366', 120) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T20:56:42.663

请参阅另一个问题：[Best way to parse DateTime to SQL server](https://stackoverflow.com/questions/469417/best-way-to-parse-datetime-to-sql-server)

您必须将“安全”格式传递给 DateTime 函数，这意味着您必须将字符串解析为其组件，然后以正确的格式将其传递给 DateTime

# iphone - 首先为 iPhone 4 或 5 开发

> ID：15888705
> 
> 赞同：6
> 
> 时间：2013-04-08T20:49:23.167
> 
> 标签：iphone, ios, objective-c, xcode, autolayout

我已经搜索了所有我能找到的组合来尝试找到答案，因为我确信它已经在某个地方被问过了......所以如果你能指出我正确的方向，请原谅我。

如果您正在开发一个新的 iOS 应用程序，您是否首先在 IB 中为 iPhone 5 或 4 屏幕尺寸设置布局？我发现很多关于使用自动布局将你的 iPhone 4 应用程序移动到 iPhone 5 的文章，但反之亦然...... 2是在IB中创建3.5英寸屏幕尺寸的界面，然后使用自动布局来适应iPhone 5的4英寸屏幕。

有人可以为我澄清最佳实践吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T22:55:31.093

[Kendall Geln](https://stackoverflow.com/a/15913880/814730)提出了一些非常好的观点。特别是最好从较小的屏幕向上构建并调整大小 - 主要是因为缩小元素可能会为用户提供糟糕和狭窄的体验。在该说明中，您需要确保您的图形（图像和视频）的大小适合两种屏幕尺寸。创建图形时，最好先大规模创建它们，然后根据需要缩小它们的大小。

另一个设计考虑是为 4 英寸和 3.5 英寸屏幕创建稍微不同的界面。4英寸的屏幕更高，为开发者提供了更多的空间，也因此有了更多的可能性。这与设计 iPad 和 iPhone 界面的原则几乎相同。

您还提到在 Interface Builder 中执行此操作。默认情况下（现在在 Xcode 4.6+ 中）任何新的基于 iPhone 的项目都将以 4 英寸/iPhone 5 布局启动您的界面。您可以随时通过单击界面生成器/编辑器屏幕右下角的屏幕大小切换按钮（看起来像两端带有箭头的矩形）在布局之间切换：

![在 Xcode IB 中切换屏幕大小](https://i.stack.imgur.com/KMipR.png)

如果您需要针对不同屏幕尺寸的完全不同界面，则可以在 AppDelegate 中有条件地加载 Storyboard。以下是您可能会这样做的方法：

```
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
    // Check if the user is on a newer iPhone / iPod with a 4-inch screen
    if ([[UIScreen mainScreen] bounds].size.height == 568) {
        // The user is on a newer device with a 4-inch screen - load your custom iPhone 5 storyboard
        UIStoryBoard *storyBoard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone5" bundle:nil];
        UIViewController *initViewController = [storyBoard instantiateInitialViewController];
        [self.window setRootViewController:initViewController];
    } else {
        // The user is on an older device with a 3.5-inch screen - load the regular storyboard
        UIStoryBoard *storyBoard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:nil];
        UIViewController *initViewController = [storyBoard instantiateInitialViewController];
        [self.window setRootViewController:initViewController];
    }
} 
```

总之，我认为没有正确的工作流程（例如从 3.5 到 4，反之亦然），但是您应该牢记以下几点：

*   缩小大型界面会使它们变得局促并导致糟糕的用户体验
*   图形不能这样说……如果您以低分辨率或小尺寸设计图形并按比例放大，它们看起来不会很好（为 Retina 和非 Retina 设备设计时应用的原理相同）。
*   考虑不同的屏幕尺寸以及在每个屏幕上可以做什么。请记住，可以创建单独的故事板。

编辑：从 2013 年初开始，Apple 将不允许不支持 iPhone 5 的应用程序进入 AppStore。您必须支持 iPhone 5 屏幕尺寸才能将您的应用程序或任何更新放到商店中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T22:46:12.360

通常，最好针对您的 UI 可能的最小尺寸，并将自动调整大小行为设置为适当扩展 - 否则缩小元素可能会产生过于狭窄的 UI。

另请注意，在 iPhone 5 中`viewDidLoad`，笔尖中的 UI 元素尚未调整大小或重新定位（至少在旧版布局引擎中）。

# sql - SQL：列为某个值时的唯一约束

> ID：15888711
> 
> 赞同：26
> 
> 时间：2013-04-08T20:49:34.757
> 
> 标签：sql, postgresql

```
CREATE TABLE foo (
   dt     AS DATE NOT NULL,
   type   AS TEXT NOT NULL,
   CONSTRAINT unique_dt_type UNIQUE(dt,type) -- check constraint(?)
) 
```

当仅存在特定条件时，试图思考正确的语法以创建唯一约束时，会出现脑残。

给定，`type`可以有值`A-F`，每个日期只能有一个`A`，但可以有多个`B-F`。好表的例子：

```
2010-01-02 | 'A'  -- only one
2010-01-02 | 'B'  -- can have multiple
2010-01-02 | 'B'
2010-01-02 | 'B'
2010-01-02 | 'C'  -- can have multiple
2013-01-02 | 'A'  -- only one
2010-01-02 | 'B'  -- can have multiple
2010-01-02 | 'B'
2013-01-02 | 'F'  -- can have multiple
2013-01-02 | 'F' 
```

尝试阅读检查/唯一语法，但没有任何示例。 `CHECK`接近但仅将其限制在一个范围内，并未与`UNIQUE`场景结合使用。也试过搜索，但我的搜索技能要么达不到标准，要么没有任何类似的问题。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-08T21:04:41.047

PostgreSQL 可以通过其“部分索引”功能满足您的需求。实际上，这是通过在 create index 语句中添加 where 子句来实现的。

样本：

```
CREATE INDEX my_partial_ix ON my_sample_table (my_sample_field)
WHERE (my_sample_field = 'rows to index'); 
```

看看这里： [http ://www.postgresql.org/docs/current/interactive/indexes-partial.html](http://www.postgresql.org/docs/current/interactive/indexes-partial.html)

特别注意该部分`Example 11-3\. Setting up a Partial Unique Index`。它提供了一个与您声明的目标非常吻合的示例。

```
CREATE UNIQUE INDEX my_partial_ix ON my_sample_table (my_sample_field)
WHERE NOT (my_sample_field = 'duplicates ok'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T21:13:31.767

使用触发器：

```
CREATE OR REPLACE FUNCTION "CheckConstraint"()
  RETURNS trigger AS
$BODY$declare
already_exists boolean; 
begin

if new.foo_type='A' then
select count(*) >0  from foo where foo_type='A' and dt=new.dt INTO already_exists;
if already_exists then 
raise exception 'date % already have an A', new.dt;
end if;
end if;

return new;
end;$BODY$
  LANGUAGE plpgsql VOLATILE
  COST 100; 
```

# css - IE8 和 IE9 忽略提交按钮的填充

> ID：15888714
> 
> 赞同：1
> 
> 时间：2013-04-08T20:50:00.653
> 
> 标签：css, internet-explorer, padding

不知何故，IE8 和 IE9 忽略了我的提交按钮的填充设置。奇怪的是 IE8 和 IE9 将填充应用于常规按钮，例如

```
<a class="btn" href="#">foo<a> 
```

但不是为了

```
<input type="submit"> 
```

这怎么可能？我读过一些关于添加溢出：可见的东西，但这不起作用。

这是我正在使用的 CSS：

```
display: inline-block;
color: #fff;
text-decoration: none;
background: #74ad38;
padding: 10px 20px;
-webkit-box-shadow: 0px 6px 0px rgba(99, 148, 48, 1);
-moz-box-shadow:    0px 6px 0px rgba(99, 148, 48, 1);
box-shadow:         0px 6px 0px rgba(99, 148, 48, 1);
border-radius: 5px;
border: none;
transition: background 0.25s;
-moz-transition: background 0.25s;
-webkit-transition: background 0.25s;
-ms-transition: background 0.25s;
-o-transition: background 0.25s; 
```

任何帮助深表感谢。

# jquery - 如何使用 jQuery 播放音频文件？

> ID：15888716
> 
> 赞同：7
> 
> 时间：2013-04-08T20:50:02.777
> 
> 标签：jquery, html5-audio

我很难让音频与 jQuery 一起工作。我已经尝试过使用 .wav 和 .ogg 格式。（火狐 19.0.2）

单击`Start`按钮产生：

> 类型错误：buzzer.play 不是函数

我不确定 jQuery 选择器是否返回一个数组，但我已经尝试使用两者来捕获音频文件：

```
var buzzer = $('buzzer'); 
```

和

```
var buzzer = $('buzzer')[0]; 
```

无论如何，我无法播放音频元素。

```
<!DOCTYPE html>     
<html>     
    <head>      
    <meta name="viewport" content="width=device-width, initial-scale=1">     
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>    
</head>     

<body>     

<audio id="buzzer" src="buzzer.ogg" type="audio/ogg">Your browser does not support the &#60;audio&#62; element.</audio>    
<form id='sample' action="#" data-ajax="false">    
    <fieldset>    
     <input value="Start" type="submit">    
     </fieldset>    
</form>    
<script type="text/javascript">    

var buzzer = $('buzzer')[0];    

$(document).on('submit', '#sample', function()  {     
    buzzer.play();    
    return false;    
});    

</script>    
</body>    
</html> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-08T20:55:03.973

`#`您忘记了ID 选择器中的哈希值：

```
var buzzer = $('#buzzer')[0];  

$(document).on('submit', '#sample', function()  {     
    buzzer.play();    
    return false;    
}); 
```

而且`document.getElementById('buzzer')`似乎更合适！

我会将 HTML 更改为：

```
<audio id="buzzer" src="buzzer.ogg" type="audio/ogg"></audio>    
<input type="button" value="Start" id="start" /> 
```

并做：

```
$('#start').on('click', function() {
    $('#buzzer').get(0).play();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T20:57:23.837

```
var buzzer = document.getElementById("buzzer"); 
```

你也可以这样做：

```
var buzzer = $('audio')[0]; 
```

如果 id`buzzer`是唯一的（*应该如此*），您也可以这样做 - 不需要`[0]`

```
var buzzer = $('#buzzer'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-21T08:56:41.237

您正在使用 id 在 HTML 中标记您的音频标签。因此，您应该在使用选择器时添加#。

```
var buzzer = $('#buzzer')[0]; 
```

此外，您正在使用 id 来识别您的音频，您还可以像这样定义您的价值：

```
var buzzer = $('#buzzer'); 
```

不必添加 [0]，[0] 意味着您获得了第一个元素。

# c++ - 通过二叉树的数组表示的最小堆；MoveDown 函数无限循环

> ID：15888717
> 
> 赞同：0
> 
> 时间：2013-04-08T20:50:03.793
> 
> 标签：c++, arrays, binary-tree

我正在使用数组数据结构实现最小堆，但是我的 moveDown 方法存在问题（如果根的子节点都小于它，则在根节点处将集合返回到堆）。我假设读者会知道什么是最小堆，但我会描述它以防万一有人不知道或我的理解不正确。

最小堆（在这种情况下）是由数组表示的二叉树，使得：

1.  根节点是数据结构中的最小值
2.  节点必须始终小于其子节点
3.  给定一个数组索引为 I 的节点，它的左孩子将在索引 I*2 + 1 处，右孩子将在 I*2 + 2 处

我目前遇到的问题是我的 moveDown 函数在交换时陷入了无限循环。我很难找到逻辑错误，所以我担心它可能更接近根源（双关语，我情不自禁）。

heap.cpp 文件的重要数据成员：

```
int size;
MiniVector array;// The implementing custom array
void moveDown(int root); 
```

我的 heap.cpp 文件中的 moveDown 函数：

```
void BinaryHeap::moveDown( int root ){

    int temp = root;
    int tempLC = temp*2 + 1;//LeftChild
    int tempRC = temp*2 + 2;//RightChild

    //Not a leaf
    while( ( tempLC < array.size() && tempRC < array.size() )
        &&
    ( (array[temp] > array[tempLC]) || (array[temp] > array[tempRC]) ) ){

        int hold = array[temp];

        if( array[temp] > array[tempRC] ){

            array[temp] = array[tempRC];
            array[tempRC] = hold;
            temp = tempRC;
        }

        else{

            array[temp] = array[tempLC];
            array[tempLC] = hold;
            temp = tempLC;
        }

        int tempLC = temp*2 + 1;//LeftChild
        int tempRC = temp*2 + 2;//RightChild
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:54:06.907

你重新声明你的变量。在while循环的底部

```
 int tempLC = temp*2 + 1;//LeftChild
    int tempRC = temp*2 + 2;//RightChild 
```

应该

```
 tempLC = temp*2 + 1;//LeftChild
    tempRC = temp*2 + 2;//RightChild 
```

在Java中不会发生。

如果您将循环重写为中间有中断的无限 for 循环，也不会发生

```
for (;;)
{
    int tempLC = temp*2 + 1;//LeftChild
    int tempRC = temp*2 + 2;//RightChild
    if (...)
        break;
    ...
} 
```

但每当我建议这种循环是个好主意时，我都会感到愤怒。上次有人建议它“几乎是一种反模式”，这是比较礼貌的回应之一。

# php - 根据日期时间生成 CSRF 令牌

> ID：15888723
> 
> 赞同：1
> 
> 时间：2013-04-08T20:50:22.357
> 
> 标签：php, symfony, token, csrf

Symfony 2 中是否存在某种方式在每次呈现表单时生成 CSRF 令牌？在我的控制器中，我尝试了这样的事情：

```
$request = $this->get('request');
    if ($request->getMethod() != 'POST') {
        $csrf = $this->get('form.csrf_provider');
        $date= new \DateTime("now");
        $this->date = $date->format('Y-m-d H:i:s');
        $token = $csrf->generateCsrfToken($this->date);
    } elseif($request->getMethod() == "POST") {
        $csrf = $this->get('form.csrf_provider');
        $token = $csrf->generateCsrfToken($this->date);
    }

    $form =  $this->createFormBuilder()
    ....
    ->add('_token','hidden',array(
        'data' => $token
        ))->getForm();

    if ($request->getMethod() == 'POST') {
        $form->bindRequest($request);

        if ($form->isValid()) {
            DO something
        }
    } 
```

一直在我的请求权令牌哈希中。但是在 bindRequest 更改为从 parameters.ini 中的安全字符串生成的默认哈希之后，isValid 方法肯定会返回 FALSE 响应。存在某种方式，如何调整呢？

**编辑** 响应解散者的回答，我编辑了我的控制器并创建了我的 CSRF 提供程序，但我仍然收到“CSRF 令牌无效。请尝试重新提交表单”错误。我的 CSRF 提供程序如下所示：

```
namespace My\Namespace;
use Symfony\Component\HttpFoundation\Session;
use Symfony\Component\Form\Extension\Csrf\CsrfProvider\CsrfProviderInterface;

class MyCsrfProvider implements CsrfProviderInterface
{
    protected $session;
    protected $secret;
    protected $datetime;

    public function __construct(Session $session, $secret)
    {
        $this->secret = $secret;
        $this->datetime = new \DateTime('now');
        $this->session = $session;
    }

    public function generateCsrfToken($intention)
    {
        return sha1($this->secret.$intention.$this->datetime->format('YmdHis').$this->getSessionId());
    }

    public function isCsrfTokenValid($intention, $token)
    {
        return $token === $this->generateCsrfToken($intention);
    }

    protected function getSessionId()
    {
        return $this->session->getId();
    }
} 
```

比我添加到 config.yml 服务类：

```
services:
form.csrf_provider: 
    class: My\Namespace\MyCsrfProvider
    arguments: [ @session, %kernel.secret% ] 
```

控制器我改为：

```
//any form without _token field
    $form =  $this->createFormBuilder()
        ->add('field1')
        ->add('field2')->getForm()

        if ($this->getRequest()->getMethod() == 'POST') {

            $request = $this->getRequest();
            $form->bindRequest($request);

            if ($form->isValid()) {
                Do something
                return $this->redirect($this->generateUrl('somewhere'));
            }
        } 
```

在我的哈希中不能在几秒钟内出现问题吗？因为如果我从日期时间格式中删除秒数，它可以工作，但有 1 分钟到期，这不是一个好的解决方案。我想，原因是时间变了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T06:03:49.180

Symfony 的`Form`组件在 Form 事件中生成 CSRF 令牌。请参阅有关[`Symfony\Component\Form\Extension\Csrf\EventListener\CsrfValidationListener`](http://api.symfony.com/2.1/Symfony/Component/Form/Extension/Csrf/EventListener/CsrfValidationListener.html)现有实现如何工作的课程。这意味着当您在表单上调用`bindRequest()`（或`bind()`在 Symfony 2.2+ 中）时，该表单事件被调用并覆盖您声明的令牌。

定义不同标记的正确方法是创建一个`CsrfProvider`，它基本上是您编写的实现 的类`Symfony\Component\Form\Extension\Csrf\CsrfProvider\CsrfProviderInterface`。查看[Symfony\Component\Form\Extension\Csrf\CsrfProvider\DefaultCsrfProvider](http://api.symfony.com/2.1/Symfony/Component/Form/Extension/Csrf/CsrfProvider/DefaultCsrfProvider.html)以了解如何实现此功能的示例。

一旦你编写了你的​​类，在你的`app/config/parameters.yml`（或另一个配置文件，在哪里都没有关系）中，将`form.csrf_provider.class`参数设置为你的类的名称。

毕竟，您应该能够从控制器中删除您编写的所有自定义代码，并且只需使用表单系统，就好像没有任何不同（即删除`->add('_token')...`部分）。

希望有帮助！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-08T21:34:17.323

你知道`form_rest`吗？将此添加到表单的底部以使其自动生成您的 CSRF 令牌：

```
{{ form_rest(form) }} 
```

# dependency-injection - WELD-001408 带有限定符 [@Default] 的类型 [EmbeddedCacheManager] 的依赖关系不满足

> ID：15888727
> 
> 赞同：0
> 
> 时间：2013-04-08T20:50:31.530
> 
> 标签：dependency-injection, persistence, jboss7.x, cdi

我得到了例外：

```
WELD-001408 Unsatisfied dependencies for type [EmbeddedCacheManager] with qualifiers [@Default] at injection point [[parameter 1] of [constructor] @Inject public org.jboss.jdf.example.ticketmonster.service.SeatAllocationService(EmbeddedCacheManager)]. 
```

有人有小费吗？我已经确认 beans.xml 在 src\main\webapp\WEB-INF 中，并且我不会发布多个 jar。这只是一个项目。

```
@Inject public SeatAllocationService(EmbeddedCacheManager manager) { 
    Configuration allocation = new ConfigurationBuilder()
        .transaction()
        .transactionMode(TransactionMode.TRANSACTIONAL) 
        .transactionManagerLookup(new JBossTransactionManagerLookup()) 
        .lockingMode(LockingMode.PESSIMISTIC) 
        .loaders()
        .addFileCacheStore()
        .purgeOnStartup(true) 
        .build(); 
    manager.defineConfiguration(ALLOCATIONS, allocation); 
    this.cache = manager.getCache(ALLOCATIONS); 
} 
```

POM 片段：

```
<dependencyManagement>
    ...
    <artifactId>jboss-javaee-6.0-with-infinispan</artifactId>
    ...
</dependencyManagement>

<dependencies>
    ...
    <artifactId>infinispan-core</artifactId>
    ...
</dependencies> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:36:04.693

我的猜测是这是一个 Infinispan 类，而你的类路径上没有 Infinispan。

# powershell - 有条件地加载配置文件中的管理单元

> ID：15888732
> 
> 赞同：2
> 
> 时间：2013-04-08T20:50:45.793
> 
> 标签：powershell, command, conditional, loading

我们有一个使用 PowerShell 的内部应用程序。在我的个人资料 (Microsoft.PowerShell_profile.ps1) 中，我添加了对我们创建的各种管理单元的引用：

```
#
# Profile for Joe Blow
#
Add-PSSnapIn CompanySnapin
Add-PSSnapin PowerShellTestTools
Add-PSSnapin SqlServerCmdletSnaps -ErrorAction SilentlyContinue 
```

我遇到的问题是，当我启动这个内部应用程序时，上面的代码行会抛出错误。

我的问题是，有没有办法（在我的个人资料脚本中）可以测试谁或什么试图打开个人资料并做相应的事情？

示例可能是：

```
if (!internalApplication)
{
    Add-PSSnapIn CompanySnapin
    Add-PSSnapin PowerShellTestTools
    Add-PSSnapin SqlServerCmdletSnaps -ErrorAction SilentlyContinue
} 
```

所以如果我启动 PowerShell 命令行实用程序，我会得到管理单元。否则，不会“添加”任何内容。

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:49:12.283

这实际上取决于自定义应用程序/主机的实现。这也意味着至少有几种方法可以给猫剥皮。

您可以从检查是否`$Host.Name`不同开始。下一步 - 检查某些属性是否存在/设置（如`$Host.UI.RawUI.BackgroundColor`）。

一旦你知道了区别 - 你只需要放入任何导致问题的代码，`if {} else {}`你应该很高兴。

# c# - Autofac 和 WinForms 集成问题

> ID：15888739
> 
> 赞同：3
> 
> 时间：2013-04-08T20:51:28.660
> 
> 标签：c#, winforms, autofac

我有一个使用 Autofac 和 MVP 模式的非常简单的 WinForms POC。在这个 POC 中，我通过 Autofac 的 Resolve 方法从父表单打开一个子表单。我遇到的问题是子表单如何保持打开状态。在`Display()`子窗体的方法中，如果我调用`ShowDialog()`子窗体保持打开状态，直到我关闭它。如果我调用`Show()`，子窗体会闪烁并立即关闭 - 这显然不好。

我已经为将 Autofac 集成到 WinForms 应用程序进行了大量搜索，但是我没有找到任何关于 Autofac/WinForms 集成的好的示例。

我的问题是：

1.  用我的方法显示非模态子表单的正确方法是什么？
2.  有没有比我的方法更好的方法在 WinForms 应用程序中使用 Autofac？
3.  如何确定没有内存泄漏以及 Autofac 是否正确清理子窗体的模型/视图/演示者对象？

下面仅显示相关代码。

谢谢，

凯尔

```
public class MainPresenter : IMainPresenter
{
    ILifetimeScope container = null;
    IView view = null;

    public MainPresenter(ILifetimeScope container, IMainView view)
    {
        this.container = container;
        this.view = view;
        view.AddChild += new EventHandler(view_AddChild);
    }

    void view_AddChild(object sender, EventArgs e)
    {
        //Is this the correct way to display a form with Autofac?
        using(ILifetimeScope scope = container.BeginLifetimeScope())
        {
            scope.Resolve<ChildPresenter>().DisplayView(); //Display the child form
        }
    }

    #region Implementation of IPresenter

    public IView View
    {
        get { return view; }
    }

    public void DisplayView()
    {
        view.Display();
    }

    #endregion

}

public class ChildPresenter : IPresenter
{
    IView view = null;

    public ChildPresenter(IView view)
    {
        this.view = view;
    }

    #region Implementation of IPresenter

    public IView View
    {
        get { return view; }
    }

    public void DisplayView()
    {
        view.Display();
    }

    #endregion

}

public partial class ChildView : Form, IView
{
    public ChildView()
    {
        InitializeComponent();
    }

    #region Implementation of IView

    public void Display()
    {
        Show(); //<== BUG: Child form will only flash then instantly close.
        ShowDialog(); //Child form will display correctly, but since this call is modal, the parent form can't be accessed
    }

    #endregion

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T03:23:18.777

看看这段代码：

```
using(ILifetimeScope scope = container.BeginLifetimeScope())
{
    scope.Resolve<ChildPresenter>().DisplayView(); //Display the child form
} 
```

首先，您最好使用子生命周期范围。如果您从顶级容器中解析，则对象将与该容器一样长（通常是应用程序的整个生命周期）。

但是，这里有一个问题。`DisplayView`调用时`Form.Show`，它立即返回。`using`块结束，子作用域被释放，它的所有对象（包括视图）也被释放。

在这种情况下，您不需要`using`声明。您要做的是将子生命周期范围绑定到视图，以便在关闭视图时释放子范围。请参阅我[的`FormFactory`其他答案](https://stackoverflow.com/a/8855283/644812)之一中的示例。还有其他方法可以使这个想法适应您的架构 - 例如，您可以在注册（ContainerBuilder）中进行。

# php - 在 Codeigniter 中销毁会话后启动会话

> ID：15888741
> 
> 赞同：0
> 
> 时间：2013-04-08T20:51:29.860
> 
> 标签：php, codeigniter, session

在我的程序中，我通过在登录下一个用户之前销毁其会话来确保前一个用户已注销，但在销毁会话后，`$this->session->sess_destroy()`我只会在尝试登录下一个用户时出错（会话相关操作）

如何重新启动会话？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:11:38.083

销毁会话时，您做对了，您必须重定向或重新加载您的 url 以重新启动会话。

# google-chrome-extension - Chrome 应用程序中的选项卡/窗口

> ID：15888742
> 
> 赞同：0
> 
> 时间：2013-04-08T20:51:30.020
> 
> 标签：google-chrome-extension, google-chrome-app

似乎 chrome 应用程序无法在浏览器中呈现为选项卡...我碰巧喜欢 chrome 选项卡界面，不得不尝试在 html/css/js 中重新实现它是一种耻辱。难道真的没有办法在chrome应用层面做tab管理吗？所有新窗口都必须是外壳/面板级别的窗口吗？

我可以想象应用程序的场景，他们希望为浏览器提供与扩展相关的功能……为什么要让用户（现在必须安装应用程序和扩展程序）更加困惑才能获得完整的功能集?

这里真的没有中间立场吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T03:39:15.830

Chrome 应用程序与浏览器是分开的。这是一种非常深思熟虑的方法，不太可能改变。

对于被视为应用程序的应用程序，而不是网站，无论连接如何，它们都始终可用，它们需要被视为独立于浏览器。我们发现让应用程序在浏览器之外启动和运行对于用户将它们概念化为应用程序非常重要。

将应用程序排除在浏览器之外还有安全原因。他们可以访问网站和扩展程序无法访问的 API，但为了实现这一点，他们也被单独设置为沙盒，并且无法访问浏览器。

扩展程序和应用程序可以通过消息进行通信。用户可能需要同时安装应用程序和扩展程序并不理想；我们一直在寻找某种形式的捆绑来简化它。

# css - dt（向左浮动）和第一个 dd（向右浮动）在同一行

> ID：15888745
> 
> 赞同：0
> 
> 时间：2013-04-08T20:51:41.877
> 
> 标签：css, css-float

我正在使用定义列表来定义简历的各个部分。

我想让每个 dt 和它的第一个 dd 显示在同一行。dt 应该在左边， dd 在右边。我希望每个 dt 的剩余 dds 显示在 dt 下方。

我还需要它来响应，因此随着屏幕宽度的减小，第一个 dd 会转到下一行。

现在，我似乎无法让花车在正确的位置清除。

有任何想法吗？

这是我的代码：http: [//jsfiddle.net/WgkZp/](http://jsfiddle.net/WgkZp/)

**HTML：**

```
<dl> 
<dt class="position">Position Name 1</dt>
<dd class="side-time clearfix">
    <time datetime="2010-08-01" class="start">August 2010</time><span class="end">Present</span>
</dd>
<dd class="organization first">Organization Name</dd>
<dd>Location, USA</dd>
<dd class="additional">
    <ul>
        <li>Described task 1</li>
        <li>Described tesk 2</li>
    </ul>
</dd> <dt class="position">Position Name 2</dt>

<dd class="side-time clearfix">
    <time datetime="2010-08-01" class="start">August 2010</time><span class="end">Present</span>
</dd>
<dd class="organization first">Organization Name</dd>
<dd>Location, USA</dd>
<dd class="additional">
    <ul>
        <li>Described task 1</li>
        <li>Described tesk 2</li>
    </ul>
</dd> <dt class="position">Position Name 3</dt>

<dd class="side-time clearfix">
    <time datetime="2010-08-01" class="start">August 2010</time><span class="end">Present</span>
</dd>
<dd class="organization first">Organization Name</dd>
<dd>Location, USA</dd>
<dd class="additional">
    <ul>
        <li>Described task 1</li>
        <li>Described tesk 2</li>
    </ul>
</dd> 
```

**CSS：**

```
dl {
  margin: 0 0 0 20px;
  overflow: hidden;
}

dt {
  margin-top: 10px;
  float: left;
}

dt.first {
  margin: 0;
}

dd {
  margin: 0;
  padding: 0;
}

dd ul {
  margin-bottom: 0;
}

dd time, dd .end {
  font-style: italic;
}

dd time.start:after {
  content:'\2013';
}

dd.side-time {
  float: right;
}

.clearfix {
  *zoom: 1;
}

.clearfix:before,
.clearfix:after {
  display: table;
  content: "";
  line-height: 0;
}

.clearfix:after {
  clear: both;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:59:56.563

```
dd {
    clear:both;
}

dt + dd{
    clear: none;   
} 
```

[http://jsfiddle.net/WgkZp/1/](http://jsfiddle.net/WgkZp/1/)

# .net - 带有 ComponentResourceManager 语法错误的通用 UserControl

> ID：15888746
> 
> 赞同：2
> 
> 时间：2013-04-08T20:51:52.457
> 
> 标签：.net, vb.net, winforms, windows-forms-designer

在我的 WinForms 项目（VS2010，.NET 4.0）中，我有一个名为 的用户控件`MyView`，它是从`System.Windows.Forms.UserControl`. 然后我将此控件修改为通用用户控件：

```
Partial Class MyView(Of TEntity As {New, Class})
        Inherits System.Windows.Forms.UserControl

     ' source code here

End Class 
```

不幸的是，VS Winforms Designer 自动生成的`InitializeComponent()`代码带有 vb.net 语法错误并产生编译错误：

```
 Dim resources As System.ComponentModel.ComponentResourceManager = 
New System.ComponentModel.ComponentResourceManager(GetType(MyView)) 
```

而不是上面的代码行，应该有：

```
 Dim resources As System.ComponentModel.ComponentResourceManager = 
New System.ComponentModel.ComponentResourceManager(GetType(MyView(Of TEntity))) 
```

如何修复 VS2010 WinForms Designer 的这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T14:54:13.527

带有一些解释和建议解决方法的相关主题：[Fix embedded resources for a generic UserControl](https://stackoverflow.com/questions/1627431/fix-embedded-resources-for-a-generic-usercontrol)

很可能它是 VS2010 的错误。

绕过方式与修复使用 VS Winforms Designer 与从通用类型派生的控件和表单的 VS 限制的已知方法非常相似。然而，它涉及创建额外的附件类。

# .htaccess - .htaccess 为 404 重定向添加异常到特定子目录

> ID：15888752
> 
> 赞同：0
> 
> 时间：2013-04-08T20:52:16.287
> 
> 标签：.htaccess, redirect, subdomain, http-status-code-404

子目录是 /addon/ 它存储我的子域（即插件域）的所有数据。在这个子目录中，我还存储了我的主域数据，我的主域是 website.com

```
RewriteEngine On
    RewriteCond %{HTTP_HOST} ^(www.)?website.com$ [NC]
    RewriteCond %{REQUEST_URI} ^/addon/(.*)$
    RewriteRule ^(.*)$ - [L,R=404] 
```

好的，这部分完成了，如果我输入 website.com/addon/mysecondwebsite-com，我会得到 404。如果我输入 mysecondwebsite.com，我会看到 website.com/addon/mysecondwebsite-com 的内容。

这很棒，这就是我想要的。

*现在是棘手的部分，我已经将 website.com 设置为使用 website.com/addon/website-com。无需告诉我如何为 website.com 配置 /addon/website-com。我需要为配置为使用 /addon/website-com/ 的 website.com 禁用 404，*但我还需要确保如果我输入 website.com/addon/website-com 该目录返回 404.*

我的重写条件提到，如果我在我的主域 (website.com) 上输入 /addon/*，我将返回 404 错误。这对我的插件域非常有用，因为它们使用 /addon/ 而不是我的主域。但是我如何也阻止 /addon/* 但仍使用我的主域？

*   **website.com** = **404 / 坏**(website.com/addon/website-com)
*   **mysecondwebsite.com** = **200 / 好**(website.com/addon/mysecondwebsite-com)

*   **website.com/addon/mysecondwebsite-com** = **404 / 好**

*   **website.com/addon/website-com** = **404 / 好**

* * *

只是为了让您了解全貌，这是我的 /public_html/ 的 .htaccess 文件

```
# Part one block direct access to /addon/ folder
RewriteEngine On
        RewriteCond %{HTTP_HOST} ^(www.)?website.com$ [NC]
        RewriteCond %{REQUEST_URI} ^/addon/(.*)$
        RewriteRule ^(.*)$ - [L,R=404]

# Part two using /addon/website-com/ as website.com directory
        RewriteCond %{HTTP_HOST} ^(www.)?website.com$
        RewriteCond %{REQUEST_URI} !^/addon/website-com/
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteRule ^(.*)$ /addon/website-com/$1
        RewriteCond %{HTTP_HOST} ^(www.)?website.com$
        RewriteRule ^(/)?$ addon/website-com/index.php [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:08:33.783

用这个替换你的 404 处理程序：

```
ErrorDocument 404 /404.shtml

RewriteCond %{HTTP_HOST} ^(www\.)?website\.com$ [NC]
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+addon/ [NC]
RewriteRule (?!^404\.shtml$)^.*$ - [L,R=404,NC] 
```

# asp.net - 一条SQL查询2/3表

> ID：15888753
> 
> 赞同：1
> 
> 时间：2013-04-08T20:52:16.470
> 
> 标签：asp.net, sql, vb.net, sql-server-2012

我有三张桌子：`users, projects, user_project`

`user_project`包含`user_id, project_id`and `role_id`，其中`user_id`和`project_id`都是连接到`projects.project_id`and的主键`users.user_id`。

我想从表中获取与某个项目有关的所有用户的姓名和`users`姓氏。`projects``user_project`

我必须使用什么 SQL 语句？我在想这样的事情：

```
SELECT 
    users.name, users.surname 
FROM users 
WHERE users.user_id = user_project.user_id AND projects.project_id = @parameter 
```

我正在使用 SQL Server 2012 和 ASP.NET/VB.NET。

数据库图：

![在此处输入图像描述](https://i.stack.imgur.com/r5cBh.png)

[http://i.imgur.com/lrv52wO.png](https://i.imgur.com/lrv52wO.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T20:58:54.693

```
SELECT users.name, users.surname
FROM users u
INNER JOIN user_project up
ON u.user_id = up.user_id
WHERE up.project_id = @parameter 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T20:58:44.130

```
SELECT 
       users.name, users.surname 
FROM   users 
       inner join user_project 
         on users.user_id = user_project.user_id
WHERE  user_project.project_id = @parameter 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T20:59:03.563

这应该这样做。

```
SELECT users.name, users.surname 
FROM users 
INNER JOIN user_project ON user_project.user_id = users.user_id 
WHERE (user_project.project_id = @parameter) 
```

这里重要的线是开始的线`INNER JOIN`。您不需要该`project`表，因为该`project_id`列位于`user_project`. 例如，如果您想获取项目名称，则需要该`project`表。您可以通过编写另一个`INNER JOIN`.

```
INNER JOIN project ON project.project_id = user_project.project_id 
```

现在您已加入，您可以访问表中的所有列`project`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T20:59:53.353

您需要**加入**其他表格 - 从`Users`一直`User_Project`到`Projects`如果您想根据`Projects`表格中的某些内容进行选择：

```
SELECT 
    u.name, u.surname 
FROM users u
INNER JOIN user_project up ON u.user_id = up.user_id
INNER JOIN project p ON p.project_id = up.project_id
WHERE p.project_name = 'something' 
```

或至少链接表，如果您可以使用`project_id`as 条件：

```
SELECT 
    u.name, u.surname 
FROM users u
INNER JOIN user_project up ON u.user_id = up.user_id
WHERE up.project_id = @parameter 
```

**更新：**假设您的`Role`表`Users`再次通过链接表连接，`Users_role`那么您也需要它来选择角色名称：

```
SELECT 
    u.name, u.surname,
    RoleName = r.Name
FROM users u
INNER JOIN user_project up ON u.user_id = up.user_id
INNER JOIN user_roles ur ON u.user_id = ur.user_id
INNER JOIN role r ON ur.role_id = r.role_id
WHERE up.project_id = @parameter 
```

# html - 将工具提示尾部添加到 CSS 下拉菜单？

> ID：15888756
> 
> 赞同：4
> 
> 时间：2013-04-08T20:52:42.160
> 
> 标签：html, css, tooltip

我希望我的下拉菜单在每个下拉菜单下都有一个工具提示尾部。CSS 下拉教程很简单，但我不知道如何添加箭头。[见 jsfiddle](http://jsfiddle.net/FXQuincy/xFUun/)

![在此处输入图像描述](https://i.stack.imgur.com/RLfNW.jpg)

**HTML**

```
<nav>
<ul>
    <li><a href="#">Home</a></li>
    <li><a href="#">Tutorials</a>
        <ul>
            <li><a href="#">Photoshop</a></li>
            <li><a href="#">Illustrator</a></li>
            <li><a href="#">Web Design</a>
                <ul>
                    <li><a href="#">HTML</a></li>
                    <li><a href="#">CSS</a></li>
                </ul>
            </li>
        </ul>
    </li>
    <li><a href="#">Articles</a>
        <ul>
            <li><a href="#">Web Design</a></li>
            <li><a href="#">User Experience</a></li>
        </ul>
    </li>
    <li><a href="#">Inspiration</a></li>
</ul> 
```

**CSS**

```
<style>

nav {
margin: 100px auto; 
text-align: center;
}

nav ul ul {
display: none;
}

nav ul li:hover > ul {
    display: block;
}

nav ul {
background: #efefef; 
background: linear-gradient(top, #efefef 0%, #bbbbbb 100%);  
background: -moz-linear-gradient(top, #efefef 0%, #bbbbbb 100%); 
background: -webkit-linear-gradient(top, #efefef 0%,#bbbbbb 100%); 
box-shadow: 0px 0px 9px rgba(0,0,0,0.15);
padding: 0 20px;
border-radius: 10px;  
list-style: none;
position: relative;
display: inline-table;
}
nav ul:after {
    content: ""; clear: both; display: block;
}

nav ul li {
    float: left;
}
    nav ul li:hover {
        background: #4b545f;
        background: linear-gradient(top, #4f5964 0%, #5f6975 40%);
        background: -moz-linear-gradient(top, #4f5964 0%, #5f6975 40%);
        background: -webkit-linear-gradient(top, #4f5964 0%,#5f6975 40%);
    }
        nav ul li:hover a {
            color: #fff;
        }

    nav ul li a {
        display: block; padding: 25px 40px;
        color: #757575; text-decoration: none;
    }

nav ul ul {
    background: #5f6975; border-radius: 0px; padding: 0;
    position: absolute; top: 100%;
}
    nav ul ul li {
        float: none; 
        border-top: 1px solid #6b727c;
        border-bottom: 1px solid #575f6a; position: relative;
    }
        nav ul ul li a {
            padding: 15px 40px;
            color: #fff;
        }   
            nav ul ul li a:hover {
                background: #4b545f;
            }

nav ul ul ul {
    position: absolute; left: 100%; top:0;
}

</style> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T21:01:14.947

这通常是通过使用类似伪选择器的东西来完成的`:before`，比如：

```
nav ul ul:before {
    position: absolute;
    top: -9px;
    left:20px;
    display: inline-block;
    border-right: 9px solid transparent;
    border-bottom: 9px solid #EEE;
    border-left: 9px solid transparent;
    content: '';
} 
```

但是请记住，您的悬停和子菜单颜色是相同的，因此您可能需要对其进行一些样式设置以适应您的口味......

演示：http: [//jsfiddle.net/darkajax/vXdqu/](http://jsfiddle.net/darkajax/vXdqu/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T21:00:07.153

您可以使用 CSS 伪选择器`:before`和边框：http: [//jsfiddle.net/xFUun/2/](http://jsfiddle.net/xFUun/2/)

# python - 使用 pvpython 将数据文件类型阅读器添加到 paraview

> ID：15888757
> 
> 赞同：6
> 
> 时间：2013-04-08T20:52:42.197
> 
> 标签：python, vtk, paraview, pvpython

我知道您可以[将不同数据文件类型的阅读器添加](http://paraview.org/Wiki/Writing_ParaView_Readers)到 paraview，但是，所有人都在谈论在 c++ 中做一堆 VTK 的东西，以及（可能更糟）重新编译 paraview 以使其了解您的数据文件格式。另一方面，[paraview 也支持在 python 中编写脚本](http://paraview.org/Wiki/ParaView/Python_Scripting)。也许是我对 VTK 不熟悉，但是，对我来说，我似乎只能从 pvpython*操作VTK 对象。*有没有办法使用 pvpython 动态地将阅读器添加到 paraview？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-27T12:34:39.290

你想要的是一个“Python 可编程过滤器。请参阅[ParaView Wiki](http://www.paraview.org/Wiki/Python_Programmable_Filter)。这个[wiki 页面](http://www.paraview.org/Wiki/ParaView/Simple_ParaView_3_Python_Filters#CSV_Reader_.28Source.29)展示了如何用 Python 编写 CSV 阅读器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-11T09:00:40.773

随着时间的推移，ParaView 有了新的选择来实现这一目标。
值得一看的是 ParaView 中最近添加的[Python 算法](https://docs.paraview.org/en/latest/ReferenceManual/pythonProgrammableFilter.html#python-algorithm)功能。
[示例](https://gitlab.kitware.com/paraview/paraview/-/blob/master/Examples/Plugins/PythonAlgorithm/PythonAlgorithmExamples.py)在源代码中给出。

# c# - 在更新面板中更新中继器时存储用户输入

> ID：15888761
> 
> 赞同：0
> 
> 时间：2013-04-08T20:52:52.103
> 
> 标签：c#, asp.net, .net, webforms

我在 UpdatePanel 中有一个中继器。在中继器项目内，我有几个文本框。我还有“添加新”按钮可以动态地将新项目添加到中继器。问题是每次我按“添加新”时，所有用户输入都会被删除。如何在保留用户输入的情况下更新转发器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:04:17.520

每当发生 a`Postback`时，`Repeater`控制就会失去其状态。您可能希望对回发执行以下快速步骤。

1.  在代码隐藏中将转发器数据转换为某种形式的数据数组 (DA)。
2.  将空元素添加到 DA。
3.  将 DA 绑定回中继器控件。

# android - SQLite MissingFormatArgumentException

> ID：15888770
> 
> 赞同：0
> 
> 时间：2013-04-08T20:53:43.653
> 
> 标签：android, sqlite

我正在关注 Android 上的 SQLite 教程，现在被难住了。
非常感谢您的帮助！:)

我的代码是创建一个表示厨房库存的数据库，然后相应地添加/删除项目。
我使用的类：
KitchenItem - 厨房库存项目的表示
KitchenDbHelper - 扩展 SQLiteOpenHelper，以创建 DB
KitchenDataSource - 在 DB KitchenInventoryActivity 上实际添加/删除项目
- 设置布局和初始化 KitchenDataSource

但是当我尝试运行 KitchenInventoryActivity 时，我得到一个异常：
Exception Ljava/util/MissingFormatArgumentException; 初始化 LKitchenDbHelper 时抛出；
Thais 只是 onCreate() 中我新建 KitchenDataSource 的一部分。
我想捕获更多日志，但不幸的是我无法将日志添加到构造函数。:(
我相信大部分代码是无关紧要的，但仍会在下面发布代码。
任何帮助或建议将不胜感激！

KitchenDbHelper 的代码如下：

```
import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

//creates the DB
public class KitchenDbHelper extends SQLiteOpenHelper {

    private static final String DATABASE_NAME = "kitchen.db";
    private static final int DATABASE_VERSION = 1;
    public static final String TABLE_KITCHEN = "kitchen";

    //columns in database
    public static final String KEY_ID = "id";
    public static final String KEY_CATEGORY = "category";
    public static final String KEY_ITEM = "item";
    public static final String KEY_AMOUNT = "amount";

    private static final String DATABASE_CREATE_STATEMENT = 
            String.format("CREATE_TABLE %s ( %s INTEGER PRIMARY KEY, %s TEXT,     %s TEXT, %s TEXT;", 
                          TABLE_KITCHEN,
                          KEY_ID,
                          KEY_CATEGORY,
                          KEY_AMOUNT);

    public KitchenDbHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase database) {
        database.execSQL(DATABASE_CREATE_STATEMENT);
    }

    @Override
    public void onUpgrade(SQLiteDatabase database, int oldVersion, int newVersion) {
        database.execSQL("DROP TABLE IF EXISTS " + TABLE_KITCHEN);
        onCreate(database);
    }

} 
```

KitchenItem的代码：

```
import android.util.Log;

//this will be used as entries into KitchenDB
public class KitchenItem {
    //TODO: this will probably be modified in the future
    private long id;
    private String category;
    private String itemName;
    private String amount;

    public KitchenItem() {

    }

    public KitchenItem(int id, String category, String itemName, int amount) {
        this.id = id;
        this.category = category;
        this.itemName = itemName;
        this.amount = Integer.toString(amount);
    }

    public KitchenItem(String itemName, int amount) {
        this.itemName = itemName;
        this.amount = Integer.toString(amount);
    }

    public long getId() {
        return id;
    }

    public void setId(long id) {
        this.id = id;
    }

    public String getCategory() {
        return category;
    }

    public void setCategory(String category) {
        this.category = category;
    }

    public String getItemName() {
        return itemName;
    }

    public void setItemName(String itemName) {
        this.itemName = itemName;
    }

    public String getAmount() {
        return amount;
    }

    public void setAmount(int amount) {
        this.amount = Integer.toString(amount);
    }

    @Override
    public String toString() {
        Log.d("KITCHEN", "toString in KitchenItem");
        return "itemName";
    }
} 
```

KitchenDataSource 的代码：

```
import java.util.ArrayList;
import java.util.List;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;

public class KitchenDataSource {
    private SQLiteDatabase database;
    private KitchenDbHelper dbHelper;
    private String[] allColumns = {KitchenDbHelper.KEY_ID, 
                                     KitchenDbHelper.KEY_CATEGORY,
                               KitchenDbHelper.KEY_ITEM,
                               KitchenDbHelper.KEY_AMOUNT};

    public KitchenDataSource(Context context) {
        dbHelper = new KitchenDbHelper(context);
    }

    public void open() throws SQLException {
        database = dbHelper.getWritableDatabase();
    }

    public void close() {
        dbHelper.close();
    }

    public KitchenItem addItem(KitchenItem item) {
        ContentValues values = new ContentValues();
        values.put(KitchenDbHelper.KEY_CATEGORY, item.getCategory());
        values.put(KitchenDbHelper.KEY_ITEM, item.getItemName());
        values.put(KitchenDbHelper.KEY_AMOUNT, item.getAmount());

        long insertId = database.insert(KitchenDbHelper.TABLE_KITCHEN, null, values);

        Cursor cursor = database.query(KitchenDbHelper.TABLE_KITCHEN, 
                                       allColumns, 
                                   KitchenDbHelper.KEY_ID + " = " + insertId, 
                                   null, null, null, null);

        cursor.moveToFirst();
        KitchenItem newKitchenItem = cursorToKitchenItem(cursor);
        cursor.close();

        return newKitchenItem;
    }

    public KitchenItem getItem(int id) {
        Cursor cursor = database.query(KitchenDbHelper.TABLE_KITCHEN, 
                             new String[] {allColumns[0], allColumns[1], allColumns[2], allColumns[3]},
                             KitchenDbHelper.KEY_ID + "=?", 
                             new String[] {String.valueOf(id)},
                             null, null, null, null);
        if(cursor != null) {
            cursor.moveToFirst();
        }

        KitchenItem item = new KitchenItem(Integer.parseInt(cursor.getString(0)), 
                                       cursor.getString(1), 
                                       cursor.getString(2),
                                       Integer.parseInt(cursor.getString(3)));

        cursor.close();

        return item;
    }

    public List<KitchenItem> getAllItems() {
        List<KitchenItem> itemList = new ArrayList<KitchenItem>();
        Cursor cursor = database.query(KitchenDbHelper.TABLE_KITCHEN, 
                                   allColumns, null, null, null, null, null);

        cursor.moveToFirst();
        while(!cursor.isAfterLast()) {
            KitchenItem item = cursorToKitchenItem(cursor);
            itemList.add(item);
            cursor.moveToNext();
        }
        cursor.close();

        return itemList;
    }

    public int updateItem(KitchenItem item) {       
        ContentValues values = new ContentValues();
        values.put(KitchenDbHelper.KEY_CATEGORY, item.getCategory());
        values.put(KitchenDbHelper.KEY_ITEM, item.getItemName());
        values.put(KitchenDbHelper.KEY_AMOUNT, item.getAmount());

        return database.update(KitchenDbHelper.TABLE_KITCHEN, values, KitchenDbHelper.KEY_ID + " = ?", new String[] {String.valueOf(item.getId())});
    }

    public void deleteItem(KitchenItem item) {
        long id = item.getId();
        database.delete(KitchenDbHelper.TABLE_KITCHEN, 
                    KitchenDbHelper.KEY_ID + " = " + id,
                    null);
    }

    private KitchenItem cursorToKitchenItem(Cursor cursor) {
        KitchenItem item = new KitchenItem();
        item.setId(cursor.getLong(0));
        item.setCategory(cursor.getString(1));
        item.setItemName(cursor.getString(2));
        item.setAmount(Integer.parseInt(cursor.getString(3)));

        return item;
    }
} 
```

最后但并非最不重要的一点是 KitchenInventoryActivity：

```
import java.util.List;

import android.app.ListActivity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.ArrayAdapter;

public class KitchenInventoryActivity extends ListActivity {
    private KitchenDataSource dataSource;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        Log.d("Kitchen", "KitchenInventoryActivity onCreate");
        super.onCreate(savedInstanceState);
        setContentView(R.layout.kitchen_inventory_activity);

        dataSource = new KitchenDataSource(this);
        Log.d("Kitchen", "dataSource initialized");
        dataSource.open();

        List<KitchenItem> itemList = dataSource.getAllItems();
        ArrayAdapter<KitchenItem> adapter = new ArrayAdapter<KitchenItem>(this, 
                                                                      android.R.layout.simple_list_item_1, 
                                                                      itemList);
        setListAdapter(adapter);
    }

    public void onClick(View clickedButton) {
        @SuppressWarnings("unchecked")
        ArrayAdapter<KitchenItem> adapter = (ArrayAdapter<KitchenItem>)getListAdapter();
        KitchenItem item = null;
        switch(clickedButton.getId()) {
        case R.id.add:
            //TODO: using a preconstructed item for now, will need to add user input
            KitchenItem tempItem = new KitchenItem("Pizza", 5);
            item = dataSource.addItem(tempItem);
            adapter.add(item);
            break;
        case R.id.delete:
            //TODO: just deleting the first item for now, will need to add selection
            if(getListAdapter().getCount() > 0) {
                item = (KitchenItem)getListAdapter().getItem(0);
                dataSource.deleteItem(item);
                adapter.remove(item);
            }
            break;
        }
        adapter.notifyDataSetChanged();
    }

    @Override
    protected void onResume() {
        dataSource.open();
        super.onResume();
    }

    @Override
    protected void onPause() {
        dataSource.close();
        super.onPause();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:56:33.787

您的`CREATE`语句有五个替换字符（`%s`），但您只有四个变量...我假设您只是忘记了`KEY_ITEM`：

```
String.format("CREATE TABLE %s (%s INTEGER PRIMARY KEY, %s TEXT, %s TEXT, %s TEXT);", 
               TABLE_KITCHEN,
               KEY_ID,
               KEY_CATEGORY,
               KEY_ITEM,
               KEY_AMOUNT); 
```

另外，我更改`CREATE_TABLE`为`CREATE TABLE`并添加了缺少的`)`.
最后，Android 要求 Primary Key 具有 name `"_id"`，它不会`"id"`...

# ruby-on-rails - 安装 mysql2 gem - HAVE_UINT (ushort, uint 类型重定义错误)

> ID：15888780
> 
> 赞同：0
> 
> 时间：2013-04-08T20:54:29.293
> 
> 标签：ruby-on-rails, ruby, rvm, mysql2

是的，这是另一个关于安装 mysql2 gem 以在 Ruby on Rails 中使用的问题。但这是我无法在另一个问题中找到的错误。

我在 OS X Mountain Lion 上安装了 64 位 MySQL 和 RVM。尝试安装 mysql2 gem 时，我不断收到`make`关于重新定义`ushort`和`uint`mysql2_ext.h 的错误。我在几个不同的地方找到了该文件（显然是缓存的，因为当我重新运行命令时更改文件没有任何`gem install mysql2`作用）并在其中找到以下行：

```
#ifndef HAVE_UINT
#define HAVE_UINT
typedef unsigned short    ushort;
typedef unsigned int    uint;
#endif 
```

它确实在尝试重新定义`ushort`，`uint`即使它仍然拥有它们。我如何告诉它符号已经定义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:54:29.293

原来有一种方法可以指定您的 CFLAGS 以强制它识别 HAVE_UINT 定义。不是这个（显然 gem 安装设法忽略以这种方式设置的环境变量）：

> sudo env CFLAGS="-DHAVE_UINT" gem install mysql2

请参阅[此问题](https://stackoverflow.com/questions/6761670/is-there-any-way-to-change-gcc-compilation-options-for-a-gem)以了解如何执行此操作：

> gem install mysql2 -- --with-cflags=\"-DHAVE_UINT\"

它奏效了！

# javascript - 在 JavaScript 中创建带有数据的 json 文件，并将该文件发送给 JSONP 其他域

> ID：15888782
> 
> 赞同：0
> 
> 时间：2013-04-08T20:54:29.717
> 
> 标签：javascript, sql, json, dns, jsonp

我有一个很大的疑问需要你的帮助。

问题：因为我可以从 JS 代码创建 JSON 文件（带有数据）？

原因是我需要使用 JSONP，并且我想从其他域（即[http://www.example.com/data/clients.json?callback=?](http://www.example.com/data/clients.json?callback=?)）获取该数据，但这些数据存储在数据库中（ WebSQL），我需要将哪些数据写入 json 文件（即clients.json）

请我需要你的帮助，因为三天前我尝试这样做，但我还没有找到答案。

PS：对不起我的英语，不是我的母语。

# 编辑

对不起，我的问题很困惑。我再试一次，但步骤。

我需要用数据库（WebSQL）中的数据或记录编写一个 JSON 文件。实际上我的功能运行良好（添加记录、更新记录、删除），但我需要将该数据放入 json 文件中，因为我将使用下一个代码从其他域获取数据。

```
(function($) {
    var url = 'http://www.example.com/scripts/clients.json?callback=?';
    $.ajax({
    type: 'GET',
    url: url,
    async: false,
    jsonpCallback: 'jsonCallback',
    contentType: "application/json",
    dataType: 'jsonp',
    success: function(json) {
        console.dir(json.sites);
    },
    error: function(e) {
        console.log(e.message);
    }
});
})(jQuery); 
```

# ruby-on-rails - 如何正确处理嵌套资源/路由？

> ID：15888783
> 
> 赞同：0
> 
> 时间：2013-04-08T20:54:30.090
> 
> 标签：ruby-on-rails, routes, nested-routes

我正在尝试构建一个从[Michael Hartl 的 Railstutorial](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book)修改的 Rails 应用程序。代码位于[GitHub 上](https://github.com/maasha/sporenstregs)。

我正在使用以下嵌套资源：

```
resources :users do
  resources :scaffolds
end 
```

但我收到以下错误：

```
ActionView::Template::Error (undefined method `scaffolds_path' for #<#    <Class:0x007f87848019d0>:0x007f8782651948>):
4: 
5: <div class="row">
6:   <div class="span6 offset3">
7:     <%= form_for(@scaffold) do |f| %>
8:       <%= render 'shared/error_messages', object: f.object %>
9:       <%= f.text_field :name,        placeholder: "Scaffold name" %>
10:       <%= f.text_area  :description, placeholder: "Description" %> 
app/views/scaffolds/new.html.erb:7:in `_app_views_scaffolds_new_html_erb___1119296061714080468_70109999031900' 
```

我很困惑为什么它正在寻找`scaffolds_path`而不是`user_scaffolds_path`？

在`@scaffold`app/controller/scaffolds_controller.rb 中创建：

```
def new
  @scaffold = current_user.scaffolds.build
end 
```

检查`@scaffold`由此创建的对象显示：

```
'#<Scaffold id: nil, name: nil, description: nil, tax_id: nil, user_id: 36, created_at: nil, updated_at: nil>' 
```

转储`@scaffold`不显示任何`scaffolds_path`或`user_scaffolds_path`暗示其他问题的方法的方法？

用户模型`has_many :scaffolds`和脚手架模型`belongs_to :user`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:01:27.163

它与表单助手有关。如果您使用嵌套资源并且您**不想**直接对`Scaffold`对象执行控制器操作，那么您需要在表单视图和模型中执行以下操作。就像是：

```
# app/models/user.rb
class User < ActiveRecord::Base
  ...

  accepts_nested_attributes_for :scaffolds
end 
```

...在视图中...

```
<%= form_for(@user) do |f| %>
  ...
  <%= fields_for @user.scaffold do |scaffold_fields| %> 
```

...这将导致为`fields_for`您提供预期的路径`users_scaffolds_path`

请注意，您如何使用`fields_for`帮助程序的细节会根据它是一个`has_one`或`has_many`关系等而变化。第一次通过这个你可能只是把你的头发扯掉 - 如此公平的警告。

### 另一方面，如果...

...您想单独使用`Scaffold`对象**并**作为嵌套路由的一部分，您可以声明该路由两次 - 一次用于您想将其用作嵌套资源，一次用于您想单独使用它.

```
# config/routes.rb
resources :users do
  resources :scaffolds
end

resources :scaffolds 
```

有了这个，当你跑步时，你`rake routes`会看到所有标准动作。`users_scaffolds_path``scaffolds_path`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:46:11.983

缺少方法的原因是`form_for`视图中不知道我们正在嵌套。这是通过给它一个数组来解决的：

```
form_for([@user, @scaffold]) 
```

# visual-studio-2010 - 如果选中单选按钮，则使用隐藏的密码字符

> ID：15888784
> 
> 赞同：0
> 
> 时间：2013-04-08T20:54:30.423
> 
> 标签：visual-studio-2010

我想知道是否可以执行以下操作：

如果选中“RadioButton1”，则让它在“Textbox2.text”中显示带有密码字符的文本。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:04:00.270

使用[`UseSystemPasswordChar`](http://msdn.microsoft.com/en-us/library/system.windows.forms.textbox.usesystempasswordchar.aspx)属性：

```
Textbox2.UseSystemPasswordChar = (RadioButton1.Checked); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T20:59:39.237

```
if (RadioButton1.Checked)
{
     textBox2.PasswordChar = '*';
} else {
     textBox2.PasswordChar = '*';
} 
```

您可以将此代码放在 RadioButton CheckedChanged 事件中...

# c - 带有指向结构的指针数组的 strcpy() 的分段错误

> ID：15888789
> 
> 赞同：2
> 
> 时间：2013-04-08T20:54:45.720
> 
> 标签：c, string, pointers, segmentation-fault, strcpy

常数：

```
#define MAX_OPCODE_NAME_LEN 4 
```

我有一个结构数组：

```
OPCODE *mot[NUM_OPCODES]; 
```

结构定义：

```
typedef struct opcode {
char name[MAX_OPCODE_NAME_LEN + 1];
char format;
int type;
} OPCODE; 
```

在我的代码中：

```
strcpy(mot[0]->name, "hlt");
strcpy(mot[1]->name, "add");
strcpy(mot[2]->name, "sub"); // seg fault on this command
strcpy(mot[3]->name, "mul");
// ...more code follows 
```

我的代码在这里给了我一个分段错误，我不知道为什么，因为它应该有足够的空间来容纳 5 个字符（4 个字符后跟 '\0'），所以它不应该用完空间，而且我'我只是将字符串文字复制到静态内存位置。也许我错误地定义了结构或在错误的位置使用了指针箭头？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T20:58:14.257

```
OPCODE *mot[NUM_OPCODES]; 
```

是**指向 的指针数组`OPCODE`**。不是**s的****数组`OPCODE`**。

`OPCODE`您必须为存储在 mot 中的每个指针分配 OPCODE 内存，或者（对于当前代码更简单的方法）只需将 mot 设为s数组

```
OPCODE mot[NUM_OPCODES];
       ^^ 
```

并访问这些值

```
strcpy(mot[0].name, "hlt");
strcpy(mot[1].name, "add");  ....
             ^^ 
```

# android - 更新通知进度失败为什么？

> ID：15888793
> 
> 赞同：0
> 
> 时间：2013-04-08T20:54:50.250
> 
> 标签：android, upload

我的问题是我无法从我的`AsyncTask`.

我在这个问题上花了很长时间，但没有找到解决方案。我的目标是只能更改对话框进度条和文本。

我怎样才能使这个通知进度条工作？

这是我的代码：

```
private class excuteUploadFile extends
        AsyncTask<HttpResponse, Integer, HttpResponse> {

    long totalSize;
    int NOTIFICATION_ID;
    String filepath, fileName;
    String serverResponse = null;
    String urlServer = "http://myurl";
    NotificationManager mNotifyManager;
    Builder mBuilder;
    ProgressDialog pd;
    Boolean nofti_appended = false;
    JSONObject jsonfile = null;

    public excuteUploadFile(String filepath, String fileName) {
        this.filepath = filepath;
        this.fileName = fileName;

        Log.i("uploader", "Selected file name : " + fileName);
        Log.i("uploader", "Selected file path : " + filepath);

    }

    @Override
    protected void onPreExecute() {
        pd = new ProgressDialog(BabupMain.this);
        // pd.setMessage(getResources().getString(R.string.uploading_file));
        pd.setTitle(fileName);
        pd.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        pd.setCancelable(false);
        pd.setIcon(android.R.drawable.ic_menu_upload);
        pd.setButton(DialogInterface.BUTTON_NEGATIVE,
                getResources().getString(R.string.cancel),
                new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        dialog.dismiss();
                        cancel(true);
                    }
                });
        // hide button
        pd.setButton(DialogInterface.BUTTON_NEUTRAL,
                getResources().getString(R.string.hide),
                new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog, int which) {

                        dialog.dismiss();
                        Random r = new Random();
                        NOTIFICATION_ID = r.nextInt(80 - 65) + 1;
                        NOTIFICATION_ID++;
                        mNotifyManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
                        mBuilder = new NotificationCompat.Builder(
                                BabupMain.this);
                        mBuilder.setContentTitle(fileName)
                                .setContentText(
                                        getResources().getString(
                                                R.string.uploading_file))
                                .setOngoing(true)
                                .setSmallIcon(android.R.drawable.ic_menu_upload);
                        mBuilder.setProgress(100, 100, true);
                        mNotifyManager.notify(NOTIFICATION_ID, mBuilder.build());
                        nofti_appended = true;
                    }
                });

        pd.show();
    }

    @Override
    protected HttpResponse doInBackground(HttpResponse... arg0) {
        HttpClient httpClient = new DefaultHttpClient();
        HttpContext httpContext = new BasicHttpContext();
        HttpPost httpPost = new HttpPost(urlServer);

        try {
            Log.i("uploader", "Started " + fileName);

            if (isCancelled()) {
                og.i("uploader", "uploading has been canceled");
            }

            CustomMultiPartEntity multipartContent = new CustomMultiPartEntity(
                    new ProgressListener() {
                        @Override
                        public void transferred(long num) {
                            publishProgress((int) ((num / (float) totalSize) * 100));
                            Log.i("uploader", "uploading " + num + " OF "
                                    + totalSize);
                        }
                    });

            multipartContent.addPart("file", new FileBody(new File(filepath)));
            totalSize = multipartContent.getContentLength();
            Log.i("uploader", "Bytes to Send " + totalSize);
            // Send it
            httpPost.setEntity(multipartContent);
            HttpResponse response = httpClient.execute(httpPost, httpContext);
            serverResponse = EntityUtils.toString(response.getEntity());

            Log.i("uploader", "Server Response : " + serverResponse);

            return null;

        } catch (Exception e) {

            Log.i("uploader", "Uploading Error : " + e.getMessage());
        }
        return null;
    }

    @Override
    protected void onCancelled() {
        super.onCancelled();

        if (nofti_appended) {
            mNotifyManager.cancel(NOTIFICATION_ID);
        } else {
            pd.dismiss();
        }
    }

    @Override
    protected void onProgressUpdate(Integer... progress) {

        if (nofti_appended == true) {
            mBuilder.setProgress(100, progress[0], false);
        } else {
            pd.setProgress((int) (progress[0]));
        }

    }

    @SuppressWarnings("deprecation")
    @Override
    protected void onPostExecute(HttpResponse ui) {

        Log.i("uploader", "Done: " + fileName);

    }

} 
```

# c++ - Windows Netapi32

> ID：15888794
> 
> 赞同：1
> 
> 时间：2013-04-08T20:54:54.390
> 
> 标签：c++, c, windows, netapi32

我目前正在使用 访问 Windows `Netapi32`，`Netapi32.lib`目前我正在使用`c++`访问 api。我在检索计算机名称时遇到问题，目前是`NetFileEnum` [here](http://msdn.microsoft.com/en-us/library/windows/desktop/bb525378%28v=vs.85%29.aspx) on `FILE_INFO_3`structure [here](http://msdn.microsoft.com/en-us/library/windows/desktop/bb525375%28v=vs.85%29.aspx)之一。在文档中它说，

> fi3_username
> 
> 指向一个字符串的指针，该字符串指定哪个用户（在具有用户级安全性的服务器上）或哪台计算机（在具有共享级安全性的服务器上）打开了资源。请注意，Windows 不支持共享级安全性。如果定义了 _WIN32_WINNT 或 FORCE_UNICODE，则此字符串为 Unicode。

现在，我运行此脚本的网络确实具有**共享级别的安全性**，我只是不确定如何列出计算机名称。

## 相关代码

图书馆包括：

```
#pragma comment(lib, "Netapi32.lib")
#include <stdio.h>
#include <assert.h>
#include <windows.h> 
#include <lm.h> 
```

初始化结构：

`fstatus`在我的代码中定义为`NET_API_STATUS fStatus`，它是 I/O 结构。文档[在这里](http://msdn.microsoft.com/en-us/library/windows/desktop/bb525378%28v=vs.85%29.aspx)

如果`fstatus`成功返回值`NERR_Success`。

如果函数失败，返回值可以是以下错误代码之一。

*   `ERROR_ACCESS_DENIED`用户无权访问请求的信息。
*   `ERROR_INVALID_LEVEL`为 level 参数指定的值无效。
*   `ERROR_INVALID_PARAMETER`指定的参数无效。
*   `ERROR_MORE_DATA More`条目可用。指定一个足够大的缓冲区来接收所有条目。
*   **……**

更多[在这里](http://msdn.microsoft.com/en-us/library/windows/desktop/bb525382%28v=vs.85%29.aspx)

处理我使用的`if ((fStatus == NERR_Success) || (fStatus == ERROR_MORE_DATA))`

找不到用户名。

```
fStatus = NetFileEnum(
                flServerName, //Pointer to a string that specifies the DNS or NetBIOS name of the remote server on which the function is to execute. If this parameter is NULL, the local computer is used. 
                flBasePath, //Pointer to a string that specifies a qualifier for the returned information. If this parameter is NULL, all open resources are enumerated.
                flUserName, //Pointer to a string that specifies the name of the user or the name of the connection.
                dfLevel, //Pointer to a string that specifies the name of the user or the name of the connection. Can be either 2 or 3, I am using 3
                (LPBYTE*)&pFile, //Pointer to the address of the buffer that receives the information. The format of this data depends on the value of the level parameter. 
                fwPrefMaxLen, //pecifies the preferred maximum length of returned data, in bytes.
                &fwEntriesRead, //Pointer to a value that receives the count of elements actually enumerated.
                &fwTotalEntries, //Pointer to a value that receives the total number of entries that could have been enumerated from the current resume position.
                &fwResumeHandle); //Pointer to a value that contains a resume handle which is used to continue an existing file search.

NET_API_STATUS NetFileEnum(
  _In_     LMSTR servername,
  _In_     LMSTR basepath,
  _In_     LMSTR username,
  _In_     DWORD level,
  _Out_    LPBYTE *bufptr,
  _In_     DWORD prefmaxlen,
  _Out_    LPDWORD entriesread,
  _Out_    LPDWORD totalentries,
  _Inout_  PDWORD_PTR resume_handle
); 
```

以上的原始值：

```
 NET_API_STATUS fStatus;
   LPFILE_INFO_3 pFile = NULL;
   LPFILE_INFO_3 pTmpFile;
   DWORD dfLevel = 3;
   LPTSTR flServerName = NULL;
   LPTSTR flUserName = NULL;
   LPTSTR flBasePath = NULL;
   DWORD fwPrefMaxLen = MAX_PREFERRED_LENGTH;
   DWORD fwEntriesRead = 0;
   DWORD fwTotalEntries = 0;
   DWORD fwResumeHandle = 0; 
```

`pTmpfile`是第 3 级（[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/bb525375%28v=vs.85%29.aspx)的文档）缓冲区对象，

> bufptr [输出]
> 
> ```
> Pointer to the address of the buffer that receives the information. The format of this data depends on the value of the levelparameter. 
> ```

此缓冲区以这种格式返回数据，

```
typedef struct _FILE_INFO_3 {
  DWORD fi3_id;
  DWORD fi3_permissions;
  DWORD fi3_num_locks;
  LMSTR fi3_pathname;
  LMSTR fi3_username;
} FILE_INFO_3, *PFILE_INFO_3, *LPFILE_INFO_3; 
```

检索数据：

```
printf("\n\tComputer: %S\n", pTmpFile->fi3_username); //how do I retrieve computer name???
printf("\n\tid: %D\n", pTmpFile->fi3_id);
printf("\n\tpath: %S\n", pTmpFile->fi3_pathname); 
```

**重要的是要注意，我已经尝试过使用 vbnet 并且它可以工作，但不知何故无法弄清楚如何在 c++ 上做到这一点。

完整的测试程序：

```
#ifndef UNICODE
#define UNICODE
#endif
//Initialize the NetAPI Library
#pragma comment(lib, "Netapi32.lib")
#include <stdio.h>
#include <assert.h>
#include <windows.h>
#include <lm.h>
int wmain(int argc, wchar_t *argv[])
{
    //NetFile Enum, using 3 Level.
    NET_API_STATUS fStatus;
    LPFILE_INFO_3 pFile = NULL;
    LPFILE_INFO_3 pTmpFile;
    DWORD dfLevel = 3;
    LPTSTR flServerName = NULL;
    LPTSTR flUserName = NULL;
    LPTSTR flBasePath = NULL;
    DWORD fwPrefMaxLen = MAX_PREFERRED_LENGTH;
    DWORD fwEntriesRead = 0;
    DWORD fwTotalEntries = 0;
    DWORD fwResumeHandle = 0;
    DWORD fi;
    //
    // Check command line arguments.
    // Dont need this currently.
    //
    do
    {
        fStatus = NetFileEnum(flServerName,
        flBasePath,
        flUserName,
        dfLevel,
        (LPBYTE*)&pFile,
        fwPrefMaxLen,
        &fwEntriesRead,
        &fwTotalEntries,
        &fwResumeHandle);
        if ((fStatus == NERR_Success) || (fStatus == ERROR_MORE_DATA))
        {
            if ((pTmpFile = pFile) != NULL)
            {
                for (fi=0; fi < fwEntriesRead; fi++)
                {
                    assert(pTmpFile != NULL);
                    if (pTmpFile == NULL)
                    {
                        fprintf(stderr, "An access violation has occurred\n");
                        break;
                    }
                    printf("\n\tComputer: %S", pTmpFile->fi3_username);
                    printf("\n\tid: %d", pTmpFile->fi3_id);
                    printf("\n\tpath: %s", pTmpFile->fi3_pathname);
                    printf("\n\tLocks: %d\n", pTmpFile->fi3_num_locks);
                    pTmpFile++;
                    fwTotalEntries++;
                }
            }
        }
        else
        fprintf(stderr, "A system error has occurred: %d\n", fStatus);
        //
        // Free the allocated memory.
        //
        if (pFile != NULL)
        {
            NetApiBufferFree(pFile);
            pFile = NULL;
        }
    }
    //
    // Continue to call NetFilEnum while
    //  there are more entries.
    //
    while (fStatus == ERROR_MORE_DATA);
    if (pFile != NULL)
    NetApiBufferFree(pFile);
    return 0;
} 
```

**输出：**

从构建：

```
1>------ Build started: Project: Perfmon, Configuration: Release Win32 ------
1>Compiling...
1>file_enumerate.cpp
1>Linking...
1>Generating code
1>Finished generating code
1>Embedding manifest...
1>Build log was saved at "file://...."
1>Perfmon - 0 error(s), 0 warning(s)
========== Build: 1 succeeded, 0 failed, 0 up-to-date, 0 skipped ========== 
```

跑：

```
 Computer: User1 //prints only username, not computername (in our system, each user has the same username)
 id: 1005687
 path: c:\fips\library

 Computer: User2 //prints only username, not computername (in our system, each user has the same username)
 id: 1005689
 path: c:\fips\library\util 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T21:29:56.977

如果其他人想知道解决方案，我想通了。要查询与 相关联的文件数，`Computer`而不仅仅是，必须使用`User`该函数，[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/bb525378%28v=vs.85%29.aspx)的文档。语法如下所示，`NetFileEnum``NetFileEnum`

```
NET_API_STATUS NetFileEnum(
  _In_     LMSTR servername,
  _In_     LMSTR basepath,
  _In_     LMSTR username,
  _In_     DWORD level,
  _Out_    LPBYTE *bufptr,
  _In_     DWORD prefmaxlen,
  _Out_    LPDWORD entriesread,
  _Out_    LPDWORD totalentries,
  _Inout_  PDWORD_PTR resume_handle
); 
```

您必须在哪里传递`Computer Name`as `LMSTR username`（您可以通过查询`NetSessionEnum(502)`将返回网络中的所有计算机名称，[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/bb525382%28v=vs.85%29.aspx)的文档）来检索计算机名称，并且查询返回基于此处的[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/bb525374%28v=vs.85%29.aspx)`DWORD level`和`FILE_INFO_3`此处的[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/bb525375%28v=vs.85%29.aspx)的文件详细信息。`FILE_INFO_2`

# php - Mod_Rewrite URL

> ID：15888797
> 
> 赞同：0
> 
> 时间：2013-04-08T20:55:02.410
> 
> 标签：php, .htaccess, mod-rewrite

当前网址：

```
http://localhost/blog/profile.php?username=Username&page_type=following 
```

我希望它是：

```
http://localhost/blog/profile/Username/following 
```

当前的.htaccess：

```
RewriteEngine On
CheckCaseOnly On
CheckSpelling On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^profile/(.*)$ /blog/profile.php?username=$1&page_type=$2 [QSA,L] 
```

可以这样重写吗？还是有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:58:47.487

您需要两个捕获组：

```
RewriteRule ^profile/(.*?)/(.*)$ /blog/profile.php?username=$1&page_type=$2 [QSA,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T20:59:00.203

你没有`$2`for `page_type`the[`RewriteRule`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)模式

```
RewriteRule ^profile/(.*?)/(.*)$ /blog/profile.php?username=$1&page_type=$2 [QSA,L] 
```

# ios - 如何为 UITableView 中的选定单元格制作透明背景

> ID：15888799
> 
> 赞同：2
> 
> 时间：2013-04-08T20:55:04.250
> 
> 标签：ios, objective-c, xcode, uitableview

如何使单元格透明。我只想用我已经完成的复选标记显示选定的单元格：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)path {
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:path];

    if (cell.accessoryType == UITableViewCellAccessoryCheckmark) {
        cell.accessoryType = UITableViewCellAccessoryNone;
    } 
    else {
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
    }
} 
```

当我第一次创建单元格时，我执行下一行代码以摆脱蓝色背景

```
cell.selectionStyle = UITableViewCellSelectionStyleNone; 
```

但我有一个奇怪的问题，需要点击 2 次才能添加和删除复选框。也许这不是正确的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:12:36.997

您可以在此处阅读有关制作透明`UITableViewCell`s 的信息：[如何创建具有透明背景的 UITableViewCell](https://stackoverflow.com/questions/1008246/how-to-create-a-uitableviewcell-with-a-transparent-background)

至于你的第二个问题，看来这可能是你真正想要的：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)path {
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:path];
    cell.accessoryType = UITableViewCellAccessoryCheckmark;
}

- (void)tableView:(UITableView *)tableView didDeselectRowAtIndexPath:(NSIndexPath *)path {
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:path];
    cell.accessoryType = UITableViewCellAccessoryNone;
} 
```

# jmeter - 使用 if 语句处理 jmeter 并发用户。是好是坏？为什么？

> ID：15888803
> 
> 赞同：0
> 
> 时间：2013-04-08T20:55:14.307
> 
> 标签：jmeter, load-testing, performance-testing, stress-testing

处理用户工作流程和操作路径的最佳实践是什么？

我想知道我应该如何在 Jmeter 中处理我的并发用户，以及最好的方法是什么。主要问题是，如果下面显示的示例被认为对性能测试有好处？如果没有，有什么更好的方法？

我的测试：

```
CSV data config (list of users and passwords)
Thread group (30 users)
    Once Only Controller
        Login
    IF Controller (action 1) - Checks if username from CSV file matches
        LOOP Controller
            load page
            do action
            finish action
    IF Controller (action 2) - Checks if username from CSV file matches
        LOOP Controller
            load page
            do action
            finish action 
```

几乎如果控制器检查用户名是否匹配，则执行其他操作，直到下一次匹配。这样做的原因是仅隔离特定用户以执行特定操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-01T20:33:45.933

经过许多不同的经验和测试用例，我意识到对于功能/回归测试使用 IF 语句是可以的，但对于负载测试，最好使用具有这些用户的许多权限的单一登录。

这就是我最终完成该测试用例的方式

# c - void * 参数地址移位

> ID：15888804
> 
> 赞同：2
> 
> 时间：2013-04-08T20:55:14.377
> 
> 标签：c, embedded, codewarrior

我正在使用 Codewarrior 8.3（IDE 版本 5.9）对 56f8367 DSC 进行编程。

我正在使用受人尊敬的第三方软件，所以我想他们知道自己在做什么并且不想过多地弄乱他们的代码，但是他们正在玩弄传递 void * 参数，这是我不完全熟悉的东西和。

所以我有这个功能：

```
static void T_CALLBACK _transmit(
  void *pContext,
  TX_DATA *pTxDescriptor)
{
  CONTEXT *pLinkContext = (CONTEXT *)pContext;
  ...
} 
```

这是通过函数指针调用的。当我在这个函数调用之前停止处理器时，我可以看到 pContext 指向的地址是 0x1000，但是在这里转换之后，pLinkContext 指向的地址是 0x0800。这显然会导致问题，因为我们从内存的不同部分开始写入和读取。

字节寻址/对齐发生了一些奇怪的事情，它被“移位”超过 1 位。我知道出了什么问题，我只是不明白为什么，或者更重要的是，如何解决问题。

我应该寻找什么？

（编辑以添加每个评论请求的调用） - 不过，我不确定考虑到所有内容都隐藏在结构中并通过函数指针调用，这将有多大帮助。我可以说“pTprtContext->tmw.pChannel->pLinkContext”与 CONTEXT 的类型不同，pLinkContext 确实与 CONTEXT 的开头匹配，所以我认为他们只是试图将其插入其中。

```
static void T_LOCAL _transmitNextFrame(
  D_CONTEXT *pTprtContext)
{
  ...
  /* Transmit frame */
  pTprtContext->t.pChannel->pLink->pLinkTransmit(
    pTprtContext->t.pChannel->pLinkContext, &pTprtContext->linkTxDescriptor);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T21:14:24.790

你说“移位了 1 个字节”，但实际上只有一位，即数字除以 2。

这通常是在一个上下文中使用字节地址和在另一个上下文中使用（2 字节）字地址的结果。他们可能指的是同一个地址。

这有助于你破译它吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T10:37:27.800

我将 CodeWarrior 编译器用于 HC12 系列的 16 位微控制器。使用这个编译器，我可以选择一些内存模型来改变（以及其他几件事）指针的字节数。更具体地说，+small+ 内存模型使用`__near`16 位指针，而 +large+ 模型使用`__far`24 位指针。

如果您的代码是使用与第三方软件不同的内存模型编译的，并且编译器没有警告您，我想您可能会得到奇怪的结果。

# html - 将文本对齐到 div 的顶部

> ID：15888812
> 
> 赞同：1
> 
> 时间：2013-04-08T20:56:11.707
> 
> 标签：html, css

大家好，在我的页面上：http: [//www.gamingonlinux.com/sales/](http://www.gamingonlinux.com/sales/)我想将添加的价格、节省和提供商中的文本对齐到顶部，我该怎么做？

这是列的html：

```
<div class="row">
    <div class="left">
        {:screenshot} {:info}
    </div>
    <div class="date-column">
        {:date}
    </div>
    <div class="price-column">
        {:price}
    </div>
    <div class="middle">
        {:savings}
    </div>
    <div class="right">
        {:provider}
    </div>
</div> 
```

他们的CSS：

```
.left
{
    display: table-cell;
    padding: 14px;
}

.price-column
{
    display: table-cell;
    padding: 14px;
    width: 150px;
}

.date-column
{
    display: table-cell;
    padding: 14px;
    width: 150px;
}

.middle
{
    display: table-cell;
    width: 75px;
    padding: 14px;
}

.right
{
    display: table-cell;
    width: 155px;
    padding: 14px;
} 
```

在“left” div 内，屏幕截图和名称位于浮动的左右跨度内。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T20:59:07.553

就像在常规表格单元格上一样，您可以使用它`vertical-align:top;`来进行对齐。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T21:18:52.083

你只需要添加 float: left; 像这样到你的css（.left类）

```
.left
{
    display: table-cell;
    padding: 14px;
    float: left;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T21:02:31.257

轻松修复：

```
.row > div {
    vertical-align: top;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T21:07:34.147

如果我了解您的问题，请尝试此代码。`vertical-align`是不错的选择：

```
display: table-cell;
padding: 10px;
width: 150px;
text-align: center;
vertical-align: top; 
```

更多其他选择`vertical-align`是：

![在此处输入图像描述](https://i.stack.imgur.com/cClZI.png)

![在此处输入图像描述](https://i.stack.imgur.com/rdmms.png)

# xamarin.ios - xamarin VisualStudio for ios 中没有附加设备

> ID：15888823
> 
> 赞同：24
> 
> 时间：2013-04-08T20:57:21.203
> 
> 标签：xamarin.ios, xamarin

当我尝试使用 Visual Studio 中的 IOS 模拟器时，我遇到了真正的麻烦。所以我使用xamarin（最新稳定版本）在VS中创建了一个hello world应用程序，我将项目设置为主项目，当我用mac刷新连接时，我无法选择应该在selectList中显示的设备。消息是“未连接设备”：

![错误图片](https://i.stack.imgur.com/Hl8zh.png)

如果我尝试在主机 mac 上使用 xamarin studio，一切都很好，示例应用程序构建在 iphone 模拟器上：

![在 mac 主机上](https://i.stack.imgur.com/DjpdL.png)

感谢帮助我！

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-09-04T19:17:09.857

我知道这个问题已经得到解答，但是当我遇到问题时我发现了它，它没有帮助......但我确实找到了解决方案：

在VS2012的调试菜单下，点击配置管理器

![配置管理器菜单](https://i.stack.imgur.com/kMHYl.png)

确保设置了 iPhone 模拟器（或 iPad，如果需要）...

![在此处输入图像描述](https://i.stack.imgur.com/18MMo.png)

默认似乎正在寻找物理设备...

希望这可以帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-08T20:59:42.283

您确定设备连接到 Mac 而不是 Windows 机器？您是否尝试过从 Mac 上的 Xamarin Studio 中的同一设备进行调试？

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-05-10T03:19:20.370

有同样的问题。问题是当我加载我的解决方案时，Visual Studio 2012 决定选择一个库项目作为“启动项目”。

Rt 单击 ios 项目，选择“设置为启动项目”并填充设备列表。

PS：Visual Studio 你现在应该已经够大了，可以弄清楚这一点。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-06-30T15:03:02.683

当我遇到这个问题时，我运行了另一个连接到 Mac 的 Visual Studio 实例。

显然，您一次只能连接 VS 实例。

检查 Visual Studio 输出窗口中的服务器日志以获取更多线索：

![在此处输入图像描述](https://i.stack.imgur.com/95U5b.png)

关闭 Visual Studio 的另一个实例允许我连接到我想要调试的实例

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-03-18T02:04:25.023

我发现有些东西不见了。对我来说，在 Visual Studio 2013 中，出于某种原因，他们从工具栏中删除了解决方案平台。这使得在不打开配置管理器的情况下无法从 iPhone 切换到 iPhoneSimulator。所以，要解决这个问题。

单击工具/自定义，然后选择“命令”选项卡，然后选择“工具栏：”单选按钮并单击其右侧的下拉菜单，然后选择“标准”作为您正在使用的工具栏。

现在，单击“添加命令”并从左侧的类别中选择“构建”，然后向下滚动命令，直到找到“解决方案平台”。选择那个并单击确定。然后单击“关闭”按钮。您现在将在标准工具栏上的解决方案配置下拉列表旁边看到一个额外的下拉列表。

这将允许您轻松地从 iPhoneSimulator 和 iPhone 切换。当你想插入一个实际设备时使用 iPhone，当你想选择一个模拟设备时使用 iPhoneSimulator。

希望这可以帮助某人。当我离开设备并尝试使用模拟器时，我也花了很多时间试图弄清楚这一点。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-08-25T03:45:18.160

重新启动 Visual Studio 2010 对我有用。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-04-22T12:13:54.350

不同的东西对我有用（Windows 8.1 和 Visual Studio 2013）：

*   重新启动 Visual Studio
*   将“iPhoneSimulator”设置为平台（仅工作一个）
*   在属性中 - iOS 应用程序将“部署目标”版本更改为较低的数字（6.0 对我有用）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-02-10T13:14:40.563

除了根据@Chamkila 的回答检查您是否选择了正确的启动项目外，请检查您是否没有通过尝试通过 Visual Studio 打开项目的 Info.plist 文件来意外破坏它。

# ios - IOS MPMoviePlayerViewController 无限加载

> ID：15888826
> 
> 赞同：7
> 
> 时间：2013-04-08T20:57:30.563
> 
> 标签：ios, media-player, mpmovieplayercontroller, video-player

我正在开发一个 IOS 应用程序（使用 Storyoard）。我有一个视图控制器：

```
//movieViewController.h

#import <UIKit/UIKit.h>
#import <MediaPlayer/MediaPlayer.h>

@interface movieViewController : UIViewController {

    MPMoviePlayerViewController *moviePlayer;

}

@property (strong, nonatomic) MPMoviePlayerViewController *moviePlayer;
-(void) playMovie;

@end

//movieViewController.m
- (void)viewDidLoad
{
    [super viewDidLoad];
// Do any additional setup after loading the view.
    [self playMovie];
}

-(void)playMovie
{
    NSString *videoPath = [[NSBundle mainBundle] pathForResource:@"movie"
                                                      ofType:@"mov"];

    moviePlayer = [[MPMoviePlayerViewController alloc] initWithContentURL:[NSURL
                                                     fileURLWithPath:videoPath]];
[self presentMoviePlayerViewControllerAnimated:moviePlayer];
} 
```

当我运行时，我看到我的 viewController 带有一个“正在加载...”，这需要永远。 ![在此处输入图像描述](https://i.stack.imgur.com/qn4ao.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:13:26.470

你应该打电话`-prepareToPlay`和/或`-play`。Per[`MPMoviePlayerController`](http://developer.apple.com/library/ios/#documentation/MediaPlayer/Reference/MPMoviePlayerController_Class/Reference/Reference.html)的文档：

> 从 iOS 5.0 开始，为了便于更细粒度的播放控制，新的电影播放器​​不会自动准备播放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-05T07:11:02.407

```
-(IBAction)startVideo:(id)sender
{
    NSURL *video = [[NSURL alloc] initWithString:@"http://www.w3schools.com/html/movie.mp4"];
    MPMoviePlayerViewController *controller = [[MPMoviePlayerViewController alloc]initWithContentURL:video];
    controller.view.frame = CGRectMake(20, 50, 280, 180);

    控制器.movi​​ePlayer.view.center = self.view.center;
    [self.view addSubview:controller.view];

    [controller.movi​​ePlayer prepareToPlay];
    [controller.movi​​ePlayer 播放];
}
```

# html - 需要帮助制作悬停时打开的子菜单

> ID：15888828
> 
> 赞同：-3
> 
> 时间：2013-04-08T20:57:36.783
> 
> 标签：html, css, menu, hover, submenu

我有一个我已经构建的菜单目前运行良好，我正在尝试添加当鼠标悬停在菜单项上时出现的子菜单项。有谁知道如何做到这一点？

```
<div id="menu">
            <a  href="#" >Home</a>
            <a  href="#">Submit New Record</a>
            <a   href="#">Sales by Salesperson</a>
            <a   href="#">Total Sales</a>
            <a  href="#" >Sales by Issue</a>
            <a  href="#" >Sales by Ad Size</a> 
            <a  href="#" >Add New User</a>  
            <a href="#">Edit Record</a> 
            <a href="#">Logout</a>
            </div></center>
<style>
#menu{
background-color:#3F9AD1;
height:75px;
width:1206px;
}

#menu a{
border-style:solid;
border-width:2px;
border-color:white;
padding-top: 20px;
float:left;
display:block;
width:130px;
height:70px;
text-decoration:none;
color:white;
text-align:center;
font-family: Arial;
/*box-shadow: 0 -7px 22px 6px #000000 inset;*/
}

#menu a:hover{
    color:#3F9AD1;
    background-color:white;

#html { 
height: 100%; 
margin-bottom: 0.01em;
overflow-y: scroll;
}

</style> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T21:04:15.953

我通常这样做：

```
<ul class="menu">
    <li>Main Menu Item
        <ul class="submenu">
            <li>Sub Menu Item</li>
        </ul>
    </li>
</ul> 
```

然后像这样的CSS：

```
ul.submenu {
    display: none;
}

li:hover ul.submenu {
    display: block;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T21:01:11.173

你可以去这里学习使用他们的示例教程。这很容易。只处理你的悬停状态。

[http://line25.com/tutorials/how-to-create-a-pure-css-dropdown-menu](http://line25.com/tutorials/how-to-create-a-pure-css-dropdown-menu)

# solr - Solr 多词建议在使用全词时给出零结果

> ID：15888829
> 
> 赞同：3
> 
> 时间：2013-04-08T20:57:38.383
> 
> 标签：solr, autosuggest

字段定义

```
<field name="programDescriptionLookup"
       type="suggest_simple"
       indexed="true"
       stored="false"
       multiValued="true"/> 
```

字段类型和复制字段

```
<copyField source="programDescription" dest="programDescriptionLookup"/>

<fieldType name="suggest_simple" class="solr.TextField" positionIncrementGap="100">
    <analyzer type="index">
        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
        <filter class="solr.LowerCaseFilterFactory"/>
    </analyzer>
    <analyzer type="query">
        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
        <filter class="solr.LowerCaseFilterFactory"/>
    </analyzer>
</fieldType> 
```

存在 2 个文档，该字段具有以下值

```
<field name="programDescription">Great program for kids</field>
<field name="programDescription">Excellent program for Technology</field> 
```

当我搜索

```
http://127.0.0.1:8080/solr/core/posdSuggest?q=progra+fo

<response>
<lst name="responseHeader">
<int name="status">0</int>
<int name="QTime">3</int>
</lst>
<lst name="spellcheck">
<lst name="suggestions">
<lst name="progra">
<int name="numFound">1</int>
<int name="startOffset">0</int>
<int name="endOffset">6</int>
<arr name="suggestion">
<str>program</str>
</arr>
</lst>
<lst name="fo">
<int name="numFound">1</int>
<int name="startOffset">7</int>
<int name="endOffset">9</int>
<arr name="suggestion">
<str>for</str>
</arr>
</lst>
<str name="collation">program for</str>
</lst>
</lst>
</response> 
```

当我用完整的单词搜索时，我没有得到任何结果

```
http://127.0.0.1:8080/solr/core/posdSuggest?q=program+for

<response>
<lst name="responseHeader">
<int name="status">0</int>
<int name="QTime">1</int>
</lst>
<lst name="spellcheck">
<lst name="suggestions"/>
</lst>
</response> 
```

要获得查询`progra+fo`和的结果，需要进行哪些配置更改`program+for`？

# python - Python PEP 8：模块开头的空行

> ID：15888831
> 
> 赞同：13
> 
> 时间：2013-04-08T20:57:42.097
> 
> 标签：python, coding-style, pep8, pep

有一个[问题](https://stackoverflow.com/questions/2953250/python-pep8-blank-lines-convention)谁处理这个但不谈论我感兴趣的所有观点。

PEP 8 说关于空行：

```
Separate top-level function and class definitions with two blank lines. 
```

那么如果你有：

1.  只有一个类的模块：

    ```
    # -*- coding: utf-8 -*-

    class A(object):
        pass 
    ```

    **您是否用两个空行分隔类的开头和编码注释？**

2.  带有 import 语句和类的模块：

    ```
    # -*- coding: utf-8 -*-

    import module

    class B(object):
        pass

    class C(object):
        pass 
    ```

    **你是否用一个空行分隔导入语句和编码注释？**

    **导入语句和类的开头有两个空行？**

3.  和一个主模块：

    ```
    #!/usr/bin/env python
    # -*- coding: utf-8 -*-

    import module

    def main():
        a = module.A()
        return 0

    if __name__ == '__main__':
        status = main() 
    ```

    **是否用两个空行分隔导入语句和顶级函数？**

    **而顶级函数和条件语句的结尾有两个空行？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T21:12:06.320

[有一个名为pep8](https://pypi.python.org/pypi/pep8)的 Python 模块可以检查您的代码以查看它是否符合 pep8 指南。

我尝试在您列出的示例以及它们的几个变体上运行 pep8，一般来说，pep8 程序接受所有这些都符合 pep8 准则。所以基本上，你所有问题的答案都是**yes**。

确实存在某种程度的主观性——例如，您可以在主函数和`if __name__ == '__main__'`段之间有两个或一个换行符。但是，我不会太担心 pep8 合规性——只需下载并安装 pep8 程序以及其他代码分析器（例如[pylint](http://www.logilab.org/857)）。只要您的代码通过了这些测试，就足够了。

# javascript - DOJO 和 DIJIT 不能两次解析同一个 ID？

> ID：15888832
> 
> 赞同：0
> 
> 时间：2013-04-08T20:57:59.050
> 
> 标签：javascript, dynamic, dojo

我在使用 DOJO 时遇到问题，我将动态加载包含一些内容的 div，然后运行 ​​parser.parse(dom.byId("mainDiv")); 与各自的要求。第一次效果很好。但是第二次我最终遇到了一个问题，它只是显示不再激活或样式化的内容。

在第二次运行时，我所做的是删除 div 中的所有 html，然后用基本的未解析文本替换 html，然后我再次解析它。现在我猜测它必须与 dijit.registry 做一些事情，但是我无法确切找到问题所在，因为我尝试清除它也无济于事。您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T21:45:38.023

Dojo 通过指定的 id 跟踪它创建的对象/小部件。如果您再次对具有相同 id 的对象运行解析器，dojo 会尝试创建第二个实例，但已经有一个，因此它应该在您的 js 控制台中抛出错误（请检查）。

您可以将 id 留空，然后 dojo / parse 应该为您创建一个 id。Dojo 允许您通过类属性查找 dom 元素，这样您就可以将 div 元素传递给 parse() 函数，而无需为其指定显式 id。

另一种方法是在再次解析 div 元素之前销毁创建的小部件/对象，请看这里：

[Dojo 和注销小部件](https://stackoverflow.com/questions/2763983/dojo-and-unregistering-widgets)

引自[http://livedocs.dojotoolkit.org/dojo/parser#parse](http://livedocs.dojotoolkit.org/dojo/parser#parse)

> “如果您尝试两次解析相同的内容，或者解析提及现有小部件的 id 的内容，则会导致重复 id 的异常”

# c# - 本地网络上的自托管 ServiceStack REST 服务

> ID：15888834
> 
> 赞同：3
> 
> 时间：2013-04-08T20:58:03.667
> 
> 标签：c#, servicestack

我想知道是否有人可以提供帮助 - 我有一个本地网络（无线、我的电脑和一台连接到它的笔记本电脑），并且我尝试过托管一个使用 ServiceStack 开发的休息服务。如果我在计算机上运行应用程序（现在是控制台应用程序）并尝试使用机器 IP 或 127.0.0.1 访问服务，它工作正常 - 但如果我尝试从笔记本电脑访问它，使用计算机的 IP 它只是停止，并且永远不会调用 REST 服务。

我已经尝试关闭所有防火墙等，在管理员模式下运行所有​​内容但仍然没有..我错过了一些简单的东西来让它工作吗？

任何帮助深表感谢！

一些代码示例（我的 AppHost 类继承自 AppHostHttpListenerBase）

```
restServiceToStart.Value.Init ();
restServiceToStart.Value.Start (_HostUri); 
```

对于我的主机，_HostUri 设置为`"http://my-ip-address:8080/"`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T21:04:31.947

您尚未列出用于启动 AppHost 的代码（请在提问时进行描述），因此我假设您没有在听`http://*:{port}/`，例如来自[Self Hosting wiki](https://github.com/ServiceStack/ServiceStack/wiki/Self-hosting)：

```
var appHost = new AppHost();
appHost.Init();
appHost.Start("http://*:1337/"); 
```

通配符表示侦听每个`*`本地网络接口。

# mysql - mysql如果存在给出错误错误的语法？

> ID：15888837
> 
> 赞同：2
> 
> 时间：2013-04-08T20:58:06.840
> 
> 标签：mysql

我正在尝试在 MySQL 中使用 IF EXISTS，但我不断收到语法错误，我已经研究了正确的语法，但一切都不起作用......

我需要的是：如果查询存在，则更新否则插入新...

```
$queryString =  "IF EXISTS (SELECT * FROM $ONCALL_TABLE WHERE uid='$contextUser' AND submitid='$submitid' AND submitstatus=3) THEN UPDATE $ONCALL_TABLE SET uid='$contextUser', start_time='$onStr', end_time='$offStr', amount='$amount' ELSE INSERT INTO $ONCALL_TABLE (uid, start_time, end_time, amount) VALUES ('$contextUser','$onStr', '$offStr', '$amount') END IF"; 
```

错误消息：无法执行查询：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'IF EXISTS (SELECT * FROM timesheet_oncall WHERE uid='admin' AND submitid='136545' 附近使用正确的语法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T21:01:56.297

`REPLACE INTO`是你需要的。[http://dev.mysql.com/doc/refman/5.0/en/replace.html](http://dev.mysql.com/doc/refman/5.0/en/replace.html)

> REPLACE 的工作方式与 INSERT 完全相同，只是如果表中的旧行与 PRIMARY KEY 或 UNIQUE 索引的新行具有相同的值，则在插入新行之前删除旧行。

在你的情况下

```
REPLACE INTO 
$ONCALL_TABLE (uid, start_time, end_time, amount) 
VALUES ('$contextUser','$onStr', '$offStr', '$amount')
WHERE uid='$contextUser'; 
```

假设`uid`是一个`PRIMARY KEY`或`UNIQUE KEY`

**注意：**由于您问题中的代码包含 SQL 注入缺陷，我建议您阅读本文。[http://php.net/manual/en/security.database.sql-injection.php](http://php.net/manual/en/security.database.sql-injection.php)

# unit-testing - 在 groovy 中使用 memoize

> ID：15888842
> 
> 赞同：1
> 
> 时间：2013-04-08T20:58:20.323
> 
> 标签：unit-testing, groovy, tdd, memoization, spock

我目前正在使用 spock 在 groovy 中练习测试驱动开发。我有一组测试，其中 3 个不同的实现做同样的事情：迭代、递归和记忆。所以我创建了一个抽象类来保存测试，然后创建了 3 个不同的文件来返回具体的类实现来运行测试。我有迭代和递归的工作，但我遇到了 memoize() 的问题

```
import spock.lang.Specification
abstract class FibonacciTest extends Specification {
    private calculator
    abstract def getCalculator()
    def setup() {
        calculator = getCalculator()
    }
    def "test canary"() {
        expect:
        true
    }
    // more tests
}

class RecursiveFibonacciTest extends FibonacciTest {
    def getCalculator() {
        new RecursiveCalculator()
    }
}

class IterativeFibonacciTest extends FibonacciTest {
    def getCalculator() {
        new IterativeCalculator()
    }
}

class MemoizeFibonacciTest extends FibonacciTest {
    def getCalculator() {
        new MemoizeCalculator()
    }
}

class RecursiveCalculator {
    def getFibonacci(position) {
        if (position < 2) {
            1
        }
        else {
            getFibonacci(position - 1) + getFibonacci(position - 2)
        }
    }
}

class IterativeCalculator {
    def getFibonacci(position) {
        if (position < 2) {
            1
        }
        else {
            def value = 1
            def previousValue = 1
            for (i in 2..position) {
                def temporaryValue = previousValue
                previousValue = value
                value = temporaryValue + previousValue
            }
        value
        }
    }
} 
```

所以我已经进行了迭代和递归的工作，但是在让 memoize 工作时遇到了问题。我认为它应该可以工作，但它不是..有人知道我做错了什么吗？

```
class MemoizeCalculator {
    def getFibonacci = { position ->
        if (position < 2)
            1
        else
            getFibonacci.call(position - 1) + getFibonacci.call(position - 2)
    }.memoize()
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:13:49.553

您不能`getFibonacci`从声明它的同一语句中引用该变量。要么更改`getFibonacci.call`为，要么在分配变量 ( ) 之前`call`声明变量 ( )。`def getFibonacci``getFibonacci = ...`

# eclipse - 类似于比较编辑器的编辑器

> ID：15888848
> 
> 赞同：0
> 
> 时间：2013-04-08T20:58:33.873
> 
> 标签：eclipse, eclipse-plugin

是否有显示类似于 Eclipse 比较编辑器（简化）的编辑器的示例？我正在寻找一种创建编辑器的方法，该编辑器分为两部分，顶部是 DSL，底部是 DSL 的 AST。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:38:05.547

最好的起点是 org.eclipse.compare.CompareConfiguration 类。之后，您可以在 org.eclipse.ltk.internal.ui.refactoring.TextEditChangePreviewViewer.ComparePreviewer、org.eclipse.compare.internal.CompareEditor/org.eclipse.compare.CompareEditorInput 中查看用法...有很多编辑器/ Eclipse 中使用这些东西的视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T16:05:47.233

看起来我应该走的方向是在 createPartControl(Composite parent) 调用期间在编辑器中创建控件时使用类似 SashForm 的 Composite。

在玩弄了扩展 TextEditor 的编辑器之后，但任何编辑器都可以，我想出了这个：

```
public void createPartControl(Composite parent) {
    // TODO Auto-generated method stub
    final SashForm sashForm = new SashForm(parent, SWT.VERTICAL);
    sashForm.setLayout(new RowLayout());

    super.createPartControl(sashForm);

    Button label2 = new Button(sashForm, SWT.NONE);
    label2.setText("TEST2");
} 
```

它看起来像这样： ![在此处输入图像描述](https://i.stack.imgur.com/xA3CU.png)

# python - 为什么只有一些 Tkinter 回调函数需要有参数，而其他的不需要

> ID：15888849
> 
> 赞同：4
> 
> 时间：2013-04-08T20:58:35.020
> 
> 标签：python, callback, tkinter

如果这很重要，我正在使用 Python 2.7。

这是我为了好玩而写的代码：

```
def p():
    root = Tk()

    def cmd(event):
        print int(slider.get())

    slider = Scale(root, orient = "horizontal", from_ = 0, to = 100, command = cmd, state = "disabled")

    def enable():
        slider.config(state = "active")

    b = Button(root, text = "Enable slider", command = enable)

    b.grid()
    slider.grid(row = 1)

    root.mainloop() 
```

对于这段代码，我想知道为什么 Scale 的命令需要一个事件，而 Button 的命令却不需要。似乎对于 Tkinter 中的某些小部件，它们的命令需要将“事件”作为参数，而其他的则不需要。为什么？如何区分它们？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T21:12:19.180

`Scale` *不*参加活动。它采用当前值。试试这个：

```
def cmd(value):
    print int(value) 
```

如果您阅读[Tk 教程](http://www.tkdocs.com/tutorial/morewidgets.html#scale)，它会解释这一点：

> 有一个`"command"`配置选项，可让您指定在比例更改时调用的脚本。每次调用此脚本时，Tk 都会自动将比例尺的当前值作为参数附加（我们看到了类似的事情，其中​​额外的参数被添加到滚动条回调和它们滚动的小部件上）。

或者，如果您阅读了实际的[手册页](http://www.tcl.tk/man/tcl8.4/TkCmd/scale.htm#M7)：

> 指定每当通过小部件命令更改比例值时调用的 Tcl 命令的前缀。实际命令包含此选项，后跟一个空格和一个实数，表示比例的新值。

换句话说，区分它们的方法是阅读文档。不幸的是，[Tkinter 文档](http://docs.python.org/2/library/tkinter.html)并不是那么完整——它们假设您已经知道 Tcl/Tk 是如何工作的，或者如何自己查找它。这就是为什么文档从 Tk 文档来源的链接列表开始的原因。

如果您更喜欢通过反复试验来解决问题，则不难看出通过了什么：

```
def cmd(*args):
    print('Scale command says {}'.format(args))

def enable(*args):
    print('Button command says {}'.format(args)) 
```

但这并不总能告诉你你需要知道的一切。还有其他回调，其参数不够明显，无需更多工作即可弄清楚，或者是可配置的（例如，验证回调）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T21:14:49.683

当您设置绑定（使用`bind`）命令时，回调总是被赋予一个事件对象。

当您使用小部件的`command`属性时，不同的小部件会向命令发送不同的信息。在这种情况下，它们从不发送事件，但会发送其他类型的数据。这仅仅是因为不同的命令做不同的事情。

scale 小部件也不例外——您声称回调接受了一个事件，但这是错误的。它传递的是缩放小部件的当前值，而不是事件对象。

# ruby-on-rails - 路由资源未正确设置路由

> ID：15888850
> 
> 赞同：1
> 
> 时间：2013-04-08T20:58:35.803
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes, form-helpers

通常我希望`resources`将路线设置在

```
/groups/:id 
```

但是，当我打电话时，`rake routes`我得到

```
GET    /groups(.:format) groups#show 
```

此外，每当我使用视图辅助方法`groups_path(group.id)`时，它都会提供 url 链接

```
/groups.1 
```

最后在我的路由文件中

```
resource :groups 
```

编辑、更新和销毁操作也是如此。最后，它不会产生索引操作。我必须在编写资源方法后创建它。出了什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T21:06:36.463

复数该资源：

```
resources :groups 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T21:06:44.953

```
resources :groups 
```

代替

```
resource :groups 
```

# c++ - 调用派生类的虚函数时的段错误

> ID：15888851
> 
> 赞同：2
> 
> 时间：2013-04-08T20:58:41.860
> 
> 标签：c++, function, inheritance, segmentation-fault, virtual

当我调用派生类的虚函数时，我遇到了段错误问题。但是，如果我将函数的名称更改为与基类中的虚拟函数的名称不同，则不会发生这些段错误。这是一些代码：

```
//in main
//initialize scene objects
//camera
if((camera = (Camera*)malloc(sizeof(Camera))) == NULL){
  cout << "Could not allocate memory for camera" << endl;
}
//...code in middle
//inside file parsing...
//infile is an ifstream
//nextString is a char*
if(!strcmp(nextString,"camera")){
  camera->parse(infile); //segfault here
} 
```

这是基类头文件（.cpp 只在构造函数中实例化变量）：

```
class WorldObj{
public:
  WorldObj();
  ~WorldObj();
  virtual void parse(ifstream&) =0;
  vec3 loc; //location
}; 
```

这是我用来编写虚函数的 Camera 类中的代码：

```
void Camera::parse(ifstream &infile){
  //do parsing stuff
} 
```

parse() 在头文件中声明为 virtual void parse(ifstream&);

我的问题是，如果我将 Camera 中的 parse() 重命名为 CameraParse() 之类的名称，并且完全忽略了要实现的虚函数这一事实，则代码完全可以正常工作！

你能解释一下为什么调用虚函数会导致段错误吗？我检查了 Valgrind 是否有任何内存问题，它告诉我有 8 个字节的无效读/写。我理解这意味着我没有为我的对象正确分配内存，但我不知道分配哪里出错了。

任何帮助，将不胜感激 ：）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T21:01:35.297

你不能（只是）`malloc`一个非 POD 对象，你必须这样`new`做。

这是因为`malloc`保留了适量的空间，但不*构造*对象，这对于任何具有虚函数的类来说都是不平凡的，即使构造函数是默认的。

现在，具体问题仅在您进行虚函数调用时出现，因为这取决于执行的额外初始化`new`，但使用任何非 POD 类型的未构造实例仍然是错误的。

* * *

请注意，我使用 POD（*Plain Old Data*）作为只有微不足道初始化的任何事物的惰性速记。通常，如果一个类（或结构）或其任何成员或基类都*没有执行某些操作*的构造函数，则该类（或结构）是可以简单初始化的。出于我们的目的，每个具有一个或多个虚拟方法的类（即使它们是继承的，或者在数据成员中）都需要非平凡的初始化。

具体来说，Ben Voigt 的回答中的标准引用描述了开始对象生命周期的两个阶段（您可以安全地进行方法调用，尤其是虚拟方法调用的时间）：

> *   获得类型 T 的具有适当对齐和大小的存储，

当你打电话时会发生这种情况`malloc`

> *   如果对象有非平凡的初始化，它的初始化就完成了

*当*您使用`new`.

* * *

作为参考，这是最接近您现有代码的正常用法：

```
Camera *camera = new Camera;
// don't need to check for NULL, this will throw std::bad_alloc if it fails
camera->parse(file);
// don't forget to:
delete camera; 
```

不过，这是更好的风格：

```
std::unique_ptr<Camera> camera(new Camera);
camera->parse(file);
// destruction handled for you 
```

并且仅当您*确实*需要使用`malloc`或其他特定分配器时：

```
Camera *camera = (Camera *)malloc(sizeof(*camera));
new (camera) Camera; // turn your pointer into a real object
camera->parse(file);
// destruction becomes uglier though
camera->~Camera();
free(camera); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T21:02:29.900

使用 new，而不是 malloc。您分配了内存，但没有创建对象。使用 new 时，将使用相应的构造函数创建虚拟函数调度表，然后您才能使用它。例如：

```
if((camera = new (nothrow) Camera()) == NULL){
  cout << "Could not allocate memory for camera" << endl;
}

if(!strcmp(nextString,"camera")){
  camera->parse(infile); //segfault here
} 
```

或者，您可以使用简单的

```
camera = new Camera; 
```

在某处捕获可能的异常 bad_alloc。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T21:03:15.157

`malloc`不调用构造函数。

你必须改变（创建对象的 C++ 方式）

```
camera = (Camera*)malloc(sizeof(Camera))) 
```

到

```
camera = new Camera; // Now you camera object will be created and constructed. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T21:07:15.617

无用提供了正确的解释。这是标准中的要求（第 3.8 节）：

> 对象的生命周期是对象的运行时属性。如果一个对象是一个类或聚合类型，并且它或它的一个成员由一个普通默认构造函数以外的构造函数初始化，则称该对象具有非普通初始化。[注意：通过简单的复制/移动构造函数进行初始化是非平凡的初始化。——尾注]
> 
> 类型对象的生命周期`T`开始于：
> 
> *   获得具有适当对齐和大小的类型`T`的存储，**并且**
>     
>     
> *   **如果对象有非平凡的初始化，它的初始化就完成了。**
>     
>     
> 
> 类型对象的生命周期在以下情况下`T`结束：
> 
> *   如果`T`是具有非平凡析构函数的类类型，则析构函数调用开始，或者
>     
>     
> *   对象占用的存储空间被重用或释放。

# php - PHP/MySQL 隐藏文件链接

> ID：15888856
> 
> 赞同：0
> 
> 时间：2013-04-08T20:58:53.093
> 
> 标签：php, html, mysql

我正在使用 PHP 连接到 MySQL 数据库，客户可以登录到我的网站，它会根据他们的登录等列出表格中的行。

我需要能够`<a href="...."></a>`在数据库中显示指向文件名的链接，但我不希望用户能够看到文件的链接。

例如，他们可以下载文件`1234.pdf`，如果他们可以查看实际链接，他们可能会想到去同一个位置，但做的文件`5678.pdf`仅供其他用户下载。

所以基本上我想将链接隐藏在一个长字符串或其他东西中，但我不知道从哪里开始 - 有什么想法吗？

谢谢

编辑：

假设客户 A 登录，他们可以查看 table1 中的行

TABLE1 客户文件链接 A 1234.pdf A 5678.pdf B 8765.pdf B 4321.pdf

所以，我不希望客户 A 能够查看客户 B 的链接。

我的意思是，如果客户 A 将鼠标悬停在一个链接上并且可以看到主文件路径，他们可以在他们的 Web 浏览器中键入它，然后将文件名（猜测）更改为其他名称并下载另一个客户文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:05:46.987

如果您打算不让其他人看到文件链接，那么您可能也不希望搜索引擎也看到它们。禁止用户尝试此类内容的典型方法是拥有一个刷新文件的特定页面，而不是直接链接到文件。例如，

```
<a href="download.php?fileid=123">Download</a> 
```

然后`download.php`您可以检查用户权限[并使浏览器下载文件](https://stackoverflow.com/questions/7263923/how-to-force-file-download-with-php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T14:45:22.893

```
<?php 
    $file = 'file1234.pdf';
    $file_url = 'http://www.test.com/files/' . $file;
    header('Content-Type: application/octet-stream');
    header('Content-Transfer-Encoding: Binary'); 
    header('Content-disposition: attachment; filename="' . $file_url . '"'); 
    readfile($file_url);
    die();
?> 
```

我想这就是你需要的。

# grails - 贝宝沙盒 IPN 总是失败

> ID：15888860
> 
> 赞同：1
> 
> 时间：2013-04-08T20:59:01.877
> 
> 标签：grails, paypal, paypal-sandbox, paypal-ipn

我正在使用[http://grails.org/plugin/paypal](http://grails.org/plugin/paypal)插件开发一个 grails 应用程序。我已遵循所有说明，将我的应用程序配置为使用 dyndns（无 IP）。

我可以从我的网络外部访问我的应用程序。所有付款都是正确的，如果我点击“返回测试商店”链接，它会返回我的网站。

问题是没有 IPN 发送到我的 IPN 处理程序。

在 IPN 历史记录中，我可以看到所有处于错误状态的事务，但没有显示 http 响应代码。

每条消息重试 8 次。

通知 URL 正确。

我还能尝试什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:50:38.330

我自己回答，

看起来贝宝不会将 IPN 帖子发送到端口不是 80 或 443 的 URL

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T12:58:17.123

查看我在[此处](https://stackoverflow.com/questions/15778567/notify-url-never-call-when-buyer-paid-for-subscription/15788965#15788965)发布的故障排除步骤。这些可能会有所帮助。

# java - 我的不同会话被重复使用相同的最后一个活动和会话 ID，为什么？

> ID：15888862
> 
> 赞同：2
> 
> 时间：2013-04-08T20:59:05.140
> 
> 标签：java, spring, spring-security

我正在使用spring security，当我使用同一用户（我设置为可能有多个会话）从不同的浏览器登录时，数据从控制器（我从每个主体获取SessionInformation）传递到视图正在复制而不是创建新的 Session Id，并且 Last Activity 对于所有不同的浏览器会话也是相同的。

这是配置 sessionRegistry 的 spring-security.xml 的一部分。

```
 <form-login login-page="/login" default-target-url="/welcome" always-use-default-target="true"
            authentication-failure-url="/loginfailed"/>
        <logout logout-success-url="/logout" />

        <custom-filter position="CONCURRENT_SESSION_FILTER" ref="concurrencyFilter" />
        <custom-filter after="FORM_LOGIN_FILTER" ref="myAuthFilter" />   
        <session-management session-authentication-strategy-ref="sas"/>
    </http>

    <authentication-manager alias="authenticationManager">
        <authentication-provider ref="ldapAuthProvider">
        </authentication-provider>
    </authentication-manager>

<beans:bean id="concurrencyFilter"
       class="org.springframework.security.web.session.ConcurrentSessionFilter">
      <beans:property name="sessionRegistry" ref="sessionRegistry" />
    </beans:bean>

    <beans:bean id="myAuthFilter" class=
       "org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter">
      <beans:property name="sessionAuthenticationStrategy" ref="sas" />
      <beans:property name="authenticationManager" ref="authenticationManager" />
    </beans:bean>

    <beans:bean id="sas" class=
     "org.springframework.security.web.authentication.session.ConcurrentSessionControlStrategy">
      <beans:constructor-arg name="sessionRegistry" ref="sessionRegistry" />
      <beans:property name="maximumSessions" value="-1" />
    </beans:bean>

    <beans:bean id="sessionRegistry" 
        class="org.springframework.security.core.session.SessionRegistryImpl" /> 
```

这是使用 sessionRegistry 的控制器：

```
@RequestMapping(value = "/activeusers", method = RequestMethod.GET)
    public String manageActiveUsers(ModelMap model, Principal principal) {
        String name = principal.getName();
        model.addAttribute("username", name);
        List<LoginUserInfo> userSessionData = new ArrayList<LoginUserInfo>();       

        List<Object> principals = sessionRegistry.getAllPrincipals();

        //TODO: Find a better way to get the remote IP Address according to each client call
        String remoteAddress = ((ServletRequestAttributes)RequestContextHolder.currentRequestAttributes())
           .getRequest().getLocalAddr();

        for (Object object : principals) {
            LoginUserInfo userInfo = new LoginUserInfo();
            LdapUserDetailsImpl user = (LdapUserDetailsImpl) object;
            List<SessionInformation> sessions = sessionRegistry.getAllSessions(user, false);
            String username = user.getUsername();

            for (SessionInformation session : sessions) {
                Date lastRequest = session.getLastRequest();
                String sessionId = session.getSessionId();

                userInfo.setUsername(username);
                userInfo.setIp(remoteAddress);
                userInfo.setLastActivity(lastRequest.getTime());
                userInfo.setSessionId(sessionId);

                userSessionData.add(userInfo);
            }           
        }

        model.addAttribute("userSessionData", userSessionData);

        return "activeusers";
    } 
```

然后我将“userSessionData”发送到这样的jsp VIEW。

```
 <c:forEach var="userDetail" items="${userSessionData}">
                      <tr>
                        <td><c:out value="${userDetail.ip}"/></td>
                        <td><c:out value="${userDetail.username}"/></td>
                        <td><c:out value="${userDetail.lastActivity}"/></td>
                        <td><c:out value="${userDetail.sessionId}"/></td>
                      </tr>
                   </c:forEach> 
```

正如我所说，即使我从另一个浏览器登录，所有与用户相关的数据都被复制（sessionId 和 lastActivity）。当我从一个浏览器发出一些请求时，lastActivity 会同时在所有会话中刷新。

另一件事，当我从不同的浏览器注销时，会话应该终止。但是当我检查会话列表时，它仍然存在。为什么也会出现这种情况？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:29:21.503

这不是您的会话的问题，而是您的`for`循环的问题。

您只`LoginUserInfos`为每个用户创建一个，并且每个会话都重复使用此对象。因此，您只能看到最后一个会话的数据。`LoginUserInfos`而是在内部循环中创建。

```
 for (Object object : principals) {
        LdapUserDetailsImpl user = (LdapUserDetailsImpl) object;
        List<SessionInformation> sessions = sessionRegistry.getAllSessions(user, false);
        String username = user.getUsername();

        for (SessionInformation session : sessions) {
            LoginUserInfo userInfo = new LoginUserInfo();
            Date lastRequest = session.getLastRequest();
            String sessionId = session.getSessionId();

            userInfo.setUsername(username);
            userInfo.setIp(remoteAddress);
            userInfo.setLastActivity(lastRequest.getTime());
            userInfo.setSessionId(sessionId);

            userSessionData.add(userInfo);
        }           
    } 
```

这应该会给你预期的结果。

# xml - 我们可以使用 SaxParser 创建一个 xml

> ID：15888865
> 
> 赞同：0
> 
> 时间：2013-04-08T20:59:19.730
> 
> 标签：xml, dom, xml-parsing, jaxb, sax

我需要通过比较特定属性 id 来合并两个 xml 文件。我是 XMLParsing 的新手。我使用 SAXParser 来解析 xml。我不知道如何推进合并的事情。任何人都可以提出一种适当和更好的方法来合并两个 xml 文件。这个需求的输出应该是一个新的 xml 文档。我也应该牢记性能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:07:47.410

使用标准 API 解析 XML 的最快方法是使用 StAX ( `javax.xml.stream`)。您可以`XMLStreamReader`为每个输入文档创建一个实例，并将结果写入单个`XMLStreamWriter`.

根据合并逻辑的复杂程度，您可以使用 JAXB 将输入 XML 的所有部分放入域对象中，然后仍然编组到`XMLStreamWriter`.

*   [http://blog.bdoughan.com/2012/08/handle-middle-of-xml-document-with-jaxb.html](http://blog.bdoughan.com/2012/08/handle-middle-of-xml-document-with-jaxb.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T21:06:31.620

SAX 在性能方面显然更好。没有代码，我只能指出一些有用的文章。

```
http://www.informit.com/library/content.aspx?b=STY_XML_21days&seqNum=221 
```

# angularjs - AngularJS - ng-switch 没有按预期工作

> ID：15888866
> 
> 赞同：2
> 
> 时间：2013-04-08T20:59:19.907
> 
> 标签：angularjs

我正在使用 AngularJS 和 twitter 引导程序。我的问题的小提琴可以在[这里](http://jsfiddle.net/fXKgC/)找到。

这里有问题的 HTML 代码是：

```
<button type="button" class="btn" ng-repeat="tool in toolBar">
    <div ng-switch on="tool.action">
        <i class="icon-plus-sign" ng-switch="insert"></i>
        <i class="icon-edit" ng-switch-when="edit"></i>
        <i class="icon-trash" ng-switch-when="delete"></i>
    </div>
</button> 
```

范围是：

```
$scope.toolBar = [
    {
        "action": "insert"
    },
    {
        "action": "edit"
    },
    {
        "action": "delete"
    }        
]; 
```

问题是我希望每个按钮只显示一个图标，但不知何故显示了两个以上的图标。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T21:22:03.290

您缺少一个`when`.

将您的 html 替换为

```
<button type="button" class="btn" ng-repeat="tool in toolBar">
    <div ng-switch on="tool.action">
        <i class="icon-plus-sign" ng-switch-when="insert"></i>
        <i class="icon-edit" ng-switch-when="edit"></i>
        <i class="icon-trash" ng-switch-when="delete"></i>
    </div>
</button> 
```

它应该可以正常工作。

# php - 我将如何在 PHP 中打印它

> ID：15888871
> 
> 赞同：-6
> 
> 时间：2013-04-08T20:59:38.893
> 
> 标签：php, arrays, class, object, echo

```
stdClass Object
(
    [entities] => stdClass Object
        (
            [urls] => Array
                (
                    [0] => stdClass Object
                        (
                            [url] => asdl;kfas.com
                            [expanded_url] => http://HOWDOIPRINTTHISURL.com
                            [display_url] => asdlkfsldfj.com
                        )

                )

        )

) 
```

当我为变量 $fullurl 执行 print_r 时，我得到了上面的代码。我将如何打印显示“ [http://HOWDOIPRINTTHISURL.com](http://HOWDOIPRINTTHISURL.com) ”的部分？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T21:01:37.577

```
print $fullurl->entities->urls[0]->expanded_url; 
```

# php - 格式化人名 - PHP（或任何语言）库？

> ID：15888875
> 
> 赞同：1
> 
> 时间：2013-04-08T20:59:43.850
> 
> 标签：php, formatting, string-formatting

有没有办法格式化人名？例如，“joHn doe”应该是“John Doe”。或者“angus macgyver”应该是“Angus MacGyver”。等等

我知道任何解决方案都可能不完整（名称规则太多），但有总比没有好。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-12-30T16:02:04.577

I was looking for a php script that could handle proper capitalization of names. While I realize that it would be difficult to handle 100% of cases

[https://en.wikipedia.org/wiki/List_of_family_name_affixes](https://en.wikipedia.org/wiki/List_of_family_name_affixes)

I think this script does a pretty good job handling 95% of use cases, at least for us. It's certainly a great starting point.

[http://www.media-division.com/correct-name-capitalization-in-php/](http://www.media-division.com/correct-name-capitalization-in-php/)

```
function titleCase($string) 
{
    $word_splitters = array(' ', '-', "O'", "L'", "D'", 'St.', 'Mc');
    $lowercase_exceptions = array('the', 'van', 'den', 'von', 'und', 'der', 'de', 'da', 'of', 'and', "l'", "d'");
    $uppercase_exceptions = array('III', 'IV', 'VI', 'VII', 'VIII', 'IX');

    $string = strtolower($string);
    foreach ($word_splitters as $delimiter)
    { 
        $words = explode($delimiter, $string); 
        $newwords = array(); 
        foreach ($words as $word)
        { 
            if (in_array(strtoupper($word), $uppercase_exceptions))
                $word = strtoupper($word);
            else
            if (!in_array($word, $lowercase_exceptions))
                $word = ucfirst($word); 

            $newwords[] = $word;
        }

        if (in_array(strtolower($delimiter), $lowercase_exceptions))
            $delimiter = strtolower($delimiter);

        $string = join($delimiter, $newwords); 
    } 
    return $string; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T21:37:35.507

正如评论中已经建议的那样，在 PHP 中，您可以执行以下操作：

```
$name_formatted = ucfirst(strtolower($name_unformatted)); 
```

这将处理您 90% 的案件。然后我会将它放入一个函数中并添加规则来处理 MacGuyver、O'Reilly 类型的异常。

**更新：** 正如所指出的，ucfirst 只处理字符串中的第一个单词。您可以使用正则表达式将每个单词中的所有首字母大写，或者执行如下函数：

```
<?php
$name_unformatted = "JOHN DOE";

function format_name($name_unformatted)
{
   $name_formatted = ucwords(strtolower($name_unformatted));  // this will handle 90% of the names

   // ucwords will work for most strings, but if you wanted to break out each word so you can deal with exceptions, you could do something like this:
   $separator = array(" ","-","+","'");
   foreach($separator as $s)
   {
      if (strpos($name_formatted, $s) !== false)
      {
         $word = explode($s, $name_formatted);
         $tmp_ary = array_map("ucfirst", array_map("strtolower", $word));  // whatever processing you want to do here
         $name_formatted = implode($s, $tmp_ary);
      }
   }

   return $name_formatted;
}

echo format_name($name_unformatted);
?> 
```

您可以扩展此功能以处理您的姓名异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-10T22:10:07.107

对于意大利名字的问题，我找到了一个简单的解决方案

```
function formatName(string $firstName, string $lastName): array
{
    $delimiters = " -’'\t\r\n\f\v";

    return \array_map(
        fn ($string) => \ucwords(\mb_strtolower($string), $delimiters),
        [$firstName, $lastName]
    );
} 
```

就我而言，我必须处理像`D'Amico`,和这样的姓氏`De Angelis`，而且这个快速的解决方案效果很好。`Di Cataldo``Rossi-Bianchi`

主要玩家是

```
\ucwords(\mb_strtolower($string), $delimiters) 
```

其余的只是我通过划分名字和姓氏来处理名字的一部分。

# web.py - web.py 子应用上的错误 404。如何处理网址？

> ID：15888877
> 
> 赞同：0
> 
> 时间：2013-04-08T20:59:51.153
> 
> 标签：web.py

上次我写的答案是快速有效的，所以我又来了。

我得到了这 3 个文件，2 个 .py 和一个 html。问题是由于某种原因我收到错误 404。这显然是我的 url 处理问题。这是我的代码

```
# encoding: utf-8

import web
import os
import gettext
import signup
import verify_email

urls = (
        "/", 'Index',
        "/sign-up", signup.app_signup,
        "/verify_email", verify_email.app_verify_email
        )

# Internacionalización:
current_directory = os.path.abspath(os.path.dirname(__file__))
locales_directory = current_directory + '/i18n'
gettext.install('messages', locales_directory, unicode = True)
gettext.translation('messages', locales_directory, languages = ['es']).install(True)

web.config.debug = False
app = web.application(urls, locals())
session = web.session.Session(app, web.session.DiskStore('sessions'))  
db = web.database(dbn='postgres', user='zoosalud', pw='pbF8zCxd4gZUmhRxd8AsjfhN', db='zoosalud')

def session_hook():
    web.ctx.session = session
    web.ctx.db = db
    web.ctx.render = render

app.add_processor(web.loadhook(session_hook))

render = web.template.render('views/', globals = {'session': session, 'db': db, '_': _})

class Index:
    def GET(self):
        user_input = web.input()
        user_input.names = ''
        user_input.surnames = ''
        user_input.nin = ''
        user_input.address = ''
        user_input.municipality = 0
        user_input.phone = ''
        user_input.email = ''
        session.user_input = user_input
        session.errors = []
        return render.access()

if __name__ == "__main__":
    app.run() 
```

这是我的子应用

```
# encoding: utf-8

import bcrypt
import email_setup
import uuid
import web

urls = (
    "/", "SignUp"
    )

class SignUp:

    def POST(self):
        user_input = web.input()

        web.ctx.session.errors = []
        user = web.ctx.db.select('role', where="email='" + user_input.email + "'")
        if user:
            web.ctx.session.errors.append('email_taken')
        user = web.ctx.db.select('role', where="nin='" + user_input.nin + "'")
        if user:
            web.ctx.session.errors.append('nin_taken')
        if user_input.password != user_input.confirm_password:
            web.ctx.session.errors.append('passwords_not_match')
        if user_input.municipality == '0':
            web.ctx.session.errors.append('unselected_municipality')
        if web.ctx.session.errors:
            web.ctx.session.user_input = user_input
            return web.ctx.render.access()

app_signup = web.application(urls, locals()) 
```

和我的html

```
<form method=post action="sign-up">
        <ul>
            <li><input name=names required maxlength=24 placeholder=$_('name') value="$session.user_input.names"></li>
        <li><input name=surnames required maxlength=24 placeholder=$_('surname') value="$session.user_input.surnames"></li>
        <li><input name=nin requiered maxlength=12 placeholder=$_('nin') value="$session.user_input.nin"></li>
        <li><input name=address required maxlenght=64 placeholder=$_('address') value="$session.user_input.address"></li>
        <li><select id=municipality name=municipality>
            <option value=0>$_('municipality'):</option>
            $for municipality in municipalities:
                <option value=$municipality.id>$municipality.name</option>
        </select></li>
        <li><input name=phone required maxlength=10 placeholder=$_('phone') value=$session.user_input.phone></li>
        <li><input name=email type=email required maxlenght=254 placeholder=$_('email') value=$session.user_input.email></li>
        <li><input name=password type=password required placeholder=$_('password')></li>
        <li><input name=confirm_password type=password required placeholder=$_('confirm_password')></li>
        <li><input type=submit value="$_('sign_up')"></li>
</ul> 
```

我提到的问题是当我在子应用程序中映射到“/”时出现error404，这很奇怪，因为当我映射到“”时它确实有效，但现在我需要映射它以便我可以使用 GET 获取路径，并且从长远来看，此解决方案不起作用。

提前谢谢各位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T05:32:43.570

您可以将子应用映射更改为`"/?", "SignUp"`，使其可以使用和不使用斜杠。

# c# - 有没有一种简单的方法可以从 Windows Phone 中的 URI 获取查询字符串参数？

> ID：15888883
> 
> 赞同：5
> 
> 时间：2013-04-08T21:00:08.820
> 
> 标签：c#, windows-phone-8, uri, query-string, windows-phone

我目前正在使用自定义 URI 方案来验证使用 OAuth 的用户。为此，我需要从查询字符串中获取某些参数的值。

有没有一种简单的方法来获取这些信息？还是我使用 REGEX 或其他字符串操作的唯一选择？

我以前找到了对 ParseQueryString 之类的引用，但这些引用包含在 Windows Phone 上不可用的库中。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-13T06:32:10.630

经过大量搜索，我找到了一种简单的方法。只要查询字符串保持相当简单（就像它们在 OAuth 中一样），这种方法就可以工作。

```
public static Dictionary<string, string> ParseQueryString( string uri ) {

    string substring = uri.Substring( ( ( uri.LastIndexOf('?') == -1 ) ? 0 : uri.LastIndexOf('?') + 1 ) );

    string[] pairs = substring.Split( '&' );

    Dictionary<string,string> output = new Dictionary<string,string>();

    foreach( string piece in pairs ){
        string[] pair = piece.Split( '=' );
        output.Add( pair[0], pair[1] );
    }

    return output;

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-06T18:51:11.930

来自[https://stackoverflow.com/a/25164964/1033581](https://stackoverflow.com/a/25164964/1033581)：

*   在 Uri 中处理*#*
*   处理Uri 中可能的缺失值，例如*&name=*
*   不要忘记`Uri.UnescapeDataString`
*   返回 a`Dictionary`而不是 a`IEnumerable`这样可以轻松找到所需的参数

对于 Windows Phone 7 设备（或者您只有一个字符串，而不是 Uri，然后只需替换`uri.OriginalString`为您的字符串），

```
static readonly char[] QueryStringSeparator1 = "#".ToCharArray();
static readonly char[] QueryStringSeparator2 = "?".ToCharArray();
static readonly char[] QueryStringSeparator3 = "&".ToCharArray();
static readonly char[] QueryStringSeparator4 = "=".ToCharArray();
public static Dictionary<string, string> QueryDictionary(this Uri uri)
{
    return uri.OriginalString
        .Split(QueryStringSeparator1, StringSplitOptions.RemoveEmptyEntries)
        .Select(a => a.Split(QueryStringSeparator2, StringSplitOptions.RemoveEmptyEntries)
            .Select(b => b.Split(QueryStringSeparator3, StringSplitOptions.RemoveEmptyEntries)
                .Select(c => c.Split(QueryStringSeparator4))
                .Where(c => c[0].Length > 0)
                .ToDictionary(c => Uri.UnescapeDataString(c[0]), c => c.Length > 1 ? Uri.UnescapeDataString(c[1]) : ""))
            .ElementAtOrDefault(1))// after ?
        .FirstOrDefault()// before #
        ?? new Dictionary<string, string>();
} 
```

注意：在 Windows Phone 7 设备上，对于像“mailto:a@example.com?subject=subject&body=body”这样的 Uri`Uri.Query`是**不可靠的。**这就是我们使用`Uri.OriginalString`.

对于 Windows Phone 8 设备并且你有一个 Uri，你可以这样优化，

```
static readonly char[] QueryStringSeparator1 = "#".ToCharArray();
static readonly char[] QueryStringSeparator3 = "&".ToCharArray();
static readonly char[] QueryStringSeparator4 = "=".ToCharArray();
public static Dictionary<string, string> QueryDictionary(this Uri uri)
{
    return uri.Query
        .Split(QueryStringSeparator1, StringSplitOptions.RemoveEmptyEntries)
        .Select(a => a.Substring(1)
            .Split(QueryStringSeparator3, StringSplitOptions.RemoveEmptyEntries)
            .Select(c => c.Split(QueryStringSeparator4))
            .Where(c => c[0].Length > 0)
            .ToDictionary(c => Uri.UnescapeDataString(c[0]), c => c.Length > 1 ? Uri.UnescapeDataString(c[1]) : ""))
        .FirstOrDefault()// before #
        ?? new Dictionary<string, string>();
} 
```

如果您想知道您是否在使用 Windows Phone 7 应用程序的 Windows Phone 8 设备上：

```
public static readonly bool IsVersion8 = Environment.OSVersion.Version >= new Version(8, 0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T16:50:04.440

在 Windows Phone XNA 游戏中，从您的 Game 类 ctor 中访问类似这样的启动参数：

```
foreach (var lp in this.LaunchParameters) {
    Debug.WriteLine("  Key={0}, Value={1}", lp.Key, lp.Value);
} 
```

在 Silverlight/XAML 应用程序中，您将使用来自 Application_Startup(object sender, StartupEventArgs e) 事件处理程序的 e.InitParams。如何做到这一点的一个例子在这里：

[http://weblogs.asp.net/lduveau/archive/2009/08/15/provide-startup-parameters-to-silverlight-with-initparams.aspx](http://weblogs.asp.net/lduveau/archive/2009/08/15/provide-startup-parameters-to-silverlight-with-initparams.aspx)

# html - 当我滚动时，如何使 div 不跟随我？

> ID：15888890
> 
> 赞同：-1
> 
> 时间：2013-04-08T21:00:29.483
> 
> 标签：html

我的博客上有一个描述框卡住了。它在您滚动时跟随您，它是一个相当长的描述框，因此它不会在页面上显示整个内容，除非您“CTRL +减号”并且由于它遵循您滚动的方式，因此它不会向下滚动描述框查看描述框的整个长度。我可以编辑什么使其不卡住？我对 HTML 不是很好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:05:49.087

取出`position: fixed`那个块上写的css。这是我最好的猜测，没有看到任何 html/css

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T23:08:36.217

你可能有 CSS:`position: fixed`将 div 修复到页面中，只需删除`position: fixed`它，它应该可以正常工作。

# c++ - 如何从具有 2D 字符向量的类转换为具有 char 变量的另一个 obj 的 2D 向量？

> ID：15888899
> 
> 赞同：1
> 
> 时间：2013-04-08T21:01:26.523
> 
> 标签：c++, class, object, implementation, 2d-vector

我还是新手，所以如果我为我的问题提供太多或不够的信息，我提前道歉。

* * *

**破败不堪**

这个问题不是与流氓游戏相关的问题，但对于我的程序所做的一些背景知识..类似于流氓游戏。

好的，所以我有一个具有成员 2D 字符向量的类（这些字符被操纵以表示“地牢”）。一切都无缝地工作。我想扩展我的程序可以做的事情，所以我决定创建一个新类来替换 chars 的 2D 向量，以便 char 只是新类的视觉表示，其他变量可以与该 char 一起存储。

为了简单起见，我试图删除这个问题不需要的内容。这个新类称为**Tile** - 表示用于地牢关卡的空间。**瓷砖**有：

*   一个名为 displayChar.. 的 char 变量默认为 ' ' 更改以表示它包含的内容

*   （其他变量..）

* * *

**问题/我可怜的猜测**

我不是最擅长完全理解编程语法/实现的一些概念，所以请不要判断。

*   我填充字符向量的方式，我将其调整为游戏板的宽度，并将所有内容设置为''，因为所有值都是字符
*   我想我需要用新的 Tile 对象填充它并将它们推送到 2D Tile 矢量？

*   我操纵 char 值的其他方法正在出错。

*   我想我应该更改方法以获取指向**Tile** 对象的指针并使用**setDisplayChar(' ')**方法来更改其值？

*   我的 at(int, int) 方法用于返回该位置的字符

*   我以为我可以将其更改为“返回 m_vvTiles[y][x].getDisplayChar()”，但出现错误

我不擅长改变某些东西的工作方式，而且我通常最终会把我的代码弄得一团糟。我将发布与此相关的代码。我非常感谢您提供的任何帮助。如果我需要添加更多内容，请告诉我。（我会尽量将代码最小化为仅相关的方法）。谢谢！

* * *

**地牢等级.h**

```
#include "Tile.h"
#include <vector>
#include <random>

class DungeonLevel {
public:
    DungeonLevel(int iWidth, int iHeight, std::mt19937 & mt);
    ~DungeonLevel(void);

    void dump();
    char at(int x, int y);

    int getWidth();
    int getHeight();

private:
    std::vector<std::vector<Tile>> m_vvTiles; //Tile was char

}; 
```

* * *

**地牢关卡.cpp**

```
#include <iostream>
#include <random>
#include "DungeonLevel.h"

using namespace std;

DungeonLevel::DungeonLevel(int iWidth, int iHeight, std::mt19937 & mt){
    // Initialize the blank vector
    m_vvTiles.resize(iHeight);

    for(auto it = m_vvTiles.begin(); it != m_vvTiles.end(); it++ ){
    //      Tile tempTile = new;?
            (*it).resize(iWidth,' ');
    }

    // divide the level into 4x2 chunks
    int iChunkWidth = iWidth / 4;
    int iChunkHeight = iHeight / 2;

    // Taking the easy way out, and generating
    // a loop of tunnels first to drop rooms on to
    for( int x = (iChunkWidth/2); x <= ((3 * iChunkWidth) + (iChunkWidth/2)$
            m_vvTiles[iChunkHeight/2][x] = '#';
            m_vvTiles[iChunkHeight + (iChunkHeight/2)][x] = '#';
    }

    for( int y = (iChunkHeight/2); y <= (iChunkHeight + (iChunkHeight/2)); $
            m_vvTiles[y][iChunkWidth/2] = '#';
            m_vvTiles[y][(3 * iChunkWidth) + (iChunkWidth/2)] = '#';
    }

 void DungeonLevel::dump(){
    for( auto itOuter = m_vvTiles.begin(); itOuter != m_vvTiles.end(); itOu$
            for( auto itInner = (*itOuter).begin(); itInner != (*itOuter).e$
                    cout << *itInner.getDisplayChar(); ///Updated:: CAUSING ERROR//
            }

            cout << endl;
    }
}

//SEVERAL IRRELEVANT LINES FOR THIS PROBLEM..

}

char DungeonLevel::at(int x, int y){
    return m_vvTiles[y][x].getDisplayChar();
    //return m_vvTiles[y][x]; WORKED BEFORE
} 
```

* * *

**瓷砖.h**

```
#include "Entity.h"
#include <vector>

class Tile : public Entity {
public:
    Tile(void);
    virtual ~Tile(void);
    //void setEntity(Entity * entityToSet); BOTH IRRELEVANT
    //Entity * getEntity();
    void setDisplayChar(char displayCharToSet);
    char getDisplayChar();
    //virtual void dumpObjectData(); IRRELEVANT AT THIS TIME

private:
    char displayChar;
    //Entity * theEntity; IRRELEVANT AT THIS TIME
}; 
```

* * *

**瓷砖.cpp**

```
#include "Tile.h"
#include "Entity.h"

using namespace std;

Tile::Tile(void){
    displayChar = '.';
    //theEntity = NULL;
}

Tile::~Tile(void){

}

void Tile::setDisplayChar(char displayCharToSet){
    displayChar = displayCharToSet;
}

char Tile::getDisplayChar(){
    return displayChar;
} 
```

* * *

**继承人我现有的错误：**

对于 DungeonLevel.cpp 中的方法 dump()，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:23:54.830

你的一些问题与我的回答

我想我需要用新的 Tile 对象填充它并将它们推送到 2D Tile 矢量？

不，您需要调整它的大小并用 Tile 对象填充它。就像你在它是一个 char 数组时所做的一样。新的没有进入它。

我想我应该更改方法以获取指向 Tile 对象的指针并使用 setDisplayChar(' ') 方法来更改其值？

我会使用参考。

我以为我可以将其更改为，`return m_vvTiles[y][x].getDisplayChar()`但出现错误。

这听起来对我来说，你得到了什么错误？

关于你重新设计的一切听起来对我来说很有动力。但是，在进行重大重组之前进行备份是个好主意。

# javascript - 如何基于字符串对对象进行操作

> ID：15888901
> 
> 赞同：0
> 
> 时间：2013-04-08T21:01:32.750
> 
> 标签：javascript, string, object

JS菜鸟在这里。如果我有一个字符串，如何从与字符串同名的对象中调用属性？

```
var carrot = {
    'vitaminA': 150,
    'vitaminC': 100
};

var cucumber = {
    'vitaminA': 10,
    'vitaminC': 12

};

var vegetable = 'cucumber'
alert(vegetable.vitaminC) // this doesn't work 
```

注意：这是我正在处理的问题的简化版本，所以我不能简单地说 alert(cucumber.vitaminC) -- 我必须根据字符串对对象进行操作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T21:04:05.633

你可以拥有它：

```
window[vegetable].vitaminC 
```

但我强烈建议将这些人包含在一个不是全局对象的对象中`window`：

```
var vegetables = {
  cucumber : {
    vitaminA: 10,
    vitaminC: 12
  },
  carrot : {
    vitaminA: 150,
    vitaminC: 100
  }
};

var vegetable = 'cucumber';
alert(vegetables[vegetable].vitaminC); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T21:03:57.503

如果您知道范围，则可以执行此操作。如果范围是全局的，您可以像这样访问它：

```
var vegetable = window['cucumber'];
alert(vegetable.vitaminC); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T21:05:05.617

我会稍微改变你的结构，让你的对象脱离全局范围。您可以通过简单地添加一个新对象来包含您的蔬菜来做到这一点：

```
var vegetables = {
    carrot: {
        'vitaminA': 150,
        'vitaminC': 100
    },
    cucumber: {
        'vitaminA': 10,
        'vitaminC': 12
    }
}; 
```

然后您可以使用`[]`符号按名称（使用字符串）访问您的属性：

```
vegetables['cucumber'].vitaminC; // 12 
```

或者

```
vegetables['cucumber']['vitaminC']; // 12 
```

# excel - Excel VBA 脚本将列复制到单独目录下的单独文本文件中

> ID：15888904
> 
> 赞同：1
> 
> 时间：2013-04-08T21:01:36.430
> 
> 标签：excel, vba

我有一个包含 27 列的工作表，第一行是列标题，它们是 AZ 和 NUM，共 27 列。每列都有一个非常长的受限 url 列表，按列的字母排序，最后（第 27 列）用于以数字开头的 url。列的长度在 300-60 万个单元格之间。

我所追求的是将每一列复制到单独文件夹下的单独文本文件（*.file）中，即将A列复制并保存到c：/blacklist/A/a.file，依此类推，因此我们获取 c:/blacklist/B/b.file 一直到 c:/blacklist/NUM/num.file。

我一直在寻找解决方案，并在以下位置找到了以下 VBA 脚本，它与我所追求的非常接近：[http ://www.ozgrid.com/forum/showthread.php?t=142181](http://www.ozgrid.com/forum/showthread.php?t=142181)

```
Option Explicit 

Public Sub Columns_2_TextFile() 

Const My_Path = "C:\TEXTFILES\" 
Dim iCol As Integer 
Dim lRow As Long 
Dim File_Num As Long 

On Error Resume Next 
If Trim(Dir(My_Path, vbDirectory)) = "" Then 
    MkDir My_Path 
Else 
    Kill My_Path & "*.txt" 
End If 
On Error Goto 0 
File_Num = FreeFile 
With ActiveSheet 
    For iCol = 2 To 256 
        Open My_Path & Trim(.Cells(2, iCol).Value) & ".txt" For Output As #File_Num 
        For lRow = 3 To .Cells(Rows.Count).End(xlUp).Row 
            Print #File_Num, .Cells(lRow, iCol).Value 
        Next 
        Close #File_Num 
    Next 
End With 

MsgBox "All files created and saved to : " & My_Path 

End Sub 
```

这个脚本有两个问题：第一个是它不会在单独的文件夹下创建文本文件，而是在 ONE 文件夹下创建所有文件。第二个是当我尝试它时，它没有复制创建文件中的列内容，换句话说，文件是空的，内容为零。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:20:58.447

我没有测试过这个，所以不能保证。您需要将“Sheet1”更改为工作表的名称。

```
Public Sub Main()
Dim Path As String: Path = "C:\blacklist\"
Dim Column As Integer
Dim Row As Long
Dim Name As String
Dim File As Long
Dim Sheet As Worksheet: Set Sheet = ThisWorkbook.Worksheets("Sheet1")

For Column = 1 To 27
    Name = Sheet.Cells(1,Column).Value2
    On Error Resume Next
    If Trim(Dir(Path & Name & "\", vbDirectory)) = "" Then
        MkDir Path & Name & "\"
    Else
        Kill Path & Name & "\*.file"
    End If
    On Error Goto 0
    File = FreeFile
    Open Path & Name & "\" & Name & ".file" For Output As #File
        For Row = 2 To Sheet.Cells(Sheet.Rows.Count, Column).End(xlUp).Row ' fixed
            Print #File, Sheet.Cells(Row, Column).Value2
        Next Row
    Close #File
Next Column

End Sub 
```

**更新**它现在应该可以工作了。

# java - 在字符串中打印有限数量的单词

> ID：15888906
> 
> 赞同：1
> 
> 时间：2013-04-08T21:01:41.383
> 
> 标签：java

我是 Java 编程新手，我在课堂上遇到一个项目时遇到了困难。我有一个从 netflix WSDL 检索到的概要，我的任务是将它从一个大段落限制为只有 10 个单词。

换句话说，我应该使用什么代码将大字符串限制为特定数量的单词？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T21:06:02.540

你真正需要的唯一工具就是`String.split()`方法。

您用空格分隔符分割字符串，即`" "`，如果`resultingArray.length <= 10`您保存前 10 个，则丢弃其余的。

简单的 ：）

### 编辑：由于这不是家庭作业服务，您需要表现出一些诚意。然而，String.split 的用法如下所示

```
public static void main(String[] args) {
    final String sentence = "This is a really, really, really, super line";
    final String[] words = sentence.split(" ");

    for(int i = 0; i < words.length; i++){
        System.out.printf("Word %d: %s\n", i, words[i]);
    }
} 
```

# sql - 如何在 SQL 中选择 XML 路径查询的输出？

> ID：15888907
> 
> 赞同：2
> 
> 时间：2013-04-08T21:01:48.110
> 
> 标签：sql, sql-server, tsql, sql-server-2008-r2

`Doc`表包含很多列（甚至未使用的列）：

```
Doc_DdfID Doc_RentDate Doc_ReturnDate etc.
--------- ------------ -------------- ----
1         2012-07-28   2012-07-28 
```

但我只想查询`Doc`'s 表中使用过的那些。

`DocDefinitionFields`列出文档正在使用的列：

```
SELECT Dfl_ColName 
FROM DocDefinitionFields 
WHERE Dfl_DdfID = 1 
```

**文档定义字段**：

```
Dfl_ColName
-----------
Doc_RentDate
Doc_ReturnDate
........... 
```

所以我想从表中选择所有列（由第二个查询列出）`Doc`。

**示例**（如果将 2 列添加到文档定义表单中，我只想选择它们）：

**文件**：

```
Doc_RentDate Doc_ReturnDate
------------ --------------
2012-07-28   2012-07-28 
```

尝试通过使用 XML PATH 对带有字段连接的子查询进行子查询来做到这一点：

```
SELECT 
   (SELECT 
       Dfl_ColName + ', ' 
       FROM DocDefinitionFields 
       FOR XML PATH('') 
   ) 
FROM Doc 
```

这不是那么简单。你有什么建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T21:18:20.253

您需要的是动态 SQL，如下所示：

```
DECLARE @sql VARCHAR(MAX)

SET @sql = 'SELECT ' + STUFF((SELECT ', ' + Dfl_ColName FROM DocDefinitionFields FOR XML PATH('') ),1,1,'') + ' FROM Doc'

EXEC (@sql) 
```

此外，为了消除列末尾的额外逗号（，），我添加了 STUFF 函数以及 FOR XML PATH。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T21:21:15.157

要动态获取查询的列名并在查询中使用这些名称，您需要使用[Dynamic SQL](http://www.sqlteam.com/article/introduction-to-dynamic-sql-part-1)。下面是如何创建可用列的字符串的示例

```
DECLARE @Columns VARCHAR(MAX);
SELECT @Columns =  
    COALESCE(@Columns + ', 
     [' + CAST(COLUMN_NAME AS VARCHAR) + ']',
    '[' + CAST(COLUMN_NAME AS VARCHAR) + ']') 
FROM (SELECT DISTINCT COLUMN_NAME  
      FROM [SomeDatabase].INFORMATION_SCHEMA.COLUMNS 
      WHERE TABLE_NAME = N'SomeTableName') AS H
ORDER BY COLUMN_NAME;
GO 
```

您现在可以在动态 SQL 查询中使用可用列的字符串。下面我们在`INSERT`动态构建所需字段的查询中采用了上述内容。我们需要在下面这样做的原因是包含 set 字段`SomeFieldA`以及其他字段。

```
DECLARE @SQL NVARCHAR(MAX);
SET @SQL = 
N'INSERT INTO [' + @DbName + N']..[SomeOtherTable] ([SomeFieldA], ' + @Columns + N')  
  SELECT SomeFieldA, ' + @Columns + N' 
  FROM [SomeTableName];';
EXEC sp_executesql @SQL; 
GO 
```

您应该能够修改上述内容以提供您需要的内容。

我希望这有帮助。

# powershell - cmdlet 表示无法检索参数：表达式必须可读

> ID：15888909
> 
> 赞同：0
> 
> 时间：2013-04-08T21:02:02.647
> 
> 标签：powershell, cmdlets, cmdlet

我的 cmdlet 有一个`Get-Deal`命令，它将从管道接收值：

```
[Cmdlet(VerbsCommon.Get, "Deal")]
public class GetDealCmdlet : InsightBaseCmdlet
{
    private List<Object> _legalentities = new List<Object>();
    [Parameter(Position = 0, Mandatory = true, ValueFromPipeline = true,ValueFromPipelineByPropertyName = true)]
    public List<Object> Legalentity { set { _legalentities = value; } } 

    protected override void ProcessRecord() {...}
} 
```

如果我传递了字符串或其他类型的列表，它工作正常。但是，如果我传递了一个在以下位置创建的对象`Search-Deal`：

```
foreach (...)
{
    PSObject dealValue = new PSObject();
    dealValue.Properties.Add(new PSNoteProperty(Legalentity,Convert.ToInt32($deal.Properties["LegalEntityID"].Value.ToString())));
    dealValue.Properties.Add(new PSNoteProperty("Name",deal.Properties["name"].Value.ToString()));
    WriteObject(dealValue);
} 
```

我收到一个错误：

> 无法处理管道输入，因为无法检索参数“合法性”的默认值。获得“合法性”的异常：表达式必须可读参数名称：表达式

我确信`search-Deal`工作正常，因为

```
$a = Search-Deal name 
```

正在工作中。并给予：

```
Get-Deal $a 
```

返回我想要的确切结果。

然而

```
$a | Get-Deal 
```

也会被同一个错误。

编辑：使用

```
Trace-Command -Name ParameterBinding -Expression { Search-Deal JL | Get-Deal } -PSHost 
```

我发现了以下内容：

```
CALLING BeginProcessing 
BIND PIPELINE object to parameters: [Get-Deal] 
PIPELINE object TYPE = [System.Management.Automation.PSCustomObject] 
RESTORING pipeline parameter's original values 
BIND PIPELINE object to parameters: [Out-Default] 
PIPELINE object TYPE = [System.Management.Automation.ErrorRecord] 
Parameter [InputObject] PIPELINE INPUT ValueFromPipeline NO COERCION 
BIND arg [Pipeline input cannot be processed because the default value of parameter 'LegalEntity' cannot be retrieved. Exception getting "LegalEntity": "Expression must be readable Parameter name: expression"] 
```

所以我认为管道传递对象一定有问题。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T21:39:01.383

PowerShell 管道的工作方式将防止这种情况发生。不传递整个列表 - 它将一个一个传递元素。为了防止它发生，您可以使用一元逗号：

```
, $a | Get-Deals 
```

但是我的建议（作为 PowerShell 用户）：除非您有充分的理由，否则不要这样做。相反，接受/写入单个对象。这更自然，并且应该避免将来的用户像现在这样的悲伤（实际上完全相反-我希望返回对象流而不是单个“膨胀”；））

另外：好的做法是用单数名词命名 cmdlet。即使您期望更频繁（Get-Process、Get-Service、Get-ChildItem...）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T22:05:28.897

原来公开列表合法性{ set { _legalentities = value; } } 缺少吸气剂。

虽然我真的不知道它背后的原因，但添加 get {return xxx } 将消除错误。

那么这个错误是有道理的。它基本上告诉您需要添加一个吸气剂：

无法处理管道输入，因为无法检索参数“合法性”的默认值。获得“合法性”的异常：表达式必须可读参数名称：表达式

# probability-theory - 需要数学证明（概率）

> ID：15888911
> 
> 赞同：-3
> 
> 时间：2013-04-08T21:02:05.133
> 
> 标签：probability-theory

从 Pr[E] = Pr[E|A].Pr[A] + Pr[E|A'].Pr[A']

我们如何证明 Pr[E] <= Pr[E|A] + Pr[A']

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:11:23.970

如果 Pr[E] 是 Pr[E|A] 的子集，则满足 Pr[E] <= Pr[E|A]。这证明了：Pr[E|A] = Pr[E] + Pr[A] - Pr[E&A]。

因此，给定任意概率 E 和 A，Pr[E] 仍然是 Pr[E|A] 的子集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T22:57:39.620

```
Pr[E] <= Pr[E|A] + Pr[A'] 
```

左边可以用第一行代替..

```
Pr[E|A].Pr[A] + Pr[E|A'].Pr[A'] <= Pr[E|A] + Pr[A'] 
```

嗯，所以让我们在两边减去“Pr[E|A].Pr[A]”。在右边，你可以翻译 Pr[E|A] = Pr[E|A]*1 = Pr[E|A] (Pr[A] + Pr[A'])

```
Pr[E|A'].Pr[A'] <= Pr[E|A].Pr[A'] + Pr[A'] 
```

现在我们可以将两边都放在括号中以隔离 Pr[A']

```
( Pr[E|A'] ) * Pr[A'] <= ( Pr[E|A] + 1 ) * Pr[A'] 
```

并除以 Pr[A']

```
Pr[E|A'] <= Pr[E|A] + 1 
```

所以.. 如果.. Pr[E|A] = 0 那么两边可以相等（如果左边是 1）在所有其他情况下右边更大，因为它大于 1，左边最大可以是1

# asp.net - ASP.NET 键“attachdbfilename”的值无效

> ID：15888916
> 
> 赞同：0
> 
> 时间：2013-04-08T21:02:32.183
> 
> 标签：asp.net, connection-string, sql-server-2012

`SqlConnection`初始化对象时会弹出下一个错误：

`Invalid value for key 'attachdbfilename'.`

我已经尝试解决这个问题几个小时（还尝试了我可以在 SO 上找到的任何建议），但没有成功。

这是我的连接字符串：

```
Data Source=(LocalDB)\v11.0;AttachDbFilename=|DataDirectory|Users.mdf;Integrated Security=True 
```

`Users.mdf`位于`App_Data`文件夹中。

我使用的是 Visual Studio 2012 Ultimate，.NET 是 Ver 4.5，带有 SQL Server 2012。这个问题是在我格式化我的主驱动程序并安装我上面提到的软件之后开始的。

谢了，兄弟们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T21:08:28.800

这似乎是 SQL Server Express 版本的连接字符串。

你在开发机器上安装了速成版吗？

我遇到了同样的问题，唯一的解决方法是创建一个以`Users`SQL Server 的非快速版本命名的数据库。

假设您安装了非 express 版本，您需要将现有的附加`Users.mdf`到 SQL 服务器作为数据库。 [http://www.sqlservercentral.com/Forums/Topic590254-360-1.aspx](http://www.sqlservercentral.com/Forums/Topic590254-360-1.aspx)

连接字符串：Server=localhost;Database=NewDatabaseName;User Id=myUsername;Password=myPassword;

[http://www.connectionstrings.com/sql-server-2008](http://www.connectionstrings.com/sql-server-2008)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-28T09:27:16.027

我认为这里的问题是 web.config 中的字符串不正确根据您设置的 sql，如果您设置类似这样的内容，该字符串将起作用

```
<add name="MovieDBContext"
       connectionString="Data Source=.\SQLEXPRESS;Initial Catalog=Movies;AttachDbFilename=|DataDirectory|\Movies.mdf;Integrated Security=True"
       providerName="System.Data.SqlClient"
  />

Data Source=.\SQLEXPRESS; --> sometime, it will be Data Source=.; 
```

之后，您需要配置权限才能访问 Folder App_Data 如果您在 Window 7 上进行测试，请右键单击文件夹。属性安全选项卡-> 添加具有完全权限的用户网络服务

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-03T04:25:30.130

没关系; 在您的 web.config 文件中使用它；谢谢你;

```
<add name="any name" connectionString="Data Source=.\SQLEXPRESS;Initial Catalog=name;AttachDbFilename=|DataDirectory|\name.mdf;Integrated Security=true; User Instance=true;" providerName="System.Data.SqlClient" /> 
```

# node.js - 使用带有 TDD 接口的 mocha，ReferenceError

> ID：15888917
> 
> 赞同：4
> 
> 时间：2013-04-08T21:02:38.683
> 
> 标签：node.js, mocha.js

我正在尝试通过[Mocha](http://visionmedia.github.io/mocha/)和[Chai](http://chaijs.com/)使用节点进行单元测试。我对 Python 的内置`unittest`框架有点熟悉，所以我使用的是 Mocha 的 tdd 接口和 chai 的 TDD 样式断言。

我遇到的问题是 mocha 的 tdd`setup`函数。它正在运行，但我在其中声明的变量`undefined`在测试中。

这是我的代码：

**测试.js**

```
var assert = require('chai').assert;

suite('Testing unit testing === testception', function(){

  setup(function(){
    // setup function, y u no define variables?
    // these work if I move them into the individual tests,
    // but that is not what I want :(
    var
       foo = 'bar';
  });

  suite('Chai tdd style assertions should work', function(){
    test('True === True', function(){
      var blaz = true;
      assert.isTrue(blaz,'Blaz is true');
    });
  });

  suite('Chai assertions using setup', function(){
    test('Variables declared within setup should be accessible',function(done){
      assert.typeOf(foo, 'string', 'foo is a string');
      assert.lengthOf(foo, 3, 'foo`s value has a length of 3');
    });
  });
}); 
```

这会产生以下错误：

```
✖ 1 of 2 tests failed:    
1) Testing unit testing === testception Chai assertions using setup Variables declared within  setup should be accessible:
         ReferenceError: foo is not defined 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T23:25:10.890

您在`foo`其他测试无法访问的范围内声明。

```
suite('Testing unit testing === testception', function(){

  var foo; // declare in a scope all the tests can access.

  setup(function(){
    foo = 'bar'; // make changes/instantiations here
  });

  suite('this test will be able to use foo', function(){
    test('foo is not undefined', function(){
      assert.isDefined(foo, 'foo should have been defined.');
    });
  });
}); 
```

# php - 如何将arry中发布的3个输入字段的值发布到数据库中

> ID：15888924
> 
> 赞同：1
> 
> 时间：2013-04-08T21:02:54.227
> 
> 标签：php, codeigniter

我在数组 fromat 中发布值 og 动态创建的输入字段

```
<form method='post' action='<?php echo site_url('a3_bus_system/output')?>'>
<div class="_25">
<strong>Route Name/Number</strong>
     <br/>
<input type="text" name=""></input>
</div>
<p>&nbsp;<p>&nbsp;</p></p>
<p>&nbsp;<p>&nbsp;</p></p>
<div id="div">
</div>
<p>&nbsp;</p><div class="_25">
<p><input type="button" name="button" class="button red" id="button" value="Add"  onclick="generateRow() "/></a></p>
</div>
<input type='button' value='Remove Button' id='removeButton'>
<p>&nbsp;</p><p>&nbsp;</p></div>
 <input type="submit"  class="button blue" id="button" value="Register" />
/form>  
</div>
</div>
<div class="clear height-fix"></div>
</div></div> <!--! end of #main-content -->
</div> <!--! end of #main -->
<script>
var counter=1;
    function generateRow() {
    var count="<font color='red'>"+counter+"</font>";
   var temp ="  <p>&nbsp;&nbsp;&nbsp;&nbsp;<div class='_25'><input type='textbox' id='textbox' name='stop["+counter+"]' placeholder='Stop Name'></input></div>&nbsp;&nbsp;&nbsp;<div class='_25'><input type='textbox' id='textbox' name='timing["+counter+"]' placeholder='Timing'></input></div>&nbsp;<div class='_25'><select id='ampm' name='ampm["+counter+"]'><option>a.m</option><option>p.m</option></select>  </div>";

var newdiv = document.createElement('div');
newdiv.innerHTML = temp + count;

var yourDiv = document.getElementById('div');

yourDiv.appendChild(newdiv);
counter++;
    }

</script> 
```

现在我正在使用这个 codeigniter 脚本将它发布到数据库中

```
// form 1st text box input
foreach ($_POST['stop'] as $stopIndex => $stopValue) {

        $sql="INSERT INTO  t_routes_list(stop_name) VALUES('".$this->db->escape_str($stopValue)."')";

    $this->db->query($sql);

}
    // form 2nd text box input

foreach ($_POST['timing'] as $timingIndex => $timingValue)
    {

    $sql="INSERT INTO  t_routes_list(timing) VALUES('".$this->db->escape_str($timingValue)."')";

    $this->db->query($sql);
}
// form 3rd select box input
foreach ($_POST['ampm'] as $ampmIndex => $ampmValue) {
   $sql="INSERT INTO  t_routes_list(am_pm) VALUES('".$this->db->escape_str($ampmValue)."')";

    $this->db->query($sql);
} 
```

现在 1 只想按 1 发布数据

如何同时发布所有数据？

程序员请帮我编写 php 脚本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:12:45.697

伙计，在 Codeigniter 中存在[Active Records](http://ellislab.com/codeigniter/user-guide/database/active_record.html)

创建一个`models/model_insert.php`ad hoc 并放入一个插入函数中：

```
class Model_Insert extends CI_Model{
 function insert($data){
  $this->db->insert('mytable',$data);
}

} 
```

现在您只需在控制器中执行此操作即可在“mytable”中插入一些数据：

```
$this->load->model('model_insert');
$data = array('id'=>$id,'email'=>$email);
$this->model_insert->insert($data); 
```

# lint - 如何让 PC-Lint 在消息中打印完全限定的函数名称？

> ID：15888926
> 
> 赞同：2
> 
> 时间：2013-04-08T21:03:01.760
> 
> 标签：lint, pc-lint

我正在使用 PC-Lint 生成一个 XML 文件，其中包含运行生成的所有警告。

该过程*几乎*完美无缺，但有一个相当烦人的异常。我无法获取消息格式来打印发现警告的完全限定函数名称。它只打印精简后的函数名称。没有命名空间，没有类名。

这是我使用的格式字符串（我在本文末尾的文档中包含了相关的格式信息）：

```
-"format=<message> <file>%f</file> <func>%i</func> <line>%l</line> <type>%t</type> <code>%n</代码> <desc>%m</desc> </message>"

```

因此，例如，为此：

```
class Bar {
    void foo(int bar) {
    }
}; 
```

我得到的错误是这样的（为了便于阅读，换行）：

```
<message>
  <file>D:\Code\CPPTest\CPPTest.cpp</file>
  <func>foo</func>
  <line>3</line>
  <type>Info</type>
  <code>715</code>
  <desc>Symbol 'bar' (line 2) not referenced</desc>
</message> 
```

正如你所看到的，函数名是按照我想要/期望的`foo`而不是按照我的意愿编写的。`Bar::foo`

在有人问之前，对于`-format`字符串中的函数转义符号，我已经尝试过`%i`and `%I`; 两者都生成了相同的裸骨函数名称。

**有谁知道是否有一种神奇的格式转义来获得完全限定的名称？**

* * *

*从 PC-Lint`-format`文档中：*

> %f = 文件名
> （注意选项+ffn，代表“Full File Names”，可用于控制是否使用完整路径名）。
> %l = 行号
> %t = 消息类型（错误、警告等）
> %n = 消息号
> %m = 消息文本
> %c = 列号
> %C = 列号 +1
> %i =调用函数
> %% = 百分号%(...%) = 如果错误发生在文件中，则
> 有条件地包含由 ... 表示的信息。 \n = 换行符 \t = 制表符 \s = 空格 \a = 警报（变为 ASCII 7） \q = 引号 ( "" ) \ = 反斜杠 ( '\' )

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-04-27T17:54:27.380

对您来说可能为时已晚:) 但有一个标志`ffn` （在消息中使用完整文件名）

您可以将其添加到主 lnt 文件中

`+ffn`

[https://www.gimpel.com/archive/lint7.htm](https://www.gimpel.com/archive/lint7.htm)

# python - Python中的圆插值

> ID：15888927
> 
> 赞同：4
> 
> 时间：2013-04-08T21:03:10.987
> 
> 标签：python, interpolation, modular

我有两个系统，每个系统都有一个方向传感器（0-360 度），但是根据每个系统的方向和每个传感器的线性度，传感器可以提供截然不同的值。我有一个机械参考，可用于生成每个系统实际指向的表格。这会产生一个包含三列的表：

```
Physical  SystemA  SystemB
--------  -------  -------
 000.0     005.7    182.3
 005.0     009.8    178.4
 ...       ...      ... 
```

仅从显示的数据中，我们可以看到 SystemA 离物理参考不远，但 SystemB 偏离了大约 180 度，并且方向相反（想象它被倒置安装）。

我需要能够在所有三个值之间来回映射：如果 SystemA 报告某物位于 105.7，我需要告诉用户那是什么物理方向，然后告诉 SystemB 指向同一位置。如果 SystemB 进行初始报告，则相同。并且用户可以请求两个系统都指向所需的物理方向，因此需要告知 SystemA 和 SystemB 指向的位置。

线性插值并不难，但是当数据以相反的方向移动并且是模块化/循环时我遇到了麻烦。

有没有一种 Pythonic 方式来完成所有这些映射？

* * *

编辑：让我们关注最困难的情况，我们有两个成对的值列表：

```
A        B
-----    -----
  0.0    182.5
 10.0    172.3
 20.0    161.4
 ...      ...
170.0      9.7
180.0    359.1
190.0    348.2
 ...      ...
340.0    163.6
350.0    171.8 
```

假设这些列表来自两个不同的雷达，其指针未与北或其他任何方向对齐，但我们确实通过移动目标并查看每个雷达必须指向的位置来手动获取上述数据。

当雷达 A 说“我有一个 123.4 的目标！”时，我需要在哪里瞄准雷达 B 才能看到它？如果雷达 B 找到目标，我应该告诉雷达 A 指向哪里？

列表 A 环绕在最后一个元素和第一个元素之间，但列表 B 环绕在更靠近列表中间的位置。列表 A 单调增加，而列表 B 单调减少。请注意，A 上的度数的大小通常与 B 上的度数不同。

是否有一个简单的插值器可以在以下情况下正确包装：

1.  从列表 A 内插到列表 B。

2.  从列表 B 内插到列表 A。

可以使用两个单独的插值器实例化，一个用于每个方向。我假设线性（一阶）插值器是可以的，但我将来可能想使用高阶或样条插值。

一些测试用例：

*   A = 356.7, B = ?

*   A = 179.2, B = ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:46:11.643

这对我有用。可能可以使用一些清理。

```
class InterpolatedArray(object):
    """ An array-like object that provides interpolated values between set points.
    """
    points = None
    wrap_value = None
    offset = None

    def _mod_delta(self, a, b):
        """ Perform a difference within a modular domain.
            Return a value in the range +/- wrap_value/2.
        """
        limit = self.wrap_value / 2.
        val = a - b
        if val < -limit: val += self.wrap_value
        elif val > limit: val -= self.wrap_value
        return val

    def __init__(self, points, wrap_value=None):
        """Initialization of InterpolatedArray instance.

        Parameter 'points' is a list of two-element tuples, each of which maps
        an input value to an output value.  The list does not need to be sorted.

        Optional parameter 'wrap_value' is used when the domain is closed, to
        indicate that both the input and output domains wrap.  For example, a
        table of degree values would provide a 'wrap_value' of 360.0.

        After sorting, a wrapped domain's output values must all be monotonic
        in either the positive or negative direction.

        For tables that don't wrap, attempts to interpolate values outside the
        input range cause a ValueError exception.
        """
        if wrap_value is None:
            points.sort()   # Sort in-place on first element of each tuple
        else:   # Force values to positive modular range
            points = sorted([(p[0]%wrap_value, p[1]%wrap_value) for p in points])
            # Wrapped domains must be monotonic, positive or negative
            monotonic = [points[x][1] < points[x+1][1] for x in xrange(0,len(points)-1)]
            num_pos_steps = monotonic.count(True)
            num_neg_steps = monotonic.count(False)
            if num_pos_steps > 1 and num_neg_steps > 1: # Allow 1 wrap point
                raise ValueError("Table for wrapped domains must be monotonic.")
        self.wrap_value = wrap_value
        # Pre-compute inter-value slopes
        self.x_list, self.y_list = zip(*points)
        if wrap_value is None:
            intervals = zip(self.x_list, self.x_list[1:], self.y_list, self.y_list[1:])
            self.slopes = [(y2 - y1)/(x2 - x1) for x1, x2, y1, y2 in intervals]
        else:   # Create modular slopes, including wrap element
            x_rot = list(self.x_list[1:]); x_rot.append(self.x_list[0])
            y_rot = list(self.y_list[1:]); y_rot.append(self.y_list[0])
            intervals = zip(self.x_list, x_rot, self.y_list, y_rot)
            self.slopes = [self._mod_delta(y2, y1)/self._mod_delta(x2, x1) for x1, x2, y1, y2 in intervals]

    def __getitem__(self, x):       # Works with indexing operator []
        result = None
        if self.wrap_value is None:
            if x < self.x_list[0] or x > self.x_list[-1]:
                raise ValueError('Input value out-of-range: %s'%str(x))
            i = bisect.bisect_left(self.x_list, x) - 1
            result = self.y_list[i] + self.slopes[i] * (x - self.x_list[i])
        else:
            x %= self.wrap_value
            i = bisect.bisect_left(self.x_list, x) - 1
            result = self.y_list[i] + self.slopes[i] * self._mod_delta(x, self.x_list[i])
            result %= self.wrap_value
        return result 
```

和一个测试：

```
import nose

def xfrange(start, stop, step=1.):
    """ Floating point equivalent to xrange()."""
    while start < stop:
        yield start
        start += step

# Test simple inverted mapping for non-wrapped domain
pts = [(x,-x) for x in xfrange(1.,16., 1.)]
a = InterpolatedArray(pts)
for i in xfrange(1., 15., 0.1):
    nose.tools.assert_almost_equal(a[i], -i)
# Cause expected over/under range errors
result = False  # Assume failure
try: x = a[0.5]
except ValueError: result = True
assert result
result = False
try: x = a[15.5]
except ValueError: result = True
assert result

# Test simple wrapped domain
wrap = 360.
offset = 1.234
pts = [(x,((wrap/2.) - x)) for x in xfrange(offset, wrap+offset, 10.)]
a = InterpolatedArray(pts, wrap)
for i in xfrange(0.5, wrap, 0.1):
    nose.tools.assert_almost_equal(a[i], (((wrap/2.) - i)%wrap)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T21:26:24.850

但是你*可以*使用线性插值。如果您的样本 A 值为例如 7.75，则类似于 2.5 度。如果样本 B 值为 180.35，它也类似于 2.5 度。棘手的部分是当值溢出时，如果有可能的话。只需设置一堆单元测试来检查您的算法是否有效，您应该很快就会开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T21:40:49.727

第 1 部分的答案：包含校准值 + 漂移值的转换表。

基本上，如果 DialA 在物理上为 0 时报告 5.7，在 5 时报告 9.7，那么我会将漂移值设置为每个读数位置之间距离的 +/- 0.25，以考虑机械和读数漂移。

对第 2 部分的回答：在两个表盘上保持相同的值，同时显示预期的位置。

如果您不依赖于方向，则只需旋转输出转盘，直到它根据您的校准表处于正确位置。

如果您依赖于方向，那么您将需要跟踪最后 1-2 个值以确定方向。一旦您确定了方向，您就可以沿您需要的方向移动从属转盘，直到到达目标位置。

您的校准表也应包括方向（例如，正或负）。

考虑到上述两个部分，您将能够补偿旋转偏移和方向翻转，并产生准确的位置和方向读数。

下面是一些代码，给出了一个校准表，将产生位置和方向，这将解决显示问题并使从属表盘与主表盘匹配：

```
#!/usr/bin/env python

# Calibration table
# calibrations[ device ][physical position]=recorded position
calibrations={}

calibrationsdrift=1.025

calibrations["WheelA"]={}

calibrations["WheelA"]={}
calibrations["WheelA"]["000.0"]=5.7
calibrations["WheelA"]["005.0"]=9.8
calibrations["WheelA"]["010.0"]=13.9
calibrations["WheelA"]["015.0"]=18.0

calibrations["WheelB"]={}
calibrations["WheelB"]["000.0"]=182.3
calibrations["WheelB"]["005.0"]=178.4
calibrations["WheelB"]["010.0"]=174.4
calibrations["WheelB"]["015.0"]=170.3

def physicalPosition( readout , device ):
        calibration=calibrations[device]
        for physicalpos,calibratedpos in calibration.items():
                if readout < ( calibratedpos + calibrationsdrift ):
                        if readout > ( calibratedpos - calibrationsdrift ):
                                return physicalpos
        return -0

print physicalPosition( 5.8 , "WheelA")
print physicalPosition( 9.8 , "WheelA")
print physicalPosition( 10.8 , "WheelA")

def physicalDirection( lastreadout, currentreadout, device ):
        lastposition=physicalPosition( lastreadout, device)
        currentposition=physicalPosition( currentreadout, device)
        # Assumes 360 = 0, so 355 is the last position before 0
        if lastposition < currentposition:
                if lastposition == 000.0:
                        if currentposition == 355:
                                return -1
                return 1
        else:
                return -1

print physicalDirection( 5.8, 10.8, "WheelA")
print physicalDirection( 10.8, 2.8, "WheelA")

print physicalDirection( 182, 174, "WheelB")
print physicalDirection( 170, 180, "WheelB") 
```

运行程序显示方向已正确确定，即使对于向后安装在面板/设备/等上的 WheelB 也是如此：

```
$ ./dials 
000.0
005.0
005.0
1
-1
1
-1 
```

请注意，提供给函数的某些“读数”值已关闭。这是由漂移值补偿的。您是否需要一个取决于您所连接的设备。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T17:53:29.887

最简单的解决方案是让所有表格元素增加（或减少，视情况而定），对单个元素添加或减去 360 以使其如此。将表格背靠背加倍，使其涵盖 0 到 360 的整个范围，即使在所有加法和减法之后也是如此。这使得简单的线性插值成为可能。然后，您可以在计算后取模 360 以将其恢复到范围内。

# github - 如何将我的 GitHub 项目 repo 的一个分支推送到 Moovweb Cloud？

> ID：15888932
> 
> 赞同：4
> 
> 时间：2013-04-08T21:03:27.390
> 
> 标签：github, moovweb

我正在使用 GitHub，并且一直在将我的 repo 的主分支推送到 Moovweb Cloud。我已经开始分支我的项目。

如何将特定分支推送到 Moovweb 云？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T16:03:28.477

实际上，您需要将新分支推送到 master。Moovweb Cloud 不编译其他分支。它不是用作代码托管存储库，而是用于测试和部署。

所以代码是：

```
git push origin my_branch:master 
```

这需要您的“my_branch”分支并将其推送到 master。您可能需要添加“-f”以强制将其推送到最后一个构建。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T21:10:13.450

假设您在 Moovweb Cloud 上的远程存储库是您本地存储库中的“来源”：

```
git push origin my_new_local_branch 
```

将推送并在您的远程存储库上创建新分支。

# java - 如何在java中缩进正在写入控制台的多行段落

> ID：15888934
> 
> 赞同：15
> 
> 时间：2013-04-08T21:03:40.180
> 
> 标签：java, console

谁能建议一种将多行字符串写入系统控制台并缩进该文本块的方法？我正在寻找相对轻量级的东西，因为它仅用于显示命令行程序的帮助。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-04-08T21:11:38.677

**注意：**下面描述的方法不符合[@BillMan](https://stackoverflow.com/users/227986/billman)在问题评论中描述的更新要求。这**不会**自动换行超过控制台行长度的行 - 仅在换行不成问题时才使用此方法。

* * *

作为一个简单的选项，您可以使用[`String.replaceAll()`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)如下：

```
String output = <your string here>
String indented = output.replaceAll("(?m)^", "\t"); 
```

如果你不熟悉 Java 正则表达式，它的工作原理如下：

*   `(?m)`启用多行模式。这意味着中的每一行都`output`被单独考虑，而不是被视为`output`单行（这是默认设置）。
*   `^`是匹配每行开头的正则表达式。
*   `\t`导致前面正则表达式的每个匹配项（即每行的开头）被一个制表符替换。

例如，以下代码：

```
String output = "foo\nbar\nbaz\n"
String indented = output.replaceAll("(?m)^", "\t");
System.out.println(indented); 
```

产生这个输出：

```
	富
	酒吧
	巴兹

```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-09-21T09:33:51.980

使用[JDK/12 早期访问版本](http://jdk.java.net/12/)，现在可以使用`indent`String 类的 API，该 API 目前在预览功能下可用，可用作：

```
String indentedBody =
`<html>
   <body>
       <p>Hello World - Indented.</p>
   </body>
</html>`.indent(4); 
```

上面代码的输出将是

> ```
>  <html>
>        <body>
>            <p>Hello World - Indented.</p>
>        </body>
>     </html> 
> ```

API 的当前文档化规范进一步如下：

```
/**
 * Adjusts the indentation of each line of this string based on the value of
 * {@code n}, and normalizes line termination characters.
 * <p>
 * This string is conceptually separated into lines using
 * {@link String#lines()}. Each line is then adjusted as described below
 * and then suffixed with a line feed {@code "\n"} (U+000A). The resulting
 * lines are then concatenated and returned.
 * <p>
 * If {@code n > 0} then {@code n} spaces (U+0020) are inserted at the
 * beginning of each line. {@link String#isBlank() Blank lines} are
 * unaffected.
 * <p>
 * If {@code n < 0} then up to {@code n}
 * {@link Character#isWhitespace(int) white space characters} are removed
 * from the beginning of each line. If a given line does not contain
 * sufficient white space then all leading
 * {@link Character#isWhitespace(int) white space characters} are removed.
 * Each white space character is treated as a single character. In
 * particular, the tab character {@code "\t"} (U+0009) is considered a
 * single character; it is not expanded.
 * <p>
 * If {@code n == 0} then the line remains unchanged. However, line
 * terminators are still normalized.
 * <p>
 *
 * @param n  number of leading
 *           {@link Character#isWhitespace(int) white space characters}
 *           to add or remove
 *
 * @return string with indentation adjusted and line endings normalized
 *
 * @see String#lines()
 * @see String#isBlank()
 * @see Character#isWhitespace(int)
 *
 * @since 12
 */
public String indent(int n) 
```

# sql - 如何删除用于事务复制的列文章

> ID：15888936
> 
> 赞同：1
> 
> 时间：2013-04-08T21:03:59.877
> 
> 标签：sql, sql-server, tsql, replication

我按照以下链接的指导，[如何：定义和修改列过滤器（复制 Transact-SQL 编程）](http://technet.microsoft.com/en-us/library/ms146925%28v=sql.105%29.aspx)。我目前有一个设置，我在表中进行复制，用户。我们不再想要复制列 SSN。对于我的测试，我在包含 SSN 的用户表中插入了一个新行。我执行了以下 SQL 语句，没有任何错误。在我使用复制监视器同步发布后，新行没有出现在我的复制数据库中。我决定再进行一次插入和重新同步。正如我预期的那样，另一行没有出现新的缺少 SSN 的行。是不是我做错了什么？

```
exec  sp_articlecolumn       @publication = N'Publisher Test 01', @article = N'Users', @column = N'SSN', @operation = N'drop', @force_invalidate_snapshot = 1, @force_reinit_subscription = 1
exec  sp_articleview         @publication = N'Publisher Test 01', @article = N'Users', @change_active = 1
exec  sp_startpublication_snapshot @publication = 'Publisher Test 01'
exec  sp_reinitsubscription  @publication = N'Publisher Test 01', @article = N'Users',  @subscriber = N'TEST', @destination_db = N'Test01_Replication' 
```

# php - 类变量函数

> ID：15888945
> 
> 赞同：4
> 
> 时间：2013-04-08T21:04:23.113
> 
> 标签：php, callable

Say`$this->varname`等于`is_callable()`返回 true 的字符串。要调用它，我必须这样做，`$temp = $this->varname; $temp();`或者......有没有另一种方法可以调用它而不必创建两条线？

这样做的问题`$temp = $this->varname()`是，它会尝试调用类中名为 varname() 的方法——它不会调用 $this->varname 处的函数。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:06:10.027

另一种选择是[`call_user_func`](http://www.php.net/manual/en/function.call-user-func.php)：

```
call_user_func($this->varname); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T21:09:12.617

您必须这样做或使用`call_user_func(_array)`. 或者正如 Anthony 在内部 ( [http://www.mail-archive.com/internals@lists.php.net/msg64647.html](http://www.mail-archive.com/internals@lists.php.net/msg64647.html) ) 上向我建议的那样，您可以这样做`${'_'.!$_=$this->varname}();`。

已经存在对 PHP 的拉取请求，正在内部讨论：[https](https://github.com/php/php-src/pull/301) ://github.com/php/php-src/pull/301 （和 rfc [https://wiki.php.net/rfc/fcallfcall](https://wiki.php.net/rfc/fcallfcall) )

# clips - 剪辑无限的事实

> ID：15888950
> 
> 赞同：1
> 
> 时间：2013-04-08T21:04:48.127
> 
> 标签：clips, expert-system, pyclips, knowledge-capture

我正在开发一个专家系统，它将使用 PyClips 做出录取决定。但是，代码不断产生“内存不足”错误。我想我已经隔离了我的问题。我的 CLIPS 文件有问题。希望有人能看到我在这里做错了什么。这是代码的最简单版本....为了调试它，我进行了简化：所以这是我的模板，为了论证，只有一条规则：如果收到成绩单，则 app-complete属性被标记为 TRUE。

```
; template for application facts
(deftemplate application "structure of an application"
(slot app-id (type INTEGER))
(slot app-complete (type SYMBOL))
(slot transcript-received (type SYMBOL))
 )

(defrule complete "rule for app completeness"

?f <- (application
        (transcript-received Yes)    
    )
=>
    (modify ?f
        (app-complete TRUE)
    )
)
; end. 
```

所以当我这样做时`(assert (application (app-id 123) (transcript-received Yes)))` ，我的事实是被添加的。当我点击运行时.... CLIPS 中的窗口开始被成千上万的事实超载... app-complete 属性看起来被标记为 TRUE，然而，事实只是不停地循环和循环。当事实太多时，我说的是100K之类的……然后CLIPS就退出了……知道我在这里做错了什么吗？我的语法以某种方式搞砸了？我的意图是让一个 sqlite 数据库能够从数据库中读取“事实”，以便系统能够做出决定......但我无法超越这个！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:11:33.997

要记住的重要一点是，当您修改一个`deftemplate`事实时，该事实将被撤回并断言一个新的（修改后的）事实。您的规则也匹配修改后的事实，然后再次修改和匹配等，从而导致无限循环。如果您在运行代码时观察事实和激活，您会看到如下内容：

```
<== f-1     (application (app-id 123) (app-complete nil) (transcript-received Yes))
==> f-2     (application (app-id 123) (app-complete TRUE) (transcript-received Yes))
==> Activation 0      complete: f-2
<== f-2     (application (app-id 123) (app-complete TRUE) (transcript-received Yes))
==> f-3     (application (app-id 123) (app-complete TRUE) (transcript-received Yes))
==> Activation 0      complete: f-3
<== f-3     (application (app-id 123) (app-complete TRUE) (transcript-received Yes))
==> f-4     (application (app-id 123) (app-complete TRUE) (transcript-received Yes))
==> Activation 0      complete: f-4
(etc.) 
```

您可以通过仅匹配尚未完成的应用程序来防止这种情况。这是您的代码的修改版本，它`FALSE`向`app-complete`插槽添加了默认值，并且仅匹配不完整的应用程序：

```
(deftemplate application "structure of an application"
  (slot app-id (type INTEGER))
  (slot app-complete (type SYMBOL) (default FALSE))
  (slot transcript-received (type SYMBOL)))

(defrule complete "rule for app completeness"
  ?f <- (application (transcript-received Yes) (app-complete FALSE))
  =>
  (modify ?f (app-complete TRUE))) 
```

现在，如果您观察事实和激活，当您断言事实并运行时，您应该会看到以下内容：

```
CLIPS> (assert (application (app-id 123) (transcript-received Yes)))
==> f-0     (application (app-id 123) (app-complete FALSE) (transcript-received Yes))
==> Activation 0      complete: f-0
<Fact-0>
CLIPS> (run)
<== f-0     (application (app-id 123) (app-complete FALSE) (transcript-received Yes))
==> f-1     (application (app-id 123) (app-complete TRUE) (transcript-received Yes))
CLIPS> 
```

# html - 浏览器向服务器请求图像或任何媒体的次数

> ID：15888954
> 
> 赞同：0
> 
> 时间：2013-04-08T21:04:55.767
> 
> 标签：html, rendering

我认为标题几乎涵盖了所有内容。浏览器请求文件（例如图像）在同一页面上的多个位置使用多少次？我有相同的图像被多个使用，我想知道如果浏览器要多次请求它，如何帮助客户端最小化带宽使用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:09:10.217

浏览器将下载一次图像，然后将其缓存。因此，如果它再次请求相同的图像，它将显示缓存的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T21:09:26.243

如果是相同的图像（相同的路径），它将只下载一次，除非您将图像设置为无缓存。

# c++ - 这段代码中的竞争条件是什么？

> ID：15888955
> 
> 赞同：1
> 
> 时间：2013-04-08T21:04:56.453
> 
> 标签：c++, c, multithreading

以下是我对`SleepConditionVariableCS`,`WakeAllConditionVariable`和线程创建函数的实现。问题是，有时当我尝试创建线程时，创建线程会卡`WaitForSingleObject( cv->mut, INFINITE );`在`SleepConditionVariableCS`. 我无法弄清楚这里的比赛条件是什么。

```
 typedef struct
{
  int waiters_count;
  HANDLE sema_;
  HANDLE mut;
} CONDITION_VARIABLE;

void SleepConditionVariableCS(CONDITION_VARIABLE *cv, CRITICAL_SECTION *cs, int32_t dwMilliseconds){
    WaitForSingleObject( cv->mut, INFINITE ); //Acuire object lock

    cv->waiters_count++;
    LeaveCriticalSection (cs);
    if (SignalObjectAndWait(cv->mut, cv->sema_, dwMilliseconds, FALSE) == WAIT_TIMEOUT){ //SignalObjectAndWait releases the lock
        cv->waiters_count--;
    }
    EnterCriticalSection(cs);
}

void WakeAllConditionVariable(CONDITION_VARIABLE *cv){
    WaitForSingleObject( cv->mut, INFINITE );

    while (cv->waiters_count > 0){
        cv->waiters_count = cv->waiters_count - 1;
        ReleaseSemaphore (cv->sema_, 1, 0);
    }
    ReleaseMutex(cv->mut);
}

void KernelThread_CreationWait(void *kthread){
    KernelThread *thread =  (KernelThread *) kthread;

    EnterCriticalSection(thread->lock);
    thread->state = Thread_CREATED;

    WakeAllConditionVariable(thread->condition_variable);

    LeaveCriticalSection(thread->lock);
    KernelThread_main(kthread);
}

KernelThread* createKernelThread(){
    EventHandler_getHandler();

    unsigned long threadid;
    int t;
    void *hand;

    KernelThread *thread = KernelThread_malloc();
    EnterCriticalSection(thread->lock);
    thread->state = Thread_WAITINGFORCREATION;
    hand = CreateThread(NULL,
            0, // security, stack size
            (LPTHREAD_START_ROUTINE)&KernelThread_CreationWait, // start
            (void *)thread,
            0,
            &threadid); // param, creation flags, id
    if (hand == NULL){
        printf("ERROR: return handle from CreateThread() is NULL\n");
        exit(-1);
    }
    thread->thread = hand;
    thread->thread_id = threadid;

    SleepConditionVariableCS(thread->condition_variable,thread->lock,INFINITE);
    LeaveCriticalSection(thread->lock);

    return thread;
}

void InitializeConditionVariable (CONDITION_VARIABLE *cv){
    cv->waiters_count = 0;
    cv->sema_ = CreateSemaphore (NULL,       // no security
                                0,          // initially 0
                                0x7fffffff, // max count
                                NULL);      // unnamed
    cv->mut = CreateMutex(
          NULL,              // default security attributes
          FALSE,             // initially not owned
          NULL);             // unnamed mutex
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:52:34.480

在尝试使用 win32 api 实现 pthread 样式的条件变量时，请查看以下对陷阱的非常详细的分析。[http://www.cs.wustl.edu/~schmidt/win32-cv-1.html](http://www.cs.wustl.edu/~schmidt/win32-cv-1.html)。（特别是第 3.4 节）。

在您的代码中，我目前只看到一个问题。在`SleepConditionVariableCS()`：

```
 LeaveCriticalSection (cs);
    if (SignalObjectAndWait(cv->mut, cv->sema_, dwMilliseconds, FALSE) == WAIT_TIMEOUT){ //SignalObjectAndWait releases the lock
        // RIGHT HERE YOU HAVE NOT ACQUIRED cv->mut
        cv->waiters_count--; // SO THIS IS A DATA RACE (with the cv->waiters_count uses in WakeAllConditionVariable()
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T21:19:04.913

我没有发现任何对我来说真正突出的逻辑缺陷。

然而...

您是否在使用之前将 CONDITION_VARIABLE 初始化为已知状态？

您不会检查一些系统调用的返回，这些系统调用可能会返回您永远不会看到的错误。 `WaitForSingleObject`并且`EnterCriticalSection` *可能*会失败或处理不当。

`thread->lock`在处理条件变量时，您是否总是锁定并保持锁定状态？我看到 2 段不同的代码引用`thread->lock`.

您是否每次都以相同的顺序锁定/解锁关键部分和 sem？

# wcf - 选择 wcf 安全模式

> ID：15888956
> 
> 赞同：0
> 
> 时间：2013-04-08T21:05:05.403
> 
> 标签：wcf, wcf-security

我将开发一个 wcf 服务，该服务将公开我们的目录信息以供几个外部组织访问。我想在我的后端使用一个包含他们的登录信息的简单表对他们进行身份验证/授权。（现在只有一个，但可能会继续增长）我应该在这种情况下使用带有传输凭据的 wcf 消息吗？欢迎任何想法/建议。他们如何访问我们的 wcf 服务是否重要？我将使用vs2012。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T22:39:25.487

鉴于您的客户端可能没有使用 WCF 甚至 Windows，我建议使用 WSHttpBinding，它允许您使用消息安全性并将用户名和密码附加到请求中。然后，在您的主机上，您可以使用自定义密码验证器根据您的数据库验证凭据。有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/aa702565.aspx](http://msdn.microsoft.com/en-us/library/aa702565.aspx)。如果您希望传输安全，SSL 也是一个附加选项。

# opencv - Boost multiarray vs OpenCV Mat

> ID：15888959
> 
> 赞同：0
> 
> 时间：2013-04-08T21:05:06.703
> 
> 标签：opencv, boost

Boost多维数组和OpenCV多维数组的最大区别是什么？

我正在用 C++ 实现一个聚类算法，并且需要一个数据结构来存储数据点。它应该能够处理不同维度的数据，例如 1D 数据（灰度图像）、3D 数据（彩色图像）和 Nd 数据（特征选择后）。

我应该选择哪一个？似乎对于 OpenCV Mat，我们需要事先知道数据的维度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T02:44:07.290

正如 perfanoff 所说，我会选择您最有信心的库，并且您将在代码中更多地使用它。除此之外，鉴于您正在处理图像数据，OpenCV 似乎是更好的选择。

OpenCV Mat 容器可以返回它们的[类型](http://docs.opencv.org/modules/core/doc/basic_structures.html#mat-type)，因此您的函数可以检查矩阵是否具有 1 通道、3 通道或 Nd 数据。您还可以使用[元素大小](http://docs.opencv.org/modules/core/doc/basic_structures.html#mat-elemsize)函数来查找通道数。

作为免责声明，我对 Boost 多维数组没有太多经验。

# sql - SQL 不包括 2 列组合上的重复值

> ID：15888960
> 
> 赞同：1
> 
> 时间：2013-04-08T21:05:06.723
> 
> 标签：sql, join, duplicate-removal

我正在练习 sql-ex.ru 的练习 16。问题如下：

```
Find the pairs of PC models having identical speeds and RAM. 
As a result, each resulting pair is shown only once, i.e. (i, j) but not (j, i). 
Result set: model with higher number, model with lower number, speed, and RAM. 
```

数据库架构是：

```
Product(maker, model, type)
PC(code, model, speed, ram, hd, cd, price)
Laptop(code, model, speed, ram, hd, screen, price)
Printer(code, model, color, type, price) 
```

我写了以下查询：

```
SELECT A.model, B.model, A.speed, A.ram
FROM PC A
JOIN PC B ON (A.model<>B.model)
WHERE A.speed=B.speed
AND A.ram=B.ram 
```

但这会将 i,j 的重复项显示为 j,i。这是我的输出：

```
model   model   speed   ram
1121    1233    750 128
1232    1233    500 64
1232    1260    500 32
1233    1121    750 128
1233    1232    500 64
1260    1232    500 32 
```

如您所见，i,j 的值被翻转并计为不同的值。有没有一种简单的方法来摆脱这样的重复？我在这方面有点迷失了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:08:31.400

我认为问题陈述中的“型号较高，型号较低”是您需要在`A.model > B.model`某处有条件的线索。加入的`ON`条件听起来像是一个很好的候选人：

```
SELECT A.model, B.model, A.speed, A.ram
FROM PC A
JOIN PC B ON (A.model > B.model) -- <<<=== Here
WHERE A.speed=B.speed
AND A.ram=B.ram 
```

`<>`是对称的；不是`>`。切换到`>`确保如果`{i, j}`进入，那么`{j, i}`肯定会退出。

# ruby - 使用 Ruby RocketAMF 组装 AMF 请求

> ID：15888962
> 
> 赞同：0
> 
> 时间：2013-04-08T21:05:17.270
> 
> 标签：ruby, amf

我想让 AMF 请求正文与以下内容相同（查尔斯日志）： ![在此处输入图像描述](https://i.stack.imgur.com/0gDiu.png)

如 Charles 所示，它有一个“Command”值对象和一个“CCLocalPlayerChanges”值对象。我对此类对象的值感到困惑，如何使用 RocketAMF 制作它们？

我曾尝试对此类对象使用哈希：

```
data = [{
          :method => "load",
          :service => "start.game",
          :player_delta => {:stamina => 0},
          :sequence_num => self.sequence_num,
          :transaction_time => Time.now.to_i.to_s,
          :icp => 0,
        }]

env = RocketAMF::Envelope.new :amf_version => 3
env.messages << RocketAMF::Message.new('BatchController.authenticate_iphone', '/1', data)
body = env.to_s
res = RestClient.post "http://localhost/amf", env.to_s, :content_type => 'application/x-amf' 
```

或类映射：

```
class ClassCommand; attr_accessor :service, :sequence_num, :transaction_time, :icp; end;
command_obj = ClassCommand.new
command_obj.service = "start.game"
command_obj.sequence_num = 0
command_obj.transaction_time = Time.now.to_i.to_s
command_obj.icp = 0
RocketAMF::ClassMapper.define {|m| m.map :as => 'Command', :ruby => 'ClassCommand'}
data = [command_obj]

env = RocketAMF::Envelope.new :amf_version => 3
env.messages << RocketAMF::Message.new('BatchController.authenticate_iphone', '/1', data)
body = env.to_s
res = RestClient.post "http://localhost/amf", env.to_s, :content_type => 'application/x-amf' 
```

但他们都没有给我价值（如下所示，查尔斯的两个对象的价值都是空的）：

![在此处输入图像描述](https://i.stack.imgur.com/ZuIa6.png)

我是 AMF 的新手，所以想知道对象值是否为空以及如何使用 RocketAMF gem 制作它们真的很重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T22:42:27.840

让您的生活更轻松的一个想法是仅保存“查尔斯”请求，然后`File.read`将其保存在 ruby​​ 中以在帖子正文中使用。

# c++ - iostream：没有这样的文件或目录

> ID：15888965
> 
> 赞同：6
> 
> 时间：2013-04-08T21:05:34.277
> 
> 标签：c++, windows, qt, iostream

我正在与 Windows vista 上的 Qt 创建者一起工作。我正在尝试编译一个非常简单的“.cpp”代码，其中包括标准 c++ 库“iostream”，如下所示：

```
#include <iostream>
using namespace std;
int main(){
    cout << "thanks";
    return 0;
} 
```

问题甚至在编译代码之前就出现了，它出现在 Qt 突出显示库并承认我（iostream：没有这样的文件或目录）时。

几天前它运行良好，然后我安装了 VS-Express-2012，然后我将其卸载，因为令人惊讶的是，它不适用于 Windows Vista。在删除 VS-2012 之后，Qt 创建者不再看到 c++ 库。

请注意，我仍然可以通过命令行控制台编译和运行我以前编写的代码，这意味着在删除 VS-2012 后，c++ 库并没有被删除！！此外，我之前的所有代码（在使用相同 Qt 创建的旧项目中）都没有这样的问题（即：Qt 识别并查看标准库），我仍然可以使用 Qt creator 正常编译和运行它们，即使当我在这些旧项目中创建了一个新的“.cpp”文件：

![在此处输入图像描述](https://i.stack.imgur.com/FD9Hq.jpg)

..但是，当我在一个全新的项目中创建一个新的“.cpp”文件时，库消失并且链接丢失：

![在此处输入图像描述](https://i.stack.imgur.com/EtzTx.jpg)

..（我不想习惯每次在编译器遇到类似问题时都重新安装 Qt，我想首先了解为什么会发生这种情况）

那么，Qt 到底在寻找什么（或者我应该在哪里看？），谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-01-28T15:02:41.727

您不需要重新安装 Qt creator。如果你想用它来运行 C++ 源代码，你应该首先创建一个项目文件。执行以下操作：

文件 -> 新建文件或项目 -> 非 Qt 项目 -> 普通 C++ 应用程序；

这样您就可以创建一个 .pro 文件。然后Qt creator就可以找到<iostream>之类的库文件了。有关详细说明，请参阅[https://stackoverflow.com/a/9613956/5383964](https://stackoverflow.com/a/9613956/5383964)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-12T10:04:14.903

首先在 Qt Creator 中打开您的项目文件（“.pro”）并添加下一行：

```
INCLUDEPATH += /usr/include/c++/{gcc_version}/ 
```

然后尝试`#include <iostream>`在您的代码中使用

对我来说 INCLUDEPATH 是**/usr/include/c++/4.7.3/**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-03T19:53:01.013

这个问题发生在我们刚刚安装 Qt 之后，使用了应该与 .net 编译器一起使用的版本的安装程序。.net 安装未完成：未安装 C++ 开发功能。我们完成了.net的安装，重启了Qt，问题就解决了：Qt自动检测到新安装的编译器程序并找到了。请注意，对于某些机器，我们需要以管理员身份启动 Qt 才能完成这项工作。

# ember.js - jshint 抱怨：'Ember' 未定义

> ID：15888975
> 
> 赞同：16
> 
> 时间：2013-04-08T21:06:10.857
> 
> 标签：ember.js, jshint

我有一个标准`Ember` `main.js`文件，开头是这样的：

```
this.App = Ember.Application.create({
    LOG_TRANSITIONS: true,
    VERSION: '1.0.0',
    ready: function () {
        console.log('App version: ' + App.VERSION + ' is ready.');
    }
}); 
```

运行此`jshint`程序会抱怨未定义 Ember，在部署阶段对于服务器中的此特定文件而言，这是正确的。因此，会显示许多错误消息。

`Ember`通过以下`script`标签在浏览器中可用`index.html`：

```
<script src="scripts/vendor/ember-1.0.0-rc.2.js"></script> 
```

我`jshint`该怎么说`Ember`？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-08T21:35:11.697

以下应该做到这一点：

```
/*global Ember */
this.App = Ember.Application.create({
    LOG_TRANSITIONS: true,
    VERSION: '1.0.0',
    ready: function () {
        console.log('App version: ' + App.VERSION + ' is ready.');
    }
}); 
```

在[JS 提示文档中找到](http://www.jshint.com/docs/)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-06-17T07:18:21.413

如果您使用的是新的 ES6，例如来自[ember-cli](http://iamstef.net/ember-cli/)，则必须导入 Ember：

```
import Ember from 'ember'; 
```

* * *

我正在关注[Evil Trout 的 Ember Reddit 教程](https://www.youtube.com/watch?v=7twifrxOTQY)，并在测试中看到以下错误：

```
my-new-app/routes/subreddit.js should pass jshint.
my-new-app/routes/subreddit.js: line 3, col 16, 'Ember' is not defined. 
```

将上述行添加到`my-new-app/routes/subreddit.js`通过测试的顶部。

# security - 如何使用 iTextSharp 预填充 PDF 表单，同时其他用户仍可在 Adob e Reader 中编辑和保存它？

> ID：15888977
> 
> 赞同：0
> 
> 时间：2013-04-08T21:06:16.203
> 
> 标签：security, pdf, itextsharp, adobe-reader, pdf-form

现在我有一个表单模板，其中包含使用 iTextSharp 库从数据库中预填充的一些字段。然后，用户将填写其余字段并保存填写的表格。然后我将提取数据并将其放入数据库中。

目前我能够创建 PDF 并且它们可以很好地预填充。我什至可以在我的计算机上的 Adob​​e Reader 中编辑和保存它们。但是我发现当其他人打开这些​​相同的文件时，他们不允许保存表单。

我需要做什么才能让所有使用 Adob​​e Reader 的用户保存表单？这是我必须创建 PDF 的代码：

```
Dim pdfReader As PdfReader = New PdfReader(formPath)
pdfReader.RemoveUsageRights()
Dim pdfStamper As PdfStamper = New PdfStamper(pdfReader, New FileStream(outputPath, FileMode.Create))
Dim pdfFormFields As AcroFields = pdfStamper.AcroFields
Dim xfdfReader As XfdfReader = New XfdfReader(xfdfPath)

pdfFormFields.SetFields(xfdfReader)
pdfStamper.Close() 
```

我曾经有一个问题，即使我无法在 Reader 中保存表单，这就是我添加这一行的原因：

```
pdfReader.RemoveUsageRights() 
```

这样*我*就可以编辑它创建的 PDF，这让我认为一切都已解决。但没有其他人可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:41:11.773

请查阅示例[ReaderEnabledForm.cs](https://git.itextsupport.com/projects/I5NS/repos/book/browse/iTextExamplesWeb/iTextExamplesWeb/iTextInAction2Ed/Chapter08/ReaderEnabledForm.cs)。它描述了填写 Reader Enabled 表单的不同方法：

1.  打破阅读器启用
2.  删除阅读器启用
3.  保留阅读器启用

您已经尝试过 1 和 2，而您要求 3，包括在创建 PdfStamper 实例时添加额外参数：

```
new PdfStamper(pdfReader, New FileStream(outputPath, FileMode.Create), '\0', true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-24T09:59:00.807

您只需在代码中使用它。创建时`PdfStamper`，您需要添加额外的参数，如下所示：

```
PdfStamper pdfStamper = new PdfStamper(pdfReader, new FileStream(
    newPath, FileMode.CreateNew, FileAccess.Write), '\0', true); 
```

这会成功的。

# android - 带有 Openlayers 的 PhoneGap：重定向到另一个页面的弹出窗口出现错误 Uncaught ReferenceError: $ is not defined

> ID：15888981
> 
> 赞同：3
> 
> 时间：2013-04-08T21:06:34.193
> 
> 标签：android, jquery, cordova, jquery-mobile, openlayers

我有一个 PhoneGap 应用程序使用 Openlayers 来显示本地地图。我使用弹出窗口显示标记之前出现的位置信息。我在此弹出窗口中附加了一个链接以重定向到另一个页面，但是当单击弹出窗口重定向时出现错误“未捕获的 ReferenceError：$ 未定义”。新页面仍然显示但没有任何 js 库或加载 css，因此生成错误“未捕获的 ReferenceError：$ 未定义”。我认为从弹出窗口重定向时，所有 js 库都不再位于 DOM 中。我使用 Ajax 加载其他页面并将其添加到 DOM，所以我在第一页中引用的所有 js 库都是 index.html。我在我的应用程序中使用其他重定向成功重定向。

请帮我解决这个错误！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:17:14.710

根据您的代码和我们的对话，在 JQM 之外生成的链接不会被它识别。因此，必须将 jQuery 和 jQuery Mobile 链接到新链接。

在您的代码中，链接是由 OpenLayer 而非 JQM 生成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:24:36.103

这是我的代码：

```
 var init = function () {
    OpenLayers.ImgPath = "images/"
    var vector = new OpenLayers.Layer.Vector("Vector Layer", {});
    sprintersLayer = new OpenLayers.Layer.Vector("Sprinters", {
        styleMap: new OpenLayers.StyleMap({
            externalGraphic: "images/mobile-loc.png",
            graphicOpacity: 1.0,
            wrapDateLine      : true,
            graphicWidth: 32,
            graphicHeight: 32,
            graphicYOffset: -26
        })
    });
    //add locations to feature
    addFeature();

    selectControl = new OpenLayers.Control.SelectFeature(sprintersLayer, {
        autoActivate:true,
        onSelect: onFeatureSelect,
        onUnselect: onFeatureUnselect
        });
    function onPopupClose(evt) {
        selectControl.unselect(selectedFeature);
    }
    function onFeatureSelect(feature) {
        selectedFeature = feature;
        popup = new OpenLayers.Popup.FramedCloud("chicken",
            feature.geometry.getBounds().getCenterLonLat(),
            null,'<div style="height:40px"><a id="locationListView" href="location-detail.html?id='+
            feature.attributes.LocationID+'&masterID='+"1"+'"><h1 style="color:#FF0000;font-size:16px;margin-bottom: 0px">'+feature.attributes.Name+'</h1><p class="classement '+
            feature.attributes.LocationRating+'">'+feature.attributes.LocationRating+
            ' stars</p></a></div>'
            , null, true, onPopupClose);
        popup.panMapIfOutOfView = true;
        popup.autoSize = true;
        feature.popup = popup;
        map.addPopup(popup);
    }
    function onFeatureUnselect(feature) {
        map.removePopup(feature.popup);
        feature.popup.destroy();
        feature.popup = null;
    }

    // create map
    map = new OpenLayers.Map({
        div: "map",
        theme: null,
        projection: sm,
        controls: [
            new OpenLayers.Control.Attribution(),
            new OpenLayers.Control.TouchNavigation({
                dragPanOptions: {
                    enableKinetic: true
                }
            }),
            selectControl
        ]
    });
    layerMapnik = new OpenLayers.Layer.OSM.Mapnik("Mapnik");
    layerMapnik.setOpacity(0.4);
    map.addLayer(layerMapnik);
    map.isValidZoomLevel = function(zoomLevel) {
           return ( (zoomLevel != null) &&
              (zoomLevel >= 12) && // set min level here, could read from property
              (zoomLevel <= 16) );
        }

    var newLayer = new OpenLayers.Layer.OSM("Local Tiles", AppPath + "${z}/${x}/${y}.png", { numZoomLevels: 19, alpha: true, isBaseLayer: false,tileOptions: {crossOriginKeyword: null} });
    map.addLayer(newLayer);
    map.addLayer(vector);
    map.addLayer(sprintersLayer);
    //point of center
    //centerPoint = new OpenLayers.LonLat(106.62230325481676,10.856649277232393).transform(new OpenLayers.Projection("EPSG:4326"), map.getProjectionObject());
    //if (!map.getCenter()) {
        //map.setCenter(centerPoint, zoom);
    //}
    var style = {
        fillOpacity: 0.1,
        fillColor: '#000',
        strokeColor: '#f00',
        strokeOpacity: 0.6
    };
}; 
```

我在 onFeatureSelect(feature) 函数中将链接重定向附加到 Popup 中。重定向到 location-Detail.html 成功后，我在 js 库的第一行出现错误，我使用 $ (jQuery) 获取元素 html。这是 location-Detail.html 的代码。

```
<!DOCTYPE html> 
<html> 

<!-- Mirrored from ritenv.com/templates/klassio-rsv/gallery.php by HTTrack Website Copier/3.x [XR&CO'2010], Sat, 30 Mar 2013 02:13:17 GMT -->
<head> 

</head> 

<body>

    <div data-dom-cache="false" data-role="page" class="pages" id="locationDetail" data-theme="a">
    <div data-role="header">
            <div class="left">
                <a href="#" class="showMenu menu-button"><img src="images/menu-button.png" width="40" /></a>
                <a href="#" class="back-button"><img src="images/back-button.png" width="40" /></a>
            </div>
            <h1><p class="no-margin" id="category"></p><p class="no-margin">TourGuide</p></h1>

    </div>
        <!-- /header -->

    <div data-role="content" data-theme="a" class="minus-shadow">
        <div class="ui-grid-a" id="places_infos">   
            <div class="ui-block-a" id="LocationImage">
                <p id="imageMain"></p>  
            </div>      
            <div class="ui-block-b">        
                <div id="LocationDescription"></div>
                <div id="starLocationRating" data-number="4"></div>
                <div id="hintLocation"></div>
                <div id="starFavorites"><img class="imageFavorites" src="images/favorites_add.png"></div><br>
                <div><p class="distance" style="height:16px"></p></div>
                <div><a href="#" class="button button9" id="locationMap"><p>Map</p></a></div>
            </div>
    </div><!-- /grid-a -->
        <div id="tabs">
            <ul class="tab-menu-ul"> 
                <li><a href="#tab1">Detail</a></li> 
                <li><a href="#tab2">Gallery</a></li> 
                <li><a href="#tab3">Reviews</a></li>
                <li><a href="#tab4">Share</a></li>
            </ul>
            <div id="tab1">
                <div id="nearPlaces">
                <h1>Nearly Locations:</h1>
                    <ul data-role="listview" data-inset="true" id="locationListView">

                    </ul>
                </div>      
            </div>
            <div id="tab2">
                <a class="button button3" id="takePhoto">Take Photo</a>
                <ul id = "gallery" class="gallery photoswipe column-split  four-column" style="display: inline-block;">
                    <li><a data-ajax="false" href="images/content/stair-case.jpg"><img src="images/content/stair-case.jpg" alt="......." /></a></li>
                    <li><a data-ajax="false" href="images/content/concert.jpg"><img src="images/content/concert.jpg" alt="......" /></a></li>
                    <li><a data-ajax="false" href="images/content/beach.jpg"><img src="images/content/beach.jpg" alt="........." /></a></li>
                    <li><a data-ajax="false" href="images/content/garden.jpg"><img src="images/content/garden.jpg" alt="......." /></a></li>
                </ul>
            </div>
            <div id="tab3">
                    <div class="dropdown-toggle needsclick" id="starRating" data-number="4"></div>
                    <div class="dropdown-toggle needsclick" id="hint"></div>
                  <div id="myComment">
                    <h1>Me: </h1>
                    <ul id="commentList"></ul>
                  </div>
                  <div class="subcontainer">
                    <form method="post" action="" id="comment_form" data-ajax="false">
                        <div>
                            <label for="message" class="formsub">Your Comment:</label>
                            <textarea cols="40" class="textarea" rows="8" name="message" id="comment"></textarea>
                        </div>
                        <div id="loader">
                            <button type="submit" id="submit">SEND</button>
                        </div>
                    </form>
                  </div>
                  <div>
                    <h1>Others: </h1>
                    <ul id="userCommentList"></ul>
                  </div>
            </div>
            <div id="tab4">
                <p> Share with facebook.</p>
            </div>  
        </div>

    </div><!-- /content -->

        <div class="bread-crumb">
            <ul id="linkPage">
                <li><a data-transition="pop" href="index.html"><img src="images/bc-home.png" width="16" /></a></li>
                <li><a data-transition="pop" href="#" id="linkPage1"></a></li>
            </ul>
        </div>
<script>
$(document).ready(function(){
    $('#locationDetail').die().live("pageshow", function( event ) {
        event.preventDefault();
        initLocationDetailPage();
    });
});
</script>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-34399779-4']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</div><!-- /page -->

</body>

<!-- Mirrored from ritenv.com/templates/klassio-rsv/gallery.php by HTTrack Website Copier/3.x [XR&CO'2010], Sat, 30 Mar 2013 02:13:35 GMT -->
</html> 
```

我把所有的js库都放在index.html中，其他情况js库也加载成功。对这个错误有什么想法吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T14:23:16.803

索引.html：

```
<!DOCTYPE html> 
<html> 

<!-- Mirrored from ritenv.com/templates/klassio-rsv/products-services.php by HTTrack Website Copier/3.x [XR&CO'2010], Sat, 30 Mar 2013 02:13:12 GMT -->
<head> 
    <title>Klassio RSV</title> 
    <meta id="extViewportMeta" name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />   

    <!-- Home screen icon  Mathias Bynens mathiasbynens.be/notes/touch-icons -->
    <!-- For iPhone 4 with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="images/icon.png">
    <!-- For first-generation iPad: -->
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="images/icon.png">
    <!-- For non-Retina iPhone, iPod Touch, and Android 2.1+ devices: -->
    <link rel="apple-touch-icon-precomposed" href="images/icon.png">
    <!-- For nokia devices: -->
    <link rel="shortcut icon" href="images/icon.png">

    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/ui-lightness/jquery-ui-1.8.24.custom.css" />
    <link rel="stylesheet" href="css/themes/default/RSVmain.min.css" />
    <link rel="stylesheet" href="css/themes/default/jquery.mobile.structure-1.1.1.min.css" />
    <link rel="stylesheet" href="css/flexslider.css">
    <link rel="stylesheet" href="css/photoswipe.css">
    <link rel="stylesheet" href="css/add2home.css">
    <link rel="stylesheet" href="css/TourGuideStyle/listview.css">
    <link rel="stylesheet" href="css/TourGuideStyle/map.css">
    <link rel="stylesheet" href="css/TourGuideStyle/style.mobile-jq.css">
    <link rel="stylesheet" href="css/TourGuideStyle/style.mobile.css">
    <link rel="stylesheet" href="css/TourGuideStyle/locationDetail.css">

        <link rel="stylesheet/less" href="css/style84d5.html?theme=&amp;color=">

     <!-- fonts -->
    <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,600' rel='stylesheet' type='text/css'>
    <script type="text/javascript" src="js/cordova-2.2.0.js"></script>
    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript" src="js/jquery-ui-1.8.24.custom.min.js"></script>

    <script type="text/javascript" src="js/jquery.mobile-1.1.1.min.js"></script>
    <script type="text/javascript" src="js/less-1.3.0.min.js"></script>
    <script type="text/javascript" src="js/ref/OpenLayers.js"></script>
    <script type="text/javascript" src="js/ref/OpenStreetMap.js"></script>
        <!--<script type="text/javascript" src="js/jquery-ui-effects.js"></script>-->

    <script src="js/helper.js"></script>
    <script src="js/jquery.flexslider-min.js"></script>
    <script src="js/iphone-style-checkboxes.js"></script>
    <script src="js/klass.min.js"></script>
    <script src="js/code.photoswipe.jquery-3.0.5.min.js"></script>
    <script src="js/add2home.js"></script>

    <script type="text/javascript" src="js/appbb80.js?v=30"></script>
    <script src="js/ref/jquery.raty.min.js"></script>
    <script type="text/javascript" src="js/ref/fastclick.js"></script>

    <script src="js/TourGuide/InitData.js"></script>
    <script src="js/TourGuide/DataAccess.js"></script>
    <script src="js/TourGuide/LocationGUI.js"></script>
    <script src="js/TourGuide/mobile-base.js"></script>
    <script src="js/TourGuide/mobile-jq.js"></script>
    <script src="js/TourGuide/LocationDetailGUI.js"></script>
    <script src="js/TourGuide/TripGUI.js"></script>
    <script src="js/TourGuide/TripDetailGUI.js"></script>   

</head> 

<body>
     <!-- Splash screen -->
     <!--<div id="splash"> 
       <img id="splash-bg" src="images/splash/splash-alternate.png" alt="splash image"/>
       <img id="splash-title" src="images/splash/main.png" alt="splash title" />
     </div> -->
  <!-- end splash screen --> 
    <div id="menu">
        <ul>
            <li class="active"><a href="index.html" class="contentLink">Home</a></li>
            <li><a href="location.html?id=2" class="contentLink">Restaurants</a></li>
            <li><a href="location.html?id=5" class="contentLink">Hotels</a></li>
            <li><a href="location.html?id=4" class="contentLink">Nightlife</a></li>
            <li><a href="location.html?id=3" class="contentLink">Shopping</a></li>
            <li><a href="location.html?id=1" class="contentLink">Attractions</a></li>
            <li><a href="trip.html" class="contentLink">Trip</a></li>
            <li><a href="blog-detail.html" class="contentLink">Favorites</a></li>
            <li><a href="#" class="contentLink">About Us</a></li>
            <li><a href="#" class="contentLink" onclick="exitFromApp()">Exit</a></li>
        </ul>
    </div><div data-dom-cache="false" data-role="page" class="pages" id="home" data-theme="a">
    <div data-role="header">
            <div class="left">
                <a href="#" class="showMenu menu-button"><img src="images/menu-button.png" width="40" /></a>
            </div>
            <h1><p class="no-margin">HCM TOUR GUIDE</p><p class="no-margin">Capstone Project</p></h1>

    </div>
        <div class="header-shadow"></div>
        <!-- /header -->

    <div data-role="content" data-theme="a" class="minus-shadow">
            <div class="cherry-slider" style="height: 140px;">
                <div anim="puff"anim-speed="700"anim-direction="left"anim-position-left="30"anim-position-top="40"  class="anim-item"><img src="images/content/tick.png" width="64" /></div>
                <div anim="fade"anim-speed="700"anim-direction="left"anim-position-right="30"anim-position-top="40"  class="anim-item"><p class="little-padding ">SINCE 1920</p></div>
                <div anim="fade"anim-speed="700"anim-direction="left"anim-position-right="30"anim-position-top="60"  class="anim-item"><p class="little-padding ">COUNTLESS CUSTOMERS</p></div>
                <div anim="fade"anim-speed="700"anim-direction="down"anim-position-right="30"anim-position-top="80"  class="anim-item"><p class="little-padding ">MEMORABLE EXPERIENCES</p></div>
            </div>
            <div class="white-content-box ">
        <h2 style="margin-top: 0;">Products</h2>
        <a class="icon" href="location.html?id=2">
            <img src="images/content/interior-decoration.png" width="48" />
            <span>Restaurants</span>
        </a>

        <a class="icon" href="location.html?id=5">
            <img src="images/content/cargo-logistics.png" width="48" />
            <span>Hotels</span>
        </a>

        <a class="icon" href="location.html?id=4">
            <img src="images/content/software-development.png" width="48" />
            <span>Nightlife</span>
        </a>
        <a class="icon" href="location.html?id=3">
            <img src="images/content/weather-forecast.png" width="48" />
            <span>Shopping</span>
        </a>
        <a class="icon" href="trip.html">
            <img src="images/content/project-management.png" width="48" />
            <span>Trip</span>
        </a>
        <a class="icon" href="location.html?id=1">
            <img src="images/content/interior-decoration.png" width="48" />
            <span>Attractions</span>
        </a>

        <div class="clear"></div>
            </div>
        <img src="images/shadow.png" />

    </div><!-- /content -->

        <div class="bread-crumb">
            <ul>
                <li><a data-transition="pop" href="index-2.html"><img src="images/bc-home.png" width="16" /></a></li>
                <li><span>Home</span></li>
            </ul>
        </div>
    <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-34399779-4']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
    </div>
</body>

<!-- Mirrored from ritenv.com/templates/klassio-rsv/products-services.php by HTTrack Website Copier/3.x [XR&CO'2010], Sat, 30 Mar 2013 02:13:15 GMT -->
</html> 
```

位置.html：

```
<!DOCTYPE html> 
<html> 

<!-- Mirrored from ritenv.com/templates/klassio-rsv/company-profile.php by HTTrack Website Copier/3.x [XR&CO'2010], Sat, 30 Mar 2013 02:13:08 GMT -->
 <head> 

</head> 

<body>
    <div data-dom-cache="false" data-role="page" class="pages" id="location" data-theme="a">
    <div data-role="header">
            <div class="left">
                <a href="#" class="showMenu menu-button"><img src="images/menu-button.png" width="40" /></a>
                <a href="#" class="back-button"><img src="images/back-button.png" width="40" /></a>
            </div>
            <h1><p class="no-margin" id="category"></p><p class="no-margin">TourGuide</p></h1>

    </div>
        <!-- /header -->

    <div data-role="content" data-theme="a" class="minus-shadow">

            <div class="divselect">
                <select name="select-choice-min" id="select-sub-category" data-mini="true">
                    <option value="all">All</option>
                </select>
                <a href="#" class="button button3" id="mapLocation">Map</a>
            </div>
            <ul class="column-split three-column">
            <li>
                <a class="button button3" id="bestPlace">Best Place</a>
            </li>
            <li>
                <a class="button button3" id="bestNearby">Best Nearby</a>
            </li>
            <li>
                <a class="button button3" id="gps">GPS</a>
            </li>
            </ul>
            <ul data-role="listview" data-inset="true" id="locationListView" data-filter="true"
                                         data-filter-placeholder="Search on Name and Description...">

    </div><!-- /content -->
        <div class="bread-crumb">
            <ul id="linkPage">
                <li><a data-transition="pop" href="index.html"><img src="images/bc-home.png" width="16" /></a></li>
            </ul>
        </div>
<script type="text/javascript">
$('#location').die().live("pageshow", function( event ) {
        event.preventDefault();
        initLocationPage();
    });
</script>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-34399779-4']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</div><!-- /page -->
</body>

<!-- Mirrored from ritenv.com/templates/klassio-rsv/company-profile.php by HTTrack Website Copier/3.x [XR&CO'2010], Sat, 30 Mar 2013 02:13:12 GMT -->
</html> 
```

地图.html：

```
<!DOCTYPE html> 
<html>
<!-- Mirrored from rodinmobile.webbudesign.com/red/contact.html by HTTrack Website Copier/3.x [XR&CO'2010], Tue, 12 Mar 2013 16:07:37 GMT -->
<head>

</head> 
<body>

<div data-dom-cache="false" data-role="page" class="pages" data-theme="a" id="mappage">
    <div data-role="content">
     <div id="map" style="height: 100%;width:100%"></div>
    </div>
    <div data-role="footer" class="nav-glyphish">

        <div data-role="navbar" class="nav-glyphish" data-grid="a">
        <ul>
            <li><a href="#" class="back-button" data-icon="custom">Back</a></li>
            <li><a href="#" data-icon="custom" id="myLocation">My Location</a></li>
        </ul>
        </div>

    </div>
    <div id="navigation" data-role="controlgroup" data-type="vertical">
            <a href="#" data-role="button" data-icon="plus" id="plus"
               data-iconpos="notext"></a>
            <a href="#" data-role="button" data-icon="minus" id="minus"
               data-iconpos="notext"></a>
    </div>

<script type="text/javascript">
  $('#mappage').off().on("pageshow", function( event ) {
        event.preventDefault();
        fixContentHeight();
    });
</script>  
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-34399779-4']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</div>
</body>

<!-- Mirrored from rodinmobile.webbudesign.com/red/contact.html by HTTrack Website Copier/3.x [XR&CO'2010], Tue, 12 Mar 2013 16:07:37 GMT -->
</html> 
```

如果我运行如下： index.html -> location.html（位置列表） -> location-Detail.html ：OK。否则我运行： index.html -> location.html -> map.html -> location-Detail.html ：失败

# ios - 如何修复 safari 6 网络检查器以使其适用于 iOS 设备或模拟器？

> ID：15888982
> 
> 赞同：4
> 
> 时间：2013-04-08T21:06:35.883
> 
> 标签：ios, debugging, safari, mobile-safari, remote-debugging

每当我尝试将 safari web 检查器连接到模拟器或在前台运行移动 safari 的设备时，我尝试检查的站点永远不会完全加载到检查器中。DOM 永远不会在 dom 树视图中填写；我必须在资源视图中折叠和展开网页才能看到脚本、图像、框架等，但实际上应该显示 DOM 的项目都没有。因此，通过在 iphone/ipad 上点击来选择特定 dom 元素的触摸模式也不起作用。

我已经正确设置了相关的 ios 设置和 mac safari 设置，以便 mac 上的 safari 可以看到每个设备并正确连接到特定的网站/webviews，但连接似乎以某种方式失败。

通过 safari 的 ios 设置清除 cookie 和缓存，我只有中等运气才能让它工作，但即便如此，它也只能成功连接并在部分时间向我显示 dom。有没有其他人遇到过这个？可能出了什么问题？有没有办法解决它？是否可以使用不同的 Web 检查器来调试 iOS 上的站点（例如 webkit nightly ），如果可以，如何调试？

这发生在我的 10.7 和 10.8 机器以及各种不同的 ipad 上。这可能是我们网站的具体问题，但我不知道如何缩小范围。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-21T07:37:41.173

我仍然有这个问题，但为我解决的是当我在私人模式下运行 Safari 时。不知道为什么，可能与chaching有关。这不是一个很好的解决方案，但只要问题仍然存在就可以。

这些是版本： - iOS 模拟器版本 7.0 (463.9.4) - Safari 版本 6.0.5 (8536.30.1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-08T10:15:56.963

我尝试了使用较少数据（图像，脚本，css）加载的轻量版页面并且它工作正常，所以它似乎与页面大小相关联：（

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-17T20:04:59.807

您需要在 Safari 中启用 cookie

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-01T18:19:24.040

我遇到了这个。我让模拟器出现在网络检查器中的唯一方法是如果我连接了物理设备。然后我在列表中看到它们以供选择。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-30T13:00:14.817

我尝试了私人模式，这给了我一点进步，但上面的 Björn Christensson 回答对我有用。

下载 WebKit Nightly Build ( [http://nightly.webkit.org/](http://nightly.webkit.org/) )

这允许我查看 CSS 并点击检查 iPad 上的节点。这两件事不适用于上面的使用私人答案。

# xml - 使用 PowerShell 将 XML 转换为 HTML

> ID：15888988
> 
> 赞同：4
> 
> 时间：2013-04-08T21:06:46.917
> 
> 标签：xml, powershell

我有一个 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type='text/xsl' href='file:///C:/Program%20Files/Application/log_format.xsl'?>
<!DOCTYPE log [<!ENTITY data SYSTEM 'data/20130408.dat'>]>
<log xmlns="runtime:log">&data;</log> 
```

xsl 文件将其转换为 HTML。我无法在 IE 中打开文件并查看预期结果。我想通过 PowerShell 脚本将其转换为纯 HTML。我该怎么做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T17:48:26.780

此[博客条目](http://devio.wordpress.com/2009/09/15/command-line-xslt-processor-with-powershell/ "博客条目")有一个应该可以工作的代码片段。它使用`System.Xml.Xsl.XslCompiledTransform`.NET 类进行 XSL 转换。其余的只是用于获取输入和显示输出。

这最初是一条评论，但我想我会把它作为答案，以便其他正在寻找解决方案的人更容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T23:14:07.293

[PowerShell Community Extensions](http://pscx.codeplex.com)有一个`Convert-Xml`将对 XML 进行 XSL 转换的工具。如果生成的文件不是有效的 HTML，那么您需要处理 XSL 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-25T21:12:17.260

如果你想返回一个 xml 对象而不是将输出写入文件，那么你可以做更多的内联活动。这会奏效。此外，我将处理器的创建拆分为一个单独的函数，以便您可以创建一次并重复使用，这对内存更友好。

```
function Invoke-TransformXML($path,$styleSheetPath,$output,$parameters, $compiledtransform)
{
  if( ! (test-path $path )) { Throw"XML input file not found: $path"}

  $path = resolve-path $path

  if ( ! (Test-Path $compiledtransform))
    { 
      if( ! ($compiledtransform.GetType() -eq [System.Xml.Xsl.XslCompiledTransform] )) 
      { 
        $ctType = $compiledtransform.GetType() ;
        Throw "Compiled transform is wrong type: $ctType" 
      }
      else
      {
        $xslt = $compiledtransform
      }
    }

  if (($compiledtransform -eq $null) )
  {
    if( ! (test-path $styleSheetPath )   ) { Throw"XSL template file not found: $styleSheetPath"}
    $styleSheetPath = Resolve-Path $styleSheetPath

    $xslt = Get-CompiledTransform $styleSheetPath
  }

  $transformed = New-Object System.IO.MemoryStream

  try
  {
      $xslt.Transform([string]$path, [System.Xml.Xsl.XsltArgumentList]$arglist, [System.IO.Stream]$transformed)
      $transformed.Position = 0
      #$reader = New-Object System.Xml.XmlTextReader($ms)
      $outdoc = New-Object System.Xml.XmlDocument
      $outdoc.Load($transformed)
      # close stream, we are done with it
      $transformed.Close()
      return $outdoc
  } Finally {
    $transformed.Close()
  }
}

function Get-CompiledTransform($styleSheetPath)
{

  if( ! (test-path $styleSheetPath )   ) { Throw"XSL template file not found: $styleSheetPath"}
  $styleSheetPath = Resolve-Path $styleSheetPath

  if( [System.Diagnostics.Debugger]::IsAttached )
  {
    $xslt = New-Object System.Xml.Xsl.XslCompiledTransform( $true )
  }
  else
  {
    $xslt = New-Object System.Xml.Xsl.XslCompiledTransform( $false )
  }

  $arglist = new-object System.Xml.Xsl.XsltArgumentList

  foreach( $param in $parms )
  {
    if ($parms.Name)
    {
        $paramName = $parms.Name
        $paramNamespaceUri = $parms.NamespaceUri
        $paramValue = $parms.Value
        $arglist.AddParam($paramName, $paramNamespaceUri, $paramValue)
    }
  }

  $xsltSettings = New-Object System.Xml.Xsl.XsltSettings($false,$true)
  $xslt.Load($styleSheetPath, $xsltSettings, (New-Object System.Xml.XmlUrlResolver))

  return $xslt
} 
```

# c++ - 'Button_Click' : 不是 'ButtonTest::MainPage' 的成员

> ID：15888991
> 
> 赞同：0
> 
> 时间：2013-04-08T21:07:03.190
> 
> 标签：c++, windows, windows-store-apps

我是 C++ 和 Windows Store 编程的新手，我一直在定义按钮上的点击处理程序。我指的是[这些](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/jj153345.aspx)说明：

> 1.  将 Button 控件添加到父容器。
> 2.  要为按钮指定名称，请将 x:Name 属性设置为字符串值。要在代码中引用控件，它必须有一个名称。否则，不需要名称。
> 3.  要将标签分配给按钮，请将 Content 属性设置为字符串值。
> 4.  要在用户单击按钮时执行操作，请为 Click 事件添加处理程序。在 Click 事件处理程序中，添加代码以执行某些操作。
> 
> `<Button x:Name="button1" Content="Button" Click="Button_Click" />`
> 
> `void MainPage::Button_Click(Object^ sender, RoutedEventArgs^ e) {
> // Add code to perform some action here.
> }`

*   我已经`<Button x:Name="button1" Content="Button" Click="Button_Click" />`在.`Grid``MainPage.xaml`
*   我已经加`void MainPage::Button_Click(Object^ sender, RoutedEventArgs^ e) {...}`进去了`MainPage.xaml.cpp`。

现在我得到两个错误，我无法解决：

> 错误 C2039：“Button_Click”：不是“ButtonTest::MainPage”的成员

和

> IntelliSense：类“ButtonTest::MainPage”没有成员“Button_Click”

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T21:17:49.680

您需要将文件中的原型定义`MainPage::Button_Click`为`MainPage.xaml.h`类的成员。像

```
public:

    Button_Click(object^, RoutedEventArgs^); 
```

C++ 需要每个方法的原型。

# c - 为 AIX 编译 ANTLR 3C

> ID：15888992
> 
> 赞同：1
> 
> 时间：2013-04-08T21:07:03.833
> 
> 标签：c, gcc, antlr3, aix

我对 C 的编译不太熟悉，所以如果我没有提供足够的信息，请告诉我你需要我发布什么！

总结如下：我需要在一台有点旧的 IBM AIX 计算机上以 C 的目标语言运行 ANTLR。我很快放弃了使用 IBM CC/make utils 进行编译，并在机器上安装了 gcc (4.2) 和 GNU make 版本。问题是，虽然配置脚本确实检测到了正确的架构，但它似乎没有做出适当的响应。

我使用的 ANTLR 的特定版本是 3.2 版，C 目标。实际检测到的目标是powerpc-ibm-aix-5.3.0.0

这就是我所做的。我看到的第一个明显错误是它在选项中添加了“-m32”标志。好的，我可以简单地从 makefile 中删除它，在这种情况下 gcc 应该默认为 -maix32。

第二个问题：我收到一个错误，给我 stdio.h 的路径并说“错误：重复'无符号'”。好的，因此 configure 在自动生成的 antlr3config.h 文件中做了一个“定义”语句......我可以将其注释掉，错误就消失了。

第三个问题......这就是我卡住的地方。

```
/opt/freeware/bin/make  all-am
make[1]: Entering directory `/scrubber/libantlr3c-3.2'
if /bin/sh ./libtool --tag=CC --mode=compile gcc -DHAVE_CONFIG_H -I. -I. -I. -Iinclude    -O2  -Wall -MT antlr3baserecognizer.lo -MD -MP -MF ".deps/antlr3baserecognizer.Tpo" -c -o antlr3baserecognizer.lo `test -f 'src/antlr3baserecognizer.c' || echo './'`src/antlr3baserecognizer.c; \
then mv -f ".deps/antlr3baserecognizer.Tpo" ".deps/antlr3baserecognizer.Plo"; else rm -f ".deps/antlr3baserecognizer.Tpo"; exit 1; fi
gcc -DHAVE_CONFIG_H -I. -I. -I. -Iinclude -O2 -Wall -MT antlr3baserecognizer.lo -MD -MP -MF .deps/antlr3baserecognizer.Tpo -c src/antlr3baserecognizer.c -o antlr3baserecognizer.o
In file included from include/antlr3baserecognizer.h:39,
             from src/antlr3baserecognizer.c:9:
include/antlr3defs.h:343: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'ANTLR3_SALENT'
make[1]: *** [antlr3baserecognizer.lo] Error 1
make[1]: Leaving directory `/scrubber/libantlr3c-3.2'
make: *** [all] Error 2 
```

这是 ANTLR 库中包含的特定 antlr3defs.c 文件的链接：[https ://docs.google.com/file/d/0B9XS1f8YfyB4cFJRZTdWM1pMWWs/edit?usp=sharing](https://docs.google.com/file/d/0B9XS1f8YfyB4cFJRZTdWM1pMWWs/edit?usp=sharing)

哦，我可以在其他平台上编译它，比如 Ubuntu 或 Cygwin（虽然我不能用它们来完成这个任务）。不过，我对 AIX 并不是很熟悉，并且在编译 C 程序方面经验有限。也许我需要用配置脚本设置一些东西？

谢谢！

编辑：取得了进展，因此更新此帖子以将信息放在一起。

通过在运行配置脚本时添加 --disable-abiflags 选项，我能够解决上述错误...此选项删除 -m32 和 -m64 gcc 标志。它允许配置脚本正常工作，但在运行 make 时让汇编器有点困惑。为了提供指导，我在 Makefile 中的 CFLAFS 中添加了 -Wa,-a32 标志，从而让汇编器知道我想要 32 位。

只剩下一个问题了。

```
ar cru .libs/libantlr3c.a  antlr3baserecognizer.o antlr3basetree.o antlr3basetreeadaptor.o antlr3bitset.o antlr3collections.o antlr3commontoken.o antlr3commontree.o antlr3commontreeadaptor.o antlr3commontreenodestream.o antlr3convertutf.o antlr3cyclicdfa.o antlr3debughandlers.o antlr3encodings.o antlr3exception.o antlr3filestream.o antlr3inputstream.o antlr3intstream.o antlr3lexer.o antlr3parser.o antlr3rewritestreams.o antlr3string.o antlr3stringstream.o antlr3tokenstream.o antlr3treeparser.o antlr3ucs2inputstream.o
ar: 0707-128 The OBJECT_MODE environment variable has an invalid setting.
    OBJECT_MODE must be 32, 64, 32_64, d64 or any.
make[1]: *** [libantlr3c.la] Error 1 
```

问题是，我设置什么并不重要。我尝试在未设置的情况下运行 make，然后使用 export 进行设置：

```
export OBJECT_MODE=32 
```

我可以输入 echo $OBJECT_MODE 并且它确实会打印出 32...但是当我运行 make 时它似乎没有检测到它。

我可以通过编辑“libtool”脚本来解决这个问题，将“-X 32”添加到 ar 选项以覆盖它正在读取的任何内容。长期的解决方案可能是 ltmain.sh 并重新运行配置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:28:22.080

这是有问题的行：

```
typedef socklen_t ANTLR3_SALENT; 
```

因为`socklen_t`没有定义你不能`typedef`，包括`socket.h`应该修复它

```
#include <sys/socket.h> 
```

编辑：再次查看文件后，`socket.h`如果您运行配置脚本，则应包含在内

```
#ifdef HAVE_SOCKET_H
# include   <socket.h>
#else
# if HAVE_SYS_SOCKET_H
#  include  <sys/socket.h>
# endif
#endif 
```

# php - 不能在另一个对象中使用调用魔术方法

> ID：15888994
> 
> 赞同：2
> 
> 时间：2013-04-08T21:07:18.087
> 
> 标签：php, specifications, magic-methods

我经历过一些我认为是错误的事情，但我不确定。所以我来这里问问比我更了解这个的人，这**是一个PHP的bug吗？**查看以下几行：

```
<h1>Tests</h1>

<?php
class Foo
  {
  public function __invoke()
    {
    return 'Called correctly';
    }
  }

class Boo
  {
  public function __construct()
    {
    $this->Foo = new Foo();
    }
  }

$Foo = new Foo();
echo $Foo();

echo "<br><br><hr><br><br>";

$Boo = new Boo();
echo $Boo->Foo(); 
```

根据[规范](http://www.php.net/manual/en/language.oop5.magic.php#object.invoke)，因为`The __invoke() method is called when a script tries to call an object as a function`，我应该得到这个：

> 正确调用
> 
> * * *
> 
> 正确调用

但是最后一个回显没有执行。相反，我得到了这个：

> PHP 致命错误：在第 26 行的 [...]/index.php 中调用未定义的方法 Boo::Foo()

这是一个错误还是预期的行为？如果这是一个错误，我们将不胜感激有关如何提交它的一些帮助。

根据乔恩的回答进行编辑以进一步显示丑陋的行为

```
class Doo
  {
  public function __construct()
    {
    // The Foo class is the same as the one defined before

    $Test = new Foo();
    echo $Test();      // Echos correctly

    echo "<br><br><hr><br><br>";

    $this->Foo = $Test;
    echo $this->Foo();  // Error. Heisenbehaviour?
    }
  }

$Boo = new Doo(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:10:41.763

它不是一个错误，它不限于是`Foo`一个定义`__invoke`. 任何可调用对象都会出现相同的错误：

```
class Foo
{
    private $bar = 'rand';

    public function __construct()
    {
        $this->bar(); // won't work
    }  
} 
```

您需要将其写成两行，或使用`call_user_func`：

```
// #1
$Boo = new Boo();
$Foo = $Boo->Foo;
$Foo();

// #2
$Boo = new Boo();
call_user_func($Boo->Foo); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T21:29:06.813

另见[类变量函数](https://stackoverflow.com/questions/15888945/class-variable-functions)

它有完全相同的问题。PHP 词法分析器始终将语法识别`variable T_OBJECT_OPERATOR T_STRING function_call_parameter_list`为方法调用。

# javascript - this.parentNode 在使用 Firefox 运行时返回 undefined

> ID：15888997
> 
> 赞同：1
> 
> 时间：2013-04-08T21:07:35.300
> 
> 标签：javascript

当通过 Firefox 运行以下代码并单击 X 按钮时，javascript 将 tmpField 作为未定义返回。我需要获取按钮的父节点，即 div。

```
<head>
    <title></title>
    <script type ="text/javascript">
        function RemoveItem() {
                if (document.addEventListener) {
                    var container = document.getElementById("InputContainer");
                    var tmpField = this.parentNode;
                    alert("Field: " + tmpField);                 
                }
        }
    </script>
</head>
<body>
<table width="100%">
<tr>
    <td style="width: 10%; vertical-align:top;">Field:</td>
    <td id="InputContainer">
        <div id="divInput1" style="display: inline;">
            <input id="txtComment1" name="txtComment" type="text" maxlength="35" />
            <input id="btnDelete1" value="X" type="button" name="btnDelete" onclick="RemoveItem()" />
        </div>
    </td>
</tr>
</table>
</body>
</html> 
```

在我的场景中，我在“InputContainer”中动态创建多个 div。这些 div 中的每一个都具有相同的结构，包含一个文本框和删除按钮（ID 包含下一个增量）。能够返回按钮的 parentNode 对我来说很重要，该按钮始终是 div。我有它的代码可以在 IE 中工作，但不能在 Firefox 中工作。任何想法如何解决？

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:09:56.230

使用这个 HTML：

```
<input id="btnDelete1" value="X" type="button" name="btnDelete" onclick="RemoveItem(this)" /> 
```

而这个JS：

```
function RemoveItem(button) {
    var container = document.getElementById("InputContainer");
    var tmpField = button.parentNode;
    alert("Field: " + tmpField);
} 
```

**演示：http:** [//jsfiddle.net/jwpds/1/](http://jsfiddle.net/jwpds/1/)

`RemoveItem`函数调用的上下文是全局的，所以`this`指的是`window`. 要获取点击的特定元素，您需要传入`this`函数调用，然后将其作为函数中的参数访问。

而且我不知道您为什么要检查`document.addEventListener`，但我可以向您保证，您所做的事情并不需要它。

# r - 如何对相同名称的值求和？

> ID：15888998
> 
> 赞同：-2
> 
> 时间：2013-04-08T21:07:36.887
> 
> 标签：r

R 程序

我需要对列表中重复的相同名称的值求和。

我有一个类似的清单，

```
 Person  Money
1  1        3
2  2        1
3  1        2
4  3        1
5  2        1 
```

我需要，

```
 Person  Money
1  1    (3+2=)5
2  2        2
3  3        1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:26:13.677

这是一个解决方案`ddply`from`plyr`

```
library(plyr)
z=data.frame(ddply(YourDataFrame,.(Person),summarise)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T01:59:35.420

这是使用基本功能 tapply 的解决方案。

```
df = data.frame(Person=c("Joe","Joe","Fred","Jane","Fred","Jane"), Money=c(2,5,2,1,7,2))
tapply(df$Money, df$Person, FUN=sum) 
```

# unix - 自动生成 AC_CONFIG_FILES 输入

> ID：15888999
> 
> 赞同：1
> 
> 时间：2013-04-08T21:07:43.960
> 
> 标签：unix, build-automation, autotools, autoconf

创建 configure.ac 文件时，标准做法似乎是明确硬编码应从相应的 Makefile.in 创建的 Makefile 列表。然而，这似乎不是必需的，列表可以很容易地从某种 glob 规范（例如`*/Makefile.in`）或从 shell 命令（例如`find -name Makefile.in`）生成。

不幸的是，这个工具似乎没有内置在 autoconf 中！我是 m4 的新手，但我没有遇到任何关于运行 shell 命令来生成 m4 输入值的信息。显然，可以通过将`cat`文件和 shell 命令 -ing 一起生成 configure.ac 文件来破解它，但这似乎不必要地复杂。

有这样做的标准方法吗？如果没有，那为什么不呢？有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-16T15:14:00.540

尽管有评论，但我最终还是这样做了。我在问题中没有提到的是这种自动生成已经完成，但是以一种非常特别的方式（`cat`将各种文件组合在一起，其中一些是动态生成的，以创建 configure.ac），我只是想把它清理干净。

在构建脚本中，我们有：

```
confdir="config/configure.ac_scripts"

# Generate a sorted list of all the makefiles in the project, wrap it into
# an autoconfigure command and put it into a file.
makefile_list="$(find -type f -name 'Makefile.am' \
                | sed -e 's:Makefile\.am:Makefile:' -e 's:^./::' \
                | sort)"

# A bit more explanation of the above command:
# First we find all Makefile.ams in the project.
# Then we remove the .am using sed to get a list of Makefiles to create. We
# also remove the "./" here because the autotools don't like it.
# Finally we sort the output so that the order of the resulting list is
# deterministic.

# Create the file containing the list of Makefiles
cat > "$confdir/new_makefile_list" <<EOF
# GENERATED FILE, DO NOT MODIFY.
AC_CONFIG_FILES([
$makefile_list
])
EOF
# In case you haven't seen it before: this writes the lines between <<EOF
# and EOF into the file $confdir/new_makefile_list. Variables are
# substituted as normal.

# If we found some new dirs then write it into the list file that is
# included in configure.ac and tell the user. The fact that we have
# modified a file included in configure.ac will cause make to rerun
# autoconf and configure.
touch "$confdir/makefile_list"
if ! diff -q "$confdir/new_makefile_list" "$confdir/makefile_list" > /dev/null 2>&1; 
then
    echo "New/removed directories detected and $confdir/makefile_list updated,"
    echo "./configure will be rerun automatically by make."
    mv "$confdir/new_makefile_list" "$confdir/makefile_list"
fi 
```

然后在 configure.ac 我们有：

```
# Include the file containing the constructed AC_CONFIG_FILES([....]) command
m4_include([config/configure.ac_scripts/makefile_list]) 
```

而不是直接写入 Makefile 列表。

完整的源代码在[这里](https://github.com/davidshepherd7/oomph-lib/blob/working/autogen.sh#L246)和[这里](https://github.com/davidshepherd7/oomph-lib/blob/working/configure.ac#L2100)。