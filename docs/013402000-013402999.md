# StackOverflow 问答 13402000-13402999

# javascript - 使用 javascript 生成的 KML

> ID：13402000
> 
> 赞同：1
> 
> 时间：2012-11-15T16:32:05.927
> 
> 标签：javascript, node.js, google-earth-plugin

有什么方法可以通过 node.js 使用 java 脚本为 Google Earth 生成 KML？现在我有 apache 和 PHP。将所有东西都放在一台服务器上会很好。

我对 js 很陌生，如果有任何 axamples 或其他东西......我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T04:21:00.033

是的你可以！这样做实际上很容易。Node.js 处理文件的方式与 PHP 不同，Node.JS 将为客户端提供文件。node.JS 有大量模板系统可供您使用。下面是一个使用一些基本技术的 KML 服务器示例。

```
//required to create the http server
var http = require('http');
//use EJS for our templates
var ejs = require('ejs');
//required so we can read our template file
var fs = require('fs')

//create a http server on port 8000
http.createServer(function (req, res) {
//tell the client the document is XML
res.writeHead(200, {'Content-Type': 'text/xml'});
//read our template file 
fs.readFile('template.ejs', 'utf8', function (err, template) {
//render our template file with the included varables to change
var content = ejs.render(template,{
    name:"test name",
    description:"this is the description",
    coordinates:"-122.0822035425683,37.42228990140251,0"
});
//write the rendered template to the client
res.write(content);
res.end()
}).listen(8000);

console.log('Server listening at at http://localhost:8000/'); 
```

我们的 template.ejs 看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
 <kml xmlns="http://www.opengis.net/kml/2.2">
   <Placemark>
     <name><%=name%></name>
     <description><%=description%></description>
     <Point>
       <coordinates><%=coordinates%></coordinates>
     </Point>
   </Placemark>
 </kml> 
```

实际上，您可能想使用[connect](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDMQFjAA&url=http%3A%2F%2Fwww.senchalabs.org%2Fconnect%2F&ei=5L6lUMWGI8m7iwLb-oDgCw&usg=AFQjCNHLkvD3Yj5cwMSf9H1FGMDxrDPa1A&sig2=_guVcKRwcnrV3U3DNyK0hg)或[express](http://expressjs.com/)之类的东西。听起来您对 Node.JS 很陌生，一定要花一些时间阅读一些[介绍材料](https://stackoverflow.com/questions/2353818/how-do-i-get-started-with-node-js)。

快乐编码！

# image - 如何获得免费基础镜像许可证？

> ID：13402001
> 
> 赞同：0
> 
> 时间：2012-11-15T16:32:07.127
> 
> 标签：image, licensing, freebase

在左边它说一些freebase图像是特别许可的，要使用它们，我必须注明原始创建者，链接到正确的许可证，并链接到Freebase图像页面[。](http://www.freebase.com/policies/attribution)问题是，我如何获得特定图像的许可证类型？

我得到了他们[在这里](http://wiki.freebase.com/wiki/Image_Service)所说的图像，并从那里的数据转储中获得了其他免费基础信息。

[我可以通过遵循此](http://schemas.freebaseapps.com/type?id=/common/image)架构从数据转储中获取大部分图像信息，但我现在不知道如何获得许可证。有些图像需要我链接到许可证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:31:23.590

主题 API 或 MQL 将为您提供所需的信息。

例如，如果您使用

```
https://usercontent.googleapis.com/freebase/v1/image/m/0290v28 
```

等效的主题 API URL 是

```
https://usercontent.googleapis.com/freebase/v1/topic/m/0290v28 
```

其中将包含许可证、出处和归属信息。

# c# - 如何从存储过程中填充 DataTable

> ID：13402003
> 
> 赞同：24
> 
> 时间：2012-11-15T16:32:09.203
> 
> 标签：c#, asp.net, .net, ado.net

> **可能重复：**
> [如何将表从存储过程检索到数据表](https://stackoverflow.com/questions/1933855/how-can-i-retrieve-a-table-from-stored-procedure-to-a-datatable)

我正在尝试填充我的数据表。我创建了一个数据表 tmpABCD，但我需要使用存储过程中的值填充它。我无法继续进行。

```
SqlConnection sqlcon = new SqlConnection(ConfigurationManager.ConnectionStrings["DB"].ConnectionString);
sqlcon.Open();
SqlCommand cmd = new SqlCommand("usp_GetABCD", sqlcon);

DataTable dt = new DataTable("tmpABCD");

dt.Columns.Add(new DataColumn("A"));
dt.Columns.Add(new DataColumn("B"));
dt.Columns.Add(new DataColumn("C"));
dt.Columns.Add(new DataColumn("D")); 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-11-15T16:37:58.677

您不需要手动添加列。只需使用 a `DataAdapter`，它很简单：

```
DataTable table = new DataTable();
using(var con = new SqlConnection(ConfigurationManager.ConnectionStrings["DB"].ConnectionString))
using(var cmd = new SqlCommand("usp_GetABCD", con))
using(var da = new SqlDataAdapter(cmd))
{
   cmd.CommandType = CommandType.StoredProcedure;
   da.Fill(table);
} 
```

请注意，您甚至不需要打开/关闭连接。这将由[`DataAdapter`](http://msdn.microsoft.com/en-us/library/905keexk.aspx).

> 与 SELECT 语句关联的连接对象必须有效，但不需要打开。如果在调用 Fill 之前关闭连接，则打开它以检索数据，然后关闭。如果在调用 Fill 之前连接已打开，则它保持打开状态。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-15T16:38:43.057

改为使用 SqlDataAdapter，它更容易，您不需要自己定义列名，它会从查询结果中获取列名：

```
using (SqlConnection sqlcon = new SqlConnection(ConfigurationManager.ConnectionStrings["DB"].ConnectionString))
{
    using (SqlCommand cmd = new SqlCommand("usp_GetABCD", sqlcon))
    {
        cmd.CommandType = CommandType.StoredProcedure;

        using (SqlDataAdapter da = new SqlDataAdapter(cmd))
        {
            DataTable dt = new DataTable();

            da.Fill(dt);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T16:35:56.290

您可以使用`SqlDataAdapter`：

```
 SqlDataAdapter adapter = new SqlDataAdapter();
    SqlCommand cmd = new SqlCommand("usp_GetABCD", sqlcon);
    cmd.CommandType = CommandType.StoredProcedure;
    adapter.SelectCommand = cmd;
    DataTable dt = new DataTable();
    adapter.Fill(dt); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-15T16:37:09.923

使用 SqlDataAdapter，这将简化一切。

```
//Your code to this point
DataTable dt = new DataTable();

using(var cmd = new SqlCommand("usp_GetABCD", sqlcon))
{
  using(var da = new SqlDataAdapter(cmd))
  {
      da.Fill(dt):
  }
} 
```

并且您的 DataTable 将包含您正在寻找的信息，只要您存储的过程返回一个数据集（光标）。

# box-api - 票证和身份验证后Box.api“未经授权”错误？

> ID：13402004
> 
> 赞同：1
> 
> 时间：2012-11-15T16:32:13.633
> 
> 标签：box-api

[我遵循了http://developers.box.com/get-started/#authenticating](http://developers.box.com/get-started/#authenticating)上的 Box.com API 手册，但仍然有问题。我总是收到“未经授权”的回复。我是否需要每次都将用户重定向到工单 URL？或者，只要用户不拒绝我的应用程序，我可以在我的应用程序中重复使用身份验证令牌吗？

所以我做了： 1\. 获取票证 2\. 转到 http....auth/ url 并登录到盒子帐户 3\. 获得身份验证令牌 4\. 使用身份验证令牌列出文件夹内容。

步骤 1 和 2 是否需要重复执行（对于同一个 box.com 帐户）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T17:50:14.460

不，没有必要重复步骤 1 和 2 。令牌将无限期地存在。但是您必须在您发出的每个请求的标头中包含它和 api 键。

麦克风

# svn - Subversion - 立即结帐后对子目录进行全面更新

> ID：13402005
> 
> 赞同：4
> 
> 时间：2012-11-15T16:32:17.627
> 
> 标签：svn, version-control

再会，

我正在尝试对回购的一部分进行稀疏检查。基本上，假设我只想查看第一级存储库的目录结构。我可以：

```
svn co --depth=immediates 
```

现在，我想进入我的本地工作副本中的子目录之一，并完全更新它（即：depth=infinity）。

```
svn up --depth=infinity 
```

但是，这根本不会下载/签出任何文件。我知道我可以手动做

```
svn co URL-to-path --depth=infinity 
```

但这意味着对于每个子目录，我必须输入 SVN 存储库的完整路径，根据我必须为多少个目录执行此操作，这将变得非常痛苦。

有没有办法强制`svn up`忽略命令`depth`先前使用的参数`checkout`？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T17:00:10.273

`svn up --depth`只增加了一个限制，所以它不能下载更多

你的情况`svn up --set-depth`可能会奏效

# actionscript-3 - 命名空间内部错误中的定义 _bounces 存在冲突

> ID：13402006
> 
> 赞同：0
> 
> 时间：2012-11-15T16:32:17.237
> 
> 标签：actionscript-3, flash-cs4, adobe-flash-cs3

嗨，我正在尝试在 Flash CS3 动作脚本上创建一个游戏，并在第 13-15 行不断出现错误，说存在与内部命名空间中的定义 _bounces 冲突，与内部命名空间中的定义 _highscore 存在冲突，并且与存在冲突在命名空间内部定义_ball？？？请帮忙

```
package
{
    import flash.display.MovieClip
    import flash.text.TextField
    import flash.events.Event
    import flash.events.MouseEvent

    public class DocumentMain extends MovieClip
    {
        public const Gravity:Number = 2;
        public const Bounce_Factor:Number = 0.8;

        public var _bounces:TextField;
        public var _highscore:TextField;
        public var _ball:Ball;

        public var _vx:Number;
        public var _vy:Number;

        public function DocumentMain():void
        {
            _vx = 0;
            _vy = 0;
            addEventListener(Event.ENTER_FRAME, enterFrameHandler);
            addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);
        }

        private function enterFrameHandler(e:Event):void
        {
            //gravitate the ball
            _vy += Gravity;
            //move the ball
            _ball.x += _vx;
            _ball.y += _vy;
            //check stage boundaries for collision
            checkBoundaryCollision();
        }
        private function mouseDownHandler(e:MouseEvent):void
        {
            //Hit the ball if it has been clicked
        }

        private function checkBoundaryCollision():void
        {
            var left:Number;
            var right:Number;
            var bottom:Number;
            var Top:Number;
            left = _ball.x -(_ball.width / 2);
            right = _ball.x +(_ball.width / 2);
            bottom = _ball.y +(_ball.height / 2);
            top = _ball.y + (_ball.height / 2);

            if (left < 0 && _vx < 0)
            {
                _ball.x = _ball.width/2;
                _vx *= -1;
            }
            else if (right > stage.stageWidth && _vx > 0)
            {
                _ball.x = stage.stageWidth -(_ball.width /2);
                _vx *= -1;
            }
            if (top < 0 && _vy < 0)
            {
                _ball.y = _ball.height / 2;
                _vy *= -1;
                }
            else if (bottom > stage.stageHeight && _vy > 0)
            {
                _ball.y =stage.stageHeight -(_ball.height / 2);
                _vy *=Bounce_Factor;
            }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T20:59:29.360

转到“高级 ActionScript 3.0 设置”-我使用的是 CS5.5，但没有 CS3（但应该是相同的），通过 File -> Publish Settings -> ActionScript Settings 并取消选中“自动声明阶段实例”（这是默认设置）

或者不在类中定义它们。

[1151错误详细说明及解决方法](http://styleanderror.net/2008/09/11/error-1151-a-conflict-exists-with-definition-mymc-in-namespace-internal/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-13T12:29:23.030

可能您有重复的定义。

例如：

```
 var _bounces:TextField; 
```

# sql - 如何在每行没有多个结果的情况下找出哪些行匹配？

> ID：13402007
> 
> 赞同：1
> 
> 时间：2012-11-15T16:32:24.740
> 
> 标签：sql, sqlite, unique, matching

在 SQLite 中，我有一个这样创建的表（简化）：

```
CREATE TABLE [entries] (
    [id]     INTEGER NOT NULL PRIMARY KEY,
    [local]  VARCHAR,
    [remote] VARCHAR,
    [value]  INTEGER
);

INSERT INTO entries (local, remote, value) VALUES ("a", "b", 1); 
INSERT INTO entries (local, remote, value) VALUES ("b", "a", -1);
INSERT INTO entries (local, remote, value) VALUES ("b", "a", -1);

INSERT INTO entries (local, remote, value) VALUES ("a", "d", 2); 
INSERT INTO entries (local, remote, value) VALUES ("a", "d", 2); 
INSERT INTO entries (local, remote, value) VALUES ("d", "a", -2); 
```

现在我想列出相互匹配的组合。**将本地**列视为本地银行帐户，将**远程**列视为远程银行帐户。每当一个事务从**本地**到**远程**进行，值为**x**并且存在一个匹配的事务，它接收到值**x**但作为负值（相对于第一个找到的值），我希望从 SQLite 获得输出。

我目前的做法是这样的：

```
sqlite3 -header demo.db \
    "SELECT * FROM
        (SELECT * FROM entries) AS q1,
        (SELECT * FROM entries) AS q2

     WHERE q1.local = q2.remote AND
           q1.remote = q2.local AND
           q1.value = (q2.value * -1)" 
```

但这会返回：

```
id|local|remote|value|id|local|remote|value
1|a|b|1|2|b|a|-1
1|a|b|1|3|b|a|-1
2|b|a|-1|1|a|b|1
3|b|a|-1|1|a|b|1
4|a|d|2|6|d|a|-2
5|a|d|2|6|d|a|-2
6|d|a|-2|4|a|d|2
6|d|a|-2|5|a|d|2 
```

我想要的结果是：

```
id|local|remote|value|id|local|remote|value
1|a|b|1|2|b|a|-1
4|a|d|2|6|d|a|-2 
```

不应显示没有匹配伙伴的行 - 每行最多只能匹配一个其他交易。我尝试使用**GROUP BY**，但这不适用于**q1.id**和**q2.id**作为参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T17:48:36.337

由于本地/远程/值可能有几行具有相同的值，因此必须计算每个此类集合中行的排名，以便正确配对行。

使用其他数据库比使用 sqlite 更容易（使用行编号原语，CTE 等），但在 sqlite 中，可以像这样获得正确的结果：

```
SELECT t1.id, t1.local, t1.remote, t1.value,
t2.id, t2.local, t2.remote, t2.value FROM
(SELECT q1.*, count(q1b.id) AS rank
FROM entries q1 LEFT JOIN entries q1b
ON q1.local = q1b.local AND q1.remote = q1b.remote
AND q1.value = q1b.value AND q1.id >= q1b.id
GROUP BY q1.id) AS t1,
(SELECT q2.*, count(q2b.id) AS rank
FROM entries q2 LEFT JOIN entries q2b
ON q2.local = q2b.local AND q2.remote = q2b.remote
AND q2.value = q2b.value AND q2.id >= q2b.id
GROUP BY q2.id) AS t2
WHERE t1.local = t2.remote AND t1.remote = t2.local
AND t1.value = - t2.value
AND t1.id < t2.id AND t1.rank = t2.rank 
```

见[http://sqlfiddle.com/#!5/c684e/66/0](http://sqlfiddle.com/#!5/c684e/66/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:45:20.710

```
SELECT *
FROM (SELECT MIN(id) AS id, local, remote, value
      FROM entries
      GROUP BY local, remote, value
     ) AS e1,
     (SELECT MIN(id) AS id, local, remote, value
      FROM entries
      GROUP BY local, remote, value
     ) AS e2
WHERE e1.local = e2.remote
  AND e1.remote = e2.local
  AND e1.value = -e2.value
  AND e1.id < e2.id 
```

# php - 通过 jquery ajax 发送长数据

> ID：13402009
> 
> 赞同：0
> 
> 时间：2012-11-15T16:32:28.093
> 
> 标签：php, jquery

以下代码获取 html，编码并将其发送到任何 php 文件。php 文件只包含“hello”字符串。但是当函数运行时，它可以获得所有 html，但不能发送字符串长的原因。因为您看不到 HELLO 警报。Ajax允许定义最长？我对吗？

```
function getlongdata(){
    htmldatas=encodeURIComponent($('#divlongcontent').html());
    alert(htmldatas);
    $.ajax({
         type: "GET",
         url: "sayhello.php",
         data: "longdatago="+htmldatas,
         success: function(msg){
            alert(msg);
         }
     });
}

<div id="divlongcontent">blablabla1000000000timesblaaaaaaa</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T16:36:41.187

浏览器对[URL 长度施加了限制](https://stackoverflow.com/questions/417142/what-is-the-maximum-length-of-a-url/417184#417184)。

如果您要提交大量数据，请使用 POST 请求并将其放入消息正文而不是查询字符串中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T16:36:37.807

根据[维基百科](http://en.wikipedia.org/wiki/POST_%28HTTP%29)，使用`POST`而不是：`GET`

> 有时 HTTP GET 甚至不适合数据检索。例如，需要在 URL 中指定大量数据时。浏览器和 Web 服务器可以对它们将处理的 URL 的长度进行限制，而不会出现截断或错误。URL 和查询字符串中保留字符的百分比编码可以显着增加它们的长度，虽然 Apache HTTP Server 最多可以处理 URL 中的 4,000 个字符，但 Microsoft Internet Explorer 限制为任何 URL 中的 2048 个字符。同样，在必须提交敏感信息（例如用户名和密码）以及其他数据以完成请求的情况下，不应使用 HTTP GET。在这些情况下，即使使用 HTTPS 对消息体进行加密，URL 中的数据也会以明文形式传递，许多服务器、代理、并且浏览器将以第三方可以看到的方式记录完整的 URL。在这些情况下，应该使用 HTTP POST。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T16:44:17.087

只要您的数据少于`2000`字符，您就可以安全地使用`get`. 但是，如果在某些时候你觉得它超过了这个限制，那么它就不会在所有浏览器中始终如一地工作。

在您的`ajax`通话中，将`type`from更改为`get`to `post`，一切正常。

您可以发送的数据量没有限制`post`

# php - 按 DATEPART() 选择行

> ID：13402012
> 
> 赞同：15
> 
> 时间：2012-11-15T16:32:40.513
> 
> 标签：php, mysql, sql, datepart

我需要从记录为一个月的数据库中获取行。我试过这个选择：

```
$result = mysql_query("SELECT * FROM my_table WHERE DATEPART('month', date_column)=11"); 
```

在数据库中有很多行的日期在 11\. 月，但我没有得到任何结果。谁能帮我？谢谢！

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-15T16:57:50.733

MySQL中没有[`DATEPART`](http://msdn.microsoft.com/en-us/library/ms174420.aspx)函数。使用[`MONTH(date_column)`](http://dev.mysql.com/doc/refman/5.6/en/date-and-time-functions.html#function_month)或[`EXTRACT(MONTH FROM date_column)`](http://dev.mysql.com/doc/refman/5.6/en/date-and-time-functions.html#function_extract)代替。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-15T16:34:48.323

```
 SELECT * FROM my_table WHERE MONTH(date_column)=11 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T17:08:16.540

如果您在 date_column 上有索引并且您担心性能，最好不要在列上应用函数。（请注意，这个解决方案，不要完全回答你问的问题，因为它也涉及年份）

```
-- For mysql specific:
SELECT * FROM my_table
WHERE date_column >= '2012-11-01' 
  and date_column < '2012-11-01' + INTERVAL 1 MONTH 
```

[（mysql小提琴）](http://sqlfiddle.com/#!2/6408e/1)

```
-- For tsql specific:
SELECT * FROM my_table
WHERE date_column >= '2012-11-01'
  and date_column < DATEADD(month,1,'2012-11-01') 
```

[（tsql小提琴）](http://sqlfiddle.com/#!3/6408e/1)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-12-14T08:40:53.837

如果您的 DATEPART 在 MySQL 中不工作，那么您可以使用：

```
SELECT * 
FROM MyTable 
WHERE MONTH(joiningDate) = MONTH(NOW())-1 
  AND YEAR(joiningDate) = YEAR(NOW()); 
```

`MyTable`它将返回上个月插入的所有记录。

# android - Android 中的 optionsMenu() 问题

> ID：13402027
> 
> 赞同：0
> 
> 时间：2012-11-15T16:33:06.097
> 
> 标签：android

> **可能重复：**
> [Android - openOptionsMenu 在 onCreate 中不起作用](https://stackoverflow.com/questions/2777098/android-openoptionsmenu-doesnt-work-in-oncreate)

当我像这样调用 openOptionsMenu() 时：

```
@Override
public void onCreate(Bundle bundle)
{
    super.onCreate(bundle);
    setContentView(R.layout.home_screen);

    layout = (LinearLayout) findViewById(R.id.wrapper1);
    layout.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            openOptionsMenu();
        }
    });

} 
```

...它工作得很好，但如果我这样称呼它：

```
@Override
public void onCreate(Bundle bundle)
{
    super.onCreate(bundle);
    setContentView(R.layout.home_screen);

    openOptionsMenu();      
} 
```

我收到此错误并重新启动应用程序：

```
11-15 11:34:05.218: E/AndroidRuntime(1663): FATAL EXCEPTION: main
11-15 11:34:05.218: E/AndroidRuntime(1663): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.toparound.logic/com.toparound.logic.HomeScreen}: android.view.WindowManager$BadTokenException: Unable to add window -- token null is not valid; is your activity running?
11-15 11:34:05.218: E/AndroidRuntime(1663):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
11-15 11:34:05.218: E/AndroidRuntime(1663):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
11-15 11:34:05.218: E/AndroidRuntime(1663):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
11-15 11:34:05.218: E/AndroidRuntime(1663):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
11-15 11:34:05.218: E/AndroidRuntime(1663):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-15 11:34:05.218: E/AndroidRuntime(1663):     at android.os.Looper.loop(Looper.java:137)
11-15 11:34:05.218: E/AndroidRuntime(1663):     at android.app.ActivityThread.main(ActivityThread.java:4745)
11-15 11:34:05.218: E/AndroidRuntime(1663):     at java.lang.reflect.Method.invokeNative(Native Method)
11-15 11:34:05.218: E/AndroidRuntime(1663):     at java.lang.reflect.Method.invoke(Method.java:511)
11-15 11:34:05.218: E/AndroidRuntime(1663):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-15 11:34:05.218: E/AndroidRuntime(1663):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
11-15 11:34:05.218: E/AndroidRuntime(1663):     at dalvik.system.NativeStart.main(Native Method)
11-15 11:34:05.218: E/AndroidRuntime(1663): Caused by: android.view.WindowManager$BadTokenException: Unable to add window -- token null is not valid; is your activity running?
11-15 11:34:05.218: E/AndroidRuntime(1663):     at android.view.ViewRootImpl.setView(ViewRootImpl.java:585)
11-15 11:34:05.218: E/AndroidRuntime(1663):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:326)
11-15 11:34:05.218: E/AndroidRuntime(1663):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:224)
11-15 11:34:05.218: E/AndroidRuntime(1663):     at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:149)
11-15 11:34:05.218: E/AndroidRuntime(1663):     at android.view.Window$LocalWindowManager.addView(Window.java:547)
11-15 11:34:05.218: E/AndroidRuntime(1663):     at com.android.internal.policy.impl.PhoneWindow.openPanel(PhoneWindow.java:630)
11-15 11:34:05.218: E/AndroidRuntime(1663):     at com.android.internal.policy.impl.PhoneWindow.openPanel(PhoneWindow.java:508)
11-15 11:34:05.218: E/AndroidRuntime(1663):     at android.app.Activity.openOptionsMenu(Activity.java:2800)
11-15 11:34:05.218: E/AndroidRuntime(1663):     at com.toparound.logic.HomeScreen.onCreate(HomeScreen.java:24)
11-15 11:34:05.218: E/AndroidRuntime(1663):     at android.app.Activity.performCreate(Activity.java:5008)
11-15 11:34:05.218: E/AndroidRuntime(1663):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
11-15 11:34:05.218: E/AndroidRuntime(1663):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023) 
```

奇怪，啊！！！，因为我希望最后一种方式 optionsMenu() 会在创建 Activity 后自动填充。另一方面，如果我在 onClick 事件处理程序中调用 openOptionsMenu() 它可以工作。请有人帮忙我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:36:57.400

您的活动尚未在第二个片段中创建。如果没有创建主活动，它就没有窗口，所以你不能像菜单一样打开子窗口。您需要在 onCreate 完成后调用它。最好的方法是使用处理程序或可运行并在其中调用 openOptionsMenu。

# jquery - 修复了使用鼠标滚轮滚动时的元素闪烁问题

> ID：13402029
> 
> 赞同：3
> 
> 时间：2012-11-15T16:33:11.293
> 
> 标签：jquery, css-position, flicker

我试图让侧边栏在滚动到某个点后固定在顶部。

```
var sidebarTopPos = $('#sidebar').offset().top;
$(window).scroll(function(event) {
    if ($(window).scrollTop() >= sidebarTopPos) {
        $('#sidebar').css({
            position: 'fixed',
            top: 0
        });
    }
    else {
        $('#sidebar').css({
            position: 'relative'
        });
    }
});​ 
```

看看这个[jsfiddle](http://jsfiddle.net/3HFCM/2/)

当我向下拖动滚动条时，整个事情都很好。但是，当我尝试使用鼠标滚轮滚动时，当侧边栏从“相对”变为“固定”时，我看到烦人的闪烁，我尝试了很多东西。请帮忙。

**编辑**：也许我应该更清楚。侧边栏仅在穿过顶部 div 时才会“闪烁”

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-09-18T22:54:13.197

我遇到了同样的问题，这似乎是一个错误，当您的浏览器根据您的计算机 GPU、内存、CPU 等处理太多事情时会发生错误......，我能够通过添加来修复它以下转换代码到固定位置元素 ( `transform: translateZ(0);-webkit-transform: translateZ(0);`)，它强制浏览器使用硬件加速来访问设备的图形处理单元 (GPU) 以使像素飞行。另一方面，Web 应用程序在浏览器的上下文中运行，这使软件可以完成大部分（如果不是全部）渲染，从而减少了转换的动力。但是 Web 一直在迎头赶上，现在大多数浏览器供应商都通过特定的 CSS 规则提供图形硬件加速。

使用-webkit-transform: translate3d(0,0,0); 将为 CSS 过渡启动 GPU，使它们更平滑（更高的 FPS）。

**注意：** translate3d(0,0,0) 对您看到的内容没有任何作用。它在 x、y 和 z 轴上将对象移动 0px。这只是一种强制硬件加速的技术。

```
#sidebar {
    /* MAGIC HAPPENS HERE */
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-10-29T21:21:28.957

我知道这是一个老问题，并且确定您已经找到了答案，但是如果有人遇到相同的问题并需要修复它，只需将此 css 代码添加到侧边栏即可。

```
#sidebar {
   -webkit-backface-visibility: hidden;
   -webkit-perspective: 1000;
} 
```

# google-fusion-tables - 迁移到 FusionTables v1 API

> ID：13402030
> 
> 赞同：1
> 
> 时间：2012-11-15T16:33:17.827
> 
> 标签：google-fusion-tables

我开始将基于早期版本的 fusiontables API 构建的应用程序迁移到 API 的 v1 版本。我想出了一大堆关于升级的问题。希望有人能帮忙解答。

1) 我的 Web 应用程序代表 Web 应用程序的用户向 fusiontables API 发出请求。目前，我有一个 OAuth 令牌和一个 OAuth 令牌秘密，用于为我的 fusiontables 查询 URL 发出 OAuth 身份验证请求。我目前来自这里的库[http://code.google.com/p/fusion-tables-client-libraries/](http://code.google.com/p/fusion-tables-client-libraries/)。OAuth2 升级文档希望我使用 google 提供的库来发出请求，该请求似乎正在使用客户端 API 中的集合和事物。但是，我不想对当前的代码库进行大量更改。如何以尽可能少的更改升级我的应用程序以使用 OAuth2？我认为这种方法最适合我的应用程序？[https://developers.google.com/accounts/docs/OAuth2ServiceAccount](https://developers.google.com/accounts/docs/OAuth2ServiceAccount)对吗？

2) 另外，通过 OAuth2 获得的令牌每小时都会过期，有没有办法获得不会过期的 OAuth2 令牌？

3）另外，你如何使用刷新令牌？我在上面找不到任何文档。

4) google 的 OAuth 2.0 Playground Web 应用程序如何在没有客户端 ID 和私钥的情况下获取访问和刷新令牌？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T09:12:25.150

我试着回答你所有的问题

1.  如果您不想访问用户的资源，而只想访问您自己的表，则使用服务帐户的方法很有用。服务帐户只是您控制的用户。如果您确实想访问使用您的应用程序的实际用户的表，则服务帐户不是一个真正的选择。你最好看看整个 OAuth 2.0 的东西。我不认为添加 Google API 客户端是一个很大的变化，它只是一个库，您可能需要在代码中添加 5 行代码。
2.  见答案3。
3.  该过程[在 OAuth 指南中进行了描述](https://developers.google.com/accounts/docs/OAuth2#installed)，您从 Google 获得了一个不会过期的刷新令牌，并且使用此令牌您始终可以获得有效的访问令牌。
4.  操场要求您提供凭据，这就是它获得访问权限的方式:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-23T21:55:05.553

回答上面的问题 #4 “谷歌的 OAuth 2.0 游乐场网络应用程序如何在没有客户端 ID 和私钥的情况下设法获取访问和刷新令牌？”......谷歌制作了一个关于如何做到这一点的简短视频。

[4 分钟视频如何为 clientID 和密钥设置 OAuth Playground](https://www.youtube.com/watch?v=hfWe1gPCnzc)

# mips - 将二进制数据解码为 MIPS 指令

> ID：13402038
> 
> 赞同：0
> 
> 时间：2012-11-15T16:33:40.307
> 
> 标签：mips, mars-simulator

我无法弄清楚这两个 MIPS 指令是什么。

```
0b1000_1111_1110_1111_1100_0000_0000_0000
0b0000_0000_0000_0000_0000_0000_0000_0000 
```

有没有办法使用 MARS IDE 来弄清楚这些指令是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:44:50.533

第一个是 LW（将字加载到寄存器中），第二个是 NOOP（无操作），它实际上是一个移位寄存器 $0 0 步并存储在寄存器 $0 中。

请参阅[MIPS 指令集的 wiki](http://en.wikipedia.org/wiki/MIPS_architecture#MIPS_I_instruction_formats)。

# php - 将 Assetic 与 Phing 和自定义框架集成

> ID：13402045
> 
> 赞同：1
> 
> 时间：2012-11-15T16:33:59.493
> 
> 标签：php, phing, assetic

我们的产品是使用内部框架开发的。我们将 PHP (5.4) 与 Twig 一起用作诱人的系统，并使用 Phing 进行部署。

最近，由于代码遗留问题，我们在更新 Javascript 和 CSS minifier\compressor 时遇到了问题，我们决定寻找其他解决方案。

我们找到了管理所有相关资产（css、js）及其工具（编译器、缓存、S3 等）的 Assetic 库，我们正在考虑如何集成到其中。在这样做的同时，我们必须考虑以下几点：

*   Assetic 支持让前端开发人员使用 Twig 定义他们的 css\js 需求，这意味着他们不必接触服务器端代码。
*   今天我们通过服务器端定义我们的资产，因为我们的部署脚本需要缩小\压缩它，然后创建一个新的“compiled\gzip”脚本\css——我们希望能够跳过这部分而不是拥有需要为资产定义服务器端。
*   保持当前与 CDN 的集成对我们来说也很重要。在部署时，我们将资产\静态数据上传到 CDN。
*   我们希望能够支持 2 种模式：
    *   “源代码模式” - 意味着在开发过程中我们可以使用带有 minifier\compiler\merge 的脚本，并像一个一个地加载它们一样使用它们
    *   “合并模式” - 合并和编译\缩小（通过配置）并准备好部署（应该支持 QA 的开发）

通过上面提到的，我们想知道如何在**不**改变我们的核心框架的情况下将 Assetic 与我们的应用程序集成，并应用之前考虑过的和上面写过的东西。

谢谢

# powershell - 使用 PowerShell 通过 WebDAV 下载特定目录中的所有文件

> ID：13402046
> 
> 赞同：0
> 
> 时间：2012-11-15T16:34:00.210
> 
> 标签：powershell, download, webdav, directory-listing

我必须获取一个文件列表并下载所有这些文件，这些文件是通过 WebDAV 使用 PowerShell 列出的。下载部分不是大问题，但我无法使用 PowerShell 获取目录列表。根据我所见，谷歌没有找到关于该主题的有用想法。我设法从一个目录上传所有文件，但 get-childitems 在 WebDAV 上的远程目录上不起作用。

任何人的想法，这怎么可能做到？

更新：我发现可以使用 PROPFIND。我得到一个包含所有目录数据的 XML。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-07-21T10:17:33.217

我遇到了类似的问题，在搜索更多信息时发现了这个问题。最终，我使用以下代码通过 WebDAV 进行了 PowerShell 文件传输：

```
# Script to download files using a WebDAV file transfer connection. 
# Original script by Andrew Pla: https://andrewpla.dev/Download-TOPdesk-Backups-Using-PowerShell/
# Modified for downloading multiple files from a WebDAV folder in a TOPdesk environment. 

### Variables ###
# Where can we download the files to? 
$OutputFolder = 'D:\temp'

# What is your environment URL? 
$TOPdeskURL = 'pentest.topdesk.net' #Example: 'customername.topdesk.net'

#What folder are we downloading from? 
$UploadFolder = 'upload/incident'       #Use a forward slash to indicate subfolders. Example upload/incident

#What is the pattern we can use to identify folders to download? 
$folderPattern = "^I"   #Uses regular expressions to match a list of folders. Example: ^I16 matches all folders that start with I16\. 
                            #Full documentation: https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_regular_expressions?view=powershell-7

### The actual script starts here. You don't have to edit anything below this line ###
#
# Ask credentials for an operator with webdav access
$Credential = Get-Credential -Message 'Enter credentials for a TOPdesk operator with WebDAV file transfer permissions.'

# Map remote folder to a temporary drive called TOPdesk
$psDriveParams = @{
    PSProvider = 'FileSystem'
    Root = "\\$TOPdeskURL@SSL\webdav" 
    Credential = $Credential
    Name = 'TOPdesk'
}
New-PSDrive @psDriveParams

# Create a webclient that we will use to download the file.
$WebClient = New-Object system.net.webclient

# Add TOPdesk credentials for the connection, proving TOPdesk may send us the file.
$WebClient.Credentials = $Credential

#Download all folders that match the pattern
$folders = Get-ChildItem TOPdesk:\$UploadFolder |Where-Object{$_.name -Match $folderPattern} #|select -exp fullname
    if ($folders) {
    write-host 'Downloading the following folders: '

        Foreach($folder in $folders){
            # Download the file by using the downloadfile method on the web client. 
            # Copy files from the mapped drive to the download folder from the variables list
            write-host $folder
            Copy-Item "TOPdesk:\$UploadFolder\$folder" -Destination "$OutputFolder\$folder" -Recurse
        }
    }
    elseif (-not $folders){
        # clean up the temporary drive mapping that we created.
        Remove-PSDrive 'TOPdesk'
        write-host 'No folders found. Run Get-ChildItem Topdesk:\' + $UploadFolder + ' to check if files exist, or explore the remote folder in a tool like WinSCP.'
    }
    else {
        Remove-PSDrive 'TOPdesk'
        throw 'There was a problem determining what folders to copy. Please review your variables.'
    }

# clean up the temporary drive mapping that we created.
Remove-PSDrive 'TOPdesk' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T19:53:24.587

如果启用了目录浏览，您应该能够通过以下方式获得列表：

```
$wc = new-object system.net.webclient;
$dirList = $wc.downloadstring(URL_TO_DIRECTORY); 
```

从那里，您必须解析 HTML 以找到文件名，并使用它`$wc.downloadloadfile()`来拉下每个文件名。

我敢肯定，一定有比这更容易/更好的方法。

# c# - 帖子调用了错误的网页

> ID：13402047
> 
> 赞同：1
> 
> 时间：2012-11-15T16:34:01.853
> 
> 标签：c#, asp.net-mvc

我有以下网页：

**安全问题.cshtml**

```
@model SuburbanCustPortal.Models.SecurityQuestionModel

@{
  ViewBag.Title = "Forgot Password Step 2";
}

<h2>Forgot Password Step 2</h2>
<p>
    Please provide the answer to your security question that you gave when you created your web account.
</p>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm()) {
    <div>
        <fieldset>
            <legend>Security Question and Answer</legend>

            <!-- this is the question -->
            <div class="editor-label">
                @Html.LabelFor(m => m.SecurityQuestion)
            </div>
            <div class="editor-field">
                @Html.TextBoxFor(m => m.SecurityQuestion, new { @class = "GenericTextBox", @readonly = "readonly" })
            </div>

            <!-- this is the answer -->
          <div class="editor-label">
                @Html.LabelFor(m => m.SecurityAnswer)
            </div>
          <div class="editor-field focus" >

            @Html.TextBoxFor(m => m.SecurityAnswer, new { @class = "GenericTextBox" })
            @Html.ValidationMessageFor(m => m.SecurityAnswer)
          </div>
                @Html.ValidationSummary(true, "The supplied answer did not match the answer on the account.")
          <p>
            <input type="submit" value="Complete Step 2" />
          </p>
        </fieldset>
    </div>
} 
```

**忘记密码.cshtml**

```
 @model SuburbanCustPortal.Models.ForgotAccountInfoModel

    @{
      ViewBag.Title = "Forgot Password Step 1";
    }

    <h2>Forgot Password Step 1</h2>
    <p>
        Please provide the username or email address on your web account.
    </p>

    <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

    @using (Html.BeginForm()) {
        <div>
            <fieldset>
                <legend>Email address</legend>

                <div class="editor-label">
                    @Html.LabelFor(m => m.UsernameOrEmail)
                </div>
                <div class="editor-field focus">
                    @Html.TextBoxFor(m => m.UsernameOrEmail, new { @class = "GenericTextBox" })
                    @Html.ValidationMessageFor(m => m.UsernameOrEmail)
                </div>
                    @Html.ValidationSummary(true, "Username or Email address was not found.")
              <p>
                <input type="submit" value="Complete Step 1" />
              </p>
              <br/>
              <p align="right">
                Step 1 of 3
              </p>
            </fieldset>
        </div>
    } 
```

**这是在我的控制器中：**

```
public ActionResult SecurityQuestion()
{
  return View();
}

[HttpPost]
public ActionResult SecurityQuestion(SecurityQuestionModel model)
{
  const int maxnumberofattemptsallowed = 3;

  if (model.SecurityAnswerAttempts > (maxnumberofattemptsallowed -1))
  {
    var msg = 
        string.Format(
        "Max number of attempts allowed. Your account has been locked.{0}Please contact us for assistance in unlocking your account.",
        "<br>");
    ModelState.AddModelError("SecurityAnswer", msg);
    return View("LogOn");
  }

  if (_client.ValidateSecurityAnswer(model.AccountId, model.SecurityAnswer))
  {
    var msg =
      string.Format(
        "The supplied answer did not match the answer on the account.{0}You have {1} more attempt(s) before your account is locked.",
        "<br>", maxnumberofattemptsallowed - model.SecurityAnswerAttempts);
    model.SecurityAnswerAttempts++;
    ModelState.AddModelError("SecurityAnswer", msg);        
    return View(model);
  }

  // send email here

  return View(model);
}

public ActionResult ForgotPassword()
{
  return View();
}

[HttpPost]
public ActionResult ForgotPassword(ForgotAccountInfoModel model)
{
  var tokenid = MiscClasses.TokenIdCookie.GetTokenIdCookie();

  var secdata = new SecurityData();
  secdata.EmailOrUsername = model.UsernameOrEmail;
  secdata.TokenId = tokenid;
  secdata = _client.ForgotPasswordGetSecurityQuestion(secdata);
  if (!string.IsNullOrEmpty(secdata.SecurityQuestion))
  {
    var newmodel = new SecurityQuestionModel();
    newmodel.SecurityQuestion = secdata.SecurityQuestion;
    newmodel.SecurityAnswer = string.Empty;
    newmodel.SecurityAnswerAttempts = 0;
    newmodel.AccountId = secdata.AccountId;
    return View("SecurityQuestion", newmodel);
  }
  {
    ModelState.AddModelError("EmailAddressNotFound", "Email address not found.");
    return View(model);
  }
} 
```

**它应该按以下方式行事：**

ActionResult ForgotPassword() -> ForgotPassword View -> [HttpPost] ActionResult ForgotPassword(ForgotAccountInfoModel model) -> ActionResult SecurityQuestion() -> SecurityQuestion View -> **[HttpPost] ActionResult SecurityQuestion(SecurityQuestionModel model)**

**相反，它正在这样做：**

ActionResult ForgotPassword() -> ForgotPassword View -> [HttpPost] ActionResult ForgotPassword(ForgotAccountInfoModel model) -> ActionResult SecurityQuestion() -> SecurityQuestion View -> **[HttpPost] ActionResult ForgotPassword(ForgotAccountInfoModel model)**

对于我的生活，我无法弄清楚为什么它会重新加载 ForgotPassword POST ！！！

有人看到我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:05:24.070

好吧，我不知道为什么要这样做，但我做了一个解决方法：

[CREATE 视图不从控制器发布创建方法](https://stackoverflow.com/questions/13363484/create-view-does-not-post-the-create-method-from-the-controller?rq=1)

我通过这样做强迫它调用正确的方法：

```
@using (Html.BeginForm("SecurityQuestion", "Account", FormMethod.Post)) 
```

也许这会帮助别人

# php - CSV 文件和数据库

> ID：13402051
> 
> 赞同：0
> 
> 时间：2012-11-15T16:34:07.747
> 
> 标签：php, mysql, csv

以下是我的 CSV 文件示例：

```
姓名 | 美元
------------
万一 | 500
飞碟 | 600

```

* * *

我想读取我的 csv 文件，其中我的 php 脚本读取第一行，然后（如何）根据返回的第一行的元素相应地创建表，就像上面的示例中的行元素一样`Name and USD`。

```
Create table csv
{
$column1 varchar (50)
$column2 varchar (50)
} 
```

然后（如何）将从第二行开始的元素存储在创建的表中，依此类推。请让我知道什么是合适的方法来做到这一点。

谢谢，

以下函数我用来从我的 csv 文件中获取数据：

```
$row = 1;
if (($handle = fopen("mycsv.csv", "r")) !== FALSE) {
    while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
        $num = count($data);
        echo "<p> $num fields in line $row: <br /></p>\n";
        $row++;
        for ($c=0; $c < $num; $c++) {
            echo $data[$c] . "<br />\n";
        }
    }
    fclose($handle);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T17:12:47.687

更好的方法是：

1) 研究 CSV 表格格式并决定字段名称和类型，在您的情况下，例如

```
fonemodel varchar(50);
cost      integer;      -- or a monetary field 
```

2）从上面的字段手动创建表

```
CREATE TABLE fones ... 
```

3）直接导入文件：

```
LOAD DATA LOCAL INFILE '/path/to/mycsv.csv'
INTO TABLE fones
FIELDS TERMINATED BY ','
ENCLOSED BY '"'
LINES TERMINATED BY '\n'
IGNORE 1 LINES 
```

端接和外壳取决于 CSV 结构（您提供的示例实际上是*管道分隔*的）。

一旦存储了两个表，就可以在适当的数据类型之间进行比较（`varchar`可能会给您带来麻烦 - 599 可能被认为小于 60，因为*字符*'5' 在 '6' 之前）

## 更新

假设真正的 CSV 类似于

```
 UFone,500,useless data,1234,other useless info,blah blah 
```

并且您只需要模型、成本和库存，即第 1、2 和 4 列。然后您将输入指定为：

```
 ...INTO TABLE fones (model, cost, @ignore, stock, @ignore, @ignore)... 
```

而不是简单地`INTO TABLE`.

有关[MySQL 手册页的](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)更多信息。

# three.js - 在 three.js 中将一个模型放在另一个模型中，然后移动模型

> ID：13402055
> 
> 赞同：0
> 
> 时间：2012-11-15T16:34:18.883
> 
> 标签：three.js

这个问题是关于three.js的。我想将一个网格放置在另一个网格中，然后能够移动放置在另一个网格中的网格。网格是使用 JSONLoader 加载的。一个是世界，另一个是代表用户的模型本身。我该怎么做呢？我可以毫无困难地加载两个网格，但我无法将用户模型放置在世界模型中。然后我需要执行碰撞检测以确保用户不会穿过世界墙和物体。有人建议使用 jiblibjs 作为其中的一部分，但该库已超过 1 年没有更新。还建议使用 ammo.js 进行碰撞检测。但是，这仍然不能解决将一个网格放置在另一个网格中然后移动它的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T10:17:18.463

我认为用户模型本身和世界都处于相同的规模。您可以使用[Object3D](http://mrdoob.github.com/three.js/docs/53/#Reference/Core/Object3D)的 add() 函数嵌套对象，但请注意您导出的层次结构。例如，世界对象可能包含空对象（没有几何图形）等等。添加不会是具有挑战性的部分，碰撞检测会。

如果您的世界有点平坦（地板是平坦的，并且您需要检查与墙壁的碰撞，您应该查看**碰撞贴图**。基本上，您将使用呈现为单色图像的正交俯视图，其中一种颜色将代表要检查碰撞的区域，另一个将代表不可碰撞的区域。

如果世界有更复杂的外观，您可能需要查看[碰撞网格](http://en.wikipedia.org/wiki/Static_mesh#Collision)：您将拥有世界的简化/非常低多边形副本，您不会渲染，但用于检查碰撞，这应该更快而不是比检查复杂网格的每个多边形的碰撞。

当然，你也有像 jiglib/ammo/etc 这样的刚体库。但即使是那些你应该考虑使用非渲染低多边形网格进行碰撞。

高温高压

# layout - 看不到主页内容 <%= yield %> 不起作用

> ID：13402057
> 
> 赞同：0
> 
> 时间：2012-11-15T16:34:31.743
> 
> 标签：layout, twitter-bootstrap, yield, railstutorial.org

我刚刚完成了 Michael Hartl 的 Rails 教程。我试图回去创建一些新的和非常基本的东西，使用他的教程作为参考。

安装 bootstrap 并将其导入 custom.css.scss 后，我在顶部放置了一个导航栏，类似于他在教程中添加的导航栏。当我这样做时，我再也看不到 home.html.erb 文件中写入的任何内容。当我删除标题时，我可以再次看到它，为什么？

我的测试说它在那里，但我的浏览器（chrome）没有显示它。

布局/应用：

```
<!DOCTYPE html>
<html>
<head>
  <title><%= full_title(yield(:title)) %> </title>
  <%= stylesheet_link_tag    "application", :media => "all" %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>
  <%= render 'layouts/shim' %>
</head>
<body>
    <%= render 'layouts/header' %>
    <%= yield %>
</body>
</html> 
```

布局/_header.html.erb

```
<header class="navbar navbar-fixed-top navbar-inverse">
  <div class="navbar-inner">
    <div class="container">
      <%= link_to "Basic", 'root_path', id: "logo" %>
      <nav>
        <ul class="nav pull-right">
          <li><%= link_to "Sign in",    '#' %></li>         
          <li><%= link_to "New? Sign up",    '#' %></li>
        </ul>
      </nav>
    </div>
  </div>
</header> 
```

static_pages/home.html.erb

```
<% provide(:title, 'Home') %>
<p>
This is a basic page.  This text should be visible but it isn't.
</p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:56:33.577

可悲的是，这是我的另一个新手问题。

答案是文本隐藏在导航栏后面。我不知道导航栏是如何工作的。我是该引导功能的新手。显然，您必须在 CSS 中设置以下内容：

```
body { padding-top: 60px; } 
```

# php - 贝宝开发者账号

> ID：13402062
> 
> 赞同：0
> 
> 时间：2012-11-15T16:34:46.713
> 
> 标签：php, facebook, codeigniter, paypal

我一直在搜索一整天，不幸的是文档没有那么有条理，在阅读了大部分内容后，我仍在寻找答案，所以这是交易：-我已经有一个开发者帐户，我想做的是一个允许我的公司出售某些节目门票的 Facebook 应用程序，我可以用我的帐户开发该应用程序，并且该应用程序的钱而不是转入我的帐户，而是转到其他帐户，比如说公司的帐户？或者我需要注册公司的账号为开发者，然后用那个账号开发APP。

我已经阅读了许多入门指南和类似的东西，但是它们太多了，我只是对如此分散的信息感到困惑。

我不知道这些信息是否有用，但这是用户在 facebook 应用程序中执行的步骤，该步骤位于 facebook 页面内，用户必须先喜欢该页面，然后才能访问该应用程序

-> 然后在 facebook 应用程序中，用户选择事件和门票数量并继续付款

-> facebook 应用程序在页面内，iframe 应用程序也是如此，为了防止可能由此引发的问题，我正在考虑使用 paypal 进程显示一个弹出窗口，以便将用户保留在 facebook 应用程序中。

-> 用户完成付款后，我的 Facebook 应用程序会发送一封电子邮件，其中包含获取门票的信息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:38:40.823

您的开发者帐户仅用于实施。没有钱从没有账户转移到其他人。实施并确保一切正常后，您只需将帐户切换到公司业务帐户并投入生产。

此外，实施是针对贝宝开发完成的，完成后切换到贝宝生产。

# sql - Netezza - 插入多行很慢

> ID：13402066
> 
> 赞同：2
> 
> 时间：2012-11-15T16:34:48.653
> 
> 标签：sql, netezza

如何在 Netezza 中同时插入多行？我有大约 20k 条记录要插入，但是使用单个插入将它们全部放入需要 1 小时（！）

```
INSERT INTO MYTABLE VALUES (2, 2, 2, 'E') , (3, 4, 5, 'Z') --doesn't work 
```

这就是我现在正在使用的

```
INSERT INTO MYTABLE VALUES (2, 2, 2, 'E'); 
INSERT INTO MYTABLE VALUES (3, 4, 5, 'Z');
... 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-15T18:23:18.517

Netezza 在单例更新或插入方面表现不佳。我们所做的是 Upserts 或我们所说的 Kill and Fills。使用 Cognos Data Manager (ETL)，我们找到所有更新，然后从表中删除它们，然后使用 NZ Load 将它们追加回来。对于插入，我们只是追加它们。两者都使用 NZ Load。比缓慢而痛苦的单个（一次一个）更新或插入要好得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T08:11:21.073

Netezza Performance Server (NPS) 主要专注于在线分析事务 (OLAP)。它主要涉及批量加载。因此，如果您的插入记录很大，请选择 NZLOAD，它会非常快。语法：nzload -db -host -u -pw -t -df -delim -dateDelim -lf -bf

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T16:37:35.933

并非每个数据库都支持多行插入。所以你必须使用单独的插入，或者你也可以使用：

```
INSERT INTO MYTABLE
select 2, 2, 2, 'E' union all
select 3, 4, 5, 'Z' 
```

# objective-c - 从 UIImageViews iOS 创建 png

> ID：13402067
> 
> 赞同：0
> 
> 时间：2012-11-15T16:34:49.790
> 
> 标签：objective-c, ios, uiimageview, uiimage

我正在为 iPad 开发 iOs 应用程序。我正在显示一个带有图像视图的网格，我想从所有图像中制作一个 png 图像，但像素大小不同。我的意思是，我不能做截图，我必须创建图像视图的图像，但要使用另一个分辨率。大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:52:37.657

这是以前 SO 帖子中的一个示例，它提出了类似的问题。（[所以将X图像一起发布](https://stackoverflow.com/questions/2021711/how-do-i-join-x-number-of-uiimages-together)）

接受的结果代码：

```
+ (UIImage *)joinImages:(UIImage *)im1 secondImage:(UIImage *)im2 thirdImage:(UIImage *)im3
{
//Joins 3 UIImages together, stitching them vertically
CGSize size = CGSizeMake(320, 480);
UIGraphicsBeginImageContext(size);

CGPoint image1Point = CGPointMake(0, 0);
[im1 drawAtPoint:image1Point];

CGPoint image2Point = CGPointMake(0, im1.size.height);
[im2 drawAtPoint:image2Point];

CGPoint image3Point = CGPointMake(0, im1.size.height +im2.size.height);
[im3 drawAtPoint:image3Point];

UIImage* finalImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

return finalImage;
} 
```

您可以将其用作示例，根据您的需要，听起来您可能想要获取图像尺寸并缩放它们以适合。

# codesmith - 使用 CodeSmith 生成表类的项目

> ID：13402072
> 
> 赞同：0
> 
> 时间：2012-11-15T16:35:06.343
> 
> 标签：codesmith

我刚刚从朋友那里得到了一个项目的代码源。他使用 CodeSmith 生成数据库和表类，但现在我想在数据库中再添加一张表。显然我没有 codesmith 来重新生成数据库所以我的问题是我是否可以使用另一个 ORM，比如 Dapper 来使用名为“users”的新表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T19:19:55.150

我为 CodeSmith 工具工作。我亲眼目睹了最好坚持使用一个工具/模板以供将来重新生成/附加功能/新数据库表。如果您不这样做，那么长期管理项目将是一场噩梦，尤其是当数据库端发生更改时。

# python - 找出 Python 中从未调用过的函数？

> ID：13402075
> 
> 赞同：2
> 
> 时间：2012-11-15T16:35:14.003
> 
> 标签：python, function, pyramid

> **可能重复：**
> [如何在 Python 代码中找到未使用的函数？](https://stackoverflow.com/questions/693070/how-can-you-find-unused-functions-in-python-code)

我正在处理一个 Pyramid 项目的许多文件和函数，为了清理这些东西，我想知道哪些函数永远不会被调用。有没有办法解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:45:01.283

您可以使用静态分析器，例如[pychecker](http://pychecker.sourceforge.net/)。

# mysql - 如何以编程方式删除 MySQL 视图的列？

> ID：13402076
> 
> 赞同：2
> 
> 时间：2012-11-15T16:35:13.483
> 
> 标签：mysql, view, alter

我想更改 mysql 中的视图并删除列。我必须为很多视图执行此操作，所以我想编写脚本。

如果视图是表，我可以使用 ALTER TABLE foo DROP COLUMN blah 但我认为我不能在视图上使用这个语法。

我可以从 INFORMATION_SCHEMA.COLUMNS 中删除列来执行此操作吗？（似乎 V. 有风险！）

我是否缺少一些不错的语法，或者我是否必须解析可以从 INFORMATION_SCHEMA.VIEWS 获得的 ALTER VIEW 语句并重新生成视图？（也不好看）

谢谢，

亚历克斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T16:41:44.907

您不能从视图中删除列。您必须改为[更改视图的定义](http://dev.mysql.com/doc/refman/5.5/en/alter-view.html)。

数据库中的所有表`INFORMATION_SCHEMA`实际上都是视图，以方便访问它们包含的信息。无法更改它们。

# command-line-arguments - 命令行参数语法中的基本概念是什么

> ID：13402084
> 
> 赞同：0
> 
> 时间：2012-11-15T16:35:47.587
> 
> 标签：command-line-arguments

我想实现一个获取一些命令行参数和选项的脚本。命令行参数中有很多不同的语法类型，我有时会感到困惑。

这里有些例子：

```
./my_script -f -abc --file --name=lior -Dsomething=value -arg val 
```

...我想还有更多...

有人可以在这里订购吗？

（也欢迎最佳实践和建议）

谢谢，

里奥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T13:55:01.000

[您可以在这篇文章](http://pythonconquerstheuniverse.wordpress.com/2010/07/25/command-line-syntax-some-basic-concepts/)中找到一些讨论和有趣的链接。另请参阅[这个](http://www.faqs.org/docs/artu/ch10s05.html)和[那个文件](http://tldp.org/LDP/abs/html/standard-options.html)。

# jquery - 在 d3.js 上递归触发点击

> ID：13402090
> 
> 赞同：1
> 
> 时间：2012-11-15T16:36:00.550
> 
> 标签：jquery, d3.js

我正在尝试递归触发 d3.js 上的事件。

这（不涉及 d3.js）有效：http: [//jsfiddle.net/emepyc/98HmT/](http://jsfiddle.net/emepyc/98HmT/)

```
$("#b1").on("click", function() {
        var elem = $(this);    
        console.log(elem);
        console.log("Pressed");
        setTimeout(function(){console.log(elem); $(elem).trigger("click")}, 1000)
 }); 
```

但这（在 d3.js 上）没有：http: [//jsfiddle.net/emepyc/bmdKW/](http://jsfiddle.net/emepyc/bmdKW/)

```
d3.select("#node1").on("click", function() {
        var elem = $(this);
        console.log(elem);
        console.log("Pressed");
        setTimeout(function(){console.log(elem); $(elem).trigger("click")}, 1000)
}); 
```

有任何想法吗？

**编辑：** 似乎 jQuery 的“触发器”没有发送真实事件；它只调用自己的听众。因此，它无法看到 d3 设置的“单击”事件处理程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:16:06.243

尝试让 click 事件调用一个函数，然后开始循环：

```
d3.select("#node1").on("click", function() {
    var elem = $(this);
    console.log(elem);
    console.log("Pressed");
    qwerty();
});

function qwerty() {
    setTimeout(function() {
        console.log("looping");
        qwerty2()
    }, 1000)
};

function qwerty2() {
    console.log("part 2");
    qwerty();
} 
```

# asp.net-mvc - 网格弹出编辑器中的可编辑网格

> ID：13402092
> 
> 赞同：1
> 
> 时间：2012-11-15T16:36:05.873
> 
> 标签：asp.net-mvc, kendo-ui

是否可以在父网格的弹出编辑器中添加可编辑网格？两个网格都是 Ajax 绑定。

父网格视图：

```
@(Html.Kendo().Grid<MyProject.Business.Models.ParentDTO>().Name("ParentGrid")
.Columns(cols => cols.Command(o => o.Edit() ).Title(" "))
.Editable(editor => editor.Mode(GridEditMode.PopUp))
.Events(events=>events.Edit("onEditOfParentGrid"))
.DataSource(datasource => datasource
    .Ajax()
    .Model(model => model.Id(o => o.id))
    .Read(read => read.Action("GetAll", "ParentAjax"))
    .Update(update => update.Action("Update", "ParentAjax"))
    .Create(create => create.Action("Create", "ParentAjax"))
    .Destroy(destroy => destroy.Action("Destroy", "ParentAjax"))
    )
)
<script type="text/javascript">
    function onEditOfParentGrid(e) {
        $('#ChildGrid').data().kendoGrid.dataSource.read({ id: e.model.id })
    }
</script> 
```

子网格视图（父母的默认 EditorTemplate）：

```
@model MyProject.Business.Models.ParentDTO
@(Html.Kendo().Grid<MyProject.Business.Models.ChildDTO>().Name("ChildGrid")
.AutoBind(false)
.Editable(edit=>edit.Mode(GridEditMode.InCell))
.DataSource(datasource => datasource
    .Ajax()
    .Model(model =>model.Id(o => o.id))
    .Read(read => read.Action("GetByParentId", "ChildAjax"))
    .Update(update => update.Action("Update", "ChildAjax"))
    .Create(create => create.Action("Create", "ChildAjax"))
    .Destroy(destroy => destroy.Action("Destroy", "ChildAjax")))) 
```

这样做会通过内联显示弹出编辑器并编写一些javascript（作为文本）来搞砸弹出编辑器。子网格也会丢失数据。如果子网格没有编辑器（又名只读），一切正常，数据显示。

控制台中有一个 jQuery 错误，但它（至少对我而言）并没有说明什么

```
Uncaught SyntaxError: Unexpected token ILLEGAL jquery-1.8.2.js:564
  (anonymous function) jquery-1.8.2.js:564
  jQuery.extend.globalEval jquery-1.8.2.js:565
  (anonymous function) jquery-1.8.2.js:6006
  jQuery.extend.each jquery-1.8.2.js:611
  jQuery.fn.extend.domManip jquery-1.8.2.js:5991
  jQuery.fn.extend.append jquery-1.8.2.js:5764
  jQuery.fn.(anonymous function) jquery-1.8.2.js:6186
  h.extend._createPopupEditor kendo.all.min.js:8
  h.extend.editRow kendo.all.min.js:8
  (anonymous function) kendo.all.min.js:8
  jQuery.event.dispatch jquery-1.8.2.js:3063
  elemData.handle.eventHandle jquery-1.8.2.js:2681 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T22:51:29.630

在嵌套小部件方面，KendoUI 还没有完全成熟。另一种方法是扩展一行（行详细信息）并在那里启动子网格。大概这是多对一的关系？如果您有多个关系，请为每个网格制作一个标签条。

# java - 空点异常，不知道为什么？

> ID：13402094
> 
> 赞同：1
> 
> 时间：2012-11-15T16:36:18.223
> 
> 标签：java, exception-handling, nullpointerexception

好的，我对 java 是半新的，我正在做一个乒乓球游戏。我想完全自己做，但我遇到了一个问题。到目前为止，我已经上了 2 节课。我的主要一个，一个包含有关球的信息。我的主要课程如下：

```
 import java.awt.Canvas;
import java.awt.Color;
import java.awt.DisplayMode;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.image.BufferStrategy;

import javax.swing.JFrame;

public class Main extends Canvas implements Runnable{

    private static final long serialVersionUID = 1L;

    public static int Width=800;
    public static int Height=600;
    public boolean Running=false;
    public Thread thread;
    public Ball ball;
    public int BallX = ball.BallLocationX;
    public int BallY = ball.BallLocationY;

    public static void main(String[] args){
        Main game = new Main();
        JFrame frame = new JFrame();
        frame.setSize(Width, Height);
        frame.setTitle("Pong By Poo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setResizable(false);
        frame.setVisible(true);
        frame.setLocationRelativeTo(null);
        frame.add(game);
        game.start();
        }

    public void start(){
        if(Running==true){
            return;
        }
        else {
            Running=true;
            thread = new Thread(this);
            thread.start();
        }
    }

    public void run(){
        while(Running==true){
            Draw();
        }

    }

    public void Draw(){
        BufferStrategy bs = this.getBufferStrategy();
        if(bs==null){
            createBufferStrategy(2);
        }else{
            Graphics g = bs.getDrawGraphics();
            g.setColor(Color.BLACK);
            g.fillOval(BallX, BallY, 10, 10);   
        }

    }

} 
```

我的球类是这样的：

```
 **import java.awt.Color;
import java.awt.Graphics;

import javax.swing.JPanel;

public class Ball extends JPanel{
    public int BallLocationX;
    public int BallLocationY;
    public boolean BallMovementY; //true makes the ball go up, false makes it go down
    public boolean BallMovementX; //True makes the ball go right, false makes it go left.

    public void paintComponent(Graphics g){
        super.paintComponent(g);
        g.setColor(Color.BLACK);
        g.fillOval(BallLocationX, BallLocationY, 10, 10);
    }

    //moves the ball left to right
    public int YVelocity(){

        if(BallMovementY==true){
            BallLocationY++;
        }
        else{
            BallLocationY--;
        }

        return BallLocationY;

    }

    //Moves the ball up and down
    public int XVelocity(){

        if(BallMovementX==true){
            BallLocationX++;
        }
        else{
            BallLocationX--;
        }

        return BallLocationX;

    }
}
** 
```

我试图在我的主班内的屏幕上画球，使用我从球班得到的球的位置。我知道（到目前为止）球不会移动，稍后我会弄清楚的。我的问题是它不会在屏幕上绘制球，给我这个错误：

```
Exception in thread "main" java.lang.NullPointerException
    at Main.<init>(Main.java:20)
    at Main.main(Main.java:26) 
```

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-15T16:38:16.443

```
public Ball ball;  // ball is not initialized
public int BallX = ball.BallLocationX;  // NPE here
public int BallY = ball.BallLocationY; 
```

这就是问题所在。在您的实例变量声明中，您`ball`仍然指向`null`并且您已经使用它来访问`BallLocationX`. 它会抛出一个`NPE`.

您应该初始化您的`ball`引用以指向`Ball`first 的实例：-

```
public Ball ball = new Ball();  // Or whatever way you use to instantiate it
public int BallX = ball.BallLocationX;
public int BallY = ball.BallLocationY; 
```

* * *

**一个建议 ： -**

*   我刚刚注意到，您已经使用`public modifier`了所有 `fields`. 你不应该那样做。尽可能地 `private modifier`为您的字段尝试拥有，并提供`public accessors`访问它们。（*getter 和 setter*）。
*   此外，请遵循 Java 命名约定。变量名称应以小写字母/下划线/美元符号开头（更改`BallX`为`ballX`和）`BallLocationX``ballLocationX`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T16:40:17.180

您定义`ball`，但不使用任何值对其进行初始化，然后在 上调用一个方法`ball`，即`null`.

```
public Ball ball;
public int BallX = ball.BallLocationX; 
```

`public`一个建议：除非您有充分的理由，否则请不要使用字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T16:38:28.627

frame.setLocationRelativeTo(null); 可能是问题所在。对此发表评论并尝试。

# c# - 从 WCF 服务返回具有通用字典的通用对象

> ID：13402098
> 
> 赞同：1
> 
> 时间：2012-11-15T16:36:36.823
> 
> 标签：c#, wcf

我有一个使用以下方法的 WCF 服务：

```
[OperationContract]
TernaryWebServiceResponse<long> ModifyObservations(...); 
```

响应对象如下：

```
[DataContract]
public class TernaryWebServiceResponse<T>
{
    [DataMember]
    public TernaryProcessingResultStatus ProcessingSuccessStatus { get; set; }

    [DataMember]
    public Dictionary<T, bool> ProcessingSuccessDetails { get; set; } 
} 
```

此类在共享程序集中定义，并且 WCF 引用被配置为重用它。

但是当我生成代理时，我得到了这样的东西：

> 自定义工具警告：无法导入 wsdl：portType 详细信息：运行 WSDL 导入扩展时引发异常：System.ServiceModel.Description.DataContractSerializerMessageContractImporter 错误：引用类型 'TernaryWebServiceResponse`1，常规，版本 = 1.0.0.0，文化 = 中性，无法使用命名空间“http://schemas.datacontract.org/2004/Genaral.SoapCommunication”中数据合同名称为“TernaryWebServiceResponseOflong”的 PublicKeyToken=null'，因为它与导入的 DataContract 不匹配。需要从引用类型中排除此类型。

有人可以解释一下，这里到底是什么问题？我知道泛型可以在 WCF 合同中使用，只要它们得到解决，例如 not `MyObj<T>`but `MyObj<long>`。那么这门课有什么问题呢？是不是在类上定义的 T 不能在字典上以某种方式解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:43:57.520

也许定义一份新合同会有所帮助。就像是：

```
[DataContract] 
public class LongTernaryWebServiceResponse : TernaryWebServiceResponse<long> 
{ 
} 
```

然后在您的服务合同中类似：

```
[OperationContract]
LongTernaryWebServiceResponse ModifyObservations(...); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T17:22:08.850

如果只需要 Dictionary 键的类的泛型类型，您可以按照此（未经测试）...

```
[DataContract]
public class TernaryWebServiceResponse
{

    [DataMember]
    public TernaryProcessingResultStatus ProcessingSuccessStatus { get; set; }

    [DataMember]
    private Dictionary<object, bool> mProcessingSuccessDetails;

    static public TernaryWebServiceResponse Create<T>(Dictionary<T, bool> list)
    {
        var dc = new TernaryWebServiceResponse();
        dc.mProcessingSuccessDetails = new Dictionary<object, bool>();
        foreach (var pair in list)
        {
            dc.mProcessingSuccessDetails.Add((object)pair.Key, pair.Value);
        }
        return dc;
    }

    public Dictionary<T, bool> ProcessingSuccessDetails<T>()
    {
        return mProcessingSuccessDetails.ToDictionary(x => ((T)x.Key), x => x.Value);
    }

} 
```

# ruby-on-rails - 如何在 Rails 3 中将文件上传到没有 HTML 表单的 s3

> ID：13402101
> 
> 赞同：1
> 
> 时间：2012-11-15T16:36:51.893
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, amazon-s3, ruby-on-rails-3.2

我有一个应用程序，用户可以通过 Flash 播放器录制他们的声音，然后我从来自 Flash 播放器的字节数组字符串创建一个 mp3 文件。现在我想将 mp3 文件上传到 S3。任何人的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:33:05.390

您可以使用[aws-s3 gem](https://github.com/marcel/aws-s3)或[雾](http://fog.io/1.7.0/index.html)来处理此问题。

示例`aws-s3`：

```
AWS::S3::Base.establish_connection!(
  :access_key_id     => 'abc', 
  :secret_access_key => '123'
)

file = 'black-flowers.mp3'
S3Object.store(file, open(file), 'bucketname') 
```

有关 的示例`fog`，请参见[此处](http://fog.io/0.8.1/storage/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T17:33:50.723

要使用的 gem 是 aws-s3 0.6.2

```
AWS::S3::Base.establish_connection!(:access_key_id => 'key', :secret_access_key => 'secret_key') 
```

这将建立连接。您可以将 mp3 编写为，

```
AWS::S3::S3Object.store('my_mp3s/name.mp3', open(Rails.root.join('tmp', 'old.mp3'), 'bucket_name') 
```

第一个参数是您要在存储桶中存储 mp3 的位置，第二个参数是实际文件内容，第三个参数是您要存储的实际存储桶

# android - 正在调用 ContentProvider 的查询方法

> ID：13402102
> 
> 赞同：1
> 
> 时间：2012-11-15T16:36:52.310
> 
> 标签：android, android-contentprovider

我有一个带有 Fragments 和 ContentProvider 的 Activity。出于某种原因，我的 ContentProvider 的查询方法从未被调用过——我已经在 Eclipse 调试器中验证了这一点。这是我的相关片段代码：

```
public class ListFrag extends ListFragment implements LoaderManager.LoaderCallbacks<Cursor> {
private SimpleCursorAdapter mAdapter;
@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

    Intent myData = getActivity().getIntent();
    Bundle info = myData.getExtras();

    String[] dataColumns = { "stitchname" };
    int[] viewIDs = { R.id.stitchlist1 };
    mAdapter = new SimpleCursorAdapter(getActivity(), R.layout.stitchlist, null, dataColumns, viewIDs, 0);
    setListAdapter(mAdapter);
    getLoaderManager().initLoader(0, info, (LoaderCallbacks<Cursor>) this); 

}
}
@Override
public Loader<Cursor> onCreateLoader(int id, Bundle args) {
    String selection = "stitchlevel=?";
    String[] selectionArgs = new String[] {args.getString("Level")};
    return (Loader<Cursor>) new CursorLoader(getActivity(), STITCHES_URI,
            PROJECTION, selection, selectionArgs, null);    
} 
```

这是相关的 ContentProvider 查询。SQLData 是我的 SQLiteDatabase：

```
public class StitchProvider extends ContentProvider {
private static final String STITCHTABLE_BASEPATH = "MyStitches_tbl";
public static final int STITCHES = 100;
public static final int STITCHES_ID = 110;
private SQLData mDB;
@Override
public Cursor query(Uri uri, String[] projection, String selection,
        String[] selectionArgs, String sortOrder) {
    SQLiteQueryBuilder queryBuilder = new SQLiteQueryBuilder();
    queryBuilder.setTables(STITCHTABLE_BASEPATH);
    int uriType = sURIMatcher.match(uri);
    switch (uriType)
    {
    case STITCHES_ID:
        queryBuilder.appendWhere(SQLData.KEY_ROWID + "=" + uri.getLastPathSegment());
        break;
    case STITCHES:
        //no filter
        break;
    default:
        throw new IllegalArgumentException("Unknown URI");
    }
    Cursor cursor = queryBuilder.query(mDB.getReadableDatabase(), projection, selection, selectionArgs, null, null, sortOrder);
    cursor.setNotificationUri(getContext().getContentResolver(), uri);
    return cursor;
}
private static final UriMatcher sURIMatcher = new UriMatcher(UriMatcher.NO_MATCH);
static {    
    sURIMatcher.addURI(AUTHORITY, STITCHTABLE_BASEPATH, STITCHES);    
    sURIMatcher.addURI(AUTHORITY, STITCHTABLE_BASEPATH + "/#", STITCHES_ID);
    }
} 
```

关于为什么永远不会调用此查询方法的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-07T07:39:00.133

正如@nandeesh 在评论中提到的，通过在清单文件中声明您的提供者来解决这个问题。

它应该在表格上：

```
<manifest>
    ...
    <application>
        <activity>...</activity>

    ...
    <provider ... />

    </application>
</manifest> 
```

我能够在我的项目中重现该问题。我希望它可以被检测为某种警告。但是如果有人遇到查询没有被调用，在我的例子中，并不是所有的 ContentProvider 接口方法都被调用过，这是因为我还没有在 Manifest 文件中声明提供者。

我希望这对将来的其他人有所帮助。

# asp.net - ASP.NET 应用程序正在显示美国日期格式

> ID：13402104
> 
> 赞同：2
> 
> 时间：2012-11-15T16:36:55.070
> 
> 标签：asp.net, iis, windows-7, date-formatting

*我的一个*开发应用程序今天开始显示美式格式的短日期，而我期待英式格式。

日期正在使用`date.ToShortDateString()`

我已经检查了我的区域设置、键盘设置、浏览器设置和 web.config。这些都设置为英语（英国）或未更改。我也重启了好几次。

同一应用程序的移动版本，从同一开发服务器和同一网站（不同的 Web 应用程序）运行正常。

环境：

*   视窗 7 64 位
*   Visual Studio 2010 专业版
*   IIS 7.5

还可以在哪些地方更改可能影响日期显示的区域设置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T16:42:05.547

Windows 区域设置不会影响任何网站，除非网站被编程为从**浏览器首选语言**获取区域设置并将其应用于 ASP 站点

使用`globalization`选项中的`web.config`

```
<globalization culture="es-AR" uiCulture="es" /> 
```

**或者**

`global.aspx` `Application_BeginRequest`在方法中设置值

```
Sub Application_BeginRequest(ByVal sender As Object, ByVal e As EventArgs)
    Dim lang As String = "es"
    If HttpContext.Current.Request.Path.Contains("/en/") Then
        lang = "en"
    ElseIf HttpContext.Current.Request.Path.Contains("/pt/") Then
        lang = "pt"
    ElseIf HttpContext.Current.Request.Path.Contains("/es/") Then
        lang = "es"
    End If
    Thread.CurrentThread.CurrentUICulture = CultureInfo.GetCultureInfo(lang)
    Thread.CurrentThread.CurrentCulture = CultureInfo.CreateSpecificCulture(lang)
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T16:41:02.770

来自 MSDN

> 当前 DateTime 对象的值使用与当前线程区域性关联的 DateTimeFormatInfo.ShortDatePattern 属性定义的模式进行格式化。返回值与使用 ToString(String) 方法指定“d”标准 DateTime 格式字符串所返回的值相同。

您是否尝试过更改当前线程的文化？这也可以按页面设置 - [http://msdn.microsoft.com/en-us/library/bz9tc508%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/bz9tc508%28v=vs.85%29.aspx)。

# sql - 创建嵌套存储过程调用以将统一的结果集发送到实体框架

> ID：13402108
> 
> 赞同：1
> 
> 时间：2012-11-15T16:37:04.077
> 
> 标签：sql, sql-server, entity-framework, tsql, asp.net-mvc-4

我正在将 Web 表单项目转换为 ASP.NET MVC 4 项目。

在这个项目中，我们的 .NET 团队不允许修改现有的存储过程，最多允许我们为这个存储过程编写一个包装器。即我们可以创建另一个存储过程来调用现有的存储过程。

现有的存储过程属于以下类型

```
condition 1
  Select A,B,C,D from Table
condition 2
  Select ErrorCode as 100, ErrorMessage as 'Correct that'
condition 3
  Select ErrorCode as 101, ErrorMessage as 'Correct this'
condition 4
  Select ErrorCode as 102, ErrorMessage as 'Not found' from Table 
```

我在这个项目中使用实体框架，它需要预先映射一个复杂类型，因此对于上述类型的存储过程，我已将复杂类型声明为

```
Complex Type :- SomeComplexType

    string A;
    string B;
    string C;
    string D;

    int ErrorCode;
    string ErrorMessage; 
```

现在我的**问题**是缺乏 SQL 知识和语法，我在 google 和 SO 上搜索了很多，但在这方面找不到任何东西。

我想知道如何围绕这个现有的存储过程创建一个包装器，如下所示。

```
condition 1
  Select A,B,C,D,ErrorCode as NULL, ErrorMessage as NULL from Table
condition 2
  Select A,B,C,D,ErrorCode as 100, ErrorMessage as 'Correct that' from Table
condition 3
  Select A,B,C,D,ErrorCode as 101, ErrorMessage as 'Correct this' from Table
condition 4
  Select A as NULL, B as NULL, C as NULL, D as NULL,ErrorCode as 102, ErrorMessage as 'Not found' from Table 
```

因此，如果我能够从 SQL 发送数据，如上所示，我可以使用 Entity Framework 的函数导入和复杂类型轻松处理它。

**如何检查（在包装存储过程中）返回的结果集（从现有存储过程中）？**

请指导我对此的想法。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:47:32.160

编辑：旧帖子没有帮助，添加更多信息只是为了帮助搜索：

好的，我google了一下，我真的找不到任何方法来解决你的问题；虽然我发现了一些有用的链接：

[如何在存储过程之间共享数据并将存储过程](http://www.sommarskog.se/share_data.html) 的 [结果插入到临时表中](https://stackoverflow.com/questions/653714/how-to-select-into-temp-table-from-stored-procedure)

我希望第二个有用，但是当我尝试时，`OPENROWSET`我得到了这个错误：

> 无法确定元数据，因为过程 'testSP' 中的语句 'SELECT '1','2','3'' 与过程 'testSP' 中的语句 'SELECT 100,200' 不兼容。

所以我想这不是正确的方法。

现在，我剩下的唯一想法是：

*   重写旧的 SP 而不是构建一个包装器
*   你能找到一种方法来根据输入值确定返回的结果集吗？如果可能的话，您可以使用 if / else 为临时表选择适当的列，您将在其中插入数据，然后构建复杂的数据类型

很抱歉我帮不上忙

编辑（再次）：

第一个[链接](http://www.sommarskog.se/share_data.html)说（在 CLR 章节）：

> 回顾一下，以下是 INSERT-EXEC 失败的主要情况，您需要求助于 CLR：
> 
> 被调用的过程返回几个具有不同结构的结果集。SQL Server 中的许多系统过程都是如此。

所以我建议你阅读这一[章](http://www.sommarskog.se/share_data.html#CLR)，也许它会有用

# image - 如何在 ASP 更新面板中使用 Telerik RadAsyncUpload 和 RadBinaryImage 预览上传的图像？

> ID：13402111
> 
> 赞同：3
> 
> 时间：2012-11-15T16:37:09.360
> 
> 标签：image, telerik, updatepanel, radupload

我在 asp.net 中有一个 Web 表单，在 Asp 更新面板中包含一个 RadAsyncfileupload 和一个 RadBinaryImage，如下所示

```
<body>
    <form id="form1" runat="server">
     <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>
    <div>

    <asp:UpdatePanel runat="server">

<ContentTemplate>

    <telerik:RadAsyncUpload ID="RadAsyncUpload1" runat="server">
    </telerik:RadAsyncUpload>
    <telerik:RadBinaryImage ID ="RadBinaryImage1" runat ="server" Width= "100px" Height="100px"/>
</ContentTemplate>
</asp:UpdatePanel>
</div>
</form>
</body> 
```

在后面的代码中

```
 protected void RadAsyncUpload1_FileUploaded(object sender, Telerik.Web.UI.FileUploadedEventArgs e)
        {
            if (RadAsyncUpload1.UploadedFiles.Count == 1)
            {
                byte[] image;
                long fileLength = RadAsyncUpload1.UploadedFiles[0].InputStream.Length;
                image = new byte[fileLength];
                RadAsyncUpload1.UploadedFiles[0].InputStream.Read(image, 0, image.Length);
                RadBinaryImage1.DataValue = image;

            }

        } 
```

但是在运行时程序控制器不会触发 RadAsyncUpload1_FileUploaded 事件我已经搜索了 Telerik 论坛，发现我应该对脚本管理器做一些事情，但我需要一些帮助来了解如何做到这一点，原因是为了触发这个事件整个页面应该发布无论如何，一些脚本可以帮助我或任何其他方式！提到我需要图像的字节数组将其保存在数据库中。在此先感谢 Saeed Soleimanifar

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T05:52:17.880

[http://demos.telerik.com/aspnet-ajax/asyncupload/examples/persistuploadedfiles/defaultvb.aspx?#qsf-demo-source](http://demos.telerik.com/aspnet-ajax/asyncupload/examples/persistuploadedfiles/defaultvb.aspx?#qsf-demo-source)

我只是通过使用它添加了相同的功能，如果您发现任何问题，请告诉我......或者这是具有魔力的部分

页面来源：

```
<telerik:RadScriptBlock ID="RadScriptBlock1" runat="server">

    <script type="text/javascript">

        function updatePictureAndInfo() {

            __doPostBack('btnImgUpload', 'RadButton1Args');

        }

    </script>

</telerik:RadScriptBlock>

<telerik:RadBinaryImage runat="server" ID="imgBinaryPhoto" ImageUrl="~/Images/default-profile-pic.png"
                Width="100px" Height="100px" ResizeMode="Fit" AlternateText="No picture available"
                CssClass="preview"></telerik:RadBinaryImage>
            <br />
            <telerik:RadAsyncUpload ID="upldPhoto" runat="server" AllowedFileExtensions=".jpg,.png,.gif,jpeg,.tiff"
               MaxFileInputsCount="1" MultipleFileSelection="Disabled">
            </telerik:RadAsyncUpload>
            <asp:Button ID="btnImgUpload" runat="server" Text="Upload" CssClass="button" OnClientClick="updatePictureAndInfo(); return false;" /> 
```

代码背后：

```
Protected Sub FileUploaded() Handles upldPhoto.FileUploaded

        Dim bitmapImage As Bitmap = ResizeImage(upldPhoto.UploadedFiles(0).InputStream)
        Dim stream As System.IO.MemoryStream = New System.IO.MemoryStream()
        bitmapImage.Save(stream, System.Drawing.Imaging.ImageFormat.Bmp)
        imgBinaryPhoto.DataValue = stream.ToArray()

    End Sub 
```

# iphone - registerNib:forReuseidentifier 与自定义 UTTableViewCell 和 Storyboards

> ID：13402112
> 
> 赞同：8
> 
> 时间：2012-11-15T16:37:20.750
> 
> 标签：iphone, xcode, uitableview, customization, xib

我正在从自定义 TableViewCells 迁移`tableView:cellForRow:atIndexPath:`到使用自定义`UITableViewCell`子类。我是这样做的：

首先，创建空的 XIB，拖到`UITableViewCell`那里并放在`UILabel`上面。创建了一个类（的子类`UITableViewCell`）并在 Interface Builder 的属性编辑器中将该类设置为`MyCell`. 然后，在我的 TableViewController 中，输入以下内容：

```
- (void)viewDidLoad
{
 [super viewDidLoad];
 // load custom cell
 UINib *cellNIB = [UINib nibWithNibName:@"MyCell" bundle:nil];
 if (cellNIB)
 {
   [self.tableView registerNib:cellNIB forCellReuseIdentifier:@"MyCell"];
 } else NSLog(@"failed to load nib");
} 
```

之后，我清除了所有自定义代码，`tableView:cellForRow:atIndexPath:`只留下了默认行：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"MyCell";
    MyCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    return cell;
} 
```

当我运行这个时，我希望在每个单元格中看到一堆带有单个标签的单元格（我在创建 XIB 时放在中间的标签）。但相反，我看到的只是纯白色的空单元格，向 XIB 布局添加/删除组件并没有帮助。

我花了一天时间尝试不同的选项，例如在 Interface Builder 中为自定义单元格 XIB 设置重用标识符并在中加载视图`tableView:cellForRow:atIndexPath:`，但没有任何帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-15T16:37:20.750

...但事实证明，我唯一错过的是在我的故事板中为这个 TableViewController 清除原型单元格的重用标识符。似乎 Storyboard 稍后会初始化其视图/组件`viewDidLoad`，而不是采用我漂亮的自定义单元格，xCode 将真实的单元格视图设置为仅纯白色单元格，这是新创建的 TableViewControllers 的标准。

再说一遍：转到您的 TableView 属性并删除您之前设置的重用标识符；）

我为此花了很多时间，所以我想如果我在这里分享这段经历可能会对某人有所帮助。

# linux - Linux 服务器 | Tomcat 7.0 异常

> ID：13402116
> 
> 赞同：0
> 
> 时间：2012-11-15T16:37:32.340
> 
> 标签：linux, tomcat, centos, out-of-memory, jvm-crash

每次我必须重新启动服务器时，我都会经常遇到这些异常。例外情况是：

**异常：1** -> com.mysql.jdbc.exceptions.jdbc4.CommunicationsException：从服务器完全接收到的最后一个数据包成功是 61,316,033 毫秒前。最后一个成功发送到服务器的数据包是在 61,316,034 毫秒前。比服务器配置的“wait_timeout”值长。在您的应用程序中使用之前，您应该考虑过期和/或测试连接有效性，增加服务器为客户端超时配置的值，或者使用 Connector/J 连接属性“autoReconnect=true”来避免这个问题。

**异常：2** -> 线程“ajp-bio-8009-exec-106”中的异常 java.lang.OutOfMemoryError：PermGen 空间

**异常：3** -> VM 初始化期间发生错误无法为对象堆保留足够的空间无法创建 Java 虚拟机。

它们是`server specifications`：*1 GB RAM* | *1000 GB 带宽*

*`Please also give me tips on how to manage the RAM amongst the various applications on the server and how to self kill the process which are not in working now.`*根据我的研究，我认为进程不会被杀死，并且一旦分配给它们的内存不会刷新并与该进程对齐，直到服务器重新启动。所以请帮我解决这个问题。

> 我将不胜感激！

感谢和问候罗梅尔耆那教

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:44:56.440

对于 permgen 空间错误，也许云你添加一些 jvm 选项（或 CATALINA_OPTS），如下所示：

`-XX:MaxPermSize=256m -XX:+CMSClassUnloadingEnabled`

*   `XX:MaxPermSize`: 永久空间大小
*   `XX:+CMSClassUnloadingEnabled`: 允许 jvm 卸载未使用的类定义

[我在这里](http://curiositedevie.blogspot.fr/2009/05/tomcat-et-la-fameuse-outofmemoryerror.html)的一篇旧法语帖子中谈论了这个错误

# grep - 如何 grep 和执行命令（对于每个匹配项）

> ID：13402119
> 
> 赞同：50
> 
> 时间：2012-11-15T16:37:42.353
> 
> 标签：grep

如何在一个文件中grep并为每个匹配执行一个命令？

文件：

```
foo
bar
42
foo
bar 
```

例如，我想`date`为每场比赛执行`foo`.

以下尝试不起作用：

```
grep file foo | date %s.%N 
```

怎么做？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-11-15T16:39:00.183

```
grep file foo | while read line ; do echo "$line" | date %s.%N ; done 
```

在脚本中更具可读性：

```
grep file foo | while read line
do
    echo "$line" | date %s.%N
done 
```

对于每一行输入，`read`将值放入变量`$line`中，`while`语句将执行和之间的循环`do`体`done`。由于该值现在位于变量中而不是标准输入中，因此我曾经将`echo`其推回标准输入中，但您可以这样做`date %s.%N "$line"`，假设 date 以这种方式工作。

避免使用`for line in `grep file foo``which is similar，因为`for`总是在空格处中断，这成为读取文件列表的噩梦：

```
 find . -iname "*blah*.dat" | while read filename; do .... 
```

会失败`for`。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-12-02T14:30:58.777

你真正需要的是一个**xargs**命令。[http://en.wikipedia.org/wiki/Xargs](http://en.wikipedia.org/wiki/Xargs)

```
grep file foo | xargs date %s.%N 
```

在 Cygwin 环境中匹配某些文件并将匹配项转换为完整 windows 路径的示例

```
$ find $(pwd) -type f -exec ls -1 {} \; | grep '\(_en\|_es\|_zh\)\.\(path\)$' | xargs cygpath -w 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-10-30T19:30:16.087

```
grep command_string file | sh - 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-05-22T05:13:05.343

linux 中有一个有趣的命令：**`xargs`**它允许您使用上一个命令（grep、ls、find 等）的输出作为自定义执行的输入，但有几个选项允许您甚至执行自定义并行命令。下面是一些例子：

根据您的问题，以下是如何为file.txt 中的每个“ **foo ”匹配打印格式为“** **%s.%N ”的日期：**

 **```
grep "foo" file.txt | xargs -I {} date +%s.%N 
```

一个更有趣的用途是为每个匹配创建一个文件，但在这种情况下，如果匹配相同，则该文件将被覆盖：

```
grep "foo" file.txt | xargs -I {} touch {} 
```

如果您想将自定义日期连接到创建的文件

```
grep "foo" file.txt | xargs -I {} touch "{}`date +%s.%N`" 
```

想象匹配是文件名，您想对它们进行备份：

```
grep "foo" file.txt | xargs -I {} cp {} "{}.backup" 
```

最后对于 xargs 使用 backupName 中的自定义日期

```
grep "foo" file.txt | xargs -I {} cp {} "{}`date +%s.%N`" 
```

**有关xargs**并行执行等选项的更多信息，请访问：[https](https://en.wikipedia.org/wiki/Xargs) ://en.wikipedia.org/wiki/Xargs和日期格式：[https ://www.thegeekstuff.com/2013/05/date-command-examples/](https://www.thegeekstuff.com/2013/05/date-command-examples/)

额外我发现在这种情况下也有一个正常的命令有用它更简单但不太通用下面是上述示例的等价物：

```
for i in `grep "foo" test.txt`; do date +%s.%N; done
for i in `grep "foo" test.txt`; do touch ${i}; done
for i in `grep "foo" test.txt`; do touch "${i}`date +%s.%N`"; done
for i in `grep "foo" test.txt`; do cp ${i} "${i}.backup2"; done
for i in `grep "foo" test.txt`; do cp ${i} "${i}.backup2`date +%s.%N`"; done 
```

玩得开心！！！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-24T08:50:20.760

```
 grep search_string files_to_search | sh 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-05T09:49:10.810

grep 可能需要`--line-buffered`在匹配时发出每个匹配行的选项，否则它会在打印匹配行之前缓冲多达 4K 字节，这会破坏这里的目标，例如

```
tail -f source | grep --line-buffered "expression | xargs ... 
```**

# c++ - C++中的双重继承运行时错误

> ID：13402121
> 
> 赞同：0
> 
> 时间：2012-11-15T16:37:51.790
> 
> 标签：c++, oop, inheritance

运行包含以下类的项目时出现运行时错误：
`Shape`-抽象
`Polygon :public Shape`-抽象
`Triangle :public Polygon`-普通类

我创建了一个`vector<Shape*> shapes`，当我在我的代码中尝试时：

```
shapes[i] = new Triangle(****); 
```

我有运行时错误。
它与双重继承有关还是我的代码中有问题？
因为我也去上课了`Circle :public Shape`，什么时候做

```
shapes[i] = new Circle(*****); 
```

一切正常..

**编辑：**
正如`vector<Shape*> shapes;`你们大多数人所猜测的那样。
我没有超出我已将其更改为的 voctor 的边界`.push_back(new Circle())`，它仍然只是崩溃。

我得到的运行时错误没有显示任何错误代码，它只是关闭了 exe 文件。

形状绝对是抽象的，因为我所有的方法都是*纯虚拟* 的，就像多边形一样。
我已经制作了自己的构造函数（在 Shape 和 Polygon 中），但它们什么都不做，只是空白范围以防止默认构造函数出现问题。

**形状.h**

```
#include "Point.h"

    class Shape  
    {  
    public:  
        Shape();  

        //Methods
        virtual double get_Perimeter() = 0; //Returns shape's perimeter
        virtual double get_Area() = 0; //Returns shape's area
        virtual void move(point p) = 0; //Moves the shape
    }; 
```

**形状.cpp**

```
#include "Shape.h"

shape :: Shape()
{
} 
```

**多边形.h**

```
#include "Point.h"
#include "Shape.h"
#include <vector>
using namespace std;

class Polygon :public Shape
{
protected:
    //Fields
    vector<point> points; //Vector of the polygon's points

public:
    //Constructors
    Polygon();

    //Methods
    virtual int getNumOfPoints() = 0; //Returns number of points
    virtual vector<double> get_Sides() = 0; //Returns vector of side's length
    virtual vector<point> get_Points() = 0; //Returns vector of points

    virtual double get_Perimeter() = 0; //Returns shape's perimeter
    virtual double get_Area() = 0; //Returns shape's area
    virtual void move(point p) = 0; //Moves the shape
}; 
```

**多边形.h**

```
#include "polygon.h"
polygon :: polygon()
{
} 
```

**点.h**

```
class point
{
protected:
    //Fields
    double x; //the X value of point
    double y; //the Y value of point

public:
    //Constructors
    point(double x, double y); //Creates new point with given params
    point(const point &other); //Creates new point with other point's params

    //Methods
    double get_X() const; //Returns X field
    double get_Y() const; //Returns Y field
    void move(int dx, int dy); //Adds given params to current params
    void move(point p); //Adds p's params to current params
}; 
```

**主文件**

```
vector<shape*> shapes;

    //Creating new tirangle
    point* p1 = new point(1,1);
    point* p2 = new point(5,1);
    point* p3 = new point(3,4);
    shapes.push_back(new triangle(*p1,*p2,*p3)); 
```

**三角形.h**

```
#include "point.h"
#include "polygon.h"
#include <vector>
using namespace std;

class triangle :public polygon
{

public:
    //Constructors
    triangle(point p1, point p2, point p3); //Creates new triangle with given params
    triangle(const triangle &other); //Copies other's params to new triangle

    //Methods
    point get_P1() const; //Returns p1
    point get_P2() const; //Returns p2
    point get_P3() const; //Returns p3

    int getNumOfPoints(); //Returns number of points
    vector<double> get_Sides(); //Returns vector of side's length
    vector<point> get_Points(); //Returns vector of points

    double get_Perimeter(); //Returns shape's perimeter
    double get_Area(); //Returns shape's area
    void move(point p); //Moves the shape
}; 
```

**三角形.cpp**

```
#include "triangle.h"
#include <cmath>

    //Constructors
    triangle :: triangle(point p1, point p2, point p3)
    {
        points[0] = p1;
        points[1] = p2;
        points[2] = p3;

    }
    triangle :: triangle(const triangle &other)
    {
        points[0] = other.get_P1();
        points[1] = other.get_P2();
        points[2] = other.get_P3();
    }

    //Methods
    point triangle :: get_P1() const
    {
        return points[0];
    }
    point triangle :: get_P2() const
    {
        return points[1];
    }
    point triangle :: get_P3() const
    {
        return points[2];
    }

    int triangle :: getNumOfPoints()
    {
        return points.size();
    }
    vector<double> triangle :: get_Sides()
    {
        vector<double> sides;
        sides[0] = sqrt(pow(points[0].get_X()-points[1].get_X(),2)+pow(points[0].get_Y()-points[1].get_Y(),2));
        sides[1] = sqrt(pow(points[1].get_X()-points[2].get_X(),2)+pow(points[1].get_Y()-points[2].get_Y(),2));
        sides[2] = sqrt(pow(points[2].get_X()-points[0].get_X(),2)+pow(points[2].get_Y()-points[0].get_Y(),2));
        return sides;
    }
    vector<point> triangle :: get_Points()
    {
        return points;
    }

    double triangle :: get_Perimeter()
    {
        vector<double> sides = this->get_Sides();
        return sides[0]+sides[1]+sides[2];
    }
    double triangle ::get_Area() //By Heron's Formula
    {
        vector<double> sides = this->get_Sides();
        double area = this->get_Perimeter()/2;
        double tmp = area;
        for(int i=0;i<3;i++)
            area*=(tmp-sides[i]);
        return sqrt(area);

    }
    void triangle :: move(point p)
    {
        for(int i=0;i<3;i++)
        {
            points[i].move(p);
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T16:40:14.610

向量只能存储相同类型的对象。你需要的是一个拥有*指针*的容器：

```
#include <vector>
#include <memory>

std::vector<std::unique_ptr<Shape>> shapes;

shapes.emplace_back(new Triangle);
shapes.emplace_back(new Circle); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T16:47:26.423

基本上是Kerres所说的。只是在类似情况下可能相关的附加说明。

如果您的`Shape`课程不是抽象的并且您使用

```
std::vector<Shape> shapes; 
```

那么这个

```
shapes[i] = Circle(***); 
```

将是有效的，但你的对象会被切片！这意味着，进一步派生类中的所有信息都将丢失。这是一个重要的事实要记住！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T17:00:30.740

问题是构造函数`triangle`：

```
triangle :: triangle(point p1, point p2, point p3)
{
    points[0] = p1;
    points[1] = p2;
    points[2] = p3;
} 
```

这会尝试写入空向量的元素；`[]`如果向量足够大，您只能用于访问向量元素。您应该使用`push_back()`来增长向量：

```
points.push_back(p1);
points.push_back(p2);
points.push_back(p3); 
```

或者，如果您可以使用 C++11，则从初始化列表中分配：

```
points = {p1, p2, p3}; 
```

复制构造函数也是如此；尽管根本没有必要声明复制构造函数，因为隐式生成的构造函数将正确复制点向量。

稍微偏离主题，如果您使用原始指针容器来管理对象生命周期，请非常小心：在不删除对象的情况下意外删除指针非常容易，从而导致内存泄漏。我建议使用智能指针。

还有一个潜在的问题：`Shape`没有虚拟析构函数，这意味着你不能删除向量中的任何形状；这样做可能会导致崩溃。你应该：

```
virtual ~Shape() {} 
```

# c# - 不连接数据库的水晶报表图表

> ID：13402126
> 
> 赞同：0
> 
> 时间：2012-11-15T16:38:07.250
> 
> 标签：c#, crystal-reports, sql-server-2008-r2, asp.net-charts

我设计了一个表格，并使用表格上的条形图来显示在特定年份（例如 2009 年）在特定项目（护理）中遇到特定问题（例如家庭问题）的学生人数。我设计了其他所有东西来从数据库中获取总数并将其显示在条形图上。我可以在表单上实现这一点，但我必须生成报告并在报告上显示相同的条形图。我的问题是我可以在不连接数据库的情况下实现这一点吗？如果是，那么太棒了，但是如何？提前致谢。

下面的代码是 3 年内在特定项目中有问题（家庭问题、吸毒者等）的学生总数的条形图代码。

```
 public void calculateStatsFor3Years(int year1, int year2, int year3)
    {
         //count the number of students in with intervention in particular program in a year

        intervention.Classes.Programs objPrograms = new intervention.Classes.Programs();

        List<int> programCodeList = objPrograms.GetProgramCode();

        List<int> numStudentsYear1 = new List<int>();
        List<int> numStudentsYear2 = new List<int>();
        List<int> numStudentsYear3 = new List<int>();

        int temp1 = 0;
        int temp2 = 0;
        int temp3 = 0;

        for (int counter = 0; counter < programCodeList.Count; counter++)
        {

            temp1 = Convert.ToInt32(objControllerClass.get_students_intervention_particular_year_program(year1, programCodeList.ElementAt(counter)));

            numStudentsYear1.Add(temp1);

            temp2 = Convert.ToInt32(objControllerClass.get_students_intervention_particular_year_program(year2, programCodeList.ElementAt(counter)));

            numStudentsYear2.Add(temp2);

            temp3 = Convert.ToInt32(objControllerClass.get_students_intervention_particular_year_program(year3, programCodeList.ElementAt(counter)));

            numStudentsYear3.Add(temp3);

        }//for 

        int[] yValues0 = numStudentsYear1.ToArray();//2011-2012
        int[] yValues1 = numStudentsYear2.ToArray();//2010-2011
        int[] yValues2 = numStudentsYear3.ToArray();//2009-2010 

        string[] xNameSeries0 = { "Agent immobilier", "Mécanique du bâtiment", "Gestion des eaus ", "Soins infirmiers ", "Anglais ", "Comtabilité et gestion ", "Bureautique ", "Architecture et gestion de réseau ", "Programmeur web ", "Assurance de dommages ", "O'Bois ", "Éducation à l'enface ", "Francisation " };

        myBarChart.Series[0].Points.DataBindXY(xNameSeries0, yValues0);
        myBarChart.Series[1].Points.DataBindXY(xNameSeries0, yValues1);
        myBarChart.Series[2].Points.DataBindXY(xNameSeries0, yValues2);

        //legend text
        myBarChart.Series[0].LegendText = year1.ToString();
        myBarChart.Series[1].LegendText = year2.ToString();
        myBarChart.Series[2].LegendText = year3.ToString();

    }//calculateStatsFor3Years() 
```

这是我需要在 Crystal Reports 中显示的水平图的屏幕截图。

[http://i1342.photobucket.com/albums/o765/CSharpJunior/C%20Sharp%20project/horizo​​ntalGraph.jpg](http://i1342.photobucket.com/albums/o765/CSharpJunior/C%20Sharp%20project/horizontalGraph.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T09:31:36.013

这个有可能。最好的方法可能是使用数据集。我经常提到人们：[http ://csharp.net-informations.com/crystal-reports/csharp-crystal-reports-without-database.htm](http://csharp.net-informations.com/crystal-reports/csharp-crystal-reports-without-database.htm)

```
using System;
using System.Windows.Forms;
using CrystalDecisions.CrystalReports.Engine;
using CrystalDecisions.Shared;
using System.Data;

namespace WindowsApplication1
{
    public partial class Form1 : Form
    {

        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            DataSet1 ds = new DataSet1();
            DataTable t = ds.Tables.Add("Items");
            t.Columns.Add("id", Type.GetType("System.Int32"));
            t.Columns.Add("Item", Type.GetType("System.String"));

            DataRow r ;
            int i = 0;
            for (i = 0; i <= 9; i++)
            {
                r = t.NewRow();
                r["id"] = i;
                r["Item"] = "Item" + i;
                t.Rows.Add(r);
            }

            CrystalReport1 objRpt = new CrystalReport1();
            objRpt.SetDataSource(ds.Tables[1]);
            crystalReportViewer1.ReportSource = objRpt;
            crystalReportViewer1.Refresh(); 
        }
    }
} 
```

# sql - 如何在以下条件下手动在 SQL Server 中插入数据

> ID：13402142
> 
> 赞同：0
> 
> 时间：2012-11-15T16:39:05.270
> 
> 标签：sql, sql-server, database

我`Identity Increment`在一个表中设置了主键，现在我想在 SQL Server 的 GUI 环境下插入数据。

但是，主键列现在是只读的，我无法编辑它。

有什么想法可以解决这个问题吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:49:37.353

只需保持主键字段不变，SQL Server 就会为您生成数据。

# quickfix - 在 FIX 字典中添加用户定义的字段

> ID：13402144
> 
> 赞同：12
> 
> 时间：2012-11-15T16:39:10.383
> 
> 标签：quickfix, fix-protocol

我需要在 FIX4.4 字典中添加/修改字段。我还没有找到任何有用的文档或教程。

我猜我必须修改 FIX44.xml 文件，但我不确定该怎么做。在`<message></message>`标签中，我看不到任何定义该字段的数字或类型（格式）的属性。我只看到`name`and`required`属性。

`<fields></fields>`我想我找到了我在标签中寻找的属性。

我不确定我是否在寻找正确的地方或者我是否在做正确的事情，但根据[这个](http://b2bits.blogspot.ro/2011/02/fix-protocol-and-user-defined-fields-in.html)我应该在必要时修改字典。

请帮忙。一个可以帮助我的初学者教程的链接也将不胜感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-20T16:13:54.753

QuickFIX 中的 FIX 数据字典包含消息和字段（以及其他内容）。

要添加消息，您必须在`<messages></messages>`标签之间添加消息，如下所示：

```
<message name="CoolMessage" msgcat="app" msgtype="xCM">
    <field name="Currency" required="N"/>
    <field name="Text" required="N"/>
    <field name="Account" required="Y"/>
</message> 
```

然后将新的添加`msgtype`到`MsgType`该部分的字段中，`<fields></fields>`如下所示：

```
<field number='35' name='MsgType' type='STRING'>
    ...
    <value enum='xCM' description='COOLMESSAGE'/>
</field> 
```

如果要添加新字段，只需在`<fields></fields>`标签之间添加它们，如下所示：

```
<fields>
    <field number="1" name="Account" type="STRING"/>
    <field number="2" name="AdvId" type="STRING"/>
    <field number="3" name="AdvRefID" type="STRING"/>
    ...
    <field number="9006" name="AwesomeField" type="STRING"/>
</fields> 
```

可以在[本](http://www.quickfixn.org/tutorial/custom-fields-groups-and-messages)教程中找到此信息和更多信息。

# jakarta-ee - Arquillian ContiPerf 集成

> ID：13402147
> 
> 赞同：1
> 
> 时间：2012-11-15T16:39:14.880
> 
> 标签：jakarta-ee, automated-tests, performance-testing, jboss-arquillian, contiperf

我已经成功地在 ContiPerf 2 上开发了一个玩具单元测试。当我尝试在 Arquillian 单元测试上做同样的事情时，ContiPerf 注释`@PerfTest`似乎不起作用，而注释却`@Required`很好。我的测试课看起来像

```
@RunWith(Arquillian.class)
public class PerformanceFacadeBeanTest {

    @Rule
    public ContiPerfRule i = new ContiPerfRule();

    @EJB
    private PerformanceFacadeRemote performanceRemote;

    @Deployment
    public static Archive<EnterpriseArchive> createArchive() {
        ...
    }

    @Test
    @InSequence(value=1)
    @PerfTest(invocations = 100, threads = 5)
    @Required(max = 1200, average = 250)
    public void testPerformanceOnCacheLocal() {
    testPerformanceOnCache(performanceLocal);
    }

    private void testPerformanceOnCache(PerformanceFacade performanceFacade) {
    performanceFacade.performOnCache();
    }
} 
```

我得到的例外是

```
org.databene.contiperf.PerfTestExecutionError: org.junit.internal.runners.model.MultipleFailureException: There were 2 errors:
  java.lang.NullPointerException(null)
  java.lang.NullPointerException(null)
    at org.databene.contiperf.util.ContiPerfUtil.executionError(ContiPerfUtil.java:66)
    at org.databene.contiperf.junit.JUnitInvoker.invoke(JUnitInvoker.java:54)
    at org.databene.contiperf.util.InvokerProxy.invoke(InvokerProxy.java:46)
    at org.databene.contiperf.PerformanceTracker.invoke(PerformanceTracker.java:97)
    at org.databene.contiperf.CountRunner.run(CountRunner.java:52)
    at java.lang.Thread.run(Thread.java:722) 
```

有什么想法吗？如果需要，我可以发布我的 pom.xml。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:25:56.513

目前，您不能将 ContiPerf2 与 Arquillian 一起使用。目前，Arquillian 使用`ThreadLocal`ContiPerf 规则生成的线程无法使用的实例进行记账。因此，`NullPointerException`由于 Arquillian 测试运行程序可能无法在除一个线程之外的所有线程中找到 ThreadLocal 实例。Arquillian 的这种行为可能会在未来的版本中改变；但在该领域没有任何承诺。

我现在建议使用[JUnitBenchmarks](http://labs.carrotsearch.com/junit-benchmarks.html)，因为据报道它可以通过自定义 Arquillian 扩展正常工作。

# html - 在 web2py 中使用静态文件加载

> ID：13402152
> 
> 赞同：1
> 
> 时间：2012-11-15T16:39:32.290
> 
> 标签：html, css, include, web2py

在 Web2py 中，我正在创建一些电子邮件模板，并希望将标签与我的 css 文件加载到视图中。如何在视图中使用 LOAD 函数，以便它不使用 jquery，因为它是一封电子邮件并从静态、css、base.css 中提取。这就是我现在所拥有的：

```
<link href="{{=URL('static', 'css/style.css', scheme='http')}}" rel="stylesheet" type="text/css" /> 
```

但这需要加载远程内容，并且大多数电子邮件应用程序禁用此加载。我想这样做：

```
{{=LOAD(url=URL('static', 'css/style.css', scheme='http'),ajax=False)}} 
```

但它正在返回这个：

```
<script type="text/javascript"><!--
web2py_component('http://127.0.0.1:8000/iid_app/static/css/web2py.css','c382784163112');
//--></script><div id="c382784163112">loading...</div>
<script type="text/javascript"><!--
web2py_component('http://127.0.0.1:8000/iid_app/static/css/style.css','c3845864949');
//--></script><div id="c3845864949">loading...</div> 
```

关于如何做到这一点的任何想法只包括文件中的测试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T17:00:35.197

如果您想在电子邮件模板中包含 CSS 文件的内容，只需将以下内容添加到您希望包含 CSS 的模板中：

```
{{include '../static/css/styles.css'}} 
```

该`{{include}}`指令查找相对于应用程序的“views”文件夹包含的模板，因此“../”在文件夹结构中从那里上升一级，从那时起，您只需指定文件的路径你想包括。

# r - R中的缩放维恩图

> ID：13402154
> 
> 赞同：3
> 
> 时间：2012-11-14T16:02:07.987
> 
> 标签：r, data-visualization

我正在尝试使用以下函数绘制 3 组交集的维恩图：

```
 library(VennDiagram)
    draw.triple.venn(10,5,4,2,3,1,1,ind=TRUE,scaled=TRUE). 
```

在 Quartz 窗口中，我收到 3 个相同的圆圈（大小都相同）。缩放去哪儿了？经过几个小时的尝试，我想知道这是否是一个错误，或者我的绘图区域的先前设置是否允许它（我关闭并重新打开了 Quartz 窗口几次）。输出值为：

```
 (polygon[GRID.polygon.1498], polygon[GRID.polygon.1499], polygon[GRID.polygon.1500], polygon[GRID.polygon.1501], polygon[GRID.polygon.1502], polygon[GRID.polygon.1503], text[GRID.text.1504], text[GRID.text.1505], text[GRID.text.1506], text[GRID.text.1507], text[GRID.text.1508], text[GRID.text.1509], text[GRID.text.1510], text[GRID.text.1511], text[GRID.text.1512]) 
```

任何帮助或提示将不胜感激。我在网上看到的所有示例都已按比例描绘。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:16:57.867

根据手册，缩放仅适用于*某些*配置。一个例子是

```
draw.triple.venn(1,2,3,0,0,0,0) 
```

另一方面，查看该函数的源代码，似乎根本没有使用该参数。事实上，传递`scale=FALSE`给上面的命令仍然会产生缩放的圆圈。

因此，对于当前的源代码，您似乎无法控制缩放，无论哪种方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T19:29:53.153

在许多情况下，比例参数被忽略。这是另一个未按比例绘制的示例

```
venn.plot <- draw.triple.venn(1883,598,2151,218,221,611,95, c("AL", "RL", "R"),scale=TRUE) 
```

我改用了这个.jar： [http ://www.cs.kent.ac.uk/people/staff/pjr/EulerVennCircles/EulerVennApplet.html](http://www.cs.kent.ac.uk/people/staff/pjr/EulerVennCircles/EulerVennApplet.html)

# xml - 带有 wfs:transaction/insert-request 的 xml 无法针对 WFS xsd-schema 进行验证

> ID：13402156
> 
> 赞同：0
> 
> 时间：2012-11-15T16:39:47.790
> 
> 标签：xml, xsd, openlayers, gml-geographic-markup-lan

我要解决的问题与 OpenLayers 和 TinyOWS 之间的交互有关，即插入新功能，但我不会在此处发布任何 Javascript 代码或 TinyOWS 配置，因为它们与 xml 验证问题无关。我试图尽可能地隔离问题。这是使用 lxml 库对模式进行 XML 验证的 python2 代码：

```
from lxml import etree
from StringIO import StringIO

parser = etree.XMLParser(no_network=False)
etree.set_default_parser(parser)

schema_doc = etree.parse(StringIO('''\
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns="http://www.w3.org/2001/XMLSchema" xmlns:gml="http://www.opengis.net/gml" xmlns:tows="http://www.tinyows.org/" targetNamespace="http://www.tinyows.org/" elementFormDefault="qualified" version="1.1">
<xs:import namespace="http://www.opengis.net/wfs" schemaLocation="http://schemas.opengis.net/wfs/1.1.0/wfs.xsd"/>
<xs:import namespace="http://www.opengis.net/gml" schemaLocation="http://schemas.opengis.net/gml/3.1.1/base/gml.xsd"/>
<xs:element name="cities" type="tows:citiesType" substitutionGroup="gml:_Feature"/>
<xs:complexType name="citiesType">
<xs:complexContent>
<xs:extension base="gml:AbstractFeatureType">
<xs:sequence>
<xs:element name="type_id" type="int" nillable="true" minOccurs="0" maxOccurs="1"/>
<xs:element name="properties" type="string" nillable="true" minOccurs="0" maxOccurs="1"/>
<xs:element name="geom" type="gml:PointPropertyType" nillable="true" minOccurs="0" maxOccurs="1"/>
</xs:sequence>
</xs:extension>
</xs:complexContent>
</xs:complexType>
</xs:schema>
'''))

xml = etree.parse(StringIO('''\
<wfs:Transaction xmlns:wfs="http://www.opengis.net/wfs">
<wfs:Insert>
<feature:cities xmlns:feature="http://www.tinyows.org">
<feature:geom>
<gml:Point xmlns:gml="http://www.opengis.net/gml" srsName="EPSG:4326">
<gml:pos>37.935083007812 55.4423828125</gml:pos>
</gml:Point>
</feature:geom>
</feature:cities>
</wfs:Insert>
</wfs:Transaction>'''))

schema = etree.XMLSchema(schema_doc)
schema.assertValid(xml) 
```

在这里我得到错误：

```
lxml.etree.DocumentInvalid: Element '{http://www.tinyows.org}cities': This element is  not expected. Expected is one of ( {http://www.opengis.net/gml}_Feature, http://www.opengis.net/gml}FeatureCollection, {http://www.opengis.net/gml}MultiPointCoverage, {http://www.opengis.net/gml}MultiCurveCoverage, {http://www.opengis.net/gml}MultiSurfaceCoverage, {http://www.opengis.net/gml}MultiSolidCoverage, {http://www.opengis.net/gml}GridCoverage, {http://www.opengis.net/gml}RectifiedGridCoverage, {http://www.opengis.net/gml}Observation, {http://www.opengis.net/gml}DirectedObservation )., line 3 
```

这对我来说似乎很神秘，因为`cities`特性被定义为`gml:_Feature`在模式中替代。也许答案应该在[http://schemas.opengis.net/wfs/1.1.0/wfs.xsd](http://schemas.opengis.net/wfs/1.1.0/wfs.xsd)之内，但我无法掌握验证的逻辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T11:08:11.687

我发现字符串`<feature:cities xmlns:feature="http://www.tinyows.org">`是万恶之源，即`http://www.tinyows.org`命名空间中缺少斜杠。更改它以`<feature:cities xmlns:feature="http://www.tinyows.org/">`解决问题。每个符号都很重要！

# c# - EF 代码优先 - 使用外键选择

> ID：13402157
> 
> 赞同：1
> 
> 时间：2012-11-15T16:39:47.547
> 
> 标签：c#, entity-framework-4, ef-code-first

在 EF 中得到我认为是一种奇怪的行为，我希望有人能对此有所了解。基本上，如果我使用外键检索项目，则不会检索外键项目？这似乎有点短暂。我是否遗漏了一些明显的东西，或者是否有解决这个问题的模式？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Data.Entity;

namespace EFTest
{
    class Program
    {
        static void Main(string[] args)
        {
            Database.SetInitializer(new MCInitializer());

            EFTestEM context = new EFTestEM();
            var foos = from m in context.Foo
                    select m;

            foreach (var foo in foos)
            {
                // foo.MyBar is null?! How do I populate it?
                Console.WriteLine("{0},{1}",foo.Desc,foo.MyBar.Whatever);
            }

        }

    }

    [Table("tbl_Bar")]
    public class Bar
    {
        [Key,DatabaseGenerated(DatabaseGeneratedOption.Identity)]
        public int BarId { get; set; }
        public string Whatever { get; set; }
        public string Whenever { get; set; }
    }

    [Table("tbl_Foo")]
    public class Foo
    {
        [Key, DatabaseGenerated(DatabaseGeneratedOption.Identity)]
        public int FooId { get; set; }
        public string Desc { get; set; }
        public int MyBarId { get; set; }
        [ForeignKey("MyBarId")]
        public Bar MyBar { get; set; }

    }

    public class MCInitializer : DropCreateDatabaseAlways<EFTestEM>
    {
        protected override void Seed(EFTestEM context)
        {
            List<Bar> bars = new List<Bar>
                             {
                                 new Bar(){Whatever = "Bar1"},
                                 new Bar(){Whatever = "Bar2"},
                                 new Bar(){Whatever = "Bar3"},
                             };

            List<Foo> foos = new List<Foo>
                             {
                                 new Foo() {Desc = "Foo1", MyBar = bars[0]},
                                 new Foo() {Desc = "Foo2", MyBar = bars[1]},
                                 new Foo() {Desc = "Foo3", MyBar = bars[2]}
                             };

            foreach (var bar in bars)
                context.Bar.Add(bar);
            foreach (var foo in foos)
                context.Foo.Add(foo);

            context.SaveChanges();

            base.Seed(context);

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:46:11.683

对于延迟加载，您需要将相关属性设为虚拟。

例如

```
public virtual Bar MyBar { get; set; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T20:26:29.830

相关属性需要“热切加载”或“延迟加载”（参见 Charlino 的回答）。

要急切加载，代码需要使用“包含”扩展名。：

```
 var foos = from m in context.Foo.Include("MyBar")
                select m; 
```

# json - 如何从 url 显示 jqgrid（本地数据有效，url 数据无效）

> ID：13402160
> 
> 赞同：0
> 
> 时间：2012-11-15T16:40:01.570
> 
> 标签：json, jqgrid

我在stackoverflow上查看了各种问题/答案，但没有找到解决方案。

当我使用 jqgrid 代码的第一块（数据是本地的）时，会显示表格和数据。

当我使用第二个块（从 url 加载的数据）时，会显示一个空表。

奇怪的是，本地数据是 url 文件的实际内容。所以我假设行为是相同的。

为什么显示相同的数据，如果复制到代码中，不能使用url显示数据？

HTML（调用包含 jqgrid 代码的 mytest.js）：

```
<!DOCTYPE html>
<html>
<head>
   <link rel="stylesheet" href="jquery-ui-1.8.23.custom.css" />
   <link rel="stylesheet" href="ui.jqgrid.css" />
   <script src="jquery-1.8.0.min.js"></script>
   <script src="jquery-ui-1.8.23.custom.min.js"></script>
   <script src="grid.locale-en.js"></script>    
   <script src="jquery.jqGrid.min.js"></script>
   <script src="mytest.js" type="text/javascript"></script>
</head>
<body>
<h1>hey</h1>
  <table id="jqgrid"></table>
</body>
</html> 
```

JSON 作为本地数据（数据显示，[此处，为简洁而编辑]）：

```
var mydata = [
         {"_id": {"$oid": "50a3f962b7718da1a3090fa9"}, 
         "config": {"titlepage": 
                      {"title": "My First Title",
                       "color": true,
                       "fontsize": "42/44",
                      }
                   }
         },
         {"_id": {"$oid": "50a3f962b7718da1a3090faa"}, 
         "config": {"titlepage": 
                      {"title": "My Second Title",
                       "color": true,
                       "fontsize": "42/44",
                      }
                   }
         }
         ];
jQuery(document).ready(function(){
    $('#jqgrid').jqGrid({
        datatype: 'local',
        data: mydata,
        jsonReader: {
            repeatitems : false,
        },
        caption: 'Titlepage Parameters',
        colNames: ['title', 'color','fontsize'],
        colModel: [
            {name: 'config.titlepage.title'},
            {name: 'config.titlepage.color'},
            {name: 'config.titlepage.fontsize'},
        ],
    });
}); 
```

通过 URL 的 JSON（不显示数据）。文件 mydata.json 包含与上面使用的相同的数据，但在本地文件中而不是在实际的 js 代码中：

```
jQuery(document).ready(function(){
    $('#jqgrid').jqGrid({
        url:'mydata.json',
        datatype:"json",
    jsonReader: {
        repeatitems : false,
    },
    caption: 'Titlepage Parameters',
    colNames: ['title', 'color','fontsize'],
    colModel: [
        {name: 'config.titlepage.title'},
        {name: 'config.titlepage.color'},
        {name: 'config.titlepage.fontsize'},
    ],
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T18:27:29.910

首先，我会修复一些您的第一个版本的工作代码。*如果*`jsonReader`您使用. 相反，它将被使用[localReader](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aretrieving_data#array_data)。此外，如果输入数据有这样的值，我建议您始终使用本机值。所以我会将代码修复为以下内容：*`jsonReader``id`*

 *```
$(function () {
    "use strict";
    var mydata = [
            {
                "_id": {"$oid": "50a3f962b7718da1a3090fa9"},
                "config": {
                    "titlepage": {
                        "title": "My First Title",
                        "color": true,
                        "fontsize": "42/44"
                    }
                }
            },
            {
                "_id": {"$oid": "50a3f962b7718da1a3090faa"},
                "config": {
                    "titlepage": {
                        "title": "My Second Title",
                        "color": true,
                        "fontsize": "42/44"
                    }
                }
            }
        ];
    $('#jqgrid').jqGrid({
        datatype: 'local',
        data: mydata,
        caption: 'Titlepage Parameters',
        gridview: true,
        height: 'auto',
        colNames: ['title', 'color', 'fontsize'],
        colModel: [
            {name: 'config.titlepage.title' },
            {name: 'config.titlepage.color' },
            {name: 'config.titlepage.fontsize' },
        ],
        localReader: {
            id: "_id.$oid"
        }
    });
}); 
```

请参阅[第一个演示](http://ok-soft-gmbh.com/jqGrid/Tim1.htm)。

如果使用`datatype: "json"`，您需要修复`jsonReader`：

```
$(function () {
    "use strict";
    $('#jqgrid').jqGrid({
        datatype: 'json',
        url: 'Tim2.json',
        caption: 'Titlepage Parameters',
        gridview: true,
        height: "auto",
        //colNames: ['title', 'color', 'fontsize'],
        colModel: [
            {name: 'title', jsonmap: 'config.titlepage.title' },
            {name: 'color', jsonmap: 'config.titlepage.color' },
            {name: 'fontsize', jsonmap: 'config.titlepage.fontsize' },
        ],
        jsonReader: {
            repeatitems: false,
            id: "_id.$oid",
            root: function (obj) {
                return obj;
            }
        }
    });
}); 
```

查看[另一个演示](http://ok-soft-gmbh.com/jqGrid/Tim2.htm)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T19:01:01.683

奥列格的答案是完整的解决方案。

这是修改后的代码。也就是说，我最初编写的代码加上成功将数据加载到网格中的一个更改（来自 Oleg）。对我来说关键是在 jsonReader 中添加根函数：

```
jQuery(document).ready(function(){
    $('#jqgrid').jqGrid({
        url:'mydata.json',
        datatype:"json",
        jsonReader: {
            root: function (obj) { return obj; },
            repeatitems : false,
        },
        caption: 'Titlepage Parameters',
        colNames: ['title', 'color','fontsize'],
        colModel: [
            {name: 'config.titlepage.title'},
            {name: 'config.titlepage.color'},
            {name: 'config.titlepage.fontsize'},
        ],
    });
}); 
```*

# mercurial - 汞转换错误

> ID：13402161
> 
> 赞同：1
> 
> 时间：2012-11-15T16:40:05.940
> 
> 标签：mercurial, mercurial-extension, mercurial-convert

我对 hg 转换有疑问。当我在命令行中写入“hg convert f:/test”时，它给了我这个：中止：无效模式（'r'）或文件名。我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:04:35.057

您必须提供更多详细信息：

*   Mercurial 版本
*   源存储库类型

并且，也许，使用完整的命令行（目标、文件映射文件、源类型）

**添加在**

根据主题[转换：中止：无效模式（'r'）或文件名](http://selenic.com/pipermail/mercurial/2012-March/042266.html)它是 2.1.1 中的错误，**在 2012 年 4 月 1 日发布**

# android - 如何将使用 XML 布局的视图动态添加到 ContentView？

> ID：13402162
> 
> 赞同：0
> 
> 时间：2012-11-15T16:40:06.300
> 
> 标签：android, view, android-framelayout

在我的主要活动中，我创建了一个带有子视图的 FrameLayout 并将其设置为 ContentView。现在，留在同一个 Activity 中，在 onCreate() 完全执行之后，我需要能够从 FrameLayout 中动态添加和删除子视图。我通过使用处理程序来暂停主线程，然后根据需要添加或删除子视图来实现这一点。

当我处理我以编程方式创建的视图时，这一切都很好，但是当我尝试对使用 XML 布局的视图执行相同操作时，我从试图添加到 FrameLayout 的 ViewGroup 中获得空指针异常.

在不使用 Fragments 的情况下，我可以使用哪些特定步骤来实现这一目标？

如果有些人不明白我在问什么，我可以详细说明。如果有帮助，我可以提供代码块，但我认为大多数人会从我的简短解释中了解我正在做的事情的要点。我只是在找人指出我正确的方向。

这是引发异常的 LogCat 块：

```
11-15 13:40:42.977: E/AndroidRuntime(14956): FATAL EXCEPTION: main
11-15 13:40:42.977: E/AndroidRuntime(14956): java.lang.NullPointerException
11-15 13:40:42.977: E/AndroidRuntime(14956):    at android.view.ViewGroup.addView(ViewGroup.java:1821)
11-15 13:40:42.977: E/AndroidRuntime(14956):    at android.view.ViewGroup.addView(ViewGroup.java:1808)
11-15 13:40:42.977: E/AndroidRuntime(14956):    at com.beastcodes.framework.impl.AndroidGame.addScreenFragment(AndroidGame.java:207)
11-15 13:40:42.977: E/AndroidRuntime(14956):    at com.beastcodes.framework.impl.AndroidGame.addAllScreenFragments(AndroidGame.java:213)
11-15 13:40:42.977: E/AndroidRuntime(14956):    at com.beastcodes.framework.impl.AndroidGame.access$2(AndroidGame.java:211)
11-15 13:40:42.977: E/AndroidRuntime(14956):    at com.beastcodes.framework.impl.AndroidGame$3.run(AndroidGame.java:61)
11-15 13:40:42.977: E/AndroidRuntime(14956):    at android.os.Handler.handleCallback(Handler.java:587)
11-15 13:40:42.977: E/AndroidRuntime(14956):    at android.os.Handler.dispatchMessage(Handler.java:92)
11-15 13:40:42.977: E/AndroidRuntime(14956):    at android.os.Looper.loop(Looper.java:130)
11-15 13:40:42.977: E/AndroidRuntime(14956):    at android.app.ActivityThread.main(ActivityThread.java:3691)
11-15 13:40:42.977: E/AndroidRuntime(14956):    at java.lang.reflect.Method.invokeNative(Native Method)
11-15 13:40:42.977: E/AndroidRuntime(14956):    at java.lang.reflect.Method.invoke(Method.java:507)
11-15 13:40:42.977: E/AndroidRuntime(14956):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
11-15 13:40:42.977: E/AndroidRuntime(14956):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
11-15 13:40:42.977: E/AndroidRuntime(14956):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:11:53.230

在将视图添加到 FrameLayout 之前，您必须使用 LayoutInflater 从 XML 中膨胀视图。

# css - 垂直对齐具有未知高度和宽度的图像

> ID：13402165
> 
> 赞同：-1
> 
> 时间：2012-11-15T16:40:13.500
> 
> 标签：css

这么经典的css问题，垂直对齐，不过这次有点复杂，请看这个fiddle：http: [//jsfiddle.net/uH4Rn/2/](http://jsfiddle.net/uH4Rn/2/)

很明显，我希望图像在中间完全对齐，你可以看到它不起作用我认为问题出在这两行：

```
top:-25%;
margin-top:-100px; 
```

顺便说一句，我不关心低于 9 版本的 IE，我想避免使用 javascript 或 jquery。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:09:48.660

由于先前的答案似乎没有给您正确的结果，因此这是另一个肯定有效的答案。除非我完全不明白你的问题。

此解决方案将使给定容器中的任何图像居中：

```
.container{
    width: 300px;
    border: 1px solid black;
    height: 300px;
    display: table-cell;
    vertical-align: middle;
    text-align: center;
}
​ 
```

小提琴：http: [//jsfiddle.net/uH4Rn/2/](http://jsfiddle.net/uH4Rn/2/)

# jquery - 如何从内部元素中找到元素的ID？

> ID：13402173
> 
> 赞同：0
> 
> 时间：2012-11-15T16:40:34.083
> 
> 标签：jquery

 `<tr id="Box<%# Eval("Id") %>"`我有这样的html，当我点击5标签时，我想得到，使用jquery

请注意这是我的`ItemTemplate`，所以有很多具有相同 html 的项目，

```
<tr id="Box<%# Eval("Id") %>" style="height: 30px;">
        <td>
            <div class="LanguageName"><%# Eval("LanguageName")%></div>
        </td>
        <td text-align: center;">
            <a href="javascript:fun1(1)"></a>
            <a href="javascript:fun1(2)"></a>
            <a href="javascript:fun1(3)"></a>
            <a href="javascript:fun1(4)"></a>
            <a href="javascript:fun1(5)"></a>
        </td> 
``` 

请在这里查看 2 项：http: [//jsfiddle.net/bThbL/](http://jsfiddle.net/bThbL/)

所以当我点击任何`<a>`来自 td 时，我想获取父`tr`ID

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:41:52.473

尝试这个，

**[现场演示](http://jsfiddle.net/rajaadil/3LAyt/1/)**

```
idofTr = $(this).closest('tr').attr('id'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T16:44:18.363

可以用这个

```
$(this).closest('tr')[0].id  // DOM Object 
```

**或**使用`.closest()`

```
$(this).closest('tr').attr('id');  // jQuery Object 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T16:45:18.007

HTML：

```
<a onclick="fun1.call(this,1)"></a> 
```

脚本：

```
function fun1(val){
   var trId = this.parentNode.parentNode.id;
} 
```

顺便说一句，如果不需要避免资源浪费，请不要使用 JQuery。

# twitter-bootstrap - 推特引导轮播图像居中

> ID：13402174
> 
> 赞同：1
> 
> 时间：2012-11-15T16:40:42.663
> 
> 标签：twitter-bootstrap, carousel

我刚开始使用 twitter 引导程序，轮播的行为很奇怪。我认为这与响应式设计有关，但我不确定。在全屏上，图像不居中。当窗口变小时，它会完美地调整大小。

全屏： [![宽的](../Images/dfef16acbb08618759aacc657256dcf0.png)](https://i.stack.imgur.com/QBRsn.png)

较小： [![短的](../Images/ad04f73ac599a51e182871cf0bd81866.png)](https://i.stack.imgur.com/p9wci.png)

所有代码都是直接引导下载。[http://twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:42:20.787

输入问题后立即弄清楚。图像以 1500PX 的宽度完美调整大小。我猜这是容器的宽度？

# c - 如何将两个（for 循环）“转换”为一个（while 循环）？

> ID：13402175
> 
> 赞同：-2
> 
> 时间：2012-11-15T16:40:41.837
> 
> 标签：c, loops, for-loop, while-loop, simulation

我正在模拟三个多小时的快餐店。这三个小时分为 18 个间隔，每个间隔 600 秒。每个间隔都会输出关于这 600 秒发生的情况的统计信息。

我原来的结构是这样的：

```
int i;
for (i=0; i<18; i++)
    interval(customerArrive);

int interval(double customerArrive)

...
...

int t;
for (t=0;t<600;t++) 
```

这种两个（for循环）的方法不起作用，因为它不允许时间成为连续函数。如果在第一个时间间隔 t=599 发生事件（例如，客户到达），那么该事件在 t=601 将不存在，因为在第二个时间间隔开始时所有内容都将被删除。

我想解决这个问题的方法是制作一个while循环以允许时间成为一个连续函数，我只是不知道如何将我的代码“转换”为此。

会是这样吗？

```
while (t<10800)
{
...
} 
```

我不确定这个while循环退出的条件是什么。

如有必要，这是我的完整代码： http: [//pastebin.com/3ec0Ks9u](http://pastebin.com/3ec0Ks9u)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T08:50:00.270

> […] 当第二个间隔开始时，一切都被删除了。

这不是由于两个`for`循环，而是由于外部`for`循环调用了一个函数，并且您重新初始化了该函数中的内容。因此，将外部`for`循环移动*到*函数中`interval`（可能会在此过程中更改方法名称，因为它不再适合）。在那种方法中，您可以编写

```
int i, t;
… // initialize stuff
for (i=0; i<18; i++) {
  for (t=0;t<600;t++) {
    … // do stuff
  }
} 
```

这些循环不会删除任何内容，您也不必计算某个计数器的值`i`和值。`t`

> 让时间成为一个连续函数

显然，时间仍将在这些步骤中离散化。就像在你的`while`循环中一样。如果您不想要离散的时间步长，则必须从根本上更改您的代码，例如通过计算客户提前到达的时间，然后从一个事件到另一个事件，而不是以固定的增量步进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T16:53:19.200

“可能是”，我理解你的问题。如果你想监控某些东西（用你的话来说是连续功能），你需要借助线程和计时器，这暂时超出了你的范围。如果你想使用一些东西基本的，问题不是很好理解，请重新构建它。

# android - SlidingDrawer 从左到右的问题

> ID：13402176
> 
> 赞同：0
> 
> 时间：2012-11-15T16:40:49.167
> 
> 标签：android, slidingdrawer

亲爱的，我正在实施[ALESSANDRO CRUGNOLA](http://blog.sephiroth.it/2011/03/29/widget-slidingdrawer-top-to-bottom/)定制滑动抽屉。我希望它滑过屏幕的一半。我从右到左很容易做到这一点，但现在我想要从左到右。问题是，当第一个抽屉打开时，它一直向右滑动，然后突然回到我指定的中间点。关于如何解决这个问题的任何想法？指定中间点的代码如下，从左到右滑块的布尔值 mInvert 为真。

```
@Override
protected void onLayout( boolean changed, int l, int t, int r, int b )
{
    if ( mTracking ) { return; }

    final int width = r - l;
    final int height = b - t;

    final View handle = mHandle;

    int handleWidth = handle.getMeasuredWidth();
    int handleHeight = handle.getMeasuredHeight();

    Log.d( LOG_TAG, "handleHeight: " + handleHeight );

    int handleLeft;
    int handleTop;

    final View content = mContent;
    //mTopOffset = getWidth()/2;
    if ( mVertical ) {
        handleLeft = ( width - handleWidth ) / 2;
        if ( mInvert ) {
            Log.d( LOG_TAG, "content.layout(1)" );
            handleTop = mExpanded ? height - mBottomOffset - handleHeight : mTopOffset;
            content.layout( 0, mTopOffset, content.getMeasuredWidth(), mTopOffset + content.getMeasuredHeight() );
        } else {
            handleTop = mExpanded ? mTopOffset : height - handleHeight + mBottomOffset;
            content.layout( 0, mTopOffset + handleHeight, content.getMeasuredWidth(), mTopOffset + handleHeight + content.getMeasuredHeight() );
        }
    } else {
        handleTop = ( height - handleHeight ) / 2;//centre alings the handle
        if( mInvert ) {
            mBottomOffset = getWidth()/2;//to limit the window sliding half way
            handleLeft = mExpanded ? width - mBottomOffset - handleWidth : mTopOffset;

            content.layout( mTopOffset, 0, mTopOffset + content.getMeasuredWidth(), content.getMeasuredHeight() );
        } else {
            mTopOffset = getWidth()/2;//to limit the window sliding half way
            handleLeft = mExpanded ? mTopOffset : width - handleWidth + mBottomOffset;
            content.layout( mTopOffset + handleWidth, 0, mTopOffset + handleWidth + content.getMeasuredWidth(), content.getMeasuredHeight() );

        }
    }

    handle.layout( handleLeft, handleTop, handleLeft + handleWidth, handleTop + handleHeight );
    mHandleHeight = handle.getHeight();
    mHandleWidth = handle.getWidth();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:26:35.540

我想我会回答这个问题。关键位实际上在 onMeasure() 中，您必须声明父级是半宽，例如 widthSpecSize /=2; 当 mInvert 为真时。

```
@Override
protected void onMeasure( int widthMeasureSpec, int heightMeasureSpec )
{
    int widthSpecMode = MeasureSpec.getMode( widthMeasureSpec );
    int widthSpecSize = MeasureSpec.getSize( widthMeasureSpec );

    int heightSpecMode = MeasureSpec.getMode( heightMeasureSpec );
    int heightSpecSize = MeasureSpec.getSize( heightMeasureSpec );

    if ( widthSpecMode == MeasureSpec.UNSPECIFIED || heightSpecMode == MeasureSpec.UNSPECIFIED ) { throw new RuntimeException(
            "SlidingDrawer cannot have UNSPECIFIED dimensions" ); }

    final View handle = mHandle;
    measureChild( handle, widthMeasureSpec, heightMeasureSpec );

    if ( mVertical ) {
        int height = heightSpecSize - handle.getMeasuredHeight() - mTopOffset;
        mContent.measure( MeasureSpec.makeMeasureSpec( widthSpecSize, MeasureSpec.EXACTLY ), MeasureSpec.makeMeasureSpec( height, MeasureSpec.EXACTLY ) );
    } else {
        int width = widthSpecSize - handle.getMeasuredWidth() - mTopOffset;
        if( mInvert ) {
            widthSpecSize /=2;//to limit the sliding halfway parent is told to be halfscreen
            int widthI = widthSpecSize - handle.getMeasuredWidth() - mBottomOffset;
            mContent.measure( MeasureSpec.makeMeasureSpec( widthI, MeasureSpec.EXACTLY ), MeasureSpec.makeMeasureSpec( heightSpecSize, MeasureSpec.EXACTLY ) );
        }else{
            mContent.measure( MeasureSpec.makeMeasureSpec( width, MeasureSpec.EXACTLY ), MeasureSpec.makeMeasureSpec( heightSpecSize, MeasureSpec.EXACTLY ) );
        }
    }

    setMeasuredDimension( widthSpecSize, heightSpecSize );
} 
```

# html - 为什么带有滚动的 div 在悬停时会调整 TH 的大小

> ID：13402180
> 
> 赞同：3
> 
> 时间：2012-11-15T16:40:50.960
> 
> 标签：html, css

出于某种原因，当我在带有滚动的 div 内的 TH 上使用悬停选择器时，父 div 会调整大小。每次触发鼠标悬停效果时，div 都会增加一行。

我在其他浏览器中对此进行了测试，但我只能在 IE 9 中重现此问题。有人有办法解决这个问题吗？

```
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=8; IE=9" />
<style>
    .testScroller {
        max-width: 200px;
        overflow-x: auto;
        background-color: green;
    }
    .testHeader:hover { 
        background-color: lightBlue;
    }
</style>
</head>
<body>
    <div class="testScroller">
        <table >
            <tr >
                <th class="testHeader">header 0</th>
                <th class="testHeader">header 1</th>
                <th class="testHeader">header 2</th>
                <th class="testHeader">header 3</th>
                <th class="testHeader">header 4</th>
                <th class="testHeader">header 5 </th>
            </tr>
            <tr >
                <td >0</td>
                <td >1</td>
                <td >2</td>
                <td >3</td>
                <td >4</td>
                <td >5</td>
            </tr>
        </table>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T09:51:02.290

您应该添加：

```
.testScroller {
    overflow-x: auto;
    min-height:0%   /* IE9 fix */
} 
```

有关详细信息，请参阅此链接

[http://blog.brianrichards.net/post/6721471926/ie9-hover-bug-workaround](http://blog.brianrichards.net/post/6721471926/ie9-hover-bug-workaround)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T16:47:31.850

这几乎是美丽的错误！但是，如果您将样式更改为此，它应该可以解决问题：

```
.testScroller {
    max-width: 200px;
    overflow-x: auto;
    background-color: green;
}
.testHeader {
    background-color: green;
}
.testHeader:hover { 
    background-color: lightBlue;
} 
```

正如评论所证明的那样，这比简单的修复要复杂得多。这似乎与 IE9 损坏了某些东西有关 - 这在 IE8 中可以正常工作。

看看这个问题：[Force IE9 to emulate IE8。可能的？](https://stackoverflow.com/questions/4811801/force-ie9-to-emulate-ie8-possible)

这将导致您将元标记更改为：

```
<meta http-equiv="X-UA-Compatible" content="IE=8" > 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T18:20:35.010

我采用了使用设定高度的 adhocgeek 建议。为对象提供 ID 并在加载时运行此 JQuery。感觉很hacky，但它现在有效。我需要添加 30 为滚动条留出空间。

```
$("#testScroller").height($("#testTable").height() + 30); 
```

此外，任何导致此问题的原因都已在 IE10 中得到解决。

如果将高度设置为自身，则问题已解决

```
$("#testScroller").height(($("#testScroller").height())) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-06T12:31:16.407

我在 IE 11 上遇到了悬停问题。为了解决这个问题，我改为`overflow: scroll;`，`overflow-y: scroll;`然后它起作用了。原因是 IE 11 不支持二值`overflow`简写。

# yii - YII 中现有模型的 Crud

> ID：13402183
> 
> 赞同：2
> 
> 时间：2012-11-15T16:40:54.157
> 
> 标签：yii, crud, gii

我正在尝试为 GII 自动生成的模型创建 CRUD。

类的存储方式类似于**models/entity/Article.php**。当我尝试将 Gii 生成器设置为类名 models.entity.SomeClass 或 entity.SomeClass 时，它不起作用。

gii 停止异常**别名“entity.Article”无效。确保它指向现有目录或文件。**

如何正确运行 CRUD 脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:53:13.753

*在config/main.php*文件中设置别名（在 之前执行此操作`return array`）：

```
Yii::setPathOfAlias('entity',dirname(__FILE__).DIRECTORY_SEPARATOR.'../models/entity');

// rest of config
return array(
    // ...
); 
```

然后`entity.Article`在gii中使用。

# jquery - jQuery - 基于下拉或单选按钮选择显示结果

> ID：13402185
> 
> 赞同：1
> 
> 时间：2012-11-15T16:41:04.750
> 
> 标签：jquery, drop-down-menu, radio-button, filtering

我对 jquery 比较陌生，并且发现了与我正在寻找的结果相似的结果，但没有发现。

**我想要做** 的是根据下拉或单选按钮选择显示不同的结果选择。我面临的问题是我想引用一个属性而不是一个类或段落等。

我的值是“年”，并且在“产品项目”类中也有一个“年”属性。When the drop down selected is equal to the attribute, I want the relevant content to be displayed.

最后，我无法默认显示 2012 年的内容。

[这是 js fiddle 的代码](http://jsfiddle.net/MattiusHolden/JbEdE/5/)

```
$("#search-filter").bind("change", function() {   

$(this.value).show();

$('.product-item[year!=""]').hide(); 
```

​</p>

我假设它是引号 [year!=""] 内的某种形式的“this”

任何有关上述解释的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:50:19.707

尝试这个

```
$("#search-filter").val('2012');

$("#search-filter").on("change", function() { 

    $('.product-item').hide();

    var val = this.value;

    $('.product-item[year="'+val +'"]').show();

}).change();​ 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/JbEdE/10/)**

看起来这把你的代码弄乱了..

`$(this.value)` ..`this.value`给你一个字符串，你正在尝试将文本转换为`jQuery Object`.. 你需要 a`DOM object`转换为`jQuery Object`

也使用 .on() 而不是`.bind()`前者是 jQuery 1.7 的首选

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T16:52:34.270

虽然我不太确定你在这里的目的是什么，但我想我至少可以帮助你找到一个方向。

你的来电

```
$(this.value).show(); 
```

是说我在页面中寻找一个带有与值匹配的标签的元素（在本例中为“2009”、“2010”等......）

您可能想要做的是使用属性搜索选择器

```
$('.product-item[year="' + this.value + '"]').show(); 
```

这将针对正确的元素

# android - 内部存储器中带有 EXTRA_OUTPUT 的 Android ACTION_IMAGE_CAPTURE

> ID：13402187
> 
> 赞同：4
> 
> 时间：2012-11-15T16:41:11.273
> 
> 标签：android, camera, android-sdcard

当我打电话时用相机拍照时

```
File file = new File(getFilesDir().getAbsolutePath() + "/myImage.jpg");
Uri outputFileUri = Uri.fromFile(file);

cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri); 
```

`OK button`on camera 应用程序无法运行，根本不执行任何操作（实际上不会将其保存到我提供的内部存储器中，因此应用程序本身什么也不执行）。

但是，如果我打电话

```
File file = new File(Environment.getExternalStorageDirectory().getAbsolutePath() + "/myImage.jpg");
Uri outputFileUri = Uri.fromFile(file);

cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri); 
```

一切都很好，照片存储在 SDCard 上。

我的问题是，有没有办法在没有 SDCard的情况下以**全分辨率存储捕获的照片？**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-15T16:53:15.207

原生相机应用程序无法将图像保存在应用程序的私有内部目录中，因为这些目录仅适用于您的特定应用程序。

相反，您可以创建自定义相机活动以将图像保存到您的内部目录，或者您需要使用带有外部存储的股票相机应用程序。

注意：如果您计划创建自定义相机活动，请确保您的目标至少为 2.3 及更高版本。低于该标记的任何内容都很难处理。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-15T16:52:33.227

相机活动将无法将文件保存到活动的私有文件目录中，这就是它悄悄失败的原因。您可以将图像从外部存储移动到 onActivityResult 中的文件目录中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-09T06:19:08.800

您需要添加权限

```
cameraIntent.setFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION); 
```

这可以使用文件提供程序。请参考样品

```
 public getOutputUri(@NonNull Context pContext) {
    String photo = photo.jpeg;//your file name
    File photoFile = new File(pContext.getFilesDir(), photo);
    Uri lProviderPath = FileProvider.getUriForFile(pContext,
        pContext.getApplicationContext()
            .getPackageName() + ".provider", photoFile);
    return lProviderPath;
  }

  private void capturePhoto() {
      Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
      cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, getOutputUri(this));
      cameraIntent.setFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);
      startActivityForResult(cameraIntent, 1);
  } 
```

有关更多详细信息，请参阅以下 android 文档 [https://developer.android.com/reference/android/support/v4/content/FileProvider](https://developer.android.com/reference/android/support/v4/content/FileProvider)

# c++ - 如何在 C++ 中编写一个小的内存泄漏检测？

> ID：13402188
> 
> 赞同：5
> 
> 时间：2012-11-15T16:41:14.503
> 
> 标签：c++, memory, memory-leaks, new-operator, operator-keyword

我正在尝试编写一个小型内存泄漏检测工具。

我的想法是跟踪我的应用程序中的动态内存分配寿命，以确定任何无效的内存访问或未删除的内存，这可能会导致我的应用程序在使用一段时间后变为核心。

我想写一个简单的界面来覆盖`new`和`delete`.

在我的重写中，`new`我想打印功能行地址等。然后调用标准`new`。

有没有人试过这个？我不确定我是否可以从我的班级特定的新运营商那里调用标准新的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:47:12.880

这里有几篇文章：

[http://www.codeproject.com/Articles/8448/Memory-Leak-Detection](http://www.codeproject.com/Articles/8448/Memory-Leak-Detection)

[http://www.codeproject.com/Articles/19361/Memory-Leak-Detection-in-C](http://www.codeproject.com/Articles/19361/Memory-Leak-Detection-in-C)

[http://www.codeproject.com/Articles/9815/Visual-Leak-Detector-Enhanced-Memory-Leak-Detectio](http://www.codeproject.com/Articles/9815/Visual-Leak-Detector-Enhanced-Memory-Leak-Detectio)

[http://www.codeproject.com/Articles/393957/Cplusplus-Memory-Leak-Finder](http://www.codeproject.com/Articles/393957/Cplusplus-Memory-Leak-Finder)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T16:44:16.307

`::operator new`从特定于类的调用`operator new`很好，而且很常见。您不能从替换版本中调用 global operator new ，`::operator new`因为如果您替换 global operator new 旧的 operator 不存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T16:45:11.933

在这个问题中，我为您的问题提出了一个临时解决方案：[立即检测 Windows 上的堆损坏错误。如何？](https://stackoverflow.com/q/12724057/1065190)

通常，您可以使用以下代码替换您的`new`and ：`delete`

```
DWORD PageSize = 0;

inline void SetPageSize()
{
    if ( !PageSize )
    {
        SYSTEM_INFO sysInfo;
        GetSystemInfo(&sysInfo);
        PageSize = sysInfo.dwPageSize;
    }
}

void* operator new (size_t nSize)
{
    SetPageSize();
    size_t Extra = nSize % PageSize;
    nSize = nSize + ( PageSize - Extra );
    return Ptr = VirtualAlloc( 0, nSize, MEM_COMMIT, PAGE_READWRITE);
}

void operator delete (void* pPtr)
{
    MEMORY_BASIC_INFORMATION mbi;
    VirtualQuery(pPtr, &mbi, sizeof(mbi));
    // leave pages in reserved state, but free the physical memory
    VirtualFree(pPtr, 0, MEM_DECOMMIT);
    DWORD OldProtect;
    // protect the address space, so noone can access those pages
    VirtualProtect(pPtr, mbi.RegionSize, PAGE_NOACCESS, &OldProtect);
} 
```

确定内存的无效访问。在进一步的讨论中，您将找到有关泄漏检测和其他内存错误检测的想法。

如果要调用全局`new`and `delete`，可以使用`::`全局命名空间前缀：

```
return ::new(nSize); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T16:49:59.533

所描述的方法听起来很合理。您可以增强它并将每个分配上的一些标识数据存储到某个数据结构中。这样，您可以在程序终止时跟踪所有未释放的内存，而无需检查所有分配/释放日志。

为了检测损坏，您可以在开始之前和结束之后用填充包装每个分配，并用一些预定义的模式填充它。释放内存后，您可以验证模式是否仍然存在。这将使您有很好的机会检测腐败。

`new`您可以使用范围前缀调用全局： `::new`。

# ruby-on-rails - Mongoid where 使用 count 查询

> ID：13402189
> 
> 赞同：2
> 
> 时间：2012-11-15T16:41:15.983
> 
> 标签：ruby-on-rails, count, mongoid, where, relation

我有下一个模型，使用 Mongoid：

```
class Album
  have_many :images
end

class Image
  belongs_to :album
end 
```

我只想获取包含任何图像的专辑：

```
Album.all.select{ |a| a.images.count > 0 } 
```

但它返回一个数组，我需要一个 Mongoid::Criteria。我尝试使用类似的东西：

```
Album.where( "this.images.count > 0" ) 
```

它总是返回 0 个元素。 我该怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T23:24:29.040

实际上那不是一个数组，它是一个代理。您可以检查日志并查看轻便摩托车正在为每张专辑调用 .count 函数（在我的情况下为 2）。

```
1.9.3-p194 :043 > Album.each { |a| a.images.count }
  MOPED: 127.0.0.1:27017 QUERY        database=mongo_benchmark collection=albums selector={} flags=[] limit=0 skip=0 fields=nil (0.7441ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=mongo_benchmark command={:count=>"images", :query=>{"album_id"=>"50e36dd17c71c110ff000001"}} (0.5209ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=mongo_benchmark command={:count=>"images", :query=>{"album_id"=>"50e36f8f7c71c110ff000004"}} (0.3800ms) 
```

此外，如果您想获取 Criteria 对象，您可以这样做`album.images.scoped`

如果你有很多专辑，它会调用 count for ever one，这是不好的。我建议您在这种情况下使用计数器缓存。你可以使用我拥有的一个分支，包括计数器缓存到 mongoid [https://github.com/arthurnn/mongoid/tree/2215-counter_cache](https://github.com/arthurnn/mongoid/tree/2215-counter_cache)

# javascript - ajax 成功后添加

> ID：13402190
> 
> 赞同：0
> 
> 时间：2012-11-15T16:41:22.427
> 
> 标签：javascript, php, ajax

我的 ajax 成功函数在将数据发送到我的数据库后不执行脚本，数据在我的数据库中保存得很好，但之后一切都停在那里。可能有什么问题？

### Javascript代码：

```
$(document).ready(function() {
    $(".wall_update").click(function() {
        var element = $(this);
        var boxval = $("#content").val();
        var dataString = 'content=' + boxval;

        $("#form1").validationEngine({
            type: "POST",
            ajaxSubmit: true,
            ajaxSubmitFile: "update_ajax.php",
            cache: false,
            success: function(html) {
                alert('success');
                $("ol#update").prepend(html);
                $("ol#update li:first").slideDown("slow");
                document.getElementById('content').value = '';
                $('#content').value = '';
                $('#content').focus();
                $("#flash").hide();

            }
        });

    });
});​ 
```

### update_ajax.php

```
 <?php
    include("db.php");
    include("tolink.php");

    if(isSet($_POST['content']))

    {
    $id=time();//Demo Use

    $msg=$_POST['content']; 
    $date=date("M j, Y ");
    $sql=mysql_query("insert into appointments(message,date_sent)values('$msg','$date')");
    $result=mysql_query("select * from appointments order by msg_id desc");
    $row=mysql_fetch_array($result);
    $id=$row['msg_id'];
    $msg=$row['message'];
    $date=$row['date_sent'];

    $msg= nl2br($msg);
    $msg="<br>{$msg}<br>{$date}";
    }

    ?>

    <li class="bar<?php echo $id; ?>">
    <div align="left" class="post_box">
    <span style="padding:10px"><?php echo $msg; ?> </span>
    <span class="delete_button"><a href="#" id="<?php echo $id; ?>" class="delete_update">X</a></span>
    <span class='feed_link'><a href="#" class="comment" id="<?php echo $id; ?>">comment</a></span>
    </div>
    <div id='expand_box'>
    <div id='expand_url'></div>
    </div>
    <div id="fullbox" class="fullbox<?php echo $id; ?>">
    <div id="commentload<?php echo $id; ?>" >

    </div>
    <div class="comment_box" id="c<?php echo $id; ?>">
    <form method="post" action="" name="<?php echo $id; ?>">
    <textarea class="text_area" name="comment_value" id="textarea<?php echo $id; ?>">
    </textarea><br />

<input type="submit" value=" Comment " class="comment_submit" id="<?php echo $id; ?>"/>
</form>
</div>
</div>

</li> 
```

### HTML 脚本

```
<div align="left">
<form  method="post" name="form" action="" id="form1">
<table cellpadding="0" cellspacing="0" width="500px">

<tr><td align="left"><div align="left"><h3>What are you doing?</h3></div></td></tr>
<tr>
<td style="padding:4px; padding-left:10px;" class="update_box">
<textarea  class="validate[custom[last]] text-input" cols="30" rows="10" style="width:480px;font-size:14px; font-weight:bold" name="content" id="content"  ></textarea><br />
<input type="submit"  value="Update"  name="submit" class="wall_update"/>
</td>

</tr>

</table>
</form>

</div>

<ol  id="update" class="timeline">
// Display here after sending data to the database
</ol> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:45:25.520

```
$('#content').value = ''; 
```

jQuery 没有`value`属性，你应该使用`val`：

```
$('#content').val(''); 
```

`value`是 DOM Input 对象的一个​​属性。

# jquery - 根据我的 div 高度更改最小高度

> ID：13402193
> 
> 赞同：0
> 
> 时间：2012-11-15T16:41:35.543
> 
> 标签：jquery, css, resize

所以我有一个幻灯片块（它的响应），我已经`min-height: 315px`为这个块设置了，我真的需要它，但是当我调整窗口大小时我需要`min-height`平滑地缩小，现在我写了 jQuery 代码，所以它可以工作，但它很难看。

```
function minHeightBehavior(width) {
        width = parseInt(width);
        element = $('#block-views-home-page-slider-block');
        sliderHeight = $('.views-field-slider').height();
        element.css('min-height', '315px');
        if (width >= 769 && width < 960) {
            console.log(sliderHeight);
            element.css('min-height', sliderHeight +'px');

        }

    } 
```

现在滑块下方的块，正在向上跳跃，这是因为**例如**当窗口`screen width`为 900 时，`element height`为 300，如果`screen width`为 899，`element height`则也是 300。之后如果`screen width`是 898，`element height`是 299，等等。
也许有更好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:50:27.147

使用`.animate`方法。

（*并开始使用`var`局部变量*）

```
function minHeightBehavior(width) {
        var width = parseInt(width),
            element = $('#block-views-home-page-slider-block'),
            sliderHeight = $('.views-field-slider').height(),
            minHeight = 315;

        if (width >= 769 && width < 960) {
            minHeight = sliderHeight;
        }

        element.animate({height: minHeight + 'px'}, 500, function(){
           $(this).css({'min-height': minHeight + 'px', 'height':'auto'});
        });

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T16:45:54.943

有没有办法将最小高度设置为百分比？而不是使用像素。

# ruby-on-rails - 在rails中将参数从url解析到下一页

> ID：13402194
> 
> 赞同：0
> 
> 时间：2012-11-15T16:41:39.820
> 
> 标签：ruby-on-rails, forms, parsing, url, hidden

我目前有一个登录页面`/vouchers`，然后有许多页面链接到该页面，例如`/vouchers/1`等等`/vouchers/2`。

我目前有这样的功能，如果输入了这个，`/vouchers/1?offer=50`那么该页面上的表单将与包含在 url 中的报价一起发送。

现在我需要添加功能，所以如果`/vouchers?offer=50`输入，然后导航到的任何页面都将保留这些参数。（例如`/vouchers/1`应该包括来自 url 的报价）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T18:35:28.203

让我猜猜：1\. 你有一个模型，命名为“Voucher” 2\. 如果你想查看 的条目，比如说，voucher#1，你会看到 URL 凭证/1（注意单词 'voucher 的单数形式') 3\. 您通过用户的一些交互来分配报价的价值，例如 - 链接或列表。假设它是一个链接。试试这个（HAML）：

```
= link_to "Accept this offer and create a new voucher", new_voucher_path(:offer => @offer_value) 
```

（在你的情况下@offer_value = 50）

以下视图（或部分视图）将能够读取 :offer 中的值。

你可以参考[这个有用的讨论](https://stackoverflow.com/questions/5207038/the-better-way-to-pass-the-foreign-key-value-to-the-rails-controller)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T16:50:56.960

我只看到一种方式。

*   在会话中存储所有“特殊”参数
*   在任何处理程序中 - 如果“特殊”参数在会话中 - 使用此参数形成新 url 并将用户重定向到那里

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T10:23:17.850

我解决了这个问题，可能不是最好的方式。在`/voucher`页面上，我向所有链接添加了 if 语句，因此如果 url 中有报价，则链接会被适当地附加。

# soap - 使用默认值缩短 WSDL 语法

> ID：13402201
> 
> 赞同：0
> 
> 时间：2012-11-15T16:42:15.563
> 
> 标签：soap, wsdl

我是 WSDL 语法的新手，所以我只是以非常基本的方式使用它，例如

```
<message name="ping_Request">
</message>
<message name="ping_Response">
  <part name="response" type="xsd:string" />
</message>

<message name="auth_Request">
  <part name="username" type="xsd:string" />
  <part name="password" type="xsd:string" />
</message>
<message name="auth_Response">
  <part name="response" type="xsd:string" />
</message>

<portType name="ping_PortType">
  <operation name="ping">
    <input message="tns:ping_Request" />
    <output message="tns:ping_Response" />
  </operation>
</portType>

<portType name="auth_PortType">
  <operation name="auth">
    <input message="tns:auth_Request" />
    <output message="tns:auth_Response" />
  </operation>
</portType>

<binding name="auth_Binding" type="tns:auth_PortType">
  <soap:binding style="rpc" transport="http://schemas.xmlsoap.org/soap/http"/>
  <operation name="auth">
    <soap:operation soapAction="auth"/>
    <input>
      <soap:body use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="urn:auth_NameSpace"/>
    </input>
    <output>
      <soap:body use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="urn:auth_NameSpace"/>
    </output>
  </operation>
</binding>

<service name="info_Service">
  <port binding="tns:ping_Binding" name="ping_Port">
    <soap:address location="https://service.example.com/info/info.php"/>
  </port> 
  <port binding="tns:auth_Binding" name="auth_Port">
    <soap:address location="https://service.example.com/info/info.php"/>
  </port> 
</service> 
```

我发现我自己为任何新功能复制和粘贴这些块，只修改相关的关键字，因此即使对于相对较少的功能，我最终也会得到相当长的 WSDL。

通过使用 WSDL 默认值，是否可以通过删除不必要或重复的参数来将这种语法缩短到最低限度？

注意：此 WSDL 必须由 VB6 soap 客户端库读取，它的功能非常有限。

# iphone - 每当 iAd 不提供广告内容时，应用因隐藏而被拒绝

> ID：13402203
> 
> 赞同：0
> 
> 时间：2012-11-15T16:42:27.253
> 
> 标签：iphone, xcode, iad, appstore-approval

我的应用刚刚被拒绝，因为“只要 iAd 不提供广告内容，应用内的横幅就应该隐藏。” 然后他们提供这个示例代码；

```
- (void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error
{
    if (self.bannerIsVisible)
    {
        [UIView beginAnimations:@"animateAdBannerOff" context:NULL];
        // assumes the banner view is at the top of the screen.
        banner.frame = CGRectOffset(banner.frame, 0, -banner.frame.size.height);
        [UIView commitAnimations];
        self.bannerIsVisible = NO;
    }
} 
```

现在我的 iAd 显示在屏幕底部而不是顶部。我还想计算 3.5 和 4 英寸的屏幕，所以这是我的代码；

```
- (void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error
{
    if (self.bannerIsVisible)
    {
        [UIView beginAnimations:@"animateAdBannerOff" context:NULL];

        CGSize result = [[UIScreen mainScreen] bounds].size;
        CGFloat scale = [UIScreen mainScreen].scale;
        result = CGSizeMake(result.width * scale, result.height * scale);

        if(result.height == 1136){
            banner.frame = CGRectOffset(banner.frame, 498, -banner.frame.size.height);
        }else{
            banner.frame = CGRectOffset(banner.frame, 410, -banner.frame.size.height);
        }

        [UIView commitAnimations];
        self.bannerIsVisible = NO;
    }
} 
```

真正烦人的部分是我的代码在我的测试 iPhone 和 iOS 模拟器上都能正常工作。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T18:10:28.903

如果您的横幅位于底部，您应该求和`banner.frame.size.height`而不是减去以隐藏横幅。无需针对不同的屏幕进行额外的计算。

所以，这应该足够了：

```
banner.frame = CGRectOffset(banner.frame, 0, banner.frame.size.height); 
```

# php - 发布到用户墙并发表评论

> ID：13402205
> 
> 赞同：0
> 
> 时间：2012-11-15T16:42:33.890
> 
> 标签：php, joomla, jomsocial

我正在使用移动应用程序（html、jQuery、php）与 JomSocial 进行交互，并且我已经能够发布到群组、讨论等。我这样做的方法是通过 url 查看控制器并转到实际的控制器类，例如`/controllers/groups.php`，看看它是如何实现的。所以当我看到时`www.mysite.com/groups/1`，我知道控制器是`groups.php`

遇到的问题是用户的个人资料不是这样的。网址看起来像

```
www.mysite.com/1200-victor-gee-fred/profile 
```

我认为这将是 profile.php，但没有什么比在该课程中张贴到墙上的了。

**问题**：什么控制器正在处理用户配置文件的显示？如果您还知道我如何在个人资料墙上发帖并对其进行回复/评论，我将不胜感激。

> 我知道涉及这些表：**_users**、**_wall**、**_actvities**等。但是保存到这些表中的顺序是我不想错过的，并且除了用户的个人资料墙之外，其他实体也已成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:54:04.160

以防将来有人需要这个，我终于找到了控制器。

```
components/com_community/controllers/system.php 
```

使用了这些功能

*   `public function ajaxStreamAdd($message, $attachment)`- 进入 jom_community_activities 表，其中`$message`在“共享”框中输入的文本`$attachment`是 JSON 编码的字符串，其中包含目标、参与者、访问级别、应用程序等

*   `public function ajaxStreamAddComment($actid, $comment)`- 进入 jom_community_wall 表，其中 $actid 是发布 $comment 的用户的用户 ID

此致

# .net - PostSharp 诊断工具包 - 可以更改消息格式吗？

> ID：13402206
> 
> 赞同：1
> 
> 时间：2012-11-15T16:42:45.293
> 
> 标签：.net, log4net, postsharp

我正在使用带有 Log4Net 的 PostSharp 诊断工具包，它运行良好。但是，输出在每行中包含两次命名空间和类。

Log4Net 配置为使用标准模式布局

```
<layout type="log4net.Layout.PatternLayout">
  <conversionPattern value="%date [%thread] %level %logger - %message%newline" />
</layout> 
```

这正在产生输出：

```
2012-11-15 11:03:22,992 [ServerScheduler_Worker-3] DEBUG MyNamespace.MyClass - Entering: MyNamespace.MyClass.MyMethod(DateTime date = {11/15/2012 00:00:00}) 
```

注意 MyNamespace.MyClass 是重复的。我确实希望 Log4Net 为 PostSharp 未注入的日志语句输出 %logger（命名空间和类）。

如何将 PostSharp 配置为仅输出方法名称而不是完整的 namespace.classname.methodname？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T07:54:33.143

这是个好的观点。目前无法自定义。我在我们的待办事项列表中添加了一个用户故事。

# xcode - Xcode IBOutlets 未在 storybuilder 中显示

> ID：13402211
> 
> 赞同：0
> 
> 时间：2012-11-15T16:42:53.907
> 
> 标签：xcode, storyboard, iboutlet

这是我在 ViewController.h 中的代码

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController {
    IBOutlet UITextField *text1;
}

@end 
```

当我希望它成为故事板中文本框的出口时，它根本不会出现。

提前致谢。

# sql - LINQ 翻译的结果与我的 SQL 查询不同

> ID：13402216
> 
> 赞同：2
> 
> 时间：2012-11-15T16:43:08.883
> 
> 标签：sql, linq, linq-to-sql

大家好，我有这个 SQL 查询（MSSQL），我正在做一个查询，其中连接的结果按日期为我提供了最新行的“顶”行，而没有重复的结果，你可以在这里找到我的信息我在做[http://goo.gl/Uv0FR](http://goo.gl/Uv0FR)事情是这样的，我已经完成了 SQL 查询，正在按预期工作，我为每个 IDKEY 在子句“where pi.PlazaIe in ('','') 不重复

```
Select * from PlazaI pi
join (
    Select * from PlazaE pe where 
    NOT EXISTS(SELECT 1 FROM PlazaE pe1 
    WHERE pe.Id_plaza = pe1.Id_plaza AND pe1.Fecha > pe.Fecha AND pe1.Fecha < GETDATE() and pe1.Id_Emp != 0) 
) pe on pe.Id_plaza = pieepo.Id_plaza
join Emp e on pe.Id_Emp = e.Id_Emp
join View ct on ct.Id_Nodo = pe.id_nodo
where pi.PlazaIe in ('value1','value2') 
```

问题是当我试图从 SQL 转换为 LINQ 时是无法实现的。（我是这个 Linq 世界的新手）

以下是我的 linq 查询。

```
var q1 = (from pe in db.PlazaEmpleados 
               where !db.PlazaEmpleados.Any
                                    (
                                     pe1 => (pe1.Id_plaza.Equals(pe.Id_plaza) && pe1.Fecha > pe.Fecha && pe1.Id_Emp != 0 && pe1.Fecha > DateTime.Now)
                                    ) select pe);

    var q2 = (from pi in db.Context
              join pe in (q1) on pi.Id_plaza equals pe.Id_plaza
                select new EmpVO
                  {
                    Id_Nodo = pe.id_nodo,
                    Id_plaza = pi.PlazaSome,
                    Num_Plaza = pi.Id_plaza,
                  }); 
```

当我运行这个 linq2sql 查询时，我得到了重复的结果，而不是每个值只有 1 个。所以问题是，我想知道是否有人可以以一种好的方式将 SQL 查询转换为 LINQ 查询，或者指出错误在哪里。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T17:22:32.970

您对日期的检查不同：

林克：

```
pe1.Fecha > DateTime.Now 
```

SQL：

```
pe1.Fecha < GETDATE() 
```

您的 LINQ 不应该是：

```
pe1.Fecha < DateTime.Now 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T18:13:52.420

我没有找到解决我问题的答案，所以我最后做的是使用

```
db.ExecuteQuery<ObjectVO>(sqlQuery); 
```

我知道这不是最佳实践，也没有解决为什么我的 sql 查询和我的 linq 查询没有得到相同的结果集的问题，但之前的答案没有。

另一件事是我的查询变得复杂（新的业务逻辑要求）必须加入 7 个表并搜索最大日期和移动是其中的一些，所以现在将查询转换为 linq to sql 更加复杂。

感谢您的支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T14:27:13.780

这部分：

```
var q1 =  from pe in db.PlazaEmpleados 
          where !db.PlazaEmpleados.Any
           (pe1 => 

            pe1.Id_plaza.Equals(pe.Id_plaza) && 
            pe1.Fecha > pe.Fecha &&
            pe1.Id_Emp != 0 && 
            pe1.Fecha < DateTime.Now
           ) 
          select pe; 
```

在 SQL 中，您首先使用 PlazaI，然后是 PlazaE——在 Linq 中，您两次都使用 PlazaEmpleados。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T09:43:49.580

将您的 SQL 查询放入存储过程并将其添加到上下文中。然后只需调用：

```
var q = context.MyProcedure(new object[] {"value1","value2"}); 
```

# c# - 如何组合两个 LINQ 表达式？

> ID：13402219
> 
> 赞同：3
> 
> 时间：2012-11-15T16:43:10.893
> 
> 标签：c#, linq, expression

我在 c# 中有以下 LINQ 查询

```
var stats = from s in context.Stats                                                                                                  
        select s;

Expression<Func<Stat, bool>> e1 = s => s.Age >= 15 && s.Age < 25;
Expression<Func<Stat, bool>> e2 = s => s.Age >= 40 && s.Age < 50;

stats = stats.Where(e1); 
```

此代码有效，并为我提供了 Stats 表中 Age 介于 15 到 25 之间的行。

现在，我想获得从 15 到 25 和从 40 到 50 的行。

我如何结合这两个表达式？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T16:46:09.437

怎么样...

```
Expression<Func<Stat, bool>> e1 = s => 
   (s.Age >= 15 && s.Age < 25) || (s.Age >= 40 && s.Age < 50); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-15T16:49:29.460

这有点难看，但是如果您想将它们保留为表达式：

```
stats = stats.Where(s => (e1.Compile()(s) || e2.Compile()(s))).ToList(); 
```

如果您可以将它们更改为`Func`s 它会更干净：

```
Func<Stat, bool> e1 = s => s.Age >= 15 && s.Age < 25;
Func<Stat, bool> e2 = s => s.Age >= 40 && s.Age < 50;

stats = stats.Where(s => e1(s) || e2(s)).ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T17:05:07.173

你可以做一个这样的联盟

```
stats = stats.Where(e1).Union(stats.Where(e2)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T16:49:48.723

```
Expression<Func<Stat, bool>> GetOrExpression(
    Expression<Func<Stat, bool>> e1,
    Expression<Func<Stat, bool>> e2)
{
    return s => e1.Compile()(s) || e2.Compile()(s);
}

Expression<Func<Stat, bool>> e1 = s => s.Age >= 15 && s.Age < 25;
Expression<Func<Stat, bool>> e2 = s => s.Age >= 40 && s.Age < 50;

stats = stats.Where(GetOrExpression(e1, e2)); 
```

# c# - 索引超出范围，但为什么？

> ID：13402220
> 
> 赞同：0
> 
> 时间：2012-11-15T16:43:12.997
> 
> 标签：c#, asp.net

我有一个gridview，我有一个`SelectedIndexChanged`事件......

```
protected void GridView1_SelectedIndexChanged(object sender, EventArgs e)
{
    GridViewRow Row = GridView1.SelectedRow;

    //do some stuff
} 
```

然后我得到一个错误...

> 指数超出范围。必须是非负数且小于集合的大小。参数名称：索引

我不明白为什么，Gridview 被绑定在页面加载中。但不是在回邮...

```
if (!IsPostBack)
{
    GridView1.DataSource = UserAccounts;
    GridView1.DataBind();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T16:48:11.690

asp.net`DataSource`控件会自动为您处理此问题，但如果您手动绑定您`GridView`的`PostBack`. 如果根据过滤器等对数据源进行更改，则需要重新绑定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T16:54:58.603

第一件事：回发到服务器时，您的 GridView1 将重新初始化，这样 GridView1.DataSource 将丢失以前的数据

```
if (!IsPostBack)
{
        GridView1.DataSource = UserAccounts;
        GridView1.DataBind();
} 
```

第二件事：如果您手动将 GridView 与您的自定义 DataTable、List 绑定......您必须使用特定的 DataKey 实现 RowCommand。

请看这篇文章[http://aspspirits.blogspot.com/2012/08/how-to-get-rowindex-of-aspnet-gridview.html](http://aspspirits.blogspot.com/2012/08/how-to-get-rowindex-of-aspnet-gridview.html)

# php - 只显示三个记录，然后移动到下一行

> ID：13402225
> 
> 赞同：1
> 
> 时间：2012-11-15T16:43:23.297
> 
> 标签：php, html

这是一个非常基本的问题，但我对 PHP 很陌生。我需要在这样的情况下显示结果，即同一行中只有三个记录然后添加`<br />`，然后在下一行，应该发生同样的事情。我无法理解它的逻辑并且遇到了很大的麻烦:(现在，我只是使用简单的方法，即

```
while($data = mysql_fetch_array($res_set)) {
?>
 <div><?php echo $data['name']?><img src="images/<?php echo $data['image']?>" /></div>
<?php
} 
```

这是我的代码

```
$cnt = 0;

while ($prd = mysql_fetch_array($res)) {

?>
                <div class="imageRow">
                <?php

    $cat_id = $prd['cat_id'];
$sql = "select * from tbl_category where id = $cat_id";
$cat_res    = mysql_query($sql);
$cat_data   = mysql_fetch_array($cat_res);
$cat_name   =   $cat_data['name'];

?>

                        <div class="set">
                            <div class="single first">
                                <a href="<?php echo $ru ?>admin/product_images/<?php echo $cat_name ?>/thumb/<?php echo $prd['thumb_img'] ?>" rel="lightbox[plants]"><img src="<?php echo $ru ?>admin/product_images/<?php echo $cat_name ?>/large/<?php echo $prd['thumb_img'] ?>" style="height: 100px; width: 100px;" /></a><br />
                                <a href="<?php echo $ru ?>contact_form.php?id=<?php echo $prd['id'] ?>">Choose</a>
                            </div>

                        </div>

</div>
                <?php
                $cnt = $cnt++;
                if($cnt%3 == 0) {echo "<br />";}
                }

                //echo  $cnt;

                ?> 
```

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T16:46:19.510

```
<div class="imageRow">
<?php
$i = 0;
while($data = mysql_fetch_array($res_set)) { ?>
    <div>
        <?php echo $data['name']; ?><img src="images/<?php echo $data['image']; ?>" />
    </div>
    <?php
    $i++;
    if($i % 3 == 0) {
        echo '</div><div class="imageRow"><br />';
    }
}
?>
</div> 
```

**解释：**

将变量 $i 设置为一个数字，然后该数字将用于跟踪您编写了多少项目。

然后，在 while 循环中，递增 $i ($i++)，这与 $i = $i + 1; 相同；通过这样做，你总是知道你在哪个项目上——不管 $i 的值是多少。有些人选择最初将其设置为 1，然后在最后递增 - 其他人喜欢将其设置为 0，然后将其设置为接近开头 - 要么完全没问题 - 无论你需要它做什么/你更喜欢哪种方式。

最后，检查 $i 是否能被 3 整除（有点像余数 - 它被称为“mod”，由百分比符号表示）。如果是，则回显换行符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T16:48:50.897

尝试这个

```
<?php
echo "<div>";

while($data = mysql_fetch_attay($res_set)) {
?>
 <div style="width:30%; float:left"><?php echo $data['name]?><img src="images/<?php echo $data['image']?>" /></div>
<?php
}

echo "</div>";

?> 
```

输出

```
<div>
    <div>1</div> <div>2</div> <div>3</div>
    <div>1</div> <div>2</div> <div>3</div>
    <div>1</div> <div>2</div> <div>3</div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T16:50:36.913

那是您那里的一些超级丑陋的代码。这将满足您的需要，并且更清洁。

```
<?php
$i=1;
while($data = mysql_fetch_attay($res_set)) {
    $frame = '<div><img src="%s" /></div>';
    printf($frame, $data['image']);
    if($i % 3 == 0) { echo '<br />'; }
    $i++;
} 
```

此外，`<img>`元素一开始就已经是块元素，你真的不需要`<div>`在它们周围包裹另一个元素。

# ruby-on-rails - 检查表列是否包含某个值

> ID：13402226
> 
> 赞同：1
> 
> 时间：2012-11-15T16:43:24.827
> 
> 标签：ruby-on-rails, ruby

检查表列值的任何代码？假设我们有一个表`submittedpictures`，它包含一个名为 的列`isFinalPicture`。有 5 条记录，但只有一条有`isFinalPicture == true`. 其他的都是假的。

我怎样才能检查这个？

我已经尝试过类似的东西

```
<% if @user.games.rounds.submitted_pictures.isFinalPicture.include?(true) %> 
```

但它并没有真正起作用，而且我没有想法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T16:45:30.433

也许是这样的：

```
<% if @user.games.rounds.submitted_pictures.where(:isFinalPicture => true).any? %> 
```

# asp.net-mvc - 发布到编辑控制器操作未传递模型 ID

> ID：13402227
> 
> 赞同：3
> 
> 时间：2012-11-15T16:43:25.870
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我的控制器上有一个如下所示的操作：

```
[HttpPost]
public ActionResult Edit(EditMyObjectViewModel editMyObjectViewModel)
{
} 
```

`EditMyActionViewModel`包含一个`MyObject`

这被传递到编辑视图（上述控制器操作的 GET 版本）

当它重新发布时，ID 没有设置....
如果我将控制器更改为：

```
[HttpPost]
public ActionResult Edit(Guid id, EditMyObjectViewModel editMyObjectViewModel)
{
    editMyObjectViewModel.ID = id;
} 
```

这行得通，但似乎有点不对劲？

我想我也可以将视图上的隐藏字段绑定到 Model.ID？

这里有什么约定？

**编辑**

模型/视图模型如下：

```
public class EditMyObjectViewModel
{
    public IEnumerable<SomeItem> SomeUnrelatedStuff { get; set; }
    public MyObject MyObject { get; set; }
}

public class MyObject
{
    public guid ID { get; set; }
    public string Name { get; set; }
} 
```

视图如下：

```
@model MyApp.Models.EditMyObjectViewModel
@using (Html.BeginForm("Edit", "License", FormMethod.Post, new { @class = "form form-horizontal" }))
{
        @Html.TextboxFor(x=>x.MyObject.Name);
        <input type="submit" class="btn btn-success" value="Create Modification" />
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-15T16:54:07.590

没错，您要么需要创建一个隐藏字段来保存 id，要么需要将 ID 作为参数添加到操作方法中。

问题只是 id 来自哪里以及它是如何填充的。默认模型绑定器从表单字段填充模型；它不会使用查询参数。并且查询参数不会进入模型，但会填充到操作方法的参数中。

您可以做的另一件事是创建自定义模型绑定器以将查询参数填充到模型中。但在这种情况下，这感觉有点矫枉过正。另外，您必须为每个页面/模型执行此操作。

是我，我会将 id 添加到操作方法中。

# php - 404 找不到文件

> ID：13402230
> 
> 赞同：1
> 
> 时间：2012-11-15T16:43:36.787
> 
> 标签：php, .htaccess, amazon-ec2, http-status-code-404, bitnami

我正在使用亚马逊 EC2，bitnami LAMP AMI。我最近添加了一个文件夹，这样我就可以测试另一个网站，例如 www.website.com/foldername/ 我对那个文件夹做了 chmod 777，所以我可以访问它，但问题是我只能访问位于 www 的主页。 website.com/foldername/ 当我单击任何其他页面时，它会返回我

```
Not Found

The requested URL /foldername/landing was not found on this server. 
```

据我所知，该模板适用于其他不使用亚马逊的人，以下是我的 htaccess

```
 SetEnv APPLICATION_ENV development

Options -Indexes
Options +FollowSymLinks
DirectoryIndex index.php index.html

<IfModule mod_rewrite.c>
RewriteEngine on

RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^(.*)\?*$ index.php [L,QSA]

#remove www.
#RewriteCond %{HTTPS} off
#RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
#RewriteRule ^(.*)$ http://%1/$1 [R=301,L]

#RewriteRule ^(.*\.(png|jpg|jpeg|gif))$ index.php?controller=minify&action=index&file_path=$1&ext=$2 [L,NC]
#RewriteRule ^(.*\.(css|js))$ index.php?controller=minify&action=jscss&file_path=$1&ext=$2 [L,NC]

</IfModule>

ErrorDocument 404 index.php

<ifModule mod_expires.c>
ExpiresActive On
ExpiresDefault "access plus 1 seconds"
ExpiresByType application/x-javascript "access plus 216000 seconds"
</ifModule>

<FilesMatch "\.(htaccess|htpasswd|ini|log|sh|inc|bak|cache)$">
Order Allow,Deny
Deny from all
</FilesMatch> 
```

希望有人可以在这里帮助我。:\

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:08:59.263

这实际上是一个apache问题。对不起！:) 有人建议我不要将 bitnami 用于生产，由于某种原因，它的 apache 禁用了一些东西，这对开发有好处。

# arm - ARM 的 libcap-bin

> ID：13402231
> 
> 赞同：0
> 
> 时间：2012-11-15T16:43:44.597
> 
> 标签：arm, embedded-linux, buildroot

我想在嵌入式 Linux 设备上使用 setcap，它是 libcap-bin 的一部分。我使用 buildroot 并看到它有包 libcap 和 libcap-ng 可用，但没有 libcap-bin。

我四处搜索，但找不到 libcap-bin 为 ARM 目标板生成 setcap 二进制文件的源代码。

在 Ubuntu 上，我只安装：

```
sudo apt-get install libcap-bin 
```

我在哪里可以获得源代码以及如何为我的 ARM 板构建 libcap-bin？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T23:06:09.113

正如其他人所解释的那样：您不能期望您在 Ubuntu/Debian 发行版中看到的软件包与您在 Buildroot 中看到的软件包之间存在 1:1 的匹配。

Ubuntu/Debian 包获取源包（在本例中为 libcap）并从中创建多个二进制包，以便您只安装库，或库 + 开发文件，或库 + 程序等。例如，查看[http://packages.ubuntu.com/source/quantal/libcap2](http://packages.ubuntu.com/source/quantal/libcap2)，这是 libcap2 源包的参考页面：它为您提供了 Ubuntu 中从此源包生成的二进制包的列表。

另一方面，在 Buildroot 中，只有源包的概念。Buildroot 中的一个包 == 来自给定软件组件的一个 tarball。因此，只有`package/libcap`. 目前，`package/libcap/libcap.mk`写成只安装库，因为没有人需要`setcap`和`getcap`程序。但是您也可以扩展`package/libcap/libcap.mk`（并且可能`package/libcap/Config.in`）以启用程序的编译。正如另一位评论者所指出的，您需要将其添加`attr`为依赖项（尽管评论者错误地说 Buildroot 没有 attr：它确实有，请参阅 参考资料`package/attr`）。

# php - mysqli_fetch_object($class_name) 在创建新对象实例时不使用 __set() 方法

> ID：13402232
> 
> 赞同：0
> 
> 时间：2012-11-15T16:43:50.260
> 
> 标签：php, mysqli, magic-methods

这是我的 php 类：

```
class Category {
    private $cat_id;
    private $cat_name;
    private $cat_is_main;
    private $cat_parent;

    function __get($key) {
        switch ($key) {
            case 'cat_id':
                return $this->cat_id;
            case 'cat_name':
                return $this->cat_name;
            case 'cat_is_main':
                return $this->cat_is_main;
            case 'cat_parent':
                return $this->cat_parent;
        }
    }

    function __set($key, $value) {
        switch ($key) {
            case 'cat_id':
                $this->cat_id = (int) $value;
                break;
            case 'cat_name':
                $this->cat_name = (string) $value;
                break;
            case 'cat_is_main':
                $this->cat_is_main = (bool) $value;
                break;
            case 'cat_parent':
                $this->cat_parent = (int) $value;
                break;
        }
    }
}
$conn = new mysqli($server, $username, $password, $dbname);
if ($result = $conn->query('SELECT cat_id, cat_name FROM categories WHERE cat_id = 1;')) {
    var_dump($result->fetch_object('Category'));
} 
```

我得到了：

```
object(Category)#5 (4) {
    ["cat_id":"Category":private]=> string(1) "1"
    ["cat_name":"Category":private]=> string(9) "test data"
    ["cat_is_main":"Category":private]=> string(1) "1"
    ["cat_parent":"Category":private]=> string(1) "0"
} 
```

我期待的是这样的：

```
object(Category)#1 (4) {
    ["cat_id":"Category":private]=> int(1)
    ["cat_name":"Category":private]=> string(9) "test data"
    ["cat_is_main":"Category":private]=> bool(true)
    ["cat_parent":"Category":private]=> int(0)
} 
```

创建新对象时，[mysqli_fetch_object()](http://php.net/manual/en/mysqli-result.fetch-object.php)似乎没有使用我的 __set() 方法。它只是一些如何直接为我的私有属性设置值。
这在 PHP 中正常吗？我还能做些什么来得到我想要的吗？
谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:55:08.490

当`mysqli_fetch_object()`创建一个对象时，它基本上会创建一个`stdClass`包含所有属性集的第一个对象，然后将对象的类切换到您提供的类，然后运行构造函数。正如您所注意到的，该`__set()`方法没有被调用，但这是正常的，也是该函数的工作原理。

# asp.net-mvc - ASP MVC 创建 CustomRoute 子域？

> ID：13402233
> 
> 赞同：0
> 
> 时间：2012-11-15T16:43:54.200
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

在我的 asp mvc 应用程序中，我有一个继承 RouteBase 的 CustomRoute（此类用于**处理子域**url）

```
public class CustomRoute : RouteBase
{
        public override RouteData GetRouteData(HttpContextBase httpContext)
        {
             // do something
        }

        public override VirtualPathData GetVirtualPath(RequestContext requestContext, RouteValueDictionary values)
        {
            // do something
        }
} 
```

我在 Global.asax.cs 文件中的 RegisterRoutes 方法：

```
public static void RegisterRoutes(RouteCollection routes)
{
      routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

      routes.Add(new CustomRoute());

      routes.MapRoute(
                    name: "Default",
                    url: "{controller}/{action}/{id}",
                    defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
                );
} 
```

我的目标是处理所有包含基于 CustomRoute 的子域的 url，因为另一个 url 将使用 asp mvc 默认路由。如何？任何帮助将不胜感激

其他问题是：所有包含子域的资源（action / css / image ....），它绝对首先由CustomRoute处理:-(

感谢您阅读到最后:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:07:05.033

您可以将资源添加到`IgnoreRoute`列表中

```
 routes.IgnoreRoute("/Content/CSS/{*pathInfo}");
 routes.IgnoreRoute("/Content/Images/{*pathInfo}"); 
```

# java - 使用 JAXB 更改 MapAdapters 默认元素输出名称

> ID：13402235
> 
> 赞同：1
> 
> 时间：2012-11-15T16:43:59.940
> 
> 标签：java, xml, serialization, jaxb

我创建了以下类以将 a 映射`Map<String, DynamicTarget>`到 a `DynamicTarget[]`：

```
class DynamicTargetMapAdapter extends XmlAdapter<DynamicTarget[], Map<String, DynamicTarget>> {

    public DynamicTarget[] marshal(Map<String, DynamicTarget> arg0) throws Exception {
        DynamicTarget[] mapElements = new DynamicTarget[arg0.size()];
        int i = 0;
        for (DynamicTarget d : arg0.values()) mapElements[i++] = d;
        return mapElements;
    }

    public Map<String, DynamicTarget> unmarshal(DynamicTarget[] arg0) throws Exception {
        Map<String, DynamicTarget> r = new HashMap<String, DynamicTarget>();
        for (DynamicTarget d : arg0) r.put(d.getName(), d);
        return r;
    }

} 
```

结果是这样的：

```
<dynamicTargets>
    <item>
        ...
    </item>
    <item>
        ...
    </item>
    <item>
        ...
    </item>
</dynamicTargets> 
```

但这就是我想要实现的目标：

```
<dynamicTargets>
    <target>
        ...
    </target>
    <target>
        ...
    </target>
    <target>
        ...
    </target>
</dynamicTargets> 
```

我需要做什么才能获得所需的输出？

# c - 使用 malloc 的 MPI 动态数组

> ID：13402241
> 
> 赞同：1
> 
> 时间：2012-11-15T16:44:49.017
> 
> 标签：c, arrays

我在使用 malloc 和 calloc 创建动态数组时遇到问题。

```
    int main() {
      浮动 *xd_real_send;
      int Nooflines_Real;
      诠释*X；
      浮动测试[500]；

      Nooflines_Real = count_lines(infile);
      printf("Nooflines_Real: %d\n", Nooflines_Real);

      X = (int *) malloc(Nooflines_Real*sizeof(int));
      xd_real_send = (float *) calloc (Nooflines_Real,sizeof(float));

      printf("X %d 的大小，测试 %d 和 xd_real_send 的大小 %d\n",
      sizeof(X)/sizeof(int),sizeof(test)/sizeof(float),
      sizeof(xd_real_send)/sizeof(float));fflush(stdout);

    }

```

输出是

```
    Nooflines_Real：40
    X 2 的大小，测试 500 和 xd_real_send 2 的大小

```

你能告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:48:07.373

`X`并被`xd_real_send`定义为指针。

应用的`sizeof`运算符返回指针使用的内存量，而不是指针所指的大小。

一旦动态分配并由某个指针引用，就不可能（以任何可移植的方式）请求内存块的大小。

对于动态分配的内存，应用程序需要注意跟踪这些内存块的大小。

* * *

`test`被明确定义为数组，因此`sizeof`能够确定数组的大小。

# c# - 如何使用文本框过滤没有数据源的数据网格视图

> ID：13402260
> 
> 赞同：1
> 
> 时间：2012-11-15T16:46:14.923
> 
> 标签：c#, winforms, datagridview, filter

与此处相同的问题： [问题](https://stackoverflow.com/questions/6996375/how-to-filter-datagridview-using-a-textbox-in-c)

但就我而言，我的 dataGridView1.DataSource 为空。我使用 dataGridView1.Rows.Add 函数向表中添加行。是否可以使用没有DataSource的文本框添加过滤器dataGridView的列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-02-01T07:40:32.703

或者您可以使用以下代码：

```
if (textBox1.Text != string.Empty)
            {
                foreach (DataGridViewRow row in dataGridView1.Rows)
                {
                    if (row.Cells[column_index].ToString().Trim().Contains(textBox1.Text.Trim()))
                    {
                        row.Visible = true;
                    }
                    else
                        row.Visible = false;
                }
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T16:53:19.437

可以过滤没有数据源的数据网格，但我怀疑不是。

无论如何，一个更简单的解决方案是只给网格一个数据源。而不是以编程方式将行添加到数据网格，而是创建一个`DataTable`并向其添加行，然后将网格的数据源设置为该表。现在您可以使用标准过滤方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-01T07:36:32.320

向datagridview添加行，创建一个`DataTable`并向其添加行并将其绑定到datagridview。现在您可以使用 TextBox 进行搜索。

```
DataTable table = new DataTable();
table.Columns.Add("Column_Name1", typeof(String));
table.Columns.Add("Column_Name2", typeof(String));
......

foreach (var element in list)
   table.Rows.Add(element.Column_Name1, element.Column_Name2, ...);

dataGridView1.DataSource = table;
table.DefaultView.RowFilter = "Column_Name1 Like '"+TextBox.Text+"'"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-24T06:32:12.647

你也可以试试 linq

```
 private void filter()
        {
            if (this.txtsearch.Text != string.Empty)
                 this.dataGridView1.Rows.OfType<DataGridViewRow>().Where(r => r.Cells["column_name"].Value.ToString() == this.txtsearch.Text.Trim()).ToList().ForEach(row => { if (!row.IsNewRow) row.Visible = false; });
            else
                 this.dataGridView1.Rows.OfType<DataGridViewRow>().ToList().ForEach(row => { if (!row.IsNewRow) row.Visible = true; });

        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-01T01:20:10.070

@Rakesh Roa M 所做的很好，但我更进一步，首先让它在 VB.NET 中工作，而且它不区分大小写。和你一样，我也在以编程方式添加内容。如果由于效率低下而在 DataGridView 上有数千个条目，这当然不是最好的方法，但如果记录集有数百个，这应该可以正常工作。

```
 If TextBox1.Text IsNot String.Empty Then

        For Each row As DataGridViewRow In DataGridView1.Rows

            If row.Cells("your_column_name").Value.ToString().ToUpper().Contains(TextBox_filter.Text.ToUpper().Trim()) Then
                row.Visible = True
            Else
                row.Visible = False                     
            End If
        Next
    End If 
```

# c# - System.Runtime.InteropServices.COMException (0x80080005)：检索具有 CLSID 的组件的 COM 类工厂

> ID：13402262
> 
> 赞同：8
> 
> 时间：2012-11-15T16:46:29.750
> 
> 标签：c#, asp.net, ms-word

我在一个简单的 asp.net c# 应用程序中用来自 SQL Server 的数据替换 MS Word MergeFields，它在本地运行良好，但是当我*经常*发布它时，我得到以下信息：

```
System.Runtime.InteropServices.COMException (0x80080005): Retrieving the COM class factory for component with CLSID {00020906-0000-0000-C000-000000000046} failed due to the following error: 80080005. 
```

我尝试同时授予`IIS_IUSRS`和`NETWORK SERVICE`完全访问权限，并在 DCOM 配置中将身份设置为交互式，但它没有解决任何问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T12:10:03.687

对于令人讨厌的权限，阻止你做你期望的事情，（我过去也遇到过）。有时我也不得不将我的 DCOM/COM+ 权限更改为一个对象。在项目的 DCOM 配置选项卡屏幕上，在安全性下，确保“启动和激活”和“访问”都已自定义为明确包含您打算允许的用户帐户。

现在，还有一件事——只是为了排除所有其他事情。我什至已经达到了（仅用于测试/确认）的程度，即在“身份”选项卡上，您可以选择“交互式用户”、“启动用户”或“此用户”。我会输入您知道您拥有权限的实际帐户（确保您的帐户也在启动和激活中......以及上一个选项卡上的访问权限）。并输入/确认您的密码。

如果仍然失败，那么我会尝试添加 ADMIN 帐户以获得权限并尝试...只是为了是的，它的权限基于用户。一旦确认，您可以缩减它，甚至创建一些主要目的是运行此实用程序的简化受限用户，并且这个新用户有足够的权限这样做。

一旦完成，你应该很高兴。

现在，就是说，我遇到了另一个不稳定的事情并且已经有一段时间了，所以它可能不再是一个问题了。在某些“Windows”更新期间，该功能会定期停止工作。但是，如果我所做的只是返回用户维护，请更改帐户密码（即使只是保持相同的原始密码）并保存它，然后返回 DCOM 并输入/重新确认将其保存在那里，一切都恢复了功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T08:53:08.550

您应该与`NETWORK SERVICE`用户共享保存从模板创建的文档的文件夹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T09:00:42.570

将 更改`dcomcnfg identity`为*interactive*而不是*启动 user*。

**参考：[错误：80070005](http://forums.asp.net/t/1045732.aspx/1)**，这个论坛有一些关于

```
Retrieving the COM class factory for component with CLSID {7979FAA5-3A2A-4E50-A2C9-286C6F34C1D3} failed due to the following error: 80080005 
```

# java - 解决 Vaadin maven 项目中的 java.lang.ClassNotFoundException: com.vaadin.terminal.gwt.server.ApplicationServlet

> ID：13402268
> 
> 赞同：1
> 
> 时间：2012-11-15T16:46:53.243
> 
> 标签：java, maven, vaadin, classnotfoundexception, m2e

目前我们正在使用 maven3 和 git 开发一个 vaadin 应用程序。我们使用 m2e Eclipse 插件和 arche-type "vaadin-archetype-clean" 设置项目。我们对其他 Maven 项目有一些依赖关系。问题是该项目仅适用于我的 maschin (osx)。在我们从 git 中提取它并通过 m2e 插件将项目添加到 Eclipse 之后，我们将它发布到 tomcat v7 Servercode: 500

```
java.lang.ClassNotFoundException: com.vaadin.terminal.gwt.server.ApplicationServlet
 at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)
 at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
 at org.apache.catalina.core.DefaultInstanceManager.loadClass(DefaultInstanceManager.java:532)
 at org.apache.catalina.core.DefaultInstanceManager.loadClassMaybePrivileged(DefaultInstanceManager.java:514)
 at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:133)
 at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1136)
 at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:857)
 at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:136)
 at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
 at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
 at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
 at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
 at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
 at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
 at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
 at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
 at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
 at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
 at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
 at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
 at java.lang.Thread.run(Unknown Source) 
```

我们使用我机器中的文件尝试了多个 mvn:clean、安装、依赖项重置、重新导入。web.xml 和 pom.xml 应该是自动生成的。我们将所有版本设置为 SNAPSHOT。所有机器都有 Eclipse Juno Java EE、jdk 1.6 和最新的 m2e 插件。Gitignore 是

```
Kino/build
Kino/WebContent/VAADIN/widgetsets/*
*.class
ExcelImporter/.classpath
ExcelImporter/.project
ExcelImporter/.settings/
.metadata/
target/ 
```

其中 Kino 是 vaadin 应用程序，而 ExcelImporter 是依赖项目之一。我们还尝试将我的数据（文件夹）放在其他机器上。没有工作:(。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-30T16:58:34.463

你是如何打包应用程序的？

你应该写：

mvn 编译 mvn 战争

然后确保它在 Jetty 下运行：

mvn码头：运行

或者简单地部署到 Tomcat。

# content-management-system - Portlet 图像和内容管理系统

> ID：13402270
> 
> 赞同：0
> 
> 时间：2012-11-15T16:47:02.277
> 
> 标签：content-management-system, portal, websphere-portal

我正在构建一个 Portal 应用程序（WebSphere Portal）：它包括开发几个 Portlet 和一些显示由 Content Management System（IBM Web Content Manager）管理的内容的 Content Portlet。

我知道 Portlet 可以获取存储在内容管理系统中的图像，这可以通过 URL 或该软件公开的 API 来完成。那么，为了最大限度地为用户提供灵活性，是否建议所有 Portlet 中使用的每个图像都来自内容管理系统？

优点是无需部署即可更改图像，但我担心的缺点与性能有关，例如从另一台服务器获取图像所涉及的资源和时间。推荐的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T16:35:27.343

这真的取决于你在做什么......对于一个内容驱动的网站，性能不是一个架构良好的 WCM 系统的问题。对于新闻站点或公司内部网之类的东西，我肯定会尽我所能使用 WCM。我将安装一个单独的 WCM Authoring 服务器并通过联合将它连接到主要的 WebSphere Portal 服务器，并使用本地呈现（Web 内容查看器）portlet 来呈现内容。门户将处理这些资源的呈现和缓存，而且速度非常非常快。

对于通过 portlet（抵押计算器、保险索赔查看器或其他数据操作/表示类型的 portlet）更多地关注自定义功能的站点，将每个小内容项外部化到 WCM 中的开销和麻烦可能不值得。合理的本地化模式会更好地为您服务，因为 WCM 调用会产生一些开销并且提供的好处很少，除非这些 portlet 的内容是*真正*动态的。

您还可以将缓存静态元素从您的 portlet（图像、样式、javascript 文件等）转发到您的 Web 服务器以提高性能。

希望它有所帮助 - 这是一个相当广泛的问题的相当广泛的答案:)

# jquery - jquery .load() 在 IE/Safari 中不起作用

> ID：13402276
> 
> 赞同：3
> 
> 时间：2012-11-15T16:47:30.540
> 
> 标签：jquery, internet-explorer, load

在我的网站上使用 jquery .load() 时遇到了一些奇怪的问题：

虽然在 Chrome/FF/Opera 中没有问题，但该脚本在 IE/Safari 中无法运行。看起来那些浏览器在服务器上找不到 php-Script。

现在它开始变得奇怪：通过完全限定路径调用脚本它突然在 IE/Safari 中工作，但在 Chrome/FF/Opera 中不再工作。

这是我正在做的事情：

```
$(document).ready(function(){
  $('#mainnavi li.sub-li>a, #mainnavi li.top-li>a').mouseover(function(){
    $('#nav_info').empty().show();
    var curSite = $(this).attr('rel');
    $('#nav_info').load('/navInfoContent.php', {pageID: curSite});
  }); 
```

navInfoContent.php 只是一些 SQL 查询，而不是回显 HTML 代码

```
echo ('<p>$variable</p>') 
```

像这样，但语法正确。

如前所述，当我更改为

```
load('http://www.mydomain.de/navInfoContent.php', {pageID: curSite}) 
```

它突然在 IE/Safari 中运行，但在 Chrome/FF/Opera 中不再运行。我已经通过在 URL 中添加一些随机内容来尝试解决方案，以防止 IE 缓存，但这并没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:00:26.903

首先，确保您拥有最新版本的 jquery ...

.

第二：仅在需要时才在 $(document).ready() 中定义您的功能。只要

通常，问题是 ready() 事件。

# ruby-on-rails - Rails：引导更新后出现更少的问题——无法加载此类文件——更少

> ID：13402279
> 
> 赞同：3
> 
> 时间：2012-11-15T16:47:31.697
> 
> 标签：ruby-on-rails, twitter-bootstrap-rails

在引导更新之前一切正常，但现在我有这个错误：

```
cannot load such file -- less
 (in /home/warch/development/railcast_196/app/assets/stylesheets/bootstrap_and_overrides.css.less)` 
```

我试图用谷歌搜索这个没有运气，我已经添加了最新错误解决中指定的较少宝石：

`Gemfile`提炼：

```
gem 'less-rails'
gem 'therubyracer'
...
gem 'twitter-bootstrap-rails' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T19:27:40.990

在资产组中添加您的 Gemfile

gem 'less', '2.2.2' #（在这个日期）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T17:03:43.827

很高兴这是一个已解决的副本：

[使用现有的 rails 应用程序添加 twitter-bootstrap-rails](https://stackoverflow.com/questions/10232945/adding-twitter-boostrap-rails-with-an-existing-rails-app)

我只需要按照[@danieleds 的](https://stackoverflow.com/users/472470/danieleds)回答重新启动。

# java - 将我自己的哈希码用于 hashmap java

> ID：13402281
> 
> 赞同：0
> 
> 时间：2012-11-15T16:47:47.463
> 
> 标签：java, hashmap

我正在编写一个使用 hashmap 的 java 程序。我知道哈希图是如何工作的。如果是 I `add(key,object)`，那么 java 会找到密钥的哈希码并使用它来找到一个存储桶来存储`object`.
现在我有自己`hashcode`的`object`. 我想把它作为关键——比如`add(object.hashcode(),object)`.
是否可以防止java再次散列`object.hashcode()`？因为我已经在实现对哈希码的`hashcode()`调用`hashcode()`将是浪费时间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T16:50:47.237

这样做的方法是实现`hashCode()`在计算哈希值后对其进行缓存。请注意，这意味着您的对象是不可变的，或者至少是在将对象放入地图后贡献`hashCode`并且`equals`不会更改的字段。

您不需要使用哈希码作为密钥。此外，这几乎肯定是错误的做法，因为它实际上**不是**哈希表应该如何工作的。哈希冲突是游戏的名称，因此哈希码仅用于寻址存储桶，但是（名称说明一切）存储桶包含的对象不是一个，而是任意多个。必须检查这些`equals`以找到您正在寻找的确切。

鉴于您最初使用哈希码作为键的想法，看起来您并不是真的在使用地图，而是在使用`HashSet`. 您只是将对象添加到集合中，稍后将要检查对象在其中的存在。那是一套。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T16:50:21.983

除非你有自己的实现，否则你不能这样做。原因是当您使用 get 方法时，散列用于选择您的对象。

# android - 在 Android 中通过蓝牙发送音频文件（到耳机）

> ID：13402283
> 
> 赞同：0
> 
> 时间：2012-11-15T16:47:52.943
> 
> 标签：android, audio, bluetooth, headset

好吧，我在堆栈溢出中阅读了许多关于通过 android 蓝牙传输文件的线程，他们提到发送“任何”文件是相同的，无论是 *.txt 文件还是歌曲。但我正在使用我希望通过蓝牙播放音乐的耳机。它需要这样的协议

音频/视频数据传输协议 (AVDTP) 由高级音频分发配置文件用于通过 L2CAP 通道将音乐流式传输到立体声耳机。旨在供视频分发配置文件使用。在协议栈中，AVDTP 绑定到 L2CAP。

我们必须使用这个协议来传输数据。所以我认为任何正常的文件传输都行不通。有些人可以将我重定向到教程，我可以为这样的应用程序编码或通过任何方式或链接帮助我吗？先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:58:41.417

您只是想从设备播放音乐到蓝牙耳机吗？

如果是这样，您无需执行任何操作即可让它在耳机上播放。只需像往常一样播放音乐（使用 MediaPlayer 或 AudioTrack）并在 Android 设置中配对蓝牙耳机即可正常播放

# javascript - 用于财务报告的 jQuery 插件？

> ID：13402288
> 
> 赞同：1
> 
> 时间：2012-11-15T16:48:02.253
> 
> 标签：javascript, jquery, ajax

`jQuery`关于报告 a`balance sheet`或的一些插件有什么建议`income statement`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-14T19:09:54.617

请在[http://opensource.addepar.com/ember-table查看 Ember 表](http://opensource.addepar.com/ember-table)

> Ember 表允许您通过仅渲染正在显示的行来渲染非常大的数据集。它被编写为带有易于理解和扩展的 API 的 ember 组件。

# asp.net-mvc - MVC 自定义编辑器For

> ID：13402293
> 
> 赞同：2
> 
> 时间：2012-11-15T16:48:21.410
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, html-helper

我一直在试验 MVC（昨天开始），想知道我是否可以创建我的“自定义控件”。

我有以下内容：

在我看来

```
@Html.EditorFor(model => model.UserName, "StringTemplate", new {LabelText = "Test" }) 
```

用于呈现控件的“自定义视图”

```
@model MvcApplication.Models.StringTemplate

@Html.LabelFor(model => model.Field, ViewData["LabelText"].ToString())
@Html.TextBoxFor(model => model.Field) 
```

视图模型

```
public class RegisterModel
{
    [Required]
    public StringTemplate UserName { get; set; }
}

public class StringTemplate
{
    [Required]
    public string Field { get; set; }

    public StringTemplate()
    {
        Field = String.Empty;
    }

    public StringTemplate(string field)
    {
        Field = field;
    }
} 
```

我想要做的是通过调用@Html.EditorFor，利用StringTemplate 并传递值LabelText。如何从视图“StringTemplate”中读取值“Test”？另外，有没有办法可以在“StringTemplate”视图中执行 @Html.ValidationMessageFor() ？

如果有任何教程或链接可以帮助我解决这个问题，我将不胜感激......

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T17:08:34.737

我认为你让事情变得比他们需要的更难。您不必为您的编辑器模板创建一个自定义类来使用——只需使用一个字符串。

所以在你的模型中：

```
public class RegisterModel
{
    [Required]
    public string UserName { get; set; }
} 
```

您的模板看起来像这样（确保将其命名为“String.cshtml”）：

```
@model System.String

@Html.LabelFor(model => model, (string)ViewData["LabelText"])
@Html.TextBoxFor(model => model) 
```

那么在你看来：

```
@Html.EditorFor(model => model.UserName, new {LabelText = "Test" }) 
```

关于 ValidationMessageFor，这也可以添加到您的模板中：

```
@Html.ValidationMessageFor(model => model) 
```

# c++ - 使用 boost::interprocess::file_lock 创建一个锁定文件

> ID：13402294
> 
> 赞同：9
> 
> 时间：2012-11-15T16:48:25.033
> 
> 标签：c++, boost, interprocess, file-locking, boost-interprocess

我想`boost::interprocess::file_lock`用来确保按进程写入目录的文件`x`在完成之前`P1`不会被进程读取`P2`。为此，我想在写入文件时`P1`锁定文件`boost::interprocess::file_lock`，然后在完成后解锁它们。然后`P2`可以跳过（并返回）任何被锁定的文件。

我遇到的问题是它似乎`boost::interprocess::file_lock`只允许您锁定存在的文件。但是，如果我先创建文件，然后将其锁定，则会出现竞争条件：

1.  `P1`创建文件
2.  `P2`注意到文件并开始读取它
3.  `P1`锁定文件
4.  `P1`写入一些数据
5.  `P2`读取一些数据，到达最后，最后只得到`P1`' 的一部分输出。

所以我想做的是创建一个文件并在创建后立即将其锁定。有没有办法做到这一点`boost::interprocess::file_lock`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-21T13:41:53.840

您误解了 boost::interprocess::file_lock 的目的，当您使用 boost::interprocess::file_lock test_lock("my_file") 方法创建 file_lock 时，您并没有保护文件“my_file”不被其他进程读取/写入，你只要声明你有一个引用文件“my_file”的锁，如果其他进程也有引用同一个文件的锁，你可以在这些锁之间实现互斥，但是这些锁并不关心读取/write 对文件“my_file”的操作，该文件只是一个标志

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-07T00:25:47.453

我认为您应该如何避免竞争条件如下：

1.  P1 创建文件
2.  P2 注意到文件：锁定它和 b. 开始阅读
3.  P1 尝试锁定文件，必须等待。
4.  P2 完成读取，解锁文件
5.  P1 锁定文件
6.  P1写入一些数据

如果不清楚，请告诉我。

谢谢，

莫希特

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T18:15:20.517

不可以。但是有一种解决方法，它只使用一个额外的空文件。

在 P2 尝试扫描文件之前，使用 P1 和 P2 都知道的名称创建一个空文件。在 P2 开始扫描之前，它会锁定那个空文件并在扫描完目录后释放锁定（即，它不应该在从文件中读取数据时持有锁定）。在 P1 创建新文件之前，它将锁定该空文件并在新文件创建*并*锁定后释放锁定。

# uiview - 将平移/捏合手势转发到 mkmapview

> ID：13402296
> 
> 赞同：2
> 
> 时间：2012-11-15T16:48:32.127
> 
> 标签：uiview, mkmapview, uigesturerecognizer

我有一个带有 MKMapView 的 UIViewController 和 mapView 顶部的另一个视图（比如说 PaintView）。

当用户用捏合手势触摸 PaintView 时，下面的 mapview 应该响应（以及 paintView 自身）。当用户使用平移手势触摸 Paintview 时，mapview 不得响应。（平移手势用于绘画）。

是否有可能将捏合手势转发到 mapView？

```
[self.view addSubview:self.mapView];
[self.view addSubview:self.paintView];

UIPanGestureRecognizer* panRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(pan:)];
[self.paintView addGestureRecognizer:panRecognizer];
panRecognizer.delegate=self;

UIPinchGestureRecognizer* pinchGesture = [[UIPinchGestureRecognizer alloc] initWithTarget:self action:@selector(pinch:)];
[self.paintView addGestureRecognizer:pinchGesture];
pinchGesture.delegate=self;

-(void)pan:(UIPanGestureRecognizer *)gesture
{
    //do sth in the paintView
}

-(void)pinch:(UIPinchGestureRecognizer *)gesture
{
    //forward pinch gesture to mapview
    //do sth in paintview
} 
```

# c# - ASP.NET 页面周期混乱

> ID：13402297
> 
> 赞同：1
> 
> 时间：2012-11-15T16:48:33.097
> 
> 标签：c#, asp.net, sharepoint, .net-2.0

如果我的 ASP.NET 页面上有一个按钮，它将带您到另一个页面，但该页面会执行某些操作，然后将使用

```
 Uri uu= Request.UrlReferrer;
        if (uu!= null)
            Response.Redirect(uu.ToString()); 
```

现在我可以使用哪个页面事件，以便当其他页面显示时我可以显示一个消息框。

简而言之，我在“aspx”页面中运行我的自定义代码，用户在点击按钮时被定向，然后在自定义代码之后我将用户发送回旧页面，但它发生得如此之快以至于用户没有意识到他去了在另一个页面上，现在我想在用户从同一页面重定向后显示一个消息框，该怎么办：S！

[更多信息](https://stackoverflow.com/questions/13401491/best-way-of-displaying-a-message-box-or-confirmation-box-in-asp-net/13402074#13402074)

**编辑**

> 对不起，伙计们，但我根本无法更改按钮所在的 ASP 页面:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:54:57.773

我有点不确定如何`Request.UrlReferrer`设置。我认为这是一个浏览器实现细节。所以我不会相信那个。

我会去像

```
A.aspx -> Redirects to -> B.aspx

B.aspx -> Redirects to -> B.aspx?message=1 
```

并检查是否设置了 message=1。

但是如果你想使用`Request.UrlReferrer`它应该可以访问`Page_Load`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T16:55:58.927

如果您以这种方式使用它，它将永远不会出现在客户面前。也许尝试使用 javascript 延迟重定向，以便通知用户

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T16:59:31.340

最好的办法是在重定向页面上添加一个标志，这样你就可以在标志打开时显示一些特别的东西

```
Uri uu= Request.UrlReferrer;
if (uu!= null)
    Response.Redirect(uu.ToString() + "?Message=DataHasChanged"); 
```

然后在 ASP 页中

```
<% if (Request.QueryString["Message"] == "DataHasChanged") { %>
    <div class="alert">The data has changed. Please review it or whatever</div>
<% } %> 
```

# asp.net - 由于回发，JQueryMobile 对话框显示两次

> ID：13402300
> 
> 赞同：1
> 
> 时间：2012-11-15T16:48:47.870
> 
> 标签：asp.net, jquery-mobile, timer, dialog, postback

我有一个 asp.net 页面，在 UpdatePanel 中嵌入了一个计时器（UpdateMode="Conditional"，ChildAsTriggers="false"）。计时器负责每隔几秒更新该页面的某些组件。

页面上还有一些 HyperLink 控件，单击它们会打开一个 JQueryMobile 对话框（data-rel="dialog"）。问题是我提到的计时器每隔几秒就会导致回发。因此，当打开然后关闭对话框时，之后的第一个此类回发会导致对话框再次打开。

使用 rel="external" 作为我提到的超链接的另一个属性可以解决问题，但这对我来说不是解决方案。这会导致完全重定向到对话框页面，而不是使用 AJAX 显示它（就像在当前页面的顶部一样）。

我的想法是在单击任何超链接时停止计时器。这解决了问题，但我不知道如何在对话框关闭时再次启动计时器。是否可以检测 JQueryMobile 对话框何时关闭？我知道，这听起来很愚蠢，但我想不出更好的主意。请你帮帮我好吗？

所以基本上，我不希望 JQueryMobile 对话框页面在计时器滴答后第二次出现。你能告诉我如何做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T17:09:24.837

带有 asp.net Web 窗体和`UpdatePannel`? 这听起来像是一个可怕的组合。

jQuery Mobile 和 Web 表单基本上不能很好地协同工作。Web 窗体的具体问题需要一个`<form />`包含所有控件（和大多数内容）的元素。jQuery Mobile 尝试通过 ajax 加载来构建具有“虚拟”页面的 DOM。通过提交整个表单而不是在每个页面模板中找到的单个表单，这打破了 PostBack 模型。现在扔进`UpdatePanels`去...

您唯一的希望是只使用单页模板并禁用`data-ajax="false"`链接和表单上的所有 ajax 加载。只是说不`UpdatePanels`。

asp.net MVC 可以让您更好地控制这些问题。

# visual-studio-2010 - 我可以过滤查找/替换以仅在 Visual Studio 中搜索头文件吗？

> ID：13402301
> 
> 赞同：0
> 
> 时间：2012-11-15T16:48:48.553
> 
> 标签：visual-studio-2010, visual-studio, header-files, replace

我在 Visual Studio 2010 中使用查找和替换。目前，我可以过滤搜索以仅查找：

*   当前文件
*   选择
*   所有打开的文件
*   当前项目
*   整个解决方案
*   当前块

这些是一些很棒的过滤器，但我只想在头文件中搜索。有没有办法只在头文件中搜索？

我目前正在使用[grepWin](http://tools.tortoisesvn.net/grepWin.html)在 Visual Studio 外部搜索和完成此操作。有没有办法在 Visual Studio 中进行搜索。插件是可接受的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:56:23.540

与其使用过滤器，不如使用文件类型（可能*与*过滤器结合使用）。`Find Options`在“查找和替换”对话框的“在文件中查找”透视图中打开该部分。

例如，您可以搜索解决方案中的所有 *.h 文件。或在文件夹下找到的所有 *.h 文件`c:\my_projects;c:\work_projects`（过滤器下拉菜单允许多个文件夹）。

# perl - 循环查找命令的输出

> ID：13402303
> 
> 赞同：5
> 
> 时间：2012-11-15T16:48:55.360
> 
> 标签：perl

我想在 Perl 中发出 find 命令并遍历生成的文件路径。我正在尝试这样（但没有任何运气）：

```
my $cmd;

open($cmd, '-|', 'find $input_dir -name "*.fastq.gz" -print') or die $!;

while ($line = <$cmd>) {
   print $line;
}

close $cmd; 
```

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T16:59:35.340

您没有对`*`角色进行足够的转义。前置 a`\`应该修复它。

最好不要一开始就通过分隔参数来调用 shell：

```
use warnings;
use strict;

open(my $cmd, '-|', 'find', $input_dir, '-name' ,'*.fastq.gz', '-print') or die $!;

while (my $line = <$cmd>) {
   print $line;
}

close $cmd; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T17:11:11.950

您的问题似乎是使用单引号。您的变量不会被插值，但变量名称将按`find`原样提供。

但是为什么不使用[`File::Find`](http://search.cpan.org/perldoc?File%3a%3aFind)呢？

```
> perl -MFile::Find -lwe '
    $foo = "perl"; 
    find ( sub { /\.pl$/i or return; print $File::Find::name }, $foo);'
perl/foo.pl
perl/parsewords.pl
perl/yada.pl 
```

在这里，`wanted`子例程只是针对文件名的模式匹配。我们退出（返回）子程序，除非扩展名是`.pl`，否则我们打印带有相对路径的文件名。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T17:08:37.413

如果你要做

```
print 'find $input_dir -name "*.fastq.gz" -print'; 
```

问题应该变得很明显：单引号不会插入。你可能打算做

```
open(my $cmd_fh, '-|', qq{find $input_dir -name "*.fastq.gz" -print}) or die $!; 
```

但这也有问题。您不会转换`$input_dir`为 shell 文字。出现了两种解决方案。

```
use String::ShellQuote qw( shell_quote );

my $cmd = shell_quote("find", $input_dir, "-name", "*.fastq.gz", "-print");
open(my $cmd_fh, '-|', $cmd) or die $!; 
```

或者

```
my @cmd = ("find", $input_dir, "-name", "*.fastq.gz", "-print");
open(my $cmd_fh, '-|', @cmd) or die $!; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-15T18:07:16.513

要读取命令的输出，请使用[反引号运算符](http://p3rl.org/perlop#qx/STRING/)。

```
my $command = "find $inputdir ...";  # interpolate the input directory
my $output  = `$command`;            # be careful here
my @lines   = split /\n/ => $output; # split in single lines

for my $line (@lines) {              # iterate
    # do something with $line
} 
```

我认为它比管道更具可读性。缺点是它会阻塞，所以如果你想处理带有很多行的巨大输出字符串，管道方法可能会更好。

但是您可能想要使用适当的模块。[File::Find](http://p3rl.org/File%3a%3aFind)（核心模块）应该满足您的需求。

# c# - 应用程序池重新启动后缺少 Unity 配置

> ID：13402307
> 
> 赞同：5
> 
> 时间：2012-11-15T16:49:12.393
> 
> 标签：c#, iis-7, unity-container, application-pool

在我`Application_Start`使用 Unity-AutoRegistration 工具配置 Unity 时：

```
UnityFactory.Configure(config => config
    .Include(If.ImplementsITypeName, Then.Register())
    .ExcludeSystemAssemblies()
); 
```

我的`UnityFactory`课是静态的。`Configure`工作方式如下：

```
public static void Configure(Func<IAutoRegistration,IAutoRegistration> configuration)
{
    // Store the configuration to be able to apply it again when needed
    UnityFactory.configuration = configuration;

    // Create new UnityContainer
    container = new UnityContainer();

    // Apply configuration
    configuration(container.ConfigureAutoRegistration()).ApplyAutoRegistration();
} 
```

它在 IIS7 下运行，并且在启动时一切正常。

只要应用程序池被回收，它就会停止工作。配置不知何故搞砸了，它无法再解决我的课程了。`configuration`但是，类中的静态字段`UnityFactory`仍然包含第一次提供的配置。所以类本身并没有改变。

应用程序池回收后不会触发该`Application_Start`方法，因此不会再次应用配置。

如果我设置断点并再次手动应用配置，一切都会再次运行。

这里发生了什么？为什么 Unity 会忘记我的所有课程？是否有我可以订阅的事件让我知道池何时被回收？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T09:02:51.067

显然，当应用程序池被回收时，程序集被释放，这导致 Unity 无法在其中找到任何已声明的类。

我已经设法通过专门为 Unity 加载程序集来解决这个问题。这样，即使应用程序池被回收，它们也会保留在内存中。

```
public static void Configure(Func<IAutoRegistration,IAutoRegistration> configuration)
{
    // Create new UnityContainer with auto registration
    container = new UnityContainer();
    var autoRegistration = container.ConfigureAutoRegistration();

    // Load assemblies
    var path = Path.Combine(System.AppDomain.CurrentDomain.BaseDirectory, "bin");
    foreach (string dll in Directory.GetFiles(path, "*.dll", SearchOption.AllDirectories))
    {
        autoRegistration.LoadAssemblyFrom(dll);
    }

    // Apply configuration
    configuration(autoRegistration).ApplyAutoRegistration();
} 
```

并回答我的问题：

> 这里发生了什么？为什么 Unity 会忘记我的所有课程？

当应用程序池回收时，程序集可能会从内存中释放。当它们再次被需要时，它们会被重新加载。但是，由于它们似乎来自不同的文件，Unity 无法知道它们实际上是与以前相同的程序集，因此无法找到原始类定义。

> 是否有我可以订阅的事件让我知道池何时被回收？

显然，没有这样的事情。

# c# - WPF TableAdapter 不执行填充？

> ID：13402309
> 
> 赞同：1
> 
> 时间：2012-11-15T16:49:21.580
> 
> 标签：c#, sql-server, wpf, visual-studio-2012, wpfdatagrid

我已将 TableAdapter Fill 配置为执行返回行且没有参数的存储过程。但是我似乎无法找到如何获取数据。

```
 <Window
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:WpfDatabind3" x:Class="WpfDatabind3.MainWindow"
    Title="MainWindow" Height="350" Width="525" Loaded="Window_Loaded_1">
<Window.Resources>
    <local:cbfSQL1DataSet x:Key="cbfSQL1DataSet"/>
    <CollectionViewSource x:Key="spTotalRevByZipViewSource" Source="{Binding spTotalRevByZip,  Source={StaticResource cbfSQL1DataSet}}"/>
</Window.Resources>
<Grid>
    <StackPanel HorizontalAlignment="Left" Height="292" Margin="10,10,0,0"  VerticalAlignment="Top" Width="489" DataContext="{StaticResource spTotalRevByZipViewSource}">
        <DataGrid x:Name="spTotalRevByZipDataGrid" AutoGenerateColumns="False" EnableRowVirtualization="True" Height="200" ItemsSource="{Binding}" Margin="106,0,-17,0" RowDetailsVisibilityMode="VisibleWhenSelected">
            <DataGrid.Columns>
                <DataGridTextColumn x:Name="custzipColumn" Binding="{Binding custzip}" Header="custzip" Width="SizeToHeader"/>
                <DataGridTextColumn x:Name="subTotalColumn" Binding="{Binding subTotal}"   Header="sub Total" IsReadOnly="True" Width="SizeToHeader"/>
            </DataGrid.Columns>
        </DataGrid>
    </StackPanel>

</Grid>
 </Window> 
```

后面的代码就是这个。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace WpfDatabind3
{
/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    private void Window_Loaded_1(object sender, RoutedEventArgs e)
    {

        WpfDatabind3.cbfSQL1DataSet cbfSQL1DataSet = ((WpfDatabind3.cbfSQL1DataSet)(this.FindResource("cbfSQL1DataSet")));
        // TODO: Add code here to load data into the table spTotalRevByZip.
        // This code could not be generated, because the cbfSQL1DataSetspTotalRevByZipTableAdapter.Fill method is missing, or has unrecognized parameters.

        WpfDatabind3.cbfSQL1DataSetTableAdapters.spTotalRevByZipTableAdapter  cbfSQL1DataSetspTotalRevByZipTableAdapter = new  WpfDatabind3.cbfSQL1DataSetTableAdapters.spTotalRevByZipTableAdapter();
        System.Windows.Data.CollectionViewSource spTotalRevByZipViewSource = ((System.Windows.Data.CollectionViewSource)(this.FindResource("spTotalRevByZipViewSource")));
        spTotalRevByZipViewSource.View.MoveCurrentToFirst();
        }
    }
} 
```

我在负载中看到了 2 个 TODO 项，但就像我说的那样，我设置了填充，当我在最后进行预览时，我得到了数据。//ToDo 之后的三行在我配置后出现了。为什么我没有得到数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T15:54:27.333

@StephanM

I assume, this happens as you have not mentioned the itemsource for the Datagrid, Could you try amend your code with below `ItemsSource="{StaticResource spTotalRevByZipViewSource}"`

My apologies, if i have misunderstood the question.

Regards

# asp.net - ASP .NET 网页给出 404 错误

> ID：13402310
> 
> 赞同：1
> 
> 时间：2012-11-15T16:49:28.660
> 
> 标签：asp.net, iis-7

我有一个在 IIS 7 和 Windows Server 2008 上运行的网站。

我有网站主页

```
www.mywebsite.com/Default.aspx 
```

主页工作正常。但是，如果我浏览到带有 url 之类的页面

```
www.mywebsite.com/directory/Default.aspx 
```

此页面不起作用。它在 IE/Oops 上给了我 HTTP 404 错误，链接在 Chrome 上似乎已损坏。该目录确实存在于服务器上，并且所有链接直到昨天都正常工作。我不知道为什么会这样。有什么建议么？

# entity-framework - 应用架构 mvc4 ef5

> ID：13402313
> 
> 赞同：2
> 
> 时间：2012-11-15T16:49:29.680
> 
> 标签：entity-framework, asp.net-mvc-4, asp.net-web-api

我正在计划一个项目来开发使用 MVC4、EF5 和 Web Api 的应用程序。请任何人建议我们如何在不同的层设计项目。使用 MVC4 的 Web 和使用 EF5/Repository 模式的数据层和用于 JQuery 访问的 Web Api。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T20:04:14.303

我建议使用下图中显示的层。

![MVC 应用程序中的架构层](../Images/718b75851165e4d455cd08f9b427c490.png)

我添加了处理跨多个存储库的事务[的工作单元设计模式。](http://msdn.microsoft.com/en-us/magazine/dd882510.aspx)而且我还使用处理所有业务逻辑的应用程序或域层。当您使用域层时，您的 Web API 就变成了一个薄层，处理对象到远程客户端的传输和序列化，例如您的 Web 客户端（即 Web 浏览器）。Web 客户端使用 JQery ajax 与 Web API 进行通信。MVC 控制器用于渲染视图（您的 HTML、CSS 和 JavaScript）。此架构中 MVC 的模型部分是您的应用程序/域层。请注意，此架构也适用于[单页应用程序 (SPA)](http://en.wikipedia.org/wiki/Single-page_application)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T11:27:04.073

凯文，非常有趣和有用的答案，非常清楚，谢谢。就一个问题。使用 Web API 并尝试遵循您的架构流程时，请告诉我是否理解得很好：客户端上的请求（通过 AJAX）=> 控制器 => ASP.NET Web API => 应用层 => UoW => 存储库=> 英孚 => 数据库。所以现在，响应：DB => EF => Repo => UoW => 应用层 => ASP.NET Web API => 控制器（填充视图或将 json 返回给客户端）=> 客户端更改（页面/视图/jquery 等）。谢谢。

# jquery - 使用 optgroups 设置按选项值选择

> ID：13402321
> 
> 赞同：5
> 
> 时间：2012-11-15T16:49:53.407
> 
> 标签：jquery, html, html-select, optgroup

我们在美国和加拿大开展业务，因此在注册表中，我有一个选择，其中包含将美国各州与加拿大各省区分开来的 optgroup。我使用这两个字符代码并将它们存储在数据库中。当我想编辑客户信息时，我想要与注册表相同的选项；但是，我似乎无法通过值找到州或省，然后将其标记为选中。

下面是一个选择示例：

```
<select id="company-state">
     <option value="">Select One</option>
     <optgroup label="United States">
          <option value="AK">Alaska</option>
          <option value="AL">Alabama</option>
          ...
          <option value="WV">West Virginia</option>
          <option value="WY">Wyoming</option>
     </optgroup>
     <optgroup label="Canada">
          <option value="AB">Alberta</option>
          <option value="BC">British Columbia</option>
          ...
          <option value="SK">Saskatchewan</option>
          <option value="YT">Yukon Territory</option>
     </optgroup>
</select> 
```

我尝试了许多解决方案，例如尝试按值或按序数找到选项，但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T16:53:07.780

简单的 jQuery 答案：

```
var value = "foo";
$('#company-state option[value="' + value +'"]'); 
```

[**现场演示**](http://jsfiddle.net/jX2A6/1)

要“将其标记为选中”，您可以添加到选择器：

```
$('#company-state option[value="' + value +'"]').prop('selected', true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-21T08:14:55.937

只需使用 .val 运算符设置下拉列表的值，您就可以开始了。请检查小提琴。

```
var value = "SK";
$("#company-state").val(value);
alert($('#company-state').val()); 
```

[https://jsfiddle.net/2t48cqho/](https://jsfiddle.net/2t48cqho/)

# vb.net - 如何在 Windows 窗体中使用 SOAP 1.2（请求和响应）

> ID：13402334
> 
> 赞同：1
> 
> 时间：2012-11-15T16:50:44.993
> 
> 标签：vb.net, soap

我从未使用过 SOAP，但现在我需要使用它来获取包含大量产品的 XML 文件或 CSV 文件。

我在互联网上搜索了一些示例并找到了一些，但我仍然不明白如何使用它。我是否认为它只是将一个 XML 文件发送到服务器，然后您会返回一个包含数据的 XML 文件。

我真的需要安装它才能正常工作吗：http: [//www.microsoft.com/en-us/download/details.aspx?id=11413](http://www.microsoft.com/en-us/download/details.aspx?id=11413)

我需要在 Windows 窗体应用程序中实现它。

希望有人可以帮助我提供一个好的教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:12:01.837

您不需要手动编写所有代码来自己进行 SOAP 通信。.NET 框架和 Visual Studio 提供了自动构建自定义客户端类的工具，这些类模仿 SOAP 服务的接口，并为您执行所有 SOAP 通信。您不需要安装任何特殊的东西，您只需在 IDE 中右键单击您的项目并选择添加 Web 引用或服务引用。

# html - 在后台播放网页中的声音文件

> ID：13402336
> 
> 赞同：27
> 
> 时间：2012-11-15T16:50:48.707
> 
> 标签：html, firefox

我想在后台播放我的网页上的声音文件（不希望出现媒体播放器 UI），我的网站将在 Fire-Fox 上运行，我使用了 Embed 元素并设置了 Hidden 属性确实`<embed name="myMusic" src="Masgon.mp3" type="audio/midi" autostart="false" Hidden="true" loop="true"></embed>` ，问题是没有声音播放，除非我在这种情况下删除了隐藏属性，播放声音文件并出现媒体播放器 UI，但我不希望那样。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-15T16:53:55.343

```
<audio src="/music/good_enough.mp3">
<p>If you are reading this, it is because your browser does not support the audio element.     </p>
</audio> 
```

如果你想要控制

```
<audio src="/music/good_enough.mp3" controls>
<p>If you are reading this, it is because your browser does not support the audio element.</p>
</audio> 
```

并且还使用嵌入

```
<embed src="/music/good_enough.mp3" width="180" height="90" loop="false" autostart="false" hidden="true" /> 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-05-07T03:15:19.730

```
<audio src="/music/good_enough.mp3" autoplay>
<p>If you are reading this, it is because your browser does not support the audio element.     </p>
<embed src="/music/good_enough.mp3" width="180" height="90" hidden="true" />
</audio> 
```

对我有用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-03-09T13:56:30.500

尽管评论可能为时已晚，但这是解决诸如您的问题的工作代码。

```
<div id="player">
    <audio autoplay hidden>
     <source src="link/to/file/file.mp3" type="audio/mpeg">
                If you're reading this, audio isn't supported. 
    </audio>
</div> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-05-17T05:54:21.060

```
<audio controls autoplay loop>
  <source src="path/your_song.mp3" type="audio/ogg">
  <embed src="path/your_song.mp3" autostart="true" loop="true" hidden="true"> 
</audio> 
```

[ps。用文件夹和歌曲名称替换“path/your_song.mp3”，例如。“music/samplemusic.mp3”或“media/bgmusic.mp3”等。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-15T16:57:06.287

对我来说，问题是通过删除`type`属性解决的：

```
<embed name="myMusic" loop="true" hidden="true" src="Music.mp3"></embed> 
```

当然不是最干净的方式。

如果您使用的是 HTML5： Firefox 不支持 MP3。Wav 和 Ogg 是。在这里您可以找到有关哪种浏览器支持哪种音频类型的概述：http: [//www.w3schools.com/html/html5_audio.asp](http://www.w3schools.com/html/html5_audio.asp)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-07-20T08:46:47.970

如果您不想显示控件，请尝试此代码

```
<audio  autoplay>
 <source src="song.ogg"  type="audio/ogg">
Your browser does not support the audio element.
</audio> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-18T06:37:12.440

如果你想要它只是正常的：

```
<audio src="sus.mp3">
    <script>alert("Your browser doesn't support the Audio tag!")</script>
</audio>` 
```

如果您希望它在加载时自动启动：（chrome 不支持）

```
<audio src="sus.mp3" autostart="true">
    <script>alert("Your browser doesn't support the Audio tag!")</script>
</audio> 
```

如果你想要控制

```
<audio src="sus.mp3" autostart="true" controls>
    <script>alert("Your browser doesn't support the Audio tag!")</script>
</audio> 
```

# javascript - 从 Chrome 扩展 AJAX 加载页面运行注入的 JS 函数

> ID：13402340
> 
> 赞同：1
> 
> 时间：2012-11-15T16:51:05.120
> 
> 标签：javascript, jquery, ajax, google-chrome-extension, xss

我正在尝试构建一个 Chrome 扩展程序，该扩展程序使用注入的 JS 将我的服务器中的 HTML 插入服务器中的 Facebook 页面。然后，我希望能够从 HTML 中调用 Javascript 函数，并让它在 Facebook 页面上执行。问题是，当我从 HTML 文件中调用它们时，我放入 fhrun.js 文件中的 JS 函数不会在页面上运行。这可能与注入的 JS 的功能都无法从 Facebook 上的 JS 控制台执行的事实有关。

这是我在 background.js 文件中运行的 Chrome 脚本：

```
chrome.tabs.executeScript(null,
    {file: "fhrun.js", allFrames: false, runAt: "document_start"},
    function(){
        //JS inserted
    }
); 
```

这是一个简化的 fhrun.js（它还包含 jquery）：

```
function testFunction(){
console.log("Test function is working.");
}

$("#facebookDiv").load("https://path.to.my.server/ajax.html"); // this works great btw 
```

这是 ajax.html：

```
<a href="#" onclick="testFunction();">Click Me</a> //link doesn't work 
```

当我单击“单击我”时，它应该调用`testFunction();`已注入页面的 JS 中的哪个。但事实并非如此。它甚至不会引发错误。我还尝试将`testFunction();`其放入 background.js 文件中，但这也不起作用。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:40:52.683

内联 Java 脚本不适用于 JS 注入，请改用事件绑定

前任：

加载=函数（）{

document.getElementById("xx").click = fun;

};

# opengl - DirectX 11 和 OpenGL 中的曲面细分，什么以及如何？

> ID：13402342
> 
> 赞同：1
> 
> 时间：2012-11-15T16:51:19.283
> 
> 标签：opengl, directx, directx-11

DirectX 11 支持曲面细分。这个功能的真正目的是什么？
以及如何确定它是否适用于使用 DX11 或 OpenGL 构建的应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T10:21:09.353

可以应用曲面细分的领域有很多。例如，脸部的细节层次，当您靠近脸部时，这可以让您拥有 2-3 百万个三角形，而 gpu 没有任何超负荷。这样您就可以获得 über 图形。

另一种使用它的方式可能是地形，DICE 在他们的地形系统上使用它来增强地形的整体外观，使其更加真实。 [http://publications.dice.se/publications.asp?show_category=yes&which_category=Rendering](http://publications.dice.se/publications.asp?show_category=yes&which_category=Rendering)

所以基本上它是 dx11 最好的功能之一，让您可以很好地控制向网格添加额外的多边形。（更高的细节，更漂亮的图形）

# eclipselink - EclipseLink 静态编织实体中断了实体操作的删除

> ID：13402343
> 
> 赞同：2
> 
> 时间：2012-11-15T16:51:22.057
> 
> 标签：eclipselink

[我使用eclipselink-staticweave-maven-plugin 1.0.3](http://code.google.com/p/eclipselink-staticweave-maven-plugin/)在 EclipseLink-2.4.0 中成功执行了静态编织，但是当我还运行集成测试时。遍历系统中的所有层，它们会中断。在我创建的 startUp() 方法中，它创建了一个用户实体，它在测试数据库中提交。但是在我清除数据库状态的 tearDown() 方法中，同一 EntityManager 无法删除实体（已经编织）。

当实体没有被编织时，测试没有错误。你认为问题可能出在哪里？

这里的异常状态也是：

> > java.lang.AbstractMethodError: nl.innovity.youbank.core.entity.user.User._persistence_setCacheKey(Lorg/eclipse/persistence/internal/identitymaps/CacheKey;)V at org.eclipse.persistence.internal.descriptors.ObjectBuilder.updateCachedAttributes (ObjectBuilder.java:3790) 在 org.eclipse.persistence.internal.sessions.MergeManager.mergeChangesOfWorkingCopyIntoOriginal(MergeManager.java:871) 在 org.eclipse.persistence.internal.sessions.MergeManager.mergeChangesOfWorkingCopyIntoOriginal(MergeManager.java:687) 在org.eclipse.persistence.internal.sessions.MergeManager.mergeChanges(MergeManager.java:307) 在 org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.mergeChangesIntoParent(UnitOfWorkImpl.java:3260) 在 org.eclipse.persistence.internal。 session.RepeatableWriteUnitOfWork。org.eclipse.persistence.internal.sessions.RepeatableWriteUnitOfWork.commitRootUnitOfWork(RepeatableWriteUnitOfWork.java:283) 的 mergeChangesIntoParent(RepeatableWriteUnitOfWork.java:369) org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.commitAndResume(UnitOfWorkImpl.java:1147)在 org.eclipse.persistence.internal.jpa.transaction.EntityTransactionImpl.commitInternal(EntityTransactionImpl.java:84) 在 org.eclipse.persistence.internal.jpa.transaction.EntityTransactionImpl.commit(EntityTransactionImpl.java:63) 在 nl.innovity .youbank.core.dao.DBManager.reinitDB(DBManager.java:510) 在 nl.innovity.youbank.core.integration.IntegrationTest.tearDown(IntegrationTest.java:126) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)在 sun.reflect.NativeMethodAccessorImpl。invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:597) at org.junit.runners.model.FrameworkMethod $1.runReflectiveCall(FrameworkMethod.java:44) 在 org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15) 在 org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)在 org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:37) 在 org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79) 在 org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner .java:71) 在 org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49) 在 org.junit.runners.ParentRunner$3.run(ParentRunner.java:193) 在 org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52) 在 org.junit.runners.ParentRunner.runChildren(ParentRunner .java:191) 在 org.junit.runners.access$000(ParentRunner.java:42) 在 org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184) 在 org.junit.internal.runners。 statements.RunBefores.evaluate(RunBefores.java:28) at org.junit.runners.ParentRunner.run(ParentRunner.java:236) at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:35)在 org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:146) 在 org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:97) 在 sun.reflect。NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java.lang.reflect.Method.invoke(Method. java:597) at org.apache.maven.surefire.booter.ProviderFactory$ClassLoaderProxy.invoke(ProviderFactory.java:103) at $Proxy0.invoke(Unknown Source) at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider (SurefireStarter.java:145) 在 org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcess(SurefireStarter.java:87) 在 org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:69)39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java.lang.reflect.Method.invoke(Method.java:597) 在 org.apache.maven.surefire.booter.ProviderFactory$ClassLoaderProxy.invoke (ProviderFactory.java:103) 在 $Proxy0.invoke(Unknown Source) 在 org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:145) 在 org.apache.maven.surefire.booter.SurefireStarter。 runSuitesInProcess(SurefireStarter.java:87) 在 org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:69)39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java.lang.reflect.Method.invoke(Method.java:597) 在 org.apache.maven.surefire.booter.ProviderFactory$ClassLoaderProxy.invoke (ProviderFactory.java:103) 在 $Proxy0.invoke(Unknown Source) 在 org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:145) 在 org.apache.maven.surefire.booter.SurefireStarter。 runSuitesInProcess(SurefireStarter.java:87) 在 org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:69)103) 在 $Proxy0.invoke(Unknown Source) at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:145) at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcess(SurefireStarter.java :87) 在 org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:69)103) 在 $Proxy0.invoke(Unknown Source) at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:145) at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcess(SurefireStarter.java :87) 在 org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:69)

在此先感谢，西蒙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T21:25:38.543

Maven 静态编织的配置似乎存在问题 - 它使用的 EclipseLink 版本与您运行的 2.4 版本不同。查看您链接的文档，默认设置为使用 EclipseLink 2.3.2：我相信 EclipseLink 2.4 已更改为将 _persistence_setCacheKey 方法添加到编织中使用的 PersistenceEntity 中。如果您使用 EclipseLink 2.3.2 进行编织，则此方法将丢失。

您需要将依赖项列表更改为指向 EclipseLink 2.4 作为您所描述的链接到的文档（其中它指的是使用 2.3.2 以外的 2.3.X 版本）。

# node.js - 如何在 Meteor 中使用分析器？

> ID：13402344
> 
> 赞同：7
> 
> 时间：2012-11-15T16:51:32.243
> 
> 标签：node.js, profiling, profiler, meteor

我的 Meteor 应用程序在服务器端（节点进程）使用的 CPU 比可接受的多得多，我想对其进行调查。

两个同时的客户端正在引导节点使用 100% 的 CPU。这可能与*观察者*的大量使用有关，但我需要在更改整个应用程序之前对其进行进一步调查。

那么，我可以使用什么工具来分析它？如何使用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T19:01:19.620

我找到的最佳解决方案是[v8-profiler](https://github.com/dannycoates/v8-profiler#readme)（加上[node-inspector](https://github.com/dannycoates/node-inspector)）。

# 安装

1.  去`[Meteor installation folder]/dev_bundle/lib/node_modules`。

2.  执行`$ npm install v8-profiler`那里。

3.  添加您的服务器代码：

```
Meteor.startup(function() {
  profiler = __meteor_bootstrap__.require("v8-profiler")
  Meteor._debug("Server started!");
}); 
```

*   此方法将[很快被替换](https://stackoverflow.com/a/15351543/599991)

# 采用

*   无论在您的应用服务器代码中的任何位置，您都可以通过以下方式进行分析：

    ```
    profiler.startProfiling("name");                   //begin cpu profiling
    yourCode();
    var cpuProfile = profiler.stopProfiling("name");   //finish cpu profiling 
    ```

*   别忘了跑`node-inspector`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T18:36:42.430

您还应该看看 Meteor-specific [Observatory](http://observatoryjs.com/)。它是一个功能强大的服务器端和客户端日志记录包，具有对任意函数的分析支持，以及“模板生命周期方法、集合方法（目前仅支持查找）和订阅分析的自动记录”。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-07T14:52:12.770

[APM，Application Performance Monitoring ，是](http://meteorapm.com)[MeteorHacks](http://arunoda.me/)的 Arunoda Susiripala 开发的 Meteor[包](https://github.com/arunoda/meteor-apm-client)+云服务。它现在处于测试阶段，看起来很有希望：

![来电](../Images/e9a9db323f298b078d2d755ee2042d26.png)

从 Costly Calls 选项卡中，您可以深入研究方法并确定那些耗时最长的方法：

![截屏](../Images/6d208e08af8084a22339482e3098d01b.png)

这个 1 分钟的[教程视频](https://www.youtube.com/watch?v=RDEMvqbefI4)显示了这种[昂贵方法的识别](http://support.meteorapm.com/knowledgebase/articles/308661-identify-method-wait-time-and-fix-it)，这可能是你想要的。

### 更多截图

[![更多截图](../Images/9d448660ef1af3c0eeae4a2110bc8e8c.png)](https://www.facebook.com/media/set/?set=a.10152263834393606.1073741825.761063605&type=1&l=c37859283b)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-15T17:11:49.247

[NodeTime](https://nodetime.com/)是一个非常棒的分析服务。它是免费使用的，这在像您这样的情况下特别有用，而且设置起来超级容易！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-12-10T09:39:59.980

现在有

`console.time('myFunction'); myFunction(); console.timeEnd('myFunction') //Outputs: myFunction: xxxxms`

我刚刚验证它可以使用 Meteor 1.2 工作。超级简单，容易和内置。

# php - 试图用 php 抓取内容

> ID：13402345
> 
> 赞同：-5
> 
> 时间：2012-11-15T16:51:34.383
> 
> 标签：php, regex

我正在尝试从以下位置获取 Facebook 页面 ID：

> [http://fanpagelist.com/category/top_users/view/list/sort/fans/page1](http://fanpagelist.com/category/top_users/view/list/sort/fans/page1)

大约有 25 个，可以通过 pattern 查看源代码来找到它们`/like_box.php?id=89562268312`。`https://graph.facebook.com/89562268312/picture`， ETC

```
<?php 
    $page = file_get_contents('http://fanpagelist.com/category/top_users/view/list/sort/fans/page1');
    preg_match_all('graph.facebook.com,picture', $page, $result, PREG_SET_ORDER);
    foreach ($result as $row) {
        echo "<p><b>$row[1]</b> $row[2]</p>\n";
    }
?> 
```

问题是我不是要刮标签，而是要刮图案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:51:11.087

你应该擅长：

```
preg_match_all('#(?:(?<=\bhref="/like_box\.php\?id=)|' .
                '(?<=\bsrc="https://graph\.facebook\.com/))\d+#i',
                $page, $result, PREG_PATTERN_ORDER); 
```

请参阅[**此演示**](http://ideone.com/QLkKrH)。

# jquery - 如何使用 jquery 添加加载图像？

> ID：13402347
> 
> 赞同：0
> 
> 时间：2012-11-15T16:51:48.363
> 
> 标签：jquery, ajax

我想添加加载或微调器消息，直到表单/服务器完成重新加载我如何检查并知道表单已完成加载以禁用微调器？

注意：一旦提交表单，更新的数据在服务器重新启动之前不可用，只有表单标题可见，而重新启动和更改会更新。目前我正在手动刷新页面，直到表单再次可用。

这是我的 html 和 jquery 片段和加载代码。我的加载代码不起作用。

加载消息的代码

```
 $(document).ready(function() {
              $('<div id="loading">Loading...</div>')
                .insertBefore('#myform')
                .ajaxStart(function() {
                  $(this).show();
                }).ajaxStop(function() {
                  $(this).hide();
                });
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:57:34.523

对于加载图像的最简单解决方案，您可以使用 jquery 插件[prettyLoader](http://www.no-margin-for-errors.com/projects/prettyloader/)。

然后，您只需在加载 DOM 后初始化插件，如下所示：

```
<script type="text/javascript" charset="utf-8">
    $(document).ready(function(){
        $.prettyLoader();
    });
</script> 
```

然后，每当发出 ajax 请求时，它将自动显示一个加载图标。

可以通过两种方式更新表：在 ajax 请求中加载 HTML 并简单地覆盖它：

```
$('#myTable').innerHtml = data; 
```

或者您可以返回带有表数据的 json-object 并将此数据放入表中。为此，我建议您使用某种 Viewmodel，例如[Knockout.js](http://learn.knockoutjs.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T17:20:11.500

您可以将其添加到您的脚本中：

```
// to show the loading spinner

$("#loading").ajaxStart(function(){
    $('#loader').show();
});

// to hide the loading spinner

$("#loading").ajaxStop(function(){
    $('#loader').hide();
}); 
```

loader 将是你的 div，它具有绝对定位的 div 元素，宽度和高度为 100%，中间有一个加载 gif（如果你想要或者这可能只是加载的文本消息，请稍候......像这样）

# javascript - Bootstrap - 多个输入上的打字头

> ID：13402350
> 
> 赞同：1
> 
> 时间：2012-11-15T16:52:03.963
> 
> 标签：javascript, jquery, twitter-bootstrap

我有两个文本输入，都必须运行自动完成。该站点正在使用 Bootstrap 和 « typeahead » 组件。我有这个 HTML：

```
<input type="text" class="js_typeahead" data-role="artist" />
<input type="text" class="js_typeahead" data-role="location" /> 
```

我正在使用 « data-role » 属性（作为 $_POST 索引发送到 Ajax 控制器），以确定必须从数据库中检索哪种数据。

Javascript是这样的：

```
var myTypeahead = $('input.js_typeahead').typeahead({
 source: function(query, process){
 var data_role;
  data_role = myTypeahead.attr('data-role');
  return $.post('/ajax/typeahead', { query:query,data_role:data_role },function(data){
    return process(data.options);
  }); } }); 
```

使用 PHP，我检查`$_POST['data-role']`包含的内容，运行 MySQL 查询（在这种情况下，查询艺术家列表或位置列表）。

但问题是第二个“typeahead”返回与第一个相同的值（艺术家列表）。我认为这是因为侦听器附加到对象« myTypeahead »，这样使用的“数据角色”属性将始终相同。

我想我可以通过使用类似的东西来修复它： `data_role = $(this).attr('data-role');` 但这当然不起作用，因为它是一个不同的范围。

**也许我做错了**，但至少也许你们可以给我一个提示。对不起，如果这已经被讨论过，我实际上搜索但没有成功。

提前感谢，克莱姆*（来自法国，对不起我的英语）*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:57:47.423

在这种情况下，您将需要遍历元素，getter 方法仅返回第一个选定元素的值。

```
$('input.js_typeahead').each(function(){
    var myTypeahead = $(this).typeahead({
        source: function(query, process){
            var data_role;
            data_role = myTypeahead.attr('data-role');
            return $.post('/ajax/typeahead', { 
                query:query,data_role:data_role 
            },function(data){
                process(data.options);
            }); 
     } 
}); 
```

# java - junit jar 是 JDK 还是 JRE 的一部分？

> ID：13402356
> 
> 赞同：5
> 
> 时间：2012-11-15T16:52:32.443
> 
> 标签：java, junit

我想在只有 JRE 但没有 JDK 的已部署环境上运行 junit。我觉得问这个很愚蠢，但谷歌让我失望了。junit jar 是 JDK 还是 JRE 的一部分？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T16:53:31.697

不，不是，[junit](http://www.junit.org/)本身就是独立的[框架](https://github.com/KentBeck/junit)，它是一个开源项目。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-15T16:53:44.690

两者都不。JUnit 是一个第三方项目。你可以[在这里](https://github.com/junit-team/junit/downloads)下载；昨天发布了 4.11 版本。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-15T16:53:45.877

不，它是您可以从 junit.org 获得的第三方 jar

# tridion - PDF 文件（多媒体内容）未在 CDS 上部署，但已成功发布

> ID：13402361
> 
> 赞同：3
> 
> 时间：2012-11-15T16:52:36.767
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

我正在使用 Tridion 2011 sp1。

我的要求是单击“下载 PDF”链接时，应出现一个窗口，其中包含“保存”、“取消”和“打开”选项。

首先发布PDF文件。

我创建了一个多媒体模式来上传 pdf 文件。此 pdf 文件不包含在页面中。为了将 pdf 发布到 CDS，我创建了一个带有默认完成操作的 CT（动态组件模板），并在其上方放置了一个 DWT TBB，代码在 CT 中的默认完成操作上方

```
<a href="" tridion:href="@@Component.ID@@" tridion:type="binary">link</a> 
```

我将 pdf 架构与 CT 相关联，然后发布了 PDF 组件。

但是 PDF 没有部署在 CDS 端。

我能够成功发布页面和图像（这些存在于页面上）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T18:25:07.733

您可能需要调整 cd_stroage_conf.xml 以确保将扩展名为“.pdf”的二进制文件放置在与图像相同的位置。

寻找这样的节点

```
<Item typeMapping="Binary" itemExtension="pdf" storageId="defaultFile" cached="false"/> 
```

并确保它具有与默认二进制存储相同的存储位置，如下所示：

```
<Item typeMapping="Binary" storageId="defaultFile" cached="false"/> 
```

还要检查您的 CT 的优先级是否未设置为“从不链接”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T15:34:29.923

从 SDLLiveContent 关于链接到可下载资产（在 MM 组件中）：

要创建指向图像文件的超链接（在已发布的网站上会生成指向图像资源的超链接），请包含以下形式的代码

```
<a href="dummy.html" tridion:href="tcm:6-2" tridion:type="Multimedia">link text</a> 
```

在输出中。在发布的页面上，这会导致输出

```
<a href="pictures/Image01.jpg">link text</a> 
```

，其中图片/Image01.jpg 是您的图像文件。

# javascript - 可以在浏览器中检测到键盘上的哪个键但不会显示在文本输入中？

> ID：13402365
> 
> 赞同：0
> 
> 时间：2012-11-15T16:52:53.987
> 
> 标签：javascript, keyboard, foreign-keys, keyboard-shortcuts, user-input

我知道这听起来会很奇怪，但请听我说完。

我有一个心率监测器，它像键盘一样连接到电脑上。每次心率监测器检测到脉搏时，它都会发送一次击键。

然后，在浏览器中运行的基于 Web 的游戏会检测到该击键。

目前我正在发送以下击键：(`)

在浏览器基础游戏中，我检测到以下键很好，如果当用户在任何数据输入屏幕上时，使用一点 JavaScript 会忽略 (`) 字符。

当我离开浏览器并以其他方式返回使用操作系统时，问题就出现了，（`）开始出现在任何地方。

所以我的问题是：

> 是否有一个可以通过键盘发送的键，可以在浏览器中检测到，但如果我切换到其他应用程序，屏幕上不会有任何显着的输出。

我正在寻找一个空键。在浏览器中可检测到但按下时对浏览器或任何其他系统应用程序没有影响的键。

# tfs - TFS Sparse checkout local workspace

> ID：13402366
> 
> 赞同：0
> 
> 时间：2012-11-15T16:52:56.970
> 
> 标签：tfs, workspace

Is there a way to "sparsely checkout" a local workspace in TFS 2012? We currently use SVN and are investigating TFS 2012\. Specifically, I don't want my entire collection to be downloaded to a developer machine. We branch to provide isolation among teams and products. I'm hoping that we can selectively choose which items in the branch are downloaded locally.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:03:29.753

You can map various parts of your source tree using different workspaces to achieve some of the effect that you're looking for. We use this to separate components in our build system. Workspaces are configured by client machine/by user.

# prolog - Prolog：摆脱递归辅助谓词

> ID：13402367
> 
> 赞同：1
> 
> 时间：2012-11-15T16:52:58.340
> 
> 标签：prolog, predicate, logic-programming

所以我试图通过直接在 split 中使用排序库谓词来摆脱包装子句。split 所做的只是从如下所示的列表中生成一个数字列表： [1:2,3:2,4:6] ---split--> [1,2,3,2,4,6 ]。但是生成的列表包含重复项，我不希望这样，所以我使用包装器来组合拆分和排序，然后生成所需的结果：[1,2,3,4,6]。

我真的很想摆脱包装器，只在拆分中使用排序，但是我不断收到“错误：排序/2：参数没有充分实例化。” 有任何想法吗？谢谢 ：）

```
split([],[]).
split([H1:H2|T],[H1,H2|NT]) :-
    split(T,NT).

wrapper(L,Processed) :- 
    split(L,L2),
    sort(L2,Processed). 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:03:41.483

> 我真的很想摆脱包装器，只在 split 中使用 sort

然后使用`findall`复杂的目标，例如

```
split(Edges, NodeSet) :-
    findall(Node,
            (member(Edge, Edges), (Edge = (Node:_); Edge = (_:Node))),
            NodeList),
    sort(NodeList, NodeSet). 
```

然而，一旦你开始使用聚合谓词，你也可以跳过`sort`and 使用`setof`：

```
split(Edges, NodeSet) :-
    setof(Node, Edge^Pair^(member(Edge, Edges),
                           Edge =.. [:|Pair],
                           member(Node,Pair)),
          NodeSet). 
```

读作：获取所有`Node`st 存在`Edge`和存在`Pair`st （等）的集合并调用它`NodeSet`。

( `=..`"univ") 运算符解构一对：`Edge =.. [:, Left, Right]`。为了更好的可读性，您可以编写一个单独的谓词来从边缘获取节点：

```
% endpoint(Edge, Node) is true iff Node is an endpoint of Edge
endpoint(Node:_, Node).
endpoint(_:Node, Node).

split(Edges, NodeSet) :-
    setof(Node, Edge^(member(Edge, Edges), endpoint(Edge, Node)), NodeSet). 
```

**编辑**在您尝试这种方法之前，请参阅此答案下方的讨论，了解这是否比 OP 的原始代码更好。

# batch-file - 批处理文件连接命令行参数

> ID：13402373
> 
> 赞同：3
> 
> 时间：2012-11-15T16:53:13.787
> 
> 标签：batch-file

例如，我创建了一个名为的批处理文件`concatenate.bat`：

```
@echo off
set foo=%1\bar
echo %foo% 
```

当我跑`concatenate.bat "C:\somewhere\with spaces"`

我希望 foo 输出： `"C:\somewhere\with spaces\bar"`

但相反，我得到： `"C:\somewhere\with spaces"\bar`

* * *

我也试过：`set "foo=%1\bar"`

哪个输出：`"C:\somewhere\with spaces"\bar`

* * *

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T17:02:17.190

```
@echo off
set foo="%~1\bar"
echo %foo% 
```

# scala - 通用重写 Scala 案例类

> ID：13402378
> 
> 赞同：4
> 
> 时间：2012-11-15T16:53:20.777
> 
> 标签：scala, reflection, case-class, shapeless

是否可以一般替换案例类中的参数？更具体地说，假设我想要一个接收“查找”案例类和“替换”案例类（如语法规则的左侧和右侧）以及目标案例类的替代函数，该函数将返回一个用替换案例类替换了查找案例类的参数的新案例类？该函数也可以简单地采用一个案例类（产品？）和一个应用于案例类的所有参数/产品的函数。

显然，给定一个特定的案例类，我可以使用 unapply 和 apply - 但是一般（给定任何案例类）编写这种函数的最佳/最简单/等方法是什么？

我想知道是否有使用 Scala 2.10 反射功能或来自 shapeless 的 Iso.hlist 的好的解决方案。

例如，我真正想做的是，给定如下类......

```
class Op[T]
case class From(x:Op[Int]) extends Op[Int]
case class To(x:Op[Int]) extends Op[Int]

case class Target(a:Op[Int], b:Op[Int]) extends ...
// and lots of other similar case classes 
```

... 有一个函数可以接受任意案例类并返回它的副本，并将 From 类型的任何元素替换为 To 类型的实例。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T21:56:24.753

如果你原谅这个插件，我想你会发现我们的[Kiama 语言处理库](http://kiama.googlecode.com)的重写组件非常适合这种目的。它提供了一种非常强大的战略规划形式。

这是一个完整的解决方案，它在由案例类实例构成的树中将 's重写`To`为's。`From`

```
import org.kiama.rewriting.Rewriter

class Op[T]
case class Leaf (i : Int) extends Op[Int]
case class From (x : Op[Int]) extends Op[Int]
case class To (x : Op[Int]) extends Op[Int]

case class Target1 (a : Op[Int], b : Op[Int]) extends Op[Int]
case class Target2 (c : Op[Int]) extends Op[Int]

object Main extends Rewriter {

    def main (args : Array[String]) {
        val replaceFromsWithTos =
            everywhere {
                rule {
                    case From (x) => To (x)
                }
            }

        val t1 = Target1 (From (Leaf (1)), To (Leaf (2)))
        val t2 = Target2 (Target1 (From (Leaf (3)), Target2 (From (Leaf (4)))))

        println (rewrite (replaceFromsWithTos) (t1))
        println (rewrite (replaceFromsWithTos) (t2))
    }

} 
```

输出是

```
Target1(To(Leaf(1)),To(Leaf(2)))
Target2(Target1(To(Leaf(3)),Target2(To(Leaf(4))))) 
```

该`replaceFromsWithTos`值的想法是该`rule`构造提升了一个部分函数，​​以便能够对任何类型的值进行操作。在这种情况下，部分函数仅在`From`节点处定义，用节点替换它们`To`。组合器说“将我的`everywhere`参数应用到树中的所有节点，保留参数不适用的地方不变。

除了这种简单的重写之外，还可以做更多的事情。有关血腥细节，请参阅[主要的 Kiama 重写文档](https://code.google.com/p/kiama/wiki/Rewriting)，包括指向更多示例的链接。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-15T17:10:18.207

我认为您不会真正找到比仅通过模式匹配使用 unapply/apply 更好的方法：

```
someValue match {
  case FindCaseClass(a, b, c) => ReplaceCaseClass(a, b, c)
  // . . .
} 
```

`FindCaseClass`您必须以某种方式写出要关联的规则`ReplaceCaseClass`，尽管您可以通过某种方式仅使用名称来更简洁地做到这一点，但这还具有检查案例类字段的数量和类型的额外好处编译时间以确保一切都匹配得恰到好处。

可能有某种方法可以使用所有案例类都扩展这一事实来自动执行此操作，但返回[`Product`](http://www.scala-lang.org/api/current/scala/Product.html)的事实可能会让它有点痛苦——我认为这就是必须进行反射的地方。这里有一些东西可以帮助你开始：`productElement(n)``Any`

```
case class From(i: Int, s: String, xs: Seq[Nothing])
case class To(i: Int, s: String, xs: Seq[Nothing])

val iter = From(5,"x",Nil).productIterator
val f = To.curried
iter.foldLeft(f: Any) { _.asInstanceOf[Any => Any](_) }
// res0: Any = To(5,x,List()) 
```

但实际上，我认为您最好使用模式匹配版本。

***编辑：***这是一个将相关代码重构为方法的版本：

```
case class From(i: Int, s: String, xs: Seq[Nothing])
case class To(i: Int, s: String, xs: Seq[Nothing])

type Curryable = { def curried: _ => _ }

def recase(from: Product, to: Curryable) = {
  val iter = from.productIterator
  val f = to.curried
  iter.foldLeft(f: Any) { _.asInstanceOf[Any => Any](_) }
}

recase(From(5,"x",Nil), To)
// res0: Any = To(5,x,List()) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-15T21:06:22.263

我对 shapeless 进行了一些实验，并能够提出以下相对通用的将一个案例类转换为另一个案例类的方法：

```
import shapeless._ /* shapeless 1.2.3-SNAPSHOT */

case class From(s: String, i: Int)
case class To(s: String, i: Int)

implicit def fromIso = Iso.hlist(From.apply _, From.unapply _)
implicit def toIso = Iso.hlist(To.apply _, To.unapply _)

implicit def convert[A, B, L <: HList]
                   (a: A)
                   (implicit srcIso: Iso[A, L],
                             dstIso: Iso[B, L])
                   : B =
  dstIso.from(srcIso.to(a))

val f1 = From("Hi", 7)
val t1 = convert(f1)(fromIso, toIso)

println("f1 = " + f1) // From("Hi", 7)
println("t1 = " + t1) // To("Hi", 7) 
```

但是，我无法正确理解隐含。理想情况下，

```
val t1: To = f1 
```

就足够了，或者也许

```
val t1 = convert(f1) 
```

另一个不错的改进是无需为每个案例类显式声明 iso-implicits ( `fromIso`, )。`toIso`

# c++ - 循环函数调用未正确循环！(C++)

> ID：13402380
> 
> 赞同：0
> 
> 时间：2012-11-15T16:53:28.890
> 
> 标签：c++

我正在为我的系统编程课程做作业。我必须实施大学模拟。我有一个 Course 抽象类和它的子类 ComputerScienceCourse （以及一堆其他不影响我要问的子类）。我有一个 Student 抽象类和它的子类 ComputerScienceStudent （以及一堆不影响我要问的其他子类）。在 ComputerScienceCourse 子类中有一个函数：

```
void teach(){
 for(i = all students that take this course [stored in a vector of pointers to Student objects, which is a member field of the CSCourse child class, called students]){
  this->students.at(i)->study(*this);
 }
} 
```

该函数调用所有上过这门课的学生的学习函数。该函数是子类 CSStudent 的成员函数

```
void study(Course &c){
 if(this->failedclass){
  c.removeStudent(this)
 }
} 
```

现在，当我检查输出时，教学函数中的循环不会为其中的所有学生调用学习函数。例如，如果我有 4 个学生在做这门课，有时它会只调用前三个的学习函数，有时它会调用第一个和最后一个学生的函数......变化。什么可能导致 for 循环不调用所有学生的学习函数？！以下是教学功能的完整代码：

```
 for(unsigned int i=0; i<this->studentMembers.size(); i++){

    this->studentMembers.at(i)->study(*this);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:00:15.707

问题似乎是，当学生未能通过课程时，向量的内容会被修改。在迭代其内容时从向量中删除内容很难正确处理。似乎这里更合适的数据模型会让教师删除不及格的学生，这也会使这个问题更容易处理。所以教大家，然后再过一遍名单，把不及格的学生删掉。

# c# - View Model IList<> 属性从 post 方法返回 null（未绑定）？

> ID：13402382
> 
> 赞同：1
> 
> 时间：2012-11-15T16:53:31.570
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

> **可能重复：**
> [视图模型 IEnumerable<> 属性从 post 方法返回 null（未绑定）？](https://stackoverflow.com/questions/9915395/view-model-ienumerable-property-is-coming-back-null-not-binding-from-post-me)

我遇到的问题与此处指定的问题几乎相同：

[查看模型 IEnumerable<> 属性从 post 方法返回 null（未绑定）？](https://stackoverflow.com/questions/9915395/view-model-ienumerable-property-is-coming-back-null-not-binding-from-post-me)

我的问题与上面链接的问题不同，在我的示例中，我正在程序上创建数据来填充我的视图模型。

但是，没有一个建议的解决方案可以为我解决这个问题。据我所知，我在下面显示的方法与 Travis J 的答案相同，但是我也尝试了为我的模型和/或“子模型”创建 EditorTemplate 的方法。我是 MVC 的新手，所以我很可能会做一些惊人的事情，显然是错误的。

这是一个简化的示例，显示了我的问题：

楷模：

```
public class Foo
{
  public string Bar { get; set; }

  public Foo(string bar)
  {
    Bar = bar;
  }

  public Foo(){}

}

public class Foos
{
  public List<Foo> ListOfFoos {get;set;}
} 
```

控制器：

```
public ActionResult Index()
{
    Foos foos = new Foos
    {
      ListOfFoos = new List<Foo>()
    };
    // here I'm procedurally constructing some data to keep my example simple.
    for (int i = 0; i < 10; ++i)
    {
      foos.ListOfFoos.Add(new Foo(i.ToString()));
    }
    return View( foos );
}

[HttpPost]
public ActionResult Index(Foos foos)
{
  ??? foos.ListOfFoos is null here ???
  return View();
} 
```

看法：

```
 @model OCC_Tracker.Models.Foos
    @using (Html.BeginForm())
    {

      <table>
      <tbody>
      @for (int i = 0; i < Model.ListOfFoos.Count; ++i)
      {

        <tr>
          <td>
            @Html.TextBoxFor(m => m.ListOfFoos[i].Bar)
          </td>
         </tr>
      }
      </tbody>
      </table>

    <button>Submit</button>
   } 
```

# javascript - 覆盖表格排序器 CSS

> ID：13402392
> 
> 赞同：0
> 
> 时间：2012-11-15T16:54:13.770
> 
> 标签：javascript, jquery, tablesorter

我正在使用 jQuery tablesorter gem。当页面加载时，我有一个代码来突出显示表格中某些行的背景颜色。

由于使用了tablesorter，我猜它会覆盖css并且不允许更改行的背景颜色。

这是代码。此功能在页面加载时自动加载。我将 table-sorter 删除到 table 并尝试了这个。有用。我必须让它与应用的表格分类器一起工作。

```
$(document).ready(function() {
    var row, len, results;
    row = 0;
    results = [];
    while (row < len) {
        if ($("#tab1 #example_"+row+"chkbx").is(":checked")) {
            $("#tab1 #example_" + row).css("background-color", "#c6b79f");
        }
        row++;
    }
    return results;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:58:24.460

你在这里有三个选择，..

```
$("#tab1 #example_" + row).css("background-color", "#c6b79f"); 
```

*   1.) 具有更好特异性的选择器。
*   2.) 更改 CSS 文件。
*   3.) 使用！重要。

`3rd option`应该作为快速修复但不好的做法。我更喜欢`1st option`.

```
$("#tab1 #example_" + row).css("background-color", "#c6b79f    !important"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:40:13.287

如果您使用的是[tablesorter gem](https://github.com/linjunpop/jquery-tablesorter-rails)，我相信您可能正在使用我的[tablesorter](https://github.com/Mottie/tablesorter)分支。

我有一个带有解析器的[演示](http://jsfiddle.net/Mottie/abkNM/78/)，该解析器使用复选框来更改行颜色。它还使用复选框状态更新缓存，以便您可以对该列进行排序。

此解析器不适用于原始版本的 tablesorter。

```
// add parser through the tablesorter addParser method
$.tablesorter.addParser({
    id: 'checkbox',
    is: function(s) {
        return false;
    },
    format: function(s, table, cell, cellIndex) {
        var $t = $(table), $c = $(cell), c,

        // resort the table after the checkbox status has changed
        resort = false;

        if (!$t.hasClass('hasCheckbox')) {
            $t
            .addClass('hasCheckbox')
            // make checkbox in header set all others
            .find('thead th:eq(' + cellIndex + ') input[type=checkbox]')
            .bind('change', function(){
                c = this.checked;
                $t.find('tbody tr td:nth-child(' + (cellIndex + 1) + ') input').each(function(){
                  this.checked = c;
                  $(this).trigger('change');
                });
            })
            .bind('mouseup', function(){
                return false;
            });
            $t.find('tbody tr').each(function(){
                $(this).find('td:eq(' + cellIndex + ')').find('input[type=checkbox]').bind('change', function(){
                    $t.trigger('updateCell', [$(this).closest('td')[0], resort]);
                });
            });
        }
        // return 1 for true, 2 for false, so true sorts before false
        c = ($c.find('input[type=checkbox]')[0].checked) ? 1 : 2;
        $c.closest('tr')[ c === 1 ? 'addClass' : 'removeClass' ]('checked');
        return c;
    },
    type: 'numeric'
}); 
```

# python - Scipy稀疏矩阵 - 不一致的和

> ID：13402393
> 
> 赞同：5
> 
> 时间：2012-11-15T16:54:17.760
> 
> 标签：python, numpy, scipy, sparse-matrix

我有一个稀疏矩阵，是通过一堆复杂的计算得出的，在这里我无法重现。我将尝试找到一个更简单的例子。

现在，有没有人知道（甚至远程）我可能有一个`X`具有以下属性的稀疏矩阵：

```
In [143]: X.sum(0).sum()
Out[143]: 131138

In [144]: X.sum()
Out[144]: 327746

In [145]: X.sum(1).sum()
Out[145]: 327746

In [146]: type(X)
Out[146]: scipy.sparse.csr.csr_matrix 
```

我唯一的猜测是，如果我想正确地对列求和，我需要首先将矩阵转换为 csc——这是有道理的。尽管有人会认为 sparse 包会优雅地处理列总和（或抛出错误），而不是仅仅给出错误的答案。

经过更多思考，我尝试了以下方法：

```
In [164]: X.tocsr().sum(0).sum()
Out[164]: 131138

In [165]: X.tocsc().sum(0).sum()
Out[165]: 131138

In [166]: X.tocoo().sum(0).sum()
Out[166]: 131138

In [167]: X.tolil().sum(0).sum()
Out[167]: 131138

In [168]: X.todok().sum(0).sum()
Out[168]: 131138

In [169]: X.shape
Out[169]: (196980, 43)

In [170]: X
Out[170]: 
<196980x43 sparse matrix of type '<type 'numpy.uint16'>'
        with 70875 stored elements in Compressed Sparse Row format>

In [172]: X.todense().sum(0)
Out[172]: 
matrix([[170726,   1041, 117398,   3526,  13202,   3585,   2355,   1895,   1392,   2189,   2070,   2603,   1676,    496,   1194,    933,    129,
            529,    544,    256,      7,      0,      0,      0,      0,      0,      0,      0,      0,      0,      0,      0,      0,      0,
              0,      0,      0,      0,      0,      0,      0,      0,      0]], dtype=uint64)

In [173]: X.sum(0)
Out[173]: 
matrix([[39654,  1041, 51862,  3526, 13202,  3585,  2355,  1895,  1392,  2189,  2070,  2603,  1676,   496,  1194,   933,   129,   529,   544,   256,
             7,     0,     0,     0,     0,     0,     0,     0,     0,     0,     0,     0,     0,     0,     0,     0,     0,     0,     0,     0,
             0,     0,     0]], dtype=uint16) 
```

我应该添加更多上下文：矩阵只有非负条目（它们是计数）。特别是有两个稀疏计数矩阵`A`，`B`我将它们相乘得到`X`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T17:33:12.410

好的，所以seberg回答了这个问题。非常感谢。去赛贝格！

他观察到数据类型 uint16 可能是个问题。果然 - uint16 最大约为 65,000，而我的总和比这大得多，即使我的个人数据点比这小得多。

布丁中的证明：

```
In [184]: Y = sparse.csc_matrix(X,dtype=np.uint32)

In [185]: Y.sum(0).sum()
Out[185]: 327746

In [187]: Y.sum(0)
Out[187]: 
matrix([[170726,   1041, 117398,   3526,  13202,   3585,   2355,   1895,   1392,   2189,   2070,   2603,   1676,    496,   1194,    933,    129,
            529,    544,    256,      7,      0,      0,      0,      0,      0,      0,      0,      0,      0,      0,      0,      0,      0,
              0,      0,      0,      0,      0,      0,      0,      0,      0]], dtype=uint32) 
```

这解释了不一致的总和，并通过更改数据类型来纠正问题。虽然，仍然存在一个持久性问题——如果我有一个包含所有小条目的矩阵，我希望能够为它使用更小的数据类型（以节省内存）。

这是一个单独但相关的问题：

在对稀疏矩阵的列求和时，有没有办法优雅地处理数值溢出问题？

# javascript - 掷骰子游戏模拟

> ID：13402394
> 
> 赞同：-1
> 
> 时间：2012-11-15T16:54:23.923
> 
> 标签：javascript, html

我正在使用 javascript 创建一个掷骰子游戏。我几乎所有东西都按照它应该的方式工作，只需要做一些小的调整，但我坚持的部分是创建某种类型的函数，或者可能使用 setTimeout()。我有一个 .wav 文件播放掷骰子的声音，但我想做的是在掷骰子的声音之后出现用户赢或输的文本（在 .wav 文件停止播放骰子之后滚动的声音）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:59:06.187

我认为您无法检测到有关声音文件结束的任何事件。您应该播放声音，然后使用硬编码的持续时间启动 setTimeout 函数。

例如：

```
setTimeout(diceRolled,3000); //these are millisecond -> 3 seconds wait

// ..........

function diceRolled(){
//do anything here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:37:02.693

我会说“正确”的答案是使用 html5 音频并绑定到它的各种事件——您可以获取文件的持续时间、检测声音是否已完成播放、获取其当前播放位置等。

但是，它使用起来相当复杂，因此我不建议将它用于此目的或启动 javascripters。

[http://html5doctor.com/html5-audio-the-state-of-play/](http://html5doctor.com/html5-audio-the-state-of-play/)
[http://www.html5rocks.com/en/tutorials/webaudio/intro/](http://www.html5rocks.com/en/tutorials/webaudio/intro/)

# iphone - 如何在 iphone 应用程序中将导航控制器的后退按钮与其左角对齐

> ID：13402395
> 
> 赞同：2
> 
> 时间：2012-11-15T16:54:24.657
> 
> 标签：iphone, ios, uinavigationcontroller, uinavigationbar, customization

我已经通过向其添加图像来定制我的导航控制器后退按钮，但我仍然无法将后退按钮返回到导航栏的左角。我想避免导航栏的左边距和后退按钮之间的间隙或空间。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:08:05.873

这是您可以使用的代码

```
 UIButton* backButton= [UIButton buttonWithType:UIButtonTypeCustom];
//here in below you just need to pass the point where you want to place your button. 
```

正如你所说，你需要`space between navigation bar's left margin and the back button.`

```
[backButton setFrame:CGRectMake(xOrigin, yOrigin, width, height)];
[backButton setImage:[UIImage imageNamed:@"imageName.png"] forState:UIControlStateNormal];
UIBarButtonItem * leftBarButton =[[UIBarButtonItem alloc] initWithCustomView:backButton];
self.navigationItem.leftBarButtonItem= leftBarButton; 
```

我希望它可以帮助你。

# django - Django 私有项目 Git 存储库 - 开源应用程序存储库

> ID：13402397
> 
> 赞同：4
> 
> 时间：2012-11-15T16:54:37.480
> 
> 标签：django, git, open-source, django-apps

我和我的团队目前正在开发一个 django 应用程序。我们希望跟踪私有 repo 上 django 项目文件的更改（因此所有私有信息都不可用）以及在 github 上开源应用程序文件。

目前我们有两个回购：

1) 项目的回购，其中包含：

```
 /Main Folder
  |- .git
  |- /djangoproject
  |- requirements.txt
  |- dev-db.sqlite
  |- manage.py
  |- .gitignore 
```

git ignore 被告知忽略第二个 repo，它是应用 repo，也位于主文件夹中：

2)

```
/Main Folder
  |- /django-app-name // the name of the repo as appearing on github
      |- .git
      |- /djangoapp
          |- models.py
          |- urls.py
          |- views.py
          |- admin.py
          |- ....
      |- .gitignore
      |- LICENSE
      |- README.md
      |- requirements.txt 
```

这适用于我们的目的，但是以某种方式合并两个 repos 以便一个命令可以同时使用两者会非常好。我刚刚开始使用 git，所以我不知道 git 包含的所有很棒的功能。有没有办法能够在单个 repo 中跟踪整个 django 项目的私有和公共部分？使用 git 进行私有项目设置和开源应用程序的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T18:00:05.323

据我所知，最好的方法是拥有一个 git 子模块。

看看 git 子模块是如何工作的：http: [//git-scm.com/book/en/Git-Tools-Submodules](http://git-scm.com/book/en/Git-Tools-Submodules)

# html - 为下拉菜单设置不同的无序列表元素样式

> ID：13402402
> 
> 赞同：0
> 
> 时间：2012-11-15T16:55:10.147
> 
> 标签：html, css, drop-down-menu

我目前正在尝试从嵌套的无序列表创建一个下拉菜单。我的菜单可以正常工作，但是我在样式方面遇到了一些问题。触发下拉菜单的整体链接是可点击的，并且需要有一个带有白色文本的蓝色背景，但是，下拉元素需要有一个从整个导航容器继承的灰色背景。我需要做的就是修改文本颜色，但是无论我尝试什么方法，它总是会修改下拉文本颜色以及标题链接颜色。

可以在下面找到我的 CSS 以及当前显示的示例和用于生成菜单的 html：

```
/*CSS*/

#coolMenu,
#coolMenu ul {
list-style: none;
}

#coolMenu {
float: right;
}

#coolMenu > li {
float: left;
}

#coolMenu li a {
display: block;
/*height: 2em;
line-height: 2em;
*/
/*padding: 0 1.5em;*/
text-decoration: none;
color: #ffffff;
 }

#coolMenu ul {
position: absolute;
display: none;
z-index: 999;
}

#coolMenu li:hover ul {
display: block;
}

.dropdown a li{
color: #124162 !important;
}

#style_me > li > a{
color: #124162 !important;
} 
```

/ *HTML* /

```
 <nav id="navigation" class="navigation">

        <ul>
            <li class="current"><a href="#">Home</a></li>
            <li><a href="#">Who Are We?</a></li>
            <li><a href="#">Why Join Us?</a></li>
            <li><a href="#">Contact Us</a></li>
        </ul>

   /* This is the menu element that needs styling */

        <ul id="coolMenu">
                             /* THis should be blue background white text */
            <li><a href="#" class="donate">Login / Register</a>
                <ul id="style_me">
                     /* These should be grey background blue text */
                                        <li><a href="#">Link 1</a></li>
                                        <li><a href="#">Link 2</a></li>
                                        <li><a href="#">Link 3</a></li>
                                        <li><a href="#">Link 4</a></li>
                                        <li><a href="#">Link 5</a></li>
                                        <li><a href="#">Link 6</a></li>
                                        <li><a href="#">Link 7</a></li>
                                    </ul>   
               </li>
        </ul>

           </nav> 
```

任何帮助将不胜感激。自从我不得不做任何 CSS 以来已经有好几年了，我的记忆有点糟糕！

![在此处输入图像描述](../Images/add59ba7e27c6d64403ad6dadc3a9b19.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:58:52.243

这应该做你想要的：

```
#style_me li a {
     color: #124162 !important;
} 
```

（只是空格而不是`>`）而且，也许你不需要那个`!important`.

更新：如果您发布的内容被覆盖，请尝试更具体的 CSS 选择器。

```
#coolMenu li #style_me li a {
         color: #124162 !important;
} 
```

# java - 我需要在多个视图中使用相同的变量，但它不起作用

> ID：13402403
> 
> 赞同：2
> 
> 时间：2012-11-15T16:55:10.940
> 
> 标签：java, android, variables, views

我正在尝试创建一个计算行星重量的应用程序。在第一个视图中，用户输入他们的体重，它有一个输入按钮，在第二个视图中是一个单选按钮列表和选择按钮。我想让它们的重量乘以地球的力量。为此，我需要activity_main.xml 和planets.xml 的权重变量。起初我只在行星上使用它，但现在它也在 main 中，if else 语句出错了。

活动主.xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TextView
    android:id="@+id/askwtTextView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="17dp"
    android:layout_marginTop="19dp"
    android:text="@string/askwt" />

<EditText
    android:id="@+id/inputwtEditText"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/askwtTextView"
    android:layout_below="@+id/askwtTextView"
    android:layout_marginTop="26dp"
    android:ems="10"
    android:inputType="numberDecimal" />

<Button
    android:id="@+id/enterButton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/inputwtEditText"
    android:layout_below="@+id/inputwtEditText"
    android:layout_marginTop="38dp"
    android:onClick="buttonclick"
    android:text="@string/enter" />

</RelativeLayout> 
```

行星.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/planetTextView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/planet" />

<TextView
    android:id="@+id/textViewform2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="" />

<RadioGroup
    android:id="@+id/radioGroup1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <RadioButton
        android:id="@+id/mercuryRadio"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:checked="true"
        android:text="@string/mercury" />

    <RadioButton
        android:id="@+id/venusRadio"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/venus" />

    <RadioButton
        android:id="@+id/earthRadio"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/earth" />

    <RadioButton
        android:id="@+id/marsRadio"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:checked="true"
        android:text="@string/mars" />

    <RadioButton
        android:id="@+id/jupiterRadio"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/jupiter" />

    <RadioButton
        android:id="@+id/saturnRadio"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/saturn" />

    <RadioButton
        android:id="@+id/uranusRadio"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:checked="true"
        android:text="@string/uranus" />

    <RadioButton
        android:id="@+id/neptuneRadio"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/neptune" />

    <RadioButton
        android:id="@+id/plutoRadio"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/pluto" />
</RadioGroup>

<Button
    android:id="@+id/selectButton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:onClick="buttonclick2"
    android:text="@string/select" />

<TextView
    android:id="@+id/textViewform2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
     />

</LinearLayout> 
```

爪哇：

```
package com.deitel.planetaryweight;

import android.os.Bundle;
import android.app.Activity;
import android.widget.*;
import android.view.View;
import android.view.Menu;
import android.widget.Button;
import android.widget.RadioButton;
import android.widget.RadioGroup;
import android.widget.EditText;
import android.widget.TextView;
import java.text.DecimalFormat;

public class MainActivity extends Activity {

//Global variable
double weight;
private Button enter;  // creates a button 

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    enter = (Button) findViewById(R.id.enterButton);

    //Start with first screen
    setContentView(R.layout.activity_main);
}

//buttonclick for form 1
public void buttonclick(View view){

    //creates an editext and assigns the resource id of the xml edittext.
    EditText wtentry = (EditText)findViewById(R.id.inputwtEditText);

    //Receives the input from the edittext, converts it to a double (number).
    weight = Double.parseDouble(wtentry.getText().toString());

      //switch views to screen 2
       setContentView(R.layout.planets);

       //change the value of the textview on screen 2 to the calculation value
       TextView t2 = (TextView)findViewById(R.id.textViewform2);
       t2.setText(Double.toString(weight));

        }

        //buttonclick for form 2!
        public void buttonclick2(View view){
            setContentView(R.layout.planets);

            RadioButton mercury = (RadioButton) findViewById(R.id.mercuryRadio);
            RadioButton venus = (RadioButton) findViewById(R.id.venusRadio);
            RadioButton earth = (RadioButton) findViewById(R.id.earthRadio);            
            RadioButton mars = (RadioButton) findViewById(R.id.marsRadio);
            RadioButton jupiter = (RadioButton) findViewById(R.id.jupiterRadio);
            RadioButton saturn = (RadioButton) findViewById(R.id.saturnRadio);
            RadioButton uranus = (RadioButton) findViewById(R.id.uranusRadio);
            RadioButton neptune = (RadioButton) findViewById(R.id.neptuneRadio);
            RadioButton pluto = (RadioButton) findViewById(R.id.plutoRadio);

            //Makes a variable for the entered amount
            Double mercurypf;
            Double venuspf;
            Double earthpf;
            Double marspf;
            Double jupiterpf;
            Double saturnpf;
            Double uranuspf;
            Double neptunepf;
            Double plutopf;
            Double weight;

            // constants
            final double mercuryforce = 0.38; 
            final double venusforce = 0.91; 
            final double earthforce = 1.00; 
            final double marsforce = 0.38; 
            final double jupiterforce = 2.34; 
            final double saturnforce = 1.06; 
            final double uranusforce = .92;
            final double neptuneforce = 1.19;
            final double plutoforce = 0.06;

            // Code used to determine which planet RadioButton is checked:

            if(mercury.isChecked())
            {
                mercurypf = mercuryforce * weight;
            }
            else
            {
                mercurypf = 0.00;
            }

            if(venus.isChecked())
            {
                venuspf = venusforce * weight;
            }
            else
            {
                venuspf = 0.00;

            }
            if(earth.isChecked())
            {
                earthpf = earthforce * weight;
            }
            else
            {
                earthpf = 0.00;
            }
            if(mars.isChecked())
            {
                marspf = marsforce * weight;
            }
            else
            {
                marspf = 0.00;
            }
            if(jupiter.isChecked())
            {
                jupiterpf =jupiterforce * weight;
            }
            else
            {
                jupiterpf = 0.00;
            }
            if(saturn.isChecked())
            {
                saturnpf = saturnforce * weight;
            }
            else
            {
                saturnpf = 0.00;
            }

            if(uranus.isChecked())
            {
                uranuspf = uranusforce * weight;
            }
            else
            {
                uranuspf = 0.00;
            }

            if(neptune.isChecked())
            {
                neptunepf = neptuneforce * weight;
            }
            else
            {
                neptunepf = 0.00;
            }

            if(pluto.isChecked())
            {
                plutopf = plutoforce * weight;
            }
            else
            {
                plutopf = 0.00;
            }

        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T17:00:19.290

一种方法是：

创建一个名为 say Constants 的新类，并将该变量声明为静态变量。现在您可以从所有活动中访问此变量。

```
public class Constants {
     public static double weight;
} 
```

从您的所有活动中访问它

`Constants.weight = 2.5;`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T17:00:33.567

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);            
    setContentView(R.layout.activity_main);

    enter = (Button) findViewById(R.id.enterButton);
} 
```

您应该在找到任何视图之前设置内容视图。

此外，您不需要对定义变量的方式进行任何更改，因为 weight 是 MainActivity 类中的私有变量，并且您正在同一活动中移动视图。该变量在您更改视图之前存储 editText 的值，因此即使您更改 contentView，它也不会丢失同一类中的值。据我所知，问题在于您没有`enter`正确设置按钮（我上面建议的更改应该有效）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T17:06:10.180

使用应用程序或静态变量全局保存值。看例子

创建一个扩展应用程序的新类。

```
public class Globals extends Application{
  private int data=200;

  public int getData(){
  return this.data;
}

 public void setData(int d){
  this.data=d;
 } 
```

}

```
Second:

Add the class to the AndroidManifest file as an attribute of <application> tag:

 <application android:name=".Globals" />

Then you can access your global data from any Activity by calling getApplication()

Globals g = (Globals)getApplication();
int data=g.getData(); 
```

**静态变量示例**

```
class Global{
    public static int global=1;
}

in your activity simply use it with its class name

 int a;
 a=Global.global; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T17:24:01.090

除了其余的，您还需要解决一些结构和设计问题。查看文档以获取有关在活动之间来回传递信息的信息。 `setContentView()`除非您有充分的理由，否则不应在 Activity 中多次调用。

```
public class MainActivity extends Activity {
    /* You should get used to declaring everything with the correct visibility.  Good practice is to make everything private and use public mutator methods */
    //Global variable
    private double weight;
    private Button enter;  // creates a button 

    // Views
    private EditText wtEntry;
    private TextView txtForm2;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        //Start with first screen
        setContentView(R.layout.activity_main);

        enter = (Button) findViewById(R.id.enterButton);

        //creates an editext and assigns the resource id of the xml edittext.
        wtEntry = (EditText)findViewById(R.id.inputwtEditText);
        txtForm2 = (TextView)findViewById(R.id.textViewform2);
    }
    // Button clicks shouldn't do anything but perform clicky actions. Leave field initialization, view creation, etc to the Activity.
    //buttonclick for form 1
    public void buttonclick(View view){
        //Receives the input from the edittext, converts it to a double (number).
        weight = Double.parseDouble(wtEntry.getText().toString());

        //change the value of the textview on screen 2 to the calculation value
       t2.setText(Double.toString(weight));

       // If you want a new layout, it's best to start a new activity.
       // It looks like you want to get information back, so use startActivityForResult().
       // setContentView(R.layout.planets);
       Intent dataIntent = new Intent(this, PlanetChooser.class);
       dataIntent.putExtra("com.yourpackage.identifier.DATA_WEIGHT", weight);
       startActivityForResult(dataIntent, Activity.RESULT_OK);
    }
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        // Check that the resultCode is the same as we started the activity with
        if(resultCode == Activity.RESULT_OK){
            // get the double from the Intent, using the same string name (package prefixed)
            // or a default value if it didn't get set.
            double resultWeight = data.getDoubleExtra("com.yourpackage.identifier.RESULT_WEIGHT", 0.0);

            // Now do something with resultWeight
        }
    }
}
// PlanetChooser.class
public class PlanetChooser extends Activity {
    // constants, usually denoted by uppercase and declared static and final
    public static final double MERCURYFORCE = 0.38; 
    public static final double VENUSFORCE = 0.91; 
    public static final double EARTHFORCE = 1.00; 
    public static final double MARSFORCE = 0.38; 
    public static final double JUPITERFORCE = 2.34; 
    public static final double SATURNFORCE = 1.06; 
    public static final double URANUSFORCE = 0.92;
    public static final double NEPTUNEFORCE = 1.19;
    public static final double PLUTOFORCE = 0.06;

    private RadioButton mercury, venus, earth, mars, jupiter, saturn, uranus, neptune, pluto;

    // No need to use the Double object as opposed to the primitive unless you have good reason
    private double mercurypf, venuspf, earthpf, marspf, jupiterpf, saturnpf, uranuspf, neptunepf, plutopf, weight;

    // One variable will suffice, it seems.
    private double resultForce;

    public void onCreate(Bundle s){
        super.onCreate(s);
        setContentView(R.layout.planets);

        mercury = (RadioButton) findViewById(R.id.mercuryRadio);
        venus = (RadioButton) findViewById(R.id.venusRadio);
        earth = (RadioButton) findViewById(R.id.earthRadio);            
        mars = (RadioButton) findViewById(R.id.marsRadio);
        jupiter = (RadioButton) findViewById(R.id.jupiterRadio);
        saturn = (RadioButton) findViewById(R.id.saturnRadio);
        uranus = (RadioButton) findViewById(R.id.uranusRadio);
        neptune = (RadioButton) findViewById(R.id.neptuneRadio);
        pluto = (RadioButton) findViewById(R.id.plutoRadio);
    }
    public void buttonclick2(View view){
        /*
        It looks to me here you're looking to see which box is checked, and set a value based on 
        that planet.  Since instance variables (in this case mercurypf, jupiterpf, etc) are initialized
        to the default value (0), there's no need to set them manually.
        */

        // Code used to determine which planet RadioButton is checked:
        if(mercury.isChecked())    {
            resultForce = MERCURYFORCE * weight;
        }
        if(venus.isChecked()){
            resultForce = VENUSFORCE * weight;
        }
        if(earth.isChecked()){
            resultForce = EARTHFORCE * weight;
        }
        if(mars.isChecked()){
            resultForce = MARSFORCE * weight;
        }
        if(jupiter.isChecked()){
            resultForce =JUPITERFORCE * weight;
        }
        if(saturn.isChecked()){
            resultForce = SATURNFORCE * weight;
        }
        if(uranus.isChecked()){
            resultForce = URANUSFORCE * weight;
        }
        if(neptune.isChecked()){
            resultForce = NEPTUNEFORCE * weight;
        }
        if(pluto.isChecked()){
            resultForce = PLUTOFORCE * weight;
        }
        // Create a new data Intent to pass back to the calling activity, set the result code, 
        // and manually finish() this activity.
        Intent dataIntent = new Intent(this);
        dataIntent.putDoubleExtra("com.yourpackage.identifier.RESULT_DATA", resultForce);
        setResult(Activity.RESULT_OK, dataIntent);
        finish();
    }
} 
```

# c# - 如何在 C# 上使用来自 COM 对象的指针？

> ID：13402404
> 
> 赞同：0
> 
> 时间：2012-11-15T16:55:11.953
> 
> 标签：c#, .net

全部。

我正在尝试在 .net 项目上使用我的旧 dll 文件。因此，我使用 Windows SDK 中的 [tlbimp.exe] 实用程序将这个非托管 COM 对象转换为托管对象。

但是，一种方法返回一个 Object 作为返回值，但每当我尝试使用它时，我的程序都会产生错误。

奇怪的事情如下：

```
//Object[] item = s.GetObjects(); //this generates an type error
Object item = s.GetObjects(); //this works okay
System.WriteLine(items); //prints System.Object[] rather than System.Object. 
```

它似乎返回一个包含对象数组的指针。不是吗？
请任何人告诉我如何处理这个问题，有没有关于这个问题的文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:58:25.500

你可以试试这个吗？

```
Object[] item = s.GetObjects() as Object[]; 
```

# seam - 如何在 seam 应用程序中设置 HTTP 响应标头？

> ID：13402407
> 
> 赞同：3
> 
> 时间：2012-11-15T16:55:42.810
> 
> 标签：seam

我需要为我网站中的所有页面设置一个 HTTP 响应标头，我不知道 seam 是否在配置文件中提供了一些钩子来做到这一点，或者？以前有人做过吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T22:28:09.733

我无法在任何地方找到此文档，但通过在 eclipse 中使用自动完成功能，编辑 pages.xml，我发现这有效：

```
<page view-id="*">
    <header name="X-UA-Compatible" value="IE=8"/> 
```

# android - 使用 Proguard 时，是否需要为每个引用的库单独配置？

> ID：13402408
> 
> 赞同：5
> 
> 时间：2012-11-15T16:55:51.487
> 
> 标签：android, proguard

我的应用程序引用了 HoloEverywhere 和 SherlockActionBar，它们都是工作区项目。当我仅为应用程序启用 Proguard 时，它会崩溃并给出以下错误：

```
11-15 11:50:11.090: E/AndroidRuntime(24823): Caused by: java.lang.RuntimeException: java.lang.NoSuchMethodException: <init> [class android.app.Activity, int]
11-15 11:50:11.090: E/AndroidRuntime(24823):    at com.actionbarsherlock.a.a(Unknown Source)
11-15 11:50:11.090: E/AndroidRuntime(24823):    at org.holoeverywhere.a.a.l(Unknown Source)
11-15 11:50:11.090: E/AndroidRuntime(24823):    at org.holoeverywhere.a.a.setContentView(Unknown Source) 
```

这是因为我只为应用程序启用了 Proguard，而不是其他工作区项目 HE 和 ABS？

我在 sdk 中使用默认的 proguard-project.txt 并没有添加任何额外的规则。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-15T17:26:47.687

你不可以。

使用这些规则来保持引用的类不被混淆。

```
-keep class com.actionbarsherlock.** {*;}
-keep class org.holoeverywhere.** {*;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-06T13:08:27.340

这也将有所帮助

```
## ActionBarSherlock 4.4.0 specific rules ##

-keep class android.support.v4.app.** { *; }
-keep interface android.support.v4.app.** { *; }
-keep class com.actionbarsherlock.** { *; }
-keep interface com.actionbarsherlock.** { *; }
-keepattributes *Annotation*

## hack for Actionbarsherlock 4.4.0, see        https://github.com/JakeWharton/ActionBarSherlock/issues/1001 ##
-dontwarn com.actionbarsherlock.internal.** 
```

# django - 从 django 中删除用户，但保留 CMS 页面

> ID：13402409
> 
> 赞同：0
> 
> 时间：2012-11-15T16:55:53.530
> 
> 标签：django, django-cms

如果你从 Django 中删除一个用户，那么所有相关的 CMS 页面也将被删除。例如，当有人离开公司时，我不希望他的凭据在系统中可用，因此删除用户是最好的选择（如果您有很多用户，只有禁用该帐户有点麻烦）。删除用户时也被删除的页面是不受欢迎的功能。有没有（简单的）方法来解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:23:08.823

为什么禁用帐户如此麻烦，即使有很多用户？您仍然必须在管​​理员中找到用户的页面才能将其删除，就像禁用一样。

1) 您还可以删除他们的权限和/或撤销他们的管理员访问权限。所有这些功能都旨在完全满足您的需求。

2）您可以编写一个自定义删除函数，该函数遍历连接到相关 CMS 用户的所有页面，并将它们与所述用户的关系设置为 NULL，然后删除该用户。

3）您可以在数据库级别关闭外键检查。

4）最后，您可以简单地不删除用户。删除数据是个坏主意——这就是存在活动标志之类的东西的原因。有一天你可能想回顾那个被删除的用户，如果他的所有记录都消失了，你会自责的。

# python - TKinter - 使用网格布局的框架中的小部件不“粘”

> ID：13402411
> 
> 赞同：2
> 
> 时间：2012-11-15T16:56:10.190
> 
> 标签：python, tkinter

我在 TKinter 中构建了一个相当复杂的 GUI，所以很自然地一直在使用 .grid 函数。

我已将我的一些小部件分组到框架中以使其更易于处理，但由于某种原因，当我在框架中使用带有小部件的 .grid 时，sticky 属性似乎不起作用 - 我的小部件没有填满整个框架。

例子：

```
f3 = tk.Frame(self, borderwidth=1, relief="ridge")
f3.grid(row=0, column=0, sticky="NS")
tk.Label(f3, text="Site List").grid(in_=f3, row=0, column=0)
self.sitelist = tk.Listbox(f3)
self.sitelist.grid(in_=f3, row=1, column=0, sticky="NS") 
```

在上面的代码中，框架`f3`填充了我的根小部件的 0,0 单元格中的空间，但列表框并没有填充框架中的所有空间，即使我已经要求它是粘性的“NS”。

如果将 Listbox 放在根小部件的 0,0 处，则它会拉伸并很好地填充所有空间。如果它在框架中，它只是表现不佳。

谁能解释如何解决这个问题？

我认为使用框架会简化我的布局，但事实并非如此！！！

干杯。克里斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T18:16:50.687

您需要给一列或多行“权重”。通常，您将恰好拥有一列一列，权重为 1（默认为零）。当包含的小部件或窗口调整大小时，任何具有权重的行或列都会扩展和收缩。

如果多于一行或多于一列具有权重，则权重描述了它们扩展的比例。例如，如果一列的权重为 2，而另一列的权重为 1，则包含 2 的列将扩展为包含 1 的列的两倍。

您可以使用`grid_rowconfigure`和`grid_columnconfigure`选项将权重分配给包含的小部件：

```
f3.grid_rowconfigure(0, weight=1)
f3.grid_columnconfigure(0, weight=1) 
```

有关权重的简短描述，请参阅[tkdocs.com](http://www.tkdocs.com)网站上网格教程中标题为“[处理调整大小”的部分。](http://www.tkdocs.com/tutorial/grid.html#resize)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T17:07:41.660

首先，您不应该在实例化标签的同时对标签进行网格化。然后，您必须使用 Grid.rowconfigure 将“权重”添加到行并使用 Grid.columnconfigure 将其添加到列。权重控制扩展，并且必须为非零以允许网格扩展小部件。如果您将以下几行添加到您的代码中，它应该可以工作：

```
Grid.columnconfigure(f3, 0, weight=1)
Grid.rowconfigure(f3, 0, weight=1)
Grid.rowconfigure(f3, 1, weight=1) 
```

希望能帮助到你

# php - ZF2 Breadcrumbs Helper - 如何将其呈现为无序列表？

> ID：13402414
> 
> 赞同：7
> 
> 时间：2012-11-15T16:56:19.520
> 
> 标签：php, html, zend-framework2, breadcrumbs, view-helpers

我是 Zend Framework2 的新手，我正在就以下情况寻求建议：

我正在使用 ZF2 **Breadcrumbs Helper**在我的项目和此代码上创建面包屑：

```
 //breadcrumbs.phtml 

 echo $this->navigation('Navigation')
        ->breadcrumbs()
        ->setLinkLast(false)               // link last page
        ->setMaxDepth(7)                   // stop at level 7
        ->setMinDepth(0)                   // start at level 0
        ->setSeparator(' »' . PHP_EOL);    // separator with newline 
```

渲染时看起来像这样：

**Home » Lorem Ipsum1 » Lorem Ipsum2 » 当前的 Crumb**

探索源代码：

```
<div id="breadcrumbs">
    <a href="/">Home</a>
    »
    <a href="/">Lorem Ipsum1</a>
    »
    <a href="/">Lorem Ipsum2</a>
    » Current Crumb
</div> 
```

所以，我的问题是：使用面包屑助手如何获得以下源代码才能按照我想要的方式设置面包屑的样式？

```
<div id="breadcrumbs">
    <ul id="breadcrumbs">
       <li><a href="">Home</a></li>
       <li><a href="">Lorem Ipsum1</a></li>
       <li><a href="">Lorem Ipsum2</a></li>
       <li><a href="" class="current">Current Crumb</a></li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-08T09:49:28.257

您可以使用视图助手设置要使用的部分：

```
<?php $partial = array('application/navigation/breadcrumbs.phtml', 'default') ?>
<?php $this->navigation('navigation')->breadcrumbs()->setPartial($partial) ?>
<?php echo $this->navigation('navigation')->breadcrumbs()->render() ?> 
```

然后你的部分将是这样的（application/navigation/breadcrumbs.phtml）：

```
<?php $container = $this->navigation()->breadcrumbs()  ?>
<?php /* @var $container \Zend\View\Helper\Navigation\Breadcrumbs */ ?>
<?php $navigation = $container->getContainer() ?>
<?php /* @var $navigation \Zend\Navigation\Navigation */ ?>

<ul class="breadcrumb">
    <li><a href="<?php echo $this->url('soemroute') ?>">Home</a> <span class="divider">/</span></li>
    <?php foreach($this->pages as $page): ?>
        <?php /* @var $page \Zend\Navigation\Page\Mvc */ ?>
        <?php if( ! $page->isActive()): ?>
            <li>
                <a href="<?php echo $page->getHref() ?>"><?php echo $page->getLabel() ?></a> 
                <span class="divider">/</span>
            </li>
        <?php else: ?>
            <li class="active">
                <?php if($container->getLinkLast()): ?><a href="<?php echo $page->getHref() ?>"><?php endif ?>
                <?php echo $page->getLabel() ?>
                <?php if($container->getLinkLast()): ?></a><?php endif ?>
            </li>
        <?php endif ?>
    <?php endforeach ?>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-12T18:45:31.553

我只是在我的 ZF2 上创建了一个 Twitter Bootstrap 面包屑

面包屑.phtml

```
<?php
if (count($this->pages) > 0) :
?>
<ol class="breadcrumb">
<?php
for ($i = 0, $iend = count($this->pages); $i < $iend; $i++) :
    $a=$this->pages[$i];
    $label = $this->translate($a->getLabel());
?>
    <li <?php if ($i + 1 == $iend) : ?> class="active" <?php endif ?> >
        <?php if ($i + 1 != $iend) : ?>
            <a href="<?php echo $a->getHref(); ?>"><?php echo $label ?></a>
        <?php else : ?>
            <?php echo $label ?>
        <?php endif ?>
    </li>
<?php endfor ?>
</ol>
<?php endif ?> 
```

并在我的模板上打印

```
<?php echo $this->navigation()->breadcrumbs('Navigation')->setPartial('partial/breadcrumb.phtml'); ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T17:01:15.453

我不确定这是否会对您有所帮助，但进度应该类似于：[这里](https://stackoverflow.com/questions/8701828/zend-framework-using-breadcrumbs-with-partial)

更多信息：[zf2 文档](http://packages.zendframework.com/docs/latest/manual/en/modules/zend.view.helpers.navigation.html)使用部分视图脚本渲染面包屑

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-12T12:11:06.240

**对于 ZF3**

文件：部分/面包屑.phtml

```
<?php
/**
 * Zend breadcrumb partial
 *
 * @date 12.09.2018 16:47
 * @var $this \Zend\View\Renderer\PhpRenderer
 * @var $page \Zend\Navigation\Page\AbstractPage
 */

if (0 == count($this->pages)) {
    return;
}
?>
<ul class="breadcrumb">
    <?php foreach ($this->pages as $page) :?>
        <?php if ($page->isActive()): ?>
            <li class="active"><?= $page->getLabel() ?></li>
        <?php else : ?>
            <li><a href="<?= $page->getHref()?>"><?= $page->getLabel() ?></a></li>
        <?php endif; ?>
    <?php endforeach; ?>
</ul> 
```

文件：./config/autoload/navigation.global.php

```
<?php
return [
    'navigation' => [
        'breadcrumb' => [
            [
                'label' => 'Home',
                'route' => 'home',
                'pages' => [
                    [
                        'label' => 'Page - 1',
                        'route' => 'doc',
                        'pages' => [
                            [
                                'label' => 'Sub page 2',
                                'route' => 'doc/page',
                                'params' => ['page' => 'control-panel'],
                            ],
                        ]
                    ],
                ]
            ],
        ],
    ],
]; 
```

在视图上

```
<?= $this->navigation('Zend\Navigation\Breadcrumb')
         ->breadcrumbs()
         ->setPartial('partial/breadcrumbs.phtml')
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-10T07:41:27.550

我知道这是一个老问题，但如果有人想要一个简单的渲染 ul-li 菜单的解决方案，你可以在你的*breadcrumbs.phtml*中使用这个代码：

```
<?php $breadcrumbs = $this->navigation()->breadcrumbs()->setMinDepth(0); ?>
<?php $items = array_filter(explode($breadcrumbs->getSeparator(), $breadcrumbs->render())); ?>
<?php if ($items) : ?>
    <ul class="breadcrumbs">
        <?php foreach ($items as $item) : ?>
            <li><?= $item ?></li>
        <?php endforeach; ?>
    </ul>
<?php endif; ?> 
```

# sql - 在 SQL 中对 Case 查询的结果求和

> ID：13402419
> 
> 赞同：1
> 
> 时间：2012-11-15T16:56:43.807
> 
> 标签：sql, case

我认为这是一个相对简单的问题，但我花了一个下午寻找答案，但还没有找到。所以...

我有一个国家列和一个数字列的视图。我想让任何数字小于 10 '其他'，然后将'其他'相加成一个值。

例如，

```
AR  10
AT  7
AU  11
BB  2
BE  23
BY  1
CL  2 
```

我使用 CASE 如下：

```
select country = case
when number < 10 then 'Other'
else country
end,
number
from ... 
```

这会将数字列中小于 10 的国家值替换为其他值，但我不知道如何对它们求和。我想得到一个看起来像这样的表/视图：

```
AR  10
AU  11
BE  23
Other  12 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T16:58:53.147

只需按您的案例陈述分组：

```
select 
  country = case
     when number < 10 then 'Other'
     else country
  end,
  sum(number)
from ...
group by
  case
     when number < 10 then 'Other'
     else country
  end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T17:00:30.553

```
select country, number
from your_table
where number >= 10
union
select 'Other' as country, sum(number)
from your_table
where number < 10 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T17:00:06.463

你需要一个 Group by

```
 select country = case
    when number < 10 then 'Other'
    else country
    end,
    sum(number)
    from ...
    group by 
       case when number < 10 then 'Other' else country end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T17:01:54.377

您可以将其包装到派生表中以避免重复 CASE 语句。

```
select country, 
       sum(number) as number
from (
    select case
              when number < 10 then 'Other'
              else country
           end as country,
           number
    from ...
) t
group by country 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T18:30:09.123

你非常接近......你不能做国家=案例......试试

```
Select
      Case when number < 10 then 'Other'
           Else country end  as finalcountry,
      Sum(number) as total number
   From
      YourTable
   Group by
      Finalcountry 
```

由于我没有方便的 MySQL，我不记得它是否允许您使用最终列名作为 group by... 您可能也必须将 case when 子句重新复制到 group by 子句中。

# vb.net - 如何在 RichTextBox 中读取不同的文本行

> ID：13402420
> 
> 赞同：0
> 
> 时间：2012-11-15T16:56:46.230
> 
> 标签：vb.net

我想知道如何在 vb.net 中读取和转换 Richtextbox 的不同行，例如，如果这些是 RichTextBox 的行：

```
 Hello
    Hi 
```

我怎样才能把它转换成类似的东西：

```
 Yo(Hello)
    Yo(Hi) 
```

并将结果放在第二个富文本框中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T17:05:21.047

RichtextBox 有一个`lines`属性：

```
 Dim rtb_in As New RichTextBox
    Dim rtb_out As New RichTextBox
    For Each line In rtb_in.Lines
        rtb_out.AppendText(String.Format("Foo({0})", line))
    Next 
```

查看 MSDN 以了解您使用的课​​程总是一个好主意......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T17:04:08.877

您可以尝试在新行上拆分并修改结果：

```
Dim box1Lines as String() = richTextBox1.Text.Split(new String() { Environment.NewLine }, StringSplitOptions.RemoveEmptyEntries)

Dim newLines as String = ""

For Each line As String in box1Lines

    newLines += "Yo(" & line & ")" & Environment.NewLine

Next

richTextBox2.Text = newLines 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T12:16:42.460

可能你应该用`String.Join`它来完成它。一个`one line`解决方案是：

```
rtbOut.Lines = ("Yo(" & String.Join(")" & Environment.NewLine & "Yo(", rtbIN.Lines) & ")").Split(Environment.NewLine.ToCharArray, StringSplitOptions.RemoveEmptyEntries) 
```

这是将修改后的行分配给第二个的完整代码`RichTextBox`：

```
Dim rtbIN As New RichTextBox
Dim rtbOut As New RichTextBox
rtbIN.Lines = New String() {"Hello ", "Hi"}
rtbOut.Lines = ("Yo(" & String.Join(")" & Environment.NewLine & "Yo(", rtbIN.Lines) & ")").Split(Environment.NewLine.ToCharArray, StringSplitOptions.RemoveEmptyEntries) 
```

# c++ - CMAKE 错误项目文件无效；不包含 cmakelists.txt

> ID：13402423
> 
> 赞同：1
> 
> 时间：2012-11-15T16:56:51.387
> 
> 标签：c++, c, cmake

我正在尝试在 64 位 Windows 计算机上从以下网站编译代码..

[https://dms.sztaki.hu/en/project/gaussian-mixture-modeling-gmm-es-fisher-vector-toolkit](https://dms.sztaki.hu/en/project/gaussian-mixture-modeling-gmm-es-fisher-vector-toolkit)

我收到以下错误：

> 1) 错误配置.. 项目文件可能无效
> 2) CMake 错误：源目录“/GMM_Fisher_toolkit/GMM_CUDA_src”似乎不包含 CMakeLists.txt。
> 指定 --help 使用，或按 CMake GUI 上的帮助按钮。

我该如何编译它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T21:03:12.643

要创建一个外源构建：

1.  将源代码提取到 ~/src/test
2.  创建一个文件夹 ~/build/test
3.  转到：~/build/test
4.  运行：cmake ../../src/test
5.  运行：制作

# javascript - 在nodejs中制作通用响应处理程序的任何方法？

> ID：13402425
> 
> 赞同：0
> 
> 时间：2012-11-15T16:57:00.483
> 
> 标签：javascript, node.js

我正在尝试编写几个端点来向各种后端服务发出 GET 和 POST http 请求，数据的格式都将非常相似，因此 responseHandler 函数将一遍又一遍地复制到不同的路由函数，我想知道如果有办法将 responseHandler 外部化以供重用。我试图将其移出，但随后我将失去对 res 的引用。有人对更模块化的设计有任何建议吗？

```
routes['/endpoint'] = function(req, res){
    console.log("Serving endpoint: /endpoint")
    var params={"param": "param-value"}

    var options = {
      host: 'localhost',
      path: '/service?param='+params.param,
      method: 'GET'
    };

    var responseHandler = function(response) {
      var data = '';

      // keep track of the data you receive
      response.on('data', function(chunk) {
        data += chunk + "\n";
      });

      // finished? ok, send the data to the client in JSON format
      response.on('end', function() {
            res.header("Content-Type:","application/json");
            res.end(data);
      });
    };

    // make the request, and then end it, to close the connection
    http.request(options, responseHandler).end();
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:06:26.253

通常我认为你可以在你的库中创建一个名为 responseHandlers 的文件夹，添加一个包含类似

```
var responseHandler = function(response) {
  var data = '';

  // keep track of the data you receive
  response.on('data', function(chunk) {
    data += chunk + "\n";
  });

  // finished? ok, send the data to the client in JSON format
  response.on('end', function() {
        res.header("Content-Type:","application/json");
        res.end(data);
  });
};
exports.Handler = responseHandler; 
```

将其保存为whateverHandler.js，然后创建一个需要whatever.js 的index.js 文件并将其导出为Handler。这样，如果您将来需要添加更多处理程序，您只需添加一个文件并更新 index.js。使用，在路由处理程序中做一些事情，比如

```
var handler = require('./lib/responseHandlers').whateverHandler;
routes['/endpoint'] = function(req, res){
    console.log("Serving endpoint: /endpoint")
    var params={"param": "param-value"}

    var options = {
      host: 'localhost',
      path: '/service?param='+params.param,
      method: 'GET'
    };
};

// make the request, and then end it, to close the connection
http.request(options, handler).end();
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T17:38:43.600

你可以`responseHandler`变成一个函数生成器，并传入你的`res`对象，这样你就不会丢失它：

```
var responseHandler = function(res) {
  return function(response) {
    var data = '';

    // keep track of the data you receive
    response.on('data', function(chunk) {
      data += chunk + "\n";
    });

    // finished? ok, send the data to the client in JSON format
    response.on('end', function() {
          res.header("Content-Type:","application/json");
          res.end(data);
    });
  };
} 
```

并像这样使用它：

```
routes['/endpoint'] = function(req, res){
    console.log("Serving endpoint: /endpoint")
    var params={"param": "param-value"}

    var options = {
      host: 'localhost',
      path: '/service?param='+params.param,
      method: 'GET'
    };

    // make the request, and then end it, to close the connection
    http.request(options, responseHandler(res)).end();
}; 
```

# extjs - ExtJS 使用另一个控制器/视图创建弹出窗口？

> ID：13402427
> 
> 赞同：2
> 
> 时间：2012-11-15T16:57:08.957
> 
> 标签：extjs, extjs4, extjs4.1, extjs-mvc

我有一个网格，可以单击其中的行。单击会触发一个事件，然后由控制器捕获。有没有办法让那个控制器打开一个弹出窗口并调用一个控制器来用它的关联视图填充那个弹出窗口？这就是我现在网格控制器中的内容：

```
init: function() {
    ...
    this.control({
        'shipmentsgrid': {
            itemrowclick: this.itemRowClick
        }
    })
},
itemRowClick: function() {
    var win = new Ext.Window({var win = new Ext.Window({
        items: [{
            xtype: 'shipmentmonthly' // This is not recognized
        }]
    }).show();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T12:48:54.000

我不太确定您要归档什么。但是您可以使用从任何控制器范围调用的**[getController('YourControllerName')](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.app.Controller-method-getController)**轻松获取另一个控制器的实例。这将为您提供此控制器的一个实例（甚至加载必要的类）。现在您可以使用任何参数自由地调用此控制器上的任何方法。例如，您也可以提供此控制器的实例作为参数，我们将其作为范围或使用`this`（但这取决于您的实现）

对于您的示例：

```
itemRowClick: function() {
    var ctrl = this.getController('Controller2');
    var win = ctrl.openWin();
    win.show();
} 
```

// 驻留在控制器 2

```
openWin: function() {
    var win = Ext.create('Ext.window.Window',{
        items: [{
            xtype: 'shipmentmonthly' // This is not recognized
        }]
    });
    return win;
} 
```

# matlab - 通过扰动变量进行优化

> ID：13402429
> 
> 赞同：0
> 
> 时间：2012-11-15T16:57:40.220
> 
> 标签：matlab, variables, optimization, scale, covariance

我的主脚本包含以下代码：

```
%# Grid and model parameters
nModel=50;
nModel_want=1;
nI_grid1=5;
Nth=1;
nRow.Scale1=5;
nCol.Scale1=5;
nRow.Scale2=5^2;
nCol.Scale2=5^2;

theta = 90; % degrees
a_minor = 2; % range along minor direction
a_major = 5; % range along major direction
sill = var(reshape(Deff_matrix_NthModel,nCell.Scale1,1)); % variance of the coarse data matrix of size nRow.Scale1 X nCol.Scale1

%#  Covariance computation

% Scale 1
for ihRow = 1:nRow.Scale1
    for ihCol = 1:nCol.Scale1
        [cov.Scale1(ihRow,ihCol),heff.Scale1(ihRow,ihCol)] = general_CovModel(theta, ihCol, ihRow, a_minor, a_major, sill, 'Exp');
    end
end

% Scale 2
for ihRow = 1:nRow.Scale2
    for ihCol = 1:nCol.Scale2
        [cov.Scale2(ihRow,ihCol),heff.Scale2(ihRow,ihCol)] = general_CovModel(theta, ihCol/(nCol.Scale2/nCol.Scale1), ihRow/(nRow.Scale2/nRow.Scale1), a_minor, a_major, sill/(nRow.Scale2*nCol.Scale2), 'Exp');
    end
end

%# Scale-up of fine scale values by averaging
[covAvg.Scale2,var_covAvg.Scale2,varNorm_covAvg.Scale2] = general_AverageProperty(nRow.Scale2/nRow.Scale1,nCol.Scale2/nCol.Scale1,1,nRow.Scale1,nCol.Scale1,1,cov.Scale2,1); 
```

我在我的主脚本中使用了两个函数，`general_CovModel()`并且`general_AverageProperty()`，它们给出如下：

```
function [cov,h_eff] = general_CovModel(theta, hx, hy, a_minor, a_major, sill, mod_type)
% mod_type should be in strings

angle_rad = theta*(pi/180); % theta in degrees, angle_rad in radians
R_theta = [sin(angle_rad) cos(angle_rad); -cos(angle_rad) sin(angle_rad)];
h = [hx; hy];
lambda = a_minor/a_major;
D_lambda = [lambda 0; 0 1];
h_2prime = D_lambda*R_theta*h;
h_eff = sqrt((h_2prime(1)^2)+(h_2prime(2)^2));

if strcmp(mod_type,'Sph')==1 || strcmp(mod_type,'sph') ==1
    if h_eff<=a
        cov = sill - sill.*(1.5*(h_eff/a_minor)-0.5*((h_eff/a_minor)^3));
    else
        cov = sill;
    end
elseif strcmp(mod_type,'Exp')==1 || strcmp(mod_type,'exp') ==1
    cov = sill-(sill.*(1-exp(-(3*h_eff)/a_minor)));
elseif strcmp(mod_type,'Gauss')==1 || strcmp(mod_type,'gauss') ==1
    cov = sill-(sill.*(1-exp(-((3*h_eff)^2/(a_minor^2)))));
end 
```

和

```
function [PropertyAvg,variance_PropertyAvg,NormVariance_PropertyAvg]=...
    general_AverageProperty(blocksize_row,blocksize_col,blocksize_t,...
    nUpscaledRow,nUpscaledCol,nUpscaledT,PropertyArray,omega)
% This function computes average of a property and variance of that averaged
% property using power averaging

PropertyAvg=zeros(nUpscaledRow,nUpscaledCol,nUpscaledT);

%# Average of property
for k=1:nUpscaledT,
    for j=1:nUpscaledCol,
        for i=1:nUpscaledRow,
            sum=0;
            for a=1:blocksize_row,
                for b=1:blocksize_col,
                    for c=1:blocksize_t,
                        sum=sum+(PropertyArray((i-1)*blocksize_row+a,(j-1)*blocksize_col+b,(k-1)*blocksize_t+c).^omega); % add all the property values in 'blocksize_x','blocksize_y','blocksize_t' to one variable
                    end
                end
            end
            PropertyAvg(i,j,k)=(sum/(blocksize_row*blocksize_col*blocksize_t)).^(1/omega); % take average of the summed property
        end
    end
end

%# Variance of averageed property
variance_PropertyAvg=var(reshape(PropertyAvg,...
    nUpscaledRow*nUpscaledCol*nUpscaledT,1),1,1); 

%# Normalized variance of averageed property
NormVariance_PropertyAvg=variance_PropertyAvg./(var(reshape(...
    PropertyArray,numel(PropertyArray),1),1,1)); 
```

**问题：**使用 Matlab，我想通过扰动/改变以下任何（或所有）变量来优化`covAvg.Scale2`它以使其与`cov.Scale1`

1)`a_minor`

2)`a_major`

3)`theta`

我知道我可以使用`fminsearch`，但是，我无法在使用它时扰乱我想要的变量`fminsearch`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T22:11:27.920

我不会假装理解你所做的一切。但这听起来像是一个典型的最小化问题。你要做的是想出一个函数，它接受`a_minor`和`a_major`作为参数，并返回和`theta`之间的差的平方。像这样的东西：`covAvg.Scale2``cov.Scale1`

```
function diff = minimize_me(a_minor, a_major, theta)
    ... your script goes here
    diff = (covAvg.Scale2 - cov.Scale1)^2;
end 
```

然后你需要matlab来最小化这个函数。这里有不止一种选择。由于您只有三个变量要最小化，[`fminsearch`](http://www.mathworks.com/help/matlab/ref/fminsearch.html)因此是一个很好的起点。你可以这样称呼它：

```
opts = optimset('display', 'iter');
x = fminsearch( @(x) minimize_me(x(1), x(2), x(3)), [a_minor_start a_major_start theta_start], opts) 
```

第一个参数`fminsearch`是要优化的函数。它必须采用单个参数：将被扰动以找到最小值的变量向量。在这里，我使用一个匿名函数从这个向量中提取值并将它们传递给`minimize_me`. to的第二个参数`fminsearch`是一个包含开始搜索的值的向量。第三个参数是影响搜索的选项；`display`当您第一次开始优化时设置为一个好主意`iter`，这样您就可以了解优化器正在收敛。

如果您的参数具有受限域（例如，它们都必须是正数），请查看[`fminsearchbnd`](http://www.mathworks.com/matlabcentral/fileexchange/8277-fminsearchbnd)文件交换。

如果我误解了您的问题，而这根本没有帮助，请尝试发布我们可以运行的代码来自己重现问题。

# java - 解析json新闻提要数组android

> ID：13402432
> 
> 赞同：1
> 
> 时间：2012-11-15T16:57:47.350
> 
> 标签：java, android

我有来自 bbc 的这种格式的 json 提要

```
{
  "name": "ticker",
  "entries": [
    {
      "headline": "text",
      "prompt": "LATEST",
      "isBreaking": "false",
      "mediaType": "Standard",
      "url": ""
    },
    {
      "headline": "text",
      "prompt": "LATEST",
      "isBreaking": "false",
      "mediaType": "Standard",
      "url": ""
    }, 
   etc........... 
```

我的代码如下：

```
ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();
JSONObject json = JSONfunctions.getJSONfromURL("http:/......");
try{
    JSONArray  item = json.getJSONArray("entries");
    for (int i = 0; i<item.length(); i++) {
        HashMap<String, String> map = new HashMap<String, String>();
        JSONObject e = item.getJSONObject(i);
        JSONObject title = e.JSONObject("headline");
        map.put("title", "Title:" + e.getString("headline");
    }
} 
```

它给了我错误`"java.lang.String cannot be converted to JSONObject"`

我也试过省略`JSONObject title = e.JSONObject("headline");`，它给了我一个路径错误（注意

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:01:03.567

你想要 e.getString("headline")，而不是 e.JSONObject

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T17:07:07.980

利用

```
JSONObject e = item.getJSONObject(i);
map.put("title", "Title:" + e.getString("headline"); 
```

代替

```
 JSONObject e = item.getJSONObject(i);
    JSONObject title = e.JSONObject("headline");
    map.put("title", "Title:" + e.getString("headline"); 
```

因为`e`json 对象不包含任何其他 json 对象，它只包含键和相应的值

# jquery - jQuery $.inArray 不起作用

> ID：13402433
> 
> 赞同：-3
> 
> 时间：2012-11-15T16:57:47.363
> 
> 标签：jquery, arrays, duplicates

我想避免数组中的重复值。

```
function doValidatePages(){
    var pageNumbers = new Array();

    $('.page_num').each (function () {
        if($.inArray($(this).val(), pageNumbers,0) == -1){
            if($(this).val() != '-') {
                pageNumbers = ($(this).val());
                console.log(pageNumbers)
            } else {
                alert("empty")
            }
        } else {
            alert("duplicate");
        }   
    });
} 
```

输入示例：1、1、3、1

对于第二个“1”，我得到一个 -1，但是在插入 3 之后，我再次得到第三个“1”一个 -1！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T17:00:06.263

您需要提供数组作为[`inArray()`](http://api.jquery.com/jQuery.inArray/)函数的参数：

```
if($.inArray($(this).val(), pageNumbers) == -1) {
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T17:00:47.693

请阅读文档：[http](http://api.jquery.com/jQuery.inArray/)
: //api.jquery.com/jQuery.inArray/ 您需要在第 4 行通知第二个参数：

```
if($.inArray($(this).val(), pageNumbers ) == -1){ 
```

# python - 单元测试和模拟

> ID：13402441
> 
> 赞同：0
> 
> 时间：2012-11-15T16:58:19.730
> 
> 标签：python, unit-testing, mocking

我正在用`unittest`Python 进行测试，没关系。现在，我已经介绍了`mock`，我需要解决一个问题。这是我的代码：

```
from mock import Mock
import unittest

class Matematica(object):
    def __init__(self, op1, op2):
        self.op1 = op1
        self.op2 = op2
    def adder(self):
        return self.op1 + self.op2
    def subs(self):
        return abs(self.op1 - self.op2)
    def molt(self):
        return self.op1 * self.op2
    def divid(self):
        return self.op1 / self.op2

class TestMatematica(unittest.TestCase):
    """Test della classe Matematica"""
    def testing(self):
        """Somma"""
        mat = Matematica(10,20)
        self.assertEqual(mat.adder(),30)
        """Sottrazione"""
        self.assertEqual(mat.subs(),10)

class test_mock(object):
    def __init__(self, matematica):
        self.matematica = matematica
    def execute(self):
        self.matematica.adder()
        self.matematica.adder()
        self.matematica.subs()

if __name__ == "__main__":
    result = unittest.TextTestRunner(verbosity=2).run(TestMatematica('testing'))
    a = Matematica(10,20)    
    b = test_mock(a)
    b.execute()
    mock_foo = Mock(b.execute)#return_value = 'rafa')
    mock_foo()
    print mock_foo.called
    print mock_foo.call_count
    print mock_foo.method_calls 
```

此代码在功能上`print`是：`True`, `1`, `[]`. 现在，我需要计算被调用的次数`self.matematica.adder()`和`self.matematica.subs()`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T18:09:12.447

您可以再次运行您的代码，但第二次使用 MagicMock 对象。

```
from mock import Mock
from mock import MagicMock  # import MagicMock
from collections import Counter
import unittest

class Matematica(object):
    def __init__(self, op1, op2):
        self.op1 = op1
        self.op2 = op2
    def adder(self):
        return self.op1 + self.op2
    def subs(self):
        return abs(self.op1 - self.op2)
    def molt(self):
        return self.op1 * self.op2
    def divid(self):
        return self.op1 / self.op2

class TestMatematica(unittest.TestCase):
    """Test della classe Matematica"""
    def testing(self):
        """Somma"""
        mat = Matematica(10,20)
        self.assertEqual(mat.adder(),30)
        """Sottrazione"""
        self.assertEqual(mat.subs(),10)

class test_mock(object):
    def __init__(self, matematica):
        self.matematica = matematica
    def execute(self):
        self.matematica.adder()
        self.matematica.adder()
        self.matematica.subs()

if __name__ == "__main__":
    result = unittest.TextTestRunner(verbosity=2).run(TestMatematica('testing'))
    a = Matematica(10,20)    
    b = test_mock(a)
    b.execute()
    mock_foo = Mock(b.execute)#return_value = 'rafa')
    mock_foo()
    print mock_foo.called
    print mock_foo.call_count
    print mock_foo.method_calls

    # added from here
    c = MagicMock()
    d = test_mock(c)
    d.execute()
    method_count = Counter([str(method) for method in c.method_calls])
    print c.method_calls
    print method_count 
```

结果是：

```
OK
True
1
[]
[call.adder(), call.adder(), call.subs()]
Counter({'call.adder()': 2, 'call.subs()': 1}) 
```

就是这样，method_count 现在包含每个方法被调用的次数。

问候

# c# - 查询远程服务器上驱动器的大小给了我一个未找到的错误

> ID：13402447
> 
> 赞同：1
> 
> 时间：2012-11-15T16:58:28.763
> 
> 标签：c#, .net, wmi

这是我所拥有的：

```
public static bool DriveHasLessThanTenPercentFreeSpace(string server)
{
    long driveSize = 0;
    long freeSpace = 0;

    var oConn = new ConnectionOptions {Username = "username", Password = Settings.Default.SQLServerAdminPassword};
    var scope = new ManagementScope("\\\\" + server + "\\root\\CIMV2", oConn);
    scope.Connect();

    var query = new ObjectQuery("SELECT FreeSpace FROM Win32_LogicalDisk where DeviceID = 'D:'");

    var searcher = new ManagementObjectSearcher(scope, query);
    ManagementObjectCollection queryCollection = searcher.Get();
    foreach (ManagementObject m in queryCollection)
    {
        //the FreeSpace value is in bytes
        freeSpace = Convert.ToInt64(m["FreeSpace"]);

        //error happens here!
        driveSize = Convert.ToInt64(m["Size"]);
    }

    long percentFree = ((freeSpace / driveSize) * 100);
    if (percentFree < 10)
    {
        return true;
    }
    return false;
} 
```

这行代码给了我一个错误：

```
driveSize = Convert.ToInt64(m["Size"]); 
```

错误说：

```
ManagementException was unhandled by user code 
```

未找到

我假设获取驱动器大小的查询是错误的。

请注意，我在以下行获得了 freeSpace 值：

```
freeSpace = Convert.ToInt64(m["FreeSpace"]); 
```

所以我知道该查询适用于 freeSpace。

谁能帮我一把？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T17:03:07.567

它需要`SELECT * FROM Win32_LogicalDisk...`在您的查询中。

因为您在查询中选择“FreeSpace”，除了可用空间将被返回，其他一切都会抛出异常。

如果您不想返回所有内容（因为它是远程查询），您有几个选择：

*   我不确定管理层是否允许您只选择两个项目？我不熟悉语法。不过你可以试试`SELECT FreeSpace, Size FROM Win32_LogicalDisk...`
*   If not, you could simply do two queries, one for the freespace, and one for the size.

# ruby-on-rails-3 - 如何使用 Rails 3 在 post/put simple_form 中传递 get 参数？

> ID：13402448
> 
> 赞同：5
> 
> 时间：2012-11-15T16:58:32.290
> 
> 标签：ruby-on-rails-3, simple-form

使用 simple_form 2.0.4，我会：

```
= simple_form_for(@thing) do |f| 
```

它生成：

```
<form accept-charset="UTF-8" action="/things/37" class="simple_form" id="edit_thing_37" method="post" novalidate="novalidate"> 
```

但是我需要：

```
<form accept-charset="UTF-8" action="/things/37?foo=bar" class="simple_form" id="edit_thing_37" method="post" novalidate="novalidate"> 
```

这该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-15T17:00:59.537

你可以写

```
= simple_form_for(@thing, :url => thing_path(@thing, :foo => 'bar')) do |f| 
```

# ruby - 面向新手的协作 Ruby 资源

> ID：13402450
> 
> 赞同：1
> 
> 时间：2012-11-15T16:58:34.087
> 
> 标签：ruby

我是一个 Ruby 新手——希望迁移到 Ruby on Rails（尽管我已经完成了 Mike Hartl 的教程，非常棒）。我只想先巩固我的 Ruby 知识。

我正在做一个业余爱好 Ruby 项目来帮助我学习。到目前为止，我对自己取得的进展感到非常满意，但想与其他志同道合的新手/初学者程序员讨论/分享。

**谁能给我指出一个促进协作、批评和讨论代码（理想情况下是 Ruby、obvs）的“社区”？**

**如果不存在这样的社区，是否有人对如何找到其他志同道合的程序员从事小型脚本/程序有任何建议？**

我在 Github 上有一个帐户，在这里（显然！）。虽然 Github 非常适合浏览、克隆和查看人们的代码，但我感觉还没有达到可以开始实际为任何事情做出贡献并同样要求人们查看我的代码的水平。也许我只是个小屁孩，我应该跳入深渊？也许我没有正确使用 GitHub 作为“社交网络”。

此外，据我所知，StackOverflow 也不是发送“嘿，检查一下，让我知道你的想法”类型请求的地方。

不打算讨论 - 只是是否有人知道是否存在这样的“网络”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T18:40:12.637

[RailsCasts](http://railscasts.com/) - 了解 ruby​​ 技术的非常有趣的项目。

你也可以去软件公司开始工作，你会得到批评、讨论和合作:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T19:27:57.500

这取决于您所在的位置，但黑客之夜（Ruby 或其他）可能是您的最佳选择。有不同的风格（你在解决一个既定的问题吗？在做一些通用的事情？）但通常你可以在协作和低风险的环境中与其他人一起工作。我建议在您所在地区搜索“hacknight”并查看过去或即将到来的任何夜晚。

例如，请参阅[http://www.meetup.com/torontoruby/events/53887372/](http://www.meetup.com/torontoruby/events/53887372/)

# java - 如何自然地对带有数字的字符串进行排序？

> ID：13402451
> 
> 赞同：0
> 
> 时间：2012-11-15T16:58:37.583
> 
> 标签：java, sorting

> **可能重复：**
> [对可能包含数字的字符串进行排序](https://stackoverflow.com/questions/104599/sort-on-a-string-that-may-contain-a-number)

我正在为家庭作业实现自定义排序算法，我希望它以正确的顺序对末尾附加数字的字符串进行排序......就像现在一样，“Book1”在“Book10”之后。

我正在使用 String.compareTo() 来获取排序，但我没有看到 compareTo() 的版本让我选择任何特殊类型的排序。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:04:12.363

您必须编写自己的[Comparator](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)实现：

*   从尾随数字中拆分前导字符串。
*   比较前导字符串是否相等。
*   如果相等，则比较尾随数字是否相等。

# c++ - 按升序对链表进行排序c ++

> ID：13402453
> 
> 赞同：0
> 
> 时间：2012-11-15T16:58:44.473
> 
> 标签：c++, linked-list

所以我有一个单链表。新项目被添加到链的前面，因此如果添加 8、4、10，则列表将为 10、4、8。无论如何，现在我正在尝试在插入完成后对列表进行排序，但我只是无法弄清楚如何遍历这些数字并按升序重新排列它们。我可能会在这里休息一下，稍后再回来，希望这能帮助我解决这个问题。

*这是一个学校项目，因此建议我使用其他容器对我的情况没有帮助，除非提供信息，因为我无法更改我正在使用的内容。

列表的布局

```
struct Node
    {
      int Item;      // User data item
      Node * Succ;   // Link to the node's successor
    };

unsigned Num //number of items in the list
Node * Head //pointer to the first node 
```

我的插入函数看起来像这样

```
Node * newOne;
newOne = new (nothrow) Node;
newOne->Item = X;
newOne->Succ = NULL;

if(Head == NULL)
{
        Head = newOne;
}
else
{
        newOne->Succ = Head;
        Head = newOne;
}
Num++; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T17:05:15.947

这可以通过两种方式完成，我不打算发布代码，但希望这会对你有所帮助。

**1.插入时升序排列**

这涉及始终按升序添加元素。例如，如果链接列表是

```
 | 1  | 
```

然后你添加 5 新的链接列表是

```
 |1|--->|5| 
```

如果你接下来添加 3 它应该是

```
 |1| ---> |3| ----> |5| 
```

这涉及到新元素的比较，直到找到正确的位置。

**2\. 等到所有元素都插入后，按升序排列。**

这将涉及对链接列表的元素使用排序算法，如合并排序、插入排序、冒泡排序等。

数字排序完成后，以正确的顺序重写链表。

例子：

如果链接列表包含

```
 3 2 5 1 6 
```

通过算法排序后

```
 1 2 3 5 6 (stored in an array) 
```

现在遍历链接列表并以正确的顺序替换元素。

**如果节点包含其他元素，请小心，这些其他元素也需要替换。**

注意：这需要额外的内存，另一种方法是交换需要更长时间的节点。除非链接列表包含大量节点（因此使内存变得重要）或具有其他元素，否则使用数组会更简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T17:01:23.457

对单链表进行排序对代码来说很麻烦（除非您喜欢线性排序，例如冒泡排序或插入排序）。将内容复制到向量中，对向量进行排序，然后重建列表要简单得多。

# android - 只允许输入两位小数 EditText

> ID：13402454
> 
> 赞同：0
> 
> 时间：2012-11-15T16:58:47.923
> 
> 标签：android

我需要 EditText 只允许七个整数和两个十进制数。例如：7777777.99

我在 onTouchListener 事件中尝试使用这个正则表达式，但不起作用。顺便说一句，这是正确的事件吗？

```
txtRespNumero.addTextChangedListener(new TextWatcher() {
                   int count = 0;    // Declare as Instance Variable
                   boolean isSeven = true; // Declare as Instance Variable

                          public void onTextChanged(CharSequence s, int start, int before,
                                  int count) {

                                count++;

                          }

                          public void beforeTextChanged(CharSequence s, int start, int count,
                                  int after) {

                          }

                          public void afterTextChanged(Editable s) {

                          if(isSeven){
                              if(count == 7){

                                  s.append(".");
                                  isSeven = true;
                              }
                           }

                           if(count < 7){

                               isSeven = true;

                           }

                          }
                      }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:30:15.490

Try it this way...

**-** Set the `EditText` Attribute `Max Length` as 10.

**-** Then when you accept the `EditeText` value, convert it into format of 0000000.00 using the below example:

**Eg:**

```
double d = 300.0;
DecimalFormat df = new DecimalFormat("0000000.00");
System.out.println(df.format(d)); 
```

**/////////////////////////////////// Edited Part /////////////////////////////**

Another way to do it, just as you want it.........

```
int count = 0;    // Declare as Instance Variable
boolean isSix = true; // Declare as Instance Variable

tx = (EditText) findViewById(R.id.editText_CheckIt);

        tx.addTextChangedListener(new TextWatcher() {

            public void onTextChanged(CharSequence s, int start, int before,
                    int count) {

                  count++;

            }

            public void beforeTextChanged(CharSequence s, int start, int count,
                    int after) {

            }

            public void afterTextChanged(Editable s) {

            if(isSeven){
                if(count == 7){

                    s.append(".");
                    isSeven = true;
                }
             }

             if(count < 7){

                 isSeven = true;

             }

            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T17:03:48.017

尝试使用 onTextChanged ，每次用户输入数字时都会调用它（在您的情况下），而不是仅在触摸控件时调用一次）。这个解决方案对我有用： [EditText no more than x decimals android](https://stackoverflow.com/questions/12299414/edittext-no-more-than-x-decimals-android)

遗憾的是，android 不允许您直接在 XML 中执行此操作。

# python - 在 PyGTK 2 中创建窗口布局

> ID：13402459
> 
> 赞同：1
> 
> 时间：2012-11-15T16:58:55.897
> 
> 标签：python, layout, python-2.7, pygtk

我正在尝试使用 PyGTK 2 在 Python 2.7 中创建一个简单的应用程序。主窗口将包含几个小部件（如按钮和树视图）。我知道我可以使用**gtk.Box**、**gtk.Fixed**或**gtk.Layout**等选项将这些小部件放置在窗口中。

其中哪个更好用？还有其他可能吗？

谢谢。

# iphone - 横向应用程序的 Xcode 启动图像屏幕

> ID：13402461
> 
> 赞同：0
> 
> 时间：2012-11-15T16:58:57.907
> 
> 标签：iphone, ios, xcode, ipad, unity3d

我正在开发仅在横向模式下工作的通用应用程序（游戏）。我可以不为纵向模式指定启动图像以节省尺寸吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T09:16:21.923

“通用应用程序必须为 iPhone 和 iPad 惯用语提供启动图像”.. 但是 .. iPhone 的启动图像仅在纵向模式下接受（[链接](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/App-RelatedResources/App-RelatedResources.html)）。

所以.. 对于`Default.png`或`Default-iphone.png`.. 要提供横向启动图像，您必须创建图像并在图像编辑器中将其旋转 90 度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T17:51:18.297

是的，如果需要，添加“Default-Landscape.png”就足够了。

# objective-c - 在 Google Analytics 2 for iOS 中跟踪事件的正确方法是什么

> ID：13402465
> 
> 赞同：2
> 
> 时间：2012-11-15T16:59:09.243
> 
> 标签：objective-c, ios, xcode, google-analytics, ios6

我正在使用 Google Analytics Beta 2.0 来跟踪 iOS 应用程序中的事件。

屏幕跟踪似乎不是问题，但是当我尝试跟踪一个事件时，网站声明它说“您的 122 次访问发送了事件”，但没有跟踪任何事件。

这是事件跟踪的代码：

```
[self.tracker trackEventWithCategory:@"Question Results"
                              withAction:@"Finished questions"
                               withLabel:@"Testing"
                               withValue:[NSNumber numberWithInt:1]]; 
```

直接来自谷歌分析网站。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-24T07:40:45.487

试试这个代码。这个对我有用。

```
[[GAI sharedInstance].defaultTracker trackEventWithCategory:@"UIAction"
                                                 withAction:@"buttonPress"
                                                  withLabel:@"Next button to second page"
                                                  withValue:[NSNumber numberWithInt:1]]; 
```

将上面的代码添加到`-(IBAction)buttonClicked:(id)sender;`

在您的 Google Analytics（分析）页面中，转到应用主页 -> 我的仪表板 -> 在其中选择添加小部件 -> 选择在其中添加维度作为事件标签的表格，添加指标作为事件值，并将指标添加到总事件并保存。

不要忘记选择右上角的日期。

一旦事件被触发，它就会添加到谷歌分析中。但在 Google Analytics 中显示事件需要时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-17T10:58:07.097

您必须使用 googleAnalytics 构建跟踪器发送事件。见关注

```
-(IBAction)buttonClicked:(id)sender{
 //Track your event with Google Analytics
 id<GAITracker> tracker = [[GAI sharedInstance] defaultTracker];
 [tracker send:[[GAIDictionaryBuilder createEventWithCategory:@"Category Name"
                                                      action:@"Event Action"
                                                       label:@"Action Label(Button)"
                                                       value:@"value (int)"] build]];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-08T13:28:28.707

**斯威夫特 3**

```
 let tracker = GAI.sharedInstance().defaultTracker
    let eventTracker: NSObject = GAIDictionaryBuilder.createEvent(
        withCategory: YOUR_CATEGORY_NAME,
        action: YOUR_ACTION_NAME",
        label: YOUR_LABEL_NAME,
        value: nil).build()
    tracker?.send(eventTracker as! [AnyHashable: Any]) 
```

# scala - Scala REPL 无法导入包

> ID：13402469
> 
> 赞同：3
> 
> 时间：2012-11-15T16:59:22.617
> 
> 标签：scala, import, read-eval-print-loop

我正在尝试在 Scala REPL 中导入`com.lambdaworks.crypto.SCryptUtil`（[从加密）。](https://github.com/wg/scrypt/tree/master/src/main/java/com/lambdaworks/crypto)我正在从包含 com/lambdaworks/crypto 的 Java 目录运行 REPL。

REPL 找不到`com.lambdaworks.crypto.SCryptUtil`，但它可以自动完成，`com.lambdaworks.crypto`但在那之后找不到任何东西。

当我在项目中包含包后在 IntelliJ IDEA 中使用 REPL 时，我能够找到`SCryptUtil`该类。

我是否缺少一些导入所需的类路径参数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T17:38:56.093

REPL 不会为您编译 Java 代码——它只是自动完成那么远，因为它知道目录结构，但是一旦它到达`crypto`目录，它就找不到任何类文件。

通过向上移动一个目录并打开一个新的 REPL，您可以更明显地看到这一点——您将能够自动完成`import java.com.lambdaworks.crypto`，即使这显然不是一个真正的包层次结构。

在这种情况下，您可以移动到项目根目录，运行`mvn compile`以编译 Java 代码，然后像这样启动 REPL（仍在项目根目录中）：

```
scala -classpath target/classes 
```

现在您可以导入`com.lambdaworks.crypto.SCryptUtil`.

这只适用于项目没有任何运行时依赖项，但在其他情况下，您可能需要将其他内容添加到类路径中，以构建包含依赖项的 JAR（例如，使用[Maven Assembly 插件](https://maven.apache.org/plugins/maven-assembly-plugin/)），或者使用`mvn scala:console`Maven [Scala 插件](http://davidb.github.com/scala-maven-plugin/index.html)的目标。

# android - Android 4.1 SQL 服务器连接

> ID：13402484
> 
> 赞同：2
> 
> 时间：2012-11-15T17:00:05.770
> 
> 标签：android, sql-server, samsung-mobile, jtds

我正在使用 android 4.1.1、IDE= eclipse 和 SQL Server 2008。

```
Device= Note 2

android:minSdkVersion="10" 
```

当我在 UI 线程上运行代码片段时，它给了我错误“无法从 SQL Server 获取信息：”，但如果我在后台线程或 AsyncTask 线程中运行代码，它就可以工作。对于理解这两个过程的任何帮助将不胜感激？

注意：“当我将 minSDKVersion 从 8 升级到 10 时出现此问题。”

```
public Boolean open() {
    Boolean res = false;
    try {
        String s = "jdbc:jtds:sqlserver://" + "xx.xxx.x.xx" + "/" + "FOO" + ";instance=SQLEXPRESS";
        Class.forName("net.sourceforge.jtds.jdbc.Driver");
        con = DriverManager.getConnection(s, "UserFoo", "1234");
        res = true;
    } catch (SQLException sx) {
        Log.e(TAG, "DB:Open - " + sx.toString());
    } catch (ClassNotFoundException e) {
        Log.e(TAG, "DB:Open - " + e.toString());
    }

    return res;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:06:09.353

从 Android 3.0 开始，尝试在主 (UI) 线程上访问网络会导致：

> NetworkOnMainThreadException

我猜你没有看到它，因为在你的调用堆栈中更高的地方你有：

```
catch (Exception) 
```

这导致：

```
"Unable to get information from SQL Server:" 
```

正如您已经发现的那样，一个单独的线程是解决方案。

# android - 奥地利提供商发送的不需要的确认短信

> ID：13402493
> 
> 赞同：4
> 
> 时间：2012-11-15T17:00:23.143
> 
> 标签：android, sms, smsmanager

我在发送短信时遇到了一个奇怪的问题。

我的应用程序只使用 SMSManager 就像到处推荐的那样：

```
SmsManager sms = SmsManager.getDefault();
sms.sendTextMessage(phoneNumber, null, message, sentPI, deliveredPI); 
```

虽然这在任何地方都非常有效，但只有在奥地利才会出现奇怪的行为。

在奥地利，供应商可以发送确认 SMS 以确认 SMS 已实际发送。这会产生额外费用。

可以在 Android 手机本身或直接通过提供商关闭此确认。

虽然这在手动发送 SMS 时有效，但一些用户报告说，通过应用程序发送的 SMS 总是会导致提供商发送确认消息——这是不需要的。

你知道这是怎么发生的吗？我一直认为通过 Android 上的标准 SMSManager 发送 SMS 与手动发送 SMS 完全相同。

是否有可能的解决方案，以便通过应用程序发送的短信不会像手动发送短信那样导致提供商触发确认短信？

三星 S2、S3 和 HTC 手机、供应商 t-mobile 或 A1 报告了这些问题。主叫方和被叫方都在奥地利，使用奥地利 SIM 卡。

该应用程序在奥地利有很多用户 - 该问题已被多次报告。我还没有发现任何共同点。

非常感谢您的所有提示....

# javascript - HTML 地图检查重叠

> ID：13402494
> 
> 赞同：0
> 
> 时间：2012-11-15T17:00:23.817
> 
> 标签：javascript, html, map

我的地图上有几个`<area>`s，我想看看它们是否重叠，如果重叠，在哪里。到目前为止，我能想到的最简单的方法是给每个人一个细边框；但是，`<area style="border:1px solid blue">`似乎没有工作。我该怎么做（我也很高兴知道检查重叠的更好方法）？允许使用 JavaScript 和 jQuery。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T17:21:52.503

看看这个 jquery 插件：[https ://github.com/kemayo/maphilight/](https://github.com/kemayo/maphilight/)

文档：[http ://davidlynch.org/projects/maphilight/docs/](http://davidlynch.org/projects/maphilight/docs/)

# android - Android：FaceDetector 不起作用。findface 总是检测到零人脸；

> ID：13402499
> 
> 赞同：3
> 
> 时间：2012-11-15T17:00:34.073
> 
> 标签：android, bitmap, face-detection

我在使用 android.media.FaceDetector 在 Android 中进行人脸检测时遇到问题我尝试使用以下代码检测人脸：

```
BitmapFactory.Options options = new BitmapFactory.Options();
options.inPreferredConfig =  Bitmap.Config.RGB_565;
Bitmap b = BitmapFactory.decodeFile(Environment.getExternalStorageDirectory()+"/myimage.jpg", options);
FaceDetector fd = new FaceDetector(b.getWidth(), b.getHeight(), 1);
Face[] face = new Face[1];
int detected_face = fd.findFaces(b, face); 
```

检测到的脸总是0；

我尝试使用不同的图像，但我收到了相同的结果。有人可以解释我的代码有什么问题吗？

问候

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T08:04:34.807

下面的代码对我有用，而且我记得照片上的面孔必须是直立的，这意味着如果在照片中有人站在他的头上，那么您必须将位图旋转 180 度，然后再将其送入 FaceDetector，否则他的脸将不会被检测到）

```
private void detectFaces() {
    int max = 5;
    BitmapFactory.Options bfo = new BitmapFactory.Options();
    bfo.inPreferredConfig = Bitmap.Config.RGB_565;
    bfo.inScaled = false;
    bfo.inDither = false;
    Bitmap bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.myphoto, bfo);
    int w = bitmap.getWidth();
    int h = bitmap.getHeight();
    FaceDetector fd = new FaceDetector(w, h, max);
    Face[] faces = new Face[max];
    int c = fd.findFaces(bitmap, faces);
    for (int i=0;i<c;i++) {
        Log.d("TAG", Float.toString(faces[i].eyesDistance()));
    }
} 
```

# perl - 将文件拆分为多个文件/数组 - perl

> ID：13402501
> 
> 赞同：-5
> 
> 时间：2012-11-15T17:00:35.593
> 
> 标签：perl

我想使用 perl sripting 根据内容将文本文件拆分为多个文件。我的文件内容如下...

```
 Header1:123 
    data... 
    1234... 

    SubTitle1:HHHHHHH 
    mmmm 
    aaaaa  

    SubTitle2:QQQQQQQ 
    mmmm 
    aaaaa 

    Header:MMMMMMMMMMM 
    datasadsad... 
    123434324... 

    SubTitle1:HHHHHHH 
    mmmm343343243
    aaaaa dsfdfds 

    SubTitle2:QQQQQQQ 
    mmmm sff
    aaaaasfsdf 
```

我想分割这个文件如下....

文件 1 或数组或任何对象来保存这个....

```
 Header1:123 
    data... 
    1234... 

    SubTitle1:HHHHHHH 
    mmmm 
    aaaaa  

    SubTitle2:QQQQQQQ 
    mmmm 
    aaaaa 
```

文件2如下..

```
 Header:MMMMMMMMMMM 
    datasadsad... 
    123434324... 

    SubTitle1:HHHHHHH 
    mmmm343343243
    aaaaa dsfdfds 

    SubTitle2:QQQQQQQ 
    mmmm sff
    aaaaasfsdf 
```

请帮我解决这个问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:10:33.900

```
my $fh;
while (<>) {
   if (/^Header/) {
      open($fh, '>', ...) or die $!;
   }

   print($fh $_);
} 
```

# oracle - Oracle：将 VARCHAR2 列更改为 CLOB

> ID：13402510
> 
> 赞同：45
> 
> 时间：2012-11-15T17:01:05.873
> 
> 标签：oracle, database

我遇到了一个问题，即我试图存储在 varchar2(4000) 列中的数据太大，所以我希望将列更改为更适合存储大量文本数据的列。具体来说，一个序列化的数组。

1.  首先，CLOB 是我用于此目的的最佳数据类型吗？有更合适的数据类型吗？

2.  其次，当我尝试使用通常的语法来更改列时：

    ```
    ALTER TABLE table MODIFY column CLOB 
    ```

    我收到以下错误：**ORA-22858：数据类型的无效更改**

    在不丢失任何数据的情况下更改此表的最直接方法是什么？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-11-15T17:05:19.483

`varchar`鉴于不允许从列移动到 a 的操作，最直接的方法`CLOB`是创建一个新列并将数据从旧列移动到新列：

```
ALTER TABLE some_table ADD (foo CLOB);
UPDATE some_table SET foo = old_column;
ALTER TABLE some_table DROP COLUMN old_column;
ALTER TABLE some_table RENAME COLUMN foo TO old_column; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-07-22T17:53:02.153

VARCHAR2 列不能直接转换为 CLOB，但可以分两步完成：

*   将列数据类型从 VARCHAR2 转换为 LONG。
*   将列数据类型从 LONG 转换为 CLOB。

```
ALTER TABLE table MODIFY column long;
ALTER TABLE table MODIFY column clob; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-07-21T14:55:29.737

对于 Oracle 11g：

```
ALTER TABLE table MODIFY column long;
ALTER TABLE table MODIFY column clob; 
```

# javascript - 在 javascript 中使用 Jade 模板中的条件？

> ID：13402519
> 
> 赞同：0
> 
> 时间：2012-11-15T17:01:38.393
> 
> 标签：javascript, node.js, express, pug

我有这个jade模板，里面有一些逻辑，但我不知道我在这里做错了什么，代码是：

```
 #container
   -for(var col=0; col < 2 ;col++){
         - if(col % 4 == 0){
              .movie_row
        - }
                 .movie_thumb

  - } 
```

我希望结果如下：

```
<div id="container">
   <div class="movie_row">
       <div class="movie_thumb"></div>
   </div>
   <div class="movie_row">
       <div class="movie_thumb"></div>
   </div>
</div> 
```

但它给了我这个：

```
<div id="container"></div>
<div class="movie_row"></div>
<div class="movie_thumb"></div>
<div class="movie_row"></div>
<div class="movie_thumb"></div> 
```

我做错了条件吗？我查看了文档，没有任何东西看起来像嵌套条件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:27:37.557

试试这个：

```
#container
      -for(var col=0; col<2; col++)
          -if(col%4 == 0)
              .movie_row
                .movie_thumb 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T17:29:00.927

不太确定您为什么`% 4`在代码中使用，但类似于：

```
#container
     -for(var col=0; col < 2 ;col++) {
          .movie_row
              .movie_thumb
      - } 
```

成功了

# iphone - 设备令牌和推送通知

> ID：13402521
> 
> 赞同：3
> 
> 时间：2012-11-15T17:01:55.390
> 
> 标签：iphone, objective-c, xcode, push-notification, apple-push-notifications

我正在尝试在我的应用程序中实现推送通知，但我认为，我认为这可能是一个愚蠢的问题。我有我的推送通知工作，但它们工作，因为我将设备令牌放入服务器上的 asp.net 代码中。

我的问题是，我应该跟踪我的应用程序获得的设备令牌吗？换句话说，当应用程序启动并获得设备令牌时，我是否需要将它们发送到我的服务器并存储它们，以便当我需要向我的应用程序的所有用户发送通知时，我可以浏览列表令牌并将通知发送到每个设备令牌？

感谢您提供的任何清晰度，因为您猜到这是我第一次尝试推送通知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:53:45.233

您必须将设备令牌存储在数据库中。然后，您向每个设备令牌发送一个通知。您可以自己创建系统，但是已经有一些开源库已经这样做了。虽然它是针对 PHP 的，但[Easy APNS](http://www.easyapns.com)就是一个例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T17:23:46.223

我自己会遇到这种情况，因为事实证明硬编码设备令牌是限制可以发送推送通知的设备的一种方法，但是如果您想允许任何下载了您的应用程序的设备，您需要创建一个发送机制设备的设备令牌到您的服务器，以便向其发送推送通知。您可以在应用程序加载时将此请求设置到您的服务器，在我的情况下，静默成功，失败时让用户知道他们没有添加到通知列表中。

这是一个来自[raywenderlich.com](http://www.raywenderlich.com/3525/apple-push-notification-services-tutorial-part-2)的示例，它创建了一个聊天程序。- 基本上他们正在使用他们存储在数据库中的设备信息创建一个发布请求，然后访问数据库信息以迭代并发送通知。

一些相关代码：

```
- (void)postJoinRequest
{
    MBProgressHUD* hud = [MBProgressHUD showHUDAddedTo:self.view animated:YES];
    hud.labelText = NSLocalizedString(@"Connecting", nil);

    NSURL* url = [NSURL URLWithString:ServerApiURL];
    __block ASIFormDataRequest* request = [ASIFormDataRequest requestWithURL:url];
    [request setDelegate:self];

    [request setPostValue:@"join" forKey:@"cmd"];
    [request setPostValue:[dataModel udid] forKey:@"udid"];
    [request setPostValue:[dataModel deviceToken] forKey:@"token"];
    [request setPostValue:[dataModel nickname] forKey:@"name"];
    [request setPostValue:[dataModel secretCode] forKey:@"code"];

    [request setCompletionBlock:^
    {
        if ([self isViewLoaded])
        {
            [MBProgressHUD hideHUDForView:self.view animated:YES];

            if ([request responseStatusCode] != 200)
            {
                ShowErrorAlert(NSLocalizedString(@"There was an error communicating with the server", nil));
            }
            else
            {
                [self userDidJoin];
            }
        }
    }];

    [request setFailedBlock:^
    {
        if ([self isViewLoaded])
        {
            [MBProgressHUD hideHUDForView:self.view animated:YES];
            ShowErrorAlert([[request error] localizedDescription]);
        }
    }];

    [request startAsynchronous];
} 
```

# jakarta-ee - iBatis 单例被调用两次

> ID：13402522
> 
> 赞同：0
> 
> 时间：2012-11-15T17:01:57.783
> 
> 标签：jakarta-ee, singleton, ibatis

我正在开发我们的 jdk 1.4.2、JSF + iBatis Web 应用程序的新部分。

对于数据库，我在 SqlMapConfig.xml 中添加了一个新行，如下所示

```
<sqlMapConfig>
        ...
    <sqlMap resource="com/example/properties/SqlMapLockOfferte.xml" />
</sqlMapConfig> 
```

我用我的查询在那个位置创建了一个新的 SqlMapLockOfferte.xml 文件。

我已经将它部署在我的 tomcat 4.1 上，一切似乎都运行良好。

我已经打包并部署在我们的测试环境 WebLogic 8.1 上，在 Bea 启动时，我看到了第一个奇怪的错误：

```
ERROR [IBatisSqlMapClientSingletonFactory] java.io.IOException: Could not find resource com/example/properties/SqlMapConfig.xml 
```

但是配置文件还在这里，我没有移动它。接下来，在应用程序日志中，我看到另一个奇怪的事情：

```
DEBUG com.example.ibatisimpl.IBatisSqlMapClientSingletonFactory - configuration successfully ended
DEBUG com.example.ibatisimpl.IBatisSqlMapClientSingletonFactory - configuration successfully ended 
```

但是，顾名思义，这个日志在一个公共静态方法中，所以我想知道为什么我会看到这两次。

最后，最有趣的事情。Web 应用程序已启动并运行，iBatis 似乎工作正常，除了使用我在上述 XML 中定义的新查询的部分。在那种情况下，`NullPointerException`当我尝试使用我尝试`SqlMapClient`实例化的对象时，我会收到一个单例。

任何想法？

谢谢，皮瓦基奥。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T09:26:46.377

我弄清楚了这个问题的根源。

在我的 Web 应用程序中，我使用了 a`HttpSessionListener`并且在他的构造函数中，我将 iBatis 对象的实例化。

在 Tomcat 4.1 中一切正常，而在 WebLogic 8.1 中，会话侦听器似乎是在 Web 应用程序启动时创建的，这导致了麻烦。显然，Tomcat 仅在 Web 应用程序请求时才启动会话侦听器。

# c - 何时应该在 C 中设置线程程序的信号掩码？

> ID：13402526
> 
> 赞同：0
> 
> 时间：2012-11-15T17:02:12.657
> 
> 标签：c, pthreads, signals

我正在努力在我的 P 线程 C 代码中实现一些信号处理。我正在使用 RTS 信号扩展。如果我希望在所有线程中以完全相同的方式处理信号，我是否需要为整个过程设置一次掩码，还是我仍然需要在每个线程中调用 pthread_sigmask？

此外，还有一些现有代码执行以下操作：

得到一个空集，并添加了 SIGHUP 信号

在带有 SIG_BLOCK 的集合上调用 pthread_sigmask

使用 SIG_UNBLOCK 向名为 pthread_sigmask 的集合中添加了另外 4 个信号

除了最后一个 pthread_sigmask 调用之外，这是否有任何影响，它将掩码设置为添加了 5 个信号的集合的补码？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:32:03.727

线程 A 的信号掩码被继承给线程 A 创建的任何线程。

# php - 带有星级的表格通过ajax插入到mysql

> ID：13402529
> 
> 赞同：0
> 
> 时间：2012-11-15T17:02:24.263
> 
> 标签：php, javascript, jquery, ajax, cordova

我正在为带有 phonegap-android 的平板电脑开发一个反馈应用程序。在主页上，我有一个注册表单，在二级页面上，我有六个问题的星级评分，用户必须对每个问题进行评分。我想将结果存储在 MySQL 中。我的问题是我如何连接页面中的数据，因为我想确切地知道每个人投票来制作报告的确切内容。

第一页看起来 aprox。像这样：

```
<!DOCTYPE html> 
<html> 
    <head> 
        <title>Contact with Validation</title> 
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
        <script type="text/javascript" src="js/jquery.js"></script> 
        <script type="text/javascript" src="js/jquery.validate.js"></script> 
         <script type="text/javascript" src="js/jquery.form.js"></script> 

        <script type="text/javascript">
            $('document').ready(function(){

            $('#form').validate({
                    rules:{
                        "name":{
                            required:true,
                            maxlength:40
                        },

                        "email":{
                            required:true,
                            email:true,
                            maxlength:100
                        },

                        "message":{
                            required:true
                        }},

                    messages:{
                        "name":{
                            required:"This field is required"
                        },

                        "email":{
                            required:"This field is required",
                            email:"Please enter a valid email address"
                        },

                        "message":{
                            required:"This field is required"
                        }},

                    submitHandler: function(form){
                      $(form).ajaxSubmit({
        target: '#preview', 
        success: function() { 
        $('#formbox').slideUp('fast'); 
        } 
    }); 

                    }

            })

        });
        </script> 

        <style type="text/css">
        ul
            {
                list-style:none;
                width:100%;
                margin: 0;
                padding: 0;
            }
            ul li
            {   
                padding-top:5px;
                padding-bottom:5px;
                margin-bottom:10px;
                clear:left;
                position: relative;

            }
            ul li label
            {
                width:20%;
                display: block;
                margin-right:2%;
                text-align:left;
                line-height:22px;
            }
            ul li span.error
            {
                font: 11px arial;
                color:red;
                margin-left:8px;
                line-height:22px;
            }
            ul li span.passerror
            {
                display: block;
                font: 11px arial;
                color:red;
                margin-left:8px;
                line-height:22px;
            }
            ul li .shortfield{
                width: 45px;
            }

         </style> 
    </head> 
    <body> 
    <a href="http://9lessons.info">http://9lessons.info</a>
       <div id="preview"></div>
        <div id="formbox"> 
            <form name="form" id="form" action="submit.php" method="post">
                <ul id="ngothastyle3">
                    <li>
                        <label>Name</label>
                        <input type="text" name="name" class="" maxlength="40" />
                    </li>

                    <li>
                        <label>Email</label>
                        <input type="text" name="email" class="" maxlength="100" />
                    </li>
                    <li>
                        <label>Message</label>
                        <textarea name="message" rows="5" cols="45" class=""></textarea>
                    </li>
                    <li>
                        <label>&nbsp;</label>
                        <input type="submit" value="Submit">
                    </li>
                </ul>

            </form>            </div> 

    </body> 

</html> 
```

这是第二个有星级的：

```
</head>
<body>
<div id="tab-Testing">

<script>
$(function(){
 $('#tab-Testing form').submit(function(){
  $('.test',this).html('');
  $('input',this).each(function(){
   if(this.checked) $('.test',this.form).append(''+this.name+': '+this.value+'<br/>');
        });
  return false;
 });
});
</script>

<div class="Clear">&nbsp;</div>
<form id="form1">
<strong style='font-size:150%'>Test 1</strong> - A blank form
<table width="100%" cellspacing="10"> <tr>
  <td valign="top" width="">
   <table width="100%">
    <tr>
     <td valign="top" width="50%">
<div class="Clear">

    Intrebarea 1:bla bla bla

   <input class="star required" type="radio" name="test-1-rating-1" value="1"/>
    <input class="star" type="radio" name="test-1-rating-1" value="2"/>
    <input class="star" type="radio" name="test-1-rating-1" value="3"/>
    <input class="star" type="radio" name="test-1-rating-1" value="4"/>
    <input class="star" type="radio" name="test-1-rating-1" value="5"/>
   </div>
   <br/>
   <div class="Clear">

    Intrebarea 2:bla bla bla

    <input class="star required" type="radio" name="test-1-rating-2" value="1"/>
    <input class="star" type="radio" name="test-1-rating-2" value="2"/>
    <input class="star" type="radio" name="test-1-rating-2" value="3"/>
    <input class="star" type="radio" name="test-1-rating-2" value="4"/>
    <input class="star" type="radio" name="test-1-rating-2" value="5"/>
   </div>
   <br/>
   <div class="Clear">

        Intrebarea 3:bla bla bla

    <input class="star required" type="radio" name="test-1-rating-3" value="1"/>
    <input class="star" type="radio" name="test-1-rating-3" value="2"/>
    <input class="star" type="radio" name="test-1-rating-3" value="3"/>
    <input class="star" type="radio" name="test-1-rating-3" value="4"/>
    <input class="star" type="radio" name="test-1-rating-3" value="5"/>
   </div>
 <br>
   <div class="Clear">

        Intrebarea 4:bla bla bla

    <input class="star required" type="radio" name="test-1-rating-4" value="1" title="Worst"/>
    <input class="star" type="radio" name="test-1-rating-4" value="2" title="Bad"/>
    <input class="star" type="radio" name="test-1-rating-4" value="3" title="OK"/>
    <input class="star" type="radio" name="test-1-rating-4" value="4" title="Good"/>
    <input class="star" type="radio" name="test-1-rating-4" value="5" title="Best"/>
   </div>
   <br/>
   <div class="Clear">

        Intrebarea 5:bla bla bla

    <input class="star required" type="radio" name="test-1-rating-5" value="1"/>
    <input class="star" type="radio" name="test-1-rating-5" value="2"/>
    <input class="star" type="radio" name="test-1-rating-5" value="3"/>
    <input class="star" type="radio" name="test-1-rating-5" value="4"/>
    <input class="star" type="radio" name="test-1-rating-5" value="5"/>
   </div>
   <br/>
   <div class="Clear">

        Intrebarea 6:bla bla bla

    <input class="star required" type="radio" name="test-1-rating-6" value="1" />
    <input class="star" type="radio" name="test-1-rating-6" value="2" />
    <input class="star" type="radio" name="test-1-rating-6" value="3" />
    <input class="star" type="radio" name="test-1-rating-6" value="4" />
    <input class="star" type="radio" name="test-1-rating-6" value="5" />
   </div>
     </td>
    </tr>
   </table>
  </td>
  <td valign="top" width="5">&nbsp;</td>  <td valign="top" width="50">
   <input type="submit" value="Submit scores!" />  </td>
  <td valign="top" width="5">&nbsp;</td>  <td valign="top" width="160">
   <u>Test results</u>:<br/><br/>
   <div class="test Smaller">
    <span style="color:#FF0000">Results will be displayed here</span>
   </div>
  </td>
 </tr>
</table>
</form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T05:40:41.313

您使用 jquery-mobile 将两个页面合二为一。基于html5标签，jqm可以识别页面。

ajax 调用成功后，将调用 $.mobile.changePage 来显示页面 2（实际上是同一页面中的 div）。您可能需要查看 jquery-mobile 文档以获取更多详细信息和功能。

但这里的代码至少可以让你开始。

```
<!-- language-all: lang-html -->

<html> 
    <head> 
        <title>Contact with Validation</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
        <script type="text/javascript" src="js/jquery.validate.js"></script> 
        <script type="text/javascript" src="js/jquery.form.js"></script> 

        <script type="text/javascript">
        $('document').ready(function () {

            $('#form').validate({
                rules: {
                    "name": {
                        required: true,
                        maxlength: 40
                    },
                    "email": {
                        required: true,
                        email: true,
                        maxlength: 100
                    },
                    "message": {
                        required: true
                    }},
                messages: {
                    "name": {
                        required: "This field is required"
                    },
                    "email": {
                        required: "This field is required",
                        email: "Please enter a valid email address"
                    },
                    "message": {
                        required: "This field is required"
                    }},
                submitHandler: function (form) {
                    $("#form1").ajaxSubmit({
                        target: '#preview',
                        success: function () {
                            $('#formbox').slideUp('fast');
                            $.mobile.changePage("#two");
                        }
                    });

                }

            })

        });

        $(function () {
            $('#tab-Testing form2').submit(function () {
                $('.test', this).html('');
                $('input', this).each(function () {
                    if (this.checked)
                        $('.test', this.form).append('' + this.name + ': ' + this.value + '<br/>');
                });
                return false;
            });
        });
        </script> 

        <style type="text/css">
            ul
            {
                list-style:none;
                width:100%;
                margin: 0;
                padding: 0;
            }
            ul li
            {   
                padding-top:5px;
                padding-bottom:5px;
                margin-bottom:10px;
                clear:left;
                position: relative;

            }
            ul li label
            {
                width:20%;
                display: block;
                margin-right:2%;
                text-align:left;
                line-height:22px;
            }
            ul li span.error
            {
                font: 11px arial;
                color:red;
                margin-left:8px;
                line-height:22px;
            }
            ul li span.passerror
            {
                display: block;
                font: 11px arial;
                color:red;
                margin-left:8px;
                line-height:22px;
            }
            ul li .shortfield{
                width: 45px;
            }
        </style> 
    </head> 
    <body> 
        <div data-role="page" id="one">
            <div data-role="content" >  
                <a href="http://9lessons.info">http://9lessons.info</a>
                <div id="preview"></div>
                <div id="formbox"> 
                    <form name="form" id="form1" action="submit.php" method="post">
                        <ul id="ngothastyle3">
                            <li>
                                <label>Name</label>
                                <input type="text" name="name" class="" maxlength="40" />
                            </li>
                            <li>
                                <label>Email</label>
                                <input type="text" name="email" class="" maxlength="100" />
                            </li>
                            <li>
                                <label>Message</label>
                                <textarea name="message" rows="5" cols="45" class=""></textarea>
                            </li>
                            <li>
                                <label>&nbsp;</label>
                                <input type="submit" value="Submit">
                            </li>
                        </ul>
                    </form>           
                </div> 
            </div>
        </div>
        <div data-role="page" id="two" data-theme="a">
            <div data-role="content" data-theme="a">    
                <div id="tab-Testing">
                    <div class="Clear">&nbsp;</div>
                    <form id="form2">
                        <strong style='font-size:150%'>Test 1</strong> - A blank form
                        <table width="100%" cellspacing="10"> <tr>
                                <td valign="top" width="">
                                    <table width="100%">
                                        <tr>
                                            <td valign="top" width="50%">
                                                <div class="Clear">
                                                    Intrebarea 1:bla bla bla
                                                    <input class="star required" type="radio" name="test-1-rating-1" value="1"/>
                                                    <input class="star" type="radio" name="test-1-rating-1" value="2"/>
                                                    <input class="star" type="radio" name="test-1-rating-1" value="3"/>
                                                    <input class="star" type="radio" name="test-1-rating-1" value="4"/>
                                                    <input class="star" type="radio" name="test-1-rating-1" value="5"/>
                                                </div>
                                                <br/>
                                                <div class="Clear">
                                                    Intrebarea 2:bla bla bla
                                                    <input class="star required" type="radio" name="test-1-rating-2" value="1"/>
                                                    <input class="star" type="radio" name="test-1-rating-2" value="2"/>
                                                    <input class="star" type="radio" name="test-1-rating-2" value="3"/>
                                                    <input class="star" type="radio" name="test-1-rating-2" value="4"/>
                                                    <input class="star" type="radio" name="test-1-rating-2" value="5"/>
                                                </div>
                                                <br/>
                                                <div class="Clear">
                                                    Intrebarea 3:bla bla bla
                                                    <input class="star required" type="radio" name="test-1-rating-3" value="1"/>
                                                    <input class="star" type="radio" name="test-1-rating-3" value="2"/>
                                                    <input class="star" type="radio" name="test-1-rating-3" value="3"/>
                                                    <input class="star" type="radio" name="test-1-rating-3" value="4"/>
                                                    <input class="star" type="radio" name="test-1-rating-3" value="5"/>
                                                </div>
                                                <br>
                                                <div class="Clear">
                                                    Intrebarea 4:bla bla bla
                                                    <input class="star required" type="radio" name="test-1-rating-4" value="1" title="Worst"/>
                                                    <input class="star" type="radio" name="test-1-rating-4" value="2" title="Bad"/>
                                                    <input class="star" type="radio" name="test-1-rating-4" value="3" title="OK"/>
                                                    <input class="star" type="radio" name="test-1-rating-4" value="4" title="Good"/>
                                                    <input class="star" type="radio" name="test-1-rating-4" value="5" title="Best"/>
                                                </div>
                                                <br/>
                                                <div class="Clear">
                                                    Intrebarea 5:bla bla bla
                                                    <input class="star required" type="radio" name="test-1-rating-5" value="1"/>
                                                    <input class="star" type="radio" name="test-1-rating-5" value="2"/>
                                                    <input class="star" type="radio" name="test-1-rating-5" value="3"/>
                                                    <input class="star" type="radio" name="test-1-rating-5" value="4"/>
                                                    <input class="star" type="radio" name="test-1-rating-5" value="5"/>
                                                </div>
                                                <br/>
                                                <div class="Clear">
                                                    Intrebarea 6:bla bla bla
                                                    <input class="star required" type="radio" name="test-1-rating-6" value="1" />
                                                    <input class="star" type="radio" name="test-1-rating-6" value="2" />
                                                    <input class="star" type="radio" name="test-1-rating-6" value="3" />
                                                    <input class="star" type="radio" name="test-1-rating-6" value="4" />
                                                    <input class="star" type="radio" name="test-1-rating-6" value="5" />
                                                </div>
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                                <td valign="top" width="5">&nbsp;</td>  <td valign="top" width="50">
                                    <input type="submit" value="Submit scores!" />  </td>
                                <td valign="top" width="5">&nbsp;</td>  <td valign="top" width="160">
                            <u>Test results</u>:<br/><br/>
                            <div class="test Smaller">
                                <span style="color:#FF0000">Results will be displayed here</span>
                            </div>
                            </td>
                            </tr>
                        </table>
                </div>
            </div>
    </body>
</html> 
```

# python - Python中的空大括号是什么意思？

> ID：13402530
> 
> 赞同：-1
> 
> 时间：2012-11-15T17:02:25.527
> 
> 标签：python, braces

请看一下这个片段：

```
import xlrd,spss
from xlrd import open_workbook
wb=open_workbook('C:/temp/testbook.xls')
sheetnames=[]
for s in wb.sheets():
   sheetnames.append(s.name) 
```

为什么我应该写“ `wb.sheets()`”而不是“ `wb.sheets`”？为什么是“ `s.name`”而不是“ `s.name()`”？

当我不应该使用空括号时，我经常使用空括号，反之亦然。谁能告诉我它们的含义以及我应该（不）何时使用它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T17:05:30.217

`()`当属性（表格）是您可以调用的函数时，这是必需的。当`()`属性是要直接使用而不是调用的值时，不应使用 。

# excel-2010 - 条件格式不起作用

> ID：13402534
> 
> 赞同：1
> 
> 时间：2012-11-15T17:02:34.560
> 
> 标签：excel-2010, phpexcel

（我正在使用 PHPExcel 1.7.8）

**我创建一个工作表并用一个数字数据表填充它。然后 Excel 拒绝将 3-color-transition 类型的条件格式应用于数值数据。**

这也意味着：

1）我可以使用“前 10 个值”类型的条件格式

2）如果我在生成的表格旁边填充了几个带有数字的单元格，那么我可以使用过渡类型的条件格式

3）如果我以简单的复制/粘贴方式从生成的表格中复制两个单元格，仍然无法使用过渡格式

4）如果我使用“仅值”从生成的表中复制两个单元格 - 粘贴我可以使用过渡格式

**这里的另一个重要观察**是，当我选择生成表的一个单元格并单击值栏时 - 就在那个时刻 - 单元格将其颜色更改为它应该与条件格式相关的颜色！

这有点类似于我在 PHPExcel 生成的电子表格中观察到的另一种现象。有时会发生这种情况，当我双击一个单元格进入编辑模式时 - 单元格会变成黑色。但我仍然可以更改值。

我猜在 Excel 文件中表示单元格的方式似乎有问题。与控制着色有关的东西……！？

我当然可以复制/（价值）粘贴所有内容。但也许我只是以错误的方式使用 PHPExcel？或者有一种快速的方法可以以一种有用的方式一次转换 Excel 文件？

我使用的完整代码是这样的：

```
$excelWorkbook = null;

    if(file_exists($filename)) {
        $reader = PHPExcel_IOFactory::createReader("Excel2007");
        $excelWorkbook = $reader->load($filename);
    } else {
        $excelWorkbook = new PHPExcel();
    }

    $sheet = $excelWorkbook->getSheetByName($tabName);

    if ($sheet !== null) {
        $excelWorkbook->removeSheetByIndex($excelWorkbook->getIndex($sheet));
    }

    $sheet = new PHPExcel_Worksheet($excelWorkbook, $tabName);
    $sheet = $excelWorkbook->addSheet($sheet);

    $columns = array_keys($targetArray);
    $rows = array_keys($targetArray[$columns[0]]);

    for($i = 0; $i < count($columns); $i++){
        $sheet->setCellValueByColumnAndRow($i+1,1,$columns[$i]);
    }

    for($i = 0; $i < count($rows); $i++){
        $sheet->setCellValueByColumnAndRow(0,$i+2,$rows[$i]);
    }

    for($i = 0; $i < count($columns); $i++){
        for($j = 0; $j < count($rows); $j++) {
            $sheet->setCellValueByColumnAndRow($i+1, $j+2, $targetArray[$columns[$i]][$rows[$j]]);
        }
    }

    $excelWorkbook->setActiveSheetIndex($excelWorkbook->getIndex($sheet));

    $xlsx = new PHPExcel_Writer_Excel2007($excelWorkbook);
    $xlsx->save($filename); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:44:50.273

解决方法类型的解决方案是选择相应工作表中的所有单元格并选择背景颜色“无”。

显然，单元格是白色的，这种颜色覆盖了条件颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:14:27.203

这可能是一个错误，因为对于单元格中的实心填充，Excel 会反转前景色和背景色的含义，但在条件 (dxf) 格式中却不会。

或者，换句话说，对于单元格格式和条件格式，背景和前景的存储方式不同。

我在 Perl Excel::Writer::XLSX 模块中[遇到了这个问题。](https://github.com/jmcnamara/excel-writer-xlsx/commit/b4ac9ec6d210fdb80823a1a10cfc4434405a02f2)

# visual-studio - 在 C 程序中嵌入 Tcl

> ID：13402536
> 
> 赞同：4
> 
> 时间：2012-11-15T17:02:41.680
> 
> 标签：visual-studio, linker, visual-studio-2005, tcl, unresolved-external

我正在尝试创建一个简单的 c++ 控制台应用程序，该应用程序在脚本上调用 nagelfar 语法检查器。我按照这里的说明进行操作：[http](http://wiki.tcl.tk/19919) ://wiki.tcl.tk/19919，将 tcl添加`tclstub85.lib`到我的输入中，将 tcl lib 目录添加到我的其他库中，并添加我的头目录。链接失败：

```
main.obj : error LNK2001: unresolved external symbol _tclStubsPtr 
```

这是我用于链接的命令行：

```
/OUT:"C:\Users\######\Documents\Visual Studio 2005\Projects\Nagelfar\Release\Nagelfar.exe"
/NOLOGO /LIBPATH:"C:\Tcl\lib" /MANIFEST 
/MANIFESTFILE:"Release\Nagelfar.exe.intermediate.manifest" /DEBUG
/PDB:"c:\users\######\documents\visual studio 2005\projects\nagelfar\release\Nagelfar.pdb"
/OPT:REF /OPT:ICF /LTCG /MACHINE:X86 /ERRORREPORT:PROMPT C:\Tcl\lib\tclstub85.lib
kernel32.lib user32.lib gdi32.lib winspool.lib comdlg32.lib advapi32.lib
shell32.lib ole32.lib oleaut32.lib uuid.lib odbc32.lib odbccp32.lib 
```

这是完整的源代码，我可以使用 g++ 在 Linux 中编译和运行：

```
#include <stdlib.h>
#include <stdio.h>
#include <tcl.h>
#include <string.h>

Tcl_Interp * tcl_interp ;
char fileToCheck[] = "test.tcl";
char dbFile[] = "syntaxdb.tcl";

int main () {
    int code, argc;
    const char **argv;
    char command[1024];
    char *results = NULL; 
    tcl_interp = Tcl_CreateInterp();
    Tcl_SetVar2(tcl_interp, "::Nagelfar", "embedded", "1", 0);  
    code = Tcl_EvalFile(tcl_interp, "nagelfar.tcl"); 
    Tcl_LinkVar(tcl_interp, "::Nagelfar(chkResult)", (char *)&results, TCL_LINK_STRING); 
    sprintf(command, "synCheck %s %s", fileToCheck, dbFile); 
    code = Tcl_Eval(tcl_interp, command);
    printf("Raw Result: \r\n %s\r\n", results); 
    code = Tcl_SplitList(tcl_interp, results, &argc, &argv); 
    {
        int i;
        for (i = 0; i < argc; ++i)
        {
            printf("%d/%d: %s\r\n", i+1, argc, argv[i]); 
        }
    }
    Tcl_Free(results);
    return 0;
} 
```

解决了我自己的问题：我有 x64 ActiveTcl，但正在链接一个 32 位项目。使用 x86 ActiveTcl 发行版解决了我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:02:43.777

您的错误消息告诉我们您需要一个存根表（`tclStubPtr`一旦所有宏都被扩展，Tcl 的名称就会出现），这反过来又说定义预处理器符号`USE_TCL_STUBS`。该符号用于编写为 Tcl 提供额外功能的库的情况。但是，如果您正在编写一个调用 Tcl 库中的函数的主应用程序——例如“运行此代码”——您不能（轻松）使用存根机制，因为在 Tcl 之前需要存根表能够提供给您。

解决方法是*不*定义`USE_TCL_STUBS`并链接到主 Tcl 库（可能`C:\Tcl\lib\tcl85.dll`在您的系统上）而不是`tclstub85.lib`. （我对设置 Visual Studio 知之甚少，无法说出该配置的详细信息。）

* * *

您还应该在调用*之前*`Tcl_CreateInterp()`将此行添加到您的代码中：

```
Tcl_FindExecutable(NULL); 
```

该调用用于允许 Tcl 库内核初始化自身，做一些小事，比如让内存管理器和文件系统接口层工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-27T14:14:55.500

解决了我自己的问题：我有 x64 ActiveTcl，但正在链接一个 32 位项目。使用 x86 ActiveTcl 发行版解决了我的问题。

# jquery - 出现在所有页面上的弹出按钮

> ID：13402537
> 
> 赞同：0
> 
> 时间：2012-11-15T17:02:51.640
> 
> 标签：jquery, jquery-ui, jquery-mobile

我有一个弹出窗口，看起来完全符合我的要求，但标题和按钮出现在所有页面上。如果我删除`ui-title`标题中的类，它将不再出现，但看起来不像我想要的那样。如果我删除`ui-btn-inner`和`ui-btn`类按钮将不再出现在所有页面中，但样式再次关闭。如何保持这种样式但没有按钮和标题出现在所有页面上？

这是弹出窗口：

```
<div data-role="popup" id="popupDialog" data-overlay-theme="a" data-theme="c" style="max-width:400px;" class="ui-corner-all">
    <div data-role="header" data-theme="a" class="ui-corner-top ui-header ui-bar-a" role="banner">
        <h1 class="ui-title" role="heading" aria-level="1">Create Location Page?</h1>
    </div>
    <div data-role="content" data-theme="d" class="ui-corner-bottom ui-content ui-body-d" role="main">
        <h3 class="ui-title">You are about to create a new Location?</h3>
        <p>This action cannot be undone.</p>
        <a href="#" data-role="button" data-inline="true" data-rel="back" data-theme="c" data-corners="true" data-shadow="true" data-iconshadow="true"  class="ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-c">
            <span class="ui-btn-inner ui-btn-corner-all"><span class="ui-btn-inner ui-btn-corner-all">Cancel</span></span>
        </a>    
        <a href="#" data-role="button" data-inline="true" data-rel="back" data-transition="flow" data-theme="b" data-corners="true" data-shadow="true"  data-wrapperels="span" class="ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-b">
            <span class="ui-btn-inner ui-btn-corner-all"><span class="ui-btn-inner ui-btn-corner-all">Create</span></span>
        </a>
    </div>
</div> 
```

调用此命令后会触发弹出窗口：

```
 function PopupTest(){
        $('#popupDialog').popup();
        $('#popupDialog').popup("open");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T18:21:14.980

[弹出窗口小部件的文档](http://jquerymobile.com/demos/1.2.0/docs/pages/popup/index.html)中没有明确说明，但根据jQuery Mobile 1.2 版本的[博客文章](http://jquerymobile.com/blog/)，目前弹出窗口小部件必须位于页面包装器中，但在未来的版本中，这应该不再是必需的.

这是相关的文字

> **弹出窗口必须位于页面包装器中（目前）**
> 
> 在 Alpha 版发布后，我们还听到了非常明确的反馈，即人们希望通过将弹出窗口放置在页面容器之外来跨页面重复使用它们。目前这行不通，因为许多小部件（列表视图、工具栏）是在假设它们存在于页面容器中以进行主题继承和增强工作的前提下构建的。除非这些小部件在未来版本中被重构为在页面之外工作，否则弹出窗口应该只添加在页面内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T17:19:35.593

通过在我希望它存在的页面的页面包装器中移动我的弹出窗口，弹出窗口只会出现在我想要的页面上。

# php - PHP 尝试自动加载随机类名

> ID：13402541
> 
> 赞同：6
> 
> 时间：2012-11-15T17:03:12.640
> 
> 标签：php, magento, autoload

我的一个客户报告说他们的 Magento 系统中的一些代码存在一个奇怪的问题（Magento 是一个用 PHP 编写的电子商务平台）。我无法直接访问系统进行调试和调试，所以我想我会问 Stack Overflow，如果你见过这样的事情。

他们偶尔看到的错误是

```
Warning: include(O1ucm02owqn3iwwcx5osz2m2.php): failed to open stream: 
```

调用堆栈包括

```
#0 /Users/theirusername/Sites/project/lib/Varien/Autoload.php(93): mageCoreErrorHandler(2, 'include(O1ucm02...', '/Users/theiruse...', 93, Array)
#1 /Users/theirusername/Sites/project/lib/Varien/Autoload.php(93): Varien_Autoload::autoload()
#2 [internal function]: Varien_Autoload->autoload('o1ucm02owqn3iww...')
#3 [internal function]: spl_autoload_call('o1ucm02owqn3iww...')
#4 /Users/theirusername/Sites/project/app/code/local/Theirname/Commercebug/Model/Observer.php(191): defined('Mage_Core_Block...') 
```

由此，我可以推断 PHP 认为它需要实例化一个名为`O1ucm02owqn3iwwcx5osz2m2`. 但是，我无法弄清楚**为什么**PHP 可能会这样做。触发错误的行（调用堆栈中的#4，在第 191 行附近`Observer.php`）应该是

```
if(defined("Mage_Core_Block_Template::XML_PATH_DEBUG_TEMPLATE_HINTS"))
{
    $path = Mage_Core_Block_Template::XML_PATH_DEBUG_TEMPLATE_HINTS;
} 
```

这些行似乎没有提到任何命名的 PHP 类`O1ucm02owqn3iwwcx5osz2m2`（我说“应该”，因为客户自己部署了代码，我正在与他们合作以获取副本以查找潜在问题）。

有谁知道会发生什么？这是某个版本的已知 PHP 错误/问题和/或是否有人看到与 PHP 自动加载器`defined`//类常量类似的问题？

（我正在与我的客户一起确定他们正在运行的 PHP 版本，并获取他们部署的文件的副本，以确保它们与我假设的内容相匹配。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T02:52:15.263

defined() 函数是对命名常量的 define() 函数的补充。也就是说，用[define](http://www.php.net/manual/en/function.define.php)声明的常量可以用[defined](http://www.php.net/manual/en/function.define.php)很好地检查。

但是，该代码正在检查一个[类常量](http://php.net/manual/en/language.oop5.constants.php)，这虽然可能，但不太典型。我怀疑检查正在触发自动加载（[就像使用 class_exists 可以触发自动加载一样](http://php.net/manual/en/function.class-exists.php)。）但是，通过使用 defined 传递给自动加载器的值被破坏了（也许传递[了字符串的 z-val 的哈希值](http://devzone.zend.com/317/extension-writing-part-ii-parameters-arrays-and-zvals/)。 )

我想知道以下更改是否会使事情正常进行：

```
// force PHP to load the class first, then let defined() check for the constant
if(class_exists("Mage_Core_Block_Template") && defined("Mage_Core_Block_Template::XML_PATH_DEBUG_TEMPLATE_HINTS"))
{
    $path = Mage_Core_Block_Template::XML_PATH_DEBUG_TEMPLATE_HINTS;
} 
```

正如 Alan 在评论中指出的那样，Zend Guard 也可能导致问题。

# javascript - ASP.NET 服务器控件客户端事件处理

> ID：13402549
> 
> 赞同：1
> 
> 时间：2012-11-15T17:03:43.877
> 
> 标签：javascript, asp.net-ajax, webforms

我有一个关于具有客户端功能的 ASP.NET 服务器控件的问题。我想改进客户端事件处理：当子客户端控件触发事件时，我希望直接通知父客户端控件。

假设我们有两个服务器控件，MyWindow 和 MyTextBox。两者都是“Sys.UI.Control”类型的客户端对象。

MyTextBox 是 MyWindow 的子项：

```
public class MyWindow : Control, IScriptControl
{
   private MyTextBox _mtb;
   //....
   protected override void CreateChildControls()
   {
       _mtb = new MyTextBox();
       _mtb.ID = "MTB";
       _mtb.OnClientTextChanged = "OnClientTextChanged";
       Controls.Add(_mtb);
   }

   //...
   public IEnumerable<ScriptDescriptor> GetScriptDescriptors()
  {
     ScriptControlDescriptor descriptor = new ScriptControlDescriptor("Test.MyWindow", ClientID);
     descriptor.AddComponent("myTextBox", _mtb.ClientID);
     yield return descriptor;
  } 
```

客户端：

```
 function OnClientTextChanged(sender, args) {
      alert('test')
  } 
```

现在，每当文本框的文本发生变化时，都会触发客户端事件并调用函数“OnClientTextChanged”。

我想要的是通知“MyWindow”的客户端对象。我可以这样做：

```
 function OnClientTextChanged(sender, args) {
      $find("MyWindow").textBoxChangedItsText();
  } 
```

但是如何在不使用这个全局 javascript 函数的情况下直接通知 MyWindow 的客户端对象呢？我测试的是

```
_mtb.OnClientTextChanged = string.Format("($find('{0}')).textBoxChangedItsText", ClientID); 
```

但我客户端对象内的“textBoxChangedItsText”函数无法访问对象本身 - “this”是函数本身，而不是我使用“$find（“MyWindow”）”找到的对象

我希望对启用客户端的 AJAX 服务器端控件有知识的人来说，这个问题是清楚的。

谢谢！

编辑：在客户端使用此事件处理程序有效：

服务器端：

```
 _mtb.OnClientTextChanged = string.Format(" ($find('{0}')).textBoxChangedItsTextDelegate", ClientID); 
```

客户端：

```
Test.MyWindow = function (element) {
   Test.MyWindow.initializeBase(this, [element]);
   this.textBoxChangedItsTextDelegate= Function.createDelegate(this, function (sender, e) {
      this.textBoxChangedItsText();
   });
};

Test.MyWindow.prototype = {
   initialize: function () {
      Test.MyWindow.callBaseMethod(this, 'initialize');
   },
   textBoxChangedItsText: function () {
      alert(this.get_id());
   },
   dispose: function () {
      Test.MyWindow.callBaseMethod(this, 'dispose');
   }
}; 
```

我仍然不喜欢使用事件处理程序中的 $find 附加到事件服务器端： _mtb.OnClientTextChanged = string.Format(" ($find('{0}')).textBoxChangedItsTextDelegate", ClientID );

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T07:44:09.583

我想您需要定义事件，因为它基本上是在 ASP.NET 客户端控件中完成的。因此，有必要将以下内容添加到您的 MyTextBox 客户端对象原型中：

```
add_textChanged: function(handler) {
    this.get_events().addHandler('shown', handler);
}
remove_TextChanged: function (handler) {
    this.get_events().removeHandler('textChanged', handler);
}
raise_textChanged: function (eventArgs) {
    var handler = this.get_events().getHandler('textChanged');
    if (handler) {
        handler(this, eventArgs);
    }
} 
```

这将定义客户端代码（父控件或页面）可以订阅并执行所需操作的客户端事件。要在 MyTextBox 中引发此事件，您可以使用如下代码：

```
this.raise_textChanged(Sys.EventArgs.Empty); 
```

要在 MyWindow 客户端对象中使用此事件，您需要将代码修改为以下内容：

```
Test.MyWindow = function (element) {
   Test.MyWindow.initializeBase(this, [element]);

   this._myTextBoxID = null;
   this._onTextChanged$delegate = Function.createDelegate(this, this._onTextChanged);
};

Test.MyWindow.prototype = {
   initialize: function () {
      Test.MyWindow.callBaseMethod(this, 'initialize');

      $find(this._myTextBoxID).add_textChanged(this._onTextChanged$delegate);
   },

   _onTextChanged: function(sender, eventArgs) {
        // Perform required actions.
        // this - will be instance of the this client side object.
   }

   dispose: function () {
        $find(this._myTextBoxID).remove_textChanged(this._onTextChanged$delegate);

      Test.MyWindow.callBaseMethod(this, 'dispose');
   }
}; 
```

注意：在提供的示例中，我使用了 this._myTextBox，它等于子 MyTextBox 控件的客户端 ID。您可以在不执行 $find 的情况下使用属性“myTextBox”，因为您使用描述符对其进行了初始化。AddComponent("myTextBox", _mtb.ClientID);

# sql-server - tsql日期时间设置除操作

> ID：13402552
> 
> 赞同：0
> 
> 时间：2012-11-15T17:03:48.627
> 
> 标签：sql-server, tsql, datetime, set-difference

我有一个带有日期时间情侣的“检测到的存在”表和一个带有日期时间情侣的“预期存在”表......我想知道我什么时候预期存在但没有......我认为这是与日期时间设置的差异（在 tsql 除了操作数），但我不知道如何用 sql 解决。

如果我不清楚，举个例子：

```
 CREATE TABLE [dbo].[DetectedPresence](
        [entrance] [datetime] NULL,
        [exit] [datetime] NULL
    )

    CREATE TABLE [dbo].[ExpectedPresence](
        [entrance] [datetime] NULL,
        [exit] [datetime] NULL
    )

INSERT INTO ExpectedPresence VALUES ('2012-11-16 08.15','2012-11-16 12.00')
INSERT INTO ExpectedPresence VALUES ('2012-11-16 17.00','2012-11-16 18.00')
INSERT INTO DetectedPresence VALUES ('2012-11-16 08.00','2012-11-16 12.00')
INSERT INTO DetectedPresence VALUES ('2012-11-16 15.00','2012-11-16 18.00') 
```

预期存在值：

```
entrance               exit
2012-11-16 08.00       2012-11-16 12.00
2012-11-16 15.00       2012-11-16 18.00 
```

DetectedPresence 值：

```
entrance               exit
2012-11-16 08.15       2012-11-16 12.00
2012-11-16 15.00       2012-11-16 17.00 
```

我想设置日期时间差异（间隙）：

```
2012-11-16 08.00       2012-11-16 08.15
2012-11-16 17.00       2012-11-16 18.00 
```

你能帮助我吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T19:55:58.910

类似的东西

```
case when detectedStart > expectedStart then 
   expectedStart + '-' + detectedStart 
else null end as startDiff,
case when detectedEnd < expectedEnd then 
   detectedEnd + '-' + expectedEnd 
else null end as endDiff 
```

或者

```
 insert into difference (expectedStart, detectedStart)
    Select
        expectedStart,detectedStart 
    from 
        ExpectedPresence e inner join
        DetectedPresence d on
        e.staffID = d.staffID
    where
       detectedStart > expectedStart;

    insert into difference (expectedEnd, detectedEnd)
    Select  
        expectedEnd,detectedEnd 
    from 
        ExpectedPresence e inner join
        DetectedPresence d on
        e.staffID = d.staffID
    where
        detectedEnd < expectedEnd 
```

# three.js - threejs find position of plane from JSONLoader

> ID：13402556
> 
> 赞同：0
> 
> 时间：2012-11-15T17:04:06.490
> 
> 标签：three.js

I have this JS generated by blender and I load It trough JSONLoader. It is just a plane with a texture on it. I just want to find position of it to add a pointlight in its normal vector (in front of it) What is property to use to add a point light 3 points away? How can I know position of that light?

Im new on threejs and I've looking in javascript inspector some properties to find this but I can not see it...

Thank you!!!

```
{

"metadata" :
{
    "formatVersion" : 3.1,
    "generatedBy"   : "Blender 2.63 Exporter",
    "vertices"      : 4,
    "faces"         : 2,
    "normals"       : 1,
    "colors"        : 0,
    "uvs"           : [4],
    "materials"     : 1,
    "morphTargets"  : 0,
    "bones"         : 0
},

"scale" : 1.000000,

"materials" : [ {
    "DbgColor" : 15658734,
    "DbgIndex" : 0,
    "DbgName" : "texturaLadrillos",
    "blending" : "NormalBlending",
    "colorAmbient" : [0.6900000198185445, 0.6900000198185445, 0.6900000198185445],
    "colorDiffuse" : [0.6900000198185445, 0.6900000198185445, 0.6900000198185445],
    "colorSpecular" : [0.5, 0.5, 0.5],
    "depthTest" : true,
    "depthWrite" : true,
    "mapDiffuse" : "JP_Brick01_Bump.jpg",
    "mapDiffuseWrap" : ["repeat", "repeat"],
    "shading" : "Lambert",
    "specularCoef" : 50,
    "transparency" : 1.0,
    "transparent" : false,
    "vertexColors" : false
}],

"vertices" : [-53.8264,3.757e-06,85.9501,-8.9211,3.757e-06,85.9501,-53.8264,46.0109,85.9501,-8.9211,46.0109,85.9501],

"morphTargets" : [],

"normals" : [0,0,1],

"colors" : [],

"uvs" : [[0,0,1,0,1,1,0,1]],

"faces" : [42,0,1,3,0,0,1,2,0,0,0,42,2,0,3,0,3,0,2,0,0,0],

"bones" : [],

"skinIndices" : [],

"skinWeights" : [],

"animation" : {} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T20:25:40.653

This jsonfile doesn't contain the position data becuase it only has geometry and materials.

You should use a mesh to define the position.

# matlab - 切换另一个按钮的 Matlab GUI 按钮

> ID：13402563
> 
> 赞同：1
> 
> 时间：2012-11-15T17:04:19.413
> 
> 标签：matlab, user-interface, button, toggle, matlab-guide

有没有办法在 Matlab GUI 中创建两个切换按钮，以便一个切换另一个？换句话说，如果按钮 A 处于打开状态，我如何创建一个按钮 B，它在打开时会使 A 关闭？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:28:29.200

这是我的代码：

```
function button1_Callback(hObject, eventdata, handles)
if get(hObject,'Value')==1

    %do something here

else

    %do something else (in my case delete a video object) 
```

如果我现在放第二个按钮并使用命令

```
set(handles.button1,'Value',0) 
```

The result is that my first button toggles but the command after the `else` is not executed. Is there a way to execute that command as well?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:07:36.290

我有版本 R2009a，所以我不知道这是否适合您：

`guide`我用（默认名称）定义了两个按钮。单击第一个时，它被禁用（启用：关闭），其值设置为 1，其字符串设置为 On；第二个按钮被设置为另一个状态。另一个按钮也有类似的行为。

```
% --- Executes on button press in pushbutton1.
function pushbutton1_Callback(hObject, eventdata, handles)
set(handles.pushbutton1,'Value',1,'String','On','Enable','Off')
set(handles.pushbutton2,'Value',0,'String','Off','Enable','On')
get(handles.pushbutton1)

% --- Executes on button press in pushbutton2.
function pushbutton2_Callback(hObject, eventdata, handles)
set(handles.pushbutton1,'Value',0,'String','Off','Enable','On')
set(handles.pushbutton2,'Value',1,'String','On','Enable','Off') 
```

如果要根据 button1 的状态*切换*button2 的行为，请执行以下操作：

```
% --- Executes on button press in pushbutton1.
function pushbutton1_Callback(hObject, eventdata, handles)

% this toggles button1 between 0 and 1 and its label between 'On' and 'Off'
p = 1-get(handles.pushbutton1,'Value');   
set(handles.pushbutton1,'Value',p)
if p==0
    set(handles.pushbutton1,'String','Off')
else
    set(handles.pushbutton1,'String','On')
end

% --- Executes on button press in pushbutton2.
function pushbutton2_Callback(hObject, eventdata, handles)

% Behavior of button2 is dependent on state of button1
p = get(handles.pushbutton1,'Value');

if p==0
    % Do this when button1 has its label to 'Off' (and Value to 0)
else
    % This will execute when button1 has a Value of 1 (and its label showing 'On')
end 
```

这是你需要的吗？

# mysql - 将 MySQL 同步/导入到 Outlook 联系人

> ID：13402565
> 
> 赞同：1
> 
> 时间：2012-11-15T17:04:41.357
> 
> 标签：mysql, outlook, contacts

我想用 Outlook 2010 将我的 MySQL 数据库与一些联系人数据连接起来。是否有可能不购买昂贵的程序？也许使用 ODBC？

# java - JAVA / PHP：如何使用 java 和 php 将多行插入 DB？（使用 mysqli）

> ID：13402567
> 
> 赞同：0
> 
> 时间：2012-11-15T17:04:42.870
> 
> 标签：java, php, mysqli

我想在一个名为 USERS 的 mysql 表中插入 N 行。为了插入单行，我编写了这段代码（它有效）：

**PHP端：insert_user.php**

```
<?php   
    $mysqli = new mysqli('hostname', 'username','password', 'dbname');
    if (mysqli_connect_errno()) {
       printf("Can't connect Errorcode: %s\n", mysqli_connect_error());
       exit;
    }

    if ($result = $mysqli->prepare("INSERT INTO `users` (`email`, `imei`) VALUES (?,?)")) {
        $email = $_POST['email'];
        $imei = $_POST['imei'];

        $result->bind_param("ss", $email, $imei);
        $result->execute();
        $result->close();
        printf("Insert OK");
    } else {
        printf("Insert KO. ERROR: %s",mysqli_error());
    }

    $mysqli->close();     
?> 
```

**JAVA端**

```
public void insertUser(String email
             , String imei) {

    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    nameValuePairs.add(new BasicNameValuePair("email", email));
    nameValuePairs.add(new BasicNameValuePair("imei", imei));

    // send them on their way
    try {
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost("myserver.com/insert_user.php");
        httpPost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpResponse httpResponse = httpClient.execute(httpPost);
    } catch (e) {
        e.printStackTrace();
    }

} 
```

* * *

**问题**

我需要一个完整的“ **insert_ *multi* _user.php** ”示例和相关的java方法，以传递更多行（使用数组？一个集合？我不知道......）。例如，替换这个 java 行：

```
 nameValuePairs.add(new BasicNameValuePair("email", email));
    nameValuePairs.add(new BasicNameValuePair("imei", imei)); 
```

使用数组（？）：

```
 nameValuePairs.add(new BasicNameValuePair("email", email[]));
    nameValuePairs.add(new BasicNameValuePair("imei", imei[])); 
```

并且，在 php 中，替换：

```
 $email = $_POST['email'];
    $imei = $_POST['imei']; 
```

和：

```
 $email[] = $_POST['email'];
    $imei[] = $_POST['imei']; 
```

（显然上面的代码只是给你一个想法，它是不正确的......）

我度过了没有运气的日子:(谢谢你，Geltry

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:09:33.813

只需使用 for 循环包装您的代码

如果您有用户的记录/数组，您可以执行类似的操作

```
$users = array(...);
foreach($users as $user) {
    $mysqli->prepare("INSERT INTO `users` (`email`, `imei`) VALUES (?,?)")l
    $result->bind_param("ss", $user['email'], $user['imei']);
    $result->execute();
    $result->close();
} 
```

但要做到这一点，您必须更改提交数据的方式，所以不要一一提交，而是提交一个 CSV 文件，例如解析[`fgetcsv`](http://php.net/manual/en/function.fgetcsv.php)并遍历每条记录。

在 Java 端，您还可以传递一个 POST 数组：

```
List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();  
nameValuePairs.add(new BasicNameValuePair("user[0][email]","email1"));  
nameValuePairs.add(new BasicNameValuePair("user[0][imei]","imei1"));  
nameValuePairs.add(new BasicNameValuePair("user[1][email]","email2"));  
nameValuePairs.add(new BasicNameValuePair("user[1][imei]","imei2")); 
```

其他选项是将 JSON 格式的数据发送到 PHP 脚本并使用[`json_decode`](http://php.net/manual/en/function.json-decode.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T17:13:36.627

我不相信您可以将数组（来自 Java）作为 PHP 脚本的参数传递到 HTTP 帖子中。因此，基本上，您的 Java 代码需要在 POST 请求中一次发送 1 个用户以添加用户......所以您将其包装在一个循环中。

可能有一种方法可以序列化对象数组并将其作为有效负载发送到 PHP 脚本，PHP 脚本可以在其中反序列化它，但我不知道你会如何做这样的事情，除了你可以将你的数组序列化为XML 文件。然后 PHP 脚本可以读取 XML 并在 PHP 脚本中循环以添加用户。

# c - getch 需要额外的字符

> ID：13402571
> 
> 赞同：4
> 
> 时间：2012-11-15T17:05:13.880
> 
> 标签：c, macros, getch

您好，我是编程新手，我正在用 C 编写程序。

在我的头文件中，我有这个宏：

```
#define yesno(c) (c==ENTER || c==' ' || c=='\t') ? ENTER : ESC 
```

在我的程序中，我有这个代码

```
char keypressed()
{ char c;
c =getch();
return yesno(getch());
 } 
```

所以我想问的是，为什么我要求return的时候`yesno(c)`只需要按一次按钮，而我用return的时候`yesno(getch())`却要再按一次按钮两三下？

`getch()`从宏调用时有问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T17:10:12.513

因为当你使用

```
yesno(getch()); 
```

它扩展为：

```
(getch()==ENTER || getch()==' ' || getch()=='\t') ? ENTER : ESC` 
```

当宏像这样展开时，这意味着`getch()`实际上可以调用 1、2 或 3 次，因为逻辑`||`意味着：

```
getch() == '\n' ? if true return ENTER, false test next one
getch() == ' '  ? if true return ENTER, false test next one
getch() == '\t' ? if true return ENTER, false return ESC 
```

如果您使用编译器，您可以通过使用标志`gcc`找出您的宏扩展为什么：`-E`

```
gcc -E myprog.c -o mprog.m 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T17:15:24.280

C 使用[短路评估](http://en.wikipedia.org/wiki/Short-circuit_evaluation)。您从宏中获得的表达式：

```
(getch()==ENTER || getch()==' ' || getch()=='\t') ? ENTER : ESC` 
```

获取一个字符，查看它是否等于 ENTER （您可能已将其定义为`\n`。如果是，则整个表达式将最终为 true ，因此该函数在不测试其他两种情况的情况下返回 true 。如果不是，但是，然后该函数获取*另一个*字符，测试第二个字符是否等于`' '`，如果相等则返回 true。只有在对不同字符测试所有三种情况并且每次都为 false 之后，才知道整个表达式为 false。

# c# - 简单的 LINQ 和/或查询条件说明

> ID：13402573
> 
> 赞同：0
> 
> 时间：2012-11-15T17:05:15.627
> 
> 标签：c#, linq

这是一个非常简单的 LINQ 和/或问题。

在以下查询摘录中，我的目的是获取与以下三个条件中的任何一个匹配的记录。

我的逻辑是正确的还是有更好的表达方式？

*   (t2.Username == userName) && (viewMode == 1)
*   (t1.Owner == 用户名) && (viewMode == 1)
*   （视图模式 == 2）

**查询摘录**

```
where
((t2.Username == userName) && (viewMode == 1)) ||
((t1.Owner == userName) && (viewMode == 1)) || 
((viewMode == 2)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T17:07:58.963

这应该更有效地为您提供相同的结果：

```
viewMode == 2 ||
(viewMode == 1 && (t2.Username == userName || t1.Owner == userName)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T17:08:48.837

你的逻辑看起来很好，你当然可以稍微不同：

```
where ( (viewMode == 1 && ( t2.Username == userName || t1.Owner == userName ))
   || viewMode == 2) 
```

我猜哪个对你的眼睛更好看！

# wpf - 如何在 WPF 中显示系统发育树结构

> ID：13402583
> 
> 赞同：0
> 
> 时间：2012-11-15T17:05:32.307
> 
> 标签：wpf, phylogeny

我是WPF的新手。问题是关于在 WPF 中显示树结构。

我有一个 WPF 应用程序，它将连接到远程数据库。数据库中的一个表（分类表）有两列：“父节点”（varchar（50））和“子节点”（varchar（50））。现在我想显示那个系统发育树（如图所示）。树上的每个节点都与一个复选框耦合，因此用户可以根据需要选择多个节点。

由于缺乏 WPF 知识，我真的不知道如何实现这一点。这里应该使用哪些控件（或控件组合）？在这种情况下是否需要 WCF？

提前致谢。

非常感谢任何建议或教程。

![在此处输入图像描述](../Images/8e26f1135fbffeaafd480826f977d072.png)

# multithreading - 具有容器管理事务和工作线程的 MDB

> ID：13402585
> 
> 赞同：2
> 
> 时间：2012-11-15T17:05:43.403
> 
> 标签：multithreading, jakarta-ee, websphere, jta, message-driven-bean

我有一个使用容器管理事务的 MDB（我的容器是 IBM Websphere 7）。

Websphere 正在使用全局 (JTA) 事务。

如果我的 MDB 线程启动了一个工作线程，并且该线程开始了一个事务，那么该新线程是否会与 MDB 在同一个事务中？

我希望 MDB 线程在我的工作线程成功启动后立即提交其事务并确认 MQ 消息。如果工作线程回滚，我不希望我的 MDB 回滚。

编辑：线程中的代码有这个 - 它没有使用注释：

```
 txn = (UserTransaction)ctx.lookup("java:comp/UserTransaction");
    txn.begin(); 
```

因此，如果查看 txn.getStatus()，它将不是 STATUS_NO_TRANSACTION。因此，我需要获取适用于 Websphere 7 的事务管理器并在 txn.begin() 之前调用“suspend()”？预防问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T19:54:13.903

将不应与方法在同一事务中的代码`onMessage()`放入单独的方法中，并将该方法的事务属性设置为`REQUIRES_NEW`. 这将在调用该方法时创建一个新事务，并且此新事务的成功或失败不会影响先前存在的事务。

顺便说一句，您不应该在 JavaEE 应用程序中进行显式线程管理。

从 EJB 3.0 规范：

> 企业 bean 不得尝试管理线程。企业 bean 不得尝试启动、停止、挂起或恢复线程，或者更改线程的优先级或名称。企业 bean 不得尝试管理线程组。

您可以考虑使用计时器服务来有效地创建单独的线程，同时将线程管理留给服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T20:30:58.267

如果您使用的是 ejb 3.1，则可以选择以使用注释的方法进行工作人员工作

```
@Asynchronous 
```

这将为您提供一个新事务，并且该工作将在一个单独的线程中执行。

[http://www.oracle.com/webfolder/technetwork/tutorials/obe/java/asyncMethodOfEJB/AsyncMethodEJB.html](http://www.oracle.com/webfolder/technetwork/tutorials/obe/java/asyncMethodOfEJB/AsyncMethodEJB.html)

阅读有关默认事务模式的更多信息：[异步方法的默认 EJB 事务模式？](https://stackoverflow.com/questions/4016117/default-ejb-transaction-mode-for-asynchronous-methods)

# windows-phone - Windows Phone 8 中的试用应用程序

> ID：13402588
> 
> 赞同：2
> 
> 时间：2012-11-15T17:05:48.030
> 
> 标签：windows-phone, windows-store-apps, windows-phone-8

在 WinPhone 8 SDK 中，有两个`LicenseInformation`类：

*   Microsoft.Phone.Marketplace.LicenseInformation（从 WP7.0 开始存在）
*   Windows.ApplicationModel.Store.LicenseInformation（受 WinRT 启发）

以及启动完整产品购买的两种方法：

*   通过`MarketplaceDetailTask`应用 GUID 作为`ContentIdentifier`
*   通过`CurrentApp.RequestAppPurchaseAsync`

它们略有不同。我应该使用哪一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:29:18.957

请遵循此处提供的指南：

[http://msdn.microsoft.com/en-us/library/ff967558(v=vs.105).aspx（WP8](http://msdn.microsoft.com/en-us/library/ff967558(v=vs.105).aspx)的更新链接）

[http://msdn.microsoft.com/en-us/library/hh286402](http://msdn.microsoft.com/en-us/library/hh286402(v=vs.105).aspx) (v=vs.105).aspx（更新了 wP8 的链接）

您应该将 MarketplaceDetailTask​​ 与 Microsoft.Phone.Marketplace.LicenseInformation 类一起使用。

# c - C 双指针分配问题

> ID：13402589
> 
> 赞同：2
> 
> 时间：2012-11-15T17:05:51.247
> 
> 标签：c, pointers, segmentation-fault

我阅读了大量的 tutos 和片段，但我仍然不明白为什么会出现段错误：

```
int fun(char **p) {

  int i;

  *p = malloc(2);
  *p[0]=10;
  *p[1]=20; // segfault NULL pointer

  printf("fun()/n");
  for (i=0; i<2; i++)
   printf("%d ",*p[i]);
}

int main(int argc, const char *argv[])
{
  char* buffer;
  int i;

  fun(&buffer);

  printf("main()\n");

  for (i=0; i<2; i++)
   printf("%d ",buffer[i]);

  return 0;
} 
```

在 gdb 中，它给出：

```
Program received signal EXC_BAD_ACCESS, Could not access memory.
Reason: KERN_INVALID_ADDRESS at address: 0x0000000000000000
0x0000000100000dea in fun (p=0x7fff5fbffab0) at test.c:10
10    *p[1]=20;
(gdb) p *p[0]
$1 = 10 '\n'
(gdb) p *p[1]
Cannot access memory at address 0x0
(gdb) 
```

我看过很多类似的片段，但肯定有一些我深深误解的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T17:08:02.953

你的意思是`(*p)[1]`。你说的是`*(p[1])`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-08T13:10:01.677

尝试在 LHS 返回相同数据类型的变量地址。malloc() 默认返回一个 void 值。 *p = (char* ) malloc(2); 这样编译器就知道它需要多少字节来移动指针来获取新变量。

# .net - .NET DateTime 往返的 JSON 序列化不起作用

> ID：13402591
> 
> 赞同：2
> 
> 时间：2012-11-15T17:06:00.120
> 
> 标签：.net, json

如果我使用 System.Web.Script.Serialization.JavaScriptSerializer 保存 .NET DateTime，则反序列化版本与原始版本相差一个小时。任何想法为什么？

编辑：我的工作站的时区是 UTC。

下面是一个 NUnit 测试；请注意，该断言仅在添加一个小时后才有效。

```
 [Test]
    public void JsonSerializationOfDateTimesDoesntWork()
    {
        var originalDateTime = new DateTime(2011, 6, 20, 6, 5, 4, 3);
        const string fileName = "C:\\temp\\testDateTime.json";
        using (var writer = new StreamWriter(fileName, false))
        {
            writer.Write(new JavaScriptSerializer().Serialize(originalDateTime));
        }
        DateTime newDateTime;
        using (var reader = new StreamReader(fileName, false))
        {
            var readToEnd = reader.ReadToEnd();
            newDateTime = new JavaScriptSerializer().Deserialize<DateTime>(readToEnd);
        }

        Assert.AreEqual(originalDateTime, newDateTime.AddHours(1)); // !!
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T17:55:19.843

序列化程序显然将其转换为时间*瞬间*，以自 unix 纪元以来的毫秒形式。换句话说，它实际上是`ToUniversalTime()`先调用。

此时，有关原始“种类”的任何信息`DateTime`都将丢失。

在反序列化时，结果始终是`DateTime`一种 UTC。

如果您*从*一种`DateTime`UTC 开始，您将往返。如果您还需要记住类型，则需要单独保存该数据。请记住，当地时间本质上可能是模棱两可的。

```
using System;
using System.Web.Script.Serialization;

class Test
{
    public static void Main(string[] args)
    {
        var original = new DateTime(2011, 6, 20, 6, 5, 4, 3, DateTimeKind.Utc);
        var serializer = new JavaScriptSerializer();
        var text = serializer.Serialize(original);
        var parsed = serializer.Deserialize<DateTime>(text);
        Console.WriteLine("Original: {0} ({1})", original, original.Kind);
        Console.WriteLine("Text: {0}", text);
        Console.WriteLine("Parsed: {0} ({1})", parsed, parsed.Kind);
    }
} 
```

输出：

```
Original: 20/06/2011 06:05:04 (Utc)
Text: "\/Date(1308549904003)\/"
Parsed: 20/06/2011 06:05:04 (Utc) 
```

当然，这只是突出了[从概念上被打破的](http://noda-time.blogspot.com/2011/08/what-wrong-with-datetime-anyway.html)[问题`DateTime`](http://noda-time.blogspot.com/2011/08/what-wrong-with-datetime-anyway.html)......

编辑：另外，正如评论中所述，顺便说一句，我非常怀疑您的工作站的时区是否真的是 UTC。我怀疑这是英国时区，冬天是 UTC，但夏天是 UTC+1 - 你给出的日期是夏天。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-09T19:28:53.323

改为使用`JsonConvert.DeserializeObject`。它保留了正确的 DateTime

# algorithm - 以 O(n) 复杂度对数组进行排序

> ID：13402602
> 
> 赞同：1
> 
> 时间：2012-11-15T17:07:03.537
> 
> 标签：algorithm, sorting

我在 Atrenta 的面试中被问到一个有趣的问题。这是对复杂度为 O(n) 的数组进行排序，我说这是不可能的，但他坚持认为这是不可能的，即使在采访之后也是如此。

就像这样。

你有一个数组，可以说：[1,0,1,0,1,1,0] 这需要排序。必须在数组中完成的事情（在某种意义上不涉及其他数据结构。

我没有，我认为不可能做任何复杂度为 O(n) 的事情。我能想到的最好的是 O(n * log n)，我的知识来自维基百科。

如果您知道，请给我您的想法和方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-15T17:13:50.460

在您的示例中，数组中只有两个不同的值，因此您可以使用计数排序：

```
zero_count = 0
for value in array:
    if value == 0:
        zero_count += 1
for i in 0 ... zero_count:
    array[i] = 0
for i in zero_count ... array.size:
    array[i] = 1 
```

基数排序是一系列更普遍适用的 O(n) 排序。

它是*比较排序*，平均需要 Omega(n * log n) 比较，因此不能在最坏情况或平均情况线性时间运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T06:29:17.333

从两端遍历数组，并在需要时交换 1 和 0。在 O(n) 中运行，但具有所有 if 条件（*类似方法的蛮力。可能不是预期的答案*）；）

```
int i = 0 ;
int j = array.size -1 ;
for ( i = 0 ; i < j ; ) {

    if( array[i] == 1) {
        if( array[j] == 0 ) {
            array[j] = 1 ; array[i] = 0 ; //Swap 
            i++; j--; 
            continue;
        }
        //else
            j--;
            continue;

    }
   //else
        if( array[j] == 0 ) {
            i++; 
            continue;
        }

        //else 
            i++ ;
            j--;            
} 
```

# c++ - C++ 特征库 - 二次规划，固定与动态，性能

> ID：13402605
> 
> 赞同：3
> 
> 时间：2012-11-15T17:07:11.210
> 
> 标签：c++, optimization, eigen, quadratic

我正在研究做一些二次编程，并且已经看到了不同的库。我见过 QuadProg++ 的各种 Eigen 变体（[KDE 论坛](http://forum.kde.org/viewtopic.php?f=74&t=92393)、[Benjamin Stephens](http://www.cs.cmu.edu/~bstephe1/)、[StackOverflow 帖子](https://stackoverflow.com/questions/8025700/is-there-a-quadratic-programming-library-in-c)）。作为测试，我在 GitHub 上分叉了wingsit 的 Eigen 变体，[以](https://github.com/eacousineau/QP)[实现](https://github.com/wingsit/QP)编译时大小的问题，以通过模板测量性能。

我发现我在模板案例中的性能比来自wingsit 代码的动态大小（MatrixXD / VectorXD）案例更差。我知道这不是一个简单的问题，但是任何人都可以看到这可能的原因吗？

注意：我确实需要增加问题大小/迭代次数，一旦可以，我会发布。

编辑：我在 Ubuntu 12.04 上使用 GCC 4.6.3。这些是我正在使用的标志（从wingsit的代码修改）：

```
CFLAGS  = -O4 -Wall -msse2 -fopenmp      # option for obj
LFLAGS  = -O4 -Wall -msse2 -fopenmp      # option for exe (-lefence ...) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T17:51:52.227

静态大小的代码的好处通常会随着大小的增加而减少。静态大小代码的典型好处主要包括（但不限于）以下几点：

*   基于堆栈的分配比堆分配更快。然而，在大尺寸下，基于堆栈的分配不再可行（堆栈溢出），甚至从预取和引用位置的角度来看也是有益的。
*   循环展开 当编译器看到一个小的静态大小的循环时，它可以展开它，并且可能使用 SSE 指令。这不适用于较大的尺寸。

换句话说，对于小尺寸（最多可能 N=12 左右），静态尺寸的代码可以比等效的动态尺寸的代码更好更快，只要编译器对内联和循环相当积极展开。但是，当尺寸较大时，就没有意义了。

此外，静态大小的代码也有许多缺点：

*   没有有效的移动语义/交换/写时复制策略，因为这样的代码通常是用静态数组实现的（为了获得上面提到的好处），不能简单地交换（如交换内部指针）。
*   Larger executables which contain functions that are spread out. Say you have one function template to multiply two matrices, and so, a new compiled function (inlined or not) is generated for each size combination. Then, you have some algorithm that does a lot of matrix multiplications, well, each multiplication will have to jump to (or execute inline) the specialization for that size combination. At the end, you end up with a lot more code that needs to be cached, and then, cache misses become a lot more frequent, and that will completely destroy the performance of your algorithm.

So, the lesson to draw from that is to use static-sized vectors and matrices only for small things like 2 to 6 dimensional vectors or matrices. But beyond that, it's preferable to go with dynamically-sized code (or maybe try static-sized code, but verify that it performs better, because it is not guaranteed to do so). So, I would advise you to reconsider your idea of using static-sized code for larger problems.

# python - Python：列表索引必须是整数，而不是元组

> ID：13402607
> 
> 赞同：4
> 
> 时间：2012-11-15T17:07:13.410
> 
> 标签：python, list, tuples

我正在从 Matlab 转到 Python，所以我对 Python 还很陌生。我正在尝试为一些数据分析创建一段基本的代码。它应该读入指定目录中的所有 .txt 数据文件，并用实际 .txt 文件的名称标记它们。我已经设法找到一种方法来使用字典来完成这项工作，但如果有更好的方法，我将非常感激听到它。

一旦我可以访问数据，然后我想创建一个包含该数据的操纵版本的新列表。为此，我想创建一个新的 nxm 列表或数组，但是我找不到如何正确初始化这样的列表。我最近的努力导致以下错误：

列表索引必须是整数，而不是元组

代码如下：

```
import sys
import os
import re
import string
from numpy import *

listing = os.listdir(path)
dic = {}    # define a dictionary to map the datafiles to while maintaining their filename

for filename in listing:
        match = re.findall(r'[\w.]+\.txt', filename)    # Use a regular expression findall function to identify all .txt files
        if match:
            dic[match.pop()[:-4]] = loadtxt(filename)   # Drop the .txt and assign the datafile its original name

E = []
E[:,0] = dic['Test_Efield_100GHz'][:,0]
E[:,1] = dic['Test_Efield_100GHz'][:,1]
E[:,2] = abs(dic['Test_Efield_100GHz'][:,4]+dic['Test_Efield_100GHz'][:,7]*1j)**2
E[:,3] = abs(dic['Test_Efield_100GHz'][:,5]+dic['Test_Efield_100GHz'][:,8]*1j)**2
E[:,4] = abs(dic['Test_Efield_100GHz'][:,6]+dic['Test_Efield_100GHz'][:,9]*1j)**2 
```

感谢您的任何反馈！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T17:10:14.400

您在标准 Python类型 (your ) 变量上使用了仅`numpy`库支持的扩展切片语法。`list``E`

您必须使用`E.append()`向它添加新值：

```
E.append(dic['Test_Efield_100GHz'][:,0]) 
```

或者简单地将整个列表定义为一组表达式：

```
E = [
    dic['Test_Efield_100GHz'][:,0]
    dic['Test_Efield_100GHz'][:,1]
    abs(dic['Test_Efield_100GHz'][:,4]+dic['Test_Efield_100GHz'][:,7]*1j)**2
    abs(dic['Test_Efield_100GHz'][:,5]+dic['Test_Efield_100GHz'][:,8]*1j)**2
    abs(dic['Test_Efield_100GHz'][:,6]+dic['Test_Efield_100GHz'][:,9]*1j)**2
] 
```

或改用`numpy`数组。

标准的 python 序列类型，例如`str`,`list`并且`tuple`只支持简单的索引：

```
E[0]
E[-2] 
```

或普通切片：

```
E[:10]
E[1:2]
E[3:]
E[:-1] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T17:13:48.030

您只能为数组指定一个索引。
使用类似这样的东西
`E.append(dic['Test_Efield_100GHz'][0])`
这会将 E[0] 存储为一个数组，其值可以通过 E[0][i] 访问，其中 i 是列名
注意：Python 没有矩阵类型的数据结构，它只有数组。矩阵只是一个数组数组。

# php - 通过单击表头来反转搜索顺序

> ID：13402608
> 
> 赞同：-1
> 
> 时间：2012-11-15T17:07:16.013
> 
> 标签：php, html-table, reverse

我有一个以有序方式从 MYSQL 显示的表。我正在尝试获取它，以便如果我单击标题链接，它将反转顺序，然后如果我再次单击它，它将恢复到原来的情况。我一直在试图恢复它。这是我到目前为止所拥有的：

```
switch($_GET['sort']){

case "asc":
$orderBy = "ORDER BY whole_date asc";
break;

case "desc":
$orderBy = "ORDER BY whole_date desc";
break;

default:
$orderBy = "ORDER BY whole_date desc";
break;
} 
```

这里的SQL语句中提到：

```
...WHERE user_id = '$username'".$orderBy." LIMIT $offset, $rowsperpage "; 
```

在我的表头中，我在 HTML 中有这样的链接：

```
<th><a href='view.php?sort=desc'>header</a></th> 
```

这就是我的问题所在，我该如何让它恢复原状。我将如何包含一个 sort=asc 链接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T17:10:40.983

```
printf('<a href="view.php?sort=%s">header</a>',
       empty($_GET['sort']) || $_GET['sort'] == 'asc' ? 'desc' : 'asc'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T17:12:17.657

由于您似乎在更改排序顺序时重新加载页面，我想您可以使用一个简单的三元语句来决定在编写链接时要引用的排序顺序：

```
<th>
<a href='view.php?sort=<? echo ($_GET["sort"] != "desc") ? "desc" : "asc"; ?>'>header</a>
</th> 
```

# git - 为什么 git-status 显示更新后的二进制文件以新名称作为重命名？

> ID：13402612
> 
> 赞同：5
> 
> 时间：2012-11-15T17:07:24.627
> 
> 标签：git, binaryfiles

在处理二进制文件时，git 似乎考虑用另一个修改过的文件重命名替换文件。例如，当用 foo-1.0.3.jar 或以下测试用例替换 foo-1.0.1.jar 时会发生这种情况：

```
$ dd if=/dev/urandom of=test.dat bs=1024 count=10
$ md5sum test.dat
8073aef704e9df13b44818371ebbcc0b  test.dat
$ git add test.dat && git commit -m 'add binary file'
$ mv test.dat test2.dat
$ git rm test.dat
$ dd if=/dev/urandom of=test2.dat bs=1 count=1 conv=notrunc
$ md5sum test2.dat
21e1ac3ab9ba50c9dad9171f9de7232d  test2.dat
$ git add test2.dat 
```

现在我显然有一个包含新内容（至少部分）和新名称的文件。但是，git 认为这是一个重命名`git status`：

```
$ git status
# On branch master
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#       renamed:    test.dat -> test2.dat 
```

*   这是什么原因，例如这两个文件必须有多相似？如果 test2.dat 包含完全不同的数据，这似乎不会发生。
*   除了看起来有点尴尬之外，它有什么缺点吗？实际数据似乎非常好；在检查上一个版本时，我确实得到了该版本的正确文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T17:10:43.060

Git 实际上并不存储重命名，它只是存储一棵新树，其中一个文件被删除，另一个文件被添加。比较树 ( `git diff`, `git log`, `git status`) 的 Git 命令会根据内容检测重命名。

出于某种原因，重命名检测会为您的文件触发。如果您已经耗尽了熵，它们的内容可能相似`/dev/urandom`吗？

编辑：请参阅例如[git 如何检测类似文件，以进行重命名检测？](https://stackoverflow.com/questions/7938582/how-does-git-detect-similar-files-for-its-rename-detection)有关重命名检测的详细信息。

# javascript - 无论如何要使这个嵌套的回调更干净？

> ID：13402619
> 
> 赞同：0
> 
> 时间：2012-11-15T17:08:01.400
> 
> 标签：javascript, jquery

我正在寻找一种方法来使这组 AJAX 调用更干净。我试过使用`$.when()`......但我无法真正让它工作。我认为这是由于没有传递延迟对象......因为我的 AJAX 调用位于模型对象内部。

这就是我迄今为止所拥有的（一些代码被简单地排除在外）：

```
var origin_form, destination_form; //assume string input from user
var destination, origin;

getOrigin();

//Gets origin data
function getOrigin(){

   //ASYNC CALL
   model.searchFeature(origin_form, 1, function(data){
     //additional callback code excluded
     origin = data; 
     getDestination();

   });
}

//Gets destination information
function getDestination(){

    //ASYNC CALL            
    model.searchFeature(destination_form, 1, function(data){
        //additional callback code excluded
        destination = data;     
        directions(origin, destination);
    });
}

 function directions(origin, destination){
    //Async call to request directions from google api
 } 
```

任何建议都会很棒！

编辑：我正在寻找一些类似于`$.when()`. 基本上，我想`directions()` 在两者之后调用，`getOrigin()`并且`getDestination()`在没有嵌套回调的情况下完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:23:06.413

上面 user1689607 的回答对如何改进回调安排给出了很好的建议。

但是，我认为您可以进一步改进此代码，而不仅仅是使回调更清晰。一方面，使用骆驼案例和 jslint 它，然后：

```
// Use a closure/namespace for global abatement
MyNamespace = (function() {
  // Use a single 'var' declaration
  var originForm, 
      destinationForm, //assume string input from user
      destination, 
      origin;

  function init() {
    getOrigin();
  }

  //Gets origin data
  function getOrigin(){

     //ASYNC CALL
     model.searchFeature(origin_form, 1, function(data){
       //additional callback code excluded
       destination = data; 
       getDestination();

     });
  }

  //Gets destination information
  function getDestination(){
      //ASYNC CALL            
      model.searchFeature(destinationForm, 1, function(data){
          //additional callback code excluded
          destination = data;     
          directions(origin, destination);
      });
  }

  function directions(origin, destination){
    //Async call to request directions from google api
  }

  return {
    'init': init
  };
}());

MyNamespace.init(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T17:12:16.250

不要在共享范围内使用变量，只需*将*值从函数传递到函数。

```
var origin_form, destination_form; //assume string input from user

getOrigin();

function getOrigin(){
   model.searchFeature(origin_form, 1, getDestination);
}

function getDestination(origin){           
    model.searchFeature(destination_form, 1, function(data) {
        directions(origin, data);
    });
}

function directions(origin, destination){
    //Async call to request directions from google api
} 
```

* * *

或者使用`Function.prototype.bind`，您可以将其清理得更干净一些。

```
var origin_form, destination_form; //assume string input from user

getOrigin();

function getOrigin(){
   model.searchFeature(origin_form, 1, getDestination);
}

function getDestination(origin){  
    model.searchFeature(destination_form, 1, directions.bind(null, origin));
}

function directions(origin, destination){
    //Async call to request directions from google api
} 
```

传递给的第一个参数`.bind()`是`null`因为我不知道您是否想要设置的`this`值`directions()`。如果你这样做了，那么`null`用你想`this`成为的任何人来代替。

# jquery - ajaxSubmit uploadProgress 没有响应

> ID：13402624
> 
> 赞同：2
> 
> 时间：2012-11-15T17:08:10.817
> 
> 标签：jquery, ajax

关于选项 UploadProgress，我对`$(a).AjaxSubmit`of有疑问。`jQuery.Form`这是我的代码：

```
$("#ifrm").contents().find("form").ajaxSubmit({
    data: { " + datos + " },
    target: "#sbmt",
    forceSync: true,
    uploadProgress: function(event, position, total, percentComplete) {
        alert(percentComplete);
    },
    success: function(html, status) {},
    complete: function(xhr) {
        if (xhr.statusText == "OK") {
            eval(xhr.responseText)
        }
        else {
            msgbox("Error en el Formulario", "Se produjo un error al subir el archivo.", 1);
            return false;
        }
    }
}); 
```

警报永远不会出现。我需要进度条的事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T08:12:51.827

将 ajaxForm 插件更新到最新版本。问题将得到解决。

插件网址： http: [//malsup.com/jquery/form/](http://malsup.com/jquery/form/)

# asp-classic - ASP If 语句 if Split() 为空，因为我得到下标超出范围：'[number:1]'

> ID：13402625
> 
> 赞同：2
> 
> 时间：2012-11-15T17:08:13.843
> 
> 标签：asp-classic, outofrangeexception

我有一个表单字段，在用户注册时要求输入“全名”。然后我想将该字符串拆分为名字，然后是姓氏。我可以使用以下代码来实现它：

```
<%
If Request.Form("user[username]") <> "" Then
     NameStr = Request.Form("user[username]")
     Dim WordArray
     WordArray = Split(NameStr, " ")
End If
%> 
```

然后我可以将变量拆分为我的表单：

```
value="<%=WordArray(0)%>"
value="<%=WordArray(1)%>" 
```

但是，如果用户只是输入他们的名字，我会收到一个错误，因为 Split 正在寻找单词之间的空格以正确执行操作。我努力了：

```
<%
If Request.Form("user[username]") <> "" Then
    NameStr = Request.Form("user[username]")
    Dim WordArray
            If NameStr = "" Then
                    WordArray = Split(NameStr, "")
            Else
                    WordArray = Split(NameStr, " ")
            End If
End If
%> 
```

现在我知道这会失败，因为它永远不会是空白的，但是如果只有名字而没有姓氏，有没有办法查看拆分是否会出错？我已经查看了验证表单字段，但看不到确保它们之间有空格的方法。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T07:26:56.267

`Split`不是问题。如果字符串中没有空格，`Split`则不会抛出错误，但会返回一个只有一个元素的数组。`WordArray`你应该做的是检查使用`UBound`函数的上限：

```
Dim WordArray, firstName, lastName
WordArray = Split(NameStr, " ")

firstName = WordArray(0)
If UBound(WordArray) >= 1 Then
    lastName = WordArray(1)
Else
    lastName = ""
End If 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-15T17:41:11.407

这并不是真正的修复，但我管理了一些“老派”VBA 技术，它至少捕获了错误：

```
<%
If Request.Form("user[username]") <> "" Then
    NameStr = Request.Form("user[username]")
    Dim WordArray
        WordArray = Split(NameStr, " ")
        On Error Resume Next
End If
%> 
```

`On Error Resume Next`只是忽略错误并继续前进。肮脏的（就像 ASP 一样，但它有效！）。

# c# - XDocument.Root.Element 返回 null

> ID：13402628
> 
> 赞同：5
> 
> 时间：2012-11-15T17:08:22.220
> 
> 标签：c#, .net, xml, linq-to-xml

我有 XML，就像：

```
<?xml version="1.0" encoding="utf-16"?>
<RootNodeName xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"   xmlns:xsd="http://www.w3.org/2001/XMLSchema" MyAttribute="7" xmlns="mylink">
  <IsValid>false</IsValid>
  <Name>some matrix</Name>
  ...Some more nodes...
</RootNodeName> 
```

和代码是这样的：

```
var doc = XDocument.Parse(myXmlString);
Console.WriteLine(doc.Root.Element("Name")); 
```

并且控制台只显示一个空白区域，因为`doc.Root.Element("Name")`返回`null`=(

`doc.Root.Elements()`虽然我可以在结果 中找到这个元素。`doc.Root.Attribute("MyAttribute")`也给出正确的结果。

它/我有什么问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-15T17:10:46.477

该`<Name>`元素位于`mylink`命名空间中：

```
XNamespace mylink = "mylink";

Console.WriteLine(doc.Root.Element(mylink + "Name")); 
```

# ruby-on-rails - Rails：在应用程序控制器中声明的方法，但根据浏览器未定义

> ID：13402630
> 
> 赞同：0
> 
> 时间：2012-11-15T17:08:29.630
> 
> 标签：ruby-on-rails, forms, select, methods, undefined

...在orderscontroller#new中用于创建一个数组，该数组用于视图中表单字段的select方法，它应该添加一个新订单

你好，

所以我的错误是

> 路由错误
> 
> 未定义的局部变量或方法 `array_of_payment_types' for #

现在，我有一个表单的选择字段来提交新订单，但是我的浏览器不会加载包含表单的页面：

```
<div class="field">
    <%= f.label :pay_type %><br />
    <%= f.select :payment_type_id, Order::PAYMENTS_TYPES,
                 :prompt => 'Select a payment method' %>
</div> 
```

这是使用我尝试创建两次的数组：

```
class Order < ActiveRecord::Base

...
  belongs_to :payment_type

  **PAYMENT_TYPES = array_of_payment_types**

  validates :name, :address, :email
  validates :pay_type, :inclusion => { :in => PAYMENT_TYPES }

...

  **def array_of_payment_types
    PaymentType.pluck(:pay_type_name)
  end**
end 
```

和这里：

```
class OrdersController < ApplicationController

...

  def new
    @cart = current_cart
    if @cart.line_items.empty?
      redirect_to store_url, :notice => "Your cart is empty"
      return
    end

    **@PAYMENT_TYPES = array_of_payment_types**
    @hide_checkout_button = true
    @order = Order.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @order }
    end
  end

...

end 
```

而创建数组的方法，它从 :pay_type_name 列 Payment_Type 表中“提取”条目，在 order.rb 和 ApplicationController 中都声明了，这里：

```
class ApplicationController < ActionController::Base
  protect_from_forgery

  private

...

    def array_of_payment_types
      PaymentType.pluck(:pay_type_name)
    end 
end 
```

现在我正在尝试使用与我的应用程序的其他部分相同的过程，只是复制我已经完成的东西。例如，在 OrdersController#new 我有

> @cart = current_cart

current_cart 是在 ApplicationsController 中声明的方法，它可以工作。那么为什么 array_of_payment_types 也不起作用呢？

提前感谢您的帮助:-)

更多信息...

我想要做的是创建一个新订单，使用表单，表单中的一个字段输入“pay_type”（或英文支付类型）。我想向用户提供选项，该选项是从 PaymentType 表中的条目“提取”的列表，列 :pay_type_name （我可能会重复自己，但没有害处）。但是新订单是在 Order#new 操作之后创建的，这是我创建数组的地方。我应该在哪里/如何创建数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:18:13.943

`def array_of_payment_types`在您的 Order 类中定义了一个实例方法，并且您正尝试将其用作类方法。

我只是将 array_of_payment_types 定义为类方法，并在您的视图中调用 Order.array_of_payment_types 而不是常量 ARRAY_OF_PAYMENT_TYPES 。

您始终可以将其缓存在类方法中，无需为此使用常量。

```
def self.array_of_payment_types
   @array_of_payment_types ||= PaymentType.pluck(:pay_type_name)
end 
```

但是，考虑将支付类型数组的责任留在 PaymentType 类中。Order 类不应该是检索明显受另一个类控制的数据的联系点。

# jquery - jQuery Flot - 点未显示在 IE 中的图形上

> ID：13402636
> 
> 赞同：1
> 
> 时间：2012-11-15T17:08:47.710
> 
> 标签：jquery, flot

我已经为此苦苦挣扎了一段时间，但我似乎无法弄清楚。

如果您在 Chrome 中查看下面的 jsFiddle，图表上的点是可见的，但如果您在 IE9 中查看相同的 Fiddle，它们就不存在了。我已将数据简化为 2 点。

jsFiddle：http: [//jsfiddle.net/D4M4A/](http://jsfiddle.net/D4M4A/)

下面的代码：

```
$(function () {

var dataset = [
    { label: "% Personal Impact", data: [[1352937600000,68]], lines: { show: true } },
    { label: "# Responses", data: [[1352937600000,8]], yaxis: 2}    
];

$.plot($("#placeholder"),
    dataset,
    {
       yaxes: [ { max: 101, min: -0.1, tickSize: 20 }, { position: "right", min: -0 } ],
       xaxes: [ { mode: "time", minTickSize: [1, "day"], min: new Date('2012, 11, 01').getTime() } ],
       series: {
       lines: { show: true },
       points: { show: true }
    },
       grid: { hoverable: true, clickable: true }
});

}); 
```

感谢任何帮助。

艾伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:34:23.807

对于任何感兴趣的人来说，这个问题与不同浏览器 Date() 构造函数的工作方式有关。

这里有一个完整的列表，其中列出了哪些日期格式适用于哪个浏览器：

[http://dygraphs.com/date-formats.html](http://dygraphs.com/date-formats.html)

结果证明只有几种日期格式可以在所有浏览器中使用，我使用的不是其中之一。

我最终使用 dateString 2009/07/12

谢谢

# matlab - 如何从另一个矩阵的每个对应行中减去矩阵的每个项目

> ID：13402637
> 
> 赞同：1
> 
> 时间：2012-11-15T17:08:49.930
> 
> 标签：matlab, matrix, subtraction

```
A = [1 2 3; 7 6 5]
B = [3 7];
A-B = [1-3 2-3 3-3; 7-7 6-7 5-7];
ans =[-2 -1 0; 0 -1 -2] 
```

这是我想做的操作。除了迭代解决方案之外，我怎么能通过矩阵函数来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T17:39:29.683

使用 最方便地执行此操作`bsxfun`，它会自动扩展数组以匹配大小（因此您不需要使用`repmat`）。请注意，我需要转置`B`以使其成为 2×1 数组。

```
A = [1 2 3; 7 6 5]
B = [3 7];

result = bsxfun(@minus,A,B')

result =

-2    -1     0
 0    -1    -2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T21:03:27.667

我认为乔纳斯的回答是最好的。但只是为了记录，这里是使用显式的解决方案`repmat`：

```
A = [1 2 3; 7 6 5];
B = [3 7];

sz = size(A);
C = A - repmat(B', [1 sz(2:end)]); 
```

Jonas 的答案不仅更简单，而且对于我机器上的大型矩阵，它实际上快了 2 倍。

值得注意的是，在 A 是一个 nd 数组的情况下，这两种解决方案都做了一些非常合理的事情。该矩阵`C`将具有以下属性：

```
C(k,:,...,:) == A(k,:,...,:) - B(k) 
```

事实上，在 B 是 md 的情况下，Jonas 的答案会运行，并且很可能会做你想做的事，只要 和 的初始尺寸`A`具有`B'`相同的大小。您可以更改 repmat 解决方案以模仿这一点......此时您开始重新实现`bsxfun`！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T17:27:24.530

通常你不能。迭代解决方案将是必要的，因为问题定义不明确。矩阵加法/减法仅针对相同维度的矩阵定义。

IE：

```
A =         | 1 2 3 |
            | 7 6 5 |

B =         | 3 7 | 
```

从 2x3 矩阵中减去 1x2 矩阵是没有意义的。

但是，如果您将 B 乘以某个中间矩阵以使结果为 2x3 矩阵，则可以使用，即：

```
B' * Y =    | 3 3 3 |
            | 7 7 7 | 
```

例如：

```
B' =        diag(B)
   =        | 3 0 |
            | 0 7 |

B' * Y =    | 3 3 3 |
            | 7 7 7 |

Y =         | 1 1 1 |
            | 1 1 1 | 
```

因此，`A-B'*Y`给出了一个有效的、非迭代的解决方案。

```
A-(B'*Y) =      | 1 2 3 |  -  | 3 3 3 |
                | 7 6 5 |     | 7 7 7 |

         = A - (diag(B) * Y ) 
```

这里唯一的“欺骗”是使用`diag()`函数，它将向量转换为严格对角矩阵。有一种方法可以手动分解一组矩阵/向量乘法运算以手动重新创建`diag()`函数，但这比我上面的解决方案本身更有效。

祝你好运！

# python - 如何在 Python 中将变量重置为标准值

> ID：13402638
> 
> 赞同：0
> 
> 时间：2012-11-15T17:09:00.100
> 
> 标签：python, variables, set, standards, default

我正在开发一个将变量初始化为默认值的应用程序。

用户可以随时更改这些值。用户应该可以随时将部分或全部变量重置为默认值。

最好的解决方法是什么？

这将是一个解决方案，但我觉得它不是最理想的。你能告诉我我的感觉是否正确以及我怎样才能做得更好吗？

```
A_DEFAULT = "A_def"
B_DEFAULT = "B_def"
C_DEFAULT = "C_def"

class BusinessLogic_1(object):
    def __init__(self):
        self.setVariablesToDefault()
    def setVariablesToDefault(self, variableNames=None):
        # pass None to set all Variables to default
        variableNames = variableNames or ["A","B","C"]
        if "A" in variableNames:
            self.A = A_DEFAULT
        if "B" in variableNames:
            self.B = B_DEFAULT
        if "C" in variableNames:
            self.C = C_DEFAULT
    def printVariables(self):
        print  "A: %s, B: %s, C: %s" % (self.A, self.B, self.C)

if __name__ == "__main__":
    print "0: Initialize"
    businessLogic_1 = BusinessLogic_1()
    businessLogic_1.printVariables()

    print "Change A,B,C and then reset A,C"
    businessLogic_1.A = "A_new"
    businessLogic_1.B = "B_new"
    businessLogic_1.C = "C_new"
    businessLogic_1.printVariables() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T07:06:25.880

这可能是一个解决方案。这是一种将变量名称作为字符串传递，然后通过这些名称访问它们的方法。对象可以同时有多个名称，但名称总是指向一个对象（在给定的时间点）。

```
class classWithVariablesThatHaveDefaultValues(object):

    def __init__(self, some, example, variables, defaultValuesDict):
        self.some = some
        self.example = example
        self.variables = variables
        self.dictionaryWithDefaultValues = defaultValuesDict

    def resetValues(self, *listOfVariables):
        for variable in listOfVariables:
            for key in self.dictionaryWithDefaultValues:
                if key == variable:            
                    vars(self)[key] = self.dictionaryWithDefaultValues[key]

if __name__ == "__main__":

    defaultValuesDict = {"some":4, "example":5, "variables":6}
    exampleObject = classWithVariablesThatHaveDefaultValues(1, 2, 3, defaultValuesDict)
    exampleObject.some = 15
    print exampleObject.some, exampleObject.example, exampleObject.variables
    exampleObject.resetValues("example", "some")
    print exampleObject.some, exampleObject.example, exampleObject.variables 
```

输出是：

15 2 3

4 5 3

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T17:25:11.870

您可以通过与工作方式非常相似的方式实现它`decimal.localcontext()`，但根据您的用例，这可能不合适。这将允许您操作和调用反映更新值的原始对象上的任何方法，并在`with`块的末尾将它们重置为输入时的值。

```
from contextlib import contextmanager

class A(object):
    def __init__(self):
        self.a = 3
        self.b = 5
    def display(self):
        return self.a, self.b

a = A()

@contextmanager
def mycontext(obj):
    old_a = obj.a
    old_b = obj.b
    yield obj
    obj.a = old_a
    obj.b = old_b

print 'before:', a.display()
with mycontext(a) as obj:
    print 'entered:', a.display()
    a.a = 3
    a.b = 7
    print 'changed:', a.display()

print 'hopefully original', a.display()

before: (3, 5)
entered: (3, 5)
changed: (3, 7)
hopefully original (3, 5) 
```

# selenium - selenium 中的复选框和下拉框

> ID：13402642
> 
> 赞同：1
> 
> 时间：2012-11-15T17:09:28.973
> 
> 标签：selenium, selenium-rc, selenium-webdriver, selenium-ide

下面是我的代码

下面是一个标签。

```
 <TR id="oldcontent" bgcolor="#D0D0D0">
    <TD id="ignore" style="vertical-align:middle">      
    <input type="checkbox" name="selectedId" value="22047"onclick="updateSelectionList('<%=campaign.getId()%>')">
    </TD>
   <TD  id="oldcontent">Code</TD>
    <TD ALIGN="left" id="oldcontent">
    <select name="status" style="width=150" id="newcontentformat">
    <option value="14" selected="selected">text1</option>
    <option value="15">text2</option>
    </TD>
<TR> 
```

在这里 1) 我需要单击没有任何字符串的动态生成值的复选框。2）我可以根据复选框后面出现的文本“代码”来选择复选框吗？3）我需要在下拉列表中选择带有名称状态的 text2 4）最后的问题是这可以出现在网页中的任何位置，每次我运行测试用例时。所以我需要使用字符串“代码”检查复选框，第二次我需要从具有名称状态的下拉列表中选择值。还有其他具有相同名称状态的下拉框。那么我该如何具体做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T18:02:38.060

要在具有文本“代码”的行中获取选择列表，可以使用 xpath：

```
//tr[./td[text()='Code']]/td/select 
```

同样，对于复选框，您可以使用 xpath：

```
//tr[./td[text()='Code']]/td/input[@type='checkbox'] 
```

我相信你想要的硒代码是：

```
selenium.select("//tr[./td[text()='Code']]/td/select", "text2")
selenium.check("//tr[./td[text()='Code']]/td/input[@type='checkbox']") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T06:24:20.673

只要 HTML 中有可用的名称，您就可以使用 Name 来定位元素。

1.  对于单击复选框，您可以编写：

    ```
    selenium.click(//input[@name='selectedId']); 
    ```

2.  使用文本定位器去复选框应该是这样的：

    ```
    //div[text()='text you want to precede']/preceding::input[@name='selectedId']; 
    ```

    （在这里您可以使用任何属性而不是名称。）

3.  从 dropdowm 提取文本：

    ```
    selenium.select(//select[@name='status'],"text2"); 
    ```

如果您使用此类定位器（与位置无关），无论您的元素出现在屏幕上的哪个位置，您都可以借助这些定位器进行定位......

了解更多关于定位之前或之后的信息 下载电子书：Selenium.1.0.Testing.Tools.Beginners.Guide

# c++ - 为什么这个访问冲突

> ID：13402646
> 
> 赞同：0
> 
> 时间：2012-11-15T17:09:36.477
> 
> 标签：c++, pointers

我`access violation`在下面的代码中遇到错误..我已经在程序中指出了这一点。

```
void *pBuff = 0;

void set_data(void *pBuff)
{
    int value = 70, i;
    int *phy_bn = new int[8];

    for(i=0; i<8; i++)phy_bn[i] = value;

    pBuff =phy_bn;
    cout<<((int*)pBuff)[0];//..accessing 0th element value..no error here..gives 70 as result..
}

int main()
{
    set_data(pBuff);
    cout<<((int*)pBuff)[0];//acces violation error
    return 0;
} 
```

为什么即使我没有为它分配局部变量的地址也会出现访问冲突......

是的，我可以使用`vector`or `pass by reference`。

但我想知道**为什么 pBuff 没有被分配**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T17:12:01.590

*因为*它是在`set_data()`. 通过引用传递指针，以便调用者可以看到更改：

```
void set_data(void*& pBuff) 
```

请注意，函数变量`pBuff`隐藏了函数中的全局`pBuff`变量`set_data()`。

也就是说，我不确定`void*`为什么`vector<int>`不使用它为您处理所有动态内存分配的原因和原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T17:12:11.790

当你说

```
pBuff = phy_bn; 
```

您只是在更改 的局部值`pBuff`，而不是 的全局值`pBuff`。`pBuff`要么作为双指针传递，要么简单地删除函数的参数，就像`pBuff`全局一样。

```
void *pBuff = 0; /* This is the global pBuff, which isn't being changed */

void set_data(void *pBuff /* This is the local pBuff, which is being changed */)
{
    ...
    pBuff = phy_bn;
    ...
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T17:15:24.123

*'请我想避免双指针..它不需要我猜......'*

猜错了，**必填**！然后，您将需要`pBuff`参数的指针引用：

```
void set_data(void*& pBuff)
{
    // ...
} 
```

这实际上与使用双指针相同。

你唯一要做的事

```
pBuff =phy_bn; 
```

正在操作本地堆栈上的函数参数表示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T17:26:37.543

*在 C++ 中，指针是按值*传递的，与其他值类型相同。将指针视为字面上的整数类型可能具有指导意义。那么很容易看出为什么`pBuff = phy_bn;`没有完成任何事情，原因与这段代码没有完成任何事情的原因相同：

```
#include <iostream>

void set(int x) {
    x = 5;
}

int main(int argc, char** argv) {
    int y = 0;
    set(y);
    std::cout << y << '\n';
    return 0;
} 
```

这里，`x`是一个局部变量。它是 的*副本*，`y`而*不是* `y`自身。你可以通过赋值来改变它的值，当然，但你只是改变了一个变量的值，这个变量不会存在于`set()`. 如果您更改定义`set()`以使用引用：

```
void set(int& x) {
    x = 5;
} 
```

Then`y`确实会更新，因为您已明确要求将其作为您传递给的名称`x`的*别名*`set()`，而不是副本。您被名称误导了：`pBuf`in`set_data()`不是 in 中的同一个变量`pBuf`，`main()`即使它们碰巧具有相同的值；他们就像两个不同的人，有着相同的名字和相同的金额。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T17:12:48.623

内部不是全局`pBuff`的。全局的值永远不会从 0 改变。由于这是 C++ 代码，可以通过引用获取它的指针参数，并且分配给它会改变函数调用点的值。`set_data``pBuff``pBuff``set_data`

# html - 如何制作多个内联块元素来拉伸容器的整个宽度？

> ID：13402647
> 
> 赞同：14
> 
> 时间：2012-11-15T17:09:52.733
> 
> 标签：html, block, css

实现输入字段和按钮行为的最佳方式是什么，如下所示： ![在此处输入图像描述](../Images/9c6fdde5f6160069679f339809facfc7.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-15T18:13:04.547

我喜欢 ScottS 的答案，但只是有一个替代方案：您可以在 CSS 中使用类似表格的行为：

**CSS**

```
.formline{
    display: table;
}
.txt{
    display: table-cell;
    width: 100%;
}
input[type=text]{
    -moz-box-sizing: border-box; box-sizing: border-box;
    width: 100%;
}​ 
```

**HTML**

```
<div class=formline>
    <div class=txt>
        <input type=text>
    </div>
    <input type=submit value=submit>
</div> 
```

[http://jsfiddle.net/willemvb/VaFSP/](http://jsfiddle.net/willemvb/VaFSP/)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-15T18:03:05.130

是的，有一些 html 和 css 在and之间[使用了一些魔法](http://web.archive.org/web/20150618153020/http://colinaarts.com/articles/the-magic-of-overflow-hidden/?)，你[可以看到它在这个 fiddle 中工作](http://jsfiddle.net/CrHGD/8/)。`float``overflow: hidden`

**HTML**

```
<div class="container">
    <div>Some Text</div>
    <form>
        <button>MyButton</button>
        <div class="stretcher"><input type="text" /></div>
    </form>
</div> 
```

**CSS**

```
.stretcher {
    overflow: hidden;
}

button {
    float: right;
}

input {
    width: 100%;
} 
```

# spring - PropertiesPlaceholderConfigurer 子类可以检测到活动的 Spring 配置文件吗？

> ID：13402648
> 
> 赞同：0
> 
> 时间：2012-11-15T17:09:54.603
> 
> 标签：spring, spring-environment, spring-profiles

我们的配置文件有一个特定的格式，而不是有多个文件 - 即 dev.properties、uat.properties、prod.properties - 我们将所有值放在一个文件中，但每个环境用前缀分隔。例如：

服务端口=9800

DEV_SERVICE_PORT=7800

UAT_SERVICE_PORT=6600

我们有一个现有的类（PropertyPlaceholderConfigurer 的子类）查找这些值，并根据它正在执行的 IP 地址决定在 resolvePlaceHolder() 中添加什么前缀，即对于某个 IP 范围，使用 DEV_ 前缀，对于另一个，使用 UAT_ 前缀。然后这些值被传递给其他 bean，在某些情况下使用上下文 xml，在某些情况下使用某些 bean 构造函数上的 @Value${} 注释。前缀的使用是透明的，因此所有其他配置都将使用 SERVICE_PORT（在示例中）

我们想改变这一点，以便我们只检测活动的 Spring Profile 而不是使用 IP。我们的 web.xml 中有一个自定义的 ApplicationContextIniitalizer，它检测指示我们环境类型的 java System 属性。

我遇到的问题是，在调用 resolvePlaceHolder() 时，似乎还没有任何活动配置文件！我正在做的检测活动配置文件是：

1.  创建一个 StandardEnvironment 的实例
2.  调用 getActiveProfiles()

(2) 似乎总是返回一个空数组。这意味着属性占位符解析发生在任何 Spring 配置文件被激活之前。这个对吗？？

何时设置活动配置文件，与 Spring 上下文加载期间的其他事件相关，如创建 bean、加载属性文件等？

是否可以在调用 resolvePlaceHolder() 时检测到活动配置文件？我应该扩展另一个类吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:15:59.567

> 在 an 中管理的 Bean`ApplicationContext`可以注册为 `EnvironmentAware`或者`@Inject`Environment，以便直接查询配置文件状态或解析属性。

[来源：[`Environment`javadocs](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/core/env/Environment.html) ]

不要创建 的实例`StandardEnvironment`，将其注入到您的 bean 中！

# dropbox - 注定只能与一个 Dropbox 帐户交互的 Dropbox 应用

> ID：13402650
> 
> 赞同：3
> 
> 时间：2012-11-15T17:09:57.507
> 
> 标签：dropbox, dropbox-api, dropbox-php

我需要一个简单的网络表单，它还可以让人们上传一些 pdf。我想我可以做的（因为上传文件的大小和数量）是将这个应用程序的后端绑定到我的 Dropbox 帐户或我的 box.com 帐户。两种服务都提供类似的 API 来构建应用程序。

但是他们都假设我想与人们的保管箱/盒子帐户进行交互。我想我有点想要反过来。人们会将文件上传到网络服务器，但我想以编程方式将它们上传到这两个服务中的任何一个，但在我的帐户下，访问和权限仅与我的帐户相关。

用户根本不需要与 Dropbox 交互，他们不需要批准任何事情。为什么似乎无法使用 API 将文件添加到我拥有的同一个以前已知的保管箱帐户？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T19:25:28.647

虽然这不是预期用途，但基本想法是手动获取该帐户的授权访问令牌一次，然后保存并重复使用它以供将来所有调用使用。（请确保不要撤销它。）

这与管理多个用户的方式基本相同，只是每个用户只是重复使用相同的访问令牌，而不是他们自己的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T07:05:50.483

在某些情况下，我在使用 Facebook (FB) API 时遇到了类似的问题——我想要让我的*服务器*与 FB 对话以与*我的*帐户同步——但该 API 通常用于访问网站的人。

问题是，如果您尝试连接客户端，正如 API 通常预期的那样，您需要通过客户端脚本公开您自己的私人登录/凭证......这显然不是很好。

我使用的技巧是用一系列方法包装 API 服务器端，这些方法允许您执行所需的特定功能，然后允许您的 JS 或服务器端绑定异步调用这些方法。生成的流程图如下所示：

```
------            ----------                               -------
| UI | -> AJAX -> | Server | -> Async GET w/Credentials -> | API |
------            ----------                               ------- 
```

然后，您将数据返回到该`Server`级别并将其作为 JSON 返回到 UI - 瞧，您的 UI 没有凭据 - 但仍然可以访问您的 DropBox。

所以 - 对于您上传文件的示例......用户将文件发布到您的网络服务器。在该方法的服务器端处理程序上 - 只需获取发布的二进制信息，将其形成一个对您的下拉框的新 API 调用 - 进行身份验证（如果您还没有活动的经过身份验证的会话） - 然后发布。然后，您可以根据该调用的成功/失败向您的客户端返回信息。

我希望这有帮助。:) 需要一些脚手架 - 但这是可能的！有信心！

# javascript - 获取过滤元素的ID

> ID：13402652
> 
> 赞同：1
> 
> 时间：2012-11-15T17:10:02.110
> 
> 标签：javascript, jquery

我有多个共享一个类的元素。在任何给定时间，其中之一可能是可见的。我可以确定其中一个是可见的，但我如何获得它的 ID？

n 是被点击的元素的ID，1-4。我想查看 n 是否与可见元素的 ID 匹配，以便在匹配元素已经可见时不采取任何行动。如果您已经单击其中一个并使某些内容可见，则再次单击应该什么都不做。因此，c 中的哪个元素是可见元素 - 需要它的 ID。

```
function manageVisible(n) {
       var x = n, i, c;
       c = $('.glowSafe:visible');
       if(c.length !=0){
           c.fadeOut(300).hide();
           $('#glowSafe' + x).fadeIn(800);
       }
       $('#glowSafe' + x).fadeIn(800);
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:11:33.507

```
var theId = $('.glowSafe:visible').prop('id'); // jQuery >= 1.6
var theId = $('.glowSafe:visible').attr('id'); // jQuery <  1.6 
```

现在你可以使用上面的：

```
if (n !== theId)
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T17:11:07.970

要获取该类的可见元素的 ID：

```
var id = $('.glowSafe:visible').attr("id"); 
```

`c`或者，因为您已经在变量中拥有该元素：

```
c = $('.glowSafe:visible');
var id = c.attr("id"); 
```

# ios - 以 NSObjects 作为键的 NSDictionary

> ID：13402653
> 
> 赞同：-1
> 
> 时间：2012-11-15T17:10:05.370
> 
> 标签：ios, pointers, key, nsdictionary, nsobject

我正在尝试创建一个 NSDictionary 来跟踪函数的调用对象。我想为每个对象创建一个唯一的字符串，而对此一无所知。我的第一个想法是使用对象指针的内存地址，但我不知道该怎么做。

有什么想法吗？我需要使用 NSObject 中的某种唯一 id 作为字典中的键。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T17:31:17.017

如果您的应用程序支持 iOS6 仅检查`NSDictionaryOfVariableBindings`宏。

代码将类似于：

```
 // Create the dictionary
    NSObject *firstObject  = [NSString stringWithString:@"My first item"];
    NSObject *secondObject = @"[@"an", @"array", @"of", @"strings"]";
    NSDictionary *theDic   = NSDictionaryOfVariableBindings(firstObject, secondObject);

    // Access data
    NSString *singleString  = [theDic objectForKey:@"firstObject"];
    NSArray  *listOfStrings = [theDic objectForKey:@"secondObject"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T17:23:25.990

我的建议是不要使用字典。如果要将它们放入数组中，可以将其视为具有自动生成的唯一键（索引）的字典。这确实正是您所描述的。如果由于某种原因您必须使用字典，我的建议是实现我所说的相同模型，但您必须生成和维护密钥。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-15T17:28:57.027

虽然我同意您的解决方案听起来可能不是最好的方法，但您是否`-hash`在[`NSObject`协议](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html#//apple_ref/occ/intf/NSObject)中考虑过？都`NSObjects`应该返回一个。预先警告它是一个散列，所以两个不同的对象有可能具有相同的散列。

`NSObject`您还可以考虑您的集合实现的类别。该类别可以生成一个 UUID 用作键。

# sql - SQL DB表关系

> ID：13402655
> 
> 赞同：1
> 
> 时间：2012-11-15T17:10:10.690
> 
> 标签：sql, foreign-keys, relational-database

我正在尝试基于从非数据库系统导入的平面文件创建一个小型数据库。导入工作正常，数据库很好，但我添加了一个新表，其中包含来自另一个系统的数据。我正在尝试在表之间创建关系，但是因为一个表具有重复的行（平面文件是源），所以我无法设置该关系。示例：表 1 列出了医生为患者完成的所有程序。患者可以在同一天由同一位医生进行许多相同的程序（因此重复的行）...表 2 列出了医生和他们的 ID #s ...我想根据医生的姓名在两个表之间建立关系，但由于数据不唯一，我遇到了错误。有人有小费吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:53:57.980

> 患者可以在同一天由同一位医生进行许多相同的程序（因此重复的行）

通常，即使存在重复行，您也应该能够设置从 Table1 到 Table2 的外键关系。这种错误*通常*意味着您试图在错误的表中设置外键。

```
-- Your "Table2"
create table physicians (
  physician_id integer primary key,
  physician_name varchar(35) not null -- names are not unique
);

insert into physicians values 
(1, 'Doctor Who'), (2, 'Dr. Watson');

create table patients (
  patient_id integer primary key,
  patient_name varchar(35) not null -- names are not unique
);

insert into patients values
(100, 'Melville, Herman'), (101, 'Poe, Edgar Allen');

-- Your "Table1"
-- Allows multiple physicians per date.
create table patient_procedures(
  patient_id integer not null references patients (patient_id),
  physician_id integer not null references physicians(physician_id),
  procedure_date date not null default current_date,
  procedure_name varchar(15) not null,
  primary key (patient_id, physician_id, procedure_date, procedure_name)
);

insert into patient_procedures values
(100, 1, '2012-01-02', 'CBC'),
(100, 1, '2012-01-02', 'Thyroid panel'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:34:41.313

根据您的描述，我不确定重复数据问题在哪里。你有：

*   表 1：程序。同一位医生可能有很多行
*   表 2：医生。每个医生应该是 1 行（但可能有重复）

有意义的关系是 1[表 2 医生行] -> 许多[表 1 程序行]。即表 2 将是关系中的主键表：每个表 2 行与 0 和“许多”表 1 行之间相关。如果您尝试创建这种关系，那么多个重复的 table 1 行不是问题。

但是，如果表 2 中每个医生有多个行，那么您将无法创建这种关系，因为表 2 行不是唯一的，因此不能充当关系中的主键元素。那么问题是数据清理之一：找出表 2 中的哪些行是重复的，更新表 1 的行以指向重复中的一位医生，然后从表 2 中删除重复的行。

您提到了医生 ID#s 和医生姓名。医生姓名对于唯一键来说是一个不好的选择；如果用户尝试添加一个名为“John Smith”的新医生，而该名称已经有另一位医生，则

1.  您在 PhysicianName 上设置了唯一索引，他们的更改被拒绝，并且您有一个愤怒的用户；或者
2.  您还没有，所有现有医生（我们称他为 John A. Smith）的程序都将与另一位医生（我们称他为 John B. Smith）相关联，反之亦然。

应使用医师 ID 建立关系。如果表 1（程序）包含医师 ID 列，那么您很幸运。如果它只包括医生姓名，那么如果表 2 中已经有重复的医生姓名，那么您可能会遇到数据清理问题。

# mdx - 在 MDX 中获取日期范围的最后销售日期和销售额

> ID：13402656
> 
> 赞同：2
> 
> 时间：2012-11-15T17:10:11.933
> 
> 标签：mdx

我需要使用 SalesAmount 获取日期范围的 LastSalesDate。但以下 MDX 未按日期范围过滤。其他数据正常。

```
WITH MEMBER [Measures].[MaxSaleDate] 
    AS 
        TAIL(
            FILTER(
                [Date—Date].[Date].MEMBERS, 
                NOT ISEMPTY([Measures].[Sales])
            )
        ).ITEM(0).NAME

SELECT { [Measures].[MaxSaleDate], NONEMPTY([Measures].[Sales]) } ON COLUMNS,
       { [Store—Store].[Store].MEMBERS * [Store-NoOfDaysSales].[NoOfDays].MEMBERS } ON ROWS
FROM ( SELECT (  
           [Date—Date].[All Date—Date].[2012-10-14 00:00:00.000] :  
           [Date—Date].[All Date—Date].[2012-11-14 00:00:00.000]
       ) ON COLUMNS 
       FROM [Sales]) 
```

谢谢。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T20:52:53.857

您的过滤器语句正在选择日期维度中的所有日期，而不是过滤器。你的 where 也有一个不必要的子立方体。

```
WITH

MEMBER [Measures].[MaxSaleDate] AS
TAIL(FILTER([Date—Date].[All Date—Date].[2012-10-14 00:00:00.000] :
            [Date—Date].[All Date—Date].[2012-11-14 00:00:00.000],
            NOT ISEMPTY([Measures].[Sales])
            )
      ).ITEM(0).Name

SELECT { [Measures].[MaxSaleDate], NONEMPTY([Measures].[Sales]) } ON COLUMNS,
{ [Store—Store].[Store].MEMBERS * [Store-NoOfDaysSales].[NoOfDays].MEMBERS } ON ROWS
FROM [Sales]
WHERE [Date—Date].[All Date—Date].[2012-10-14 00:00:00.000] :
      [Date—Date].[All Date—Date].[2012-11-14 00:00:00.000] 
```

# sql - 计算列中所有出现的文本

> ID：13402661
> 
> 赞同：0
> 
> 时间：2012-11-15T17:10:18.753
> 
> 标签：sql, sql-server, sql-server-2005

我想计算列中特定单词的所有出现次数`varchar(200)`。

我的数据是这样的：

```
ID    MyText
---   --------------------------------------
1     Hello how are you doing? Hello again.
2     This is great.
3     Hello my special person. 
```

因此，我希望 SQL 执行类似 '%Hello%' 并返回数字 3。我现在不关心例如包含部分单词并且现在不关心通配符之类的。我只需要这个来进行一些简单的测试来验证一些事情。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T17:14:04.017

```
WITH T(ID,MyText) AS
(
SELECT 1, 'Hello how are you doing? Hello again.' UNION ALL
SELECT 2, 'This is great.' UNION ALL
SELECT 3, 'Hello my special person.'
)
SELECT *, 
       (LEN(MyText) - LEN(REPLACE(MyText, 'Hello', ''))) / LEN('Hello') AS Num
FROM T 
```

或者

```
SELECT  SUM((LEN(MyText) - LEN(REPLACE(MyText, 'Hello', ''))) / LEN('Hello'))
FROM T 
```

汇总结果

# php - 关于从数据库中获取 Joomla 文章

> ID：13402663
> 
> 赞同：1
> 
> 时间：2012-11-15T17:10:28.207
> 
> 标签：php, mysql, joomla

我使用这样的代码：

```
$query = "SELECT introtext FROM #__content WHERE alias = '$alias'";
$db->setQuery($query);
$fullArticle = $db->loadResult();
if(!strlen(trim($fullArticle))) $fullArticle = JText::_('ERR_ARTICLE_NOT_LOADED'); 
```

文章：`<p>1</p><p> </p><p>2</p>`
在数据库中：`<p>1</p><p> </p><p>2</p>`
但它返回：`<p>1</p><p>B </p><p>2</p>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T21:03:07.513

尝试使用以下代码，它是 Joomla 1.6+ 数据库查询方法。对我来说很好。

```
$db = JFactory::getDbo();
$alias = "";
$query = $db->getQuery(true);
$query->select('introtext')
 ->from('#__content')
 ->where('alias = '.(int) $alias);
$db->setQuery($query);
$fullArticle = $db->loadResult(); 
```

然后像这样回显它：

```
echo '<p>' . $fullArticle . '</p>'; 
```

起初我收到一个错误说`$alias`未定义，所以我只是在我的代码中将其定义为空，但是您可以将其更改为适合您需要的任何内容。

# python - 在 python 中，我如何获取 gtk 标签的大小（宽度、高度）？

> ID：13402665
> 
> 赞同：1
> 
> 时间：2012-11-15T17:10:28.677
> 
> 标签：python, gtk

我已经四处寻找，但找不到有效的答案。

```
element.get_allocation().y returns -1
element.get_allocation().height returns 1 
```

这是我用来创建标签的代码

```
item_link_summary = Gtk.Label(item_summary)
item_link_summary.show()
self.layout1.put(item_link_summary, 0, top)
print item_link_summary.get_allocation().y 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-23T15:46:22.757

如果您想知道标签需要多少空间，可以使用`size_request`返回元组的方法`(width, height)`。如果你想知道它被给予了多少空间，你必须等到它被实现。这意味着直到它和它的所有祖先，包括顶层窗口，都被显示出来。通常这意味着 after`window.show_all()`被执行。之后，您可以使用`label.get_allocation().width`和`label.get_allocation().height`。

# java - Java - 需要帮助来构建正则表达式模式

> ID：13402666
> 
> 赞同：0
> 
> 时间：2012-11-15T17:10:32.670
> 
> 标签：java, regex, parsing

我有一个字符串，我试图在其中提取特定的单词部分，并希望是否有人可以帮助我以一种安全的方式解析字符串以获得这部分。字符串的格式是这样的......

```
_____ _____ replied to _____ _____ about the **THIS IS THE PART I NEED TO GET** topic in the _____ forum. 
```

无论哪里有空白，任何单词都可能存在，我需要得到的部分也可以是任何长度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T17:16:33.670

这是一个匹配您发布的内容并提取您放入`**`组中的内容的正则表达式。

```
^.*replied to.*about the (.*) topic in the .* forum\.$ 
```

你可以[在这里](http://rubular.com/r/iTEsnsnapG)测试它。

非*贪婪*版本看起来像

```
^.*?replied to.*?about the (.*) topic in the .* forum\.$ 
```

你可以[在这里](http://rubular.com/r/jvATunsM1H)测试它。

这些是**RAW**正则表达式，对于 Java，您需要转义`\`with `\\`。

*与这里的大多数正则表达式问题不同，这个问题实际上非常适合正则表达式*

# java - jelastic cloud中的play框架部署

> ID：13402674
> 
> 赞同：0
> 
> 时间：2012-11-15T17:10:48.333
> 
> 标签：java, playframework, playframework-1.x, jelastic

在我目前的项目中，我用来玩！框架，现在我决定在 jelastic 云中发布我的应用程序。但每次我运行`play jelastic:deploy`控制台都会打印以下消息：

`~ Invalid command: jelastic:deploy`

PSIm 使用 Play！版本 1.2.4 ，遵循[本](http://blog.jelastic.com/2012/03/13/deploying-existing-play-applications-to-jelastic/)教程。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:28:17.077

[JElastic](http://blog.jelastic.com/2012/02/13/play-in-the-cloud/)上的原始教程概述了比您链接的步骤更多的步骤。

特别是，您必须安装 Play 插件！（步骤 3.4 及以下）：

```
…\play-1.2.4>play install jelastic
…\play-1.2.4>play new jelasticapp –-with=jelastic 
```

# actionscript-3 - 在 flash Professional 中将 .fla 发布到 .swf 后是否需要链接的 AS 文件？

> ID：13402680
> 
> 赞同：0
> 
> 时间：2012-11-15T17:11:09.297
> 
> 标签：actionscript-3, flash, publishing, fla

我想将外部 ActionScript 文件与我当前的 fla 项目文件链接起来，这样我就可以在 ActionScript 3.0 中使用 Adob​​e Flash Professional CS6 中的类。

但是我想知道一旦将 fla 文件发布到 swf 中，是否可以删除 AS 文件？

如果有人可以建议我如何在 Flash CS6 中创建类而不创建外部文件，那就更好了。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:40:52.330

当您发布 SWF 文件时 - 所有源代码（.as 类文件、库对象）都嵌入到 SWF 中。（运行时共享库​​或您在运行时加载的任何其他资产除外）。

这意味着您的 SWF 不依赖于那些 .as 文件来运行。

但是，如果您希望能够重新发布或编辑您的项目，那么您肯定需要那些 .as 文件。

对于 FlashPro，您不能创建嵌入在 .fla 中的类文件，它们必须是单独的 .as 文件。但是，您可以在 FlashPro 中编辑 .as 类文件。

# sql - 使用聚合和非聚合结果解码

> ID：13402681
> 
> 赞同：0
> 
> 时间：2012-11-15T17:11:09.893
> 
> 标签：sql, oracle10g

我正在尝试解码查询中的值。根据状态，我想返回`sysdate`或列的 MAX：

```
SELECT DECODE(t2.productstatus, 'Stores', SYSDATE, MAX(t1.actual_moveout))
  INTO v_last_moveout
  FROM rw_product_flow t1
  JOIN rw_product_master t2
    ON t1.facility = t2.facility
   AND t1.product = t2.product
 WHERE t1.facility = p_facility
   AND t1.product = p_product; 
```

但是，这会引发 ORA-00937 not a single-group group funciton 错误，因为 sysdate 不是聚合函数。在不编写详细的 IF 块的情况下实现此目的的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:35:36.710

您可以`Max`在没有 的情况下单独使用它`group by`，但是一旦您还需要其他信息，您就需要对数据进行分组。（这里的 MySQL 不同，在许多情况下为非分组列提供合理的默认值）

我的心理调试能力告诉我

```
GROUP BY t1.facility, t1.product, t2.productstatus 
```

会做你需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T19:39:15.223

试试这个：

```
SELECT DECODE(t2.productstatus, 'Stores', SYSDATE, MAX(t1.actual_moveout) over ())
  INTO v_last_moveout
  FROM rw_product_flow t1
  JOIN rw_product_master t2
    ON t1.facility = t2.facility
   AND t1.product = t2.product
 WHERE t1.facility = p_facility
   AND t1.product = p_product; 
```

我不是 100% 确定你可以在解码中嵌套一个窗口（又名分析）函数。如果这给您带来错误，则可以使用派生表轻松解决：

```
select DECODE(productstatus, 'Stores', SYSDATE, max_moveout)
from (
    SELECT t2.productstatus, 
           MAX(t1.actual_moveout) over () as max_moveout
      INTO v_last_moveout
      FROM rw_product_flow t1
      JOIN rw_product_master t2
        ON t1.facility = t2.facility
       AND t1.product = t2.product
     WHERE t1.facility = p_facility
       AND t1.product = p_product
) 
```

# nsis - 如何通过 NSIS 解压缩 zip 文件并自动执行文件夹中的 NSIS 脚本文件？

> ID：13402682
> 
> 赞同：-1
> 
> 时间：2012-11-15T17:11:08.597
> 
> 标签：nsis

我正在编写一个 NSIS 脚本来安装程序并放入文件夹。该文件夹通过 NSIS 压缩。我希望有人单击 zip 文件，然后将其解压缩并将 NSIS 脚本执行到文件夹中。但是怎么做？

更新：我再次解释。NSIS 有 NSIS 脚本的编译器和基于 ZIP 的安装程序！首先，我编写了一个 NSIS 脚本来在一个文件夹中安装一些程序。执行 NSIS 脚本正在运行！我不想发送文件夹，但我只想发送一个文件。所以我使用基于 ZIP 的安装程序来压缩文件夹。但是，如果我单击压缩文件，它将在桌面上解压缩，而不会将 NSIS 脚本执行到文件夹中。所以我必须将 NSIS 脚本单击到文件夹中。我不想要的！我只想单击压缩文件，它将被解压缩并自动执行 NSIS 脚本。清楚地？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T16:04:29.573

您的问题令人困惑，但我相信您想要做的是创建一个包含多个文件并运行的自解压存档，并且该存档中包含的 NSIS 安装程序已解压缩。

你可以用 7zip 做到这一点。

使用 dos 批处理文件最容易做到这一点。打开记事本并创建`"selfinstall.bat"`

添加以下内容；

```
(
  ECHO ;!@Install@!UTF-8!
  ECHO Title="My Installer"
  ECHO BeginPrompt="Do you want to run the installer?"
  ECHO ExecuteFile="Setup.exe"
  ECHO ;!@InstallEnd@!
) > temp.$$$ 
```

这将设置自解压器所需的信息，例如它的标题（我的安装程序）和要运行的可执行文件的名称（Setup.exe）

然后，添加行以创建您的 zip 文件

```
7z a -r files.7z myfolder 
```

其中 myfolder 是包含所有文件的文件夹的名称。

现在，添加安装程序 - 确保安装程序 (Setup.exe) 位于 .7z 文件的根目录中

```
7z a files.7z Setup.exe 
```

然后，将自解压器和 7z 复制到单个可执行文件中

```
copy /b 7z.sfx + temp.$$$ + files.7z "Install.exe" 
```

然后删除你的临时文件

```
del files.7z
del temp.$$$ 
```

我根据我在这里看到的脚本改编了这个；[http://www.911cd.net/forums//index.php?showtopic=18845](http://www.911cd.net/forums//index.php?showtopic=18845) 有关 .SFX 模块的更多信息，请参见此处；[http://7zsfx.info/en/](http://7zsfx.info/en/)

还有一个用于 GUI 的 sourceforge 项目来完成此任务；[http://sourceforge.net/projects/sfx-maker/](http://sourceforge.net/projects/sfx-maker/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T04:37:42.683

`.zip`文件无法执行代码。

注意：ZIP2EXE NSIS 工具在内部使用 makensis，它只是一个帮助应用程序，用于创建简单的安装程序。

# actionscript-3 - AS3 音频同步和预加载

> ID：13402684
> 
> 赞同：0
> 
> 时间：2012-11-15T17:11:20.780
> 
> 标签：actionscript-3

我有一个 swf 文件的视频，长度为 03:02（3 分 2 秒）4552 帧。现在在这个视频的不同时间我想同步 4 个音频文件。是否有可能同步视频上的所有声音？我的音频文件必须放在准确的位置。例如，第二个音频必须在 01:27:30 加载。我已将时间线扩展到 4552 帧 (03:02)，并且我在不同的帧中使用以下代码来加载我的音频文件：

```
var soundClip:Sound=new Sound();

//Create a new SoundChannel Object
var sndChannel:SoundChannel=new SoundChannel();

//Load sound using URLRequest
soundClip.load(new URLRequest("secondsound.mp3"));
sndChannel=soundClip.play(); 
```

如果有办法同步我的音频文件，是否有可能用所有声音和我的 .swf 文件预加载整部电影？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T20:42:58.013

跟踪 netstream 时间属性并在视频到达您想听到的时间时调用您的声音。

# python - pdb.set_trace() 是否总是覆盖错误回溯？

> ID：13402686
> 
> 赞同：3
> 
> 时间：2012-11-15T17:11:22.090
> 
> 标签：python, pdb

我有一个循环处理套接字，并且我设置了一个 pdb.set_trace() 断点来停止并检查每次循环调用 select.select() 的结果。但是，我的代码中的其他地方也存在错误，并且标准回溯似乎被 pdb.set_trace 覆盖。结果，当程序退出时，回溯指向紧跟在 set_trace() 之后的行，而不是包含错误的行。

有没有办法访问实际的回溯，或者 pdb.set_trace() 是否会破坏它？

这是相关的代码片段：

```
while True:
    read_socks, write_socks, _ = select.select(all_sockets, all_sockets, '')
    pdb.set_trace()

    if listen_socket.fileno() in read_socks:
        new_socket, address = listen_socket.accept()
        id_num = new_socket.fileno()
        all_sockets[id_num] = new_socket

    for id_num in write_socks:
        # do something that triggers an Assertion error 
```

然后我得到如下回溯：

```
Traceback (most recent call last):
  File "socktactoe_server.py", line 62, in <module>
    if listen_sock.fileno() in read_socks:
AssertionError 
```

这是一个简短的可重现测试用例；`c`运行它，每次有断点时命中，在第二次 continue 之后`assert`引发异常并报告错误的行：

```
import pdb
x = 0
while True:
    pdb.set_trace()
    y = "line of code not triggering an error"
    x += 1
    assert x != 3 
```

输出：

```
Traceback (most recent call last):
  File "minimal_pdb_traceback.py", line 7, in <module>
    y = "line of code not triggering an error"
AssertionError 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:49:26.117

看起来您在 Python`pdb`模块中发现了一个错误！我可以在 Python 2.7、3.2 和 3.3 版本中重现您的简单案例，而Python 2.4、2.5、2.6 或 3.1中*不存在该问题。*

乍一看，我在[python 错误跟踪器](http://bugs.python.org/)中没有看到预先存在的错误。请在那里报告您的问题，使用您的最小测试用例，以及可以在哪些 python 版本上重现它。

# ajax - 在 IE 中获取 AJAX 下载进度

> ID：13402687
> 
> 赞同：1
> 
> 时间：2012-11-15T17:11:21.950
> 
> 标签：ajax, internet-explorer

`*XMLHttpRequest*.responseText.length`除了获取 AJAX 请求的当前下载进度之外，还有其他方法吗？

我问这个是因为 IE 只是放弃了“数据尚不可用”错误。其他浏览器没有问题，但我希望至少能够给出一些进展迹象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:23:34.600

您应该为 IE 和其他浏览器定义单独的对象

```
if (window.XMLHttpRequest)
{
    req = new XMLHttpRequest();
    req.setRequestHeader('Content-Type', 'application/x-www-formurlencoded');
    req.send(data);
}    // branch for IE/Windows ActiveX version

else if (window.ActiveXObject)
{
req = new ActiveXObject('Microsoft.XMLHTTP');
.
.
.
} 
```

你知道有不止一个 xmlhttp

xmlhttp1.0 , 2.0 ,...

或者你可以做一个 try-catch 块

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T22:23:26.667

就 Internet Explorer 而言，该`progress`事件的支持[仅限于版本 10](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest#Events "XMLHttpRequest - 文档对象模型 (DOM) |  MDN")，但您没有指定版本……</p>

```
rq.onprogress = function(e) {
    if(e.lengthComputable) {
        progressElement.textContent = Math.floor(e.loaded / e.total * 100) + "%";
    }
}; 
```

# cordova - 如何在 Phonegap 中获取我的 www 目录的 DirectoryReader 句柄

> ID：13402694
> 
> 赞同：1
> 
> 时间：2012-11-15T17:11:51.183
> 
> 标签：cordova, filesystems, directory

有没有办法获取托管我的 index.html 的目录的句柄？

我需要以**通用**方式从我的 www 目录中获取文件。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T20:17:03.867

抱歉，www 目录不是文件系统的一部分，因此您不能使用 DirectoryReader 来获取文件列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T02:05:39.723

www 目录是应用程序包的一部分，因此是只读的 - 这意味着无需在运行时列出文件。

您需要的任何列表都可以在编译时包含在内，然后您可以使用 ajax 访问各个文件。

# expressionengine - 如何处理 Expresso Store 中不存在的 SKU

> ID：13402697
> 
> 赞同：2
> 
> 时间：2012-11-15T17:11:53.353
> 
> 标签：expressionengine, expresso-store

我正在为服装零售商使用 Expresso Store。有几个产品有颜色和尺寸选项，一般我认为商店在处理这些方面做得很好。但是，当我添加多个修饰符（例如黑色和红色，以及从小到大的尺寸）时，商店会自动为每个组合创建单独的项目，并且需要为每个组合输入一个唯一的 SKU。然而，该零售商库存了几件他们携带的一种颜色的各种尺寸的物品，但另一种颜色的尺寸有限，因此没有针对他们不携带该特定颜色的尺寸的 SKU。例如，他们的库存中可能包含以下内容：

红色 2 号 红色 4 号 红色 6 号 黑色 4 号 黑色 6 号

在这种情况下，如果我添加“Red”和“Back”作为颜色修改器的选项，并添加“2”、“4”和“6”作为尺寸修改器，Store 会自动创建所有可能的组合，包括黑色尺寸 2 ，他们不携带，也没有唯一的 SKU。在这种情况下，我的解决方法只是输入随机的数字/字母序列并将库存水平设置为零。

有没有更好的方法来处理这个？有没有办法在商店中表明零售商不携带某种组合？

我不确定这是否是一个常见问题，因为我猜测较大的零售商会以所有尺寸/颜色组合携带产品，因此在他们的系统中为每个产品都有唯一的标识符。但想传达这一点，因为它可能有助于一个好的产品变得更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T06:00:13.660

目前没有办法“禁用”某个 SKU，或将其从库存矩阵中排除。最好的解决方案可能就是您正在做的事情 - 只需制作一个 SKU，并将库存水平设置为 0，这将阻止其销售（并允许您在客户选择此组合时向他们显示消息）。

即使可以禁用 SKU，它也会使前端模板变得棘手，因为您需要动态更改选择下拉菜单中可用的选项（例如，当他们选择“黑色”在第一个下拉菜单中）。从用户体验的角度来看，这并不理想，因为客户可能想知道为什么尺寸 2 不是一个选项，并且没有意识到尺寸 2 可用于红色版本（所以实际上最好将它留在那里作为选项，但在他们选择时显示缺货消息）。

克服这个问题的另一个选择是只使用一个修饰符。这清楚地表明“黑色尺寸 2”不是一个选项。例如，只需使用以下选项创建一个名为“Style”的修饰符：

*   红色（2 号）
*   红色（4 号）
*   红色（6 号）
*   黑色（4 号）
*   黑色（6 号）

这样，您的客户只会在前端看到一个下拉菜单，并且不会让他们感到困惑。

# asp.net-mvc - 隐式使用 ASP.NET MVC DisplayTemplate

> ID：13402698
> 
> 赞同：1
> 
> 时间：2012-11-15T17:11:56.800
> 
> 标签：asp.net-mvc, asp.net-mvc-4, display-templates

我在cshtml视图中有一些这样的代码

```
@{  int i = 0;
    foreach (var record in Model.Records)
    {
    <tr>
        <td>@record.CreatedDate</td>
        <td>@Html.DisplayFor(x => x.Records[i].CreatedDate)</td>
    </tr>
        i++;
    }
} 
```

在我的 ~/Views/Display 文件夹中，我有一个名为 DateTime.cshtml 的文件，其中包含

```
<p>@ViewData.Model.ToShortDateString()</p> 
```

所以我的观点是渲染两个版本的 CreatedDate，一个带有完整的 DateTime 字符串，一个带有短日期字符串。

我是否可以将我的 ASP.NET MVC4 项目配置为在显示 DateTime 时使用我创建的显示模板，而不显式调用 DisplayFor？即“@record.CreatedDate”行如何使用我的 DateTime 模板？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T17:14:52.127

不，你不能。无法通过以下代码配置 MVC 以使用模板：

```
'@record.CreatedDate' 
```

顺便说一句，您将不得不继续使用`DisplayFor`它并不太写...

# java - while 循环中的 Thread.sleep() 不能正常工作？

> ID：13402703
> 
> 赞同：0
> 
> 时间：2012-11-15T17:12:11.060
> 
> 标签：java, multithreading, while-loop, sleep

该对象应该每 5 秒改变一次模式（运动算法）。我第一次尝试使用 while 循环，但循环的迭代速度太快了。然后我添加了`Thread.sleep(5000)`，但我的对象仍然只在一种算法中移动（`scatterMode`）。这是算法：

```
//LEVEL 1
//scatter for 7s 
//chase for 20s 
//scatter for 7s 
//chase for 20s 
//scatter for 5s 
//chase for 20s
//scatter for 5s 
//chase indefinite 
```

这是代码。如果您需要查看它们，构造函数和变量声明位于底部。

```
public void updateMode() throws InterruptedException {  
    while(ghostalive){
        if(seconds<7){
            Thread.sleep(100);
            mode = scatterMode;
        }
        if(7<seconds && seconds<27){
            Thread.sleep(5000);
            mode = chaseMode;
        }
        if(27<seconds && seconds<34){
            Thread.sleep(5000);
            mode = scatterMode;
        }
        if(34<seconds && seconds<54) {
            Thread.sleep(5000);
            mode = chaseMode;
        }
        if(54<seconds && seconds>59) {
            mode = scatterMode;
        }
        if(59< seconds && seconds<79){
            mode = chaseMode;
        }
        if(seconds>84){
            mode = scatterMode;
            ghostalive=false;
        }
        seconds++;
        ghostalive=false;
    }
}

private int seconds=0;
private boolean ghostalive=true;

protected static final int chaseMode = 0;
protected static final int scatterMode = 1;

static int mode = scatterMode; //initially ghost start in scatterMode

public Ghost(int x, int y, Maze maze) throws InterruptedException{
    super(x, y, maze);
    futureDirection = 0;
    timer = 0;
    updateMode();
    //chaseMode = false; 
    //frightenedMode = false;
}     

public static int getMode(){
    return mode;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T17:23:03.060

您的睡眠模式是毫秒和几秒的混合体，但您希望数秒。

尝试这样的事情：

```
while(ghostalive){

    if(seconds<7){
        mode = scatterMode;

    }

    if(7<seconds && seconds<27){
        mode = chaseMode;
    }

    if(27<seconds && seconds<34){
        mode = scatterMode;
    }

    if(34<seconds && seconds<54) {
        mode = chaseMode;
    }

    if(54<seconds && seconds>59) {
        mode = scatterMode;
    }

    if(59< seconds && seconds<79){
        mode = chaseMode;
    }

    if(seconds>84){
        mode = scatterMode;
        ghostalive=false;
    }

    seconds++;
    Thread.Sleep(1000);//Sleep for one second only

    //ghostalive=false; // Should this be here? Ghost is set to not alive after each loop?
} 
```

我在 if 语句之后移动了 sleep ，以便它在每个循环中保持一致。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T17:45:09.467

我认为您不应该依赖 Sleep 来测量时间，因为每次运行它时它的行为都会有所不同。线程可以休眠超过上述时间。睡眠仅将当前线程暂停特定时间。它不保证该线程将在同一时间后再次开始执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T17:26:43.360

不要从构造函数**调用**。`updateMode`

相反，启动一个新线程。

到目前为止，可能会发生以下情况：您的 Ghost 正在创建，在构造函数完成之前经历了他的*所有阶段。*然后当你的主程序启动时，你的幽灵已经`ghostalive=false`存在`scatterMode`了。

为了调试，放入很多*Loggin*语句。最好使用日志记录 API，但许多初学者更喜欢`System.out.println`. 仅打印您正在执行的操作是一个好习惯——即您将重影设置为哪种模式。

然后，当您还添加游戏计时器时，您应该很容易看到幽灵首先经历了他的所有状态，甚至在您的实际游戏开始之前（即“游戏已开始”日志记录也是必须的。

记录*并不*比打印更难。

```
// for each class, add such a line:
private static final LOG = java.util.logging.Logger.getLogger("packagename.classname");

static {
  // Configure the active logging level manually
  // For larger projects, use a .properties file!
  LOG.setLevel(java.util.logging.Level.ALL);
}

// inside of appropriate methods, use
if (LOG.isLoggable(Level.DEBUG)) {
  LOG.log(Level.DEBUG, "My ghost is now frightened.");
} 
```

`if`声明很重要。它可以通过热点很好地优化，因此如果禁用日志记录，则日志记录语句几乎没有成本。

好消息是您可以轻松地**打开和关闭**这些语句。虽然`System.out.println`您必须手动删除并读取您的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T17:24:16.183

当秒数正好是 7 或 34 或 54 时，...，没有条件处理这些情况。它只是不进入任何 if 语句。

# android - 强制关闭应用程序android

> ID：13402710
> 
> 赞同：-3
> 
> 时间：2012-11-15T17:12:28.187
> 
> 标签：android, android-intent

切换活动

```
 package com.example.tsabeh.pro;

import com.example.tsabeh.pro.R;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;

import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class BC extends Activity {
  int Count;
    TextView tx;
    Button a1,a2,a3,a4,a5,a6,a7,a8,a10;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.bc);

    tx=(TextView)findViewById(R.id.textView1);
    a1=(Button)findViewById(R.id.button1);
    a2=(Button)findViewById(R.id.button2);
    a3=(Button)findViewById(R.id.button3);
    a5=(Button)findViewById(R.id.button5);
    a6=(Button)findViewById(R.id.button6);

    a8=(Button)findViewById(R.id.button8);
    a10=(Button)findViewById(R.id.button10);
     Count=0;

    a1.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            Count ++;
            tx.setText(""+ Count);
        }
    });
     a1.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            Count ++;
            tx.setText(""+ Count);
        }
    });
      a2.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {
        // TODO Auto-generated method stub
        Count ++;
        tx.setText(""+ Count);
    }
});
    a3.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {
        // TODO Auto-generated method stub
        Count ++;
        tx.setText(""+ Count);
    }
});

      a5.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {
        // TODO Auto-generated method stub
        Count ++;
        tx.setText(""+ Count);
    }
});
     a6.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {
        // TODO Auto-generated method stub
        Count ++;
        tx.setText(""+ Count);
    }
}); 
```

a7.setOnClickListener(new View.OnClickListener() {

```
 public void onClick(View v) {
        // TODO Auto-generated method stub
        Count ++;
        tx.setText(""+ Count);
    }
}); 
```

a8.setOnClickListener(new View.OnClickListener() {

```
 public void onClick(View v) {
        // TODO Auto-generated method stub
        Count ++;
        tx.setText(""+ Count);
    }
}); 
```

a10.setOnClickListener(new View.OnClickListener() {

```
 public void onClick(View v) {
        // TODO Auto-generated method stub
        Count =0;
        tx.setText(""+ Count);
    }
});

} 
```

}

我的xml文件

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/aad"
android:orientation="vertical" 
android:weightSum="300"
>

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="99dp"
    android:layout_marginBottom="20dp"
    android:gravity="top|bottom|left|right|center_vertical|fill_vertical|center_horizontal"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="85dip"
        android:layout_height="70dip"
        android:layout_gravity="center"
        android:layout_marginLeft="20dp"
        android:textSize="50dp" />

    <Button
        android:id="@+id/button10"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/pic4" />

</LinearLayout>

<ScrollView
    android:layout_width="wrap_content"
    android:layout_height="316dp" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <Button
            android:id="@+id/button2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/pic2" />

        <Button
            android:id="@+id/button6"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/pic6" />

        <Button
            android:id="@+id/button4"
            android:layout_width="match_parent"
            android:layout_height="65dp"
            android:background="@drawable/pic4"
            tools:ignore="ObsoleteLayoutParam" />

        <Button
            android:id="@+id/button1"
            android:layout_width="316dp"
            android:layout_height="wrap_content"
            android:layout_weight="2.21"
            android:background="@drawable/pic1"
            tools:ignore="ObsoleteLayoutParam"/>

        <Button
            android:id="@+id/button7"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/pic7" />

        <Button
            android:id="@+id/button3"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/pic3" />

        <Button
            android:id="@+id/button5"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/pic5"
            tools:ignore="ObsoleteLayoutParam" />

        <Button
            android:id="@+id/button8"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="26dp"
            android:background="@drawable/pic8" />

      <Button
            android:id="@+id/button9"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/pic7"/>  
    </LinearLayout>

</ScrollView> 
```

日志

切换到此活动时强制关闭..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:17:31.073

按钮 a7 为空。并且您将 onClickListener 设置为空引用。所以我猜你有 NullPointerException 。发布堆栈跟踪以获取一些信息

# c# - asp.net webservices - 如何返回与“d”相同级别的参数

> ID：13402711
> 
> 赞同：2
> 
> 时间：2012-11-15T17:12:34.973
> 
> 标签：c#, asp.net, json, web-services

从 .NET 3.5 开始，返回 json 的 Web 服务将数据包装在名为“d”的参数中。我正在描述的功能已在其他地方记录[在这里。](http://encosia.com/a-breaking-change-between-versions-of-aspnet-ajax/)

我想知道是否有一种方法可以将参数添加到与“d”处于同一级别的 json 中。

所以借用上面的例子，如果我的一个网络服务的输出是

```
{"d":{"__type"    : "Person",
      "FirstName" : "Dave",
      "LastName"  : "Ward"}} 
```

我想要的是

```
{"d":{"__type"    : "Person",
      "FirstName" : "Dave",
      "LastName"  : "Ward"},
 "z":{"__type"    : "AnotherType",
      "Property"  : "Value"}} 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:16:56.777

虽然不建议以任何方式这样做。JSON 结果被包装为一项安全功能。

但是，如果您绝对需要，这里有一个解决方案：

在`[WebMethod]`您需要更改元素的地方添加

```
 Context.Response.ClearContent();
        Context.Response.Filter = new JsonHackFilter(Context.Response.Filter); 
```

`JsonHackFilter`在哪里

```
class JsonHackFilter : MemoryStream
{
    private readonly Stream _outputStream = null;

    public JsonHackFilter(Stream output)
    {
        _outputStream = output;
    }

    public override void Write(byte[] buffer, int offset, int count)
    {

        string bufferContent = Encoding.UTF8.GetString(buffer);

        // TODO: Manually manipulate the string here

        _outputStream.Write(Encoding.UTF8.GetBytes(bufferContent), offset,
                           Encoding.UTF8.GetByteCount(bufferContent));

        base.Write(buffer, offset, count);
    }       

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T22:15:24.847

我不相信有办法。Web 服务函数正在返回一个对象类型。即使您尝试让它返回 Object() 也会这样做 {"d":[Object 1..., Object 2...]}

如果您确实需要特定的输出格式，您可以编写一个通用处理程序，并让 ashx 页面以您想要的特定格式返回 json。

# java - 使用泛型进行协方差转换

> ID：13402720
> 
> 赞同：3
> 
> 时间：2012-11-15T17:13:19.197
> 
> 标签：java, generics, casting

在 Java 中，如果我有以下信息：`List.class, Map.class, Integer.class`和`foo`某个 Object. 可以投`foo`进去`List<Map<Integer, Integer>>`吗？我想不是因为类型擦除，而是想知道是否有另一种方法可以实现类似的东西。

编辑：提供更多上下文。我正在编写一个能够接受查询（由对象和指标组成）并输出所需指标的应用程序。一个例子是“列表中元素的总和”。客户端需要编写一个提供程序，将自己注册到应用程序并广播它能够为某些对象类型提供某种度量类型（例如列表的总和）。该应用程序在接收到查询后将匹配正确的提供者并`calculate`在其上调用该方法。

没有泛型，这很简单。任何对象实例的规范类型都是它的类。因此，我会将查询中的对象视为`Object`然后使用它`class`，找到一个能够提供该对象实例的提供程序。指标的类似情况。

现在介绍泛型...假设我将度量定义`f`为列表中元素的总和，如果元素是`Integer`，则产品是元素`Double`。我需要 2 个提供者，一个`List<Integer>`提供`List<Double>`. 但是由于类型擦除，我不能`class`直接使用规范类型。所以我存储了相关的类（`List.class`and`Integer.class`或`List.class`and `Double.class`）并使用类元组匹配提供者。

因此，在该`calculate`方法中，我需要执行从`Object`提供程序处理的适当类型的协变转换。

也许我对问题采取了错误的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T17:20:10.960

你会得到最接近的是：

```
List<Map<Integer, Integer>> fooList = List.class.cast(foo); 
```

由于不安全的转换和原始类型的使用，它会产生编译器警告，但它实际上是安全的（如果你知道你的 Object 包含它所说的内容）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T17:24:22.947

不是没有得到警告，AFAIK。

```
List<Map<Integer, Integer>> bar = (List<Map<Integer, Integer>>) foo; 
```

# maven - Maven聚合POM和并行构建

> ID：13402721
> 
> 赞同：0
> 
> 时间：2012-11-15T17:13:19.917
> 
> 标签：maven, build, maven-3, parallel-builds

在非并行构建期间，最后构建聚合 POM，前提是它与其子模块之间没有父子关系（如果我错了，请纠正我）。

在并行构建期间是否保留？我可以假设根 POM 是在其所有子模块都构建后构建的吗？根据构建日志，答案似乎是“否”，但也许我遗漏了一些东西。

如果答案是“否”，我如何确保最后构建聚合 POM？例如，我想在构建所有子模块（并行构建）之后运行程序集插件？当然，我可以运行单独的“mvn -N assembly:assembly”命令来组装构建的东西，但是在常规构建期间有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:10:43.823

如果您想让构建的顺序可预测，您需要定义一个多模块构建，其中包含模块之间的依赖关系，这些依赖关系将由 maven 自动解析，并正确更改反应堆中的构建顺序。

# c# - MVVM 嵌套列表滚动

> ID：13402724
> 
> 赞同：2
> 
> 时间：2012-11-15T17:13:30.850
> 
> 标签：c#, wpf, list, mvvm

我目前正在开发一个使用 MVVM 在 WPF 中编写的数据驱动编辑工具。主要显示是视图模型的可滚动列表，其中一些（不是全部）具有自己的子视图模型的内部列表（不可滚动）。问题在于，其中一种视图模型类型是数组类型，其中包含添加新子项的功能，我们希望这样做，以便如果您使用它，它会将整个列表滚动到该新项。有没有一种合理的方法可以使用 MVVM 来做到这一点？

为了让您了解当前如何设置此 UI，这是整体显示：

```
<Grid ScrollViewer.VerticalScrollBarVisibility="Auto">
  <Label Content="{Binding Path=DisplayName}" Height="28" HorizontalAlignment="Left" Margin="4,4,0,0" VerticalAlignment="Top" />
  <ItemsControl IsTabStop="False" ItemsSource="{Binding Path=VMEntries}" Margin="12,25,12,12" ItemTemplateSelector="{StaticResource EntryTemplateSelector}" ScrollViewer.VerticalScrollBarVisibility="Auto">
    <ItemsControl.Template>
      <ControlTemplate>
        <ScrollViewer x:Name="ScrollViewer">
          <ItemsPresenter />
        </ScrollViewer>
      </ControlTemplate>
    </ItemsControl.Template>
  </ItemsControl>
</Grid> 
```

这是我们正在使用的数组条目的数据模板：

```
<DataTemplate x:Key="Array">
  <Grid Margin="2,7,0,0">
    <Label Content="{Binding Path=DisplayName}" ToolTip="{Binding Path=Tooltip}"/>
    <Button Content="Add" HorizontalAlignment="Right" VerticalAlignment="Top"  Height="24" Width="24" Command="{Binding Path=AddCommand}"/>
    <ItemsControl HorizontalAlignment="Stretch" IsTabStop="False" ItemsSource="{Binding Path=SubEntries, NotifyOnSourceUpdated=True}" Margin="10,24,0,0" >
      <ItemsControl.ItemTemplate>
        <DataTemplate>
          <Grid HorizontalAlignment="Stretch">
            <Grid.ColumnDefinitions>
              <ColumnDefinition Width="Auto" />
              <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <Button Name="RemoveButton" Grid.Column="0" Margin="0,5,0,0" Content="Del" HorizontalAlignment="Right" VerticalAlignment="Top"  Height="24" Width="24" Command="{Binding Path=RemoveCommand}" CommandParameter="{Binding Path=.}"/>
            <ContentControl Grid.Column="1" Content="{Binding Path=.}"  ContentTemplateSelector="{StaticResource EntryTemplateSelector}" />
          </Grid>
          <DataTemplate.Triggers>
            <DataTrigger Binding="{Binding Path=RemoveHandler}" Value="{x:Null}">
              <Setter Property="Visibility" TargetName="RemoveButton" Value="Collapsed"/>
            </DataTrigger>
          </DataTemplate.Triggers>
        </DataTemplate>
      </ItemsControl.ItemTemplate>
    </ItemsControl>
  </Grid>
</DataTemplate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T20:54:19.840

MVVM 的理想不是在后面添加代码，但对于一些复杂的事情，更简单的方法是添加它。在某些情况下，如果您想在应用程序上添加复杂的行为并保留 MVVM，另一种方法是使用行为（允许使用并从 XAML 绑定的 c# 代码）。您还可以使用 AttachedProperties 定义行为并注册到 PropertyChanged 事件。另一种选择是创建一个 UserControl 并将代码添加到它后面。

在您的特定情况下，内部集合在向其中添加项目时必须引发一些事件，然后在您的外部集合中执行类似这样的操作`list.ScrollIntoView(itemToScroll);`。希望这可以提供一些提示。

# c# - 粘贴到文本框中会破坏后端电子邮件构造

> ID：13402726
> 
> 赞同：0
> 
> 时间：2012-11-15T17:13:44.037
> 
> 标签：c#, asp.net, html, asp.net-mvc, email

我遇到了一个我什至无法合理化的最奇怪的问题。我有一个带有几个文本框的表单，其中一个是评论框：

MVC：

```
<div class="contactUsTextArea">
    Comments or Questions:<br />
    @Html.TextAreaFor(x => x.Comments, new { maxlength = 990 } )
</div> 
```

呈现的 HTML：

```
<div class="contactUsTextArea">
    Comments or Questions:
    <br>
    <textarea id="Comments" rows="2" name="Comments" maxlength="990" cols="20"></textarea>
</div> 
```

提交表单后，此代码运行：

```
public bool SendEmail(ContactUsModel formSubmission) {
    MailMessage email = new MailMessage();
    SmtpClient smtp = new SmtpClient();
    string upc = formSubmission.ProductUpcCode;
    string comments = formSubmission.Comments;
    string comments_small = formSubmission.Comments;

    if (!string.IsNullOrEmpty(formSubmission.ProductUpcCode) && upc.Length > 14 )
        upc = upc.Substring(0, 13);

    if (!string.IsNullOrEmpty(comments) && comments.Length > 990)
        comments = comments.Substring(0, 989);

    if (!string.IsNullOrEmpty(comments_small) && comments_small.Length > 255)
        comments_small = comments_small.Substring(0, 254);

    string bodyText = "FIRST_NAME:" + formSubmission.FirstName + "\n" +
                        "LAST_NAME:" + formSubmission.LastName + "\n" +
                        "COMPANY:" + formSubmission.CompanyName + "\n" +
                        "ADDRESS:" + formSubmission.StreetAddress + "\n" +
                        "CITY_TOWN:" + formSubmission.City + "\n" +
                        "STATE_PROVINCE:" + formSubmission.Province + "\n" +
                        "ZIP_POSTAL:" + formSubmission.PostalCode + "\n" +
                        "COUNTRY:CAN\n" +
                        "EMAIL:" + formSubmission.Email + "\n" +
                        "PHONE:" + formSubmission.PhoneNumber + "\n" +
                        "UPC:" + upc + "\n" +
                        "DATE_CODE:\n" +
                        "BRAND_PRODUCT:" + formSubmission.ProductName + "\n" +
                        "COMMENTS:" + comments_small + "\n" +
                        "FULL_COMMENTS:" + comments + "\n" +
                        "LANGUAGE:English" + "\n" +
                        "OPTIN:N";
    email.From = new MailAddress(ConfigurationManager.AppSettings["emailSubmission_FROM"]);
    email.To.Add(new MailAddress(ConfigurationManager.AppSettings["emailSubmission_TO"]));
    email.Subject = ConfigurationManager.AppSettings["emailSubmission_SUBJECT"];
    email.IsBodyHtml = false;
    email.Body = bodyText;
    email.BodyEncoding = System.Text.Encoding.UTF8;

    smtp.Send(email);            
    return true;
} 
```

（不要问我为什么需要小评论和大评论，客户就是客户）

无论如何，我的问题是当我在评论框中输入评论时，我得到了这个回报：

[http://i.imgur.com/zraNy.png](http://i.imgur.com/zraNy.png)

但是，当我复制粘贴文本时，我得到了这个回报：

[http://i.imgur.com/doWrw.png](http://i.imgur.com/doWrw.png)

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:24:22.867

这可能是（我能想到的）只有几件事——两者都与客户有关。

*   与电子邮件客户端有关的东西，它没有呈现`\n`它应该呈现的样子。尽管对于 Windows，`\r\n`这是标准，但许多应用程序都不能正确地尊重 ' `\n`'。我会尝试将其用于换行符，而不仅仅是`\n`.
*   还有一些与客户端有关的东西，与编码有关（但我对此表示怀疑）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T19:32:42.793

好吧...所以我将发布我的问题的图片...然后我将永远躲在山洞里。

[http://i.imgur.com/tEiKj.png](http://i.imgur.com/tEiKj.png)

感谢大家的帮助。

# c - 矩阵乘法与 mpi

> ID：13402727
> 
> 赞同：3
> 
> 时间：2012-11-15T17:13:47.200
> 
> 标签：c, parallel-processing, mpi, matrix-multiplication, openmpi

我是并行编程的新手。我正在尝试将两个矩阵相乘。我将问题划分如下：

假设操作为 mat3 = mat1 x mat2 我将 mat2 广播到通信器中的所有进程，并切出 mat1 的行并将它们分散到通信器组中的进程。在所有进程都有整个 mat2 和 mat1 的相应条带之后，它们将条带与 mat2 相乘，然后我使用该过程的本地结果进行收集操作，并将整个结果累加到根进程中。

我想知道在通用计算机中将两个矩阵相乘是否有更好的分区问题。

我的实现是在 OpenMPI 中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T18:05:58.540

关于矩阵乘法的文献中有多种算法可以扩展到 MPI 范式。例如：

```
> 1Dsystolic [1] 
> 2D-systolic, Cannon’s algorithm [2];
> Fox’s algorithm [3];
> Berntsen’s algorithm [4];
> DNS algorithm [5]. 
```

如果您忽略矩阵属性（稀疏等），它基本上会恢复数据在进程之间的分布方式，以最大限度地减少同步和负载不平衡（每个进程之间分配的工作量）。

在[最近的这项工作](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&cad=rja&ved=0CC8QFjAB&url=http://www.ier-institute.org/2070-1918/lnit23/v23/065.pdf&ei=EC2lULjlJsLNhAfs8YG4DQ&usg=AFQjCNGWBQDThenkHucn3rgX8UMxNVMmRw&sig2=BHyc_53ihxQkz1acXRdzFg)中，您可以看到两种不同的数据分布方法以及它们之间的比较。

文件：

```
[1] Golub G.H and Van C.H L., “Matrix Computations.”,Johns Hopkins University Press, 1989.
[2] Whaley R. C., Petitet A., Dongarra J. J., “Automated empirical optimizations of software and the ATLAS project” Parallel Computing 27, 1.2 (2001), 3.35.
[3] Fox G. C., Otto S. W., and Hey A. J. G., “Matrix algorithms on a hypercube I:
Matrix multiplication”,Parallel Computing, vol. 4, pp. 17-31\. 1987.
[4] Berntsen J.,“Communication efficient matrix multiplication on hypercubes, Parallel Computing”, vol. 12, pp. 335-342, 1989.
[5] Ranka S. and Sahni S., “Hypercube Algorithms for Image Processing and Pattern Recognition”, Springer- Verlag, New York, NY, 1990. 
```

# html - Xpath 选择文本并给出项目符号列表 html

> ID：13402730
> 
> 赞同：0
> 
> 时间：2012-11-15T17:13:48.573
> 
> 标签：html, xpath, web-scraping

好的，我尝试进行一些网页抓取，我知道如何选择网站的一部分、段落、类……现在，是否可以选择文本，提取它并将其放在 HTML 之间。

例子：

```
This is first paragraph.
This is second paragraph. 
```

我想把它当作一个要点列表。

```
<ul>
    <li>This is first paragraph</li>
    <li>This is second paragraph.</li>
</ul> 
```

或者在 div 中

```
<div id="first">This is first paragraph</div> 
<div id="second">This is second paragraph.</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:48:26.990

您不能在 XPath 中创建 dom 元素，但可以进行一些字符串操作。

例如，如果您选择示例的 XPath 表达式是“//p[1]”和“//p[2]”，则可以创建如下列表：

```
concat(
"<ul>",
   "<li>", //p[1],  "</li>",
   "<li>", //p[2], "</li>",
"</ul>") 
```

（假设段落文本不包含 < 或 & 等特殊字符）

还有 XQuery，它就像 XPath 的扩展，您可以在其中编写：

```
<ul>
    <li>{//p[1]}</li>
    <li>{//p[2]}</li>
</ul> 
```

创建该html。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T17:53:08.633

尝试使用函数 tokenize 然后使用 xsl:for-each; 你应该没问题。

检查[http://www.w3schools.com/xpath/xpath_functions.asp#string](http://www.w3schools.com/xpath/xpath_functions.asp#string)和[http://www.xml.com/lpt/a/1205](http://www.xml.com/lpt/a/1205)

# sql - SQL Server：检查值“IS NULL”还是“= integer value”的优雅方式

> ID：13402732
> 
> 赞同：0
> 
> 时间：2012-11-15T17:13:49.510
> 
> 标签：sql, syntax, null

我有一个表，其中包含一些代码单元（用于索引目的）和一个“值”单元（我感兴趣的数据所在的位置），类似于以下内容：

```
 column:      datatype:

  code1         int
  code2         int
  code3         int
  code4         int
  attributes    varchar(max) 
```

我正在检查添加到此表的存储过程中的一些输入代码，并且添加的约束是我的 INPUT 代码（@code1、@code2、@code3、@code4）可以等于某个值或者它们可能为空, 但与表中某些匹配行中的相同。

说出以下陈述的最佳方式是什么：

```
 SET @targetAttributesCell = (SELECT attributes FROM MyTable
                               WHERE (code1 = @code1)
                                 AND (code2 = @code2)
                                 AND (code3 = @code3)
                                 AND (code4 = @code4)); <-- where code1/@code1 'IS NULL' or = '[some integer]'? 
```

提前致谢。如果我需要更清楚，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T17:31:41.540

干得好：

```
WHERE ISNULL(Code4,SomeInteger)=SomeInteger 
```

如果 Code4 为空，它将匹配整数。如果 Code4 匹配整数，它将匹配整数。如果 Code4 是任何其他整数，它将不匹配。

编辑

你还需要这张支票吗？您的表中是否有 NULL 值？如果是这样，那么 NULL 参数将匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-23T14:18:50.963

就我而言，它有效。特别是如果您将零视为一个值。

ISNULL(cast(@FirstInt as varchar),'')<>ISNULL(cast(@SecondInt as varchar),'')

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-15T17:19:13.317

试试这个...

```
SET @targetAttributesCell = (SELECT attributes FROM MyTable
                               WHERE ( @code1 IS NOT NULL and code1 = @code1)
                                 AND (@code2 IS NOT NULL and code2 = @code2)
                                 AND (@code3 IS NOT NULL and code3 = @code3)
                                 AND (@code4 IS NOT NULL and code4 = @code4)); <-- where code1/@co 
```

# java - 在运行时隐藏和显示面板

> ID：13402742
> 
> 赞同：0
> 
> 时间：2012-11-15T17:14:41.160
> 
> 标签：java, swing, panel

我试图在运行时显示和隐藏面板，所以我从另一个类调用方法：

```
Con.Action(1); 
```

到这个方法：

```
 public void Action(int whichPanel) {
    if (whichPanel == 1) {
        if (frame.Data.isVisible()) {
            frame.Data.setVisible(false);
            // frame.splitPaneSec.remove(frame.Data);
        } else {
            System.out.println(".....");

            //frame.Data.setVisible(false);
            frame.Data.setVisible(true);
            //frame.getContentPane().validate();
                            //frame.revalidate();
                            //frame.repaint();
            //frame.pack();
        }
    } 
```

到目前为止，我可以隐藏一个面板，但是一旦隐藏它就无法再次显示它。我尝试了很多方法，其中一些被注释掉了。
任何帮助表示赞赏，欢呼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:18:54.780

我想我宁愿删除并添加回来。

```
parent.remove(dataPanel);
parent.validate();
parent.repaint();

parent.add(dataPanel);
parent.validate();
parent.repaint(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T17:41:41.873

我强烈建议您对这样的任务使用枚举：

```
public void Action(int whichPanel) {
    if (whichPanel == 1) {} 
//Better;
public void Action(enumType myPanel){
    if(myPanel == enumType.LoginScreen){} 
```

与`

```
public enum enumType
{
    LoginScreen,EditScreen //...
}` 
```

如果您直接在要显示的面板上执行 setVisible 方法，则可以隐藏和显示枚举：

```
public void showLoginScreen()
{
    loginPanel.setVisible(true);
    registerMenu.setVisible(false);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T16:47:01.587

问题是因为在将组件设置回`visible` 它之后需要`GUIClass.splitPane.setDividerLocation(157);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-25T10:48:55.590

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseEvent;
import java.awt.event.MouseMotionListener;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLayeredPane;
import javax.swing.JPanel;
import javax.swing.Timer;
import javax.swing.border.EtchedBorder;
import javax.swing.border.TitledBorder;

public class HidePanel extends JFrame {

    private static final int PANEL_HEIGHT = 50;
    private static final int INITIAL_PANEL_WIDTH = 50;
    private static final int TIMER_INTERVAL = 1;
    private static final int PIXEL_DELTA = 2;
    private Dimension panelDimension = new Dimension(INITIAL_PANEL_WIDTH, PANEL_HEIGHT);
    private int vertOffset = -PANEL_HEIGHT;
    private Timer showTimer = new HidePanel.ShowPanelTimer();
    private Timer hideTimer = new HidePanel.HidePanelTimer();

    static JLayeredPane lpane = new JLayeredPane();
    JPanel panel = new JPanel();

    public HidePanel() {
        setBackground(Color.BLACK);

        setLayout(null);

        panel.setBounds(1200, 50, 100, 600);
        panel.setBorder(new TitledBorder(new EtchedBorder(), "Hide"));
        panel.add(new JButton("Click Me"));
        lpane.add(panel);//, //new Integer(0), 0);

        add(panel);

        addMouseMotionListener(new MouseMotionListener() {
            public void mouseDragged(MouseEvent e) {
            }

            public void mouseMoved(MouseEvent e) {
                final int height = e.getY() - 100 ;

                if (height < 50 && !showTimer.isRunning() && !panel.isVisible()) {
                    showTimer.start();
                } else if (height > PANEL_HEIGHT + 5 && !hideTimer.isRunning() && panel.isVisible()) {
                    hideTimer.start();
                }
            }
        });
    }

    public static void main(String args[]) {

        HidePanel h = new HidePanel();
        h.setSize(1350, 700);
        h.setVisible(true);
        h.add(lpane, BorderLayout.CENTER);
    }

    private void positionPanel(final int offset) {
        int panelWidth = getWidth();

        System.out.println(" offset = " + offset);

        panelDimension.setSize(panelWidth, PANEL_HEIGHT);

        //panel.setBounds(insets.left, offset + insets.top, size.width, size.height);
    }

    private class ShowPanelTimer extends Timer implements ActionListener {

        ShowPanelTimer() {
            super(TIMER_INTERVAL, null); 
            addActionListener(this);
        }

        public void start() {
            vertOffset = -PANEL_HEIGHT;
            panel.setVisible(true);
            super.start();
        }

        public void actionPerformed(ActionEvent e) {

            if (vertOffset <= 0) {
                positionPanel(vertOffset);
            } else {
                showTimer.stop();
            }

            vertOffset += PIXEL_DELTA;
        }
    }

    private class HidePanelTimer extends Timer implements ActionListener {

        HidePanelTimer() {
            super(TIMER_INTERVAL, null); 
            addActionListener(this);
        }

        public void stop() {
            panel.setVisible(false);
            super.stop(); 
        }

        public void actionPerformed(ActionEvent e) {

            if (vertOffset >= (-PANEL_HEIGHT)) {
                vertOffset -= PIXEL_DELTA;
                positionPanel(vertOffset);
            } else {
                hideTimer.stop();
            }
        }
    }
} 
```

# c++ - 使用带有 std::unique_ptr 的模板时出现奇怪的链接器错误

> ID：13402744
> 
> 赞同：2
> 
> 时间：2012-11-15T17:14:46.620
> 
> 标签：c++, templates, linker-errors

> **可能重复：**
> [为什么模板只能在头文件中实现？](https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file)

我已经尝试了 2 天来解决这个问题。

这是我得到的链接器错误：

```
main.cpp:17: undefined reference to `std::unique_ptr<Foo, std::default_delete<Foo> > Bar::make_unique_pointer<Foo>()' 
```

下面的代码演示了我遇到的问题。

**酒吧.h**

```
class Bar {
public: 
    template <class T>
    std::unique_ptr<T> make_unique_pointer();
}; 
```

**条形图.cpp**

```
#include "Bar.h"

template <class T>
std::unique_ptr<T> Bar::make_unique_pointer() {
    return std::unique_ptr<T>(new T());
} 
```

**主文件**

```
#include "Bar.h"

struct Foo {};

int main() {
    Bar bar;
    auto p = bar.make_unique_pointer<Foo>();  
    return 0;
} 
```

但是，如果我内联定义函数，它可以工作

```
class Bar {
public:
    template <class T>
    std::unique_ptr<T> make_unique_pointer() {
        return std::unique_ptr<T>(new T());
    }
}; 
```

或者，如果我将定义放入`main.cpp`或什至`Bar.h`其中，它将编译得很好。

当它们位于单独的文件中时，我只会收到链接器错误：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T17:16:17.410

函数模板必须在创建它们的同一文件中实现。[请参阅此答案以了解原因](https://stackoverflow.com/questions/3749099/why-should-the-implementation-and-the-declaration-of-a-template-class-be-in-the)。

# algorithm - 寻找类似的已知问题

> ID：13402746
> 
> 赞同：2
> 
> 时间：2012-11-15T17:15:01.737
> 
> 标签：algorithm, complexity-theory, graph-algorithm, minimum-spanning-tree, proof

我试图证明这个优化问题的计算机复杂性：
给定一个连通图 G = (V, E) 和一个集合 S ⊊ V。找到一个连通子图 G'= (V', E')：

```
Min f(G')
Min |V'| 
```

主题：

```
S ⊊ V’
V’ ⊆ V 
```

当并非所有顶点都必须包含在树中时，它看起来像是最小生成树问题的概括。是否有一个已知问题可以通过归约来证明这个问题的复杂性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T04:39:44.850

你的问题表述并不是说你在优化什么——首先是 f(G') 并且在那个 Min|V'| 内，或者反过来，或者两者以某种方式结合。

如果您在成本边缘上进行优化，那么它就是 Steiner 最小树 (SMT) 问题和 NP 完全问题。如果您在 |V'| 上进行优化，您可以使用以下方法在多项式时间内将 SMT 减少到它：

让节点 u 和 v 之间的边 (u,v) 具有成本 k。用以下路径替换这条边：

```
(u, i_1), (i_1, i_2), ..., (i_k, v) 
```

因此这条路径上每条边的成本为 1。您将成本 (u, v) 的边替换为一条带有 k-1 个中间节点的路径，并且每条边的成本为 1。

对图上的每条边执行此操作。它将 SMT 减少到您的问题，并证明您在 |V'| 上进行了优化 是NP完全的。你的减少需要

```
O(C*|V|^2) 
```

时间，其中 C 是图中边成本的上限。

刚看到问题。希望能帮助到你。

# mediaelement.js - 在 mediaelements.js 中跳转到 Flash 后备帧

> ID：13402751
> 
> 赞同：1
> 
> 时间：2012-11-15T17:15:16.950
> 
> 标签：mediaelement.js

使用 Flash 后备时是否可以跳转时间帧？这是我的例子。这适用于 HTML5，但不适用于 Flash 版本。

```
<script type="text/JavaScript">

MediaElement('player1', {success: function(me) {

    me.play();

    me.addEventListener('timeupdate', function() {
        document.getElementById('time').innerHTML = Math.round(me.currentTime);
    }, false);

    document.getElementById('pp')['onclick'] = function() {
        if (me.paused)
            me.play();
        else
            me.pause();
    };

    $('body').on('click', '#jumpTo', function(){

        console.log('clicked');

        var jumpTo = 15;
        me.currentTime = jumpTo;
        me.play();

        return false;
    });

}});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T20:00:57.057

您需要使用该`setCurrentTime()`功能。该`currentTime`属性只能用作吸气剂。

像这样做：

```
me.setCurrentTime(jumpTo); //Time in seconds 
```

它在项目网站的[API 部分进行了描述，您还可以在其中找到所有其他 API 调用。](http://mediaelementjs.com/#api)

# java - Java让球反弹，它留下了痕迹？

> ID：13402752
> 
> 赞同：0
> 
> 时间：2012-11-15T17:15:21.267
> 
> 标签：java

我对java很陌生，我正在写一个乒乓球游戏。我已经让球移动（这是我的首要任务）并让它出现在屏幕上。但是由于某种原因，它在它后面留下了一条黑线，我不知道我是否应该删除这个或什么，但这是我的 2 个类的代码（Ball 类只是一个保存球信息的类）

```
import java.awt.Canvas;
import java.awt.Color;
import java.awt.Graphics;
import java.awt.image.BufferStrategy;
import javax.swing.JFrame;

public class Main extends Canvas implements Runnable{
    private static final long serialVersionUID = 1L;

    public static int Width=650;
    public static int Height=600;
    public boolean Running=false;
    public Thread thread;
    public Ball ball = new Ball();

    public static void main(String[] args){
      Main game = new Main();
      JFrame frame = new JFrame();
      frame.setSize(Width+25, Height+49);
      frame.setTitle("Pong By Poo");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.setResizable(false);
      frame.setVisible(true);
      frame.setLocationRelativeTo(null);
      frame.add(game);
      game.start();
    }

    public void start(){
      if(Running==true){
        return;
      } else {
        Running=true;
        thread = new Thread(this);
        thread.start();
      }
    }

    public void run(){
      while(Running==true){
        try{
          Thread.sleep(5);
          Draw();
          Update();
          ball.YVelocity();
          ball.XVelocity();
        } catch(Exception e){}
      }
    }

    public void Draw(){
      BufferStrategy bs = this.getBufferStrategy();
      if(bs==null){
        createBufferStrategy(2);
      } else {
        Graphics g = bs.getDrawGraphics();
        g.setColor(Color.BLACK);
        g.fillOval(ball.BallLocationX, ball.BallLocationY, 20, 20);
        g.dispose();
        bs.show();
      }
    }

    public void Update(){
      if(ball.BallLocationX==0) {
        ball.BallMovementX=true;
        System.out.println("Ball has hit the Left");
      }
      if(ball.BallLocationX==Width) {
        ball.BallMovementX=false;
        System.out.println("Ball has hit the Right");
      }
      if(ball.BallLocationY==0){
        ball.BallMovementY=true;
        System.out.println("Ball has hit the Top");
      }
      if(ball.BallLocationY==Height){
        ball.BallMovementY=false;
        System.out.println("Ball has hit the bottom");
      }
    }
  }

import java.awt.Color;
import java.awt.Graphics;
import javax.swing.JPanel;

public class Ball extends JPanel{
  public int BallLocationX;
  public int BallLocationY;
  public boolean BallMovementY; //true makes the ball go up, false makes it go down
  public boolean BallMovementX; //True makes the ball go right, false makes it go left.

  public void paintComponent(Graphics g){
    super.paintComponent(g);
    g.setColor(Color.BLACK);
    g.fillOval(BallLocationX, BallLocationY, 10, 10);
  }

  //moves the ball left to right
  public int YVelocity(){
    if(BallMovementY==true){
      BallLocationY++;
    } else {
      BallLocationY--;
    }

    return BallLocationY;
  }

  //Moves the ball up and down
  public int XVelocity(){
    if(BallMovementX==true){
      BallLocationX+=2;
    } else {
      BallLocationX-=2;
    }

    return BallLocationX;
    }
} 
```

请帮忙！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T17:25:13.387

从本质上讲，您的球移动的任何地方都会永久保留`Color.BLACK`在您的`Canvas`. 如果你想摆脱它，你需要在每次球移动时刷新并重新绘制`Canvas`to `Color.WHITE`（或其他），然后再绘制球的位置。

具体来说，在这里查看您的代码：

```
public void Draw(){
  BufferStrategy bs = this.getBufferStrategy();
  if(bs==null){
    createBufferStrategy(2);
  } else {
    Graphics g = bs.getDrawGraphics();
    g.setColor(Color.BLACK);
    g.fillOval(ball.BallLocationX, ball.BallLocationY, 20, 20);
    g.dispose();
    bs.show();
  }
} 
```

这里没有任何逻辑会覆盖您之前对`Canvas`指示球位置所做的更改。

此外，作为一个小问题，Java 标准将在`camelCase`.

并回答评论中的问题：[Canvas API](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Canvas.html)中没有任何内容可以自动理解您想要的默认背景，`Canvas`并且可以将所有其他图形属性重置为该属性。但是，要获得此功能，您需要做的就是在将球的位置绘制在其顶部之前，重新绘制默认布局（无论是一种颜色，还是基本背景图像或其他任何东西）。

# actionscript-3 - 如何在 Flash 和 AS3 中查看和下载 pdf

> ID：13402756
> 
> 赞同：1
> 
> 时间：2012-11-15T17:15:30.547
> 
> 标签：actionscript-3, flash, pdf, flash-cs5

我正在创建一个 Flash 网站，我想实现一个 pdf 文件查看器（下载文件按钮），以便当用户单击该按钮时，该人可以在浏览器中查看 pdf 文件，但我不确定如何在Actionscript 3.0，关于如何做到这一点的任何简单代码？

帕特里克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T17:34:04.423

你试过[柔性纸](http://flexpaper.devaldi.com/default.jsp)吗？它对开源项目也是免费的。

# sql-server - windows上的django-pydobc SQL server连接问题

> ID：13402761
> 
> 赞同：9
> 
> 时间：2012-11-15T17:15:46.147
> 
> 标签：sql-server, django, windows, django-pyodbc

我和另一位开发人员正在另一台服务器上使用旧版 SQL 服务器数据库 (SQLEXPRESS) 设置 django (v1.4.2) 项目。到目前为止，我们已经能够使用 django-pyodbc 从 linux 和 mac 连接到数据库，并使用 django-mssql 从运行 Windows 7 的笔记本电脑连接到数据库。我想在笔记本电脑上使用 django-pyodbc 来保持环境同步。

在笔记本电脑上：

*   pyodbc (3.0.6) 已安装并且在非 django .py 脚本中我可以连接并运行 sql 语句
*   通过下载zip下载django-pyodbc 1.4；我不确定我是否安装正确：
    *   我解压缩了文件，并在顶层目录中运行了 setup.py 文件；它将 sql_server 目录放在 /lib/site-packages 目录中
*   将此 sql_server 目录复制到 /django/db/backends
*   创建了一个指向 /django/db/backends/sql_server 的 PYTHONPATH 环境变量
    *   不确定它是否应该指向 /site-packages/sql_server ？
*   创建了 ODBC 数据源（系统 DSN）
    *   测试连接选项是否有效
*   将 settings.py 中的 DATABASE 条目编辑为几乎与 linux 版本完全相同（详情如下）

所以，它不起作用，我收到以下错误消息，不知道下一步该怎么做：

```
('08001', '[08001] [Microsoft][ODBC SQL Server Driver][DBNETLIB]SQL Server does not exist or access denied. (17) (SQLDriverConnect); [01000] [Microsoft][ODBC SQL Server Driver][DBNETLIB]ConnectionOpen (Connect()). (53); [01S00] [Microsoft][ODBC SQL Server Driver]Invalid connection string attribute (0)') 
```

我像这样设置 django settings.py 文件：

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sql_server.pyodbc',
        'NAME': 'test',
        'USER': 'test',
        'PASSWORD': 'something_else',
        'HOST': 'mssqlx',
        'PORT': '12345',
        'OPTIONS': {
            'driver': 'SQL Server',
        },
    },
} 
```

在 linux 上，我的设置文件有一个 DATABASES 条目，如下所示：

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sql_server.pyodbc',
        'NAME': 'test',
        'USER': 'test',
        'PASSWORD': 'something_else',
        'HOST': 'mssqlx',       # ODBC DSN defined in /etc/freetds.conf
        'PORT': '12345',        # Probably unneeded.  Set in mssqlx
        'OPTIONS': {
            'driver': 'SQL Server',  # ODBC driver name in /etc/odbcinst.ini
            'extra_params': "TDS_VERSION=7.0"  # Probably unneeded.  Set in mssqlx
        }
    },
} 
```

不知道它是否有助于解决这个问题，但是使用 django-mssql （仅在 Windows 上运行），（工作）条目是：

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlserver_ado',
        'NAME': 'test',
        'USER': 'test',
        'PASSWORD': 'something_else',
        'HOST': '199.555.0.10',         # changed for this example
        'PORT': '12345',
        'OPTIONS': {'provider': 'SQLOLEDB'}
    },
} 
```

不知道其他信息可能会有所帮助。感谢您提供的任何帮助或见解。

----POST MORTEM ----这是最终奏效的：

数据库设置中的部分条目：

```
 'default': {
        'ENGINE'    : 'django.db.backends.sql_server.pyodbc',
        'NAME'      : 'test_db_name',
        'USER'      : 'test_db_user_name',
        'PASSWORD'  : 'password',
        # ODBC DSN defined in /etc/freetds.conf
        'HOST'      : 'mssql_test',
        # Ignored for Windows; Required for Linux
        'OPTIONS'   : {
            # ODBC driver name in /etc/odbcinst.ini
            'driver': 'SQL Server',
            # NOTE: dsn option is added dynamically later, for Windows
        }
    },

# The ODBC DSN name specified above as DATABASES.default.HOST is ignored on
# Windows, where it must be specified as DATABASES.default.OPTIONS.dsn instead.
# However, we haven't found a way to make DATABASES.default.OPTIONS.dsn work in
# Linux (and probably the same for Mac).  It causes the error:
#    Data source name not found, and no default driver specified 
# Therefore we add it here, but only for Windows.
# Note: The username and pwd in the windows dsn file is apparently NOT used
#       (b/c server hosts both test and prod database in same MSSQL
#       instance, both test and prod dsn files happen to work - they have the
#       same ip address and port number, but different username/password's)
#
# On 64-bit Windows, with our current 32-bit version of pyodbc, the DSN
# must be created via:
#    C:\Windows\SysWOW64\odbcad32.exe
# instead of the regular "ODBC Data Sources" app in Control Panel, which 
# invokes:
#    C:\Windows\system32\odbcad32.exe
#
#   os.name is...
#       nt      for Hans' laptop (Windows 7)
#       posix   for the "Amazon Linux AMI" (CentOS) on AWS
#       posix   for Fred's Mac
if os.name == 'nt':      # Windows
    DATABASES['cf']['OPTIONS']['dsn'] = 'mssql_test' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-22T19:36:31.350

尝试使用[https://github.com/michiya/django-pyodbc-azure](https://github.com/michiya/django-pyodbc-azure)。这应该适用于 Linux 和 Windows。

然后像这样定义您的数据库设置：

```
DATABASES = {
    'default': {
        'ENGINE': 'sql_server.pyodbc',
        'NAME': 'dbname',
        'HOST': 'dsn_entry',
        'PORT': 'port',
        'USER': '',
        'PASSWORD': 'pass',
        'OPTIONS': {
            'driver': 'FreeTDS',
            'dsn': 'dsn_entry',
            'host_is_server': True
        }
    }
} 
```

在 Windows 下，`'driver'`输入`OPTIONS`应该是：

```
'driver': 'SQL Native Client', 
```

编辑：哎呀，没看到你已经解决了这个问题。在这里留下我的答案作为参考。

# visual-studio-2012 - 视觉工作室 2012 最近的项目丢失

> ID：13402767
> 
> 赞同：3
> 
> 时间：2012-11-15T17:16:19.453
> 
> 标签：visual-studio-2012

在 Windows 任务栏和开始菜单中，最近打开的项目/解决方案列表为空白。但是，在 VS 中，常规选项被标记为显示 10 个项目。该列表曾经显示，但最近我注意到它消失了。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T14:19:03.613

我遇到了完全相同的问题，但我感觉其他菜单项也丢失了。

我所做的是进入工具 => 导入和导出设置，选择重置所有设置，然后选择与我安装 Visual Studio 时相同的配置文件。（一般开发设置。）这解决了这个问题。

# java - 如何将字符串从 Java (Android) 导出到 MS Word

> ID：13402768
> 
> 赞同：2
> 
> 时间：2012-11-15T17:16:19.110
> 
> 标签：java, android, string, ms-word, export

我想知道如何将键入的字符串导出到 word 文档文件。

我正在尝试制作的应用程序应该很简单；用户在他的 Android 手机上有他的应用程序，他输入了一些文本。

它将有很少的 PlainText 和 MultilineText 文本字段，用户可以在其中输入任何他想要的内容。

因此，当用户将他的手机连接到计算机时，他应该能够单击某个按钮并“生成报告”。这样，他输入的所有文本都应转换为 word doc。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T17:21:43.487

您将需要为 Microsoft Office 使用某种 java 库。为此，请查看[Apache POI](https://poi.apache.org/)。这是使用 Apache POI[的示例](https://www.coderanch.com/how-to/java/CreateWordDocument)。

作为旁注，我还建议用户不必将他们的设备实际连接到计算机，而是使用导出功能来创建 Word 文档，然后他们可以通过电子邮件发送或在其他地方共享方法。这将改善您的用户体验:)

# infragistics - Infragistics UltraWinGrid - 如何使单元格只读但同时具有 UltraCombo 下拉列表

> ID：13402769
> 
> 赞同：1
> 
> 时间：2012-11-15T17:16:20.903
> 
> 标签：infragistics, ultrawingrid, ultracombo

我有一个 UltraWinGrid，其中有一列我已将 UltraCombo 下拉列表绑定为 EditorControl。我希望用户只从这个下拉列表中选择一个选项，我不希望他们在网格单元格中输入文本，或者剪切/粘贴文本。如何使单元格只读，但同时允许用户从下拉列表中选择一个选项？我在网上找到的所有答案都说如何完全禁用单元格，这不是我想要的。

```
private void LoadItems()
{
    DataTable dtt = new DataTable();
    dtt.Columns.Add("Int", typeof(int));
    dtt.Rows.Add(2);
    dtt.Rows.Add(3);
    dtt.Rows.Add(4);

    uc.DropDownStyle = UltraComboStyle.DropDownList;

    uc.SetDataBinding(dtt, null);
}

void myGrid_Grid_InitializeLayout(object sender, Infragistics.Win.UltraWinGrid.InitializeLayoutEventArgs e)
{
  myGrid.Grid.DisplayLayout.Override.RowSelectors = Infragistics.Win.DefaultableBoolean.False;
  e.Layout.Bands[0].Columns["aaa"].ValueList = uc;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T16:21:52.877

我想我想通了。我使用了这个，它似乎到目前为止工作：

```
 e.Layout.Bands[0].Columns["aaa"].Style = Infragistics.Win.UltraWinGrid.ColumnStyle.DropDownList; 
```

# javascript - 当当前页面没有加载 jQuery 时，为什么我可以在 Chrome 的 JS 控制台中使用 jQuery 语法？

> ID：13402776
> 
> 赞同：4
> 
> 时间：2012-11-15T17:16:46.847
> 
> 标签：javascript, jquery, google-chrome

我认为必须先加载 jQuery 源才能用于`$`定位元素。我在一个甚至不包含任何脚本的网页上，但不知何故我能够`$('body')`在 Javascript 控制台中运行，并且 Chrome 成功返回了它的值。

为什么我没有收到类似“未定义令牌”的语法错误？谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-15T17:52:51.367

以前，Chrome`document.getElementById`对`$`变量有一个别名。

[最近](https://bugs.webkit.org/show_bug.cgi?id=92648)（可能在 Chrome 23 版本上），它已更改为`document.querySelector`.

所以你的代码相当于`document.querySelector('body')`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T17:36:56.893

正如@Shmiddty 在评论中已经提到的那样，这可能是由于您安装了一个插件......

您可以通过运行开发者工具找到答案，选择“Sources”并查看“Sources”和“Content Scripts”窗格——在某处是否有可疑的 jQuery 之类的东西？

# c# - wcf https ssl 中的服务端点出错。找不到与绑定 WebHttpBinding 的端点的方案 http 匹配的基地址

> ID：13402777
> 
> 赞同：4
> 
> 时间：2012-11-15T17:16:55.993
> 
> 标签：c#, wcf, silverlight, ssl, https

我的服务器中有以下代码

```
<services>
  <service name="ME.Streets.WebGateway.DuplexService.DuplexService"
     behaviorConfiguration="sb">
    ....
    <endpoint
        address=""
        binding="webHttpBinding"
        behaviorConfiguration="webHttpEndpointBehavior"
        contract="ME.Streets.WebGateway.DuplexService.Interface.IPolicyRetriever"/>
     ....
    <host>
    <baseAddresses>
      <add baseAddress="https://localhost:10201" />
    </baseAddresses>
    </host>
  </service> 
```

我一直在使用 SSL 和 WCF 将 silverlight 应用程序切换到 HTTPS，但是如果我运行我的服务器，我收到以下错误

```
- System.InvalidOperationException: Could not find a base address that matches
 scheme http for the endpoint with binding WebHttpBinding. Registered base address     
 schemes are [https]. 
```

我非常不确定这个错误来自哪里。我必须在`<baseaddress>`节点内安装 https`<service>`节点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T23:04:34.427

固定的！

将端点更改为此（添加 bindingConfiguration="webHttpsBinding"）：

```
<services> .....
        <endpoint
            address=""
            binding="webHttpBinding"
            behaviorConfiguration="webHttpEndpointBehavior"
            bindingConfiguration="webHttpsBinding"
            contract="ME.Streets.WebGateway.DuplexService.Interface.IPolicyRetriever">
        </endpoint>
......
</services> 
```

而新的绑定配置如下：

```
<bindings>....
    <webHttpBinding>
    <binding name="webHttpsBinding">
        <security mode="Transport">
            <transport clientCredentialType="None" />
        </security>
    </binding>
</webHttpBinding>
......
</bindings> 
```

这为端点提供了与 http 绑定的绑定，该绑定指定了传输信息的路径以及连接用户必须拥有的凭据类型

# android - 显示 DialogFragment 动画从一个点开始

> ID：13402782
> 
> 赞同：102
> 
> 时间：2012-11-15T17:17:20.640
> 
> 标签：android, android-fragments, android-animation

`DialogFragment`当用户点击 a 中的一行时，我正在显示a `ListView`。我想为对话框的显示设置动画，使其从行的中心开始增长。从启动器打开文件夹时可以看到类似的效果。

我的一个想法是`TranslateAnimation`和的组合`ScaleAnimation`。还有其他方法吗？

* * *

## 回答 #1

> 赞同：188
> 
> 时间：2012-11-24T00:33:51.797

作为该类`DialogFragment`的包装器`Dialog`，您应该为您的基础设置一个主题以`Dialog`获得您想要的动画：

```
public class CustomDialogFragment extends DialogFragment implements OnEditorActionListener
{
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) 
    {
        return super.onCreateView(inflater, container, savedInstanceState);
    }

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) 
    {
        // Set a theme on the dialog builder constructor!
        AlertDialog.Builder builder = 
            new AlertDialog.Builder( getActivity(), R.style.MyCustomTheme );

        builder  
        .setTitle( "Your title" )
        .setMessage( "Your message" )
        .setPositiveButton( "OK" , new DialogInterface.OnClickListener() 
            {      
              @Override
              public void onClick(DialogInterface dialog, int which) {
              dismiss();                  
            }
        });
        return builder.create();
    }
} 
```

然后，您只需要定义包含所需动画的主题。在**styles.xml**添加您的自定义主题：

```
<style name="MyCustomTheme" parent="@android:style/Theme.Panel">
    <item name="android:windowAnimationStyle">@style/MyAnimation.Window</item>
</style>

<style name="MyAnimation.Window" parent="@android:style/Animation.Activity"> 
    <item name="android:windowEnterAnimation">@anim/anim_in</item>
    <item name="android:windowExitAnimation">@anim/anim_out</item>
</style> 
```

现在在**res/anim**文件夹中添加动画文件：

（这`android:pivotY`是关键）

**anim_in.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <scale
        android:interpolator="@android:anim/linear_interpolator"
        android:fromXScale="0.0"
        android:toXScale="1.0"
        android:fromYScale="0.0"
        android:toYScale="1.0"
        android:fillAfter="false"
        android:startOffset="200"
        android:duration="200" 
        android:pivotX = "50%"
        android:pivotY = "-90%"
    />
    <translate
        android:fromYDelta="50%"
        android:toYDelta="0"
        android:startOffset="200"
        android:duration="200"
    />
</set> 
```

**动画输出.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <scale
        android:interpolator="@android:anim/linear_interpolator"
        android:fromXScale="1.0"
        android:toXScale="0.0"
        android:fromYScale="1.0"
        android:toYScale="0.0"
        android:fillAfter="false"
        android:duration="200" 
        android:pivotX = "50%"        
        android:pivotY = "-90%"        
    />
    <translate
        android:fromYDelta="0"
        android:toYDelta="50%"
        android:duration="200"
    />
</set> 
```

最后，棘手的事情是让你的动画从每一行的中心开始增长。我想该行水平填充屏幕，所以一方面该`android:pivotX`值将是静态的。另一方面，您不能以`android:pivotY`编程方式修改该值。

我的建议是，您定义几个动画，每个动画在`android:pivotY`属性上都有不同的百分比值（以及引用这些动画的几个主题）。然后，当用户点击该行时，以屏幕上该行的百分比计算 Y 位置。了解百分比位置后，为您的对话框分配一个具有适当`android:pivotY`值的主题。

这不是一个完美的解决方案，但可以为您解决问题。如果您不喜欢结果，那么我建议您忘记`DialogFragment`并动画从行的确切中心开始的简单`View`增长。

祝你好运！

* * *

## 回答 #2

> 赞同：138
> 
> 时间：2013-04-04T16:04:41.020

看看这段代码，它对我有用

// 上滑动画

```
<?xml version="1.0" encoding="utf-8"?> <set xmlns:android="http://schemas.android.com/apk/res/android" >

    <translate
        android:duration="@android:integer/config_mediumAnimTime"
        android:fromYDelta="100%"
        android:interpolator="@android:anim/accelerate_interpolator"
        android:toXDelta="0" />

</set> 
```

// 向下滑动动画

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android" >

    <translate
        android:duration="@android:integer/config_mediumAnimTime"
        android:fromYDelta="0%p"
        android:interpolator="@android:anim/accelerate_interpolator"
        android:toYDelta="100%p" />

</set> 
```

// 风格

```
<style name="DialogAnimation">
    <item name="android:windowEnterAnimation">@anim/slide_up</item>
    <item name="android:windowExitAnimation">@anim/slide_down</item>
</style> 
```

// 内部对话框片段

```
@Override
public void onActivityCreated(Bundle arg0) {
    super.onActivityCreated(arg0);
    getDialog().getWindow()
    .getAttributes().windowAnimations = R.style.DialogAnimation;
} 
```

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2015-04-10T08:51:24.237

DialogFragment 有一个公共的 getTheme() 方法，您可以出于这个确切原因覆盖该方法。此解决方案使用更少的代码行：

```
public class MyCustomDialogFragment extends DialogFragment{
    ...
    @Override
    public int getTheme() {
        return R.style.MyThemeWithCustomAnimation;
    }
} 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2017-08-03T23:15:53.693

要获得带有动画的全屏对话框，请编写以下...

**款式：**

```
<style name="AppTheme" parent="Theme.AppCompat.Light.DarkActionBar">
    <item name="colorPrimary">@color/colorPrimary</item>
    <item name="colorPrimaryDark">@color/colorPrimaryDark</item>
    <item name="colorAccent">@color/colorAccent</item>
    <item name="actionModeBackground">?attr/colorPrimary</item>
    <item name="windowActionModeOverlay">true</item>
</style>

<style name="AppTheme.NoActionBar">
    <item name="windowActionBar">false</item>
    <item name="windowNoTitle">true</item>
</style>

<style name="AppTheme.NoActionBar.FullScreenDialog">
    <item name="android:windowAnimationStyle">@style/Animation.WindowSlideUpDown</item>
</style>

<style name="Animation.WindowSlideUpDown" parent="@android:style/Animation.Activity">
    <item name="android:windowEnterAnimation">@anim/slide_up</item>
    <item name="android:windowExitAnimation">@anim/slide_down</item>
</style> 
```

**res/anim/slide_up.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
     android:shareInterpolator="@android:interpolator/accelerate_quad">

    <translate
        android:duration="@android:integer/config_shortAnimTime"
        android:fromYDelta="100%"
        android:toYDelta="0%"/>
</set> 
```

**res/anim/slide_down.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
     android:shareInterpolator="@android:interpolator/accelerate_quad">

    <translate
        android:duration="@android:integer/config_shortAnimTime"
        android:fromYDelta="0%"
        android:toYDelta="100%"/>
</set> 
```

**Java代码：**

```
public class MyDialog extends DialogFragment {

    @Override
    public int getTheme() {
        return R.style.AppTheme_NoActionBar_FullScreenDialog;
    }
}

private void showDialog() {
    FragmentTransaction fragmentTransaction = getSupportFragmentManager().beginTransaction();
    Fragment previous = getSupportFragmentManager().findFragmentByTag(MyDialog.class.getName());
    if (previous != null) {
        fragmentTransaction.remove(previous);
    }
    fragmentTransaction.addToBackStack(null);

    MyDialog dialog = new MyDialog();
    dialog.show(fragmentTransaction, MyDialog.class.getName());
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-12-16T07:32:41.600

在 DialogFragment 中，自定义动画被称为 onCreateDialog。'DialogAnimation' 是上一个答案中的自定义动画样式。

```
public Dialog onCreateDialog(Bundle savedInstanceState) 
{
    final Dialog dialog = super.onCreateDialog(savedInstanceState);
    dialog.getWindow().getAttributes().windowAnimations = R.style.DialogAnimation;
    return dialog;
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-08-25T17:18:26.797

在对话框片段的 onStart 中使用装饰视图

```
@Override
public void onStart() {
    super.onStart();

    final View decorView = getDialog()
            .getWindow()
            .getDecorView();

    decorView.animate().translationY(-100)
            .setStartDelay(300)
            .setDuration(300)
            .start();

} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-07-22T22:07:30.547

如果你想处理 API，你必须在 DialogFragemnt->onStart 内部而不是在 onCreateDialog 内部进行

```
@Override
    public void onStart() 
    {
        if (getDialog() == null) 
        {
            return;
        }

        getDialog().getWindow().setWindowAnimations(
                  R.style.DlgAnimation);

        super.onStart();
    } 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-05-25T16:28:56.583

注意：这只是对其他答案的补充。

无论您选择哪种解决方案，您都可能遇到与我相同的问题。

在安装新版本之前，我需要从我的开发设备卸载游戏以使动画更改生效。

我不知道为什么，但我想这与 Android Studio 上的优化部署有关，无法识别这些更改。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-11-21T20:29:49.147

你看过关于[缩放视图](http://developer.android.com/training/animation/zoom.html "缩放视图")的 Android 开发者培训吗？可能是一个很好的起点。

您可能想要创建一个自定义类来扩展`DialogFragment`以使其正常工作。

此外，请查看 Jake Whartons [NineOldAndroids](http://nineoldandroids.com/)的 Honeycomb Animation API 兼容性，一直到 API 级别 1。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2020-07-10T17:25:32.107

在值动画上添加此代码

```
 <scale
    android:duration="@android:integer/config_longAnimTime"
    android:fromXScale="0.2"
    android:fromYScale="0.2"
    android:toXScale="1.0"
    android:toYScale="1.0"
    android:pivotX="50%"
    android:pivotY="50%"/>
<alpha
    android:fromAlpha="0.1"
    android:toAlpha="1.0"
    android:duration="@android:integer/config_longAnimTime"
    android:interpolator="@android:anim/accelerate_decelerate_interpolator"/> 
```

调用styles.xml

```
<style name="DialogScale">
    <item name="android:windowEnterAnimation">@anim/scale_in</item>
    <item name="android:windowExitAnimation">@anim/scale_out</item>
</style> 
```

在 java 代码上：设置 Onclick

```
public void onClick(View v) {
        fab_onclick(R.style.DialogScale, "Scale" ,(Activity) context,getWindow().getDecorView().getRootView());
      //  Dialogs.fab_onclick(R.style.DialogScale, "Scale");

    } 
```

设置方法：

```
alertDialog.getWindow().getAttributes().windowAnimations = type; 
```

# java - 使用 Sitebricks 发送一致的 JSON 响应以报告异常

> ID：13402783
> 
> 赞同：1
> 
> 时间：2012-11-15T17:17:27.193
> 
> 标签：java, json, exception-handling, sitebricks

我正在开发一个 web 应用程序，它通过[Google Sitebricks](https://github.com/dhanji/sitebricks)提供许多 REST 端点。为了最大程度地减少重复/类似代码，我想将 sitebricks 配置为每次在 REST 端点中执行的代码引发异常时都使用一致的回复对象进行响应。

而不是处理异常并在每个端点中创建自定义 JSON 响应，我希望 sitebricks 本身捕获异常并返回如下内容：

```
{
  statusCode: 123,
  message: "this could contain Exception.getMessage()",
  stacktrace: "this could contain the full stacktrace"
} 
```

然后 Sitebricks 将负责创建上述结构并填写状态代码和其他字段，例如基于注释。

*   我必须自己构建这个还是其他人已经这样做了？也许甚至有办法用 Sitebricks 本身做到这一点？
*   是否有等效于[Jersey 的 ExceptionMapper 接口](http://jersey.java.net/nonav/apidocs/1.8/jersey/javax/ws/rs/ext/ExceptionMapper.html)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T15:57:04.297

不完全回答您的问题，但我为管理错误所做的工作如下。

在我所有 REST 端点的父类中，我声明了以下方法：

```
protected Reply<?> error(String errorCode) {
    logger.error(errorCode);
    return Reply.with(new ErrorJSONReply(errorCode)).as(Json.class).headers(headers()).type("application/json; charset=utf-8");
} 
```

然后在我的所有端点中，我都在捕获异常并使用此方法来回复一般错误。

希望有帮助。

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T08:41:31.327

您可以使用 Guice 的[AOP 优势](https://code.google.com/p/google-guice/wiki/AOP)来绑定方法拦截器以捕获异常并将其序列化到 JSON...

```
public class ReplyInterceptor implements MethodInterceptor {

    @Retention(RetentionPolicy.RUNTIME)
    @Target({ElementType.METHOD})
    @BindingAnnotation
    public @interface HandleExceptionsAndReply {
    }

    public ReplyInterceptor() {
    }

    @Override
    public Object invoke(MethodInvocation methodInvocation) throws Throwable {
        try {
            return methodInvocation.proceed();
        } catch (Throwable e) {
            return handleException(e);
        }
    }

    private Object handleException(Throwable e) {
        Throwable cause = getCause(e);
        return Reply.with(cause).as(Json.class);
    }

    @SuppressWarnings("ThrowableResultOfMethodCallIgnored")
    private Throwable getCause(Throwable e) {
        // org.apache.commons.lang3.exception.ExceptionUtils
        Throwable rootCause = ExceptionUtils.getRootCause(e);
        return rootCause == null ? e : rootCause;
    }
} 
```

绑定它...

```
bindInterceptor(
        Matchers.any(),
        Matchers.annotatedWith(ReplyInterceptor.HandleExceptionsAndReply.class),
        new ReplyInterceptor(getProvider(ResponseBuilder.class))
);

// OR bind to request method annotations...

bindInterceptor(
        Matchers.any(),
        Matchers.annotatedWith(Get.class),
        new ReplyInterceptor(getProvider(ResponseBuilder.class))
); 
```

用它...

```
@At("/foo/:id")
@Get
@ReplyInterceptor.HandleExceptionsAndReply
public Reply<ApiResponse<Foo>> readFoo(@Named("id") String id) {
     // fetch foo and maybe throw an exception
     // ...        
} 
```

参考：[https ://code.google.com/p/google-guice/wiki/AOP](https://code.google.com/p/google-guice/wiki/AOP)

# jquery - 在 if 语句中使用 jQuery 更改 css 属性

> ID：13402785
> 
> 赞同：0
> 
> 时间：2012-11-15T17:17:31.960
> 
> 标签：jquery, css, if-statement

我制作了一些菜单，其中包含在用户单击它们时展开的项目。每当菜单项展开时，项目的标题都应该使用 .css() 更改样式

由于菜单的样式不同，脚本中有一个 if 语句，用于检查用户是否单击了 menu2 或 menu3 项以在展开时应用适当的样式。

编辑：问题是样式更改没有按应有的方式应用。

我按照 Sushanth 的建议将 $this 替换为 $(this) ，但问题仍然存在，请查看示例（已更新）

代码：

```
<script type='text/javascript'>
$(window).load(function(){
$(document).ready(function() {

    $(".toggle-trigger").click(function() {
        $(this).parent().nextAll('.toggle-wrap').first().slideToggle('slow','swing'); 

      if( $(this).is("menu2 .headline a")) {
            $(this).toggle(
                function(){
                $(this).parent().css("background-color","rgba(0, 0, 0, 0.1)",'border', 'solid 2px #009e0f');
                $(this).css("color","#009e0f");
                },
                function(){
                $(this).parent().css("background-color","#009e0f","border",'solid 2px #009e0f');
                $(this).css("color","#ffffff");
                }
            );
        }

        else if( $(this).is("#menu3 .headline a")) {
            $(this).toggle(
                function(){
                $(this).parent().css("background-color","rgba(0, 0, 0, 0.1)",'border', 'solid 2px #f7b50c');
                $(this).css("color","#f7b50c");
                },
                function(){
                $(this).parent().css("background-color","#009e0f","border",'solid 2px #f7b50c');
                $(this).css("color","#ffffff");
                }
            );
        }

    });
}); 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:19:34.863

```
$this 
```

应该是 **//** `In the if statements if( $this.is("menu2 .headline a"))`

```
$(this) 
```

或者**缓存** `var $this = $(this)`

**更新**

我看到代码还有两个问题......

*   此行中缺少 # 符号`if( $(this).is("#menu2 .headline a"))` 第二个问题是您分配**CSS 属性的方式。**.

    .css("背景色","#009e0f","边框",'solid 2px #f7b50c')

你有多个属性..所以属性应该是**键：值对**`a map`的形式..

 **```
.css({
       "background-color": "#009e0f",
       "border": 'solid 2px #f7b50c'
 }); 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/GeHBD/1/)**

无需将您的代码都包含在`$(window).load()`和`DOM Ready handler`.. 中。一个就足够了。**切换**似乎也有问题

 ****更新**

在不使用切换的情况下进行了优化

```
$(document).ready(function() {
    $(".toggle-trigger").click(function() {
        // cache the div next to anchor
        var $div = $(this).parent().nextAll('.toggle-wrap').first();
        $div.slideToggle('slow', 'swing');
        // cache $(this)
        var $this = $(this);
        var background = '';
        var color = '';
        // Checking id the div has no class called hidden
        if (!$div.hasClass('hidden')) {
            // then add the class to the div
            $div.addClass('hidden');
            background = "rgba(0, 0, 0, 0.1)";
            // closest ancestor of the link cliked is menu2
            if ($this.closest('#menu2').length) {
                color = "#009e0f";
            }
            // closest ancestor of the link cliked is menu2
            else if ($this.closest('#menu3').length) {
                color = "#f7b50c";
            }
        }
        // if the div has a class hidden then 
        else {
            // Remove the hidden class
            $div.removeClass('hidden');
            color = "#ffffff";
            if ($this.closest('#menu2').length) {
                background = "#009e0f";
            }
            else if ($this.closest('#menu3').length) {
                background = "#f7b50c";
            }
        }
        // set the background  and color based on conditions
        $this.parent().css("background-color" , background );
        $this.css("color" , color);
    });
});​ 
```

**[更新小提琴](http://jsfiddle.net/sushanth009/GeHBD/3/)******

# excel - Excel 2010 - 来自 Web 的数据创建新文件？

> ID：13402786
> 
> 赞同：0
> 
> 时间：2012-11-15T17:17:33.680
> 
> 标签：excel, rest, jira, excel-2010

我正在尝试在我的 excel 工作簿中设置一个工作表，其中数据来自网络。这样我就可以单击刷新，然后再次从站点中提取数据，基本上自动化当前的新流程。

现在我们正在将数据从站点导出到 excel 文件中，然后将其复制/粘贴到第二个工作簿中并在那里生成我们的报告，我想避免这样做，单击刷新应该刷新数据。

我试图提取的数据来自我们用来跟踪敏捷团队流程的 OnDemand JIRA 应用程序。（网址[https://mycompany.atlassian.net/sr/jira.issueviews:searchrequest-excel-all-fields/10101/SearchRequest-10101.xls?tempMax=1000](https://mycompany.atlassian.net/sr/jira.issueviews:searchrequest-excel-all-fields/10101/SearchRequest-10101.xls?tempMax=1000)）

现在的问题是，如果我在 Excel 2010 中选择 Data -> From Web 并输入上面的 URL，Excel 总是想将数据保存到另一个 Excel 文件中......有什么办法可以让它将数据插入我已经打开的工作簿（我单击数据 -> 从 Web 进入的那个？）？我现在似乎找不到任何方法可以做到这一点，所以任何帮助表示赞赏！

我对 REST 了解不多，但除了使用 Data -> From Web 之外，还有更好的方法吗？请记住，我想避免将数据从一个电子表格复制/粘贴到另一个电子表格，并且数据将每周刷新一次。谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T17:00:35.120

这可能会让你开始......

```
Sub DoUpdate()

Const URL As String = "https://mycompany.atlassian.net/sr/jira.issueviews:" & _
                       "searchrequest-excel-all-fields/10101/" & _
                       "SearchRequest-10101.xls?tempMax=1000)"

Dim wb As Workbook

    Set wb = Workbooks.Open(URL) 'open workbook from web

    'clear previous data
    ThisWorkbook.Sheets("data").Range("A1:H200").ClearContents

    'copy new data over
    wb.Sheets(1).Range("A1").CurrentRegion.Copy _
                      ThisWorkbook.Sheets("data").Range("A1")

    wb.Close False 'close and don't save any changes

End Sub 
```

# javascript - 传单：图层控制教程中的自定义图像？

> ID：13402787
> 
> 赞同：2
> 
> 时间：2012-11-15T17:17:37.677
> 
> 标签：javascript, maps, leaflet

我遵循了关于如何创建图层控制和自定义标记的传单教程：

标记：http://leafletjs.com/examples/custom-icons.html 控制：http: [//leafletjs.com/examples/layers-control.html](http://leafletjs.com/examples/layers-control.html)

我正在使用控制代码，我想在其中添加我的自定义标记。应用代码时，地图变为空白并中断。我不确定这是否与“添加到地图”和“绑定弹出”的定位有关。任何帮助都会很棒。

代码：

```
[CLOUDMADE API KEY AND INFO HERE]

var officeIcon = L.icon({
    iconUrl: 'images/office1.png'
});

var london = L.marker([51.3512542357518,-0.461769104003906],{icon: officeIcon}).addTo(map).bindPopup('<b>Office Address</b>');

var cities = L.layerGroup([london]);

var minimal   = L.tileLayer(cloudmadeUrl, {styleId: 22677}),
midnight  = L.tileLayer(cloudmadeUrl, {styleId: 999}),
motorways = L.tileLayer(cloudmadeUrl, {styleId: 46561});

var map = L.map('map', {
center: new L.LatLng(54.980000,-1.5975022315979004),
zoom: 10,
layers: [minimal, motorways, cities]
});

var baseMaps = {
    "Minimal": minimal,
    "Night View": midnight,

};

var overlayMaps = {
    "Motorways": motorways,
    "Display Markers": cities
};

map.addControl(new MyControl());
L.control.layers(baseMaps, overlayMaps).addTo(map); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T06:15:56.907

问题是您在定义地图之前将标记添加到地图中。我建议使用 firebug for firefox 或 chrome 中的等价物。这样你可以查看控制台，你会看到错误：

```
'Uncaught TypeError: Cannot call method 'addLayer' of undefined'
  L.Marker.L.Class.extend.addTo leaflet-src.js:2993
  addVehicleContentUI obelix.dev:1074
  (anonymous function) obelix.dev:718
  (anonymous function) obelix.dev:1292
  p.event.dispatch jquery-1.8.0.min.js:2
  g.handle.h 
```

这让我看到了 L.Marker，这让我意识到你还没有定义地图。您遇到的问题是您将标记添加到地图以及将其添加到组图层。只是不要将其添加到地图中（根据您所遵循的教程）。所以删除代码：

```
.addTo(map) 
```

从：

```
var london = L.marker([51.3512542357518,-0.461769104003906],{icon: officeIcon}).addTo(map).bindPopup('<b>Office Address</b>'); 
```

下一个问题是 MyControl 不是控件，我注释掉了以下行：

```
map.addControl(new MyControl()); 
```

从您的代码片段中，我认为您有来自 cloudmade 的密钥。如果是这样，那么它应该可以正常工作。我在本地进行了测试，一切都很好。

如果您使用的是 firefox，我强烈建议您使用 firebug；如果您使用的是 chrome，我强烈建议您使用 chrome。查看控制台将向您展示这些问题，您甚至可以设置断点并在 javascript 执行时单步执行。恕我直言，JavaScript 编程的宝贵工具。

干杯。

# c++ - 关于 C++ 中的指针和引用的困惑

> ID：13402789
> 
> 赞同：24
> 
> 时间：2012-11-15T17:17:41.343
> 
> 标签：c++, pointers, reference

我有一堆这样的代码：

```
#include <iostream>
using namespace std;

void swap(int *a, int *b) {
    int temp = *a;
    *a = *b;
    *b = temp;
}

int main() {
    int a;
    int b;
    a = 7;
    b = 5;
    swap(a, b);
    cout << a << b;

    return 0;
} 
```

这段代码执行交换过程，就像我想要交换 2 个数字一样，但是当我想要来自用户的两个数字时，如下所示；

```
int a;
int b;
cin >> a;
cin >> b;
swap(a, b);
cout << a << b; 
```

编译器给了我一个关于错误`int`的`int*`错误，这是预期的。尽管我没有使用带有运算符的方法，为什么第一个代码会进行正确的交换`&`？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-11-15T17:21:22.037

在第一个示例`std::swap`中，由于您的`using namespace std`. 第二个示例与第一个示例完全相同，因此您可能没有使用。

无论如何，如果您将函数重命名为`my_swap`或类似的名称（并更改每一次出现），那么第一个代码不应该像预期的那样工作。或者，明确删除`using namespace std`and 调用`std::cin`and 。`std::cout`我会推荐第二种选择。

# vb.net - VB.Net System.ServiceProcess 尝试检查服务时出错

> ID：13402793
> 
> 赞同：1
> 
> 时间：2012-11-15T17:17:48.610
> 
> 标签：vb.net

我的代码在下面列出。当我单击按钮时，它应该查看服务，然后确定它需要做什么。但是，当它让部件检查它是否已停止时，它会出现错误，因为它试图启动它，即使它已经启动了。我不知道为什么它试图启动服务，即使它应该返回一个 false 停止。

任何帮助，将不胜感激。

```
 Dim sc As New System.ServiceProcess.ServiceController("LPT:One Job Queue Engine")

    'This sets the Machine Name/IP Address
    'Removed machine name.
    sc.MachineName = "**********"
    'This tells the service to stop
    If sc.Status = ServiceProcess.ServiceControllerStatus.Running Then
        sc.Stop()
        'This tells the program to wait until the service is stopped
        sc.WaitForStatus(ServiceProcess.ServiceControllerStatus.Stopped)
        'This starts the service once it has stopped
        sc.Start()
    End If

    'Here is where the problem is!
    **If sc.Status.Equals(System.ServiceProcess.ServiceControllerStatus.Stopped) Then
        sc.Start()
    End If**

    If sc.Status = ServiceProcess.ServiceControllerStatus.StopPending Then
        sc.ExecuteCommand("taskkill /F /IM lptjqe.exe")
        sc.Start()
    End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T13:48:01.597

好吧，这就是我为解决这个问题所做的。

我没有使用两个不同的 if 语句，而是将其合并为一个。

```
 If sc.Status = ServiceProcess.ServiceControllerStatus.Running Then
        sc.Stop()
        'This tells the program to wait until the service is stopped
        sc.WaitForStatus(ServiceProcess.ServiceControllerStatus.Stopped)
        'This starts the service once it has stopped
        sc.Start()
    ElseIf sc.Status = System.ServiceProcess.ServiceControllerStatus.Stopped Then
        sc.Start()
    End If 
```

享受！

# java - 使用带有 PrimeFaces 的 JSF 单击菜单后 CSS 丢失

> ID：13402795
> 
> 赞同：4
> 
> 时间：2012-11-15T17:18:07.000
> 
> 标签：java, css, jsf, layout, primefaces

当我单击 a`p:menuitem`并更新 layoutunit 的内容时，我失去了 layoutunit CSS 样式。但是，如果我刷新，样式会重新出现。为什么是这样？

```
<p:layout id="plantillaPrincipal" fullPage="true" >
            <p:layoutUnit id="cabe" position="north">

                <h:form id="bmenu">

                    <p:menubar>

                        <p:menuitem id="inicio" value="INICIO" actionListener="#{controlMenu.mostrarOpcion()}" update=":container">
                            <f:setPropertyActionListener value="inicio" target="#{controlMenu.opcion}"/>
                        </p:menuitem>
                        <p:menuitem id="tarifas" value="TARIFAS" actionListener="#{controlMenu.mostrarOpcion()}" update=":container">
                            <f:setPropertyActionListener value="tarifas" target="#{controlMenu.opcion}"/>
                        </p:menuitem>
                        <p:menuitem id="tasas" value="TASAS" actionListener="#{controlMenu.mostrarOpcion()}" update=":container">
                            <f:setPropertyActionListener value="tasas" target="#{controlMenu.opcion}"/>
                        </p:menuitem>
                        <p:menuitem id="dudas" value="DUDAS" actionListener="#{controlMenu.mostrarOpcion()}" update=":container">
                            <f:setPropertyActionListener value="dudas" target="#{controlMenu.opcion}"/>
                        </p:menuitem>
                        <p:menuitem id="consultas" value="CONSULTAS" actionListener="#{controlMenu.mostrarOpcion()}" update=":container">
                            <f:setPropertyActionListener value="consultas" target="#{controlMenu.opcion}"/>
                        </p:menuitem>
                    </p:menubar>
                </h:form>
            </p:layoutUnit> 

            <p:layoutUnit id="container" position="center">
                <h:form id="fcont">
                    <ui:insert name="panelInicio">...</ui:insert>
                </h:form>
            </p:layoutUnit> 
```

* * *

这是要更新的 layoutunit 的内容

```
<ui:define name="panelInicio">
    <h:form id="inicio" rendered="#{controlMenu.opcion=='inicio'}">  
        <p:panel id="pinicio">hola desde inicio</p:panel>
    </h:form>
    <h:form id="tarifas" rendered="#{controlMenu.opcion=='tarifas'}">           
        <p:panel id="ptarifas">hola desde tarifas</p:panel>
    </h:form>
    <h:form id="tasas" rendered="#{controlMenu.opcion=='tasas'}">            
        <p:panel id="ptasas">hola desde tasas</p:panel>
    </h:form>
    <h:form id="dudas" rendered="#{controlMenu.opcion=='dudas'}">
        <p:panel id="pdudas">hola desde dudas</p:panel>
    </h:form>
    <h:form id="consultas" rendered="#{controlMenu.opcion=='consultas'}">
        <p:panel id="pconsultas">hola desde consultas</p:panel>
    </h:form>
</ui:define> 
```

* * *

这是托管 bean

```
@ManagedBean
@ApplicationScoped
public class controlMenu {
public String opcion="";

public String getOpcion() {
    return opcion;
}

public void setOpcion(String opcion) {
    this.opcion = opcion;
}

public controlMenu(){       

}

public void mostrarOpcion(){
    System.out.print(opcion);

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T19:15:37.760

你不能更新`LayoutUnit`s，他们没有渲染器。在单元内添加一个占位符`OutputPanel`，然后更新它。

# php - 构建海量数据数据库的建议

> ID：13402798
> 
> 赞同：0
> 
> 时间：2012-11-15T17:18:09.653
> 
> 标签：php, mysql, database, database-design

我正在 Windows 服务器上使用 JavaScript、MySQL 和 PHP 进行 RIA。

我有 5,000 个结构相同的数据集，我想将它们放入数据库中。5 个表足以容纳数据，所有这些都相当小，除了一个表将具有 300,000 多条典型数据集的记录。

此外，500 名用户将获得对从这些数据集编译的统计数据的只读访问权限。这些统计数据由 PHP 提供（不允许直接访问）。更重要的是，他们对数据的访问方式各不相同。有些用户只能使用一个数据集，有些用户只能使用一些、一些、全部。

用户看到的结果比较少；大多数请求返回的行数远低于 100 行，最大的请求数约为 700 行。所有请求都通过 JavaScript RIA，它使用 Ajax 连接到 PHP，而 PHP 又连接到数据，执行其操作并输出 JSON 作为响应，然后 JavaScript 相应地呈现。

在考虑如何构建它时，出现了三个选项：

1.  将数据集放在同一个表中。这可以很容易地在最大的表中给我 1,500,000,000 条记录。

2.  为每个数据集使用单独的表。这将限制最大的表大小，但可能意味着 25,000 个表。

3.  忘记数据库并坚持使用专有格式。

出于几个原因，我倾向于＃2。

1.  我担心使用非常大的表的问题（例如：查询速度、实现限制等）。

2.  分开的桌子似乎更安全；它们限制了错误和结构变化的影响。

3.  单独的表允许我使用 MySQL 的表级安全性，而不是实现我自己的行级安全性。这意味着更少的工作和更好的保护；例如，如果在没有行级安全性的情况下意外发送查询，用户可能会获得未经授权的数据。表级安全性并非如此，因为数据库会立即拒绝查询。

这些是我的想法，但我想要你的。你认为这是正确的选择吗？如果不是，为什么不呢？我错过了哪些考虑？如果可扩展性是一个问题，我应该考虑其他平台吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:46:31.370

> 1) 我担心使用非常大的表时的问题（例如：查询速度、实现限制等...）。

DBMS 是否必须...

*   搜索一张表的大索引，
*   或搜索正确的表，*然后*搜索该表的较小索引

...在性能方面可能没有太大区别。如果有的话，第二种情况有一个未记录的组件（定位正确表的性能），所以我不愿意完全信任它。

如果你想对数据进行物理分区，MySQL从 5.1 版开始[直接支持](http://dev.mysql.com/tech-resources/articles/partitioning.html)，所以你不必通过单独的表来模拟它。

> 2）分开的桌子看起来更安全；它们限制了错误和结构变化的影响。

这就是备份的用途。

> 3) 单独的表允许我使用 MySQL 的表级安全性，而不是实现我自己的行级安全性。

确实如此，但是通过视图或存储过程可以实现类似的效果。

总而言之，我的直觉是使用单个表，除非您事先知道这些数据集在结构上的差异足以保证单独的表。顺便说一句，与优化良好的数据库相比，我怀疑您使用专有格式能否做得更好。

# git - 设置 gitosis 或类似工具真的值得吗？

> ID：13402799
> 
> 赞同：0
> 
> 时间：2012-11-15T17:18:12.477
> 
> 标签：git, version-control, gitolite, gitosis

正如标题所说，使用`gitosis`or`gitolite`设置而不是简单的`git`服务器设置是否值得？

或者，当我有更多的人将提交推送到该服务器时，它会在未来有什么好处吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:26:13.393

Gitosis（或更新的 gitolite）使不真正习惯 linux 和 ssh 并且没有自己访问权限的用户可以轻松使用 git 服务器。

如果他们习惯了 linux 并且出于其他原因必须访问服务器，并且每个人在服务器上都有自己的公共存储库，并且每个人都只是从其他存储库中提取并推送到自己的存储库，那么您真的不需要 gitosis。在这种情况下，它主要是您可以避免的附加层。

# javascript - 将 unix 时间转换为日期对象

> ID：13402801
> 
> 赞同：0
> 
> 时间：2012-11-15T17:18:14.600
> 
> 标签：javascript, date, unix-timestamp

我有一个`unix time`并且需要从中获取一个`Date`对象。此代码只是将时间戳转换为人类可读的方式：

```
var date = new Date(unix_timestamp*1000);
var hours = date.getHours();
var minutes = date.getMinutes();
var seconds = date.getSeconds();
var formattedTime = hours + ':' + minutes + ':' + seconds; 
```

结果`13:44:6`，例如，我得到了，但是如何从中创建`Date`带有时间和日期的对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:57:57.063

你可以看看 date.js

[http://www.datejs.com/](http://www.datejs.com/)

```
var datestr = "13:44:06";
var date = Date.parse(datestr,"hh:mm:ss");
alert(date); 
```

这会提醒一个日期字符串设置为今天的日期，但时间在 datestr 中。

**注意** 为此，我需要对秒进行零填充。

**编辑**

date.js 格式说明符的链接有点隐藏，所以如果你需要，这里是那个链接：

[http://code.google.com/p/datejs/wiki/FormatSpecifiers](http://code.google.com/p/datejs/wiki/FormatSpecifiers)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:10:51.603

我为**Date**对象编写了一个*原型函数*来将 unix 时间戳转换为**YYYYMMDD**。

 ****你可以随意编辑

```
var bd = new Date(unix_timestamp * 1000);
bd = bd.toYYYYMMDD();
// 1970-01-01

if ( !Date.prototype.toYYYYMMDD ) {
    ( function() {
        function pad(number) {
            var r = String(number);
            if ( r.length === 1 ) {
                r = '0' + r;
            }
            return r;
        }
        Date.prototype.toYYYYMMDD = function() {
            if(!this.getUTCDate() || this.getUTCDate() === 'NaN')
                return '1970-01-01';
            return this.getUTCFullYear()
            + '-' + pad( this.getUTCMonth() + 1 )
            + '-' + pad( this.getUTCDate() );
        };   
    }() );
}; 
```****

# android - 存储在 android 服务中的捆绑键/值在消息中消失

> ID：13402802
> 
> 赞同：0
> 
> 时间：2012-11-15T17:18:24.397
> 
> 标签：android

我的活动将应用程序周围的处理程序共享给服务中的工作线程。线程使用handler sendMessage() 活动使用handleMessage() 来处理它们

Activity 进入后台 Android 会杀死它，回来时它会再次启动。

Activity 调用 Service 的静态方法来检查服务中线程的最后状态（关于最后一个 sendMessage() 是什么）。这样它就可以根据服务线程的最后一条消息来初始化它的 UI 状态

```
Message m = SyncService.lastSyncMessage(); 
```

**由于某种原因，消息 m 中的包有时是有效的（包含键/值对），有时键/值不存在**

通过处理程序将消息转发到 UI 的线程一侧的代码如下所示。

```
 Handler uiHandler = UIGlobals.getHandler();
  Message msg = uiHandler.obtainMessage();
  Bundle msgBundle = new Bundle();

  msgBundle.putInt("status", syncEv.status.ordinal());
  msgBundle.putString("param", syncEv.param);

  msg.setData(msgBundle);
  if(uiHandler.sendMessage(msg))
  {
    lastMessage = msg;
  } 
```

服务中的静态方法

```
 public static Message lastSyncMessage()
{
    return lastMessage;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T18:40:58.167

The Message object came from pool. When Activity is gone, handler's callback points to unavailable object. Android seem to re-prepare the Message ref for usage in the Pool, To solve it I stored the Actual Event in the static member rather than the Message.

# c# - 与数据表查询结合使用的子字符串

> ID：13402804
> 
> 赞同：1
> 
> 时间：2012-11-15T17:18:28.107
> 
> 标签：c#, linq, datatable

下面的查询是从列中获取数据以查看数据是否包含某个字符串的查询。这是在该列中找到的字符串，我想选择其中行中的所有数据。例如，在数据表中，将是带有“age[10-20]”的行，并且基于此输入字符串，它应该输出字符串为“age”的所有行

下面的代码不返回任何数据，也没有错误

是否可以根据索引值检索数据。

```
 var result = importedExcelData.AsEnumerable().Where(data => data.Field<String>("All Respondents").Contains(first)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T17:21:56.090

尝试更改`.Where(data => data.Field<String>(first) == first)`为：

```
.Where(data => data.Field<String>(first).Contains(first) 
```

# c++ - 牛顿方法返回 NaN

> ID：13402807
> 
> 赞同：0
> 
> 时间：2012-11-15T17:18:52.603
> 
> 标签：c++, nan, newtons-method

我写了牛顿方法的简单递归版本：

```
#include <cmath>

using namespace std;

double DeriveAt(double (*f)(double), double x){
    return( (f(x+0.001)-f(x-0.001))/0.002 );
};

double FindRoot(double (*f)(double), double x0){
    double corr=f(x0)/DeriveAt(f,x0);
    if(abs(corr) > 1.E-7)
            FindRoot(f, x0-corr);
    else return(x0);
}; 
```

如果我调用我的函数，例如`FindRoot(sin, 4)`，`NaN`返回。我通过在每一步之后打印的值来检查函数`x0`，一切似乎都在最后一次迭代中工作。出于某种原因，函数调用自身的次数超出了实际应该调用的次数，可能会`0/0`在计算 last 时创建类似的东西`corr`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T17:25:09.500

如果我改变

```
if(abs(corr) > 1.E-7)
        FindRoot(f, x0-corr); 
```

至

```
if(abs(corr) > 1.E-7)
        return FindRoot(f, x0-corr); 
```

然后`FindRoot(sin, 4)`返回近似 Pi 的东西。

# bash - 在 csv 文件中插入一行

> ID：13402809
> 
> 赞同：23
> 
> 时间：2012-11-15T17:18:54.600
> 
> 标签：bash, shell, sed, awk, terminal

我有一个巨大的 csv 文件（以 TB 为单位）。

现在，我想在顶部插入一行作为标题。

例如，如果 input.csv 看起来像这样：

```
 1,2,3,4
 22,3,23,1 
```

我希望它看起来像

```
id1,id2,id3,id4
 1,2,3,4
 and so on 
```

我如何从 shell、终端、awk、bash 执行此操作？/

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-15T17:33:12.753

就地，使用 sed：

```
sed -i 1i"id1,id2,id3,id4" file.csv 
```

编辑：

正如@Ed Morton 指出的那样，使用 sed 和`-i`开关 sed 编辑文件，因此在编辑大文件时可能很危险。如果您在`-i`选项后提供前缀，则 sed 会创建备份。所以这样的事情会更安全：

```
sed -i.bak 1i"id1,id2,id3,id4" file.csv 
```

然后原始文件将位于`file.csv.bak`

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-11-15T17:20:23.063

这很简单：

```
{ echo "id1,id2,id3,id4"; cat file.csv; } > newfile.csv 
```

使用简单的外壳连接。

**编辑**

在下面的讨论线程之后，我提出这个：

*   用你的标题创建一个文件，说`head.txt`

然后 ：

```
cat head.txt file.csv > newfile.csv 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-15T18:45:48.230

**编辑。**当我写这个答案时，我忽略了问题的“太字节”部分。因此，*请勿使用此处介绍的方法*。我仍然离开这篇文章，因为它宣传了这个美妙的工具，`ed`标准文本编辑器的使用。

像往常一样，`ed`是标准的文本编辑器。正如它所提到的，使用的解决方案`sed -i`并不是“就地编辑文件”。相反，它将其内容输出到一个临时文件，然后将此文件重命名为原始文件。这对于大文件真的不好！

使用`ed`而不是真正编辑文件。大致如下：

```
#!/bin/bash

file="input.csv"

{
ed -s "$file" <<EOF
1
i
id1,id2,id3,id4
.
wq
EOF
} > /dev/null 
```

解释：`1`到第一行，`i`进入插入模式，然后我们插入，`id1,id2,id3,id4`然后`.`回到正常模式，`wq`写入并退出。

使用这种方法，您实际上是在编辑文件，它比 sed 方法快两倍。此外，`ed`以“大文件安全”着称！

完毕。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T17:21:00.113

没有简单的方法，您将不得不重写文件。可能最安全的方法是

```
 ( echo "id1,id2,id3,id4" ; cat file ) > newFile && rm file 
```

IHTH

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2021-03-03T06:13:10.850

回声“id1，id2，id3，id4”>> data.csv

# c# - SvcUtil.exe vs 添加引用

> ID：13402810
> 
> 赞同：3
> 
> 时间：2012-11-15T17:19:07.607
> 
> 标签：c#, .net, visual-studio-2010, wcf

当在 VS.NET 中添加服务引用提供了您需要的所有代理类时，为什么有人会使用 SvcUtil.exe？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T17:33:46.797

有时在 VS 中添加服务引用无法创建有用的代理。相反，它为您提供了一个空的 Reference.cs 详细信息[here](https://stackoverflow.com/questions/9224525/wcf-service-reference-generates-an-empty-reference-cs-due-to-duplexbinding)和[here](https://stackoverflow.com/questions/5988260/wcf-error-reference-cs-is-blank-empty)文件。我创建了一系列 bat 文件来调用 SvcUtil.exe 来生成代理类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T02:33:37.273

svcutil.exe 和“添加服务引用”都将在下面使用相同的代理生成代码。将“添加服务引用”视为一种生成代理的 UI 方式，它预先填充了一组您必须在 svcutil 命令行中执行的开关。例如，当您在 VS 中添加服务引用时，UI 允许您重用引用程序集中的类型，指定要生成的代理类型（同步异步/基于任务等）。如果您想自动生成服务引用，svcutil 也将很有用。

# javascript - Rally：来自多个表的字段

> ID：13402811
> 
> 赞同：2
> 
> 时间：2012-11-15T17:19:09.140
> 
> 标签：javascript, extjs4, rally

我正在使用 Rally WSAPI 2.0p5 和 JSON 返回

我希望在单个响应中从多个表中获取字段。这可能吗？例如，我正在尝试获取用户故事并在相同的数据响应中获取 Iteration.State。我知道可以做客户端，如果这是唯一的方法。有人可以提供并举例说明我如何处理异步响应来构建表（数组）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T23:16:22.983

只需将 State 添加到您的 fetch 中包含的属性列表中。即使被查询的主类型没有该字段，Rally 的 WSAPI 也会填充子对象的值。

```
launch: function() { 
    var userStories = Ext.create('Rally.data.WsapiDataStore', { 
        model: 'HierarchicalRequirement', 
        fetch: ['Iteration', 'State'], 
        autoLoad: true, 
        filters: [
            { 
                property: 'Iteration.State',
                value: 'Accepted' 
            }
        ], 
        limit: 10000, 
        listeners: { load: this._onDataLoaded, scope: this } 
    }); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T18:55:51.850

作为我最初问题的后续行动。我最近在 Rally 的 WSAPI 文档中看到了 Batch Query WSAPI 的 alpha 版本。我建议使用批处理查询在单个响应中检索多个对象模型。

作为获取用户故事并在单个查询中获取迭代状态的示例。

```
{
    "stories" : "/HierarchicalRequirement?fetch=Name,Iteration,State&query=(Iteration.State = Accepted)"
} 
```

结果是更有用的东西，不需要对服务器进行多次查询。IE

```
"Results": [{
        "_rallyAPIMajor": "1",
        "_rallyAPIMinor": "40",
        "_ref": "https://rally1.rallydev.com/slm/webservice/x/hierarchicalrequirement/xxxxxxxx.js",
        "_objectVersion": "17",
        "_refObjectName": "<user role> I would like <feature> for <benifit>",
        "Name": "As a <user role> I would like <feature> for <benifit>",
        "Iteration":             {
            "_rallyAPIMajor": "1",
            "_rallyAPIMinor": "40",
            "_ref": "https://rally1.rallydev.com/slm/webservice/x/iteration/xxxxxxxx.js",
            "_objectVersion": "4",
            "_refObjectName": "Sprint #",
            "Name": "Sprint #",
            "State": "Accepted",
            "_type": "Iteration"
        },
        "Project":             {
            "_rallyAPIMajor": "1",
            "_rallyAPIMinor": "40",
            "_ref": "https://rally1.rallydev.com/slm/webservice/x/project/xxxxxxxx.js",
            "_refObjectName": "Name",
            "_type": "Project"
        },
        "_type": "HierarchicalRequirement"
    },
    ....
    ] 
```

有关更多信息和一些资源：

*   [https://rally1.rallydev.com/slm/doc/webservice/index.jsp?version=1.40](https://rally1.rallydev.com/slm/doc/webservice/index.jsp?version=1.40)
*   [https://rally1.rallydev.com/slm/doc/webservice/batch.jsp](https://rally1.rallydev.com/slm/doc/webservice/batch.jsp)
*   [https://rally1.rallydev.com/slm/doc/webservice/BatchScratchPad.jsp](https://rally1.rallydev.com/slm/doc/webservice/BatchScratchPad.jsp)

# codesmith - 项目使用 CodeSmith 生成数据库，但我不再有 Codesmith

> ID：13402819
> 
> 赞同：0
> 
> 时间：2012-11-15T17:19:28.623
> 
> 标签：codesmith

我是 Codesmith gen 的新手，所以...

我不再有 CodeSmith，但我的项目使用 CodeSmith 来生成所有数据库上下文。我想在数据库中添加一个表。即使我不再有 CodeSmith，是否也有可能为该表生成代码？

我怎样才能仍然使用新表？

多谢你们...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T19:16:31.680

您必须手动添加代码或安装 CodeSmith Generator 并重新生成。另外，您是否有理由不再使用 Generator 了？

# javascript - jQuery代码流

> ID：13402820
> 
> 赞同：-5
> 
> 时间：2012-11-15T17:19:28.997
> 
> 标签：javascript, jquery

请我需要一些有关我的 jquery 代码流程的帮助。我已经让幻灯片工作了，并决定更进一步，添加导航按钮/图像。

在下面的代码中，我先用一个 div 对其进行测试，该 div 稍后将成为图片或按钮。无论如何，我有它，所以当我单击 div 时，幻灯片会转到幻灯片中的第一个图像。

现在我遇到的关键问题是，使用下面的代码它可以工作，但点击后需要 5 秒才能显示第一张图片，我猜是因为超时功能。

请注意，这只是函数 slideShow 中包含的代码片段。

```
$("#slidecontrol2").click(function(){
    next.removeClass('is-showing');
    $('#container').children(':first').children(':first').addClass('is-showing');

  });

  setTimeout(slideShow, 5000); 
```

我尝试在 click() 函数之后和 timeout 函数之前再次调用该函数。

```
 $("#slidecontrol2").click(function(){
        next.removeClass('is-showing');
        $('#container').children(':first').children(':first').addClass('is-showing');
        **slideShow ();**

      });

      setTimeout(slideShow, 5000); 
```

它可以工作，但现在我的图像快疯了，我敢再点击一次，它加速并变得更疯狂。

请帮助任何人！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T21:36:41.460

我注意到它`slideShow`不带任何参数，因此它必须自己处理查找“可见”幻灯片和下一张幻灯片。在我看来，您还希望幻灯片自动发生（我从您的`setTimeout(slideShow, 5000);`行中收集）并且您希望在单击`slidecontrol2`元素时进入下一张幻灯片。由于`slideShow`处理了这种渐进式操作，因此您的代码应如下所示（下面的伪代码）：

```
var slideShow = function(){
    //Fades out current image, 
    //finds next image with class "is-showing" and fades it in
}

$(document).ready(function(){
    //Adds click handler to advance slideshow on click of button
    $("#slidecontrol2").click(function(){
        slideShow();
    });

    //Begins slideshow on load of page
    setTimeout(slideShow, 5000);
}); 
```

# grails - 使用 ApplicationResources 使整个文件夹可见

> ID：13402821
> 
> 赞同：1
> 
> 时间：2012-11-15T17:19:29.337
> 
> 标签：grails

在我的 grails 应用程序中，我想将目录中特定文件夹中的所有文件`web-app`公开，以便我可以随时使用它们。这在弄乱`ApplicationResources.groovy`配置时是否可能，或者是否有任何其他聪明的方法可以在不直接调用它们的情况下将它们公开？

我想象这样的事情：`resource url:'images/flags/*'`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T00:47:56.030

显然 Resources 插件没有此功能，请参阅[Resources Plugin -- How To include all contents in a directory?](https://stackoverflow.com/questions/10520693/resources-plugin-how-to-include-all-contents-in-a-directory) .

但是，链接的帖子确实包含解决方案。

# jquery - JQuery Mobile 错误加载 Wicket BookmarkablePageLink

> ID：13402826
> 
> 赞同：4
> 
> 时间：2012-11-15T17:19:38.700
> 
> 标签：jquery, ajax, jquery-mobile, jetty, wicket

我是 JQuery Mobile 的新手。我有一个基于 Apache Wicket 的应用程序，我想在其上试用 JQuery Mobile，这样它在移动设备上看起来更令人愉悦。不幸的是，我收到`"Error Loading Page"`所有页面链接的错误，在切换到 JQuery Mobile 之前我从未遇到过问题。根本原因似乎是 HTTP 请求中包含的 URL。我使用了 JQuery Mobile 1.2.0、JQuery 1.8.0、Wicket 1.5.5，并使用码头服务器 6.1.26 和 FireFox 16.0 进行了本地测试。这是代码片段：

```
 <ul data-role="listview" data-theme="b">
          <li><a href="#" wicket:id="metaprofileList" rel="external">List</a>
          </li>
        </ul> 
```

对应的java代码：

```
 add(new BookmarkablePageLink<MetaprofileListPage>(
            "metaprofileList", MetaprofileListPage.class)); 
```

基于上述，Wicket 正确地替换为页面`"#"`所在`href="#"`的真实 URL，因此最终的 HTML 如下所示：

```
 <ul data-role="listview" data-theme="b">
          <li><a href="com.alcatel_lucent.nms8770.awol.client.web.page.MetaprofileListPage" wicket:id="metaprofileList" rel="external">List</a>
          </li>
        </ul> 
```

单击链接时，Jetty 服务器会发送以下 HTTP 请求，其 URL 如下：

```
GET http://127.0.0.1:7999/com.alcatel_lucent.nms8770.awol.client.web.page.MetaprofileListPage [HTTP/1.1 404 Not Found 0ms] 
```

这不是 MetaprofileListPage 的正确 URL。在切换到 JQuery Mobile 之前，我使用相同的场景进行了测试，同一个码头服务器使用正确的 url 发送以下 HTTP 请求：

```
GET http://127.0.0.1:7999/wicket/bookmarkable/com.alcatel_lucent.nms8770.awol.client.web.page.MetaprofileListPage?7 [HTTP/1.1 200 OK 0ms] 
```

我所做的唯一更改是从以下位置切换 HTML 文件中的标题：

```
<link rel="stylesheet" type="text/css" href="../../css/phone.css" media="only screen and (max-width: 480px)"/>
<link rel="stylesheet" type="text/css" href="../../css/default.css" media="only screen and (min-width: 1025px)"/>
<link rel="stylesheet" type="text/css" href="../../css/portrait.css" media="all and (max-device-width: 1024px) and (orientation:portrait)"/>
<link rel="stylesheet" type="text/css" href="../../css/landscape.css" media="all and (max-device-width: 1024px) and (orientation:landscape)"/>
<meta name="viewport" content="user-scalable=no, width=device-width"/> 
```

标准样板 jquery mobile 包括：

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no">
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />  
<script src="http://code.jquery.com/jquery-1.8.0.min.js"></script>  
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script> 
```

我已经为此苦苦挣扎了 2 周了 :-( 我需要做什么才能让 JQuery Mobile 加载正确的网址/页面？请帮助！！非常感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T11:44:48.360

您可能应该**将可添加**书签的页面安装在一个简短的、众所周知的段下，例如

*   [http://example.com/cheeses/edam](http://example.com/cheeses/edam)
*   [http://example.com/profile](http://example.com/profile)

您通常在重写[Application#init](http://wicket.apache.org/apidocs/1.5/org/apache/wicket/protocol/http/WebApplication.html#init%28%29)方法时执行此操作，例如：

```
@Override
protected void init() {
    mountPage("/cheeses/${cheese}", CheesePage.class);
    mountPage("/profile", MyProfile.class);
} 
```

这至少会删除那些包名。

# android - 在 Android 应用程序中定义活动的布局

> ID：13402828
> 
> 赞同：2
> 
> 时间：2012-11-15T17:19:48.350
> 
> 标签：android, android-layout

我正在构建和 android 应用程序并创建了登录屏幕。下一个屏幕将向登录的用户显示一组选项，他必须从中选择一个。

第二个活动是从使用代码的`onPostExecute`方法开始的。`AsyncTask``startActivity(intent)`

```
Intent intent = null;
intent = new Intent(context, DisplayMessageActivity.class);
    context.startActivity(intent); 
```

我正在尝试使用 .xml 文件为此屏幕构建 UI `activity_display_message.xml`。已在清单文件中输入了此条目。我在此 .xml 文件中指定的任何布局属性都没有得到应用。非常感谢这方面的任何帮助。例如，使用下面的代码我无法获得我设置的背景颜色。这适用于我的主要活动的 .xml。

我的 DisplayMessageActivity 类的 onCreate 函数是

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_display_message);

    Intent intent = getIntent();
    String message = intent.getStringExtra(CommonStaticValues.EXTRA_MESSAGE);

    TextView textView = new TextView(this);
    textView.setTextSize(40);
    textView.setText(message);

    setContentView(textView);
} 
```

完整的`activity_display_message.xml`文件是

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" 
android:background="@color/background_color">

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="@string/hello_world"
    tools:context=".DisplayMessageActivity" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:42:54.137

我在这里看到两个可能导致您的问题的问题。你首先`setContentView`像这样使用：

```
setContentView(R.layout.activity_display_message); 
```

这会将您的 XML 文件应用于您想要的活动。稍后，您使用`TextView`您在本地创建的再次调用它。如果您想要一个在屏幕上`Activity`由一个组成的`TextView`，这是一种方法，但您在这里不需要它，因为您已经有了 Activity 的 XML 定义。

其次，您的 XML 文件`TextView`没有 android:id。那是用来`TextView`从代码中引用的。因此，修改您的 XML`TextView`以添加如下内容：

```
<TextView
android:id="@+id/txtView"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_centerHorizontal="true"
android:layout_centerVertical="true"
android:text="@string/hello_world"
tools:context=".DisplayMessageActivity" /> 
```

然后，回到您的 中`onCreate`，而不是构造一个新`TextView`的 with `TextView textView = new TextView(this);`，`TextView`从您应用的 XML 中访问 ，如下所示：

```
TextView textView = (TextView) findViewById(R.id.txtView); 
```

请注意，参数 for`findViewById`是您在 XML 中创建的 id。

# r - R在调查包中循环

> ID：13402829
> 
> 赞同：1
> 
> 时间：2012-11-15T17:19:54.863
> 
> 标签：r, survey

我在使用调查包循环变量时遇到问题。假设我有一部分变量与调查权重一起收集到数据框中，并且我想进行卡方检验。考虑到多重测试的问题，我仍然想测试所有独特的组合。这在 R 中通常相对简单，这里有一个很好的[例子](https://stackoverflow.com/questions/7382039/chi-square-analysis-using-for-loop-in-r)。

不幸的是，这在调查包中变得更加困难，因为项目需要在设计对象中，最重要的是不支持数据集索引（至少据我所知）。我已经尝试将上面提到的示例改编为 svychisq，但我所有的策略都失败了。

我注意到有人在[这里](https://stackoverflow.com/questions/12573826/looping-through-dataset-variables-in-svy-package)做了类似的事情，但大多数变量都是固定的。任何人都可以创建一个函数（可能类似于[这个](https://stackoverflow.com/questions/7382039/chi-square-analysis-using-for-loop-in-r)答案）但使用 svychisq 函数？不幸的是，我不知道在线提供具有大量分类变量和复杂设计的数据集。出于演示的目的，我想可以在 data(api) 中使用 dclus1，如函数帮助文件中所示，并尝试遍历前 10 个变量

```
library(survey)
data(api)
dclus1<-svydesign(id=~dnum, weights=~pw, data=apiclus1, fpc=~fpc)
svychisq(~sch.wide+stype, dclus1) 
```

任何帮助将不胜感激。

更新：我真正想做的是避免指定变量名称，而是给出变量组合的向量。例如

```
MyChi2tests <- apply( combn(colnames(apiclus1[,c(2,16:17)]),2), 2, function(z) paste(z, collapse = '+')) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T21:30:08.983

```
library(survey)
data(api)
dclus1<-svydesign(id=~dnum, weights=~pw, data=apiclus1, fpc=~fpc)

# run a simple example svychisq() function
svychisq( ~sch.wide+stype , dclus1 )

# create a function that requires a character string (containing the variables)
# and the design object and runs the svychisq() 
# on the contents of that character string's columns
scsloop <- function( vars , design ){ svychisq( as.formula( paste0( "~" , vars ) ) , design ) }

# test it out
scsloop( "sch.wide+stype" , dclus1 )
scsloop( "sch.wide+comp.imp" , dclus1 )

# either create a character vector to run it multiple times
cols.to.chisq <- c( "sch.wide" , "comp.imp" , "stype" )

# or identify them based on column number, if you prefer
cols.to.chisq <- names( apiclus1 )[ c( 2 , 16 , 17 ) ]

# find every combination of that vector, taken two at a time
combos <- combn( cols.to.chisq , 2 )

# separate them by +
col.combos <- paste( combos[ 1 , ] , combos[ 2 , ] , sep = "+" )

# run it on each of those character strings (print to screen and save to list)
( x <- lapply( col.combos , scsloop , dclus1 ) )

# just for kicks, print everything to the screen
col.combos[1] ; x[[1]]
col.combos[2] ; x[[2]]
col.combos[3] ; x[[3]] 
```

# android - 如何在android中创建一个两级列表视图？

> ID：13402830
> 
> 赞同：1
> 
> 时间：2012-11-15T17:19:55.200
> 
> 标签：android, android-layout, android-listview

刚开始使用 android，我找不到两个级别的列表视图的好例子。我遇到了`ExpandableListView`，但这不是我要查找的列表。

基本上，我想建立一个列表，显示一个类型的主题（喜剧，戏剧......），如果你点击类型，它应该打开一个列表，其中只显示特定类型的电影（fe单击喜剧 - >“新列表”仅显示喜剧电影，因此不再显示类型）

`ExpandableListView`创建类似节点树的东西，它不符合我的需要。有人有什么好的例子或建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:33:59.850

让一项活动显示顶级。当用户单击它时，启动另一个活动以显示第二个级别。

# postgresql - 使用批处理文件将csv的第一行解析为sql表

> ID：13402832
> 
> 赞同：1
> 
> 时间：2012-11-15T17:20:04.580
> 
> 标签：postgresql, csv, batch-file

我有一些 csv 文件，我需要打开 csv 文件，读取 csv 的第一行并将其转换为临时 sql 表，然后将数据加载到 sql 表中，如下所示：

读取 CSV 的行并为每一行：
将其分解为字段 创建一个临时 sql 表 将这些字段插入数据库表的一行

我尝试过这样的事情

这个脚本现在分为4部分，文件初始化；文件创建、处理和复制数据，一切正常，除了在 fil.sql 上我得到的输出为

```
 CREATE TEMP TABLE temtab(
                        firstcolumn character varying (255),
                         secondcolumn character varying (255),
                            lastcolumn character varying (255),
                            );
                         \COPY temtab from bio.csv WITH DELIMITER ; csv HEADER 
```

虽然我想最后一列没有逗号

```
 CREATE TEMP TABLE temtab (
                       firstcolumn character varying (255),
                       secondcolumn character varying (255),
                         lastcolumn character varying (255)
                           );
                   \COPY temtab from bio.csv WITH DELIMITER ; csv HEADER

            @echo off
            ::setlocal enabledelayedexpansion
            REM Assiging dir to current directory
              SET dir=%CD%
              REM Defining database name
               SET dbname=****
               REM Defining Host name
                 SET host=****
               REM Defining user
                 SET user=****
                 REM Defining Port
         SET port=****
               REM SQL file where query is to be executed
                 SET sqfile=fil.sql

           SET fi=bio.csv
                 call:fileinitialization

                call:filecreation 

                call:proces

                  call:copydata
            goto:eof

         :fileinitialization
          REM Assigning name of temporary table 
                  SET tabnam=temtab
             REM  Setting delimiter to variable delim
             SET delim=;
        REM Declaring variable numfields to store index of variable names array  
    set numFields=0
    echo para setted
    set fi=bio.csv
    SET tex=text
    SET com=,
                GOTO:EOF

           :filecreation 
          REM Setting create temporary table command with table name tabnam
             SET creat=CREATE TEMP TABLE %tabnam%
             echo %creat%

                     GOTO:EOF 

                :proces
                REM Executing loop for each file in current directory
          echo %creat%>fil.sql
        REM Read the lines of the CSV file
        For /F  "eol==" %%A in (bio.csv) Do ( set "line=%%A" 

                REM check if index of array is 0
                     if !numFields! equ 0  (
                      REM Fisrt line, Store in array name
                         for %%B in (!line: ^=!) do (
                echo %%B character varying (255^),>>fil.sql   

                        set /A numFields+=1
                    set name[!numFields!]=%%B
                    ) ) )

            GOTO:EOF

             :copydata
           echo \COPY %tabnam% from %fi% WITH DELIMITER %delim% csv HEADER
            echo \COPY %tabnam% from %fi% WITH DELIMITER %delim% csv HEADER;>>fil.sql
                  GOTO:EOF  
              ::endlocal
                     Pause 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T04:42:12.240

虽然我不知道 SQL 表的格式，但我可以向您展示如何读取 CSV 文件。下面的批处理文件从文件中读取所有行；它首先从第一行（CSV 标题）中获取字段名称并创建一个变量名称*数组*（消除字段名称中可能存在的空格）；然后它读取其余行并将每个字段值分配给其相应的 Batch 变量。

过程CSV.BAT：

```
@echo off
rem General-purpose CSV file reader program
rem Antonio Perez Ayala

setlocal EnableDelayedExpansion
set numFields=0
rem Read the lines of the CSV file
for /F "delims=" %%a in (CSVfile.csv) do (
   set "line=%%a"
   if !numFields! equ 0 (
      rem It is the first line: break it into an array of field names (removing spaces)
      for %%b in (!line: ^=!) do (
         set /A numFields+=1
         set name[!numFields!]=%%b
      )
   ) else (
      rem Replace spaces by Ascii-128 (to avoid split values that may have spaces)
      set "line=!line: =Ç!"
      rem Insert any char. at beginning of each field, and separate fields with spaces
      set i=0
      for %%b in (X!line:^,^= X!) do (
         set "field=%%b"
         rem Recover spaces in this field, if any
         set "field=!field:Ç= !"
         rem And assign it to corresponding variable (removing first character)
         set /A i+=1
         for %%i in (!i!) do set "!name[%%i]!=!field:~1!"
      )
      rem At this point all variables have the values of current record.
      rem They may be accessed explicitly (ie, from example CSVfile.csv):
      echo/
      echo Record of !FirstName! !LastName!
      rem ... or implicilty via the NAME array:
      for /L %%i in (3,1,!numFields!) do (
         for %%b in (!name[%%i]!) do echo    %%b: !%%b!
      )
   )
) 
```

CSV 文件.csv：

```
First Name,Last Name,Address,Postal Code,Company,Departament,Floor,Phone,Mobile
John,Smith,123 Fake Street,45612,SomeCo,Accounting,4,123-555-5555,123-555-5556
Jane,Doe,123 Fake Street,,SomeCo,,4,123-555-5555,123-555-5556 
```

输出：

```
Record of John Smith
   Address: 123 Fake Street
   PostalCode: 45612
   Company: SomeCo
   Departament: Accounting
   Floor: 4
   Phone: 123-555-5555
   Mobile: 123-555-5556

Record of Jane Doe
   Address: 123 Fake Street
   PostalCode:
   Company: SomeCo
   Departament:
   Floor: 4
   Phone: 123-555-5555
   Mobile: 123-555-5556 
```

请注意，该程序使用了几种先进的批处理技术。我建议您对您不完全理解的每个命令（即：SET /？）寻求帮助并仔细阅读。如果在此过程之后您对该程序还有其他问题，只需将它们作为编辑发布在您的原始问题中。

这个程序最复杂的部分是负责在对应字段为空时（两个逗号并排）给变量赋值空字符串；如果文件没有空字段，程序可能会更简单一些。此外，如果文件中出现某些特殊的 Batch 字符，例如 !，该程序（与大多数 Batch 解决方案一样）可能会给出错误的结果。如果需要，可以通过程序中的某些修改来管理大多数这些字符。

**编辑：** *不存在空字段时的修改版本*

```
@echo off
rem CSV file reader program when no empty fields exist
rem Antonio Perez Ayala

setlocal EnableDelayedExpansion
set numFields=0
rem Read the lines of the CSV file
for /F "delims=" %%a in (CSVfile.csv) do (
   set "line=%%a"
   if !numFields! equ 0 (
      rem It is the first line: break it into an array of field names (removing spaces)
      for %%b in (!line: ^=!) do (
         set /A numFields+=1
         set name[!numFields!]=%%b
      )
   ) else (
      rem Replace spaces by Ascii-128 (to avoid split values that may have spaces)
      set "line=!line: =Ç!"
      rem Separate fields (using comma as standard Batch separator)
      set i=0
      for %%b in (!line!) do (
         set "field=%%b"
         rem Assign this field to corresponding variable, recovering spaces
         set /A i+=1
         for %%i in (!i!) do set "!name[%%i]!=!field:Ç= !"
      )
      rem At this point all variables have the values of current record.
      rem They may be accessed explicitly (ie, from example CSVfile.csv):
      echo/
      echo Record of !FirstName! !LastName!
      rem ... or implicilty via the NAME array:
      for /L %%i in (3,1,!numFields!) do (
         for %%b in (!name[%%i]!) do echo    %%b: !%%b!
      )
   )
) 
```

请注意，除空格外，FOR 集中的标准分隔符是逗号、分号和等号：

```
for %a in (one two,three;four=five) do echo %a 
```

以前的程序用另一个字符替换空格并使用逗号分隔字段。但是，如果该行可能包含分号或等号，则字段将在该点拆分，因此在这种情况下，必须在 FOR 之前将这些字符更改为另一个字符，并在稍后恢复，以与空格相同的方式。

**编辑：** *新请求的修改（消除最后一个逗号）*

消除最后一个逗号并非易事，尽管也不是太复杂。我希望我的方法易于理解；它基于显示文本（输入提示）的 SET /P 命令行为，末尾没有新行；请注意，格式为`SET /P =text>>out<NUL`. 该`<NUL`部件是必需的，因此 SET /P 不会等待输入；`<`（与 相同）之前不要留空格`>>`。但是，我认为这种行为在 Windows Vista 和更高版本中不起作用。如果该方法对您不起作用，则必须再次对其进行修改...

我也继续前进，包括一些关于您的代码中仍然缺少的部分的评论（我认为），即几个文件的处理。

```
:proces
REM Executing loop for each file in current directory
REM *This may be done with a FOR loop:*
::*for %%F in (*.csv) do (*
    REM *The file name is given by %%F. In this case, the fileinitialization part*
    REM *must be done here, for example:*
    set numFields=0
    echo %creat%>fil.sql
    REM Read the lines of the CSV file
    For /F "eol==" %%A in (bio.csv) Do ( 
        set "line=%%A" 
        REM check if index of array is 0
        if !numFields! equ 0  (
            REM First line, Store in array name
            for %%B in (!line: ^=!) do (
                REM Note that I changed the place of the ECHO command
                set /A numFields+=1
                set name[!numFields!]=%%B
                if !numFields! equ 1 (
                    REM First field: show it with NO comma and NO NEW LINE
                    set /P =%%B (text^)>>%sqfile%<NUL
                ) else (
                    REM Next fields: complete the comma of previous field, WITH NEW LINE
                    echo ,>>%sqfile%
                    REM ... and show this field with NO comma and NO NEW LINE (again)
                    set /P =%%B (text^)>>%sqfile%<NUL
                )
            )
            REM Insert the new line of last field (that have NOT comma :-)
            echo/>>%sqfile%
        )
    )
::*)*
GOTO:EOF

:copydata 
```

我强烈建议您保留我以前的格式：每个代码块内用括号括起来的 4 个对齐列，并将右括号放在打开命令 FOR 或 IF 的同一列中。这种格式将帮助您轻松定位大型程序中括号不匹配导致的错误。

安东尼奥

# android - Android中的premission和wifi问题

> ID：13402837
> 
> 赞同：0
> 
> 时间：2012-11-15T17:20:21.990
> 
> 标签：android, android-manifest, wifimanager

我想获得一些关于我所连接的 wifi 的信息，但我不断收到关于我的权限的错误，但我想他们应该没问题。你能帮帮我吗？

我的第一行`logcat`描述了这个问题。这条线是我打电话的地方`wifi.getConnectionInfo();`

我的java代码：

```
import android.net.wifi.WifiManager;
import android.os.Bundle;
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class MainActivity extends Activity {

//    private ConnectivityReceiver receiver = null;
//    private TextView txtNetworkInfo = null;
      private WifiManager wifi;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Button b = (Button) findViewById(R.id.button1);
    Button b2 = (Button) findViewById(R.id.button2);
    wifi = (WifiManager) getSystemService(Context.WIFI_SERVICE);
    b.setOnClickListener(new OnClickListener(){

        public void onClick(View arg0) {
            // TODO Auto-generated method stub

            wifi.getConnectionInfo();
//              startService(new Intent(MainActivity.this, CheckService.class));
        }

    });
    b2.setOnClickListener(new OnClickListener(){

        public void onClick(View arg0) {
            // TODO Auto-generated method stub
//              stopService(new Intent(MainActivity.this, CheckService.class));
        }

    });
}
} 
```

还有我的日志猫-

```
11-15 18:08:37.583: E/AndroidRuntime(28200): FATAL EXCEPTION: main
11-15 18:08:37.583: E/AndroidRuntime(28200): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.jesper.soundchange/com.jesper.soundchange.MainActivity}: java.lang.SecurityException: WifiService: Neither user 10067 nor current process has android.permission.ACCESS_WIFI_STATE.
11-15 18:08:37.583: E/AndroidRuntime(28200):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2787)
11-15 18:08:37.583: E/AndroidRuntime(28200):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2803)
11-15 18:08:37.583: E/AndroidRuntime(28200):    at android.app.ActivityThread.access$2300(ActivityThread.java:135)
11-15 18:08:37.583: E/AndroidRuntime(28200):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2136)
11-15 18:08:37.583: E/AndroidRuntime(28200):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-15 18:08:37.583: E/AndroidRuntime(28200):    at android.os.Looper.loop(Looper.java:144)
11-15 18:08:37.583: E/AndroidRuntime(28200):    at android.app.ActivityThread.main(ActivityThread.java:4937)
11-15 18:08:37.583: E/AndroidRuntime(28200):    at java.lang.reflect.Method.invokeNative(Native Method)
11-15 18:08:37.583: E/AndroidRuntime(28200):    at java.lang.reflect.Method.invoke(Method.java:521)
11-15 18:08:37.583: E/AndroidRuntime(28200):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
11-15 18:08:37.583: E/AndroidRuntime(28200):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
11-15 18:08:37.583: E/AndroidRuntime(28200):    at dalvik.system.NativeStart.main(Native Method)
11-15 18:08:37.583: E/AndroidRuntime(28200): Caused by: java.lang.SecurityException: WifiService: Neither user 10067 nor current process has android.permission.ACCESS_WIFI_STATE.
11-15 18:08:37.583: E/AndroidRuntime(28200):    at android.os.Parcel.readException(Parcel.java:1247)
11-15 18:08:37.583: E/AndroidRuntime(28200):    at android.os.Parcel.readException(Parcel.java:1235)
11-15 18:08:37.583: E/AndroidRuntime(28200):    at android.net.wifi.IWifiManager$Stub$Proxy.getDhcpInfo(IWifiManager.java:754)
11-15 18:08:37.583: E/AndroidRuntime(28200):    at android.net.wifi.WifiManager.getDhcpInfo(WifiManager.java:712)
11-15 18:08:37.583: E/AndroidRuntime(28200):    at com.jesper.soundchange.MainActivity.onCreate(MainActivity.java:30)
11-15 18:08:37.583: E/AndroidRuntime(28200):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1069)  
11-15 18:08:37.583: E/AndroidRuntime(28200):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2751) 
```

我的清单——

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.jesper.soundchange"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="15" />

<uses-permission android:name="android.permission.INTERNET" />
<user-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<user-permission android:name="android.permission.ACCESS_WIFI_STATE" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
        <service
    android:name=".CheckService"
    android:label="My Service" >
</service>
</application> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T18:07:45.680

根据您提供的信息：

a) 确保您正在编辑正确的 manifest.xml（位于**bin/res**中）

b）我没有看到清单的开始和结束标签。( ) 但我很确定你那里有它们。

c) 我无法在您当前的上下文中发现任何编码错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:06:59.870

发现。我在最后两行拼错了 uses-permission :)

# javascript - 画布中的缩放方法

> ID：13402839
> 
> 赞同：1
> 
> 时间：2012-11-15T17:20:24.890
> 
> 标签：javascript, html, html5-canvas

`zoom()`当用户单击`zoom_in`,`zoom_out`按钮时，我正在使用该功能。该`img_update()`函数用于重绘画布元素。

现在缩放仅在我在画布上绘画后才起作用，但我希望在用户单击缩放按钮后立即看到缩放效果。我怎样才能解决这个问题？

```
function zoom() {
    switch(this.id) {
        case "zoom_in":
            scale /= scaleMultiplier;
            img_update(scale);
            break;
        case "zoom_out":
            scale *= scaleMultiplier;
            img_update(scale);
            break;
    }
}

function img_update( scale ) {
    redoArray.length = 0;
    flag = 0;
    contextUI.scale(scale, scale);
    contextUI.transform(scale, scale);
    contextUI.drawImage(canvas, 0, 0);
    context.clearRect(0, 0, w, h);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T17:48:49.667

我的猜测是，当您第一次尝试单击缩放时，比例是未定义的，但在渲染之后，它就会被定义。控制台记录一切

# java - 如何将字符串保存到 Android 中的文件以便以后读取？

> ID：13402840
> 
> 赞同：0
> 
> 时间：2012-11-15T17:20:25.813
> 
> 标签：java, android

我试图在[http://developer.android.com/guide/topics/data/data-storage.html中实现“使用内部存储”部分](http://developer.android.com/guide/topics/data/data-storage.html)

我想我第一部分做得对，将字符串保存到文件中，但是以后如何读取字符串？

她是我的代码的样子：

```
String FILEPROFILE = "profileinfo";
FileOutputStream fos = null;
BufferedInputStream fis = null;
OutputStream out = null;

          try {
            fos = openFileOutput(FILEPROFILE, Context.MODE_PRIVATE);
            fos.write(profile.toString().getBytes());
            fos.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        try {
            fis = new BufferedInputStream(new FileInputStream(FILEPROFILE));
            Log.d("UsersThoughts", "BufferedInputStream is " + fis.read());
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

编辑：我把它改成这样：

```
 try {
            fis = openFileInput(FILEPROFILE);
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        try {
            Log.d("UsersThoughts", "This blah object read " + fis.read());
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            Log.e("UsersThoughts", "This blah object trying to read: " + e.toString());
        }

          try{
              Log.d("UsersThoughts", "This blah object toString " + fis.toString());
          } catch (Exception e)
          {
                e.printStackTrace();
                Log.e("UsersThoughts", "This blah object trying to make string: " + e.toString());
          } 
```

logcat 中的输出如下所示：

```
 11-15 18:41:34.862: D/UsersThoughts(7777): This blah object read123
 11-15 18:41:34.862: D/UsersThoughts(7777): This blah object toString java.io.FileInputStream@46356128 
```

看起来它正在以咬的形式读取文件....如何取回我复制的文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:23:14.917

我从您引用的同一来源引用此内容：

> 从内部存储读取文件：
> 
> 1.  调用 openFileInput() 并将要读取的文件的名称传递给它。这将返回一个 FileInputStream。
>     
>     
> 2.  使用 read() 从文件中读取字节。
>     
>     
> 3.  然后用 close() 关闭流。

**编辑：**例如，

```
FileInputStream fis = openFileInput("FILENAME");
BufferedInputStream blah = new BufferedInputStream(fis); 
```

`blah`然后用这个对象做你之前做的任何事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:44:12.923

按照我在此处给出的答案将字符串存储到 Android 中的文件：[如果用户离线，我应该将数据存储在 sqlite 中吗？](https://stackoverflow.com/questions/13392966/should-i-store-data-in-sqlite-in-case-user-is-offline/13393375#13393375)

# asp.net-mvc-3 - MVC3 中的表单身份验证票空问题

> ID：13402841
> 
> 赞同：0
> 
> 时间：2012-11-15T17:20:48.847
> 
> 标签：asp.net-mvc-3, autofac, form-authentication

在 MVC3 应用程序中间歇性丢弃身份验证 cookie (.ASPXAUTH) 的原因是什么？

我检查了 cookie 的大小，它似乎在 2kB 左右。

它在登录过程中没有任何问题，并且在站点中执行很少的操作。但是在执行了一个特定的操作之后（我从服务器返回一个 pdf 文件，并且 cookie 没有被触及），它对极少数用户来说是下降的。

用户在某些操作后退出系统是否还有其他原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:59:51.247

我刚刚得到信息，如果您的应用程序正在被服务器回收，则可以删除 cookie。有三种情况会导致您的应用程序池被服务器回收。1\. CPU使用率过高。2\. 内存使用过多。3\. 20分钟没有http调用。

# javascript - CSS 属性更改

> ID：13402846
> 
> 赞同：0
> 
> 时间：2012-11-15T17:21:00.180
> 
> 标签：javascript, jquery, html, css

我有这样的CSS：

```
.cls .imageX
{
  float:left;
}

.cls .imageY
{
  float:right;
} 
```

它正在这样的页面中使用：

```
<div class="cls">
<a href="" class="imageX"><img src="left.png"/></a>
<a href="" class="imageY"><img src="right.png"/></a>
</div> 
```

我没有该网站的源代码。我通过 firebug 看到了这个源，我必须编写 JS 代码来通过 onload 事件更改它。那是我的工作。现在我希望它变成：

```
<div class="cls">
<a href="" class="imageX"><img src="right.png"/></a>
<a href="" class="imageY"><img src="left.png"/></a>
</div> 
```

我认为有两种方法可以解决这个问题，但遗憾的是根本没有对我有用

```
1>  $('.cls .imageX img').attr('src','right.png');
    $('.cls .imageY img').attr('src','left.png');

2>  $('.cls .imageX').css('float','right'); 
    $('.cls .imageY').css('float','left'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:29:46.303

# python - 如何在没有 dunder setattr 或 pdb 的情况下观察 python 中的变量变化

> ID：13402847
> 
> 赞同：16
> 
> 时间：2012-11-15T17:21:02.137
> 
> 标签：python, debugging, introspection, pdb

有一个大型 python 项目，其中一个类的一个属性在某个地方有错误的值。

它应该是 sqlalchemy.orm.attributes.InstrumentedAttribute，但是当我运行测试时它是常量值，比如说字符串。

有一些方法可以在调试模式下运行 python 程序，并在每一步通过代码行后自动运行一些检查（如果变量改变了类型）？

PS我知道如何在检查和属性装饰器的帮助下记录类实例属性的变化。可能在这里我可以将此方法与元类一起使用...

但有时我需要更通用和更强大的解决方案......

谢谢你。

PPS 我需要类似的东西：[https](https://stackoverflow.com/a/7669165/816449) ://stackoverflow.com/a/7669165/816449 ，但可能会对该代码中发生的事情进行更多解释。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-15T19:40:06.133

好吧，这是一种*缓慢*的方法。可以修改它以观察局部变量的变化（仅按名称）。下面是它的工作原理：我们做 sys.settrace 并分析 obj.attr 每一步的值。棘手的部分是我们`'line'`在执行 line 之前接收事件（执行了某些 line）。因此，当我们注意到 obj.attr 发生了变化时，我们已经在下一行并且我们无法获取上一行的帧（因为没有为每一行复制帧，它们被修改了）。`traceback.format_stack`因此，在我保存到的每一行事件中`watcher.prev_st`，如果在下一次调用`trace_command`值时发生了变化，我们将保存的堆栈跟踪打印到文件中。在每一行上保存回溯是一项非常昂贵的操作，因此您必须设置`include`将关键字添加到项目目录列表（或只是项目的根目录）中，以免看到其他库如何做他们的工作并浪费 cpu。

**观察者.py**

```
import traceback

class Watcher(object):
    def __init__(self, obj=None, attr=None, log_file='log.txt', include=[], enabled=False):
        """
            Debugger that watches for changes in object attributes
            obj - object to be watched
            attr - string, name of attribute
            log_file - string, where to write output
            include - list of strings, debug files only in these directories.
               Set it to path of your project otherwise it will take long time
               to run on big libraries import and usage.
        """

        self.log_file=log_file
        with open(self.log_file, 'wb'): pass
        self.prev_st = None
        self.include = [incl.replace('\\','/') for incl in include]
        if obj:
            self.value = getattr(obj, attr)
        self.obj = obj
        self.attr = attr
        self.enabled = enabled # Important, must be last line on __init__.

    def __call__(self, *args, **kwargs):
        kwargs['enabled'] = True
        self.__init__(*args, **kwargs)

    def check_condition(self):
        tmp = getattr(self.obj, self.attr)
        result = tmp != self.value
        self.value = tmp
        return result

    def trace_command(self, frame, event, arg):
        if event!='line' or not self.enabled:
            return self.trace_command
        if self.check_condition():
            if self.prev_st:
                with open(self.log_file, 'ab') as f:
                    print >>f, "Value of",self.obj,".",self.attr,"changed!"
                    print >>f,"###### Line:"
                    print >>f,''.join(self.prev_st)
        if self.include:
            fname = frame.f_code.co_filename.replace('\\','/')
            to_include = False
            for incl in self.include:
                if fname.startswith(incl):
                    to_include = True
                    break
            if not to_include:
                return self.trace_command
        self.prev_st = traceback.format_stack(frame)
        return self.trace_command
import sys
watcher = Watcher()
sys.settrace(watcher.trace_command) 
```

**测试观察者.py**

```
from watcher import watcher
import numpy as np
import urllib2
class X(object):
    def __init__(self, foo):
        self.foo = foo

class Y(object):
    def __init__(self, x):
        self.xoo = x

    def boom(self):
        self.xoo.foo = "xoo foo!"
def main():
    x = X(50)
    watcher(x, 'foo', log_file='log.txt', include =['C:/Users/j/PycharmProjects/hello'])
    x.foo = 500
    x.goo = 300
    y = Y(x)
    y.boom()
    arr = np.arange(0,100,0.1)
    arr = arr**2
    for i in xrange(3):
        print 'a'
        x.foo = i

    for i in xrange(1):
        i = i+1

main() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-13T20:15:15.227

尝试使用`__setattr__`覆盖尝试进行属性分配时调用的函数。[文档](https://docs.python.org/3/reference/datamodel.html#object.__setattr__)_`__setattr__`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-02-05T14:45:30.630

监视对象属性更改（也可以是模块级变量或任何可访问的对象）的更简单方法`getattr`是利用[`hunter`](https://pypi.org/project/hunter/)库，*这是一个灵活的代码跟踪工具包*。为了检测状态变化，我们需要一个如下所示的谓词：

```
import traceback

class MutationWatcher:

    def __init__(self, target, attrs):
        self.target = target
        self.state = {k: getattr(target, k) for k in attrs}

    def __call__(self, event):
        result = False
        for k, v in self.state.items():
            current_value = getattr(self.target, k)
            if v != current_value:
                result = True
                self.state[k] = current_value
                print('Value of attribute {} has chaned from {!r} to {!r}'.format(
                    k, v, current_value))

        if result:
            traceback.print_stack(event.frame)

        return result 
```

然后给出一个示例代码：

```
class TargetThatChangesWeirdly:
    attr_name = 1

def some_nested_function_that_does_the_nasty_mutation(obj):
    obj.attr_name = 2

def some_public_api(obj):
    some_nested_function_that_does_the_nasty_mutation(obj) 
```

我们可以使用以下方法对其进行检测`hunter`：

```
# or any other entry point that calls the public API of interest
if __name__ == '__main__':
    obj = TargetThatChangesWeirdly()

    import hunter
    watcher = MutationWatcher(obj, ['attr_name'])
    hunter.trace(watcher, stdlib=False, action=hunter.CodePrinter)

    some_public_api(obj) 
```

运行该模块会产生：

```
Value of attribute attr_name has chaned from 1 to 2
  File "test.py", line 44, in <module>
    some_public_api(obj)
  File "test.py", line 10, in some_public_api
    some_nested_function_that_does_the_nasty_mutation(obj)
  File "test.py", line 6, in some_nested_function_that_does_the_nasty_mutation
    obj.attr_name = 2
                                 test.py:6     return        obj.attr_name = 2
                                               ...       return value: None 
```

你也可以使用其他支持`action`的s `hunter`。例如， [`Debugger`](https://python-hunter.readthedocs.io/en/latest/reference.html#hunter.Debugger)它闯入`pdb`（属性更改的调试器）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-12-09T07:40:38.393

有一个非常简单的方法可以做到这一点：使用[watchpoints](https://github.com/gaogaotiantian/watchpoints)。

基本上你只需要做

```
from watchpoints import watch
watch(your_object.attr) 
```

就是这样。每当更改属性时，它都会打印出更改它的行以及它是如何更改的。超级容易使用。

它还具有更高级的功能，例如，您可以在变量更改时调用 pdb，或者使用自己的回调函数而不是将其打印到 stdout。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T17:33:45.313

您可以使用[python 调试器模块](http://docs.python.org/2/library/pdb.html)（标准库的一部分）

要使用，只需在源文件顶部导入 pdb：

```
import pdb 
```

然后在要开始检查代码的任何位置设置跟踪：

```
pdb.set_trace() 
```

然后，您可以使用 单步执行代码`n`，并通过运行 python 命令调查当前状态。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-12-06T07:15:33.617

```
def __setattr__(self, name, value):
    if name=="xxx":
       util.output_stack('xxxxx')
    super(XXX, self).__setattr__(name, value) 
```

这个示例代码帮助了我。

# objective-c - OCLint 使用示例

> ID：13402854
> 
> 赞同：2
> 
> 时间：2012-11-15T17:21:28.383
> 
> 标签：objective-c, static-code-analysis

我正在寻找有关如何配置 OCLint 或如何使其运行的示例。我进行了搜索，但没有。在 Stack Overflow 上只有 3 个相关的帖子，只是命名库，在谷歌上只有官方的[OCLint.org](http://OCLint.org)

官方文档说：

```
[user@localhost ~]$ oclint -help
OVERVIEW: OCLint, a static code analysis tool for Objective-C and related languages

USAGE: oclint [options] <input files>

OPTIONS:
  -D <macro>               - Predefine the specified macro
  -F <directory>           - Add directory to framework include search path
  -I <directory>           - Add directory to include search path
  -R <directory>           - Add directory to rule loading path
  -arch <arch_name>        - Specify which architecture (e.g. ppc, i386, x86_64, armv7) the compilation 
                             should targets.
  -help                    - Display available options (-help-hidden for more)
  -include <file>          - Include file before parsing
  -isysroot <directory>    - Add directory to SYSTEM include search path
  -o <file>                - Write output to <file>
  -rc <paramemter>=<value> - Change the baheviour of rules
  -stats                   - Enable statistics output from program
  Choose report type:
    -text                  - Plain text report
    -html                  - HTML formatted report
  -version                 - Display the version of this program
  -x <value>               - Input language type 
```

但我想更好地解释宏 (-D)，以及为 -I、-F、-R 选择哪条路径以及我应该指出什么。代码示例为

```
$ oclint path/to/file.m -D something -I something -F something -R something 
```

并且预期的输出将是巨大的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T23:27:53.710

基本上，您只需将`oclint`您提供给编译器的任何内容都提供给您。

[`oclint-xcodebuild`](https://github.com/oclint/oclint-xcodebuild)或者，如果您不熟悉编译器标志，您可能想尝试一下。这是一个从 Xcode 构建日志文件中提取标志的 Python 脚本。[请参阅此处](http://docs.oclint.org/en/stable/guide/xcodebuild.html)的用法。

# c# - 任何示例项目都使用 DirectShow.NET 库在同一项目中捕获图像和捕获视频？

> ID：13402855
> 
> 赞同：4
> 
> 时间：2012-11-15T17:21:28.897
> 
> 标签：c#, directshow, directshow.net

是否有任何示例项目使用 DirectShow.NET 库在同一项目中捕获图像和捕获视频？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T17:35:24.827

是的，实际上有很多，但这是几年前让我开始的一个。

[http://www.codeproject.com/Articles/10248/Motion-Detection-Algorithms](http://www.codeproject.com/Articles/10248/Motion-Detection-Algorithms)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T18:21:08.693

您将面临的一个典型问题是视频捕获设备是专用资源。如果您正在捕获视频，则无法单独捕获静止图像，您需要从正在运行的管道（即快照）中抓取单个视频帧，它们就是您的图像/静止图像。这当然假设您有兴趣从相同的硬件捕获，否则没有什么能阻止通过相同或不同的 API 同时使用独立设备。

# c# - C# 和 PHP 上的三重 DES 加密产生不同的结果

> ID：13402856
> 
> 赞同：3
> 
> 时间：2012-11-15T17:21:33.157
> 
> 标签：c#, php, encryption, 3des

我正在为登录编写一个简单的加密系统，但我有一个小问题。C#加密函数：

```
public static string EncryptString(string Message, string Passphrase)
{
    byte[] Results;
    System.Text.UTF8Encoding UTF8 = new System.Text.UTF8Encoding();

    // Step 1\. We hash the passphrase using MD5
    // We use the MD5 hash generator as the result is a 128 bit byte array
    // which is a valid length for the TripleDES encoder we use below

    MD5CryptoServiceProvider HashProvider = new MD5CryptoServiceProvider();
    byte[] TDESKey = HashProvider.ComputeHash(UTF8.GetBytes(Passphrase));

    // Step 2\. Create a new TripleDESCryptoServiceProvider object
    TripleDESCryptoServiceProvider TDESAlgorithm = new TripleDESCryptoServiceProvider();

    // Step 3\. Setup the encoder
    TDESAlgorithm.Key = TDESKey;
    TDESAlgorithm.Mode = CipherMode.ECB;
    TDESAlgorithm.Padding = PaddingMode.PKCS7;

    // Step 4\. Convert the input string to a byte[]
    byte[] DataToEncrypt = UTF8.GetBytes(Message);

    // Step 5\. Attempt to encrypt the string
    try
    {
        ICryptoTransform Encryptor = TDESAlgorithm.CreateEncryptor();
        Results = Encryptor.TransformFinalBlock(DataToEncrypt, 0, DataToEncrypt.Length);
    }
    finally
    {
        // Clear the TripleDes and Hashprovider services of any sensitive information
        TDESAlgorithm.Clear();
        HashProvider.Clear();
    }

    // Step 6\. Return the encrypted string as a base64 encoded string
    return Convert.ToBase64String(Results);
} 
```

`EncryptString("test", "123456")`返回`"Yjaqhc7RFds="`。

php中的相同代码：

```
 <?php
    $key = "123456";
    function pkcs7_pad($text, $blocksize)
    {
        $pad = $blocksize - (strlen($text) % $blocksize);
        return $text . str_repeat(chr($pad), $pad);
    }

    $input = pkcs7_pad("test", 16);
    $key = md5(utf8_encode($key), true);
    $td = mcrypt_module_open('tripledes', '', 'ecb', '');
    $iv = mcrypt_create_iv (mcrypt_enc_get_iv_size($td), MCRYPT_RAND);
    mcrypt_generic_init($td, $key, $iv);
    $encrypted_data = mcrypt_generic($td, $input);
    mcrypt_generic_deinit($td);
    mcrypt_module_close($td);

    echo base64_encode($encrypted_data);
?> 
```

回报`"dybhiZYdKG8pNCgCFkbV6g=="`？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-15T19:45:57.887

您遇到了这个问题，因为 Triple DES 的密钥大小是 168 位（21 字节），但 MD5 生成的哈希值只有 16 字节（128 位）长。

这意味着密钥必须扩展到 168 位，以便三重 DES 可以工作。事实证明，这种从 128 位到 168 位的推导在 C# 中与在 PHP 中的工作方式不同，因此有效使用的密钥不同，从而导致加密数据不同。

现在你有两个选择：

* * *

### 选项 1：选择完全支持 128 位密钥的密码

如果您使用支持 128 位密钥的密码，则可以避免所有与密钥大小差异相关的问题。这将需要对您的代码进行最少的更改。例如，您可以使用 Rijndael (AES)。

**C#**：更改`TripleDESCryptoServiceProvider`为`RijndaelManaged`.
其他一切都可以保持不变。[**（演示）**](http://ideone.com/huPErj)

**PHP**：使用`MCRYPT_RIJNDAEL_128`而不是三元组[**（演示）**](http://ideone.com/TEU3zr)：

```
function encrypt_pkcs7($str, $key)
{
    $key = md5(utf8_encode($key), true);
    $block = mcrypt_get_block_size(MCRYPT_RIJNDAEL_128, MCRYPT_MODE_ECB);
    $pad = $block - (strlen($str) % $block);
    $str .= str_repeat(chr($pad), $pad);

    $ciphertext = mcrypt_encrypt(MCRYPT_RIJNDAEL_128, $key, $str, MCRYPT_MODE_ECB);
    return base64_encode($ciphertext);
}

echo encrypt_pkcs7('test', '123456'); 
```

请注意，AES 的有效密钥大小大于 Triple DES。尽管 Triple DES 的密钥长度为 168 位，但它仅提供 112 位的安全性。如果我是你，我会选择这个选项。

* * *

### 选项 2：使用 192 位密钥而不是 128 位密钥

如果您使用比 Triple DES 实际使用的更大的密钥，C# 和 PHP 似乎就如何将其减少到 168 位达成一致。您可以使用 SHA-256 之类的哈希函数来执行此操作，该函数会生成 256 位哈希并将其修剪为 192 位（24 字节）：

**C#**：使用`SHA256CryptoServiceProvider`and`Array.Copy`获取 192 位密钥，并将其与程序的其余部分一起使用：（[**演示）**](http://ideone.com/emTLD9)

```
SHA256CryptoServiceProvider HashProvider = new SHA256CryptoServiceProvider();
byte[] temp = HashProvider.ComputeHash(UTF8.GetBytes(Passphrase));
byte[] key = new byte[24];
Array.Copy(temp, key, 24); 
```

**PHP** :`hash()`与 SHA-256 一起使用并`substr()`获取 192 位密钥

```
function encrypt_pkcs7($str, $key)
{
    // derive 192-bit key using SHA-256
    $key = substr(hash('sha256', $key, true), 0, 24);
    $block = mcrypt_get_block_size(MCRYPT_3DES, MCRYPT_MODE_ECB);
    $pad = $block - (strlen($str) % $block);
    $str .= str_repeat(chr($pad), $pad);

    $ciphertext = mcrypt_encrypt(MCRYPT_3DES, $key, $str, MCRYPT_MODE_ECB);
    return base64_encode($ciphertext);
}

echo encrypt_pkcs7('test', '123456'); 
```

看起来我无法提供 168 位密钥`TripleDESCryptoServiceProvider`，我不知道为什么。

* * *

### 其他注意事项：

*   考虑使用 SSL；即使它是自签名证书。它胜过重新发明轮子，当涉及密码学时，这是一项特别危险的任务。

*   考虑使用 ECB 以外的操作模式（例如：CBC）。使用欧洲央行会增加安全风险。阅读[有关分组密码操作模式的 Wikipedia 文章](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation)。

*   除非您**绝对**需要明文密码（很少出现这种情况），否则您应该对密码进行哈希处理。阅读[这篇关于保护密码的文章。](http://crackstation.net/hashing-security.htm)

*   考虑使用适当的基于密码的密钥派生函数，如[PBKDF2](http://en.wikipedia.org/wiki/PBKDF2) ，而不是像 MD5 或 SHA 系列这样的通用哈希函数。这将使破解密钥变得更加困难。有关更多信息，请阅读上一个要点中的文章。

# php - 如何验证 TLS SMTP 证书在 PHP 中是否有效？

> ID：13402866
> 
> 赞同：17
> 
> 时间：2012-11-15T17:21:55.980
> 
> 标签：php, smtp, ssl-certificate, starttls

为了防止中间人攻击（伪装成其他人的服务器），我想验证我通过 SSL 连接的 SMTP 服务器是否具有有效的 SSL 证书，证明它就是我认为的那个人。

例如，在端口 25 上连接到 SMTP 服务器后，我可以像这样切换到安全连接：

```
<?php

$smtp = fsockopen( "tcp://mail.example.com", 25, $errno, $errstr ); 
fread( $smtp, 512 ); 

fwrite($smtp,"HELO mail.example.me\r\n"); // .me is client, .com is server
fread($smtp, 512); 

fwrite($smtp,"STARTTLS\r\n");
fread($smtp, 512); 

stream_socket_enable_crypto( $smtp, true, STREAM_CRYPTO_METHOD_TLS_CLIENT ); 

fwrite($smtp,"HELO mail.example.me\r\n"); 
```

但是，没有提到 PHP 在哪里检查 SSL 证书。PHP 是否有内置的根 CA 列表？它只是接受什么吗？

**验证证书是否有效以及 SMTP 服务器确实是我认为的身份的正确方法是什么？**

# 更新

根据[PHP.net 上的这个评论，](http://www.php.net/manual/en/function.stream-socket-client.php#85345)我似乎可以使用一些流选项进行 SSL 检查。最好的部分是[stream_context_set_option](http://php.net/manual/en/function.stream-context-set-option.php)接受上下文*或流资源*。因此，在 TCP 连接的某个时刻，您可以使用[CA cert bundle](http://curl.haxx.se/docs/caextract.html)切换到 SSL 。

```
$resource = fsockopen( "tcp://mail.example.com", 25, $errno, $errstr ); 

...

stream_set_blocking($resource, true);

stream_context_set_option($resource, 'ssl', 'verify_host', true);
stream_context_set_option($resource, 'ssl', 'verify_peer', true);
stream_context_set_option($resource, 'ssl', 'allow_self_signed', false);

stream_context_set_option($resource, 'ssl', 'cafile', __DIR__ . '/cacert.pem');

$secure = stream_socket_enable_crypto($resource, true, STREAM_CRYPTO_METHOD_TLS_CLIENT);
stream_set_blocking($resource, false);

if( ! $secure)
{
    die("failed to connect securely\n");
} 
```

此外，请参阅扩展[SSL 选项的](http://us1.php.net/manual/en/context.ssl.php)[上下文选项和参数](http://us1.php.net/manual/en/context.php)。

**但是，虽然这现在解决了主要问题 - 我如何验证*有效*证书实际上属于我正在连接的域/IP？**

换句话说，我连接的服务器的证书也可能有一个有效的证书 - 但我怎么知道它对“example.com”有效，而不是另一个使用有效证书的服务器像“example.com”一样？

# 更新 2

您似乎可以使用 Steam 上下文参数[捕获 SSL 证书并使用](https://stackoverflow.com/a/3081093/99923)[openssl_x509_parse](http://php.net/manual/en/function.openssl-x509-parse.php)对其进行解析。

```
$cont = stream_context_get_params($r);
print_r(openssl_x509_parse($cont["options"]["ssl"]["peer_certificate"])); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-18T01:10:40.500

**更新**：有更好的方法，请参阅评论。

您可以捕获证书并使用`openssl`作为过滤器与服务器进行对话。通过这种方式，您可以提取证书并在同一连接期间对其进行检查。

这是一个不完整的实现（不存在实际的邮件发送对话），应该可以帮助您入门：

```
<?php
    $server = 'smtp.gmail.com';

    $pid    = proc_open("openssl s_client -connect $server:25 -starttls smtp",
                    array(
                            0 => array('pipe', 'r'),
                            1 => array('pipe', 'w'),
                            2 => array('pipe', 'r'),
                    ),
                    $pipes,
                    '/tmp',
                    array()
            );
    list($smtpout, $smtpin, $smtperr) = $pipes; unset($pipes);

    $stage  = 0;
    $cert   = 0;
    $certificate = '';
    while(($stage < 5) && (!feof($smtpin)))
    {
            $line = fgets($smtpin, 1024);
            switch(trim($line))
            {
                    case '-----BEGIN CERTIFICATE-----':
                            $cert   = 1;
                            break;
                    case '-----END CERTIFICATE-----':
                            $certificate .= $line;
                            $cert   = 0;
                            break;
                    case '---':
                            $stage++;
            }
            if ($cert)
                    $certificate .= $line;
    }
    fwrite($smtpout,"HELO mail.example.me\r\n"); // .me is client, .com is server
    print fgets($smtpin, 512);
    fwrite($smtpout,"QUIT\r\n");
    print fgets($smtpin, 512);

    fclose($smtpin);
    fclose($smtpout);
    fclose($smtperr);
    proc_close($pid);

    print $certificate;

    $par    = openssl_x509_parse($certificate);
?> 
```

当然，在向服务器发送任何有意义的内容之前，您将移动证书解析和检查。

在`$par`数组中，您应该找到（在其余部分中）名称，与主题相同。

```
Array
(
    [name] => /C=US/ST=California/L=Mountain View/O=Google Inc/CN=smtp.gmail.com
    [subject] => Array
        (
            [C] => US
            [ST] => California
            [L] => Mountain View
            [O] => Google Inc
            [CN] => smtp.gmail.com
        )

    [hash] => 11e1af25
    [issuer] => Array
        (
            [C] => US
            [O] => Google Inc
            [CN] => Google Internet Authority
        )

    [version] => 2
    [serialNumber] => 280777854109761182656680
    [validFrom] => 120912115750Z
    [validTo] => 130607194327Z
    [validFrom_time_t] => 1347451070
    [validTo_time_t] => 1370634207
    ...
    [extensions] => Array
        (
            ...
            [subjectAltName] => DNS:smtp.gmail.com
        ) 
```

要检查有效性，除了 SSL 自行执行的日期检查等之外，您必须验证这些条件中的任何一个是否适用：

*   实体的 CN 是您的 DNS 名称，例如“CN = smtp.your.server.com”

*   定义了扩展，它们包含一个 subjectAltName，一旦使用 展开`explode(',', $subjectAltName)`，就会产生一组以 - 为前缀的`DNS:`记录，*其中至少有一个*与您的 DNS 名称匹配。如果不匹配，则拒绝证书。

# PHP中的证书验证

*不同软件中验证主机*的含义[充其量](http://www.cs.utexas.edu/~shmat/shmat_ccs12.pdf)似乎是模糊的。

所以我决定深入了解这一点，并下载了 OpenSSL 的源代码（openssl-1.0.1c）并尝试自己检查一下。

我没有发现对我期望的代码的引用，即：

*   尝试解析冒号分隔的字符串
*   引用`subjectAltName`（OpenSSL 调用`SN_subject_alt_name`）
*   使用“DNS[:]”作为分隔符

OpenSSL 似乎将所有证书详细信息放入一个结构中，对*其中一些*运行非常基本的测试，但大多数“人类可读”字段都被单独留下。这是有道理的：可以说名称检查比证书签名检查处于更高级别

然后我还下载了最新的 cURL 和最新的 PHP tarball。

在 PHP 源代码中我也一无所获；显然，任何选项都只是向下传递，否则会被忽略。此代码运行时没有警告：

```
 stream_context_set_option($smtp, 'ssl', 'I-want-a-banana', True); 
```

后来`stream_context_get_options`尽职尽责地取回

```
 [ssl] => Array
        (
            [I-want-a-banana] => 1
            ... 
```

这也是有道理的：PHP 无法知道，在“上下文选项设置”上下文中，将使用哪些选项。

同样，证书解析代码*解析*证书并提取 OpenSSL 放在那里的信息，但它不会*验证*相同的信息。

于是又挖得更深了，终于在cURL中**找到了一个证书验证码，这里：**

```
// curl-7.28.0/lib/ssluse.c

static CURLcode verifyhost(struct connectdata *conn,
                       X509 *server_cert)
{ 
```

它在哪里执行我的预期：它查找 subjectAltNames，检查所有这些名称的完整性并将它们运行过去`hostmatch`，运行 hello.example.com == *.example.com 之类的检查。还有额外的健全性检查：“我们要求模式中至少有 2 个点，以避免通配符匹配过宽。” 和 xn-- 检查。

总而言之，OpenSSL 运行一些简单的检查并将其余的留给调用者。cURL，调用 OpenSSL，实现了更多的检查。PHP 也使用 对 CN 进行了*一些*检查`verify_peer`，但不理会`subjectAltName`。这些检查并不能说服我太多；请参阅下面的“测试”。

由于缺乏访问 cURL 函数的能力，最好的选择是在 PHP中*重新实现这些函数。*

例如，可变通配符域匹配可以通过点爆炸实际域和证书域来完成，颠倒两个数组

```
com.example.site.my
com.example.* 
```

并验证相应项目是否相等，或证书一为*；如果发生这种情况，我们必须已经检查了至少两个组件，这里`com`和`example`。

*如果*您想一次性检查所有证书，我相信上述解决方案是最好的解决方案之一。更好的是能够直接打开流而不求助于`openssl`客户端——**这是可能的**；见评论。

# 测试

我有一份来自 Thawte 的良好、有效且完全受信任的证书，发给“mail.eve.com”。

然后，在 Alice 上运行的上述代码将与 安全连接`mail.eve.com`，并且正如预期的那样。

现在我在 上安装相同的证书`mail.bob.com`，或者以其他方式让 DNS 相信我的服务器是 Bob，而实际上它仍然是 Eve。

我希望 SSL 连接仍然有效（证书**有效**且受信任），但证书不是颁发给 Bob - 它是颁发给 Eve。因此，必须*有人*进行最后一次检查并警告 Alice Bob 实际上是由 Eve 冒充的（或者等效地，Bob 正在使用 Eve 被盗的证书）。

我使用了下面的代码：

```
 $smtp = fsockopen( "tcp://mail.bob.com", 25, $errno, $errstr );
    fread( $smtp, 512 );
    fwrite($smtp,"HELO alice\r\n");
    fread($smtp, 512);
    fwrite($smtp,"STARTTLS\r\n");
    fread($smtp, 512);
    stream_set_blocking($smtp, true);
    stream_context_set_option($smtp, 'ssl', 'verify_host', true);
    stream_context_set_option($smtp, 'ssl', 'verify_peer', true);
    stream_context_set_option($smtp, 'ssl', 'allow_self_signed', false);
    stream_context_set_option($smtp, 'ssl', 'cafile', '/etc/ssl/cacert.pem');
    $secure = stream_socket_enable_crypto($smtp, true, STREAM_CRYPTO_METHOD_TLS_CLIENT);
    stream_set_blocking($smtp, false);
    print_r(stream_context_get_options($smtp));
    if( ! $secure)
            die("failed to connect securely\n");
    print "Success!\n"; 
```

和：

*   如果证书**无法**通过受信任的机构验证：
    *   verify_host 什么都不做
    *   verify_peer TRUE 导致错误
    *   verify_peer FALSE 允许连接
    *   allow_self_signed 什么都不做
*   如果证书过期：
    *   我得到一个错误。
*   如果证书是可验证的：
    *   **允许连接到冒充“mail.bob.com”的“mail.eve.com”**，我得到“成功！” 信息。

我认为这意味着，除非我犯了一些愚蠢的错误，**否则 PHP 本身不会根据名称检查证书**。

使用本文`proc_open`开头的代码，我再次可以连接，但这次我可以访问，`subjectAltName`因此可以自己检查，检测模拟。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-18T22:31:27.727

为了不加载已经过长且不再过多的主题，请回答更多文本，我让那个来处理为什么和为什么，在这里我将描述*如何*。

我针对 Google 和其他几台服务器测试了这段代码；有什么注释，嗯，代码中的注释。

```
<?php
    $server   = "smtp.gmail.com";        // Who I connect to
    $myself   = "my_server.example.com"; // Who I am
    $cabundle = '/etc/ssl/cacert.pem';   // Where my root certificates are

    // Verify server. There's not much we can do, if we suppose that an attacker
    // has taken control of the DNS. The most we can hope for is that there will
    // be discrepancies between the expected responses to the following code and
    // the answers from the subverted DNS server.

    // To detect these discrepancies though, implies we knew the proper response
    // and saved it in the code. At that point we might as well save the IP, and
    // decouple from the DNS altogether.

    $match1   = false;
    $addrs    = gethostbynamel($server);
    foreach($addrs as $addr)
    {
        $name = gethostbyaddr($addr);
        if ($name == $server)
        {
            $match1 = true;
            break;
        }
    }
    // Here we must decide what to do if $match1 is false.
    // Which may happen often and for legitimate reasons.
    print "Test 1: " . ($match1 ? "PASSED" : "FAILED") . "\n";

    $match2   = false;
    $domain   = explode('.', $server);
    array_shift($domain);
    $domain = implode('.', $domain);
    getmxrr($domain, $mxhosts);
    foreach($mxhosts as $mxhost)
    {
        $tests = gethostbynamel($mxhost);
        if (0 != count(array_intersect($addrs, $tests)))
        {
            // One of the instances of $server is a MX for its domain
            $match2 = true;
            break;
        }
    }
    // Again here we must decide what to do if $match2 is false.
    // Most small ISP pass test 2; very large ISPs and Google fail.
    print "Test 2: " . ($match2 ? "PASSED" : "FAILED") . "\n";
    // On the other hand, if you have a PASS on a server you use,
    // it's unlikely to become a FAIL anytime soon.

    // End of maybe-they-help-maybe-they-don't checks.

    // Establish the connection on SMTP port 25
    $smtp = fsockopen( "tcp://{$server}", 25, $errno, $errstr );
    fread( $smtp, 512 );

    // Here you can check the usual banner from $server (or in general,
    // check whether it contains $server's domain name, or whether the
    // domain it advertises has $server among its MX's.
    // But yet again, Google fails both these tests.

    fwrite($smtp,"HELO {$myself}\r\n");
    fread($smtp, 512);

    // Switch to TLS
    fwrite($smtp,"STARTTLS\r\n");
    fread($smtp, 512);
    stream_set_blocking($smtp, true);
    stream_context_set_option($smtp, 'ssl', 'verify_peer', true);
    stream_context_set_option($smtp, 'ssl', 'allow_self_signed', false);
    stream_context_set_option($smtp, 'ssl', 'capture_peer_cert', true);
    stream_context_set_option($smtp, 'ssl', 'cafile', $cabundle);
    $secure = stream_socket_enable_crypto($smtp, true, STREAM_CRYPTO_METHOD_TLS_CLIENT);
    stream_set_blocking($smtp, false);
    $opts = stream_context_get_options($smtp);
    if (!isset($opts['ssl']['peer_certificate'])) {
        $secure = false;
    } else {
        $cert = openssl_x509_parse($opts['ssl']['peer_certificate']);
        $names = '';
        if ('' != $cert) {
            if (isset($cert['extensions'])) {
                $names = $cert['extensions']['subjectAltName'];
            } elseif (isset($cert['subject'])) {
                if (isset($cert['subject']['CN'])) {
                    $names = 'DNS:' . $cert['subject']['CN'];
                } else {
                    $secure = false; // No exts, subject without CN
                }
            } else {
                $secure = false; // No exts, no subject
            }
        }
        $checks = explode(',', $names);

        // At least one $check must match $server
        $tmp    = explode('.', $server);
        $fles   = array_reverse($tmp);
        $okay   = false;
        foreach($checks as $check) {
            $tmp = explode(':', $check);
            if ('DNS' != $tmp[0])    continue;  // candidates must start with DNS:
            if (!isset($tmp[1]))     continue;  // and have something afterwards
            $tmp  = explode('.', $tmp[1]);
            if (count($tmp) < 3)     continue;  // "*.com" is not a valid match
            $cand = array_reverse($tmp);
            $okay = true;
            foreach($cand as $i => $item) {
                if (!isset($fles[$i])) {
                    // We connected to www.example.com and certificate is for *.www.example.com -- bad.
                    $okay = false;
                    break;
                }
                if ($fles[$i] == $item) {
                    continue;
                }
                if ($item == '*') {
                    break;
                }
            }
            if ($okay) {
                break;
            }
        }
        if (!$okay) {
            $secure = false; // No hosts matched our server.
        }
    }

    if (!$secure) {
            die("failed to connect securely\n");
    }
    print "Success!\n";
    // Continue with connection... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-18T00:23:29.723

> 如何验证有效证书实际上属于我要连接的域/IP？

为域名颁发证书（从不为 IP）。它可以是单个域名（如`mail.example.com`）或通配符`*.example.com`）。使用 openssl 解码证书后，您可以读取`common name`从 field调用的名称`cn`。然后您只需要检查您尝试连接的机器是否是来自证书的机器。由于您已经在连接到远程对等方名称，因此检查非常简单，但是，根据您想要执行的偏执检查方式，您可以尝试确定您是否没有使用中毒的 DNS，它会解析您的`mail.example.com`主机名伪造IP。这应该通过首先`mail.example.com`使用[gethostbynamel()解决来完成](http://pl1.php.net/manual/en/function.gethostbynamel.php)它将为您提供至少一个 IP 地址（假设您只得到 1.2.3.4）。[然后，您使用gethostbyaddr()](http://pl1.php.net/manual/en/function.gethostbyaddr.php)为每个返回的 IP 地址检查反向 DNS ，其中一个应该返回`mail.example.com`（请注意我使用了`gethostbynamel()`，而不是`gethostbyname()`因为服务器为每个名称分配了多个 IP 地址并不罕见）。

**注意：**请小心尝试应用过于严格的政策 - 您可能会伤害您的用户。单个服务器托管多个域（例如共享托管）是非常流行的场景。在这种情况下，服务器正在使用 IP `1.2.3.4`，客户的域`example.com`被赋予该 IP 地址（因此解析`example.com`将为您提供`1.2.3.4`，但是该主机的反向 DNS**很可能**会有所不同，绑定到 ISP 域名，而不是客户的域，例如`box0123.hosterdomain.com`or `4-3-2-1.hosterdomain.com`。这一切都很好且合法。托管商这样做是因为从技术上讲，您可以同时将单个 IP 分配给多个域名，但使用反向 DNS，您可以分配**一个**仅按 IP 输入。并且通过使用自己的域名而不是客户的域名，无论从服务器中添加或删除客户，您都无需打扰 revDNS。

因此，如果您获得了将要连接的主机的封闭列表 - 您可以进行此测试，但如果您的用户可能尝试连接到任何地方，那么我只会坚持只检查证书链。

**编辑#1**

如果您查询不受您控制的 DNS，则您无法完全信任它。这样的 DNS 可以变成僵尸，[中毒](http://en.wikipedia.org/wiki/DNS_spoofing)，它可以一直撒谎，对你问他的任何查询做出虚假响应，“转发”（[FQDN](http://en.wikipedia.org/wiki/Fully_Qualified_Domain_Name)到 ip）和反向（ip 到 FQDN）。如果 dns 服务器被黑（root），它可以（如果攻击者有足够的动机）使其不转发`in-addr.arpa`查询并伪造响应以匹配其他回复（更多关于[反向查找的信息](http://www.inetdaemon.com/tutorials/internet/dns/operation/resolution/reverse/reverse.shtml)）。所以事实上除非你使用[DNSSEC](http://en.wikipedia.org/wiki/DNSSEC)还是有办法骗过你的支票的。所以你必须考虑你需要表现得多么偏执 - dns中毒可以欺骗前向查询，而如果主机不是你的，这对于反向查找不起作用（我的意思是它的反向DNS区域托管在其他服务器上，而不是一个回复您的正常查询）。您可以尝试通过直接查询多个 DNS 来保护自己免受本地 dns 中毒，因此即使一个被黑客入侵，其他人也可能不会。如果一切正常，所有 DNS 查询都应该为您提供相同的答案。如果某事是可疑的，那么一些回复会有所不同，您可以轻松检测到。

因此，这完全取决于您想要的安全程度以及您想要实现的目标。如果您需要高度安全，则不应使用“公共”服务，而是通过即使用 VPN 将您的流量直接隧道传输到目标服务。

**编辑#2**

至于 IPv4 与 IPv6 - PHP 缺乏两者的功能，所以如果你想做上面提到的检查，我宁愿考虑调用工具`host`来完成这项工作（或编写 PHP 扩展）。

# c# - 除了 asp.net 网站的 CodeFile 之外，我可以在 App_Code 的 C# 文件中使用类/函数吗？

> ID：13402868
> 
> 赞同：0
> 
> 时间：2012-11-15T17:22:11.057
> 
> 标签：c#, asp.net, class

在 asp.net 网站中，我们可以为每个 .aspx 文件创建一个“CodeFile”。其中包含一个 C# 部分类。这个 .aspx 网页可以激活类似的功能

```
protected void Create_Click(object sender, EventArgs e) 
```

在此 CodeFile 中用于单击按钮。

我有另一个 C# 项目，它有大约 20 个 C# 文件。我现在正在做的是调用项目的.exe来做一些处理。我想知道是否可以将 20 个 C# 文件放在 App_Code 文件夹（或任何其他文件夹）中；然后在 codeFile 中，调用所有 C# 文件中的函数来进行处理，而不是使用我网站中编译的 .exe 文件？

所有 20 个 C# 文件都在命名空间 xx 中，至少它们有

```
namespace xx
{
    class example1
    { 
```

在每个文件中。我在代码文件中有一个“使用 xx”。VS2012 可以找到命名空间，但智能无法拾取我的 C# 项目中的类或函数。所以我想知道它是否可行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:37:51.460

是的，这是完全可以接受的。

或者，您可以将它们全部放在一个类库 (.dll) 中并在您的网站中引用该库并以这种方式调用这些类。如果这些类尚未公开，您可能需要将它们更改为公开（该示例是内部的，因为它没有明确声明为公开）。

对我来说，如果这里的代码可能会更改，或者您不拥有它，或者它可能会在其他地方重用，这将是更可取的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T17:38:34.723

是的，您可以在 App_Code 文件夹中添加任意数量的文件。此文件夹仅用于此目的。关于智能，尝试编译你的项目，可能从下一次运行开始，它可能会添加智能，因为智能需要一些时间来加载所有功能和东西。

# java - WCF小数问题

> ID：13402869
> 
> 赞同：0
> 
> 时间：2012-11-15T17:22:15.317
> 
> 标签：java, wcf

我在 Java 客户端应用程序和 .NET WCF 服务之间的通信上有一个奇怪的问题。

应用程序传输的金额类似于 10.99，而服务获取的金额类似于 10.990000000000000000001234567（逗号后 27 位小数......）

我想问可能是什么问题（我什至不确定它是否在Java端，我所知道的是.NET端的dto得到一个看起来像这样的十进制数）

# html - 缩小会破坏导航 CSS

> ID：13402871
> 
> 赞同：1
> 
> 时间：2012-11-15T17:22:21.953
> 
> 标签：html, css, layout, positioning

我在[这里](http://rainleader.com)有一个 Wordpress 网站，它在 100% 缩放时看起来很棒。但是，如果您缩小，布局会中断（特别是徽标和导航）。

我该如何纠正？

见截图：

普通的：

![普通的](../Images/8d6880ab989ebf10343f3ac620d11061.png)

部分缩小：

![部分缩小](../Images/51c710997b2c2f32b43a3ade29cca3df.png)

完全缩小：

![完全缩小](../Images/37ac4be483f34ca8303136f44154d3c0.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T17:30:27.880

Using % width for images might help. Also, using ems or % for the nav elements like width, font-size, and paddings and/or margins would be a good idea. Experiment and see what works best!

# chat - Openfire - 向会议服务中的所有多用户聊天室广播消息

> ID：13402875
> 
> 赞同：0
> 
> 时间：2012-11-15T17:22:39.347
> 
> 标签：chat, broadcast, openfire

使用 OpenFire 3.71，我有几个不同的会议服务，每个都有几个聊天室。

现在我想在其中一项服务中向所有 MUC ROOMS 广播消息，而不是作为“私人消息”向这些房间/服务中的各个用户广播。（它应该或多或少看起来好像我进入了每个房间，发送了一条消息，然后离开了......）

这在某种程度上可能吗？已经有插件了吗？或者至少可以编写这样的插件？我不太确定 MUC 的工作原理……如果有人知道这方面的好资料，那也很好读……

谢谢， 詹斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T18:52:05.000

我想出了一个解决方法，以防有人需要类似的东西：

我现在实现客户端的方式是除了手动加入的房间外，它们还会自动加入默认（每个服务）muc。在此默认房间中，只有“所有者”可以发送消息，并且一旦客户在此聊天中收到消息，它就会显示在她/他“实际”在的房间中......

像往常一样“解决方法”它肯定不是最好的解决方案，但它适用于我的目的......

如果您知道更好的解决方案，请告诉我。

# javascript - SDK2：updateSettingsValues() 的范围和权限

> ID：13402876
> 
> 赞同：1
> 
> 时间：2012-11-15T17:22:47.753
> 
> 标签：javascript, extjs4, rally

settings 和 updateSettingsValues() 的范围是什么，谁可以更改它们？这些设置是否适用于该特定应用程序，或者它们是否适用于该特定应用程序的每个单独用户？

另外，谁有权更改设置？如果您调用 updateSettingsValues() 并且用户至少不是工作区管理员，它会保存它们吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T21:44:39.650

当前设置的范围仅限于该特定应用程序。如果它位于共享自定义页面上，那么这些将适用于在工作区中访问它的所有用户。在不久的将来，我们将添加对将它们限定为项目（可能还有用户）的支持。如果它是共享页面，则只有工作区管理员及以上人员才能更改设置。否则任何用户都应该能够（只要他们不是只读的）。

# javascript - jQuery选择下一个表格行

> ID：13402877
> 
> 赞同：3
> 
> 时间：2012-11-15T17:22:52.787
> 
> 标签：javascript, jquery

我这里有两排桌子。当我单击第一个表行中的复选框时，我试图在下一个表行中定位跨度的 ID。我的代码中有一个警报，只是为了告诉我我成功了。

我所拥有的不起作用。单击第一行中的复选框时，我无法找出在下一个表格行中选择数据的方法。

```
<table>
<tr id="row-a">
<td>
    <input type="checkbox">
    <span>
        some text
    </span>
</td>
</tr>
<tr>
<td>
    <span id="target">
        some text
    </span>
</td>
</tr>
</table>

$(document).ready(function() {
   var myCheck = $("tr#row-a td input");

   myCheck.change(function(){
   var spanID = $("tr#row-a').next('tr').find('span').attr('id');
   alert(spanID);
   });
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T17:24:42.157

尝试这个：

```
var myCheck = $("tr#row-a td input");
myCheck.change(function(){
    var spanID = $(this).closest('tr').next().find('span').attr('id');
    alert(spanID);
}); 
```

[**示例小提琴**](http://jsfiddle.net/MUWAP/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T17:24:29.310

```
$(document).ready(function() {
   var myCheck = $("tr#row-a td input");

   myCheck.change(function(){
   var spanID = myCheck.parents("tr").next().find('span').attr('id');
   alert(spanID);
   });
}); 
```

变化在这一行：

```
 var spanID = myCheck.parents("tr").next().find('span').attr('id'); 
```

执行以下操作：

*   查找复选框的`tr`父级
*   获取下一个兄弟节点（next `tr`）
*   发现`span`
*   获取它的 id

# python - Tastypie：不要发送资源的整个 uri（只是 id）

> ID：13402884
> 
> 赞同：1
> 
> 时间：2012-11-15T17:23:16.350
> 
> 标签：python, formatting, tastypie

我开始将 Tastypie 添加到我正在开发的一个非常小的 Django 应用程序中，我想知道是否有一种方法可以只发送由关系指向的资源的数字 id，而不是资源所在的 uri。

例如，使用[文档](http://django-tastypie.readthedocs.org/en/latest/interacting.html#getting-a-detail-resource)中提供的示例之一：

暴露的“入口”资源如下所示：

```
{
    "body": "Welcome to my blog!",
    "id": "1",
    "pub_date": "2011-05-20T00:46:38",
    "resource_uri": "/api/v1/entry/1/",
    "slug": "first-post",
    "title": "First Post",
    "user": "/api/v1/user/1/"
} 
```

它与“用户”的关系显示为 `"user": "/api/v1/user/1/"`。有没有办法让它`"user": 1`（整数，如果可能的话）看起来像下面这样？

```
{
    "body": "Welcome to my blog!",
    "id": "1",
    "pub_date": "2011-05-20T00:46:38",
    "resource_uri": "/api/v1/entry/1/",
    "slug": "first-post",
    "title": "First Post",
    "user": 1
} 
```

我喜欢这个想法或保持整个`resource_uri`属性，但是在建模 Sql 关系时，我宁愿只使用 id（或数字 id 列表，如果关系是“ *ToMany* ”）。`dehydrate_user`在类中添加一个方法`EntryResource`来做到这一点是个好主意吗？它似乎有效，但也许有一种更通用的方法（以避免必须`dehydrate`为每个关系编写一个方法）

先感谢您

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T15:34:47.990

您可以尝试使用水合物脱水循环

```
def dehydrate(self, bundle):
    bundle.data['entry'] = bundle.obj.entry.id
    return bundle

def hydrate(self, bundle):
    bundle.data['entry'] = Entry.objects.get(id=bundle.data['entry'])
    return bundle 
```

但我强烈建议坚持使用 URI，因为这是您可以直接寻址资源的方式。水合物和脱水用于更复杂或虚拟的资源。

# c# - 如何在我的视图中使用带有 using 指令的 C# 全局命名空间运算符？

> ID：13402885
> 
> 赞同：1
> 
> 时间：2012-11-15T17:23:16.197
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor, global-namespace

我在 asp.net mvc 中的视图有些问题。我的 using 指令的命名空间与视图的命名空间发生冲突，导致我的 Razor 生成的类出现编译错误。我对 @model 指令有同样的问题，但使用 global:: 别名修复了它。出于某种原因，对我的 @using 执行相同操作会导致“找不到类型或命名空间‘全局’...”错误。这是我现在所拥有的：

```
@using SampleSpace.System.Items

@model global::SampleSpace.System.Items.Thing 
```

我想用

```
@using global::SampleSpace.System.Items

@model global::SampleSpace.System.Items.Thing 
```

但上述错误不断发生。在视图中的 using 指令中使用 global 是否有任何技巧，或者是否有不允许的原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T19:42:29.423

我不确定这是否能准确回答您的问题，但您能否通过将您感兴趣的命名空间放入 Views 文件夹的 web.config 来解决问题？

```
 <system.web.webPages.razor>
    <pages pageBaseType="System.Web.Mvc.WebViewPage">
      <namespaces>
        <add namespace="System.Web.Mvc" />
        <!-- snip -->
        <add namespace="SampleSpace.System.Items" />
      </namespaces>
    </pages>
  </system.web.webPages.razor> 
```

在您的视图需要“使用”名称空间的情况下，这通常是一种很好的做法——它使视图本身保持混乱——尽管我没有在你描述的冲突场景中对此进行测试。

或者使用这种方法来避免冲突：

```
@using items = SampleSpace.System.Items 
```

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T19:45:37.007

事实证明，解决这个问题的最简单方法是调整文件属性下的自定义工具命名空间。您可以将其更改为您想要避免任何冲突的任何内容。

# android - 存储 ListView 内部存储或 SQLite 的元素？

> ID：13402887
> 
> 赞同：0
> 
> 时间：2012-11-15T17:23:29.313
> 
> 标签：android, sql, listview

在我的应用程序中，我有以下数据结构：

*   用户可以添加、删除、重命名或编辑元素的 ListView，使用操作栏菜单实现。
*   从第一个选择开始，有第二个操作栏菜单，提供相同的内容，但元素不同
*   编辑第二个 ListView 后，第三个也是最后一个 ListView 开始发挥作用，其选项与第一个和第二个相同。

整体数据结构主要是包含元素列表的列表。将此数据存储到文件内部存储或 SQLite 的最佳方法是什么？我缺乏这两个方面的经验，并且不确定我需要看哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:32:03.537

从开发的角度来看，使用 SQLite 数据库可能会更容易。这使您可以在 ListViews 上使用 CursorAdapters。每个 ListView 都应该有一个表，但应该相当简单。

此外，我认为数据库将比序列化对象或设置文件具有更好的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:00:28.693

我认为最好使用 sqlite 数据库，因为您有适当的界面来添加、操作、删除和检索数据。此外，很容易使用 listadapter 为您的 listviews 提供存储在 sqlite 数据库中的数据。

# java - 如果我们在主线程中创建 Java Swing 应用程序会发生什么？

> ID：13402889
> 
> 赞同：1
> 
> 时间：2012-11-15T17:23:39.953
> 
> 标签：java, swing, rule

如果我们在主线程中创建 Java Swing 应用程序会发生什么？经验法则是我们必须在 EDT 中启动应用程序？请帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T17:26:38.527

Q1。经验法则是我们必须在 EDT 中启动应用程序

不是真正的经验法则 - 更像是[库指定](http://docs.oracle.com/javase/7/docs/api/javax/swing/package-summary.html)的要求：

> 一般来说，Swing 不是线程安全的。除非另有说明，否则所有 Swing 组件和相关类都必须在事件调度线程上访问。

Q2。如果我们在主线程中创建 Java Swing 应用程序会发生什么？

它可能有效或无效：行为未指定。在同一页面上给出了一个示例：

> 如果您在单独的线程上修改模型，您将面临异常风险和可能的显示损坏风险。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T17:35:27.490

> 如果我们在主线程中创建 Java Swing 应用程序会发生什么？经验法则是我们必须在 EDT 中启动应用程序？

*   理论上没关系，重要的是避免在非静态类或 void 中创建 GUI，与在主类中创建的对象相比

*   在主类中创建的对象不能直接访问，与扩展 JComponents 相同的问题

*   重要的是在 [初始线程中创建和显示 Swing GUI](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T18:18:34.980

[assylias](https://stackoverflow.com/questions/13402889/what-will-happen-if-we-are-creating-the-java-swing-application-in-main-thread/13402939#13402939)和[mKorbel](https://stackoverflow.com/questions/13402889/what-will-happen-if-we-are-creating-the-java-swing-application-in-main-thread/13403077#13403077)有很好的答案。

我从以下类的变体开始每个 Swing 应用程序：

```
import javax.swing.SwingUtilities;

import com.ggl.stopwatch.view.StopwatchFrame;

public class Stopwatch implements Runnable {

    @Override
    public void run() {
        new StopwatchFrame();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Stopwatch());
    }

} 
```

# php - 使多维数组一维而不使用 foreach

> ID：13402890
> 
> 赞同：0
> 
> 时间：2012-11-15T17:23:43.057
> 
> 标签：php, arrays

我已经尝试了 array_reduce 和 array_merge 方法，但它们似乎没有达到我的预期。有没有办法在没有 foreach 的情况下做到这一点？

我需要转换一个数组，例如：

```
Array
(
    [0] => Array
        (
            [id] => 2
        )

    [1] => Array
        (
            [id] => 3
        )

    [2] => Array
        (
            [id] => 4
        )

) 
```

进入：

```
Array
(
    [0] => 2
    [1] => 3
    [2] => 4
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:27:56.120

你可以使用[`array_map`](http://php.net/manual/en/function.array-map.php)

```
$flat = array_map(function($el) {  return $el['id']; }, $arr); 
```

不是这适用于 php 5.3。如果您使用的是 5.2，则必须定义一个函数或使用[`create_function`](http://us1.php.net/manual/en/function.create-function.php)，而不是像我在这里一样传入匿名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-06T08:54:02.753

如果您使用的是 PHP 5 >= 5.5.0 或 PHP 7，我认为解决此问题的更好方法是 using `array_column`，因为它正是为此目的而制作的：

```
$multidimensionalArray = [
    [
        'id' => 2,
        'somethingElse' => 'foo'
    ],
    [
        'id' => 3,
        'somethingElse' => 'bar'
    ],
    [
        'id' => 4,
        'somethingElse' => 'baz'
    ],
    [
        'id' => 5,
        'somethingElse' => 'bam'
    ],
];

$justTheIds = array_column($multidimensionalArray, 'id');

var_dump($justTheIds);

/*
  array(4) {
  [0]=>
  int(2)
  [1]=>
  int(3)
  [2]=>
  int(4)
  [3]=>
  int(5)
}
*/ 
```

# r - CCA 分析：rowSums(X) 中的错误：“x”必须是数字

> ID：13402892
> 
> 赞同：3
> 
> 时间：2012-11-15T17:23:55.773
> 
> 标签：r, ca, vegan

我尝试从`vegan`包中进行 CA 分析。

这是我使用的代码：

```
install.packages("vegan")
library(vegan)

plots <- c("plotA", "plotB", "plotC", "plotD", "plotE")
animal1 <- c(2,7,4,8,1)
animal2 <- c(4,3,7,1,0)
animal3 <- c(8,5,0,1,3)
animal4 <- c(2,2,9,5,2)
animal5 <- c(1,6,9,8,7)

animalData <- data.frame (plots, animal1, animal2, animal3, animal4, animal5)
attach(animalData)

animalData.ca <- cca(animalData) 
```

但是，我总是得到一个错误：

> rowSums(X) 中的错误：“x”必须是数字

我知道标签是一个因素，如果我删除第一列，分析就会起作用。但随后分析创建了自己的标签，我不能使用我的标签。有没有办法让我自己的标签（plotA、plotB 等）包括在内？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T17:32:01.210

您需要将`plots`变量存储为数据框的`rownames`属性`animalData`，而不是实际数据中的变量。

你要：

```
library(vegan)

plots <- c("plotA", "plotB", "plotC", "plotD", "plotE")
animal1 <- c(2,7,4,8,1)
animal2 <- c(4,3,7,1,0)
animal3 <- c(8,5,0,1,3)
animal4 <- c(2,2,9,5,2)
animal5 <- c(1,6,9,8,7)

animalData <- data.frame(animal1, animal2, animal3, animal4, animal5)
rownames(animalData) <- plots 
```

`animalData`现在应该是这样的：

```
> animalData
      animal1 animal2 animal3 animal4 animal5
plotA       2       4       8       2       1
plotB       7       3       5       2       6
plotC       4       7       0       9       9
plotD       8       1       1       5       8
plotE       1       0       3       2       7 
```

然后对于 CA

```
animalData.ca <- cca(animalData) 
```

哪个有效：

```
> animalData.ca
Call: cca(X = animalData)

              Inertia Rank
Total          0.3793     
Unconstrained  0.3793    4
Inertia is mean squared contingency coefficient 

Eigenvalues for unconstrained axes:
     CA1      CA2      CA3      CA4 
0.219528 0.099206 0.055572 0.005018 
```

绘制此对象会导致

```
plot(animalData.ca, type = "text", scaling = 3) 
```

![在此处输入图像描述](../Images/4744f296a8314a8910173c88c63f0a5f.png)

如您所见，它使用了`animalData`数据框中的属性数据。

另外，不要这样的`attach()`数据集；它不是必需的，实际上是危险的，因为数据没有附加，而是一个独立的副本。

# javascript - 如何在订阅功能中取消订阅放大？

> ID：13402893
> 
> 赞同：0
> 
> 时间：2012-11-15T17:23:59.140
> 
> 标签：javascript, caching, store, subscribe

```
amplify.subscribe("WorkTypesReceived", function () {

    var workTypesList = amplify.store("ExpenseWorkTypesFor" + JobNo_);
    amplify.unsubscribe("WorkTypesReceived");

});

getDropdownExpenseWorkTypes(JobNo_); 
```

我`getDropdownExpenseWorkTypes`调用了一个在完成时发布的函数`"WorkTypesReceived"`。但由于我在一个页面上不止一次调用整个函数，它呈指数级增长（同一主题的多个订阅）。我想在订阅发布一次后删除订阅（因此进入订阅功能一次）。

该行`amplify.unsubscribe("WorkTypesReceived")`似乎不起作用，文档说我需要第二个参数作为回调函数。但我在回调函数内部，所以不确定如何继续。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T16:14:09.187

如果您在回调中添加名称，您可以使用它来取消订阅...

```
amplify.subscribe( "WorkTypesReceived", function storeWork() {
    var workTypesList = amplify.store( "ExpenseWorkTypesFor" + JobNo_ );
    amplify.unsubscribe( "WorkTypesReceived", storeWork );
}); 
```

# ios - 当我切换到生产证书时，Trigger.io 和 Parse 推送通知不起作用

> ID：13402894
> 
> 赞同：1
> 
> 时间：2012-11-15T17:23:59.903
> 
> 标签：ios, parsing, push-notification, trigger.io, parse-platform

使用 Trigger.io 和 Parse - 我正在尝试将我的应用程序提交到 iOS 商店。我使用开发配置文件在 iOS（和 Android）上解析推送通知。我切换到临时生产证书，现在相同的代码出现此错误：

```
TypeError: 'undefined' is not an object 
```

对于这一行：（*实际上它更复杂，但我将它剥离到这一行，它仍然不起作用。）*

```
forge.event.messagePushed.addListener(function (msg) {
    forge.logging.log(JSON.stringify(msg));
  }); 
```

我做过的事情：

*   检查以确保在 config.json 中使用正确的键设置了解析模块
*   检查以确保我使用新的正确配置文件来构建应用程序
*   为解析证书使用了正确的 .p12 文件。
*   确保我订阅了正确的频道。

我究竟做错了什么？

***编辑：***清理代码以提高清晰度。

***编辑：***查看评论以获取更多信息。提到当我跑步时可能会有所帮助

```
forge.event.messagePushed.addListener(function (msg) {
    alert(JSON.stringify(msg));
}); 
```

它会立即返回一个警报（带有消息：“未定义”）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T18:03:03.773

在您的问题中，您实际上是在谈论两件不同的事情。

该`forge.notification`模块与 Parse 集成提供的推送通知无关。前者可用于在**应用程序打开时**向用户的手机发送通知。

在我看来，这对于发送推送通知并不是非常有用，因为这些通知通常是**在用户当前未使用应用程序时发生某些事情时**触发的。这就是 Parse 集成发挥作用的地方。正确的模块称为`forge.partners.parse`.

您可以从 Parse Web 界面手动触发推送通知。转到应用程序的推送部分 (URL: `https://parse.com/apps/<your app>/push_notifications`) 并`+ Send a push`在顶部选择。在那里，您可以定位、自定义和发送您的推送。希望这可以帮助。

如果您想根据某些事件（例如在您的后端服务器上）自动触发推送通知，您应该查看[Parse Push Notification Guide](https://parse.com/docs/push_guide#top/REST)。

# powershell - 如何使用 PowerShell 来“另存为...”不同的文件扩展名？

> ID：13402898
> 
> 赞同：1
> 
> 时间：2012-11-14T14:36:30.563
> 
> 标签：powershell, file-conversion

我正在使用以下 powershell 脚本打开几千个 HTML 文件并“另存为...”Word 文档。

```
param([string]$htmpath,[string]$docpath = $docpath)   

$srcfiles = Get-ChildItem $htmPath -filter "*.htm*"
$saveFormat = [Enum]::Parse([Microsoft.Office.Interop.Word.WdSaveFormat], "wdFormatDocument"); 
$word = new-object -comobject word.application 
$word.Visible = $False          

function saveas-document
{         
    $opendoc = $word.documents.open($doc.FullName);         
    $opendoc.saveas([ref]"$docpath\$doc.FullName.doc", [ref]$saveFormat);         
    $opendoc.close();
}       

ForEach ($doc in $srcfiles)     
{
    Write-Host "Processing :" $doc.FullName         
    saveas-document        
    $doc = $null   
}   

$word.quit(); 
```

内容转换得很好，但我的文件名不符合预期。

`$opendoc.saveas([ref]"$docpath\$doc.FullName.doc", [ref]$saveFormat);`导致`foo.htm`另存为`foo.htm.FullName.doc`而不是`foo.doc`.

`$opendoc.saveas([ref]"$docpath\$doc.BaseName.doc", [ref]$saveFormat);`产量`foo.htm.BaseName.doc`

如何设置`Save As...`文件名变量等于和的`BaseName`串联`.doc`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T02:17:34.070

根据我们上面的评论，您似乎只想完成移动文件。以下对我有用。在当前目录中，它将 .txt 扩展名替换为 .py 扩展名。[我在这里](http://laclaustra.wordpress.com/2008/08/10/powershell-saves-the-day-change-file-extension-for-over-10-thousand-documents/)找到了命令。

```
PS C:\testing dir *.txt | Move-Item -Destination {[IO.Path]::ChangeExtension( $_.Name, "py")} 
```

您也可以更改`*.txt`为，`C:\path\to\file\*.txt`这样您就不需要从文件的位置执行此行。您应该能够以类似的方式定义目的地，所以如果我找到一种简单的方法来做这件事，我会报告回来。

另外，我在搜索时发现了 Microsoft 的 TechNet 库。它有许多关于使用 PowerShell 编写脚本的教程。[文件和文件夹，第 3 部分：Windows PowerShell](http://technet.microsoft.com/en-us/library/ee176988.aspx#EDAA)应该可以帮助您找到有关复制和移动文件的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-22T17:39:14.133

我只是将文件名从转换`.html`为`.docx`. 我把你上面的代码改成这样：

```
function Convert-HTMLtoDocx {
    param([string]$htmpath)
    $srcfiles = Get-ChildItem $htmPath -filter "*.htm*"
    $saveFormat = [Microsoft.Office.Interop.Word.WdSaveFormat]::wdFormatXMLDocument
    $word = new-object -comobject word.application
    $word.Visible = $False

    ForEach ($doc in $srcfiles) {
        Write-Host "Processing :" $doc.fullname
        $name = Join-Path -Path $doc.DirectoryName -ChildPath $($doc.BaseName + ".docx")
        $opendoc = $word.documents.open($doc.FullName)
        $opendoc.saveas([ref]$name.Value,[ref]$saveFormat)
        $opendoc.close()
        $doc = $null
    }  #End ForEach

    $word.quit()
} #End Function 
```

问题是保存格式。无论出于何种原因，将文档另存为`.docx`您需要在`wdFormatXMLDocument`not指定格式`wdFormatDocument`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-10T22:30:05.383

# 这会递归遍历根文件夹并将 .doc 写入 .htm 过滤：

```
$docpath = "\\sf-xyz-serverabc01\ChangeTheseDocuments"
$WdTypes = Add-Type -AssemblyName 'Microsoft.Office.Interop.Word, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c' -Passthru
$srcfiles =  get-childitem  $docpath  -filter "*.doc" -rec | where {!$_.PSIsContainer}  | select-object  FullName
$saveFormat = $WdTypes | Where {$_.Name -eq 'WdSaveFormat'}
$word = new-object -comobject word.application
$word.Visible = $False

function saveas-filteredhtml
    {
    $opendoc = $word.documents.open($doc.FullName);
    $Name=($doc.Fullname).replace("doc","htm")
    $opendoc.saveas([ref]$Name, [ref]$saveFormat::wdFormatFilteredHTML);
    $opendoc.close();
    }

ForEach ($doc in $srcfiles)
    {
    Write-Host "Processing :" $doc.FullName
    saveas-filteredhtml
    $doc = $null
    }

$word.quit(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-03T14:18:09.700

我知道这是一篇较旧的帖子，但我在此处发布此代码，以便将来可以找到它

**

## 这会递归遍历根文件夹并将 Doc 和 DocX 转换为 Txt

**

这是您可以保存到的不同格式的[链接。](https://msdn.microsoft.com/en-us/library/bb238158(v=office.12).aspx)

```
$docpath = "C:\Temp"
$WdTypes = Add-Type -AssemblyName 'Microsoft.Office.Interop.Word, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c' -Passthru
$srcfiles =  get-childitem  $docpath  -filter "*.doc" -rec | where {!$_.PSIsContainer}  | select-object  FullName
$saveFormat = $WdTypes | Where {$_.Name -eq 'WdSaveFormat'}
$word = new-object -comobject word.application
$word.Visible = $False

function saveas-filteredhtml
    {
        $opendoc = $word.documents.open($doc.FullName);
        $Name=($doc.Fullname).replace(".docx",".txt").replace(".doc",".txt")
        $opendoc.saveas([ref]$Name, [ref]$saveFormat::wdFormatDOSText); ##wdFormatDocument
        $opendoc.close();
    }

ForEach ($doc in $srcfiles)
    {
        Write-Host "Processing :" $doc.FullName
        saveas-filteredhtml
        $doc = $null
    }

$word.quit(); 
```

# vim - 为什么我的 vim 命令行路径与我的 shell PATH 不同？

> ID：13402899
> 
> 赞同：11
> 
> 时间：2012-11-15T17:24:12.307
> 
> 标签：vim, command-line, path

例如，

```
$ echo $PATH
/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/bin:~/bin:/usr/local/Cellar/python3/3.2.3/bin

$ vim 
:! echo $PATH
/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:~/bin:/usr/local/Cellar/python3/3.2.3/bin 
```

我希望他们是一样的。为什么它们不同？

如果有什么不同，这里是我的 shell、vim 版本和 OS 版本：

```
$ echo $SHELL
SHELL=/usr/local/bin/zsh

$ /usr/local/bin/zsh --version
zsh 5.0.0 (x86_64-apple-darwin12.0.0)

$ vim --version
VIM - Vi IMproved 7.3 (2010 Aug 15, compiled Jun 20 2012 13:16:02)
Compiled by root@apple.com

$ sw_vers
ProductName:    Mac OS X
ProductVersion: 10.8.2
BuildVersion:   12C60

(Mountain Lion) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-10-22T14:48:31.323

> 这是Apple 在 OS X 10.5 Leopard 中引入的[已知问题。](https://github.com/dotphiles/dotzsh#mac-os-x)
> 
> 如果您使用的是 Bash 或 Zsh 并且使用的是非交互式 shell，则会受到影响。
> 
> 跑步`sudo chmod ugo-x /usr/libexec/path_helper`会让你恢复健康，但你应该看看这篇文章，看看为什么。

从[这个答案](https://stackoverflow.com/a/12146694/600953)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-15T18:16:05.583

stackoverflow和stackexchange上有很多类似的问题。

您的 shell 根据启动时给出的参数执行不同的 *rc 文件。因此，您需要设置 Vim 以便它使用正确的参数启动您的 shell。

以下有助于 bash，我几乎可以肯定 zsh 中有类似的标志。

```
set shell=bash\ -i 
```

查看`$ man zsh`正确的标志和正确的执行顺序。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-19T19:18:30.237

我无法用 zsh 解决这个问题，最终在我的 vim shell 中使用了 bash。

这是我所做的：

1.  修改我`.zshrc`的工作`bash`
2.  `ln -s .zshrc .bashrc`
3.  添加`set shell=bash`到我的`.vimrc`文件中

现在我的 vim 命令行 PATH 等于我的 zsh shell PATH。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-02-15T08:07:14.500

我不使用 mac 或 zsh（我在 linux 上），但是当我从 MATE 菜单运行 gvim 时遇到了这个问题。

我通过将其添加到我的 .vimrc 来解决它：

```
if $PATH !~ "\.rbenv"
    let $PATH="/home/username/.rbenv/shims:/home/username/.rbenv/bin:" . $PATH
endif 
```

如果您从终端运行 vim，这可以避免设置它，否则 rbenv 路径将被包含两次。

我尝试将应用程序设置为通过终端运行，但这没有帮助。

# linux - MITLM 平滑

> ID：13402901
> 
> 赞同：2
> 
> 时间：2012-11-15T17:24:18.297
> 
> 标签：linux, memory, smoothing

我在平滑 3 克计数的大文件时遇到问题。我使用 :estimate-ngram -order 3 -counts allgrams -smoothing FixModKN -wl allgrams.FixModKN.lm 命令，我得到这个错误：

```
Saving LM to train.corpus.lm...
estimate-ngram: src/NgramModel.cpp:422: void NgramModel::SaveLM(const 
std::vector<DenseVector<double>, std::allocator<DenseVector<double> > >&, const 
std::vector<DenseVector<double>, std::allocator<DenseVector<double> > >&, ZFile&) 
const: Assertion `(size_t)(ptr - lineBuffer.data()) < lineBuffer.size()' failed. 
```

在我尝试使用 4.7GB 文件的 2-gram 之前，它工作正常。3 克文件是 20GB 大。

我的操作系统是带有 96GB RAM 的 GNU/Linux x86_64

# android - 如何让平板电脑的字体变大？

> ID：13402910
> 
> 赞同：0
> 
> 时间：2012-11-15T17:24:49.953
> 
> 标签：android, tablet

```
tv.setTextSize(14); 
```

我将 TextView 字体大小设置为 14sp。当我在 Nexus One 中运行我的应用程序时，字体大小还可以。但是，当我在 Nexus 7 中运行它时，字体大小是如此之小。这是因为 Android 根据密度缩放字体大小。Nexus 7 的密度低于 Nexus One，Android 缩小了字体大小。如何调整与屏幕大小成比例的字体大小？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T17:38:09.433

使用 XML 资源。在一个 XML 资源文件（我通常称之为“dimens.xml”）中，定义一个维度资源，称为`font_size`. 在文件夹“values-normal”和“values-large”中创建一个“dimens.xml”文件。默认情况下将使用“values”中的字体大小，但大屏幕（如 Nexus 7）将使用“values-large”中的大小。如果您想明确支持 10" 平板电脑，也可以在 'values-xlarge' 中定义它。

可以使用 XML`textSize="@dimen/font_size"`和使用`tv.setTextSize(getResources().getDimension(R.dimen.font_size))`.

您的 dimens.xml 文件应如下所示：

```
<resources>
   <dimen name="font_size">14sp</dimen>
</resources> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T17:41:25.993

如果您使用 dimens.xml 方法会更好，并在文件夹中为手机和平板电脑生成不同的版本：

res/values/dimens.xml -> 默认尺寸

res/values-normal/dimens.xml -> 手机尺寸

res/values-large/dimens.xml -> 对于平板电脑尺寸（请注意为字体大小设置更大的值，可能填充，等等......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T17:34:29.490

您可以从您的`dimes.xml`

在 中定义一个维度`dimens.xml`。例如：

```
<dimen name="my_text_size">14sp</dimen> 
```

然后在您的代码中使用它：

```
tv.setTextSize(getResources().getDimension(R.dimen.my_text_size)); 
```

# android - 在 Android SDK 模拟器中调试 SmsManager

> ID：13402912
> 
> 赞同：1
> 
> 时间：2012-11-15T17:24:59.547
> 
> 标签：android, debugging, android-emulator

我正在 Android SDK 模拟器中测试第 3 方应用程序，该应用程序旨在发送 SMS 文本消息以进行注册。我没有此应用程序的源代码，但是否可以使用带有模拟器的调试器来拦截对 SmsManager 的调用并确定正在发送什么信息以及发送到什么目的地？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:37:41.430

既然你有源代码，你所能做的就是观察 adb logcat 的输出。您也可以使用“adb logcat -b radio”来观看任何调制解调器命令。例如，如果您尝试发送短信，您将看到以下内容。这取决于您要调试的内容。

```
 D/AT      (   29): AT> AT+CSQ
    D/AT      (   29): AT< +CSQ: 7,99
    D/AT      (   29): AT< OK
    D/RILJ    (   95): [0058]< SIGNAL_STRENGTH {7, 99, 0, 0, 0, 0, 0}
    D/RILJ    (   95): WAKE_LOCK_TIMEOUT  mReqPending=0 mRequestList=1
    D/RILJ    (   95): 0: [19] SET_NETWORK_SELECTION_AUTOMATIC
    D/SMS     (   95): SMS send size=0time=1353001019635
    D/RILJ    (   95): [0059]> SEND_SMS
    D/RIL     (   29): onRequest: SEND_SMS
    D/AT      (   29): AT> AT+CMGS=13
    D/AT      (   29): AT< > 
    D/AT      (   29): AT> 00010004815545000004e432990c^Z

D/AT      (   29): AT< +CMGS: 0
D/AT      (   29): AT< OK
D/RILJ    (   95): [0059]< SEND_SMS { messageRef = 0, errorCode = 0, ackPdu = null}
D/SMS     (   95): SMS send complete. Broadcasting intent: PendingIntent{44c8c118: android.os.BinderProxy@44c8c0e0} 
```

# java - 命名我的内联 pdf

> ID：13402914
> 
> 赞同：0
> 
> 时间：2012-11-15T17:25:08.037
> 
> 标签：java, pdf, servlets

我在 java servlet 中创建一个 pdf，当我创建的 pdf 打开它时，它在我的 servlet 之后错误地命名了该 pdf。这是我的代码：

```
 response.setHeader(contentDisposition, "inline; filename=TemporaryVerification.pdf");

     try {

         reader = new PdfReader(CreateStuVerification.class.getResource("/resource/" +     tempFile));
         stamp = new PdfStamper(reader, response.getOutputStream()); 
```

所以我希望我的 pdf 命名为“TemporaryVerification.pdf”，但它的名称是“CreateStuVerification.pdf”（这是我的 servlet 的名称）。有谁知道这是为什么，以及如何纠正它？

编辑：我必须将其保留为内联 pdf。虽然当我尝试将它作为附件时，它的名称是正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:27:48.507

此行为特定于 IE 浏览器。它使用 URI 路径的最后一部分作为下载资源的默认名称。更理智的浏览器会为此正确使用标头的`filename`属性。`Content-Disposition`

您最好在路径模式上重新映射您的 servlet `/pdf/*`，然后将所需的文件名直接附加到 URL 中，该 URL 应该像这样返回 PDF

```
<a href="pdf/TemporaryVerification.pdf"> 
```

如有必要，您可以在 servlet 中获取文件名部分，如下所示：

```
String filename = request.getPathInfo().substring(1); // TemporaryVerification.pdf
// ... 
```

# c# - 使用datatable中的数据调用存储过程

> ID：13402918
> 
> 赞同：0
> 
> 时间：2012-11-15T17:25:14.240
> 
> 标签：c#, asp.net, .net, ado.net

我有一个从存储过程中获取值的数据表，如下所示：

```
SqlConnection sqlcon = new SqlConnection(ConfigurationManager.ConnectionStrings["db"].ConnectionString);
sqlcon.Open();

DataTable dt = new DataTable("tmp");
DataSet ds = new DataSet();
SqlDataAdapter da = new SqlDataAdapter();

SqlCommand cmd = new SqlCommand("usp_abc", sqlcon);

cmd.CommandType = CommandType.StoredProcedure;
da.SelectCommand = cmd;

da.Fill(dt); 
```

现在，我需要遍历数据表并获取该数据表的值并将其作为参数传递给我的存储过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:33:23.113

我相信如果可能的话，这样的操作最好在数据库中完成，而不是为数据表行集合中的每一行去数据库。

您可以使用 foreach 循环遍历数据表，每个数据`DataRow`表代表返回结果中的一行。

```
foreach(DataRow row in dt.Rows)
{
     var col1 = row[0];  //access using column index/position

     var firstNameCol = row["FirstName"].ToString();  //access through column name
} 
```

如果可以将其移动到数据库（使用存储过程），您可以更清楚地了解您想要做什么

*   [数据表行](http://msdn.microsoft.com/en-us/library/system.data.datatable.rows.aspx)

**更新：**使用将值传递给存储过程`command.Parameters`

```
cmd.Parameters.AddWithValue("@FirstName", firstNameCol); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T17:41:01.740

您可以使用：

```
foreach (DataRow row in dt.Rows)
{
    foreach(object o in row.ItemArray)
    {

       //do something with o
    }

 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T17:55:05.383

在存储过程中设置参数：

```
SqlCommand cmd = new SqlCommand("usp_abc", sqlcon);
cmd.CommandType = CommandType.StoredProcedure;
cmd.parameters.AddWithValue("@foo", "bar");
cmd.parameters.AddWithValue("@plugh", Integer.valueOf(17)); 
```

这会将参数“@foo”设置为值“bar”，将参数“@plugh”设置为值 17。值可以是字符串、整数、布尔值，可能还有其他值。

阅读有关 SqlParameterCollection 对象的文档以了解其他函数以设置参数。还有其他方法可以让您显式设置 SQL 数据类型，而不是让它从 C# 数据类型中猜测 SQL 数据类型。我唯一需要这个的时候是我想设置一个 Image 值。

旁注让我很早就绊倒了：你不能传入 NULL。如果你想让一个值为空，你必须传入 System.DBNull.Value。毫无疑问，这是有充分理由的，但我觉得这是一种恼人的痛苦。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-15T17:37:51.243

如果您只需要将数据作为参数传递给存储过程，请考虑使用 DataReader。
DataTable 有开销。
DataReader 是更高效、更简单的语法。

[SqlDataReader 类](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.aspx)

如果您需要 DataTable 来处理其他内容（例如绑定到 DataGrid），那么请继续使用 DataTable，codingbiz +1 的答案对我来说似乎是正确的。
Servy 强烈认为答案应该包括如何引用 DataRow 中的值。
您可以通过序号位置或列名来完成。

```
row[0];
row["colx"]; 
```

但是您已经从 condigbiz 获得了答案，如果您使用的是，应该将支票交给 codingbiz。

```
SqlDataReader reader = command.ExecuteReader();
// Call Read before accessing data. 
while (reader.Read())
{
   if (!reader.IsDBnull(0))
   { 
       cmd.Parameters.AddWithValue("@param1", Reader.GetString(0));
   }
}
// Call Close when done reading.
reader.Close(); 
```

OP 评论说 Reader 会锁定表。
您可以使用 with (no lock) 或读入 List<>;
但是您也可以只使用 DataTable，这对我来说似乎是最好的计划。

# c# - 自动最小化 C# 中的访问级别

> ID：13402928
> 
> 赞同：3
> 
> 时间：2012-11-15T17:26:00.697
> 
> 标签：c#

是否有一种工具可以通过 C# 解决方案并最小化所有访问级别？例如，如果一个类是`public`并且程序集之外没有任何东西在使用它，那么它将被制作`internal`。如果一个类有一个从未在类层次结构之外使用过的`internal`or`public`成员，它将被创建`protected`，等等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T17:30:58.020

Resharper ( [http://www.jetbrains.com/resharper](http://www.jetbrains.com/resharper) ) 通常会向您建议这样的修改，但它不会自动为您执行。它还具有解决方案分析，可以识别整个解决方案中的这些错误或警告，以便您可以找到它们并决定是否要修复它们。

我从来没有见过一个工具可以迭代你的代码并自动进行这些更改（我不确定你为什么要这样做）。

# php - wamp 与生产上的 Mysql innodb 数据库

> ID：13402932
> 
> 赞同：0
> 
> 时间：2012-11-15T17:26:18.730
> 
> 标签：php, mysql, wamp, production-environment

我有 2 台服务器，一台测试一台生产。

1.  测试 - Win7 上的 WAMP（英特尔 i7 4GB 内存）
2.  生产 - Windows Server 2008 上的 IIS + FastCGI + MYSQL（Intel Xeon 2.4GHZ 12GB Ram）

我们在两者上都有一个 innodb 数据库设置，并且在部署 PHP 源文件之后，从数据库中查询/显示数据的特定函数组似乎在生产服务器上花费了 100% 的时间。

在我的测试环境中，我看到大约 3 秒后返回结果。在生产环境中，完全相同的查询需要大约 10 秒，具有完全相同的源文件和相同的 dbase 镜像。

如果有的话，我预计时间会被逆转，即生产速度比 wamp 快 100%。我检查了两侧的 my.ini 文件，虽然它们显然不一样，但其中没有什么明显的错误会导致这种情况。我在生产环境中测试了几个不同的 my.ini 配置，这对减少处理时间没有任何影响。

用于此测试的查询是一个复杂的多重循环，它询问数据库（发送一个查询，然后循环遍历结果并对每一行的 mysql 服务器进行进一步查询）所有结果都使用多维数组保存和修改在内存中。

我只计时实际脚本执行（mysql + php 数据检索和处理），而不是将此数据发送到浏览器所需的时间:)

我接下来应该看哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T22:59:56.500

只是为了关闭它，这是由于 php 环境中的本地化不正确 - 在 php 页面顶部设置我的语言环境可以解决问题。（尽管它在 php.ini 中正确设置，但 IIS 在执行基于日期的函数时会变慢）love microsoft

# php - .htaccess 重定向除某些请求之外的所有内容

> ID：13402935
> 
> 赞同：1
> 
> 时间：2012-11-15T17:26:26.903
> 
> 标签：php, jquery, ajax, regex, .htaccess

我的`.htaccess`文件有问题。它通过我的`index.php`页面重定向所有内容，这是我想要的大多数请求。

***但唯一一次我不想重定向是通过 AJAX 调用。***

`index.php`它通过我的文件重定向任何请求，如下所示：
`RewriteRule /.* /index.php [NC,L]`

AJAX 请求 url 是：
`http://myurl.dev/login/ajax/functions.php`

使用目录结构：
`/modules/login/ajax/functions.php`

我对正则表达式和 RewriteRules 缺乏经验，并且已经阅读/尝试了许多具有不同逻辑的变体，但无法阻止**/ajax/**中的任何内容不重定向到索引页面。

我在 Index RewriteRule 之前尝试了 RewriteCond 以重定向到索引，除非**/ajax/**但没有运气。

```
Rewrite Cond %{REQUEST_URI} !(.*)/ajax
RewriteRule /.* /index.php [NC,L] 
```

还为 /ajax/ 请求尝试了单独的 RewriteRule：
`RewriteRule ^(.*)/ajax/functions\.php$ /modules/$1/ajax/functions.php [NC,L]`

所以到目前为止没有任何工作，它要么重定向到`index`要么点击 a `500 server error`。

有没有人有任何建议或链接可以帮助？谢谢。

**注意**：当我说重定向时，我并不是指完整的页面刷新，因为我知道 Apache 不会在没有*[R]*标志的情况下进行完整的 url 刷新。

## -- 编辑：工作文件 --

这是我的完整 .htaccess 代码：

```
Options +FollowSymLinks  
RewriteEngine on

# Intercept any requests to the core, and keep them being written to the core (so they don't go to index.php)
RewriteRule ^core/(.*)$ core/$1 [NC,L]

# The magic, stops any requests to a file for being redirected.
# needed to be under the /core/ redirect
RewriteCond %{SCRIPT_FILENAME} !-f

# Rewrite all requests to index.php.
RewriteRule /.* /index.php [NC,L]

# Some requests (without trailing slashes) can fall through the above rule. This bit catches those stragglers.
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ^(.*)$ /$1/ [L,R=301]

ErrorDocument 404 /404/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T08:58:35.103

采用

```
RewriteCond %{SCRIPT_FILENAME} !-d //excludes existing directories
RewriteCond %{SCRIPT_FILENAME} !-f //excludes existing files 
```

在任何之前`RewriteRule`。这将排除任何已经存在的目录或文件，因此`RewriteRule`将不起作用`http://myurl.dev/login/ajax/functions.php`，因为它确实存在，但它会起作用`http://myurl.dev/someOtherNonExistantFile.php`

这使它成为您完整的 .htaccess 文件代码：

```
AuthType Basic
Options +FollowSymLinks  
RewriteEngine on
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-f
# Intercept any requests to the core, and keep them being written to the core (so they don't go to index.php)
RewriteRule ^core/(.*)$ core/$1 [NC,L]

# Rewrite all requests to index.php.
RewriteRule /.* /index.php [NC,L]

# Some requests (without trailing slashes) can fall through the above rule. This bit catches those stragglers.
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ^(.*)$ /$1/ [L,R=301]

ErrorDocument 404 /404/ 
```

# mysql - 使用 MySQL 计算小时数

> ID：13402936
> 
> 赞同：1
> 
> 时间：2012-11-15T17:26:33.817
> 
> 标签：mysql

我正在创建一个简单的项目，我在员工上班迟到时计算员工出勤率和其他事情，我必须输入延迟时间，例如员工迟到 30 分钟上班，所以我将在 30:00 或00:30:00 ，在每个月、周或天的月底，我想计算时间，例如 30 分钟 + 1H + 25 分钟，在每个月的月底我会得到所有这些小时的总和和分钟的报告，报告将显示我的平均时间和总和。

以下字段（时间登录持续时间，总通话时间，工作，时间未准备好时间）我想计算小时和分钟。

我在报告中得到的是显示我输入的时间与 AM/PM 的总和，这不是我想要的。

## 这是 MySQL 查询

```
SELECT
ID,
`Date`,
`Shift Time`,
`In charge`,
`Agent Name`,
Attendance,
Timing,
`Logged in Duration`,
`Total Talking Time`,
`Work Time`,
`Not ready Time`,
`Calls Handled`,
RNA,
`Shift Calls Presented`,
`Shift Calls Handled`,
`HD Calls Abandoned`,
`Upload Your Report`
FROM `shift report` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T05:00:48.557

我想我会从总结时间价值相关问题的角度为您发布答案，开发人员，用户迄今为止面临的问题。这不仅仅是格式化。

您可能注意到也可能没有注意到，总时间的总和可能会被引擎错误计算。尽管您有值，但进一步的 mysql 引擎可能会返回 null 。

当您添加/汇总时间值时，它会转换为数字，结果将采用数字格式。如果您尝试将时间值相加，如下所示：

例如 01:38:50、03:40:25 --> 理想情况下应该是 05:19:15

*   如果你做 Sum(以上两个) --> 你会得到一个数字
*   如果你使用 CAST(Sum(the above two) AS TIME) --> 你会得到 null
*   我的代码片段中还显示了另外两种可能性。

[示例代码参考](http://sqlfiddle.com/#!2/a7cd7/24)。它将向您展示我们刚刚讨论的不同结果。就目前而言，似乎三种方式格式化会有所帮助。

```
time_format(sec_to_time(sum(time_to_sec(logged_duration))),'%h:%i:%s') total_log_duration 
```

[报告给 MySQL 的错误尚未纠正。](http://bugs.mysql.com/bug.php?id=12108)

# objective-c - 跨设备正确处理 NSUbiquityKeyValueStore 更新？

> ID：13402938
> 
> 赞同：5
> 
> 时间：2012-11-15T17:26:37.543
> 
> 标签：objective-c, ios, icloud, nsubiquitouskeyvaluestore

我的应用程序使用 NSUbiquityKeyValueStore（一组对象）在 iCloud 中存储单个键值对。当数组中的任何对象发生更改时，整个数组都会保存到 iCloud。只要每个设备都有机会在本地进行更改之前下载最新的更新，这将非常有效。否则，本地更改可能会在其他设备的最新更新被拉下之前被推送到 iCloud，并且这些更新会在所有设备上丢失。这是我的应用程序的缺点还是 iCloud 的缺点，我该如何防止这种情况发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T14:46:36.903

*否则，本地更改可能会在其他设备的最新更新被拉下之前被推送到 iCloud*

本周我在一个正在从事的项目中遇到了类似的问题。我只是确保在收到来自 iCloud 的第一个更新之前，我没有将任何内容推送到 iCloud 服务器。此外，FWIW，我在初始化后立即设置了一个假键值对，以便它立即更新。

HackyStack 的本地标志的想法也是一个很好的解决方案；如果有变化，您可以询问用户是否要使用它。（有点像 Kindle 询问您是否要更新到最新页面）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T22:06:54.863

您应该阅读 -[NSUbiquitousKeyValueStore 同步] 的文档。它让您对何时使用它以及它的限制有一个很好的了解。特别要注意的是，它没有承诺何时实际同步数据，并暗示更新每分钟最多只上传几次（这可能适用于设备作为整个，而不仅仅是您的应用程序）。

键值存储机制旨在非常简单，仅用于非必要数据，通常是有关您的应用程序的配置信息。基本上，您不应该在其中存储用户数据或任何类似的东西。对于此类数据，请使用基于文件的 iCloud API。它们更复杂，但有了它们，您可以更深入地了解数据的同步状态，最重要的是，您可以收到冲突通知并提供自己的合并处理程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T17:35:02.717

我不确定我是否完全理解确切的问题，但我相信答案要么是 NSObject 上的一个类别（你可以有一个“版本”属性）来检查对象的“版本”，或者你需要另一个键值配对以存储在 iCloud 上的“版本”，可以与本地存储在设备上的版本（lastUpdateVersion）进行比较，以了解您的立场。如果你能给我一个关于你的问题的真实世界的例子，我可以回答得更好......可能你甚至不需要一个“版本”，而是一个标志（BOOL）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-03T04:27:36.727

> 这是我的应用程序的缺点还是 iCloud 的缺点，我该如何防止这种情况发生？

这是 iCloud 的应用程序缺陷和预期行为。您可以通过多种方式对此进行解释，但总的来说，这并不容易。特别是对于 >2 台设备，在某些情况下，冲突的更改将永远不会呈现给设备进行解决，因为一般来说 iCloud 行为是“最后更改获胜”（请参阅​​下面的详细描述）。一些想法：

*   而不是使用对象数组，而是为每个对象使用单独的键。显然这取决于你的应用程序的语义，但如果对象本质上是独立的，那么这通常会给你的应用程序它所期望的行为
*   如果所有项目都是相互关联的，那么您将不得不自己解决冲突。做到这一点的最佳方法将在很大程度上取决于您的应用程序 + 数据语义。例如，也许您可​​以为数组或数组中的某些对象添加时间戳。您可以为每次保存使用新的密钥名称，以便所有设备最终获得所有密钥并解决冲突（显然这可能会快速消耗存储空间！）。解决冲突可能不值得做，这取决于您已经在本地存储的内容来帮助解决这个问题

## 背景

我最近有理由`NSUbiquitousKeyValueStore`在一些（乏味的）深度研究变革冲突这个话题。我在两个旧的 WWDC 视频中找到了一些信息，这些视频扩展了当前的 Apple 文档，特别是 WWDC11 Adopting iCloud Storage，第 1 部分（[目前在此处可用](http://developer.apple.com/devcenter/download.action?path=/ios/ios_5_tech_talk_world_tou/adopting_icloud_storage__part_1.mov)，可通过[此处](https://gist.github.com/IsaacXen/874c59aec92a13f30728aecdabb9ea80#file-wwdc2011)找到）在 17:38 和随后的位置（例如 19:27）。另一个是 6:30 和 10:55 的 WWDC12 iCloud Storage Overview 演讲（[这里](https://developer.apple.com/devcenter/download.action?path=/videos/wwdc_2012__hd/session_209__icloud_storage_overview.mov)最初是通过[这里](https://mackuba.eu/notes/wwdc12/icloud-storage-overview/)）。我随后通过运行两台设备验证了下面描述的行为，一台运行 iOS 15.2 的 iPhone 8 和一台运行 iOS 12.4 的 iPad Air 2，其中包含一个测试程序和大量控制台登录 Xcode。以下是我对解决冲突的预期行为和机制的最佳猜测。

## 概括

当设备使用 保存单个密钥时，密钥中包含`NSUbiquitousKeyValueStore.default.set(value, forKey: key)`一个隐藏`timestamp`的密钥以及该呼叫的设备时间。如果/当操作系统与键值存储的 iCloud 副本同步时，它会检查`timestamp`每个键的 s，如果 iCloud`timestamp`时间较早，它会将新的键值保存`timestamp`到 iCloud 键值存储中。如果保存了键值，则当前已注册并在线接收通知的设备将被通知该键已更改，并且可以根据需要获取新值。如果 iCloud 不保存密钥值，任何设备上都不会发生任何通知，并且更改会被丢弃。

## 笔记

*   如果此 iCloud 帐户上的所有设备在使用时都在线*（注意低功耗模式、互联网连接不佳等）*，结果通常正是您想要的：应用程序进行更改，保存在 iCloud 中，传播到其他设备。如果设备已注册通知，通知会按预期发生。
*   如果设备 A 保存了一段`value`时间它处于离线状态，而另一个设备 B 稍后保存了一段`value`时间它处于在线状态，则设备 A 上线，设备 A 的更改将被忽略，因为 iCloud 现在有一个较新`value`的`timestamp`. B 永远不会被告知 A 的变化。但是，如果 A 已注册更改，A*将*收到更新的 B 的通知，`value`然后可以决定是否应重新提交其值。
*   由于这种“最后获胜”的行为，因此应该将属于一起的多个值一起保存为字典或数组，正如各种 Apple 文档和谈话中所建议的那样。
*   不交互的值应保存为单独的键 - 从而允许来自多个设备的最新更改成功混合。
*   没有自动化的方法来测试这些行为。回到 Xcode 9 天，可以为两个模拟器编写 UI 脚本来验证同步是否按预期工作，但这有一段时间没有奏效，这使得手动测试成为一个糟糕而乏味的替代品。
*   `NSUbiquitousKeyValueStore`除了简单的应用程序设置之外，它是许多场景的绝佳解决方案。就我个人而言，我希望看到更多的密钥（例如 10k 而不是 1k），但是设置的简单性和与客户的 iCloud 配额分开存储通常是一种乐趣。

在设备并不总是可靠连接的现实环境中，没有完美的解决方案。事实上，一些客户可能会故意保留旧 iPad，大部分时间处于离线状态，以在间歇性使用之间节省电池电量。如果您可以将同步数据保存在小的离散单元中并为每个键保存一个值，则同步通常会按预期工作。

# javascript - 逆对象元素顺序

> ID：13402941
> 
> 赞同：0
> 
> 时间：2012-11-15T17:26:46.857
> 
> 标签：javascript, jquery, json, html

反转json数据顺序的最佳方法是什么？

```
var myObject = [
{"id":"001", "content":"content11111111111111"},
{"id":"002", "content":"content22222222222222"},
{"id":"003", "content":"content33333333333333"},
{"id":"004", "content":"content44444444444444"}
];

myJson = JSON.stringify(myObject);

var inverseMyJson = inverseOrder(myJson);

inverseMyJson ==>
[
{"id":"004", "content":"content44444444444444"},
{"id":"003", "content":"content33333333333333"},
{"id":"002", "content":"content22222222222222"},
{"id":"001", "content":"content11111111111111"}
] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T17:28:03.000

在对它进行字符串化之前将其反转。

```
myObject.reverse();

myJson = JSON.stringify(myObject); 
```

如果你想保持原来的顺序，那么`.slice()`它首先。

```
var reversed = myObject.slice().reverse();

myJson = JSON.stringify(reversed); 
```

# actionscript-3 - swf 中的气泡点击事件

> ID：13402943
> 
> 赞同：0
> 
> 时间：2012-11-15T17:26:53.537
> 
> 标签：actionscript-3, flash, event-handling

我尝试动态添加一个 MovieClip 到现有的 SWF - 注入一个小代码来执行以下操作：

```
this.obj = new MovieClip(); // it is inside an object
obj.name = 'FLOOR';
obj.graphics.beginFill(0xFFFFFF, 0);
obj.graphics.drawRect(0,0,self.width, self.height);
obj.graphics.endFill();
obj.buttonMode = true;
self.addChildAt( floorLayerMC , 0); /* self is an reference for the this keyword, reference for the entire swf */ 
```

我的问题是：这个 SWF 有许多元素，如图像和文本字段，其中一些元素没有点击事件处理程序。我需要找到一种方法将所有事件“重定向”到我的“FLOOR”元素，使用类似冒泡事件的方法。

当然，我可以在任何元素之上添加 FLOOR，但我有一些带有点击处理程序的元素。我不能忽略所有的元素。所以我的问题是：

如果我单击带有单击处理程序的 MovieClip，请执行原始操作。如果我在没有单击处理程序的情况下单击 MovieClip，请执行 FLOOR 操作。

我无法在所有元素中添加事件处理程序。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T18:55:29.623

聆听对容器影片剪辑自己的舞台（包含 FLOOR 的影片剪辑）的点击。在单击事件的处理程序方法中，使用 hitTestPoint 和容器动画剪辑的 mouseX 和 MouseY 进行命中测试，如果鼠标悬停在任何可单击对象上，则忽略舞台单击。将所有可点击的对象存储在一个数组中以进行该测试。

这段代码未经测试，但它会是这样的：

```
var exemptArray:Array = [ btn_mc1, btn_mc2, btn_mc3 ];
containerMC.stage.addEventListener(MouseEvent.CLICK, onClickMyMC);

function onClickMyMC( event:Event ):void
{
    for(var i:int = 0; i < exemptArray.length; i++)
    {
        if( exemptArray[i].hitTestPoint(containerMC.mouseX, containerMC.mouseY) )
        {
            // do nothing, ignore the stage click ( and let the object with the click respond )
            break;
        }
        else
        {
            // respond to the stage click
        }
    }
} 
```

**在不知道哪些对象可以提前点击的情况下构建exemptArray：（未经测试，但应该足够接近给你一个想法）。**

```
var exemptArray:Array = buildExemptArray();

function buildExemptArray():Array
{
    var arr:Array = [];

    for(var j:int = 0; j < containerMC.numChildren; j++)
    {
        if( containerMC.getChildAt(i).hasEventListener(MouseEvent.CLICK) )
        {
            arr.push( containerMC.getChildAt(i) );
        }
    }

     return arr:
} 
```

**编辑以在评论中回答问题：**

**this.addEventListener(MouseEvent.CLICK, onClick)**将为整个对象添加一个点击事件，**包括子**对象。

**this.stage.addEventListener(MouseEvent.CLICK, onClick)**只会将点击添加到影片剪辑的舞台，**而不是其子**级。

在 as3 中，所有的movieclips 都有一个stage 属性。如果你在主时间线上写**this.stage.addEventListener(MouseEvent.CLICK, onClick);** 这将在整个 swf 中添加一个舞台点击。但是，如果你写了类似**myMC.stage.addEventListener(MouseEvent.CLICK, onClick);** 它只会向该影片剪辑的舞台（myMC 的舞台）添加一次点击。由于舞台位于显示列表下方，因此您可以在任何影片剪辑中捕捉点击。如果您无法提前访问所有具有鼠标事件的对象，则可以循环遍历所有容器的子对象，并使用**.hasEventListener(MouseEvent.CLICK); 检查它们是否具有 mouseEvent；**，从中创建您的 excludeArray，然后使用上述相同的逻辑来忽略 excludeArray 中的项目。

# facebook - 仅连接到我的 Facebook 帐户并在我的网站上显示我的照片

> ID：13402944
> 
> 赞同：0
> 
> 时间：2012-11-15T17:26:57.607
> 
> 标签：facebook, facebook-graph-api

我正在尝试使用 Graph API 或 FQL 在我的网站上显示我的 Facebook 相册，但我发现的所有示例都是访问访问者的相册。

谁能指导我如何连接到我的 Facebook 帐户并检查我的相册以供访问我网站的访问者查看我的照片？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:31:04.977

我不会向您提供代码，但您应该做的是，在用户无权访问的后端运行 Oauth 脚本，获取访问令牌，然后将其用于主站点以获取所需的详细信息。

它是简短的硬编码（或从数据库/文件访问）access_token，而不是通过授权显示其详细信息的访问者来生成它。

获得图像链接后，您只需更新新链接即可。您应该对网站进行编码以避免不必要的查询。

# javascript - 使用“Call”调用匿名函数时如何分配“This”？

> ID：13402951
> 
> 赞同：1
> 
> 时间：2012-11-15T17:27:35.643
> 
> 标签：javascript, oop, call, this

来自[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)：

```
var animals = [
  {species: 'Lion', name: 'King'},
  {species: 'Whale', name: 'Fail'}
];

for (var i = 0; i < animals.length; i++) {
  (function (i) {
    this.print = function () {
      console.log('#' + i  + ' ' + this.species + ': ' + this.name);
    }
    this.print();
  }).call(animals[i], i);
} 
```

在上面的例子中，“this”是如何在“animals”循环内的匿名函数中使用的？我很好奇为什么“this”引用的是动物对象而不是窗口。

例如，如果我要从参数中删除**animals[i]**，那么一切都是未定义的。这是否意味着匿名函数从它们收到的第一个参数中得出它们的“身份”，或者是其他事情发生了？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T17:29:48.783

这不是在您引用自己的[文档中解释的吗？`function.call()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)

> ```
> fun.call(thisArg[, arg1[, arg2[, ...]]]) 
> ```
> 
> **参数**
> 
> `thisArg``this`为有趣的调用提供的值。[...]

然后：

> **描述**
> 
> `this`您可以在调用现有函数时分配不同的对象。

所以你是对的，`animals[i]`被用作`this`函数内部。您可以将其视为始终具有`this`名称的隐式隐藏参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T17:29:25.683

就是这部分：

```
 }).call(animals[i], i); 
```

通过调用 with `.call()`，`this`明确指定了 for 的值。

`Function`原型中有两个类似的功能可用：`.call()`和`.apply()`. 它们都允许使用某些特定值（对对象的引用）作为`this`.

调用函数时，总是以一种或另一种方式设置`this`的**值**。如果对函数的引用由`.`or`[ ]`表达式确定：

```
something.fn( whatever );

something[ expression ](whatever); 
```

那么 的值`this`就是基础对象的值（上面例子中的“某物”）。Eich 先生称其为“接收器”，如果您想到诸如 Smalltalk 消息之类的函数调用，这是有道理的。

如果你调用一个没有基础对象的函数，那么 的值`this`要么是全局对象，要么`null`是处于“严格”模式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T17:29:40.567

因为您正在使用`call`which 定义为：

`call(thisScope, args)`

因此，您`animal[i]`作为`thisScope`手段传递的事实`this == animal[i]`。

# php - 如何将javascript变量插入mysql数据库？

> ID：13402953
> 
> 赞同：0
> 
> 时间：2012-11-15T17:27:40.287
> 
> 标签：php, javascript, insert

我似乎无法弄清楚如何简单地将 javascript 变量添加到 mySQL 表中！

我有一个 html 代码，它只是为我的游戏制作画布。然后我有一个 javascript 文件来完成所有游戏进程，这是我用来将 javascript 变量发送到 php 文件的代码：

```
 var uiStats = $("#gameStats");
var uiHealth = $(".gameHealth");

var health = 10;

$.post('http:/localhost/basic_structure/game.php', { "health" : health}); 
```

然后这里是将数据插入数据库的 php 文件：

```
$dbhost = 'localhost';
$dbuser = 'root';
$dbpass = '';

$conn = mysql_connect($dbhost, $dbuser, $dbpass)
    or die
('Error connecting to mysql');

$dbname = 'game';
mysql_select_db($dbname, $conn);

$health = $_POST['health'];

mysql_query("INSERT INTO game_table (health)
VALUES ('$health')");

mysql_close($con); 
```

我只是想在我的游戏中保存玩家的健康以供以后使用。

任何帮助表示赞赏

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:30:23.293

If you copy/pasted this from your actual code,

```
'http:/localhost/basic_structure/game.php' 
```

should be

```
'http://localhost/basic_structure/game.php' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T17:33:48.820

您在通话后的网址不正确

此外，使用 PDO 或 mysqli_ 代替 mysql_ 因为 mysql_ 已弃用。

第三个建议是您应该在您的帖子中包含一个回调（从 php 到 javascript），以允许您检查该过程是否成功/失败并相应地通知用户。

# linux - 如何通过 bash 中的 FILE URI 方案下载文件？

> ID：13402955
> 
> 赞同：1
> 
> 时间：2012-11-15T17:27:49.667
> 
> 标签：linux, bash, shell

> **可能重复：**
> [wget：非 http URL 上不支持的方案](https://stackoverflow.com/questions/13387970/wget-unsupported-scheme-on-non-http-url)

例如：

```
export URI=file:///myhost/system.log 
```

如何在 bash 中从此 URI 下载 system.log 文件？

我尝试过使用`wget`，`curl`但它们不支持 FILE URI 方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T17:29:54.413

尝试这样做：

```
export URI="file:///etc/passwd"
curl -s "$URI" > /tmp/l
cat /tmp/l 
```

如果您需要下载远程文件，则应使用其他协议（和方案），例如：

```
curl ftp://user:password@host:port/path/to/file 
```

或者

```
scp host:/path/to/file file 
```

ETC...

**笔记**

`curl`能够下载*文件方案*，尽管你说了什么。

# knockout.js - css类绑定安全吗？

> ID：13402965
> 
> 赞同：2
> 
> 时间：2012-11-15T17:28:28.773
> 
> 标签：knockout.js, xss

我有一个小部件，客户端网站使用 iframe 嵌入。我希望客户能够如下指定css类，其中widgetStyle是通过url提供的，比如[http://acme.widget.com/#/widgetStyle](http://acme.widget.com/#/widgetStyle)

```
<body data-bind="attr: { 'class': widgetStyle }">
  <!-- Content -->
</body> 
```

我的问题是：这安全吗？是否保证淘汰赛可以正确逃脱以避免 XSS 等？在所有浏览器中都安全吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T19:42:13.207

是的，它是安全的。原因是 CSS 分配不是通过将 HTML 修改为字符串，而是通过修改 HTML DOM 属性来完成的。因此，淘汰赛通过代码进行类分配`node.className=newClass`。因此，您可以将任何您想要的内容放入其中，`newClass`而无需任何额外的转义。

还有一点题外话。如果您使用`css`敲除绑定，您可以使您的代码更清晰：

`<body data-bind="css: widgetStyle">`

# php - Joomla k2 归档模块按年和月排序

> ID：13402970
> 
> 赞同：-2
> 
> 时间：2012-11-15T17:28:59.050
> 
> 标签：php, mysql, joomla, joomla-k2

我正在将 joomla 与 K2 一起使用，并且我想逐年在存档模块中订购新闻。当您单击“年份”时，它需要显示该年份的所有文章。Bit 模块还需要扩展 月过滤更深

如何修改模块以使其像这样？

问候

所以这就是我的意思

2012 - 一月 - 二月 - 三月 - 等等 2013 - 一月 - 二月 - 三月 - 等等

年份和月份都需要可过滤

如何修改模块以使其像这样？

问候

所以这就是我的意思

项目清单

*   2012
*   贾努阿里
*   二月
*   行进
*   等等等等

*   2013

    *   贾努阿里
    *   二月
    *   行进
    *   等等等等

年份和月份都需要可过滤

如何修改模块以使其像这样？

问候

```
<div id="k2ModuleBox<?php echo $module->id; ?>" class="k2ArchivesBlock<?php if($params->get('moduleclass_sfx')) echo ' '.$params->get('moduleclass_sfx'); ?>">
  <ul>
    <?php foreach ($months as $month): ?>
    <li>
      <?php if ($params->get('archiveCategory', 0) > 0): ?>
      <a href="<?php echo JRoute::_('index.php?option=com_k2&view=itemlist&task=date&month='.$month->m.'&year='.$month->y.'&catid='.$params->get('archiveCategory')); ?>">
        <?php echo $month->name.' '.$month->y; ?>
        <?php if ($params->get('archiveItemsCounter')) echo '('.$month->numOfItems.')'; ?>
      </a>
      <?php else: ?>
      <a href="<?php echo JRoute::_('index.php?option=com_k2&view=itemlist&task=date&month='.$month->m.'&year='.$month->y); ?>">
        <?php echo $month->name.' '.$month->y; ?>
        <?php if ($params->get('archiveItemsCounter')) echo '('.$month->numOfItems.')'; ?>
      </a>
      <?php endif; ?>
    </li>
    <?php endforeach; ?>
  </ul>
</div> 
```

查询来自另一个文件

```
 public static function getArchive(&$params)
{

    $mainframe = JFactory::getApplication();
    $user = JFactory::getUser();
    $aid = (int)$user->get('aid');
    $db = JFactory::getDBO();

    $jnow = JFactory::getDate();
    $now = K2_JVERSION == '15' ? $jnow->toMySQL() : $jnow->toSql();

    $nullDate = $db->getNullDate();

    $query = "SELECT DISTINCT MONTH(created) as m, YEAR(created) as y FROM #__k2_items  WHERE published=1 AND ( publish_up = ".$db->Quote($nullDate)." OR publish_up <= ".$db->Quote($now)." ) AND ( publish_down = ".$db->Quote($nullDate)." OR publish_down >= ".$db->Quote($now)." ) AND trash=0";
    if (K2_JVERSION != '15')
    {
        $query .= " AND access IN(".implode(',', $user->getAuthorisedViewLevels()).") ";
        if ($mainframe->getLanguageFilter())
        {
            $languageTag = JFactory::getLanguage()->getTag();
            $query .= " AND language IN (".$db->Quote($languageTag).", ".$db->Quote('*').") ";
        }
    }
    else
    {
        $query .= " AND access<={$aid} ";
    }

    $catid = $params->get('archiveCategory', 0);
    if ($catid > 0)
        $query .= " AND catid=".(int)$catid;

    $query .= " ORDER BY created DESC";

    $db->setQuery($query);
    $rows = $db->loadObjectList();
    $months = array(JText::_('K2_JANUARY'), JText::_('K2_FEBRUARY'), JText::_('K2_MARCH'), JText::_('K2_APRIL'), JText::_('K2_MAY'), JText::_('K2_JUNE'), JText::_('K2_JULY'), JText::_('K2_AUGUST'), JText::_('K2_SEPTEMBER'), JText::_('K2_OCTOBER'), JText::_('K2_NOVEMBER'), JText::_('K2_DECEMBER'), );
    if (count($rows))
    {

        foreach ($rows as $row)
        {
            if ($params->get('archiveItemsCounter'))
            {
                $row->numOfItems = modK2ToolsHelper::countArchiveItems($row->m, $row->y, $catid);
            }
            else
            {
                $row->numOfItems = '';
            }
            $row->name = $months[($row->m) - 1];
            $archives[] = $row;
        }

        return $archives;

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T22:48:25.413

这解决了我的问题：

```
<div id="k2ModuleBox<?php echo $module->id; ?>" class="k2ArchivesBlock<?php if($params->get('moduleclass_sfx')) echo ' '.$params->get('moduleclass_sfx'); ?>">

  <?php
    foreach ($months as $month) {
        $years[$month->y][] = $month;
    }
  ?>
  <?php foreach ($years as $year => $months) : ?>
    <h4><?php echo $year; ?></h4>
    <ul>
        <?php foreach ($months as $month): ?>
        <li>
        <?php if ($params->get('archiveCategory', 0) > 0): ?>
        <a href="<?php echo JRoute::_('index.php?option=com_k2&view=itemlist&task=date&month='.$month->m.'&year='.$month->y.'&catid='.$params->get('archiveCategory')); ?>">
            <?php echo $month->name.' '.$month->y; ?>
            <?php if ($params->get('archiveItemsCounter')) echo '('.$month->numOfItems.')'; ?>
        </a>
        <?php else: ?>
        <a href="<?php echo JRoute::_('index.php?option=com_k2&view=itemlist&task=date&month='.$month->m.'&year='.$month->y); ?>">
            <?php echo $month->name.' '.$month->y; ?>
          <?php if ($params->get('archiveItemsCounter')) echo '('.$month->numOfItems.')'; ?>
          </a>
        <?php endif; ?>
        </li>
        <?php endforeach; ?>
    </ul>
    <?php endforeach; ?>
</div> 
```

# javascript - 使用 mustache 模板渲染“0”值

> ID：13402972
> 
> 赞同：5
> 
> 时间：2012-11-15T17:29:15.553
> 
> 标签：javascript, templates, web-applications, mustache, zero

我有一个属性值为“0”（零）的模型。我的模板看起来像这样：

```
 {{#count}}{{{count}}} items{{/count}}
    {{^count}}-{{/count}} 
```

如果`myModel.count = 0`，则呈现的 html 什么都不是。这就像值“count”同时为空而不是空。

此案例的 Mustache 文档：[https ://github.com/janl/mustache.js#inverted-sections](https://github.com/janl/mustache.js#inverted-sections)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-28T21:03:49.343

@bobthecow 在他的评论中回答了这个问题：

> 它不会显示零，因为零是错误的。使其显示的一种选择是将其设置为非假值（如字符串“0”）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:49:14.610

一种方法是使用 lambda 来检查值。

[http://jsfiddle.net/Bodman/yb83s/](http://jsfiddle.net/Bodman/yb83s/)

```
var data = {

  "dataset" : [ 
    {count: 0},
    {count: -1},
    {count: 2},
    {count: false},
    {no_count:'yay'}
  ],

  "check_zero": function () {
    return function (text, render) {
      var result = '';
      var count = this.count;
      if(!isNaN(parseFloat(count)) && isFinite(count)){ 
          result = count;
      }else {
          result = render(text);
      }
      return result;
    }
  }
} 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-02T02:30:07.277

不干净但有效

```
{{#data.value}}
    {{data.value}}
{{/data.value}}
{{^data.value}}
    0
{{/data.value}} 
```

# c# - 为什么 TimeoutException 没有让我的频道出错？

> ID：13402977
> 
> 赞同：3
> 
> 时间：2012-11-15T17:29:24.107
> 
> 标签：c#, .net, wcf, duplex, timeoutexception

我有一个双工 WCF 服务和客户端在同一台机器上运行。客户端配置为 15 秒超时：

```
<binding name="NetTcpBinding_IServiceIPC" closeTimeout="00:00:15"
      openTimeout="00:00:15" receiveTimeout="00:00:15" sendTimeout="00:00:15" /> 
```

客户端正在处理这样的错误：

```
client.InnerChannel.Faulted += FaultHandler;
client.InnerDuplexChannel.Faulted += FaultHandler;
client.ChannelFactory.Faulted += FaultHandler; 
```

`TimeoutException`如果我终止我的服务进程，客户端会在 15 秒后正确获得：

```
This request operation sent to net.tcp://localhost:8732/Service/ did not receive a reply within the configured timeout (00:00:15).  The time allotted to this operation may have been a portion of a longer timeout.  This may be because the service is still processing the operation or because the service was unable to send a reply message.  Please consider increasing the operation timeout (by casting the channel/proxy to IContextChannel and setting the OperationTimeout property) and ensure that the service is able to connect to the client. (System.TimeoutException) 
```

但是，此时通道没有故障。我的故障处理程序直到我终止服务进程后大约 5 分钟才被调用。我认为 a`TimeoutException`会使频道出错（请参阅此[答案](https://stackoverflow.com/a/2646833/546561)），但不知何故，情况似乎并非如此。有什么方法可以在服务进程被杀死后强制通道更快地出现故障？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T18:48:43.293

这个问题[Duplex channel Faulted event does not raise on second connection attempt](https://stackoverflow.com/questions/10847877/duplex-channel-faulted-event-does-not-rise-on-second-connection-attempt)建议该`Faulted`事件并不总是被触发。MSDN 上的 WCF 状态流程图证实了这种可能性 - [http://msdn.microsoft.com/en-us/library/ms789041.aspx](http://msdn.microsoft.com/en-us/library/ms789041.aspx)

有许多通往关闭状态的路径不会经过故障状态。最有可能的是，当您超时时，`Abort()`正在调用该方法并且您从打开状态转换到关闭状态，而无需经历故障状态。添加一些日志记录以检查整个执行过程中的状态。如果您在超时后尝试重新打开频道，这可以解释为什么您会在 5 分钟后进入故障状态。要解决更大的问题，请将逻辑移至`FaultedHandler`其他位置，以便在通过其他路径达到关闭状态时执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-24T08:48:24.903

我知道这个问题很老了。但我搜索了很多，总是在这里结束。所以我想我会在这里发布我的发现：

这取决于哪个超时。

如果您点击`SendTimeout`或`ReceiveTimeout`您的绑定（在我的情况下`NetTcpBinding`），那么是的，通道将出现故障。

但是，如果你点击`OperationTimeout`你的服务（在我的情况下是 DuplexChannel），那么你只会得到一个`TimeoutException`并且通道不会**出错**。

# c - 用于在 c 中反转字符串的优化代码

> ID：13402979
> 
> 赞同：1
> 
> 时间：2012-11-15T17:29:26.183
> 
> 标签：c, c-strings

我一直将用于反转字符串的 c 代码实现为：

1.  循环 I 直到字符串的长度或长度的一半
2.  将指针放在字符串的末尾和开头
3.  一一交换。

但我想要一个优化的代码来降低这个问题的时间复杂度，除了我提到的那个。我尝试了谷歌搜索，但没有找到任何相关的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T17:48:14.780

如果通过“时间复杂度”您指的是排除系数和低阶项的大 O 表示法，那么您将无法击败简单的 O(n) 算法来反转 C 字符串。

如果您指的是特定机器（或机器类别）执行操作所需的时间，则有多种方法可以优化反转。典型的优化包括[循环展开](http://en.wikipedia.org/wiki/Loop_unwinding)、逐个机器[词](http://en.wikipedia.org/wiki/Word_%28computer_architecture%29)而不是逐个字符地使用字符，以及对终止 NUL 字符的智能搜索。免费提供的 GNU libc 包含[此类优化的示例](http://sourceware.org/git/?p=glibc.git;a=blob;f=string/strchr.c;h=9d18b7eeb989c678d2c2e26eb067f7050dfaa126;hb=HEAD)。

上面的一些优化，比如循环展开，可以通过优化编译器自动实现。其他可能在某些平台上适得其反，或者它们的加速取决于字符串的大小。在某些情况下，手写优化会阻碍编译器自己优化代码的努力。确保您不会让事情变得更糟的唯一方法是开发一个涵盖您预期用途的基准测试，并随着您的进展仔细地对您的代码进行基准测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T15:14:14.423

```
for(fctr=0,bctr=len-1;fctr<len/2;fctr++,bctr--)
{ 
    temp=str[fctr];
    str[fctr]=str[bctr];
    str[bctr]=temp;
} 
```

这可能会很快奏效！

# javascript - Display a message, using waitForKeyElements, every time a class is added to element

> ID：13402984
> 
> 赞同：1
> 
> 时间：2012-11-15T17:29:52.247
> 
> 标签：javascript, jquery, greasemonkey

I have been learning javascript, jQuery, and userscripts, as well as how to user firebug, the last 3 days in the attempt to display information about a selected customer on the website desk.com. So far, other than a lot of learning, I have little to show for. I simply can't get the message to update when a new tab is selected.

[![](../Images/f7e8a4112faa1dfff24bf731a8f696c4.png)](https://i.stack.imgur.com/vucnR.png "Link to posted image.")

The purple tab is the selected one. All I need to do is when a new tab is selected display a message. For testing lets just put this message in an javascript alert(). Here is the HTML for the entire top bar that contains the Customer 1 tab.

```
<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner all">
  <li class="a-icons ui-state-default ui-corner-top">
    <a id="tab-tickets-label" href="#tabs-tickets">
      <img width="18" height="16" src="https://d3jyn100am7dxp.cloudfront.net/images/a-icon-agent-list.png?1352530323" alt="">
     </a>
  </li>
  <li class="a-icons ui-state-default ui-corner-top">
    <a id="tab-kb" href="#tabs-kb">
      <span>
        <img width="16" height="17" src="https://d3jyn100am7dxp.cloudfront.net/images/a-icon-knowledge-base.png?1352530323" alt="">
      </span>
    </a>
  </li>
  <li class="a-icons a-last ui-state-default ui-corner-top">
    <a id="tab-search" href="#tabs-search">
      <span>
        <img width="18" height="17" src="https://d3jyn100am7dxp.cloudfront.net/images/a-icon-search.png?1352530323" alt="">
      </span>
    </a>
  </li>
  <li class="ui-state-default ui-corner-top">
    <a id="tab_header_ticket_id_73354627" href="#tabs-tid_88be8cc0-116b-0130-bf8a-12313f070061">
      <span id="tabs-tid_88be8cc0-116b-0130-bf8a-12313f070061-closer" class="tab_closer">
      </span>
      <span>
      <span id="tabs-tid_88be8cc0-116b-0130-bf8a-12313f070061-icon" class="top_tab_icon">
        <img width="20" height="20" src="https://d3jyn100am7dxp.cloudfront.net/images/interactions/20/a-phone.png?1352530323" alt="">
      </span>
      <span id="tabs-tid_88be8cc0-116b-0130-bf8a-12313f070061-customer-name" class="top_tab_customer_name">Customer 2</span>
      </span>
      <span id="tabs-tid_88be8cc0-116b-0130-bf8a-12313f070061-service-level-bar" class="tab_service_level_indicator"> </span>
    </a>
  </li>
  <li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active">
    <a id="tab_header_ticket_id_73382205" href="#tabs-tid_88cd2df0-116b-0130-1271-12313f06c46f">
      <span id="tabs-tid_88cd2df0-116b-0130-1271-12313f06c46f-closer" class="tab_closer"></span>
      <span>
        <span id="tabs-tid_88cd2df0-116b-0130-1271-12313f06c46f-icon" class="top_tab_icon">
          <img width="20" height="20" src="https://d3jyn100am7dxp.cloudfront.net/images/interactions/20/a-email.png?1352530323" alt="">
        </span>
        <span id="tabs-tid_88cd2df0-116b-0130-1271-12313f06c46f-customer-name" class="top_tab_customer_name">Customer 1</span>
      </span>
      <span id="tabs-tid_88cd2df0-116b-0130-1271-12313f06c46f-service-level-bar" class="tab_service_level_indicator"> </span>
    </a>
  </li>
</ul> 
```

In the above code the element with the class 'ui-tabs-selected' is a `<li>`. This class is added to the newly selected tab every time a new tab is selected. I need my script to display a message, say "a new customer is selected", every time the class 'ui-tabs-selected' is added to a new element.

Here is the scriptAttemp.user.js that I have tried most recently.

```
// ==UserScript==
// @name          deskNotifications2
// @namespace     http://www.dutgriff.com/userscripts
// @description   Notifications for desk.com
// @include       https://nvows.desk.com/agent*
// @version       1.0
// @require       http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @require       https://gist.github.com/raw/2625891/waitForKeyElements.js
// @grant         GM_addStyle
// ==/UserScript==

waitForKeyElements (
    ".ui-tabs-selected", addAlert
);

function addAlert (jNode) {
    alert('The user was selected.');
} 
```

**The above script works great at first.** It will display the message when the page loads. It will display the message again if I select a new tab. Then when I select a new tab again it does nothing.

I need it to display the message every time a new tab is selected, or every time the '.ui-tabs-selected' is moved to a new location. This class can move to a new location by clicking other things on the page, not just by clicking on a different tab.

For instance when there are no customer-tab selected I can click a button to view a new customer. This will open a new tab and place the '.ui-tabs-selected' on this new tab. All advice/links to info pages/constructive criticism is greatly appreciated. Sorry I am so new to all of this.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T03:15:35.210

By default, [`waitForKeyElements()`](https://gist.github.com/2625891) only fires once per individual node found. But, what you want is to fire when that class (`ui-tabs-selected`) ***moves*** from one node to another.

This means that you must track the old node, and see if it is the same as the new node. And if you use `waitForKeyElements()`, you must tell it to run more than once on individual found nodes. You can do that by having the callback function (`addAlert()` in this case) return `true`.

Putting it all together, your script would become:

```
// ==UserScript==
// @name          deskNotifications2
// @namespace     http://www.dutgriff.com/userscripts
// @description   Notifications for desk.com
// @include       https://nvows.desk.com/agent*
// @version       1.0
// @require       http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @require       https://gist.github.com/raw/2625891/waitForKeyElements.js
// @grant         GM_addStyle
// ==/UserScript==

waitForKeyElements (
    ".ui-tabs-selected", addAlert
);

function addAlert (jNode) {
    if (typeof this.lastNode == "undefined"  ||  this.lastNode != jNode[0]) {
        alert('The user was selected.');
    }
    this.lastNode = jNode[0];

    return true;    // Allow repeat firings for this node.
} 
```

# ios - UITextView animating change of frame does not animate text reallocation

> ID：13402985
> 
> 赞同：7
> 
> 时间：2012-11-15T17:29:52.667
> 
> 标签：ios, uitextview, uiviewanimation

I have a UITextView, and I am trying to animate a change of frame when the user taps on a button. Basically the text view grows larger to fit the screen so it can display more text, and then when the user taps the button again it shrinks to its original frame.

I perform the animation using blocks, like this:

```
if(!isDisplayingDetailView)
{
    //Expand view
    [UIView animateWithDuration:0.5
                     animations:^{
                         self.detailView.frame = self.view.frame;
                     }
                     completion:^(BOOL finished){
                         isDisplayingDetailView = YES;
                     }];
}
else{
    //Shrink view.
    [UIView animateWithDuration:0.5
                     animations:^{
                         self.detailView.frame = self.detailFrame;
                         }
                     completion:^(BOOL finished){
                         isDisplayingDetailView = NO;
                     }];
} 
```

Where self.detailView is the UITextView, and self.detailFrame is just a CGRect holding the original frame. isDisplayingDetailView is just a BOOL to check if the view is expanded or not. My problem is that the text resize is not animating. I made some screenshots from a test app to illustrate my problem: App default view: ![Default view](../Images/7bd04d5138b6ef7deab1cffbad7093c7.png)

The expanded view:

![Expanded view](../Images/6f4af92c9478d91ae87e3b8ddd9826fb.png)

The textview just a moment after tapping the button:

![Shrinking view](../Images/2931a138cd4ec72237883e5ae41e783b.png)

As you can see the text automatically shrinks to the final frame size, without any kind of animation, while the bounds still are animating. I guess that's the right behavior, but I'd like to know if it's possible to animate the text along with its view.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-31T19:52:38.773

textviews 中的文本并不总是按预期运行。为此，您必须设置一个 NSTimer 并在每个刻度上设置帧大小。

执行以下操作：

```
textview.frame = CGRectMake (textview.frame.origin.x, textview.frame.origin.y, textview.frame.size.width-1, textview.frame.size.height-1); 
```

然后当它完成后，我会从 superview 中完全删除 textview 并将其设置为 nil，然后初始化一个新的。这样做的原因是当由于某种原因更改文本视图的框架时，会在文本框周围添加填充。除非您将框架更改至少 100 次，否则您不会注意到它。

```
[textview removeFromSuperview];
textview = nil;
textview = [[UITextView alloc] initWithFrame:CGRectMake(x, y, width, height)];
textview.text = yourTextString;
//You will also have to set whatever non default properties you want, such as text or background color
[view addSubview:textview]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-16T20:11:53.383

另一种解决方案是对边界变化进行动画处理。

有几种方法，但这里有一个简单的子类，`UITextView`它正是这样做的。

```
import Foundation
import UIKit

import QuartzCore

class SmoothTextView : UITextView {

    override func actionForLayer(layer: CALayer!, forKey key: String!) -> CAAction! {

        if key == "bounds" {

            let x = super.actionForLayer(layer, forKey: "backgroundColor")

            if let action:CAAnimation = x as? CAAnimation {

                let transition = CATransition()

                transition.type             = kCATransitionFade
                transition.beginTime        = action.beginTime
                transition.duration         = action.duration
                transition.speed            = action.speed
                transition.timeOffset       = action.timeOffset
                transition.repeatCount      = action.repeatCount
                transition.repeatDuration   = action.repeatDuration
                transition.autoreverses     = action.autoreverses
                transition.fillMode         = action.fillMode

                transition.timingFunction = action.timingFunction
                transition.delegate = action.delegate

                return transition
            }
        }

        return super.actionForLayer(layer, forKey: key)
    }
} 
```

从 iOS 8 开始。

作为额外的调整，您可能希望通过将所有填充或插入归零来调整文本容器来配置文本视图实例的文本：

```
textView.textContainer.lineFragmentPadding = 0.0
textView.textContainerInset = UIEdgeInsetsZero 
```

# git - manage the project documentation in a git repository

> ID：13402988
> 
> 赞同：1
> 
> 时间：2012-11-15T17:29:58.067
> 
> 标签：git, documentation

I'm currently working on a project with a few people and I was wondering what could be the best way to share the documentation of our project. I was thinking about adding the doc in some folders and adding it in git but I don't really know how to do this the proper way...

We try to follow this how-to for our git repo : [http://nvie.com/posts/a-successful-git-branching-model/](http://nvie.com/posts/a-successful-git-branching-model/)

I think it's a pretty common way to manage a git repo : master for the releases, develop for the coming features, one branch per feature... but I don't see any way to include and work on the doc with this model. Should I create a specific branch for the doc ? Should I push it in develop then merge it back every time in the feature branches ? I'm a bit lost...

Thanks for your help :-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:38:50.790

您可能希望功能的文档与功能本身同时合并。对我来说，这表明您应该在您正在编辑代码的任何分支中处理文档。

因此，我建议有一个 docs 目录（如您在问题中所述），并在您的功能分支中更新它。这样，如果您决定不合并该功能，那么您就不会意外地合并随附的文档。

*在开发*分支中这样做没有多大意义，因为它是一个集成分支。所以你希望在那里合并东西，但不在那里进行实际开发（包括编写文档）。

> 我应该为文档创建一个特定的分支吗？

如果您的意思是创建一个仅包含文档的分支，那么不，我认为这是一个坏主意。能够同时检出代码和文档很有用，如果您需要检出两个分支，那就更难了。

如果您的意思是创建一个特定的分支来处理文档，那么是的，可能。如果您将文档称为功能，那么使用功能分支（或类似的不同名称）可能是有意义的。

# swt - SWT - PrintDialog 只是为了获取本地打印机而不是打印

> ID：13402995
> 
> 赞同：0
> 
> 时间：2012-11-15T17:30:34.303
> 
> 标签：swt, printdialog

是否可以使用 SWT PrintDialog 仅显示本地打印机然后返回选定的打印机值？

我有一个适合我的印刷课。我将以下变量传递给类。

String filePath String printerName String jobName

我通过以下方式从我的 GUI 类中调用 Print 类。

```
new AplotPdfPrintLocal().printPDF("c:\\Temp\\test.pdf", "\\\\PrintServer\\MyPrinter","PDF Print Job"); 
```

现在调用正在传递默认打印机。

在上述调用之前，我会很高兴打开一个本地打印机对话框（如 PrintDialog）。能够选择本地打印机，然后使用选定的打印机值调用我的打印类。我希望我的打印类执行打印操作而不是 PrintDialog。

我在想，当在 PrintDialog 中按下 OK 按钮时，我们会执行类似以下伪代码的操作

```
public void widgetSelected(SelectionEvent e) {
   new AplotPdfPrintLocal().printPDF("c:\\Temp\\test.pdf", "SelectedPrinterValue","PDF Print Job");
} 
```

这可能吗？
有没有更好的方法来执行此操作？

我知道有一种方法可以查找本地打印机（PrinterJob.lookupPrintServices()）。但我真的不想围绕它写一个新的对话框，我宁愿使用预先编写的现有对话框，如 PrintDialog

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T00:50:33.387

`PrintDialog`为您提供本机打印选项。如果您不想使用，`PrintDialog`那么您最终会设置所有打印选项（`PrintData`以及您在 PrintDialog 中看到的其他纸张选项..等）。

使用打印选项定义`PrintData`并创建打印机（printerdata）并开始打印作业。

# javascript - SDK2：Rally Grid 的问题

> ID：13402998
> 
> 赞同：1
> 
> 时间：2012-11-15T17:30:40.717
> 
> 标签：javascript, rally

SDK2 Rally 网格非常出色且灵活，但我遇到了一些重要问题：

1.  当出现问题时，像 LeafStoryPlanEstimateTotal 之类的已完成百分比列在出现问题时显示橙色箭头（例如并非所有故事都有计划估算），但没有弹出窗口（在 Plan -> Portfolio items 中查看它们时会出现）
2.  没有拖放排名
3.  排名字段没有连贯的显示（它显示原始实数）

这些是否在近期路线图上？有什么解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T02:34:49.260

1) PercentDone 工具提示应该可以工作。将鼠标悬停在网格中的 PercentDone 栏上时，您是否在控制台中收到任何脚本错误？

2）您应该能够在创建网格时在配置中简单地将 enableRanking 设置为 true：http: [//developer.rallydev.com/apps/2.0p5/doc/# !/api/Rally.ui.grid.Grid- cfg-enableRanking](http://developer.rallydev.com/apps/2.0p5/doc/#!/api/Rally.ui.grid.Grid-cfg-enableRanking)

（不必在网格中包含 Rank 字段来启用此功能）

3) 目前没有内置的方式来显示友好排名，就像积压页面那样。您必须为 Rank 列实现自定义渲染器：

```
columnCfgs: [
    'FormattedID',
    'Name',
    {
        text: 'Rank',
        dataIndex: 'Rank',
        renderer: function(value, metaData, record, rowIndex, colIndex, store, view) {
            //Use this info to render the friendly rank
            return rowIndex + 1;
        }
    }
] 
```

请注意，上述内容仅在网格按等级排序时才有效——它更多的是如何指定自定义渲染器的示例。

# c++ - 模板类矢量擦除不起作用

> ID：13402999
> 
> 赞同：0
> 
> 时间：2012-11-15T17:30:42.170
> 
> 标签：c++, class, templates, vector, erase

我正在开发一个项目，其中包括使用具有两种类型和向量的模板类（我可能会更改为指针，但目前不会）的手工制作的排序集。

添加和输出值工作正常，我也可以使用彼此访问键和值。

但是我在删除值时遇到了问题。这是我的代码：

```
bool Remove(Tkey key)
{
    for (int i = 0; i < size(); i++)
    {
        if (keyPtr[i] == key)
        {
            keyPtr.erase(keyPtr.begin() + (i-1));
            valuePtr.erase(valuePtr.begin() + (i-1));
            return true;
        }
    }
    return false;
} 
```

所以当我想使用它时，它看起来像这样：

```
cout << "Remove Value 6" << endl;
list.Remove(6); 
```

我对向量的期望是，当它调用时，键为 6 的数据将被删除。但是我得到这个作为我的输出：

键：0 值：0

键：1 值：3

键：2 值：6

键：3 值：9

键：4 值：12

键：5 值：15

键：6 值：18

键：7 值：21

键：8 值：24

键：9 值：27

查找值 5：15

删除值 6

键：0 值：0

键：1 值：3

键：2 值：6

键：3 值：9

键：4 值：12

键：0 值：0

键：6 值：18

键：7 值：21

键：8 值：24

键：9 值：27

所有的类代码都在头文件中，因为模板类不能在头文件和 cpp 之间拆分，而 cpp 文件中没有 main 方法。有什么我应该检查的，还是与标题中的代码有关？

编辑：这是我用来获取输出的代码。它在一个名为“main.cpp”的文件中

```
#include <iostream>
#include <vector>
#include "DictionaryList.h"

using namespace std;

void main()
{
DictionaryList<int,int> list;

for (int i = 0; i < 11; i++)
{
    list.Add(i, i*3);
}

for (int i = 0; i < 10; i++)
{
    cout << "Key    : " << list.Exists(i*3) << "    Value   : " << list.Get(i) << endl;
}

cout << "Find value 5: " << list.Get(5) << endl;

cout << "Remove Value 6" << endl;
list.Remove(6);

for (int i = 0; i < 10; i++)
{
    cout << "Key    : " << list.Exists(i*3) << "    Value   : " << list.Get(i) << endl;
}

system("pause");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T18:01:20.470

您得到观察到的输出，因为：

*   您正在删除元素 5 而不是 6。找到`i`与请求的键对应的索引后，您可以擦除 element `i-1`。`erase`将参数更改为`begin() + i`以删除预期的键/值对。

*   您的输出循环为每个可能的键打印一行，无论它是否存在，因此该行说明`Key : 0 Value : 0`了已删除元素的位置。我想`List.Exists()`查找一个值，如果找到则返回一个键，如果没有则`List.Get()`返回零，如果未找到该键则返回零。这种行为会导致错误：无法区分缺失元素和零值元素。

即使您出于某种原因不想使用标准地图容器，我也建议为您的容器提供类似的界面；除了对使用标准容器的人来说很熟悉之外，还考虑了很多使他们的接口难以被滥用的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:02:53.073

这看起来很可疑：

```
for (int i = 0; i < 10; i++)
{
    cout << "Key    : " << list.Exists(i*3) << "    Value   : " << list.Get(i) << endl;
} 
```

当您测试已删除的项目（使用键 5，值 15）时，我`list.Exists(i*3)`将返回`false`，`cout`它将`0`为您转换。同样，我敢打赌你也有一个默认的返回值`0`from `list.Get`！

我认为，至少，`list.Get()`如果要求缺少密钥，应该抛出异常。