# StackOverflow 问答 16163000-16163999

# windows-phone-7 - 在列表框内的扩展器视图中显示独立的存储文件名项目

> ID：16163004
> 
> 赞同：0
> 
> 时间：2013-04-23T07:03:54.227
> 
> 标签：windows-phone-7, isolatedstorage, expander

最初，我有一个 ListBox 与一个 List 绑定，其中包含一个 ListBoxItem，其内容将是通过调用 IsolatedStorageFile 类的 GetUserContent 属性从独立存储中填充的文件名。

现在在一个新的需求中，我想放置一个扩展器，其标题将对应于独立存储中的不同文件夹。当扩展该特定扩展器时，我将从相应文件夹（如“\data*”（数据文件夹））中的独立存储加载文件名。

因此，任何人都可以在 expanderview 控件上指导我并填充其列表框项目，并将该特定文件夹的文件名保存在独立存储中。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:28:11.507

首先 - 您描述的 UI 不是标准的 WP 行为。您需要做的是拥有一组组。

您需要绑定到 Groups 集合的外部列表框中的 ItemsSource：

```
<LitBox ItemsSource="{Binding Groups}"> 
```

接下来，`ItemTemplate`您需要在其中定义展开视图，并将 ANOTHER 列表框绑定到组的项目。类似的东西（我不确定您使用的是什么 Expander 视图，但可能是这样的）：

```
<ListBox.ItemTemplate>
  <whatever:ExpanderView>
    <ListBox ItemsSource="{Binding Items}"/>
  </whatever:ExpanderView>
</ListBox> 
```

现在，这是一个坏主意的原因是 ListBox 在相同方向的其他列表框中不能很好地发挥作用。充其量，你会得到时髦的滚动，最坏的情况是你会遇到内存问题，因为系统将无法处理虚拟化。为避免一些潜在的滚动问题，您还可以放置一个`ItemsControl`with a`StackPanel`作为面板模板。这又可能会导致内存问题，具体取决于您拥有的项目数量。

我的建议是你改变你的用户界面。这三个选项之一应该对您有好处：

1.  将行为稍微更改为长列表选择器（类似于联系人本机应用程序的行为）。这并不完全是您想要的，但更符合 Windows Phone 指南，并且可以减少您的头痛。
2.  将此作为 2 阶段操作进行。您有一个文件夹列表，当您点击其中一个时，会打开一个包含相关项目的新页面。
3.  另一个不太好但可能的解决方案是有一个 ObservableCollection<> 只包含文件夹，然后相应地添加/删除项目（确保正确格式化它们 - 你可以使用样式或模板选择器）

# c# - 一个类中的测试是否保证不会同时执行？

> ID：16163009
> 
> 赞同：3
> 
> 时间：2013-04-23T07:04:10.757
> 
> 标签：c#, .net, unit-testing, nunit, xunit

我几乎可以肯定他们是。但我需要确认这一点。

```
class Foo {
  Bar fieled;
  [Test]
  public void bar() {
    field.DoSomething();
  }

  [Test]
  public void baz() {
    field.DoSomethingElse();
  }
} 
```

理论上这两种方法都可以使用共享字段，那么我们就会有不可预测的结果。正确的？我对 NUnit 和 XUnit 框架特别感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:25:52.620

XUnit.NET 为每个测试方法创建单个测试对象实例，如此处所述[http://xunit.codeplex.com/wikipage?title=WhyDidWeBuildXunit&referringTitle=Home](http://xunit.codeplex.com/wikipage?title=WhyDidWeBuildXunit&referringTitle=Home)

因此，假设您不使用静态字段，即使同时执行测试，测试类中的共享字段也不是问题。对于其他框架我不确定。

# python - 解释python列表理解技术

> ID：16163013
> 
> 赞同：4
> 
> 时间：2013-04-23T07:04:23.493
> 
> 标签：python, list, list-comprehension

有人可以请解释一下这段代码吗？

```
>>> guest=['john','sue','chris']
>>> [(a,b,c) for a in guest for b in guest for c in guest] 
```

有了这些结果...

```
[('john', 'john', 'john'), ('john', 'john', 'sue'), ('john', 'john', 'chris'), ('john', 'sue', 'john'), ('john', 'sue',
'sue'), ('john', 'sue', 'chris'), ('john', 'chris', 'john'), ('john', 'chris', 'sue'), ('john', 'chris', 'chris'), ('sue
', 'john', 'john'), ('sue', 'john', 'sue'), ('sue', 'john', 'chris'), ('sue', 'sue', 'john'), ('sue', 'sue', 'sue'), ('s
ue', 'sue', 'chris'), ('sue', 'chris', 'john'), ('sue', 'chris', 'sue'), ('sue', 'chris', 'chris'), ('chris', 'john', 'j
ohn'), ('chris', 'john', 'sue'), ('chris', 'john', 'chris'), ('chris', 'sue', 'john'), ('chris', 'sue', 'sue'), ('chris'
, 'sue', 'chris'), ('chris', 'chris', 'john'), ('chris', 'chris', 'sue'), ('chris', 'chris', 'chris')] 
```

我知道 (a,b,c) 正在构建一个三值元组，但我不明白循环发生了什么。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T07:06:17.793

这是一个嵌套列表推导，您可以按照循环在推导中出现的顺序展开循环，以了解正在发生的事情：

```
result = []
for a in guest:
    for b in guest:
        for c in guest:
            # yield (a,b,c)
            result.append((a,b,c)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T07:10:15.743

也许如果以这种方式重写代码，您将能够理解：

```
guest=['john','sue','chris']
three_guest_list = []    

for a in guest:
    for b in guest:
        for c in guest:
            three_guest_list.append((a,b,c))

print three_guest_list 
```

列表推导只是更简洁地表达循环的一种方式。

希望这可以帮助！

# java - 死锁 - Java EE Web 应用程序中的线程阻塞

> ID：16163029
> 
> 赞同：2
> 
> 时间：2013-04-23T07:05:36.387
> 
> 标签：java, multithreading, jakarta-ee, jboss, deadlock

我有一个 Java/Java EE Web 应用程序，部署在 JBoss 6x 中。

有时应用程序会停止，并且似乎出现死锁情况，许多线程处于 BLOCKED 状态，如最后粘贴的 Thread Dump 的这段代码片段所示。

**问题**：
1\. 什么是 Transaction Reaper Worker - 它锁定了哪些资源？
2\. 这是 JTA 问题吗？是什么造成的。我该如何调查，进一步解决这个问题？
3\. 几乎有 10 个线程处于 BLOCKED 状态，具有类似的堆栈跟踪。这个问题可能是由 db 端出现问题引起的吗

非常感谢任何帮助。

```
"ajp-0.0.0.0-8809-19" - Thread t@238
java.lang.Thread.State: BLOCKED
    at com.arjuna.ats.arjuna.coordinator.BasicAction.removeChildThread(BasicAction.java:650)
    - waiting to lock <7c0d6> (a com.arjuna.ats.internal.jta.transaction.arjunacore.AtomicAction) owned by "Transaction Reaper Worker 44" t@942
    at com.arjuna.ats.internal.arjuna.thread.ThreadActionData.purgeActions(ThreadActionData.java:248
    ....
    ....
    Locked ownable synchronizers:
    - locked <ed3045> (a java.util.concurrent.locks.ReentrantLock$FairSync)

"Transaction Reaper Worker 44" - Thread t@942
   java.lang.Thread.State: WAITING
    at sun.misc.Unsafe.park(Native Method)
    - waiting to lock <ed3045> (a java.util.concurrent.locks.ReentrantLock$FairSync) owned by "ajp-0.0.0.0-8809-19" t@238
    at java.util.concurrent.locks.LockSupport.park(LockSupport.java:158)
    .....
    at com.arjuna.ats.arjuna.coordinator.BasicAction.doAbort(BasicAction.java:2902)
    at com.arjuna.ats.arjuna.coordinator.BasicAction.doAbort(BasicAction.java:2881)
    at com.arjuna.ats.arjuna.coordinator.BasicAction.Abort(BasicAction.java:1602)
    - locked <7c0d6> (a com.arjuna.ats.internal.jta.transaction.arjunacore.AtomicAction)
    at com.arjuna.ats.arjuna.coordinator.TwoPhaseCoordinator.cancel(TwoPhaseCoordinator.java:119)
    at com.arjuna.ats.arjuna.AtomicAction.cancel(AtomicAction.java:212)
    at com.arjuna.ats.arjuna.coordinator.TransactionReaper.doCancellations(TransactionReaper.java:367)
    at com.arjuna.ats.internal.arjuna.coordinator.ReaperWorkerThread.run(ReaperWorkerThread.java:79) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-16T21:53:39.510

这是典型的僵局情况。线程`ajp-0.0.0.0-8809-19`已获得对象引用的锁定，`ed3045`并正在等待获得对象引用的锁定`7c0d6`；但是 Thread`Transaction Reaper Worker 44`锁定了后者，并正在等待获取前者。两者都不会放手让对方获得他们想要的锁，所以这是一个死锁。

要回答您的问题：

1.  Transaction Reaper Worker 是一个线程，其工作大概是确保在程序员错误（例如未正确关闭事务）或未处理的网络错误的情况下未提交的事务对象不会累积
2.  这是 JBoss JTA 库中的一个错误（或者您可能使用错误，但它看起来更像是一个错误）。你应该跟进JBoss团队，最好有一些条件来重现
3.  这可能是由于未经测试的错误条件组合造成的，可能与网络层或您推测的数据库有关

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-16T22:05:09.357

这当然有可能是 JBoss Transactions 中的一个错误。值得调查这是否是您自己代码中的错误。该线程`ajp-0.0.0.0-8809-19`是 servlet 容器的工作线程之一，它执行您的代码。有问题的行为是它获得了收割者后来想要的锁：

```
Locked ownable synchronizers:
- locked <ed3045> (a java.util.concurrent.locks.ReentrantLock$FairSync) 
```

您能确定堆栈中锁定该对象的点吗？你最接近的代码是什么，它在做什么？

# git - 从上游获取提交到分叉的正确方法

> ID：16163030
> 
> 赞同：0
> 
> 时间：2013-04-23T07:05:38.123
> 
> 标签：git, github

假设我有一个回购名称`core`。`core`是上游存储库。然后我有`fork`，这是`core`永远不会被推送到的 + 提交`core`。保持`fork`最新提交的正确方法是什么`core`？

现在，从`fork`，我只是这样做`git pull core master`。这行得通，但是发生的是它包括以前的提交，所以当我查看我的 github 日志时，我看到很多提交的重复。

这是正确的方法吗？有没有更好的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:34:18.420

> 它包括以前的提交，所以当我查看我的 github 日志时，我看到很多提交的重复。

这不应该发生。如果你想维护你的分叉，你可以使用

```
git pull core master 
```

或者您可以 [重新调整更改](http://gitready.com/advanced/2009/02/11/pull-with-rebase.html)

```
git pull --rebase core master 
```

或者您可以维护一个 [主题分支](https://github.com/dchelimsky/rspec/wiki/Topic-Branches)。

# python - 在python中读取和解析文件内容

> ID：16163031
> 
> 赞同：0
> 
> 时间：2013-04-23T07:05:45.937
> 
> 标签：python, python-2.7, isinstance

我有一个文件，其中包含以下格式的条目：

```
FID=COST|Tolerance=1

FID=(BUY,SELL)|Tolerance=0

FID=[(X,Y),(A,B)]|Tolerance=0 
```

`FID`在读取文件时找出是字符串、元组还是列表的最佳方法是什么？

读取后立即对 FID 的值进行正常`isinstance`测试是行不通的。感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T09:08:47.573

设置 A,B,X,Y 然后使用 eval

```
try:
   FID=eval("[(X,Y),(A,B)]")
 except SyntaxError:
   print "unknown variable or syntax error"
 if (isinstance(FID, tuple)):
   print "It's a tuple!!" 
```

同一种方法可以用于其他类型

# javascript - 需要一个用于列分组的组件 - Outsystems

> ID：16163032
> 
> 赞同：0
> 
> 时间：2013-04-23T07:05:46.607
> 
> 标签：javascript, jquery, outsystems

我需要按几列分组，那么有什么组件可以实现这一点吗？

![在此处输入图像描述](https://i.stack.imgur.com/LAebd.png)

我需要的是第 2 列具有可以动态添加/删除的值。那么，是否有任何组件可以解决在第 2 列下动态添加/删除行和列的问题。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:43:48.063

您可以使用您有兴趣从数据库中获取的字段创建一个*结构*，并创建一个具有该结构作为输出的*高级查询。*

在*Advanced Query*的 SQL 中，您可以像使用 SQL 一样指定*group by子句。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T15:01:20.390

您可以使用 javascript 或 jQuery 来动态操作您的表格。网上有很多例子，比如[http://www.amitpatil.me/table-manipulation-with-jquery/](http://www.amitpatil.me/table-manipulation-with-jquery/)。

如果需要，您可以从 HTTPRequestHandler eSpace 调用一个操作 RunJavaScript，这将允许您在 ajax 调用中运行 javascript。

# jquery - 一页网站的Jquery

> ID：16163034
> 
> 赞同：4
> 
> 时间：2013-04-23T07:05:58.217
> 
> 标签：jquery

[我在我的网站http://www.hettzdesigns.com](http://www.hettzdesigns.com)中使用以下 jquery 代码作为我的一页作品 集

但是当页面加载时，它直接转到网站的联系部分而不是索引部分。

谁能告诉它哪里出错了。

```
$(document).ready(function(){

    $('nav ul li a').click(function(){
        var el = $(this).attr('href');
        var elWrapped = $(el);
        scrollToDiv(elWrapped,140);
        return false;
    });

    function scrollToDiv(element,navheight){
        var offset = element.offset();
        var offsetTop = offset.top;
        var totalScroll = offsetTop-navheight;
        $('body,html').animate({
            scrollTop: totalScroll
        }, 650);
    }
}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T07:12:00.750

这是因为您提供`autofocus`给表单字段，这使您的字段在页面加载时自动获得焦点。

# ios6 - 如何在加载 admob 视图后添加 ccMenu

> ID：16163036
> 
> 赞同：0
> 
> 时间：2013-04-23T07:06:07.520
> 
> 标签：ios6, cocos2d-iphone, admob

我在这个游戏中使用 cocos2d-iphone。在一个图层中，我将 admob 添加为弹出广告。我想将 ccMenu 与 admob 视图一起添加，以便在单击 ccmenuItem 后可以删除 admob 视图。但是我怎么知道什么时候加载了 admob 视图呢？

我尝试了以下方法，但无法同时加载菜单项和 admob 视图：

```
UIViewController *controller=[CCDirector sharedDirector];
CGSize size=[[CCDirector sharedDirector]winSize];
controller.view.frame=CGRectMake(0, 0, size.width, size.height);
_bannerViewTable=[[GADBannerView alloc] initWithFrame:CGRectMake(50, 50, GAD_SIZE_300x250.width, GAD_SIZE_300x250.height)];

_bannerViewTable.adUnitID=@"xxxxxxxxxx";
[_bannerViewTable setRootViewController:controller];
[_bannerViewTable loadRequest:[GADRequest request]];

if (_bannerViewTable!=nil) {
    CCLOG(@" _bannerViewTable!=nil");
    CCCallFunc *loadView=[CCCallFunc actionWithTarget:self selector:@selector(loadAdTable)];
    CCCallFunc *addRemove=[CCCallFunc actionWithTarget:self selector:@selector(addMenuToLayer)];
    CCSequence *seq=[CCSequence actionOne:loadView two:addRemove];
    [self runAction:seq];
}else{
    CCLOG(@" _bannerViewTable=nil");
}

-(void)loadAdTable
{
  UIViewController *controller=[CCDirector sharedDirector];
  [controller.view addSubview:_bannerViewTable];
 }

-(void)addMenuToLayer
{
  CCSprite *removeBtn=[CCSprite spriteWithSpriteFrameName:@"minus1.png"];
  CCMenuItemSprite *removeImg=[CCMenuItemSprite itemWithNormalSprite:removeBtn  selectedSprite:nil target:self selector:@selector(removeAdTable)];
  removeImg.position=ccp(343, 282);
  menu=[CCMenu menuWithItems:removeImg, nil];
  menu.anchorPoint=CGPointZero;
  menu.position=CGPointZero;
  [self addChild:menu z:1];
} 
```

如何在加载 admob 视图的同时添加删除 ccMenuItem？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:29:03.507

您可能应该实施[GADBannerViewDelegate](https://developers.google.com/mobile-ads-sdk/docs/admob/intermediate)，因为它会报告何时收到广告以及何时显示广告。

如果你在你的类中实现它，你可以触发删除 ccMenuItem。

# c++ - c ++使用ncurses库重复函数名

> ID：16163042
> 
> 赞同：0
> 
> 时间：2013-04-23T07:06:44.090
> 
> 标签：c++, namespaces, ncurses

我正在使用 ncurses 库实现俄罗斯方块游戏。我试图实现密钥处理程序类，它具有名为 timeout 和 getch 的成员函数。

key_handler.h

```
#ifndef KEY_HANDLER_H_
#define KEY_HANDLER_H_

#include "tetris.h"
#include <ncurses.h>

namespace tetris {
  class KeyHandler {
    public:
      KeyHandler();
      ~KeyHandler();
      void timeout(int timeout_ms);
      int getch();
    private:
      WINDOW *window_;
      int timeout_ms_;
  };
}
#endif 
```

key_handler.cpp

```
#include "key_handler.h"

using tetris::KeyHandler;

KeyHandler::KeyHandler() {
  window_ = newwin(0, 0, 0, 0);
  timeout_ms_ = 1000; // ms
  curs_set(0);
  cbreak();
  noecho();
  keypad(window_, TRUE);
}

KeyHandler::~KeyHandler() {
  delwin(window_);
}

void KeyHandler::timeout(int timeout_ms) {
  timeout_ms_ = timeout_ms;
}

int KeyHandler::getch() {
  wtimeout(window_, timeout_ms_);
  int ch = wgetch(window_);
  return ch;
} 
```

当我使用 g++ 进行编译时，它说：

```
$ g++ -c key_handler.cpp
In file included from key_handler.cpp:1:
key_handler.h:12: error: ‘stdscr’ is not a type
key_handler.h:13: error: ‘stdscr’ is not a type
key_handler.cpp:19: error: variable or field ‘wtimeout’ declared void
key_handler.cpp:19: error: expected primary-expression before ‘int’
key_handler.cpp:23: error: ‘int tetris::KeyHandler::wgetch’ is not a static member of ‘class tetris::KeyHandler’
key_handler.cpp:23: error: invalid conversion from ‘WINDOW*’ to ‘int’
key_handler.cpp:23: error: expected ‘,’ or ‘;’ before ‘{’ token
$ 
```

实际上 ncurses 库中有 timeout 和 getch 。但我认为它们在不同的命名空间中就可以了。当我使用 timeoutff 和 getchff 等其他名称时，g++ 编译成功。我认为编译失败是因为函数名重复。我不想更改我的函数名称。我应该怎么办？为什么会这样？我不明白。这是否与 ncurses 库有关，或者即使在使用 STL 时也是 C++ 的一般问题？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T07:17:06.410

timeout 和 getch 在 ncurses.h 中被定义为宏

```
#define timeout(delay)          wtimeout(stdscr,delay)
#define getch()                 wgetch(stdscr) 
```

因此，在进行实际的 c++ 编译之前，预处理器会替换您的函数。

# membase - 如何清除 membase 数据库中的所有数据

> ID：16163044
> 
> 赞同：1
> 
> 时间：2013-04-23T07:06:54.337
> 
> 标签：membase

我一直在查看在线文档，但似乎找不到任何 CLI 命令来从 membase 中删除所有数据。我正在运行一些性能调整，每次都需要清理数据库。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T06:47:27.547

我使用以下命令从数据库中清除所有内容

回声'flush_all' | netcat 本地主机 11211

# ios - 将工具栏添加到包含视图控制器中的父视图控制器

> ID：16163047
> 
> 赞同：1
> 
> 时间：2013-04-23T07:07:02.283
> 
> 标签：ios, objective-c, uitoolbar

我有两个 UIViewControllers 作为子视图控制器添加到容器视图控制器中。现在我想将 UIToolbar 添加到容器视图控制器中。任何人都可以建议我如何添加 UIToolbar。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:34:54.497

使用 Interface Builder 非常简单。并以编程方式进行：

```
UIToolbar *toolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, 44)];
[self.view addSubview:toolbar]; // Add it to your parent view controller.
[toolbar release]; 
```

# windows-8 - ANTLR3 C# 库作为可移植的 .NET 库

> ID：16163056
> 
> 赞同：0
> 
> 时间：2013-04-23T07:07:31.010
> 
> 标签：windows-8, antlr

我正在尝试为使用 ANTLR3 的 Win 8 编写应用程序。它们是在 Win 8（便携式 .NET 库）上运行的 ANTLR .NET 运行时版本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:07:37.483

没有。但是，ANTLR 4 的 C# 目标的可移植版本已接近完成。

您可以在此处在项目的问题跟踪器上请求 ANTLR 3 的功能：
[https ://github.com/antlr/antlrcs/issues](https://github.com/antlr/antlrcs/issues)

# variables - jinja2 gloable set 不起作用

> ID：16163057
> 
> 赞同：0
> 
> 时间：2013-04-23T07:07:32.530
> 
> 标签：variables, set, global, jinja2

我正在写一个模板`jinja`。在 html 文件中，我写道：

```
{% set tmpx, tmpy = 0 %}

{% for greeting in greetings %}
    {% if greeting.author %}

        {% tmpx = greeting.data_x %}
        {% tmpy = greeting.data_y %}

    {% endif %}
{% endfor %} 
```

结果是程序找不到`tmpx`，`tmpy`。对如何使用全局集感到困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T11:51:45.750

我认为您正在尝试对 jinja 做太多事情。您无法访问在 if 或 for 块等任何块中设置的变量的值。您应该将所有逻辑移至控制器。只需在此处访问值 :)

# mysql - mysql数据库导入如何取单行数据并转换为多行

> ID：16163060
> 
> 赞同：0
> 
> 时间：2013-04-23T07:07:43.023
> 
> 标签：mysql, import, spreadsheet

我已经搜索了很多答案，但决定向 Stackoverflow 的大人物提问。

如何获取单行数据、10 列并使其如下所示：

```
0000-00-00 00:00:00 0000-00-00 00:00:00 1   3343    1   en-GB   1           15 South Peak LP    1   0       
0000-00-00 00:00:00 0000-00-00 00:00:00 35  3343    1   en-GB   1           853 Del Valle Dr    1   0       
0000-00-00 00:00:00 0000-00-00 00:00:00 3   3343    1   en-GB   1           Fallbrook   1   0       
0000-00-00 00:00:00 0000-00-00 00:00:00 39  3343    1   en-GB   1           CA  1   0       
0000-00-00 00:00:00 0000-00-00 00:00:00 2   3343    1   en-GB   1           92028   1   0       
0000-00-00 00:00:00 0000-00-00 00:00:00 48  3343    1   en-GB   1           San Diego   1   0       
0000-00-00 00:00:00 0000-00-00 00:00:00 5   3343    1   en-GB   1           7607231133  1   0 
```

现在是 1 行数据的 7 行。第三列代表数据的字段项目编号。第四列是特定条目的 ID 号。

原始数据行如下所示：

```
3343    1   68  15 South Peak LP    853 Del Valle Dr    Fallbrook   CA  92028   San Diego   7607231133 
```

取行并执行“转置”不会执行上述操作。它只是将数据旋转 90 度。我需要获取数据并创建 7 行，每行都有单独的数据。

如果我能找到一个公式将“原始”行列 D、E、F、G、H、I、J 中的数据放入各自的行中，那么我可以使用其他简单的公式移动剩余的数据。

为了使这更复杂，我正在使用的文件是 550,000 行。这意味着将单行变为 7 行将使文件接近 400 万行……显然我必须减小文件大小。

有人知道 OpenOffice Calc 中的公式来生成上述内容吗？或者...是否有人知道使用 OSD 550,000 行文件将数据行导入 MySQL 数据库的方法，该文件被安排为 7 行示例的表？

我可以将 OSD 导入其他表。但是这张桌子让我很困惑。必须有一种方法可以将单行数据放入数据库表中。

这是数据库中表的示例：

```
(`publishUp`, `publishDown`, `fid`, `sid`, `section`, `lang`, `enabled`, `params`, `options`, `baseData`, `approved`, `confirmed`, `createdTime`, `createdBy`, `createdIP`, `updatedTime`, `updatedBy`, `updatedIP`, `copy`, `editLimit`) VALUES
('0000-00-00 00:00:00', '0000-00-00 00:00:00', 35, 2348, 1, 'en-GB', 1, '', '', '133 4Th St', 1, 0, '2013-02-23 02:22:00', 854, '76.28.168.75', '2013-02-23 02:51:45', 854, '76.28.168.75', 0, 1),
('0000-00-00 00:00:00', '0000-00-00 00:00:00', 3, 2348, 1, 'en-GB', 1, '', '', 'Gonzales', 1, 0, '2013-02-23 02:22:00', 854, '76.28.168.75', '2013-02-23 02:51:45', 854, '76.28.168.75', 0, 1),
('0000-00-00 00:00:00', '0000-00-00 00:00:00', 39, 2348, 1, 'en-GB', 1, '', '', '', 1, 0, '2013-02-23 02:22:00', 854, '76.28.168.75', '2013-02-23 02:51:45', 854, '76.28.168.75', 0, 1),
('0000-00-00 00:00:00', '0000-00-00 00:00:00', 2, 2348, 1, 'en-GB', 1, '', '', '93926', 1, 0, '2013-02-23 02:22:00', 854, '76.28.168.75', '2013-02-23 02:51:45', 854, '76.28.168.75', 0, 1),
('0000-00-00 00:00:00', '0000-00-00 00:00:00', 5, 2348, 1, 'en-GB', 1, '', '', '877-616 6144', 1, 0, '2013-02-23 02:22:00', 854, '76.28.168.75', '2013-02-23 02:51:45', 854, '76.28.168.75', 0, 1), 
```

我希望这一切都有意义，并且有人可以真正解决这个问题。谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:34:47.293

为了管理所有 Extract Transform Load 过程，我发现了有用的 Pentaho 数据集成应用程序工具。它基于Java和开源。您可以简单地创建转换，选择文件或数据库输入，然后对拆分字段使用转换步骤，然后使用数据库输出到您的 MySQL 数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T09:22:30.830

要使用 SQL 扁平化这种结构，您可以轻松地执行类似的操作

```
select field1.sid, field1.enabled, field1.baseData, field35.baseData /* other fields...*/    

from
  (select sid, section, lang, enabled, params, options, baseData, approved, confirmed, createdTime, createdBy, createdIP, updatedTime, updatedBy, updatedIP, copy, editLimit from thetable where fid=1) field1

inner join  (select sid, section, lang, enabled, params, options, baseData, approved, confirmed, createdTime, createdBy, createdIP, updatedTime, updatedBy, updatedIP, copy, editLimit from thetable where fid=35) field35 on field35.sid = field1.sid

inner join  (select sid, section, lang, enabled, params, options, baseData, approved, confirmed, createdTime, createdBy, createdIP, updatedTime, updatedBy, updatedIP, copy, editLimit from thetable where fid=3) field3 on field3.sid = field1.sid

-- and so on for each field 
```

1）字段 fid=1 必须始终存在 2）您需要在编写查询之前知道字段 id，看起来就像您所做的那样 3）如果没有其他字段，您可以外连接后续字段以返回“父”行记录存在

这些帮助有用？

# sql - Oracle SQL 查询在 JdbcTemplate 和 SimpleJdbcTemplate 中花费的时间太长

> ID：16163061
> 
> 赞同：1
> 
> 时间：2013-04-23T07:07:45.700
> 
> 标签：sql, oracle, spring, jdbc, jdbctemplate

在我们的应用程序中可用的使用 SimpleJdbcTemplate 的 oracle SQL 查询永远不会（几乎）出现。查询很长，连接了近 15 个表，选择了大约 100 个字段等等。

查询将近 8500 个字符，使用 MapSqlParameterSource 实例添加了 6 个绑定变量）。我已经在 Row Mapper 方法调用中放置了足够多的日志消息，尽管这些消息从未被打印出来。

用实际值替换绑定变量后的相同 SQL 查询在 SQL*Plus 和 SQL Developer 中会在 5-7 秒内产生结果。结果只有 15 条记录，因为我使用该逻辑在 SQL 查询本身中实现分页支持。

我尝试了 JDBCTemplate 和 SimpleJdbcTemplate。任何想法可能出了什么问题？

**更新 ：：**

我能够缩小问题的范围。我的查询包含一个同义词，因为 LEFT OUTER JOIN（它引用了不同的模式表）正在减慢整个查询的速度。当我将此连接与绑定变量一起使用时，就会发生这种情况。当我在 SQL Developer 和 SQL*Plus 中硬编码绑定变量的值时，查询运行良好。但是当我使用绑定变量时，同样的事情（挂起情况）也发生在这些工具中。

目前我指的是以下链接来纠正我的 dblink/同义词使用， [Getting a ResultSet/RefCursor over a database link](https://stackoverflow.com/questions/2549417/getting-a-resultset-refcursor-over-a-database-link)

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:59:17.123

如果您在两种不同的连接方法之间有不同的性能，请确保它们不会改变会话优化器设置。

也许您的 jdbc 代码以某种方式指定了 optmizer 模式，因此当您通过 sqlplus 连接时形式不同。

```
alter session set OPTIMIZER_MODE = RULE;
alter session set OPTIMIZER_MODE = choose; 
```

我在我们的环境中也遇到了这样的问题，所以我确保所有连接都使用相同的优化设置。

# c++ - FILE 什么时候刷新？

> ID：16163066
> 
> 赞同：11
> 
> 时间：2013-04-23T07:08:06.383
> 
> 标签：c++, c, windows, libc, fflush

我在 Windows 下有一个很好的旧 C FILE 文件描述符，输出流使用它来写入数据。我的问题很简单，但我找不到答案：

**假设我不调用 fflush，内容何时刷新到光盘？**

流不断接收数据，并且似乎经常刷新内容，但是刷新它的规则是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-23T07:14:56.873

如果库实现可以确定输出流不引用交互式设备（并且*仅*在那时），则流将被完全缓冲，即当缓冲区（默认`BUFSIZ`大小）已满时将被刷新。

`'\n'`如果没有完全缓冲，流可以是行缓冲的，即在写入时（或缓冲区已满，如果您的行*真的很*长）或无缓冲时，它将被刷新。

（ISO/IEC 9899:1999，第 7.19.5.3 章“`fopen()`功能”，第 7 段。手头没有更新版本的标准，但 AFAIK 这并没有改变。）

构成“交互式设备”的内容是实现定义的。（第 5.1.2.3 章“程序执行”，第 6 段。）

一般的想法是文件输出应该是完全缓冲的，而终端输出应该是行缓冲的（或无缓冲的，正如 Jesse Good 正确指出的那样）。

缓冲策略和缓冲区大小都可以通过`setvbuf()`. 请注意，任何此类更改都必须在您开始访问流*之前*发生，一旦您考虑一下，这一点就很明显了。

# google-sheets - 在 Google 电子表格列中自动拖动公式

> ID：16163069
> 
> 赞同：2
> 
> 时间：2013-04-23T07:08:19.493
> 
> 标签：google-sheets, drag, google-fusion-tables, auto-update, autofill

我有一个 Google 电子表格，使用此[github 链接](https://github.com/jomcgrath2/Fusion-to-Spreadsheet)中给出的脚本从融合表中添加数据。我在电子表格的右端添加了两列，其中一列使用公式填充

```
 =COUNTIF(A$2:A$24,A2) 
```

和其他列由另一个公式。目前，每次使用新行更新电子表格时，我都会手动拖动公式列来更新其中的数据。是否可以使用脚本动态更新公式列？即，当行添加公式列也动态更新。

**编辑：**

```
// evaluate project type and set identifier
function addCountIfFormulaToCell(){

    // add the id of your spreadsheet here
    var sss = SpreadsheetApp.openById('0AozvCNI02VmpdG5tb0pkUGdDR3djMm5NV0pYeThFbGc');

    // add the name of the sheet here
    var ss = sss.getSheetByName('Sheet1');

    // column you want to evaluate for the formula
    var columnToEvaluateAgainst = "A";

    // column you want to add the formula to
    var columnToAddFormulaTo = "H";

    // identifies the last row
    var lastRow = ss.getLastRow();

    // is the cell to evaluate in the last row
    var evaluateThisCell = columnToEvaluateAgainst + lastRow;

    // is the cell that gets the forumla in the last row
    var addFormulaToThisCell = columnToAddFormulaTo + lastRow;

    // this is my formula
    var projectFormula = "COUNTIF(A$2:$A,A2)";

    // grabs the cell that gets the forumla in the last row
    var ssCellToGetFormula = ss.getRange(addFormulaToThisCell);

    // sets the formula to the cell in the last row
    ssCellToGetFormula.setFormula(projectFormula);

}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T16:30:14.370

Pradeep…您可以使用一个[应用程序脚本](https://developers.google.com/apps-script/)，该脚本在将新行添加到电子表格时[触发运行。](https://developers.google.com/apps-script/understanding_triggers)

下面的脚本是从我用来将 IF 公式插入到最后一行的单元格中的脚本修改的，该单元格计算另一列中的值。

迅速地：

*   添加电子表格的 ID。
*   添加工作表的名称。
*   我为要评估的列和要添加公式的列创建了一个变量。你可能需要也可能不需要这个。
*   使用[.getLastRow()](https://developers.google.com/apps-script/reference/spreadsheet/range?hl=en#getLastRow%28%29)获取电子表格的最后一行。
*   创建一个范围，它将精确定位我要评估的单元格以及我将添加公式的单元格
*   为公式创建一个变量。
*   获取我将添加公式的单元格。
*   使用[.setFormula](https://developers.google.com/apps-script/reference/spreadsheet/range?hl=en#setFormula%28String%29)将公式添加到该单元格。

这可能更有效，您可能无法直接使用它，但它会让您了解一些可用的机制。

克里斯·K。

```
 // evaluate project type and set identifier
    function addCountIfFormulaToCell(){

        // add the id of your spreadsheet here
        var sss = SpreadsheetApp.openById('0ApI9xmBd0k....');

        // add the name of the sheet here
        var ss = sss.getSheetByName('Sheet1');

        // column you want to evaluate for the formula
        var columnToEvaluateAgainst = "B";

        // column you want to add the formula to
        var columnToAddFormulaTo = "C";

        // identifies the last row
        var lastRow = ss.getLastRow();

        // is the cell to evaluate in the last row
        var evaluateThisCell = columnToEvaluateAgainst + lastRow;

        // is the cell that gets the forumla in the last row
        var addFormulaToThisCell = columnToAddFormulaTo + lastRow;

        // this is my formula
        var projectFormula = "THIS IS MY FORMULA";

        // grabs the cell that gets the forumla in the last row
        var ssCellToGetFormula = ss.getRange(addFormulaToThisCell);

        // sets the formula to the cell in the last row
        ssCellToGetFormula.setFormula(projectFormula);

    }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T21:34:54.310

另一种选择是使用将自动填充列的单个数组公式：

`=ArrayFormula(IF(LEN(A2:A);COUNTIF(A2:A;A2:A);IFERROR(1/0)))`

# python - 在子进程中调用包装脚本

> ID：16163070
> 
> 赞同：2
> 
> 时间：2013-04-23T07:08:22.107
> 
> 标签：python, linux, shell, python-2.7, subprocess

我有一个`wrapperexec`, 应该调用`exec`和一些参数。

```
subprocess.check_call( ["wrapperexec", "exec", "arg1"], shell=True, cwd="/dirA" ) 
```

当我调用上面的脚本时，它不会将任何参数传递给`wrapperexec`. 但是当我改为：

```
subprocess.check_call( ["wrapperexec", "exec", "arg1"], shell=False, cwd="/dirA" ) 
```

它确实按预期传递了参数。有人可以向我解释一下，为什么前者不起作用？

编辑：

抱歉，我在创建此问题时完全走错了轨道。现在更新到真正的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:22:22.653

环境`path`是一个复杂的概念，有`path`万物共享的“基础”，但您也可以`path`在特定的过程中临时修改或附加。这意味着如果您修改`path`脚本中的 ，然后调用 a `subprocess`，则`subprocess`将`path`与父脚本不同。

除非您执行以下操作：

```
subprocess.check_call(["nonsystemexec"], shell=True, cwd="/dirA", env=os.environ) 
```

在这里，您要告诉`subprocess`使用您当前的环境，其中将包括您当前的`path`.

* * *

注意：如果您想`subprocess`使用修改后的环境，但不是您拥有的环境。你可以这样做：

```
env = os.environ.copy()
env['PATH'] += ';/dirB'
subprocess.check_call(["nonsystemexec"], shell=True, cwd="/dirA", env=env) 
```

# oracle - 通过脚本将用户添加到 Oracle Business Intelligence 中的角色

> ID：16163071
> 
> 赞同：1
> 
> 时间：2013-04-23T07:08:25.900
> 
> 标签：oracle, weblogic-10.x, obiee

在 Oracle 商业智能 (OBIEE) 中，我们可以通过登录 em 将用户添加到特定角色，并将用户添加到安全性中的特定角色。

例如：在 [http://slc03lmn.us.oracle.com:7001/em](http://slc03lmn.us.oracle.com:7001/em)

在 WebLogicDomain -> bifoundation_domain ->Security ->Application Roles 中搜索 OBI 角色并将用户添加到角色中。

我们手动执行此操作。

我想从 python 脚本自动化这个。探索了 Weblogic 脚本，但找不到解决方案。任何输入都会有所帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T04:45:55.093

您可以使用如下所示的[grantAppRole 命令尝试使用](http://docs.oracle.com/cd/E23943_01/web.1111/e13813/custom_infra_security.htm#WLSTC1394)[WLST 脚本](http://docs.oracle.com/cd/E15051_01/wls/docs103/config_scripting/using_WLST.html)：

```
connect(“weblogic”,”welcome1″,”localhost:7001″)
grantAppRole(“obi”,”ReportWLSTRole”,”oracle.security.jps.service.policystore.ApplicationRole”,”BIAuthor”)
grantAppRole(“obi”,”ReportWLSTRole”,”weblogic.security.principal.WLSUserImpl”,”weblogic”)
grantAppRole(“obi”,”ReportWLSTRole”,”weblogic.security.principal.WLSGroupImpl”,”BIAdministrators”) 
```

此示例显示如何将组、用户和角色分配给“ReportWLSTRole”。（示例取自[RittmanMead 博客](http://www.rittmanmead.com/2011/04/oracle-bi-ee-11g-migrating-security-policy-store-part-2/)）

它必须是python脚本吗？您可以使用 RPD 上的 init 块自动执行此操作：

创建一个包含用户和应用程序角色之间映射的表，然后为 RPD 中的 ROLES 变量创建一个按行初始化块，例如：

```
select 'ROLES', p.rolename from p roles_table  where p.user=':USER' 
```

# python-3.x - x的左侧三角形

> ID：16163074
> 
> 赞同：-4
> 
> 时间：2013-04-23T07:08:38.393
> 
> 标签：python-3.x

我的问题几乎与[如何在 python 中制作 x 的三角形？](https://stackoverflow.com/questions/13908618/how-to-make-a-triangle-of-xs-in-python)但我想知道如何使它成为左手边三角形？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:13:06.270

哈哈！这个怎么样（Py3）：

```
for i in range(1, 6):
  print('x'*i) 
```

# sharepoint - SharePoint：使用 JSLink 自定义呈现列表。抛出“未定义”

> ID：16163077
> 
> 赞同：1
> 
> 时间：2013-04-23T07:08:48.147
> 
> 标签：sharepoint, undefined

我有一个问题，对我来说，除了标题之外，我的所有字段的输出都会抛出“未定义”。

这是我的代码：

```
(function () {

    if (typeof SPClientTemplates === 'undefined')
    return;

 var overrideContext = {};

 //overrideContext.BaseViewID = 1;

 //overrideContext.ListTemplateType = 101;

 overrideContext.Templates = {};

 overrideContext.Templates.Header = "My Custom Rendering News View";

 overrideContext.Templates.Item = customItem;

 SPClientTemplates.TemplateManager.RegisterTemplateOverrides(overrideContext);

 })();

function customItem(ctx) {

 var htmlTest = "Test: " + ctx.CurrentItem.Title + " " + ctx.CurrentItem.Byline + " " +       ctx.CurrentItem.Modified + " " + ctx.CurrentItem.RollupImage;

 return htmlTest;

} 
```

输出是：“测试：新闻存档未定义未定义未定义”

各位知道是什么问题吗？我知道视图中存在 Title、Byline、Modified 和 RollupImage 字段。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T09:21:50.723

这些字段在 SharePoint 中不称为 Byline 和 RollupImage。

它们被称为：ArticleByLine 和 PublishingRollupImage。

此外，实际字段（署名和汇总图像）需要包含在视图中。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-02-24T20:36:44.733

尝试替换此代码

```
overrideContext.Templates.Item = customItem; 
```

有了这个

```
overrideContext.Templates["Item"] = customItem; 
```

# php - 考虑使用“exec”php命令的安全问题

> ID：16163079
> 
> 赞同：0
> 
> 时间：2013-04-23T07:08:57.633
> 
> 标签：php, exec

我正在使用`exec`php 命令在我的 Web 服务器中启动一个 jar 文件。我必须采取任何预防措施来防止任何安全问题吗？我的意思是，使用该命令会很危险`exec`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:21:02.250

这取决于您如何为函数提供参数。如果您使用文字，则代码仅容易受到开发人员级别错误和不良做法的影响。但是，如果您要传递一个变量，这一切都取决于参数的来源。我建议在这种情况下始终采用非常安全的方法，在调用 exec 函数之前利用所有可用的验证工具。从我的头顶：

*   通过使用运行 PHP 进程的系统用户（通常是具有相当广泛访问权限的 Web 服务器用户）来检查用户在底层操作系统上的权限是否未被利用，
*   可能，暂时监禁用于 exec 命令的环境，以仅向用户提供所需的文件和可执行文件，
*   即使此时您知道传递的参数的值不是由用户或第三方提供，而是来自代码的其他部分，也要练习安全编程；尽管情况可能并非如此，但将来系统的其他部分可能会发生变化，从而允许将 shell 脚本注入底层操作系统。

# iphone - 获取 -[__NSArrayI addObjectsFromArray:]: unrecognized selector sent to instance 0xa0c5f70 error

> ID：16163081
> 
> 赞同：2
> 
> 时间：2013-04-23T07:09:00.330
> 
> 标签：iphone, ios, nsmutablearray

我在数组中添加对象时出错 -[__NSArrayI addObjectsFromArray:]: unrecognized selector sent to instance 0xa0c5f70

```
id max;
   NSMutableArray * MovePointsArray=[[NSMutableArray alloc]init];
    max=[pointsArray objectAtIndex:0];
    for(int i=0;i<[pointsArray count];i++){

        if ([pointsArray objectAtIndex:i] > max) {
            max=[pointsArray objectAtIndex:i];
            [MovePointsArray addObject:max];
        }

    }

   NSMutableArray * pointArray =[NSArray arrayWithObjects: [pointsArray objectAtIndex:0],[pointsArray lastObject], nil];
    [pointArray addObjectsFromArray:MovePointsArray]; 
```

没有得到我做错了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T10:32:43.063

在最后一行

```
NSMutableArray * pointArray =[NSArray arrayWithObjects: [pointsArray objectAtIndex:0],[pointsArray lastObject], nil]; 
```

替换`NSArray`为`NSMutableArray`

谢谢，

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T07:13:06.023

**正确的代码**

```
NSMutableArray * pointArray =[[NSMutableArray alloc] initWithObjects: [pointsArray objectAtIndex:0],[pointsArray lastObject], nil];
[pointArray addObjectsFromArray:MovePointsArray]; 
```

`pointArray`您正在使用进行初始化`NSArray`，并且`NSArray`下一行中没有该方法，`addObjectsFromArray`这是一种`NSMutableArray`方法..

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T07:14:27.310

你可以在这里找到你的错误：

```
NSMutableArray * pointArray =[NSArray arrayWithObjects: [pointsArray objectAtIndex:0],[pointsArray lastObject], nil]; 
```

替换`NSArray`为`NSMutableArray`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T07:12:55.390

在最后一行中，pointArray 实际上是一个 NSArray 对象，而不是 NSMutableArray。

```
NSMutableArray * pointArray =[NSArray arrayWithObjects: [pointsArray objectAtIndex:0],[pointsArray lastObject], nil];
[pointArray addObjectsFromArray:MovePointsArray]; 
```

最后添加 mutableCopy 或类似的东西。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-23T07:13:28.693

```
NSMutableArray * pointArray =[NSArray arrayWithObjects: [pointsArray objectAtIndex:0],[pointsArray lastObject], nil]; 
```

改成

```
NSMutableArray * pointArray =[NSMutableArray arrayWithObjects:@[pointsArray[0],[pointsArray lastObject]]; 
```

# java - 如何为 GroovyScriptEngine 提供 Groovy 脚本文件路径？

> ID：16163082
> 
> 赞同：-2
> 
> 时间：2013-04-23T07:09:01.263
> 
> 标签：java, groovy

我想从项目资源文件夹中加载 Groovy 脚本文件。我正在使用这段代码

```
 GroovyScriptEngine gse = new GroovyScriptEngine("/src/main/resources");
     Binding binding = new Binding();
     gse.run("UserSelectedComponents.groovy", binding); 
```

但是这段代码不能正常工作，它的文件不存在。我在路径中做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:19:49.847

我猜你的路径是错误的。您正在使用绝对路径 /src/main/resources，它将从文件系统的根目录开始。这可能不是你想要的。

因此，要么使用正确的绝对路径，要么使用相对路径，这意味着删除第一个斜杠。所以它应该看起来像

```
 GroovyScriptEngine gse = new GroovyScriptEngine("src/main/resources");
 Binding binding = new Binding();
 gse.run("UserSelectedComponents.groovy", binding); 
```

或者

```
 GroovyScriptEngine gse = new GroovyScriptEngine("/user/home/subodh/project/groovy/src/main/resources");
 Binding binding = new Binding();
 gse.run("UserSelectedComponents.groovy", binding); 
```

# java - 读取文本文件以选择脚本和进程

> ID：16163083
> 
> 赞同：1
> 
> 时间：2013-04-23T07:09:16.497
> 
> 标签：java

我面临着如何处理这个问题的问题，我只需要一些建议，比如使用什么方法来做，或者其他。

我的问题是这样的：下面是我的问题的流程：我可能需要读取文本文件，文本文件里面会包含任务，比如任务1、2、4、7。根据所有这些任务编号，我需要获取放置在另一个文件夹中的正确脚本，然后开始该过程。

它会被一个一个地处理，直到文本文件中的所有任务都被处理完。

我只需要一些关于在阅读文本文件后如何运行脚本的建议，脚本实际上需要手动复制到控制台中，我需要使其更加自动化，这就是重点。

对我有什么建议吗？或者有什么想法？感谢您的回答。

![在此处输入图像描述](https://i.stack.imgur.com/lkLaP.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T07:17:01.260

我假设您一次只能处理一个文件。

如果需要重复做，可以做一个计时器。

在类中打开文本文件。在另一个类中有一个线程池执行器来执行任务（如果任务必须按顺序完成，那么不要使用线程池，而是在方法调用中执行）一个好的设计是将其作为主程序的参数.

可以使用 ProcessBuilder 类来运行进程，因为它听起来在 JVM 外部请参阅[http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ProcessBuilder.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ProcessBuilder.html) 和[Executing another application from Java](https://stackoverflow.com/questions/3468987/executing-another-application-from-java) for如何使用。

# python - 如何保护自己免受 pip 上的包裹消失？

> ID：16163085
> 
> 赞同：3
> 
> 时间：2013-04-23T07:09:17.810
> 
> 标签：python, virtualenv, pip

我们在构建系统中大量使用 virtualenv 和 pip 来隔离我们的 Python 交付。一切都是完全自动化的，直到现在都运行良好。

几天前，出现了一个问题：一个间接依赖被移到了一个私有的 bitbucket 存储库，pip 开始提示输入登录名/密码。这对于持续集成工具来说是戏剧性的......并且在某些时候，从 pypi 中删除了相同的依赖项，因此我们无法再安装我们的环境。

简而言之，pip 开始提示输入用户/密码，这很快就很痛苦（所有自动化工具都永远挂起......）。从今天开始，它根本就失败了。

我想知道如何拥有更可靠的东西。我猜任何人都可以从 pypi 中删除一个包，完全依赖它是不安全的，对吧？我正在使用缓存并认为这就足够了，但显然它总是尝试连接到互联网以检查包的存在。

这里推荐什么？我应该手动下载所有内容，并且只通过 setup.py 中的变量“dependency_links”引用本地路径吗？还是有更聪明的东西？

谢谢 ！伊曼纽尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T08:21:40.070

实际上，还有一个更严重的危险：pip 通过纯 HTTP 下载包，即使你强制它使用 HTTPS，它也无法检查 id 证书是否有效（因为 Python stdlib 也没有该功能）。也就是说，中间的某个人可以用您可以轻松安装的东西（有时使用 sudo）来掩盖预期的包。这就是为什么在生产环境中只安装单独下载和已经检查过的包是个好主意。

# android - 使用 API 8 及更高版本获取用户/所有者个人资料联系人 URI 和用户图像

> ID：16163088
> 
> 赞同：3
> 
> 时间：2013-04-23T07:09:31.080
> 
> 标签：android, uri, contacts, contactscontract

从 API 14（Android 4.0 及更高版本）开始，我可以使用`ContactsContract.Profile.CONTENT_URI`获取**手机所有者的**联系人个人资料 Uri，并通过它获取他们的头像/联系人照片。

我想知道如何从 API 8（Android 2.2）到 API 13 做到这一点。我只*需要*照片（所以如果在 API 14 之前没有用户个人资料联系人的概念，那也没关系），虽然我是不能确定它实际上是可能的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-14T03:22:37.557

## 在 API 14 之前，在 API 14 之前没有用户配置文件的概念。

`ContactsContract.Profile.CONTENT_URI`这意味着在 4.0 之前的设备上运行时，这不仅仅是寻找替代品的情况。您确实必须实施一种解决方法。

## 不良解决方案（A）：使用 SIM 电话号码

如果用户已将自己添加为联系人，则可以通过号码查找该联系人信息（包括他们的照片/头像），就像任何其他联系人一样。用户的电话号码可以从 SIM 中使用

```
((TelephonyManager)getApplicationContext().getSystemService(Context.TELEPHONY_SERVICE)).getLine1Number(); 
```

获得号码后，您可以使用查询进行查找，例如

```
// Use PhoneLookup.PHOTO_URI from API 11 onwards for more direct lookup
final String[] proj = { PhoneLookup.DISPLAY_NAME, 
                        PhoneLookup._ID,
                        PhoneLookup.PHOTO_ID };
Cursor c = cr.query(Uri.withAppendedPath(PhoneLookup.CONTENT_FILTER_URI,
                                         Uri.encode(number)),
                    proj, null, null, PhoneLookup.DISPLAY_NAME); 
```

在您移动光标并检索适当的`PHOTO_ID`or`PHOTO_URI`后，如果它存在，您可以像这样构建正确的 URI：

```
// I assume local variables long photoId or String photoUriString
Uri photoUri = ContentUris.withAppendedId(ContactsContract.Data.CONTENT_URI,
                                          photoId);
// Just use Uri.parse(photoUriString); from API 11 onwards 
```

**但是**，这种方法存在一些问题：

*   并非所有运营商都将电话号码存储在他们的 SIM 卡中。
*   并非所有手机都可以写入 SIM 卡的该部分。
*   并非所有写入该部分的手机都会以 Android 可用的格式进行写入。

## 稍微好一点的解决方案（B）：在你的应用程序中添加一个用户头像选项

实现一种方式，让用户选择图像作为他们的个人资料照片/头像作为应用程序中的选项或设置。这是合理的直接实现，但如果用户想要在您的应用程序中*添加头像，则会强制用户手动添加头像。*

我不想重新发明轮子，所以这里是[选择图像的一个很好的起点](https://stackoverflow.com/questions/2507898/how-to-pick-an-image-from-gallery-sd-card-for-my-app-in-android)。您应该保存适当大小的图像版本，而不仅仅是用户选择返回的 URI，以防源图像被更改、移动或删除。

您可能希望在 API 14 及更高版本的设备中也允许此功能，因为它允许用户拥有特定于您的应用程序的不同头像。

## 替代解决方案 (C)：A 和 B

*何必？为什么不只是B？*

考虑两者都做，因为一些 SIM 卡包含电话号码的用户可能已将自己添加为联系人（我相信 2.3 SMS 应用程序会尝试查找 SIM 号码），我相信他们会非常感激不必手动设置头像. 在可以自动完成的情况下让用户做额外的工作并不是一件好事。

* * *

我最初添加 A 只是为了获得我们正在测试的旧设备的*一些*功能，然后稍后又添加了 B。

# html - 使用 HTML5 进入全屏时背景/元素变黑

> ID：16163089
> 
> 赞同：32
> 
> 时间：2013-04-23T07:09:34.263
> 
> 标签：html, google-chrome, fullscreen

我正在使用以下脚本使我的网络应用程序全屏显示...

```
function enterFullscreen(){
    var element = document.getElementById('container');
    if (element.mozRequestFullScreen) {
        element.mozRequestFullScreen();
    } else if (element.webkitRequestFullScreen) {
        element.webkitRequestFullScreen();
    }
    l('Fullscreen Mode entered','internal');
} 
```

因此，当我通过`$('button.toggle-fullscreen').click(function(){ enterFullscreen(); });`我确实进入全屏单击触发按钮时，只有我的元素变黑。就是黑色，没有别的。

有人知道怎么修这个东西吗？

仅供参考，我正在使用 Chrome 27。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-23T18:25:33.150

浏览器全屏“视觉环境”的默认背景颜色为黑色。您的内容实际上*是存在*的，但它目前是黑色背景上的黑色文本，因此您看不到它（尝试突出显示或按下`Ctrl+A`以自己查看）。

如果要使背景具有不同的颜色，则必须指定 CSS 规则以将`background-color`属性设置为默认值以外的值。所以，在你的情况下：

```
#container:fullscreen {
    background-color: rgba(255,255,255,0);
}
#container:-webkit-full-screen {
    background-color: rgba(255,255,255,0);
}
#container:-moz-full-screen {
    background-color: rgba(255,255,255,0);
} 
```

应该做的伎俩。（确保您使用适当的供应商版本 -`:-webkit-full-screen`并且`:-moz-full-screen`- 直到规范最终确定；[有关更多信息，请参阅 MDN](https://developer.mozilla.org/en-US/docs/CSS/%3afullscreen)。）

事实上，也许只是

```
*:fullscreen, *:-webkit-full-screen, *:-moz-full-screen {
    background-color: rgba(255,255,255,0);
} 
```

@DevilishDB 编辑：将 rgba 用于透明 BG 并添加 * 选择器以使之前的工作正常

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-07-13T21:03:53.180

我不知道您的问题的确切答案，但这些信息可能会有所帮助：

我有一个类似的黑色背景问题`enterFullscreen(document.body);`。我将线条更改为 后，背景颜色变得正常`enterFullscreen(document.documentElement);`。我使用的 css 是`body{background-color: #D7D7D7; margin: 0px;}`.

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2018-10-31T16:01:00.343

其他答案都不适合我（Chrome 70 或 FF 63）

将此添加到 CSS 文件中确实有效

```
::backdrop
{
    background-color: white;
} 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2016-05-30T09:57:19.527

不知道为什么，但是body元素的背景似乎没有全屏显示或者变得透明......

我通过为 html 元素设置背景颜色来解决这个问题，它工作得很好：

```
html {
    background-color: #ffffff;
    /* Or any color / image you want */
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-09-11T20:58:19.267

我花了几个小时来寻找解决这个问题的窍门。

我这样做结束了：

*   将白色固定到背景
*   并使用 z-index 将其向下推

然后 ：

*   将白色固定到 html 页面内容
*   并使用 z-index 将其向上推（背景上方）

它适用于 Firefox 和 Chrome

```
::backdrop {
    z-index:0;  
    background-color: white !important;
}

html, *:fullscreen, *:-webkit-full-screen, *:-moz-full-screen {
    background-color: white !important;
    z-index:1;
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-08-16T09:57:00.450

主要解决方案对我不起作用:-(我找到了另一个解决方案，但是是的，在css中：

```
:-webkit-full-screen, :fullscreen, :-ms-fullscreen, :-moz-full-screen {
position: fixed;
width: 100%;
height: 100%;
top: 0; 
background: none;} 
```

我知道这是为了我的元素的位置，但我不确定。希望对某人有所帮助。再见，谢谢。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-28T07:40:04.640

接受的答案适用于大多数浏览器，但在我的测试中不适用于 IE11。对我来说，这适用于当前的 Chrome、Firefox、Edge、IE 11 和 iOS 上的 Safari：

**CSS：**

```
body {
    background-color: #ffffff;
} 
```

**JS：**

```
function openFullscreen () {
    let isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);
    let elem = isSafari ? document.documentElement : document.body;
    let openFn = elem.requestFullscreen || elem.mozRequestFullScreen || elem.webkitRequestFullscreen || elem.msRequestFullscreen;
    if (openFn) {
        openFn.call(elem);
    }
}; 
```

编辑：添加了不适用于使用`body`元素的 iOS/Safari 例外。

# php - 302 使用函数 fsockopen() 打开页面时移动

> ID：16163090
> 
> 赞同：0
> 
> 时间：2013-04-23T07:09:39.420
> 
> 标签：php, fsockopen

我尝试使用该功能打开一个页面`fsockopen()`，但我得到以下输出：“HTTP/1.1 302 临时移动”。我怎样才能克服这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:32:43.103

许多 Web 应用程序、.htaccess 设置和域设置利用后续重定向将您带到预期的资源。`fsockopen()`不会自动遵循这些重定向，您需要自己处理它们。正如@hegemon 所提到的，您将需要响应的 Location: 标头来确定下一步。但是，可能会涉及多个后续重定向，因此您要么必须实现自己定制的递归跟踪重定向解决方案，要么正如@str 建议的那样，您可以切换到一些更强大且经过良好测试的解决方案，例如使用`cURL`库。

# mysql - MySQL sum() 并加入一个查询

> ID：16163094
> 
> 赞同：0
> 
> 时间：2013-04-23T07:09:54.517
> 
> 标签：mysql

我有两个表：一个排名表和一个团队表。

```
Standings has 5 columns: id, teamid, weekid, seasonid, points
Teams has 3 columns: id, name, leagueid 
```

我想获得该团队参与的所有周的所有积分的总和，并以该团队的 ID 加入该团队。

我不知道如何在单个查询中执行此操作，但是

```
SELECT sum(s.points), t.name FROM Standings s INNER JOIN Teams t ON s.teamid = t.id WHERE t.leagueid = 1 AND s.seasonid = 1 ORDER BY sum(s.points) DESC LIMIT 3 
```

是我想要的。谢谢。

编辑：

我遇到的一个大问题是我实际上不允许为此访问架构，但我在具有这些类型值的测试数据集上使用它：

# 团队

编号 | 姓名 | 联盟ID

1 | 阿尔法 | 1

2 | 测试版 | 1

3 | 伽玛 | 1

# 常设

编号 | 团队ID | 周末 | 季节| 积分

（阿尔法）

1 | 1 | 1 | 1 | 1

2 | 1 | 2 | 1 | 4

3 | 1 | 3 | 1 | 3

（测试版）

4 | 2 | 1 | 1 | 7

5 | 2 | 2 | 1 | 0

6 | 2 | 3 | 1 | 2

（伽马）

7 | 3 | 1 | 1 | 4

8 | 3 | 2 | 1 | 4

9 | 3 | 3 | 1 | 5

我希望返回的表格看起来像：

姓名 | 积分

阿尔法 | 8

测试版 | 9

伽玛 | 13

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:40:04.287

尝试将用于选择的列放在

```
SELECT
  Teams.name,
  SUM(Standings.points) AS StandingPoints,
  Standings.seasonid,
  Teams.leagueid
FROM Teams
  INNER JOIN Standings
    ON Teams.id = Standings.teamid
GROUP BY Teams.id
HAVING Teams.leagueid = 0
    AND Standings.seasonid = 0
ORDER BY StandingPoints DESC
LIMIT 3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:49:28.423

```
SELECT
  Teams.name,
  SUM(Standings.points) AS StandingPoints
FROM Teams
  INNER JOIN Standings
    ON Teams.id = Standings.teamid
WHERE Teams.leagueid = 0
    AND Standings.seasonid = 0
GROUP BY Teams.id
ORDER BY StandingPoints DESC
LIMIT 3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T07:52:53.407

我想不出为什么其他人使用 HAVING 子句作为 WHERE 标准，所以我会发布我的版本（非常像你的原版）：

```
 SELECT t.*
      , s.seasonid
      , SUM(s.points) total
   FROM Team t 
   JOIN Standing s
     ON s.teamid = t.id 
    AND s.seasonid = 1
  WHERE t.leagueid = 1
  GROUP 
     BY t.id
      , s.seasonid
  ORDER
     BY total DESC; 
```

# php - php 中的 preg_match_all 使用数据库字符串产生不同的结果

> ID：16163097
> 
> 赞同：0
> 
> 时间：2013-04-23T07:09:57.800
> 
> 标签：php, regex, preg-match-all, pcre

我在 php 中使用 preg_match_all 从用 DSL 编写的字符串构造标记。当我将测试字符串硬编码到我的 PHP 代码中并运行它时，一切正常。但是，当我从数据库中读取相同的字符串时，它匹配前两个标记，然后字符串的其余部分作为一个标记匹配，此时它显然应该分成多个子单元，就像字符串被硬编码时所做的那样。

怎么会这样？

我在正则表达式中使用 .+ 来匹配“其余部分”。基本上我的 DSL 由关键字和其余部分组成，所以我的 preg_match_all 正则表达式如下所示：

```
/(?P<NameOfKeyword1>Keyword1)|(?P<NameOfKeyword2>Keyword2)|(?P<NameOfKeyword3>Keyword3)|(?P<Linebreak>\\v+)|(?P<Rest>.+(?=Keyword1)|.+(?=Keyword2)|.+(?=Keyword3)|.+)/ 
```

基本上我首先匹配关键字，然后匹配换行符，然后是其余的，直到出现下一个关键字（或换行符或字符串结尾）。

那么为什么当字符串被硬编码时它会正确匹配，但从数据库中读取相同的字符串时却不匹配呢？

从数据库中读取匹配为一个标记的其余字符串时，不应将其匹配为一个标记，因为它之间有关键字。看起来它匹配它基于 .+

编辑：我用于 preg_match_all 的标志是 PREG_SET_ORDER 和 PREG_OFFSET_CAPTURE

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:41:43.820

```
(?P<Rest>.+(?=Keyword1)|.+(?=Keyword2)|.+(?=Keyword3)|.+) 
```

这并不意味着“*然后剩下的，直到出现下一个关键字（或换行符或字符串结尾）。* ”。事实上，除了新线之外，它永远不会停止。
为什么？您正在使用前瞻。基本上，`.(?=Keyword1)`意思是“任何字符后跟 Keyword1”（`+`它只是表示“一系列字符，每个字符后跟 Keyword1”）。
所以那些几乎不会匹配任何东西。最后`.+`是其余部分完全匹配的原因。

现在，如果你让他们变得[懒惰](http://www.regular-expressions.info/repeat.html)，这应该有预期的输出：

```
(?P<Rest>.+?(?=Keyword1|Keyword2|Keyword3|$)) 
```

**编辑：**
还应该检查 \v：

```
/(?P<NameOfKeyword1>Keyword1)
|(?P<NameOfKeyword2>Keyword2)
|(?P<NameOfKeyword3>Keyword3)
|(?P<Linebreak>\v+)
|(?P<Rest>.+?(?=Keyword1|Keyword2|Keyword3|\v|$))/ 
```

# javascript - 匹配字符串的正则表达式？

> ID：16163100
> 
> 赞同：0
> 
> 时间：2013-04-23T07:10:08.057
> 
> 标签：javascript, regex

这是我的代码：

```
var str="<table><tr><td>abraham</td></tr></table>"; 
```

如何 通过匹配得到**亚伯拉罕**`td`？

我试过但失败了，我不想匹配，`table`或者`tr`，我只想匹配`td`。

```
<!DOCTYPE html>
<html>
<body>

<script>
var str="<table><tr><td>anilkumar</td>";
var patt1=/<td>(\w+)<\/td>/;
document.write(str.match(patt1));
</script>

</body>
</html> 
```

它返回**null**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:11:47.673

用这个：

```
var str="<table><tr><td>abraham</td></tr></table>";
var result = str.match(/<td>(\w+)<\/td>/); //"abraham"
document.write(result[1]); 
```

**编辑：**如果您在`td`s 之间有特殊字符（如空格），您可以使用：

```
var str="<table><tr><td>abraham asd</td></tr></table>";
var result = str.match(/<td>(.*?)<\/td>/); //"abraham asd"
document.write(result[1]); 
```

[**现场演示。**](http://jsfiddle.net/mgechev/5bjkP/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T07:19:03.083

这应该适合您的需求：

```
<td>(.*?)</td> 
```

演示[在这里](http://jsfiddle.net/hUpQm/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T07:19:54.507

基本上它是>和<之间的非空白。试试看，如果

> >\s?(\w+)\s?<

满足您的需求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T07:16:42.157

使用这个表达式：`^<\s*(td|TD)\s*(\w|\W)*\s*>(\w|\W)*</(td|TD)>$`

这个匹配***在 html 中，所以任何其他 html 标记只是对此做一点改变

完美搭配：`<td>hello kitty</td> OR <TD WIDTH='20></TD> OR <TD >&NBSP;</td>`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T07:18:01.500

您可以使用[`createElement`](https://developer.mozilla.org/en-US/docs/DOM/document.createElement)、[`innerHTML`](https://developer.mozilla.org/en/docs/DOM/element.innerHTML)和[`textContent`](https://developer.mozilla.org/en/docs/DOM/Node.textContent)：

```
var dummy = document.createElement('div');
dummy.innerHTML = str;
var text = dummy.textContent; 
```

或者，使用像 jQuery 这样的库（跨浏览器会更好）：

```
var text = $(str).text(); 
```

两者的工作示例：http: [//jsbin.com/acuyoq](http://jsbin.com/acuyoq)

# git - libgit2 引发错误。类别 = Os（错误）

> ID：16163104
> 
> 赞同：7
> 
> 时间：2013-04-23T07:10:23.643
> 
> 标签：git, version-control, visual-studio-2012, azure-devops, libgit2

我现在已经遇到过好几次了：

```
 An error was raised by libgit2\. Category = Os (Error). 
```

在我编写代码时，有时会导致此错误或类似错误：

```
Failed to open '.../App_Data/....mdf': 
The process cannot access the file because it is being used by another process. 
```

发生这种情况时，如果不重新启动我的`Visaul Studio 2012`.

我认为这是由于`Source Control - Git`我不记得在为 Visual Studio 和 Team Foundation 安装 Git 扩展之前遇到过这个问题。

有没有其他人遇到过这个问题，他们是如何解决的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T20:33:17.823

我今天刚刚在一个新的 Visual Studio 项目中遇到了这个问题。该项目使用的是自动生成的`.gitignore`，它具有以下条目，我认为应该`.mdf`很好地涵盖该文件：

```
# SQL Server files
App_Data/*.mdf
App_Data/*.ldf 
```

但是我仍然收到：

```
An error was raised by libgit2\. Category = Os (Error). 
Failed to open '.../App_Data/....mdf': 
The process cannot access the file because it is being used by another process. 
```

所以我`.gitignore`用星号斜杠编辑了每个条目之前的 , ，如下所示：

```
# SQL Server files
*/App_Data/*.mdf
*/App_Data/*.ldf 
```

我能够照常营业。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-27T10:22:16.013

我想添加它可能就像 => Close your database connexion 一样简单:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-29T17:11:37.087

我有同样的错误。IIS express 正在系统托盘中运行。当我杀死 IIS Express 时，一切都按预期提交。

# sql-server - 多部分标识符无法绑定在 where 子句上

> ID：16163105
> 
> 赞同：1
> 
> 时间：2013-04-23T07:10:24.630
> 
> 标签：sql-server, tsql, stored-procedures

嗨，下面是我的存储过程：

```
ALTER PROCEDURE [dbo].[IsRegionNameAllowed] (@RegionName VARCHAR(200),
                                             @RegionId   INT)
AS
  BEGIN
      --Region Name Duplicate Check
      DECLARE @IsExist BIT

      SET @IsExist=0

      IF EXISTS(SELECT *
                FROM   (SELECT DISTINCT EntityID,
                                        ResultObject.value('
                    declare default element namespace "http://schemas.datacontract.org/2004/07/LPSFS.Entity";
                    (/RegionQueueEntity/Region/RegionName)[1]', 'varchar(200)') AS RegionName
                        FROM   TransactionLPS t
                               JOIN servistreammyqueue my
                                 ON t.servistreamtransactionid = my.servistreammyqueueid
                               JOIN lkpqueuestatus lkp
                                 ON my.queuestatusid = lkp.queuestatusid
                        WHERE  SubContextID IN (SELECT ContextID
                                                FROM   lkpcontext
                                                WHERE  ContextCode = 'RGMCTX0002')
                               AND EntityID <> @RegionId) AS RegName
                WHERE  ( lower(RegName.RegionName) = lower(@RegionName)
                         AND lkp.queuestatuscode = 'QSTAPP' ))
        SET @IsExist=1
  END 
```

但它在 lkp.queuestatuscode 中给出错误，即（无法绑定多部分标识符）。请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T07:13:33.317

`lkp`是子查询中的别名。`WHERE`对于外部查询的子句，它不再存在。如果要在外部`WHERE`子句中查询它，则将其包含在子选择的子句中，并观察子查询的别名是，而不是`SELECT`的事实：`RegName``lkp`

```
Select * from (
select distinct EntityID,
                  ResultObject.value('
                    declare default element namespace "http://schemas.datacontract.org/2004/07/LPSFS.Entity";
                    (/RegionQueueEntity/Region/RegionName)[1]','varchar(200)') as RegionName
       ,lkp.queuestatuscode
            from TransactionLPS t
            join servistreammyqueue my on t.servistreamtransactionid = my.servistreammyqueueid
            join lkpqueuestatus lkp on my.queuestatusid = lkp.queuestatusid
            where SubContextID in (Select ContextID from lkpcontext where ContextCode = 'RGMCTX0002')
            And EntityID <> @RegionId) as RegName
Where (lower(RegName.RegionName)=lower(@RegionName) And RegName.queuestatuscode = 'QSTAPP')) 
```

此外，由于所有这些都在`EXISTS`测试中使用，我会删除`DISTINCT`- 充其量是多余的，最坏的情况是它可能会导致系统产生一个不太理想的计划。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:20:05.987

试试这个——

```
ALTER PROCEDURE [dbo].[IsRegionNameAllowed]
(
      @RegionName varchar(200)
    , @RegionId int
)
AS BEGIN

DECLARE @IsExist BIT
SELECT @IsExist = 0

IF EXISTS( 
    SELECT 1 
    FROM (
        SELECT DISTINCT
            EntityID,
            ResultObject.value('
                            declare default element namespace "http://schemas.datacontract.org/2004/07/LPSFS.Entity";
                            (/RegionQueueEntity/Region/RegionName)[1]', 'varchar(200)') AS RegionName
        FROM dbo.TransactionLPS t
        JOIN dbo.servistreammyqueue my ON t.servistreamtransactionid = my.servistreammyqueueid
        JOIN dbo.lkpqueuestatus lkp ON my.queuestatusid = lkp.queuestatusid
        WHERE EntityID <> @RegionId
            AND lkp.queuestatuscode = 'QSTAPP'
            AND SubContextID IN (
                            SELECT t2.ContextID 
                            FROM lkpcontext t2
                            WHERE t2.ContextCode = 'RGMCTX0002'
                        )
    ) RegName
    WHERE lower(RegName.RegionName) = lower(@RegionName) 
) SELECT @IsExist = 1

END 
```

# c# - EWS API：如何获取拉取通知？

> ID：16163107
> 
> 赞同：0
> 
> 时间：2013-04-23T07:10:25.917
> 
> 标签：c#, exchange-server, exchangewebservices

我正在使用[EWS API](http://msdn.microsoft.com/en-us/library/exchange/dd633709%28v=exchg.80%29.aspx)从 Exchange 2007 服务器连接和检索邮件，它工作正常。现在我想收到拉通知。我在[这里](http://code.msdn.microsoft.com/Exchange-2013-Set-pull-14c8360b/sourcecode?fileId=59943&pathId=794866531)找到了一个示例，这是我尝试过的：

```
public IEnumerable<ItemEvent> GetPullNotifications(FolderId folderId)
{
    PullSubscription subscription = Service.SubscribeToPullNotifications(new FolderId[] { folderId }, 5, null, EventType.NewMail, EventType.Created, EventType.Deleted);
    return subscription.GetEvents().ItemEvents;
}

public void CheckPullNotifications(object source, ElapsedEventArgs e)
{
    Console.WriteLine("Check...");
    IEnumerable<ItemEvent> itemEvents = ewsClient.GetPullNotifications(WellKnownFolderName.Inbox);
    foreach (ItemEvent itemEvent in itemEvents)
    {
        switch (itemEvent.EventType)
        {
            case EventType.NewMail:
                MessageBox.Show("New mail: " + itemEvent.ItemId.UniqueId);
                break;
            case EventType.Deleted:
                MessageBox.Show("Mail deleted: " + itemEvent.ItemId.UniqueId);
                break;
        }
    }

    return;
}

//...
Timer myTimer = new Timer();
myTimer.Elapsed += new ElapsedEventHandler(CheckPullNotifications);
myTimer.Interval = 1000;
myTimer.Start(); 
```

但是，当我在那里放置断点时，我从来没有到达上面的开关。我已经发送了一些邮件并删除了一些，但没有任何反应。

任何想法为什么这不起作用？或者还有其他方法可以获取拉取通知吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T09:54:50.297

我找到了解决方案。我上面所做的是创建一个新订阅并立即尝试获得结果。相反，我必须创建一次订阅，然后不时提取结果。

例子：

```
public void SubscribePullNotifications(FolderId folderId)
{
    Subscription = Service.SubscribeToPullNotifications(new FolderId[] { folderId }, 1440, null, EventType.NewMail, EventType.Created, EventType.Deleted);
}

public void GetPullNotifications()
{
    IEnumerable<ItemEvent> itemEvents = Subscription.GetEvents().ItemEvents;
    foreach (ItemEvent itemEvent in itemEvents)
    {
        switch (itemEvent.EventType)
        {
            case EventType.NewMail:
                MessageBox.Show("New Mail");
                break;
        }
    }
}
// ...
SubscribePullNotifications(WellKnownFolderName.Inbox);
Timer myTimer = new Timer();
myTimer.Elapsed += new ElapsedEventHandler(GetPullNotifications);
myTimer.Interval = 10000;
myTimer.Start(); 
```

# c - 有没有一种优雅的方法来强制比较两个常数？

> ID：16163111
> 
> 赞同：28
> 
> 时间：2013-04-23T07:10:47.133
> 
> 标签：c

众所周知，所有明智的编译器都会优化以下代码：

```
const int a = 3;
const int b = 42;

if (a == b)
{
    do_something();
} 
```

如果两个常量相同，`if`则省略并始终调用函数，如果它们不同，则省略整个块。

但是，在某些情况下，不要优化此代码很重要，因为程序本身可以在运行之前进行修改。例如二进制文件位于闪存中，可以被外部程序访问，当然这两个`const`s的地址是固定的。（在嵌入式中有意义）。

我正在考虑使用`#pragma`，但这不是 C 标准的一部分。

另一种方法是使用`const volatile`. 这是否保证适用于所有符合标准的编译器？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-23T07:28:07.373

是的，`const volatile int a = 3;`完全符合您的要求，并且从 C89 开始符合标准（请参阅 C89 的第 3.5.3 节）。

[这个出色的答案](https://stackoverflow.com/a/4597164/790070)详细描述`const volatile`了在与您类似的情况下使用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-23T07:33:23.937

`const volatile`应该做到这一点，因为比较需要“读取”两个变量`volatile`- 并且标准保证读取将被视为具有可观察到的副作用。

因此，它们不能仅仅被优化掉。

我必须问，你要解决什么问题需要这个解决方案？解释问题可能使我们能够提供您可能没有考虑过的建议和解决方案，而这些建议和解决方案不需要这种跳跃。

# android - 安卓draw9patch工具

> ID：16163115
> 
> 赞同：1
> 
> 时间：2013-04-23T07:10:59.850
> 
> 标签：android, nine-patch

我在创建 9patch 可绘制对象时遇到了问题。

Drawable 是一个以图片为中心的按钮。我想拉伸除居中图像之外的所有内容。现在，当我使用 draw9patch 工具在顶部边框上添加两个点时 - 一个在左侧，一个在居中图像的右侧 - 该图像向右移动。我在右侧制作的可拉伸区域越宽，图像越靠近可绘制的中心。

为什么它是这样工作的？

编辑：可绘制上传：

![在此处输入图像描述](https://i.stack.imgur.com/2AO6S.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:19:32.393

![看到这个 9patch](https://i.stack.imgur.com/eqio6.png) 您需要在顶部添加两个点，在左侧添加两个点

# php - 解析错误，sql数据库和php

> ID：16163119
> 
> 赞同：0
> 
> 时间：2013-04-23T07:11:15.183
> 
> 标签：php, sql

将页面上传到服务器后出现此错误：

> 解析错误：语法错误，第 11 行 /data/19/1/86/59/1901711/user/xxxx/htdocs/Maxxxxxxt/Mxxxxxxe/Pxx/txxx/index.php 中的意外 T_LOGICAL_OR

在线我有这个数据库语句，当我在本地主机上使用它时工作正常。

```
$objConnect = mysql_connect('localhost','root',''); or  die(mysql_error()); 
```

我已经尝试了所有设置，但它们都无能为力，让我知道我做错了什么？以及如何修复它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T07:12:12.933

删除分号

```
$objConnect = mysql_connect('localhost','root',''); or  die(mysql_error()); 
```

mysql_connect 函数后改成这个

```
$objConnect = mysql_connect('localhost','root','') or  die(mysql_error()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T07:12:13.107

删除`;`后面的`mysql_connect()`：

```
$objConnect = mysql_connect('localhost','root','') or die(mysql_error()); 
```

^(此外，看看[PDO](http://php.net/pdo)和[mysqli](http://php.net/mysqli)，因为这些`mysql_x`功能已被弃用！)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T07:12:36.070

```
$objConnect = mysql_connect('localhost','root',''); or  die(mysql_error()); 
```

应该

```
$objConnect = mysql_connect('localhost','root','') or  die(mysql_error());
                                                  ^ removed ; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T07:12:52.407

`;`从这里删除

```
 'root',''); or  die(mysql_error());
           ^ 
```

# android - Android：协调SounPool和TTS

> ID：16163126
> 
> 赞同：0
> 
> 时间：2013-04-23T07:11:33.263
> 
> 标签：android, multithreading, text-to-speech

我在我的活动中定义了这个简单的方法：

```
private void playSound(final boolean ttsOn) {
    // TODO Auto-generated method stub
    int water = 0;      
    SoundPool pl;
    pl = new SoundPool(5, AudioManager.STREAM_MUSIC, 0);

    water = pl.load(this, R.raw.water_boiling, 0);

    pl.setOnLoadCompleteListener(new OnLoadCompleteListener() {

        @Override
        public void onLoadComplete(SoundPool soundPool, int sampleId, int status) {
            // TODO Auto-generated method stub
            soundPool.play(sampleId, 1f, 1f, 0, 0, 1);
            if(ttsOn)
                speakOut();
        }
    }); 
```

这是哪里`speakOut()`：

```
private void speakOut() {

    tts.setLanguage(Locale.ITALIAN);
    tts.speak(n.Message, TextToSpeech.QUEUE_FLUSH, null);
} 
```

但这会重现我的 mp3 文件和我的 tts 同时说话。

所以问题是：

如何在我的 mp3 之后重现 tts？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:31:53.987

您应该知道声音文件的持续时间，`R.raw.water_boiling`为此持续时间设置倒数计时器并调用`speakOut()`。`onFinish()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T10:38:08.833

我以这种方式解决问题：

```
private void playSound(final boolean ttsOn) {
    // TODO Auto-generated method stub
    int water = 0;      
    SoundPool pl;
    pl = new SoundPool(5, AudioManager.STREAM_MUSIC, 0);

    water = pl.load(this, R.raw.system_alert_003, 0);

    pl.setOnLoadCompleteListener(new OnLoadCompleteListener() {

        @Override
        public void onLoadComplete(SoundPool soundPool, int sampleId, int status) {
            // TODO Auto-generated method stub
            soundPool.play(sampleId, 1f, 1f, 0, 0, 1);
            if(ttsOn)
            {
                myMediaTimer = new Timer();
                myMediaTimer.schedule(new TimerTask() {         
                    @Override
                    public void run() {
                        speakOut();
                    }

                }, DURATION_MEDIA_FILE);

            }
        }
    });

    Log.i("onCrete","WATER FILE: "+water);

} 
```

即使这需要了解 mp3 文件的持续时间。

# youtube-api - 如何获取我频道中的所有 youtube 视频 URL？

> ID：16163127
> 
> 赞同：3
> 
> 时间：2013-04-23T07:11:38.230
> 
> 标签：youtube-api

我有一个包含 500 多个视频的频道，并且想要我的频道中所有视频 URL 的列表。

我努力了：

[https://gdata.youtube.com/feeds/api/users/default/uploads?key=DEVELOPER_KEY](https://gdata.youtube.com/feeds/api/users/default/uploads?key=DEVELOPER_KEY)

开发者密钥来自：[https ://code.google.com/apis/youtube/dashboard](https://code.google.com/apis/youtube/dashboard)

我只是得到： **需要用户身份验证。错误 401**

不知道如何进行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T21:58:51.190

[https://gdata.youtube.com/feeds/api/users/your_youtube_username/uploads?max-results=50&start-index=1&prettyprint=true&fields=entry(title,media:group(media:player(@url)))](https://gdata.youtube.com/feeds/api/users/your_youtube_username/uploads?max-results=50&start-index=1&prettyprint=true&fields=entry(title,media:group(media:player(@url))))

Sunxperous 代码中的一些更改。

**最大结果**的最大查询

 **插入**$prettyprint**看更漂亮

过滤数据，只会看到标题和 URL。

查看更多

[https://developers.google.com/youtube/2.0/developers_guide_protocol_api_query_parameters#max-resultssp](https://developers.google.com/youtube/2.0/developers_guide_protocol_api_query_parameters#max-resultssp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T09:36:25.337

[https://gdata.youtube.com/feeds/api/users/**your_youtube_username**/uploads?**max-query=50**&**start-index=51**](https://gdata.youtube.com/feeds/api/users/your_youtube_username/uploads?max-query=50&start-index=51)

Replace `default` with your YouTube username. This GET request does not seem to require a developer key.

[YouTube API v2.0 - API Query Parameters](https://developers.google.com/youtube/2.0/developers_guide_protocol_api_query_parameters#max-resultssp) describes the use of the `max-query` search parameter. As it will only return a maximum of 50 results, use it with `start-index` to determine the range of the requested results. The sample link above will return upload results of indexes *51* to *100*.

Hence, you will need to make multiple requests in order to fetch all 500+ videos.
[YouTube API - Get All Videos From User limits?](https://stackoverflow.com/questions/7019401/youtube-api-get-all-videos-from-user-limits) has a similar question.**

# c - c中的结构数组赋值

> ID：16163128
> 
> 赞同：-3
> 
> 时间：2013-04-23T07:11:40.757
> 
> 标签：c

我怎样才能让它工作？struct 数组元素可以是随机的，并且数组中的元素可以变化。我尝试创建一个指针并分别分配每个记录，但没有运气。

```
#include<stdio.h>

typedef struct _str
{
    int arraySize;
    int a[10];
} str;

int main()
{
    str s[50];

    s[10] = {4, {1, 4, 5, 6}};
    s[20] = {3, {2, 7, 11}};
    s[30] = {3, {3, 8, 9}};

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T07:32:09.473

你正在做的是在声明它之后定义**结构**你**只能** 在**声明它之后****分配**给一个结构

 ******一个结构可以在一个句子中声明和初始化（我的意思是在声明期间），就像这样

```
typedef struct _str
{
    int arraySize;
    int a[10];
} str;

int main()
{
  str s[10] = {{1,{2,3,4}},{2,{3,5,6}}....};// this is correct but impractical. 
```

//但这是错误的

```
 s[1] = {1,{2,3,4}};// 
```

//你必须这样做

```
 s[1].arraysize = 10; //explicitly assign each member

    for(int i=0;i<s[1].arraysize;i++)
    s[1].a[i] = value; 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:28:17.860

如果您想在运行时确定元素的数量，请使用列表（链表或循环列表）作为类型而不是数组。见 [http://www.cprogramming.com/tutorial/c/lesson15.html](http://www.cprogramming.com/tutorial/c/lesson15.html)

或使用类似于下面的代码

```
typedef struct _str
{
    int arraySize;
    int *a;
} str;

int main()
{
str s[50];

    s[0].arraySize =3;
    s[0].a=(int *)malloc(sizeof(int)*s[0].arraySize ) ;
    s[0].a[0]=2;
    s[0].a[1]=5;
    s[0].a[2]=7;

    return 0;
} 
```******

# javascript - 使用逗号与分号连接多个语句

> ID：16163135
> 
> 赞同：16
> 
> 时间：2013-04-23T07:11:58.970
> 
> 标签：javascript, jquery, minify

在使用缩小的 Jquery 时，我注意到多个由逗号连接的语句。

例如

```
event.preventDefault();
event.stopPropagation();
jQuery.event.trigger( event, data, this[0] );
return event.result; 
```

缩小为：

```
c.preventDefault(),c.stopPropagation(),d.event.trigger(c,b,this[0]);return c.result 
```

我确实看到了一个类似的问题：[JavaScript 变量定义：逗号与分号](https://stackoverflow.com/questions/3781406/javascript-variable-definition-commas-vs-semicolons)

但在这种情况下，显然没有性能优势或字符减少。

我可以假设缩小脚本这样做只是一个选择问题吗？

首先使用分号会不会更安全..并防止在返回语句的情况下避免逗号连接的逻辑开销。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-23T07:15:13.730

Minifiers 倾向于在可能的情况下使用逗号，因为它允许`if`缩短语句体之类的内容。例如：

```
if (x) {
    y = 10;
    z = 20;
} 
```

可以使用逗号将上面的内容缩小以删除花括号（因为如果`if`语句主体只是单个语句，它们是可选的）：

```
if (x) y = 10, z = 20; 
```

在这种情况下，它确实会导致代码更短，这正是缩小器的目标。

# python - 在 Flask 蓝图中捕获信号

> ID：16163139
> 
> 赞同：7
> 
> 时间：2013-04-23T07:12:06.857
> 
> 标签：python, signals, flask

我正忙着在烧瓶中编写一个 RESTful API，使用烧瓶视图来驱动 API。由于应用程序相当大，我将代码模块化为蓝图。尝试在蓝图中捕获信号时遇到了一些麻烦。我可以愉快地在我的主`__init__.py`文件中编写“连接信号”代码，但我想在相关蓝图中编写信号侦听器，以免主`create_app`方法与蓝图特定代码混淆。

目前我有这个[简化的]工作代码：

```
def create_app(debug=False):
    app = Flask(__name__)
    ...
    app.register_blueprint(my_blueprint)
    @mysignal.connect_via(app)
    def print_howdy(sender, **extra):
       print "howdy" 
```

我想将信号连接代码移到 my_blueprint 中，但找不到优雅的方法。我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T11:22:10.840

请记住，Python 中的装饰器语法是糖：

```
@decorator
def decorated():
    pass 
```

相当于：

```
def decorated():
    pass

decorated = decorator(decorated) 
```

因此，您可以`print_howdy`在您的蓝图中定义并将其与您的蓝图一起导入。为了保持干净，您甚至可以在蓝图中定义一个信号侦听器列表，并一次性将它们全部导入：

```
mysignal.connect_via(app)(print_howdy) 
```

甚至：

```
# blueprint.py
def print_howdy(): pass
def print_seeya(): pass

MYSIGNAL_LISTENERS = (print_howdy, print_seeya)

# __init__.py
from blueprint import MYSIGNAL_LISTENERS
for listener in MYSIGNAL_LISTENERS:
    mysignal.connect_via(app)(listener) 
```

您甚至可以将此模式抽象为一个函数：

```
from werkzeug.utils import import_string

DEFAULT_SIGNALS = ('MYSIGNAL', 'MYOTHERSIGNAL')

def register_blueprint_and_signals(app, bp_path, signals=DEFAULT_SIGNALS):
    bp = import_string(bp_path)
    app.register_blueprint(bp)

    signal_path = bp_path.rsplit(".", 1)[0] + "."
    for signal in signals:
        try:
            listeners = import_string(signal_path + signal + '_LISTENERS')
        except ImportError:
            continue

        for listener in listeners:
            signal.connect_via(app)(listener) 
```

然后你可以像这样使用它：

```
app = Flask(__name__)
register_blueprint_and_signals(app, "my_module.my_blueprint")
register_blueprint_and_signals(app, "another.blueprint", ['ANOTHERSIGNAL']) 
```

# cakephp - 发布数据时视图缓存失败 - CakePHP

> ID：16163148
> 
> 赞同：0
> 
> 时间：2013-04-23T07:12:29.240
> 
> 标签：cakephp, caching, cakephp-1.3

我在 cakePHP 1.3 中使用视图缓存，效果很好。我正在尝试做的事情，我也在缓存添加和编辑操作。
第一次表单显示正确，但是当我发布数据时（发布的表单操作也相同），所以不是保存数据，而是调用相同的缓存视图。

那么，如果发布数据，有什么方法可以绕过缓存视图。

# c# - 如何在控件大小更改时自动调整控件c#

> ID：16163150
> 
> 赞同：2
> 
> 时间：2013-04-23T07:12:36.520
> 
> 标签：c#, dynamic, user-controls, runtime

我有`winform`一个`usercontrol`可以在运行时动态创建的多个。我有两种查看方式：最大模式和最小模式。这个想法是，当它们最小时，一些对象`usercontrol`是隐藏的。我想，如果我切换到最大模式，用户控件会自动调整。我该怎么做？我开始计算它们的宽度和高度，但我不知道如何创建新点。我下面的图片显示得更好：

这是最小模式：

![在此处输入图像描述](https://i.stack.imgur.com/y8N7Y.png)

当我将其更改为最大模式时它们的外观：![在此处输入图像描述](https://i.stack.imgur.com/y4uiC.png)

我想如何成为用户控件： ![在此处输入图像描述](https://i.stack.imgur.com/RkY0G.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:16:08.613

您应该使用控件的[Anchor](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.anchor.aspx)属性，甚至可以`Property Window`在设计时从 VisualStudio 中设置它。

更多信息：[如何：在 Windows 窗体上锚定控件](http://msdn.microsoft.com/en-us/library/8y52cxte%28v=vs.110%29.aspx)

另一种选择，顺便说一下可以与 Anchor 结合使用的是 [TableLayoutPanel](http://www.dotnetperls.com/tablelayoutpanel)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T07:16:51.703

为此使用`Dock`或`Anchor`财产。

例如。`groupBox1.Dock = DockStyle.Top;`

**码头的 MSDN：**

[http://msdn.microsoft.com/en-us/library/system.windows.forms.control.dock.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.dock.aspx)

**锚点的 MSDN：**

[http://msdn.microsoft.com/en-us/library/system.windows.forms.control.anchor.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.anchor.aspx)

**文章举例：**

[http://www.techrepublic.com/article/manage-winform-controls-using-the-anchor-and-dock-properties/6165908](http://www.techrepublic.com/article/manage-winform-controls-using-the-anchor-and-dock-properties/6165908)

# c - 在 C 中逐行读取管道

> ID：16163154
> 
> 赞同：10
> 
> 时间：2013-04-23T07:12:54.470
> 
> 标签：c, pipe, stdout, stdin

如何分离来自管道的线路。在管道中有这样的文字：

```
HALLO:500\n
TEST:300\N
ADAD
ADAWFFA
AFAGAGAEG 
```

我想将管道与管道分开，因为我想将值保存在变量中。

这是我的c代码：

```
#include <stdio.h>
#include <stdlib.h>

#define BUFFERSIZE    1

int main(int argc, char **argv){
    unsigned char     buffer[BUFFERSIZE];
    FILE                         *instream;
    int                            bytes_read=0;
    int                            buffer_size=0;

    buffer_size=sizeof(unsigned char)*BUFFERSIZE;
    /* open stdin for reading */
    instream=fopen("/dev/stdin","r");

    /* did it open? */
    if(instream!=NULL){
        /* read from stdin until it's end */
        while((bytes_read=fread(&buffer, buffer_size, 1, instream))==buffer_size){
            fprintf(stdout, "%c", buffer[0]);
        }
    }
    /* if any error occured, exit with an error message */
    else{
        fprintf(stderr, "ERROR opening stdin. aborting.\n");
        exit(1);
    }

    return(0);
} 
```

这是从管道中逐行读取最佳值的正确方法吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-23T07:23:58.187

这通常被称为*从 stdin 读取*。程序不应该关心输入是管道、重定向文件还是键盘。

fread 只会读取直到缓冲区已满。使用 fgets 读取一行。

此外，缓冲区大小应该足够大以容纳该行。对于小的一次性程序，您可以选择一个数字。或者有一个标准名称`BUFSIZ`可以为您提供*相当大的*缓冲区。多大？足够大。真的吗？大概。

`fgets`除非字符串先填满，否则将复制字符串中的换行符。因此，您可以测试最后一个字符以判断该行是否被截断。有了合理的投入，这不会发生。但更强大的方法将分配更大的缓冲区，复制部分行，然后`fgets`再次调用 tp 继续尝试获得完整的行。

```
#include <stdio.h>

int main() {
    char buf[BUFSIZ];
    fgets(buf, sizeof buf, stdin);
    if (buf[strlen(buf)-1] == '\n') {
        // read full line
    } else {
        // line was truncated
    }
    return 0;
} 
```

这使您免受可怕的*缓冲区溢出*问题的影响。`fgets`不会写入超过传递给它的大小。如上所述，另一半正在对可能由意外长的输入行导致的部分行做一些明智的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-16T23:01:46.473

这是另一种选择（我不完全确定这是一种“正确”的方式）-使用`read`函数读取的字节数。在此示例中，`stdin`尽管进行了重定向，但我正在阅读，因此 0 中的 fd 是文件/管道/您需要的任何内容。

```
 while ((nbytes=read(STDIN_FILENO, buffer, MAX_PIPE_SIZE)) > 0) {
    write(STDOUT_FILENO, buffer, nbytes);
  } 
```

# javascript - “加载资源失败：服务器响应状态为 500（内部服务器错误）”

> ID：16163156
> 
> 赞同：5
> 
> 时间：2013-04-23T07:13:03.393
> 
> 标签：javascript, ajax, vb.net, web-services

在使用 ajax 使用 JavaScript 调用 html 页面中的 Web 服务时，我真的不明白这里的确切问题是什么，因为它会产生以下错误：

> 加载资源失败：服务器响应状态为 500（内部服务器错误）

阿贾克斯代码：

```
function Image() {
    $.ajax({

        type: "POST",
        url: "WebService.asmx/GetImage",
        data: "{'sDB': '" + "sDB" + "'}", 
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: OnGetMemberSuccess,
        failure: function (errMsg) {
            $('#errorMessage').text(errMsg);  //errorMessage is id of the  div
        }
    });
    function OnGetMemberSuccess(data, status) {
        alert("data" + data.d);
        $("#MemberDetails").html(data.d);
        $('input[type=button]').attr('disabled', false);
    }
} 
```

其中 sDB 为空。

按钮点击代码：

```
<input type="button" id="Button" value="Image" onclick="Image()" /> 
```

我在以前的项目中使用了相同的代码，但它工作正常。

网络服务代码：

```
<ScriptMethod(ResponseFormat:=ResponseFormat.Json)> <WebMethod()> _
Public Function GetImage()

    Dim cmd As SqlCommand = New SqlCommand
    Dim con = New SqlConnection("server = PROG19-PC;database = XIDBViews;Trusted_Connection = yes")
    cmd.Connection = con
    con.Open()
    Dim strQuery As String = ""
    Dim oSB As New StringBuilder
    Dim table As New Table()
    Dim tr As New TableRow()
    Dim td As New TableCell()
    Dim sFirstNameValue As String = String.Empty
    Dim sLastNameValue As String = String.Empty
    Dim DoBValue As String = String.Empty
    Dim sPhoto As String = String.Empty

    strQuery = "SELECT [sFirstName],[sLastName],[DoB],[sPhoto] FROM [XIDBViews].[dbo].[tblEmployee]  "
    cmd = New SqlCommand(strQuery, con)
    cmd.ExecuteNonQuery()
    Dim dr As SqlDataReader = cmd.ExecuteReader(System.Data.CommandBehavior.CloseConnection)
    oSB.Append("<table><thead><tr><th>" + " FirstName" + "</th><th>" + "Lastname" + "</th><th>" + "DoB" + "</th><th>" + "Party" + "</th><th>" + "Photo" + "</th></tr></thead>")
    While dr.Read()
        sFirstNameValue = dr("sFirstName").ToString
        sLastNameValue = dr("sLastName").ToString
        DoBValue = dr("DoB").ToString
        sPhoto = dr("sPhoto").ToString

        oSB.Append("<tbody id=tbodyid'>")

        oSB.Append("<tr>")
        oSB.Append("<td class=border1>")
        oSB.Append(sFirstNameValue)
        oSB.Append("</td>")

        oSB.Append("<td class=border1 >")
        oSB.Append(sLastNameValue)
        oSB.Append("</td>")

        oSB.Append("<td  class=border1>")
        oSB.Append(DoBValue)
        oSB.Append("</td>")

        oSB.Append("<td class=border1>")
        oSB.Append(sPhoto)
        oSB.Append("</td>")

        oSB.Append("</tr>")
        oSB.Append("</tbody>")
    End While
    dr.Close()
    con.Close()
    MsgBox(oSB.ToString)
    'Debug.Print(oSB.ToString)
    Return oSB.ToString()
End Function
End Class 
```

但是这个网络服务代码工作正常，据我所知，问题出在 ajax 代码上，任何人都可以帮我解决这个问题。干杯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-25T09:37:40.443

您是否尝试将您请求的 URL 直接插入浏览器...您将收到一条错误消息，告诉您，

**“只能从脚本调用类定义中具有 [ScriptService] 属性的 Web 服务”**

将 [ScriptService] 属性添加到服务类定义的顶部，它可能会解决您的问题。

我有一个类似的问题，它对我有用：D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-02T11:03:53.567

将数据类型从 json 更改为 text 解决了我的问题

# ios - 如何将 HTM 解析为包含 HTML 代码段而不是其内容的 NSString 对象

> ID：16163160
> 
> 赞同：1
> 
> 时间：2013-04-23T07:13:11.083
> 
> 标签：ios, objective-c, xcode, parsing, html-parsing

我有一个包含日文字符和音标表的 htm 文件（使用 UTF-8 编码从 Excel 导出）。[在此处获取示例文件。](http://www.filedropper.com/kanji)

我已将 htm 文件添加到我的 Xcode 项目中，现在希望为表中的每个单元格创建包含 html 代码的 NSString 对象（即 html 之间的 html `<td> </td>)`。稍后我将使用这些 NSStrings 在 UIWebView 中显示这些日语字符（必须使用 HTML 来保留 ruby​​ 文本）。

例如，来自 htm 文件的以下表格单元格：

```
 <td><ruby>朝&lt;rt>あさ</rt></ruby><ruby>御飯<rt>ごはん&lt;/rt></ruby></td> 
```

需要像这样放入 NSString 中：

```
NSString *string1 = @"<ruby>朝&lt;rt>あさ</rt></ruby><ruby>御飯<rt>ごはん&lt;/rt></ruby>"; 
```

最后，由于这些 NSStrings 被解析/创建，我还需要添加一些基本的 html 格式，如下所示：

```
NSString *string1 = @"<div align='center' style='font-size:40px;'><ruby>朝&lt;rt>あさ</rt></ruby><ruby>御飯<rt>ごはん&lt;/rt></ruby>"; 
```

然后，我会将字符串对象放入一个数组中，并根据需要将它们显示在 UIWebView 中。

我查看了一些 HTML 解析器，包括 hppl，但它们似乎都抓取了 html 中的内容，而不是 html 代码段。

有人知道我如何从 htm 文件创建这些 NSStrings 吗？

# exception - Vaadin 7 - Bean 验证

> ID：16163162
> 
> 赞同：0
> 
> 时间：2013-04-23T07:13:21.897
> 
> 标签：exception, jpa, vaadin, classnotfoundexception, bean-validation

我一直在尝试 Vaadin 7。首先，我必须管理，我在 Vaadin 是一个安静的菜鸟，对 JAVA 持久性不太熟悉。因此，我正在尝试学习 bean 验证以及如何使用它。我已经学习了几个教程，但很难确定哪个是 Vaadin 7 的最新且正确的教程。尽管如此，我尝试下载并使用 JPA 容器和 BeanValidator，但无法使其正常工作。这是我正在使用的代码：

```
package com.example.firstvaadin;

import java.io.Serializable;

import org.hibernate.validator.constraints.Email;
import javax.validation.constraints.*;

public class RegisterBean implements Serializable{

    public  RegisterBean(String email){
        this.email = email;
    }

    @Size(min = 5, max = 50)
    private String email;

    public void setEmail(String email) {
        this.email = email;
    }

    public String getEmail() {
        return email;
    }
} 
```

和

```
RegisterBean rbean = new RegisterBean("");
BeanItem<RegisterBean> item = new BeanItem<RegisterBean>(rbean);
TextField email = new TextField("email",item.getItemProperty("email"));
email.setImmediate(true);
layout.addComponent(email);
email.setNullRepresentation(""); 
```

但我在以下代码上遇到了运行时异常： email.addValidator(new BeanValidator(RegisterBean.class, "email"));

```
The exception is:
    aused by: com.vaadin.event.ListenerMethod$MethodException: Invocation of method buttonClick in com.example.firstvaadin.LoginView$1 failed.
    at com.vaadin.event.ListenerMethod.receiveEvent(ListenerMethod.java:528)
    at com.vaadin.event.EventRouter.fireEvent(EventRouter.java:167)
    at com.vaadin.server.AbstractClientConnector.fireEvent(AbstractClientConnector.java:984)
    at com.vaadin.ui.Button.fireClick(Button.java:367)
    at com.vaadin.ui.Button$1.click(Button.java:56)
    ... 28 more
Caused by: java.lang.NoClassDefFoundError: javax/validation/MessageInterpolator$Context
    at com.example.firstvaadin.RegisterView.<init>(RegisterView.java:55)
    at com.example.firstvaadin.LoginView$1.buttonClick(LoginView.java:63)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.vaadin.event.ListenerMethod.receiveEvent(ListenerMethod.java:508)
    ... 32 more
Caused by: java.lang.ClassNotFoundException: javax.validation.MessageInterpolator$Context
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1713)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1558)
    ... 39 more 
```

我不知道缺少哪些类，我添加了休眠 jars 和 validation-api.jar

有人可以帮帮我吗？

此外，这里是 /WebContent/WEB-INF/lib 目录中并作为类路径添加到 Eclipse 中的 jar 文件列表。

```
classmate-0.8.0.jar
hibernate-jpa-2.0-api-1.0.1.Final.jar
hibernate-search-engine-4.3.0.Alpha1.jar
hibernate-search-orm-4.3.0.Alpha1.jar
hibernate-validator-5.0.0.Final.jar
hibernate-validator-annotation-processor-5.0.0.Final.jar
hibernate-validator-cdi-5.0.0.Final.jar
javax.el-2.2.4.jar
javax.el-api-2.2.4.jar
jboss-logging-3.1.1.GA.jar
joda-time-2.1.jar
jsoup-1.7.1.jar
log4j-1.2.17.jar
mysql-connector-java-5.1.22-bin.jar
vaadin-sqlcontainer-1.1.0.jar
validation-api-1.0.0.GA.jar
validation-api-1.1.0.Final.jar 
```

classnotfound 异常消失了，但现在有了一个新异常：

> java.lang.NoSuchMethodError: javax.validation.spi.ConfigurationState.getParameterNameProvider()Ljavax/validation/ParameterNameProvider; 在 org.hibernate.validator.internal.engine.ValidatorFactoryImpl.(ValidatorFactoryImpl.java:113) 在 org.hibernate.validator.HibernateValidator.buildValidatorFactory(HibernateValidator.java:45) 在 org.hibernate.validator.internal.engine.ConfigurationImpl。 buildValidatorFactory(ConfigurationImpl.java:217) 在 javax.validation.Validation.buildDefaultValidatorFactory(Validation.java:111) 在 com.vaadin.data.validator.BeanValidator.getJavaxBeanValidatorFactory(BeanValidator.java:167) 在 com.vaadin.data.validator .BeanValidator.getJavaxBeanValidator(BeanValidator.java:182) 在 com.vaadin.data.validator.BeanValidator.validate(BeanValidator.java:115) 在 com.vaadin.ui.AbstractField。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-23T01:31:17.460

我确定您已经解决了您的问题，但是对于迟到的其他人（就像我一样）并且还使用 Vaadin 7 框架，Vaadin Bean Validator 与 Vaadin 7 不兼容，只有在他们的下载中提到的 Vaadin 6页面在这里：

[https://vaadin.com/directory#addon/vaadin-bean-validation](https://vaadin.com/directory#addon/vaadin-bean-validation)

即使在他们自己的演示（jpacontainer-addressbook-demo）中，他们也使用 pom.xml 中的 hibernate-validator：

```
 <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-validator</artifactId>
        <version>4.2.0.Final</version>
    </dependency> 
```

希望这对其他人有帮助，因为它有我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T14:31:22.843

您不需要 hibernate-validator-annotation-processor-5.0.0.Final.jar 作为运行时依赖项。这是一个开发库，有助于避免在开发过程中错误放置约束。

关于validation-api，删除*validation-api-1.0.0.GA.jar*是可行的，因为您要添加同一个库的两个不同版本。*validation-api-1.0.0.GA.jar*是 Bean Validation 1.0 的 API 版本。这与 Hibernate Validator 4.3 兼容。

*validation-api-1.1.0.Final.jar*是与 Hibernate Validator 5.x 一致的 Bean Validation 1.1 API。由于您使用后者，因此您需要 Bean Validation 1.1 API。就如此容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-13T16:35:17.533

您需要在项目中添加更多依赖项。我用这个解决了：

```
 <!--- Dependencies for validating Beans in Vaadin -->
    <dependency>
        <groupId>javax.validation</groupId>
        <artifactId>validation-api</artifactId>
        <version>1.1.0.Final</version>
    </dependency>
    <dependency>
        <groupId>org.jboss.logging</groupId>
        <artifactId>jboss-logging</artifactId>
        <version>3.2.1.Final</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <version>1.7.10</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-simple</artifactId>
        <version>1.7.10</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-validator</artifactId>
        <version>5.1.3.Final</version>
    </dependency> 
```

有了这个就绰绰有余了！您可以指定将`message`字段放在`javax.validation.constraints`符号中的消息或将国际化的消息放在项目属性中，查看`message`默认值，例如`javax.validation.constraints.Size.message`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T07:19:32.977

我相信您需要将 validation-api-1.0.0.GA.jar 添加到 WEB-INF/lib

我不知道是否有任何其他依赖项。

# php - 在 fwrite() PHP 之后创建换行符/换行符

> ID：16163167
> 
> 赞同：0
> 
> 时间：2013-04-23T07:13:45.863
> 
> 标签：php, forms, newline

您好我正在尝试编写一个编辑文本文件的 php 文件。但是，我有一组变量，每个变量都来自单独的 html 表单输入。我希望这些值中的每一个都显示在新行上。我尝试使用 PHP_EOL、“\n”和“\r\n”。下面是我的代码。我希望有人能给我指导。请注意，除了插入新行之外，一切都很顺利

```
<?php
$file="file.txt";
$fh=fopen($file , "a+");
$input1=$_POST['input1'];
$input2=$_POST['input2'];
$input3=$_POST['input3'];
fwrite($fh , $input1\. " " . $input2 . " " . $input3 . "\n");
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:17:47.450

尝试替换：

```
fwrite($fh , $input1\. " " . $input2 . " " . $input3 . "\n"); 
```

和：

```
fwrite($fh , $input1 . PHP_EOL . $input2 . PHP_EOL . $input3 . PHP_EOL); 
```

至于我，它正在工作。

# asp.net-mvc - 内联编辑网格中的 Kendo ui datepicker

> ID：16163168
> 
> 赞同：0
> 
> 时间：2013-04-23T07:13:55.527
> 
> 标签：asp.net-mvc, kendo-ui

由于我们的数据库使用的是 AUS 格式日期而不是 US 格式。

我已经在我的 cshtml 页面中添加了这个，但它不起作用，因为当它传递给控制器​​时，它仍然获得美国日期格式。请指教

```
<script type="text/javascript" src="@Url.Content("~/Scripts/kendo/cultures/kendo.culture.en-AU.min.js")" ></script>
<script>
    kendo.culture("en-AU");
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:29:54.433

我认为这是正确的。您不需要使用与客户端到服务器端相同的格式。如果它正确转换为服务器端文化，那么你就可以了。当您要在 ui 中显示日期时，剑道将格式化该值以再次纠正文化。

# windows - 如何将行/列号从 grepwin 传递给 gvim？

> ID：16163173
> 
> 赞同：0
> 
> 时间：2013-04-23T07:14:11.297
> 
> 标签：windows, vim, grep

我可以使用以下命令配置 grepwin 以启动外部文本编辑器：

```
C:\Program Files\Notepad++\notepad++.exe -n%line% %path% 
```

上面的作用是：

1.  打开记事本++
2.  从 %path% 打开文本文件
3.  转到 %line% 发生 grep 匹配的位置。

我可以用 gvim 做类似的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T11:40:11.620

这非常适合将光标定位到特定的行和列。归功于此处的相关问题：[https ://stackoverflow.com/a/3313469/234994](https://stackoverflow.com/a/3313469/234994)

`C:\path\to\gvim.exe %path% "+normal %line%G%column%|"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T07:30:46.357

据我所知，您无法轻松启动具有适当列位置的 (g)vim 。设置线路的方法是：

```
C:\path\to\gvim.exe %path% +%line% 
```

至少您可以尝试使用 -c 选项，例如

```
C:\path\to\gvim.exe %path% -c %line% -c "normal %COLUMN%l" 
```

（您没有指定 grepwin 如何指定列，所以我使用了`%COLUMN%`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T07:19:14.537

你可以试试这个命令：

```
C:\path\to\gvim.exe %path% +%line% 
```

# .net - 使用 ASP.NET MVC 4 防止 HTML 表单篡改

> ID：16163175
> 
> 赞同：1
> 
> 时间：2013-04-23T07:14:12.850
> 
> 标签：.net, asp.net-mvc, asp.net-mvc-4

我知道这个问题已经被问了很多，例如这个问题：[如何确保 HTML 表单的元素在提交之前没有被更改以在客户端进行黑客攻击？](https://stackoverflow.com/questions/1281544/how-to-make-sure-elements-of-html-form-have-not-been-changed-in-purpose-of-hacki)

现在**我正在考虑为每个 html 表单生成一个加盐哈希和，以确保表单没有被篡改**。

但在我这样做之前，是否有任何内置（ASP.NET）注释/框架可以做到这一点？我知道有`ValidateAntiForgeryToken`注释，但这是为了解决不同的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:20:05.263

为什么不使用 SSL？为每个元素生成哈希不会改变任何东西，因为黑客必须这样做。SSL 会给你更多的可能，一切都与客户端发送完全相同。当然也可以是[中间人攻击](http://en.wikipedia.org/wiki/Man-in-the-middle_attack)，但要创建起来要困难得多。

# javascript - node.js 中未找到模块错误

> ID：16163176
> 
> 赞同：16
> 
> 时间：2013-04-23T07:14:14.133
> 
> 标签：javascript, node.js

我是 node.js 的新手，这是我的第一个 node 应用程序，所以如果我问的问题很明显，请原谅。我有一个名为的文件`utils.js`，我需要在该文件中定义函数才能在`main.js`. 所以我试着给

`require(utils.js)`

但它给了我这个错误：

```
Error: Cannot find module 'utils.js'
at Function.Module._resolveFilename (module.js:338:15)
at Function.Module._load (module.js:280:25)
at Module.require (module.js:364:17)
at require (module.js:380:17) 
```

我`main.js`的低于`c:\demo\proj\src\main\main.js`和`utils.js`低于`c:\demo\proj\src\utils\utils.js`。

我尝试了以下要求组合，但仍然出现找不到模块错误：

*   `require(/proj/src/utils/utils.js`);

*   `require(/utils.js`);

*   `require(c:/demo/proj/src/utils/utils.js`);

即使我试图把它放在`node_modules`文件夹下，但仍然是同样的错误。你能指导我在这里做错了什么吗？

**编辑：**

我尝试按照@mithunsatheesh 的指出更改我的文件夹结构，如下所示：

*   项目
    *   源代码
        *   实用工具 - utils.js
*   main.js

我`require`的如下：`require('./src/utils/utils.js')`

但是当我`node main.js`仍然执行时，我遇到了以下错误：

```
Error: Cannot find module './src/utils/utils.js'
at Function.Module._resolveFilename (module.js:338:15)
at Function.Module._load (module.js:280:25)
at Module.require (module.js:364:17) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-23T07:26:10.803

根据您在问题中提到的文件夹结构，您必须尝试

```
require('../utils/utils.js') 
```

如果您的项目文件夹结构如下

*   项目
    *   源代码
        *   实用程序
            *   实用程序.js
        *   主要的
            *   main.js

你正在做`node main.js`

评论您的问题中提供的详细信息。

1.  请不要`require(c:/demo/proj/src/utils/utils.js);`在试用时使用。想象一下，如果您正在导出`proj`包含项目文件的文件夹，那么提到的 require 将是一个错误。

2.  文件夹结构也可以做成类似

    *   项目
        *   源代码
            *   实用工具 - utils.js
        *   main.js
        *   包.json

这样您就可以将主文件保存在项目文件夹的根目录中。并需要 utils.js 之类的

```
 require('./src/utils/utils.js') 
```

### 更新

从更新的错误消息中可以看出。它仍然是require中'utils.js'路径的问题。从您更新的文件夹结构中，它似乎与文件夹`main.js`处于同一级别`proj`，请参阅建议的文件夹结构`main.js`和`src`文件夹在文件夹内的同一级别`proj`。

即使这是我在您遵循一个有意义的文件夹结构时提出的建议。只需`require('../utils/utils.js')`更改您在开头提到的文件夹结构即可解决您的问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T07:15:54.550

用途：`require('./utils.js');`。这是从位于所需模块文件夹中的文件中要求模块的正确方法。

您必须提供一个相对或绝对路径，我猜`utils.js`它不在您的根目录中，所以`require('/utils.js');`不是正确的路径。

**例子：**

想象一下，您有两个文件`utils.js`并且`main.js`在同一个文件夹中。的内容`utils.js`是：

**实用程序.js**

```
exports.foo = function () {
    console.log('foo');
}; 
```

为了`foo`从`utils.js`in调用，`main.js`您应该使用：

**main.js**

```
require('./utils.js').foo(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-04-15T07:52:55.503

首先，检查您当前的文件夹。你在正确的文件夹中吗？

如果（是）那么这个答案不适合你可以离开并走得更远

如果（不确定 || 否）

```
cd "your folder name." 
node "your file name.js." 
```

# iphone - 内存管理混淆目标 C

> ID：16163178
> 
> 赞同：0
> 
> 时间：2013-04-23T07:14:16.837
> 
> 标签：iphone, ios, objective-c, ipad, xcode4

**问题 1**

```
Place *place = [[[Place alloc] initwithCoordinate:location anotationType:CSMapAnnotationTypeStart] autorealease];
place.name = name;
place.description = description;
place.strUniqueIdentity = uniqueIdentity;
NSLog(@"Unique identity %@",uniqueIdentity);

PlaceMark *marker = [[PlaceMark alloc] initWithPlace:place annotationType:MapAnnotationTypePin];
return [marker autorelease]; 
```

当我分析 xcode 4.6.2 中的代码时，它在倒数第二行显示“对象已发送 -autorelease 太多次”。我不明白为什么它会显示。

![截图 1](https://i.stack.imgur.com/4THzk.png)

**问题2：**

```
return [[[OAProblem alloc] initWithResponseBody:response] autorelease]; 
```

在这一行中，它显示“存储在'self'中的对象的潜在泄漏”。

![截图 2](https://i.stack.imgur.com/pxD9g.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T07:43:09.690

的答案`Why are you not using Arc?`完全**无效**。OP 特别询问为什么会在他自己的环境中发生这种情况。所以：

你能告诉我们你的：

```
Place *place = [[Place alloc] initwithCoordinate:location anotationType:CSMapAnnotationTypeStart]; 
```

还要使用仪器，看看您的项目是否存在问题。并非静态分析器显示的所有内容实际上都是问题。可能会出现一些误报。

所以从你的回复中你有这个：

```
 -(id)initwithCoordinate:(CLLocationCoordinate2D)coordinate anotationType:(CSMapAnnotationType)anotationType{ 
self.latitude = coordinate.latitude; 
self.longitude = coordinate.longitude; 
self.mapAnnotationType = anotationType; 
return self;
 } 
```

应该是这样的：

```
-(id)initwithCoordinate:(CLLocationCoordinate2D)coordinate anotationType:(CSMapAnnotationType)anotationType{
    if (self = [super init])
    {
        self.latitude = coordinate.latitude;
        self.longitude = coordinate.longitude;
        self.mapAnnotationType = anotationType;
    }
        return self;
} 
```

这就是为什么他抱怨保留计数 == 0 的对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T07:55:56.940

您会收到警告，因为 of 的拼写`initwithCoordinate`错误。根据 Cocoa 命名约定，它应该是`initWithCoordinate`（大写 W）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-17T11:34:41.827

Xcode 对 OAProblem.c 的分析器警告非常无用。

真正有问题的代码在 init 方法中。警告（在这种情况下）意味着“一个 init 方法返回 nil 而不释放由 alloc 分配的对象”。解决方法是`[self release]`在两个失败路径中添加一个：

```
- (id)initWithProblem:(NSString *) aProblem
{
    NSUInteger idx = [[OAProblem validProblems] indexOfObject:aProblem];
    if (idx == NSNotFound) {
        [self release]; // <-- Add this line to fix the warning
        return nil;
    }

    return [self initWithPointer: [[OAProblem validProblems] objectAtIndex:idx]];
} 
```

和同样的`initWithResponseBody`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T07:32:57.303

```
Place *place = [[Place alloc] initwithCoordinate:location anotationType:CSMapAnnotationTypeStart];
place.name = name;
place.description = description;
place.strUniqueIdentity = uniqueIdentity;
NSLog(@"Unique identity %@",uniqueIdentity);

PlaceMark *marker = [[PlaceMark alloc] initWithPlace:place    annotationType:MapAnnotationTypePin];
[place release];//I think you are release place object, cause of memory leak
return [marker autorelease]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T08:47:13.020

**我的问题第一部分的答案是初始化方法中的小“w”**

```
-initwithCoordinate: anotationType: 
```

根据 Cocoa 命名约定，我必须使用大写字母“W”。

我将初始化方法替换为

```
-initWithCoordinate: anotationType: 
```

**我的问题的第二部分的答案是在两个失败路径中添加一个 [self release]**

Xcode 对 OAProblem.c 的分析器警告非常无用。

真正有问题的代码在 init 方法中。警告（在这种情况下）意味着“一个 init 方法返回 nil 而不释放由 alloc 分配的对象”。修复方法是在两个失败路径中添加 [self release]：

```
- (id)initWithProblem:(NSString *) aProblem
{
    NSUInteger idx = [[OAProblem validProblems] indexOfObject:aProblem];
    if (idx == NSNotFound) {
        [self release]; // <-- Add this line to fix the warning
        return nil;
    }

    return [self initWithPointer: [[OAProblem validProblems] objectAtIndex:idx]];
} 
```

和 initWithResponseBody 一样。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-04-23T07:30:33.377

更好的解决方案是将您的应用程序转换为 ARC（自动引用计数）。它可能会占用内存问题。

把你的xcode项目编辑>重构>转换为目标C ARC>确定

# html - 需要在警报框中获取音频计时

> ID：16163179
> 
> 赞同：1
> 
> 时间：2013-04-23T07:14:16.850
> 
> 标签：html

```
<audio id="audio1" controls>
   <source src="audio/audio2.mp3" type="audio/mpeg">
   <source src="audio/audio2.ogg" type="audio/ogg">
 <embed height="50" width="100" src="audio/audio2.mp3"> 
```

我只想获得 1.Duration 的音频文件。2.按暂停时音频文件的时间..

请用javascript或jquery告诉我答案

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:07:31.900

使用 jQuery：

1.  使用音频元素的[loadedmetadata](https://stackoverflow.com/a/13114094/897326)或[canplay](https://stackoverflow.com/a/12298062/897326)事件。
2.  使用音频元素的[timeupdate](https://stackoverflow.com/a/10381794/897326)事件。

# ruby-on-rails-3 - Rails：无法从 Facebook 对您进行身份验证，因为“凭据无效”

> ID：16163183
> 
> 赞同：2
> 
> 时间：2013-04-23T07:14:40.383
> 
> 标签：ruby-on-rails-3, omniauth

[我使用https://github.com/plataformatec/devise/wiki/OmniAuth%3a-Overview](https://github.com/plataformatec/devise/wiki/OmniAuth%3a-Overview)集成了omniauth-facebook 。但我收到以下错误：

```
Could not authenticate you from Facebook because "Invalid credentials". 
```

我已经安装了设计。当我点击 facebook 登录链接时，它会将我重定向到 facebook 登录。当我输入我的详细信息时，它会返回设计符号并给出上述错误。[我在https://github.com/plataformatec/devise/wiki/OmniAuth%3a-Overview](https://github.com/plataformatec/devise/wiki/OmniAuth%3a-Overview)上检查了“无效凭据”的解决方案，并且我的应用程序的标头设置为 App Type = Web。不明白为什么它不起作用。

我的应用程序也已上线，但尚未获得 facebook 的批准。但我认为这与此错误无关。以下是我为omniauth-facebook 所做的事情：

Gemfile 包含：

```
gem 'omniauth'
gem 'omniauth-facebook', '1.4.0' 
```

在用户模型中，添加：

```
devise :omniauthable, :omniauth_providers => [:facebook]
attr_accessible :provider, :uid

  def self.find_for_facebook_oauth(auth, signed_in_resource=nil)
    user = User.where(:provider => auth.provider, :uid => auth.uid).first
    unless user
    user = User.create(name:auth.extra.raw_info.name,
                       provider:auth.provider,
                       uid:auth.uid,
                       email:auth.info.email,
                       password:Devise.friendly_token[0,20]
                      )
   end
 user
 end 
```

设计.rb

```
require "omniauth-facebook"
config.omniauth :facebook, "APP_ID", "APP_SECRET", :scope => "offline_access, email" 
```

facebook登录链接：

```
<%= link_to "Sign in with Facebook", user_omniauth_authorize_path(:facebook) %> 
```

路线.rb：

devise_for :user, :controllers => { :omniauth_callbacks => "omniauth_callbacks" }

Omniauth 控制器：

```
class Users::OmniauthCallbacksController < Devise::OmniauthCallbacksController
  def facebook
    @user = User.find_for_facebook_oauth(request.env["omniauth.auth"], current_user)
    if @user.persisted?
      sign_in_and_redirect @user, :event => :authentication #this will throw if @user is not activated
      set_flash_message(:notice, :success, :kind => "Facebook") if is_navigational_format?
    else
      session["devise.facebook_data"] = request.env["omniauth.auth"]
      redirect_to new_user_registration_url
    end
   end
 end 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:19:28.387

尝试清除您的浏览器 cookie。有时，omniauth 无法正常工作，因为您必须删除浏览器 cookie。

另一件事可能是版本不正确。

> 问题似乎是依赖关系。在 1.4.0 它需要omniauth-oauth2 1.0.3，在1.4.1 它需要omniauth-oauth 1.1.x

如此处所示：[https ://github.com/intridea/omniauth/issues/276](https://github.com/intridea/omniauth/issues/276)

# c# - SQLDataReader getOrdinal() 导致 IndexOutOfRangeException

> ID：16163188
> 
> 赞同：1
> 
> 时间：2013-04-23T07:14:53.217
> 
> 标签：c#, sql, unit-testing, ado.net

`System.IndexOutOfRangeException`打电话时我有一个at`SqlDataReader.GetOrdinal()`

我知道发生这种情况是因为存储过程结果集中没有这样的列。

我知道这可能是一些 Microsoft ado.net 错误。在这种情况下，这就像 1%。我没有使用 SQL Server 的速成版。

你知道我怎样才能重现它吗？我应该在 C# 中做什么，这样我才能在我的测试用例中得到 1%？

# jquery - 如何使用 jquery 基于单击上面的链接/按钮淡入不同的选择字段属性

> ID：16163193
> 
> 赞同：0
> 
> 时间：2013-04-23T07:15:07.393
> 
> 标签：jquery, ruby-on-rails, forms, dynamic

```
 = simple_form_for @item, :controller => "items", :action => "new", do |f|
  = render 'shared/messages', :object => @item

    fieldset
    legend Create Item
    h5 What are you listing?
    a.dress dress
    a.bottoms bottoms
    a.tops tops
    span#dresses style="display:none;"
        # if dress is clicked, then the f.select values different values. 
        # example values would be "green, white"
    span#bottoms style="display:none;"
        # if bottom is clicked, then the f.select values different values. 
        # example values would be "pink, orange"
    span#tops style="display:none;"
        # if tops is clicked, then the f.select values different values. 
        # example values would be "aqua, blank"

    f.select :color, "select values based on clicked above" 
```

我的最终目标是，当我单击“dress”时，jquery 将更新值属性，用于选择：color，因为每个都会不同。上面单击的每个链接都会为 :color 选择字段流行一组不同的选择值。

很难找到一种优雅的方式来处理这个问题。

谢谢

# asp.net-mvc - MVC 单元测试用例

> ID：16163198
> 
> 赞同：-5
> 
> 时间：2013-04-23T07:15:20.393
> 
> 标签：asp.net-mvc

我的控制器方法中有以下行：

```
string str = HttpContext.ApplicationInstance.Session["String"].ToString(); 
```

在运行单元测试用例的 MVC 中，我必须模拟 Session 值，任何人都可以告诉我该怎么做吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T15:41:47.687

[这会帮助你](http://stephenwalther.com/archive/2008/07/01/asp-net-mvc-tip-12-faking-the-controller-context.aspx)——这会帮助你

# google-maps - 在 J2ME 应用程序的 Google 地图中显示片段

> ID：16163203
> 
> 赞同：0
> 
> 时间：2013-04-23T07:15:52.940
> 
> 标签：google-maps, java-me, rich-snippets

我使用以下网址访问了 J2ME 中的谷歌地图：

字符串 url = " [http://maps.google.com/maps/api/staticmap?center=](http://maps.google.com/maps/api/staticmap?center=) "+lat+","+lon+"&zoom="+zoom+"&size=" + width + "x" + height+"&maptype =路线图"+"&标记=颜色：红色|标签：A|" + lat + "," + lon+"&sensor=true";

我想使用这个 url 显示 Snippet。

请让我知道在 url 中的何处放置代码段以及它的 url 代码是什么？

亲切的问候，

帕尔马南

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T09:48:00.937

您可以使用如下代码下载图像：

```
 private Image getImage(String url) {
        ContentConnection c = null;
        DataInputStream dis = null;
        try {
            try {
                c = (ContentConnection) Connector.open(url);
                int len = (int) c.getLength();
                dis = c.openDataInputStream();
                if (len > 0) {
                    byte[] data = new byte[len];
                    dis.readFully(data);
                    im = Image.createImage(data, 0, data.length);
                }
            } catch (IOException ioe) {
                // Failed to read the url. Can't do anything about it, just don't
                // update the image.
            } finally {
                // Regardless of whether we are successful, we need to close
                // Connections behind us. Basic Housekeeping.
                if (dis != null) {
                    dis.close();
                }
                if (c != null) {
                    c.close();
                }
            }
        } catch (IOException ioe) {
            // closure of connections may fail, nothing we can do about it.
        }
    } 
```

`Image`可以显示为`Form`例如`ImageItem`：

```
 ImageItem imgItem = 
         new ImageItem("Default: ",  getImage(url),     
                       Item.LAYOUT_CENTER, null,    
                       Item.BUTTON); 
```

顺便说一句，上面的代码片段应该只用于**单个**静态地图图像 - 不要试图覆盖`Canvas.paint()`并使用它来动态更新地图 - 这样做所需的数据流量[非常低效](http://www.developer.nokia.com/Community/Wiki/Using_the_RESTful_Map_API_with_Java_ME#Comparision_of_Network_traffic_generated_by_the_RESTful_Map_API_and_Maps_API_for_Java_ME)，并且可以使用替代解决方案（如[这里](https://stackoverflow.com/questions/17080047/access-google-maps-api-in-nokia-series-40)问题中所述）。

# c# - 对话框确认 Jquery Ui：调用 VB 或 C# 方法

> ID：16163208
> 
> 赞同：2
> 
> 时间：2013-04-23T07:16:12.097
> 
> 标签：c#, jquery, asp.net, vb.net, jquery-ui

我正在尝试从对话框确认 Jquery UI 调用 VB 方法。问题是 chrome 从服务器显示 500 错误。我究竟做错了什么？

谢谢

客户端：

```
<script>

      function asyncServerCall(userid) {
          jQuery.ajax({
              url: 'WebForm2.aspx/GetData',
              type: "POST",
              data: "{'userid':" + userid + "}",
              contentType: "application/json; charset=utf-8",
              dataType: "json",
              success: function (data) {
                  alert(data.d);
              }

          });
      }

      $(function () {
          $("#dialog-confirm").dialog({
              resizable: false,
              height: 250,
              modal: true,
              buttons: {
                  "Delete all items": function () {

                      asyncServerCall("test");

                      $(this).dialog("close");
                  },
                  Cancel: function () {
                      $(this).dialog("close");
                  }
              }
          });
      });
  </script> 
```

服务器端

```
<WebMethod()> _
    Public Shared Function GetData(userid As String) As String
        'You can do database operations here if required

        Return "my userid is" & userid.ToString()
    End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:37:33.010

您是否启用/将此属性添加到您的班级？

// 要允许使用 ASP.NET AJAX 从脚本调用此 Web 服务，请取消注释以下行。[System.Web.Script.Services.ScriptService]

# android - Android - 样式搜索栏

> ID：16163215
> 
> 赞同：252
> 
> 时间：2013-04-23T07:16:49.347
> 
> 标签：android, android-seekbar, custom-selectors, android-slider

我想设计一个搜索栏，如下图所示。

![在此处输入图像描述](https://i.stack.imgur.com/jsisv.jpg)

通过使用默认搜索栏，我会得到这样的东西：

![在此处输入图像描述](https://i.stack.imgur.com/AEvnf.png)

所以我需要的是只改变颜色。我不需要额外的样式。是否有任何直接的方法可以做到这一点，或者我应该构建我的自定义可绘制对象。？

我尝试构建自定义一个，但我无法获得如上所示的确切一个。使用自定义drawable后，我得到如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/f1NBc.png)

如果我需要构建自定义的，那么请建议如何减少进度线的宽度以及形状。

我的自定义实现：

background_fill.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" >

    <gradient
        android:angle="90"
        android:centerColor="#FF555555"
        android:endColor="#FF555555"
        android:startColor="#FF555555" />

    <corners android:radius="1dp" />

    <stroke
        android:width="1dp"
        android:color="#50999999" />
    <stroke
        android:width="1dp"
        android:color="#70555555" />

</shape> 
```

进度填充.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" >

    <gradient
        android:angle="90"
        android:centerColor="#FFB80000"
        android:endColor="#FFFF4400"
        android:startColor="#FF470000" />

    <corners android:radius="1dp" />

    <stroke
        android:width="1dp"
        android:color="#50999999" />
    <stroke
        android:width="1dp"
        android:color="#70555555" />

</shape> 
```

进度.xml

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:id="@android:id/background"
        android:drawable="@drawable/background_fill"/>
    <item android:id="@android:id/progress">
        <clip android:drawable="@drawable/progress_fill" />
    </item>

</layer-list> 
```

拇指.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="oval" >

    <gradient
        android:angle="270"
        android:endColor="#E5492A"
        android:startColor="#E5492A" />

    <size
        android:height="20dp"
        android:width="20dp" />

</shape> 
```

搜索栏：

```
<SeekBar
        android:id="@+id/seekBarDistance"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginTop="88dp"
        android:progressDrawable="@drawable/progress"
        android:thumb="@drawable/thumb" >
    </SeekBar> 
```

* * *

## 回答 #1

> 赞同：309
> 
> 时间：2013-04-23T09:15:51.897

我将从 Android 源代码中提取可绘制对象和 xml，并将其颜色更改为红色。这是我如何为 mdpi drawables 完成此操作的示例：

自定义`red_scrubber_control.xml`（添加到 res/drawable）：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@drawable/red_scrubber_control_disabled_holo" android:state_enabled="false"/>
    <item android:drawable="@drawable/red_scrubber_control_pressed_holo" android:state_pressed="true"/>
    <item android:drawable="@drawable/red_scrubber_control_focused_holo" android:state_selected="true"/>
    <item android:drawable="@drawable/red_scrubber_control_normal_holo"/>
</selector> 
```

风俗：`red_scrubber_progress.xml`

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:id="@android:id/background"
        android:drawable="@drawable/red_scrubber_track_holo_light"/>
    <item android:id="@android:id/secondaryProgress">
        <scale
            android:drawable="@drawable/red_scrubber_secondary_holo"
            android:scaleWidth="100%" />
    </item>
    <item android:id="@android:id/progress">
        <scale
            android:drawable="@drawable/red_scrubber_primary_holo"
            android:scaleWidth="100%" />
    </item>

</layer-list> 
```

然后从 Android 源代码中复制所需的可绘制对象，我[从这个链接中获取](https://github.com/android/platform_frameworks_base/tree/ics-factoryrom-2-release/core/res/res)

最好为每个 hdpi、mdpi、xhdpi 复制这些可绘制对象。例如我只使用 mdpi：

然后使用 Photoshop 将颜色从蓝色变为红色：

red_scrubber_control_disabled_holo.png： ![red_scrubber_control_disabled_holo](https://i.stack.imgur.com/9bH20.png)

red_scrubber_control_focused_holo.png： ![red_scrubber_control_focused_holo](https://i.stack.imgur.com/DfM9E.png)

red_scrubber_control_normal_holo.png： ![red_scrubber_control_normal_holo](https://i.stack.imgur.com/IbHRI.png)

red_scrubber_control_pressed_holo.png： ![red_scrubber_control_pressed_holo](https://i.stack.imgur.com/rdkiB.png)

red_scrubber_primary_holo.9.png： ![red_scrubber_primary_holo.9](https://i.stack.imgur.com/rwgY8.png)

red_scrubber_secondary_holo.9.png： ![red_scrubber_secondary_holo.9](https://i.stack.imgur.com/LD36o.png)

red_scrubber_track_holo_light.9.png： ![red_scrubber_track_holo_light.9](https://i.stack.imgur.com/zQa0h.png)

将 SeekBar 添加到布局中：

```
<SeekBar
    android:id="@+id/seekBar1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:progressDrawable="@drawable/red_scrubber_progress"
    android:thumb="@drawable/red_scrubber_control" /> 
```

结果：

![在此处输入图像描述](https://i.stack.imgur.com/jLV2p.png)

* * *

## 回答 #2

> 赞同：101
> 
> 时间：2017-09-25T13:15:59.460

Android seekbar 自定义材质样式，用于其他 seekbar 自定义[http://www.zoftino.com/android-seekbar-and-custom-seekbar-examples](http://www.zoftino.com/android-seekbar-and-custom-seekbar-examples)

```
<style name="MySeekBar" parent="Widget.AppCompat.SeekBar">
    <item name="android:progressBackgroundTint">#f4511e</item>
    <item name="android:progressTint">#388e3c</item>
    <item name="android:thumbTint">#c51162</item>
</style> 
```

[![seekbar 自定义材质样式](https://i.stack.imgur.com/Pp6qi.png)](https://i.stack.imgur.com/Pp6qi.png)

更新：`colorControlActivated`是`thumbTint`现在。

* * *

## 回答 #3

> 赞同：74
> 
> 时间：2015-12-09T17:55:58.427

我的答案灵感来自 Andras Balázs Lajtha 的答案，它允许在没有 xml 文件的情况下工作

```
seekBar.getProgressDrawable().setColorFilter(Color.RED, PorterDuff.Mode.SRC_IN);
seekBar.getThumb().setColorFilter(Color.RED, PorterDuff.Mode.SRC_IN); 
```

* * *

## 回答 #4

> 赞同：61
> 
> 时间：2013-08-24T05:26:44.563

如果您想要完全相同但为红色的条形，您可以通过编程方式添加 PorterDuff 滤色器。[您可以通过ProgressBar](http://developer.android.com/reference/android/widget/ProgressBar.html)基类的方法获取要着色的每个可绘制对象。然后为它设置一个[滤色器](http://developer.android.com/reference/android/graphics/PorterDuffColorFilter.html)。

```
mySeekBar.getProgressDrawable().setColorFilter(new PorterDuffColorFilter(srcColor, PorterDuff.Mode.MULTIPLY)); 
```

如果无法通过 Porter Duff 滤镜进行所需的颜色调整，您可以[指定自己的颜色滤镜](https://stackoverflow.com/questions/4354939/understanding-the-use-of-colormatrix-and-colormatrixcolorfilter-to-modify-a-draw)。

* * *

## 回答 #5

> 赞同：46
> 
> 时间：2014-12-02T20:54:38.923

谷歌在 SDK 21 中使这更容易。现在我们有用于指定拇指色调颜色的属性：

```
android:thumbTint
android:thumbTintMode
android:progressTint 
```

[http://developer.android.com/reference/android/widget/AbsSeekBar.html#attr_android:thumbTint](http://developer.android.com/reference/android/widget/AbsSeekBar.html#attr_android:thumbTint) [http://developer.android.com/reference/android/widget/AbsSeekBar.html#attr_android:thumbTintMode](http://developer.android.com/reference/android/widget/AbsSeekBar.html#attr_android:thumbTintMode)

* * *

## 回答 #6

> 赞同：43
> 
> 时间：2014-11-20T09:01:10.970

只需用您的颜色替换颜色属性

背景.xml

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="line">

    <stroke android:width="1dp" android:color="#D9D9D9"/>
    <corners android:radius="1dp" />

</shape> 
```

进度.xml

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
     android:shape="line">

    <stroke android:width="1dp" android:color="#2EA5DE"/>
    <corners android:radius="1dp" />

</shape> 
```

样式.xml

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:id="@android:id/background"
        android:drawable="@drawable/seekbar_background"/>
    <item android:id="@android:id/progress">
        <clip android:drawable="@drawable/seekbar_progress" />
    </item>

</layer-list> 
```

拇指.xml

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="oval">

    <size android:height="30dp" android:width="30dp"/>
    <stroke android:width="18dp" android:color="#882EA5DE"/>
    <solid android:color="#2EA5DE" />
    <corners android:radius="1dp" />

</shape> 
```

* * *

## 回答 #7

> 赞同：23
> 
> 时间：2019-03-07T13:10:09.707

所有这些答案都已弃用。

在 2019 年，将您的搜索栏更改为您喜欢的颜色会更`ProgressBar`容易

```
<SeekBar
            android:id="@+id/seekBar"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:progressTint="#36970f"
            android:thumbTint="#36970f"
            /> 
```

以编程方式设置搜索栏颜色的样式尝试以下代码

```
 seekBar.getProgressDrawable().setColorFilter(Color.RED, PorterDuff.Mode.SRC_IN);
        seekBar.getThumb().setColorFilter(Color.RED, PorterDuff.Mode.SRC_IN); 
```

* * *

## 回答 #8

> 赞同：14
> 
> 时间：2019-05-24T12:41:17.740

对于 API < 21（和 >= 21），您可以使用[@Ahamadullah Saikat](https://stackoverflow.com/a/50074961/2914140)或[https://www.lvguowei.me/post/customize-android-seekbar-color/](https://www.lvguowei.me/post/customize-android-seekbar-color/)的答案。

[![在此处输入图像描述](https://i.stack.imgur.com/WyGdq.png)](https://i.stack.imgur.com/WyGdq.png)

```
<SeekBar
    android:id="@+id/seekBar"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:maxHeight="3dp"
    android:minHeight="3dp"
    android:progress="50"
    android:progressDrawable="@drawable/seek_bar_ruler"
    android:thumb="@drawable/seek_bar_slider"
    /> 
```

可绘制/seek_bar_ruler.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@android:id/background">
        <shape android:shape="rectangle">
            <solid
                android:color="#94A3B3" />
            <corners android:radius="2dp" />
        </shape>
    </item>
    <item android:id="@android:id/progress">
        <clip>
            <shape android:shape="rectangle">
                <solid
                    android:color="#18244D" />
                <corners android:radius="2dp" />
            </shape>
        </clip>
    </item>
</layer-list> 
```

可绘制/seek_bar_slider.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="oval"
    >

    <solid android:color="#FFFFFF" />
    <stroke
        android:width="4dp"
        android:color="#18244D"
        />
    <size
        android:width="25dp"
        android:height="25dp"
        />
</shape> 
```

* * *

## 回答 #9

> 赞同：13
> 
> 时间：2013-09-05T09:37:39.873

刚设置

```
android:maxHeight="3dp"
android:minHeight="3dp" 
```

就这样

* * *

## 回答 #10

> 赞同：13
> 
> 时间：2018-04-28T09:27:23.113

输出：

[![在此处输入图像描述](https://i.stack.imgur.com/nqGT0.png)](https://i.stack.imgur.com/nqGT0.png)

更改进度颜色：

```
int normalColor = ContextCompat.getColor(context, R.color.normal_color);
int selectedColor = ContextCompat.getColor(context, R.color.selected_color);
Drawable normalDrawable = new ColorDrawable(normalColor);
Drawable selectedDrawable = new ColorDrawable(selectedColor);
ClipDrawable clipDrawable = new ClipDrawable(selectedDrawable, Gravity.LEFT, ClipDrawable.HORIZONTAL);
Drawable[] layers = {normalDrawable, clipDrawable, clipDrawable};
LayerDrawable seekbarDrawable = new LayerDrawable(layers);
seekBar.setProgressDrawable(seekbarDrawable); 
```

更改拇指颜色：

```
int thumbColor = ContextCompat.getColor(context, R.color.thumb_color);
Drawable unwrappedDrawable = AppCompatResources.getDrawable(context, R.drawable.ic_seekbar_thumb);
assert unwrappedDrawable != null;
Drawable wrappedDrawable = DrawableCompat.wrap(unwrappedDrawable);
DrawableCompat.setTint(wrappedDrawable, thumbColor);
seekBar.setThumb(wrappedDrawable); 
```

* * *

## 回答 #11

> 赞同：12
> 
> 时间：2015-04-25T01:43:29.883

如上所述（@andrew），使用此站点创建自定义 SeekBar 非常容易 - [http://android-holo-colors.com/](http://android-holo-colors.com/)

只需在此处启用 SeekBar，选择颜色，然后接收所有资源并复制到项目。然后在xml中应用它们，例如：

```
 android:thumb="@drawable/apptheme_scrubber_control_selector_holo_light"
  android:progressDrawable="@drawable/apptheme_scrubber_progress_horizontal_holo_light" 
```

* * *

## 回答 #12

> 赞同：11
> 
> 时间：2014-12-19T11:30:47.130

```
<SeekBar
android:id="@+id/seekBar1"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:layout_gravity="center"
android:progressTint="@color/red"
android:thumbTint="@color/red" /> 
```

工作方式与选择的答案相同。无需制作任何可绘制文件或其他。（仅限 IN 5.0）问候

* * *

## 回答 #13

> 赞同：8
> 
> 时间：2017-03-23T08:38:56.743

```
LayerDrawable progressDrawable = (LayerDrawable) mSeekBar.getProgressDrawable();

// progress bar line *progress* color
Drawable processDrawable = progressDrawable.findDrawableByLayerId(android.R.id.progress);

// progress bar line *background* color
Drawable backgroundDrawable = progressDrawable.findDrawableByLayerId(android.R.id.background);

// progress bar line *secondaryProgress* color
Drawable secondaryProgressDrawable = progressDrawable.findDrawableByLayerId(android.R.id.secondaryProgress);
processDrawable.setColorFilter(Color.RED, PorterDuff.Mode.SRC_IN);

// progress bar line all color
mSeekBar.getProgressDrawable().setColorFilter(Color.BLUE, PorterDuff.Mode.SRC_IN);

// progress circle color
mSeekBar.getThumb().setColorFilter(Color.GREEN, PorterDuff.Mode.SRC_IN); 
```

* * *

## 回答 #14

> 赞同：6
> 
> 时间：2015-09-28T16:54:25.897

默认情况下，android 会将滑块的进度颜色与

```
`<item name="colorAccent">` 
```

您的**styles.xml**中的值。然后，要设置自定义滑块缩略图，只需在**SeekBar** xml 布局的块中使用此代码：

```
android:thumb="@drawable/slider" 
```

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2015-10-24T14:38:00.063

如果您使用的是 android Sdk 提供的默认 SeekBar，那么它们是一种更改其颜色的简单方法。只需转到 /res/values/colors.xml 中的 color.xml 并更改 colorAccent。

```
<resources>
    <color name="colorPrimary">#212121</color>
    <color name="colorPrimaryDark">#1e1d1d</color>
     <!-- change below line -->
    <color name="colorAccent">#FF4081</color>
</resources> 
```

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2017-02-14T06:06:12.277

更改搜索栏颜色的简单方法...

```
 <ProgressBar
            android:id="@+id/progress"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:theme="@style/Progress_color"/> 
```

风格 : Progress_color

```
 <style name="Progress_color">
    <item name="colorAccent">@color/white</item> <!-- Whatever color you want-->
</style> 
```

java类更改ProgressDrawable()

```
seek_bar.getProgressDrawable().setColorFilter(getResources().getColor(R.color.white), PorterDuff.Mode.MULTIPLY); 
```

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2015-02-25T00:17:36.333

我改变`background_fill.xml`

```
<?xml version="1.0" encoding="UTF-8"?>
  <shape xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="line" >
<size android:height="1dp" />
<gradient
    android:angle="0"
    android:centerColor="#616161"
    android:endColor="#616161"
    android:startColor="#616161" />
<corners android:radius="0dp" />
<stroke
    android:width="1dp"
    android:color="#616161" />
<stroke
    android:width="1dp"
    android:color="#616161" />
</shape> 
```

和`progress_fill.xml`

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="line" >
<size android:height="1dp" />
<gradient
    android:angle="0"
    android:centerColor="#fafafa"
    android:endColor="#fafafa"
    android:startColor="#fafafa" />
<corners android:radius="1dp" />
<stroke
    android:width="1dp"
    android:color="#cccccc" />
<stroke
    android:width="1dp"
    android:color="#cccccc" />
 </shape> 
```

制作背景和进度`1dp`高度。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2013-04-23T08:17:02.823

如果您查看 Android 资源，搜索栏实际上使用图像。

您必须制作一个在顶部和底部透明的可绘制对象，例如 10px 并且中心 5px 线可见。

参考附图。您需要将其转换为 NinePatch。

![在此处输入图像描述](https://i.stack.imgur.com/RRhno.png)

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2019-10-21T22:59:21.803

使用材料组件库 1.2.0 版，您可以使用新[**`Slider`**](https://github.com/material-components/material-components-android/blob/master/docs/components/Slider.md)组件。

```
 <com.google.android.material.slider.Slider
       android:valueFrom="0"
       android:valueTo="300"
       android:value="200"
       android:theme="@style/slider_red"
       /> 
```

您可以使用以下内容覆盖默认颜色：

```
 <style name="slider_red">
    <item name="colorPrimary">#......</item>
  </style> 
```

[![在此处输入图像描述](https://i.stack.imgur.com/PN8rw.png)](https://i.stack.imgur.com/PN8rw.png)

否则，您可以在布局中使用这些属性来定义颜色或颜色选择器：

```
 <com.google.android.material.slider.Slider
       app:activeTrackColor="@color/...."
       app:inactiveTrackColor="@color/...."
       app:thumbColor="@color/...."
       /> 
```

或者您可以使用自定义样式：

```
 <style name="customSlider" parent="Widget.MaterialComponents.Slider">
    <item name="activeTrackColor">@color/....</item>
    <item name="inactiveTrackColor">@color/....</item>
    <item name="thumbColor">@color/....</item>
  </style> 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2017-03-16T11:54:35.463

对于那些使用数据绑定的人：

1.  将以下静态方法添加到任何类

    ```
    @BindingAdapter("app:thumbTintCompat")
    public static void setThumbTint(SeekBar seekBar, @ColorInt int color) {
        seekBar.getThumb().setColorFilter(color, PorterDuff.Mode.SRC_IN);
    } 
    ```

2.  将`app:thumbTintCompat`属性添加到您的 SeekBar

    ```
    <SeekBar
           android:id="@+id/seek_bar"
           style="@style/Widget.AppCompat.SeekBar"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           app:thumbTintCompat="@{@android:color/white}"
    /> 
    ```

就是这样。现在您可以使用`app:thumbTintCompat`任何`SeekBar`. 可以以相同的方式配置进度色调。

**注意：**此方法也与棒棒糖前的设备兼容。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2018-05-10T21:45:47.787

@arnav-rao 对答案的小修正：

要确保拇指正确着色，请使用：

```
<style name="MySeekBar" parent="Widget.AppCompat.SeekBar">
    <item name="android:progressBackgroundTint">@color/colorBgTint</item>
    <item name="android:progressTint">@color/colorProgressTint</item>
    <item name="android:thumbTint">@color/colorThumbTint</item>
</style> 
```

这里 android:thumbTint 实际上为“拇指”着色

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2018-05-16T08:09:41.740

检查本教程非常好

[https://www.lvguowei.me/post/customize-android-seekbar-color/](https://www.lvguowei.me/post/customize-android-seekbar-color/)

简单的 ：

```
<SeekBar
                android:id="@+id/seekBar"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:max="100"
                android:maxHeight="3dp"
                android:minHeight="3dp"
                android:progressDrawable="@drawable/seekbar_style"
                android:thumbTint="@color/positive_color"/> 
```

然后是样式文件：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:id="@android:id/background">
        <shape android:shape="rectangle" >
            <solid
                android:color="@color/positive_color" />
        </shape>
    </item>
    <item android:id="@android:id/progress">
        <clip>
            <shape android:shape="rectangle" >
                <solid
                    android:color="@color/positive_color" />
            </shape>
        </clip>
    </item>
</layer-list> 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2018-11-13T16:33:32.953

我想为搜索栏创建一个样式，然后将该样式添加到主题中，以便我可以将其应用于整个主题，同时仍允许子样式覆盖它。这是我所做的：

```
<!-- Blue App Theme -->
    <style name="AppTheme.Blue" parent="BaseTheme.Blue">        
        <item name="android:seekBarStyle">@style/SeekbarStyle.Blue</item>
        <item name="seekBarStyle">@style/SeekbarStyle.Blue</item> <!--This is essential for some devices, e.g. Samsung-->
</style>

<!-- Slider Styles -->
<style name="SeekbarStyle.Blue" parent="Widget.AppCompat.SeekBar">
        <item name="android:progressBackgroundTint">@color/material_blue_a700_pct_30</item>
        <item name="android:thumbTint">@color/material_blue_a700</item>
        <item name="android:thumbTintMode">src_in</item>
        <item name="android:progressTint">@color/material_blue_a700</item>
</style>

<style name="SeekbarStyle.Green" parent="Widget.AppCompat.SeekBar">
        <item name="android:progressBackgroundTint">@color/material_green_a700_pct_30</item>
        <item name="android:thumbTint">@color/material_green_a700</item>
        <item name="android:thumbTintMode">src_in</item>
        <item name="android:progressTint">@color/material_green_a700</item>
</style> 
```

以上将所有 21 岁以上设备的 Theme seekbar 样式设置为蓝色，包括三星（除了 android:seekBarStyle 之外还需要应用 seekBarStyle；不知道为什么，但我亲眼看到了这个问题）。如果您希望所有搜索栏保持主题样式并且仅将绿色搜索栏样式应用于一些小部件，则将以下内容添加到您想要的小部件中：

```
<SeekBar
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:theme="@style/AppTheme.Green"/> 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2021-09-27T11:02:43.300

现在它变得非常容易，使用材质滑块并使用它来自定义颜色：

```
 app:thumbColor="@color/colorPrimary"
   app:trackColorInactive="@color/grey"
   app:trackColorActive="@color/colorPrimary" 
```

* * *

## 回答 #25

> 赞同：-1
> 
> 时间：2015-12-06T16:23:20.323

你也可以这样：

```
<SeekBar
    android:id="@+id/redSeekBar"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:progressDrawable="@color/red"
    android:maxHeight="3dip"/> 
```

希望它会有所帮助！

# android - 使用 GPS 找出 android 设备的速度

> ID：16163218
> 
> 赞同：0
> 
> 时间：2013-04-23T07:16:54.553
> 
> 标签：android, location

在我的应用程序中，我正在使用 Location 类的 getSpeed() 方法检索设备的速度。它以米/秒为单位给出速度。为了将此值转换为公里/小时，我将其乘以 3.6。然后将其存储在 sqlite 数据库中。但我的速度不对。前任。以 40 公里/小时的速度移动时为 580。这是我的代码：

```
 float mps = location.getSpeed();        
    float kmh = (float) (mps*3.6);
    String speed = String.valueOf(kmh);
    Toast.makeText(getBaseContext(),"speed: "+speed,Toast.LENGTH_LONG ).show(); 
```

哪里出错了。我已经为此搜索过，但可以找到相同的方法。

# ios - iOS键值编码

> ID：16163219
> 
> 赞同：7
> 
> 时间：2013-04-23T07:16:58.770
> 
> 标签：ios, coding-style, key-value, kvc

假设我们有一个 person 类型的对象，它有一个名为 name 的属性。

```
Person *p;
[p setValue:@"John" forKey:@"name"]; 
```

这非常有效。我想做的是深入挖掘。假设班级人员有另一个名为 address 的属性，它属于 Address 类，并且有一个名为 zipcode 的字段。

有没有比这更简单的方法来分配该人的邮政编码？也许更干净更清晰的东西？

```
[[p valueForKey:@"address"] setValue:@"234567" forKey:@"zipcode"]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T07:23:36.450

`keyPath`应该符合你的要求。

```
[p  setValue:@"234567" forKeyPath:@"address.zipcode"]; 
```

检查文档[NSKeyValueCoding 协议](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSKeyValueCoding_Protocol/Reference/Reference.html)和[键值编码基础](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/KeyValueCoding/Articles/BasicPrinciples.html)

# ios - 在没有任何用户输入交互的情况下接收推送消息（APN）后是否可以运行特定的块代码

> ID：16163225
> 
> 赞同：1
> 
> 时间：2013-04-23T07:17:15.953
> 
> 标签：ios

*   我想以 5 或 10 分钟的间隔连续从我的服务器获取数据。我知道 ios 不支持长时间运行的后台操作。所以我尝试使用 PUSH Notification 的其他解决方案。
*   在没有任何用户输入交互的情况下接收推送消息（APN）后是否可以运行特定的块代码？因为我需要不断地接收推送通知并存储在 Local SQlite 数据库中。然后我显示从本地数据库获取的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:22:35.823

> 在没有任何用户输入交互的情况下接收推送消息（APN）后是否可以运行特定的块代码？

不可以。用户需要明确告诉 iOS 将推送通知交给应用程序，方法是在收到推送通知时点击非取消按钮，这会导致您的应用程序启动（如果尚未运行）并进入活动状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T07:23:48.560

每当您收到来自 APNS 程序控制的推送通知时，就会`appDelegate`出现

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo 
```

在这里你可以做任何你想做的事。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T07:53:38.107

不，这是不可能的。

实际上，在后台运行任务在技术上是可行的，但这会使您的应用程序被拒绝。其他人尝试过： http: [//tapbots.com/blog/pastebot/pastebot-music-in-background](http://tapbots.com/blog/pastebot/pastebot-music-in-background)

# scala - 在播放模板中定义一个 scala 函数

> ID：16163228
> 
> 赞同：9
> 
> 时间：2013-04-23T07:17:24.387
> 
> 标签：scala, playframework, playframework-2.0

我尝试在播放视图模板中使用函数

```
@active(path: String):String = @{
       var active:String = ""
       if (request.path.startsWith(path)) {
           active = "class=\"active\""
       } 
       return active
}

<div class="container-fluid">
....
    <li @active("/page") ...> 
```

播放编译器说它找不到活动的值。这里有什么问题？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-23T08:21:29.010

尝试删除函数的返回类型并将其移动到模板的顶部。这适用于我的模板（另请参阅：[Playframework 2.0 define function in View Template](https://stackoverflow.com/questions/10467101/playframework-2-0-define-function-in-view-template)）：

```
@active(path: String) = @{
  if (request.path.startsWith(path))
    "class=\"active\""
  else
    ""
} 
```

# java - GWT 应用程序中的 Google Drive 文件共享弹出窗口

> ID：16163230
> 
> 赞同：3
> 
> 时间：2013-04-23T07:17:33.823
> 
> 标签：java, gwt, google-drive-api, google-docs

有没有一种简单的方法可以将 Google Drive 文件的共享/权限弹出对话框集成到 GWT+GAE (Java) 应用程序中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:15:19.763

Google API 有一个支持授权和身份验证的 GWT 客户端。我建议你看看它。他们没有 Drive 示例，但它类似于他们为其他 API 实现的流程。查看 G+ 示例：[https ://code.google.com/p/gwt-google-apis/source/browse/trunk/apis/samples/plus/com/google/api/gwt/samples/plus/客户端/PlusEntryPoint.java](https://code.google.com/p/gwt-google-apis/source/browse/trunk/apis/samples/plus/com/google/api/gwt/samples/plus/client/PlusEntryPoint.java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-04T16:34:22.977

是的，你可以在这里做到：

[https://google-developers.appspot.com/drive/manage-sharing#launching_the_google_drive_sharing_dialog_in_your_app](https://google-developers.appspot.com/drive/manage-sharing#launching_the_google_drive_sharing_dialog_in_your_app)

```
<script type="text/javascript">
    init = function() {
        s = new gapi.drive.share.ShareClient('<YOUR_APP_ID>');
        s.setItemIds(["<FILE_ID>"]);
    }
    window.onload = function() {
        gapi.load('drive-share', init);
    }
</script>

<button onclick="s.showSettingsDialog()">Share</button> 
```

但是，由于它似乎仅在 Javascript 中可用，因此您必须使用 GWT Native 函数[JSNI](http://www.gwtproject.org/doc/latest/DevGuideCodingBasicsJSNI.html)：

```
public static native void alert(String msg) /*-{
  $wnd.alert(msg);
}-*/; 
```

# c# - Socket.Begin* 的多个状态对象

> ID：16163244
> 
> 赞同：0
> 
> 时间：2013-04-23T07:18:02.850
> 
> 标签：c#, asynchronous

我有这堂课：

```
class NetworkManager {
    public void Connect(IPAddress address, int port, Action callback) {
        Socket socket = new Socket(...);
        socket.BeginConnect(address, port, r => EndConnect(r, socket, callback), null);
    }

    private void EndConnect(IAsyncResult r, Socket socket, Action callback) {
        //End the connection and call the callback method
    }
} 
```

这种发送多个状态对象的方法好吗？

如果我把开始放在一个循环中，我还会通过正确的套接字吗？

```
Socket socket;
for(...){
    socket = new Socket(...);
    socket.BeginConnect(address, port, r => EndConnect(r, socket, callback), null);
} 
```

我觉得应该有更正确的方法，有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:27:18.000

这将起作用，方法是创建一个捕获`socket`和`callback`. 通常，它会完成工作。但是，您**必须**了解捕获上下文的作用域规则，并知道是`socket`指每次迭代变量还是迭代之间共享的变量。为了我的钱，因此不值得在这里冒险。

但存在其他机制：

*   您可以将显式状态对象作为最后一个参数传递给`BeginConnect`，并访问为`r.AsyncState`; 这允许您重复使用单个委托实例以避免分配，但您仍然需要某种元组来包含套接字和回调

*   你可以使用`ConnectAsync`；这在重用委托和拥有状态对象（这次称为`UserToken`）方面具有相同的优势，但是您不需要打包套接字，因为它`ConnectSocket`在事件处理程序中公开为需要一个`SocketAsyncEventArgs`实例，因此它不会`BeginConnect`在分配方面为您带来太多好处，但这*确实*意味着您使用的是最新（和最有效）的 API

是否值得改变取决于它的容量有多大。

# webkit - Javafx webkit 加载 HTML 内容

> ID：16163246
> 
> 赞同：0
> 
> 时间：2013-04-23T07:18:30.030
> 
> 标签：webkit, javafx

我有一个 javafx 应用程序，它使用 webkit 加载 HTML 内容。我已经创建了一个舞台和一个场景并做`webEngine.load(html)`. 它工作正常。但是当我最小化应用程序并在一段时间后再次最大化它时，舞台显示黑屏 2-3 秒，然后再次加载 html。

我的问题是为什么会发生这种情况，我该如何避免这种情况？

谢谢，尼丁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T07:17:29.083

您正在使用非常旧的 JavaFX。您可以尝试使用最新版本 2.2.21，可以在这里找到：

[http://www.oracle.com/technetwork/java/javase/downloads/index.html](http://www.oracle.com/technetwork/java/javase/downloads/index.html)

它与 jdk 7u21 捆绑在一起，只需下载并安装 jdk 即可获得 JavaFX。

# keyboard - minix3的终端驱动keyboard.c中，为什么存在ibuf？

> ID：16163249
> 
> 赞同：0
> 
> 时间：2013-04-23T07:18:40.767
> 
> 标签：keyboard, buffer, driver, minix

《操作系统设计与组织》第 3 版，第 351 页。键盘中断服务程序是 kbd_interrupt（第 15335 行），每当按下或释放键时都会调用。它调用 scode 从键盘控制器芯片获取扫描码。...所有原始扫描代码都放置在循环缓冲区中，并引发当前控制台的 tp​​->tty _events 标志（第 15350 行）。...并且 kbd_interrupt 在此之后立即返回。... 第 13795 行的 continue 语句导致主循环的新迭代立即在第 13764 行开始。当执行转移到循环顶部时，现在发现控制台设备的 tp->tty _events 标志为set 和 kb _read（第 15360 行），特定于设备的例程，使用控制台 tty 结构的 tp->tty _devread 字段中的指针调用。

我认为 ibuf 不能有多个扫描码。所以我认为一个 char 变量就足够了。为什么会存在圆形 ibuf？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:22:30.597

我对您的问题必须是：*为什么*您认为一次只能在缓冲区中有一个扫描码？

中断与线程代码非常相似，因为您不知道代码位的执行顺序。只要按下某个键，就会触发这个特定的中断，而与其他代码当时可能或可能不做的事情无关（假设中断当然没有被禁用）。

在从缓冲区中提取扫描代码之前，您很可能会快速连续地获得两个中断。

Minix3[源代码](http://fxr.watson.org/fxr/source/drivers/tty/keyboard.c?v=minix-3-1-1)允许一个 32 字节的缓冲区，该缓冲区被认为足够大，可以处理按键被按下的速度快于提取按键的可能性。如果缓冲区填满，后续的按键操作就会丢失（键盘硬件被选通以提取键码，但不会添加到缓冲区中）。

# java - 如何直接从服务器实现搜索

> ID：16163252
> 
> 赞同：2
> 
> 时间：2013-04-23T07:18:53.933
> 
> 标签：java, android, search

我想直接从服务器上的数据中实现搜索。例如从 google.com 搜索。一个edittext，就像在谷歌的搜索栏中，edittext中的一个单词然后它会点击服务器并从该单词开始获取记录。

```
public class SearchActivity extends Activity {
TextView imeino;
Spinner select;
EditText searchby;
StringBuffer URL;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_search);
    imeino = (TextView)findViewById(R.id.getimeino);
    TelephonyManager tm = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
    String device_id = tm.getDeviceId();
    imeino.setText(device_id);
    searchby = (AutoCompleteTextView)findViewById(R.id.editText1);
     //this is a spinner if i choose mobile from this then edittext only takes numeric value.and if a select name then it takes alphabets.
    select = (Spinner)findViewById(R.id.spinner1);
    select.setOnItemSelectedListener(new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> arg0, View arg1,
                int arg2, long arg3) {
            if(select.getSelectedItem().toString().equals("Mobile"))
            {
                searchby.setInputType(InputType.     TYPE_CLASS_PHONE|InputType.TYPE_TEXT_VARIATION_PHONETIC);

            }
            if(select.getSelectedItem().toString().equals("name"))
            {
                searchby.setInputType(InputType.   TYPE_CLASS_TEXT|InputType.TYPE_TEXT_VARIATION_PERSON_NAME);

            }
            if(select.getSelectedItem().toString().equals("Address"))
            {
                searchby.setInputType(InputType. TYPE_CLASS_TEXT|InputType.TYPE_TEXT_VARIATION_POSTAL_ADDRESS);

            }

        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {

        }
    });
this is my edittext in which i have to search for data

    searchby.addTextChangedListener(new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {
            searchby = (AutoCompleteTextView)findViewById(R.id.editText1);
            String getitemforsearch = searchby.getText().toString();
            SearchFromCustomerData(getitemforsearch);               
            }

        public void SearchFromCustomerData(String getitemforsearch) {
            String searchType= new String();
            if(select.getSelectedItem().toString().equals("Mobile"))
                {
                    searchType= "CustomerMobile";                       
                }
                if(select.getSelectedItem().toString().equals("Address"))
                {           
                    searchType= "CustomerAddress";                      
                }
                if(select.getSelectedItem().toString().equals("name"))
                {
                    searchType= "CustomerName";
                } 
```

这是我访问网络服务的网址，它将显示选项

```
URL = new     StringBuffer("?"+searchType+"=" +     getitemforsearch+"&searchType="+searchType);
                    try {
                        URL sever = new URL(URL.toString());
                        System.out.println(URL.toString());
                        URLConnection yc = sever.openConnection();
                        InputStream in = yc.getInputStream(); // Get the data in the entity
                        InputStreamReader is = new InputStreamReader(in);
                        StringBuilder sb = new StringBuilder();
                        BufferedReader br = new BufferedReader(is);
                        String read = br.readLine();
                        while (read != null) {
                                sb.append(read);
                                read = br.readLine();
                        }
                        JSONObject jsonObject = new JSONObject(sb.toString());
                        JSONArray resultArray = jsonObject.getJSONArray("Customer");
                        System.out.println(" Length :" + resultArray.length());
                        String[] CustomerCode = new String[resultArray.length()];
                        String[] CustomerName = new String[resultArray.length()];
                        String[] CustomerEmail = new String[resultArray.length()];
                        String[] CustomerMobile = new String[resultArray.length()];
                        String[] Customeraddress = new String[resultArray.length()];
                        for (int i = 0; i < resultArray.length(); i++) {
                            JSONObject object = (JSONObject) resultArray.get(i);
                            System.out.println("true");
                       CustomerCode[i] = object.getString("CustomerCode") == null ? "" :    object.getString("CustomerCode");
                       CustomerName[i] = object.getString("CustomerName") == null ? "" : object.getString("CustomerName");
                       CustomerEmail[i] = object.getString("CustomerEmailId") == null ? "" : object.getString("CustomerEmailId");
                       CustomerMobile[i] = object.getString("CustomerMobile") == null ? "" : object.getString("CustomerMobile");
                       Customeraddress[i] = object.getString("CustomerAddress") == null ? "" : object.getString("CustomerAddress");                                            
                        }                      
                                }
             catch (Exception e) {
            }
            }

            @Override
            public void beforeTextChanged(CharSequence s, int start, int count,
                    int after) {
            }

            @Override
            public void afterTextChanged(Editable s) {
            }
        });
    }
    } 
```

这是我的布局文件..

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".SearchActivity" >

<TextView
    android:id="@+id/getimeino"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="20dp"
    android:hint="ImEiNo..." />

<Spinner
    android:id="@+id/spinner1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/getimeino"
    android:layout_marginTop="30dp"
    android:entries="@array/process_arrays"
    android:prompt="@string/process_prompt" />

<EditText
    android:id="@+id/editText1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/getimeino"
    android:layout_centerHorizontal="true"
    android:ems="10" >

    <requestFocus />
 </EditText>

</RelativeLayout> 
```

# wordpress - 如何阻止 buddypress 和 wordpress 网站中的垃圾邮件用户注册？

> ID：16163254
> 
> 赞同：-1
> 
> 时间：2013-04-23T07:18:59.110
> 
> 标签：wordpress, buddypress

我在我的网站上使用 wordpress 和 buddypress。我想在网站上添加新的用户注册功能，但我发现网站上正在进行大量注册，每分钟有 2 或 3 个用户注册。我还使用验证码来停止垃圾邮件注册，但这个垃圾邮件注册仍在进行中。

数据库中是否有任何后门条目或者这是一个buddypress问题？我该如何解决这个问题？您的帮助将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T08:48:50.307

阅读WPMU 团队的[此插件评论](http://wpmu.org/buddypress-spam/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:23:41.607

我还没有这方面的经验，因为它仍在我的待办事项列表中，但我正在考虑实施[http://www.spambotsecurity.com/zbblock.php](http://www.spambotsecurity.com/zbblock.php)以防止在我主持的论坛上出现类似的刺激行为。我看到它支持 Wordpress - 也许可以与其他 php 代码一起使用。我发现基本的验证码无效，尽管我没有调查一些最近的发展。

# c - 为 UDP 套接字的 recv fcn 设置超时

> ID：16163260
> 
> 赞同：4
> 
> 时间：2013-04-23T07:19:24.720
> 
> 标签：c, linux, sockets, udp, posix

我通过 发送一个 UDP 数据包`sendto`，然后通过 .`recv`如果`recv`没有收到回复，则程序不会继续。但是，udp包可能会丢失，或者由于某种原因，包可能没有送达，从而导致程序卡在了`recv`线上。`recv`我想知道如果没有数据包到达，例如一分钟，如何设置超时，然后跳过该行并继续代码？

我没有粘贴完整代码，因为它是通用`udp`代码，我的问题与唯一的`recv`. 最后一点，开发环境是linux。

```
unsigned long  buf[maxlen];
struct protoent *proto;     //
struct sockaddr_in server_addr;
int s;  // socket
memset( &server_addr, 0, sizeof( server_addr ));
server_addr.sin_family=AF_INET;
server_addr.sin_addr.s_addr = inet_addr(hostname);
sendto(s,msg,sizeof(msg),0,(struct sockaddr *)&server_addr,sizeof(server_addr));

recv(s,buf,sizeof(buf),0); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-02-12T18:07:39.103

如何在 Linux 中为 UDP 套接字设置超时：

```
#include <sys/time.h>

struct timeval timeout={2,0}; //set timeout for 2 seconds

/* set receive UDP message timeout */

setsockopt(fd,SOL_SOCKET,SO_RCVTIMEO,(char*)&timeout,sizeof(struct timeval));

/* Receive UDP message */
int recvlen = recvfrom(fd, buf, BUFSIZE, 0, (struct sockaddr *)&remaddr, &slen);
if (recvlen >= 0) {
    //Message Received
}
else{
    //Message Receive Timeout or other error
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-23T07:33:45.947

您可以使用`poll`or`select`或类似的东西：

```
struct pollfd fd;
int res;

fd.fd = s;
fd.events = POLLIN;
res = poll(&fd, 1, 1000); // 1000 ms timeout

if (res == 0)
{
    // timeout
}
else if (res == -1)
{
    // error
}
else
{
    // implies (fd.revents & POLLIN) != 0
    recv(s,buf,sizeof(buf),0); // we can read ...
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-23T10:36:53.900

> 我想知道如何为 recv 设置超时

`setsockopt()`使用`SO_RCVTIMEO`选项调用。

# sql - 如何在 SQL 查询的 WHERE 子句中附加一个字符？

> ID：16163265
> 
> 赞同：1
> 
> 时间：2013-04-23T07:19:34.730
> 
> 标签：sql

我需要如下查询，

> select * from table1 where usr_id = user-id + '#'（即如果 user-id 为 1234，则要验证的值为 '1234#'）

请让我知道如何在 SQL 中执行此操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T07:26:58.847

看来您想连接两个字符串。执行此操作的方法取决于您的 DBMS：

```
-- SQL Server / Microsoft Access
SELECT * FROM table1 WHERE usr_id = user-id + '#'

-- Oracle
SELECT * FROM table1 WHERE usr_id = user-id || '#'

-- MySQL
SELECT * FROM table1 WHERE usr_id = CONCAT(user-id, '#') 
```

参考：[SQL CONCATENATE（将字符串相互附加）](http://www.sqlbook.com/SQL/SQL-CONCATENATE-24.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:28:48.003

尝试这个

```
SELECT * FROM table1 WHERE usr_id = CONVERT(VARCHAR(100), @ID) + '#' 
```

或者

```
SELECT * FROM table1 WHERE REPLACE(usr_id , '#', '') = @ID 
```

# android - 单击时，如何使 ListView 行中的子线性布局之一不突出显示

> ID：16163266
> 
> 赞同：2
> 
> 时间：2013-04-23T07:19:49.597
> 
> 标签：android

我为我的 ListView 行自定义视图使用以下布局。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:duplicateParentState="false"
        android:clickable="false"    
        android:id="@+id/header"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="horizontal" >
        <!-- A lot of text views -->
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="horizontal"     
        android:minHeight="48dp" >
        <!-- A lot of text views -->
    </LinearLayout>

</LinearLayout> 
```

通过使用`android:duplicateParentState="false"`and `android:clickable="false"`，我希望在`header`单击列表视图行时不会突出显示 LinearLayout 。

但是，它仍然被突出显示。我可以知道如何使`header`LinearLayout 不突出显示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T07:41:53.823

消除视觉突出显示的一种方法是将`header`' 背景可绘制对象更改为对于所有相关状态（例如和无`StateListDrawable`）具有相同可绘制对象（例如纯色）的对象。`state_pressed`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:59:26.617

将您的标题视图分离到新的 xml。然后在你的活动/片段中膨胀这个视图并调用`addHeaderView(view, null, false);`它（第三个参数是布尔 isSelectable）。

```
LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View header = inflater.inflate(R.layout.header, null,false); 
getListView().addHeaderView(view, null, false); 
```

# javascript - 如何从 Windows 数学输入面板接受 MathML？

> ID：16163270
> 
> 赞同：3
> 
> 时间：2013-04-23T07:19:55.410
> 
> 标签：javascript, html, clipboard, mathml

问题[我如何接受 MathML？](https://stackoverflow.com/questions/9364890/how-do-I-accept-mathml)已经解释了如何使用本地 Windows 代码处理来自 Windows 7 和 Windows 8*数学输入面板的输出。*

**是否可以对仅使用 JavaScript 的任何 Web 浏览器执行相同操作**（即不允许使用 silverlight 或任何其他插件）？我知道 MathML 输入在剪贴板上，但它被声明为非文本（尽管它确实是`application/mathml`或更准确的事实`UTF-16LE encoded XML with MathML markup with a BOM at the start of the data`）。我的目标是通过 TinyMCE 获取`MathML`as`UTF-8 encoded text`并进一步嵌入该文本。生成的 MathML 稍后将由服务器渲染，`MathJax`但也可以由服务器处理。缺少的部分是从剪贴板中提取正确的数据。至于 TinyMCE 和 JavaScript（我正在使用它）看到剪贴板，当它真正包含[我如何接受 MathML 中描述的格式时，它总是空的。](https://stackoverflow.com/questions/9364890/how-do-I-accept-mathml)

我更喜欢支持 MSIE 10 和最新版本的 Firefox 和 Google Chrome。但是，从短期来看，我可以只支持在 Windows 8 上运行的单个浏览器。我真的很想避免任何插件依赖，即使支持在 Windows 8 上运行的单个浏览器也是如此。

**如果有人可以在仅使用 JavaScript的情况下向我展示`MathML`从*数学输入面板*显示的代码（如果有帮助，依赖关系也可以），我可以处理其余的。`alert()``jquery``TinyMCE`**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T08:31:10.827

由于 javascript 无法超出浏览器沙箱的范围，因此无法在网页上使用 javascript 访问剪贴板。至于选择从剪贴板粘贴的正确面粉，如果没有浏览器插件，这似乎是不可能的。

# .net - VB.Net 调用这个函数的最佳方式是什么？

> ID：16163276
> 
> 赞同：0
> 
> 时间：2013-04-23T07:20:08.237
> 
> 标签：.net, vb.net

使用下面的代码，调用第二个函数 (Checkbox1.CheckedChanged) 的最佳方法是什么？我尝试使用 (sender, e) 但每次程序完成安装时它都会连续调用 App2.msi，当它尝试重复安装 App2.msi 时将程序投入连续循环.. 在没有发件人的情况下尝试“调用 CheckBox1_CheckedChanged ()" 但我的代码将无法编译。

我对 VB 很陌生，所以我不确定我是否应该以不同的方式调用 msi，或者我只是不够了解如何调用这样的东西。如果有人需要更多详细信息，请告诉我！谢谢你！

```
Public Class Form1
Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
    Dim p1 As New Process
    p1 = System.Diagnostics.Process.Start("App1.msi")
    p1.WaitForExit()
    CheckBox2.Checked = True
    Label2.Visible = True

Call CheckBox1_CheckedChanged()

End Sub

Private Sub CheckBox2_CheckedChanged(sender As Object, e As EventArgs) Handles CheckBox2.CheckedChanged

End Sub

Private Sub Label2_Click(sender As Object, e As EventArgs) Handles Label2.Click

End Sub

Private Sub CheckBox1_CheckedChanged(sender As Object, e As EventArgs) Handles CheckBox1.CheckedChanged
    Dim p1 As New Process
    p1 = System.Diagnostics.Process.Start("App2.msi")
    p1.WaitForExit()
    CheckBox1.Checked = True
    Label3.Visible = True
End Sub

Private Sub Label3_Click(sender As Object, e As EventArgs) Handles Label3.Click

End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T07:24:02.013

正确的做法是：根本不调用！它是一个*事件处理程序*，你不应该调用它。

如果该方法包含您想在某些情况下手动调用的代码，请将其移至*由* `CheckBox1_CheckedChanged`其他代码调用的单独方法。

此外，评论是正确的：如果你改变`CheckBox1.Checked`了，它会再次调用事件处理程序——你会得到一个无限循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T07:24:31.257

在下面试试这个

```
Private Sub CheckBox1_CheckedChanged(sender As Object, e As EventArgs) Handles CheckBox1.CheckedChanged
    Dim oSender as CheckBox = DirectCast(sender,CheckBox)
    If oSender.Checked then
        Dim p1 As New Process
        p1 = System.Diagnostics.Process.Start("App2.msi")
        p1.WaitForExit()
        Label3.Visible = True
    End If
End Sub 
```

# ios - 使用 Askingpoint SDK 测试实际评分助推器

> ID：16163279
> 
> 赞同：0
> 
> 时间：2013-04-23T07:20:17.783
> 
> 标签：ios, rate

我集成了 Askingpoint 框架并提示测试评级助推器，它工作正常，但我想检查实际的助推器。即使所有条件都满足，我也没有得到真正的助推器。

我打了电话

```
[APManager startup:@"APP_KEY"]; 
```

在应用程序中启动 Askingpoint 并遵循文档中给出的所有指南。

如何测试实际的评级助推器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T05:45:57.193

我通过仔细阅读 sdk 的文档解决了我的问题，因为我通过调用方法集成了 AskingPoint SDK

```
[APManager startup:@"APP_KEY"]; 
```

那里一切正常，但问题只是规则不匹配，因为我在规则中提到的条件不止于此，因此规则中提到的所有条件都必须匹配

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-18T15:22:35.123

嗨，我是 AskingPoint 创始人。您可以使用相关的测试功能轻松测试任何 AskingPoint 功能，包括 Ratings Booster。所有这些都记录在[AskingPoint 支持页面](https://www.askingpoint.com/support_site)（站点使用部分）中。但简而言之，您可以这样做：

1.  首先将测试设备添加到您的帐户，包括模拟器。
2.  然后在仪表板上选择您要在其中测试 Ratings Booster 的应用程序。
3.  防火测试，并运行应用程序。
4.  使用这种测试方法会覆盖所有规则和条件，并且它*总是*会在您触发它时显示。

它被翻译成所有 iOS 语言，但如果您想查看特定语言，请将设备放入该语言并启动测试。

# jsf - 如何更好地计算 globalOnly FacesMessages？

> ID：16163283
> 
> 赞同：3
> 
> 时间：2013-04-23T07:20:24.800
> 
> 标签：jsf, jsf-2

我编写了一个“不太正确”的代码来以编程方式计算 globalOnly 消息。

```
for (final FacesMessage message : facesContext.getMessageList()) {
    if (!message.getClass().getCanonicalName().equals("javax.faces.component.MessageFactory.BindingFacesMessage")) {
            globalOnlyMessagesCount++;
    }
} 
```

对于非 jsf 开发者：`javax.faces.component.MessageFactory.BindingFacesMessage`是一个不可见的类，所以 instanceof 不起作用。我发现消息是一个`BindingFacesMessage`或`FacesMessage`

有没有**更好**的解决方案？（除了我将字符串文字设置为常量）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T12:03:15.497

仅全局消息由`null`客户端 ID 标识。

因此，这应该与[另一个获取客户端 ID 的 getter](http://docs.oracle.com/javaee/6/api/javax/faces/context/FacesContext.html#getMessageList%28java.lang.String%29)结合使用：

```
int globalOnlyMessagesCount = facesContext.getMessageList(null).size(); 
```

# firefox - 无法在 FireFox 22 中使用 setCookieString 添加 cookie

> ID：16163284
> 
> 赞同：0
> 
> 时间：2013-04-23T07:20:24.987
> 
> 标签：firefox, cookies

尝试在 firefox 22 中使用 setCookieString 添加 cookie 时，如果 cookie 的域不存在，则不会保存 cookie。

我使用的代码：cookieSvc = Components.classes["@mozilla.org/cookieService;1"].getService(Components.interfa‌​ces.nsICookieService); var ios = Components.classes["@mozilla.org/network/io-service;1"].getService(Components.in‌​terfaces.nsIIOService); cookieUri = ios.newURI（域，空，空）；cookieSvc.setCookieString(cookieUri, null, cookieStr, null);

有谁知道这是否是一个错误？解决方法是什么？

# java - 如何使用 javascript 包含 jsp

> ID：16163287
> 
> 赞同：0
> 
> 时间：2013-04-23T07:20:48.647
> 
> 标签：java, javascript, jquery, jsp

当我单击一个按钮时，我想在另一个 jsp 中包含一个 jsp。有人可以帮我吗？提前致谢。

我的代码：我有注销代码按钮。单击它时，我需要显示一个确认页面。

```
<s:form name="LogoutAction"
                id="LogoutAction" action="logout">
    <span class="inlayField2">
    <s:a href="logout" cssClass="planTabHeader" id="logoutId"> <img src="../../KY/images/common/header/lock.png" alt="logout" style="border: none;background-color: transparent;" /> &nbsp;Log out</s:a></span>
    </s:form> 

$('#logoutId').click(function(event) {

    $('#logoutdiv').load('ConfirmationPopup.jsp');
}); 
```

# java - 使用 Selenium 自动移动到 SlideShare 的下一张幻灯片

> ID：16163290
> 
> 赞同：0
> 
> 时间：2013-04-23T07:20:59.453
> 
> 标签：java, selenium, share, slide

我的目标是使用 selenium 自动化网页上显示的下一张 SlideShare 幻灯片。

如何使用 Selenium 的 Java 代码进行下一个/上一个 SlideShare？

```
WebElement slide = getDriver().findElement(By.id("slidesharePlayer")); // use the id of the searchbar to find it
                Thread.sleep(2000);
                slide.sendKeys("next()"); 
```

这无法移动下一张幻灯片知道如何移动下一张幻灯片吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-16T07:08:27.503

```
new Actions(getDriver())
            .sendKeys(getDriver().findElement(By.id("slidesharePlayer")), Keys.ARROW_RIGHT)
            .build().perform(); 
```

通过从键盘上按右键...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T07:42:48.250

你做错了。

1.  Slideshare 没有任何带有 id 的元素`slidesharePlayer`。
2.  使用`Thread.sleep`不是一个好主意。
3.  `sendKeys()`将键发送`next()`到元素`slide`。

你可以做类似的事情..

```
getDriver().findElement(By.xpath("//a[contains(@title, 'Next Slide')]").click(); 
```

单击属性设置为 "Next Slide"的`a`元素。`title`

# java - Atmosphere - Nginx 作为 https->http 转发器 - websocket 不工作

> ID：16163293
> 
> 赞同：0
> 
> 时间：2013-04-23T07:21:06.447
> 
> 标签：java, asynchronous, nginx, websocket, atmosphere

我正在使用 Nginx 将 https 转换为 http 从客户端到服务器。

如果没有这种转发，我的氛围配置在 websocket 中运行良好。

现在，如果我在中间切换到带有 Nginx 的 https

```
var request = { url: "https://localhost/writever/chat",
                     contentType : "application/json",
                     logLevel : 'debug',
                     transport : transport ,
                     enableProtocol : true,
                     fallbackTransport: 'long-polling'}; 
```

Websocket 连接在超时后失败并降级为长轮询。

您知道是否可以让 websocket 在这些条件下工作？

顺便说一句，最新的 nginx 1.3 支持 websocket 代理 - 仍处于开发模式。如果使用这样的方法，它对 AtmosphereHandler 有影响吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T19:45:24.333

它不应该有所作为。但是看看：

[http://goo.gl/04g8F](http://goo.gl/04g8F)

您可能想要添加此标头，看看是否有所作为。我真诚地怀疑，但试试看。

——让弗朗索瓦

# jquery - 如何从 1 级 UL 中删除一个？

> ID：16163294
> 
> 赞同：0
> 
> 时间：2013-04-23T07:21:09.353
> 
> 标签：jquery, html-lists

下面是我来自 wordpress 的代码。我想从 1 级 ul li 中删除所有 a（链接）（例如国际 gTLD、商业 ccTLD、澳大拉西亚 ccTLD、欧洲和美国 ccTLD），但`<ul class="sub-menu">`不会删除 a 下的 a（链接）。请通过 jquery 建议我如何

```
<div class="sitemap">
<ul>
  <li><a href="general/international-gtlds/">International gTLDs</a>
  <ul class="sub-menu">
    <li><a href="com-net-org-info/">.COM/.NET/.ORG/.INFO</a></li>
    <li><a href="biz/">.BIZ</a></li>
    <li><a href="name/">.NAME</a></li>
    <li><a href="mobi/">.MOBI</a></li>
    <li><a href="travel/">.TRAVEL</a></li>
    <li><a href="asia/">.ASIA</a></li>
    <li><a href="tel/">.TEL</a></li>
    <li><a href="xxx/">.XXX</a></li>
    <li><a href="xxx-sunrise-and-landrush/">.XXX (Sunrise and Landrush)</a></li>
  </ul>
</li>
<li><a href="category/domain-faqs/general/commercial/">Commercial ccTLDs</a>
<ul class="sub-menu">
    <li><a href="cc/">.CC</a></li>
    <li><a href="tv/">.TV</a></li>
    <li><a href="cd/">.CD</a></li>
    <li><a href="cm/">.CM</a></li>
    <li><a href="me/">.ME</a></li>
</ul>
</li>
<li><a href="category/domain-faqs/general/australasia/">Australasia ccTLDs</a>
<ul class="sub-menu">
    <li><a href="au/">.AU</a></li>
    <li><a href="nz-registration/">.NZ Registration</a></li>
    <li><a href="cx/">.CX</a></li>
</ul>
</li>
<li><a href="category/domain-faqs/general/europe/">Europe &amp; America ccTLDs</a>
  <ul class="sub-menu">
    <li><a href="europe-america-cctlds/">.EU</a></li>
    <li><a href="us/">.US</a></li>
    <li><a href="de/">.DE</a></li>
    <li><a href="li/">.LI</a></li>
    <li><a href="it/">.IT</a></li>
    <li><a href="la/">.LA</a></li>
    <li><a href="mx-domain/">.MX</a></li>
    <li><a href="uk/">.UK</a></li>
    <li><a href="co/">.CO</a></li>
    <li><a href="co-no/">.CO.NO</a></li>
    <li><a href="co-nl/">.CO.NL</a></li>
    <li><a href="fm/">.FM</a></li>
    <li><a href="gs/">.GS</a></li>
    <li><a href="tl/">.TL</a></li>
    <li><a href="ht/">.HT</a></li>
    <li><a href="ki/">.KI</a></li>
    <li><a href="mu/">.MU</a></li>
    <li><a href="nf/">.NF</a></li>
    <li><a href="ag/">.AG</a></li>
    <li><a href="bz/">.BZ</a></li>
    <li><a href="hn/">.HN</a></li>
    <li><a href="lc/">.LC</a></li>
    <li><a href="sc/">.SC</a></li>
    <li><a href="vc/">.VC</a></li>
    <li><a href="tr/">.TR</a></li>
    <li><a href="ws/">.WS</a></li>
  </ul>
</li>
</ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:33:57.840

要停止超链接，您可以使用 jQuery 绑定[`.click()`](http://api.jquery.com/click/)事件处理程序以捕获`click`并停止传播和跟随超链接的默认操作。

```
jQuery(function($) {
    $('.sitemap > ul > li > a').click(function() {
        return false;
    });
}); 
```

**或者**要完全删除`<a>`，您可以使用：

```
$('.sitemap > ul > li > a').contents().unwrap(); 
```

[**看演示**](http://jsfiddle.net/cRQ6S/1/)

**编辑：**感谢@adeneo 关于 wordpress 的 noconflict 提示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:22:29.387

尝试

```
$(function(){
    $('.sitemap > ul > li > a').replaceWith(function(){
        return $(this).text()
    })
}) 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/66pdB/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T07:23:22.993

你想`<a href="general/international-gtlds/">International gTLDs</a>`被彻底删除？

`$("div.sitemap>ul>li>a").remove();`

# excel - 编码中写入的自动过滤器与宏中记录的功能不同

> ID：16163295
> 
> 赞同：1
> 
> 时间：2013-04-23T07:21:13.647
> 
> 标签：excel, excel-formula, autofill, autofilter, vba

我在这里遇到一个问题。

```
formula = "=CONCATENATE(""ML"",MID(cell(C),2,1),MID(cell(C),4,5),""M"",RIGHT(cell(C),2),""_"",LEFT(D52,1),""_Q"")"

ActiveSheet.Range("$H$2:$H$1048576").AutoFilter Field:=8, Criteria1:="=SAMP"
'exclude the header  
Range("A1").Select
ActiveCell.Offset(1, 0).Select

ActiveCell.FormulaR1C1 = formula
'Range("A2").AutoFill Destination:=Range("A2:A" & Range("A" & Rows.Count).End(xlUp).Row)
Selection.FillDown 
```

我试图用这种编码过滤我的 H 列。过滤后，我想用公式填充这些单元格。我的公式有什么问题吗，它可以执行，但不像我预期的那样工作。这个代码虽然和宏一样。但是当运行它时，数据行显示的与我使用宏记录的不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T01:41:41.093

您正在设置`.FormulaR1C1`属性，它期望公式使用 R1C1 表示法，而字符串以普通 A1 表示法编写，因此您应该设置该`.Formula`属性。

# ruby-on-rails - 具有嵌套属性的 Rails 3 复杂表单

> ID：16163296
> 
> 赞同：0
> 
> 时间：2013-04-23T07:21:23.970
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我有一个单一的表格，其中有车辆详细信息、投诉详细信息和用户详细信息。车辆有_many 投诉和用户有_many 投诉。它是一个nested_attribute 表格，但由于某种原因，我觉得该关联是错误的，我对表格应该如何或它有点困惑应该是投诉has_one 车辆和投诉has_one 用户？？我在创建投诉时创建新用户和新车辆。此表单没有任何身份验证..

车辆.rb

```
 class Vehicle < ActiveRecord::Base
   attr_accessible :number, :vehicle_types , :complaints_attributes
   has_many :complaints
   accepts_nested_attributes_for :complaints
 end 
```

用户.rb

```
 class User < ActiveRecord::Base
  attr_accessible :address, :email_id, :mobile , :complaints_attributes
  has_many :complaints
  accepts_nested_attributes_for :complaints
 end 
```

投诉.rb

```
class Complaint < ActiveRecord::Base
  attr_accessible  :indecent_behaviour, :occurence_date_time, :other_complaints,      :place_occurence
  belongs_to :user
  belongs_to :vehicle 
end 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:25:16.303

为什么用户和车辆会有嵌套的投诉对我来说没有意义。您可能不会在创建新用户和新车辆的同时创建投诉。你是？

大概是制造了用户，制造了车辆，然后用户抱怨车辆，此时进行了抱怨。按时间顺序晚于创建用户或车辆的时间。

所以，也许取出嵌套属性。相反，您可以使用隐藏字段并将车辆 ID 作为参数传递，或者您可以使用嵌套资源路径来获取车辆 ID。通过投诉的 current_user 的 has_many 关联创建投诉：

```
new_complaint_path( vehicle_id: @vehicle.id ) 
```

在投诉控制器中

```
def new
  @complaint = current_user.complaints.build
  @complaint[:vehicle_id] = params[:vehicle_id]
end 
```

# android - 未获取 URL 数据，为什么出现此“URL 错误”

> ID：16163297
> 
> 赞同：0
> 
> 时间：2013-04-23T07:21:24.680
> 
> 标签：android

我从网络获取数据有问题。找不到 ul，如何发生这种情况。Logcat 的主要错误：

**04-23 01:00:04.739: W/HttpPostRetreiver(11853): URL > [http://test.com/url_getting_Info.php错误](http://test.com/url_getting_Info.php)**

我有 Java 代码：

```
String countryId = sharedPreferences.getString("CountryId ", "");
    String capitalId = sharedPreferences.getString("CapitalId ", "");

  String input = String.format("<Es_Request><Data><CountryId>%s</CountryId><CapitalId >%s</CapitalId ></Data></Es_Request>",countryId , capitalId );

String response = HttpPostRetreiver.retriver(Url.url_getting_Info, input,DisplayData.this);

if (response != null) {
//DO something
}
else
{
Log.d("hello", "i get this message");
} 
```

这里是HttpPostReceiver.java

```
public class HttpPostRetreiver {

public static String retriver(String Url, String input, Context context) {
    Log.d("TESTING", "URL->>" + Url);
    String responseString = null;
    StringEntity stringEntity;
    HttpPost postRequest = new HttpPost(Url);
    try {

        Log.e("string is", input + "\n" + Url);
        stringEntity = new StringEntity(input, "UTF-8");
        stringEntity.setContentType("application/atom+xml");

        postRequest.setEntity(stringEntity);
        Log.v("Post", "Posted");

        HttpClient httpclient = new DefaultHttpClient();
        HttpResponse response = httpclient.execute(postRequest);
        HttpEntity getResponseEntity = response.getEntity();

        responseString = EntityUtils.toString(getResponseEntity);

    } catch (Exception e) {
        postRequest.abort();
        Log.w("HttpPostRetreiver", "Error for URL " + Url, e);
    }

    return responseString;

}

**04-23 01:00:04.729: E/string is(11853): http://test.com/url_getting_Info.php
04-23 01:00:04.729: V/Post(11853): Posted
04-23 01:00:04.739: W/HttpPostRetreiver(11853): Error for URL >http://test.com/url_getting_Info.php
04-23 01:00:04.739: W/HttpPostRetreiver(11853): android.os.NetworkOnMainThreadException
04-23 01:00:04.739: W/HttpPostRetreiver(11853):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
04-23 01:00:04.739: W/HttpPostRetreiver(11853):     at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
04-23 01:00:04.739: W/HttpPostRetreiver(11853):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
04-23 01:00:04.739: W/HttpPostRetreiver(11853):     at java.net.InetAddress.getAllByName(InetAddress.java:220)
04-23 01:00:04.739: W/HttpPostRetreiver(11853):     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
04-23 01:00:04.739: W/HttpPostRetreiver(11853):     at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
04-23 01:00:04.739: W/HttpPostRetreiver(11853):     at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
04-23 01:00:04.739: W/HttpPostRetreiver(11853):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
04-23 01:00:04.739: W/HttpPostRetreiver(11853):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:674)
04-23 01:00:04.739: W/HttpPostRetreiver(11853):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:511)
04-23 01:00:04.739: W/HttpPostRetreiver(11853):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:489)
04-23 01:00:04.739: W/HttpPostRetreiver(11853):     at sdei.edustatusnew.services.HttpPostRetreiver.retriver(HttpPostRetreiver.java:31)
04-23 01:00:04.739: W/HttpPostRetreiver(11853):     at sdei.edustatusnew.ChildActivity.getChildList(ChildActivity.java:238)
04-23 01:00:04.739: W/HttpPostRetreiver(11853):     at sdei.edustatusnew.ChildActivity.onCreate(ChildActivity.java:206)
04-23 01:00:04.739: W/HttpPostRetreiver(11853):     at android.app.Activity.performCreate(Activity.java:4470)
04-23 01:00:04.739: W/HttpPostRetreiver(11853):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1053)
04-23 01:00:04.739: W/HttpPostRetreiver(11853):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1934)
04-23 01:00:04.739: W/HttpPostRetreiver(11853):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
04-23 01:00:04.739: W/HttpPostRetreiver(11853):     at android.app.ActivityThread.access$600(ActivityThread.java:128)
04-23 01:00:04.739: W/HttpPostRetreiver(11853):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
04-23 01:00:04.739: W/HttpPostRetreiver(11853):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-23 01:00:04.739: W/HttpPostRetreiver(11853):     at android.os.Looper.loop(Looper.java:137)
04-23 01:00:04.739: W/HttpPostRetreiver(11853):     at android.app.ActivityThread.main(ActivityThread.java:4517)
04-23 01:00:04.739: W/HttpPostRetreiver(11853):     at java.lang.reflect.Method.invokeNative(Native Method)
04-23 01:00:04.739: W/HttpPostRetreiver(11853):     at java.lang.reflect.Method.invoke(Method.java:511)
04-23 01:00:04.739: W/HttpPostRetreiver(11853):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993)
04-23 01:00:04.739: W/HttpPostRetreiver(11853):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760)
04-23 01:00:04.739: W/HttpPostRetreiver(11853):     at dalvik.system.NativeStart.main(Native Method)
04-23 01:00:04.749: D/hello(11853): i get this message 
```

如何得到这个错误，我找不到，任何人请带着问题并尝试解决。

在此先感谢。快乐编码！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:24:01.643

> android.os.NetworkOnMainThreadException

您正在尝试在 UI 线程上执行网络操作，android 3+ 设备不允许在 UI 线程上进行网络操作。所以会抛出`NetworkOnMainThreadException`，所以使用`AsyncTask`or 分开`thread`来执行网络操作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T07:24:07.567

```
android.os.NetworkOnMainThreadException 
```

表示您正在对`UI thread`. 这是禁止的`Android 3.0`，因为您应该使用 Thread。阅读本[指南](http://android-developers.blogspot.it/2009/05/painless-threading.html)

# java - 如何使用 SwingX JXTitledSeparator？

> ID：16163298
> 
> 赞同：0
> 
> 时间：2013-04-23T07:21:26.017
> 
> 标签：java, separator, swingx

我正在尝试使用 SwingX 中的 JXTitledSeparator 创建带有标题的分隔符，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/tvez0.jpg)

这是我目前正在使用的代码：

```
JXTitledSeparator xTitledSeparator1 = new JXTitledSeparator();
xTitledSeparator1.setTitle( "Separator Title" );
xTitledSeparator1.setHorizontalAlignment(0); 
```

但我实际上想要的是将分隔符标题“Separator Title”向左移动一点，所以它可以看起来像这样：

![在此处输入图像描述](https://i.stack.imgur.com/mhXu1.jpg)

有没有办法做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:34:37.047

尝试

```
xTitledSeparator1.setHorizontalAlignment(SwingConstants.LEFT); 
```

或`SwingConstants.LEADING`。您正在使用的`0`代表`SwingConstants.CENTER`.

如果那不起作用，请尝试[`setHorizontalTextPosition(SwingConstants.LEFT)`](http://download.java.net/javadesktop/swinglabs/releases/weekly/week-20-2006-05-14/swingx/javadoc/org/jdesktop/swingx/JXTitledSeparator.html#setHorizontalTextPosition%28int%29)。

# java - JBOSS 中的时移测试

> ID：16163299
> 
> 赞同：1
> 
> 时间：2013-04-23T07:21:29.553
> 
> 标签：java, time, jboss

我正在开发一个在 JBOSS 应用服务器中运行的企业应用程序。该应用程序记录产品订阅并每月创建一次交易。

我想开发一个自动化测试用例，在其中进行订阅，将日期更改 10 个月并创建事务（需要创建 10 个事务）。

有没有办法使用Java在JBOSS应用服务器中移动日期？

# javascript - 利用 我在我的 JSP 页面中创建了动态行（使用 javascript）。现在我想使用 Spring 组件<form:input 对于 HTML 中的 spring 组件<form:input，我使用过 <% 问问题 问问题 2013-04-23T07:21:32.423 859 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我在我的 JSP 页面中创建了动态行（使用 javascript）。现在我想使用 Spring 组件<form:input 对于 HTML 中的 spring 组件<form:input，我使用过 <%@ taglib uri="http://www.springframework.org/tags/form" prefix="form"%> <form:input path="hello" cssClass="textbox_Blue" maxlength='10' size='30' /> 现在我想知道如何在java脚本中做到这一点。 希望这个问题是清晰和翔实的。 如何使用 ggplot2 生成此图 这是 R 在绘制数据框时呈现的基本图形。 plot(df) 它显示了所有变量之间的关系。 我知道分面，ggplot2但它用于根据特定变量进行分区。我想按目标参数（颜色）进行分面，并按变量拆分网格。 样本数据： prediction.date mean.forcast mean.Error standard.Deviation AIC param.u param.v 2012-08-29 0.0015608102 0.008296402 0.008296402 -6.165365 2 5 2012-08-30 -0.0002720289 0.008537309 0.008537309 -6.164167 2 4 2012-09-02 -0.0014277972 0.008194409 0.008194409 -6.168868 4 0 2012-09-03 0.0016537998 0.008062687 0.008062687 -6.176634 5 3 2012-09-04 -0.0030247699 0.007885009 0.007885009 -6.181844 4 3 2012-09-05 0.0001538991 0.007524703 0.007524703 -6.197240 3 4 javascriptformsjspspring-mvcdynamic-html 4 1 回答 1 This answer is useful 0 查看<form:input在您的 javascript 中类似地创建的 html 等效项。使用 javascript 在您的页面中附加该代码。绑定是基于名称完成的，所以它会起作用。 确保您在<form标记中附加代码。 于 2013-04-23T08:52:55.720 回答 Related 1 android - 日食未检测到一天前检测到的设备 1 jpa - 在使用 XmlInverseReference 解组孩子时，如何让 MOXy 分配父母？ 1 php - PHP：查询执行速度慢 2 php - 如何通过 wp_get_post_categories() 函数获取有序类别？ 2 ios - 如何使应用程序兼容 3.5" 和 4" 视网膜显示器 2 jax-ws - 我可以在 Metro 解组之前修复损坏的 XML 响应吗？ 1 jquery - 如何在 JSFiddle 中使用旧版本的 jQuery？ 1 android - Android - 如何从外部输入设备直接在变量中捕获文本 2 php - 如何在函数中检索 mysqli 变量 2 css - 列表导航中的垂直对齐伪元素 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：16163300
> 
> 赞同：0
> 
> 时间：
> 
> 标签：javascript, forms, jsp, spring-mvc, dynamic-html

我在我的 JSP 页面中创建了动态行（使用 javascript）。现在我想使用 Spring 组件`<form:input`

对于 HTML 中的 spring 组件`<form:input`，我使用过

```
<%@ taglib uri="http://www.springframework.org/tags/form" prefix="form"%> 
```

`<form:input path="hello" cssClass="textbox_Blue" maxlength='10' size='30' />`

现在我想知道如何在java脚本中做到这一点。

希望这个问题是清晰和翔实的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T08:52:55.720

查看`<form:input`在您的 javascript 中类似地创建的 html 等效项。使用 javascript 在您的页面中附加该代码。绑定是基于名称完成的，所以它会起作用。

确保您在`<form`标记中附加代码。

# mysql-workbench - Mysql工作台外键选项[Restrict, Cascade, Set Null, No Action]，它们有什么作用？

> ID：16163301
> 
> 赞同：29
> 
> 时间：2013-04-23T07:21:37.673
> 
> 标签：mysql-workbench

在更新和删除的外键选项中。每个字段 [Restrict, Cascade, Set Null, No Action] 有什么作用？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-04-23T07:25:57.883

如果你一个一个拿：

对于更新和删除：

如果您尝试更新/删除父行：

> **限制**：如果有子行，则不会删除任何内容
> 
> **级联**：子行也将被删除/更新
> 
> **Set Null**：如果删除父列，子列将设置为 null
> 
> **无操作**：子行不会被删除/更新所关注

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2014-04-21T05:58:13.297

包含外键的表称为**引用**表或**子表**，包含候选键的表称为**引用**表或**父表**。

> **Set NULL** ：当您删除父表行时，将列值设置为**NULL 。**
> 
> **CASCADE** : CASCADE 将在父项更改时**传播更改。**如果您删除一行，则约束表中引用该行的行**也将被删除**，等等。
> 
> **RESTRICT** ：如果存在引用该父行的值的**子行**，则RESTRICT 会导致您无法删除给定的**父行。**
> 
>  ****NO ACTION** : NO ACTION 和 RESTRICT 非常相似。当对引用的表执行 UPDATE 或 DELETE 语句时，DBMS 在语句执行结束时验证没有**违反****任何引用**关系。简而言之，子行不关心父行是否**删除**或**更新**。**

 ******* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-27T06:30:27.210

当 UPDATE 或 DELETE 操作影响父表中具有匹配行的子表中的键值时，结果取决于使用 FOREIGN KEY 子句的 ON UPDATE 和 ON DELETE 子句指定的引用操作。MySQL 支持关于要采取的操作的五个选项，在此处列出：

**CASCADE：**删除或更新父表中的行，并自动删除或更新子表中匹配的行。支持 ON DELETE CASCADE 和 ON UPDATE CASCADE。在两个表之间，不要定义多个作用于父表或子表中的同一列的 ON UPDATE CASCADE 子句。

**SET NULL：**从父表中删除或更新行，并将子表中的外键列或列设置为NULL。支持 ON DELETE SET NULL 和 ON UPDATE SET NULL 子句。

如果您指定 SET NULL 操作，请确保您没有将子表中的列声明为 NOT NULL。

**RESTRICT：**拒绝对父表的删除或更新操作。指定 RESTRICT（或 NO ACTION）与省略 ON DELETE 或 ON UPDATE 子句相同。

**NO ACTION：**来自标准 SQL 的关键字。在 MySQL 中，相当于 RESTRICT。如果引用的表中存在相关的外键值，MySQL Server 将拒绝对父表的删除或更新操作。一些数据库系统有延迟检查，NO ACTION 是延迟检查。在 MySQL 中，立即检查外键约束，因此 NO ACTION 与 RESTRICT 相同。

**SET DEFAULT：**此操作被 MySQL 解析器识别，但 InnoDB 拒绝包含 ON DELETE SET DEFAULT 或 ON UPDATE SET DEFAULT 子句的表定义。

对于未指定的 ON DELETE 或 ON UPDATE，**默认操作始终是 RESTRICT。**

**以上文字复制自：** [https ://dev.mysql.com/doc/refman/5.5/en/create-table-foreign-keys.html](https://dev.mysql.com/doc/refman/5.5/en/create-table-foreign-keys.html)******

# python - Pika blocking_connection.py 连接到 RabbitMQ 的随机超时

> ID：16163308
> 
> 赞同：5
> 
> 时间：2013-04-23T07:22:16.683
> 
> 标签：python, rabbitmq, rpc, pika, python-pika

我有一个在机器上运行的兔子 mq

*   客户端和rabbitMQ都在同一个网络上运行
*   rabbitMQ有很多客户端
*   我可以从 rabbitMQ ping 客户端并返回
*   机器之间测量的最长延迟为 12.1 毫秒
*   网络详细信息：标准交换机网络（在单个物理机上运行的虚拟机网络 - 使用 vmware VC）

初始化 RPC 连接时出现随机超时

> /usr/lib/python2.6/site-packages/pika-0.9.5-py2.6.egg/pika/adapters/blocking_connection.py

问题是超时不一致并且不时发生。

当手动测试此问题并从同一台机器上运行blocking_connection.py 1000 次时，它不会产生超时。

这是我失败时得到的错误：

```
2013-04-23 08:24:23,396 runtest-trigger.24397 24397 DEBUG      producer_rabbit initiate_rpc_connection Connecting to RabbitMQ RPC queue rpcqueue_java on host: auto-db1
2013-04-23 08:24:25,350 runtest-trigger.24397 24397 ERROR      testrunner go   Run 1354: cought exception: timed out
Traceback (most recent call last):
  File "/testrunner.py", line 193, in go
    self.set_runparams(jobid)
  File "/testrunner.py", line 483, in set_runparams
    self.runparams.producers_testrun = self.initialize_producers_testrun(self.runparams)
  File "/basehandler.py", line 114, in initialize_producers_testrun
    producer.set_testcase_checkout()
  File "/baseproducer.py", line 73, in set_testcase_checkout
    self.checkout_handler = pm_checkout.get_producer(self.testcasecheckout)
  File "/producer_manager.py", line 101, in get_producer
    producer = self.load_producer(plugin_dir, producer_name)
  File "/producer_manager.py", line 20, in load_producer
    producer = getattr(producer_module, 'Producer')(producer_name, self.runparams)
  File "/producer_rabbit.py", line 13, in __init__
    self.initiate_rpc_connection()
  File "/producer_rabbit.py", line 67, in initiate_rpc_connection
    self.connection = pika.BlockingConnection(pika.ConnectionParameters( host=self.conf.rpc_proxy))
  File "/usr/lib/python2.6/site-packages/pika-0.9.5-py2.6.egg/pika/adapters/blocking_connection.py", line 32, in __init__
    BaseConnection.__init__(self, parameters, None, reconnection_strategy)
  File "/usr/lib/python2.6/site-packages/pika-0.9.5-py2.6.egg/pika/adapters/base_connection.py", line 50, in __init__
    reconnection_strategy)
  File "/usr/lib/python2.6/site-packages/pika-0.9.5-py2.6.egg/pika/connection.py", line 170, in __init__
    self._connect()
  File "/usr/lib/python2.6/site-packages/pika-0.9.5-py2.6.egg/pika/connection.py", line 228, in _connect
    self.parameters.port or  spec.PORT)
  File "/usr/lib/python2.6/site-packages/pika-0.9.5-py2.6.egg/pika/adapters/blocking_connection.py", line 44, in _adapter_connect
    self._handle_read()
  File "/usr/lib/python2.6/site-packages/pika-0.9.5-py2.6.egg/pika/adapters/base_connection.py", line 151, in _handle_read
    data = self.socket.recv(self._suggested_buffer_size)
timeout: timed out 
```

请协助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-02T19:59:57.827

我有一个类似的问题。如果一切看起来都很好，那么您很可能有某种未配置的配置，例如绑定错误。如果未配置，那么您将得到一个`timeout`，因为脚本无法到达它认为它需要去的地方，所以在这种情况下错误可能会导致错误。

对于我的问题，我的`rabbitmq.config`文件和绑定都特别有问题，因此不得不使用我的 python 解决方案，如下所示： RabbitMQ通过我展示的命令行示例[从命令行创建队列和绑定。](https://stackoverflow.com/questions/4545660/rabbitmq-creating-queues-and-bindings-from-a-command-line/25915568#25915568)正确更新和配置后，一切正常。希望这能让你朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-23T05:07:55.987

Pika 在连接不同的主机时会出现一些超时问题。解决方案是`socket_timeout`在连接参数中传递一个参数。Pika 应该升级到 >=0.9.14

```
credentials = pika.PlainCredentials(RABBITMQ_USER, RABBITMQ_PASS)
connection = pika.BlockingConnection(pika.ConnectionParameters(
    credentials=credentials,
        host=RABBITMQ_HOST,
         socket_timeout=300))
channel = connection.channel() 
```

# r - 如何使用 ggplot2 生成此图

> ID：16163309
> 
> 赞同：0
> 
> 时间：2013-04-23T07:22:16.267
> 
> 标签：r, ggplot2

这是 R 在绘制数据框时呈现的基本图形。

```
plot(df) 
```

它显示了所有变量之间的关系。

![剧情](https://i.stack.imgur.com/mfMrj.png)

我知道分面，`ggplot2`但它用于根据特定变量进行分区。我想按目标参数（颜色）进行分面，并按变量拆分网格。

样本数据：

```
prediction.date  mean.forcast   mean.Error    standard.Deviation    AIC         param.u param.v
2012-08-29       0.0015608102   0.008296402   0.008296402           -6.165365   2       5
2012-08-30      -0.0002720289   0.008537309   0.008537309           -6.164167   2       4
2012-09-02      -0.0014277972   0.008194409   0.008194409           -6.168868   4       0
2012-09-03       0.0016537998   0.008062687   0.008062687           -6.176634   5       3
2012-09-04      -0.0030247699   0.007885009   0.007885009           -6.181844   4       3
2012-09-05       0.0001538991   0.007524703   0.007524703           -6.197240   3       4 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T08:16:13.873

如果您只需要为您提供的绘图中的点着色，那么您可以使用参数`col=`in`plot()`并设置颜色和变量的名称以用于确定颜色。

```
#variable of test result (should be the same length as number of rows in df)
test.result<-c(0,1,1,0,0,1)

plot(df[,3:7],col=c("green","red")[as.factor(test.result)]) 
```

![在此处输入图像描述](https://i.stack.imgur.com/1y00j.png)

# django - Django session cookie：来自（任何）其他域，检查用户是否登录

> ID：16163313
> 
> 赞同：1
> 
> 时间：2013-04-23T07:22:27.133
> 
> 标签：django, session

我有一个域 domain1.com。用户登录并设置 cookie。这是使用 Django 会话完成的。

然后我转到另一个域 domain2.com。此域运行 javascript。从这个javascript，我想看看用户是否登录到domain1.com。

这可能吗？我可以从 domain2 中看到属于 domain1 的 cookie 吗？或者我可以通过 ajax 以某种方式调用 domain1 来检查用户是否已登录？

此外，用户可能最初从 Chrome 登录到 domain1，但现在他们正在从另一个浏览器访问 domain2。cookie 不是特定于浏览器的吗？

编辑：

我要解决的真正问题是什么？（下面重新评论）：我创建了一个 Chrome 扩展程序。当用户从 domain2 按下扩展图标时，将运行一个 javascript，它从页面收集信息。此信息需要发送到 domain1 上的用户帐户。请注意，domain2 可以是任何域，而不是我创建的域。

我对 AJAX 和 cookie 的尝试。

从 domain1 设置 cookie：

```
response.set_cookie("user_cookie", value="somevalue", max_age=60*60, expires=None, path='/', domain=None, secure=None, httponly=False) 
```

创建 Python 函数，从 domain1.com/checklogin 执行：

```
@csrf_exempt
def is_logged_in(request):
    cookie = request.COOKIES.get('user_cookie') 
    if cookie is not None:
        return HttpResponse("1")
    else:
        return HttpResponse("0") 
```

转到 domain1.com/checklogin -> 响应为“1”

从 domain2 调用 javascript，如下所示：

```
var xmlHttp_1=new XMLHttpRequest();
xmlHttp_1.open("POST","http://domain1.com/checklogin/",false);
xmlHttp_1.send();
alert(xmlHttp_1.responseText); 
```

这里的响应错误地是 0。它看不到由 domain1 创建的 cookie。

请注意，此时 domain1 是 localhost 而 domain2 是一个真实的域。这可能是问题吗？它确实正确调用了该函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T07:31:15.763

> 这可能吗？我可以看到属于`domain1`from 的 cookie`domain2`吗？

不可以。Cookie 仅限于域（及其子域）。的 cookie`.foo.com`可以访问`www.foo.com`，`zoo.foo.com`但不能访问`bar.com`。

> 或者我可以通过 ajax 以某种方式拨打电话`domain1`以检查用户是否已登录？

这是一种方法，是的，它会起作用。

> 此外，用户可能最初从 Chrome 登录到 domain1，但现在他们正在从另一个浏览器访问 domain2。cookie 不是特定于浏览器的吗？

对，他们是。如果您登录 Chrome，然后打开 Safari，您将不会登录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T07:29:18.257

cookie 是特定于域的，您可以在 foo.example.com 和 bar.example.com 之间共享 cookie，但不能在两个域之间共享。要解决此问题，您需要将 ajax 请求从域 2 发送到域 1，并在那里检查是否设置了 cookie 并将响应发送回域 2。

检查此问题以供参考： [为具有多个域名的 Django 站点设置默认 cookie 域](https://stackoverflow.com/questions/4269000/setting-default-cookie-domain-for-django-site-with-multiple-domain-names?rq=1)

# python - 如何一次杀死多个龙卷风进程？

> ID：16163318
> 
> 赞同：0
> 
> 时间：2013-04-23T07:22:33.077
> 
> 标签：python, bash, process, tornado

我曾经`nohup python *.py &`运行我的龙卷风网络服务，并启动了 8 个进程。

![](https://i.stack.imgur.com/6gRy2.png).

但是，杀死我的龙卷风进程真的很烦人。我必须使用`kill -3 pid`8 次才能最终拒绝我的服务。所以我想知道如何在我的 bash 中一次杀死 8 个进程？谢谢。

我试过`killall python`了，但是当有其他 python 进程运行时很危险。

@Viktor 建议我使用`pkill -P <parent>`它，它适用于我的 Ubuntu。但是在 Centos 中，'pkill' 不起作用。那么我怎样才能'pkill' Centos 中的进程呢？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T07:25:13.133

这取决于您的环境。

但是您可能想查看`pkill -P <parent>`，它会杀死具有相同父 pid 的所有内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T07:30:29.373

也许 ：

`ps aux | grep -e 'python spam.py' | grep -v grep | awk '{print $2}' | xargs -i kill {}`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T07:27:30.230

杀死父进程，即具有最小 PID 的进程应该完成这项工作，就像`kill -15 18054`在您的 ps 示例中一样。另外，你可以做一些 grep 魔法，比如：

```
 for i in `ps waux | grep "python spam.py" | awk '{ print $2 }'`; do kill -15 ${i}; done 
```

# jquery - 为什么单击时我的链接会调用错误的操作结果

> ID：16163321
> 
> 赞同：0
> 
> 时间：2013-04-23T07:22:36.847
> 
> 标签：jquery, asp.net-mvc-3, actionresult

我有这个问题。我有编辑页面，它的属性之一是超链接。一个 div 正在显示我想要的视频列表，如果我单击任何链接（例如“删除”），它将触发 ajax 调用以删除所选项目。但是我有一个奇怪的问题。每次我单击任何链接时，它都会调用“编辑”页面，这是当前页面，而不是“删除”方法。我的链接是这样呈现的。

```
<a href="#" class="video" id="@Model.VirtualTourGalleries[i].Virtual_Tour_Id">Delete</a> 
```

请帮忙。这是我的代码。

**HTML**

```
<div class="fieldElem">
        <div class="editor-label">Virtual Tours & Videos</div>
        <div class="editor-field">  
            <table id="gridVirtualTours">
                <thead>
                    <tr>
                        <th>VIDEO</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    @if (Model.VirtualTourGalleries != null)
                    {
                        for(var i = 0; i < Model.VirtualTourGalleries.Count(); i++)
                        {
                            @Html.HiddenFor(model => model.VirtualTourGalleries[i].Virtual_Tour_Id)
                            <tr>
                                <td>@Model.VirtualTourGalleries[i].Virtual_Tour_Title</td>
                                <td><a href="#" class="video" id="@Model.VirtualTourGalleries[i].Virtual_Tour_Id">Delete</a></td>
                            </tr>

                        }
                    }
                </tbody>
                <tfoot>
                </tfoot>
            </table>

        </div>
    </div> 
```

**jQuery 函数**

```
$("#gridVirtualTours").on('click', '.video', function () {
            var tr = $(this).closest('tr');
            $.ajax({
                url: "deletevideo",
                type: 'POST',
                data: { videoid: $(this).attr('id') },
                success: function (result) {
                    if (result) tr.remove();
                }
            });
        }); 
```

**控制器**

```
[HttpPost]
        public ActionResult DeleteVideo(int? videoid)
        {
            return Json("", JsonRequestBehavior.AllowGet);
        } 
```

**调试图像**

![在此处输入图像描述](https://i.stack.imgur.com/ogd0G.png)

**单击“删除”时，它调用“编辑”而不是“删除”**

![在此处输入图像描述](https://i.stack.imgur.com/URmH5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:38:23.663

像这样更改代码：

```
$("#gridVirtualTours").on('click', '.video', function (e) {
            e.stopPropagation();
            var thisElement = $(this);
            var tr = $(this).closest('tr');
            $.ajax({
                url: "@Url.Action("DeleteVideo" , "Controller" , new {area ="area if it's not in base controller folder"})",
                type: 'POST',
                data: { videoid: thisElement.attr('id') },
                success: function (result) {
                    if (result) tr.remove();
                }
            });
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T07:41:19.663

尝试这个

```
url: '@Url.Action("DeleteVideo","ControllerName")', 
```

代替

```
url: "deletevideo", 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T07:29:51.390

在 jquery ajax URL 属性中使用正确的区分大小写的动作名称。IE`url: "DeleteVideo",`

# asp.net-mvc - 如何从控制器中的视图获取请求的参数

> ID：16163323
> 
> 赞同：2
> 
> 时间：2013-04-23T07:22:41.280
> 
> 标签：asp.net-mvc

我是 mvc 的新手，我想知道如何从视图中获取请求的参数。

这是我的查看代码：

```
@using (Ajax.BeginForm("LoadPartialView", new AjaxOptions())) {
<input type="submit" value="Submit" id="submit1"/>  } 
```

我想在控制器的操作方法中获取值`Submit`或 id 。我怎样才能做到这一点？`submit1``LoadPartialView`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:48:32.463

默认情况下，您需要`name`将任何`input`字段的属性序列化为`FormcCollection`，例如：

```
<input type="text" value="yourvalue" name="yourname" id="yourid"/> 
```

然后您可以通过以下方式检索此类值：

```
public ActionResult YourAction(FormCollection formCollection)
{
    var val = formsCollection["yourname"];
    //...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:41:57.997

在不了解视图模型或控制器方法的情况下，您可以通过执行以下操作来获取值：

看法：

```
@using (Ajax.BeginForm("MyAction", new AjaxOptions())) {
    <input type="submit" name="submit" value="Submit" id="submit1"/> 
} 
```

控制器：

```
[HttpPost]
public ActionResult MyAction(FormCollection f)
{
    var submitValue = f["submit"];
} 
```

或者，将您的视图键入具有`submit`属性的模型并将其传递给您的控制器方法，执行以下操作：

模型：

```
public class MyModel
{
    public String Submit { get; set; }
} 
```

看法：

```
@model MyModel

@using (Ajax.BeginForm("MyAction", new AjaxOptions())) {
    <input type="submit" name="Submit" value="Submit" id="submit1"/> 
} 
```

控制器：

```
[HttpPost]
public ActionResult MyAction(MyModel model)
{
    var submitValue = model.Submit;
} 
```

后一种模型显然更具可扩展性，因为您可以将此值与其他表单值分组。

# liferay - 具有多个服务器实例的 Liferay

> ID：16163326
> 
> 赞同：7
> 
> 时间：2013-04-23T07:23:06.993
> 
> 标签：liferay, liferay-6, liferay-ide

我正在同时处理多个 Liferay 项目（不同的门户、插件、用户和用户组等），并且经常需要在它们之间切换。这个开关需要很多步骤，比如

*   编辑 portal-ext.properties（更改 Liferay 数据库，并编辑一些自定义项目特定属性），并编辑“portal-setup-wizard.properties”
*   从 Eclipse 服务器实例中添加/删除 portlet 主题和挂钩，有时清理 Tomcat 的“数据”“Webapps”和“工作”文件夹
*   转到 Liferay 的控制面板/服务器/插件安装并重新索引 portlet，例如“用户和组织”或“文档和媒体”

因此，我认为使用新的 tomcat 和 JRE 为每个项目创建一个新的服务器实例是一个不错的主意。当我不得不切换项目时，我可以停止旧服务器并启动另一个。起初，我认为（实际上被建议）使用**相同的 Liferay Plugins SDK**（6.1.0）应该没问题，只要**服务器实例是相同的版本**。

实际上，这并不是 100% 完美的。虽然大部分工作已经完成，但这里和那里都有一些问题，比如没有正确部署主题，没有应用挂钩等。据我了解，有一些 [Liferay SDK] - [Liferay Server] 绑定，并且这意味着只有 1 个服务器（我创建的第一个）可以完全工作。例如，通过调查 [Liferay SDK 文件夹]/bild.[用户名].properties，我可以看到一些引用特定服务器/JRE 位置的属性：

```
 app.server.portal.dir
app.server.lib.global.dir
app.server.deploy.dir
app.server.type
app.server.dir 
```

所以，我的问题是，我应该如何处理多个 Liferay 项目？

1.  多服务器实践是处理多个项目的好方法吗？
2.  如果是，我应该为每个服务器创建不同的 SDK 吗？也许还有一个不同的 Eclipse 工作区？或者有什么方法可以使用相同的 SDK
3.  使用不同 Liferay 版本的服务器怎么样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-27T00:06:54.593

就个人而言，我为每个项目设置了自己的源、tomcat、数据库等，即使这意味着重复。如今，存储很便宜，这使这成为可能。当然，您的里程可能非常高，但我想我会与您分享我的设置。

我有一个项目目录，其中包含我的所有项目，如下所示：

```
/projects
    /foo-project
    /bar-project
    /my-project 
```

在我的一个项目中

```
/my-project
    /tomcat
        /bin
        /conf
        ...
    /src
        /portal
            ... my portal source ...
        /plugins
            ... my plugin source ...
    /portal-ext.properties 
```

*   然后，我将 tomcat 设置为使用不同的端口（8080、8081、8082 等），这样如果我必须或想要的话，我可以让它们全部运行。
*   我设置 Liferay 为每个 Liferay 实例使用不同的数据库。
*   我把它`portal-ext.properties`作为tomcat 目录的兄弟，Liferay 将读取这个文件（假设默认行为）。这提供了快速简便的编辑以及弄清楚您是如何设置每个项目的。

优点应该很清楚。您可以从一个项目“走开”进入另一个项目，而无需拆除和设置。当你回来的时候，一切都还是你离开时的样子。如果您想回答有关您尚未从事的项目的问题，上下文切换也更快且更有帮助。

根据每个项目的复杂性，多实例可能不适合您。Hooks 和 EXT 可能会相互冲突，并且您的项目似乎已经存在这种情况。

如果你能负担得起空间（不多），这是我作为 Liferay 开发人员找到的最快的方式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-26T13:08:06.360

如果我们开始在我们公司开展一个新的 Liferay 项目，我们会设置：

*   一个新的数据库模式，
*   一个新的、干净的 Liferay 服务器与该模式连接，并且
*   一个全新的 Eclipse 工作区，带有
*   一个干净的 SDK 项目

只有这样，您才能确保拥有完全独立的项目。要切换到另一个项目，只需关闭当前的 Liferay 服务器，启动新的服务器并切换到 Eclipse 中的正确工作区。这一切都不会超过 2 分钟，比共享工作区和服务器时必须执行的所有清理操作要少得多。

在我看来，这是大多数开发团队的做法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-30T11:25:32.750

为什么要在一台计算机上处​​理所有这些复杂问题？我使用 Oracle VirtualBox 并为每个项目设置一个单独的 VM。即使我在笔记本电脑上工作，它也有 8 个内核，我将内存增加到 16GB，并为每台机器设置了 4GB 的 RAM。

我可以同时运行多个虚拟机，并将所有活动项目设置为 Chrome 中的主页。使用桥接网络，每个 VM 都有自己的 IP 地址，它们都在 8080 上侦听。

另一个好处是，虽然我的主要项目是使用 Eclipse Indigo 和 LR 6.1 CE GA1 开发的，但我还有另一个使用 Eclipse Juno、其特定 IDE 插件和 LR 6.1.1 CE GA2 的项目。所以它也可以作为一个新版本的测试器。

VirtualBox 是免费的。内存很便宜。请记住，您可以在不关闭虚拟机的情况下让虚拟机进入睡眠状态。这大约需要 10-20 秒，再次唤醒它需要 30-60 秒。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-29T08:13:29.677

最简单的解决方案是：

创建 3 个不同的用户，Liferay SDK 的`bundle.properties` 文件对于每个用户都是独立的。因此，假设您想使用相同的 sdk 运行 3 台服务器。创建3个文件，如

bundle.user1.properties bundle.user2.properties bundle.user3.properties

现在，当您想为服务器 1 部署某些东西时，使用 user1 登录服务器并尝试部署 portlet，这将读取 bundle.user1.properties 并将 portlet/hook 部署到指定位置。

希望这将解决您的部署问题。

此外，当您有 3 个用户时，您可以在不同的用户帐户中同时运行 3 个不同的服务器，这样，它们将是安全的，并且除了管理员之外，没有人可以关闭相同的。

希望这可以帮助！

# import - 在商店中找不到指定的对象

> ID：16163330
> 
> 赞同：0
> 
> 时间：2013-04-23T07:23:14.393
> 
> 标签：import, office365, exchange-server-2007, pst

我有一个客户端的 Office 365 域，我目前正在尝试将 PST 文件导入 O365 地址。我搜索了这个问题，发现了[Microsoft Exchange PST Capture](http://www.microsoft.com/en-us/download/details.aspx?id=36789)。

我安装了它，提供了我的 Office 365 域的管理员凭据并开始导入。但它失败了这个错误：

> 导入错误：在商店中找不到指定的对象

在日志 ( `C:\ProgramData\Microsoft\Exchange\PST Capture\Logs\PST Capture Service`) 中，我可以找到：

```
10:28:22.226|Debug  |ImportListImporter  |11 |Error importing D:\ExportPst\dirfond.pst from C:\PSTStaging\13ec9aa3-8887-41fd-8a97-d2f74d7408de.pst
Microsoft.Exchange.WebServices.Data.ServiceResponseException: The specified object was not found in the store.
   at Microsoft.Exchange.WebServices.Data.ServiceResponse.InternalThrowIfNecessary()
   at Microsoft.Exchange.WebServices.Data.MultiResponseServiceRequest`1.Execute()
   at Microsoft.Exchange.WebServices.Data.ExchangeService.BindToFolder[TFolder](FolderId folderId, PropertySet propertySet)
   at RedGate.PSTImporterForExchange.ImportEngine.PstEwsImporter.BindToCorrectFolder(ExchangeService service, ImportOptions options, WellKnownFolderName& rootname, Boolean& failover)
   at RedGate.PSTImporterForExchange.ImportEngine.PstEwsImporter.StartImport(String pstPath, String passWord, ImportOptions options, List`1& problems)
   at RedGate.PSTImporterForExchange.CentralService.ImportListImporter.<>c__DisplayClass8.<ImportFile>b__5(Object param0)

10:28:22.227|Debug  |ImportListImporter  |11 |Keeping Exception ex for result 12459148
Microsoft.Exchange.WebServices.Data.ServiceResponseException: The specified object was not found in the store.
   at Microsoft.Exchange.WebServices.Data.ServiceResponse.InternalThrowIfNecessary()
   at Microsoft.Exchange.WebServices.Data.MultiResponseServiceRequest`1.Execute()
   at Microsoft.Exchange.WebServices.Data.ExchangeService.BindToFolder[TFolder](FolderId folderId, PropertySet propertySet)
   at RedGate.PSTImporterForExchange.ImportEngine.PstEwsImporter.BindToCorrectFolder(ExchangeService service, ImportOptions options, WellKnownFolderName& rootname, Boolean& failover)
   at RedGate.PSTImporterForExchange.ImportEngine.PstEwsImporter.StartImport(String pstPath, String passWord, ImportOptions options, List`1& problems)
   at RedGate.PSTImporterForExchange.CentralService.ImportListImporter.<>c__DisplayClass8.<ImportFile>b__5(Object param0)

10:28:22.232|Debug  |ImportListImporter  |13 |Rethrow od result 12459148

10:28:22.234|Trace  |DBImportFile        |13 |Saving 58 False Error D:\ExportPst\dirfond.pst

10:28:22.318|Error  |ImportListImporter  |13 |Import error: 
Microsoft.Exchange.WebServices.Data.ServiceResponseException: The specified object was not found in the store.
   at RedGate.PSTImporterForExchange.CentralService.ImportListImporter.ImportFile(RepositoryImportFile file)

10:28:22.320|Error  |Import Action       |13 |Error during import
Microsoft.Exchange.WebServices.Data.ServiceResponseException: The specified object was not found in the store.
   at RedGate.PSTImporterForExchange.CentralService.ImportListImporter.ImportFile(RepositoryImportFile file)
   at RedGate.PSTImporterForExchange.CentralService.Actions.StartImportAction.RunImport(Object state) 
```

目标邮箱存在。那是因为来自 Exchange 2007（PST 文件的来源）的电子邮件地址与 O365 不同吗？

我找不到任何关于此的信息，因此非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-01T07:55:53.787

我通过为对邮箱运行命令的用户设置权限来解决此错误。

> Add-MailboxPermission -Identity [TargetMailbox] -User [ExecutingAccount] -AccessRights FullAccess

# sql-server - 将 NOT EXISTS 与 INSERT ... SELECT 结合使用

> ID：16163332
> 
> 赞同：1
> 
> 时间：2013-04-23T07:23:19.517
> 
> 标签：sql-server

以下代码根据另一行中的值将新行插入到表中，但它也允许重复数据。我想使用 NOT EXISTS 以便如果已经有一行具有该值，那么它不会插入另一个，但不确定如何整合它。

```
INSERT INTO [Grading].[dbo].[tblObservations]
       ([FormID]
       ,[Data]
       ,[UserID]
       ,[DateOfObservation]
       ,[Final]
       ,[ValidTo]
       ,[ID_Grading]
       ,[ID_ObservationKind]
       ,[Created]
       ,[Modified]
       ,[RowVersion])
SELECT [FormID]
  ,'0'
  ,[UserID]
  ,[DateOfObservation]
  ,[Final]
  ,[ValidTo]
  ,[ID_Grading]
  ,40
  ,[Created]
  ,[Modified]
  ,[RowVersion]
  FROM [Grading].[dbo].[tblObservations]
  WHERE [ID_ObservationKind] = 39 AND [Data] = 'No' AND [Final] = 1 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:26:56.480

你可以试试

```
IF NOT EXISTS
    (
    SELECT 1
FROM [Grading].[dbo].[tblObservations]
WHERE [ID_ObservationKind] = 39 AND [Data] = 'No' AND [Final] = 1
    )

    BEGIN
        -- Insert script
    END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T07:31:35.140

试试这个——

```
USE [Grading]

INSERT INTO [dbo].[tblObservations]
(
      FormID
    , Data
    , UserID
    , DateOfObservation
    , Final
    , ValidTo
    , ID_Grading
    , ID_ObservationKind
    , Created
    , Modified
    , [RowVersion]
)
SELECT 
      t.FormID
    , '0'
    , t.UserID
    , t.DateOfObservation
    , t.Final
    , t.ValidTo
    , t.ID_Grading
    , 40
    , t.Created
    , t.Modified
    , t.[RowVersion]
FROM dbo.tblObservations t
LEFT JOIN dbo.tblObservations t2 ON 
        t.FormID = t2.FormID
    AND t2.Data = '0'
    AND t.UserID = t2.UserID
    AND t.DateOfObservation = t2.DateOfObservation
    AND t.Final = t2.Final
    AND t.ValidTo = t2.ValidTo
    AND t.ID_Grading = t2.ID_Grading
    AND t2.ID_ObservationKind = 40
    AND t.Created = t2.Created
    AND t.Modified = t2.Modified
    AND t.[RowVersion] = t2.[RowVersion]
WHERE t.ID_ObservationKind = 39 
    AND t.Data = 'No' 
    AND t.Final = 1
    AND t2.FormID IS NULL 
```

或者试试这个 -

```
INSERT INTO [dbo].[tblObservations]
(
      FormID
    , Data
    , UserID
    , DateOfObservation
    , Final
    , ValidTo
    , ID_Grading
    , ID_ObservationKind
    , Created
    , Modified
    , [RowVersion]
)
SELECT 
      t.FormID
    , '0'
    , t.UserID
    , t.DateOfObservation
    , t.Final
    , t.ValidTo
    , t.ID_Grading
    , 40
    , t.Created
    , t.Modified
    , t.[RowVersion]
FROM dbo.tblObservations t
WHERE t.ID_ObservationKind = 39 
    AND t.Data = 'No' 
    AND t.Final = 1
    AND NOT EXISTS(
        SELECT 1 
        FROM dbo.tblObservations t2
        WHERE t2.ID_ObservationKind = 39 
            AND t2.Data = 'No' 
            AND t2.Final = 1
    ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T07:27:40.860

您正在寻找[在 SQL 中进行“合并”或“更新插入”](http://en.wikipedia.org/wiki/Merge_%28SQL%29)。根据您的数据库，有多种方法可以做到这一点。如果你使用 MySQL，你会想要使用[它的 INSERT... ON DUPLICATE KEY UPDATE 语法。](http://dev.mysql.com/doc/refman/5.5/en/insert-on-duplicate.html)

# jquery - 在 div 中包裹箭头：AnythingSlider

> ID：16163335
> 
> 赞同：-1
> 
> 时间：2013-04-23T07:23:29.933
> 
> 标签：jquery, html, css, anythingslider

我需要你的快速帮助。我正在使用任何滑块。左右箭头应该在 div 中包装以满足设计要求，所以有什么方法可以将它们包装在 div 中。

```
<span class="arrow back" style=""></span> 
<span class="arrow next" style=""></span> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T07:24:51.143

使用 jQuery：

```
$('.arrow').wrapAll('<div /'); 
```

# android - 在获取所有联系人列表时在异步任务中显示进度更新对话框

> ID：16163338
> 
> 赞同：0
> 
> 时间：2013-04-23T07:23:38.543
> 
> 标签：android, android-asynctask, progress

我正在显示所有联系人列表，我已经使用了 AsyncTask 我想显示进度更新对话框，以便用户可以了解剩余的完成时间。我有以下代码但不清楚，如何显示进度更新对话框。

**代码**

```
public class MainActivity extends Activity {
    /** Called when the activity is first created. */
    Cursor cur;
    ContentResolver cr;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        cr = getContentResolver();
        cur = cr.query(ContactsContract.Contacts.CONTENT_URI, null, null, null,
                null);
        GetContact contact = new GetContact();
        contact.execute(cur);
    }

    class GetContact extends AsyncTask<Cursor, Void, Void> {
        private ProgressDialog progress;

        @Override
        protected Void doInBackground(Cursor... params) {
            // TODO Auto-generated method stub
            System.out.println("value of param==================="
                    + params.length);
            readContacts();
            return null;
        }

        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub
            super.onPreExecute();
            progress = ProgressDialog
                    .show(MainActivity.this, "", "Loding.....");
        }

        @Override
        protected void onPostExecute(Void result) {
            // TODO Auto-generated method stub
            super.onPostExecute(result);
            progress.dismiss();
        }

    }

    public void readContacts() {
        // ContentResolver cr = getContentResolver();
        // Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI, null,
        // null, null, null);
        System.out.println("value of cursor=================================="
                + cur.getCount());
        if (cur.getCount() > 0) {
            while (cur.moveToNext()) {
                String id = cur.getString(cur
                        .getColumnIndex(ContactsContract.Contacts._ID));
                String name = cur
                        .getString(cur
                                .getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
                if (Integer
                        .parseInt(cur.getString(cur
                                .getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {
                    System.out
                            .println("name : ==================================="
                                    + name + ", ID : " + id);

                    // get the phone number
                    Cursor pCur = cr.query(
                            ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
                            null,
                            ContactsContract.CommonDataKinds.Phone.CONTACT_ID
                                    + " = ?", new String[] { id }, null);
                    while (pCur.moveToNext()) {
                        String phone = pCur
                                .getString(pCur
                                        .getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                        System.out
                                .println("phone++++++++++++++++++++++++++++++++++"
                                        + phone);
                    }
                    pCur.close();

                    // get email and type

                    Cursor emailCur = cr.query(
                            ContactsContract.CommonDataKinds.Email.CONTENT_URI,
                            null,
                            ContactsContract.CommonDataKinds.Email.CONTACT_ID
                                    + " = ?", new String[] { id }, null);
                    while (emailCur.moveToNext()) {
                        // This would allow you get several email addresses
                        // if the email addresses were stored in an array
                        String email = emailCur
                                .getString(emailCur
                                        .getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA));
                        String emailType = emailCur
                                .getString(emailCur
                                        .getColumnIndex(ContactsContract.CommonDataKinds.Email.TYPE));

                        System.out.println("Email " + email + " Email Type : "
                                + emailType);
                    }
                    emailCur.close();

                    // Get note.......
                    String noteWhere = ContactsContract.Data.CONTACT_ID
                            + " = ? AND " + ContactsContract.Data.MIMETYPE
                            + " = ?";
                    String[] noteWhereParams = new String[] {
                            id,
                            ContactsContract.CommonDataKinds.Note.CONTENT_ITEM_TYPE };
                    Cursor noteCur = cr.query(
                            ContactsContract.Data.CONTENT_URI, null, noteWhere,
                            noteWhereParams, null);
                    if (noteCur.moveToFirst()) {
                        String note = noteCur
                                .getString(noteCur
                                        .getColumnIndex(ContactsContract.CommonDataKinds.Note.NOTE));
                        System.out.println("Note " + note);
                    }
                    noteCur.close();

                    // Get Postal Address....

                    String addrWhere = ContactsContract.Data.CONTACT_ID
                            + " = ? AND " + ContactsContract.Data.MIMETYPE
                            + " = ?";
                    String[] addrWhereParams = new String[] {
                            id,
                            ContactsContract.CommonDataKinds.StructuredPostal.CONTENT_ITEM_TYPE };
                    Cursor addrCur = cr.query(
                            ContactsContract.Data.CONTENT_URI, null, null,
                            null, null);
                    while (addrCur.moveToNext()) {
                        String poBox = addrCur
                                .getString(addrCur
                                        .getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.POBOX));
                        String street = addrCur
                                .getString(addrCur
                                        .getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.STREET));
                        String city = addrCur
                                .getString(addrCur
                                        .getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.CITY));
                        String state = addrCur
                                .getString(addrCur
                                        .getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.REGION));
                        String postalCode = addrCur
                                .getString(addrCur
                                        .getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.POSTCODE));
                        String country = addrCur
                                .getString(addrCur
                                        .getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.COUNTRY));
                        String type = addrCur
                                .getString(addrCur
                                        .getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.TYPE));

                        // Do something with these....

                    }
                    addrCur.close();

                    // Get Instant Messenger.........
                    String imWhere = ContactsContract.Data.CONTACT_ID
                            + " = ? AND " + ContactsContract.Data.MIMETYPE
                            + " = ?";
                    String[] imWhereParams = new String[] {
                            id,
                            ContactsContract.CommonDataKinds.Im.CONTENT_ITEM_TYPE };
                    Cursor imCur = cr.query(ContactsContract.Data.CONTENT_URI,
                            null, imWhere, imWhereParams, null);
                    if (imCur.moveToFirst()) {
                        String imName = imCur
                                .getString(imCur
                                        .getColumnIndex(ContactsContract.CommonDataKinds.Im.DATA));
                        String imType;
                        imType = imCur
                                .getString(imCur
                                        .getColumnIndex(ContactsContract.CommonDataKinds.Im.TYPE));
                    }
                    imCur.close();

                    // Get Organizations.........

                    String orgWhere = ContactsContract.Data.CONTACT_ID
                            + " = ? AND " + ContactsContract.Data.MIMETYPE
                            + " = ?";
                    String[] orgWhereParams = new String[] {
                            id,
                            ContactsContract.CommonDataKinds.Organization.CONTENT_ITEM_TYPE };
                    Cursor orgCur = cr.query(ContactsContract.Data.CONTENT_URI,
                            null, orgWhere, orgWhereParams, null);
                    if (orgCur.moveToFirst()) {
                        String orgName = orgCur
                                .getString(orgCur
                                        .getColumnIndex(ContactsContract.CommonDataKinds.Organization.DATA));
                        String title = orgCur
                                .getString(orgCur
                                        .getColumnIndex(ContactsContract.CommonDataKinds.Organization.TITLE));
                    }
                    orgCur.close();
                }
            }
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:48:07.727

1）您必须`onProgressUpdate()`覆盖[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)。在那里你可以更新你的progresDialog。

2)`readContacts()`进入 GetContact 类

3）您必须在**循环**`publishProgress()`中的某处调用以通知进度已更新并将被调用。`readContacts()` **`onProgressUpdate()`**

# sql-server - uups：备份mssql服务器数据库文件

> ID：16163340
> 
> 赞同：0
> 
> 时间：2013-04-23T07:23:43.517
> 
> 标签：sql-server

我必须将一个数据库从第一台服务器传输到第二台服务器。我从第一台服务器收到 Mydatababase.bak 文件，我将此文件复制到文件夹中的第二台服务器

```
C:\Program Files\Microsoft SQL
 Server\MSSQL11.SQLEXPRESS\MSSQL\Backup\Mydatabase_BACKUP.bak 
```

在 MSSQL Server 的 RESTORE DATABASE 对话框中，我现在在选择 Backop 文件时收到以下错误

```
 C:\Program Files\Microsoft SQL      
     Server\MSSQL11.SQLEXPRESS\MSSQL\Backup\MyDatabase_Bak.bak 
    : Family count:2 : Missing family sequence number :1 
```

错误是什么意思？现在缺少什么信息？

# d3.js - 在 JavaScript 中使用 Node-Link 范式可视化数据关系？

> ID：16163341
> 
> 赞同：1
> 
> 时间：2013-04-23T07:23:46.510
> 
> 标签：d3.js, javascript, nodes, data-visualization

哪个开源 JavaScript 框架/库有助于以图形（节点链接）方式可视化遍历数据？

* * *

![实体 2 起点](https://i.stack.imgur.com/x4Xar.png)

一些说明我所寻求的技术细节：

*   需要传入：`(k=max number of nearest-neighbours to show), (starting point)`
*   给定`k=3`并点击“实体 1”；图表应以“实体 1”为中心，仅显示：“实体 1”、“实体 2”及其左侧的两个链接节点
*   JSON 数据源，如果节点不在先前的请求中，则需要新的 HTTP 请求

# caching - Char（3）字段@Id在eclipselink jpa中不可缓存

> ID：16163350
> 
> 赞同：1
> 
> 时间：2013-04-23T07:24:03.717
> 
> 标签：caching, jpa, eclipselink, glassfish-3, entities

由于历史原因，我的数据库中有一些带有 char(3) 主键的表。例如国家表。

当我找到实体时：

```
String id = "D  ";
Country c = em.find(Country.class, id); 
```

之后我可以看到：

```
c.getId()  --> "D" and not "D  " 
```

从数据库中一次又一次地读取实体。由于某种原因，缓存不起作用。我猜在缓存中，id 以“D”而不是“D”的形式存在。

```
20130423 09:15:14,495 FINEST   query                          Execute query     ReadObjectQuery(name="country" referenceClass=Country )
20130423 09:15:14,498 FINEST   connection                     reconnecting to external connection pool
20130423 09:15:14,498 FINE     sql                            SELECT countryID, countryNAME, countryTELCODE, countryTOPLEVELDOMAIN, countryINTTELPREFIX FROM geo.COUNTRY WHERE (countryID = ?)
bind => [D  ]
20130423 09:15:14,508 FINEST   query                          Execute query ReadObjectQuery(name="country" referenceClass=Country )
20130423 09:15:14,508 FINEST   connection                     reconnecting to external connection pool
20130423 09:15:14,508 FINE     sql                            SELECT countryID, countryNAME, countryTELCODE, countryTOPLEVELDOMAIN, countryINTTELPREFIX FROM geo.COUNTRY WHERE (countryID = ?)
bind => [D  ] 
```

我试图设置 @Column(length=3) 但它没有效果。

有没有人知道为什么缓存不能正常工作。

谢谢哈桑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:23:31.780

默认情况下，EclipseLink 会修剪 CHAR 字段的尾随空格。这可以禁用。

见， [http://wiki.eclipse.org/EclipseLink/FAQ/JPA#How_to_avoid_trimming_the_trailing_spaces_on_a_CHAR_field.3F](http://wiki.eclipse.org/EclipseLink/FAQ/JPA#How_to_avoid_trimming_the_trailing_spaces_on_a_CHAR_field.3F)

# ruby-on-rails - 在 rails 中显示 base64 编码的图像

> ID：16163353
> 
> 赞同：6
> 
> 时间：2013-04-23T07:24:10.080
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, base64

我正在向我的控制器发送一个 base64 图像，并按原样保存它。现在我需要显示该图像。这是我正在做的显示，但图像没有显示：

```
<img src="<%= Base64.decode64(@data_obj.first.desc) %>"/> 
```

为了编码，我使用了这个 java-script 函数`encodeURIComponent();`

我的编码图像格式：

```
data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/........ 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-23T07:38:26.077

您不需要解码 base64

```
<img src="data:image/jpeg;base64,..." /> 
```

应该管用

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-01T03:10:00.127

Using Helper: `<%= image_tag "data:image/jpeg;base64,#{@image}" %>`
Do not forget to put double quotes, because the interpolation using #{}

# css - 菜单和子菜单的 iPad 问题

> ID：16163356
> 
> 赞同：1
> 
> 时间：2013-04-23T07:24:25.067
> 
> 标签：css, ipad

我的桌面网站有菜单和子菜单。子菜单出现在菜单悬停时。带有空白标签的菜单仅作为具有相应链接页面的子菜单。它在桌面上运行良好。

在 iPad 中访问相同内容时，单击菜单会显示子菜单，但同一页面会从第一个子菜单重定向到 href 链接。我们只想打开子菜单而不是页面重定向。

我们无法从菜单中删除空白标签，因为它停止在 iPad 中显示子菜单。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-20T07:23:30.653

假设您的菜单如下所示：

```
<ul>
  <li>
    <a href="/">Menu Level 1</a>
    <ul>
      <li>
        <a href="/">Menu Level 2</a>
       </li>
    </ul>
  </li>
</ul> 
```

在您的 jQuery“文档就绪”代码中尝试以下内容：

```
if ('ontouchstart' in window || 'ontouch' in window) {
  $('ul > li > a').on('touchstart',function(e){
    if (!$(this).parent().hasClass('touchOpen')) {
      $('li.touchOpen').removeClass('touchOpen');
      $(this).parent().addClass('touchOpen');
      return false;
    }
  });
} 
```

当顶部菜单中的链接被触摸时，它将绑定一个事件，检查链接的父 LI 是否具有指定的类。如果它确实有类，那么什么也不会发生（即用户将继续到新页面）。如果它没有该类，则添加该类，并且链接不被跟踪。

然后你只需要添加“touchOpen”类和你的 :hover css;

```
li:focus ul,
li:hover ul,
li:active ul,
.touchOpen ul{
 /* css code to display the sub menu */
} 
```

# ios - 在 UIWebView 中以编程方式滚动 PDF

> ID：16163357
> 
> 赞同：0
> 
> 时间：2013-04-23T07:24:29.600
> 
> 标签：ios, pdf, ios6, uiwebview, scroll

我想在 UIWebView（iPad 应用程序）上滚动（向下），我将在其中以编程方式显示本地 pdf 文件。我已经使用界面生成器添加了一个 UIWebView 并将其链接。

```
@interface ViewController : UIViewController <UIWebViewDelegate>

@property (weak, nonatomic) IBOutlet UIWebView *webView;

@end 
```

这是我获取 pdf 文件和滚动的代码。webViewDidFinishLoad 函数被调用。

```
@synthesize webView = _webView;

- (void)viewDidLoad
{
    [super viewDidLoad];

    NSString *path = [[NSBundle mainBundle] pathForResource:@"test" ofType:@"pdf"];
    NSURL *targetURL = [NSURL fileURLWithPath:path];
    NSURLRequest *request = [NSURLRequest requestWithURL:targetURL];

    self.webView.delegate = self;
    [self.webView loadRequest:request];
}

#pragma mark - UIWebViewDelegate

- (void)webViewDidFinishLoad:(UIWebView *)webView
{
    NSLog(@"didLoad");

    self.webView.scrollView.contentOffset = CGPointMake(0, 500);
} 
```

我使用的是 iOS SDK 6.1，iOS 部署目标也是 6.1。

继承人日志：

```
2013-04-23 09:23:08.742 PDFViewer[3834:c07] DiskImageCache: Could not resolve the absolute path of the old directory.
2013-04-23 09:23:08.913 PDFViewer[3834:c07] didLoad 
```

UIWebView 不滚动。pdf仍然在第一页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T08:02:10.460

已经在这里回答 ---[如何在 uiwebview 上设置滚动位置，](https://stackoverflow.com/questions/8470991/how-to-set-scroll-position-on-uiwebview)延迟后尝试调用内容偏移代码片段

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:35:19.967

我认为您不需要设置`webView.scrollView.contentOffset`.

尝试这个

```
[webView setScalesPageToFit:YES]; 
```

# android - 构建 android 源代码后加载模拟器 (froyo)

> ID：16163360
> 
> 赞同：1
> 
> 时间：2013-04-23T07:24:36.473
> 
> 标签：android, android-emulator, android-source

我正在使用带有 Java-5 的 Ubuntu-10.04（32 位）并且我已经成功构建了 android2.2 源代码（已在目录中验证`system.img`和），但是当我启动我的模拟器时它只是加载。我也尝试通过以下方式启动它，`root.img``out/target/product/generic`

*   `out/host/linux-x86/bin/emulator -sysdir out/target/product/generic/ -system out/target/product/generic/system.img -ramdisk out/target/product/generic/ramdisk.img -data out/target/product/generic/userdata.img -kernel prebuilt/android-arm/kernel/kernel-qemu -sdcard sdcard.img -skindir sdk/emulator/skins -skin WVGA800 -scale 0.7 -memory 512 -partition-size 1024`

*   set_stuff_for_environment

*   导出 USE_CCACHE=1
    ccache -M 10G

我也重建了

```
lunch full-eng
$ make -j4 
```

但我仍然看不到主屏幕，它只是加载

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:31:46.753

我有同样的问题..
通过重新安装操作系统解决了

# monodevelop - 从 Google 服务器下载时出错

> ID：16163361
> 
> 赞同：2
> 
> 时间：2013-04-23T07:24:50.427
> 
> 标签：monodevelop, xamarin-studio

我已经从 Xamrin 下载了软件包，当我安装 Xamarin 安装程序时，出现如下错误。我已经尝试过[为 Android 安装 Xamarin Mono 中](https://stackoverflow.com/questions/9081104/installing-xamarin-mono-for-android)给出的说明，但得到了相同的结果。我已经尝试了 3 次。 ![在此处输入图像描述](https://i.stack.imgur.com/e1hws.png)

**日志：**

```
[2013-04-23 03:53:28.841] [Info] Software item 'Xamarin.iOS for Visual Studio': not up to date
[2013-04-23 03:53:28.848] [Info] Component 'Xamarin.iOS for Visual Studio' v. 1.0.897 absent
[2013-04-23 03:53:28.856] [Info] Detection complete
[2013-04-23 03:53:36.597] [Debug] Waiting for initial task to complete.
[2013-04-23 03:53:36.606] [Debug] Initial task already completed.
[2013-04-23 03:53:36.617] [Debug] Detection completed.
[2013-04-23 03:53:42.250] [Info] User chose to update Android SDK at: <USER_HOME>\Android\android-sdk
[2013-04-23 03:53:45.272] [Info] 11 Android SDK components need to be downloaded.
[2013-04-23 03:53:45.281] [Debug] Enqueueing component: platform-tools ("platform tools")
[2013-04-23 03:53:45.289] [Debug] Enqueueing component: tools ("tools")
[2013-04-23 03:53:45.298] [Debug] Enqueueing component: android-7 ("Android SDK Platform 2.1_r3")
[2013-04-23 03:53:45.306] [Debug] Enqueueing component: android-8 ("Android SDK Platform 2.2_r3")
[2013-04-23 03:53:45.316] [Debug] Enqueueing component: android-10 ("Android SDK Platform 2.3.3._r2")
[2013-04-23 03:53:45.324] [Debug] Enqueueing component: android-12 ("Android SDK Platform 3.1, revision 3")
[2013-04-23 03:53:45.333] [Debug] Enqueueing component: android-14 ("Android SDK Platform 4.0")
[2013-04-23 03:53:45.340] [Debug] Enqueueing component: system-image-14 ("Android SDK Platform 4.0")
[2013-04-23 03:53:45.350] [Debug] Enqueueing component: android-15 ("Android SDK Platform 4.0.3")
[2013-04-23 03:53:45.361] [Debug] Enqueueing component: system-image-15 ("Android SDK Platform 4.0.3")
[2013-04-23 03:53:45.369] [Debug] Enqueueing component: NDK r8d ("Android NDK r8d (it may take a while)")
[2013-04-23 03:53:45.478] [Debug] Download service starting.
[2013-04-23 03:53:45.990] [Debug] Download size for 'http://dl.google.com/android/installer_r21-windows.exe': 77523031
[2013-04-23 03:53:45.998] [Debug] Download size for 'http://dl.google.com/android/repository/platform-tools_r16.0.2-windows.zip': 11948088
[2013-04-23 03:53:46.107] [Debug] Download size for 'http://dl.google.com/android/repository/tools_r21.1-windows.zip': 99246397
[2013-04-23 03:53:46.720] [Debug] Download size for 'http://dl.google.com/android/repository/android-2.1_r03-linux.zip': 70142829
[2013-04-23 03:53:46.728] [Debug] Download size for 'http://dl.google.com/android/repository/android-2.2_r03-linux.zip': 74652366
[2013-04-23 03:53:47.236] [Debug] Download size for 'http://dl.google.com/android/repository/android-2.3.3_r02-linux.zip': 85470907
[2013-04-23 03:53:47.345] [Debug] Download size for 'http://dl.google.com/android/repository/android-3.1_r03-linux.zip': 106472351
[2013-04-23 03:53:47.453] [Debug] Download size for 'http://dl.google.com/android/repository/android-14_r03.zip': 45919570
[2013-04-23 03:53:47.562] [Debug] Download size for 'http://dl.google.com/android/repository/sysimg_armv7a-14_r02.zip': 99621822
[2013-04-23 03:53:47.671] [Debug] Download size for 'http://dl.google.com/android/repository/android-15_r03.zip': 44414679
[2013-04-23 03:53:47.680] [Debug] Download size for 'http://dl.google.com/android/repository/sysimg_armv7a-15_r02.zip': 96227377
[2013-04-23 03:53:47.789] [Debug] Download size for 'http://dl.google.com/android/ndk/android-ndk-r8d-windows.zip': 327014028
[2013-04-23 03:53:48.599] [Info] Installation of software items starting.
[2013-04-23 03:53:48.610] [Debug] Checking software item 'Java JDK'
[2013-04-23 03:53:48.622] [Info] Software item 'Java JDK' does not need to be installed
[2013-04-23 03:53:48.631] [Debug] Checking software item 'Android SDK'
[2013-04-23 03:53:48.639] [Debug] Checking software item 'GTK#'
[2013-04-23 03:53:48.648] [Info] Software item 'GTK#' does not need to be installed
[2013-04-23 03:53:48.656] [Debug] Checking software item 'Xamarin Studio'
[2013-04-23 03:53:48.664] [Info] Software item 'Xamarin Studio' does not need to be installed
[2013-04-23 03:53:48.672] [Debug] Checking software item 'Xamarin.Android for Visual Studio and Xamarin Studio'
[2013-04-23 03:53:48.680] [Debug] Checking software item 'Xamarin.iOS for Visual Studio'
[2013-04-23 03:53:48.689] [Debug] Starting installation task.
[2013-04-23 03:53:48.697] [Info] Background installation worker called.
[2013-04-23 03:53:48.706] [Info] Processing software items
[2013-04-23 03:53:48.714] [Info] Skipping installation of software item 'Java JDK'
[2013-04-23 03:53:48.721] [Info] Installing software item 'Android SDK'
[2013-04-23 03:53:48.729] [Info] Android SDK is waiting for download to finish.
[2013-04-23 03:53:51.648] [Debug] Download size for 'http://download.xamarin.com/MonoforAndroid/Windows/mono-android-4.6.04000.msi': 163536039
[2013-04-23 03:53:51.957] [Debug] Download size for 'http://download.xamarin.com/MonoTouchforVisualStudio/Windows/mtvs-1.0.897.0.msi': 44552752
[2013-04-23 03:53:51.965] [Info] Downloading from 'http://dl.google.com/android/installer_r21-windows.exe'.
[2013-04-23 03:53:51.973] [Debug] Setting download timeout for 'http://dl.google.com/android/installer_r21-windows.exe' to 60s
[2013-04-23 04:17:43.137] [Info] Downloading from 'http://dl.google.com/android/repository/platform-tools_r16.0.2-windows.zip'.
[2013-04-23 04:17:43.148] [Debug] Setting download timeout for 'http://dl.google.com/android/repository/platform-tools_r16.0.2-windows.zip' to 60s
[2013-04-23 04:17:43.458] [Debug] File <USER_HOME>\Temp\Xamarin\downloads\platform-tools_r16.0.2-windows.zip is a valid ZIP archive
[2013-04-23 04:17:43.467] [Debug] URL http://dl.google.com/android/repository/platform-tools_r16.0.2-windows.zip already fully downloaded.
[2013-04-23 04:17:43.475] [Info] Downloading from 'http://dl.google.com/android/repository/tools_r21.1-windows.zip'.
[2013-04-23 04:17:43.483] [Debug] Setting download timeout for 'http://dl.google.com/android/repository/tools_r21.1-windows.zip' to 60s
[2013-04-23 04:17:43.693] [Debug] File <USER_HOME>\Temp\Xamarin\downloads\tools_r21.1-windows.zip is a valid ZIP archive
[2013-04-23 04:17:43.705] [Debug] URL http://dl.google.com/android/repository/tools_r21.1-windows.zip already fully downloaded.
[2013-04-23 04:17:43.714] [Info] Downloading from 'http://dl.google.com/android/repository/android-2.1_r03-linux.zip'.
[2013-04-23 04:17:43.725] [Debug] Setting download timeout for 'http://dl.google.com/android/repository/android-2.1_r03-linux.zip' to 60s
[2013-04-23 04:17:43.936] [Debug] File <USER_HOME>\Temp\Xamarin\downloads\android-2.1_r03-linux.zip is a valid ZIP archive
[2013-04-23 04:17:43.945] [Debug] URL http://dl.google.com/android/repository/android-2.1_r03-linux.zip already fully downloaded.
[2013-04-23 04:17:43.953] [Info] Downloading from 'http://dl.google.com/android/repository/android-2.2_r03-linux.zip'.
[2013-04-23 04:17:43.961] [Debug] Setting download timeout for 'http://dl.google.com/android/repository/android-2.2_r03-linux.zip' to 60s
[2013-04-23 04:17:44.271] [Debug] File <USER_HOME>\Temp\Xamarin\downloads\android-2.2_r03-linux.zip is a valid ZIP archive
[2013-04-23 04:17:44.281] [Debug] URL http://dl.google.com/android/repository/android-2.2_r03-linux.zip already fully downloaded.
[2013-04-23 04:17:44.293] [Info] Downloading from 'http://dl.google.com/android/repository/android-2.3.3_r02-linux.zip'.
[2013-04-23 04:17:44.302] [Debug] Setting download timeout for 'http://dl.google.com/android/repository/android-2.3.3_r02-linux.zip' to 60s
[2013-04-23 04:17:44.715] [Debug] File <USER_HOME>\Temp\Xamarin\downloads\android-2.3.3_r02-linux.zip is a valid ZIP archive
[2013-04-23 04:17:44.724] [Debug] URL http://dl.google.com/android/repository/android-2.3.3_r02-linux.zip already fully downloaded.
[2013-04-23 04:17:44.733] [Info] Downloading from 'http://dl.google.com/android/repository/android-3.1_r03-linux.zip'.
[2013-04-23 04:17:44.741] [Debug] Setting download timeout for 'http://dl.google.com/android/repository/android-3.1_r03-linux.zip' to 60s
[2013-04-23 04:17:44.952] [Debug] File <USER_HOME>\Temp\Xamarin\downloads\android-3.1_r03-linux.zip is a valid ZIP archive
[2013-04-23 04:17:44.960] [Debug] URL http://dl.google.com/android/repository/android-3.1_r03-linux.zip already fully downloaded.
[2013-04-23 04:17:44.971] [Info] Downloading from 'http://dl.google.com/android/repository/android-14_r03.zip'.
[2013-04-23 04:17:44.980] [Debug] Setting download timeout for 'http://dl.google.com/android/repository/android-14_r03.zip' to 60s
[2013-04-23 04:17:46.500] [Debug] File <USER_HOME>\Temp\Xamarin\downloads\android-14_r03.zip is a valid ZIP archive
[2013-04-23 04:17:46.508] [Debug] URL http://dl.google.com/android/repository/android-14_r03.zip already fully downloaded.
[2013-04-23 04:17:46.517] [Info] Downloading from 'http://dl.google.com/android/repository/sysimg_armv7a-14_r02.zip'.
[2013-04-23 04:17:46.525] [Debug] Setting download timeout for 'http://dl.google.com/android/repository/sysimg_armv7a-14_r02.zip' to 60s
[2013-04-23 04:17:46.534] [Debug] File <USER_HOME>\Temp\Xamarin\downloads\sysimg_armv7a-14_r02.zip is a valid ZIP archive
[2013-04-23 04:17:46.642] [Debug] URL http://dl.google.com/android/repository/sysimg_armv7a-14_r02.zip already fully downloaded.
[2013-04-23 04:17:46.652] [Info] Downloading from 'http://dl.google.com/android/repository/android-15_r03.zip'.
[2013-04-23 04:17:46.661] [Debug] Setting download timeout for 'http://dl.google.com/android/repository/android-15_r03.zip' to 60s
[2013-04-23 04:17:46.973] [Debug] File <USER_HOME>\Temp\Xamarin\downloads\android-15_r03.zip is a valid ZIP archive
[2013-04-23 04:17:46.982] [Debug] URL http://dl.google.com/android/repository/android-15_r03.zip already fully downloaded.
[2013-04-23 04:17:46.990] [Info] Downloading from 'http://dl.google.com/android/repository/sysimg_armv7a-15_r02.zip'.
[2013-04-23 04:17:46.999] [Debug] Setting download timeout for 'http://dl.google.com/android/repository/sysimg_armv7a-15_r02.zip' to 60s
[2013-04-23 04:17:47.108] [Debug] File <USER_HOME>\Temp\Xamarin\downloads\sysimg_armv7a-15_r02.zip is a valid ZIP archive
[2013-04-23 04:17:47.117] [Debug] URL http://dl.google.com/android/repository/sysimg_armv7a-15_r02.zip already fully downloaded.
[2013-04-23 04:17:47.125] [Info] Downloading from 'http://dl.google.com/android/ndk/android-ndk-r8d-windows.zip'.
[2013-04-23 04:17:47.134] [Debug] Setting download timeout for 'http://dl.google.com/android/ndk/android-ndk-r8d-windows.zip' to 60s
[2013-04-23 04:53:23.445] [Exception] Failed to retrieve response for URL 'http://dl.google.com/android/ndk/android-ndk-r8d-windows.zip'
[2013-04-23 04:53:23.445] [Exception] System.Net.WebException: The operation has timed out.
[2013-04-23 04:53:23.445] [Exception] at System.Net.ConnectStream.Read(Byte[] buffer, Int32 offset, Int32 size)
[2013-04-23 04:53:23.445] [Exception] at Xamarin.Web.Installer.DownloadService.DoDownload(Int64 totalBytes, Stream responseStream, Stream outputStream, Object state)
[2013-04-23 04:53:23.445] [Exception] at Xamarin.Web.Installer.Utilities.DownloadUrl(HttpWebResponse response, String url, Action`4 doDownload, Boolean noCache, Object state)
[2013-04-23 04:53:23.445] [Exception] at Xamarin.Web.Installer.Utilities.DownloadUrl(String url, Action`4 doDownload, Func`3 webExceptionHandler, Boolean noCache, Object state, Int32 timeout)
[2013-04-23 04:53:23.960] [Exception] Zip verification exception
[2013-04-23 04:53:23.960] [Exception] Ionic.Zip.BadReadException: Could not read block - no data!  (position 0x0387D7D6)
[2013-04-23 04:53:23.960] [Exception] at Ionic.Zip.SharedUtilities._ReadFourBytes(Stream s, String message)
[2013-04-23 04:53:23.960] [Exception] at Ionic.Zip.ZipEntry.HandleUnexpectedDataDescriptor(ZipEntry entry)
[2013-04-23 04:53:23.960] [Exception] at Ionic.Zip.ZipEntry.ReadEntry(ZipContainer zc, Boolean first)
[2013-04-23 04:53:23.960] [Exception] at Ionic.Zip.ZipInputStream.GetNextEntry()
[2013-04-23 04:53:23.960] [Exception] at Xamarin.Web.Installer.Utilities.IsValidFile(String path)
[2013-04-23 04:53:24.068] [Exception] Error downloading URL 'http://dl.google.com/android/ndk/android-ndk-r8d-windows.zip' requested by 'Android SDK, web exception was thrown. Connection timed out
[2013-04-23 04:53:24.068] [Exception] System.Net.WebException: The operation has timed out.
[2013-04-23 04:53:24.068] [Exception] at System.Net.ConnectStream.Read(Byte[] buffer, Int32 offset, Int32 size)
[2013-04-23 04:53:24.068] [Exception] at Xamarin.Web.Installer.DownloadService.DoDownload(Int64 totalBytes, Stream responseStream, Stream outputStream, Object state)
[2013-04-23 04:53:24.068] [Exception] at Xamarin.Web.Installer.Utilities.DownloadUrl(HttpWebResponse response, String url, Action`4 doDownload, Boolean noCache, Object state)
[2013-04-23 04:53:24.068] [Exception] at Xamarin.Web.Installer.Utilities.DownloadUrl(String url, Action`4 doDownload, Func`3 webExceptionHandler, Boolean noCache, Object state, Int32 timeout)
[2013-04-23 04:53:24.068] [Exception] at Xamarin.Web.Installer.Utilities.DownloadUrl(String url, Action`4 doDownload, Boolean noCache, Object state, Int32 timeout)
[2013-04-23 04:53:24.068] [Exception] at Xamarin.Web.Installer.DownloadService.DownloadItem(DownloadServiceWorkItem item, Boolean firstDownload)
[2013-04-23 04:53:24.178] [Info] Downloading from 'http://download.xamarin.com/MonoforAndroid/Windows/mono-android-4.6.04000.msi'.
[2013-04-23 04:53:24.187] [Debug] Setting download timeout for 'http://download.xamarin.com/MonoforAndroid/Windows/mono-android-4.6.04000.msi' to 60s
[2013-04-23 04:53:24.196] [Exception] Android SDK: download failed with exception.
[2013-04-23 04:53:24.197] [Exception] System.Net.WebException: The operation has timed out.
[2013-04-23 04:53:24.197] [Exception] at System.Net.ConnectStream.Read(Byte[] buffer, Int32 offset, Int32 size)
[2013-04-23 04:53:24.197] [Exception] at Xamarin.Web.Installer.DownloadService.DoDownload(Int64 totalBytes, Stream responseStream, Stream outputStream, Object state)
[2013-04-23 04:53:24.197] [Exception] at Xamarin.Web.Installer.Utilities.DownloadUrl(HttpWebResponse response, String url, Action`4 doDownload, Boolean noCache, Object state)
[2013-04-23 04:53:24.197] [Exception] at Xamarin.Web.Installer.Utilities.DownloadUrl(String url, Action`4 doDownload, Func`3 webExceptionHandler, Boolean noCache, Object state, Int32 timeout)
[2013-04-23 04:53:24.197] [Exception] at Xamarin.Web.Installer.Utilities.DownloadUrl(String url, Action`4 doDownload, Boolean noCache, Object state, Int32 timeout)
[2013-04-23 04:53:24.197] [Exception] at Xamarin.Web.Installer.DownloadService.DownloadItem(DownloadServiceWorkItem item, Boolean firstDownload)
[2013-04-23 04:53:24.205] [Info] Status: failed.
[2013-04-23 04:53:24.214] [Exception] Installation of software item 'Android SDK' failed with exception.
[2013-04-23 04:53:24.214] [Exception] Xamarin.Web.Installer.InstallException: Download failed. ---> System.Net.WebException: The operation has timed out. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T16:21:17.317

我也遇到过同样的问题，过一会重试就会发现，它实际上是在后台下载的，我已经在一天之内多次这样做了，它通过了。我什至有它与以前的版本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-03T16:27:23.103

单击（重试）仅在某些情况下有效。在我的 win 7 开发机器上，几次重新启动，几次重新启动，我没有运气，做了谷歌搜索，发现这个堆栈问题看到上面的建议（重试）所以我点击了每次失败的重试......总共 107次，（是的，我数过）每次看起来安装程序都向前移动了 2 或 3 m/b，最终“完成”下载整个 Andriod SDK 以接收最后一条错误消息“从 Google 服务器下载错误.Andriod SDK”，并且重试按钮不再可用。我每 10 或 15 分钟运行几次（speedtest.net）测试以确保连接正常，并且以管理员身份运行安装程序，但运气不好。

# java - Android 设置启动画面（活动），如 Iphone 第 1 部分

> ID：16163365
> 
> 赞同：1
> 
> 时间：2013-04-23T07:24:57.650
> 
> 标签：java, android, xml, animation

我有三张图片，我希望它们像启动视图一样出现在第一个布局 xml 中，以便它们只能被查看一次，即当安装 app get 或 app get 是新更新时，该活动只会被调用一次，否则 app 应该总是从第二个活动开始，我不知道我应该如何开始：

![在此处输入图像描述](https://i.stack.imgur.com/3qDZt.png)

谁能告诉我如何做到这一点。

只显示一次飞溅。

**这个问题的下一部分在[这里](https://stackoverflow.com/questions/16164132/android-setting-up-splash-screenactivity-like-iphone-part2)**

编码将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T07:30:52.123

**完成欢迎屏幕内容后，在启动应用程序时在首选项中保存一个标志。在显示欢迎屏幕之前检查此标志。如果标志存在（换句话说，如果不是第一次），不要显示它。**

```
In your activity:

SharedPreferences mPrefs;
final String welcomeScreenShownPref = "welcomeScreenShown";

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mPrefs = PreferenceManager.getDefaultSharedPreferences(this);

    // second argument is the default to use if the preference can't be found
    Boolean welcomeScreenShown = mPrefs.getBoolean(welcomeScreenShownPref, false);

    if (!welcomeScreenShown) {
        // here you can launch another activity if you like
        // the code below will display a popup

        String whatsNewTitle = getResources().getString(R.string.whatsNewTitle);
        String whatsNewText = getResources().getString(R.string.whatsNewText);
        new AlertDialog.Builder(this).setIcon(android.R.drawable.ic_dialog_alert).setTitle(whatsNewTitle).setMessage(whatsNewText).setPositiveButton(
                R.string.ok, new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                        dialog.dismiss();
                    }
                }).show();
        SharedPreferences.Editor editor = mPrefs.edit();
        editor.putBoolean(welcomeScreenShownPref, true);
        editor.commit(); // Very important to save the preference
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:41:31.370

为此，您必须检测应用程序的首次启动。为此，您可以按照@Nirav 的建议存储一个布尔值。

对于闪屏，您可以考虑使用[Fragments](http://developer.android.com/guide/components/fragments.html)和[ViewPager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)创建一个仅在第一次显示的活动

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T07:28:55.450

尝试这个 ：

```
 public class MainActivity extends Activity {

private Thread mSplashThread;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    try {
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.splash);

        final MainActivity sPlashScreen = this;

        mSplashThread = new Thread() {
            @Override
            public void run() {
                try {
                    synchronized (this) {
                        wait(4000);
                    }
                } catch (InterruptedException ex) {
                }

                finish();
                Intent intent = new Intent();
                intent.setClass(sPlashScreen, StartNewActivity.class);// <-- Activity you want to start after Splash
                startActivity(intent);
            }
        };

        mSplashThread.start();
    } catch (Exception e) {
    }
}

@Override
public boolean onTouchEvent(MotionEvent evt) {
    try {
        if (evt.getAction() == MotionEvent.ACTION_DOWN) {
            synchronized (mSplashThread) {
                mSplashThread.notifyAll();
            }
        }
    } catch (Exception e) {
    }
    return true;

} 
```

}

你放一张图片`splash.xml`来显示

# pmd - 生成报告时出现 PMD 错误

> ID：16163366
> 
> 赞同：2
> 
> 时间：2013-04-23T07:24:59.100
> 
> 标签：pmd

我是使用 PMD 的新手。我尝试通过以下方式生成 XML 报告
`right-clicking the project > PMD> Generate Reports`

之后出现此错误对话框。

`An internal error occurred during: "RenderReport". java.lang.NullPointerException`

有人能帮我吗？为什么我不能在 PMD 中生成报告？

# java - 如何为集合的所有字段分配一个公共值？

> ID：16163368
> 
> 赞同：1
> 
> 时间：2013-04-23T07:25:05.543
> 
> 标签：java, collections, apache-commons-collection

我有一个名为 Employee 的 POJO 类，带有 empName 和 Salary。我有一个 Employee 集合作为包含员工详细信息的对象。现在我想将特定字段的值重置为某个常见值。在这种情况下，我想将列表中所有员工项目的薪水分配给“0”。

```
List<Employee> empList;

public class Employee{
    private String empName = "";
    private int empSalary = "";
} 
```

而不是使用 For/Foreach 遍历员工列表并为列表中的所有项目分配所需的值。

是否有任何简单或有效的方法可以使用任何 CollectionUtils（Apache commons 或任何其他）来实现相同的目标。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T07:35:23.797

从 Java 7 开始，对于集合的“批量”更新没有简洁的方法。希望这会在 Java 8 中变得更好，但现在我建议查看像番石榴这样的库：[http ://code.google.com/p/guava-libraries/wiki/FunctionalExplained](http://code.google.com/p/guava-libraries/wiki/FunctionalExplained)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T07:33:57.857

我相信您可以使用 Commons Collections 做到这一点（这是您建议使用的）：

```
CollectionUtils.forAllDo(empList, new Closure() {
    public void execute(Object empObject) {
        Employee emp = (Employee)empObject;
        emp.setEmpSalary(salaryValueToSet);
    }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T07:30:48.903

Salary 作为一个类变量将自动初始化为其默认值 0。只要创建对象，无论它是否在某个集合中，都会发生这种情况。

如果你想要一些其他的公共值，你可以在构造函数中适当地初始化它。

如果您想在对象被创建并添加到集合之后修改其属性，那么除了迭代集合并显式设置值之外没有其他方法。

# ios - iOS 在后台任务中生成视频

> ID：16163372
> 
> 赞同：2
> 
> 时间：2013-04-23T07:25:20.240
> 
> 标签：ios, multitasking

您将如何继续从图像创建长视频？这需要很长时间，用户会厌倦等待它，所以我正在考虑在后台生成电影并在完成后通知用户。

我的应用程序结构是这样的，我有一个 UINavigationController，它拥有一个带有模拟电影的控制器，只有一些图像随着 CoreAnimation 移动。然后我推送一个生成电影的新控制器。在控制器 2 中，我向控制器 1 发送请求，向我发送带有要在电影上写入的帧的图像（我使用 CoreGraphics 生成图像）。这几乎阻塞了一切，因为它需要很多时间并且是连续的。

我阅读了有关后台任务的信息，似乎是唯一的解决方案，但它们不会持续很长时间并且可能会在中间停止，生成 30 秒的视频大约需要 6 分钟。我也不能将我的应用声明为在后台运行，因为它不是 VoIP 或其他受支持的类型。

感谢您的想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T09:01:04.113

据我了解，您可以做到这一点，尽管您的应用程序只会运行有限的时间，但根据您视频的大小，这可能就足够了。事实上，我正是在我的动画创作应用程序[idAnimate - 用手指触摸 iPad 上制作动画的](http://www.idanimate.net)。据我所知，该应用程序将获得大约 10 分钟的时间来完成任务，这已经足够了。如果您的应用程序需要额外的时间，您可能想研究如何优化您的视频渲染算法、降低视频质量等。

无论如何，假设您使用 AVAssetWriter 生成视频，这里有一些关于我如何执行此操作的代码：首先，您必须进行调用以获得后台权限，并为您的时间完成后的操作提供一个块（背景任务到期处理程序）：

```
UIApplication *app = [UIApplication sharedApplication];

_backgroundRenderingID = [app beginBackgroundTaskWithExpirationHandler:^{
    [app endBackgroundTask:_backgroundRenderingID];
    _backgroundRenderingID = UIBackgroundTaskInvalid;
}]; 
```

之后，您可以开始渲染视频：

```
videoWriter = [[AVAssetWriter alloc] initWithURL:
               [NSURL fileURLWithPath:self.moviePath] fileType:AVFileTypeMPEG4
                                           error:&error];
NSParameterAssert(videoWriter);
... 
```

完成后，请确保让操作系统知道您的后台任务已完成：

```
 [[UIApplication sharedApplication] endBackgroundTask:_backgroundRenderingID]; 
```

我希望这有帮助。

# javascript - WebGL 给出一些错误

> ID：16163373
> 
> 赞同：0
> 
> 时间：2013-04-23T07:25:20.863
> 
> 标签：javascript, html, webgl

我正在尝试找出以下代码。但问题是它给了我一个错误，说 Uncaught Reference error: Detector is not defined。有人可以帮我弄这个吗。我无法弄清楚出了什么问题。我已经包含了所有需要的 javascript 插件以及这个文件。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
        <meta name="description" content="WebGL experiments - Connected Earth experiment">
        <meta name="keywords" content="callum,chrome,collada,earth,example,experiments,globe,google,hurricane tracker,linden,opengl,planet,sample,shader,spline,three.js,webgl,">       
        <link rel="stylesheet" media="all" href="button.css" />
        <script src="three.min.js"></script>
        <script src="Detector.js"></script>
        <script src="Tween.js"></script>
        <script src="planet.js"></script>
        <script src="latlng.js"></script>
        <script src="city_locations.js"></script>
        <script src="Stats.js"></script>
        <style>
            body {
                background: #000;
                padding: 0;
                margin: 0;
                color: #fff;
                font-family:"Lucida Console", Monaco, monospace;
                text-align:left;
                overflow: hidden;
            }
            #container canvas {
                background: #000;
                position: absolute;
                top: 0px;
                width: 100%;
                height: 100%;
                left: 0px;
            }
            #help {
                position: absolute;
                top: 50%;
                width: 350px;
                height: 400px;
                left: 50%;
                margin-left: -175px;
                margin-top: -200px;
                background-color: rgba(0, 0, 0, 0.7);
                border-radius: 10px;
                border: 5px solid #666;
                padding: 10px;
                overflow: auto;
                pointer-events: none;
            }
            #controls {
                position: absolute;
                top: 8px;
                width:800px;
                height: 38px;
                left: 50%;
                text-align: center;
                margin-left: -450px;
                background-color: rgba(30, 60, 3, 0.7);
                border-radius: 10px;
                border: 5px solid #666;
                padding: 10px;
                overflow: auto;
            }
            h2 {
                text-align: center;
                color: #ff9;
            }
            a {
                color: #9f9;
                text-decoration: none;
            }
            .hide {
                opacity: 0;
                -webkit-transition: opacity .5s ease-out;
                -moz-transition: opacity .5s ease-out;
                -o-transition: opacity .5s ease-out;
            }
            .show {
                opacity: 1;
                -webkit-transition: opacity .5s ease-out;
                -moz-transition: opacity .5s ease-out;
                -o-transition: opacity .5s ease-out;
            }
            img.cornered {
                position: absolute;
                bottom: 0;
                left: 0;
                margin: 0;
            }
        </style>
        <title>callum.com - Connected Planet</title>
        <script type="text/javascript">
          var _gaq = _gaq || [];
          _gaq.push(['_setAccount', 'UA-35129047-1']);
          _gaq.push(['_trackPageview']);
          (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
          })();
        </script>
    </head>
    <script>
        var planetTilt = latlngDeg2rad(23.5);
        console.log(planetTilt);
        var planetRadius = 6378;
        var rotationSpeed = 0.3;
        var cloudsScale = 1.02;
        var height = window.innerHeight;
        var width = window.innerWidth;
        var camera, controls, scene, renderer, geometry, meshPlanet, meshClouds;
        var clock = new THREE.Clock();
        var cameraZoomFactor = 7;
        var displayHelp = false;
        var curZoom = 100;
        var markerGeom;
        var markerMaterial;
        var stats;

        function onWindowResize(event) {
            width = window.innerWidth;
            height = window.innerHeight;

            renderer.setSize(width, height);

            camera.aspect = width / height;
            camera.updateProjectionMatrix();

            controls.screen.width = width;
            controls.screen.height = height;

            camera.radius = (width + height) / 4;
        }

        function init() {
            if (!Detector.webgl) Detector.addGetWebGLMessage();

            scene = new THREE.Scene();

            renderer = new THREE.WebGLRenderer({
                clearAlpha: 1,
                clearColor: 0x000000,
                antialias: true
            });
            renderer.setSize(width, height);
            renderer.sortObjects = true;
            renderer.autoClear = false;
            renderer.gammaInput = true;
            renderer.gammaOutput = true;

            renderer.domElement.style.position = 'absolute';
            var container = document.getElementById('container');
            container.appendChild(renderer.domElement);

            camera = new THREE.PerspectiveCamera(25, width / height, 50, 1e7);
            camera.position.z = planetRadius * cameraZoomFactor;
            scene.add(camera);

            controls = new THREE.TrackballControls(camera, renderer.domElement);
            controls.rotateSpeed = 0.3;
            controls.noZoom = true;
            controls.noPan = true;
            controls.staticMoving = false;
            controls.dynamicDampingFactor = 0.4;

            stats = new Stats();
            stats.domElement.style.position = 'absolute';
            stats.domElement.style.bottom = '0px';
            stats.domElement.style.right = '0px';

            document.body.appendChild( stats.domElement );

            var dirLight = new THREE.DirectionalLight(0xFFFFFF);
            dirLight.position.set(1, 0, 1)
                .normalize();
            scene.add(dirLight);
            var camLight = new THREE.DirectionalLight(0xffffff);
            camera.add(camLight);

            var ambientLight = new THREE.AmbientLight(0x999999);
            scene.add(ambientLight);

            var planet = new cpPlanet({
                planet_radius: planetRadius,
                planet_tilt_rad: planetTilt,
                planet_cloud_texture: "cloud.png",
                planet_surface_texture: "earth_surface.jpg",
                planet_normals_texture: "earth_normals.jpg",
                planet_specular_texture: "earth_specular.jpg",
                planet_geom_segments: 64,
                planet_geom_rings: 64,
                use_surface_shader: true,
                create_combined_mesh: false
            });

            meshPlanet = planet.surface_mesh;
            scene.add(meshPlanet);

            meshClouds = planet.cloud_mesh;
            scene.add(meshClouds);

            // markers and tracks
            var marker_radius = 32;
            var marker_color = 0xff0000;
            markerGeom = new THREE.SphereGeometry(marker_radius, 5, 5);
            markerMaterial = new THREE.MeshPhongMaterial({
                ambient: 0x030303,
                color: marker_color,
                specular: 0x990000,
                shininess: 80,
                shading: THREE.SmoothShading
            });

            // need to update a bunch of stuff when window size changes
            window.addEventListener('resize', onWindowResize, false);
        }

        function animate() {
            requestAnimationFrame(animate);

            var delta = clock.getDelta();

            meshPlanet.rotation.y += rotationSpeed * rotationSpeed * delta;
            meshClouds.rotation.y += rotationSpeed * 1.25 * rotationSpeed * delta;

            controls.update();

            TWEEN.update();

            stats.update();

            renderer.clear();
            renderer.render(scene, camera);
        }

        function addData(locs) {

            var index = Math.floor(Math.random() * locs.length) - 1;
            var start_lat = locs[index].lat;
            var start_lng = locs[index].lng;

            var data_size = 30;
            var start = Math.floor(Math.random() * locs.length) - 1;
            if (start + data_size > locs.length) {
                start = locs.length - data_size - 1;
            }

            var hue = Math.random();

            var i;
            for (i = start; i < start + data_size; i++) {
                var obj = locs[i];
                if (i != index) {
                    addTrack(start_lat, start_lng, obj.lat, obj.lng, planetRadius, hue);
                    addMarker(obj.lat, obj.lng, planetRadius);
                }
            }
        }

        function zoomToStart() {
            new TWEEN.Tween({
                scale: 1
            })
                .to({
                scale: 100
            }, 2500)
                .easing(TWEEN.Easing.Elastic.InOut)
                .onUpdate(function () {
                var true_scale = this.scale / 100;
                meshPlanet.scale.set(true_scale, true_scale, true_scale);
                meshClouds.scale.set(true_scale * cloudsScale, true_scale * cloudsScale, true_scale * cloudsScale);
            })
                .start();
        }

        function addMarker(lat, lng, radius) {
            var marker_mesh = new THREE.Mesh(markerGeom, markerMaterial);
            var marker_position = latlngPosFromLatLng(lat, lng, radius);

            marker_mesh.position.x = marker_position.x;
            marker_mesh.position.y = marker_position.y;
            marker_mesh.position.z = marker_position.z;

            marker_mesh.name = "trackmarker";
            meshPlanet.add(marker_mesh);
        }

        function addTrackLine(spline, hue) {
            var num_control_points = 32;
            var i;
            var colors = [];
            var geometry = new THREE.Geometry();
            var pos;

            for (i = 0; i < num_control_points; i++) {
                var index = i / num_control_points;
                pos = spline.getPoint(index);

                colors[i] = new THREE.Color(0xffffff);
                colors[i].setHSV(hue, (1.0 - i / num_control_points), 1.0);

                geometry.vertices.push(new THREE.Vector3(pos.x, pos.y, pos.z));
            }
            pos = spline.getPoint(1.0);
            geometry.vertices.push(new THREE.Vector3(pos.x, pos.y, pos.z));

            geometry.colors = colors;

            var material = new THREE.LineBasicMaterial({
                color: 0xffffff,
                opacity: 1,
                linewidth: 2
            });
            material.vertexColors = true;

            var line = new THREE.Line(geometry, material);
            line.name = "trackline";
            meshPlanet.add(line);
        }

        function addTrack(start_lat, start_lng, end_lat, end_lng, radius, hue) {
            var num_control_points = 8;
            var max_altitude = 500 + Math.random() * 1200;

            var points = [];
            var i;
            for (i = 0; i < num_control_points + 1; i++) {
                var arc_angle = i * 180.0 / num_control_points;
                var arc_radius = radius + (Math.sin(latlngDeg2rad(arc_angle))) * max_altitude;
                var latlng = latlngInterPoint(start_lat, start_lng, end_lat, end_lng, i / num_control_points);
                var pos = latlngPosFromLatLng(latlng.lat, latlng.lng, arc_radius);

                points.push(new THREE.Vector3(pos.x, pos.y, pos.z));
            }

            var spline = new THREE.SplineCurve3(points);

            addTrackLine(spline, hue);
        }

        function toggleRotation() {
            if (rotationSpeed > 0) rotationSpeed = 0.0;
            else rotationSpeed = 0.3;
        }

        function zoomCamera(zoom_param) {
            var minZoom = 20;
            var maxZoom = 450;
            var incZoom = (maxZoom - minZoom) / 9;
            var timeZoom = 400;
            var startZoom = curZoom;
            var endZoom;

            if (zoom_param == 1) {
                endZoom = curZoom + incZoom;
                if (endZoom > maxZoom) endZoom = maxZoom;
            } else if (zoom_param == -1) {
                endZoom = curZoom - incZoom;
                if (endZoom < minZoom) endZoom = minZoom;
            } else {
                endZoom = zoom_param;
            }

            if (startZoom != endZoom) {
                new TWEEN.Tween({
                    zoom: startZoom
                })
                    .to({
                    zoom: endZoom
                }, timeZoom)
                    .easing(TWEEN.Easing.Back.InOut)
                    .onUpdate(function () {
                    curZoom = this.zoom;
                    var true_scale = this.zoom / 100;
                    meshPlanet.scale.set(true_scale, true_scale, true_scale);
                    meshClouds.scale.set(true_scale * cloudsScale, true_scale * cloudsScale, true_scale * cloudsScale);
                })
                    .onComplete(function () {
                    curZoom = this.zoom;
                })
                    .start();
            }
        }

        function toggleHelp() {
            displayHelp = !displayHelp;
            if (displayHelp) {
                document.getElementById('help')
                    .style.opacity = 1;
            } else {
                document.getElementById('help')
                    .style.opacity = 0;
            }
        }

        function resetView() {
            scene.remove(camera);

            camera = new THREE.PerspectiveCamera(25, width / height, 50, 1e7);
            camera.position.z = planetRadius * cameraZoomFactor;
            scene.add(camera);

            controls = new THREE.TrackballControls(camera, renderer.domElement);
            controls.rotateSpeed = 0.3;
            controls.noZoom = true;
            controls.noPan = true;
            controls.staticMoving = false;
            controls.dynamicDampingFactor = 0.4;

            zoomCamera(100);
            clock = new THREE.Clock();

            meshPlanet.rotation.y = 0;
            meshClouds.rotation.y = 0;

            rotationSpeed = 0.3
        }

        function addNewData() {
            addData(locations);
        }

        var deleteMe = [];

        function newDataCallback(node) {
            if (node instanceof THREE.Line && node.name == "trackline") {
                deleteMe.push(node);
            }
            if (node instanceof THREE.Mesh && node.name == "trackmarker") {
                deleteMe.push(node);
            }
        }

        function remAllData() {
            THREE.SceneUtils.traverseHierarchy(scene, newDataCallback);

            for (var each = 0; each < deleteMe.length; ++each) {
                meshPlanet.remove(deleteMe[each]);
            }
        }

        window.onload = function () {
            if (!Detector.webgl) {
                Detector.addGetWebGLMessage();
                return;
            }

            init();

            var num_new_data_adds = 5;
            for (var i = 0; i < num_new_data_adds; ++i) {
                addData(locations);
            }

            zoomToStart();

            animate();
        }
    </script>
    <body>
        <div id="container" class="container"></div>
        <!--<img class="cornered" src="textures/logo.png">-->
        <div id="controls" class="show">
            <div>
                <a href="#" onClick="toggleRotation();" class="button rosy">Rotation</button></a>
                <a href="#" onClick="zoomCamera(-1);" class="button blue">Zoom Out</button></a>
                <a href="#" onClick="zoomCamera(+1);" class="button blue">Zoom In</button></a>
                <a href="#" onClick="addNewData();" class="button green">Add</button></a>
                <a href="#" onClick="remAllData();" class="button red">Remove All</button></a>
                <a href="#" onClick="resetView();" class="button pink">Reset</button></a>
                <a href="#" onClick="toggleHelp();" class="button orange">Help</button></a>
            </div>
        </div>
        <div id="help" class="hide">
            <h2>Instructions</h2>
            <ul>
                <li><font color="#da5867">Rotation</font> toggles rotation</li>
                <li><font color="#0095cd">Zoom</font> view in and out</li>
                <li><font color="#64991e">Add</font> random data sets</li>
                <li><font color="#d81b21">Remove</font> all data</li>
                <li><font color="#f895c2">Reset</font> everything</li>
                <li><font color="#f78d1d">Help</font> toggle</li>
            </ul>Contact me at <a href="mailto://callum@gmail.com?subject=WebGL">callum@gmail.com</a>.
            <p>Many thanks to <a href="">Three.js</a>, <a href="">#three.js</a> and the authors of the wealth of example code out there I used to learn from - your generosity is appreciated.<p>
<font color="#699">Version 0.1.0</font>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T05:32:57.483

可能是因为没有加载detector.js。检查您的 javascript 的路径。

```
 <script src="three.min.js"></script>
    <script src="Detector.js"></script>
    <script src="Tween.js"></script>
    <script src="planet.js"></script>
    <script src="latlng.js"></script>
    <script src="city_locations.js"></script>
    <script src="Stats.js"></script> 
```

# highcharts - highcharts 在 x 轴上为每个点使用用户定义的标签分散 1 秒更新

> ID：16163378
> 
> 赞同：0
> 
> 时间：2013-04-23T07:25:33.963
> 
> 标签：highcharts, highstock

这是实时散点图的简化版本[http://jsfiddle.net/ashwinp/z6QXW/8/](http://jsfiddle.net/ashwinp/z6QXW/8/)

现在我在 x 轴上得到 0 1 2 等。我希望 x 轴上的用户定义名称。X 轴标签应该从 XLables 数组中提取。

我在这里添加了来自 jsfiddle 的相同代码

```
 var InfluenceCnt=0;
 var QResiduals=[];
 var XLables=[];
 var HottelingT2=[];
 var EllipseChartData;
 var EllipseShift;
 QResiduals.push('0.5356899');
 QResiduals.push('0.5356899');
 QResiduals.push('0.6356899');
 QResiduals.push('0.2356899');
 QResiduals.push('0.3356899');
 QResiduals.push('0.1356899');

 HottelingT2.push('0.1')
 HottelingT2.push('0.2');
 HottelingT2.push('0.3');
 HottelingT2.push('0.4');
 HottelingT2.push('0.5');
 HottelingT2.push('0.6');

XLables.push('a')
XLables.push('b');
XLables.push('c');
XLables.push('d');
XLables.push('e');
XLables.push('f');

 $(function () {
         $(document).ready(function () {        
             Highcharts.setOptions({
                 global: {
                     useUTC: false
                 }
             });
 // Ellipse Plot
      EllipseChartData = new Highcharts.Chart({
                 chart: {
                     renderTo: 'EllipseContainer',
                     type: 'scatter',
                     marginRight: 10,
                     zoomType: 'xy',
                     events: {
                         load: function () {                             

                             // set up the updating of the chart each second
                            EllipseSeries = this.series[0];                                
                              setInterval(function () {                                    
                                EllipseShift = EllipseSeries.data.length > 20;                         

                                if (!isNaN(QResiduals[InfluenceCnt]) &&             $.isNumeric(QResiduals[InfluenceCnt]) && typeof (QResiduals[InfluenceCnt]) != "undefined") {  //alert(QResiduals[InfluenceCnt]); 
                                     var x = HottelingT2[InfluenceCnt], // current time 
                                         y = parseFloat(QResiduals[InfluenceCnt]);    
                                     InfluenceCnt++;                                                                          
                                     EllipseSeries.addPoint([x, y], true, EllipseShift);                                         
                                   }                                     
                             }, 1000);
                         }
                     }
                 },
                 title: {
                     text: 'Ellipse Plot'
                 },
                 xAxis: {
                     title: {
                         text: 'Sample'
                     },
                     plotLines: [{                           
                        value:2.5,
                        color: 'red',
                        dashStyle: 'shortdash',
                        width: 2,
                        label: {
                            text: ''
                        }
                     }]
                 },
                 yAxis: {
                     title: {
                         text: ''
                     },
                     plotLines: [{                            
                        value: 0.4,
                        color: 'red',
                        dashStyle: 'shortdash',
                        width: 2,
                        label: {
                            text: ''
                        }
                     }]
                 },
                 tooltip: {
                     formatter: function () {
                         return '<b>' + this.series.name + '</b><br/>X: ' +
                    Highcharts.numberFormat(this.x, 2) + '<br/> Y: ' +
                    Highcharts.numberFormat(this.y, 2);
                     }
                 },
                 legend: {
                     enabled: false
                 },
                 exporting: {
                     enabled: true
                 },
                series: [{
                    name: 'Ellipse Plot',
                    data: []
                }]
             });

         });

     }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:51:02.520

您需要的选项是 xAxis 上的“类别”。尝试这个：

```
xAxis: {
      title: {
           text: 'Sample'
      },
      categories:XLables, 
```

[http://jsfiddle.net/euVvy/](http://jsfiddle.net/euVvy/)

要修复工具提示，您只需要参考“this.x”，它将返回类别名称：

```
 tooltip: {
                     formatter: function () {
                         return '<b>' + this.series.name + '</b><br/>X: ' +
                    this.x + '<br/> Y: ' +
                    Highcharts.numberFormat(this.y, 2);
                     }
                 }, 
```

[http://jsfiddle.net/4aDQ2/](http://jsfiddle.net/4aDQ2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T08:00:16.930

您可以使用类别或标签格式化程序，它允许定义“显示的标签[http://api.highcharts.com/highstock#xAxis.labels.formatter](http://api.highcharts.com/highstock#xAxis.labels.formatter)

# ios - exc_bad_access code=2 address=0x1000003c for sqlite compiledStatement

> ID：16163381
> 
> 赞同：0
> 
> 时间：2013-04-23T07:25:52.883
> 
> 标签：ios, objective-c, sqlite

我得到 exc_bad_access 代码=2。有时它的工作没有错误，但有时它会出错。我不知道为什么会这样。如果有人发现任何问题，请告诉我这是我的代码..

```
 if (sqlite3_open(dbpath, &adhDB) == SQLITE_OK)
            {
                sqlite3_stmt *compiledStatement;

                const char *sqlStatement = "INSERT INTO tblNotifications (NotificationID,Description,BeforeHrs,AfterHrs,PreparationID,PreparationName,ProcedureID,ProcedureName,ClientID,IsActive,UpdatedDateTime) VALUES (?,?,?,?,?,?,?,?,?,?,?)"; // Total 11 ?
                NSLog(@"sqlStatement = %s",sqlStatement);

                if(sqlite3_prepare_v2(adhDB, sqlStatement, -1, &compiledStatement, NULL) == SQLITE_OK)
                {
                    int i = 0;

                    for (statusNotification in nsNotification)
                    {
                        NSString *NotificationID1 =[statusNotification objectForKey:@"NotificationID"];

                        NotificationID1 =  [NotificationID1 stringByTrimmingCharactersInSet:
                                           [NSCharacterSet whitespaceCharacterSet]];

                        NSString *Description1 = [statusNotification objectForKey:@"Description"];
                        Description1 =  [Description1 stringByTrimmingCharactersInSet:
                                        [NSCharacterSet whitespaceCharacterSet]];

                        NSString *BeforeHrs1 = [statusNotification objectForKey:@"BeforeHrs"];
                        BeforeHrs1 =  [BeforeHrs1 stringByTrimmingCharactersInSet:
                                      [NSCharacterSet whitespaceCharacterSet]];

                        NSString *AfterHrs1 = [statusNotification objectForKey:@"AfterHrs"];
                        AfterHrs1 =  [AfterHrs1 stringByTrimmingCharactersInSet:
                                     [NSCharacterSet whitespaceCharacterSet]];
                        NSString *PreparationID1 =[statusNotification objectForKey:@"PreparationID"];
                        PreparationID1 =  [PreparationID1 stringByTrimmingCharactersInSet:
                                          [NSCharacterSet whitespaceCharacterSet]];
                        NSString *PreparationName1 =[statusNotification objectForKey:@"PreparationName"];
                        PreparationName1 =  [PreparationName1 stringByTrimmingCharactersInSet:
                                            [NSCharacterSet whitespaceCharacterSet]];
                        NSString *ProcedureID1 =[statusNotification objectForKey:@"ProcedureID"];
                        ProcedureID1 =  [ProcedureID1 stringByTrimmingCharactersInSet:
                                        [NSCharacterSet whitespaceCharacterSet]];
                        NSString *ProcedureName1 =[statusNotification objectForKey:@"ProcedureName"];
                        ProcedureName1 =  [ProcedureName1 stringByTrimmingCharactersInSet:
                                          [NSCharacterSet whitespaceCharacterSet]];
                        NSString *ClientID1 =[statusNotification objectForKey:@"ClientID"];
                        ClientID1 =  [ClientID1 stringByTrimmingCharactersInSet:
                                     [NSCharacterSet whitespaceCharacterSet]];
                        NSString *IsActive1 =[statusNotification objectForKey:@"IsActive"];
                        IsActive1 =  [IsActive1 stringByTrimmingCharactersInSet:
                                     [NSCharacterSet whitespaceCharacterSet]];

                        NSString *UpdatedDateTime1 = [HomeScreen returnDateTime];

                        sqlite3_bind_text(compiledStatement, 1, [NotificationID1 UTF8String], -1, SQLITE_TRANSIENT);

                        sqlite3_bind_text(compiledStatement, 2, [Description1 UTF8String], -1, SQLITE_TRANSIENT);

                        sqlite3_bind_text(compiledStatement, 3, [BeforeHrs1 UTF8String], -1, SQLITE_TRANSIENT);

                        sqlite3_bind_text(compiledStatement, 4, [AfterHrs1 UTF8String], -1, SQLITE_TRANSIENT);

                        sqlite3_bind_text(compiledStatement, 5, [PreparationID1 UTF8String], -1, SQLITE_TRANSIENT);

                       sqlite3_bind_text(compiledStatement, 6, [PreparationName1 UTF8String], -1, SQLITE_TRANSIENT);

                       sqlite3_bind_text(compiledStatement, 7, [ProcedureID1 UTF8String], -1, SQLITE_TRANSIENT);

                        sqlite3_bind_text(compiledStatement, 8, [ProcedureName1 UTF8String], -1, SQLITE_TRANSIENT);

                        sqlite3_bind_text(compiledStatement, 9, [ClientID1 UTF8String], -1, SQLITE_TRANSIENT);

                       sqlite3_bind_text(compiledStatement, 10, [IsActive1 UTF8String], -1, SQLITE_TRANSIENT);

                        sqlite3_bind_text(compiledStatement, 11, [UpdatedDateTime1 UTF8String], -1, SQLITE_TRANSIENT);
                      //  NSLog(@"UpdatedDateTime= %@",UpdatedDateTime1);

                        if (sqlite3_step(compiledStatement) == SQLITE_DONE) {
                            if (i == cntProcedures)
                                sqlite3_finalize(compiledStatement);
                            else
                                sqlite3_reset(compiledStatement);
                        }
                        else {

                        }
                        i++;
                    }

                }
            } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:38:04.447

试试这个：我认为不止一个 sql 语句在循环中触发，现在我们使用函数触发并且每次创建新的编译语句时......所以它不会崩溃。

```
 for (statusNotification in nsNotification)
        {
            NSString *NotificationID1 =[statusNotification objectForKey:@"NotificationID"];

            NotificationID1 =  [NotificationID1 stringByTrimmingCharactersInSet:
                        [NSCharacterSet whitespaceCharacterSet]];

            NSString *Description1 = [statusNotification objectForKey:@"Description"];
            Description1 =  [Description1 stringByTrimmingCharactersInSet:
                     [NSCharacterSet whitespaceCharacterSet]];

            NSString *BeforeHrs1 = [statusNotification objectForKey:@"BeforeHrs"];
            BeforeHrs1 =  [BeforeHrs1 stringByTrimmingCharactersInSet:
                   [NSCharacterSet whitespaceCharacterSet]];

            NSString *AfterHrs1 = [statusNotification objectForKey:@"AfterHrs"];
            AfterHrs1 =  [AfterHrs1 stringByTrimmingCharactersInSet:
                  [NSCharacterSet whitespaceCharacterSet]];
            NSString *PreparationID1 =[statusNotification objectForKey:@"PreparationID"];
            PreparationID1 =  [PreparationID1 stringByTrimmingCharactersInSet:
                       [NSCharacterSet whitespaceCharacterSet]];
            NSString *PreparationName1 =[statusNotification objectForKey:@"PreparationName"];
            PreparationName1 =  [PreparationName1 stringByTrimmingCharactersInSet:
                         [NSCharacterSet whitespaceCharacterSet]];
            NSString *ProcedureID1 =[statusNotification objectForKey:@"ProcedureID"];
            ProcedureID1 =  [ProcedureID1 stringByTrimmingCharactersInSet:
                     [NSCharacterSet whitespaceCharacterSet]];
            NSString *ProcedureName1 =[statusNotification objectForKey:@"ProcedureName"];
            ProcedureName1 =  [ProcedureName1 stringByTrimmingCharactersInSet:
                       [NSCharacterSet whitespaceCharacterSet]];
            NSString *ClientID1 =[statusNotification objectForKey:@"ClientID"];
            ClientID1 =  [ClientID1 stringByTrimmingCharactersInSet:
                  [NSCharacterSet whitespaceCharacterSet]];
            NSString *IsActive1 =[statusNotification objectForKey:@"IsActive"];
            IsActive1 =  [IsActive1 stringByTrimmingCharactersInSet:
                  [NSCharacterSet whitespaceCharacterSet]];

            NSString *UpdatedDateTime1 = [HomeScreen returnDateTime];

            [self insertTblNotification:NotificationID1 :Description1 :BeforeHrs1 :AfterHrs1 :PreparationID1 :PreparationName1 :ProcedureID1 :ProcedureName1 :ClientID1 :IsActive1 :UpdatedDateTime1]
        }

    -(void)insertTblNotification :(NSString *) NotificationID:(NSString *) Description:(NSString *) BeforeHrs:(NSString *) AfterHrs:(NSString *) PreparationID:(NSString *) PreparationName:(NSString *) ProcedureID:(NSString *) ProcedureName:(NSString *) ClientID:(NSString *) IsActive:(NSString *) UpdatedDateTime
    {

        const char *insertSql;
    insertSql = nil;
        sqlite3_stmt *compiledStatement;

        compiledStatement = nil;

        if(compiledStatement == nil)
        {

                    insertSql ="INSERT INTO tblNotifications (NotificationID,Description,BeforeHrs,AfterHrs,PreparationID,PreparationName,ProcedureID,ProcedureName,ClientID,IsActive,UpdatedDateTime) VALUES (?,?,?,?,?,?,?,?,?,?,?)"; // Total 11 ?

                    if(sqlite3_prepare_v2(adhDB, insertSql, -1, &compiledStatement, NULL) != SQLITE_OK){
                        NSAssert1(0, @"Error: failed to prepare insert statement with message '%s'.", sqlite3_errmsg(appDelegate.objDBAdapter.database));
            }

            sqlite3_bind_text(compiledStatement, 1, [NotificationID1 UTF8String], -1, SQLITE_TRANSIENT);

            sqlite3_bind_text(compiledStatement, 2, [Description1 UTF8String], -1, SQLITE_TRANSIENT);

            sqlite3_bind_text(compiledStatement, 3, [BeforeHrs1 UTF8String], -1, SQLITE_TRANSIENT);

            sqlite3_bind_text(compiledStatement, 4, [AfterHrs1 UTF8String], -1, SQLITE_TRANSIENT);

            sqlite3_bind_text(compiledStatement, 5, [PreparationID1 UTF8String], -1, SQLITE_TRANSIENT);

            sqlite3_bind_text(compiledStatement, 6, [PreparationName1 UTF8String], -1, SQLITE_TRANSIENT);

            sqlite3_bind_text(compiledStatement, 7, [ProcedureID1 UTF8String], -1, SQLITE_TRANSIENT);

            sqlite3_bind_text(compiledStatement, 8, [ProcedureName1 UTF8String], -1, SQLITE_TRANSIENT);

            sqlite3_bind_text(compiledStatement, 9, [ClientID1 UTF8String], -1, SQLITE_TRANSIENT);

            sqlite3_bind_text(compiledStatement, 10, [IsActive1 UTF8String], -1, SQLITE_TRANSIENT);

            sqlite3_bind_text(compiledStatement, 11, [UpdatedDateTime1 UTF8String], -1, SQLITE_TRANSIENT);
    //  NSLog(@"UpdatedDateTime= %@",UpdatedDateTime1);

            if(sqlite3_step(compiledStatement) != SQLITE_DONE)
            {
                NSAssert1(0, @"Error: failed to insert into the database with message '%s'.", sqlite3_errmsg(adhDB));
                return;
            }
            sqlite3_reset(compiledStatement);

        }

    } 
```

# java - 简单的继承但令人困惑

> ID：16163384
> 
> 赞同：-3
> 
> 时间：2013-04-23T07:25:59.493
> 
> 标签：java

这是类 JavaTest

```
package testing.test;

public class JavaTest 
{
    int i=2;
} 
```

这是类 JavaTest2 ，它扩展了 JavaTest

```
package testing.test;

class JavaTest2 extends JavaTest
{
    public static void main(String[] args) {

        new JavaTest2().add(5);
    }

    void add(int i)
    {
        System.out.println(5+i);
    }
} 
```

现在输出到 10 ，实际问题是获取父类的 i 值添加..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T07:27:35.093

这里的*问题*是您的`add`方法使用声明为参数的变量来隐藏**类**的`i`属性。`i`因此，当使用`i`内部`add`方法时，您使用的是`i`参数，而不是`i`属性。

要注意差异，请将`add`方法更改为：

```
void add(int i) {
    System.out.println(5+i);
    System.out.println(5+this.i); //this will do the work for you
} 
```

一个很好的阴影示例用于类构造函数：

```
public class SomeClass {
    int x;
    public SomeClass(int x) {
        //this.x refers to the x attribute
        //plain x refers to x parameter
        this.x = x;
    }
} 
```

从评论跟进：

> 明白了，但是如果我在 JavaTest2 中拥有与 i 相同的成员会发生什么...并且执行相同的 this.i

这称为**隐藏**，Oracle 的 Java 教程中有很好的解释：[隐藏字段](http://docs.oracle.com/javase/tutorial/java/IandI/hidevariables.html)

例子：

```
class JavaTest2 extends JavaTest {
    int i = 10;
    void add(int i) {
        System.out.println(5+i);
        System.out.println(5+this.i); //this will add 5 to i attribute in JavaTest2
        System.out.println(5+super.i); //this will add 5 to i attribute in JavaTest
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T07:27:43.127

您指的是`i`您收到的参数。试试`this.i`。

```
void add(int i)
{
    System.out.println(i + this.i);
} 
```

这将在您上面的示例中打印`7`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T07:33:34.353

*   这是一个简单的概念`inheritance`。
*   超**类**的`methods`and被继承到**基类中。**`instance variables`

*****   `i`是由其基类继承的 JavaTest 类的实例变量。

    无效添加（int i）{

    ```
    System.out.println(5+i);  // i is already 5, so 5 + 5 = 10 
    ```

    }**** 

 ***** * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T07:28:02.987

您将 5 传递给该`add`方法。对此 5 是 5 添加并打印

```
System.out.println(5+i); 
```

所以这里没什么奇怪的。

`i`被初始化的被方法声明中的`JavaTest`遮蔽。`i`最局部的变量按定义使用。如果您希望该方法使用该字段`i`，您可以像这样更改您的方法：

```
void add(int j) {
    System.out.println(5+i);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T07:28:18.650

在您的`add`方法中，`i`超类中的变量不可见。您正在使用您也称为的参数覆盖它`i`。

尝试用`add()`这个替换你的方法：

```
void add(int x)
{
    System.out.println(5+i);
} 
```

输出将变为 7。您现在正在做的实际上是打印输出`5+x`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-23T07:28:32.977

`i`里面`add`是不是继承`i`自父类的from参数

```
 void add(int i) <----------------+
  {                                |
      System.out.println(5 + i); --+

      System.out.println(5 + this.i);  --> member i
  } 
```

因此之后`add(5)`，它将打印`5+5`-> `10`。

要表示继承`i`，请尝试`this.i`改用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-23T07:28:33.683

add() 函数中的参数与类属性同名。

重命名您的参数，它应该可以工作：

```
void add(int someNumber)
{
     System.out.println(5+i); // result 7
     System.out.println(5+someNumber); // result 10
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-23T07:30:25.510

如果您在范围内有一个局部变量（可以从您引用它的任何地方访问它），它将采用本地变量。由于您在超类 (JavaTest) 中有一个实例变量，并且在 add 方法中有一个参数，所以它将采用后者。

除非另有要求，否则通常建议将所有实例变量设为私有。最重要的是，对局部变量和实例变量使用相同的名称是非常糟糕的做法（它认为这称为阴影）。****

# c# - 在页面之间导航期间显示进度

> ID：16163389
> 
> 赞同：2
> 
> 时间：2013-04-23T07:26:23.633
> 
> 标签：c#, windows-runtime, mvvm-light, winrt-xaml

我的意图是，当用户单击按钮导航到另一个页面时，他将看到一个进度，直到另一个页面完全加载。

我找到了很多关于这个主题的教程，但是它们都使用了后面的代码。我希望能够不使用任何代码隐藏（如果可能）。我目前正在将 MvvmLight 与 ViewModelLocater 一起使用。

我已经在我的视图中创建了一个可以显示 Progressring 的虚拟网格，并且我已将其活动和可见属性绑定到我的视图模型。

```
<Grid  Background="Transparent" Visibility="{Binding LoadCircleVisibility}" Height="{Binding HeigthScreen}" Width="{Binding WidthScreen}" >
            <ProgressRing Height="50" Width="50" IsActive="{Binding ProgressRingActive}" Visibility="{Binding ProgressRingVisibility}"></ProgressRing>
        </Grid> 
```

例如，当我从 wcf 服务获取数据时，我已经可以显示它，但当用户导航到不同的页面时却不能。

在这一点上，我试图通过消息传递来做到这一点，但我不确定我应该将消息放在哪里，这将使我的进度可见。

我的消息将始终通过此方法为进度设置正确的值：

```
private void ProggressBarVisible(bool visible)
    {
        if (visible)
        {
            ProgressRingVisibility = Visibility.Visible;
            LoadCircleVisibility = Visibility.Visible;
        }
        else
        {
            ProgressRingVisibility = Visibility.Collapsed;
            LoadCircleVisibility = Visibility.Collapsed;
        }
        ProgressRingActive = visible;
    } 
```

但是当我想导航到另一个页面时，没有任何进展。

所以问题是如何在 mvvmlight 加载新页面时显示进度。

编辑：部分解决方案：

我的导航速度较慢并锁定 uithread 的原因是因为它必须构建整个页面。我通过确保所有方法和逻辑都进入不同的线程来改变这一点，这确保了我的 uithread 立即继续，并且我可以在我的第二页上显示 loadcircle，同时它正在执行逻辑和方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T08:29:49.743

如果没有代码，我不知道如何做到这一点您可以将根面板添加到您的应用程序并在那里放置自定义控件。此自定义控件仅用于显示/隐藏预加载器。当您卸载第一页（或其他事件）时，您将显示自定义预加载器；当您完成下载第二页时，您将隐藏自定义预加载器。

# html - 如何在 css/html 中放置与窗口浏览器相关的对象？

> ID：16163392
> 
> 赞同：0
> 
> 时间：2013-04-23T07:26:33.810
> 
> 标签：html, css

如何在 css 中放置对象以相对于窗口浏览器的大小移动？

我尝试了以下类型的定位：固定、绝对和相对。我遇到的问题是，当我更改窗口浏览器的大小时，它会停留在同一个位置，并且不会随着浏览器的大小而移动。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:28:41.100

您必须使用 定义顶部、底部、左侧、右侧`px`，因此您需要`%`使用

[**演示**](http://jsfiddle.net/b3AJ2/)

```
<div class="hello">
  Whatever
<div>

.hello {
   position: absolute;
   top: 50%;
   left: 50%;
} 
```

确保您使用的是`absolute`位置，而不是将其包裹在相对定位的容器中，这样它就不会在野外流出

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:30:54.737

没有任何信息，我将假设您使用像素作为顶部和左侧？您可能想尝试的是：

```
.my-class {
  position: absolute;
  top: 20%;
  left: 20%;
} 
```

[您还可以使用css 中的 @media 查询](http://mislav.uniqpath.com/2010/04/targeted-css/)根据特定大小进行定位

# python - 将列表变成元组 python

> ID：16163394
> 
> 赞同：2
> 
> 时间：2013-04-23T07:26:37.887
> 
> 标签：python, list

我正在创建一个 python 程序。

我有一个清单：

`[3, 28, 25, 126, 25, 127]`

我怎样才能把它变成一个元组列表，所以列表变成：

`[(3,28),(25,126),(25,127)]`

它连接 2 个元素并创建一个元组。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-23T07:27:49.423

```
>>> L = [3, 28, 25, 126, 25, 127]
>>> zip(L[0::2], L[1::2])
[(3, 28), (25, 126), (25, 127)] 
```

这将创建两个列表切片，步长为 2 - 一个从索引 0 开始，第二个从索引 1 开始。`zip`然后创建具有每个可迭代元素的元组。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-23T07:27:05.363

```
>>> L = [3, 28, 25, 126, 25, 127]
>>> zip(*[iter(L)]*2)
[(3, 28), (25, 126), (25, 127)] 
```

[`zip(*[iter(s)]*n)`在 Python 中如何工作？](https://stackoverflow.com/questions/2233204/how-does-zipitersn-work-in-python)

# php - 使用查询从数据库中获取所有 id 的字符串

> ID：16163398
> 
> 赞同：1
> 
> 时间：2013-04-23T07:26:57.997
> 
> 标签：php, mysql, string

你好，我有桌子`user`，有列`id`等等。现在我希望字符串形式的所有 id 用逗号分隔并将前缀附加为 A。

意味着假设我有带有 id 的记录`1, 2, 3, 4 etc`

现在我想要这样`A1,A2,A3`的结果

我用我的方式做到了，但它太复杂了，我想用单个查询来做。我的代码工作正常。

```
$send_idstring='';
        $qry="SELECT concat('A',id) as id FROM `admin` WHERE concat(fname,' ',lname) LIKE '%".addContent($searchVal)."%' ";
        $send_id=mysql_query($qry);
        while($row=mysql_fetch_assoc($send_id)){

            $send_idstring.=$row['id'].',';

        }
        $send_idstring=trim($send_idstring, ",");
        echo $send_idstring; 
```

它给了我想要的输出，但我想要另一种方式来做到这一点，请建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T07:32:15.740

尝试

```
SELECT GROUP_CONCAT(CONCAT('A', `id`) SEPARATOR ',') AS idList FROM `admin`; 
```

[http://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html#function_group-concat](http://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html#function_group-concat)

# javascript - jquery中的`函数$（Window）未定义`错误

> ID：16163400
> 
> 赞同：2
> 
> 时间：2013-04-23T07:26:59.110
> 
> 标签：javascript, eclipse, jsp, jquery

当浏览器窗口关闭时，我使用`Jquery 1.9.1`并使用代码触发

我的 `JSP`意志是

![在此处输入图像描述](https://i.stack.imgur.com/oS9a7.png)

但这显示了一个`red underline error`类似的显示在图片中 `eclipse`。

我不知道为什么我会收到这个错误。任何人都可以帮我解决这个问题。

不要犹豫，问任何问题。

好的答案绝对值得赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:33:55.120

`$`是 的别名`jQuery`。如果`$`未定义，则表示 jQuery 库尚未正确加载。在尝试使用任何 jQuery 方法之前，请务必将其包含在页面中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:31:40.923

您是否尝试将代码包装在`doc ready`处理程序中：

```
$(function(){
   //here unload and before unload
}); 
```

你必须看看你`jquery 1.9.1`的加载是否正确。

* * *

### 关于错误：

如果您使用的是 CDN 托管的 jQuery 库，这很有可能。尝试在本地加载它并从那里引用它。

# javascript - 我正在尝试使用 JavaScript 制作一个简单的秒表

> ID：16163414
> 
> 赞同：-1
> 
> 时间：2013-04-23T07:27:37.720
> 
> 标签：javascript

这是我在我的网站上制作的一个简单秒表的脚本，我已经做了很长时间了，毕竟，秒表不会改变它的数字，它只是保持 00:00:00.00

这是我的脚本：

```
<script>
    t  = 0;
    tt = 0;
    s  = 0;
    ss = 0;
    m  = 0;
    mm = 0;
    h  = 0;
    hh = 0;

    function increment() {
        t++;

        if (t  > 9) { t  = 0; tt++ };
        if (tt > 9) { tt = 0; s++  };
        if (s  > 9) { s  = 0; ss++ };
        if (ss > 5) { ss = 0; m++  };
        if (m  > 9) { m  = 0; mm++ };
        if (mm > 5) { mm = 0; h++  };
        if (h  > 9) { h  = 0; hh++ };
        if (hh > 9) { hh = 0;      };

        setTimeout(increment, 10);
    }

    increment();

    stopwatch = document.createElement("div");
    // stopwatch.setAttribute("class","stopwach") etc.
    stopwatch.innerHTML = '<h2>' + hh + h + ':' + mm + m + ':' + ss +
         s + '.' + tt + t + '</h2>';

    var maindivElement = document.getElementById("maindiv");
    var anchorElements = maindivElement.getElementsByTagName("a")…
    // maindivElement.insertBefore(stopwatch, etc.
</script> 
```

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:37:28.213

您的函数增量在循环中，但实际上并没有为 UI 做任何事情。

我相信它应该看起来像：

```
function increment() {
    t++;
    if (t > 9) {t = 0; tt++};
    if (tt > 9) {tt = 0; s++};
    if (s > 9) {s = 0; ss++};
    if (ss > 5) {ss = 0; m++};
    if (m > 9) {m = 0; mm++};
    if (mm > 5) {mm = 0; h++};
    if (h > 9) {h = 0; hh++};
    if (hh > 9) {hh = 0;};

    $("div").html('<h2>' + hh + h + ':' + mm + m + ':' + ss + s + '.' + tt + t + '</h2>');
}
setInterval(increment,1000); 
```

# html - html-coding-如何在 HTML 中的图像上放置文本？

> ID：16163419
> 
> 赞同：0
> 
> 时间：2013-04-23T07:27:47.283
> 
> 标签：html, image, cordova, text

我正在为电话间隙应用程序设计这个..我想用 html 编码..

我有两个问题..

**Q1）如何在图像上的不同位置放置文字？**

例如此处给出的图像中的 text1,text2,text3,text4。

**Q2）如何将它放在页面的中心。我已经给出了**

```
 <img src="img/img1.png" style="margin-left:5px;" />
   <img align="middle" /> 
```

但是，这没有什么区别。

需要指导。请帮助。

![在此处输入图像描述](https://i.stack.imgur.com/lHg8U.png)

**我还有一个疑问……运行程序后……页脚后面有正文的扩展部分……如果向上拖动……你可以看到页眉和页脚之间的正文被延长。它向右移动。编码中有任何错误吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:55:22.970

把它们放在一个 Div 中，然后给这个 Div 一个背景样式；）代码应该是这样的：

```
<div id='container'> 
 <span> text 1 </span> 
 <span> text 2 </span> 
 <span> text 3 </span>      
 <span> text 4 </span> 
</div> 
```

在CSS中：

```
#container{background:url(path/to/img) no-repeat scroll 0 0 transparent; background-size:100% 100%; display:block; height:...px; width:...px;}
#container span{width:50%; height:25%;display:block; overflow:hidden;float:left;} 
```

您可以为跨度、颜色等添加边框...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T08:35:10.580

您可以通过使用 div 和 z-index 包装图像来做到这一点。您的代码应如下所示：

```
<div style="position:fixed; top:10px; left:5px; z-index:250; width:ofimage; height:of image;">
<span style="display:block; width:30; height:20; margins if you need; float:left">text1</span>
 <span style it accordingly and add float left>text2</span><br>
<spanstyle them as first two>text3</span>
<span>text4</span>

</div>

<img src="your image" style="if any"> 
```

# c# - Linq 通过层次结构递归

> ID：16163421
> 
> 赞同：1
> 
> 时间：2013-04-23T07:27:50.420
> 
> 标签：c#, linq, linq-to-entities

我有一个层次结构的数据结构如下。

表格1

```
id | Groupname | parentId 
```

表 2

```
id | nodeName | parentId 
```

表1的parentId指的是表1的id，表2的parentId也指的是表1的id。

从表1中的任意一个ID开始，我需要打印出所有的节点，然后遍历所有子组的子节点。

到目前为止我有这个

```
int id = 1; // replace with argument

repository.Nodes.Where(n => n.ParentId == Id).ToList().ForEach(d =>
{
  result.NodeList.Add(GetNodeDetails(n.Id));
}); 
```

任何人都可以帮助我以高效的 linq 方式进行循环吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T07:36:00.253

如果我理解正确，您想要展平层次结构，即最终结果应该是一个包含所有层次结构级别的所有子级的平面列表。

实现这一点的最简单方法是通过递归：

```
private IEnumerable<Node> GetSelfAndChildren(Node node)
{
    yield return GetNodeDetails(n.Id);
    foreach(var c in n.Children.SelectMany(GetSelfAndChildren)
        yield return c;
};

var result = repository.Nodes.Where(n => n.ParentId == Id)
                       .AsEnumerable()
                       .SelectMany(GetSelfAndChildren)
                       .ToList(); 
```

这使用递归方法来获取子级的平面列表。

这种方法有可能表现出 N+1 问题。根据配置，每次访问`Children`都会导致到数据库的往返。
如果 N+1 问题正在发生并导致问题，另一种方法是首先从数据库中获取*所有*节点，然后执行[广度优先搜索](http://en.wikipedia.org/wiki/Breadth-first_search)。

# php - ORDER_BY 日期限制 1

> ID：16163422
> 
> 赞同：-2
> 
> 时间：2013-04-23T07:27:56.610
> 
> 标签：php, mysql

我有一个名为 notify 的表，其中 (seeker,donor, date) 列

是类型 (datetime) 的日期列，它存储以下格式 YYYY-MM-DD HH:MM:SS

我正在尝试选择 1 条记录最新日期从通知表中，然后将日期与当前日期进行比较并计算两个日期之间的天数..

```
<?php

session_start();
$email = $_GET['email'];
date_default_timezone_set('Asia/Riyadh');
$time = date("Y-m-d H:i:s");

$note = "SELECT * FROM notify WHERE seeker='".$_SESSION['email']."'AND donor='".$email."' ORDER_BY `date` DESC LIMIT 1";
$st = $conn->prepare($note);
$st->execute();

if($found = $st->fetch(PDO::FETCH_ASSOC)){
    $now = $time;
    $old_date = strtotime($found['date']);
    $dateif = $now - $old_date;

    if(floor($dateif/(60*60*24)) >= 7){
    echo "the difference between tow dates is 7 days or more";
    } else { echo "difference between tow dates is less than 7 days";}
}
?> 
```

代码不工作！
我的通知表中只有一条记录，日期为 2013-04-22 09:15:47

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T07:41:16.853

首先，您应该使用这样的准备好的语句：

```
$note = "SELECT * 
    FROM notify 
    WHERE seeker=:seeker AND donor=:donor 
    ORDER BY `date` DESC
    LIMIT 1";

$st = $conn->prepare($note);
$st->execute(array(
    ':seeker' => $_SESSION['email'],
    ':donor' => $email,
); 
```

*如果没有占位符，您仍然可以接受 SQL 注入。*

其次，您不能以这种方式将字符串与整数进行比较：

```
$now = $time; // string
$old_date = strtotime($found['date']); // integer
$dateif = $now - $old_date; // dunno? 
```

您应该将苹果与苹果进行比较：

```
$seven_days_ago = strtotime('-7 days');
$old_date = strtotime($found['date']);

if ($old_date > $seven_days_ago) {
    echo "difference between tow dates is less than 7 days";
} else {
    echo "the difference between tow dates is 7 days or more";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T05:38:10.897

由于您的`date`列不存在，因此按它排序没有意义。此外，在不安全的情况下，您会暴露于 SQL 注入`$_SESSION['email']`。

因此，正确的形式是使用准备好的语句，以及按右列排序。（假设 PDO，您也可以使用 mysqli）：

```
/** @var PDO $pdo - Assuming a PDO connection. */
$query = "SELECT * FROM `user` WHERE `ID` = :email ORDER BY `time` DESC";
$stmt = $pdo->prepare($query);
$stmt->execute(array($_SESSION['email']));

$result = $stmt->fetchAll(PDO::FETCH_ASSOC); //Get all results in an associated array form. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T07:50:14.020

Jack 的回答向您展示了如何正确使用准备好的语句。这是使用`DATEDIFF()`.

```
$note = "SELECT *, DATEDIFF(NOW(), `date`) AS date_diff
         FROM notify 
         WHERE seeker=:seeker AND donor=:donor
         ORDER_BY `date` DESC
         LIMIT 1";

$st = $conn->prepare($note);
$st->execute(array(
    ':seeker' => $_SESSION['email'],
    ':donor' => $email,
);

$row = $st->fetch(PDO::FETCH_ASSOC);
// do something with $row 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T05:32:39.937

如果您将任何变量附加到字符串，那么您需要使用点连接它们，并且 oder 将出现在 where 条件和 $_SESSION 内部您错过引号之后

```
$query = "SELECT * FROM user WHERE ID='".$_SESSION['email']."' ORDER_BY date, time"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T05:40:40.937

要从数据库中检索最新日期，请尝试执行以下 sql 查询

```
$query="SELECT * FROM user WHERE ID='".mysql_real_escape_string($_SESSION[email])."' ORDER_BY date,time desc limit 1"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-23T07:35:40.050

为了检索最新日期，您需要按降序对日期字段进行排序

```
 $note = "SELECT * FROM notify WHERE seeker=' ".$_SESSION['email']. " ' AND donor=' ".$email." ' ORDER_BY date DESC LIMIT 1"; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-23T07:29:49.147

你忘了`在这里日期。日期是mysql中的保留字，

如果您想将其用作列名，请在其周围放置`。

### 编辑

你也有多余的空间删除它

```
$note = "SELECT * FROM notify WHERE seeker='".$_SESSION['email']. "' 
AND donor='".$email."' ORDER_BY `date` LIMIT 1"; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-23T07:30:04.217

你试过按desc订购吗？如下图：

```
$note = "SELECT * FROM notify 
           WHERE
           seeker=' ".$_SESSION['email']. " ' 
           AND
           donor=' ".$email." ' ORDER_BY date DESC LIMIT 1"; 
```

# php - 使用 ajax jquery php mysql 创建动态下拉列表

> ID：16163423
> 
> 赞同：0
> 
> 时间：2013-04-23T07:27:59.593
> 
> 标签：php, mysql, jquery, drop-down-menu

我正在创建一个简单的动态下拉列表，第二个的填充基于第一个的选择，但问题是第一个下拉列表没有填充任何内容，所以我不能使用第二个可以帮助我吗？

# 数据库配置文件

```
<?php
$host = "localhost";
$user = "****";
$password = "******";
$db = "cat";
?> 
```

# 选择.php

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <script type="text/javascript" src="jquery.js"></script>
        <script type="text/javascript">
             $(document).ready(function(){
            $("select#type").attr("disabled","disabled");
            $("select#category").change(function(){
            $("select#type").attr("disabled","disabled");
            $("select#type").html("<option>wait...</option>");
            var id = $("select#category option:selected").attr('value');
            $.post("select_type.php", {id:id}, function(data){
                $("select#type").removeAttr("disabled");
                $("select#type").html(data);
            });
        });
        $("form#select_form").submit(function(){
            var cat = $("select#category option:selected").attr('value');
            var type = $("select#type option:selected").attr('value');
            if(cat>0 && type>0)
            {
                var result = $("select#type option:selected").html();
                $("#result").html('your choice: '+result);
            }
            else
            {
                $("#result").html("you must choose two options!");
            }
            return false;
        });
    });
        </script>
    </head>
    <body>
    <?php include "select.class.php"; ?>
        <form id="select_form">
            Choose a category:<br />
            <select id="category">
            <?php echo $opt->ShowCategory(); ?>
            </select>
            <br /><br />

           choose a type:<br />
            <select id="type">
                <option value="0">choose...</option>
            </select>
            <br /><br />
            <input type="submit" value="confirm" />
        </form>
        <div id="result"></div>
    </body>
</html> 
```

# 选择_class.php

```
<?php 
 class SelectList
{
    protected $conn;

        public function __construct()

        {
           $this->DbConnect();
        }
    protected function DbConnect()
   {
    include "dbconfig.php";
    $this->conn = mysql_connect($host,$user,$password) OR die("Unable to connect to the database");
    mysql_select_db($db,$this->conn) OR die("can not select the database $db");
    return TRUE;
   }  

    public function ShowCategory()
    {
            $sql = "SELECT * FROM category";
            $res = mysql_query($sql,$this->conn);
            $category = '<option value="0">choose...</option>';
            while($row = mysql_fetch_array($res))
            {
                $category .= '<option value="' . $row['id_cat'] . '">' . $row['name'] . '</option>';
            }
            return $category;

    }
    public function ShowType()
   {
    $sql = "SELECT * FROM type WHERE id_cat=$_POST[id]";
    $res = mysql_query($sql,$this->conn);
    $type = '<option value="0">choose...</option>';
       while($row = mysql_fetch_array($res))
      {
        $type .= '<option value="' . $row['id_type'] . '">' . $row['name'] . '</option>';
      }
    return $type;
   }

}   
$opt = new SelectList();   

?> 
```

# 选择类型.php

```
<?php
include "select.class.php";
echo $opt->ShowType();
?> 
```

# 表结构

```
CREATE TABLE IF NOT EXISTS `categories` (
  `id_cat` int(4) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(40) NOT NULL,
  PRIMARY KEY (`id_cat`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=4 ;

--
-- Dumping data for table `categories`
--

INSERT INTO `categories` (`id_cat`, `name`) VALUES
(1, 'colours'),
(2, 'flowers'),
(3, 'tools');

-- --------------------------------------------------------

--
-- Table structure for table `type`
--

CREATE TABLE IF NOT EXISTS `type` (
  `id_type` int(4) unsigned NOT NULL AUTO_INCREMENT,
  `id_cat` int(4) unsigned NOT NULL,
  `name` varchar(40) NOT NULL,
  PRIMARY KEY (`id_type`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=15 ;

--
-- Dumping data for table `type`
--

INSERT INTO `type` (`id_type`, `id_cat`, `name`) VALUES
(1, 1, 'yellow'),
(2, 1, 'green'),
(3, 1, 'red'),
(4, 1, 'gray'),
(5, 1, 'white'),
(6, 2, 'daisy'),
(7, 2, 'cowslip'),
(8, 2, 'lily'),
(9, 2, 'sunflower'),
(10, 3, 'hammer'),
(11, 3, 'screwdriver'),
(12, 3, 'spatula'),
(13, 3, 'wrench'),
(14, 3, 'clamp');

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:34:32.843

您的主要问题是您尝试使用 $opt->ShowCategory() 访问 ShowCategory()

但是您没有创建 SelectList 类的对象。你应该做这个

```
$opt = new SelectList(); 
```

# android - Android MediaPlayer 音频 SeekBar

> ID：16163431
> 
> 赞同：1
> 
> 时间：2013-04-23T07:28:14.830
> 
> 标签：android, audio, media-player, mp3, seekbar

这类问题似乎在这里出现了很多，但它们与我的情况略有不同，只是让我感到困惑。我试图让我的 SeekBar 与单个指定的 mp3 同步。使用下面的代码，音频会播放，如果您移动 SeekBar，音频会搜索，但是 SeekBar 不会自行移动以随音乐更新。有人可以看看他们是否能找到阻止 SeekBar 更新的问题吗？

现已修复，但不知道为什么会修复。

这是我的固定 Java 代码。粗体的变化：

```
 MediaPlayer mediaPlayer;
    Button buttonPlayPause;
    ImageView Image;
    SeekBar seekBar;
    Handler handler;

    private int stateMediaPlayer;
    private final int stateMP_NotStarter = 0;
    private final int stateMP_Playing = 1;
    private final int stateMP_Pausing = 2;
    private int mediaPos;
    private int mediaMax;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.playerwere);

        Image = (ImageView) findViewById(R.id.pdfview);

        Image.setImageResource(R.drawable.wereim);

        seekBar = (SeekBar) findViewById(R.id.seekBar);

        buttonPlayPause = (Button) findViewById(R.id.playpause);

        buttonPlayPause.setOnClickListener(buttonPlayPauseOnClickListener);

        seekBar.setOnSeekBarChangeListener(seekBarOnSeekChangeListener);

        initMediaPlayer();

        mediaPos = mediaPlayer.getCurrentPosition();

        mediaMax = mediaPlayer.getDuration();

        seekBar.setMax(mediaMax); // Set the Maximum range of the
                                    // seekBar.setProgress(mediaPos);// set
                                    // current progress to song's
        seekBar.setProgress(mediaPos);// set current progress to song's

        handler.removeCallbacks(moveSeekBarThread);
        handler.postDelayed(moveSeekBarThread, 100);

    }

    private Runnable moveSeekBarThread = new Runnable() {

        public void run() {
            if (mediaPlayer.isPlaying()) {

                int mediaPos_new = mediaPlayer.getCurrentPosition();
                int mediaMax_new = mediaPlayer.getDuration();

                seekBar.setMax(mediaMax_new);
                seekBar.setProgress(mediaPos_new);

                handler.postDelayed(this, 100); // Looping the thread after 0.1
                                                // seconds
            } **else {
                int mediaPos_new = mediaPlayer.getCurrentPosition();
                int mediaMax_new = mediaPlayer.getDuration();

                seekBar.setMax(mediaMax_new);
                seekBar.setProgress(mediaPos_new);

                handler.postDelayed(this, 100); // Looping the thread after 0.1
                                                // seconds
            }**
        }
    };

    private void initMediaPlayer() {
        handler = new Handler();
        mediaPlayer = new MediaPlayer();
        mediaPlayer = MediaPlayer.create(were.this, R.raw.were);
        stateMediaPlayer = stateMP_NotStarter;  

    }

    Button.OnClickListener buttonPlayPauseOnClickListener = new Button.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            switch (stateMediaPlayer) {
            case stateMP_NotStarter:
                mediaPlayer.start();
                buttonPlayPause
                        .setBackgroundResource(android.R.drawable.ic_media_pause);
                stateMediaPlayer = stateMP_Playing;
                break;
            case stateMP_Playing:
                mediaPlayer.pause();
                buttonPlayPause
                        .setBackgroundResource(android.R.drawable.ic_media_play);
                stateMediaPlayer = stateMP_Pausing;
                break;
            case stateMP_Pausing:
                mediaPlayer.start();
                buttonPlayPause
                        .setBackgroundResource(android.R.drawable.ic_media_pause);
                stateMediaPlayer = stateMP_Playing;
                break;
            }

        }
    };

    SeekBar.OnSeekBarChangeListener seekBarOnSeekChangeListener = new SeekBar.OnSeekBarChangeListener() {

        @Override
        public void onStopTrackingTouch(SeekBar seekBar) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onStartTrackingTouch(SeekBar seekBar) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onProgressChanged(SeekBar seekBar, int progress,
                boolean fromUser) {
            // TODO Auto-generated method stub

            if (fromUser) {
                mediaPlayer.seekTo(progress);
                seekBar.setProgress(progress);
            }

        }
    };

} 
```

# css - Safari中的奇怪行为，在可排序的jquery中输入

> ID：16163438
> 
> 赞同：0
> 
> 时间：2013-04-23T07:28:39.063
> 
> 标签：css, jquery-ui, safari

所以我正在设置一个可编辑的列表。我正在使用 jQuery 和 jQuery-UI。基本上我有一个可排序的列表，我可以从中添加和删除项目。我也已经设置好了，所以我可以点击一个项目的标题来编辑它。我在[这里](http://jsfiddle.net/jzaun/bPfkS/)有一个 jsfiddle 设置。

## HTML

```
<br />
<p>
    Click the "+" to add a new item. Click an item title to edit it. Add 3 items, edit item 1 and everything works, edit item 3 and you can't see what you are typing. This issue is only in Safari - 6.0.3 is my version. Chrome and Firefox seem to work properly.
</p>

<h2>Simple List<button id='add-section-2' class='addSimpleList'>+</button></h2>

<input type='hidden' id='section-2' />
<ul id='list-section-2' class='sortable simpleList'></ul>
</div>
<div id='tmpSimpleList' class='template'>
    <li data-can-delete='yes'>
        <input type='hidden' value='-' />
<span class='ui-icon ui-icon-arrowthick-2-n-s'></span>

<span class='order'></span>

<span class='title'>Untitled</span>

<span class='editTitle'><input value='Untitled'/></span>

        <input type='hidden' value='' />
        <button>-</button>
    </li>
</div> 
```

## javascript

```
// Initilize order of sortables
UpdateListCounts();

// turn on sortable items
$(".sortable").sortable({
    placeholder: "ui-state-highlight",
    update: function (event, ui) {
        UpdateListCounts();
    }
});
$(".sortable").disableSelection();
$(document).on('change', '.sortable > li > select', function (e) {
    UpdateListCounts();
});

// Add to list buttons
$('.addSimpleList').on('click', function (e) {
    $('#tmpSimpleList li').clone().appendTo('#' + $(this).attr('id').replace('add-', 'list-'));
    UpdateListCounts();
    e.preventDefault();
});

// Delete
$(document).on('click', '.sortable > li > button', function (e) {
    if ($(this).parent().attr('data-can-delete') === 'yes') {
        $(this).parent().remove();
        UpdateListCounts();
    } else {
        alert('This item is in use by at least one page so it can not be removed.');
    }
    e.preventDefault();
});

// Edit
$(document).on('click', '.sortable > li > .title', function (e) {
    $(this).hide();
    $(this).parent().children('.editTitle').show().children('input').focus();
});
$(document).on('blur', '.sortable > li > .editTitle > input', function (e) {
    $(this).parent().hide();
    $(this).parent().parent().children('.title').show().html($(this).val());
    UpdateListCounts();
});

// Update the order values on the list and
// update the lists json data
function UpdateListCounts() {
    $(".sortable").each(function (index) {
        $(this).children("li").each(function (index) {
            $(this).children(".order").text(index + 1);
        });
    });
    UpdateSimpleListData();
}

// Store the sections list in json
function UpdateSimpleListData() {
    $(".simpleList").each(function (index) {
        var data = Array();
        $(this).children("li").each(function (index) {
            $(this).children(".order").text(index + 1);
            data[index] = Array(index,
            $(this).children("input").val(),
            $(this).children(".title").text());
        });
        var dataText = JSON.stringify(data, null, 2);
        $('#' + $(this).attr('id').replace('list-', '')).val(dataText);
    });
} 
```

## css

```
html, body {
    width: 100%;
    height: 100%;
    margin: 0px;
    padding: 0px;
    background-color: #f6f6f6;
    font-size: 13px;
}

input:focus,
select:focus,
textarea:focus,
button:focus {
    outline: none;
}

input,
select,
textarea,
button {
    outline: none;
    margin: 0px;
    padding: 2px;
    -webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
    -moz-box-sizing: border-box;    /* Firefox, other Gecko */
     box-sizing: border-box;
     border: 1px solid #ccc;
}

input {
    width: 100%;
    padding: 2px;
}

.smallColumns {
    -webkit-column-count: 3 !important;
    -moz-column-count: 3 !important;
    column-count: 3 !important;
}

.sortable {
    position: relative;
    list-style-type: none;
    margin: 0;
    margin-top: 5px;
    padding: 0;
    -webkit-column-count: 2;
    -webkit-column-gap: 5px;
    -moz-column-count: 2;
    -moz-column-gap: 5px;
    column-count: 2;
    column-gap: 5px;
    cursor:default;
 }

.sortable li {
    position: relative;
    display: inline-block;
    margin: 0px 0px 5px 0px;
    padding-top: 5px;
    padding-bottom: 5px;
    padding-left: 20px;
    font-size: 14px;
    height: 18px;
    width: 90%;
}

.sortable .ui-state-highlight {
    margin: 0px 0px 2px 0px !important;
}

.sortable li .ui-icon {
    position: absolute;
    margin-left: -1.3em;
}

.sortable li .order {
    margin-right: .5em;
}

.sortable li .title,
.sortable li .editTitle {
    position: absolute;
    display: block;
    top: 5px;
    bottom: 5px;
    left: 40px;
    right: 40px;
    z-index: 90;
}

.sortable li .editTitle {
    display: none;
}

.sortable li .editTitle input {
    width: 100%;
    height: 100%;
    color: black;
    font-size: 14px;
    padding: 0px;
    z-index: 100;
}

.sortable li button {
    position: absolute;
    right: 5px;
    padding: 2px;
    border: 1px solid #cccccc;
    background: #f6f6f6;
    font-weight: bold;
    width: 20px;
}

.sortable li select {
    position: absolute;
    right:30px;
}

h2 {
    margin-top: 25px;
    margin-bottom: 3px;
    font-size: 16px;
    border-bottom: 1px dotted #CCC;
}

h2 button {
    float: right;
    padding: 2px;
    border: 1px solid #cccccc;
    background: #f6f6f6;
    font-weight: bold;
    width: 20px;
}

.template {
    display: none;
} 
```

# db2 - 在 DB2 的 FOR BIT DATA 列中插入字符串

> ID：16163444
> 
> 赞同：2
> 
> 时间：2013-04-23T07:28:53.993
> 
> 标签：db2, hex

当我尝试在 DB2 中的列中插入一个字符串值（定义为**CHAR(15) FOR BIT DATA ）**时，我注意到它被转换为其他格式，可能是十六进制。

**在检索数据时，我得到一个字节数组，并在尝试使用System.Text.Encoding.ASCII.GetString**将其转换回 ASCII 时，我得到一个包含一些垃圾字符的字符串。

有人遇到过这个问题吗？有什么决议吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:23:29.247

For Bit Data 防止客户端和服务器之间的代码页转换。这通常用于插入二进制数据，而不是字符串。

请看一下这个论坛，其中提出并解决了许多案例：[http ://www.dbforums.com/db2/1663992-bit-data.html](http://www.dbforums.com/db2/1663992-bit-data.html)

您最终可以对数据库页面进行强制转换（这取决于您的平台）

```
CAST(c1 AS CHAR(n) FOR SBCS DATA)

CAST (<forbitdataexpression> AS [VARCHAR|CHAR][(<n>)] FOR [SBCS|DBCS] DATA) 
```

参考

*   [http://bytes.com/topic/db2/answers/180874-problem-db2-field-type-char-n-bit-data](http://bytes.com/topic/db2/answers/180874-problem-db2-field-type-char-n-bit-data)
*   [http://bytes.com/topic/db2/answers/182124-function-convert-bit-data-column-string](http://bytes.com/topic/db2/answers/182124-function-convert-bit-data-column-string)
*   [http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.sql.ref.doc/doc/r0023459.html](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.sql.ref.doc/doc/r0023459.html)

# php - 单击删除按钮后页面不刷新

> ID：16163446
> 
> 赞同：-1
> 
> 时间：2013-04-23T07:29:03.287
> 
> 标签：php

再会

在这里需要一些帮助，我的删除按钮有效，但在我单击删除按钮后页面不会自动刷新。我仍然需要手动从 db 中检索数据，这将反映出数据已被删除...

这是我删除 php 的代码：我怎样才能让它自动刷新页面？

```
<?php
require 'include/DB_Open.php';

$id = $_POST['id'];
    $idtodelete = "'" . implode("','",$id) . "'";

    $query = "DELETE FROM tbl WHERE ticket in (" . $idtodelete . ")";
    $myData = mysql_query($query);
    echo "DATA DELETED";

    if($myData)
    {
    header("Location: delete.php");
    }

include 'include/DB_Close.php';
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:54:01.707

我建议在删除逻辑之后获取数据。然后在取票之前执行删除逻辑。然后甚至不需要重定向到同一页面。

```
//
// DELETE
//
if (isset($_POST['delete'] && isset($_POST['id'])) {
     // Do delete stuff, 
     // notice delete variable which would be the name of the delete form button e.g.
     // If you like, you can still echo "Data deleted here" in e.g. a notification window
}
//
// FETCH data
//
$query = "Select * FROM tbl";
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T08:12:29.250

正如其中一条评论和 php 文档所建议的那样：

[http://it2.php.net/manual/en/function.header.php](http://it2.php.net/manual/en/function.header.php)：

**请记住，必须在发送任何实际输出之前调用 header()，无论是通过普通 HTML 标记、文件中的空白行还是从 PHP 发送。使用 include 或 require 函数或其他文件访问函数读取代码并在调用 header() 之前输出空格或空行是一个非常常见的错误。使用单个 PHP/HTML 文件时也存在同样的问题。**

基本上你必须拿出：

```
echo "DATA DELETED"; 
```

如果页面无论如何都要被重定向，那么尝试回显该字符串有什么意义？

如果你想让它变得花哨，你可以使用 Ajax 删除它，并`setTimeout()`在显示消息后触发 JavaScript x 秒。

或者，如果您真的非常非常非常非常想要这样做，您可以禁用错误报告/显示（使用`error_reporting(0)`and `ini_set('display_errors', 'Off')`。根据经验，我知道它会起作用，但它很讨厌并且**极不推荐**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T07:40:58.380

如果你用这个更好地使用 post 方法

```
if ($_SERVER["REQUEST_METHOD"] == "POST") 
{
    $id         = $_POST['id'];
    $idtodelete = "'" . implode("','",$id) . "'";
    $query      = "DELETE FROM tbl WHERE ticket in (" . $idtodelete . ")";
    if (mysql_query($query))
    {
      header("Location: delete.php");
    } else {
      echo "Can not delete";
    }
} 
```

# php - 在提交值丢失

> ID：16163448
> 
> 赞同：1
> 
> 时间：2013-04-23T07:29:12.743
> 
> 标签：php, javascript, jquery

我有一个在更改单选按钮时触发的 javascript。在我的单选按钮上也有下面的代码。

```
<input type="radio"  name="design" style="vertical-align: middle"  value="1"   onchange="this.form.submit()"  <?php if(isset($_POST['design'])){ if($_POST['design'] == 1) {echo "checked";}} ?>/> 
```

因此，当这组“设计”单选按钮发生变化时，这个年龄将被提交，并且根据哪个单选按钮加载数据。

我也有一个带有下面代码的javascript。

```
$("#lensType input:radio[name='design']:checked").change(populate); 
```

它会在发生更改时触发，但现在当表单提交并加载时，更改的执行将丢失。我怎样才能保留那个值或者让这个函数仍然执行。

此函数根据选择的单选按钮加载组合动态选择列表。同时，单选按钮根据表格的设计将数据加载到表格中。

# asp.net - 处理 Application_Error global.asax 中的异常

> ID：16163453
> 
> 赞同：1
> 
> 时间：2013-04-23T07:29:36.633
> 
> 标签：asp.net, global-asax, application-error

我在全局文件中编写了代码`Application_Error`。
我在我的数据库中插入错误详细信息。
但是有时它会插入数千条相同错误的记录。
这是否意味着内部存在错误`Application_Error`
如果是，那么我该如何处理。

## 编辑 1

插入错误后，我也重定向到错误页面。

错误详情

```
Message: Exception of type 'System.Web.HttpUnhandledException' was thrown.<br><br><br>
Inner Exception : System.NullReferenceException: Object reference not set to an instance of an object.

at System.Collections.Specialized.NameObjectCollectionBase.BaseGetKey(Int32 index)
at System.Collections.Specialized.NameObjectCollectionBase.BaseRemove(String name)
at System.Web.SessionState.SessionStateItemCollection.Remove(String name)
at InfoDomeWeb.UserControl.LeftPanel.SetCustomerInfo() in D:\Working Folder\InfoDome\InfoDomeWeb\UserControl\LeftPanel.ascx.cs:line 185
at InfoDomeWeb.UserControl.LeftPanel.Page_Load(Object sender, EventArgs e) in D:\Working Folder\InfoDome\InfoDomeWeb\UserControl\LeftPanel.ascx.cs:line 71
at System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e)
at System.Web.UI.Control.LoadRecursive()
at System.Web.UI.Control.LoadRecursive()
at System.Web.UI.Control.LoadRecursive()
at System.Web.UI.Control.LoadRecursive()
at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)<br><br><br>Stack trace:    at System.Web.UI.Page.HandleError(Exception e)
at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)
at System.Web.UI.Page.ProcessRequest(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)
at System.Web.UI.Page.ProcessRequest()
at System.Web.UI.Page.ProcessRequest(HttpContext context)
at ASP.error_aspx.ProcessRequest(HttpContext context) in c:\Windows\Microsoft.NET\Framework64\v4.0.30319\Temporary ASP.NET Files\root\961a93aa\98c42fe5\App_Web_304di5zu.12.cs:line 0
at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

错误发生在页面上

```
D:\Working Folder\InfoDome\InfoDomeWeb\UserControl\LeftPanel.ascx.cs 
```

但我没有发现任何问题。

# c++11 - 你可以在条件表达式中抛出吗？（是：边界检查如何扩展到多个维度？）

> ID：16163456
> 
> 赞同：2
> 
> 时间：2013-04-23T07:29:47.887
> 
> 标签：c++11, multidimensional-array, conditional-operator, indexoutofboundsexception, throw

**注意：**我通过实现一个完全不同的问题解决了原来的问题。有关新的实际问题，请参见附录，但您可以阅读前一部分以了解上下文。

这是我[以前的一篇文章](https://stackoverflow.com/q/10171525/1010226 "如何制作基于可变参数的链式索引函数？")的扩展。我根据该答案制作了一个容器类：

```
template < typename T, unsigned N0, unsigned ...N >
struct array_md
{
    // There's a class template specialization with no extents.

    // Imagine the various N... components are bracket-enclosed instead
    // of comma-separated.  And if "N..." is empty, then we just have "T"
    // as the "direct_element_type".  (I actually use recursive class
    // definitions.)
    using direct_element_type = T[N...];
    using data_type = direct_element_type[ N0 ];

    template < typename ...Indices >
    auto  operator ()( Indices &&...i )
    noexcept( !indexing_result<data_type &, Indices...>::can_throw )
    -> typename indexing_result<data_type &, Indices...>::type
    { return slice(data, static_cast<Indices &&>( i )...); }

    template < typename ...Indices >
    constexpr
    auto  operator ()( Indices &&...i ) const
    noexcept( !indexing_result<data_type &, Indices...>::can_throw )
    -> typename indexing_result<data_type &, Indices...>::type
    { return slice(data, static_cast<Indices &&>( i )...); }

    data_type  data;
}; 
```

我正在尝试`at`为这个容器制作一个版本。我想我会制作一个`slice`带有异常对象的版本。与 general 不同`slice`， my`checked_slice`必须采用内置数组对象，因为指针和类类型（with `operator []`）没有（标准）方式来给我界限。

```
template < typename E, typename T >
inline constexpr
auto  checked_slice( E &&, T &&t ) noexcept -> T &&
{ return static_cast<T &&>(t); }

template < typename E, typename T, std::size_t N, typename ...V >
inline constexpr
auto  checked_slice( E &&e, T (&t)[N], std::size_t u, V &&...v )
-> typename remove_some_extents<T[N], 1u + sizeof...(V)>::type &
{
    return u < N ? checked_slice( static_cast<E &&>(e), static_cast<T &>(t[ u ]),
     static_cast<V &&>(v)... ) : throw static_cast<E &&>( e );
}

template < typename E, typename T, std::size_t N, typename ...V >
inline constexpr
auto  checked_slice( E &&e, T (&&t)[N], std::size_t u, V &&...v )
-> typename remove_some_extents<T[N], 1u + sizeof...(V)>::type &&
{
    return u < N ? checked_slice( static_cast<E &&>(e),static_cast<T &&>(t[ u ]),
     static_cast<V &&>(v)... ) : throw static_cast<E &&>( e );
} 
```

（按照`remove_some_extents`它所说的做，而不是 C++11 标准库给你的一个或全部。）当我把它放进我的`at`：

```
template < typename T, unsigned N0, unsigned ...N >
struct array_md
{
    //...
    template < typename ...Indices >
    auto  at( Indices &&...i )
    -> typename remove_some_extents<data_type, sizeof...( Indices )>::type &
    {
        return checked_slice(std::out_of_range{ "Index out of bounds" }, data,
         static_cast<Indices &&>( i )...);
    }

    template < typename ...Indices >
    constexpr
    auto  at( Indices &&...i ) const
    -> typename remove_some_extents<data_type,sizeof...( Indices )>::type const &
    {
        return checked_slice(std::out_of_range{ "Index out of bounds" }, data,
         static_cast<Indices &&>( i )...);
    }
    //...
}; 
```

我收到与数组到指针衰减相关的错误！（我正在使用与适用于 Windows-8 Pro 32 位的 CodeBlocks 12.11 捆绑在一起的 TDC-GCC 4.7.1。）

```
In file included from container/array_md.hpp:36:0,
                 from test\arraymd_test.cpp:15:
utility/slice.hpp: In instantiation of 'constexpr typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type& checked_slice(E&&, T (&)[N], std::size_t, V&& ...) [with E = std::out_of_range; T = const int; unsigned int N = 2u; V = {}; typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type = const int; std::size_t = unsigned int]':
container/array_md.hpp:284:112:   required from 'constexpr const typename remove_some_extents<typename container::array_md<T, N ...>::data_type [M], sizeof (Indices ...)>::type& container::array_md<T, M, N ...>::at(Indices&& ...) const [with Indices = {int}; T = int; unsigned int M = 2u; unsigned int ...N = {}; typename remove_some_extents<typename container::array_md<T, N ...>::data_type [M], sizeof (Indices ...)>::type = int]'
test\arraymd_test.cpp:224:1:   required from here
utility/slice.hpp:141:10: warning: returning reference to temporary [enabled by default]
utility/slice.hpp: In instantiation of 'constexpr typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type& checked_slice(E&&, T (&)[N], std::size_t, V&& ...) [with E = std::out_of_range; T = const char [2][6]; unsigned int N = 2u; V = {}; typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type = const char [2][6]; std::size_t = unsigned int]':
container/array_md.hpp:284:112:   required from 'constexpr const typename remove_some_extents<typename container::array_md<T, N ...>::data_type [M], sizeof (Indices ...)>::type& container::array_md<T, M, N ...>::at(Indices&& ...) const [with Indices = {int}; T = char [6]; unsigned int M = 2u; unsigned int ...N = {2u}; typename remove_some_extents<typename container::array_md<T, N ...>::data_type [M], sizeof (Indices ...)>::type = char [2][6]]'
test\arraymd_test.cpp:238:1:   required from here
utility/slice.hpp:141:10: error: invalid initialization of reference of type 'const char (&)[2][6]' from expression of type 'const char (*)[6]'
utility/slice.hpp:142:1: error: body of constexpr function 'constexpr typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type& checked_slice(E&&, T (&)[N], std::size_t, V&& ...) [with E = std::out_of_range; T = const char [2][6]; unsigned int N = 2u; V = {}; typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type = const char [2][6]; std::size_t = unsigned int]' not a return-statement
utility/slice.hpp: In instantiation of 'constexpr typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type& checked_slice(E&&, T (&)[N], std::size_t, V&& ...) [with E = std::out_of_range; T = const char [6]; unsigned int N = 2u; V = {}; typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type = const char [6]; std::size_t = unsigned int]':
utility/slice.hpp:141:10:   required from 'constexpr typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type& checked_slice(E&&, T (&)[N], std::size_t, V&& ...) [with E = std::out_of_range; T = const char [2][6]; unsigned int N = 2u; V = {int}; typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type = const char [6]; std::size_t = unsigned int]'
container/array_md.hpp:284:112:   required from 'constexpr const typename remove_some_extents<typename container::array_md<T, N ...>::data_type [M], sizeof (Indices ...)>::type& container::array_md<T, M, N ...>::at(Indices&& ...) const [with Indices = {int, int}; T = char [6]; unsigned int M = 2u; unsigned int ...N = {2u}; typename remove_some_extents<typename container::array_md<T, N ...>::data_type [M], sizeof (Indices ...)>::type = char [6]]'
test\arraymd_test.cpp:239:1:   required from here
utility/slice.hpp:141:10: error: invalid initialization of reference of type 'const char (&)[6]' from expression of type 'const char*'
utility/slice.hpp:142:1: error: body of constexpr function 'constexpr typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type& checked_slice(E&&, T (&)[N], std::size_t, V&& ...) [with E = std::out_of_range; T = const char [6]; unsigned int N = 2u; V = {}; typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type = const char [6]; std::size_t = unsigned int]' not a return-statement
utility/slice.hpp: In instantiation of 'constexpr typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type& checked_slice(E&&, T (&)[N], std::size_t, V&& ...) [with E = std::out_of_range; T = const char [2][6]; unsigned int N = 2u; V = {int}; typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type = const char [6]; std::size_t = unsigned int]':
container/array_md.hpp:284:112:   required from 'constexpr const typename remove_some_extents<typename container::array_md<T, N ...>::data_type [M], sizeof (Indices ...)>::type& container::array_md<T, M, N ...>::at(Indices&& ...) const [with Indices = {int, int}; T = char [6]; unsigned int M = 2u; unsigned int ...N = {2u}; typename remove_some_extents<typename container::array_md<T, N ...>::data_type [M], sizeof (Indices ...)>::type = char [6]]'
test\arraymd_test.cpp:239:1:   required from here
utility/slice.hpp:141:10: error: invalid initialization of reference of type 'const char (&)[6]' from expression of type 'const char*'
utility/slice.hpp:142:1: error: body of constexpr function 'constexpr typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type& checked_slice(E&&, T (&)[N], std::size_t, V&& ...) [with E = std::out_of_range; T = const char [2][6]; unsigned int N = 2u; V = {int}; typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type = const char [6]; std::size_t = unsigned int]' not a return-statement
utility/slice.hpp: In instantiation of 'constexpr typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type& checked_slice(E&&, T (&)[N], std::size_t, V&& ...) [with E = std::out_of_range; T = const char [2][6]; unsigned int N = 2u; V = {unsigned int}; typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type = const char [6]; std::size_t = unsigned int]':
container/array_md.hpp:284:112:   required from 'constexpr const typename remove_some_extents<typename container::array_md<T, N ...>::data_type [M], sizeof (Indices ...)>::type& container::array_md<T, M, N ...>::at(Indices&& ...) const [with Indices = {int, unsigned int}; T = char [6]; unsigned int M = 2u; unsigned int ...N = {2u}; typename remove_some_extents<typename container::array_md<T, N ...>::data_type [M], sizeof (Indices ...)>::type = char [6]]'
test\arraymd_test.cpp:261:5:   required from here
utility/slice.hpp:141:10: error: invalid initialization of reference of type 'const char (&)[6]' from expression of type 'const char*'
utility/slice.hpp:142:1: error: body of constexpr function 'constexpr typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type& checked_slice(E&&, T (&)[N], std::size_t, V&& ...) [with E = std::out_of_range; T = const char [2][6]; unsigned int N = 2u; V = {unsigned int}; typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type = const char [6]; std::size_t = unsigned int]' not a return-statement
utility/slice.hpp: In instantiation of 'constexpr typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type& checked_slice(E&&, T (&)[N], std::size_t, V&& ...) [with E = std::out_of_range; T = int; unsigned int N = 2u; V = {}; typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type = int; std::size_t = unsigned int]':
container/array_md.hpp:274:112:   required from 'typename remove_some_extents<typename container::array_md<T, N ...>::data_type [M], sizeof (Indices ...)>::type& container::array_md<T, M, N ...>::at(Indices&& ...) [with Indices = {int}; T = int; unsigned int M = 2u; unsigned int ...N = {}; typename remove_some_extents<typename container::array_md<T, N ...>::data_type [M], sizeof (Indices ...)>::type = int]'
test\arraymd_test.cpp:220:1:   required from here
utility/slice.hpp:141:10: error: invalid initialization of non-const reference of type 'remove_some_extents<int [2], 1u>::type& {aka int&}' from an rvalue of type 'int'
utility/slice.hpp:142:1: error: body of constexpr function 'constexpr typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type& checked_slice(E&&, T (&)[N], std::size_t, V&& ...) [with E = std::out_of_range; T = int; unsigned int N = 2u; V = {}; typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type = int; std::size_t = unsigned int]' not a return-statement
utility/slice.hpp: In instantiation of 'constexpr typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type& checked_slice(E&&, T (&)[N], std::size_t, V&& ...) [with E = std::out_of_range; T = char [2][6]; unsigned int N = 2u; V = {}; typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type = char [2][6]; std::size_t = unsigned int]':
container/array_md.hpp:274:112:   required from 'typename remove_some_extents<typename container::array_md<T, N ...>::data_type [M], sizeof (Indices ...)>::type& container::array_md<T, M, N ...>::at(Indices&& ...) [with Indices = {int}; T = char [6]; unsigned int M = 2u; unsigned int ...N = {2u}; typename remove_some_extents<typename container::array_md<T, N ...>::data_type [M], sizeof (Indices ...)>::type = char [2][6]]'
test\arraymd_test.cpp:234:1:   required from here
utility/slice.hpp:141:10: error: invalid initialization of non-const reference of type 'char (&)[2][6]' from an rvalue of type 'char (*)[6]'
utility/slice.hpp:142:1: error: body of constexpr function 'constexpr typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type& checked_slice(E&&, T (&)[N], std::size_t, V&& ...) [with E = std::out_of_range; T = char [2][6]; unsigned int N = 2u; V = {}; typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type = char [2][6]; std::size_t = unsigned int]' not a return-statement
utility/slice.hpp: In instantiation of 'constexpr typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type& checked_slice(E&&, T (&)[N], std::size_t, V&& ...) [with E = std::out_of_range; T = char [6]; unsigned int N = 2u; V = {}; typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type = char [6]; std::size_t = unsigned int]':
utility/slice.hpp:141:10:   required from 'constexpr typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type& checked_slice(E&&, T (&)[N], std::size_t, V&& ...) [with E = std::out_of_range; T = char [2][6]; unsigned int N = 2u; V = {int}; typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type = char [6]; std::size_t = unsigned int]'
container/array_md.hpp:274:112:   required from 'typename remove_some_extents<typename container::array_md<T, N ...>::data_type [M], sizeof (Indices ...)>::type& container::array_md<T, M, N ...>::at(Indices&& ...) [with Indices = {int, int}; T = char [6]; unsigned int M = 2u; unsigned int ...N = {2u}; typename remove_some_extents<typename container::array_md<T, N ...>::data_type [M], sizeof (Indices ...)>::type = char [6]]'
test\arraymd_test.cpp:235:1:   required from here
utility/slice.hpp:141:10: error: invalid initialization of non-const reference of type 'char (&)[6]' from an rvalue of type 'char*'
utility/slice.hpp:142:1: error: body of constexpr function 'constexpr typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type& checked_slice(E&&, T (&)[N], std::size_t, V&& ...) [with E = std::out_of_range; T = char [6]; unsigned int N = 2u; V = {}; typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type = char [6]; std::size_t = unsigned int]' not a return-statement
utility/slice.hpp: In instantiation of 'constexpr typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type& checked_slice(E&&, T (&)[N], std::size_t, V&& ...) [with E = std::out_of_range; T = char [2][6]; unsigned int N = 2u; V = {int}; typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type = char [6]; std::size_t = unsigned int]':
container/array_md.hpp:274:112:   required from 'typename remove_some_extents<typename container::array_md<T, N ...>::data_type [M], sizeof (Indices ...)>::type& container::array_md<T, M, N ...>::at(Indices&& ...) [with Indices = {int, int}; T = char [6]; unsigned int M = 2u; unsigned int ...N = {2u}; typename remove_some_extents<typename container::array_md<T, N ...>::data_type [M], sizeof (Indices ...)>::type = char [6]]'
test\arraymd_test.cpp:235:1:   required from here
utility/slice.hpp:141:10: error: invalid initialization of non-const reference of type 'char (&)[6]' from an rvalue of type 'char*'
utility/slice.hpp:142:1: error: body of constexpr function 'constexpr typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type& checked_slice(E&&, T (&)[N], std::size_t, V&& ...) [with E = std::out_of_range; T = char [2][6]; unsigned int N = 2u; V = {int}; typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type = char [6]; std::size_t = unsigned int]' not a return-statement
utility/slice.hpp: In instantiation of 'constexpr typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type& checked_slice(E&&, T (&)[N], std::size_t, V&& ...) [with E = std::out_of_range; T = char [2][6]; unsigned int N = 2u; V = {long double}; typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type = char [6]; std::size_t = unsigned int]':
container/array_md.hpp:274:112:   required from 'typename remove_some_extents<typename container::array_md<T, N ...>::data_type [M], sizeof (Indices ...)>::type& container::array_md<T, M, N ...>::at(Indices&& ...) [with Indices = {int, long double}; T = char [6]; unsigned int M = 2u; unsigned int ...N = {2u}; typename remove_some_extents<typename container::array_md<T, N ...>::data_type [M], sizeof (Indices ...)>::type = char [6]]'
test\arraymd_test.cpp:260:5:   required from here
utility/slice.hpp:141:10: error: invalid initialization of non-const reference of type 'char (&)[6]' from an rvalue of type 'char*'
utility/slice.hpp:142:1: error: body of constexpr function 'constexpr typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type& checked_slice(E&&, T (&)[N], std::size_t, V&& ...) [with E = std::out_of_range; T = char [2][6]; unsigned int N = 2u; V = {long double}; typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type = char [6]; std::size_t = unsigned int]' not a return-statement
utility/slice.hpp: In function 'constexpr typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type& checked_slice(E&&, T (&)[N], std::size_t, V&& ...) [with E = std::out_of_range; T = const char [2][6]; unsigned int N = 2u; V = {unsigned int}; typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type = const char [6]; std::size_t = unsigned int]':
utility/slice.hpp:142:1: warning: control reaches end of non-void function [-Wreturn-type]
utility/slice.hpp: In function 'constexpr typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type& checked_slice(E&&, T (&)[N], std::size_t, V&& ...) [with E = std::out_of_range; T = const char [2][6]; unsigned int N = 2u; V = {int}; typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type = const char [6]; std::size_t = unsigned int]':
utility/slice.hpp:142:1: warning: control reaches end of non-void function [-Wreturn-type]
utility/slice.hpp: In function 'constexpr typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type& checked_slice(E&&, T (&)[N], std::size_t, V&& ...) [with E = std::out_of_range; T = const char [6]; unsigned int N = 2u; V = {}; typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type = const char [6]; std::size_t = unsigned int]':
utility/slice.hpp:142:1: warning: control reaches end of non-void function [-Wreturn-type]
utility/slice.hpp: In function 'constexpr typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type& checked_slice(E&&, T (&)[N], std::size_t, V&& ...) [with E = std::out_of_range; T = const char [2][6]; unsigned int N = 2u; V = {}; typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type = const char [2][6]; std::size_t = unsigned int]':
utility/slice.hpp:142:1: warning: control reaches end of non-void function [-Wreturn-type]
utility/slice.hpp: In function 'constexpr typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type& checked_slice(E&&, T (&)[N], std::size_t, V&& ...) [with E = std::out_of_range; T = char [2][6]; unsigned int N = 2u; V = {long double}; typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type = char [6]; std::size_t = unsigned int]':
utility/slice.hpp:142:1: warning: control reaches end of non-void function [-Wreturn-type]
utility/slice.hpp: In function 'constexpr typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type& checked_slice(E&&, T (&)[N], std::size_t, V&& ...) [with E = std::out_of_range; T = char [2][6]; unsigned int N = 2u; V = {int}; typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type = char [6]; std::size_t = unsigned int]':
utility/slice.hpp:142:1: warning: control reaches end of non-void function [-Wreturn-type]
utility/slice.hpp: In function 'constexpr typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type& checked_slice(E&&, T (&)[N], std::size_t, V&& ...) [with E = std::out_of_range; T = char [6]; unsigned int N = 2u; V = {}; typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type = char [6]; std::size_t = unsigned int]':
utility/slice.hpp:142:1: warning: control reaches end of non-void function [-Wreturn-type]
utility/slice.hpp: In function 'constexpr typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type& checked_slice(E&&, T (&)[N], std::size_t, V&& ...) [with E = std::out_of_range; T = char [2][6]; unsigned int N = 2u; V = {}; typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type = char [2][6]; std::size_t = unsigned int]':
utility/slice.hpp:142:1: warning: control reaches end of non-void function [-Wreturn-type]
utility/slice.hpp: In function 'constexpr typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type& checked_slice(E&&, T (&)[N], std::size_t, V&& ...) [with E = std::out_of_range; T = int; unsigned int N = 2u; V = {}; typename remove_some_extents<T [N], (1u + sizeof (V ...))>::type = int; std::size_t = unsigned int]':
utility/slice.hpp:142:1: warning: control reaches end of non-void function [-Wreturn-type] 
```

我认为使用数组引用可以取消数组到指针的衰减。这是一个 GCC 错误，还是我在某个地方搞砸了？

对于“slice.hpp”，第 141 行，第 10 列是函数（l 值版本）中语句`checked_slice`的结尾，而 L142C1 是函数的结束括号。在“array_md.hpp”中，L284C112 和 L274C112 分别是`at`函数的返回（和唯一）语句，并且分别是`const`非常量。该列位于`static_cast`.

顺便说一句，这里是`remove_some_extents`：

```
// Forward declaration
template < typename Array, std::size_t Count >
struct remove_some_extents;

// Case with indefinite array but no extents to strip
template < typename T >
struct remove_some_extents< T[], 0u >
{ typedef T type[]; };

// Case with definite array but no extents to strip
template < typename T, std::size_t N >
struct remove_some_extents< T[N], 0u >
{ typedef T type[N]; };

// Case with non-array type but no extents to strip
template < typename T >
struct remove_some_extents< T, 0u >
{ typedef T type; };

// Case with indefinite array and extents to strip
template < typename T, std::size_t L >
struct remove_some_extents< T[], L >
{ typedef typename remove_some_extents<T, L - 1u>::type type; };

// Case with definite array and extents to strip
template < typename T, std::size_t N, std::size_t L >
struct remove_some_extents< T[N], L >
{ typedef typename remove_some_extents<T, L - 1u>::type type; };

// Right now, non-array type with non-zero strip count should give an error. 
```

谢谢。

**编辑：**为 .添加了基本情况和 r 值重载`checked_slice`。

**附录：**我得到了一些有用的东西，但我不知道为什么旧方法不起作用。

我首先注释掉了 r 值的重载`checked_slice`，以减少我必须使用的变量。然后我制作了一个`checked_slice`适用于标准容器的版本，但您不需要查看它，因为它没有帮助。（我评论了它以确保它没有任何区别。）

我将常规版本更改为：

```
template < typename E, typename T, std::size_t N, typename ...V >
inline constexpr
auto  checked_slice( E &&e, T (&t)[N], std::size_t u, V &&...v )
 -> typename remove_some_extents<T[N], 1u + sizeof...(V)>::type &
{
    return checked_slice( static_cast<E &&>(e), static_cast<T &>(t[ u ]),
     static_cast<V &&>(v)... );
} 
```

即我删除了实际测试和失败部分，并且代码有效！问题似乎不是索引，而是抛出和/或条件！果然，当我将其更改为：

```
template < typename E, typename T, std::size_t N, typename ...V >
inline
auto  checked_slice( E &&e, T (&t)[N], std::size_t u, V &&...v )
 -> typename remove_some_extents<T[N], 1u + sizeof...(V)>::type &
{
    if ( u < N )
        return checked_slice(static_cast<E &&>(e),t[u],static_cast<V &&>(v)...);
    else
        throw e;
} 
```

它仍然有效！什么给出了，我认为使用 throw 语句作为条件表达式的动作部分之一是可以的？这是我的编译器中的错误吗？

我可能不得不放弃并将边界检查分离为纯函数并在`at`方法中抛出失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T12:31:52.650

由于我更改了此问题，因此它可能尚未被标记为新问题。我在[另一篇文章](https://stackoverflow.com/q/16246123/1010226 "How can an array work with the conditional operator?")中重新提问得到[了答案](https://stackoverflow.com/a/16247205/1010226)，它奏效了。

# sql-server - 基于记录状态的 SQL 日期选择

> ID：16163468
> 
> 赞同：0
> 
> 时间：2013-04-23T07:30:28.607
> 
> 标签：sql-server, sql-server-2005

我有带有 ID 和名称的测试主表

```
TestMaster          
ID  Name        
1   a       
2   b       
3   c 
```

和 testtrans 有 ID 主 ID，开始和结束日期

```
TestTrans           
ID  MasterID    Statusdate  Outcome
1   1   01/01/2013  Close
2   1   03/01/2013  Open
3   1   06/01/2013  Open
4   1   10/01/2013  Close
5   1   12/01/2013  Open
6   2   10/10/2012  Open
7   2   15/10/2012  Close
8   2   15/10/2012  Open
9   3   15/01/2013  Open
10  3   20/01/2013  Close
11   3  21/01/2013  Open
12  3        25/01/2013         Open 
```

我需要这样的输出
开始日期：应该是记录
结束日期的状态日期：应该基于记录状态。如果状态为关闭，则结束日期为关闭记录的状态日期，关闭状态之前的所有记录将被视为同一组的一部分

按 Masetr ID 分组

```
Output          
Master ID   Start date  end date    
1   01/01/2013  01/01/2013  
1   03/01/2013  10/01/2013  
1   12/01/2013  NULL    
2   10/10/2012  15/10/2012  
2   15/10/2012  Null    
3   15/01/2013  20/01/2013  
3    21/01/2013        Null 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T08:06:53.697

**更新：**

```
SET NOCOUNT ON;

DECLARE @temp TABLE
(
      ID INT IDENTITY(1,1)
    , MasterID INT
    , StatusDate datetime
    , Outcome VARCHAR(50)
)

INSERT INTO @temp (MasterID, StatusDate, Outcome)
VALUES 
    (1,   '20130101',  'Close'),
    (1,   '20130103',  'Open'),
    (1,   '20130106',  'Open'),
    (1,   '20130110',  'Close'),
    (1,   '20130112',  'Open'),
    (2,   '20121010',  'Open'),
    (2,   '20121015',  'Close'),
    (2,   '20121015',  'Open'),
    (3,   '20130115',  'Open'),
    (3,   '20130120',  'Close'),
    (3,   '20130121',  'Open'), 
    (3,   '20130125',  'Open')

;WITH data AS 
(
    SELECT 
          t.MasterId
        , StartDate = t.StatusDate
        , EndDate = t.StatusDate
    FROM @temp t
    WHERE OutCome = 'Close'
        AND NOT EXISTS (
            SELECT 1 
            FROM @temp t2
            WHERE t.StatusDate > t2.StatusDate
                AND t.MasterID = t2.MasterID
                AND t2.OutCome = 'Open'
        )

    UNION ALL

    SELECT 
          MasterId
        , StartDate = t.StatusDate
        , a.EndDate 
    FROM @temp t
    OUTER APPLY (
        SELECT EndDate = MAX(StatusDate) 
        FROM @temp a 
        WHERE a.MasterId = t.MasterId
            AND a.Outcome = 'Close'
            AND a.StatusDate > t.StatusDate
    ) a
    WHERE OutCome = 'Open'
        AND (
                NOT EXISTS(
                    SELECT 1 
                    FROM @temp t2
                    WHERE t.StatusDate > t2.StatusDate
                        AND t.MasterID = t2.MasterID
                        AND t.Outcome = t2.Outcome
                ) 
            OR 
                a.EndDate IS NULL
            )
)
SELECT *
FROM data d
WHERE NOT EXISTS(
    SELECT 1
    FROM data d2 
    WHERE d.MasterID = d2.MasterID
        AND d.StartDate > d2.StartDate
        AND d.EndDate IS NULL
        AND d2.EndDate IS NULL
)
ORDER BY 
      d.MasterID
    , d.StartDate
    , d.EndDate 
```

# android - 设备关闭时 DashClock Widget 是否更新其扩展？

> ID：16163472
> 
> 赞同：0
> 
> 时间：2013-04-23T07:30:34.373
> 
> 标签：android, android-widget, dashclock

我正在构建一个 DashClock 扩展，我需要在设备关闭之前在 SharedPrefs 中存储一些值。

那么，DashClock 小部件会在设备关闭之前调用 onUpdateData() 方法吗？或者，它是否调用 onDestroy()？

或者，我应该收听 ACTION_SHUTDOWN 广播吗？

# jquery - jquery 多读少读功能

> ID：16163473
> 
> 赞同：0
> 
> 时间：2013-04-23T07:30:39.840
> 
> 标签：jquery, slide

我试图做一个阅读更多，阅读更少的功能。

该功能似乎工作，只是不正确。

加载按钮说阅读更多，但它没有显示较短的版本。

然后，当您单击按钮时，它会立即更改所有幻灯片，而我只想在单击时移动一个。

我确定它很容易解决，但我是 jquery 的新手，所以在创建最简单的函数时遇到了麻烦

谢谢

```
<div class="team-member">

<div class="image">
    <img width="120" height="120" />
</div>

<div class="text">
    <h3>Mr John Kuo <span>LLB</span></h3>
    <h4>Executive Director and Chief Operating Officer</h4>

<div class="more-less">    
    <div class="more-block">

    <p>Mr Kuo has more than 10 years’ experience in international import &amp; exporting, commodities trading, international business development and strategic alliance planning. Before Resources, he was the vice general manager for BAAO Mining which is a Chinese raw material trading company based in Tianjin, China.</p>

    <div class="full-text">
        <p>Mr Kuo has more than 10 years’ experience in international import &amp; exporting, commodities trading, international business development and strategic alliance planning. Before Resources, he was the vice general manager for BAAO Mining which is a Chinese raw material trading company based in Tianjin, China.</p>
 <p>Mr Kuo has more than 10 years’ experience in international import &amp; exporting, commodities trading, international business development and strategic alliance planning. Before Resources, he was the vice general manager for BAAO Mining which is a Chinese raw material trading company based in Tianjin, China.</p>
 <p>Mr Kuo has more than 10 years’ experience in international import &amp; exporting, commodities trading, international business development and strategic alliance planning. Before Resources, he was the vice general manager for BAAO Mining which is a Chinese raw material trading company based in Tianjin, China.</p>
                                </div>

                            </div>
                        </div>

        <div class="more-link">
        <a href="#"><span class="icon"></span><span class="text">View More</span></a>
                        </div>

                </div>

            </div>

            <div class="team-member">

                <div class="image">
                    <img width="120" height="120" />
                </div>

                <div class="text">
                    <h3>Mr. Bon Jun<span></span></h3>
                    <h4>Non-Executive Director</h4>

        <div class="more-less">    
            <div class="more-block">

                <p>Mr Li holds a Bachelor of Mechanical Engineering degree from the Beijing Architecture Engineering University. He has worked for one of the biggest state owned company which has imported plant and e company under Thyssen in Germany and then moved to  to work as the Managing Director of Golden Mall Enterprise until 1999.</p>

                                <div class="full-text">
                                    <p>Mr. Li has rich experience in connecting foreign companies with enterprises and ever been involved in more than big projects with success. At present Mr. Li is the Limited in Beijing providing consulting services to clients globally In recent years Mr. Li has assisted Australian resources companies in establishing relationship with customers in leading to a number of successful projects.</p>
                                </div>

                            </div>
                        </div>

                        <div class="more-link">
                            <a href="#"><span class="icon"></span><span class="text">View More</span></a>
                        </div>

                </div>

            </div> 
```

这是jquery

```
$(".team-member .more-link span.text").click(function(){
 var moreAndLess = $(".full-text").is(':visible') ? 'View More' : 'View Less';
$(this).text(moreAndLess);

 $(".full-text").slideToggle();
 });

 $(".team-member .more-link a").click(function(event) {
event.preventDefault();
$('<div/>')
.append('default ' + event.type + ' prevented')
.appendTo('#log');
}); 
```

这是它的外观，

[http://jsfiddle.net/strohy85/6pEfg/1/](http://jsfiddle.net/strohy85/6pEfg/1/)

* * *

我得到了一个版本，但它有点错误，如果你按视图更多视图少几次，它会显示应该隐藏的链接，不知道为什么。 [http://jsfiddle.net/strohy85/6pEfg/8/](http://jsfiddle.net/strohy85/6pEfg/8/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:58:47.153

使用此代码

**html**

```
<div class="team-member">

<div class="image">
    <img width="120" height="120" />
</div>

<div class="text">
    <h3>Mr John Kuo <span>LLB</span></h3>
    <h4>Executive Director and Chief Operating Officer</h4>

<div class="more-less">    
    <div class="more-block" >

    <p>Mr Kuo has more than 10 years’ experience in international import &amp; exporting, commodities trading, international business development and strategic alliance planning. Before Resources, he was the vice general manager for BAAO Mining which is a Chinese raw material trading company based in Tianjin, China.</p>

    <div class="full-text" style="display:none;">
        <p>Mr Kuo has more than 10 years’ experience in international import &amp; exporting, commodities trading, international business development and strategic alliance planning. Before Resources, he was the vice general manager for BAAO Mining which is a Chinese raw material trading company based in Tianjin, China.</p>
 <p>Mr Kuo has more than 10 years’ experience in international import &amp; exporting, commodities trading, international business development and strategic alliance planning. Before Resources, he was the vice general manager for BAAO Mining which is a Chinese raw material trading company based in Tianjin, China.</p>
 <p>Mr Kuo has more than 10 years’ experience in international import &amp; exporting, commodities trading, international business development and strategic alliance planning. Before Resources, he was the vice general manager for BAAO Mining which is a Chinese raw material trading company based in Tianjin, China.</p>
                                </div>

                            </div>
                        </div>

        <div class="more-link">
        <a href="#"><span class="icon"></span><span class="text">View More</span></a>
                        </div>

                </div>

            </div>

            <div class="team-member">

                <div class="image">
                    <img width="120" height="120" />
                </div>

                <div class="text">
                    <h3>Mr. Bon Jun<span></span></h3>
                    <h4>Non-Executive Director</h4>

        <div class="more-less">    
            <div class="more-block">

                <p>Mr Li holds a Bachelor of Mechanical Engineering degree from the Beijing Architecture Engineering University. He has worked for one of the biggest state owned company which has imported plant and e company under Thyssen in Germany and then moved to  to work as the Managing Director of Golden Mall Enterprise until 1999.</p>

                                <div class="full-text">
                                    <p>Mr. Li has rich experience in connecting foreign companies with enterprises and ever been involved in more than big projects with success. At present Mr. Li is the Limited in Beijing providing consulting services to clients globally In recent years Mr. Li has assisted Australian resources companies in establishing relationship with customers in leading to a number of successful projects.</p>
                                </div>

                            </div>
                        </div>

                        <div class="more-link">
                            <a href="#"><span class="icon"></span><span class="text">View More</span></a>
                        </div>

                </div>

            </div> 
```

和**Javascript**

```
<script>

        $(".team-member .more-link span.text").click(function(){
            //alert($(".full-text").attr('style'));
            var moreAndLess = ($(".full-text").attr('style') == "") ? 'View More' : 'View Less';
            $(this).text(moreAndLess);

             $(".full-text").slideToggle();
             });

             $(".team-member .more-link a").click(function(event) {
            event.preventDefault();
            $('<div/>')
            .append('default ' + event.type + ' prevented')
            .appendTo('#log');

            });

        </script> 
```

它将按您的预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T08:10:17.620

可能你需要这样的东西：

```
$(".team-member .more-link span.text").click(function () {
  var moreAndLess = $(this).text() == 'View More' ? 'View Less' : 'View More';
  $(this).text(moreAndLess);
  $(".full-text").slideToggle();
}); 
```

并且您的 html 稍微更改了样式`display:none`或创建了一个 css 类并将`display`属性放入`none`：

```
<div class="full-text" style='display:none;'> 
```

在 CSS 类中：

```
.full-text{
   display:none;
} 
```

### [结帐小提琴](http://jsfiddle.net/6pEfg/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T08:56:51.117

嗨，我能够复制您的问题的一部分，您希望为您的 div 提供向下滑动的动画。

请参阅此[链接](http://jsfiddle.net/XkMbA/)了解更多详情。

它的主要jist是具有jquery`animate()`功能。

```
 $(this).prev().animate({
        height: '300'
    }, 500);
    $(this).text('Read Less'); 
```

不幸的是，该`animate()`函数有一些限制，因为它不能为元素的`auto`css 属性设置动画。因此有代码动画到 300px。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-30T06:37:32.827

我找到了解决方案，这里是 jsfiddle

[http://jsfiddle.net/strohy85/Hg7pD/3/](http://jsfiddle.net/strohy85/Hg7pD/3/)

```
$(document).ready(function () {
 $('.full-text').hide();

 $('.view-btn').click(function (event) {
    event.preventDefault();
    $(this).parent().find('.full-text').slideToggle('slow');
    $(this).text($(this).text() == 'Read less...' ? 'Read more...' : 'Read less...');
 });
}); 
```

# cluster-analysis - 在 ELKI 上运行 OPTICS 算法

> ID：16163482
> 
> 赞同：0
> 
> 时间：2013-04-23T07:30:56.903
> 
> 标签：cluster-analysis, elki, optics-algorithm

我通常是 R 用户（刚开始 R 用户，但我开始掌握它的窍门）。然而，我听到了关于 ELKI 的积极消息——尤其是它的速度。我遇到了这篇旧帖子[“如何对存储在 SQL 中的附近纬度和经度位置进行分组”](https://stackoverflow.com/questions/14695138/how-to-group-nearby-latitude-and-longitude-locations-stored-in-sql)，而 Anony-Mousse 发布的答案与我想做的类似。我希望能够将他所做的每一步复制到他在 Google Drive 上共享的 KML 文件中。

我已经下载了 ELKI 并且能够运行 mini-GUI，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/yprlR.png)

有人可以发布一些关于如何做 Anony-Mousse 能够做到的步骤吗？

我的数据本质上非常相似。我在 csv 文件中有地理编码地址（更具体地说，每个元组都是一个事件，变量/特征/列之一是事件的地理编码地址），我希望在上面的链接中找到类似于 OP 的集群.

希望 Anony-Mousse 会阅读这篇文章并进行救援。但是，如果其他人可以帮助我上路，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T21:36:10.557

很抱歉没有早点跟进。

我没有保留您所指的实验的代码。所以我不记得我是否使用 python 脚本将输出重写为 KML（我相信我这样做了），或者我是否只是从 ELKI 源复制并粘贴到自定义`ResultHandler`以生成文件。可能是第一个，因为在 Java 中编写 XML 比在 Python 中打印文档要复杂一些（虽然也更有可能是正确的 XML）。如果是这样，我可能使用了`scipy.spatial`计算凸包的包，读取 ELKI 文本输出相当简单（只需跳过注释行，并将另一个的两个数字列作为坐标）

# unit-testing - 如何从我的单元测试中触发 Quartz Cronjob

> ID：16163483
> 
> 赞同：0
> 
> 时间：2013-04-23T07:30:59.050
> 
> 标签：unit-testing, tomcat, junit, cron, quartz-scheduler

我在我的 tomcat 容器中运行 Quartz cronjob，它每分钟触发某些调度程序，如以下代码所示：

```
<bean id="cronjobTrigger" class="org.springframework.scheduling.quartz.CronTriggerBean">
  <property name="jobDetail" ref="job_detail" />
  <property name="cronExpression" value="0 */1 * * * ?" />
</bean> 
```

现在，我打算编写自己的单元测试，它需要触发这个 Cronjob，然后在 Cronjob 完成后检查一些后续输出文件。与其在单元测试中每次等待一分钟，是否可以触发在我的 Tomcat 内部运行的 Cronjob，以便测试用例不必等待调度间隔？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:50:05.797

好吧，似乎让容器在后面运行是一个更好的主意......

# java - AlarmManager 膨胀布局

> ID：16163484
> 
> 赞同：1
> 
> 时间：2013-04-23T07:31:07.793
> 
> 标签：java, android, android-intent, broadcastreceiver, alarmmanager

我的 MainActivity 中有一个 AlarmManager，用于检查网站并在某些条件为真时创建通知。

AlarmManger 在单独的类中使用挂起的意图 > 广播接收器。然后，该广播接收器类调用第三个活动，该活动执行代码以检查网站并处理结果，所有这些都在应用程序未打开时在后台进行。

问题在于，当警报事件触发时，它实际上会打开应用程序的主布局。除了在 MainActivity 中，我不会在任何地方专门创建或扩展此布局。

我认为当我的广播接收器调用新意图时会出现问题。我认为 FLAG_ACTIVITY_NEW_TASK 是导致布局打开的原因。我的清单中没有指定任何特殊的启动模式，所以我认为这不是问题。

我的问题是，有没有办法让我从广播接收器在后台启动这个意图而不触发布局来显示？我可以在清单中添加不同的标志或其他东西吗？

```
package alert.wow.onlinealert;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.widget.Toast;

public class AlarmReceiver1 extends BroadcastReceiver {

@Override
public void onReceive(final Context context, final Intent intent) {
System.out.println("Timed Signal received by AlarmReceiver");
   try {

 Intent intent1 = new Intent(context, Jrequest.class);
intent1.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    context.startActivity(intent1);       
    } catch (Exception e) {
    System.out.println(e.toString());

    } 
    }
 } 
```

这里的最终目标是让 AlarmReceiver 每小时在后台静默运行一次，然后在满足条件时发送通知，应用程序本身应该很少需要打开。

如果有帮助，我很乐意发布更多代码。

谢谢，克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:42:29.310

使用服务而不是活动，这是Mark Murphy的一个工作[示例](https://github.com/commonsguy/cw-advandroid/tree/master/SystemServices/Alarm/src/com/commonsware/android/syssvc/alarm)

希望这会有所帮助，亚龙

# jquery - 用于匹配动态加载的脚本标记的 JQuery 选择器

> ID：16163486
> 
> 赞同：0
> 
> 时间：2013-04-23T07:31:20.467
> 
> 标签：jquery, jquery-selectors, script-tag

我想匹配 Ajax 下载文档中的任何原始脚本，所以我尝试了

```
$.ajax({
    url: url,
    type: "post",
    success: function (data, status, xhr) {
        var scr = $(data).find('script[type="text/javascript"]'); 
```

调用返回成功，但选择器没有返回匹配项，即 `'script[type="text/javascript"]'`长度为 0。

正在加载的页面（即`data`）肯定包含一个测试脚本标签，如下所示：

```
 <script type="text/javascript">
        $(function () {
            alert("JS running");
        });
    </script> 
```

我在这里想念什么？是 JQuery 解析原始 HTML 的方式吗？

## 跟进：

这也不会返回任何匹配项： `var scr = data.find('script');`

**注意：查看 $(data) 的内容，JQuery 解析器似乎去除了任何 Javascript 标记。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T07:49:52.017

您需要在这里使用正则表达式。使用 Javascript `.match`。

此外，您比较的字符串`script[type="text/javascript"]`与 var: 中的字符串不同`<script type="text/javascript">`。

你应该像这样使用它：

```
matched = data.match('<script .*</script>'); 
```

它将具有匹配的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T08:37:31.490

$(htmlstring) 似乎从 HTML 中删除了任何脚本标签。这是一种耻辱。

我想出的解决方案是基于[如何让正则表达式匹配多个脚本标签的答案中的正则表达式？](https://stackoverflow.com/questions/1441463/how-to-get-regex-to-match-multiple-script-tags)

```
 var re = /<script\b[^>]*>([\s\S]*?)<\/script>/gm;
        var scripts = "";
        var match;
        while (match = re.exec(data)) {
            if (match[1] != "") {
                scripts += match[0];
            }
        }
        panel.append(scripts); 
```

我连接任何内联脚本，脚本在附加到 DOM 后立即执行。

# knockout.js - 在取消订阅时销毁 observables

> ID：16163488
> 
> 赞同：2
> 
> 时间：2013-04-23T07:31:31.423
> 
> 标签：knockout.js, knockout-2.0

我有以下情况： - 具有大量项目的应用程序。(1mil+) - 在列表中的每一项上都有一个可观察的。

如果我从应用程序初始化创建可观察对象，应用程序将冻结，因为它需要大量处理和内存。解决方案是按需创建它们，因为项目将一次部分呈现。这很容易做到。

我需要的是，在我取消绑定项目后，显示一个新批次，销毁已创建但不再使用的可观察对象。

一种解决方案是，当我切换到新批次时，遍历旧批次并销毁。这也很容易做到，但不幸的是还不够。

我的应用程序分为多个组件，每个组件可能使用或不使用主项目池中的项目。这意味着我不能只搜索之前解绑的项目并销毁可观察对象，而是必须搜索所有组件。从性能的角度来看，这并不好，也不好，因为组件不需要相互了解。

所以我的问题是。一旦没有更多订阅者，在淘汰赛中是否有任何方法（内置或不内置）来销毁可观察对象？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T01:51:20.060

[Delete 运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/delete)在这种情况下不工作吗？如果删除对象的某些属性是您想要完成的，那么使用删除运算符应该可以解决问题。

```
var viewModel = { name: ko.observable("me"),` age: "a lot" }; 
```

当您准备好删除属性时（通过事件或其他方式）

```
$('element').on('event', function() { delete viewModel.prop; }); 
```

这是假设您只想定位淘汰视图模型对象中的一个属性。

# mysql - 如何记录在数据库上运行的每个查询的查询及其执行时间？

> ID：16163489
> 
> 赞同：9
> 
> 时间：2013-04-23T07:31:32.970
> 
> 标签：mysql, sql, logging, triggers, crud

我有一个包含 250 多个表的庞大数据库。在数据库上运行不同类型的查询。由于数据库多年来一直在增长，现在我需要优化数据库和查询。我已经遵循了索引等优化概念。

我的问题是，如何记录在数据库上运行的每个查询的查询及其执行时间？所以我可以分析哪个查询需要多少秒并优化它们。

鉴于我知道 MYSQL 触发器对此非常理想，但我不知道如何为整个数据库编写触发器，以便它将每个查询记录到具有查询执行时间的表中。我希望触发器记录数据库中发生的所有 CRUD 操作。

我怎样才能完成它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-23T11:58:26.173

使用[mysql慢查询日志](http://dev.mysql.com/doc/refman/5.6/en/slow-query-log.html)。这将帮助您仅获取速度较慢的查询，而不是记录/分析所有查询。您只需将参数设置为`long_query_time`1 或 2 秒。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-08-13T18:53:42.930

你也可以设置`long_query_time = 0`，你会看到所有的 sql 查询！

# c# - 将 itextsharp 文本字段设置为只读

> ID：16163490
> 
> 赞同：1
> 
> 时间：2013-04-23T07:31:32.863
> 
> 标签：c#, itextsharp, textfield

我一直在尝试将 TextField 设置为只读但没有成功。

我试过这个：

```
 field.SetFieldProperty(key, "setfflags", PdfFormField.FF_READ_ONLY, Nothing) 
```

但它会给出这个错误：“iTextSharp.text.pdf.TextField”不包含“SetFieldProperty”的定义

这是我的代码：

```
public void addField(PdfWriter writer, string name, int x, int y, int w, int h, PdfContentByte cb, int maxSize, string text, BaseFont font, int border)
    {
        TextField field = new iTextSharp.text.pdf.TextField(writer, new iTextSharp.text.Rectangle(x, y - h, x + w, y), name);

        field.Text = text;

        writer.AddAnnotation(field.GetTextField());
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:50:38.987

该方法`SetFieldProperty`是类的方法`AcroFields`（PDF 格式），而不是类的方法`TextField`。
A`TextField`只有在属于Form的情况下才能只读，那么你可以通过调用方法将其设置为只读`SetFieldProperty`，并且知道`TextField`Form内部的key。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-03T12:49:57.667

尝试这个

```
TextField newtext = new TextField(PDFStamper.Writer,
    new iTextSharp.text.Rectangle(590, 660, 470, 690), "txtfield");
newtext.Options = TextField.READ_ONLY;
PdfFormField field = newtext.GetTextField();
PDFStamper.AddAnnotation(field, 1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T10:16:25.163

请参阅[我书中的](http://itextpdf.com/book)[TextFields](http://sourceforge.net/p/itextsharp/code/HEAD/tree/trunk/book/iTextExamplesWeb/iTextExamplesWeb/iTextInAction2Ed/Chapter08/TextFields.cs)示例。

可以在字段上设置不同的选项。这是使字段只读的方式：

```
text.Options = TextField.READ_ONLY; 
```

Scorpi0 给出的前一个答案没有错（我赞成这个答案），但它是更改*现有*表单中字段属性的解决方案。您要求更改*新创建*的表单中的属性。

# php - 如何从mysql中的表中搜索转义字符串

> ID：16163497
> 
> 赞同：0
> 
> 时间：2013-04-23T07:31:52.253
> 
> 标签：php, mysql

我的问题是在插入时我正在使用`addslashes()`函数，然后字符串被插入为`kadavath\'s`，但是在选择时我正在使用`LIKE`运算符，当时结果为空。请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T07:41:47.803

如果这是您的数据在数据库中的外观：

> 卡达瓦斯

那么你做错了什么。

为`mysql_query()`查询转义数据的正确函数是`mysql_real_escape_string()`. 正如我们在此处看到的那样，添加它会破坏您的数据，因此不需要addslashes()。

# myfaces - java.lang.NoSuchMethodException：没有这样的可访问方法：对象上的 addRenderKitClass()：org.apache.myfaces.config.impl.digester.elements.RenderKit

> ID：16163498
> 
> 赞同：1
> 
> 时间：2013-04-23T07:31:52.470
> 
> 标签：myfaces, websphere-8

在将 myfaces 1.2 应用程序部署到 websphere 8.0 时出现“java.lang.NoSuchMethodException：没有这样的可访问方法：对象上的 addRenderKitClass()：org.apache.myfaces.config.impl.digester.elements.RenderKit”异常。似乎类似于[https://www.ibm.com/developerworks/community/forums/html/topic?id=77777777-0000-0000-0000-000014782514](https://www.ibm.com/developerworks/community/forums/html/topic?id=77777777-0000-0000-0000-000014782514)。

看起来它是由从不同的 jsf 库加载的 RenderKit 和 DigesterFacesConfigUnmarshallerImpl 引起的。运行带有“详细类加载”的服务器证实了这一点：

```
me@mycomp:/opt/IBM/WebSphere/AppServer/profiles/PROF1/logs/server1# grep org.apache.myfaces.config.impl.digester.elements.RenderKit native_stderr.log 
class load: org.apache.myfaces.config.impl.digester.elements.RenderKit from: file:/opt/IBM/WebSphere/AppServer/plugins/com.ibm.ws.jsf.myfaces.jar
class load: org.apache.myfaces.config.impl.digester.elements.RenderKit from: file:/opt/IBM/WebSphere/AppServer/profiles/PROF1/installedApps/myNode03Cell/mnu-ear.ear/myapp.war/WEB-INF/lib/myfaces-impl-1.2.5.jar
class load: org.apache.myfaces.config.impl.digester.elements.RenderKit from: file:/opt/IBM/WebSphere/AppServer/profiles/PROF1/installedApps/myNode03Cell/mnu-ear.ear/myapp.war/WEB-INF/lib/myfaces-impl-1.2.5.jar
class load: org.apache.myfaces.config.impl.digester.elements.RenderKit from: file:/opt/IBM/WebSphere/AppServer/profiles/PROF1/installedApps/myNode03Cell/mnu-ear.ear/myapp.war/WEB-INF/lib/myfaces-impl-1.2.5.jar 
```

接着

```
my@mycomp:/opt/IBM/WebSphere/AppServer/profiles/PROF1/logs/server1# grep DigesterFacesConfigUnmarshallerImpl native_stderr.log 
class load: org.apache.myfaces.config.impl.digester.DigesterFacesConfigUnmarshallerImpl from: file:/opt/IBM/WebSphere/AppServer/plugins/com.ibm.ws.jsf.myfaces.jar 
```

因此 DigesterFacesConfigUnmarshallerImpl 仅从 IBM 的 jsf 加载，而 RendererKit 从所有可能的位置加载。

所以问题是如何从自定义 jsf 库中加载 DigesterFacesConfigUnmarshallerImpl。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-06-17T07:08:14.347

我刚刚遇到了同样的问题。这似乎是由于 WAR/EAR 中的某些 faces-config.xml 文件不符合服务器期望的版本（从 WAS 8 开始为 2.0）引起的。

在我们的场景中，这应该不是问题，因为我们将我们自己的 JSF 版本与 WAR 捆绑在一起，并将 EAR 和该 EAR 中包含的 WAR 的类加载器策略首先设置为本地类加载器，并且捆绑的 JSF 版本是 1.2 . 但是，从 faces-config.xml 文件的标题中删除所有版本和 DTD 信息为我们解决了这个问题。

# ruby-on-rails-3.1 - 升级到 rails 3.1.12 后出现错误

> ID：16163499
> 
> 赞同：1
> 
> 时间：2013-04-23T07:31:53.320
> 
> 标签：ruby-on-rails-3.1

我刚刚从 rails 3.1.11 升级到 3.1.12。我正在使用红宝石 1.9.3。**使用rails s**启动服务器后，出现以下错误

```
=> Booting WEBrick
=> Rails 3.1.12 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
Uncaught exception: No such middleware to insert after: "ActionDispatch::ShowExceptions" 
```

我的宝石文件在下面

```
source 'http://rubygems.org'
gem 'rails', '~> 3.1.12'
gem 'rake'
gem 'rack'
gem "haml"
gem "haml-rails"
gem 'mysql2'
gem 'airbrake'
gem 'newrelic_rpm' 
```

问题在于 newrelic_rpm 和 airbrake gem。如果两者都被删除，则应用程序可以工作。使用 newrelic_rpm 我们会得到这个错误。

```
Uncaught exception: undefined local variable or method `establish_connection' for ActiveRecord::Base:Class 
```

使用airbrake我们得到这个错误

```
Uncaught exception: No such middleware to insert after: "ActionDispatch::ShowExceptions" 
```

# regex - 正则表达式替换所有捕获出现

> ID：16163503
> 
> 赞同：2
> 
> 时间：2013-04-23T07:31:59.923
> 
> 标签：regex, iis, url-rewriting

我正在使用正则表达式来重写一些 URL。我需要用 & 替换 URL 中的所有 & 符号 但不是当 & 号已经开始一个 & 发生。所以我最终得到了这个：

```
search: (^[^&]*?)&((?!amp;)[^W]*?.htm)
replace: $1&amp;$2 
```

哪个转变了：

```
 Bob_&_Carol.htm 
```

进入：

```
 Bob_&amp;_Carol.htm 
```

但这仅适用于第一个＆符号，并且在多个＆符号上失败，仅转换第一次出现。

```
 Bob_&_Carol_&_Alice.htm 
```

进入：

```
 Bob_&amp;_Carol_&_Alice.htm 
```

所以我修改了匹配表达式以找到多个＆符号：

```
 ^(?:([^&]*?)&(?!amp;))*([^W]*?.htm) 
```

但我不知道如何编写替换字符串来处理多个捕获。如何编写替换字符串来替换所有捕获？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:53:36.593

您需要将以下正则表达式与捕获组匹配

```
^(.*?)&(?!amp;)(.*)$ 
```

并使用以下字符串进行替换：

```
/$1&amp;$2 
```

整体重写规则可能如下所示：

```
RewriteRule ^(.*?)&(?!amp;)(.*)$ /$1&amp;$2 [L] 
```

# sql - 在 sql 中将密码 varchar() 转换为二进制数据类型

> ID：16163504
> 
> 赞同：0
> 
> 时间：2013-04-23T07:32:03.610
> 
> 标签：sql, sql-server, casting, binary

我想从**表 1**到**表 2**中获取密码。所以我必须转换。

**表格1：**

*   密码(varchar)

**表 2：**

*   密码（二进制）

    我在这里记录将 varchar 转换为二进制。我尝试以下查询，

    ```
     IsNull(''''+cast(wl.password as binary)+'''', 'NULL')+')' 
    ```

但没有用。它显示错误，例如，

```
The data types varchar and binary are incompatible in the add operator. 
```

给我一些建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:58:03.440

在连接字符串之前不要将其转换为二进制，而是在字符串内，因此在执行动态查询时它会被转换。

就像是：

```
ISNULL('cast(''' +wl.password+ ''' as binary)','NULL') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:38:10.857

尝试`convert`在 sql 中使用函数。

例如。

```
convert(varchar, ' + @password + ') 
```

参考：

[SQL server + 动态查询 + '数据类型 nvarchar 和 bit 在 add 运算符中不兼容。'](https://stackoverflow.com/questions/8455309/sql-server-dynamic-query-the-data-types-nvarchar-and-bit-are-incompatible-i)

希望它有帮助。

# javascript - 使用 javascript 启用和禁用复选框

> ID：16163507
> 
> 赞同：3
> 
> 时间：2013-04-23T07:32:12.410
> 
> 标签：javascript, forms

几个小时以来，我一直在试图找出解决问题的方法。我对 Javascript 还是很陌生，所以如果我听起来很愚蠢，请原谅我。遗憾的是我不知道 jQuery，我开始认为它阻碍了我想出一个解决方案。

我想要做的是有一个启用禁用单选按钮的复选框。如果这是有道理的。

例子：

*   选择 1
*   子选择
*   子选择
*   子选择

**我希望能够单击第一个复选框（选择 1）以启用子选择。如果未单击，则应禁用子选项。:-)**

这是我到目前为止所得到的：

```
<script>
function enableRadios(x) {
    var formElement = eval("checkbox" + x)
    if (formElement[0].disabled) {
        formElement[0].disabled = false
        formElement[1].disabled = false
    } else {
        formElement[0].disabled = true
        formElement[1].disabled = true
    }
 }</script>

<body><input type="checkbox" name="main" value="main" onClick="enableRadios(x)">
<input disabled type="radio" value="1" name="x">
<input disabled type="radio" value="2" name="x">
<input disabled type="radio" value="3" name="x">
<input disabled type="radio" value="4" name="x">
<input disabled type="radio" value="5" name="x">
<input disabled type="radio" value="6" name="x"></body> 
```

我真的很感谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T07:41:35.290

您需要传递包含电台名称的字符串`'x'`，而不是传递变量`x`：

```
<script>
function toggleRadios(name) {
    var elems = document.getElementsByName(name);
    for(i=0; i<elems.length; i++) {
        elems[i].disabled = !elems[i].disabled;
    }
}
</script>

<input type="checkbox" name="main" value="main" onclick="toggleRadios('x')">
<input disabled type="radio" value="1" name="x">
<input disabled type="radio" value="2" name="x">
<input disabled type="radio" value="3" name="x">
<input disabled type="radio" value="4" name="x">
<input disabled type="radio" value="5" name="x">
<input disabled type="radio" value="6" name="x"> 
```

[http://jsfiddle.net/samliew/B6tF7/](http://jsfiddle.net/samliew/B6tF7/)

# c++ - 将 char* 复制到指定 pos 处的 std::string 不分配新对象

> ID：16163508
> 
> 赞同：1
> 
> 时间：2013-04-23T07:32:13.837
> 
> 标签：c++, string

让我通过代码问我的问题：

```
char* apples = "apples";
std::string str("I like .....");
// need to copy apples to str to have "I like apples", without creating new objects 
```

有[分配](http://www.cplusplus.com/reference/string/string/assign/)功能，但不幸的是似乎无法提供`std::string offset`。

我不想分配新对象，因为这是低延迟并且经常是代码的一部分。

**upd**错误地我在上面放了 5 个点，但我的意思是 6 个点完全适合“苹果”:) 当然，如果字符串容量不够，必须创建一些对象。在我的问题中，我假设字符串容量就足够了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T07:34:24.510

您可以使用`std::copy`算法[http://www.cplusplus.com/reference/algorithm/copy/](http://www.cplusplus.com/reference/algorithm/copy/)

`std::copy(apples, apples + sz, str.begin() + offset);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T07:34:40.800

即使 assign 会复制你传递给它的任何内容。你将无法做你想做的事。字符串包含指向内存中**连续字符块的指针。**你不能只是把任意的东西粘到它上面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T07:41:30.217

为什么不使用[`std::string::replace`](http://www.cplusplus.com/reference/string/string/replace/)？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T07:44:53.087

使用`std::copy()`算法的答案是最好的 AFAIK。你也可以使用普通的旧 C（你明白，它实际上不是 C，*C 风格*会是一个更好的名字）来实现同样的事情：

```
char* apples = "apples";
std::string str("I like .....");

char * ptr = apples;
while( *ptr != 0 ) {
    str.push_back( *ptr );
    ++ptr;
} 
```

如您所见，这里没有创建临时对象，但是……这是否意味着该过程中没有分配？他们确实是。

A`std::string`基本上是一个字符向量。该字符串有一个`capacity()`方法，该方法返回可以附加多少额外字符而不触发另一个分配（这可能涉及重新分配，从而复制整个向量）。为了避免分配，您可以做的最好的事情是确保字符串有足够的空间来插入所有字符。

```
char* apples = "apples";
std::string str("I like .....");

str.reserve( str.length() + strlen( apples ) );

char * ptr = apples;
while( *ptr != 0 ) {
    str.push_back( *ptr );
    ++ptr;
} 
```

这样您就可以确保只有在`std::string`: 触发的那个中才会有一个分配`reserve()`。

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T08:28:13.790

```
 char * apples = "apples";
string something = "I like ....";
    for (int i = 0; i < something.length() - 1; i++)
    {
        if (something.find('.'))
            something.pop_back();
    }
    something.resize(something.length() + 1);
    for (int i = 0; i < strlen(apples); i++)
        something.push_back(apples[i]);
cout << something <<endl; 
```

# javascript - 单击多个元素以隐藏或显示某些内容 - jquery

> ID：16163509
> 
> 赞同：0
> 
> 时间：2013-04-23T07:32:14.723
> 
> 标签：javascript, function, hide, bind, show

这是我的脚本。现在我可以单击这些 ID 之一，并且可以看到类“输入”。我想要的是我必须点击所有元素。

```
$('#zwei,#sechs,#neun').bind('click', function() {
    if( $(this).is(':checked')) {
        $('.inputs').show();
    } else {
        $('.inputs').hide();
    }
}); 
```

JSFiddle：http: [//jsfiddle.net/CLYC6/20/](http://jsfiddle.net/CLYC6/20/)

你能帮我吗？怎么了？

FK

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:36:24.783

用这个：

```
$('#zwei,#sechs,#neun').bind('click', function() {
    $('.inputs').show();
    $('#zwei,#sechs,#neun').each(function (e) {
        if (!$(this).is(':checked')) {
            $('.inputs').hide();
            return;
        }
    });
}); 
```

这是一个[**现场演示**](http://jsfiddle.net/mgechev/CLYC6/22/)。

因为@Rastko 对当前的解决方案不满意，这里还有一个：

```
$('#zwei,#sechs,#neun').bind('click', function() {
    var showInput = true;
    $('#zwei,#sechs,#neun').each(function (e) {
        if (!$(this).is(':checked')) {
            showInput = false;
            return;
        }
    });
    if (showInput) {
        $('.inputs').show();
    } else {
        $('.inputs').hide();
    }
}); 
```

还有一个[**现场演示**](http://jsfiddle.net/mgechev/CLYC6/24/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:37:31.883

if 语句应该检查是否所有三个都被检查，以及输入是否不可见。

所以：

```
if($('#zvei').is(':checked') && $('#neun').is(':checked') && $('#sechs').is(':checked') {
      $('.inputs').show();
  } 
```

# c++ - C++ 将格式化的代码复制到单词（如 Visual Assist）

> ID：16163518
> 
> 赞同：0
> 
> 时间：2013-04-23T07:32:40.257
> 
> 标签：c++, visual-studio-2010, ms-word, copy-paste, visual-assist

我浏览过但找不到答案..我试图从我的编辑器中复制代码以看起来像 VA 着色，但它只复制像 VS 着色..（另一个很好的选择是以某种方式做到这一点StackOverflow 格式，但我也找不到如何做到这一点）我发现： http: [//www.wholetomato.com/products/features/rtf.asp](http://www.wholetomato.com/products/features/rtf.asp)

但它没有显示它在哪里，我也找不到它（VS 2010）。有谁知道该怎么做？或者有没有人知道如何将格式化的代码复制到单词？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:49:00.097

如果您的最终目标是制作最终的 pdf，您可以将文本文件转换为 pdf 并将您的代码 pdf 合并为您的 word pdf。您可以尝试使用 notepad++ 为您的代码添加默认颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:42:07.667

对不起，可是，

> **微软视觉工作室**
> 
> 将 HTML 复制到剪贴板是 Microsoft Visual Studio 的内置功能，Visual Assist X**不会增强该功能**。剪贴板仅包含 IDE 的**默认**颜色。增强的语法颜色不会放在剪贴板中。

您所说的功能仅在 Visual C++ 6.0 中可用。

VC++ 6.0 没有嵌入复制格式化代码的能力，所以他们在他们的插件中自己实现了这个功能。

* * *

如果您只想拥有 VAssistX 彩色 pdf，您可以尝试使用任何 pdf 打印机（例如 PDFCreator）在 Visual Studio 中打印文档，然后您可以将其导入 Word（至少在 LibreOffice Writer 中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T07:42:41.857

您链接到的页面的引用：

Microsoft Visual Studio
将 HTML 复制到剪贴板是 Microsoft Visual Studio 的内置功能，Visual Assist X 不会增强该功能。剪贴板**仅包含 IDE 的默认颜色**。增强的语法颜色不会放在剪贴板中。

因此，您想要的似乎无法完成。

# c# - 如何为我的 Web 应用程序的 url 重写编写重写规则

> ID：16163519
> 
> 赞同：0
> 
> 时间：2013-04-23T07:32:40.870
> 
> 标签：c#, asp.net, url-rewriting

我有我的网址，例如 MyTravel/Tour/Inner.aspx?Pid=2&Cid=8 Goa/New-Goa/)

这里 Pid 和 cid 来自主页菜单，根据菜单选择可以不同。（我的菜单是从数据库创建的）

和一些链接生成像 MyTravel/Tour/displaypackage.aspx?Pid=32&Cid=18&deptf=ND

我将它重写为 MyTravel/Tour/Goa/new-goa/ 这里 goa 和 new-goa 是根据 pid 和 cid 保存在我的数据库表中的。

我使用 urlrewriter.net(Intelligencia.UrlRewriter.RewriterHttpModule, Intelligencia.UrlRewriter) 进行 Url 重写

请告诉我如何编写重写规则以匹配配置文件中的这些类型的 url。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T09:17:55.103

我认为你在 inner 周围的 () 括号会混淆这个问题，所以你实际上已经指定了 4 个参数......

为了：

```
MyTravel/Tour/displaypackage.aspx?Pid=32&Cid=18&deptf=ND 
```

尝试类似：

```
<rewrite url="~/MyTravel/Tour/displaypackage\.aspx\?Pid=([0-9]+)&amp;Cid=([0-9]+)&amp;deptf=([a-zA-Z]+)" to="~/MyTravel/Tour/$1/$2/$3" /> 
```

# c - 获取和设置路径

> ID：16163521
> 
> 赞同：-1
> 
> 时间：2013-04-23T07:32:51.193
> 
> 标签：c, shell, path, get, set

我一直在完成编写一个简单外壳的任务，我已经设法获得了一些非常基本的功能，但是对于其中一个阶段，它要求我获取和设置环境。这是任务的详细信息。

第 4 阶段：获取和设置路径 – 10 分

保留原路径

这是必要的原因是因为我们希望将路径恢复到最初退出 shell 时的路径。这一点很重要，因为您对 shell 环境（即上面的 setenv() 函数）所做的任何更改，不仅会影响 shell 本身，还会影响之后将从同一终端执行的任何其他程序。出于这个原因，最好将事情恢复到退出时的状态。

单个字符串足以保留原始路径。

保存路径应该是你的 shell 在启动时做的第一件事。

打印和更改路径 - 内置命令

在 C 程序中，我们可以使用 getenv() 函数访问环境，也可以使用 setenv() 函数更改环境。如果您查看 setenv() 的手册页，您会发现它是如何工作的（即需要的参数和返回值）以及使用它需要包含的内容。

getpath – 打印系统路径 & setpath – 设置系统路径

这两个命令是关于环境参数 PATH 的。第一个只是获取并打印它的值，而第二个将路径（冒号分隔的目录列表的字符串）作为参数并使其成为 PATH 的值。为此，您可以分别 getenv() 和 setenv()。

恢复路径

您只需将 PATH 环境参数更改为其原始值（即您在 shell 启动时保存的那个）。

恢复路径应该是您的 shell 在退出之前所做的最后一件事。

第 4 阶段：测试

首先，确保您为第 3 阶段执行的所有测试仍然有效。不过要小心，因为我们现在正在更改路径，这将影响外部程序的执行。

要检查附加功能，您应该首先检查路径的保存和恢复是否有效。这里的一个好主意是在您在 shell 执行开始时保存路径时打印路径，然后在最后退出时再次打印。在这两种情况下，打印的路径应该完全相同！

之后，您应该检查调用 getpath 时是否打印当前路径，该路径应该与原始路径相同。

然后你应该专注于测试 setpath。首先，将路径设置为新值并测试 getpath 打印它，然后尝试查看更改路径如何真正影响外部命令的执行（例如，将路径设置为仅 '.' 并尝试 'ls' 或尝试壳本身等）。

这是我的代码：

```
/* S.NO:201148541 Simple Shell Example
Completed upto Stage 3 */
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <string.h>
#include <errno.h>
#include <sys/types.h>
#define BUFFER_SIZE 1<<16
#define ARR_SIZE 1<<16

void parse_args(char *buffer, char** args, 
                size_t args_size, size_t *nargs)
{
    char *buf_args[args_size]; 
    char **cp;
    char *wbuf;
    size_t i, j;

    wbuf=buffer;
    buf_args[0]=buffer; 
    args[0] =buffer;

    for(cp=buf_args; (*cp=strsep(&wbuf, " \n\t")) != NULL ;){
        if ((*cp != '\0') && (++cp >= &buf_args[args_size]))
            break;
    }

    for (j=i=0; buf_args[i]!=NULL; i++){
        if(strlen(buf_args[i])>0)
            args[j++]=buf_args[i];
    }

    *nargs=j;
    args[j]=NULL;
}

int main(int argc, char *argv[], char *envp[]){
    char buffer[BUFFER_SIZE];
    char *args[ARR_SIZE];
    int *ret_status;
    size_t nargs;
    pid_t pid;

    char curDir[100];

    while(1){
        getcwd(curDir, 100);
        printf("%s->", curDir);
        fgets(buffer, BUFFER_SIZE, stdin);
        parse_args(buffer, args, ARR_SIZE, &nargs); 

        if (nargs==0) continue;
         if(strcmp(args[0], "cd") == 0){
            chdir(args[1]);

        }
        else if (!strcmp(args[0], "exit" )) exit(0);       
        pid = fork();
        if (pid){
            pid = wait(ret_status);
            printf("finished\n", pid);
        }
         else {

            if( execvp(args[0], args)) {
                puts(strerror(errno));
                exit(127);
            }
        }
        }
    }

    return 0;
} 
```

我真的很茫然，任何指导都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:34:15.530

鉴于我们不知道您之前的步骤是什么，并且按照建议进行

> 然后你应该专注于测试 setpath。首先，将路径设置为新值并测试 getpath 打印它，然后尝试查看更改路径如何真正影响外部命令的执行（例如，将路径设置为仅 '.' 并尝试 'ls' 或尝试壳本身等）。

你可以这样做...

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main()
{
    char *path, *old, *tobeSet;
    path = malloc(1024);
    path = getenv("PATH");
    old = malloc(strlen(path));
    tobeSet = malloc(10); // just to be safe
    strcpy(tobeSet,".");
    if(setenv("PATH",tobeSet,1)!=0)
    {
        printf("Couldn't set path\n");
        return 0;
    }
    printf("\nPATH::\t%s\n",path);
    printf("\n\nNewPath::\t%s\n",tobeSet);
    if(setenv("PATH",path,1)!=0)
    {
        printf("Couldn't restore path\n");
        return 0;
    }
    printf("\n\nOld path ::\t%s\n",path);
    free(path);
    free(old);
    free(tobeSet);
    return 0;
} 
```

# java - Eclipse 缺少导入（javax.media.* 和 com.sun.media.*）

> ID：16163524
> 
> 赞同：6
> 
> 时间：2013-04-23T07:33:01.900
> 
> 标签：java, eclipse, jmf, javax.imageio

我有这个需要调试的旧 Java 小程序，但我在导入时遇到了一些问题。

```
The import javax.media.* cannot be resolved.
The import com.sun.media.* cannot be resolved 
```

经过一些研究，我尝试将这个外部库添加到项目中 - 没有成功。

1.  sun-jai_codec.jar 来自[http://www.java2s.com/Code/Jar/s/Downloadsunjaicodecjar.htm](http://www.java2s.com/Code/Jar/s/Downloadsunjaicodecjar.htm)

2.  安装了 JMF2.1.1e 并添加了 jmf.jar。

我没有运气......所以我向某人寻求一点帮助！

![在此处输入图像描述](https://i.stack.imgur.com/eAsug.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T07:44:27.977

只需再次构建项目的路径。右键单击项目然后选择构建路径--->配置构建路径--->java构建路径---->库

选择所有 jars，然后删除然后添加所有 jars，包括项目的 jars。

然后单击确定。然后去订购和出口并单击所有选项。然后单击确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T11:37:29.577

Sheez ..这很愚蠢。

这个旧的类/jar文件是一个很大的混乱。原来我选错了...

在这里找到它们（答案中的链接）：

[我在哪里可以下载 Jai 和 Jai-imageio？](https://stackoverflow.com/questions/7502181/where-can-i-download-jai-and-jai-imageio)

# php - 调用未定义的函数 dl()

> ID：16163525
> 
> 赞同：4
> 
> 时间：2013-04-23T07:33:03.240
> 
> 标签：php

我正在使用 PHTML 编码器对我的 php 文件进行编码，但是当我运行编码文件时它给出错误“调用未定义的函数 dl()”。有人请帮忙。

```
<?php
    if(!function_exists("phtmldec")){
        $w=(substr(PHP_OS,0,3)=="WIN")?1:0;$ln="phtmlenc".phpversion();$cd=dirname(__FILE__);

        if($w){
            $ln=$ln.".dll";if($cd[1]==":") $cd=substr($cd,2);
        } else {
            $ln=$ln.".so";if(strlen($cd)<3) $cd=getcwd();
        }

        if(version_compare(phpversion(),"5.2.5")==-1){
            $cd1=ini_get('extension_dir');
            $cd2=PHP_EXTENSION_DIR;

            if($cd[strlen($cd)-1]!="/")$cd=$cd."/";

            if($cd1[strlen($cd1)-1]!="/")$cd1=$cd1."/";

            if($cd2[strlen($cd2)-1]!="/")$cd2=$cd2."/";

            if($cd1[1]==":") $cd1=substr($cd1,2);

            if($cd2[1]==":") $cd2=substr($cd2,2);

            $ic=substr_count($cd,"\\")+substr_count($cd,"/");
            $ic1=substr_count($cd1,"\\")+substr_count($cd1,"/");
            $ic2=substr_count($cd2,"\\")+substr_count($cd2,"/");
            $en=str_repeat("../",max($ic,$ic1,$ic2))."..".$cd.$ln;
        } else {
            $en=$ln;$r=dl($en);if(!$r)exit("Unable to load $en");
        }

        $p="F4\$A016YC2@Y(8Q[Y!2F3[@K2.0>K0Z%5^#2\\,&;5L7\$<KHL)BH<`";
        phtmldec($p);
    }
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T07:55:45.977

正如@k102 提到`dl()`的，自 5.3 起默认禁用：

如 php 文档中所述：http: [//php.net/manual/en/function.dl.php](http://php.net/manual/en/function.dl.php)

```
 5.3.0   dl() is now disabled in some SAPIs due to stability issues.
The only SAPIs that allow dl() are CLI and Embed. Use the Extension Loading Directives instead. 
```

正如那里所建议的那样，请改用扩展加载指令： [http ://www.php.net/manual/en/ini.core.php#ini.extension](http://www.php.net/manual/en/ini.core.php#ini.extension)

* * *

基本上你唯一的选择是：

1.  在 php.ini 上加载正确配置它的扩展
2.  使用文档中提到的仍支持的上述 SAPI 之一`dl()`：（CLI、CGI 和嵌入）
3.  如果您确实需要动态加载它，请降级您的 php 版本

# wcf - 负载平衡服务器中的 WCF 回调

> ID：16163526
> 
> 赞同：2
> 
> 时间：2013-04-23T07:33:05.840
> 
> 标签：wcf, wcf-callbacks

我有一个使用 WCF 回调合同开发的聊天应用程序。这使用 netTcp 绑定进行客户端服务器通信。

客户端是一个 Windows 窗体应用程序，将在客户端机器（XP 或 Windows8 机器）上运行

这个 WCF 服务作为 Windows 服务托管在服务器机器中。我在服务中维护一个客户端会话列表，这将存储有关连接到服务器的每个客户端的详细信息，这个列表是静态变量。

工作流程是，每当客户端使用连接操作连接到服务器时，客户端详细信息将被添加到客户端会话列表中，服务器将使用此会话列表在需要时将消息发送回客户端。

在单服务器环境中一切正常，现在我想知道如何在负载平衡场景中处理这个问题，这意味着我有两台服务器机器，一次一台服务器将处于活动状态。如果服务器 1 发生故障，服务器 2将是活跃的。在这种情况下，如何管理我的客户端会话在两台服务器之间共享并照常工作而不打扰我的客户端？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T08:52:55.413

一种选择是使用会话状态存储提供程序，它将为服务器服务的两个实例提供会话状态。

正如 MSDN 所述：http: [//msdn.microsoft.com/en-us/library/z414bbk9 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/z414bbk9(v=vs.100).aspx)

> 对于 Web 场配置，可以使用 ASP.NET 状态服务或 Microsoft SQL Server 数据库将其存储在进程外。

ASP.NET 状态服务有很好的文档[http://msdn.microsoft.com/en-us/library/ms178581(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms178581(v=vs.100).aspx)

至于数据库解决方案……嗯……您必须分析由于数据库访问而增加的开销。

此外，如果您使用 IIS 托管服务，您可以考虑使用进程外会话状态 ( [http://technet.microsoft.com/en-us/library/cc754032%28v=ws.10%29.aspx](http://technet.microsoft.com/en-us/library/cc754032%28v=ws.10%29.aspx)）。

这些只是一些想法。您可以查看可用于 Microsoft 技术的其他 Web 场同步技术。

# python - 检查两个列表中的值是否相同

> ID：16163546
> 
> 赞同：1
> 
> 时间：2013-04-23T07:34:03.127
> 
> 标签：python, list

我有 2 个清单之一：

`[(12,23),(12,45),(12,23),(2,5),(1,2),(2,4),(7,34)]`最多有 1000 个元素和另一个：

`[(12,23),(12,45),(12,23),(2,5),(1,2),(2,66),(34,7)]`最多有 241 个元素。

我想要检查列表是否包含任何相同的元素，然后将它们放入新列表中。

所以新列表变成

`[(12,23),(12,45),(12,23),(2,5),(1,2)]`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-23T07:35:45.537

这不包括重复项

```
>>> A = [(12,23),(12,45),(12,23),(2,5),(1,2),(2,4),(7,34)]
>>> B = [(12,23),(12,45),(12,23),(2,5),(1,2),(2,66),(34,7)]
>>> set(B).intersection(A) # note: making the smaller list to a set is faster
set([(12, 45), (1, 2), (12, 23), (2, 5)]) 
```

或者

```
>>> A = [(12,23),(12,45),(12,23),(2,5),(1,2),(2,4),(7,34)]
>>> B = [(12,23),(12,45),(12,23),(2,5),(1,2),(2,66),(34,7)]
>>> filter(set(B).__contains__, A)
[(12, 23), (12, 45), (12, 23), (2, 5), (1, 2)] 
```

`B`如果它出现在 中，这将返回中的每个项目`A`，这会产生您在示例中给出的结果，但这`set`可能*是*您想要的。

由于我不确切知道您将其用于什么，我将建议另一种解决方案，该解决方案返回一个列表，其中包含两个列表中出现的项目，它们在任一列表中出现的**最少**次数（无序）。**这与上面的设置解决方案不同，后者只返回每个项目在另一个**项目中出现的次数，而不关心它在第一个项目中出现的次数。这[`Counter`](http://docs.python.org/2/library/collections.html#counter-objects)用于多重集的交集。

```
>>> from collections import Counter
>>> A = [(12,23),(12,45),(12,23),(2,5),(1,2),(2,4),(7,34)]
>>> B = [(12,23),(12,45),(12,23),(2,5),(1,2),(2,66),(34,7)]
>>> list((Counter(A) & Counter(B)).elements())
[(1, 2), (12, 45), (12, 23), (12, 23), (2, 5)] 
```

# iphone - iphone - 单击单元格时进入注释

> ID：16163547
> 
> 赞同：0
> 
> 时间：2013-04-23T07:34:09.013
> 
> 标签：iphone, uitableview, mkmapview

在我的 mapview 项目中，我已将自定义注释的 NSMutableArray 传递给表视图。在 tha mapview .m 代码中：

```
MyLocation *nota =[[MyLocation alloc] initWithName:name time:horario];        

            [_mapView addAnnotation:nota];   //add location to map

            [mapViewAnnotations addObject:nota];  //copy "nota" to the new array...

    }
    TablaViewController  *tablaController =[[TablaViewController alloc]initWithNibName:@"TablaViewController" bundle:nil];
    tablaController.locationFromMap = mapViewAnnotations;    //... then I pass array to table 
```

在表视图中：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.navigationItem.title = @"Locations";

    listOfItems = [[NSMutableArray alloc] init];

    for (int i = 0; i < [locationFromMap count]; i++){

        MyLocation *location = [locationFromMap objectAtIndex:i];
        //Add items
        [listOfItems addObject:location.name];
        NSLog(@" list count : %d",[listOfItems count]);
    }

} 
```

其中 locationFromMap 是一个自定义位置的 NSmtable 数组，具有一些属性，如名称、子名等。

使用 ：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    NSString *cellValue = [listOfItems objectAtIndex:indexPath.row];
    cell.textLabel.text  = cellValue;
    return cell;
} 
```

位置“名称”正确显示在表中。我的问题是，当点击相关行时，如何才能回到地图上，重点关注具体位置。Perarps 我的方法不对？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:58:29.313

所以：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    MyLocation *loc = [locationFromMap objectAtIndex:indexPath.row];
    MKCoordinateRegion r = MKCoordinateRegionMake(loc.coordinate, MKCoordinateSpanMake(0.005, 0.005));
    [self.mapView setRegion:r animated:YES];
} 
```

（内联输入，但类似这样）

# extjs - 网格编辑器渲染器

> ID：16163548
> 
> 赞同：2
> 
> 时间：2013-04-23T07:34:09.393
> 
> 标签：extjs, editor, render

我面临的问题是允许行编辑的网格。

我的网格中的数据来自数据库，我根据需要呈现数据，例如将日期更改为 dmy 格式，因为我收到的日期是 UTC 格式。

有人可以帮我弄清楚如何**在编辑时维护此渲染，**因为在编辑时它会再次更改为 UTC 格式。

# java - Class.getSimpleName NPE with GIN, GWT 2.5

> ID：16163557
> 
> 赞同：0
> 
> 时间：2013-04-23T07:34:38.563
> 
> 标签：java, gwt, gwt-gin

I read somewhere that GWT 2.5 now allows Class.getSimpleName.

I am using GWT 2.5, GXT 3.x.

This gave me GIN injector NPE:

```
GWT.log(this.getClass().getSimpleName() + commentString); 
```

Is getting the error due to

*   The gin.jar version I am using may not be up-to-par with GWT 2.5
*   GIN does not support all features of GWT 2.5;
*   I have read wrongly, GWT does not yet support Class.getSimpleName.
*   Some other reason
    ??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:46:36.807

Yes..I too read the same and in a blind room some days.But the fact is the **commit is still pending**

@Daniel Kurka recently `abonded` the code [https://gwt-review.googlesource.com/#/c/2220/](https://gwt-review.googlesource.com/#/c/2220/)

if you want you can super source from here

[https://gwt-review.googlesource.com/#/c/2220/4/user/super/com/google/gwt/emul/java/lang/Class.java](https://gwt-review.googlesource.com/#/c/2220/4/user/super/com/google/gwt/emul/java/lang/Class.java)

or

as @Andrea commented we have to wait for sdk 2.6 :)

# php - 使用 JQuery 更改图像

> ID：16163562
> 
> 赞同：1
> 
> 时间：2013-04-23T07:34:54.517
> 
> 标签：php, jquery, image, toggle

我有一张桌子，每隔一行都被隐藏起来。当我单击图像时，它将显示隐藏的行并隐藏所有其他行。我可以显示和隐藏行，但由于某种原因，图像不会翻转。

```
<script type="text/javascript">
function toggleByID(id) {
     $('.data-row-hidden').each(function(index) {
          if ($(this).attr("id") == "row"+id) {
               $(this).toggle(500);
               $('#img'+id).attr("src", "images/toggle_expand.png");
          }
          else {
               $(this).hide();
               $('#img'+id).attr("src", "images/toggle_collapse.png");
          }
     });
}
</script> 
```

这是我用于隐藏行的代码：

```
<tr id="<?='row'.$value['property_id']?>" class="data-row-hidden"> 
```

这是我用来调用该函数的代码：

```
<img id="<?='img'.$value['property_id']?>" src="images/toggle_collapse.png" border="0" height="20" width="20" onclick="javascript:toggleByID(<?=$value['property_id']?>)"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T07:41:26.897

尝试这个，

```
<script type="text/javascript">
function toggleByID(id) {
     $('.data-row-hidden').each(function(index) {
          var newImage = new Image();
          if ($(this).attr("id") == "row"+id) {
               $(this).toggle(500);
               newImage.src = "images/toggle_expand.png";
          }
          else {
               $(this).hide();
               newImage.src = "images/toggle_collapse.png";
          }
          //cache busting 
          newImage.src = newImage.src + "&_=" + new Date().getTime();
          $('#img'+id).attr("src", newImage.src);
     });
}
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T07:43:20.983

将您的 else 条件更改为

```
 else {
           $(this).hide();
           $('#img'+id).show();
           $('#img'+id).attr("src", "images/toggle_collapse.png");
      } 
```

# perl - Perl Proc模块运行方法让程序挂起不返回为什么？

> ID：16163563
> 
> 赞同：0
> 
> 时间：2013-04-23T07:34:54.813
> 
> 标签：perl, file, process, locking

PERL PROC 模块运行功能永远不会退出 - 它继续无限运行

```
#!/usr/bin/perl -w
use Proc::PID::File;

my %g_args = ( name => "temp", verify => 1, dir => "/home/username/");
print "Hello , world";
print Proc::PID::File->running(%g_args);
exit(0); 
```

即使在 CTRL + C 上，它也不会被杀死。

它甚至没有抛出任何异常——我哪里错了。

我是 PERL 语言的初学者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T17:54:54.150

NFS 挂载磁盘上的文件锁定是有问题的，即使在最好的情况下也是如此。[Proc::PID::File](https://metacpan.org/module/Proc%3a%3aPID%3a%3aFile)似乎设计用于在本地文件系统上运行（至少我对代码的细读并不表明它正在采取处理远程系统所需的特别注意）。不幸的是，挂在 NFS 问题上是一些 NFS 相关问题的典型。您将无法轻松终止该进程。

是否有某些原因需要使用主目录？如果您只需要对在单台机器上运行的作业进行同步，`/tmp`就足够了。如果您需要跨多台机器进行同步，那么您应该考虑已知更 NFS 安全的模块，或者使用客户端服务器模型并完全避免使用文件系统。[CPAN](https://search.cpan.org)充满了解决方案。

# android - 如何在 center-android 使用固定标记在拖动地图上搜索位置

> ID：16163564
> 
> 赞同：0
> 
> 时间：2013-04-23T07:34:56.470
> 
> 标签：android, google-maps-markers, drag, android-maps

我正在做**android 地图**应用程序，我需要在中心使用固定标记拖动地图。

下面是我的代码。它运行良好。添加了我需要对其进行搜索功能。即*当我在顶部编辑框上键入地址时，该位置应位于固定定位标记下*。

我怎么能这样做？

我的代码：

```
public class MapDragActivity extends MapActivity implements LocationListener{
    String pinadd="";
    private MapView map=null;
    private LocationManager locationManager;
    GeoPoint myLocation;

    /** Called when the activity is first created. */

    @SuppressWarnings("static-access")
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.maplayout);

        map=(MapView)findViewById(R.id.map);
        map.setBuiltInZoomControls(true);

        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        Location location = locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);

        if (location != null)
            plotLocation(location);
        else
            locationManager.requestLocationUpdates(
                    locationManager.NETWORK_PROVIDER, 500L, 250.0f, this);

    }

    public void onLocationChanged(Location location) {
        // TODO Auto-generated method stub
        if (location != null)
            plotLocation(location);
    }

    public void onProviderDisabled(String provider) {
    }

    public void onProviderEnabled(String provider) {
    }

    public void onStatusChanged(String provider, int status, Bundle extras) {
    }

    @SuppressWarnings("static-access")
    @Override
    public void onResume() {
            super.onResume();
            locationManager.requestLocationUpdates(
                    locationManager.NETWORK_PROVIDER, 1000L, 500.0f, this);
   } 

    @Override
    public void onPause() {
            super.onPause();
            locationManager.removeUpdates(this);
    }

    @Override
    public void onDestroy(){
        locationManager.removeUpdates(this);
        super.onDestroy();
    }

    @Override
    public boolean dispatchTouchEvent(MotionEvent event){
        boolean result = super.dispatchTouchEvent(event);
        if (event.getAction() == MotionEvent.ACTION_UP){
                    Projection projection = map.getProjection();
                    int y = map.getHeight() / 2;
                    int x = map.getWidth() / 2;

                    GeoPoint geoPoint = projection.fromPixels(x, y);
                    Log.v("Latitude & Logitude", geoPoint.getLatitudeE6() +"//"+geoPoint.getLongitudeE6());
        }
        return result;
    }

    double roundTwoDecimals(double d){
            DecimalFormat twoDForm = new DecimalFormat("#.######");
            return Double.valueOf(twoDForm.format(d));
    }

    public void plotLocation(Location location) {
            GeoPoint point = new GeoPoint(
                    (int) (roundTwoDecimals(location.getLatitude()) * 1E6),
                    (int) (roundTwoDecimals(location.getLongitude()) * 1E6));
            myLocation = point;
            map.getController().animateTo(point);
            map.getController().setCenter(point);
            zoomToMyLocation();
    }

    private void zoomToMyLocation() {
        if (myLocation != null) {
            map.getController().setZoom(18);
            map.getController().animateTo(myLocation);
        }
    }

    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    } 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-22T15:28:20.327

我做了一些有点棘手的事情，它在我的情况下有效。您可以通过 xml 布局将标记作为视图放置并使其居中。

```
android:layout_centerHorizontal="true"
android:layout_centerVertical="true" 
```

然后，您应该对来自edittext的地址进行地理编码以获取纬度和经度。最后，将相机动画到您的输入位置。

```
CameraPosition aCameraPosition = new CameraPosition.Builder().target(
            new LatLng(latitude, longitude)).zoom(15).build();      
    aGoogleMapObject.animateCamera(CameraUpdateFactory.newCameraPosition(aCameraPosition)); 
```

如果需要，对 xml 中的标记进行调整。

# c# - 通用仓库，功能解释/c#

> ID：16163565
> 
> 赞同：0
> 
> 时间：2013-04-23T07:34:57.550
> 
> 标签：c#, linq, asp.net-mvc-4, repository

我找到了一些有趣的通用存储库，但我无法弄清楚该函数的作用：PerformInclusions(includeProperties, query);

## 调用 PerformInclusions，

```
public T Single(Expression<Func<T, bool>> where, string includeProperties)
        {
            try
            {
                IQueryable<T> query = IDbSet;
                query = PerformInclusions(includeProperties, query);
                return query.Single(where);
            }
            catch (InvalidOperationException ex)
            {
                return null;
            }
        } 
```

## 执行包含

```
private static IQueryable<T> PerformInclusions(string includeProperties,
                                                       IQueryable<T> query)
        {
            if (includeProperties != null && includeProperties.Length > 0)
            {
                foreach (var includeProperty in includeProperties.Split(new char[] { ',' }, StringSplitOptions.RemoveEmptyEntries))
                {
                    query = query.Include(includeProperty);
                }
            }
            return query;
        } 
```

我可以使用没有第二个参数的单个函数。

```
Euser test = Adapter.EuserRepository.Single(u => u.EuserEmail.Equals(user.EuserEmail), ""); 
```

所以我有两个问题，函数 PerformInclusions() 做了什么，有人可以给我一个例子，在调用 single() 函数时 includeproperties 是什么。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T07:41:37.150

正如@Andrei 所说，这允许您使用熟悉的 EF 包含语法来急切加载导航属性。导航属性急切加载的另一种替代方法是通过 lambdas，如下所示：

```
 public T GetBy(Expression<Func<T, bool>> predicate, params Expression<Func<T, object>>[] includes)
    {
        var result = GetAll();
        if (includes.Any())
        {
            foreach (var include in includes)
            {
                result = result.Include(include);
            }
        }
        return result.FirstOrDefault(predicate);
    } 
```

如果您有一个具有如下导航属性的实体：

```
public class Test{
    public int Id {get;set;}
    public SomethingElse Thing {get;set;}
} 
```

`_repo.Single(t => t.Id == 1, "");`或者`_repo.GetBy(t => t.Id == 1);`

将返回一个`Thing`为空的实体

`_repo.Single(t => t.Id == 1, "Thing");`或者`_repo.GetBy(t => t.Id == 1, t=>t.Thing);`

将返回通过外键填充 Thing 的实体

有关 EF 中导航属性的更多详细信息，请查看我的博客[http://blog.staticvoid.co.nz/2012/7/17/entity_framework-navigation_property_basics_with_code_first](http://blog.staticvoid.co.nz/2012/7/17/entity_framework-navigation_property_basics_with_code_first)

# jquery - 如何使用 jquery 在剪贴板上触发 keyup 事件？

> ID：16163566
> 
> 赞同：0
> 
> 时间：2013-04-23T07:35:02.643
> 
> 标签：jquery, google-chrome, clipboard

我想在 chrome 浏览器中打开的 pdf 文档上触发 keyup 事件。有可能吗？我的一个朋友告诉我，剪贴板对象可能会发生这种情况。不知道他是对是错？请告诉它可能发生与否？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-23T07:42:36.110

它是来自网络的任意 pdf 文档还是您自己创建的？您可以在自己创建 pdf 文档时添加 javascript：

[http://www.pdfill.com/document_javascript.html](http://www.pdfill.com/document_javascript.html)

# c++ - 使用 FFMPEG API 读取特定的视频帧

> ID：16163567
> 
> 赞同：7
> 
> 时间：2013-04-23T07:35:10.360
> 
> 标签：c++, ffmpeg

我使用此循环从 FFMPEG 中的视频流中读取帧：

```
while(av_read_frame(pFormatCtx, &packet)>=0) {
        // Is this a packet from the video stream?
        if(packet.stream_index==videoStream) {
            // Decode video frame
            avcodec_decode_video2(pCodecCtx,pFrame,&frameFinished,&packet);

            // Did we get a video frame?
            if(frameFinished) {

                sws_scale(img_convert_context ,pFrame->data,pFrame->linesize,0,
                     pCodecCtx->height, pFrameRGBA->data, pFrameRGBA->linesize);
                printf("%s\n","Frame read finished ");

                                       ExportFrame(pFrameRGBA->data[0]);
                    break;
                }
            }
            // Save the frame to disk

        }
            printf("%s\n","Read next frame ");

        // Free the packet that was allocated by av_read_frame
        av_free_packet(&packet);
    } 
```

所以以这种方式顺序读取流。我想要的是随机访问帧以能够读取特定帧（按帧号）。它是如何完成的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T07:44:05.410

你可能想看看

```
int av_seek_frame(AVFormatContext *s, int stream_index, int64_t timestamp,
                  int flags); 
```

上面的 api 将在给定时间戳处寻找关键帧。寻找后，您可以阅读框架。下面的教程还解释了位置和时间戳之间的转换。

[http://dranger.com/ffmpeg/tutorial07.html](http://dranger.com/ffmpeg/tutorial07.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T07:48:36.510

由于视频中的大多数帧都依赖于前一帧和下一帧，因此通常访问视频中的随机帧并不简单。但是，某些帧独立于任何其他帧进行编码，并且在整个视频中定期出现。这些帧称为 I 帧。通过查找*可以*直接访问这些帧。

如果您想“随机”访问视频中的任何帧，那么您必须：

1.  寻找上一个 I 帧
2.  逐帧阅读，直到获得所需的帧号

你已经得到了第二点的代码，所以你需要做的就是处理第一点，你就完成了。这是人们经常参考的 Dranger 教程的[更新版本——它可能会有所帮助。](https://github.com/chelyaev/ffmpeg-tutorial/blob/master/tutorial07.c)

# graph - 超过 1 个 svg 元素的 D3 转换

> ID：16163568
> 
> 赞同：2
> 
> 时间：2013-04-23T07:35:18.630
> 
> 标签：graph, d3.js, transitions

我是 D3 的新手，正在尝试学习一些基础知识。我一直在使用 D3 技巧和窍门这本书，并尝试调整折线图以在其中插入几条线，它们都可以转换。基本思想是 A 行从数据 A 开始，B 行从数据 B 开始。然后单击按钮，A 行转换为数据 C，B 行转换为数据 D。

折线图是随时间变化的图，因此我将 x 轴设置为时间轴。

这是我正在使用的代码（减少一点）

```
 // Define the axes
var xAxis = d3.svg.axis().scale(x)                          
.orient("bottom").ticks(10);            
var yAxis = d3.svg.axis().scale(y)                      
.orient("left").ticks(5);                               

// Define the line
var valueline = d3.svg.line()                               
.x(function(d) { return x(d.date); })                   
.y(function(d) { return y(d.number); });                    

// Define the line
var valueline2 = d3.svg.line()                              
.x(function(d) { return x(d.date); })                   
.y(function(d) { return y(d.number2); });                   

// Define the line
var valueline3 = d3.svg.line()                              
.x(function(d) { return x(d.date); })                   
.y(function(d) { return y(d.number3); });                   

// Define the line
var valueline4 = d3.svg.line()                              
.x(function(d) { return x(d.date); })                   
.y(function(d) { return y(d.number4); });                   

// Adds the svg canvas
var svg = d3.select("body")                                 
.append("svg")                                          
.attr("width", width + margin.left + margin.right)  
.attr("height", height + margin.top + margin.bottom)
.append("g")                                            
.attr("transform", "translate(" + margin.left + "," + margin.top + ")"); 
// Get the data
d3.tsv("data/data3.tsv", function(error, data) {                
d.date = parseDate(d.date);                         
d.number = +d.number;                               
d.number2 = +d.number2; 
d.number3 = +d.number3; 
d.number4 = +d.number4; 
d.number5 = +d.number5; 
});

// Scale the range of the data
x.domain(d3.extent(data, function(d) { return d.date; }));      
y.domain([0, d3.max(data, function(d) { return d.number4; })]); 

// Add the  path.
svg.append("path")                                  
.attr("d", valueline(data));    

    //Add the transition for the first line                 
d3.select("p2")
.on("click", function() {
svg.select("path")
.data(data)
.transition()
.delay(function(d, i) {
return i / 40 * 1000;
})
.duration(1500)                         
.attr("d", valueline3(data));
}) ;

// Add the second path.
svg.append("path")                                                                  
    .attr("d", valueline2(data))    

//Add the transition for the second line        
d3.select("p3")
            .on("click", function() {
                svg.select("path")
                   .data(data)
                   .transition()
                   .delay(function(d, i) {
                       return i / 40 * 1000;
                   })
                   .duration(1500)      
                    .attr("d", valueline4(data));

                   }) 
```

问题是其他转换最终适用于第一行，而第二行是静态的 我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T08:20:47.593

问题是您`svg.select("path")`在点击处理程序中调用。这将选择 SVG 中的第一个路径——也就是说，两次都将选择并更改相同的路径（您首先附加的路径）。

减轻这种情况的方法是`this`在附加到特定路径的点击处理程序中引用，即替换

```
svg.select("path") 
```

和

```
d3.select(this) 
```

一些一般性评论。您选择路径的方式是调用`d3.select("p2")`. 这几乎肯定不是您想要的——这是选择具有该名称的 DOM 元素。如果您已将 ID 分配给相应的路径，请使用`d3.select("#p2")`，如果您已分配类使用`d3.select(".p2")`。

`data`如果您将路径作为数组传递，则在创建路径时也不需要引用两次。也就是说，而不是

```
svg.select("path").data(data)                        
   .attr("d", valueline3(data)); 
```

你可以做

```
svg.select("path").data([data])                        
   .attr("d", valueline3); 
```

这消除了一些冗余。

最后，D3 方法是使用相同的行生成器并为不同的行传入不同的数据数组。无需使用四个不同的线生成器，您只需将原始数据提取到四个不同的数组中并使用它们。您也可以通过一个电话完全完成。[这个问题](https://stackoverflow.com/questions/8689498/drawing-multiple-lines-in-d3-js)有更多信息。

# solr - 使用 CachedSqlEntityProcessor 时完全导入失败，给出 OutOfMemoryError 异常

> ID：16163572
> 
> 赞同：1
> 
> 时间：2013-04-23T07:35:25.797
> 
> 标签：solr, dataimporthandler

使用 CachedSqlEntityProcessor 时完全导入失败，出现异常

## java.lang.OutOfMemoryError：超出 GC 开销限制

我该如何解决这个问题.......

不使用 CachedSqlEntityProcessor 需要 15 小时才能建立索引

我的 products-data-config.xml 是

```
<dataConfig>
<dataSource type="JdbcDataSource" driver="com.mysql.jdbc.Driver" url="jdbc:mysql://localhost:3306/localbazaar" user="root" password="sa" batchSize="100" />
    <document name="products">
        <entity name="domainProduct" query="SELECT p.PRODUCT_ID, p.NAME, LOWER(REPLACE(REPLACE(p.NAME,' ','-'),'/','-')) AS purl, p.description, p.BRAND_ID, p.CATEGORY_ID, p.GROUP_ID, p.MIN_PRICE, p.MAX_PRICE, p.AUTHOR, p.ISBN10, p.ISBN13, p.OLID, p.EAN13, p.UPCA, p.SKU, p.LANGUAGE, p.FORMAT, p.PUBLISHER, p.SUBJECT, c.NAME AS cname, c.URL_NAME, b.NAME AS bname, LOWER(REPLACE(REPLACE(b.NAME,' ','-'),'/','-')) AS bUrl, CONCAT('http://partnercenter.localbazaar.com/image?imageId=',i.IMAGE_NAME) AS productImage FROM product_t p LEFT OUTER JOIN category_t c ON (c.CATEGORY_ID=p.CATEGORY_ID) LEFT OUTER JOIN brand_t b ON (b.BRAND_ID=p.BRAND_ID) LEFT OUTER JOIN image_t i ON (i.ASSET_ID=p.PRODUCT_ID AND i.ASSET_TYPE_ID = 4 AND i.IMAGE_TYPE_ID = 0)">
            <field column="PRODUCT_ID" name="productId" />
            <field column="NAME" name="productName" />
            <field column="purl" name="productUrlName" />
            <field column="description" name="productDescription" />
            <field column="BRAND_ID" name="brandId" />
            <field column="CATEGORY_ID" name="categoryId" />
            <field column="GROUP_ID" name="groupId" />
            <field column="MIN_PRICE" name="minPrice" />
            <field column="MAX_PRICE" name="maxPrice" />
            <field column="AUTHOR" name="author" />
            <field column="ISBN10" name="isbn10" />
            <field column="ISBN13" name="isbn13" />
            <field column="OLID" name="olid" />
            <field column="EAN13" name="ean13" />
            <field column="UPCA" name="upca" />
            <field column="SKU" name="sku" />
            <field column="LANGUAGE" name="language" />
            <field column="FORMAT" name="format" />
            <field column="PUBLISHER" name="publisher" />
            <field column="SUBJECT" name="subject" />
            <field column="cname" name="categoryName" />
            <field column="URL_NAME" name="categoryUrlName" />
            <field column="bname" name="brandName" />
            <field column="bUrl" name="brandUrlName" />
            <field column="productImage" name="productImage" />
            <entity name="specifications" query="select PRODUCT_ID, CONCAT(PROPERTY_NAME,':::',property_value) as specifications FROM product_properties_t " processor="CachedSqlEntityProcessor" where="PRODUCT_ID=domainProduct.PRODUCT_ID" />
        </entity>
    </document>
</dataConfig> 
```

我的 store-products-data-config.xml 是

```
<dataConfig>
    <dataSource type="JdbcDataSource" driver="com.mysql.jdbc.Driver" url="jdbc:mysql://localhost:3306/localbazaar" user="root" password="sa" batchSize="100" />
    <document name="products">
        <entity name="domainStoreProduct" query="SELECT sp.STORE_PRODUCT_ID, sp.STORE_ID, sp.PRODUCT_ID, sp.MIN_PRICE, sp.MAX_PRICE, sp.STORE_TYPE_ID, sp.BUY_X, sp.GET_Y, s.NAME AS sname, LOWER(REPLACE(REPLACE(s.NAME,' ','-'),'/','-')) AS sUrl, s.DESCRIPTION AS sdesc, s.WEB_SITE_UTL, s.EMAIL, s.PHONE, s.MOBILE, s.ACTIVE AS act, a.ADDRESS_ID, a.location, LOWER(REPLACE(REPLACE(a.location,' ','-'),'/','-')) AS urlLoc, a.ADDRESS_LINE1, a.ADDRESS_LINE2, a.LATITUDE, a.LONGITUDE, a.zipcode, a.LANDMARK, a.CITY, CONCAT(a.LATITUDE,',',a.LONGITUDE) AS ll, p.NAME AS pname, LOWER(REPLACE(REPLACE(p.NAME,' ','-'),'/','-')) AS purl, p.description AS pdesc, p.BRAND_ID, p.CATEGORY_ID, p.GROUP_ID, p.AUTHOR, p.ISBN10, p.ISBN13, p.OLID, p.EAN13, p.UPCA, p.SKU, p.LANGUAGE, p.FORMAT, p.PUBLISHER, p.SUBJECT, c.NAME AS cname, c.URL_NAME, b.NAME AS bname, LOWER(REPLACE(REPLACE(b.NAME,' ','-'),'/','-')) AS bUrl, CONCAT('http://partnercenter.localbazaar.com/image?imageId=',ip.IMAGE_NAME) AS pImage, CONCAT('http://partnercenter.localbazaar.com/image?imageId=',ist.IMAGE_NAME) AS sImage, ci.CITY_ID FROM store_products_t sp LEFT OUTER JOIN store_t s ON (sp.STORE_ID=s.STORE_ID) LEFT OUTER JOIN address_t a ON (a.ASSET_TYPE_ID=3 AND a.ASSET_ID=sp.STORE_ID) LEFT OUTER JOIN product_t p ON (p.PRODUCT_ID=sp.PRODUCT_ID) LEFT OUTER JOIN category_t c ON (c.CATEGORY_ID=p.CATEGORY_ID) LEFT OUTER JOIN brand_t b ON (b.BRAND_ID=p.BRAND_ID) LEFT OUTER JOIN image_t ip ON (ip.ASSET_ID=sp.PRODUCT_ID AND ip.ASSET_TYPE_ID=4 AND ip.IMAGE_TYPE_ID=0) LEFT OUTER JOIN image_t ist ON (ist.ASSET_ID=sp.STORE_ID AND ist.ASSET_TYPE_ID=3 AND ist.IMAGE_TYPE_ID=0) LEFT OUTER JOIN city_t ci ON (ci.NAME=a.CITY)">
            <field column="STORE_PRODUCT_ID" name="storeProductId" />
            <field column="STORE_ID" name="storeId" />
            <field column="PRODUCT_ID" name="productId" />
            <field column="MIN_PRICE" name="storeMinPrice" />
            <field column="MAX_PRICE" name="storeMaxPrice" />
            <field column="STORE_TYPE_ID" name="storeTypeId" />
            <field column="BUY_X" name="buyX" />
            <field column="GET_Y" name="getY" />
            <field column="sname" name="storeName" />
            <field column="sUrl" name="storeUrlName" />
            <field column="sdesc" name="description" />
            <field column="WEB_SITE_UTL" name="webSiteUrl" />
            <field column="EMAIL" name="email" />
            <field column="PHONE" name="phone" />
            <field column="MOBILE" name="mobile" />
            <field column="act" name="active" />
            <field column="ADDRESS_ID" name="addressId" />
            <field column="location" name="location" />
            <field column="urlLoc" name="urlLocation" />
            <field column="ADDRESS_LINE1" name="addressLine1" />
            <field column="ADDRESS_LINE2" name="addressLine2" />
            <field column="LATITUDE" name="latitude" />
            <field column="LONGITUDE" name="longitude" />
            <field column="zipcode" name="zipcode" />
            <field column="LANDMARK" name="landmark" />
            <field column="CITY" name="city" />
            <field column="ll" name="latlong" />
            <field column="pname" name="productName" />
            <field column="purl" name="productUrlName" />
            <field column="pdesc" name="productDescription" />
            <field column="BRAND_ID" name="brandId" />
            <field column="CATEGORY_ID" name="categoryId" />
            <field column="GROUP_ID" name="groupId" />
            <field column="AUTHOR" name="author" />
            <field column="ISBN10" name="isbn10" />
            <field column="ISBN13" name="isbn13" />
            <field column="OLID" name="olid" />
            <field column="EAN13" name="ean13" />
            <field column="UPCA" name="upca" />
            <field column="SKU" name="sku" />
            <field column="LANGUAGE" name="language" />
            <field column="FORMAT" name="format" />
            <field column="PUBLISHER" name="publisher" />
            <field column="SUBJECT" name="subject" />
            <field column="cname" name="categoryName" />
            <field column="URL_NAME" name="categoryUrlName" />
            <field column="bname" name="brandName" />
            <field column="bUrl" name="brandUrlName" />
            <field column="pImage" name="productImage" />
            <field column="sImage" name="storeImage" />
            <field column="CITY_ID" name="cityId" />
            <entity name="specifications" query="select PRODUCT_ID, CONCAT(PROPERTY_NAME,':::',property_value) as specifications FROM product_properties_t " processor="CachedSqlEntityProcessor" WHERE="PRODUCT_ID= domainStoreProduct.PRODUCT_ID" />
        <entity name="storeProperties" query="select STORE_ID, CONCAT(PROPERTY_ID,':::',PROPERTY_VALUE) as storeProperties FROM store_properties_t " processor="CachedSqlEntityProcessor" WHERE="STORE_ID=domainStoreProduct.STORE_ID" />
        </entity>
    </document>
</dataConfig> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T13:57:30.153

你可以尝试不同的东西：

1.  尝试设置`batchSize`属性。如果您正确调整它，您可以提高数据源的性能。
2.  `SELECT *`总是比提供您需要的**列**慢（即使您需要所有列）。我建议使用`SELECT PRODUCT_ID, NAME, ...`而不是使用`*`
3.  为什么有实体 b、i 和 s？您不使用其中的字段，因此我认为它们不是很有用
4.  尝试为您的子实体使用[CachedSqlEntityProcessor](http://wiki.apache.org/solr/DataImportHandler#CachedSqlEntityProcessor)。它只会检索一次数据并为每个子实体重新使用它。
5.  您的产品是否可以属于 1 个以上的类别（它是多值字段吗？），如果不是，那么使用**JOINS**编写一个查询比编写多个实体更快。

* * *

**编辑**：我建议将这件事分成 2 个问题，因为现在其他人用我的旧答案阅读你的新问题真的很奇怪。

我不认为你可以选择 CachedSqlEntityProcessor 将他的缓存放在哪里（我认为它总是在内存中）。您的 8 小时数据导入的问题在于，因为我们正在谈论大量记录，所以将使用大量查询（每个子实体都使用自己的查询）。

您的问题的解决方案是**删除**子实体，并在您的父实体中将子实体的查询添加为逗号分隔列表。我建议看看[这个答案](https://stackoverflow.com/a/8302533/1915448)。

如果您这样做，您的所有规范（例如）将作为逗号分隔的列表存储在一列中。然后，您可以使用 Solr ScriptTransformer 拆分值并创建多个值。

这将查询的数量限制为 1 个大查询，并且还会限制 RAM 的使用，因为它将单独解析每个查询。我不知道性能会如何，因为您必须单独解析每个实体。

如果这不起作用，我认为没有比等待 8 小时完成数据导入更好的解决方案了。您不能指望 Solr 会在 1 2 3 中将其全部索引。您可以尝试使用 cronjob 在夜间运行此任务。

# ios6 - 旋转在 iOS-6.0 及以上版本中不起作用

> ID：16163574
> 
> 赞同：1
> 
> 时间：2013-04-23T07:35:29.753
> 
> 标签：ios6, uiwindow, autorotate

我准备了一个名为“CncWindowController”的视图控制器文件，在 XIB 文件中，我获取窗口对象（而不是 UIView）并将其连接到视图插座。所以当我访问它的视图时，我得到了窗口对象。

我在 AppDelegate.m 文件中访问它：

```
self.windowController = [[CncWindowController alloc] initWithNibName:@"CncWindowController" bundle:nil];
self.window = (UIWindow*) self.windowController.view; 
```

这里的view其实是指window。但是 Rotation 在 iOS6.0 中不起作用，并且 shouldAutorotate 方法也没有被调用。

如果我将使用如下窗口对象，那么它工作正常： self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

我的方法有什么问题？任何想法的帮助，我应该如何使用上述方法在 iOS-6 中进行自动旋转？

谢谢！

# c# - 如何获取自定义属性的值？

> ID：16163581
> 
> 赞同：0
> 
> 时间：2013-04-23T07:35:56.503
> 
> 标签：c#, wpf, attributes, dependency-properties, custom-attributes

我正在寻找一种将自定义属性添加到 xaml 控件的方法。我找到了这个解决方案：[向 XAML 中的元素添加自定义属性？](https://stackoverflow.com/a/5782985/1115471)

Class1.cs：

```
public static Class1
{
    public static readonly DependencyProperty IsTestProperty = 
       DependencyProperty.RegisterAttached("IsTest",
                                          typeof(bool), 
                                          typeof(Class1),
                                          new FrameworkPropertyMetadata(false));

    public static bool GetIsTestProperty(UIElement element)
    {
        if (element == null)
        {
            throw new ArgumentNullException("element");
        }

        return (bool)element.GetValue(IsTestProperty);
    }

    public static void SetIsTestProperty(UIElement element, bool value)
    {
        if (element == null)
        {
            throw new ArgumentNullException("element");
        }

        element.SetValue(IsTestProperty, value);
    }
} 
```

用户控件.xaml

```
<StackPanel x:Name="Container">
    <ComboBox x:Name="cfg_Test" local:Class1.IsTest="True" />
    <ComboBox x:Name="cfg_Test" local:Class1.IsTest="False" />
    ...
... 
```

现在是我的问题，我怎样才能获得财产的价值？

现在我想在 StackPanel 中读取所有元素的值。

```
// get all elementes in the stackpanel
foreach (FrameworkElement child in 
            Helpers.FindVisualChildren<FrameworkElement>(control, true))
{
    if(child.GetValue(Class1.IsTest))
    {
        //
    }
} 
```

但`child.GetValue(Class1.IsTest)`总是假的……怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T08:19:14.027

首先，您的代码似乎充满了错误，所以我不确定您是否没有正确复制它，或者是什么原因。

那么你的例子有什么问题？

*   您的 DependencyProperty 的 getter 和 setter 被错误地创建。（名称不应附加“财产”。）应该是：

```
public static bool GetIsTest(UIElement element)
{
    if (element == null)
    {
        throw new ArgumentNullException("element");
    }

    return (bool)element.GetValue(IsTestProperty);
}

public static void SetIsTest(UIElement element, bool value)
{
    if (element == null)
    {
        throw new ArgumentNullException("element");
    }

    element.SetValue(IsTestProperty, value);
} 
```

*   其次，您的 StackPanel 的两个子控件共享相同的名称，这也是不可能的。
*   第三，您在 foreach 语句中错误地获取了该属性。这应该是：

```
if ((bool)child.GetValue(Class1.IsTestProperty))
{
  // ...
} 
```

*   请确保您的 Helpers.FindVisualChildren 工作正常。您可以改用以下内容：

```
foreach (FrameworkElement child in Container.Children)
{
   // ...
} 
```

希望这可以帮助。

# python - Windows 服务在 Python 中抓取屏幕

> ID：16163582
> 
> 赞同：0
> 
> 时间：2013-04-23T07:35:57.350
> 
> 标签：python, windows, python-imaging-library

我有一个作为 Windows 服务运行的 Python 脚本，它会定期截取屏幕截图。我把它作为一个简单的 Python 脚本工作，但现在我已经把它变成了一个服务，它不再起作用。我在 Windows 事件查看器中得到这个输出：

```
The instance's SvcRun() method failed 
Traceback (most recent call last):
File "C:\Python27\lib\site-packages\win32\lib\win32serviceutil.py", line 835, in SvcRun
    self.SvcDoRun()
File "D:\Malcolm\Dropbox\code\ambihue\ambiservice.py", line 58, in SvcDoRun
    r, g, b = ambihue.getAverageScreenColor()
File "D:\Malcolm\Dropbox\code\ambihue\ambihue.py", line 21, in getAverageScreenColor
    screen = ImageGrab.grab()
File "C:\Python27\lib\site-packages\PIL\ImageGrab.py", line 47, in grab
    size, data = grabber()
IOError: screen grab failed 
%2: %3 
```

这是我获取屏幕的方法：

```
screen = ImageGrab.grab() 
```

关于让我的服务成功获得屏幕的任何建议？或者你有任何其他的抓取屏幕的解决方案——我现在正在使用 PIL。

我的整个代码都在这里： [https ://github.com/crummy/ambihue](https://github.com/crummy/ambihue)

# liferay - liferay-ui 视图选择一行

> ID：16163584
> 
> 赞同：0
> 
> 时间：2013-04-23T07:36:02.097
> 
> 标签：liferay, liferay-6, alloy-ui

我正在开发一个用于显示规则列表以供选择的 portlet。我想关注在我的数据库上选择的内容行（加载的规则变量`init.jsp`）。

我应该怎么做才能聚焦/突出显示一行？

我应该使用`<c:when` `<c:otherwhise`所有的`.jsp`：

我使用此代码显示规则列表：

```
<%@ taglib uri="http://java.sun.com/portlet_2_0" prefix="portlet" %>

<portlet:defineObjects />

<liferay-ui:search-container emptyResultsMessage="there-are-no-products" delta="5">
    <liferay-ui:search-container-results>
        <% 
        List<IRRule> tempResults = ActionUtil.getRules(renderRequest);
        results = ListUtil.subList(tempResults, searchContainer.getStart(),
        searchContainer.getEnd());

        total = tempResults.size();
        pageContext.setAttribute("results", results);
        pageContext.setAttribute("total", total);
        %>
    </liferay-ui:search-container-results>

    <liferay-ui:search-container-row
        className="com.everis.oriol.inputrules.model.IRRule"
        keyProperty="ruleId"
        modelVar="rule">

        <liferay-ui:search-container-column-text
            name="ruleName"
            property="ruleName"
            />  

        <liferay-ui:search-container-column-text
            name="ruleDescription"
            property="ruleDescription"
            />

        <liferay-ui:search-container-column-jsp
            path="/row.jsp"
            align="right"
            />

    </liferay-ui:search-container-row>

    <liferay-ui:search-iterator />

</liferay-ui:search-container> 
```

在`init.jsp`我的文件中...

```
<% 
long groupId = themeDisplay.getScopeGroupId();
List<IRSelect> rulesPas = IRSelectLocalServiceUtil.getRule(groupId);

String rules =  rulesPas.get(0).getRuleName();
%> 
```

我真的很想比较...

```
<liferay-ui:search-container-column-text
    name="ruleName"
    property="ruleName"
    /> 
```

和...

```
rules 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:56:34.560

我能想到的一种方法是设置标签的`bold`属性，如果`<liferay-ui:search-container-row>`元素的**值为**`true`：

```
<liferay-ui:search-container-row
        className="com.everis.oriol.inputrules.model.IRRule"
        keyProperty="ruleId"
        modelVar="rule"
        bold="<%=rules.equals(rule.getRuleName()) %>">

...

</liferay-ui:search-container-row> 
```

或者，如果您想要更多选项来设置该行的样式，可以为整行设置一个 CSS 类：

```
<liferay-ui:search-container-row
    className="com.everis.oriol.inputrules.model.IRRule"
    keyProperty="ruleId"
    modelVar="rule">

    <%
    if (rules.equals(rule.getRuleName())) {
        // here "row" is the ResultRow object, instance for each row
        row.setClassName("my-custom-css-class");
    }
    %>

    <liferay-ui:search-container-column-text
        name="ruleName"
        property="ruleName"
        />

     ...

</liferay-ui:search-container-row> 
```

如果您希望仅该行中的规则列文本应以不同方式显示，而不是整行，则：

```
<liferay-ui:search-container-column-text
        name="ruleName"
        property="ruleName"
        cssClass="<%=rules.equals(rule.getRuleName()) ? \"my-custom-css-class\" : \"\" %>"
        /> 
```

# excel - 将 .bat 批处理文件转换为 Excel 宏？

> ID：16163586
> 
> 赞同：1
> 
> 时间：2013-04-23T07:36:23.283
> 
> 标签：excel, batch-file, xlsx

我的工作性质与[这个问题](https://stackoverflow.com/questions/15660300/renamig-files-which-have-date-and-extension-number-can-be-variable)几乎相同。是否可以将此`.bat`命令转换为 excel 宏？如果是这样，那将如何进行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:32:37.503

是的，您可以扫描文件，然后通过 VBA 代码从 Excel 重命名/复制它们。

您使用文件系统对象

[http://msdn.microsoft.com/en-us/library/office/gg278516.aspx](http://msdn.microsoft.com/en-us/library/office/gg278516.aspx)

一些例子：

```
 Set fso = CreateObject("Scripting.FileSystemObject")
   fso.MoveFile "d:\dummytest.txt", "d:\dummytest2.txt"

   fso.CopyFile "d:\dummytest.txt", "d:\dummytest2.txt" 
```

至于确定要移动的文件等，您必须获取文件夹中所有项目的列表，并确定您的触发器将用于操作。正如人们所预料的那样，这也与文件系统对象相关联。

这是我用来检查我要使用的文件名是否已经存在的代码块示例：

```
Flag = 1
While Flag > 0
    FileExists = (Len(Dir(Path & "\" & FileName, lngAttributes)) > 0)
    If FileExists Then
        FileName = BaseFilename & "(" & Flag & ").xlsx"
        Flag = Flag + 1
    Else
        Flag = 0
    End If
Wend 
```

这是一个遍历文件夹中所有对象的示例：

```
Set FileSys = New FileSystemObject
Set myFolder = FileSys.GetFolder(myDir)
dteFile = DateSerial(1900, 1, 1)
For Each objFile In myFolder.Files
    If objFile.DateLastModified > dteFile Then
        dteFile = objFile.DateLastModified
        strFilename = objFile.Name
    End If
Next objFile 
```

这应该让你朝着你正在寻找的方向前进。

# jquery - 将 JSON 数据传输到新页面

> ID：16163592
> 
> 赞同：0
> 
> 时间：2013-04-23T07:36:47.890
> 
> 标签：jquery, json

我只是尝试使用 jquery 在我的服务器上获取另一个页面的内容，然后在另一个页面上显示部分 JSON 数据。继承人我到目前为止：

第 1 页数据取自：

```
<script>
var namestest = {
"name1":"josh",
"id1":814922118,
"color1":"red"};
</script> 
```

第 2 页试图在以下位置显示数据：

```
<div id="result"> </div>

<script>
$.get('http://sentinelgaming.org/test.php', function(data) {
    $("#result").html(namestest.name1);
});
</script> 
```

为什么这行不通？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:21:49.383

尝试

第 1 页

```
{
"name1":"josh",
"id1":814922118,
"color1":"red"
} 
```

第2页

```
<script> $.get('http://sentinelgaming.org/test.php', function(data) {
    var namestest = eval('(' + data + ')' );
    $("#result").html(namestest.name1); }); </script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T10:25:02.767

我不确定，因为代码对我来说似乎不正确。在下面的代码中，请参见 $("#result").html(namestest.name1);

它应该是 $("#result").html(data.name1) 因为您在 data 变量中传递响应。$.get(' [http://sentinelgaming.org/test.php](http://sentinelgaming.org/test.php) ', function(data) { $("#result").html(namestest.name1); });

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T10:17:57.093

我认为你的 Json var 第二页中的问题没有查看它（你可以制作 consloe.log(namestest)），所以我认为你需要将它定义为全局变量

# iphone - 表视图数据未填充

> ID：16163598
> 
> 赞同：1
> 
> 时间：2013-04-23T07:37:14.827
> 
> 标签：iphone, xcode4.5

当我设置单元格背景图像时，我的表视图数据（即填充到数组中）没有加载。但它在没有单元格背景图像的情况下工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T08:58:19.753

使用设置背景图像

```
UIImageView *imgView=[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"yourImage.png"]];

[cell setBackgroundView:imgView]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T08:52:13.637

如果可能，您还没有在此处发布该表视图方法的代码，而不是发布它。

我认为如果单元格图像颜色与您正在显示的内容的文本颜色匹配，它将存在但不可见。

第二件事，如果您通过此代码添加了 Cell 图像：

```
[cell.contentView addSubview:cellImage]; 
```

& 如果您在文本内容下方编写了 CellImage 代码，那么它也不会显示。

希望这会有所帮助。

# c# - 在 asp.net 4.0 中解码 - 特殊字符

> ID：16163605
> 
> 赞同：2
> 
> 时间：2013-04-23T07:37:38.947
> 
> 标签：c#, asp.net, c#-4.0

根据 W3C 标准解码 asp.net 中的特殊字符。ASCII - URL 编码图表。一些特殊字符没有被转换而是转换为“？”，检查下面的问题，%92 ASCII 的实际结果是“`”，我试图实现这一点以解码为 urlencoding 相等字符。

```
strurl="Workers%92+Accommodation";
string strdecode=Server.UrlDecode(strurl); 
```

例如：ASCII 代码 %92（根据 W3C 标准 url 编码用于 ' - 键盘中没有，请参阅[http://www.w3schools.com/TAGS/ref_urlencode.asp](http://www.w3schools.com/TAGS/ref_urlencode.asp)）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T07:45:42.823

尝试用这个编码/解码：

```
public static string EncodeString(string decodedString)
{
    return Convert.ToBase64String(Encoding.UTF8.GetBytes(decodedString));
}

public static string DecodeString(string encodedString)
{
    return Encoding.UTF8.GetString(Convert.FromBase64String(encodedString));
} 
```

编辑添加：当您要通过 URL 传输值时，使用的方法是：HttpServerUtility.UrlTokenEncode() 方法

参考：http: [//msdn.microsoft.com/en-us/library/system.web.httpserverutility.urltokenencode.aspx](http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.urltokenencode.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T08:47:06.397

您必须使用适当的编码代码页进行解码。引用[http://www.ascii-code.com](http://www.ascii-code.com/)：

> 8 位 ASCII 表有几种不同的变体。下表根据 ISO 8859-1，也称为 ISO Latin-1....

根据[http://en.wikipedia.org/wiki/Windows_code_page](http://en.wikipedia.org/wiki/Windows_code_page)，ISO Latin-1 的代码页是`1252`. 要解码您的字符串，只需执行以下操作：

```
strurl = Encoding.GetEncoding(1252).
             GetString(HttpUtility.UrlDecodeToBytes("%92")); 
```

# r - 从 R 中的 jpeg 图像中提取 RGB 通道

> ID：16163611
> 
> 赞同：13
> 
> 时间：2013-04-23T07:37:58.570
> 
> 标签：r, jpeg, rgb, raster

为了在 R 中对 jpeg 图像进行分类，我想获取每个像素的 RGB 值。

我的问题：有没有办法从 R 中的 jpeg 图像中提取 RGB 通道？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-23T07:50:37.147

您有几个要以 JPEG 格式阅读的包。在这里我使用包`jpeg`：

```
library(jpeg)
img <- readJPEG("Rlogo.jpg")

dim(img)
[1]  76 100   3 
```

如您所见，有 3 层：它们对应于您的 R、G 和 B 值。在每一层中，每个单元都是一个像素。

```
img[35:39,50:54,]
, , 1

          [,1]      [,2]      [,3]      [,4]      [,5]
[1,] 0.5098039 0.5921569 0.4549020 0.3372549 0.1921569
[2,] 0.5098039 0.6000000 0.4549020 0.3372549 0.1921569
[3,] 0.5137255 0.6000000 0.4549020 0.3450980 0.1921569
[4,] 0.5215686 0.6039216 0.4627451 0.3450980 0.1921569
[5,] 0.5215686 0.6039216 0.4627451 0.3450980 0.1882353

, , 2

          [,1]      [,2]      [,3]      [,4]      [,5]
[1,] 0.5882353 0.6666667 0.5098039 0.3803922 0.2156863
[2,] 0.5882353 0.6627451 0.5098039 0.3803922 0.2156863
[3,] 0.5843137 0.6627451 0.5098039 0.3764706 0.2156863
[4,] 0.5843137 0.6627451 0.5058824 0.3764706 0.2117647
[5,] 0.5843137 0.6627451 0.5058824 0.3764706 0.2156863

, , 3

          [,1]      [,2]      [,3]      [,4]      [,5]
[1,] 0.7254902 0.7921569 0.6156863 0.4588235 0.2705882
[2,] 0.7254902 0.7921569 0.6156863 0.4588235 0.2784314
[3,] 0.7254902 0.7921569 0.6156863 0.4588235 0.2784314
[4,] 0.7176471 0.7921569 0.6156863 0.4666667 0.2862745
[5,] 0.7176471 0.7921569 0.6156863 0.4666667 0.2862745 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-23T07:51:31.213

我推荐`biOps`用于图像处理的软件包。

### 这是一个例子：

```
library(biOps)
x <- readJpeg(system.file("samples", "violet.jpg", package="biOps"))
plot(x)

r <- imgRedBand(x)
plot(r)
image(x[,,1])

g <- imgGreenBand(x)
plot(g)
image(x[,,2])

b <- imgBlueBand(x)
plot(b)
image(x[,,3]) 
```

### 视觉示例：

```
redPal <- colorRampPalette(c("black", "red"))
greenPal <- colorRampPalette(c("black", "green"))
bluePal <- colorRampPalette(c("black", "blue"))

x11(width=9, height=2.5)
par(mfcol=c(1,3))
image(x=seq(ncol(r)), y=seq(nrow(r)), z=t(r), asp=1, xaxt="n", yaxt="n", bty="n", xlab="", ylab="", main="red channel", col=redPal(256))
image(x=seq(ncol(g)), y=seq(nrow(g)), z=t(g), asp=1, xaxt="n", yaxt="n", bty="n", xlab="", ylab="", main="green channel", col=greenPal(256))
image(x=seq(ncol(b)), y=seq(nrow(b)), z=t(b), asp=1, xaxt="n", yaxt="n", bty="n", xlab="", ylab="", main="blue channel", col=bluePal(256)) 
```

![在此处输入图像描述](https://i.stack.imgur.com/I4p5q.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-23T08:12:06.833

我喜欢通过 R`biOps`包的方法。将数据加载到画布后，您可以将 jpg 文件从 转换`imagedata`为`raster`并进行进一步处理。这是我的代码：

```
# Required packages
library(biOps)
library(raster)

# Load and plot data
data(logo)
jpg <- logo

plot.imagedata(jpg)

# Convert imagedata to raster
rst.blue <- raster(jpg[,,1])
rst.green <- raster(jpg[,,2])
rst.red <- raster(jpg[,,3])

# Plot single raster images and RGB composite
plot(stack(rst.blue, rst.green, rst.red), 
     main = c("Blue band", "Green band", "Red band"))
plotRGB(stack(rst.blue, rst.green, rst.red)) 
```

# java - 使用 javamail 获取发件人的全名

> ID：16163614
> 
> 赞同：0
> 
> 时间：2013-04-23T07:38:11.920
> 
> 标签：java, spring, email, jakarta-mail

你能告诉我如何从`MimeMessage`using中获取发件人的全名`JavaMail`吗？我试图从地址中获取个人信息，但它不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:17:25.877

如果 InternetAddress.getPersonal() 未返回全名，则发件人未在他们发送的消息中包含全名。或者，如果您使用 IMAP，您的邮件服务器无法正确返回全名。[JavaMail 调试输出](http://www.oracle.com/technetwork/java/javamail/faq/index.html#debug)将提供更多信息。

# php - Fedex API 安排取件

> ID：16163623
> 
> 赞同：8
> 
> 时间：2013-04-23T07:38:38.377
> 
> 标签：php, api, fedex

我正在开发一个网络插件。

我有一个 FedEx API `$key`, `$userid`,`$password`和`$meter`

## 我的插件目标：

*   我有一个网站，用户将从该网站注册并在他的帐户中添加 FedEx 帐号（我的网站用户帐户部分）
*   当用户添加他自己的 FedEx 帐号时，他将能够代表他的 FedEx 帐号创建 FedEx 计划取件。（每个用户的 FedEx 帐号将不同-2）

## 我的问题：

*   我们可以使用 FedEx 开发这种类型的功能吗？
*   我们可以使用不同的 -2 FedEx 帐号创建计划取件吗
*   My Developer `$key`, `$userid`,`$password`和`$meter`对于每个用户都是相同的，或者我们需要不同的 -2 Developer `$key`, `$userid`,`$password`和`$meter`每个 FedEx 帐号。

请为此建议我的解决方案或分享一些链接和文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T06:08:54.907

我一步一步来回答你。

**我们可以使用 FedEx 开发这种类型的功能吗？**

是的，您可以使用 fedex webserbice 创建运输标签，以便准备好取件，或者您也可以使用特定呼叫请求取件，即**Courier Dispatch**。从文档：

```
Category            Service                                     Description
Shipping            Ship/Cancel Ship                            Obtain a label for your package

Courier Dispatch    Courier Dispatch/Cancel Courier Dispatch    Request Courier pick up 
```

**我们能否使用不同的 -2 FedEx 帐号创建计划取件：**

您可以使用任意数量的帐户创建任意数量的取件`allowed to use.`

**我的开发者 $key、$userid、$password 和 $meter 对于每个用户都将是相同的，或者我们需要为每个 FedEx 帐号使用不同的 -2 开发者 $key、$userid、$password 和 $meter。**

作为所有网络服务，一旦您使用您的参数登录到您的帐户，所有操作都将使用您的帐户完成，因此它们将仅与您的帐户相关联。如您所知，一旦您注册获得 api 授权，您首先要使用您的帐号来标识自己，因此所有使用您的令牌的操作都将由您的帐户完成。我真的认为您需要为每个要请求取货的客户提供授权参数。您可能会与他们联系，询问他们是否有办法在您的身份验证参数和其他帐号之间进行此类交互。如果可能的话，我认为更快的解决方案是向您的客户收取您的帐户的取货和请求费用。

**你可以在这里找到联邦快递文档** [http://www.fedex.com/us/developer/solutions.html](http://www.fedex.com/us/developer/solutions.html)

# html - 有没有像“onpathchange”这样的东西？

> ID：16163627
> 
> 赞同：0
> 
> 时间：2013-04-23T07:38:45.293
> 
> 标签：html, html5-history

当使用 javascript 使用哈希片段进行 url 操作时，您可以使用 event.xml 简单地检测 url 片段部分中的所有更改`onhashchange`。有没有类似的方法可以使用 HTML5 历史 API 来检测 url 的路径部分的变化？

我知道，我可以覆盖处理对锚元素的点击，覆盖后退按钮的行为，但是如果用户手动编辑 url 怎么办？

# android - 如何在 Android 的 VideoView 中播放 mp4 文件

> ID：16163628
> 
> 赞同：0
> 
> 时间：2013-04-23T07:38:49.103
> 
> 标签：android, video, mp4

我可以使用 android:minSdkVersion="8" 在 android 中播放 Mp4 视频吗？我环顾四周，但面临“无法播放此视频”

我的代码是，

```
 VideoView videoView = (VideoView) findViewById(R.id.videoView);
    videoView.setVideoPath(path);
    videoView.setMediaController(new MediaController(this));
    videoView.requestFocus();
    videoView.start(); 
```

# javascript - 动态地将元素推入数组 [Javascript]

> ID：16163630
> 
> 赞同：-2
> 
> 时间：2013-04-23T07:38:58.250
> 
> 标签：javascript, html, web, maps

```
var stops = [
  {
    "Geometry": {
      "Latitude":52.1615470947258,
      "Longitude":20.80514430999756
    }
  },
  //next element of the same sort
] 
```

我想使用 javascript 将元素推送到这个数组中。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:45:37.340

你应该使用[`.push`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/push)：

```
stops.push(elements); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:45:22.480

这对您的情况没有帮助吗？

```
var stops = [{"Geometry":"Latitude":52.1615470947258,"Longitude":20.80514430999756}},next element of the same sort}]

var newStops = {"Geometry2":{"Latitude":52.1615470947258,"Longitude":20.80514430999756}}

stops.push(newStops) 
```

# gwt - 在 uibinbder 中创建 GWT 选项卡面板会导致问题

> ID：16163631
> 
> 赞同：0
> 
> 时间：2013-04-23T07:39:08.347
> 
> 标签：gwt

我正在 GWT Uibinder 中创建一个 tabPanel

```
 <g:TabLayoutPanel ui:field="tabPanel" barUnit='PX'
        barHeight='40' width="100%" height="100%">
        <g:tab>
            <g:header size='7' >
            My tab Name 
            </g:header>
            <g:HTMLPanel ui:field="tabConfiguration" >
                <div>
                </div>
            </g:HTMLPanel>
        </g:tab>
        <g:tab> 
```

现在，当我尝试放置我的国际化文本时它不起作用：

```
 <g:TabLayoutPanel ui:field="tabPanel" barUnit='PX'
        barHeight='40' width="100%" height="100%">
        <g:tab text = "{i18n.CONFIGURATION}">
            <g:header size='7' >
            My tab Name 
            </g:header>
            <g:HTMLPanel ui:field="tabConfiguration" >
                <div>
                </div>
            </g:HTMLPanel>
        </g:tab>
        <g:tab> 
```

它只是给了我一个没有名字的空标签

任何解决方法。

请不要：在这个文件中，如果我将这个相同的 I8n 文本应用到任何其他小部件，它的效果就很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:35:19.977

`<g:tab`不是一个小部件，而是一个 uibinder 子元素`TabLayoutPanel`。因此，您不能将其用作小部件。要使其与纯文本一起使用，您需要将 header 元素中的文本设置在与`<ui:text ..>`第一个示例相同的位置：

```
<g:header size='7' >
  <ui:text from="{i18n.CONFIGURATION}" />
</g:header> 
```

# .net - 没有本地消息队列的 NServiceBus 订阅者 - 这可能吗？

> ID：16163635
> 
> 赞同：0
> 
> 时间：2013-04-23T07:39:52.313
> 
> 标签：.net, nservicebus

我想创建一个监听 NServiceBus 的桌面客户端应用程序。客户端对本地机器没有权限，因此没有本地消息队列访问权限。客户端是否错过了一些消息并不重要。是否可以在没有本地 MSMQ 的情况下拥有 NServiceBus 订阅者？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T15:47:30.983

不，这是不可能的（见这里： http: [//nservicebus.uservoice.com/forums/24334-general/suggestions/315106-support-msmq-4-0-remote-input-queue](http://nservicebus.uservoice.com/forums/24334-general/suggestions/315106-support-msmq-4-0-remote-input-queue)）

这不仅是不可能的，而且是一种非常非正统的方法。如果你想参与消息传递，你必须将排队系统扩展到所有想要参与消息传递的节点。

如果您无法在客户端桌面上安装 msmq，那么我会考虑从客户端向后端具有 NServiceBus 的服务进行某种服务调用，以便将您的客户端调用排队。

# c - 来自内核线程的 get_user_pages_fast()

> ID：16163637
> 
> 赞同：0
> 
> 时间：2013-04-23T07:40:00.600
> 
> 标签：c, linux, memory-management, linux-kernel

我需要`get_user_pages_fast()`从内核线程调用。但是在内部`get_user_pages_fast()`使用`current->mm`，它设置为`NULL`用于内核线程。有没有办法解决这个问题？有问题的内核线程正在代表另一个进程工作，比如说`x`，设置并调用是否`x->mm`可以？`current->mm``get_user_pages_fast()`

**[编辑 1]**：我验证了这一点，它似乎正在工作。我仍然担心它是否会在某些情况下破裂。欢迎任何见解。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T14:34:53.437

您的“hack”确实会起作用，但让我们退后一步，了解它的想法是什么：

当您在内核线程中时，（我说的是纯内核线程（kthreadd 的子线程），而不是在内核模式下执行的用户线程，就像服务系统调用的情况一样），*没有*用户内存可以谈到。这就是 current->mm 为空的原因：没有“当前”用户空间内存。

当您将 current->mm 分配给 x->mm 时，您通过将无辜 x 的进程内存空间合并为您自己的来“作弊”。因此，您执行的任何分配都将计入 x，并且对 x 可见（毕竟，它是其内存空间的一部分）。此外，可能存在对 current->mm 的内部内核检查，这可能会被欺骗，导致内核将内核模式线程视为用户模式线程（尽管可以说其他检查依赖于 KERNEL_DS/USER_DS，这你没有修改）。仍然，一个担忧。如果 x 死了，这将中断（嘿-没有人是不朽的），并且可能会导致 oops，如果不是完全恐慌的话。

您还没有说为什么需要获取用户页面-如果情况是您知道 x 还活着并且您正在这样做作为 IPC/shmem 的一部分，我可以看到其中的原因。如果是这种情况，您可能希望为相关进程提供一些 API 以向内核线程“注册”。否则，您的解决方案可以工作，但是......好吧，没有它可能的那么整洁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T17:15:43.700

我不相信这是完全安全的。`_fast`部分`get_user_pages_fast`意味着不需要获取，`mm->mmap_sem`部分原因是因为假设我们在进程本身内运行（例如，`current->mm`不能完全消失）。由于您在另一个线程中运行，因此如果真正的进程曾经做过一些改变其映射的事情，那么您很容易受到竞争的影响。

I guess the question is why can't you just use `get_user_pages` instead?

# javascript - 如何在 mirth 环境中将属性文件从 jar 加载到 javascript 代码

> ID：16163641
> 
> 赞同：0
> 
> 时间：2013-04-23T07:40:24.460
> 
> 标签：javascript, jar, import, mirth

海我正在尝试从**欢乐环境**`jar`中的`javascript`代码中读取属性文件。我在transformer中写了js代码。

 **我将 jar 文件保存在 lib 文件夹中。

它显示异常，例如：

> 匹配 JavaScript 参数类型（null）的 Java 方法 java.io.FileInputStream 的选择是不明确的；候选方法是：
> FileInputStream(java.lang.String) FileInputStream(java.io.File)
> FileInputStream(java.io.FileDescriptor) (com.mirth.connect.server.MirthJavascriptTransformerException)

下面是代码：

```
importPackage(Packages.logproperties.*);
var prop=new Packages.java.util.Properties();
var fis=new     Packages.java.io.FileInputStream(Packages.java.lang.ClassLoader.getSystemResourceAsStream("Logs.properties"));
prop.load(fis); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-14T21:57:29.173

根据错误消息，您似乎正在`FileInputStream`使用`null`.

这意味着`Packages.java.lang.ClassLoader.getSystemResourceAsStream("Logs.properties")`正在返回`null`。

尝试使用要读取的文件的绝对路径，例如

```
var fis=new Packages.java.io.FileInputStream("/full/path/to/Logs.properties"); 
```**

# css - Scala Lift - 站点地图菜单构建器自定义 css 类

> ID：16163642
> 
> 赞同：1
> 
> 时间：2013-04-23T07:40:25.803
> 
> 标签：css, scala, lift

我在 Boot.scala 中定义了以下站点地图：

```
SiteMap(

    Menu(S ? "Home") / "index",
    Menu(S ? "About") / "about",
    Menu(S ? "Work") / "work",
    Menu(S ? "Contact") / "contact"

) 
```

使用以下标记：

```
<lift:Menu.builder /> 
```

我正在尝试做的是以某种方式识别菜单项以单独设置每个样式。

有没有办法为每个站点地图条目定义一个唯一的类，或者将菜单项的名称添加到我也可以用来设置它们的样式的标题属性中？

所以标记呈现如下：

```
<a href="/about" title="about">About</a> 
```

或者

```
<a href="/about" class="about">About</a> 
```

在此先感谢，非常感谢任何帮助:)

**更新**

在找到更强大的方法之前，我选择通过简单的属性引用来设置菜单中每个链接的样式，例如：

```
a[href="/about"] { color:#000; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:41:42.793

我会看看这里的`Menu.item`部分：http: [//exploring.liftweb.net/master/index-7.html#toc-Subsection-7.2.3](http://exploring.liftweb.net/master/index-7.html#toc-Subsection-7.2.3)

这应该允许您将特定的类添加到 的特定项目`SiteMap`，这听起来正是您想要做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:55:05.177

如果您的站点菜单不是很简单，您可以考虑在 HTML 代码中对您的菜单进行硬编码。显然，Lift 的简单菜单无法处理*所有事情*。

您还可以创建菜单组并分别呈现这些组。

# ios - 从 NSArray 为 UISegmentedControl 设置标题

> ID：16163647
> 
> 赞同：0
> 
> 时间：2013-04-23T07:40:53.557
> 
> 标签：ios, objective-c, uisegmentedcontrol

我试图子类化`UISegmentedControl`.
我正在`NSArray`从视图中传递一个并尝试为`UISegmentedControl`from that设置标题`NSArray`。
我使用了该`initWithArray`方法，但它没有从数组中设置值。

这是我的子类`UISegmentedControl`。

**WTSegmentedControl.h**

```
@interface WTSegmentedControl : UISegmentedControl {

}
@end 
```

**WTSegmentedControl.m**

```
#import "WTSegmentedControl.h"

@implementation WTSegmentedControl

- (id)initWithItems:(NSArray *)items {
    if (self = [super initWithItems:items]) {

    }
    return self;
} 
```

现在从我的观点来看，我正在调用这个方法。

我已经像这样连接了插座：

```
@property (nonatomic,strong) IBOutlet WTSegmentedControl  *control;

- (void)viewDidLoad {
    NSArray *names = [[NSArray alloc] initWithObjects:@"yes", @"no", nil];
    control = [[WTSegmentedControl alloc] initWithItems:names];
} 
```

`NSArray`正确通过`titles`但未设置。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:02:08.567

好的，所以您是在 Interface Builder 中或通过代码创建控件！？你不能两者都做。如果要在代码中创建它，请删除`IBOutlet`属性中的部分并在初始化后将控件添加到 subView：

```
// adding the control by code
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSArray *names = [[NSArray alloc] initWithObjects:@"yes", @"no", nil];
    control = [[WTSegmentedControl alloc] initWithItems:names];
    control.frame = CGRectMake(x,z,width,height);
    [self.view addSubview: control];
} 
```

但是如果你想在 InterfaceBuilder 中创建它，你不应该重新初始化它。在 Interface Builder 中设置您的自定义类，然后像这样设置标题：

```
// using Interface Builder
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSArray *names = [[NSArray alloc] initWithObjects:@"yes", @"no", nil];
    [names enumerateObjectsUsingBlock:^(NSString *title, NSUInteger idx, BOOL *stop) {
        [control setTitle:title forSegmentAtIndex:idx];
    }];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T09:02:06.577

如果您已正确连接您的 IBOutlet 控件，则此时会自动设置控件变量。这是在加载视图时完成的。所以这一行：

```
control = [[WTSegmentedControl alloc] initWithItems:names]; 
```

应该改成这样：

```
[control initWithItems:names]; 
```

# ruby-on-rails - 我如何生成一个带有内部标签？

> ID：16163652
> 
> 赞同：0
> 
> 时间：2013-04-23T07:41:06.430
> 
> 标签：ruby-on-rails, ruby-on-rails-3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T07:49:44.093

我认为您可以使用`link_to`：

```
<%= link_to product, :method => "DELETE", :class => "action-btn btn-delete" do %>
  <i class="icon-edit icon-white"></i>
<% end %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T07:47:12.233

我不明白你怎么不能使用`[link_to][1]`

```
 <%= link_to product, class: "action-btn btn-delete" do %>             
          <i class="icon-edit icon-white"></i>
        <% end %> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T07:48:58.363

试试看，可能有效

```
<%= link_to product, method: :delete, class: "action-btn btn-delete" do %>
  <i class="icon-edit icon-white"></i> Delete
<% end %> 
```

# bash - 使用awk划分文件中每一行的第一个条目和最后一个条目

> ID：16163653
> 
> 赞同：2
> 
> 时间：2013-04-23T07:41:11.887
> 
> 标签：bash, awk, grep

我有一个行长不同的文件：

```
120 2 3 4 5 9  0.003 
220 2 3 4 0.004
320 2 3 5 6 7 8 8 0.009 
```

我希望输出由单列组成，其中包含以下条目：

```
120/0.003
220/0.004
320/0.009 
```

那就是我想划分每一行的第一列和最后一列。

如何使用 awk 实现这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T07:54:19.690

显示除法运算的输出：

```
$ awk '{ printf $1 "/" $NF "=" ; print ($1/$NF)}' infile
120/0.003=40000
220/0.004=55000
320/0.009=35555.6 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T07:46:14.530

`awk`将根据 的值拆分其输入`FS`，默认情况下是任何空白序列。这意味着您可以通过参考`$1`和获得第一列和最后一列`$NF`。`NF`是当前行或记录中的字段数。

因此，要告诉 awk 打印第一列和最后一列，请执行以下操作：

```
awk '{ print $1 "/" $NF }' infile 
```

输出：

```
120/0.003
220/0.004
320/0.009 
```

# java - 在 Java Char 数组中打印为二进制

> ID：16163661
> 
> 赞同：0
> 
> 时间：2013-04-23T07:41:31.773
> 
> 标签：java, binary, system.out

我有一个字符数组

```
static char[] myArray  ={   
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf8, 0x48, 0x48, 0x48, 0xb0, 0x00, 0xc0, 0x20,
0x20, 0x20, 0xc0, 0x00, 0xc0, 0x20, 0x20, 0x20, 0xc0, 0x00, 0x40, 0xa0, 0xa0, 0xa0, 0x20, 0x00,
0x00, 0x20, 0xf0, 0x20, 0x20, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x08, 0x08, 0xf8, 0x08,
}; 
```

如何将其打印为 8 位二进制文​​件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T07:44:00.133

用于`toBinaryString`每个项目：

```
for (int i = 0; i < myArray.length; i++) {
        String b = Integer.toBinaryString(myArray[i]);

        if (b.length() < 8) {
            b = "000000000".substring(0, 8 - b.length()).concat(b);
        } else {
            b = b.substring(b.length() - 8);
        }

        System.out.print(b + " ");
 } 
```

输出

> 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 11111000 01001000 01001000 01001000 1011000 ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:46:13.733

如果你输出是`0000000000000000f848484...`然后

```
 for(char c : myArray) {
        System.out.printf("%02x", (int)c);
    } 
```

# php - 无法使用剑道教程中的示例将 JSON 数据（PHP 文件）的格式更改为 JSON

> ID：16163665
> 
> 赞同：0
> 
> 时间：2013-04-23T07:41:39.213
> 
> 标签：php, json, kendo-ui

在[Kendo UI - 教程：使用 Kendo UI 和 PHP 构建应用程序简介 - 第 1 部分](http://docs.kendoui.com/tutorials/PHP/build-apps-with-kendo-ui-and-php)中，我了解了如何连接网格。
问题是当 PHP 文件被读取时，它被读取为 HTML 而不是 JSON。解决方法是放置标题。建议的修复是在回显之前在 PHP 文件中指定类型为 JSON。通过添加如下所示的标题：

```
// add the header line to specify that the content type is JSON
header("Content-type: application/json");

echo "{\"data\":" .json_encode($arr). "}"; 
```

我严格遵循该建议，但收到以下错误消息：

> 警告：无法修改标头信息 - 第 16 行 /home/saulo/public_html/aw001/index.php 中的标头已由（输出开始于 /home/saulo/public_html/aw001/index.php:6）发送
> 
> {"data":[{"first_name":"Richard","last_name":"Gere"},{"first_name":"George","last_name":"Clooney"},{"first_name":"Glenda" ,"last_name":"Jackson"},{"first_name":"Lawrence","last_name":"Smith"} 等等...

请帮忙！

我搜索了stackoverflow，但我找不到同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T08:01:09.617

`index.php`在调用`header`函数之前，您已经在第 16 行输出了一些内容。你不能这样做。`header`必须在进行任何输出之前使用该函数。

检查第 16 行。它很容易只是空行。你需要删除它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:44:03.163

这是因为在设置标题信息之前，您正在打印一些东西，正如错误所说：

```
 headers already sent by 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-23T22:27:24.477

谢谢。我把它修好了。它现在正在将类型转换为 application/json。我的 Chrome 控制台中没有显示错误。但仍然没有数据显示。所有显示的是标题。

index.php 如下：

```
<!DOCTYPE html>
<!-- aw001 wire up grid --> 
<html> 
    <head> 

        <link href="css/kendo.common.min.css" rel="stylesheet">
        <link href="css/kendo.metro.min.css"rel="stylesheet">
        <script src="js/jquery.min.js"></script>
        <script src="js/kendo.all.min.js"></script>
    </head>
    <body>
        <div id="grid"></div>
        <script>
            $(function() {
                $("#grid").kendoGrid({
                    dataSource: {
                        transport: {
                            read: 
                                "data/archers.php"                                
                        },
                        schema: {
                            data: "data"
                        }
                    },
                    columns: [{ field: "FirstName" }, { field: "LastName" }]
                });
            });
        </script> 
    </body> 
</html> 
```

下面的archers.php：

```
<?php

     $link = mysql_pconnect("localhost", "saulo_admin", "admin") or die("Unable To Connect To Database Server");
     mysql_select_db("saulo_asn") or die("Unable To Connect To ASN");

     $arr = array();
     $rs = mysql_query("SELECT first_name, last_name FROM archers");

     while($obj = mysql_fetch_object($rs)) {
            $arr[] = $obj;
     }
     header("Content-type: application/json");
     echo "{\"data\":" .json_encode($arr). "}";

?> 
```

# visual-studio-2012 - TFS 2012 构建定义：要构建的参数项：无法转换值 Microsoft.TeamFoundation.Build.Workflow.Activities.BuildSettings

> ID：16163666
> 
> 赞同：2
> 
> 时间：2013-04-23T07:41:40.213
> 
> 标签：visual-studio-2012, build, build-definition

在对我的构建模板进行大量编辑之后（我在 2012 年重新创建它们以避免任何问题.. 但后来我想我马虎了，只是从旧工作流程中复制/粘贴了整个块，我想这一定完全破坏了我的版本控制) 我现在遇到了一个基于我编辑的构建模板的构建定义的问题。（所有其他的似乎都工作正常..所以我想一个在所有编辑过程中都有问题。（我主要是在构建模板中添加和删除 Version=11.0.0.0 到程序集））

确切的错误是：

> 要构建的参数项：无法将 Microsoft.TeamFoundation.Build.Workflow.Activities.BuildSettings 类型的值“Microsoft.TeamFoundation.Build.Workflow.Activities.BuildSettings”转换为 Microsoft.TeamFoundation.Build.Workflow.Activities.Buildsettings 类型，重置为默认。

它在编辑构建定义并希望选择要构建的项目/解决方案和配置时显示。实际上，现在我无法再保存（没有错误），并且该值再次被删除。

（我正在针对 TFS 2012 使用 VS 2012（仍然安装 VS 2010）。）

怎么修？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T13:05:30.260

打开您的 XAML 并查看根节点`xmlns`上的 's ：`Activity`

这是我的一个剪辑版本：

```
<Activity mc:Ignorable="sads sap sap2010" <!--Removed-->
 xmlns="http://schemas.microsoft.com/netfx/2009/xaml/activities"
 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
 xmlns:mt="clr-namespace:Microsoft.TeamFoundation;assembly=Microsoft.TeamFoundation.Common"
 xmlns:mtbc="clr-namespace:Microsoft.TeamFoundation.Build.Client;assembly=Microsoft.TeamFoundation.Build.Client"
 xmlns:mtbw="clr-namespace:Microsoft.TeamFoundation.Build.Workflow;assembly=Microsoft.TeamFoundation.Build.Workflow"
 xmlns:mtbwa="clr-namespace:Microsoft.TeamFoundation.Build.Workflow.Activities;assembly=Microsoft.TeamFoundation.Build.Workflow"
 xmlns:mtbwt="clr-namespace:Microsoft.TeamFoundation.Build.Workflow.Tracking;assembly=Microsoft.TeamFoundation.Build.Workflow"
 xmlns:mttbb="clr-namespace:Microsoft.TeamFoundation.TestImpact.BuildIntegration.BuildActivities;assembly=Microsoft.TeamFoundation.TestImpact.BuildIntegration"
 xmlns:mtvc="clr-namespace:Microsoft.TeamFoundation.VersionControl.Client;assembly=Microsoft.TeamFoundation.VersionControl.Client"
 xmlns:mtvc1="clr-namespace:Microsoft.TeamFoundation.VersionControl.Common;assembly=Microsoft.TeamFoundation.VersionControl.Common" 
```

查找特定于版本的引用（通常是“10.0”或“11.0”）并将它们删除，使它们看起来像我上面的那些。

此外，请检查您的项目引用并确保它们不是特定于版本的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-17T19:52:59.060

以下是如何更改 TFS 模板中的程序集：

*   在源代码管理资源管理器中，浏览到 BuildprocessTemplates 并打开（双击或从右键单击菜单中选择“查看”）您的构建所基于的模板（给您上述错误的模板）
*   您应该会看到工作流的可视化图表。底部是三个选项卡：变量、参数和导入。单击参数。
*   选择 BuildSettings 参数
*   找到属性框。争论的属性是：ArgumentType、Direction、IsRequired、Name 和 Value。
*   Microsoft.TeamFoundation.Build.Workflow.Activities.BuildSettings 应该是选定的类型，但问题是（典型）您无法判断选择了该程序集的哪个版本。单击下拉菜单。
*   在列表底部选择“浏览类型...”

现在您可以看到所有可用的程序集及其版本。选择你想要的，最有可能升级到最新的。请务必仔细阅读所有各种争论，并确保它们的类型都设置为相同的版本以确保兼容性。

您现在保存文件时可能会遇到问题。一切可能看起来都很好。TFS 表示它知道文件已更改，签入似乎很顺利，但是当文件打开时，程序集仍然反映 v 10。如果您从文件系统中打开相同的文件，您可能会发现文件中的程序集确实是 v 11\. 送什么？不知道。VS中的某种故障。

但这里有一个解决方法：

1.  从您的开发机器上卸载 VS 2010 Team Foundation Server Power Tools
2.  打开 VS 2012 并确保模板没有待处理的更改（撤消）并获取最新版本
3.  签出以进行编辑（重要），但不要在 VS 中进行任何更改（它无论如何都不会打开，因为在上一步中卸载了 10 个程序集）
4.  关闭 VS 2012（很重要，因为如果它是打开的，看起来你的改变没有被接受）
5.  从文件系统打开模板（我使用记事本消除了来自 VS 的任何干扰）并使用“Version=11.0.0.0”在“Version=10.0.0.0”上执行查找/替换并保存文件
6.  打开 VS 2012 现在你应该可以看到工作流设计器了
7.  当然，签入文件

# php - 将 XML 转换为 CSV 时如何获取 XML 节点名称？

> ID：16163669
> 
> 赞同：-1
> 
> 时间：2013-04-23T07:41:46.043
> 
> 标签：php, xml, arrays, csv

这是我用来将其转换为 csv.which 工作正常的代码。

```
function xml2array($file) {
$string = file_get_contents($file);
$parser = xml_parser_create();
xml_parser_set_option($parser, XML_OPTION_CASE_FOLDING, 0);
xml_parse_into_struct($parser, $string, $vals, $index);
xml_parser_free($parser);    
$ary=array();
$i=-1;
foreach ($vals as $r){
    if($r['level'] == 1)continue;
    if($r['level'] == 2 && $r['type'] == "open"){
        ++$i;
        continue;
        }
    $ary[$i][$r['tag']] = @$r['value'];
}
return $ary;
}
$array=xml2array('inventory.xml');
$outstream = fopen('inventory.csv','w');
$header=false;
foreach($array as $k=>$details){
if(!$header){
    fputcsv($outstream,$details);
    $header=true;
}
fputcsv($outstream,$details);
}
fclose($outstream); 
```

**问题：**我在 csv 中获得了正确的数据，但在生成的 csv 中没有获得 XML 标头（节点名称）。缺少什么？帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:50:32.673

```
if(!$header){
    fputcsv($outstream,$details);
    $header=true;
}
fputcsv($outstream,$details); 
```

if 分支中的`fputcsv`与无条件分支完全相同，因此它只是复制第一行。见[http://docs.php.net/array_keys](http://docs.php.net/array_keys)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T08:34:29.713

我认为您正在寻找的是array_keys（），尽管应该注意的是，要使其以这种方式工作，xml中的所有项目都必须具有完全相同的结构并且我相信没有嵌套的子节点。如果是这样，这将起作用：

```
function xml2array($file) {
$string = file_get_contents($file);
$parser = xml_parser_create();
xml_parser_set_option($parser, XML_OPTION_CASE_FOLDING, 0);
xml_parse_into_struct($parser, $string, $vals, $index);
xml_parser_free($parser);    
$ary=array();
$i=-1;
foreach ($vals as $r){
    if($r['level'] == 1)continue;
    if($r['level'] == 2 && $r['type'] == "open"){
        ++$i;
        continue;
        }
    $ary[$i][$r['tag']] = @$r['value'];
}
return $ary;
}

$array=xml2array('inventory.xml');
$outstream = fopen('inventory.csv','w');
//output the names of the first array item's keys
fputcsv($outstream, array_keys($array[0]));
foreach($array as $k=>$details){
    fputcsv($outstream,$details);
}
fclose($outstream); 
```

# macos - libSDL、CMake 和 Mac OS X 狮子 2

> ID：16163670
> 
> 赞同：0
> 
> 时间：2013-04-23T07:41:46.973
> 
> 标签：macos, cmake, sdl

我正在尝试在我的 mac 上编译一个 cmake 项目，但这取决于 SDL。我已经阅读了“LibSDL、CMake 和 MacOSX Lion”，但是我无法解决这个问题。

CMakeList.txt

```
cmake_minimum_required(VERSION 2.6.4 FATAL_ERROR)
# Give a name to the project.
project(movehead)
# This include enable you to use our CMake framework
find_package(qibuild)
find_package(SDL REQUIRED)
link_directories( /usr/local/lib )
link_libraries (
     ${SDL_LIBRARY}
     SDLmain
)
# Create an executable named movehead,
# with the source file : movehead.cpp
qi_create_bin(movehead movehead.cpp)

# Tell CMake that movehead depends on ALCOMMON.
# This will set the libraries to link movehead with,
# the include paths, and so on
qi_use_lib(movehead ALCOMMON) 
```

命令行

```
 sudo qibuild make -c naoqi-sdk movehead Active configuration: naoqi-sdk (Debug)
    Building movehead in naoqi-sdk (Debug)
    Scanning dependencies of target movehead
    Linking CXX executable sdk/bin/movehead
    ld: warning: ignoring file /usr/local/lib/libSDLmain.a, file was built for archive which is not the architecture being linked (i386)
    ld: warning: ignoring file /usr/local/lib/libSDL.dylib, file was built for unsupported file format which is not the architecture being linked (i386)
    Undefined symbols for architecture i386:
      "_main", referenced from:
          start in crt1.10.6.o
         (maybe you meant: _SDL_main)
      "_SDL_Init", referenced from:
          _SDL_main in movehead.cpp.o
      "_SDL_NumJoysticks", referenced from:
          _SDL_main in movehead.cpp.o
      "_SDL_JoystickEventState", referenced from:
          _SDL_main in movehead.cpp.o
      "_SDL_JoystickOpen", referenced from:
          _SDL_main in movehead.cpp.o
      "_SDL_JoystickName", referenced from:
          _SDL_main in movehead.cpp.o
      "_SDL_JoystickNumAxes", referenced from:
          _SDL_main in movehead.cpp.o
      "_SDL_PollEvent", referenced from:
          _SDL_main in movehead.cpp.o
      "_SDL_JoystickGetButton", referenced from:
          _SDL_main in movehead.cpp.o
      "_SDL_JoystickGetAxis", referenced from:
          _SDL_main in movehead.cpp.o
      "_SDL_QuitSubSystem", referenced from:
          _SDL_main in movehead.cpp.o
    ld: symbol(s) not found for architecture i386
    clang: error: linker command failed with exit code 1 (use -v to see invocation)
    make[2]: *** [sdk/bin/movehead] Error 1
    make[1]: *** [CMakeFiles/movehead.dir/all] Error 2
    make: *** [all] Error 2
    [ERROR]     
                Error occured when building project movehead
    dhcp47-122:movehead yukke150$ sudo qibuild configure -c naoqi-sdk movehead --disable-assembly
    usage: qibuild [-h]

lipo -info /usr/local/lib/libSDL.dylib
Non-fat file: /usr/local/lib/libSDL.dylib is architecture: x86_64
lipo -info /usr/local/lib/libSDLmain.a
input file /usr/local/lib/libSDLmain.a is not a fat file
Non-fat file: /usr/local/lib/libSDLmain.a is architecture: x86_64 
```

我认为这些文件是 x86_64。怎么修？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-12T19:37:08.567

使用 SDL 的框架分布（在 SDL 网站上提供）为我工作在 x86 或 x86_64 中编译。以前我是从 brew 安装的，所以如果相同（或 Mac Port 等）不要忘记先卸载它们。

# ruby-on-rails - Ruby on Rails 更改页面上显示的行数和列数

> ID：16163675
> 
> 赞同：0
> 
> 时间：2013-04-23T07:41:56.187
> 
> 标签：ruby-on-rails

我是 Ruby on Rails 的新手，我创建了一个数据库并拥有它，以便有人可以将故事上传到数据库。它有标题和内容。它在页面上显示为 40 列 20 行的文本字段。我不知道如何更改它以使文本字段更大。

这是文件中的内容

`<div class="field"> <%= f.label :content %><br /> <%= f.text_area :content %> </div>`

这就是页面来源所说的在页面上创建的内容

`<div class="field"> <label for="story_content">Content</label><br /> <textarea cols="40" id="story_content" name="story[content]" rows="20">`

我想改变它，这样我就可以使场地更大，看起来更自然，而不是那么瘦和长。所以问题是它在哪里存储文本字段的大小以便我可以更改它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:52:35.690

为此，您可以这样使用：

```
<%= f.text_area :message, :id => "message_area", :cols => 10, :rows => 10 %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T09:25:12.860

最好在 .css 文件中使用输入字段的宽度和高度设置列和行 例如：

```
imput#post_content {
  width: 100px;
  height: 200px;
} 
```

它对于负责任的设计也很有用。
认为它应该有所帮助。

# python - 旋转动画板（python，pygame）

> ID：16163677
> 
> 赞同：0
> 
> 时间：2013-04-23T07:41:58.727
> 
> 标签：python, pygame

这更像是一个概念性问题：如果我想将整个棋盘（例如棋盘）旋转 90 度，我最好将棋盘的各个区域单独围绕其中心点旋转，还是有办法让我拍摄现场的“截图”并将其作为单张照片旋转？我会让代码将板的实际值与动画分开旋转（一旦动画完成，我将重新绘制屏幕，​​现在所有内容都在正确的位置）。

我希望我的问题是可以理解的。几天前我刚开始用python编程，到目前为止只做过基于文本的游戏，但想转向基于GUI的游戏，

提前谢谢您，非常感谢您的帮助，龙骨船

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T07:42:58.683

您应该完全旋转电路板。截取屏幕截图并旋转几乎与旋转棋盘对象一样费力。批处理对象并旋转它们将是一个解决方案。

编辑：我刚刚意识到 Pygame 是少数可能会错过批处理渲染的库之一。Pygame 很好，对于开始的学习曲线，但你最好使用其他库（这只是一个友好的建议）

# 友情建议

* * *

如果我真的想做一些很酷的事情（包括你规模的游戏开发），我会选择 Pyglet。它是跨平台的，不依赖于 Python 版本，就像所有其他版本一样，您可以直接连接到 OpenGL 库，使其速度非常快。它实际上很容易使用。

这是拖放的示例：

```
#!/usr/bin/python
import pyglet
from time import time, sleep

class Window(pyglet.window.Window):
    def __init__(self, refreshrate):
        super(Window, self).__init__(vsync = False)
        self.frames = 0
        self.framerate = pyglet.text.Label(text='Unknown', font_name='Verdana', font_size=8, x=10, y=10, color=(255,255,255,255))
        self.last = time()
        self.alive = 1
        self.refreshrate = refreshrate
        self.click = None
        self.drag = False

    def on_draw(self):
        self.render()

    def on_mouse_press(self, x, y, button, modifiers):
        self.click = x,y

    def on_mouse_drag(self, x, y, dx, dy, buttons, modifiers):
        if self.click:
            self.drag = True
            print 'Drag offset:',(dx,dy)

    def on_mouse_release(self, x, y, button, modifiers):
        if not self.drag and self.click:
            print 'You clicked here', self.click, 'Relese point:',(x,y)
        else:
            print 'You draged from', self.click, 'to:',(x,y)
        self.click = None
        self.drag = False

    def render(self):
        self.clear()
        if time() - self.last >= 1:
            self.framerate.text = str(self.frames)
            self.frames = 0
            self.last = time()
        else:
            self.frames += 1
        self.framerate.draw()
        self.flip()

    def on_close(self):
        self.alive = 0

    def run(self):
        while self.alive:
            self.render()
            # ----> Note: <----
            #  Without self.dispatc_events() the screen will freeze
            #  due to the fact that i don't call pyglet.app.run(),
            #  because i like to have the control when and what locks
            #  the application, since pyglet.app.run() is a locking call.
            event = self.dispatch_events()
            sleep(1.0/self.refreshrate)

win = Window(23) # set the fps
win.run() 
```

Pyglet 还使您能够进行批量渲染（这意味着您可以将指令以大块的形式发送到 GPU，而不是逐项发送，这样可以轻松快速轻松地完成复杂任务。您也可以`batch.rotate(90)`做到完毕）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T13:45:59.007

在 Pygame 中，您有一个在初始化和配置显示器时创建的表面。通常，人们会将其他图像直接blit到这个表面，然后更新显示以将图像渲染到屏幕上，但是没有理由不能创建另一个要绘制的表面，然后可以旋转并绘制到表面由显示器渲染。

```
screen = pygame.display.set_mode((500,500))
middle_man = pygame.Surface((500,500))

# draw stuff to middle_man here
....

# rotate middle_man
# note that this creates a padded surface if not rotating in 90 degree increments
rotated_middle_man = pygame.transform.rotate(middle_man, 45.0)

# draw middle_man back to the screen surface
crop_rect = pygame.Rect(rotated_middle_man.get_width() / 2 - screen.get_width() / 2,
                        rotated_middle_man.get_height() / 2 - screen.get_height() / 2,
                        screen.get_width(), screen.get_height())
screen.blit(rotated_middle_man, (0,0), crop_rect)

# update the screen
pygame.display.update() 
```

# asp.net - 列表 缓存、类迭代、计数属性

> ID：16163680
> 
> 赞同：2
> 
> 时间：2013-04-23T07:42:09.093
> 
> 标签：asp.net, episerver

嗨，

我创建了一个自定义列表，它试图缓存，但是从缓存中返回时，缓存的对象计数为 0。示例代码如下：

```
List<CategoryEntry> categs = (List<CategoryEntry>)EPiServer.CacheManager.Get("test");

if(categs == null || categs.Count == 0)
{
    categs = ConstructCategories();
    EPiServer.CacheManager.Add("test", categs);
}

//Further down displaying the categories 
```

用例：

第一个页面加载（构建后）缓存为空，类别将为空，

第二个页面加载缓存将是，但将从那里获取失败，因为`categs.Count will be 0`并一次又一次地重建缓存....

CategoryEntry 类：

```
 [serializable]
 public class CategoryEntry{
    public string Title { get; set; }
    public string URL { get; set; }
    public int CategoryId { get; set; }
    public int CompanyPageId { get; set; }
    public int ParentCategoryEntryId { get; set; }
    public int Indent { get; set; }

} 
```

问题应该是保存缓存 bc 时。它被保存为`object`，当我们得到我们 Cast 的缓存时`List<CategoryEntry>`。

还想通了，如果我用 a`List<string>`而不是使用，`List<CategoryEntry>` 那么缓存工作得很好！

正在使用的示例`List<string>`：

```
List<string> test = (List<string>)EPiServer.CacheManager.Get("sindex");
if (test == null)
{
   test = new List<string>();

   test.Add("item1");
   test.Add("item2");
   test.Add("item3");
   test.Add("item4");
   test.Add("item5");

   EPiServer.CacheManager.Add("sindex", test);
}
else
{
   Response.Write("It works: elements  "+ test.Count);
} 
```

另一个试用是我已经缓存了一个简单的实例`CategoryEntry`并且它也有效，问题是当我尝试另存为时`List<CategoryEntry>`

任何帮助将不胜感激，谢谢。

# java - 将菜单大小调整为图层

> ID：16163682
> 
> 赞同：0
> 
> 时间：2013-04-23T07:42:09.953
> 
> 标签：java, javafx-2, javafx

我有这个无法正常工作的 JavaFX 菜单：

```
public class CreatingMenus {

    // Generate Menu
    public void initMenu(Stage primaryStage, Group root, Scene scene) {

        // Call Menu Actions from Java Method MenuActions
        final MenuActions ma = new MenuActions();

        MenuBar menuBar = new MenuBar();

        // File menu - new, save, close, exit
        Menu menu = new Menu("File");
        menu.getItems().add(new MenuItem("New"));
        menu.getItems().add(new MenuItem("Save"));
        menu.getItems().add(new MenuItem("Close"));
        menu.getItems().add(new SeparatorMenuItem());

        MenuItem menuItem = new MenuItem("Exit");

        // Exit from the application
        menuItem.setOnAction(new EventHandler<ActionEvent>() {
            @Override
            public void handle(ActionEvent e) {
                // This Java Method is called from the Java Class MenuActions
                ma.programExit(); // Exit program
            }
        });

        menu.getItems().add(menuItem);

        menuBar.getMenus().add(menu);

        // Options menu - Preferences
        Menu options = new Menu("Options");
        options.getItems().add(new MenuItem("Preferences"));

        menuBar.getMenus().add(options);

        // Help menu - About
        Menu help = new Menu("Help");

        MenuItem helpItem = new MenuItem("About");

        // Exit from the application
        helpItem.setOnAction(new EventHandler<ActionEvent>() {
            @Override
            public void handle(ActionEvent e) {
                aboutDialog();
            }
        });

        help.getItems().add(helpItem);

        menuBar.getMenus().add(help);

        menuBar.prefWidthProperty().bind(primaryStage.widthProperty());

        menuBar.setLayoutX(0);
        menuBar.setLayoutY(0);

        root.getChildren().add(menuBar);

    }

    public void aboutDialog() {

        final int xSize = 640;
        final int ySize = 480;
        final String logoImage = "/logo.png";
        final Color backgroundColor = Color.WHITE;
        final String text = "SQL Browser";
        final String version = "Product Version: 1.0";
        final String license = "License Information";

        final Stage aboutDialog = new Stage();
        aboutDialog.initModality(Modality.WINDOW_MODAL);

        GridPane grid = new GridPane();
        grid.setAlignment(Pos.CENTER);
        grid.setHgap(10);
        grid.setVgap(10);
        grid.setPadding(new Insets(20, 20, 20, 20));

        // Logo
        Image image = new Image(getClass().getResourceAsStream(logoImage));
        ImageView logo = new ImageView(image);

        grid.add(logo, 1, 0);

        // Product name
        Text productName = new Text(text);
        productName.setFont(Font.font("Verdana", 12));
        grid.add(productName, 0, 2);

        // Product version
        Text productVersion = new Text(version);
        productVersion.setFont(Font.font("Verdana", 12));
        grid.add(productVersion, 0, 3);

        // Product License
        Text productLicense = new Text(license);
        productLicense.setFont(Font.font("Verdana", 12));
        grid.add(productLicense, 0, 4);

        // Close Button
        Button closeButton = new Button("Close");

        closeButton.setOnAction(new EventHandler<ActionEvent>() {
            @Override
            public void handle(ActionEvent arg0) {
                // Close the dialog when "Close" button is pressed
                aboutDialog.close();
            }
        });
        grid.add(closeButton, 5, 18);

        // Configure dialog size and background color
        Scene aboutDialogScene = new Scene(grid, xSize, ySize, backgroundColor);
        aboutDialog.setScene(aboutDialogScene);
        aboutDialog.show();

    }
} 
```

当我添加此菜单时，它会将其他组件覆盖到应用程序中，并且它们不负责，因为我认为它们位于该层后面。你能告诉我如何将这个菜单隔离在单独的层中，因为我不想将其他组件放在后面。

***编辑***

当我使用菜单代码时，我得到了这个结果：

![在此处输入图像描述](https://i.stack.imgur.com/gP7Gb.png)

当我删除菜单代码时，我得到了这个结果并且应用程序工作正常：

![](https://i.stack.imgur.com/OBKAa.png)

问题出在菜单代码的某个地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T21:56:50.927

*场景宽度绑定*

舞台宽度包含窗口边框和标题栏 - 与内部布局无关。

要使用绑定填充场景宽度，请将事物的首选大小绑定到场景大小而不是舞台大小：

```
menuBar.prefWidthProperty().bind(menuBar.getScene().widthProperty()); 
```

或者（通常首选）您可以使用自动执行大小调整的备用布局窗格和布局约束。对于您的特定布局，[BorderPane](http://docs.oracle.com/javafx/2/api/javafx/scene/layout/BorderPane.html)可能很有用。

您的实施可能有其他问题导致问题（我没有检查）。

*使用组进行布局*

您的 pastebin 代码使用一个[组](http://docs.oracle.com/javafx/2/api/javafx/scene/Group.html)作为主场景布局根。对于像您的示例那样布置灵活大小的屏幕，组通常是一个糟糕的选择。组不可重新调整大小。相反，建议使用上面提到的可调整大小的[布局窗格。](http://docs.oracle.com/javafx/2/layout/builtin_layouts.htm)

*工具支持*

1.  [ScenicView](http://fxexperience.com/scenic-view/)在调试现有布局问题方面非常有用。
2.  [SceneBuilder](http://www.oracle.com/technetwork/java/javafx/tools/index.html)非常适合各种布局的快速原型制作。

我强烈建议使用这些工具来帮助理解布局的工作原理，并为您提供自己调试布局问题所需的工具和知识。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T09:18:26.993

为我工作，没有任何改变。您可能应该检查您的 Java/JavaFx 版本。我在 Windows 上使用 1.7_17、64 位。 ![在此处输入图像描述](https://i.stack.imgur.com/Vxhm1.png)

我添加了一些图像（我没有你的），以确保你得到的行为不是因为它们。

# c# - 如何使用 ObjectListView 显示包含当前行索引的列？

> ID：16163685
> 
> 赞同：4
> 
> 时间：2013-04-23T07:42:14.763
> 
> 标签：c#, .net, winforms, objectlistview

我有以下课程：

```
public class people
{
    public string name { get; set; }
    public string hobby { get; set; }
} 
```

我想显示这样的列表：

```
no | name | hobby
-----------------------
01 | kim  | tv
02 | kate | pc
03 | kim  | tv
04 | kate | pc 
```

我知道实现这一目标的唯一方法是将人员类别更改为

```
public class people
{
    public string no{ get; set; }
    public string name { get; set; }
    public string hobby { get; set; }
} 
```

并循环`List<people>`设置每个`no`属性。

有没有更好的方法来添加索引号列？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T09:18:40.810

是的，您可以通过像这样处理“FormatRow”事件来实现您想要的：

```
objectListView1.FormatRow += delegate(object sender, FormatRowEventArgs args) {
    args.Item.Text = args.RowIndex.ToString();
}; 
```

这将在 ObjectListView**的第一列上**显示从零开始的索引。如果您希望它显示为 01, 02... 您可以指定格式字符串和偏移量，例如：

```
args.Item.Text = (args.RowIndex + 1).ToString("D2"); 
```

附带说明：使用 AspectGetter （这会更优雅）不可能实现这一点，因为在调用它时，该行尚未添加到 OLV，因此没有索引信息。

```
// !!! won't work !!!
indexColumn.AspectGetter += delegate(object rowObject) {
    return objectListView1.IndexOf(rowObject).ToString();
}; 
```

# performance - LoadRunner11.03性能问题？

> ID：16163689
> 
> 赞同：1
> 
> 时间：2013-04-23T07:42:21.047
> 
> 标签：performance, patch, loadrunner

最近，我从客户那里收到了一台安装了 LoadRunner 11.03（可能是补丁 3）的 PC，并通过长期测试观察了它的 Web 性能。在多用户测试中，它似乎无法正常工作，因为我的网络性能监视器无法达到任何限制，CPU 使用率、网络带宽、每分钟磁盘使用率、内存使用率。只有等待线程有点糟糕，但并不明显。这似乎是一种顺序行为，而不是并行访问。（没有发生错误。）

所以我虽然这不是服务器的问题，但是客户端有一些问题，因为某些原因阻止了并行访问。

我没有正确的 HP 护照 ID，无法访问 LoadRunner 补丁的网站。

如果不是 LoadRunner 补丁，尤其是补丁 4 或更高版本，请注意我，让它显示或不显示上述行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:31:32.020

好的，听起来您只是在 VUGen 中运行脚本。如果我猜是这种情况（根据您写的内容，如果我错了，请纠正我）您正在虚拟用户生成器中而不是在控制器中运行脚本。LoadRunner 实际上是一个包含多个应用程序的套件。Virtual User Generator 是脚本开发应用程序，是一个类似 Eclipse 的开发环境。它是单线程的，并且运行脚本仅用于单独测试脚本。

要运行多线程测试，您需要使用 Controller 应用程序并开发测试场景，将多个虚拟用户（并发线程的 LR 术语）分配给您要运行的每个脚本并从 Controller 执行测试。您可以将机器配置为负载生成器（另一个应用程序设置为作为进程或服务运行）并将测试从控制器推送到生成器。

# windows-phone-8 - Windows Phone 8 风格

> ID：16163690
> 
> 赞同：2
> 
> 时间：2013-04-23T07:42:21.810
> 
> 标签：windows-phone-8, windows-phone

我正在使用 xaml 开发 Windows Phone 8 应用程序。我几乎完成了我的项目。在测试中，我注意到当我通过设置更改手机的主题颜色时，应用程序主题颜色正在发生变化。我的应用程序需要红色主题（按钮选择、文本框边框、进度条颜色等）。无论手机的主题如何，我应该怎么做才能保持不变的风格？我应该为每个组件添加样式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T08:11:33.580

只需创建新的资源字典并将其包含在 App.xaml（合并字典）中。覆盖您将使用的所有控件的所有默认样式。现在，将这些样式用于所有控件，你会没事的。由于您的控件将从 App.xaml 中提取样式，因此您的应用程序将根据您的需要进行样式设置。

您可以在 C:\Program Files (x86)\Microsoft SDKs\Windows Phone\v8.0\Design 中找到样式，这会让您知道要更改的内容。或者使用 Expression Blend（编辑模板）获取一些样式。

# c - 无法正确写入 tiff 文件

> ID：16163694
> 
> 赞同：2
> 
> 时间：2013-04-23T07:42:33.857
> 
> 标签：c, gcc, graphics, x86-64, tiff

我有一个程序，它具有以下功能来写入 tiff 文件。但是，任何图片查看软件都无法识别生成的文件。这段代码有什么问题，为什么它没有生成正确的 tiff 文件？请注意，它使用`libtiff`库。

```
long WriteGrayscaleTIFF(char *filename, long width, 
        long height, long scanbytes, unsigned char *data)
{
    long y;
    double factor;
    long c;
    unsigned long cmap[256];           /* output color map */
    TIFF *outimage;                     /* TIFF image handle */

    /* create a grayscale ramp for the output color map */
    factor = (double)((1 << 16) - 1) / (double)((1 << 8) - 1);
    for (c = 0; c < 256; c++)
        cmap[c] = (long)(c * factor);

    /* open and initialize output file */
    if ((outimage = TIFFOpen(filename, "w")) == NULL)
        return(0);
    TIFFSetField(outimage, TIFFTAG_IMAGEWIDTH, width);
    TIFFSetField(outimage, TIFFTAG_IMAGELENGTH, height);
    TIFFSetField(outimage, TIFFTAG_BITSPERSAMPLE, 8);
    TIFFSetField(outimage, TIFFTAG_SAMPLESPERPIXEL, 1);
    TIFFSetField(outimage, TIFFTAG_PLANARCONFIG, PLANARCONFIG_CONTIG);
    TIFFSetField(outimage, TIFFTAG_COMPRESSION, COMPRESSION_LZW);
    TIFFSetField(outimage, TIFFTAG_ORIENTATION, ORIENTATION_BOTLEFT);
    TIFFSetField(outimage, TIFFTAG_PHOTOMETRIC, PHOTOMETRIC_PALETTE);
    TIFFSetField(outimage, TIFFTAG_COLORMAP, cmap, cmap, cmap);

    /* write the image data */
    printf( "height = %d, width = %d!\n", height, width );
    for (y = 0; y < height; y++) {
        if (!TIFFWriteScanline(outimage, data, y, 0)) 
        {
            printf( "TIFFClose!\n" );
            TIFFClose(outimage);
            return(0);
        }
        data += scanbytes;
    }

    /* close the file */
    TIFFClose(outimage);
    return(1);
} 
```

# batch-file - 在另一个批处理脚本中调用一个批处理脚本并对第一个脚本返回的值执行操作

> ID：16163696
> 
> 赞同：1
> 
> 时间：2013-04-23T07:42:35.760
> 
> 标签：batch-file

我有一个批处理脚本“first.bat”，它返回一个值列表和一个退出代码。我的任务是在另一个脚本“second.bat”中调用这个脚本，并且只有在调用第一个脚本没有返回错误代码的情况下，才对“first.bat”返回的值执行操作。

我调用了 first.bat 并将其输出存储在一个文本文件中。之后，我检查结果代码，如果结果代码是成功代码，则通过读取文本文件来执行操作。操作后我删除了文本文件

下面是 second.bat 的代码片段

```
@ECHO OFF

call first.bat >t

if /i %errorlevel%==100 (

 echo Performing operation

 for /F "tokens=1" %%a in (t) do echo %%a

 for /F "tokens=2" %%a in (t) do echo %%a

 del t

) else (
  echo Error occurred
) 
```

我想知道是否可以通过不将 first.bat 的输出写入文本文件来以某种优雅的方式完成相同的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:15:43.607

```
@ECHO OFF
SETLOCAL
for %%i in (var return1 return2 bat1err) do set "%%i="
FOR /f %%i IN ('call first') DO SET var=%%i
FOR /f "tokens=1,2" %%i IN ("%var%") DO set return1=%%i&set return2=%%j 
```

应该将 return1 和 return2 设置为您的两个值，但`ERRORLEVEL`生成的值`FIRST.bat`无法检索。

在您的原始代码中，`t`无论如何都会生成该文件 - 如果没有来自`first.bat`. 我对你的行为感到困惑，只有`t`在没有错误发生的情况下才删除......

所以——我们真正需要做的是改变`FIRST.bat`一点。

如果`first.bat`不使用 SETLOCAL，则

```
set bat1err=%errorlevel% 
```

在适当的时候将返回`bat1err`设置为错误级别。

如果`first.bat` **确实**使用 SETLOCAL，那么生活会变得更复杂一些

```
set bat1err=%errorlevel% 
```

在适当的点将以`bat1err`相同的方式设置，但您需要使用

```
ENDLOCAL&set bat1err=%bat1err% 
```

在退出之前。这是一个解析技巧，在首先解析行，然后执行的方式上兑现。发生的事情是该行实际上被执行为

```
endlocal&set bat1err=22 
```

或者其他什么，`BAT1ERR`在调用的上下文中设置，而不是被调用的批处理。

另一种方法是包含`%errorlevel%`在您的输出中，并将分析更改为

```
FOR /f "tokens=1,2,3" %%i IN ("%var%") DO set bat1err=%%i&return1=%%j&set return2=%%k 
```

或者，取决于输出的`first.bat`内容，您可以通过第三种方式进行操作：

如果`first.bat`没有输出错误但输出一行成功，

```
FOR /f %%i IN ('call first') DO SET var=%%i
if defined var (
 FOR /f "tokens=1,2" %%i IN ("%var%") DO set return1=%%i&set return2=%%j
 ) else (echo Error occurred) 
```

再一次`return`，`return2`并且`var`可以进行分析`IF DEFINED`以做出决策。

这真的取决于我们没有的信息。

# c# - C# WPF 关闭新用户控件

> ID：16163702
> 
> 赞同：0
> 
> 时间：2013-04-23T07:43:02.483
> 
> 标签：c#, wpf

我是 C# 的新手。我已经创建了主窗口，我正在添加用户控件以使用命令在屏幕之间切换：

```
Switcher.Switch(new NewPage()); 
```

Switcher 类是：

```
public static class Switcher
    {
        public static MainWindow pageSwitcher;

        public static void Switch(UserControl newPage)
        {
            pageSwitcher.Navigate(newPage);
        }

        public static void Switch(UserControl newPage, object state)
        {
            pageSwitcher.Navigate(newPage, state);
        }

    } 
```

但是如何退出用户控件？我希望完成它（如后退按钮）。我可以用：

```
Switcher.Switch(new PreviousPage()); 
```

但它会将新页面保留在内存中并且不会释放它。

NewPage 类的示例：

```
namespace MyProject.Screens
{

    public partial class NewPage : UserControl
    {
        public NewPage()
        {
            InitializeComponent();
        }

        private void back_button_Click_(object sender, RoutedEventArgs e)
        {
           //what to put here?
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:48:28.587

您真的应该尝试使用 WPF 提供的标准导航服务。这将为您提供可配置的 oage 缓存和日志。

[http://msdn.microsoft.com/en-GB/library/ms750478(v=vs.100).aspx](http://msdn.microsoft.com/en-GB/library/ms750478(v=vs.100).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T07:51:02.120

该框架为您完成了很多繁重的导航工作，包括您感兴趣的“返回”操作。

看看[http://msdn.microsoft.com/en-us/library/ms750478.aspx](http://msdn.microsoft.com/en-us/library/ms750478.aspx)

NavigationService.GoBack 是您将使用的。

*如果您正在开发 Windows 应用商店应用程序，请告诉我，因为我的答案会有所不同。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-13T22:24:16.740

试试这个：

```
 private void back_button_Click_(object sender, RoutedEventArgs e)
    {
       Window parentWindow = (Window)this.Parent;
       parentWindow.Close();
    } 
```

# php - 有没有办法将 NicEditor 放在子文件夹上而不是在演示页面文件夹之外？

> ID：16163705
> 
> 赞同：0
> 
> 时间：2013-04-23T07:43:23.343
> 
> 标签：php

您好，我只想知道是否可以将其放在子文件夹中？当我尝试将其放在子文件夹或页面的同一文件夹中时，它会显示正常的 textare。但是，每当我将它放在文件夹之外时，它都可以正常工作。

只求方便。

或者如果已经有答案，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:45:46.057

如果您放入`NicEditor`子文件夹，那么您必须为`NicEditor`.

# css - 仅在Firefox中的空白

> ID：16163706
> 
> 赞同：1
> 
> 时间：2013-04-23T07:43:24.467
> 
> 标签：css, firefox

**火狐：**

![在此处输入图像描述](https://i.stack.imgur.com/VZNYy.png)

**铬合金：**

![在此处输入图像描述](https://i.stack.imgur.com/dtrfi.png)

有谁知道为什么在 Firefox 中会发生这种情况？这让我发疯

这是CSS：

```
 #gallery_grid .gallery_grid_item,#related_topics .gallery_grid_item,#popular_galleries .gallery_grid_item {
position:relative;
overflow:hidden;
display:block;
text-decoration:none;
}

#gallery_grid .gallery_grid_item {
width:288px;
height:260px;
box-shadow:0 1px 3px rgba(34,25,25,0.4);
-webkit-box-shadow:0 1px 3px rgba(34,25,25,0.4);
-moz-box-shadow:0 1px 3px rgba(34,25,25,0.4);
transition:margin .1s;
-moz-transition:margin .1s;
-webkit-transition:margin .1s;
-o-transition:margin .1s;
margin:15px;
}

#gallery_grid .gallery_grid_item:hover {
margin:13px 15px 17px;
}

#gallery_grid .gallery_grid_image_wrapper {
width:100%;
height:190px;
overflow:hidden;
}

#gallery_grid .gallery_grid_image {
min-height:100%;
}

#popular_galleries .gallery_grid_item,#gallery_grid .gallery_grid_item {
border:1px solid #999;
}

#related_topics .gallery_grid_item {
border:0!important;
width:242px;
height:140px;
overflow:hidden;
background:#181818;
margin:0;
}

#popular_galleries .gallery_grid_item {
width:200px;
height:140px;
letter-spacing:-.05em;
background:#181818;
margin:0 0 15px;
}

#popular_galleries.upsell .gallery_grid_item {
height:200px;
}

#related_topics .gallery_grid_item:nth-child(even) {
border:1px solid #777!important;
border-width:0 1px;
}

#gallery_grid .gallery_grid_item:hover,#related_topics .gallery_grid_item:hover,#popular_galleries .gallery_grid_item:hover {
border:1px solid #86d3ff;
}

#gallery_grid .gallery_grid_image,#related_topics .gallery_grid_image,#popular_galleries .gallery_grid_image,#related_topics .gallery_list_image {
width:100%;
overflow:hidden;
opacity:.9;
filter:alpha(opacity=90);
transition:opacity .1s;
-moz-transition:opacity .1s;
-webkit-transition:opacity .1s;
-o-transition:opacity .1s;
text-align:center;
display:block;
margin:0 auto;
}

#gallery_grid .gallery_grid_item:hover .gallery_grid_image,#related_topics .gallery_grid_item:hover .gallery_grid_image,#popular_galleries .gallery_grid_item:hover .gallery_grid_image,#related_topics .gallery_list_item:hover .gallery_list_image {
opacity:1;
filter:alpha(opacity=100);
}

#popular_galleries .gallery_grid_info,#related_topics .gallery_grid_info {
width:100%;
position:absolute;
bottom:0;
font-weight:500;
}

#gallery_grid .gallery_grid_info {
height:62px;
}

#related_topics .gallery_grid_info {
height:54px;
}

#popular_galleries .gallery_grid_info {
height:58px;
}

#related_topics.grid .gallery_title,#popular_galleries .gallery_title {
color:#fff;
text-shadow:1px 0 1px #000;
font-size:15px;
line-height:18px;
}

#gallery_grid .gallery_title {
font-size:16px;
line-height:21px;
color:#000;
text-shadow:none;
font-weight:600;
border-top:2px solid #00a3ff;
padding:10px 15px 0;
}

#gallery_grid .gallery_title:hover {
text-decoration:underline;
}

#popular_galleries .gallery_title {
height:39px;
overflow:hidden;
}

.trans_bg {
width:100%;
height:100%;
background:#000;
opacity:.5;
filter:alpha(opacity=50);
}

.content_over_transparent {
position:absolute;
top:0;
width:100%;
height:100%;
overflow:auto;
box-sizing:border-box;
-moz-box-sizing:border-box;
}

#gallery_grid .content_over_transparent,#related_topics .content_over_transparent {
padding:10px 15px 0;
}

#popular_galleries .content_over_transparent {
padding:10px 10px 0;
} 
```

它是“content_over_transparent”。感谢任何帮助，谢谢！

编辑：

这是网格项 HTML（添加更多内容，因为它说它主要是代码）：

```
 <a class="gallery_grid_item" href="#">
<img class="gallery_grid_image" src="http://d1qfo1bk8s78mq.cloudfront.net/uimg/5f9aa039ecf554f73312d912e22c516e.x355" />
<div class="gallery_grid_info">
<div class="trans_bg"></div>
<div class="content_over_transparent">
<p class="gallery_title">Finding your Perfect Red</p>
</div>
</div>
</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T08:03:56.083

加入`overflow: hidden;`，`.content_over_transparent`它在 FF 和 Chrome 上都显示得很好：

```
.content_over_transparent {    
    position:absolute;
    top:0;
    width:100%;
    height:100%;
    overflow:auto;                 /* Delete that */
    box-sizing:border-box;
    -moz-box-sizing:border-box;
    overflow: hidden;              /* Add that */
} 
```

*顺便说一句，在您的问题中，您忘记将 HTML 代码包装在`#popular_galleries`.*

这是小提琴：[小提琴](http://jsfiddle.net/bigood/dWBGB/)

# c# - C++ x86/x64 结构对齐 + .NET AnyCPU C++ 库使用（调用/回调）

> ID：16163707
> 
> 赞同：6
> 
> 时间：2013-04-23T07:43:35.733
> 
> 标签：c#, c++, callback, 64-bit, memory-alignment

由于我之前的问题没有成功（“*使用 x86/x64 C API 的 C# AnyCPU 库 - 打包结构、调用和回调*”），我将写一个更简洁抽象的问题。

**图片：**

我工作的公司有一个可以移植到 64 位的软件。该软件由一个 BASE 库（带有 C API 的 C++）和 C API 上的两个包装器组成：一个 C++ 包装器和一个 .NET 包装器。

C++ BASE 库和 C++ WRAPPER 应该具有 x86/x64 构建配置。.NET WRAPPER 应该只有一个 AnyCPU 构建配置。

从 .NET WRAPPER 中选择正确的库已成功完成（两个 C++ BASE 库 (x86/x64) 都在两个单独的命名空间中加载，并且根据 IntPtr 的大小，在运行时调用正确的函数；这不一定需要两个库都在那里，但只有一个要使用）。

**问题：**

BASE 库中的所有结构都在 4 个字节上对齐：

```
#pragma pack(push,4) 
```

为了让代码在 64 位上编译时没有警告，我添加了选择性对齐（C++ BASE 和 C++ WRAPPER 的工作就像魅力一样）：

```
#ifdef WIN64
#pragma pack(push,8)
#else
#pragma pack(push,4)
#endif 
```

问题与 .NET 中的结构有关：

```
[StructLayout(LayoutKind.Sequential, Pack = 4, CharSet = CharSet.Unicode)]
    internal struct DBConnectionSettings{...} 
```

此结构不能有选择性打包，因为 AnyCPU 是唯一需要的 WRAPPER 配置。

在不同的 .NET 命名空间中创建在 8 个字节上对齐的单独结构非常困难（很多和很多性能损失）......**然而，这可能是我们可能会发现完全有效的唯一解决方案。**

回退到 x86 和 x64 的 4 字节对齐会发出很多警告，因为 100% 的结构对打包很敏感，尤其是对于一元运算符（问题只出现在 x64 解决方案配置中，4 字节对齐）。很多崩溃，除非我们添加虚拟成员，否则结构无法对齐。我应该提到，该结构是根据含义或与许可证/目标操作系统（ifdefs）相关的分组。为所有可能性添加填充（虚拟）成员将需要数月时间。

将所有内容对齐 8 个字节也不是一个解决方案，因为我们再次在整个地方崩溃 - 仅对于 x86，x64 工作得很好 - 结构对齐再次需要虚拟（填充）成员和基于大小的分组。

**结论（问题）：**

1) 对于 x86 和 x64 解决方案配置，C++ 代码是否有可能对齐为 4？如何实现？

2) x86 和 x64 对齐的最佳选择是什么？指针大小绝对应该决定对齐方式（在我看来）。我们正在寻求 FAST 软件，不一定是内存效率高的（目前内存指纹在 x86 系统上介于 15mb 和 2gb 之间）。

3) 承载函数指针的结构对于.NET 和C 之间的互操作有什么特殊需求？

**4）任何建议的替代方案都受到高度赞赏。**

我们已经在这个互联网（我们星球上的那个）上搜索了一个多月，但我们一无所获。一些架构师恳求使用选择性打包 (4/8)，而另一些架构师则认为该软件不是直截了当的，应该对其进行重构。做什么不是我的决定，但我可能会提出带有好论据的想法。该软件是在 2000 年代后期启动的，当时 STL 存在故障，因此 BASE 拥有自己的容器，针对天知道的情况进行了优化。我不应该在这里表​​达我的意见，因为它不是基督教的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T08:05:03.567

只需修复 C++ 端的对齐问题。x86 代码应该没有理由在 8 字节对齐时崩溃，x64 也不应该在 4 字节对齐时崩溃。`#pragma pack(push,4)`将是一个合适的方法。您可能需要另一个`#pragma pack`用于内部 SSE 代码，但该代码不应暴露给 .Net AnyCPU 代码。

如果您收到数百个警告（当然忽略性能警告），那么编译器同意我的评估，即您的代码是可疑的。

# excel - 在不更改任何数据的情况下将 xls 转换为 csv

> ID：16163709
> 
> 赞同：0
> 
> 时间：2013-04-23T07:43:37.100
> 
> 标签：excel

我有 xls 文件，在他里面是非常 unicode 的数据，还有这样的数据`0004`等等。

我需要将此文件转换为 csv 格式，但如果`save as csv`从 ms excel 简单，数据将被更改，unicode 符号转换为 - `???`，这样的数据`0004`，转换为`4`

是否可以将 xls 转换为 csv 而无需任何数据更改？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T07:46:43.370

这里提供三种方式：

I）`openoffice`您可以将任何`ms excel`格式转换为任何`excel`格式（`csv`也），您也可以选择字符编码、分隔符等`utf-8`。

1）打开xls文件`openoffice`

2) 文件/另存为

3）选择输出格式（CSV）

4）点击保存

5) 出现一个对话框，选择字符编码、分隔符和其他...

II）你也可以这样做`ms office >= 2010`：

[http://www.excelforum.com/excel-general/400043-csv-and-unicode-or-utf-8-problem.html](http://www.excelforum.com/excel-general/400043-csv-and-unicode-or-utf-8-problem.html)

III）或者如果你有`notepad++`你可以转换“错误”字符编码`csv`文件的字符编码。[字符编码，UTF 还是 ANSI？](https://stackoverflow.com/questions/2631870/character-encoding-utf-or-ansi)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-14T11:29:20.007

按以下方式将列转换为文本，然后另存为 csv。为我解决问题。

1.  选择包含此类数据的列
2.  打开数据>>文本到列
3.  选择分隔符>>下一步>>取消选择所有分隔符>>下一步>>选择文本作为列数据格式并完成。
4.  另存为 csv

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-01T13:21:29.293

还有第四个解决方案：http: [//xls2csv.genxcrowd.com/features](http://xls2csv.genxcrowd.com/features)

我用这个程序将很多文件转换为“一次”。

有很多优点：

1.  导出是完全可定制的：编码、分隔符、引号等。
2.  您可以在文件夹上执行它并为结果定义目标文件夹
3.  您可以使用命令行执行它

***一些截图：***

*执行面板：*

[![在此处输入图像描述](https://i.stack.imgur.com/VGYoQ.png)](https://i.stack.imgur.com/VGYoQ.png)

*配置面板：*

[![在此处输入图像描述](https://i.stack.imgur.com/3Uwjc.png)](https://i.stack.imgur.com/3Uwjc.png)

# c# - 如何借助 WSDL 创建和发送 SOAP 请求并接收 SOAP 响应？

> ID：16163711
> 
> 赞同：0
> 
> 时间：2013-04-23T07:43:45.187
> 
> 标签：c#, asp.net, wcf, soap, wsdl

我对 WCF 很陌生。我想向 Web 服务发送 SOAP 请求并接收来自该服务的响应。WSDL 是：[http](http://content.domain.com/ContentService?wsdl) ://content.domain.com/ContentService?wsdl 。我已将此 wsdl 添加到 ServiceReference。下一步是什么 ？

我需要构建的 SOAP 请求应该看起来像 -

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"xmlns:con="http://content.domain.com" xmlns:api="http://api.content.domain.com">
<soapenv:Header />
<soapenv:Body>
<con:get1>
<con:in0>
<api:AID>89575</api:AID>
<api:clientLoginID>abc</api:clientLoginID>
<api:domain>en</api:domain>
</con:in0>
</con:get1>
</soapenv:Body>
</soapenv:Envelope> 
```

对此请求会有一个 xml 响应，我需要对其进行解析并从中获取值。如何在 c# 中实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:50:45.533

阅读以下[文章](http://msdn.microsoft.com/en-us/library/ms730144.aspx)

```
//Step 1: Create an instance of the WCF proxy.
CalculatorClient client = new CalculatorClient();

// Step 2: Call the service operations.
// Call the Add service operation.
double value1 = 100.00D;
double value2 = 15.99D;
double result = client.Add(value1, value2); 
```

# javascript - 单击按钮后 Datetimepicker 不为空？

> ID：16163714
> 
> 赞同：4
> 
> 时间：2013-04-23T07:43:50.800
> 
> 标签：javascript, jquery, jquery-ui, datetimepicker

`datetimepickers`单击重置按钮后如何设置两个的空值：

```
$("#reset").click(function () {
    $(".k-datetimepicker input").val('');
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T07:47:07.823

您需要额外的`)`来关闭该`click`功能：

```
$("#reset").click(function() {
   $(".k-datetimepicker input").val('');  
}); 
```

[http://jsfiddle.net/ZX6mF/](http://jsfiddle.net/ZX6mF/)

# jsf - h:selectOneRadio 没有设置需要的值

> ID：16163715
> 
> 赞同：2
> 
> 时间：2013-04-23T07:43:52.410
> 
> 标签：jsf

我有相同的代码示例：

```
<h:selectOneRadio class="answers" id="radioAnswer" value="#{answers.check}" 
    onclick="dataTableSelectOneRadio(this)" rendered="#{main.questionType == 'SINGLE'}">
    <f:selectItem itemValue="true" itemLabel="#{answers.ansValue}"/>
</h:selectOneRadio> 
```

但是当我试图提交它时，它抛出了这个：

```
javax.faces.component.UpdateModelException: javax.el.ELException:
/.xhtml @56,92 value="#{answers.check}": Can't set property 'check' on
class '...' to value 'null'. 
```

`answer.check`具有布尔类型。从 Tomcat 7.x 迁移到 WebLogic 12c 后，它停止正常工作。

# ruby-on-rails - Ruby on Rails - 如何重新排列评论视图？

> ID：16163718
> 
> 赞同：0
> 
> 时间：2013-04-23T07:43:59.457
> 
> 标签：ruby-on-rails, comments

我创建了一个应用程序，用户可以在其中创建项目并对这些项目发表评论。现在，我可以让用户在每个项目页面上发表评论。

问题 1：订单当前显示评论，然后在此下方显示提交新评论的选项。当我尝试重新排列它以使其在评论列表之前显示提交评论时，我得到 NoMethodError: undefined method `name' for nil:NilClass。我需要做什么才能使评论提交框位于当前评论上方。

问题 2：现在，评论被列出，最新的在底部。如何翻转订单以使最近的订单在最前面？

评论.rb

```
class Comment < ActiveRecord::Base
  attr_accessible :content, :project_id, :user_id
  validates :content, presence: true

  belongs_to :project
  belongs_to :user

  scope :newest, order("created_at desc")
end 
```

评论控制器.rb

```
class CommentsController < ApplicationController
  before_filter :authenticate_user! 

  def create
    project = Project.find(params[:project_id])
    @comment = project.comments.create!(params[:comment])
    redirect_to project_path(project)
  end
end 
```

项目/show.html.erb

```
 <!-- Show Comments -->
          <p class="comment_header">Comments:</p>

          <% if @project.comments.blank? %>     
            <p>No comments made yet for this project.</p>        
          <% else %>        
            <% @project.comments.each do |comment| %>   
              <div class="comments">        
                <p><%= comment.content %></p>
                <span>By <%= link_to comment.user.name, comment.user %> <%= time_ago_in_words(comment.created_at) %> ago</span>
              </div>
            <% end %>       
          <% end %>

          <!-- Add Comments -->

          <% if signed_in? %>
            <p class="comment_header">Add Comment:</p>

            <span class="comment">
                <%= form_for([@project, @project.comments.build]) do |f| %>
                  <div class="field">
                    <%= f.text_area :content, :class => "span7", :rows => "3" %>
                  </div>

                  <%= f.hidden_field :user_id, :value => current_user.id %>

                  <div class="actions">
                    <%= f.submit "Add Comment", :class => "btn btn-header" %>
                  </div>
                <% end %>
            </span>

          <% else %>

            <p class="comment_header"><%= link_to 'Sign in', new_user_session_path %> to post comments.</p> 

          <% end %>
          <!-- end of comments section --> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T07:48:35.067

1）这不需要什么特别的东西。我认为您只是在标记中出错（... html.erb）。确保您使用整个 form_for / end 部分，并且不要将 f/text_area 移到该部分之外。

2）用于以相反的顺序排序（最后一条评论在前）。在评论模型中的 created_at 日期对 DESC 进行排序。

评论.rb

```
scope :newest, order("created_at desc") 
```

show.html.erb（固定显示这个）

```
<% @project.comments.newest.each do |comment| %> 
```

# yii - 在 renderPartial 模式下运行应用程序

> ID：16163724
> 
> 赞同：0
> 
> 时间：2013-04-23T07:44:13.407
> 
> 标签：yii

有没有办法以 renderPartial 方式运行应用程序，而不是使用该`renderPartial()`函数加载所有视图？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T09:12:27.617

我假设您想使用没有布局的视图：您应该`layout`在控制器中简单地设置为 false，例如：

```
Class MyController extends CController
{
  public $layout=false;
} 
```

如果您想将它用于所有控制器，您应该创建自己的基本控制器类：

```
Class Controller extends CController
{
  public $layout=false;

  // and if needed you can override render method
  public function render($view,$data=null,$return=false)
  {
     // do what you want
  }
} 
```

那么你所有的控制器都应该扩展这个类；

```
Class MyController extends Controller
{
} 
```

# perl - 将 Perl+shell 脚本转换为 EXE

> ID：16163725
> 
> 赞同：0
> 
> 时间：2013-04-23T07:44:14.037
> 
> 标签：perl, shell, perl2exe

我有一个调用 shell 命令的 perl 脚本，它在 cygwin 中运行。

前任

`cat a.txt | egrep $a`

目前我需要将其转换为 EXE 并运行 win 7。我使用 perl2exe 将其转换为在安装的 cygwin 上运行良好。这在没有安装 cygwin 的情况下不起作用。

有什么方法可以将脚本转换为 exe 并在没有 cygwin 帮助的情况下运行。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T20:14:30.210

您的问题是 perl2exe 和 PAR::Packer 都会包装 perl 的东西，但不会（默认情况下）将您的 bash shell 和人造 linux 环境全部包装到一个小的 .exe 文件中。您也许可以强制它吞下 cygwin.dll + bash.exe + cat.exe + egrep.exe 并将它们组合成一个可运行的整体。祝你好运。

作为替代方案，您是否考虑过自己阅读文件（以替换 cat 的功能）并将其内容发送到

1.  egrep 的 Windows 特定（非 cygwin）端口（仅 1 个额外的 .exe，而不是 3 个）
2.  在 perl 中实现您需要的 egrep 功能的子集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T08:00:27.420

看看[PAR::Packer](https://metacpan.org/module/PAR%3a%3aPacker)

它将 Perl 解释器和所有必需的模块打包到一个可执行包中。

# sqlite - 如何将图片存储在sqlite表中？

> ID：16163728
> 
> 赞同：0
> 
> 时间：2013-04-23T07:44:24.820
> 
> 标签：sqlite, xamarin.android, blob, mvvmcross

我正在尝试将图片存储在 sqlite 表中。我正在使用 mvvmcross vnext 及其插件 sqlite。

我在数据库中的表“图像”中有这个类图像：

```
public class Image : Model
{
    [IsNullable(false)]
    public int ImageID { get; set; }

    [IsNullable(false), MaxLength(100)]
    public string UrlImage { get; set; }

    [IsNullable(false), MaxLength(100)]
    public string Name { get; set; }
} 
```

我需要为图片数据添加一个属性。我是否以`byte [ ]`格式存储图片？（我听说过“ `BLOB`”）可以用 ORM 做到这一点吗？或者我需要直接使用 sql 查询吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T07:49:24.910

您可以将文件（包括图像）存储在 byte[max] 列中。读取图像文件的字节并将它们写入数据库中的该列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T08:19:13.953

对于 SQLite-net，这个测试类提供了一些很好的读写字节数组的例子 - [https://github.com/praeclarum/sqlite-net/blob/master/tests/ByteArrayTest.cs](https://github.com/praeclarum/sqlite-net/blob/master/tests/ByteArrayTest.cs)

它使用如下数据类：

```
public class ByteArrayClass
{
    [PrimaryKey, AutoIncrement]
    public int ID { get; set; }

    public byte[] bytes { get; set; }
} 
```

# parallel-processing - 在 SPD 中启动并行工作流是个好主意吗？

> ID：16163729
> 
> 赞同：0
> 
> 时间：2013-04-23T07:44:25.273
> 
> 标签：parallel-processing, workflow, sharepoint-designer

在 SPD 中启动并行工作流是个好主意吗？我想开发一个工作流，其中用户可以同时多个请求，并且基于工作流类型工作流应该启动吗？1\. 我怀疑我将如何跟踪这些工作流程？2\. 如果用户想知道他的请求状态然后请求被部分批准，假设 2 个工作流已经完成，而其他工作流正在等待批准，那么报告呢？3\. 这些工作流的管理如何（在调试的情况下）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:41:59.940

如果您指的是并行块，它仍然取决于您的要求。请注意，并行块用于连续运行多个操作/批准。这通常在您有一个包含许多步骤的复杂工作流程并且不需要彼此完成以继续进行下一个非并行操作时完成。

要回答您的其他问题：

1.  在 SharePoint Designer 工作流中，您可以添加有关每个操作的工作流历史记录的详细信息，以便了解已完成的特定操作
2.  您可以为您的列表/文档库创建一个特定视图，显示每个请求的批准状态，以便用户可以从哪个批准者那里看到该操作仍处于待处理状态。
3.  有多种调试工作流的方法。简单的方法是使用工作流历史项目，同时还有一种方法可以通过将它们转换为 Windows 工作流并在 Visual Studio 中运行它们来调试它们。这实际上取决于您要执行的特定调试。

# javascript - 将选择列表值分配给数组

> ID：16163732
> 
> 赞同：7
> 
> 时间：2013-04-23T07:44:35.303
> 
> 标签：javascript, html, arrays, selectlist

我有一个在脚本中初始化的数组

```
var listarray = new Array(); 
```

并有一个动态创建的选择列表---

```
<select multiple size=6 width=150 style="width:150px" name="ToLB" >
</select> 
```

我的问题是如何将选择列表的所有值分配给数组。提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T07:58:07.173

你可以这样做**：**

**jQuery-**

```
var optionVal = new Array();
    $('select option').each(function() {
            optionVal.push($(this).val());
        }); 
```

**Javascript-**

```
var x = document.getElementById("mySelect"); 
var optionVal = new Array();
for (i = 0; i < x.length; i++) { 
    optionVal.push(x.options[i].text);
} 
```

这会将您选择框中的所有选项存储在数组中`optionVal`。

希望它可以帮助你。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-23T07:53:48.390

您可以使用`getElementsByTagName`来获取所有的`selectbox`as 对象。

```
var el = document.getElementsByTagName('select') 
```

在 jQuery 中，您可以按如下方式进行操作。

```
var arrayOfValues = $("select").map(function() { return this.value; }); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-23T08:00:01.603

使用纯 javascript 这对你有用。现在，我假设您的选择中至少有一些选项

# html

```
<select id="selecty" multiple size=6 width=150 style="width:150px" name="ToLB" >
    <option value="monkey">Monkey</option>
</select> 
```

# javascript

```
var listarray = new Array();
//NOTE: Here you used new as a variable name. New is a reserved keyword so you cant use that as a variable name.

var select = document.getElementById('selecty'); // get the select list

for(var i = 0; i < select.options.length; i++){
   listarray.push(select.options[i].value);
}
console.log(listarray);
>> ["monkey"] 
```

在这里提琴：

[http://jsfiddle.net/mQH7P/](http://jsfiddle.net/mQH7P/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-23T08:18:14.043

```
<html>
<body>
<!--  Any list (The main thing that it was built before the launch of the functions of the script) -->
<select id = "mySelect" multiple size=6 width=150 style="width:150px" name="ToLB" >
    <option value="1111"></option>
    <option value="12"> </option>
    <option value="123"></option>
</select>
<script>
        var valuesList = new Array(); 
        var mySelect = document.getElementById("mySelect"); 
        var currentOption = mySelect.childNodes; 
        for (var i=1; i<currentOption.length; i = i+2) { // i+2 needed in order to pass text nodes
            valuesList[i-1]=currentOption[i].value;
        }
</script>
</body>
</html> 
```

这些值将存储在您的数组中。我希望我能正确理解你。

# c# - 动态提供类名

> ID：16163733
> 
> 赞同：0
> 
> 时间：2013-04-23T07:44:36.697
> 
> 标签：c#, asp.net-mvc-3

我有一个如下的类，其中定义了页面的权限 ID。传递权限 id 我从数据库中获得权限。

```
public class PermissionIdConstants
{
  public class SubMenus
  {
    public class MySubMenu1{
      public const int TRAINING = 26;
      public const int USER_INFO = 3;
    }

    public class MySubMenu2{
      public const int TASKS = 2;
      public const int USER_INFO = 5;   
    }  
  }
} 
```

现在根据单击哪个子菜单，我必须将权限 ID 传递给如下方法

单击 SubMenu2 User_Info 时

```
getPermissions(PermissionIdConstants.SubMenus.MySubMenu2); 
```

单击 SubMenu1 User_Info 时

```
getPermissions(PermissionIdConstants.SubMenus.MySubMenu1); 
```

现在我想知道 submneu 是否可以动态传递。类似于

```
getPermissions(PermissionIdConstants.SubMenus. + mysubmenu ); 
```

如果是枚举，我可以使用 Enum.parse。但我不太确定这是否可以在这里完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:51:18.697

即使您应该`enum`在这种情况下使用 an，我也会尝试为您提供当前问题的解决方案。

假设你的`getPermissions`函数有这样的东西作为它的当前签名：

```
bool getPermissions(Type menu) 
```

您可以将其更改为类似的内容并使用[Type.GetType](http://msdn.microsoft.com/fr-fr/library/vstudio/w3f99sx1.aspx)函数：

```
bool getPermissions(string menuStr)
{
    Type menu = Type.GetType(menuStr);
    ...
} 
```

然后你像这样使用它：

```
getPermissions("PermissionIdConstants.SubMenus." + mysubmenu); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:51:43.770

你可以使用：

```
getPermissions(Type.GetType("PermissionIdConstants.SubMenus." + mysubmenu )); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T07:55:50.663

如果你想这样访问它们，也许你应该这样*存储*它们：

```
public static class PermissionIdConstants
{
  public static class SubMenus
  {
    public static Dictionary<string,int> MySubMenu1 = new Dictionary<string,int>()
    {
        {"TRAINING",26},
        {"USER_INFO",1},
    };
    public static Dictionary<string,int> MySubMenu2 = new Dictionary<string,int>()
    {
        {"TASKS",2},
        {"USER_INFO",5},
    };
  }
} 
```

用法：

```
getPermissions(PermissionIdConstants.SubMenus[mysubmenu]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T07:58:22.680

有几种方法可以实现您所描述的内容。

使用接口，您可以在所有子菜单类上实现此功能。然后，您将通过他们的界面引用他们。例如：

```
public interface ISubMenu {
    //Everything you put in here (methods, properties, ...) means that you
    //a. can still use it when your submenu is cast as an object of ISubMenu type
    //b. MUST implement these features on the classes that have your interface implemented.

    //e.g:

    public string GetMenuId(); 
}

public class SubMenus
{
    public class MySubMenu1 : ISubMenu {
      public const int TRAINING = 26;
      public const int USER_INFO = 3;

      public string GetMenuId()
      {
        return "1";
      }
    }

    public class MySubMenu2 : ISubMenu {
      public const int TASKS = 2;
      public const int USER_INFO = 5;  

      public string GetMenuId()
      {
        return "2";
      } 
    }  
} 
```

现在您可以使用接口名称作为类型来调用方法：

```
public string GetPermissions(ISubMenu submenu)
{
    var menu_id = submenu.GetMenuId(); 
    //this is the only function you can call at the moment
    //since this is the only one we defined in the interface.
}

//Somewhere else in the code:
var permissions = GetPermissions( new SubMenu1() ); 
```

您也可以使用[generics](http://msdn.microsoft.com/en-us/library/ms379564%28v=vs.80%29.aspx)，但我认为在这种情况下它们并不是您真正想要的。

**编辑**

我刚刚注意到您还试图在不创建新实例的情况下传递您的类。如果这是您想要的，您应该将它们设为[静态](http://msdn.microsoft.com/en-us/library/79b3xss3%28v=vs.80%29.aspx)或[单例](http://msdn.microsoft.com/en-us/library/ff650316.aspx)。

不过，这可能超出了当前问题的范围。

# c++ - 为什么在 QT SDK 5.0.2 的 Qt 模块中的 Qt 项目设置中某些功能被禁用？

> ID：16163734
> 
> 赞同：0
> 
> 时间：2013-04-23T07:44:36.913
> 
> 标签：c++, qt, visual-studio-2012, qt5

请谁能告诉我为什么在 Visual Studio 中创建项目时以及在 QT 模块中的 QT 项目设置中禁用某些功能：3D、蓝牙、联系人、位置、管理器、声子、发布和订阅、传感器、服务框架、系统信息，维西特？我正在使用 Visual Studio 2012、Qt 5.0.2 LGPL、Windows 8 x64。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T10:29:30.713

这些模块不是 Qt 5.0 的一部分，要么是因为它们的质量还不够好，要么是因为没有人积极维护它们。Qt Sensors 将出现在 Qt 5.1 中，但您列表中的其他传感器不会出现。

官方 Qt 5.0 模块列表位于[http://qt-project.org/wiki/Qt_5_Structure](http://qt-project.org/wiki/Qt_5_Structure)

Phonon 不再是 Qt 的一部分——它由 KDE 维护。然而，Qt Multimedia 模块旨在替代 Phonon。

# ios - 更改 UIActionSheet 按钮中的文本颜色

> ID：16163737
> 
> 赞同：38
> 
> 时间：2013-04-23T07:44:52.743
> 
> 标签：ios, uiactionsheet

在我的项目中，我`UIActionSheet`用于显示某些排序类型。我想更改操作表按钮中显示的文本的颜色。我们如何更改文本颜色？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-10-03T20:24:42.173

**iOS 8：** `UIActionSheet`已弃用。`UIAlertController`尊重`-[UIView tintColor]`，所以这有效：

```
alertController.view.tintColor = [UIColor redColor]; 
```

更好的是，在您的应用程序委托中设置整个窗口的色调：

```
self.window.tintColor = [UIColor redColor]; 
```

**iOS 7：**在您的操作表委托中，实现`-willPresentActionSheet:`如下：

```
- (void)willPresentActionSheet:(UIActionSheet *)actionSheet
{
    for (UIView *subview in actionSheet.subviews) {
        if ([subview isKindOfClass:[UIButton class]]) {
            UIButton *button = (UIButton *)subview;
            [button setTitleColor:[UIColor redColor] forState:UIControlStateNormal];
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-08-21T22:28:22.517

在 iOS 8 中，这些都不再适用了。UIActionSheet 文本似乎从 window.tintColor 获取颜色。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-12-12T06:52:00.563

这在 iOS8 中对我有用

```
[[UIView appearanceWhenContainedIn:[UIAlertController class], nil] setTintColor:[UIColor redColor]]; 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-10-31T13:11:30.320

如果您想浏览`UIActionSheet`的子视图，则不应直接设置 的文本颜色，`UILabel`而应使用该`UIButton` `setTitleColor:forState`方法。否则，初始颜色将在诸如 UIControlEventTouchDragOutside 之类的事件时重新设置。

这是正确的方法，重用jrc的代码：

```
- (void)willPresentActionSheet:(UIActionSheet *)actionSheet
{
    for (UIView *subview in actionSheet.subviews) {
        if ([subview isKindOfClass:[UIButton class]]) {
            UIButton *button = (UIButton *)subview;
            [button setTitleColor:[UIColor redColor] forState:UIControlStateNormal];
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2017-02-02T17:10:24.460

可能是一个迟到的答案，但我认为它可以帮助某人。

**iOS 8：** 您可以简单地使用样式初始化您的 UIAlertAction：**UIAlertActionStyleDestructive**，如下所示：

```
UIAlertAction *delete = [UIAlertAction actionWithTitle:@"Delete" style:UIAlertActionStyleDestructive handler:^(UIAlertAction *action){

   // your code in here   

}]; 
```

这将使按钮的文本默认为红色。

[![在此处输入图像描述](https://i.stack.imgur.com/jEQZz.png)](https://i.stack.imgur.com/jEQZz.png)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2019-10-10T06:30:34.793

要在警报操作中更改特定按钮的颜色，请使用此

```
let cancelAction = UIAlertAction(title: "Success", style: .cancel, handler: nil)
cancelAction.setValue(UIColor.green, forKey: "titleTextColor") 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-11-01T18:21:30.957

@jrc 解决方案有效，但是当您点击按钮时，titleLabel 颜色会发生变化。试试这个以在所有状态下保持相同的颜色。

```
- (void)willPresentActionSheet:(UIActionSheet *)actionSheet
{     
 UIColor *customTitleColor = [UIColor greenColor];
      for (UIView *subview in actionSheet.subviews) {
        if ([subview isKindOfClass:[UIButton class]]) {
          UIButton *button = (UIButton *)subview;

          [button setTitleColor:customTitleColor forState:UIControlStateHighlighted];
          [button setTitleColor:customTitleColor forState:UIControlStateNormal];
          [button setTitleColor:customTitleColor forState:UIControlStateSelected];
        }
      }
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-09-27T14:16:31.467

Swift **3**的解决方案。更改所有颜色。

```
UIView.appearance(whenContainedInInstancesOf: [UIAlertController.self]).tintColor = .yellow 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-04-23T07:49:39.873

**编辑**

这是一个类似的问题：[如何在 UIActionSheet 中自定义按钮？](https://stackoverflow.com/questions/6568308/how-to-customize-buttons-in-uiactionsheet)

尝试使用`appearance`协议 [**不工作**]

```
 UIButton *btn = [UIButton appearanceWhenContainedIn:[UIActionSheet class], nil];
 [btn setTitleColor:[UIColor redColor] forState:UIControlStateNormal]; 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-09-22T04:28:58.760

将此用于 ios 8 及更高版本

```
SEL selector = NSSelectorFromString(@"_alertController");
if ([actionSheet respondsToSelector:selector])
{
    UIAlertController *alertController = [actionSheet valueForKey:@"_alertController"];
    if ([alertController isKindOfClass:[UIAlertController class]])
    {
        alertController.view.tintColor = [UIColor blueColor];
    }
}
else
{
    // use other methods for iOS 7 or older.
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-06-22T12:08:35.367

UIAppearance 可以处理这个：

```
[[UIButton appearanceWhenContainedIn:[UIActionSheet class], nil] setTitleColor:[UIColor cyanColor] forState:UIControlStateNormal]; 
```

比浏览子视图要容易得多，但我还没有在 iOS 6 或更早版本上测试过这个解决方案。

# jquery-mobile - Backbone 和 jQuery Mobile：所有页面上的相同标题

> ID：16163739
> 
> 赞同：2
> 
> 时间：2013-04-23T07:45:01.810
> 
> 标签：jquery-mobile, backbone.js, asynchronous, header, footer

我负责 Web 应用程序的开发。

我做了很多研究，最后决定用 Backbone 和 jQuery Mobile 开发这个 webapp。您当然知道，jQuery Mobile 和 BackBone 之间存在一些路由冲突。我决定使用主干路由，因此我禁用了 jQM 路由，这要归功于本教程：[http](http://coenraets.org/blog/2012/03/using-backbone-js-with-jquery-mobile/) ://coenraets.org/blog/2012/03/using-backbone-js-with-jquery-mobile/ 。

我开始构建一个只有 3 个视图和一个路由器的示例应用程序（没有 jQM）。它完美地工作。您可以在此处运行此应用程序。我自愿为下一部分放置 jQuery Mobile HTML 标签。

**现在，我想对 jQuery Mobile 做同样的事情：为所有模板保留相同的标题。**上一个教程确实帮助了我，但我仍然对 jQM 的 DOM 系统感到困惑。

我试过的是在这里：

**index.html** ( [pastebin.com/PcHDaZ2P](http://pastebin.com/PcHDaZ2P) )

```
<head>
    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/jquery.mobile-1.0.1.min.css"/>

    <!-- The Templates -->
    <script type="text/template" id="home">
            <p>This is Home page.</p>
            <ul data-role="listview"  data-inset="true">
                <li><a href="#page1">Page 1</a></li>
                <li><a href="#page2">Page 2</a></li>
            </ul>
    </script>

    <script type="text/template" id="page1">
            <p>This is Page 1.</p>
            <ul data-role="listview" data-inset="true">
                <li><a href="#">Home</a></li>
                <li><a href="#page2">Page 2</a></li>
            </ul>
    </script>

    <script type="text/template" id="page2">
            <p>This is Page 2.</p>
            <ul data-role="listview" data-inset="true">
                <li><a href="#">Home</a></li>
                <li><a href="#page1">Page 1</a></li>
            </ul>
    </script>

    <!-- The Scripts -->
    <script src="lib/jquery-1.7.1.min.js"></script>
    <script src="js/jqm-config.js"></script>
    <script src="lib/jquery.mobile-1.0.1.min.js"></script>
    <script src="lib/underscore-min.js"></script>
    <script src="lib/backbone-min.js"></script>
    <script src="js/main.js"></script>
</head>

<body>
    <!-- The fixed header -->
    <div data-role="header">
            <a href="#" data-icon="home">Home</a>
            <h1>Header</h1>
    </div>

    <!-- THE CONTENT FOR THE TEMPLATES -->
    <div data-role="content" id="app-content">
    </div>
</body> 
```

**main.js** ( [pastebin.com/2GXurpby](http://pastebin.com/2GXurpby) )

```
window.HomeView = Backbone.View.extend({

    template:_.template($('#home').html()),

    render:function (eventName) {
        $(this.el).html(this.template());
        return this;
    }
});

window.Page1View = Backbone.View.extend({

    template:_.template($('#page1').html()),

    render:function (eventName) {
        $(this.el).html(this.template());
        return this;
    }
});

window.Page2View = Backbone.View.extend({

    template:_.template($('#page2').html()),

    render:function (eventName) {
        $(this.el).html(this.template());
        return this;
    }
});

var AppRouter = Backbone.Router.extend({

    routes:{
        "":"home",
        "page1":"page1",
        "page2":"page2"
    },

    initialize:function () {
        // Handle back button throughout the application
        $('.back').live('click', function(event) {
            window.history.back();
            return false;
        });
        this.firstPage = true;
    },

    home:function () {
        console.log('#home');
        this.changePage(new HomeView());
    },

    page1:function () {
        console.log('#page1');
        this.changePage(new Page1View());
    },

    page2:function () {
        console.log('#page2');
        this.changePage(new Page2View());
    },

    changePage:function (page) {
        console.log($(page.el));
        $(page.el).attr('data-role', 'page');
        page.render();
        $('#app-content').append($(page.el));
        var transition = $.mobile.defaultPageTransition;
        // We don't want to slide the first page
        if (this.firstPage) {
            transition = 'none';
            this.firstPage = false;
        }
        $.mobile.changePage($(page.el), {changeHash:false, transition: transition});
    }

});

$(document).ready(function () {
    console.log('document ready');
    app = new AppRouter();
    Backbone.history.start();
}); 
```

但它不起作用。

那么，你能帮我实现这个系统吗：所有模板都有相同的标题，`app-content`而 jQuery Mobile 的 div 中只有一个可变内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:31:32.783

好的，我终于通过使用触发事件找到了解决方案。

通过使用 Backbone 和 jQuery Mobile，我只想在每个页面（或模板）上使用相同的页眉和页脚。这实际上很简单，但是当我研究时我走错了路。

以下是2个简单的应用程序；唯一的区别在这里：

**普通应用程序**（工作 jsFiddle：http: [//jsfiddle.net/QLu4P/](http://jsfiddle.net/QLu4P/)）

```
app.Views.Main = Backbone.View.extend({
initialize : function(params)
{
    // ...
},

render : function()
{
    // ...
    $(this.el).html(renderedContent);
    // ...
} 
```

});

**使用 jQuery Mobile 的应用程序**（工作 jsFiddle：http: [//jsfiddle.net/q5TX7/](http://jsfiddle.net/q5TX7/)）

```
app.Views.Main = Backbone.View.extend({
initialize : function(params)
{
    // ...
},

render : function()
{
    // ...
    $(this.el).html(renderedContent).trigger('create');
    // ...
} 
```

});

我刚刚加`.trigger('create')`了`$(this.el).html(renderedContent)`！我特意在 2 个应用程序上放置了 jQuery Mobile 标记，以强调这几乎是相同的代码。

希望它会有用。

# javascript - 选中单选按钮的条件不起作用

> ID：16163740
> 
> 赞同：0
> 
> 时间：2013-04-23T07:45:04.103
> 
> 标签：javascript, radio-button

我在字段集中有 2 个单选按钮。如果检查了第二个收音机，我会尝试应用条件，但它不起作用。如果我使用 firebug 控制台通过 ID 获取这两个元素，则表示这两个元素已被检查。

我的代码：

```
<fieldset data-role="controlgroup" data-type="horizontal" data-role="fieldcontain">
    <input type="radio" name="soci1" id="sisoci1" value="soci1"/>
    <label for="sisoci1">Soci/Abonat</label>

    <input type="radio" name="soci1" id="nosoci1" value="nosoci1"/>
    <label for="nosoci1">Convidat</label>
</fieldset> 
```

我的功能：

```
 if(document.getElementById("nosoci1").checked=true){
        check_soci1="no_soci";
    }else{
        check_soci1="soci";
    } 
```

萤火虫说的：

```
 >>> document.getElementById("sisoci1")
    <input id="sisoci1" type="radio" value="soci1" name="soci1" checked="checked">
    >>> document.getElementById("nosoci1")
    <input id="nosoci1" type="radio" value="nosoci1" name="soci1" checked="checked"> 
```

谁能帮我？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T07:49:27.327

为了使用比较，您需要双`==`符号：

```
if(document.getElementById("nosoci1").checked == true) { ... } 
```

或者完全跳过比较：

```
if(document.getElementById("nosoci1").checked) { ... } 
```

您的代码编写方式，带有单`=`号，'checked' 属性被赋值为`true`，然后`if`在该值上执行比较 - 实际上总是评估为`true`.

# java - 细胞不会用 POI 着色

> ID：16163741
> 
> 赞同：1
> 
> 时间：2013-04-23T07:45:04.523
> 
> 标签：java, excel, apache-poi

我试图制作一个读取图像的程序。在 MS excel 中绘制图像后，但每个单元格都是像[这里](http://www.boydevlin.co.uk/images/screenshots/eascreen04.png)一样的单个像素。我想我很安静，但我看不出它不会给单元格着色的问题，有人可以帮我吗？

这是您可以根据需要免费使用的代码。

```
 public class Engine {

    ArrayList<Color> arr = new ArrayList<Color>();
    private int xx;
    private int yy;
    FileOutputStream out;
    HSSFSheet sheet;
    HSSFWorkbook wb;

    public void process() throws AWTException, IOException{

        wb = new HSSFWorkbook();
        sheet = wb.createSheet();
        wb.setActiveSheet(0);
        BufferedImage img = null;
        try {
            img = ImageIO.read(new File("res/images.jpg"));
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            System.out.println("img file not found");
        }

                  for(int x=0;x<img.getWidth();x++){
                      xx++;
                  for(int y=0;y<img.getHeight();y++){
                      yy++;
                    int rgb = img.getRGB(x, y);
                    Color c = new Color(rgb);
                    printPixelARGB(rgb);
                    arr.add(c);

                    System.out.println("x: "+ x + " y:" + y +" color: " + c);

                 }}
                  out = new FileOutputStream("pic.xls");
                  wb.write(out);
                  out.close();
               }

             public void printPixelARGB(int pixel)  {
                int alpha = (pixel >> 24) & 0xff;
                int red = (pixel >> 16) & 0xff;
                int green = (pixel >> 8) & 0xff;
                int blue = (pixel) & 0xff;

                    HSSFPalette palette = wb.getCustomPalette();
                        HSSFCellStyle style = wb.createCellStyle();
                        HSSFRow row = sheet.createRow((short) yy);
                        HSSFCell cell = row.createCell((short) xx);
                        cell.setCellValue(yy);
                        style.setFillForegroundColor(HSSFColor.LIME.index);
                        style.setFillBackgroundColor(HSSFColor.LIME.index);
                        palette.setColorAtIndex(HSSFColor.LIME.index, (byte) red, (byte) green, (byte) blue);
                        cell.setCellStyle(style);

              }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:43:00.590

我可以自己弄清楚

解决方案是：

```
public class Engine {

    ArrayList<Color> arr = new ArrayList<Color>();
    private int xx;
    private int yy;
    FileOutputStream out;
    HSSFSheet sheet;
    HSSFWorkbook wb;
    Row r;

    public void process() throws AWTException, IOException{

        wb = new HSSFWorkbook();
        sheet = wb.createSheet();
        wb.setActiveSheet(0);
        BufferedImage img = null;
        try {
            img = ImageIO.read(new File("res/images.jpg"));
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            System.out.println("img file not found");
        }

                  for(int x=0;x<img.getWidth();x++){
                     xx++;
                     yy=0;
                      r = sheet.createRow(xx);
                  for(int y=0;y<img.getHeight();y++){
                     yy++;
                    int rgb = img.getRGB(x, y);
                    Color c = new Color(rgb);
                    printPixelARGB(rgb);
                    arr.add(c);

                    System.out.println("x: "+ x + " y:" + y +" color: " + c);

                 }}
                  out = new FileOutputStream("pic.xls");
                  wb.write(out);
                  out.close();
               }

             public void printPixelARGB(int pixel)  {
                int alpha = (pixel >> 24) & 0xff;
                int red = (pixel >> 16) & 0xff;
                int green = (pixel >> 8) & 0xff;
                int blue = (pixel) & 0xff;

                    Cell c = r.createCell(yy);
                    HSSFCellStyle style = wb.createCellStyle();
                    HSSFColor col = setColor(wb, (byte)red, (byte)green,(byte)blue);
                    style.setFillPattern(HSSFCellStyle.SOLID_FOREGROUND);
                    style.setFillForegroundColor(col.getIndex());
                    c.setCellStyle(style);

              }

             public HSSFColor setColor(HSSFWorkbook workbook, byte r,byte g, byte b){
                 HSSFPalette palette = workbook.getCustomPalette();
                 HSSFColor hssfColor = null;
                 try {
                 hssfColor= palette.findSimilarColor(r, g, b); 
                 if (hssfColor == null ){
                     palette.setColorAtIndex(HSSFColor.LAVENDER.index, r, g,b);
                     hssfColor = palette.getColor(HSSFColor.LAVENDER.index);
                 }
                  } catch (Exception e) {
                 System.out.println("error");
                 }

                  return hssfColor;
                 }

} 
```

# asp.net-mvc - 我们可以使用登录触发器来更新网站中客户的登录活动吗？

> ID：16163742
> 
> 赞同：0
> 
> 时间：2013-04-23T07:45:12.973
> 
> 标签：asp.net-mvc, sql-server-2008

我搜索并发现“登录”触发器用于跟踪 SQL 服务器中的用户登录活动。

搜索链接：http:
[//blog.sqlauthority.com/2009/05/27/sql-server-interesting-observation-of-logon-trigger-on-all-servers/](http://blog.sqlauthority.com/2009/05/27/sql-server-interesting-observation-of-logon-trigger-on-all-servers/) [http://msdn.microsoft.com/en -in/库/bb326598%28v=sql.100%29.aspx](http://msdn.microsoft.com/en-in/library/bb326598%28v=sql.100%29.aspx)

我们可以使用登录触发器来更新用 ASP.NET MVC 开发的网站中客户的登录活动吗？

除了在 SQL Server 中跟踪用户活动之外，还有其他使用登录触发器的方法吗？

提前致谢。

# android - “在导入路径中找不到带有标签‘CocosDenshion/android’的模块”cocos2dx 应用程序中的错误

> ID：16163743
> 
> 赞同：21
> 
> 时间：2013-04-23T07:45:17.340
> 
> 标签：android, android-ndk, cocos2d-x

我正在尝试编译在 cocos2d-x 上开发的 Android 本机应用程序。当我尝试调试我的应用程序时，我收到以下错误。

```
Android NDK: jni/Android.mk: Cannot find module with tag 'CocosDenshion/android' in import path
Android NDK: Are you sure your NDK_MODULE_PATH variable is properly defined ?
Android NDK: The following directories were searched: 
```

我的 android.mk 文件中有以下几行

```
$(Call import-add-path, $(LOCAL_PATH)/../../../CocosDenshion/android)

LOCAL_WHOLE_STATIC_LIBRARIES := cocos2dx_static cocosdenshion_static

include $(BUILD_SHARED_LIBRARY)

$(call import-module,CocosDenshion/android)
$(call import-module,cocos2dx) 
```

在我的 build_native.sh 中，NDK_MODULE_PATH 定义为

```
"NDK_MODULE_PATH=${COCOS2DX_ROOT}:${COCOS2DX_ROOT}/cocos2dx/platform/third_party/android/prebuilt" 
```

谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-28T10:14:35.083

前段时间我在eclipse中定义cocos2dx变量时遇到了同样的问题，它在构建时没有看到它，所以出现了错误ndk模块路径

然后我尝试设置没有变量的硬编码模块路径并且它工作所以我的ndk模块路径看起来像这样，也在eclipse中定义了ndk_root

```
if [[ "$buildexternalsfromsource" ]]; then
echo "Building external dependencies from source"
"$NDK_ROOT"/ndk-build -C "$APP_ANDROID_ROOT" $* \
    "NDK_MODULE_PATH=/home/myname/adt/cocos2dx:/home/myname/adt/cocos2dx/cocos2dx/platform/third_party/android/source" 
```

这是它在我的 Windows 电脑中的外观 试试看

```
如果 [[ "$buildexternalsfromsource" ]]; 然后
    echo "从源构建外部依赖"
    "$NDK_ROOT"/ndk-build -C "$APP_ANDROID_ROOT" $* \
        “NDK_MODULE_PATH=/cygdrive/c/Users/metin/Desktop/cocos2dx:/cygdrive/c/Users/metin/Desktop/cocos2dx/cocos2dx/platform/third_party/android/source”
别的
    echo "使用预建的外部"
    "$NDK_ROOT"/ndk-build -C "$APP_ANDROID_ROOT" $* \
        “NDK_MODULE_PATH=/cygdrive/c/Users/metin/Desktop/cocos2dx:/cygdrive/c/Users/metin/Desktop/cocos2dx/cocos2dx/platform/third_party/android/prebuilt”
菲
```

这是我的 Android.mk

```
LOCAL_WHOLE_STATIC_LIBRARIES := cocos2dx_static cocosdenshion_static cocos_extension_static
LOCAL_WHOLE_STATIC_LIBRARIES += 花栗鼠静态

包括 $(BUILD_SHARED_LIBRARY)

$(调用导入添加路径，/cygdrive/c/Users/metin/Desktop/cocos2dx)
$(调用导入添加路径，/cygdrive/c/Users/metin/Desktop/cocos2dx/cocos2dx/platform/third_party/android/prebuilt)

$(调用导入模块,CocosDenshion/android)
$(调用导入模块，cocos2dx)
$（调用导入模块，外部/花栗鼠）
$（调用导入模块，扩展）
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-18T05:11:29.807

您需要将 NDK_MODULE_PATH 定义到包含“CocosDension/Android”文件夹的文件夹。

因此，例如，如果您定义`NDK_MODULE_PATH += /cygdrive/c/ndk_modules`

你需要把你的 cocos dension 放在这里：`/cygdrive/c/ndk_modules/CocosDension/Android/Android.mk`

查看此文档：

[https://docs.google.com/document/d/127ZkklXDyknjKAIVAos-DWI9nZSB3uKmTI84lk1TJ9k/edit](https://docs.google.com/document/d/127ZkklXDyknjKAIVAos-DWI9nZSB3uKmTI84lk1TJ9k/edit)

[https://android.googlesource.com/platform/ndk/+/675fe49445e65ba44d91f4d85ed9b4d5b5ff6745/docs/IMPORT-MODULE.TXT](https://android.googlesource.com/platform/ndk/+/675fe49445e65ba44d91f4d85ed9b4d5b5ff6745/docs/IMPORT-MODULE.TXT)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-25T10:19:17.050

我遇到过同样的问题。问题是，`NDK_MODULE_PATH`is 环境变量和 Eclipse（4.2）不允许您为调试定义环境变量，仅用于构建。

因此，在`NDK_MODULE_PATH`系统范围内定义变量是一种解决方案。例如，在 Linux 上，您可以通过编辑`.profile`并添加以下内容来做到这一点：

```
export NDK_MODULE_PATH="path/to/module" 
```

该解决方案是永久性的，但不灵活。

另一种解决方案是从命令行启动 eclipse：

```
$ export NDK_MODULE_PATH="path/to/module"
$ eclipse 
```

这更灵活，您可以使用简单的脚本来完成。如果您更改 NDK_MODULE_PATH，您只需要重新启动 Eclipse 而不是整个会话。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-13T01:29:34.670

查看

```
build_native.sh  > **COCOS2DX_ROOT="$DIR/../../.."** 
```

前任）

```
Project Name : FirstExam

c:\cocos2d-x\FirstExam ==> **COCOS2DX_ROOT="$DIR/../.."**

c:\cocos2d-x\example\FirstExam ==> **COCOS2DX_ROOT="$DIR/../../.."** 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-14T11:01:15.410

您必须在“build_native.sh”中更改此行

```
COCOS2DX_ROOT="$DIR/../.." 
```

取决于基于 cocos2d-x root 的 android 项目的位置。例如，如果您的 android 项目路径是：C:\cocos2d-x\Projects\ProjectName\proj.android 那么

```
COCOS2DX_ROOT="$DIR/../../.." 
```

（你必须后退三步才能到达 cocos2d-x 的根目录）

但如果您的项目路径是 C:\cocos2d-x\ProjectName\proj.android 那么

```
COCOS2DX_ROOT="$DIR/../../.." 
```

（你必须后退两步才能到达 cocos2d-x 的根目录）

希望有帮助

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-12-13T05:51:08.230

[http://www.cocos2d-x.org/forums/6/topics/36474](http://www.cocos2d-x.org/forums/6/topics/36474)

[http://mhandroid.wordpress.com/2011/01/23/using-eclipse-for-android-cc-debugging](http://mhandroid.wordpress.com/2011/01/23/using-eclipse-for-android-cc-debugging/)

以上链接详细解释了如何将 cocos2d-x 项目作为原生 android 应用程序进行调试。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-05-02T07:35:18.937

甚至我对 Cocos2d-x android 也有问题。你可以试试[这个](https://stackoverflow.com/questions/14670241/how-to-setup-cocos2d-x-on-windows-7-need-a-n00bs-guide/14680296#14680296)，看看它是否有帮助。

# android-calendar - 在日历中，如何在 android 网格视图中更改所选项目的背景颜色

> ID：16163744
> 
> 赞同：5
> 
> 时间：2013-04-23T07:45:19.060
> 
> 标签：android-calendar

![在此处输入图像描述](https://i.stack.imgur.com/iNucT.png)

![在此处输入图像描述](https://i.stack.imgur.com/10ciB.png)

在日历中，当我选择日期时，我需要更改网格项目的背景颜色，并删除上一个选定项目的背景。当我单击并按住日期 10（如图 2 所示）时，它显示为橙色。但是当我不聚焦鼠标时，它没有显示颜色。

gridcell.setOnClickListener(new OnClickListener() {

```
 @Override
                        public void onClick(View v) {

                            String date_month_year = (String) v.getTag();
                            selected_date = date_month_year;
                            String[] day_color = date_month_year.split("-");
                            String theday = day_color[0];
                            selectedDateEvents(theday);
                            listadapter.notifyDataSetChanged();
                            prev_pos = cur_pos;
                            cur_pos = position;

                            Log.d("curr and prev", position+"  n  "+prev_pos);

                            parent.getChildAt(cur_pos).setBackgroundResource(R.drawable.calendar_tile_small);
                            parent.getChildAt(prev_pos).setBackgroundResource(R.drawable.calendar_tile_small_black);

                            GridCellAdapter.this.notifyDataSetChanged();

                        }
                    }); 
```

请问有人可以帮我吗？

# c - 允许错误消息冒泡

> ID：16163750
> 
> 赞同：0
> 
> 时间：2013-04-23T07:45:27.963
> 
> 标签：c, error-handling

gcc (GCC) 4.7.2 c89

我一直想知道从被调用函数返回错误消息时的最佳实践是什么？

在我正在创建的一个共享库中，我有这个功能：

```
/* Create directory structure */
apr_status_t dir_create(apr_pool_t *mem_pool)
{
#define SRC "test_src"

    apr_fileperms_t file_perms =
        APR_FPROT_UWRITE   |
        APR_FPROT_GWRITE   |
        APR_FPROT_WWRITE   |
        APR_FPROT_UREAD    |
        APR_FPROT_GREAD    |
        APR_FPROT_WREAD    |
        APR_FPROT_UEXECUTE |
        APR_FPROT_GEXECUTE;

    if(apr_dir_make(SRC, file_perms, mem_pool) != APR_SUCCESS) {
        LOG_CRIT("Failed to create directory");
        return FALSE;
    }

    return TRUE;
} 
```

将`LOG_CRIT`显示与 errno 相关的相应错误消息。

在我将调用此函数的应用程序中，我有这个：

```
if(dir_create(mem_pool) != TRUE) {
    return 1;
}
LOG_INFO("Directory has been created"); 
```

例如，当上述失败时，它将像这样记录：

```
[CRITICAL] dir_create:28: error [File exists] Failed to create directory 
```

我想知道我是否应该将错误消息放在调用库函数的应用程序中。或者您是否应该始终在最早收到错误消息时立即显示它？

在上述情况下，我在被调用函数中显示错误消息。当函数返回时，我只返回 1 以结束应用程序或执行其他操作。

另一个想法，最好返回错误指示器，让调用函数显示错误的来源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T08:33:19.143

一些选项，变得越来越疯狂——你可能对什么适合你的情况有直觉；-P 这更多是为了激发你对选项的认识：

*   尽可能多地捕获您认为合理的信息 - `__FILE__`, `__LINE__`, `errno`, 错误描述、正在尝试的操作、参数、结果等 - 在检测错误的线路上
*   原则：**只做调用者想让你做的事情**；许多不同妥协的方法：
    *   返回一个小的、易于测试的数据值（数字或指针），但提供一些访问函数来轻松获取上面捕获的其他信息，以便您“返回”的代码可以做任何他们喜欢的事情......
        *   例如，调用者可以取消引用该指针以获取错误详细信息，`strerror()`类似函数，调用者给出一个指向可打印错误消息的指针（如果调用者不需要对该消息含义的可见性）......
    *   立即通知调用者控制的例程，该例程可以在调用者认为适当时抑制或重定向错误；例如，您的库可以提供指向您调用的函数的指针，调用者可以重定向该函数 - 默认值可以记录到标准错误或其他一些通常可接受的操作
    *   将您的库代码设计为`#include`d 并使用调用者提供的预处理器宏来规定错误处理行为
    *   从您的库中硬编码错误消息的输出，但让调用者修改可能发送到的流，以便他们可以在需要时抑制它

如果使用您的库的应用程序可能想要推测性地尝试操作（例如故障转移或事务语义），特别是如果某些错误操作具有不可逆转的后果（例如某些批处理作业系统认为作业如果在 stderr 上打印任何内容，则失败 - 但从程序的角度来看，您的库函数可能不会构成失败，或者弹出图形错误对话框会阻碍无人值守操作）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T07:50:12.883

我建议您在尽可能低的级别记录错误消息，就像您在这里所做的那样。如果您需要访问`errno`，这一点尤其重要，否则在您获得更高级别的功能时可能会发生变化。在这个级别上，我会让错误消息尽可能的技术性和具体性。

根据您的库函数的返回值，您的应用程序代码可能会采取一些行动（例如，它可能会显示一个弹出窗口，提供人类可读的错误描述，或者它可能会写入`stderr`）。这通常会在可能的最高级别完成 - 如果您愿意，可以在 UI 级别。

# sql - 从一个表中随机抽取 20 行，并将它们作为列插入到另一个表（单行）中

> ID：16163752
> 
> 赞同：0
> 
> 时间：2013-04-23T07:45:38.170
> 
> 标签：sql, sql-server, stored-procedures

嗨，我正在使用 SQL Server 2012，我有一个表，其中包含 1000 个问题作为行。我需要随机选择其中的 20 个问题，然后将它们作为单独的列插入到另一个表的单行中。

我想做这样的事情。

```
select top 20 questionid from questions order by newid()
insert into questionsets values (q1,q2,q3,q4,q5,q6....) 
```

我尝试过以各种方式进行此操作，但无法以一种不昂贵的方式让我的头脑清醒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T07:56:00.917

请在 PIVOTing 结果集后尝试插入：

```
INSERT INTO 
    questionsets    (
    Q1,
    Q2,
    .
    .
    Q20)
SELECT * FROM(
    SELECT *, ROW_NUMBER() OVER (ORDER BY questionid) RNum FROM(
        SELECT TOP 20 questionid FROM questions ORDER BY NEWID()
)x)y PIVOT (MAX(questionid) FOR RNum IN ([1], [2], [3], ..., [20]))as pvt 
```

# xml - R getNodeSet中的部分匹配

> ID：16163758
> 
> 赞同：1
> 
> 时间：2013-04-23T07:46:03.883
> 
> 标签：xml, r, xpath

这更像是一个 XPath 问题，但我如何告诉 getNodeSet 只接受 1 个类的类匹配？

例如，我可能有

```
<tr class="cool coolio"> 
```

如果我这样做

```
getNodeSet(root, "tr[@class="cool"]) 
```

我将无法捕捉到上面的标签，我需要完全限定它

`getNodeSet(root, "tr[@class="cool coolio"])`

有什么方法可以捕获上述标签而不必指定两个可能的类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T19:56:21.053

是的，你应该能够做到这一点：

```
getNodeSet(root, "tr[contains(concat(' ', @class, ' '), ' cool ')]") 
```

# java - 使用 JComboBox TableCellEditor 按顺序显示所选项目

> ID：16163759
> 
> 赞同：0
> 
> 时间：2013-04-23T07:46:07.277
> 
> 标签：java, swing

我在体育和艺术专栏中显示了一个带有组合框编辑器的表格。即使以随机方式选择的项目也会添加到列表中。我的问题是将名字列中的内容正确映射到体育列和艺术列。我的代码，基于[`TableRenderDemo`](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#eg)，在这里给出。

```
/*
 * Copyright (c) 1995, 2008, Oracle and/or its affiliates. All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 *
 *   - Redistributions of source code must retain the above copyright
 *     notice, this list of conditions and the following disclaimer.
 *
 *   - Redistributions in binary form must reproduce the above copyright
 *     notice, this list of conditions and the following disclaimer in the
 *     documentation and/or other materials provided with the distribution.
 *
 *   - Neither the name of Oracle or the names of its
 *     contributors may be used to endorse or promote products derived
 *     from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
 * IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
 * THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR
 * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */ 

/*
 * TableRenderDemo.java requires no other files.
 */

import javax.swing.DefaultCellEditor;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.table.DefaultTableCellRenderer;
import javax.swing.table.TableCellRenderer;
import javax.swing.table.TableColumn;
import java.awt.Component;
import java.awt.Dimension;
import java.awt.GridLayout;
import java.awt.event.ItemEvent;
import java.awt.event.ItemListener;
import java.util.LinkedList;

public class TableRenderDemo extends JPanel {
    private boolean DEBUG = false;
    static LinkedList<String> helpStringFirst = new  LinkedList<String>();
    static LinkedList<String> helpStringSecond = new  LinkedList<String>();
 static LinkedList<String> arts = new LinkedList<String>();
 Object[][] data = {
            {"Kathy", "Smith", "Snowboarding", "PencilArt", new Boolean(false)},
            {"John", "Doe", "Rowing", "Drawing", new Boolean(true)},
            {"Sue", "Black","Knitting", "Yoga", new Boolean(false)},
            {"Jane", "White","Speed reading","Music", new Boolean(true)},
            {"Joe", "Brown", "Pool", "Dance", new Boolean(false)}
            };
    public TableRenderDemo() {
        super(new GridLayout(1,0));

        String[] columnNames = {"First Name",
                                "Last Name",
                                "Sports",
                                "Arts",
                                "Vegetarian"};

        final Object[] longValues = {"Jane", "Kathy",
              "None of the above",
              new Integer(20), Boolean.TRUE};

        final JTable table = new JTable(data, columnNames);
        table.setPreferredScrollableViewportSize(new Dimension(1000, 200));
        table.setFillsViewportHeight(true);
        //Create the scroll pane and add the table to it.
        JScrollPane scrollPane = new JScrollPane(table);

             setUpSportColumn(table, table.getColumnModel().getColumn(2));
             setUpArtsColumn(table, table.getColumnModel().getColumn(3));

        add(scrollPane);

    }

  public void setUpSportColumn(JTable table,
                               TableColumn sportColumn) {
      //Set up the editor for the sport cells.
      final JComboBox comboBox = new JComboBox();
      comboBox.addItem("Snowboarding");
      comboBox.addItem("Rowing");
      comboBox.addItem("Knitting");
      comboBox.addItem("Speed reading");
      comboBox.addItem("Pool");
      comboBox.addItem("None of the above");
      sportColumn.setCellEditor(new DefaultCellEditor(comboBox));

      //Set up tool tips for the sport cells.
      DefaultTableCellRenderer renderer =
              new DefaultTableCellRenderer();
      renderer.setToolTipText("Click for combo box");
      sportColumn.setCellRenderer(renderer);
      comboBox.addItemListener(new ItemListener() {

          @Override
          public void itemStateChanged(ItemEvent e) {                     
                  if ((e.getStateChange() == ItemEvent.SELECTED) ) {                      
                      String str = comboBox.getSelectedItem().toString();
                      System.out.println("str>>:"+str);  
                      setLabelText(str);
                  }                         
          }
      });

  }
  public void setUpArtsColumn(JTable table,
          TableColumn artColumn) {
    //Set up the editor for the sport cells.
    final JComboBox comboBox1 = new JComboBox();
    comboBox1.addItem("Pencilsketch");
    comboBox1.addItem("Drawing");
    comboBox1.addItem("music");
    comboBox1.addItem("Dance");
    comboBox1.addItem("Yoga");
    comboBox1.addItem("None of the above");
    artColumn.setCellEditor(new DefaultCellEditor(comboBox1));  
    //Set up tool tips for the sport cells.
    DefaultTableCellRenderer renderer =
    new DefaultTableCellRenderer();
    renderer.setToolTipText("Click for combo box");
    artColumn.setCellRenderer(renderer);
    comboBox1.addItemListener(new ItemListener() {

      @Override
      public void itemStateChanged(ItemEvent e) {
          if ((e.getStateChange() == ItemEvent.SELECTED)) {

              String str1 = comboBox1.getSelectedItem().toString();
             System.out.println("str:"+str1);
              setLabelText1(str1);
          }
      }
  });   
  }
  private static void setLabelText(String str1) {

      helpStringFirst.add(str1);
      System.out.println("helpStringFirst:"+helpStringFirst);
  }
  private static void setLabelText1(String str2) {

      helpStringSecond.add(str2);
      System.out.println("helpStringSecond:"+helpStringSecond);  
  }

    /**
     * Create the GUI and show it.  For thread safety,
     * this method should be invoked from the
     * event-dispatching thread.
     */
    private static void createAndShowGUI() {
        //Create and set up the window.
        JFrame frame = new JFrame("SimpleTableDemo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        //Create and set up the content pane.
        TableRenderDemo newContentPane = new TableRenderDemo();
        newContentPane.setOpaque(true); //content panes must be opaque
        frame.setContentPane(newContentPane);

        //Display the window.
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        //Schedule a job for the event-dispatching thread:
        //creating and showing this application's GUI.          
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }
} 
```

# r - 使用 cut 将数据分类为分位数 - 获取缺失值

> ID：16163760
> 
> 赞同：0
> 
> 时间：2013-04-23T07:46:12.163
> 
> 标签：r

我有一个数据框：

```
a <- matrix(c(1,2,3,4), 2,2)
colnames(a) <- c("a", "b")
df <- as.data.frame(a)

> df
  a b
1 1 3
2 2 4 
```

首先，我计算“a”列的四分位数：

```
> quantile (df$a)
  0%  25%  50%  75% 100% 
1.00 1.25 1.50 1.75 2.00 
```

然后，我想使用列“a”的四分位数对列“b”进行分类：

```
> cat.b<-cut(df$b, quantile (df$a,))
> cat.b  
[1] <NA> <NA>  
Levels: (1,1.25] (1.25,1.5] (1.5,1.75] (1.75,2] 
```

如您所见，R 给出了两个“b”值的 NA，因为它们高于“a”的最高四分位数。

但是，我希望生成的“cat.b”向量看起来像：

```
> cat.b
[1]
">2"    ">2" 
```

你能告诉我如何在R中做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T07:54:54.227

这两个值不在范围内。您可以通过再次休息来规避这一点。我选择了`Inf`，你可以使用一个有限值。

```
cat.b <- cut(df$b, c(-Inf, quantile(df$a), Inf))
#next line can be done better, but illustrates the purpose
levels(cat.b)[length(levels(cat.b))] <- ">2" 
levels(cat.b)[1] <- "<1"

cat.b
[1] >2 >2
Levels: (1,1.25] (1.25,1.5] (1.5,1.75] (1.75,2] >2 
```

# android - 谷歌地图未在 Android 中显示 - 空指针异常

> ID：16163764
> 
> 赞同：0
> 
> 时间：2013-04-23T07:46:22.907
> 
> 标签：android, google-maps, nullpointerexception

我已经完成了显示谷歌地图所需的所有设置。

一切正常。当我运行应用程序时，地图没有显示。

以下是我的代码，

```
package com.example.findproperty;

public class MainActivity extends FragmentActivity implements LocationListener {
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    final GoogleMap mMap = ((SupportMapFragment) getSupportFragmentManager()
            .findFragmentById(R.id.map)).getMap();
    mMap.setMapType(GoogleMap.MAP_TYPE_NORMAL);
    mMap.setMyLocationEnabled(true);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
  }
} 
```

日志猫，

```
04-23 06:57:23.189: W/ActivityThread(3685): Application com.example.findproperty is waiting for the debugger on port 8100...
04-23 06:57:23.289: I/System.out(3685): Sending WAIT chunk
04-23 06:57:23.309: I/dalvikvm(3685): Debugger is active
04-23 06:57:23.339: I/System.out(3685): Debugger has connected
04-23 06:57:23.360: I/System.out(3685): waiting for debugger to settle...
04-23 06:57:23.558: I/System.out(3685): waiting for debugger to settle...
04-23 06:57:25.188: I/System.out(3685): waiting for debugger to settle...
04-23 06:57:25.388: I/System.out(3685): waiting for debugger to settle...
04-23 06:57:25.668: I/System.out(3685): debugger has settled (1447)
04-23 06:57:27.108: W/dalvikvm(3685): VFY: unable to resolve static field 873 (MapAttrs) in Lcom/google/android/gms/R$styleable;
04-23 06:57:27.108: D/dalvikvm(3685): VFY: replacing opcode 0x62 at 0x000e
04-23 07:14:55.779: I/jdwp(3685): Ignoring second debugger -- accepting and dropping
04-23 07:19:31.823: E/Trace(6321): error opening trace file: No such file or directory (2)
04-23 07:19:31.949: W/ActivityThread(6321): Application com.example.findproperty is waiting for the debugger on port 8100...
04-23 07:19:32.069: I/System.out(6321): Sending WAIT chunk
04-23 07:19:32.089: I/dalvikvm(6321): Debugger is active
04-23 07:19:32.278: I/System.out(6321): Debugger has connected
04-23 07:19:32.278: I/System.out(6321): waiting for debugger to settle...
04-23 07:19:32.503: I/System.out(6321): waiting for debugger to settle...
04-23 07:19:32.709: I/System.out(6321): waiting for debugger to settle...
04-23 07:19:32.909: I/System.out(6321): waiting for debugger to settle...
04-23 07:19:33.109: I/System.out(6321): waiting for debugger to settle...
04-23 07:19:33.325: I/System.out(6321): waiting for debugger to settle...
04-23 07:19:33.528: I/System.out(6321): waiting for debugger to settle...
04-23 07:19:33.728: I/System.out(6321): waiting for debugger to settle...
04-23 07:19:33.948: I/System.out(6321): waiting for debugger to settle...
04-23 07:19:34.148: I/System.out(6321): waiting for debugger to settle...
04-23 07:19:34.448: I/System.out(6321): waiting for debugger to settle...
04-23 07:19:34.648: I/System.out(6321): waiting for debugger to settle...
04-23 07:19:34.850: I/System.out(6321): waiting for debugger to settle...
04-23 07:19:35.048: I/System.out(6321): waiting for debugger to settle...
04-23 07:19:35.258: I/System.out(6321): waiting for debugger to settle...
04-23 07:19:35.538: I/System.out(6321): debugger has settled (1440)
04-23 07:19:41.869: W/GooglePlayServicesUtil(6321): Google Play services out of date.  Requires 3027100 but found 2012110
04-23 07:19:41.929: W/GooglePlayServicesUtil(6321): Google Play services out of date.  Requires 3027100 but found 2012110
04-23 07:19:41.989: W/GooglePlayServicesUtil(6321): Google Play services out of date.  Requires 3027100 but found 2012110
04-23 07:19:42.059: W/GooglePlayServicesUtil(6321): Google Play services out of date.  Requires 3027100 but found 2012110
04-23 07:19:42.119: W/GooglePlayServicesUtil(6321): Google Play services out of date.  Requires 3027100 but found 2012110
04-23 07:19:42.399: D/dalvikvm(6321): GC_CONCURRENT freed 202K, 12% free 2591K/2916K, paused 103ms+13ms, total 208ms
04-23 07:19:45.879: W/GooglePlayServicesUtil(6321): Google Play services out of date.  Requires 3027100 but found 2012110
04-23 07:30:43.240: W/ActivityThread(7607): Application com.example.findproperty is waiting for the debugger on port 8100...
04-23 07:30:43.318: I/System.out(7607): Sending WAIT chunk
04-23 07:30:43.339: I/dalvikvm(7607): Debugger is active
04-23 07:30:43.518: I/System.out(7607): Debugger has connected
04-23 07:30:43.528: I/System.out(7607): waiting for debugger to settle...
04-23 07:30:43.728: I/System.out(7607): waiting for debugger to settle...
04-23 07:30:43.938: I/System.out(7607): waiting for debugger to settle...
04-23 07:30:44.138: I/System.out(7607): waiting for debugger to settle...
04-23 07:30:44.348: I/System.out(7607): waiting for debugger to settle...
04-23 07:30:44.548: I/System.out(7607): waiting for debugger to settle...
04-23 07:30:44.748: I/System.out(7607): waiting for debugger to settle...
04-23 07:30:45.040: I/System.out(7607): waiting for debugger to settle...
04-23 07:30:45.238: I/System.out(7607): waiting for debugger to settle...
04-23 07:30:45.440: I/System.out(7607): waiting for debugger to settle...
04-23 07:30:45.640: I/System.out(7607): waiting for debugger to settle...
04-23 07:30:45.848: I/System.out(7607): debugger has settled (1384)
04-23 07:30:47.689: W/GooglePlayServicesUtil(7607): Google Play services out of date.  Requires 3027100 but found 2012110
04-23 07:30:47.739: W/GooglePlayServicesUtil(7607): Google Play services out of date.  Requires 3027100 but found 2012110
04-23 07:30:47.799: W/GooglePlayServicesUtil(7607): Google Play services out of date.   Requires 3027100 but found 2012110
04-23 07:30:47.939: W/GooglePlayServicesUtil(7607): Google Play services out of date.  Requires 3027100 but found 2012110
04-23 07:30:48.009: W/GooglePlayServicesUtil(7607): Google Play services out of date.  Requires 3027100 but found 2012110
04-23 07:30:48.359: D/dalvikvm(7607): GC_CONCURRENT freed 206K, 12% free 2583K/2912K, paused 92ms+24ms, total 230ms
04-23 07:31:04.578: W/GooglePlayServicesUtil(7607): Google Play services out of date.  Requires 3027100 but found 2012110 
```

清单文件，

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<permission
    android:name="com.example.findproperty.permission.MAPS_RECEIVE"
     />

<uses-permission android:name="com.example.findproperty.permission.MAPS_RECEIVE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

<uses-feature
    android:glEsVersion="0x00020000"
    android:required="true" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.findproperty.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <uses-library android:name="com.google.android.maps" />

    <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="Given the key" />
 </application>

</manifest> 
```

请帮我解决这个问题！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:51:34.083

如果您在模拟器上运行它，那么您推送到的 Google 地图文件是旧的，并且与您可能正在使用`AVD`的最新版本的库不兼容。`google-play-services`

如果您在真实设备上运行它，则`google-play-service`通过`Play Store`. 要更新请点击此链接：[https ://play.google.com/store/apps/details?id=com.google.android.gms&hl=en](https://play.google.com/store/apps/details?id=com.google.android.gms&hl=en)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T09:32:49.273

打开 Eclipse.. 在**Window**菜单中 -> 单击**Android SDK Manager** 打开**Android SDK Manager**后，查看最后一个选项卡**Extra**。检查**Google Play 服务**选项并**更新**它..

# python - 在 python 中编写 XML 行

> ID：16163765
> 
> 赞同：0
> 
> 时间：2013-04-23T07:46:26.637
> 
> 标签：python, xml, elementtree

我的xml文件是这样的

```
<S_Row>
     <S_Cell><S_CellBody></S_CellBody></S_Cell>
     <S_Cell><S_CellBody></S_CellBody></S_Cell>
     <S_Cell><S_CellBody></S_CellBody></S_Cell>
</S_Row> 
```

我在 python 中处理它是这样的：

```
for i, S_Cell in enumerate(S_Row.findall('S_Cell')):
        for S_CellBody in S_Cell.getchildren():
           if i==0:
              S_CellBody.text="ABC" 
```

这给了我在 xml 文件中这样的输出：

```
 <S_Row>
     <S_Cell><S_CellBody>ABC</S_CellBody></S_Cell>
     <S_Cell><S_CellBody></S_CellBody></S_Cell>
     <S_Cell><S_CellBody></S_CellBody></S_Cell>
   </S_Row> 
```

现在，如果我想添加另一行并在第二行（第一列）中添加元素，如下所示：

```
 <S_Row>
     <S_Cell><S_CellBody>ABC</S_CellBody></S_Cell>
     <S_Cell><S_CellBody></S_CellBody></S_Cell>
     <S_Cell><S_CellBody></S_CellBody></S_Cell>
   </S_Row>

   <S_Row>
     <S_Cell><S_CellBody>DEF</S_CellBody></S_Cell>
     <S_Cell><S_CellBody></S_CellBody></S_Cell>
     <S_Cell><S_CellBody></S_CellBody></S_Cell>
   </S_Row> 
```

我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T09:09:35.243

考虑一个作为 XMLstring

```
import cElementTree    
a1=cElementTree.fromstring(a)
strlst=['ABC','DEF','GHI']
for i,row in enumerate(a1.findall('S_Row')):    
    cb = row.getchildren()[0].getchildren()[0]
    cb.text = strlst[i+1]         
cElementTree.tostring(a1) 
```

# java - 包含复选框组件的 Vaadin 过滤器表

> ID：16163766
> 
> 赞同：0
> 
> 时间：2013-04-23T07:46:30.503
> 
> 标签：java, vaadin

我在 vaadin 6 中有一个表格组件，其中包含复选框。如何对表格中添加的 CheckBox 组件应用过滤？我之前在 vaadin 表组件中完成了过滤，该组件具有纯字符串作为数据。我添加到 vaadin 表的复选框有标题，我想根据它们的标题过滤这些复选框。希望你明白我的意思。所以，我需要这方面的帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T13:29:49.347

Vaadin 6 在 VScrollTable.java 文件中有自己的排序方法。它对基本类进行排序，例如字符串、整数、日期等。当然，您可以编写自己的表，该表具有自己的排序方法，但这可能会花费很多时间。您可以为此搜索插件。

可能这对你有用：[https ://vaadin.com/en_GB/directory#addon/filteringtable:vaadin](https://vaadin.com/en_GB/directory#addon/filteringtable:vaadin)

# c# - 日期时间介于 2 个日期时间值 SQL 之间的行

> ID：16163767
> 
> 赞同：0
> 
> 时间：2013-04-23T07:46:30.987
> 
> 标签：c#, sql

我只想拥有日期时间值介于 2 个值之间的 sql 值。

我使用此代码

```
 filterdatum = "(Datum >= "+ startwaarde + " AND Datum < "+ eindwaarde+ ")";
 filter = filter + " AND " + filterdatum; 
```

我的过滤器将如下所示：

```
where "(Type like '%13%') AND (Datum >= 11/04/2013 00:00:00 AND Datum < 23/04/2013 00:00:00)" 
```

我总是收到这个错误：

> '00' 附近的语法不正确。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T07:49:10.360

将日期放在单引号之间：

```
filterdatum = "(Datum >= '"+ startwaarde + "' AND Datum < '"+ eindwaarde+ "')";
 filter = filter + " AND " + filterdatum; 
```

**提示**：你下次可以做的一个简单测试是直接在你的数据库中执行你的查询并检查它是否有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T07:57:37.680

更好的选择是将日期值作为参数传递给查询。将日期值作为字符串直接放在查询字符串中总是有问题的。创建和传递参数的确切代码取决于您的数据访问技术。

如果你使用 ADO.NET，你应该写：

```
filterdatum = "(Datum >= @startDate AND Datum < @endDate)";
...
command.Parameters.AddWithValue("@startDate", startwaarde);
command.Parameters.AddWithValue("@endDate", eindwaarde); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T07:54:59.993

您应该在日期值之间使用单引号。

```
filterdatum = "(Datum >= '"+ startwaarde + "' AND Datum < '"+ eindwaarde+ "')"; 
```

但更重要的是，您应该始终使用*[参数化查询](http://www.codinghorror.com/blog/2005/04/give-me-parameterized-sql-or-give-me-death.html)*，这种代码对*[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)*攻击是开放的。

例如;

```
SqlConnection conn = new SqlConnection(_connectionString);
conn.Open();
string s = "SELECT * From YourTable WHERE Datum >= @startwaarde AND Datum < @eindwaarde";
SqlCommand cmd = new SqlCommand(s);
cmd.Parameters.Add("@startwaarde", startwaarde);
cmd.Parameters.Add("@eindwaarde", eindwaarde);
SqlDataReader reader = cmd.ExecuteReader(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-23T07:48:12.380

确保引用 DateTimes，否则您的 SQL 可能会认为它们是表/列名？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T08:40:29.087

1.  将您的日期/时间值放在引号之间。
2.  确保您的日期/时间值的格式符合[ISO 8601](http://en.wikipedia.org/wiki/ISO_8601)。您可以使用 来执行此操作`startwaarde.ToString("o")`，假设`startwaarde`是 DateTime 类型。
3.  最好的方法是使用参数。因此，您的 SQL 将如下所示：`(Datum >= @1 AND Datum < @2)`并且您将这两个值作为参数添加到 中`SqlCommand`，假设您正在对数据库进行过滤。

# java - 将列表对象映射到jsp页面中的选择框？

> ID：16163771
> 
> 赞同：1
> 
> 时间：2013-04-23T07:46:43.937
> 
> 标签：java, spring-mvc, jstl, el

在 Spring Java 应用程序中，我在这个属性中有 Bean 类有其他 bean 对象的列表

```
private List<Course> courseName = new ArrayList<Course>();
-------//Setter and getter
------ 
```

而且Course bean有属性`id`，`name`

在我的控制器类中..我正在添加`List<Course>`使用`setCourseName(-)`

现在我`name`使用spring form标签在jsp页面中显示this course bean列表..

```
 <form:form action="form1" modelAttribute="COURSE">
        <c:set var="modalAttributeName" value="COURSE" />
        <c:set var="modalAttribute" value="${requestScope[modalAttributeName]}" />
             <form:select path="courseName" class="month_select"                                    items="${modalAttribute.courseName.name}">
    </form:select>
 </form:form> 
```

但这不起作用...给我任何建议

`

```
Exception: `
Stacktrace:] with root cause
java.lang.NumberFormatException: For input string: "name"
    at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
    at java.lang.Integer.parseInt(Integer.java:481)
    at java.lang.Integer.parseInt(Integer.java:514)
` 
```

但是如果我们只写 courseName 空选择框显示

```
<form:select path="courseName" class="month_select" items="${modalAttribute.courseName}">

    </form:select> 
```

# c# - 获取 USB 适配器的 com 端口号

> ID：16163773
> 
> 赞同：0
> 
> 时间：2013-04-23T07:46:50.670
> 
> 标签：c#, windows, serial-port, usb

我正在尝试编写一个使用 arduino mega 和基于 FTDI 的 USB 到 RS485 适配器的程序。

我想让程序对用户友好，因此我不会让用户手动检查 com 端口号，但我想自动检测它。这是代码片段

```
 ManagementScope scope = new ManagementScope();
    SelectQuery query = new SelectQuery("SELECT * FROM Win32_SerialPort");
    ManagementObjectSearcher searcher = new ManagementObjectSearcher(scope, query);

    try
    {
        foreach (ManagementObject item in searcher.Get())
        {
            String description = item["Description"].ToString();
            String deviceID = item["DeviceID"].ToString();

            Console.WriteLine("Porta " + description + " deviceID " + deviceID);

            if (description.Contains("USB Serial Port"))
                return deviceID;
        }
    }
    catch (ManagementException)
    {
    } 
```

我无法理解的一点是为什么我可以找到 Arduino 的 USB Serial 端口（匹配`description.Contains("Arduino")`）但找不到 USB RS485 端口的 com 端口。

你知道为什么会发生这种情况吗？查询`SELECT * FROM Win32_SerialPort`错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:10:12.123

好吧，在研究了几个论坛后，我发现如果我运行查询，则列出了与 USB/RS485 适配器关联的 com 端口`SELECT * FROM Win32_PnPEntity`。

但我真的不明白为什么 arduino 的串行端口由查询显示，而另一个端口与另一个查询显示....我的意思是，它们都是 USB<-> 串行适配器！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T11:56:01.950

我没有 USB<->RS485 适配器，但我怀疑它们不属于“串行端口”类别（这似乎是为 RS232 接口保留的），这可能是它们没有出现在Win32_SerialPort 查询结果。

为了检测和 Arduino 板的连接，我查看了这个注册表项：

```
HKLM\HARDWARE\DEVICEMAP\SERIALCOMM 
```

对于像这样的条目

```
\Device\VCP0 
```

（VCP 是要查找的前缀）。

也许您也可以查看此注册表项，或查看其父项 DEVICEMAP，并查看连接 FTDI RS485 适配器时会发生什么。此时检测这些注册表项内容之一的更改应该很简单。

高温高压

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-05T11:32:16.727

正如@Marcello Romani 指出的那样，FTDI 不属于“串行端口”类别。即使我迟到了，我最近也遇到了这个问题，我使用另一个查询修复了它。您可以查询 Win32_PnPEntity 类，而不是在 WIN32_SerialPort 中搜索。使用此类的一个缺点是查询速度慢。

```
 using (var searcher = new ManagementObjectSearcher
            ("SELECT * FROM Win32_PnPEntity"))
        {
            string[] portnames = SerialPort.GetPortNames();
            var ports = searcher.Get().Cast<ManagementBaseObject>().ToList();

            foreach (ManagementBaseObject queryObj in ports)
            {
            }

        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-18T13:07:58.787

这可能对你有用。我用它来动态读取系统上 Arduino 的端口号。这里

> 描述.包含（“uino”）

是为两种板子寻找 Arduino 和 Genuino 关键字。

```
 public string detectArduinoPort()
    {
        ManagementScope mScope = new ManagementScope();
        SelectQuery query = new SelectQuery("SELECT * FROM Win32_SerialPort");
        ManagementObjectSearcher objectList = new ManagementObjectSearcher(mScope, query);

        try
        {
            foreach (ManagementObject obj in objectList.Get())
            {
                string description = obj["Description"].ToString();
                string deviceId = obj["DeviceID"].ToString();

                if (description.Contains("uino"))
                {
                    return deviceId;
                }
            }
        }
        catch (Exception)
        {

        }
        return "";
    } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-06-17T01:08:11.797

基本上，这是由于 HID（人机接口设备）

我认为这是由于 arduino 板提供的 HID。Arduino 硬件（因此，微控制器）使用 HID 直接与 PC 通信（因此，不需要额外的设备）。HID 可以充当鼠标、键盘或简单的串行设备（它“简单地”向 PC 声明自己为串行端口）。所以不知何故，与PC通信时有一些“智能”方式。

另一方面，USBtoSerial 转换器和一些 Arduino 板，如嵌入 FTDI（或 CH340）的 Arduino Nano，这些“必须”表现为正常的 comport，因为背后没有智能（HID 背后的那个） ）。

# javascript - 引导轮播图像调整服务器端大小

> ID：16163776
> 
> 赞同：1
> 
> 时间：2013-04-23T07:47:07.970
> 
> 标签：javascript, twitter-bootstrap, server-side

我需要一个解决方案，使响应式设计图像也可以调整来自服务器的图像大小！

因此，例如，当用户坐在移动设备上时，可能需要相当长的时间才能将原始图像以 900x900 的分辨率上传到客户端。

有没有人以前做过这个或有一个好主意？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:18:22.360

你可以使用像 phpThumb 这样的 PHP 库 - [http://phpthumb.sourceforge.net/](http://phpthumb.sourceforge.net/)

这将在服务器上创建大小合适的图像，并保留缓存以供将来使用......

如果你正在运行 php....

**更新**

要将这样的东西集成到响应式设计中，有几种方法可以处理它。

1.  您可以使用可以检测视口大小的 javascript 库，并`src`相应地替换 img 属性。

2.  使用背景图片而不是`<img>`标签。然后你可以用 CSS 原生地做到这一点。

3.  使用 CSS`:before`和`:after`和`content: ""`通过 CSS 插入图像标签。

# php - URL 和缓存中的用户名

> ID：16163779
> 
> 赞同：1
> 
> 时间：2013-04-23T07:47:18.247
> 
> 标签：php, apache, url, caching

在我的网站上，我允许用户更改他们的用户名。用户名用于其个人资料的 URL。在我的首页上有许多包含用户名和个人资料链接（新用户、最后评论、最佳照片、新帖子等）的块。我想缓存这个页面。但是如何处理用户名？如果用户更改了他的用户名并且缓存还没有过期怎么办？那么可能会出现404错误。在他们的个人资料 url 中使用用户 ID 可以解决问题，但这是不可取的。在这种情况下如何重新验证缓存？也许有一些技巧？

我考虑了 url 之类的模式，`site.com/123/username`但它也是不可取的。我想要漂亮又短的图案`site.com/username`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:52:22.183

可能可以通过编程方式删除页面缓存。尝试这个：

```
HttpResponse.RemoveOutputCacheItem("/pages/somePage.aspx"); 
```

然后，当用户点击页面时，缓存应该用新的用户名等更新。

您也可以使用 CacheItemDependency。查看文章：[http ://aspalliance.com/668](http://aspalliance.com/668)

这绝对是解决方案

# php - file_get_contents 重定向到 302

> ID：16163783
> 
> 赞同：0
> 
> 时间：2013-04-23T07:47:34.143
> 
> 标签：php, fopen

我正在尝试使用 file_get_contents 访问外部 url。我得到了 302 作为响应。它在我的本地主机中运行良好。

```
 $to_currency= 'GBP';
 $from_currency = 'USD';
 $amount= 100;
 $urlarg = "hl=en&q=$amount$from_currency%3D%3F$to_currency";
 file_get_contents("http://google.com/ig/calculator?".$urlarg); 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:39:33.553

我不知道我以前的代码有什么问题但这对我有用

```
 $url = "http://www.google.com/ig/calculator?hl=en&q=100USD=?GBP";
    $ch = curl_init();
    $timeout = 0;
    curl_setopt ($ch, CURLOPT_URL, $url);
    curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch,  CURLOPT_USERAGENT , "Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1)");
    curl_setopt ($ch, CURLOPT_CONNECTTIMEOUT, $timeout);
    $Currency_Rate = curl_exec($ch);
    curl_close($ch); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T08:20:34.987

```
 <?php
 ini_set('allow_url_fopen',1);
 $to_currency= 'GBP';
 $from_currency = 'USD';
 $amount= 100;
 $urlarg = "hl=en&q=$amount$from_currency%3D%3F$to_currency";
 $result=file_get_contents("http://google.com/ig/calculator?".$urlarg);
 print_r($result);
 ?> 
```

我得到了结果

```
 {lhs: "100 U.S. dollars",rhs: "65.3936699 British pounds",error: "",icc: true} 
```

在 php.ini 中检查“allow_url_fopen”是否启用

# java - 如何获取 as400 (jt400) 登录用户列表

> ID：16163784
> 
> 赞同：1
> 
> 时间：2013-04-23T07:47:41.050
> 
> 标签：java, ibm-midrange, jt400

我正在开发 IBM AS400 客户端访问软件。我正在尝试登录用户列表。有 70 多个登录用户，但我的代码只给了我 6 个用户详细信息。任何人都可以帮我做这个朋友..

我的代码：

```
try {
         AS400 system = new AS400 ("SERVER","USER", "PASSWORD");
         UserList userList = new UserList(system);
         Enumeration list = userList.getUsers();

      while (list.hasMoreElements())  {
      User U = (User) list.nextElement();

      long UID = U.getUserID();
      String SUID = Long.toString(UID);

      String DESCRIPTION = U.getDescription();
      int USD_STORAGE = U.getStorageUsed();
      String USD_S = Integer.toString(USD_STORAGE);
      String COUNTRY_ID = U.getCountryID();
      String JOB_DESCRIPTION = U.getJobDescription();
      String STATUS = U.getStatus();

String[] JOBDATA = {SUID,DESCRIPTION,USD_S,COUNTRY_ID,JOB_DESCRIPTION,STATUS};
DTM.addRow(JOBDATA);

}
} catch (Exception e) {
       e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T14:30:21.153

系统安全通常限制谁可以查看用户配置文件信息。“用户”必须具有适当的权限。

# javascript - 如何验证广播 IP 地址？

> ID：16163785
> 
> 赞同：2
> 
> 时间：2013-04-23T07:47:43.867
> 
> 标签：javascript, ip

我想验证广播和多播 IP 地址，即我正在使用的两个 IP 地址：`255.255.255.0`或`229.0.0.20`.

我想在输入多播或广播 IP 时发出警报。

以下代码适用于多播地址，但如何验证广播地址？

```
[ 
  'validate-mcast-ip',
  'Please enter a valid multicast IP in this field.',
  function(v) {
    if (v == "") return true;
    if (v == "0.0.0.0") return false;

    ipPattern = /^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/;
    ipArray = v.split(".");
    isIP = ipPattern.test(v);
    if (isNaN(ipArray[0]) || ipArray[0] < 224 || ipArray[0] > 239) {
        isIP = false;
    }
    for (i = 1; i < ipArray.length; i++) {
        if (isNaN(ipArray[i]) || ipArray[i] > 255) {
        isIP = false;
        }
    }
    return isIP;
  }
] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T18:36:54.070

一个“*简单*”的正则表达式`/^(2(?:2[4-9]|3[0-9]))\.([0-2]?[0-9]?[0-9])\.([0-2]?[0-9]?[0-9])\.([0-2]?[0-9]?[0-9])$/g`应该完全符合您的要求。

```
function validateMulticastIP(ip) {
    return !!ip.match(/^(2(?:2[4-9]|3[0-9]))\.([0-2]?[0-9]?[0-9])\.([0-2]?[0-9]?[0-9])\.([0-2]?[0-9]?[0-9])$/g);
}
validateMulticastIP('2.3.5.6'); //false
validateMulticastIP('2'); //false
validateMulticastIP('230.3.5.6'); //true
validateMulticastIP('255.255.255.0'); //false
validateMulticastIP('229.0.0.20'); //true 
```

[**正则表达式 101 演示**](http://regex101.com/r/cY9lN7)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T08:37:19.157

**那么你到底想做什么呢？**您正在检查 IP（已解析为包含四个项目的数组）是否符合您设置的一些限制。假设您只想*允许*224.0.0.0 和 239.255.255.255（含）之间的所有 IP 地址，*以及*225.225.225.0 和 229.0.0.20 这两个地址（就像您最初所说的那样）。你怎么做到这一点？

首先，检查 IP 是否在 224.0.0.0 和 239.255.255.255 之间。为此，人们可以很容易地看到只需要检查第一个数字。所以：

```
if(ipArray[0]<224||ipArray[0]>239)
    return false; 
```

但是等等：如果 IP 地址是 225.225.225.0 或 229.0.0.20，我们不应该*返回*false！所以我们最后的代码片段变成了：

```
if((ipArray[0]<224||ipArray[0]>239)&&v!="255.255.255.0"&&v!="229.0.0.20")
    return false; 
```

请注意，`||`条件开头的部分是“带括号的”（因为没有更好的词）。这是因为如果我们不这样做，Javascript 解释器会认为我们的意思是：

```
if(ipArray[0]<224||(ipArray[0]>239&&v!="255.255.255.0"&&v!="229.0.0.20"))
    return false; 
```

这是因为`&&`运算符具有比运算符更高的[优先级](http://en.wikipedia.org/wiki/Order_of_operations#Programming_languages "维基百科上的运算符优先级")（请阅读文章的那部分！）`||`。

所以现在，用我们新发现的知识，让我们重写你的原始代码：

```
function (v) {
    if(v=="") return true;
    if(v=="0.0.0.0") return false;

    if(!v.match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/)) return false;
    ipArray = v.split(".");
    //We don't need to check for NAN anymore because it matched your
    //beautiful regex above
    if((ipArray[0]<224||ipArray[0]>239)&&v!="255.255.255.0"&&v!="229.0.0.20")
        return false;
    return true; //if we've reached this point, the IP conforms to the restrictions!
} 
```

你的问题得到解答了吗？如果是这样，请不要忘记帮助 Stack Overflow 并将此答案标记为已接受（绿色复选标记）！

# c - 相同的输出但不同的条件 a[3] 和 3[a]

> ID：16163786
> 
> 赞同：0
> 
> 时间：2013-04-23T07:47:46.893
> 
> 标签：c

```
char a[10] = "pqrstuvwxyz";
printf("%s", a[3]);
printf("%s", 3[a]); 
```

两个`printf`s 都给出相同的输出。为什么？

这一定与 C 编译器在内存中表示字符串的方式有关，但它是什么？

我会认为偏移量乘以 char 的大小，在这种情况下它们应该给出不同的输出。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T07:50:18.047

因为那些是等价的表达。索引相当于指针运算。

```
int x[10];
int y = x[1];
// same as (and is converted by the compiler to)...
int y = *(x + 1); 
```

由于加法是可交换的，所以它也等同于...

```
int y = *(1 + x); 
```

和...

```
int y = 1[x]; 
```

* * *

附带说明一下，您正在通过使用`%s`格式说明符并传入一个`char`. `%s`需要一个以空字符结尾的字符串，即一个以`char`空字符结尾的指针。注意你的警告。

如果要打印该数组中的子字符串，请使用：

```
printf("%s", a + 3);
// or
printf("%s", &a[3]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T07:50:10.667

您需要使用`%c`格式说明符，`a[3]`因为它是一个字符，而不是字符串。`%s`用于字符串，而不是单个字符。

至于你的问题为什么两者都有相同的输出，嗯`Both are Same`！两者都被解释为`*(a+3)`。在 C 中，你可以用两种方式来做。

并对您的代码进行一些更正：

```
printf("%s", a[3]);
printf("%s", 3[a]); 
```

将会

```
printf("%c", a[3]);
printf("%c", 3[a]); 
```

要打印整个字符串，您可以使用：

```
printf("%s", a); 
```

或者

```
printf("%s", &a[0]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T07:50:47.113

In`C` `a[i]`转换为`*(a+i)`内部。`i[a]`被转换为`*(i+a)`。数组名称也充当 c 中的指针。所以`(a+i)`或`(i+a)`给出一个正在`dereferenced`使用的地址（使用指针算术）`*`

# css - 字体大小为 100% 时的行高默认值

> ID：16163788
> 
> 赞同：23
> 
> 时间：2013-04-23T07:47:57.690
> 
> 标签：css

我必须覆盖页面的正文样式：

```
body{
    font-size:14px;
    line-height:20px;
} 
```

覆盖：

```
body{
    font-size:100%;
    line-height:?????;
} 
```

`line-height`如果我指定，财产的默认值是`font-size:100%`多少？

这些属性之间是否有严格的关系？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-04-23T07:52:20.857

[默认`line-height`](https://developer.mozilla.org/en-US/docs/CSS/line-height)是`normal`，所以使用：

```
body {
    font-size: 100%;
    line-height: normal;
} 
```

仅供参考，如果您有 Chrome，您可以通过打开网站、检查`<body>`元素并查看继承的计算样式来确认这一点。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-23T07:54:25.627

设置一个无单位的值`1`，它将计算的字体大小（即字体的大小）乘以 1，从而获得足够高的行高。

您也可以使用`1.5`更多的间距。

所以要完成你的代码

```
body{
  font-size:100%;
  line-height: 1.5;
} 
```

有关更多详细信息，请参阅[https://developer.mozilla.org/en-US/docs/CSS/line-height](https://developer.mozilla.org/en-US/docs/CSS/line-height)上的部分。使用无单位数字被认为是设置行高的首选方式。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-10-24T11:15:56.540

> ### 价值观
> 
> `normal`
> 
> 取决于用户代理。桌面浏览器（包括 Firefox）使用默认值大概**`1.2`**，取决于元素的`font-family`.
> 
> ...

[https://developer.mozilla.org/en-US/docs/Web/CSS/line-height#Values](https://developer.mozilla.org/en-US/docs/Web/CSS/line-height#Values)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-23T08:03:16.183

默认行高大约为 ~1.1em（见[此处](http://www.howtocreate.co.uk/tutorials/css/fonts)）。

但是，您可以更改 line-height 和 font-size 之间的关系，例如使用：

```
body {
    font: 100%/1.618;
} 
```

要更深入地了解 line-height 和 font-size 之间的关系，一个好的起点是：
[http ://demosthenes.info/blog/606/Molten-Leading-Exploring-The-CSS-Relationship -字体大小线高和边距之间](http://demosthenes.info/blog/606/Molten-Leading-Exploring-The-CSS-Relationship-Between-Font-Size-Line-Height-and-Margin)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-23T07:58:40.800

您可以使用相对`line-height`

如果您的原始尺寸是`font-size:14px;`并且`line-height:20px;`您想保持相同的比例，您可以使用 1 * (20/14) em 所以`line-height:1.42em;`

```
body{
    font-size:100%;
    line-height:1.42em;
} 
```

# r - sql查询和内存

> ID：16163790
> 
> 赞同：0
> 
> 时间：2013-04-23T07:48:02.023
> 
> 标签：r, memory-management

我用这样的 sqlQuery 函数进行了查询：

> 测试<- sqlQuery(ch," SELECT USER_KEY FROM TABLE1 ")

当我想保存结果（测试）时，文件的重量为200 MO，但是当我在windows任务管理器中查看时，使用了7GO的内存。

这怎么可能 ？

# iphone - 为电话号码文本字段设置适当的键盘

> ID：16163795
> 
> 赞同：0
> 
> 时间：2013-04-23T07:48:22.447
> 
> 标签：iphone, ios, keyboard, uitextfield

在我的 iPhone 应用程序中，有一个用于输入用户电话号码的文本字段。我尝试过数字键盘、电话键盘、小数键盘等。但没有一个是合适的。

如何设置包含“-”键的数字键盘？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T08:00:17.697

您可以添加 - 您自己想要添加的位置，如以下代码将添加`brackets (` 以及`dash -`在文本字段中输入数字时。

```
#pragma mark - Phone Number Field Formatting

// Adopted from: http://stackoverflow.com/questions/6052966/phone-number-formatting
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    if (textField == self.mobileNumberField) {
        int length = [self getLength:textField.text];
        if(length == 10) {
            if(range.length == 0)
                return NO;
        }
        if(length == 3) {
            NSString *num = [self formatNumber:textField.text];
            textField.text = [NSString stringWithFormat:@"(%@) ",num];
            if(range.length > 0)
                textField.text = [NSString stringWithFormat:@"%@",[num substringToIndex:3]];
        }
        else if(length == 6) {
            NSString *num = [self formatNumber:textField.text];
            textField.text = [NSString stringWithFormat:@"(%@) %@-",[num substringToIndex:3],[num substringFromIndex:3]];
            if(range.length > 0)
                textField.text = [NSString stringWithFormat:@"(%@) %@",[num substringToIndex:3],[num substringFromIndex:3]];
        }
    }
    return YES;
}

-(NSString*)formatNumber:(NSString*)mobileNumber
{
    mobileNumber = [mobileNumber stringByReplacingOccurrencesOfString:@"(" withString:@""];
    mobileNumber = [mobileNumber stringByReplacingOccurrencesOfString:@")" withString:@""];
    mobileNumber = [mobileNumber stringByReplacingOccurrencesOfString:@" " withString:@""];
    mobileNumber = [mobileNumber stringByReplacingOccurrencesOfString:@"-" withString:@""];
    mobileNumber = [mobileNumber stringByReplacingOccurrencesOfString:@"+" withString:@""];
    int length = [mobileNumber length];
    if(length > 10) {
        mobileNumber = [mobileNumber substringFromIndex: length-10];
    }
    return mobileNumber;
}

-(int)getLength:(NSString*)mobileNumber
{
    mobileNumber = [mobileNumber stringByReplacingOccurrencesOfString:@"(" withString:@""];
    mobileNumber = [mobileNumber stringByReplacingOccurrencesOfString:@")" withString:@""];
    mobileNumber = [mobileNumber stringByReplacingOccurrencesOfString:@" " withString:@""];
    mobileNumber = [mobileNumber stringByReplacingOccurrencesOfString:@"-" withString:@""];
    mobileNumber = [mobileNumber stringByReplacingOccurrencesOfString:@"+" withString:@""];
    int length = [mobileNumber length];
    return length;
} 
```

[取自这里](https://gist.github.com/gdavis/2845766)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T08:17:32.117

我认为您可以使用`UIKeyboardTypePhonePad`和 使用按钮的`inputAccessoryView`属性。`UITextField``-`

### 代码：

```
UIToolbar *punctuationbar = [[UIToolbar alloc]initWithFrame:CGRectMake(0, 0, 320, 50)];
numberToolbar.barStyle = UIBarStyleBlackTranslucent;
numberToolbar.items = [NSArray arrayWithObjects:
                       [[UIBarButtonItem alloc]initWithTitle:@"-" style:UIBarButtonItemStyleBordered target:self action:@selector(addHyphen)],
                       nil];
[numberToolbar sizeToFit];
_yourTextField.inputAccessoryView = punctuationbar; 
```

并添加如下`addHyphen`方法：

```
- (void)addHyphen
{
  _yourTextField.text = [_yourTextField.text stringByAppendingString:@"-"];
} 
```

**注意：**此方法将附加`-`在文本的末尾。您需要修改上述方法。

* * *

### 参考：

> **输入附件视图**
> 
> 当文本字段成为第一响应者时显示的自定义附件视图`@property (readwrite, retain) UIView *inputAccessoryView;`
> 
> **讨论**
> 
> 此属性的默认值为 nil。当文本字段成为第一响应者时，将视图分配给此属性会导致该视图显示在标准系统键盘上方（或自定义输入视图上方，如果提供的话）。例如，您可以使用此属性将自定义工具栏附加到键盘。可用性
> 
> ```
> Available in iOS 3.2 and later. 
> ```
> 
> 在 UITextField.h 中声明

参考[UITextField 类](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextField_Class/Reference/UITextField.html)

# php - 使用 PHP 从 MySQL 中选择类别 ID 和所有子类别 ID

> ID：16163798
> 
> 赞同：1
> 
> 时间：2013-04-23T07:48:31.727
> 
> 标签：php, mysql, categories, recursive-query

我的数据库结构和数据是这样的：

```
id    |   sub   |   title
------+---------+----------
1     |   0     | Cat 1
2     |   0     | Cat 2
3     |   1     | Cat1-1
4     |   2     | Cat2-1
5     |   2     | Cat2-2
6     |   5     | Cat2-2-1 
```

现在，当我有 id 4 时，我想选择所有子类别 ID，所以我应该选择 4,5,6 。我知道我应该使用递归函数，但我不知道该怎么做:-(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:51:21.623

假设您在 URL 中传递 id

所以你可以像

```
$category_id = $_GET['id']; //Say 4 here, 
//Also don''t forget to validate that ID and sannitize it before you use it in your query

so now you can fetch the sub categories like

$fetch_sub_cat = mysqli_query($connection, "SELECT * FROM table_name WHERE id = $category_id");

while($throw_results = mysqli_fetch_array($fetch_sub_cat)) {
   echo $throw_results['id'];
} 
```

如果您正在循环您的类别 ID，那么您需要嵌套此循环以及查询以获取子类别

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-23T08:40:48.917

给你一些信息，你可以更改列名并使用

```
$data=array(
array('Menu_ID'=>1, 'Menu_Name'=>'Catalog', 'Menu_Link'=>'#', 'Menu_ParentID'=>0),
array('Menu_ID'=>2, 'Menu_Name'=>'Reports', 'Menu_Link'=>'#', 'Menu_ParentID'=>0),
array('Menu_ID'=>3, 'Menu_Name'=>'Products','Menu_Link'=> '#','Menu_ParentID'=> 1),
array('Menu_ID'=>4, 'Menu_Name'=>'Sales','Menu_Link'=> '#', 'Menu_ParentID'=>2),
array('Menu_ID'=>5, 'Menu_Name'=>'Customers','Menu_Link'=> '#', 'Menu_ParentID'=>2),
array('Menu_ID'=>6, 'Menu_Name'=>'Tvs','Menu_Link'=> '#','Menu_ParentID'=> 3));

print_r(loop_menu($data));

// Menu_ID Menu_Name Menu_Link Menu_ParentID
function loop_menu($rows,$parent = 0){
 $arr=array();
 $i=0;
  foreach ($rows as $row)
  { 
        if (array_key_exists('Menu_ParentID',$row) && $row['Menu_ParentID'] == $parent){

                if(array_key_exists($i,$arr)){
                    $arr[$i]=array();
                }
                $arr[$i]['data']=$row;
                $arr[$i]['child']= loop_menu($rows,$row['Menu_ID']);
                $i++;
        }
  }
    return $arr;
} 
```

然后

```
Array
(
    [0] => Array
        (
            [data] => Array
                (
                    [Menu_ID] => 1
                    [Menu_Name] => Catalog
                    [Menu_Link] => #
                    [Menu_ParentID] => 0
                )

            [child] => Array
                (
                    [0] => Array
                        (
                            [data] => Array
                                (
                                    [Menu_ID] => 3
                                    [Menu_Name] => Products
                                    [Menu_Link] => #
                                    [Menu_ParentID] => 1
                                )

                            [child] => Array
                                (
                                    [0] => Array
                                        (
                                            [data] => Array
                                                (
                                                    [Menu_ID] => 6
                                                    [Menu_Name] => Tvs
                                                    [Menu_Link] => #
                                                    [Menu_ParentID] => 3
                                                )

                                            [child] => Array
                                                (
                                                )

                                        )

                                )

                        )

                )

        )

    [1] => Array
        (
            [data] => Array
                (
                    [Menu_ID] => 2
                    [Menu_Name] => Reports
                    [Menu_Link] => #
                    [Menu_ParentID] => 0
                )

            [child] => Array
                (
                    [0] => Array
                        (
                            [data] => Array
                                (
                                    [Menu_ID] => 4
                                    [Menu_Name] => Sales
                                    [Menu_Link] => #
                                    [Menu_ParentID] => 2
                                )

                            [child] => Array
                                (
                                )

                        )

                    [1] => Array
                        (
                            [data] => Array
                                (
                                    [Menu_ID] => 5
                                    [Menu_Name] => Customers
                                    [Menu_Link] => #
                                    [Menu_ParentID] => 2
                                )

                            [child] => Array
                                (
                                )

                        )

                )

        )

) 
```

然后将数组之类的代码编码为 ul

[http://sandbox.onlinephpfunctions.com/code/2b3ab04f959413ebf75b65034edd60da61ed0020](http://sandbox.onlinephpfunctions.com/code/2b3ab04f959413ebf75b65034edd60da61ed0020)

另一种数组样式

```
$arr[$i]['data'] = $row;
$arr[$i]['child']= loop_menu($rows,$row['Menu_ID']); 
```

改成

```
$row['child'] = loop_menu($rows,$row['Menu_ID']);
$arr[$i] = $row; 
```

# java - 用java编写的程序双击打开文件

> ID：16163803
> 
> 赞同：2
> 
> 时间：2013-04-23T07:48:39.163
> 
> 标签：java

我想知道是否可以通过双击文件在我的程序中打开用java编写的文件？

例如：在我的桌面上有一个由我的程序构建的文件“test.dat”。如果我尝试打开这个文件，我的程序会出现并询问我想用那个文件做什么。

是否可以使用 java 实现该功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T07:54:11.280

操作系统决定了哪些应用程序与给定的扩展相关联。如果适合您，您可以配置您的操作系统以使用您的程序打开**所有文件。** `.dat`或者创建一个快捷方式或一个启动器来告诉使用什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-19T09:38:49.927

我明白你在问什么。您想知道如何获取从操作系统传递给您的应用程序的参数，然后调用您的打开文件方法。

您的 java 程序有一个类，该类具有一个 main 方法，该方法被调用以启动您的应用程序。此类在清单文件中列为 Main-Class：com.your.package.MainClass。方法签名看起来像：

```
public static void main(final String args[]) { 
```

字符串数组 args[] 包含从命令行传递给程序的任何参数。当您告诉操作系统将文件与可执行文件相关联，然后双击该文件时，操作系统会将文件名（完整路径）作为此字符串数组中的第一个参数传递给可执行文件。棘手的部分是您不能只将文件扩展名与 jar 文件相关联，因为 jar 文件不是可执行文件。jar 文件实际上与 java.exe 或 javaw.exe 相关联。因此，要完成这项工作，您需要创建一个调用 java.exe 或 javaw.exe 的批处理文件（或取决于您的操作系统的 shell 脚本），将类路径设置为您的 jar 文件，运行主类，然后传递参数到你的程序。这就是如何在 Windows 上的批处理文件中完成的。

```
"C:\Program Files\Java\jre1.8.0_25\bin\javaw.exe" -cp C:\Path\To\Your\Jar\File.jar com.your.package.MainClass %1 
```

然后，不是将 .dat 文件与 jar 文件相关联，而是将其与此批处理文件相关联。%1 将导致文件名作为 args[0] 传递给您的 MainClass，然后您可以将其传递给您的 openFile(arg[0]) 方法，瞧，文件已打开。您也不仅限于 %1。如果操作系统将多个文件传递给您的程序，例如，如果您选择了多个 .dat 文件，您可以拥有 %1 %2 %3 等。这将在 Unix shell 脚本中以类似的方式完成。

```
/usr/bin/javac -cp /Path/To/Your/Jar/File.jar com.your.package.MainClass %1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T07:53:37.143

通过双击“打开”文件是 Windows 操作系统的一项功能，通过将文件扩展名映射到特定程序来控制。

如果要运行打包在`jar`文件中的 java 程序，则必须创建所谓的“可运行”jar 并将 jar 扩展名映射到名为`java`or的程序`javaw`。

# ios - Tableview UiDesign 复杂性

> ID：16163804
> 
> 赞同：5
> 
> 时间：2013-04-23T07:48:41.710
> 
> 标签：ios, ios6, iphone-sdk-3.0

![在此处输入图像描述](https://i.stack.imgur.com/5Gorl.png)任何人都可以指导我为 UITableView 实现这个 UI 设计。我有一个表格视图，其中包含不同颜色的单元格，每个单元格中有一些标签。

当用户滚动表格视图时，彩色单元格上的标签应返回到底部栏，底部栏位于屏幕底部，有两行，但底部栏背景颜色应更改为与所选单元格颜色相同.

```
i think the attached image will give you clear idea how it should be 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T15:34:14.910

我希望我从我的代码中得到的结果是你所期望的。

结果如下所示。

![在此处输入图像描述](https://i.stack.imgur.com/ZeddO.png)

如果结果是预期的结果，请按照以下步骤操作：-

**第 1 步：**设置 UIView。

我使用故事板方法来设计这个应用程序。在顶部和底部添加一个 UIView。在它们之间添加一个 UITableView。

这将导致以下 UIView。由于我使用的是故事板方法，因此我可以将自定义单元格直接添加到 UITableView。

注意：您需要为要在代码中重用的单元格设置“标识符”。为此，请转到属性 Inspector ，并将字符串设置为“标识符”字段。假设标识符是“CellID”，您将在代码中使用它。

设置好 UIView 后，请在底部视图中创建一个 IBOutlet，并将 UITableView 的委托、数据源标记到 ViewController。

![在此处输入图像描述](https://i.stack.imgur.com/dAmMm.png)

**步骤 2**编码

我使用了 UIColor 对象的 NSArray，一个数组用于选定的背景颜色，另一个用于单元格的正常背景颜色。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    /*
    Loading UIColor into NSArray.
    */

    colors=[NSArray arrayWithObjects:[UIColor colorWithRed:1.0 green:0.0 blue:0.0 alpha:0.2],
        [UIColor colorWithRed:0.0 green:1.0 blue:0.0 alpha:0.2 ],
            [UIColor colorWithRed:0.0 green:0.0 blue:1.0 alpha:0.2  ],[UIColor colorWithRed:1.0 green:1.0 blue:0.0 alpha:0.2], nil];

    selectionColors=[NSArray arrayWithObjects:[UIColor colorWithRed:1.0 green:0.0 blue:0.0 alpha:1.0],
            [UIColor colorWithRed:0.0 green:1.0 blue:0.0 alpha:1.0 ],
            [UIColor colorWithRed:0.0 green:0.0 blue:1.0 alpha:1.0  ],[UIColor colorWithRed:1.0 green:1.0 blue:0.0 alpha:1.0], nil];
} 
```

*表方法*

```
-(NSInteger) numberOfSectionsInTableView:(UITableView *)tableView{
    return 12;
}

-(NSInteger) tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return 1;
}

-(void) tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath{
    /*
     Setting up the background colours for selected and normal state
    */
    cell.backgroundColor=[colors objectAtIndex:(indexPath.section%4)];
    UIView *selectedBackgroudView=[[UIView alloc] init];
    [selectedBackgroudView setBackgroundColor:[selectionColors objectAtIndex:indexPath.section%4]];
    cell.selectedBackgroundView=selectedBackgroudView;
}

-(UITableViewCell*) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    /*
     This cell Identifier must be the same which you have set in the storyboard file for a UITableViewCell
     */
    static NSString *cellIdentififer=@"CellID";
    UITableViewCell *cell=[tableView dequeueReusableCellWithIdentifier:cellIdentififer];
    return cell;
}

-(CGFloat) tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger)section{
    return 10.0;
}

-(UIView*) tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section{
    /*
      To have spacing for each section with height is 10.0
     */
    UIView *footerV=[[UIView alloc] init];
    return footerV;
}

-(void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
    /*
      Setting up the shadow to the bottomView based on the selected cell, selected background colour.
     */
    UITableViewCell *cell=[tableView cellForRowAtIndexPath:indexPath];
    UIColor *color=cell.selectedBackgroundView.backgroundColor;;
    self.bottomView.backgroundColor=color;
    self.bottomView.layer.shadowColor=color.CGColor;
    self.bottomView.layer.shadowOpacity=0.9;
    self.bottomView.layer.shadowPath=[UIBezierPath bezierPathWithRect:CGRectMake(-10.0, -10.0, self.view.frame.size.width+20, 20)].CGPath;
} 
```

# php - php析构函数调用过快，界面流畅

> ID：16163812
> 
> 赞同：2
> 
> 时间：2013-04-23T07:49:21.637
> 
> 标签：php, mysql, destructor, fluent-interface

我发现关于 php 析构函数的一个非常奇怪的事情：

基本上我有一个数据库管理类，它使用工厂加载适配器来定义应该加载哪个适配器（mysql、mysqli等）

我将只写下有趣的代码部分，因为类本身更长，但代码不涉及当前的问题

问题只发生在 mysql 上（mysqli 和 pdo 工作得很好），但出于兼容性目的，摆脱 mysql 是不可能的。

```
class manager
{
    private static $_instance;

    public static function getInstance()
    {
        return isset(self::$_instance) ? self::$_instance : self::$_instance = new self;
    }

    public function getStandaloneAdapter()
    {
        return new mysql_adapter(array('host'=>'127.0.0.1', 'username' => 'root', 'password' => '', 'dbname' => 'etab_21'));
    }
}

abstract class abstract_adapter
{
    protected $_params;
    protected $_connection;

    public function __construct($params)
    {
        $this->_params = (object)$params;
    }

    public function __destruct()
    {
        echo 'destructor<br/>';
        var_dump(debug_backtrace(false));
        $this->closeConnection();
    }

    abstract public function closeConnection();
}

class mysql_adapter extends abstract_adapter
{
    public function getConnection()
    {
        $this->_connect();

        if ($this->_connection) {
            // switch database
            $this->_useDB($this->_params->dbname);
        }

        return $this->_connection;
    }

    protected function _connect()
    {
        if ($this->_connection) {
            return;
        }

        // connect
        $this->_connection = mysql_connect(
            $this->_params->host,
            $this->_params->username,
            $this->_params->password,
            true
        );

        if (false === $this->_connection || mysql_errno($this->_connection)) {
            $this->closeConnection();
            throw new Mv_Core_Db_Exception(null, Mv_Core_Db_Exception::CONNECT, mysql_error());
        }

        if ($this->_params->dbname) {
            $this->_useDB($this->_params->dbname);
        }
    }

    private function _useDB($dbname)
    {
        return mysql_select_db($dbname, $this->_connection);
    }

    public function isConnected()
    {
        $isConnected = false;
        if (is_resource($this->_connection)) {
            $isConnected = mysql_ping($this->_connection);
        }
        return $isConnected;
    }

    public function closeConnection()
    {
        if ($this->isConnected()) {
            mysql_close($this->_connection);
        }
        $this->_connection = null;
    }
} 
```

所以这是我正在运行的测试：

```
$sadb1 = manager::getInstance()->getStandaloneAdapter()->getConnection();
var_dump($sadb1); 
```

和我得到的输出：

```
destructor
array
  0 => 
    array
      'file' => string '**\index.php' (length=48)
      'line' => int 119
      'function' => string '__destruct' (length=10)
      'class' => string 'abstract_adapter' (length=16)
      'type' => string '->' (length=2)
      'args' => 
        array
          empty
  1 => 
    array
      'file' => string '**\index.php' (length=48)
      'line' => int 119
      'function' => string 'unknown' (length=7)
resource(26, Unknown) 
```

如果我将测试更改为：

```
$sadb1 = manager::getInstance()->getStandaloneAdapter();
var_dump($sadb1->getConnection()); 
```

输出很好：

```
resource(26, mysql link)
destructor
array
  0 => 
    array
      'function' => string '__destruct' (length=10)
      'class' => string 'abstract_adapter' (length=16)
      'type' => string '->' (length=2)
      'args' => 
        array
          empty 
```

**哇？！**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T08:40:45.463

在第一个测试中运行的早期析构函数是自动垃圾收集的结果。为了理解这一点，让我们看一下第二个（更简单的）测试：

```
1\. $db = Mv_Core_Db_Manager::getInstance();
2\. $sadb = $db->getStandaloneAdapter('bdm_bcb');
3\. var_dump($sadb->getConnection()); 
```

脚步：

1.  数据库管理器被分配给变量 $db，
2.  独立适配器（在这种情况下是 MySQL 适配器，由于您为调试而引入的工厂中的 hack）被分配给 $sadb，
3.  `var_dump()``getConnection()`调试$sadb 独立适配器的方法的返回值，这是`resource(29, mysql link)`您的第二个输出中的行，
4.  清理时间；PHP 垃圾收集器运行 $sadb 的析构函数（由于调试，在您的输出中可见）和之后的 $db（在您的输出中不可见）。

最后，垃圾收集正在发生。

如果您考虑您描述的第一个测试，尽管源代码看起来很相似，但它有不同的步骤：

```
1\. $db = Mv_Core_Db_Manager::getInstance();
2\. $sadb = $db->getStandaloneAdapter('bdm_bcb')->getConnection();
3\. var_dump($sadb); 
```

脚步：

1.  在上面的测试用例中相同，
2.  `getConnection()`MySQL 独立适配器对象的 getter 的返回值分配给 $sadb，
3.  因为 MySQL 独立适配器本身**没有**分配给任何变量，PHP 垃圾收集器决定不再使用它，因此它清理对象并运行其析构函数（析构函数调试首先在您的输出中可见），
4.  `var_dump()`调试 MySQL 独立适配器的 getter 返回的值`getConnection()`，它基本上是一个已被垃圾收集器收集的资源的句柄。

这里垃圾收集发生在之前`var_dump()`。

总而言之，您提供的第一个测试强制垃圾收集器在代码的第 2 行和第 3 行之间跳转。另一方面，第二个测试在最后强制进行垃圾收集。

结果是您的资源句柄指向已被 GC 清理的内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T08:45:58.363

根据提供的代码...

## PHP __destruct()

该[`__destruct()`](http://www.php.net/manual/en/language.oop5.decon.php)方法，根据文档：

> 只要没有对特定对象的其他引用，或者在关闭序列期间以任何顺序调用，就会调用析构函数方法。

您会遇到不同结果的原因是：

```
$sadb1 = manager::getInstance()->getStandaloneAdapter()->getConnection();
var_dump($sadb1); 
```

给你不正确的结果（你所期望的）是在你的代码中没有更多对该`mysql_adapter`实例的引用，因此该`__destruct()`方法被调用，这样做会关闭对`resource`持有`mysql`链接的引用 - 因为 PHP5 很聪明并且通过了大多数事情通过引用自动神奇地发生（好事 - 大多数时候^^），所以当你时`var_dump($sadb);`，该`__destruct`方法在前一行被调用，所以`var_dump`给你一个参考，但现在什么都没有。

这段代码为您提供了您所期望的原因：

```
$sadb1 = manager::getInstance()->getStandaloneAdapter();
var_dump($sadb1->getConnection()); 
```

是您转储资源，*然后*`__destruct`调用该方法，并`debug_trace`在转储之后为您提供 , 。

我希望这有助于为您解决有关析构函数的问题。

*Out of curiosity, why is `b` 'sad'? (`$sadb`) ^^*

# wcf - 如果我的静态 IP 发生变化，我是否必须重新部署引用 WCF 的应用程序？

> ID：16163815
> 
> 赞同：1
> 
> 时间：2013-04-23T07:49:25.700
> 
> 标签：wcf, deployment

我有一个 WPF 应用程序、一个 WCF 服务和一个使用另一个 WCF 服务的 Web 服务，这些服务部署在具有静态 IP 的服务器上。现在，我的客户问我是否可以更改服务器 IP。在我使用此 WCF 服务的地方，我是否必须使用更新的服务引用和新的 IP 重建和重新部署我的应用程序，或者只是更新配置文件 (web.config/application.exe.config) 并更新端点地址对我有用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:52:08.227

据我所知`web.config`，只要 IP 是唯一的区别，通常就足以更新您的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:57:55.740

使用 dns 名称，您将避免在 dns 更新后更改 ip 时发生更改。

# iphone - 如何为 iOS 复制 Facebook 的撰写状态屏幕？

> ID：16163817
> 
> 赞同：2
> 
> 时间：2013-04-23T07:49:27.650
> 
> 标签：iphone, ios, objective-c, facebook, core-text

![在 iOS 版 Facebook 中撰写状态消息 UIView](https://i.stack.imgur.com/rdbF1.jpg)

我正在尝试为我的应用程序构建一个撰写状态屏幕，我正在寻找适用于 iOS 的 Facebook 以获得灵感。以上是他们的撰写状态屏幕。

我知道顶部只是导航栏，底部可以是一个带有按钮的简单视图（我实际上只有相机和位置图标）。但是，我不太清楚是什么 UI 组件构成了中间的全屏`UITextView`。我正在尝试复制它，除了左上角没有个人资料图片。

当您键入状态消息时，它看起来像一个普通的`UITextView`. 但是，当您标记位置时，`-- at (name of location)`会附加到`UITextView`并随着您键入的状态结束而移动。现在，我不认为这是一个`UITextView`功能。此外，位置文本不可编辑。更重要的是，`-- at`它是不可点击的，但蓝色的位置本身（在本例中为星巴克咖啡）是可点击的。

至于照片附件，我可以想象它只是`UIImageView`添加`addSubview`到包含它的父视图以及所有构成状态和位置的内容的添加。我的问题是，究竟是什么构成了它们？

我尝试过的：嗯，我并没有真正编写任何代码，但我一直在环顾四周并检查 Core Text 以寻找可能的实现。但是，感觉它不是正确的工具，因为状态消息需要是可编辑的。据我了解，Core Text 仅对渲染位置标记之类的内容有用，而不能编辑状态消息本身之类的文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T08:01:33.300

对于高级文本视图，请查看`UITextInput`协议，它非常强大，可以为您提供所需的东西。

# javascript - Extjs4 Exporterbutton 不显示在 Firefox 中

> ID：16163822
> 
> 赞同：0
> 
> 时间：2013-04-23T07:49:45.920
> 
> 标签：javascript, grid, extjs4

**通过更新FF的Falshplayer插件解决了这个问题！**

我有一个大问题，我必须解决它。ExtJS4 中的我的 Exporterbutton 在 Firefox 中不显示。

我使用 Firefox 20.0

而这段代码：

```
 Ext.define(
    'Eva.webui.view.statistic.waterfall.finances.list.Tbar',
    {
        extend: 'Ext.toolbar.Toolbar',
        alias: 'widget.statistic_waterfall_finances_list_tbar',

        requires: ['Ext.ux.exporter.Exporter'],

        items: [
            {
                xtype: 'exporterbutton',
                text: 'Download CSV',
                downloadName: 'Wasserfall_Statistik_Finanzen',
                formatter: 'csv'
            },
            '->',
            {
                xtype: 'button',
                tooltip: 'Liste neu laden',
                iconCls: 'x-tbar-loading',
                action: 'read'
            }]
    }
); 
```

仅适用于 Chrome，但不适用于 Firefox。

让它在 Firefox 中运行的诀窍在哪里？

提前致谢。

# applescript - 使用 AppleScript 打开 App

> ID：16163823
> 
> 赞同：0
> 
> 时间：2013-04-23T07:49:49.893
> 
> 标签：applescript, automator

我已经调整了“添加 - 新项目警报”苹果脚本并将其作为文件夹操作应用于我的“卷”文件夹。调整后的脚本应该检测何时插入新的 USB 驱动器并打开应用程序（Automator 工作流程），然后将文件复制到驱动器并弹出它。

**第一期**

***当我在 AppleScript 编辑器中运行脚本时，它可以工作。***但是，当插入 USB 驱动器时脚本自动运行时，它只会告诉我它已检测到新驱动器并且没有打开应用程序。我正在使用 do shell 脚本“open -a Conference_Copy_Paste”来打开位于我的应用程序文件夹中的应用程序（请参阅下面的 AppleScript 代码）。

**使用的代码开始--->**

属性 dialog_timeout : 0 -- 设置对话自动应答之前的时间量。

执行 shell 脚本“open -a Conference_Copy_Paste”

在收到 added_items 后将文件夹项目添加到 this_folder 尝试告诉应用程序“Finder”--获取文件夹的名称 将 folder_name 设置为 this_folder 的名称 end tell

```
 -- find out how many new items have been placed in the folder
    set the item_count to the number of items in the added_items
    --create the alert string
    set alert_message to ("Folder Actions Alert:" & return & return) as Unicode text
    if the item_count is greater than 1 then
        set alert_message to alert_message & (the item_count as text) & " new items have "
    else
        set alert_message to alert_message & "One new item has "
    end if
    set alert_message to alert_message & "been placed in folder " & «data utxt201C» & the folder_name & «data utxt201D» & "."
    set the alert_message to (the alert_message & return & return & "Would you like to view the added items?")

    set the user_choice to the button returned of the result

    if user_choice is "Yes" then
        tell application "Finder"
            --go to the desktop 
            activate
            --open the folder
            open this_folder
            --select the items
            reveal the added_items
        end tell
    end if
end try 
```

结束将文件夹项目添加到

**<--- 使用的代码结束**

**第 2 期**

使用此应用程序大约 10 次后，我在运行它时开始出现错误。错误显示“您无权将文件“任何文件”保存在“任何文件夹”文件夹中。” 解决此问题的唯一方法是重新启动我的系统。有没有更好的方法来解决这个特定问题？

Automator 应用程序的工作流程运行“获取指定的查找器项目”、“复制查找器项目”，然后运行“弹出磁盘”。

提前感谢任何可以帮助我解决这个问题的人。我迫切需要它来工作，因为我必须将文件复制并粘贴到 1k​​ USB 驱动器以进行会议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:00:46.880

尝试移动

```
do shell script "open -a Conference_Copy_Paste" 
```

在：

```
on adding folder items to this_folder after receiving added_items 
```

# git - git：如果当前目录是工作树子目录并且 $GIT_DIR 未设置，则获取有效的 GIT_DIR

> ID：16163829
> 
> 赞同：4
> 
> 时间：2013-04-23T07:50:14.923
> 
> 标签：git

从脚本中，如何确定当前的 GIT_DIR？如果没有被覆盖，它只是顶级目录或裸仓库的顶级目录。

我想要类似的东西：

```
[/git/repo1/subdir]$ git show-git-dir
/git/repo1/.git 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T07:58:04.683

这可以通过[rev-parse](http://jk.gs/git-rev-parse.html)来完成：

```
git rev-parse --git-dir 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T08:11:36.253

这是一个纯 bash 版本，当你在根目录下时会找到该目录。（顺便说一下，Ikke 的解决方案更好）。

```
a=$PWD

while [ "$a" != "" ] && [ "$a" != '/' ];
do
    a=`dirname $a`;
    if [ -d $a/.git ];
    then
        echo "$a";
        break;
    fi
done 
```

在 Windows 上，您可能必须添加另一个 [ "$a" != '\' ] 来测试这种情况，我目前无权检查 Msysgit 附带的 bash shell 是否支持“dirname”。

但适用于 Ubuntu 上的终结者。

# python - 如何在python中的ascci 32和ascii 126之间循环ascii

> ID：16163831
> 
> 赞同：0
> 
> 时间：2013-04-23T07:50:20.657
> 
> 标签：python

我正在编写一个凯撒密码程序，当它加密自己时，我需要将我的值保持在 32 和 126 的范围内（可打印的 ascii 集）。所以当它达到 126 时，它会循环回 32

这是代码

```
print("enter sentence to encrypt:")
string = input()
print("Please enter positive offset value:")
value = int(input())
finalstring = [ord(c) for c in string]
finalstring[:] = [c + value for c in finalstring]
finalstring = ''.join(chr(i) for i in finalstring) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T07:54:25.953

假设您有一个`v`要添加的变量`a`，并将其限制在`32..126`包含的范围内，则应该这样做：

```
v = (v - 32 + a) % (127 - 32) + 32 
```

因此，例如，将 3 添加到 125 时：

```
v = (125 - 32 + 3) % (127 - 32) + 32
  =       96       %    95      + 32
  =                1            + 32
  =                       33 
```

更普遍：

```
def addWithConstraint (loval, hival, val, plus):
    return (val - loval + plus) % (hival + 1 - loval) + loval 
```

但是请注意，某些模运算可能无法满足您对负数的期望，但您可以通过确保始终添加正数来解决此问题。例如，您可以在该函数的开头插入如下内容：

```
while plus < 0:
    plus = plus + hival + 1 - loval 
```

# jquery - 在 Jquery DataTable 中调用 fnAdjustColumnSizing 的位置

> ID：16163832
> 
> 赞同：2
> 
> 时间：2013-04-23T07:50:30.550
> 
> 标签：jquery, jquery-plugins, datatables

当 scrollx 应用于表格时，我正在处理我在 Datatables.net 中遇到的 UI 问题。

感谢这个[Jquery DataTable UI 问题——何时调用 fnAdjustColumnSizing](https://stackoverflow.com/questions/16162782/jquery-datatable-ui-issue-when-to-call-fnadjustcolumnsizing)但等待答案

我正在尝试应用调整大小

```
 $(window).bind('resize', function () {
        oTable.fnAdjustColumnSizing();
    }); 
```

但这仅在我调整浏览器大小时才能解决我的问题。否则我的用户界面看起来很乱。

我也尝试在 InitComplete 中申请

```
"fnInitComplete": function () {
                console.log("Compelete");
                this.fnAdjustColumnSizing(true);
            }, 
```

但在我调整大小之前，它仍然没有修复。

我需要在哪里调用 fnAdjustColumnSizing 以便它在加载完成时修复 UI？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T12:50:14.317

Itz有点晚了，但这对我有用。

完成 DataTable 代码后

```
 if (oTable != "") {
        oTable.fnAdjustColumnSizing(); //oTable is the variable which holds DataTable

    } 
```

并在您的调整大小中添加。

谢谢

# sql - SQL查询一对多关系中的最新记录

> ID：16163849
> 
> 赞同：1
> 
> 时间：2013-04-23T07:51:20.940
> 
> 标签：sql, postgresql

我在为语句建立 SQL 查询时遇到问题，该语句将计算一个表中的行数：

```
ID       Date             Status_id     Parent_id
1        2012-1-1         2             1    
2        2012-3-21        1             2  
3        2012-3-6         1             1    
4        2012-6-11        1             3   
5        2012-1-7         2             1    
6        2012-1-5         1             3 
```

陈述：

```
SELECT COUNT(*) 
FROM person 
WHERE date BETWEEN '2012-1-1' AND '2012-1-30' AND status_id=1 
```

给我编号`3`，但这个数量是具有相同父级的行，我只想计算唯一的父级，如果有两行具有相同的父级，则只有具有最新日期计数的行。谁能给我一个提示，我可以如何改进查询以像我描述的那样工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T08:09:25.290

试试这个查询

```
SELECT 
   COUNT(DISTINCT Parent_id) 
FROM 
   person 
WHERE 
   date BETWEEN '2012-1-1' AND '2012-1-30' AND 
   status_id=1 
```

希望能帮助到你....

# android - 在 Activity 中填充 WebView 的问题

> ID：16163851
> 
> 赞同：0
> 
> 时间：2013-04-23T07:51:21.697
> 
> 标签：android, android-activity, android-webview

我正在编写一个应用程序来在我的活动中启动 webView。但它是在网络浏览器中启动的。

我也参考了[链接](https://stackoverflow.com/questions/5561709/opening-webview-not-in-new-browser)和[本教程](http://www.androidaspect.com/2012/09/android-webview-tutorial.html)

但是当我使用时`shouldOverrideUrlLoading`，我只能得到空白屏幕。

对于那个问题，我参考[了这个链接](https://stackoverflow.com/questions/4577698/opening-new-android-activity-with-a-webview-shows-a-blank-white-screen-instead?rq=1)

但是在我的情况下没有人帮助..

我已经给出了我的代码。

请注意我犯了什么错误？

我的代码是：

webview.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center_horizontal|center_vertical"
    android:orientation="vertical" >

    <WebView
        android:id="@+id/webView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="center_horizontal|center_vertical" >
    </WebView>

</LinearLayout> 
```

WebViewActivity.java

```
public class webViewActivity extends Activity {

    private WebView webView;
    private String strUrl;
    public final String TAG = "webViewActivity";
    ProgressBar progBar;

    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        getWindow().requestFeature(Window.FEATURE_NO_TITLE);
        getWindow().requestFeature(Window.FEATURE_PROGRESS);
        setContentView(R.layout.webview);
        Bundle bundle = getIntent().getExtras();
        strUrl = bundle.getString("URL");
        Log.d(TAG, "link is " + strUrl);
        // strUrl = "www.google.com";
        webView = new WebView(this);
        webView.loadUrl(strUrl);

        // progBar = (ProgressBar)findViewById(R.id.progWeb);
        webView.getSettings().setJavaScriptEnabled(true);
        webView.setWebViewClient(new WebViewClient() {
            @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url) {
                // TODO Auto-generated method stub
                view.loadUrl(strUrl);
                return true;
            }
        });
} 
```

请帮助纠正我的错误。

先感谢您！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T07:56:36.803

```
 <WebView
    android:id="@+id/webView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_gravity="center_horizontal|center_vertical" >
   </WebView> 
```

在您的活动中，您需要找到 webview 的 id。

```
webView = new WebView(this); 
```

您正在创建一个 webview，但您没有将其添加到您的布局中

您已经在 xml 中定义了 webview，因此无需再次创建相同的。找到 webview 的 id 并相应地加载 url。

```
 setContentView(R.layout.webview);
   webView = (WebView) findViewById(R.id.webView);// you need to find the id of webview
   Bundle bundle = getIntent().getExtras();
   strUrl = bundle.getString("URL");      
   webView.loadUrl(strUrl);
    webView.getSettings().setJavaScriptEnabled(true);
    webView.setWebViewClient(new WebViewClient() {
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            // TODO Auto-generated method stub
            view.loadUrl(strUrl);
            return true;
        }
    }); 
```

确保您已在清单文件中添加 Internet 权限

```
 <uses-permission android:name="android.permission.INTERNET"/> 
```

检查以下链接中的编辑 2 以获取工作示例

[在 WebView 中启用后退按钮](https://stackoverflow.com/questions/16152491/enable-back-button-in-webview/16152530#16152530)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T09:18:05.980

我试过你的代码，问题在于动态调用 webview 检查。你没用过

```
 setContentView(webView); 
```

试试这个 ...

# unit-testing - 如何对 DOM 操作进行单元测试（使用 jasmine）

> ID：16163852
> 
> 赞同：41
> 
> 时间：2013-04-23T07:51:28.353
> 
> 标签：unit-testing, jasmine, dom-manipulation

我需要用 jasmine 对一些 DOM 操作函数进行单元测试（目前我在浏览器和 Karma 中运行我的测试）

我想知道最好的方法是什么？

例如，我可以模拟和存根**窗口**和**文档**对象并监视它们的几个函数。但这看起来并不是一个简单的解决方案，所以这就是我问这个问题的原因！

还是有更好的方法（也许不使用茉莉花）来做到这一点？

非常感谢

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-23T16:16:01.790

我一直在使用 jasmine 的一个有用的补充，称为github 上[的 jasmine-jquery 。](https://github.com/velesin/jasmine-jquery)

它使您可以访问许多有用的额外匹配器函数，以断言 jquery 对象及其属性。

特别是到目前为止我发现有用的功能是断言 dom 元素的属性，以及监视诸如点击和提交之类的事件......

这是一个有点做作的例子...... :)

```
describe("An interactive page", function() {
    it("'s text area should not contain any text before pressing the button", function() {
        expect(Page.textArea).toBeEmpty();
    });

    it("should contain a text area div", function() {
        expect(Page.textArea).toBe('div#textArea');
    });

    it("should append a div containing a random string to the text area when clicking the button", function() {
        var clickEvent = spyOnEvent('#addTextButton', 'click');
        $('button#addTextButton').click();

        expect('click').toHaveBeenTriggeredOn('#addTextButton');
        expect(clickEvent).toHaveBeenTriggered();

        expect($('div.addedText:last')).not.toBeEmpty());
    });
}); 
```

这是代码：

```
var Page = {
    title : 'a title',
    description : 'Some kind of description description',
    textArea : $('div#textArea'),
    addButton : $('button#addTextButton'),

    init : function() {
        var _this = this;
        this.addButton.click(function(){
        var randomString = _this.createRandomString();
            _this.addTextToPage(randomString);
        });
    },

    addTextToPage : function( text ) {
        var textDivToAdd = $('<div>').html('<p>'+text+'</p>');

        this.textArea.append( textDivToAdd );
    },

    createRandomString : function() {
        var text = "";
        var possible = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";

        for( var i=0; i < 5; i++ )
             text += possible.charAt(Math.floor(Math.random() * possible.length));

        return text;
    },
};

Page.init(); 
```

到目前为止，我发现 jasmine 非常灵活且易于使用，但我总是很感激那些让代码变得更好的指针！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-12-12T17:26:58.790

我一直在为自己寻找一些东西，最后我用 19 个自定义匹配器创建了一个小库。也许你会发现它很有帮助。 [https://github.com/devrafalko/jasmine-DOM-custom-matchers](https://github.com/devrafalko/jasmine-DOM-custom-matchers)

# php - MediaWiki标签每次解析

> ID：16163858
> 
> 赞同：1
> 
> 时间：2013-04-23T07:52:00.277
> 
> 标签：php, mediawiki

基本上，我有一个动态 php 函数，它可以获取 Minecraft 服务器的状态（使用数据包等）。主要问题是代码在编辑时被解析（我可以在日志中看到）而不是在页面加载时解析。扩展检查`<status />`标签并将其替换为状态（带有内容的 div）。

重要的源代码：

```
$wgExtensionCredits['parsehook'][] = array(
  'name' => 'MCStatusTag',
  'author' => 'ZephireNZ',
  'url' => '/* Redacted */',
);
$wgHooks['ParserFirstCallInit'][] = 'registerStatusTag';

function registerStatusTag(Parser $parser) {
  $parser->setHook('status','printStatusTag');
  return true;
}

function printStatusTag($input, array $args, Parser $parser, PPFrame $frame) {

    $parser->disableCache(); // I tried disabling cache as suggested, but it doesn't work.

    // Return constructed html;

} 
```

每次查看带有该标签的页面时，如何让它替换该标签？有没有允许这样做的钩子？还是有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-01T09:55:28.390

如果它像宣传的那样工作，[MagicNoCache 扩展](https://www.mediawiki.org/wiki/Extension:MagicNoCache)将满足您的需求，即禁用该特定页面上的缓存。

# c# - 从不允许构造函数参数的类型参数 T 实例化是什么？

> ID：16163860
> 
> 赞同：1
> 
> 时间：2013-04-23T07:52:07.670
> 
> 标签：c#, .net, generics, instantiation

如果我有课：

```
class Useless
{
    private string _message ;
    public Useless(string message)
    {
        _message = message;
    }
}

class UselessFactory<T> where T : new()
{
    public Useless CreateUseless(string msg)
    {
        return new T(msg);
    }
} 
```

为什么我不能用参数实例化 T ，就像我可以用下面的一样？

```
return (Useless)Activator.CreateInstance(typeof(T), msg); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T07:58:04.197

> 新约束指定泛型类声明中的任何类型参数都必须具有公共无参数构造函数。

从[文档](http://msdn.microsoft.com/en-us/library/sd2w2ew5%28v=vs.80%29.aspx)

**可能的解决方法（不是同一件事）**

如果您创建`Message`公共和可变属性，您可以执行以下操作：

```
class UselessFactory<T> where T : UselessBase, new()
{
    public T CreateUseless(string msg)
    {
        return new T() { Message = msg };
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T08:06:35.757

您可以执行以下操作：

```
return (T)Activator.CreateInstance(typeof(T), new object[] { msg }); 
```

我从这个问题中得到了它：[https ://stackoverflow.com/a/731637/1522991](https://stackoverflow.com/a/731637/1522991)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T08:34:02.987

目前根本不支持。

有解决方法：

*   使用接口或类（其中 T：MyClass）标记类型 T 并设置属性或调用其方法来初始化实例。
*   您的 Activator.Activate （一种缓慢的动态方法）。
*   最快的动态方法是使用反射找到正确的 ConstructorInfo 并将其转换为强类型委托（在您的情况下：）`Func<string, T>`。您可以调用此委托，它将使用给定参数构造一个实例。

# c# - 私有事件处理程序会破坏封装吗？

> ID：16163867
> 
> 赞同：4
> 
> 时间：2013-04-23T07:52:29.230
> 
> 标签：c#, events, delegates, encapsulation

每个人都知道私有事件处理程序可以监听来自其他类的事件。（文档中的示例总是只使用私有处理程序。）

事件处理程序只不过是另一个类中的私有方法，而不是调用事件。因此，从其类外部调用处理程序会破坏封装。还是我错过了什么？

示例代码，为了完整起见：

```
 class Caller    {
    public event EventHandler MyEvent;
    public void RaiseMyEvent()
    {
       MyEvent(this, EventArgs.Empty);
    }
}

class Receiver
{
    private void MyPrivateHandler(Object sender, EventArgs e)
    {
        Console.WriteLine("I'm a private method!");
    }

    public void Subscribe(Caller caller)
    {
        caller.MyEvent += this.MyPrivateHandler;
    }
} 
```

订阅后，我们可以轻松地从外部`receiver.Subscribe(caller);` 调用类中的私有方法： .`receiver``caller.RaiseMyEvent();`

这是一个纯粹的学术问题，甚至是学术问题。而且，我个人觉得这个功能非常方便、实用，而且非常喜欢。这真的很酷：我们可以显式地授予其他类调用我们私有方法的权利。（我们也可以取消订阅它，并用代表和事件制作很多令人着迷的东西。）无论如何，它仍然违反了封装的纯洁性......或者不是？

PS：感谢 Matthew Watson 指出以下细微差别：订阅事件时，该事件可以独占调用私有处理程序。而如果我们将其公开（或通过公共包装方法调用），则任何人都可以调用它。在可访问性方面有很大差异。

PPS：是的——我从未在教科书中看到过这个问题。如果你知道，请留下参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T08:04:57.913

显然，当您从任一类之外执行 caller.RaiseMyEvent() 时，您不必知道谁将处理该事件。

事实上，我不认为Receiver中的Subscribe-method应该是公开的，这种违背了目的。如果接收者有兴趣处理事件，它应该订阅自己，它不应该让其他人订阅它。这样您就可以隐藏订阅状态和处理它的方法。

在 Receiver 类中没有直接调用此私有方法，您不应该对此进行任何假设。接收者类在任何时候都可以取消订阅。

它摆弄封装，但我认为它并不完全违反它。它基本上是一个广播系统。

如果某个电视台建议人们出去偷一个苹果，而他们却真的做了，那该怪谁呢？电视台还是偷东西的人？我会认为是后者。事件也是如此，提出事件的人不必担心其影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T08:16:02.863

私有事件处理程序是私有的，因为您只想为用户提供将其用作事件的选项。

```
private void MyPrivateHandler(Object sender, EventArgs e)
{
    Console.WriteLine("I'm a private method!");
}

public void Subscribe(Caller caller)
{
    caller.MyEvent += this.MyPrivateHandler;
} 
```

和

```
public void Subscribe(Caller caller)
{
    caller.MyEvent += (sender,e)=>{Console.WriteLine("I'm a anonymous method!"); }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-05T07:50:09.917

虽然有点离题，但它与您的问题有关，您可能会觉得它很有趣：[关于自定义添加和删除 C# 事件处理程序的博客文章的链接](http://www.gavaghan.org/blog/2007/07/25/intercepting-add-and-remove-of-c-event-delegates/)。评论值得一读。一条相关评论引用了来自 MSDN 杂志的这个[答案（Stephen Toub 的“Event Acessors”）](http://msdn.microsoft.com/sv-se/magazine/cc163533%28en-us%29.aspx)到博客文章问题。

# php - 两个不同的字符串如何匹配？

> ID：16163868
> 
> 赞同：0
> 
> 时间：2013-04-23T07:52:29.993
> 
> 标签：php, string, comparison

我根据数据库中的值测试表单的输入。当涉及到传真和电话号码时，字符串比较失败。

```
$fax = trim($args['fax']);
$oldFax = trim($address->getFax());
if($fax != $oldFax){
  $address->setFax($fax);
  $address->flagChanged('fax');
} 
```

上面的测试在比较“+494321”和“00494321”时发现了一个匹配项。这是为什么？如果我使用 !== 进行测试，它会按预期工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T07:55:18.680

因为`!==`比较值*和*类型`!=`并将字符串隐式转换为整数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T07:57:41.950

给你一个链接：

[http://php.net/manual/en/language.operators.comparison.php](http://php.net/manual/en/language.operators.comparison.php)

> 如果您比较**数字**字符串，每个字符串都将转换为省略所有前导零和符号的数字（并且以数字方式执行比较）**。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T08:19:19.327

这是因为[类型杂耍](http://php.net/juggling)，这意味着[字符串可以用作数字](http://php.net/types.string#language.types.string.conversion)，并且您正在使用“松散等于”[比较运算符](http://php.net/operators.comparison#language.operators.comparison) `==`。

如果一个表达式的操作数是一个*数字*（即包含数字并且可以被认为是*一个数字*），那么它将在被比较之前被转换为适当的数字类型（`integer`或`float`）。所以，这就是 PHP 实际看到以下表达式的方式：

```
("+494321" == "00494321") => (494321 == 494321) 
```

第一个操作数去掉了加号（它只是意味着数字是正数），第二个操作数的零被截断了（它们并不真正意味着任何东西；即`07`，`7`它们都是相同的十进制数，只是表示方式略有不同）。

如果你想*准确*地比较两个字符串，那么有几种方法可以做到这一点。第一种是简单地使用“完全等于”运算符`===`。使用此运算符，操作数将永远不会被类型杂耍，也就是说比较运算符的两侧将完全匹配；字符串将是字符串，整数将是整数，依此类推。

例如，这两个表达式都等于`false`：

```
"123" === 123
"006" === 6 
```

另一种方法是使用[`strcmp`](http://php.net/strcmp)函数（或类似的相关函数）。它逐字节比较字符串：

```
$a = "+494321";
$b = "00494321";
if (strcmp($a, $b) === 0) {
    echo "The same";
} else {
    echo "Not the same";
} 
```

`0`如果两个字符串之间没有差异（即差异为零），则该函数返回。如果返回的数字小于或大于`0`则两个字符串不相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T07:54:48.243

因为

```
=== and !== 
```

做严格匹配。然而

```
== and != 
```

才不是。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T07:56:17.323

只要有可能，总是做严格的比较。

`==`并`!=`做一些非常奇怪的事情，例如在你的情况下两者看起来都像数字，所以 PHP 将以数字方式比较字符串（= 尝试将它们转换为整数并进行比较）..

手册中更奇怪的例子：http: [//php.net/manual/en/language.operators.comparison.php](http://php.net/manual/en/language.operators.comparison.php)

# java - 在 Servlet 中获取真实的客户端 IP

> ID：16163874
> 
> 赞同：35
> 
> 时间：2013-04-23T07:52:45.127
> 
> 标签：java, servlets, ip, clientip

我在一个简单的问题上遇到了一些麻烦。我会**在 HTTPServlet 中获得真正的客户端 IP**。

从现在开始我使用：

```
request.getRemoteAddr() 
```

但现在它返回一个错误的 IP。例如：xxx.xxx.xxx。**50**但我的 IP 类似于 xxx.xxx.xxx。**159** . （在[http://whatismyipaddress.com/](http://whatismyipaddress.com/)检查）。

现在我尝试使用：

```
request.getHeader("X-Forwarded-For") 
```

它返回 NULL。

我还参加了以下课程的调查：

```
public class IpUtils {

public static final String _255 = "(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)";
public static final Pattern pattern = Pattern.compile("^(?:" + _255 + "\\.){3}" + _255 + "$");

public static String longToIpV4(long longIp) {
    int octet3 = (int) ((longIp >> 24) % 256);
    int octet2 = (int) ((longIp >> 16) % 256);
    int octet1 = (int) ((longIp >> 8) % 256);
    int octet0 = (int) ((longIp) % 256);

    return octet3 + "." + octet2 + "." + octet1 + "." + octet0;
}

public static long ipV4ToLong(String ip) {
    String[] octets = ip.split("\\.");
    return (Long.parseLong(octets[0]) << 24) + (Integer.parseInt(octets[1]) << 16)
            + (Integer.parseInt(octets[2]) << 8) + Integer.parseInt(octets[3]);
}

public static boolean isIPv4Private(String ip) {
    long longIp = ipV4ToLong(ip);
    return (longIp >= ipV4ToLong("10.0.0.0") && longIp <= ipV4ToLong("10.255.255.255"))
            || (longIp >= ipV4ToLong("172.16.0.0") && longIp <= ipV4ToLong("172.31.255.255"))
            || longIp >= ipV4ToLong("192.168.0.0") && longIp <= ipV4ToLong("192.168.255.255");
}

public static boolean isIPv4Valid(String ip) {
    return pattern.matcher(ip).matches();
}

public static String getIpFromRequest(HttpServletRequest request) {
    String ip;
    boolean found = false;
    if ((ip = request.getHeader("x-forwarded-for")) != null) {
        StringTokenizer tokenizer = new StringTokenizer(ip, ",");
        while (tokenizer.hasMoreTokens()) {
            ip = tokenizer.nextToken().trim();
            if (isIPv4Valid(ip) && !isIPv4Private(ip)) {
                found = true;
                break;
            }
        }
    }

    if (!found) {
        ip = request.getRemoteAddr();
    }

    return ip;
}
} 
```

它还返回了 xxx.xxx.xxx.50 IP。:(

现在我不知道如何获得真正的客户端IP。如果有人知道解决方案，请回答。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-23T08:25:58.490

我想你的问题是你在本地网络的某个地方运行服务器，所以你在那个网络中获得了你的 IP。但是，当您尝试使用发现您的 IP 地址的在线服务时，您的 IP 是您的服务提供商路由器的 IP 或类似的东西。使用`request.getRemoteAddr()`是正确的。这就是此类服务所做的，他们没有其他设施。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-23T08:01:12.457

当您在 servlet 容器 `request.getRemoteAddr()`返回 NAT 地址之前拥有 NAT（网络地址转换）设备时，因为它会启动一个新连接。

要解决您的问题，您应该配置 NAT 以在标头中发送原始客户端的 IP。然后，从请求中获取标头。如果您在 NAT X-Forwarded-For 标头中配置，请使用以下代码：`request.getHeader("X-Forwarded-For")`

您的功能是正确的，您可以在配置 NAT 时使用它。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-09-30T11:29:30.490

**爪哇**

```
String ip = request.getRemoteAddr();
if (ip.equalsIgnoreCase("0:0:0:0:0:0:0:1")) {
    InetAddress inetAddress = InetAddress.getLocalHost();
    String ipAddress = inetAddress.getHostAddress();
    ip = ipAddress;
}
model.addAttribute("IP", ip);

JSP <span><B>IP : <c:out value="${IP}" /></B></span> // Spring MAV 
```

**JSP**

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"   pageEncoding="ISO-8859-1"%>
<%@ page import="java.net.InetAddress" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Displays Client IP Address</title>
</head>
<body>
<%
    // paste above java code 
out.println("<br><B>Clients IP : </B>"+ip);
%>
<span><br>Local Host  : <%= request.getRemoteAddr() %></span>
<span><br>ServerPort  : <%= request.getServerPort() %></span>
<span><br>Path        : <%= request.getRequestURI()%></span>
</span>
</body>
</html> 
```

如果 jsp 部署在本地服务器并访问此 jsp 将返回 0:0:0:0:0:0:0:1。*如果使用 ip 在本地访问应用程序，则返回 IP。*

**带有 Jersey 的[RESTful Web 服务](https://docs.oracle.com/cd/E19776-01/820-4867/6nga7f5n6/index.html)**

```
@javax.ws.rs.Path("/ip")
public class GetIPInfo {

    @GET    @Produces(MediaType.TEXT_PLAIN) 
    public Response getIP(@Context javax.servlet.http.HttpServletRequest request) throws UnknownHostException { 

        String remoteHost = request.getRemoteHost();
        String remoteAddr = request.getRemoteAddr();
        if (remoteAddr.equals("0:0:0:0:0:0:0:1")) {
            InetAddress localip = java.net.InetAddress.getLocalHost();
            remoteAddr = localip.getHostAddress();
            remoteHost = localip.getHostName();
        }
        int remotePort = request.getRemotePort();

        String msgoutput = remoteHost + " (" + remoteAddr + " : " + remotePort + ")";
        return Response.status(200).entity(msgoutput).build(); 
    }
} 
```

*使用 JavaScript 查找* **[IP](https://stackoverflow.com/questions/19953328/how-to-get-ip-address-using-javascript-or-jquery/32807296#32807296)**

# linq - 在LINQ中用“and”左外连接？

> ID：16163877
> 
> 赞同：0
> 
> 时间：2013-04-23T07:52:59.280
> 
> 标签：linq

如何在 Linq 中编写以下内容？

```
select * from CompetitionDealer d

left outer join CompetitionResult r 
on d.ID = r.fk_CompetitionDealer and     (r.fk_CompetitionParameter is null 
or r.fk_CompetitionParameter = ID1)

where fk_Competition = ID2 
```

问题是连接上有一个“AND”。如果我将它移到 where 结果完全不同，所以我不能这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:59:14.687

也许是这样的：

```
var ls= (
        from d in db.CompetitionDealer
        from r in db.CompetitionResult
            .Where(a => a.fk_CompetitionDealer == d.ID 
                       && (a.fk_CompetitionParameter == null 
                       || a.fk_CompetitionParameter == ID1)).DefaultIfEmpty()
        where d.fk_Competition == ID2
        select d
    ); 
```

`db`linq 数据上下文在哪里

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T08:35:32.870

我通过将其分为两个问题来解决它：

首先，我选择了以下列表：

select * from CompetitionResult r where r.fk_CompetitionParameter = ID1)

然后我越过加入上面的列表。

# actionscript-3 - 浏览器中的非实时渲染 (Flash)

> ID：16163880
> 
> 赞同：0
> 
> 时间：2013-04-23T07:53:05.240
> 
> 标签：actionscript-3, flash, 3d, rendering

您可以建议哪些开源库在 Flash Player 中进行非实时（逼真）3D 渲染？我想使用浏览器作为节点来渲染场景，并在完成渲染后将结果发送回服务器。

# sql - 如何按相关模型的唯一 ID 计数排序

> ID：16163885
> 
> 赞同：0
> 
> 时间：2013-04-23T07:53:20.657
> 
> 标签：sql, ruby-on-rails

我正在使用 Rails 3.1.3 和 Ruby 1.9.2 和 MySQL 5.1 进行开发。
我想根据唯一相关模型的数量来订购模型。这是我的代码。

```
class User < ActiveRecord::Base
  has_many :check_ins
  .
  .
end

class CheckIn < ActiveRecord::Base
   belongs_to :user, :counter_cache => true
   belongs_to :ski_resort, :counter_cache => true

   .
   .
end

class SkiResort < ActiveRecord::Base
   has_many :check_ins
   .
   .
end 
```

我想通过签入的滑雪胜地的数量来订购用户模型。

当用户 1 在同一个滑雪场签到 3 次时，计数为 1。
<签入 user_id: 1, ski_resort_id: 1">
<签入 user_id: 1, ski_resort_id: 1">
<签入 user_id: 1, ski_resort_id: 1">

当用户 2 为不同的滑雪场签到 4 次时，计数为 4。
<CheckIn user_id: 2, ski_resort_id: 1">
<CheckIn user_id: 2, ski_resort_id: 2">
<CheckIn user_id: 2, ski_resort_id: 3">
<CheckIn user_id: 2, ski_resort_id: 4">

我在下面写过，但它按签到次数排序。

```
 class User < ActiveRecord::Base
    scope :checked_in_ski_resorts_count_ranking, lambda{
      {
        :joins => {:check_ins => :ski_resort},
        :group => 'users.id',
        :order => 'COUNT(ski_resorts.id) DESC'
      }    
    }
    # => {1 => 3, 2 => 4}
  end 
```

我想要的结果是'{2 => 4, 1 => 1}'。
如何将此规则的订单范围添加到用户模型？
问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T08:32:41.453

据我所知，由于`counter_cache`不支持唯一计数，因此存储您自己的计数将是最容易的。

使用 将 a 添加`ski_resort_checkin_count`为`users`整数字段`default: 0, null: false`。

```
class User < ActiveRecord::Base
  has_many :check_ins
  has_many :ski_resorts, through: :check_ins

  def update_counts!
    update_column :ski_resort_checkin_count, ski_resorts.uniq.count
  end
end

class SkiResort < ActiveRecord::Base
  has_many :check_ins
  has_many :users, through: :check_ins
end

class CheckIn < ActiveRecord::Base
  belongs_to :user
  belongs_to :ski_resort

  after_create  :update_counts!
  after_destroy :update_counts!

  def update_counts!
    user.update_counts!
  end
end 
```

然后你就可以做`User.order(:ski_resort_checkin_count)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T08:14:30.617

尝试这个：

```
users = {}
User.all.each do |u|
    users[u] = u.check_ins.uniq.count
end
sorted_users = users.sort_by {|name, check_ins| check_ins}
sorted_users.flatten(1)
(1..sorted_users.count).step(2) do |n|
    sorted_users.delete(n-1)
end 
```

别写SQL了！

注意：可能不起作用：P

# .net - 诊断 MissingMethodException

> ID：16163888
> 
> 赞同：1
> 
> 时间：2013-04-23T07:53:32.810
> 
> 标签：.net, winforms, .net-4.0, missingmethodexception

在一台机器上启动我的应用程序时，它会立即退出，说它“停止工作”。在事件日志中，我看到 MissingMethodException 是原因。没有显示异常对话框，并且在事件日志详细信息中我看不到任何详细的错误消息（例如包含“未找到方法：xyz”）。

事件处理程序信息说（试图在这里翻译回英文，可能不是逐字记录）

> 应用程序：Myapp.exe Framework-version v4.0.30319
> 
> 说明：进程因未处理的异常而终止
> 
> 异常信息：System.MissingMethodException
> 
> 堆栈：在 MyApp.MainClass.Main(System.String[])

引发此异常时，如何找到缺少*哪个*方法？它是一个托管应用程序，但它具有许多本机依赖项。

编辑：编译的程序集都在同一个版本中编译，即应用程序的托管代码中没有版本不匹配。二进制依赖项中可能存在不匹配，但如果是这样，我如何找出哪一个？

它是一个内置于 VS 2012 中但面向 4.0 的 Windows 窗体应用程序。并非所有只有框架 4.0 的机器上都会出现该错误，因此这似乎不是问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T09:59:33.513

MissingMethodException通过其 Message 属性*告诉*您缺少什么方法。然而，给它一个机会告诉你却经常被程序员忽略。您必须为 AppDomain.UnhandledException 事件编写事件处理程序并显示或记录 e.UnhandledException 对象。

请注意，您的程序在抖动崩溃时很早就崩溃了。抖动在代码执行*之前运行。*这使得您很可能正在查看问题的错误代码。导致崩溃的不是 Main() 方法，很可能是您在 Main 方法中创建的表单。尽管这是一个猜测，但您忘记在 Main() 方法中发布代码。为了安全起见，一个好的做法是将事件注册与带有 cooties 的代码分开，最好通过抑制内联来完成。修改 Program.cs 源代码，使其看起来与此类似：

```
using System.Runtime.CompilerServices;
...
        [STAThread]
        static void Main() {
            AppDomain.CurrentDomain.UnhandledException += CurrentDomain_UnhandledException;
            RealMain();
        }

        [MethodImpl(MethodImplOptions.NoInlining)]
        static void RealMain() {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            // Your code here
            //...
        }

        static void CurrentDomain_UnhandledException(object sender, UnhandledExceptionEventArgs e) {
            var ex = (Exception)e.ExceptionObject;
            MessageBox.Show(ex.ToString(), "Unexpected error");
            Environment.Exit(System.Runtime.InteropServices.Marshal.GetHRForException(ex));
        } 
```

您很可能会得到您自己方法之一的名称。但是，不要忽视您会看到框架方法的可能性。.NET 4 有四个不同的版本，您无法猜测用户计算机上的版本。如果是这种情况，那么您在创建项目时犯了一个错误，您从 c:\windows\microsoft.net 子目录而不是 c:\program files\reference 程序集添加了程序集引用。这将允许您使用早期版本的 .NET 4 中不可用的方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T08:02:16.487

MissingMethodException 通常指向程序集版本中的不匹配。

例如，您有一个使用 DLL 的应用程序。两个都是你写的。您现在向 DLL 中的类添加一个新方法并在应用程序中使用该方法。

现在，在部署时，您只需复制新应用程序，而忘记复制新 DLL。当应用程序尝试使用新方法时，结果将是 MissingMethodException。

确保所有程序集都具有正确的版本。

# android - 通过 OnLongClick 翻译 Textview - 我在哪里可以找到 textview 的使用资源？

> ID：16163892
> 
> 赞同：0
> 
> 时间：2013-04-23T07:53:46.207
> 
> 标签：android, resources, textview, translation

我正在尝试实现一个特殊的文本视图，我可以将内容翻译成不同的语言。我的 textviews 只包含 R.String - Text，所以我有不同语言的等效文本可用（我不必访问翻译服务器）。

如何从文本视图中获取当前的字符串资源（R.string.XY）？那可能吗？否则，我怎样才能轻松解决这个问题？

一种方法是，以编程方式设置文本，这样我就可以在自己的方法中请求一个资源 ID，我必须存储它。但是我现在正在尝试通过在布局中设置文本来找到一个好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T08:01:00.577

您可以像这样编写自己的函数：

```
textView.setText(R.string.XY);
textView.setTag(new Integer(R.string.XY)); 
```

然后通过以下方式获取您的字符串资源 ID：

```
public Integer getStringResourceID(Textview textView){
    return ((Integer)textView.getTag()).intValue();
} 
```

更新：

你可以试试这个来获取在布局文件中设置的字符串资源 id：

```
int resourceId = getApplicationContext().getResources().getIdentifier("textViewID", "string", getPackageName()); 
```

# asp.net - 如何对页面加载事件中插入文本框中的所有字符求和？

> ID：16163893
> 
> 赞同：0
> 
> 时间：2013-04-23T07:53:47.140
> 
> 标签：asp.net, vb.net, visual-studio, visual-studio-2008

我有以下给定参数：

```
Alphabet   Provided Value

S           2
U           3
M           5 
```

我有一个带有默认文本 SUM 的文本框和一个显示 SUM 结果的标签，如果 s=2、U=3 和 M=5 以及结果在标签中显示为输出为 10

我想为此编写程序...在 VB.NET 中

**编辑：**

```
Dim text = textbox1.text 
Dim sum = 0 
For Each c As Char In text 
    sum += c - 64 
Next 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T08:11:26.043

我认为问题在于您试图从 Char 中减去 64 - 当我尝试您的代码时，我得到一个未为类型“Char”和“Integer”定义的“-”运算符。

尝试使用`Asc`获取 ASCII 值：

```
Dim text As String = textbox1.Text
Dim sum As Integer = 0

For Each c As Char in text
    sum += Asc(c) - 64
Next 
```

但是，对于 SUM，这将为您提供 53，而不是 10。您使用什么系统来确定给定字母的数值？您发布的代码表示您减去 64 - 如果不是 ASCII，那么数字 64 是什么？

**编辑**

假设您已经为每个字母预定义了数值，我会将它们放在 a 中`Dictionary`，其中 Char 作为键，Integer 作为值。然后你可以做这样的事情：

```
Dim letterValues As New Dictionary(Of Char, Integer)

letterValues.Add("S", 2)
letterValues.Add("U", 3)
letterValues.Add("M", 5)
' You can add every letter with its predefined value this way

Dim text As String = textbox1.Text
Dim sum As Integer = 0

For Each c As Char in text
    sum += letterValues(c)
Next 
```

结果将是 10。

# php - 名称为“controlling_tool.customer_group_text”的表已存在

> ID：16163895
> 
> 赞同：0
> 
> 时间：2013-04-23T07:53:51.043
> 
> 标签：php, codeigniter, doctrine

我和`DOCTRINE2`AND一起工作`CodeIgniter 2`。我对此很陌生。我试图`mysqltables`从实体生成，但总是收到此错误 `[Doctrine\DBAL\Schema\SchemaException]`
名称为“controlling_tool.customer_group_text”的表已存在
我没有 2 个项目使用相同的实体。数据库是空的，即使我尝试删除它，这个过程也不起作用。你能给我解释一下吗

```
namespace Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * Entity\CustomerGroupText
 *
 * @Entity(repositoryClass="CustomerGroupTextRepository")
 * @Table(name="customer_group_text", indexes={@Index(name="fk_status_idx", columns={"customer_group_id"}), @Index(name="fk_language_idx", columns={"language_id"})})
 */
class CustomerGroupText
{
    /**
     * @Id
     * @Column(type="string", length=5)
     */
    protected $customer_group_id;

    /**
     * @Column(type="string", length=45, nullable=true)
     */
    protected $description;

    /**
     * @ManyToOne(targetEntity="CustomerGroup", inversedBy="customerGroupTexts")
     * @JoinColumn(name="customer_group_id", referencedColumnName="id", nullable=false)
     */
    protected $customerGroup;

    /**
     * @ManyToOne(targetEntity="Language", inversedBy="customerGroupTexts")
     * @JoinColumn(name="language_id", referencedColumnName="id_language_id", nullable=false)
     */
    protected $language;

    public function __construct()
    {
    }

    /**
     * Set the value of customer_group_id.
     *
     * @param string $customer_group_id
     * @return Entity\CustomerGroupText
     */
    public function setCustomerGroupId($customer_group_id)
    {
        $this->customer_group_id = $customer_group_id;

        return $this;
    }

    /**
     * Get the value of customer_group_id.
     *
     * @return string
     */
    public function getCustomerGroupId()
    {
        return $this->customer_group_id;
    }

    /**
     * Set the value of description.
     *
     * @param string $description
     * @return Entity\CustomerGroupText
     */
    public function setDescription($description)
    {
        $this->description = $description;

        return $this;
    }

    /**
     * Get the value of description.
     *
     * @return string
     */
    public function getDescription()
    {
        return $this->description;
    }

    /**
     * Set CustomerGroup entity (many to one).
     *
     * @param Entity\CustomerGroup $customerGroup
     * @return Entity\CustomerGroupText
     */
    public function setCustomerGroup(CustomerGroup $customerGroup = null)
    {
        $this->customerGroup = $customerGroup;

        return $this;
    }

    /**
     * Get CustomerGroup entity (many to one).
     *
     * @return Entity\CustomerGroup
     */
    public function getCustomerGroup()
    {
        return $this->customerGroup;
    }

    /**
     * Set Language entity (many to one).
     *
     * @param Entity\Language $language
     * @return Entity\CustomerGroupText
     */
    public function setLanguage(Language $language = null)
    {
        $this->language = $language;

        return $this;
    }

    /**
     * Get Language entity (many to one).
     *
     * @return Entity\Language
     */
    public function getLanguage()
    {
        return $this->language;
    }

    public function __sleep()
    {
        return array('customer_group_id', 'language_id', 'description');
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T08:00:09.660

只需尝试清除您的 codeigniter 项目缓存。我认为它正在尝试从那里读取配置详细信息。

# node.js - npm、node、ipython 都返回“exec 格式错误”

> ID：16163896
> 
> 赞同：0
> 
> 时间：2013-04-23T07:53:52.060
> 
> 标签：node.js, archlinux

标题几乎说明了这一点。我在 Arch Linux 上，所有 pkg​​s 都更新了，正在运行`zsh`. 所有三个 -`node`和`npm`-`ipython`都以一个简单的`zsh: exec format error`.

为什么会这样？

编辑：

`uname -a`说：

`Linux localhost 3.8.6-1-ARCH #1 SMP PREEMPT Sat Apr 6 08:44:16 CEST 2013 i686 GNU/Linux`

我`/etc/pacman.conf`的是：

```
#
# /etc/pacman.conf
#
# See the pacman.conf(5) manpage for option and repository directives

#
# GENERAL OPTIONS
#
[options]
# The following paths are commented out with their default values listed.
# If you wish to use different paths, uncomment and update the paths.
#RootDir     = /
#DBPath      = /var/lib/pacman/
#CacheDir    = /var/cache/pacman/pkg/
#LogFile     = /var/log/pacman.log
#GPGDir      = /etc/pacman.d/gnupg/
HoldPkg     = pacman glibc
#XferCommand = /usr/bin/curl -C - -f %u > %o
#XferCommand = /usr/bin/wget --passive-ftp -c -O %o %u
#CleanMethod = KeepInstalled
#UseDelta    = 0.7
Architecture = auto

# Pacman won't upgrade packages listed in IgnorePkg and members of IgnoreGroup
#IgnorePkg   =
#IgnoreGroup =

#NoUpgrade   =
#NoExtract   =

# Misc options
#UseSyslog
#Color
#TotalDownload
CheckSpace
#VerbosePkgLists

# By default, pacman accepts packages signed by keys that its local keyring
# trusts (see pacman-key and its man page), as well as unsigned packages.
SigLevel    = Required DatabaseOptional
LocalFileSigLevel = Optional
#RemoteFileSigLevel = Required

# NOTE: You must run `pacman-key --init` before first using pacman; the local
# keyring can then be populated with the keys of all official Arch Linux
# packagers with `pacman-key --populate archlinux`.

#
# REPOSITORIES
#   - can be defined here or included from another file
#   - pacman will search repositories in the order defined here
#   - local/custom mirrors can be added here or in separate files
#   - repositories listed first will take precedence when packages
#     have identical names, regardless of version number
#   - URLs will have $repo replaced by the name of the current repo
#   - URLs will have $arch replaced by the name of the architecture
#
# Repository entries are of the format:
#       [repo-name]
#       Server = ServerName
#       Include = IncludePath
#
# The header [repo-name] is crucial - it must be present and
# uncommented to enable the repo.
#

# The testing repositories are disabled by default. To enable, uncomment the
# repo name header and Include lines. You can add preferred servers immediately
# after the header, and they will be used before the default mirrors.

#[testing]
#Include = /etc/pacman.d/mirrorlist

[core]
Include = /etc/pacman.d/mirrorlist

[extra]
Include = /etc/pacman.d/mirrorlist

#[community-testing]
#Include = /etc/pacman.d/mirrorlist

[community]
Include = /etc/pacman.d/mirrorlist

# An example of a custom package repository.  See the pacman manpage for
# tips on creating your own repositories.
#[custom]
#SigLevel = Optional TrustAll
#Server = file:///home/custompkgs 
```

（注意：这*可能*属于 Unix.SE）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-17T20:43:41.597

如果这有助于任何未来失去的灵魂在这里结束：我看到这个问题试图在 32 位 linux 上使用 x64 二进制文件。获取正确的二进制文件肯定会修复它，我认为这是帮助 OP 的原因，因为重新安装修复了他们的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-29T02:39:38.087

好的，我解决了这个问题。

*   至于 Node.js 和`npm`，我所做的只是删除 ( `pacman -Rnsc`) Node.js 并重新安装。
*   因为`ipython`我重新安装了`distribute`.

就这样。

# c# - 如果将 Button_Click() 放置在组框中，则会触发两次

> ID：16163897
> 
> 赞同：0
> 
> 时间：2013-04-23T07:53:54.100
> 
> 标签：c#, desktop-application, buttonclick, groupbox

我是桌面应用程序开发的新手。

我有一个搜索按钮，通过该按钮从数据库记录中填充网格。

首先我把按钮放在分组框中，调试程序，发现`click`事件触发了两次。然后我在文本框中放置了相同的按钮，发现该事件只被触发一次。

我的`Button_Click()`活动包含以下代码：

```
private void btnSearch_Click(object sender, EventArgs e)
{
    string query = null;

    if (txtBillNo.Enabled && txtBillNo.Text.Trim().Length != 0)
    {
        query = "Select BillNo,PartyName,City,State,FORMAT(BillDt,'dd-mm-yyyy')as Dt from BillMaster where BillNo=" + Convert.ToInt32(txtBillNo.Text.Trim());
        FillGrid(query);
    }

    else if (txtName.Enabled && txtName.Text.Trim().Length != 0)
    {
        query = "Select BillNo,PartyName,City,State,FORMAT(BillDt,'dd-mm-yyyy')as Dt from BillMaster where UCASE(PartyName) like '" + txtName.Text.Trim().ToUpper() + "'";
        FillGrid(query);
    }

    else
    {
        MessageBox.Show("Enter Value First");
        if (rdbName.Enabled)
        {
            txtName.Focus();     
        }
        else if (rdbBillNo.Enabled)
        {
            txtBillNo.Focus();  
        }               
    }                 
} 
```

事件处理程序使用以下方式绑定在 Form_Load() 事件中：

`btnSearch.Click+=new EventHandler(btnSearch_Click);`

将按钮放在组框中后，我应该怎么做才能触发 click 事件。
请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T08:15:44.017

我认为您的内容`btnSearch_Click`无关紧要。我几乎可以肯定`btnSearch.Click`分配了两次。一旦在您的`Form_Load`，可能在其他地方，也许在您的代码隐藏文件中？

# vba - mscomm 与调制解调器的兼容性

> ID：16163899
> 
> 赞同：0
> 
> 时间：2013-04-23T07:53:57.310
> 
> 标签：vba, modem

我正在使用一个相当简单的脚本来自动拨打一组号码。它在我的计算机（带有集成调制解调器的笔记本电脑）上正常工作，但在我的同事计算机（脚本首先设计给他）上它适用于第一个数字，然后它根本不起作用（调制解调器赢了'不要拨打任何号码，也不会显示任何错误），除非我们重新启动计算机。什么设置或 mscomm 属性可以解释这种行为？我怀疑也许我在通话结束时关闭了扬声器，而不是在新通话开始时打开它......

```
 Dim CancelFlag As Integer
Dim RingCount As Integer
Dim raccrocherFlag As Integer

' Démarrage
Private Sub btnStart_Click()
' On Error GoTo Gest_err
    For Each numtel In Sheets("ListeTRS").Range("b2:b10000")
            ' Si bouton Cancel a été pressé, on arrête le script
            If CancelFlag = 1 Then
                UserForm1.Hide
                Exit Sub
            End If

            valNumtel = Val(numtel)
            If valNumtel = 0 Then
                MsgBox "Fin de fichier."
                Exit Sub
            Else
                ActiveSheet.Range("A" & numtel.Row).Select
                If Application.Wait(Now + TimeValue("0:00:2")) Then Dial numtel, numtel.Row
            End If
    Next
End Sub

Private Sub Dial(Number, Indice)
Dim DialString As String
Dim FromModem As String
Dim dummy As Integer

' AT is the Hayes compatible ATTENTION command and is required to send commands to the modem.
' DT means "Dial Tone." The Dial command uses touch tones, as opposed to pulse (DP = Dial Pulse).
' Numbers is the phone number being dialed.
' A semicolon tells the modem to return to command mode after dialing (important).
' A carriage return, vbCr, is required when sending commands to the modem.

' Concatene 0 avant le numéro
dialnumber = "0" & Number

DialString = "ATDT" + dialnumber + ";" + vbCr

' Communications port settings.
' A faire > detecter le port ou le demander à l'usager?
Dim comPort As Integer
comPort = 3
MSComm1.CommPort = comPort
MSComm1.Settings = "9600,N,8,1"
RingCount = 0

On Error Resume Next
    ' Ouvrir le port s'il est fermé
    If (MSComm1.PortOpen = False) Then
        MSComm1.PortOpen = True
    End If

    If Err Then
        MsgBox "COM" & comPort & " n'est pas disponible. Changer la propriété à un autre port."
        Exit Sub
    End If

' Flush the input buffer.
MSComm1.InBufferCount = 0

' Dial the number.
        Sheets("ListeTRS").Range("D" & Indice).Value = "Appel en cours du " & dialnumber & " § " & Now
        MSComm1.Output = DialString

         ' On attend 10 seconde puis on lis les infos disponible dans le tampon du modem
        If Application.Wait(Now + TimeValue("0:00:20")) Then
        FromModem = FromModem + MSComm1.Input
        End If

            ' Raccrocher
            MSComm1.Output = "ATH" + vbCr

' Disconnect the modem.
MSComm1.Output = "ATH" + vbCr

' Close the port.
MSComm1.PortOpen = False
End Sub

Private Sub cmdStop_Click()
CancelFlag = 1
End Sub

Private Sub Worksheet_Activate()
'Setting InputLen to 0 tells MSComm to read the entire contents of the
'input buffer when the Input property is used.
MSComm1.InputLen = 0
End Sub

Private Sub Worksheet_BeforeDoubleClick(ByVal Target As Excel.Range, Cancel As Boolean)
Dim Number As String

' Get the number to dial.
Number = Target.Value
If Number = "" Then Exit Sub

' Dial the selected phone number.
Dial (Number)
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-26T11:13:14.460

我自己也遇到过类似的情况。

您必须明确对象，在本例中为 Excel。假设您已将 xlApp 命名为 excel.aplication，请尝试以下操作：

```
For Each numtel In xlapp.Sheets("ListeTRS").Range("b2:b10000") 
```

和：

```
If valNumtel = 0 Then
                MsgBox "Fin de fichier."
                Exit Sub
            Else
                xlApp.ActiveSheet.Range("A" & numtel.Row).Select
                If xlApp.Application.Wait(Now + TimeValue("0:00:2")) Then Dial numtel, numtel.Row
            End If 
```

# linux - 当我有 groupid 时如何获取组名

> ID：16163910
> 
> 赞同：10
> 
> 时间：2013-04-23T07:54:35.957
> 
> 标签：linux, bash, ldap

我有使用命令读取的文件的参数（尤其是用户 ID 和组 ID），`stat`并且我在一个网络中工作，其中用户和组是在 ldap 服务器上指定的。

我从命令的结果中得到了用户名`getent passwd userid`。

现在我的想法是使用 获取组名`getent group groupid`，但这不起作用。

谁能告诉我我的错误在哪里或如何获得组名？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T08:32:54.740

撇开您提供错误组 ID 的可能性不谈，这可能是 LDAP 设置中的一个错误，表现为反向组解析不起作用。这通过它适用于简单的“文件”设置这一事实得到了加强。

getent(1) 声明：

```
group     When no key is provided, use setgrent(3), getgrent(3), and
          endgrent(3) to enumerate the group database.  When one  or
          more  key arguments are provided, pass each numeric key to
          getgrgid(3) and each nonnumeric  key  to  getgrnam(3)  and
          display the result. 
```

这可能意味着 getgrgid(3) 在您的设置中失败。

要对此进行测试，请使用“make getgrgid_test”编译此程序（getgrgid_test.c）：

```
#include <stdio.h>
#include <sys/types.h>
#include <grp.h>

int
main(int argc, char **argv)
{
    int gid;
    struct group *g;

    if (argc != 2) {
        fprintf(stderr, "Invalid number of positional arguments\n");
        fprintf(stderr, "Usage getgrid_test GID\n");
        return 1;
    }
    gid = atoi(argv[1]);
    g = getgrgid(gid);
    if (g == NULL) {
        fprintf(stderr, "gid %d not found\n", gid);
        return 1;
    }
    printf("%s\n", g->gr_name);
    return 0;
} 
```

然后像这样使用您的 gid 运行它：

```
getgrgid_test GID 
```

如果它没有向您的系统管理员生成组名报告。

否则，如果它确实有效，但“getent group GID”没有，这是“getent”中的一个错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T08:28:46.833

你可能有一个配置问题，你没有像这样的一行：

```
group:    files ldap 
```

在你的`/etc/nsswitch.conf`.

或者您在 ldap 服务器上的组信息采用没有组 ID 编号的形式，例如 type `groupOfNames`，`groupOfUniqueNames`而不是 type `posixGroup`。

只有 posixGroup 具有允许它在 linux/unix 中用作有效组的适当属性（即匹配所需的组 ID 号）。在这种情况下，ldap 服务器不会返回有效组。

您*可以*拥有完美运行的 ldap 配置，而`getent group`.

# javascript - 具有不同图像的 Javascript 计时器

> ID：16163911
> 
> 赞同：0
> 
> 时间：2013-04-23T07:54:37.053
> 
> 标签：javascript, jquery, html, image

我有一个从 20 秒开始倒计时的 JS 计时器脚本

```
var count = 0;
var speed = 1000;

countdown = setInterval(

        function(){

        jQuery("#countdown").html(count);

        if (count == 0) {
            return;
        }
        count--;
        }

,speed); 
```

当计时器到达某个点时，有没有办法动态更改图像的 src？例如：

```
if (count >= 0 && count <= 10) {
 img.src = "2.png"
}

if (count >= 11 && count <= 20) {
 img.src = "1.png"
} 
```

当用户单击一个按钮时，它会在计时器的计数中增加 5：

```
jQuery('#add').click(function() {
    if(count >= 0 && count <= 18)   {count = count + 6} 
```

因此，当该值再次高于 11 时，图像 src 应恢复为 1.png

基本上它是一个脚本，根据计时器的值更改图像的 src。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T08:36:56.447

在纯 javascript 中，你会这样做：

[http://jsfiddle.net/sg3s/e54L3/](http://jsfiddle.net/sg3s/e54L3/)

HTML：

```
<button>Buttan</button>
<div id="counter"></div> 
```

Javascript：

```
"use strict";
(function(document) {
    var counter = document.getElementById('counter'), 
        button = document.getElementsByTagName('button')[0],
        // Added one extra to count to compensate for the one immediate countdown...
        count = 6, speed = 1000, countAddStep = 5, timeout,
        func = function () {
            count--;
            counter.innerHTML = count;
            if(count !== 0) {
                timeout = setTimeout(func, speed);
            }
        };

    button.addEventListener('click', function() {
        // Add the countstep to count
        count = count+countAddStep;
        counter.innerHTML = count;
        // Restart the timeout if needed.
        if (count === countAddStep) {
            // Add one for the one immediate countdown
            count++;
            func();
        }
    });

    // Start the timeout with 1 second (1000 ms) intervals
    func();
} (document)); 
```

如果您刚开始学习 javascript，这将是一种正确的方法。如果您需要为现有的应用程序/网站实现某些东西，您可能会拥有一个像 jQuery 这样的库供您使用，这将简化一些事情并使其更加跨浏览器兼容。

~~我相信人们也会发布 jQuery 示例......~~实际上[这里是 jQuery 版本](http://jsfiddle.net/sg3s/e54L3/1/)。了解正确的js更为重要。

您可以将计时器制作为图像，我没有图像，所以我将其保留为 html。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T08:05:49.630

您可以像这样使用 jQuery 更改每个属性：

```
var count = 0;
var speed = 1000;

countdown = setInterval(function(){
        if (count == 0) {
            return;
        }
        count--;
        $("#countdown").prop("src", count + ".png");
}
,speed); 
```

但是您可能更喜欢拥有一张带有精灵的大图像并更改`background-position`样式，而不是`src`避免在加载新图像时出现延迟。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T08:07:24.933

您可以创建一个在每个间隔结束时调用的函数，也可以在增加计数后单击。像这样的东西：

```
function validateImg(){
    var $img = $('#imgID');
    if (count >= 0 && count <= 10 && $img.attr('src') !='2.png') {
        $img.attr('src','2.png');
    }

    if (count >= 11 && count <= 20 && $img.attr('src') !='1.png') {
        $img.attr('src','1.png');
    }
} 
```

这样，如果计数在正确的间隔内，您只会更改 img

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T07:58:57.440

使用 Jquery 可以轻松更改图像的 src。

```
var newSrc=".....  " ; // new img path
$('#img1').attr('src',newSrc ); //changing the image 
```

编辑：

```
jQuery('#add').click(function() {

if(count >= 0 && count <= 18)   
{
   if(count==11)
  {
     var newSrc=".....  " ; // new img path
     $('#img1').attr('src',newSrc ); //changing the image 
  }

  count = count + 6
} 
```

快乐编码:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T08:02:38.423

如果你想使用纯 javascript，你可以给图像一个 id，然后使用

```
document.getElementById("imageid").src="newimage.png"; 
```

并将其更新为所需的图像。

# iphone - Core Data 和多线程编程

> ID：16163918
> 
> 赞同：3
> 
> 时间：2013-04-23T07:54:56.240
> 
> 标签：iphone, ios, multithreading, core-data, thread-safety

我知道这不是一个新话题，但我还没有找到关于我的问题的明确答案。

我正在开发一个项目，该项目有一个包含“书”的核心数据模型。因此，当我通过网络下载 json 数据时，我想将这些 Book 模型存储在我的核心数据中（当然是在后台线程中以不阻塞 UI），然后将这些 Book 模型传递给我的控制器并加载表。

然而，当我学习了 Apple 的 Core Data Reference 之后，我就迷惑了。该文件说我不应该在上下文之间传递托管对象。但是我有两个上下文，一个用于主线程，一个用于后台线程，用于下载、存储数据和获取当前更新的数据。所以我应该做的是在后台获取托管对象ID，并将这些ID传递给主线程中的上下文，然后在主线程中获取具有这些ID的托管对象。

问题来了。在主线程中获取具有 id 的托管对象会阻塞 UI 吗？当我在主线程中获取带有 id 的托管对象时，我是否正在访问 SQLite？如果这些获取的托管对象中有一些是错误的，这意味着如果我想获取它们的属性，我可能会执行 IO，我认为它仍然会阻塞我的 UI。

那么，在不阻塞 UI 的情况下，使用 Core Data 在后台获取数据并在主线程中显示这些数据（UI 操作应该在主线程中）的实用模式是什么？

感谢您的任何帮助！

* * *

重新思考：

***实际上所有的答案都没有解决我的问题。*** 但是，我又回到了一个考虑，即当我们需要在核心数据中使用多线程编程时。在大多数情况下，直接使用核心数据可能就足够高效了。我高估了主线程中核心数据操作的成本。

但是，我仍然希望有人推荐一种实用的模式来在后台进行获取，并在主线程中显示。我会很感激的！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T13:42:36.660

在你的情况下，我会使用三个 MOC。

```
NSManagedObjectContext *worker = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyTyep];
worker.persistentStoreCoordinator = // your PSC
NSManagedObjectContext *main = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSMainQueueConcurrencyType];
main.parentContext = worker; 
```

然后，每当您想要执行背景内容时，创建一个背景 MOC 作为主 MOC 的子对象。

```
NSManagedObjectContext *background = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
background.parentContext = main; 
```

请记住，保存上下文只会保存一个级别。因此，当您保存背景上下文时，更改将自动推送到主上下文中。

然后，您可以随时保存主上下文......但在某些时候您需要保存工作人员上下文。 `UIManagedDocument`自动为您处理主要/工作人员保存交互（但您在使用它时放弃了一些控制）。

您在这里获得的另一个好处是实际的 IO 操作不会发生在主线程中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T08:42:18.003

这完全取决于您在数据库中插入了多少次。

我发现最好在后台线程中完成所有下载，然后在主线程中插入对象。只要每 30 分钟只有几百次更新，对 UI 性能的影响应该没问题。以我的经验，这样做的健壮性和简单性远远超过了对主线程的小性能影响——你不必关心同步上下文，确保你在正确的线程中使用正确的对象等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T08:42:45.707

首先，保持简单，您不希望为了解决您没有的问题而杂耍上下文。是的，主线程上的 fetch 会阻塞 UI，但除非你发现这在真实硬件上是一个真正的问题，否则你可以忽略它。如果您的提取确实如此繁重以至于需要花费大量时间，然后进行分析和优化，那里有很多信息，请查看关于核心数据和仪器的 WWDC '12 视频和优秀的 Marcus Zarra[书](http://pragprog.com/book/mzcd2/core-data)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T08:16:55.197

您应该在后台线程中执行数据下载，然后在主线程中执行更新/插入操作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T08:45:48.093

我不知道这是否对您有帮助，但请在精彩的 Cocoa 是我的女朋友博客上尝试此博客条目：[Core Data and Threads, without the Headache](http://www.cimgf.com/2011/05/04/core-data-and-threads-without-the-headache/)

它解释了解决这个问题的一些方法，还处理了 UI 和主线程问题。

# css - CSS3 过渡缓入和缓出框阴影

> ID：16163922
> 
> 赞同：35
> 
> 时间：2013-04-23T07:55:05.253
> 
> 标签：css, hover, css-transitions

我正在尝试使用 CSS3 让 div id 轻松进出盒子阴影。

我目前的 CSS 是：

```
#how-to-content-wrap-first:hover {
    -moz-box-shadow: 0px 0px 5px #1e1e1e; 
    -webkit-box-shadow: 0px 0px 5px #1e1e1e; 
    box-shadow: 0px 0px 5px #1e1e1e;
    -webkit-transition: box-shadow 0.3s ease-in-out 0s;
    -moz-transition: box-shadow 0.3s ease-in-out 0s;
    -o-transition: box-shadow 0.3s ease-in-out 0s;
    -ms-transition: box-shadow 0.3s ease-in-out 0s;
    transition: box-shadow 0.3s ease-in-out 0s;
} 
```

我遇到的问题是，在元素的第一次悬停时，没有缓入或缓出，然后任何后续悬停都会缓入但不会缓出。

人们有任何建议将不胜感激？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-04-23T07:56:44.597

您需要使用过渡`.class`而不是`.class:hover`

```
div {
  height: 200px;
  width: 200px;
  box-shadow: 0;
  transition: box-shadow 1s;
  border: 1px solid #eee;
}

div:hover {
  box-shadow: 0 0 3px #515151;
  ;
}
```

```
<div></div>
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-10-14T18:42:14.043

这是一个[资源高效的解决方案](https://tobiasahlin.com/blog/how-to-animate-box-shadow/)

```
#how-to-content-wrap-first::after{
    /* Pre-render the bigger shadow, but hide it */
    box-shadow: 3px 3px 5px -1px #80aaaa;
    opacity: 0;
    transition: opacity 0.3s ease-in-out;         
}

#how-to-content-wrap-first:hover::after {
    /* Transition to showing the bigger shadow on hover */
    opacity: 1;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-17T11:58:15.980

这可以工作：

```
 #how-to-content-wrap-first:hover{
      box-shadow : inset 0 1px 1px rgba(0,0,0,.075);
      -webkit-transition : box-shadow ease-in-out .15s;
      transition : box-shadow ease-in-out .15s;
 } 
```

# iphone - 更改父视图控制器容器中的标签

> ID：16163923
> 
> 赞同：0
> 
> 时间：2013-04-23T07:55:05.507
> 
> 标签：iphone, ios, objective-c, xcode

我正在使用容器在其上显示 UIPageViewController。正如您在我的图像中看到的那样，我在导航栏下方有一个灰色栏，上面有一个白色标签。我想在“页面滚动视图控制器”中更改这个标签，我该怎么做？

![在此处输入图像描述](https://i.stack.imgur.com/5ozt7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T08:40:12.163

你有没有把它`UILabelView`和房产联系起来`ViewController`？如果没有，那么你必须先这样做。

像这样声明属性：

```
@property (weak, nonatomic) IBOutlet UILabel *blablabla; 
```

现在，将该属性连接到插座后。您可以通过`ViewController`以下方式访问它：

```
self.blablabla.text = @"your text goes here"; 
```

如果您遇到任何问题，请告诉我！

# c# - 委托在 C# 中不起作用

> ID：16163924
> 
> 赞同：0
> 
> 时间：2013-04-23T07:55:05.583
> 
> 标签：c#, delegates

有谁知道为什么控制权永远不会到达委托，尽管它被调用了？无论我是否在逐步调试，它都不会到达那里。

```
public void UpdateClock()
{
    //control never gets here 
}

delegate void UpdateClockDelegate();    

private void MT_TimerTick(object source, ElapsedEventArgs e)
{
    if (InvokeRequired) 
    { 
        //control gets here, but does not invoke, apparently
        Invoke(new UpdateClockDelegate(UpdateClock)); 
    }
} 
```

我根据以下 [链接中的说明基于此解决方案](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/507f5d4b-d33e-40e0-8802-05fe46519658/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T08:12:09.160

`Invoke`并且`InvokeRequired`通常用于确保函数在 UI 线程上执行。它通常调用自身，而不是另一个函数。

你的代码可能会变成这样：

```
public void UpdateClock()
{
    ...
}

private void MT_TimerTick(object source, ElapsedEventArgs e)
{
    if (InvokeRequired) 
    { 
        Invoke(new Action<object, ElapsedEventArgs>(TimerTick), source, e); 
    }
    else
    {
        UpdateClock();
    }
} 
```

此外，我同意 Scorpi0 使用 System.Windows.Forms.Timer，它总是会自动触发 UI 线程上的事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T08:02:51.907

我认为您正在混合[`System.Timers.Timer`](http://msdn.microsoft.com/library/system.timers.timer.aspx)和[`System.Windows.Forms.Timer`](http://msdn.microsoft.com/library/system.windows.forms.timer.aspx).

*   `System.Timers.Timer`：事件被调用`Elapsed`，它需要一个`ElapsedEventArgs`
*   `System.Windows.Forms.Timer`：事件被调用`Tick`，它需要一个`EventArgs`

如我所见，签名

```
MT_TimerTick(object source, ElapsedEventArgs e) 
```

拉响警报。
它应该是

```
MT_TimerElapsed(object source, ElapsedEventArgs e) 
```

或者

```
MT_TimerTick(object source, EventArgs e) 
```

检查您使用的是好的，并且您的活动已订阅。

 - 为了`System.Timers.Timer`

```
 MT_Timer.Elapsed += new ElapsedEventHandler(MT_Timer_Elapsed);
 MT_Timer.Start();
 void MT_Timer_Elapsed(object sender, ElapsedEventArgs e) { } 
```

   - 为了`System.Windows.Forms.Timer`

```
MT_Timer.Tick += new EventHandler(MT_Timer_Tick);
MT_Timer.Start();
void MT_Timer_Tick(object sender, EventArgs e) { } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T08:20:49.723

试试这个，希望它可以帮助你...

```
public void UpdateClock()
{
    this.MT_TimerTickCompleted += delegate(object sender, ElapsedEventArgs e)
    {
        //When MT_TimerTick occur, do something
    };
}

delegate void UpdateClockDelegate();    

private void MT_TimerTick(object source, ElapsedEventArgs e)
{
    if (InvokeRequired) 
    { 
        MT_TimerTickNotify(object, e); 
    }
}

public event EventHandler MT_TimerTickCompleted;
private void MT_TimerTickNotify(object sender, ElapsedEventArgs e)
{
    if (MT_TimerTickCompleted != null)
        MT_TimerTickCompleted(sender, e);
} 
```

# multithreading - 多个线程可以同时等待一个信号量

> ID：16163932
> 
> 赞同：2
> 
> 时间：2013-04-23T07:55:30.120
> 
> 标签：multithreading, pthreads, semaphore

多个线程可以等待一个信号量吗？如果是，在信号量下降时，将恢复哪一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T08:19:09.110

正如[文件](http://pubs.opengroup.org/onlinepubs/007908799/xsh/sem_post.html)建议的`sem_post`那样，

> 如果此操作产生的信号量的值为零，则将允许阻塞等待信号量的线程之一从对 的调用成功返回`sem_wait()`。如果定义了该符号`_POSIX_PRIORITY_SCHEDULING` ，则将以适合于对阻塞线程有效的调度策略和参数的方式选择要解除阻塞的线程。在调度器`SCHED_FIFO`和的情况下`SCHED_RR`，最高优先级等待线程将被解除阻塞，如果有多个最高优先级线程阻塞等待信号量，则等待时间最长的最高优先级线程将被解除阻塞。如果未定义符号`_POSIX_PRIORITY_SCHEDULING`，则未指定要取消阻塞的线程的选择。

此外，正如在*应用程序使用*[`sem_wait`](http://pubs.opengroup.org/onlinepubs/007908799/xsh/sem_wait.html)部分中定义的那样，可能存在涉及具有不同优先级的线程的优先级反转的情况

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T09:15:54.563

```
Can multiple threads wait on a single semaphore ? 
```

是的。

```
If yes, upon semaphore down which one will be resumed ? 
```

正是其中之一。哪一个取决于操作系统内核实现：用于保存等待线程的容器类型。这很可能是一个 FIFO 队列，因此调用 semaphore.wait() 的第一个线程将首先被释放，但您不应以任何依赖此行为的方式设计您的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T08:01:57.983

那将是计划在该特定 CPU 周期执行的线程。*

# web-services - Spring Batch 如何与 Web 服务一起工作，我如何读取 Web 服务输入？

> ID：16163933
> 
> 赞同：2
> 
> 时间：2013-04-23T07:55:30.900
> 
> 标签：web-services, spring-batch

我是 Spring Batch 的新手。我想知道 Spring Batch 如何与 Web 服务一起工作，以及如何让 Spring Batch 从 Web 服务读取输入，例如 transaction_id = 125

为了清楚起见，我希望 Spring Batch 从 Web 服务（ID = 125）读取输入，查询输入然后对该记录进行一些计算并最终更新记录

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T13:50:38.060

根据您的问题，您的核心工作看起来像这样；

本质上，您将从服务中读取单个记录（webServiceReader - 通过 id 检索），处理它（webServiceProcessor），然后最后将其保存在某个地方（databaseWriter）。

如果您已经设置了现有的 Web 服务客户端，则可以在`org.springframework.batch.item.adapter.ItemReaderAdapter`. 这将允许您保存一些编码并取回您的对象。然后，您可以专注于处理器，再次考虑使用`org.springframework.batch.item.adapter.ItemProcessorAdapter`来启用现有非批处理代码的一些重用。

最后，对于持久性，如果您要更新数据库，请查看`org.springframework.batch.item.database.JdbcBatchItemWriter`.

此实现的唯一“技巧”是如何指定从 web 服务请求的 id。为此，您可能想查看一个队列/堆栈，您可以在其中`poll()`为每个连续调用提供一个 id。

这可能看起来像这样

```
<batch:job id="webServiceJob">
    <batch:step id="webServiceJob.step1">
        <batch:tasklet>
            <batch:chunk reader="webServiceReader" processor="webServiceProcessor" writer="databaseWriter" commit-interval="10"/>
        </batch:tasklet>
    </batch:step>
</batch:job>    

<bean id="webServiceReader" class="org.springframework.batch.item.adapter.ItemWriterAdapter">
    <property name="targetObject" ref="myWebService"/>
    <property name="targetMethod" value="getById"/>
    <property name="arguments" value="#{@idQueue.poll()}"/>
</bean>

<bean id="idQueue" class="java.util.concurrent.LinkedBlockingQueue">
    <constructor-arg>
        <list>
            <value>1</value>
            <value>2</value>
            <value>3</value>
        </list>
    </constructor-arg>
</bean> 
```

# javascript - 单击子元素也会触发其父元素的单击事件

> ID：16163934
> 
> 赞同：3
> 
> 时间：2013-04-23T07:55:41.507
> 
> 标签：javascript, jquery, backbone.js

**设想**

我在主干应用程序中的视图由几个`boxes(which are div elements)`. 当用户单击一个框并按住鼠标按钮 500 毫秒时，我想`delete`在左上角显示一个按钮。当用户点击其他任何地方时`#wrapper`，该`delete`按钮应该隐藏。

**问题**

所以显示`delete`按钮不是问题。当我单击并按住一秒钟时，它确实显示删除按钮，它显示删除按钮半秒钟然后隐藏。它之所以隐藏，是因为我还将单击事件添加到它的父元素`#wrapper`，它实际上隐藏了这个删除按钮。

**问题**

`#wrapper`那么，当我单击并按住子元素时，如何阻止父元素触发单击事件`box`？

**这是我的代码**

这是父元素模块的代码

```
var Boxes = Backbone.View.extend({
    el: '#wrapper',

    events: {
        'click': 'method' //when clicked on wrapper i.e. parent of box trigger method function
    },

    render: function (PaintBoxModel) {
        var paintBoxView = new PaintBoxView({ model: PaintBoxModel });
        this.$el.find('#contents').append(paintBoxView.render().el);
        return this;
    },

    method: function () {
        console.log('method');
        App.Vent.trigger('bodyclicked'); //trigger an event
    }

}); 
```

这是子元素的模块

```
var Box = Backbone.View.extend({
    events: {
        'mousedown': 'mouseHoldDown',
        'mouseup': 'removeMouseHoldDown'
    },

    initialize: function () {
        this.timeoutId = 0;
        App.Vent.on('bodyclicked', this.removeDeleteBtnShadow.bind(this)); //here I am listening to the click event when parent `#wrapper` is clicked
    },

    mouseHoldDown: function () {
        this.timeoutId = setTimeout(this.addDeleteBtnShadow.bind(this), 500);
    },

    removeMouseHoldDown: function () {
        clearTimeout(this.timeoutId);
    },

    addDeleteBtnShadow: function () {
            this.$el.append('<a href="#" class="remove">X</a>');
            this.$el.addClass('is-shadow');
    },

    removeDeleteBtnShadow: function () {
        this.$el.find('.remove').remove();
        this.$el.removeClass('is-shadow');
    }

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T07:57:50.423

`event`作为参数传递并使用`.stopPropagation()`.

```
removeMouseHoldDown: function (e) 
{
   e.stopPropagation();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-19T13:28:58.013

我刚刚通过在子函数上添加 event.stopPrpagation 解决了这个问题。所以例如 -

```
var parentView = new Backbone.View.extend({
    ...
    events: {
        "click": "renderSomething"
    },
    renderSomething: function() {
        //some rendering code
    }
});

var childView = new Backbone.View.extend({
    ...
    events: {
        "click": "renderSomething"
    },
    renderSomething: function(event) {
         event.stopPropagation(); //this will stop the event from being propagated to the parent
        //some rendering code
    }
}); 
```

# json - 无法使用 Json 数据填充列表框

> ID：16163938
> 
> 赞同：0
> 
> 时间：2013-04-23T07:55:48.740
> 
> 标签：json, windows-phone-7, c#-4.0

这是我的 json 字符串中的 C# 类：

```
public class Products

        {
            public string cid { get; set; }
            public string name { get; set; }

        }

        public class RootObject
        {
            public List <Products> product  { get;set; }
            public int success { get; set; }
        } 
```

C#代码：

```
void myButton_Click(object sender,RoutedEventArgs e)
        {

          WebClient wc = new WebClient();
          wc.DownloadStringAsync(new Uri("http://ensignweb.com/sandbox/app/comment11.php"));
          wc.DownloadStringCompleted += new DownloadStringCompletedEventHandler(wc_DownloadStringCompleted);
    }

    void wc_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {

       string  MyJsonString = e.Result;
       var jsonObj = JObject.Parse(MyJsonString);

   Products products = JsonConvert.DeserializeObject<Products>(jsonObj.ToString());
   TestList.ItemsSource = products.name; 
```

}

调试时获取 O/pi：

```
 string jsonObj= {
      "products": [
        {
          "cid": "1",
          "name": "bernard"
        },
        {
          "cid": "2",
          "name": "Vijay"
        },
        {
          "cid": "3",
          "name": "vikas_admin"
        },
        {
          "cid": "4",
          "name": "vikas_admin"
        },
        {
          "cid": "5",
          "name": "vikas_admin"
        },

      ],
      "success": 1
    }   

products:TestApp.TestNews.Products 
```

请帮助使用 Json.net 反序列化上述字符串。试过在网上找资源，没用。我的列表框未填充源并显示为空。

更新：尝试建议的代码后得到的 o/pi ：

```
TestApp.TestNews+Product
TestApp.TestNews+Product
TestApp.TestNews+Product
TestApp.TestNews+Product
TestApp.TestNews+Product
TestApp.TestNews+Product
TestApp.TestNews+Product
TestApp.TestNews+Product
TestApp.TestNews+Product
TestApp.TestNews+Product
TestApp.TestNews+Product
TestApp.TestNews+Product
TestApp.TestNews+Product 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T08:58:30.173

好的，用这个

```
[DataContract]
public class Products
{
    [DataMember (Name = "cid")]
    public string Cid { get; set; }

    [DataMember(Name = "name")]
    public string Name { get; set; }
}

[DataContract]
public class RootObject
{
     [DataMember(Name = "products")]
    public List<Products> ProductList { get; set; }
} 
```

和

```
 private void wc_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
        var json = e.Result;
        var products = JsonConvert.DeserializeObject<RootObject>(json);
        TestList.ItemsSource = products.ProductList; // this line was updated
    } 
```

所有工作都很棒。问候

# dns - 我可以在 Amazon Web Services 中创建多个托管区域吗

> ID：16163944
> 
> 赞同：0
> 
> 时间：2013-04-23T07:56:08.387
> 
> 标签：dns, amazon-web-services, migration

我在我这里注册了超过 1 个域。最近注册了 Amazon Web Services (AWS) 。我可以转移多个域并使用 AWS 中的“托管区域”服务来托管它们吗？简单来说，我有一个 AWS 登录名，可以使用它来托管多个域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T08:30:27.877

是的，您可以在 AWS 上管理无限数量的域 - 我假设您的意思是使用 Route 53。

# android - 在android Horizo ntalscrollview中平滑滚动到最后一个标签

> ID：16163946
> 
> 赞同：0
> 
> 时间：2013-04-23T07:56:29.207
> 
> 标签：android, android-layout, horizontal-scrolling, android-scrollview

我在布局底部有八个带有水平滚动视图的选项卡。

现在我想要的是在该活动开始时，我想平滑地将整个标签滚动到最后一个标签。那么如何才能在水平滚动视图中平滑地滚动第一个选项卡到最后一个选项卡。

这是我的布局文件：

```
<HorizontalScrollView
    android:id="@+id/horizontalScrollView"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:fadingEdge="none"
    android:overScrollMode="never"
    android:scrollbars="none" >

    <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:divider="@drawable/divider_tab" />

</HorizontalScrollView> 
```

我尝试了一些代码，例如：

```
final HorizontalScrollView sv = (HorizontalScrollView)findViewById(R.id.horizontalScrollView);
sv.post(new Runnable() {
    public void run() {
        sv.fullScroll(HorizontalScrollView.FOCUS_RIGHT);
    }
}); 
```

请帮我制作这个动画或滚动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T10:12:48.007

我还在屏幕底部的活动中创建了 9 个选项卡。我可以非常流畅地滚动浏览所有选项卡。在 XML 中尝试以下代码：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<!-- xmlns:android="http://schemas.android.com/apk/res/android" -->

<TabHost
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <!-- <View -->
        <!-- android:layout_width="fill_parent" -->
        <!-- android:layout_height="0.5dip" -->
        <!-- android:background="#000" /> -->

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_weight="1" />

        <View
            android:layout_width="fill_parent"
            android:layout_height="2dip"
            android:background="#696969" />

        <HorizontalScrollView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <TabWidget
                android:id="@android:id/tabs"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginLeft="0dip"
                android:layout_marginRight="0dip" />
        </HorizontalScrollView>

        <!-- <View -->
        <!-- android:layout_width="fill_parent" -->
        <!-- android:layout_height="2dip" -->
        <!-- android:background="#000" /> -->

    </LinearLayout>
</TabHost> 
```

希望能帮助到你..

# haskell - 如何在相对于正在编译的文件的文件上使用 TemplateHaskell 的 addDependentFile？

> ID：16163948
> 
> 赞同：4
> 
> 时间：2013-04-23T07:56:35.950
> 
> 标签：haskell, template-haskell

我希望`MyDependency.txt`在更改该文件时重新计算使用 IO 并依赖于文件的 TemplateHaskell 表达式。

因此，我`addDependentFile "MyDependency.txt"`用来告诉 ghc 在编译我的代码时检查该文件是否有修改。

不幸的是，这不起作用，因为`addDependentFile`仅相对于调用 ghc 的目录起作用。

我如何使用它来依赖于我正在编译的文件*旁边（在同一目录中）的文件？*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T07:56:35.950

您可以使用`location`from`Language.Haskell.TH.Syntax`提取正在编译的文件的文件名，并使用它来组装正确的路径：

```
-- | Uses 'addDependentFile' on a file relative to the current file
-- to mark it as being checked for changes when compiled with TemplateHaskell.
--
-- Returns an empty list of declarations so that it can be used with:
--
-- >$(addDependentFileRelative "MyDependency.txt")
addDependentFileRelative :: FilePath -> Q [Dec]
addDependentFileRelative relativeFile = do
    currentFilename <- loc_filename <$> location
    pwd             <- runIO getCurrentDirectory

    let invocationRelativePath = takeDirectory (pwd </> currentFilename) </> relativeFile

    addDependentFile invocationRelativePath

    return [] 
```

（公共领域代码）

# core-data - 使用 saveToURL 创建 UIManagedDocument 时的 iOS CoreDataTableViewController 表

> ID：16163954
> 
> 赞同：0
> 
> 时间：2013-04-23T07:56:55.927
> 
> 标签：core-data, uimanageddocument

我正在使用斯坦福的 CoreDataTableViewController 来显示动态表。

应用程序如何工作：要向该表中添加一行，会弹出一个子屏幕进行数据输入，当子屏幕关闭时，插入新创建的 managedObject，并通过回调重新加载表。

我注意到在重新进入屏幕后，新添加的行会间歇性地从表中丢失。我注意到这种行为仅在第一次使用 saveToURL 创建 UIManagedDocument 对象时发生。随后，在重新启动应用程序并使用 openWithCompletionHandler 打开 UIManagedDocument 后，列表始终正确显示。

这是我用来创建/打开 UIManagedDocument 的代码：

```
- (void)performWithDocument:(OnDocumentReady)onDocumentReady
{
    void (^OnDocumentDidLoad)(BOOL) = ^(BOOL success)
    {
        NSLog(@"Called OnDocumentDidLoad");
        onDocumentReady(self.document);
    };

    if (![[NSFileManager defaultManager] fileExistsAtPath:[self.document.fileURL path]])
    {
        [self.document saveToURL:self.document.fileURL
                forSaveOperation:UIDocumentSaveForCreating
               completionHandler:OnDocumentDidLoad];
    }
    else if (self.document.documentState == UIDocumentStateClosed)
    {
        NSLog(@"Calling openWithCompletionHandler:OnDocumentDidLoad");
        [self.document openWithCompletionHandler:OnDocumentDidLoad];
    }
    else if (self.document.documentState == UIDocumentStateNormal)
    {
        OnDocumentDidLoad(YES);
    }
} 
```

运行上述代码时，始终调用 onDocumentDidLoad()，成功标志为 YES。

非常感激任何的帮助。提前致谢！

- 编辑以下代码以显示我的创建方法，然后关闭并重新打开文档以响应 Jody - 我仍然遇到同样的问题。---

```
- (void)performWithDocument:(OnDocumentReady)onDocumentReady
{
    void (^OnDocumentDidLoad)(BOOL) = ^(BOOL success)
    {
        NSLog(@"Called OnDocumentDidLoad success: %d", success);
        onDocumentReady(self.document);
    };

    void (^OnDocumentDidClose)(BOOL) = ^(BOOL success)
    {
        NSLog(@"Called OnDocumentDidClose, openWithCompletionHandler success: %d", success);
        [self.document openWithCompletionHandler:OnDocumentDidLoad];
    };

    void (^OnDocumentDidSave)(BOOL) = ^(BOOL success)
    {
        NSLog(@"Called OnDocumentDidSave success: %d", success);
        if (self.document.documentState == UIDocumentStateClosed)
        {
            NSLog(@"Calling openWithCompletionHandler:OnDocumentDidLoad from onDocumentDidSave - was closed");
            [self.document openWithCompletionHandler:OnDocumentDidLoad];
        }
        else if (self.document.documentState == UIDocumentStateNormal)
        {
            // TODO Close and reopen?
            NSLog(@"Calling closeWithCompletionHandler:OnDocumentDidClose from onDocumentDidSave - was normal");

            [self.document closeWithCompletionHandler:OnDocumentDidClose];
        }
    };

    if (![[NSFileManager defaultManager] fileExistsAtPath:[self.document.fileURL path]])
    {
        // Database doesn't exist, create it, then close and reopen in completion handler
        [self.document saveToURL:self.document.fileURL
                forSaveOperation:UIDocumentSaveForCreating
               completionHandler:OnDocumentDidSave];
    }
    else if (self.document.documentState == UIDocumentStateClosed)
    {
        // Open existing database
        NSLog(@"Calling openWithCompletionHandler:OnDocumentDidLoad");
        [self.document openWithCompletionHandler:OnDocumentDidLoad];
    }
    else if (self.document.documentState == UIDocumentStateNormal)
    {
        // Already opened
        OnDocumentDidLoad(YES);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:32:03.340

您没有指明您使用的是哪个版本的 iOS，这几乎总是很重要的。

创建文档时出现 iOS 5 问题。很久以前，我在创建`UIManagedDocument`. 它仍然在我的库代码中，因为我从来没有足够的动力花时间查看问题是否得到解决。

如果文档不存在，请将其保存以供创建，并在完成处理程序中将其关闭，然后在该完成处理程序中将其打开。这样，除非它已经存在，否则我从未真正使用过文档。

# javascript - 函数参数列表Javascript中的赋值

> ID：16163955
> 
> 赞同：0
> 
> 时间：2013-04-23T07:57:02.787
> 
> 标签：javascript, arguments, anonymous-function

这是有效的JS吗？它运行但想知道这是否是浏览器的怪癖。我知道这可能是不好的做法，因为它令人困惑但仍然是一个很酷的概念。

```
 showClickMask : function showClickMask(callback){

        (function(mask){
            mask.addClass('open');
            mask.click(function(){RAV.closeClickMask(mask,callback);});
        })(showClickMask.mask = showClickMask.mask || $('#click-mask'));

    }, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:58:53.610

是的，这是有效的、符合标准的 JavaScript。赋值是一个表达式，并“返回”被赋值的值。

（你是否认为它是好的风格是另一个问题！）

# mysql - MYSQL LEFT JOIN 与 GROUP BY

> ID：16163956
> 
> 赞同：12
> 
> 时间：2013-04-23T07:57:06.207
> 
> 标签：mysql, group-by, sum, left-join

:) 我有 2 个查询，我需要加入它们，我需要将员工的工作时间根据活动与公司在同一活动中的总工作时间进行比较

第一个查询是：

```
SELECT u.login,
       a.article, 
       p.p_article, 
       (SUM(p.p_going) + SUM(p.p_leaving) + SUM(p.p_working)) AS tottime
FROM pos p,users u, articles a
WHERE u.login = p.p_login
AND REPLACE( u.login, '.', '_' ) = 'users_name'
AND p.p_datum >= '2013-04-09'
AND p.p_datum <= '2013-04-16'
AND p.p_article = a.id
GROUP BY a.article 
```

我的第二个查询是：

```
SELECT a.article, 
       p.p_article, 
       (SUM(p.p_going) + SUM(p.p_leaving) + SUM(p.p_working)) AS tottime
FROM pos p, articles a
WHERE p.p_datum >= '2013-04-09'
AND p.p_datum <= '2013-04-16'
AND p.p_article = a.id
GROUP BY a.article 
```

第一个查询返回按活动分组的 WORKER 的总工作时间，例如：

```
u.login    a.article     p.p_article  tottime
Ivan       Teambuilding    1          3,45
Julie      Social_work     2          5,67 
```

第二个查询返回我按活动分组的 COMPANY 的总工作时间，例如：

```
a.article     p.p_article  tottime
Teambuilding    1         150
Social_work     2         260 
```

我想要这样的东西，所以我可以将每个活动的工人总时间与特定时期内每个活动的公司工作总时间进行比较：

```
u.login    a.article     p.p_article  tottime(worker)  tottime(company) 
Ivan       Teambuilding    1          3,45              150  
Julie      Social_work     2          5,67              260 
```

如果是 NULL 值，我想使用 LEFT JOIN。我花了 3 个小时寻找解决方案，但我尝试的一切都不起作用，所以任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-23T08:10:21.747

您可以将 2 个查询作为一对子选择连接在一起。

就像是：-

```
SELECT Sub1.a, Sub1.b, Sub2.c
FROM (SELECT a, b FROM z) Sub1
INNER JOIN (SELECT a, c FROM y) Sub2
ON Sub1.a = Sub2.a 
```

但是，由于您的第一个示例查询似乎没有带回您所说的详细信息（仅带回 3 列），因此无法真正为您提供更多信息。

编辑 - 使用更正的查询

```
SELECT Sub1.login AS User_name, Sub1.article AS Activity, Sub1.p_article AS `Activity id`, Sub1.tottime AS `Totaltime(worker)`, Sub2.tottime AS `Totaltime(company)`
FROM (SELECT u.login,a.article, p.p_article, (SUM(p.p_going) + SUM(p.p_leaving) + SUM(p.p_working)) AS tottime
FROM pos p
INNER JOIN users u ON u.login = p.p_login 
INNER JOIN articles a ON p.p_article = a.id
WHERE REPLACE( u.login, '.', '_' ) = 'users_name'
AND p.p_datum >= '2013-04-09'
AND p.p_datum <= '2013-04-16'
GROUP BY a.article) Sub1
INNER JOIN 
(SELECT a.article, p.p_article, (SUM(p.p_going) + SUM(p.p_leaving) + SUM(p.p_working)) AS tottime
FROM pos p
INNER JOIN articles a ON p.p_article = a.id
WHERE p.p_datum >= '2013-04-09'
AND p.p_datum <= '2013-04-16'
GROUP BY a.article) Sub2
ON Sub1.p_article = Sub2.p_article 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T08:07:34.120

最简单的方法是使用子查询（尽管它们通常效率不高，但那些`GROUP BY`可能会使其他解决方案变得困难）。

这样的事情应该这样做：

```
SELECT a.*, b.tottime AS 'Total time (company)'
FROM
    (SELECT u.login, a.article, p.p_article, (SUM(p.p_going) + SUM(p.p_leaving) + SUM(p.p_working)) AS 'Total time (worker)'
    FROM pos p, users u, articles a
    WHERE u.login = p.p_login
    AND REPLACE( u.login, '.', '_' ) = 'users_name'
    AND p.p_datum >= '2013-04-09'
    AND p.p_datum <= '2013-04-16'
    AND p.p_article = a.id
    GROUP BY a.article) a
LEFT JOIN
    (SELECT a.article, p.p_article, (SUM(p.p_going) + SUM(p.p_leaving) + SUM(p.p_working)) AS tottime
    FROM pos p, articles a
    WHERE p.p_datum >= '2013-04-09'
    AND p.p_datum <= '2013-04-16'
    AND p.p_article = a.id
    GROUP BY a.article) b
ON a.article = b.article /* AND a.p_article = b.p_article ?? */ 
```

# php - 如何在 PHP 代码中正确设置错误报告？

> ID：16163957
> 
> 赞同：-1
> 
> 时间：2013-04-23T07:57:06.590
> 
> 标签：php, error-handling

也许这是一个愚蠢的问题，但我不知道如何解决它。我正在尝试按照[此处](https://stackoverflow.com/questions/3597766/is-there-a-way-that-i-enforce-that-php-reports-error-if-i-use-an-uninitialized-u)的建议激活错误报告，但在 PHP5 代码中使用以下两行：

```
@ini_set('display_errors' '1');  // <- line 12
error_reporting(E_ALL); 
```

但是，在运行代码时出现以下错误：

```
Parse error: syntax error, unexpected T_CONSTANT_ENCAPSED_STRING in XXX on line 12 
```

我在有和没有标志的情况下都试过了。也许PHP4和PHP5之间有区别？别的什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:58:52.603

你漏了一个逗号

```
@ini_set('display_errors', '1'); <--- here
error_reporting(E_ALL); 
```

# java - 防止 JFreeChart DialPlot 用大值环绕？

> ID：16163964
> 
> 赞同：3
> 
> 时间：2013-04-23T07:57:45.990
> 
> 标签：java, jfreechart

我的数据值可以在 0-100 之间变化。我想显示一个显示范围 0-30 的 JFreeChart DialPlot，其中大于 30 的值通过将指针固定在 30 来显示，但真实值显示在表盘上。

下图显示了我的示例代码当前生成的内容：

**电流输出**

![拨号示例](https://i.stack.imgur.com/Gjln5.png)

这里我显示的值是 50。刻度盘绕到指向 14。我希望它设置为最大值 (30)，就像使用燃料刻度盘一样：

**期望的输出**

![在此处输入图像描述](https://i.stack.imgur.com/puDNY.png)

这可能与 JFreeChart 吗？SSCCE 代码如下。

```
public class DemoChartProblem {

  private final DefaultValueDataset dataset = new DefaultValueDataset(50);
  private final JFrame frame = new JFrame();

  public static void main(String[] args) throws Exception {
    new DemoChartProblem();
  }

  public DemoChartProblem() {
    frame.setPreferredSize(new Dimension(300, 300));
    frame.add(buildDialPlot(0, 30, 5));
    frame.pack();
    frame.setLocationRelativeTo(null);
    frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

    SwingUtilities.invokeLater(new Runnable() {
      @Override
      public void run() {
        frame.setVisible(true);
      }
    });
  }

  private ChartPanel buildDialPlot(int minimumValue, int maximumValue,
      int majorTickGap) {

    DialPlot plot = new DialPlot(dataset);
    plot.setDialFrame(new StandardDialFrame());
    plot.addLayer(new DialValueIndicator(0));
    plot.addLayer(new DialPointer.Pointer());

    StandardDialScale scale = new StandardDialScale(minimumValue, maximumValue,
        -120, -300, majorTickGap, majorTickGap - 1);
    scale.setTickRadius(0.88);
    scale.setTickLabelOffset(0.20);
    plot.addScale(0, scale);

    return new ChartPanel(new JFreeChart(plot));
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T01:43:40.220

> 我很想知道是否有更好的方法。

`DialValueIndicator`和之间的差异`maximumValue`可能令人困惑。作为替代方案，使用 表示不同的范围`StandardDialRange`：

```
int redLine = 3 * maximumValue / 5;
plot.addLayer(new StandardDialRange(minimumValue, redLine, Color.blue));
plot.addLayer(new StandardDialRange(redLine, maximumValue, Color.red)); 
```

设置框架的首选大小是[有问题](https://stackoverflow.com/q/7229226/230513)的。相反，覆盖以下`getPreferredSize()`方法`ChartPanel`：

```
return new ChartPanel(new JFreeChart(plot)) {
    @Override
    public Dimension getPreferredSize() {
        return new Dimension(300, 300);
    }
}; 
```

![测试图像](https://i.stack.imgur.com/2rugK.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T08:09:54.820

我刚刚想出了一个解决方法，但我很想知道是否有更好的方法。

在这个解决方案中，我维护了两个`DefaultValueDataset`对象。一个包含实际值，一个包含约束值，不大于我的拨号限制。指针与约束集相关联，刻度盘值与实际值相关联。

```
public class DemoChartProblem {

  private static final int DISPLAY_MAX = 30;
  private final DefaultValueDataset dataset = new DefaultValueDataset();
  private final DefaultValueDataset displayDataset = new DefaultValueDataset();
  private final JFrame frame = new JFrame();

  public static void main(String[] args) throws Exception {
    new DemoChartProblem();
  }

  public DemoChartProblem() {
    frame.setPreferredSize(new Dimension(300, 300));
    frame.add(buildDialPlot(0, DISPLAY_MAX, 5));
    frame.pack();
    frame.setLocationRelativeTo(null);
    frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

    setValue(50);

    SwingUtilities.invokeLater(new Runnable() {
      @Override
      public void run() {
        frame.setVisible(true);
      }
    });
  }

  private void setValue(int value) {
    dataset.setValue(value);
    displayDataset.setValue(Math.min(DISPLAY_MAX, value));
  }

  private ChartPanel buildDialPlot(int minimumValue, int maximumValue,
      int majorTickGap) {

    DialPlot plot = new DialPlot();
    plot.setDataset(0, dataset);
    plot.setDataset(1, displayDataset);

    plot.setDialFrame(new StandardDialFrame());

    // value indicator uses the real data set
    plot.addLayer(new DialValueIndicator(0));

    // needle uses constrained data set
    plot.addLayer(new DialPointer.Pointer(1));

    StandardDialScale scale = new StandardDialScale(minimumValue, maximumValue,
        -120, -300, majorTickGap, majorTickGap - 1);
    scale.setTickRadius(0.88);
    scale.setTickLabelOffset(0.20);
    plot.addScale(0, scale);

    return new ChartPanel(new JFreeChart(plot));
  }
} 
```

# facebook - 如何在没有电话号码或信用卡的情况下验证 Facebook 帐户

> ID：16163966
> 
> 赞同：-1
> 
> 时间：2013-04-23T07:57:50.877
> 
> 标签：facebook, validation, facebook-graph-api

我在一个禁止使用 facebook 的国家，我正在寻求使用 facebook api 和 SDK。为此，我需要通过短信发送的代码或信用卡验证来验证帐户。信用卡验证对我来说不是一个选项，我收到的短信延迟了 2 到 3 个小时，当我输入六个验证码数字时，我收到一条错误消息，说它的代码错误。有谁知道为什么会发生这种情况，有没有办法使用 facebook SDK？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T08:17:27.097

好吧，这并不理想，但您可以从 Github 下载 SDK。[我在这里](https://github.com/facebook/facebook-php-sdk)为您找到了 PHP SDK 。JS SDK 已过时。Android SDK 可以在[这里](https://github.com/facebook/facebook-android-sdk)找到，[这](https://github.com/facebook/facebook-ios-sdk)应该是 iOS SDK。我不确定这是否是您正在寻找的，因为它只是 API 本身。更多解释和示例可以在developers.facebook.com 上找到，但正如您所说，在您的国家/地区禁止使用FB，我不知道您是否能够访问它。

无论如何，希望我的回答对您有所帮助。祝你好运！:)

# javascript - 想在特定日期给出特定条件，但无法正常工作

> ID：16163967
> 
> 赞同：1
> 
> 时间：2013-04-23T07:57:52.150
> 
> 标签：javascript, jquery, javascript-events

在特定日期，我想运行一些代码，但它不会在 if 条件下发出警报

```
 var today=new Date(),
          dd = today.getDate().
          mm= today.getMonth()+1,
          yyyy=today.getYear()

         // its alerting
        // alert(dd); 
```

但如果我输入 if 条件并比较日期，它不会发出警报

```
 // bt its not
    If ( dd == 23) {
     alert("0");

    } 
```

不知道是什么原因。如果我匹配 if 条件中的日期，它不会发出警报

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T08:04:23.493

您的代码有错误..它*本身*没有任何问题...

`today.getDate().`<--- 将尾随更改`period`为`comma`.

更改`If`为`if`

如果您[按照此处所示](http://jsfiddle.net/gWEFv/)进行这些更改，那么它可以正常工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T08:06:03.180

尝试这个

```
var today=new Date(),
          dd = today.getDate().
          mm= parseInt(today.getMonth())+1,
          yyyy=today.getYear() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T08:20:21.530

我认为你应该做一些更正：

```
var today=new Date(),
    dd = today.getDate() // removed the period
    mm = parseInt(today.getMonth()) + 1,
    yyyy = today.getYear(); // added a semi-colon

    // its alerting
    // alert(dd);   

    if ( dd == 23) {
        alert("0");
    } 
```

# linux - 如何通过 KERNEL 级别的 Makefile 查找 *.o 文件

> ID：16163970
> 
> 赞同：0
> 
> 时间：2013-04-23T07:57:56.617
> 
> 标签：linux, linux-kernel, linux-device-driver, kernel-module, kernel

通常在内核级别`make file`包含

```
$(CONFIG_SERIAL_DEVICE) += serial.o 
```

当我们创建用户级别`make file`时，它会`.o`从该特定文件夹中找到文件。但在这，`serial.o`存在于哪里？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:14:51.673

例如

```
drivers/serial/Makefile:obj-$(CONFIG_SERIAL_TXX9)+=serial_txx9.o 
```

内核串行驱动程序中的这个 Makefile 将根据各自内核代码的 .config 构建。它将从 .config 中选择静态或动态构建等详细信息。

# javascript - 在 angularjs 中获取 $this

> ID：16163978
> 
> 赞同：19
> 
> 时间：2013-04-23T07:58:07.957
> 
> 标签：javascript, jquery, angularjs

这是我的问题。

HTML结构：

```
<tr><td><a ng-click=aClick()>Click Me</a></td></tr> 
```

我不能有任何与 and 相关联的 id/class

我需要的是点击“点击我”，`<tr>`隐藏。我需要一个 jQuery 解决方案。有些我无法使用`$(this)`。

功能：

```
$scope.aClick = function() {
   $(this).parent().parent().css('display','block');
}; 
```

但是这个陈述给了我一个错误。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-23T08:05:12.440

注意：我不建议在控制器中使用 dom 操作，您可以编写指令来执行此操作。也就是说，您可以使用`$event`来获取事件对象，从中您可以获取事件目标并将其与 jquery 一起使用。

```
<tr><td><a ng-click="aClick($event)">Click Me</a></td></tr> 
```

和

```
 $scope.aClick = function(event) {
     $(event.target).parent().parent().css('display','none');
  }; 
```

演示：[Plunker](http://plnkr.co/edit/auHr7zKbAQO3sPybBRE6?p=preview)

**更新**
更合适的角度解决方案是使用 ng-hide

```
<tr ng-hide="hideRow"><td><a ng-click="hideRow = true">Click Me</a></td></tr> 
```

演示：[Plunker](http://plnkr.co/edit/BBOdNae7oWy5fUi73fqw?p=preview)

使用 ng-repeat[更新了演示](http://plnkr.co/edit/N8lxRbeiHpbguCNZjHz6?p=preview)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-23T08:01:05.277

由于您使用的是角度，因此您应该很少需要进行实际的 dom 操作。相反，请查看应该为您执行此操作的[ng-hide/ng-show指令。](http://docs.angularjs.org/api/ng.directive%3angHide)

Angular 文档中的一个示例：

```
<body>
    Click me: <input type="checkbox" ng-model="checked"><br/>
    Show: <span ng-show="checked">I show up when you checkbox is checked?</span> <br/>
    Hide: <span ng-hide="checked">I hide when you checkbox is checked?</span>
</body> 
```

**编辑**

如果表达式中的变量是异步更新的，则可以强制更新[`$scope.$apply`](http://docs.angularjs.org/api/ng.%24rootScope.Scope)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-23T08:07:35.153

你可以使用这个：

**JavaScript**

```
function TestCtrl($scope) {
    $scope.clickMe = function ($event) {
        $($event.target).parent().parent().css('display','none');
    };
} 
```

**HTML**

```
<div ng-app>
    <div ng-controller="TestCtrl">
        <a ng-click="clickMe($event)">Click me</a>
    </div>
</div> 
```

**[现场演示](http://jsfiddle.net/mgechev/vfMzk/2/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-17T22:02:13.413

你为什么不做这样简单的事情呢？我假设你循环运行它......

```
<div ng-repeat="row in table">
<tr>
    <td>
        <a ng-class="{'hideme': hiddenRows[row.id]}" ng-click="hiddenRows[row.id] = true">Click Me</a>
    </td>
</tr>
</div> 
```

甚至更好

```
<div ng-repeat="row in table">
    <tr ng-show="!hiddenRows[row.id]">
        <td>
            <a ng-click="hiddenRows[row.id] = true">Click Me</a>
        </td>
    </tr>
</div> 
```

（我没有测试它，但它应该给你的想法）

# performance - 使用提琴手的页面渲染时间

> ID：16163979
> 
> 赞同：0
> 
> 时间：2013-04-23T07:58:08.610
> 
> 标签：performance, networking, fiddler

对于 asp.net 页面，我们可以使用 Fiddler 中的 Statistics 来推断“在线时间”和 ServerTime：

```
ClientDoneRequest:      09:45:01.433
Determine Gateway:      0ms
DNS Lookup:             0ms
TCP/IP Connect:         0ms
HTTPS Handshake:        0ms
ServerConnected:        09:45:01.316
FiddlerBeginRequest:    09:45:01.435
ServerGotRequest:       09:45:01.435
ServerBeginResponse:    09:45:04.444
GotResponseHeaders:     09:45:04.444
ServerDoneResponse:     09:45:04.457
ClientBeginResponse:    09:45:04.444
ClientDoneResponse:     09:45:04.457
Overall Elapsed:        0:00:03.024 
```

**在线时间：** (ServerGotRequest-ClientDoneRequest)+(ServerDoneResponse-ServerBeginResponse) **服务器时间：** ServerBeginResponse-ServerGotResponse 通过上述计算，在线时间 + 服务器时间 = 总经过时间。也许是因为客户端在不到一毫秒的时间内呈现。我不知道。

我们也可以从相同的信息中推断出**页面渲染时间吗？**

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:08:09.073

据我所知，因为 Fiddler 只充当代理。它知道何时将数据交给浏览器，但浏览器不会通过“完成渲染”来 ping 代理。

您可以在浏览器的控制台中看到此信息。只需按 F12。

# backbone.js - 页面刷新触发骨干路由器

> ID：16163981
> 
> 赞同：1
> 
> 时间：2013-04-23T07:58:20.183
> 
> 标签：backbone.js, page-refresh, backbone-routing

我有一个关于骨干路由器的问题，请帮助：

我有一个路由器：

```
define(['views/index', 'views/login'], function(indexView, loginView) {

    var SelinkRouter = Backbone.Router.extend({

        currentView: null,

        routes: {
            'home': 'home',
            'login': 'login'
        },

        changeView: function(view) {
            if(null != this.currentView)
                this.currentView.undelegateEvents();
            this.currentView = view;
            this.currentView.render();
        },

        home: function() {
            this.changeView(indexView);
        },

        login: function() {
            this.changeView(loginView);
        }
    });

    return new SelinkRouter();
}); 
```

当用户第一次到达我的站点时，“登录”路由被触发，并将他们带到登录页面，登录后，用户通过：window.location.hash =“home”导航到“home”路由。现在用户看到主页的网址看起来像：mysite.com/#home，这很好。

问题是，此时如果我按 F5 键或以其他方式刷新页面，尽管再次触发了“主页”路由（这很好），同时重新加载了整个页面并且我的所有 js 都重新加载了. 所以应用程序重新启动，它带我回到登录页面（太糟糕了）。

有没有人有同样的问题？我应该停止页面刷新吗？如何？

非常感谢您的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:56:01.147

在我看来，最好的选择是为您的登录设置一个单独的页面。虽然这听起来像是一个逃避的答案，但我认为登录页面应该是进入您的应用程序的网关，而不是应用程序本身的一部分。

# google-api - 尝试 Google Drive SDK API 的 JAVA 示例时出现问题

> ID：16163982
> 
> 赞同：1
> 
> 时间：2013-04-23T07:58:22.177
> 
> 标签：google-api, google-drive-api, google-api-java-client, google-api-client

在将其部署到 GAE 之前，我正在我的本地主机上尝试 Google Drive SDK API（**[https://developers.google.com/drive/examples/java](https://developers.google.com/drive/examples/java)）的 JAVA 示例。**但是，我收到以下错误。

> java.lang.RuntimeException：未找到刷新令牌。重新授权。

1- 我应该如何配置客户端 API 访问？2-我的秘密文件应该是什么样子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:11:46.720

问题不在于您如何配置应用程序的凭据。

该示例要么没有收到刷新令牌，要么没有永久保留它。一旦您被重定向到由以下 url 构建器构建的 URL，您也应该收到一个 refresh_token。此令牌应永久保留以供客户端库用于刷新访问令牌。

```
GoogleAuthorizationCodeRequestUrl urlBuilder =
  new GoogleAuthorizationCodeRequestUrl(
      secrets.getWeb().getClientId(),
      secrets.getWeb().getRedirectUris().get(0),
      scopes)
      .setAccessType("offline")
      .setApprovalPrompt("force"); 
```

流程可能存在问题，我们正在对样本进行一些更改。我会尽力解决你的问题。

# python - 从列表中删除元素，然后为新列表选择两个随机元素

> ID：16163984
> 
> 赞同：-3
> 
> 时间：2013-04-23T07:58:29.327
> 
> 标签：python, list

我有一个列表`[(12,12),(1,23),(43,12)]` ，如何从该列表中删除这些元素：

`[(12,12),(1,23),(43,12),(2,1),(1,3),(43,1)]`

所以这个列表变成了

`[(2,1),(1,3),(43,1)]`

然后随机选择其中两个放入另一个列表

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T08:00:15.280

```
import random

a = [(12,12),(1,23),(43,12),(2,1),(1,3),(43,1)]
b = [(12,12),(1,23),(43,12)]

c = random.sample(set(a) - set(b), 2) 
```

# xml - R XML 中的根路径

> ID：16163986
> 
> 赞同：0
> 
> 时间：2013-04-23T07:58:30.143
> 
> 标签：xml, r, xpath

例如，当您指定 XML 节点路径时：`//tr[@class='party-rep']`

做

```
getNodeSet(rootsChild, //tr[@class='party-rep']) 
```

此函数是否仍然从树的根部搜索以查找类为“party-rep”的 tr div，或者由于我们将rootsChild 指定为文档，它将从rootChild 及其所有子项开始搜索并忽略实际的根？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T08:17:48.603

这将为`<tr class='party-rep'>`您提供 xml 文档中的所有内容：

```
getNodeSet(rootsChild, "//tr[@class='party-rep']") 
```

如果你想要所有`<tr class='party-rep'>`元素的子`rootsChild`元素，你必须在你的 xpath 表达式前面添加一个点：

```
getNodeSet(rootsChild, ".//tr[@class='party-rep']") 
```

这是一个例子：

```
R> xml <- "<root><a><td>foo</td></a><b><td>bar</td></b></root>"
R> doc <- xmlParse(xml)
R> doc
# <?xml version="1.0"?>
# <root>
#   <a>
#     <td>foo</td>
#   </a>
#   <b>
#     <td>bar</td>
#   </b>
# </root>

R> a <- getNodeSet(doc, '//a')[[1]]
R> getNodeSet(a, '//td')
# [[1]]
# <td>foo</td> 
# 
# [[2]]
# <td>bar</td> 
# 
# attr(,"class")
# [1] "XMLNodeSet"

R> getNodeSet(a, './/td')
# [[1]]
# <td>foo</td> 
# 
# attr(,"class")
# [1] "XMLNodeSet" 
```

# asp.net - 角度页面转换

> ID：16163987
> 
> 赞同：1
> 
> 时间：2013-04-23T07:58:30.863
> 
> 标签：asp.net, asp.net-mvc, mobile, angularjs, css-transitions

我正在构建一个带有角度的移动应用程序，并且我试图在视图之间切换时实现页面转换。

我知道他们发布了 1.1.4 的动画，但是这在视图之间也有效吗？但是，我没有使用角度路由，我认为这会使事情变得更加棘手。我在 ASP.NET MVC 中构建东西并用 Razor 打印出我们需要的东西。

```
<!doctype html>
  <html>
       <head>
             //Normal head-stuff
       </head>

        <body>
           <div class="main">
               @RenderBody       <----The angular app goes here
           </div>
        </body>

   </html> 
```

我尝试实现 fasw 转换： http: [//www.fasw.ws/faswwp/non-jquery-page-transitions-lightweight/](http://www.fasw.ws/faswwp/non-jquery-page-transitions-lightweight/)

但后来我最终滑动了整个页面而没有渲染新的角度视图，即全白。

有没有办法拥有一个正常的链接并在角度视图之间进行页面转换，我该如何实现它？

我在想我可以在加载后在整个视图上使用 ng-animate，这行得通吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:40:22.000

在 20:10 左右的这段[视频](http://www.youtube.com/watch?v=cF_JsA9KsDM)中，Miŝko Hevery 说：

> ngAnimate 有 DOM 元素进入、移动或离开舞台的概念，还有元素被显示和隐藏，所以这是 ngAnimate 理解的词汇......

他还在受 ngAnimate 影响的事物中提到了 ngView。

*   [这里的例子](http://yearofmoo-articles.github.io/angularjs-animation-article/app/#/ng-repeat)。
*   [示例的源代码在这里](https://github.com/mhevery/AngularJS-Animation-Article)。

希望这有帮助。

# php - PHP函数将整数和字符串部分与给定的字符串变量分开

> ID：16163988
> 
> 赞同：3
> 
> 时间：2013-04-23T07:58:38.230
> 
> 标签：php, string

我有一个字符串变量`$nutritionalInfo`，它可以有 100gm、10mg、400cal、2.6Kcal、10percent 等值...我想解析这个字符串并将值和单位部分分成两个变量`$value`和`$unit`。有没有可用的php函数？或者我怎么能在php中做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T08:03:09.893

使用 preg_match_all，像这样

```
$str = "100gm";
preg_match_all('/^(\d+)(\w+)$/', $str, $matches);

var_dump($matches);

$int = $matches[1][0];
$letters = $matches[2][0]; 
```

对于浮点值，试试这个

```
$str = "100.2gm";
preg_match_all('/^(\d+|\d*\.\d+)(\w+)$/', $str, $matches);

var_dump($matches);

$int = $matches[1][0];
$letters = $matches[2][0]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T08:03:45.477

使用正则表达式。

```
$str = "12Kg";
preg_match_all('/^(\d+|\d*\.\d+)(\w+)$/', $str, $matches);
echo "Value is - ".$value = $matches[1][0];
echo "\nUnit is - ".$month = $matches[2][0]; 
```

[**演示**](http://codepad.viper-7.com/HjMH2t)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-10-01T19:49:20.333

我有一个类似的问题，但这里没有一个答案对我有用。其他答案的问题是他们都假设你总是有一个单位。但有时我会使用“100”而不是“100kg”这样的普通数字，而其他解决方案会导致值为“10”而单位为“0”。

这是我从这个[答案](https://stackoverflow.com/a/4311416/5557235)中得到的更好的解决方案。这会将数字与任何非数字字符分开。

```
$str = '70%';

$values = preg_split('/(?<=[0-9])(?=[^0-9]+)/i', $str);

echo 'Value: ' . $values[0]; // Value: 70
echo '<br/>';
echo 'Units: ' . $values[1]; // Units: % 
```

# c# - Asp.net 中的日期时间选择器

> ID：16163992
> 
> 赞同：1
> 
> 时间：2013-04-23T07:58:45.923
> 
> 标签：c#, javascript, jquery, asp.net

我想显示日期和时间选择器。我用谷歌搜索了很多次，但没有得到任何东西。我从“keduoi.com”下载文件并在 mu 项目中使用，但它不能正常工作，只显示文本字段。我正在尝试从此[链接](http://demos.kendoui.com/web/datetimepicker/index.html)。

这是代码：

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeBehind="LaterTime_Pick_up.aspx.cs" Inherits="LocationBasedTaxiServices.LaterTime_Pick_up" %>

    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

    <html xmlns="http://www.w3.org/1999/xhtml">

    <head>
        <title></title>
        <link href="styles/kendo.common.min.css" rel="stylesheet" />
        <link href="styles/kendo.default.min.css" rel="stylesheet" />
        <script type="" src="js/jquery.min.js"></script>

    </head>
    <body>

            <div id="example" class="k-content">
                <div id="to-do">
                        <input id="datetimepicker" style="width:200px;" />
                </div>
            <script type="">
                $(document).ready(function () {
                    // create DateTimePicker from input HTML element
                    $("#datetimepicker").kendoDateTimePicker({
                        value: new Date()
                    });
                });
            </script>
            <style scoped> 
                #to-do {
                    height: 52px;
                    width: 221px;
                    margin: 30px auto;
                    padding: 91px 0 0 188px;
                    background: url('../../content/web/datepicker/todo.png') transparent no-repeat 0 0;
                }
            </style>
            </div>

    </body>
    </html> 
```

它只显示文本字段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T08:21:34.457

我不确定，除非你能准确说出你得到了什么错误。但是，如果您还没有添加 js 文件，那么请先执行此操作。

有不同的计划可以获得剑道 ui。**[参考这个](http://www.kendoui.com/download.aspx)**

kendo 有关于在 asp.net 应用程序中使用 datepicker 的文档。

**[链接在这里](http://docs.kendoui.com/getting-started/using-kendo-with/aspnet-mvc/helpers/datetimepicker/overview)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T09:10:06.407

您必须包含用于 kendoui 的 Javascript。

```
<script src='xxxx/kendo-uixxx.js'></script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T08:07:55.980

您的代码中缺少 kendo.all.min.js。

您也可以使用 jQuery.UI，初学者有时更容易开始使用 jQuery 构建客户端界面。

*   jQuery 用户界面：http: [//jqueryui.com/](http://jqueryui.com/)
*   jQuery UI 日期选择器：http: [//jqueryui.com/datepicker/](http://jqueryui.com/datepicker/)

# symfony - 查询属于某个组的用户列表

> ID：16163995
> 
> 赞同：0
> 
> 时间：2013-04-23T07:58:51.107
> 
> 标签：symfony, doctrine

我可以通过这个 sql 选择具有 'sex = 2' 的用户

```
createQueryBuilder('s')
->where('s.sex = 2'); 
```

如何选择属于 A 组的用户？

我的表格如下。

我的用户表。

```
ID | name |sex
1  | bob  |1
2  | kayo |2
3  | ken  |1 
```

我的 fos_group 表

```
ID | name
1  | student
2  | teacher 
```

我的 fos_user_user_group

```
user_id | group_id
1       | 1
2       | 2
3       | 1 
```

代表着

Bob 和 Ken 属于 group_1（学生）

Kayo属于group_2（老师）

我想从属于“学生”或“老师”的用户表中选择列表

* * *

我想要的是属于学生的用户名列表。

身份证 | 姓名 | 性 1 | 鲍勃 |1 3 | 肯|1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T08:03:07.753

您需要先进行联接，然后对关联属性进行过滤。

```
$entityRepository
  ->createQueryBuilder('s')
  ->join('s.groups', 'g') // Assuming the association on your user entity is 'groups'
  ->where('g.name = :group')->setParameter('group', 'student'); 
```

有关过滤与 DQL 的关联的示例，请参阅[http://docs.doctrine-project.org/en/2.0.x/reference/dql-doctrine-query-language.html#joins 。](http://docs.doctrine-project.org/en/2.0.x/reference/dql-doctrine-query-language.html#joins)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T08:03:16.760

```
SELECT
    g.name AS GroupName,
    GROUP_CONCAT(u.name) AS Users
FROM fos_group AS g
INNER JOIN fos_user_user_group AS ug ON ug.group_id = g.ID
INNER JOIN user AS u ON u.id = ug.user_id
GROUP BY g.name 
```

输出 ：

```
GroupName   |   Users
---------------------------
student     |   bob ,   ken
teacher     |   kayo 
```