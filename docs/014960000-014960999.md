# StackOverflow 问答 14960000-14960999

# hibernate - 在两个应用程序中访问相同的 hibernate.cfg.xml

> ID：14960001
> 
> 赞同：2
> 
> 时间：2013-02-19T14:34:12.893
> 
> 标签：hibernate, maven, ear

我有 maven 和 hibernate 的 web 应用程序。

我有 2 场战争和一个 jar，其中包含常见的数据库代码，包括获取 sessionfactory。

我使用ear，其中以上3个都是webmodules。在运行时，两个战争都访问了 jar。我能够在包含 hibernate.cfg.xml 的一场战争中访问此数据库代码。在其他战争中访问数据库代码的可行解决方案是什么？我是否应该将 hibernate.cfg.xml 也保留在 jar 中，以便两个项目都可以访问它或任何其他方式来执行此操作？

耳朵结构有点像在这个 [耳内交流战和罐子下的正确答案](https://stackoverflow.com/questions/14909213/communicate-between-wars-and-jar-inside-ear)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:56:18.003

`hibernate.cfg.xml`既不应该在 jar 文件中，也不应该在 ear 文件中，而应该在“普通”文件系统中。此配置文件包含对特定数据库的访问权限（例如用户、密码、名称 ant 端口）。这些数据不应包含在交付中。它们可能由管理员更改（例如新密码）。

# php - 将数组中的复选框值插入数据库

> ID：14960003
> 
> 赞同：-1
> 
> 时间：2013-02-19T14:34:16.607
> 
> 标签：php, mysql, checkbox

我有 3 个复选框：

```
<input class="shoesChoice" name="trendy" type="checkbox" />
<input class="shoesChoice" name="luxury" type="checkbox" />
<input class="shoesChoice" name="sports" type="checkbox" /> 
```

我想将此信息存储到（如果可能的话）我数据库中的一个字段中。所以，如果第一个和最后一个输入被选中，我的 shoesChoice 字段应该有：“trendy,sports”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:43:57.810

尝试更改名称并保持其价值

```
<input class="shoesChoice" name="shoes[]" value="trendy" type="checkbox" />
<input class="shoesChoice" name="shoes[]" value="luxury" type="checkbox" />
<input class="shoesChoice" name="shoes[]" value="sports" type="checkbox" /> 
```

在 PHP 中，尝试以这种方式获取值：

```
<?php
 if(isset($_REQUEST['shoes']))
 {
   $shoes = '';
   foreach
 }

?> 
```

# eclipse - Maven - 如何在父项目的 pom 中添加一个模块作为依赖项

> ID：14960005
> 
> 赞同：1
> 
> 时间：2013-02-19T14:34:24.667
> 
> 标签：eclipse, maven, m2e

我有[这个](https://stackoverflow.com/questions/808516/maven-and-dependent-modules)问题中提到的情况。

我有一个多模块 Maven 项目，它有一个父项目 P 和两个子模块 A 和 B。当我只有 A 作为子模块时，它工作得很好。我在主项目中添加了一个新的源文件夹，创建了一个包并添加了一个类（我在这里做错了吗？），我们称之为模块 B。现在我将包 B 中的类导入包 A 中的一个类中，但是A 的 pom 没有更新以包含 B 作为依赖项，因此当我尝试 mvn 编译父项目时，它会给出错误未定义符号 B。

1.  我是否错误地添加了项目 B？因为它里面没有任何pom？
2.  如引用问题中所述，如何在主项目的 pom 文件中添加 B 作为依赖项？

编辑：添加 poms 和代码

这是项目A的pom

```
<dependencies>
    <dependency>
      <groupId>javax.slee</groupId>
      <artifactId>jain-slee</artifactId>
    </dependency>
    <dependency>
      <groupId>org.mobicents.servers.jainslee.core</groupId>
      <artifactId>fault-tolerant-ra-api</artifactId>
      <version>2.6.0.FINAL</version>
    </dependency>
    <dependency>
      <groupId>org.mobicents</groupId>
      <artifactId>hello-slee-world-sbb</artifactId>
      <version>1.0</version>
    </dependency>
</dependencies> 
```

现在它提到了 B 的依赖关系。这是项目A中B的参考。

```
import BPackage.*; 
```

这就是我在 A 中使用 B 的方式。

BPackage 中只有一个类名为 BClass。现在我问我是否错误地添加了包，即我需要添加一些东西吗？以便创建它的 pom 并将其依赖项添加到 A.

此外，我想在编译父级时同时构建 B 和 A，所以在这种情况下，我想我也需要在父级 pom 中添加 A。这是父母的pom

```
 <modules>
    <module>sbb</module>
    <module>customRAType-ratype</module>
    <module>customAdaptor-ra</module>
    <module>du</module>
  </modules> 
```

customAdaptor-ra 是项目 A

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T15:33:45.067

您的每个项目都需要有一个 pom.xml。顶层项目需要有

```
<modules>
   <module>project1</module>
   <module>project2</module>
</modules> 
```

如果`project2`依赖，则需要在 project2 的 pom.xml 中对其`project1`定义一个。`<dependency/>`

# objective-c - xcode 3.4.3 中的助理编辑器有替代方案吗？

> ID：14960008
> 
> 赞同：0
> 
> 时间：2013-02-19T14:34:29.887
> 
> 标签：objective-c, xcode, hackintosh

首先，我在我的 hackintosh(10.6.5) 上安装了 xcode 3.4.3。当我开始使用 xcode 时，我按照“你的第一个 Mac 应用程序”教程中的苹果步骤进行操作。当我为控件创建操作时，它要求我使用助手编辑器在控件和逻辑代码之间创建连接，但是我找不到任何称为助手编辑器的东西，这是因为我使用的是 xcode 3.4.3 吗？

有人可以告诉我一些替代方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:41:57.007

//edit: 助理编辑器似乎只存在于 xcode 4 及更高版本，因此您使用的教程比您当前的 xcode 版本更新。感谢@popeye 的提示。

另一种方法是自己添加连接。您必须在接口文件（h 文件）中添加出口，在实现文件（m 文件）中添加实现。

有一个很好的教程视频来自如何实现这一点： [Xcode 3 Recipes - Connecting an Outlet](http://disanji.net/iOS_Doc/#recipes/XcodeRecipes/Connecting_an_Outlet/OutletConnection.html)

**旧帖子：** 提到的“助理编辑器”只是将您的插座与您的代码连接起来的一种巧妙方式。它将 GUI 与代码连接起来。例如，如果您的屏幕上有一个按钮，并且您想在其上注册一个触摸事件，那么您可以简单地使用辅助编辑器来执行此操作。

它位于 xcode 的右上角。看截图： ![在此处输入图像描述](../Images/88207bbf06ff9e3090c909056e758d72.png)

它向您显示了一个拆分视图，一侧是代码，另一侧是故事板。如果您打开了该视图，您可以简单地按住控制键并将连接从 gui 元素拖到代码中。

来自苹果网站：Assistant ()：呈现一个单独的编辑器窗格，其内容在逻辑上与标准编辑器窗格中的内容相关。使用助手窗格中的拆分控件拆分窗格。使用 View > Assistant Layout 设置您的首选助手窗格和拆分配置。 [Apple iOS 开发人员库 - xCode 基础知识](http://developer.apple.com/library/ios/#recipes/xcode_help-general/AbouttheEditorArea/AbouttheEditorArea.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T14:49:22.243

我想你可能不走运。我不记得在 XCode 3 中有一个助理编辑器，反正不像 XCode 4 中的版本。Apple 倾向于保持其文档与最新版本相关。@palme 提供的链接仅与 XCode 4 相关。

您可能已经习惯打开多个窗口来比较头文件和实现文件。在 XCode 3 中，您有时不得不习惯多个窗口，甚至是单独的应用程序（即 Interface Builder 与 XCode 3 完全分开应用程序）。

# python - 没有调用 Scrapy parse_item 回调

> ID：14960010
> 
> 赞同：3
> 
> 时间：2013-02-19T14:34:35.577
> 
> 标签：python, scrapy, web-crawler

我在让我的 Scrapy 蜘蛛运行它的回调方法时遇到问题。

我不认为这是一个缩进错误，这似乎是以前其他帖子的情况，但也许是这样，我不知道吗？有任何想法吗？

```
from scrapy.contrib.spiders import CrawlSpider, Rule
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor
from scrapy.selector import HtmlXPathSelector
from scrapy import log
import tldextract

class CrawlerSpider(CrawlSpider):
  name = "crawler"

  def __init__(self, initial_url):
    log.msg('initing...', level=log.WARNING)
    CrawlSpider.__init__(self)

    if not initial_url.startswith('http'):
      initial_url = 'http://' + initial_url

    ext = tldextract.extract(initial_url)
    initial_domain = ext.domain + '.' + ext.tld
    initial_subdomain = ext.subdomain + '.' + ext.domain + '.' + ext.tld
    self.allowed_domains = [initial_domain, 'www.' + initial_domain, initial_subdomain]
    self.start_urls = [initial_url]
    self.rules = [
        Rule(SgmlLinkExtractor(), callback='parse_item'),
        Rule(SgmlLinkExtractor(allow_domains=self.allowed_domains), follow=True),
    ]
    self._compile_rules()

  def parse_item(self, response):
    log.msg('parse_item...', level=log.WARNING)
    hxs = HtmlXPathSelector(response)
    links = hxs.select("//a/@href").extract()
    for link in links:
      log.msg('link', level=log.WARNING) 
```

示例输出如下；它应该显示一条带有“parse_item ...”的警告消息，但它没有。

```
$ scrapy crawl crawler -a initial_url=http://www.szuhanchang.com/test.html
2013-02-19 18:03:24+0000 [scrapy] INFO: Scrapy 0.16.4 started (bot: crawler)
2013-02-19 18:03:24+0000 [scrapy] DEBUG: Enabled extensions: LogStats, TelnetConsole, CloseSpider, WebService, CoreStats, SpiderState
2013-02-19 18:03:24+0000 [scrapy] DEBUG: Enabled downloader middlewares: HttpAuthMiddleware, DownloadTimeoutMiddleware, UserAgentMiddleware, RetryMiddleware, DefaultHeadersMiddleware, RedirectMiddleware, CookiesMiddleware, HttpCompressionMiddleware, ChunkedTransferMiddleware, DownloaderStats
2013-02-19 18:03:24+0000 [scrapy] DEBUG: Enabled spider middlewares: HttpErrorMiddleware, OffsiteMiddleware, RefererMiddleware, UrlLengthMiddleware, DepthMiddleware
2013-02-19 18:03:24+0000 [scrapy] DEBUG: Enabled item pipelines: 
2013-02-19 18:03:24+0000 [scrapy] WARNING: initing...
2013-02-19 18:03:24+0000 [crawler] INFO: Spider opened
2013-02-19 18:03:24+0000 [crawler] INFO: Crawled 0 pages (at 0 pages/min), scraped 0 items (at 0 items/min)
2013-02-19 18:03:24+0000 [scrapy] DEBUG: Telnet console listening on 0.0.0.0:6023
2013-02-19 18:03:24+0000 [scrapy] DEBUG: Web service listening on 0.0.0.0:6080
2013-02-19 18:03:25+0000 [crawler] DEBUG: Crawled (200) <GET http://www.szuhanchang.com/test.html> (referer: None)
2013-02-19 18:03:25+0000 [crawler] DEBUG: Filtered offsite request to 'www.20130219-0606.com': <GET http://www.20130219-0606.com/>
2013-02-19 18:03:25+0000 [crawler] INFO: Closing spider (finished)
2013-02-19 18:03:25+0000 [crawler] INFO: Dumping Scrapy stats:
        {'downloader/request_bytes': 234,
         'downloader/request_count': 1,
         'downloader/request_method_count/GET': 1,
         'downloader/response_bytes': 363,
         'downloader/response_count': 1,
         'downloader/response_status_count/200': 1,
         'finish_reason': 'finished',
         'finish_time': datetime.datetime(2013, 2, 19, 18, 3, 25, 84855),
         'log_count/DEBUG': 8,
         'log_count/INFO': 4,
         'log_count/WARNING': 1,
         'request_depth_max': 1,
         'response_received_count': 1,
         'scheduler/dequeued': 1,
         'scheduler/dequeued/memory': 1,
         'scheduler/enqueued': 1,
         'scheduler/enqueued/memory': 1,
         'start_time': datetime.datetime(2013, 2, 19, 18, 3, 24, 805064)}
2013-02-19 18:03:25+0000 [crawler] INFO: Spider closed (finished) 
```

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T20:02:27.843

[http://www.szuhanchang.com/test.html](http://www.szuhanchang.com/test.html)的只有一个锚链接，即`start_urls`：

```
<a href="http://www.20130219-0606.com">Test</a> 
```

其中包含指向域的链接，`20130219-0606.com`并根据您`allowed_domains`的：

```
['szuhanchang.com', 'www.szuhanchang.com', 'www.szuhanchang.com'] 
```

此请求被过滤`OffsiteMiddleware`：

```
2013-02-19 18:03:25+0000 [crawler] DEBUG: Filtered offsite request to 'www.20130219-0606.com': <GET http://www.20130219-0606.com/> 
```

因此`parse_item`不会为此 url 调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T18:54:01.483

将回调的名称更改为`parse_start_url`似乎可行，尽管由于提供的测试 URL 很小，我不能确定这是否仍然有效。试一试，让我知道。:)

# html - 从PHP中的URL获取多个具有相同名称的参数

> ID：14960011
> 
> 赞同：0
> 
> 时间：2013-02-19T14:34:38.637
> 
> 标签：html, get

这是我将 ID 发送到 url 的代码的一部分，我需要获取该 ID。但问题是我得到了这样的东西

> delete.x=5&delete.y=8&delete=删除&ID=124&ID=125&ID=126&ID=127&ID=128&ID=129&ID=130&ID=131&ID=132&ID=133&ID=134&ID=135&ID=136

它从表中发送我所有的 ID。但我只需要发送一个 ID，这取决于我单击哪个按钮（删除或发布）

```
<tr>
        <td>125</td>
        <td>Blacksfeets Photos</td>
        <td>di_do@yahoo.com</td>
        <td>2929610140-09 M plava.pdf</td>
        <td>24</td>
        <td>570099</td>
        <td>0</td>

        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td>
        <input name="delete" type="image" src="images/delete.png" value="Delete"><br>
        <input name="publish" type="image" src="images/publish.gif" value="Publish">
        <input type="hidden" value="125" name="ID">
        </td>

     </tr>          
        <tr>
        <td>126</td>
        <td>TimeSince</td>
        <td>sanlic@windowslive.com</td>
        <td>25189210140-09 M plava.pdf</td>
        <td>24</td>
        <td>614227</td>
        <td>0</td>

        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td>
        <input name="delete" type="image" src="images/delete.png" value="Delete"><br>
        <input name="publish" type="image" src="images/publish.gif" value="Publish">
        <input type="hidden" value="126" name="ID">
        </td>

     </tr>          
        <tr>
        <td>127</td>
        <td>TimeSince</td>
        <td>saic@windowslive.com</td>
        <td>21813910140-09 M plava.pdf</td>
        <td>24</td>
        <td>966462</td>
        <td>0</td>

        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td>
        <input name="delete" type="image" src="images/delete.png" value="Delete"><br>
        <input name="publish" type="image" src="images/publish.gif" value="Publish">
        <input type="hidden" value="127" name="ID">
        </td>

     </tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:44:00.230

您的所有按钮似乎都有一种形式。每个 ID 使用一个表格，例如

```
<form method="get" action="whatever">
    <input name="delete" type="image" src="images/delete.png" value="Delete"><br>
    <input name="publish" type="image" src="images/publish.gif" value="Publish">
    <input type="hidden" value="127" name="ID">
</form> 
```

# debugging - 使用 DataExtender 扩展收藏夹以及如何调试它？

> ID：14960012
> 
> 赞同：3
> 
> 时间：2013-02-19T14:34:41.550
> 
> 标签：debugging, tridion, rename, favorites

我之前问过一个关于重命名收藏夹的问题，在这里：[Tridion 收藏夹 - 重命名收藏夹链接的能力](https://stackoverflow.com/questions/14037820/tridion-favorites-ability-to-rename-favorite-links)

现在基于这个问题的一些研究[可以使用数据扩展器扩展收藏夹列表吗？](https://stackoverflow.com/questions/10486726/can-the-list-of-favorites-be-extended-using-a-data-extender)

我正在使用 dataextender 扩展收藏夹。所以这个想法是每当检索到收藏列表时，我都会用重命名的收藏值替换它（重命名的值存储为单独的 appdata）。但由于某种原因，我的 dataextender 似乎没有工作/包含在 tridion 中。

我的第一个问题是：我可以通过查找命令 GetList 来收听收藏夹阅读器吗？

第二个问题：同样在配置中，我只是在 ext:DataExtender 元素中提及它还是需要提及其他元素，例如 ext:list

最后一个问题：有没有一种方法可以从 Visual Studio 调试我的 dataextender，就像我们可以通过附加到 dllhst3g.exe 来调试事件系统一样...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T15:52:27.337

要扩展收藏夹列表，您应该听 GetListUserFavorites 命令。

不，只是 ext:dataextender

是的，正如 Nuno 所提到的，要调试 DataExtenders，您应该附加到 w3wp.exe 进程。

# vb.net - 如何在表单中实现 Try/Catch 块

> ID：14960019
> 
> 赞同：0
> 
> 时间：2013-02-19T14:34:57.827
> 
> 标签：vb.net

我创建了一个包含三个输入文本框的学生课程注册表格：

*   名和姓
*   电话号码
*   地址

然后我有另一个文本框，用于显示学生信息。我将此仅显示的文本框称为“课程”文本框。

我想在这个表单上使用结构化异常处理（`Try`/ `Catch`block）。我怎么能在这种表格上做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T15:08:17.827

## 使用 Try/Catch 处理异常

VB.Net 中的异常处理非常简单。以下代码是 try/catch 块的结构。

```
 Try
       'This is the code you wish to try that  might give an error.
    Catch ex As Exception
       'This is where you end up if an error occurs.
    End Try 
```

假设您的表单上有一个按钮，并且您想确保在按下按钮后，您拥有的所有指令都将得到正确处理。下面的代码说明了。首先放下一个按钮并将其命名为ValidationButton。如果你双击你的新按钮，在后面的代码中你会看到一个处理点击事件的新函数。如下所示，将 try catch 块添加到其中。

```
Private Sub ValidationButton_Click(sender As System.Object, e As System.EventArgs) Handles ValidationButton.Click
    Try

    Catch ex As Exception

    End Try
End Sub 
```

现在页面有一个按钮，其中的代码位于 try/catch 块中。我们只需将我们想要的代码放入其中。让我们放一些会抛出错误的东西，然后我们将显示该错误。

## 示例代码

```
Private Sub ValidationButton_Click(sender As System.Object, e As System.EventArgs) Handles ValidationButton.Click
    Try
        Dim x As Integer = 1
        Dim y As Integer = 0
        Dim z As Integer = x / y
    Catch ex As Exception
        MsgBox(ex.Message)
    End Try
End Sub 
```

弹出一个消息框，告诉我们遇到错误，“算术运算导致溢出”。这当然是因为我们不能除以零。如果你没有把它放在 try catch 中，程序就会崩溃。

所以，有了这些信息，把你的 try/catch 放在你可能出错的地方。如果您知道您的错误可能是什么，您甚至可以在其中编写代码来执行其他操作。在我们的示例中，我们可能想告诉用户不要除以零。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T15:36:53.797

除了捕获特定代码行中的错误之外，您还可以捕获未处理的错误。最简单的方法是通过[主程序启动应用程序](http://msdn.microsoft.com/en-us/library/ms235406.aspx)

```
Module Program

    Public Shared Sub Main()
        AddHandler Application.ThreadException, AddressOf UIThreadException

        ' Force all Windows Forms errors to go through our handler.
        Application.SetUnhandledExceptionMode(UnhandledExceptionMode.CatchException)

        ' Start the main Form
        Application.Run(New frmMain())
    End Sub

    Private Shared Sub UIThreadException(ByVal sender As Object, _
                                         ByVal t As ThreadExceptionEventArgs)
        ' Handle the error here
    End Sub

End Module 
```

您可以在 MSDN 上阅读有关此主题的更多信息：[Application.ThreadException 事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.threadexception.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-2)

# php - MySQL 选择具有相同值的行并输出到 HTML css/table

> ID：14960020
> 
> 赞同：0
> 
> 时间：2013-02-19T14:35:01.763
> 
> 标签：php, html, mysql

我非常感谢您在这方面的帮助：

```
Item_ID Buy_User    Buy_Date    Buy_Qty 
00001       Adam        01/02/2013  1
00003       John        01/01/2013  2
00004       Peter       02/01/2013  1
00001       Nial        01/01/2013  1 
```

上面是我的桌子的一个例子。我需要的是 sql 查询 Item_ID 列，并且每个 Item_ID 只显示一次 - 但显示每个购买该产品的用户。

我需要以 HTML/css 输出查询。

例如，我的 html 页面可能如下所示：

> 第 1 项：亚当买了 1 个。尼尔买了 1 个。
> 
> *项目 2：（将被隐藏，因为没有购买）。*
> 
> 第 3 项：约翰买了 2 个。
> 
> 第 4 项：彼得买了 1 个。

我不太确定如何实现这一点，我一直在谷歌搜索并发现多次提到子选择，但我不确定如何让它显示每一行？

帮助？！

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:39:23.803

这是你要找的吗？它用于`GROUP_CONCAT`对行进行分组并`CONCAT`构建字符串：

```
SELECT Item_Id, GROUP_CONCAT(CONCAT(Buy_User,' bought ',Buy_Qty) SEPARATOR ', ') ITEMS
FROM Items
GROUP BY Item_Id 
```

这是[SQL 小提琴](http://sqlfiddle.com/#!2/d7e7e/6)。

结果如下：

```
ITEM_ID   ITEMS
00001     Adam bought 1, Nial bought 1
00003     John bought 2
00004     Peter bought 1 
```

# ssl - 使用 Glassfish 2.1.1、Liferay 5.2 和 SSL 运行的门户收到太多阻塞线程

> ID：14960021
> 
> 赞同：2
> 
> 时间：2013-02-19T14:35:05.763
> 
> 标签：ssl, glassfish, liferay, blocked-threads

我有一个在 Glassfish 上运行 SSL 并使用 Liferay 的门户。上次我们发送了一封电子邮件，让大约 200 人同时访问已发布的信息，我们的 Glassfish“停滞不前”。

从服务器我们可以看到系统资源没问题。- Glassfish 最多可使用 8 GB，但使用的是 5 GB - 服务器有 4 个 CPU，总体使用率约为 30% - Glassfish 配置了多达 400 个 HTTP 线程。

一旦我们检测到我们的服务器没有回答用户，我们就启动了一个分析器以了解发生了什么。

线程概述显示了太多被阻塞的线程： ![HTTPS 线程阻塞其他 HTTPPS 线程](../Images/9dc3f561b7191f842fc96066bc2a8009.png)
![在此处输入图像描述](../Images/523e3e2584385cc4b7fe3c3e584f68f5.png)

从堆栈中看不到除了 sun、grizzly、catalina 类之外的代码： ![在此处输入图像描述](../Images/9dc386ecb12e99df8421658580902a24.png)

我想解决这样的问题，但现在我可以判断我是否应该处理我们的代码，我们应该替换一些组件，比如禁用 SSL。

任何想法将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T21:57:13.577

线程转储可能比分析器更容易且侵入性更小 - 这可能会向您显示线程在实际运行的系统中被阻塞的位置。

您必须弄清楚阻塞发生在哪里：是在 Liferay 的代码中还是在您自己的代码中？你在页面上有什么，主题是如何完成的？另外，请注意，您正在运行一个非常旧版本的 Liferay - 如果您正在运行 CE，这已经停止维护好几年了（仍然支持企业版，但由于您没有提到这一点，赔率您正在运行社区版 (CE))

此外，如果您导致您所描述的情况（同时发送大量人员），您可能希望使用人工负载对系统进行负载测试，以查看其行为方式。此外，您可能希望对登录页面进行缓冲（这并不是说 200 个用户很多，但对于任何此类活动，您可能想知道您的系统可以处理它）

除非您证明相反，否则我会假设页面上有一些自定义组件（portlet 或主题）会导致瓶颈和您发现的阻塞。

# mysql - if 在 mysql 插入语句中

> ID：14960022
> 
> 赞同：0
> 
> 时间：2013-02-19T14:35:12.643
> 
> 标签：mysql, sql, syntax-error

我想做这样的事情：

```
 IF ((19, 13) NOT IN (select idUtente, IdLezione from partecipa)) THEN
 insert into partecipa 
 (IdUtente, IdLezione, 
 IdAbbonamento, 
 utente,
  prova, riserva) 
 values( 
 19, 13, 
 (select idAbbonamento from abbonamento where attivo=1 and idUtente=19), 
 (select concat(u.nome," ",u.cognome) from abbonamento as a, utente as u where      a.attivo=1 and a.idUtente=u.idUtente and u.idUtente=19),
  0, 0)
 end if; 
```

但语法有错误

```
Error Code: 1064\. You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'IF ((19, 13) NOT IN (select idUtente, IdLezione from partecipa)) THEN insert int' at line 1    0.000 sec 
```

在互联网上我找不到任何解决方案。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T14:42:30.370

尝试这个：

```
INSERT INTO partecipa (IdUtente, 
                       IdLezione, 
                       IdAbbonamento, 
                       utente,  
                       prova, 
                       riserva)
SELECT 
  19, 
  13, 
  ab.idAbbonamento,  
  concat(u.nome, ' ', u.cognome), 
  0, 
  0
FROM abbonamento       AS ab 
INNER JOIN abbonamento AS a  ON ab.attivo   = a.attivo 
                            AND ab.idUtente = a.idUtente
INNER JOIN utente      AS u  ON a.idUtente  = u.idUtente 
WHERE a.attivo   = 1
  AND u.idUtente = 19
  AND NOT EXISTS(SELECT 1 
                 FROM partecipa 
                 WHERE idUtente  = 19 
                   AND IdLezione = 13); 
```

# import - SASS sprite url 工作但图像未显示

> ID：14960026
> 
> 赞同：0
> 
> 时间：2013-02-19T14:35:19.227
> 
> 标签：import, sprite, compass-sass, sass

我是 Compass 的新手，我对精灵生成器非常感兴趣。我看到它工作正常。我遵循了一个教程，但我的精灵遇到了一些问题。我将文件插入到名为`spr`. 我已经在文件 screen.scss 中插入了以下代码：

```
@import "spr/*.png"; 
```

并为我的标题插入以下内容：

```
h1{
        @include spr-sprite(Flickr);
        height: 91px;
    } 
```

我检查了检查员，网址正确，背景位置也正确。问题是，一旦检查了检查器元素，它就无法打开图像 url。生成的图片在查找器中确实有效，但文件不存在。名字和位置都很完美。

任何人都可以让我知道他们是否有同样的问题，尤其是如何解决它？

**编辑：生成的 CSS**

```
.spr-sprite, header h1 {
    background: url('/images/spr-sbd3b4dd92d.png') no-repeat;
}
header h1 {
    background-position: 0 -120px; height: 91px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T04:44:23.643

不熟悉Scout，但是...

现在 Sass 正在使用*根相对*路径（前导斜杠）。为了解决这些问题：

*   您必须使用某种本地服务器并通过 http 加载页面（`http://...`在浏览器的 url 栏中）

*   该站点必须位于 Web 文件夹的根目录（而不是子文件夹）

例如：

```
├── css
│   └── site.css
├── images
│   └── spr-sbd3b4dd92d.png
├── index.html
└── sub-folder
    └── index.html 
```

如果您希望将站点根目录放在子文件夹中，或者能够使用该`file://`协议在浏览器中加载页面，则应在 config.rb 中启用相对路径：

```
relative_assets = true 
```

如果您的 Scout 中已经没有注释（*即：*没有前导`#`），`config.rb`那么 Scout 一定不会关注配置文件。

看起来这可能是[Scout 中的错误](https://github.com/mhs/scout-app/issues/46)。

# ios - XCode 4.6 中的圆形按钮

> ID：14960031
> 
> 赞同：2
> 
> 时间：2013-02-19T14:35:32.407
> 
> 标签：ios, xcode, button, uibutton, storyboard

我一直在谷歌和其他地方寻找这个问题的答案，但到目前为止还没有找到有用的答案。

我正在使用情节提要在 Xcode 4.6 上制作应用程序。

当拖放一个圆角矩形按钮时，它很好，但是当我改变背景时，它变成没有圆角边缘的矩形。我只是想改变按钮的颜色，而不是更多，但保持它与原始按钮一样圆润。有人可以告诉我一个简单的方法来实现这一点，或者在我使用故事板时给我一个详细的说明，而且我对 XCode 编程很差，所以编程越少越好。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:39:27.867

您可能应该查看[iOS 的 UIAppearance 协议文档](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIAppearance_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UIAppearance)。

同时，您可以使用...

```
 [[UIButton appearance] setTintColor:[UIColor redColor]]; 
```

当然，与你的颜色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T15:50:51.500

更新：

我使用了另一种方法，因为我不理解给我的建议，因为我对 XCode 编程并不了解并且不想采用编码路线。

这可能对其他人有用，但我所做的是我在 Photoshop 中将背景填充为黑色，在整个背景上使用圆角矩形工具，然后用按钮颜色填充圆角矩形。这有点给出了一个圆形的形状，但仍然不如 XCode 中提供的原始圆形按钮。

如果有人有任何其他解决方案，我可以自由尝试，并评论和更新我将要做的事情。

我将通过查看哪个最简单的方法来选择最佳答案，尽管我没有使用过那种方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T15:09:06.737

我建议你使用 GradientButtons

[http://code.google.com/p/iphonegradientbuttons/downloads/list](http://code.google.com/p/iphonegradientbuttons/downloads/list)

1) 在故事板文件中定义常规按钮。

2) 将他们的类更改为 GradientButton。

3）如果你想要不同的颜色，在相应的视图中初始化它们。

# c# - 如何以编程方式从 Web 浏览器控件中删除 HTML 元素？

> ID：14960033
> 
> 赞同：8
> 
> 时间：2013-02-19T14:35:41.787
> 
> 标签：c#, webbrowser-control

我使用 Web 浏览器控件，并且文档加载了 HTML 页面。我想以编程方式从文档中删除一个元素。

谁能指导我如何通过 ID 或名称属性删除任何元素？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-10-27T09:18:37.897

```
webbrowser.Document.GetElementById("element").OuterHtml = ""; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-19T20:13:33.967

您可以使用`Microsoft.mshtml`库来完成此操作。我使用`dynamic`数据类型的力量完成了它：

```
private void Form1_Load(object sender, EventArgs e)
{
    webBrowser1.Navigate("https://www.google.com/");
}

private void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
    if (e.Url.ToString() == "https://www.google.com/")
    {
        dynamic htmldoc = webBrowser1.Document.DomDocument as dynamic;
        dynamic node = htmldoc.getElementById("lga") as dynamic;
        node.parentNode.removeChild(node);
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-12-20T06:11:37.523

它是 VB.Net 版本。我尝试删除`MsHTML`. 但是引用该库有其自身的问题。以下不是直接答案，但可以解决使用`iframes`.

```
 For Each FrameElement As HtmlElement In WebBrowser1.Document.GetElementsByTagName("iframe")
 Debug.Print(FrameElement.OuterHtml)
 FrameElement.OuterHtml = Nothing
 Next 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-23T22:15:52.740

OuterHtml 不能修改！

此代码从网页中删除 Css 链接：

```
 Sub RemoveStylesheet()
        Dim styles As HTMLStyleSheetsCollection = WB.Document.DomDocument.styleSheets
1:
        If styles.length > 0 Then
            For Each stl As Object In WB.Document.DomDocument.styleSheets
                '     stl.removeImport(0)
                If stl Is Nothing Then Continue For
                Dim st As IHTMLElement = stl.owningElement
                '  st.href = ""
                '   MsgBox(st.tagName)
                st.parentElement.removeChild(st)
            Next
            GoTo 1
        End If

    End Sub
```

# sql - 更新 SSMS/T-SQL 中的多个列：

> ID：14960035
> 
> 赞同：0
> 
> 时间：2013-02-19T14:35:50.177
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-update

我有以下情况。

```
 UPDATE ATable
SET C1 = 'XValue'
WHERE C2 = 'YValue'

UPDATE ATable
SET C3 = 'MValue'
WHERE C4 = 'NValue' 
```

对于性能调整，我可以做些什么让它们在一个 UPDATE 下运行吗？会更好吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T14:37:36.127

您可以使用运行一个更新`CASE`

```
UPDATE  Atable
SET     C1 = CASE WHEN c2 = 'yValue' THEN 'xValue' ELSE c1 END,
        C3 = CASE WHEN c4 = 'nvalue' THEN 'mValue' ELSE c3 END
WHERE   c2 = 'yValue' OR c4 = 'nvalue' 
```

# google-analytics - 单个域的两个帐户之间的唯一身份访问者和综合浏览量差异

> ID：14960037
> 
> 赞同：-1
> 
> 时间：2013-02-19T14:35:56.260
> 
> 标签：google-analytics

我们为一个域创建了两个帐户。这两个帐户都驻留在单独的代码中。标准仪表板中这两个帐户之间的唯一身份访问者和综合浏览量（附加）存在巨大差异。知道我们在哪里做错了吗？仅供参考：我们只为一个帐户设置了事件跟踪，在该帐户中我们看到了更多的唯一访问者和综合浏览量。事件跟踪是否会膨胀 UV 和 PV？由于这是标准报告而不是自定义报告，我想它一定与页面标记有关。感谢任何帮助。！[UV 和 PV 的变化](http://i.stack.imgur.com/IaMrV.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:42:55.180

**谷歌分析不是 100% 准确**的。我知道，这很令人惊讶。

这是一个参考：http: [//www.clickz.com/clickz/column/2188027/little-google-analytics-matter](http://www.clickz.com/clickz/column/2188027/little-google-analytics-matter)

基本上，通过忽略一些数据并“采样”其余数据，Analytics 更像是一个出口民意调查，而不是完全可追溯的选票。

为了得到这样的差异，如果我们假设 GA 中没有随机元素在起作用，那么两个账户收集的数据肯定会有细微的差异。至少，一个人必须在另一个人之前被解雇。如果少数用户在页面加载期间关闭了他们的浏览器，则会产生差异，然后会随着采样而增加。

事件跟踪确实也有可能影响所持有的数据。这是推测，但跟踪事件不太可能被忽略是有道理的。因此，您可以通过添加正确的事件来按摩“原始”分析，并利用 Google Analytics 并非 100% 准确的事实。但是，按摩两个帐户以获得相同的数字几乎是不可能的。

# c# - cookie.Expire 在 chrome 中不起作用

> ID：14960041
> 
> 赞同：4
> 
> 时间：2013-02-19T14:36:09.380
> 
> 标签：c#, cookies, setcookie

嗨，我在 chrome 中遇到了非常奇怪的问题。我有以下 Cookie 代码。

```
 HttpCookie cookie = new HttpCookie("cookie");
 cookie.Value = "true";
 cookie.Expires.AddDays(30);
 Response.Cookies.Add(cookie); 
```

现在上面的代码不能在 chrome 中运行，而它在 FF 和 IE 中运行良好。如果我在 chrome 中检查这个 cookie，那么它就在那里，但是 cookie 过期日期就像**浏览会话**在 chrome 中结束时一样。

这意味着如果我关闭浏览器，那么 cookie 将在 30 天后过期而不是过期。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T14:46:31.693

您必须使用 DateTime.Now/DateTime.UtcNow：

```
HttpCookie cookie = new HttpCookie("cookie");
cookie.Value = "true";
cookie.Expires = DateTime.UtcNow.AddDays(30);
Response.Cookies.Add(cookie); 
```

# android - Android Activity 处理（恢复/重启）

> ID：14960043
> 
> 赞同：1
> 
> 时间：2013-02-19T14:36:11.627
> 
> 标签：android, navigation, android-activity, xamarin.android

我希望您能帮助我了解 Android 生命周期以及如何管理多种活动之间的导航。假设以下场景：

*   Activity A“MainMenu”启动：用户点击菜单项
*   Activity B 启动，UI 加载了本地数据库中的内容
*   用户与活动 B 交互
*   用户按下后退按钮并返回到活动 A
*   用户再次按下相同的菜单项以返回到活动 B
*   目前：活动从头开始加载
*   愿望： Activity B 的前一个实例及其所有 UI 条目和用户交互应该恢复

我想将所有活动保存在静态管理器中。如果一个活动已启动，管理器会查看它之前是否已经启动过。如果是这样，则恢复上一个活动，否则 startActivity(ActivityA)。这是处理这些导航的好方法吗？如何通过代码直接恢复活动实例？还是有另一种更好的方法来做到这一点？

提前致谢！问候，法科

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:45:53.333

一旦离开堆栈，您将无法“缓存”活动。活动很快就开始了，我猜是你的**数据库**东西让你慢了下来。你*可以*做点什么。

理论上，如果您知道用户要从 A -> B 多次单击条目，您可能只想将 DB 内容加载到 Activity A 的内存中，然后[通过 Parcel 将其发送到 B。](http://developer.android.com/reference/android/os/Parcelable.html) 然后当您回到A，它还在记忆中，它会立即回到B。

如果您不确定这是否属实，请尝试调试它并逐步执行。您将看到活动启动得相当快，但您需要确定哪些操作滞后。根据您上面的描述，它可能是您的数据库调用，但也可能是其他东西，例如网络调用或其他长期存在的调用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:52:25.023

您无法恢复已发布的场景中的活动实例。因为由于 android 生命周期，当您按下活动 B 上的后退按钮时，该活动将被销毁，包括其所有状态和信息。

使信息持久化的一种选择是扩展 Application 类并将信息保存到应用程序类中的一些变量中。尽管如果系统需要内存，即使在那时你所做的很多事情都可以被垃圾收集。即使使用 Jameo 的解决方案，我不相信有任何好的方法可以让这些信息在活动中持续存在，如果活动 A 被终止，那么如果你从活动 B 返回到活动 A，那么该活动将重新加载，并且数据库访问必须再次发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T14:39:31.947

android Activity 的生命周期使得它不可能启动一个新的 Intent 而是保持旧的状态。

您应该通过保存字段来保存活动的状态，并在需要时将其恢复到此状态。

# jquery-mobile - jquery mobile - 强制面板在更宽的屏幕上打开

> ID：14960044
> 
> 赞同：3
> 
> 时间：2013-02-19T14:36:12.350
> 
> 标签：jquery-mobile

我一直在尝试在多个设备上测试我的 jquery 移动应用程序。我目前有一个通过滑动或单击“菜单”按钮打开的面板。

但是，在宽屏幕上，该应用程序看起来很时髦。太宽了。我知道这适用于移动设备，但是，为什么不将其格式化为 ipads/surface/androids 呢？

为此，我想通过在宽度超过特定值时要求面板始终打开来缩短宽度。

我翻阅了文档，发现最接近的是：

`class="ui-responsive-panel"`从以下链接：http: [//view.jquerymobile.com/master/docs/widgets/panels/panel-fixed.php](http://view.jquerymobile.com/master/docs/widgets/panels/panel-fixed.php)

将它添加到我的页眉后，我注意到当窗口很宽时我无法“滑动”菜单。当我缩小窗口时（无论是在 PC 浏览器上，还是通过旋转设备），它都可以滑动。

有没有人熟悉这个，并愿意阐明一些？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T11:39:15.647

我面临同样的问题。当用户以横向模式（平板电脑）转动设备时，或者如果窗口一开始就比特定宽度宽，我希望面板保持打开状态。

不幸的是，在这种情况下，我没有找到任何解决方案和响应式面板的 jQuery Mobilele 示例。

所以我找到了一种使用一些javascript的方法，但我对这个解决方案不满意，因为带有媒体查询的纯CSS解决方案会更好。

但是，这是我的“解决方法”解决方案。

```
<script type="text/javascript">

    window.onresize = function (event) {
        if (window.innerWidth > 800) {
            window.setTimeout(openPanel, 1);
        }
        if (window.innerWidth < 800) {
            window.setTimeout(closePanel, 1);
        }
    };

    function closePanel() {
        $("#mypanel").panel("close");
    }
    function openPanel() {
        $("#mypanel").panel("open");
    }

    $( "#mypanel" ).on( "panelcreate", function( event, ui ) {
        if (window.innerWidth > 800) {
            openPanel();
        }
        if (window.innerWidth < 800) {
            closePanel();
        }

    });
</script> 
```

所以如果窗口内宽大于800，面板打开；如果低于 800 则关闭。此外`window.onresize`，如果用户将设备从纵向模式切换到横向模式，该功能还需要提供相同的功能。

希望它有所帮助。但我仍在寻找更好的解决方案；）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T12:55:13.267

我为这个问题找到了一个更简单的 css-only 解决方案。在响应式面板的媒体查询中`@media (min-width:55em){...}`添加/覆盖以下 css 类：

```
.ui-panel-closed {  width: 17em; }

.ui-panel-content-wrap.ui-body-c.ui-panel-animate.ui-panel-content-wrap-closed{     margin-left:17em; } 
```

根据您使用的样本，第二类可能与您的不同；在这种情况下，它是“C”。但是，只需使用包装所有页眉、内容、页脚区域的内容包装类。

在我的示例中，我使用了一个面板，`data-display="reveal" data-position="left"`如果您希望它出现在右侧，只需更改`margin-left:17em`为`margin-right:17em`

如果您希望面板表现得像“覆盖”，请忘记我发布的第二堂课......最好的问候

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-30T22:40:30.107

我现在正面临这个问题，我发现 mJay 的解决方案非常有用。但是，最好使用媒体查询来代替，可能是这样的：

```
 @media (min-width:35em){
    .ui-panel{
        width:30em;
    }
    .ui-panel-close { width:30em; }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-08-06T13:00:42.843

下面是我的“CSS”解决方案。您需要知道的：`mnuMenu`是我希望始终在屏幕左侧可见的面板的`lnkMenu`ID，并且是通常在较小屏幕宽度上显示面板的按钮的 a 标签的 ID。

```
 @media all and (min-width: 900px)
    {
        #mnuMenu
        {
            visibility: visible;
            position: fixed;
            left: 0;
            float: left;
            width: 300px;
            height: 100vh;
            background: none;
            -webkit-transition: none !important;
            -moz-transition: none !important;
            transition: none !important;
            -webkit-transform: none !important;
            -moz-transform: none !important;
            transform: none !important;
            -webkit-box-shadow: none;
            -moz-box-shadow: none;
            box-shadow: none;           
        }

        #lnkMenu
        {
            display: none;
        }

        .ui-content
        {
            margin-left: 325px;
        }
    } 
```

# c++ - 如何完成这个调用函数的for循环

> ID：14960046
> 
> 赞同：-2
> 
> 时间：2013-02-19T14:36:12.137
> 
> 标签：c++, function, for-loop, n-queens

我在尝试使某个 for 循环继续完成 1D Queens 问题时遇到了麻烦。

首先，我对所有内容都使用了 goto 语句。现在我试图通过使用函数来摆脱 goto 语句。我最终会摆脱所有这些，但我首先关注的是 NR（新行）和回溯，因为它们是用来互相调用的。

我遇到问题的 for 循环是检查一个位置是否对皇后安全的循环。我在评论中指出了未完成的 for 循环。

```
//forward declarations
int backtrack (int board[], int& c_position);

//NR: q[c]++;
//if (q[c]==8) goto backtrack;

void NR (int board[], int& c_position) //new row
{
    board[c_position]++;
    if (board[c_position]==8) {backtrack(board, c_position);}
}

int backtrack (int board[], int& c_position)  // backtrack
{
    c_position--;
    if (c_position==-1) {system("PAUSE"); exit(1);}
    NR(board, c_position);
}

int main ()
{

int q[8] = {0};  //1D array, the board, all set to 0;
int c=0;
int count=0;

NC: c++; //new column
    if (c==8) goto print;
    q[c]=-1;

NR(q, c);

    //test to see if position is safe
    for (int i=0; i<c; i++) //this is the for loop I am having trouble with
    {
    if ( (q[i]==q[c]) || ((c-i)==abs(q[c]-q[i])) ) { NR(q, c); }
    }

    goto NC;

print: //printing the 1D board gives us a single line, where each number represents a row where a queen is
        count++;
        cout << count << endl;
      for(int j = 0; j <= 7; j++)
      {
         cout << q[j] << " ";
      }
       cout << endl;
        backtrack(q, c);

        system("PAUSE"); return 0;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:39:56.083

您`c`通过引用传递一个函数，该函数将它传递给另一个递减它的函数。

这似乎挫败了您的（`goto`基于外部的）循环增加它的尝试。

无论如何，这就是我要更仔细地研究的。

# jsf - Jsf在按下回车时从输入文本调用bean方法

> ID：14960047
> 
> 赞同：23
> 
> 时间：2013-02-19T14:36:12.307
> 
> 标签：jsf, primefaces

*JSF 2.0、Mojarra 2.0.1、PrimeFaces 3.4.1*

这是一个`p:inputText`组件，当按下回车键时，它会调用一个支持 bean 方法。

```
<p:inputText id="commentInput" rendered="#{status.haveComment}" 
    value="#{statusBean.newComment}"
    onkeypress="if (event.keyCode == 13) { onchange(); return false; }">
    <f:ajax event="change" listener="#{statusBean.test}" />
</p:inputText> 
```

而 backing bean 有以下方法：

```
public void test(AjaxBehaviorEvent event) {
   System.out.println("Pressed enter!");
} 
```

它是按下回车键时调用的方法，但它不止于此；**意外行为案例：**

```
--Click input text
----Type some letters
------Click somewhere else in the page
--------CONSOLE: Pressed enter! 
```

我认为`ajax event=change`以某种方式检测到更改并调用该方法。如何将此`p:inputText`组件转换为像 Facebook 或其他人一样的适当的评论接受者组件？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-19T14:57:44.940

这就是`onchange`事件在 HTML 中的工作方式。当输入元素中的文本发生更改时会发生这种情况，但会在组件失去焦点时触发（在您的情况下，这是您单击页面中其他位置的那一刻）。

您可以定义`p:remoteCommand`方法`test`并编写：

```
<p:remoteCommand name="test" actionListener="#{statusBean.test}"/>
<p:inputText id="commentInput" rendered="#{status.haveComment}" 
  value="#{statusBean.newComment}"
  onkeypress="if (event.keyCode == 13) { test(); return false; }"/> 
```

在支持 bean 中：

```
public void test() {
 System.out.println("Pressed enter!");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-10-14T12:39:49.077

对于较新的 PrimeFaces 版本（至少 5+），您可以使用 p:defaultCommand 而不是脚本。虽然你不能使用 p:remoteCommand ，因为 p:defaultCommand 需要一些可点击的东西。

```
<p:inputText id="input" />
<p:defaultCommand target="submit" />
<!--you can show the button to allow the user to click too, or hide it with display: none-->
<p:commandButton id="submit" style="display: none;" process="input" /> 
```

默认情况下 p:defaultCommand 适用于整个表单。您可以使用`scope`属性对其进行限制。

# c# - 圆上的点按角度不均匀分布

> ID：14960048
> 
> 赞同：3
> 
> 时间：2013-02-19T14:36:13.047
> 
> 标签：c#, xna, geometry, angle

鉴于：

x = originX + 半径 * Cos(角度);

y = originY + 半径 * Sin(角度);

为什么点不能均匀分布在圆的边缘？

结果图片：

![在此处输入图像描述](../Images/b6d03068beec25416c5cd4dc02865ed3.png)

```
class Circle
{
    public Vector2 Origin { get; set; }
    public float Radius { get; set; }
    public List<Vector2> Points { get; set; }

    private Texture2D _texture;

    public Circle(float radius, Vector2 origin, ContentManager content)
    {
        Radius = radius;
        Origin = origin;
        _texture = content.Load<Texture2D>("pixel");
        Points = new List<Vector2>();

        //i = angle
        for (int i = 0; i < 360; i++)
        {
            float x = origin.X + radius * (float)Math.Cos(i);
            float y = origin.Y + radius * (float)Math.Sin(i);
            Points.Add(new Vector2(x, y));
        }
    }

    public void Draw(SpriteBatch spriteBatch)
    {
        for (int i = 0; i < Points.Count; i++)
            spriteBatch.Draw(_texture, Points[i], new Rectangle(0, 0, _texture.Width, _texture.Height), Color.Red);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T14:41:29.173

Math.Cos 和 Math.Sin 采用弧度而不是度数的角度，您的代码应该是：

```
float x = origin.X + radius * (float)Math.Cos(i*Math.PI/180.0);
float y = origin.Y + radius * (float)Math.Sin(i*Math.PI/180.0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T14:49:50.877

要点：

1) Math.Trig 函数使用弧度，而不是度数。

2）对于这种精度，你最好使用`double`而不是`float`.

3) 计算机图形/游戏专业人士避免使用像 Sin 和 Cos 这样的昂贵函数，而是使用增量~~整数~~像素导向方法，[如 Bresenham 算法](http://www.gamedev.net/page/resources/_/technical/graphics-programming-and-theory/bresenhams-line-and-circle-algorithms-r767)，其结果与直接的三角数学计算一样好或更好，*而且*速度更快。

# javascript - 向 svg g 元素添加填充

> ID：14960049
> 
> 赞同：9
> 
> 时间：2013-02-19T14:36:19.507
> 
> 标签：javascript, html, css, d3.js, svg

我的 d3.js 代码生成以下 HTML（取自检查元素）

[![](../Images/dd5839d031bc9af84bb319d6853e5d9c.png)](https://i.stack.imgur.com/raqMZ.png)

路径在底部呈现一个带有文本的圆圈。

[![](../Images/ba51bfafc168f56387ca6fbb0a5551c1.png)](https://i.stack.imgur.com/oHIM6.png)

最终，我希望文本位于 SVG 元素范围内的圆圈下方。如果 SVG 元素较大，则 G 元素呈现较大。我需要控制 G 元素的大小或路径元素的大小。

如何向 G 元素添加宽度和高度约束或填充？它不响应`width`, `height`, `x`,`y`风格

粗略的谷歌搜索不是很有帮助

感谢您的任何见解。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T15:39:08.290

该`<g>`元素根本没有真正呈现，它是您需要调整的元素`<path>`。`<text>`

# java - Spring Batch：在有效标题后写入行

> ID：14960059
> 
> 赞同：1
> 
> 时间：2013-02-19T14:37:00.457
> 
> 标签：java, parsing, spring-batch

我正在解析非常大的 txt 文件，`PatternMatchingCompositeLineMapper`因为每一行都有不同的列数。
在这个文件中，我有来自多个时期的数据，这个文件中的每个时期都由带有该时期日期的标题*DATA表示。*在此标题之后，有与此期间相关的数据行，它们以标题*STOP*结尾。
问题是我需要将在特定日期之前和之后结束的所有期间的数据保存到另一个文件中。
有没有办法在 Spring Batch 中做到这一点？
示例文件如下所示：

```
DATA|20121113-20121212
STRT|33|20121213|123425654|123
ASD|asd|asd|asd
QWE|qwe|qwe
ZXC|zxc|zxc|zxc|zxc
STOP

DATA|20121213-20130112
STRT|33|20130113|65465463546|123
ASD|asd|asd|asd
QWE|qwe|qwe
ZXC|zxc|zxc|zxc|zxc
STOP

DATA|20121113-20121212
STRT|33|20121213|34653465546|123.10
ASD|asd|asd|asd
QWE|qwe|qwe
ZXC|zxc|zxc|zxc|zxc
STOP

DATA|20120713-20120812
STRT|33|20121213|34654356546|123.10
STOP

DATA|20121213-20130112
STRT|33|20130113|345646345|123.10
ASD|asd|asd|asd
QWE|qwe|qwe
ZXC|zxc|zxc|zxc|zxc
STOP 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:12:38.073

您可能可以通过[`ClassifierCompositeItemWriter`](http://static.springsource.org/spring-batch/apidocs/org/springframework/batch/item/support/ClassifierCompositeItemWriter.html). 我将假设您有一个域对象（例如，`MyDomainObject`），它具有相同输入中显示的开始日期和结束日期。

您首先需要创建一个声明`classify`方法的类并用[`@Classifier`](http://static.springsource.org/spring-batch/apidocs/org/springframework/batch/support/annotation/Classifier.html). 这将有效地将项目路由给下级项目作者之一（在您的情况下，基于记录的开始日期和结束日期是否跨越参考日期）。

```
import org.springframework.batch.support.annotation.Classifier;
public class MyDateClassifierDelegate {
    //set this via Spring, or whatever
    private final Date referenceDate;

    @Classifier
    public String classify(MyDomainObject classifiable) {
        if(classifiable.startDate.compareTo(referenceDate) < 0
                && classifiable.endDate.compareTo(referenceDate) >= 0) {
            return "FILE1";
        }
        else {
            return "FILE2";
        }
    }
} 
```

接下来，您需要`ClassifierCompositeItemWriter`根据分类器设置的值将 配置为委托给两个底层项目编写器之一。在这种情况下，您将根据需要进行设置`file1Writer`，`file2Writer`我收集的只是平面文件项目编写器。

```
<beans:bean id="dateRangeBasedFileWriter" class="org.springframework.batch.item.support.ClassifierCompositeItemWriter">
    <beans:property name="classifier">
        <beans:bean class="org.springframework.batch.classify.BackToBackPatternClassifier">
            <beans:property name="routerDelegate">
                <!-- this is where you specify the classifier that is to be used -->
                <beans:bean class="MyDateClassifierDelegate" />
            </beans:property>
            <beans:property name="matcherMap">
                <beans:map>
                    <!-- this will contain your "spanning reference date" items -->
                    <beans:entry key="FILE1" value-ref="file1Writer" />
                    <!-- this will contain your "not spanning reference date" items -->
                    <beans:entry key="FILE2" value-ref="file2Writer" />
                </beans:map>
            </beans:property>
        </beans:bean>
    </beans:property>
</beans:bean> 
```

# php - 在具有扩展模型的非对象上调用成员函数 find()

> ID：14960062
> 
> 赞同：0
> 
> 时间：2013-02-19T14:37:23.623
> 
> 标签：php, cakephp

我有一个“管理员”模型，它扩展了另一个模型“用户”，它扩展了“AppModel”。

我有一个控制器“ApisController”，我试图在其中查询 admins 表中的数据。

所以我正在做这样的事情：

```
$admins = $this->Admin->find('all'); 
```

但是当我这样做时，我收到以下错误消息：

```
Error: Call to a member function find() on a non-object 
File: /home/farhan/www/core/app/Controller/ApisController.php   
Line: 9 
```

如果我尝试在控制器“AdminsController”中做同样的事情，一切正常。所以我不确定我做错了什么。我是蛋糕新手，所以我知道这是否是一个简单的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:41:42.190

如果您有 ApisController 并且想要使用“Admin”模型（这显然不是“Apis”的单数形式 - 它可能是 Api），您需要手动声明您使用的模型：

```
public $uses = array('Admin'); 
```

然后控制器将“Admin”模型用作主要模型。

[书](http://book.cakephp.org/2.0/en/controllers.html#Controller%3a%3a%24uses)

默认是 cake 尝试根据变形找到正确的：

```
PostsController => Post model
(plural => singular) 
```

# python - Python for 循环按类别分隔

> ID：14960069
> 
> 赞同：1
> 
> 时间：2013-02-19T14:37:47.090
> 
> 标签：python, for-loop

我刚刚开始接触 Python 的 Houdini 建模软件。

我想做的是创建一个包含“点坐标”和“建筑级别值”的列表/字典。然后，我想对具有匹配级别属性的每组点坐标使用 for 循环。

我到目前为止是这样的：

```
for point in geo.points():
    for i in range(-1,levels):
        if i == -1:
            pos = point.position()
        else:       
            pos = point.position() + hou.Vector3((0, level_height,0)) 
        coord = []
        coord.append(pos)
        for position in coord:
            point = geo.createPoint()
            point.setPosition(position)
            point.setAttribValue(pointlevel, i+1)
            point.setAttribValue(building, cluster) 
```

我真正想做的是：

```
for each buildinglevel:   
    do for loop for all points with that buildinglevel 
```

我的知识有限，但我知道我想要实现什么，最简单的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:41:17.840

您正在寻找的功能被称为[`itertools.groupby()`](http://docs.python.org/2/library/itertools.html#itertools.groupby)。`groupby()`将通过您给它的键对可迭代对象进行分组，*前提是输入已经分类到此类组*中。

```
from itertools import groupby

for pointlevel, points in groupby(geo.points(), key=pointlevel_of_point):
    for point in points:
        # do something with all points for this pointlevel. 
```

where`pointlevel_of_point`是一个函数，它返回由 . 返回的任何点的级别`geo.points()`。

所做的是为您提供函数`groupby()`的当前返回值`key`，以及保证返回`key`函数返回值不变的所有元素的新迭代。

# c# - Datagridview [不是有效的排序字符串条目]？

> ID：14960072
> 
> 赞同：0
> 
> 时间：2013-02-19T14:37:52.140
> 
> 标签：c#, .net, datagridview

我有一个包含 datagridview 的表单，我将此 dataGridView 绑定到 DB，我正在使用函数 Bind(string sqlQuery) 并且当我调用此行时，datagridView 充满了数据：

```
Bind("SELECT title,description,(CASE WHEN DATEDIFF(deadline,CURDATE()) > 0 THEN CONCAT('Dans ',DATEDIFF(deadline,CURDATE()), ' Jours') WHEN DATEDIFF(deadline,CURDATE()) = 0 THEN CONCAT('Demain') ELSE CONCAT('Expiré depuis ', DATEDIFF(deadline,CURDATE()) * -1, ' Jours') END),progress FROM taches WHERE 1"); 
```

数据已正确填写在 dataGridView 中：

**问题**：当我单击每个 columnHeader 时，数据被排序（按升序或降序），除非我单击列标题`deadline`时，应用程序停止工作并且我得到一个异常，如下所示：

`[(CASE WHEN DATEDIFF(deadline isn't a valid Sort string entry`

当我单击它时如何使列可排序，或者至少如何避免引发此异常！

“截止日期”列中可以包含的不同值如下：

`Dans X Jours`
`Expiré depuis X Jours`
`Demain`

哪里`Dans X Jours`> `Demain`>`Expiré depuis X Jours`

X 是代表天数的数字！

如何使该列可排序而不会出现异常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T14:42:01.840

尝试使用以下内容（为了方便复制/粘贴，我没有进行格式化）：

```
Bind("SELECT title,description,(CASE WHEN DATEDIFF(deadline,CURDATE()) > 0 THEN CONCAT('Dans ',DATEDIFF(deadline,CURDATE()), ' Jours') WHEN DATEDIFF(deadline,CURDATE()) = 0 THEN CONCAT('Demain') ELSE CONCAT('Expiré depuis ', DATEDIFF(deadline,CURDATE()) * -1, ' Jours') END) as deadline,progress FROM taches WHERE 1"); 
```

在 SQL 查询中，您必须为列指定列名`deadline`（下面是格式化查询）：

```
SELECT 
  title,
  description,
  (CASE 
      WHEN DATEDIFF(deadline,CURDATE()) > 0 
         THEN CONCAT('Dans ',DATEDIFF(deadline,CURDATE()), ' Jours') 
      WHEN DATEDIFF(deadline,CURDATE()) = 0 
         THEN CONCAT('Demain') 
       ELSE CONCAT('Expiré depuis ', DATEDIFF(deadline,CURDATE()) * -1, ' Jours') 
    END) as deadline,
  progress 
FROM 
  taches 
WHERE 1 
```

# c - 我可以从 SD 存储器而不是评估板上的闪存运行程序（嵌入式编程）吗？

> ID：14960075
> 
> 赞同：0
> 
> 时间：2013-02-19T14:38:00.717
> 
> 标签：c, embedded, embedded-linux, microcontroller, bootloader

我有一个支持 SD 卡连接器的评估板 ( [Olimex STM32-P103 )。](https://www.olimex.com/Products/ARM/ST/STM32-P103/)我想将我的程序放入 SD 存储器而不是微控制器的内部闪存；并从那里运行它。我不知道是否可以根据引导加载程序问题来做到这一点！

PS我的目标是在这块板上运行linux，然后将我的应用程序移植到它上面。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T15:55:31.860

一般来说，要从 SD 卡运行程序，您应该知道不能“立即”运行它们。这意味着，您必须将其加载到地址空间中某处的可执行内存中，这由（或多或少）简单的[bootloader](http://en.wikipedia.org/wiki/Bootloader#Boot_loader)完成。在最简单的情况下，引导加载程序能够从 SD 卡中读取特定的二进制文件并将其复制到内存中。

话虽如此，考虑到您的板上只有 20k 的 RAM 和 128k 的闪存，您应该考虑这一点。那么你的程序应该去哪里呢？或者更好：为什么不从一开始就用 128k 的 Flash 烧写程序？特别是你应该知道 Linux 在内存方面有点“饿”。

如果你的目标是在这个板上运行一个“普通”的 Linux，恐怕你就完蛋了。这是因为据我所知，Linux 需要一个[MMU](http://en.wikipedia.org/wiki/Memory_management_unit)才能运行，而这块板上的芯片不提供一个（就可研究而言，无需访问 ST 的数据表）。

如果幸运的话，您可以使用[uCLinux](http://www.uclinux.org/index.html)。我不确定 STM32 是否存在已完成的端口，但似乎有一些基于谷歌搜索“STM32 uCLinux”的资源。但是，即使您设法运行 uCLinux，恐怕您的系统中没有多少可用于您的应用程序，因此结果可能有点令人失望。

根据您寻找在此 MCU 上运行 Linux 的原因，可能还有其他解决方案，例如[FreeRTOS](http://www.freertos.org/portstm32iar.html)与 lwIP 堆栈（如果需要联网）或 FAT 库（如[FullFAT](http://code.google.com/p/fullfat/) ）（如果您正在寻找读取 SD 卡和东西。

**编辑：**我想补充的一件事是，从 SD 卡引导通常是您使用“更大”（不多但略微）系统所做的事情，您有足够的 RAM 来保存您想要运行的整个映像在其中，仍然为您要处理的数据留有一些空间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T21:21:00.893

SD卡上的数据不是内存映射的，所以不能直接执行。

可以将卡中的数据动态加载到 RAM 中执行。WindRiver 的 VxWorks RTOS 支持动态加载和链接对象模块，我知道没有其他操作系统可以扩展到直接支持它的 Cortex-M，但可以编写自己的。

但是，我建议对于您使用的微控制器，这个想法是不明智的；当代码在片上闪存中并且数据在 RAM 中时，Cortex-M 上的最佳性能可以实现，从而允许在单独的总线上同时获取数据和指令（哈佛架构）。如果您从 RAM 执行代码，性能将受到严重影响，因为必须在同一总线上按顺序获取数据和指令。

该板完全不适合运行 Linux，只有 128K 字节的程序闪存，而 20K 字节的 RAM 根本不可行。即使是最小的 Linux 发行版也需要 600Kb RAM 加上应用程序代码所需的任何东西。uClinux 几乎可以在具有外部 RAM 和 Flash 的高端 STM32 上运行，但这会受到相同的总线争用性能影响，而且没有 MMU 的 Linux 完全没有使用 Linux 的一个主要好处。您板上的部件缺少外部存储器接口，因此无法扩展以支持 Linux。

如果您需要操作系统，请考虑使用 RTOS，例如 uC/OS-II、FreeRTOS 或 emBOS。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-19T14:42:39.027

您将不得不在 STM 的板载闪存（通常称为“引导加载程序”）中有*一些*代码来实现这一点，因为“裸机”很可能无法从 SD 卡引导。

您将不得不构建该代码，该代码弄清楚如何使用 STM 的板载外围设备与 SD 卡通信，找到您想要在文件系统中运行的文件（您还必须实现），并加载它。

我想包含一个指向 STM 标准外围库的链接，但它似乎已关闭（正在移动）。：/

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-22T15:10:26.583

正如其他人所说，您不能直接从 SD 卡直接执行代码。但就像那些“linux board”一样，您可以将存储的内核/程序加载到可以映射并从那里执行的外部 SDRAM 中。您仍然需要编写该“引导加载程序”并将其存储在内部闪存中。

对于有限的应用程序，我认为这是很多工作。如果您想在 linux 环境中编写应用程序，然后将其移植到小目标，我宁愿使用依赖注入来设计我的应用程序，甚至使用模拟器。

# javascript - Tridion 2011 SP1：安装了翻译管理器和 Powertools 2011 的 Tridion GUI Javascript 错误

> ID：14960079
> 
> 赞同：5
> 
> 时间：2013-02-19T14:38:15.993
> 
> 标签：javascript, translation, tridion

我最近安装了启用了 SDL 模块翻译管理器的 Tridion 2011 SP1。

一切正常。然后我按照安装程序安装了 Tridion 2011 Powertools。

尝试重新加载 GUI 时（浏览器缓存已清空，并且为 WebRoot\Configuration\System.Config 中的服务器元素实例化了修改参数），我收到以下 Javascript 错误：

> SCRIPT5007：无法获取属性“getItemType”的值：对象为 null 或未定义
> Dashboard_v6.1.0.55920.18_.aspx?mode=js，第 528 行字符 851

这是相关的 JS 行：

> Tridion.TranslationManager.Commands.Save.prototype._isAvailable=function(c,a){var
> e=c.getItem(0),f=$models.getItem(e),b=f.getItemType(),d=$模型.getItem(this.getTmUri ())

前面的 Javascript 行是在处理其他的 TranslationManager 命令，所以我想它是一种 TranslationManager 命令注册或一些东西。

尝试通过选择任何文件夹/结构组来浏览我的 Tridion 出版物也会给出相同的错误，并且正确的框架（内容框架）不会显示任何 Tridion 项目，而只会显示：

> 正在加载...

有没有人已经遇到过类似的问题？

现在我别无选择，只能注释掉 Powertools 部分文件

> Tridion_Home\web\WebUI\WebRoot\Configuration\System.Config

谢谢你，弗朗索瓦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T18:27:22.917

这里奇怪的是它指的是不打算从仪表板调用或使用的保存命令。

我建议禁用 JS 缩小（System.config 中的 JScriptMinifier 过滤器），因为它可能会显示更正确的细节。

另一个有用的东西是这个错误调用堆栈。

--

我无法从最初的问题中重现问题，但在安装 PT 时出现以下错误：

> PowerTools 未定义

它出现在 *\PowerTools\Editor\PowerTools\Client\Shared\Scripts\ProgressDialog\ProgressDialog.js 中，它尝试注册*PowerToolsBase*命名空间，而不是*PowerTools*。

如果添加我会感到惊讶

> Type.registerNamespace("PowerTools");

在文件顶部将解决一个问题，就像我的情况一样，无论是否包含 TM，它都会破坏整个 GUI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T11:56:49.170

好的。现在很清楚了。

**PowerTools.Commands.ItemCommenting**用于仪表板工具栏中。此命令使用**Save**来检查其可用性。

同时，TM 认为“保存”只会在 ItemToolbar 上使用。

导致问题的此工具栏之间的区别在于仪表板视图可以具有任意长度的选择，而项目视图将始终具有具有一个项目（当前打开）的选择。

尚未进行打开空仪表板选择，ItemCommenting 尝试通过调用 Save 来检查其可用性，该调用调用其所有扩展。只要选择是空的

> var itemUri = selection.getItem(0);

将返回*null*，以及

> $models.getItem(null)

您可以做的是删除 ItemCommenting 扩展命令，因为它在 tridion powertool trunk editor.config 中完成。

[http://code.google.com/p/tridion-2011-power-tools/source/browse/trunk/PowerTools.Editor/Configuration/editor.config?spec=svn942&r=903](http://code.google.com/p/tridion-2011-power-tools/source/browse/trunk/PowerTools.Editor/Configuration/editor.config?spec=svn942&r=903) [592]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T10:43:55.913

我确实检查了 *\PowerTools\Editor\PowerTools\Client\Shared\Scripts\ProgressDialog\ProgressDialog.js，但是这条线

> Type.registerNamespace("PowerTools");

已经在那里，所以不是这里的问题。

另外，我禁用了 JS 缩小。以下是出现错误之前 UI 正在加载的主要方法：

```
...
PowerTools.Commands.ItemCommenting.prototype.isValidSelection = function (selection) {
//Use the existing Save command from the CME
return $cme.getCommand("Save")._isEnabled(selection);
}

...

/**
* Executes this command on the selection.
* Override this method to implement the actual functionality.
* @param {Tridion.Core.Selection} selection The current selection.
*/
Tridion.TranslationManager.Commands.SendForTranslation.prototype._execute = function SendForTranslation$_execute(selection)
{
    var selectedItems = selection.getItems();
    if (selectedItems.length == 1)
    {
        var job = $models.getItem(selectedItems[0]);

        if (job)
        {
            if (job.isLoaded())
            {
                job.saveAndSend();
            }
            else
            {
                $log.warn("Unable to send an unloaded job?! {0}".format(job.getId()));
            }
        }
        else
        {
            $log.warn("Unable to execute save-and-send-for-translation for this selection: {0}".format(selectedItems));
        }
    }
    else
    {
        $log.warn("Unable to save-and-send-for-translation multiple items at a time.");
    }
};

...

Tridion.TranslationManager.Commands.Save.prototype._isAvailable = function Save$_isAvailable(selection, pipeline)
{
    var itemUri = selection.getItem(0);
    var item = $models.getItem(itemUri);
    var itemType = item.getItemType();     !!!!!!!!! fails on this line !!!!!! item is null or not an object
    var config = $models.getItem(this.getTmUri());

    if (pipeline)
    {
        pipeline.stop = false;
    }

    if (config && config.hasChanged() && (itemType == $const.ItemType.CATEGORY || itemType == $const.ItemType.FOLDER || itemType == $const.ItemType.STRUCTURE_GROUP || itemType == $const.ItemType.PUBLICATION))
    {
        if (pipeline)
        {
            pipeline.stop = true;
        }

        return true;
    }

    return this.callBase("Tridion.Cme.Command", "_isAvailable", [selection, pipeline]);
}; 
```

# hex - 在 C# 脚本中将 Dec 转换为 Hex

> ID：14960080
> 
> 赞同：0
> 
> 时间：2013-02-19T14:38:17.133
> 
> 标签：hex, type-conversion, decimal

试图取一个十进制值并将其转换为十六进制。这是 SCADA 程序中的 C# 脚本。以下将十六进制转换为十二月就好了：

```
using System;
using MasterSCADA.Script.FB;
using MasterSCADA.Hlp;
using FB;
using System.Linq;

public partial class ФБ : ScriptBase
{
    public override void Execute()
    {
    string hexValue = InVal;
    int num = Int32.Parse(hexValue, System.Globalization.NumberStyles.HexNumber);
    OutVal = num;   
    }
} 
```

但是我遇到了相反的问题-当我尝试将 Dec 转换为 Hex 时。据我了解，以下应该可以工作，但它会给出错误：方法'ToString'没有重载在第12行采用'1'参数

```
11    int? decValue = InVal;
12        string hexValue = decValue.ToString("X");
13        //string hexValue = string.Format("{0:F0}", decValue);
14        uint num = uint.Parse(hexValue, System.Globalization.NumberStyles.HexNumber);
15        OutVal = num; 
```

我可以通过使用第 13 行而不是第 12 行来避免该错误，但在这种情况下，我将 Hex 转换为 Dec 而不是 Dec 转换为 Hex。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:43:40.187

您正在尝试调用`ToString(string)`一个`int?`值。`Nullable<T>`没有`ToString(string)`过载。你需要类似的东西：

```
string hexValue = decValue == null ? "" : decValue.Value.ToString("X"); 
```

（显然，根据您希望结果`decValue`为空的情况调整上述内容。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-12T20:01:52.350

这是我的功能：

```
using System;
using System.Collections.Generic;
class DecimalToHexadecimal
{

    static string DecToHex(decimal decim)
    {
        string result = String.Empty;

        decimal dec = decim;

        while (dec >= 1)
        {
            var remainer = dec % 16;
            dec /= 16;
            result = ((int)remainer).ToString("X") + result;
        }

        return result;
    }

    static void Main()
    {
        Console.WriteLine("Enter decimal");
        decimal dec = decimal.Parse(Console.ReadLine());
        Console.WriteLine("Hexadecimal representation to {0} is {1}", dec, DecToHex(dec));

        Console.ReadKey();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T14:43:18.620

试试`decValue.Value.ToString("X");` 你的类型是`int?`和不是`int`

# php - PHP 回显仅比当前小时高 1 或低 1

> ID：14960081
> 
> 赞同：-4
> 
> 时间：2013-02-19T14:38:20.160
> 
> 标签：php, mysql, sql, echo, hour

所以我遇到了这个问题，我只想回显比当前小时高 1 或低 1 的东西。如果当前小时 = 14 仅回显 13、14 和 15 的示例

任何人都知道我该如何做到这一点？

```
<?php 
mysql_connect("*******", "******", "**");
if(!mysql_select_db("deb67423_dj")) {
die("<b>Mislukt!</b><br>Het verbinden met de database is mislukt.");
}
$textweek = date("D");
if($textweek == "Mon") {
$dag = 0;
} else
if($textweek == "Tue") {
$dag = 1;
} else
if($textweek == "Wed") {
$dag = 2;
} else
if($textweek == "Thu") {
$dag = 3;
} else
if($textweek == "Fri") {
$dag = 4;
} else
if($textweek == "Sat") {
$dag = 5;
} else
if($textweek == "Sun") {
$dag = 6;
}
$textuur = date("G");

$SQL = "SELECT * FROM rooster WHERE dag = '$dag'";
$result = mysql_query($SQL);
echo "<table>";
while ($row = mysql_fetch_assoc($result)) {
    echo "<td> Hiervoor: DJ ".$row['gebruikersnaam']. "</td>";
}                   
echo "</table>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:42:48.533

```
$currHour = date('G');
echo $currHour - 1, ', ', $currHour, ', ', $currHour + 1; 
```

请注意，它`$currHour`可以为 0，您将不得不处理这种“特殊”情况......但我认为这个片段会让您入门。有关更多帮助，请参阅 PHP [date()](http://www.php.net/manual/en/function.date.php)文档。

# wordpress - 管理用户更新的插件

> ID：14960082
> 
> 赞同：0
> 
> 时间：2013-02-19T14:38:21.550
> 
> 标签：wordpress, plugins

我需要一个插件或任何代码，这些想法将使特定的 wordpress 用户拥有月度报告列表（付款交易、帐户状态）。

我知道这很令人困惑，但我的意思是： - 每两个月，管理员将更新用户储蓄/信用 - 用户可以查看他/她当前的储蓄/信用 - 用户还可以查看过去的报告更新

样本：

当前节省：#800

3 月 5 日 - 700 美元
2 月 2 日 - 400 美元
1 月 2 日 - 100 美元

当他们单击过去的记录之一时，他们将转到包含交易完整详细信息的页面。

注意：所有付款/交易均在线进行。这仅用于查看目的。除了他们的个人资料，用户不能编辑任何内容。

wordpress 可以做到这一点吗？或者我应该使用硬编码php？我更喜欢wordpress，因为它使用起来很方便

感谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:43:15.213

Sounds very much like a custom feature which will require you to build it unless you're payment gateway provides this type of functionality for you.

However, you say that the admin will update some values each month. If you're using custom fields, you can use the custom fields plugin to display the values.

# mysql - 我应该为我的大学使用社交网络应用程序的共享服务器吗？

> ID：14960083
> 
> 赞同：1
> 
> 时间：2013-02-19T14:38:22.250
> 
> 标签：mysql, database, performance

我正在为我的大学开发一个 Android 应用程序。总共不会超过 10000 个用户，我们可以假设在任何给定时间不会超过 500 个并发用户。

他们都将发布他们的状态、照片、发表评论（视频分享除外）。我只使用 MySQL 作为数据库（没有 memcache 或其他一些技术）和 PHP 作为 Web 服务。

我想问一下，共享服务器会为我服务吗？因为它将是一个免费的应用程序，专用服务器的成本太高。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:57:30.157

很难给出具体答案。

托管公司经常提供在一段时间内（例如 14 天）测试其托管的可能性。我认为您应该利用这段空闲时间并进行性能测试。然后你就会知道它是否足以满足你的需要。

# google-chrome - 使用 selenium webdriver chrome 处理“选择数字证书”

> ID：14960084
> 
> 赞同：12
> 
> 时间：2013-02-19T14:38:31.230
> 
> 标签：google-chrome, selenium, python-2.7, certificate, webdriver

当我用 selenium webdriver 打开一个页面时，我得到一个 chrome 对话框“选择证书”。默认证书是正确的，所以我只需单击“确定”按钮。但我有这个问题。我有python代码：

```
drv = webdriver.Chrome()   
drv.get("https://example.com/login") 
```

之后我想做类似的事情：

```
drv.switch_to_alert().accept() 
```

或者

```
drv.switch_to_alert().send_keys(Keys.TAB)
drv.switch_to_alert().send_keys(Keys.SPACE) 
```

问题是代码在 drv.get(" [https://example.com/login](https://example.com/login) ") 行停止执行。Webdriver 正在等待页面加载。在该行之前没有 chrome 对话框。

我该如何处理？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T09:44:32.673

你必须使用 AutoIT 之类的东西：

[http://www.autoitscript.com/site/autoit/](http://www.autoitscript.com/site/autoit/)

你为什么问？这是一个 OS 对话框，Selenium 不会也可能永远不会处理，因此您必须求助于其他解决方案（例如，在 C# 中，您应该使用本机 Win32 API 方法来单击按钮）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-20T00:22:06.530

证书由操作系统管理，而不是浏览器。从浏览器的证书存储中删除除必要证书之外的所有证书，然后将浏览器配置为在仅存在一个证书时自动选择证书。您还可以创建浏览器配置文件并让您的程序启动此配置文件或避免通过 HTTPS 进行测试。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-08-30T17:24:03.970

在此处处理任何内容之前，请在下面添加，以便在您导航/触发证书弹出时它不会被冻结。请记住稍后添加正确的等待时间。

```
 getDriver().manage().timeouts().pageLoadTimeout(1000, TimeUnit.MILLISECONDS); 
```

在此之后，您可以尝试使用键盘或 autoIt 等等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-27T01:54:32.053

您可以为 Chrome 配置您的策略组，选择您的证书。

Chrome 使用带有您证书信息的 json 注册表。配置 gpo 后，想办法用 Python 修改这个 json。

使用 C#，我使用 Microsoft.Win32.Registry 来操作注册表。

请按照以下步骤配置您的 gpo：

首先我要感谢[IngussNeilands](https://gist.github.com/IngussNeilands)在他的 Github 上提供的教程。它救了我！[您可以在此处](https://gist.github.com/IngussNeilands/3bbbb7d78954c85e2e988cf3bfec7caa)按照IngussNeilands 教程中的步骤进行操作，或按照下面的他的教程版本进行操作。## 配置策略组的步骤

1.  从此处下载 Chrome 政策模板：http: [//dl.google.com/dl/edgedl/chrome/policy/policy_templates.zip](http://dl.google.com/dl/edgedl/chrome/policy/policy_templates.zip)

2.  解压`.zip`文件并找到`chrome.adm`与您的 Windows 上的国家和语言设置相匹配的文件，遵循以下路径：`policy_templates\windows\adm\<YourCountryAndLanguage>\chrome.adm`

3.  `"run"`在 Windows 搜索栏中键入或按`Windows + R`。然后输入 de 命令`gpedit.msc`打开*本地组策略编辑器*

4.  现在，访问：`'Computer Policy>> Computer Configuration'`并右键单击该文件`'Administrative Templates'`并选择`'Add or remove tamplates'`

5.  单击`'add'`并导航到`chrome.adm`您之前在 上选择的 `'policy_templates\windows\adm\<YourCountryAndLanguage>\chrome.adm'`。点击打开

6.  现在，导航到： `'Computer Policy>> Computer Configuration>> Administrative Templates>> Classic Administrative Templates(ADM)>> Google>> Google Chrome>> Content Settings'`

7.  然后在窗口的右侧找到并双击该选项`'Automatically select client certificates for these sites'`

8.  点击`'Enabled'`选项

9.  现在，单击`'Show...'`下面选项窗格中的

10.  将以下内容复制并粘贴到`'JSON'`Value: 列的行中 `{"pattern":"https://[*.]example.com","filter":{"ISSUER":{"CN":"example.com"}, "SUBJECT":{"CN":"value"}}`。此 JSON 需要用您的证书信息重写

## **如何重写 Chrome 配置 JSON**

好的，现在就给大家简单解释一下如何重写 Chrome Config JSON。

在“模式”键中，值需要是证书将被发送到的 URL。在大多数情况下，此 URL 与页面的 URL 相同，但某些站点不使用相同的 URL 库来发送证书。例如，当我尝试在*Uberlândia*市对 NFS-e 进行网络抓取时，我需要调试页面脚本以找到发送证书的 URL。

“过滤器”键将包含证书信息。就我而言，我需要使用不同的证书访问同一个网站，因为我必须用“ISSUER”和“SUBJECT”的信息填充 JSON。Chrome 会选择一个与过滤键中的信息内容匹配的证书。例如，如果我用“SERASA Certificadora Digital v5”填充“ISSUER”对象的“CN”，我将拥有多个包含这些信息的证书，Chrome 将无法选择正确的证书。

在我的 git 中[，](https://github.com/JimmyelsonSilvaPeres/AcessWithCertifiedChromeCSharp)您可以找到更改 JSON 以使用多个证书访问同一站点的解决方案。

# magento - Virtuemart 2 有没有简单的后端接口？

> ID：14960091
> 
> 赞同：0
> 
> 时间：2013-02-19T14:38:44.753
> 
> 标签：magento, joomla, virtuemart

我是 Joomla 开发者。Virtuemart 2 有没有简单的后端接口？每当我为任何人安装 VM2 时，他们都无法轻松理解它。如果存在任何第三方扩展，请指导我，它为美德玛特带来了自己的后端接口。

另外，我喜欢 Magento 后端，但我没有 Magento 的开发经验。所以我不能在magento工作。但我喜欢它的后端。如果有任何扩展带来类似于 magento 的后端接口，但在 Joomla 中，我真的很感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:57:26.320

就个人而言，虽然是商业的，但我喜欢 k2Mart 的后端：

[http://k2martdemo.joomlaworks.net/](http://k2martdemo.joomlaworks.net/)

[http://www.joomlaworks.net/extensions/commercial-premium/k2mart](http://www.joomlaworks.net/extensions/commercial-premium/k2mart)

# actionscript-3 - 如何将 QuadTree 单元格的空间索引（二进制索引）转换为位置和维度值？

> ID：14960093
> 
> 赞同：3
> 
> 时间：2013-02-19T14:39:15.427
> 
> 标签：actionscript-3, indexing, logical-operators, quadtree

很抱歉在这个问题中没有使用任何术语，但基本上我正在研究创建一个使用二进制索引的 QuadTree，如下所示：

![在此处输入图像描述](../Images/62b2b953dc84e89c3639af23d42c61f5.png) ![在此处输入图像描述](../Images/833d7eba13beaf695b7d6064ab2b2ca6.png)

正如您在上面的两个插图中看到的那样，如果每个单元格都有一个二进制 ID（例如：1010、1011），那么每个**奇数**二进制索引控制 X 偏移量，每个**偶数**二进制索引控制 Y 偏移量。

例如，在**2 级**网格（16 个单元）的情况下，*1010*（单元#10）可以说在它的*第 4*和*第 2*索引处有 1，因此它们将执行两个 Y 偏移。第一个“1###”（在最左侧）表示一个单元格高度的偏移量，然后第二个“##1#”将另外偏移单元格高度的两倍。

如：

```
// If Cell Height = 64pixels
  1### = 64 pixels
+ ##1# = 128 pixels
__________________
  1#1# = 192 pixels 
```

同样可以应用于 X 轴，只是它使用奇数代替（例如：#1#1）。

现在，当我初始化我的 QuadTree 时，我开始计算如果使用所有单元格和所有深度，它可能包含的最大节点。我用**每个深度的 4 次方的总和**计算了这个：

```
_totalNodes =   0;

var t:int=0, tLen:int=_maxLevels;
for (; t<tLen; t++) {
    _totalNodes += Math.pow(4, t); //Adds 1, 4, 16, 64, 256, etc...
} 
```

然后，我创建另一个循环（从**0 迭代到 _totalNodes**），它实例化节点并将其存储在一个长数组中。它将当前迭代整数传递给 Node*构造函数*，并将其存储为**索引**。

到目前为止，我已经能够通过确定它的索引的**最高有效位**来确定节点将存储在哪个深度（又名：级别）中：

```
public static function MSB( pValue:uint ):int {
    var bits:int =      0;

    while ( pValue >>= 1) {
        bits++;
    }

    return bits;
} 
```

但是现在，我一直在试图弄清楚如何将索引从二进制形式转换为实际的 Cell X 和 Y 位置。就像我上面说的，找到每个单元格的尺寸。这只是对整个索引进行一些逻辑操作的问题（或者“位代码”是我在代码中引用的名称）

如果您知道一个使用逻辑运算（二进制级别）将二进制索引值转换为 X 和 Y 位置的好示例，您能否在此处发布链接或解释？

谢谢！

* * *

这是我从中得到这个想法的参考（**注意**：不同的编程语言）：

**L. Spiro 引擎 - [http://lspiroengine.com/?p=530](http://lspiroengine.com/?p=530)**

虽然我不熟悉那篇文章中使用的语言，所以我不能真正遵循它并将其轻松转换为 ActionScript 3.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T03:03:36.920

您的任务由 Hannan Samet 描述。这首先构建四叉树，然后为每个四元单元分配对应的 morton 代码。（位交织代码）。
获得代码后，将其分配给四边形中的对象。然后你可以删除四叉树。然后，您可以通过将坐标转换为对应的 morton 代码进行搜索，并对 morton 索引进行 bin 搜索。您也可以使用希尔伯特或格雷码代替 morton（也称为 z 顺序）。

# vim - 在退出时记住“重复上次更改”

> ID：14960095
> 
> 赞同：0
> 
> 时间：2013-02-19T14:39:17.550
> 
> 标签：vim

Vim 的`.`（重复上次更改）是一个非常有用的功能。

有什么方法可以记住退出时的最后一次更改（类似于如何设置 vimrc 和 viminfo 文件以[记住](http://vim.wikia.com/wiki/Restore_cursor_to_file_position_in_previous_editing_session)退出时的最后一个文件位置）？

我希望能够从命令行运行 Vim 来打开一个文件，点击`.`，并让 Vim 对我刚刚编辑的最后一个文件进行相同的更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T14:57:10.613

不可以。但是您可以在寄存器中记录您的更改并稍后播放：

```
qa              "start recording into register a
(do your thing)
q               " stop recording
@a              " play back the macro saved in register a 
```

或者从同一个 Vim 会话中打开你的文件。

# unit-testing - 原子测试在动态创建的环境中有意义吗？

> ID：14960097
> 
> 赞同：1
> 
> 时间：2013-02-19T14:39:21.703
> 
> 标签：unit-testing, integration-testing, jasmine

我们正在构建一种产品，允许用户创建自定义数据库并将数据存储在这些数据库（WebApp）中。

我们测试前端（coffeescript）的问题是每个测试都应该是原子的，但这需要设置一个数据库来查看该数据库中的项目是否可以创建和持久化，或者查看数据库中的更改如何影响项目。

本质上，问题在于进入项目测试所需的设置代码基本上设置了一个新数据库，因此等于测试设置新数据库的代码。

有两种方法，我们很难使用：

1）使用每组测试创建和拆除一个新数据库

*   (+) Sorta Atomic（如果设置数据库失败，仍然会失败）
*   (-) 执行需要大量时间
*   (-) 大量的周边代码
*   (-) 无法探索创造的环境
*   (-) 错误混乱，一切都失败了

2）逐步进行设置作为单独的测试，相互依赖，在测试开始时进行清理例程

*   (+) 可以通过 UI 访问创建的环境（不会自动拆除）
*   (+) 逐步测试，减少整体/重复代码
*   (-) 测试相互依赖（混乱）
*   (-) 整体有些凌乱

因此，我们想知道测试应该是原子的黄金法则在这样一个动态的环境中是否有意义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T08:37:36.437

如果您正在与数据库交谈，那么您不是在进行原子测试。

您需要[**模拟**](http://en.wikipedia.org/wiki/Mock_object)数据库接口并改为与模拟对话。这将很快，并且您将能够使用模拟来引入使用真实数据库难以实现的错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T04:00:50.960

基本上，您所说的是集成测试。这些与单元测试不同。集成测试的示例是自动化 UI 测试或编码 UI 测试。在我参与的大多数项目中，我们都有这两种类型的测试，我强烈建议您在项目中也同时使用这两种类型。

这两个测试背后的理念略有不同。

*   单元测试旨在测试孤立的功能。
*   它们应该非常快。
*   开发人员应该能够在合理的时间内在他们的机器上运行它们。

这种哲学有各种后果。

*   因为单元测试是测试一个孤立的功能，你应该使用模拟和存根来隔离环境的其余部分，只关注微小的功能。
*   在编写这些测试时，隔离有助于您的*“设计思维” 。*事实上，这就是单元测试需要快速的原因，因为作为设计和重新设计过程的一部分，开发人员正在积极且不断地更改代码和单元测试。设置、更改和运行单元测试的开销应该非常低。我应该能够忽略除我试图解决的问题之外的所有内容，并快速迭代和重申我的设计和测试。这就是 TDD 背后的理念，它声称可以帮助编写好的可测试代码。如果您花费很长时间尝试设置过于复杂的单元测试，那么您必须开始重新考虑您的设计。
*   快速的特性意味着您可以将这些作为持续集成构建的一部分运行。
*   缺点是因为您是在孤立地测试每个功能，所以您不知道它们是否会作为一个整体一起工作。每次编写模拟程序时，您都在隐含地假设系统的其余部分如何工作，并且系统的其余部分当前正在按预期工作（即，在您的部署或运行​​过程中没有其他任何东西被破坏或修补操作系统等）

集成测试旨在从头到尾测试功能。您尽量不要模拟或隔离系统的任何部分。

这种哲学又产生了各种后果。请注意，集成测试不需要很快。

*   集成测试，就其本质而言，需要在您的完整部署之后运行（与单元测试相反，单元测试可以在您的代码编译后立即运行）。
*   因为它们需要更长的时间，所以您不会将它们作为 CI 环境的一部分运行，但您仍然需要定期运行它们。我们通常将它们作为夜间构建的一部分运行。或者你可以每天运行两次等。
*   因为集成测试对整个系统采用黑盒方法，所以它并不能真正帮助您*“设计思维”*来了解如何实际构建系统。但它确实有助于您思考整个系统的*规格*。即*系统应该做什么，而不是****它应该******如何****做某事。*

 **请注意，在这两种情况下，原子测试规则仍然适用。每个测试都与其他测试不同。这样，当测试失败时，您可以确定导致它失败的所有条件并专注于仅修复它。只是集成测试尽可能多地触及系统的部分。

给你一个关于我们当前项目的例子。

假设我们需要编写一些功能，要求我们向数据库添加一个新表，并将其通过所有层以在 UI 中显示。

我们首先创建业务逻辑类、域类、编写适当的 Web 服务、构建视图模型、修改数据库等。在执行这些操作时，我们编写单元测试来测试我们当前正在编写的代码。因此，在构建业务逻辑类时，我们会模拟其他所有内容以确保该类中的逻辑有效（例如，60 岁以上的客户可以获得 50% 的汽车保险折扣等）

一旦我们这样做了，我们现在需要更新我们的部署脚本/包等以便能够部署它。即更新数据库创建 SQL 脚本和数据库更改 SQL 脚本等（在您的情况下，这将是一个复杂的过程）。

现在我们编写集成测试。在这种情况下，我们可能会从 SQL Server 测试到 Web 服务。有一个 SQL 集成测试基类，其中包含每个测试的设置和拆卸方法。在设置中，我们使用我们的 sql 部署脚本创建了一个全新的数据库。每个测试还指定一个测试数据 sql 脚本。因此，例如，这个测试数据脚本可能会在年龄为 70 岁的客户表中插入一条新记录。我们将此脚本作为测试“安排”的一部分运行。然后进行 Web 服务调用以搜索 60 岁以上的客户。这是测试的“行为”部分，从结果中，我们检查以确保我们只取回我们已插入数据库的用户。在测试结束时，数据库被删除。当 SQL 数据库中的列不存在时，我们在这里发现了错误

某些功能需要我们与 Oracle 数据库交互。例如，如果将一条新记录添加到 Oracle，然后触发器/db 过程将启动并将该记录传输到 SQL，然后我们需要将其提升到各个层。在本例中，我们有一个 OracleSQL 集成测试基类。正如您可能已经猜到的那样，这遵循类似的模式，但创建 Oracle 和 SQL dbs 将测试数据插入 Oracle 并在测试结束时将它们都吹走。

开发人员通常选择 Web 服务层来编写他们的集成测试。另一方面，测试人员使用 UI 自动化工具来确保数据实际显示在屏幕上。例如，他们将记录一个进入网页的测试，单击搜索按钮，将“60”放入年龄框，单击搜索按钮等。该测试可能会利用相同的测试数据 sql 脚本来插入开发人员编写的测试数据（或者测试团队可能会来找开发人员并请求帮助制作 sql 脚本以插入他们能想到的任何高度复杂的数据）。但关键是，一旦创建了测试数据插入脚本，它就会利用相同的底层系统来炸毁整个数据库，创建一个新数据库，插入测试数据，然后运行指定的测试。

因此，要回答您的问题，您将需要两种类型的测试，单元测试和集成测试。您可能需要进行一些初始工作来创建一些基类或辅助方法来创建/删除数据库，自动部署以安装/卸载系统的其他组件等。无论如何，您都必须为最终部署执行此操作。集成测试也将与您的部署策略密切相关并依赖于您的部署策略。在我看来，这是一个优势而不是劣势。虽然一开始设置它可能会很痛苦，但您的集成测试隐式测试的一件事是您的部署机制。如果在部署/安装系统所需的任何组件时遇到任何问题，您希望尽快了解它。

一套好的测试是无价的。它还需要孤立、严谨和全面。测试不应该在不需要时失败，但更重要的是，它们应该在需要时失败。当它们确实失败时，您希望它们提供尽可能多的信息，并为您指出失败的确切位置。这使得解决问题变得更加容易。任何时候你投入构建这个测试套件都将很快收回成本。**

# authentication - 带有 IP 地址的 URL 可访问，使用别名而不是 IP 的 URL 不可访问

> ID：14960101
> 
> 赞同：1
> 
> 时间：2013-02-19T14:39:30.457
> 
> 标签：authentication, web, ip, alias

基本问题是在我机器上的 IE 中，当使用服务器名称别名时，我们 Intranet 中的特定网站不起作用。但是，它在使用服务器的 IP 地址时有效。

```
This doesn’t work 
http://MyWeb/TheSite 
```

这是服务器上的 IIS 日志中的 401 错误，IE 显示“Internet Explorer 无法显示网页。诊断连接问题”。

```
But this does work:
http://100.100.100.100/TheSite 
(100.100.100.100 being a made up IP)

On other machines on our intranet, this does work for me:
http://MyWeb/TheSite 
```

我认为我们已经缩小了 IIS 上的集成身份验证范围。当我在服务器上将 MyWebb/TheSite 的 AppPool 更改为 Anonymous 时，TheSite 可以在我的机器和其他机器上运行。当我改回集成身份验证时，它适用于我在其他机器上的机器，但不适用于我的机器。有任何想法吗？我的桌面配置文件有什么问题吗？

还有一点数据，TheSite 曾经在我的机器上使用集成身份验证。几周前它刚刚停止。
此外，我们查看了所有相关的 DNS 属性等，一切看起来都不错

# asp.net - 用户控件的属性在回发后失去价值

> ID：14960103
> 
> 赞同：19
> 
> 时间：2013-02-19T14:39:33.840
> 
> 标签：asp.net, data-binding, user-controls

这是 HTML。我有一个包含用户控件的中继器。

```
<asp:Repeater ID="rpNewHire" runat="server">
 <HeaderTemplate>
  <table>            
 </HeaderTemplate>
 <ItemTemplate>
  <tr>
     <td>
         <user:CKListByDeprtment ID = "ucCheckList" 
          DepartmentID= '<%# Eval("DepID")%>' 
          BlockTitle = '<%# Eval("DepName")%>' 
          runat = "server"></user:CKListByDeprtment>
     </td>
   </tr>
  </ItemTemplate>
  <FooterTemplate>
   </table>
  </FooterTemplate>
</asp:Repeater> 
```

DepartmentID 是我在**用户控件**中定义的一个属性。

```
int departmentID;

public int DepartmentID
{
  get { return departmentID; }
  set { departmentID = value; }
} 
```

这就是我尝试访问它的方式

```
protected void Page_Load(object sender, EventArgs e)
{
   int test = departmentID;
} 
```

第一次加载页面时，**departmentID**有一个值。但是，当页面回发时，该值始终**为 0**。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-19T14:42:41.513

所有变量（和控件）都在页面生命周期结束时处理。所以你需要一种方法来持久化你的变量，例如在`ViewState`.

```
public int DepartmentID
{
    get {
        if (ViewState["departmentID"] == null)
            return int.MinValue;
        else 
            return (int)ViewState["departmentID"]; 
    }
    set { ViewState["departmentID"] = value; }
} 
```

MSDN 杂志文章“在 ASP.NET 应用程序中管理持久用户状态的九个选项”很有用，但在 MSDN 网站上不再显示。它在 2003 年 4 月版中，您可以[将其作为 Windows 帮助文件 (.chm) 下载](http://download.microsoft.com/download/3/a/7/3a7fa450-1f33-41f7-9e6d-3aa95b5a6aea/MSDNMagazineApril2003en-us.chm)。（不要忘记调出属性并取消屏蔽“这是从互联网上下载的”的东西，否则您无法查看文章。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T14:42:35.560

更改您的属性以使用视图状态

```
int departmentID = 0;
public int DepartmentID
{
  get { 
         if(ViewState["departmentID"]!=null)
         { departmentID = Int32.Parse(ViewState["departmentID"]); }; 
         return departmentID;
      }
  set { ViewState["departmentID"] = value; }
} 
```

# html - 为什么我的 SVG 没有被用作重复的背景图像？

> ID：14960107
> 
> 赞同：1
> 
> 时间：2013-02-19T14:39:54.200
> 
> 标签：html, css, svg

所以，这感觉像是一个简单的问题，但我就是不知道出了什么问题。我想要一个带有条纹颜色背景的 div 元素。为此，我决定尝试编写 SVG，以尽可能接近 W3C 代码。但是，当我尝试应用它时，它似乎不起作用。**SVG 图像**在其原始代码嵌入网页时确实可以正常显示（当然，没有 XML 和 DOCTYPE 标签），但在用作 CSS 背景时则不正确。**为什么 CSS 不将此 SVG 图像设置为 DOM 元素的重复背景？**

## SVG

```
<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE svg>
<SVG XMLNS="http://www.w3.org/2000/svg" XMLNS:XLINK="http://www.w3.org/1999/xlink" VIEWBOX="0 0 16 16">
  <TITLE>Translucent White Stripes</TITLE>
  <DESC>Translucent bottom-left-to-top-right diagonal white stripes</DESC>

  <POLYGON POINTS="00,16 16,00 08,00 00,08" STYLE="fill:#000000;fill-opacity:0.5"/>
  <POLYGON POINTS="08,16 16,08 16,16"       STYLE="fill:#000000;fill-opacity:0.5"/>
</SVG> 
```

## CSS

```
.striped {
  background-color: red;
  background-image: url("http://BHStudios.org/_images/backgrounds/translucentWhiteStripes.svg");
  background-size:16px 16px;
  background-repeat: repeat;
} 
```

## HTML

```
<!DOCTYPE HTML>
<HTML>
  <HEAD>
    <TITLE>SVG Test</TITLE>
  </HEAD>
  <BODY>
    <DIV CLASS="striped">Striped</DIV>
  </BODY>
</HTML> 
```

这是一个 JSBin，以防万一：http: [//jsbin.com/isihuy/3/edit](http://jsbin.com/isihuy/3/edit)

## 要修复的编辑

* * *

以下是我为修复它所做的代码更改：

## SVG

我用 UTF-8 重新编码它，并在 XML 标记中做了一个 not 。我删除了该`viewbox`属性并将其替换为`height`and `width`。我将所有 SVG 标记和属性案例更改为 W3C 指定的案例：

```
<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE svg>
<svg xmlns="http://www.w3.org/2000/svg" height="16" width="16">
  <title>Translucent White Stripes</title>
  <desc>Translucent bottom-left-to-top-right diagonal white stripes</desc>

  <polygon points="00,16 16,00 08,00 00,08" style="fill:#000000;fill-opacity:0.5"/>
  <polygon points="08,16 16,08 16,16"       style="fill:#000000;fill-opacity:0.5"/>
</svg> 
```

## 网络配置

事实证明这实际上是最大的问题：`application/octet-stream`尽管我在文件中添加了正确`mimeMap`的 SVG ，但服务器仍将其作为`web.config`. 为了解决这个问题，我必须在它前面加上一个`remove`标签：

```
<configuration>
    <system.webServer>
        <staticContent>
            <remove fileExtension=".svg" />
            <mimeMap fileExtension=".svg"  mimeType="image/svg+xml"/>
        </staticContent>
    </system.webServer>
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T20:25:56.610

SVG 通常区分大小写。唯一不是这样的情况是您将其嵌入到不区分大小写的容器中，例如 HTML 文档。修复独立 SVG 文件中所有 SVG 标记和属性的大小写，使其符合[SVG 规范](http://www.w3.org/TR/SVG/)并删除无效`<!DOCTYPE svg>`行，您应该没问题。

# c# - c#：如何保存程序集设置？

> ID：14960112
> 
> 赞同：1
> 
> 时间：2013-02-19T14:40:21.670
> 
> 标签：c#, config, .net-assembly

我有使用 c# 程序集的非托管 C++ 应用程序。我想保存/读取程序集设置。我将 mySettigs 添加到程序集并将设置读取/保存到配置文件。

我找到了这个文件

```
C:\Users\JohnDoe\AppData\Local\MayCrossoft\DefaultDomain_Path_l5epjb2agsxbnfr1mif5euhhtr3x5ed3\1.1.0\user.config 
```

问题是：将“DefaultDomain_Path_”更改为程序集名称需要做什么？

谢谢。

# java - LWJGL Java - 使用鼠标坐标时线/四边形不会消失

> ID：14960115
> 
> 赞同：0
> 
> 时间：2013-02-19T14:40:24.940
> 
> 标签：java, lwjgl

我在 Eclipse 中使用 LWJGL，并且我制作了以下代码：

```
public class test {
    public test() {
        int wx = 600;
        int hy = 450;

        try {
            Display.setDisplayMode(new DisplayMode(wx, hy));
            Display.create();
            Display.setTitle("Hello World!");
        } catch (LWJGLException e) {
            e.printStackTrace();
        }

        // init openGL
        glMatrixMode(GL_PROJECTION);
        glLoadIdentity();
        glOrtho(0, wx, hy, 0, 1, -1);
        glMatrixMode(GL_MODELVIEW);

        while (!Display.isCloseRequested()) {
            // render openGL
            int mouseX = Mouse.getX();
            int mouseY = Mouse.getY();

            while (Mouse.next()) {
                if (Mouse.isButtonDown(0)) {
                    System.out.println("(" + mouseX + ", " + mouseY + ")");
                }
            }

            while (Keyboard.next()) {
                if (Keyboard.getEventKey() == Keyboard.KEY_ESCAPE) {
                    Display.destroy();
                    System.exit(0);
                }
            }

            glBegin(GL_LINES);
            glVertex2i(100, 100);
            glVertex2i(mouseX, hy - mouseY - 1);
            glEnd();
            Display.update();
            Display.sync(250);
        }
    }

    public static void main(String[] args) {
        new test();
    }
} 
```

看着这个：

```
glBegin(GL_LINES);
glVertex2i(100, 100);
glVertex2i(mouseX, hy - mouseY - 1);
glEnd();
Display.update();
Display.sync(250); 
```

它表明我对直线的第一个点使用了一个简单的坐标，但是我的鼠标坐标正在使用直线的第二个点。当我四处移动鼠标时，它不是一个跟随光标的单行，而是创建了许多不会消失的行。有什么办法可以去掉已经画好的线条？

提前致谢。非常感激。

# c - x86 上的简单 PAPI 分析中出现意外大量 TLB 未命中

> ID：14960116
> 
> 赞同：2
> 
> 时间：2013-02-19T14:40:26.270
> 
> 标签：c, x86, tlb, papi, nehalem

我正在使用 PAPI 高级 API 来检查一个简单程序中的 TLB 未命中，该程序循环遍历一个数组，但看到的数字比预期的要大。

在其他简单的测试用例中，结果似乎相当合理，这让我认为结果是真实的，额外的未命中是由于硬件预取或类似原因造成的。

谁能解释这些数字或指出我在使用 PAPI 时的一些错误？

```
int events[] = {PAPI_TLB_TL};
long long values[1];
char * databuf = (char *) malloc(4096 * 32);

if (PAPI_start_counters(events, 1) != PAPI_OK) exit(-1);
if (PAPI_read_counters(values, 1) != PAPI_OK) exit(-1); //Zeros the counters

for(int i=0; i < 32; ++i){
    databuf[4096 * i] = 'a';
}

if (PAPI_read_counters(values, 1) != PAPI_OK) exit(-1); //Extracts the counters

printf("%llu\n", values[0]); 
```

我希望打印的数字在 32 的区域内，或者至少是某个倍数，但始终得到 93 或更高的结果（并非始终高于 96，即不是每次迭代都只有 3 次未命中）。我正在运行固定到一个核心，上面没有其他任何东西（除了定时器中断）。

我在 Nehalem 上并且不使用大页面，因此 DTLB 中有 64 个条目（L2 中有 512 个）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T16:09:42.983

根据评论：

*   如果使用，约 90 次未命中`malloc()`。
*   `calloc()`如果使用或事先迭代数组，则32 未命中。

原因是由于惰性分配。在你触摸它之前，操作系统实际上并没有给你内存。

当您第一次触摸页面时，将导致页面错误。操作系统将捕获此页面错误并在运行中正确分配它（[其中包括归零](https://stackoverflow.com/questions/8029584/why-does-malloc-initialize-the-values-to-0-in-gcc)）。这是导致所有这些额外的 TLB 未命中的开销。

但是，如果您`calloc()`提前使用或触摸了所有内存，则将这些开销移至启动计数器*之前。*因此较小的结果。

至于剩下的32次失误……我不知道。
（或者正如评论中提到的，这可能是 PAPI 干扰。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T16:06:53.440

造成这种情况的原因可能是因为您在每次循环迭代中都跳了 4096：

```
for(int i=0; i < 32; ++i){
    databuf[4096 * i] = 'a';
} 
```

很有可能每次访问都会出现缓存未命中。

# perl - 这是什么意思！$var PERL？

> ID：14960118
> 
> 赞同：-1
> 
> 时间：2013-02-19T14:40:29.290
> 
> 标签：perl

我得到了一些代码它可以工作，但不理解这部分！$dump_done ...

```
my $dump_done = 0; 
foreach my $line(keys %results){ 
    if ($results{$line} == 1 and !$dump_done) { 
         print Dump($post); 
         $dump_done = 1; 
    } 
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T14:43:12.283

`!`是[逻辑非运算符](http://perldoc.perl.org/perlop.html#Logical-Not)。它将返回 的否定`$dump_done`。如果`$dump_done`contains `0`，否定会给你`1`：

```
my $dump_done = 0; 
print !$dump_done;   # Prints 1 
```

这是有效的，因为在`Perl`任何非零值中都被考虑`true`并被`0`考虑`false`。

你可以试试这个片段：

```
if (5) {
    print "Hello";   # Will be executed.
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T14:43:32.653

大多数编程语言中的`!`字符代表*NOT*，它是*negation*。

如果变量的值`$dump_done`仍然为零，则在测试`$dump_done`时它将返回*FALSE* (0)。如果你*否定*这个表达式，你会得到一个*TRUE*表达式 (!= 0)。

见[真假](http://www.perlmonks.org/?node_id=495975)

# django - Django表单：复选框显示没有价值

> ID：14960119
> 
> 赞同：2
> 
> 时间：2013-02-19T14:40:37.450
> 
> 标签：django, django-models, django-forms, django-templates

我无法正确保存我的表单 (a `ModelForm`)，因为 django 显示没有值的复选框（我希望 value="true" 在每个字段上，都选中而不是未选中......但事实并非如此）。当我提交表单时，POST 中没有收到任何数据！

以下是我的模板：

```
 <div>
      {{form.displayAge.label_tag}}
      {{form.displayAge}} 
      {{form.displayAge.errors}}
 </div> 
```

`{{form.displayAge}}`以这种方式呈现：

```
<input checked="checked" type="checkbox" name="displayAge" id="id_displayAge"> 
```

但是......因为它没有价值，选中/取消选中复选框是无能为力的！我该怎么办？我想避免手动输入表单域！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:47:22.500

不，不需要`value`字段。如果复选框被选中，`"on"`如果没有提供，浏览器将默认作为值提交。

如果您没有在您的视图中获得此值，则说明其他问题。请注意，由于您使用的是 Django 表单，因此`request.POST`无论如何都不应该手动检查：使用`form.cleaned_data`.

# php - 长 if 语句和 PSR-2

> ID：14960121
> 
> 赞同：7
> 
> 时间：2013-02-19T14:40:45.643
> 
> 标签：php, coding-style

我即将将一些代码迁移到 PSR-2 标准。在我的代码中，我有带有多行的 if 语句作为表达式：

```
if (    $field->getBlockMode() == FieldInterface::BLOCK_MODE_HIDEVAR &&
        !isset($this->enabledBlocks[$field->getBlock()])
) {

} 
```

编写此类表达式的最佳做法是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-19T14:45:55.563

如何使它成为一个单行符以避免该问题并使语句更具可读性：

```
$blockModeIsHidevar = $field->getBlockMode() == FieldInterface::BLOCK_MODE_HIDEVAR;
$blockNotEnabled = !isset($this->enabledBlocks[$field->getBlock()]);

if ($blockModeIsHidevar && $blockNotEnabled) {

} 
```

**选择：**

我通常用方法来做，这*可能*看起来像这样：

```
if ($this->blockModeIsHidevar($field) && $this->blockNotEnabled($field)) {

}
// ...
private function blockModeIsHidevar($field)
{
    return $field->getBlockMode() == FieldInterface::BLOCK_MODE_HIDEVAR
}
private function blockNotEnabled($field)
{
    return !isset($this->enabledBlocks[$field->getBlock()])
} 
```

这样，优化`&&`仍然发生。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-19T14:46:37.597

首先将其提取为较短的布尔表达式，然后在您的`if()`语句中使用这些变量。

IE：

```
$hideVarMode = $field->getBlockMode() === FieldInterface::BLOCK_MODE_HIDEVAR;
$enabledBlock = !isset($this->enabledBlocks[$field->getBlock()];
if($hideVarMode && $enabledBlock) {
    ....
} 
```

（请注意，我还将您的第一个测试变成了三等式，因为这可能会更好；如果这对您不起作用，请随时将其改回）

# php - 使用子元素从平面数组创建嵌套数组

> ID：14960124
> 
> 赞同：0
> 
> 时间：2013-02-19T14:40:57.757
> 
> 标签：php, json, multidimensional-array, nested

我有一个关于嵌套数组的问题；我在 google 和 stackoverflow 上进行了搜索，但找不到适合我需要的解决方案：-/

我有以下数组：

```
Array
(
    [0] => Array
        (
            [name] => Europe
            [children] => Array
                (
                    [0] => West
                    [1] => East
                    [2] => South
                    [3] => North
                    [4] => Zimbabwe
                )
        )
    [1] => Array
        (
            [name] => West
            [children] => Array
                (
                    [0] => Germany
                    [1] => France
                    [2] => Switzerland
                    [3] => Netherlands
                    [4] => Belgium
                    [5] => Luxembourg
                    [6] => United Kingdom
                    [7] => Ireland
                )
        )
    [2] => Array
        (
            [name] => Germany
            [children] => 
        )
    [3] => Array
        (
            [name] => France
            [children] => 
        )
) 
```

我想将其转换为嵌套，这意味着：

```
Array
(
    [0] => Array
        (
            [name] => Europe
            [children] => Array
                (
                    [0] => Array
            (
               [name] => West
               [children] => Array
                (
                  [0]=> Array
                  (
                    [name] => Germany
                  )
                  [1]=> Array
                  (
                    [name] => France
                  )
                )
            )
                    [2] => Array
            (
               [name] => East
               [children] => Array
                (
                  [0]=> Array
                  (
                    [name] => Poland
                  )
                  [1]=> Array
                  (
                    [name] => Austria
                  )
                )
            )
        )
        )
) 
```

你有想法吗 ？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:14:22.330

```
foreach ($unnested_ary as $one_k => $one_v)
{
    foreach ($one_v as $two_k => $two_v)
    {
        if ($two_k == 'children')
        {
            foreach ($two_v as $three_k => $three_v)
            {
                $unnested_array[$one_k][$two_k][$three_k][] = array(array(
                    'name' => $three_v
                ));
            }
        }
    }
} 
```

我不确定我是否正确嵌套了它，但你应该明白这个想法并使用这段代码。这基本上应该像您要求的那样创建新的键和值。

# r - 双引号没有在 R 中转义

> ID：14960126
> 
> 赞同：19
> 
> 时间：2013-02-19T14:41:00.603
> 
> 标签：r

我需要在以下示例中转义双引号，然后 R 返回：

```
xx<-"the road is 'rocky all \"the\" way'"
xx

[1] "the road is 'rocky all \"the\" way'" 
```

最后的字符串应该包含单引号和双引号

```
the road is 'rocky all "the" way' 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-19T14:42:53.497

你已经实现了。只是`print()`在显示引号时转义了引号：

```
R> xx <- "the road is 'rocky all \"the\" way'"
R> cat(xx)
the road is 'rocky all "the" way' 
```

# php - Content-Type 标头不起作用，Firefox 始终显示“文档”或“预览文档”作为文件类型

> ID：14960128
> 
> 赞同：1
> 
> 时间：2013-02-19T14:41:12.167
> 
> 标签：php, firefox, http-headers, download, content-type

我正在使用以下代码下载文件：

```
$file_name = $_GET['file_name'];
$file_size = filesize( 'files/' . $file_name );
$file_type = mime_content_type( 'files/' . $file_name );

header( 'Content-Type: ' . $file_type );
header( 'Content-Length: ' . $file_size );
header( 'Content-Disposition: attachment; filename="' . $file_name . '"' );

readfile( 'files/' . $file_name ); 
```

它工作正常，我可以下载文件。然而，有件事让我很困扰。当我使用 Firefox 下载文件时，下载对话框总是显示该文件是“文档”，有时是“预览文档”，而不是图像或 PDF 或任何实际文件。有任何想法吗？

编辑：我刚刚尝试了一个 .svg 文件（mime 类型 image/svg+xml），并且对话框正确地说明了“可缩放矢量图形”。但后来我尝试使用 .psd 文件（mime 类型图像/x-photoshop）并得到“Preview.app 文档”。诡异的。任何人都能够复制这个问题？在这一点上，我认为这可能是 Firefox 的问题，所以我添加了“Firefox”作为标签。

# objective-c - 当设备方向改变时切换到不同的 UIViewController

> ID：14960130
> 
> 赞同：0
> 
> 时间：2013-02-19T14:41:15.263
> 
> 标签：objective-c, uiviewcontroller, uisplitviewcontroller, uiinterfaceorientation, uiwindow

我目前正在为 iPad 构建一个应用程序，其中视图结构完全不同，具体取决于设备方向。

当应用程序处于纵向时，我使用 ECSlidingViewController 库来支持左右滑动菜单（如 facebook 或路径）。

当应用程序处于横向时，我需要显示一个 splitviewcontroller，以便始终可见左侧菜单。

有人知道这个问题的最佳解决方案吗？

当检测到方向更改时，我尝试更改 UIWindow 的 RootViewController 但这给出了一些非常奇怪的结果......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:41:38.193

有几种方法可以做到这一点。有些比其他更好，但主要取决于您的具体情况的需要。

1.  `rootViewController`如您在轮换期间提到的那样更换。
2.  在纵向和横向之间旋转时，请始终使用 a`UISplitViewController`和使用`segue`to with`replace`来替换。`detailViewController`
3.  `addChildViewController:`使用/制作一个自定义容器视图控制器，它使用和添加/删除旋转时适当的视图控制器`removeFromParentViewController:`

选择3的极其粗略的例子。

```
- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {
    [self.childViewControllers[0].view removeFromSuperView];
    [self.childViewControllers[0] removeFromParentViewController];

    if (UIInterfaceOrientationIsPortrait(toInterfaceOrientation)) {
        [self addChildViewController:portraitVC];
        [self.view addSubview:portraitVC.view];
    } else {
        [self addChildViewController:landscapeVC];
        [self.view addSubview:landscapeVC.view];
    }
} 
```

从你所说的，我猜选项 3 将是最合适的。尽管如此，我并不完全相信您需要切换视图控制器，但我不熟悉`ECSlidingViewController`它提供的内容，所以我不能确定。

# html - 3个div根据屏幕大小改变位置

> ID：14960133
> 
> 赞同：5
> 
> 时间：2013-02-19T14:41:21.077
> 
> 标签：html, css

我想要 3 个通常显示在页面中的 div，如下所示

```
--------------
|     |      |
|  1  |      |
|     |   2  |
|-----|      |
|     |      |
|  3  |      |
|     |      |
-------------- 
```

所以 html 将类似于

> **编辑**：我确实认为有一个更好的解决方案，但是将 1 和 3 保持在左侧之后，您可能要做的第一件事是将它们放在另一个 div 中。
> 
> 我确实相信这样做不可能仅通过使用媒体查询来解决调整大小的问题。
> 
> 有没有办法在没有外部容器 div 的情况下实现相同的视觉效果？

```
<section class="content-wrapper main-content clear-fix">
                <div>
                    <div id="1" class="main-content-left float-left">
                        @RenderSection("leftBefore", required: false)
                    </div>
                    <div id="3" class="main-content-left-after float-left">
                        @RenderSection("leftAfter", required: false)
                    </div>
                </div>
                <div id="2" class="main-content-center float-left">
                    @RenderBody()
                </div>

            </section> 
```

我的目标是让左侧菜单具有固定宽度，右侧菜单使用剩余空间。如果屏幕尺寸减小，则 div 应该移动以得到如下所示的内容，可能全部居中。

有什么建议吗？

```
 ---------
    |       |
    |   1   |
    |       |
    |-------|
    |       |
    |   2   |
    |       |
    |-------|
    |       |
    |   3   |
    |       |
    --------- 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T15:38:14.353

使用这样的东西...

**HTML**

```
<div class="wrap">
    <div class="right top"></div>
    <div class="left"></div>
    <div class="right bot"></div>
</div> 
```

**CSS**

```
.wrap {width: 85%; margin: auto; overflow: hidden;}
.left {float: right; height: 510px; width: 49%; background: pink;}
.right {float: left; height: 250px; margin-bottom: 10px; width: 49%;}
.right.top {background: green;}
.right.bot {background: red;}
@media all and (max-width: 400px) {
    .left, .right {float: none; margin-bottom: 5px; height: 200px;}
} 
```

**截图**

以上`600px`

![](../Images/77d62f42b81a258d7a23f1603d3dea92.png)

以下`600px`

![](../Images/49af02bb78a0fa8386b5883b1dedbd1d.png)

**在这里演示：** [jsBin](http://jsbin.com/oxoham/2)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T15:42:02.963

这应该有效：

HTML：

```
<div id="div1"></div>
<div id="div2"></div>
<div id="div3"></div> 
```

CSS：

```
div {
    height: 200px;
    width: 100%;
}
@media screen and (min-width:500px) {
    #div1, #div3 {
        width: 50%;
        float: left;
        clear: left;
    }
    #div2 {
        width: 50%;
        float: right;
        height: 400px;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T15:57:49.967

这段代码非常不完美，但它满足了您在元素布局方面的要求。

[http://jsfiddle.net/4uxTy/](http://jsfiddle.net/4uxTy/)（不包括前缀）

```
<section class="container">
    <div class="a">a</div>
    <div class="b">b</div>
    <div class="c">c</div>
</section>

body, html {
    height: 100%;
}

.container {
    display: flex;
    flex-flow: column wrap;
    height: 100%;
}

.a, .b {
    flex: 1 0 50%;
}

.c {
    flex: 2 0 50%;
}

@media (max-width: 20em) {
    .a, .b, .c {
        flex: 1 1 auto;
    }

    .b {
        order: 1;
    }
} 
```

这可能与您能够在不修改标记或损害设计的情况下获得所需内容一样接近。Flexbox 目前还没有得到非常广泛的支持，因为 IE10 是第一个支持它的 IE。

[http://caniuse.com/#search=flexbox](http://caniuse.com/#search=flexbox)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-19T15:26:22.253

您需要使用媒体查询。

> 媒体查询由媒体类型和至少一个表达式组成，该表达式通过使用媒体特征（例如宽度、高度和颜色）来限制样式表的范围。在 CSS3 中添加的媒体查询让内容的呈现可以针对特定范围的输出设备进行定制，而无需更改内容本身。

**媒体查询示例**

```
@media all and (max-width: 500px) {
    /* css */
} 
```

当屏幕小于 500px 时，将执行此媒体查询；

**演示：http: [//jsfiddle.net/B2cKy/](http://jsfiddle.net/B2cKy/)**

# asp.net-mvc-4 - 淘汰赛 - 加载部分视图后如何在主页 ViewModel 上设置子 ViewModel 属性

> ID：14960134
> 
> 赞同：0
> 
> 时间：2013-02-19T14:41:22.433
> 
> 标签：asp.net-mvc-4, knockout.js

我正在尝试在我的主页上动态加载 div 的内容，并从控制器返回部分视图。该 div 的内容可能会根据用户在主视图上单击的按钮而改变。部分视图有自己的淘汰视图模型，我想将其绑定到 div（或部分​​视图中的子 div）。

这是我尝试过的...

我的主页上有一个主要的淘汰赛 ViewModel...

```
window.mainpage.viewmodel = (function (ko, datacontext) {
    var self = this;

    self.someValue = ko.observable("test value");
    self.childViewModel = ko.observable();

    return {
       someValue: someValue,
       childViewModel: childViewModel
    };
})(ko, window.mainpage.datacontext);  

$(document).ready(function () {
    var viewModel = window.mainpage.viewmodel;
    ko.applyBindings(viewModel);
} 
```

然后我的视图有两个 div，一个绑定到 someValue，另一个绑定到 childViewModel....

```
<div data-bind="text: someValue"></div>
<div id="subContent" data-bind="with: childViewModel">
</div> 
```

当我单击表单上的按钮时，我希望它将“subContent”div 的内容设置为 Partial View 控制器操作的结果......

```
$('#subContent').load('/Test/GetPage', data, function (response, status, xhr) {
                 //Do something when the partial view is loaded in #subContent
            }); 
```

我的 PartialView 有它自己的 ViewModel，我已经在它自己的 js 文件中声明了它，它在局部视图中声明......

```
window.child.subviewmodel = (function (ko, datacontext) {
    var self = this;

    self.someChildValue = ko.observable("test child value");

    return {
       someChildValue: someChildValue
    };

})(ko, window.child.datacontext); 
```

我的问题是在哪里创建我的子 ViewModel 以及如何将它分配给主 ViewModel 上的 childViewModel 属性。

另外，我应该怎么做才能确保每次重新加载子内容时正确清除内存使用量？

谁能建议实现这一目标的最佳方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:53:44.307

1.  我建议不要像这样（通过引用）紧密耦合您的视图模型，并建议您建立一个通信渠道，而不是使用某种事件聚合器（例如，[淘汰邮箱）](https://github.com/rniemeyer/knockout-postbox/)
2.  您应该在加载子视图的 DOM 后立即创建子 VM。
3.  ko.cleanNode() 是你的朋友

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:50:38.353

您真的需要在这里有一个子模型，还是可以使用两个模型并将它们绑定到页面的不同部分？如果是这样，您可以使用此答案来帮助您做到这一点：

[使用 knockout.js 渲染局部视图](https://stackoverflow.com/questions/14597544/render-partial-view-using-knockout-js/14600067#14600067)

如果您的模型需要相互通信，您可以为此实现发布/订阅模式：

[带有knockoutJS的变量依赖](https://stackoverflow.com/questions/14555381/variable-dependency-with-knockoutjs/14559492#14559492)

# ruby-on-rails - ActiveRecord::Relation#bind 的目的是什么？

> ID：14960135
> 
> 赞同：7
> 
> 时间：2013-02-19T14:41:25.763
> 
> 标签：ruby-on-rails, rails-activerecord, relation

只是出于好奇-我正在阅读[Relation::QueryMethods 模块](http://apidock.com/rails/v3.2.8/ActiveRecord/QueryMethods/bind)的文档并找到了该方法：

```
def bind(value)
  relation = clone
  relation.bind_values += [value]
  relation
end 
```

有谁知道这是什么？我试图自己找到，但失败了。

**更新**

我追踪`@bind_values`到了无底深度的使用`ActiveRecord::ConnectionAdapters`——这些值一直传递下去，直到低级 SQL 语句执行。似乎各个适配器可能会使用这些。我的猜测是它与准备好的语句有关`SELECT * FROM 'table' WHERE 'field' = ?`，但我被困在这里。任何人？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-21T17:11:38.357

首先解释一下ActiveRecord提供的[find_by_sql](http://apidock.com/rails/ActiveRecord/Base/find_by_sql/class)方法。看起来这个方法可以像这样使用：

```
Post.find_by_sql("SELECT title FROM posts WHERE author_id = ?", [author_id]) 
```

第二个参数称为“绑定”，它是与查询中的问号相对应的变量数组。您确实想使用 binds 数组将参数插入到查询中，因为它避免了如果您自己进行绑定会发生的许多[SQL 注入危险：](http://en.wikipedia.org/wiki/SQL_injection)

```
Post.find_by_sql("SELECT title FROM posts WHERE author_id = #{author_id}") 
```

那么，这与 ActiveRecord::Relation 有何关系？AREL 的要点是，您可以通过调用 ActiveRecord::Relation 对象上的方法一次构建一点查询。有很多这样的方法，下面是它们的一些列表：

[http://apidock.com/rails/v3.2.8/ActiveRecord/QueryMethods](http://apidock.com/rails/v3.2.8/ActiveRecord/QueryMethods)

因此，该`bind`方法通过克隆当前对象来创建一个新对象，将指定的对象添加`value`到 的列表中`bind_values`，然后返回新对象。最终，当关系用于生成查询时，该值将发现自己被用于进行查询。get 传递给的一个[示例](https://github.com/rails/rails/blob/b4051edf841c8a6780df9af7afa9892bfd811c79/activerecord/lib/active_record/relation.rb#L565)是在方法中：`bind_values``find_by_sql``exec_queries`

```
@records = eager_loading? ? find_with_associations : @klass.find_by_sql(arel, bind_values) 
```

您可以在 gem 中搜索“bind_values”，`activerecord`您会发现几个类似的地方正在使用它。

我原以为该`bind`方法会被调用`where`，但它似乎没有在 activerecord 中的任何地方调用。也许它是旧设计的遗留物。我认为你不应该`bind`在你的应用程序中调用。

# mysql - MySQL-如何升级所有客户端程序以使用 4.1.1

> ID：14960136
> 
> 赞同：3
> 
> 时间：2013-02-19T14:41:26.990
> 
> 标签：mysql, visual-studio-2010, mysql-connector

在 Visual Studio 中，我下载了最新版本的 MySql 连接器，但是当我尝试输入凭据并选择数据库时，我什至可以这样做，它说：

> “不再支持使用旧密码进行身份验证，请使用 4.1 样式密码”

我正在使用 Hostgator，我向他们提交了一张票，询问他们该怎么做。他说最好的解决方案是升级所有客户端程序以使用 4.1.1 版本。

他这是什么意思？客户端有什么要升级的吗？Mysql 和 PHP 是服务器端，我认为主机 gator 会处理所有这些。

就 Mysql 连接器而言，我使用的是 6.6.5 版。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T14:57:30.583

与客户无关。MySQL 有两种不同的密码散列方式（“旧”和“新”），您的 PW 散列是“旧”样式。您必须更改您的密码才能使用新样式，例如

```
SET SESSION old_passwords=0;
SET PASSWORD FOR user@host=PASSWORD('your pw here'); 
```

您必须为每个密码执行此操作。哈希是单向的，不能直接更改为新样式。

# openstack - devstack方法中的openstack仪表板登录错误

> ID：14960138
> 
> 赞同：1
> 
> 时间：2013-02-19T14:41:28.550
> 
> 标签：openstack, devstack

当我在 ubuntu 12.04 中登录到 openstack cloud 的仪表板时，它首先登录，但是在我重新启动机器后，它无法登录返回错误“稍后在验证时发生错误”。我尝试了 devstack 多节点的步骤开放堆栈云。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T15:48:11.200

Devstack 不会在启动时自动启动所有服务。您可以运行 rejoin-stack.sh 以重新运行 devstack 进程。

您还可以运行 devstack 的 stack.sh 脚本来重新启动它。这次事情会变得更快，因为所有文件都已经可用，但是您将丢失任何以前的设置（图像、密钥对、安全组......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T08:34:28.083

回复用户 1574095：

重新启动后，以 root 身份登录并访问堆栈用户主目录中的目录 devstack。运行堆栈重新加入脚本。它将启用上一个屏幕。此时所有服务都在运行，您可以登录到 Horizo​​n

# android - 当应用程序通过通知进入背景时，不会删除 android 片段

> ID：14960141
> 
> 赞同：0
> 
> 时间：2013-02-19T14:41:29.737
> 
> 标签：android, android-fragments

我正在写一个安卓应用程序。该应用程序有一个主要活动，主要活动有一个包含 5 个选项卡和一个包含 5 个选项卡的选项卡`framelayout`主机`fragments`。

![除了选项卡之外的所有内容都是片段](../Images/44e7f95e6d275864495bf1684d8edbe9.png)

`fragment`单击框架布局中的每个选项卡时`fragment`，将替换为相应的`fragment`.

现在我通过选择一些通知从应用程序中移出。并再次从主屏幕返回应用程序，`activity`从第一个开始。并加载第一个`fragment`（这是不可见的，但可以从日志 cat 中看到`onCreate`调用了主要的 actviy）。但`fragment`可见的是`fragment`我去通知的地方。知道为什么会这样吗？

代码

```
 tabChanged= new OnTabChangeListener() {

        public void onTabChanged(String tabId) {
            // TODO Auto-generated method stub

            tab_Change(tabId);

        }
    };
    mTabHost.setOnTabChangedListener(tabChanged);

void tab_Change(String ss)
    {
     if(ss.equalsIgnoreCase("TRIAL"))
     {
         selected_tab=0;

         View tab_view =mTabHost.getCurrentTabView();
            tab_view.setBackgroundResource(R.drawable.menutab_bg);

         if(arr_frag1==null)
         {
             addTrialTab();

         }
         else
         {
                ShowFragmentByIndex(selected_tab);
         }

     } 
```

`... etc }`

```
public void addTrialTab()
{
    FragmentManager fm =  getSupportFragmentManager();
    FragmentTransaction ft = fm.beginTransaction();
    Fragment frag_first = new TrailMainFrag();
    getSupportFragmentManager().beginTransaction().replace(R.id.fragment_container, frag_first,"TRIAL0").commit();
    AddFragmentid("TRIAL0");
}

 void ShowFragmentByIndex(int index)
    {
        FragmentManager fm =  getSupportFragmentManager();
        String temp_fr = "";
        int size = 0;

        if(index == 0)
        {
            size = arr_frag1.size();
            temp_fr =(String)arr_frag1.get(size-1);
        }
... etc FragmentTransaction ft = fm.beginTransaction();

            Fragment fr = fm.findFragmentByTag(temp_fr);

            if(fr!=null)
            {
            ft.attach(fr);
            }
            ft.commit();
            } 
```

# php - 在php中生成csv文件

> ID：14960142
> 
> 赞同：1
> 
> 时间：2013-02-19T14:41:29.190
> 
> 标签：php, csv

我正在尝试从包含数据的 php 数组生成一个 csv 文件。我能够毫无问题地生成 csv 文件。但是我在文件标题方面有点挣扎。

这是我的代码。

```
public function download_csv_file (){
    $total_call_log=get_overage_report();
    $start_date=date("Y-m-01");
    $end_date=date("Y-m-d");
    $filename="OveragesReport-$end_date";
    $heading="Bill Period From :$start_date To $end_date\n";
    $csv_output=$heading;
    $line = "Comp_ID,CompanyName,Cust_Name,Plan_Type,Plan_Limit,Plan_Cost,Plan_Overage,Total_Usages,Total_Overage_Cost\n";
    $csv_output .= $line;
    $comma = ",";
        foreach ($total_call_log as $call_info) {
                $line1 = NULL;
                $line1 .= $call_info['Comp_ID'];
    $line1 .= $comma.'"'.$call_info['CompanyName'].'"';
                $line1 .= $comma.'"'.$call_info['Cust_Name'].'"';
    $line1 .= $comma.'"'.$call_info['Plan_Type'].'"';
                $line1 .= $comma.'"'.$call_info['Plan_Limit'].'"';
    $line1 .= $comma.'"'.$call_info['Plan_Cost'].'"';
                $line1 .= $comma.'"'.$call_info['Plan_Overage'].'"';
    $line1 .= $comma.'"'.$call_info['total_call_length'].'"';
                $line1 .= $comma.'"'.ceil($call_info['total_overage_cost']).'"';
    $csv_output .= $line1."\n";
           }
    header('Content-type: application/octet-stream');
    header("Content-disposition: attachment; filename=".$filename.".csv");
    print($csv_output);
} 
```

我想要的是，在第一行中只有所有列应该合并，并且标题应该在行的中间。目前，标题($heading) 仅出现在第一列。我怎么能做到这一点？？？？

# iis - ActiveX 组件无法创建对象：“MSXML2.ServerXMLHTTP.4.0”

> ID：14960143
> 
> 赞同：0
> 
> 时间：2013-02-19T14:41:33.573
> 
> 标签：iis, asp-classic

我收到一个错误：

> ActiveX 组件无法创建对象：“MSXML2.ServerXMLHTTP.4.0”

使用这行代码：

```
Set objHTTP = CreateObject("MSXML2.ServerXMLHTTP.6.0") 
```

当谈到 IIS 时，我很天真。这是 IIS 配置问题还是代码有问题？

我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T16:04:42.610

尝试 Server.CreateObject 而不是 CreateObject

CreateObject（没有 Server. 位）用于客户端 vbscript

# ruby - Redis 不会与 Resque Task 一起安装

> ID：14960144
> 
> 赞同：1
> 
> 时间：2013-02-19T14:41:35.797
> 
> 标签：ruby, redis, rvm, resque

我正在尝试使用 Redis 设置 Resque 并遵循文档：

[https://github.com/defunkt/resque#section_Installing_Redis](https://github.com/defunkt/resque#section_Installing_Redis)

但是当我执行 'rake redis:install dtach:install' 我得到：

```
rake aborted!
Don't know how to build task 'redis:install'
/home/max/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `eval'
/home/max/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `<main>' 
```

我还用 sudo 尝试了一切。我不知道如何解决这个问题。我怀疑我的红宝石设置可能有问题？

当我输入“sudo bundle install”时，我得到以下信息：

```
/home/max/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:247:in `to_specs': Could not find bundler (>= 0) amongst [bigdecimal-1.1.0, io-console-0.3, json-1.5.4, minitest-2.5.1, rake-0.9.2.2, rdoc-3.9.4] (Gem::LoadError)
from /home/max/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:256:in `to_spec'
from /home/max/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems.rb:1231:in `gem'
from /home/max/.rvm/gems/ruby-1.9.3-p194/bin/bundle:18:in `<main>'
from /home/max/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `eval'
from /home/max/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `<main>' 
```

似乎我的 ruby​​ 1.9.3-p194 中有一个单独的 ruby​​ 和 gemlist？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:44:32.857

你不应该`sudo`与 RVM 一起使用，尝试 plain `bundle install`，`sudo`丢失用于配置 RVM / Ruby / Rubygems 的环境变量。

还要确保所有步骤都成功，尤其是`git clone`命令

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T16:08:02.123

似乎 Redis 安装任务已被删除：

[https://github.com/defunkt/resque/commit/d17bda1b59857bbcec92bf617ff2d6ac74c78834](https://github.com/defunkt/resque/commit/d17bda1b59857bbcec92bf617ff2d6ac74c78834)

这就是任务 redis:install 显然不起作用的原因。

他们应该更新文档。

# haskell - Haskell 中的结构归纳

> ID：14960148
> 
> 赞同：7
> 
> 时间：2013-02-19T14:41:50.500
> 
> 标签：haskell, induction

以下是结构归纳的定义吗？

```
foldr f a (xs::ys) = foldr f (foldr f a ys) xs 
```

有人可以给我一个 Haskell 结构归纳的例子吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-19T15:01:39.320

您没有指定它，但我假设`::`是指 list concanation 和 use `++`，因为那是 Haskell 中使用的运算符。为了证明这一点，我们将对 进行归纳`xs`。首先，我们证明该陈述适用于基本情况（即`xs = []`）

```
foldr f a (xs ++ ys) 
{- By definition of xs -}
= foldr f a ([] ++ ys)
{- By definition of ++ -}
= foldr f a ys 
```

和

```
foldr f (foldr f a ys) xs
{- By definition of xs -}
= foldr f (foldr f a ys) []
{- By definition of foldr -}
= foldr f a ys 
```

现在，我们假设归纳假设`foldr f a (xs ++ ys) = foldr f (foldr f a ys) xs`成立`xs`并表明它也将成立于列表 `x:xs`。

```
foldr f a (x:xs ++ ys)
{- By definition of ++ -}
= foldr f a (x:(xs ++ ys))
{- By definition of foldr -}
= x `f` foldr f a (xs ++ ys)
         ^------------------ call this k1
= x `f` k1 
```

和

```
foldr f (foldr f a ys) (x:xs)
{- By definition of foldr -}
= x `f` foldr f (foldr f a ys) xs
         ^----------------------- call this k2
= x `f` k2 
```

现在，根据我们的归纳假设，我们知道`k1`并且`k2`是相等的，因此

```
x `f` k1 =  x `f` k2 
```

从而证明了我们的假设。

# android - android（单点触控）绘图应用程序撤消方法无法正常工作

> ID：14960152
> 
> 赞同：4
> 
> 时间：2013-02-19T14:41:59.600
> 
> 标签：android, canvas, path, bitmap, touch-event

我正在开发绘图应用程序，但面临一些撤消问题。编码如下：

```
public class DoodleView extends View 
{
    Context context_new;

    private static final float TOUCH_TOLERANCE = 5;
    private Bitmap bitmap; // drawing area for display or saving
    private Canvas bitmapCanvas; // used to draw on bitmap
    private Paint paintScreen; // use to draw bitmap onto screen
    private Paint paintLine; // used to draw lines onto bitmap

    private Path mPath; 
    private ArrayList<Path> paths = new ArrayList<Path>();
    private ArrayList<Path> undonePaths = new ArrayList<Path>();
    private float mX, mY;

   // DoodleView constructor initializes the DoodleView
   public DoodleView(Context context, AttributeSet attrs) 
   {
       super(context, attrs); // pass context to View's constructor
       this.context_new=context;

       paintScreen = new Paint(); // used to display bitmap onto screen

       // set the initial display settings for the painted line
       paintLine = new Paint();
       paintLine.setAntiAlias(true); // smooth edges of drawn line
       paintLine.setColor(Color.BLACK); // default color is black
       paintLine.setStyle(Paint.Style.STROKE); // solid line

       mPath = new Path();
       paths.add(mPath);

   } // end DoodleView constructor 
```

**OnSizeChanged：**

```
 @Override
   public void onSizeChanged(int w, int h, int oldW, int oldH)
   {
      super.onSizeChanged(w, h, oldW, oldH);
      DoodlzViewWidth = w;     
      DoodlzViewHeight = h;

      bitmap = Bitmap.createBitmap(getWidth(), DoodlzViewHeight, Bitmap.Config.ARGB_8888);

      bitmapCanvas = new Canvas(bitmap);
      bitmap.eraseColor(Color.WHITE); // erase the BitMap with white 
   } 
```

**绘制：**

```
 @Override
   protected void onDraw(Canvas canvas)  
   {
       canvas.drawBitmap(bitmap, 0, 0, paintScreen); 
       // for each path currently being drawn
       for (Path p : paths){canvas.drawPath(p, paintLine);}                
   } 
```

**触摸事件：**

```
 @Override
   public boolean onTouchEvent(MotionEvent event) 
   {          
          float x = event.getX();
          float y = event.getY();

          switch (event.getAction())
          {
              case MotionEvent.ACTION_DOWN:
                  touchStarted(x, y);
                  invalidate();
                  break;
              case MotionEvent.ACTION_MOVE:
                  touchMoved(x, y);
                  invalidate();
                  break;
              case MotionEvent.ACTION_UP:
                  touchEnded();
                  invalidate();
                  break;
          }
          return true;
    } 
```

**触摸开始：**

```
 private void touchStarted(float x, float y) 
   {
       mPath.reset();
       mPath.moveTo(x, y);
       mX = x;
       mY = y;
   } 
```

**触摸移动：**

```
 private void touchMoved(float x, float y) 
   {
       float dx = Math.abs(x - mX);
       float dy = Math.abs(y - mY);
       if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) 
       {
           mPath.quadTo(mX, mY, (x + mX)/2, (y + mY)/2);
           mX = x;
           mY = y;               
       }
   } 
```

**触摸结束：**

```
 private void touchEnded() 
   {
      mPath.lineTo(mX, mY);      
      bitmapCanvas.drawPath(mPath, paintLine);
      mPath = new Path();
      paths.add(mPath);
      Toast.makeText(getContext(), "touchEnded" + paths.size(), Toast.LENGTH_SHORT).show();
   } 
```

**撤消：**

```
public void onClickUndo() 
{ 
   Toast.makeText(getContext(), "before undo button pressed " + paths.size(), Toast.LENGTH_SHORT).show();  
   if (paths.size()>0) 
    { 
       undonePaths.add(paths.remove(paths.size()-1));
       Toast.makeText(getContext(), "after undo button pressed " + paths.size(), Toast.LENGTH_SHORT).show();
       Log.i("UNDOING", "PREPARE INVALIDATE");
       invalidate();
       Log.i("UNDOING", "FINISH INVALIDATE");
    }      
   else Toast.makeText(getContext(), "nothing to undo" + paths.size(), Toast.LENGTH_SHORT).show();  
} 
```

## **问题：**

以上内容来源于网上搜索的其他示例。不知道为什么需要在实现时设置 path.reset() `touchStarted`？

Q1。当我按下撤消按钮时，它会正确显示已`toast`按下撤消按钮，并报告`path.size()`为 0，因此**不会删除**之前立即绘制的线。我真的不知道为什么它是0？它不是已经添加到路径数组中了吗？如何修改代码？

** 代码在采纳 android-developer 的建议后修改！谢谢！！它现在正确显示 path.size()。对不起，愚蠢的错过了！***但是之前绘制的线仍然无法删除？=(**

Q2。当手指在屏幕上移动并立即显示线条时应用程序正常运行，当我按下撤消按钮时，除了上面没有删除上一行之外，线条在按下后进一步绘制到屏幕上直到手指抬起按钮才会显示出来。

**回答 Q2：** 将以下 2 行`touchEnded()`从`touchStarted()`

```
mPath = new Path();
paths.add(mPath); 
```

.

```
 private void touchStarted(float x, float y) 
   {
       mPath.reset();
       mPath = new Path();
       paths.add(mPath);
       mPath.moveTo(x, y);
       mX = x;
       mY = y;
   }

   private void touchEnded() 
   {
       mPath.lineTo(mX, mY);      
       bitmapCanvas.drawPath(mPath, paintLine);// commit the path to our offscreen                   
       Toast.makeText(getContext(), "touchEnded" + paths.size(), Toast.LENGTH_SHORT).show();
   } 
```

谢谢！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T16:22:30.963

## 更新和工作：

1.  删除了油漆paintScreen；
2.  在 onDraw 中不要放`canvas.drawBitmap(bitmap, 0, 0, paintScreen);` 或`canvas.drawBitmap(bitmap, 0, 0, paintLine);`

    ```
    private Bitmap bitmap; // drawing area for display or saving
    private Canvas bitmapCanvas; // used to draw on bitmap
    private Paint paintLine; // used to draw lines onto bitmap   
    private Path mPath; 
    private ArrayList<Path> paths = new ArrayList<Path>();
    private ArrayList<Path> undonePaths = new ArrayList<Path>();
    private float mX, mY;
    private static final float TOUCH_TOLERANCE = 4;    

    // DoodleView constructor initializes the DoodleView

    public DoodleView(Context context, AttributeSet attrs) 
    {
       super(context, attrs); // pass context to View's constructor
       this.context_new=context;
       setFocusable(true);
       setFocusableInTouchMode(true);      

       // set the initial display settings for the painted line
       paintLine = new Paint();
       paintLine.setAntiAlias(true); // smooth edges of drawn line
       paintLine.setDither(true);
       paintLine.setColor(Color.BLACK); // default color is black
       paintLine.setStyle(Paint.Style.STROKE); // solid line
       paintLine.setStrokeJoin(Paint.Join.ROUND);
       paintLine.setStrokeWidth(5); // set the default line width
       paintLine.setStrokeCap(Paint.Cap.ROUND); // rounded line ends

       bitmapCanvas = new Canvas();
       mPath = new Path();            
     } // end DoodleView constructor

     // Method onSizeChanged creates BitMap and Canvas after app displays

     @Override
     public void onSizeChanged(int w, int h, int oldW, int oldH)
     {
        super.onSizeChanged(w, h, oldW, oldH);
        DoodlzViewWidth = w;       
        DoodlzViewHeight = h;           
     } 

     @Override

     protected void onDraw(Canvas canvas) 
     {         
       for (Path p : paths){canvas.drawPath(p, paintLine);}  
       canvas.drawPath(mPath, paintLine);
       Log.i("OnDRAWING", "REACH ON DRAW");        
    } 
    ```

    // START TOUCH: 处理触摸事件 @Override

    ```
     public boolean onTouchEvent(MotionEvent event) 
     {            
          float x = event.getX();
          float y = event.getY();

          switch (event.getAction())
          {
              case MotionEvent.ACTION_DOWN:
                  touch_start(x, y);
                  invalidate();
                  break;
              case MotionEvent.ACTION_MOVE:
                 touch_move(x, y);
                  invalidate();
                  break;
              case MotionEvent.ACTION_UP:
                  touch_up();
                  invalidate();
                  break;
          }
          return true;
    }

     private void touch_start(float x, float y) 
     {
       undonePaths.clear();
       mPath.reset();
       mPath.moveTo(x, y);
       mX = x;
       mY = y;
    }

    private void touch_move(float x, float y) 
    {
        float dx = Math.abs(x - mX);
        float dy = Math.abs(y - mY);
        if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) 
        {
            mPath.quadTo(mX, mY, (x + mX)/2, (y + mY)/2);
            mX = x;
            mY = y;
        }
    }  

    private void touch_up() 
    {
        mPath.lineTo(mX, mY);      
        bitmapCanvas.drawPath(mPath, paintLine);// commit the path to our offscreen  
        paths.add(mPath);
        mPath = new Path(); 
    }

    public void onClickUndo() 
    { 
       if (paths.size()>0) 
        { 
           undonePaths.add(paths.remove(paths.size()-1));
           invalidate();
        }      
       else Toast.makeText(getContext(), "nothing more to undo", Toast.LENGTH_SHORT).show();  
    } 
    ```

# port - 如何通过 SNMP 将端口通道映射到接口

> ID：14960157
> 
> 赞同：1
> 
> 时间：2013-02-19T14:42:06.997
> 
> 标签：port, snmp, channel

如何通过 SNMP 获得此结果？

显示以太通道摘要

```
Group  Port-channel  Protocol    Ports
------+-------------+-----------+-----------------------------------------------
1      Po1(RU)          -        Gi2/3(P)       Gi3/3(P)       
2      Po2(RU)          -        Gi2/4(P)       Gi3/4(P)       
3      Po3(SU)          -        Gi2/2(P)       Gi3/2(P)       
9      Po9(SU)          -        Gi2/12(P)      Gi3/12(P)      
421    Po421(SU)        -        Gi11/1(P)      Gi11/2(P)      Gi11/3(P)      
                             Gi11/4(P)      
422    Po422(SU)        -        Gi11/5(P)      Gi11/6(P)      Gi11/7(P)      
                             Gi11/8(P)      
423    Po423(SU)        -        Te12/1(P) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-11T14:55:01.000

这有点晚了，但是在研究类似的东西时，我发现了[这篇 Cisco 论坛帖子](https://supportforums.cisco.com/message/3957914)。它报告以下对象`IEEE8023-LAG-MIB`：

```
IEEE8023-LAG-MIB::dot3adAggPortSelectedAggID.28 = INTEGER: 337
IEEE8023-LAG-MIB::dot3adAggPortSelectedAggID.82 = INTEGER: 337

IEEE8023-LAG-MIB::dot3adAggPortAttachedAggID.28 = INTEGER: 337
IEEE8023-LAG-MIB::dot3adAggPortAttachedAggID.82 = INTEGER: 337

ifName.28 = Gi2/4
ifName.82 = Gi3/10
ifName.337 = Po1 
```

在相同的环境中，该`show etherchannel summary`命令将导致：

```
+------+-------------+-----------+---------------------------------+
| Group|Port-channel |Protocol   | Ports                           |
+------+-------------+-----------+---------------------------------+
|  1   | Po1(SU)     | LACP      | Gi2/4(P)       Gi3/10(P)        |
+------+-------------+-----------+---------------------------------+ 
```

# python - ipdb 需要 Ctrl+D 来处理命令

> ID：14960161
> 
> 赞同：2
> 
> 时间：2013-02-19T14:42:12.760
> 
> 标签：python, debugging, pdb

我正在使用 ipdb 调试我的 Python 脚本。不知何故，我遇到了问题，例如在输入命令后`n, s, c, b`等。我必须按`Ctrl+D`两次才能让 ipdb 处理命令并继续。

知道是什么原因造成的以及**如何将其关闭**吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T14:53:36.173

**这种影响并不孤立于 ipdb：**

从技术上讲，Ctrl-D 终止传输，并且仅在导致输入缓冲区为空时才引发 EOF。仅当您在输入任何字符之前按 Ctrl-D 时才会发生这种情况。

做这个实验：

```
1\.  At the linux terminal type cat
2\.  press enter once.
3\.  enter letters: foo
4\.  press <Ctrl-D> once, you don't get back to the terminal.
5\.  press <Ctrl-D> again, you are brought back to the terminal. 
```

所以它看起来像这样：

```
user@defiant ~ $ cat
foofoouser@defiant ~ $ 
```

foo 被打印两次，因为您第一次按下它时会刷新您的输入。第二次它被解释为结束程序。

**如何停止这种行为：**

按下 Ctrl-D 时不要连接到 TTY。这意味着不要使用普通的 linux 终端。不确定这是否可能。

**如何在 ipdb 中处理命令**

按下回车键应处理此处视频所示的命令：http: [//www.gregaker.net/2012/apr/05/debugging-python-with-pdb-or-ipdb/](http://www.gregaker.net/2012/apr/05/debugging-python-with-pdb-or-ipdb/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T15:02:19.390

事情就是这样：`Ctrl+D`不会杀死程序，它会在中途减少等待。当您按下 时`Ctrl+D`，您会中断`read()`正在等待输入的进程调用。

# Ctrl+D

`0`大多数程序在读取字节作为输入时都会中止。如果您`Ctrl+D`在输入任何内容之前，您将在输入管道中发送 0 个字节，并可能**导致**程序关闭，这可能会认为没有什么可做的了。这不是**强迫**的。

但是，如果您按下某些键，那么您中断`Ctrl+D`的`read()`呼叫将返回该文本，并且底层程序决定等待下一轮。

这就是为什么，当您`Ctrl+D`再次不输入任何新文本时，您会得到您期望的行为。

# 你的情况

这是可能发生的事情：

1.  您键入一些字符，它们会被缓冲。

2.  你`Ctrl+D`。文本到达`iPdb`，但它没有检测到换行符，因此它等待更多。

3.  又是你`Ctrl+D`。这次`0`bytes 到达`iPdb`，它假设没有更多内容，并处理带有或不带有换行符的文本。

# sharepoint - SharePoint 2013 应用程序到应用程序通信

> ID：14960169
> 
> 赞同：1
> 
> 时间：2013-02-19T14:42:30.413
> 
> 标签：sharepoint, sharepoint-2013

我有两个应用程序[客户端应用程序部件]的要求。用户试图将一些项目从 App1 拖动到 App2，App2 执行一些操作。此功能在 SP 2013 中可用。我添加了两个 SP 2013 文档库应用程序。但是 SP 2013 不允许将项目从 App1 拖动到 App2，但允许将项目从 App1 拖动到 App2[在最近的项目中列出]。我知道在 SP 2013 中无法进行 App-2-App 通信。无论如何要在 SP 2013 中实现此场景吗？

# jquery - jQuery 从 ul li 内的图像中获取 next() 或 prev() 属性 alt 文本

> ID：14960173
> 
> 赞同：0
> 
> 时间：2013-02-19T14:42:40.870
> 
> 标签：jquery, css

我对一些定制的轮播逻辑有一些问题。

我需要在我的页面上处理两个事件。当用户按下左键时，我希望选择器成为活动对象的前一个对象。当用户按下右时，活动项目应该在“活动”项目旁边。

这是html

```
<li><a href='/vaara'><img src="/media/954/150.jpg" alt="blabla"/></a></li> 
<li><a href='/vaara'><img src="/media/954/150.jpg" alt="blabla"/></a></li>
<li><a href='/vaara'><img src="/media/954/150.jpg" alt="blabla"/></a></li> 
```

中间的元素代表“活跃”的元素。

这是我想出的jquery

```
var activeitem = $("#carousel_ul li:eq(3) a img", this).attr('alt'); 
```

现在我只想获取 prev() 或 next() 替代文本。像这样的东西

```
carouselItemLeft.on('click', function () {
                    var connectedInsurace = activeitem.next(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:46:47.683

`eq`是从零开始的，因此选择标记中不存在`:eq(3)`的第三个元素并返回. 是 jQuery 对象的方法而不是 String 对象，并且在您的代码中导致.`li``attr``undefined``next``ReferenceError`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T14:48:09.800

`.next()`看着下一个兄弟姐妹。您当前的上下文是一个图像，您想要的“下一个”图像是一个包含在列表项和锚点中的图像，因此您需要类似：

```
var next = activeItem.closest("li").next().find("img").attr("alt"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T14:44:10.693

您应该命名变量以反映它们的实际含义。`activeitem`不应该存储到`alt`项目的属性，它应该存储实际项目。

假设当前活动`li`元素有一个名为 的类`active`。那么您的代码可能如下所示：

```
carouselItemLeft.on('click', function () {
    var $activeitem = $("#carousel_ul li.active"); // the li, not the img
    var $connectedInsurace = $activeitem.next();
    var alttext = activeitem.find('img').attr('alt'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T14:51:22.337

您最好将 data-* 标签实际分配给活动项目，而不是在项目上使用索引。

所以：

```
carouselItemLeft.on('click', function () {
      var $connectedInsurace = $('[data-active="true"]');
      $connectedInsurace.data("active", false);
      $(this).data("active", true);

     // Get next item
     var $next = $connectedInsurace.next();
}); 
```

# javascript - Javascript：for循环不起作用

> ID：14960176
> 
> 赞同：2
> 
> 时间：2013-02-19T14:42:48.400
> 
> 标签：javascript, loops, for-loop, closures, anonymous

我在这里有这段代码.. 其中变量*num*是 n 方表的维度。目标是输入一个数字并创建一个以数字为维度的表格。

我得到了这段代码，但它没有经过 2 层 for 循环。代码执行后，字符串 *change_text* 就变成了：`<table></table>`

```
 change_text = "<table>";

    for (var i; i<num; i++) {
        change_text = change_text + "<tr>";
        for (var j; j<num; j++) {
            change_text = change_text + "<td> asdf </td>";

            //code for blue cells
        }
        change_text = change_text + "</tr>";
    }

    change_text = change_text+ "</table>" 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T14:44:51.490

您需要初始化迭代器：

```
for(var i = 0; i < num; i++) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-09-10T22:15:05.813

哦，我还注意到 num 没有具体定义。无论您从哪里获得 num ，如果它可能作为字符串传递，请确保使用 parseInt 。`num = parseInt(num);`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-19T14:44:41.787

您需要为循环指定起始值：

```
change_text = "<table>";

    for (var i = 0; i<num; i++) {
        change_text = change_text + "<tr>";
        for (var j = 0; j<num; j++) {
            change_text = change_text + "<td> asdf </td>";

            //code for blue cells
        }
        change_text = change_text + "</tr>";
    }

    change_text = change_text+ "</table>" 
```

目前我会假设`i`并且`j`是`undefined`，所以循环不会去任何地方。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-19T14:44:49.713

你需要初始化 i 和 j ...试试这个：

```
change_text = "<table>";

for (var i=0; i<num; i++) {
    change_text = change_text + "<tr>";
    for (var j=0; j<num; j++) {
        change_text = change_text + "<td> asdf </td>";

        //code for blue cells
    }
    change_text = change_text + "</tr>";
}

change_text = change_text+ "</table>" 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-19T14:44:53.883

您需要初始化 i 和 j，如下所示：

```
for (var i = 0; i<num; i++) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-19T14:44:58.417

未初始化 i，使 i=0

```
 for (var i=0; i<num; i++) {
       //code
    } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-19T14:44:53.673

您忘记了`i=0`/`j=0`初始化。您只声明了变量，并且`undefined`总是`false`从立即中断循环的数字比较中产生。因此，将您的代码更改为

```
change_text = "<table>";
for (var i=0; i<num; i++) {
    change_text = change_text + "<tr>";
    for (var j=0; j<num; j++) {
        change_text = change_text + "<td> asdf </td>";
        //code for blue cells
    }
    change_text = change_text + "</tr>";
}
change_text = change_text+ "</table>" 
```

# javascript - 表的最佳方法与另一个表的折叠行？

> ID：14960177
> 
> 赞同：0
> 
> 时间：2013-02-19T14:42:50.753
> 
> 标签：javascript, jquery, django

所以我正在开发一个 Django 项目，我必须在其中提供一个包含数据的日志列表。我写了它，所以我有两个模型：Log 和 ErrorItem。错误项具有日志的外键。

我想要做的是显示所有日志及其数据的表格，当您单击一行时，它将折叠到另一个包含所有相关错误项及其数据的表格中。

我已经找到了一个解决方案 - 添加一个隐藏的 tr，并使用一个脚本来切换它。但这意味着 erroritem 列表是日志表的一部分——我不需要它，因为两个表不一样。

我知道可能有很多解决方案，所以我不是在寻找直接的代码答案。我只是希望有人能指出我正确的方向——这里最好的方法是什么？是否有一些 jQuery 插件使它变得简单？我应该使用ajax 通过另一个页面动态创建表格吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:05:27.707

我建议您发出 ajax 请求来获取 ErrorItem 数据。为所有日志行加载 ErrorItem 数据并使用 hidden 将是一种矫枉过正。

# python - 计算和过滤两个整数字段

> ID：14960188
> 
> 赞同：0
> 
> 时间：2013-02-19T14:43:20.297
> 
> 标签：python, django, django-models

我有一个包含以下模型的 models.py 文件

```
class Accommodation(models.Model):
... 
```

和

```
PERSONS_CHOICE = [(i,str(i)) for i in range(1,9)]
SUPPLEMENTARY_BED = [(i,str(i)) for i in range(1,3)]

class Unit(models.Model):
    accommodation = models.ForeignKey(Accommodation, related_name='accommodation_unit')
    ...
    persons = models.IntegerField(max_length=2, choices=PERSONS_CHOICE)
    supplementary_bed = models.IntegerField(max_length=1, choices=SUPPLEMENTARY_BED, blank=True, null=True) 
```

住宿可以有 1 到 n 个单元，在我的 views.py 中，我想轻松计算住宿的最大容量，换句话说，我需要计算该住宿所有单元的容量 = 人 + 补充床位并找到最大值。

我还需要使用该值过滤所有住宿，因此 max_capacity >= n 其中 n 是表单提交的值。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:04:24.120

您可以使用 django 聚合，它的工作原理可以在[django doc中找到](https://docs.djangoproject.com/en/dev/topics/db/aggregation/#generating-aggregates-over-a-queryset)

# facebook - Facebook 分享显示的数据与调试器不同

> ID：14960189
> 
> 赞同：2
> 
> 时间：2013-02-19T14:43:21.897
> 
> 标签：facebook, facebook-opengraph

我正在尝试使用 og 元标记设置共享数据。在[调试器](https://developers.facebook.com/tools/debug)中，它按预期显示。特别是第一个图像应该是默认图像。但是当我去尝试分享它时，数据是不同的。有不同的图像，第一个图像不是默认的。

这是网址： http: [//www.stepupforisrael.com/israel-aparttheid-week/](http://www.stepupforisrael.com/israel-apartheid-week/)

这是调试器中的网址： [https ://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.stepupforisrael.com%2Fisrael-apartheid-week%2F](https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.stepupforisrael.com%2Fisrael-apartheid-week%2F)

这是尝试分享时的网址： [https ://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.stepupforisrael.com/israel-aparttheid-week/](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.stepupforisrael.com/israel-apartheid-week/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-23T04:25:13.627

根据 Facebook 开发者网站，您需要为图像添加三个标签，以允许 Facebook 在第一次共享时显示打开的图形图像。标签是：

1.  OG：图像
2.  OG：图像：宽度
3.  OG：图像：高度

请参阅此页面上的“预缓存图像”：[https ://developers.facebook.com/docs/sharing/best-practices#images](https://developers.facebook.com/docs/sharing/best-practices#images)

例子：

```
<meta property="og:image" content="http://sanangeloera.com/sites/default/files/styles/opengraph/public/88113-1460754001-1.jpg?itok=z_0Jqpcu" />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="675" /> 
```

# c# - 在 C# 中，为什么数组上的 Equals() 方法只比较它们的引用，而不是它们的实际内容

> ID：14960191
> 
> 赞同：10
> 
> 时间：2013-02-19T14:43:28.580
> 
> 标签：c#, arrays, reference, equality

在`C#`，为什么方法总是通过比较引用而不是比较内容`Equals()`来检查两者之间的相等性？`arrays`

结果，`Equals()`在其实现中调用的所有方法（很多）都不能按预期使用数组（它不比较内容）：

例子 ：

```
int[] array1 = new[] {1, 2, 3, 4, 5, 6, 7, 8, 9};
int[] array2 = new[] {1, 2, 3, 4, 5, 6, 7, 8, 9};

var u = array1.Equals(array1);                                       //true
var v = array1.Equals(array2);                                       //false
var w = Array.Equals(array1, array2);                                //false
var x = (new List<int[]>(new int[][] { array1 })).Contains(array2);  //false
var y = (new int[][] { array1 }).Any(x => x == array2);              //false
var z = (new int[][] { array1, array2 }).Distinct().Count() == 1;    //false 
```

处理数组（无论类型如何）的一种可能的通用方法可能是：

In `Object.Equals()`: 如果要比较的两种类型都是数组（长度相同），则枚举项目（总是可能的），对于每个项目，调用`Equals()`. 如果这些调用之一返回`false`，则数组不同（返回`false`），否则返回`true`。

注意：我知道`SequenceEqual()`,`memcmp()`和其他比较两个数组的方法。我的问题不是关于如何比较数组。我只是想知道为什么 C`#`设计者不选择在方法中实现全数组比较`Equals()`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T22:15:24.177

尽管不幸的是，Microsoft 的框架类在含义方面有点不一致`Object.Equals(Object)`，但通常`X.Equals(Y)`只有在将任意引用替换为`X`对 的引用`Y`和/或反之亦然时才会如此，不会期望改变相关对象的语义。例如，如果`X`是`String`内容为“Hello”的 a，并且`Y`是具有相同内容的不同字符串，则将对一个字符串的引用替换为对另一个字符串的引用通常不会改变它们的行为。尽管`ReferenceEquals`用于测试两个字符串引用是否引用同一个字符串的代码可能会注意到这个开关，但普通的字符串代码不会。

作为一般规则，没有可变对象与任何其他对象等价，因此对可变对象的引用不应与另一个对象等价，除非两个引用都指向*同一个*对象。对 的两个不同实例的引用与对同一个实例的两个引用之间存在很大差异`int[]`，这两个实例都具有相同的值。虽然`Array`拥有`ItemsEqual`可以测试数组的所有项目或某些项目范围是否匹配的方法会很有帮助，并且有一个`ImmutableArray`带有`Equals`/`GetHashCode`成员的类型将被视为相等的两个不可变数组将是有帮助的相同的内容，无论内容如何，​​不同的可变数组相互比较是不相等的，这是完全正确和正确的。

# php - 使用 php soap 调用远程函数

> ID：14960192
> 
> 赞同：0
> 
> 时间：2013-02-19T14:43:30.630
> 
> 标签：php, zend-framework, soap

我正在尝试在php中使用soap并尝试了很多不同的东西，但仍然没有结果。这是发送短信的服务：我使用了这个代码：

```
 $soapURL = "http://sms.magfa.com/services/urn:SOAPSmsQueue?wsdl" ;
    $soapParameters = Array('login' => "username", 'password' => "password") ;
    $soapFunction = "enqueue" ;
    $soapFunctionParameters = Array('domain' => 'domain', 'messageBodies' =>array("hello world"),'recipientNumbers'=>array('number'),'senderNumbers'=>array('sender')) ;
    $soapClient = new SoapClient($soapURL, $soapParameters);
    $soapResult = $soapClient->__soapCall($soapFunction, $soapFunctionParameters) ; 
```

并得到这个错误：

```
org.xml.sax.SAXException: No deserializer defined for array type {http://www.w3.org/2001/XMLSchema}string 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:52:13.883

NuSoap 和 php 标准 soapclient 之间存在已知冲突。您应该使用解决该问题的特殊版本的 nusoap。 [http://code.google.com/p/nusoap-for-php5/](http://code.google.com/p/nusoap-for-php5/)

# java - 如何将多维 NativeArray 转换为相应的多维 Java 数组？

> ID：14960196
> 
> 赞同：1
> 
> 时间：2013-02-19T14:43:33.540
> 
> 标签：java, javascript, multidimensional-array, casting

如何将多维 sun.org.mozilla.javascript.internal.NativeArray 转换为相应的多维 Java 数组？

```
var verA=4;
var verB= [1234.000000,456.000000,7899.000000,14200.000000];
var arrayC= [
[
["tmp/a111"],
["tmp/a222.png","tmp/a333.png"],
["tmp/a444","tmp/a555.png","tmp/a666.png","tmp/a777.png"]],
[
["tmp/b111.png"],
["tmp/b222","tmp/b333.png"],
["tmp/b444.png","tmp/b555.png","tmp/b666.png","tmp/b777.png"]]}; 
```

我可以转换 verA 但很难转换 verB 和 arraC 这是我的代码。

```
ScriptEngineManager scriptEngineManager = new ScriptEngineManager();
ScriptEngine scriptEngine = scriptEngineManager.getEngineByName("JavaScript");  

scriptEngine.eval(javaScriptStringAbove);
Bindings bindings = scriptEngine.getBindings(ScriptContext.ENGINE_SCOPE);
System.out.println(bindings.keySet());// prints the ver names

Double verA = ((Double)bindings.get("verA")); // this works fine
Object verB[] = ((Object[])bindings.get("verB")); //error
Object verB[][][] = ((Object[])bindings.get("arrayC")); //error 
```

我收到这个错误

java.lang.ClassCastException：sun.org.mozilla.javascript.internal.NativeArray 无法转换为 [Ljava.lang.Object;

# php - 2 日期时间被 1 编辑

> ID：14960197
> 
> 赞同：-1
> 
> 时间：2013-02-19T14:43:35.053
> 
> 标签：php, datetime

好的，我在这里遇到了一个奇怪的问题。我试图计算旧日期和新日期。但是我发现了一个我无法解释的问题。

**设置：**
我今天设置了 2 个新日期。

```
$tempstamp = new DateTime();
$newstamp = new DateTime(); 
```

现在，我使用以下方法将新闻戳编辑为新日期：

```
if ($newstamp ->format('His') > 120000) $newstamp ->modify('+7 day');
else $newstamp ->modify('+4 day'); 
```

效果很好。然而，现在奇怪的部分来了。当我在它之前和之后转储两个值时，tempstamp 会给出一个无法解释的值：

```
case '2':
  $tempstamp = $newstamp;

  dump($tempstamp->format('m-d')); // 02-19 - CORRECT
  dump($newstamp->format('m-d')); // 02-19 - CORRECT

  if ($newstamp->format('His') > 120000) $newstamp->modify('+7 day');
  else $newstamp->modify('+4 day');

  dump($tempstamp->format('m-d')); // 02-26 - FALSE
  dump($newstamp->format('m-d')); // 02-26 - CORRECT 
```

*注意：转储是我们的 var_dumping 方式*

**问题：**
有人可以解释为什么 tempstamp 也被编辑，而我只编辑 newstamp 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T14:46:40.380

[PHP 通过引用而不是按值复制对象](http://php.net/manual/en/language.oop5.cloning.php)。现在`$tempstamp = $newstamp;`制作`$tempstamp`和`$newstamp`指向同一个对象也是如此。为避免这种情况，您需要使用`clone`：

`$tempstamp = clone $newstamp;`

# java - 如何使用 flowlayout（或任何自定义布局）

> ID：14960201
> 
> 赞同：1
> 
> 时间：2013-02-19T14:43:38.190
> 
> 标签：java, android, android-layout

我是 android 新手，正在寻找类似控件的 wrappanel(wpf)。我找到了一个名为 FlowLayout 的类（这个类的代码在我的问题的底部）。我在这个文件夹中添加了这个类：MyApp-src-Layouts-FlowLayout.java

在我的 mylayout.xml 中，我想在另一个布局中使用这个布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <com.myapp.FlowLayout
        android:id="@+id/FlowLayout1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true" >

    </com.myapp.FlowLayout>

</RelativeLayout> 
```

但我收到一个错误：找不到以下类：-com.myapp.FlowLayout（修复构建路径，编辑 XML，创建类）

这是 FlowLayout 类：

```
package Layouts;

import android.content.Context;
import android.util.AttributeSet;
import android.view.View;
import android.view.ViewGroup;

public class FlowLayout extends ViewGroup {

    private int line_height;

    public static class LayoutParams extends ViewGroup.LayoutParams {

        public final int horizontal_spacing;
        public final int vertical_spacing;

        /**
         * @param horizontal_spacing Pixels between items, horizontally
         * @param vertical_spacing Pixels between items, vertically
         */
        public LayoutParams(int horizontal_spacing, int vertical_spacing) {
            super(0, 0);
            this.horizontal_spacing = horizontal_spacing;
            this.vertical_spacing = vertical_spacing;
        }
    }

    public FlowLayout(Context context) {
        super(context);
    }

    public FlowLayout(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        assert (MeasureSpec.getMode(widthMeasureSpec) != MeasureSpec.UNSPECIFIED);

        final int width = MeasureSpec.getSize(widthMeasureSpec) - getPaddingLeft() - getPaddingRight();
        int height = MeasureSpec.getSize(heightMeasureSpec) - getPaddingTop() - getPaddingBottom();
        final int count = getChildCount();
        int line_height = 0;

        int xpos = getPaddingLeft();
        int ypos = getPaddingTop();

        int childHeightMeasureSpec;
        if (MeasureSpec.getMode(heightMeasureSpec) == MeasureSpec.AT_MOST) {
            childHeightMeasureSpec = MeasureSpec.makeMeasureSpec(height, MeasureSpec.AT_MOST);
        } else {
            childHeightMeasureSpec = MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED);
        }

        for (int i = 0; i < count; i++) {
            final View child = getChildAt(i);
            if (child.getVisibility() != GONE) {
                final LayoutParams lp = (LayoutParams) child.getLayoutParams();
                child.measure(MeasureSpec.makeMeasureSpec(width, MeasureSpec.AT_MOST), childHeightMeasureSpec);
                final int childw = child.getMeasuredWidth();
                line_height = Math.max(line_height, child.getMeasuredHeight() + lp.vertical_spacing);

                if (xpos + childw > width) {
                    xpos = getPaddingLeft();
                    ypos += line_height;
                }

                xpos += childw + lp.horizontal_spacing;
            }
        }
        this.line_height = line_height;

        if (MeasureSpec.getMode(heightMeasureSpec) == MeasureSpec.UNSPECIFIED) {
            height = ypos + line_height;

        } else if (MeasureSpec.getMode(heightMeasureSpec) == MeasureSpec.AT_MOST) {
            if (ypos + line_height < height) {
                height = ypos + line_height;
            }
        }
        setMeasuredDimension(width, height);
    }

    @Override
    protected ViewGroup.LayoutParams generateDefaultLayoutParams() {
        return new LayoutParams(1, 1); // default of 1px spacing
    }

    @Override
    protected boolean checkLayoutParams(ViewGroup.LayoutParams p) {
        if (p instanceof LayoutParams) {
            return true;
        }
        return false;
    }

    @Override
    protected void onLayout(boolean changed, int l, int t, int r, int b) {
        final int count = getChildCount();
        final int width = r - l;
        int xpos = getPaddingLeft();
        int ypos = getPaddingTop();

        for (int i = 0; i < count; i++) {
            final View child = getChildAt(i);
            if (child.getVisibility() != GONE) {
                final int childw = child.getMeasuredWidth();
                final int childh = child.getMeasuredHeight();
                final LayoutParams lp = (LayoutParams) child.getLayoutParams();
                if (xpos + childw > width) {
                    xpos = getPaddingLeft();
                    ypos += line_height;
                }
                child.layout(xpos, ypos, xpos + childw, ypos + childh);
                xpos += childw + lp.horizontal_spacing;
            }
        }
    }

} 
```

我在这里做错了什么？

提前致谢，

比约恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:49:34.550

资源 (res) 中的布局文件夹需要一个 xml 文件。Java 类属于 src 文件夹。编译器目前无法处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:50:20.407

FlowLayourClass 的第一行是：`package Layouts;`所以在你的 xml 中你应该这样做：

```
<Layouts.FlowLayoutClass
    android:id="@+id/FlowLayout1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true" >

</Layouts.FlowLayoutClass> 
```

你应该把你的类名放在这里，前面是完整的包名。

# c# - 索引 i 在 BindingSource c# 中为负数或高于行数

> ID：14960207
> 
> 赞同：-4
> 
> 时间：2013-02-19T14:43:52.070
> 
> 标签：c#, datagridview, bindingsource

当我调用事件时，它会抛出一个错误，如 Index (int)i 为负数或高于行数。

我能做些什么.. 。 `public void UserDeletingEvent (object sender, EventArg e) { BindingSource.RemoveAt(e.row.index); }`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:48:25.583

检查`e.Row.Index`是否大于 0，有一些原因可能是 -1，这是`BindingSource`.

```
public void UserDeletingEvent(object sender, EventArg e)
{
    if (e.Row.Index >= 0)
    {
        BindingSource.RemoveAt(e.Row.Index);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:51:19.653

当用户单击标题或背景区​​域时，我发现索引不代表实际行。你必须测试它是一个有效的索引。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-10T19:46:01.060

尝试 pgitems.CurrentPageIndex = PageNumber;

将其设置为无使它对我有用，我为中继器构建pagig，完成了工作

# ios - UITableViewCell 为不同的方向和单元格类型加载自定义 XIB

> ID：14960216
> 
> 赞同：2
> 
> 时间：2013-02-19T14:44:14.380
> 
> 标签：ios, ipad, cocoa-touch, uitableview

我有一个名为 的自定义单元类`ProductiPadCell`，专为 iPad 设计。(iOS 5 SDK)

我想要实现的是根据当前状态（扩展与否）和界面方向加载我的自定义单元格。我在视图控制器中处理这两种情况，问题是我不喜欢它的性能。我没有为下面定义的任何**xib**定义 cellIdentifier，最近我检测到我`tableView`的`cellForRowAtIndexPath:`

`ProductiPadCell`有 4 个不同的 XIB；

```
ProductiPadCell-Regular.xib
ProductiPadCell-Regular-Landscape.xib
ProductiPadCell-Expanded.xib
ProductiPadCell-Expanded-Landscape.xib 
```

产品iPadCell定义；

```
@interface ProductiPadCell : UITableViewCell

@property (weak, nonatomic) IBOutlet UIButton *detailButton;
@property (weak, nonatomic) IBOutlet UILabel *productDescriptionLabel;
@property (weak, nonatomic) IBOutlet TTTAttributedLabel *timeLabel;
@property (weak, nonatomic) IBOutlet TTTAttributedLabel *def1Label;
@property (weak, nonatomic) IBOutlet TTTAttributedLabel *def2Label;
@property (weak, nonatomic) IBOutlet UIImageView *thumbnail;
    // appears in case the cell is expanded
    @property (weak, nonatomic) IBOutlet UIView *detailHolderView;
    @property (weak, nonatomic) IBOutlet UILabel *detailLabel;
// calls a method at the superview's ViewController
- (void)presentDetailViewWithIndex:(NSInteger)index;
@end 
```

TableView 的 cellForForAtIndexPath

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    // table identifier does not matches the xib's cell identifier
    // cell identifier of all 4 xibs are "" (empty)

    static NSString *simpleTableIdentifier = @"Cell";
    BOOL isExpanded = [[[targetDictionary objectForKey:@"isItemExpanded"] objectAtIndex:indexPath.row] boolValue];

    ProductiPadCell *cell = (ProductiPadCell *)[tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];
    if (cell == nil) 
    {
        // Load the required nib for the current orientation and detail selection style
        if (deviceOrientation == UIDeviceOrientationPortrait) {
            if (isExpanded) {
                NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"ProductiPadCell-Regular-Expanded" owner:self options:nil];
                cell = [nib objectAtIndex:0];
                // additional settings for expanded case
            }
            else {
                NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"ProductiPadCell-Regular" owner:self options:nil];
                cell = [nib objectAtIndex:0];
                // additional settings for NOT expanded case                    
            }   
        }
        else {     
            if (isExpanded) {
                NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"ProductiPadCell-Landscape-Expanded" owner:self options:nil];
                cell = [nib objectAtIndex:0];
            }
            else {
                NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"ProductiPadCell-Regular-Landscape" owner:self options:nil];
                cell = [nib objectAtIndex:0];
            }
        }
    }

    // connect cell information with cell IBOutlets
    cell.productDescriptionLabel.text = [[targetDictionary objectForKey:@"key"] objectAtIndex:indexPath.row];
    // ....

    [cell.thumbnail setImage:[UIImage imageNamed:@"thumb_image.jpg"]];
    [cell.thumbnail.layer setCornerRadius:7.0f];
    [cell.thumbnail.layer setBorderWidth:5.0f];
    [cell.thumbnail.layer setBorderColor:[UIColor clearColor].CGColor];
    [cell.thumbnail setClipsToBounds:YES];

    if (isExpanded) {
        cell.detailLabel.text = [[targetDictionary objectForKey:@"key"] objectAtIndex:indexPath.row];

    }

    return cell;
} 
```

除了我目前的方法，我应该怎么做才能加载我的 xib？在每次方向更改和按钮单击中，我都会调用`[tableView reloadData]`并且由于`dequeueReusableCellWithIdentifier:simpleTableIdentifier`找不到 simpleTableIdentifier 它总是会创建新单元格。如果我`simpleIdentifier`为我的单元格 xib 定义，它们在大小写更改（方向更改、扩展状态更改）期间不会更改。

小区标识符的最佳用途是什么？我是否应该使用其他方法`dequeueReusableCellWithIdentifier:simpleTableIdentifier`

我正在等待针对当前情况的任何解决方案，因为我确信一遍又一遍地加载每个单元格并不是最有效的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:57:19.793

这是一种方法，缓存笔尖

综合这个属性

```
@property (nonatomic, strong) id cellNib;

@synthesize cellNib = _cellNib; 
```

制作自定义吸气剂

```
-(id)cellNib
{
    if (!_cellNib) 
    {
        Class cls = NSClassFromString(@"UINib");
        if ([cls respondsToSelector:@selector(nibWithNibName:bundle:)]) 
        {
            _cellNib = [[cls nibWithNibName:@"SomeCell" bundle:[NSBundle mainBundle]] retain];
        }
    }

    return _cellNib;
} 
```

在**viewDidLoad**

```
[self.tableView registerNib:[UINib nibWithNibName:@"SomeCell" bundle:nil] forCellReuseIdentifier:kCellIdentification]; 
```

在**tableView:cellForRowAtIndexPath:**

```
SomeCell *cell = [tableView dequeueReusableCellWithIdentifier:kCellIdentification];
    if (cell == nil) 
    {
        //If nib cache
        if ([self cellNib]) {
            NSArray* viewFromNib = [[self cellNib] instantiateWithOwner:self options:nil];
            cell = (SomeCell *)[viewFromNib objectAtIndex:0];
        }else { //nib not cache
            NSArray *views = [[NSBundle mainBundle] loadNibNamed:@"SomeCell" owner:nil options:nil];
            cell = (SomeCell *)[views objectAtIndex:0];
        }
    } 
```

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T15:38:56.100

您应该使用新方法 registerNib:forCellReuseIdentifier: 来注册您的 nib。您对每个 nib 执行一次，在 viewDidLoad 中是一个好地方。每个 nib 中的单元格应该有一个重用标识符，您可以使用它来注册 nib，并且在您出列时也在 cellForRowAtIndexPath 中。在 cellForRowAtIndexPath 中使用的新方法是 dequeueReusableCellWithIdentifier:forIndexPath:。使用该方法，不需要 if (cell == nil) 子句，系统会在必要时从 nib 中创建一个。

# visual-studio-2008 - 如何添加法国商标符号 (MD)？

> ID：14960218
> 
> 赞同：10
> 
> 时间：2013-02-19T14:44:30.123
> 
> 标签：visual-studio-2008, reporting-services, formatting

我有一份需要以英语或法语输出的报告（基于字段值）。

我已将 Word 文档中的文本复制到 SSRS 包中，除 MD（marque déposée）外，所有法语字符均按应有的方式显示。这应该显示类似于上标“MD”，但它显示为普通脚本“MD”。

是否有一个我可以添加的法语符号库，或者有没有办法对其进行格式化以使其“显示”正确？

我试过了：

*   将 MD 添加到单独的文本框并对其进行格式化，使其看起来正确，并使 2 个文本框重叠，但在打印时，第二个文本框会重新定位到页面上第一个文本框的下方。
*   将法语段落打印为图像，但看起来不如打印的英文页面清晰。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T18:05:57.077

对于这种情况，[unicode](http://en.wikipedia.org/wiki/Unicode_subscripts_and_superscripts#Other_superscript_and_subscript_characters)上标字符可以派上用场。我将链接中的字母 MD 的 unicode 复制到 SSRS 报告中，它没有问题。

例子：

*   MD = ᴹᴰ
*   TM = ᵀᴹ</li>

统一码：

*   M - 7481 - [http://unicodelookup.com/#7481/1](http://unicodelookup.com/#7481/1)
*   D - 7472 - [http://unicodelookup.com/#7472/1](http://unicodelookup.com/#7472/1)
*   T - 7488 - [http://unicodelookup.com/#7488/1](http://unicodelookup.com/#7488/1)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-03-25T18:05:59.977

MC 和 MD 符号在 Unicode 中确实显示为单个上标符号，但不一定在所有字体中，分别为 1F16A 和 1F16B：

*   MC = marque de commerce, Unicode 1F16A

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-11T11:43:34.283

该符号不作为单独的字符存在（与“™”符号不同），因此这本质上是以上标样式呈现一些字母的问题。有几种选择，各有利弊：

1.  使用`<sup>MD</sup>`. 很简单，但会导致渲染效果不佳：行距可能会受到干扰，并且字母会显示为缩小的大写字母，并且笔画宽度会减小，因此它们在风格上与普通字母不同。
2.  通过 CSS使用`<span class=sup>MD</span>`和设置样式，使用相对定位和缩小字体大小。避免了方法 1 的一些缺点，但不是全部。
3.  使用特殊字符，如@BrotherOdin 的回答中所述：修改字母大写字母 M (U+1D39) 和修改字母大写字母 D (U+1D30)，您可以将其插入例如`&#7481;&#7472;`. 它们的主要问题是并非所有字体都包含它们，并且它们的视觉外观可能与您的期望不同——它们实际上是为用于注音符号而不是普通文本而设计的。
4.  使用其浏览器前缀版本并为其设置`<span class=sup>MD</span>`样式`font-feature-settings: "sups"`，并使用具有字母上标字形变体的 OpenType 字体。这是理论上最好的方法，但目前经常失败（部分原因是浏览器支持有限，部分原因是大多数字体都缺乏这种 OpenType 功能）。

# java - 既然 Lucene 4.1 中不存在 TermEnum，您如何从 IndexReader 获取字段？

> ID：14960222
> 
> 赞同：1
> 
> 时间：2013-02-19T14:44:38.527
> 
> 标签：java, lucene

Lucene 4.1 中这个 3.6 代码的等价物是什么：

```
IndexReader ir = IndexReader.open(dir);
TermEnum termEnum = ir.terms(t); 
```

这在我的许多测试用例中都使用

我检查了迁移指南，上面写着

```
TermEnum termsEnum = ...;
while(termsEnum.next()) {
  Term t = termsEnum.term();
  System.out.println("field=" + t.field() + "; text=" + t.text());
}

Do this:

for(String field : fields) {
    Terms terms = fields.terms(field);
    TermsEnum termsEnum = terms.iterator(null);
    BytesRef text;
    while((text = termsEnum.next()) != null) {
      System.out.println("field=" + field + "; text=" + text.utf8ToString());
  }
} 
```

但是字段来自哪里，我如何从我的 IndexReader 中获取字段

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T11:01:12.943

采用

```
MultiFields.getFields(ir) 
```

反而

# c# - 在 wcf 客户端代理中调用方法时偶尔出现异常

> ID：14960224
> 
> 赞同：0
> 
> 时间：2013-02-19T14:44:45.013
> 
> 标签：c#, .net, wcf

有时，在我的 xp 机器上，调用自动生成的客户端代理中的方法时会出现异常。我告诉调试器停止所有 clr 异常。现在有时当我调用以下命令时：

```
public MyStuff.Entities.Package GetPackageById(System.Guid sessionId, int packageId)
    {
        return base.Channel.GetPackageById(sessionId, packageId);
    } 
```

我首先得到一个 InvalidOperationException: Collection was modified... 按 F10 会导致 FileLoadException 并带有以下消息：

> 无法加载文件或程序集“System.Runtime.Serialization.resources，Version=4.0.0.0，Culture=de-DE，PublicKeyToken=b77a5c561934e089”或其依赖项之一。**操作在当前状态下是不合法的。**（来自 HRESULT 的异常：0x80131509）

我确定该服务没有引发异常，因为它会显示为 FaultException。因为它是调用**base.Channel.GetPackageById(sessionId, packageId)时抛出的****InvalidOperationException**我认为这不是我的错？

 **我正在慢慢地想尽办法消除或解决这个异常。

使用安装了 Windows 7 和 .NET 4.5 的开发人员机器时从未发生过这种情况。在 XP 上，这种情况大约会发生 4 次中的 1 次。

服务端的 GetPackageById 如下所示：

```
public Package GetPackageById(Guid sessionId, int packageId)
        {
            try
            {
                return DataProvider.Provider.GetPackagesByKey(packageId,null);
            }
            catch (Exception ex)
            {
                throw new FaultException<MySericeFault>(new MySericeFault(ex));
            }                        
        } 
```

包类如下所示：

```
 [DataContract(IsReference = true)]
    [KnownType(typeof(MyApp.Entities.MachinePackage))]
    public partial class Package: INotifyPropertyChanged
    {
    private DateTime? _outDate;
    [DataMember]
    public DateTime? OutDate
    {
        get { return _outDate; }
        set
        {
            if (_outDate != value)
            {
                _outDate = value;
                OnPropertyChanged("OutDate");
            }
        }
    }

    private int _productId;
    [DataMember]
    public int ProductId
    {
        get { return _productId; }
        set
        {
            if (_productId != value)
            {
                _productId = value;
                OnPropertyChanged("ProductId");
            }
        }
    }
    protected virtual void OnPropertyChanged(String propertyName)
    {
        if (_propertyChanged != null)
        {
            _propertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }
    event PropertyChangedEventHandler INotifyPropertyChanged.PropertyChanged
    {
        add { _propertyChanged += value; } 
        remove { _propertyChanged -= value; }
    }
    private event PropertyChangedEventHandler _propertyChanged;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T16:17:59.793

这更像是一个实验，但太大而不能作为评论！

尝试创建一个执行此代码的新操作合约：

**服务：**

```
public Package GetPackageByIdTest(Guid sessionId, int packageId)
{
    return new Package { ProductId = packageId, OutDate = DateTime.Now };
} 
```

Then create a console application that references your service and write something like this:

**Client:**

```
static void Main(string[] args)
{
    for (int tester = 0; tester < 2000; tester++)
    {
        using (var service = new ConsoleApplication1.ServiceReference1.Service1Client())
        {
            Package result = service.GetPackageByIdTest(Guid.NewGuid(), tester);
            Console.WriteLine(result.ProductId);
        }
    }

    Console.ReadKey();
    return;
} 
```

Then, try running that on one of the known XP machines that fails and see if you get the same issue. If not it would suggest there is something going a miss in your `DataProvider.Provider.GetPackagesByKey(...)` method.**

# php - 来自url的图像的PHP缩略图

> ID：14960233
> 
> 赞同：-2
> 
> 时间：2013-02-19T14:45:15.053
> 
> 标签：php, image, url, thumbnails

我正在使用代码，它首先检查文件夹中的文件名，然后创建 url。在 url 中找到图像文件所在的特殊行。它可以正确显示图像和地址，但是如果图像太大，则需要很长时间。是否可以创建缩略图并显示它而不是图像？谢谢你！

```
require_once('simple_html_dom.php');
$files = scandir('files/');
foreach($files as $file) {
    if($file == '.' || $file == '..') continue;
    $file = basename($file, ".html");
    $url = 'http://address.com/test/'.$file;
    $html = file_get_html($url);
foreach($html->find('img') as $element) {
    if (strpos($element,'address.com') !== false) {
    $url = $element->src;
    echo $url.'</br>';
    echo '<IMG SRC="',$url, '" WIDTH="128" HEIGHT="96" BORDER="0" ALT="" /><br/>';
    }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:29:35.837

你想使用 CSS`clip:rect(50px 218px 155px 82px);`

设置宽度和高度不会减小实际图像大小，因此加载时间仍然会一样长。请参阅这篇关于逐步`div`创建和`css`编码的文章。

[http://www.seifi.org/css/creating-thumbnails-using-the-css-clip-property.html](http://www.seifi.org/css/creating-thumbnails-using-the-css-clip-property.html)

另外作为旁注，没有什么比真正制作 TUMBNAILS 更好的了！有服务侧缩略图生成器，但这是您在不实际制作缩略图的情况下获得的最佳效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-08T11:22:18.437

我写了一篇关于[如何按比例调整上传图像大小](http://www.geekality.net/?p=1564)的博客文章，你应该能够调整[我写的示例](http://samples.geekality.net/view-source.php?file=image-resize/upload.php)中的代码来做你想做的事。

粘贴下面的代码以防我的网站将来死机。

```
<?php

// *snip* Removed form stuff
$image = imagecreatefromjpeg($pathToImage);

// Target dimensions
$max_width = 240;
$max_height = 180;

// Calculate new dimensions
$old_width      = imagesx($image);
$old_height     = imagesy($image);
$scale          = min($max_width/$old_width, $max_height/$old_height);
$new_width      = ceil($scale*$old_width);
$new_height     = ceil($scale*$old_height);

// Create new empty image
$new = imagecreatetruecolor($new_width, $new_height);

// Resample old into new
imagecopyresampled($new, $image, 
        0, 0, 0, 0, 
        $new_width, $new_height, $old_width, $old_height);

// Catch the image data
ob_start();
imagejpeg($new, NULL, 90);
$data = ob_get_clean();

// Destroy resources
imagedestroy($image);
imagedestroy($new);

// Output image data
header("Content-type: image/jpeg", true, 200);
echo $data; 
```

您可能希望将其粘贴在函数中并将其输出更改为文件。然后在 foreach 循环中生成缩略图并链接到缩略图而不是原始缩略图。您还应该检查您是否已经为图像创建了缩略图，这样您就不会为每个图像重复一次。

# perl - JSON解析问题

> ID：14960246
> 
> 赞同：0
> 
> 时间：2013-02-19T14:45:53.423
> 
> 标签：perl

我需要解析 json 响应，但我遇到了这段代码的问题，请帮我解决这个问题。

代码：

```
use strict;
use LWP::UserAgent;
use JSON qw( decode_json );
use Data::Dumper;

my $ua=LWP::UserAgent->new;
$ua->agent("firefox");

my $url="http://t-smos.com:8082/brand";
my $cont=&getContent($url);
my $decoded_json = decode_json( $cont );
#print Dumper $decoded_json;

print "Name: ", $decoded_json->{"name"},"\n";

sub getContent(){

    my $url1=shift;
    my $req=HTTP::Request->new("GET"=>$url1);

    $req->header("X-Service-Token" => "506ecf24abe467aa269a5d12");
    my $res=$ua->request($req);
    my $content=$res->content;
    return $content;
} 
```

我收到错误..

```
Not a HASH reference in line 12\. (print "Name: ", $decoded_json->{"name"},"\n";) 
```

这是引用的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T14:52:12.363

试试这个：

```
use strict;
use LWP::UserAgent;
use JSON qw( decode_json );
use Data::Dumper;

my $ua = LWP::UserAgent->new;
$ua->agent("firefox");

my $url = "http://t-smos.com:8082/brand";
my $response = $ua->get($url);
my $decoded_json = decode_json( $response->decoded_content );
print Dumper $decoded_json; 
```

## 笔记

`Dumper`如果您在解析 Perl HASH 时遇到问题，您应该提供一个示例输出。

# android - 从链接或电子邮件启动 Android 应用程序

> ID：14960248
> 
> 赞同：12
> 
> 时间：2013-02-19T14:46:00.353
> 
> 标签：android, email, launch

我一直在尝试通过电子邮件上的链接或某些社交网站上的帖子来启动应用程序。问题是在某些设备或 android 上的某些 gmail 应用程序中不显示我指定的锚标签或链接。

`intent-filter`我为我的活动设置的内容如下：

```
 <action android:name="android.intent.action.VIEW" />
 <category android:name="android.intent.category.DEFAULT" />
 <category android:name="android.intent.category.BROWSABLE" />
 <data android:scheme="myappname" /> 
```

我正在发送带有这个锚标签的电子邮件

```
myappname://processtobedone/?id=1 
```

它适用于我在华为设备上的电子邮件应用程序，但在设备的默认 gmail 应用程序中，它没有显示它有一个链接，并且在某些设备中，它默认附加 https: 作为标签的后缀并启动浏览器。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-19T15:04:17.807

`<intent-filter>`您可以使用一个标识您控制的 URL的而不是使用自定义方案：

```
<intent-filter>
    <action android:name="android.intent.action.VIEW"/>

    <category android:name="android.intent.category.DEFAULT"/>
    <category android:name="android.intent.category.BROWSABLE"/>

    <data
        android:host="www.this-so-does-not-exist.com"
        android:path="/something"
        android:scheme="http"/>
</intent-filter> 
```

然后，链接`http://www.this-so-does-not-exist.com/something`将在安装了您的应用程序的设备上显示您的应用程序（在选择器中以及 Web 浏览器中），并在没有您的应用程序的设备上显示您的网页。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T14:48:53.770

创建一个真正的链接 (http:) 进入您控制的网站，例如 amazon s3 上的静态网站，使用该网站上的 javascript 检测 android 用户代理，然后重定向到带有锚标记的链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-18T11:33:40.707

```
<activity
android:name=".SplashEmailActivity"
android:screenOrientation="portrait"
android:exported="true"
android:launchMode="singleInstance" android:configChanges="orientation|keyboard|keyboardHidden|screenSize"
android:windowSoftInputMode="stateHidden|adjustResize" >

<intent-filter>

<action android:name="android.intent.action.VIEW" />
<category android:name="android.intent.category.DEFAULT" />
<category android:name="android.intent.category.BROWSABLE" />

<data android:scheme="http"  android:host="your.domain.name"/>

</intent-filter>

</activity> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-06T13:13:37.767

要在设备上触发应用程序链接，例如，您的案例`myappname://processtobedone/?id=1`，最简单的方法是创建一个基本的 html 页面文件（名称为`deeplink_test.html`）并发送到您的电子邮件，然后打开此电子邮件并单击 html 文件，打开Chrome 浏览器并单击锚链接。

```
<html>
    <head>
        <title>DeepLink Test</title>
    <head>
    <body>
        <a href="myappname://processtobedone/?id=1">run deeplink</a>
    <body/>
</html> 
```

# ios - 目标 C - 声明错误 - 请解释

> ID：14960249
> 
> 赞同：8
> 
> 时间：2013-02-19T14:46:05.787
> 
> 标签：ios, objective-c

```
@interface Connections()
{
   static Connections *this;
}
@end 
```

.m 文件中的上述代码引发编译器错误

> 类型名称不允许指定存储类

同时当

> 静止的

关键字被删除它运作良好 - 这很明显。目的：我想要静态和私有的“连接”实例。

为什么会出现这种行为，请帮忙。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-19T14:47:50.130

不能在 Objective-C 类中声明类级变量；相反，您需要将它们“隐藏”在实现文件中，通常给它们`static`-scope 以便它们不能被外部访问。

连接.m：

```
#import "Connections.h"

static Connections *_sharedInstance = nil;

@implementation Connections

...

@end 
```

如果这是一个单例，您通常会定义一个类级别的访问器来在第一次使用时创建单例：

```
+ (Connections *)sharedInstance
{
    if (_sharedInstance == nil)
    {
        _sharedInstance = [[Connections alloc] init];
    }
    return _sharedInstance;
} 
```

（并且您需要在 .h 文件中添加声明）：

```
+ (Connections *)sharedInstance; 
```

# php - php strpos 没有正确评估？

> ID：14960253
> 
> 赞同：0
> 
> 时间：2013-02-19T14:46:18.200
> 
> 标签：php, codeigniter

所以我遇到了与这篇文章类似的问题：[PHP strpos not working](https://stackoverflow.com/questions/8702153/php-strpos-not-working)，但不完全是。

这是我的情况（来自 CodeIgniter 应用程序）：

```
$_submit = strtolower($this->input->post('form-submit'));

if(strpos('save', $_submit) !== FALSE){
    // we have to save our post data to the db
}
if(strpos('next'), $_submit) !== FALSE){
    // we have to get the next record from the db
} 
```

问题是，尽管 form-submit 包含其中一个或两个值，但这些都不会真正触发。form-submit 收到的值是：'save'、'save-next' 和 'skip-next'（我通过查看传入的帖子数据确认了这一点）。现在对于真正的头抓狂，我在同一个代码块中也有这一行：

```
if ($_submit === 'add-comment'){
    //do something
} 
```

这工作得很好。所以 === 按预期工作，但 !== 不是？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T14:53:23.340

你给 strpos 函数提供了错误的参数......

```
$submit = strtolower($this->input->post('form-submit'));

if(strpos($submit,'save') !== FALSE){
    // we have to save our post data to the db
}
if(strpos($submit,'next') !== FALSE){
    // we have to get the next record from the db
} 
```

请查看 php.net 手册中的[strpos](http://php.net/manual/en/function.strpos.php)函数....第一个参数是完整字符串，第二个参数是键字符串

你也可以在这里找到一个小[例子](http://eval.in/10552)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T14:53:46.887

你的论点是`strpos`错误的方式：正如[手册所述](http://uk1.php.net/manual/en/function.strpos.php)`strpos ( string $haystack , mixed $needle )`。`$_submit`在您的代码中，您正在大海捞针中寻找针`'save'`。

所以`if(strpos($_submit, 'save') !== FALSE)`

[当然，在针对 进行测试`'save'`时`'save'`，任何一种方式都可以，这可能会让您感到困惑。]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T14:53:13.470

我建议使用 switch 而不是多个 if 条件。

```
$_submit = strtolower($this->input->post('form-submit'));

switch($_submit) {
    case 'save':
    case 'save-comment': // example for different spelling but same action...
         // we have to save our post data to the db
    break;
    case 'next':
         // we have to get the next record from the db
    break;
    case 'add-comment':
         // we have to save our post data to the db
    break;
    default:
        die('Unknown parameter value');
    break;
} 
```

# javascript - ExtJS Grid 呈现空单元格

> ID：14960255
> 
> 赞同：0
> 
> 时间：2013-02-19T14:46:24.720
> 
> 标签：javascript, gridview, extjs4

![http://i.imgur.com/swGAk2D.png](../Images/23dcdebdb648a1cda8df4d1bf7ef1db5.png)

## 模型

```
Ext.define('XXX.User', {
    extend: 'Ext.data.Model',
    fields: [
        'name',
        'email',
        'nick',
        'mobile',
        { name: 'create_time', type: 'date', dateFormat: 'Y-m-d H:i:s' }
    ]
}); 
```

## 阿贾克斯响应

```
{
    "error": "",
    "errno": 0,
    "success": true,
    "message": "Operation performed successfully",
    "data": [{
        "nick": "muquaddim1",
        "name": "Muquaddim One",
        "id": "141",
        "mobile": "01710000***",
        "email": "muquaddim+1@example.com",
        "create_time": "2012-02-26 14:58:29"
    }]
} 
```

## 店铺

```
var user_store = Ext.create('Ext.data.Store', {
    // destroy the store if the grid is destroyed
    autoDestroy: true,
    autoLoad: true,
    model: 'XXX.User',
    sotreId: 'user-store',
    proxy: {
        type: 'ajax',
        url : 'proxy/user'
    },
    sorters: [{
        property: 'create_time',
        direction: 'ASC'
    }]
}); 
```

## 网格

```
var user_grid = Ext.create('Ext.grid.Panel', {
title: 'List of Users',
    store: user_store,
    columns: [{
        header: 'Nick',
        dataIndex: 'nick',
        editor: {
            allowBlank: false
        }
    }, {
        header: 'Name',
        dataIndex: 'name',
        flex: 1,
        editor: {
            allowBlank: false
        }
    }, {
        header: 'Email',
        dataIndex: 'email',
        width: 160,
        editor: {
            allowBlank: false,
            vtype: 'email'
        }
    }, {
        header: 'Mobile',
        dataIndex: 'mobile',
        width: 100,
        editor: {
            allowBlank: false
        }
    }, {
        xtype: 'datecolumn',
        header: 'Join Date',
        dataIndex: 'create_time',
        width: 90,
        editor: {
            xtype: 'datefield',
            allowBlank: false,
            format: 'Y-m-d H:i:s',
            maxValue: Ext.Date.format(new Date(), 'Y-m-d H:i:s')
        }
    }]
}); 
```

## 控制板

```
var users = Ext.create('Ext.panel.Panel', {
    title: 'Users',
    id: 'user_panel',
    items:[user_grid]
}); 
```

我正在使用 ExtJS 4.0.7。我修改了示例中的代码。示例代码工作正常。但它不起作用。我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:23:43.863

由于您的数据嵌套在您的响应中，因此您需要在商店的代理中配置阅读器。尝试像这样设置您的代理：

```
proxy: {
    type: 'ajax',
    url : 'proxy/user'
    reader: {
        type: 'json',
        root: 'data'
    }
} 
```

# objective-c - 获取在 UITextField 中输入的当前文本长度

> ID：14960257
> 
> 赞同：1
> 
> 时间：2013-02-19T14:46:30.050
> 
> 标签：objective-c

我正在使用 UITextFieldDelegate 但我正在使用的方法：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string 
```

仅在编辑文本之前触发 get 。我需要他们输入字母后的文本长度。使用上面的方法，我总是落后 1 个字母。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T14:50:51.867

试试这个以获得新的长度：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {
    NSUInteger length = [[textField text] length] - range.length + string.length;
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:51:59.877

您需要做的是将一个方法连接到您的 UITextField 以用于“编辑更改” - 事件。然后每次用户输入（或删除）一个字母时，该方法将被立即调用。希望能帮助到你！

# c# - 为什么 RadEditor 解释 html 内容？

> ID：14960262
> 
> 赞同：1
> 
> 时间：2013-02-19T14:46:34.827
> 
> 标签：c#, telerik, radeditor

我使用位于 asp.net 内容管理面板中的 Telerik Rad Editor

```
<telerik:RadEditor ID="RadEditorSummary" runat="server" ToolsFile="~/RadEditorTools.xml" Height="150"></telerik:RadEditor> 
```

当我将以下语句写为内容时：

`<html><body></body><br/><img alt="" src="" /></html>`

并将其插入数据库，看起来和 `<html><body></body><br/><img alt="" src="" /></html>`. （我从 SQL Management Studio 中查看）

但是，当我从 asp.net 面板打开该记录以再次编辑时，RadEditorSummary 会显示它，就像`<html><body></body><br><img alt="" src="" ></html>` 它阻止显示`/`在标签`br`中一样。`img`

怎样才能停止那个操作？

编辑：图像标签和 br 标签一切正常。但是当我写`<xsl:key name="cat1" match="/NewDataSet/Cat1/text()" use="." />`它时显示`<xsl:key name="cat1" match="/NewDataSet/Cat1/text()" use="." >`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T14:55:11.523

如果您禁用了 RadEditor 的 ConvertToXhtml 过滤器，您可能会遇到此问题。它默认启用并确保生成的内容是 XHTML。

您可以在此现场演示中测试过滤器：http: [//demos.telerik.com/aspnet-ajax/editor/examples/builtincontentfilters/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/editor/examples/builtincontentfilters/defaultcs.aspx)

# javascript - Javascript 使 BBcode 正则表达式变得不贪婪

> ID：14960265
> 
> 赞同：1
> 
> 时间：2013-02-19T14:46:37.907
> 
> 标签：javascript, regex, bbcode, phpbb3

感谢另一个问题：[使用 Javascript 从 textarea 中删除 BBcode](https://stackoverflow.com/questions/14956837/removing-bbcode-from-textarea-with-javascript)
我设法创建了这个：http: [//jsfiddle.net/hVgAh/1/](http://jsfiddle.net/hVgAh/1/)

```
 text = $('textarea').val();
while (text.match(/\[quote.*\[\/quote\]/i) != null) {
   //remove the least inside the innermost found quote tags 
   text = text.replace(/^(.*)\[quote.*?\[\/quote\](.*)$/gmi, '\$1\$2');
}
text = text.replace(/\[\/?[^\[\]]+\]/gmi,'');
// now strip anything non-character
//text = text.replace(/[^a-z0-9]/gmi, '');
  char = text.length;
  $('div').text(text); 
```

此代码确实删除了引用 bbcode（以及其他 BBcode），但它只删除了最深的引用的内容，或者它会看到的最后一个 qoute。我认为这样做的原因是正则表达式是贪婪的。但我试图通过添加使其不贪婪，`?`但我没有工作：http: [//jsfiddle.net/hVgAh/2/](http://jsfiddle.net/hVgAh/2/)

我需要删除所有引号及其内容。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T19:55:07.420

无需去除换行符：要匹配*包括*换行符在内的任何字符，请使用`[\s\S]`而不是`.`.

也不需要多行修饰符`m`，它使锚标记匹配一行的开头`^`和`$`结尾而不是整个字符串。

这是一个也可以避免重复`match`调用的解决方案：

```
var t;
while ( t != text ) {
    t = text;
    //text = text.replace( /\[quote(?:(?!\[quote)[\s\S])+?\[\/quote\]/g, '' );
    text = text.replace( /^([\s\S]*)\[quote[\s\S]+?\[\/quote\]/g, '$1');
} 
```

注释掉的行是一个替代版本，应该同样有效。

它不是贪婪匹配，而是使用负前瞻来确保只匹配最深的引用标签。它用括号括起来，`[\s\S]`以便在匹配引号标记之间的每个字符之前向前看，如果`[quote`出现则阻止匹配。

很难说哪个更有效率。

请参阅[JSFIDDLE](http://jsfiddle.net/wj95J/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T15:34:40.970

`m`问题不在于贪婪，而是即使使用修饰符，替换也没有超出换行符。我什么都没有替换换行符，所以整个 textarea 变成了一行，突然间它就像一个魅力。

```
text = $('textarea').val();
text = text.replace(/(\r\n|\n|\r)/gmi, '');
while (text.match(/\[quote.*\[\/quote\]/i) != null) {
    //remove the least inside the innermost found quote tags 
    text = text.replace(/^(.*)\[quote.*?\[\/quote\](.*)$/gmi, '\$1\$2');
}
text = text.replace(/\[\/?[^\[\]]+\]/gmi, '');
text = text.replace(/[^a-z0-9]/gmi, ''); 
```

[http://jsfiddle.net/NaGeL182/dJvuZ/](http://jsfiddle.net/NaGeL182/dJvuZ/)

# c# - mailmerge with visto 如何获取 MailMerge.DataSource.DataFields 的每条记录

> ID：14960266
> 
> 赞同：0
> 
> 时间：2013-02-19T14:46:39.523
> 
> 标签：c#, visual-studio-2008, ms-word, vsto

我有一个需要进行邮件合并的项目，我正在使用 VSTO 执行此操作。我需要检查所有记录`MailMerge.DataSource.DataFields`是否正常。我正在使用此代码执行此操作。

```
 public void verificarPersonas(Word.Document Doc)
    {
        ThisAddIn ThisAddIn = Globals.ThisAddIn;
        List<Personas> miListaPersonas = new List<Personas>();
        decimal nRecords = Doc.MailMerge.DataSource.RecordCount;
        if (nRecords == 0)
        {
            cambiarEstado("Empty db  or documento does'n prepared for mail merge", false);
        }
        else
        {
            string fieldIdentificacion = persParm("Identificacion");
            string fieldNombre = persParm("Nombres");
            string fieldApellido = persParm("Apellidos");
            string fieldEmail = persParm("Email");
            string fieldDireccion = persParm("Direccion");
            string fieldTelefono = persParm("Telefono");

            if (String.IsNullOrEmpty(fieldIdentificacion) || String.IsNullOrEmpty(fieldNombre))
            {
                cambiarEstado("", false);
                return;
            }
            else
            {
                for (int i = 1; i <= nRecords; i++)
                {
                    Doc.MailMerge.DataSource.FirstRecord = i;
                    Doc.MailMerge.DataSource.LastRecord = i;

                    //   Here Allways get the first record
                    dynamic fields = Doc.MailMerge.DataSource.DataFields;
                    //    ________________________________
                    Personas personaActual = new Personas();
                    personaActual.IdPersona = 0;
                    try
                    {
                        personaActual.Identificacion = fields(fieldIdentificacion).value;
                        personaActual.Nombres = fields(fieldNombre).value;
                        personaActual.Apellidos = (String.IsNullOrEmpty(fieldApellido) ? "" : fields(fieldApellido).value);
                        personaActual.Email = (String.IsNullOrEmpty(fieldEmail) ? "" : fields(fieldEmail).value);
                        personaActual.Direccion = (String.IsNullOrEmpty(fieldDireccion) ? "" : fields(fieldDireccion).value);
                        personaActual.Telefono = (String.IsNullOrEmpty(fieldTelefono) ? "" : fields(fieldTelefono).value);

                        miListaPersonas.Add(personaActual);
                    }
                    catch (Exception e)
                    {
                        cambiarEstado(""+e.Message, false);
                        return;
                    }
                }

                string listaPersonasJson = JsonConvert.SerializeObject(miListaPersonas);
                string respuesta = wt.getWebData("Personas", "verificarPersonasVSTO", new { personas = listaPersonasJson });

            }
        }
    } 
```

我的问题是`dynamic fields = Doc.MailMerge.DataSource.DataFields;`总是获得第一条记录。

如何获取`datafields`活动记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:53:47.260

经过几个小时的研究和一些尝试。当你设置FirstRecord和Lastrecord时，数据源的字段集合不会移动指针，它必须使用activerecords移动，使用WdMailMergeActiveRecord枚举，像这样：

```
int nRecords = Doc.MailMerge.DataSource.RecordCount;

for (int i = 1; i <= nRecords; i++)
{
    Doc.MailMerge.DataSource.FirstRecord = i; //It doesn't work 
    Doc.MailMerge.DataSource.LastRecord = i; // it doesn't work
    Doc.MailMerge.DataSource.ActiveRecord = (i == 1 ?   
    Word.WdMailMergeActiveRecord.wdFirstDataSourceRecord :Word.WdMailMergeActiveRecord.wdNextDataSourceRecord);
    Doc.MailMerge.DataSource.ActiveRecord = (i == nRecords ? Word.WdMailMergeActiveRecord.wdLastDataSourceRecord : Doc.MailMerge.DataSource.ActiveRecord);
    dynamic fields = Doc.MailMerge.DataSource.DataFields;
} 
```

# c# - 使用 httpClient.GetAsync(url) 等待并收到错误 System.NullReferenceException 未处理

> ID：14960268
> 
> 赞同：2
> 
> 时间：2013-02-19T14:46:42.213
> 
> 标签：c#, async-await, httpclient

我正在使用`VS 2012`并设定目标`framework 4.0.`

```
public async Task<HttpResponseMessage> GetResponse(Uri url)             
{                 
    this.httpClient.DefaultRequestHeaders.Accept.Clear();                 
    HttpResponseMessage response = await this.httpClient.GetAsync(url);                 
    response.EnsureSuccessStatusCode();             
} 
```

错误：

```
System.NullReferenceException was unhandled
HResult=-2147467261
Message=Object reference not set to an instance of an object.
Source=Microsoft.CompilerServices.AsyncTargetingPack.Net4
StackTrace:
Server stack trace: at System.Web.ThreadContext.AssociateWithCurrentThread(Boolean  setImpersonationContext) at System.Web.HttpApplication.OnThreadEnterPrivate(Boolean setImpersonationContext) at System.Web.LegacyAspNetSynchronizationContext.CallCallbackPossiblyUnderLock(SendOrPostCallback callback, Object state) at System.Web.LegacyAspNetSynchronizationContext.CallCallback(SendOrPostCallback callback, Object state) at System.Web.LegacyAspNetSynchronizationContext.Post(SendOrPostCallback callback, Object state) at System.Runtime.CompilerServices.TaskAwaiter.<>c__DisplayClassa.<OnCompletedInternal>b__0(Task param0)
        Exception rethrown at [0]: at System.Runtime.CompilerServices.AsyncMethodBuilderCore.<ThrowAsync>b__1(Object state)
           at System.Threading.QueueUserWorkItemCallback.WaitCallback_Context(Object state)
           at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
           at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
           at System.Threading.QueueUserWorkItemCallback.System.Threading.IThreadPoolWorkItem.ExecuteWorkItem()
           at System.Threading.ThreadPoolWorkQueue.Dispatch()
           at System.Threading._ThreadPoolWaitCallback.PerformWaitCallback()
      InnerException: 
    ------------------------------------------------- 
```

我已经安装了`"Microsoft.CompilerServices.AsyncTargetingPack`" from `NuGet`，但仍然收到此错误。任何建议。

# wordpress - 使用 wordpress 函数 is_frontpage() 控制超大幻灯片

> ID：14960269
> 
> 赞同：0
> 
> 时间：2013-02-19T14:46:41.990
> 
> 标签：wordpress, supersized

我正在尝试使用此代码控制超大幻灯片

```
<script type="text/javascript">
    function ToggleSlideShow(){
      api.playToggle();         
    }
</script>

</head>
<body>

//Check frontpage
<?php if (is_front_page() ) { ?>

//not frontpage
<?php } else { ?>

            //call script and pause slideshow!
        <script type="text/javascript">
        ToggleSlideShow();
    </script>       

<?php } ?> 
```

但是它不起作用，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T19:25:46.027

我放弃了:-) 相反，我只是使用 if_front_page() 加载了一个不同的标题

# macos - Sublime Text 2 双引号字体样式取决于文件扩展名？

> ID：14960270
> 
> 赞同：0
> 
> 时间：2013-02-19T14:46:44.607
> 
> 标签：macos, sublimetext2

双引号的自动配对是一个非常奇怪的问题[，我认为我已经解决了](https://stackoverflow.com/questions/12521058/sublime-text-2-macosx-double-quote-issue)但仍然存在。问题是对于扩展名为 .php、.html 的文件，自动配对双引号的默认字体样式不可解析。为了向您展示我的意思，请注意`<div>`左侧双引号的字体样式。而对于 .js 和 .css 文件，双引号自动配对具有正确的字体样式，如`<div>`右侧 > 所示。

这一定是某个地方的设置，但我不太了解 Sublime Text2 (Mac OSX)。想法？

![在此处输入图像描述](../Images/67ac84694c359815a5611f6982644332.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T20:02:27.730

在@JamieJag 的巨大帮助下，我解决了这个问题。Shift+" 产生了 Sublime 所称的**“印刷”**引号，而不是可作为 PHP 或 HTML 代码的一部分解析的双引号。

为了解决这个问题，我注释掉了我的 SublimeText2 首选项->键绑定->用户中的所有内容。

我不清楚这些 JSON 对象中的一个或所有是否对有问题的行为负责（尽管我猜第一个 JSON 看起来像违规者）但到目前为止，仅注释掉整个数组就解决了我的问题。

```
/*[

// Auto-pair typographical quotes
{ "keys": ["\""], "command": "insert_snippet", "args": {"contents": "“$0”"}, "context":
   [
      { "key": "setting.auto_match_enabled", "operator": "equal", "operand": true },
      { "key": "selection_empty", "operator": "equal", "operand": true, "match_all": true },
      { "key": "following_text", "operator": "regex_contains", "operand": "^(?:\t| |\\)|”|;|\\}|$)", "match_all": true },
      { "key": "selector", "operator": "equal", "operand": "text", "match_all": true }
   ]
},
{ "keys": ["\""], "command": "insert_snippet", "args": {"contents": "“${0:$SELECTION}”"}, "context":
   [
      { "key": "setting.auto_match_enabled", "operator": "equal", "operand": true },
      { "key": "selection_empty", "operator": "equal", "operand": false, "match_all": true },
      { "key": "selector", "operator": "equal", "operand": "text", "match_all": true }
   ]
},
{ "keys": ["\""], "command": "move", "args": {"by": "characters", "forward": true}, "context":
   [
      { "key": "setting.auto_match_enabled", "operator": "equal", "operand": true },
      { "key": "selection_empty", "operator": "equal", "operand": true, "match_all": true },
      { "key": "following_text", "operator": "regex_contains", "operand": "^\\”", "match_all": true },
      { "key": "selector", "operator": "equal", "operand": "text", "match_all": true }
   ]
},
// Smart quotes before & after word
{ "keys": ["\""], "command": "insert_snippet", "args": {"contents": "“$0"}, "context":
   [
      { "key": "setting.auto_match_enabled", "operator": "equal", "operand": true },
      { "key": "selection_empty", "operator": "equal", "operand": true, "match_all": true },
      { "key": "following_text", "operator": "regex_contains", "operand": "^\\S", "match_all": true },
      { "key": "selector", "operator": "equal", "operand": "text", "match_all": true }
   ]
},
{ "keys": ["\""], "command": "insert_snippet", "args": {"contents": "”$0"}, "context":
   [
      { "key": "setting.auto_match_enabled", "operator": "equal", "operand": true },
      { "key": "selection_empty", "operator": "equal", "operand": true, "match_all": true },
      { "key": "preceding_text", "operator": "regex_contains", "operand": "^\\S", "match_all": true },
      { "key": "selector", "operator": "equal", "operand": "text", "match_all": true }
   ]
}

]*/ 
```

# jquery - jQuery验证：如果输入一个输入，其他应该成为强制性的

> ID：14960271
> 
> 赞同：3
> 
> 时间：2013-02-19T14:46:45.037
> 
> 标签：jquery, jquery-validate

我有一个包含几行 4 个输入字段的表单，它看起来像这样：

```
<tr>
    <td><input name="company01" id="company01" /></td>
    <td><input name="description01" id="description01" /></td>
    <td><input name="costs01" id="costs01" class="sum" /></td>
    <td><input name="file01" id="file01" /></td>
</tr>

<tr>
    <td><input name="company02" id="company02" /></td>
    <td><input name="description02" id="description02" /></td>
    <td><input name="costs02" class="sum" id="costs02" /></td>
    <td><input name="file02" id="file02" /></td>
</tr> 
```

现在，当用户输入行的输入之一（例如成本字段）时，应该强制输入公司和描述（但不是附件）。

文件上传从来都不是强制性的。但是，用户必须至少填写公司、描述和成本行。

有人可以告诉我如何检查是否至少完成了一行？我将如何检查其他两个是否已使用 jQUery 验证插件完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T15:14:01.690

可以使用**所需**的方法和[依赖表达式来完成](http://docs.jquery.com/Plugins/Validation/Methods/required#dependency-expression)

```
....
rules : {
  company01 : { required : "#company02:blank" },
  description01 : { required : "#company01:filled" },
  costs01: { required : "#company01:filled" },
  // now company 2 
  company02 : { required : "#company01:blank" },
  description02 : { required : "#company02:filled" },
  costs02: { required : "#company02:filled" }
}
.... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T16:35:12.000

您可以使用[“依赖表达式”](http://docs.jquery.com/Plugins/Validation/Methods/required#dependency-expression)使一个字段的规则依赖于另一个字段的状态。

这是一个工作示例...

**工作演示：http: [//jsfiddle.net/GMK5V/](http://jsfiddle.net/GMK5V/)**

**jQuery** :

```
$(document).ready(function () {

    $('#myform').validate({ // initialize the plugin
        // other options,
        rules: {
            field1: {
                required: true
            },
            field2: {
                required: '#field1:filled'
            }
        }
    });

}); 
```

**HTML**（也添加`id`到每个`input`）：

```
<form id="myform">
    <input type="text" name="field1" id="field1" />
    <input type="text" name="field2" id="field2" />
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T15:33:48.960

默认情况下，jQuery validate 不会检查禁用的输入。虽然依赖表达式完全符合您在问题中的要求，但我认为值得问问您自己，您的表单是否允许在没有公司名称的情况下进行描述。根据您想要获得的用户体验，最好从禁用描述、成本和文件上传开始，清楚地向用户传达这些字段不能单独使用。然后在 jQuery 验证规则中将它们标记为必需，当它们被启用时，它们是必需的。

诀窍是在添加公司名称时启用它们。我会这样做：

**标记**

```
<!-- add a class to the row for ease of dom traversal -->
<tr class="company-row">
    <!-- add a class to the company name for ease of selection -->
    <td><input class="company-name" name="company01" id="company01" /></td>
    <td><input name="description01" id="description01" /></td>
    <td><input name="costs01" id="costs01" class="sum" /></td>
    <td><input name="file01" id="file01" /></td>
</tr> 
```

**JavaScript**

```
$(document).ready(function() {
    $('.company-name').on('keyup', function() {
        var $this = $(this);
        if($this.val() != '') {
            $this.parents('.company-row').find('input').removeAttr('disabled');
        } else {
            $this.parents('.company-row').find('input').not('.company-name').attr('disabled', 'disabled');
        }
    });
)} 
```

这应该可以解决问题，但我承认我没有测试过我刚写的任何东西。您还可能会遇到以下情况：有人遗漏了公司描述，尝试提交，获得了该字段的验证消息，删除了公司名称并且验证消息不会消失（他们可能不会消失）能够提交表格）。我刚刚忘记了如何解决这个问题，但笼统的方法是调用`.resetform()`整个验证器，这将删除任何验证消息。如果您在提交时调用它，那可能会起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-07T18:41:07.853

没有用 validate 方法解决它。我所做的是，检查一行中的所有输入，看看它们是空的还是都填满的。如果任何行不匹配，我只需创建一个警报对话框。

不是很好，但至少它完成了验证。

# ios - 如何为两个文本框创建两个选择器视图？

> ID：14960273
> 
> 赞同：-1
> 
> 时间：2013-02-19T14:46:52.393
> 
> 标签：ios, cocoa-touch

我已经创建了两个`UITextFields`，并且想为具有不同值`UIPickerViews`的两个创建两个不同的，`textFields`以及如何将个人具体映射`textFields`到每个`pickerView`？有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:57:45.823

怎么样`textField.inputview`，像这样分别为您选择选项。

```
textField.inputView = pickerView1;
textField1.inputView = pickerView2; 
```

如果我在这种情况下编写代码，那么`pickerView`我不会创建两个，而是创建一个`pickerview`并`datasource`为每个更改`textfield`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T15:00:53.260

首先创建两个数组，其中包含要在差异选择器中显示的不同值，我们说 aray1 和 ary2 。

现在将其添加到 .h 文件中

```
 @interface YourViewController : UIViewController<UITextFieldDelegate,UIPickerViewDelegate, UIPickerViewDataSource>
    {

        UIToolbar* keyboardDoneButtonView;
        UIPickerView *pickerView;
        NSString * txtFieldSelected;
        NSArray *ary2;
        NSArray *ary1;
    } 
```

在 .h 文件中

```
 - (void)viewDidLoad

        {
            [super viewDidLoad];
            firstTF.delegate = self;
            secondTF.delegate = self;
            ary1 =[NSArray arrayWithObjects:@"1",@"2",@"3",@"4",@"5",@"6",@"7",@"8", nil];
           ary2 =[NSArray arrayWithObjects:@"a",@"s",@"d",@"f",@"g",@"h",@"x",@"c", nil];
        }

-(BOOL)textFieldShouldBeginEditing:(UITextField *)textField{

        if (textField == firstTF) {
            txtFieldSelected = @"firstTF";
        }else if (textField == secondFF) {
            txtFieldSelected = @"secondTF";
        }
        CGRect pickerFrame = CGRectMake(0, 40, 0, 0);  

        pickerView = [[UIPickerView alloc] initWithFrame:pickerFrame];  
        pickerView.showsSelectionIndicator = YES;  
        pickerView.dataSource = self;  
        pickerView.delegate = self;  

        keyboardDoneButtonView = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];  
        keyboardDoneButtonView.barStyle     = UIBarStyleBlackTranslucent;  
        [keyboardDoneButtonView sizeToFit];  

        NSMutableArray *barItems = [[NSMutableArray alloc] init];

        UIBarButtonItem *cancelBtn = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemCancel target:self action:@selector(cancelButtonPressed:)];  
        [barItems addObject:cancelBtn];  

        UIBarButtonItem *flexSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:self action:nil];  
        [barItems addObject:flexSpace];  

        UIBarButtonItem *doneBtn = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(doneButtonPressed:)];  
        [barItems addObject:doneBtn];  

        [keyboardDoneButtonView setItems:barItems animated:YES]; 
        textField.inputAccessoryView = keyboardDoneButtonView;

        textField.inputView = pickerView;

    return YES;
}

-(NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView
{
    return 1;
}

- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component;
{
    if (txtFieldSelected == @"firstTF") {
        return ary1.count;
    }else if (txtFieldSelected == @"secondTF") {
        return ary2.count;
    }
    return 1;

}

-(void)doneButtonPressed:(id)sender{  
    if (txtFieldSelected == @"firstTF") {
        [firstTF resignFirstResponder];

    }else if (txtFieldSelected == @"secondTF") {

        [secondTF resignFirstResponder];
    }
}  

-(void)cancelButtonPressed:(id)sender{ 

    if (txtFieldSelected == @"firstTF") {
        [firstTF resignFirstResponder];

    }else if (txtFieldSelected == @"secondTF") {
        [secondTF resignFirstResponder];

    }
}  

- (void)pickerView:(UIPickerView *)pickerView didSelectRow: (NSInteger)row inComponent:(NSInteger)component {
    // called when a row is selected

    if (txtFieldSelected == @"firstTF") {

        firstTF.text = [ary1 objectAtIndex:row];
    }else if (txtFieldSelected == @"secondTF") {
        secondTF.text = [ary2 objectAtIndex:row];

    }

}

- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component {
    if (txtFieldSelected == @"firstTF") {
        return [ary1 objectAtIndex:row];
    }else if (txtFieldSelected == @"secondTF") {
        return [ary2 objectAtIndex:row];
    }

    return @"Good Day";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T15:35:01.113

```
 textField1.inputView = pickerView1;
   textField2.inputView = pickerView2;

   pickerView.tag = 1;
   pickerView.tag = 2; 
```

使用`UIPickerView`带标签的委托方法。

# sharepoint - Sharepoint 视图组顺序

> ID：14960274
> 
> 赞同：1
> 
> 时间：2013-02-19T14:46:55.220
> 
> 标签：sharepoint, view

这个应该很简单，我就是想不通！我需要创建一个 Sharepoint 2010 列表视图，该视图按值在列表中出现的次数分组。我可以按字段名称分组，它显示该值出现的次数，我想按该计数对组进行排序。有什么想法/建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:08:57.093

我不认为列表视图可以做到这一点。查看数据视图。

看到这个类似的问题： [http ://social.msdn.microsoft.com/Forums/en-US/sharepointcustomizationlegacy/thread/e3173f1f-d4b1-4baf-af0c-91d96c73ca72/](http://social.msdn.microsoft.com/Forums/en-US/sharepointcustomizationlegacy/thread/e3173f1f-d4b1-4baf-af0c-91d96c73ca72/)

这是关于数据视图的：http: [//office.microsoft.com/en-us/sharepoint-designer-help/create-a-data-view-HA010094804.aspx](http://office.microsoft.com/en-us/sharepoint-designer-help/create-a-data-view-HA010094804.aspx)

# testcase - 如何为调用内部其他方法的方法编写 spock 测试用例

> ID：14960280
> 
> 赞同：3
> 
> 时间：2013-02-19T14:47:19.587
> 
> 标签：testcase, spock

假设我有一个将一些数据填充到列表中的方法，它在内部调用了另外一个方法（我正在独立测试）并将一些数据填充到列表中。这里最好的测试方法是什么？

如何测试外部方法？我是否也应该检查来自内部方法的数据，否则可以只测试由外部方法填充的数据吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T17:02:33.163

给定以下测试类：

```
`class MyTestClass {
    int getAPlusB() { return getA() + getB() }
    int getA() { return 1 }
    int getB() { return 2 }
}` 
```

`我可以编写以下 spock 测试来检查算术是否正确，但也可以`getA()`通过以下`getB()`方式实际调用`getAPlusB()`：`

 ````
def "test using all methods"() { 
    given: MyTestClass thing = Spy(MyTestClass)
    when:  def answer = thing.getAPlusB()
    then:  1 * thing.getA()
           1 * thing.getB()
           answer == 3
} 
```

到目前为止，这是在所有 3 个方法上运行所有代码 - getA 和 getB 被验证为被调用，但这些方法中的代码实际上正在执行。在您的情况下，您正在单独测试内部方法，也许您根本不想在此测试期间调用它们。通过使用 spock spy，您可以实例化被测类的真实实例，但可以选择存根您想要指定返回值的特定方法：

```
def "test which stubs getA and getB"() {
   given: MyTestClass thing = Spy(MyTestClass)
   when:  def answer = thing.getAPlusB()
   then:  1 * thing.getA() >> 5
          1 * thing.getB() >> 2
          answer == 7
} 
````

# android - 从android向数据库发送查询

> ID：14960285
> 
> 赞同：0
> 
> 时间：2013-02-19T14:47:41.833
> 
> 标签：android, mysql, listview

我在 android 上有一个体育列表视图。有没有一种方法可以将带有所选选项的 MySQL 查询发送到**远程**数据库，并在同一张表中提供有关该运动的更多信息

喜欢.... SELECT football FROM table

提前致谢， 扎克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:02:17.920

[您](http://capdroid.wordpress.com/2012/07/10/configuring-and-accessing-mysql-jdbc-driver-on-android-application/)可能想试一试。他们正在使用 jdbc 网桥连接到 mysql。乍一看听起来也不太复杂......似乎只是普通的旧java。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:54:47.977

android 常用的数据库类型是 sqlite.org

看看这个[教程](http://www.vogella.com/articles/AndroidSQLite/article.html)！！

它显示了如何获得与数据库的连接以及如何在那里检索/写入值。

# rest - Servlet API 与 REST API

> ID：14960286
> 
> 赞同：1
> 
> 时间：2013-02-19T14:47:42.410
> 
> 标签：rest, servlets

我正在使用提供两种 API 的 CRM 系统：servlet API 和 REST API，这两种 API 都通过 HTTP。

我曾经通过调用 REST URL 并操作返回的 JSON 或 XML 来与我的 ASP.NET MVC Web 应用程序中的 REST API 集成。但我无法弄清楚 servlet API 是什么意思，这些 API 可以从我的 ASP.NET MVC 应用程序通过 Web 调用，还是应该在 Java 应用程序中调用这些 API？

对不起，如果我的问题对某人来说似乎微不足道。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T17:53:54.973

Java Servlet API 是指一组用于实现服务器端程序的类。主要参与者是[Servlet](http://docs.oracle.com/javaee/5/api/javax/servlet/Servlet.html)：

> servlet 是在 Web 服务器中运行的小型 Java 程序。Servlet 接收和响应来自 Web 客户端的请求，通常通过 HTTP，即超文本传输​​协议。

如果你想要一个非常简单的类比，Servlet 就是 Java 版本的[CGI](http://en.wikipedia.org/wiki/Common_Gateway_Interface)（通用网关接口）。

REST API 是一种通过充分利用 Web 架构来构建应用程序的方法。抛开 REST 的所有细节并大大简化，它基本上是一个 HTTP API。

如果要构建 HTTP API，可以使用 Servlet。因此，您也可以使用 servlet 来构建 REST API，尽管有更好的替代方案（例如[JAX-RS](http://en.wikipedia.org/wiki/Java_API_for_RESTful_Web_Services)），因为 servlet 是一个“低级”组件，没有什么可以保护您免受您需要编写的所有样板代码的影响。

您当然可以从其他客户端（例如，从 ASP.NET MVC）调用构建在 Servlet API 之上的 Java 应用程序。这就是它的目的。出于这个原因，我真的不明白你的 CRM 系统究竟意味着什么 Servlet API 和（一个单独的！？） REST API ......所以也许问问 CRM 提供商？

**编辑：**根据我所读到的有关 ManageEngine ServicedeskPlus API 的内容，我认为这只是提供商选择的一个不幸的名称。

正如我在评论中提到的，当您说[REST](http://en.wikipedia.org/wiki/Representational_state_transfer) API 时，您已经从一开始就提供了一些信息。大多数人在被告知 REST 时都明白您有一些抽象资源，这些资源可以有多种表示形式（JSON、XML 等等），每个资源都由一个 URI 标识，`/customers`即指的是客户资源列表，`/customers/1`是客户，这`/customers/2`是另一个客户，您可以使用它`GET /customers/1`来查找有关客户的详细信息并将`DELETE /customers/1`其删除等。

REST 是与应用程序交互的一种方式，另一种是公开可由客户端调用的操作，例如[SOAP](http://en.wikipedia.org/wiki/SOAP)正在执行的操作。在 REST 成为镇上的新生事物之前，人们使用 SOAP 做事。与访问资源不同，SOAP 专注于访问操作。当您向某人提及 SOAP 时，她知道它是一种可以使用 HTTP 的 POST 来传输消息的协议，每条消息都有一个 XML 有效负载，其中包含要调用的操作名称和调用所需的参数等。

但甚至在 SOAP 和 REST 广为人知之前，人们就意识到他们可以使用表单提交通过 HTTP潜入[RPC调用。](http://en.wikipedia.org/wiki/Remote_procedure_call)基于 HTTP 表单的提交是 ManageEngine Service DeskPlus 中 API 的方法之一。但是基于表单的提交方法（据我所知）没有像 SOAP 或 REST 这样的酷名称......所以也许这就是它以 Servlet API 命名的原因？！（我再次强调这只是服务器实现，在 HTTP 协议的上下文中并不重要）。

因此得出结论：是的，您可以从 ASP.NET，甚至是 Web 浏览器或任何类型的支持 HTTP 的客户端调用 ManageEngine ServicedeskPlus Servlet API。

# android - 在android中下载文件（从本地系统）时出错

> ID：14960289
> 
> 赞同：1
> 
> 时间：2013-02-19T14:47:47.777
> 
> 标签：android

**下载.java**

```
package com.example.download_file;

import java.io.File;

import java.io.FileOutputStream;

import java.io.IOException;

import java.io.InputStream;

import java.net.HttpURLConnection;

import java.net.MalformedURLException;

import java.net.URL;

import android.os.Bundle;

import android.os.Environment;

import android.app.Activity;

import android.view.Menu;

import android.view.View;

import android.view.View.OnClickListener;

import android.widget.Button;

import android.widget.EditText;

public class Download extends Activity {

    @Override

    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_download);

       final Button downloadbutton=(Button)findViewById(R.id.download_button);

       final  EditText text=(EditText)findViewById(R.id.download_filename);

       downloadbutton.setOnClickListener(new OnClickListener()

 {

            @Override

            public void onClick(View v)
 {

       download();

       text.setText("success");

    }

       });

    }

    @Override

    public boolean onCreateOptionsMenu(Menu menu) {

        getMenuInflater().inflate(R.menu.activity_download, menu);

        download();

        return true;

    }

   public void download()

    {

        final  EditText text=(EditText)findViewById(R.id.download_filename);

        final  EditText localname=(EditText)findViewById(R.id.localname);

    try {

        String name=text.getText().toString();

        String sdcardname=localname.getText().toString();

        URL url = new URL(name);

        HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();

        urlConnection.setRequestMethod("GET");

        urlConnection.setDoOutput(true);

        urlConnection.connect();

        File SDCardRoot = Environment.getExternalStorageDirectory();

        File file = new File(SDCardRoot,sdcardname);

        FileOutputStream fileOutput = new FileOutputStream(file);

        InputStream inputStream = urlConnection.getInputStream();

        int totalSize = urlConnection.getContentLength();

        int downloadedSize = 0;

     .
        byte[] buffer = new byte[1024];

        int bufferLength = 0;  

        while ( (bufferLength = inputStream.read(buffer)) > 0 ) {

            fileOutput.write(buffer, 0, bufferLength);

        }

        fileOutput.close();

    } catch (MalformedURLException e) {

        e.printStackTrace();

    } catch (IOException e) {

        e.printStackTrace();

    }

    }

} 
```

1)

**输入： url** = "\192.168.0.103\shared\file.txt"

**错误**：java.net.MalformedURLException：找不到协议：\192.168.0.103\shared\file.txt

2)

**输入：url** =“文件：//192.168.0.103/shared/file.txt”

**错误**：java.lang.ClassCastEXception：org.apache.harmony.luni.internal.net.www.protocol.ftp.FtpURLConnection

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:52:23.603

使用`AsyncTask`看这里：链接[AsyncTask](http://steveliles.github.com/android_s_asynctask.html)可能是这可以帮助你解决你的问题。

# php - 在 PHP 中的 URL API 版本路由

> ID：14960291
> 
> 赞同：0
> 
> 时间：2013-02-19T14:47:51.073
> 
> 标签：php, rest, url-routing

我正在考虑一种在 URL 中有版本的 RESTful API 中路由请求的好方法，例如

```
api.example.com/v2/resource
api.example.com/v3/resource 
```

具体来说，如何将 URL 中的这些主要版本映射到应用程序布局？看起来像这样的东西？

```
application/v2/models
application/v2/controllers
....
application/v3/models
application/v3/controllers
..... 
```

我所知道的最接近的 PHP 实现是使用 Zend Framework 1.x 中的模块，其中结构看起来像这样

```
application/modules/v2/models
application/modules/v2/controllers
....
application/modules/v3/models
application/modules/v3/controllers
..... 
```

但是这些版本并不是真正的模块，所以这感觉有点不对劲。我想知道是否有更好的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:52:29.807

您应该从 URL 中删除 API 版本，而是使用 HTTP`Accept`标头，例如

```
HTTP/1.0 GET /resource
Accept: application/vnd.foo.bar.v1+json 
```

支持 API 版本 2 的客户端将使用：

```
HTTP/1.0 GET /resource
Accept: application/vnd.foo.bar.v2+json 
```

有关 REST API 设计的更多想法，请参阅[设计 HTTP 接口和 RESTful Web 服务](http://www.slideshare.net/Wombert/designing-http-interfaces-and-restful-web-services-dpc2012-20120608)。

# javascript - JQuery Clone() 破坏了我的 html。能够多次复制相同代码的替代方案？

> ID：14960294
> 
> 赞同：1
> 
> 时间：2013-02-19T14:48:03.623
> 
> 标签：javascript, jquery, html

我有一个使用 JQuery UI 的选项卡小部件的页面。其中 2 个选项卡共享同一段 HTML，只不过是一个简单的 HTML 表格：

```
<table border="0" cellpadding="0" cellspacing="0" class="showTable" id="table-person-info">
    <tr>
        <td class="pictureColumn">
            <img alt="Person Photo" src="images/avatar.jpg" id="CurrPersonPhoto" />
        </td>                   
        <td>
            <div id="CurrPersonFullName" class="fullName"></div>
            <b class="popupInfo">Person ID:&nbsp;</b><div id="CurrPersonID" class="popupInfo"></div><br />
            <b class="popupInfo">Hire Date:&nbsp;</b><div id="CurrHireDate" class="popupInfo"></div><br />
            <b class="popupInfo">Tenure:&nbsp;</b><div id="CurrTenure" class="popupInfo"></div><br />
            <b class="popupInfo">Location:&nbsp;</b><div id="CurrLocation" class="popupInfo"></div>
        </td>
        <td style="width:179px;">
            <img src="edit.png" alt="Edit" />
            <img src="log_activity.png" alt="Log activity" />
        </td>
    </tr>
</table> 
```

该表在 ajax 调用后得到更新，为了避免重复相同的代码两次，我尝试使用 JQuery clone() 函数将其注入到需要显示它的选项卡上的 2 个位置。我用这个电话：

```
$("#table-person-info").clone(false).find("*").removeAttr("id").appendTo($("#person-Info-View")); 
```

将 clone 方法的参数从 true 更改为 false 似乎没有任何区别。我发现这段代码完全将 html 代码破坏为如下所示：

```
 <table border="0" cellpadding="0" cellspacing="0" class="showTable">    </table>
    <tr>
        <td class="pictureColumn">
        </td>                   
        <td>
        </td>
        <td style="width:179px;">
            <img src="edit.png" alt="Edit" />
            <img src="log_activity.png" alt="Log activity" />
        </td>
    </tr>
<img alt="Person Photo" src="images/avatar.jpg" />
<div id="CurrPersonFullName" class="fullName"></div>
<b class="popupInfo">Person ID:&nbsp;</b><div class="popupInfo"></div><br />
<b class="popupInfo">Hire Date:&nbsp;</b><div class="popupInfo"></div><br />
<b class="popupInfo">Tenure:&nbsp;</b><div class="popupInfo"></div><br />
<b class="popupInfo">Location:&nbsp;</b><div class="popupInfo"></div> 
```

对 JQuery 文档的快速回顾表明，这实际上是预期的，我引用：

> 使用 .clone() 克隆未附加到 DOM 的元素集合时，不能保证它们插入 DOM 时的顺序

既然如此，那我还有什么选择呢？我是否愿意复制表格并在每次选择选项卡时手动更新值？我的意思是，只有两次，我想这并不难，但我想知道是否有更优雅的选择，或者我是否没有采用正确的方法来使用 JQuery 重用 html 代码。

很抱歉发了这么长的帖子，并在此之前感谢您提出任何建议！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T14:54:28.610

当您执行此代码时：

```
$("#table-person-info").clone(false)
    .find("*").removeAttr("id")
    .appendTo($("#person-Info-View")); 
```

您已经使用 进入了一个新选择`find`，因此您将附加所有带有已删除 ID 的元素，而不是原始父表。试试这个：

```
$("#table-person-info").clone(false)
    .find("*").removeAttr("id").end()
    .appendTo($("#person-Info-View")); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-19T14:56:12.443

我知道这可能需要更长的时间来编写，不知道您是否使用自己的对象，但是您是否考虑过在您的场景中使用 jQuery 模板？您可以很容易地将模板绑定到一个对象，然后在后端更新该对象，这将自动更新您的表，并且比每次更新时克隆整个表所需的处理要少得多。

# c# - 比较器 .Default 属性

> ID：14960296
> 
> 赞同：6
> 
> 时间：2013-02-19T14:48:19.357
> 
> 标签：c#

这个问题来自这个[小奇迹：`Comparer<T>.Default`](http://geekswithblogs.net/BlackRabbitCoder/archive/2011/01/20/c.net-little-wonders-comparerlttgt.default.aspx) 。我想知道作者在该行中写了什么：

> 如果您要比较的类型已经实现`IComparable<T>`，或者该类型是`System.Nullable<T>`T 实现的位置，则**System.Collections.Generic 命名空间** `IComparable`中有一个类，**它公开了一个名为 Default 的属性，它将创建一个单例，表示以下项的默认比较器那种。****`Comparer<T>`**

例如：

我有一堂课：

```
class Foo : IComparable<Foo> { ... }
public class FooComparer : IComparer<Foo> { ... } 
```

比较器类实现为`public abstract class Comparer<T> : IComparer, IComparer<T>`. 我的问题是 Default 属性的整体工作原理，它的作用以及它是如何工作的？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T14:52:24.190

`Comparer<T>.Default`不使用您的`FooComparer`课程。它只是返回内部类的一个实例`GenericComparer<T>`。
此类具有`T`必须实现的约束，因此它可以简单地将对它的方法`IComparable<T>`的调用委托给它传递的实例的方法。`Compare``Compare`

像这样的东西：

```
internal class GenericComparer<T> : Comparer<T> where T : IComparable<T>
{
    public override int Compare(T x, T y)
    {
        if (x != null)
        {
            if (y != null)
                return x.CompareTo(y);
            return 1;
        }
        else
        {
            if (y != null)
                return -1;
            return 0;
        }
    }

    // ...
} 
```

# python - 将整数添加到函数的输出

> ID：14960299
> 
> 赞同：0
> 
> 时间：2013-02-19T14:48:36.950
> 
> 标签：python

我正在尝试构建一个函数，该函数在每次调用时生成一个随机数并将其转换为一个常量整数，我的函数如下所示：

```
def offsetradf():
    global x
    x =  random.randint(0,7)
    return x
y = offsetradf() 
```

以及稍后在代码中调用它时：

```
elif string.find(line,'nslice')==1:
       nslice = nslice+y
       output_file.write(' nslice = '+str(nslice)+'\n') 
```

我收到的错误信息是：

```
Traceback (most recent call last):
File "./rungenesis.py", line 23, in <module>
nslice = nslice+offsetradf
TypeError: unsupported operand type(s) for +: 'int' and 'function' 
```

任何帮助都是极好的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:51:45.303

阅读错误:)

```
nslice = nslice+offsetradf
TypeError: unsupported operand type(s) for +: 'int' and 'function' 
```

`nslice`是一个`int`。`offsetradf`是一个函数——你不是在调用它，你只是在命名它。这里的所有都是它的。

正确成语：

```
nslice = nslice + offsetradf() 
```

注意`()`.

# maven - 在 Maven 风格的项目布局中找不到 lobos.migrations

> ID：14960301
> 
> 赞同：2
> 
> 时间：2013-02-19T14:48:43.233
> 
> 标签：maven, clojure, leiningen

我无法让 Clojure 的[lobos](https://github.com/budu/lobos)数据库迁移库与 maven-clojure-plugin 和 Maven 样式的项目结构一起使用。Lobos 在命名空间中寻找数据库迁移`lobos.migrations`。如果我布局项目 Leiningen 风格：

```
src/
  lobos/
    migrations.clj 
```

lobos`lobos.migrations`在运行时正确找到，当通过`lein`. 但是，如果我以 Maven 风格布置项目：

```
src/
  main/
    clojure/
      lobos/
        migrations.clj 
```

并使用`maven-clojure-plugin`运行相同的测试，lobos 不再找到`lobos.migrations`. 我认为这是一个问题，但如果我通过 leon 运行`clojure-maven-plugin`，我有同样的问题（lobos 没有找到），适当地设置源路径：`lobos.migrations``project.clj`

```
:source-paths      ["src/main/clojure"] 
```

如果我`lobos/`回到下面`src/`并添加`src/`为源路径：

```
:source-paths      ["src" "src/main/clojure"] 
```

然后 lobos`lobos.migrations`再次正确找到。

我想使用 Maven 风格的项目布局（最终使用 maven-clojure-plugin）。我怎样才能帮助 lobos 找到`lobos.migrations`？我哪里出错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T04:57:15.927

该`lobos.migration/*src-directory*`变量指示用于查找*源*的源根`*migrations-namespace*`。如果`lobos.migration/*reload-migrations*`为 true（默认值），则`lobos.migrations`在此源目录中查找迁移命名空间。默认值为`src/`，因此需要将其重新绑定到`src/main/clojure`才能使用 Maven 样式的目录结构。

另一个值得注意的问题：当从 JAR（即不是从源代码）运行时，您还必须禁用迁移命名空间的重新加载：

```
(binding [lobos.migration/*reload-migrations* false]
   ;; run migration
  ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T20:35:26.237

您需要更改动态变量`lobos.migration/*migrations-namespace*`。这记录在这里：[https](https://github.com/budu/lobos#migrations) ://github.com/budu/lobos#migrations 。

# ruby - 迁移到 Rails 3.2 - ActionController::Base:Class 的未定义方法 'session='

> ID：14960304
> 
> 赞同：2
> 
> 时间：2013-02-19T14:48:59.600
> 
> 标签：ruby, ruby-on-rails-3

根据所有这些优秀的参考资料，我将旧的 Ruby (1.8.7) 和 Rails (2.2.2) 应用程序迁移到 Ruby (1.9.3) 和 Rails (3.2.12)：

[Rails 升级脚本](http://github.com/rails/rails_upgrade.git)
[Rails 3 迁移博客](http://blog.wolfman.com/articles/2010/12/17/upgrading-a-rails-2-dot-2-2-app-to-rails-3)
[引导 Rails 3 应用程序](http://gregmoreno.wordpress.com/2010/08/11/rails-3-upgrade-part-1-booting-the-application/)

我能够启动应用程序的 Rails 服务器，但是当我通过浏览器访问应用程序时，然后是 BLAMMO！我收到服务器错误：

**！！处理请求时出现意外错误：ActionController::Base:Class 的未定义方法 `session='**

当我 grep -r for "session =" 我得到：

```
/var/www/vendor_sandbox/config/application.rb:    config.action_controller.session = {
/var/www/vendor_sandbox/config/environment.rb.rails2:  config.action_controller.session = {
/var/www/vendor_sandbox/destroy/config/environment.rb:  config.action_controller.session = {
/var/www/vendor_sandbox/generate/config/environment.rb:  config.action_controller.session = { 
```

根据对该错误的 Google 搜索，这是 Rails 2 中的一个老问题，所以我想知道我是否在迁移过程中遗漏了某些内容，或者这是其他问题。谢谢

这是我的终端会话活动：

```
root@partners:/var/www/vendor_sandbox# ruby -v
ruby 1.9.3p385 (2013-02-06 revision 39114) [i686-linux]
root@partners:/var/www/vendor_sandbox# rails --version
Rails 3.2.12
root@partners:/var/www/vendor_sandbox# rails s
=> Booting Thin
=> Rails 3.2.12 application starting in development on     http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server

>> Thin web server (v1.5.0 codename Knife)
>> Maximum connections set to 1024
>> Listening on 0.0.0.0:3000, CTRL+C to stop 
```

**然后，我从浏览器中点击应用程序并：**

```
!! Unexpected error while processing request: undefined method `session=' for ActionController::Base:Class 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T16:24:19.407

尝试`config.session_store`改用。您必须指定商店类型，很可能是`:cookie_store`. 这是一个示例，说明它在您的`application.rb`

```
config.session_store(:cookie_store, {:key => foo, :secret => bar}) 
```

无论你有什么选择，都`session=`将进入那里的哈希值。

# php - $_POST *not* 中的值可以是字符串吗？

> ID：14960305
> 
> 赞同：6
> 
> 时间：2013-02-19T14:49:01.713
> 
> 标签：php, httpwebrequest, request

在 PHP 中，来自全局 $_POST 数组的值可以是数组或字符串以外的其他东西吗？

目标是不必检查脚本中的所有内容是否都不是数组或字符串。如果我知道变量的类型，我就不必做一些奇怪的验证。如果我期望一个字符串，我不必将所有内容都转换为字符串以确保它是一个。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T14:50:53.647

```
$_POST["key"] = true;

var_dump($_POST["key"]); // bool(true) 
```

环境设置的值虽然是字符串。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-19T14:56:33.053

根据文档[http://php.net/manual/en/reserved.variables.post.php](http://php.net/manual/en/reserved.variables.post.php)

```
An associative array of variables passed to the current script via the HTTP POST method. 
```

所以发送的所有数据都在关联数组中，在键值对中。有数字（int、float 等）、字符串、数组（数字或字符串）和对象数据类型。

使用排除规则我们可以从支持的数据类型中删除对象，剩下的就是字符串、数字和数组。

现在，如果您看到表单，输入字段正在接受字符串，没有迹象表明输入字段中输入的值是数字或字符串。所以为了安全起见，所有发布的值都是字符串。元素数组也有字符串值。

当您在 $_POST 中获取值时，它只是一个数组，您可以随时覆盖它

```
$_POST['username'] = 1;
var_dump($_POST['username']); // int (1) 
```

我希望这有点道理

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-19T14:51:53.743

你可以把它转换成你想要的任何东西^^

```
intval($_POST['INTEGER']);
or simply
 (int)$_POST['int'] 
```

# ios - 从调用者视图设置 UITextField 的文本

> ID：14960306
> 
> 赞同：0
> 
> 时间：2013-02-19T14:49:13.207
> 
> 标签：ios, objective-c, uiviewcontroller

我在一个视图上有一个条形码扫描仪，在用户扫描条形码后，应用程序将他们带到另一个视图（BoilerDetails），其中条形码文本字段已预先填写。

我知道 viewcontroller 在没有出现时为空，我无法直接更改 UITextField 文本。到目前为止，这给了我一个错误。我该如何解决这个问题？

BarcodeScannerViewController.m

```
BoilerDetailsViewController *viewCtrl = [[BoilerDetailsViewController alloc] initWithNibName:nil bundle:nil];
[viewCtrl setBarcode:strBarcode];
[self.navigationController pushViewController:viewCtrl animated:YES]; 
```

BoilerDetailsViewController.h

```
@interface BoilerDetailsViewController : SubViewControllerBase
@property (retain, nonatomic) NSString *barcode;
@property (retain, nonatomic) IBOutlet UITextField *barcodeField;
- (void)setBarcode:(NSString*)strBarcode;
@end 
```

BoilerDetailsViewController.m

```
-(void)setBarcode:(NSString *)strBarcode
{
    self.barcode = strBarcode;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    [_barcodeField setText:self.barcode];
    // Do any additional setup after loading the view from its nib.
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T14:53:13.943

```
-(void)setBarcode:(NSString *)strBarcode
{
    self.barcode = strBarcode;
} 
```

我认为这些字符串给你无限循环。根据您的逻辑，您应该使用：

```
-(void)setBarcode:(NSString *)strBarcode
{
    self.barcodeField.text = strBarcode;
} 
```

或者

```
@syntesize barcode = _barcode;

-(void)setBarcode:(NSString *)strBarcode
{
    [_barcode autorelease];
    _barcode = [strBarcode retain] //in case of no ARC
} 
```

取决于您想要什么（存储字符串或设置标签）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:54:11.933

您只需`barcode`在 ViewDidload 中合成并编写此代码`[_barcodeField setText:barcode];`即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T14:58:03.990

首先，这是错误的

```
-(void)setBarcode:(NSString *)strBarcode
{
    self.barcode = strBarcode;
} 
```

`self.barcode = strBarcode;`本身调用setter。

取决于你写的 ios 版本：

```
//for ARC environment
-(void)setBarcode:(NSString *)strBarcode
{
    _barcode = strBarcode;
}
//since default association in ARC is strong 
```

在此之前`@synthesize barcode = _barcode;`

```
//and for non-ARC environment, since your property is retain type
-(void)setBarcode:(NSString *)strBarcode
{
    if (_barcode != barcode) {
        [_barcode release];
        _barcode = [barcode retain];
    }
} 
```

你会没事的。

# php - 如何在 CodeIgniter 中将 $_GET/$_POST 参数转换为 URL 段？

> ID：14960307
> 
> 赞同：0
> 
> 时间：2013-02-19T14:49:12.610
> 
> 标签：php, codeigniter

很简单。我怎样才能转换这个：

```
index.php/person/byAge?age=5 or index.php/person/byAge (with $_POSTed data) 
```

对此：

```
index.php/person/byAge/5 
```

我正在使用 CodeIgniter 2.1.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:08:00.310

对于您的特定问题，您不需要编辑 .htaccess （如果您愿意仍然在您的 URL 中包含 index.php）。[在这里](http://ellislab.com/codeigniter/user-guide/libraries/uri.html)查看 Codeigniter uri 类

他们的文档是关于 IMO 框架的最好的东西，并且会比我更好地解释这些。

特别注意以下命令：

```
$this->uri->segment(); 
```

此函数允许您返回 url 的特定段。因此，在您的情况下，您将调用人员控制器的 byAge 方法。调用 $this->uri->segment(3); 将返回 5。

# jquery-mobile - Openlayers + Require.js + Backbone.js + jQueryMobile -> 没有加载瓷砖

> ID：14960308
> 
> 赞同：1
> 
> 时间：2013-02-19T14:49:12.663
> 
> 标签：jquery-mobile, backbone.js, requirejs, openlayers, tiles

我已经建立了一个使用 require.js、backbone.js、openlayers（移动单文件构建）和 jquery mobile 的项目。现在我在正确显示地图时遇到了一些问题，因为没有加载瓷砖。我已经弄清楚如何使用 require.js shim 参数加载 openlayers api：

```
shim: {
    "backbone": {
        "deps": [ "underscore", "jquery" ],
        "exports": "Backbone"
    },
    "openlayers": {
        "exports": "OpenLayers"
    }
} 
```

在 MapView.js 文件中，我创建了一个新的 openlayers 地图：

```
define([ "jquery", "backbone", "openlayers" ], function( $, Backbone, OpenLayers ) {
var MapView = Backbone.View.extend( {

    // The View Constructor
    initialize: function() {
        console.log(3);

        var mapOptions = {
                div: this.el,
                maxExtent: new OpenLayers.Bounds(-174,18.4,-63.5,71),
                maxResolution: 0.25,
                projection: "EPSG:102100",
                theme: "/css/theme/default/style.css",
                layers: [
                    new OpenLayers.Layer.OSM("OpenStreetMap", null, {
                        transitionEffect: 'resize'
                    })
                ]};
        this.map = new OpenLayers.Map( mapOptions );
    },

    render: function() {
        console.log(4);
    }
} );
return MapView;
} ); 
```

现在地图部分工作。我可以看到地图左上角的 openlayers 添加的缩放按钮，但没有加载任何瓷砖。Firebug 告诉我，甚至没有对瓷砖的请求。目前我不知道问题可能是什么。

为了完成，这是我的骨干路由器：

```
define([ "jquery", "backbone", "../models/Map", "../views/Map" ], function( $, Backbone, MapModel, MapView ) {

var Router = Backbone.Router.extend( {
    initialize: function() {
        console.log(2);
        this.mapView = new MapView( { el: "#mapView" } );
        Backbone.history.start();
    },

    // Backbone.js Routes
    routes: {
        "": "home",

    },

    // Home method
    home: function() {
        console.log(0);
        $.mobile.changePage( "#map" , { reverse: false, changeHash: false } );
    },
});

return Router;

} ); 
```

和页面 html

```
<!doctype html>
<html>
<head>
    <link type="text/css" rel="stylesheet" href="/css/jquerymobile.css" />
    <script src="/js/libs/require-min.js" data-main="/js/mobile"></script>
    <style>
        #mapView {
        height: 500px;
        width: 500px;
        }
    </style>
</head>

<body>
    <div id="map" data-role="page" data-title="Map">
        <div data-role="header">
            <h1>Map</h1>
        </div><!-- /header -->

        <div data-role="content">
            <div id="mapView"></div>
        </div><!-- /content -->

        </div>
</body>
</html> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T07:20:27.170

我现在想通了。我所要做的就是添加`this.map.zoomToMaxExtent();`. 由于某种原因，地图无法计算出图块的正确可见范围。

# git - 如何使用 TortoiseGit 或 bash 合并单独的文件

> ID：14960310
> 
> 赞同：1
> 
> 时间：2013-02-19T14:49:20.370
> 
> 标签：git, tortoisegit

例如，我在“显示日志”选项卡中查看 2 个分支之间的所有更改，我只需要合并其中的一些更改。怎么做？

# c# - 在 linq to sql 中插入子记录后刷新实体

> ID：14960325
> 
> 赞同：2
> 
> 时间：2013-02-19T14:49:53.563
> 
> 标签：c#, linq-to-sql

我正在插入与现有父记录关联的子记录。如何刷新父记录以显示所有记录，包括新插入的子记录？

`context.Refresh(RefreshMode.OverwriteCurrentValues, entity)`不工作。

我尝试的更完整示例：

```
Location newLocation = Json.deserialize<Location>(json);
if (newLocation != null) {
    IEnumerable<string> zipCodes = Regex.Split(newLocation.zipCodes, @"[\s,;]+");

    // this verifies the new zipcodes against a table of all US zipcodes and returns matches 
    var newLocationZipCodes = _zipCodeRepository.match(zipCodes).Select(item => new LocationZipCode { idLocation = newLocation.id, state = item.state, zipcode = item.zipcode });

    // get the parent entity
    var domainLocation = _unitOfWork.locationRepository.getFirst(l => l.id == newLocation.id);

    // insert child entities
    if (newLocationZipCodes.Any()) {
        _unitOfWork.locationZipCodeRepository.insertAll(newLocationZipCodes);
        _unitOfWork.saveChanges(ConflictMode.ContinueOnConflict);
    }

    // this isn't working
    _unitOfWork.refresh(RefreshMode.OverwriteCurrentValues, domainLocation);
    return domainLocation;
} 
```

这是 linq-to-sql 创建的 LocationZipCode 类的基本表示：

```
public class LocationZipCode {
    int idLocation;
    string zipcode;
    string state
    EntityRef<Location> location;
} 
```

这是我在 UnitOfWork 中的刷新方法：

```
public void refresh(RefreshMode refreshMode, object entity) {
    _context.Refresh(refreshMode, entity);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:43:30.093

我没有刷新上下文，而是更改了将子记录插入数据库的方式。所以，而不是...

```
_unitOfWork.locationZipCodeRepository.insertAll(newLocationZipCodes); 
```

我正在做这个...

```
domainLocation.LocationZipCodes.AddRange(newLocationZipCodes); 
```

所以更新的代码看起来像这样......

```
Location newLocation = Json.deserialize<Location>(json);
if (newLocation != null) {
    IEnumerable<string> zipCodes = Regex.Split(newLocation.zipCodes, @"[\s,;]+");

    var newLocationZipCodes = _zipCodeRepository.match(zipCodes).Select(item => new LocationZipCode { idLocation = newLocation.id, state = item.state, zipcode = item.zipcode });
    var domainLocation = _unitOfWork..locationRepository.getFirst(l => l.id == newLocation.id);

    if (newLocationZipCodes.Any()) {
        domainLocation.LocationZipCodes.AddRange(newLocationZipCodes);
        _unitOfWork.saveChanges(ConflictMode.ContinueOnConflict);
    }

    return new Mapper<DomainLocation, Location>(new LocationMapTemplate()).map(domainLocation);
} 
```

# android - 使用 Android 操作栏下拉文本显示

> ID：14960333
> 
> 赞同：1
> 
> 时间：2013-02-19T14:50:11.647
> 
> 标签：android, android-actionbar

谁能指出我在触摸相应项目时从 Android 操作栏“展开”的视图中显示文本的示例？

就我而言，我想显示可见卫星数量的 GPS 状态信息，但这并不重要，它只是文本数据。在这种情况下，区别在于我不想显示下拉菜单，只显示文本数据——随着时间的推移而变化，但没有任何功能。

我会继续搜索，但在这一点上，我什至不确定要使用什么来搜索短语。

谢谢，R。

在如何向我的 ActionBar 添加微调器时，我得到了一些帮助。微调器显示确实允许我暂时低于“正常”操作栏空间，但我不知道如何将其标签固定在顶部。这有道理吗？如果可以在不丢失操作栏标签的情况下使用微调器，那可能是完美的。有人知道我该怎么做吗？有人认为我可能应该打开一个单独的案例吗？

谢谢，R。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T17:38:00.197

试试这个...

```
View customeView = getLayoutInflater().inflate(R.layout.custom_action_bar_layout, null);
getActionBar().setDisplayShowCustomEnabled(true)
getActionBar().setCustomView(addView); 
```

另请参阅：[https ://groups.google.com/forum/#!msg/android-developers/mDUJ1yYcVPQ/ATwHNLg1OA0J](https://groups.google.com/forum/#!msg/android-developers/mDUJ1yYcVPQ/ATwHNLg1OA0J)

# hibernate - 如何将 jsf @ConversationScoped bean 与休眠复合主键一起使用？

> ID：14960334
> 
> 赞同：2
> 
> 时间：2013-02-19T14:50:17.757
> 
> 标签：hibernate, jsf-2, jboss, composite-primary-key, jboss-forge

我是 java、jsf 和 hibernate 的新手，我一直在使用 jboss forge 为我的实体生成 crud 函数，但我不知道如何使它与 hibernate @embedable id 一起工作，这是我的代码。

```
    @实体
    @Table（名称=“estado”，模式=“公共”）
    公共类 Estado 实现 java.io.Serializable
    {

       私人 EstadoId id；
       私人派斯派斯；
       私人日期 fechaRegistro;
       私有字符串描述；
       私人短期身份；
       私有集 municipios = new HashSet(0);

       公共 Estado()
       {
       }

       public Estado(EstadoId id, Pais pais, Date fechaRegistro, short estatus)
       {
          这个.id = id;
          this.pais = pais;
          this.fechaRegistro = fechaRegistro;
          this.estatus = 状态；
       }

       public Estado(EstadoId id, Pais pais, Date fechaRegistro, 字符串描述, short estatus, Set municipios)
       {
          这个.id = id;
          this.pais = pais;
          this.fechaRegistro = fechaRegistro;
          this.descripcion = 描述；
          this.estatus = 状态；
          this.municipios = municipios;
       }

       @EmbeddedId
       @AttributeOverrides( { @AttributeOverride(name = "paisId", column = @Column(name = "pais_id", nullable = false, length = 5)), @AttributeOverride(name = "estadoId", column = @Column(name = “estado_id”，可为空 = 假，长度 = 5)) })       

    }

```

接下来是可嵌入的 id

```
    @可嵌入
    公共类 EstadoId 实现 java.io.Serializable {

         私有字符串 paisId；
         私有字符串 estadoId；

        公共 EstadoId() {
        }

        公共 EstadoId（字符串 paisId，字符串 estadoId）{
           this.paisId = paisId;
           this.estadoId = estadoId;
        }                    

    }

```

现在是@ConversationScoped bean

```

    导入 javax.annotation.Resource；
    导入 javax.ejb.SessionContext；
    导入 javax.ejb.Stateful；
    导入 javax.enterprise.context.Conversation；
    导入 javax.enterprise.context.ConversationScoped；
    导入 javax.faces.application.FacesMessage；
    导入 javax.faces.component.UIComponent；
    导入 javax.faces.context.FacesContext；
    导入 javax.faces.convert.Converter；
    导入 javax.inject.Inject；
    导入 javax.inject.Named；    

    @命名
    @有状态
    @ConversationScoped
    公共类 EstadoBean 实现 Serializable
    {

       私有静态最终长序列版本UID = 1L；

       /*
        * 支持创建和检索 Estado 实体
        */

       私人长ID；

       公共长 getId()
       {
          返回这个.id;
       }

       公共无效 setId（长 id）
       {
          这个.id = id;
       }

       私人 Estado estado；

       公共 Estado getEstado()
       {
          返回这个.estado;
       }

       @注入
       私人对话对话；

       @PersistenceContext(type = PersistenceContextType.TRANSACTION)
       私有实体管理器实体管理器；

       公共字符串创建（）
       {

          this.conversation.begin();
          返回“创建？面孔重定向=真”；
       }

       公共无效检索（）
       {

          if (FacesContext.getCurrentInstance().isPostback())
          {
             返回;
          }

          if (this.conversation.isTransient())
          {
             this.conversation.begin();
          }

          如果（this.id == null）
          {
             this.estado = this.example;
          }
          别的
          {
             this.estado = findById(getId());
          }
       }

       公共 Estado findById（长 id）
       {

          返回 this.entityManager.find(Estado.class, id);
       }

       @资源
       私人会话上下文会话上下文；

       公共转换器 getConverter()
       {

          final EstadoBean ejbProxy = this.sessionContext.getBusinessObject(EstadoBean.class);

          返回新的转换器（）
          {

             @覆盖
             public Object getAsObject(FacesContext 上下文，UIComponent 组件，字符串值)
             {

                返回 ejbProxy.findById(Long.valueOf(value));
             }

             @覆盖
             public String getAsString(FacesContext 上下文，UIComponent 组件，对象值)
             {

                如果（值 == 空）
                {
                   返回 ””;
                }

                return String.valueOf(((Estado) value).getId());
             }
          };
       }

    }

```

事实上，我真正的疑问是如何正确编码 getConverter 方法，因为 estado 实体 id 它不是字符串值，estado 实体的 id 类型是 estadoId 可嵌入类型，由两个字符串值组成，我的另一个问题是从哪里getConverter 方法获取字符串值参数？

# python - 'import ... as' 的约定

> ID：14960336
> 
> 赞同：8
> 
> 时间：2013-02-19T14:50:22.680
> 
> 标签：python, numpy, scipy

通常，`import numpy as np`用于导入模块 numpy.

有命名的通用约定吗？

其他模块呢，特别是来自科学计算之类的模块`scipy`，`sympy`和`pylab`或之类的子模块`scipy.sparse`。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-19T16:15:28.393

SciPy`import scipy as sp`在[其文档](http://docs.scipy.org/doc/scipy/reference/tutorial/general.html)中推荐，尽管我个人认为这没什么用，因为它只允许您访问重新导出的 NumPy 功能，而不是 SciPy 添加的任何内容。我发现自己做`import scipy.sparse as sp`的更频繁，但后来我大量使用该模块。还

```
import matplotlib as mpl
import matplotlib.pyplot as plt
import networkx as nx 
```

当您开始使用更多库时，您可能会遇到更多此类问题。这些速记没有注册表或任何东西，您可以随意发明新的速记。除了`import lln as library_with_a_long_name`显然不会经常发生外，也没有一般惯例。

除了这些速记之外，Python 2.x 程序员还有一个习惯是做类似的事情

```
# Try to import the C implementation of StringIO; if that doesn't work
# (e.g. in IronPython or Jython), import the pure Python version.
# Make sure the imported module is called StringIO locally.
try:
    import cStringIO as StringIO
except ImportError:
    import StringIO 
```

不过，Python 3.x 正在结束这一点，因为它不再提供 , 等的部分 C`StringIO`实现`pickle`。

# javascript - ZOO 应用程序中的星级评分不起作用

> ID：14960339
> 
> 赞同：0
> 
> 时间：2013-02-19T14:50:33.717
> 
> 标签：javascript, php, joomla, joomla1.5

在我的网站上，我使用的是 zoo 组件。现在在我的前端，我有星级评分的产品。但是有些星级是行不通的。当用户对产品进行评分时，它应该显示一个数字，但它会显示：

`follow">`

这是加载时显示上述错误的页面之一： [http](http://www.spiritmotorcycles.co.za/motorcycle-accessories/helmets/spirit-full-face-bike-helmets) ://www.spiritmotorcycles.co.za/motorcycle-accessories/helmets/spirit-full-face-bike-helmets 。

还有一个 js 文件`rating.js`，我认为应该修改，但我不知道从哪里开始。

希望大家帮忙或者尽快回复。

# c# - 以编程方式测量 PNG 图像两侧的填充/空白空间

> ID：14960344
> 
> 赞同：1
> 
> 时间：2013-02-19T14:51:01.017
> 
> 标签：c#, xamarin.ios, png, monodevelop, padding

是否可以在 C# 中以编程方式测量 PNG 侧面（左上右下）的填充（空白）？我能否以某种方式从侧面开始逐个像素地解析图像，以查看像素中是否有任何不清晰或空的东西？我如何确定像素是空的而不是颜色？

我的 PNG 被加载到 UIImageView 上，但我可以处理 PNG 或 UIImage/UIImageView。什么都有效。

![这是一个PNG](../Images/c7c0d5b5fcbd737d4f390f9a4a9abf8e.png)

这是一个PNG

![这是我要测量的](../Images/76608f2cc6e82bfda15ee5132a1549d4.png)

这是我想以编程方式测量的内容。

-------------- 解决方案贴在这里 ----------------

```
 UIImage Image = UIImage.FromFile("image.png");
    IntPtr bitmapData = RequestImagePixelData(Image);

    PointF point = new PointF(100,100);

    //Check for out of bounds
    if(point.Y < 0 || point.X < 0 || point.Y > Image.Size.Height || point.X > Image.Size.Width)
    {
        Console.WriteLine("out of bounds!");
    }
    else
    {
        Console.WriteLine("in bounds!");

        var startByte = (int) ((point.Y * Image.Size.Width + point.X) * 4);

        byte alpha = GetByte(startByte, bitmapData);

        Console.WriteLine("Alpha value of an image of size {0} at point {1}, {2} is {3}", Image.Size, point.X, point.Y, alpha);
    }

    protected IntPtr RequestImagePixelData(UIImage InImage)
    {
        CGImage image = InImage.CGImage;
        int width = image.Width;
        int height = image.Height;
        CGColorSpace colorSpace = image.ColorSpace;
        int bytesPerRow = image.BytesPerRow;
        int bitsPerComponent = image.BitsPerComponent;
        CGImageAlphaInfo alphaInfo = image.AlphaInfo;

        IntPtr rawData;

        CGBitmapContext context = new CGBitmapContext(rawData, width, height, bitsPerComponent, bytesPerRow, colorSpace, alphaInfo);
        context.SetBlendMode(CGBlendMode.Copy);
        context.DrawImage(new RectangleF(0, 0, width, height), image);

        return context.Data;
    }

    //Note: Unsafe code.  Make sure to allow unsafe code in your
    unsafe byte GetByte(int offset, IntPtr buffer)
    {
        byte* bufferAsBytes = (byte*) buffer;
        return bufferAsBytes[offset];
    } 
```

显然，现在我需要创建解析每个像素并确定清晰像素停止位置的逻辑。这个逻辑很简单，所以我不会费心发布它。只需从侧面开始，一直往前走，直到找到一个不为零的 alpha 值。

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:56:53.557

您可以通过检查像素的 Alpha 值是否等于（或接近）0 来检查像素是否为空。不确定您使用的是哪个 API，但您应该能够在 RGBA 中获取像素的颜色。

逐行扫描应该可以让您确定有多少边框是“空的”。

# sql - 声明 varchar 视图问题

> ID：14960345
> 
> 赞同：1
> 
> 时间：2013-02-19T14:51:06.930
> 
> 标签：sql, sql-server-2005

我有下面的代码，我想把它变成一个视图。但是我不能在视图中声明 varchar。

任何人都可以建议解决这个问题吗？

Sql 代码 -

```
DECLARE @PROJECTNUMBER VarChar
SELECT     SUM(PAFeeAmount) FeeAmount
FROM          PA02101
WHERE      PAPROJNUMBER = @PROJECTNUMBER 
```

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T14:53:02.857

如果您需要变量，请改用表值函数：

[http://msdn.microsoft.com/en-us/library/ms191165(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms191165(v=sql.105).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T14:53:10.570

如果您尝试将参数传递给 a `VIEW`，则不能这样做。只需使用 Group By 执行您的视图，并在从视图中选择期间进行过滤。

```
CREATE VIEW myView
AS
   SELECT  PAPROJNUMBER, SUM(PAFeeAmount) FeeAmount
   FROM   PA02101
   GROUP BY PAPROJNUMBER

--Select like below. (may be passing it to a stored procedure)
declare @projectNumber varchar(50) --remember to give a length 

select * from myView
where projectNumber = @projectNumber 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T14:55:41.713

尝试创建一个`inline table-valued`函数。例子：

```
CREATE FUNCTION dbo.fxSample(@PROJECTNUMBER VARCHAR(20))
RETURNS TABLE
AS
RETURN
(
    SELECT  SUM(PAFeeAmount) FeeAmount
    FROM    PA02101
    WHERE   PAPROJNUMBER = @PROJECTNUMBER
)

-- Then call like this, just as if it's a table/view just with a parameter
SELECT * FROM dbo.fxSample('hello') 
```

# apache - 使用 mod_include 和 mod_proxy 包含远程 .shtml 文件时出现乱码

> ID：14960347
> 
> 赞同：2
> 
> 时间：2013-02-19T14:51:20.000
> 
> 标签：apache, mod-proxy, mod-include

我正在尝试使用 apache mod_include。

我有两台运行 apache 的服务器：我试图在我的 test_local.shtml (server1) 中包含一些来自 test_remote.shml (server2) 的简单文本。

**test_local.shtml**：

```
<html>
  <head>
  <title></title>
  </head>
  <body>
    <!--#include virtual="http://www.server2.com/test_remote.shtml"-->
  </body>
</html> 
```

**test_remote.shtml**：

```
<b>this is a test</b> 
```

起初它不起作用（在error_log中出现“文件不存在”错误）。看起来出于安全原因，我设法包含的唯一文件位于我的本地服务器（server1）上，具有本地路径，但没有远程 url。然后我明白我需要将 mod_proxy（和 mod_proxy_html）与 mod_include 结合使用才能使远程包含工作。

所以我将以下内容添加到我的 httpd.conf（在 server1 上）：

```
ProxyPass /server2 http://www.server2.com 
```

然后我将 test_local.shtml 中的包含行更改为：

```
<!--#include virtual="/server2/test_remote.shtml"--> 
```

这次没有错误，包含了一些内容，但生成的文本都是乱码：

```
 ‹³I²+ÉÈ,V¢D…’Ôâý$;.j¿è 
```

我的配置中是否缺少某些内容？怎么了？

**更新：**我怀疑这与两台服务器之间发送（然后读取）数据的方式有关..例如压缩或类似。我检查了 mod_deflate 配置部分，它包含在两个服务器中并在两个服务器中工作，它是相同的。任何的想法？谢谢

**更新 2：**在 server2 上禁用 SetOutputFilter DEFLATE，在 server1 上包含 mod_include 的文本是完全可读的。所以这就是问题的根源：如何配置 server1 来处理 gzip 压缩的内容并正确显示？（假设我会想象某种与输出过滤器相反的输入过滤器..）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T09:45:23.517

我找到了两种解决方案，但我更喜欢第二种，因为它不需要更改远程服务器的配置。

**解决方案1：**

通过将以下内容添加到远程服务器配置，我们禁用 .shtml 文件的 gzip 压缩：

```
<IfModule mod_deflate.c>
    SetEnvIfNoCase Request_URI \.shtml$ no-gzip dont-vary
</IfModule> 
```

这对我来说不是最好的解决方案，因为我并不总是可以访问包含内容的远程服务器。

**解决方案2：**

在“本地”服务器（使用 SSI 包含的托管页面）上，添加以下内容：

```
ProxyPass /server2 http://www.server2.com/
ProxyPassReverse /server2 http://www.server2.com/
<Location "/server2/">
    RequestHeader unset Accept-Encoding
</Location> 
```

基本上，我告诉 Apache 禁用 Accept-Encoding 请求标头；当向远程服务器请求 .shtml 页面时，我们会询问没有压缩的页面。因此，我们得到纯文本，避免了乱码内容。

更多信息：[http ://wiki.apache.org/httpd/ReInflating](http://wiki.apache.org/httpd/ReInflating)

# html - 无法正确将列表浮动到右侧

> ID：14960350
> 
> 赞同：2
> 
> 时间：2013-02-19T14:51:26.157
> 
> 标签：html, css

**编辑**任务完成，感谢您的回复。如果有人可以帮助我点击展开/淡入查看功能，那将非常有帮助。我目前正在调查它。

我正在为我的网站设计一个非常简单的导航。我不明白为什么文本不能坚持到右边。这是一个例子：http: [//jsfiddle.net/E6ArK/](http://jsfiddle.net/E6ArK/)

*我还希望添加一个点击展开，也许在某个时候加入一个淡入视图功能。任何帮助将非常感激。*

HTML

```
<div class="navigation">
    <ul>
        <li>
             <h1>Applications</h1>

            <ul>
                <li>Not Available</li>
                <li>Not Available</li>
            </ul>
        </li>
        <li>
             <h1>Forum</h1>

            <ul>
                <li>Not Available</li>
                <li>Not Available</li>
            </ul>
        </li>
        <li>
             <h1>Guilds</h1>

            <ul>
                <li>Not Available</li>
                <li>Not Available</li>
            </ul>
        </li>
        <li>
             <h1>Imageboards</h1>

            <ul>
                <li>People</li>
                <li>Random</li>
                <li>Screen Shots</li>
                <li>Wallpapers</li>
            </ul>
        </li>
        <li>
             <h1>Projects</h1>

            <ul>
                <li>Not Available</li>
                <li>Not Available</li>
            </ul>
        </li>
    </ul>
</div> 
```

CSS

```
/* NAVIGATION */

/* Heading */
 .navigation ul li h1 {
    background : #000000;
    color : #ffffff;
    display : table;
    font-weight : 100;
    margin : 0;
    padding : 6px;
    border-right : 3px solid #ffffff;
    font-size : 28px;
    margin-bottom : 3px;
}
/* Positioning */
 .navigation {
    font-family :'Open Sans Condensed', sans-serif;
    margin : 12px;
    position : fixed;
    right : 0;
    top : 0;
}
.navigation ul {
    font-size : 20px;
    margin : 0;
    padding : 0;
    text-align : right;
}
.navigation ul li {
    clear : right;
    color : #ffffff;
    float : right;
    list-style-type : none;
}
/* Second Level */
 .navigation ul li ul {
    display : none;
}
.navigation ul li:hover ul {
    display : block;
}
.navigation ul li ul li {
    background : #000000;
    border-right : 3px solid #ff0000;
    color : #ffffff;
    display : table;
    font-size : 18px;
    margin-bottom : 3px;
    padding : 6px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:58:44.543

您还需要将标题向右浮动。添加`float: right`到您的规则块中`.navigation ul li h1`。这应该让他们坚持在右边。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T14:58:55.293

您只需在标题样式中添加一个 float:right 属性：

```
 /* Heading */
 .navigation ul li h1 {
    background : #000000;
    color : #ffffff;
    display : table;
    font-weight : 100;
    margin : 0;
    padding : 6px;
    border-right : 3px solid #ffffff;
    font-size : 28px;
    margin-bottom : 3px;
    float: right;
} 
```

希望有帮助

# ibm-mobilefirst - onResume 不适用于 Worklight 项目中的 android launchMode 标准

> ID：14960355
> 
> 赞同：2
> 
> 时间：2013-02-19T14:51:44.473
> 
> 标签：ibm-mobilefirst

工作灯 5.0.5 安卓 - 4.1

我一直在努力将本机和混合代码库合并到一个单独的 Worklight 应用程序中。作为其中的一部分，我已将我的启动器活动启动模式更新为“标准”，这样当应用程序恢复时，它会恢复到正确的 web 视图或基于用户查看的最后一个活动的另一个活动。（worklight 默认项目设置为“singleTask”）

从 eclipse 直接构建到他的设备上时，此配置工作正常。当我为设备创建一个签名的 APK 副本并安装时，我会在简历生命周期中获得不同的行为。以下是创建错误的步骤

1.  启动应用
2.  更改应用程序的状态
3.  按主页按钮
4.  打开应用程序文件夹
5.  单击应用程序图标 RESULT - 应用程序运行 onCreate 而不是 onResume

奇怪的是，如果我在主页上长按，并从最近使用的应用程序中选择我的应用程序，它会恢复正常。（为什么它们会不同？）

我最近升级到 5.0.5，现在才注意到这个问题。也许它与新的phonegap版本有关？

使用新的 Worklight 项目很容易重现该问题。

1.  使用没有框架的新项目向导。
2.  修改你的安卓活动

    ```
    activity android:name=".SimpleWorklight"
              android:label="@string/app_name" 
              android:configChanges="orientation|keyboardHidden"
              android:launchMode="standard" 
    ```

3.  更新标记，以便您可以更改其状态以证明 onCreate 与 onResume

    ```
    <input type="submit" onclick="buttonClick()">
    <span id=label>SimpleWorklight</span> 
    ```

    变量计数器=1；function buttonClick(){ document.getElementById("label").innerText="Clicked"+counter; 计数器=计数器+1；}

[它与此https://groups.google.com/forum/?fromgroups=#!topic/android-developers/UjWcsFMe6ik](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/UjWcsFMe6ik)相当相似

更新 - 我尝试了相同的测试并在 5.0.2.407-developer-edition Aaron Allsbrook 上运行得到了相同的结果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T14:51:56.763

我解决了这个问题，它似乎是 android 中的一个可能的错误（或者可能只是 android 的行为方式）当你从应用程序图标启动时，它基本上总是在现有的活动之上启动一个新活动，如果它已经存在的话。这里提到了几个可能的解决方案。 [http://code.google.com/p/android/issues/detail?id=2373](http://code.google.com/p/android/issues/detail?id=2373)

我首先尝试了添加到 onCreate 方法的最简单方法

```
 if (!isTaskRoot()) {
         finish();
         return;
     } 
```

但这从 cordovawebview 库返回了 NPE。我没有尝试通过 Worklight 调试并进入 Cordova，而是尝试了此处找到的解决方案[https://github.com/cleverua/android_startup_activity](https://github.com/cleverua/android_startup_activity)

您在其中创建一个启动 android 活动，该活动将查看所有正在运行的任务。如果它发现任务正在运行，它将简单地关闭新活动并回退到正在运行的活动。如果它没有找到正在运行的任务，它将创建新的意图并过渡。

# android - 滚动视图不显示底部

> ID：14960358
> 
> 赞同：0
> 
> 时间：2013-02-19T14:51:54.677
> 
> 标签：android, xml, android-relativelayout, android-scrollview

我有这个相对布局，其中有一个滚动视图。但是当滚动视图中有更多文本时，它不会显示底部文本，它位于我的按钮后面。我怎样才能解决这个问题？

这是我所做的：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#00AEEC"
    android:orientation="vertical"
    android:weightSum="100" >

    <RelativeLayout
        android:id="@+id/details_header"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="clip_horizontal"
        android:background="#00AEEC"
        android:padding="20dp" >

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_centerHorizontal="true"
            android:src="@drawable/onlywithalcohol_heading_page2" />

    </RelativeLayout>

 <RelativeLayout
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:layout_below="@+id/details_header"
     android:layout_centerHorizontal="true"
     android:layout_margin="20dp" >

     <TextView
         android:id="@+id/details_country"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_alignParentTop="true"
         android:layout_centerHorizontal="true"
         android:layout_marginBottom="20dp"
         android:text="USA"
         android:textAlignment="center"
         android:textAppearance="?android:attr/textAppearanceMedium" />

     <TextView
         android:id="@+id/details_title"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_below="@id/details_country"
         android:layout_centerHorizontal="true"
         android:layout_marginBottom="20dp"
         android:gravity="center_horizontal"
         android:text="Fastest Time To Drink A Pint Of Soda Water, Consume A Bowl Of Macaroni And Cheese With Chopsticks, Eat And Read A Fortune Cookie And Take A Shot Of Peach Schnapps "
         android:textAlignment="center"
         android:textAppearance="?android:attr/textAppearanceMedium"
         android:textColor="#FFFF00" />

     <ScrollView
         android:layout_width="fill_parent"
         android:layout_height="200dp"
         android:layout_alignParentBottom="true"
         android:layout_below="@id/details_title"
         android:layout_centerHorizontal="true" >

         <TextView
             android:id="@+id/details_description"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:layout_marginBottom="20dp"
             android:gravity="center_horizontal"
             android:paddingLeft="10dp"
             android:paddingRight="10dp"
             android:text="Sam Birdsong removed a cork from an empty bottle of wine using just a napkin in two minutes, 55.47 seconds.He stipulated beforehand that he had to begin with an unopened bottle, uncork it and pour out the wine, then shove the cork back inside the bottle and pull it out with a cloth napkin"
             android:textAlignment="center"
             android:textAppearance="?android:attr/textAppearanceMedium" />
     </ScrollView>
 </RelativeLayout>

 <LinearLayout
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:layout_alignParentBottom="true"
     android:layout_centerHorizontal="true"
     android:layout_margin="10dp"
     android:background="#00AEEC"
     android:orientation="vertical" >

     <Button
         android:id="@+id/details_back_btn"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_gravity="center"
         android:padding="10dp"
         android:text="@string/back_btn"
         android:textSize="18sp"
         android:textStyle="bold" />
 </LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:12:50.130

向包含 Button 的 LinearLayout 添加一个 id，例如：

```
android:id="@+id/bottomLayout" 
```

在包含滚动视图的 RelativeLayout 中使用它：

```
android:layout_above="@+id/bottomLayout" 
```

请注意，底部边距为 20dp，如果您不想要它，您可以使用 android:layout_marginLeft、android:layout_marginRight 和 android:layout_marginTop 来确保您在其他任何地方都有 20dp 边距。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T15:12:26.817

将您的布​​局更改为 LinearLayout 它应该适合您，您可能需要使用

```
android:gravity="bottom" 
```

对齐屏幕底部的按钮

你可能需要使用

```
android:layout_weight="" 
```

如果需要的话。

这是一个可以放置在`LinearLayout`垂直方向内的块：

```
<ImageView
    android:id="@+id/imageView1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:src="@drawable/ic_launcher" />

<TextView
    android:id="@+id/details_country"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginBottom="20dp"
    android:text="USA"
    android:textAlignment="center"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<TextView
    android:id="@+id/details_title"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@id/details_country"
    android:layout_centerHorizontal="true"
    android:layout_marginBottom="20dp"
    android:gravity="center_horizontal"
    android:text="Fastest Time To Drink A Pint Of Soda Water, Consume A Bowl Of Macaroni And Cheese With Chopsticks, Eat And Read A Fortune Cookie And Take A Shot Of Peach Schnapps "
    android:textAlignment="center"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:textColor="#FFFF00" />

<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="200dp"
    android:layout_alignParentBottom="true"
    android:layout_below="@id/details_title"
    android:layout_centerHorizontal="true" >

    <TextView
        android:id="@+id/details_description"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="20dp"
        android:gravity="center_horizontal"
        android:paddingLeft="10dp"
        android:paddingRight="10dp"
        android:text="Sam Birdsong removed a cork from an empty bottle of wine using just a napkin in two minutes, 55.47 seconds.He stipulated beforehand that he had to begin with an unopened bottle, uncork it and pour out the wine, then shove the cork back inside the bottle and pull it out with a cloth napkin , and this wilk take for ever and ever out the wine, then shove the cork back inside the bottle and pull it out with a cloth napkin , and this wilk take for ever and ever out the wine, then shove the cork back inside the bottle and pull it out with a cloth napkin , and this wilk take for ever and ever out the wine, then shove the cork back inside the bottle and pull it out with a cloth napkin , and this wilk take for ever and ever "
        android:textAlignment="center"
        android:textAppearance="?android:attr/textAppearanceMedium" />
</ScrollView>

<Button
    android:id="@+id/details_back_btn"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:layout_weight=""
    android:gravity="bottom"
    android:padding="10dp"
    android:text="back"
    android:textSize="18sp"
    android:textStyle="bold" /> 
```

# android - Android ADT r21.1 新活动向导中禁用“完成”按钮

> ID：14960359
> 
> 赞同：3
> 
> 时间：2013-02-19T14:51:58.013
> 
> 标签：android, eclipse, osx-lion, android-activity, adt

![新建活动向导](../Images/95413e690bfb5dd3dbed3ecaa95caf12.png)

我在 ADT r20 之后修复[了一个类似的问题](http://code.google.com/p/android/issues/detail?id=33859 "无法创建新项目")，但是我在更新到 r21.1 后遇到的这个新问题略有不同。

`Activity`当我尝试使用向导中的任何模板时，我可以在任何项目（新的或旧的）中创建新项目，但不能创建新项目。我尝试从 SDK 管理器中删除支持库，重新安装并重新启动，但这次对我来说并没有成功。

制作活动的手动方法工作得很好，但模板向导很方便。最近可能已经看到的其他人的任何想法？

*   ADT r21.1
*   Eclipse 朱诺 4.2.1
*   OS X 10.7.5

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T10:55:16.590

使用文件 - 新建 - 菜单中的其他路径

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:55:19.610

应该有一个下一步按钮，您需要单击该按钮以提供要创建的活动的详细信息。显然，您的 Next 按钮已被 grue 吃掉了。

您可以考虑使用您在此处提供的详细信息在[http://b.android.com](http://b.android.com)上提交工具问题。

# iphone - UIImage 的类方法调用问题

> ID：14960361
> 
> 赞同：3
> 
> 时间：2013-02-19T14:52:00.963
> 
> 标签：iphone, ios, methods, uiimage

我必须`Class method`从一个类调用一个类到另一个类，实际上进入类方法我必须通过`UIImage`. 所以我创建了一个`NSObject`并在`Viewcontroller`按钮中调用它

如何调用`UIImageView`以及在哪里..请检查我出错的代码..

我需要对调用图像的方法进行哪些更改

**Zaction.h**

```
@interface ZAction : NSObject

@property (retain) NSString *title;
@property (assign) id <NSObject> target;
@property (assign) SEL action;
@property (retain) id <NSObject> object;
@property(retain) UIImageView *image;

+ (ZAction *)actionWithTitle:(NSString *)aTitle target:(id)aTarget action:(SEL)aAction object:(id)aObject image:(UIImageView *)Aimage;; 
```

**ZAction.m**

```
@implementation ZAction

@synthesize title;
@synthesize target;
@synthesize action;
@synthesize object,image;

 + (ZAction *)actionWithTitle:(NSString *)aTitle target:(id)aTarget action:(SEL)aAction object:(id)aObject image:(UIImageView *)Aimage;
{
    ZAction *actionObject = [[[ZAction alloc] init] autorelease];
    actionObject.title = aTitle;
    actionObject.target = aTarget;
    actionObject.action = aAction;
    actionObject.object = aObject;
    actionObject.image=Aimage;
    return actionObject;
} 
```

**视图控制器.m**

```
 #import "Zaction.h"
- (IBAction)test4Action:(id)sender
{
    UIImageView *image1=[[UIImageView alloc]initWithFrame:CGRectZero];
    ZAction *destroy = [ZAction actionWithTitle:@"Clear" target:self action:@selector(colorAction:) object:[UIColor clearColor] image:image1];
    ZAction *sec = [ZAction actionWithTitle:@"Unclear" target:self action:@selector(colorAction:) object:[UIColor clearColor] image:image1];
    image1.image=[UIImage imageNamed:@"icon2.png"];
    [self.view addSubview:image1];

   ZActionSheet *sheet = [[[ZActionSheet alloc] initWithTitle:@"Title" cancelAction:nil destructiveAction:destroy
                otherActions:[NSArray arrayWithObjects:option1,  nil]] autorelease];
    sheet.identifier = @"test4";
    [sheet showFromBarButtonItem:sender animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T21:24:02.057

您的代码有一些严重的问题：

*   您的 UIImageView image1 使用 CGRectZero 框架初始化 - 可能因为框架为 (0,0,0,0) 而未显示？Tr 给它一个真实的大小，例如图像的大小。

*   接下来，您的 ZAction 对象 sec 和 destroy 将在 test4Action 方法结束时消失，因为它们是自动释放的，不会保留在任何地方。

*   您的代码中还有一些不必要的分号 - 特别是我要摆脱的 actionWithTitle 方法实现背后的分号，您可能会因分号错误而出现一些令人讨厌的错误（例如在 if() 语句之后......）。

*   还请处理您的编码风格（特别是变量的命名 - c 语言关键字没有好的属性名称（您的操作类中的“对象”），Aimage 应该是 aImageView）

# c# - 来自 Windows Phone 的服务的 ssl 身份验证

> ID：14960363
> 
> 赞同：1
> 
> 时间：2013-02-19T14:52:02.403
> 
> 标签：c#

我正在尝试使用 windows phone 连接到 Exchange 服务。这是我的代码：

```
var ews = new ExchangeServicePortTypeClient(binding, endpoint);
var resolveNamesType = new ResolveNamesType{ReturnFullContactData = false,UnresolvedEntry = "aleksey"};
using (new OperationContextScope(ews.InnerChannel))
        {
            var request = new HttpRequestMessageProperty();
            request.Headers[System.Net.HttpRequestHeader.Authorization] = "Basic " + EncodeBasicAuthenticationCredentials(UserName, Password);
            OperationContext.Current.OutgoingMessageProperties.Add(HttpRequestMessageProperty.Name, request);
            ews.ResolveNamesAsync(resolveNamesType);
            ews.ResolveNamesCompleted += ews_ResolveNamesCompleted;
        } 
```

它以异常结束：远程服务器返回了意外响应：（401）未经授权。在 Silverlight 中，即使服务发送不同的错误代码，也可能会报告 404 响应代码。{System.Net.WebException：远程服务器返回错误：NotFound。在 System.Net.Browser.ClientHttpWebRequest.InternalEndGetResponse(IAsyncResult asyncResult) 在 System.Net.Browser.ClientHttpWebRequest.<>c_ *DisplayClasse.b* _d(Object sendState) 在 System.Net.Browser.AsyncHelper.<>c_ *DisplayClass1.b* _0 （对象发送状态）}

我会很高兴聪明的建议。

# javascript - 如何将 javascript 对象嵌套在另一个对象中？

> ID：14960370
> 
> 赞同：0
> 
> 时间：2013-02-19T14:52:17.800
> 
> 标签：javascript

当我尝试执行此操作时收到“mydoc.docMeta 未定义”错误：

```
var mydoc = {};
mydoc.docMeta.keyword = "somevalue"; 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T14:53:38.933

因为`mydoc.docMeta`也是一个对象，所以你必须先定义它：

```
var mydoc = {};
mydoc.docMeta = {};
mydoc.docMeta.keyword = "somevalue"; 
```

或者只使用文字：

```
var mydoc = {
    docMeta : {
        keyword : "somevalue"
    }
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T14:53:48.653

您必须再嵌套一层：

```
var mydoc = {
   docMeta: {
       keyword: "somevalue"
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T14:53:42.553

你想`docMeta`成为另一个对象文字吗？

```
var mydoc = { docMeta: {} }; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-19T14:55:40.387

尝试

```
var mydoc = {};
mydoc.docMeta = {
    keyword : "somevalue"
}; 
```

您将 mydoc 声明为对象，但随后您尝试设置对象属性的属性，首先您必须将该属性也声明为对象

# python - Python 3 - 正方形。代码几乎完成

> ID：14960375
> 
> 赞同：0
> 
> 时间：2013-02-19T14:52:29.387
> 
> 标签：python, python-3.x

我被要求编写一个程序，打印所有小于一个输入的平方数。但是，这段代码中有一个非常轻微的问题，我似乎无法确定：

```
from math import sqrt
n=int(input())
counter = 0
while counter * counter < n:
   counter = counter + 1
   print(counter * counter) 
```

看，问题是，它打印了所有正确的方格，还有输入的方格。有人可以告诉我如何解决这个问题吗？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T14:54:49.433

只需将增量向下移动一行并从 1 开始计数：

```
n=int(input())
counter = 1
while counter * counter < n:
   print(counter * counter)
   counter += 1 
```

在您的代码中，在对其进行测试*之后*但*在*打印正方形之前`counter`递增。所以即使小于，也不必为。*`n`*`counter * counter``n``(counter + 1) * (counter + 1)`**

 **通过将增量向下移动一行，您可以正确打印`counter * counter`您刚刚测试的值`n`。**

# java - Java的正则表达式引擎坏了吗？

> ID：14960379
> 
> 赞同：0
> 
> 时间：2013-02-19T14:52:44.613
> 
> 标签：java, regex

我正在编写一些代码来从字符串中删除括号及其内容，但是这一行无法正常工作：

```
line.replaceAll("\\Q"+matchp+"\\E", rep); 
```

这应该替换所有找到的组，例如“（组）更多单词”并且正则表达式匹配“（组）”，然后字符串将变为 rep +“更多单词”。但字符串不受影响。报价坏了吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-19T14:54:45.040

`replaceAll`不就地这样做：

```
line = line.replaceAll("\\Q"+matchp+"\\E", rep); 
```

# python - 从内到外迭代嵌套列表

> ID：14960380
> 
> 赞同：2
> 
> 时间：2013-02-19T14:52:45.813
> 
> 标签：python, python-3.x

我有以下python嵌套列表结构：

```
test = ['a', ['c', ['e'], 'd'], 'b'] 
```

或相同，只是格式化：

```
test = [
    'a', 
        [
            'c', 
                [
                    'e'
                ], 
             'd'
        ], 
    'b'
] 
```

我想知道迭代整个列表的最佳方法是什么，从最里面的嵌套列表对象（'e'）开始，到最外面的列表（'a'，[...]，'b'） . 对 reversed(test) 的调用并不能解决嵌套列表的问题。它应该能够在迭代的每个深度调用回调函数。

迭代应该看起来像这样（[xx] == 来自先前调用的回调的计算值）：

```
1st e --> callback(e)
2nd c [e] d --> callback(c [e] d)
3rd a [c e d] b --> callback(a [c e d] b) 
```

希望这能解释我的问题并感谢您的帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T15:01:24.353

我建议的一种可能的解决方案是

```
>>> def foo(test):
    queue = []
    try:
        while True:
            queue.append(test)
            test = test[1]
    except IndexError:
        for e in reversed(queue):
            yield e

>>> data = foo(test)
>>> next(data)
['e']
>>> next(data)
['c', ['e'], 'd']
>>> next(data)
['a', ['c', ['e'], 'd'], 'b']
>>> next(data)

Traceback (most recent call last):
  File "<pyshell#753>", line 1, in <module>
    next(data)
StopIteration
>>> 
```

这个怎么运作

1.  深度优先遍历，将元素推入队列
2.  循环遍历反向队列并产生元素

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-19T15:06:21.853

您正在寻找的是结构的*后序遍历*：

```
def traverse(l):
    for x in l:
        if isinstance(x, list):
            traverse(x)
    callback(l) 
```

如果`callback`定义为`print`，我们得到

```
['e']
['c', ['e'], 'd']
['a', ['c', ['e'], 'd'], 'b'] 
```

# facebook - redirect_uri 不是绝对 URI

> ID：14960383
> 
> 赞同：6
> 
> 时间：2013-02-19T14:52:47.270
> 
> 标签：facebook, facebook-graph-api, scribe

我正在将 Scribe API 用于 facebook 签名功能，但在提交 facebook 身份验证 url 后出现以下错误。

```
callback_url = http://localhost:18080/example/pub/social/facebook/signup/step2

OAuthService service = new ServiceBuilder().provider(FacebookApi.class)
                .apiKey(apiKey).apiSecret(apiSecret)
                .scope("email")
                .callback(callbackUrl).build();

String authorizationUrl = service.getAuthorizationUrl(EMPTY_TOKEN);

return "redirect:" + map.get("AUTHORIZATION_URL");

OAuthService service = new ServiceBuilder().provider(FacebookApi.class)
                .apiKey(apiKey).apiSecret(apiSecret).build();
Verifier verifierObj = new Verifier(verifier);
        //String s = getAccesstoken(verifier);

Token accessToken = service.getAccessToken(EMPTY_TOKEN, verifierObj) 
```

我得到低于错误@最后一行

响应正文不正确。无法从中提取令牌：'{"error":{"message":"redirect_uri 不是绝对 URI。检查 RFC 3986。","type":"OAuthException","code":191}} '

设置 n facebook 应用程序：

```
**Website with Facebook Login** : http://localhost:18080/example/
App domain : localhost 
```

如果我在任何地方错了，请告诉我......抄写员和 Facebook 平台的新手。

谢谢拉吉

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-08-30T04:17:23.503

callback_url 与使用 facebook 登录的站点不同，将使用 facebook 登录的站点 url 更改为与您的 callback_url 相同。

小心使用本地主机中的应用程序，始终尝试使用一台服务器进行测试。

对不起我糟糕的英语

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-08-05T16:22:05.670

确保在`redirect_uri`. 并确保将其称为`redirect_uri`.

# unit-testing - 如何根据确切类型限制 Moq 期望？

> ID：14960384
> 
> 赞同：1
> 
> 时间：2013-02-19T14:52:48.720
> 
> 标签：unit-testing, moq

我需要断言一个基`WorkItem`被传递一次给一个方法，而一个派生`SendEmailWorkItem`被传递一次。

```
repo = new Mock<IWorkItemRepository>();
repo.Setup(x => x.Add(It.IsAny<WorkItem>())).Verifiable();
repo.Setup(x => x.Add(It.Is<SendEmailWorkItem>(wi => wi.ResponsibleId == responsibleGuid))).Verifiable(); 
```

Moq 表示第一个期望发生两次，第二个期望发生 0 次。我知道发生这种情况是因为这些类型位于相同的继承层次结构中。（以下断言采用 MSpec 语法）

```
It should_add_new_claim_workitem = () => repo.Verify(x => x.Add(MockIt.IsAny<WorkItem>()), Times.Once());
It should_add_security_service_notification_workitem_with_same_responsible_as_new_claim = () => repo.Verify(x => x.Add(MockIt.Is<SendEmailWorkItem>(wi => wi.ResponsibleId == responsibleGuid)), Times.Once()); 
```

如何根据类型限制期望？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T22:50:30.813

以相反的顺序指定设置？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T22:49:37.500

使用`It.Is<>`并检查类型：

```
namespace MoqTests
{
    using Moq;
    using NUnit.Framework;

    public class WorkItem
    {
        public int Id { get; set; }
    }

    public class SendEmailWorkItem : WorkItem
    {
        public string ResponsibleId { get; set; }
    }

    public interface IWorkItemRepository
    {
        void Add(WorkItem workItem);
    }

    public class Worker
    {
        private readonly IWorkItemRepository repository;

        public Worker(IWorkItemRepository repository)
        {
            this.repository = repository;
        }

        public void DoWork()
        {
            var workItem = new WorkItem{Id = 1};
            repository.Add(workItem);

            var emailWorkItem = new SendEmailWorkItem{Id = 2, ResponsibleId = "responsible"};
            repository.Add(emailWorkItem);
        }
    }

    [TestFixture]
    public class MoqTest
    {
        [Test]
        public void Should_add_WorkItem_and_SendEmailWorkItem()
        {
            //arrange
            var repository = new Mock<IWorkItemRepository>(MockBehavior.Strict);
            repository.Setup(r=>r.Add(It.Is<WorkItem>(item => item.GetType() == typeof(WorkItem)))).Verifiable();
            repository.Setup(r=>r.Add(It.Is<SendEmailWorkItem>(item=>item.ResponsibleId == "responsible"))).Verifiable();
            var worker = new Worker(repository.Object);

            //act
            worker.DoWork();

            //assert
            repository.Verify(r => r.Add(It.Is<WorkItem>(item => item.GetType() == typeof(WorkItem))), Times.Once());
            repository.VerifyAll();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-19T16:05:30.210

使用这种设置：

```
public interface IWorkItemRepository
{
    void Add(WorkItem workItem);
    IQueryable<WorkItem> GetAll();
    void Finish(int workitemId);
}

public class WorkItem
{
    public int Id { get; set; }
    public string Name { get; set; }        
}

public class SendEmailWorkItem : WorkItem
{
    public Guid ResponsibleId { get; set; }
} 
```

这会起作用，但可能不是最优雅的解决方案

```
[TestFixture]
public class WorkItemRepositoryTests
{
    [Test]
    public void Test()
    {
        // Arrange
        var responsibleGuid = new Guid("11111111-2222-3333-4444-555555555555");
        var workitemRepo = new Mock<IWorkItemRepository>();
        workitemRepo.Setup(x => x.Add(It.IsAny<WorkItem>())).Verifiable();
        workitemRepo.Setup(x => x.Add(It.Is<SendEmailWorkItem>(wi => wi.ResponsibleId == responsibleGuid))).Verifiable();

        // Act   
        workitemRepo.Object.Add(new WorkItem() {Id = 1});
        workitemRepo.Object.Add(new SendEmailWorkItem(){ResponsibleId = responsibleGuid});

        // Assert
        workitemRepo.Verify(x => x.Add(It.Is<WorkItem>(item => item.Id == 1 )), Times.Once());
        workitemRepo.Verify(x => x.Add(It.Is<SendEmailWorkItem>(wi => wi.ResponsibleId == responsibleGuid)), Times.Once());            
    } 
```

}

# jquery - 如何在使用 jquery之前获取 li

> ID：14960386
> 
> 赞同：2
> 
> 时间：2013-02-19T14:52:55.390
> 
> 标签：jquery

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:54:24.733

尝试：

```
$("a").click(function() {
   $(this).parent().addClass("open");
}); 
```

[http://jsfiddle.net/4hGvS/](http://jsfiddle.net/4hGvS/)

我已在您的`a`标签中添加了一些内容，以便在 JSFiddle 中工作。

# java - 使用 GraphView 和 Arduino 的 Android 蓝牙

> ID：14960387
> 
> 赞同：1
> 
> 时间：2013-02-19T14:52:55.333
> 
> 标签：java, android, bluetooth, arduino, signal-processing

我目前有一个实时图表（Android GraphView）从我的 arduino 的模拟传感器到蓝牙模块顺利运行，然后使用以下代码在 Android 上进行流式传输。我想知道是否有人可以指出我正确的方向来创建一个函数，该函数接收在此函数中返回的 double 并平均每 5 个值以返回它。流每 20 毫秒从 arduino 发送一个新的双精度。我尝试添加一个带计数器的循环以将每 5 个值存储在一个数组中并将总和除以 5，但它不会实时重复。

```
public static double read() throws IOException
 {
      byte[] buffer = new byte[1024];
      dataInStream = new DataInputStream(mmInStream);
      Scanner scanner = new Scanner(dataInStream);
      double s = scanner.nextDouble();
      }
      return s;
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:03:07.200

try to add synchronized before double or may be before static. like this public static synchronized double read() throws IOException... hope it will work for you

# mysql - 如果我加入两个表，Mysql 更新查询限制不起作用

> ID：14960388
> 
> 赞同：0
> 
> 时间：2013-02-19T14:52:56.660
> 
> 标签：mysql, sql-update

在MYSQL中，如果我在加入两个表时设置更新限制，它会显示

> ERROR 1221 (HY000): 错误使用 UPDATE 和 LIMIT

```
update 
       order_product_mapping as opm, 
       order_details as od, 
       product as p 
   set fullfillment='Y' 
 where 
       p.product_id=opm.product_id 
       AND od.order_id=opm.order_id 
       AND od.order_id=100 
       AND p.product_id=1 limit 1; 
```

我的表架构是
order_details 表

```
CREATE TABLE `order_details` (
  `order_id` int(5) NOT NULL AUTO_INCREMENT,
  `amount` int(5) DEFAULT NULL,
  `order_status` char(1) DEFAULT 'N',
  `company_order_id` int(5) DEFAULT NULL,
  PRIMARY KEY (`order_id`)
) 
```

产品表

```
CREATE TABLE `product` (
  `product_id` int(5) NOT NULL AUTO_INCREMENT,
  `product_name` varchar(50) DEFAULT NULL,
  `product_amount` int(5) DEFAULT NULL,
  `product_status` char(1) DEFAULT 'N',
  `company_product_id` int(5) DEFAULT NULL,
  PRIMARY KEY (`product_id`)
) 
```

order_product_mapping

```
CREATE TABLE `order_product_mapping` (
  `product_id` int(5) DEFAULT NULL,
  `order_id` int(5) DEFAULT NULL,
  `fulfillment` char(1) DEFAULT 'N'
) 
```

我将获得 company_order_id 和 company_product_id 作为输入，以便我进行更新查询以更改我在 order_product_mapping 中的履行状态。如果在查询中添加限制，则会显示错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:22:27.743

有关您的错误的解释，请参阅此帖子：[https ://stackoverflow.com/a/4291851/1073631](https://stackoverflow.com/a/4291851/1073631)

我确实认为我找到了解决方法/破解方法。加入 order_product_mapping 表本身并创建一个行号。使用 row number = 1 应该与 LIMIT 1 的工作方式相同：

```
UPDATE order_product_mapping opm
  JOIN (SELECT *, @rowNum:=@rowNum+1 rn FROM order_product_mapping JOIN (SELECT @rowNum:= 0) r)
    as opm2 ON opm.product_id = opm2.product_id and opm.order_id = opm2.order_id
  JOIN product p ON p.product_id=opm.product_id AND p.product_id=1
  JOIN order_details as od ON od.order_id=opm.order_id 
SET opm.fulfillment = 'Y'
where od.order_id=100 
And rn = 1; 
```

还有一些小提琴样本：[http ://sqlfiddle.com/#!2/03f12/1](http://sqlfiddle.com/#!2/03f12/1)

# excel - 让 Excel 中的变量名保存一个值但显示一个字符串

> ID：14960389
> 
> 赞同：0
> 
> 时间：2013-02-19T14:53:01.257
> 
> 标签：excel

可能有一个技巧可以做到这一点，但在玩弄它时，我到目前为止还没有成功。

我想将一堆数字 (1,2,4,3,7) 相加，但还希望显示一个包含值 10 的字符串 (var1)。所以如果我要对每个表格单元格求和，包括 ( 1,2,4,3,7,var1)，它将等于 27 而不是 17。

我希望能够在电子表格上看到 var1 以及 27 的总和（`=SUM(G1,G2,G3,G4,G5,G6)`G6 保存字符串值`var1`并`G1-G5`保存整数的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T19:39:59.113

虽然不是问题的解决方案，但我通过使用自定义格式解决了我的问题：# "[var1]" 它显示了我想要的文本，同时也有一个整数值。但是该数字仍然可见，因此我仍在寻找真正的解决方案。

# c# - 构造后如何修改值类型中的只读字段

> ID：14960391
> 
> 赞同：2
> 
> 时间：2013-02-19T14:53:04.727
> 
> 标签：c#

来自 C# 4.0 第 7.5.5 节。

> 如果 M 是在值类型中声明的实例函数成员：
> 
> *   [...]
> *   如果 E 未被分类为变量，则创建 E 类型的临时局部变量并将 E 的值分配给该变量。然后将 E 重新分类为对该临时局部变量的引用。临时变量可以在 M 中作为 this 访问，但不能以任何其他方式访问。因此，只有当 E 是**真正的变量** （*什么是真正的变量...？*）时，调用者才有可能观察到 M 对此所做的更改。

Eric Lippert 继续说：

> 这一点说明了可变性和按值复制语义的组合可能导致麻烦的另一种方式。例如，在构造函数运行后，只读字段不会被归类为变量。因此，尝试调用改变值类型的只读字段内容的方法会成功，但实际上会改变副本！通过完全避免可变值类型来避免这些问题。

如何重现 Eric 描述的场景？我尝试了以下。正如我所料，它出错了：

```
 struct A
    {
        public readonly int mutableReadonlyField;

        public A(int originalValue)
        {
            mutableReadonlyField = originalValue;
        }

        public A MethodThatMutatesTheContentsOfAReadOnlyField(int mutate)
        {            
            this.mutableReadonlyField = mutate;//Constructor has run so mutableReadonlyField is a temporary local variable
            //ERROR: A readonly field cannot be assigned to (except in a constructor or a variable initializer)

            A newA = this;//Is this a true variable?
            return newA;
        }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T15:12:36.213

我在我的博客上举了一个例子：

[http://ericlippert.com/2008/05/14/mutating-readonly-structs/](http://ericlippert.com/2008/05/14/mutating-readonly-structs/)

问题是我的句子片段“值类型的只读字段”是模棱两可和误导的。我打算将其表示为*值类型为 S的**类*中的只读字段，但显然更自然的阅读是将其视为*S 本身*中的只读字段。我应该完全改写这句话。为错误道歉。

 **回答你的另一个问题：形容词“真”是不必要的。如果这句话只是说“因此，只有当 E 是一个变量时，调用者才有可能观察到 M 对此所做的更改。**

# c# - 如何删除file.txt的最后一行

> ID：14960392
> 
> 赞同：2
> 
> 时间：2013-02-19T14:53:06.600
> 
> 标签：c#, winforms, visual-studio-2010

我正在阅读`file.txt`using`StreamReader`和写作 using `streamWriter`。

我想知道是否可以“删除我创建的最后插入的行`? i'm inserting lines, but sometimes one of these inserts are`string.empty`. Then It goes to an`异常”......在这个异常中，我想删除我刚刚插入的那一行。

但是我重新创建文件或类似的东西，我只需要删除/擦除/删除最后一行。我可以这样做吗？

MyCode：如果你们有其他方法可以做到这一点，我将非常感激！

使用 (StreamWriter streamW = new StreamWriter(fileFinal, true)) { if (contador == numeroCampos) { contador = 0; }

```
 foreach (string s in clb_frente_impressao.Items) 
    {                            
    if (camposEscritos >= 10 * numeroCampos) 
      {
        streamW.WriteLine();
        streamW.WriteLine("-------------------------------------------------------");
        streamW.Write(nomearquivo + x.ToString());
        streamW.WriteLine();
        x++;
        camposEscritos = 0;
       }

       if (contador >= clb_frente_impressao.Items.Count)
          {
            contador = 0;
          }
       switch (s)
         {
            case "numero_carteira":
            if (campos_obrigatorios.Contains("numero_carteira") && campo.numero_carteira == "")
               {
                 dados_inexistentes++;
                 skipToNext = true;
                 break;
                }
                else if (campo.numero_carteira != "")
                   {
                      string aux = "";
                      qtdZeros = Txt_qtdZeros.Text;
                      if (qtdZeros == "")
                        {
                           qtdZeros = "8";
                        }
                   while (campo.numero_carteira.Length < Convert.ToInt32(qtdZeros))
                       {
                         campo.numero_carteira = campo.numero_carteira.Insert(0, "0");
                       }

                    if (usaC == "sim")
                        {
                      campos += @"\" + "*C" + aux + campo.numero_carteira + "*" + @"\";
                                                camposEscritos++;
                         }
                                            else
                                            {
                                                campos += @"\" + "*" + aux + campo.numero_carteira + "*" + @"\";
                                                camposEscritos++;
                                            }

                                            if (contador == 0)
                                            {
                                                streamW.WriteLine();
                                                streamW.Write("{0,-15}", campo.numero_carteira);
                                                contador++;
                                            }
                                            else
                                            {
                                                streamW.Write("{0,-15}", campo.numero_carteira);
                                                contador++;
                                            }
                                        }
                                       break;

                                    case "matricula":
                                       if (campos_obrigatorios.Contains("matricula") && campo.matricula == "")
                                       {
                                           dados_inexistentes++;
                                           skipToNext = true;
                                           break;
                                       }
                                        camposEscritos++;
                                        if (campo.matricula != "")
                                        {
                                            if (campo.tipo_pessoa == "3")
                                            {
                                                campos += @"\" + campo.matricula + "-" + campo.cod_dependente + @"\"; 
                                            }
                                            else
                                            {
                                                campos += @"\" + campo.matricula + @"\"; 
                                            }
                                        }
                                        if (contador > 0)
                                        {
                                            if (campo.cod_dependente != "")
                                            {
                                                streamW.Write("{0,-10}", campo.matricula + "-" + campo.cod_dependente);                                            
                                                contador++;
                                            }
                                            else
                                            {                                            
                                                streamW.Write("{0,-10}", campo.matricula);
                                                contador++;
                                            }
                                        }
                                        else
                                        {
                                            if (campo.cod_dependente != "")
                                            {
                                                streamW.WriteLine();
                                                streamW.Write("{0,-10}", campo.matricula + "-" + campo.cod_dependente);
                                                contador++;
                                            }
                                            else
                                            {
                                                streamW.WriteLine();
                                                streamW.Write("{0,-10}", campo.matricula);
                                                contador++;
                                            }
                                        }
                                        break;
  if (skipToNext) break;

                        } //Final do ForEach

                        if (skipToNext)
                        {
                            //HERE IS WHERE I WANT TO DELETE THE LAST LINE THAT WAS WRITED BY streamW
                            continue;
                        } 
```

例如：当它进入`case:"numero_carteira"`并且它不是空的时，它会写好，但是当我到达`matricula`AND 它的空时，它会`break`转到我创建的异常。我想删除那里的行；希望我能清楚！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T14:56:06.263

如果文件不是太大，您可以简单地使用以下代码：

```
var lines = File.ReadAllLines(pathToFile);
File.WriteAllLines(pathToFile, lines.Take(lines.Length - 1)); 
```

所以你必须写除最后一行之外的所有行。

# java - Android和Tomcat通信？

> ID：14960398
> 
> 赞同：2
> 
> 时间：2013-02-19T14:53:13.603
> 
> 标签：java, android, tomcat

我正在编写一个严重依赖于 tomcat 服务器的 android 应用程序。在我走远之前，我想获得一些关于如何设置通信的建议。应用程序发送的数据请求范围很广。实现这一点的最佳方法是什么。是序列化对象还是有更好的方法？一个好的教程的链接将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:03:17.117

我在我的应用程序中通过以下方式解决了这个问题：

首先，我使用了 RestWebService（即 JAXRS 参考实现）。这是 Tomcat 服务器上的通信端点。

然后可以使用 JSON 字符串来交换消息。Android 很好地支持它们，并且 JAXRS 与 JACKSON 结合允许轻松地将对象转换为 JSON 或反序列化它们。我通常编写一个 JSON 对象库，其中包含双方都应该可用的所有对象，并在两个项目中都包含这个库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T15:05:03.850

我对 RESTful Web 服务很满意。然后，您可以自由地开发后端，而不必过多考虑前端。我推荐 Jersey 作为 REST API，网上有一些教程（vogella.com 就是其中之一）。

# javascript - 事件在 Firefox 中不起作用

> ID：14960399
> 
> 赞同：1
> 
> 时间：2013-02-19T14:53:14.663
> 
> 标签：javascript, jquery

我有以下在 chrome 中运行良好的功能：

```
function updateUserID(element) {
  var username = $("#viewColTasks").val();
  var currentEvent = window.event;
  if (currentEvent.keyCode === 13){
  if (username == ''){
     $("#viewColTasks").attr("placeholder", "Please enter a valid username");
     $("#viewColTasks").val("");
  }
  else{
    var text = $(element).val();
    changeUserTo = text;
    socket.emit('getUserID', text);
    $("#viewColTasks").attr("placeholder", "Viewing " + username + "'s work");
    $("#viewColTasks").val("");
  }
 }
} 
```

FF不支持这个吗？我一直在研究，似乎与使用 e 作为事件有关，但我还没有设法在 chrome 和 firefox 上运行任何东西

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T14:58:21.213

您正在使用非标准（Microsoft）方式处理事件，该方式依赖于事件对象可用作全局变量。

如果您正确绑定侦听器，您将以`element`不同的方式同时获得事件目标 () 和事件对象。由于您使用的是 jQuery，因此您应该这样做：

```
$('#example_input').keydown(function(e) {
    console.log(this); // the input you're typing at
    console.log(e); // the event object (including keycode)
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T15:10:41.403

如果它是您想要的关键代码，请尝试将 keyPress 处理程序附加到文档。页面上元素中的任何按键都会冒泡，你可以在那里做你的事情。

尝试：

```
$(document).bind('keydown', function (e) {
    alert(e.keyCode);
} 
```

希望这可以帮助

# jquery - 淡入动态文本

> ID：14960401
> 
> 赞同：1
> 
> 时间：2013-02-19T14:53:21.793
> 
> 标签：jquery, fadein

不知道为什么这不起作用，但我有一个计时器，它可以像这样加载数字：

```
 function startTimer(num){
  count = num;
  countdown = setInterval(function(){

     $("#timer p.seconds").text([count]).fadeIn(300);
    count--;
  }, 1000);
 };

$(document).on('click', '.step3-btn', function(e){
    e.preventDefault();
    startTimer(30);
});

<p class="seconds"></p> 
```

我希望初始数字慢慢淡入，但该代码不起作用。它只是显示而没有褪色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:06:01.553

在这里摆弄，[http://jsfiddle.net/pqUYS/](http://jsfiddle.net/pqUYS/)

```
var count = 10,
    next;
(next = function() {
    if ( count > 0 ) {
        $("p.seconds").hide().text(count--).fadeIn(1000, next);
    }
})(); 
```

**更新小提琴**

仅在第一个数字上消失 [http://jsfiddle.net/pqUYS/3/](http://jsfiddle.net/pqUYS/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T15:16:59.393

只需检查第一个数字是否是上限，然后仅通过先隐藏它来淡入该数字。

**[jsFiddle 示例](http://jsfiddle.net/j08691/qWNuZ/)**

```
function startTimer(num) {
     count = num;
     countdown = setInterval(function () {
         if(count==num){$("p.seconds").text([count]).hide().fadeIn(300);}
         else{$("p.seconds").text([count]).fadeIn(300);}         
         count--;
     }, 1000);
 };
startTimer(30); 
```

# powershell - X509Enrollment.CX509PrivateKey 在没有管理员权限的情况下创建

> ID：14960404
> 
> 赞同：2
> 
> 时间：2013-02-19T14:53:31.130
> 
> 标签：powershell, x509certificate

我正在编写一个创建自签名证书的 Powershell 脚本，该证书作为管理员运行良好，但作为管理员失败：

当我调用 Create 方法时失败的一段代码：

```
$PrivateKey = New-Object -ComObject X509Enrollment.CX509PrivateKey
$PrivateKey.ProviderName = "Microsoft RSA SChannel Cryptographic Provider"
$PrivateKey.KeySpec = 0x1
$PrivateKey.Length = 2048

# set security descriptor
$PrivateKey.SecurityDescriptor = "D:PAI(A;;0xd01f01ff;;;SY)(A;;0xd01f01ff;;;BA)(A;;0x80120089;;;NS)"

# key will be stored in local machine certificate store
$PrivateKey.MachineContext = 0x1

# export will be allowed
$PrivateKey.ExportPolicy = 0x1
$PrivateKey.Create() 
```

它抛出这个错误：

```
Exception calling "Create" with "0" argument(s): "CertEnroll::CX509PrivateKey::Create: Access is denied. 0x80070005
(WIN32: 5)"
At C:\dev\LinoaSSC.ps1:106 char:1
+ $PrivateKey.Create()
+ ~~~~~~~~~~~~~~~~~~~~
+ CategoryInfo          : NotSpecified: (:) [], MethodInvocationException
+ FullyQualifiedErrorId : ComMethodTargetInvocation 
```

我应该如何排除或解决此错误？多谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T16:15:25.297

您需要成为本地计算机上的管理员才能执行此操作，我相信大多数操作都使用证书。我不知道有任何可接受的方法来解决这个问题，但有一些方法可以提升您的权限。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-09-29T19:10:59.917

您绝对可以允许非管理员创建机器密钥集。您只需要允许您要创建私钥的帐户对以下默认目录具有写入权限。

```
C:\ProgramData\Microsoft\Crypto\Keys
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\SystemCertificates
C:\ProgramData\Microsoft\Crypto\RSA 
```

然后，在您的代码中，在调用该方法之前提供`SecurityDescriptor`一个`CX509PrivateKey`对象`Create`。默认 SD 是`"D:P(A;;0xd01f01ff;;;CO)(A;;0xd01f01ff;;;SY)(A;;0xd01f01ff;;;BA)"`，但只需为帐户 SID 添加一个条目。

奇怪的是，SecuityDescriptor 确实允许“CO”，即 CreatorOwner，但对于 CNG 证书，私钥是由以 SYSTEM 身份运行的 lsass.exe 创建的，它模拟了请求证书的帐户。默认情况下，这不允许出于某种原因请求证书的帐户。看来，对于 CryptoAPI 证书，CreatorOwner SecurityDescriptor 确实允许使用默认 SecurityDescriptor 的请求帐户。

注意：仔细考虑对您的环境的安全影响。这将允许帐户访问机器存储中的私钥。在我的场景中，与授予帐户完全管理员权限相比，最小权限的委托人是更好的权衡。

# android - android中的光测量

> ID：14960408
> 
> 赞同：4
> 
> 时间：2013-02-19T14:53:35.490
> 
> 标签：android, camera, android-camera, photography

我正在尝试获取一个统一的值，该值指示 Android 后置（主）摄像头的光照水平。

我正在使用几个 Android 设备，并且捕获的对象是绝对静态的（相同的对象在相同的光照条件下，在相同的角度和相同的位置）并且我得到不同的值结果。我的计算基于`Aperture`、`ISO`和。我试着做：`exposure time``exposure compensation`

```
EV = AV + TV = log(Aperture^2,2) + log(1/exposure_time,2). 
```

我还尝试了以下文章中的其他一些方法：http: [//dougkerr.net/pumpkin/articles/APEX.pdf](http://dougkerr.net/pumpkin/articles/APEX.pdf)

无论如何……我得到的结果因设备而异……</p>

有谁知道如何解决它？也许我忽略了更多的价值观？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T14:11:48.283

我不确定你做了多少，但我认为一些答案可能会帮助你得出一些结论。

对于许多 Android 设备，图像信号处理链可能因型号而异，这当然取决于制造 ISP 的人，甚至是为设备完成的调整。有些型号可能已经成功调整了他们的设备，因此您可以获得一定程度的预期结果，但其他型号可能没有。

其他因素包括未知的色调曲线和其他后处理块，除非您一直在开发设备，否则很难准确找出这些块。

# php - 无法使用 Buffer API 发布“€”符号

> ID：14960411
> 
> 赞同：0
> 
> 时间：2013-02-19T14:53:42.160
> 
> 标签：php, encoding

我将 Buffer API 与 PHP 一起使用，但我不知道如何发布 € 符号。我试过不编码，url编码和utf8编码，但这些都没有奏效。

如果我尝试发布：“我口袋里有 5 欧元，哈哈”我得到的只是：“我口袋里有 5 欧元，哈哈”

我怎样才能发布这种符号？谢谢！

这是代码：

```
require_once 'class.bufferapp.php';
$buffer = new BufferPHP('1/XXXXXXXXXXXXXXXXXXXXXXX');
$data = array('profile_ids' => array());
$data['profile_ids'][] = 'XXXXXXXXXXXXXXXXXXX';

$data['text'] = "I have 5€ in my pocket lol";
$ret = $buffer->post('updates/create', $data);
var_dump($ret);

/* Response:

object(stdClass)#2 (5) { ["updates"]=> array(1) { [0]=> object(stdClass)#3 (16) { ["_id"]=> string(24) "XXXXXXXXXXXXXXXXXXXX" ["client_id"]=> string(24) "XXXXXXXXXXXXXXXXXXX" ["created_at"]=> int(1361285095) ["day"]=> string(5) "Today" ["due_at"]=> int(1361289540) ["due_time"]=> string(7) "4:59 pm" ["id"]=> string(24) "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX" ["profile_id"]=> string(24) "XXXXXXXXXXXXXXXX" ["profile_service"]=> string(7) "twitter" ["status"]=> string(6) "buffer" ["text"]=> string(25) "I have 5 in my pocket lol" ["text_formatted"]=> string(25) "I have 5 in my pocket lol" ["type"]=> string(4) "text" ["updated_at"]=> int(1361285095) ["user_id"]=> string(24) "XXXXXXXXXXXXXXXXXXX" ["via"]=> string(3) "api" } } ["buffer_percentage"]=> int(20) ["buffer_count"]=> int(2) ["success"]=> bool(true) ["message"]=> string(49) "One more tweet in your Buffer. Keep it topped up!" } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:01:22.760

将符号替换为 €

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-19T15:24:56.747

它对我有用`\xE2\x82\xAc`

希望对你有帮助！

# android - 如何在运行时更改小部件的颜色？

> ID：14960413
> 
> 赞同：3
> 
> 时间：2013-02-19T14:53:46.767
> 
> 标签：android

我正在尝试使用另一个类更改小部件的颜色。但我找不到要更改的布局，因为此布局位于另一个 xml 文件中。小部件布局有一个使用 shape.xml 作为背景的 LinearLayout。我已经尝试了很多东西，但没有任何效果。

这是 MyShape.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="rectangle"
>
<solid
android:color="#DDf5f5f5" />

<stroke
android:width="2dp"
android:color="#FFFFFFFF" />

<corners
android:bottomLeftRadius="7dp"
android:bottomRightRadius="7dp"
android:topLeftRadius="7dp"
android:topRightRadius="7dp" />
</shape> 
```

这就是我单击更改颜色按钮时班级所做的事情：

```
public void onClick(View v) {

LayoutInflater inflater = (LayoutInflater)getApplicationContext().getSystemService(getApplicationContext().LAYOUT_INFLATER_SERVICE);
LinearLayout myRoot = new LinearLayout(getApplicationContext());
View itemView = inflater.inflate(R.layout.widget_layout, myRoot);
LinearLayout linear = (LinearLayout) itemView.findViewById(R.id.layout);

GradientDrawable sd = (GradientDrawable) linear.getBackground().mutate();
sd.setColor(picker.getColor());
} 
```

WidgetColorPicker 类使用布局“widget_color.xml”，而我要更改的 LinearLayout 位于“widget_layout.xml”上。

# javascript - 使用 ColorBox 时的 JavaScript 错误

> ID：14960418
> 
> 赞同：1
> 
> 时间：2013-02-19T14:53:50.390
> 
> 标签：javascript, jquery, colorbox

这是我收到的一些错误截图：http: [//imgur.com/a/lU5UI#0](http://imgur.com/a/lU5UI#0)

错误内容为：“未捕获的 TypeError：对象函数 (a,b){return new p.fn.init(a,b,c)} 没有方法 'colorbox'”

“未捕获的 TypeError；对象不是函数”

```
 <script>

    $("document").ready(function (){ 

           // load the overlay

            if (document.cookie.indexOf('visited=true') == -1) {
                var fifteenDays = 1000*60*60*24*15;
                var expires = new Date((new Date()).valueOf() + fifteenDays);
                document.cookie = "visited=true;expires=" + expires.toUTCString();
                $.colorbox({width:"580px", inline:true, href:"#subscribe_popup"});
            }

            $(".open_popup").colorbox({width:"580px", inline:true, href:"#subscribe_popup"});

     });

    </script> 
```

我正在使用 Colorbox v.1.3.16 和 jQuery v.1.8.2

# java - 在 Java 中使用带标签的 break 是一种好习惯吗？

> ID：14960419
> 
> 赞同：89
> 
> 时间：2013-02-19T14:53:53.770
> 
> 标签：java

我盯着 2001 年的一些旧代码，发现了这个声明：

```
 else {
     do {
       int c = XMLDocumentFragmentScannerImpl.this.scanContent();
       if (c == 60) {
         XMLDocumentFragmentScannerImpl.this.fEntityScanner.scanChar();
         XMLDocumentFragmentScannerImpl.this.setScannerState(1);
         break label913;
       } 
```

我以前从未见过这个，并在这里发现了标记的中断：

[http://docs.oracle.com/javase/tutorial/java/nutsandbolts/branch.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/branch.html)

这不是本质上的功能`goto`吗？使用它甚至是一种好习惯吗？这让我很不安。

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2013-02-19T14:56:45.340

不，它不像 goto，因为您不能“转到”控制流的另一部分。

从您链接的页面：

> break 语句终止带标签的语句；它不会将控制流转移到标签。控制流被转移到紧跟在标记（终止）语句之后的语句。

这意味着您只能中断当前正在执行的循环。

考虑这个例子：

```
first:
for( int i = 0; i < 10; i++) {
  second:
  for(int j = 0; j < 5; j ++ )
  {
    break xxx;
  }
}

third:
for( int a = 0; a < 10; a++) {

} 
```

您可以替换`xxx`为`first`或`second`（以中断外部或内部循环），因为两个循环都在执行，当您点击`break`语句时，但替换`xxx`不会`third`编译。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-02-19T14:59:02.703

它没有那么可怕，`goto`因为它只将控制发送到标记语句的末尾（通常是循环构造）。令人`goto`不快的是，它是任何地方的任意分支，包括在方法源代码中找到的标签，因此您可以拥有本地循环行为。Java 中的标签中断功能不允许这种疯狂，因为控制只会向前推进。

大约 12 年前我只使用过一次，在我需要打破嵌套循环的情况下，更结构化的替代方案可以在循环中进行更复杂的测试。我不建议经常使用它，但我不会将其标记为自动错误代码气味。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-05-24T08:25:03.857

总是可以`break`用新方法代替。

考虑检查两个列表中任何公共元素的代码：

```
List list1, list2;

boolean foundCommonElement = false;
for (Object el : list1) {
    if (list2.contains(el)) {
        foundCommonElement = true;
        break;
    }
} 
```

你可以像这样重写它：

```
boolean haveCommonElement(List list1, List list2) {
    for (Object el : list1) {
        if (list2.contains(el)) {
            return true;
        }
    }
    return false;
} 
```

当然，要检查两个列表之间的共同元素，最好使用额外内存的`list1.retainAll(new HashSet<>(list2))`方法来执行此操作，或者对两个列表进行排序，然后在.`O(n)``O(n)``O(n * log n)``O(n)`

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-02-19T16:19:57.380

在阅读此答案的其余部分之前，请阅读[Go To Statement Considered Harmful](http://www.u.arizona.edu/~rubinson/copyright_violations/Go_To_Considered_Harmful.html)。如果您不想完整阅读它，这是我认为的关键点：

> 无节制地使用 go to 语句的直接后果是，很难找到一组有意义的坐标来描述过程进度。

或者换种说法，问题`goto`在于程序可以到达代码块的中间，而程序员当时并不了解程序状态。标准的面向块的结构旨在清楚地描述状态转换，标记`break`旨在将程序带到特定的已知状态（包含标记块的外部）。

在现实世界的命令式程序中，状态并没有由块边界清楚地描绘，因此标记是否`break`是一个好主意是值得怀疑的。如果块改变了从块外部可见的状态，并且有多个点可以退出块，则 a 标签`break`等效于原语`goto`。唯一的区别是，与其有机会降落在具有不确定状态的块的中间，不如启动一个具有不确定状态的新块。

所以，一般来说，我会认为一个标签`break`是危险的。在我看来，这表明该块应该被转换为一个函数，对封闭范围的访问是有限的。

然而，这个示例代码显然是解析器生成器的产物（OP 评论说它是 Xerces 源代码）。解析器生成器（或一般的代码生成器）通常会随意使用它们生成的代码，因为它们对状态有完美的了解，而人类不需要理解它。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-12-17T13:26:31.810

至少在我看来，表达意图的一种更简洁的方式可能是将包含循环的代码片段放入一个单独的方法中，然后简单地`return`从中提取出来。

例如，改变这个：

```
someLabel:
for (int j = 0; j < 5; j++)
{
    // do something
    if ...
        break someLabel;
} 
```

进入这个：

```
private void Foo() {
    for (int j = 0; j < 5; j++)
    {
        // do something
        if ...
            return;
    }
} 
```

对于精通其他语言的开发人员来说，这也更惯用，这些语言可能在未来（或[未来的你](https://www.futureme.org/)）使用你的代码。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-19T14:59:02.607

这不像一个`goto`语句，你在其中向后跳转流控制。标签仅向您（程序员）显示中断发生的位置。此外，流控制转移到`break`.

关于使用它，我个人认为它没有什么大用处，因为一旦你开始编写价值数千行的代码，它就变得微不足道了。但同样，这将取决于用例。

# c# - 如何定义一个在任何地方都可以使用的变量

> ID：14960420
> 
> 赞同：1
> 
> 时间：2013-02-19T14:53:56.973
> 
> 标签：c#

根据下面的代码，在获取一些值（newrev，newreview）并放入变量后，我需要将它们放入标签中（“some text”+newrev）。但我有问题（newrev）在当前上下文中不存在。

```
Label1.Text = "Review Number:" + newReview + "(for preparing of Rev." + newrev+")";

protected void ddlProjectDocument_SelectedIndexChanged(object sender, EventArgs e)
{
    _DataContext = new EDMSDataContext();

    var x = ddlProjectDocument.SelectedValue;

    var MaxRev = (from rev in _DataContext.tblTransmittalls
                  where rev.DocID.ToString() == ddlProjectDocument.SelectedValue
                  select  rev.REV).Max();

    if (MaxRev == null)
    {
        var newRev = 0;

    }

    else
    {

        var newRev = Convert.ToInt32(MaxRev) + 1;

    }

    var MaxReview = (from rev in _DataContext.tblFiles
                  where (rev.DocId.ToString()==ddlProjectDocument.SelectedValue)&&   
                        (rev.Rev.ToString()==MaxRev)
                  select rev.Review).Max();

    if (MaxReview == null)
    {
        var newReview = 1;
    }

    else
    {    
        var newReview = Convert.ToInt32(MaxReview) + 1;
    }

    Label1.Text = "Review Number:" + newReview + "(for preparing of Rev." + newrev+")";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T14:57:48.007

像这样定义`newRev`并`newReview`在函数的开头：

```
protected void ddlProjectDocument_SelectedIndexChanged(object sender, EventArgs e)
{
    _DataContext = new EDMSDataContext();
    int newRev;
    int newReview; 
```

然后，当您想使用它们时，而不是编写`var newReview = ...`（声明一个新变量）删除`var`... 例如：

```
if (MaxReview == null)
{
    newReview = 1;
} 
```

**区别：** 声明的每个变量都有一个***[Scope](http://www.blackwasp.co.uk/CSharpVariableScopes.aspx)***，它决定了它对程序其余部分的可见性。在您的情况下， the*仅在**statement*`newReview`内部已知，因此当您尝试在外部引用它时，它不再存在。*`if`*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T14:56:45.557

您需要在声明`newRev`之外`if`声明。

```
int newrev;
if(MaxRev == null)
    newRev = 0;
else
    newRev = Convert.ToInt32(MaxRev) + 1; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T14:58:01.970

C# 不是 JavaScript，你应该少用“var”……你在里面定义你的 newRev

```
if (MaxRev == null)
{
    var newRev = 0;
} 
```

在这里定义

```
protected void ddlProjectDocument_SelectedIndexChanged(object sender, EventArgs e)
{
     _DataContext = new EDMSDataContext();
     var newRev = 0;
     ....
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-19T14:58:49.830

这是因为您在各种 if 语句中声明 newRev，在外部级别声明它：

```
int newRev;
if (MaxRev == null)
{
    newRev = 0;

} 
```

# php - 使用数组简化 if else 语句

> ID：14960421
> 
> 赞同：0
> 
> 时间：2013-02-19T14:54:09.583
> 
> 标签：php, arrays, wordpress, if-statement

我为不同的样式表选择设置了 wordpress 主题设置，该设置是在前端使用 if else 语句设置的。

我的 wordpress 设置可能具有以下值池中的一个值

```
red ,green, blue, yellow, white, pink, black, grey ,silver or purple 
```

我的模板：

```
<link href="<?php bloginfo("template_url"); ?>/style.css" rel="stylesheet" media="all" />

<?php if (get_option('my_style') == "red"  : ?>
<link href="<?php bloginfo("template_url"); ?>/css/red.css" rel="stylesheet" media="all" />
<?php endif; ?>

<?php if (get_option('my_style') == "green"  : ?>
<link href="<?php bloginfo("template_url"); ?>/css/green.css" rel="stylesheet" media="all" />
<?php endif; ?>

<?php if (get_option('my_style') == "blue"  : ?>
<link href="<?php bloginfo("template_url"); ?>/css/blue.css" rel="stylesheet" media="all" />
<?php endif; ?>

<?php if (get_option('my_style') == "yellow"  : ?>
<link href="<?php bloginfo("template_url"); ?>/css/yellow.css" rel="stylesheet" media="all" />
<?php endif; ?>
.
.
.
.
.
<?php if (get_option('my_style') == "purple"  : ?>
<link href="<?php bloginfo("template_url"); ?>/css/purple.css" rel="stylesheet" media="all" />
<?php endif; ?> 
```

通过这种方式，我可以根据需要获得特定的样式表。但是，如果选项池中有更多价值，则此 php 代码会变得冗长。那么有没有办法使用数组来缩短它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T14:58:54.050

也许你可以把它减少到

```
<link href="<?php bloginfo("template_url"); ?>/css/<?php echo get_option('my_style'); ?>.css" rel="stylesheet" media="all" /> 
```

`get_option`如果函数返回与 css 文件名称相同的字符串，我认为您不需要数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T14:57:54.500

这个选项：

```
<?php
$arraystyle=array("red", "green", "blue", "yellow", "white", "pink", "black", "grey", "silver", "purple");

$val=get_option('my_style');
if(!in_array($val, $arraystyle)){
    echo "Style not found";
    return false;
}
?>

<link href="<?php bloginfo("template_url"); ?>/css/<?php echo $arraystyle[$val];?>.css" rel="stylesheet" media="all" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T15:01:43.990

这里没有真正需要使用数组。您正在根据某个值更改要包含的 CSS 文件。

我认为您正在寻找的是 switch case 命令。这是您可以用它做什么的简单示例-

```
<?php

$my_style = get_option('my_style');
switch($my_style){
 case "red":
   echo '<link href="'. bloginfo("template_url"). '/css/red.css" rel="stylesheet" media="all" />';
 break;
 case "green":
   echo '<link href="'. bloginfo("template_url"). '/css/green.css" rel="stylesheet" media="all" />';
 break;
 default :
   echo '<link href="'. bloginfo("template_url"). '/css/default.css" rel="stylesheet" media="all" />';
 break;
}

?> 
```

`my_style`使用此方法，您可以为每个选项包含多个更改。请注意使用默认情况来处理任何意外值...

参考 -

*   [`switch structures`](http://php.net/manual/en/control-structures.switch.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T15:11:31.840

```
<?php
$my_styles = array(
    'red',
    'green',
    'blue',
    'yellow',
    'white',
    'pink',
    'black',
    'grey',
    'silver'
);
?>
<?php if(in_array($my_style = get_option('my_style'),$my_styles)) : ?>
    <link href="<?php echo bloginfo("template_url")."/css/{$my_style}.css"; ?>" rel="stylesheet" media="all" /> 
<?php endif; ?> 
```

您可以使用 $my_styles 使用所有可用样式填充变量，无论是来自数据库还是其他任何样式。

# java - Android 本地通知 Cordova：等待 cancelAll 完成

> ID：14960424
> 
> 赞同：1
> 
> 时间：2013-02-19T14:54:15.260
> 
> 标签：java, javascript, android, cordova

我有带有本地通知插件的 Cordova 应用程序。问题是它`cancelAll()`不会等到它完成，所以在我添加新消息时它仍在删除。

如何同步线程以`cancelAll()`等待？

一些相关代码`AlarmHelper::cancelAll()`

```
/**
 * @see LocalNotification#cancelAllNotifications()
 */
public boolean cancelAll(SharedPreferences alarmSettings) {
    final Map<String, ?> allAlarms = alarmSettings.getAll();
    final Set<String> alarmIds = allAlarms.keySet();

    for (String alarmId : alarmIds) {
        Log.d(LocalNotification.PLUGIN_NAME, "Canceling notification with id: " + alarmId);
        String alarmInt = alarmId;
        cancelAlarm(alarmInt);
    }

    return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:02:21.360

> 如何同步线程以使 cancelAll() 等待？

你不能。`cancelAll()`是异步的。

> 问题是 cancelAll() 不会等到它完成，所以在我添加新消息时它仍在删除。

你为什么首先打电话`cancelAll()`？就地更新您的通知。

另外，请不要有多个通知，因为这被认为是糟糕的形式。为所有未完成的“消息”提供*一个*通知，当用户对这些“消息”采取行动（例如，访问收件箱）时，该通知将被清除。

# nsis - NSIS 卸载程序 - 缺少应用程序名称（动态设置）

> ID：14960426
> 
> 赞同：1
> 
> 时间：2013-02-19T14:54:22.083
> 
> 标签：nsis

我创建了一个 NSIS 安装程序，其中应用程序的名称取自 .INI 文件（必须如此，因为它将用于多个应用程序）。

```
Name $APP_NAME
....
Function .onInit
    ReadINIStr $R3 ${TECHPUB_INI_FILE} "General" "Installer_name"
    StrCpy $APP_NAME $R3
....
FunctionEnd
....
Section install
....
WriteUninstaller $INSTDIR\Uninstall.exe
....
SectionEnd 
```

应用程序名称正确显示在安装程序上，它是 .INI 文件中的名称。当我卸载应用程序时，名称丢失。

[http://i48.tinypic.com/1934w9.png](http://i48.tinypic.com/1934w9.png)

其他一切正常（卸载删除了它必须删除的所有内容）。知道如何解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:24:10.970

卸载程序的 init 函数是一个单独的`un.onInit`函数。请参阅[卸载回调](http://nsis.sourceforge.net/Docs/Chapter4.html#4.7.2.2)。

# python - 获取两个一维 numpy 矩阵的乘积

> ID：14960431
> 
> 赞同：1
> 
> 时间：2013-02-19T14:54:32.033
> 
> 标签：python, matrix, numpy

我有两个一维 numpy 矩阵：

`[[ 0.69 0.41]]`和`[[ 0.81818182 0.18181818]]`

我想将这两个相乘得到结果

`[[0.883, 0.117]]`（结果归一化）

如果我使用`np.dot`我得到`ValueError: matrices are not aligned`

有人知道我做错了什么吗？

**编辑**

我以一种 hacky 的方式解决了它，但它对我有用，不管是否有更好的解决方案。

```
new_matrix = np.matrix([ a[0,0] * b[0,0], a[0,1] * b[0,1] ]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:45:14.713

看来你想做逐元素数学。Numpy 数组默认执行此操作。

```
In [1]: import numpy as np

In [2]: a = np.matrix([.69,.41])

In [3]: b = np.matrix([ 0.81818182, 0.18181818])

In [4]: np.asarray(a) * np.asarray(b)
Out[4]: array([[ 0.56454546,  0.07454545]])

In [5]: np.matrix(_)
Out[5]: matrix([[ 0.56454546,  0.07454545]]) 
```

# php - 如何在不登录的情况下实现支付后传递信息的秘密 url？

> ID：14960433
> 
> 赞同：1
> 
> 时间：2013-02-19T14:54:35.000
> 
> 标签：php, url

我想在贝宝付款后使用贝宝退货网址向客户提供一些信息，而无需客户登录。

所以我认为我需要一个系统来为每个事务创建 url，并避免猜测另一个事务的 url。

我想到了类似的东西：

> http://www.domain.com/product/send.php?productID=12&transactionHash=[thisTransactionHash]

使用可以根据客户的电子邮件和产品唯一 ID 计算的 transactionHash。

这种方法有意义吗？或者您的建议是什么？无需登录即可提供信息，并避免客户猜测其他产品的网址？

* * *

尽管它们是关于哈希的几个有趣的答案，但我上面提到的想法仍然存在一个问题：Paypal 需要接收返回 url，因此信息在付款之前传递，因此该方法不能防止欺诈。

我看到的唯一安全方式是 Paypal 交付系统，这就是我接受这个答案的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:56:51.770

“使用可以根据客户的电子邮件和产品唯一 ID 计算的 transactionHash。”

一旦知道算法，您的系统就会崩溃。我的建议是“安全”又名加密 PRNG + 一些查找表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T15:05:24.210

您可以在任何给定时间为用户创建一个随机 id，甚至可以在网络上使用一些真正的随机生成器。

但是你应该做的是让它在特定的时间内成为唯一的，也许使用一个简单的数据库结构，也许将信息存储到你服务器上的文件中，一旦它们被读取一次，就会被同一个脚本删除，取决于根据您的需要。

因此，每当用户生成此类唯一 ID 时，他都可以在一段时间内或仅访问一次该信息。

使用说 random.org 的随机字节函数，您可以生成如下字符串： 6f0d47cf3432d4015e0e798641191bf0e8e0b90b00df23181bcb3401a0dad43d85be711343c3baa9 即使其他人知道产品ID和所述客户的电子邮件地址，这也几乎不可能猜到

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T15:11:58.377

使用哈希来访问一些存储的信息而不需要登录并不是一个坏主意。但是，不应根据已知数据（如 ID、电子邮件地址或任何用户可能知道或猜到的类似数据）生成该哈希值。

相反，有必要随机生成一个足够长的哈希值，该值无法从任何已知数据中猜测或生成。random.org 中已经提到的 byte 函数可能是一个不错的选择。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-19T15:22:34.310

如果您只针对 PayPal，为什么不查看即时付款通知指南？ [https://www.x.com/sites/default/files/ipnguide.pdf](https://www.x.com/sites/default/files/ipnguide.pdf)

我以前没有使用过 Paypal，但这似乎解决了您的问题。

创建表：| product_id（您产品的唯一 ID）| varchar transaction_hash |

在此示例代码（PHP 示例）中： [https ://www.x.com/developers/PayPal/documentation-tools/code-sample/216623](https://www.x.com/developers/PayPal/documentation-tools/code-sample/216623)

验证付款正确后，在表中插入产品 ID 和 verify_sign(value from paypal POST data)。并为用户提供带有产品 ID 和 verify_sign 的 URL。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T15:02:46.037

包括一个哈希参数，其值是根据几个参数计算的。例如，对于您的 url，o 会像这样计算哈希：

```
$uniqueKeyString="some random characters";
transactionHash=md5("domain.com".$productId.time().$uniqueKeyString); 
```

`$uniqueKeyString`只有你知道的秘密值（一些随机整数）在哪里。比，当请求到达您的服务器时，您可以简单地自己计算哈希字符串并将其与`transactionHash`请求的哈希字符串进行比较是否相同。

# c++ - 正确包含标题

> ID：14960442
> 
> 赞同：0
> 
> 时间：2013-02-19T14:54:54.747
> 
> 标签：c++, eclipse, optimization, arduino

第一个问题。如果我在第二个类的头文件中包含一个类的头文件，我是否必须在第二个类的 .cpp 文件中包含第一个类的头文件？

在第二类的 .cpp 文件中，我包含了它的标题，其中包含第一类的 .h 文件。那么这不是正确的还是我必须将第一类的头文件也包含到第二类的 .cpp 文件中？

第二个问题。我有两节课。第一个有静态变量和函数，所以我可以在不创建对象的情况下调用它。在第一堂课我有第二堂课的静态对象。现在在第二堂课中，我想将第一堂课的某些函数的返回值作为操作数传递给第一堂课的函数。在第二节课上我没有收到错误，但是在我之前在第一节课中提到的静态对象的声明中出现了错误。为什么会这样？

编码：

头文件：

```
 /*
  * NTPlib.h
  *
  *  Created on: 13 Feb 2013
  *  Author    : Platonas
  */

#ifndef NTP_H_
#define NTP_H_

#include "Arduino.h"
#include "SPI.h"
#include "IPAddress.h"
#include "EthernetUdp.h"
#include "Ethernet.h"
#include "DayNumber.h"

class NTP {
    private:

    public:
        static EthernetUDP Udp;
        static DayNumber DN;

        static const int Gmt = 2;
        static const unsigned int localPort = 8888;
        static const int NTP_PACKET_SIZE = 48;

        static byte packetBuffer[NTP_PACKET_SIZE ];

        static unsigned long secsSince1900;
        static unsigned long UnixTime;
        static int utchour;
        static int lcthour;
        static int min;
        static int sec;
        static int year;
        static int month;
        static int date;
        static int dayOfWeek;
        static bool timeSet;

        NTP();
        static NTP getTime();
        static bool testNtpServer();
        static void startEthernetAndUdp();
        static unsigned long sendNTPpacket(IPAddress& address);
        static int getYear();
        static int getMonth();
        static int getDate();
        static int getDayOfWeek();
        static int getUTChour();
        static int getLCThour();
        static int getMin();
        static int getSec();
        static void serialPrinting();

        virtual ~NTP();
};

#endif /* NTPLIB_H_ */ 
```

和

```
 /*
      DayNumber.h - Library for calculation of day's number on 1 and 4 years loop.
      Created by Pavlidis Kyriakos, December 20, 2012.
      Released into the public domain.
    */

    #ifndef DayNumber_H_
    #define DayNumber_H_

    #include "NTP.h"

    class DayNumber {

        private:
            int _day1YearLoop[];
            int _day4YearLoop[];

        public:

            int Days1YearLoop;
            int Days4YearLoop;

        DayNumber();
        void dayNumberCalc();
        virtual ~DayNumber();

        bool checkLeapYear(int setYear);
    };

#endif 
```

.cpp 文件：

```
/*
  NTP.cpp - Library for NTP server.
  Created by Pavlidis Kyriakos, Feb 13, 2013.
  Released into the public domain.
*/

#include "NTP.h"
#include "DayNumber.h"

unsigned long NTP::UnixTime = 0;
unsigned long NTP::secsSince1900 = 0;
int NTP::utchour = 99;
int NTP::lcthour = 99;
int NTP::min = 99;
int NTP::sec = 99;
int NTP::year = 99;
int NTP::month = 99;
int NTP::date = 99;
int NTP::dayOfWeek = 99;
byte NTP::packetBuffer[NTP_PACKET_SIZE ];
bool NTP::timeSet = false;
DayNumber NTP::DN = DayNumber();
EthernetUDP NTP::Udp = EthernetUDP();

NTP::NTP() {
    // TODO Auto-generated constructor stub
}

NTP NTP::getTime() {

    if (testNtpServer()) {
        timeSet = true;

        // We've received a packet, read the data from it
        Udp.read((unsigned char*)packetBuffer,NTP_PACKET_SIZE);  // Read the packet into the buffer

        // The timestamp starts at byte 40 of the received packet and is four bytes,
        // or two words, long. First, extract the two words:
        unsigned long highWord = word(packetBuffer[40], packetBuffer[41]);
        unsigned long lowWord = word(packetBuffer[42], packetBuffer[43]);

        // Combine the four bytes (two words) into a long integer.
        // This is NTP time (seconds since Jan 1 1900):
        secsSince1900 = highWord << 16 | lowWord;

        // Now convert NTP time into everyday time:
        // Unix time starts on Jan 1 1970\. In seconds, that's 2208988800:
        const unsigned long seventyYears = 2208988800UL;

        // Subtract seventy years:
        UnixTime = secsSince1900 - seventyYears;

        sec = UnixTime % 60;

        //Calc min
        min = (UnixTime/60)%60;

        //Calc hour
        utchour = (UnixTime/3600)%24;
        lcthour = utchour + Gmt;

        //Day of the week
        dayOfWeek = (((UnixTime/86400UL) + 3) % 7) + 1; //Setting first day Sunday = 1

        //Calculating years
        unsigned long UnixTimeToDays = UnixTime/86400UL;
        //Serial.println(UnixTimeToDays);
        unsigned long calcDaysInYears = 0;
        int calcYear = 1970;
        while((calcDaysInYears += (DN.checkLeapYear(calcYear)? 366:365)) <= UnixTimeToDays) {
            calcYear++;
        }
        year = calcYear;

        //Calculating days in this year
        calcDaysInYears -= (DN.checkLeapYear(calcYear)? 366:365);
        int daysPassedInYear = UnixTimeToDays - calcDaysInYears;

        //Set DayNumber one year loop
        DN.Days1YearLoop = daysPassedInYear + 1;

        //calculating date and month
        static const uint8_t monthDays[] = {31,28,31,30,31,30,31,31,30,31,30,31};
        int calcMonth;
        int monthLength;

        for (calcMonth = 0; calcMonth<12; calcMonth++) {
            if (DN.checkLeapYear(year)) {
                monthLength = (calcMonth == 1) ? 29: 28;
            }
            else {
                monthLength = monthDays[calcMonth];
            }
            if ( daysPassedInYear > monthLength) {
                daysPassedInYear -= monthLength;
            }
            else {
                break;
            }
        }
        month = ++calcMonth;
        date = ++daysPassedInYear;

        serialPrinting();

        return NTP();
    }
    else {
        //Error me tous ntp diavazoume wra apo DS1307
        Serial.println("pame gia RTC");
        return NTP();
    }
}

unsigned long NTP::sendNTPpacket(IPAddress& address) {
  // Set all bytes in the buffer to 0
  memset(packetBuffer, 0, NTP_PACKET_SIZE);

  // Initialize values needed to form NTP request
  // (see URL above for details on the packets)
  packetBuffer[0] = 0b11100011;   // LI, Version, Mode
  packetBuffer[1] = 0;     // Stratum, or type of clock
  packetBuffer[2] = 6;     // Polling Interval
  packetBuffer[3] = 0xEC;  // Peer Clock Precision
  // Eight bytes of zero for Root Delay & Root Dispersion
  packetBuffer[12]  = 49;
  packetBuffer[13]  = 0x4E;
  packetBuffer[14]  = 49;
  packetBuffer[15]  = 52;

  // All NTP fields have been given values, now
  // you can send a packet requesting a timestamp:
  Udp.beginPacket(address, 123); //NTP requests are to port 123
  Udp.write(packetBuffer,NTP_PACKET_SIZE);
  Udp.endPacket();
}

void NTP::startEthernetAndUdp() {
    //Declaration of the mac address of ethernet shield
    byte mac[] = {0x00,0xAA,0xBB,0xCC,0xDE,0x02};
    if (Ethernet.begin(mac) == 0) {
        Serial.println("Failed to configure Ethernet using DHCP");
        // No point in carrying on, so do nothing forevermore:
        //for(;;)
        //    ;
        //Prepei na diorthwthei na kanei bypass to DHCP kai na paei sto RTC an den exei internet
    }
    Udp.begin(localPort);
}

bool NTP::testNtpServer() {
    //(193,93,167,241 ); //GR time server on athens ntp.asda.gr
    //(129,215,160,240 ); //UK extntp0.inf.ed.ac.uk School of Informatics, University of Edinburgh, Scotland, UK
    //(138,195,130,71 ); //FR ntp.via.ecp.fr VIA, Ecole Centrale Paris, France
    //(132, 163, 4, 101); // time-a.timefreq.bldrdoc.gov NTP server
    //(193,93,167,239); //GR time server on athens ChronosAsdaGr
    //(132, 163, 4, 102); // time-b.timefreq.bldrdoc.gov NTP server
    //(132, 163, 4, 103); // time-c.timefreq.bldrdoc.gov NTP server

    byte serverslist[4][4] = {
            193,93,167,241,
            129,215,160,240,
            138,195,130,71,
            132,163,4,101
    };
    IPAddress ntpServers(serverslist[0]);
    sendNTPpacket(ntpServers);
    int x = 0;
    delay(1000);

    //Checking different NTP server if someone is down
    while(!Udp.parsePacket() && x <= 3) {

        //Have to check parsePacket return.
        x++;
        IPAddress ntpServers(serverslist[x]);
        sendNTPpacket(ntpServers);
        delay(1000);
    }

    switch (x) {
        case 0:
            Serial.println("1st NTPServer working");
            return true;
            break;
        case 1:
            Serial.println("2st NTPServer working");
            return true;
            break;
        case 2:
            Serial.println("3st NTPServer working");
            return true;
            break;
        case 3:
            Serial.println("4st NTPServer working");
            return true;
            break;
        default:
            Serial.println("All NTP Servers are Down");
            return false;
    }
}

int NTP::getYear() {
    do {
        getTime();
    } while(timeSet == false);
    return year;
}

int NTP::getMonth() {
    do {
        getTime();
    }while(timeSet == false);
    return month;
}

int NTP::getDate() {
    do {
        getTime();
    } while(timeSet == false);
    return date;
}
int NTP::getDayOfWeek() {
    do {
        getTime();
    } while(timeSet == false);
    return dayOfWeek;
}
int NTP::getUTChour() {
    do {
        getTime();
    } while(timeSet == false);
    return utchour;
}
int NTP::getLCThour() {
    do {
        getTime();
    } while(timeSet == false);
    return lcthour;
}
int NTP::getMin() {
    do {
        getTime();
    } while(timeSet == false);
    return min;
}
int NTP::getSec() {
    do {
        getTime();
    } while(timeSet == false);

    return sec;
}

void NTP::serialPrinting() {

    //Serial.PRINTS
    //print seconds since 1900
    Serial.print("Seconds since Jan 1 1900 = " );
    Serial.println(secsSince1900);

    // print Unix time:
    Serial.print("Unix time = ");
    Serial.println(UnixTime);

    //print year
    Serial.print("the year is :");
    Serial.println(year);

    //print month
    Serial.print("Month is : ");
    Serial.print(month);

    //print date
    Serial.print(" Date is: ");
    Serial.println(date);

    //print dayOfWeek
    Serial.print("the day is : ");
    Serial.println(dayOfWeek);

    //printnumber of days that passed in this year (this day counts DayNumber object)
    Serial.print("This day is the number:");
    Serial.println(DN.Days1YearLoop);

    //print Local Time Hour
    Serial.print("The LTC time is ");
    Serial.println(lcthour);

    // Print the hour, minute and second:
    Serial.print("The UTC time is "); // UTC is the time at Greenwich Meridian (GMT)
    Serial.print(utchour); // Print the hour (86400 equals secs per day)
    Serial.print(':');

    if ( min < 10 ) {
        // In the first 10 minutes of each hour, we'll want a leading '0'.
        Serial.print('0');
    }
    Serial.print(min); // Print the minute (3600 equals secs per minute)
    Serial.print(':');

    if ( sec < 10 ) {
        // In the first 10 seconds of each minute, we'll want a leading '0'.
        Serial.print('0');
    }
    Serial.println(sec); // Print the seconds
}
NTP::~NTP() {
    // TODO Auto-generated destructor stub
} 
```

和

```
/*
  DayNumber.cpp - Library for Calculation of Day's Number on 1 and 4 years loop.
  Created by Pavlidis Kyriakos, December 20, 2012.
  Released into the public domain.
*/

#include "DayNumber.h"

DayNumber::DayNumber() {

}

void DayNumber::dayNumberCalc() {

    int setYear = NTP::getYear();
    int setMonth = NTP::getMonth();
    int setDay = NTP::getDate();

    //Days that passed from the begging of the year for the 1st Day each Month
    int _day1YearLoop[] = {0,31,59,90,120,151,181,212,243,273,304,334};
    //i = _day1YearLoop;

    //Days that passed from the beginning of the second Year since the for the 1st Day of the running Year in 4 years loop.
    int _day4YearLoop[] = {366,731,1096};

    if (checkLeapYear(setYear)) {
        if (setMonth>2) { //Diorthwsi gia ton mina flebari
            Days1YearLoop = *(_day1YearLoop+(setMonth-1)) + setDay + 1;
            Days4YearLoop = Days1YearLoop;
        }
        else {
            Days1YearLoop = *(_day1YearLoop+(setMonth-1)) + setDay;
            Days4YearLoop = Days1YearLoop;
        }
    }
    else {
        Days1YearLoop = *(_day1YearLoop + (setMonth-1)) + setDay;
        switch (setYear%4) {
            case 1:
                Days4YearLoop = *(_day4YearLoop) + Days1YearLoop;
                break;
            case 2:
                 Days4YearLoop = *(_day4YearLoop+1) + Days1YearLoop;
                 break;
            case 3:
                Days4YearLoop = *(_day4YearLoop+2) + Days1YearLoop;
                break;
            Default:;
                break;
        }
    }
}

DayNumber::~DayNumber() {
}

bool DayNumber::checkLeapYear(int setYear) {
    if (setYear%4 == 0) {
        return true;
    }
    else {
        return false;
    }
} 
```

错误出现在 NTP.h 的第一个标题上，上面写着

> 说明资源路径位置类型“DayNumber”未命名类型 NTP.h /NTP/lib 第 24 行 C/C++ 问题

它不理解对象的声明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:05:42.427

包含当前文件所依赖的所有文件始终是一个好习惯。假设您更改了“DayNumber.h”，使其不再需要“NTP.h”，现在您的代码将无法编译。

假设您的文件是本地文件，并且您的机器内存不是非常低，它只会产生微小的差异。最近有一个关于类似主题的问题，我测量了是否包含一些标题，编译30个左右文件（实际上是SAME文件）之间的区别。在我的机器上运行“好”和“坏”之间的误差幅度比包含标题和不包含标题之间的差异要大得多。

至于你的第二个问题，它实际上是由“DayNumber.h”中不需要的“NTP.h”引起的 - 所以你应该“不包括那个”。但是，如果您有一个需要知道另一个类的类的实际情况，则需要使用前向声明，例如`class NTP;`- 现在，您可以使用`NTP *`或`NTP &`传递/存储指向 NTP 类的指针/引用。在完全定义 NTP 类之前，您仍然不能使用 NTP 类中的内容。

# wordpress - 如何使用我的 Ubuntu 12.04 服务器暂时禁用 Wordpress 站点并启用另一个站点？

> ID：14960443
> 
> 赞同：0
> 
> 时间：2013-02-19T14:54:56.840
> 
> 标签：wordpress, apache, ubuntu

我在 Ubuntu 12.04 服务器上有一个 wordpress 站点，其中安装了 Apache 作为 Web 服务器。我想暂时将其从我的网站中删除并启用另一个网站（不是 wordpress，只是纯 HTML、PHP）。我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:25:58.290

1.  创建一个名为“旧”的目录
2.  将所有内容移入“旧”
3.  在“旧”目录中创建一个名为 .htaccess 的文件
4.  将以下内容写入 .htaccess 文件：

    否认一切

5.  在 web-root 目录中上传您的新网站

如果您从网络访问“旧”目录，您应该会收到一条禁止消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T15:04:30.717

如果您想尝试做得更好，可以使用**虚拟主机**

> [http://httpd.apache.org/docs/2.2/vhosts/](http://httpd.apache.org/docs/2.2/vhosts/)

很简单：您可以在服务器上同时运行更多站点。

# arrays - PHP - 在数组中的第 70 个变量后发布丢失

> ID：14960444
> 
> 赞同：3
> 
> 时间：2013-02-19T14:55:04.417
> 
> 标签：arrays, post, php

好的，我花了很长时间试图弄清楚这一点。我有一个 while 循环，它从数据库中获取行，并为每个名称回显一个输入`selected_id[]`。在提交时，我使用 $_REQUEST 来收集选定的复选框，但由于某种原因，第 70 个变量之后的任何输入都不会发布。`selected_id[0]`through`selected_id[70]`将像正常一样发布，但`selected_id[71]`更高版本不会。

为什么我只能 $_REQUEST 一个数组，直到该数组中的第 70 个变量？

如果我从数据库中删除其中一个条目，那么问题仍然会出现在第 71 个回显或`selected_id[70]`

我使用的是 PHP 版本 5.3.15，我的 max_input_vars 设置为 1000。我的 max_input_nesting_level 设置为 64，但我不认为这是导致问题的原因。我的 memory_limit 设置为 20M。

这是我的大部分代码：

```
<?php

   if(!empty($_REQUEST[assignedprocess])){

    $selected_id = $_REQUEST[selected_id];
    $howmany = count($selected_id);
    $msgback="(".$howmany.") Entry(ies) updated. <br>";
      echo $msgback; 
   }

?>

<form action="index.php" method="post" name="index">

    <?php

        while($row = mysql_fetch_array($result_groups)){

        echo "<input name="selected_id[]" type="checkbox" value="'.$row[id].'" />";

        }

    ?>
<input type="hidden" name="assignedprocess" value="11">
<input type="submit" name="subs" value="Apply">  
</form> 
```

对不起我草率的代码和糟糕的英语......我非常感谢你能提供的任何帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:59:04.280

**在 php.ini 中将 php_value post_max_size 设置为 15M（或更多）：**

```
php_value post_max_size 15M 
```

**修复代码：（你错过了回声功能）**

```
<form action="index.php" method="post" name="index">

    <?php

        while($row = mysql_fetch_array($result_groups)){
          $id= $row[id];
          echo  "<input name='selected_id[]' type='checkbox' value= $id />";

        }

    ?>
<input type="hidden" name="assignedprocess" value="11">
<input type="submit" name="subs" value="Apply">  
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:58:57.260

基本上，您发布的长度大于 PHP 的配置长度。

如果您使用共享主机，则可以使用 .htaccess，如下所示：

```
#set max post size
php_value post_max_size 20M 
```

否则，如果您有自己的服务器，请编辑 php.ini...

使用尺寸...由您决定，20M 是一个很好的尺寸作为首发。

# c# - WPF Datatrigger 在滚动时触发

> ID：14960445
> 
> 赞同：1
> 
> 时间：2013-02-19T14:55:11.073
> 
> 标签：c#, wpf, storyboard

我有以下 xaml

```
<DataGrid Name ="TheGrid" Margin="0,21,0,0" DataContext ="{Binding StreamItems}"    ItemsSource="{Binding}" CanUserReorderColumns="True" CanUserResizeColumns="True" 
      CanUserResizeRows="False" CanUserSortColumns="True" AutoGenerateColumns="False" RowHeight="21">
        <DataGrid.Resources>
            <Style TargetType="DataGridCell" x:Key="FlashStyle">
                <Style.Triggers>
                    <DataTrigger Binding="{Binding CurrentState}" Value="Idle" >
                        <DataTrigger.EnterActions>
                            <BeginStoryboard>
                                <Storyboard x:Name="BlinkIdle" >
                                    <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(Background).(SolidColorBrush.Color)">
                                        <DiscreteColorKeyFrame Value="DarkOrchid" KeyTime="0:0:0" />
                                        <DiscreteColorKeyFrame Value="DarkOrchid" KeyTime="0:0:5" />
                                        <LinearColorKeyFrame Value="Transparent" KeyTime="0:0:8" />
                                    </ColorAnimationUsingKeyFrames>
                                </Storyboard>
                            </BeginStoryboard>
                        </DataTrigger.EnterActions>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding CurrentState}" Value="Streaming" >
                        <DataTrigger.EnterActions>
                            <BeginStoryboard>
                                <Storyboard x:Name="BlinkStreaming">
                                    <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(Background).(SolidColorBrush.Color)">
                                        <DiscreteColorKeyFrame Value="DarkGreen" KeyTime="0:0:0" />
                                        <DiscreteColorKeyFrame Value="DarkGreen" KeyTime="0:0:5" />
                                        <LinearColorKeyFrame Value="Transparent" KeyTime="0:0:8" />
                                    </ColorAnimationUsingKeyFrames>
                                </Storyboard>
                            </BeginStoryboard>
                        </DataTrigger.EnterActions>
                    </DataTrigger>
              </Style.Triggers>
            </Style>
        </DataGrid.Resources> 
```

我遇到的问题是，当我滚动或用户对列进行排序时，动画是触发器。当数据发生变化时，我如何告诉动画只触发一次？

# c# - OpenLdap C# 与专有名称中的转义字符绑定

> ID：14960451
> 
> 赞同：1
> 
> 时间：2013-02-19T14:55:20.733
> 
> 标签：c#, ldap, directoryservices, openldap

我有一些有效的 LDAP 代码，我们在其中重新绑定到找到的用户，以便使用他的专有名称验证用户。实际上，这就是正在发生的事情：

```
 string userDn = @"cn=Feat Studentl+umanroleid=302432,ou=Faculty of Engineering & Physical Sciences Administration,ou=Faculty of Engineering & Physical Sciences,ou=People,o=University of TestSite,c=GB";
            string fullPath = @"LDAP://surinam.testsite.ac.uk:636/" + userDn;

            DirectoryEntry authUser = new DirectoryEntry(fullPath, userDn, "mypassword", AuthenticationTypes.None);

            authUser.RefreshCache(); 
```

但是，这会在 DirectoryEntry.Bind() 处导致错误未知错误 80005000

我怀疑问题可能是 DN 在 CN 属性中有一个“+”和一个“=”。因此，在发现逃避这种情况的方法应该是使用 \ 和字符的十六进制值之后，我尝试了这个：

```
 string userDn = @"cn=Feat Studentl\2Bumanroleid\3D302432,ou=Faculty of Engineering & Physical Sciences Administration,ou=Faculty of Engineering & Physical Sciences,ou=People,o=University of TestSite,c=GB"; 
```

但是我得到了错误：

登录失败：未知用户名或密码错误

我认为这是因为现在它对请求感到满意，但由于某种原因它无法匹配用户 DN。

有没有办法解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T16:10:35.703

根据我开发 LDAP 服务的经验，每当您因凭据无效而登录失败时，这*往往*是绑定尝试的问题。您收到该错误是因为 DirectoryEntry 不解析 DN 中的转义字符……但是，您一开始就不必这样做。

在您的代码中 - 将 AuthenticationTypes 设置为“无”会强制条目根据您提供的 DN 进行简单绑定。由于您将服务器名称作为路径的一部分，我会尝试使用 ServerBind 身份验证类型，如下所示：

```
string LdapPath = ("LDAP://" + ldapUrl + "/" + Domain);

//Build the user and issue the Refresh bind
var dirEntry = new DirectoryEntry
                   {
                       Path = LdapPath,
                       Username = _usernameToVerify,
                       Password = _passwordToVerify,
                       AuthenticationType = AuthenticationTypes.ServerBind
                   };

//This will load any available properties for the user
dirEntry.RefreshCache(); 
```

此外，您似乎正在对安全 LDAP 端口 (636) 进行此调用，因此请确保您还包括 AuthenticationTypes.SecureSocketsLayer 以及 ServerBind 机制：

```
AuthenticationType = AuthenticationTypes.ServerBind | AuthenticationTypes.SecureSocketsLayer 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:02:31.300

我不得不求助于为一位客户定制的旧 DLL 项目。

我设法让它工作。如果您有一个带有转义字符的 DN，您似乎必须参考这些低级目录服务例程。（请注意，在现实生活中，DN 是通过设置 DirectorySearcher 并首先执行 FindOne 通过初始灵活的用户搜索获得的）

```
 string userDn = @"cn=Feat Studentl+umanroleid=302432,ou=Faculty of Engineering & Physical Sciences Administration,ou=Faculty of Engineering & Physical Sciences,ou=People,o=University of TestSite,c=GB";
 string basicUrl = @"surinam.testsite.ac.uk:636";

  var ldapConnection = new LdapConnection(basicUrl);
  ldapConnection.AuthType = AuthType.Basic;
  LdapSessionOptions options = ldapConnection.SessionOptions;
  options.ProtocolVersion = 3;
  options.SecureSocketLayer = true;

  NetworkCredential credential = new NetworkCredential(userDn, password);                             
  ldapConnection.Credential = credential;

  try
  {
      ldapConnection.Bind();
      Console.WriteLine("bind succeeded ");
  }
  catch (LdapException e)
  {
      if (e.ErrorCode == 49)
      {
           Console.WriteLine("bind failed ");
      }
      else
      {
          Console.WriteLine("unexpected result " + e.ErrorCode);
      }
  }
  catch (DirectoryOperationException e)
  {
      Console.WriteLine("unexpected error " + e.Message);
  } 
```

# events - Grails event-push 发送事件两次或在 IE8 中不发送

> ID：14960452
> 
> 赞同：1
> 
> 时间：2013-02-19T14:55:21.733
> 
> 标签：events, grails, internet-explorer-8, grails-2.2

我在使用带有 IE8 的 grails 事件推送插件时遇到了一个奇怪的行为。我正在使用 grails 2.2、event-push 1.0M7 和 AngularJS（但这不应该是问题）。

我在 conf 目录中的 MyEvents.groovy 中定义了事件

```
events = {
    'newActivity' browser:true
} 
```

这是将事件发送到浏览器的服务的方法

```
@Listener(namespace='browser')
public void sendEvents(UserLevel level, Map<String,List<UserAchievement>> achievements, Map<String,List<UserMission>> missions){
    def activities = []
    if (level)
        activities << new RecentActivity(level)

    achievements["user"]?.each{activities << new RecentActivity(it)}
    achievements["team"]?.each{ activities << new RecentActivity(it)}

    missions["user"]?.each{activities << new RecentActivity(it)}
    missions["team"]?.each{activities << new RecentActivity(it)}

    if (activities && activities.size()>0)
        event(topic:"newActivity",data:activities)
} 
```

这里是 js 事件监听器

```
grailsEvents.on("newActivity",function(data){
    for (var i=0;i<data.length;i++){//Add
        changeUserImage(data[i]);
        $scope.$apply(function(){$scope.activities.unshift(data[i]);});
    }
    while ($scope.activities.length>$scope.maxElements){ //remove
        $scope.$apply(function(){$scope.activities.pop();});
    }
}); 
```

**编辑**：这些是我尝试过的 grailsEvents 初始化，结果相同：

```
window.grailsEvents = new grails.Events($jostalan.urls.base);
window.grailsEvents = new grails.Events($jostalan.urls.base, {transport:"websocket"});
window.grailsEvents = new grails.Events($jostalan.urls.base, {transport:"websocket",shared:true}); 
```

我知道有时该事件被调用了两次，而其他的则没有，因为我尝试放置一个 console.log，但我删除它只是为了防止 IE8 出现问题。此外，在 Chrome 和 Firefox 中，一切都按预期工作，只需在预期时调用该方法。

我看到的唯一对我来说听起来很奇怪的事情（因为我不太明白它的含义），有时我会在 grails 控制台中看到以下跟踪：

```
grails> cpr.AtmosphereFramework If you have more than one Connector enabled, make sure they both use the same protocol, e.g NIO/APR or HTTP for all. If not, org.atmosphere.container.BlockingIOCometSupport will be used and cannot be changed. 
```

任何人都知道为什么会发生这种奇怪的行为以及如何解决它？

**编辑**：我也用普通的 javascript 测试过它，同样的奇怪行为发生了。有时调用事件，有时不调用，有时调用两次

**编辑**：我也尝试从服务方法中删除 @Listener 注释，因为我知道这不是必需的。

# java - testng 是否运行多线程？

> ID：14960455
> 
> 赞同：1
> 
> 时间：2013-02-19T14:55:31.463
> 
> 标签：java, multithreading, maven-3, testng

我有一个 java maven 项目，我想使用多线程进行测试。我在 src/test 中有 testng.xml，并且配置了 maven surefire 插件以使用它。就像这个页面： [http ://maven.apache.org/surefire/maven-surefire-plugin/examples/testng.html](http://maven.apache.org/surefire/maven-surefire-plugin/examples/testng.html)

**编辑：添加了surefire pom条目**

```
<plugin>
 <groupId>org.apache.maven.plugins</groupId>
 <artifactId>maven-surefire-plugin</artifactId>
 <version>2.12.4</version>
 <configuration>
  <suiteXmlFiles>
   <suiteXmlFile>src/test/testng.xml</suiteXmlFile>
  </suiteXmlFiles>
 </configuration>
</plugin> 
```

我正在使用万能 2.12.4。

这是我的 testng.xml 文件

```
<!DOCTYPE suite SYSTEM "http://testng.org/testng-1.0.dtd">
 <suite name="Testng" parallel="methods" thread-count="3">
  <test name="all" annotations="JDK5">
    <packages>
        <package name="my.package.*"/>
    </packages>
  </test>
</suite> 
```

在几种测试方法中，我有一个打印语句：

```
System.out.println(Thread.currentThread().getName()); 
```

每次运行（pool-1-thread-1）总是具有相同的输出。如果 testng 并行运行，那么将会有不同的线程在运行。

我的问题是：为什么 testng 没有运行多线程？有没有更好的方法来检查 testng 是否正在运行多线程？

**编辑：类或方法**

当我使用线程运行时，每个测试类似乎都在它自己的线程中运行，但不是每个方法。在 testng.xml 我设置了 parallel="methods" 所以它应该按照方法来做。它不能按方法做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T16:24:08.233

我找到了答案，我没有给它足够的线程。由于我的项目有很多测试 testng 不会为每个方法创建新线程。我将其更改为 10 个线程并修复了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-22T04:04:25.520

在这种情况下，TestNG 不会并行运行。您需要定义 ThreadLocal 以在线程中定义不同的浏览器。使用：ThreadLocal，并在不同的实例中定义浏览器。在这种情况下，您将获得不同的浏览器 ID。

# perl - 如果我无法直接替换应用代码中的 $ua，我该如何使用 Test::LWP::UserAgent？

> ID：14960460
> 
> 赞同：3
> 
> 时间：2013-02-19T14:55:44.700
> 
> 标签：perl, unit-testing, lwp

我有一个通过 REST 服务从 API 检索一些数据的子程序。代码比较简单，但是我需要将参数发布到 API 并且我需要使用 SSL，所以我必须通过[LWP::UserAgent](https://metacpan.org/module/LWP%3a%3aUserAgent)并且不能使用[LWP::Simple](https://metacpan.org/module/LWP%3a%3aSimple)。这是它的简化版本。

```
sub _request {
  my ( $action, $params ) = @_;

  # User Agent fuer Requests
  my $ua = LWP::UserAgent->new;
  $ua->ssl_opts( SSL_version => 'SSLv3' );

  my $res = $ua->post( 
    $url{$params->{'_live'} ? 'live' : 'test'}, { action => $action, %$params } 
  );
  if ( $res->is_success ) {
    my $json = JSON->new;

    return $json->decode( $res->decoded_content );
  } else {
    cluck $res->status_line;
    return;
  }
} 
```

这是我的模块（不是 OOp）中唯一需要`$ua`.

现在我想为此编写一个测试，经过一些[研究](http://www.perladvent.org/2012/2012-12-12.html)决定最好使用[Test::LWP::UserAgent](https://metacpan.org/module/Test%3a%3aLWP%3a%3aUserAgent)，这听起来很有希望。不幸的是，有一个问题。在文档中，它说：

> 请注意，LWP::UserAgent 本身没有猴子补丁 - 您必须使用此模块（或子类）来发送您的请求，否则无法捕获和处理它。
> 
> 换出用户代理实现的一种常见机制是通过延迟构建的 Moose 属性。如果在构建时没有提供覆盖，默认为 LWP::UserAgent->new(%options)。

哎呀。显然我不能做 Moose 的事情。我也不能只将 a 传递`$ua`给 sub。我当然可以为 sub 添加一个可选的第三个参数`$ua`，但我不喜欢这样做的想法。我觉得为了使其可测试而如此彻底地改变这种简单代码的行为是不合适的。

我基本上想做的是像这样运行我的测试：

```
use strict;
use warnings;
use Test::LWP::UserAgent;
use Test::More;

require Foo;

Test::LWP::UserAgent->map_response( 'www.example.com',
  HTTP::Response->new( 200, 'OK', 
    [ 'Content-Type' => 'text/plain' ], 
    '[ "Hello World" ]' ) );

is_deeply(
  Foo::_request('https://www.example.com', { foo => 'bar' }),
  [ 'Hello World' ],
  'Test foo'
); 
```

**有没有办法将 Test::LWP::UserAgent 功能猴子修补到 LWP::UserAgent 中，以便我的代码只使用 Test:: one？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T19:21:21.787

更改您的代码，以便在`_request()`您调用`_ua()`以收集您的用户代理并在您的测试脚本中覆盖此方法。像这样：

在您的模块中：

```
sub _request {
...
 my $ua = _ua();
...
}

sub _ua { 
 return LWP::UserAgent->new();
} 
```

在您的测试脚本中：

```
...
Test::More::use_ok('Foo');

no warnings 'redefine';
*Foo::_ua = sub { 
    # return your fake user agent here
};
use warnings 'redefine';
... etc etc 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T16:27:05.250

> 我当然可以为 sub 添加一个可选的第三个参数 $ua，但我不喜欢这样做的想法。我觉得为了使其可测试而如此彻底地改变这种简单代码的行为是不合适的。

这被称为依赖注入，它是完全有效的。对于测试，您需要能够覆盖您的类将用来模拟各种结果的对象。

如果您更喜欢覆盖对象的更隐式方式，请考虑[Test::MockObject](http://search.cpan.org/perldoc?Test%3a%3aMockObject)和[Test::MockModule](http://search.cpan.org/perldoc?Test%3a%3aMockModule)。您可以模拟 LWP::UserAgent 的构造函数以返回测试对象，或者模拟您正在测试的代码的更广泛部分，这样根本不需要 Test::LWP::UserAgent。

另一种方法是重构您的生产代码，以便组件可以（单元）单独测试。从响应处理中拆分 HTTP 获取。然后通过创建自己的响应对象并将其传入来测试第二部分非常简单。

最终，程序员使用上述所有工具。有些适用于单元测试，有些适用于更广泛的集成测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-29T10:50:09.487

截至今天，我将采用以下方法来解决这个问题。想象一下这段遗留代码¹，它不是面向对象的，不能重构，因此它使依赖注入变得容易。

```
package Foo;
use LWP::UserAgent;

sub frobnicate {
    return LWP::UserAgent->new->get('http://example.org')->decoded_content;
} 
```

这确实很难测试，[rjh 的答案](https://stackoverflow.com/a/14962422/1331451)很准确。但是在 2016 年，我们有比 2013 年更多的可用模块。我特别喜欢[Sub::Override](http://p3rl.org/Sub::Override)，它替换了给定命名空间中的 sub，但只保留在当前范围内。这使得它非常适合单元测试，因为您不需要在完成后关心恢复所有内容。

```
package Test::Foo;
use strict;
use warnings 'all';
use HTTP::Response;
use Sub::Override;
use Test::LWP::UserAgent;
use Test::More;

# create a rigged UA
my $rigged_ua = Test::LWP::UserAgent->new;
$rigged_ua->map_response( 
    qr/\Qexample\E/ => HTTP::Response->new( 
        '200', 
        'OK', 
        [ 'Content-Type' => 'text/plain' ], 
        'foo',
    ), 
);

# small scope for our override
{
    # make LWP return it inside our code
    my $sub = Sub::Override->new( 
        'LWP::UserAgent::new'=> sub { return $rigged_ua } 
    );
    is Foo::frobnicate(), 'foo', 'returns foo';
} 
```

我们基本上创建了一个[Test::LWP::UserAgent](https://v1.metacpan.org/pod/Test::LWP::UserAgent)对象，我们提供所有的测试用例。如果需要，我们还可以给它一个代码引用，它将在请求上运行测试（此处未显示）。然后我们使用 Sub::Override 使 LWP::UserAgent 的构造函数不返回实际的 LWP::UA，而是返回已经准备好的`$rigged_ua`. 然后我们运行我们的测试。一旦`$sub`超出范围，`LWP::UserAgent::new`就会恢复，我们不会干涉其他任何事情。

始终以尽可能小的范围进行这些测试很重要（就像 Perl 中的大多数事情一样）。

如果有很多这样的测试用例，那么为每个请求构建某种配置散列是一个很好的策略，并使用构建辅助函数来创建操纵的用户代理，并使用另一个来创建 Sub： :覆盖对象。在词法作用域中使用，这种方法非常强大，同时也非常简洁。

* * *

^(`use strict`1) 这里用和的缺失来表示`use warnings`。)

# backbone.js - Backbone：从元素中获取视图对象

> ID：14960463
> 
> 赞同：3
> 
> 时间：2013-02-19T14:55:45.980
> 
> 标签：backbone.js

假设我有一些项目要显示在列表中。该列表有一个将所有项目聚合为项目视图的视图。现在我想处理项目视图上的点击事件，并将处理委托给列表视图。

让我们看一些示例代码：

```
ItemView = Backbone.View.extend({
    className: 'item',
    initialize: function() {
        this.$el.data('backbone-view', this);
    }
}); 
```

请注意，我将视图对象本身作为根元素的属性附加，这实际上为视图和元素创建了循环引用情况。

```
ListView = Backbone.View.extend({
    initialize: function() {
        // contains the item views
        this.items = [];

        // click event delegation
        this.$el.click(_.bind(this._onClick, this));
    },

    addItem: function(v) {
        if ( !(v instanceof ItemView) ) return;

        this.items.push(v);
        this.$el.append(v.el);
    },

    _onClick: function(e) {
        var el = $(e.target).closest('.item'),
            view = el.data('backbone-view');

        // do something with the view
    }
}); 
```

每当必须处理任何类型的列表视图时，这是一种非常通用的模式。

我通过初始化时在项目上设置的数据属性将项目视图返回到处理程序中。我需要获取项目视图，因为作为处理单击事件的一部分，我想要对项目执行的任何操作都基于视图。

另请注意，我使用的`closest`是因为项目视图可能很复杂，并且单击事件的实际目标可能是根元素的后代。

所以问题是：这种通过`data`属性将视图绑定到其根元素的方法是否正确——尤其是在考虑垃圾收集和内存泄漏时？还有比这更好的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:21:16.650

您应该在子视图中捕获事件。在我看来，任何 Backbone 视图都应该只处理其元素及其子元素的 DOM 事件。如果视图是嵌套的，就像你的一样，最具体的视图应该处理事件。

如果您想将处理委托给父视图，您可以在 中触发主干事件`ItemView`，并在`ListView`.

```
ItemView = Backbone.View.extend({
  events: {
    "click":"onClick"
  },
  onClick: function() {
    //trigger a custom event, passing the view as first argument
    this.trigger('click', this);
  }
});

ListView = Backbone.View.extend({
  addItem: function(v) {
    if ( !(v instanceof ItemView) ) return;
    //listen to custom event
    this.listenTo(v, 'click', this._onClick);
    this.items.push(v);
    this.$el.append(v.el);
  },
  _onClick:function(itemView) {
    //...
  }
}); 
```

如果`click`事件代表一些“更高级别”的操作，例如`select`or `activate`，您应该这样命名您的自定义事件。通过这种方式，您可以在视图之间创建一个合乎逻辑的、健壮的接口，而无需考虑父`ListView`级及其子级的实现细节。只`ItemView`应该知道它是否被点击、悬停、双击等。

# jquery - jQuery需要修复代码

> ID：14960465
> 
> 赞同：1
> 
> 时间：2013-02-19T14:55:57.040
> 
> 标签：jquery

我需要帮助...我想添加此代码效果，例如向上/向下滑动。我已经添加了这个效果，但是如果我想关闭盒子，我发现的唯一问题是盒子保持打开状态

对不起我的英语不好 ;）

谢谢你的帮助..

```
$(function() {
    $(".avatar1, .social").hide();
    $(".teamBox").click(function() {
        $(this).find(".avatar1, .social").slideDown('slow')
            .end().parent().siblings().find(".avatar1, .social").slideUp('slow');
    });
}); 
```

**演示** [在这里](http://jsfiddle.net/K3A98/embedded/result/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T14:58:07.647

您可以切换功能来执行此操作：

```
$('.teamBox').click(function() {
     $(this).find('.avatar1, .social').slideToggle('slow');
}); 
```

[在此处](http://jsfiddle.net/Trufa/K3A98/2/)查看演示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T15:03:33.630

我想你正在寻找这样的东西：

```
$('.teamBox').click(function () {
    $('.avatar1, .social').slideUp('slow');
    $(this).find('.avatar1, .social').slideDown('slow');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T15:03:55.163

你可以这样做

```
$(function() {
    $(".avatar1, .social").hide();
    $(".teamBox").click(function() {
        var $el = $(this).find(".avatar1, .social"); // cache elements to be toggled
        $el.slideToggle('slow'); // only slide toggle current clicked
        $(".avatar1, .social").not($el).slideUp('slow'); // slide up all others
    });
}); 
```

[http://jsfiddle.net/9Ek6n/](http://jsfiddle.net/9Ek6n/)

# html - 如何让页脚始终位于页面底部？

> ID：14960467
> 
> 赞同：1
> 
> 时间：2013-02-19T14:56:08.807
> 
> 标签：html, css, footer

我在页面的最底部有一个 115 像素的图像。我在网上搜索了如何让它一直停留在页面底部，得到了很多复杂的答案。我用我自己的代码制作（至少在我的浏览器中）。我意识到这可能是一种不成熟的方式，并想看看它是否有任何潜在的问题。这是我的代码

```
<div id="footer" style="position:fixed;top:100%;margin-top:-115px;left:0%;repeat:repeat-x;background:url(http://EXAMPLE.com/images/bottom-border.png);height:115px;width:100%;">
&nbsp;
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:30:24.703

这是您始终在页面底部执行页脚的方法。您可以替换`footer`为`<div id="footer">...</div>`，但我更喜欢 HTML5 `footer`。

![在此处输入图像描述](../Images/5e06aa43dfdbe177028a923c7e04561a.png)

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <style>
        body { height: 100%;}
        footer {background: url(http://cdn.sstatic.net/stackoverflow/img/sprites.png?v=5); 
                position: fixed; bottom: 0; left: 0; height:115px;width:100%; }
    </style>
</head>
<body>
    <footer>

    </footer>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T15:15:25.620

您可能需要考虑如果正文与视口高度一样长会发生什么。文本可能位于固定页脚后面，您可能看不到它

我会推荐；

```
#footer { 
    position: relative;
    margin-top: -150px; /* negative value of footer height */
    height: 150px;
    clear:both;
} 
```

然后确保让包含所有内容的 div 具有与页脚高度相同的填充底部。

```
#main { padding-bottom: 150px; }  /* must be same height as the footer */ 
```

# r - 如何使用 R 计算二进制文件中具有特定值的像素数？

> ID：14960470
> 
> 赞同：1
> 
> 时间：2013-02-19T14:56:12.237
> 
> 标签：r

我有一个二进制文件，其暗淡为 1440*720，等于 1036800 像素。

我想知道：

> 像素总数中值大于 0.5 的像素有多少？

这是我从二进制文件中读取的代码：

```
 conne <- file("C:fined.bin","rb")
    sd<- readBin(conne, numeric(), size=4,  n=1440*720, signed=TRUE)
    y<-t(matrix((data=sd), ncol=1440, nrow=720)) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T15:21:38.350

`NaN`在计算之前删除这些值。

```
sum(sd[!is.nan(sd)] > 0.5)
# [1] 104601 
```

有关非数字值数量的信息，请使用`table`.

```
table(sd > 0.5, useNA = "always")

# FALSE   TRUE   <NA> 
# 103341 104601 828858 
```

或`count`从`plyr`包中获取数据框形式的结果。

```
count(sd > 0.5)
#       x   freq
# 1 FALSE 103341
# 2  TRUE 104601
# 3    NA 828858 
```

# c++ - 从 Qt 内部运行 c++ 二进制文件并将二进制文件的输出重定向到 Qt 应用程序上的文本框

> ID：14960472
> 
> 赞同：4
> 
> 时间：2013-02-19T14:56:17.773
> 
> 标签：c++, qt

我想触发从 Qt 应用程序内部生成的 c++ 二进制文件。这怎么可能 ？在 Java 中，我有类似`Runtime.exec()`. 您能告诉我这在 Qt 框架中是如何实现的吗？

此外，当我的二进制文件正在运行时，我希望将该程序的输出（现在已写入控制台）写入 Qt 中的文本框。如果我有在控制台上以字符串形式写入的数据，我可以轻松地执行 textbox.setText()。所以基本上问题是如何获得程序应该写入控制台的数据，而实际上它是从 Qt 框架内部运行的。

我知道我可以通过简单地从 Qt 内部运行和编译我的代码来解决上述两个问题，但我之所以这么问，是因为我正处于严重的时间紧缩和一些巨大的设计问题之中。如果这个原因没有让你的船浮起来，请把这个问题当作一个家庭作业问题并帮助我:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T23:16:51.957

**QProcess**是你的朋友。

类似于调用 Windows 命令解释器并**同步**等待其输出以获取简单目录列表的某些代码的**最小版本如下所示：**

 **```
QProcess process;
process.start("cmd.exe",
              QStringList() << "/c" << "dir" << "/b",
              QIODevice::ReadWrite | QIODevice::Text);
if(!process.waitForFinished()) // beware the timeout default parameter
    qDebug() << "executing program failed with exit code" << process.exitCode();
else
    qDebug() << QString(process.readAllStandardOutput()).split('\n'); 
```

如果您想**异步**运行它并获得“在线”结果可能会在 Qt-GUI 应用程序中更新进度条，这会变得更有趣。您将有一个设置部分，例如在您的主表单构造函数中，如下所示：

```
process = new QProcess(this);
connect( process, SIGNAL(readyReadStandardOutput()), SLOT(onStdoutAvailable()) );
connect( process, SIGNAL(finished(int,QProcess::ExitStatus)), SLOT(onFinished(int,QProcess::ExitStatus)) ); 
```

也许在按下按钮的处理程序中调用类似：

```
process->start("some_command", QStringList() << "some" << "args",
               QIODevice::ReadWrite | QIODevice::Text);
if(!process->waitForStarted())
    // some_command failed to even start 
```

然后在*onStdoutAvailable()*插槽中调用*process->readAllStandardOutput()*并以某种方式对其进行解析以确定您的进度。最后评估连接的*finished()信号的**exitCode*和*exitStatus*参数以确定是否一切正常（TM）。

 ***如果您希望能够在未经他们同意的情况下停止/终止该进程和所有潜在的子进程并进行跨平台操作，那么它开始变得有趣......但这显然超出了您的问题范围。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-19T15:01:31.497

查看 QProcess 及其方法，尤其是 readAllStandardOutput()*****

# java - 使用 ace:tabSet 和 ice:tree 动态创建 xhtml 页面

> ID：14960473
> 
> 赞同：0
> 
> 时间：2013-02-19T14:56:17.550
> 
> 标签：java, jsf, jsf-2, icefaces

我创建了一个动态页面，其中包含一些 ace:tabPane，每个 xhtml 页面中都有一棵树：

```
<ui:define name="subContent">           
     <div>      
         <h:form>       
        <ace:tabSet binding="#{configProfilesBean.tabSet}"
            >       
        </ace:tabSet>
    </h:form>
     </div>     
</ui:define> 
```

在页面后面我有一个 bean configProfilesBean，我在其中创建绑定在页面中的选项卡集并动态一些 ace:tabPane：

```
tabSet = new TabSet();
tabSet.getChildren().clear();
tabSet.setId("tabSetConfigProfiles");
tabSet.setClientSide(false);

for (FunzioneDTO f : funzioni) {                        
    tabSet.getChildren().add(createTabPane(f));         
} 
```

方法`createTabPane(FunzioneDTO function)`：

```
private TabPane createTabPane (FunzioneDTO function){

    TabPane tabPane = new TabPane();

    tabPane.setId("fnz_"+function.getId());
    tabPane.setLabel(function.getNome());   

    Tree tree = new Tree();

    TreeModel model = new TreeModel(function);  

    tree.setId("tr_"+function.getId());

    tree.setValue(model.getModel());

    tabPane.getChildren().add(tree);

    return tabPane;
} 
```

然后这是 TreeModel 的类：

```
public class TreeModel implements javax.swing.tree.TreeModel{

    private DefaultTreeModel model;
    private DefaultMutableTreeNode rootTreeNode;
    private FunzioneDTO function;    

    public TreeModel(FunzioneDTO function){

        this.function = function;      

        IceUserObject rootObject = new IceUserObject(getRootTreeNode());

        rootObject.setText("ROOT");         
        rootObject.setExpanded(true);

        getRootTreeNode().setUserObject(rootObject);

        if(function.getAzioni().size()>0){
            for(AzioneDTO a : function.getAzioni()){
                getRootTreeNode().add(addActionChildNode(a));
            }
        }
    }

    private DefaultMutableTreeNode addActionChildNode(AzioneDTO action){

        DefaultMutableTreeNode childAction = new DefaultMutableTreeNode();
        IceUserObject actionObject = new IceUserObject(childAction);
        actionObject.setText("A_"+action.getId());      
        actionObject.setLeaf(true);
        childAction.setUserObject(actionObject);

        return childAction;

    }

    public DefaultTreeModel getModel() {
        if(model == null){
            model =  new DefaultTreeModel(getRootTreeNode());   
        }
        return model;
    }

    public void setModel(DefaultTreeModel model) {
        this.model = model;
    }

    public DefaultMutableTreeNode getRootTreeNode() {
        if(rootTreeNode == null){
            rootTreeNode = new DefaultMutableTreeNode();
        }
        return rootTreeNode;
    }

    public void setRootTreeNode(DefaultMutableTreeNode rootTreeNode) {
        this.rootTreeNode = rootTreeNode;
    }

    public FunzioneDTO getFunction() {
        return function;
    }

    public void setFunction(FunzioneDTO function) {
        this.function = function;
    }

    @Override
    public Object getRoot() {

        return getModel().getRoot();
    }

    @Override
    public Object getChild(Object parent, int index) {

        return getModel().getChild(parent, index);
    }

    @Override
    public int getChildCount(Object parent) {

        return getModel().getChildCount(parent);

    }

    @Override
    public boolean isLeaf(Object node) {

        return getModel().isLeaf(node);
    }

    @Override
    public void valueForPathChanged(TreePath path, Object newValue) {

        getModel().valueForPathChanged(path, newValue);
    }

    @Override
    public int getIndexOfChild(Object parent, Object child) {

        return getModel().getIndexOfChild(parent, child);
    }

    @Override
    public void addTreeModelListener(TreeModelListener l) {

        getModel().addTreeModelListener(l);

    }

    @Override
    public void removeTreeModelListener(TreeModelListener l) {

        getModel().removeTreeModelListener(l);

    }
} 
```

当我转到该页面时，我有一个由 nullpointerexception 引起的堆栈跟踪，我不知道如何解决：

```
15:31:25,204 Grave [javax.enterprise.resource.webcontainer.jsf.application] Error Rendering View[/views/protected/profiles/configProfiles.xhtml]: java.lang.NullPointerException
    at com.icesoft.faces.component.tree.Tree.getModel(Tree.java:277) [:]
    at com.icesoft.faces.component.tree.Tree.visitRows(Tree.java:1459) [:]
    at com.icesoft.faces.component.tree.Tree.visitTree(Tree.java:1414) [:]
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623) [:2.1.17]
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623) [:2.1.17]
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623) [:2.1.17]
    at javax.faces.component.UIForm.visitTree(UIForm.java:371) [:2.1.17]
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623) [:2.1.17]
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623) [:2.1.17]
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623) [:2.1.17]
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623) [:2.1.17]
    at org.icefaces.impl.event.RestoreResourceDependencies.processEvent(RestoreResourceDependencies.java:24) [:]
    at javax.faces.event.SystemEvent.processListener(SystemEvent.java:106) [:2.1.17]
    at com.sun.faces.application.ApplicationImpl.processListeners(ApplicationImpl.java:2169) [:2.1.17]
    at com.sun.faces.application.ApplicationImpl.invokeListenersFor(ApplicationImpl.java:2145) [:2.1.17]
    at com.sun.faces.application.ApplicationImpl.publishEvent(ApplicationImpl.java:303) [:2.1.17]
    at com.sun.faces.application.ApplicationImpl.publishEvent(ApplicationImpl.java:247) [:2.1.17]
    at javax.faces.component.UIComponentBase.encodeBegin(UIComponentBase.java:812) [:2.1.17]
    at javax.faces.component.UIViewRoot.encodeBegin(UIViewRoot.java:963) [:2.1.17]
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1777) [:2.1.17]
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:437) [:2.1.17]
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:124) [:2.1.17]
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:120) [:2.1.17]
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101) [:2.1.17]
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139) [:2.1.17]
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594) [:2.1.17]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:324) [:6.1.0.Final]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:242) [:6.1.0.Final]
    at it.pegaso2000.access.web.filter.AccessFilter.doFilter(AccessFilter.java:77) [:]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:274) [:6.1.0.Final]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:242) [:6.1.0.Final]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) [:3.1.3.RELEASE]
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:118) [:3.1.3.RELEASE]
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:84) [:3.1.3.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342) [:3.1.3.RELEASE]
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113) [:3.1.3.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342) [:3.1.3.RELEASE]
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105) [:3.1.3.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342) [:3.1.3.RELEASE]
    at org.springframework.security.web.authentication.preauth.AbstractPreAuthenticatedProcessingFilter.doFilter(AbstractPreAuthenticatedProcessingFilter.java:94) [:3.1.3.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342) [:3.1.3.RELEASE]
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87) [:3.1.3.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342) [:3.1.3.RELEASE]
    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:192) [:3.1.3.RELEASE]
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160) [:3.1.3.RELEASE]
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346) [:3.1.3.RELEASE]
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259) [:3.1.3.RELEASE]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:274) [:6.1.0.Final]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:242) [:6.1.0.Final]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [:6.1.0.Final]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [:6.1.0.Final]
    at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:181) [:6.1.0.Final]
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:593) [:6.1.0.Final]
    at org.jboss.modcluster.catalina.CatalinaContext$RequestListenerValve.event(CatalinaContext.java:285) [:1.1.0.Final]
    at org.jboss.modcluster.catalina.CatalinaContext$RequestListenerValve.invoke(CatalinaContext.java:261) [:1.1.0.Final]
    at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:88) [:6.1.0.Final]
    at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:100) [:6.1.0.Final]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:159) [:6.1.0.Final]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [:6.1.0.Final]
    at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158) [:6.1.0.Final]
    at org.apache.catalina.authenticator.SingleSignOn.invoke(SingleSignOn.java:416) [:6.1.0.Final]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [:6.1.0.Final]
    at org.jboss.web.tomcat.service.request.ActiveRequestResponseCacheValve.invoke(ActiveRequestResponseCacheValve.java:53) [:6.1.0.Final]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:362) [:6.1.0.Final]
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [:6.1.0.Final]
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:654) [:6.1.0.Final]
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:951) [:6.1.0.Final]
    at java.lang.Thread.run(Thread.java:722) [:1.7.0]

15:31:25,250 Avvertenza [org.icefaces.impl.application.ExtendedExceptionHandler] queued exception: java.lang.NullPointerException
    at com.icesoft.faces.component.tree.Tree.getModel(Tree.java:277) [:]
    at com.icesoft.faces.component.tree.Tree.visitRows(Tree.java:1459) [:]
    at com.icesoft.faces.component.tree.Tree.visitTree(Tree.java:1414) [:]
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623) [:2.1.17]
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623) [:2.1.17]
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623) [:2.1.17]
    at javax.faces.component.UIForm.visitTree(UIForm.java:371) [:2.1.17]
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623) [:2.1.17]
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623) [:2.1.17]
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623) [:2.1.17]
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623) [:2.1.17]
    at org.icefaces.impl.event.RestoreResourceDependencies.processEvent(RestoreResourceDependencies.java:24) [:]
    at javax.faces.event.SystemEvent.processListener(SystemEvent.java:106) [:2.1.17]
    at com.sun.faces.application.ApplicationImpl.processListeners(ApplicationImpl.java:2169) [:2.1.17]
    at com.sun.faces.application.ApplicationImpl.invokeListenersFor(ApplicationImpl.java:2145) [:2.1.17]
    at com.sun.faces.application.ApplicationImpl.publishEvent(ApplicationImpl.java:303) [:2.1.17]
    at com.sun.faces.application.ApplicationImpl.publishEvent(ApplicationImpl.java:247) [:2.1.17]
    at javax.faces.component.UIComponentBase.encodeBegin(UIComponentBase.java:812) [:2.1.17]
    at javax.faces.component.UIViewRoot.encodeBegin(UIViewRoot.java:963) [:2.1.17]
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1777) [:2.1.17]
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:437) [:2.1.17]
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:124) [:2.1.17]
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:120) [:2.1.17]
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101) [:2.1.17]
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139) [:2.1.17]
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594) [:2.1.17]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:324) [:6.1.0.Final]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:242) [:6.1.0.Final]
    at it.pegaso2000.access.web.filter.AccessFilter.doFilter(AccessFilter.java:77) [:]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:274) [:6.1.0.Final]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:242) [:6.1.0.Final]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) [:3.1.3.RELEASE]
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:118) [:3.1.3.RELEASE]
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:84) [:3.1.3.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342) [:3.1.3.RELEASE]
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113) [:3.1.3.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342) [:3.1.3.RELEASE]
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105) [:3.1.3.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342) [:3.1.3.RELEASE]
    at org.springframework.security.web.authentication.preauth.AbstractPreAuthenticatedProcessingFilter.doFilter(AbstractPreAuthenticatedProcessingFilter.java:94) [:3.1.3.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342) [:3.1.3.RELEASE]
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87) [:3.1.3.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342) [:3.1.3.RELEASE]
    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:192) [:3.1.3.RELEASE]
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160) [:3.1.3.RELEASE]
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346) [:3.1.3.RELEASE]
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259) [:3.1.3.RELEASE]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:274) [:6.1.0.Final]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:242) [:6.1.0.Final]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [:6.1.0.Final]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [:6.1.0.Final]
    at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:181) [:6.1.0.Final]
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:593) [:6.1.0.Final]
    at org.jboss.modcluster.catalina.CatalinaContext$RequestListenerValve.event(CatalinaContext.java:285) [:1.1.0.Final]
    at org.jboss.modcluster.catalina.CatalinaContext$RequestListenerValve.invoke(CatalinaContext.java:261) [:1.1.0.Final]
    at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:88) [:6.1.0.Final]
    at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:100) [:6.1.0.Final]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:159) [:6.1.0.Final]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [:6.1.0.Final]
    at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158) [:6.1.0.Final]
    at org.apache.catalina.authenticator.SingleSignOn.invoke(SingleSignOn.java:416) [:6.1.0.Final]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [:6.1.0.Final]
    at org.jboss.web.tomcat.service.request.ActiveRequestResponseCacheValve.invoke(ActiveRequestResponseCacheValve.java:53) [:6.1.0.Final]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:362) [:6.1.0.Final]
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [:6.1.0.Final]
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:654) [:6.1.0.Final]
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:951) [:6.1.0.Final]
    at java.lang.Thread.run(Thread.java:722) [:1.7.0] 
```

有人知道如何解决吗？谢谢

# javascript - Javascript – 确定需要删除或添加的元素数量

> ID：14960475
> 
> 赞同：0
> 
> 时间：2013-02-19T14:56:24.863
> 
> 标签：javascript, jquery, math, dom

我知道这个问题有一个简单的解决方案，但我已经尝试解决这个问题很长一段时间了，需要你的帮助。

在我的代码中，我根据屏幕宽度重新排序我的文章 DIV，并将它们包装成行并在需要时插入虚拟文章。

现在，假设我有 4 个文章 DIV 和 1 个虚拟对象的 jQuery 集。然后我需要知道我是否真的需要插入更多的假人或删除一些。每行正确的文章数被传递给相关函数。例如，假设每行需要 2 篇文章。

因此，在我运行代码之前，布局如下所示：

```
| Article | Article |
| Article | Article |
|  Dummy  | 
```

...当它需要这样时（删除多余的假人）：

```
| Article | Article |
| Article | Article | 
```

这是我当前的代码：

```
var checkForDummies     = function ( unwrappedArticles, articlesPerRow ) {

        var $articles       = $( unwrappedArticles ),
            len             = $articles.length,
            i,
            dummiesFound    = $articles.filter( '.dummy-cell' ),
            dummiesNeeded   = (len - dummiesFound.length) % articlesPerRow,
            fragment        = document.createDocumentFragment(),
            div             = document.createElement( 'div' );

        // No dummies needed after removal    
        if      ( dummiesNeeded === 0 && dummiesFound.length )
            dummiesFound.remove();
        // No dummies needed nor found
        else if ( dummiesNeeded === 0 )
            return;
        // Dummies needed – remove redundant dummies ( max. dummies needed = dummiesNeeded )
        else if ( dummiesNeeded < dummiesFound.length )
            dummiesFound.splice( dummiesNeeded );
        // Dummies needed – create new ones
        else if ( dummiesNeeded > dummiesFound.length )
            // Left out to preserve space

    }; 
```

但是，当布局看起来像这样（每行 5 篇文章）时，此代码将不起作用 - 因为`dummiesNeeded`不知何故`1`而不是`4`：

```
| Article | Article | Article | Article | Article |
| Article |  Dummy  | 
```

任何帮助找到解决方案表示赞赏！谢谢！

**更新的解决方案**
在标记答案的帮助下，我需要修改`dummiesNeeded`并插入一个新变量，该变量包含所需的有符号整数：

```
dummiesNeeded   = (articlesPerRow - (len - dummiesFound.length) % articlesPerRow) % articlesPerRow,
trueNeed        = dummiesNeeded - dummiesFound.length 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:03:31.127

我认为你的问题在这里：

```
dummiesNeeded   = (len - dummiesFound.length) % articlesPerRow 
```

如果，如在您的示例中，您有一篇文章（所以 len = 1）和一个假人（所以 dummiesFound.length = 1），那么 1-1 = 0，所以你`dummiesNeeded`最终是 0\. 0 % 5 = 0 而不是你想要的4。

当然你`dummiesNeeded`应该是：

```
dummiesNeeded = (articlePerRow - (len - dummiesFound.length) % articlesPerRow) % articlesPerRow; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T15:16:49.907

问题确实 `(len - dummiesFound.length) % articlesPerRow`

你必须使用`articlesPerRow - ((len - dummiesFound.length) % articlesPerRow)`

干杯

# ruby-on-rails - 在 Ubuntu 12.04 LTS 上设置 Discourse

> ID：14960476
> 
> 赞同：16
> 
> 时间：2013-02-19T14:56:29.513
> 
> 标签：ruby-on-rails, ubuntu, rails-migrations, hstore, discourse

我已经设置了一个新数据库来在 PostgreSQL 中安装 Discourse。当我运行 rake db:migrate 时，它​​会创建大部分表，但随后会失败：

```
-- execute("INSERT INTO archetypes (name_key, created_at, updated_at) VALUES ('poll', CURRENT_TIMESTAMP, CURRENT_TIMESTAMP)")
   -> 0.0009s
-- add_column(:forum_threads, :archetype_id, :integer, {:default=>1, :null=>false})
   -> 0.0209s
==  CreateArchetypes: migrated (0.0424s) ======================================

==  AddMetaDataToForumThreads: migrating ======================================
-- execute("CREATE EXTENSION IF NOT EXISTS hstore")
rake aborted!
An error has occurred, this and all later migrations canceled:

PG::Error: ERROR:  could not open extension control file "/usr/share/postgresql/9.1/extension/hstore.control": No such file or directory
: CREATE EXTENSION IF NOT EXISTS hstore
/usr/local/rvm/gems/ruby-1.9.3-p385/bundler/gems/MiniProfiler-d149f34fcdb6/Ruby/lib/patches/sql_patches.rb:155:in `exec'
/usr/local/rvm/gems/ruby-1.9.3-p385/bundler/gems/MiniProfiler-d149f34fcdb6/Ruby/lib/patches/sql_patches.rb:155:in `async_exec'
/usr/local/rvm/gems/ruby-1.9.3-p385/gems/activerecord-3.2.12/lib/active_record/connection_adapters/postgresql_adapter.rb:652:in `block in execute'
/usr/local/rvm/gems/ruby-1.9.3-p385/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract_adapter.rb:280:in `block in log'
/usr/local/rvm/gems/ruby-1.9.3-p385/gems/activesupport-3.2.12/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-1.9.3-p385/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract_adapter.rb:275:in `log'
/usr/local/rvm/gems/ruby-1.9.3-p385/gems/activerecord-3.2.12/lib/active_record/connection_adapters/postgresql_adapter.rb:651:in `execute'
/usr/local/rvm/gems/ruby-1.9.3-p385/gems/activerecord-3.2.12/lib/active_record/migration.rb:466:in `block in method_missing'
/usr/local/rvm/gems/ruby-1.9.3-p385/gems/activerecord-3.2.12/lib/active_record/migration.rb:438:in `block in say_with_time'
/usr/local/rvm/gems/ruby-1.9.3-p385/gems/activerecord-3.2.12/lib/active_record/migration.rb:438:in `say_with_time'
/usr/local/rvm/gems/ruby-1.9.3-p385/gems/activerecord-3.2.12/lib/active_record/migration.rb:458:in `method_missing'
/root/discourse/db/migrate/20120921162512_add_meta_data_to_forum_threads.rb:3:in `change'
/usr/local/rvm/gems/ruby-1.9.3-p385/gems/activerecord-3.2.12/lib/active_record/migration.rb:407:in `block (2 levels) in migrate'
/usr/local/rvm/gems/ruby-1.9.3-p385/gems/activerecord-3.2.12/lib/active_record/migration.rb:407:in `block in migrate'
/usr/local/rvm/gems/ruby-1.9.3-p385/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract/connection_pool.rb:129:in `with_connection'
/usr/local/rvm/gems/ruby-1.9.3-p385/gems/activerecord-3.2.12/lib/active_record/migration.rb:389:in `migrate'
/usr/local/rvm/gems/ruby-1.9.3-p385/gems/activerecord-3.2.12/lib/active_record/migration.rb:528:in `migrate'
/usr/local/rvm/gems/ruby-1.9.3-p385/gems/activerecord-3.2.12/lib/active_record/migration.rb:720:in `block (2 levels) in migrate'
/usr/local/rvm/gems/ruby-1.9.3-p385/gems/activerecord-3.2.12/lib/active_record/migration.rb:775:in `call'
/usr/local/rvm/gems/ruby-1.9.3-p385/gems/activerecord-3.2.12/lib/active_record/migration.rb:775:in `block in ddl_transaction'
/usr/local/rvm/gems/ruby-1.9.3-p385/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-1.9.3-p385/gems/activerecord-3.2.12/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-1.9.3-p385/gems/activerecord-3.2.12/lib/active_record/migration.rb:775:in `ddl_transaction'
/usr/local/rvm/gems/ruby-1.9.3-p385/gems/activerecord-3.2.12/lib/active_record/migration.rb:719:in `block in migrate'
/usr/local/rvm/gems/ruby-1.9.3-p385/gems/activerecord-3.2.12/lib/active_record/migration.rb:700:in `each'
/usr/local/rvm/gems/ruby-1.9.3-p385/gems/activerecord-3.2.12/lib/active_record/migration.rb:700:in `migrate'
/usr/local/rvm/gems/ruby-1.9.3-p385/gems/activerecord-3.2.12/lib/active_record/migration.rb:570:in `up'
/usr/local/rvm/gems/ruby-1.9.3-p385/gems/activerecord-3.2.12/lib/active_record/migration.rb:551:in `migrate'
/usr/local/rvm/gems/ruby-1.9.3-p385/gems/activerecord-3.2.12/lib/active_record/railties/databases.rake:179:in `block (2 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-1.9.3-p385/bin/ruby_noexec_wrapper:14:in `eval'
/usr/local/rvm/gems/ruby-1.9.3-p385/bin/ruby_noexec_wrapper:14:in `<main>'
Tasks: TOP => db:migrate 
```

有什么线索吗？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-02-19T15:25:55.620

尝试未安装`CREATE EXTENSION [...] hstore`扩展时，从数据库错误“无法打开扩展控制文件”中出现。`hstore`

在 Ubuntu 上，您可以通过安装`postgresql-contrib`包来安装扩展。

```
sudo apt-get install postgresql-contrib 
```

用户 terryjray 在 Gist 中记录了[启用 hstore](https://gist.github.com/terryjray/3296171)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-06T16:05:40.277

如果您`Postgresql`在 ubuntu 上有两个安装，例如`9.1`和`9.3`

[在运行特定于版本的安装之前，您可能需要使用他们的说明](https://wiki.postgresql.org/wiki/Apt)添加正确的 postgres 存储库，我将在下面解释它们以防它们消失：

```
deb http://apt.postgresql.org/pub/repos/apt/ UBUNTU_VERSION_NAME-pgdg main
sudo apt-get install wget ca-certificates
wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -
apt-get update 
```

（UBUNTU_VERSION_NAME 应替换为 trusty 或任何您的版本名称）

然后您可以使用以下命令`hstore`分别在每台服务器上安装扩展：

**PostgreSQL 9.1：**

```
sudo apt-get install postgresql-contrib-9.1 
```

**PostgreSQL 9.3：**

```
sudo apt-get install postgresql-contrib 
```

# java - android Cordova/PhoneGap 带有拉丁字母的 HTML 输入框

> ID：14960477
> 
> 赞同：2
> 
> 时间：2013-02-19T14:56:29.443
> 
> 标签：java, android, eclipse, cordova

当我们尝试在 HTML 输入框中输入一些文本时，没有插入拉丁字母，没有数字或任何常见符号。只有像€¥£¢¡»«§¿©®ω⊙¤°℃℉这样的特殊字符可以填充到输入中。我们尝试切换语言并发现例如可以使用韩语符号并且它们或多或少正确显示 - 其中一些强制插入的文本用以前输入的拉丁字母填充，不能直接插入。另一个奇怪的行为是当我们在输入框中选择整个文本然后剪切它并插入带有拉丁字母的新文本 - 只显示第一个字母，所有其他字母都没有插入。

我们没有使用默认的 Cordova 项目启动，而是在 Android 原生容器应用程序中运行 Cordova，并在某个时间点启动它。本机输入框不会出现问题 - 仅在 WebView 上。

我们使用以下 JS 库：Cordova 2.3.0、jQuery 1.8.2、jQueryMobile 1.2.0。

Android版本：4.1.1和4.2（Android 2.3不存在问题）

我们有 6 或 7 个不同的设备，我们可以在其中任何一个设备上重现它——Android 版本很重要。

设备：三星 Galaxy Nexus (4.2.2)、华硕 Nexus 7 (4.2.2)。

# java - 服务器发起的客户端-服务器通信

> ID：14960478
> 
> 赞同：2
> 
> 时间：2013-02-19T14:56:30.020
> 
> 标签：java, sockets, client-server

我想要这个设置：

*   服务器托管 TCP 套接字服务器
*   通过 TCP 连接的多个客户端（保持连接打开）

然后我想从服务器向客户端发起一条消息。我不知道如何做到这一点，并且同时有多个客户端会话。我读过的技术涉及服务器侦听端口，当它接收到来自客户端的通信时，它会启动一个新线程来处理和处理它，然后它会返回侦听端口以获取另一个客户端的下一个请求.
那么，我将如何利用它并向在其中一个线程上运行的客户端发送消息？

如果您有兴趣，我的实际使用场景如下。最终目标就像是远程控制您的文件系统将文件上传到服务器。- 每个客户端都有一个运行在系统托盘中的 Java 后台应用程序，该应用程序连接到服务器 - 服务器托管连接，还托管 RESTFul Web 服务以启动通信 - 移动设备通过 RESTFul Web 服务连接到服务器以请求有关客户端文件系统的信息。所以它可以向下钻取并找到一个文件，然后单击并将文件上传到服务器。这里的想法是移动用户需要在离开办公室时通过移动设备将文件从桌面上传到服务器。（这是定制产品，所以不能使用第三方应用程序_

PS：我一直在这里查看简单的客户端-服务器聊天程序：[http ://way2java.com/networking/chat-program-two-way-communication/](http://way2java.com/networking/chat-program-two-way-communication/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:06:43.860

您希望服务器始终在指定端口上侦听。一旦服务器注意到该端口上的传入连接，您应该创建一个新线程来处理该客户端和服务器之间的通信，而主线程继续侦听其他传入连接。这样，您可以将多个客户端连接到一个服务器。像这样：

```
private void listen() throws IOException {
    serverSocket = new ServerSocket(port)
    while (GlobalFlags.listening) {
        new ServerThread(serverSocket.accept();
        if (GlobalFlags.exit) {
            serverSocket.close();
            break;
        }
    }
} 
```

GlobalFlags 是控制监听过程的变量，并不是真正必要的。你可以做一段时间 True ，然后一直听下去。

在我的项目中，我有一个主服务器控制器，它的侦听器在线程中运行。控制器控制 GlobalFlags。我敢肯定，除了使用全局标志之外，还有一种更好的方法来进行线程间通信，但对我来说，这是当时最简单的方法。

ServerThread 应该一直循环在向客户端发送输出和从客户端接收输入之间切换。像这样：

```
ServerThread(Socket socket) {
    super("GameServerThread");
    this.socket = socket;
    try {
        this.socket.setTcpNoDelay(true);
    } catch (SocketException e) {
        // Error handling
    }
    this.terminate = false;
}

@Override
public void run() {        
    try {
        out = new PrintWriter(socket.getOutputStream(), true);
        in = new BufferedReader(
             new InputStreamReader(
             socket.getInputStream()));

        String inputLine, outputLine;

        while ((inputLine = in.readLine()) != null) {
                outputLine = processInput(inputLine);
                out.println(outputLine);
                if (terminate) {
                    break;
                }
            }
        }
        out.close();
        in.close();
        socket.close();

    } catch (Exception e) {
        // Error handling, should not use Exception but handle all exceptions by themselves.
} 
```

在客户端，您有一个线程通过类似的循环运行，从服务器接收输入，然后将输出发送到服务器。

在此示例中，processInput 是用于处理客户端输入的函数。如果您希望服务器启动联系，您可以让服务器在侦听输入之前向输出流发送一些内容，并让客户端先侦听。

我已经从我自己的一个项目中提取了这个例子，并且 this.socket.setTcpNoDelay(true) 应该使这个过程更快。参考这里：[http ://www.rgagnon.com/javadetails/java-0294.html](http://www.rgagnon.com/javadetails/java-0294.html)

“java.net.Socket.setTcpNoDelay() 用于启用/禁用 TCP_NODELAY，该 TCP_NODELAY 禁用/启用 Nagle 算法。Nagle 算法尝试通过最小化发送的段数来节省带宽。当应用程序希望减少网络延迟并提高性能时, 他们可以禁用 Nagle 的算法（即启用 TCP_NODELAY）。数据将更早发送，但会增加带宽消耗。Nagle 的算法在 RFC 896 中有描述。

您可以使用 java.net.Socket.getTcpNoDelay() 获得当前的“TCP_NODELAY”设置”

* * *

因此，要将消息发送到特定客户端，您可以在创建时将所有线程放在 ArrayList 中，这样您就可以跟踪所有当前连接的客户端。您可以让 processInput 方法停止并轮询队列/变量，直到另一个类将要发送的消息放入队列/变量中。所以如何获得类的句柄取决于你对 processInput 的实现。您可以给每个线程一个 ID（这是我在我的项目中所做的），并且可能让 processInput 方法在 index=ID 处轮询一个 ArrayList。然后要将输出发送到客户端，您必须将变量设置为 index=ID。

这种方法对我个人来说似乎有点笨拙，但我不确定我该怎么做。您可能会使用队列并让 processInput 将输入写入其队列，然后等待另一个类读取它并将其响应放入队列中。但我个人从未在 java 中使用过队列，所以你应该自己阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-10T07:29:09.287

据我所知 1) 服务器托管 TCP 套接字服务器 - 可能 2) 通过 TCP 连接的多个客户端 - 可能 3) 然后我想从服务器向客户端发起一条消息 - 不可能。客户端必须启动连接创建，然后服务器可能能够向您发送数据包。示例：您需要在浏览器上打开 Facebook 网站，Facebook 服务器无法自行决定将其页面发送到您的 PC，因为您的 PC 没有静态 IP 地址，而且如果 Facebook 假设编写代码来启动与您的 PC 的连接，那么它就像您的 PC 是服务器和 Facebook 网站/服务器充当客户端一样好。

# html - 嵌入html5标签的自动关闭闪光灯？

> ID：14960483
> 
> 赞同：0
> 
> 时间：2013-02-19T14:56:35.863
> 
> 标签：html, flash, embed

我刚刚发现了 HTML5 的嵌入标签，我想使用它。

```
<embed src="example.swf" /> 
```

但是，我还没有找到关于这个主题的完整教程......或者我可能找错了地方。

我的第一个问题，因为它看起来这是一个非常简单的标签......

[http://www.w3schools.com/tags/tag_embed.asp](http://www.w3schools.com/tags/tag_embed.asp)

[http://www.w3resource.com/html5/embed-element.php](http://www.w3resource.com/html5/embed-element.php)

...是如何让闪光灯在播放完毕后自动关闭？还是这个标签的预期行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T17:11:13.157

在 html 中包含 swfs 的最佳做法是使用[SWFObject](http://code.google.com/p/swfobject/) - 它是一个 javascript 库（它确实使用嵌入）。

没有办法让 flash 播放完毕后自动关闭 - 可以手动完成，但您需要修改 swf 以在完成后调用 javascript 函数 - 然后关闭或隐藏 javascript 函数中的 flash 内容.

# highcharts - 如何在各个数据点之间添加线条？

> ID：14960490
> 
> 赞同：2
> 
> 时间：2013-02-19T14:57:08.910
> 
> 标签：highcharts

我试图在 Highcharts 中制作一个散点图，它只将两个单独的点相互连接，但不连接到任何其他点。（显示数据点随时间的变化）。

[在这里](http://jsfiddle.net/2MdEN/)我说明我的问题。我希望在点之间有一条线

`[20, 20]`和`[80, 80]`

和一条单独的线路连接

`[60, 40]`到`[85, 60]`

但没有线路连接

`[80, 80]`到`[60, 40]`

是否有一种易于配置的方法来做到这一点，还是我必须手动渲染每一行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T17:27:43.970

`null`您可以在这些点之间简单地添加。

```
data: [[20, 20], [80, 80], null, [60, 40], [85, 60]] 
```

[**演示**](http://jsfiddle.net/2MdEN/1/)

# c++ - rcpp报错，在mac上学习Rcpp和C++

> ID：14960496
> 
> 赞同：0
> 
> 时间：2013-02-19T14:57:23.913
> 
> 标签：c++, macos, r, compiler-construction, rcpp

我决定开始学习 Rcpp 和 C++，以便我可以更快地制作 R 代码的各个方面。首先，我使用的是[devtools wiki](https://github.com/hadley/devtools/wiki/Rcpp)中的教程 hadley 。我在这台机器上有一个 c++ 编译器，因为它是一个 mac 并且我在上面安装了 xcode - 我被告知将 c++ 编译器放在机器上。我尝试运行第一个示例：

```
cppFunction('
            int one(){
            return 1;
            }
            ') 
```

但是，会发生什么：

```
 sh: make: command not found

Error in sourceCpp(code = code, env = env, rebuild = rebuild, showOutput = showOutput,  : 
  Error 1 occurred building shared library. 
```

我猜我有设置问题，但我不确定该怎么做。对于一般的 C++ 知识，我已经开始阅读 Savitch 的 Absolute C++，到目前为止，它实际上并没有告诉你任何关于使用编译器等设置机器的信息，因为你被指示使用名为 MyProgrammingLab 的东西，它只会告诉你是否有答案是否正确并给出输出，您无需进行编译或类似的操作。

谢谢，本·W。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:03:33.887

类型的错误`sh: foo: command not found`非常明显。你缺少`make`命令。安装它，然后重试。或者，如果 Xcode 将其安装在路径之外，请将其添加到路径中。

# xml - 在 xslt 中创建组合框

> ID：14960498
> 
> 赞同：0
> 
> 时间：2013-02-19T14:57:24.300
> 
> 标签：xml, xslt, combobox

我有来自 xml 的这个值，我必须使用 xslt 1.0 创建一个组合框

这是我从数据库中得到的 xml：

```
<CER_Pot>
  <Record CIMtrek_CERPot="Bus Dev|Ser Del|Sol Del|?" />
</CER_Pot> 
```

这就是我在 xslt 中创建组合框的方式：

```
<select size="1" style="width:60%;" name="CIMtrek_CI_CER_Pot"
                                                id="CIMtrek_CI_CER_Pot">
                                                <option value="0">Select Fund Pot</option>
                                                <xsl:for-each select="//CER_Pot/Record">
                                                        <option>
                                                            <xsl:if
                                                                test="//Record/CIMtrek_CERPot/text()=@CIMtrek_CI_CER_Pot">
                                                                <xsl:attribute name="selected">true</xsl:attribute>
                                                            </xsl:if>
                                                            <xsl:attribute name="value"><xsl:value-of
                                                                select="@CIMtrek_CERPot" /></xsl:attribute>
                                                        <xsl:value-of select="@CIMtrek_CERPot" />
                                                        </option>
                                                    </xsl:for-each>
                                            </select> 
```

这给了我没有任何问题的组合框，但我希望有一个组合框，它将基于此`|`分隔符拆分值，因此在这种情况下它将是四行

```
Bus Dev
Ser Del
Sol Del
? 
```

如何在 xslt 中执行此操作

请帮我完成他的工作。

最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T16:23:42.927

试试这个 XSLT：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="html"/>

    <xsl:template match="/">
        <select size="1" style="width:60%;" name="CIMtrek_CI_CER_Pot" id="CIMtrek_CI_CER_Pot">
            <option value="0">Select Fund Pot</option>
            <xsl:for-each select="//CER_Pot/Record">
                <xsl:variable name="selectValues">
                    <xsl:call-template name="tokenize">
                        <xsl:with-param name="pText" select="@CIMtrek_CERPot"/>
                        <xsl:with-param name="pDelim" select="'|'" />
                    </xsl:call-template> 
                </xsl:variable>

                <xsl:for-each select="$selectValues/item">
                    <xsl:variable name="curItem" select="." />
                    <option>
                        <xsl:if test="//Record/CIMtrek_CERPot/text()=$curItem">
                            <xsl:attribute name="selected">true</xsl:attribute>
                        </xsl:if>
                        <xsl:attribute name="value"><xsl:value-of select="$curItem"/></xsl:attribute>

                        <xsl:value-of select="$curItem"/>
                    </option>
                </xsl:for-each>
            </xsl:for-each>
        </select>
    </xsl:template>

    <xsl:template name="tokenize">
        <xsl:param name="pText"/>
        <xsl:param name="pDelim"/>

        <xsl:if test="string-length($pText)">
            <item>
                <xsl:value-of select="substring-before($pText, $pDelim)"/>
            </item>

            <xsl:call-template name="tokenize">
                <xsl:with-param name="pText" select="substring-after($pText, $pDelim)"/>
                <xsl:with-param name="pDelim" select="$pDelim" />
            </xsl:call-template>
        </xsl:if>
    </xsl:template>
</xsl:stylesheet> 
```

# php - 使用 PHPMailer 发送完成的 PDF 而不保存

> ID：14960505
> 
> 赞同：0
> 
> 时间：2013-02-19T14:57:31.380
> 
> 标签：php, pdf, phpmailer

我是 php 新手，并且在构建页面时一直在学习。我当前的任务是能够在浏览器中打开 PDF，填写表单，然后单击表单底部的按钮提交表单。

我们希望发送完整的表格，而无需将副本保存到服务器。不过，拥有两种形式的循环并不可怕。

我目前可以发送电子邮件，但脚本只发送空白文档。

```
<?php

require("class.phpmailer.php");

$mail = new PHPMailer();

$mail->IsSMTP();  // telling the class to use SMTP
$mail->Host     = "xxx.xxx.xxx"; // SMTP server

$mail->From     = "xxx@xxx.xxx";
$mail->AddAddress("xxx@xxx.xxx");

$mail->Subject  = "Attachment Test";
$mail->Body     = "Hi! \n\n This is my first e-mail sent through PHPMailer.";
$mail->WordWrap = 50;
$mail->AddAttachment('tshirtorderform.pdf');

if(!$mail->Send()) {
  echo 'Message was not sent.';
  echo 'Mailer error: ' . $mail->ErrorInfo;
} else {
  echo 'Message has been sent.';
}
?> 
```

我意识到我是在告诉它检索空白文档，但我对如何附加已完成的表格一无所知。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:01:18.020

PHPmailer 中有一个半未记录的 AddStringAttachment() 方法，它允许您直接从字符串附加，而不需要实际的磁盘文件：

[http://phpmailer.worxware.com/index.php?pg=tutorial](http://phpmailer.worxware.com/index.php?pg=tutorial)

搜索“字符串附件”。打败我为什么他们没有在方法文档中列出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-20T17:26:12.783

我也推荐了 AddStringAttachment() 方法，但首先你需要使用 TCPDF 来创建 PDF 的正文。

我在这个主题中给出了一些提示：[AddStringAttachment with PDF in PHPMailer not work](https://stackoverflow.com/questions/22007292/addstringattachment-with-pdf-in-phpmailer-not-work/23766227#23766227)

# jquery - 无法将嵌套表输入元素放入 jQuery 数组

> ID：14960507
> 
> 赞同：0
> 
> 时间：2013-02-19T14:57:39.037
> 
> 标签：jquery, html-table, serializearray

我知道这不应该这么难，但我需要另一双眼睛，因为我正在用头撞墙。

我有一个带有 ID 的 NESTED 表，例如：

```
<table id="dwMeasurements_0">
<tbody>
    <tr id="tDim_0">
        <td colspan="2">
        <strong>Total Wall Length: </strong>
        </td>
        <td>
        <input type="text" id="Msr_0_T1" class="dwInput" value="0"> Inches and </td>
        <td>
        <input type="text" id="Msr_0_T2" class="dwInput" style="margin-left:2px;" value="0"> 16ths</td>
    </tr>
    <tr>
        <td colspan="4">
        <hr>
        </td>
    </tr>
    <tr id="lDim_0_0">
        <td>
            <select id="ItemType_0_0">
                <option>Item Type</option>
                <option>Door</option>
                <option>Window</option>
                <option>Other</option>
            </select>
        </td>
        <td>
        <label>L-Dim: </label>
        </td>
        <td>
        <input type="text" id="Msr_0_0_A1" class="dwInput" value="0"> Inches and </td>
        <td>
        <input type="text" id="Msr_0_0_A2" class="dwInput" style="margin-left:2px;" value="0"> 16ths</td>
    </tr>
//MORE ROWS HERE//
</table> 
```

我的 jQuery 序列化文本输入和选择元素如下：

```
var MeasureRowCount = $("[id^='MeasureRow_']").length; //Populated by counting parent rows 
var htmlOutput = '';
var rowInputs,rowSelects;
for(var r=0;r < MeasureRowCount;r++){
    rowInputs = $('#dwMeasurements_'+r+' :input').serializeArray();
    rowSelects = $('#dwMeasurements_'+r).find('select').serializeArray();

            $.each(rowSelects, function(i, eSelectItem){
        esName = eSelectItem.name;
        esVal = eSelectItem.value;                

                     htmlOutput += //name and value from above with markup
            }
}

// htmlOutput to DOM here with markup 
```

我尝试了多种方法来收集输入元素，但都没有工作。数组出现空。即使表是嵌套的，由于我直接调用嵌套表ID，它不应该工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:07:13.543

这段代码：

```
for(var r=0;r < MeasureRowCount;r++){
    rowInputs = $('#dwMeasurements_'+r+' :input').serializeArray(); 
```

`rowInputs`每次循环都会覆盖的值。

尝试使用[`jQuery.merge`](http://api.jquery.com/jQuery.merge/)来组合它们：

```
var rowInputs=[],rowSelects=[];
for(var r=0;r < MeasureRowCount;r++){
    $.merge(rowInputs, $('#dwMeasurements_'+r+' :input').serializeArray()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T19:18:28.030

答案不是 100% 直观的，但我应该知道......

The `serializeArray()` method defaults to using `name:value` pairs when collecting elements, and the elements I was collecting didn't have any "name" attributes, only id's. Once I added names, the arrays populated as desired.

# sql-server - 计算位标志交集的一致性

> ID：14960510
> 
> 赞同：4
> 
> 时间：2013-02-19T14:57:45.533
> 
> 标签：sql-server, bit-fields

### 技术情况：

给出的是*SQL Server 2008 R2*`int`中用于保存十进制“编码”位标志的列（范围从 2 ⁰到 2 ^(30)，因此有 31 个可用标志，最大值为）。此列可能包含整个范围的可分配整数组合，全部用于对单个对象进行分类。*^(^(`1073741824`))*

 *### 要解决的问题：

从有限数量的十进制“位整数”中，我们必须找到一个代表所有这些标志的某种交集的数字——比如当你有 时`3,10,524290`，很明显`2`应该在结果中设置，而其他位 ( `1,8,524288`)是有争议的。这是一个非常基本的例子。这可能是一组真实的输入数据（仅前两列）：

```
发生次数 | 十进制位域 | 二进制表示
     7 | 268435460 | 100000000000000000000000000100
     5 | 268435488 | 100000000000000000000000100000
     5 | 128 | 00000000000000000000010000000
     4 | 32 | 000000000000000000000000100000
     3 | 4 | 000000000000000000000000000100
     3 | 268435492 | 10000000000000000000000100100
     2 | 36 | 00000000000000000000000100100
     2 | 132 | 00000000000000000000010000100
     1 | 160 | 00000000000000000000010100000
   特定位的出现次数：3--------------------3-6--6--
     期望的输出可能性：10000000000000000000000100100

```

### 到目前为止的解决方案：

*… 在 Transact-SQL 中实现：*

1.  收集所有要评估的整数并将它们连接成一个逗号分隔的字符串。
2.  减少字符串，取出第一个数字，循环遍历：
3.  对照最大值 ( `&-AND`) 检查受测者并将最大值除以 2 (while `>=1`)。

### … 至今？Ò

现在我有一个二进制代表的比特集的输出。我考虑将这些位保存到一个 31 列的临时表中，以便进行评估。但后来我开始想：难道没有更聪明的方法可以做到这一点吗？SQL Server 速度超快，即使在反汇编 10000 个生成的整数时也是如此。但也许有一个内置函数可以计算两个二进制位标志之间的“距离”。

我承认这是一个复杂的问题，但我确实*看到*了隧道尽头的曙光，即使它需要以间接的方式完成。它会变得更加复杂，因为稍后还应该应用加权，因此 2×¬ `00010000`@ 100% 显着性**>** 4× `00010000`@ 40% 显着性。但是，当我生成并可用的摘要时，我会尝试处理这个问题![;-)](../Images/f8d5f5a71f2a7f1a29d148a1608f481d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:56:09.923

您可以使用按位和进行操作

```
declare @i int
declare @x int
declare @cnt int
select @i=2147483647  -- 1111111 11111111 11111111 11111111
declare @t table (a int)
insert into @t values( 3),(10),(524290);

Select @i= (@i & a) from @t 

-- just for fun an output
set @x=1
set @cnt=0
While @cnt<31
  begin
  Print Case when @x & @i <> 0 then 'X' else ' ' end  +' ' + Cast(@x as Varchar(12))   
  Set @cnt=@cnt + 1
  if @cnt<31  Set @x=@x*2
  end 
```

或者更好的输出

```
declare @i int
declare @x int
declare @cnt int
select @i=2147483647  -- 1111111 11111111 11111111 11111111
Declare  @ref table(ref int) 
set @x=1
set @cnt=0
While @cnt<31
  begin
  insert into @ref Values(@x)
  Set @cnt=@cnt + 1
  if @cnt<31  Set @x=@x*2
  end 

declare @t table (a int)
insert into @t values( 3),(10),(524290);

Select @i= (@i & a) from @t 

Select * from @ref where ref&@i<>0 
```

作为对您评论的回答

```
declare @i int
declare @x int
declare @cnt int
select @i=2147483647  -- 1111111 11111111 11111111 11111111
Declare  @ref table(ref int) 
set @x=1
set @cnt=0
While @cnt<31
  begin
  insert into @ref Values(@x)
  Set @cnt=@cnt + 1
  if @cnt<31  Set @x=@x*2
  end 

declare @t table (a int)
insert into @t values( 3),(5),(9),(17),(33),(65),(128);

Select @i= (@i & a) from @t 

Select a,Count(*) as BitCount
from @ref r
join @t t on t.a & r.ref<>0
group by a

Select ref,Count(*) as OCC from @ref r
join @t t on t.a & r.ref<>0
group by ref

Select ref,(Select count(*) from @t where a & r.ref<>0) as OCC
from @ref r 
```*

# c# - Monorail 无法读取从 jQuery 接收的 JSON（对象列表）数据

> ID：14960512
> 
> 赞同：2
> 
> 时间：2013-02-19T14:57:46.903
> 
> 标签：c#, asp.net-mvc, castle-monorail

我有以下 jquery ajax：

```
 $(".gridster ul").gridster({
               widget_margins: [5, 5],
               widget_base_dimensions: [280, 280],
               draggable: {
                stop: function(event, ui){ 
                              var orderState = {
        photos:  $(".gridster ul").data("gridster").serialize(),
        promoid: $.getUrlVar('promoId')
        };
       $.ajax({
                url: "/Photos/SetOrder",
                data: {neworder:orderState},
                dataType: 'json',
                type: 'POST'
            }); 
```

我将其发送到 Monorail 2.1 控制器。

JS 中的 orderState 对象如下所示：

```
neworder[photos][0][height]=1
neworder[photos][0][id]=98315
neworder[photos][0][width]=1
neworder[photos][0][x]=2
neworder[photos][0][y]=1
neworder[photos][1][height]=1
neworder[photos][1][id]=98316
neworder[photos][1][width]=1
neworder[photos][1][x]=1
neworder[photos][1][y]=1
neworder[photos][2][height]=1
neworder[photos][2][id]=98317
neworder[photos][2][width]=1
neworder[photos][2][x]=1
neworder[photos][2][y]=2
neworder[photos][3][height]=1
neworder[photos][3][id]=98318
neworder[photos][3][width]=1
neworder[photos][3][x]=1
neworder[photos][3][y]=3
neworder[promoid]=163844 
```

它应该映射到以下 c# viewmodel 类：

```
 public class OrderViewModel
    {
        public int height { get; set; }

        public int width { get; set; }

        public int x { get; set; }

        public int y { get; set; }

        public int id { get; set; }
    }

    public class NewPromoImageOrderViewModel
    {
        public NewPromoImageOrderViewModel()
        {
            Photos = new List<OrderViewModel>();
        }

        public int PromoId { get; set; }

        public List<OrderViewModel> Photos { get; set; }
    } 
```

由以下操作使用：

```
 [return: JSONReturnBinder]
        [AccessibleThrough(Verb.Post)]
        public object SetOrder([JSONBinder("neworder")] NewPromoImageOrderViewModel neworder)
        {
            //bla
        } 
```

它给我的回应是这样的：

> 消息：错误构建方法参数。分析的最后一个参数是 neworder，值为 ''
> 
> StackTrace：在 Castle.MonoRail.Framework.SmartDispatcherController.BuildMethodArguments(ParameterInfo[] 参数，IRequest 请求，IDictionary`2 actionArgs) in C:\Dropbox\Projects\Monorail\castleproject-MonoRail-98c93ac\castleproject-MonoRail-98c93ac\MR2\src\Castle.MonoRail.Framework\SmartDispatcherController.cs:line 329 at Castle.MonoRail.Framework.SmartDispatcherController.InvokeMethod(MethodInfo method, IRequest request, IDictionary`2 extraArgs）在 C:\Dropbox\Projects\Monorail\castleproject-MonoRail-98c93ac\castleproject-MonoRail-98c93ac\MR2\src\Castle.MonoRail.Framework\SmartDispatcherController.cs：Castle.MonoRail.Framework.ActionMethodExecutorCompatible 的第 80 行。在 C:\Dropbox\Projects\Monorail\castleproject-MonoRail-98c93ac\castleproject-MonoRail-98c93ac\MR2\src\Castle.MonoRail.Framework\ActionMethodExecutor.cs:line 79 中执行（IEngineContext engineContext，IController 控制器，IControllerContext 上下文） Castle.MonoRail.Framework.Controller.RunActionAndRenderView() 在 C:\Dropbox\Projects\Monorail\castleproject-MonoRail-98c93ac\castleproject-MonoRail-98c93ac\MR2\src\Castle.MonoRail.Framework\Controller.cs:line 1639
> 
> 内部异常：ArgumentNullException
> 
> 消息：值不能为空。参数名称：s
> 
> StackTrace：在 System.IO.StringReader..ctor(String s) at Newtonsoft.Json.JsonConvert.DeserializeObject(String value, Type type, JsonSerializerSettings settings) at Newtonsoft.Json.JsonConvert.DeserializeObject(String value, Type type) at Castle .MonoRail.Framework.Services.NewtonsoftJSONSerializer.Deserialize(String jsonString, Type expectedType) 在 C:\Dropbox\Projects\Monorail\castleproject-MonoRail-98c93ac\castleproject-MonoRail-98c93ac\MR2\src\Castle.MonoRail.Framework\Services \NewtonsoftJSONSerializer.cs：C:\Dropbox\Projects\Monorail\castleproject-MonoRail-98c93ac\castleproject-MonoRail- 中 Castle.MonoRail.Framework.JSONBinderAttribute.Bind(IEngineContext context, IController controller, IControllerContext controllerContext, ParameterInfo parameterInfo) 的第 100 行98c93ac\MR2\src\Castle.MonoRail。Framework\Attributes\JSONBinderAttribute.cs：C:\Dropbox\Projects\Monorail\castleproject-MonoRail-98c93ac\ 中 Castle.MonoRail.Framework.SmartDispatcherController.BuildMethodArguments(ParameterInfo[] 参数，IRequest 请求，IDictionary`2 actionArgs) 的第 135 行castleproject-MonoRail-98c93ac\MR2\src\Castle.MonoRail.Framework\SmartDispatcherController.cs:line 288

我很确定我的映射和视图模型类是正确的。JQuery 确实发送了预期的 json 对象，但 Monorail 似乎在转换它时遇到了问题。这可能是一个错误吗？

编辑：嗯，Monorail 在这里并没有错……我在帖子中发布的东西毕竟是 JSON。使用此库后：[https](https://code.google.com/p/jquery-json/) ://code.google.com/p/jquery-json/ ，我设法将对象转换为 JSON。我认为通过选择 dataType:"json" 就足够了，但显然不是。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:48:09.530

$.ajax 调用中的数据类型选项指的是预期的数据。你需要做的是：

```
$.ajax({
  url: "/Photos/SetOrder",  
  contentType: 'application/json; charset=utf-8',
  data: JSON.stringify({neworder:orderState}),
  type: 'POST'
}); 
```

# asp.net-web-api - 尝试通过 Web API 使用 F# 控制器

> ID：14960514
> 
> 赞同：3
> 
> 时间：2013-02-19T14:57:50.480
> 
> 标签：asp.net-web-api, f#

我在引用 f# web api 库的 c# mvc 项目中收到“无法从程序集 MyApp.Api 加载类型 MyApp.Api.App”运行时错误。c# 项目 MyApp.Web 有对 F# 项目 MyApp.Api 的项目引用，并且没有编译错误。可能是什么问题？

项目 MyApp.Api 中的 App.fs

```
namespace MyApp.Api

open System
open System.Web
open System.Web.Mvc
open System.Web.Routing
open System.Web.Http
open System.Data.Entity
open System.Net.Http.Headers

open System.Net.Http.Headers

type Route = { controller : string; action : string; id : UrlParameter }
type ApiRoute = { id : RouteParameter }

type App() =
    inherit System.Web.HttpApplication() 

    static member RegisterGlobalFilters (filters:GlobalFilterCollection) =
        filters.Add(new HandleErrorAttribute())

    static member RegisterRoutes(routes:RouteCollection) =
        routes.IgnoreRoute( "{resource}.axd/{*pathInfo}" )
        routes.MapHttpRoute( "DefaultApi", "api/{controller}/{id}", 
            { id = RouteParameter.Optional } ) |> ignore
        routes.MapRoute("Default", "{controller}/{action}/{id}", 
            { controller = "Home"; action = "Index"; id = UrlParameter.Optional } ) |> ignore

    member this.Start() =
        AreaRegistration.RegisterAllAreas()
        App.RegisterRoutes RouteTable.Routes
        App.RegisterGlobalFilters GlobalFilters.Filters 
```

还有我在 MyApp.Web 中的 global.asax.cs

```
using System.Web.Mvc;
using System.Web.Optimization;
using System.Web.Routing;
using MyApp.Api;

namespace MyApp.Web
{
    public class WebApiApplication :  MyApp.Api.App// System.Web.HttpApplication
    {
        protected void Application_Start()
        {
            base.Start();
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T00:31:07.563

您正在错误地注册您的 api 路由。虽然 API 看起来很相似，但它们并不相似。您需要使用`HttpConfiguration`实例注册您的 Web API 路由：

```
GlobalConfiguration.Configuration.Routes.MapHttpRoute("", "", ...) 
```

您正在尝试将 Web API 路由映射到 MVC`RouteTable`中。我真的很惊讶你没有收到编译错误。

* * *

因此，上述情况似乎并非如此。当我之前尝试没有引入 Dan Mohl 的项目模板时，我一定没有包含适当的命名空间。

您已将您的`MyApp.Api.App`类型子类化为`Global.asax.cs`. 丹的模板不包括这个。相反，他的模板将标记修改`Global.asax`如下：

```
<%@ Application Inherits="MyApp.Api.App" Language="C#" %>
<script Language="C#" RunAt="server">

  protected void Application_Start(Object sender, EventArgs e) {
      base.Start();
  }

</script> 
```

这似乎工作得很好。我还有以下工作：

```
<%@ Application Inherits="MyApp.Web.WebApiApplication" Language="C#" %>
<!-- The following seems to be optional; just an extra, duplicate event handler.
     I was able to run the app with this script and without. -->
<script Language="C#" RunAt="server">

  protected void Application_Start(Object sender, EventArgs e) {
      base.Start();
  }

</script> 
```

请注意，您需要完整的命名空间，而不仅仅是类型名称。如果它工作正常，那么我认为更多的代码是必要的，因为我找不到任何其他错误。

# c# - Googlemaps api上的多个标记

> ID：14960515
> 
> 赞同：0
> 
> 时间：2013-02-19T14:57:50.820
> 
> 标签：c#, javascript, google-maps, kml, marker

我想在地图上添加多个标记。数量不定（一个到几百个） 哪个是最好的解决方案？

1.  生成带有坐标的 kml 文件

2.  使用javascript并通过（在我的情况下）c#创建很多标记变量

3.  另一种我没想到的方式

非常感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:13:59.840

集群！请参阅此页面：[https](https://developers.google.com/maps/articles/toomanymarkers) ://developers.google.com/maps/articles/toomanymarkers 我在实际项目中使用此解决方案。

例子：

```
 var latlng = new google.maps.LatLng(-17.308688,-49.495605);
 var myLatlng, marker, marker_cluster;
 var markers = [];

 var mapOptions = {
        zoom: 4,
        minZoom: 4,
        center: latlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        backgroundColor: '#f0f0f0'
 };
 map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

$.each(itens, function (k, iten) {
        myLatlng = new google.maps.LatLng(iten.lat, iten.lng);
        marker = new google.maps.Marker({
            position: myLatlng,
            title: iten.title
        });

        markers.push(marker);
    });

marker_cluster = new MarkerClusterer(map, markers); 
```

# html - doesn't appear when data=google.co.uk I want to embed the google home page in a page on my website. I want to use the html5 element because from what I've read this is the most up-to-date way to do th 问问题 问问题 2013-02-19T14:58:02.297 63 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I want to embed the google home page in a page on my website. I want to use the html5 element because from what I've read this is the most up-to-date way to do this and should work on ie7+ and everything else. But I'm having problems getting it to work. Here's what I'm using: If I change the url to something different it works fine, but with google... nothing. Am I missing something? I can't figure out what I'm doing wrong? this is the most up-to-date way It isn't. is simply a generic way. It is inconsistently supported. If you want to embed HTML documents, use an iframe. That won't help in this situation though. In the HTTP headers for the page, Google say: X-Frame-Options: SAMEORIGIN They are forbidding you from embedding their page inside yours, and your browser is respecting their wishes. htmlobject 4 1 回答 1 This answer is useful 1 这是最新的方式 它不是。只是一种通用的方式。它受到不一致的支持。 如果要嵌入 HTML 文档，请使用 iframe。 不过，这在这种情况下无济于事。在页面的 HTTP 标头中，Google 说： X-Frame-Options: SAMEORIGIN 他们禁止您将他们的页面嵌入到您的页面中，并且您的浏览器尊重他们的意愿。 于 2013-02-19T15:01:07.570 回答 Related 1 xaml - Windows 8 内容属性不起作用 2 java - jssc (serialPort.readBytes() ) 与 Arduino 2 ios - 安装了 Xcode 4.5，MPMoviePlayerController 不再工作 2 c++ - C++11 中来自 C99 的 fenv.h 2 java - 连接数组的两个元素以创建新的数组元素 7 c# - 确定字符串是否具有所有唯一字符 2 scala - 如何将一段中文文本拆分为单个字符？ 3 jquery - jQuery 淡出和淡入问题 1 jquery - 为什么我的菜单按钮打不开链接？CSS、jQuery 或 HTML 问题？ 1 orchardcms - 如何在 Orchard CMS 中为页面组设置不同的二级菜单？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：14960520
> 
> 赞同：0
> 
> 时间：
> 
> 标签：html, object

I want to embed the google home page in a page on my website. I want to use the `<object>` html5 element because from what I've read this is the most up-to-date way to do this and should work on ie7+ and everything else.

But I'm having problems getting it to work. Here's what I'm using:

```
<object type="text/html" data="http://www.google.co.uk" style="width: 1000px; height: 600px;"></object> 
```

If I change the url to something different it works fine, but with google... nothing.

Am I missing something? I can't figure out what I'm doing wrong?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:01:07.570

> 这是最新的方式

它不是。`<object>`只是一种通用的方式。它受到不一致的支持。

如果要嵌入 HTML 文档，请使用 iframe。

*不过，这在这种*情况下无济于事。在页面的 HTTP 标头中，Google 说：

> `X-Frame-Options: SAMEORIGIN`

他们禁止您将他们的页面嵌入到您的页面中，并且您的浏览器尊重他们的意愿。

# c# - 有没有办法可以防止 struct 被实例化，或者我可以有一个将被复制的类？

> ID：14960529
> 
> 赞同：1
> 
> 时间：2013-02-19T14:58:24.310
> 
> 标签：c#, reference, struct, value-type, default-constructor

好的，这比实际要求更具好奇心。

假设我有这个课程：

```
public sealed class Entity
{
    int value;

    Entity()
    {

    }

    public static implicit operator Entity(int x)
    {
        return new Entity { value = x };
    }
} 
```

我不希望这个类在类之外实例化，这很有效。但是这里`Entity`的 s 将被引用而不是像值类型一样被复制。这个类太小了，我希望它表现得像值类型。此外，如果我比较`Entity`s 的两个实例，就像`e1 == e2`它会给出引用相等（好的，我可以重载`==`，但这是更多的工作）。所以我会把它变成一个结构：

```
public struct Entity
{
    int value;

    public static implicit operator Entity(int x)
    {
        return new Entity { value = x };
    }
} 
```

但现在有人可以`new Entity()`轻松做到。

我的问题是有一种方法可以让我拥有一个类型（结构/类）

1) 每次访问该值时都会被复制，这样

```
Entity e1 = 1;
Entity e2 = e1;
ReferenceEquals(e1, e2); // prints false, just like any value type 
```

2) 在比较相等时具有值语义

```
Entity e1 = 1;
Entity e2 = 1;
e1.Equals(e2); // prints true

// this is easy though by overriding default equality. 
```

3) 在类型范围之外不可实例化：

```
Entity e = new Entity(); // should not compile 
```

基本上接近枚举的行为。我当然可以没有它，只是学习。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:14:40.020

不可能重新定义或尝试隐藏 C# 中结构的默认构造函数，因为 C# 编译器通常会根据无参数构造函数不执行任何操作的假设来编译代码。请参阅[为什么我不能为 .NET 中的结构定义默认构造函数？](https://stackoverflow.com/questions/333829/why-cant-i-define-a-default-constructor-for-a-struct-in-net).

您的选择是

*   使用类
*   确保您的结构的默认值具有某种意义（例如，在您的情况下，int 将被初始化为 0）——这就是枚举的作用（回想一下，枚举被初始化为 0）。

我的建议是使用一个类，直到您确定存在性能问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T16:03:57.070

一个类型对于该类型的存储位置会发生什么没有发言权。任何类型的存储位置都可以存在，或者它们的内容被相同类型的其他位置的内容覆盖，而类型本身在这件事上没有任何发言权。引用类型的存储位置保存类引用；当它存在时，它将是一个空引用。引用类型的存储位置保存空引用以外的任何内容的唯一方法是，如果创建了该类型的实例并且——在某些涉及完全信任代码和反射的场景之外——引用类型将完全控制可能发生的情况。

相比之下，值类型的存储位置是该类型*的*一个实例。因此，一个结构无法控制一个结构是如何存在的。一个结构可以控制的——在有限的范围内——是它的字段可以包含什么值。在有限信任场景中，如果结构的代码将该值写入结构的某个实例（如果该值被写入结构的任何实例，甚至是有限信任代码，则私有结构字段只能假定非默认值）访问该实例可能能够使用多线程重叠读取和写入来生成一个结构，该结构具有该结构本身永远不会自行创建的字段值的*组合）。*

我建议创建一个具有类类型的单个私有字段的结构。你不能阻止代码创建一个`default(Entity)`，但这并不意味着你必须允许代码对它做任何有用的事情。它的`Equals`方法应该足够好，以便`true`在与另一个默认实例比较时返回，以及`false`在与其他任何实例比较时，并且`GetHashCode`应该为所有默认实例返回相同的值，但任何其他方法都可能引发异常。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-19T15:00:26.873

`private`为*类* 创建所有构造函数（除了静态构造函数）`Entity`。`protected`也可以，但是因为它`sealed`，这没有多大意义。

# android - 如何在 Android 中跟踪 Omniture 自定义流量变量？

> ID：14960530
> 
> 赞同：1
> 
> 时间：2013-02-19T14:58:27.080
> 
> 标签：android, analytics, adobe-analytics, traffic-measurement

在 Site Catalyst 中，我们定义了自定义流量变量“购买的商品”。现在我如何发送请求以从 Android 库更新此自定义变量？[我在这里](http://microsite.omniture.com/t2/help/en_US/sc/appmeasurement/android/index.html#AppMeasurement_for_Android_3x)找不到太多帮助

请在下面找到我的代码，

```
 public class TrackingHelper {
    private static final String TRACKING_RSID = "MY_TRACKING_RSID";
    private static final String TRACKING_SERVER = "MY_TRACKING_SERVER";
    static ADMS_Measurement measurement = null;

    public static void startActivity(Activity activity) {
        measurement = ADMS_Measurement.sharedInstance(activity);
        measurement.startActivity(activity);
    }

    public static void stopActivity() {
        measurement = ADMS_Measurement.sharedInstance();
        measurement.stopActivity();
    }

    public static void configureAppMeasurement(Activity activity) {
        if (measurement == null) {
            measurement = ADMS_Measurement.sharedInstance(activity);
            measurement.configureMeasurement(TRACKING_RSID, TRACKING_SERVER);
            measurement.setOfflineTrackingEnabled(true);
            measurement.setDebugLogging(true);
        }
    }

    public static void trackItemBought() {
        if (measurement != null) {
            measurement = ADMS_Measurement.sharedInstance();
            Hashtable<String, Object> contextData = new Hashtable<String, Object>();
            contextData.put("Item Bought", "Item Bought");
            measurement.setEvents("Item Bought");
            measurement.track(contextData);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T18:02:41.630

我不能保证 android 代码，但这里有一些一般的想法：

当您发送上下文数据变量时，您会发送一个名称-值对，所以我怀疑这一行： contextData.put("Item Bought", "Item Bought"); 应该更像这样（我会说被购买的物品是篮球）： contextData.put("Item Bought", "Basketball");

然后，有权访问 SiteCatalyst 中的处理规则的人将需要配置一条规则，以说明该变量（“已购买的商品”）属于其分配的自定义流量变量（例如 prop14）。[http://www.jasonegan.net/2011/04/07/omniture-sitecatalyst-15-context-variables-processing-rules/](http://www.jasonegan.net/2011/04/07/omniture-sitecatalyst-15-context-variables-processing-rules/)讨论了如何做到这一点，但文章通常假设你有一定的水平SiteCatalyst 的知识。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-14T16:20:04.173

只需在您的代码中进行以下更改。

```
public class TrackingHelper {
private static final String TRACKING_RSID = "MY_TRACKING_RSID";
private static final String TRACKING_SERVER = "MY_TRACKING_SERVER";
static ADMS_Measurement measurement = null;

public static void startActivity(Activity activity) {
    measurement = ADMS_Measurement.sharedInstance(activity);
    measurement.startActivity(activity);
}

public static void stopActivity() {
    measurement = ADMS_Measurement.sharedInstance();
    measurement.stopActivity();
}

public static void configureAppMeasurement(Activity activity) {
    if (measurement == null) {
        measurement = ADMS_Measurement.sharedInstance(activity);
        measurement.configureMeasurement(TRACKING_RSID, TRACKING_SERVER);
        measurement.setOfflineTrackingEnabled(true);
        measurement.setDebugLogging(true);
    }
}

public static void trackItemBought() {
    if (measurement != null) {
        measurement = ADMS_Measurement.sharedInstance();
        Hashtable<String, Object> contextData = new Hashtable<String, Object>();
        contextData.put("Item Bought", "Item Bought");
        measurement.setEvents("Item Bought");
        measurement.contextData(contextData);
        measurement.track();
    }
} 
```

# android - 缓冲 HTTP 响应实体内容的问题

> ID：14960531
> 
> 赞同：1
> 
> 时间：2013-02-19T14:58:30.243
> 
> 标签：android, httpclient

它是第二个 try/catch 块。Logcat 仍在记录 **size<=0**。我确实有来自服务器的响应。我不知道为什么会发生。谁能帮我？如果是这样，你能告诉我处理这个reposne的正确方法吗？

```
public class MainActivity extends Activity implements OnClickListener {

    TextView tv;
    EditText et;
    String barcode;
    String url = null;

protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    tv = (TextView) findViewById(R.id.textView1);
    et = (EditText) findViewById(R.id.editText1);
    Button btn = (Button) findViewById(R.id.b1);
    btn.setOnClickListener(this);

}

@Override
public void onClick(View v) {
switch (v.getId()) {
case R.id.b1:

    // create URL------------------
    barcode = et.getText().toString();
    StringBuilder sb = new StringBuilder("http://cathedralbc.web44.net/firstPHPfile.php?item=");
    sb.append(barcode);
    url= sb.toString();
    //-----------------------------

    new DoInBackGround().execute(url);

    break;

default:
    break;
    }

}

public class DoInBackGround extends AsyncTask<String, Void, String> {

String urlComplete;
BufferedReader br = null;
String result = "";

@Override
protected String doInBackground(String... params) {

    this.urlComplete = params[0];

    return getDataFrom();
}

final String getDataFrom(){

        try {
            HttpClient client = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(urlComplete);
            HttpResponse response = client.execute(httpPost);
            HttpEntity entity = response.getEntity();
            InputStream InEntity = entity.getContent();
            Log.i("log_tag", "READING1  " + InEntity.toString());   
            try{

                BufferedReader bufferInEtity = new BufferedReader(new InputStreamReader(InEntity,"iso-8859-1"),0);
                StringBuilder sbResponse = new StringBuilder();
                String line = null;
                while ((line = bufferInEtity.readLine()) != null) {
                    sbResponse.append(line + "\n");

                    }

            InEntity.close();
            result = sbResponse.toString();

                }catch(Exception e){
                Log.e("log_tag", "READING  " + e.getMessage()); 
            }

        } catch (Exception e) {
        Log.e("log_tag", "HTTPCLIENT  " + e.getMessage());
        } 

    return result;

}
@Override
protected void onPostExecute(String result) {

    try {
        JSONArray jArray = new JSONArray(result);
        for(int i=0; i<jArray.length(); i++){
            JSONObject jsonOBJ = jArray.getJSONObject(i);
            tv.setText(jsonOBJ.getInt("name"));
        }

    } catch (JSONException e) {
        Log.e("log_tag", "JSONArray  " + e.getMessage());
    }

    }

}

} 
```

# encryption - 可以将 iisnode 配置为处理（或忽略）加密的 appSettings 吗？

> ID：14960532
> 
> 赞同：0
> 
> 时间：2013-02-19T14:58:43.893
> 
> 标签：encryption, web-config, iisnode

我们设置了 iisnode 来处理对 ASP.NET Web 应用程序的一个子目录的请求。作为一项安全措施，我们加密了我们的 appSettings。与 iisnode 相关的配置都不是特别敏感的，但应用程序的其他部分在那里存储密码。

但是，当 web.config 的 appSettings 被加密时，iisnode 会抛出 500 错误。

我相信我已经确认无论您是否引用 appSetting 变量都会引发错误。

我愿意将我的配置移动到特定于 iisnode 的配置文件之一——甚至只是一个 js 文件——但我需要加密 appSettings。

所以我需要 iisnode 来处理加密的 appSettings，要么优雅地忽略它，要么正确地读取它。这是可以配置的东西，还是我应该考虑修补 iisnode 代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:37:04.570

在 Tomasz Janczuk 的建议下，我在 iisnode 中将此作为[错误](https://github.com/tjanczuk/iisnode/issues/259)输入，所以我猜这个问题的答案是“不”。

我追求的解决方法是对需要加密的项目使用[SingleSectionTagHandler ，这样我就可以不加密 appSettings。](http://vaultofthoughts.net/UsingSingleTagSectionHandlerInsteadOfAppSettings.aspx)

# c++ - C++：如何允许自己的比较运算符（）？

> ID：14960534
> 
> 赞同：0
> 
> 时间：2013-02-19T14:58:48.733
> 
> 标签：c++, stl

我有一个自定义列表类，并希望支持使用 STL 中已知的“比较运算符”的操作。例如：

```
std::list<MyClass> d;
struct not_key {
    not_key( std::string const& str) : str_(str) {}

    bool operator( MyClass& elem ) {
        return !elem.findThatThing();
    }

    std::string str_;
};

not_key comp("value");
d.remove_if( comp );

mylist<MyClass> e(d);
e.filter( comp ); 
```

而且我正在为接受这些“通用”比较运算符的方法的签名而苦苦挣扎。因为它们都有不同的类型，我不想要静态成员函数。如何向我的类添加一个接受比较运算符的方法？

非常感谢你！:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T15:03:52.047

如果您的意思是您想知道 mylist::filter 的签名，您可能只需将其设为具有 Pred 或类似类型的模板。

```
template< typename T >
class mylist
{
   public:
      template< typename Pred >
      void filter( Pred pred )
      {
          // implement, calling pred(elem) for each element or pred(*iter)
      }
}; 
```

请注意，您可以将一个自由函数传递给该模板函数，而在 C++11 中，您将能够传递一个 lambda。

如果您想要一些不是模板的东西（除了元素类型），您可以使用`boost::function`(or `std::function`)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T15:02:16.757

标准函数（例如`std::sort`）使用模板参数，该参数被推断为您的比较函数类对象的类型：

```
template <class UnaryPredicate>
void filter(UnaryPredicate func) {
  // Call it like:
  func(something);
} 
```

现在`UnaryPredicate`将被推断为您传递给它的任何类似函数的对象的类型。`UnaryPredicate`比将其称为比较函数更有意义，因为它只需要一个参数。比较函数通常会接受两个参数并比较它们。

或者，您可以采取`std::function<bool(const MyClass&)>`：

```
void filter(std::function<bool(const MyClass&)> func) {
  // Call it like:
  func(something);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T15:00:38.923

签名应该是：

```
bool operator()(Myclass const & elem) const 
```

# php - SELECT * FROM table WHERE id=(SELECT MAX(id) FROM TABLE)

> ID：14960539
> 
> 赞同：-2
> 
> 时间：2013-02-19T14:58:54.590
> 
> 标签：php, mysql, select

我的网页上有新闻切换框，我可以在其中单击查看更多链接，然后向下切换并显示更多新闻。

如果我想用一个查询显示最新消息，而另一个查询显示最新消息之后的 3 条其他新闻，我该怎么办。

我希望你能理解我的问题！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T15:03:04.513

我认为您想使用限制语句

获得第一条记录

```
select * from table order by id desc limit 1 
```

获取第 2-4 条记录

```
select * from table order by id desc limit 3 offset 1 
```

# php - 将中值函数与排序和数组一起使用

> ID：14960550
> 
> 赞同：0
> 
> 时间：2013-02-19T14:59:23.997
> 
> 标签：php, mysql

我正在尝试计算数组的中位数。我能够获得 MIN、MAX、AVG，但我对中位数和显示对信息进行排序的方式有困难。

我的问题是如何获得中位数，为每个状态单独使用一个函数。（状态为 A、C、E、L、P、W）

我的代码是：

```
<?php
echo "<p><b>A</b> = Active, <b>E</b> = Expired, <b>L</b> = Canceled, <b>P</b> = Pending, <b>W</b> = Withdrawn</p>\n";
// COUNT STATUS
include '_inc/include.php';
$query = "SELECT status, COUNT(status) FROM median GROUP BY status"; 

$result = mysql_query($query) or die(mysql_error());

// Print out result
while($row = mysql_fetch_array($result)){
echo "There are ". $row['COUNT(status)'] ." ". $row['status'] ." items.";
echo "<br />";
}
?> 
```

显示为：

A = 活动，C = 已关闭，E = 已过期，L = 已取消，P = 待处理，W = 撤回

有6个A项目

有2个C项目

有9个E项目

有 4 L 项目

有2个P项目

我的代码是：

```
$query = "SELECT listprice, status, MIN(listprice), COUNT(status) FROM median GROUP BY status"; 

$result = mysql_query($query) or die(mysql_error());

// Print out result
while($row = mysql_fetch_array($result)){
echo "The MIN list price for the  ". $row['COUNT(status)'] ." ". $row['status'] ." is $" .    $row['MIN(listprice)'];
echo "<br />";
}
?> 
```

显示为：

6 A 的最低标价为 139900.00 美元

2 C 的最低标价为 149900.00 美元

9 E 的最低标价为 138000.00 美元

4 L 的最低标价为 $229000.00

2 P 的最低标价为 $179000.00

MAX 和 AVG 与上述类似。

我试图包含一个计算中位数（MED）的函数

```
<?php
function median($arr)
{
sort($arr);
$count = count($arr); //count the number of values in array
$middleval = floor(($count-1)/2); // find the middle value, or the lowest middle value
if ($count % 2) { // odd number, middle is the median
    $median = $arr[$middleval];
} else { // even number, calculate avg of 2 medians
    $low = $arr[$middleval];
    $high = $arr[$middleval+1];
    $median = (($low+$high)/2);
}
return $median;
}

echo median(array($lp)) . "\n";  // 153500
echo "<p> </p>";
echo median(array(4.1, 7.2, 1.7, 9.3, 4.4, 3.2)) . "\n";       // 4.25

?> 
```

这适用于静态数组，但我如何计算它看起来像上面的 MIN，MAX？

```
<?php
$i=0;
while ($i < $num) {

$ld=mysql_result($result,$i,"listdate");
$cd=mysql_result($result,$i,"closedate");
$contractd=mysql_result($result,$i,"contractdate");
$s=mysql_result($result,$i,"status");
$scd=mysql_result($result,$i,"statuschangedate");
$wd=mysql_result($result,$i,"withdrawdate");
$cand=mysql_result($result,$i,"canceldate");
$lp=mysql_result($result,$i, "listprice");
$sp=mysql_result($result,$i,"soldprice");
$gla=mysql_result($result,$i,"gla");
$b=mysql_result($result,$i,"built");
$o=mysql_result($result,$i,"owner");
$fs=mysql_result($result,$i,"fore");
$ss=mysql_result($result,$i,"shortsale");
$f=mysql_result($result,$i,"features");
?> 
```

我想我遇到这么多麻烦的原因可能是表中的数据是通过文件上传（csv）上传的。但我认为这与它没有任何关系，因为数据已经存在。

我使用 $lp 作为 listprice 代替了中值函数中的静态数组，也就是说它是空白的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:13:47.203

> ...这就是它变成空白的地方。

空白页表明发生了 PHP 错误，但错误显示设置已关闭。确保[打开错误报告](http://www.jorble.com/2012/06/how-to-display-php-error/)以查看问题。

重要的一件事是，不推荐使用的`mysql_result()`函数将从 MySQL 结果集中检索一个单元格的内容。如果您希望通过传递中值函数来获得多个值，`array($lp)`那么就不会发生这种情况。此外，如果`mysql_result()`函数失败或没有找到结果，它返回 false 意味着您传递给中值函数的数组是 now `array(false)`。

这些是在进行故障排除时要记住的一些事项。打开错误报告，问题应该更容易推断出来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-12T03:14:01.407

大多数 MySQL 版本没有`median`功能。然而，MariaDB 10.3.3 只是引入了一个[中值函数](https://mariadb.com/kb/en/library/median/)。

# java - 如何在java中访问另一个类中的连接对象？

> ID：14960552
> 
> 赞同：1
> 
> 时间：2013-02-19T14:59:28.963
> 
> 标签：java, mysql, jdbc

我正在使用 xampp mysql，此代码用于 JDBC 程序。实际上有两个类，一个是 dbconnect.java，另一个是 login.java。我想访问另一个类（即login.java）中的连接对象（即conn）。但是我没有正确的想法，我在这里包含了代码，请建议我有什么问题以及解决方案是什么？

这是 dbconnect.java 的代码

```
package stundentrecord;

import java.sql.Connection;
import java.sql.DriverManager;

public class dbconnect {
    public void conect(){
        Connection con = null;
        String url = "jdbc:mysql://localhost:3306/";
        String db = "studentRecord";
        String driver = "com.mysql.jdbc.Driver";
        String user = "root";
        String pass = "";
        try{
            Class.forName(driver);
            con = DriverManager.getConnection(url + db, user, pass);
            if(con==null){
                System.out.println("Connection cannot be established");
            }
            // con.close();
        } catch (Exception e) {
            System.out.println(e);
        }
    }
} 
```

这是另一个名为 login.java 的类的代码

```
if(source==login){
    if(username!=null && password!=null) {
        Connection conn= null;
        Statement stmt = null;
        dbconnect db = new dbconnect();
        db.conect();
        String query = "SELECT * from userlogin";
        try{
            stmt=(Statement) conn.createStatement(); // here is the problem
            ResultSet rs = stmt.executeQuery(query);  // here is the problem 
            while (rs.next()) {
                String user = rs.getString("username");
                String pass=rs.getString("password");
                System.out.println("Welcome "+user);
            }
        } catch(SQLException ex){
            ex.getMessage();
        }
        StundentRecord SR = new StundentRecord();
    } else {
        JOptionPane.showMessageDialog(null,"Username or password field is empty","error    !!",JOptionPane.ERROR_MESSAGE);
    }
} 
```

真正的问题是什么以及如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T15:02:32.623

最简单的方法是将连接方法设为非`void`并返回连接：

```
public Connection conect() {
    Connection con = null;
    String url = "jdbc:mysql://localhost:3306/";
    String db = "studentRecord";
    String driver = "com.mysql.jdbc.Driver";
    String user = "root";
    String pass = "";
    try {
        Class.forName(driver);
        con = DriverManager.getConnection(url + db, user, pass);
        if (con == null) {
            System.out.println("Connection cannot be established");
        }
        return con;
    } catch (Exception e) {
        System.out.println(e);
    }
    return null;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T15:07:11.340

您应该从连接类返回您的 CONNECTION 对象并将其分配给您的登录类...现在您的连接对象为空...

# c++ - 是否有任何真实案例证明'sizeof ...'是必要的？

> ID：14960553
> 
> 赞同：3
> 
> 时间：2013-02-19T14:59:30.367
> 
> 标签：c++, c++11, keyword, sizeof, variadic-templates

我想知道新运算符的优点`sizeof...`（不要与`sizeof`运算符混淆）。我在网上搜索了一些示例，看起来都类似于以下示例：

```
template<class... ArgTypes>
std::size_t GetLength()
{
    return sizeof...(ArgTypes);
} 
```

我认为这些例子不是说明性的。

是否有任何真实的例子来说明这`sizeof...`非常有用？

**更新：**

[我从这里](https://stackoverflow.com/questions/3651499/read-arguments-from-variadic-template)找到了另一个似乎更有意义的例子：

```
template<class ...A> void func(A ...args){
   typedef typename common_type<A...>::type common;
   std::array<common, sizeof...(A)> a = {{ args... }};
}

template<typename... A> int func(const A&... args)
{
  boost::any arr[sizeof...(A)] = { args... };
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T12:17:03.740

这是我可以使用的示例`sizeof...`：

```
/// Transform a single boolean value into a number
constexpr unsigned int boolCode(bool value) {
    return value;
}

/// Transform a sequence of booleans into a number
template <typename... Args>
constexpr unsigned int boolCode(bool value, Args... others) {
    return value << sizeof...(others) | boolCode(others...);
} 
```

这个方便的函数可以用在 switch 语句中，如下所示：

```
switch (boolCode(condition1, condition2, condition3)) {
case boolCode(false,false,false): //...
case boolCode(false,false,true): //...
case boolCode(false,true,false): //...
case boolCode(false,true,true): //...
case boolCode(true,false,false): //...
case boolCode(true,false,true): //...
case boolCode(true,true,false): //...
case boolCode(true,true,true): //...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T10:50:28.923

您可能想在评论中阅读 STL 和 CornedBee 之间的讨论：http: [//channel9.msdn.com/Series/C9-Lectures-Stephan-T-Lavavej-Core-C-/Stephan-T-Lavavej-Core-Cpp -8-of-n#comments](http://channel9.msdn.com/Series/C9-Lectures-Stephan-T-Lavavej-Core-C-/Stephan-T-Lavavej-Core-Cpp-8-of-n#comments)

重要一点：

> sizeof... 不仅仅是语法糖。手动实现的 sizeof... 将具有线性“运行时”（实例化的数量），而内置 sizeof... 是 O(1)。（可变参数的一个大问题是编译往往很慢，因为缺乏对参数包的随机访问。有些人（我认为来自 Boost）对此进行了研究，发现 Boost.Tuple（预处理器）的编译速度- 驱动的非可变元组）编译速度明显快于基于可变参数的朴素版本。）

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-02-19T15:12:21.457

`sizeof`引入 C++的首要原因是因为它存在于 C 中，因此有必要知道要分配多少内存，例如`malloc( n * sizeof(struct MyClass) )`. 在 C++ 中，它用于类似的情况，其中分配和初始化是分开的，例如在容器类、变体或类中。

它也被用于模板元编程，与函数覆盖解析结合使用。类似的事情：`sizeof( discriminatorFunction( someArgs ) ) == sizeof( TrueType )`。

# c# - 从 Var 转换为动态列表并执行操作

> ID：14960557
> 
> 赞同：1
> 
> 时间：2013-02-19T14:59:56.977
> 
> 标签：c#, linq, generics, dynamic, var

我有以下类型的代码片段。

```
var PersonList = new List<person>() { 
                new person { Name = "b", Age = 4 },
                new person { Name = "s", Age = 2 },
                new person { Name = "e", Age = 5 },
                new person { Name = "a", Age = 1 },
            }.AsQueryable();

// Now somewhere in usercontrol I am converting that list to dynamic.
dynamic DynaList = PersonList;

// Now below line gives me error when I try to perform any on DynaList.
DynaList.ToList(); // Error - BinderException
DynaList.OrderBy("Name"); // Error - BinderException 
```

为什么动态不转换为其类型运行时？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:02:38.827

您不能对动态类型使用扩展方法，就好像扩展方法是实例上的方法一样。请参阅此[SO 帖子](https://stackoverflow.com/questions/5311465/extension-method-and-dynamic-object-in-c-sharp)和此[SO 帖子](https://stackoverflow.com/questions/258988/will-the-dynamic-keyword-in-c4-support-extension-methods)。您必须在底层静态类上使用扩展方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T15:20:17.023

动态类型不支持扩展方法。希望这个[链接](http://andersnoras.com/post/100787365/c-4-0-why-dynamic-binding-and-extension-methods)能解释你的原因......

# mongodb - Azure 中的 MongoDB 副本集“等待角色启动...调用 OnRoleStart()”

> ID：14960559
> 
> 赞同：0
> 
> 时间：2013-02-19T15:00:09.307
> 
> 标签：mongodb, azure

我在尝试将 mongodb 副本集实现为 Windows Azure 中的辅助角色实例时遇到问题。在 Windows Azure 门户中，其中一个实例显示为忙碌状态：

```
Waiting for role to start... Calling OnRoleStart() 
```

我已经检查了所有设置，一切似乎都很好，请问可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:00:09.307

[Denis Markelov 的](http://www.denismarkelov.com/2012/09/mongodb-replica-set-in-windows-azure.html)博客文章帮助我解决了这个问题。解决方案主要是他的，但是我不得不采取额外的步骤才能让它工作，并认为其他人可能会觉得它有用。

来自博客的解决方案：

> Windows Azure 为角色重用虚拟机，因此在硬盘驱动器上进行全新部署后，您可以找到在先前会话期间创建的文件。如果 MongoDB 被不正确地终止 - 可能有一个锁定文件（“持久互斥体”类似物），因此 MongoDB 拒绝启动。它位于带有标签“WindowsAzureDrive”的驱动器（假设它是 F:），路径为：
> 
> F:\data\mongod.lock
> 
> 在生产使用的情况下，这种情况可能需要恢复过程，**但如果您只是在初始设置过程中 - 删除此文件是安全的，让 MongoDB 重新启动。**

我遇到了这个问题并按照建议做了，但是我仍然遇到同样的问题。所以我看了一下日志文件

> C:\Resources\Directory\.MongoDB.WindowsAzure.MongoDBRole.MongodLogDir\mongod.txt

并看到另一个文件也给出了错误。为了解决问题，您还必须删除`local.ns`与`mongod.lock`.

# c# - LINQ：添加行号列

> ID：14960563
> 
> 赞同：31
> 
> 时间：2013-02-19T15:00:23.300
> 
> 标签：c#, .net, linq

如何修改下面的查询以包含行号列（即：基于 1 的结果索引）？

```
var myResult = from currRow in someTable
               where currRow.someCategory == someCategoryValue
               orderby currRow.createdDate descending
               select currRow; 
```

EDIT1：我正在寻找结果`{idx, col1, col2...col-n}`不是`{idx, row}`.

EDIT2：行号应对应于结果行而不是表行。

EDIT3：我`DataBind`将这些结果转换为`GridView`. 我的目标是在`GridView`. 也许另一种方法会更好。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-02-19T15:03:42.403

使用[`Enumerable.Select`](http://msdn.microsoft.com/en-us/library/bb534869.aspx)索引重载的方法语法：

```
var myResult = someTable.Select((r, i) => new { Row = r, Index = i })
    .Where(x => x.Row.someCategory == someCategoryValue)
    .OrderByDescending(x => x.Row.createdDate); 
```

请注意，此方法假定您想要表中行的原始索引，而不是过滤结果中的原始索引，因为我在过滤之前选择了索引`Where`。

> 编辑：我正在寻找的结果是 {idx, col1, col2...col-n} 而不是 {idx, row}。行号应对应于结果行而不是表行。

然后选择包含您需要的所有列的匿名类型：

```
var myResult = someTable.Where(r => r.someCategory == someCategoryValue)
        .OrderByDescending(r => r.createdDate)
        .Select((r, i) => new { idx = i, col1 = r.col1, col2 = r.col2, ...col-n = r.ColN }); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-19T15:02:28.160

使用此[`Select`](http://msdn.microsoft.com/en-us/library/bb534869.aspx)方法：

> 通过合并元素的索引将序列的每个元素投影到新形式中。

例子：

```
var myResult = someTable.Where(currRow => currRow.someCategory == someCategoryValue)
                        .OrderByDescending(currRow => currRow.createdDate)
                        .Select((currRow, index) => new {Row = currRow, Index = index + 1}); 
```

* * *

回应您的编辑：

如果您想要 a作为结果，您可以通过简单地使用 a并在之后添加一个附加列`DataTable`来采用非 Linq 方式。`DataView`

```
someTable.DefaultView.RowFilter = String.Format("someCategory = '{0}'", someCategoryValue);
someTable.DefaultView.Sort = "createdDate";
var resultTable = someTable.DefaultView.ToTable();
resultTable.Columns.Add("Number", typeof(int));
int i = 0;
foreach (DataRow row in resultTable.Rows)
    row["Number"] = ++i; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-19T15:04:15.417

关于什么？

```
int i;
var myResult = from currRow in someTable
           where currRow.someCategory == someCategoryValue
           orderby currRow.createdDate descending
           select new {Record = i++, currRow}; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-19T15:07:13.493

`Select`只是为了好玩，这里有两个参数的替代方案：

```
var resultsWithIndexes = myResult.Zip(Enumerable.Range(1, int.MaxValue - 1),
                                      (o, i) => new { Index = i, Result = o }); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-19T15:24:56.357

根据您的编辑 1。**不，您不能**Linq 按原样返回表。您可以构建每一列，但您会失去映射实体的功能。

之前已经多次问过这个问题： [如何在 Linq 结果中添加索引字段](https://stackoverflow.com/questions/269058/how-do-you-add-an-index-field-to-linq-results)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-07-08T00:07:53.033

如果想要保持列的平面列表（即 OP 的 Edit2）并且还想要一个通用的解决方案，该解决方案可以与任何 IEnumerable 一起使用，而无需您列出预期列的集合，则没有直接的方法。

但是，有一种迂回的方法可以解决这个问题，即使用 ToDataTable() 方法从[此处](https://stackoverflow.com/a/33817322/959296)将查询结果转储到 DataTable 中，然后将 RowNumber 列添加到该表中。

```
var table = query.ToList().ToDataTable();
table.Columns.Add("RowNum", typeof(int));
int i = 0;
foreach (DataRow row in table.Rows)
    row["RowNum"] = ++i; 
```

这可能会导致大型数据集的性能问题，但也不是非常慢。在我的机器上，大约 6500 行的数据集需要 33 毫秒来处理。

如果您的原始查询返回一个匿名类型，那么该类型定义将在转换中丢失，因此当您调用 table.AsEnumerable() 时，您将丢失生成的 IEnumerable 的列名上的静态类型。换句话说，您不必编写 table.AsEnumerable().First().RowNum 之类的东西，而是必须编写 table.AsEnumerable().First()["RowNum"]

但是，如果您不关心性能并且确实希望恢复静态类型，则可以使用 JSON.NET 将 DataTable 转换为 json 字符串，然后根据原始查询结果中的匿名类型转换回列表。此方法要求原始查询结果中存在占位符 RowNum 字段。

```
var query  = (from currRow in someTable
            where currRow.someCategory == someCategoryValue
            orderby currRow.createdDate descending
            select new { currRow.someCategory, currRow.createdDate, RowNum = -1 }).ToList();
var table = query.ToDataTable();
//Placeholder RowNum column has to already exist in query results
//So not adding a new column, but merely populating it
int i = 0;
foreach (DataRow row in table.Rows)
    row["RowNum"] = ++i;
string json = JsonConvert.SerializeObject(table);
var staticallyTypedList = JsonConvert.DeserializeAnonymousType(json, query);
Console.WriteLine(staticallyTypedList.First().RowNum); 
```

这为我的 6500 个项目数据集增加了大约 120 毫秒的处理时间。

这很疯狂，但它有效。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-22T20:09:11.253

我知道我迟到了，但我想展示什么对我有用。

我有一个对象列表，该对象上有一个整数属性，用于“行号”......或者在本例中为“序列号”。这是我为填充该字段所做的：

```
myListOfObjects = myListOfObjects.Select((o, i) => { o.SequenceNumber = i; return o; }).ToList(); 
```

看到这行得通，我很惊讶。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-08-01T13:12:48.823

在我的情况下，这对我有所帮助 - Excel 工作表提取。匿名类型

```
var UploadItemList = ItemMaster.Worksheet().AsEnumerable().Select((x, index) => new
{
    Code = x["Code"].Value == null ? "" : x["Code"].Value.ToString().Trim(),
    Description = x["Description"].Value == null ? "" : x["Description"].Value.ToString().Trim(),
    Unit = x["Unit"].Value == null ? "" : x["Unit"].Value.ToString().Trim(),
    Quantity = x["Quantity"].Value == null ? "" : x["Quantity"].Value.ToString().Trim(),
    Rate = x["Rate"].Value == null ? "" : x["Rate"].Value.ToString().Trim(),
    Amount = x["Amount"].Value == null ? "" : x["Amount"].Value.ToString().Trim(),
    RowNumber = index+1
}).ToList(); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-04-12T06:29:06.887

```
int Lc = 1;

var Lst = LstItemGrid.GroupBy(item => item.CategoryName)
    .Select(group => new { CategoryName = group.Key, Items = group.ToList() ,RowIndex= Lc++ })
    .ToList(); 
```

# .htaccess - CodeIgniter 在正常安装 apache 2.4 后使用 htaccess 删除 index.php

> ID：14960565
> 
> 赞同：0
> 
> 时间：2013-02-19T15:00:26.070
> 
> 标签：.htaccess, codeigniter, mod-rewrite

我已经在 windows server 2008 R2 上安装了 PHP、Mysql 和 Apache，因为[这个链接](http://lifeofageekadmin.com/how-install-apache-2-4-php-5-4-and-mysql-5-5-21-on-windows-7/)完全提供了。

它就像一个魅力，但问题在于我的`.htaccess`to remove `index.php`。

我的`.htaccess`文件包括以下内容：

```
 <IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /HR/    #Removes access to the system folder by users.
    #Additionally this will allow you to create a System.php controller,
    #previously this would not have been possible.
    #'system' can be replaced if you have renamed your system folder.
    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #When your application folder isn't in the system folder
    #This snippet prevents user access to the application folder
    #Submitted by: Fabdrol
    #Rename 'application' to your applications folder name.
    RewriteCond %{REQUEST_URI} ^application.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #Checks to see if the user is attempting to access a valid file,
    #such as an image or css document, if this isn't true it sends the
    #request to index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?/$1 [L]
</IfModule>

<IfModule !mod_rewrite.c>
    # If we don't have mod_rewrite installed, all 404's
    # can be sent to index.php, and everything works as normal.
    # Submitted by: ElliotHaughin

    ErrorDocument 404 /index.php
</IfModule> 
```

`mod_rewrite`我已经在apache中启用了。但我收到 500 个内部服务器错误。

**注意：**当更改`AllowOverRide All`为`None`文档根目录时，如下所示：

```
# AllowOverride controls what directives may be placed in .htaccess files.
    # It can be "All", "None", or any combination of the keywords:
    #   Options FileInfo AuthConfig Limit
    #
    AllowOverride None 
```

`500 internal error`消失但不起作用`.htaccess`！然后我应该添加`index.php`链接才能工作。

注意：当`AllowIverRide All`我收到此错误时：

```
[Tue Feb 19 18:20:10.988018 2013] [core:alert] [pid 3940:tid 844] 
[client 127.0.0.1:49513] C:/Apache24/htdocs/HR/.htaccess: 
RewriteBase takes one argument, the base URL of the per-directory context 
```

任何帮助将不胜感激。泰。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:29:58.597

不要完全改变你的 .htaccess ，但这是我使用的一个例子，我从来没有遇到任何问题。这只是关于 modrewrite 的部分：

```
RewriteEngine On
  RewriteBase /
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond $1 !^(templates|plugins)
  RewriteRule ^(.*)$ index.php/$1 [L] 
```

# mod-rewrite - 为什么我会收到以下 RewriteRules 的重定向循环？

> ID：14960568
> 
> 赞同：0
> 
> 时间：2013-02-19T15:00:27.700
> 
> 标签：mod-rewrite, apache2

我收到以下内容的重写循环错误：

```
RewriteEngine On

RewriteCond %{HTTP_HOST} ^mysite.com [NC]
RewriteRule ^(.*)$ http://www.mysite.com/$1 [R=301,NC,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} ^/(apps|site).* [NC]
RewriteRule .* http://site.mysite.com/ [R=301,L] 
```

为什么会发生这种情况，我错过了什么？

我已经测试了以下 URL，它们似乎可以重定向：

```
www.mysite.com/
www.mysite.com/apps
www.mysite.com/apps
mysite.com/
mysite.com/apps
mysite.com/apps/about
mysite.com/site 
```

但

```
www.mysite.com/site 
```

不想重定向，其余的都按预期重定向到[http://site.mysite.com ？](http://site.mysite.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T08:02:06.943

事实证明，我们的公共站点中有一个站点文件夹，它以某种方式在 .htaccess 之前获得了操作。不知道为什么会发生这种情况，但是在删除这个多余的文件夹后，一切正常 100%

# android - 覆盖 Android 库项目中的类

> ID：14960569
> 
> 赞同：2
> 
> 时间：2013-02-19T15:00:28.517
> 
> 标签：android, oop, uml, android-library, library-project

我用类似的代码制作了几个 Android 应用程序，但我需要保持灵活来自定义应用程序。我现在的解决方案是，我有一个库项目，我可以通过扩展类来覆盖项目中的功能。对于以下示例，我将 Library Project 称为 PL。P1 是一个使用 PL 的定制项目，P2 是另一个使用 PL 的定制项目。

我现在的问题是，在 PL 中我想从 StudentPL.java 创建一个实例。在 P1 中，不需要对 StudentPL 进行任何更改，因此编译器应该采用此类，但在 P2 中，我有 StudentP2.java，它从 StudentPL.java 扩展而来。所以PL做的实例，应该是StudentP2.java的实例。

我现在的想法是，我制作了一个名为 mirror 的包，它直接位于 Project PL 的 src-Folder 中。在那里，我创建了从 StudentPL.java 扩展的类 mirror.Student.java。在 Library-Project 中，我现在创建了 Student.java 的一个实例。对于项目 P1，不需要进行任何更改。在 P2 中，我在 src 文件夹中创建了相同的文件夹镜像，并且现在创建了从 StudentP2.java 扩展的相同类 mirror.Student.java。想法是，ClassLoader 现在从 P2 加载 mirror.Student.java 并忽略来自 PL 的 mirror.Student.java，但这会导致以下错误：

*   Dex Loader] 无法执行dex：多个dex文件定义了Lmirror/Student；
*   转换为 Dalvik 格式失败：无法执行 dex：多个 dex 文件定义 Lmirror/Student

这是我正在谈论的UML：

[http://www.koenix-band.ch/images/other/Stackoverflow.gif](http://www.koenix-band.ch/images/other/Stackoverflow.gif)

也许我应该覆盖 ClassLoader，但我不知道该怎么做？有没有人有解决这个问题的想法？也许有人有另一个想法，我如何自定义应用程序。

迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:17:07.857

在我看来，最好用一种或类似的方法来制作你的`MainActivityPL`摘要。`setStudent`大部分活动及其所有逻辑仍将从您的库中共享，但它允许您的其他项目选择通过扩展`StudentPL`类来使用不同的学生对象。

# objective-c - ViewController 中的暂停和恢复定时器

> ID：14960570
> 
> 赞同：0
> 
> 时间：2013-02-19T15:00:31.760
> 
> 标签：objective-c, cocoa-touch, ios6

我想在视图控制器中暂停和恢复计时器，它在主视图控制器中显示为子视图。按下主视图控制器中的播放/暂停按钮时，它将视图控制器显示为子视图并播放音频。

在视图控制器中有这个 NSTimer

```
 [NSTimer scheduledTimerWithTimeInterval:2.6
                                 target:self
                               selector:@selector(updateView:)
                               userInfo:nil
                                repeats:YES];

 - (void)updateView:(NSTimer *)theTimer
 {

 if  (index < [textArray count])
    {

        self.textView.text = [self.textArray objectAtIndex:index];
        self.imageView.image = [self.imagesArray objectAtIndex:index];
        index++;

} else {

   index = 0;

 } 
```

当在主视图控制器中按下播放/暂停按钮时，我想暂停和恢复计时器。我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:05:27.300

```
NSTimer* myTimer = [NSTimer scheduledTimerWithTimeInterval:2.6
                                 target:self
                               selector:@selector(updateView:)
                               userInfo:nil
                                repeats:YES];

[myTimer invalidate]; 
```

/* 停止接收器再次触发并请求将其从运行循环中移除。*/

```
[myTimer fire]; 
```

/* 您可以使用此方法来触发重复计时器，而不会中断其常规触发时间表。如果计时器是非重复的，它会在触发后自动失效，即使它的预定触发日期尚未到来。*/

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T15:05:36.480

首先，您必须在接口文件中保留对计时器的引用：

```
NSTimer *myTimer; 
```

在实现文件中，您可以简单地连接然后引用它：

```
myTimer = [NSTimer scheduledTimerWithTimeInterval:2.6
                             target:self
                           selector:@selector(updateView:)
                           userInfo:nil
                            repeats:YES]; 
```

停止定时器调用：

```
[myTimer invalidate]; 
```

重新开始：

```
[myTimer fire]; 
```

有关 NSTimer 类的更多信息，请参阅[NSTimer 类参考。](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html)

# c# - .NET Windows Store Apps 和 System.Type - 相当于 operator ==?

> ID：14960573
> 
> 赞同：3
> 
> 时间：2013-02-19T15:00:48.983
> 
> 标签：c#, .net, windows-store-apps, equality, system.type

根据[对此](https://stackoverflow.com/q/9234009/650012)`System.Type.Equals`StackOverflow 问题的公认答案，方法和之间存在差异`System.Type operator ==`：

```
a runtime type (represented by the internal type RuntimeType), managed by 
the CLR is not always the same as a Type, which can be extended. Equals 
will check the underlying system type, whereas == will check the type itself. 
```

在*.NET for Windows Store Apps*中，[System.Type 运算符 ==](http://msdn.microsoft.com/en-us/library/system.type.op_equality.aspx)不可用。

如何完全重现*Windows 应用商店应用程序*`System.Type operator ==`中的功能？或者，特定的相等运算符功能是否与*Windows 应用商店应用程序*无关？*`System.Type`*

 *** * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T15:06:34.090

所以这里的基本原理是`Equals`每个类型的虚拟实例方法，这意味着它将使用 vtable 来确定要使用的实现，在运行时，基于调用的实际对象`Equals`的类型（忽略变量的类型） .

`operator ==`可以被认为是一种静态方法（有很多重载）。它不是虚拟的，因此所引用的实现将基于保存对象的变量的编译时类型，而不是基于运行时对象的实际类型。

这种行为可以通过简单地创建您自己的`static` `Equals`方法（在您喜欢的任何类型或类型上）来复制，这些方法基于两个参数的类型来表现。这比 using 输入起来稍微不方便`operator ==`，但是一旦编译就可以有效地完成相同的事情。**

# asp.net - 如何访问活动报告的控件（数据动态）

> ID：14960575
> 
> 赞同：2
> 
> 时间：2013-02-19T15:00:52.497
> 
> 标签：asp.net, vb.net, activereports

我工作的公司使用 DataDynamics 的 Active Reports 来生成他们的报告，他们问我是否可以做一个报告的网络查看器，您可以在其中移动字段。

所以我认为我可以做到这一点的方法是在 div 中加载空报告（只有它们出现在 VS2012 设计器中的字段）并使用 Jquery 进行移动，而不是动态创建报告。

问题是，我找不到访问报告控件的方法。我已经用谷歌搜索了一整天来做这件事，但我似乎找不到解决方案。

我们正在使用 Active Reports 6、VS2012 和 vb.net。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T19:52:00.743

报告中的每个部分都有一个控件集合，该集合显示该部分中的控件集合。[Sections 集合上的主题](http://www.datadynamics.com/Help/ActiveReports6/ActiveReports6_start.html?topic3835.html)有一个很好的示例，说明如何以编程方式将控件添加到集合中。下面是一些注释的摘录，以帮助解释：

```
 ' Insert Group Header and Footer Sections:'
  Me.Sections.InsertGroupHF()
  ' Set some proprties to configure those sections:
  CType(Me.Sections("GroupHeader1"), GroupHeader).DataField = "CategoryID"
  Me.Sections("GroupHeader1").BackColor = System.Drawing.Color.SlateBlue
  Me.Sections("GroupHeader1").CanGrow = True
  Me.Sections("GroupHeader1").CanShrink = True
  CType(Me.Sections("GroupHeader1"), GroupHeader).RepeatStyle = RepeatStyle.OnPageIncludeNoDetail
  Me.Sections("GroupHeader1").Height = 0

  ' Create a TexBox control & Set some properties to configure that control
  Dim txt As New TextBox()
  txt.DataField = "CatagoryID"
  txt.Location = New System.Drawing.PointF(0.0F, 0)
  txt.Width = 2.0F
  txt.Height = 0.3F
  txt.Style = "font-weight: bold; font-size: 16pt"

  ' Add the TextBox to the GroupHeader section:
  Me.Sections("GroupHeader1").Controls.Add(txt) 
```

[ActiveReports 6 文档](http://www.datadynamics.com/Help/ActiveReports6/ActiveReports6_start.html)有[一个名为 Run Time Layouts 的演练](http://www.datadynamics.com/Help/ActiveReports6/ActiveReports6_start.html?topic111.html)，它构建了一个在代码中构建报表布局的整个应用程序。这是准确了解如何通过代码操作报表的好方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-08T02:56:23.273

@activescott & @Michael，文档链接已更改，但它们仍然可用。ActiveReports 6 文档请[点击此处](http://arhelp.grapecity.com/webhelp/Legacy/ActiveReports6/webframe.html)，运行时布局的演练请点击[此处](http://arhelp.grapecity.com/webhelp/Legacy/ActiveReports6/webframe.html?topic111.html)。

# ios - UIScrollview 中的 UIView 中的 UITableView：点击时 UITableView 数据被清除

> ID：14960577
> 
> 赞同：1
> 
> 时间：2013-02-19T15:00:54.967
> 
> 标签：ios, cocoa-touch, uitableview, uiview, uiscrollview

出于工作目的，我需要创建一个嵌入 UIView 的 UIScrollView，而 UIView 又通过 Xcode 中的容器功能嵌入 UITableView。

我的 UIScrollView 是启用了分页的整页滚动视图。我的 UIView 充满了 UIImage、一些 UIButton 和一个链接到 UITableView 的容器。

在初始启动时，数据已完美加载，这意味着 UITableView 已填充数据，UIImage 已填充，并且按钮放置正确。

但是由于某些奇怪的原因，当我尝试在容器中的 UITableView 中点击或滚动时，我的 UITableView 中的所有数据都会被清除。

我在这里发布这个问题，因为我没有在 StackOverFlow 或任何其他网站上发现任何其他类似的问题。

UITableView代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self.productTable setBackgroundView:nil];
    self.productTable.backgroundColor = [UIColor clearColor];
    self.productTable.delegate = self;
    self.productTable.dataSource = self;
}

- (void) viewDidAppear:(BOOL)animated {
    /*CGSize tmp = self.productTable.contentSize;
    self.productTable.frame = CGRectMake(0, 0, tmp.width, tmp.height * 3);*/

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{

    // Return the number of sections.
    NSLog(@"section count : %i", [self.Products count]);
    return [self.Products count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    xcsSectionInfo *sectionInfo = [self.Products objectAtIndex:section];
    if (sectionInfo.isOpen == NO) {
        return 1;
    } else {
        return 3;
    }
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    xcsSectionInfo *sectionInfo = [self.Products objectAtIndex:indexPath.section];

    if (indexPath.row == 0)  {
        static NSString *CellIdentifier = @"Header";
        xcsProductHeaderCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];
        cell.articleNumber.text = sectionInfo.product.articleNumber;
        cell.articleColor.text = sectionInfo.product.articleColor;
        cell.backgroundColor = [UIColor grayColor];
        if (sectionInfo.isOpen == YES && sectionInfo == self.currentSectionInfo) {
            cell.expandImage.image = [UIImage imageNamed:@"arrow_down.png"];
        } else if (sectionInfo.isOpen == NO) {
            cell.expandImage.image = [UIImage imageNamed:@"arrow_up.png"];
        }
        return cell;
    } else if (indexPath.row == 1) {
         static NSString *CellIdentifier = @"ProductHeader";
        xcsProductTitleCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];
        cell.colorTempHeader.text = @"Color Temperature";
        cell.sourceQualityHeader.text = @"Source Quality";
        cell.sourceTypeHeader.text = @"Source Type";
        cell.luminaireFluxHeader.text = @"Luminaire Flux";
        cell.powerConsumptionHeader.text = @"Power Consumption";
        cell.luminaireEfficacyHeader.text = @"Luminaire Efficacy";
        cell.backgroundColor = [UIColor grayColor];
        return cell;
    } else if (indexPath.row == 2) {

        static NSString *CellIdentifier = @"Product";
        xcsProductCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];
        cell.colorTemp.text = sectionInfo.product.colorTemperature;
        cell.sourceQuality.text = sectionInfo.product.sourceQuality;
        cell.sourceType.text = sectionInfo.product.sourceType;
        cell.luminaireFlux.text = sectionInfo.product.luminaireFlux;
        cell.powerConsumption.text = sectionInfo.product.powerConsumption;
        cell.luminaireEfficacy.text = sectionInfo.product.luminaireEfficacy;
        cell.backgroundColor = [UIColor grayColor];
        return cell;
    }
}

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
        xcsSectionInfo *sectionInfo = [self.Products objectAtIndex:indexPath.section];
    NSIndexPath *path0 = [NSIndexPath indexPathForRow:[indexPath row]+1 inSection:[indexPath section]];
    NSIndexPath *path1 = [NSIndexPath indexPathForRow:[indexPath row]+2 inSection:[indexPath section]];
            NSArray *indexPathArray = [NSArray arrayWithObjects: path0, path1, nil];
    if (sectionInfo.isOpen == NO) {
        sectionInfo.isOpen = YES;
        [tableView insertRowsAtIndexPaths:indexPathArray withRowAnimation:NO];
    } else {
        sectionInfo.isOpen = NO;
        [tableView deleteRowsAtIndexPaths:indexPathArray withRowAnimation:NO];
    }
    [self.Products replaceObjectAtIndex:indexPath.section withObject:sectionInfo];
    [tableView deselectRowAtIndexPath:indexPath animated:YES];
    self.currentSectionInfo = sectionInfo;
    [tableView reloadData];
} 
```

顺便说一句：我正在使用故事板

提前致以问候和感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T22:52:32.433

**更新 2**：

我认为 a`UIPageViewController`会更合适（[链接‌​</a>）。看起来它完成了您想要实现的目标。并且可能比管理嵌入在其他滚动视图中的滚动视图简单得多。](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPageViewControllerClassReferenceClassRef/UIPageViewControllerClassReference.html)

 [* * *

**更新**：](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPageViewControllerClassReferenceClassRef/UIPageViewControllerClassReference.html) 

[看起来您想要实现的目标在`UIPageViewController`(](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPageViewControllerClassReferenceClassRef/UIPageViewControllerClassReference.html)[链接](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPageViewControllerClassReferenceClassRef/UIPageViewControllerClassReference.html)) 中成为可能。如果这可行，它会比尝试管理嵌入在其他视图中的滚动视图更好。

* * *

`UITableView`苹果特别不推荐嵌入 a 。当系统试图找出将事件发送到哪里时，就会出现冲突：

> **重要提示**：您不应该在 UIScrollView 对象中嵌入 UIWebView 或 UITableView 对象。如果这样做，可能会导致意外行为，因为两个对象的触摸事件可能会混淆并错误处理。（[来源](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)）

但这是愚蠢的部分，当您转到源链接时，您会注意到`UIWebView`. **Apple 忘记将其包含在** `UITableView`.

# android - 获取窗口（当前任务）标题

> ID：14960578
> 
> 赞同：2
> 
> 时间：2013-02-19T15:00:56.457
> 
> 标签：android, android-activity

我目前正在使用此代码来检索进程名称：

```
 List<ActivityManager.RunningTaskInfo> taskInfo = am.getRunningTasks(1);
     if(taskInfo.get(0).topActivity.getPackageName().equalsIgnoreCase("xxxxxxxx") != true){

        ////com.xxx.xxx

     } 
```

我想要实现的是获得活动的“窗口”标题，例如，当我打开网络浏览器时，标题是“www.google.com”，如果我在 SMS/MMS 中打开与 X 先生的对话，当前标题是“X先生0245478767”。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-22T21:22:04.063

Activity 类有方法[getTitle()](http://developer.android.com/reference/android/app/Activity.html#getTitle%28%29)可能会给出你正在寻找的东西。我只是不知道如何通过 ActivityManager 使用它，甚至可以从另一个应用程序调用它。

# c - 处理文件描述符和 SIGKILL 信号行为

> ID：14960579
> 
> 赞同：1
> 
> 时间：2013-02-19T15:01:00.940
> 
> 标签：c, linux, signals

我对 Linux 上的文件描述符和信号几乎没有疑问。

```
are all file descriptors close when process terminated by SIGKILL signal? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T15:02:04.593

是的。当任何进程因任何原因终止时，内核会关闭所有仍然打开的文件描述符。

# glade - 带空地的单选按钮分组

> ID：14960581
> 
> 赞同：5
> 
> 时间：2013-02-19T15:01:04.230
> 
> 标签：glade, gtk2hs

我正在使用带有 gtk2hs 绑定的编辑器 Glade 在 Haskell 中编写 GUI。目前，我在对单选按钮进行分组时失败了。它不会让我选择组名。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T09:48:45.623

按着这些次序：

*   选择所需的单选按钮
*   单击*组*条目附近的*...*按钮
**   *在此项目对话框 *中选择一个单选按钮*

    *   *在对象*列表中选择所需的行
    *   单击行左侧的单选按钮（将被选中）
    *   按*确定*按钮** 

 *** * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-28T21:16:01.317

*对于组中的每个单选按钮，除了*您希望最初处于活动状态的单选按钮之外，稍微更准确/最新，

1.  选择（最初不处于活动状态）单选按钮，
2.  在*Group:*字段中的“Button Attributes”下，输入该组中最初活动的单选按钮的 ID（或单击右侧的编辑图标并通过单击其名称左侧的单选按钮在弹出列表中选择它）。
3.  单击确定。

对所有最初不活动的单选按钮重复此操作，这些单选按钮应链接到最初活动的单选按钮。请注意，稍后您可以通过选中“按钮属性”下的活动复选框*来简单地使单选按钮变为活动状态，从而更改最初活动的选项。*如果它已被标记为活动，请先取消标记它。**

# c - 有没有办法知道tun/tap接口是否打开？

> ID：14960586
> 
> 赞同：1
> 
> 时间：2013-02-19T15:01:16.103
> 
> 标签：c, linux, tun

我正在使用 tun 接口 tun0 制作应用程序。我已经成功地能够通过接口发送和接收数据包。有什么方法可以知道 tun 接口何时打开`ifconfig tun0 up`？

我只想在接口处于活动状态时才进行一些底层设备初始化。（稍后添加）我正在关注[http://backreference.org/2010/03/26/tuntap-interface-tutorial/中的示例](http://backreference.org/2010/03/26/tuntap-interface-tutorial/)

# java - 为什么我在第 1 行出现语法错误？

> ID：14960595
> 
> 赞同：0
> 
> 时间：2013-02-19T15:01:31.657
> 
> 标签：java, android, sdk

I'm trying to get this to open an url when the icon is selected/clicked, but I get `Syntax error on tokens, delete these tokens`on the line`String url =`

```
String url = "http://www.google.co.uk/";
Intent i = new Intent(Intent.ACTION_VIEW);
i.setData(Uri.parse(url));
startActivity(i); 
```

显现：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.openurl"
    android:versionCode="1"
    android:versionName="1.0" >
<application>
    <activity android:name="OpenURL" android:label="@string/app_name">
        <intent-filter>
             <action android:name="android.intent.action.MAIN" />
             <category android:name="android.intent.category.LAUNCHER" />

        </intent-filter>
    </activity>
</application>

</manifest> 
```

我现在对此有了更进一步的了解，但是当我加载 apk 文件时，该图标会打开带有 2 个窗口的浏览器 - 空白和 url。我也无法使用后退按钮关闭浏览器 - 它不断打开网址。我该如何纠正这些问题？

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.myapp"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="14" />
<uses-permission android:name="android.permission.INTERNET"></uses-permission>
<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name">
    <activity
        android:name="com.example.myapp.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>
</manifest>

package com.example.myapp;

import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;

public class MainActivity extends Activity {
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    String url = "http://www.google.co.uk";
    Intent i = new Intent(Intent.ACTION_VIEW);
    i.setData(Uri.parse(url));
    startActivity(i);
}
} 
```

再次感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:18:17.443

这个

```
String url = "http://www.google.co.uk/"; 
```

永远不能是 java 文件的第一行。

您的文件需要一个结构，如：

```
package a.b.c; // optional

import java.util.List; // optional

public class ClassName { // mandatory

    // your code

} // mandatory 
```

如果这可以解决您的错误，您应该考虑阅读 Java 教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T15:19:33.720

首先在您的清单中添加互联网权限：

```
 <uses-permission android:name="android.permission.INTERNET"></uses-permission> 
```

那么你的主要应该是这样的：

```
public class Main extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.yourmainlayout);

    Button button = (Button) findViewById(R.id.yourbuttonid);
    button.setOnClickListener(new OnClickListener(){

        @Override
        public void onClick(View v) {
            String url = "http://www.google.co.uk/";
            Intent i = new Intent(Intent.ACTION_VIEW, Uri.parse(url)); 
            startActivity(i); 
        }});
    }

} 
```

# php - Symfony 2 Bundle 职责和结构

> ID：14960596
> 
> 赞同：1
> 
> 时间：2013-02-19T15:01:34.283
> 
> 标签：php, symfony

我对何时创建新包或何时仅在 Symfony 2 中创建新控制器和 CRUD 感到困惑。如果我有一个将表连接到其他实体的实体，那么它们应该都在同一个包中。

一个例子是我有一个用户包，我希望用户能够喜欢系统中的视频。在那里，用户和视频将链接到一个连接表中。

在我开始这个项目之前，我会说我需要创建一个视频包和一个用户包，但是如果它们都需要相互引用，它们应该在同一个包中吗？

如果答案是它们应该在单独的包中，那么在它们的视图和控制器中引用它们的最佳实践是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:52:02.127

我将在同一个包中打包常用功能。我知道，当你开始学习 Symfony 2 时，很难理解。例如，考虑[FOSUserBundle](https://github.com/FriendsOfSymfony/FOSUserBundle)：它为用户、组、身份验证等的 CRUD 操作定义了通用且可重用的代码。

作为起点，您应该学习[如何定义与抽象类和接口的关系](http://symfony.com/doc/master/cookbook/doctrine/resolve_target_entity.html)以及[原则继承映射](http://docs.doctrine-project.org/en/latest/reference/inheritance-mapping.html)（映射的超类对于扩展您的包非常有用，但有一些限制）。

# actionscript-3 - Flex 4 自定义 TextInput 皮肤 -> 新的图形元素由于某种原因变暗了？

> ID：14960597
> 
> 赞同：3
> 
> 时间：2013-02-19T15:01:35.993
> 
> 标签：actionscript-3, apache-flex, flex4, skinning, spark-skinning

Flex 4 / AS3：我通过选择 New->MXML Skin 并选择“TextInput - spark.components”作为主机组件为 TextInput 制作了自定义皮肤。因此，我的出发点是“Spark TextInput 组件的默认皮肤类”。

在新皮肤（称为“textinput_skin”）中，我添加了一个新的视觉元素，我希望它出现在文本输入中文本的左侧。

“按钮形状”应该看起来非常像这样： http: [//www.adobe.com/content/dotcom/en/devnet/flex/articles/flex4_skinning/_jcr_content/articlecontentAdobe/image_2.adimg.mw.125.jpg /1279877300467.jpg](http://www.adobe.com/content/dotcom/en/devnet/flex/articles/flex4_skinning/_jcr_content/articlecontentAdobe/image_2.adimg.mw.125.jpg/1279877300467.jpg) （因为我复制了从 Adob​​e 示例中绘制它的代码）。

相反，在我的 TextInput 中，它看起来像这样：http: [//i.imgur.com/8aWE7HB.png](http://i.imgur.com/8aWE7HB.png)

这是我在自定义 TextInput 皮肤中的代码（现在大部分是新的，但我添加了新的视觉元素）：

```
<!-- border - NOT NEW STUFF --> 
<!--- @private -->
<s:Rect left="0" right="0" top="0" bottom="0" id="border">
    <s:stroke>     
        <!--- @private -->
        <s:SolidColorStroke id="borderStroke" weight="1" />
    </s:stroke>
</s:Rect>

<!-- fill - NOT NEW STUFF -->
<!--- Defines the appearance of the TextInput component's background. -->
<s:Rect id="background" left="1" right="1" top="1" bottom="1">
    <s:fill>
        <!--- @private Defines the background fill color. -->
        <s:SolidColor id="bgFill" color="0xFFFFFF" />
    </s:fill>
</s:Rect>

<!-- shadow - NOT NEW STUFF -->
<!--- @private -->
<s:Rect left="1" top="1" right="1" height="1" id="shadow">
    <s:fill>
        <s:SolidColor color="0x000000" alpha="0.12" />
    </s:fill>
</s:Rect>

<s:Group> <!-- NEW PART: group with horizontal layout, to get graphical element to the left of the text in the text input -->
    <s:layout>
        <s:HorizontalLayout/>
    </s:layout>

    <s:Group> <!-- a second group that defines the 'image' shape and interior text (looks like a green rect with rounded corners and text inside)'
        <!-- border and fill -->
        <s:Rect id="rect" radiusX="4" radiusY="4" top="0" right="0" bottom="0" left="0">
            <s:fill>
                <s:SolidColor color="0x77CC22"/>
            </s:fill>
            <s:stroke>
                <s:SolidColorStroke color="0x131313" weight="2"/>
            </s:stroke>
        </s:Rect>

        <!-- highlight on top -->
        <s:Rect radiusX="4" radiusY="4" top="2" right="2" left="2" height="50%">
            <s:fill>
                <s:LinearGradient rotation="90">
                    <s:GradientEntry color="0xFFFFFF" alpha=".5"/>
                    <s:GradientEntry color="0xFFFFFF" alpha=".1"/>
                </s:LinearGradient>
            </s:fill>
        </s:Rect>

        <!-- text -->
        <s:Label text="txt" color="0xFFFFFF" 
                 textAlign="center"
                 verticalAlign="middle"
                 horizontalCenter="0" verticalCenter="1"
                 left="6" right="6" top="6" bottom="6" 
                 />
    </s:Group>

    <!-- text - NOT NEW STUFF - the normal textDisplay element for the Text Input -->
    <!--- @copy spark.components.supportClasses.SkinnableTextBase#textDisplay -->
    <s:RichEditableText id="textDisplay"
                        verticalAlign="middle"
                        widthInChars="10"
                        left="1" right="1" top="1" bottom="1" />
</s:Group>

<!--- Defines the Label that is used for prompt text. The includeInLayout property is false so the prompt text does not affect measurement. -->
<s:Label id="promptDisplay" maxDisplayedLines="1"
            verticalAlign="middle"
            mouseEnabled="false" mouseChildren="false"
            includeIn="normalWithPrompt,disabledWithPrompt" 
            includeInLayout="false"
            /> 
```

我使用皮肤，如下所示：

```
<s:TextInput skinClass="model.textinput_skin" fontFamily="Arial" id="textinputid" name="item3" visible="true" editable="true" /> 
```

问题是图形元素*变暗*了。看起来它可能有一个 alpha < 1，或者前面有另一个透明项目。正如您在代码中看到的那样，我将文本颜色设置为 0xFFFFFF，但它显然比白色更暗。

谁能帮我确定是什么让我的元素*变暗？*

顺便说一句，我知道有“影子”元素。但在 updateDisplayList() 中，只有当borderVisible == true 时才会设置阴影。我尝试设置borderVisible = false，并尝试从皮肤中完全移除阴影元素。这似乎不是问题。

此外，有一次我使用图像而不是以编程方式绘制形状。连图像都变暗了。

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T13:20:22.993

我找到了答案。

皮肤的其他地方是这段代码：

```
<fx:Script fb:purpose="styling">
    <![CDATA[
    import mx.core.FlexVersion;

    private var paddingChanged:Boolean;

    /* Define the skin elements that should not be colorized. */
    static private const exclusions:Array = ["background", "textDisplay", "promptDisplay", "border"];

    /* exclusions before Flex 4.5 for backwards-compatibility purposes */
    static private const exclusions_4_0:Array = ["background", "textDisplay", "promptDisplay"];
... etc. 
```

我需要将我的新元素添加到排除数组中，使其成为“不应着色的皮肤元素”之一。我不知道为什么，但这解决了它。

新代码：

```
<fx:Script fb:purpose="styling">
    <![CDATA[
    import mx.core.FlexVersion;

    private var paddingChanged:Boolean;

    /* Define the skin elements that should not be colorized. */
    static private const exclusions:Array = ["text_img", "background", "textDisplay", "promptDisplay", "border"];

    /* exclusions before Flex 4.5 for backwards-compatibility purposes */
    static private const exclusions_4_0:Array = ["text_img", "background", "textDisplay", "promptDisplay"]; 
```

其中 text_img 是我绘制图形元素的组的 id。

# simple.data - Simple.Data 中的动态值

> ID：14960603
> 
> 赞同：0
> 
> 时间：2013-02-19T15:02:12.373
> 
> 标签：simple.data

请参阅下面的代码行以获得帮助。

```
private static readonly dynamic db= Database.OpenNamedConnection("DefaultConnectionString");

var idRecord = db.TableName.FindAll(db.TableName.phoneNo == phoneNo && db.TableName.password == pass).FirstOrDefault(); 
```

我的问题是，如何`db.TableName.phoneNo`在 Debug 期间查看 的值。

欢迎任何帮助。

谢谢。

利亚卡特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-09T02:43:10.830

调试此问题的唯一方法是将查询输出到控制台。然后你可以在你的数据库中运行它。有关更多信息，请参阅此问题。[如何从 Simple.Data ORM for .NET 中记录生成的 sql 查询](https://stackoverflow.com/questions/9289530/how-to-log-generated-sql-queries-out-of-simple-data-orm-for-net)

# iphone - 如何将 NSError 传递给方法

> ID：14960611
> 
> 赞同：1
> 
> 时间：2013-02-19T15:02:44.100
> 
> 标签：iphone, ipad

我有一个采用参数的方法

```
(void(^)(NSError*))errorCall; 
```

我需要传递 errorCall 值

```
-(void)message{

example = [[Example alloc]init]
[example opertationError:void(^)(NSError*))errorCall ]; 
} 
```

对于下面的行

```
[example opertationError:void(^)(NSError*))errorCall]; 
```

我需要传递一些自定义错误调用，其类型为 `void(^)(NSError*))errorCall`

请任何人告诉我如何将这种错误值传递给方法。

@全部

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:06:06.597

你可以这样做：

```
void(^aBlock)(NSError *) = ^(NSError *error) {
    ...
};
[self errorValue:aBlock]; 
```

# ios - 在 iOS 中实现自动完成

> ID：14960612
> 
> 赞同：6
> 
> 时间：2013-02-19T15:02:45.383
> 
> 标签：ios, objective-c, algorithm, cocoa-touch, autocomplete

我正在创建一个应用程序，我需要在用户输入文本输入时实现自动完成，其中 10 个最近/最高排名的单词出现在文本字段下方。

我得到了**一个相当大的列表，其中包含大约 80,000 个单词和它们各自的“优先级”** ——一个根据数字大小确定它们在自动完成中出现的高度的数字，如下所示：

```
"transport international";19205
"taxi";18462
"location de voitures";18160
"police";18126
"formation";17858 
```

我对 iOS 开发有点陌生，想知道最好的方法是什么 - 我应该将 80,000 个短语拆分成更小的文件，还是只保留一个？什么会更快？

我已经看到在 iOS 的示例中使用了自动完成功能，但它只提供了非常少量的建议 - 我以前没有见过使用这么大的文件完成它，显然我希望尽可能快地添加用户经验。

任何有关示例、教程或代码建议的建议将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-08T20:03:34.450

如果您更喜欢自动完成功能，但它是 UITextField 的直接子类，那么您可能会对[MLPAutoCompleteTextField感兴趣。](https://www.cocoacontrols.com/controls/mlpautocompletetextfield)

MLPAutoCompleteTextField 的工作原理是在每次文本字段中的文本发生更改时简单地向其自动完成数据源询问一组自动完成建议。它甚至可以自动对单词进行排序，以便最接近用户输入的单词出现在自动完成列表的顶部（使用[Levenshtein 距离](http://en.wikipedia.org/wiki/Levenshtein_distance)算法）。自动完成建议可以是简单的字符串，也可以是实现 MLPAutoCompletionObject 协议的对象。

**提示：**对于自动完成术语的大型数据集，您可能希望根据起始字母分解列表。（示例：当用户输入字母 F 时，您只为自动完成文本字段提供以 F 开头的单词列表。）

MLPAutoCompleteTextField 可以在合理的时间内有效地对数千条建议进行排序，并且在排序时绝不会阻塞 UI。

目前，加权建议（覆盖默认排序）是不可能的，但这是一个计划中的功能。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-19T15:06:50.743

您可能想使用这个 repo [HTAutocompleteTextField](https://github.com/hoteltonight/HTAutocompleteTextField)，完美的解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T20:50:18.293

[https://github.com/TarasRoshko/TRAutocompleteView](https://github.com/TarasRoshko/TRAutocompleteView)

只要符合`TRAutocompleteItemsSource`协议，就是这样。协议的设计考虑了异步支持。演示应用程序和示例`TRGoogleMapsAutocompleteItemsSource`应该对您有很大帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-30T17:13:07.310

这个[链接](http://www.raywenderlich.com/336/auto-complete-tutorial-for-ios-how-to-auto-complete-with-custom-values)对我很有效。根据您的代码，不要错过 和 之间的`UITextField`区别`UITextView`。

没有额外的库，只是一个简单的自定义`UITableView`和搜索功能。

# c++ - 在 Iepmapi.h 中找不到 IESetProtectedModeCookie 函数

> ID：14960615
> 
> 赞同：0
> 
> 时间：2013-02-19T15:02:50.393
> 
> 标签：c++, internet-explorer

在 Iepmapi.h 中找不到 IESetProtectedModeCookie 函数但是当我使用带有**Ieframe.dll**的 LoadLibrary 技术调用函数时，它会在**cookie的****LOW**文件夹中创建条目，但在创建条目后会获得**GP**。如何？

 ***** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T03:45:31.277

如果您查看 的[文档](http://msdn.microsoft.com/en-us/library/cc197007%28v=vs.85%29.aspx)，`IESetProtectedModeCookie`您会发现它仅在 IE8 及更高版本中受支持。

尝试`_WIN32_IE=_WIN32_IE_IE80`正常定义和调用函数，而不是使用`LoadLibrary`.****

# c++ - 根据参数数量生成多个宏调用

> ID：14960617
> 
> 赞同：0
> 
> 时间：2013-02-19T15:02:55.293
> 
> 标签：c++, macros, variadic-macros

我试图以重复的方式多次调用这个函数。

```
template<class T>
void METADATA_METHODS_IMPL(std::string& metadata, const T &value, const std::string &key)
{
    metadata += boost::format("%1%:%2%") % key % value();
} 
```

我写了以下宏：

```
#define METADATA_METHODS_IMPL_1(md, v1)\
   METADATA_METHODS_IMPL(md, v1, #v1);

#define METADATA_METHODS_IMPL_2(md, v1, v2)\
   METADATA_METHODS_IMPL_1(md, v1)\
   METADATA_METHODS_IMPL_1(md, v2)

#define METADATA_METHODS_IMPL_3(md, v1, v2, v3)\
   METADATA_METHODS_IMPL_2(md, v1, v2)\
   METADATA_METHODS_IMPL_1(md, v3) 
```

等等 ...

我需要调用`METADATA_METHODS_IMPL_N`其中`N`的多个参数`__VA_ARGS__`

```
#define METADATA_METHODS(...)\
std::string METADATA_METHODS_IMPL_FUNC()\
{\
    std::string metadata;\
    BOOST_PP_OVERLOAD(METADATA_METHODS_IMPL_,__VA_ARGS__)(metadata, __VA_ARGS__)\
    return metadata;\
} 
```

上面的代码（带`BOOST_PP_OVERLOAD`）给了我不合适的结果：

```
class X
{
    std::string F1();
    std::string F2();
    std::string F3();

    METADATA_METHODS(F1, F2, F3);
}; 
```

这导致

```
std::string METADATA_METHODS_IMPL_FUNC() 
{
    std::string metadata; 
    METADATA_METHODS_IMPL(metadata, F1, F2, F3, "F1", "F2", "F3"); 
    METADATA_METHODS_IMPL(metadata, , ""); 
    METADATA_METHODS_IMPL(metadata, , ""); 
    return metadata; 
}; 
```

我想要这样的东西：

```
std::string METADATA_METHODS_IMPL_FUNC() 
{
    std::string metadata; 
    METADATA_METHODS_IMPL(metadata, F1, "F1"); 
    METADATA_METHODS_IMPL(metadata, F2, "F2"); 
    METADATA_METHODS_IMPL(metadata, F3, "F3"); 
    return metadata; 
}; 
```

*   有谁知道如何达到预期的结果？
*   我可以使用库为某些使用`Boost.preprocessor`自动生成吗`METADATA_METHODS_IMPL_K``K in [1 .. 10]``METADATA_METHODS_IMPL_1`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-10-01T02:23:59.743

使用这些宏，我们可以使预处理器继续重新扫描并允许递归宏。

```
#define EVAL(...)  EVAL3(EVAL3(EVAL3(__VA_ARGS__)))
#define EVAL3(...) EVAL2(EVAL2(EVAL2(__VA_ARGS__)))
#define EVAL2(...) EVAL1(EVAL1(EVAL1(__VA_ARGS__)))
#define EVAL1(...) EVAL0(EVAL0(EVAL0(__VA_ARGS__)))
#define EVAL0(...) __VA_ARGS__ 
```

我们可以定义一些辅助函数来构建概念。

```
#define CAT(a, ...) PRIMITIVE_CAT(a,__VA_ARGS__)
#define PRIMITIVE_CAT(a, ...) a ## __VA_ARGS__

#define EMPTY()
#define EAT(...)
#define IDENT(...) __VA_ARGS__
#define DEFER(id) id EMPTY()
#define OBSTRUCT(...) __VA_ARGS__ DEFER(EMPTY)()   

#define I_TRUE(t,f) t
#define I_FALSE(t,f) f
#define I_IS_DONE(a,b,...) b
#define TRUE_DONE() ~, I_TRUE
#define IS_DONE(b) OBSTRUCT(I_IS_DONE)(CAT(TRUE_,b)(),I_FALSE) 
```

并构建这个带有第一个参数的宏映射函数。

```
#define MM() MM_CALL
#define MM_NEXT(Macro,md,a,...) \
  IS_DONE(a)(                    \
     EAT                          \
  ,                                \
     OBSTRUCT(MM)()                 \
  )                                  \
  (Macro,md,a,__VA_ARGS__)
#define MM_CALL(Macro,md,a,...)   \
  Macro(md,a)                      \
  MM_NEXT(Macro,md,__VA_ARGS__)
#define MacroMap(Macro,md,...) EVAL(MM_CALL(Macro,md,__VA_ARGS__,DONE)) 
```

定义实现相关功能后

```
#define METADATA_METHODS_IMPL_MACRO(md,a) \
  METADATA_METHODS_IMPL(md, a, #a);

#define METADATA_METHODS(md,...) \
  MacroMap(METADATA_METHODS_IMPL_MACRO,md,__VA_ARGS__) \
  return md 
```

这个：

```
METADATA_METHODS(metadata, F1, F2, F3); 
```

结果（添加一些格式后）：

```
METADATA_METHODS_IMPL(metadata, F1, "F1");
METADATA_METHODS_IMPL(metadata, F2, "F2");
METADATA_METHODS_IMPL(metadata, F3, "F3");
return metadata; 
```

# php - 带有 IN(?) 的 mySQL bind_param

> ID：14960621
> 
> 赞同：8
> 
> 时间：2013-02-19T15:03:09.360
> 
> 标签：php, mysqli

使用`bind_param`我所有的查询，我现在想使用`IN(?)`列表中元素数量可以变化的地方。

我在这里使用的 SQLout 函数基本上做了一个`$sql_db->prepare`, `->bind_param`, `->execute()`, `->store_result()`,`->bind_result`

```
// the code below does not work as the query only matches on element 'a':
$locations = ('a','b','c','d','e');

SQLout ("SELECT Name FROM Users WHERE Locations IN (?)",
    array('s', $locations), array(&$usrName));

// the code below does work as a brute-force method,
// but is not a viable solution as I can't anticipate the number of elements in $locations going forward:

SQLout ("SELECT Name FROM Users WHERE Locations IN (?,?,?,?,?)",
    array('sssss', $locations[0],$locations[1],$locations[2],$locations[3],$locations[4]), array(&$usrName)); 
```

有没有人想出一个更优雅的解决方案？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T15:07:23.577

这是一个占位符落在他们脸上的地方。减去自动转义，它们几乎实际上只是内部的字符串替换操作，这意味着如果你有`WHERE Locations IN (?)`, 并传入`1,2,3,4`，你将得到相当于

```
WHERE Locations IN ('1,2,3,4')  // note, it's a string, not individual comma-separated integers 
```

逻辑上等价于

```
WHERE Locations = '1,2,3,4' // again, just a string 
```

而不是预期的

```
WHERE Locations = 1 OR Locations = 2 OR Locations = 3 OR Locations = 4 
```

唯一实用的解决方案是构建您自己的逗号分隔占位符 ( `?`) 列表，例如：

```
$placeholders = implode(',', array_fill(0, count($values), '?'));
$sql = "SELECT Name FROM Users WHERE Locations IN ($placeholders)"; 
```

然后绑定你的参数是通常的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T15:38:31.910

正如 Hazmat 所说，您需要建立参数，然后通过调用`call_user_func_array`准备好的语句来传递它们，但比他的示例更接近工作代码:)

```
//In the calling code
$queryString = "SELECT Name FROM Users WHERE Locations IN (";
$queryString .= getWhereIn($locations);
$queryString .= " )";

$parametersArray = array();

foreach($locations as $location){
    $parameter = array();
    $parameter[0] = 's'; //It's a string
    $parameter[1] = $location;

    $parametersArray[] = $parameter;
}

//This is a function in a class that wraps around the class mysqli_statement
function    bindParameterArray($parameterArray){

    $typesString = '';
    $parameterValuesArray = array();

    foreach($parameterArray as $parameterAndType){
        $typesString .= $parameterAndType[0];
        $parameterValuesArray[] = $parameterAndType[1];
    }

    $finalParamArray = array($typesString);
    $finalParamArray = array_merge($finalParamArray, $parametersArray);
    call_user_func_array(array($this->statement, "bind_param"), $finalParamArray);
}

function getWhereIn($inArray){
    $string = "";
    $separator = "";
    for($x=0 ; $x<count($inArray) ; $x++){
        $string .= $separator."?";
        $separator = ", ";
    }
    return  $string;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T15:11:27.390

`IN`您可以在准备/绑定之前“构建”子句。

```
$sql = 'SELECT Name FROM Users WHERE Locations IN (' . implode(array_fill(0, count($locations), '?')) . ')'; 
```

然后您可以使用`call_user_func_array`绑定参数，而无需知道有多少。

```
// Parameters for SQLOut
$params = array(
    # The SQL Query
    $sql,
    # The params for bind_param
    array(str_repeat('s', count($locations))),
    # The params for bind_result
    array(&$usrName)
);

// Add the locations into the parameter list
foreach($locations as &$loc){
    // not sure if this is needed, but bind_param
    // expects its parameters to be references
    $params[1][] = &$loc;
}

// Call your function
call_user_func_array('SQLout', $params); 
```

[注意：这是未经测试的]

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-19T15:05:53.710

IN 通常很慢，而且对准备好的语句不友好。更好的解决方案是构建将在 IN 中的项目的表并使用 JOIN 来获得相同的效果。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-02-19T15:14:58.513

> 有没有人想出一个更优雅的解决方案？

当然。我有。

Mysqli 实际上不能用于准备好的语句，尤其是在这种复杂的情况下。
因此，最好摆脱准备好的语句并实现自己的占位符，并支持开发人员可以遇到的所有**真实案例。**

[safeMysql](https://github.com/colshrapnel/safemysql)（我的一个创作）有一个您正在寻找的解决方案（以及其他十几个令人头疼的解决方案）。

在您的特定情况下，它就像这行代码一样简单

```
// the code works alright:
$locations = array('a', 'b', 'c', 'd', 'e');
$usrName = $db->getCol("SELECT Name FROM Users WHERE Locations IN (?a)", $locations); 
```

与您在使用某些 PHP 和 API 函数时可能会遇到的丑陋代码不同（并且仍然会收到令人不安的警告取决于您目前使用的 PHP 版本），此代码简洁**易读**。这是一件重要的事情。即使在一年过去了，你也可以知道这段代码做了什么。

# java - https登录网银

> ID：14960623
> 
> 赞同：1
> 
> 时间：2013-02-19T15:03:17.827
> 
> 标签：java, android, post, login, https

我是这个 HTTP 东西的完整初学者，所以请耐心等待！我四处寻找教程和示例代码，尝试帮助我登录网上银行系统。这是我的代码。我相信我可能必须在标头中添加一些身份验证代码或更多参数。任何帮助将非常感激！

```
public class PostData extends AsyncTask<Void, String, Boolean> {
Context ourContext;

public PostData(Context c) {
    ourContext = c;
}

@Override
protected Boolean doInBackground(Void... arg0) {

    HttpPost httppost = new HttpPost(
            "https://online.lloydstsb.co.uk/personal/logon/login.jsp?WT.ac=hpIBlogon");
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(3);
    nameValuePairs.add(new BasicNameValuePair("frmLogin:strCustomerLogin_userID", "<myuser>"));
    nameValuePairs.add(new BasicNameValuePair("frmLogin:strCustomerLogin_pwd", "<mypass>"));
    nameValuePairs.add(new BasicNameValuePair("frmLogin:btnLogin1", "Continue"));
    try {
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
    } catch (UnsupportedEncodingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    try {
        HttpResponse response = getClient().execute(httppost);
        try {   

            if(response.getStatusLine().getStatusCode() == 200) {   

                HttpEntity entity = response.getEntity();
                System.out.println("Success");

            } else { 
                System.out.println("ERROR");
            }

        } catch (Exception e) {

        }

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return true;
}

public DefaultHttpClient getClient() {
    DefaultHttpClient ret = null;

    // sets up parameters
    HttpParams params = new BasicHttpParams();
    HttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);
    HttpProtocolParams.setContentCharset(params, "utf-8");
    params.setBooleanParameter("http.protocol.expect-continue", false);

    // registers schemes for both http and https
    SchemeRegistry registry = new SchemeRegistry();
    registry.register(new Scheme("http", PlainSocketFactory
            .getSocketFactory(), 80));
    final SSLSocketFactory sslSocketFactory = SSLSocketFactory
            .getSocketFactory();
    sslSocketFactory
            .setHostnameVerifier(SSLSocketFactory.BROWSER_COMPATIBLE_HOSTNAME_VERIFIER);
    registry.register(new Scheme("https", sslSocketFactory, 443));

    ThreadSafeClientConnManager manager = new ThreadSafeClientConnManager(
            params, registry);
    ret = new DefaultHttpClient(manager, params);
    return ret;
} 
```

}

# visual-studio-2012 - Visual Studio 2012 我的自定义插件在启动时不会加载

> ID：14960626
> 
> 赞同：0
> 
> 时间：2013-02-19T15:03:31.717
> 
> 标签：visual-studio-2012, visual-studio-addins

我有一个自定义添加可以正常工作以测量编译时间并执行一些其他自定义内容。

问题是我每天都要手动去

工具 -> 插件管理器

并启用我的自定义插件。

# python - 是否可以使用 squish 对 QML 进行自动化测试？

> ID：14960631
> 
> 赞同：3
> 
> 时间：2013-02-19T15:03:43.757
> 
> 标签：python, testing, automated-tests, qml, squish

我需要知道 squish 是否用于测试 QML 独立应用程序？我知道它可以测试 Qt 独立应用程序。但我无法专门为 QML 做同样的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-28T00:29:42.963

是的，squish 可以测试 QML 独立应用程序。你用的是什么版本的squish？几个月前，我用我的 QML 应用程序测试了 squish，它运行良好。

squish请参考相关新闻：http: [//www.prweb.com/releases/2013/9/prweb11160262.htm](http://www.prweb.com/releases/2013/9/prweb11160262.htm)

# java - Java：包含类的链表

> ID：14960632
> 
> 赞同：0
> 
> 时间：2013-02-19T15:03:47.413
> 
> 标签：java, linked-list, nodes

我已经通过节点类制作了一个循环 LinkedList，然后我看到了这个 LinkedList`import.java.util.LinkedList`带有操作 add、addFirst 等。

使用它，它可以减轻遍历和访问 LinkedList 的负担，但我的问题是，如果我想访问 List 并将一些数据放入其中？如何？

```
public class stckoverflow {
    private int x;
    public void getx(int y){
        x = y;
    }
}

// then in the main we have
LinkedList<stckoverflow> ll = new LinkedList<>();
ll.add(0, ????? ); 
```

所以关键是，如果我想访问 LinkedList 中特定类中的一些函数/过程，我该怎么做呢？我通过节点类访问 LinkedList 中的这些东西没有问题，因为我可以简单地说 current 得到 head 然后通过 while 循环遍历直到它结束。

我很困惑。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:06:46.283

更好地遵守 Java 命名约定，将您的类命名为`Stackoverflow`或`StackOverflow`

```
Stackoverflow obj = new Stackoverflow();
//obj.set attributes if you have
// ...
ll.add( obj ); 
```

# hibernate - 将 JSF 连接到 Hibernate 并上传到 OpenShift

> ID：14960633
> 
> 赞同：0
> 
> 时间：2013-02-19T15:03:49.770
> 
> 标签：hibernate, jpa, openshift

我想创建使用 JSF 和 Hibernate 的 Web 应用程序。我已经在本地创建了它，现在我想将它上传到 OpenShift 服务器。我是 JSF/Hibernate 的新手，我不知道如何配置它。有人可以写一些将 JSF 与 Hibernate 连接起来的可能性吗？它在本地工作，如下所示：

持久性.xml

```
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
  <persistence-unit name="StudioBMPU" transaction-type="RESOURCE_LOCAL">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <class>entity.article.Article</class>
    <exclude-unlisted-classes>false</exclude-unlisted-classes>
    <properties>
      <property name="hibernate.connection.username" value="root"/>
      <property name="hibernate.connection.driver_class" value="com.mysql.jdbc.Driver"/>
      <property name="hibernate.connection.password" value="root"/>
      <property name="hibernate.connection.url" value="jdbc:mysql://localhost:3306/studiobm?zeroDateTimeBehavior=convertToNull"/>
    </properties>
  </persistence-unit>
</persistence> 
```

负责连接mysql的代码：打包服务；

```
import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.Persistence;

public class DBManager {

    private static DBManager instance;
    private EntityManagerFactory emf;

    private DBManager() {}

    public synchronized static DBManager getManager() {
    if (instance == null) {
        instance = new DBManager();
    }

    return instance;
    }

    public EntityManagerFactory createEntityManagerFactory() {
    if (emf == null) {
        emf = Persistence.createEntityManagerFactory("StudioBMPU");
    }

    return emf;
    }

    public EntityManager createEntityManager() {
    return this.createEntityManagerFactory().createEntityManager();
    }

    public void closeEntityManagerFactory() {
    if (emf !=null) {
        emf.close();
    }
    }

} 
```

还有其他一些与 Hibernate 连接的可能性吗？也许有人也知道我应该在 openshift git commit 之前将 persistence.xml 文件放在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:58:56.200

而不是直接在*persistence.xml*中指定连接值，您应该使用过滤并在文件中使用变量。在本地构建期间，您可以过滤开发值。要部署到 OpenShift，您需要创建一个*openshift*配置文件，该配置文件定义了 OpenShift 的正确值。当您推送到 OpenShift 并构建应用程序时，默认情况下会激活*openshift配置文件。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T06:23:35.200

问题是persistence.xml 配置错误。我使用 EclipseLink 连接数据库，问题是我使用 javax.persistence.jdbc.* 作为配置的命名空间。当我将其更改为 eclipselink.jdbc.* 应用程序终于开始工作了。

# php - 跨域图片上传的 Access-Control-Allow-Origin 错误

> ID：14960634
> 
> 赞同：0
> 
> 时间：2013-02-19T15:03:51.330
> 
> 标签：php, jquery-plugins, cross-domain, image-uploading, blueimp

****用例：****我正在使用[jquery/ajax 上传](https://github.com/blueimp/jQuery-File-Upload)器进行跨域图像上传。我已经设置了一个使用 PHP 跨域上传图像的演示。

****问题：****当我将图像从一个域上传到另一个域时（我在其他域上有包含 PHP 文件的服务器文件夹）原始图像被上传但是，缩略图没有上传（或没有创建) 我收到 Access-Control-Allow-Origin 的错误

我已将 UploadHandler.php 中的**Access-Control-Allow-Origin**参数保留为**'*' 。**我的GET 请求没有给我错误，但是当我上传时，我看到一个选项请求（正常工作）和一个 POST 请求产生错误。

**Reasearch/Study：**我经历了几个问题并试图解决这个插件的 GIT 问题，他们建议在 Access-Control-Allow-Origin 参数中添加**“*”**应该像这样（php 文件来连同插件）。其余设置在 js 文件中保持为默认值。

```
 'access_control_allow_origin' => '*',
        'access_control_allow_credentials' => false,
        'access_control_allow_methods' => array(
            'OPTIONS',
            'HEAD',
            'GET',
            'POST',
            'PUT',
            'PATCH',
            'DELETE'
        ), 
```

请提出在这种情况下有帮助的任何解决方案。

附上一张图片以清除错误！请提出任何解决方案。 ![在此处输入图像描述](../Images/f57996922eb7b6d62c3d06df65c275c3.png)

![失败选项请求的标题][3]

**更新：**

```
 'image_versions' => array(
            // Uncomment the following version to restrict the size of
            // uploaded images:

            'original' => array(
                'max_width' => 1920,
                'max_height' => 1200,
                'jpeg_quality' => 95
            ),

            // Uncomment the following to create medium sized images:

            '800x600' => array(
                'max_width' => 800,
                'max_height' => 600,
                'jpeg_quality' => 80
            ),

            '150x150' => array(
                'max_width' => 80,
                'max_height' => 80
            )
        ) 
```

这是我用来创建上传图像的裁剪形式的数组。当我不传递数组时，我得到成功的标题作为响应，但是当我这样做时，我得到了`Access-Control-Origin-Error`。当我检查服务器日志时，我得到一个`Headers already sent error`。（**我使用的 PHP 脚本与插件相同。在`server/php`文件夹**中存在）

# ssl - 在本地运行启用 SSL 的 Azure 网站

> ID：14960643
> 
> 赞同：1
> 
> 时间：2013-02-19T15:04:13.030
> 
> 标签：ssl, azure

我的 SSL 在生产中工作正常，但在本地有一些问题。

当我运行该站点时，它会打开 2 个选项卡，一个 http:// 和一个 https://

我只想在本地使用 http:// 选项卡进行测试。当我转到需要 https 的页面时，出现错误：

> 无法与服务器建立安全连接。这可能是服务器的问题，或者可能需要您没有的客户端身份验证证书

我已将证书添加到：

角色/证书 受信任的根证书颁发机构/证书 中间证书颁发机构/证书

当我使用 https:// 选项卡时，一切都在本地正常工作。

我还需要在其他地方添加证书吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:18:29.790

在本地使用 SSL 证书始终是一个挑战。当网站打开时，它很可能使用环回 IP（127.0.0.1），它总是（可能是我想不到的罕见例外）给出证书错误，因为证书绑定到域名，而不是知识产权。理想情况下，出于安全原因，您可能不想在本地使用您的网站真正的 SSL 证书。

您可以为 localhost 使用自签名证书，它应该可以工作： [http ://social.msdn.microsoft.com/Forums/en-US/wcf/thread/32bc5a61-1f7b-4545-a514-a11652f11200](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/32bc5a61-1f7b-4545-a514-a11652f11200)

另外，我刚刚发布了一个我们之前使用过的代码片段——简而言之，它只是避免使用 SSL 进行本地连接，否则让您定义哪些页面/文件夹应该受到 SSL 保护...... [http://www.structuretoobig .com/post/2013/02/19/Skipping-SSL-Connections-Locally.aspx](http://www.structuretoobig.com/post/2013/02/19/Skipping-SSL-Connections-Locally.aspx)

# php - 在 Opensuse 环境中安装 oracle 和 php oracle 扩展（OCI8）

> ID：14960650
> 
> 赞同：-1
> 
> 时间：2013-02-19T15:04:34.430
> 
> 标签：php, oracle, opensuse, oci8

我正在使用 oracle 数据库服务器现在我想在 Opensuse 环境中安装 oracle。它完全可以在 ubuntu 和 Windows 中工作。所以请告诉我在 Opensuse 中安装 php、oci8 扩展和 oracle 的步骤。这是紧急的。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T18:07:25.007

您需要安装以下软件包：

> php5-devel libxml2-devel zlib-devel readline-devel oracle-instantclient11.2-basic oracle-instantclient11.2-devel

并编译[oci8 php扩展](http://pecl.php.net/package/oci8)

来自[suse](https://www.suse.com/communities/conversations/installing-oracle-php-extensions-suse-linux/)网站的操作指南

[这](https://serverfault.com/questions/360835/suse-12-1-apache-startup-after-oci8-installation)也可以帮助你

# jquery - 剑道组合框的 onblur 事件

> ID：14960652
> 
> 赞同：0
> 
> 时间：2013-02-19T15:04:38.210
> 
> 标签：jquery, html, kendo-ui

kendocombobox 是否有任何 onblur 事件？我阅读了以下链接，但找不到任何东西。 [http://docs.kendoui.c​​om/api/web/combobox](http://docs.kendoui.com/api/web/combobox)

然后我尝试了下面这样的更改事件

```
 $("#selFrameworkVersion").kendoComboBox({
        change: function (e) {
            alert("I am selected");
        }
    }); 
```

这不火。我在我的html中定义了我的kendocombobox如下

```
<td><input  id="selFrameworkVersion" style="width: 210px" data-bind="kendoComboBox: { dataTextField: 'Name', dataValueField: 'Id', data:  $root.versionListByProductType, value:  $root.editFrameworkVersion, optionsCaption: 'Please select Version...' }" /></td> 
```

数据已正确加载。在更改事件或 onblur 事件上，我想执行一些逻辑。我怎样才能实现它？

我调用 webservice 并将数据绑定到 observablearray(versionListByProductType) 你可以看到我在我的视图中使用过

```
 $.ajax({
            url: "../RestService/Version/VersionListByProductType",
            type: "PUT",
            contentType: 'application/json',
            processData: false,
            data: JSON.stringify(input),
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                alert(errorThrown);
            },
            success: function (allData) {
                var mappedVersionListByProdType = $.map(allData, function (item) {

                    return new productVersionListByProductType(item);
                });
                self.versionListByProductType(mappedVersionListByProdType);
                callback(allData);

            }

        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T23:02:45.577

根据初始化后附加事件的文档，您必须执行此类操作。

```
// get a reference to instance of the Kendo UI ComboBox
var combobox = $("#comboBox").data("kendoComboBox");
// bind to the change event
combobox.bind("change", function(e) {
    // handle event
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T19:58:26.153

我不确定您使用的是什么绑定？有这样的[演示](http://demos.kendoui.com/web/mvvm/source.html)吗？你为什么不这样使用它：

```
input  id="selFrameworkVersion" style="width: 210px" />
<script>
 $("#selFrameworkVersion").kendoComboBox({
   dataSource:["foo","bar"],
    change: function (e) {
        alert("I am selected");
    }
  });
</script> 
```

这是[jsbin](http://jsbin.com/oguvox/3/edit)。

# windows-7 - mingw32-g++ 编译为 16 位而不是 32 或 64

> ID：14960654
> 
> 赞同：2
> 
> 时间：2013-02-19T15:04:56.917
> 
> 标签：windows-7, architecture, compilation, g++, mingw32

我在 windows7 64bit 中编译非常简单的代码。(在 C:\MinGw\bin) "mingw32-g++.exe -c -Wall filepath\filename.cpp -o filepath\filename.exe" 当 .exe 运行时，它给我系统上的 16 位不兼容错误。在编译参数中添加-m32，结果是一样的；

我正在使用来自 www.mingw.com 的 MinGw，实际上我不想使用 IDE。

有什么解决办法？ps 发生这种情况是因为我安装并尝试了各种 IDE，其中一些可能安装了不同版本的 mingw，更改了某些路径或更改了某处的配置。我尝试了 code::blocks、codelite、microsoft visual studio express（不正确）。

谢谢

# scala - 如何惯用地迭代地对集合进行 flatMap 对其自己的成员？

> ID：14960668
> 
> 赞同：2
> 
> 时间：2013-02-19T15:05:47.857
> 
> 标签：scala, scala-collections

一个带有 flatMap/map 的简单类，它什么都不做，只是懒惰地存储一个值：

[注 1：这个类可以替换为*任何*带有 flatMap/map 的类。选项只是一个具体的例子，这个问题是关于一般情况的]

[注2：scalaz 是一个有趣的库，但这个问题与它无关。如果除了我在下面发布的内容之外没有 std scala 库解决方案，那是可以接受的。]

```
class C[A](value : => A) {
   def flatMap[B](f: A => C[B]) : C[B] = { f(value) }
   def map[B](f: A => B) : C[B] = { new C(f(value)) }
   override def toString = s"C($value)"
}
object C {
   def apply[A](value : => A) = new C[A](value)
} 
```

一个迭代地将 flatMap 应用于其成员的函数：

```
def invert[A](xs: Traversable[C[A]], acc: List[A] = Nil) : C[List[A]] =
  if(xs.nonEmpty) {
    xs.head flatMap { a => invert(xs.tail, a :: acc) }
  } else {
    C(acc.reverse)
  } 
```

实际作用：

```
scala> val l = List(C(1),C(2),C(3))
l: List[C[Int]] = List(C(1), C(2), C(3))

scala> invert(l)
res4: C[List[Int]] = C(List(1, 2, 3)) 
```

有没有办法习惯性地重写“反转”？此外，是否有一个功能性“动词”可以捕捉我在这里所做的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:49:37.560

您的解决方案的问题在于它会给大型列表带来堆栈溢出，因为它是完全（不仅仅是尾）递归的。我会折叠：

```
def invert[A](xs: Traversable[C[A]]) =
  (C(List[A]()) /: xs){ (c,x) => c.flatMap(l => x.map(_ :: l)) }.map(_.reverse) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T15:31:22.143

您可能会`invert`使用模式匹配更清楚一点，但它本质上是相同的代码：

```
xs match {
  case x0 :: xMore => x0.flatMap(a => invert(xMore, a :: acc))
  case Nil => C(acc.reverse)
} 
```

# zend-framework - 如何使用 Zend Studio 运行单个单元测试？

> ID：14960669
> 
> 赞同：0
> 
> 时间：2013-02-19T15:05:49.133
> 
> 标签：zend-framework, phpunit, zend-studio

我注意到[不能让 Zend Studio 和 PHPunit 一起工作](https://stackoverflow.com/questions/8139891/cant-get-zend-studio-and-phpunit-to-work-together)，评论说

> 如果您希望 ZS 运行 PHPunit 引导程序，您必须专门选择文件 PHPunit.xml 并告诉它作为 PHPunit 测试运行。如果您只是选择一个单独的测试并作为 PHPunit 测试运行，则引导程序将不会运行

这个技巧实际上帮助我能够运行单元测试。然而，随着我的单元测试的增长，当我只需要运行我最近编写的测试时，必须运行*整个测试套件*变得越来越痛苦。

所以我需要帮助将必要的代码添加到单元测试中（大概在 setUp 中），以便测试/bootstrap.php 和整个应用程序的常规引导程序都运行。希望这能让我在单个测试文件上右键单击 -> 运行方式 -> PHPUnit Test。

我是 Zend / Zend Studio 的新手，所以请保持基本的答案。我的一项测试的当前 setUp() 函数如下，我相信它运行整个应用程序的 boostrap：

```
public function setUp() {
    $this->bootstrap = new Zend_Application(APPLICATION_ENV, APPLICATION_PATH . '/configs/application.ini');
    parent::setUp();
} 
```

这需要如何更改才能单独运行这个测试文件？（我认为这涉及到调用上面的测试/bootstrap.php 和应用程序引导程序）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T02:28:48.540

您必须先使用 zend studio / eclipse 设置 phpunit，然后您可以在 IDE 控制台中单独运行每个单元测试文件。

[这是一个可能有帮助的tut](http://blog.bauffman.be/2009/10/14/running-phpunit-tests-in-zend-studio/)

# java - 如何将程序化菜单放在菜单栏中？

> ID：14960672
> 
> 赞同：1
> 
> 时间：2013-02-19T15:05:53.963
> 
> 标签：java, jsf, primefaces

我想在菜单栏中以编程方式创建一个菜单，但它不起作用。

此代码不起作用：

```
<p:menubar id="menuBase">
  <p:menu model="#{indicadorManager.indicadoresMenu}" />
  <p:menuitem type="button" action="#{identity.logout}" value="Logout" />
</p:menubar> 
```

这个可以：

```
<p:menubar id="menuBase" model="#{indicadorManager.indicadoresMenu}">
</p:menubar> 
```

但我想要一个按钮来注销用户，第一个例子。我可以这样做吗？

# github - 从 Github 问题生成变更日志？

> ID：14960674
> 
> 赞同：23
> 
> 时间：2013-02-19T15:05:55.807
> 
> 标签：github, changelog

有没有办法从 Github 问题中自动生成更改日志？

理想情况下，我希望能够指向一个已关闭的里程碑，并生成带有标题的已关闭问题的纯文本列表，或者更好的是，生成带有问题链接标记的列表和问题本身的标题。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-11-07T09:02:31.323

您可以尝试使用[Github-Changelog-Generator](https://github.com/skywinder/Github-Changelog-Generator)。（我是这个项目的作者）

它从标签和合并的拉取请求生成更改日志。该脚本还支持 GitHub 问题。

此更改日志是由此脚本生成的。**[变更日志.md](https://github.com/skywinder/ActionSheetPicker-3.0/blob/master/CHANGELOG.md)**

例子：

> # 变更日志
> 
> ## [1.2.5](https://github.com/skywinder/Github-Changelog-Generator/tree/1.2.5) (2015-01-15)
> 
> [完整的变更日志](https://github.com/skywinder/Github-Changelog-Generator/compare/1.2.4...1.2.5)
> 
> **实施的增强功能：**
> 
> *   使用里程碑指定修复了哪个版本的错误[#22](https://github.com/skywinder/Github-Changelog-Generator/issues/22)
> 
> **修复的错误：**
> 
> *   尝试为没有标签的 repo 生成日志时出错[#32](https://github.com/skywinder/Github-Changelog-Generator/issues/32)
> 
> **合并的拉取请求：**
> 
> *   PrettyPrint 类使用小写的 'pp' [#43](https://github.com/skywinder/Github-Changelog-Generator/pull/43) ( [schwing](https://github.com/schwing) )
>     
>     
> *   通过命令行选项支持企业 github [#42](https://github.com/skywinder/Github-Changelog-Generator/pull/42) ( [glenlovett](https://github.com/glenlovett) )

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-27T15:36:04.343

这不是专门针对 Github 的，但是通过 Git，您可以通过漂亮的打印运行日志以生成更改日志样式的 html 页面。

来自[https://coderwall.com/p/5cv5lg](https://coderwall.com/p/5cv5lg)

```
git log v2.1.0...v2.1.1 --pretty=format:'<li> <a href="http://github.com/jerel/<project>/commit/%H">view commit &bull;</a> %s</li> ' --reverse | grep "#changelog" 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-01-17T15:55:57.080

您可以使用[GitHub API](http://developer.github.com/v3/)获取与给定里程碑相关的问题列表。例如：

```
curl https://api.github.com/repos/<user>/<project>/issues\?milestone\=1\&state\=closed 
```

将`<user>`和替换`<project>`为用户名和项目，这将返回一个包含 id 的里程碑所有已关闭问题的 json 列表`1`。然后，例如，您可以使用脚本来提取您感兴趣的信息。这是一个将问题列表打印为重组文本的 python 示例：

```
import json

with open("issues.json") as of:
    data = json.load(of)

for issue in data:
    t = issue['title']
    n = issue['number']
    url = issue['html_url']
    print "* %s [`Issue %s <%s>`_]" % (t, n, url) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-03-01T19:36:15.837

看看以下工具是否会为你做[github-changes](https://github.com/lalitkapoor/github-changes)。

披露：我是该工具的作者。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-10-23T01:38:45.020

我们创建了一个开源项目来从给定日期时间以来关闭的 github 问题列表中生成更改日志。它在这里可用：[https ://github.com/piwik/github-changelog-generator](https://github.com/piwik/github-changelog-generator)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-19T21:07:11.740

不直接通过 GitHub：这将是一种你可以放置的钩子，它基于*你的*项目可能遵循的命名约定或注释约定。
即使使用问题标题也不总是生成有意义的更改日志的可靠方法，除非您在需要时查看和编辑项目的每个问题标题。

换句话说，它非常依赖于您管理项目的方式，并且不容易推广到*所有*GitHub 存储库。
我在一个非常相似的问题“[在 Github 上发布项目版本（二进制/源包）？](https://stackoverflow.com/questions/14916492/publish-a-project-release-binary-source-packages-on-github/14916525#14916525) ”中说了这么多。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-09-08T18:30:40.063

除了第三方解决方案（或类似 GitHub Action [`generate-changelog`](https://github.com/marketplace/actions/generate-changelog)）之外，您可能很快会在 2021 年第三季度[拥有来自 GitHub 的原生功能](https://github.com/github/roadmap/issues/247)：

> 软件生命周期中最重要的部分之一就是发布您的代码供他人使用。
> 
> GitHub Releases 将通过提供引人注目的自动发布说明，让这一切变得更加容易。
> 创建 Release 时，您可以单击按钮自动生成 Release Notes。
> 如果您想要更自定义的内容，您可以使用 REST API 来获取生成的发布说明并将它们集成到您现有的发布流程中。
> 
> 我们还希望确保这些发行说明在维护者共享它们时看起来很棒，并使它们更容易被发现。我们对版本进行了彻底的重新设计，使项目公告看起来令人惊叹。
> 
> 我们在提要中显示这些版本以增加发现。
> 
> 我们还在改进发布的开放图形数据，因此当它们在 GitHub 平台上共享时看起来同样出色。
> 
> ### 预期结果
> 
> 我们的首要目标是让维护人员轻松创建出色的发行说明，以便更多人可以发现维护人员正在做的令人惊叹的工作。
> 
> 用最少的努力，许多项目将能够从详细的发行说明中受益。
> 
> 对于在发布说明中投入更多时间来编写社论内容的维护人员来说，预期的结果是我们可以腾出他们目前花费在维护自定义基础架构和编译变更日志上的时间，以便他们可以专注于为客户提供最重要的高质量内容编辑的内容。
> 
> 我们的另一个目标是确保发布说明看起来很棒，并且是维护者和开发人员乐于阅读和分享的内容。
> 
> ### 它将如何运作？
> 
> *   新的 Releases UI 将能够通过功能预览启用
> *   发布创建 UI 中的一个新按钮将能够被按下以从任何标签生成发布说明
> *   生成的注释将能够通过`.github/release.yml`
> *   新的 REST API 将允许客户在自己方便的时候生成注释，以进一步自动化和自定义 GitHub 操作的体验。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-06-24T18:49:56.853

我最近为此帮助构建了一个 jQuery 插件，它使用 GitHub 问题将应用程序更新直接传达给用户。可以在这里找到回购[https://github.com/uberVU/github-changelog](https://github.com/uberVU/github-changelog)

用法很简单：

```
$(function() {
  var $demoChangelog = $('.demo-changelog');

  //call the plugin on a dom none
  $demoChangelog.changelog({
    //give it a repo to monitor
    githubRepo: 'uberVU/github-changelog-playground',
  });

  //manually check for new closed issues
  $('.demo-button').on('click', function(e) {
    e.stopPropagation();
    $demoChangelog.changelog('checkForUpdates');
  });
}); 
```

# python - Python 库 IP2location 回溯

> ID：14960676
> 
> 赞同：1
> 
> 时间：2013-02-19T15:05:58.707
> 
> 标签：python, linux

我在安装这个库时遇到问题。

以下是网站官方指南：

*   在此处下载 IP2Location C 库。

*   解压 C 库。

*   `tar ip2location-c-x.x.x.tar.gz`

*   下载并解压 Python 库。

*   `tar ip2location-python-x.x.x.tar.gz`

*   进入工作目录。

*   `cd ip2location-python-x.x.x`

*   编辑`setup.py`以指向`library_dirs`并`include_dirs`指向 IP2Location C 库文件夹。

*   开始编译。

*   `python setup.py build && python setup.py install`

所以我将两者都移入`/home/usr/ip2loc`目录并运行`tar -zxvf`，然后移入 C 目录。从那里我按照自述文件安装并开始工作。然后我转到 python 目录，不知道如何/在哪里链接 setup.py。那是我目前的问题。

我知道我需要改变路径，`library_dirs`但`include_dirs`我不知道在哪里链接它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:14:35.243

`easy_install`invokes `setup.py`，它将尊重它尝试安装的发行版中的 setup.cfg 文件。

添加以下内容`setup.cfg`

```
[build_ext]
include_dirs = /path/to/headers
library_dirs = /path/to/libs 
```

[如何设置.cfg](http://docs.python.org/2/distutils/configfile.html)

# android - Sqlite 数据库不适用于我的 Android 应用程序

> ID：14960679
> 
> 赞同：0
> 
> 时间：2013-02-19T15:06:03.220
> 
> 标签：android, android-sqlite

我有一个不适用于我的应用程序的现有 Sqlite 数据库。谁能知道如何帮助我？此外，我只用一张表制作了一个小测试 .db 文件，它工作正常。认为我发布图片的大数据库有问题，但我不确定是什么。

我已经发布了数据库外观的图片，如果您需要更多屏幕截图等，请询问。

[http://tinypic.com/r/35arg38/6](http://tinypic.com/r/35arg38/6)

这是 onCreate：

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        TextView contentLog = (TextView) findViewById(R.id.content_log);

        // Create the database
        DataBaseHelper myDbHelper = new DataBaseHelper(
                this.getApplicationContext());
        myDbHelper = new DataBaseHelper(this);

        try {
            myDbHelper.createDataBase();
            contentLog.append("Database Created\n");
        } catch (IOException ioe) {
            throw new Error("Unable to create database");
        }

        // Open the database
        try {

            myDbHelper.openDataBase();
            contentLog.append("Database Opened\n");
        } catch (SQLException sqle) {
            sqle.printStackTrace();
        }

        // Get the readable version
        SQLiteDatabase db = myDbHelper.getReadableDatabase();
        contentLog.append("Get the readable database\n");

        // Make a select
        Cursor cur = db.rawQuery(
                "SELECT libelle FROM detail_verbe ORDER BY libelle ASC;", null);

        cur.moveToPosition(0);
        Log.v(TAG, "Nb Col:" + cur.getColumnCount());
        Log.v(TAG, "Nb Records:" + cur.getCount());
        cur.close();
        contentLog.append("Select:\t" + cur.getColumnCount() + " cols, "
                + cur.getCount() + " rows\n");

        // Make an insert
        ContentValues values = new ContentValues();
        values.put("libelle", "Serval");
        values.put("single_present", "Cat");
        long servalCatID = db.insert("detail_verbe", null, values);
        Log.v(TAG, "Serval Cat Inserted @: " + servalCatID);
        contentLog.append("Insert @ \t" + servalCatID + "\n");

        // Check insert
        cur = db.rawQuery(
                "SELECT libelle FROM detail_verbe ORDER BY libelle ASC;", null);

        cur.moveToPosition(0);
        Log.v(TAG, "Nb Col:" + cur.getColumnCount());
        Log.v(TAG, "Nb Records:" + cur.getCount());
        cur.close();
        contentLog.append("Select:\t" + cur.getColumnCount() + " cols, "
                + cur.getCount() + " rows\n");

        // dumb
        cur = db.rawQuery(
                "SELECT libelle FROM detail_verbe ORDER BY libelle ASC;",
                null);
        contentLog.append("\nDUMP\n");
        int i = 0;
        cur.moveToFirst();
        while (cur.isAfterLast() == false) {
            contentLog.append("(" + i++ + ")\t\t" + cur.getString(0) + "\t"
                    + cur.getString(1) + "\n");
            cur.moveToNext();
        }

        cur.moveToPosition(0);

        // Close
        myDbHelper.close();
        contentLog.append("Database closed.");

        // YEAH
    } 
```

这是堆栈跟踪

```
 02-19 15:19:07.265: V/ExtDB(8663): Nb Col:1 
02-19 15:19:07.269: V/ExtDB(8663): Nb Records:13 
02-19 15:19:07.308: V/ExtDB(8663): Serval Cat Inserted @: 14 
02-19 15:19:07.308: V/ExtDB(8663): Nb Col:1 
02-19 15:19:07.312: V/ExtDB(8663): Nb Records:14 
02-19 15:19:07.312: E/CursorWindow(8663): Failed to read row 0, column 1 from a CursorWindow which has 14 rows, 1 columns. 
02-19 15:19:07.320: D/AndroidRuntime(8663): Shutting down VM 02-19 15:19:07.320: W/dalvikvm(8663): threadid=1: thread exiting with uncaught exception (group=0x41856300) 
02-19 15:19:07.363: E/AndroidRuntime(8663): FATAL EXCEPTION: main 
02-19 15:19:07.363: E/AndroidRuntime(8663): java.lang.RuntimeException: Unable to start activity ComponentInfo{fr.stackr.android.externaldb/fr.stackr.android.externaldb.ExternalDBActivity}: java.lang.IllegalStateException: Couldn't read row 0, col 1 from CursorWindow. Make sure the Cursor is initialized correctly before accessing data from it. 
02-19 15:19:07.363: E/AndroidRuntime(8663): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059) 
02-19 15:19:07.363: E/AndroidRuntime(8663): at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084) 
02-19 15:19:07.363: E/AndroidRuntime(8663): at android.app.ActivityThread.access$600(ActivityThread.java:130) 
02-19 15:19:07.363: E/AndroidRuntime(8663): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195) 
02-19 15:19:07.363: E/AndroidRuntime(8663): at android.os.Handler.dispatchMessage(Handler.java:99) 
02-19 15:19:07.363: E/AndroidRuntime(8663): at android.os.Looper.loop(Looper.java:137) 02-19 15:19:07.363: E/AndroidRuntime(8663): at android.app.ActivityThread.main(ActivityThread.java:4745) 
02-19 15:19:07.363: E/AndroidRuntime(8663): at java.lang.reflect.Method.invokeNative(Native Method) 
02-19 15:19:07.363: E/AndroidRuntime(8663): at java.lang.reflect.Method.invoke(Method.java:511) 
02-19 15:19:07.363: E/AndroidRuntime(8663): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786) 
02-19 15:19:07.363: E/AndroidRuntime(8663): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553) 
02-19 15:19:07.363: E/AndroidRuntime(8663): at dalvik.system.NativeStart.main(Native Method) 02-19 15:19:07.363: E/AndroidRuntime(8663): Caused by: java.lang.IllegalStateException: Couldn't read row 0, col 1 from CursorWindow. Make sure the Cursor is initialized correctly before accessing data from it. 
02-19 15:19:07.363: E/AndroidRuntime(8663): at android.database.CursorWindow.nativeGetString(Native Method)
02-19 15:19:07.363: E/AndroidRuntime(8663): at android.database.CursorWindow.getString(CursorWindow.java:434) 
02-19 15:19:07.363: E/AndroidRuntime(8663): at android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:51) 
02-19 15:19:07.363: E/AndroidRuntime(8663): at fr.stackr.android.externaldb.ExternalDBActivity.onCreate(ExternalDBActivity.java:88) 
02-19 15:19:07.363: E/AndroidRuntime(8663): at android.app.Activity.performCreate(Activity.java:5008) 
02-19 15:19:07.363: E/AndroidRuntime(8663): at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079) 
02-19 15:19:07.363: E/AndroidRuntime(8663): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
02-19 15:19:07.363: E/AndroidRuntime(8663): ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:40:51.523

你这里有问题：

```
cur.moveToPosition(0);
    Log.v(TAG, "Nb Col:" + cur.getColumnCount());
    Log.v(TAG, "Nb Records:" + cur.getCount());
    cur.close(); //cursor is closed
    //After closing, you call cur.get..() fix that
    contentLog.append("Select:\t" + cur.getColumnCount() + " cols, "
            + cur.getCount() + " rows\n"); 
```

如果您将重新查询（之后检查插入），则无需在此处调用 close() ，直到您知道您已完成游标，也许在关闭数据库之后将是一个不错的选择。

# c# - 将消息从 Windows 服务发送到同一台计算机上的桌面应用程序

> ID：14960682
> 
> 赞同：0
> 
> 时间：2013-02-19T15:06:13.430
> 
> 标签：c#, winforms, wcf, windows-services, ipc

我需要一些关于这样的场景的建议：我们有一个 Windows 服务，定期轮询数据库，比如每五秒一次。我们还有一个桌面应用程序与该服务在**同一**台机器上运行。当服务获取数据时，我们需要通知桌面应用程序。根据某些条件（如果条件为真则它会通知，否则它不会做任何事情）。在桌面应用程序中。部分，当收到新通知时，我们将执行一些操作，如状态更新、背景颜色更改等。

我为这样的功能做了一些研究，似乎我需要使用 WCF 回调，托管在 Windows 服务中。但我不确定。这是正确的方法吗？有没有更简单的方法来做到这一点？任何例子都将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:11:20.390

你在正确的轨道上。

在您的 Windows 服务中托管 WCF 服务非常简单，并且它带来了额外的好处，即您的客户端不必**在**同一台机器上。

由于您拥有连接的两端并且它们都是 .NET，因此我建议您使用双工 net.tcp 绑定。

# ruby-on-rails - 存储地理路线

> ID：14960683
> 
> 赞同：1
> 
> 时间：2013-02-19T15:06:15.880
> 
> 标签：ruby-on-rails, ruby, geospatial, postgis, rails-postgresql

我正计划构建一个 Rails 应用程序，该应用程序应该存储有关地理路线的数据（可能是数百万）。路线从智能手机记录或在网络界面中手动“绘制”。

一条路线由多个（最多约 10.000 个）坐标组成，其中包含时间戳、纬度和经度——但也可能包括高度和精度。

存储时，我需要过滤掉“pgs noice”，计算总距离并显示在地图上。

你会建议我如何存储路线数据？

我正在考虑使用 PostgreSQL，并希望将每个 Trip 存储在一行中，以便快速插入和检索（？）。这将需要一个多维数组字段，仅在 Rails 4.0 (?) 中支持。

同时，我一直在查看[PostGIS](http://postgis.net/)和[ActiveRecord Adapter](https://github.com/dazuma/activerecord-postgis-adapter)，但不确定这是否是矫枉过正或者它如何与 PostgreSQL 数组一起工作。

任何投入将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T06:35:20.380

Basically you have two options.

1.  You could use an array of points on PostgreSQL. Arrays in PostgreSQL are relatively complex and it is important to understand arrays and I the primary primitives primarily work on planes, not spheres so you lose spherical trig and the like. For these reasons I don't really recommend this approach unless you are already familiar with both and have specific reasons to choose this one. Of course you could also build your own spherical trig functions if you like.... But why you would when PostGIS is available I don't now.

2.  You can use geography types in PostGIS. These are helpful because you can store very complex multi-lines. PostGIS gives you spherical trig capabilities too. In general the types here are closer to what you are trying to do.

Finally I would recommend look at pgrouting which may give some additional functions you may find helpful.

# objective-c - NSArray 错误访问

> ID：14960685
> 
> 赞同：0
> 
> 时间：2013-02-19T15:06:16.850
> 
> 标签：objective-c, ios4

我正在尝试做一个pickerView，但我的访问权限很差：

这是我的代码

```
-(void) viewWillAppear:(BOOL)animated {
    list = [[NSArray alloc]init];
    [self populateList]
}

-(void) populateList {
    NSString *path = [[NSBundle mainBundle] pathForResource:@"nameoffile" ofType:@"txt"];
    NSString *file = [NSString stringWithContentsOfFile:path encoding:NSUTF8StringEncoding error:NULL];
    list = [file componentsSeparatedByString:@"\n"];
}

 - (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component {
     return (NSString *)[list objectAtIndex:row]; //here I'm getting bad acces
 } 
```

错误是：**“线程 1：EXC_BAD_ACCESS（代码=1，地址=0xa001cc65）”**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:10:16.380

`NSArray`返回的`componentsSeparatedByString:`是自动释放的值，因此您需要保留它。

您应该删除：

```
list = [[NSArray alloc]init]; 
```

并将保留添加到：

```
list = [[file componentsSeparatedByString:@"\n"] retain]; 
```

# file-upload - ICEfaces ace:fileEntry 在 Liferay portlet 中不起作用。有一个需要解释的线索

> ID：14960686
> 
> 赞同：0
> 
> 时间：2013-02-19T15:06:17.487
> 
> 标签：file-upload, liferay-6, icefaces-3

使用 LR 6.1.0-ce-ga1 和 ICEfaces 3.2.0。在我的 xhtml 中有这段代码：

```
 <ace:panel>
    <ace:fileEntry 
        required="true"
        requiredMessage="You may not save if you have not selected a file."
        fileEntryListener="#{profileBean.listener}"
        maxFileCount="1"
        maxFileCountMessage="Select one file, please."
        useSessionSubdir="true"
        immediate="true"
        />
</ace:panel> 
```

首先，立即不起作用。我的 bean 中的监听器永远不会被调用。但这可能不如以下重要。

我在表单上有 h:commandButton。当我单击它时，我看到一个看起来像进度条的开头的东西，就像它会显示文件上传进度一样。以下内容立即涵盖了这一点： ![用户会话已过期](../Images/f8a62d4b162cb5a8515db99deee7e931.png)

这个框通常与 ICEfaces 推送问题有关（ICEfaces 告诉过我）。我将 icepush.jar 添加到 WEB-INF/lib，但它没有帮助。我更喜欢根本不尝试渲染所谓的进度条。

因此，感谢任何人帮助完成此文件上传工作。

PS，我也尝试过 Tomahawk 和普通的 Apache JSF 2.0。我想让 ICEfaces 版本工作，但考虑到我的（基于 Servlet 2.5 的）环境，我对任何工作解决方案都持开放态度。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:38:46.283

我建议您查看[icefaces3-portlet](http://www.liferay.com/community/liferay-projects/liferay-faces/demos#icefaces3-portlet)演示的源代码，因为它显示了如何在 portlet 环境中使用 ace:fileEntry 上传文件。

# c# - 我想为每个字母分配一个值，并希望一个方法相应地返回总和

> ID：14960689
> 
> 赞同：-4
> 
> 时间：2013-02-19T15:06:30.573
> 
> 标签：c#

```
static void Main()
{
    int x = Program.char_value("cat");
    Console.WriteLine(x);
    Console.ReadLine();
}

public static int char_value(string user_input)
{
    char a = 'a';
    char c = 'c';
    char t = 't';
    int user_input_length = user_input.Length;
    int char_value = 0;
    if (user_input == "" && user_input_length <= 5)
    {
        foreach (char z in user_input)
        {
            if (z == a)
            {
                char_value = 1;
            }
            if (z == c)
            {
                char_value += 3;
            }
            if (z == t)
            {
                char_value += 20;
            }
        }
        return char_value;
    }
    return char_value;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:13:03.507

你为什么不简单地将你的转换`char`成一个`int`呢？

```
int sum = 0;
foreach (char z in user_input.ToLower())
    sum += Convert.ToInt32(z) - 96; // ensures that 'a' has value 1, 'b' has value 2, etc.

return sum; 
```

# javascript - html标签的SetAttribute值

> ID：14960691
> 
> 赞同：1
> 
> 时间：2013-02-19T15:06:36.563
> 
> 标签：javascript, selenium-webdriver

我想使用 selenium webdrive 为下面的 html 标签设置属性值。比如说……我想使用带有 Webdriver 的 JavaScript 或简单的 webDriver 脚本来替换 50% 到 70%。

我尝试了很多选项，但这个标签没有属性，只有类。所以请帮助我

```
<Span class="abc">50%</span> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T15:08:27.890

那不是属性值，那是*content*。因此，您需要 Selenium 选项来设置*内容*而不是属性。

你提到了 JavaScript。您可以`span`通过获取对`span`元素的引用并设置其`innerHTML`属性（或访问`Text`它包含的节点并设置其`nodeValue`属性）来设置 JavaScript 中的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T15:13:22.910

最简单的赋值方法`span`是

```
document.getElementsByTagName("span")[0].innerHTML = "70%"; 
```

# image - Hammer.js 捏到缩放不起作用

> ID：14960692
> 
> 赞同：1
> 
> 时间：2013-02-19T15:06:36.880
> 
> 标签：image, hammer.js

**更新：**得到了一个 jsfiddle @ [http://jsfiddle.net/gacDy/7/](http://jsfiddle.net/gacDy/7/)，但是，我什至无法让它正常工作。我会继续努力，但希望它会有所帮助。

我正在使用我正在`Hammer.js`开发的应用程序。现在，我在网上某个地方有一个演示，我用它来弄清楚如何使它工作。对于演示，我有两张图片（我将在下面发布屏幕截图），我正在尝试使用`hammer.js`.

就像现在的情况一样，两张图片都放大了，但第二张放大了第一张图片所在的区域。（见下面的截图）

预缩放图像：

![](../Images/8e717b3bb62f92badcf4a78eb88df827.png)

缩放后的图像：

![](../Images/2f909053232dbf32f12e8c5873a18c54.png)

图像代码：

```
<div id="zoom2">
<img src="Chrysanthemum.jpg" alt="" width="600" height="377" />
</div>
<div id="zoom">
<img src="waldo.jpg" alt="" width="600" height="377" />
</div> 
```

功能等：

```
<div id="debug"></div>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script src="hammer.js"></script>
<script src="jquery.hammer.js"></script>
<script src="jquery.specialevent.hammer.js"></script>
<script>

var debug_el = $("#debug");

// disable the dragging of images on desktop browsers
$("img").bind("dragstart", function() {
    return false;
});

$(function(){
    var zoom = new ZoomView('#zoom','#zoom :first');
});

function ZoomView(container, element) {

    container = $(container).hammer({
        prevent_default: true,
        scale_treshold: 0,
        drag_min_distance: 0
    });

    element = $(element);

    // prefixes
    var vendorPrefixes = ["", "-webkit-", "-moz-", "-o-", "-ms-", "-khtml-"];

    var displayWidth = container.width();
    var displayHeight = container.height();

    //These two constants specify the minimum and maximum zoom
    var MIN_ZOOM = 1;
    var MAX_ZOOM = 5;

    var scaleFactor = 1;
    var previousScaleFactor = 1;

    //These two variables keep track of the X and Y coordinate of the finger when it first
    //touches the screen
    var startX = 0;
    var startY = 0;

    //These two variables keep track of the amount we need to translate the canvas along the X
    //and the Y coordinate
    var translateX = 0;
    var translateY = 0;

    //These two variables keep track of the amount we translated the X and Y coordinates, the last time we
    //panned.
    var previousTranslateX = 0;
    var previousTranslateY = 0;

    //Translate Origin variables

    var tch1 = 0, 
        tch2 = 0, 
        tcX = 0, 
        tcY = 0,
        toX = 0,
        toY = 0,
        cssOrigin;

    var last_drag_event;

    container.bind("transformstart", function(event){
        //We save the initial midpoint of the first two touches to say where our transform origin is.
        tch1 = [event.touches[0].x, event.touches[0].y];
        tch2 = [event.touches[1].x, event.touches[1].y];

        tcX = (tch1[0]+tch2[0])/2;
        tcY = (tch1[1]+tch2[1])/2;

        toX = tcX;
        toY = tcY;

        cssOrigin = toX +"px "+ toY +"px";
    });

    container.bind("transform", function(event) {
        scaleFactor = previousScaleFactor * event.scale;
        scaleFactor = Math.max(MIN_ZOOM, Math.min(scaleFactor, MAX_ZOOM));

        transform(event);
    });

    container.bind("transformend", function(event) {
        previousScaleFactor = scaleFactor;
    });

    container.bind("drag", function(event) {
        cssOrigin = (toX + (toX-event.position.x) / scaleFactor) +"px " +
                    (toY + (toY-event.position.y) / scaleFactor) +"px";

        transform(event);
        last_drag_event = event;
    });

    container.bind("dragend", function(event) {
        toX += ((toX - last_drag_event.position.x) / scaleFactor);
        toY += ((toY - last_drag_event.position.y) / scaleFactor);

        cssOrigin = toX +"px "+ toY +"px";
        transform(event);

        debug_el.text('TX: '+toX+' TY: '+toY);
    });

    function transform(event) {
        //We're going to scale the X and Y coordinates by the same amount
        var cssScale = "scale("+ scaleFactor +")";

        var props = {};
        $(vendorPrefixes).each(function(i, vendor) {
            props[vendor +"transform"] = cssScale;
            props[vendor +"transform-origin"] = cssOrigin;
        });
        element.css(props);

        debug_el.text('TX: '+translateX+' TY: '+translateY+' '+element.css('-webkit-transform-origin'))
    }

}
</script> 
```

-- 我复制了上面的代码，并将对第一个图像的任何引用更改为引用第二个图像，以使第二个图像可缩放。但就像我提到的那样，它无法正常工作。我尝试更改所有变量名称，以防我错过了对可能导致这种重叠的第一张图像的引用，但没有任何帮助。

**编辑：**这也可能是相关的：

```
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<style>
    #zoom {
        height: 377px;
        width: 600px;
        overflow: hidden;
        position:relative;
        background: #eee;
        border: solid 1px #ccc;
    }
</style>
<meta name="viewport2" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<style>
    #zoom2 {
        height: 377px;
        width: 600px;
        overflow: hidden;
        position:static;
        background: #eee;
        border: solid 1px #ccc;
    }
</style> 
```

我只需要帮助弄清楚如何在缩放时防止第二张图像消失在第一张图像中。我会很感激我能得到的任何帮助。谢谢大家。

# ruby - Rails：跳转到实时选择的函数（变量名）

> ID：14960693
> 
> 赞同：0
> 
> 时间：2013-02-19T15:06:40.617
> 
> 标签：ruby, call

我想跳转到一个“导入函数”，它可以是我已经在 lib/import/... 中编写的文件之一。

用户在选择框中选择一个选项，从这个选择中，我想在一个上传的文件上执行特定部分的代码（导入具有不同可能布局的 excel）

我写了这个：

```
# Loading and executing the template chosen by user at step 1
template_path = 'import/'+params[:template]+'/import.rb'
require template_path
Import.action(filename, session, params, current_project) 
```

我有几个 import.rb 文件，每个文件都位于一个单独的目录中。其中之一是：

```
module Import
require 'spreadsheet'

     def Import.action(filepath, session, params, project)
            # My import code
     end
 end 
```

问题是 Rails 总是从lib/firstdirectory/import.rb**的第一个目录调用 action 方法**

我从来没有到达位于 lib/otherdirectory/import.rb 中的另一个 import.rb 文件

*   有没有更好的方法来实时执行“跳转到”功能？
*   为什么 Rails 总是跳转到相同的功能？

编辑 ：

我的 application.rb 配置文件包含

```
config.autoload_paths += Dir["#{config.root}/lib/import/**/"] 
```

编辑 2：

```
# lib/importer/importer.rb
module Importer
  class Base
    # Whatever common logic the import.rb files have.
  end
end

#lib/importer/Import_test/import_test.rb    Note the Big letter for the directory (constant)
module Importer
  class Import_test < Base
    def self.import
        logger.debug(">>>>>>>>>>>>>  special function Test <<<<<<<<<<<<<<<<<<<<")   
    end
  end
end

# Call from controller
logger.debug "------------------>> "+params[:template]
raise "Invalid input" unless params[:template].constantize.superclass == Importer::Base
params[:template].constantize.import() 
```

params[:template] 返回字符串 Importer::Import_test（大写字母）

我收到错误：NoMethodError（Importer::Import_test:Module 的未定义方法“超类”）：app/controllers/import_controller.rb:57:in `step2'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:57:42.200

您使用第一个目录条目的代码是有意义的。当您引用一个尚未加载其定义的常量时，Rails 会检查`autoload_paths`相应文件的条目。由于您已经`import.rb`在第一个目录中拥有该文件，因此您的应用程序会加载该文件。

恕我直言，更好的设计将是：

```
config.autoload_paths += ["#{config.root}/lib"]

# lib/importer.rb
module Importer
  class Base
    # Whatever common logic the import.rb files have.
  end
end

# lib/importer/foo.rb
module Importer
  class Foo < Base
    def self.import
      # ...
    end
  end
end

# lib/importer/bar.rb
module Importer
  class Bar < Base
    def self.import
      # ...
    end
  end
end

# In your view, a way to identify these:
select_tag :layout, options_for_select({
  "Foo" => "Importer::Foo",
  "Bar" => "Importer::Bar"
})

# In your controller:
raise "Invalid input" unless params[:layout].constantize.superclass == Importer::Base
params[:layout].constantize.import( ... ) 
```

**更新**：

Rails 以这种方式查找文件：假设您要使用`FooBar::Baz`. 如果还`FooBar`没有，它将加载`lib/foo_bar.rb`并且应该有一些东西。接下来，它将尝试访问`FooBar::Baz`. 只有当它还没有（已经在加载之后`lib/foo_bar.rb`）时，它才会加载`lib/foo_bar/baz.rb`并且应该有一些东西在那里。

如果您想自己使用`autoload_paths`而不需要 ruby​​ 文件，请使用 Rails 可以轻松更改为下划线的正确驼峰式大小写的约定。例如，使用不带下划线的驼峰式 ImporterTest 和 have`lib/importer/importer_test.rb`这样框架将能够找到正确的文件和您的定义。

：-） 祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T15:30:13.273

还有很多更好的方法。我建议对执行操作的对象使用模板名称的哈希值。导入所有导入器，并构造散列。比使用哈希来获取函数并执行它。

# android - 为android中的每个任务（方法）使用处理程序

> ID：14960695
> 
> 赞同：0
> 
> 时间：2013-02-19T15:06:45.717
> 
> 标签：android, multithreading

您好，我是 android 和 android 线程的新手，所以想知道

我们如何使用更多数量的线程来执行每个任务或方法，以便当用户单击任何 UI 组件时它会影响性能，而对处理程序`thread`和`asynctask`工作方式知之甚少。但是我们如何运行内部的每个方法`asynctask`如此做操作，意味着用户也可以做其他操作。

在应用程序中

*   我有麦克风录音。
*   接下来显示进度条。
*   下一个显示带有一些图像的画廊以及对该图片的设置效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:28:33.290

使用`AsyncTask`并确保根据需要实施这些。你提到了在用户做某事时在后台做某事的想法，所以我猜你会想要改变 UI。

查看这些链接以了解更多来自 Android 的详细信息。它们覆盖`Runnable`，`AsyncTask`并且`Handler`

*   它们的概述[http://developer.android.com/guide/components/processes-and-threads.html](http://developer.android.com/guide/components/processes-and-threads.html)
*   AsyncTask 示例[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)
*   旧但相关的*无痛线程* [http://android-developers.blogspot.com/2009/05/painless-threading.html](http://android-developers.blogspot.com/2009/05/painless-threading.html)
*   另一个更复杂的例子[http://developer.android.com/training/displaying-bitmaps/process-bitmap.html](http://developer.android.com/training/displaying-bitmaps/process-bitmap.html)

我通常不会在此处粘贴完整的示例，但我很难找到一个我长期以来一直满意的示例并帮助您和其他人，这是我的首选方法。我通常使用`AsyncTask`一个回调来`Activity`启动任务。

在这个例子中，我假装用户触发`onClick(...)`了一个按钮，但可能是任何触发对`Activity`.

```
// Within your Activity, call a custom AsyncTask such as MyTask
public class MyActivity extends Activity implements View.OnClickListener, MyTask.OnTaskComplete {
    //...

    public void onClick(View v) {
        // For example, thet user clicked a button
        // get data via your task

        // using `this` will tell the MyTask object to use this Activty
        // for the listener
        MyTask task = new MyTask(this);
        task.execute(); // data returned in callback below
    }

    public void onTaskComplete(MyObject obj) {
        // After the AsyncTask completes, it calls this callback.
        // use your data here
        mTextBox.setText(obj.getName);
    }
} 
```

可以通过多种方式从任务中获取数据，但我更喜欢`OnTaskComplete`上面实现并在下面触发的接口。

这里的主要思想是我经常想远离内部类，因为它们变得更加复杂。主要是个人喜好，但它允许我在一个类之外分离可重用的任务。

```
public class MyTask extends AsyncTask<Void, Void, MyObject> {

    public static interface OnTaskComplete {
        public abstract void onTaskComplete(MyObject obj);
    }
    static final String TAG = "MyTask";

    private OnTaskComplete mListener;

    public MyTask(OnTaskComplete listener) {
        Log.d(TAG, "new MyTask");
        if (listener == null)
            throw new NullPointerException("Listener may not be null");

        this.mListener = listener;
    }

    @Override
    protected MyObject doInBackground(Void... unused) {
        Log.d(TAG, "doInBackground");
        // do background tasks

        MyObbject obj = new MyObject();
        // Do long running tasks here to not block the UI
        obj.populateData();
        return 
    }

    @Override
    protected void onPostExecute(MyObject obj) {
        Log.d(TAG, "onPostExecute");
        this.mListener.onTaskComplete(obj);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T15:09:29.077

推荐的方法是使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)来处理长时间运行的任务。因此，并非所有内容都需要使用 AsyncTasks 运行，因为上下文切换可能会影响性能。

至于 AsyncTasks 是如何工作的，请阅读文档。

# functional-programming - ocaml编译过程的逻辑

> ID：14960697
> 
> 赞同：2
> 
> 时间：2013-02-19T15:06:47.503
> 
> 标签：functional-programming, ocaml

我写了一个小项目`OCaml`。

我有两个文件夹：

`./myUnionFind`. 里面有一个文件`myUnionFind.ml`。

`./percolation`. 里面有两个文件：`myPercolation.ml`和`percolation_stats.ml`.

* * *

`myUnionFind.ml`作为一个模块工作。

`myPercolation.ml`也可以作为模块工作，但它`MyUnionFind`使用`myUnionFind.ml`.

`percolation_stats.ml`使用`myPercolation.ml`.

最重要的是，我还使用`Batteries`.

* * *

我想将它们全部编译并获得一个可执行文件`run`。

但是**怎么做？**

我尝试了以下方法：

里面的文件夹`./percolation`，我做了`ocamlfind ocamlc -package batteries -linkpkg ../myUnionFind/myUnionFind.ml myPercolation.ml percolation_stats.ml -o run`

它失败了，并说`File "myPercolation.ml", line 1, characters 0-16: Error: Unbound module MyUnionFind`，但我确实包含了那个文件夹`../myUnionFind`，对吧？

* * *

另外，如果我只想编译`./myUnionFind/myUnionFind.ml`一次，我怎么能这样做，而不是每次都一次`myUnionFind.ml`又一次地编译？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:55:21.297

在里面`myUnionFind`，你应该编译`myUnionfind.ml`成一个编译单元：

```
cd myUnionFind
ocamlc -c myUnionFind.ml 
```

这将生成`myUnionFind.cmo`，它存储已编译的实现，以及`myUnionFind.cmi`，它存储已编译的*接口*。使用的其他模块`MyUnionFind`将需要访问`cmi`at 类型检查类型。

在 percolation 中，您可以通过执行将 myPercolation.ml 编译为模块

cd 渗透 ocamlc -I ../myUnionFind -c myPercolation.ml

同样，您会同时获得 .cmo 和 .cmi。请注意，编译器已经在搜索路径中自动查找了 myUnionFind.cmi，并且由于该`-I`选项而找到了它。

然后您可以编译`percolation_stats`（依赖于之前的两个编译单元）

```
ocamlc -I ../myUnionFind -c percolation_stats.ml 
```

您最终将生成的三个 .cmo 链接在一起以构建可执行文件：

```
ocamlc ../myUnionFind.cmo myPercolation.cmo percolation_stats.cmo -o run 
```

（如果您使用电池，请用 包装每个命令`ocamlfind ocamlc -package batteries`，但只用 包装链接命令`linkpkg`）。

为了使这个过程更简单：

*   `ocamlbuild`擅长查找和编译当前项目的所有文件以生成可执行文件。在`percolation`目录中，`ocamlbuild percolation_stats.byte`可以生成包含所有内容的可执行文件

*   但是如果你想`myUnionFind`用作外部库，最好的办法是安装它`findlib`，以便于从 中查找和指定`percolation`；有关如何创建 findlib 包的信息（非常简单），请参阅[这个较旧的答案](https://stackoverflow.com/a/8665591/298143)

*   一旦 myUnionFind 是一个 findlib 包，单个命令`ocamlbuild -use-ocamlfind -pkgs batteries,my-union-find percolation_stats.byte`（或`.native`）应该足以获得可执行文件

# mysql - 如何将sql请求与另一个表中的数据结合起来

> ID：14960698
> 
> 赞同：0
> 
> 时间：2013-02-19T15:06:48.150
> 
> 标签：mysql, sql

我有两个表，第一个是“users_counts”

```
 id         int(11) AUTO_INCREMENT
 name       varchar(250) 
```

我有第二张表“counts_data”

```
 id       int(11) AUTO_INCREMENT
 id_user  int(11) 
 count    int(11) 
 date     datetime 
```

我想从第一个表中选择所有记录并从第二个表中获取一些数据，然后我想合并它们。我想创建临时（对于一个请求）列，其中在第二个表中按日期顺序收集最后一个计数，在第二个列中，在第二个表中按日期顺序收集倒数第二个计数。

```
INSERT INTO `users_counts` (`id`,`name`) VALUES ('1','John');
INSERT INTO `users_counts` (`id`,`name`) VALUES ('2','Michael');
INSERT INTO `users_counts` (`id`,`name`) VALUES ('3','Den');

INSERT INTO `counts_data` (`id`,`id_user`, `count`, `date`) VALUES ('1','1', '200', '2012.09.09');
INSERT INTO `counts_data` (`id`,`id_user`, `count`, `date`) VALUES ('2','1', '212', '2012.09.01');
INSERT INTO `counts_data` (`id`,`id_user`, `count`, `date`) VALUES ('3','2', '20', '2012.01.09');
INSERT INTO `counts_data` (`id`,`id_user`, `count`, `date`) VALUES ('4','3', '210', '2012.02.09');
INSERT INTO `counts_data` (`id`,`id_user`, `count`, `date`) VALUES ('5','3', '2033', '2012.03.09');
INSERT INTO `counts_data` (`id`,`id_user`, `count`, `date`) VALUES ('6','3', '1', '2012.04.09'); 
```

最后，在一个请求之后，我想得到这样的东西

```
id  name      count  count_before
1   John      200    212
2   Michael   20     0
3   Den       1      2033 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:19:12.543

另一种可能的方法是：

```
select uc.id,
       uc.name,
       (select count 
          from counts_data cd 
          where cd.id_user = uc.id
          order by date desc limit 1) as count,
       ifnull((select count 
                 from counts_data cd 
                 where cd.id_user = uc.id 
                 order by date desc limit 1 offset 1),0) as count_before
from users_counts uc; 
```

由于每行/记录只需要 counts_data 中的一个值，因此可以在 mySQL 中使用内联查询

[SQL小提琴](http://www.sqlfiddle.com/#!2/f4dd5/9)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T15:11:26.187

```
select  uc.id
,       uc.name
,       cd1.count
,       cd3.count as count_before
from    users_counts uc
left join
        counts_data cd1
on      cd1.id_user = uc.id
        and cd.date = 
        (
        select  max(date)
        from    counts_data cd2
        where   cd2.id_user = uc.id_user
        )
left join
        counts_data cd3
on      cd3.id_user = uc.id
        and cd.date = 
        (
        select  max(date)
        from    counts_data cd4
        where   cd4.id_user = uc.id_user
                and cd4.date <> cd1.date
        ) 
```

# html - 为什么单元格中内容的位置取决于其他单元格

> ID：14960702
> 
> 赞同：0
> 
> 时间：2013-02-19T15:06:55.377
> 
> 标签：html, css

```
<section id="main_section">
<section id="wraper">

 <section id="content_left">
  <article class="featured_news">
   <header>
    <img src="fonti.jpg" />
   </header>
   <h3>Lorem Ipsum! Ojczyzno moja ty jak słońce</h3>
   <p>Lorem Ipsum ojczyzno moja ty jesteś jak zdrowie ile trzeba cię cenić ten tylko się dowie kto cię stracił.</p>
  </article>
 </section>

 <section id="content_middle">
  <section class="news_row">
   <article><h3>NEWS 1</h3></article>
   <article><h3>NEWS 2</h3></article>
   <article><h3>NEWS 3</h3></article>
  </section>
 </section>

 <section id="content_right">
  <h3>TEST</h3>
 </section>

</section>
</section>

#main_section {
    display: table;
    width: 95%;
    margin-left: auto;
    margin-right: auto;
    background-color: white;
}

#wraper {
    display: table-row;
}

#content_left, #content_middle, #content_right {
    display: table-cell;
    width: 33%;
} 
```

我的问题是为什么中间和右侧单元格中的内容位置取决于左侧单元格中 img 的高度？当我删除 img 时，一切都很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:12:44.887

如果你在谈论*垂直*位置，你可以这样做：

[http://jsfiddle.net/SF9LM/6/](http://jsfiddle.net/SF9LM/6/)

```
#content_left, #content_middle, #content_right {vertical-align: top;} 
```

原因是表格单元格默认对齐“中间”。通过添加图像，您可以拉伸第一个单元格的高度，并且所有其他单元格都会效仿。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T15:10:51.780

这是因为您制作了包装器`display: table;`和内容部分，您可以通过制作包装器和可以解决您问题的部分`display: table-row;`来获得类似的外观。同一行内的表格划分都将成为最高的高度。`display: block``float: left;`

[小提琴](http://jsfiddle.net/SF9LM/7/)，谢谢@isherwood。

# c# - 如何在c#中打印具有XML文件节点的根属性的每个元素

> ID：14960709
> 
> 赞同：0
> 
> 时间：2013-02-19T15:07:15.117
> 
> 标签：c#, xml

我正在尝试使用“Identity”的属性值打印根节点“Identity”的每个元素（参考）。

例如：

我要打印

```
00002C8DGPDDTZ5D, S2513.268898, John S2613.269022, JOHN 
```

然后在一行中

```
000388MRUO7TRSBH, S2513.285402,Doe, S2613.285476Doe 
```

在另一个等等。

如果我没有说清楚，请告诉我。

谢谢

XML 文件

```
<Identity Identifier="00002C8DGPDDTZ5D" CDate="2013-02-07">
<References>
    <Reference>
        <Value>A^S2513.268898|B^JOHN</Value>
        <Traces/>
    </Reference>
    <Reference>
        <Value>A^S2613.269022|B^JOHN</Value>
        <Traces/>
    </Reference>
</References>
 <Identity Identifier="000388MRUO7TRSBH" CDate="2013-02-07">
<References>
    <Reference>
        <Value>A^S2513.285402|B^Doe</Value>
        <Traces/>
    </Reference>
    <Reference>
        <Value>A^S2613.285476|B^Doe</Value>
        <Traces/>
    </Reference>
</References> 
```

还，

我尝试了以下代码。

```
 XmlNodeList OysterID = doc.GetElementsByTagName("Identity");  
     XmlNodeList Reference = doc.GetElementsByTagName("Value");
 for (int j = 1; j <= i; j++)

                    s[j] = Reference[j].InnerText; 
```

我想要类似的东西。我想要一个 for 循环，它将使用根属性值打印根的每个元素。我无法思考如何获得每个元素的根属性值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:34:50.600

这样的事情怎么样

```
 foreach (XmlNode element in xmlDocument.GetElementsByTagName("Identity"))
        {
            string output = element.Attributes[0].Value;
            foreach (XmlNode xmlNode in element.ChildNodes)
            {
                foreach (XmlNode reference in xmlNode.ChildNodes)
                {
                    output += reference.InnerText;
                }
            }
            //Output here should be onelined.. 
        } 
```

输出不会完全按照您的要求进行格式化，因此需要进行一些格式化。但是你会在一行上有它:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T15:30:58.513

试试这个。

```
 string xml = @"<Identity Identifier=""00002C8DGPDDTZ5D"" CDate=""2013-02-07"">      <References>        <Reference>             <Value>A^S2513.268898|B^JOHN</Value>            <Traces/>       </Reference>        <Reference>             <Value>A^S2613.269022|B^JOHN</Value>            <Traces/>       </Reference>    </References>   <Identity Identifier=""000388MRUO7TRSBH"" CDate=""2013-02-07"">     </Identity>     <References>        <Reference>             <Value>A^S2513.285402|B^Doe</Value>             <Traces/>       </Reference>        <Reference>             <Value>A^S2613.285476|B^Doe</Value>             <Traces/>       </Reference>    </References>  </Identity>    ";
        XDocument xmlDoc = XDocument.Parse(xml);
        IEnumerable<XElement> entries = xmlDoc.Descendants("Reference");
        foreach (XElement entry in entries) {
            string temp = entry.Value;
        } 
```

# sql-server - ReportViewer 给出“指定参数超出范围”错误

> ID：14960710
> 
> 赞同：0
> 
> 时间：2013-02-19T15:07:16.693
> 
> 标签：sql-server, visual-studio, reporting-services, reportingservices-2005

我有一个在 2005 年创建的简单条形图，我已将其上传到 2005 报告服务，并使用 ReportViewer 控件将其放置在我的 Visual Studio 2005 网页中。

如果页面上没有报表查看器控制，该网页可以正常工作。

在我的网页中，我添加了以下代码：

```
<%@ Register Assembly="Microsoft.ReportViewer.WebForms, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"
Namespace="Microsoft.Reporting.WebForms" TagPrefix="rsweb" %> 
```

我在这里有报告查看器：

```
<rsweb:reportviewer id="rptViewer11" runat="server" processingmode="Remote" showfindcontrols="False" height="246px" width="380px" showtoolbar="False" sizetoreportcontent="True">
      <ServerReport  reportpath="/foldername" reportserverurl="http://server/" />
</rsweb:reportviewer> 
```

该报告在报告服务中运行良好，并且在它启动并生成条形图的网页中运行良好。它还在 SSRS 2005 中设置了 90 秒的刷新率。

我遇到的问题是间歇性地产生一个错误消息框，指出：

> 指定的参数超出了有效值的范围。

值得注意的是，条形图是由存储过程生成的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:57:18.440

我已经设法完成了这个查询。我已经摆脱了网页中的报表查看器，并创建了一个包含报表查看器的控件。然后，此控件已添加到我的网页中，并且报表呈现良好。我设置的刷新率也比以前更快地刷新图像/报告。

# visual-studio-2010 - 如何使 Visual Studio 2010 在调试模式下为每个未处理的异常只停止一次？

> ID：14960711
> 
> 赞同：0
> 
> 时间：2013-02-19T15:07:17.927
> 
> 标签：visual-studio-2010, debugging, exception

我已经检查了“停止抛出的异常”和“停止用户未处理的异常”复选框。

当引发未处理的异常时，Visual Studio 会停止并显示异常消息。这是设计使然。

但是，如果我然后按 F5 继续，Visual Studio 会再次停止，在同一行，显示相同的异常消息。我必须再次按 F5 才能继续。

请注意，如果我只选中“停止用户未处理的异常”，Visual Studio 就会停止一次（但当然，我需要同时选中这两个复选框......）。

这开始很烦人。有什么办法可以改变这个？谢谢 ：）

# c# - 如何在asp.net mvc中处理'路径'/index'的控制器未找到或未实现IController'？

> ID：14960714
> 
> 赞同：2
> 
> 时间：2013-02-19T15:07:34.757
> 
> 标签：c#, asp.net-mvc-3, exception-handling

我正在开发 Asp.net mvc3 应用程序。对于异常处理，我在 global.asax 中使用以下代码

```
 protected void Application_Error(object sender, EventArgs e)
    {
        Exception exception = Server.GetLastError();
        Response.Clear();
        HttpException httpException = exception as HttpException;
        Server.ClearError();
        Response.Redirect("/Secure/Error", false);
    } 
```

如果发生任何异常，它将重定向到错误页面。我希望某些异常不应该重定向到错误页面。

就像任何用户输入以下网址一样

> www.example.com/index

没有' **index** '名称的控制器，它将抛出异常

> 找不到路径“/index”的控制器或未实现 IController

我想要这个当这个异常发生时它应该重定向到**www.example.com**

我怎样才能做到这一点？

还有一些其他关键字，如**index..**应该重定向到网站的主 url

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:14:09.923

如果您只想对特定关键字执行此操作，为什么不添加相应的路由而不是处理*404 - Not Found*异常？

您可以在*Globals.asax.cs*文件中执行此操作，在其他路由定义旁边：

```
routes.MapRoute(
    "IndexRoute", // Route name
    "index", // URL 
    new { controller = "Home", action = "RedirectToRoot" }
    ); 
```

同样适用于除**index**以外的所有关键字。

### 更新

在使*/index*和其他 url 指向`HomeController.RedirectToRoot()`（或您选择的另一个控制器/动作）之后，只需实现它以返回一个 RedirectResult 将用户带到站点的根目录：

```
public RedirectResult RedirectToRoot()
{
    return RedirectToAction("Index", "Home");
} 
```

### 更新 2

如果您绝对确定除了重定向到 root 之外，您永远不会使用*/index*或其他特殊 url，那么您可以改为执行永久重定向：

```
return RedirectToActionPermanent("Index", "Home"); 
```

This will save some round trips to the server, but the redirection will be permanently stored in client browsers, making it very hard/impossible to use those urls for anything else in the future.

# php - ACF v4 插件可见性

> ID：14960715
> 
> 赞同：0
> 
> 时间：2013-02-19T15:07:35.927
> 
> 标签：php, wordpress, plugins, advanced-custom-fields

我安装了 WordPress 3.5.1，并安装了[高级自定义字段插件](http://advancedcustomfields.com) `(ACF) v.4`和两个`ACF`附加组件（中继器和灵活字段）。

在 ACF ( `*Custom Fields > Add-ons*`) 中，它们似乎已正确安装。但是，我在 WP 管理菜单中的任何地方都看不到它们。我坚持使用基本功能。

我在`ACF`网站上搜索，但似乎没有任何答案，甚至没有关于我的问题的任何问题。任何想法如何使它们可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T18:13:55.427

目前来自 WordPress 的软件包并未提供完整的最新版本的 ACF。

你可以在这里找到完整版本（实际上是 3.5.8.1）： [https ://github.com/elliotcondon/acf/archive/master.zip](https://github.com/elliotcondon/acf/archive/master.zip)

兼容性在此处检查成功（ACF 和附加组件）：

```
WordPress: 3.5.1
ACF: 3.5.8. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T18:24:47.283

从 19.02.2013 开始，必须从[作者的 github 存储库](https://github.com/elliotcondon/)安装 ACF 。两个版本：[`ACF 3.5.8`](https://github.com/elliotcondon/acf/)和[`ACF 4.0.0`](https://github.com/elliotcondon/acf4)都可以正常工作`WP 3.5.1`和`WP 3.5`。

因为`ACF 3.5.8`仍然可以通过在插件设置中输入激活码来安装旧插件，但是必须使用[以下链接](http://www.advancedcustomfields.com/add-ons-download/)在 Wordpress 中手动安装、上传和激活新插件。

# c - 用另一个结构初始化一个结构

> ID：14960724
> 
> 赞同：2
> 
> 时间：2013-02-19T15:08:17.457
> 
> 标签：c, struct, copy

如何将一个值从结构分配给另一个。这是我的代码。

我相信我正在分配结构的地址，这是我不想做的。我想将“temp”的值分配给“a”。我评论了我需要帮助的部分。谢谢

也是题外话..我如何发布代码而不必逐行缩进每一行？

```
#include <stdio.h>
#include <stdlib.h>

#define SIZE 10

typedef struct dynArrStruct
{
    double value1;
    int value2;
    int value3;
}dynArr;

void init(dynArr* a)
{
    dynArr temp;
    temp.value1 = (double)(rand()) * rand() / rand();
    temp.value2 = rand()%100;
    temp.value3 = rand()%1000;
    printf("In init(): value1: %14.5f, value2: %6d, value3: %6d\n",
            temp.value1, temp.value2, temp.value3);
    a = &temp;  // THIS LINE
}

int main(int argc, char** argv)
{
    int i;
    dynArr a1[SIZE];
    dynArr* a2[SIZE];

    for(i = 0; i < SIZE; i++)
    {
        init(&(a1[i]));
        init(a2[i]);
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T15:13:10.290

使用赋值（假设`a`是指向有效内存）：

```
*a = temp; 
```

请注意，这是有效的，因为 的成员`struct`不是指针。在包含成员指针的 a 上使用这种技术（或`memcpy()`）`struct`会导致两个`struct`s 的成员都指向同一个地址，这可能很危险（可能导致悬空指针）。如果 a`struct`包含指针，则需要 的深拷贝`struct`（为成员指针分配内存并将指向源结构中的对象复制到目标中分配的内存`struct`）。

此外，在这种情况下`temp`是多余的，您只需将值直接分配给`a`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T15:13:36.403

```
void init(dynArr* a)
{
    dynArr temp;
    temp.value1 = (double)(rand()) * rand() / rand();
    temp.value2 = rand()%100;
    temp.value3 = rand()%1000;
    printf("In init(): value1: %14.5f, value2: %6d, value3: %6d\n",
            temp.value1, temp.value2, temp.value3);
    a = &temp;  // THIS LINE
} 
```

`temp`是具有自动存储持续时间的局部变量。`init`回来后就不复存在了。

幸运的是，指向的指针`a`也`temp`不再存在，因此`init`不会为您的程序创建悬空指针。

`struct`s 是可赋值的，所以如果参数指向有效内存，你可以用初始化指针

```
*a = temp; 
```

那没关系

```
init(&(a1[i])); 
```

因为`&a1[i]`指向分配的内存，但不是

```
init(a2[i]); 
```

因为`a2[i]`是一个未初始化的指针。

如果要在 中分配内存`init`，则必须传递 a `dynArr**`，但不能在第一种情况下使用它。所以你应该`a2[i]`在调用`init`第二种情况之前分配内存。

# perl - 当键来自列表时，散列上的空值

> ID：14960729
> 
> 赞同：0
> 
> 时间：2013-02-19T15:08:35.567
> 
> 标签：perl, hash

我快要疯了。

我有一个似乎没问题的数组。我的数组包含文件名（作为键）和数组值的完整路径。我检查了它是否正常工作.. 到这里还可以。这是我的代码：

```
open (FILE, "comb_d.txt");
@l = <FILE>;
foreach $line (@l) {
    chomp($line);
    my @linea = split(/separator/,$line);
    $hash_d{$linea[0]} = $linea[1];
} 
```

正如我所说..它有效，因为我验证了：

```
foreach my $llave (keys %hash_o) {
    print "$llave = $hash_o{$llave}\n";
} 
```

它给了我完整的哈希没有问题..

问题来了。我不想在我的阵列上使用所有文件名（所有键），只是一组。实际上，有一组密钥存储在`@isect`. 但是当我运行时：

```
foreach my $llave ( @isect ) {
    print "$llave = $hash_o{$llave}\n"; 
} 
```

我的结果是：

```
filename1 = 
filename2 = 
```

我很确定 上的元素`@isect`作为`%hash_o`.

请帮忙

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:54:32.967

对于这样的事情，[**`Data::Dumper`**](http://search.cpan.org/perldoc?Data::Dumper)是你的朋友。

```
use Data::Dumper qw<Dumper>;

...

    $hash_d{$linea[0]} = $linea[1];
    say Dumper( \%hash_d );
} 
```

然后后来：

```
say Dumper( \@isect );
say Dumper( \%hash_o ); 
```

你花了很多时间做`Data::Dumper`点心的事情。每次尝试这样做时，因为它是 Perl 代码，并且因为您可能无法跟上 Perl 的速度，所以您花时间调试您的*调试*代码，而不是完成解决方案。

**注意：**在面向对象的 Perl 中，转储不是读取对象 API 的可接受替代*，正如我*[在此处](https://stackoverflow.com/questions/2748738/how-do-i-access-a-value-of-a-nested-perl-hash/2749233#answer-2749233)解释的那样。但特别是对于未受祝福的哈希（请参阅[`bless`](http://perldoc.perl.org/functions/bless.html)或[`perlobj`](http://perldoc.perl.org/perlobj.html)），它只是您想知道如何获取的结构化数据——这是要走的路。

最后，在这里我提到我最喜欢的工具是[**`Smart::Comments`**](http://search.cpan.org/perldoc?Smart::Comments). 您在哪里执行此操作：

```
use Smart::Comments;
...
### %hash_d
### @isect
### %hash_o 
```

并观看魔术。

# c# - android 的单声道：更新列表中的数据

> ID：14960733
> 
> 赞同：1
> 
> 时间：2013-02-19T15:08:46.923
> 
> 标签：c#, android, list, xamarin.android

在我的应用程序中，我显示了一个联系人列表以及他们的姓名、照片和在线状态。每次联系人更改其状态时，应用程序都会收到一个事件，而我要做的是使用联系人的新状态更新列表。

这就是我将列表绑定到自定义列表适配器的方式：

```
 ListView listView; 
 listView = FindViewById<ListView>(Resource.Id.List); 
 listView.Adapter = new ContactListAdapter(this, names); 
```

这是我的 ContactListAdapter 的 GetView 的一部分

```
 public override View GetView(int position, View convertView, ViewGroup parent) 
        { 
            var item = this.contacts.ElementAt(position); 
            var view = convertView; // re-use an existing view, if one is available 
           // if (view == null || !(convertView is LinearLayout)) // otherwise create a new one 
                view = context.LayoutInflater.Inflate(Resource.Layout.contactItemView, parent, false); 
            var p = context; 
            var imageItem = view.FindViewById(Resource.Id.presence) as ImageView; 

          string status = null; 
            foreach (CPresenceInfo pres in item.Presences) 
            { 
                if (pres.Type.ToString().Equals("TWS")) status = pres.StatusBusy; 
            } 
            if (status != null) 
            { 
                if (status.Equals("ONLINE")) imageItem.SetImageResource(Resource.Drawable.online); 
                if (status.Equals("BUSY")) imageItem.SetImageResource(Resource.Drawable.busy); 
                if (status.Equals("ABSENT")) imageItem.SetImageResource(Resource.Drawable.absent); 
                if (status.Equals("OFFLINE")) imageItem.SetImageResource(Resource.Drawable.offline); 

            } 
            return status; 

            return view; 
        } 

// And the method that receives the event: 
        void CEventParser_OnPresenceChangedEvent(string personGuid, CPresenceInfo presence) 
        { 
                //Update the contact row or the entire list?? 
        } 
```

我不知道我是否可以只更新列表中的一行，或者我是否必须更新整个列表。但在这两种情况下我都不知道该怎么做......我知道有一种`NotifyDataSetChanged()`方法，但我不知道如何以及在哪里使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T22:24:25.147

### 更新所有项目

您可以在新数据可用后仅使用 NotifyDataSetChanged 方法来执行此操作 - 这将触发列表视图完全重绘自身。它将向您的适配器发出新请求以执行此操作。

### 更新一项内的内容

一种方法是记录哪些视图当前用于哪些记录。

显然，您必须小心记住，随着列表滚动，视图会被重用。

如果您跟踪当前视图项映射，那么每次更新当前视图相对简单。

# entity-framework - SQLException：多个级联路径？

> ID：14960735
> 
> 赞同：1
> 
> 时间：2013-02-19T15:08:57.227
> 
> 标签：entity-framework

我有以下模型：

```
public class Job
{
    [Key]
    public int JobId { get; set; }
    public string Description { get; set; }
    public DateTime DateCreated { get; set; }
    public DateTime? DueDate { get; set; }
    public int JobIdentity { get; set; }
    [MaxLength(50, ErrorMessage = "Please ensure the Job Title is less than 50 characters")]
    public string JobTitle { get; set; }
    public int Priority { get; set; }

    // Relationships
    [ForeignKey("Category")]
    public int CategoryId { get; set; }
    [ForeignKey("JobType")]
    public int JobTypeId { get; set; }
    [ForeignKey("UserRequestedBy")]
    public int RequestedBy { get; set; }
    [ForeignKey("UserCreatedBy")]
    public int CreatedBy { get; set; }

    // Navigation Properties
    public virtual JobType JobType { get; set; }
    public virtual Category Category { get; set; }
    public virtual User UserRequestedBy { get; set; }
    public virtual User UserCreatedBy { get; set; }
    public virtual ICollection<Task> Tasks { get; set; }
    public virtual ICollection<JobNote> Notes { get; set; }
} 
```

但是当我尝试运行我的应用程序时，出现以下错误：

`Introducing FOREIGN KEY constraint 'FK_dbo.Jobs_dbo.Users_CreatedBy' on table 'Jobs' may cause cycles or multiple cascade paths. Specify ON DELETE NO ACTION or ON UPDATE NO ACTION, or modify other FOREIGN KEY constraints. Could not create constraint. See previous errors.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:50:46.860

默认情况下启用级联删除，删除*用户*有两个级联路径 - *RequestedBy*和*CreatedBy*

[这个](https://stackoverflow.com/questions/7946793/foreign-keys-in-entity-framework-cycles-or-multiple-cascade-paths-error)问题展示了禁用级联删除。

# algorithm - 如何使用节点的父子信息找到依赖树的根

> ID：14960736
> 
> 赞同：0
> 
> 时间：2013-02-19T15:08:58.280
> 
> 标签：algorithm, tree, dependencies, root, nodes

我将首先提供一些背景信息。这是我的数据的存储方式：

```
%POM_family{$GAV} = [\%Parents, \%Children] 
```

在提出我的问题之前，我将按照我在上下文中使用它们的方式定义上述变量：

*   $GAV --> 可以认为是我们依赖树中的一个随机节点
*   %Parents --> 包含 $GAV 依赖的节点列表的哈希
*   %Children--> 包含依赖于我们的 $GAV 的节点列表的哈希

我的问题如下：

*   假设我们有任何选择的节点的父节点和子节点，为了分析从依赖关系到依赖关系并找到根 $GAV 即没有父节点的 $GAV，使用什么算法是合适的。

提前致谢！:-D

注意：如果问题不够清楚，请提供一些反馈，我会更改我的问题 :-)

# google-maps - 不同浏览器的不同位置

> ID：14960737
> 
> 赞同：0
> 
> 时间：2013-02-19T15:08:59.730
> 
> 标签：google-maps, geolocation

为什么浏览器的位置不同？

*   Chrome / Firefox：距我所在位置 30 公里的同一位置
*   IE：距离我所在的地方 250 公里
*   Safari : 正是我在哪里

Safari 如何检测我的位置而其他人无法检测到？

是个

```
navigator.geolocation.getCurrentPosition() 
```

从浏览器获取用户当前位置的最佳方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:57:20.330

我刚刚检查了我的浏览器，看看我是否有与您相同的结果。

不幸的是，我在*Safari*、*Firefox*和*Chrome*上得到的结果是一样的。它给了我确切的当前位置。

在 IE 10 和 IE9 上，结果与我实际所处的位置相差几米。

navigator.geolocation.getCurrentPosition() 方法只是尝试使用 IP 地址和 WiFi 信号等数据来定位您。在某些设备上，如果设备配备了 GPS 模块，则可以使用 GPS 信号。

诀窍是 GPS 信号通常不如 WiFi 信号准确。但我认为这并不能说明为什么您的浏览器之间存在差异。

也许您可以尝试使用**getCurrentPosition的****enableHighAccuracy:true**参数来查看每个浏览器之间的结果是否再次不同。

# c# - 如何添加列表 >() 作为 DataGrid.ItemsSource

> ID：14960738
> 
> 赞同：1
> 
> 时间：2013-02-19T15:09:04.943
> 
> 标签：c#, wpf, list, xaml, datagrid

# 问题

如果我有这样一个列表，让我们调用它`Rows`并且我不想添加`myDataGrid.ItemsSource = Rows;` 比我在所有列中获得的每个子列表的第一个 myClass

看起来像

```
 Column0  |  Column1  |  Column2  |  Column3

firstrow0 | firstrow0 | firstrow0 | firstrow0
firstrow1 | firstrow1 | firstrow1 | firstrow1
firstrow2 | firstrow2 | firstrow2 | firstrow2 
```

# 编码

## XAML

```
 <DataGrid Name="myDataGrid" AutoGenerateColumns="False">
        <DataGrid.Columns >
            <DataGridTemplateColumn>                    
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate  DataType="{x:Type vmv:myClass}">
                        <TextBlock Text="{Binding Name}"/>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>

            <DataGridTemplateColumn>
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate DataType="{x:Type vmv:myClass}">
                        <TextBlock Text="{Binding Name}"/>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>                  
            </DataGridTemplateColumn>

            <DataGridTemplateColumn>
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate  DataType="{x:Type vmv:myClass}">
                        <TextBlock Text="{Binding Name}"/>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>

        </DataGrid.Columns>
    </DataGrid> 
```

## 在后面

```
 var list = new List<List<myClass>>();

        for (int row = 0; row < 3; row++)
        {
            var myRow = new List<myClass>();
            for (int col = 0; col < 5; col++)
                myRow.Add(new myClass() { ID = col, Name = "Row"+row +" Column:" + col });
            list.Add(myRow);
        }

        myDataGrid.ItemsSource = list.AsEnumerable<IEnumerable>(); 
```

## 我的课

```
public class myClass
{
    public int ID { get; set; }
    public string Name { get; set; }
    // other stuff
} 
```

## 问题

我需要什么才能让这个工作。我需要以某种方式投射它吗？我需要其他`Object`的`List<>`吗？非常感谢任何可以提供帮助的东西！

## 编辑

在 RL 代码中，我将无法更改 DataTemplate 部分，因为它的一部分`XAMLFile`将由我的公司创建，因此它适合这样的参数，但原始它只能用于打印。我只将它加载到`Find("ItemTemplate")`=> 将它转换为`DataTemplate`和我们为它提供所见即所得，因为宽度和高度将`DataGridCell`不同于`PrintTemplate``PrintTemplate`

## 解决方案

下面的代码是我的具体问题的解决方案，也看看米歇尔的答案

```
 #region example Datacreation
        var list = new List<IEnumerable>();

        for (int row = 0; row < 5; row++)
        {
            var myRow = new List<myClass>();
            for (int col = 0; col < 5; col++)
            {
                myRow.Add(new myClass() { ID = col, Name = "Row" + row + " Column:" + col });
            }
            list.Add(myRow);
        }
        #endregion

        #region FileToDataTemplate
        var myXamlFile = "<Window xmlns='http://schemas.microsoft.com/winfx/2006/xaml/presentation' "
                   + "xmlns:x='http://schemas.microsoft.com/winfx/2006/xaml' "
                   + "xmlns:vmv='clr-namespace:toDataGrid;assembly=toDataGrid' " //namespace
                   + "SizeToContent='WidthAndHeight'>"
                   + "<Window.Resources>"
                       + "<DataTemplate x:Name='myFileCellTemplate' DataType='{x:Type vmv:myClass}'>"
                            + "<TextBlock Text='{Binding Name}'/>"
                        + "</DataTemplate>"
                   + "</Window.Resources>"
            // some stuff
             + "</Window>";

        Window myWindow = (Window)XamlReader.Load(XmlReader.Create(new StringReader(myXamlFile)));
        myWindow.Close();

        DataTemplate myCellTemplate = (DataTemplate)myWindow.FindName("myFileCellTemplate");
        #endregion

        DataGrid myDataGrid = new DataGrid();

        #region dyn DataGridcreation
        for (int col = 0; col < 5; col++)
        {
            #region HelperDataTemplatecreation
            var myResourceDictionaryString = "<ResourceDictionary xmlns='http://schemas.microsoft.com/winfx/2006/xaml/presentation' "
                                                                   + "xmlns:x='http://schemas.microsoft.com/winfx/2006/xaml' "
                                                                   + "xmlns:vmv='clr-namespace:toDataGrid;assembly=toDataGrid'>" //namespace

                                                                       + "<DataTemplate DataType='{x:Type vmv:myClass}'>"
                                                                           + "<Label Content='{Binding [" + col + "]}'/>"
                                                                       + "</DataTemplate>"
                                                  + "</ResourceDictionary> ";

            ResourceDictionary ResDic = (ResourceDictionary)XamlReader.Load(XmlReader.Create(new StringReader(myResourceDictionaryString)));

            DataTemplate HelpDTemp = (DataTemplate)ResDic[ResDic.Keys.Cast<Object>().First()];
            #endregion

            DataGridTemplateColumn templateColumn = new DataGridTemplateColumn();

            templateColumn.Header = col;

            templateColumn.CellTemplate = HelpDTemp;
            templateColumn.CellEditingTemplate = HelpDTemp;

            myDataGrid.Columns.Add(templateColumn);
        }
        #endregion

        myDataGrid.Resources.Add(new DataTemplateKey(typeof(myClass)), myCellTemplate);
        myDataGrid.ItemsSource = list.AsEnumerable<IEnumerable>(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:36:48.663

在您的鞋子中，我将以编程方式生成所有 DataGridColumns（如评论中所建议的那样），因此您可以将正确的 DataContext 分配给每个单元格，并且一切都将是真正动态的。

但是，如果您的问题只是一个`DataBinding`问题，那么如果您将 TextBlock DataBinding 表达式更改为：

```
<TextBlock Text="{Binding [0].Name}"/> 
```

对于第一个数据模板`[1].Name`和`[2].Name`其他两个数据模板。这将起作用，因为您的行 DataContext 是 a `List<T>`，因此添加`[#]`到您的 DataBinding 表达式会将每个单元格的数据上下文设置为正确的对象。

编辑 - 基于以下评论：如何使用资源中的给定数据模板以编程方式创建 datagridcolumn。

**在后面的代码中**

```
//In your example you have 5 columns    
for (int c = 0; c < 5; c++)
{
  DataGridTemplateColumn column = new DataGridTemplateColumn();
  //Basically i will wrap your DataTemplate in a ContentPresenter
  //The ContentProperty is set to point to the correct element of your list                  
  var factory = new FrameworkElementFactory(typeof(ContentPresenter));
  factory.SetBinding(ContentPresenter.ContentProperty, new Binding(string.Format("[{0}]", c.ToString())));
  factory.SetValue(ContentPresenter.ContentTemplateProperty, this.FindResource("YourTemplateName") as DataTemplate);
  column.SetValue(DataGridTemplateColumn.CellTemplateProperty, new DataTemplate { VisualTree = factory });
  myDataGrid.Columns.Add(column);
} 
```

# pdf - 以编程方式更改 PDF 文件中黑框的颜色？

> ID：14960740
> 
> 赞同：1
> 
> 时间：2013-02-19T15:09:08.640
> 
> 标签：pdf, pdf-generation

我有一个由 Microsoft Word 生成的 PDF 文件。用户指定了黑色的“突出显示”颜色，以使文本看起来像一个黑盒子（并使文本看起来像是被编辑过的）。我想将黑框更改为黄色，以便突出显示文本。

理想情况下，我想在 Python 中执行此操作。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T16:42:04.047

**选项 1：**如果可以选择商业库，您可以使用[Amyuni PDF Creator .Net](http://www.amyuni.com/en/developer/pdfcreator/features/)轻松实现此功能，C# 代码如下所示：

```
using System.IO;
using Amyuni.PDFCreator;
using System.Collections;

//open a pdf document
FileStream testfile = new FileStream("test1.pdf", FileMode.Open, FileAccess.Read, FileShare.Read);
IacDocument document = new IacDocument(null);
document.Open(testfile, "");

//get the first page
IacPage page1 = document.GetPage(1);

//get all graphic objects on the page
IacAttribute attribute = page1.AttributeByName("Objects");

// listobj is an arraylist of objects
ArrayList listobj = (ArrayList)attribute.Value;

foreach (IacObject iacObj in listobj)
{
    //if the object is a rectangle and the background color is black then set it to yellow
    if ((IacObjectType)iacObj.AttributeByName("ObjectType").Value == (IacObjectType.acObjectTypeFrame && (int)obj.Attribute("BackColor").Value == 0)
    {
        obj.Attribute("BackColor").Value = 0x00FFFF; //Yellow   
    }
} 
```

我想你可以把它翻译成 IronPython。
*通常的免责声明适用于此建议*

**选项 2：**如果商业库不是一个选项，并且您没有开发商业闭源应用程序，您可以尝试使用 iText 对页面内容进行一些不可靠的黑客攻击：

您可以尝试解码页面内容（有关详细信息，请参阅 iText 中的 ContentByteUtils 类），在每个填充运算符之前插入一个颜色选择运算符，然后重新保存文件。有关这些运算符的更多详细信息，请参阅 Adob​​e PDF 参考文档的表 4.10 路径绘制运算符。

操作数 f：填充路径，使用非零绕组数规则确定要填充的区域（请参阅第 232 页的“非零绕组数规则”）。

操作数 rg：将非描边颜色空间设置为 DeviceRGB，并将非描边颜色设置为指定值

操作数q：保存当前图形状态

操作数 Q：恢复保存的图形状态

因此，如果您的页面上有一系列运算符：

```
0.0 0.0 0.0 rg % Set nonstroking color to black
25 175 175 −150 re % Construct rectangular path
f % Fill path 
```

它应该变成：

```
0.0 0.0 0.0 rg % Set nonstroking color to black
25 175 175 −150 re % Construct rectangular path
q % Saves the current graphic state
1.0 1.0 0.0 rg % Set nonstroking color to yellow
f % Fill path
Q % Restores the saved graphic state 
```

一些评论：
-这种方法会将每个非文本绘图变成黄色（包括线条、曲线等，不包括光栅图像），并且它还将使用与其他 PDF 相同的绘图运算符在页面上绘制的任何文本绘制为黄色图纸。
- 页面上使用的 Xforms 和注释将不会被处理。
- 如果您要处理的文件是由同一个工具以同样的方式生成的，您可以只测试几个文件，看看它是如何进行的。

重要提示：这只是我头脑中**未经测试**的想法，它可能有效，也可能无效。

# c++ - 可以将任何类对象作为任何测试表达式的测试表达式传递，例如 if，而像 ifstream 对象。

> ID：14960742
> 
> 赞同：0
> 
> 时间：2013-02-19T15:09:28.157
> 
> 标签：c++

在 C++ 中，我可以像对象一样使用我的对象作为测试表达式`ifstream`吗？如果不是，为什么？

例如

```
ifstream ifs ("myfile.txt");
while( ifs ){
   //read and process data..
} 
```

我有一个类，我需要重载哪个运算符才能让编译器允许我的对象作为测试表达式传递？

例如

```
MyClass obj1;
if( obj1 ){
   //do something..
}

while( obj1 ){
   //do something repeatedly..
} 
```

两者都应该是有效的表达式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T15:12:52.630

你必须在你的类中实现一个`bool`重载。像这样的东西：

```
class myClass {
    public:
        explicit operator bool() const { return condition; }
}; 
```

它适用于`if`和`while`语句。但是，如果您的编译器不支持 C++11，则不能`explicit`在此重载中使用关键字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T15:27:55.260

有多种选择。

您不必`operator bool`在类中实现重载。

而且它通常不是最好的选择。

* * *

## 最佳：命名状态检查。

最好的方法是使用***命名***的状态检查方法。例如，iostreams 有`fail`成员，这样你就可以写

```
while( !cin.fail() ) { ... } 
```

对于您自己的课程，它可能如下所示：

```
struct S
{
    bool is_good() const { return ...; }  // Whatever name.
}; 
```

* * *

## 马马虎虎：`explicit`转换为`bool`.

下一个最好的是`explicit`转换运算符。拥有它`explicit`可以防止 if 因将您的对象之一作为函数参数传递而被无意调用。*条件*中仍使用`explicit`转换运算符，因此您可以编写例如

 *```
while( cin ) { ... } 
```

在 C++11 中调用一个

```
explicit operator bool () const { return !fail(); } 
```

对于您自己的课程，它看起来像

```
struct S
{
    explicit operator bool () const { return ...; }
}; 
```

* * *

## 不好：隐式转换为“私有”指针类型。

第三，如果您使用的是不支持`explicit`转换的编译器，即 C++03 编译器，并且由于某些莫名其妙的原因您不希望命名检查是最佳选择，那么您可以选择一个结果类型最大程度地减少意外呼叫的机会。

在 C++03 中，iostreams 使用隐式转换为`void*`（而不是 to `bool`）。

有些人提倡使用“安全布尔惯用语”，其结果是指向客户端代码无法访问的 C++03 类型的指针。

* * *

## 绝对最糟糕：隐式转换为`bool`.

最糟糕的选择就像

```
struct S
{
    operator bool () { return ... }
}; 
```

有了这个

*   从调用代码中看不到正在检查什么条件。

*   运算符可能会因传递`S`as 函数参数而被无意调用。

*   不能在`const`对象上调用转换。

添加 a`const`只会让它稍微不那么糟糕。

它仍然非常糟糕。:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T15:12:38.470

您有几种选择。可能最好的方法是重载`operator bool()`. 像这样：

```
class A{
 public:
   operator bool()
   {
     return flag;
   }

 private:
   bool flag;
}; 
```

编辑：正如评论中所指出的，如果您使用它，最好通过在前面`C++11`添加关键字来明确操作符。`explicit`否则可能最好使用`operator void*()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T15:14:31.987

您`operator bool()`需要重载才能提供此行为。但是，请仅在转换有合理的语义含义时才这样做，这是显而易见的，并且是类所有用户所期望的！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T15:17:38.630

您的编译器将尝试将表达式隐式转换为**bool**，因此您需要向您的类添加一个[类型转换运算符](http://www.learncpp.com/cpp-tutorial/910-overloading-typecasts/)，如下所示：

```
class SomeClass {
    operator bool() {
        return true; // a boolean expression should go here.
    }
} 
```

这将允许将您的类强制转换为布尔类型，因此可以在*if*，*while*等中使用它...但是重要的是要注意，这允许从您的类型到**bool**的隐式转换，重要的是要确保这是有道理的。

通常，为行为提供一种方法更为明智，例如：

```
while (myObj.hasMoreElements()) 
```

或者

```
if (someObj.isValid()) 
```

这可以立即清楚正在测试的内容。但是，如果转换为**bool**有意义，那就去做吧。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-19T15:20:53.963

您可以重载任意数量的类型转换运算符；传统的方法是`operator void*()() const`，为假返回一个空指针，为真返回一个非空指针（传统上`this`）。在 C++11 中，您也可以重载`explicit operator bool() const`，但如果您的编译器还不允许，则不建议这样做`explicit`；事实上，它`bool`是一个整数类型，如果没有`explicit`，它将转换为任何其他整数类型，这可能会导致一些令人惊讶的重载决议。

如果你这样做，你也应该重载`operator!() const`，所以这`if ( ! myObj )`也是很好的定义。

最后，您应该认真思考是否要这样做。ostream 类侥幸逃脱，因为它们是标准的一部分，*每个人都*可以看到、使用和了解它们，而且这种`while ( someStream >> object )`成语无处不在。但总的来说，对于具有两种以上可能状态的任何类，它都是误导和滥用运算符重载；一个`isValid`或`isReady`任何更合适的功能。*

# php - php动态数组

> ID：14960744
> 
> 赞同：-1
> 
> 时间：2013-02-19T15:09:32.603
> 
> 标签：php, arrays, multidimensional-array

我需要将 $array 的键存储到 $newarray 作为它的键，但它给出了未定义的索引 A ， D

```
 $newarray = array();

  $array = array('A'=>'b', 'D'=>'ewe'); 
  foreach($array as $key=>$value){ 
     $newarray[$key] .= 'data';
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:11:31.723

不知道你想要什么，但是，

```
$newarray[$key] .= 'data'; 
```

一定是

```
$newarray[$key] = 'data'; // without the "."! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T15:11:16.980

```
 foreach($array as $key=>$value){ 
     $newarray[$key] = 'data';  //Remove .
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T15:11:17.963

您正在连接一个尚不存在的值。而是分配给它。

```
foreach($array as $key=>$value){ 
    $newarray[$key] = 'data';
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-19T15:11:23.710

试试这个........对不起，我想到了另一件事，请删除负面

```
 foreach($array as $key=>$value){ 
    $newarray[$key] = 'data';
  } 
```

# iphone - 如何分配 AVPlayer 播放/暂停按钮 iOS？

> ID：14960747
> 
> 赞同：1
> 
> 时间：2013-02-19T15:09:53.793
> 
> 标签：iphone, ios, ipad, avplayer

几天前我问过这个问题，但没有人回答我，我找不到解决方案。

所以我想再次问同样的问题，如果你知道答案，请回答我。

我想将图片中的这些按钮分配给我的 avplayer 播放/暂停按钮。

[![在此处输入图像描述](../Images/9904b089bd514048d1f2768f4ad4c262.png)](https://i.stack.imgur.com/m3oft.jpg)

注意：我的应用程序图标出现在正在播放的栏中，而不是音乐图标，我的应用程序在后台运行良好。

请提供任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:28:52.220

要允许传递远程控制事件，您必须调用 的[beginReceivingRemoteControlEvents](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIApplication_Class/Reference/Reference.html#//apple_ref/occ/instm/UIApplication/beginReceivingRemoteControlEvents)方法`UIApplication`。

[然后，您可以通过实现remoteControlReceivedWithEvent:](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIApplication_Class/Reference/Reference.html#//apple_ref/occ/instm/UIApplication/beginReceivingRemoteControlEvents)方法来响应远程控制事件，如下所示：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    ...

    [[UIApplication sharedApplication] beginReceivingRemoteControlEvents];
    [[UIApplication sharedApplication] becomeFirstResponder];

    return YES;
}

- (void)remoteControlReceivedWithEvent:(UIEvent *)event
{
    switch (event.subtype)
    {
        case UIEventSubtypeRemoteControlPlay:
            // play code
            ...
            break;
        case UIEventSubtypeRemoteControlTogglePlayPause:
            // toggle code
            ...    
            break;
        case UIEventSubtypeRemoteControlNextTrack:
            // next code
            ...
            break;
        default:
            break;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-26T17:09:18.507

注意：“iOS 7.1 及以后，使用共享的[MPRemoteCommandCenter](https://developer.apple.com/library/ios/documentation/MediaPlayer/Reference/MPRemoteCommandCenter_Ref/index.html#//apple_ref/occ/cl/MPRemoteCommandCenter)对象注册远程控制事件。使用共享命令中心对象时不需要调用此方法（注：*beginReceivingRemoteControlEvents ）。”* （[来源](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIApplication_Class/index.html#//apple_ref/occ/instm/UIApplication/beginReceivingRemoteControlEvents)）

# java - 我应该如何将功能划分为 Java 类？

> ID：14960753
> 
> 赞同：1
> 
> 时间：2013-02-19T15:10:20.150
> 
> 标签：java, coding-style, refactoring, web-scraping

我正在从事一个中等规模的 Java 项目，并试图坚持最佳实践，所以我想我会问你们几个问题。由于我现在有时间，我想把它做好。如果这类问题不适合 StackOverflow，我提前道歉。也许其他人可以参考它以获得风格建议。

我正在编写一个名为 LinkOpener 的类，它有一个公共的静态方法：openAgencyWindows。你给它一个（油）井序列号，并根据序列号，为美国 50 个州中的任何一个州提供一个开放的监管网站。我会做相当多的抓取，并且由于这些网站的迷宫性质，代码可以变得相当广泛。我是不是该：

1.  在 LinkOpener 类中包含我所有的抓取代码，包括处理与美国每个州相对应的序列号的方法（按字母顺序排序）。
2.  为每个州提供自己的类，这将扩展一个包含一些常见网站抓取/正则表达式方法的 Scraper 类。每个状态类都有一到三种方法来帮助抓取。
3.  做点别的吗？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:14:18.823

您的第二种选择将更具可读性和更面向对象的方法，这很好。也可以通过实现类中的抽象方法调用特定类中的方法，而不知道它是什么状态。

# xml - 在 Magento 的自定义设计选项卡中更新现有布局块

> ID：14960754
> 
> 赞同：1
> 
> 时间：2013-02-19T15:10:25.070
> 
> 标签：xml, magento, layout

在我的布局文件中，我有具有以下结构的现有块：

```
<block type="mymodule/news" name="catalog.help" after="left_nav" template="catalog/navigation/help.phtml"/> 
```

所以现在我想在管理界面中的“自定义设计>自定义布局更新”下的某个类别中向这个块添加额外的信息，而不必重复所有的属性和其他东西，我只想向它添加额外的数据，一些像这样（提供相同的块名称）：

```
<block name="catalog.help">
    <action method="setData"><key>news_category_id</key><value>123</value></action>
</block> 
```

上面的代码甚至可以工作，但在日志中抛出警告“类型”是强制性的，同时在布局中创建块。但是，如果我还将 type="mymodule/news" 添加到属性中，它将停止工作 - setData 操作则不再设置数据。

我想在没有“模板”和“之后”标签的情况下尽可能简单地保持 XML 在管理中，因为它们已经在布局中的 XML 文件中定义。这可能吗 - 引用现有块并只是向其中添加东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T16:56:05.697

试试`<action method="setData" block="catalog.help"><key>news_category_id</key><value>123</value></action>`。

# c# - IParameterInspector .BeforeCall 中的引用类型字段为空

> ID：14960755
> 
> 赞同：2
> 
> 时间：2013-02-19T15:10:24.333
> 
> 标签：c#, .net, wcf

我实现了 IParameterInspector 接口。当我调用具有原始类型参数的方法时，Beforecall 工作正常！但是当我传递自定义引用类型对象时出现问题。当我传递引用类型参数时，对象的所有字段都会获得默认值。

```
object IParameterInspector.BeforeCall(string operationName, object[] inputs)
{
        var argument = (MyCustomType)inputs[0];
        if (argument != null)
        {
            // All the fields are null, e.g.argument.ID is null
        }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:43:21.590

抱歉，已解决！！`DataMember`字段上缺少属性:)

# java - 如何创建 ArrayList 并自动将变量分配给绘制的 Galaga 船？还要让它用箭头键移动？

> ID：14960757
> 
> 赞同：0
> 
> 时间：2013-02-19T15:10:39.180
> 
> 标签：java, graphics, awt

我当前的代码列在最底部。到目前为止，我已经画出了我希望它在最终版中看到的 galaga 船，以及随机出现的星星。现在，唯一的问题或我需要弄清楚的事情是如何创建一个数组列表，例如：

```
arrayList = new Arraylist() 
```

新的 arrayList 具有分配给它的变量集，以及关于 g.drawLine 方法的位置。基本上分配一个arraylist变量（x1，y1，x2，y2），基本思想是所有给定的行都分配给这个数组。另外，为了让它真正移动，我会使用 if() 循环，其中 if("Up" ispressed)，然后 y1+=5; 并且y2+=5；所以它会向上移动，以及其他使用“右”、“左”和“下”箭头的 else if 循环。任何帮助将不胜感激，谢谢。

```
import java.awt.*;
import java.applet.*;

public class Galaga extends Applet
{
public void paint(Graphics g)
{
    DrawBackground(g);
    DrawGalaga(g);
}
public void DrawBackground(Graphics g)
{
    g.setColor(Color.black);
    g.fillRect(1,2,3000,4000);
    DrawStars(g);
}
public void DrawGalaga(Graphics g)
{       
    g.setColor(Color.red);
    g.drawLine(42,75,42,80); //Far Left Gun
    g.drawLine(43,75,43,80);
    g.drawLine(44,75,44,80);
    g.drawLine(45,75,45,80);

    g.setColor(Color.white);
    g.drawLine(42,80,42,100); //Far Left Piece
    g.drawLine(43,80,43,100);
    g.drawLine(44,80,44,100);
    g.drawLine(45,80,45,100);

    g.drawLine(46,83,46,96); //From Left, 1st one
    g.drawLine(47,83,47,96);
    g.drawLine(48,83,48,96);
    g.drawLine(49,83,49,96);

    g.drawLine(50,79,50,92); //From Left, 2nd one
    g.drawLine(51,79,51,92);
    g.drawLine(52,79,52,92);
    g.drawLine(53,79,53,92);    

    g.drawLine(54,65,54,89); //From Left, 3rd one
    g.drawLine(55,65,55,89);
    g.drawLine(56,65,56,89);
    g.drawLine(57,65,57,89);

    g.drawLine(58,75,58,89); //From Middle 3rd one
    g.drawLine(59,75,59,89);
    g.drawLine(60,75,60,89);
    g.drawLine(61,75,61,89);

    g.drawLine(62,70,62,85); //From Middle, 2nd Left one
    g.drawLine(63,70,63,85);
    g.drawLine(64,70,64,85);
    g.drawLine(65,70,65,85);

    g.drawLine(66,60,66,95); //From Middle, 1st Left one
    g.drawLine(67,60,67,95);
    g.drawLine(68,60,68,95);
    g.drawLine(69,60,69,95);

    g.drawLine(70,45,70,100); //Big Middle Piece
    g.drawLine(71,45,71,100);
    g.drawLine(72,45,72,100);
    g.drawLine(73,45,73,100);
    g.drawLine(74,45,74,100);
    g.drawLine(75,45,75,100);
    g.drawLine(76,45,76,100);

    g.drawLine(77,60,77,95); //From Middle, 1st Right one
    g.drawLine(78,60,78,95);
    g.drawLine(79,60,79,95);
    g.drawLine(80,60,80,95);

    g.drawLine(81,70,81,85); //From Middle, 2nd Right one
    g.drawLine(82,70,82,85);
    g.drawLine(83,70,83,85);
    g.drawLine(84,70,84,85);

    g.drawLine(85,75,85,89); //From Middle 3rd one
    g.drawLine(86,75,86,89);
    g.drawLine(87,75,87,89);
    g.drawLine(88,75,88,89);

    g.drawLine(88,65,88,89); //From Right, 3rd one
    g.drawLine(89,65,89,89);
    g.drawLine(90,65,90,89);
    g.drawLine(91,65,91,89);

    g.drawLine(92,79,92,92); //From Right, 2nd one
    g.drawLine(93,79,93,92);
    g.drawLine(94,79,94,92);
    g.drawLine(95,79,95,92);

    g.drawLine(96,83,96,96); //From Right, 1st one
    g.drawLine(97,83,97,96);
    g.drawLine(98,83,98,96);
    g.drawLine(99,83,99,96);

    g.drawLine(100,80,100,100); //Far Right Piece
    g.drawLine(101,80,101,100);
    g.drawLine(102,80,102,100);
    g.drawLine(103,80,103,100);

    g.setColor(Color.red);
    g.drawLine(100,75,100,80); //Far Right Gun
    g.drawLine(101,75,101,80);
    g.drawLine(102,75,102,80);
    g.drawLine(103,75,103,80);
}

public void DrawStars(Graphics g)
{
    g.setColor(Color.yellow);
    int x, y;
    for (int s = 0; s < 2000; s++) 
        {
            x = (int)(Math.random()*2000);
            y = (int)(Math.random()*2000); 
            g.drawLine(x, y, x, y);
        }
}
public void delay(int n)
{
    long startDelay = System.currentTimeMillis();
    long endDelay = 0;
    while (endDelay - startDelay < n)
        endDelay = System.currentTimeMillis();
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:18:41.897

您走在正确的轨道上，但是您需要利用一件事。使用数组存储每行的 X、Y 值是一个好主意。但是，关于更改这些值的第二部分是不正确的。对于 2d 和 3d 图形，您的模型不应该改变，除非它是动画的。这意味着您的数组值不会改变。要移动船，包括位置、旋转和倾斜，您可以在图形对象上使用变换。

查看本教程以了解我在说什么。

[http://docs.oracle.com/javase/tutorial/2d/advanced/transforming.html](http://docs.oracle.com/javase/tutorial/2d/advanced/transforming.html)

至于存储您的 x1、x2、y1、y2 值，您可以创建另一个类。

```
public class MyLine
{
    public final int x1;
    public final int x2;
    public final int y1;
    public final int y2;
    public MyLine(int x1, int x2, int y1, int y2)
    {
        this.x1 = x1;
        this.x2 = x2;
        this.y2 = y1;
        this.y2 = y2;
    }
} 
```

然后你可以使用数组列表如下

```
List<MyLine> myLineList = new ArrayList<MyLine>();

myLineList.add(new MyLine(1,2,3,4)); //add as many lines as you'd like. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T15:21:38.150

老实说，这段代码看起来不太好。

首先，使用一些对象而不是数组偏移的隐含角色。

```
List<Line> lines = new ArrayList<Line>(); 
```

现在每个数组元素都是有效的行。您可能应该更多地重构代码，加上它的颜色等。

回到你的问题：不要复制数组，以只读方式存储船的点并操纵 x,y 偏移量。

```
public void DrawGalaga(Graphics g)
{       
    g.setColor(Color.red);
    g.drawLine(X0+42,Y0+75,X0+42,Y0+80);
    ...
} 
```

where`X0`和`Y0`是指向 的偏移量`(0,0)`。然后编写一个事件处理程序：

```
void moveUp(int dx, int dy) { X0 += dx; Y0 += dy; } 
```

注意多线程访问`X0`和`Y0`.

# mobile - 2 月 6 日之后移动应用点击量下降

> ID：14960758
> 
> 赞同：0
> 
> 时间：2013-02-19T15:10:40.170
> 
> 标签：mobile, click, traffic, facebook-insights

在我们的应用洞察力中，我们注意到来自移动设备的流量（洞察力 > 流量 > 移动）在去年 2 月 6 日的重大变化之后迅速下降。最近有更多的开发商遭遇类似的下滑吗？对我们来说不幸的是，这发生在推出一些改进和响应式屏幕之前的 2 天，尤其是对于我们的 iPhone 用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T17:53:34.083

您的洞察力问题可能与最近的 Facebook 洞察力错误有关，该漏洞也影响了您已经看到的移动设备。[TechCrunch](http://techcrunch.com/2013/02/22/facebook-insights-bugs/)上更详细地介绍了移动问题。您可以阅读[官方 Facebook](http://www.facebook-studio.com/news/item/important-update-to-page-insights-reporting)帖子，但尚未涵盖移动洞察问题...

希望有帮助。

# xtext - Xtext：无法解析对 JvmType 'String' 的引用

> ID：14960760
> 
> 赞同：2
> 
> 时间：2013-02-19T15:10:44.147
> 
> 标签：xtext, xbase

对于我们在大学的主项目，我们使用 Xtext 创建了多个 DSL。其中一个 DSL 是模型实体 DSL，它允许用户创建具有属性和方法的类。

我们重用 Xbase 是因为，当然，我们希望这些方法具有真正的编程语言，而无需重新发明轮子：

```
grammar … with org.eclipse.xtext.xbase.Xbase

generate …

EntityModel:
    'package' importedNamespace=QualifiedName
    …
    implementation=Entity;

Entity:
    'entity' name=ValidID '{'
        features+=Feature*
    '}';

Feature:
    LocalVariable | …;

LocalVariable:
    'var' (isStatic?='static')? name=ValidID ':' type=JvmTypeReference; 
```

由于某种原因，即使 LocalVariable 的类型设置为 JvmTypeReference，但在使用 String 时（在实际实现中），它总是会显示错误

> Xtext：无法解析对 JvmType 'String' 的引用

```
package com.example
Entity foo {
    var bar: String
} 
```

我们已经尝试过使用`ImportedNamespaceAwareLocalScopeProvider`which in`getImportedNamespaceResolvers`添加 java.lang.* ，如下所示：

```
List<ImportNormalizer> implicitImports = super.getImportedNamespaceResolvers(context, ignoreCase);
List<ImportNormalizer> javaLangImports = singletonList(new ImportNormalizer(QualifiedName.create("java", "lang"), true, ignoreCase));
implicitImports.addAll(javaLangImports);
return implicitImports; 
```

即使认为该方法被调用了很多次，导入仍然不起作用。在检查`EObject context`参数时，它有时会返回 java.lang.String （我猜这是为了，`JvmTypeReference`但它仍然显示错误。

在`RuntimeModule`新的范围提供程序中配置如下：

```
public void configureIScopeProviderDelegate(com.google.inject.Binder binder) {
    binder.bind(org.eclipse.xtext.scoping.IScopeProvider.class).annotatedWith(com.google.inject.name.Names.named(org.eclipse.xtext.scoping.impl.AbstractDeclarativeScopeProvider.NAMED_DELEGATE)).to(MasterDSLImportedNamespaceAwareLocalScopeProvider.class);
} 
```

在`Workflow`我们配置的

```
fragment = scoping.ImportNamespacesScopingFragment {}
fragment = exporting.QualifiedNamesFragment {}
fragment = builder.BuilderIntegrationFragment {} 
```

项目的其余部分已经相当复杂了（一个项目中有 4 个 Xtext DSL 和多个生成器）。但除了完全不同的 DSL，它们使用几乎相同的工作流程和`RuntimeModule`配置。另一个 DSL 也使用`JvmTypeReference`并且也找不到例如布尔值或其他任何东西。

问题当然是：我们做错了什么还是我们必须做的其他事情。当我们有一个小得多的项目时，它曾经可以工作，但在一些重大更改之后突然停止工作。

# javascript - 向 Rails 模型提交价值

> ID：14960762
> 
> 赞同：0
> 
> 时间：2013-02-19T15:10:52.337
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3, models

如果我有这个作为我的表格

```
<%= form_for @rating, :id =>"ratingForm" do |f| %>
<%= f.hidden_field :ratings, :value => '' %>
<%= f.hidden_field :user_id, :value => current_user.id %>
<%= f.hidden_field :recipe_id, :value => @recipe.id %>
<div class="rateit" id="rateit10">
</div>
<%= f.submit "Submit" %>
<% end %> 
```

我如何在这个 div 中传递内容的值

```
<div class="rateit" id="rateit10">
</div> 
```

如果我使用这个 jquery，我可以获得 rateit10 的值

```
$("#rateit10").bind('rated', function() { 
 $(this).rateit('value');
  }); 
```

该值来自单击一组星星，我尝试使用 Rateit 插件在 Rails 中实现评级系统

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:22:14.407

这会将哈希传递给您的控制器方法：

```
 function pass_to_controller(){
    var rate_value = $("#ratings").value();
    var user_id = $("#user_id").value();  /*you already have access to this through current_user.id */
    var recipe_id = $("#recipe_id").value();

    $.ajax({
        type: "Get",
        url: "path_to_your_controller_action_here",
        timeout: 5000,
        data: {rating : rate_value, user : user_id, recipe : recipe_id }
    }).done(function(response){//do your response here});
} 
```

你不能直接传递给模型——这绕过了 MVC 背后的整个思考过程。所以最好的方法是使用`ajax`，将它传递给你的控制器方法，然后如果你需要在你的数据库中做一些事情，调用你的模型方法。

像这样使用的好处`ajax`是当有人评价某事时它不会重新加载你的页面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T15:24:51.777

最简单的方法是在用户单击星标时触发隐藏字段的更新，而不是在提交表单时读取星标的值。

我应该在星星上添加一个 onnclick 事件来更新隐藏字段。为此，请使用 :id => "my_hidden_​​field" 向隐藏字段添加一个 ID 来命名它。

然后，当用户点击星号时触发 javascript 函数：

```
$("#second_star").click(function() {
  $("my_hidden_field").value = 2;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T15:29:20.490

**使用 javascript 在 div 中显示文本：**

```
divObj = document.getElementById("rateit10");
            if ( divObj ){
                if ( divObj.textContent ){ //FF
                    alert ( divObj.textContent );
                }else{  //IE            
                    alert ( divObj.innerText );  //alert ( divObj.innerHTML );
                } 
            } 
```

**使用 javascript 在 div 中显示 innerdiv：**

```
myDivObj = document.getElementById("rateit10");
if ( myDivObj ) {
   alert ( myDivObj.innerHTML ); 
}else{
   alert ( "Text Found" );
} 
```

**使用 jquery 在 div 中显示文本**

```
$(function(){
       var txt = $('#rateit10').text();
       alert(txt);
    }; 
```

# android - 在当前 ContentView 之外的其他 XML 文件中插入 TextView

> ID：14960774
> 
> 赞同：0
> 
> 时间：2013-02-19T15:11:26.523
> 
> 标签：android

我想将 TextView 插入到 LinearLayout 中，该文件位于另一个 XML 文件中，该文件用作 ListView 的布局。但似乎我无法访问其他 XML 文件中的 LinearLayout。

我运行一个获取类别标题的循环，并且对于每个标题，我想创建一个带有标题的 TextView。

**我如何插入 TextView**

```
LinearLayout Layout = (LinearLayout) findViewById(R.id.itemDesign); //When debugging I can see "Layout" is just null. itemDesign is also not in main.xml.
TextView title = new TextView(this);
title.setText(CatName);
Layout.addView(title); 
```

**ListView“single_list_item.xml”使用的XML**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/itemDesign"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <!-- Name Label -->
    <TextView android:id="@+id/name_label"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textSize="25dip"
        android:textStyle="bold"
        android:paddingTop="10dip"
        android:paddingBottom="10dip"
        android:textColor="#43bd00"/>
    <!-- Description Label -->
    <TextView android:id="@+id/email_label"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textColor="#acacac"/>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:37:55.493

听起来你需要夸大你的观点。在`getView()`适配器类中

```
LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View rowView = inflater.inflate(R.layout.your_layout, parent, false); 
```

然后访问你`TextView`的

```
TextView firstTV = (TextView) rowView.findViewById(R.id.some_id); 
```

**[关于 LayoutInflater](http://developer.android.com/reference/android/view/LayoutInflater.html)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T15:16:24.327

我猜，您在使用之前没有设置活动内容视图`findViewById()`：

```
setContentView(R.layout.myLayout); 
```

之后初始化您的文本视图，并为其添加宽度、高度参数。然后将该文本视图添加到布局中应该没有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T15:24:05.813

也许您应该在添加 TextView 后尝试使布局无效：

```
Layout.addView(title);
Layout.invalidate(); 
```

我仍然不完全确定你想要实现什么，也许你可以给我们一些关于你想要完成的更多信息？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T15:38:37.283

如果你想基于一个xml文件新建一个ListView项，你需要先inflate它。然后你可以调用`findViewById()`结果视图来获取孩子。

```
LayoutInflater inf = LayoutInflater.from(getContext());
LinearLayout listItemLayout = (LinearLayout)inf.inflate(R.layout.single_list_item, null);

TextView nameLabel = (TextView) listItemLayout.findViewById(R.id.name_label); 
```

# sql - 必须声明标量变量错误SQL

> ID：14960777
> 
> 赞同：1
> 
> 时间：2013-02-19T15:11:27.730
> 
> 标签：sql, stored-procedures

我有这个 SQL 语句，但我有错误必须声明标量变量“@InputPath”

```
IF OBJECT_ID('DBO.SP_INSERT_REQUESTS') IS NULL BEGIN
    EXEC('CREATE PROCEDURE DBO.SP_INSERT_REQUESTS AS RETURN')
    GRANT EXECUTE ON DBO.SP_INSERT_REQUESTS TO PUBLIC
END
GO
ALTER PROCEDURE DBO.SP_INSERT_REQUESTS    
    @Name NVARCHAR(512), 
    @Code NVARCHAR(50),
    @InputPath NVARCHAR(2000),
    @OutputPath NVARCHAR(2000)
AS
GO

SET QUOTED_IDENTIFIER OFF

--DECLARE @InputPath varchar(2000) = "c:\MyDoc1.xsd"

DECLARE @InputValue XML

--DECLARE @OutputPath varchar(2000) = "c:\MyDoc2.xsd"

DECLARE @OutputValue XML

DECLARE @QUERY NVARCHAR(4000) SET @QUERY  = "
    SELECT @InputValue = InputExample.BulkColumn
    FROM OPENROWSET (BULK '"+@InputPath+"', SINGLE_BLOB) AS InputExample;   

    SELECT @OutputValue = InputExample.BulkColumn
    FROM OPENROWSET (BULK '"+@OutputPath+"', SINGLE_BLOB) AS InputExample;
"   

EXEC SP_EXECUTESQL @QUERY, N'@InputValue XML out, @OutputValue XML out', @InputValue out, @OutputValue out

INSERT INTO MyTable(Name, Code, Input, Output)
VALUES('value1', 'value2' , @InputValue, @OutputValue) 
```

我已经声明了参数，所以我不明白为什么会出现错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T15:16:01.837

删除 'AS' 和 'SET QUOTED_IDENTIFIER OFF' 之间的 GO。问题是您在不同的批次中声明了变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T15:21:18.737

动态 sql 在*不同的会话中运行，因此在动态查询之外定义的变量对于动态查询*[DEMO-HERE](http://sqlfiddle.com/#!3/d41d8/9077)将不可用。

再说一次，如果您在动态查询中声明它们，它们将在查询之外不可用。[演示 - 这里](http://sqlfiddle.com/#!3/d41d8/9079)

我可以理解为什么您使用动态 sql，因为您无法将参数传递给 openrowset。我认为你可以做这样的事情来解决这个问题。[演示](http://sqlfiddle.com/#!3/a8996/3)

# java - 我可以使用普通的 JDK 框架强制集合中单个元素的不变性吗？

> ID：14960782
> 
> 赞同：2
> 
> 时间：2013-02-19T15:11:32.590
> 
> 标签：java, collections

我知道有像这样的包装器方法[`Collections#unmodifiableSet`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#unmodifiableSet%28java.util.Set%29)和它的其他变体[`Collections#unmodifiableMap`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#unmodifiableMap%28java.util.Map%29)，[`Collections#unmodifiableList`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#unmodifiableList%28java.util.List%29)等等，这使得集合不可变，前提是客户端只通过这些方法返回的引用而不是直接访问集合。但它是否会阻止集合中的单个对象是不可变的？我可以使用标准 JDK 类而不是像 Google Guava 这样的 api 来实现相同的目标吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:15:11.970

不，您必须使自己的类成为不可变版本。

样本 ：

```
List< StringBuilder > l1 = new LinkedList< StringBuilder >();
l1.add( new StringBuilder()); // ok
List< StringBuilder > l2 = Collections.unmodiableList( l1 );
l2.get(0).append( "Hello" );  // ok, because StringBuilder, unlike String is mutable
l2.add( new StringBuilder()); // throws exception 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T15:17:30.190

我能想到的让一个类不可变的唯一方法是把它包装在一个代理中——然后你可以访问控制任何变异方法：

IE。

```
MyClass {
  private int anInt;

  public void setInt(int a) {
      anInt = a;
  }
  public int getInt() {
      return anInt;
  }
  ... 
```

进而

```
MyProxy {
  private MyClass myClass = ...;

  public int getInt() {
      return myClass.getInt();
  }
  ... 
```

等等。

您也可以通过反射来实现相同的目的（以同样的方式 Spring 包装 bean，您通常只与它们的代理交互）

不过，如果客户掌握了实际的底层类（本例中为 MyClass），那么他们将能够改变内部。没有真正的方法可以直接阻止这种情况，除了只公开你让客户看到的“可变”包装器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T15:41:04.600

如果我理解你的目标。你可以使用这样的东西

```
class Wraper<T>{
    List<T> list = new ArrayList<T>(); //Other Collection?
    T someObj = getYourInstance();
    public T get(int index) {
        T obj = list.get(index);
        if (obj.equals(someObj)){//should be overriden
           return createInstanceOf(obj);
        } else {
           return obj;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T15:45:51.017

您要求的是`const`Java 中的等价物。这是不可能的。多年来，许多用户（包括我自己）都要求将其作为对 Java 的增强。它被 Sun 关闭并拒绝了。

[http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4211070](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4211070)

如果你想这样做，你必须在你的对象中构建一个可变性标志（可能在构建时）。然后在每个 mutator 方法中，检查可变性标志。也许您可以使用诸如 CGLIB 之类的代理库来做一些更“花哨”的事情，但对于您想要实现的目标来说，它可能过于复杂。

# three.js - 所有世界对象的三个js边界框

> ID：14960784
> 
> 赞同：0
> 
> 时间：2013-02-19T15:11:43.033
> 
> 标签：three.js

threejs 是否保留或可以为所有对象生成一个边界框？

任何人都知道一种简单的方法来获得代表世界上所有物体的边界框的两个点？

需要世界空间中所有物体的边界框，所以如果一个长物体已经旋转，我想在考虑到该物体旋转的情况下找到世界的边界框。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:47:44.817

边界框来自几何。您可以找到“顶部”或根对象的边界框，并计算这些边界框的最小和最大点。那会给你“世界”边界框。

# gridview - 将组数据绑定到 Gridview windows 8 商店应用程序

> ID：14960785
> 
> 赞同：2
> 
> 时间：2013-02-19T15:11:47.970
> 
> 标签：gridview, windows-8, windows-store-apps

这是我第一个使用 XAML 的 win 8 商店应用程序，所以有点不确定。我想将数据绑定到gridview。为此，我有一个

```
class Category
{
    public int Id { get; set; }
    public string CategoryName { get; set; }
    public string IconPath { get; set; }
} 
```

在后面的代码中，我有

```
protected override void LoadState(Object navigationParameter, Dictionary<String, Object> pageState)
    {
        // TODO: Assign a bindable collection of items to this.DefaultViewModel["Items"]
        Model.Utility util = new Utility();
        var categories = util.GetCategoryList(); // this returns List<Category>
        this.DefaultViewModel["Items"] = categories;
    } 
```

我的xaml是：

```
 <!-- Horizontal scrolling grid used in most view states -->
    <GridView
        x:Name="itemGridView"
        AutomationProperties.AutomationId="ItemsGridView"
        AutomationProperties.Name="Items"
        TabIndex="1"
        Grid.RowSpan="2"
        Padding="116,136,116,46"
        ItemsSource="{Binding Source={StaticResource itemsViewSource}}"
        ItemTemplate="{StaticResource Standard250x250ItemTemplate}"
        SelectionMode="None"
        IsSwipeEnabled="false"/> 
```

但是当我运行应用程序时，我没有看到任何数据。我在哪里做错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T15:55:52.847

Standard250x250ItemTemplate 默认绑定到属性 Title、SubTitle 和 Image。除非您更新了模板，否则您的 Category 类没有这些属性，而 ItemTemplate 没有任何可显示的内容。我怀疑当您调试应用程序时出现数据绑定错误 VS 说找不到 Title、SubTitle 和 Image 属性。

要更正此问题，请右键单击 GridView，选择 Edit Additonal Templates，Edit Generated Items (ItemTemplate)，Edit a Copy 并更新模板以将正确的元素绑定到类上的属性名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T16:27:30.260

根据您代码中的一些名称，您似乎正在尝试为 Grid App 模板重用一些模板代码。

我还将假设您在同一个 XAML 文件中定义了以下资源：

```
 <CollectionViewSource x:Name="itemsViewSource" Source="{Binding Items}" /> 
```

如果是这样，您应该看到每个类别的矩形，但没有数据。那是因为您正在引用`Standard250x250ItemTemplate`数据模板（在 StandardStyles.xaml 中），并且它正在您的数据源中查找名称为 和 的特定`Title`字段`Subtitle`。但是对于类别，您有`CategoryName`和`Id`。

试试这个，看看你的数据是否出现。这上面没有任何样式，但是您可以从中复制样式`Standard250x250ItemTemplate`并根据需要进行调整。您可以通过 IDE（Blend 或 Visual Studio）执行此操作，无需剪切和粘贴 XAML。

```
<GridView
    x:Name="itemGridView"
    AutomationProperties.AutomationId="ItemsGridView"
    AutomationProperties.Name="Items"
    TabIndex="1"
    Grid.RowSpan="2"
    Padding="116,136,116,46"
    ItemsSource="{Binding Source={StaticResource itemsViewSource}}"

    SelectionMode="None"
    IsSwipeEnabled="false">

    <GridView.ItemTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding CategoryName}" />
        </DataTemplate>
    </GridView.ItemTemplate>
</GridView> 
```

# opengl - GL_TRIANGLES 与 GL_TRIANGLES_STRIP

> ID：14960786
> 
> 赞同：0
> 
> 时间：2013-02-19T15:11:48.620
> 
> 标签：opengl, mapping, textures

假设我有一个凹多边形并想在其上映射纹理。我可以在上面使用 GL_TRIANGLE_STRIP 吗？我猜不是，因为三个连续的点可以在实际多边形“外部”形成一个三角形。到目前为止，我一直在手动对多边形进行三角测量，并使用 GL_TRIANGLES 参数调用 glDrawArray ，效果很好。所以我的问题是：对于凹多边形，三角剖分/分解是不可避免的吗？（在第一种情况下，三角化并使用 GL_TRIANGLES，第二种情况在凸 sub_polygons 中分解，不需要三角形，并使用 GL_TRIANGLES_STRIP）

# java - 如果位置尚未固定，如何停止 gps？

> ID：14960791
> 
> 赞同：0
> 
> 时间：2013-02-19T15:12:03.133
> 
> 标签：java, android, gps

在我的 android 应用程序中，我使用 gps 激活了固定位置：

```
mLManager.requestLocationUpdates (LocationManager.GPS_PROVIDER, 30000, 0, mLListener); 
```

以便每 30 秒 GPS 处于活动状态并寻找位置。我想要的是：gps第n次被激活，当我走进一座建筑物时，我的位置没有固定好，所以他无限期地寻找这个位置。60秒后位置不固定可以停止吗？我怎样才能做到这一点？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:29:20.470

```
public boolean getLocation(Context context) {
         mLManager.requestLocationUpdates (LocationManager.GPS_PROVIDER, 30000, 0,mLListener);
         timer1=new Timer();
         timer1.schedule(new GetLastLocation(), 60000);

         return true;
}

LocationListener mLListener = new LocationListener() {
         public void onLocationChanged(Location location) {
         timer1.cancel();
         }
};

class GetLastLocation extends TimerTask {
       @Override
        public void run() {
        }
} 
```

它会寻找一个位置，如果它没有找到任何位置，并且 60 秒到期，那么计时器会并且你可以执行一个动作。如果它确实找到了一个位置，它将取消计时器。

# passport.js - 自动确定 OpenID returnURL

> ID：14960792
> 
> 赞同：1
> 
> 时间：2013-02-19T15:12:04.460
> 
> 标签：passport.js, google-openid

我正在使用 passport.js 为我的 webapp 实现 Google OpenID 身份验证。但是，我不确定指定 returnURL 的最佳方式是什么。

现在我在配置文件中设置我的服务器主机名，就像这样

```
server.host = 'http://foo.bar.com:5990' 
```

但是对我来说，硬编码服务器 URL 似乎很愚蠢。

有没有办法告诉 passport.js 或 Google OpenID auth 返回到它开始的同一个域？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-04T12:24:32.180

实际上，事实证明我可以在 returnURL 中使用相对 URL，它会起作用。:-)

# java - Java，冒泡排序，数组，线程“主”错误中的异常

> ID：14960796
> 
> 赞同：0
> 
> 时间：2013-02-19T15:12:18.413
> 
> 标签：java, arrays, exception, bubble-sort

我今天在课堂上有一个关于冒泡排序的教程，但我遇到了一个不知道如何解决的错误。

线程“main”中的异常 java.lang.ArrayIndexOutOfBoundsException: 8 在 BubbleSorter.main(BubbleSorter.java:24)

它没有被评估，但我想通过它继续下去。谢谢你。下面是我的全部代码。

```
public class BubbleSorter {
    public static void main(String[] args)
    {
        int i;
        int array[] = { 12, 9, 4, 99, 120, 1, 3, 10 };
        System.out.println("Array Values before the sort:\n");
        for (i = 0; i < array.length; i++)
            System.out.print(array[i] + " ");
        System.out.println();
        System.out.println();

        bubble_srt(array, array.length);

        System.out.print("Array Values after the sort:\n");
        for (i = 0; i < array.length; i++)
            ;
        System.out.print(array[i] + " ");
        System.out.println();
        System.out.println("PAUSE");
    }

    private static void bubble_srt(int[] array, int length) {
        int i, j, t = 0;
        for (i = 0; i < length; i++) {
            for (j = 1; j < (length - 1); j++) {
                if (array[j - 1] > array[j]) {
                    t = array[j - 1];
                    array[j - 1] = array[j];
                    array[j] = t;
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T15:15:39.940

你有一个小错误：

这：

```
for (i = 0; i<array.length; i++);
System.out.print(array[i] + " "); 
```

应该：

```
//                              v - Semicolon removed
for (i = 0; i<array.length; i++)
    System.out.print(array[i] + " "); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T15:19:26.473

也改变

```
for (j = 1; j < (length - 1); j++) { 
```

到

```
for (j = 1; j < length; j++) { 
```

您遗漏了数组的最后一个元素！

输出

```
Array Values before the sort:

12 9 4 99 120 1 3 10 

Array Values after the sort:
1 3 4 9 10 12 99 120 
PAUSE 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T15:22:14.060

您需要更改 2 行

```
for (i = 0; i < array.length; i++)
        ;
System.out.print(array[i] + " "); 
```

到

```
for (i = 0; i < array.length; i++)
    System.out.print(array[i] + " "); 
```

和

```
for (j = 1; j < (length - 1); j++) { 
```

到

```
for (j = 1; j < (length); j++) { 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T15:26:49.817

在第 18 行，你需要去掉 ; 或放在括号中{

# sql - 为性能选择索引和主键

> ID：14960801
> 
> 赞同：1
> 
> 时间：2013-02-19T15:12:33.613
> 
> 标签：sql, database, performance, postgresql, database-design

我是数据库设计的新手，在为战斗游戏设计 PostgreSQL 数据库时遇到了很多麻烦。

在这个游戏中，玩家将在他们之间进行战斗，获得资源来购买更好的武器和盔甲。战斗将被记录以供将来审查，并且战斗的数量预计将迅速增长，例如，1k 玩家战斗 1k 回合将产生 500k 记录。

游戏交互性降低，花费积分升级战斗机装备和能力。战斗由机器解决。

细节：

*   每个战士只能拥有一次特定类型的武器或盔甲。
*   战士几乎都会被搜索`id`。
*   我经常需要搜索特定战士拥有哪些装备（武器和/或盔甲），但我不希望搜索哪些战士拥有特定类型的武器。
*   战斗通常会被`winner`或搜索`loser`。
*   两个给定的`fighters`可以在不同的日期多次战斗，所以元组`winner`-`loser`在桌子上不是唯一的`combats`
*   `fighters`表包含很多列，这些列通常会同时被检索到（我创建了两个“Fighter”类的对象，在战斗开始时包含所有相关信息）

这是我目前的设计：

```
CREATE TABLE IF NOT EXISTS weapons (
    id serial PRIMARY KEY,
    *** Game stuff ***
);

CREATE TABLE IF NOT EXISTS armors (
    id serial PRIMARY KEY,
    *** Game stuff ***
);

CREATE TABLE IF NOT EXISTS fighters (
    id serial PRIMARY KEY,
    preferred_weapon INT references weapons(id),
    preferred_armor INT references armors(id),
    *** Game stuff ***
);

CREATE TABLE IF NOT EXISTS combats (
    id serial PRIMARY KEY,
    winner INT references fighters(id),
    loser  INT references fighters(id),
    *** Game stuff ***
);

CREATE TABLE IF NOT EXISTS fighters_weapons (
    fighter INT NOT NULL references fighters(id),
    weapon INT NOT NULL references weapons(id),
    PRIMARY KEY(fighter, weapon)
);

CREATE TABLE IF NOT EXISTS fighters_armors (
    fighter INT NOT NULL references fighters(id),
    armor INT NOT NULL references armors(id),
    PRIMARY KEY(fighter, armor)
); 
```

我的问题是：

1.  你觉得我的设计适合吗？
2.  我已经看到很多示例数据库包含一个`id`列作为每个表的主键。有什么理由吗？我应该这样做而不是我在`fighters_weapons`and上使用的多列主键`fighters_armors`吗？
3.  PostgreSQL 会自动为每个主键创建索引，但我不希望通过它搜索几个表（即`combats`）。我应该删除性能索引吗？PostgreSQL 抱怨现有的约束。
4.  正如我将搜索`fighters_weapons`和`fighters_armors`by`fighter`以及`combats`by `winner`and`loser`一样，您认为我应该为这些表上的所有这些列创建索引吗？
5.  任何性能改进建议？最常用的操作是：插入和查询战士，查询给定战士的装备和插入战斗。

非常感谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T00:20:34.867

要解决您的明确问题：

2) 最好使用“自然”值作为主键，即不是序列号（如果存在）。如果您不太可能使用序列号作为标识符，我会说最好不要添加它。

3) 除非您打算在战斗表中非常快速地插入许多行，否则在 id 列上有索引可能不会对您造成太大伤害。

4) 如果索引{战斗机，武器}存在，则不需要在{战斗机}上创建索引，同样，如果索引{战斗机，盔甲}存在，则不需要在{战斗机}上创建索引。通常，您不会从创建作为另一个多列索引前缀的索引中受益。另外，考虑到您描述的访问模式，在战斗中创建 {winner} 和 {loser} 索引似乎是一个好主意。

5) 除了表设计之外，如果您自己安装了数据库，您可能还需要设置一些数据库调整参数。如果有经验的数据库管理员设置了数据库，他/她可能已经为您完成了这项工作。

# php - 使用php登录网站

> ID：14960804
> 
> 赞同：0
> 
> 时间：2013-02-19T15:12:41.687
> 
> 标签：php, curl, web-scraping, web-crawler

我尝试使用 php 自动登录网站，但这段代码没有出现任何错误，也没有给我任何结果。这是我尝试过的代码，我只得到一个空白页面，我期待登录后页面的源代码。

```
<?php
$fields_string=array();
$url = 'https://subscriber.hoovers.com/H/login/login.html';

$fields = array(
        "j_username"=>"XXXXXX",
"j_password"=>"XXXX"
    );

//url-ify the data for the POST
foreach($fields as $key=>$value) 
{ 
$fields_string .= $key.'='.$value.'&'; 
 }
 rtrim($fields_string,'&');

//open connection
$ch = curl_init();

//set the url, number of POST vars, POST data
curl_setopt($ch,CURLOPT_URL,$url);
curl_setopt($ch,CURLOPT_POST,count($fields));
curl_setopt($ch,CURLOPT_POSTFIELDS,$fields);

//execute post
$result = curl_exec($ch);
echo $result;

//close connection
curl_close($ch);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T04:04:26.403

通过添加以下 curl 选项，我能够让您的脚本返回页面的源代码：

```
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false); 
```

默认情况下 curl 不信任 Web 服务器的证书，上面的最后一个选项告诉 curl 不要验证 Web 服务器。您可能希望将最后一个选项切换为：

```
curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, true); 
curl_setopt ($ch, CURLOPT_CAINFO, "path/to/your/cacert.pem"); 
```

如果您打算走这条路，我会查看[在 PHP 中使用 cURL 访问受 HTTPS (SSL/TLS) 保护的站点](http://unitstep.net/blog/2009/05/05/using-curl-in-php-to-access-https-ssltls-protected-sites/)，这是一个很棒的教程，它将介绍您需要了解的所有内容。

# jquery - tinymce 删除 html

> ID：14960811
> 
> 赞同：1
> 
> 时间：2013-02-19T15:13:00.433
> 
> 标签：jquery, html, image, tinymce

我已经搜索了这个网站（和谷歌），但我无法让它工作。我正在尝试在 tinymce 文本区域中插入图像，但是当我单击“保存”按钮（在 tinymce UI 上）时，必要的 html 会不断被删除。我正在使用 tinymce jquery 版本。

我已经尝试将以下内容添加到 tinymce.init：

```
cleanup: false,
verify_html : false,
media_strict: false,
valid_elements: "*[*]", 
```

……但无济于事。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:31:37.503

不幸的是`valid_elements: "*[*]"`，是越野车。您需要根据需要设置tinymce 配置参数valid_elements 和valid_children。

# objective-c - 如何调试和修复objective-c ipad应用程序中的崩溃

> ID：14960814
> 
> 赞同：0
> 
> 时间：2013-02-19T15:13:04.950
> 
> 标签：objective-c, ios6

我有一个地图视图，它实例化了一个表示模型，以便在我的应用程序中运行它的所有逻辑。我有一个列表组件。用户选择他们想在地图上看到的一些数据。这被发送到我的模型，一旦在视图上调用更新，我将一个 NSObject 传递给 Map 视图，然后希望将此数据交给 PM 以便在视图上运行逻辑。

这是我的地图视图代码。最后一行是事情崩溃的地方“[pm showMKL:d];” 被调用。如果我注释掉这条线，事情就会顺利进行。

这是一个 iOS 6 应用程序，因此正在使用 ARC。一些搜索表明存在内存泄漏，但运行分析器似乎并没有暗示这一点。如果我在运行分析的情况下运行应用程序，我也无法产生崩溃。

```
#import "MapView.h"

@implementation MapView

-(id)initWithModel:(MainDM*)dm:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self)
    {
        _dm = dm;
        [_dm register:self];
        pm = [[MapPM alloc] initWithModel:_dm];

        CLLocationCoordinate2D coord = {.latitude =  32.61724, .longitude =  -106.74128};
        MKCoordinateSpan span = {.latitudeDelta =  1, .longitudeDelta =  1};
        MKCoordinateRegion region = {coord, span};

        [self setRegion:region];
    }
    return self;
}

-(void)update:(DataObject*)data
{
    if([[data getType] isEqualToString:@"CURRENT_KML_CHANGE"])
    {
        KmlVO *d = (KmlVO*)[data getData];
        [pm showMKL:d];
    }
}

@end 
```

这是 MapView 的 .h

```
#import <MapKit/MapKit.h>
#import "MainDM.h"
#import "BBView.h"
#import "MapPM.h"
@interface MapView : MKMapView <BBView>

@property(nonatomic,strong)MainDM *dm;
@property(nonatomic,strong)MapPM *pm;

-(void)update:(DataObject*)data;
-(id)initWithModel:(MainDM*)dm:(CGRect)frame;
@end 
```

这是 MapPM 代码。

```
#import "MapPM.h"
@implementation MapPM

-(id)initWithModel:(MainDM *)dm
{
    self = [super init];

    if(self)
    {
        _baseMaps = [[NSMutableArray alloc] init];
        _dm = dm;
    }
}
-(void)showMKL:(KmlVO*)vo
{

    if([_baseMaps containsObject:vo])
    {
        NSLog(@"not added");
    }
    else
    {
        NSLog(@"added kml");
        [_baseMaps addObject:vo];
    }
}
@end 
```

这是 PM 的 .h

```
#import <Foundation/Foundation.h>
#import "MainDM.h"
#import "KmlVO.h"
@interface MapPM : NSObject

@property(nonatomic, retain)NSMutableArray * baseMaps;
@property(nonatomic, retain)MainDM *dm;
-(id)initWithModel:(MainDM *)dm;
-(void)showMKL:(KmlVO*)vo;

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T16:37:00.923

毕竟我不需要看你的头文件。

```
-(id)initWithModel:(MainDM *)dm
{
    self = [super init];

    if(self)
    {
        _baseMaps = [[NSMutableArray alloc] init];
        _dm = dm;
    }
} 
```

您没有返回 self，因此，您正在对未定义的对象执行 showMKL。你检查你的警告了吗？

此外，您正在使用属性（而不是 @interface 中的实例变量，就像您让我们相信的那样）。因此，`[pm showMKL:data]`应该是真的`[self.pm showMKL:data]`。

# php - Zend Studio 9 忽略换行时的“仅空格”缩进

> ID：14960816
> 
> 赞同：0
> 
> 时间：2013-02-19T15:13:09.310
> 
> 标签：php, symfony, zend-studio

我将 Zend Studio 9 与 Symfony 2 插件一起使用，并将代码样式也设置为 Symfony。代码样式设置为使用 4 个空格作为缩进，有时不使用。

例如，假设我编写了以下代码：

```
$test = array(); 
```

当我现在将光标放在括号之间并按 Enter 键时，在标有“x”的位置有标签：

```
$test = array(
xxxxxxxx); 
```

我该如何解决这个问题？

[我使用来自“ http://p2-dev.pdt-extensions.org](http://p2-dev.pdt-extensions.org) ”的 Symfony 2 插件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:53:05.960

PDT 开发版本似乎存在问题。我在没有它的情况下重新安装了 Zend Studio，它现在可以工作了。

# testing - Selenium 使用 xpath 字符串选择下拉元素

> ID：14960823
> 
> 赞同：1
> 
> 时间：2013-02-19T15:13:20.047
> 
> 标签：testing, xpath, selenium

我对 selenium 和 xpath 都有非常具体的问题。

我必须根据使用 selenium 的场景进行自动化测试。所有页面都是自动生成的，使用 ID 是不可能的。

尽管所有表单元素都以相同的方式设计。

```
 <table>
 <tr><td> Title </td></tr>
 <tr><td> input/dropdown/etc </td></tr>
 </table> 
```

他是细节

```
<tr>
<td width="34%" valign="top" bgcolor="#ffffc7">
<span class="bold">Status wniosku</span>
<span>Test</span>
</td>
<td width="66%" bgcolor="#ffffc7">
<select id="ctl00_ContentPlaceHolder_2041" class="baseCtrl" name="ctl00$ContentPlaceHolder$2041">
<option value="" selected="selected">- wybierz -</option>
<option value="save">tylko zapisz</option>
<option value="pj">zapisz i wyślij do PJ</option>
</select>
<span>
</span>
<span id="ctl00_ContentPlaceHolder_ctl19" class="validation" style="display:none;">Określ status wniosku</span>
<span id="ctl00_ContentPlaceHolder_ctl20" class="validation" style="display:none;"></span>
<span></span>
</td>
</tr> 
```

使用[http://www.xmlme.com/XpathTool.aspx](http://www.xmlme.com/XpathTool.aspx)我为下拉元素设计了 xpath。

```
//span[text()='LABELNAME']/ancestor::*[1]/following-sibling::*/select/option[text()='TEXTVALUE'] 
```

我想使用 Selenium 点击我找到的元素。我试过 Selenium.Click() 和 Selenium.Select() 的变体，但没有结果。

我的问题是，xpath 的设计是否正确？如果是这样，我应该如何使用 Selenium 执行它？感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:34:31.463

尝试在 xpath 下面选择第二个选项

```
"//span[text()='Test']/ancestor::*[1]/following-sibling::*/selec‌​t" 
```

前任：

```
Selenium.Select("//span[text()='Test']/ancestor::*[1]/following-sibling::*/selec‌​t","label=Save"); 
```

# php - 如何将android项目与保存在工作区外的php文件连接起来？

> ID：14960827
> 
> 赞同：1
> 
> 时间：2013-02-19T15:13:35.490
> 
> 标签：php, android, eclipse, xampp, workspace

是否可以将 Android 项目（使用 Eclipse Indigo 开发）连接到保存在工作区之外的 PHP 文件？

我正在使用 Xampp 服务器并将其保存在 htdocs 下。但我无法将 Eclipse 连接到它。

我没有使用 PDT。如果我必须安装任何插件 .plz 说...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:17:46.870

您可以使用 Android 中的 URL 类调用 PHP 页面。这个问题将帮助您[使用 android 发出 HTTP 请求](https://stackoverflow.com/questions/3505930/make-an-http-request-with-android)

# c# - 如何使用 Roslyn CTP 创建新的解决方案

> ID：14960831
> 
> 赞同：2
> 
> 时间：2013-02-19T15:13:38.967
> 
> 标签：c#, roslyn

我想使用 Roslyn CTP 创建一个解决方案 (.sln) 文件，然后将一些新项目添加到解决方案中。当前的 CTP 是否可以做到这一点，如果可以，您能否提供一个简短的代码片段来说明如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T17:29:42.370

当前的 CTP 不支持该功能。您可以加载现有解决方案，但我们目前不支持创建解决方案文件，或在现有解决方案中添加和删除项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-02T19:26:00.027

您可以通过检查 .sln 和 .csproj 语法（它是 xml）来创建新的解决方案。然后，您可以轻松加载它们。当前的 CTP 不会编写新的解决方案或项目，但可以很好地处理新文档。

# python - wxpython：动态创建的按钮被禁用

> ID：14960838
> 
> 赞同：0
> 
> 时间：2013-02-19T15:14:07.317
> 
> 标签：python, user-interface, wxpython

我想动态创建按钮

```
 self.ctset = wx.BitmapButton(panel, -1, self.pic1, pos=(10,10), size=(50,50))
     self.ctset.Bind(wx.EVT_BUTTON, self.add_ct)
     self.ctset.SetDefault() 
```

和 add_ct 绑定函数

```
def add_ct(self, event):

    pos=(10,self.yct)
    self.yct+=65
    self.new = wx.BitmapButton(self, -1, self.pic1, pos=pos,size=(50,50))
    self.new.SetDefault()
    print "Cutset" 
```

**我不知道我哪里出错了，但我动态创建的按钮似乎总是被禁用！**

我想将一个函数绑定到允许我拖动它们的动态创建的按钮。任何想法都会有很大帮助！

我对 python 和 wxpython 很陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T21:31:09.470

我没有看到任何捕获鼠标坐标的代码，甚至没有任何拖放代码。您需要从 wxPython 网站下载 wxPython 演示包，并查看 ShapedWindow 示例以获取鼠标坐标。另请参阅这个旧线程：[http ://wxpython-users.1045709.n5.nabble.com/Drag-Button-around-a-Panel-td3358640.html](http://wxpython-users.1045709.n5.nabble.com/Drag-Button-around-a-Panel-td3358640.html)

在其中，您会发现有人正在做与您想要的非常相似的事情。我还发现以下链接可能对您有所帮助：

*   [在 wxPython 中的面板之间拖动按钮](https://stackoverflow.com/questions/425722/drag-button-between-panels-in-wxpython)
*   [如何在 wxPython 中平滑移动项目？](https://stackoverflow.com/questions/5761570/how-to-move-items-smoothly-in-wxpython)

# javascript - 如何在使用javascript提交表单之前构造JSON

> ID：14960848
> 
> 赞同：2
> 
> 时间：2013-02-19T15:14:32.753
> 
> 标签：javascript, jquery, form-submit

我在 jsFiddle 上有以下[演示。](http://jsfiddle.net/fmuW6/2/)我想使用 javascript 提交此表单并将 JSON 对象发送回我的控制器。

如您所见，可以将多行添加到表中并提交。在我的 JSON 数据中，我想跟踪哪些复选框被点击了哪些行。例如，基于以下屏幕截图：

![在此处输入图像描述](../Images/cbd1234d1bdce5235baef5d2288884d2.png)

我希望 JSON 对象看起来像这样：

```
{light:[{red:on}, {yellow:off},{green:on}], dark:[{red:off}, {yellow:off},{green:on}]}... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T15:29:21.930

我想出的代码如下所示：

```
var jsonObject = {};
$('.input-row').each(function(index, row) {
    var innerObject = {};
    $(':checkbox', row).each(function(index, checkbox) {
        innerObject[checkbox.name] = checkbox.checked ? 'on' : 'off';
    });
    var key = $('input[type="text"]', row).val();
    jsonObject[key] = innerObject;
});
console.log(jsonObject);
// use jsonObject somehow 
```

我们正在创建一个空对象，它将作为我们的整个 JSON 对象（称为`jsonObject`）。

然后我们遍历输入的每一行（我已经`input-row`向这些行添加了一个类，以便可以轻松地选择它们）。

对于每一行，我们创建另一个空对象（称为`innerObject`），然后遍历其复选框。对于每个复选框，我们添加一个属性到`innerObject`：键是`name`复选框的属性/属性，值是`on`或`off`取决于`checked`状态。最后，我们获取该`text`行上输入的值以用作 中的键`jsonObject`，并将属性添加到其中。

这是上述代码的一个[工作示例。](http://jsfiddle.net/fmuW6/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T15:17:10.843

将表单序列化为 JSON 的最简单方法是使用`jQuery's serializeArray()`

```
JSON.stringify($('form').serializeArray()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T15:34:25.967

您应该构建自己的 JSON 字符串，然后使用`jQuery.parseJSON()`循环表中的所有 tr 元素并收集您需要的信息。

根据 fiddler 中的 html，下面的代码是您的开始。

```
var strJSON = '';

$("#blacklistgrid tr").each(function (i) { 
    if (i != 0) 
    { 
        var currentRow = $(this)
        strJSON += "{ " + currentRow.find("input[name='shade']").val() +"[{red: currentRow.find("input[name='red']").is(":checked")} ]   }";
    } 
});

var theJSON = jQuery.parseJSON(strJSON); 
```

请检查 JSON 字符串的正确格式，我无法检查代码是否有效，但您可以在此处获取逻辑。

# javascript - d3.js 选择名称中带有空格的键

> ID：14960850
> 
> 赞同：4
> 
> 时间：2013-02-19T15:14:36.740
> 
> 标签：javascript, d3.js

我传递到我的 d3 图表中的部分数据看起来像这样。

```
 {
                    "Type": "Streets",
                    "Open": "515910",
                    "Due Soon": "88669",
                    "Overdue": "162642",
                    "Closed": "801993"
                }, 
```

我将如何选择一个键，`Due Soon`因为它有一个空格，通常我从数据（d）中选择对象，例如 d.Type ， d.Open ，我将如何选择 d.Due 很快，这将被视为javascript的两个变量

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T15:16:33.903

`Object["Due Soon"]`应该管用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-21T03:40:18.097

`d['due soon']`也应该工作

# list - 将未定义附加到列表

> ID：14960851
> 
> 赞同：3
> 
> 时间：2013-02-19T15:14:37.340
> 
> 标签：list, erlang

我正在调试一个错误，发现它`undefined`已附加到一个列表中，这导致了后来的崩溃。

我预计使用`++`运算符附加列表以外的内容会导致崩溃。但这对于`undefined`. 这是一个例子：

```
1> [1,2,3] ++ undefined.
[1,2,3|undefined] 
```

尽管它没有崩溃，但该列表不再具有全部功能：

```
1> L = [1,2,3] ++ undefined.
[1,2,3|undefined]
2> L ++ [4].
** exception error: bad argument
     in operator  ++/2
        called as [1,2,3|undefined] ++ [4] 
```

为什么会这样？这与erlang中列表的底层实现有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T16:52:39.097

在 Erlang 中，所有术语都由一个紧凑的类似指针的值表示，称为`Eterm`. 列表操作函数似乎与类型无关。

从这个角度考虑：在 erlang VM 内部，所有 Eterm 都是平等的。头部和尾部列表操作操作被称为非常快。既然需要多次操作来评估 opaque`Eterm`类型以确定它是否是一个列表，那何必呢？

在这种情况下的预期结果是一个错误，而你确实得到了一个。最终。

对于信任程序员有一些话要说，当处理一个增加了几个周期并且经常使用的操作时，忽略一个错误的附加的潜在好处会叠加起来，唯一的惩罚是一个奇怪的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T13:43:04.253

原因是将它的`++`第二个参数附加到它的第一个参数的末尾，该参数**必须**是一个列表。它不对其第二个参数进行任何处理，它只是按原样附加它。所以：

```
1> [1,2,3] ++ undefined.
[1,2,3|undefined]
2> [1,2,3] ++ [undefined].
[1,2,3,undefined] 
```

您可以这样做的原因以及：

```
3> [a|b].
[a|b]
4> [a|[b]].
[a,b] 
```

是一个列表是一个序列列表单元格，一个*单链表*，而不是一个单一的数据结构。如果每个单元格的右侧（称为*尾部*）是另一个列表单元格，`[]`那么您将得到一个*正确的列表*。每个单元格的左侧称为*头部*，通常包含列表的元素。这就是我们在上面的 2 和 4 中的内容。大多数（如果不是全部）库函数都假定列表是正确的列表，如果不是，则会生成错误。请注意，您实际上必须将整个列表降级到最后，以查看它是否正确。

每个列表单元都写成，`[Head|Tail]`语法`[a,b,c]`只是`[a|[b|[c|[]]]]`. 请注意，每个列表单元的尾部都是一个列表，`[]`因此这是一个正确的列表。

对于列表单元的头部和尾部可以是什么类型没有限制。系统从不检查它只是做它。这就是我们在上面的 1 和 3 中所拥有的，其中最后一个列表单元格的尾部（仅 3 中的列表单元格）不是列表或`[]`.

很抱歉在这里有点过度说教。

**编辑：**我看到我已经在这里描述了这个：[函数式编程：什么是“不正确的列表”？](https://stackoverflow.com/questions/1919097/functional-programming-what-is-an-improper-list/1922724#1922724)

# r - geom_text 和分组

> ID：14960855
> 
> 赞同：0
> 
> 时间：2013-02-19T14:42:11.063
> 
> 标签：r, ggplot2, geom-text

这是一段 ggplot2 代码，从样本中绘制了一组 4 个密度：

```
library('reshape')
library('ggplot2')
data <- matrix(0,5,100)
for(i in seq(1,5,1)){
  data[i,] <- rnorm(100,i,1)
}
df <- data.frame(melt(data))
g <- ggplot(data=df, aes(x=value,group=X1)) + 
  geom_density(fill="blue",alpha=0.5)
g 
```

我想在它们的顶部添加密度的“索引”。我尝试了很多东西，包括：

```
g + geom_text(aes(label=X1,y=0.5,group=X1)); 
```

这并没有给我我的期望，而是每个样本的密度指数（因为它忽略了“组”参数）。我肯定错过了一些东西，但是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T15:07:47.300

问题是：`ggplot`打印每个数据点的标签。您首先需要计算分布的中心：

```
df2 <- aggregate(value ~ X1, df, function(x) mean(range(x))/2) 
```

这将返回每个`X1`组的中心。然后，新的数据框，`df2`可以与`geom_text`函数一起使用：

```
ggplot(data = df,aes(x = value, group = X1))+
  geom_density(fill = "blue", alpha = 0.5) +
  geom_text(data = df2, aes(label = X1, y = 0.5)) 
```

![在此处输入图像描述](../Images/5ce96149d9beafd60b0c7001b0cb599b.png)

或者，您可以计算密度峰值的位置：

```
df2 <- aggregate(value ~ X1, df, function(x) {
  dens <- density(x)
  return(dens$x[which.max(dens$y)])
}) 
```

![在此处输入图像描述](../Images/5ccaeb3e49f87f777a3e59756e10789f.png)

# video - ffmpeg 不复制自定义元数据

> ID：14960857
> 
> 赞同：12
> 
> 时间：2013-02-19T15:14:51.363
> 
> 标签：video, ffmpeg, transcoding

我正在尝试修复一些使用 iDevice 制作的视频。视频在元数据中有轮换，只有 Apple 及其软件可以理解，其他人无法理解。解决这个问题非常简单，但我也想将其他元数据保留在文件中，如地理位置。

我尝试了几个版本，结果都一样，例如：

```
ffmpeg -i input.mov -vf vflip,hflip -map_metadata 0 -metadata:s:v:0 rotate=0  -acodec copy output.mp4 
```

这应该有效，它已经提供了元数据的正确预览：

```
ffmpeg version 1.1.2 Copyright (c) 2000-2013 the FFmpeg developers
built on Feb  8 2013 23:55:22 with Apple clang version 4.0 (tags/Apple/clang-421.0.60) (based on LLVM 3.1svn)
configuration: --prefix=/usr/local/Cellar/ffmpeg/1.1.2 --enable-shared --enable-pthreads --enable-gpl --enable-version3 --enable-nonfree --enable-hardcoded-tables --enable-avresample --cc=cc --host-cflags= --host-ldflags= --enable-libx264 --enable-libfaac --enable-libmp3lame --enable-libxvid
libavutil      52\. 13.100 / 52\. 13.100
libavcodec     54\. 86.100 / 54\. 86.100
libavformat    54\. 59.106 / 54\. 59.106
libavdevice    54\.  3.102 / 54\.  3.102
libavfilter     3\. 32.100 /  3\. 32.100
libswscale      2\.  1.103 /  2\.  1.103
libswresample   0\. 17.102 /  0\. 17.102
libpostproc    52\.  2.100 / 52\.  2.100
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '2013-02-17 00.39.36.mov':
  Metadata:
    major_brand     : qt  
    minor_version   : 0
    compatible_brands: qt  
    creation_time   : 2013-02-16 23:39:25
    model           : iPhone 5
    model-deu       : iPhone 5
    encoder         : 6.1
    encoder-deu     : 6.1
    date            : 2013-02-17T00:39:25+0100
    date-deu        : 2013-02-17T00:39:25+0100
    location        : +48.2683+007.7205+172.710/
    location-deu    : +48.2683+007.7205+172.710/
    make            : Apple
    make-deu        : Apple
  Duration: 00:00:09.67, start: 0.000000, bitrate: 16764 kb/s
    Stream #0:0(und): Video: h264 (High) (avc1 / 0x31637661), yuv420p, 1920x1080, 16696 kb/s, 24 fps, 24 tbr, 600 tbn, 1200 tbc
    Metadata:
      rotate          : 180
      creation_time   : 2013-02-16 23:39:25
      handler_name    : Core Media Data Handler
    Stream #0:1(und): Audio: aac (mp4a / 0x6134706D), 44100 Hz, mono, fltp, 61 kb/s
    Metadata:
      creation_time   : 2013-02-16 23:39:25
      handler_name    : Core Media Data Handler
w:1920 h:1080 pixfmt:yuv420p tb:1/600 fr:24/1 sar:0/1 sws_param:flags=2
[libx264 @ 0x7fc248829a00] using cpu capabilities: MMX2 SSE2Fast SSSE3 FastShuffle SSE4.2 AVX
[libx264 @ 0x7fc248829a00] profile High, level 4.0
[libx264 @ 0x7fc248829a00] 264 - core 125 - H.264/MPEG-4 AVC codec - Copyleft 2003-2012 - http://www.videolan.org/x264.html - options: cabac=1 ref=3 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=7 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=6 lookahead_threads=1 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=2 keyint=250 keyint_min=24 scenecut=40 intra_refresh=0 rc_lookahead=40 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00

Output #0, mp4, to 'output.mp4':
Metadata:
  major_brand     : qt  
  minor_version   : 0
  compatible_brands: qt  
  creation_time   : 2013-02-16 23:39:25
  model           : iPhone 5
  model-deu       : iPhone 5
  encoder-deu     : 6.1
  date            : 2013-02-17T00:39:25+0100
  date-deu        : 2013-02-17T00:39:25+0100
  location        : +48.2683+007.7205+172.710/
  location-deu    : +48.2683+007.7205+172.710/
  make            : Apple
  make-deu        : Apple
  encoder         : Lavf54.59.106
Stream #0:0(und): Video: h264 ([33][0][0][0] / 0x0021), yuv420p, 1920x1080, q=-1--1, 12288 tbn, 24 tbc
Metadata:
  handler_name    : Core Media Data Handler
  creation_time   : 2013-02-16 23:39:25
  rotate          : 0
Stream #0:1(und): Audio: aac ([64][0][0][0] / 0x0040), 44100 Hz, mono, 61 kb/s
Metadata:
  creation_time   : 2013-02-16 23:39:25
  handler_name    : Core Media Data Handler
Stream mapping:
  Stream #0:0 -> #0:0 (h264 -> libx264)
  Stream #0:1 -> #0:1 (copy) 
```

但生成的文件仅保留其中一些元数据标签：

```
ffmpeg -i output.mp4 
```

显示：

```
fmpeg version 1.1.2 Copyright (c) 2000-2013 the FFmpeg developers
  built on Feb  8 2013 23:55:22 with Apple clang version 4.0 (tags/Apple/clang-421.0.60) (based on LLVM 3.1svn)
configuration: --prefix=/usr/local/Cellar/ffmpeg/1.1.2 --enable-shared --enable-pthreads -  -enable-gpl --enable-version3 --enable-nonfree --enable-hardcoded-tables --enable-avresample --cc=cc --host-cflags= --host-ldflags= --enable-libx264 --enable-libfaac --enable-libmp3lame --enable-libxvid
libavutil      52\. 13.100 / 52\. 13.100
libavcodec     54\. 86.100 / 54\. 86.100
libavformat    54\. 59.106 / 54\. 59.106
libavdevice    54\.  3.102 / 54\.  3.102
libavfilter     3\. 32.100 /  3\. 32.100
libswscale      2\.  1.103 /  2\.  1.103
libswresample   0\. 17.102 /  0\. 17.102
libpostproc    52\.  2.100 / 52\.  2.100
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'test.mp4':
Metadata:
  major_brand     : isom
  minor_version   : 512
  compatible_brands: isomiso2mp41
  creation_time   : 2013-02-16 23:39:25
  date            : 2013-02-17T00:39:25+0100
  encoder         : Lavf54.59.106
Duration: 00:00:09.67, start: 0.000000, bitrate: 3286 kb/s
  Stream #0:0(und): Video: mpeg4 (Simple Profile) (mp4v / 0x7634706D), yuv420p, 1920x1080 [SAR 1:1 DAR 16:9], 3219 kb/s, 24 fps, 24 tbr, 12288 tbn, 24 tbc
  Metadata:
    creation_time   : 2013-02-16 23:39:25
    handler_name    : VideoHandler
  Stream #0:1(und): Audio: aac (mp4a / 0x6134706D), 44100 Hz, mono, fltp, 61 kb/s
  Metadata:
    creation_time   : 2013-02-16 23:39:25
    handler_name    : SoundHandler 
```

我还尝试手动添加我感兴趣的一个标签

```
-metadata:g location=+48.2683+007.7205+172.710/ 
```

结果没有变化。

输出为 .mov 也不会改变任何东西。

添加非标准元数据有什么技巧吗？我如何找回那里的位置？

提前感谢任何可以对此提供一些见解的人。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-04-19T19:39:32.473

FFmpeg mp4 多路复用器仅写入已知元数据类型的选择列表。一些复用器，如 AVI，将使用自定义标签写入所有元数据字段（部分是为了允许这种重新复用用例），但[movenc.c](http://git.videolan.org/?p=ffmpeg.git;a=blob;f=libavformat/movenc.c;h=b6821d447c92183101086cb67099b2f4804293de;hb=HEAD)还没有这样做（参见第 2911 或 3064 行中的代码块）。您可以自己实现它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-20T00:30:31.553

显然 FFMPEG 有一个关于这个问题的记录错误：

[https://trac.ffmpeg.org/ticket/4209](https://trac.ffmpeg.org/ticket/4209)

# c# - HttpListenerResponse - 抛出 HttpListenerException 时的行为

> ID：14960859
> 
> 赞同：0
> 
> 时间：2013-02-19T15:14:52.103
> 
> 标签：c#, .net, wpf, internet-explorer-9

人们，

我为自定义应用程序创建了一个小型网络服务器。网络服务器工作正常，但是当我尝试使用 HttpListenerResponse 向客户端发送响应时，它有时会引发一些异常。假设我有

```
HttpListenerResponse res = ctx.Response; // My HttpListenerContext
... //initialize the response
res.StatusCode = 200;
try
   {
        res.OutputStream.Write(terminate, 0, terminate.Length);
        res.Close();
   }
catch(HttpListenerException hex){ ... } 
```

现在，连接发生故障（我得到 Windows 系统错误代码 22、64、1229） [MSDN-reference](http://msdn.microsoft.com/en-us/library/ms681382.aspx)。我的客户端是 WPF-Webbrowser-control。客户收到什么？客户端是否收到 HTTP 200？或者我可以更改异常中的状态代码并以某种方式将其推送到客户端吗？

谢谢您的帮助。

# java - jstl 在 servlet 上返回 null

> ID：14960860
> 
> 赞同：0
> 
> 时间：2013-02-19T15:14:52.957
> 
> 标签：java, jsp, jstl

我正在创建 createEdit.jsp ，该页面可以处理编辑和创建新用户。这是我的jstl标签

```
<c:if test="${ pageAction == 'edit' }"> 
<input type="text" name="loginU" disabled="disabled" value="${userEdit.login}"/>
</c:if> 
```

如果此页面是“编辑”，我已禁用显示登录名的文本字段（例如“用户”）。问题是 - 随着请求过期，无法进一步发布此值。当我试图在我的 servlet 上获取 loginU 时，我得到空值。

```
String loginU = req.getParameter("loginU");

out.println("login: " + loginU); 
```

我应该怎么做才能进一步传递这个 ${userEdit.login}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:18:34.813

`inputs`标记为`disabled`不发布，`readonly`但标记为不发布，因此您可以：

```
<c:if test="${ pageAction == 'edit' }"> 
    <input type="text" name="loginU" readonly="readonly" value="${userEdit.login}"/>
</c:if> 
```

另一种可能看起来更好的替代方法是将值吐出并添加隐藏输入以发送值：

```
<c:if test="${ pageAction == 'edit' }">
    <p>${userEdit.login}</p> 
    <input type="hidden" name="loginU" value="${userEdit.login}"/>
</c:if> 
```

# macos - 如何在 Cocoa 应用程序中显示文件列表？

> ID：14960861
> 
> 赞同：0
> 
> 时间：2013-02-19T15:14:54.203
> 
> 标签：macos, cocoa, nsfilemanager, nsoutlineview

我正在 Xcode 中制作 OSX Cocoa 应用程序。我想在应用程序的左侧有一个面板，显示给定文件夹中文件的可点击列表，当用户单击一个文件时，该文件应在应用程序右侧的 NSTextView 中打开。我已经弄清楚如何打开、保存和写入给定文件夹中的文件，但我不知道如何使用文件名制作可选视图。

我正在考虑使用 OnClicked 方法打开文件。

另外，我不想使用 OpenFile 下拉面板，我希望文件显示在屏幕上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:22:23.570

您应该使用[`NSOutlineView`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSOutlineView_Class/Reference/Reference.html)来显示文件列表。您可以通过使用[`NSFileManager`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/Reference/Reference.html).

然后，当大纲视图的选择发生变化时，您可以读取文件的内容并设置`NSTextView`'`string`属性。

# performance - R：tm Textmining 包：文档级元数据生成速度很慢

> ID：14960863
> 
> 赞同：2
> 
> 时间：2013-02-19T15:15:12.033
> 
> 标签：performance, r, tm

我有一个要处理的文档列表，对于每条记录，我想将一些元数据附加到 R 包 tm 生成的“语料库”数据结构内的文档“成员”（通过读取文本文件）。

**这个 for 循环可以工作，但速度很慢**，性能似乎随着函数 f ~ 1/n_docs 而下降。

```
for (i in seq(from= 1, to=length(corpus), by=1)){
    if(opts$options$verbose == TRUE || i %% 50 == 0){
        print(paste(i, " ", substr(corpus[[i]], 1, 140), sep = " "))
    }
    DublinCore(corpus[[i]], "title") = csv[[i,10]]  
    DublinCore(corpus[[i]], "Publisher" ) = csv[[i,16]]   #institutions
} 
```

这可能会对语料库变量产生影响，但我不知道是什么。但是当我把它放在一个 tm_map() （类似于 lapply() 函数）中时，它运行得更快，但更改不会持久：

```
i = 0
corpus = tm_map(corpus, function(x){
            i <<- i + 1

    if(opts$options$verbose == TRUE){
        print(paste(i, " ", substr(x, 1, 140), sep = " "))
    }

    meta(x, tag = "Heading") = csv[[i,10]]  
    meta(x, tag = "publisher" ) = csv[[i,16]] 
}) 
```

变量语料库在退出 tm_map 函数后具有空的元数据字段。它应该被填满。我还有一些与收藏有关的事情。

meta() 函数的 R 文档是这样说的：

```
 Examples:
      data("crude")
      meta(crude[[1]])
      DublinCore(crude[[1]])
      meta(crude[[1]], tag = "Topics")
      meta(crude[[1]], tag = "Comment") <- "A short comment."
      meta(crude[[1]], tag = "Topics") <- NULL
      DublinCore(crude[[1]], tag = "creator") <- "Ano Nymous"
      DublinCore(crude[[1]], tag = "Format") <- "XML"
      DublinCore(crude[[1]])
      meta(crude[[1]])
      meta(crude)
      meta(crude, type = "corpus")
      meta(crude, "labels") <- 21:40
      meta(crude) 
```

我尝试了许多这样的调用（使用 var "corpus" 而不是 "c​​rude"），但它们似乎不起作用。其他人曾经似乎对类似的数据集也有同样的问题（[2009 年的论坛帖子](http://r.789695.n4.nabble.com/tm-Why-does-adding-local-metadata-take-so-long-tt872330.html#none)，没有回应）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T15:47:56.620

这里有一些基准测试......

使用`for`循环：

```
expr.for <- function() {
  for (i in seq(from= 1, to=length(corpus), by=1)){
    DublinCore(corpus[[i]], "title") = LETTERS[round(runif(26))]
    DublinCore(corpus[[i]], "Publisher" ) = LETTERS[round(runif(26))]
  }
}

microbenchmark(expr.for())
# Unit: milliseconds
#         expr      min       lq   median       uq      max
# 1 expr.for() 21.50504 22.40111 23.56246 23.90446 70.12398 
```

与`tm_map`：

```
corpus <- crude

expr.map <- function() {
  tm_map(corpus, function(x) {
    meta(x, "title") = LETTERS[round(runif(26))]
    meta(x, "Publisher" ) = LETTERS[round(runif(26))]
    x
  })
}

microbenchmark(expr.map())
# Unit: milliseconds
#         expr      min       lq   median       uq      max
# 1 expr.map() 5.575842 5.700616 5.796284 5.886589 8.753482 
```

因此`tm_map`，正如您所注意到的，该版本似乎快了大约 4 倍。

在您的问题中，您说`tm_map`版本中的更改不是持久的，这是因为您没有`x`在匿名函数结束时返回。最后应该是：

```
meta(x, tag = "Heading") = csv[[i,10]]  
meta(x, tag = "publisher" ) = csv[[i,16]] 
x 
```

# r - 如何在不手动计算标准误差的情况下打印 R 中 lm 的方差？

> ID：14960868
> 
> 赞同：18
> 
> 时间：2013-02-19T13:51:30.200
> 
> 标签：r, regression, variance

真的很简单的问题！我正在运行许多线性回归，`y~x`并希望获得每个回归的方差，而无需从`summary.lm`命令中给出的标准误差输出手动计算它。只是为了节省一点时间:-)。对执行此操作的命令有任何想法吗？还是我必须自己编写一个函数来完成它？

```
m<-lm(Alopecurus.geniculatus~Year)
> summary(m)

Call:
lm(formula = Alopecurus.geniculatus ~ Year)

Residuals:
    Min      1Q  Median      3Q     Max 
-19.374  -8.667  -2.094   9.601  21.832 

Coefficients:
            Estimate Std. Error t value Pr(>|t|)  
(Intercept) 700.3921   302.2936   2.317   0.0275 *
Year         -0.2757     0.1530  -1.802   0.0817 .
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 

Residual standard error: 11.45 on 30 degrees of freedom
  (15 observations deleted due to missingness)
Multiple R-squared: 0.09762,    Adjusted R-squared: 0.06754 
F-statistic: 3.246 on 1 and 30 DF,  p-value: 0.08168 
```

所以我得到一个标准错误输出，我希望在不手动计算的情况下得到一个方差输出......

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-19T15:18:24.050

我不确定你想要什么方差。

如果你想要*剩余*方差，它是：`(summary(m)$sigma)**2`。

如果你想要你的*斜率*的方差，它是：`(summary(m)$coefficients[2,2])**2`或`vcov(m)[2,2]`。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-19T18:42:01.213

`vcov(m)`

给出系数的协方差矩阵 - 对角线上的方差.

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-02-19T15:17:52.750

如果您指的是系数估计的标准误差，答案是

```
summary(m)$coef[,2] 
```

如果你指的是估计的残差，它是

```
summary(m)$sigma 
```

键入`names( summary(m) )`和`names(m)`获取您可以访问的其他信息。

# css - CSS HasLayout IE7 错误 - 尝试缩放和溢出隐藏

> ID：14960872
> 
> 赞同：0
> 
> 时间：2013-02-19T15:15:41.967
> 
> 标签：css, internet-explorer, debugging, internet-explorer-7, haslayout

**问题** 我已经尝试了很多方法来让`position: relative / absolute / fixed`IE7 正常工作。我现在无法解决这个问题。

`.levelTwo`是具有的元素`pos: ab`并且`.levelOne`是具有的元素`pos: rel`。

因此，期望的结果将是任何 .levelTwo 元素高于/在任何其他元素之前。目前他们坐在后面`.levelOne a`

**标记**

```
 <!-- Bof Level One-->
    <ul class="levelOne">
        <li><a href="#">Basic IT Access <span>&#9658;</span></a>
            <div class="levelTwo">
                jamie
            </div>
        </li>
    </ul> 
```

**CSS**

```
.levelOne {
    border-top: 1px solid #DDD;
    list-style: none;
    position: relative;
}

.levelTwo {
    left: 157px;
    position: absolute;
    top: 0;
    background: #FFF;
    height: 40px;
    width: 170px;
    z-index: 10;
    /*tried*/
    display: inline-block;
    *zoom:1;
    overflow:hidden
} 
```

**期望的**

![期望的](../Images/c876a07e673b827d60e2201492e435c0.png)

**破碎的**

![破碎的](../Images/2bcce858901a969e03387b0e99ac41c2.png)

这是我的小提琴：http: [//jsfiddle.net/hutber/2GvA4/](http://jsfiddle.net/hutber/2GvA4/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T17:38:32.957

试试下面的css规则，你的问题会解决

**CSS：**

```
.head0 .levelOne li { z-index:60; }
.head1 .levelOne li { z-index:50; }
.head2 .levelOne li { z-index:40; }
.head3 .levelOne li { z-index:30; }
.head4 .levelOne li { z-index:20; }
.head5 .levelOne li { z-index:10; }

.levelTwo {
    left: 157px;
    position: absolute;
    top: 0;
    background: #FFF;
    height: 40px;
    width: 162px; /* reduced the width here */
    display: block;
    z-index: 10;
} 
```

**截屏：**

![在此处输入图像描述](../Images/2a1b07edb0992bbac88f613bfca523f0.png)

**参考链接：**

```
http://therealcrisp.xs4all.nl/meuk/IE-zindexbug.html
http://css-discuss.incutio.com/wiki/Overlapping_And_ZIndex
http://www.quirksmode.org/bugreports/archives/2006/01/Explorer_z_index_bug.html
http://brenelz.com/blog/squish-the-internet-explorer-z-index-bug/
http://www.satzansatz.de/cssd/onhavinglayout.html
http://www.satzansatz.de/cssd/onhavinglayout.html#rp 
```

# ios - 如何使用另一个类中定义的数组中的值

> ID：14960875
> 
> 赞同：1
> 
> 时间：2013-02-19T15:15:54.937
> 
> 标签：ios, objective-c, nsarray, core-plot

我按照 John Wordsworth 教程 ( [http://www.johnwordsworth.com/2011/10/adding-charts-to-your-iphone-ipad-app-using-core-plot/](http://www.johnwordsworth.com/2011/10/adding-charts-to-your-iphone-ipad-app-using-core-plot/) ) 使用 CorePlot 生成折线图。

后来我决定从一个网站获取一些 JSON 数据，以便将其用于我的图表。

所有 url 连接方法都在我的`ViewController.m`文件中执行。在那里我创建了一个`indicator`包含所有 JSON 数据的 NSArray。

我的问题是，所有图形的参数都定义在一个单独的 NSObject 类`SimpleScatterPlot.m`中，我想使用字符串数组“ `indicator`”（在 中定义`ViewController.m`）来自定义 x 轴标签。

我需要做什么才能在 中使用这个 JSON 数据数组`SimpleScatterPlot.m`？
我试过`#import "ViewController.h"`了，但没有解决。

提前感谢您能给我的任何指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:24:42.213

不确定我是否理解正确，但我认为您没有尝试从 SimpleScatterView.m 访问指标 nsarray，而是在 ViewController.m 中设置值。

1）在 SimpleScatterView.m 中定义一个公共的 NSArray 并合成它。

2) 不要尝试获取访问权限，而是使用 ViewControler.m 中的“prepareForSegue”在destinationSegueController 中设置指示器。

3) 在 SimpleScatterView.m 中实现“-(void)setIndicator:(NSArray *)indicator”并根据需要更新 GUI。

虽然“模型 - 视图 - 控制器”范式建议不要使用 ViewControllers 来执行通信等，但那是针对另一个线程的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T15:24:55.293

如果我没有正确阅读您要执行的操作，我的猜测是您可以`SimpleScatterView`从您的`UIViewController`视图中适当地使用（假设`SimpleScatterView`实际上是 a `UIView`）。

在这种情况下，当您的控制器下载其数据时，您可以`SimpleScatterView`通过将其添加到视图控制器来实例化并显示它`view`。

```
... <data has been downloaded> ...
SimpleScatterView* scatterView = [[SimpleScatterView alloc] initWithFrame:...];
[self.view addSubview:scatterView]; 
```

当你初始化你的`SimpleScatterView`时，你可以给它传递一个对数据数组的引用（比如说，在它的自定义 init 方法中，或者使用一个属性）。例如：

```
SimpleScatterView* scatterView = [[SimpleScatterView alloc] initWithFrame:... andData:(NSArray*)...]; 
```

或者：

```
scatterView.dataSet = <your_json_array>; 
```

当然，对于这种设计，您有很多替代方案。具体来说，我会提到：

1.  使用模型类处理所有数据的可能性，这样控制器将数据写入模型，而绘图视图从中读取数据。在这种情况下，该模型可以通过单例实现，以便于访问；

2.  为您的绘图视图使用“数据源”的可能性：这将需要在视图和它的数据源之间定义一个协议（例如，一个`getData`方法）；您的视图控制器将扮演数据源的角色（换句话说，不是像上面的示例那样将数组传递给绘图视图，而是传递对控制器的引用，视图将访问其数据）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T15:25:43.520

在 Viewcontroller 中创建一个属性并合成它。然后将 JSON 数据传递给属性。

```
To access the array in SimpleScatterView.m:
    Viewcontroller *viewcontrol = [[ViewController alloc] init];
    You can then access the array by using viewcontrol.indicator.
    NSLog(@"%@",viewcontrol.indicator); 
```

# java - 如何使用从另一台 PC 连接的串行端口？

> ID：14960876
> 
> 赞同：0
> 
> 时间：2013-02-19T15:15:57.640
> 
> 标签：java, serial-port, hardware

有 2 台 PC，第一台 PC 与 COM 端口（GSM 调制解调器）连接。如何通过 GSM 调制解调器从第二台 PC 发送短信？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:20:49.920

假设两台 PC 通过 TCP/IP 连接：通过套接字从 PC1/客户端向 PC2/服务器发送消息，然后 PC2/服务器通过 COM 端口向 GSM 发送短信。

# xcode - OpenCV - 文件是为不受支持的文件格式构建的，它不是被链接的架构 (i386)

> ID：14960877
> 
> 赞同：1
> 
> 时间：2013-02-19T15:15:59.627
> 
> 标签：xcode, opencv

我按照本教程：[http](http://tilomitra.com/opencv-on-mac-osx/) : //tilomitra.com/opencv-on-mac-osx/ 为 Mac OSX 编译 OpenCV，以便在 XCode 3.2.3 中使用它

编译openCV时没有错误。但是在 XCode 中，我得到`file was built for unsupported file format which is not the architecture being linked (i386)`了之后找不到的每个 dylib 和 Symbols。

有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:34:10.833

使用 cmake 2.8.10 和 xcode 4.6.1 在 mac os x lion 10.7.5 上编译和运行 c++ opencv 2.4.4 的步骤

**拥有合适的工具**

1.  [从http://sourceforge.net/projects/opencvlibrary/files/](http://sourceforge.net/projects/opencvlibrary/files/)下载 opencv-unix并在任何地方解压
2.  [从http://www.cmake.org/cmake/resources/software.html](http://www.cmake.org/cmake/resources/software.html)下载 cmake .dmg并安装
3.  我假设您在 os x lion 上安装了 xcode 4.6，其中包括 ios sdk 6.1
4.  转到 xcode 首选项以下载并安装命令行工具，以便您拥有 g++ 等。

**使用cmake编译opencv**

1.  转到提取的opencv文件夹
2.  创建构建目录

    ```
    mkdir build
    cd build
    cmake -D WITH_TBB=OFF -D BUILD_NEW_PYTHON_SUPPORT=OFF -D BUILD_FAT_JAVA_LIB=OFF -D BUILD_TBB=OFF -D BUILD_EXAMPLES=ON -D CMAKE_CXX_COMPILER=g++ CMAKE_CC_COMPILER=gcc -D CMAKE_OSX_ARCHITECTURES=x86_64 -D BUILD_opencv_java=OFF -G "Unix Makefiles" ..
    make -j8
    sudo make install 
    ```

3.  从构建文件夹中，转到 bin/ 并运行其中一项测试

    ```
    ./opencv_test_stitching 
    ```

**创建自己的 c++ opencv xcode 项目**

1.  启动 xcode 并创建一个新的 xcode 项目
2.  os x下项目类型选择Command Line Tool
3.  打开项目的构建设置
4.  在架构下，将架构设置为 64 位英特尔。还将有效架构设置为 x86_64
5.  在 Build Options 下，将 Compiler for C/C++ 设置为 Default Compiler
6.  在 Search Paths 下，将 Header Search Paths 设置为 /usr/local/include
7.  同样在搜索路径下，将库搜索路径设置为 /usr/local/lib
8.  在 Apple LLVM compiler 4.2 - Language set C++ Standard Library to libstd++

**将编译好的 opencv 库添加到你的项目中**

1.  转到您所在的“构建设置”选项卡旁边的“构建阶段”选项卡
2.  在 Link Binary With Libraries 中，单击 + 号并选择 Add Other
3.  点击键盘上的前斜杠 / 并输入 /usr/local/lib
4.  点击回车并选择要在项目中使用的库
5.  确保您始终选择 libopencv_core.2.4.4.dylib
6.  点击回车，您将在项目下看到选定的 dylib

**写一些代码**

1.  首先让我们组织文件，右键单击您的项目蓝图图标并选择新建组
2.  将新组命名为 opencv 或其他
3.  将 dylib 拖放到该组中
4.  打开 main.cpp
5.  从 opencv 附带的任何示例测试中复制代码并将其粘贴到此处
6.  确保添加了所有必需的dylib，例如，如果将opencv_test_stitching.cpp 代码复制到main.cpp 中，则需要在前面的步骤libopencv_core.2.4.4.dylib libopencv_highgui.2.4.4 中添加以下库。 dylib libopencv_stitching.2.4.4.dylib

干杯。

# php - echo html 变量，其中包含一个 php 包含

> ID：14960879
> 
> 赞同：0
> 
> 时间：2013-02-19T15:16:02.200
> 
> 标签：php, html

我有这个问题。我在数据库中存储了 HTML 代码。我阅读了它，并使用 echo $page_content 在我的页面中显示它；

我想在这个 HTML 代码中间的某个地方添加一个 php 包含。像这样：在这个文件中，我还有 html 代码，它基本上是选择的国家/地区选项：

```
<option selected="selected" value="">Choose...</option>
<option value="AFGHANISTAN">AFGHANISTAN</option>
<option value="ALBANIA">ALBANIA</option>
<option value="ALGERIA">ALGERIA</option>
<option value="AMERICAN SAMOA">AMERICAN SAMOA</option>
<option value="ANDORRA">ANDORRA</option>
<option value="ANGOLA">ANGOLA</option>
etc etc 
```

到目前为止，我已经在许多地方对所有国家/地区进行了硬编码，这是我不喜欢的。

但是，当我执行 echo $page_content; 时，这根本不显示；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:24:54.347

最简单的方法之一是使用被内容替换的令牌。

这可以避免使用 eval - 不建议使用 ane 会让我被群体投票否决。

例如：

代码

```
Hello, _TOKEN2_! 
```

然后，您可以使用字符串替换函数将 TOKEN2（下划线存在但似乎在这里消失）替换为您想要的任何内容：

```
str_replace("_TOKEN2_","World",$page_content); 
```

依此类推，你明白了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-19T15:21:00.190

我建议您考虑使用 Smarty 之类的东西来分离您的 PHP 和布局。

# python - assertEqual - 两个相同的列表，为什么我得到奇怪的结果？

> ID：14960881
> 
> 赞同：4
> 
> 时间：2013-02-19T15:16:02.173
> 
> 标签：python, unit-testing

我有单元测试：

```
import unittest

class TestFail(unittest.TestCase):
    def testFail(self):
        data = range(5)
        self.assertEqual(data, insertion_sorting(data))

class TestSuccess(unittest.TestCase):   
    def testSuccess(self):
        data = range(5)
        self.assertEqual([0,1,2,3,4], insertion_sorting(data))

def insertion_sorting(data):
        result = []
        while len(data):
            min_index = 0
            for i in range(len(data)):
                if data[i] < data[min_index]: min_index = i
            result.append(data[min_index])
            del data[min_index] 
        return result 

if __name__ == '__main__':
    unittest.main() 
```

TestSuccess 运行成功，但 TestFail 引发：

> AssertionError：列表不同：[]！= [0, 1, 2, 3, 4]
> 
> 第二个列表包含 5 个附加元素。第一个额外元素 0: 0
> 
> *   []
> *   [0, 1, 2, 3, 4]

**你能解释一下，为什么 TestSuccess 运行成功，但 TestFail 没有？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:18:37.600

您的`insertion_sorting()`功能具有*破坏性*：它会就地修改您传递的列表。`data`因此，在调用中定义的变量所引用的列表`TestFail()`确实会被清除`insertion_sorting()`。

一个简单的解决方法是对列表的副本进行操作：

```
self.assertEqual(data, insertion_sorting(data[:])) 
```

一个更复杂的选择是重构`insertion_sorting()`，所以它不是破坏性的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T15:19:49.877

尝试以下操作：

```
data = range(5)
print data
print insertion_sorting(data)
print data 
```

你看到会发生什么吗？您删除 的内容`data`。

并回答您真正的问题-`TestFail`失败是因为`data`排序后为空，而在`TestSuccess`您检查不同的列表时。

# php - Magento：如何将数据传递给子布局块？

> ID：14960882
> 
> 赞同：2
> 
> 时间：2013-02-19T15:16:11.150
> 
> 标签：php, magento, layout

在 product/view.phtml 中，我调用了 getChildHtml('my_block') ?>，它输出了我编写的 phtml 文件。我希望该文件显示产品图像，但是当我调用 $this->getProduct() 时，我得到了 null！如何将产品（或任何其他数据）传递给子块？或者以其他方式使其可用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T15:28:24.897

如果您当前在产品显示页面上，我建议您使用当前产品注册表值。这可以代替您的 $this->getProduct() 加载，如下所示：

```
Mage::registry('current_product'); 
```

# visual-studio-lightswitch - 同步两个 Lightswitch 应用程序

> ID：14960884
> 
> 赞同：2
> 
> 时间：2013-02-19T15:16:26.120
> 
> 标签：visual-studio-lightswitch, lightswitch-2012

正如我的标题所说，我需要弄清楚如何在彼此之间同步我的两个 Microsoft Lightswitch 应用程序。此外，重要的是一个应用程序是在网络上，另一个是为桌面创建的。

所以，我需要的是从 Web 服务器中提取数据库条目并将其放入台式 PC 使用的数据库中。

如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:44:30.150

正如 Yann 所说，它不是开箱即用的内置功能，但应该可以在代码中的 Lightswitch 中实现。

您需要手动编写代码来进行实际同步（通过连接到 Web 服务器上的数据库并使用 SQL 查询同步数据），但因为这不能在客户端完成（Silverlight 不允许 SQL 类要使用）您可以使用“命令表”模式（[http://blog.pragmaswitch.com/?p=332](http://blog.pragmaswitch.com/?p=332)）。

基本上，您创建一个新表（例如 SyncRequests）并从客户端向其中添加一条记录，然后您可以使用服务器代码（通过 SyncRequests_Inserted 事件）来执行您的同步代码。

用于同步数据库的实际代码将取决于您到底想要做什么（从 Web DB 覆盖本地 DB 中的所有数据、合并记录、仅添加新数据等）以及一般的 DB 结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-08T02:59:22.580

There are two ways:

First way - replication

1.  You can change the database to use MSSQL.
2.  Enable replication on the database. The database will synchronise between two databases.

Second way - manual synchronisation

1.  Both databases are independent from each other.
2.  Every now and then, you take a backup from the server or backup from Desktop.
3.  Run a Database comparison App on both databases.

4.  Create a script to synchronise the client database's data.

5.  Create a script to synchronise the server's database metadata.

6.  Run the update script to update the sever's metadata.

7.  Run the update script to update the client's data.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T12:41:00.940

*您可以在发布向导*期间将您的桌面应用程序指向 Web 服务器上的数据库。还是它们是完全不同的数据库，具有完全不同的表？

# python - 打印 str 的转义表示

> ID：14960885
> 
> 赞同：11
> 
> 时间：2013-02-19T15:16:31.190
> 
> 标签：python, escaping

如何打印字符串的转义表示，例如，如果我有：

```
s = "String:\tA" 
```

我希望输出：

```
String:\tA 
```

在屏幕上而不是

```
String:    A 
```

java中的等价函数是：

```
String xy = org.apache.commons.lang.StringEscapeUtils.escapeJava(yourString);
System.out.println(xy); 
```

来自[Apache Commons Lang](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/StringEscapeUtils.html#escapeJava%28java.lang.String%29)

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-19T15:21:51.203

您想使用编解码器对字符串进行`string_escape`编码：

```
print s.encode('string_escape') 
```

或者您可以使用该[`repr()`函数](http://docs.python.org/2/library/functions.html#repr)，它将一个字符串转换为它的 python 文字表示*，包括引号*：

```
print repr(s) 
```

示范：

```
>>> s = "String:\tA"
>>> print s.encode('string_escape')
String:\tA
>>> print repr(s)
'String:\tA' 
```

在 Python 3 中，您将寻找`unicode_escape`编解码器：

```
print(s.encode('unicode_escape')) 
```

这将打印一个字节值。要将其转换回 unicode 值，只需从 ASCII 解码：

```
>>> s = "String:\tA"
>>> print(s.encode('unicode_escape'))
b'String:\\tA'
>>> print(s.encode('unicode_escape').decode('ASCII'))
String:\tA 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-19T15:17:54.590

你可以使用[`repr`](http://docs.python.org/2/library/functions.html#repr)：

```
print repr(s) 
```

演示

```
>>> s = "String:\tA"
>>> print repr(s)
'String:\tA' 
```

这将给出引号 - 但您可以轻松地将它们切掉：

```
>>> print repr(s)[1:-1]
String:\tA 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T15:18:26.010

试一试`print repr(string)`_

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T15:18:34.913

与以往一样，它在 python 中很容易：

```
print(repr(s)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T15:19:34.790

`print`uses `str`，它处理转义。你想要`repr`。

```
>>> a = "Hello\tbye\n"
>>> print str(a)
Hello   bye

>>> print repr(a)
'Hello\tbye\n' 
```

# sharepoint - 将 SharePoint 个人资料图片设置为“只有我”

> ID：14960888
> 
> 赞同：1
> 
> 时间：2013-02-19T15:16:44.653
> 
> 标签：sharepoint, sharepoint-2010

我需要能够配置 SharePoint 2010，以便用户个人资料图片和其他属性（例如名称等）具有“只有我”的“默认隐私设置/默认可见性”。请问需要什么步骤来完成这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T23:34:08.657

在管理中心 -> 管理服务应用程序 -> 用户配置文件服务应用程序 -> 管理用户属性中，选择图片属性 -> 编辑并将策略设置更改为可选，将可复制复选框设置为 false，然后可以将默认隐私设置设置为只有我等。线索在策略设置描述中，我在尝试更改默认隐私设置时应该注意到这一点。

# intuit-partner-platform - .NET DevKit SDK 文档丢失？

> ID：14960892
> 
> 赞同：0
> 
> 时间：2013-02-19T15:16:51.863
> 
> 标签：intuit-partner-platform

我只是尝试访问 .NET DevKit 的 SDK 文档，该链接将我引向本质上是“未找到”页面。

我们在哪里可以找到文档（您没有更新它们，也许更新到 V3，是吗）？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:21:13.697

我更新了链接。[http://developer.intuit.com/IntuitDataServicesSDK/](http://developer.intuit.com/IntuitDataServicesSDK/) 它包含 SDK 的 NDocs。

问候，
杰瑞德

# c# - 产量和递归

> ID：14960893
> 
> 赞同：1
> 
> 时间：2013-02-19T15:16:56.943
> 
> 标签：c#, .net-3.5

我正在尝试使用 Yield 设置递归逻辑。这是我的场景：我有一个 NodeviewModel 项的集合，每个 NodeviewModel 项可以有多个 NodeViewModel 项类型的子项。图的深度可以是“n”。基本上，我得到 NodeviewModel 项目并转换成不同的形式。

这是代码：

```
public class CompositeContentBuilder
    {
        private readonly IContentFactory _contentFactory;

        public CompositeContentBuilder(IContentFactory contentFactory)
        {
            _contentFactory = contentFactory;
        }

        public IEnumerable<IContentViewModel> BuildFrom(IEnumerable<INodeViewModel> nodes)
        {

            if (nodes.Count() == 1)
                yield return BuildFrom(nodes.First());

            foreach (var nodeViewModel in nodes)
            {
                yield return BuildFrom(nodeViewModel);
                foreach (var viewModel in nodeViewModel.Children)
                {
                    yield return BuildFrom(viewModel);
                }

                //How do I return children.children...and so on?
            }
        }

        private IContentViewModel BuildFrom(INodeViewModel node)
        {
            var content = _contentFactory.Create(node);
            content.Initialise();
            return content;
        }
    } 
```

我将如何转换 children.children 等？能否请你帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:27:45.757

您可以使用 a`Stack`来模拟递归行为，而无需实际使用递归。

```
public IEnumerable<IContentViewModel> BuildFrom(IEnumerable<NodeViewModel> nodes)
{
    Stack<NodeViewModel> stack = new Stack<NodeViewModel>(nodes);

    while (stack.Any())
    {
        var next = stack.Pop();
        yield return BuildFrom(next);
        foreach (var child in next.Children)
        {
            stack.Push(child);
        }
    }
} 
```

另请注意，我建议重命名`BuildFrom`接受单个节点的方法，因为它会造成混淆，使该方法看起来不是递归的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T15:20:26.600

```
public IEnumerable<IContentViewModel> BuildFrom(IEnumerable<NodeViewModel> nodes)
{
    foreach (var nodeViewModel in nodes)
    {
        yield return BuildFrom(nodeViewModel);
        foreach(var child in BuildFrom(nodeViewModel.Children)) // recursive call
           yield return child; 
    }
} 
```

# php - 使用 CSV 的可排序表

> ID：14960896
> 
> 赞同：0
> 
> 时间：2013-02-19T15:17:05.730
> 
> 标签：php, pagination, jquery-ui-sortable, import-from-csv

我对 PHP 和所有这些都是全新的。我想使用 CSV 文件制作一个可排序的表。我可以在 PHP 中获取文件，但我的表有四列，但它在我的表的第一列中显示了我的 CSV 文件的所有内容。

我的 CSV 文件如下所示：

```
Timestamp;Company;Employee;Type
06/02/2013;4298;2001;start
......... and so on.... 
```

这是我现在的php：

```
<?php
echo "QUERY_STRING is ".$_SERVER['QUERY_STRING']."<p>"; 
$rev=1;
$sortby=0;
if(isset($_GET['sortby']))$sortby = $_GET['sortby']; 
if(isset($_GET['rev']))$rev = $_GET['rev'];

$i=-1;
$ff=fopen('...file.csv','r') or die("Can't open file");
while(!feof($ff)){
$i++;
$Data[$i]=fgetcsv($ff,1024);
}

foreach ($Data as $key => $row) {
$Timestamp[$key]  = $row['Colname']; 
$Company[$key] = $row['Colname']; 
$Employee[$key] = $row['Colname'];
$Type[$key] = $row['Colname'];} 

switch ($sortby){
case "0":
if($rev=="1")array_multisort($Timestamp, SORT_NUMERIC, $Data); 
else array_multisort($Timestamp, SORT_NUMERIC, SORT_DESC,$Data);
$rev=$rev*-1;
break;

case "1":
if($rev=="1")array_multisort($Company,  $Data);
else array_multisort($Company, SORT_DESC, $Data);
$rev=$rev*-1;
break;

case "2":
if($rev=="1")array_multisort($Employee, SORT_NUMERIC, $Data);
else array_multisort($Employee, SORT_NUMERIC, SORT_DESC,$Data);
$rev=$rev*-1;
break;

case "3":
if($rev=="1")array_multisort($Type,   $Data);
else array_multisort($Type,  SORT_DESC, $Data);
$rev=$rev*-1;
break;}

echo ("<table border=2>");     
echo ("<th><a href=\"realtime3.php?sortby=0&rev=$rev\" title=\"Click to Sort/Reverse           sort\">Timestamp</a></th>");
echo ("<th><a href=\"realtime3.php?sortby=1&rev=$rev\" title=\"Click to Sort/Reverse sort\">Company</a></th>");
echo ("<th><a href=\"realtime3.php?sortby=2&rev=$rev\" title=\"Click to Sort/Reverse sort\">Employee</a></th>");
echo ("<th><a href=\"realtime3.php?sortby=3&rev=$rev\" title=\"Click to Sort/Reverse sort\">Type</a></th>");

$i=0;
foreach($Data as $NewDat){
if($NewDat[0]!=""){ //error trap
$str="<tr>";
foreach($NewDat as $field)$str.="<td>$field</td>";
$str.="</td>\n";
echo $str;}}
fclose($ff);
echo "</table>";
?> 
```

如果有人可以帮助我朝着好的方向发展，非常感谢。是否可以添加搜索字段/下拉字段/...？这将允许用户在输入或选择要搜索的输入时轻松更好地查看表格？我试图为表格进行分页，让我们说一次显示 15 行。我已经单独制作了它，但我无法让它正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:03:25.523

你的代码看起来很乱，但它可能工作正常。我猜它显示在一行，因为你只是写`$str.="</td>\n";`了你应该写的地方`$str.="</tr>\n";`

# tsql - 如何使用 Transact-SQL 按时间顺序检索组中的第二条记录

> ID：14960904
> 
> 赞同：0
> 
> 时间：2013-02-19T15:17:16.643
> 
> 标签：tsql

给定这样的数据：

```
SHQSCriteria            PropertyRef ReplacementYear
Energy Efficient            31          2014/15
Healthy, Safe & Secure      31          2012/13
Energy Efficient            462         2014/15
Healthy, Safe & Secure      462         2012/13
Free From Serious Disrepair 497         2012/13
Healthy, Safe & Secure      497         2012/13
Tolerable Standard          497         2012/13
Free From Serious Disrepair 498         2012/13
Healthy, Safe & Secure      498         2013/14
Tolerable Standard          498         2014/15 
```

我想取出所有不符合一个以上标准的属性，以及它们不符合第二个标准的年份。

所以，我想要在上面的列表中至少出现两次的记录，但替换年份是按时间顺序排列的第二个年份。像这样：

```
PropertyRef ReplacementYear
   31           2014/15
   462          2014/15
   497          2012/13
   498          2013/14 
```

请注意，在此示例中，属性 497 和 498 均不符合三个条件。497在同一年全部失败，所以我们应该在那一年返回。但是 498 在 3 个不同的年份都失败了，所以我们应该在第二年返回。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:36:45.657

您可以使用公用表表达式对每个 PropertyRef 中的年份进行排序（并对它们进行编号），然后将其连接回数据，为每个 PropertyRef 指定第二个：

```
WITH cte AS (
            SELECT  PropertyRef,
                    Years,
                    ROW_NUMBER() OVER (PARTITION BY propertyref ORDER BY years) as RowNumber
            FROM    data
)
SELECT      d.PropertyRef,
            cte.Years
FROM        data d
INNER JOIN  cte
ON          cte.PropertyRef = d.PropertyRef
AND         cte.RowNumber = 2
GROUP BY    d.PropertyRef,
            cte.Years
HAVING      COUNT(*) > 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T15:42:55.863

使用Sql-Server 2008 及更高版本`CTE`尝试此操作；`row_number()`

```
;with cte as (
  select propertyRef, replacementYear,
         row_number() over (partition by propertyref order by replacementYear) rn
  from table
)
select * from cte
where rn = 2 
```

# ruby-on-rails-3 - sh：捆绑：错误

> ID：14960907
> 
> 赞同：0
> 
> 时间：2013-02-19T15:17:30.657
> 
> 标签：ruby-on-rails-3, rvm, capistrano

我真的很沮丧 - capistrano not found bundle 的问题有很多问题和答案。但它们似乎对我不起作用......很伤心:(
情况是 - 我正在使用安装了系统范围 rvm 的主机。

```
$ bundle -v
Bundler version 1.2.4

$ rvm -v
rvm 1.18.8 (stable) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io/]

$ ruby -v
ruby 1.9.3p385 (2013-02-06 revision 39114) [i686-linux] 
```

错误是它无法执行`sh: bundle`： http: [//community.webfaction.com/questions/5186/capistrano-cant-find-bundle](http://community.webfaction.com/questions/5186/capistrano-cant-find-bundle)
我试过设置 rvm 变量

```
 set :rvm_ruby_string, "1.9.3"
    set :rake,            "rvm use #{rvm_ruby_string} do bundle exec rake"
    set :bundle_cmd,      "rvm use #{rvm_ruby_string} do bundle " 
```

然后我尝试像这样设置：default_environment [http://community.webfaction.com/questions/5186/capistrano-cant-find-bundle](http://community.webfaction.com/questions/5186/capistrano-cant-find-bundle)

尝试设置为`which ruby`&的组合输出`ecno $HOME`它仍然不起作用。有任何想法吗？这个问题似乎很普遍......但我无法解决它！

**更新 1**
尝试使用 rvm 解决方案[https://rvm.io/integration/capistrano/](https://rvm.io/integration/capistrano/)

> 设置：default_environment，{
> 'PATH'=>“/home/h41319/data/www/.rvm/gems/ruby-1.9.3-p385@global/bin/bundle::/home/h41319/data/www/。 rvm/gems/ruby-1.9.3-p385@global/bin/ruby:PATH",
> 'RUBY_VERSION' => 'ruby 1.9.3', 'GEM_HOME' => '/home/h41319/data/.rvm/gems /ruby-1.9.3-p385', 'GEM_PATH' => '/home/h41319/data/.rvm/gems/ruby-1.9.3-p385@global',
> 'BUNDLE_PATH' => '/home/h41319/ data/www/.rvm/gems/ruby-1.9.3-p385@global/bin/bundle' # 如果您使用的是捆绑程序。}

没运气 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T19:30:25.513

看看 rvm-capistrano gem，文档应该清楚如何使用它=> [https://github.com/wayneeseguin/rvm-capistrano#readme](https://github.com/wayneeseguin/rvm-capistrano#readme)

# php - Wordpress 迁移后无法修改标题信息

> ID：14960919
> 
> 赞同：0
> 
> 时间：2013-02-19T15:18:00.547
> 
> 标签：php, wordpress, http-headers, warnings

我意识到这已经被问过很多次了，答案通常是 PHP 标记之前或之后的一些空格，但是我检查了我的所有文件并没有找到任何证据。

我正在使用 Wordpress 并打开了调试模式。我的网站在一个域上工作，但是我最近将它移到了新服务器（仍在 linux 上运行 apache - 我确实从共享移到了 VPS）并给了它一个新域。我所做的只是更改以下内容`wp-config.php`：

```
define('DB_NAME', 'new db name');
define('DB_USER', 'new db user');
define('DB_PASSWORD', 'new db password');
define('WP_HOME','new url');
define('WP_SITEURL','new url'); 
```

但是我现在无法登录，我已将其范围缩小到没有设置 cookie 的事实。如果我访问`wp-login.php`我会收到以下错误：

```
Warning: Cannot modify header information - headers already sent by (output started at /home/rcnhca/public_html/wp-includes/load.php:270) in /home/rcnhca/public_html/wp-login.php on line 368

Warning: Cannot modify header information - headers already sent by (output started at /home/rcnhca/public_html/wp-includes/load.php:270) in /home/rcnhca/public_html/wp-login.php on line 380 
```

**注意：**`wp-login.php`和都是`load.php`核心 Wordpress 文件。

第 368 行`wp-login.php`是：

```
header('Content-Type: '.get_bloginfo('html_type').'; charset='.get_bloginfo('charset')); 
```

和第 380 行：

```
setcookie(TEST_COOKIE, 'WP Cookie check', 0, COOKIEPATH, COOKIE_DOMAIN); 
```

第 270 行`load.php`是：

```
ini_set( 'display_errors', 1 ); 
```

但是，我也收到以下警告：

```
Warning: ini_set() has been disabled for security reasons in /home/rcnhca/public_html/wp-includes/load.php on line 270 
```

我相信这是因为我安装了 Suhosin PHP 补丁，但我对此并不确定。我不想运行更易受攻击的 PHP 版本。

我无法弄清楚为什么会发生此错误，我的任何主题的 PHP 文件中都没有尾随空格。

**注意：**我也意识到我可以使用输出缓冲来解决这个问题，但是我想了解问题发生在哪里，而不是应用一个万能的补丁，这会影响我的调试能力。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:55:13.730

警告会导致发送标头，`ini_set()`从而触发“无法修改标头”消息。

# php - 接口实现的放置，经验法则

> ID：14960920
> 
> 赞同：1
> 
> 时间：2013-02-19T15:18:04.573
> 
> 标签：php, oop, interface

在很多情况下，我有一些由一堆对象实现的 BaseInterface。这些对象通常还应实现诸如 Serializable 或 Counatble 之类的接口。现在我不清楚何时将这些附加接口指定为由实现 BaseInterface 的类实现，或者何时最好让 BaseInterface 扩展这些附加接口。我正在寻找对这两种方法的影响的概述，以及一组简单的规则，人们可以根据这些规则确定在给定情况下应该采用哪种方法。

为了提高清晰度，我在这两种方法的代码中提供了一个简单的示例：

方法一：扩展基础接口

```
interface BaseInterface extends Countable, Serializable {}

class Implementation implements BaseInterface{} 
```

方法 2：在实现中实现各个接口

```
interface BaseInterface {}

class Implementation implements BaseInterface, Countable, Serializable {} 
```

似乎人们经常希望能够假设实现 BaseInterface 的东西是可数的，尽管 OTOH 这可能不是必需的，并且阻碍了 BaseInterface 的实现，而根本不需要实现可数的。然后还有接口隔离​​原则，这让我对像方法1那样扩展接口持谨慎态度。

注意：这个问题是关于在哪里放置接口实现子句。这与通过继承共享代码无关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:26:18.703

我提出一个解决方案：

```
interface BaseInterface {}

abstract class AbstractBase implements BaseInterface {}

abstract class AbstractBaseCountable implements BaseInterface, Countable {}

abstract class AbstractBaseCountableSerializable implements BaseInterface, Countable, Serializable {}

class Implementation extends AbstractBase/* OR AbstractBaseCountable 
OR AbstractBaseCountableSerializable */ {} 
```

因此，它可以创建具有每个不同所需特性的类。此外，在某些实现中是抽象类，因此实现类更干净。

# javascript - 嵌套 While 循环

> ID：14960929
> 
> 赞同：1
> 
> 时间：2013-02-19T15:18:31.393
> 
> 标签：javascript

我无法让这个嵌套的 while 循环工作。我正在使用一个基于 Javascript 的程序，该程序根据表的 Header 从 2 个表列中读取。我可以从表格中读取，但循环不起作用。我的目标是找出电线的中性线尺寸何时大于相位尺寸并打印发生这种情况的电线尺寸。代码如下。

```
 CSA = 130
 NeutCSA = 0
 i = 0
 j = 0

 while (NeutCSA < CSA){
      j = 0
      while (NeutCSA < CSA){
           NeutCSA = colWireSize[i] * colNumberWires[j]
           if (colNumberWires[j] < 18){
                 j = j + 1
           }
      }
      if (colWireSize[i] < 10){
           i = i + 1
      } 
 }
 result = colNumberWires[j] 
```

桌子看起来像这样

colWireSize 2 3 4 5 6 7 8 9 10

colNumberWires 6 7 8 9 10 11 12 13 14 15 16 17 18

程序将找到条件并结束循环，但不是按照我需要的顺序。我需要它从 WireSizes 的第一行开始，然后通过 NumberWires 循环并乘以该值。如果此值小于 CSA，则转到下一个 WireSize 并重复该过程，直到 NeutCSA > CSA。

谢谢帕特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:23:13.427

您的外循环不会循环，因为内循环将始终前进`NeutCSA`到 >= `CSA`。

您的意思是为每个循环设置完全相同的条件吗？

# asp.net - 如何将 AD 身份验证 + SSO 与现有 Forms 身份验证的 Saas Web 应用程序集成

> ID：14960934
> 
> 赞同：5
> 
> 时间：2013-02-19T15:18:40.580
> 
> 标签：asp.net, forms, authentication, active-directory, single-sign-on

我们在 IIS 7.5 公共服务器上使用表单身份验证运行 Saas ASP.NET 3.5 Web 应用程序，为数千名用户提供受保护的内容。我们还有一些运行 ASP.NET MVC 2 的子应用程序。

用户名和密码存储在我们的数据库中，每个用户都附加了角色和组，并定义了权限和访问权限。

现在，我们还被要求促进通过 Active Directory 进行简单的 SSO 登录，这样用户就不必输入用户名和密码两次即可登录。这些用户将来自不同的网络和域。

从我们的服务器到 LDAP 服务不应发生任何用户“同步”。我们不确定是否需要与 LDAP 进行任何通信，因为所有用户都将在我们的系统中创建并在那里维护。我们的大多数用户都将使用表单身份验证。

从这里开始，我们不确定哪条路是最好的选择。对于我们的场景，“最佳实践”的继续方式是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T19:02:23.890

简单的答案是 SAML。它被认为是“最佳实践”，许多大型 SAAS 提供商都支持它。

SAML 协议定义了多个系统之间的单点登录流程。它使用证书在系统之间建立信任。您的应用程序接受来自其他系统的包含属性（用户 ID、姓名、电子邮件地址等）的断言。您的应用会将用户映射到您的用户商店。

在 .NET 世界中，有多种选择。您可以找到一个实现 SAML 的库（ComponentSpace 有一个）并将其挂接到 ASP.NET 身份验证中。您可以使用 Windows 识别框架 (WIF) 创建自己的。这是大量 WIF 视频[http://www.cloudidentity.com/blog/2010/06/23/ALL-WILL-BE-REVEALED-7-HOURS-RECORDINGS-FROM-THE-WIF-WORKSHOPS/](http://www.cloudidentity.com/blog/2010/06/23/ALL-WILL-BE-REVEALED-7-HOURS-RECORDINGS-FROM-THE-WIF-WORKSHOPS/)。你可以试试 IdentityServer [http://thinktecture.github.io/](http://thinktecture.github.io/)

根据您的应用程序必须有多安全，您可以选择一个简单的选项，即使用简化的方法从受信任的网络传递用户 ID。我见过允许通过 URL 参数或表单字段发送用户 ID 的应用程序。当然，这是非常不安全的，而且您要承担更大的风险，因为两个网络之间的信任不是通过密码强制执行的。您可以通过检查引用字符串或 IP 地址（例如，如果您可以隔离公司网络的 IP 范围）来缓解它。但是您仍然对欺骗持开放态度，因为任何用户都可以通过简单地替换 HTTP 请求中的用户 ID 来冒充他人。

它可能无法完全回答您的问题，但希望为您指明正确的方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T19:05:26.887

我建议研究 ADFS 2.0，它在声明映射方面非常强大，并且可以与 AD 一起使用：http: [//msdn.microsoft.com/en-us/magazine/ee335705.aspx](http://msdn.microsoft.com/en-us/magazine/ee335705.aspx)

您要做的是应用程序的令牌消耗部分，该部分将接收并解析在身份验证循环后返回到您的 Web 服务器的最终声明。

# routing - 跳过 ZF2 HTTP 查询路由器中的自定义参数

> ID：14960937
> 
> 赞同：0
> 
> 时间：2013-02-19T15:18:59.963
> 
> 标签：routing, zend-framework2, zend-router

我正在使用 zend url helper 生成 url addres `/query`，正如我在 [这里](https://stackoverflow.com/questions/13637051/zf2-using-url-helper-and-reuse-query-parameters)找到的那​​样。在配置文件中，我设置了这样的路由器：

```
'my_name' => array(
                'type' => 'segment',
                'options' => array(
                    'route'    => '/my_name/:id/some_action[/:id2]',
                    'constraints' => array(
                        'id' => '[0-9]+',
                        'id2' => '[0-9]+',
                    ),
                    'defaults' => array(
                        'controller' => 'MyController',
                    ),
                ),
                'may_terminate' => true,
                'child_routes'  => array(
                    'query' => array(
                        'type' => 'Query',
                        'options' => array(
                            'defaults' => array(
                            )
                        )
                    ),
                ),
            ), 
```

我收到生成的链接，看起来像这样：

```
http://my_address/my_name/:id/some_action/?controller=MyController&limit=1&action=get&offset=2 
```

我想要做的是删除我没有设置`controller`的`action`参数，并且只显示我自己提供的参数。

路由器配置中是否有任何设置选项？或者也许还有其他方法可以得到我想要的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:34:11.760

您的路线或默认设置中都没有指定操作。您需要能够确定当路由匹配时要调用哪个操作（方法）。

```
'route'    => '/my_name/:id/:action[/:id2]', // allow action passed thru
'constraints' => array(
     'id' => '[0-9]+',
     'id2' => '[0-9]+',
 ),
 'defaults' => array(
    'controller' => 'MyController',
    'action'     => 'some_action', // or specify a default action to use
 ), 
```

# sql - SQL Server - 更新查询

> ID：14960938
> 
> 赞同：1
> 
> 时间：2013-02-19T15:19:05.073
> 
> 标签：sql, sql-server

我想更新一个表的一列，如下所示：

TB_任务：

```
cod_1   cod_2   cod_3   Description  Value      Date
-----------------------------------------------------------------
123     181     6401    product A   7526836    19/02/2013
123     181     6401    product B   4638607    18/02/2013
123     181     6401    product C   9633450    06/02/2013
789     314     1361    product 1   6218035    15/02/2013
789     314     1361    product 2   6189032    14/02/2013 
```

结果应该是：

```
cod_1   cod_2   cod_3   Description   Value      Date
-----------------------------------------------------------------
123     181     6401    product A     7526836    19/02/2013
123     181     6401    product A     4638607    18/02/2013
123     181     6401    product A     9633450    06/02/2013
789     314     1361    product 1     6218035    15/02/2013
789     314     1361    product 1     6189032    14/02/2013 
```

有人知道吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:22:30.247

您没有明确说明如何选择值。这是一种方法：

```
with toupdate (
     select t.*, min(description) over (partition by cod_1) as minDescription
     from t
    )
update toupdate
    set Description = minDescription 
```

它将描述设置为由 定义的每个组的最小值`cod_1`。这符合您问题中的数据。

如果你想要最新的描述，我会用一个子查询来做到这一点：

【上传代码问题】

```
update t
    set description = 
        (select top 1 description
         XXX
         where t2.cod_1 = t.cod_1
         order by date desc) 
```

（现在，在 XXX 所在的子查询中的`select`和之间添加一个“from t t2” 。）`where`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T15:24:32.183

```
 select cod_1, cod_2,   cod_3, max(Date) as date
    From TB_Quest
    group by cod_1, cod_2,   cod_3 
```

使用 cod_1、cod_2、cod_3、日期将其加入 TB_Quest 以获取描述并更新表再次加入与表的选择，但仅使用 cod_1、cod_2、cod_3

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T15:32:24.850

试试这个

```
 update TB_Quest set Description =
      if (Description= 'product 2' , 'product 1' , 
      if(Description= 'product 1' , 'product 1',
      if (Description = 'product A' , 'product A' , 'product A' ))) 
```

[**在这里演示 SQLFIDDLE**](http://sqlfiddle.com/#!2/c4797/1)

# zend-framework2 - 404 错误，Zend Framework 2 请求的 URL 无法通过路由匹配

> ID：14960943
> 
> 赞同：0
> 
> 时间：2013-02-19T15:19:19.380
> 
> 标签：zend-framework2

我越来越：

> **发生 404 错误**
> 
> 网页未找到。请求的 URL 无法通过路由匹配。

我的`module.config.php`文件是：

```
'router' => array(
    'router' => array(
        'Test' => array(
            'type' => 'Segment',
            'options' => array(
                //http://localhost/Test/Test
                'route' => '/Test[/[:action]]',
                'constraints' => array(
                'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
             ),
             'defaults' => array(
                 'controller' => 'Test\Controller\Test',
                 'action' => 'Test'
              ),
          ),
      ),
   ),
), 
```

请帮忙，我是 Zend Framework 2 的新手！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-22T13:37:14.503

您应该在 ZendSkeletonApplication 中使用类似 Application 模块的配置：

```
'router' => array(
    'routes' => array(
        'test' => array(
            'type'    => 'Literal',
            'options' => array(
                'route'    => '/book',
                'defaults' => array(
                    '__NAMESPACE__' => 'Test\Controller',
                    'controller'    => 'Test',
                    'action'        => 'index',
                ),
            ),
            'may_terminate' => true,
            'child_routes' => array(
                'default' => array(
                    'type'    => 'Segment',
                    'options' => array(
                        'route'    => '/[:controller[/:action]]',
                        'constraints' => array(
                            'controller' => '[a-zA-Z][a-zA-Z0-9_-]*',
                            'action'     => '[a-zA-Z][a-zA-Z0-9_-]*',
                        ),
                        'defaults' => array(
                        ),
                    ),
                ),
            ),
        ),
    ),
), 
```

您只需添加以下代码：

```
'test' => array(
                    'type'    => 'Segment',
                    'options' => array(
                        'route'    => '[/:action][/:id]',
                        'constraints' => array(
                            'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
                            'id'     => '[0-9]*',
                        ),
                        'defaults' => array(
                            '__NAMESPACE__' => 'Test\Controller',
                            'controller'    => 'Test',
                            'action'        => 'index',
                        ),
                    ),
                ), 
```

将此代码添加到 'child-routes' 键，然后您将访问 url：localhost/:controller_name/:action_name/:id（例如： http: [//zf.dev/test/index](http://zf.dev/test/index)或[http://zf .dev/test/add/1](http://zf.dev/test/add/1)）。现在它的工作！此代码可以修复 zf2 文档中教程的错误 404。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T15:25:35.023

你有一个错字，试试这个：

```
'router' => array(
    'routes' => array( 
```

路由而不是路由器两次..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T06:48:46.537

实现修复它，我缺少字母“d”，因此：Zend\Loader\StandarAutoloader 我添加了“d”：Zend\Loader\StandardAutoloader。问候朋友。提示：Zend Studio 10 和他的 de ZF2 版本非常适合这一刻！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-17T10:51:37.473

1.您还应该检查`application.config.php` 并将您的模块名称添加到 RETURN 数组中。

```
return array(    
    'modules' => array(
        'Application',
        'your_module',
        .....    
 ), 
```

2.如果没有。检查路由数组`module.config.php`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T16:05:01.097

请检查 .htaccess 文件和 index.php 文件。如果这些存在于公用文件夹中，则必须使用 url 作为

```
 http://localhost/public/Test/Test. 
```

您的代码几乎是正确的。安德鲁很好地指导了你。让我知道你的回应。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-01T09:36:18.857

我建议还检查缓存配置文件的数据文件夹，在开发安装中缓存的配置文件也可能导致此问题。删除数据/缓存中的文件并尝试。

PS：如果您刚开始尝试使用 zend 站点上的博客模块，它适用于初学者，并且更新了新版本。

[https://framework.zend.com/manual/2.4/en/in-depth-guide/first-module.html](https://framework.zend.com/manual/2.4/en/in-depth-guide/first-module.html)

# unit-testing - 在单元测试中使用 webapp2 i18n

> ID：14960944
> 
> 赞同：4
> 
> 时间：2013-02-19T15:19:25.547
> 
> 标签：unit-testing, google-app-engine, internationalization, webapp2

我将 webapp2 与 webapp2_extras.i18n 一起用于 Google App Engine 应用程序。

我有一个单元测试脚本，如底部所述：[https ://developers.google.com/appengine/docs/python/tools/localunittesting](https://developers.google.com/appengine/docs/python/tools/localunittesting)

测试脚本导入模型并且不包括 webapp2 处理程序，因为测试的目标是业务逻辑代码，而不是请求和响应。但是，我的一些模型会调用 i18n 函数，例如`format_currency`or`gettext`这会导致错误：

```
AssertionError: Request global variable is not set. 
```

如何在不实例化 webapp2 应用程序和请求的情况下初始化 i18n 模块？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T18:10:09.333

我遇到了同样的问题（但对于 uri_for），我最终在测试中执行了以下操作：

```
app = webapp2.WSGIApplication(
        [webapp2.Route('/', None, name='upload_handler')])

request = webapp2.Request({'SERVER_NAME':'test', 'SERVER_PORT':80,
    'wsgi.url_scheme':'http'})
request.app = app
app.set_globals(app=app, request=request)

# call function that uses uri_for('upload_handler') 
```

我不得不反复试验来猜测必须在请求中设置哪些环境变量。也许您需要添加更多才能调用 i18n。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-06T04:17:19.387

尝试模拟您的功能。

示例：我有一个名为 users 的脚本，它像这样导入 i18n：

```
from webapp2_extras.i18n import gettext as _ 
```

所以在我的测试中，我模拟了这样的函数：

```
from pswdless.model import PswdUserEmail, EmailUserArc
from pswdless.users import FindOrCreateUser
from pswdless import users

# mocking i18n
users._ = lambda s: s

#your tests bellow 
```

您可以将相同的技巧与其他功能一起使用。

我希望它对你有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-18T13:49:58.890

模拟 i18n 本身似乎很简单。我更喜欢这种方法，因为在单元测试中确实不需要 Request 和 app 。

这是一个示例 pytest 夹具：

```
@pytest.fixture
def mock_i18n(monkeypatch):

    class MockI18n:

        def set_locale(self, locale):
            pass

        def gettext(self, string, **variables):
            return string

    mock_i18n = MockI18n()

    def mock_get_i18n(factory=None, key=None, request=None):
        return mock_i18n

    from webapp2_extras import i18n
    monkeypatch.setattr(i18n, 'get_i18n', mock_get_i18n)

    yield 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-11T03:30:45.827

模拟似乎确实是这里的方法，但其他答案并不完整和/或比必要的更复杂。这是一个对我有用的简单模拟。

```
=== my_module.py ===

from webapp2_extras.i18n import gettext as _

def f(x):
    return _(x)

=== test_my_module.py ===

import my_module

def _mock(x):
    return x

@mock.patch("my_module._", side_effect=_mock)
def test_f(self, foo):
    y = my_module.f("hello")
    self.assertEqual(y, "hello") 
```

# asp.net - 如何从 System.Web.UI.Control（基类）中获取价值？

> ID：14960947
> 
> 赞同：1
> 
> 时间：2013-02-19T15:19:31.910
> 
> 标签：asp.net, web-controls, asp.net-webcontrol

有没有办法使用基类访问控件的值/文本？

查看[TextBox](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.textbox%28v=vs.100%29.aspx)和[HiddenField](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.hiddenfield%28v=vs.100%29.aspx)， System.Web.UI.Control 是它们共享的最具体的基类。似乎是一个不错的候选人，但我看不到访问文本/值的明显方法。

我确实看到两个类定义都使用*ControlValuePropertyAttribute*来识别保存其文本/值的属性...例如 HiddenField 设置为“Value”，TextBox 设置为“Text”。不过，不确定如何使用该信息来检索数据。

**背景**

我有一个扩展方法，它获取一些 Web 控件（例如 TextBox）的文本并将其转换为给定类型：

```
<Extension()> _
Public Function GetTextValue(Of resultType)(ByVal textControl As ITextControl, ByVal defaultValue As resultType) As resultType
    Return ConvertValue(Of resultType)(textControl .Text, defaultValue)
End Function 
```

现在，我需要一个 HiddenField 的值（它没有实现 ITextControl 接口）。重载函数很容易，但只处理基类而不必再处理编写重载就很棒了。

**编辑 - 附加信息**

这是如何使用扩展方法的示例

```
Dim myThing as Decimal = tbSomeWebControl.GetTextValue(Of Decimal)(0)  ' Converts the textbox data to a decimal
Dim yourThang as Date = hdnSomeSecret.GetTextValue(Of Date)(Date.MinValue)  ' Converts the hiddenfield data to a Date 
```

目前，这需要两个重载，因为使用隐藏字段中的 Value 属性和文本框中的 Text 属性访问数据。

过载有什么问题？什么都没有，除了我一遍又一遍地编写几乎相同的代码（只是修改定义的第一个参数和它的调用的第一个参数）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T15:37:46.400

您不能使用面向对象的方法来获取值，因为它们在继承树中没有共同的祖先，您可以从中获取数据。解决方案太不优雅了，你应该`WebControl`动态地传递和检查类型。

请原谅我的 C#：

（请注意，这是记事本代码，我没有运行任何代码，因此您可能需要一些调整）

* * *

**方案一：直接从Request中获取数据**

缺点：不是很像 ASP.NET。然而做这份工作。

```
public string GetTextValue<ResultType>(WebControl control, ResultType defaultValue)
{
    // If you only wish data from form, and not questy string or cookies
    // use Request.Form[control.UniqueId] instead
    string value = Request[control.UniqueId];
    return ConvertValue<ResultType>(value, defaultValue);
} 
```

* * *

**解决方案 2：动态检查类型**

缺点：您必须为多种控件类型提供处理

```
public string GetTextValue<ResultType>(WebControl control, ResultType defaultValue)
{
    if (control is ITextControl)
        return ConvertValue<ResultType>((ITextControl)control.Text, defaultValue);
    else if (control is HiddenField)
        return ConvertValue<ResultType>((HiddenField)control.Value, defaultValue);
    else if (anothertype)
        return ConvertValue<ResultType>(another_retrieval_method, defaultValue);
} 
```

* * *

**解决方案 3：使用反射**

缺点：反射可能很棘手，看起来不优雅，并且在许多调用上可能很慢

```
public string GetTextValue<ResultType>(WebControl control, ResultType defaultValue)
{
    // Get actual control type
    Type controlType = control.GetType();
    // Get the attribute which gives away value property
    Attribute attr = controlType.GetCustomAttribute<ControlValuePropertyAttribute>();
    if (attr == null)
        throw new InvalidOperationException("Control must be decorated with ControlValuePropertyAttribute");
    ControlValuePropertyAttribute valueAttr = (ControlValuePropertyAttribute)attr;
    // Get property name holding the value
    string propertyName = valueAttr.Name;
    // Get PropertyInfo describing the property
    PropertyInfo propertyInfo = controlType.GetProperty(propertyName);
    // Get actual value from the control object
    object val = propertyInfo.GetValue(control);
    if (val == null)
        val = "";

    return ConvertValue<ResultType>(val, defaultValue);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T15:29:46.083

我认为[DataItemContainer](http://msdn.microsoft.com/en-us/library/system.web.ui.control.dataitemcontainer.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-1)将是您正在寻找的最接近的东西。

# iphone - 为什么我的 Xcode 4.6 本地化文件只能选择英文？

> ID：14960951
> 
> 赞同：9
> 
> 时间：2013-02-19T15:19:35.803
> 
> 标签：iphone, ios, xcode

在我的 Xcode 4.6 中，我只能选择 Englist 来本地化文件。

这是 Xcode 4.6 的错误吗？

现在如何本地化我的文件？

特别感谢！

![在此处输入图像描述](../Images/67343e8dd9c76339a1968c942fe02933.png)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-19T15:24:34.497

在本地化文件之前，您必须将语言添加到应用程序中，请参见下图：

![在此处输入图像描述](../Images/3bb5c0ecd9e2e66e454e26d8c4a65e59.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-19T15:25:33.207

在将本地化添加到项目中的文件之前，您必须向项目添加本地化。见下图：

![为项目添加本地化](../Images/2047fb9584693a506d703b17b2b260ad.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-19T15:26:04.773

您应该在项目->信息设置中添加语言： ![在此处输入图像描述](../Images/f9e967da013e5729df8c75e6848c127f.png)

# php - 如何使 symfony2 请求对象将 UploadedFile 对象传递给实体类而不是字符串

> ID：14960954
> 
> 赞同：1
> 
> 时间：2013-02-19T15:19:52.840
> 
> 标签：php, symfony, yaml

我正在尝试上传带有文件字段的表单。表单加载正常，但请求的 Symfony\Component\HttpFoundation\Request 对象仅将文件表示为字符串而不是 UploadedFile 对象。

```
use Symfony\Component\HttpFoundation\Request;
use Symfony\Bundle\FrameworkBundle\Controller\Controller;

use some\Bundle\Entity\Images;
use some\Bundle\Form\ImagesType;

/**
 * Images controller.
 *
 */
class ImagesController extends Controller {    
public function createAction(Request $request) {
            $entity = new Images();

            $form = $this->createForm(new ImagesType(), $entity);

            $form->bind($request);
            if ($form->isValid()) {                 

                $em = $this->getDoctrine()->getManager();
                $em->persist($entity);
                $em->flush();

                return $this->redirect($this->generateUrl('images_show', array('id' => $entity->getId())));
            }

            return $this->render('sephaBundle:admin/Images:new.html.twig', array(
                        'entity' => $entity,
                        'form' => $form->createView(),
                    ));
       } 
} 
```

实体类

```
<?php

namespace some\Bundle\Entity;

use Doctrine\ORM\Mapping as ORM;

use some\Bundle\Entity\Images;

/**
 * some\Bundle\Entity\Images
 */
class Images {

    /**
     * @var integer $id
     */
    private $id;

    /**
     * @var string $link
     */
    private $link;

    /**
     * @var string $name
     */
    private $name;

    /**
     * @var file $file
     */
    public $file;

     public function getFile() {
        return $this->file;
    }
    public function setFile($file) {
        $this->file = $file;

        return $this;
    }
    /**
     * Get id
     *
     * @return integer 
     */
    public function getId() {
        return $this->id;
    }

    /**
     * Set link
     *
     * @param string $link
     * @return Images
     */
    public function setLink($link) {
        $this->link = $link;

        return $this;
    }

    /**
     * Get link
     *
     * @return string 
     */
    public function getLink() {
        return $this->link;
    }

    /**
     * Get $Name
     *
     * @return string
     */
    public function getName() {
        return $this->name;
    }

    /**
     * Set Name
     *
     * @param string $name
     * @return Images
     */
    public function setName($name) {
        $this->name = $name;

        return $this;
    }

///////////////////////////////////////////////////////////////
    // <editor-fold defaultstate="collapsed" desc="process file storage location">

    public function getAbsoluteLink() {
        return null === $this->link ? null : $this->getUploadRootDir() . '/' . $this->link;
    }

    public function getWebLink() {
        return null === $this->link ? null : $this->getUploadDir() . '/' . $this->link;
    }

    protected function getUploadRootDir() {
        // the absolute directory link where uploaded
        // documents should be saved
        return __DIR__ . '/../../../../web/' . $this->getUploadDir();
    }

    protected function getUploadDir() {
        // get rid of the __DIR__ so it doesn't screw up
        // when displaying uploaded doc/image in the view.
        return 'uploads/documents';
    }

// </editor-fold>
///////////////////////////////////////////////////////////////

    public function preUpload() {
        if (null !== $this->file) {
            // do whatever you want to generate a unique name

            $filename = sha1(uniqid(mt_rand(), true));

            $this->link = $filename . '.' . $this->file->guessExtension();****//error here $this->file is a string instead of UploadedFile object**** 
        }
    }

    public function upload() {
//        if (null === $this->file) {
//            return;
//        }
        // if there is an error when moving the file, an exception will
        // be automatically thrown by move(). This will properly prevent
        // the entity from being persisted to the database on error
        $this->file->move($this->getUploadRootDir(), $this->link);

        unset($this->file);
    }

    /**
     * //@ ORM\PostRemove()
     */
    public function removeUpload() {
        if ($file === $this->getAbsoluteLink()) {
            unlink($file);
        }
    }

}?> 
```

表单生成类

```
namespace some\Bundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;
use Symfony\Component\HttpFoundation\File\UploadedFile;

class ImagesType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ->add('Name')
            ->add('file','file',array(
                        'label'=>'Image',
                        'data_class' => 'Symfony\Component\HttpFoundation\File\UploadedFile'
                        ));
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'data_class' => 'sepha\Bundle\Entity\Images'
        ));
    }

    public function getName()
    {
        return 'sepha_bundle_imagestype';
    }
} 
```

yaml 中的 ORM MAP

```
some\Bundle\Entity\Images:
    type: entity
    table: images
    fields:
        id:
            id: true
            type: integer
            unsigned: false
            nullable: false
            generator:
                strategy: IDENTITY
        name:
            type: string
            length: 20
            fixed: false
            nullable: false
        link:
            type: string
            length: 60
            fixed: false
            nullable: false

    properties:
        file:
          - Image:
              maxSize: 1024k
              mimeTypes: [image/jpeg, image/png, image/gif ]
              mimeTypesMessage: Please upload a valid image of type jpeg,png or gif

    lifecycleCallbacks:
      prePersist: [preUpload]
      preUpdate: [preUpload]
      postPersist: [upload]
      postUpdate: [upload]
      postRemove: [removeUpload] 
```

我应该怎么做才能使请求对象将文件请求表示为 UploadedFile 对象而不是字符串

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T08:21:01.987

`form_enctype(form)`您的模板的表单标签中有指令吗？

IE。

`<form action="{{ path('your_path') }}" {{ form_enctype(form) }} method="POST">`

**更新**

您的类属性（对于您的实体）都应该受到保护（使用 getter 和 setter）。将它们设为私有是没有意义的。

`protected $file;`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-07T19:23:54.507

您必须从请求中检索文件。

```
// retrieves an instance of UploadedFile identified by foo
$request->files->get('foo'); 
```

[http://symfony.com/doc/current/book/http_fundamentals.html](http://symfony.com/doc/current/book/http_fundamentals.html)

# javascript - 弹出框中的 HTML 视频在 Chrome 中随机播放/不播放

> ID：14960955
> 
> 赞同：2
> 
> 时间：2013-02-19T15:19:56.773
> 
> 标签：javascript, jquery, google-chrome, popup, html5-video

这将再次成为可能没有答案的问题之一，但无论如何我都会尝试。

我创建了一个自定义 WP 插件，它采用文件夹名称并将文件夹内的所有视频输出为图像，单击时会弹出一个视频。该视频具有自定义控件（仅播放/暂停和静音），我正在使用 fancybox 来弹出视频。

一切都在 Opera 和 Firefox 中可靠运行。该视频不会在 IE9 中播放，最烦人的是，它**有时会**在 Chrome 中播放，有时则不会。（顺便说一句，Safari 甚至不会弹出，不知道为什么）。

该插件是一段相当长的代码，但最终结果是一堆链接，其中包含一个图像和一个隐藏的 div，其中包含与当前视频相关的链接。然后是视频容器，它是弹出窗口的代码。单击其中一个链接后，视频的 src 将交换为链接隐藏内容中的源。

这很难解释，所以请看一下网站上的代码：http: [//londoncreativedigital.com/downloads/creativeshowcase/](http://londoncreativedigital.com/downloads/creativeshowcase/)

如果你还在阅读，这里是插件的代码 [https://github.com/marian-cerny/simple-video-embed](https://github.com/marian-cerny/simple-video-embed)

视频播放/暂停在 assets/player-controller.js 中处理。

我将不胜感激任何帮助。我只是无法从逻辑上解释这可能是什么原因。我试图调试 JS，但想不出任何东西。有一秒钟，我认为添加 webm 视频会有所帮助，但事实并非如此。它的行为方式相同，即使在添加 webm 并删除 mp4 版本之后也是如此。（在localhost上试过，在线版本没有webm vids）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T23:21:33.700

你几乎不需要责怪你的标记或 javascript，假设有一些不同的东西。我遇到过几次这样的情况。好吧，这就是我所做的。

1.  直接在 chrome 和 FF 中打开视频。
2.  打开两者的开发者栏，然后查找 net(network) 选项卡，您可以在其中看到标题和其他加载信息。
3.  在我的情况下，FF 中只有一个请求，并且从 Chrome 中乘以，并且只有取消或挂起。
4.  对 ogg 剪辑进行了同样的尝试，虽然分块，但在 FF 中很好，在 Chrome 中更好一些，部分请求处于待处理状态，部分已取消，fiew 很好。

这里可能有什么问题，好吧，正如我所说，我过去确实有类似的问题，我与专业电影制作人合作，他们在所有编解码器方面做得非常好。我刚刚向他展示了来自 videojs.com 的完美工作 mp4 视频，他通过更改编码器或类似的东西以某种方式修复了他的视频。不幸的是，我无法联系他如何询问，但它可能会给你一些想法。请大家只要能解决，就在这里更新状态，我一直有点好奇，但没有机会解决我的好奇心。

你的视频只为我工作过一次，但我不确定它是否`mp4`或`ogg`那时。我也在使用最新的 Chrome 和 FF 的 win7。

# objective-c - `->`符号在objective-c中代表什么

> ID：14960960
> 
> 赞同：-1
> 
> 时间：2013-02-19T15:20:04.573
> 
> 标签：objective-c

我一直在查看一些代码并遇到`->`正在使用的符号，就像`obj->method(argument);`我做了一些研究一样，发现它基本上是相同的，`[obj method:argument];`但我不确定`->`实际上是什么或做什么。

所以我的问题是，这个`->`符号在objective-c中是什么意思？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T15:23:19.170

它的含义与 C 中的解引用运算符相同，用于通过指针`struct`访问 中的字段：`struct`

```
struct mystruct
{
    int field;
};

struct mystruct *mystruct = ...;
printf("field=%d\n", mystruct->field); 
```

在 Objective-C 中，它也可以用于访问 Objective-C 对象中的字段：

```
@interface MyObj : NSObject
{
@public
    int field;
}
@end

MyObj *myObj = [[MyObj alloc] init];
NSLog(@"field=%d", myObj->field); 
```

请注意，只有声明了这些字段，您才能从外部访问它们`@public`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-19T16:55:53.730

> 我一直在查看一些代码并遇到符号 -> 像 obj->method(argument); 一样被使用 我做了一点研究，发现它与[obj方法：参数]基本相同；但我不确定 -> 实际上是什么或做了什么。
> 
> 所以我的问题是，objective-c 中的 -> 符号是什么意思？

它在 C 中的含义完全相同；它用于访问 C 结构中的项目。回到过去，Objective-C 纯粹是作为 C 预处理器扩展 + 运行时实现的。类只不过是串联的 C 结构，预处理器将每个 ivar 访问转换为`self->ivar`.

即`ivar`做`self->ivar`同样的事情（在类的方法中）。

现在，您*可以*用来`->`戳其他对象的 (@public) ivars。但是不要。这完全破坏了封装，因为 Objective-C 的封装线是在方法接口处绘制的。始终使用设置器/获取器，以便可以观察或覆盖行为。

最后，不，没有什么像`obj->method(argument)`了。曾经有一个失败的实验叫做*Modern Syntax*，但它被放弃了，因为它毫无意义地浪费了时间。你不能`->`用来调用方法。

# jsp-tags - servlet异常流关闭jsp

> ID：14960964
> 
> 赞同：1
> 
> 时间：2013-02-19T15:20:20.403
> 
> 标签：jsp-tags, jspinclude, servletexception

我收到一个 servlet 异常“流已关闭”！！。我无法确定哪个 jsp 页面是有问题的页面或哪一行有问题。它显示页面定义页面以及包含的页面。

***因为将所有附加为 zip 文件***的页面显示出来并不容易：[InGoogleDocs](http://goo.gl/zlKpu)

结构类似于 pageDef.jsp 包含：allThings.jsp design.jsp myFile.jsp

我得到的例外如下：

> javax.servlet.jsp.JspException: ServletException in '/layout/global/allThings.jsp': ServletException in '/layout/body/design.jsp': ServletException in '/layout/sub/design.jsp': ServletException in ' /module/air/myFile.jsp'：**流** 在 org.apache.struts.taglib.tiles.InsertTag.doEndTag( InsertTag.java:460) 在 org.apache.jsp.pagedef.air.pageDef_jsp._jspx_meth_tiles_insert_0( **pageDef_jsp.java:1693** ) 在 org.apache.jsp.pagedef.air.pageDef_jsp._jspService( **pageDef_jsp.java**:146) 在 org.apache.jasper.servlet.JspServletWrapper 的 javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 的 org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)。 service(JspServletWrapper.java:386) at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313) at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260) at javax.servlet .http.HttpServlet.service(HttpServlet.java:717) 在 sun.reflect.GeneratedMethodAccessor70.invoke(Unknown Source) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java.lang.reflect.Method.invoke (Method.java:597) 在 org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:270) 在 org.apache.catalina.security。SecurityUtil$1.run(SecurityUtil.java:269) at java.security.AccessController.doPrivileged(Native Method) at javax.security.auth.Subject.doAsPrivileged(Subject.java:517) at org.apache.catalina.security.SecurityUtil .execute(SecurityUtil.java:302) 在 org.apache.catalina.security.SecurityUtil.doAsPrivilege(SecurityUtil.java:163) 在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:283) 在 org. apache.catalina.core.ApplicationFilterChain.access$000(ApplicationFilterChain.java:56)302）在 org.apache.catalina.security.SecurityUtil.doAsPrivilege(SecurityUtil.java:163) 在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:283) 在 org.apache.catalina.core.ApplicationFilterChain .access$000(ApplicationFilterChain.java:56)302）在 org.apache.catalina.security.SecurityUtil.doAsPrivilege(SecurityUtil.java:163) 在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:283) 在 org.apache.catalina.core.ApplicationFilterChain .access$000(ApplicationFilterChain.java:56)

**重要提示：** 我并没有一直得到这个例外。当我转到页面时（有时我会得到例外）。如果没有得到，如果我单击 jsp 中的后退按钮并返回页面，则会出现异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-25T08:48:38.080

这个问题就解决了。

问题出在 JSTL 自定义标签库的 for 循环中！！

**我如何解决（调试 JSP）：** 我制作了有问题的文件的不同副本，并将它们中的每一个都包含在定义 JSP 中。每个有问题的 JSP 文件都在不同的区域进行编辑，如下所示。如果我们这样做，错误将只出现在一个/一些 JSP 中，因此很容易找出异常。

说：
**有问题的-ORIGINAL.jsp**

```
<jsp:for...></jsp>
<c:...>..</c>
<a href="<c:..../>"> ... </a> 
```

**有问题的-1.jsp**

```
<c:...>..</c> 
```

**有问题的-2.jsp**

```
<jsp:for...></jsp> 
```

**有问题的-3.jsp**

```
<a href="<c:..../>"> ... </a> 
```

*然后在定义 JSP 中包含 1,2 和 3。因此，我可以发现问题在第二个。享受编码..*

# java - 使用java将json序列化为rdf

> ID：14960968
> 
> 赞同：4
> 
> 时间：2013-02-19T15:20:26.943
> 
> 标签：java, json, serialization, rdf

我有一个像这样的 json 对象：

```
[{
"id": 1,
"text": "Item 1",
"iconCls": "icon-ok",
"target": {
    "jQuery180016273543753015074": 16
},
"checked": false,
"state": "open",
"children": [{
    "id": 2,
    "text": "Item 1_1",
    "target": {
        "jQuery180016273543753015074": 15
    },
    "checked": false,
    "state": "open",
    "children": [{
        "id": 3,
        "text": "Item 1_1_1",
        "target": {
            "jQuery180016273543753015074": 14
        },
        "checked": false,
        "state": "open",
        "children": [{
            "id": 7,
            "text": "Item 1_1_1_1",
            "target": {
                "jQuery180016273543753015074": 13
            },
            "checked": false
        },
        {
            "id": 6,
            "text": "Item 1_1_1_2",
            "target": {
                "jQuery180016273543753015074": 12
            },
            "checked": false
        }]
    }]
},
{
    "id": 8,
    "text": "Item 1_1_2",
    "target": {
        "jQuery180016273543753015074": 11
    },
    "checked": false,
    "state": "open",
    "children": [{
        "id": 4,
        "text": "Item 1_1_2_1",
        "target": {
            "jQuery180016273543753015074": 10
        },
        "checked": false
    },
    {
        "id": 5,
        "text": "Item 1_1_2_2",
        "target": {
            "jQuery180016273543753015074": 9
        },
        "checked": false
    }]
},
{
    "id": 9,
    "text": "Item 1_1_3",
    "target": {
        "jQuery180016273543753015074": 17
    },
    "checked": false
}]
 }] 
```

我需要使用 java 在 RDF 本体中对其进行序列化，从而将子级的层次结构保持为“子类”属性。任何人都可以建议一种有效的算法来解析 JSON 吗？我使用实验室的内部 java API 来处理本体，因此在这种情况下，算法而不是代码会更有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T19:19:17.483

[您可以使用此处](http://json.org/java/)列出的任何库来解析 JSON 文档并使用[Jena](http://jena.sourceforge.net/tutorial/RDF_API/)创建 RDF 三元组。

您可能希望递归地遍历 JSON 文档，并为每个节点创建一个 RDF 节点，该节点具有与该节点所拥有的 JSON 属性一样多的属性。要表示子关系，您可以使用`rdfs:subClassOf`因此节点 2 将是`rdfs:subClassOf`节点 1 的一个。

这是节点 1 和节点 2 如何在[RDF/Turtle](http://www.w3.org/TeamSubmission/turtle/)中序列化的示例：

```
 @prefix : <http://other.example.org/ns#> .

   :node_1 rdf:type :Node;
    :text "Item 1";
    :iconCls 16;
    :target [
        :jQueryID "180016273543753015074";
        :number 11;
    ];
    :checked false;
    :state "open" .

  :node_2 rdf:type :Node;
    :text "Item 1";
    :iconCls 16;
    :target [
        :jQueryID "180016273543753015074";
        :number 11;
    ];
    :checked false;
    :state "open";
    rdfs:subClassOf :node_1 . 
```

您可能需要查看 Turtle 规范文档以了解它是如何构建的，无论如何它有点直观。请记住，有几种方法可以序列化 RDF 三元组，RDF/Turtle 是最易读的。如您所见，节点之间的子关系记录在节点 2 中。

# c++ - 从字符串构造 char*const*

> ID：14960969
> 
> 赞同：1
> 
> 时间：2013-02-19T15:20:28.000
> 
> 标签：c++, c, string, char, constants

我正在尝试将字符串转换为 a`const*char*`以便能够调用库函数。我的代码如下：

```
// myVec is simply a vector<string> 

vector<string> myVec;
/* stuff added to myVec
 * it is a vector of words that were seperated by whitespace
 * for example myVec[0]=="Hey"; myVec[1]=="Buck"; myVec[2]=="Rogers"; etc...
 */

char*const* myT = new char*[500]; //I believe my problem stems from here

for(int z=0; z<myVec.size(); z++) {
   string temp=myVec[z]+=" "; 
   myT[z]=temp.c_str();
}
//execv call here 
```

我正在为 的第二个参数构造这个[`execv()`](http://linux.die.net/man/3/execvp)。

编译器总是抛出各种错误，当我修复另一个错误时（从我使用的解决方案/google-fu 看来相当循环）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T15:45:44.070

的签名`execv`期望参数数组指向可修改的 C 样式字符串。因此，与其他答案所暗示的相反，这`c_str()`不是一个好主意。

虽然在 C++03 中不能保证，但事实是`std::string`我所知道的所有实现都将数据存储在连续的 NULL 终止的内存块中（这在 C++11 中得到保证），因此您可以利用它来发挥自己的优势：创建指向可修改字符数组的指针向量，使用输入向量中字符串的缓冲区初始化值，并将该数据块的地址传递给`execv`：

```
std::vector<char*> args;
args.reserve(myVec.size()+1);
for (std::vector<std::string>::iterator it=myVec.begin(); it != myVec.end(); ++it) {
   args.push_back(&((*it)[0]);
}
args.push_back(0);   // remember the null termination:

execv("prog", &args[0]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T15:45:37.637

有两个基本问题需要解决。第一个是编译器错误：指向的数组中的指针`myT`是`const`，因此您不能分配给它们。使`myT` `char const** myT;`. 第二个问题是您分配给它们的是指向局部变量的指针，当它超出范围时将被破坏，因此指针将悬空。

你调用的函数最后真的需要额外的空格吗？（你在某处提到`execv`过，我想。如果这是函数，那么额外的空格弊大于利。）如果没有，你所要做的就是：

```
std::vector<char const*> myT( myVec.size() + 1 );
std::transform( myVec.begin(), myVec.end(), myT.begin(),
                []( std::string const& arg ) { return arg.c_str(); } );
execv( programPath, &myT[0] ); 
```

如果您不能指望 C++11（通常仍然如此），您可以使用`boost::bind`;做类似的事情。否则，只需自己编写循环。

如果您确实需要以`myVec`某种方式转换字符串，最好的解决方案仍然是将它们复制到 second `std::vector<std::string>`中，并使用转换，然后使用它。

（顺便说一句：你真的想通过在循环中的每个元素上`myVec`使用来修改 , 的内容吗？）`+=`

# android - 如何找到字体的十六进制数组以在位图上绘制它

> ID：14960973
> 
> 赞同：1
> 
> 时间：2013-02-19T15:20:33.933
> 
> 标签：android, fonts, bitmap, rgba

`RGBA8888`我有一个可以在其上绘制图像的格式的位图表面。现在，我想在图像中添加一些字母。我想，我需要一个`font`以`RGBA8888`位图格式存储的文件。然后我需要将其加载`font`到内存中并从字体中选择要显示的字母，然后将其写入`bitmap`. 但是如何`RGBA8888 arrays`从`TrueType`字体或任何其他格式中找到或提取字体？

# cordova - phonegap 和 AdMob 标志问题

> ID：14960974
> 
> 赞同：0
> 
> 时间：2013-02-19T15:20:34.877
> 
> 标签：cordova, admob, phonegap-plugins

我有这个问题，我希望看看是否有人可以帮助我，我有一个使用 phonegap 2.4 的项目，它使用来自谷歌的最新 AdMob sdk，看起来这个新的谷歌 sdk 需要删除一个标志

[https://groups.google.com/forum/#!msg/google-admob-ads-sdk/KIJrPLou2ns/KyqrEWIvTLgJ](https://groups.google.com/forum/#!msg/google-admob-ads-sdk/KIJrPLou2ns/KyqrEWIvTLgJ)

-all_load，来自其他链接器标志部分

根据文档，即使其中没​​有代码，此标志也允许加载类别（不确定它的含义，但无论如何），所以如果我删除了我可以为设备构建的标志，但 phonegap 正在第 165 行的 CDVViewController 上使用

self.pluginsMap = [delegate.pluginsDict dictionaryWithLowercaseKeys];

哪里 dictionaryWithLowercaseKeys 需要那个标志，这些似乎是由于 ios 6 支持，所以我不知道是哪一个有责任，phonegap 还没有准备好到 ios 6 或 google sdk，所以我的问题是

如果有人能够通过电话 2.4 和 ios 6 成功使用 AdMob sdk？？或者我遗漏了什么，请提供任何想法，感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T00:06:34.540

由于 iOS 6 中修复了一个 iOS 错误，许多库都需要使用该`-all_load`标志。AdMob SDK 要求您不再拥有该`-all_load`标志。

如果出于某种原因需要加载特定库，可以使用[-force_load](https://stackoverflow.com/questions/10809304/alternative-for-all-load-in-xcodes-other-linker-flags)标志。

# vb.net - 无法将控件动态加载到 SplitContainer 面板中

> ID：14960979
> 
> 赞同：0
> 
> 时间：2013-02-19T15:21:01.957
> 
> 标签：vb.net, winforms, custom-controls

我`SplitContainer`在表单上放置了一个控件。我有一个自定义控件里面`panel 1`。此自定义控件是另一个用户控件的容器。

此用户控件中有一个`TreeView`控件。我试图在树视图中选择一个节点后将另一个用户控件加载到面板 2 上。但它没有被加载。我错过了什么吗？

加载控件的代码如下：

```
Dim ucImportExcel1 As New ucImportExcel()
frmMain.SplitContainer1.Panel2.Controls.Add(ucImportExcel1)
ucImportExcel1.Dock = DockStyle.Fill 
```

对上述内容的补充：在同一个`treeview`选择事件中

对于下面的代码，它设置表单文本：

```
me.parentform.text = "Sample Text 1" 
```

而如果使用此代码，则不会发生任何事情：

```
frmmain.text = "Sample Text 2" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T06:15:50.863

当由 a 引用时`Directcast`，它解决了问题：

```
DirectCast(Me.ParentForm.Controls.Item("SplitContainer1"), System.Windows.Forms.SplitContainer).Panel2.Controls.Add(ucImportExcel1) 
```

# c# - 从任何地方访问数组

> ID：14960980
> 
> 赞同：0
> 
> 时间：2013-02-19T15:21:03.950
> 
> 标签：c#, arrays, static

我有一个静态数组，它使用一个静态变量`Variables.rows`来定义数组中的行数。`Variables.rows`在另一个名为`Variables`.

```
public static class TheArrayClass
{
    public static double[,] HiThere = new double[Variables.rows, 6];
} 
```

**我的问题是，一旦**项目运行（我相信） ，就会创建静态数组。这意味着分配正确值所需的方法`Variables.Rows`没有及时执行。这意味着在填充数组时出现索引错误，因为数组的大小不正确。

我需要一种解决方法，以便我可以从代码中的任何位置访问该数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:33:42.713

尝试在表单之间传递消息。

```
public partial class Form1 : Form
{
    private string _data;

    public Form1()
    {
        InitializeComponent();
        _data = "Some data";
    }

    private void button1_Click(object sender, EventArgs e)
    {
        var form2 = new Form2();
        form2.Data = _data;
        form2.Show();
    }
}

public partial class Form2 : Form
{
    public Form2()
    {
        InitializeComponent();
    }

    public string Data { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T15:25:47.713

有趣的是，您没有显示`Variables.Rows`定义的位置。无论哪种方式，您都可以在类的构造函数中执行您想要的任何初始化。

```
public static class TheArrayClass
{
    public static double[,] HiThere;

    static TheArrayClass()
    {
         HiThere = new double[Variables.rows, 6];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T15:31:54.143

我认为您有设计问题，所以我将尝试添加一些可以帮助您解决问题的信息。

首先，静态类实际上是在项目运行后立即创建的。但是静态类也可以有一个静态构造函数（您可以在其中定义 variables.rows），该构造函数也将在项目运行后立即运行一次。

此外，也许您应该使用 ArrayList ( [http://msdn.microsoft.com/en-us/library/system.collections.arraylist.aspx](http://msdn.microsoft.com/en-us/library/system.collections.arraylist.aspx) ) 或 GenericList ( [http://msdn.microsoft.com/en-us/ library/6sh2ey19.aspx](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)），通过这样做，您可以轻松避免数组变量的限制（例如更改其大小）。

# c# - ADO.NET EF - 当我们有外键时填充 DataGridView

> ID：14960982
> 
> 赞同：0
> 
> 时间：2013-02-19T15:21:05.660
> 
> 标签：c#, sql, foreign-keys, ado.net-entity-data-model

我是相当新的`ORMs`，`ADO.NET EF`特别是。我正在使用这种`Code First`方法。我的有这两张表`DB`：

`Material`：

```
public class Material
    {
        [Required]
        [MaxLength(10)]
        public string Code { get; set; }

        [MaxLength(40)]
        public string Color { get; set; }

        [MaxLength(40)]
        public string Description { get; set; }

        [MaxLength(255)]
        public string Picture { get; set; }

        public long MaterialTypeId { get; set; }
        public virtual MaterialType MaterialType { get; set; }

    } 
```

和`MaterialType`：

```
public class MaterialType 
  { 
      [MaxLength(40)] 
      public string MatType { get; set; }

      public virtual ICollection<Material> Materials { get; set; }
  } 
```

而且我有一个`DataGridView`填充所有信息的地方，`Material`除了`MatType`which is`Leather`和`Plastic`类似的东西，我必须从桌子上拿走`MaterialType`。这是`FK`迄今为止唯一的一个，所以我`SELECT *..`之前和现在的用户，当涉及到它时，我不知道如何构建我的代码/查询，所以我可以`DataGridView`用第二个表中的信息填充。在`DataGridView`我有`MaterialTypeId`隐藏的列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:43:14.910

使用 DataTransferObjects(DTO)。

```
public class MaterialDTO
{
        public string Code { get; set; }

        public string Color { get; set; }

        public string Description { get; set; }

        public string Picture { get; set; }

        public string MatType { get; set; }
} 
```

然后用信息完成它：

```
List<MaterialDTO> listForGrid = context.Material.Select(e=>new MaterialDTO(){Code=e.Code, Color = e.Color, Description = e.Description, Picture = e.Picture, MatType = e.MaterialType.MatType}).ToList(); 
```

此示例从 Table 中的 DB 中获取全部数据`Material`，并将其放入`List<MaterialDTO> listForGrid`. 也许您还想在,`Where`之前放置`Select`表中的部分数据，而不是整个表。

然后将此数据绑定到网格...

# asp.net-mvc-3 - 删除url中的响应参数

> ID：14960983
> 
> 赞同：1
> 
> 时间：2013-02-19T15:21:13.087
> 
> 标签：asp.net-mvc-3, anchor

我的网站在`MVC3`剃须刀和`.Net 4`框架上。

我的视图中有一个`href`链接

```
<a href="http://localhost:17238/News?NewsID=20&NewsUrl=xxx">mylink</a> 
```

此链接转到新闻操作，新闻操作是：

```
 [ValidateInput(false)]
    public ActionResult Index(int NewsID, string NewsUrl)
    {

        //do some process on NewsID and NewsUrl

         mymodel mm=new mymodel();
        return View(mm);

    } 
```

它工作正常，但返回 url 包括 NewsId 和 NewsUrl 作为参数，我知道这是正常的，但是当我的操作返回响应时，如何删除所有参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:23:25.993

执行此操作的唯一方法是执行 HTTP 302 或 301 重定向。

```
return Redirect(); //302
return RedirectPermanent(); //301
return RedirectToAction(); //302
return RedirectToActionPermanent(); //301
return RedirectToRoute(); //302
return RedirectToRoutePermanent(); //301 
```

通过执行 HTTP 301 重定向，您告诉客户端这是一个永久重定向（即资源已正式重新定位）。浏览器可能会缓存此重定向。

您可能不想进行 301 重定向；我只是提到它来给出一个完整的答案。

# android - 由 PackageManager.DONT_KILL_APP 引起的不可预测的行为

> ID：14960988
> 
> 赞同：5
> 
> 时间：2013-02-19T15:21:24.667
> 
> 标签：android, nullpointerexception, onresume, android-package-managers

[PackageManager.DONT_KILL_APP](http://developer.android.com/reference/android/content/pm/PackageManager.html#DONT_KILL_APP)的 API 文档说：

> 设置时要小心，因为更改组件状态会使包含应用程序的行为变得不可预测。

不幸的是，他们没有详细说明不可预测的行为是什么意思。

在我的应用程序中，我正在切换活动的启用状态。首先一个服务启用该活动并启动它：

```
getPackageManager().setComponentEnabledSetting(
    new ComponentName(MyService.this.getApplicationContext(),
    MyActivity.class),
    PackageManager.COMPONENT_ENABLED_STATE_ENABLED,
    PackageManager.DONT_KILL_APP);

final Intent launchIntent = new Intent(context, MyActivity.class);
    launchIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK
        | Intent.FLAG_ACTIVITY_CLEAR_TOP
        | Intent.FLAG_ACTIVITY_SINGLE_TOP);

context.startActivity(launchIntent); 
```

如果（单顶）活动再次启动或销毁，它将再次设置为禁用：

```
@Override
protected void onDestroy() {
    log.d("ON DESTROY");
    super.onDestroy();
    getPackageManager().setComponentEnabledSetting(getComponentName(),
        PackageManager.COMPONENT_ENABLED_STATE_DISABLED,
        PackageManager.DONT_KILL_APP);
}

@Override
protected void onNewIntent(Intent intent) {
    if (someCondition) {
        getPackageManager().setComponentEnabledSetting(getComponentName(),
            PackageManager.COMPONENT_ENABLED_STATE_DISABLED,
            PackageManager.DONT_KILL_APP);

        Intent i = new Intent();
        i.setAction(Intent.ACTION_MAIN);
        i.addCategory(Intent.CATEGORY_HOME);
        startActivity(i);

        finish();
        return;
    }

    super.onNewIntent(intent);
} 
```

通常一切正常，但有时对象是空的，在其他任何地方都没有`onResume()`被创建并且没有被触及。`onCreate()`我无法在调试器中重建此问题，但我收到了许多带有 NullPointerExceptions 的错误报告，如果之前真的调用过这些错误报告，`onResume()`这是不可能的。`onCreate()`

一个简单的例子是：

```
private String s;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    ...
    s = new String("");
    ...
}

@Override
protected void onResume() {
    super.onResume();
    ...
    s.equals(""); // rarely causes NullPointerException
    ...
} 
```

我的问题是：这可能是不可预测的行为`PackageManager.DONT_KILL_APP`吗？或者有没有人有另一个想法这是怎么发生的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:42:45.940

是的，虽然您不希望应用程序被杀死，但有时系统需要内存并丢弃一些对象。应用程序本身仍然存在并且只会调用 onResume() 但没有它之前创建的所有对象。

# tsql - 以另一种方式提高动态 SQL 查询性能或过滤记录

> ID：14960990
> 
> 赞同：0
> 
> 时间：2013-02-19T15:21:26.367
> 
> 标签：tsql, dynamic-sql

**预赛：**

我们的应用程序可以从附加的客户端 SQL Server 2005 或 2008 数据库中读取数据，但除了使用临时表外，不会对其进行任何更改。我们可以在他们的服务器上在我们自己的数据库中创建表。

该解决方案必须在 SQL Server 2005 中运行。

**架构：**

这是模式的简化概念。

*组*- 定义一组位置的特征

*位置*- 定义一个地理位置的特征。它链接到组表。

*GroupCondition* - 链接到一个组。它定义了适用于属于该组的位置子集的度量。

*GroupConditionCriteria* - 链接到 GroupCondition 表。它为 where 子句中的单个短语命名属性、值、关系运算符和布尔运算符。命名属性是 Location 表的所有字段。有一个序号。GroupConditionCriteria 中的多行必须以正确的顺序串在一起以形成完整的过滤条件。此筛选条件隐式限制为属于与 GroupCondition 关联的组的那些位置。满足过滤条件的位置记录为“包含”，不满足的位置记录为“排除”。

**目标：**

我们现有的许多查询都从位置表中获取属性。我们想加入一些东西（表、临时表、查询、CTE、openquery、UDF 等），这将为我们提供那些“包含”的位置的 GroupCondition 信息。（一个位置可以包含在多个规则中，但这是一个单独的问题。）

我想要的架构是：

```
CREATE TABLE #LocationConditions
(
    [PolicyID] int NOT NULL,
    [LocID] int NOT NULL,
    [CONDITIONID] int NOT NULL,
    [Satisfies Condition] bit NOT NULL,
    [Included] smallint NOT NULL
) 
```

PolicyID标识组，LocID标识Location，CONDITIONID标识GroupCondition，如果过滤器包含位置记录，[满足条件]为1。（包括来自不同的规则表，强制覆盖过滤条件。对于本次讨论并不重要。）

**问题大小：**

到目前为止，我的最大努力可以创建这样一个表，但速度很慢。对于我正在测试的当前数据库，有 50,000 个位置受到潜在匹配规则 (GroupConditions) 的影响（包括或排除）。执行时间为 4 分钟。如果我们定期刷新并使用永久表，这可能是可行的，但我希望更快。

**我尝试了什么：**

我使用了一系列 CTE，其中一个是递归的，将过滤条件的几个部分连接成一个大的过滤条件。作为这种情况的一个例子：

```
(STATECODE = 'TX' AND COUNTY = 'Harris County') OR STATECODE = 'FL' 
```

过滤条件中可以提到一到五个字段，并且可以使用任意数量的括号对它们进行分组。支持的运算符有 lt、le、gt、ge、=、<>、AND 和 OR。

一旦我有了条件，它仍然是一个文本字符串，所以我创建了一个插入语句（必须动态执行）：

```
insert into LocationConditions 
   SELECT 
      1896, 
      390063, 
      38, 
      case when (STATECODE = 'TX' AND COUNTY = 'Harris County') OR STATECODE = 'FL' then 1
           else 0 
      end, 
      1 
   FROM Location loc 
   WHERE loc.LocID = 390063 
```

我首先将插入语句添加到它们自己的临时表中，称为#InsertStatements，然后用游标循环它们。我使用 EXEC 执行每个插入。

```
CREATE TABLE #InsertStatements
(
    [Insert Statement] nvarchar(4000) NOT NULL
)

-- Skipping over Lots of complicated CTE's to add to #InsertStatements

DECLARE @InsertCmd nvarchar(4000)
DECLARE InsertCursor CURSOR FAST_FORWARD
FOR
SELECT [Insert Statement]
FROM #InsertStatements

OPEN InsertCursor

FETCH NEXT FROM InsertCursor
INTO @InsertCmd 

WHILE @@FETCH_STATUS = 0 
BEGIN 
    --PRINT @InsertCmd
    EXEC(@InsertCmd)
    FETCH NEXT FROM InsertCursor
    INTO @InsertCmd 
END 

CLOSE InsertCursor 
DEALLOCATE InsertCursor

SELECT * 
FROM #LocationConditions
ORDER BY PolicyID, LocID 
```

可以想象，执行 50,000 次动态 SQL 插入很慢。我怎样才能加快速度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:38:37.223

你必须单独插入每一行？你不能用

```
insert into LocationConditions 
   SELECT 
      PolicyID, 
      LocID, 
      CONDITIONID, 
      case when (STATECODE = 'TX' AND COUNTY = 'Harris County') OR STATECODE = 'FL' then 1
           else 0 
      end, 
      Included 
   FROM Location loc 
```

? 你没有展示你是如何创建插入语句的，所以我不知道它是否依赖于每一行。

# java - JavaDoc 中列出了两次的方法

> ID：14960992
> 
> 赞同：1
> 
> 时间：2013-02-19T15:21:33.470
> 
> 标签：java, javadoc

我有两个类和两个接口。`InterfaceA`

```
package ch.sukha.testmachine.client;
interface InterfaceA {
    /**
     * Foo.
     */
    void foo();
} 
```

是 的超级接口`InterfaceB`。

```
package ch.sukha.testmachine.client;
public interface InterfaceB extends InterfaceA {
   /**
    * Bar.
    */
   void bar();
} 
```

同样，class`A`是

```
package ch.sukha.testmachine.client;
class A implements InterfaceA {
    @Override
    public void foo() {
    }
} 
```

类`B`。

```
package ch.sukha.testmachine.client;
public class B extends A implements InterfaceB {
    @Override
    public void bar() {
    }
} 
```

在生成的 JavaDoc 中，method`foo`出现了两次。

![在此处输入图像描述](../Images/21c37337bf94ac608db8f976cb0aafd6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T16:05:10.100

> A 未导出。我想创建 A 的多个子类并重用 InterfaceA 的文档。

将所有内容导出到 JavaDoc。

要重用它的一部分，您可以使用

```
@inheritDoc 
```

注解。

# c# - REST 服务收到 400 错误请求

> ID：14960993
> 
> 赞同：1
> 
> 时间：2013-02-19T15:21:34.343
> 
> 标签：c#, .net, visual-studio-2010, wcf, rest

我在 C# 中创建了一个安静的 Web 服务。调用 POST 方法时出现 400 错误请求错误。我正在 fiddler 中检查我的请求，POST 请求非常好。我不明白我的程序有什么问题。

以下是一些代码片段。如果你们中的任何人需要任何其他代码来查看，请询问。

界面

```
[ServiceContract]
public interface IRead
{
    [OperationContract]
    [WebInvoke(UriTemplate = "GetCard", Method = "POST")]
    someObject GetCard(Session session);
} 
```

NFCSession 是一个具有名称 session 的 int 变量的对象。

客户端生成 POST 请求

```
public void GetCard()
{
        string strGetCard = "http://localhost:8384/Reader/GetCard";

        byte[] dataByte = GenerateNFCSession(63315152);

        HttpWebRequest POSTRequest = (HttpWebRequest)WebRequest.Create(strGetCard);
        POSTRequest.Method = "POST";
        POSTRequest.ContentType = "application/xml;charset=UTF-8";
        POSTRequest.ContentLength = dataByte.Length;

        Stream POSTstream = POSTRequest.GetRequestStream();

        POSTstream.Write(dataByte, 0, dataByte.Length);

        HttpWebResponse POSTResponse = (HttpWebResponse)POSTRequest.GetResponse();
        StreamReader reader =
          new StreamReader(POSTResponse.GetResponseStream(), Encoding.UTF8);
        Console.WriteLine("Response");
        Console.WriteLine(reader.ReadToEnd().ToString());
} 
```

XML 生成器

```
private static byte[] GenerateXML(int sessionID)
    {
        MemoryStream mStream = new MemoryStream();
        XmlTextWriter xmlWriter = new XmlTextWriter(mStream, Encoding.UTF8);
        xmlWriter.Formatting = Formatting.Indented;
        xmlWriter.WriteStartDocument();
        xmlWriter.WriteStartElement("Session");
            xmlWriter.WriteStartElement("session");
                xmlWriter.WriteString(sessionID.ToString());
            xmlWriter.WriteEndElement();
        xmlWriter.WriteEndElement();
        xmlWriter.WriteEndDocument();
        xmlWriter.Flush();
        xmlWriter.Close();
        Console.WriteLine(mStream.ToArray().ToString());
        return mStream.ToArray();

    } 
```

网络配置

```
<?xml version="1.0"?>
<configuration>
<system.web>
    <compilation debug="true" targetFramework="4.0" />
</system.web>

<system.webServer>
<modules runAllManagedModulesForAllRequests="true">
  <add name="UrlRoutingModule" type="System.Web.Routing.UrlRoutingModule, 
System.Web,Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
</modules>
</system.webServer>

<system.serviceModel>

<behaviors>
  <serviceBehaviors>
    <behavior>
      <serviceMetadata httpGetEnabled="true"/>
      <serviceDebug includeExceptionDetailInFaults="false"/>
    </behavior>
  </serviceBehaviors>
</behaviors>

<serviceHostingEnvironment aspNetCompatibilityEnabled="true"/>

<standardEndpoints>
  <webHttpEndpoint>
    <standardEndpoint name="" helpEnabled="true" faultExceptionEnabled="true"
automaticFormatSelectionEnabled="true"></standardEndpoint>
  </webHttpEndpoint>
</standardEndpoints>

</system.serviceModel>

<system.webServer>
<modules runAllManagedModulesForAllRequests="true"/>
</system.webServer>

</configuration> 
```

来自 Fiddler 的 POST 请求 XML

```
<?xml version="1.0" encoding="utf-8"?>
<Session>
  <session>63315152</session>
</Session> 
```

我收到这个错误

```
The server encountered an error processing the request. 
```

注意：当我提供 XmlSerializer 格式属性时，它工作正常。但我希望我的服务以后也能处理 JSON 请求。而且从我的角度来看，没有必要明确提供格式属性。我真的不明白这段代码有什么问题。

伙计们请帮忙！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:45:02.457

尝试添加`<enableWebScript />`内部行为标签：

```
...
<behaviors>
  <serviceBehaviors>
    <behavior>
      <serviceMetadata httpGetEnabled="true"/>
      <serviceDebug includeExceptionDetailInFaults="false"/>
      <enableWebScript />
    </behavior>
  </serviceBehaviors>
</behaviors>
... 
```

它在这里讨论：http: [//social.msdn.microsoft.com/Forums/en/wcf/thread/fb48999f-cd41-49b8-ae9a-f0c8f5aebbd2](http://social.msdn.microsoft.com/Forums/en/wcf/thread/fb48999f-cd41-49b8-ae9a-f0c8f5aebbd2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T18:42:42.807

我的 Web 服务现在工作正常。

我所做的更改在 DataContract 属性中。

最初是这样的：

```
[DataContract] 
```

我把它改成这样：

```
[DataContract(Namespace="")] 
```

它开始工作......

提示：当您运行 Web 服务时，您可以在 Web 服务的“/help”页面中看到示例 POST 请求。我从来没有关注过这个页面。但它非常有用。当我将此示例与 Fiddler 中的实际请求进行比较时，我发现命名空间是不同的。:D

# java - 如何在基于 GUI 的程序中计算总小时数？

> ID：14960996
> 
> 赞同：0
> 
> 时间：2013-02-19T15:21:38.237
> 
> 标签：java

我正在创建一个简单的基于 GUI 的时间卡。所以我已经有了实现（由朋友提供），但它只是在非 GUI 程序中制作的。

```
System.out.print("Enter time-in: ");
String strTimein = input.next();
String timeInArr[] = strTimein.split(":");
double dblTimeInHr = Double.parseDouble(timeInArr[0]);
double dblTimeInMin = Double.parseDouble(timeInArr[1]);
double dblTotalTimeIn = dblTimeInHr + (dblTimeInMin/60);
System.out.print("Enter time-out: ");
String strtimeout = input.next();
String timeOutArr[] = strtimeout.split(":");
double dblTimeOutHr = Double.parseDouble(timeOutArr[0]);
double dblTimeOutMin = Double.parseDouble(timeOutArr[1]);
double dblTotalTimeOut = dblTimeOutHr + (dblTimeOutMin/60);
totalHrs = totalHrs + (dblTotalTimeOut - dblTotalTimeIn); 
```

它确实有效。但是当我现在将它应用到我的基于 GUI 的程序上时，我无法让它工作。所以我有两个 JTextField，这是用户输入超时和超时的地方。还有另一个 JTextField，total1，它是 setEditable(false)，它将显示总小时数。

```
total1.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent e) {
            String timeIn = tIn1.getText();
            String timeInArr[] = strtimein.split(":");
            double dblTimeInHr = Double.parseDouble(timeInArr[0]);
            double dblTimeInMin = Double.parseDouble(timeInArr[1]);
            double dblTotalTimeIn = dblTimeInHr + (dblTimeInMin/60);

            String timeOut = tOut1.getText();
            String timeOutArr[] = strtimeout.split(":");
            double dblTimeOutHr = Double.parseDouble(timeOutArr[0]);
            double dblTimeOutMin = Double.parseDouble(timeOutArr[1]);
            double dblTotalTimeOut = dblTimeOutHr + (dblTimeOutMin/60);

            totalHours = totalHours + (dblTotalTimeOut - dblTotalTimeIn);

            tal1.setText(totalHours);
     }
}); 
```

我得到的错误是“找不到符号”，它指向：

```
String timeInArr[] = strTimein.split(":"); 
```

和

```
String timeOutArr[] = strTimeOut.split(":"); 
```

我知道我的代码有问题，但我无法弄清楚。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:26:05.567

你还没有在你的代码中声明这两个字符串..创建这两个`strTimeOut`，`strTimeIn`
看起来你实际上想要使用`timeIn`和`timeOut`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T15:25:13.500

`strtimein`没有在任何地方声明，您可能打算使用`timeIn`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T15:25:04.540

出色地....

```
String timeIn = tIn1.getText();
String timeInArr[] = strtimein.split(":"); 
```

我猜你想分割文本字段的内容`tIn1`，所以你不应该使用`strtimein`but `timeIn`。`strtimein`没有在任何地方声明，这就是您的错误消息所说的。

```
String timeInArr[] = timeIn.split(":"); 
```

`timeOut`/`strTimeOut`下面也一样

# android - 编辑器中带有 ADT 21.1 错误布局预览的 Eclipse

> ID：14960997
> 
> 赞同：3
> 
> 时间：2013-02-19T15:21:38.283
> 
> 标签：android, eclipse, layout, editor, adt

所以我最近`ADT 21.1`通过`Android SDK Manager`from更新到`eclipse`，然后我继续更新了 eclipse。

一切正常，我的项目按预期加载。到目前为止一切都很好，但后来我进入我的项目布局进行了一些调整，并意识到有些布局在编辑器中显示错误。

准确地说，我有一个布局，其元素与父底部对齐并且也有底部边距，这在我的任何手机上都可以正常工作，但是编辑器只是忽略了底部边距并将元素放在底部.

这是我正在谈论的布局

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/background" >
    <!-- titlebar -->
    <TextView
        android:id="@+id/m_oTitlebar"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:background="@drawable/gradient_title"
        android:gravity="center_horizontal|center_vertical"
        android:paddingBottom="@dimen/contact_button_padding_vertical"
        android:paddingTop="@dimen/contact_button_padding_vertical"
        android:text="@string/contact"
        android:textColor="@color/white"
        android:textSize="@dimen/font_size_24"
        android:textStyle="bold" />
    <!-- logo and title -->
    <ImageView
        android:id="@+id/m_oLogo"
        android:layout_width="@dimen/contact_logo_dimension"
        android:layout_height="@dimen/contact_logo_dimension"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/m_oTitlebar"
        android:layout_marginTop="@dimen/contact_logo_margin_top"
        android:layout_marginLeft="@dimen/contact_logo_margin_left"
        android:contentDescription="@string/image_description"
        android:src="@drawable/logo" />
    <TextView
        android:id="@+id/m_oTitle_0"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/m_oLogo"
        android:layout_alignParentRight="true"
        android:layout_alignTop="@+id/m_oLogo"
        android:layout_toRightOf="@+id/m_oLogo"
        android:layout_marginRight="@dimen/contact_logo_margin_left"
        android:gravity="bottom|right"
        android:text="@string/contact_title"
        android:textColor="@color/black"
        android:textSize="@dimen/font_size_18" />
    <!-- separator -->
    <LinearLayout
        android:id="@+id/m_oContact_Reference_Layout"
        android:layout_width="wrap_content"
        android:layout_height="@dimen/contact_reference_layout_height"
        android:layout_alignLeft="@+id/m_oLogo"
        android:layout_alignRight="@+id/m_oTitle_0"
        android:layout_below="@+id/m_oLogo"
        android:layout_marginTop="@dimen/contact_reference_layout_margin_top"
        android:orientation="vertical" 
        android:background="@drawable/gradient_contact"/>
    <!-- content -->
    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_below="@+id/m_oContact_Reference_Layout"
        android:layout_above="@+id/m_oContact_Image_Send"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="20dp"
        android:layout_marginBottom="20dp"
        android:orientation="vertical"
        android:weightSum="4">
        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:layout_weight="1">
                <TextView
                android:id="@+id/m_oContact_Name"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:gravity="center"
                android:text="@string/contact_name"
                android:textColor="@color/black"
                android:textSize="@dimen/font_size_20" />
             <TextView
                android:id="@+id/m_oContact_Sub"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:gravity="center"
                android:text="@string/contact_sub"
                android:textColor="@color/black"
                android:textSize="@dimen/font_size_12"/>
        </LinearLayout>
         <TextView
            android:id="@+id/m_oContact_Location"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:text="@string/contact_location"
            android:textColor="@color/black"
            android:textSize="@dimen/font_size_14"
            android:layout_weight="1"/>
         <TextView
            android:id="@+id/m_oContact_Phone"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:text="@string/contact_phone"
            android:textColor="@color/black"
            android:textSize="@dimen/font_size_18"
            android:layout_weight="1"/>
         <TextView
            android:id="@+id/m_oContact_INet"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:text="@string/contact_homepage"
            android:textColor="@color/black"
            android:textSize="@dimen/font_size_18"
            android:layout_weight="1"/>
    </LinearLayout>
     <!-- send button and image overlay --> 
     <Button
        android:id="@+id/m_oContact_Button_Send"
        style="@style/ButtonMain"
        android:layout_width="@dimen/main_button_width"
        android:layout_height="@dimen/main_button_height"
        android:layout_centerHorizontal="true"
        android:layout_alignParentBottom="true"
        android:layout_marginBottom="20dp"
        android:paddingBottom="@dimen/button_padding_vertical"
        android:paddingLeft="@dimen/button_padding_horizontal"
        android:paddingRight="@dimen/button_padding_horizontal"
        android:paddingTop="@dimen/button_padding_vertical"
        android:text="@string/empty"
        android:onClick="OnClick"/>
     <ImageView
         android:id="@+id/m_oContact_Image_Send"
         android:layout_width="@dimen/main_button_height"
         android:layout_height="@dimen/main_button_height"
         android:layout_alignTop="@+id/m_oContact_Button_Send"
         android:padding="@dimen/contact_image_padding"
         android:layout_centerHorizontal="true" 
         android:contentDescription="@string/image_description"
         android:src="@drawable/send"/>
</RelativeLayout> 
```

我还发现我的另一个布局似乎有同样的问题

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/background" >
    <!-- logo and title -->
    <ImageView
        android:id="@+id/m_oMain_Logo"
        android:layout_width="@dimen/main_logo_dimension"
        android:layout_height="@dimen/main_logo_dimension"
        android:layout_alignParentTop="true"
        android:layout_alignParentLeft="true"
        android:layout_marginLeft="@dimen/main_logo_margin_left"
        android:layout_marginTop="@dimen/main_logo_margin_top"
        android:contentDescription="@string/image_description"
        android:src="@drawable/logo" />
    <TextView
         android:id="@+id/m_oMain_Title"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_alignBottom="@+id/m_oMain_Logo"
         android:layout_alignParentRight="true"
         android:layout_marginRight="@dimen/main_logo_margin_left"
         android:layout_alignTop="@+id/m_oMain_Logo"
         android:layout_toRightOf="@+id/m_oMain_Logo"
         android:text="@string/main_title" 
         android:textColor="@color/zmvo_blue"
         android:textSize="@dimen/font_size_20"
         android:textStyle="bold" 
         android:gravity="bottom|right"/>
    <!-- buttons top left side -->
    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_below="@+id/m_oMain_Logo"
        android:layout_above="@+id/m_oMain_Button_Search"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="30dp"
        android:layout_marginBottom="20dp"
        android:layout_alignLeft="@+id/m_oMain_Logo"
        android:layout_alignRight="@+id/m_oMain_Title"
        android:orientation="vertical">
        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true"
            android:orientation="vertical">
            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:layout_marginBottom="20dp"
                android:weightSum="2">
                <Button
                    android:id="@+id/m_oMain_Button_GOZ"
                    style="@style/ButtonMain"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:onClick="OnClick"
                    android:paddingBottom="@dimen/button_padding_vertical"
                    android:paddingLeft="@dimen/button_padding_horizontal"
                    android:paddingRight="@dimen/button_padding_horizontal"
                    android:paddingTop="@dimen/button_padding_vertical"
                    android:layout_marginRight="10dp"
                    android:tag="@integer/main_tag_goz"
                    android:text="@string/goz"
                    android:textColor="@color/black"
                    android:textSize="@dimen/font_size_20"
                    android:layout_gravity="center"
                    android:layout_weight="1" />
                <Button
                    android:id="@+id/m_oMain_Button_GOAE"
                    style="@style/ButtonMain"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:onClick="OnClick"
                    android:paddingBottom="@dimen/button_padding_vertical"
                    android:paddingLeft="@dimen/button_padding_horizontal"
                    android:paddingRight="@dimen/button_padding_horizontal"
                    android:paddingTop="@dimen/button_padding_vertical"
                    android:layout_marginLeft="10dp"
                    android:tag="@integer/main_tag_goae"
                    android:text="@string/goae"
                    android:textColor="@color/black"
                    android:textSize="@dimen/font_size_20"
                    android:layout_gravity="center" 
                    android:layout_weight="1"/>
            </LinearLayout>
            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:layout_marginBottom="20dp"
                android:weightSum="2">
                <Button
                    android:id="@+id/m_oMain_Button_BEMA"
                    style="@style/ButtonMain"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:onClick="OnClick"
                    android:paddingBottom="@dimen/button_padding_vertical"
                    android:paddingLeft="@dimen/button_padding_horizontal"
                    android:paddingRight="@dimen/button_padding_horizontal"
                    android:paddingTop="@dimen/button_padding_vertical"
                    android:layout_marginRight="10dp"
                    android:tag="@integer/main_tag_bema"
                    android:text="@string/bema"
                    android:textColor="@color/black"
                    android:textSize="@dimen/font_size_20"
                    android:layout_gravity="center"
                    android:layout_weight="1" />
                <Button
                    android:id="@+id/m_oMain_Button_FZ"
                    style="@style/ButtonMain"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:onClick="OnClick"
                    android:paddingBottom="@dimen/button_padding_vertical"
                    android:paddingLeft="@dimen/button_padding_horizontal"
                    android:paddingRight="@dimen/button_padding_horizontal"
                    android:paddingTop="@dimen/button_padding_vertical"
                    android:layout_marginLeft="10dp"
                    android:tag="@integer/main_tag_fz"
                    android:text="@string/fz"
                    android:textColor="@color/black"
                    android:textSize="@dimen/font_size_20"
                    android:layout_gravity="center"
                    android:layout_weight="1" />
            </LinearLayout>
            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:weightSum="2">
                <Button
                    android:id="@+id/m_oMain_Button_BEB"
                    style="@style/ButtonMain"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:onClick="OnClick"
                    android:paddingBottom="@dimen/button_padding_vertical"
                    android:paddingLeft="@dimen/button_padding_horizontal"
                    android:paddingRight="@dimen/button_padding_horizontal"
                    android:paddingTop="@dimen/button_padding_vertical"
                    android:layout_marginRight="10dp"
                    android:tag="@integer/main_tag_beb"
                    android:text="@string/beb"
                    android:textColor="@color/black"
                    android:textSize="@dimen/font_size_20"
                    android:layout_gravity="center"
                    android:layout_weight="1"/>
                <Button
                     android:id="@+id/m_oMain_Button_BEL"
                     style="@style/ButtonMain"
                     android:layout_width="0dp"
                     android:layout_height="wrap_content"
                     android:onClick="OnClick"
                     android:paddingBottom="@dimen/button_padding_vertical"
                     android:paddingLeft="@dimen/button_padding_horizontal"
                     android:paddingRight="@dimen/button_padding_horizontal"
                     android:paddingTop="@dimen/button_padding_vertical"
                     android:layout_marginLeft="10dp"
                     android:tag="@integer/main_tag_fz"
                     android:text="@string/bel"
                     android:textColor="@color/black"
                     android:textSize="@dimen/font_size_20"
                     android:layout_gravity="center"
                     android:layout_weight="1"/>
            </LinearLayout>
        </LinearLayout>
    </RelativeLayout>
    <!-- buttons bottom middle -->
    <Button
        android:id="@+id/m_oMain_Button_Contact"
        android:tag="@integer/main_tag_contact"
        style="@style/ButtonMain"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/m_oMain_Logo"
        android:layout_alignRight="@+id/m_oMain_Title"
        android:layout_alignParentBottom="true"
        android:layout_marginBottom="20dp"
        android:paddingBottom="@dimen/button_padding_vertical"
        android:paddingLeft="@dimen/button_padding_horizontal"
        android:paddingRight="@dimen/button_padding_horizontal"
        android:paddingTop="@dimen/button_padding_vertical"
        android:text="@string/contact"
        android:textColor="@color/black"
        android:textSize="@dimen/font_size_20"
        android:onClick="OnClick"/>
    <Button
        android:id="@+id/m_oMain_Button_Search"
        android:tag="@integer/main_tag_search"
        style="@style/ButtonMain"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/m_oMain_Button_Contact"
        android:layout_alignRight="@+id/m_oMain_Button_Contact"
        android:layout_above="@+id/m_oMain_Button_Contact"
        android:layout_marginBottom="20dp"
        android:paddingBottom="@dimen/button_padding_vertical"
        android:paddingLeft="@dimen/button_padding_horizontal"
        android:paddingRight="@dimen/button_padding_horizontal"
        android:paddingTop="@dimen/button_padding_vertical"
        android:text="@string/search"
        android:textColor="@color/black"
        android:textSize="@dimen/font_size_20"
        android:onClick="OnClick"/>
    <RelativeLayout
        android:id="@+id/m_oMain_Wait_Layout"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@color/black_50"
        android:onClick="OnClick">
    </RelativeLayout>
    <RelativeLayout
        android:id="@+id/m_oMain_ProgressBar_Layout"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@color/black_50"
        android:onClick="OnClick"
        android:visibility="invisible">     
        <ProgressBar
            android:id="@+id/m_oMain_ProgressBar"
            style="?android:attr/progressBarStyleLarge"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            android:layout_centerVertical="true" />
        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_above="@+id/m_oMain_ProgressBar"
            android:layout_marginBottom="20dp"
            android:layout_marginLeft="20dp"
            android:layout_marginRight="20dp"
            android:gravity="center"
            android:text="@string/main_db_init"
            android:textColor="@color/white"
            android:textSize="@dimen/font_size_20"
            android:textStyle="bold" />
    </RelativeLayout>
</RelativeLayout> 
```

所以我的问题是，这是编辑器的错误（因为在以前的版本中它工作得很好，手机也显示正确的布局）还是我的某种布局问题。