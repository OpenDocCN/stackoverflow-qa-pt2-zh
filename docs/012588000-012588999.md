# StackOverflow 问答 12588000-12588999

# c# - 如何获取嵌入网页的 WPF 屏幕截图

> ID：12588000
> 
> 赞同：0
> 
> 时间：2012-09-25T17:22:15.483
> 
> 标签：c#, wpf, wpf-controls, webpage-screenshot

我有一个 WPF 应用程序。该应用程序中嵌入了 2 个网页。当我截取屏幕截图时，我得到了除嵌入式网页之外的整个应用程序。

我需要截图，包括网页。有人可以指导我吗..

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T18:03:05.693

您可以尝试使用此代码

```
/// Gets a JPG "screenshot" of the current UIElement
    ///
    /// UIElement to screenshot
    /// Scale to render the screenshot
    /// JPG Quality
    /// Byte array of JPG data
    public static byte[] GetJpgImage(this UIElement source, double scale, int quality)
    {
        double actualHeight = source.RenderSize.Height;
        double actualWidth = source.RenderSize.Width;

        double renderHeight = actualHeight * scale;
        double renderWidth = actualWidth * scale;

        RenderTargetBitmap renderTarget = new RenderTargetBitmap((int) renderWidth, (int) renderHeight, 96, 96, PixelFormats.Pbgra32);
        VisualBrush sourceBrush = new VisualBrush(source);

        DrawingVisual drawingVisual = new DrawingVisual();
        DrawingContext drawingContext = drawingVisual.RenderOpen();

        using (drawingContext)
        {
            drawingContext.PushTransform(new ScaleTransform(scale, scale));
            drawingContext.DrawRectangle(sourceBrush, null, new Rect(new Point(0, 0), new Point(actualWidth, actualHeight)));
        }
        renderTarget.Render(drawingVisual);

        JpegBitmapEncoder jpgEncoder = new JpegBitmapEncoder();
        jpgEncoder.QualityLevel = quality;
        jpgEncoder.Frames.Add(BitmapFrame.Create(renderTarget));

        Byte[] _imageArray;

        using (MemoryStream outputStream = new MemoryStream())
        {
            jpgEncoder.Save(outputStream);
            _imageArray = outputStream.ToArray();
        }

        return _imageArray;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T17:36:29.260

```
try
    {
      // System.Drawing.Point p=new System.Drawing.Point(100,500);
        Bitmap b = new Bitmap(System.Windows.Forms.Screen.PrimaryScreen.Bounds.Width, System.Windows.Forms.Screen.PrimaryScreen.Bounds.Height);
        Graphics graphics=Graphics.FromImage(b as Image);
        graphics.CopyFromScreen(0,0,0,0,b.Size);

       string stringsFile=@"C:\Image1";

        b.Save(stringsFile,ImageFormat.Png);
     }
  catch (Exception exp)
      {
      Microsoft.Windows.Controls.MessageBox.Show("Opps !!! " + exp.Message);
      } 
```

# ruby-on-rails - RoR 返回 406 Not Acceptable，请求 HTML

> ID：12588003
> 
> 赞同：0
> 
> 时间：2012-09-25T17:22:23.790
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

我的问题是，在尝试处理名为“clients”的控制器中的更新操作时，我得到了一个不可接受的 406（我正在请​​求 HTML 而不是在处理 JSON）我的直觉是我的嵌套结构中缺少一些东西if 语句，因为这只发生在下面列出的嵌套进程之一的验证失败时。我已经浏览了我的代码并尝试了几种重构方法，但似乎无法绕过这个方法。希望一双新的眼睛能看到我看不到的东西。

```
def update
@client = Client.find(params[:id])

respond_to do |format|
if params[:save_contact]
    format.html { redirect_to "/clients/#{@client.id}/edit#tabs-3", :notice => 'Contact Saved!' }
    format.mobile { render :action => "edit", :notice => 'Contact Saved' }
    format.json { head :ok }
else
end
if params[:save_job]
    format.html { redirect_to "/clients/#{@client.id}/edit#tabs-6", :notice => 'Job Saved!' }
    format.mobile { render :action => "edit", :notice => 'Job Saved' }
    format.json { head :ok }

else
end

if @client.update_attributes(params[:client])
 @client.update_attribute(:branch_number, @client.branch.number)         

    if @client.wcrequested? && !@client.wcrequest_sent?
          @client.update_attribute(:wcstatus, "Pending")
          @client.update_attribute(:wcrequest_sent, "TRUE")
          @client.update_attribute(:wcresponse_sent, "FALSE")
          @client.update_attribute(:wcresponded, "FALSE")
          ClientsMailer.wcreq_recieved_corp(@client, current_user).deliver
          ClientsMailer.wcreq_recieved_branch(@client, current_user).deliver
    else
      format.html { render :action => "edit" }
      format.mobile { render :action => "edit" }
      format.json { render :json => @client.errors, :status => :unprocessable_entity }

    end

    if @client.wcstatus == "Denied"
           @client.update_attribute(:wcrequest_sent, "FALSE")
           @client.update_attribute(:wcrequested, "FALSE")
           ClientsMailer.wcreq_completed_corp(@client, current_user).deliver
           ClientsMailer.wcreq_completed_branch(@client, current_user).deliver
    else
    end

    if @client.wcresponded? && !@client.wcresponse_sent?
          @client.update_attribute(:wcresponse_sent, "TRUE")
          ClientsMailer.wcreq_completed_corp(@client, current_user).deliver
          ClientsMailer.wcreq_completed_branch(@client, current_user).deliver
    else
    end

    if params[:gpreq]
          @client.update_attribute(:gpstatus, "Pending GP Approval")
          ClientsMailer.gpreq_recieved_corp(@client, current_user).deliver
          ClientsMailer.gpreq_recieved_branch(@client, current_user).deliver
    else
    end
    if params[:gpreply]
          @client.update_attribute(:gpstatus, "GP Approval Completed")
          ClientsMailer.gpreq_completed_corp(@client, current_user).deliver
          ClientsMailer.gpreq_completed_branch(@client, current_user).deliver
   else
   end

    if @client.cred_requested? && !@client.cred_req_sent?
          @client.update_attribute(:cred_req_sent, "TRUE")
          ClientsMailer.credreq_recieved_corp(@client, current_user).deliver
          ClientsMailer.credreq_recieved_branch(@client, current_user).deliver
   else
   end
    if @client.cred_status == "Completed" && !@client.cred_rep_sent?
          @client.update_attribute(:cred_rep_sent, "TRUE")
          ClientsMailer.credreq_completed_corp(@client, current_user).deliver
          ClientsMailer.credreq_completed_branch(@client, current_user).deliver
  else
  end

      format.html { redirect_to edit_client_path(@client), :notice => 'Client was successfully updated!' }
      format.mobile { render :action => "edit", :notice => 'Client was successfully updated!' }
      format.json { head :ok }
      format.xml { render :action => "edit"}

else

      format.html { render :action => "edit" }
      format.mobile { render :action => "edit" }
      format.json { render :json => @client.errors, :status => :unprocessable_entity }
      format.xml { render :action => "edit"}

end
end
   end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:16:15.370

406 错误是由相关格式不可用或不适用引起的。

我建议您首先将操作减少到一个 respond_to 块并将您的业务逻辑移动到您的模型中。诸如此类的东西`@client.update_attribute(:wcstatus, "Pending")`不应该在控制器中，而是在验证下的模型中，然后调用 save 方法。

我怀疑您的 if else end 语句没有满足您的条件。BTW else 紧跟 end 是完全错误的。

不管怎样，把它剪下来，然后看看剩下的 yiu，然后一个一个地添加 onditions，直到你遇到问题，注意使用条件来设置局部变量并只保留一个使用局部变量进行重定向的 response_to 块ETC...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T17:30:03.800

我想我明白了。`format`参数与其他参数不同：rails 使用 Accept Headers 和参数`:format`来确定是否使用 html、xml、json 或其他内容进行响应。所以我会说您不支持您尝试使用的所有格式，可能`mobile`是原因之一。

# eclipse - 如何在 Eclipse 中转到“下一个事件”

> ID：12588010
> 
> 赞同：27
> 
> 时间：2012-09-25T17:22:58.547
> 
> 标签：eclipse

在 Eclipse 中，您可以打开“Mark Occurrences”，然后它将突出显示当前范围内给定变量的每次出现。这很好，但我真的很想从一个这样的事件转移到下一个。

到目前为止，我已经找到了两个关于如何做到这一点的建议，但都没有奏效。首先有这个 SO 帖子：[Eclipse 导航到下一个/上一个标记的发生](https://stackoverflow.com/questions/4019818/eclipse-navigate-to-next-previous-marked-occurrence)，它建议`ctrl+k`。但是，这对我不起作用：在我的 Eclipse 中，键映射绑定到“查找下一个”，而不是“下一次出现”（在 Eclipse 键绑定中甚至似乎没有“下一次出现”，但是也许我没有用正确的名字来称呼它）。

然后我找到了一个论坛帖子，建议点击工具栏中的黄色向上箭头并检查出现情况，然后使用`ctrl+,`. 如果它有效，这将是次优的，因为我已经`ctrl+,`习惯在错误/警告之间移动，但至少它会是一些东西......但它根本不起作用（`ctrl+,`只是让我进入下一个警告）。

所以，我的问题是：如何在 Eclipse 中从一个事件移动（最好通过键盘快捷键）到下一个事件？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-25T17:41:12.090

你没有提到究竟是如何`ctrl+k`不适合你，但这是我在类似情况下使用的。我将光标放入或选择编辑器中要查找的单词，然后按`ctrl+k`将我移至下一个匹配项。由于选择了下一个匹配项，我可以使用相同的组合向前移动或按`ctrl+shift+k`（查找上一个）向后移动。（对不起，如果这听起来很傲慢，但`ctrl+k`听起来完全像你正在寻找的东西，我不知道你遇到困难的细节。）

我同意其他组合。如果我必须把手从键盘上移开，我不妨使用滚动条。

祝你好运。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-04-07T22:23:36.927

有很多关于这个的帖子。似乎有最佳答案的一个是：[https ://stackoverflow.com/a/12767327/2836515](https://stackoverflow.com/a/12767327/2836515)

摘要：更改“下一个/上一个注释”选项（工具栏中的向上/向下箭头）以包含出现，然后使用`CTRL`+`,`或`CTRL`+`.`查找下一个出现。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-03-12T19:30:29.373

您可以这样做以减少在选择初始单词时的一些击键/鼠标点击：

1.  将光标放在您要查找的单词上
2.  点击`alt`+ `shift`+`up`
3.  点击`ctrl`+`k`

这会突出显示当前单词，然后进行查找。不过，它似乎不区分大小写，但这是一个很小的代价。

但是，肯定有一些地方它不起作用。如下所示（它突出显示`class`了`implements`整个班级）：

```
public class MyClass implements MyInterface {} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-06-25T02:04:04.283

有一个命令“文件中的出现”默认情况下不绑定到任何键。您可以通过按`Ctrl+3`然后键入来运行它`occurr`。它将所有当前变量放在搜索结果中的当前文件中。现在`Ctrl+.`，`Ctrl+,`将浏览这些事件，而不是通过警告/错误列表。

为了返回，您需要清理搜索结果。看来这个命令也没有键绑定。它甚至没有在`Ctrl+3`列表中显示为命令。但您也可以只进行另一次搜索，它会覆盖之前的搜索结果。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-12T13:29:45.743

用于`CTRL+K`转到下一个事件和`CTRL+SHIFT+K`转到上一个事件。

# html - 垂直对齐在列表中不起作用

> ID：12588014
> 
> 赞同：1
> 
> 时间：2012-09-25T17:23:11.827
> 
> 标签：html, css, html-lists

我想将列表中的文本按底线对齐。我使用垂直对齐 css 选项，但它不起作用。您可以在这里找到代码：http: [//jsfiddle.net/kL4AX/2/](http://jsfiddle.net/kL4AX/2/) 在此先感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T17:26:25.737

您可以使用定位将`<h1>`元素移动到列表项的底部，就像在这个**[jsFiddle 示例中一样](http://jsfiddle.net/j08691/kL4AX/3/)**

```
.navigator ul li {
    display: inline-block;
    width: 100px;
    height: 400px;
    vertical-align: bottom;
    border-style:solid;
    border-width:1px;
    position:relative;
}

.navigator ul li h1 {
    margin:0;
    padding:0;
    position:absolute;
    bottom:0;
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T17:47:40.217

是的，您可以尝试将 H1 定位为绝对底部，或者如果您有固定的高度，您`<li>`可以使用 padding-top 值来确保 H1 放置在底部。

Vertical-align 不会相对于其父元素居中或定位元素。

# javascript - 为什么“a();function a(){}”在 javascript 中工作？但大多数其他动态语言没有

> ID：12588017
> 
> 赞同：0
> 
> 时间：2012-09-25T17:23:26.877
> 
> 标签：javascript, node.js

> **可能重复：**
> [Javascript 中的模棱两可的函数声明](https://stackoverflow.com/questions/2072685/ambiguous-function-declaration-in-javascript)

以上在nodejs中确实有效。我想知道处理这种情况的 javascript 和 python/ruby 的根本区别。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T17:25:55.710

因为在 JavaScript 中，*[[FunctionDeclaration]]*被提升（包括初始化）到当前词法范围的顶部。所以你可以在词法范围内的任何地方调用它们（甚至“在”它们被“定义”之前）。

如果您对确切的过程感兴趣，请随时查看规范：http: [//es5.github.com/#x13](http://es5.github.com/#x13)

# perl - Perl：格式化输出到电子邮件正文

> ID：12588021
> 
> 赞同：0
> 
> 时间：2012-09-25T17:23:51.997
> 
> 标签：perl

我正在使用 perl 的格式语法生成格式化的文本输出，然后我将整个输出转换为一个标量变量，当我将其作为电子邮件正文发送时，整个文本都会失去其格式，有趣的是当我将收到的电子邮件正文复制并粘贴到一个文本编辑器（记事本），它作为原始格式化文本粘贴。我尝试了不同的编码，但没有任何帮助，因为 html 更糟糕。任何可以解决此问题的指针将不胜感激。对于电子邮件，我使用 MIME::Lite 和 Net::SMTP。谢谢/G

编辑：这是我用来发送电子邮件的代码：

```
$msg = MIME::Lite->new(
    From    => 'username@domain.com',
    To      => 'username2@domain.com',
    Cc      => '',
    Subject => 'Helloooooo,!',
    Type    => 'multipart/related',
);

$msg->attach(
    Type => 'text/plain charset=ANSI',
    Data => encode("Windows-1250", $data)
);

$msg->send('smtp', 'smtp.domain', Debug=>0); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T08:52:27.910

我成功地使用了这个构造：

```
# Convert the data to HTML.
my $html = $data;
$html =~ s/&/&amp;/g;
$html =~ s/</&lt;/g;
$html =~ s/>/&gt;/g;

# Add header and formatting.
$html = <<"__EOI__";
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>Helloooooo,!</title>
</head>
<body>
<pre>$html</pre>
</body>
</html>
__EOI__

# Convert to bytes.
$html = encode("UTF-8", $html);

# Send it.
my $msg = MIME::Lite->new(
        From    => 'username@domain.com',
        To      => 'username2@domain.com',
        Subject => 'Helloooooo,!',
        Type    => 'text/html',
        Data    => $html,
);
$msg->send(); 
```

我不像你那样使用 $msg->attach() ，因为在这种情况下不需要它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T18:59:48.720

```
text/plain charset=ANSI 
```

应该

```
text/plain; charset=Windows-1250 
```

或者

```
text/plain; charset=cp1250 
```

（不确定邮件程序能识别什么，但 ANSI 不是编码。）

但真正的问题（基于您最新评论中提供的信息）与邮件标题无关。这只是一个字体选择问题。在记事本中，您使用非比例字体（例如 Courier New）。这意味着字体中的每个字符都在屏幕上占据相同的空间。

10“l”和10“m”：`llllllllllmmmmmmmmmm`
10“m”和10“l”：`mmmmmmmmmmllllllllll`

另一方面，您的电子邮件阅读器使用比例字体（例如 Ariel、Times New Roman）。在这样的字体中，较窄的字符（例如“l”）比较宽的字符（例如“m”）使用更少的水平像素。

10“l”和10“m”：llllllllllmmmmmmmmmm
10“m”和10“l”：mmmmmmmmmmllllllllll

解决方案：更改您的电子邮件阅读器的字体，或将您的有效负载更改为您可以指定字体的格式 (HTML)。

# android - 在 xml 中隐藏标题或通过 java 代码隐藏标题有什么区别？

> ID：12588024
> 
> 赞同：0
> 
> 时间：2012-09-25T17:24:13.573
> 
> 标签：android, xml, themes, hide, title

（我不知道它是否相关，但我想在我的应用程序中使用自定义主题。）我应该使用哪个以及为什么（性能问题、简单性等）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T17:39:59.030

没有真正的区别。

您可以选择最适合您需求的。

如果您知道您希望将标题隐藏在应用程序的每个活动中，那么最好的解决方案是在`AndroidManifest.xml`文件中为整个应用程序设置主题

`<application android:theme="@android:style/Theme.Black.NoTitleBar">`

当然，您可以更改`@android:style/Theme.Black.NoTitleBar`为您的自定义样式。

# excel - VbTab 对齐问题

> ID：12588025
> 
> 赞同：1
> 
> 时间：2012-09-25T17:24:16.757
> 
> 标签：excel, vba

我在 VBA Excel 应用程序中有一个列表框，它读取三个不同的列并在一行中列出它们的内容。但是列中每个项目的宽度各不相同。因此，当我使用“vbtab”在列表框中显示它时，它没有正确对齐下一个项目。例如，当第一项有 4 个字符时，它将第二项拉得更近，而如果第一项有 8 个字符，则将第二项推得太远。知道如何解决这个问题吗？

下面是我正在使用的代码。

```
Private Sub UserForm_Activate()
With ThisWorkbook.Sheets("Sheet1").Range("a1:a50")
MySearch = Array("Tba")
For i = LBound(MySearch) To UBound(MySearch)
Set rng = .Find(what:=MySearch(i), _
After:=.Cells(.Cells.Count), _
LookIn:=xlFormulas, _
LookAt:=xlPart, _
SearchOrder:=xlByRows, _
SearchDirection:=xlNext, _
MatchCase:=False)

firstaddress = rng.Address

Do
j = 1
drovedate = rng.Offset(0, j)
j= j + 1
drivenby = rng.Offset(0, j)
j = j + 6
reason = rng.Offset(0, j)
x = x + 1
Dim LineOfText As String

CPHlsttheeba.AddItem (x & "   " & drovedate & vbTab() & vbTab & drivenby & vbTab & vbTab & reason)

Set rng = .FindNext(rng)
Loop While Not rng Is Nothing And rng.Address <> firstaddress
Next i
End With
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T17:49:15.680

如果您的文本宽度已知，那么您可以使用 的`.ColumnWidths`来`ListBox1`预定义列宽。这将确保数据正确对齐。如果文本宽度未知，那么您可以将 设置为`.ColumnWidths`您认为可以容纳所有单词的内容。在下面的示例中，我将其设置为`50`

另一个技巧不是将循环中的数据添加到 中，`ListBox1`而是将其存储在数组中，然后将 的`.List`属性设置`ListBox1`为该数组。这将确保代码的执行速度更快。

这是一个例子。我在这里手动填充数组。你可以在你的数组中填充`Do While Loop`

**代码**：

```
Private Sub UserForm_Activate()
    Dim Myarray(1 To 2, 1 To 4) As String

    Myarray(1, 1) = "Sid"
    Myarray(1, 2) = "Apple"
    Myarray(1, 3) = "Banana"
    Myarray(1, 4) = "Mumbai"
    Myarray(2, 1) = "New Delhi"
    Myarray(2, 2) = "New York"
    Myarray(2, 3) = "Japan"
    Myarray(2, 4) = "asdfghjkl"

    With Me.ListBox1
        .Clear
        .ColumnHeads = False
        .ColumnCount = 4

        .List = Myarray

        '~~> Change 50 to 8 in your application
        .ColumnWidths = "50;50;50;50"
        .TopIndex = 0
    End With
End Sub 
```

**屏幕截图**：

![在此处输入图像描述](../Images/153030c58740c5e0c0afe9482ff09093.png)

**跟进**

> 抱歉，我不确定如何使我的编码与数组一起使用并列出它们.. 你能帮我一下吗.. – user1697952 1 小时前

试试这个（*未经测试*）

```
Private Sub UserForm_Activate()
    Dim n As Long

    With CPHlsttheeba
        .ColumnHeads = False
        .ColumnCount = 4
        .ColumnWidths = "8;8;8;8"
    End With

    With ThisWorkbook.Sheets("Sheet1").Range("a1:a50")
        MySearch = Array("Tba")
        For i = LBound(MySearch) To UBound(MySearch)
            Set rng = .Find(what:=MySearch(i), _
            After:=.Cells(.Cells.Count), _
            LookIn:=xlFormulas, _
            LookAt:=xlPart, _
            SearchOrder:=xlByRows, _
            SearchDirection:=xlNext, _
            MatchCase:=False)

            firstaddress = rng.Address

            Do
                j = 1
                drovedate = rng.Offset(0, j)
                j = j + 1
                drivenby = rng.Offset(0, j)
                j = j + 6
                reason = rng.Offset(0, j)
                x = x + 1
                Dim LineOfText As String

                CPHlsttheeba.AddItem "Test" & n, n
                CPHlsttheeba .List(n, 0) = drovedate
                CPHlsttheeba .List(n, 1) = drivenby
                CPHlsttheeba .List(n, 2) = reason

                n = n + 1

                Set rng = .FindNext(rng)
            Loop While Not rng Is Nothing And _
            rng.Address <> firstaddress
        Next i
    End With
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T00:30:19.830

我认为悉达多的方法更好，但既然你问了......

而不是这个：

```
CPHlsttheeba.AddItem  x & "   " & drovedate & vbTab() & vbTab & _
                      drivenby & vbTab & vbTab & reason 
```

你可以这样做：

```
CPHlsttheeba.AddItem RPad(x & "   " & drovedate, 20) & _
                     RPad(drivenby, 20) & reason

'pad a string "s" on the right with spaces to total length "num"
Function RPad(s, num)
    RPad = Left(s & String(num," "), num)
End Function 
```

您可能需要根据字符串的长度调整填充量。如果您使用固定字体格式化列表框，那么您的“列”应该对齐。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-01T02:28:49.090

我有类似的情况在 MsgBox 中创建一个表。我开始：

项目 1，选项卡，项目 2，选项卡，项目 3。

但有时第 1 项或第 2 项太长，需要 2 个标签才能将内容排好。立即窗口中的一些简单测试显示默认 vbTab 为 8 个字符宽。所以这是我在循环中所做的，然后 MsgBox 在循环后显示：

```
strMsg = strMsg & ary(1, m) & vbTab & IIf(Len(ary(1, m)) < 8, vbTab, "") & IIf(Len(ary(1, m)) < 16, vbTab, "") & ary(2, m) & vbTab & IIf(Len(ary(2, m)) < 8, vbTab, "") & ary(3, m) & vbCr 
```

如果前一个结果的长度很小，这实际上会在结果之间放置 2 或 3 个制表符。

# python - Python Pandas：将几个布尔列转换为由布尔列名组成的（可能重复的）列

> ID：12588031
> 
> 赞同：1
> 
> 时间：2012-09-25T17:24:35.253
> 
> 标签：python, boolean, dataframe, pandas, multiple-columns

假设我有下面的 DataFrame：

```
>>> dfrm = pandas.DataFrame({
                             "A":[1,2,3], 
                             "id1":[True, True, False], 
                             "id2":[False, True, False]
                            })

>>> dfrm
   A    id1    id2
0  1   True  False
1  2   True   True
2  3  False  False 
```

如何将两个布尔列展平为一个新列（这可能会导致 DataFrame 的行需要重复），以便在新列中出现所有 True 出现的条目。

具体来说，在上面的示例中，我希望输出如下所示：

```
index A   id1    id2   all_ids
    0 1  True  False       id1
    1 2  True   True       id1
    1 2  True   True       id2
    2 3 False  False       NaN 
```

（最好不要多索引，`all_ids`但如果这是唯一的方法，我会接受）。

我通常将其视为“从宽到长”，反之（从一列到一堆布尔值）为“从长到宽”。

Pandas 中是否有对此的内置支持？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T02:48:52.643

副手我不记得在熊猫中作为单线执行此操作的函数，但您可以执行以下操作：

```
In [35]: st = dfrm.ix[:, ['id1', 'id2']].stack()

In [36]: all_ids = Series(st.index.get_level_values(1), 
                          st.index.get_level_values(0),
                          name='all_ids')[st.values]

In [37]: dfrm.join(all_ids, how='left')
Out[37]: 
   A    id1    id2 all_ids
0  1   True  False     id1
1  2   True   True     id1
1  2   True   True     id2
2  3  False  False     NaN 
```

# jquery - 浏览器构建错误的查询字符串

> ID：12588032
> 
> 赞同：0
> 
> 时间：2012-09-25T17:24:35.650
> 
> 标签：jquery, asp.net-mvc-3, webforms, model-binding, cultureinfo

这有点奇怪……

在我的表单上，我有两个按钮（都是`<input type="button" />`）。按钮 1 (B1) 有一个`onclick="update()"`where 调用 Ajax 并填充了 Data 参数。第二个按钮 (B2) 使用老式提交。顺便说一句，两个按钮调用相同的控制器/动作。`@Html.EditorFor(x => x.StartDate)`按钮用于从字段（即 jquery datepicker）发回日期。

因此，为了说明，假设 StartDate = "30/09/2012" (dd/mm/yy)。

如果我单击 B1，则会调用 Ajax，并且所有数据都正确地通过 data 参数传递。此参数是来自 $("#form").serializeArray() 的 json。此调用跳过活页夹并直接调用指定的控制器/动作就像一个魅力。我的 StartDate 属性带有正确的日期。

但是，如果我单击 B2，默认行为会构建一个查询字符串，我的应用程序会崩溃。我构建了一个自定义日期活页夹来拦截和检查正在发生的事情，我注意到日期字符串是“2012 年 9 月 30 日”，并试图转换为使用 dd/mm 的我的文化 (pt-BR)。

再进一步，我发现问题出在我的提交事件上，因为它正在构建一个奇怪的查询字符串：

```
//../Action?StartDate=09%2F30%2F2011%2000%3A00%3A00 
```

还有一件事：Datepicker、webconfig 和客户端浏览器都配置为相同的文化。

现在，我应该如何进行呢？我可以概括所有提交的日期将作为 mm/dd/yy 到达活页夹并强制我的自定义日期活页夹来管理它，还是我做错了什么而忘记配置某些东西？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T19:24:25.650

谷歌搜索后，我发现这篇精彩的文章解释了 Default Binder 的工作原理以及浏览器为什么将查询字符串创建为 dd/mm/yy。基本上，.NET 框架在查询字符串上使用 InvariantCulture。

[http://weblogs.asp.net/melvynharbour/archive/2008/11/21/mvc-modelbinder-and-localization.aspx](http://weblogs.asp.net/melvynharbour/archive/2008/11/21/mvc-modelbinder-and-localization.aspx)

如果您陷入文化问题，值得阅读这篇文章。

# android - 删除图像后如何以编程方式从厨房中删除缩略图？

> ID：12588034
> 
> 赞同：5
> 
> 时间：2012-09-25T17:24:36.257
> 
> 标签：android, gallery, thumbnails, android-sdcard, image-gallery

我正在开发一个隐藏图像的应用程序。我可以删除图像，但图库不会自行刷新并显示被我的应用程序隐藏的图像的缩略图。我在用

```
sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED,
        Uri.parse("file://"+ Environment.getExternalStorageDirectory()))); 
```

这段代码＆它在一定程度上起作用。但主要的是它首先卸载并重新安装 SDCard，这是时间 + 资源消耗。有没有其他方法可以在不重新安装 SD 卡的情况下立即刷新图库。我还尝试过此代码的另一件事。

```
MediaScannerConnection.scanFile(
        getBaseContext(),
        new String[]{ src.toString() },
        null,
        new MediaScannerConnection.OnScanCompletedListener() {
            public void onScanCompleted(String path, Uri uri) {
            }
        ); 
```

而且也不令人满意。

# javascript - jquery mobile switch 语句错误？

> ID：12588035
> 
> 赞同：1
> 
> 时间：2012-09-25T17:24:42.950
> 
> 标签：javascript, jquery-mobile, switch-statement

我正在制作一个 jQuery Mobile 网站，但遇到了一个奇怪的问题，即我试图在我的代码中用作演示的 JS switch 语句。

我有一个 index.html 页面，其中包含一个带有多个选项的列表视图，其中一个重定向到我正在处理的页面，比如 test.html。

在 test.html 中，我有这个 switch 语句：

```
<script>
    function myFunction()
    {
        var d=new Date().getDay();
        switch (d)
        {
        case 0:
            alert("Today it's Sunday");
            break;
        case 1:
            alert("Today it's Monday");
            break;
        case 2:
            alert("Today it's Tuesday");
            break;
        case 3:
            alert("Today it's Wednesday");
            break;
        case 4:
            alert("Today it's Thursday");
            break;
        case 5:
            alert("Today it's Friday");
            break;
        case 6:
            alert("Today it's Saturday");
            break;
        }
    }
</script> 
```

该函数由按钮调用。

这是问题所在，当我尝试从 index.html 访问此页面时，页面被卡住（它显示 JQM 旋转圆圈）。如果它从 switch 语句中删除案例，则页面加载正常。此外，我在其他页面上使用转到此页面进行滑动事件，当我尝试滑动到它时也会发生同样的事情，因此 index.html 很可能不是问题。

但是，如果我通过 URL 直接访问此页面，它可以正常工作，并且 switch 语句可以正常工作。

这是 index.html 中的代码行：

```
<li><a href="test.html"><img src="images/test.png" alt="Test"/><p>This is a test page.</p></a></li> 
```

# java - 多头列表你如 何检查它是否包含一个值？

> ID：12588039
> 
> 赞同：2
> 
> 时间：2012-09-25T17:25:03.323
> 
> 标签：java, linked-list, contains, long-integer

我正在尝试检查 long 列表是否不包含某个值。似乎这个条件永远不会满足，即使我知道某个链表中不存在一个值......

```
for(int i : organizationIDs){
    if(!ListOfOrgIds.contains(Long.valueOf(i))){
        addThese.add(new Long(i));
    }
} 
```

我本质上是在寻找 orgID 数组中不存在的值，如果它不存在，请将其添加到`addThese`链接列表中......我是否错过了我应该知道的 Long 的一些细微差别？

**在调试器中找到的 ListOfOrgIds**

```
14057
821
18021 
```

**在调试器中找到的组织 ID**

```
821
14057
18021 
```

让我这么说吧，我正看着调试器，它告诉我这 `ListOfOrgIds.contains(i)` 是错误的......这显然是不真实的......![在此处输入图像描述](../Images/cbc31229a45cd9259d9cd2bbfe9feaf9.png)

具体来说，看看 ListOfOrgs 的值...

![在此处输入图像描述](../Images/0b9970d6220bbb586c4c592c7700de74.png)

821确实在里面。为什么我在 contains 调用中得到错误消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T21:13:50.077

您遇到的问题是java不允许将原语加宽然后装箱，只能装箱然后加宽。这意味着 int 不能成为 Long，但 int 可以成为 Object（通过 Integer）。[这个问题](https://stackoverflow.com/questions/3720883/scjp-cant-widen-and-then-box-but-you-can-box-and-then-widen)的最佳答案很好地描述了它。在这种情况下，您不会得到任何编译反馈，因为 contains 方法不使用 list 的类型参数，它接受任何对象。这在过去也让我很多次。

下面是一个[SSCCE](http://sscce.org/)，显示了您获得的结果和一个工作示例。请注意，只需将 int 显式转换为 long。

```
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

public class BoxingTest {

    public static void main(String[] args) throws Exception {

        List<Integer> intList = Arrays.asList(new Integer[]{14, 24, 69});
        List<Long> sourceLongList = Arrays.asList(new Long[]{14L, 17L});

        List<Long> resultsList;
        /* Test as in question code */
        resultsList = new ArrayList<Long>();
        for(int i : intList){
            if(!sourceLongList.contains(i)){
                resultsList.add(new Long(i));
            }
        }
        printList(resultsList);

        /* Can't box then widen, so cast */
        resultsList = new ArrayList<Long>();
        for(int i : intList){
            if(!sourceLongList.contains((long)i)){
                resultsList.add(new Long(i));
            }
        }
        printList(resultsList);

    }

    private static <T> void printList(List<T> values){
        StringBuilder contents = new StringBuilder();
        for(T value : values){
            contents.append(value);
            contents.append(" ");
        }
        System.out.println("List contains: " + contents);
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T18:27:01.137

我想说的第一点是，您似乎最好使用`Set`它，因为它不允许重复元素。换句话说，做：

```
Set<Long> ids = new HashSet<Long>();
ids.add(Long.valueOf(1));
ids.add(Long.valueOf(1));
System.out.println(ids.size()); 
```

会打印`1`，不像`2`会打印`List`。

我不确定您要查找的确切操作，但您需要三种可能的操作：并集、交集和相对补集。有关它们的正式定义和维恩图，请参阅[Set 页面上的此 Wikipedia 部分](http://en.wikipedia.org/wiki/Set_%28mathematics%29#Basic_operations)。

**联盟**

结果：所有元素都在`A`并且`B`将在`C`.

要执行此操作：

```
Set<Long> a = ... ;
Set<Long> b = ... ;
Set<Long> c = new HashSet<Long>(a);
c.addAll(b); 
```

**路口**

结果：只有两者中的元素`A`和`B`将在`C`.

要执行此操作：

```
Set<Long> a = ... ;
Set<Long> b = ... ;
Set<Long> c = new HashSet<Long>(a);
c.retainAll(b); 
```

**相对补**

结果：`C`将包含除中的元素`A`之外的所有元素`B`

要执行此操作：

```
Set<Long> a = ... ;
Set<Long> b = ... ;
Set<Long> c = new HashSet<Long>(a);
c.removeAll(b); 
```

**此外，**要将 a 转换`List`为 a `Set`：

```
List<Long> idsAsList = ... ;
Set<Long> idsAsSet = new HashSet<Long>(idsAsList); 
```

要将数组转换为 a `Set`，您必须根据是否有 a`long[]`或 a来做不同的事情`Long[]`（注意大写）。对于`long[]`，您必须手动复制：

```
long[] idsAsArray = ... ;
Set<Long> idsAsSet = new HashSet<Long>();
for (long l : idsAsArray) {
    idsAsSet.add(Long.valueOf(l));
} 
```

如果是`Long[]`，您可以使用`Arrays.asList`：

```
Long[] idsAsArray = ... ;
Set<Long> ids = new HashSet<Long>(Arrays.asList(idsAsArray)); 
```

# php - SQlite 3 PDO 语句在 PHP 中失败

> ID：12588043
> 
> 赞同：2
> 
> 时间：2012-09-25T17:25:17.770
> 
> 标签：php, sql, sqlite, pdo, database-connection

为什么以下语句在 php 中失败（我已建立到名为 config.db 的 sqlite 数据库的 PDO 连接）。

```
$stmt = $this->db->prepare("INSERT INTO config (S_BASE_DIR) VALUES (':col0')");
$stmt->bindParam(':col0',$colValue);
$stmt->execute();
$stmt->close(); 
```

确切的错误是：

> 致命错误：未捕获的异常“PDOException”，带有消息“SQLSTATE [HY000]：一般错误：25 绑定或列索引超出范围”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T17:35:28.163

绑定到列时，不需要引用该列：

```
$stmt = $this->db->prepare( "INSERT INTO config (S_BASE_DIR) VALUES ( :col0 )" );
$stmt->bindParam(':col0', $colValue); 
```

加上引号，`:col0`它只是一个字符串，而不是绑定参数。

# iphone - 使用自动布局旋转

> ID：12588048
> 
> 赞同：8
> 
> 时间：2012-09-25T17:25:39.060
> 
> 标签：iphone, objective-c, xcode, ios6, autolayout

我是 Xcode 的初学者，我正在使用带有自动布局的 ios6。

我想从以下位置旋转我的 uiviewcontroller：

![在此处输入图像描述](../Images/acdc4b1abf5fa836fb4f7360ae68121e.png)

至：

![在此处输入图像描述](../Images/cd610fdb4d741f59f2de4e0ed42091aa.png)

我想防止我的底栏旋转。与 Apple 的相机应用程序旋转非常相似，但问题是一切都在旋转。

我试着放一些代码，比如

```
-(void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration{   
    // [Bar setTransform:CGAffineTransformMakeRotation(M_PI / -2.0)];
    // [Bar setTranslatesAutoresizingMaskIntoConstraints:YES];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T18:20:00.613

我不知道如何通过 IB 来实现它，但是您可以通过代码添加特定的约束来做到这一点：

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {
  if (UIInterfaceOrientationIsPortrait(toInterfaceOrientation)) {
    [self.view removeConstraints:landscapeConstraints];
  } else {
    [self.view addConstraints:landscapeConstraints];
  }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-18T21:24:15.390

首先，您确定您的视图实际上是在旋转吗？

如果是这样，您要做的是将绿色视图的底部固定到其超级视图的底部。您应该可以在 Interface Builder 中执行此操作。选择您的绿色视图，然后单击 Storyboard 文件底部的“约束”按钮（中间那个）： ![添加约束按钮](../Images/4cbc465a982a6336c31f7f3b9755bf49.png)

接下来，选择“Bottom Space to Superview”，如下图所示： ![将底部空间固定到超级视图](../Images/d2e413f0842d98b9bbf880e2cb1f18cf.png)

这将设置一个约束，说“始终将此视图的底部固定在其父视图的底部”。这样做应该会给你你正在寻找的结果。我在一个快速示例项目中进行了设置。下面分别是纵向和横向视图的样子：

![肖像](../Images/b4660112d0f5f45dba7400371ffedc53.png) ![景观](../Images/7bb03bd9462f1181cea8b06005ff2d14.png)

# jquery - jquery如何确定一个函数是否在页面加载中运行？

> ID：12588052
> 
> 赞同：0
> 
> 时间：2012-09-25T17:25:52.780
> 
> 标签：jquery, function

我有一个函数（有 200 多行代码）。它可以在页面加载或某些点击事件期间运行。现在如何确定一个函数是否在页面加载中运行？

这是一个简单的测试代码。也保存在[http://jsfiddle.net/EjcTk/](http://jsfiddle.net/EjcTk/)，谢谢。

```
<script>
jQuery(document).ready(function(){
    function ABC() {
        //many code here
        if(someelse===undefined){
                           //if by click, do some code.
                           //if by page loading, do not run these code.
            alert('ok');//check if it works.
        }
    }
    $(document).ready(function() {
        var someelse = 1;
                  ABC();                   
    });
    $('#click').click(function() {
        ABC();
    });
});
</script>
<div id="click">test</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:29:17.547

试试这个[http://jsfiddle.net/EjcTk/2/](http://jsfiddle.net/EjcTk/2/)

```
var someelse = 0;

$(document).ready(function() {
    someelse = 0;

    ABC();
});
$('#click').click(function() {
    someelse = 1;
    ABC();
});
function ABC() {
    if (someelse == 0) {
        alert('onload');
    } else alert('onclick');
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T17:30:53.137

试试这个：

```
 function ABC(status) {
    //many codes here
    if(status==='click'){
        //if by click, do some code.
        //if by page loading, do not run these code.
        alert('ok');//check if it works.
    }
}
$(document).ready(function() {
    ABC('default');                   
});
$('#click').click(function() {
    ABC('click');
}); 
```

​</p>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T17:32:06.030

`Pass boolean argument`在函数中知道它是在加载时调用还是从其他地方调用

```
jQuery(document).ready(function(){
    function ABC(isOnLoad) {
        //many code here
        if(isOnLoad){
                           //if by click, do some code.
                           //if by page loading, do not run these code.
            alert('ok');//check if it works.
        }
    }
    $(document).ready(function() {

                  ABC(true);                   
    });
    $('#click').click(function() {
        ABC(false);
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T17:29:10.690

好吧，根据您设置点击处理程序的方式，您可以执行以下操作：

```
if(this===window)
    //it's running in page load
else
    //it's being run as a click handler 
```

在某些情况下这不起作用，例如，如果您`this`手动修改，或者您的点击处理程序设置如下：

```
<a href="#" onclick = "ABC()">Click</a> 
```

在这种情况下，`this`仍然会引用窗口。如果是这种情况，您可以执行以下操作：

```
jQuery(document).ready(function(){
this.someVar = true;
function ABC(){
    if (window.someVar === true)
    //its running in doc.ready
    else
    //its running elsewhere
}
this.someVar = false;
//...
//rest of code
//...
}); 
```

# java - 如何将文件夹库添加到 Eclipse？

> ID：12588057
> 
> 赞同：2
> 
> 时间：2012-09-25T17:26:18.830
> 
> 标签：java, eclipse, import

我正在尝试添加这个[库](https://github.com/savvasdalkitsis/JTMDB)。然后我在我的 src 文件夹同一级别创建了一个名为 lib 的文件夹，然后右键单击 import as file structure 到 lib 文件夹。

然后去了`Project->Properties->Build Path->Libraries`。

然后我要添加类文件夹吗？如果是这样，我选择哪个文件夹是否重要，因为有 4 或 5 个嵌套文件夹。

那我要进口`com.savvasdalkitsis.jtmb.*;`吗？或者我在什么时候从文件夹路径导入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T18:39:05.550

> 那我要导入 com.savvasdalkitsis.jtmb.*; 吗？或者我在什么时候从文件夹路径导入？

为了能够导入`com.savvasdalkitsis.jtmb.*`，该库中文件夹中的 com 文件`src/main/java`夹应该在您的类路径中，即将该库中的 java 文件夹`src/main`原样复制到您的项目中，然后右键单击`java`并选择`Add to build path`菜单选项。然后 com.* 将在您的类路径中，并且可以使用您指定的导入来引用。

# internet-explorer - IE跨域ajax调用XDomainRequest报错

> ID：12588058
> 
> 赞同：2
> 
> 时间：2012-09-25T17:26:22.700
> 
> 标签：internet-explorer, jquery, cross-domain, xdomainrequest

我必须使用以下代码从 iframe 中的页面注销

```
//The javascript code is in a page in my-domain
//it tries to logout from the page in other-domain
$(window).unload(function() 
{
    if ($.browser.msie && window.XDomainRequest) // IE
    {
        var xdr = new XDomainRequest();
        if (xdr)
        {
            xdr.onerror = function(){alert("XDR onerror");};
            xdr.ontimeout   = function(){alert("XDR timeout");};
            xdr.onprogress  = function(){alert("XDR onprogress");};
            xdr.onload      = function(){alert("XDR onload");};
            xdr.timeout     = 5000;
            xdr.open("GET", 'http://other-domain/.../j_spring_security_logout');
            alert("before send");
            xdr.send();
            alert("after send");
        }
        else
            alert('Failed to create new XDR object.');
    } 
    else // firefox
       $.getJSON( 'http://other-domain/.../j_spring_security_logout?callback=?', null);

}); 
```

但是，我在 IE8 中按以下顺序获取更改框：“发送前”、“XDR onerror”、“发送后”。

我在服务器端有以下代码

```
@Override
public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException, ServletException {
    HttpServletResponse response = (HttpServletResponse) res;
    response.setHeader("Access-Control-Allow-Origin", "*");
    response.setHeader("Access-Control-Allow-Methods", "GET,POST,OPTIONS");
    response.setHeader("Access-Control-Max-Age", "360");
    response.setHeader("Access-Control-Allow-Headers", "x-requested-with");
    chain.doFilter(req, res);
} 
```

在我使用 $.getJSON 和 response.setHeader("Access-Control-Allow-Origin", "*") 等之后，我可以验证注销是否适用于 Firefox；但是，当我使用 IE 时它不会注销。

然后我在网上找到了这条评论：

```
"For cross-domain, IE requires you to use XDomainRequest instead of XMLHttpRequest.
 jQuery doesn't do it so you have to do it manually:" 
```

所以我添加了 XDomainRequest。但是，我在 IE8 中收到了警告对话框“XDR onerror”。我应该添加什么才能在 IE 中进行跨域调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:41:57.330

尝试使用 iframe 发出 XDomainGet 请求：

```
root = document.body;

myIframe = document.createElement("iframe");
myframe.setAttribute("id", "myFrameId")
myIframe.setAttribute("style", "position: absolute; top: -100px;");
//Making a xget
myIframe.setAttribute("src", "http://other-domain.../j_spring_security_logout?callback=?");

root.appendChild(myframe); 
```

要删除： document.body.removeChild( document.getElementById("myFrameId") ); 或 root.removeChild(myFrame);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-06T20:22:11.887

**可以使用 jQuery 插件[jquery-transport-xdr启用 IE8/9 中的](https://github.com/gfdev/javascript-jquery-transport-xdr)**CORS请求****

# linux - 杀死一个java僵尸进程

> ID：12588061
> 
> 赞同：2
> 
> 时间：2012-09-25T17:26:32.597
> 
> 标签：linux, kill-process, zombie-process

我正在运行一个实验性的 java 应用程序，每次我终止或停止应用程序时，都会创建僵尸进程。我知道僵尸并不是真正的问题，因为它们（据说）不会消耗资源。但是，我的 RAM 可用空间明显少于应有的空间。这里是转储

```
ps aux | grep java

3052  8.5  0.0      0     0 ?        Zl   Sep24 127:24 [java] <defunct>
6644  0.9  0.0      0     0 ?        Zl   Sep24  13:20 [java] <defunct>
8325  0.7  0.0      0     0 ?        Zl   Sep24  11:01 [java] <defunct>
8954  0.7  0.0      0     0 ?        Zl   Sep24  11:01 [java] <defunct>
16229  1.3  0.0      0     0 ?        Zl   Sep24  16:57 [java] <defunct>
19222  106  0.0      0     0 ?        Zl   Sep24 1346:37 [java] <defunct> 
```

以下都不起作用:(

```
kill -9 PID , kill -1 PID, kill -KILL PID 
```

我无法重启我的机器！所以我非常欢迎任何解决方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T17:47:49.223

wait(2) 手册页告诉您：

> 终止但没有等待的孩子成为“僵尸”。内核维护有关僵尸进程的最小信息集（PID、终止状态、资源使用信息），以便允许父进程稍后执行等待以获取有关子进程的信息。只要僵尸没有通过等待从系统中移除，它就会消耗内核进程表中的一个槽，如果这个表填满，就不能再创建更多的进程。如果父进程终止，则它的“僵尸”子进程（如果有）将被 init(8) 采用，它会自动执行等待以移除僵尸进程。

所以你必须寻找你的僵尸的*父*进程 ID 并杀死它们。然后`init`将埋葬你的僵尸。为此`ps -f`或`pstree`会帮助你。

# objective-c - 从静态单元格表 视图控制器处理 iOS 6 中的旋转

> ID：12588062
> 
> 赞同：0
> 
> 时间：2012-09-25T17:26:32.317
> 
> 标签：objective-c, rotation, ios6, xcode4.5

`MPMoviePlayerViewController` 我正在展示来自 tabelview 控制器中的静态单元格的视频剪辑 。在我添加的视频剪辑的目标视图控制器中：

```
- (BOOL)shouldAutorotate {
return YES;
}

- (NSUInteger)supportedInterfaceOrientations {
return UIInterfaceOrientationMaskAllButUpsideDown;
} 
```

到我的视图控制器，但据我所知，我需要将它添加到我的呈现导航控制器中，这`UITableViewController`在我的情况下是一个。问题是我只有一个无法编辑的 .h 文件，因为我显然没有权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T20:06:54.453

要更改`.m`视图控制器的文件，您需要对其进行子类化。

# php - ALTER TABLE 表 AUTO_INCREMENT = $x

> ID：12588071
> 
> 赞同：1
> 
> 时间：2012-09-25T17:26:50.433
> 
> 标签：php, mysql, mysqli, auto-increment, alter-table

我想执行这个查询，但它不起作用，我不知道为什么：

```
$query = mysqli_query($connexionUser, "ALTER TABLE creatik AUTO_INCREMENT = '$i'"); 
```

我检查了我的 vars 并没有问题。如果可以帮助理解问题所在，则在作为主键的 id 列上设置自动增量。

谢谢看看:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T17:32:52.157

`AUTO_INCREMENT`需要一个整数。引号可能会将其丢弃，请尝试删除它们。

# mysql - mysql有内部（特殊）单词“to”？

> ID：12588072
> 
> 赞同：0
> 
> 时间：2012-09-25T17:27:02.300
> 
> 标签：mysql

当我写查询时，我在表中有列“to”

```
SELECT to FROM mytable 
```

mysql_error 返回错误，如果将单词插入**到**``引号中，即

```
SELECT `to` FROM mytable 
```

查询有效，我搜索但没有找到，所以请告诉，mysql中的“to”是什么意思？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T17:30:11.510

它是 MySQL 中的[保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)，在[GRANT](http://dev.mysql.com/doc/refman/5.1/en/grant.html)查询中用于将权限“分配给”用户

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T17:28:59.073

`TO`是 MySql 中的[保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)，因此查询需要反引号：

```
SELECT `to` 
FROM mytable 
```

这是MySQL[中当前保留字的列表。](https://stackoverflow.com/questions/12588072/mysql-have-internal-special-word-to)列表中的任何项目都需要用反引号括起来```。

# salesforce - 使用 VisualForce 中的输入字段有选择地隐藏 pageBlocks

> ID：12588073
> 
> 赞同：1
> 
> 时间：2012-09-25T17:27:05.043
> 
> 标签：salesforce, visualforce

*仅当 inputField“Gift_ c.PaymentMethod* _c”（这是一个下拉菜单）具有特定值（即“信用卡”）时，我才想显示 pageBlockSection“ccBlock” 。我已经尝试了很多方法，但到目前为止没有运气。

```
 <apex:pageBlockSection title="Basic Information" columns="1" >
        <apex:inputField value="{!Gift__c.Contact__c}"/>
        <apex:inputField value="{!Gift__c.PaymentMethod__c}" id="payMethod" >
            <apex:actionSupport event="onchange"  reRender="ccBlock, bankBlock" action="{!HideBlock}" />
        </apex:inputField>
    </apex:pageBlockSection>
    <apex:pageBlockSection title="Credit Card" rendered="{!visi}" columns="1" id="ccBlock">
        <apex:inputField value="{!Gift__c.CCType__c}"/>
        <apex:inputField value="{!Gift__c.CCName__c}"/>
        <apex:inputField value="{!Gift__c.CCNumber__c}"/>
        <apex:inputField value="{!Gift__c.CCExpiryMonth__c}"/>
        <apex:inputField value="{!Gift__c.CCExpiryYear__c}"/>
    </apex:pageBlockSection> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T14:01:51.373

您的解决方案不起作用，因为您尝试重新渲染已隐藏的 pageBlockSection，因此您无权访问此部分。为此，您需要重新渲染一些“包装”面板。

我更喜欢用 javascript 来做这样的事情：

```
<apex:pageBlockSection title="Basic Information" columns="1" >
    <apex:inputField value="{!Gift__c.Contact__c}"/>
    <apex:inputField value="{!Gift__c.PaymentMethod__c}" id="payMethod" onchange="checkValue()"/>
</apex:pageBlockSection>

<apex:outputPanel style="display:none;" id="myPanel">
    <apex:pageBlockSection title="Credit Card" rendered="{!visi}" columns="1" id="ccBlock">
        <apex:inputField value="{!Gift__c.CCType__c}"/>
        <apex:inputField value="{!Gift__c.CCName__c}"/>
        <apex:inputField value="{!Gift__c.CCNumber__c}"/>
        <apex:inputField value="{!Gift__c.CCExpiryMonth__c}"/>
        <apex:inputField value="{!Gift__c.CCExpiryYear__c}"/>
    </apex:pageBlockSection>  
</apex:outputPanel>

<script>
function checkValue(){
    if(jQuery('[id$=payMethod]').val() == 'Credit Card'){
        jQuery('[id$=myPanel]').show();
    }
    else{
        jQuery('[id$=myPanel]').hide();
    }
}
</script> 
```

# java - jar 文件到 web 服务

> ID：12588075
> 
> 赞同：2
> 
> 时间：2012-09-25T17:27:21.290
> 
> 标签：java, url, service, jar, web

我编写了一个项目，后来将其构建为一个 jar 文件。直到这里一切正常。Jar 文件提供适当的输出。

但是我的 jar 文件必须在服务器中。我已经将它上传到服务器并使用控制台，我可以让它运行。我的问题是，我必须准备一个其他用户可以连接的 Web 服务 url，当他连接时，我的 jar 文件必须运行并提供输出。基本上我正在尝试将其转换为网络服务。

感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T17:36:24.593

你听说过码头吗？尝试使用它。使用 POJO 中的 Web 服务很容易实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T04:37:08.353

您可以构建非常简单的 Web 服务来公开 jar 文件中的功能 - JaxWS 提供了广泛的 API，用于在任何 Web 服务器容器中创建和部署服务。这是一个非常简单的教程，可以指导您

[http://www.benmccann.com/blog/web-services-tutorial-with-apache-cxf/](http://www.benmccann.com/dev-blog/web-services-tutorial-with-apache-cxf/)

干杯萨西什

# firefox - Webdriver 在 45000 毫秒后无法连接到端口 7055 上的主机 127.0.0.1

> ID：12588082
> 
> 赞同：140
> 
> 时间：2012-09-25T17:27:54.140
> 
> 标签：firefox, selenium, jenkins, x11, selenium-webdriver

我有运行测试的盒子。詹金斯似乎会进入并执行正在运行的特定作业中描述的命令。

在这里，我正在尝试运行我的 Selenium Webdriver 测试，但它告诉我在启动 firefox 时出错。最终的想法是完全在这个盒子上运行 webtests，并截取一些错误截图。

我正在使用 selenium-java-2.25.jar、firefox 10、linux 操作系统。

有趣的是，我可以手动 ssh 进入盒子，暂时从盒子上的另一个用户那里复制魔法 cookie（以获得 X 隧道），执行`export DISPLAY=mydisplay:1.0`，然后使用 ant 启动我的 selenium 测试。这将带来 Firefox 和测试就好了。

这里有各种线程似乎有完全相同的问题，我想我已经尝试了其中的大部分。这是我所做的：

*   重新启动盒子，使用 VNC 重新登录。

*   在运行 selenium 测试之前在 Jenkins 中放置一个 bash 脚本来运行。bash 脚本基本上只是做一个`export DISPLAY=mydisplay:1.0`. 它也执行`xclock`. 这很有效，因为我可以看到 xclock 显示在 VNC 中。

*   iptables 已关闭

*   firefox 正确位于 /usr/bin/firefox

*   sshd_config 显示 X11Forwarding 为真。

*   据说降级 Firefox 对某些人有帮助，但我不希望这样做。Webdriver 无论如何都应该支持 FF 10。

但是，以上都不能解决问题。

本地主机上的端口 7055 似乎不存在：

`netstat -an | grep 7055`- 没有打印

这就是我的 /etc/hosts 所说的：

```
 1 127.0.0.1               localhost.localdomain localhost
  2 ::1             localhost6.localdomain6 localhost6 
```

也许它与 localhost:7055 不存在有关？我不确定从这里去哪里。仍然，为什么错误输出说它`display: :0.0`在我指定时正在寻找`mydisplay:1.0`？

最后我收到的错误输出：

```
[testng] org.openqa.selenium.firefox.NotConnectedException: Unable to connect to host 127.0.0.1 on port 7055 after 45000 ms. Firefox console output:
[testng] Xlib: connection to ":0.0" refused by server
[testng] Xlib: No protocol specified
[testng] 
[testng] Error: cannot open display: :0.0
[testng] Xlib: connection to ":0.0" refused by server
[testng] Xlib: No protocol specified
[testng] 
[testng] Xlib: connection to ":0.0" refused by server
[testng] Xlib: No protocol specified
[testng] 
[testng] Xlib: connection to ":0.0" refused by server
[testng] Xlib: No protocol specified
[testng] 
[testng] Error: cannot open display: :0.0
[testng] 
[testng]    at org.openqa.selenium.firefox.internal.NewProfileExtensionConnection.start(NewProfileExtensionConnection.java:109)
[testng]    at org.openqa.selenium.firefox.FirefoxDriver.startClient(FirefoxDriver.java:245)
[testng]    at org.openqa.selenium.remote.RemoteWebDriver.<init>(RemoteWebDriver.java:109)
[testng]    at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:185)
[testng]    at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:178)
[testng]    at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:174)
[testng]    at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:92)
[testng]    at com.test.webtest.browser.BrowserFactory.createBrowser(BrowserFactory.java:24)
[testng]    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
[testng]    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
[testng]    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
[testng]    at java.lang.reflect.Method.invoke(Method.java:601) 
```

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-10-24T12:23:40.820

不知道你是否解决了这个问题，但我刚刚从另一端解决了同样的问题。

Selenium 和 Firefox 似乎很难相互交流——我怀疑 Firefox 在多个版本中“进化”变化，因此并不总是保证向后和向前兼容性，而且不兼容似乎总是会产生相同的错误。

当我从 FF 15 迁移到 FF 16 时，我的问题就开始了。在 Ubuntu 上运行时，这会随着其他升级神奇地自动发生，但我相信这是关键的变化。

通过从 Selenium 2.24.1 迁移到 Selenium 2.25.0 解决了该问题

由于 selenium 更改只是下载 jar 文件并运行它而不是旧的，因此值得尝试将其作为快速简便的故障排除程序 - 如果它没有帮助，只需切换回来。在您的情况下，我不确定要尝试哪个版本的 Selenium，但我认为 2.24 应该适用于 FF 10。

我过去发现的另一个问题是 Firefox 无法在 Ubuntu 上以 root 身份运行。如果 Selenium 作为服务运行，或者可能是从 bash 脚本或 cron 作业启动，就会发生这种情况。这可以解释为什么它为您运行而不为詹金斯运行。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-12-31T04:20:35.673

我有一个类似的问题。也许这个答案也会对您有所帮助。

看起来你有两个不同的错误：

1.  `Unable to connect to host 127.0.0.1 on port 7055`
2.  `Error: no display specified`

错误的原因`Unable to connect`是 Selenium Server 的版本不知道如何与较新版本的 Firefox 一起工作。您需要下载支持较新版本 Firefox 的较新版本的 Selenium Server。

错误的原因`Error: no display specified`是 Firefox 正在启动，但远程主机上没有运行 X 服务器 (GUI)。您可以使用 X11 转发在远程主机上运行 Firefox，但在本地主机上显示它。在 Mac OS X 上，您需要下载[XQuartz](http://xquartz.macosforge.org)才能使用 X11 转发。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-05-07T06:26:48.540

在选择使用 Selenium 进行测试之前，您需要检查浏览器的兼容性：

[https://github.com/SeleniumHQ/selenium/blob/master/java/CHANGELOG](https://github.com/SeleniumHQ/selenium/blob/master/java/CHANGELOG)

这可能有助于回答上述问题。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-02-20T21:53:47.517

获取适用于 FireFox 19 的最新 Selenium jars (2.30)

您可以在此处下载最新的 jars（截至写作时为 2.31）：[https ://code.google.com/p/selenium/downloads/list](https://code.google.com/p/selenium/downloads/list)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-03-07T19:04:59.067

我通过将 Firefox 降级到以前与 Selenium-WebDriver 配合良好的旧版本解决了这个问题。就我而言，我不得不降级回 Firefox 18，而这个版本与 Selenium 2.27 一起使用

这是获取旧版本 firefox 的链接：[https ://ftp.mozilla.org/pub/mozilla.org/firefox/releases/](https://ftp.mozilla.org/pub/mozilla.org/firefox/releases/)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-04-01T20:59:51.243

这个问题困扰了我很长时间，我见过一个可行的解决方案，如果 Firefox 是**使用升级的 firefox 驱动程序**。

*   如果您的**Firefox 升级是自动发生**的，那么您可能会偶尔遇到这个问题。看起来 Firefox 的人发展得太快了，或者他们不关心向后兼容性。

*   每次我在我的旧脚本上看到这个问题时，我都会检查 firefox 版本是否发生了变化——大多数时候是这样。

*   然后我去 maven repo 获取 selenium firefox driver repo - [http://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-firefox-driver](http://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-firefox-driver)并下载最新版本。

*   或立即使用新版本的 firefox 驱动程序更新我的 pom.xml（如果使用 maven） - 2.40.0

*   没有简单的方法可以避免这个问题，除非你真的明确地阻止了来自 firefox 的自动更新（你可以在首选项 - 高级 - 更新 - 选择“检查更新，但让我选择是否安装它们”中执行此操作（在 Mac 上） )

*   如果您的脚本在自动模式下运行，那么您可能需要禁用更新。但是，这可能会产生其他问题。由于大多数人/用户可能默认启用了 Firefox 更新。因此，您的应用程序并未真正在任何更高版本上进行测试。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-06-16T17:00:17.823

我有**Firefox 47**和**Selenium 2.53**，我得到了同样的错误。我的解决方案是将 Firefox 47 更改为**Firefox 46**，问题就解决了。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2013-03-26T14:25:08.620

更新 selenium jars，下载 selenium 2.31.0

selenium 的人已经解决了这个问题

这是一个兼容性问题。

干杯

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-07-29T21:28:25.497

脚本的问题是用于脚本的环境与用于测试的环境不同，因此在此处设置环境变量对您的测试没有任何作用。

要正确设置变量，您需要在 Jenkins 中设置它。转到*Manage Jenkins>Manage Nodes>Master>Configure*。检查*环境变量*复选框，然后在名称框中输入 DISPLAY，并将值设置为：1.0。

此外，您需要设置权限，尝试`xhost +`在终端中禁用 xhost 访问控制。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-04-19T03:31:51.123

我也面临同样的问题。每当我们或 webdriver 打开时，FF 浏览器都会检查更新（如果有）。在这种情况下，我会在执行期间尝试更新，然后即使更新正确，您也会收到错误消息，因为您没有正确更新 Selenium 版本。

导航到“ [http://docs.seleniumhq.org/download/](http://docs.seleniumhq.org/download/) ”并下载最新版本。现在去检查一下，问题确实解决了。:)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-03-07T09:17:25.277

我得到了同样的错误；我使用了 selenium-java 版本 2.25.0 和 Firefox vresion 18.0.2；我已将 selenium-java 的版本更改为 2.30.0，现在可以使用了。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-02-21T16:44:18.033

要解决此问题，请使用[http://docs.seleniumhq.org/download/](http://docs.seleniumhq.org/download/)上提供的新 jar 文件。对于 java、C#、php 等...Firefox 27.0.1 需要 2.39.0 的驱动程序版本。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2014-02-27T05:09:22.513

只需在 Jenkins 中安装 Xvnc 插件即可。问题应该得到解决。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2016-11-11T11:34:37.780

我在运行 docker 时遇到了完全相同的问题，但我在您提到的错误之前的日志中找到了解决方案。

```
selenium_1  | 2016-11-11 11:19:34,498 DEBG 'xvfb' stderr output:
selenium_1  | (EE)
selenium_1  | Fatal server error:
selenium_1  | (EE) Server is already active for display 99
selenium_1  |   If this server is no longer running, remove /tmp/.X99-lock
selenium_1  |   and start again.
selenium_1  | (EE) 
```

我听从了建议，问题已经解决。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2016-05-23T09:25:01.993

我也有同样的问题，但是在将 firefox 版本降级到 35.0.1 后问题得到解决，我的 selenium 版本是 2.43

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2016-01-04T06:48:51.150

我得到了同样的错误“selenium_Unable to connect to host 127.0.0.1 on port 7055”

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2014-01-28T04:55:03.490

发生这种情况是因为旧版本。只需将浏览器更新到最新版本并将 selenium webdriver 包更新到最新版本。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2014-09-19T11:44:56.660

如果我们的 selenium 脚本没有执行，请更新 selenium jars。目前我正在使用 selenium-java-2.43.0-srcs

现在它工作正常

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2014-07-11T10:40:09.103

这就是我使用 IWebDriver 的静态属性并从多个测试方法调用它时的行为方式。

```
public class LanguageMenu
{
    private static IWebDriver drv;

    static LanguageMenu()
    {
       drv = Driver.Instance;
    }
    ...

    public static void English()
    {
        drv.FindElement(By.Id("mvc_lang_en"));
        el.Click();
    }

    public static void Rusian()
    {
        ...
    }

    ...
} 
```

喜欢

```
 [TestMethod]
 public void Language_SwitchTo_English()
 {
     LanguageMenu.English();
     Assert.IsTrue(ContactPage.IsAt("Contact"));
 }

 [TestMethod]
 public void Language_SwitchTo_Rusian()
 {
     LanguageMenu.English();
     Assert.IsTrue(ContactPage.IsAt("Контакт"));
 } 
```

**解决方案**

为每个调用测试方法创建 Driver 的新实例

```
 private static void English()
 {
            var drv = Driver.Instance;
            var el = drv.FindElement(By.Id("mvc_lang_en"));
            el.Click();
 } 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2015-09-26T17:39:27.500

只需重新启动终端。终端被挂了。之后一切都会正常

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2016-11-30T05:09:57.203

我也被这个错误卡住了三天，终于弄明白了。你可以查看我在[这里](https://stackoverflow.com/questions/25300690/unable-to-connect-to-host-127-0-0-1-on-port-7055-after-45000-ms-with-ff-version/40880698#40880698)给出的答案。这是浏览器和硒服务器的兼容性问题。[我希望这会有所帮助。您可以从此链接](https://camo.githubusercontent.com/2bb1d1a9ab8cacc21418b54e7e0ab080ae9daa31/68747470733a2f2f7777772e657665726e6f74652e636f6d2f6c2f41434d4a64747a315343394e39614e595f647762673639414649695171613876746738422f696d6167652e706e67)检查浏览器兼容性

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2015-08-03T13:42:07.833

它发生在不同版本的ff上。我通过使用 selenium-server-standalone-2.41.0.jar 和 selenium-java-2.41.0.zip 使用最新的 ff 版本 39，显示相同的错误。

[在此处](http://docs.seleniumhq.org/download/)获取最新的服务器和客户端 jar 文件，以获得我分别使用的服务器和客户端版本 2.47.0 和 2.47.1 的兼容性。和繁荣！有效。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2017-04-12T11:45:35.030

安装了 Firefox Setup 18.0.exe 它对我有用

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2016-10-10T09:20:34.790

在 Windows 上：同时检查 Firefox 的“位数”。Firefox 43.0.1 64bit 不适用于 Selenium 2.50.0。与 Firefox 43.0.1 32bit 配合良好...

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2018-02-26T07:28:00.610

我认为这可能是显示问题。如果框中没有 GUI，则从 selenium webdriver 启动 firefox 会出现此错误。

要解决这个问题，首先在框中安装 Xvfb [ `yum install Xvfb -y`]（一个虚拟显示驱动程序）。然后从詹金斯运行你的测试`xvfv-run -a -d <your test execution command>`。这将在虚拟显示缓冲区中启动浏览器。它还能够使用 selenium webdriver 获取屏幕截图。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2017-02-02T13:19:13.100

我今天遇到了同样的问题。为了解决这个问题，我将 Firefox 版本 51 降级为 47 并且它正在工作。

注意：我在虚拟盒子中使用 Linux Ubuntu Mate，主机是另一个 Ubuntu Mate。所有操作系统都是 64 位和 firefox。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2015-11-24T09:39:20.177

添加到知识库。我们在 Bamboo 上遇到了同样的问题。通过使用 Bamboo 上的环境属性解决了该问题。

```
DISPLAY=":1" 
```

在 pom.xml 中将该值添加为系统属性，否则命令行不起作用。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2017-05-15T08:34:39.587

我对 Firefox 38 也有同样的问题。

使用以下版本依赖项后，我可以解决问题。

```
 <dependency>
        <groupId>org.seleniumhq.selenium</groupId>
        <artifactId>selenium-java</artifactId>
        <version>2.53.0</version>
    </dependency>

    <dependency>
        <groupId>org.seleniumhq.selenium</groupId>
        <artifactId>selenium-firefox-driver</artifactId>
        <version>2.53.0</version>
    </dependency> 
```

* * *

## 回答 #29

> 赞同：-1
> 
> 时间：2015-11-01T12:50:02.483

# 解决方案 -

1）升级你的硒服务器，即硒罐“selenium-server-standalone-2.xx.x.JAR”到**“selenium-server-standalone-2.45.0.JAR”**

2）升级您的 Selenium 客户端驱动程序，即 selenium libs 文件夹“selenium-java-2.xx.x”到**“selenium-java-2.45.0”**

3) 检查并安装兼容的 Firefox 版本

参考 -[下载更新的 selenium 库和 jar 即版本 2.45.0](http://selenium-release.storage.googleapis.com/index.html?path=2.45/)

这将解决您的问题.. 干杯！

# c - C / C ++错误：函数内部未定义指针变量

> ID：12588088
> 
> 赞同：2
> 
> 时间：2012-09-25T17:28:21.217
> 
> 标签：c, function, pointers, error-handling, undefined

根据我的 Java 经验，掌握它并不难。

一个非常简单的功能：

```
void update(float * p,float value)
{
    *p = value;
} 
```

编译器抱怨`identifier p is undefined`.

我认为`*p`会取消引用指针并将值存储在其中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T17:47:20.783

好的，所以您的代码看起来正确，我必须假设错误消息来自其他地方。您可以试用这个“完整”版本的程序：

```
#include <stdio.h> 

void update(float *p, float value){
  *p = value;
}

int main(int argc, char *argv[]){  
  float p = 3.0;
  update(&p, 5.0);
  printf("%f\n", p);
} 
```

只需复制并粘贴它并以您收到的任何错误/警告进行响应。如果它工作正常，那么您错过了在代码中输入的内容，如果它仍然给您带来问题，那么您的环境有问题，我们需要更多详细信息。

# james - RemoteHost 说：550 你的 HELO 字符串在 James Apache 服务器中不正确

> ID：12588089
> 
> 赞同：0
> 
> 时间：2012-09-25T17:28:21.510
> 
> 标签：james

我正在使用 James Apache Server 发送邮件。对于 Gmail 和其他服务，所有邮件都已成功投递。但是有一个，它回应：

```
RemoteHost said: 550 Your HELO string is incorrect 
```

在 smtpserver.xml 中有一行：

```
<helloName autodetect="false">myhost.com</helloName> 
```

有没有其他方法可以调整它？收件人提供者向我询问日志，其中发送的 HELO 字符串显示在请求中 - 在交付期间记录在哪里？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T18:17:43.250

我已经通过指定不带点的*helloName来解决它，只是主机名，并且还将 localhost 更改为**domainlist.xml*中的真实域名。

# php - 使用 PHP Mysql 登录后的空白页面

> ID：12588090
> 
> 赞同：1
> 
> 时间：2012-09-25T17:28:37.490
> 
> 标签：php, mysql

这是有登录表单的主页的代码：

```
<?php
session_start();
if(isset($_SESSION['fb'])){
    echo $_SESSION['fb'];
    session_destroy();
}
?>

<html>
<head><title></title>
</head>
<body bgcolor=#818181>
<center><img src=logo.png>
<br>

<img src=voterslogin.png><br>
<a href=voterregister.php><font style='font-family:Century Gothic' size=2>Register</a><br>

<form action="login.php" method="post">
<input type="text" name="login" size=11  style="background-image:url(field.png); border: 2px;  "><br>
<input type="password" name="password" size=11 style="background-image:url(field.png); border: 2px;  "><br>
<input type="image" src="submit.png" alt="Submit button" name="submit"><br>
</form>
____________________________________________________
<br>

<img src=text1.png><br>
<a href=mayor.html><img src=menu1.gif></a><img src=bullet.png><a href=vicemayor.html><img src=menu22.gif></a><img src=bullet.png><a href=senator.html><img src=menu3.gif></a>
<img src=bullet.png><a href=congressman.html><img src=menu4.gif></a><br><a href=councilor.html><img src=menu5.png></a><img src=bullet2.png><a href=partylist.html><img src=menu6.gif></a>
<br>
____________________________________________________
<br><br><br>
<a href=adminlogin.php><img src=login.png></a><br>
</body>
</html> 
```

这是登录检查文件：

```
<?php
session_start();

if(isset($_POST['submit'])){
    $username = $_POST['login'];
    $password = $_POST['password'];

    if(!empty($username) && !empty($password)){
        mysql_connect('localhost', 'root', '');
        mysql_select_db('voters');

        $result = mysql_query("SELECT * FROM tbvoter WHERE username='$username' AND password='$password'");

        if(mysql_num_rows($result) == 1){
            $row = mysql_fetch_array($result);
            $_SESSION['voter_id'] = $row[0];
            header('Location: ballot.php');
        }else{
            $_SESSION['fb'] = '<p style="color: red">Invalid Username/Password!</p>';
            header('Location: home.php');
        }
    }else{
        $_SESSION['fb'] = '<p style="color: red">Fill in all fields!</p>';
        header('Location: home.php');
    }
}

?> 
```

我首先检查了查询是否真的在 mysql 上运行。有用。如果我正确输入了用户名和密码，就会有结果。但是当您登录时，即使用户名和密码正确与否，它也只是进入地址栏中带有 login.php 的空白页面。

这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:31:37.357

当你使用 header() 时，你总是需要通过像这样放置 ob_start() 来指定代码在哪里盯着看：

```
<?php
ob_start();

session_start();
if(isset($_SESSION['fb'])){
    echo $_SESSION['fb'];
    session_destroy();
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T17:48:06.507

我在您的登录检查文件中看不到任何`header('Location:login.php')`内容，因此假设检查文件本身是 login.php。如果页面为空白，则意味着没有输出或终止脚本的错误。首先检查您的 php 配置中是否启用了错误报告。

您的输入 type=image name=submit, 没有值，并且**不能用作 $_POST**，因此将代码的开头更改为

```
if(isset($_POST['login']) && isset($_POST["password"]))
{
$username = $_POST['login'];
$password = $_POST['password'];
//code continues here

} 
```

一个建议，永远不要使用像 type=image 这样的不标准方法，最好使用**type=submit**与图像背景和正确定位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T18:56:00.880

您应该考虑在 mysql_ 函数上使用 PDO。[http://php.net/manual/en/book.pdo.php](http://php.net/manual/en/book.pdo.php) PHP 的手册提供了很好的入门知识。

此外，据我所知，您的代码存在注入漏洞。确保在生产中使用此代码之前进行清理。

# python - python 在一个 if 语句中使用多个 formset.isempty - 需要语法信息

> ID：12588098
> 
> 赞同：0
> 
> 时间：2012-09-25T17:29:05.800
> 
> 标签：python, syntax, if-statement, rules, is-empty

不确定如何问这个问题，所以请多多包涵。我有 6 个字段需要检查它们是否为空。我认为下面的代码可以完成这项工作，但事实并非如此。我不认为我理解代码以及它如何正常工作，并且在其他论坛/帖子/问题上找不到帮助。我不是在找人来解决这个问题（想学习而不是仅仅得到答案）但是如果有人知道我可以在哪里阅读这种 if 语句，我将不胜感激。我找到了一些关于从中创建列表然后检查列表是否为空的信息，但是我无法弄清楚在这种情况下如何工作。同样，不确定我是否正确地提出了问题或提供了足够的信息，所以请询问您是否需要更多信息。

```
if FormSet.IsEmpty(CurrentForm, "ADD_COMP1_ADDRESS") and \
   FormSet.IsEmpty(CurrentForm, "ADD_COMP2_ADDRESS") and \
   FormSet.IsEmpty(CurrentForm, "ADD_COMP3_ADDRESS") and \
   FormSet.IsEmpty(CurrentForm, "ADD_COMP4_ADDRESS") and \
   FormSet.IsEmpty(CurrentForm, "ADD_COMP5_ADDRESS") and \
   FormSet.IsEmpty(CurrentForm, "ADD_COMP6_ADDRESS"):
    Rule.Violated = True
   else:
    Rule.Violated = False 
```

总而言之，我需要检查 6 个字段，如果它们和其中的一个为空，我需要违反规则。如果填写了这些字段中的任何一个，则不应违反规则。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T21:55:22.193

所以我想我对这些东西真的很陌生，我需要做的就是修复“else：”上的缩进应该与“if”处于相同的缩进级别

```
if FormSet.IsEmpty(CurrentForm, "ADD_COMP1_ADDRESS") and \
   FormSet.IsEmpty(CurrentForm, "ADD_COMP2_ADDRESS") and \
   FormSet.IsEmpty(CurrentForm, "ADD_COMP3_ADDRESS") and \
   FormSet.IsEmpty(CurrentForm, "ADD_COMP4_ADDRESS") and \
   FormSet.IsEmpty(CurrentForm, "ADD_COMP5_ADDRESS") and \
   FormSet.IsEmpty(CurrentForm, "ADD_COMP6_ADDRESS"):
    Rule.Violated = True
else:
    Rule.Violated = False 
```

# linux - Linux ISR 的堆栈在哪里

> ID：12588105
> 
> 赞同：3
> 
> 时间：2012-09-25T17:29:25.540
> 
> 标签：linux, operating-system, linux-kernel

我知道一个 linux 进程有两个独立的堆栈——一个在用户空间，另一个在内核空间。但是 ISR 使用的堆栈在哪里？它是否与进程的内核空间堆栈共享？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T20:07:28.493

在过去，ISR 曾经使用当前进程的堆栈来提供服务。因此，当发生中断时，当前执行的进程会将其所有数据保存在其内核或用户空间堆栈上，并使用自己的内核堆栈开始执行适当的 ISR 函数。
但是随着 ISR 堆栈的引入，所有与 ISR 相关的处理都使用一个名为 ISR 堆栈的单独堆栈来完成。ISR 堆栈位于内核空间中，因为只有内核线程才能执行中断的 ISR 处理程序。
用户空间不知道并且坦率地说不关心中断是在当前进程的内核堆栈还是单独的 ISR 堆栈中服务的。由于中断来自每个 cpu，因此 ISR 堆栈必须是每个 cpu。

回答您最初的问题：如果存在 ISR 堆栈，则它与进程内核堆栈完全不同。否则，进程内核堆栈用于处理中断。

ISR 堆栈的存在也取决于架构。

# django - 使用远程身份验证的 Django 用户注销

> ID：12588109
> 
> 赞同：5
> 
> 时间：2012-09-25T17:29:39.503
> 
> 标签：django, authentication, kerberos

我有一个通过 Kerberos 使用远程身份验证的网站。我已经根据 Django 文档（[https://docs.djangoproject.com/en/dev/howto/auth-remote-user/](https://docs.djangoproject.com/en/dev/howto/auth-remote-user/)）设置了所有内容。登录效果很好，但注销不会结束会话。我可以做些什么来确保用户完全退出？完全关闭浏览器窗口似乎确实有效，但用户需要能够在不关闭浏览器窗口的情况下注销。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-27T19:07:39.820

使用[HttpResponse](https://docs.djangoproject.com/en/1.7/ref/request-response/#django.http.HttpResponse)返回状态 401。

```
def logout(request):
    return HttpResponse(content, status=401) 
```

这将使用户从 Kerebos 中注销。

*信用：我在其他地方看到了这个与基本身份验证相关的解决方案。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-21T11:50:35.820

当用户从 django 注销时，django 会话被破坏，但用户仍然登录到 Kerberos，下一个请求将自动再次创建新会话。你不能在你的 django 应用程序中做任何事情。用户必须自己从 Kerberos 注销，因为 Kerberos 可能同时用于在其他服务/应用程序中对用户进行身份验证。

# memcached - 使用 Finagle 的 Memcached 集群

> ID：12588111
> 
> 赞同：0
> 
> 时间：2012-09-25T17:29:41.453
> 
> 标签：memcached, finagle

如何构建 memcached 服务器集群并使用 finagle 访问它。ct 貌似ServerSet和ZooKeeper可以用来搭建集群。但我有几个问题。

1 将密钥分发到集群中的 memcached 服务器的算法是什么。我可以改变它吗？2 finagle如何检测memcached服务器故障以及故障转移是如何完成的。看起来一切都是从客户端完成的。在服务器端不需要做任何事情。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T00:08:28.047

1.  用于分发密钥的默认算法是 Ketama 算法。[查看代码](https://github.com/twitter/util/blob/master/util-hashing/src/main/scala/com/twitter/hashing/KetamaDistributor.scala) 您不能轻易更改算法。

2.  有不同的算法可以检测不同类型的故障：

    *   failFast：如果断开连接，我们将服务器从池中逐出并启动后台进程以重新连接到它
    *   重试：如果执行操作失败，我们可以重试特定次数的尝试（可能使用指数退避）
    *   timeout（不同级别），无需解释
    *   平衡：基于每个主机的最少待处理请求数

# ios - 动画正在阻止 touchesBegan

> ID：12588114
> 
> 赞同：0
> 
> 时间：2012-09-25T17:29:56.657
> 
> 标签：ios, cocoa-touch, touchesbegan

我有这个代码：

```
- (void)touchesBegan:(NSSet*)touches withEvent:(UIEvent*)event
{
    MainGame *newview = [[MainGame alloc] initWithNibName:@"MainGame" bundle:nil];
    newview.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
    [self presentModalViewController:newview animated:YES];
} 
```

当我触摸屏幕时，它用于切换到名为 MainGame 的视图，但有时当我触摸屏幕时没有任何反应。

我想说的是，我的 touchesBegan 只是有时会收到触摸，其他时候会被忽略。

除了这段代码，我还运行了大约 1 - 4 个 UIView 动画，它们由以下人员设置：

[UIView animateWithDuration: ... ];

但是，如果我删除动画，它将始终识别 touchesBegan。

那么为什么我的动画会阻止 touchesBegan 被识别，我该如何阻止这种情况发生呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:34:38.957

使用 UIView 方法：

```
animateWithDuration:delay:options:animations:completion: 
```

并将选项设置为：

```
UIViewAnimationOptionAllowUserInteraction 
```

这应该为你做。

# python - 如何检查 raw_input() 是否来自 Python 中的键盘

> ID：12588117
> 
> 赞同：3
> 
> 时间：2012-09-25T17:30:10.553
> 
> 标签：python, raw-input

`stdin`我有一个 Python 脚本，当您使用键盘响应提示时，该脚本需要抑制这种回声。

使用键盘时，可以用VT100控制码上移一行，清空一行，再上移一行（这样输出就清空了新的空行）。

但是，当输入来自文件时，此代码会弄乱输出并最终清除一行有效输出（即，`cat test | myscript.py`因为在这种情况下，stdin 显然不会向 stdout 回显任何内容。

我无法控制输入是如何发送到脚本的，也不知道用户会使用键盘还是文件。

我有什么方法可以检查 raw_input() 的输出，如果输入来自键盘，则只运行 VT100 控制代码？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T17:34:35.523

您想要的功能是文件句柄上的 isatty（“是 TTY”）。您可以根据需要在 sys.stdin、sys.stdout 或 sys.stderr 上对其进行测试。

```
>>> import sys
>>> sys.stdin.isatty()
True 
```

顺便说一句，这也是 Python 正在做的事情来检测是否显示交互式提示（只需尝试 cat | python）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T17:38:48.423

[“……压制……的回声`stdin`”](http://docs.python.org/library/termios.html#example)

> 这是一个在关闭回显的情况下提示输入密码的功能......

# charts - 如何确定折线图原点的像素位置？

> ID：12588118
> 
> 赞同：1
> 
> 时间：2012-09-25T17:30:15.737
> 
> 标签：charts, javafx-2, linechart

JavaFX LineChart 由绘图区域和轴组成。由于坐标区渲染使用了一些显示空间，因此折线图中原点的位置不是 (0, 0)。如何获得相对于折线图本身位置的这个位置？

我想计算绘图区域中一个点相对于折线图位置的位置。x 轴和 y 轴的`getDisplayPosition`方法提供了相对于原点的方法，但我看不到获取原点位置的明显方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T12:15:32.467

`axis.getDisplayPosition(val)`方法提供给定轴`val`在绘图区域中相对于绘图区域左上角的像素位置。您可以使用 getDisplayPosition() 方法计算任意点相对于折线图原点的位置。请记住，当调整折线图的大小时，这些像素位置会有所不同。

```
@Override
public void start(Stage stage) {
    stage.setTitle("Line Chart Sample");
    //defining the axes
    final NumberAxis xAxis = new NumberAxis();
    final NumberAxis yAxis = new NumberAxis();
    xAxis.setLabel("Number of Month");
    //creating the chart
    final LineChart<Number, Number> lineChart = new LineChart<Number, Number>(xAxis, yAxis);

    lineChart.setTitle("Stock Monitoring, 2010");
    //defining a series
    XYChart.Series series = new XYChart.Series();
    series.setName("My portfolio");
    //populating the series with data
    series.getData().add(new XYChart.Data(-1, 4));
    series.getData().add(new XYChart.Data(0, 2));
    series.getData().add(new XYChart.Data(1, -2));
    series.getData().add(new XYChart.Data(5, 1));

    Scene scene = new Scene(lineChart, 800, 400);
    lineChart.getData().add(series);

    System.out.println("");
    stage.setScene(scene);
    stage.show();

    System.out.println("Points in linechart  ->   Pixel positions relative to the top-left corner of plot area: ");
    System.out.println("(0,0)                ->   " + getFormatted(xAxis.getDisplayPosition(0), yAxis.getDisplayPosition(0)));
    // Same as
    // System.out.println("(0,0) " + getFormatted(xAxis.getZeroPosition(), yAxis.getZeroPosition()));
    System.out.println("(-1,4)               ->   " + getFormatted(xAxis.getDisplayPosition(-1), yAxis.getDisplayPosition(4)));
    System.out.println("(1,-2)               ->   " + getFormatted(xAxis.getDisplayPosition(1), yAxis.getDisplayPosition(-2)));
    System.out.println("(-1.5,5) origin of plot area ->   " + getFormatted(xAxis.getDisplayPosition(-1.5), yAxis.getDisplayPosition(5)));

    System.out.println("Note: These pixel position values will change when the linechart's size is \n changed through window resizing for example.");
}

private String getFormatted(double x, double y) {
    return "[" + "" + x + "," + y + "]";
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-18T09:48:15.520

更好的观察方法是通过如下`chart.lookup`命令获取绘图区域：

```
//gets the display region of the chart
Node chartPlotArea = chart.lookup(".chart-plot-background");
double chartZeroX = chartPlotArea.getLayoutX();
double chartZeroY = chartPlotArea.getLayoutY(); 
```

# java - 将数据结构初始化为具有混合数据类型的常量值

> ID：12588121
> 
> 赞同：4
> 
> 时间：2012-09-25T17:30:31.010
> 
> 标签：java

有没有办法在Java中将数据结构初始化为常量值？我搜索了高低，找不到任何这样的技术。我特别想初始化一个包含混合数据类型的类，例如 String 和 int。

```
class xyz {
      String a;
      int    b;
}

static final xyz example1 = { "string value", 42 };    // This doesn't work.

static final xyz[] example2 = { { "value a", 42 }, { "value b", 43 } };  // this also doesn't work 
```

我可以初始化 String 数组，甚至是 String 的二维数组，但由于某种原因，我无法初始化记录结构或记录结构数组。我在 Delphi 中经常这样做，发现没有这个功能很难生活。

好吧，我已经编程了大约 40 年，所以我并不是一个新手。我需要知道这样的事情是否可行。我确实希望将常量数据嵌入到我的应用程序中，而不是从文件中读取，并且使用赋值语句来设置数据类型违背了将它们声明为常量（最终）的目的。

感谢您的任何建议或意见。我真的很想为这个问题找到一个好的解决方案，因为我有很多 Pascal 代码要转换为 Java，而且我不想重新设计所有的数据结构。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-25T17:41:24.397

如果您不想使用其他答案中建议的构造函数或静态块，则可以使用[双括号初始化语法](https://stackoverflow.com/questions/1958636/what-is-double-brace-initialization-in-java)：

```
static final xyz example1 =
  new xyz() {{ a = "string value"; b = 42; }}; 
```

请注意，它创建了一个匿名类。
您的第二个示例如下所示：

```
static final xyz[] example1 = new xyz[] {
  new xyz() {{ a = "value a"; b = 42; }},
  new xyz() {{ a = "value b"; b = 43; }}
}; 
```

但是，如果您有权访问`xyz`该类，则添加一个带有两个参数的构造函数将更具可读性并且（稍微）更有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T17:31:43.490

一种方法是为`xyz`类编写构造函数来实现你想要的。

```
class xyz {
      String a;
      int    b;

         xyz(String tempStr, int tempInt)
              {
            this.a = tempStr;
            this.b = tempInt;
             }
}

static final xyz example1 = new xyz("String value",  42); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T17:45:55.133

您可以为此使用[枚举](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)

```
enum xyz {
    VALUE_A("value a", 42), VALUE_B("value b", 43);

    String a;
    int b;

    xyz(String str, int value) {
        a = str;
        b = value;
    }

    static EnumSet<xyz> bothValues = EnumSet.of(xyz.VALUE_A, xyz.VALUE_B);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T17:33:11.930

您可以编写构造函数`xyz(String,int)`或使用默认构造函数并初始化`static`块中的值：

```
static final xyz example1 = new xyz();
static { 
  example1.a = "string value";
  example1.b = 42;
} 
```

注意：您应该可以访问初始化类中的字段。

另请注意： if`xyz`是一个内部类 - 您可能需要将其声明`static`为上述代码才能工作。

* * *

PS java约定使用大写字母作为类名的第一个字母，所以它可能应该重命名为`Xyz`

# asp.net-mvc - 如何使用 Telerik MVC Window 延迟内容加载直到它可见？

> ID：12588124
> 
> 赞同：0
> 
> 时间：2012-09-25T17:30:41.727
> 
> 标签：asp.net-mvc, telerik, telerik-mvc

```
 WindowBuilder dialog = Html.Telerik().Window().Name("win")
        .Visible(false)
        .Modal(true)
        .LoadContentFrom("someaction", "somecontroller");

    dialog.Render(); 
```

前面的代码使窗口在加载包含页面时加载内容。有没有办法延迟内容加载直到它可见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:26:55.953

您必须手动加载内容；监听事件：[http](http://demos.telerik.com/aspnet-mvc/razor/window/clientsideevents) ://demos.telerik.com/aspnet-mvc/razor/window/clientsideevents并将内容附加到窗口的内部元素（不确定是否有可以设置 HTML 的属性... ）。

# php - news.reads facebook 上的 php sdk - 无法发布

> ID：12588127
> 
> 赞同：1
> 
> 时间：2012-09-25T17:30:51.790
> 
> 标签：php, facebook

我试图通过 news.reads 动作发布一个动作，但我被卡住了。

发送 $facebook->api 之后-它喜欢给我一个“退出”之类的东西，在此行之后没有响应。

编码：

```
 <?php
error_reporting(E_ALL);
ini_set('display_errors', '1');
ob_start();
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="he-IL">
    <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# 
                  article: http://ogp.me/ns/article#">
     <meta property="og:type" content="article" /> 
  <meta property="fb:app_id" content="306597542762982" /> 
  <meta property="og:url"    content="http://v2.raal.co.il/index.php" /> 
  <meta property="og:title"  content="הצצה נדירה: יחידת אגוז, קומנדו היבשה של צהל" /> 
  <meta property="og:description" content="יחידת אגוז התאמנה השבוע באחד המתארים הקשים ביותר, מתאר ה..." /> 

     <meta property="og:site_name"            content="פורטל רעל">

     <meta property="article:published_time"  content="DateTime"> 
     <meta property="article:modified_time"   content="DateTime"> 
     <meta property="article:expiration_time" content="DateTime">
     <meta property="article:author"          content="URL to Author object">
     <meta property="article:section"         content="Section of article">
     <meta property="article:tag"             content="Keyword">
 </head>

    <body>

<?Php
//uses the PHP SDK.  Download from https://github.com/facebook/php-sdk
require 'src/facebook.php';

$facebook = new Facebook(array(
  'appId'  => '306597542762982',
  'secret' => '88XX7f1',
));

$user = $facebook->getUser();
if ($user) {
  try {
    // Proceed knowing you have a logged in user who's authenticated.
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
  }
}

if (!$user) {
  $loginUrl = $facebook->getLoginUrl();
  header("Location: " . $loginUrl);
}
    //echo "<script type='text/javascript'>top.location.href = '$url';</script>";

$params = array (
  'article' => 'http://v2.raal.co.il/',
  'access_token' => $facebook->getAccessToken()
);

$out = $facebook->api( '/me/news.reads','post', $params);
var_dump($out);

   ?>

  </body>
</html> 
```

我得到回应：1 2（打印 1；打印 2；）

而 print_r($out) 则返回 null。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T13:43:42.500

第一：文章拼写错误（artice），你检查了吗？

第二：您要发布的网址不是文章，您必须在其中添加 og:tags ，看[这里](https://developers.facebook.com/docs/opengraph/objects/builtin/#article)。

第三：你有 publish_stream 权限吗？

您可以使用[Graph API Explorer](https://developers.facebook.com/tools/explorer?method=GET&path=100002076768728?fields=id,name)检查输出吗？

# jsf-2 - CommandButton 未触发 ActionListener

> ID：12588131
> 
> 赞同：1
> 
> 时间：2012-09-25T17:31:05.623
> 
> 标签：jsf-2, primefaces

好的，我这里有问题。我有一个 baseTemplate.xhtml：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:p="http://primefaces.org/ui"
  xmlns:f="http://java.sun.com/jsf/core">

<h:head>
    <!-- Incluir Scripts e Folhas de Estilo comuns a todas as páginas do sistema -->
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />        
    <h:outputStylesheet library="css" name="default.css"/>
    <h:outputStylesheet library="css" name="cssLayout.css"/>
    <h:outputStylesheet library="css" name="rodape.css"/>

    <title>SisEventos - Sistema de Gerenciamento de Eventos</title>
</h:head>
<h:body>
    <div class="estrutura">
        <div class="top">
        </div>

        <div class="menu">
            <!-- <ui:insert name="menu"> -->
            <h:form id="frmMenu"> 
                <p:menubar autoDisplay="true" >
                    <p:menuitem value="Home" icon="ui-icon-home" url="/paginas/home.xhtml" /> 

                    <p:submenu label="Manutenção" icon="ui-icon-person"> 
                        ...
                    </p:submenu> 

                    <p:submenu label="Atividades" > 
                        ...
                    </p:submenu> 

                    <p:submenu label="Relatórios" > 
                        ...
                    </p:submenu> 

                    <p:submenu label="Evento" > 
                        ...
                    </p:submenu> 

                    <p:menuitem value="Contato" /> 
                </p:menubar>
            </h:form>
        </div>

        <div class="left_content">
            <ui:insert name="content">
            </ui:insert>
        </div>

        <div class="bottom">
           ...
        </div>
    </div>  
</h:body> 
```

和这样的客户页面：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
            xmlns:h="http://java.sun.com/jsf/html"
            xmlns:f="http://java.sun.com/jsf/core"
            xmlns:p="http://primefaces.org/ui"
            template="./../../resources/templates/baseTemplate.xhtml">

<ui:define name="content">
    <!-- Configuração do idioma de exibição do scheduler -->
    <h:outputScript library="scripts" name="primefaces-locale.js"/>
    <p:fieldset legend="Gerenciar eventos">

        <h:form id="frmEventos">
            <!-- Exibição de mensagens gerais -->
            <p:growl id="gMessages" sticky="false" globalOnly="true" />

            <p:schedule id="schedEventos" 
                        value="#{eventoBeanTeste.listaEventos}" 
                        widgetVar="schEventos" locale="pt">
                <p:ajax event="eventSelect" 
                        listener="#{eventoBeanTeste.onEventSelect}" 
                        update="frmEventos"
                        oncomplete="dlgNovo.show();"/>
                <p:ajax event="dateSelect" 
                        listener="#{eventoBeanTeste.onDateSelect}"
                        update="frmEventos"
                        oncomplete="dlgNovo.show();"/>
            </p:schedule>

            <p:dialog id="dlgNovoEvento" 
                      widgetVar="dlgNovo" 
                      modal="true" 
                      header="Novo evento"
                      resizable="false" 
                      draggable="true">
                <p:panelGrid id="pgNovoEvento" columns="1" styleClass="gridNoLine">
                    <p:row>
                        <p:messages id="mNovoMessages" redisplay="false"/>
                    </p:row>

                    ...

                    <p:row>
                        <p:commandButton value="Cancelar"
                                         immediate="true"
                                         onclick="dlgNovo.hide();"/>

                        <p:commandButton id="cbNovoSalvar" 
                                         value="Salvar" 
                                         actionListener="#{eventoBeanTeste.cadastrarEvento}"
                                         oncomplete="schEventos.update(); handleAction(xhr, status, args);" 
                                         update="@form frmEventos:gMessages"/>
                    </p:row>
                </p:panelGrid>
            </p:dialog>
        </h:form>

    </p:fieldset>

    <script type="text/javascript">
        function handleAction(xhr, status, args){
            if(args.close){
                dlgNovo.hide();
            }
        }
    </script>
</ui:define> 
```

bean中的一个动作如下：

```
@ManagedBean(name = "eventoBeanTeste")
@SessionScoped
public class EventoBeanTeste {

    ...

    // Listener de cadastro de evento
    public void cadastrarEvento(ActionEvent e) {
        MessageHelper.showGlobalMessage("Fired!", FacesMessage.SEVERITY_INFO);
    }
    ...
} 
```

我的问题是：没有调用 cadastrarEvento 动作监听器！似乎命令按钮不起作用！可能有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-29T19:50:56.657

我了解到将表单放入对话框中是一种很好的做法。如果你这样做，你应该小心不要嵌套表格。所以把它放在你当前的表单“frmEventos”之外。

我猜现在将调用 actionlistener。

看看这个线程：[Primefaces Dialog](https://stackoverflow.com/questions/14381602/primefaces-dialog-commandbutton?answertab=active#tab-top)

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:p="http://primefaces.org/ui"
        template="./../../resources/templates/baseTemplate.xhtml">

<ui:define name="content">
    <!-- Configuração do idioma de exibição do scheduler -->
    <h:outputScript library="scripts" name="primefaces-locale.js"/>
    <p:fieldset legend="Gerenciar eventos">

            <p:dialog id="dlgNovoEvento" 
                  widgetVar="dlgNovo" 
                  modal="true" 
                  header="Novo evento"
                  resizable="false" 
                  draggable="true">
                <h:form>
                     <p:panelGrid id="pgNovoEvento" columns="1" styleClass="gridNoLine">
                         <p:row>
                             <p:messages id="mNovoMessages" redisplay="false"/>
                         </p:row>

                          ...

                         <p:row>
                             <p:commandButton value="Cancelar"
                                         immediate="true"
                                         onclick="dlgNovo.hide();"/>

                             <p:commandButton id="cbNovoSalvar" 
                                     value="Salvar" 
                                     actionListener="#{eventoBeanTeste.cadastrarEvento}"
                                     oncomplete="schEventos.update(); handleAction(xhr, status, args);" 
                                     update="@form frmEventos:gMessages"/>
                         </p:row>
                 </p:panelGrid>
            </h:form>
        </p:dialog>

        <h:form id="frmEventos">
            <!-- Exibição de mensagens gerais -->
            <p:growl id="gMessages" sticky="false" globalOnly="true" />

            <p:schedule id="schedEventos" 
                    value="#{eventoBeanTeste.listaEventos}" 
                    widgetVar="schEventos" locale="pt">
                <p:ajax event="eventSelect" 
                    listener="#{eventoBeanTeste.onEventSelect}" 
                    update="frmEventos"
                    oncomplete="dlgNovo.show();"/>
                <p:ajax event="dateSelect" 
                    listener="#{eventoBeanTeste.onDateSelect}"
                    update="frmEventos"
                    oncomplete="dlgNovo.show();"/>
            </p:schedule>

        </h:form>

    </p:fieldset>

    <script type="text/javascript">
        function handleAction(xhr, status, args){
            if(args.close){
                dlgNovo.hide();
            }
        }
    </script>
</ui:define> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-25T18:42:43.767

将命令按钮更改为 并从支持 bean 的函数中删除 ActionEvent 参数。`<p:commandButton id="cbNovoSalvar" value="Salvar" action="#{eventoBeanTeste.cadastrarEvento}"
update="@form frmEventos:gMessages"/>`

# iphone - 苹果服务器上的sqlite服务器？

> ID：12588132
> 
> 赞同：0
> 
> 时间：2012-09-25T17:31:08.310
> 
> 标签：iphone, xcode, sqlite

我正在做 iphone 开发的 sqlite，现在 db 文件在我的 macbook 上。我的问题是当我将它提交到应用商店时，数据库所在的位置？它是在苹果的服务器上还是在每个用户的设备上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:35:20.887

Apples 服务器上没有数据。数据库将驻留在文档目录或应用程序包中（您也可以使用 Web 服务访问数据库中的数据）。也许你应该看看[SQLite 101 for iPhone Developers: Creating and Scripting](http://www.raywenderlich.com/902/sqlite-101-for-iphone-developers-creating-and-scripting)和[SQLite 101 for iPhone Developers: Making Our App](http://www.raywenderlich.com/913/sqlite-101-for-iphone-developers-making-our-app)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T17:47:46.943

只需轻轻一点！如果它在苹果服务器上，并且如果一个新手程序员在生成他的测试数据时会编写一个无限循环会发生什么？:)

它在您的手机/设备中。

# silverlight - 为什么在 WP7 中绑定需要这么长时间？我可以看到它发生

> ID：12588143
> 
> 赞同：0
> 
> 时间：2012-09-25T17:31:34.737
> 
> 标签：silverlight, windows-phone-7, binding

`searchResults`如果出现页面，我正在填充列表`Loaded`。

如果这个加载需要 50 毫秒，那么当我通过导航回到它来加载页面时，我会`searchResults`在绑定完成之前看到前一个页面的几分之一秒。

a) 在什么情况下我可以在页面变得可见之前绑定控件？（正在导航回页面，因此不会再次调用构造函数。）

b) 有什么方法可以强制在 Loaded 事件代码中发生绑定？我注意到`list1.ItemSource=x`绑定似乎是在事件函数超出范围之后完成的。好像它们是在 OnIdle 中完成的。

b) 的更多细节

如果我运行以下代码：

```
(ItemsControl) lstSearchResults.ItemSource = searchResults;
int iCount = lstSearchResults.Items.Count 
```

`iCount`无论是否有项目，都将为零`searchResults`。

有没有办法立即绑定`lstSearchResults`到`searchResults`该填充？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:33:03.200

1) 将您的 DataContext 关联到您的 viewModel 并使用在 UI 本身上绑定列表`ItemsSource={Binding searchResults}"`

2) 在 Loaded 事件上做`lstSearchResults.ItemSource = searchResults;`

请注意，如果您的列表是动态的，建议将 lis 设置为`ObservableCollection`

如果 searchResults 是可变高度项，则 UI 绑定可能需要一些时间，具体取决于`ItemTemplate`. 为了解决这个问题，应该使用已经是 ListBox Control 一部分的 Virtualizing StackPanel。因此，如果您已经在使用列表框，那么在您的情况下出现问题的可能性很小。有关更多详细信息，您可以浏览此[资源](http://shawnoster.com/blog/post/Improving-ListBox-Performance-in-Silverlight-for-Windows-Phone-7-Data-Virtualization.aspx)。我希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T18:45:38.793

1.  正在调用 OnNavigatedTo 事件，您可以尝试在那里进行工作
2.  我不完全确定您的意思，但如果您已经在可观察集合和列表框之间进行了绑定，那么您对可观察集合所做的更改将反映在列表框中。

# html - 静态导航栏下的图像不起作用

> ID：12588146
> 
> 赞同：2
> 
> 时间：2012-09-25T17:31:37.543
> 
> 标签：html, css

检查：[www.trillie.nl](http://www.trillie.nl)

当您滚动时，您会看到图像在导航栏上方而不是在导航栏下方，就像其他内容一样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T17:34:27.407

使用`z-index:9999;` 你的问题解决了

```
#navigation {
    background-color: rgba(1, 1, 1, 0.8);
    box-shadow: 0 0 8px 0 #000000;
    color: rgba(1, 1, 1, 0.8);
    height: 35px;
    padding-top: 15px;
    position: fixed;
    top: 0;
    width: 100%;
    z-index: 9999;   // here is 
} 
```

![在此处输入图像描述](../Images/8b708f5eaf9669bfaef393ecc2ab9700.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T09:04:30.080

您需要做的是使用高于`z-index`图像`#navbar`，因此它将始终高于图像，例如导航栏`z-index:5`和图像`z-index:4`。

# sql - 如何使 Microsoft BCP 导出空字符串而不是 NUL 字符？

> ID：12588149
> 
> 赞同：15
> 
> 时间：2012-09-25T17:31:39.643
> 
> 标签：sql, tsql, bcp

我正在努力让这个 bcp 工具以特定的方式工作。-c 开关应该使用字符导出，但由于某种原因，Notepad++ 中显示了一个奇怪的字符，就像它是 UNICODE 或其他格式一样。

我想得到那个字符，它是数据库中的一个空字符串，作为一个空字符串导出到文本文件中。你是怎样做的？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-25T17:31:39.643

好吧，在浏览了网络之后，这就是我发现的。想把它放在 SO 中，以便更多人可以使用它。

[http://www.techtalkz.com/microsoft-sql-server/147106-how-export-empty-strings-via-bcp.html](http://www.techtalkz.com/microsoft-sql-server/147106-how-export-empty-strings-via-bcp.html)

> 但是当我运行 bcp 时，使用 ASCII“NUL”字符 (0x0) 将空字符串写入文本文件。相反，我希望该字段填充空白（0x20）。

解决方案：

> 在文本文件中，当您批量输入数据时，空字符串被解释为 NULL。NUL 字符被解释为空字符串，因此具有一致性。但是，如果您将数据导出到另一个系统，这并没有多大帮助....

`NULLIF`只需将数据库中可能为空的字段包裹起来，然后将其捕获`''`并替换为`NULL`. 这将被转换为 ^^values^^^^more values^^and more^^ 所以你得到带有空格而不是 NUL 字符的双分隔符。

例如：

```
...
NULLIF(pri.InstanceName, '') as PerformanceInstanceName,
... 
```

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-06T17:04:38.383

只是后续...

上面的`NULLIF`解决方案在 Microsoft SQL 中运行良好，但对于几乎适用于任何数据库的更标准化的解决方案，您应该尝试`COALESCE`。

语法非常相似：

```
COALESCE(pri.InstanceName, '') as PerformanceInstanceName 
```

# matlab - 我想在matlab中计算两行的平均值

> ID：12588152
> 
> 赞同：0
> 
> 时间：2012-09-25T17:31:42.090
> 
> 标签：matlab, mean

我在 matlab 中有一个 1028 x 18 矩阵。我想在 Matlab 中按列值、第 3 行和第 4 行等计算第 1 行和第 2 行的平均值，并得到一个具有平均值的新矩阵。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T17:35:17.700

我想你想计算每对行的列平均值。将数组重新整形为 2 x 18*1028/2，计算平均值（按列操作），并将结果重新整形为 1028/2 x 18：

```
>> x = 兰德(1028, 18);
>> 结果 = 重塑(x, 2, 1028/2*18);
>> 结果 = 平均值（结果）；
>> 结果 = 重塑(结果, 1028/2, 18);

```

与行对上的 for 循环相比，演示矢量化解决方案的速度的快速测试：

```
>> x = 兰德(1028, 18);
>> 抽动; 结果1 = 零（1028/2, 18）；对于 ii = 1:1028/2；结果1(ii,:) = 平均值(x((2*ii-1):(2*ii),:)); 结尾; 目录；
经过的时间是 0.022432 秒。
>> 抽动; 结果2 = 重塑(x, 2, 1028/2*18); 结果2 =平均值（结果2）；结果 2 = 重塑（结果 2、1028/2、18）；目录；
经过的时间是 0.000388 秒。

```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T18:50:32.493

I think what you are looking for is:

```
x = rand( 1028, 18 );
meanx = ( x(1:2:end,:) + x(2:2:end,:)) / 2; 
```

After running this, `meanx` will be a [514 x 18] matrix.

The first row of `meanx` is the average of rows 1 and 2 in `x`.

The second row of `meanx` is the average of rows 3 and 4 in `x`.

The third row of `meanx` is the average of rows 5 and 6 in `x`.

**EDIT**:

If you also want to exclude some of the rows from the averaging procedure based on the value of the first row, then you can add the following:

```
dx = diff(x(:,1));

goodrows = (dx(1:2:end) == 0);  %find row-pairs for which the first elements match
badrows = ~goodrows;

goodmeans = meanx(goodrows,:)  %average rows with matching first element
badmeans = meanx(badrows,:)    %average rows with non-matching first element 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T19:02:04.150

以 b3 和 cjh 的出色答案为基础。这个是最快的

```
m=1028;
n=18;
D=rand(m, n);

% compute mean for two neighboring rows
D=reshape(D, 2, m/2*n);
D=(D(1,:)+D(2,:))/2;
D=reshape(D, m/2, n); 
```

在 for 循环中测量 2000 次迭代

```
b3         Elapsed time is 0.264215 seconds.
cjh        Elapsed time is 0.134812 seconds.
my version Elapsed time is 0.087994 seconds. 
```

很清楚为什么。b3 使用函数均值，如果我们只想计算两个数字的平均值，这对性能不太好。另一方面，巧妙的 reshape 确保我们在读取数据期间不必像 cjh 的版本那样跳过整个内存。因此，结合两种解决方案中最好的一个可以得到最好的结果。

# oop - 为什么 OOP 中的一个类有一个选项被标记为从不继承祖先？

> ID：12588158
> 
> 赞同：5
> 
> 时间：2012-09-25T17:32:02.800
> 
> 标签：oop, inheritance

C# 中的“sealed”关键字，Java 中的 Final。

因为我几乎从不创建任何图表，而且我只使用已经完成的类（来自框架），所以多年后我仍然不知道为什么有人会“锁定”一个类，所以它永远不会被扩展/继承。

它是有益的？是否有任何危害使所有类都可以从继承中扩展而放弃“密封”的可能性？

很抱歉在 2012 年问这个问题，OOP 在哪里是微不足道的，但我希望得到一个很好的解释和/或一个很好的阅读来源！因为对我来说毫无用处，我不敢相信这只是一个简单的概念。

但是在我搜索的任何地方，答案都是一样的：“标记一个类，防止它被其他人继承。”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T17:42:06.723

1.  **安全**性 - 继承类可能有权访问基类的内部部分，从而破坏封装

2.  保留**合同**- 继承类可能会破坏基类提供的合同。参见 Liskov 替换原则

3.  **Immutability** - 2.的特例 - 继承类可以将可变字段引入不可变类

4.  **性能**- 虚拟机可以积极优化这些类，例如假设方法永远不会被覆盖，避免虚拟调用

5.  **简单**- 实现类似`equals()`的方法要简单得多，而无需担心继承

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-14T15:12:03.400

原因是，如果您允许子类化，并且对子类可以覆盖的方法没有限制，则对保留*其*行为的基类进行更新仍然可以破坏子类。换句话说，从不是专门设计为扩展的类继承是不安全的（通过将特定方法指定为可覆盖并使所有其他方法`final`。）这被称为脆弱基类问题 - 请参阅[本文](http://www.cs.cmu.edu/~aldrich/papers/selective-open-recursion.pdf)以获取示例，并且[本文](http://www.cas.mcmaster.ca/~emil/Publications_files/MikhajlovSekerinski98FragileBaseClassProblem.pdf)对这个问题进行了更深入的分析。

如果基类不是为继承而设计的，并且它是公共 API（可能是库）的一部分，那么您现在就遇到了严重的麻烦。您无法控制谁对您的代码进行子类化，并且您无法仅通过查看基类来知道更改对子类是否安全*。***底线是您要么设计无限继承，要么完全禁止它。**

* * *

请注意，可能有*有限*数量的子类。这可以通过私有构造函数和内部类来实现：

```
class Base {
    private Base() {}

    (public|private) static final class SubA extends Base { ... }
    (public|private) static final class SubB extends Base { ... }
    (public|private) static final class SubC extends Base { ... }
} 
```

内部类可以访问私有构造函数，但顶级类没有，因此您只能从内部对其进行子类化。这允许您表达“Base 类型的值可以是 SubA OR SubB OR SubC”的概念。这里没有危险，因为 Base 通常是空的（您并没有*真正*从 Base 继承任何东西）并且所有子类都在您的控制之下。

您可能会认为这是代码异味，因为您知道子类的类型。但是您应该意识到，这种实现抽象的替代方式是对接口的补充。当子类数量有限时，添加新函数很容易（处理固定数量的子类），但很难添加新类型（每个现有方法都需要更新以处理新子类）。当您使用接口或允许无限子类化时，添加新类型很容易（实现固定数量的方法），但很难添加新方法（您需要更新每个类）。一个人的优点就是另一个人的缺点。有关该主题的更详细讨论，请参阅[On Understanding Data Abstraction, Revisited](http://www.cs.utexas.edu/~wcook/Drafts/2009/essay.pdf)。**编辑：**我的错; 我链接的论文讨论了不同的二元性（ADT 与对象/接口）。我真正想到的是[Expression Problem](http://en.wikipedia.org/wiki/Expression_problem)。

* * *

There's less severe reasons to avoid inheritance as well. Suppose you start with class A, then implement some new feature in subclass B, and later on add another feature in subclass C. Then you realize you need both features, but you can't create a subclass BC that extends both B and C. It's possible to get bitten by this even if you design for inheritance and prevent the fragile base class problem. Other than the pattern I showed above, [most uses of inheritance are better replaced with composition](https://stackoverflow.com/questions/49002/prefer-composition-over-inheritance) - for example, using the [Strategy Pattern](http://en.wikipedia.org/wiki/Strategy_pattern) (or simply using high-order functions if your language supports it.)

# javascript - Twitter Bootstrap - 如何呈现打开的导航栏下拉菜单？

> ID：12588160
> 
> 赞同：3
> 
> 时间：2012-09-25T17:32:16.327
> 
> 标签：javascript, twitter-bootstrap, pug

我在导航栏上有下拉列表。我正在使用 Jade 模板引擎，这就是为什么我的代码是：

```
a.dropdown-toggle(href='#', data-toggle='dropdown') Login
ul.dropdown-menu
  li
    form.well(action="/login", method="post")
      label Your e-mail:
      input.span3(type='text', placeholder='e-mail', name="username")
      label Your password:
      input.span3(type='password', placeholder='*************', name="password")
      button.btn.btn-primary(type='submit') Login now » 
```

我想打开这个下拉列表以显示登录错误。我怎样才能做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T19:24:54.060

我不熟悉 Jade 模板引擎 - 但是，如果您添加`class="open"`到包含元素（摘录中未提供），下拉菜单将呈现打开状态。

我想它看起来像：

```
li.dropdown.open
  a.dropdown-toggle(href='#', data-toggle='dropdown') Login
  ul.dropdown-menu
    li
      form.well(action="/login", method="post")
        label Your e-mail:
        input.span3(type='text', placeholder='e-mail', name="username")
        label Your password:
        input.span3(type='password', placeholder='*************', name="password")
        button.btn.btn-primary(type='submit') Login now » 
```

# sass - SASS 如何从变量中获取值或使用列表等变量？

> ID：12588163
> 
> 赞同：1
> 
> 时间：2012-09-25T17:32:25.050
> 
> 标签：sass

是否可以从变量中获取特定值？我一直试图将我的变量作为一个列表，但我不断收到错误。

**首先，我有一个`@include();`这样的...**

```
@include myMixin (2px 4px 13px 0px); 
```

**然后我有一个这样的混合...**

```
@mixin($myVar){

} 
```

**从这里我有以下变量..`$myVar: $myVar;` 就像这样......**

```
@mixin($myVar){
  $myVar:$myVar;

 //when I do this I get an error in my sass watch
 @debug Second value is nth($myVar, 2);

 //This is how I want to use it...
 margin-right:nth($myVar, 2);
} 
```

**我的错误：**

*Sass 列表索引为 2，但“nth:”列表只有 1 项长：*

**概括：**

这种方法似乎不起作用，所以我在想也许有一种不同的方法可以做到这一点，我不想进入太多细节，因为还有很多其他事情正在发生。基本上我的最终目标是让一个变量等于一组值，并能够以某种方式获取/使用特定值。非常感谢任何帮助..提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:58:02.520

你有正确的想法：

```
@mixin myMixin($myVar){
    //when I do this I get an error in my sass watch
    @debug Second value is nth($myVar, 2);

    //This is how I want to use it...
    margin-right: nth($myVar, 2);
}
.test {
    @include myMixin(2px 4px 13px 0px);
} 
```

调试：第二个值为 4px

```
.test {
  margin-right: 4px;
} 
```

这里还有其他你没有展示的东西可能会搞砸吗？

# c# - 数据库不存在错误

> ID：12588165
> 
> 赞同：3
> 
> 时间：2012-09-25T17:32:34.017
> 
> 标签：c#, sql-server

当我进行数据库备份时，我收到数据库不存在的错误，但我可以很好地附加数据库，并且其他过程（如数据插入和更新）工作正常。但是当我进行数据库备份时，它会出现以下错误。

我显示错误屏幕截图和备份按钮代码

```
string cnstr="Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\fees_data.mdf;Integrated Security=True;User Instance=True;"

SqlConnection connect;
        connect = new SqlConnection(cnstr);
        connect.Open();
        if (txtdname.Text == "")
        { dname = "Default.bak"; }
        else
        { dname = txtdname.Text + ".bak"; }
        SqlCommand command;
        command = new SqlCommand(@"backup database fees_data to disk ='c:\DATABackup\" + dname + "'", connect);
        command.ExecuteNonQuery();
        connect.Close(); 
```

当我单击备份按钮时，我收到错误：

> “数据库‘fees_data’不存在。确保名称输入正确。BACKUP DATABASE 异常终止。”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T17:35:22.413

数据库名称可能与 .mdf 文件名不同。

运行此查询时会得到什么结果？

```
select name from sys.databases; 
```

从那里使用正确的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-21T07:55:50.563

而不是这段代码

```
SqlCommand command;
   command = new SqlCommand(@"backup database fees_data to disk ='c:\DATABackup\" + dname + "'", connect);
   command.ExecuteNonQuery(); 
```

使用下面写的代码

```
string fullPath= "";
 string executable = System.Reflection.Assembly.GetExecutingAssembly().Location;
 fullPath= (System.IO.Path.GetDirectoryName(executable));
 AppDomain.CurrentDomain.SetData("DataDirectory", fullPath);
 fullPath=fullPath+"\\fees_data.mdf";

 SqlCommand command;
 command = new SqlCommand(@"backup ['"+fullPath+"'] to disk ='c:\DATABackup\" + dname + "'", connect);
 command.ExecuteNonQuery(); 
```

# java - Java：码头错误 - 503

> ID：12588180
> 
> 赞同：0
> 
> 时间：2012-09-25T17:33:26.733
> 
> 标签：java, servlets, nullpointerexception, jetty

我有：

```
C:\jtty\WEB-INF\web.xml
           |
           |
         classes
           |------hello.war
           |------HelloWord.java
           |------HelloWord.class
           |------javax.servlet 
```

首先我在 WEB-INF 文件夹中创建文件 web.xml：

```
<web-app xmlns="http://java.sun.com/xml/ns/j2ee" version="2.4"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http:/java.sun.com/dtd/web-app_2_3.dtd">
  <servlet>
    <servlet-name>HelloWorldServlet</servlet-name>
    <servlet-class>HelloWorld</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>HelloWorldServlet</servlet-name>
    <url-pattern>/</url-pattern>
  </servlet-mapping>
</web-app> 
```

然后，创建文件夹“classes”，并创建文件 HelloWord.java

```
import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;

public class HelloWorld extends HttpServlet {
  public void doGet(HttpServletRequest request,
    HttpServletResponse response)
    throws ServletException,IOException {
     response.setContentType("text/html");
     PrintWriter pw = response.getWriter();
     pw.println("<html><head><title>Hello World</title></title>");
     pw.println("<body><h1>Hello World</h1></body></html>");
  }
} 
```

在 Windows 控制台中运行此命令：

C:\jtty\WEB-INF\classes>C:\Oracle\Java\jdk1.7.0\bin\javac -g -classpath ".;javax .servlet.jar" HelloWorld.java -verbose

之后 java-compiler 创建文件 HelloWord.class

此命令创建 hello.war

jar cvf hello.war 。

然后启动码头：

```
C:\jtty\WEB-INF\classes>C:\Oracle\Java\jdk1.7.0\bin\java -DDEBUG -jar c:\jetty-r
unner-7.0.0.RC2.jar hello.war
2012-09-25 10:23:37.765::INFO:  Logging to StdErrLog::DEBUG=false via org.eclips
e.jetty.util.log.StdErrLog
2012-09-25 10:23:37.765::INFO:  Runner
2012-09-25 10:23:37.765::DEBUG: Runner classpath []
2012-09-25 10:23:37.765::WARN:  No tx manager found
2012-09-25 10:23:37.796::DEBUG: Container org.eclipse.jetty.server.Server@428896
cf + HandlerCollection@15651229 as handler
2012-09-25 10:23:37.796::DEBUG: Container HandlerCollection@15651229 + ContextHa
ndlerCollection@5fc2ee8e as handler
2012-09-25 10:23:37.796::DEBUG: Container HandlerCollection@15651229 + DefaultHa
ndler@76bbddbf as handler
2012-09-25 10:23:37.796::DEBUG: Container HandlerCollection@15651229 + RequestLo
gHandler@28bf47df as handler
2012-09-25 10:23:37.812::DEBUG: Container org.eclipse.jetty.server.Server@428896
cf + SelectChannelConnector@0.0.0.0:8080 as connector
2012-09-25 10:23:37.828::DEBUG: Checking Resource aliases
2012-09-25 10:23:37.828::INFO:  Deploying file:/C:/jtty/WEB-INF/classes/hello.wa
r @ /
2012-09-25 10:23:37.843::DEBUG: Container ContextHandlerCollection@5fc2ee8e + We
bAppContext@6281635b@6281635b/,null as handler
2012-09-25 10:23:37.843::DEBUG: Container WebAppContext@6281635b@6281635b/,null,
file:/C:/jtty/WEB-INF/classes/hello.war + ErrorPageErrorHandler@32d9230a as erro
rHandler
[WebAppContext@6281635b@6281635b/,null,file:/C:/jtty/WEB-INF/classes/hello.war]
2012-09-25 10:23:37.843::DEBUG: Starting org.eclipse.jetty.server.Server@428896c
f
2012-09-25 10:23:37.843::INFO:  jetty-7.0.0.RC2
2012-09-25 10:23:37.859::DEBUG: Container org.eclipse.jetty.server.Server@428896
cf + qtp1533090852{8<=0<=0/254,-1} as threadpool
2012-09-25 10:23:37.859::DEBUG: Starting qtp1533090852{8<=0<=0/254,-1}
2012-09-25 10:23:37.859::DEBUG: STARTED qtp1533090852{8<=2<=8/254,0}
2012-09-25 10:23:37.859::DEBUG: Starting HandlerCollection@15651229
2012-09-25 10:23:37.875::DEBUG: Starting ContextHandlerCollection@5fc2ee8e
2012-09-25 10:23:37.875::DEBUG: Starting WebAppContext@6281635b@6281635b/,null,f
ile:/C:/jtty/WEB-INF/classes/hello.war
2012-09-25 10:23:37.875::DEBUG: Thread Context class loader is: ContextLoader@nu
ll([]) / sun.misc.Launcher$AppClassLoader@69adff28
2012-09-25 10:23:37.875::DEBUG: Parent class loader is: sun.misc.Launcher$AppCla
ssLoader@69adff28
2012-09-25 10:23:37.875::DEBUG: Parent class loader is: sun.misc.Launcher$ExtCla
ssLoader@1e4ad14c
2012-09-25 10:23:38.000::DEBUG: Set temp dir C:\temp\Jetty_0_0_0_0_8080_hello.wa
r____d40q3p
2012-09-25 10:23:38.109::DEBUG: Try webapp=file:/C:/jtty/WEB-INF/classes/hello.w
ar, exists=true, directory=false
2012-09-25 10:23:38.234::INFO:  Extract file:/C:/jtty/WEB-INF/classes/hello.war
to C:\temp\Jetty_0_0_0_0_8080_hello.war____d40q3p\webapp
2012-09-25 10:23:38.343::DEBUG: Extract jar:file:/C:/jtty/WEB-INF/classes/hello.
war!/ to C:\temp\Jetty_0_0_0_0_8080_hello.war____d40q3p\webapp
2012-09-25 10:23:38.453::DEBUG: Extracting entry = null from jar file:/C:/jtty/W
EB-INF/classes/hello.war
2012-09-25 10:23:38.593::DEBUG: webapp=file:/C:/temp/Jetty_0_0_0_0_8080_hello.wa
r____d40q3p/webapp/
**2012-09-25 10:23:38.718::WARN:  Failed startup of context WebAppContext@6281635b
@6281635b/,file:/C:/temp/Jetty_0_0_0_0_8080_hello.war____d40q3p/webapp/,file:/C:
/jtty/WEB-INF/classes/hello.war**
java.lang.NullPointerException
        at org.eclipse.jetty.webapp.WebInfConfiguration.findJars(WebInfConfigura
tion.java:588)
        at org.eclipse.jetty.webapp.WebInfConfiguration.preConfigure(WebInfConfi
guration.java:96)
        at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:339
)
        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLife
Cycle.java:56)
        at org.eclipse.jetty.server.handler.HandlerCollection.doStart(HandlerCol
lection.java:164)
        at org.eclipse.jetty.server.handler.ContextHandlerCollection.doStart(Con
textHandlerCollection.java:161)
        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLife
Cycle.java:56)
        at org.eclipse.jetty.server.handler.HandlerCollection.doStart(HandlerCol
lection.java:164)
        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLife
Cycle.java:56)
        at org.eclipse.jetty.server.handler.HandlerWrapper.doStart(HandlerWrappe
r.java:92)
        at org.eclipse.jetty.server.Server.doStart(Server.java:232)
        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLife
Cycle.java:56)
        at org.mortbay.jetty.runner.Runner.run(Runner.java:448)
        at org.mortbay.jetty.runner.Runner.main(Runner.java:587)
2012-09-25 10:23:40.390::DEBUG: STARTED WebAppContext@6281635b@6281635b/,file:/C
:/temp/Jetty_0_0_0_0_8080_hello.war____d40q3p/webapp/,file:/C:/jtty/WEB-INF/clas
ses/hello.war
2012-09-25 10:23:40.562::DEBUG: starting ContextHandlerCollection@5fc2ee8e
2012-09-25 10:23:40.625::DEBUG: STARTED ContextHandlerCollection@5fc2ee8e
2012-09-25 10:23:40.671::DEBUG: Starting DefaultHandler@76bbddbf
2012-09-25 10:23:40.734::DEBUG: starting DefaultHandler@76bbddbf
2012-09-25 10:23:40.796::DEBUG: STARTED DefaultHandler@76bbddbf
2012-09-25 10:23:40.843::DEBUG: Starting RequestLogHandler@28bf47df
2012-09-25 10:23:40.906::DEBUG: starting RequestLogHandler@28bf47df
2012-09-25 10:23:40.968::DEBUG: STARTED RequestLogHandler@28bf47df
2012-09-25 10:23:41.031::DEBUG: starting HandlerCollection@15651229
2012-09-25 10:23:41.078::DEBUG: STARTED HandlerCollection@15651229
2012-09-25 10:23:41.140::DEBUG: starting org.eclipse.jetty.server.Server@428896c
f
2012-09-25 10:23:41.265::DEBUG: Starting SelectChannelConnector@0.0.0.0:8080
2012-09-25 10:23:41.312::DEBUG: Starting org.eclipse.jetty.server.nio.SelectChan
nelConnector$1@29acfd6
2012-09-25 10:23:41.468::DEBUG: STARTED org.eclipse.jetty.server.nio.SelectChann
elConnector$1@29acfd6
2012-09-25 10:23:41.593::INFO:  Started SelectChannelConnector@0.0.0.0:8080
2012-09-25 10:23:41.640::DEBUG: STARTED SelectChannelConnector@0.0.0.0:8080
2012-09-25 10:23:41.703::DEBUG: org.eclipse.jetty.server.Server@428896cf STOPPED

 +-HandlerCollection@15651229 started
    +-ContextHandlerCollection@5fc2ee8e started
    |  **+-WebAppContext@6281635b@6281635b/,file:/C:/temp/Jetty_0_0_0_0_8080_hello
.war____d40q3p/webapp/,file:/C:/jtty/WEB-INF/classes/hello.war started
    |     +-null**
    +-DefaultHandler@76bbddbf started
    +-RequestLogHandler@28bf47df started
       +-null

2012-09-25 10:23:42.343::DEBUG: STARTED org.eclipse.jetty.server.Server@428896cf 
```

最后我看到了这个：

[http://xxx.xxx.xxx.xxx:8080/](http://xxx.xxx.xxx.xxx:8080/)

HTTP 错误：503

访问 / 时出现问题。原因：

```
Service Unavailable 
```

由码头提供支持：//

在控制台日志中：

2012-09-25 10:31:22.359::DEBUG: REQUEST / on org.eclipse.jetty.server.nio.Select ChannelConnector$2@77e8a5c 2012-09-25 10:31:22.406::DEBUG: RESPONSE / 503

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T03:44:42.330

尝试更新版本的 jetty-runner，或者尝试使用 jetty-distribution，7.0.0.RC2 是旧的并且在 jetty-runner 创建的早期，我们刚刚发布了 7.6.7.v20120910

# javascript - 在图例中显示符号

> ID：12588185
> 
> 赞同：0
> 
> 时间：2012-09-25T17:33:56.077
> 
> 标签：javascript, highcharts, highstock

我有一个带有图例的 Highstock 图表。目前，图例仅显示每个系列的彩色线。如何让这个[**图表**](http://jsfiddle.net/FtPQa/)显示每个系列的图例中的符号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:04:47.087

检查[this fiddle](http://jsfiddle.net/3xPaM/)，我认为它会满足您的需求。

# jquery - jQuery加载和回调不起作用

> ID：12588186
> 
> 赞同：0
> 
> 时间：2012-09-25T17:34:15.953
> 
> 标签：jquery, ajax, onload

我有一个由 ajax 脚本驱动的设计。该脚本允许在需要时对某些页面进行回调。该设计是一个简单的缩略图网格，单击缩略图，新页面会滑动以显示更大的图像。我正在尝试为较大的图像使用某种预加载器，当它们加载时它们会依次淡入图像。我初始化 ajax 和回调的脚本如下所示：

```
$(document).ready(function () {

$("#menu ul li").slidingPage({
        easing: 'easeInOutExpo',
        speed: 1100,
        slideScroll: 'horizontal',
        top: 0,
        navigation: {
                show: false,
                nestedPagesFlows: true
        },
        callbacks: {

                loader: function () {

                    $(function () {
                        $(".fadein").fadeIn("slow");
                    });

                    $(window).load(function () {
                        $(".preload").each(function (i) {
                            $(this).delay(400 * i).fadeIn();
                        });
                    });

                }
        }
    });
}) 
```

的HTML：

```
<div class="fadein">
<div id="images">

<h1>Title</h1>

<div class="centre">    

<img alt="#" class="preload" src="...">
<img alt="#" class="preload" src="...">

</div>

</div>
</div> 
```

该`fadein`功能按预期工作，但`preload`没有。预加载的图像用 CSS 隐藏，但它们从未出现，回调仅在页面刷新后调用，而不是在加载时调用，我猜这是这里的问题。老实说，我不知道为什么或者即使我正在做的事情不兼容。关于如何解决这个问题的任何建议，或者对替代方法的一些建议，也许是用 jQuery 隐藏图像？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T23:34:36.413

通过使用 jQuery 的`.load()`API 而不是`window.load`. 例子：

```
$('#selector').load(function() {
  alert('Load was performed.');
}); 
```

不确定这是否是最有效的方法，但它达到了期望的效果。

# javascript - javascript画布回合限制和onclick变量

> ID：12588187
> 
> 赞同：0
> 
> 时间：2012-09-25T17:34:22.783
> 
> 标签：javascript, canvas

我刚刚开始学习自己的画布，所以我有一些简单的问题，谷歌无法回答我。

首先，我有一个 700px 宽和 700px 高的画布元素。所以我的画布的限制是一个矩形。但我不希望它是一个矩形，我需要一个圆。使用 CSS 时，只有样式会发生变化。

我的第二个问题是关于事件的。我有一个绘制新对象的变量。如果有人点击对象，应该会发生一些事情。但是，如果它不是元素而是 javascript 中的变量，我该如何单击该对象？

非常感谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:51:34.260

CSS 允许您在视觉上划定您正在处理的代码的区域，“border-radius”属性可以为您做到这一点。如果您的脚本需要圆圈区域内的特定鼠标事件，您可以应用一些基本数学来确定鼠标是在圆圈“内部”还是“外部”。

另一方面，您不能“单击变量”，但您可以定义具有预定义高度和宽度属性的空元素（suck as 或元素），将单击事件绑定到它，然后将事件与脚本中的变量相关联。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T17:55:32.040

[http://jsfiddle.net/XQaUT/1/](http://jsfiddle.net/XQaUT/1/)

您可以使用以下`clip`功能屏蔽画布：

```
function maskCanvas(){
    ctx.beginPath(); 
    ctx.arc(rad, rad, rad, 0, Math.PI * 2, false);   
    ctx.clip();
}

maskCanvas(); 
```

在画布上绘制任何其他内容之前，您需要执行此操作。

```
ctx.fillRect(0,0,100,100); 
```

你创建的最后一个`Path`被画布记住

```
ctx.beginPath();
ctx.fillStyle = "#f00";
ctx.arc(rad,rad,50, 0, Math.PI * 2, false);
ctx.fill(); 
```

因此您可以使用`isPointInPath`来确定鼠标单击是否在该路径内。

```
canvas.onclick = function(e){
    console.log(ctx.isPointInPath(e.x,e.y));
};​ 
```

# c# - 从“保存”对话框中捕获即将关闭且未保存更改的 MS Word 文档的“取消”状态

> ID：12588188
> 
> 赞同：3
> 
> 时间：2012-09-25T17:34:23.177
> 
> 标签：c#, .net, ms-word, add-in

我有一个用 C# 开发的 Microsoft Word 插件。当用户尝试关闭未保存更改的文档时，会显示“保存”对话框。如果用户单击“保存”对话框上的“取消”，有没有办法捕获？

DocumentBeforeClose 事件在显示 Save 对话框之前令人讨厌地触发，并且似乎没有触发封装 Save Dialog 事件的事件。

为什么我需要这个：如果用户关闭了最后一个文档，我需要对我的加载项工具栏进行一些清理。但是，如果我在 DocumentBeforeClose 事件中进行清理并且用户单击取消，则加载项工具栏状态不正确。

**编辑/更新：**

正如 Rob Allen 建议的那样，我现在使用 ShutDown 事件来清理我的父对象，并使用 BeforeClose 事件来预先验证我的父对象。我的验证需要保存文档并尝试在 BeforeClose 调用的方法中执行此操作。如果该文档以前从未保存过，则会出现“另存为”对话框。如果用户单击“取消”，则会引发 COMException，我会抓住它。然后出现保存/不保存/取消对话框。**如果用户单击“不保存”，则不会触发 ShutDown 事件。**如果用户从“另存为”对话框保存，从第二个对话框保存，或在第二个对话框中点击取消，则一切正常。

```
private void WordDocument_BeforeClose(object sender, System.ComponentModel.CancelEventArgs e)
{
  try
  {
    this.WordDocument.Save();
  }
  catch (System.Runtime.InteropServices.COMException a)
  {
    log.Error(a.Message);
  }
}

private void WordDocument_Shutdown(Object sender, EventArgs e)
{
  // Parent cleanup.
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T17:39:52.367

请尝试使用 Document Shutdown 事件。文档[在这里](http://msdn.microsoft.com/en-us/library/microsoft.office.tools.word.document.shutdown.aspx)

从“备注”部分：

> 这是卸载时在 Document 中调用的最后一个事件。使用此事件进行任何额外的清理。
> 
> 在文档级定制中，程序集的应用程序域会在文档宿主项关闭时卸载。
> 
> 在应用程序级加载项中，当文档宿主项关闭时，应用程序域不会卸载。此外，基础文档对象不再可用。要在文档关闭之前访问文档，请改用 CloseEvent。

# lua - 电晕中的拾取轮根本没有出现

> ID：12588193
> 
> 赞同：1
> 
> 时间：2012-09-25T17:34:46.360
> 
> 标签：lua, coronasdk, picker

所以我想做一个多轮选择器，这样

```
dataWheel1 = {"Standard", "Inverse Standard", "Hyperbolic", "Inverse Hyperbolic"}  
dataWheel2 = {"Sine", "Cosine", "Tangent", "Secant", "Cosecant", "Cotangent"} 
```

所以我做了以下事情：

```
local storyboard = require( "storyboard" )
local scene = storyboard.newScene()

function scene:createScene( event )
    local group = self.view

    local bg = display.newRect( 0, 0, display.contentWidth, display.contentHeight )
    bg:setFillColor( 255 )

    local widget = require "widget"

    local columnData = {}

    columnData[1] = {"Standard", "Inverse Standard", "Hyperbolic", "Inverse Hyperbolic"}
    columnData[1].alignment = "right"
    columnData[1].width = 120
    columnData[1].startIndex = 7

    columnData[2] = {"Sine", "Cosine", "Tangent", "Secant", "Cosecant", "Cotangent"} 
    columnData[2].startIndex = 2

    local picker = widget.newPickerWheel{
    id="myPicker",
    font="Helvetica-Bold",
    top=258,
    columns=columnData
    }

    group:insert( picker.view )
    group:insert( bg )
end

function scene:enterScene( event )
    local group = self.view
end

function scene:exitScene( event )
    local group = self.view
end

function scene:destroyScene( event )
    local group = self.view
end

scene:addEventListener( "createScene", scene )

scene:addEventListener( "enterScene", scene )

scene:addEventListener( "exitScene", scene )

scene:addEventListener( "destroyScene", scene )

return scene 
```

这在模拟器上显示为空白页。我完全不知道哪里出了问题或如何改正。

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T13:51:10.577

看看这个[例子](http://developer.coronalabs.com/reference/index/widgetnewpickerwheel)。我认为你需要这样做：

```
 local varName = require "widget" 
```

# opengl-es - opengl 1.1 渲染缓冲区生成只有 960 像素而不是 1136 像素宽度

> ID：12588194
> 
> 赞同：3
> 
> 时间：2012-09-25T17:34:48.067
> 
> 标签：opengl-es, iphone-5

我目前正在将我的 iPhone 游戏移植到 iPhone 5 分辨率。我包括了 Default-568h@2x.png 和

```
[[UIscreen mainScreen] bounds].size; 
```

给了我 iPhone 5 的分辨率（320x568px）。但是我在 OpenglES 1.1 中创建的 renderBuffer 只能获得旧的 iPhone 分辨率（640x960px）。我创建渲染缓冲区的方式如下所示：

```
glGenFramebuffersOES(1, &viewFramebuffer);
glGenRenderbuffersOES(1, &viewRenderbuffer);

glBindFramebufferOES(GL_FRAMEBUFFER_OES, viewFramebuffer);
glBindRenderbufferOES(GL_RENDERBUFFER_OES, viewRenderbuffer);
[context renderbufferStorage:GL_RENDERBUFFER_OES fromDrawable:(CAEAGLLayer*)self.layer];
glFramebufferRenderbufferOES(GL_FRAMEBUFFER_OES, GL_COLOR_ATTACHMENT0_OES, GL_RENDERBUFFER_OES, viewRenderbuffer);

GLint frameBufferWidth, frameBufferHeight;
glGetRenderbufferParameterivOES(GL_RENDERBUFFER_OES, GL_RENDERBUFFER_WIDTH_OES, &frameBufferWidth);
glGetRenderbufferParameterivOES(GL_RENDERBUFFER_OES, GL_RENDERBUFFER_HEIGHT_OES, &frameBufferHeight); 
```

当我在 iPhone 5 上运行游戏时，游戏只覆盖了屏幕的前 960 像素并被挤压。

有人知道如何创建适合 iPhone 5 屏幕大小的渲染缓冲区吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T11:10:40.040

我找到了解决方案。这不是opengl问题。将 Xcode 升级到 v4.5 后，我的应用程序主窗口的界面生成器中的大小选项未设置。将选项设置为“Retina 3.5 全屏”解决了该问题（通过这样做，主视图会自动缩放到 iPhone 屏幕的 3.5 或 4 英寸）。

这篇文章帮助了我： [How to make a uitableview in interface builder compatible with a 4 inch iPhone](https://stackoverflow.com/questions/12406505/how-to-make-a-uitableview-in-interface-builder-compatible-with-a-4-inch-iphone)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-15T18:52:02.953

实际上，如果你想得到通用的解决方案，你应该改变 CAEAGLLayer 类的参数。在我的一个旧项目中，我也遇到了同样的问题。但是，如果您更改 iPhone 5 的 XIB 文件中的分辨率，iPhone 4 将拉伸图像。

```
- (id) initWithCoder:(NSCoder*)coder {
if ((self = [super initWithCoder:coder])) {
    CAEAGLLayer *eaglLayer = (CAEAGLLayer *)self.layer;

    eaglLayer.opaque = TRUE;
    eaglLayer.drawableProperties = [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithBool:FALSE], kEAGLDrawablePropertyRetainedBacking, kEAGLColorFormatRGBA8, kEAGLDrawablePropertyColorFormat, nil]; 
```

所以，这里我们需要改变分辨率：

```
 if ([[UIScreen mainScreen] bounds].size.height == 568) {
        eaglLayer.bounds = CGRectMake(eaglLayer.bounds.origin.x, eaglLayer.bounds.origin.y, 320, 568);
        eaglLayer.position = CGPointMake(160, 284);
    } 
```

之后这段代码

```
GLint frameBufferWidth, frameBufferHeight;
glGetRenderbufferParameterivOES(GL_RENDERBUFFER_OES, GL_RENDERBUFFER_WIDTH_OES, &frameBufferWidth);
glGetRenderbufferParameterivOES(GL_RENDERBUFFER_OES, GL_RENDERBUFFER_HEIGHT_OES, &frameBufferHeight); 
```

得到正确的高度。

# c++ - Web 服务器缓冲区

> ID：12588196
> 
> 赞同：1
> 
> 时间：2012-09-25T17:35:00.683
> 
> 标签：c++, c, buffer

我正在研究 C/C++ 所以套接字的网络。例如，我现在使用的是 firefox，我可以同时加载 10KB 页面和 30MB 页面。所以我假设我从 Web 服务器获得的所有数据都写入了某个缓冲区。但是该缓冲区是固定大小还是基于 Content-size？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T17:36:52.990

数据实际上是从一个缓冲区流到另一个缓冲区，最终在内存中结束。服务器通过磁盘缓冲区从磁盘读取并写入 TCP 网络缓冲区，其内核将其清空到网络接口缓冲区中。当数据通过各种网络链接时，数据在网络上从一个缓冲区传输到另一个缓冲区。最终，它会在您的操作系统的 TCP 连接缓冲区中结束，您的浏览器会不断地将其清空到主内存中的缓冲区中。这些缓冲区都是各种不同的大小，有些是固定的，有些是可变的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T18:27:45.600

在服务器或浏览器中，一种实现是池队列的数组/向量，其中包含 [power-of-2] 增加缓冲区大小的 *buffers，从“平均页面大小”开始 - 一个 bin 数组。在启动时使用一些合理数量的缓冲区加载垃圾箱。如果网络 rx 填充了一个缓冲区，则从下一个 bin 中获取一个，将其链接到第一个并开始填充，依此类推。如果第一个缓冲区具有内容大小，那就更好了 - 您可以选择适当大小的缓冲区（或缓冲区向量以加速渲染以改善用户体验）。如果你很聪明，你可以在第二个缓冲区完全填满之前开始渲染第一个缓冲区，依此类推。

根据负载，您可以动态调整 bin 内容以适应当前需求。显然，所有的箱子、队列等都是线程安全的（我使用阻塞的生产者-消费者队列）。

# matlab - MATLAB 相当于 Java 的 {}

> ID：12588199
> 
> 赞同：0
> 
> 时间：2012-09-25T17:35:08.607
> 
> 标签：matlab

我想知道 MATLAB 等效于 Java 的 {} 用于分隔代码块。好像找到这样的东西会很简单，但是在 Google 上搜索 {} 就很难了，所以我求助于 StackOverflow。谢谢您的帮助！

**编辑：**我的目标是定义一个多行匿名函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T18:01:16.803

您可以使用 ... 继续行。所以要制作一个多行匿名函数：

```
fun=@(x)(...
    x.^2+...
    x+...
    1);

fun(1:10)

ans =

 3     7    13    21    31    43    57    73    91   111 
```

另一方面，如果你想在一个匿名函数中有多个语句，那是不可能的。参见例如[this other SO post](https://stackoverflow.com/questions/558478/how-to-execute-multiple-statements-in-a-matlab-anonymous-function)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T17:55:42.463

你可以在同一个文件中定义一个子函数来做到这一点：

```
function y=foo()
  y=1;
  bar(y)
end

function z=bar(y)
  x=2*y; % x stays local
  z=2*x;
end 
```

# jquery-ui - jQuery UI 日期选择器不工作

> ID：12588205
> 
> 赞同：0
> 
> 时间：2012-09-25T17:35:23.560
> 
> 标签：jquery-ui, datepicker

我试图让 jQuery UI 日期选择器正常工作并且失败得很惨。

我的页面上有一个简单的表格，可以在[这里](http://www.danthegeek.co.uk/competition/#Apply)看到，但无论我做什么，它都无法显示日期选择器。似乎没有抛出任何错误。我在其他小型测试站点上运行良好，但由于某种原因它在这里无法正常工作......让我发疯了！

我有一些html：

```
<tr>
 <td>Select Time</td>
 <td>
   <div><input type="text" name="datepicker" id="datepicker" value="" class="hasDatepicker" />
   </div>
 </td>
</tr> 
```

...和javascript：

```
 $('#datepicker').datepicker(); 
```

我真的不知道我做错了什么，我迫切需要尽快让它工作。

最终目标是从[这里实际使用时间日期选择器](http://trentrichardson.com/examples/timepicker/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:44:53.213

尝试这个：

`$('.hasDatepicker').datepicker();`

你有一个名为`hasDatepicker`.

顺便说一句，给文本框提供 id和jquery 正在使用`datepicker`的名称是一个糟糕的主意。如果它还不错，那么在其他开发人员查看您的代码之后就已经够糟糕了。`datepicker``datepicker()`

# javascript - 有一个复选框递归地标记复选框

> ID：12588209
> 
> 赞同：0
> 
> 时间：2012-09-25T17:35:35.963
> 
> 标签：javascript, html, css

我正在使用以下功能对切换复选框进行分组。

```
<script type=text/javascript>
function toggle(source, wild_name) {
  checkboxes = document.getElementsByName(wild_name);
  for(var i in checkboxes)
    checkboxes[i].checked = source.checked;
}
</script> 
```

因此，当我单击定义为的复选框时：

```
<input type="checkbox" onchange="toggle(this, 'tweak_os')" name="toggle_tweak_os"> Toggle All 
```

它检查任何名为“tweak_os”的复选框。但是我正在尝试这样做，以便如果一个复选框调用检查另一个复选框的函数，则应该执行相同的函数。在以下代码中：

```
<input type="checkbox" onchange="toggle(this, 'toggle_tweak_os')" name="toggler">
<input type="checkbox" onchange="toggle(this, 'tweak_os')" name="toggle_tweak_os">
<input type=checkbox id=tweak_os_1 name=tweak_os value=tweak_os_1> 
```

我希望在单击名为“toggler”的第一个复选框时选中最后一个名为“tweak_os”的复选框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:38:08.700

第一个复选框更改导致选择第二个而不是第三个，因为在使用代码更改时不会触发非第二个复选框的更改。如果已定义，您还需要使用代码触发复选框的更改事件。

```
function toggle(source, wild_name) {
    checkboxes = document.getElementsByName(wild_name);
    for (var i in checkboxes) {
        checkboxes[i].checked = source.checked;
        if (typeof checkboxes[i].onchange == "function") {
            checkboxes[i].onchange();
        }
    }
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T17:39:36.107

`onchange`如果存在，请尝试触发复选框的功能，

```
if (checkboxes[i].onchange) checkboxes[i].onchange(); 
```

**演示：http:** [//jsfiddle.net/wDBxb/](http://jsfiddle.net/wDBxb/)

```
function toggle(source, wild_name) {
    checkboxes = document.getElementsByName(wild_name);
    for (var i in checkboxes) {
       checkboxes[i].checked = source.checked;
       if (checkboxes[i].onchange) checkboxes[i].onchange();
    }   
} 
```

# java - 一致的跨平台（java .Net）PseudoRandom 生成器（如果种子相同）

> ID：12588210
> 
> 赞同：3
> 
> 时间：2012-09-25T17:35:39.143
> 
> 标签：java, .net, random, cross-platform, seed

是否有一个标准的跨平台数字生成器/算法/库，如果使用相同的输入（在我的情况下是某种哈希）播种，总是产生相同的伪随机数集？

理想情况下，我希望能够在任何目标机器上的 Java 和 .Net 中实现这个跨平台，并获得相同的一致输出（模糊的随机整数）。

如果不可能，我会自己滚动（我的随机性要求非常低，基本上是用来根据它的 ID 为某物分配不同的颜色 - 我只想始终为同一个项目分配相同的颜色，无论如何我正在运行的系统）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T17:39:06.780

有一个非常简单且广为人知的 RNG 算法，“Multiply-with-Carry”，可以在我所知道的所有平台上轻松实现。它具有您要求的属性；由您决定它的随机性是否足够。

来自[维基百科](http://en.wikipedia.org/wiki/Random_number_generation#Computational_methods)：

> 一个简单的伪随机数生成器的例子是 George Marsaglia 发明的 Multiply-with-carry 方法。它的计算速度很快，并且具有良好的（尽管密码学上不强）随机性特性。

下面是 C# 中非常简单的实现，您可以毫不费力地适应其他语言：

```
static int m_w = 1337;      // Choose initialization value, must not be zero
static int m_z = 123123;    // Choose initialization value, must not be zero

int GetRandom() 
{
    m_z = 36969 * (m_z & 65535) + (m_z >> 16);
    m_w = 18000 * (m_w & 65535) + (m_w >> 16);
    return (m_z << 16) + m_w;  /* 32-bit result */
} 
```

m_w 和 m_z 的初始值是种子。

# php - 引用 strposa 中的当前数组元素

> ID：12588211
> 
> 赞同：0
> 
> 时间：2012-09-25T17:35:54.043
> 
> 标签：php, arrays, search, strpos

我正在使用简单的**strposa** PHP 函数来搜索 html 页面中的文本。

```
$ItemsToGet[ ] = "Alpha One";
$ItemsToGet[ ] = "Alpha Fifty"
$ItemsToGet[ ] = "FoxTrot Twelve";
$ItemsToGet[ ] = "Bravo Six";
$ItemsToGet[ ] = "Alpha Niner";

if ( strposa( $rawPage, $itemsToGet, 1 ) !== false )
    {
    //echo the current $itemsToGet aka the element that got the match from
    //$itemsToGet
    }

function strposa( $haystack, $needles = array( ), $offset = 0 ) {
$chr = array( );
foreach ( $needles as $needle )
    {
    $res = strpos( $haystack, $needle, $offset );
    if ( $res !== false )
        $chr[ $needle ] = $res;
    }
if ( empty( $chr ) )
    return false;
return min( $chr );

} 
```

如果**strposa**找到匹配项并遍历括号，我想将它当前所在的数组项添加到另一个数组中......就像这样......

```
$foundArray[ ] = $itemsToGet; 
```

但是，我不确定如何引用当前元素。使用`current($itemsToGet)`总是返回第一个元素。这甚至可能吗？**除了 strposa 之外**，我还必须找到其他东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T17:51:14.497

这将返回 $needle 而不是位置。

```
function strposa( $haystack, $needles = array( ), $offset = 0 ) {
$chr = array( );
foreach ( $needles as $needle )
    {
    $res = strpos( $haystack, $needle, $offset );
    if ( $res !== false )
        return $needle;
    }
return false

} 
```

# javascript - 为什么 Mac 上的 Chrome 会跳过这段代码中的确认对话框？

> ID：12588214
> 
> 赞同：0
> 
> 时间：2012-09-25T17:36:07.067
> 
> 标签：javascript, macos, google-chrome

我有一个带有确认对话框的非常简单的 Javascript/AJAX 函数，因此用户必须在代码执行之前进行确认：

```
function leaveLeague(league_id) {

    if(confirm('Are you sure you want to leave this league?')) {

        if(window.XMLHttpRequest) { // code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp = new XMLHttpRequest();
        } else { // code for IE6, IE5
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }

        xmlhttp.onreadystatechange = function () {
            if(xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                document.getElementById("curr_leagues").innerHTML = xmlhttp.responseText;
            }
        }

        xmlhttp.open("GET", "ajax/leave_league.php?league_id=" + league_id, true);
        xmlhttp.send();

    }

} 
```

现在，该代码适用于 Windows 上的所有浏览器，包括 Chrome。但是，我收到了用户的投诉，称 Mac OS 上最新版本的 Chrome 中跳过了确认对话框。该函数只是在没有确认对话框的情况下执行。我对 Mac 没有任何东西，所以我无法测试自己，但人们没有理由对我撒谎，所以我假设问题是真实的。

有谁知道为什么会发生这种情况以及我该如何解决？

使用点击事件从链接调用该函数：

```
<a onClick='leaveLeague(2);'>Leave League</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T17:41:37.490

取消链接的点击事件

```
<a href="#" onclick='leaveLeague(2);return false;'>Leave League</a> 
```

# c++ - 迭代 Boost multi_array 视图

> ID：12588221
> 
> 赞同：1
> 
> 时间：2012-09-25T17:36:37.483
> 
> 标签：c++, boost, iterator, boost-multi-array

有没有办法将视图的所有元素迭代到 Boost 中`multi_array`？很清楚如何迭代 Boost `multi_array`；即，越过范围`[array.data(), array.data() + array.num_elements())`。但是如果我在这个数组中创建一个视图（删除数组的某个子集），显然使用指针进行连续访问是不可能的：视图不会对应于任何连续的内存块。Boost 是否提供了一种机制来处理这个问题，还是我需要手动实现一个解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-20T20:51:17.707

幸运的是，multi_array 概念不需要任何连续的内存块。参考实现为每个维度存储一个步幅这一事实提供了足够的信息来正确地遍历视图。实际上，multi_array 概念要求返回的视图像标准容器一样可迭代。

# javascript - 如何仅枚举在运行时添加的 JavaScript 对象的那些属性/方法？

> ID：12588225
> 
> 赞同：4
> 
> 时间：2012-09-25T17:37:09.670
> 
> 标签：javascript

场景：我正在尝试使用复杂的 API 找出现有的 HTML/JavaScript 站点。它为对象添加了几个属性`window`。我只想列举那些不是内置或默认值的属性（例如 exclude `window.location`、`window.parent`等）

有没有一种惯用的 JavaScript 方法来做到这一点？我曾想过在空白的 HTML 页面中做一个浅拷贝，然后在枚举真实页面时以某种方式“减去”这些属性。

理想情况下，我想要一种将对象转储到控制台或手表中的方法，就好像不`window`存在任何常规属性一样，只有那些使用 JavaScript 源添加的属性。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T17:50:10.563

这是我在评论中提出的详细版本：

```
window.preexistingkeys = [];
for (var key in window) window.preexistingkeys.push(key);

// your convoluted api here

for (var key in window) {
    if (window.preexistingkeys.indexOf(key)==-1) console.log(key, window[key]);
}
​ 
```

[用小提琴](http://jsfiddle.net/gmYAf/)

请注意，您可以在导入外部脚本之前在页面标题的开头执行第一部分。[这是一个示例](http://dystroy.org/stackoverflow/window.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T18:07:04.843

扩展[dystroy的答案](https://stackoverflow.com/a/12588406/128165)，如果您无法在api之前执行代码，您可以动态创建一个新窗口来获取其属性（*因为它将是“干净的”*）
（*也[`hasOwnProperty`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/hasOwnProperty)用于排除继承的属性*）

```
window.preexistingkeys = [];

var w = window.open();
for (var key in w) if(window.hasOwnProperty(key)) window.preexistingkeys.push(key);
w.close();

for (var key in window) {
    if (window.hasOwnProperty(key) && window.preexistingkeys.indexOf(key)==-1) console.log(key, window[key]);
} 
```

# android - Broadcastreceiver onreceive 未调用

> ID：12588226
> 
> 赞同：2
> 
> 时间：2012-09-25T17:37:16.280
> 
> 标签：android

我正在从我的一个班级发送广播：

```
 // Sending broadcast from my db helper constructor
    public DBHelper(Context ctx){
    this.ctx = ctx;
    Intent intent = new Intent();
    intent.setAction("custom.alert.abc");
    intent.putExtra("key",77);ctx.sendBroadcast(intent);

    //registering the broadcast in one of my activities oncreate
     IntentFilter alaramfilter = new IntentFilter();
    alaramfilter.addAction("custom.alert.abc");
     registerReceiver(alarmreceiver, alaramfilter); 

    //and declaring it
    private final BroadcastReceiver alarmreceiver = new BroadcastReceiver() {
@Override
public void onReceive(Context context, Intent intent) {
    System.out.println("Broadcast received inside on receive");
    final String action = intent.getAction();
    if(action.equals("custom.alert.abc")) {
        Log.d("CPSnippetMain","My custom broadcast called");
        try {
             System.out.println("Broadcast received");
         } catch (Exception e) {
            e.printStackTrace();
        }
   }
}
}; 
```

问题是，尽管调用了构造函数并发送了广播，但未调用 onreceive。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T18:09:37.497

`sendbroadcast`你和`register`重要的顺序。首先注册然后做一个sendBroadcast。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T18:27:44.800

注册广播

```
private BroadcastReceiver receiver_;

@Overrride
public void onCreate(Bundle savedInstanceState){

 IntentFilter filter_data = new IntentFilter();
 filter_data .addAction("SOME_ACTION");

 receiver_= new BroadcastReceiver() {
@Override
public void onReceive(Context context, Intent intent) {
  //do something based on the intent's action
}
 }

 registerReceiver(receiver_, filter_data ); 
```

并在销毁方法中取消注册接收器

> unregisterReceiver(receiver_);

# android - Android：3 级滑动抽屉

> ID：12588227
> 
> 赞同：1
> 
> 时间：2012-09-25T17:37:27.910
> 
> 标签：android, slidingdrawer

我有一个带有 ListView 的 LinearLayout。它上面的布局，向右对齐，也有一个 ListView。我想将此上部布局实现为 3 级水平 SlidingDrawer（从右到左），例如具有 3 个阶段的小部件：1）抽屉完全关闭 2）抽屉 50% 打开 3）抽屉完全打开以占据整个屏幕 当抽屉将打开 50% 时，两个 ListView 都应该能够捕捉到点击事件。任何人都可以帮助我如何实现这一目标吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T17:47:04.057

看看这个链接。这应该让你开始：

[http://blog.sptechnolab.com/2011/02/10/android/android-sliding-drawer/](http://blog.sptechnolab.com/2011/02/10/android/android-sliding-drawer/)

没有布局的代码将类似于：

```
public class animation extends Activity {
/** Called when the activity is first created. */
CheckBox c1,c2,c3;
int key=0;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main1);

    final TransparentPanel popup = (TransparentPanel) findViewById(R.id.popup_window);
    popup.setVisibility(View.GONE);

    final Button btn=(Button)findViewById(R.id.show_popup_button);
    btn.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            if(key==0){
                key=1;
                popup.setVisibility(View.VISIBLE);
                btn.setBackgroundResource(R.drawable.slid3_n);
            }
            else if(key==1){
                key=0;
                popup.setVisibility(View.GONE);
                btn.setBackgroundResource(R.drawable.slid4_n);
            }
        }
    });

}
} 
```

那只是一个“两阶段”抽屉。对于中间阶段，或者基本上是两个抽屉合二为一，您必须根据自己的需要调整代码。

# c# - 使用页脚模板和 textarea 以 cleditor 作为输入添加新行

> ID：12588228
> 
> 赞同：0
> 
> 时间：2012-09-25T17:37:31.307
> 
> 标签：c#, asp.net, .net, gridview

我正在使用页脚模板在 gridview 中添加新行。在页脚模板中，我有 html textarea 与 cleditor 绑定。一旦我在 textarea 中输入文本并输入添加按钮，那么输入的文本就会被清除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T10:53:29.563

你需要使用 asp 文本框而不是 textarea

用这样的东西改变你的 html textarea

```
<asp:TextBox id="input" runat="server" TextMode="MultiLine" Text=""></asp:TextBox> 
```

**不要忘记 TextMode="MultiLine"

你的 cleditor 声明应该是这样的

```
$(document).ready(function() {
    $('#<%= input.ClientId %>').cleditor({width:500, height:180, useCSS:true});
}); 
```

# sql - 如何用sql xml中的变量替换指针值？

> ID：12588231
> 
> 赞同：0
> 
> 时间：2012-09-25T17:37:58.200
> 
> 标签：sql, xml, sql-server-2008

我需要编写一个 WHILE 循环并将一个变量传递给一个 xml 查询：

鉴于此逻辑：

```
DECLARE @count INT = 0;
DECLARE @pointer INT = 0;
DECLARE @pointer_str varchar(100);

DECLARE @MyXML XML
SET @MyXML = '<SampleXML>
                <Colors>
                <Color1>White</Color1>
                <Color2>Blue</Color2>
                <Color3>Black</Color3>
                <Color4 Special="Light">Green</Color4>
                <Color5>Red</Color5>
                </Colors>
                <Colors>
                <Color1>White</Color1>
                <Color2>Blue</Color2>
                <Color3>Black</Color3>
                <Color4 Special="Light">Green</Color4>
                <Color5>Red</Color5>
                </Colors>
            </SampleXML>'

SET @count = 
    (
        SELECT
            a.b.value('count(/SampleXML/Colors)', 'int')
        FROM 
            @MyXML.nodes('data') a(b)
    )

WHILE @count < @pointer
    BEGIN   
        SELECT
            a.b.value('Colors[' + @pointer + ']/Color1[1]','varchar(10)') AS Color1
        FROM 
            @MyXML.nodes('SampleXML') a(b);

        SELECT @pointer = @pointer + 1;
    END 
```

我试图在 SELECT 语句中获取以下变量来解析 XML，但收到以下错误：

```
The argument 1 of the XML data type method "value" must be a string literal. 
```

此外，当我将字面值“1”传递给它时，我看不到在循环内运行的选择。有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:57:19.267

> 我需要编写一个 WHILE 循环并将一个变量传递给一个 xml 查询：

在 XML.value() 方法中，您可以将变量`varName`称为`sql:variable("@varName")`.

关于您的问题，在我看来，您正在尝试提取`Color1`XML 中节点内的文本。以下 SQL 执行此操作：

```
DECLARE @count INT = 0;
DECLARE @pointer INT = 0;
DECLARE @pointer_str varchar(100);

DECLARE @MyXML XML
SET @MyXML = '<SampleXML>
        <Colors>
        <Color1>White</Color1>
        <Color2>Blue</Color2>
        <Color3>Black</Color3>
        <Color4 Special="Light">Green</Color4>
        <Color5>Red</Color5>
        </Colors>
        <Colors>
        <Color1>Green</Color1>
        <Color2>Blue</Color2>
        <Color3>Black</Color3>
        <Color4 Special="Light">Green</Color4>
        <Color5>Red</Color5>
        </Colors>
    </SampleXML>'

SELECT @count = count(a.b.query('.')) FROM @MyXml.nodes('/SampleXML/Colors') as a(b)

SELECT
    a.b.value('.', 'varchar(10)')
FROM 
    @MyXML.nodes('/SampleXML/Colors/Color1') a(b); 
```

它产生的输出为

```
----------
White
Green

(2 row(s) affected) 
```

# javascript - 独立的类似 Firebug 的 javascript 控制台解释器

> ID：12588232
> 
> 赞同：1
> 
> 时间：2012-09-25T17:37:59.350
> 
> 标签：javascript, firebug

有没有用纯 JavaScript 写的东西？Firebug 控制台的巧妙之处在于它可以准确地输出用户想要看到的内容。例如：

```
>>> ["hello"][0]
"hello"

>>> ["hello"].length
1

>>> (1 + 1).toString()
"2" 
```

是否可以在代码中使用这种解释器并在网站上运行？当然，无法访问全局范围。

编辑：我忘了提到我更喜欢一个小型函数，而不是整个库，甚至可能是 Firebug 控制台提供的基本功能。

# msbuild - 为什么文件中的后期构建更改没有反映在应用程序包中？

> ID：12588236
> 
> 赞同：1
> 
> 时间：2012-09-25T17:38:22.503
> 
> 标签：msbuild, visual-studio-2012, post-build-event, windows-store-apps

我在构建后事件中修改文件，但我对文件所做的更改不会反映到 App 包（Appx 文件）中，该文件作为内容包含在项目中，复制到输出目录属性是如果更新设置为 Copy，则更改将反映在 Debug 构建 (bin\Debug) 和 Deploy 阶段 (bin\Debug\Appx)。

我已经尝试过使用 Build Events 和 MSBuild Exec 元素，但它不起作用，您对我可能遗漏的内容有任何想法吗？或者更好的方法来实现我想做的事情？

编辑1：

我查看了 appxrecipe 文件（在 Debug 文件夹中），我认为该文件被用于构建包，发现对文件的引用指向 Project 目录中的文件，而不是 Debug 文件夹中的文件，所以我使用我的后期构建工具来修改此文件以指向 Debug 文件夹中修改后的文件的引用，所做的更改并反映在 Deploy 文件夹（vs.appxrecipe 文件）中，但包仍然有未修改的文件。

# facebook - 需要 Facebook 保持登录的企业帐户

> ID：12588240
> 
> 赞同：1
> 
> 时间：2012-09-25T17:38:47.700
> 
> 标签：facebook, token, facebook-authentication, facebook-login

我们有一个 Facebook 应用程序，并且在大多数情况下它运行良好。它连接到我们的 CMS，我们的客户可以将 Facebook 帖子从 CMS 直接发布到 Facebook。这里的想法是任何员工都可以在 Facebook 的公司页面上发帖。我们的 CMS 有一个内置的批准流程，公司经理可以批准或拒绝 Facebook 帖子。这个想法是没有人拥有企业 Facebook 帐户的用户名或密码。话虽如此，我们希望 CMS 本身始终登录到 Facebook，以便在获得批准时将它们发送到 Facebook。

我们的问题：CMS 仅在令牌的生命周期内保持连接，即 2 小时。这违背了拥有企业社交媒体工作流程的目的。我们不希望任何员工弹出 Facebook 提示，因为他们不知道发布到 Facebook 的密码。这就是想法。

我们的问题：我们如何才能使 CMS 始终可以访问帖子。似乎 OpenAuth 不适用于我们的场景。有没有办法直接通过 CMS 进行身份验证，而不是尝试处理超时令牌？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T17:42:00.597

重新阅读[身份验证](https://developers.facebook.com/docs/authentication/)文档，特别是页面管理流程，我假设这是您使用令牌所做的 - 前提是您从服务器端 Oauth 流程中检索 60 天（长期到期）令牌，即页面访问令牌您检索用于管理您公司的 Facebook 页面将是无限的并且不会过期。

这在[离线访问删除](https://developers.facebook.com/roadmap/offline-access-removal/)文档的场景 5 下进行了进一步解释

# iphone - MiddleOfPoints 计算的不同值

> ID：12588248
> 
> 赞同：0
> 
> 时间：2012-09-25T17:39:16.063
> 
> 标签：iphone, objective-c, trigonometry

我想在 ObjC 中计算几个地理点（由经度、纬度指定）的中间

```
- (CLLocationCoordinate2D)middleOfPoints:(NSOrderedSet *)points
{
    int i = 0; i = points.count;
    double x,y,z = 0;

    for (BuildingPoint *point in points) 
    {
        // Iterate through Set
        x += cos(point.latitude.doubleValue*(M_PI/180)) * cos(point.longitude.doubleValue*(M_PI/180));
        y += cos(point.latitude.doubleValue*(M_PI/180)) * sin(point.longitude.doubleValue*(M_PI/180)); 
        z += sin(point.latitude.doubleValue*(M_PI/180)); 
    }

    x = x/i;
    y = y/i;
    z = z/i;

    double longitude = 180/M_PI * atan2(y,x);
    double t = sqrt(x * x + y * y);
    double latitude = 180/M_PI * atan2(z,t);

    return CLLocationCoordinate2DMake(latitude, longitude);
} 
```

但是由于某种原因，当我使用相同的输入集调用该方法 5 次时，我得到了不同的值。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T18:24:18.613

```
double x,y,z = 0; 
```

仅初始化`z`为零，但`x`具有`y`未定义的（随机）值。将其更改为

```
double x = 0, y = 0, z = 0; 
```

# javascript - WebcryptoAPI - 安全与否？

> ID：12588249
> 
> 赞同：3
> 
> 时间：2012-09-25T17:39:21.823
> 
> 标签：javascript, security, cryptography, w3c

这是关于新的 W3 WebcryptoAPI 草案标准 - [http://www.w3.org/2012/webcrypto/WebCryptoAPI/](http://www.w3.org/2012/webcrypto/WebCryptoAPI/)

这是其中一位作者的帖子

[https://plus.google.com/u/0/105761279104103278252/posts/CSwVZ1RUijo](https://plus.google.com/u/0/105761279104103278252/posts/CSwVZ1RUijo)

它说它在一定程度上试图改变“Javascript Cryptography Considered Hamrful”问题。但是，如果您查看“Javascript Cryptography Considered Hamrful”文章 - [http://www.matasano.com/articles/javascript-cryptography/](http://www.matasano.com/articles/javascript-cryptography/) - 似乎大多数问题仍未解决。唯一解决的问题是您不会在 javascript 中手动编码加密函数 - 这些将由浏览器提供。然而，剩下的问题仍然存在。

你的意见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T16:13:37.350

# java - 正则表达式忽略 html 标记，但从具有不同结束锚点的单词边界开始

> ID：12588254
> 
> 赞同：2
> 
> 时间：2012-09-25T17:39:56.167
> 
> 标签：java, regex, regex-lookarounds

**首先让我说我需要一个仅正则表达式的解决方案。**

我正在尝试使用第三个程序程序从 html 文件中提取描述。**这个程序是基于java的，但我不能以任何方式操作源代码！**. 我提交正则表达式的程序已经有另一个正则表达式脚本，指定从每个页面上获取描述的位置。如果您在其中定义匹配项，它具有这个方便的功能，可以进一步将该信息分解为一个数组。

**我想匹配描述中的每个句子，无论它是否是列表项。摆脱标签将是理想的，因为它们会导致`\b`用于指定从哪里开始匹配的问题。**

起初我以为我可以编写一个正则表达式解决方案来捕获单词边界和句子结尾字符之间的所有内容。像这样的事情`\b([^.!]+)[.!]`然后我注意到一个问题，描述有时会有一个带有列表项的附加部分。更复杂的是，有时列表项的第一部分会加粗或斜体。更罕见的是，由于我不明白的原因，其中可能会有一个随机`<br>`和标签......`</br>`

以下是一篇搞笑文章中对常见布局的示例描述：

```
Children around the world are constantly exposed to the evil “Dolan”, an evil 
duckwho encourages rape, murder, pedophilia, stealing, homosexuality and a range
of other sins.  ”Dolan” is considered a “meme”: an image that makes its way
around the internet via social networks such as Myspace, Friendster, or
Wikipedia.

<li>The duck is based on the character “Donald” created by the company Disney. 
</li><li><b>Dolan, however</b>, is more overtly satanic and enjoys commit crimes
and offending Christianity. </li><li>He is best known for a series of internet 
comics created in the socialist nation of Finland. </li><li><i>Being part of
Scandinavia</i>, the Finnish are clearly followers of Satan and Skrillex. </li>
<li>The comics are written in poor English to distract the viewer from how evil
and offensive they truly are.</li> 
```

我尝试了一些不同的东西，但我仍然是一个正则表达式新手，并且得到了各种无法正常工作的不同回报。这个从标签中的任何字母开始打破了一切：

```
(?:<li>|<b>|<i>)?\b([^.!<]+)[.!< ][<lbi/ ] 
```

上面的代码给出了一个这样的数组（顺序是随机的，或者至少以我不理解的方式组织）

```
i>
Being Part of Scandinavia
i>
b>
Dolan, however
b> 
```

几乎相同的同一个可能会留在一些 html 标记中，我认为这是因为`li>`填充了单词边界要求。**注意：下面代码末尾有一个空格**

```
\b([^.!<]+)[.!] 
```

这给出了一个这样的数组

```
li>The duck is based on the character “Donald”...
li>li>b>Dolan, however/b>, is more overtly satanic... 
```

就像我之前说的那样，我是一个正则表达式的菜鸟，并且非常确定我使用了错误的前瞻。

**请帮我解决问题！我不知道下一步该尝试什么。**

*PS，文章不是我写的，是从别的网站上抄来的。不想冒犯*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T03:02:10.753

别管它`\b`，它只会妨碍你。你也不需要环顾四周。以下正则表达式正确匹配示例文本中的所有句子。与@icrf 的正则表达式一样，句子中的任何标签都将保留在那里。摆脱这些需要第二步，我看不出有什么办法。

```
[^\s<>.!?][^<>.!?]*(?:<[^<>]+>[^<>.!?]*)*[.!?] 
```

分解它：

1.  `[^\s<>.!?]`从下一个不是空格、尖括号或句子标点符号的字符开始匹配。

2.  `[^<>.!?]*`继续匹配所需的字符，现在包括空格。

3.  `<[^<>]+>`: 如果它找到一个左尖括号，这部分会尝试匹配一个 HTML 标签。然后它回到匹配非特殊字符与`[^<>.!?]*`. 它继续像这样进行权衡，直到没有更多的标签或非特殊字符可供使用。

4.  最后，`[.!?]`匹配句尾标点符号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T20:16:11.170

这个怎么样：

```
(?:^|(?<=[.!]))(?:</?[a-zA-Z][^>]*>)*([^<][^.!]+)(?:[.!]|$) 
```

这个想法是尝试匹配**从**句子分隔符**到**另一个句子分隔符的所有内容。我正在使用[积极](http://www.regular-expressions.info/lookaround.html)的后视（`(?<=[.!])`部分）来匹配第一个分隔符，因此正则表达式实际上并没有使用该字符，只是检查它是否存在于正确的位置。

在您的示例文章上运行此正则表达式，我得到以下匹配项：

```
Children around the world are constantly exposed to the evil...
  ”Dolan” is considered a “meme”: an image that makes its way...
<li>The duck is based on the character “Donald” created by...
</li><li><b>Dolan, however</b>, is more overtly satanic and...
 </li><li>He is best known for a series of internet comics created...
 </li><li><i>Being part of Scandinavia</i>, the Finnish are clearly...
 </li><li>The comics are written in poor English to distract... 
```

结果匹配仍然需要一些处理（即修剪空格和剥离标签），但至少正则表达式似乎正确匹配句子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T20:27:59.920

```
\b(?<![</])(?!>)[^.?!]+[.!?] 
```

这使句子外的 HTML 标记不匹配，但句子内的标记仍然存在并且必须被删除。没有它们就没有任何方法可以得到一个句子，因为它不会是一个连续的匹配，这是只使用正则表达式来解决这个问题的限制。

开始时的负后瞻`(?<![</])`和负前瞻`(?!>)`是为了避免匹配内部标签作为起点。

```
The duck is based on the character "Donald" created by the company Disney.
Dolan, however</b>, is more overtly satanic and enjoys commit crimes and offending Christianity.
He is best known for a series of internet comics created in the socialist nation of Finland.
Being part of Scandinavia</i>, the Finnish are clearly followers of Satan and Skrillex.
The comics are written in poor English to distract the viewer from how evil and offensive they truly are. 
```

保留在里面的 HTML 不是有效的 HTML，因为开始或结束标记可能在句子本身之外（见第二句中没有开头的结束粗体）。

# sql - 以下查询如何工作

> ID：12588258
> 
> 赞同：2
> 
> 时间：2012-09-25T17:40:08.407
> 
> 标签：sql, oracle

有人可以解释一下下面的查询将如何工作.. 我有一个名为员工的表

```
id FirstName LastName   Email            Groupid
1 Paula      Brown    pb@testdomain.org    12
2 James      Smith    jim@test.co.uk       12
3 James      Connor   jc@tes.co.uk         13

select * from employee where groupid=12 AND id NOT IN (1) OR id NOT IN (2) 
```

这个查询是如何工作的？我试图了解 AND 子句如何与 OR 一起使用。任何帮助，将不胜感激...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T17:42:51.460

`AND`优先于`OR`，所以条件被解释为

```
(group=12 but id <> 1) OR (id <> 2) 
```

所有三个记录都符合这个条件：

```
1 Paula      Brown    pb@testdomain.org    12 -- id <> 2
2 James      Smith    jim@test.co.uk       12 -- group=12 and id <> 1
3 James      Connor   jc@tes.co.uk         13 -- id <> 2 
```

如果您正在寻找不同的评估顺序，您可以使用括号强制它。

# jquery - 如何使用 Jquery 删除附加元素以及为什么 bind 或 live 导致元素重复

> ID：12588260
> 
> 赞同：15
> 
> 时间：2012-09-25T17:40:12.563
> 
> 标签：jquery, append, bind, live

现在我知道以前有人问过这个基本问题，但我一定做错了什么。我知道附加元素必须先绑定，然后才能对其执行任何操作。但是，尽我所能，我无法让它工作。

当人们单击收音机选择时，我正在拉入一条消息并显示。每当我尝试绑定新元素时，它都会以奇怪的方式堆叠。它将开始堆叠元素。例如- [单击 1] 消息 1、[单击 2] 消息 1 和 2 等等。

我尝试了很多不同的方法来绑定它。我希望删除会剥离#feedback，然后创建并绑定下一条消息。我一定是做错了什么。我知道这与其他帖子非常相似，但我浏览了所有帖子，但无法找到足够清晰的答案来提供帮助。先感谢您。

的HTML

```
<div class="answers">
    <ul>
        <li>
            <input id="answer" type="radio" onclick="feedback('THE MESSAGE HTML')"><label>Label</label>
        </li>
    </ul>
</div> 
```

JavaScript：

```
function feedback(message)
{
    $('#answer').live('click', function()
    {
        $('#feedback').remove();
    });

    $('#answer').live('click', function()
    {
        $('.answers').append('<div id="feedback">'+message+'</div>');
    });
}; 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-25T18:04:10.763

如果我正确理解了您的问题，我已经制作了一个可以正常工作的[小提琴](http://jsfiddle.net/6NfRA/8/)。这个问题与您如何分配事件处理程序有关，并且正如其他人所说，您已经超越了事件处理程序。当前的 jQuery 最佳实践是用于`on()`注册事件处理程序。这是 jQuery 文档的链接`on`：[link](http://api.jquery.com/on/)

您最初的解决方案非常接近，但您添加事件处理程序的方式有点令人困惑。不向 HTML 元素添加事件被认为是最佳实践。我建议阅读 Unobtrusive JavaScript。

这是 JavaScript 代码。我添加了一个计数器变量，以便您可以看到它工作正常。

```
$('#answer').on('click', function() {
  feedback('hey there');
});

var counter = 0;

function feedback(message) {

  $('#feedback').remove();

  $('.answers').append('<div id="feedback">' + message + ' ' + counter + '</div>');

  counter++;    
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T17:46:19.580

该`live`函数正在注册一个单击事件处理程序。每次单击对象时都会这样做。因此，如果您单击它两次，则将两个单击处理程序分配给该对象。您还在这里分配了一个点击处理程序：

```
onclick="feedback('the message html')"; 
```

然后该点击处理程序通过分配另一个点击处理程序`live()`。

我认为你真正想做的是：

```
function feedback(message)
{
    $('#feedback').remove();

    $('.answers').append('<div id="feedback">'+message+'</div>');
} 
```

* * *

好的，根据您的评论，尝试取出元素的`onclick`一部分，`<a>`然后将其放入`document.ready()`处理程序中。

```
$('#answer').live('click',function(){
                     $('#feedback').remove();
                     $('.answers').append('<div id="feedback">'+message+'</div>');
                 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T17:52:46.957

页面上是否有多个单选按钮..

因为我看到的是，当您单击单选按钮时，您正在将事件分配给页面上的所有单选按钮

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-10T03:55:48.660

您可以使用 replaceAll 而不是 remove 并附加 [replaceAll](https://api.jquery.com/replaceAll/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-22T13:20:00.117

我会做类似的事情：

```
$(documento).on('click', '#answer', function() {
  feedback('hey there');
}); 
```

# android - 在 onTouchEvent 中，ACTION_UP 不起作用

> ID：12588263
> 
> 赞同：15
> 
> 时间：2012-09-25T17:40:23.817
> 
> 标签：android, touch-event

我想在玩家触摸屏幕时阅读，何时不阅读。

```
 @Override
public boolean onTouchEvent(MotionEvent event) {
    if(event.getAction() == MotionEvent.ACTION_UP){  //ACTION UP
        actionOnUP = true;
        Log.v("MC", "Up");
    }
    if(event.getAction() == 0){ //ACTION DOWN
        actionOnUP = false;
        Log.v("MC", "Down");
    }
    Log.v("MC", event.getAction() + " ");
    return super.onTouchEvent(event);
} 
```

这段代码，是的，它有效，但只有当玩家触摸屏幕（ACTION_DOWN），但当他不触摸屏幕（ACTION_UP）时，什么都没有发生：/ ![日志猫](../Images/e24d9f928c2549da0c2d4894a25c317b.png)

^ 这是屏幕形式的 LogCat。可以看到：这只是 ACTION_DOWN，而与 ACTION_UP 无关。类正在扩展视图：

```
public class MainClass extends SurfaceView implements SurfaceHolder.Callback { 
```

你能帮助我吗？

编辑：我的游戏基于本教程：[http ://www.droidnova.com/2d-tutorial-series-part-v,848.html](http://www.droidnova.com/2d-tutorial-series-part-v,848.html)

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-09-25T17:56:15.797

我的猜测是 super.onTouchEvent 正在返回`false`，因为您调用的任何超类都不关心触摸事件。

如果您返回`false`onTouchEvent，Android 操作系统将不再通知您该手势中的任何其他事件。如果要继续接收触摸事件信息（`ACTION_UP`例如），则必须返回`true`第一个`ACTION_DOWN`事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T17:42:20.487

尝试 ：

```
int action = event.getAction();
int code = action & MotionEvent.ACTION_MASK;
if (code == MotionEvent.ACTION_POINTER_UP || code == MotionEvent.ACTION_UP || MotionEvent.ACTION_CANCEL) { 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-19T21:47:12.180

“petey”的解决方案对我有用！除了一些语法错误，在这里更正：

```
int code = event.getAction() & MotionEvent.ACTION_MASK;
if ((code == MotionEvent.ACTION_POINTER_UP) || (code == MotionEvent.ACTION_UP) || (code == MotionEvent.ACTION_CANCEL)) { 
```

非常感谢。

# c++ - static_cast 和 RTTI 与 dynamic_cast

> ID：12588264
> 
> 赞同：2
> 
> 时间：2012-09-25T17:40:33.250
> 
> 标签：c++, dynamic-cast, static-cast

请注意以下代码。据我所知，dynamic_cast 比 static_cast 慢。因为它在运行时评估类型。我的疑问是，如果我们将 static_cast 与 typeid() 一起使用如下，它是否需要与动态转换相同的时间？它会比 dynamic_cast 更快吗？

```
class Shape
{ 
public:
  virtual ~Shape(){}
};
class Circle : public Shape{ };
class Square : public Shape{ }; 
```

使用 RTTI 进行静态转换：

```
Circle c;
Shape* s = &c; // Upcast: normal and OK

// More explicit but unnecessary:
s = static_cast<Shape*>(&c);
// (Since upcasting is such a safe and common
// operation, the cast becomes cluttering)

Circle* cp = 0;
Square* sp = 0;

// Static Navigation of class hierarchies
// requires extra type information:
if(typeid(s) == typeid(cp)) // C++ RTTI
    cp = static_cast<Circle*>(s);
if(typeid(s) == typeid(sp))
    sp = static_cast<Square*>(s);
if(cp != 0)
    cout << "It's a circle!" << endl;
if(sp != 0)
    cout << "It's a square!" << endl; 
```

动态演员表：

```
Circle c;
Shape* s = &c; // Upcast: normal and OK

s = &c;
Circle* cp = 0;
Square* sp = 0;
cp = dynamic_cast<Circle*>(s);
    if(cp != 0)
    cout << "It's a circle!" << endl;
sp = dynamic_cast<Square*>(s);
if(sp != 0)
    cout << "It's a square!" << endl; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T18:28:39.127

测试类型然后执行 更快`static_cast`，但是操作并不等效，因为这只会允许向下转换为最派生的类型（任何中间级别都不会与 匹配`typeid`）。我会使用`dynamic_cast`它，因为它更健壮（例如，如果有人扩展您的类型并传递指针，则不会中断）。

如果性能`dynamic_cast`是您的应用程序中的一个问题，您应该重新考虑设计。虽然`typeid`+`static_cast`比 快`dynamic_cast`，但不必打开对象的运行时类型比它们中的任何一个都快。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T17:56:18.873

这些代码示例在逻辑上并不相同。您忘记了`dynamic_cast`将类继承纳入帐户，并且比较 typeid() 仅比较继承树的**叶子**部分。typeid 给你的唯一东西是“与该对象的实际类型相关的一些唯一标识符”。单独使用 typeid() 您无法检查是否可以强制转换为公共基的指针，您只能检查 runtimetype-of-that 是否与 runtimetype-of-otherthing 完全相同。

话虽如此，我认为 static_cast+typeid 在一般意义上应该更快一些，但在某些情况下只会给出错误的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T17:50:15.060

我想任何体面的编译器都能够将两个示例优化为相同的代码。但是，找出答案的唯一方法是测量特定工具链的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T17:42:52.043

只有一种方法可以确定。用 std::chrono 和[high_resolution_clock](http://www.cplusplus.com/reference/std/chrono/high_resolution_clock/)测量它。

# regex - 通过正则表达式将 C1-2 R1-2 更改为 C1-C2 R1-R2

> ID：12588265
> 
> 赞同：0
> 
> 时间：2012-09-25T17:40:37.607
> 
> 标签：regex

我正在修改文件以符合新标准。多年前我只学习了一个星期的 RegEx，但从未广泛使用它。因此，我在这里寻求快速解决方案。有人愿意帮忙吗？

--Updates--
感谢您的所有回复，这里有更多关于问题的详细信息：
以下是文件的快照

```
"Qty"   "Reference" "Part Name" "PCB DECAL" "Manufacturer"  "Description"   "Value"  
"4" "C37 C67-68"    "2.2UF/10V" "C0805" ""  "Capacitor" "2.2UF/10V"  
"2" "CPL1-2"    "CPL"   "CPL-250-200-NOVIA" "Anaren"    ""  "1P510"    
"15"    "M1-15" "HOLE100"   "HOLE100_180"   ""  ""  ""  
"4" "L1-2 L5 L7"    "IND"   "L0603" ""  "MOLDED INDUCTOR, 0.5" PIN SPACING" "2.2nH"  
"9" "R2 R8 R12 R34-35"  "R" "R0603" ""  ""  "0" 
```

基本上我需要检测第 2 列中所有后跟数字的“-”，并插入单词开头的字母之间。

关于语言，我实际上使用的是 Notepad++，认为相同的表达式可以通过移植到 SED 等其他平台来实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T01:13:23.313

```
([A-Za-z]){1,}([0-9]{1,})-([0-9]{1,}) 
```

正则表达式匹配：

*   字符 A 到 Z，a 到 z 一次或多次（第一次捕获），然后是
*   字符 0 到 9 一次或多次（第二次捕获），后跟
*   字符 -，后跟
*   字符 0 到 9 一次或多次（第三次捕获）

替换模式是这样的：

```
$1$2-$1$3 
```

PHP preg 中的示例：

```
$output = preg_replace('/([A-Za-z]){1,}([0-9]{1,})-([0-9]{1,})/', '$1$2-$1$3', $input); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T17:43:43.643

如果您提供更具体的示例以及您使用的语言/实现方式，将会有所帮助。

从字面上理解你的问题，虽然......

```
s/(C|R)(\d)-(\d)/\1\2-\1\3/g 
```

**编辑：**

根据评论，您要替换

```
\b(C|R)(\d+)-(\d+) 
```

和

```
\1\2-\1\3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T17:46:36.833

你必须做这样的事情（Python示例）：

```
>>> import re
>>> test = 'C1-2 R1-2' 
>>> re.sub(r'([A-Z])(\d+)-(\d+)', r'\1\2-\1\3', test)
'C1-C2 R1-R2' 
```

基本上，您需要替换`([A-Z])(\d+)-(\d+)`为`\1\2-\1\3`.

# entity-framework - Entity Framework Code First 如何创建表中字段的名称？

> ID：12588266
> 
> 赞同：0
> 
> 时间：2012-09-25T17:40:36.260
> 
> 标签：entity-framework, entity-framework-4, entity-framework-4.1, poco, code-first

我想知道 Entity Framework Code First 如何在表中创建列。

1 - 什么是命名约定？

2 - 有没有办法知道具有 POCO 属性的列的“可能”名称？

我需要将属性名称与列名称进行比较。

任何帮助深表感谢。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T11:31:51.603

我认为您不会对我的回答感到非常满意，但我可以为您推荐 Rowan Miller 的 Julia Lerman 所著的“Programming Entity Framework: Code First”（第 22 页是开始的地方）。然而，这个主题相当复杂，因为约定可能会被配置覆盖，实际上整本书（或多或少）都是关于它的。看看它是否有帮助。

那么我相信你可以使用约定规则“猜测”列的名称，但是，你能确定有人不会用配置覆盖它吗？

# bash - 在 bash 脚本中使用 sed 提取子字符串，以模式拆分

> ID：12588276
> 
> 赞同：2
> 
> 时间：2012-09-25T17:41:17.770
> 
> 标签：bash, shell, sed

解决方案：

```
#!/bin/bash
for f in *.mp3; do
    d="${f% - *}"
    if [ -d $d ]; then
        mv "$f" "$d/";
    else 
        mkdir "$d" && mv "$f" "$d/";
    fi 
done 
```

* * *

我正在尝试这个：

```
$ echo "foo - bar.ext" | sed 's/\('" - "'\).*/\1/' | sed 's/ - //' 
```

这给了我“foo”。我想有更好的方法...不要打我，我是 sed 的新手。但是现在，如何将它包含在这样的循环中：

```
#!/bin/bash
for f in *.ext; do
    d="${f%.*}"
    #Extract Filename String before the " - " and write back to $d
    mkdir "$d" && mv "$f" "$d/";
done 
```

提前致谢

*更多信息：*

$f 应保持不变，而存储在 $d 中的目录名称应仅包含与“foo - bar.ext”匹配的模式的“foo”部分。

基本上，应将遵循模式“foo - bar.ext”的文件列表移动到名为“foo”的目录中。

例如： foo1 - bar1.ext foo1 - bar2.ext foo1 - bar2.ext --> 将被移动到子目录 "foo1"

anotherfoo - anotherbar.ext --> 将被移动到子目录“anotherfoo”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:58:34.367

你几乎已经有了。您的代码片段中仅缺少三个字符。

```
#!/bin/bash
for f in *.ext; do
    d="${f% - *}"
    mkdir "$d" && mv "$f" "$d/";
done 
```

# php - 在调度事件上访问 ViewModel 变量

> ID：12588278
> 
> 赞同：1
> 
> 时间：2012-09-25T17:41:20.077
> 
> 标签：php, zend-framework2

这是一个 ZF2 问题。

我正在尝试更改我的模板，具体取决于我的控制器上设置的变量（因为我要决定使用哪个模板）。在我的 onBooststrap 模块中，我有：

```
$this->eventManager->attach('dispatch', function($e)
    {
        if (0 === strpos($e->getRouteMatch()->getParam('controller'), __NAMESPACE__, 0))
        {
            $e->getViewModel()->setTemplate('layout');
        }

    }, -100); 
```

在我的控制器中：

```
class IndexController extends AbstractActionController
{
    public function indexAction ()
    {
        $view = new \Zend\View\Model\ViewModel();
        $view->setVariable("layout", "layout");
        return $view;
    }
} 
```

但是，我如何访问该视图变量“布局”，以便我可以在 setTemplate 的调度事件中更改它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T18:01:40.637

查看`onDispatch`方法和`MvcEvent`类，似乎有一个`getResult()`方法，这可能包含控制器操作的结果。

否则你看过布局控制器插件吗？该插件将允许您更改模板：

```
$this->layout('new layout'); 
```

当然，这需要在控制器内部，并且很可能需要将模板添加到模板映射中。

# magento - 如何在发票中只获取父项而不是子项

> ID：12588282
> 
> 赞同：2
> 
> 时间：2012-09-25T17:41:38.730
> 
> 标签：magento, invoice, orders

我正在努力使我们的装箱单和发票更有用，尤其是当我们捆绑产品时。

如何在发票中只显示父项而不显示子项？

当我使用时，`$order->getAllItems()`我在输出中得到两行：

```
parent-child sku

child sku 
```

如果我使用`$order->getAllVisibleItems()`我只会得到父母，这就是我想要的。

```
Parent sku 
```

现在 `invoice->getAllItems`with 产生两条线 Parent-Child 和 Child 但是`invoice->getAllVisibleItems`with 不产生线

所以它会在发票上显示 qty 和 amt 两次。对客户或包装商不利。

```
<?php
require_once '../mage1/app/Mage.php';
require_once('Zend/Pdf.php');  
$app = Mage::app();
Mage::register('isSecureArea', true); 

$orderId = '500000555' ;  

$order = Mage::getModel('sales/order')->loadByIncrementId($orderId);

foreach ($order->getAllVisibleItems() as $item){
    echo 'ITEM: ' . $item->getSku() . '<br />';
}
//vs invoice
echo 'Invoice Section <br />' ;

if ($order->hasInvoices()) {
    echo 'Order has invoices'  . '<br />';
foreach ($order->getInvoiceCollection() as $_eachInvoice) {

    foreach ($_eachInvoice->getAllVisibleItems as $invitem){
    //foreach ($_eachInvoice->getAllItems() as $invitem){
        //echo 'Object <br />';
        var_dump(get_object_vars($invitem));
        //print_r($invitem);  echo '<br /><br /><br /><br />';
        echo 'INVOICE ITEM: ' . $invitem->getSku() . '<br />';
        }
    }
} else { echo 'no invoices' ; };
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:11:27.550

仅使用`$invoice->getAllVisibleItems()`和订单使用`$order->getAllVisibleItems()`

只是一句忠告，试着用`get_class_method`, `get_class`,`get_class_vars`来熟悉一门课程。

# makefile - Makefile 不会做目标文件的最终副本

> ID：12588290
> 
> 赞同：0
> 
> 时间：2012-09-25T17:42:04.503
> 
> 标签：makefile

我有一个有趣的问题。我有一个构建文件的生成文件，然后对它们进行后期处理，然后将最终处理的文件复制到发布文件夹。

当我运行`make`时，它将正确构建所有内容，然后完成而不将最终目标文件复制到发布文件夹。我必须再次运行 make 才能看到生成的（新建的）文件比发布目标新，并将其复制过来。

我什`sleep 5`至延迟了最终发布目标检查，以允许任何文件 IO 完成并使用正确的时间戳更新新建的文件。

```
release : ./release/file.xml

./release/file.xml : gen/file_processed.xml sleep
    cp gen/file_processed.xml ./release/file.xml

gen/file_processed.xml : gen/file.xml
    python2.6 post_processing_scripts.py #saves output as gen/file_processed.xml

gen/file.xml : source_files
    command to compile gen/file.xml

sleep :
    sleep 5 
```

不起作用的是 make 认为在它编译所有其他目标并执行睡眠配方等待 5 秒后，它仍然说`gen/file_processed.xml`比发布目标更旧。我必须重新运行 make 才能完成最后一步。

关于我可以添加什么来让生成的文件在根据发布目标检查它之前完成更新的任何想法？

非常感谢您的帮助，我很感激！

干杯，

布拉德

更新：

我更改了代码，以便删除有关始终执行睡眠命令的问题。但是，它的行为仍然与上述相同。

```
release : ./release/file.xml

./release/file.xml : gen/file_processed.xml
    cp gen/file_processed.xml ./release/file.xml

gen/file_processed.xml : gen/file.xml
    python2.6 post_processing_scripts.py #saves output as gen/file_processed.xml; sleep 5;

gen/file.xml : source_files
    command to compile gen/file.xml 
```

我仍然需要运行两次 make 才能复制最终文件。

我将尝试确保这个示例准确地映射了我原来的 makefile 正在做的事情。

# delphi - MDI 应用程序在空闲时消耗 100% cpu

> ID：12588292
> 
> 赞同：11
> 
> 时间：2012-09-25T17:42:15.663
> 
> 标签：delphi, c++builder, mdi

我正在开发用 C++ Builder 2010 编写的 MDI 应用程序。当子窗口处于最大化状态时，应用程序在空闲模式下消耗 100% 的 CPU 时间。

我使用了“非常昏昏欲睡”的分析器，它显示该函数`Sd_childFinalize`正在使用 99% 的 CPU 资源，但我在我的代码中找不到它。sd_Child.cpp 是定义 MDI 子窗体类的 C++ 单元。我只`@@Sd_child@Finalize`在可执行文件中找到符号。请帮助我了解如何调试此问题。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-25T20:15:39.823

这似乎是一个与操作相关的已知问题，以及它们在应用程序空闲处理程序中的更新方式。以下 QC 报告描述了您的方案： http://qc.embarcadero.com/wc/qcmain.aspx?d= [12706](http://qc.embarcadero.com/wc/qcmain.aspx?d=12706)

根据 QC 报告，您的问题的解决方案是将[TApplication.ActionUpdateDelay](http://docwiki.embarcadero.com/Libraries/en/Vcl.Forms.TApplication.ActionUpdateDelay)属性设置为大于 0 的值。

我很想知道为什么存在最大化的客户端表单会导致 VCL 的 DoActionIdle 在繁忙的循环中被调用。大概执行一个动作的 OnUpdate 处理程序会导致另一个排队的消息，以及另一个空闲周期，等等。我曾认为处理这将是解决此问题的最佳方法，但也许很难实现。

# java - 在 Ant 构建脚本中覆盖目标以将 jar 文件复制到 libs 目录

> ID：12588298
> 
> 赞同：2
> 
> 时间：2012-09-25T17:42:56.690
> 
> 标签：java, android, code-organization, project-organization

我目前在一个名为`bbct`. 这包含子目录`swing`、Swing 版本、`android`Android 版本以及`common`（可能）在两者之间共享的代码。`swing`和`common`子目录被组织为具有`nbproject`、`src`、`build`和子目录的NetBeans 项目`dist`。`android`子目录是一个带有`src`、和子目录`res`的Android SDK 项目`gen`。

现在我需要确保，当我构建我的 Android 项目时，其中的 JAR 文件`common`是通过 Ant 脚本构建的。我相信我可以将必要的信息添加到我的 android 项目的 Ant 脚本中来执行此操作。（我还没有尝试过。）我还需要访问`bbct-common.jar`从我的 Android 项目生成的类，并将这些类或 JAR 文件本身包含在为我的 Android 应用程序生成的 APK 文件中。我该如何做这最后一部分？

**更新：**

从[Ant 构建脚本、antcall、依赖项等](https://stackoverflow.com/questions/8790/ant-build-scripts-antcall-dependencies-etc)中，我了解到我可以使用该`<ant>`任务来确保我的`bbct-common.jar`文件是最新的。我还从[How do I reference external jar files in a common directory (not libs) to build android project using ant 中学到了知识？](https://stackoverflow.com/questions/5312478/how-do-i-reference-external-jar-files-in-a-common-directory-not-libs-to-build),[使用 Android 生成的 ant 构建文件时如何为 JAR 指定 lib 文件夹？](https://stackoverflow.com/questions/2611105/how-to-specify-lib-folder-for-jars-when-using-android-generated-ant-build-file)，以及[如何使用 ant 构建带有外部库的 android 应用程序？](https://stackoverflow.com/questions/2465285/how-to-build-an-android-app-with-external-libraries-using-ant)我需要将 JAR 文件复制到`bbct/android/libs`. 现在我的问题是，我在我的`bbct/android/build.xml`文件中覆盖什么目标来做到这一点？特别是，我想覆盖一个目标，以便`debug`和`release`构建调用它。这两个目标是否存在共同的依赖关系，通常执行这些类型的任务？

# java - CRUD 方法不使用 hsql-db 连接？

> ID：12588300
> 
> 赞同：0
> 
> 时间：2012-09-25T17:42:59.567
> 
> 标签：java, database, eclipse, crud, hsqldb

我目前正在编写一个 CRUD 程序，我正在使用 hsql-db：

这是我的 hsql-db 连接器类：

```
public class hsqlmanager {

    private static final Logger log = Logger.getLogger(hsqlmanager.class);

    private static Connection con=null;

    private static void openConnection(){
        try {
            Class.forName("org.hsqldb.jdbcDriver" );
            log.info("Loaded JDBC Driver");
        } 
        catch (Exception e) {
            log.error("ERROR: failed to load JDBC driver - " + e.getMessage());
            return;
        }

        try {
            con = DriverManager.getConnection("jdbc:hsqldb:hsql://localhost/db_test","SA","");
            log.info("Connection established");         
        }
        catch(SQLException e){
            log.error("db connection error Exception: " + e.getMessage());
        }
    }

    public static void closeConnection() {
        try {
            con.close();
            log.info("DB conn closed");
        }
        catch(SQLException e) {
            log.error("Error at closing" + e.getMessage());
        }
    }

    public static Connection getConnection() {
        if (con==null){
            openConnection();
        }
        else {
            try {
                if(con.isClosed()){
                    con = DriverManager.getConnection("jdbc:hsqldb:hsql://localhost/db_test","SA","");
                    log.info("DB connection re-opened.");
                }
            } catch(SQLException e){
                log.error("re-open mistake" + e.getMessage());
                return null;
            }
        }

        return con;
    }

} 
```

这是我的crud类：

```
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.ArrayList;

import org.apache.log4j.Logger;

public class DAOProdukt implements IDAOProdukt {

    private static final Logger log = Logger.getLogger(DAOProdukt.class);
    Connection conn;

    public DAOProdukt(){
        conn = hsqlmanager.getConnection();
    }
    //created ein Produkt p
    @Override
    public void create(Produkt p) {
        if(p==null) {           throw new IllegalArgumentException("Erstellen von null-Objekten in der DB nicht möglich");
        }
        PreparedStatement ps=null;

        try {
            ps = conn.prepareStatement("INSERT INTO Produkt(name, kategorie, delete) VALUES(?, ?, ?, ?);");
        } catch (SQLException e1) {
            log.error("Cannot establish db connection");
            e1.printStackTrace();
        }

        try {

            ps.setString(1, p.getName());
            ps.setString(2, p.getKategorie());
            ps.setBoolean(3, p.isDeleted());
            ps.execute();
            ps.close();

            log.info("Produkt created.");
        }
        catch (SQLException e) {
            log.error("Produkt couldn`t be created: " + e.toString());
        }

    }
} 
```

编译器总是指向 crud 类并给我错误信息：

```
log.error("Cannot establish db connection"); 
```

非常感谢你的回答！！！

PS.：我使用该命令运行服务器： java -classpath lib/hsqldb.jar org.hsqldb.server.Server --database.0 file:hsqldb/hemrajdb --dbname.0 db_test

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T18:09:58.800

`jdbc:hsqldb:hsql://localhost/db_test`在尝试连接之前，您必须启动 HSQLDB 服务器以在 URL 处为数据库提供服务。

请参阅指南：

[http://hsqldb.org/doc/2.0/guide/running-chapt.html#rgc_server_modes](http://hsqldb.org/doc/2.0/guide/running-chapt.html#rgc_server_modes)

您评论说您已经启动了服务器。因此，我更仔细地查看了您的代码。这里有一个问题：

```
 try {
        ps = conn.prepareStatement("INSERT INTO Produkt(name, kategorie, delete) VALUES(?, ?, ?, ?);");
    } catch (SQLException e1) {
        log.error("Cannot establish db connection");
        e1.printStackTrace();
    } 
```

当您捕获异常时，您应该记录异常消息。您记录的固定消息可能不正确。

如果您查看 INSERT 语句，则会列出三列，但有四个参数作为值。HSQLDB 将抛出异常并提供信息性消息。但是您的代码会忽略该消息并打印您自己的错误消息。

# jaxb - XSD 允许扩展、兼容性和验证

> ID：12588301
> 
> 赞同：3
> 
> 时间：2012-09-25T17:43:00.147
> 
> 标签：jaxb, xsd

我想为一个应用程序创建一个 XSD，而另一个 XSD 扩展了第一个（仅通过添加元素）。

我希望第二个应用程序生成的 XML 文件对第一个应用程序有效。

我试过这个：

第一个 XSD：

```
<?xml version="1.0" encoding="UTF-8" ?>
<xs:schema xmlns="example"
       xmlns:xs="http://www.w3.org/2001/XMLSchema"
       targetNamespace="example"
       elementFormDefault="qualified" attributeFormDefault="qualified">

  <xs:complexType name="typeA">
    <xs:sequence>
      <xs:element name="elA" type="xs:string" />
      <xs:any namespace="##any" minOccurs="0" processContents="lax" />
    </xs:sequence>
  </xs:complexType>

  <xs:element name="root" type="typeA" />
</xs:schema> 
```

第二个 XSD：

```
<?xml version="1.0" encoding="UTF-8" ?>
<xs:schema xmlns="example"
       xmlns:xs="http://www.w3.org/2001/XMLSchema"
       targetNamespace="example">
  <xs:redefine schemaLocation="firstXSD.xsd">
    <xs:complexType name="typeA">
      <xs:complexContent>
       <xs:extension base="typeA">
         <xs:sequence>
           <xs:element name="newElement" type="xs:string" />
         </xs:sequence>
       </xs:extension>
      </xs:complexContent>
    </xs:complexType>
  </xs:redefine>
</xs:schema> 
```

必须对第一个 XSD（但不是第二个）有效的 XML 示例：

```
<?xml version="1.0" encoding="UTF-8" ?>
<root xmlns="example">
  <elA>MyString</elA>
</root> 
```

必须对**两个**XSD都有效的 XML 示例

```
 <?xml version="1.0" encoding="UTF-8" ?>
<root xmlns="example">
  <elA>MyString</elA>
  <newElement>MyNewString</newElement>
</root> 
```

以前的 XSD 违反了“唯一粒子属性”，我希望修复这个问题。我可以编辑两个 XSD，但我希望能够在完成第二个之前分发第一个。

我怎样才能做到这一点（当由 JAXB 检查时，两个模式都必须有效）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T19:52:43.593

你真正想要的是一个限制。当您进行扩展时，通配符仍然是内容模型的一部分，这就是您违反唯一粒子归属的原因。您实际上想要做的是将通配符替换为更具限制性的内容，即特定元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T22:06:00.980

有人可能会说：如果你可以编辑两个 XSD，为什么还要重新定义呢？

我将向您展示如何使它与 XSD 重新定义一起工作，至少从 XSD 的角度来看。但是，鉴于 JAXB 的限制，它不能开箱即用。如果您还使用自动 XSD 重构作为额外的步骤，那么您可以使其工作，并且在此过程中，您将保留您在使用 xsd:redefine 时看到的价值主张。

因此，在此之前，这是另一种也使用组合但没有`xsd:redefine`; 从维护和验证的角度来看，您获得的价值和使用情况大致相同。

我将您的第一个 XSD 称为`Model1`，将您的第二个 XSD 称为`Model2`. 我将从一个 XSD 开始，它将为您提供与`xs:redefine`.

常见项目，**xsd-allow-extension-compatibility-and-validation-common-items.xsd**：

```
<?xml version="1.0" encoding="utf-8"?>
<!--XML Schema generated by QTAssistant/XSD Module (http://www.paschidev.com)-->
<xs:schema xmlns="example" 
       xmlns:xs="http://www.w3.org/2001/XMLSchema" 
       targetNamespace="example" 
       elementFormDefault="qualified" attributeFormDefault="qualified"> 

  <xs:group name="typeA"> 
    <xs:sequence> 
      <xs:element name="elA" type="xs:string" /> 
    </xs:sequence> 
  </xs:group> 

  <xs:element name="root" type="typeA" /> 
</xs:schema> 
```

Model1“项目”，**xsd-allow-extension-compatibility-and-validation-model1-items.xsd**：

```
<?xml version="1.0" encoding="utf-8"?>
<!--XML Schema generated by QTAssistant/XSD Module (http://www.paschidev.com)-->
<xs:schema xmlns="example" 
       xmlns:xs="http://www.w3.org/2001/XMLSchema" 
       targetNamespace="example" 
       elementFormDefault="qualified" attributeFormDefault="qualified"> 

  <xs:complexType name="typeA"> 
    <xs:sequence> 
      <xs:group ref="typeA" /> 
      <xs:any namespace="##any" minOccurs="0" processContents="lax" /> 
    </xs:sequence> 
  </xs:complexType>  
</xs:schema> 
```

Model2“项目”，**xsd-allow-extension-compatibility-and-validation-model2-items.xsd**：

```
<?xml version="1.0" encoding="utf-8"?>
<!--XML Schema generated by QTAssistant/XSD Module (http://www.paschidev.com)-->
<xs:schema xmlns="example" 
       xmlns:xs="http://www.w3.org/2001/XMLSchema" 
       targetNamespace="example" 
       elementFormDefault="qualified" attributeFormDefault="qualified"> 

  <xs:complexType name="typeA"> 
    <xs:sequence> 
      <xs:group ref="typeA" /> 
        <xs:element name="newElement" type="xs:string" />
    </xs:sequence> 
  </xs:complexType>  
</xs:schema> 
```

如果您将 Common Items 和 Model1，或 Common Items 和 Model2 传递给 JAXB 编译器，它将完全按照您想要的方式创建类。为了便于使用（测试）和说明，我创建了另外两个 XSD：

型号1：

```
<?xml version="1.0" encoding="utf-8"?>
<!--XML Schema generated by QTAssistant/XSD Module (http://www.paschidev.com)-->
<xs:schema xmlns="example" 
       xmlns:xs="http://www.w3.org/2001/XMLSchema" 
       targetNamespace="example" 
       elementFormDefault="qualified" attributeFormDefault="qualified"> 
    <xs:include schemaLocation="xsd-allow-extension-compatibility-and-validation-common-items.xsd"/>
    <xs:include schemaLocation="xsd-allow-extension-compatibility-and-validation-model1-items.xsd"/>
</xs:schema> 
```

型号2：

```
<?xml version="1.0" encoding="utf-8"?>
<!--XML Schema generated by QTAssistant/XSD Module (http://www.paschidev.com)-->
<xs:schema xmlns="example" attributeFormDefault="qualified" elementFormDefault="qualified" targetNamespace="example" xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:include schemaLocation="xsd-allow-extension-compatibility-and-validation-common-items.xsd"/>
    <xs:include schemaLocation="xsd-allow-extension-compatibility-and-validation-model2-items.xsd"/>
</xs:schema> 
```

这是您在 Model1 上运行 xjc 时得到的结果：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "typeA", propOrder = {
    "elA",
    "any"
})
public class TypeA {

    @XmlElement(required = true)
    protected String elA;
    @XmlAnyElement(lax = true)
    protected Object any;

    /**
     * Gets the value of the elA property.
     * 
     * @return
     *     possible object is
     *     {@link String }
     *     
     */
    public String getElA() {
        return elA;
    }

    /**
     * Sets the value of the elA property.
     * 
     * @param value
     *     allowed object is
     *     {@link String }
     *     
     */
    public void setElA(String value) {
        this.elA = value;
    }

    /**
     * Gets the value of the any property.
     * 
     * @return
     *     possible object is
     *     {@link Element }
     *     {@link Object }
     *     
     */
    public Object getAny() {
        return any;
    }

    /**
     * Sets the value of the any property.
     * 
     * @param value
     *     allowed object is
     *     {@link Element }
     *     {@link Object }
     *     
     */
    public void setAny(Object value) {
        this.any = value;
    }

} 
```

...当您再次运行 xjc 模型2时：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "typeA", propOrder = {
    "elA",
    "newElement"
})
public class TypeA {

    @XmlElement(required = true)
    protected String elA;
    @XmlElement(required = true)
    protected String newElement;

    /**
    * Gets the value of the elA property.
    * 
    * @return
    *     possible object is
    *     {@link String }
    *     
    */
    public String getElA() {
        return elA;
    }

    /**
    * Sets the value of the elA property.
    * 
    * @param value
    *     allowed object is
    *     {@link String }
    *     
    */
    public void setElA(String value) {
        this.elA = value;
    }

    /**
    * Gets the value of the newElement property.
    * 
    * @return
    *     possible object is
    *     {@link String }
    *     
    */
    public String getNewElement() {
        return newElement;
    }

    /**
    * Sets the value of the newElement property.
    * 
    * @param value
    *     allowed object is
    *     {@link String }
    *     
    */
    public void setNewElement(String value) {
        this.newElement = value;
    }

} 
```

Model1 和 Model2 XSD 将完全按照您的预期方式验证您的 XML。

下图显示了 XSD 文件之间的关系。绿色表示“xsd:include”，箭头指向“包含”。

![QTAssistant XSD文件图](../Images/607053a41612de9bfa6c52a78c76cc1c.png)

更新：我刚刚注意到，根据@Kevin 的评论，您在重新定义中的新元素上没有 maxOccurs。在这种情况下，您可以使用一个重新定义，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<!--XML Schema generated by QTAssistant/XSR Module (http://www.paschidev.com)-->
<xsd:schema xmlns="example" attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="example" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <xsd:redefine schemaLocation="xsd-allow-extension-compatibility-and-validation.xsd">
    <xsd:complexType name="typeA">
      <xsd:complexContent>
        <xsd:restriction base="typeA">
          <xsd:sequence>
            <xsd:element name="elA" type="xsd:string" /> 
            <xsd:element name="newElement" type="xsd:string" />
        </xsd:sequence>
        </xsd:restriction>
      </xsd:complexContent>
    </xsd:complexType>
  </xsd:redefine>
</xsd:schema> 
```

唯一的问题似乎是 JAXB（最新）仍然使用通配符生成一个类。

更新 2：根据 Kevin 的评论，两个避免两个重新定义，应该使用一个组而不是 xsd:any。

如果您实际上计划使用多个元素来扩展新模型，请继续阅读。下面是唯一的方法，它需要使用一个组来进一步细化任何粒子。

```
<?xml version="1.0" encoding="utf-8"?>
<!--XML Schema generated by QTAssistant/XSR Module (http://www.paschidev.com)-->
<xsd:schema xmlns="example" attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="example" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <xsd:redefine schemaLocation="xsd-allow-extension-compatibility-and-validation.xsd">
    <xsd:complexType name="typeA">
      <xsd:complexContent>
        <xsd:restriction base="typeA">
          <xsd:sequence>
                  <xsd:element name="elA" type="xsd:string" /> 
                  <xsd:group ref="group1" minOccurs="0">
        </xsd:sequence>
        </xsd:restriction>
      </xsd:complexContent>
    </xsd:complexType>
  </xsd:redefine>
        <xsd:group name="group1">
          <xsd:sequence>
            <xsd:element name="newElement" type="xsd:string" />
        </xsd:sequence>

        </xsd:group>
</xsd:schema> 
```

最终结果是新的 XSD 可用于验证 Model1，而原始文件仍然是 Model1。

# java - 分布式应用

> ID：12588305
> 
> 赞同：-2
> 
> 时间：2012-09-25T17:43:20.457
> 
> 标签：java, sockets, rmi, distributed-apps

我正在尝试制作一个分布式应用程序，并且可以真正使用一些帮助来创建它，我想要做的是

计算机 1 和计算机 2 通过 LAN 连接。

计算机 1 接受客户的订单并将其发送给 comp2。订单完成后，计算机 2 向计算机 1 发送确认。

这是一个非常简单的代码，我认为我可以在它们之间发送文本而不是发送对象，尽管我还不确定，这会更好。有任何想法吗？

我不确定我应该使用什么来在计算机之间进行通信，我应该使用我有一点经验的套接字还是我以前从未使用过的 RMI 或 REST 之类的东西，但不介意学习是否不需要很多时间，因为有尽快完成此代码。

非常感谢您的帮助谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:04:17.533

不知道为什么你投了 3 票，但我会尽力提供帮助，不会提供代码片段，因为可以找到。

如果您使用 TCP/IP 连接：

这

> comp1 接受客户的订单并将其发送给 comp2。Comp2 在订单完成时向 comp1 发送确认。

这是第 1 步：如果发件人可以写，则阅读器“已确认”。我不会使用回复消息。与旧式 RPC 相同。

正如我所看到的，这是一个 UDP 要求，而不是 comp1 应该向 comp2 发送一条带有“已确认”的消息，而 comp2 应该发回“已确认”的“确认”，这是一个 looool，我讨厌 UDP这个原因。

要打开 TCP 连接，其中一个应该监听（在这种情况下是 comp2），另一个（ comp2 ）它只是连接并发送消息。如果他有一个写入错误，那么 comp2 就无法接收，ofc。即使您使用 REST，comp2 也应该在服务器端。

对于“TCP/IP 客户端服务器示例”的代码搜索。

我希望它有帮助！

# javascript - Appcelerator - 如何更改选项卡按钮样式？

> ID：12588308
> 
> 赞同：1
> 
> 时间：2012-09-25T17:43:22.083
> 
> 标签：javascript, ios, titanium, appcelerator

我正在开发 Titanium 并为 iOS 开发，我想知道是否有办法更改选项卡中选项卡按钮的样式。我想让它看起来平坦并具有不同的背景颜色并删除它具有的渐变。

我尝试了以下方法：

```
var tab2 = Titanium.UI.createTab({

       title:'Members',
       window:peopleInGroup,
       backgroundColor : '#0f0',
       backgroundSelectedColor : '#0f0',
       backgroundFocusedColor : '#0f0'

}); 
```

但是背景颜色没有改变。选项卡中的文本也与底部对齐，但我希望它位于按钮的中心。如何更改选项卡按钮的样式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T07:31:01.500

在 Appcelerator Titanium 中，还没有任何更改“TAB”背景颜色的方法。

这只有BackgroundImage Change和Image Change，

[您可以尝试像这样](https://gist.github.com/853935)为更改颜色创建自定义选项卡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-03T00:16:34.317

从 SDK 版本 3 开始，[`Titanium.UI.TabGroup`](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.UI.TabGroup-property-activeTabBackgroundSelectedColor)具有`tabsBackgroundColor`设置非活动选项卡的默认背景颜色的属性。所有平台（iOS、Android、移动网络等）都支持此功能

# asp.net - 具有负载平衡的 HttpContext.Current.Session

> ID：12588309
> 
> 赞同：0
> 
> 时间：2012-09-25T17:43:27.903
> 
> 标签：asp.net, session, httpcontext

我正在观察一个奇怪的情况，我希望有人有一些见识。这不是一个理想的情况（试图支持遗留的东西）。这个例子说明了我所观察到的：

我的负载平衡服务器池中有一台服务器。在从负载平衡 url 加载的外部页面中，我将一些值填充到 Page_Load 中的 HttpContext.Current.Session 中。

在该页面上是一个 iframe，它从特定服务器 url（负载平衡页面命中的同一服务器）加载内部页面。内页的 Page_Load 中的 HttpContext.Current.Session 没有我刚从外页塞进去的值。

我曾经认为它会根据用户 cookie 中的任何内容特定于机器。HttpContext.Current.Session 是否依赖于 url？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:51:26.957

这里有很多因素。首先，您确定它是从同一台机器加载 url 吗？请记住，iframe 是基于客户端的，而不是基于服务器的。这意味着当 iframe 加载另一个页面时，它也会通过负载平衡器，除非您有某种机制来确保它保持在同一页面上（例如粘性会话）。

其次，您用于 iframe 的 url 是否使用相同的域名？两者都使用相同的传输方式（http 或 https）吗？如果其中任何一个不同，它将为 iframe 创建一个新会话。

# c# - 授权 Web 服务请求

> ID：12588312
> 
> 赞同：1
> 
> 时间：2012-09-25T17:43:30.567
> 
> 标签：c#, iphone, web-services, security

我们已经建立了大量的网络服务并将它们托管在我们的内部服务器上，这些将被我们的 iPhone 应用程序使用。iPhone 应用程序的最终用户无需登录应用程序，他们无需任何凭据即可使用该应用程序。

每当 Web 服务收到请求时；我想授权这些请求来自 iPhone 应用程序。我怎样才能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T17:47:05.603

你希望它有多安全？

最简单且广泛使用的技术是要求所有 Web 服务请求都包含 ApiKey 标头。然后，服务器必须根据已知的允许 ApiKey 列表验证 ApiKey。如果通过 SSL 进行通信，这是相当安全的（需要反汇编客户端代码才能找到密钥），另一方面，如果通信是纯 http，则 ApiKey 很容易被嗅探。

# c++ - 检索 C++ 程序/文件中使用的指针变量列表

> ID：12588314
> 
> 赞同：2
> 
> 时间：2012-09-25T17:43:38.773
> 
> 标签：c++, parsing, pointers

有什么方法可以编写一个方法来返回 C++ 文件中使用的所有指针变量名称。

例如：c++ 文件 (abc.cpp)

```
.......
//some code here
.....
emp* emp1 = do_something();
int a = 10;
student* std1 = getdata(); 
```

... ..

当我解析这个文件（abc.cpp）时，我应该在输出中得到两个变量。

*   输出

emp1 标准 1

是否有一些内置方法/过程可以告诉变量的类型并仅列出变量的指针类型。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:50:39.490

在 C++ 本身中没有内置的方法或过程来执行此操作。但是，您可以找到一个开源 c++ 解析器并使用它来执行此操作。

对此有一个堆栈溢出讨论：[Good tools for creating a C/C++ parser/analyzer](https://stackoverflow.com/q/526797/27130)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T17:59:03.517

当然，你不能用标准的 C++ 工具来做到这一点。我做这项工作的算法是这样的：

1.  将整个 .cpp 读入 std::string：

    ```
    std::ifstream ifs("filename.cpp");
    std::string str((std::istreambuf_iterator<char>(ifs)), 
                     std::istreambuf_iterator<char>()); 
    ```

2.  查找该字符串中位于 '*' 和 '=' 符号之间的所有字符串，并将它们放在数组 std::vector 中 - 确保它是非常粗糙的算法，但适合简单的任务；

3.  对于此数组中的每个字符串，删除所有空格。
4.  打印所有数组元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T18:31:54.273

这是代码：

```
#include <iostream>
#include <fstream>
#include <string>
#include <algorithm>
#include <vector>
#include <set>
#include <cctype>

using namespace std;

vector< string > types;
set< string > names;

int main() {
    types.push_back( "int" );
    types.push_back( "char" );
    types.push_back( "float" );
    types.push_back( "double" );
    types.push_back( "bool" );
    types.push_back( "unsigned" );
    types.push_back( "long" );
    types.push_back( "short" );
    types.push_back( "wchar_t" );

    // ect

    fstream in( "input.cpp", fstream::in );
    string row;
    string tmp;

    while( in >> tmp ) {
        if( tmp == "struct" || tmp == "class" ) {
            in >> tmp;
            string::iterator it = find( tmp.begin(), tmp.end(), '{' );
            tmp.erase( it, tmp.end() );
            types.push_back( tmp );
        }
        row += tmp;
    }

    for( int i=0; i<types.size(); ++i ) {
        int it=-1;

        while( ( it=row.find( types[ i ], it+1 ) ) ) {
            if( it == -1 ) break;
            int spos;
            for( spos=it; row[ spos ] != '*'; ++spos );
            spos++;

            string ptr;

            while( ( isalnum( ( int )row[ spos ] ) || row[ spos ] == '_' ) && spos < row.size()  ) {
                ptr += row[ spos ];
                spos++;
            }

            names.insert( ptr );
        }
    }

    for( set< string >::iterator i=names.begin(); i!=names.end(); ++i ) {
        cout << *i << " ";
    }

    return 0;
} 
```

我基本上做的是，我将整个输入程序放在一行中，没有空格，然后检查用户定义的结构或类，我将它们插入到类型向量中，最后我搜索每种类型，如果存在的话在行中形成`<type>*`。然后，我打印它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T17:51:13.760

哪有这回事。您必须打开文件并解析其内容以找出您想要查找的内容。您可以使用[Boost 正则表达式](http://www.boost.org/doc/libs/1_51_0/libs/regex/doc/html/index.html)来执行此操作。

# playframework - 如何在 Play 框架 2 中获取绝对路由 url 作为字符串？

> ID：12588318
> 
> 赞同：23
> 
> 时间：2012-09-25T17:44:13.370
> 
> 标签：playframework, playframework-2.0

我目前通过以下方式获取相对 url 路由作为字符串：

```
String url = controllers.directory.routes.Directory.viewOrganisation( org.id ).url(); 
```

这很好用，但是我想获得完整的绝对网址。我相信这很简单，我似乎找不到它。

或者，如何在视图中获取当前域以添加到相对 url？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-25T18:17:11.107

确实很简单，并且在堆栈上也得到了回答

遵循这个问题：[如何从 Play 2 Java 上的路由反向生成绝对 URL？](https://stackoverflow.com/questions/11158750/how-to-reverse-generate-a-url-from-a-route-on-play-2-java)

一般来说，您需要：

```
routes.MyController.myMethod().absoluteURL(request()); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-01-31T13:15:17.533

对于 Scala 程序员：在 Play 2.2.x 中，absoluteURL 以这种方式重载：

```
def absoluteURL(secure: Boolean = false)(implicit request: RequestHeader): String 
```

所以如果你只写

```
routes.MyController.myMethod().absoluteURL(request) 
```

你会得到一个错误：

```
Overloaded method value [absoluteURL] cannot be applied to (play.api.mvc.Request[play.api.mvc.AnyContent]) 
```

有两种选择。您可以将请求声明为隐式：

```
def myMethod() = Action { implicit request =>
    ...
} 
```

并完全摆脱参数（你可以这样做，因为另一个有默认值）：

```
routes.MyController.myMethod().absoluteURL() 
```

或者您必须明确指定这两个参数。

我在这里写这个答案，因为问题是“如何在 Play 框架 2 中将绝对路由 url 作为字符串获取”，并且接受的答案仅适用于 Java。Scala 版本有它的细微差别。

# matlab - 如何使用 matlab 计算 CTFT？

> ID：12588320
> 
> 赞同：0
> 
> 时间：2012-09-25T17:44:21.583
> 
> 标签：matlab, signal-processing, fft

我正在尝试使用 matlab 找到一个需要我计算输入信号的傅立叶变换的因子。问题是这样向我说明的：

```
fbin = 50HZ
0 <= n <= 1999
alpha = F {Blackman[2000] . cos[-2pi . fbin . n/2000]} (f)

where F is the Continous Time Fourier Transform operator. 
```

我的 matlab 代码如下所示：

```
blackman_v = blackman(2000);
signal_x = cos(-2 * pi() .* fbin * (0:(1999)) ./ 2000) .* blackman_v';
fft_real = abs(fft(signal_x, 2000));
alpha = fft_real(51); %51 is the bin for 50hz => or {(f * N/Fs)+1}==51 
```

我的问题是，对于 49hz，我应该得到大约 412 的值，但我得到大约 250（我实际上是在验证以前的一些结果）。我是否错误地翻译了问题？我已经战斗了很长时间，我真的看不出这里有什么问题。认为50Hz（430）的值是可以的。

真的很感激任何提示！

* * *

编辑

```
blackman_v = blackman(2000);
signal_x = cos(-2 * pi() .* fbin * (0:(1999)) ./ 2000) .* blackman_v';
alpha = abs(freqz(signal_x , 1, 2*pi*50/10000)) 
```

你知道频率是什么吗？我阅读了matlab doc，但我的脑海中仍然没有清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:46:02.583

也许我误解了你的问题，但 Matlab 不适用于连续时间分析。它仅用于数值分析，具有离散值。但是，您可以计算信号的离散时间傅里叶变换 (DFT)，其分辨率取决于信号的长度。您是否使用 Blackmann 窗口，因为您的信号是非周期性的？

如何在 Matlab 中计算 FFT（DFT）：http: [//www.mathworks.se/help/matlab/ref/fft.html](http://www.mathworks.se/help/matlab/ref/fft.html)

任何离散傅立叶变换都会假设您的信号是周期性的。如果不是这样，您将获得频谱泄漏，其中某些频率峰值将其能量“泄漏”到两侧，从而导致频率值模糊不清的峰值。因此，优选地在计算DFT之前使时域信号成为周期性的——周期性到重复一般模式的程度，值不必在周期之间精确，因为噪声可以/将是信号中固有的。在计算 DFT 之前将窗函数应用于时域信号将使信号具有周期性，但您将改变幅度值并引入低频分量。

# r - R - 如何跨相同类型的多个对象提取相同命名元素的值？

> ID：12588323
> 
> 赞同：9
> 
> 时间：2012-09-25T17:44:34.260
> 
> 标签：r

我的工作区中有一系列对象存储一些统计模型的结果。称它们为“model1”、“model2”等。这些模型中的每一个都附加了相同的命名元素集，例如 $coef。我想从包含字符串“model”的所有对象中提取存储在特定元素中的值到列表或向量中。

在命令行输入的以下代码可以满足我的要求：

```
unlist(lapply(parse(text = paste0(ls()[grep("model", ls() )], "$", "coef")), eval)) 
```

由此，我创建了以下通用函数：

```
get.elements <- function(object, element) {
    unlist(lapply(parse(text = paste0(ls()[grep(object, ls() )], "$", element)), eval))
} 
```

但是，当我运行此函数时，出现以下错误：

```
Error in parse(text = paste0(ls()[grep(object, ls() )], "$", element)) : 
  <text>:1:1: unexpected '$'
1: $
   ^ 
```

Q1。为什么从命令行运行此代码而不是作为函数运行时可以工作，更重要的是，我该如何修复它？

Q2。更好的是，有没有更简单的方法可以完成同样的事情？对于统计学家和模拟建模师来说，这似乎是一项常见的任务，我希望基本包中有某种命令，但我一直找不到任何东西。肯定有比我笨重的方法更优雅的方法来做到这一点。

感谢所有帮助。

——戴夫

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-25T18:11:12.590

Q1）代码失败，因为`ls()`在函数的环境中查找并且因为那里没有匹配的对象，

```
paste0(ls()[grep(object, ls() )], "$", element) 
```

相当于

```
paste0("$", element) 
```

要`ls()`查看您的工作区，您需要`ls(pos = 1)`.

Q2）这是一项常见任务，但据了解，没有函数可以执行此操作，因为模型在哪里，它们被称为什么，您要提取哪些对象以及您希望它们如何返回将取决于您的要求. 你上面建议的一个稍微整洁的版本是

```
nm <- paste0("model", 1:2) # adjust numbers as required
unlist(lapply(nm, function(x) get(nm)$coef)) 
```

或者，您可以将模型放在列表中并使用

```
modList <- list(model1, model2)
unlist(lapply(modList, "[[", "coefficients")) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-10-12T20:59:52.533

您可以使用[purrr 包](https://cran.r-project.org/web/packages/purrr/purrr.pdf)中的地图。

```
l1 <- list(a1 = 3, a2 = 2)
l2 <- list(a1 = 334, a2 = 34)
l3 <- list(a1 = 90, a2 = 112)

l <- list(l1, l2, l3)

purrr::map(l, "a1") 
```

这给出了：

```
### Result
[[1]]
[1] 3

[[2]]
[1] 334

[[3]]
[1] 90 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T18:03:32.343

这是一种获得所需输出的方法：

```
get.elements <- function(object, element) {
 unlist(lapply(ls(pattern = object, .GlobalEnv),
        function(x) get(x, .GlobalEnv)[[element, exact = FALSE]]))
} 
```

`element`和都是`object`字符串。

请注意，我使用了参数`exact = FALSE`，因为元素是命名的`coefficients`，而不是`coef`. 这样，您仍然可以使用`element = "coef"`.

# matlab - 6位数字3的组合，不触及订单

> ID：12588324
> 
> 赞同：0
> 
> 时间：2012-09-25T17:44:42.067
> 
> 标签：matlab, math, combinations

假设一个 6 位数字 abcdef。我们希望在不改变数字顺序的情况下生成所有 3 位数字组合。这意味着 abc, ..., ade, ... def 很好，但不是 bac。那是因为 b 不应该出现在 a 之前。Matlab代码很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T17:48:24.230

```
nchoosek({'a','b','c','d','e'},3)

ans = 

    'a'    'b'    'c'
    'a'    'b'    'd'
    'a'    'b'    'e'
    'a'    'c'    'd'
    'a'    'c'    'e'
    'a'    'd'    'e'
    'b'    'c'    'd'
    'b'    'c'    'e'
    'b'    'd'    'e'
    'c'    'd'    'e' 
```

# python - 使用 GAE 远程 api 从 localhost 进行调试 - 连接太晚了？

> ID：12588327
> 
> 赞同：1
> 
> 时间：2012-09-25T17:44:50.630
> 
> 标签：python, google-app-engine, webapp2, remoteapi

尝试使用 Google App Engine `remote_api`，以便我们可以通过 IDE 进行逐行调试。

远程 api 一开始效果很好。该应用程序能够成功地从数据库中检索信息。当 wepapp 响应客户端浏览器时发生错误。

**编码：**

[它与应用引擎文档](https://developers.google.com/appengine/docs/python/tools/remoteapi#Using_Remote_API_in_a_Local_Client)中给出的示例非常相似：

```
from model import My_Entity
from google.appengine.ext.remote_api import remote_api_stub

# Test database calls
def get(w_self):
    remote_api_stub.ConfigureRemoteApi(None, '/_ah/remote_api', auth_func, 'myapp.appspot.com')

    t_entity = My_Entity.get_by_key_name('the_key')

    w_self.response.set_status(200)

    # The error occurs AFTER this code executes, when webapp actually responds to the browser 
```

**错误回溯：**

该错误似乎与 blobstore 有关。

远程 api 在代码中初始化是否为时已晚？

...在 webapp 通过 localhost 服务器对 blobstore 进行处理之后？那么远程api可能会将请求重定向到服务器中的blobstore，而不是webapp期望的localhost调试服务器？

```
回溯（最近一次通话最后）：
  _HandleRequest 中的文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver.py”，第 2795 行
    登录网址）
  CreateImplicitMatcher 中的文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver.py”，第 3622 行
    get_blob_storage)
  CreateUploadDispatcher 中的文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_blobstore.py”，第 420 行
    返回 UploadDispatcher()
  __init__ 中的文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_blobstore.py”，第 307 行
    get_blob_storage())
  GetBlobStorage 中的文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_blobstore.py”，第 79 行
    返回 apiproxy_stub_map.apiproxy.GetStub('blobstore').storage
AttributeError：“RemoteStub”对象没有属性“存储”

```

远程 api 是否应该在代码中的其他地方初始化？

还是这个问题与其他问题有关？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T12:44:34.677

要使其正常工作，您可以使用测试平台的帮助来启动缺少的存根：

```
ADDRESS=....
remote_api_stub.ConfigureRemoteApi(None, '/_ah/remote_api', auth_func, ADDRESS)

# First, create an instance of the Testbed class.
myTestBed = testbed.Testbed()

# Then activate the testbed, which prepares the service stubs for use.
myTestBed.activate()

# Next, declare which service stubs you want to use.
myTestBed.init_blobstore_stub()
myTestBed.init_logservice_stub() 
```

# android - 具有多色开始、中间和结束颜色的 android 描边

> ID：12588329
> 
> 赞同：4
> 
> 时间：2012-09-25T17:44:54.040
> 
> 标签：android, android-layout, gradient

我想在 android 中实现一个笔触，比如开始颜色为白色，中间显示阴影黑色，结束颜色再次与开始相同。我有一张笔触图片，但我不能在这里发布。我们可以实现吗这？？？提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T18:13:21.463

你可以有这样的形状，当然你必须根据你的需要改变颜色

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">

    <stroke android:width="6dp" android:color="#FFCCCCCC"/>

    <padding 
        android:left="5dp" 
        android:top="5dp" 
        android:right="5dp"
        android:bottom="5dp" />

    <corners android:radius="8dp" />

    <gradient
        android:angle="270"
        android:startColor="#FFCCCCCC"
        android:centerColor="#FFFFFFFF"
        android:endColor="#FFCCCCCC"
        android:type="linear" />

</shape> 
```

**根据您的要求添加了一些链接，**

[http://blog.stylingandroid.com/](http://blog.stylingandroid.com/)

[http://developer.android.com/guide/topics/ui/themes.html](http://developer.android.com/guide/topics/ui/themes.html)

[http://developers.janrain.com/documentation/mobile-libraries/android/android-sdk/introduction-to-android-theme-customization/](http://developers.janrain.com/documentation/mobile-libraries/android/android-sdk/introduction-to-android-theme-customization/)

# php - Flex 到远程服务器

> ID：12588331
> 
> 赞同：0
> 
> 时间：2012-09-25T17:44:56.587
> 
> 标签：php, apache-flex, zend-framework

我正在尝试设置 Flex/PHP 应用程序，但在连接到我的服务器时遇到问题。数据库/PHP 不会托管在本地服务器上，它将与 PHP 一起托管在远程服务器上。当我尝试设置项目时，我被要求提供 Web 根目录，但是当我将 ftp 或 URL 输入到远程服务器时，它会抛出“Web 服务器文档根目录不是有效目录”。我发现的所有信息似乎都指向具有本地托管版本的服务器，但这是不可能的。还有其他方法吗？

# python - Py2exe 应用程序错误“该进程无法访问该文件，因为它正被另一个进程使用”

> ID：12588332
> 
> 赞同：0
> 
> 时间：2012-09-25T17:44:56.403
> 
> 标签：python, windows, py2exe

我有一个 python 脚本，它应该更新程序（清除文件夹并将新文件复制到其中）。它工作正常，但是当我运行从我的脚本（使用 py2exe）生成的 *.exe 文件时，它给了我一条错误消息：

```
Traceback (most recent call last):
  File "update.py", line 10, in <module>
  File "shutil.pyc", line 254, in rmtree
  File "shutil.pyc", line 252, in rmtree
WindowsError: [Error 32] The process cannot access the file because it is being used by another process: 'C:\\Project\\MyProg\\Prog\\app' 
```

这是我的脚本：

```
app = 'C:\\Project\\MyProg\\Prog\\app'
update = 'C:\\Project\\MyProg\\Prog\\update'

os.system("taskkill /im file.exe /f")

time.sleep(2)

shutil.rmtree(app)
shutil.move(update, app)

newpath = update
if not os.path.exists(newpath):
    os.makedirs(newpath)

with open('info', 'w') as f:
    f.write("updated")
subprocess.call(['C:\\Project\\MyProg\\Prog\\app\\file.exe']) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T02:14:14.350

在对文件使用 py2exe 之前，请关闭脚本。如果您没有看到它正在运行，请转到任务管理器上的进程列表并确保您的脚本没有运行。它通常会在描述下显示为简单的 python。只需右键单击并选择结束进程，然后确认。

# jquery - 如何对淘汰赛嵌套列表进行排序？

> ID：12588334
> 
> 赞同：1
> 
> 时间：2012-09-25T17:45:08.523
> 
> 标签：jquery, list, sorting, knockout.js, nested

在这里使用联系人编辑器：http: [//jsfiddle.net/rniemeyer/gZC5k/](http://jsfiddle.net/rniemeyer/gZC5k/)

您如何按电话号码本身进行排序？

我想要家庭优先，移动，办公室，传真等......

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T20:03:44.117

在加载数据并映射到视图模型结构时，我会尝试对它们进行排序。

例如，您可以在此处对每个联系人的电话进行排序：

```
self.contacts = ko.observableArray(ko.utils.arrayMap(contacts, function(contact) {
    contact.phones.sort(function(a, b) {
        return a.type > b.type ? 1 : -1;   
    });

    return { 
        firstName: contact.firstName, 
        lastName: contact.lastName, 
        phones: ko.observableArray(contact.phones) 
    };
})); 
```

示例：http: [//jsfiddle.net/rniemeyer/gZC5k/531/](http://jsfiddle.net/rniemeyer/gZC5k/531/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T02:14:06.397

扩展 RP 的答案：

您可以将事件处理程序附加到`type`输入以在更改时移动`phone`对象`type`。我使用了线性搜索，但可以随意实现二进制搜索。

修改过的小提琴：http: [//jsfiddle.net/zGKM2/](http://jsfiddle.net/zGKM2/)

# javascript - 菜单：如何自动选择第一个子项

> ID：12588335
> 
> 赞同：0
> 
> 时间：2012-09-25T17:45:12.590
> 
> 标签：javascript, css, submenu

我需要复制我们可以在 forbes.com 上找到的那种菜单。我只是对徽标项目子菜单感兴趣。我马上就好。我制作了徽标项目菜单，第一级菜单带有类别名称，第二级显示每个类别的文章链接。

到目前为止，它是一个以基本方式设置的完整 CSS 菜单。当用户将鼠标放在徽标上时，它只显示第一个子菜单级别。我想我需要一些 JS，因为我的目标是 - 就像在福布斯子菜单上一样 - 在第一个子项上显示鼠标悬停效果，以允许同时显示第二个子菜单级别。（看起来更好看）

这是我的代码（简化）：

```
<ul id="menu"><li>
<a href="#" >Mylogo</a>

<ul class="submenu1">

<li class="item1"><a href="#">item1</a>
<ul class="subemnu2">content</ul>
</li>

</ul>/*----submenu1-------*/
</li>/*-----li menu------*/
</ul>/*---- ul menu-------*/ 
```

谢谢你的帮助。问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T18:05:01.397

您的用例不需要 JavaScript。你可以用 CSS3 动画来做到这一点：

[http://www.w3schools.com/css3/css3_animations.asp](http://www.w3schools.com/css3/css3_animations.asp)

当用户将鼠标悬停在第一个子项上时，您会更改其外观 (.submenu1:hover)，您还可以触发动画以显示第二级菜单项。

# css - IE8/IE9 上的 CSS 边框和阴影问题

> ID：12588340
> 
> 赞同：0
> 
> 时间：2012-09-25T17:45:37.963
> 
> 标签：css

> **可能重复：**
> [在 IE7/8 中模拟 CSS3 边框半径和框阴影](https://stackoverflow.com/questions/2687804/emulating-css3-border-radius-and-box-shadow-in-ie7-8)

我无法解决这个问题。这是 CSS`box-shadows`和圆形 ( `border-radius`) 问题。我的网站链接地址[http://www.shibbir.byethost7.com/](http://www.shibbir.byethost7.com/)。

在`Firefox`, `Chrome`,`Opera`浏览器中显示我的网站内容阴影和圆角（页脚部分。）

但是在`Internet Explorer`它没有显示阴影和圆角。

**你能帮我解决这个问题吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T17:48:31.657

在 IE8 中您不会得到圆角，并且您还需要对 IE8 的框阴影使用过滤器。

像这样的东西：

```
filter: 
  progid:DXImageTransform.Microsoft.Shadow(color=#aaaaaa,direction=135,strength=10); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T17:55:01.267

您可以使用 Modernizer 与 polyfills 配对在 IE 中创建效果，这里是 polyfills 列表： [https ://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills)

# java - JSoup 是我将网站转变为原生 android 应用程序的最佳选择吗？

> ID：12588343
> 
> 赞同：0
> 
> 时间：2012-09-25T17:45:45.587
> 
> 标签：java, android, web, jsoup

我想为网站制作一个android应用程序。我希望该应用程序不仅仅是显示网站的网络视图，那将毫无意义。在此之前有没有人这样做过，不介意帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:51:54.790

这取决于你想做什么。我喜欢使用 jsoup。

如果它是一个只抓取和显示网页数据的应用程序，那将是最简单的路线。如果您在该网页上登录，它已经变得有点困难，但仍然很容易做到。

在任何情况下，如果您想为现有网页编写应用程序，您将不得不使用某种 html 解析器/抓取工具，我认为 jsoup 是最好和最容易处理的一种，因为在许多情况下，完整的网页没有要下载。它可以检查网页上的特定标签、类、名称、元素，并且只选择需要的东西

在 jsoup.org 上看看自己

# java - 如何确保互联网在android中运行良好

> ID：12588344
> 
> 赞同：2
> 
> 时间：2012-09-25T17:45:47.447
> 
> 标签：java, android

```
public boolean isNetworkConnected() {
    ConnectivityManager cm =
        (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo netInfo = cm.getActiveNetworkInfo();
    if (netInfo != null && netInfo.isConnectedOrConnecting()) {
        return true;
    }
    return false;
} 
```

每当我的 Internet 连接或断开连接时，此功能都可以正常工作。但是有一种情况是我的互联网连接但由于互联网中的一些问题我们无法交换数据包或者你可以说无法浏览。即使在那种状态下，我也可以`true`从这个函数中获得，而我只想`true`在我的互联网运行良好时返回。

在这种情况下我能做什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:56:29.950

无法以编程方式获取您正在寻找的信息。

如果存在“互联网连接问题”，例如在刚刚进入死区的蜂窝数据连接中很常见，您将看到蜂窝链接保持建立几秒钟，直到超时。在这个等待期间，当链路层仍然认为它已连接但没有数据包可以通过时，您唯一能做的就是开始等待自己——并选择一个小于或等于链路层超时值的任意超时值。

由于基于超时的连接是基于等待任意时间段，然后决定您是否认为数据包会到达，因此没有通用的解决方案来确定 - 不阻塞 - 连接是否会成功. 毕竟，仅仅因为之前发送的数据包通过了，并不意味着连接不能立即被终止。

我不同意尝试从某处的 URL 获取小资源的测试。该测试是有问题的，因为它涉及阻塞，这会减慢您的程序。如果您的程序实际尝试发送的数据包能够在链路层或协议层超时之前通过，您将获得结果。如果数据包没有通过，您将无法获得结果。就是这么简单。

互联网连接是一种“瞬态”现象：不可能提前确定它是否可用。前一秒还在，下一秒就消失了。就像磁盘上存在文件一样。与其尝试根据 Internet 连接来更改程序逻辑的流程，不如只对明显不可用的情况*做出反应*，例如数据包没有通过，或者您没有得到响应，或者网络接口声明它已关闭（本质上是您调用的 Android API 正在执行的操作）。处理异常；不要试图确定它是否启动然后做某事。

总之，函数的概念*本身*`isNetworkConnected()`几乎没有意义，除了简单测试链接层是否*认为*它是连接的（这么多，至少可以节省您的时间和精力，因为没有链接层显然意味着*已知*连接不可用，而在实验检测到问题之前，所有其他故障状态都涉及未知数。）问题是，即使是在实现中对网络可用性进行最可靠和最严格的测试，`isNetworkConnected()`也不能原子地保证，在时间之间这`isNetworkConnected()`函数返回并且您开始尝试上传/下载真实数据的时间，结果没有改变。这基本上是一个无法解决的竞争条件，因为您无法控制用户的互联网基础设施，因此您无法自动将其“锁定”到工作状态、执行您的工作并释放锁定。做不到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T17:47:36.103

例如，您可以尝试通过 HTTP Get 访问 google.com 或其他正常运行时间较长的网站。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T17:48:03.277

在这种情况下，唯一可靠的方法是下载一个已知的小文件并验证其完整性。需要这样做的一种情况是在开放式咖啡馆 wifi 上。任何人都可以连接到他们，但所有网络请求都会被重定向到他们的“网关”，直到您接受他们的条款和条件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T17:52:49.517

是的，它发生在少数情况下，例如 http 超时异常，因为可能存在连接网络但没有实际 Internet 连接的情况，因为访问它的唯一方法是通过例如 VPN - 这种方式你有，另外，另一个例如，WI-FI 连接可用，但由于 ISP 的某些问题而没有实际的互联网流量。

我建议你看看[这个](https://stackoverflow.com/a/5803489/1143977)线程，它解释了如何进行 http 请求并找出互联网可用性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T17:53:45.153

查看[本教程](http://marakana.com/forums/android/examples/40.html)，它将显示您连接到的网络。

# c# - SQL Server 2008 R2 Reporting Services - 获取订阅 + 计划链接

> ID：12588347
> 
> 赞同：0
> 
> 时间：2012-09-25T17:45:53.657
> 
> 标签：c#, .net, reporting-services, sql-server-2008-r2

使用 SQL Server 2008 R2、.NET 4 和 C#，我在找出如何链接报告计划和报告订阅时遇到了一些麻烦。

我可以获得所有报告、所有订阅和所有时间表的列表，这很好并且有效。因此，我拥有最原始形式的数据，但是当试图找到某种方法来获取使用 ScheduleA 的所有订阅的列表时，例如，我根本找不到任何东西。

我搜索了 MSDN，花了一个下午的时间在谷歌上搜索，都无济于事。我希望它不像看起来那么困难，因为它真的不应该。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T11:54:03.067

感谢对我最初的问题发表评论的人，这使我有了一个接受计划 ID 的方法，并在收到报告后执行以下操作：

```
var subscriptions = service.ListSubscriptions(report.Path);

foreach (var subscription in subscriptions)
{
    ExtensionSettings settings;
    string description, status, eventType, matchData;
    ActiveState state;
    ParameterValue[] parameters;
    string user = service.GetSubscriptionProperties(subscription.SubscriptionID, out settings,
                                                    out description, out state, out status, out eventType,
                                                    out matchData, out parameters);
    if (matchData == scheduleId)
    {
        // Do what I need to do
    }
} 
```

这最终为我提供了我正在寻找的解决方案。不幸的是，现在我遇到了一个不同的问题，但如果需要，我会提出一个不同的问题。

# vb.net - VB.NET 中同一事件的多个事件处理程序

> ID：12588350
> 
> 赞同：5
> 
> 时间：2012-09-25T17:46:05.903
> 
> 标签：vb.net, visual-studio, event-handling

`TextBox.Leave`我已经为一个事件编写了两个事件处理程序`TextBox1`

这样做的原因是第一个处理程序是用于`TextBox.Leave`验证值的多个事件的常见处理程序，而第二个处理程序特定于上述`TextBox1`执行一些值计算的事件。

我的问题是，我可以知道两个处理程序中的哪一个在`TextBox1.Leave`发生时首先执行吗？

（我知道我可以将代码从通用处理程序中删除到特定的 for `TextBox1`，但我仍然想知道是否有办法。）

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-25T17:49:51.577

只要使用`AddHandler`语句添加事件处理程序，就可以保证事件处理程序的调用顺序与添加它们的顺序相同。另一方面，如果您`Handles`在事件处理程序方法上使用修饰符，我认为没有任何方法可以确定顺序是什么。

`AddHandler`这是一个简单的示例，演示了由调用顺序确定的顺序：

```
Public Class FormVb1
    Public Class Test
        Public Event TestEvent()

        Public Sub RaiseTest()
            RaiseEvent TestEvent()
        End Sub
    End Class

    Private _myTest As New Test()

    Private Sub Button1_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Button1.Click
        AddHandler _myTest.TestEvent, AddressOf Handler1
        AddHandler _myTest.TestEvent, AddressOf Handler2
        _myTest.RaiseTest()
        RemoveHandler _myTest.TestEvent, AddressOf Handler1
        RemoveHandler _myTest.TestEvent, AddressOf Handler2
    End Sub

    Private Sub Handler1()
        MessageBox.Show("Called first")
    End Sub

    Private Sub Handler2()
        MessageBox.Show("Called second")
    End Sub
End Class 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T02:30:40.337

我建议您更改为使用单个处理程序，并检测留下哪个文本框：

```
Private Sub txt_Leave(sender As Object, e As System.EventArgs) Handles TextBox1.Leave, TextBox2.Leave
  Dim txt As TextBox = DirectCast(sender, TextBox)
  If txt Is TextBox1 Then
    txt.Text = "Very important textbox!"
  Else
    txt.Text = "Boring textbox ho hum."
  End If
End Sub 
```

# php - 在执行 xajax 时修改 javascript 函数

> ID：12588359
> 
> 赞同：0
> 
> 时间：2012-09-25T17:46:44.757
> 
> 标签：php, xajax

我想在 xajax 函数（php）中创建一个 javascript 函数并在响应中分配它。

```
<?php
    require_once("Resources/xajax/xajax_core/xajax.inc.php");
    $xajax = new xajax(); 

    function foo()
    {
       $response = new xajaxResponse();
       // The code needed should be here...
          // Here create the javascript sintax using php and put it on the web
              // No problem creating the sintax but
                 ->// how I put it on a new <script></script> ????
          // Here call the javascript
          $response->script('myJavascript');

       return $response

    }

    $xajax->configure( 'javascript URI', 'Resources/xajax/');
    $xajax->register(XAJAX_FUNCTION,"foo");
    $xajax->processRequest();
?>

    <html>.......

    <button onclick="xajax_foo()"></button>
    ......</html> 
```

不知道我是否清楚，但简而言之，我想要的是在运行 xajax 之前没有 javascript，然后有一个 javascript 并且它正在运行。也许我应该使用两个 xajax 响应，一个将脚本放入网络，另一个调用它......但此时我需要你的帮助。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T20:33:43.123

我通过使用这个解决了这个问题：

```
$response->call("javascriptfoo","param1","param2"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-01T09:28:24.917

**[从问题中裁剪。](https://stackoverflow.com/revisions/12588359/5)**

* * *

我找到了一个解决方案：

将其包含在您的 PHP 中：

```
$response->call("javascriptfoo()","$param1","$param2")); 
```

你的 HTML 中需要这个：

```
<script... > 
function javascriptfoo(param1,param2) {
    alert(param1);
    alert(param2);
}
</script> 
```

# ruby-on-rails - 在 Rails 中，定义常量字符串（如错误消息、通知等）的最佳方法是什么？

> ID：12588366
> 
> 赞同：1
> 
> 时间：2012-09-25T17:47:09.257
> 
> 标签：ruby-on-rails, testing, localization, rspec, cucumber

上周左右我一直在学习 rails，我刚刚开始接触 BDD。任何 cucumber 或 rspec 教程中的一个典型示例是确保将成功/错误消息显示为对操作成功或失败的检查。

这意味着现在有一个恒定的消息，例如在代码中两次“您的消息已成功传递” - 一个在应用程序中，另一个在测试中。这对我来说很奇怪......它不是 DRY，它是开发人员赖以生存的，如果您想将消息更改为其他内容，则必须执行两次。

这是标准吗？我在 locales 目录中阅读了有关 en.yml 的内容，想知道是否有人将它用于他们的字符串。到目前为止，我还没有在任何教程中看到这一点，这就是我要问的原因。en.yml 中的字符串对 cucumber/rspec 测试可见吗？如果是这样，我如何在代码中访问它们？如果 en.yml 不是要走的路，rails 开发人员如何存储他们的常量字符串值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T18:06:02.157

使用语言环境文件来存储依赖于语言环境的字符串，例如您提到的消息。然后只需执行以下操作：

```
page.should have_content I18n.translate(:message_delivered) 
```

# macos - 如何确定本地 Mac 文件名和远程文件名的全名以使用 SCP

> ID：12588367
> 
> 赞同：0
> 
> 时间：2012-09-25T17:47:12.810
> 
> 标签：macos, ssh, directory, filenames, scp

我使用 SSH 连接到服务器并导航到我想要从我的 Mac 存储一些文件的文件夹。我认为我需要做的是使用 SCP 进行复制，但我不确定命令参数中的术语。到目前为止，我尝试过的所有东西都会出现某种“未找到”错误。

在登录到服务器之前，提示是：

```
Apples-MacBook-Pro-2:~ neiltayl$ 
```

登录并导航到我要在其中存储内容的文件夹后：

```
[neiltayl@cs136 Tracer]$ 
```

我需要将本地计算机上的 Tracer 文件夹中的几个文件复制到 cs136 上的 Tracer 文件夹中，并且无法理解 SCP 相应 FROM 和 TO 部分的正确部分以使其工作。

这是我到目前为止最近的；

```
Apples-MacBook-Pro-2:~ neiltayl$ ls  
Applications    Downloads   Music       Tracer  
Desktop     Library     Pictures    c151  
Documents   Movies      Public      dwhelper  
Apples-MacBook-Pro-2:~ neiltayl$ scp ./Tracer/*.* neiltayl@cs136.cs.iusb.edu:Tracer
neiltayl@cs136.cs.iusb.edu's password:   
./Tracer/*.*: No such file or directory 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:51:04.807

scp 命令是 -

```
$ scp File1 username@someting:DIRNAME 
```

此处文件 1 是您发送到另一台计算机的文件。

DIRNAME 是要存储文件的目录的路径。

在您的情况下，命令将是

```
scp -r Tracer neiltayl@cs136:New_Tracer 
```

Tracer 是包含您要复制的所有文件的文件夹。

# iphone - UITableView 分组样式单元格、页眉和页脚默认尺寸

> ID：12588371
> 
> 赞同：1
> 
> 时间：2012-09-25T17:47:29.927
> 
> 标签：iphone, ipad, uitableview

`UITableView`分组样式中的默认单元格、节页眉和节页脚尺寸（宽度、高度、左/右页边距、上/下页边距）是多少？

我已经知道：

*   单元格高度：44px，和往常一样
*   Section header height: 22px (from [this answer](https://stackoverflow.com/a/1200880/412107) ) -`myTableView.sectionHeaderHeight`返回 10，但是当我设置部分标题时，我可以通过查看它来判断这是不对的。

我问的原因是我需要计算`UITableView`从返回的分组样式的预期总高度`contentSizeForViewInPopover`。但是，如果我要询问高度，我不妨询问宽度以供将来参考。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T18:03:53.633

故事板没有告诉你部分页眉和页脚的高度吗？它确实根据下面的屏幕截图告诉我：

![单元格设置为 **GROUPED** 时的节页眉和页脚高度](../Images/69f8daef90ec695be99032c4a20ae03d.png)

图 1：当单元格设置为***GROUPED****时的部分页眉和页脚高度*

 **![单元格设置为 **PLAIN** 时的节页眉和页脚高度](../Images/63ad4c473ca09de5cba86523ff030078.png)

图 2：单元格设置为***PLAIN****时的部分页眉和页脚高度*

 **部分宽度取决于您的应用程序编码。如果您使用的是`UITableViewController`，那么宽度将是屏幕尺寸（取决于 iPhone/iPad）。如果您在 a`UITableView`内有 a `UIView`，那么您的宽度将与您调整它的大小相同。

此外，您提到的单元格高度 ( `44`) 是它的默认设置。如果您使用的是自定义单元格，那么每个单元格的高度可能会发生变化。

关于单元格宽度，[有人测量并发布在他的博客上](http://blog.arunstephens.com/2010/03/07/width-of-grouped-uitableviewcell/)。但是，如果你想要自定义宽度，那么这篇关于 SO 的帖子会很有帮助：[如何在 UITableView 中以分组样式设置单元格的宽度](https://stackoverflow.com/questions/2539021/how-to-set-the-width-of-a-cell-in-a-uitableview-in-grouped-style)****

# java - java.util.Map.put(key, value) - 如果值等于现有值怎么办？

> ID：12588377
> 
> 赞同：5
> 
> 时间：2012-09-25T17:47:52.013
> 
> 标签：java, collections, map

来自规范：“如果映射先前包含键的映射，则旧值将替换为指定值。” 我想知道 value.equals(the old value) 但 value != old value 的情况。我对规范的解读是，旧值仍然必须被替换。是对的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T17:49:18.223

如果新键与现有键匹配，则无论其值如何，映射的值都将被替换，例如即使`oldValue.equals(newValue)`is `true`。

我认为我们不需要查看源代码或依赖测试代码：这在文档中是明确的[`Map.put`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html#put%28K,%20V%29)，我们在其中找到：

> 如果映射先前包含键的映射，则旧值将替换为指定值。（当且仅当 m.containsKey(k) 返回 true 时，映射 m 被称为包含键 k 的映射。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T17:49:46.303

不检查值相等，仅检查键相等。如果您指定的键与映射中已经存在的键匹配，则该对象将被其相等替换。

如果某个值之前已与键关联，则该`put`方法将返回该值。这是来自源代码的片段`HashMap<K,V>`：

```
for (Entry<K,V> e = table[i]; e != null; e = e.next) {
    Object k;
    if (e.hash == hash && ((k = e.key) == key || key.equals(k))) {
        V oldValue = e.value;
        e.value = value;
        e.recordAccess(this);
        return oldValue;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T17:50:46.443

是的，它是正确的。一个简单的测试会告诉你：

```
Integer a = new Integer(1);
Integer b = new Integer(1);
Map<String, Integer> map = new HashMap<String, Integer>();
map.put("key", a);
map.put("key", b);
System.out.println("Value is b : " + (map.get("key") == b)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T17:48:45.650

是的，您的理解是正确的，如果**key**`map`存在相等的值，它将被新值替换。

 *** * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T17:51:56.270

我相信你是对的。您可以使用如下代码进行检查：

```
Map<String, String> strsMap = new HashMap<String, String>();
String myString1 = new String("mystring");
String myString2 = new String("mystring");
strsMap.put("str", myString1);
System.out.println(myString1 == strsMap.put("str", myString2));
System.out.println(myString2 == strsMap.get("str"); 
```**

# facebook - 如何确定 Facebook 好友的订阅类型？

> ID：12588386
> 
> 赞同：0
> 
> 时间：2012-09-25T17:48:49.020
> 
> 标签：facebook, facebook-fql

不久前，我在 Facebook 上[手动更改了](https://www.facebook.com/help/?faq=188147907920585)许多朋友的订阅类型。

我现在想查看我的提要显示的所有朋友的更新类型。

理想情况下，我想要 3 个列表，朋友设置为：

1.  所有更新
2.  大多数更新
3.  唯一重要的

有没有办法使用 FQL 来确定这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T18:20:27.047

不，没有 API 可以返回您为朋友定义的新闻提要选项。您可以返回已定义的好友列表（/me/friendlists），但不能返回特定设置

# c# - 如果字符串非空，则添加到字符串

> ID：12588389
> 
> 赞同：9
> 
> 时间：2012-09-25T17:49:08.287
> 
> 标签：c#, string-formatting

有时我想连接两个字符串，中间有一个空格。但如果第二个字符串为空，我不想要空格。

考虑以下代码：

```
void AssertFoo(bool cond, string message = null) {
    ...
    Assert.Fail("Something is foo.{0}", message != null ? " " + message : "");
    ...
} 
```

有没有更优雅的方法来做到这一点？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-25T17:51:23.247

这是我喜欢的一种选择。如果您已经拥有`IEnumerable<string>`数据会更好，但即使您没有，这也很容易。它还可以很好地扩展到连接的 n 个字符串，而不仅仅是 1 或 2 个。

```
string[] myStrings = new string[]{"Hello", "World", null};
string result = string.Join(" ", myStrings.Where(str => !string.IsNullOrEmpty(str))); 
```

这是另一种选择。对于这种情况，它有点短，但它更难看，更难阅读，而且没有那么可扩展，所以我个人可能会避免它：

```
//note space added before {0}
Assert.Fail("Something is foo. {0}", message ?? "\b"); 
```

在这种情况下，我们将空格添加到格式字符串本身，但如果`message`为空，我们将使用退格字符删除我们知道在消息中它之前的空格。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-12-01T15:13:56.343

对于较新版本的 C#，您可以使用以下扩展方法：

```
public static string Prepend(this string value, string prepend) => prepend + value; 
```

它可以这样使用：

```
Assert.Fail("Something is foo.{0}", message?.Prepend(" ")); 
```

**2020 年新增：**

今天我用这个：

```
public static string Surround(this object value, string prepend, string append = null) => prepend + value + append; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T17:59:32.593

```
Assert.Fail("Something is foo.{0}", (" " + message).TrimEnd()); 
```

当然，这会导致创建一些字符串对象，但这种微优化问题不太可能在绝大多数程序中产生影响。这种方法的一个优点可能被认为是它不仅处理空消息，还处理所有空格的消息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T17:51:40.560

尝试这个：

```
string joinedString = string.IsNullOrEmpty(message2) ? message1 : message1 + " " + message2; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-09T03:52:28.677

```
Assert.Fail("Something is foo.{0}", message?.PadLeft(message.Lenght + 1, ' ')); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-25T20:42:06.793

从 C#6 开始，您可以像这样使用[字符串插值](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/tokens/interpolated)：

```
$"Something is foo. {mssg}".TrimEnd(); 
```

[在.NET Fiddle](https://dotnetfiddle.net/lueDWq)中查看

* * *

## 回答 #7

> 赞同：-5
> 
> 时间：2012-09-25T17:52:16.043

最优雅的方法是使用 String 类的内置关键字。

```
String.IsNullOrEmpty 
```

这样你就不会有问题了。

# bash - 如何在 bash 命令行上输出文件列表

> ID：12588402
> 
> 赞同：1
> 
> 时间：2012-09-25T17:49:51.250
> 
> 标签：bash, node.js, command-line-arguments, handlebars.js

我正在使用 handlebars.js 为我们的单页应用程序呈现客户端模板（在 node.js 服务器端使用 Jade）。

我想在服务器端预编译车把模板并将它们捆绑为一个 JS 文件发送给客户端。

目前，我`handlebars`用来编译模板，如下所示：

```
$ handlebars template1.handlebars template2.handlebars -f precompiled_templates.js 
```

我想编写一个 bash 脚本，它可以读取`*.handlebars`目录中的所有文件，然后通过把手编译器运行它们。所以，如果我有这样的目录：

```
templates/
  temp1.handlebars
  temp2.handlebars
  temp3.handlebars
  temp4.handlebars 
```

在模板目录中运行我的 bash 脚本（或一行命令）实际上将运行以下`handlebars`命令：

```
$ handlebars temp1.handlebars temp2.handlebars temp3.handlebars temp4.handlebars -f precompiled_templates.js 
```

有谁知道我如何编写一个 bash 脚本来将目录中的所有车把文件放到上面的命令行中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T17:57:17.750

看起来你想要类似的东西

```
handlebars templates/*.handlebars -f precompiled_templates.js 
```

除非您最终会在每个文件前加上“模板”。我的首选方法需要两行：

```
files=( templates/*.handlebars )
handlebars "${files[@]#templates/}" -f precompiled_templates.js. 
```

第一行将所有需要的文件放在一个数组中。在第二行中，我们扩展了数组的内容，但从结果扩展中的每个元素中去除了“templates/”前缀。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T21:57:10.723

在模板目录中执行：

```
handlebars `find -name *.handlebars` -f precompiled_templates.js 
```

反引号表示它将执行该命令然后返回结果，因此实际上您在它返回的每个文件上运行把手。如上所述 find 将在当前目录和子目录中查找文件，因此请确保从正确的位置运行它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T17:52:59.280

在 Bash 中，可以使用双引号内的字符串创建列表：

```
FILES="/etc/hosts /etc/passwd"
for file in $FILES; do cat $file ; done

<cat all files> 
```

您还可以使用 find 和 exec 命令。

man [find|exec] 获取更多信息

# css - CSS 下拉菜单：如何单击整个 li:hover，而不仅仅是其中的超链接？

> ID：12588403
> 
> 赞同：0
> 
> 时间：2012-09-25T17:49:52.157
> 
> 标签：css, drop-down-menu, click, hover

我希望我用正确的词正确地问这个问题：我有一个非常基本的 CSS 下拉菜单，当我将鼠标悬停在它们上方时，它会突出显示（背景颜色）每个 li。当我悬停时，我希望能够单击整个 li 区域以到达链接目标，而不必找到该 li 中的超链接来执行单击。

对于这个讨论，这里是我的菜单的简化：

```
<div class="catnav">
<ul>
  <li><a href="#">CATEGORY</a>
    <ul>
      <li>Florists</li>
      <li>Caterers</li>
      <li>Formal Wear</li>
      <li>All Categories...</li>
    </ul>
  </li>
</ul>
</div> 
```

...和CSS：

```
.catnav ul {list-style:none;margin:0px;padding:0px;}
.catnav li {float:left;text-align:center;position:relative;background:#f5f6f7;padding:0px 10px 0px 10px;}
.catnav li ul li {float:none;width:150px;text-align:left;padding-left:0px 0px 0px 5px;line-height:17px;}
.catnav a {text-decoration:none;color:#548dd4;font-family:arial;}

.catnav li ul {position:absolute;top:21px;left:0px; border:1px solid #ccc;
    -moz-box-shadow: 0px 3px 10px #aaa;
    -webkit-box-shadow: 0px 3px 10px #aaa;
    box-shadow: 0px 3px 10px #aaa;
    visibility:hidden;}
.catnav li:hover ul {visibility:visible;z-index:100;}
.catnav li:hover {background:#e0e0e0;}
.catnav li:hover li a {font-size:0.8em;font-weight:normal;visibility:visible;z-index:100;} 
```

任何帮助都会很棒。谢谢！

Ĵ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:56:39.390

试试这行css：

`.catnav li ul li a {display:block;width:150px;}`

或者你可以`<li>`用`<a>`( `<a><li></li></a>`) 包裹你，但这只是不好的做法..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T18:13:34.060

[在这里找到了同样的问题](https://stackoverflow.com/questions/3074454/how-do-i-make-the-whole-area-of-a-list-item-in-my-navigation-bar-clickable-as-a)，并给出了一些很好的答案。快速的答案是使用`display:block;`然后添加你的填充，但另一个线程中的答案应该为你解释一切。

# php - 尽管输入了 False 信息，mysql_query() 始终返回 True

> ID：12588404
> 
> 赞同：-1
> 
> 时间：2012-09-25T17:49:55.367
> 
> 标签：php, mysql

有代码可以检查用户是否输入了正确的密码。

```
if (isset($_POST['userpassword']))
{
    include('db.php');
    //I have used the name passwordu instead of password in the database as well.
    $query = "SELECT * FROM users WHERE username = '".$_REQUEST['username']."' AND passwordu = '".md5($_REQUEST['userpassword'])."';";
    $result = mysql_query($query);
    if ($result){ //THIS IS WHERE I FEEL THE ERROR IS
        echo "Congratulations. You are now Logged in. You will be logged out when the Browser is closed.";
        $_SESSION['logval'] = TRUE; //Sets the User Logged in for the complete session.
    }
    else echo "Sorry, You Entered Wrong Info.";
} 
```

但是，即使输入了错误的密码，它也会接受登录。

这里有什么问题？
另外，如果我在概念上犯了错误，请告诉我检查用户是否输入了正确信息的正确方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T17:50:58.470

如果查询成功，即使没有返回记录，查询也会返回 true。检查返回的记录数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T17:54:09.137

老实说 - 错误是代码允许[MySQL 注入](http://en.wikipedia.org/wiki/SQL_injection)

但是对于您的代码，请使用 mysql_num_rows()。

如果查询成功，mysql_query() 返回 true。如果不是，则为假。
mysql_num_rows() 计算行数。

```
if ( mysql_num_rows(mysql_query("some query")) == 1 ) { logged in } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T17:52:35.833

更改`if ($result)`为`if (mysql_num_rows($result) > 0)`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-25T17:52:00.920

从查询末尾删除`;`，这不是必需的。

```
... md5($_REQUEST['userpassword'])."';";
                                     ^---this one 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-25T17:53:49.250

好吧，它返回一个空集，但是在这样的情况下返回，我更喜欢这个

```
$query=<<<HERE
SELECT count(*) as count form users where username=" " and password=" "
HERE;
$send=mysql_query($query);
$row=mysql_fetch_assoc($send);
$count=$row["count"];
if($count=="0"){// not logged in}
else if($count=="1"){//logged in} 
```

检查计数值然后提供登录并停止使用mysql_query，切换到pdo

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-09-25T17:52:53.760

改变

```
$query = "SELECT * FROM users WHERE username = '".$_REQUEST['username']."' AND passwordu = '".md5($_REQUEST['userpassword'])."';"; 
```

到

```
$query = "SELECT * FROM users WHERE username == '".$_REQUEST['username']."' AND passwordu == '".md5($_REQUEST['userpassword'])."';"; 
```

和运算`=`符`==`不一样。`==`是一个比较运算符，它的意思*是相同的*，`=`虽然它意味着*等于*但不能意味着那个。

也改变

```
$result = mysql_query($query); 
```

到

```
$result = mysql_num_rows(mysql_query($query)); 
```

您的查询将始终返回 true，因为它执行成功，无论是否发现任何行存在。

# c# - 如何使用同一数据库处理来自多个应用程序的存储过程代码更改？

> ID：12588412
> 
> 赞同：5
> 
> 时间：2012-09-25T17:50:31.660
> 
> 标签：c#, sql-server, database, production-environment

我们环境中的数据库由 2 个不同的环境/应用程序共享。在 2 个应用程序中，第一个应用程序 A 经常更新，而第二个应用程序 B 不经常更新。

所以这里的情况是当应用程序 A 用新代码更新时，主要是存储过程，它有时会影响和破坏第二个应用程序 B，它正在由另一个团队更新，而不是经常更新。我知道这不应该是处理它的正确方法，并且不同时更新两个环境可能是灾难性的。发生这种情况是因为应用程序 A 和 B 由不同的团队处理。

你将如何优雅地处理这种情况？

从应用程序 B 中，我可以采取的预防措施是 - 在代码中检索数据 - 检索数据时的最佳方法是检查空白/空列，以便如果应用程序 A 添加新列，它们可以被应用程序 B 忽略。在 SQL 中检索数据 - 在过程中，可以使用可选参数进行处理。

但是当 C# 代码调用一个过程时，我们应该传递参数值，如果添加了新参数，那么它就会中断。有没有办法确保如果缺少调用参数，那么它应该被忽略（来自 C# 或 SQL Server）？

我的研究表明——

1.  我可以先从存储过程中检索参数列表，然后使用该列表调用过程以循环并检查参数是否存在。因此，即使应用程序 A 添加了新参数，它也可以由应用程序 B 自动处理。这可以使用 C# 中的 DeriveParameters 或 SQL 查询来获取参数列表。

2.  更改所有 SPROC 以采用 CSV 格式的参数。并在 SPROC 中拆分它们并相应地使用它。对于数百个现有的存储过程来说，这听起来很糟糕。

再说一次，正如我所说 - 这看起来不是一个好的解决方案，如果你有类似的情况，你会如何处理它？那里有一个框架，我不知道哪个可以解决这种情况？

环境 - ASP.NET/C# 4.0，SQL Server 2008 R2

编辑 - 让我在这里改述一下并提供更多细节。

1.  应用程序/团队 A 更改了代码，但只有 C# 代码被推出到生产中，而不是 DB 更改。这就是区别所在。并且数据库代码只会在下一个版本中使用。

2.  应用程序/团队 B 拥有最新代码，但数据库更改尚未投入生产，仍使用旧数据库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T18:41:42.367

我不相信有一个优雅的解决方案，但是，因为你不能重写整个应用程序所以......用你的场景，我会复制所有应用程序的 SP 并将它们放在单独的模式中。

在您的数据库中创建不同的用户，并让每个应用程序使用自己的用户连接到数据库。应用程序 A 的 DB 用户，它的角色，不应该有执行属于其他模式的 SP 的权限，对于应用程序 B 的 DB 用户也是如此。

当然，您需要重写应用程序的一些代码来更改连接字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T18:01:06.033

为什么不能为新参数分配默认值？例如

```
CREATE PROCEDURE xxx

   @OldParam   int
  ,@NewParam   int  = 0

AS

   <etc> 
```

应用程序“A”传入两个参数。

应用程序“B”是在 proc 只有一个参数时编写的，并且只使用一个重要的参数调用它。在新版本中，第二个参数将不被传递，因此它采用默认值 0... 并且对过程进行了适当的编码。（NULL 或特殊的默认值可用于“标记”来自旧系统的调用。）

* * *

[添加]

一个可能的长期解决方案是向数据库添加某种版本系统，每次数据库更新时都会更新。

*   当应用程序启动时，它会获取当前版本
*   如果有不同版本的参数不同的调用，你在调用的时候检查并适当格式化，比如

    如果版本 < 3 则使用 1 参数调用 proc

    否则使用 2 个参数调用 proc

随着时间的推移，跟踪和维护这将是繁琐和混乱的，但是如果您不能同时更新所有系统（A、B 和数据库），那么您的选择是有限的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T18:05:05.563

也许每个应用程序都可以有自己的一组存储过程，儿子他们不会互相打扰。

# mysql - 无法添加或更新子行：外键约束失败 webERp

> ID：12588414
> 
> 赞同：0
> 
> 时间：2012-09-25T17:50:40.987
> 
> 标签：mysql, mysql-error-1452

我在我的 1and1 帐户中使用 WebERP，当我将数据库迁移到另一个 1and1 数据库时，我收到此错误：SQL 查询：

```
-- 
-- Constraints for table `chartdetails`
-- 
ALTER TABLE `chartdetails` ADD CONSTRAINT `chartdetails_ibfk_1` FOREIGN KEY ( `accountcode` )      
REFERENCES `chartmaster` ( `accountcode` ) ,
ADD CONSTRAINT `chartdetails_ibfk_2` FOREIGN KEY ( `period` ) REFERENCES `periods` ( `periodno` ) 
```

MySQL 说：

```
#1452 - Cannot add or update a child row: a foreign key constraint fails (`dbxxxxxxxxx/#sql-    376_3fa4f12`, CONSTRAINT `chartdetails_ibfk_2` FOREIGN KEY (`period`) REFERENCES `periods` (`periodno`)) 
```

但原始文件工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T05:27:50.890

我迁移时遇到了同样的错误。我通过 3 种方式解决了这个错误。您可以解决其中任何一个或全部的错误。发生这种情况是因为在您更改之前没有发生数据插入查询。• 将Alter 表查询放在所有其他查询的最后。• 两次检查存在主键的数据是否存在 • 安装新的数据库稍后按分层顺序插入，如图表主先和图表详细信息插入查询。

**注意：**当您尝试更改数据库查询时，数据库不允许您删除或插入。在进行任何更改之前保留数据库的备份。

# ruby-on-rails - 未定义的方法“has_index_path”

> ID：12588419
> 
> 赞同：0
> 
> 时间：2012-09-25T17:50:49.157
> 
> 标签：ruby-on-rails, ruby

我想我已经尝试过 StackOverflow 上的每一个“未定义方法”问题解决方案，但仍然没有找到适合我情况的解决方案......

我有一个名为“Has”的模型，我认为我的问题可能与最后的“s”有关。每当我尝试加载 has/new url 时，我都会不断收到此错误。/has 工作得很好。只是不是新...

#<#:0x007ff3bbaa8d48> 的未定义方法“has_index_path”

有.rb：

```
class Has < ActiveRecord::Base
  attr_accessible :bathroom_count, :bedroom_count, :neighborhood, :price, :property_type
  belongs_to :trader
end 
```

has_controller.rb：

```
class HasController < ApplicationController

  def index
    @has = Has.all
  end

  def show
    @has = Has.find(params[:id])
  end

  def new
    @has = Has.new
  end

  def create
    @has = Has.new(params[:has])
    if @has.save
      flash[:success] = "New Listing Created!"
      redirect_to (:back)
    else
      redirect_to (:back)
    end
  end

  def destroy
    @has.destroy
  end
end 
```

视图（new.html.erb）（显然使用 simple_form，这在其他“新”视图上工作得很好）

```
<div class="center hero-unit">
<%= simple_form_for (@has) do |f| %>
    <%= f.association :trader%>
    <%= f.input :price %>
    <%= f.input :bathroom_count %>
    <%= f.input :bedroom_count %>
    <%= f.input :property_type %>
    <%= f.input :neighborhood %>
    <%= f.button :submit %>
<% end %> 
```

路线.rb：

```
Algotest::Application.routes.draw do
  resources :traders
  resources :wants
  resources :has

  root to: 'static_pages#index'

  match '/add_traders', to: 'traders#new'
  match '/traders', to: 'traders#index'
  match '/add_has', to: 'has#new'
  match '/has', to: 'has#index'
  match '/add_wants', to: 'wants#new'
  match '/wants', to: 'wants#index'
end 
```

编辑：这是 rake 路由输出：

```
 traders GET    /traders(.:format)          traders#index
            POST   /traders(.:format)          traders#create
     new_trader GET    /traders/new(.:format)      traders#new
    edit_trader GET    /traders/:id/edit(.:format) traders#edit
         trader GET    /traders/:id(.:format)      traders#show
                PUT    /traders/:id(.:format)      traders#update
                DELETE /traders/:id(.:format)      traders#destroy
          wants GET    /wants(.:format)            wants#index
                POST   /wants(.:format)            wants#create
       new_want GET    /wants/new(.:format)        wants#new
      edit_want GET    /wants/:id/edit(.:format)   wants#edit
           want GET    /wants/:id(.:format)        wants#show
                PUT    /wants/:id(.:format)        wants#update
                DELETE /wants/:id(.:format)        wants#destroy
            has GET    /has(.:format)              has#index
                POST   /has(.:format)              has#create
         new_ha GET    /has/new(.:format)          has#new
        edit_ha GET    /has/:id/edit(.:format)     has#edit
             ha GET    /has/:id(.:format)          has#show
                PUT    /has/:id(.:format)          has#update
                DELETE /has/:id(.:format)          has#destroy
           root        /                           static_pages#index
    add_traders        /add_traders(.:format)      traders#new
                       /traders(.:format)          traders#index
        add_has        /add_has(.:format)          has#new
                       /has(.:format)              has#index
      add_wants        /add_wants(.:format)        wants#new
                        /wants(.:format)            wants#index 
```

**添加 Inflections 代码片段后**编辑 3 New Route。**“有”路线看起来更好，但现在我在任何 localhost:3000 页面上都收到此错误**

 **```
No route matches {:action=>"show", :controller=>"has"} 
```

以下是新路线：

```
 traders GET    /traders(.:format)          traders#index
            POST   /traders(.:format)          traders#create
 new_trader GET    /traders/new(.:format)      traders#new
edit_trader GET    /traders/:id/edit(.:format) traders#edit
     trader GET    /traders/:id(.:format)      traders#show
            PUT    /traders/:id(.:format)      traders#update
            DELETE /traders/:id(.:format)      traders#destroy
      wants GET    /wants(.:format)            wants#index
            POST   /wants(.:format)            wants#create
   new_want GET    /wants/new(.:format)        wants#new
  edit_want GET    /wants/:id/edit(.:format)   wants#edit
       want GET    /wants/:id(.:format)        wants#show
            PUT    /wants/:id(.:format)        wants#update
            DELETE /wants/:id(.:format)        wants#destroy
  has_index GET    /has(.:format)              has#index
            POST   /has(.:format)              has#create
    new_has GET    /has/new(.:format)          has#new
   edit_has GET    /has/:id/edit(.:format)     has#edit
        has GET    /has/:id(.:format)          has#show
            PUT    /has/:id(.:format)          has#update
            DELETE /has/:id(.:format)          has#destroy
       root        /                           static_pages#index
add_traders        /add_traders(.:format)      traders#new
                   /traders(.:format)          traders#index
    add_has        /add_has(.:format)          has#new
                   /has(.:format)              has#index
  add_wants        /add_wants(.:format)        wants#new
                   /wants(.:format)            wants#index 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T19:08:27.983

我建议使用名词作为资源的名称，但如果出于某种原因您真的想保留当前名称，则可以使用以下技巧：trick rails into think that the "singular" and "plural" of "has " 使用变形器模块是相同的：

在 configs/initializers/inflections.rb 中：

```
ActiveSupport::Inflector.inflections do |inflect|
  inflect.irregular 'has', 'has'
end 
```**

# excel - 范围内的最后一行

> ID：12588424
> 
> 赞同：3
> 
> 时间：2012-09-25T17:51:05.543
> 
> 标签：excel, excel-2010, vba

在查找产生所需结果的信息和/或解决方案时遇到问题，就这样吧。

现在，并且可能在生产时，我将在工作表上有一个命名范围的“模板”。在第一次使用时，这个 NamedRange 只是`rngNamed1`，但在第一次使用之后，可能会有更多与这个相似的命名范围，比如`rngNamed30`.

假设在构建到 2 次运行后`rngNamed30`，我需要再添加 3 个 NamedRange，这会导致`rngNamed33`.

我需要做的基本上是找到最后一个命名范围的最后一行和列，所以我知道从哪里开始将数据复制到并声明下一个命名范围。

### 到目前为止我已经尝试过：

```
Dim rng As range
Set rng = range("rngNamed1")
'Set rng = rng.Find("*", rng.Cells(1, 1), xlFormulas, xlPart, xlByRows, xlPrevious, False)
Debug.Print rng.Find("*", rng.Cells(1, 1), , , , xlPrevious).Address 
```

大多数解决方案的问题在于它们是基于找到最后一个带有数据的单元格。我只需要知道范围的最后一个单元格，不管它是否包含数据。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T18:45:48.883

您可以使用范围的 Row 和 Rows.Count 轻松完成此操作：

```
Sub NextRowAfterRange()
    Dim ws As Worksheet
    Dim rangeNom As String
    Dim nextRow As Long

    ' Enter desired name here
    rangeNom = "rngName1"

    Set ws = ActiveSheet

    nextRow = ws.Range(rangeNom).Row + ws.Range(rangeNom).Rows.Count

    MsgBox nextRow
End Sub 
```

# android - Android - 警报对话框 - 自制取消按钮

> ID：12588427
> 
> 赞同：1
> 
> 时间：2012-09-25T17:51:11.530
> 
> 标签：android, android-alertdialog, onclicklistener

我已经使用我自己的布局 xml 更新了警报对话框格式。

在这个定制的警报对话框中，有两个按钮，一个是保存正在输入的数据，另一个是取消按钮。

我怎么能写取消按钮，这样当用户点击它时，只是简单地关闭对话框？

```
 public OnClickListener NewRowButtonListener = new OnClickListener()
   {
      @Override
      public void onClick(View v) 
      {               
          AlertDialog.Builder builder = new AlertDialog.Builder(MainActivity.this);
          builder.setView(getLayoutInflater().inflate(R.layout.custom_dialog_add, null));
          builder.create();

          AlertDialog Custom_dialog_add = builder.create();
          Custom_dialog_add.show(); // show the Dialog

          Button CancelButton = (Button) findViewById(R.id.CancelButton);
          CancelButton.setOnClickListener(new View.OnClickListener() {       
              @Override 
              public void onClick(View v) {Custom_dialog_add.cancel();}  //WRONG: Cannot refer to a non-final variable Custom_dialog_add inside an inner class defined in a different method
            });         
      } 
   }; 
```

现在修改如下：

```
 public OnClickListener NewRowButtonListener = new OnClickListener() 
       { 
          @Override 
          public void onClick(View v)  
          { 
              AlertDialog.Builder dialog = new AlertDialog.Builder(MainActivity.this); 
              dialog.setView(getLayoutInflater().inflate(R.layout.custom_dialog_add, null)); 
              dialog.create(); 

               final AlertDialog test = dialog.create(); 
               test.show();

               Button close = (Button) findViewById(R.id.CancelButton); 
               close.setOnClickListener(new android.view.View.OnClickListener() { 
                   public void onClick(View v) { 
                       test.dismiss(); 
                   } 
               });
          }
       }; 
```

Eclipse 不会向修改后的编码报告错误，但在模拟时，它会运行空指针异常。logcat如下。这样的问题怎么解决？

```
09-28 20:15:19.505: E/AndroidRuntime(25847): FATAL EXCEPTION: main
09-28 20:15:19.505: E/AndroidRuntime(25847): java.lang.NullPointerException
09-28 20:15:19.505: E/AndroidRuntime(25847):    at com.pearappx.gamescore3.MainActivity$4.onClick(MainActivity.java:422)
09-28 20:15:19.505: E/AndroidRuntime(25847):    at android.view.View.performClick(View.java:3627)
09-28 20:15:19.505: E/AndroidRuntime(25847):    at android.view.View$PerformClick.run(View.java:14329)
09-28 20:15:19.505: E/AndroidRuntime(25847):    at android.os.Handler.handleCallback(Handler.java:605)
09-28 20:15:19.505: E/AndroidRuntime(25847):    at android.os.Handler.dispatchMessage(Handler.java:92)
09-28 20:15:19.505: E/AndroidRuntime(25847):    at android.os.Looper.loop(Looper.java:137)
09-28 20:15:19.505: E/AndroidRuntime(25847):    at android.app.ActivityThread.main(ActivityThread.java:4511)
09-28 20:15:19.505: E/AndroidRuntime(25847):    at java.lang.reflect.Method.invokeNative(Native Method)
09-28 20:15:19.505: E/AndroidRuntime(25847):    at java.lang.reflect.Method.invoke(Method.java:511)
09-28 20:15:19.505: E/AndroidRuntime(25847):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
09-28 20:15:19.505: E/AndroidRuntime(25847):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
09-28 20:15:19.505: E/AndroidRuntime(25847):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T18:00:01.560

这个代码片段会对你有帮助吗？

```
 LayoutInflater inflater = (LayoutInflater) this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View view = inflater.inflate(R.layout.custom_layout, null);
        AlertDialog.Builder dialog = new AlertDialog.Builder(this);
        dialog.setTitle("dialog");
        dialog.setView(view);
        final AlertDialog test = dialog.create();

        Button close = (Button) view.findViewById(R.id.close_button);
        close.setOnClickListener(new android.view.View.OnClickListener() {
            public void onClick(View v) {
                test.dismiss();

            }
        }); 
```

**编辑更新版本：**

```
 //Create new alert dialog
    AlertDialog.Builder dialog = new AlertDialog.Builder(this);
    //set title
    dialog.setTitle("title");
    //create the dialog in a final context
    final AlertDialog test = dialog.create();
    //inflate the custom layout in to a View object
    View view = getLayoutInflater().inflate(R.layout.custom_dialog_add, null);

    //find the Button object within the inflated view
    //                       ↓↓↓
    Button close = (Button) view.findViewById(R.id.CancelButton);
    //set the onClickListener
    close.setOnClickListener(new OnClickListener() { 
        public void onClick(View v) { 
            test.dismiss(); 
        } 
    });
    //show the dialog
    test.show(); 
```

不要忘记使用正确的导入！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T17:53:45.710

您是否使用单独的活动将布局作为对话框或任何其他方式启动？如果您使用单独的活动来启动布局

只需调用

```
youractivity.this.finish() 
```

在您的取消按钮 onclick 事件中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T18:01:21.237

这里有一个例子：

```
 // creates Dialogs for this Activity
   @Override
   protected Dialog onCreateDialog(int id) {
       final Dialog dialog;
       switch(id) {
       case DIALOG_REALLY_EXIT_ID:
           dialog = new AlertDialog.Builder(this).setMessage(
                               "Do you really want to exit this activity?")
           .setTitle("Exit activity")                    
           .setCancelable(false)
           .setPositiveButton("Yes",
                   new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int id) {
                //add your code you would like to be execute when clicking "yes"
                //for example the below to exit your activity
                    //Main.this.finish();
               }
           })
           .setNegativeButton("No",
                   new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int id) {
                   dialog.cancel(); //to dismiss this dialog
           //add any additional things you would like to execute when pressing the no button

               }
           }).create();
           break;
       default:
           dialog = null;
       }
       return dialog;
   } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T18:03:30.770

这在对话框 { } 中（例如：public void Dialog(...){ here.. }

```
 DialogInterface.OnClickListener cancel = new DialogInterface.OnClickListener() {            
        public void onClick(DialogInterface dialog, int which) {
            // TODO Auto-generated method stub

            1 add = 1.this;
            add.finish();

            Intent showActivity = new Intent(1.this, 2.class);
            1.this.startActivity(showActivity);

        }
    }; 
```

编辑这些：
1 - 您所在的 .java 文件的名称。
2 - 对话框取消时要打开/显示的 .java 类的名称。

然后把这段代码

`builder.setNegativeButton("Cancel", cancel);`

会发生什么？当您单击“取消”按钮时，它将关闭“页面（带有对话框）并打开您想要的活动/页面。

* * *

或试试这个：`dialogo.setNeutralButton("Cancel", null);`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T18:08:34.207

您可以自己创建按钮。在该按钮上设置一个 onClickListener 并在 onClick() 内部调用，您可以调用`dialog.cancel();`它来简单地取消对话框。

# java - 如果它是记录中的唯一字段，则模式/正则表达式*仅*获取一个数字

> ID：12588430
> 
> 赞同：1
> 
> 时间：2012-09-25T17:51:22.527
> 
> 标签：java, regex, pattern-matching, java.util.scanner, regex-lookarounds

在过去的几天里，这一直让我发疯。我试图通过验证记录并同时提取字段来用一块石头杀死两只鸟。我的策略是使用正则表达式来做到这一点：

```
private Pattern firstNumber = Pattern.compile("\\d{1}"); 
```

我的理解是“行中的第一个数字（记录）”。到目前为止，这在获取第一个字段（并确保它是一个数字）方面是有效的，但我想更进一步：

**如何调整正则表达式以指定仅当它是唯一字段时才需要该数字？**

也就是说，如果记录是简单的`10`，我想抓取10。但是如果记录是`10 4`，我不想抓取任何东西（因为这是项目的无效记录）。

我试过：

```
private Pattern oneNumberOnly = Pattern.compile("\\d{1}\n"); 
```

但是——令我懊恼的是——这个（以及它的任何其他排列）并没有得到*任何*数字。我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T17:54:17.627

您可以用 表示行/字符串的开头，用 表示行/字符串的`^`结尾`$`，因此模式将是

```
^\d+$ 
```

将`{1}`不起作用，因为它排除了任何多于一位的数字，例如 10。Using`\d+`表示一位或多位数字。使用`\d`也可能允许小数和负值（不确定Java），所以如果你只想要数字，请替换`\d`为`[0-9]`.

顺便说一下，指定`{1}`总是多余的，因为默认情况下一个原子匹配一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T18:00:06.980

您可以使用起始行字符和结束行字符。如果您试图获取一个单独的数字，您可以使用：

```
Pattern.compile("^(\\d)++$"); 
```

通过添加 {1}，您只会得到一个数字的 1 位数字。您还应该修剪要比较的字符串以消除任何额外的空格。

*   `^`- 行首字符
*   `\\d`- 数字字符 [0-9]
*   `+`- 1 个或多个匹配 \d 的字符
*   `+`- 占有（这将抓住所有的数字，比贪婪的量词更快）
*   `$`- 行尾字符

# php - PHP 检查 if 语句有多远？

> ID：12588436
> 
> 赞同：0
> 
> 时间：2012-09-25T17:51:53.043
> 
> 标签：php, testing, if-statement

当有一个 if 语句时：

```
if (var1 == "test" || var2 == "test") 
```

当 var1 已经测试为 true 并且因此不测试 var2 时，PHP 会停止测试吗？我知道 C# 没有，但我对 PHP 不太确定

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T17:54:07.453

仅当特定运算符[**短路**](https://stackoverflow.com/questions/3220919/php-short-circuit-lazy-evaluation-where-is-it-in-the-php-net-manual)时，布尔运算符才会这样做。

# html - div vs li 何时使用它们

> ID：12588440
> 
> 赞同：5
> 
> 时间：2012-09-25T17:51:56.583
> 
> 标签：html, css

嗨，我有大约六个月的 Web 开发经验。我有以下观察，我经常使用`<div>`标签，它使我能够定位元素，归档元素，而且似乎我可以使用`<div>`标签来做任何事情，只需使用它的显示属性。

除了水平菜单导航之外，我从来不需要组合使用`<ul>`or`<li>`元素，我不知道为什么你不能用`<div>`元素来做到这一点，但这似乎是实现水平菜单的“惯例”。

我错过了什么？元素是否有一些`<li>`比`<div>`元素更好或更有用的属性？

[请不要将此问题仅限于水平菜单列表；我想知道你会使用 a`<li>`而不是其他东西的任何场景。]

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T17:57:15.123

是的，您可以严格地使用 div 标签做任何事情（或多或少）（除了表单和输入、图像等例外）。但这不是重点。

首先，特定标签应用了默认 css。例如，李有子弹。您可以更改这些，但在许多情况下，使用具有您正在寻找的样式的标签会更容易。

但最重要的原因是所谓的“语义标记”，即你使用哪个元素对应一个语义含义的概念。li 表示它是一个项目列表，因此即使您没有应用 CSS（例如当屏幕阅读器为盲人大声朗读页面时），它仍然有意义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T17:54:58.243

使用一个标签而不是另一个标签的唯一原因是语义。HTML 语法的目的是为正在呈现的内容提供意义。

元素是一个`<ul>`无序列表。这意味着内容是顺序不重要的项目的集合。

`<div>`元素只是一个结构元素，没有与之关联的语义。您当然可以使用`<div>`元素来创建通常与`<ul>`元素关联的样式，但这意味着失去原始元素的固有语义。

如果你想保持`<div>`元素的原始语义，你可以使用[`list`角色](http://www.w3.org/TR/wai-aria/roles#list)：

```
<div role="list">
    <div role="listitem">...content...</div>
    <div role="listitem">...content...</div>
    <div role="listitem">...content...</div>
</div> 
```

但是，WAI-ARIA 角色模型并没有得到很好的支持，因此最好使用以下基本标记：

```
<ul>
    <li>...content...</li>
    <li>...content...</li>
    <li>...content...</li>
</ul> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T17:56:01.563

HTML 标签应该有助于解释布局的意图。当您将 div 用于所有内容时，它不会说明内容。ul/li 清楚地表明您有一个相关项目的列表。

这是在 HTML5 中添加许多新标签的动机：使布局具有更多语义，使维护代码的人员和屏幕阅读器更易于理解。所以是的，你可以只用 div 让页面看起来像你想要的那样，但这会更难理解。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T18:44:10.203

现在取决于您的需要，您可以使用任何标签，例如，如果您想创建自定义选择，则不能使用 div，因为使用 ul li 更有用，请查看以下示例：http: [//jsfiddle.net/RwtHn/1152/](http://jsfiddle.net/RwtHn/1152/) 现在，如果您想确定要在其中添加不同段落、图片或其他静态元素的部分，则使用 div 更好。检查这个 ul li ：[http](http://www.w3.org/TR/html401/struct/lists.html) ://www.w3.org/TR/html401/struct/lists.html 和这个 divs ：[http](http://www.w3.org/wiki/HTML/Elements/div) ://www.w3.org/wiki/HTML/Elements/div 。何时使用该使用什么不是规则，但如果您编码良好，它可以帮助您进行 Web 开发。干杯。

# ruby-on-rails - 无法通过 Capistrano 符号链接 database.yml

> ID：12588443
> 
> 赞同：0
> 
> 时间：2012-09-25T17:52:04.343
> 
> 标签：ruby-on-rails, deployment, capistrano, symlink

执行后部署失败

```
run "ln -nfs #{shared_path}/config/database.yml #{release_path}/config/database.yml" 
```

错误是：

```
`/var/apps/myserver.com/shared/config/database.yml' and `/var/apps/myserver.com/releases/20120925174051/config/database.yml' are the same file 
```

任何的想法？在我看来，这不是 Capistrano 问题，而是在我开始使用 rvm-capistrano gem 之后发生的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-09T08:20:41.577

您可能已将配置添加到 shared_children。这意味着它将删除版本中的配置目录，并将其符号链接到共享目录。

修复当然是从 deploy.rb 中的 shared_chilren 中删除配置目录。

*PS 是的，我知道这是一个老问题，但它是 Google 上的第一个热门问题。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T13:00:55.023

问题是在部署的某个时刻，创建了配置目录的符号链接，导致 /var/apps/myserver.com/releases/20120925174051/config/ 指向 /var/apps/myserver.com/shared/config/。无论如何，谢谢你，你的问题帮助我找到了问题。

# android - 如何在构建 rintone 列表中播放来自 Android 的特定音频文件？

> ID：12588444
> 
> 赞同：1
> 
> 时间：2012-09-25T17:52:05.443
> 
> 标签：android, ringtone

我需要知道是否可以从 android 内置铃声文件中播放特定的音频文件。例如假设 Tone_23 在 android 铃声列表中，现在我需要在单击按钮时播放这个特定的铃声。我在 Google 中搜索得到了如何调用/显示 RingtonePicker 活动的指导（将显示整个铃声列表）。如果这可能意味着，请分享您的想法。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T18:21:11.177

你可以尝试这样的事情：

```
/**
 * Play ring tone.
 *
 * @param ringToneTitle the ring tone title
 */
void playRingTone(String ringToneTitle) {
    RingtoneManager ringtoneManager = new RingtoneManager(
            getApplicationContext());
    ringtoneManager.setType(RingtoneManager.TYPE_RINGTONE);

    int length = ringtoneManager.getCursor().getCount();

    for (int i = 0; i < length; i++) {
        Ringtone mRingtone = ringtoneManager.getRingtone(i);
        if (mRingtone != null) {
            Log.d("ringtoneTitle ", mRingtone.getTitle(getApplicationContext()));
            if(ringToneTitle.equalsIgnoreCase(mRingtone
                        .getTitle(getApplicationContext())) {
                mRingtone.play();
            }
        }
    }
} 
```

希望这可以帮助。

补充：也看看这个类[RingtoneManager](http://developer.android.com/reference/android/media/RingtoneManager.html)

`RingtoneManager provides access to ringtones, notification, and other types of sounds. It manages querying the different media providers and combines the results into a single cursor. It also provides a Ringtone for each ringtone. We generically call these sounds ringtones, however the TYPE_RINGTONE refers to the type of sounds that are suitable for the phone ringer.`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T18:07:33.890

我认为您只能播放系统中自动设置的铃声，例如：

```
Uri notification = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);
Ringtone r = RingtoneManager.getRingtone(getApplicationContext(), notification);
r.play(); 
```

如果您总是想播放特定的音调/文件，则必须将其添加到您的资产中并从那里播放。

# asp.net - ASP.NET 文本框 AutoPostBack 未触发

> ID：12588445
> 
> 赞同：2
> 
> 时间：2012-09-25T17:52:12.777
> 
> 标签：asp.net

搜索后，我发现了许多建议，但没有一个能解决问题。

```
<asp:TextBox runat="server" ID="uid" AutoPostBack="True" Text=""></asp:TextBox> 
```

在属性窗口中，TextBox 的 EnableViewState = True（[此处建议](http://forums.asp.net/t/1198167.aspx)）。我在 TextBox 中输入一个新值，然后按 Tab 键。if(IsPostBack...) 处的断点也没有发生任何事情。

代码背后：

```
protected void Page_Load(object sender, EventArgs e)
    {
        if(IsPostBack && uid.Text != "" && pw.Text == "")
        {
            Do stuff
        }
    } 
```

更新：我尝试过的其他文本框设置：

```
<asp:TextBox runat="server" ID="uid" Text="" AutoPostBack="True" OnTextChanged="UidTextChanged"></asp:TextBox>

protected void UidTextChanged(object sender, EventArgs e)
    {
        ClientScript.RegisterStartupScript(GetType(), "alert", "alert('it works');", true);
    } 
```

和

```
 <asp:TextBox runat="server" ID="uid" AutoPostBack="True" Text="" onblur="__doPostBack('','');" OnTextChanged="UidTextChanged"></asp:TextBox> 
```

和

```
 <asp:TextBox runat="server" ID="uid" AutoPostBack="True" Text="" onblur="__doPostBack('','');"></asp:TextBox> 
```

每当 AutoPostBack 设置为 true 时，我都会在浏览器控制台中收到以下错误：

```
"Uncaught TypeError: Property 'submit' of object #<HTMLFormElement> is not a function
__doPostBack
(anonymous function)" 
```

当我设置了 onblur 属性时，我收到了完全相同的错误，除了它说的是 onblur 而不是匿名函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T18:20:54.073

您可以为它添加一个 javascript 事件到 onblur 中。 `onblur='__doPostBack('','');'`

这将导致您的文本框一旦被标记出来就会导致回发。

编辑：它应该是“不是”`<asp:TextBox ID="TextBox1" runat="server" onblur="__doPostBack('','');" />` 刚刚尝试过，它有效。尝试删除`AutoPostBack="True"`

编辑2：基于您的pastebin .... `<asp:Button runat="server" UseSubmitBehavior="True" ID="submit" Text="Save" onclick="SubmitClick"/>` 您不能拥有“提交”的ID。将其更改为“btnSubmit”，Javascript 解决方案将起作用，我敢打赌 Auopostback 解决方案也将起作用。 [http://www.xpertdeveloper.com/2012/05/property-submit-of-object-is-not-a-function/](http://www.xpertdeveloper.com/2012/05/property-submit-of-object-is-not-a-function/)将解释这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T17:56:57.230

您可以添加 `OnTextChanged="TextBox1_TextChanged"`到您的文本框

注意：设置事件触发很重要，而不仅仅是 AutoPostBack="true"。

```
<asp:TextBox runat="server" ID="uid" AutoPostBack="True" Text="" OnTextChanged="TextBox1_TextChanged"></asp:TextBox> 
```

代码背后：

```
protected void TextBox1_TextChanged(object sender, System.EventArgs e) {  
    .....
} 
```

# xml - 如果上下文节点是第一个子节点，则返回一个值的 XPath 表达式

> ID：12588451
> 
> 赞同：1
> 
> 时间：2012-09-25T17:52:30.733
> 
> 标签：xml, xpath, infopath

我需要一个执行以下操作的 XPath 表达式：

*   如果上下文节点*不是*第一个子节点，则返回空白
*   如果上下文节点是第一个子节点，则表达式应返回文档中其他地方的“临时”节点的值
    *   在此示例中，该值将是`<my:DisplayNameTemp>Green, John</my:DisplayNameTemp>`
*   InfoPath 仅支持 XPath 1.0，不支持“位置”表达式
*   我正在使用 MS InfoPath，如果检测到多个子节点，我将使用规则来应用此表达式。

如果选择了多个用户，我试图在 MS InfoPath 中清空人员选择器。这是我的示例 XML：

```
<?xml version="1.0" encoding="UTF-8"?><?mso-infoPathSolution solutionVersion="1.0.0.24" productVersion="14.0.0" PIVersion="1.0.0.0" href="file:///C:\Documents%20and%20Settings\Chris\Local%20Settings\Application%20Data\Microsoft\InfoPath\Designer3\35e8a7eff4a841a9\manifest.xsf" ?><?mso-application progid="InfoPath.Document" versionProgid="InfoPath.Document.2"?>
<my:myFields xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:pc="http://schemas.microsoft.com/office/infopath/2007/PartnerControls" xmlns:ma="http://schemas.microsoft.com/office/2009/metadata/properties/metaAttributes" xmlns:d="http://schemas.microsoft.com/office/infopath/2009/WSSList/dataFields" xmlns:q="http://schemas.microsoft.com/office/infopath/2009/WSSList/queryFields" xmlns:dfs="http://schemas.microsoft.com/office/infopath/2003/dataFormSolution" xmlns:dms="http://schemas.microsoft.com/office/2009/documentManagement/types" xmlns:tns="http://microsoft.com/webservices/SharePointPortalServer/UserProfileService" xmlns:s1="http://microsoft.com/wsdl/types/" xmlns:my="http://schemas.microsoft.com/office/infopath/2003/myXSD/2012-09-06T15:09:43" xmlns:xd="http://schemas.microsoft.com/office/infopath/2003" xml:lang="en-us">
    <my:group>
        <pc:Person xmlns:pc="http://schemas.microsoft.com/office/infopath/2007/PartnerControls">
            <pc:DisplayName>Green, John</pc:DisplayName>
            <pc:AccountId>DOMAIN\John.Green</pc:AccountId>
            <pc:AccountType>User</pc:AccountType>
        </pc:Person><pc:Person xmlns:pc="http://schemas.microsoft.com/office/infopath/2007/PartnerControls">
            <pc:DisplayName>Smith, John</pc:DisplayName>
            <pc:AccountId>DOMAIN\john.smith</pc:AccountId>
            <pc:AccountType>User</pc:AccountType></pc:Person>
        <pc:Person xmlns:pc="http://schemas.microsoft.com/office/infopath/2007/PartnerControls">
            <pc:DisplayName>Public, John</pc:DisplayName>
            <pc:AccountId>DOMAIN\John.Q.Public</pc:AccountId>
            <pc:AccountType>User</pc:AccountType>
        </pc:Person><pc:Person xmlns:pc="http://schemas.microsoft.com/office/infopath/2007/PartnerControls">
            <pc:DisplayName>Doe, John</pc:DisplayName>
            <pc:AccountId>DOMAIN\John.Doe</pc:AccountId>
            <pc:AccountType>User</pc:AccountType></pc:Person>
    </my:group>
    <my:DisplayNameTemp>Green, John</my:DisplayNameTemp>
    <my:AccountIdTemp>DOMAIN\John.Green</my:AccountIdTemp>
    <my:AccountTypeTemp>User</my:AccountTypeTemp>
</my:myFields> 
```

如果我可以为除第一个孩子之外的所有孩子返回一个“空白”值，那么选择器将在用户将注意力从它身上移开后重新验证，并且只会出现一个用户名。

我可以使用以下表达式来检索使用选择器选择的第一个用户`//my:group/pc:Person[1]/pc:DisplayName`：

*   我相信我需要一个表达式，它使用`|`上面刚刚提到的命令和表达式来表示第一个孩子，或者只是一个“”来表示其他任何东西。
*   我相信检查前一个兄弟节点中是否存在节点可能会在不使用任何位置表达式的情况下揭示哪个节点是第一个节点。

    我不能完全拼凑起来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T14:35:44.637

**使用**：

```
concat($yourTempNode[not($yourContextNode/preceding-sibling::*)], 
       substring(' ', 1 + boolean($yourContextNode/preceding-sibling::*))
       ) 
```

的第一个参数`concat()`是`$yourTempNode`-- 如果`$yourContextNode`没有前面的兄弟元素或没有其他元素的值。

第二个参数是一个 cpace 字符——如果`$yourContextNode`不是其父元素的第一个子元素，否则什么都不是。

# php - 从 PHP 数组到 Javascript 数组 花括号 vs 方括号

> ID：12588452
> 
> 赞同：2
> 
> 时间：2012-09-25T17:52:32.323
> 
> 标签：php, javascript, html, ajax, json

PHP 版本 5.3.14

声明我的数组以及我如何在程序中使用它：（更改为通用代码方案）

我正在创建这样的 PHP 数组：

```
$totalData;

getnumSends($SomeObject){

   $dataArray[0] = $someObject->Date //Date is a String
   foreach($anotherObject as $Object2){
    switch($anotherObject->String){
    case "XX":
        $dataArray[1]+=1;
         break;
    case "YY":
        $dataArray[2]+=1;
        break;
    }
  }
}

   //Method just puts an int value at certain places in the array
   //extra code for putting ints in the array

   return $dataArray;
}
$someIndex = 0;
foreach($someObject as $Object1){ //that is very abstract
   $totalData[$someIndex] = $Object1->getNumSend($someObject);  
   $someIndex+=1;

} 
```

那有意义吗？

假设我有一个 PHP 数组，在`print_r($totalData);`调用时看起来像这样：

```
Array
(
    [0] => Array
        (
            [0] => 2012-04-25
            [1] => 2
            [2] => 1
            [3] => 2
            [4] => 1
            [5] => 1
            [6] => 1
        )

    [1] => Array
        (
            [0] => 2012-04-29
            [1] => 4
            [2] => 4
            [3] => 2
            [4] => 1
            [5] => 1
        )
) 
```

现在，我有一些要用于绘制数据的 javascript 代码。脚本需要这种格式的数据：

```
var matrix = [[2012-04-25, 2, 1, 2, 1, 1, 1], [2012-4-29, 4, 4, 2, 1, 1]]; 
```

为了将 php 数组转换为 javascript 数组，似乎有多种方法，但我尝试过的每一种方法都无法得到所有方括号。我得到的最接近的是：

```
<script>

var matrix = <?php echo json_encode($totalData); ?>;

</script> 
```

“查看页面源”的输出：

```
var matrix = [[{"0":"2012-04-25","1":2,"2":1,"3":2,"4":1,"5":1,"6":1}],[{"0":"2012-04-29","1":4,"2":4,"3":2,"4":1,"5":1}]]; 
```

有没有办法从 PHP 二维数组到 Javascript 二维数组但没有花括号？我希望远离编写手动填充每个位置的方法？我希望我只是错误地使用了 JSON。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T18:45:44.570

从另一端攻击这个：

我知道你说过你不想手动重建数组，但这是一种作为最后手段的方法：

```
var matrix = [{"0":"2012-04-25","1":2,"2":1,"3":2,"4":1,"5":1,"6":1},{"0":"2012-04-29","1":4,"2":4,"3":2,"4":1,"5":1}];

var retArray = new Array();
var tmpArr1 = new Array();
var tmpArr2 = new Array();

for(var i = 0; i < retArray.length; ++i) {
    for(property in matrix[i]) {
        (i === 0) ? tmpArr1.push(matrix[i][property]) : tmpArr2.push(matrix[i][property]);
    }
}

retArray.push(tmpArr1);
retArray.push(tmpArr2); 
```

它可能会被清理/变得更抽象，但这是一般方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:28:09.443

一种可能但不是很“干净”的方法是方便地内爆阵列

```
function getJSArray($data){
    $jsMatrix = '[';
    foreach($data as $key => $val){
        $jsMatrix .= '[' . implode(', ', $val) . ']';
        if($key != count($data)-1)
            $jsMatrix .= ', ';
    }
    $jsMatrix .= ']';
    return $jsMatrix;
} 
```

接着

```
<script>
    var matrix = <?php echo getJSArray($totalData); ?>;
</script> 
```

使用类似的数组

```
$data = array(array('2012-04-25', 2, 1, 2, 1, 1, 1),
              array('2012-04-29', 4, 4, 2, 1, 1)
             ); 
```

你会有输出

```
<script>
    var matrix = [[2012-04-25, 2, 1, 2, 1, 1, 1], [2012-04-29, 4, 4, 2, 1, 1]]
</script> 
```

# c# - 使用 PInvoke 将 void 传递给 void

> ID：12588456
> 
> 赞同：1
> 
> 时间：2012-09-25T17:52:40.067
> 
> 标签：c#, c++, pinvoke

我在将托管 void 传递给 c++ void 时遇到问题。你知道如何正确地做到这一点吗？这是我的 c++ 代码，它以 void(__cdecl* disph)() 作为参数

```
extern "C" __declspec(dllexport) void Display(void(__cdecl* disph)()); 
```

我的问题是如何将一个简单的 void()（例如 public static void Display()）传递给那个 c++ void。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T18:01:13.893

您在谈论传递函数指针，对吗？`void`s 没有被传递，因为没有什么可以传递，因为它是错误的，无效的。

如果我理解正确，您需要将指针传递给不带参数且不返回任何内容的函数，对吗？我现在不在 Windows 机器上，所以这是未经测试的，但是这样的东西应该可以工作：

```
public delegate void VoidFnDelegate();
public value struct MyDLL
{
    [DllImport("MyDll.dll")]
    static public void Display(VoidFnDelegate fn);
}
...

void SomeFn() { ... }

MyDll.Display(new VoidFnDelegate(SomeFn)); 
```

# php - MYSQL - 编写 PHP 查询

> ID：12588464
> 
> 赞同：1
> 
> 时间：2012-09-25T17:53:02.277
> 
> 标签：php, mysql

我只是在学习 MYSQL/PHP。我在查询时遇到问题，它在 myphpadmin 中工作：

```
select `email`, count(*) as count
from `table`
where `date` = "open"
group by `email`
order by `email` 
```

如果我自己编写 mysql_query 或使用 myphpadmin 生成的 php，我无法让它工作：

```
$sql = "select `email`, count(*) as count\
    . "from `table`\n"
    . "where `date` = \"open\"\n"
    . "group by `email`\n"
    . "order by `email`\n"
    . ""; 
```

目的是查询 EMAIL、DATE、EVENT 的三列表——其中 EVENT 可以是“打开”或“退回”，并计算一个人打开电子邮件的次数。

这是文件的其余部分（我意识到我应该使用 msqli，这是我列表中的下一个要弄清楚的......）：

```
<?php

$db_host = '123';
$db_user = '123';
$db_pwd = '123';

$database = '';
$table = 'test';

if (!mysql_connect($db_host, $db_user, $db_pwd))
    die("Can't connect to database");

if (!mysql_select_db($database))
    die("Can't select database");

sql = "select `email`, count(*) as count\n"
    . "from `table`\n"
    . "where `date` = \"open\"\n"
    . "group by `email`\n"
    . "order by `email`\n"
    . "";

// sending query
$result = mysql_query($sql);
if (!$result) {
    die("Query to show fields from table failed 2");
}

echo "<table border='1'>
<tr>
<th>email</th>
<th>event</th>
<th>date</th>

</tr>";

while($row = mysql_fetch_array($result))
  {
  echo "<tr>";
  echo "<td>" . $row['Email'] . "</td>";
  echo "<td>" . $row['event'] . "</td>";
  echo "<td>" . $row['date'] . "</td>";
   }

echo "</table>\n";

mysql_free_result($result);
?> 
```

我刚刚得到“查询以显示表中的字段失败 2” - 查询不起作用

查询中的 '\n' - 由 myphpadmin 生成（当我使用“生成 php 代码”功能时

我有一个到数据库的连接，我只是更改了分配给这些变量的值，所以我不会发布它们

我的文件中的 $sql var 中有“$”，只是没有将它复制到这里。

所以，

当我用一个简单的查询替换这个查询时，它工作正常，但是当我尝试更复杂的查询时，没有运气。我认为这与将 mysql WHERE `date`= "open" 转换为正确的（转义？）php....有关

* * *

当我发现自己的问题=最大的问题（几个）时，我不确定程序是什么。当我在 myphpadmin 上使用“生成 PHP 代码”功能时，它并没有从表中的列名中保留电子邮件中的大写“E”...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T17:58:13.733

你的`$database`变量是空的，你正在使用它`mysql_select_db`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T18:02:19.860

那些换行符可能是问题所在......

尝试

```
$sql = "select email, count(*) as count from table where date=\"open\" group by email order by email"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T18:06:01.910

1.  第 19 行（包括空行）中的 sql var 缺少 $。
2.  $result 的价值是多少？还是在那之前有错误？

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-25T17:54:38.827

您可以尝试使用 ' 而不是 `!

还要确保您与数据库有活动连接。您只是在检查连接是否可行，所以我不确定您是否真的保持连接完好无损。

相反，您可以这样做：

```
$connect = mysql_connect($db_host, $db_user, $db_pwd) or die(mysql_error()); 
```

# c# - 在 DataGridView 中显示列作为密码输入类型

> ID：12588465
> 
> 赞同：6
> 
> 时间：2012-09-25T17:53:05.810
> 
> 标签：c#, winforms, datagridview

我想将datagridview中的一列显示为包含密码字符的列。我无法弄清楚为什么datagridview没有触发此事件。

```
 private void dataGridView1_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
    {
        if(e.ColumnIndex == 3)
        {
            if(e.Value != null)
            {
                e.Value = new string('*', e.Value.ToString().Length);
            }
        }
    } 
```

请帮忙。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T19:08:56.057

您可以处理该`EditingControlShowing`事件，然后将编辑控件转换为 TextBox 并手动将 UseSystemPasswordChar 设置为 true。

```
private void dataGridView1_EditingControlShowing(object sender, 
    DataGridViewEditingControlShowingEventArgs e)
{
    if(e.ColumnIndex == 3)//select target column
    {
    TextBox textBox = e.Control as TextBox;
    if (textBox != null)
    {
        textBox.UseSystemPasswordChar = true;
    }
    }
} 
```

# c# - IEnumerable 到字典 > 使用 LINQ

> ID：12588466
> 
> 赞同：20
> 
> 时间：2012-09-25T17:53:08.540
> 
> 标签：c#, linq, .net-3.5

有`IEnumerable<Order> orders`，如何`Dictionary<string, IEnumerable<Order>>`使用 Linq 获得一个，其中的键`Order.CustomerName`映射到一个`IEnumerable`客户的订单。

`orders.ToDictionary(order => order.CustomerName)`不会立即起作用，因为可能有多个订单可能具有相同的 CustomerName。

**解决方案：** `orders.ToLookup(order => order.CustomerName);`

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-25T17:56:54.720

[ILookup](http://msdn.microsoft.com/en-us/library/bb460184.aspx)接口就是为此目的而设计的，它表示一个类似于字典的结构，每个键包含许多值。它具有与字典相似的性能特征（即它是哈希表类型结构）

您可以使用[.ToLookup](http://msdn.microsoft.com/en-us/library/bb549073.aspx)扩展方法创建[ILookup](http://msdn.microsoft.com/en-us/library/bb460184.aspx)，如下所示：

```
ILookup<string, Order> ordersLookup = orders.ToLookup(o => o.CustomerName) 
```

然后：

```
IEnumerable<Order> someCustomersOrders = ordersLookup[someCustomerName]; 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-25T18:02:20.223

只是@spender's answer的替代品，如果你*真的*想要一个 type `Dictionary<string, IEnumerable<Order>>`，你可以使用：

```
Dictionary<string, IEnumerable<Order>> dictionary = orders
        .GroupBy(order => order.CustomerName)
        .ToDictionary(groupedOrders => groupedOrders.Key, 
                          groupedOrders => (IEnumerable<Order>)groupedOrders); 
```

我确信有更好的方法，但这也可以。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-25T18:13:00.740

或者你可以简单地使用

```
orders.ToLookup(o => o.CustomerName).ToDictionary(g => g.Key) 
```

但正如 Spender 的回答所表明的那样，也许你不需要最后一种方法，`ToDictionary`.

# objective-c - 新的cocos2d还没有CCribbon？

> ID：12588470
> 
> 赞同：0
> 
> 时间：2012-09-25T17:53:27.910
> 
> 标签：objective-c, macos, cocos2d-iphone, 2d-games

我最近下载了新的 cocos2d（我还有旧的），我一直在使用 CCRibbon 的丝带来进行子弹移动，但它不再存在了，在我的很多游戏中它是一个关键对象，我能以某种方式把它放回去还是使用类似的“绘图”对象？

谢谢。

# sql - 为什么我不能在 ISNULL 语句的第二部分连接一个值？

> ID：12588471
> 
> 赞同：1
> 
> 时间：2012-09-25T17:53:33.680
> 
> 标签：sql, sql-server-2005

我已经使用 CASE 语句解决了这个问题，但我想知道为什么在使用 时`ISNULL`，我可以将一个值连接到 check_expression 而不是 replacement_value。这是一个例子：

```
create table name_test 
(
    nm          varchar(25)
    ,mid_init   varchar(1)
    ,name_type  int
)

insert into name_test values('Joe',NULL,1)
insert into name_test values('Joe','X',2) 
```

我有这个查询。

```
SELECT
    n1.nm, isnull(n2.mid_init+'b',n1.mid_init) as m1,
    isnull(n1.mid_init,n2.mid_init+'b') as m2
FROM 
    name_test n1
    JOIN name_test n2 
    on n1.nm = n2.nm and n1.name_type = 1 and n2.name_type = 2 
```

在第一个语句 ( `m1`) 中，我首先使用 NOT-NULL 值，并与“b”连接。在第二个语句 ( `m2`) 中，我首先使用 NULL 值，因此查询应该传递到 replacement_value。确实如此，但只取第一个值，而不是连接的值。

结果：

```
nm     m1   m2
Joe    Xb   X 
```

通过更多调查，我看到这个查询：

```
select 
    n1.nm, isnull(n2.mid_init+'b',n1.mid_init) as m1,
    isnull(n1.mid_init,'1'+ n2.mid_init+'b') as m2
from 
    name_test n1
    join name_test n2 
    on n1.nm = n2.nm and n1.name_type = 1 and n2.name_type = 2 
```

返回

```
nm  m1  m2
Joe Xb  1 
```

因此，该`ISNULL`函数将采用整个`check_expression`，但如果`check_expression`为空，它将只采用 的第一部分`replacement_value`。

有谁知道为什么会有差异。另外，我用一个案例解决了它 - 有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T17:57:01.370

`ISNULL`继承第一个表达式`COALESCE`的数据类型，而根据数据类型优先级继承数据类型。（到底有什么意义`varchar(1)`？）

我会做：

```
select n1.nm, 
COALESCE(CONVERT(VARCHAR(25), n1.mid_init),'1'+ n2.mid_init+'b') as m2
from name_test n1
join name_test n2 on n1.nm = n2.nm and n1.name_type = 1 and n2.name_type = 2; 
```

# vba - 如何在 word 2007 文档中添加按钮，并使用 VBA 处理单击事件？

> ID：12588472
> 
> 赞同：0
> 
> 时间：2012-09-25T17:53:41.060
> 
> 标签：vba, ms-word

我如何能：

1.  在我的 ms word 2007 文档中添加按钮（我会说这将是一项微不足道的任务，但甚至无法弄清楚）

2.  在我的 VBA 脚本中处理此按钮的单击事件

3.  设置我的文本控件的文本（带有标签“text1”）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T19:11:25.110

我不知道这是否是您想要的，但要在文档中添加一个按钮，请打开[Developer tab](http://www.flickr.com/photos/ivanwalsh/4015738871/)。单击`Legacy tools`文件夹（在控件组中），然后单击`Command Button (Active X Control)`. 这将在文档中放置一个按钮并使 Word 进入设计模式。

双击新按钮，您将在按钮的事件处理程序中进入 VBA 编辑器。

输入代码来操作 TextBox1 中的文本：

```
TextBox1.Text = "Hi there, VBA master!" 
```

点击设计模式按钮退出设计模式，一切顺利；单击新按钮以设置文本。

如果您打算在功能区中添加一个按钮？稍微复杂一点，但没那么难。发表评论，我相信我们也可以解决。

# objective-c - 从 weak 到 unsafe_unretained 的转换会导致崩溃？

> ID：12588475
> 
> 赞同：1
> 
> 时间：2012-09-25T17:53:44.443
> 
> 标签：objective-c, automatic-ref-counting

我有一个为 ARC 和 iOS 5 设计的库，但一位客户想要为 iOS 4.x 构建。`weak`我将带有限定符的属性转换为`unsafe_unretained`，但是现在看来我遇到了内存损坏-esq 崩溃。在崩溃的情况下，我有一个像这样的委托属性

```
@property (unsafe_unretained) id<MYDelegateProtocol> delegate; 
```

我`@synthesize`是伊瓦尔。

每当我想在委托上调用方法时，我检查它是否是`nil`，如果不是，那么我调用该方法，因为我在该协议中没有可选方法，所以我不检查`respondsToSelector`.

但是，自从更改`weak`to 后`unsafe_unretained`，我发现引用显然消失了，我留下了一个悬空指针。如果我在 ObjC 异常上放置断点（对于无法识别的消息），然后`po`是对象的地址，我会看到它是一个甚至没有实现委托协议的对象，所以它当然会崩溃。

使用时`unsafe_unretained`如何知道引用已“消失”？我的代码依赖于之前被清零的指针。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T18:04:07.057

你有一个对象所有权问题。已释放的对象不会为零，它只会指向该对象曾经所在的地址。nil 指针将指向 0x0。您需要分析您的架构如何在被委托的记录处于活动状态时有一个正在释放的委托。在某些特殊情况下，被委托的对象可能会保留它们的委托（如 NSURLConnection）。在其他情况下，被委托的对象是其委托的属性，在这种情况下，需要在解除分配之前清除委托。分析您的模式和/或提供更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-27T17:54:06.750

试试这个我开发[的iOSWeakForwarder类](https://github.com/intuit/iOSWeakForwarder)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T18:03:34.683

> 使用 unsafe_unretained 时，我如何知道引用已“消失”？我的代码依赖于之前被清零的指针。

这必须由您在编译时确定。通常，作为委托的对象应该在方法中设置`delegate`委托给它的对象的属性。例如：`nil``dealloc`

```
- (void)dealloc
{
    if (_httpRequest.delegate == self)
        _httpRequest.delegate = nil;
} 
```

希望这可以帮助！

# java - 多线程套接字通信客户端/服务器

> ID：12588476
> 
> 赞同：8
> 
> 时间：2012-09-25T17:53:44.997
> 
> 标签：java, multithreading, concurrency, client-server

我完成了一个运行良好的客户端/服务器套接字通信程序。现在我正试图弄清楚如何做到这一点，以便我可以一次有多个客户端连接到服务器。我环顾四周，似乎有不止几种不同的方法可以做到这一点。所以我来这里向你们寻求帮助/建议。

我的服务器：

```
public class Server {
    private ServerSocket serverSocket = null;
    private Socket clientSocket = null;

    public Server() {
        try {
            serverSocket = new ServerSocket(7003);
        } catch (IOException e) {
            System.err.println("Could not listen on port: 7003");
            System.exit(1);
        }

        try {
            clientSocket = serverSocket.accept();
        } catch (IOException e) {
            System.err.println("Accept failed");
            System.exit(1);
        }
    }

    public void startServer() throws IOException {
        PrintWriter output = new PrintWriter(clientSocket.getOutputStream(), true);
        BufferedReader input = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));

        String inputLine, outputLine;

        outputLine = "Connected to Server";
        output.println(outputLine);

        while ((inputLine = input.readLine()) != null) {
            // This just determines users input and server ruturns output based on that

            outputLine = this.getServerOutput(inputLine);
            output.println(outputLine);

            if (outputLine.equals("Bye"))
                break;
        }

        output.close();
        input.close();
        clientSocket.close();
        serverSocket.close();
    }
} 
```

我需要让我的构造函数创建线程`startServer()`还是我的运行方法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-25T18:03:02.077

你应该使用`ExecutorService`. 您的客户端请求处理将是`run()`一个`Runnable`，并且在每次接受后，您可以调用`ExecutorService.submit(runnableTask)`异步服务客户端。

使用 ExecutorService 的示例。

```
public class MyServer {

    private static MyServer server; 
    private ServerSocket serverSocket;

    /**
     * This executor service has 10 threads. 
     * So it means your server can process max 10 concurrent requests.
     */
    private ExecutorService executorService = Executors.newFixedThreadPool(10);        

    public static void main(String[] args) throws IOException {
        server = new MyServer();
        server.runServer();
    }

    private void runServer() {        
        int serverPort = 8085;
        try {
            System.out.println("Starting Server");
            serverSocket = new ServerSocket(serverPort); 

            while(true) {
                System.out.println("Waiting for request");
                try {
                    Socket s = serverSocket.accept();
                    System.out.println("Processing request");
                    executorService.submit(new ServiceRequest(s));
                } catch(IOException ioe) {
                    System.out.println("Error accepting connection");
                    ioe.printStackTrace();
                }
            }
        }catch(IOException e) {
            System.out.println("Error starting Server on "+serverPort);
            e.printStackTrace();
        }
    }

    //Call the method when you want to stop your server
    private void stopServer() {
        //Stop the executor service.
        executorService.shutdownNow();
        try {
            //Stop accepting requests.
            serverSocket.close();
        } catch (IOException e) {
            System.out.println("Error in server shutdown");
            e.printStackTrace();
        }
        System.exit(0);
    }

    class ServiceRequest implements Runnable {

        private Socket socket;

        public ServiceRequest(Socket connection) {
            this.socket = connection;
        }

        public void run() {

            //Do your logic here. You have the `socket` available to read/write data.

            //Make sure to close
            try {
                socket.close();
            }catch(IOException ioe) {
                System.out.println("Error closing client connection");
            }
        }        
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-25T19:33:16.997

> 如何做到这一点，以便我可以一次与服务器建立多个客户端连接

现在您正在启动服务器并立即等待单个客户端在构造函数中连接。

```
clientSocket = serverSocket.accept(); 
```

然后你在你的`startServer()`方法中处理那个单一的套接字连接。这意味着不会处理其他客户端。

```
public void startServer() throws IOException {
    PrintWriter output = new PrintWriter(clientSocket.getOutputStream(), true);
    ... 
```

通常使用这样的服务器模式，您会执行以下操作：

1.  在构造函数中设置您的服务器套接字。
2.  创建一个`acceptClients()`循环等待客户端被接受的方法。这可以派生一个线程以在后台在其自己的线程中接受客户端。
3.  对于每个客户端，要么派生一个线程来处理连接，将线程传递给客户端套接字。正如@basiljames 所示，最好使用 an`ExecutorService`为您管理线程。

这是一些示例代码：

```
public class Server {
    private ServerSocket serverSocket = null;

    public Server(int portNumber) throws IOException {
        serverSocket = new ServerSocket(portNumber);
    }

    // this could be run in a thread in the background
    public void acceptClients() throws IOException {
        // create an open ended thread-pool
        ExecutorService threadPool = Executors.newCachedThreadPool();
        try {
            while (!Thread.currentThread().isInterrupted()) {
                // wait for a client to connect
                Socket clientSocket = serverSocket.accept();
                // create a new client handler object for that socket,
                // and fork it in a background thread
                threadPool.submit(new ClientHandler(clientSocket));
            }
        } finally {
            // we _have_ to shutdown the thread-pool when we are done
            threadPool.shutdown();
        }
    }

    // if server is running in background, you stop it by killing the socket
    public void stop() throws IOException {
        serverSocket.close();
    }

    // this class handles each client connection
    private static class ClientHandler implements Runnable {
        private final Socket clientSocket;
        public ClientHandler(Socket clientSocket) {
            this.clientSocket = clientSocket;
        }
        public void run() {
            // use the client socket to handle the client connection
            ...
        }
    }
} 
```

几乎所有类似的实现都建议使用`ExecutorService`线程池`Thread`。`Thread`但是，如果由于某种原因您坚持使用 raw ，则可以在您的`acceptClients()`方法中执行以下操作：

```
 public void acceptClients() throws IOException {
        while (!Thread.currentThread().isInterrupted()) {
            // wait for a client to connect
            Socket clientSocket = serverSocket.accept();
            // fork a background client thread
            new Thread(new ClientHandler(clientSocket)).start();
        }
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-25T18:01:35.350

改变这个：`public void startServer() throws IOException` 到这个：`public void startServer(Socket clientSocket) throws IOException`

那么你需要做的就是：

```
public Server()
{
    try
    {
        serverSocket = new ServerSocket(7003);
    }
    catch (IOException e)
    {
        System.err.println("Could not listen on port: 7003");
        System.exit(1);
    }

    try
    {
        while(true) {
            final Socket socket = serverSocket.accept();
            new Thread(new Runnable() {
                public void run() {
                    try {
                        startServer(socket);
                    } catch(IOException e) {e.printStackTrace();}
                }
            }).start();
        }
    }
    catch(IOException e)
    {
        System.err.println("Accept failed");
        System.exit(1);
    }
} 
```

最后，您可以删除`private Socket clientSocket = null;`

那应该能让你到达那里。或者至少非常接近。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-29T11:44:02.617

```
private static final int SERVER_PORT = 35706;
private ServerSocket serverSocket;
private final ArrayList<ClientThread> activeClients = new ArrayList<>();

public void startServer() {

    try {
        serverSocket = new ServerSocket(SERVER_PORT);

        final ExecutorService clientPool = Executors.newCachedThreadPool();

        while (!serverSocket.isClosed()) {

            try {
                Future<Socket> future = clientPool.submit(() -> {
                       Socket socket = serverSocket.accept();
                       ClientThread clientThread= new ClientThread(socket);
                       return (socket);
                });

                activeClients.add(future.get());
            } catch (IOException e) {
                clientPool.shutdownNow();
                System.out.println(e.getMessage());
            } catch (InterruptedException | ExecutionException e) {
                System.out.println(e.getMessage());
            }
        }

    } catch (IOException e) {
        System.out.println(e.getMessage());
    }
}

public void stopServer() {  

   try {
        serverSocket.close();
        activeClients.forEach(socket -> {
            try {
                socket.close();
            } catch (IOException e) {
                System.out.println(e.getMessage());
            }
        });

   } catch (IOException ex) {
        System.out.println(e.getMessage());
   }

}

private static class ClientThread implements Runnable{
    private final Socket socket;

    public ClientThread(Socket socket) throws IOException {
       this.socket = socket;
    }

    @Override
    public void run() {
        /* Your implementation */
    }
} 
```

# java - 我可以在 ActivePivot 中使用我的 C++ DLL 吗？

> ID：12588480
> 
> 赞同：2
> 
> 时间：2012-09-25T17:53:48.987
> 
> 标签：java, dll, activepivot

ActivePivot 是一个 Java 解决方案，我如何在其中重用现有的 C++ 库？

我考虑了一个基于 ActivePivot 的 CVA（CounterParty Value Adjustment）项目，我想重用我现有的 C++ 代码，将我的 Collat​​eral 逻辑应用于 ActivePivot 的双打聚合数组。是否有特殊的后处理器来调用 C++ 代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T18:05:35.280

ActivePivot 后处理器是一个普通的 Java 类。它没有什么特别之处。因此，您可以使用任何现有技术，在 Java 程序中调用 C++ DLL 函数。

这可以通过 JNA 和 BridJ 来实现。我不考虑 JNI，因为在大多数情况下，您不需要使用如此低级的 API。

例如，对于 BridJ： 给定一个 C++ 标头，如下所示：

```
__declspec(dllexport) int multiply(double multiplier, int size, double* const vector); 
```

我做了以下课程：

```
import org.bridj.BridJ;
import org.bridj.Pointer;
import org.bridj.ann.Library;
import org.bridj.ann.Runtime;
import org.bridj.cpp.CPPRuntime;

// Generated with http://code.google.com/p/jnaerator/
@Library(CPP_Collateral.JNA_LIBRARY_NAME)
@Runtime(CPPRuntime.class)
public class CPP_Collateral {
public static final String JNA_LIBRARY_NAME = "dummy";

static {
    // In eclipse, the DLL will be loaded from a resource folder
    // Else, one should add a program property: -Djava.library.path
    BridJ.addLibraryPath("src/main/resources/DLL");

    BridJ.register();
}

/**
 * My dummy.dll has one method:
 * int multiply(double multiplier, int size, double* const vector)
 */
public static native int multiply(double multiplier, int size, Pointer<Double> vector);
} 
```

我的 IPostProcessor 很简单

```
@Override
protected Object doEvaluation(ILocation location, Object[] underlyingMeasures) throws QuartetException {
    double[] asArray = (double[]) underlyingMeasures[0];

    if (asArray == null) {
        return null;
    } else {
        // Size of the array
        int size = asArray.length;

        // Allocate a Pointer to provide the double[] to the C++ DLL
        Pointer<Double> pCount = allocateDoubles(size);

        pCount.setDoubles(asArray);

        CPP_Collateral.multiply(2D, size, pCount);

        // Read again: the double[] is copied back in the heap
        return pCount.getDoubles();
    }
} 
```

在性能方面，我在这里处理了 2.000 个大小为 10000 的 double[]，影响约为 100ms

# vba - VBA宏运行时错误6：循环内溢出编码

> ID：12588485
> 
> 赞同：9
> 
> 时间：2012-09-25T17:54:16.257
> 
> 标签：vba, excel

遇到此错误的问题。我正在创建一个 GA，循环是将我的适应度值分配给一个数组。

一些变量

```
Dim Chromolength as integer
Chromolength = varchromolength * aVariables 
Dim i as integer, j as integer, counter as integer
Dim Poparr() As Integer
Dim FitValarr() As Integer 
```

编码：

```
ReDim Poparr(1 To PopSize, 1 To Chromolength)

For i = 1 To PopSize                
  For j = 1 To Chromolength       
    If Rnd < 0.5 Then           
        Poparr(i, j) = 0
    Else
        Poparr(i, j) = 1        
    End If
  Next j
Next i

For i = 1 To PopSize                   
 j = 1                           
 counter = Chromolength              
 Do While counter > 0  
   FitValarr(i) = FitValarr(i) + Poparr(i, counter) * 2 ^ (j - 1)          
  j = j + 1                   
  counter = counter - 1       
 Loop
Next i 
```

我遇到以下问题：

```
FitValarr(i) = FitValarr(i) + Poparr(i, counter) * 2 ^ (j - 1) 
```

抱歉，我对 VBA 还很陌生。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-25T18:15:01.887

当您创建的整数表达式的计算结果大于可以用 16 位有符号整数表示的值时，就会出现溢出情况。给定表达式，FitValarr(i) 的内容或表达式 2^(j-1) 可能会溢出。建议将当前声明为 Int 的所有变量更改为 Long。长整数是 32 位有符号值，并提供相应更大范围的可能值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-23T14:47:06.590

我有同样的运行时错误 6。经过大量调查后，我发现我的错误是一个简单的“除以零”错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-04T15:39:07.773

我设置了一个整数值来保存邮政编码，错误 6 事件困扰着我——直到我意识到 85338 的邮政编码超出了 int 的容量......虽然我不认为邮政编码是一个“值” “尽管如此，它肯定被解释为一个。我怀疑地址以及其他“非数字”数值也会发生同样的情况。将变量更改为字符串解决了该问题。我只是没有想到邮政编码是“数值”。学过的知识。

# android-ndk - 绕过 Android Invensense Motion Library 创建自定义磁力计校准

> ID：12588486
> 
> 赞同：1
> 
> 时间：2012-09-25T17:54:16.727
> 
> 标签：android-ndk, sensors, compass-geolocation, magnetometer

我希望从磁力计芯片中获取原始值，如未校准、未更改的原始值，直接从 I2C 接口获取。我已经追踪到 HAL 的 android java、本机源代码和 invensense 代码 API，发现对于 Galaxy Nexus（使用 Yamaha GMR 磁力计），invensense 应用了“自适应滤波器”、阈值滤波器（死区），然后执行实时磁力计校准以补偿硬铁和软铁偏差。我想绕过该校准算法并用我自己的算法替换它。

有没有办法在串行通信代码之后但在校准之前截取磁力计数据？您可以通过 Android NDK 访问 invensense 库吗？

目前正在开发： - Galaxy Nexus - Android 4.0 ICS - Eclipse IDE，windows 环境

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T18:39:39.753

您可以更改内核驱动程序以直接打印这些原始值。

# php - IMAP 这是什么类型的标头编码？

> ID：12588489
> 
> 赞同：0
> 
> 时间：2012-09-25T17:54:34.443
> 
> 标签：php, email, encoding, imap

为什么我的主题看起来像这样？

```
From: "Website Magazine"
 <news@websitemagazine.com>
To: xxxxxxxxx@aol.com
Date: 20 Sep 2012 15:36:20 -0400
Subject: =?utf-8?B?MTQgTmV3LWlzaCBBUEnigJlzIGZvciBEZXZlbG9wZXIgSW5z?=
 =?utf-8?B?cGlyYXRpb24=?= 
```

在 gmail 中，它读作`14 New-ish API’s for Developer Inspiration`

我正在使用 PHP，但只是告诉我**什么类型的编码**应该足以让我解析它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T17:56:03.083

那就是[base64编码](http://php.net/manual/en/function.base64-decode.php)。

```
 print base64_decode('MTQgTmV3LWlzaCBBUEnigJlzIGZvciBEZXZlbG9wZXIgSW5z'); 
```

你看，问题是电子邮件中只允许使用 ASCII 字符，所以如果你有非英语/拉丁文本，你需要对它进行 base64 编码，以便你可以[发送它](http://php.net/manual/en/function.mail.php#108669)。

```
function mail_utf8($to, $from_user, $from_email, $subject = '(No subject)', $message = '')
{ 
    $from_user = "=?UTF-8?B?".base64_encode($from_user)."?=";
    $subject = "=?UTF-8?B?".base64_encode($subject)."?=";

    $headers = "From: $from_user <$from_email>\r\n". 
               "MIME-Version: 1.0" . "\r\n" . 
               "Content-type: text/html; charset=UTF-8" . "\r\n"; 

    return mail($to, $subject, $message, $headers); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T17:55:57.837

您正在查看的是用[base64](http://en.wikipedia.org/wiki/Base64)编码的字符串。

例如，要解码这个字符串，您可以[使用 php](http://php.net/manual/en/function.base64-decode.php)。

```
echo base64_decode('MTQgTmV3LWlzaCBBUEnigJlzIGZvciBEZXZlbG9wZXIgSW5z'); 
```

# python - 比较 Python 嵌套列表并计算重复项

> ID：12588495
> 
> 赞同：0
> 
> 时间：2012-09-25T17:55:06.847
> 
> 标签：python, list, count, nested, duplicates

我有两个带有字符串（`list_a`和`list_b`）的嵌套列表，详细信息如下：

```
list_a = [
('shop1', 'stand1', 'shelf1', 'fruit1'),
('shop1', 'stand1', 'shelf2', 'fruit2'),
('shop1', 'stand1', 'shelf3', 'fruit3'),
('shop1', 'stand2', 'shelf1', 'fruit1'),
('shop1', 'stand2', 'shelf2', 'fruit2'),
('shop1', 'stand2', 'shelf3', 'fruit3'),
('shop2', 'stand3', 'shelf1', 'fruit1'),
('shop2', 'stand3', 'shelf2', 'fruit2'),
('shop2', 'stand3', 'shelf3', 'fruit3')
]
list_b = [
('shop1', 'stand1', 'shelf1', 'fruit1'),
('shop1', 'stand1', 'shelf2', 'fruit2'),
('shop1', 'stand1', 'shelf2', 'fruit2'),
('shop1', 'stand1', 'shelf3', 'fruit3'),
('shop1', 'stand1', 'shelf3', 'fruit3'),
('shop1', 'stand1', 'shelf3', 'fruit3'),
('shop1', 'stand2', 'shelf1', 'fruit1'),
('shop1', 'stand2', 'shelf1', 'fruit1'),
('shop1', 'stand2', 'shelf1', 'fruit1'),
('shop1', 'stand2', 'shelf2', 'fruit2'),
('shop1', 'stand2', 'shelf2', 'fruit2'),
('shop1', 'stand2', 'shelf2', 'fruit2'),
('shop1', 'stand2', 'shelf3', 'fruit3'),
('shop2', 'stand3', 'shelf1', 'fruit1'),
('shop2', 'stand3', 'shelf1', 'fruit1'),
('shop2', 'stand3', 'shelf2', 'fruit2'),
('shop2', 'stand3', 'shelf3', 'fruit3'),
('shop2', 'stand3', 'shelf3', 'fruit3'),
('shop2', 'stand3', 'shelf3', 'fruit3')
] 
```

我想从`list_b`in 中找到相同的行`list_a`，计算“重复”行并将 list_a 与一个附加列（出现次数）合并为一个新列表，如下所示：

```
result_list = [
('shop1', 'stand1', 'shelf1', 'fruit1', 1),
('shop1', 'stand1', 'shelf2', 'fruit2', 2),
('shop1', 'stand1', 'shelf3', 'fruit3', 3),
('shop1', 'stand2', 'shelf1', 'fruit1', 3),
('shop1', 'stand2', 'shelf2', 'fruit2', 3),
('shop1', 'stand2', 'shelf3', 'fruit3', 1),
('shop2', 'stand3', 'shelf1', 'fruit1', 2),
('shop2', 'stand3', 'shelf2', 'fruit2', 1),
('shop2', 'stand3', 'shelf3', 'fruit3', 3)
] 
```

有没有快速有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T18:03:26.387

```
dict_a = {row: 0 for row in list_a}
for row in list_b:
    if row in dict_a:
        dict_a[row] += 1

result = [row + (dict_a[row],) for row in list_a] 
```

在 Python 2.6 上使用`dict((row, 0) for row in list_a)`而不是字典理解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T18:02:30.507

使用`Counter()`：

```
 >>> from collections import Counter
    >>> count=Counter(list_b)
    >>> [list(x)+[count[x]] for x in list_a]

    [['shop1', 'stand1', 'shelf1', 'fruit1', 1], 
    ['shop1', 'stand1', 'shelf2', 'fruit2', 2],
    ['shop1', 'stand1', 'shelf3', 'fruit3', 3],
    ['shop1', 'stand2', 'shelf1', 'fruit1', 3],
    ['shop1', 'stand2', 'shelf2', 'fruit2', 3],
    ['shop1', 'stand2', 'shelf3', 'fruit3', 1],
    ['shop2', 'stand3', 'shelf1', 'fruit1', 2], 
    ['shop2', 'stand3', 'shelf2', 'fruit2', 1], 
    ['shop2', 'stand3', 'shelf3', 'fruit3', 3]]` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T17:59:48.440

这些不是嵌套列表而是元组。这实际上是你的储蓄。请参阅 [计算 Python 列表中值频率的最有效方法？](https://stackoverflow.com/questions/3172173/most-efficient-way-to-calculate-frequency-of-values-in-a-python-list) 这应该几乎可以立即工作。要获得重复项，请取出`keys()`两个字典，并计算它们的差异。

# performance - Windows 7 上的慢速 VB6 字符串操作

> ID：12588496
> 
> 赞同：2
> 
> 时间：2012-09-25T17:55:10.337
> 
> 标签：performance, windows-7, vb6

我们有一个 VB6 程序，它在循环中执行一些字符串处理（大约 500 次）并将信息附加到文本框。循环上的每次迭代都包括 Trim、Len、Left、Mid 等基本操作，最后将字符串附加到文本框（此时整个表单仍然不可见）。最后，在循环之后，代码在窗体上调用 Show。

在 Windows XP 上，这 500 个循环大约需要 4 秒。在 Windows 7 上，完全相同的代码在大约 90 秒内运行。

对于如何解决这个问题，有任何的建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T20:30:05.510

我猜你会在每次循环迭代时附加文本框......如果可以的话，将所有内容存储在一个变量中，并`TextBox`在循环完成后将其附加到一次。在 VB6 中，在文本框中显示文本需要很长时间。

编辑：经过进一步调查和测试，我得出一个结论，当控件的长度达到最大值时，直接将字符串分配给 a 的`Text`属性的性能会急剧下降。由于某种原因，我的 PC 上的`TextBox`最大值是 65535，尽管根据[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.maxlength%28v=vs.80%29.aspx)

> **Windows NT 4.0、Windows 2000、Windows 2000 Professional、Windows 2000 Server、Windows 2000 Advanced Server、Windows XP Home Edition、Windows XP Professional x64 Edition、Windows Server 2003 Platform 注意：**对于单行文本框控件，如果设置了**MaxLength**属性为 0，用户可以输入的最大字符数为 2147483646 或基于可用内存的数量，以较小者为准

基本上似乎正在发生的事情，如果您继续向`TextBox`每次迭代添加文本，那么在达到最大值之前它不会那么慢。更令人费解的是，当你尝试添加超过最大值的文本时，不会出现错误，但性能会显着下降。

在我的测试循环中，我从 0 到 12773 我有这个：

`Text2.Text = Text2.Text + CStr(a) + " "`

所以当循环在 4 秒内完成时，`Text2.Text`是 65534 个字符长。现在，当我将循环加倍以超出 的最大允许长度`TextBox`时，完成它需要三倍的时间。

12773 - 4 秒

12773*2 - 16 秒

意识到这一点后，我的第一个想法是`TextBox`用`RichTextBox`. 但后者的表现更差。这是假设您每次迭代都更新它。

您似乎陷入了两难境地 - 性能下降或更改代码以仅在循环完成后更新文本框一次。此外，由于`TextBox`的最大长度限制，我建议切换到 a`RichTextBox`或取决于此目的 - 其他一些对象。

我希望我的发现是有帮助的——找出所有这些小的编程怪癖当然很有趣。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T18:09:45.740

尝试[LockWindowUpdate](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145034%28v=vs.85%29.aspx)关闭表单的更新。

```
 Declare Function LockWindowUpdate Lib "user32" (ByVal hWnd As Long) As Long 

'To turn it on just call it like this, passing it the hWnd of the window to lock. 
LockWindowUpdate Form1.hWnd

'intensive updating here

 'to turn it off just call it and pass it a zero.
 LockWindowUpdate 0 
```

从[这里](http://www.ex-designz.net/apidetail.asp?api_id=203)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T09:10:18.430

我会建议你找出到底什么是慢的。在字符串连接之前和之后重做你的计时，然后在将字符串复制到文本框之前和之后。Ole 自动化字符串操作是否变得更慢，或者将文本复制到 VB 文本框变得更慢？

一旦你知道了这一点，我们就可以继续第二阶段...... :-)

# ssl - WSSE 身份验证悖论

> ID：12588498
> 
> 赞同：2
> 
> 时间：2012-09-25T17:55:20.013
> 
> 标签：ssl, https, cryptography, wsse

我目前正在对 WSSE 协议进行一些研究以保护我的 api。

我已经了解了基础，并且在我的脑海中很清楚。

但是我面临一个问题。

假设我想生成一个一次性摘要，我必须连接时间戳、随机数和密码。

但是，在服务器端，我没有存储在数据库中的明文密码，所以我无法检查摘要。

切换到清除密码不是一种选择。

我不能向客户端提供用于散列密码的算法，因为他们使用盐，而盐对客户端不可用。

我能想到的唯一解决方案是不对摘要进行散列，只需将数据和base64连接起来。

这样我就可以对用户密码进行编码以检查其有效性。

由于密码以纯文本形式传输，它可能不安全，但如果我强制 HTTPS 进行身份验证怎么办？

会安全吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T21:45:36.640

> 由于密码以纯文本形式传输，它可能不安全，但如果我强制 HTTPS 进行身份验证怎么办？
> 
> 会安全吗？

是的，并且在正常范围内，这是确保其安全的唯一方法。

只需发送完整密码，但要通过*安全可靠*的TLS 连接发送。您可以使用安全密钥派生功能，例如 brypt 或 PBKDF2，并输入存储的随机盐（每个用户一个）和密码来检索“哈希”，然后可以检查存储在数据库中的哈希。

请注意，您不需要从客户端发送时间戳。当然，记录和限制身份验证尝试的次数是个好主意。您不能使用时间戳作为哈希的输入，每次时间戳更改时结果都会不同。

# iphone - Is it possible to check if a particular app is installed on a device?

> ID：12588505
> 
> 赞同：1
> 
> 时间：2012-09-25T17:55:58.857
> 
> 标签：iphone, ios

> **Possible Duplicate:**
> [How can I determine if a user has an iOS app installed?](https://stackoverflow.com/questions/7169381/how-can-i-determine-if-a-user-has-an-ios-app-installed)

Is it possible to check if, for example the Twitter or Pinterset or any app is installed on an iOS device from within your app?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T17:58:12.197

Not directly possible using the SDK. If an application you're looking for registers a URL scheme that it can open, then you can check for the presence of that app using the UIApplication -canOpenURL: method, as documented [here](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIApplication_Class/Reference/Reference.html).

# vsto - 重新打开文件后缺少 Excel 数据验证

> ID：12588512
> 
> 赞同：0
> 
> 时间：2012-09-25T17:56:36.717
> 
> 标签：vsto, excel-2010

我正在使用以下内容即时添加一些数据验证：

```
var cell = sheet.Range["A2", "A1048576"];
cell.Validation.Add(
    XlDVType.xlValidateList,
    XlDVAlertStyle.xlValidAlertStop,
    XlFormatConditionOperator.xlBetween,
    "ABC,DEF,123"); 
```

这很有效，您将在列的数据验证下拉列表中看到 ABC、DEF 和 123。问题是稍后重新打开工作表后数据验证消失了。显示错误![在此处输入图像描述](../Images/e0f6ab79fae1504a04a998a1261624f4.png) 单击是，然后您将看到：![在此处输入图像描述](../Images/3192d1c20d53c0d1acbe5cb0f4340e3c.png) 单击关闭，您的工作表显示已输入的所有数据，但数据验证完全消失。

如何添加验证以使其持续存在并在保存和重新打开后继续存在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-02-27T15:39:16.130

如果字符串超过 255 个字符（在上面的示例中为“ABC,DEF,123”），就会发生这种情况。更好的解决方案（如果适用）是使用引用而不是字符串集合来创建列表。

# asp.net-mvc-4 - VS2012运行代码分析出错

> ID：12588514
> 
> 赞同：7
> 
> 时间：2012-09-25T17:56:39.017
> 
> 标签：asp.net-mvc-4, visual-studio-2012, oauth, code-analysis

当我尝试编译我的 MVC4 Web 项目时收到以下两个错误：

> CA0058 错误运行代码分析 CA0058：找不到引用的程序集“DotNetOpenAuth.AspNet，Version=4.0.0.0，Culture=neutral，PublicKeyToken=2780ccd10d57b246”。此程序集是分析所必需的，并由以下位置引用：C:\Users\bflynn\Visual Studio Sites\mnp\bin\mnp.dll、C:\Program Files (x86)\Microsoft ASP.NET\ASP.NET Web Pages\ v2.0\Assemblies\Microsoft.Web.WebPages.OAuth.dll。[错误和警告]（全球）

和

> CA0001 错误运行代码分析 CA0001：读取模块“Microsoft.Web.WebPages.OAuth”时遇到以下错误：无法解析程序集引用：DotNetOpenAuth.AspNet，版本=4.0.0.0，文化=中性，PublicKeyToken=2780ccd10d57b246。[错误和警告]（全球）

我最近将`DotNetOpenAuth.AspNet`包添加到应用程序中，它似乎与此相关。我已经清理、重建、打开/关闭程序、卸载/重新安装包，但错误仍然存​​在。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T10:39:15.450

我也遇到了这个。

不要将 DOA 升级到 4.1

看起来 aspnet dll 引用了一个特定的版本。尽管它的 .nuspec 文件说 4.0+ 还可以...

解决方案：

卸载包 - 强制每个 DotNetOpenAuth 包（核心 /aspnet /oauth/openid 等）

安装包 DotNetOpenAuth.AspNet -版本 4.0.4.12182

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-09T06:45:03.680

我用它来解决这个问题：

```
1\. Uninstall-Package Microsoft.AspNet.WebPages.OAuth –RemoveDependencies
2\. Install-Package DotNetOpenAuth.AspNet -Version 4.0.4.12182
3\. Install-Package Microsoft.AspNet.WebPages.OAuth 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T02:27:42.457

前几天我遇到了同样的问题并报告了它[http://aspnetwebstack.codeplex.com/workitem/443](http://aspnetwebstack.codeplex.com/workitem/443)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-14T21:16:45.337

[Code Analysis error Could not load file or assembly 'System.Net.Http, Version=2.0.0.0 in MVC4 Web API](https://stackoverflow.com/questions/12120741/code-analysis-error-could-not-load-file-or-assembly-system-net-http-version-2/12847018#12847018)

See Yao's answer. The only solution I found that actually works for this.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-21T12:47:33.043

2012 年 9 月 21 日报告了问题。（[http://aspnetwebstack.codeplex.com/workitem/443](http://aspnetwebstack.codeplex.com/workitem/443)）

它于 2013 年 6 月 5 日关闭，消息如下：

> 下一版本的 MVC 将不再依赖 DotNetOpenAuth。使用下面推荐的解决方法。

所以我使用了解决方法[https://stackoverflow.com/a/12847018/1016682](https://stackoverflow.com/a/12847018/1016682)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-15T22:42:12.557

我遇到过同样的问题。虽然代码分析问题得到了解决，但由于以下错误，Web 应用程序无法运行。

**无法加载文件或程序集“DotNetOpenAuth.AspNet”或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）**

事实证明，web.config 没有在卸载过程中被清理。我必须从 runtime/assemblyBinding 部分下的 web.config 中删除以下dependentAssembly。

```
 <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="DotNetOpenAuth.Core" publicKeyToken="2780ccd10d57b246" />
        <bindingRedirect oldVersion="0.0.0.0-4.3.0.0" newVersion="4.3.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="DotNetOpenAuth.AspNet" publicKeyToken="2780ccd10d57b246" />
        <bindingRedirect oldVersion="0.0.0.0-4.3.0.0" newVersion="4.3.0.0" />
      </dependentAssembly>
      <dependentAssembly>
      </dependentAssembly>
    </assemblyBinding>
  </runtime> 
```

详情可在[http://www.bigcode.net/2013/07/error-running-code-analysis-in-vs2012.html阅读](http://www.bigcode.net/2013/07/error-running-code-analysis-in-vs2012.html)

# xcode - xcode 不显示我在调试区域中输入的所有数字

> ID：12588522
> 
> 赞同：1
> 
> 时间：2012-09-25T17:57:16.063
> 
> 标签：xcode, terminal

当我在调试区域中键入时，我的 Xcode（4.5 版）只显示第一个数字（或字符） - 如下所示：

* * *

```
2012-09-26 02:45:31.560 nn[731:303] Which numbers do you want to calculate Great Common Divisor? 

 1st=

4

2012-09-26 02:45:36.777 nn[731:303] 2nd=

6

2012-09-26 02:45:39.633 nn[731:303] your number is 45 and 66, and gcd is 3 
```

* * *

它有什么问题？

虽然程序运行良好，但当我更改输出选项（所有输出、目标输出）时，我可以看到我的号码。

这是代码。

* * *

```
#import <Foundation/Foundation.h>

int main (int argc, char *argv[]){
@autoreleasepool{
    int n1, n2;
    int numerator, denominator, remainder, gcd;
    numerator = 0;
    denominator = 0;
    remainder = 0;
    gcd = 0;

    NSLog(@"Which numbers do you want to calculate Great Common Divisor? \n 1st=");
    scanf("%i", &n1);
    NSLog(@"2nd=");
    scanf("%i", &n2);

    numerator = n1;
    denominator = n2;

    while (numerator % denominator != 0){
        remainder = numerator % denominator;
        numerator = denominator;
        denominator = remainder;
    }

    gcd = denominator;
    NSLog(@"your number is %i and %i, and gcd is %i", n1, n2, gcd);
}
return 0;
} 
```

* * *

注意：这个问题突然出现（我以前能看到我输入的内容）。我检查了我所有的 mac，所有的 xcode 都是这样工作的。它们都只显示数字（或字符）的第一位。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T23:42:34.287

我的 iMac 上也发生了同样的事情，而 Xcode 在我的 MacBook 上的调试模式下运行良好。我认为这是设置 Xcode 首选项的问题。不过，我不知道你是否知道，但苹果已经解决了这个问题。您可以找到更多信息：

[https://developer.apple.com/library/mac/#releasenotes/DeveloperTools/RN-Xcode/_index.html](https://developer.apple.com/library/mac/#releasenotes/DeveloperTools/RN-Xcode/_index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T06:37:17.380

酷，毫无疑问，您发现了新 Xcode 调试窗口的错误。代码很好，如果您在标准控制台中运行已编译的程序，它会按预期工作。

您应该将错误报告到[Apple Bug Reporter](https://developer.apple.com/bugreporter/)网站，如果您不这样做，我会这样做...

# android - 服务意图未启动——但没有错误或程序停止

> ID：12588529
> 
> 赞同：0
> 
> 时间：2012-09-25T17:57:44.863
> 
> 标签：android, service, android-intent

我正在编写一段代码，使用户能够摇动手机并从摇动中显示或启动活动。我试图弄清楚为什么当我摇动设备时代码没有运行。然而，当我在服务之外运行此代码时，它可以完美运行。

注意：我检查了该服务确实启动了。要启动的课程在我的清单中，我再次检查。没有错误存在，更奇怪的是，代码在启动时不会停止或失败。它只是不按我说的做。是的，所有适当的权限也都设置好了。

所以这里是代码：

```
import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorManager;
import android.os.Bundle;
import android.os.IBinder;
import android.widget.Toast;

public class GMeter extends Service implements SensorEventListener {

private float mLastX, mLastY, mLastZ;
private boolean mInitialized;
private SensorManager mSensorManager;
private Sensor mAccelerometer;
private final float NOISE = (float) 2.0;

/** Called when the activity is first created. */
public void onCreate(Bundle savedInstanceState) {
    mInitialized = false;
    mSensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);
    mAccelerometer = mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
    mSensorManager.registerListener(this, mAccelerometer , SensorManager.SENSOR_DELAY_NORMAL);
    Toast.makeText(this, "Starting Service", Toast.LENGTH_LONG).show();
}

protected void onResume() {
    mSensorManager.registerListener(this, mAccelerometer, SensorManager.SENSOR_DELAY_NORMAL);
}

protected void onPause() {
    mSensorManager.unregisterListener(this);
}

@Override
public void onAccuracyChanged(Sensor sensor, int accuracy) {
    // can be safely ignored for this demo
}

@Override
public void onSensorChanged(SensorEvent event) {
    float x = event.values[0];
    float y = event.values[1];
    float z = event.values[2];
    double a = Math.sqrt(Math.pow(x, 2) + Math.pow(y, 2));
    double currentG = (a/ SensorManager.STANDARD_GRAVITY);
    Toast.makeText(this, "Calculating G's", Toast.LENGTH_LONG).show();
    if (!mInitialized && currentG > 1.0) {
        mLastX = x;
        mLastY = y;
        mLastZ = z;
        mInitialized = true;
        //Start Second Activity
        Intent intent = new Intent(getBaseContext(), thirdClass.class);
        intent.setAction(Intent.ACTION_VIEW);
        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        intent.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
        getApplication().startActivity(intent);
    }else {
        float deltaX = Math.abs(mLastX - x);
        float deltaY = Math.abs(mLastY - y);
        float deltaZ = Math.abs(mLastZ - z);
        if (deltaX < NOISE) deltaX = (float)0.0;
        if (deltaY < NOISE) deltaY = (float)0.0;
        if (deltaZ < NOISE) deltaZ = (float)0.0;
        mLastX = x;
        mLastY = y;
        mLastZ = z;
    }
}

@Override
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub
    return null;
}
} 
```

这没有给我任何错误，因此没有要显示的 logcat。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:03:06.973

~~添加以下行，以使服务继续运行。~~

 ~~```
@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    return START_STICKY;
} 
```~~ 

~~服务也~~没有`OnResume`和`OnPause`功能，因此除非您自己调用它们，否则它们在您的情况下是无用的。但是 Service 确实有一个 onDestroy 函数，你可以覆盖它来取消注册你的监听器

**编辑**：您使用`onCreate(Bundle savedInstanceState)`的不是服务调用的 oncreate 签名。利用

```
public void onCreate() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T18:57:32.917

服务和活动使用相同的上下文..您必须获得正确的上下文才能启动活动

比如在服务的 onCreate 方法中获取应用程序上下文

```
public class abc extends Service {
Context mContext;
@Override
public void onCreate()
{
    mContext=getApplicationContext();
    super.onCreate();
}

@Override
public int onStartCommand(Intent intent, int flags, int startId)
{

    return super.onStartCommand(intent, flags, startId);
}

@Override
public IBinder onBind(Intent intent)
{
    // TODO Auto-generated method stub
    return null;
} 
```

}

并使用这个“mContext”来启动活动

# ios - iOS PhoneGap 应用升级到 Cordova 2.1 - 内容完全忽略状态栏

> ID：12588532
> 
> 赞同：5
> 
> 时间：2012-09-25T17:58:05.737
> 
> 标签：ios, cordova

我刚刚将 iOS PhoneGap 应用程序升级到 Cordova 2.1。该应用程序构建良好，但在模拟器上运行时，应用程序的内容似乎完全忽略了状态栏存在的事实。20px 的内容现在隐藏在状态栏下方，我似乎无法添加填充以将其向下移动。

我该如何解决？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-25T20:55:49.727

如果您将应用程序升级为使用其他版本的 PhoneGap 2.1，您的 MainViewController.m 文件可能不是最新的。

您需要在其中包含以下代码：

```
#pragma mark - View lifecycle

- (void)viewWillAppear:(BOOL)animated
{
    // Set the main view to utilize the entire application frame space of the device.
    // Change this to suit your view's UI footprint needs in your application.
    self.view.frame = [[UIScreen mainScreen] applicationFrame];

    [super viewWillAppear:animated];
} 
```

有了这个功能，你的App就恢复正常了！

（在[这里](https://groups.google.com/forum/?fromgroups=#!topic/phonegap/PpGEFmZ96MI)找到的解决方案）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T18:14:02.683

我假设您希望状态栏出现。

检查以确保代码没有这一行：

```
[[UIApplication sharedApplication] setStatusBarHidden:YES animated:NO] 
```

此外，您可能已将其设置为在界面生成器中隐藏。

另一个地方在您的应用程序的 info.plist 中，检查这一行

```
<key>UIStatusBarHidden</key> 
```

# sql-server-2008-r2 - 在 SS Management Studio 的对象资源管理器中看不到数据库作为 Server\Administrator

> ID：12588535
> 
> 赞同：0
> 
> 时间：2012-09-25T17:58:14.420
> 
> 标签：sql-server-2008-r2

在 SS Management Studio (2008-R) 的对象资源管理器中无法以 Server\Administrator 的身份看到数据库。我应该附加数据库，我知道数据文件和日志文件的路径在哪里。我需要查看这个数据库的数据库模式。

# java - 如何更改 Eclipse 项目的 JDK 版本

> ID：12588537
> 
> 赞同：79
> 
> 时间：2012-09-25T17:58:19.090
> 
> 标签：java, eclipse, jar

我需要编写一个仅与 Java 1.5 兼容的项目。我安装了 Java 1.6。是否有某种形式的向后兼容性可以让 Eclipse 与 1.5 一起编译？

我必须安装 Java 1.5 才能在此处显示吗？或者也许还有另一种方式？

![在此处输入图像描述](../Images/6ffd234eb612a63c6f5e6dd043ee9dd0.png).

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-09-25T17:59:08.290

单击**添加库**按钮。它使您的[屏幕](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.jdt.doc.user/tasks/task-add_new_jre.htm)指向 Java 位置。

选择“**目录**”，在 JRE 主页旁边的右侧按钮并指向已安装的文件夹位置。

即使您只想要 1.5 编译器项目，您也可以通过更改 Eclipse 中的编译器设置来实现它，而不是删除 1.6 JRE 并添加 1.5 JRE。

```
GOTO -->JAVA--Compiler---> and change compiler level to `1.5` instead of `1.6` 
```

正如 davidfmatheson 建议的那样，

请小心，特别是如果您要为一组人工作进行设置。如果有人使用 1.6 中新的或更改的任何内容，它将编译，但不会在 JRE 1.5 的环境中运行。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-09-25T18:05:19.150

单击 Eclipse 中的*Window*选项卡，转到*Preferences*，当该窗口出现时，转到*Java* → *Installed JREs* → *Execution Environment*并选择 JavaSE-1.5。然后您必须转到*Compiler*并设置*Compiler 合规级别*。

![更改 JRE](../Images/f796b80530b8d6535001e977be4bbf6c.png)

![在此处输入图像描述](../Images/21d6eededfc0bccae6a40146252cad6f.png)

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2015-09-04T15:20:24.587

右键单击项目->属性-> **Java构建路径**->选择**JRE系统库**单击**编辑**并选择**JDK**或**JRE**，然后单击**Java编译器**并选择 **编译器合规级别**为**1.8**

[![在此处输入图像描述](../Images/91b16c9e92ec1ff2bc2a9e1936b870b7.png)](https://i.stack.imgur.com/iLFKj.png)

[![在此处输入图像描述](../Images/22fbbf21767dd8f5df832385e08f0622.png)](https://i.stack.imgur.com/0vxGl.png)

[![在此处输入图像描述](../Images/93daa72ce813cca891418e336d5be8b9.png)](https://i.stack.imgur.com/laNHh.png)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2018-10-05T15:19:58.453

如果您使用的是 maven 构建工具，则将以下属性添加到其中并进行 maven 更新将解决问题

```
<properties>
    <maven.compiler.source>1.8</maven.compiler.source>
    <maven.compiler.target>1.8</maven.compiler.target>
</properties> 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-09-25T18:03:13.037

在 Java -> Installed JREs 下的首选项部分中，单击 Add 按钮并导航到 1.5 JDK 主文件夹。然后检查列表中的那个，它将成为所有项目的默认值：

![在此处输入图像描述](../Images/0b8f3f1c2dc4c13c117369c7fdba8f12.png)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-09-25T18:02:25.357

请参阅*[在 Eclipse 中设置 JDK](https://techiedan.com/set-up-jdk-in-eclipse/)*页面。通过添加按钮，您可以添加不同版本的 JDK...

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-12-12T12:39:52.863

用于启动 Eclipse 的 JDK (JAVA_HOME) 不一定是用于编译项目的 JDK。

要查看可以为项目选择的 JRE *，*请检查首选项：

*常规*→ *Java 安装的 JRE*

默认情况下，如果您没有添加任何 JRE，则唯一声明的将是用于启动 Eclipse 的那个（可以在[**eclipse.ini**](https://stackoverflow.com/questions/142357/what-are-the-best-jvm-settings-for-eclipse/1409590#1409590)中定义）。

您可以添加所需的任何其他 JRE，包括与您的项目兼容的 JRE。

之后，您将需要检查您的项目属性（或一般首选项）使用什么 JRE，符合什么级别：

[![替代文字](../Images/c3286bf598310466d560f11702daa72b.png)](https://i.stack.imgur.com/Dw5op.png)
[（来源：[standartux.fr](http://www.standartux.fr/public/Java/Preferences.png)）]

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-08-25T23:02:34.400

Eclipse - 特定项目更改 JDK 版本 -

如果要更改特定项目的任何 jdk 版本，则必须单击 ---> Project --> JRE System Library --> Properties ---> Inside Classpath Container (JRE System Library) 将执行环境更改为您想要的任何版本，例如 1.7 或 1.8。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-12-17T13:06:20.930

正如我几分钟前遇到的这个问题一样，如果您尝试在具有较新 JDK 的环境中打开现有项目，请确保在 Project Properties -> Project Facets -> Java 中更新 JDK 版本。

# jquery - 使用 jQuery 操作 HTML

> ID：12588538
> 
> 赞同：-1
> 
> 时间：2012-09-25T17:58:32.297
> 
> 标签：jquery

我正在尝试创建一个 javascript 函数，该函数接收假定为 HTML 的字符串并删除所有不可见的元素。我这里不是在页面上操作，只是来自任何地方的一串HTML。

起初，使用 :hidden 选择器似乎是理想的，但我无法让它工作。所以我开始玩filter()，但没有成功。

```
函数 StripInvisibleNodes(html) {
    var 容器 = "" + html+ "";
    //var $onlyvisiblehtml = $(container).find(":hidden").remove(); //没有工作
    var $onlyvisiblehtml = $(container).find('*').filter(function() { return this.style.display == "none"; }).remove();
    var 已移除 = $onlyvisiblehtml.html();
    退货已移除；
}

```

更新：以下是工作解决方案

```
函数 StripInvisibleNodes(html) {
    $('body').append("<div id='tempspace' style='visibility:hidden'>" + content + "</div>");
    var $toremove = $('#tempspace').find("*").filter(':hidden');
    $toremove.remove();
    var resultstring = $('#tempspace').html();
    $('#tempspace').remove();
    返回结果字符串；
}

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T18:10:37.637

`:visible`如果没有在 DOM 中呈现，jQuery 不会考虑 HTML 。例如：

```
$test = $('<p>').filter(':visible'); 
```

将产生一个空的 jQuery 对象。

你可以做的是在 DOM 中简单地渲染它们，计算哪些元素是可见的，然后立即删除它们。您可以将它们放在一个元素中，`visibility: hidden`或者`opacity: 0`如果您不想冒险让它闪烁到视图中：

```
$('#testspace').append('<p>');
$test2 = $('#testspace').children().filter(':visible');
console.log($test2);
$('#testspace').remove(); 
```

HTML：

```
<div id="testspace" style="visibility:hidden"></div> 
```

[http://jsfiddle.net/4NxBd/2/](http://jsfiddle.net/4NxBd/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T18:01:52.773

只选择可见元素怎么样？

```
$(":visible", container).html(); 
```

# ruby-on-rails-3 - 'heroku restart' 是否会自动调用 rails 应用程序中的初始化程序？

> ID：12588540
> 
> 赞同：0
> 
> 时间：2012-09-25T17:58:56.877
> 
> 标签：ruby-on-rails-3, heroku, initializer

我最近在我的 rails 应用程序的初始化文件中添加了一些代码。像任何其他 Rails 应用程序一样，我必须重新启动应用程序才能再次调用初始化程序。'heroku restart' 是否做同样的事情（在提交文件等之后）？如果没有，在heroku中运行初始化文件的正确方法是什么？谢谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:48:35.000

在推送您的应用程序时，会编译并启动一个新的 slug，因此每次推送新版本时，您的 rails 应用程序基本上都会重新启动。`heroku restart`将让您无需推送即可重新启动进程，例如在使用`heroku run rake db:migrate`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T18:40:19.563

初始化程序在应用程序启动时运行。重新启动应用程序会停止它，然后启动它.. 所以是的。:)

# javascript - 在用户输入时将项目添加到可编辑的菜单列表

> ID：12588541
> 
> 赞同：0
> 
> 时间：2012-09-25T17:58:59.433
> 
> 标签：javascript, firefox-addon, xul, xulrunner

我正在动态创建一个菜单列表弹出列表。我将可编辑和打开属性设置为 true。我想做的是能够在用户键入一个尚不存在的项目时添加一个新的菜单列表项目。这可能吗？如果是这样，怎么做？

我正在创建这样的列表：

```
var ml = document.createElement("menulist");
ml.setAttribute("editable","true");
ml.setAttribute("open","true");
ml.setAttribute("oncommand","alert(this.value)");
var mp = document.createElement("menupopup");
var mi = document.createElement("menuitem");
mi.setAttribute("label","item1");
mi.setAttribute("value","1");
mp.appendChild(mi);
//add as many items as i feel
ml.appendChild(mp); 
```

更改值时，更改项目时会触发警报功能，但是当我输入任何内容时，不会触发警报功能。基本上，我想最终将值传递给我从这里调用的函数，以将项目添加到列表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T19:17:00.327

首先，您应该认真考虑使用[addEventListener](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener)而不是更改属性，例如`oncommand`：

```
ml.addEventListener("command", function(event) {
 alert(this.value);
}, false); 
```

如果您想收到有关文本字段更改的通知，那么您应该在文本字段中添加一个事件侦听器：

```
ml.appendChild(mp);
ml.inputField.addEventListener("input", function(event)
{
  alert("Text field value changed");
}, false); 
```

请注意，这必须*在*将元素添加到文档之后完成，然后`inputField`才能定义属性（相应的 XBL 绑定尚未应用）。

供参考：[menulist.inputField](https://developer.mozilla.org/en-US/docs/XUL/menulist#p-menulist.inputField)，[`input`事件](https://developer.mozilla.org/en-US/docs/DOM/DOM_event_reference/input)

# sql - 如何解决违反 PRIMARY KEY 约束的问题？

> ID：12588542
> 
> 赞同：-1
> 
> 时间：2012-09-25T17:58:59.973
> 
> 标签：sql, sql-server-2008, join

我有几个表，我写了一个 sql 来连接这些表并将结果插入到最终表中。最终表是 tb(account, date)，account 是主键。问题来自查询结果，如下所示：

```
account     date
0001        09/01/2012
0001        09/02/2012
0002        09/01/2012
0003        09/03/2012 
```

当我在这些结果记录上方插入时，出现违反 PRIMARY KEY 约束错误。如何修复查询，我可以获得如下结果记录

```
account     date
0001        09/02/2012 (get the latest date)
0002        09/01/2012
0003        09/03/2012 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T18:01:18.660

怎么样

```
INSERT INTO SomeOtherTable (account, DATE)
SELECT account,
MAX(date)
FROM YourTable
GROUP BY account 
```

如果您要向我们展示表模式、原始查询和一些示例数据，那会更有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T18:00:38.220

您可以在查询中添加`DISTINCT`或`GROUP BY`以防止重复。如果最终表在此总体之前已经有一些数据，您可能还需要添加相关的`NOT EXISTS`. 例如：

```
INSERT dbo.FinalTable(account, [date])
  SELECT account, [date] FROM 
  (
     SELECT account, MAX([date])
       FROM --... your join here
       GROUP BY account
  ) AS src (account, [date])
  WHERE NOT EXISTS 
  (
     SELECT 1 
       FROM dbo.FinalTable 
       WHERE account = src.account
       AND [date]  = src.[date]
  ); 
```

`date`还可以考虑为您的列使用更有意义（且非保留）的词。

*编辑*对不起，错过了`(get the latest date)`一点。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-25T18:02:55.180

我认为您`ORDER BY date DESC GROUP BY account`在插入时需要这样做。但是，如果表中已经有 0001，则仅此一项将不起作用。

您需要插入不存在的记录，然后更新现有记录（如果这是您想要的）

# unit-testing - 难以模拟核心数据对象

> ID：12588544
> 
> 赞同：2
> 
> 时间：2012-09-25T17:59:03.703
> 
> 标签：unit-testing, ios5

我正在为使用核心数据的模型文件运行单元测试。测试目标构建成功，但我看到以下错误：

错误：testThatDistinguishedFolderTypeForTheAccountExists (FolderDALTests) 失败：+entityForName：无法在此模型中找到名为“文件夹”的实体。

错误：testThatFindByExchageAccountReturnsFolders (FolderDALTests) 失败：+entityForName：无法在此模型中找到名为“ExchangeAccount”的实体。

但是，我觉得问题是由于“设置”方法引起的，其中 NSManagedObjectModel 不是通过合并捆绑包中的所有模型来创建的。

```
-(void)testThatDistinguishedFolderTypeForTheAccountExists
 {
   Folder *inbox = [NSEntityDescription insertNewObjectForEntityForName:@"Folder" 
   inManagedObjectContext:self.context];
   inbox.distinguishedFolderType = @"inbox";
   ExchangeAccount *account = [NSEntityDescription insertNewObjectForEntityForName:@"ExchangeAccount" inManagedObjectContext:self.context];
   id<FolderProtocol> folder = [FolderDAL findWithAccount:account DistinguishedFolderType:@"inbox" withManagedContext:self.context];

STAssertTrue([folder.folderDistinguishedFolderType isEqualToString:@"inbox"], @"Unable to find the folder with the given distinguished type"); 
```

}

另一种方法是：

```
- (void)testThatFindByExchageAccountReturnsFolders
  {
      ExchangeAccount *account = [NSEntityDescription          insertNewObjectForEntityForName:@"ExchangeAccount" inManagedObjectContext:self.context];

     Folder *inbox = [NSEntityDescription insertNewObjectForEntityForName:@"Folder"     inManagedObjectContext:self.context];
     inbox.displayName = @"Inbox";
     inbox.exchangeAccount = account;

     Folder *calendars = [NSEntityDescription insertNewObjectForEntityForName:@"Folder" inManagedObjectContext:self.context];
     calendars.displayName = @"Calendars";
     calendars.exchangeAccount = account;

     NSArray *folders = [FolderDAL findByExchangeAccount:account withContext:self.context];

     STAssertTrue([folders count] > 0, @"No folders were returned");
  } 
```

设置方法是：

```
- (void)setUp
{
  [super setUp];

  NSManagedObjectModel *objectModel = [NSManagedObjectModel mergedModelFromBundles:[NSArray arrayWithObject:[NSBundle mainBundle]]];
  NSPersistentStoreCoordinator *storeCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:objectModel];
  STAssertTrue([storeCoordinator addPersistentStoreWithType:NSInMemoryStoreType configuration:nil URL:nil options:nil error:NULL] ? YES : NO, @"Should be able to add in-memory store");
  self.context = [[NSManagedObjectContext alloc] init];
  self.context.persistentStoreCoordinator = storeCoordinator; 
```

}

这里，“Folder”和“ExchangeAccount”是核心数据实体。而它们对应的DAL(Data Access Layer)文件也有一些业务逻辑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T06:05:20.677

我忘记将单元测试作为目标添加到架构中。

# java - 如何在 Jeditorpane 中动态生成对象

> ID：12588546
> 
> 赞同：0
> 
> 时间：2012-09-25T17:59:10.527
> 
> 标签：java, swing, jeditorpane

如何在 Jeditorpane 中动态生成对象？

例如：当我单击“提交”按钮时，它用于动态创建编辑器窗格对象，以便我可以从编辑器窗格获取值或使用对象名称将值设置到编辑器窗格。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T18:29:43.617

*   创建[JFrame 作为局部变量](http://docs.oracle.com/javase/tutorial/uiswing/components/frame.html)，将[JEditorPane](http://docs.oracle.com/javase/tutorial/uiswing/components/editorpane.html)放在[JScrollpane中](http://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html)

*   将[ActionListener](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)添加到[JButton](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html)

*   [定义 HTMLEditorKit](http://www.java2s.com/Tutorial/Java/0120__Development/UsejavaxswingtexthtmlHTMLEditorKittoparseHTML.htm)

*   在[ActionListener](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)中定义`"objects dynamically in Jeditorpane"`

# iphone - UIManagedDocument CompletionHandler & NSNotification

> ID：12588547
> 
> 赞同：2
> 
> 时间：2012-09-25T17:59:11.707
> 
> 标签：iphone, objective-c, cocoa-touch, nsnotifications, nsdocument

我正在使用 Core Data 并且想知道我是否正确地做事。我正在使用完成处理程序和下面的*块*`UIManagedDocument`从单例对象打开我的。

 *```
[[self managedDocument] openWithCompletionHandler:^(BOOL success) {
            if(success) {
                NSLog(@"DOCUMENT: Success, Opened ...");
                // TODO: Things to do when open.
                // ...
                // ...
            }
}]; 
```

在我`UIViewController`的身上，我设置了一个观察者来观察，`UIDocumentStateChangedNotification`以表明我可以开始使用该文档。

```
- (void)awakeFromNib {
    NSLog(@"%s", __PRETTY_FUNCTION__);
    NSNotificationCenter *notificationCenter = [NSNotificationCenter defaultCenter];
    [notificationCenter addObserver:self selector:@selector(documentIsReady) name:UIDocumentStateChangedNotification object:nil];
} 
```

这个接缝工作得很好，但我意识到我没有使用回调*块*。一种解决方案可能是创建我自己的通知并从*块*中发布它，它本质上做同样的事情，但只是使代码更容易阅读。任何意见将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T18:35:46.033

我想说的是，如果您只需要通知一个控制器，一次且仅在打开文档时（您有一个使用在控制器之间传递的单个 UIManagedDocument 的应用程序，例如 CS193P 演示），最好只留下完成块内的代码。

但是，如果您的应用程序要多次打开和关闭文档，并且多个控制器必须知道该更改，您应该使用通知。*

# php - 刷新时jQuery加载错误？

> ID：12588550
> 
> 赞同：0
> 
> 时间：2012-09-25T17:59:35.637
> 
> 标签：php, jquery, css, ajax

这是我的代码：

```
$('li a').click(function() {
    var link1=$(this).attr('href');
    $('section:#main').load(link1);
    if (link1!=window.location) {
        window.history.pushState({path:link1},'',link1);
    }
}); 
```

浏览器上的 url 正在改变，但是如果用户在浏览器上单击刷新，它将只给出 url 页面，而不是完整的页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:12:44.343

我为此使用了一个非常简单的 jquery 插件。

[http://benalman.com/projects/jquery-hashchange-plugin/](http://benalman.com/projects/jquery-hashchange-plugin/)

工作正常并记住哈希标签加载的页面，例如：www.site.com/#yourajaxpagetag

# java - 我什么时候应该在java中使用异常

> ID：12588552
> 
> 赞同：0
> 
> 时间：2012-09-25T17:59:52.687
> 
> 标签：java, exception, exception-handling

我试图理解为什么要使用异常。假设如果我有一个程序，

（不使用 try/catch）

```
public class ExceptionExample {

private static String str;

public static void main(String[] args) {
    System.out.println(str.length());
} 
```

我有异常

```
Exception in thread "main" java.lang.NullPointerException
at com.Hello.ExceptionExample.ExceptionExample.main(ExceptionExample.java:22) 
```

现在使用 try/catch，

```
public class ExceptionExample {

private static String str;

public static void main(String[] args) {
    try {
        System.out.println(str.length());
    } catch(NullPointerException npe) {
        npe.printStackTrace();
    }
} 
```

}

我有异常，

```
java.lang.NullPointerException
at com.Hello.ExceptionExample.ExceptionExample.main(ExceptionExample.java:9) 
```

现在我的问题是，

在这两种情况下，我都打印了相同的消息。那么使用try/catch有什么用呢？和

捕获异常后我们可以做什么，在这种情况下，我已经打印了堆栈跟踪。catch 是否仅用于打印跟踪或使用 getMessage() 或 getClass() 查找异常详细信息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T18:06:46.857

其实差别还是蛮大的。

取第一个并在打印后添加一行：

```
public class ExceptionExample {

    private static String str;

    public static void main(String[] args) {
        System.out.println(str.length());
        System.out.println("Does this execute?");
    }
} 
```

您会看到它`Does this execute?`没有被打印出来，因为异常会中断代码流并在没有被捕获时停止它。

另一方面：

```
public class ExceptionExample {

    private static String str;

    public static void main(String[] args) {
        try {
            System.out.println(str.length());
        } catch(NullPointerException npe) {
            npe.printStackTrace();
        }
        System.out.println("Does this execute?");
    }
} 
```

将打印堆栈跟踪*和* `Does this execute?`. 那是因为捕获异常就像是说，“我们将在这里处理并继续执行。”

另一种说法，`catch`块是错误恢复应该发生的地方，所以如果发生错误但我们可以从中恢复，我们将恢复代码放在那里。

**编辑：**

这是一些错误恢复的示例。假设我们有一个不存在的文件`C:\nonexistentfile.txt`。我们想尝试打开它，如果找不到，向用户显示一条消息，说它丢失了。这可以通过在`FileNotFoundException`此处捕获生成的内容来完成：

```
// Here, we declare "throws IOException" to say someone else needs to handle it
// In this particular case, IOException will only be thrown if an error occurs while reading the file
public static void printFileToConsole() throws IOException {
    File nonExistent = new File("C:/nonexistentfile.txt");
    Scanner scanner = null;
    try {
        Scanner scanner = new Scanner(nonExistent);
        while (scanner.hasNextLine()) {
            System.out.println(scanner.nextLine());
        }
    } catch (FileNotFoundException ex) {
        // The file wasn't found, show the user a message
        // Note use of "err" instead of "out", this is the error output
        System.err.println("File not found: " + nonExistent);
        // Here, we could recover by creating the file, for example
    } finally {
        if (scanner != null) {
            scanner.close();
        }
    }
} 
```

所以这里有几点需要注意：

1.  我们捕获`FileNotFoundException`并使用自定义错误消息，而不是打印堆栈跟踪。与打印堆栈跟踪相比，我们的错误消息更清晰、更人性化。在 GUI 应用程序中，用户甚至可能看不到控制台，因此这可能是向用户显示错误对话框的代码。仅仅因为该文件不存在并不意味着我们必须停止执行我们的代码。
2.  我们`throws IOException`在方法签名中声明，而不是在`FileNotFoundException`. 在这种特殊情况下，`IOException`如果我们无法读取文件，即使它存在，也会在此处抛出。对于这种方法，我们说处理我们在读取文件时遇到的错误不是我们的责任。这是一个如何声明不可恢复错误的示例（这里的不可恢复，我的意思是不可恢复，它可能在更远的地方可以恢复，例如在调用的方法中`printFileToConsole`）。
3.  我不小心在`finally`这里介绍了该块，所以我将解释它的作用。它保证如果`Scanner`在我们读取文件时打开并发生错误，`Scanner`则将关闭。这很重要，原因有很多，最值得注意的是，如果您不关闭它，Java 仍然会锁定该文件，因此您无法在不退出应用程序的情况下再次打开该文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T18:05:18.240

有两种情况应该抛出异常：

*   当您检测到因不正确使用您的类（即编程错误）而导致的错误时，抛出一个*未经检查*的异常实例，即`RuntimeException`
*   当您检测到不是由编程错误（无效数据、缺少网络连接等）引起的错误时，抛出一个`Exception`不属于子类的实例`RuntimeException`

您应该捕获第二种异常，而不是第一种异常。此外，如果您的程序有纠正异常情况的措施，您应该捕获异常；例如，如果您检测到连接丢失，您的程序可以让用户重新连接到网络并重试该操作。在您的代码无法充分处理异常的情况下，让它传播到可以处理它的层。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T18:05:47.737

try/catch 将防止您的应用程序崩溃或准确地说 - 如果满足意外条件，执行将不会停止。您可以将“有风险”的代码包装在 try 块中，并在 catch 块中处理该异常。通过处理，这意味着对那个条件做一些事情并继续执行。如果没有 try/catch，执行会在出错行停止，之后的任何代码都不会执行。

在您的情况下，您可以打印“这不是我所期望的，无论如何，让我们继续吧！”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T18:06:50.107

假设您已连接到数据库，但在读取记录时，它会引发一些异常。现在在这种特殊情况下，您可以在 finally 块中关闭连接。您只是在这里避免了内存泄漏。我的意思是，即使通过捕获和处理抛出异常，您也可以执行您的任务。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-25T18:07:24.013

在您给出的示例中，您是对的，没有任何好处。

您应该只在以下情况下捕获异常

*   你可以做一些事情（报告、添加信息、修复情况），或者
*   您必须这样做，因为已检查的异常会迫使您

异常的通常“处理”是将情况记录到您选择的日志文件中，添加任何相关的上下文相关信息，然后让流程继续进行。添加上下文信息极大地有助于解决问题。所以，在你的例子中，你可以做到

```
public static void main(String[] args) {
    try {
        System.out.println(str.length());
    } catch(NullPointerException npe) {
        System.err.println(
           "Tried looking up str.length from internal str variable,"
               +" but we got an exception with message: "
               + npe.getMessage());
        npe.printStackTrace(System.err);
    }
} 
```

当查看这样的消息时，有人会根据消息知道出了什么问题，甚至可能会采取什么措施来解决它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-25T18:03:31.413

如果您使用异常，请不要

```
 catch(NullPointerException npe) {
    npe.printStackTrace();
} 
```

简单地

```
 catch(NullPointerException npe) {
        //error handling code
    } 
```

您可以删除错误打印。无论如何，捕获一般异常而不仅仅是**特定异常。**

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-25T18:08:44.390

如果你看一下这两个例外，它们实际上是不同的。第一个是指第 22 行，而第二个是指第 9 行。听起来像添加 try/catch 捕获了第一个异常，但另一行代码也抛出了异常。

因此，抛出异常是因为您从未创建新字符串或为字符串设置值，除非它是在未显示的部分代码中完成的。

添加 try/catch 块对于您几乎无法控制的对象非常有帮助，因此如果这些对象不是预期的（例如 null），您可以正确处理问题。

字符串通常是您首先要实例化的东西，因此您通常不必担心使用 try/catch。

希望这可以帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-25T18:12:00.940

回答您最初的问题 Che，“何时使用例外？”

在 Java 中——我相信你已经发现了……Java 中有某些方法需要 try/catch。这些方法“抛出”异常，并且旨在。没有其他办法了。

例如，

```
FileUtils.readFileToString(new File("myfile.txt")); 
```

在添加 try/catch 之前不会让您编译。

另一方面，异常非常有用，因为您可以从中获得什么。

以 Java 反射为例...

```
try { Class.forName("MyClass").getConstructor().newInstance(); }
catch ( ClassNotFoundException x ) { // oh it doesnt exist.. do something else with it. 
```

因此，要完全回答您的问题-

谨慎使用 Try/Catch，因为在您的应用程序中预期错误通常会“皱眉”。相反，当您的方法需要它们时使用它们。

# c - Postgres C 函数 - 传递和返回数字

> ID：12588554
> 
> 赞同：4
> 
> 时间：2012-09-25T18:00:03.897
> 
> 标签：c, postgresql, pointers

我刚刚开始使用 Postgres 外部 C 函数进行测试。当我传入一个数字并返回它时，该函数工作正常。（例子）

示例函数

```
PG_FUNCTION_INFO_V1(numericTesting);
Datum
numericTesting(PG_FUNCTION_ARGS)
{
    Numeric       p = PG_GETARG_NUMERIC(0);
    PG_RETURN_NUMERIC(p);
} 
```

但是，当我尝试对传入的变量执行任何数学函数时，它不会编译。我明白了

> 错误：二进制的无效操作数 *

示例函数

```
PG_FUNCTION_INFO_V1(numericTesting);
Datum
numericTesting(PG_FUNCTION_ARGS)
{
    Numeric       p = PG_GETARG_NUMERIC(0);
    PG_RETURN_NUMERIC(p * .5);
} 
```

这是什么原因造成的？我猜数字数据类型需要一些函数来允许数学运算。我尝试使用： PG_RETURN_NUMERIC(DatumGetNumeric(p * .5)) 但结果相同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T00:59:42.080

`Numeric`不是原始类型，因此您不能直接对其进行算术运算。C 没有运算符重载，因此无法为 Numeric 添加乘法运算符。您必须使用适当的函数调用来乘以数字。

与编写 Pg 扩展函数的大多数事情一样，阅读源代码并了解它在其他地方是如何完成的会很有帮助。

在这种情况下看`src/backend/utils/adt/numeric.c`。检查`Datum numeric_mul(PG_FUNCTION_ARGS)`你会在哪里看到它`mul_var(...)`用来做这项工作。

不幸`mul_var`的是`static`，它不能在外面使用`numeric.c`。令人恼火和令人惊讶。必须有一种合理的方法来处理`NUMERIC`扩展`C`函数，而不使用 spi/fmgr 通过`SQL`操作员调用来完成工作，正如您在`DirectFunctionCall2`用于调用`numeric_mul`操作员的评论中所显示的那样。

看起来可以直接从 C 调用的 Numeric 的公共内容在其中，`src/include/utils/numeric.h`所以让我们看看那里。哎呀，不多，只是一些用于在`Numeric`and`Datum`和一些帮助器`GETARG`和宏之间转换的`RETURN`宏。看起来通过 SQL 调用使用可能是唯一的方法。

如果您发现自己`DirectFunctionCall2`无法通过 Numeric 的 SQL 接口使用，您可以使用 C 整数为另一端创建一个 Numeric 参数`int4_numeric`。

如果您找不到解决方案，请在 pgsql-general 邮件列表上发帖，您将在那里获得更多有 C 扩展和源代码经验的人。如果您这样做，请链接回此帖子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T18:14:00.747

的两个操作数都`*`必须具有算术类型（整数或浮点类型）。`Numeric`对于不是简单整数或浮点类型的东西， 这是一个不错的选择。

不幸的是，我对 Postgres API 的了解还不够，无法提供更多帮助。希望有一个宏或函数可以将 a 转换`Numeric`为算术类型，或将算术运算应用于`Numeric`类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-23T21:36:57.513

完全回避这个问题的一种方法是使用数据类型强制。用你想要强制一个值的类型声明你的 SQL 函数，例如

```
CREATE FUNCTION foo(float8) RETURNS float8 AS 'SELECT $i' LANGUAGE SQL; 
```

提供给该函数的任何值都将被强制为该值：

```
SELECT foo(12); 
```

即使明确指定类型也可以：

```
SELECT foo(12::numeric); 
```

您的 C 代码将收到一个`double`. （归功于 Tom Lane，请参阅此[邮件列表帖子](https://www.postgresql.org/message-id/21871.1519185281%40sss.pgh.pa.us)。）

# ios - 使用 Xcode 4.5 (iOS 6 SDK) 运行我的应用程序会立即使我的应用程序崩溃，除非我启用了 Guard Malloc

> ID：12588557
> 
> 赞同：1
> 
> 时间：2012-09-25T18:00:11.637
> 
> 标签：ios, xcode, ios6, xcode4.5

这个问题只是 iOS 模拟器，它不会发生在设备上。

我的应用程序甚至没有进入主要功能。它在 malloc 的某个地方崩溃：

```
* thread #1: tid = 0x1c03, 0x96fc1548 libsystem_c.dylib`malloc_zone_malloc + 72, stop reason = EXC_BAD_ACCESS (code=2, address=0xc)
frame #0: 0x96fc1548 libsystem_c.dylib`malloc_zone_malloc + 72
frame #1: 0x02f51a38 CoreFoundation`__CFAllocatorSystemAllocate + 24
frame #2: 0x02f51a13 CoreFoundation`CFAllocatorAllocate + 147
frame #3: 0x02f5922c CoreFoundation`__CFGetConverter + 508
frame #4: 0x02fa3dee CoreFoundation`CFStringEncodingGetConverter + 14
frame #5: 0x02f6f4ee CoreFoundation`CFStringGetSystemEncoding + 62
frame #6: 0x01b7b062 Foundation`_NSDefaultCStringEncoding + 19
frame #7: 0x02b547cf libobjc.A.dylib`_class_initialize + 305
frame #8: 0x02b5ba0d libobjc.A.dylib`prepareForMethodLookup + 158
frame #9: 0x02b52aeb libobjc.A.dylib`lookUpMethod + 81
frame #10: 0x02b52e22 libobjc.A.dylib`_class_lookupMethodAndLoadCache3 + 47 
```

出于某种原因，启用 Guard Malloc 使其工作得很好。

我的应用程序在以前版本的 Xcode 中运行良好。关于 iOS 6/Xcode 4.5 的某些事情导致了这种情况的出现。

# css - 检测屏幕分辨率

> ID：12588559
> 
> 赞同：1
> 
> 时间：2012-09-25T18:00:31.460
> 
> 标签：css, html, positioning

我遇到了网站[http://www.swiftkey.net](http://www.swiftkey.net)。

在我的宽屏上，我看到内容区域两侧的灰色背景。在我的常规（1024x768）上，灰色条不存在。

他们是如何实现这种效果的？

使用萤火虫，我能够破译我认为可能会这样做：

```
.w1 {
    float: left;
    width: 1600px;
    position: relative;
    left: 50%;
}
.w2 {
    float: left;
    width: 1600px;
    position: relative;
} 
```

我确实有 CSS 和 HTML 的经验，但上面的代码对我来说有点神秘，特别是考虑到 w2 在 w1 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T18:26:54.423

我在假设您正在谈论的灰色条是第二个示例图像中显示的灰色条的情况下回答这个问题：

![示例截图 1](../Images/7f39aec0b72798afb7a09ed2d3614ea8.png) ![示例截图 2](../Images/00966c5c58fff018ccdf474b18d0c9e9.png)

* * *

简单的答案是页面使用了一个横向居中的静态最大宽度的包装器：

```
#wrapper {
    max-width: 1000px;
    margin: 0 auto; //centers a block element
} 
```

`<body>`灰色条是通过在or`<html>`元素上具有背景颜色来创建的：

```
body {
    background-color: #888;
} 
```

我还没有检查源代码以查看这些样式的具体设置位置，我将把它作为练习留给读者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T18:10:39.897

这必须通过 javascript 屏幕对象来完成

```
var scr=window.screen;
var availwidth=scr.availWidth;
var width=scr.width;
var availh=scr.availHeight;
var height=scr.height; 
```

考虑到任务栏和滚动条等，availWidth 和availHeight 给出了实际可用的宽度和高度。宽度和高度给出了实际的屏幕分辨率。然后访问变量并决定布局的类型。

然而，将任何东西调整到中心很容易

```
div
{
width:1024px;
position:absolute;
left:50%;
margin-left:-512px;
} 
```

javascript 屏幕宽度跟踪用于更多控制选项

# php - cakephp $this->html->链接不改变位置

> ID：12588562
> 
> 赞同：1
> 
> 时间：2012-09-25T18:00:40.827
> 
> 标签：php, cakephp, hyperlink, routes

我正在使用 cakephp 2.2

我将路由器配置为具有漂亮的 url

html链接没有改变停留在第一个结果上

下面的代码可以工作并且可以做我想要的，但我正在尝试使用 cakes 生成链接的方式

```
<td><a href="/<?php echo $examples['somemodel']['slug'];?>"><?php echo $examples['somemodel'][slug'];?> </a></td> 
```

当我这样做时，网址名称不同但超链接不会改变

```
<?php echo 
$this->Html->link($examples['model']['somename'], '/controllername/slug/' + $examples['model']['slug']);
?> 
```

我的结果是

```
<a href =”/example1”&gt;example1 </a> 
<a href =”/example1 ”&gt;example2 </a> 
<a href =”/example1 ”&gt;example3 </a> 
<a href =”/example1”&gt;example4 </a> 
```

而不是我想要它做的

```
<a href =”/example1”&gt;example1 </a> 
<a href =”/example2”&gt;example2 </a> 
<a href =”/example3”&gt;example3 </a> 
```

如您所见，网址名称不同，但超链接没有改变

//router.php 路由器::connect(

```
"/example/:slug",
array('controller' => 'differentname', 'action' => 'view'),
       array( 

            'name'=>'[-A-Z0-9]+', 

           'pass' => array('slug')

          ) 

        );

Router::connectNamed(
array('/example/' => array('action' => 'view', 'controller' => 'different')),
array('default' => true, 'greedy' => true)
);      

//'view.ctp

  <?php
foreach ($example as $examples): ?>

 <?php echo 
 $this->Html->link($examples['model']['somename'], '/controllername/slug/' +     $examples['model']['slug']);
 ?> 
```

结果示例 1 示例 2 示例 3 示例 4

代替

```
 <a href =”/example1”&gt;example1 </a> 
 <a href =”/example2”&gt;example2 </a> 
<a href =”/example3”&gt;example3 </a> 
```

我错过了什么或没有到达这里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T21:02:43.100

也许是因为使用 '+' 作为文本追加运算符。您需要使用“。” 反而。

例子：

`$this->Html->link($examples['model']['somename'], '/controllername/slug/'.$examples['model']['slug']);`

# groovy - 脚本运行器中的 Jira Groovy 脚本

> ID：12588563
> 
> 赞同：0
> 
> 时间：2012-09-25T18:00:42.953
> 
> 标签：groovy, jira

我试图让不属于 jira-users 组的用户的电子邮件地址不等于：email@email.com。我可以获得不在 jira-users 组中的用户（见下文），但不确定如何完成 if 语句以显示“用户电子邮件地址不等于 email@email.com。我尝试了 user.getEmail 但无法获取那行得通。有人可以对此提出建议吗？

谢谢。

```
 for ( user in crowdService.search(query) ) { 
  if (!crowdService.isUserMemberOfGroup(user.getName(), "jira-users")) {
   body = body + user.getName() + "\n"
  }
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T18:25:21.107

User 对象的实现[取决于](http://www.opensymphony.com/osuser/api/com/opensymphony/user/User.html) [您的](http://docs.atlassian.com/atlassian-crowd/2.1.0/com/atlassian/crowd/embedded/api/User.html)[特定](http://docs.atlassian.com/atlassian-crowd/2.1.0/com/atlassian/crowd/integration/model/user/User.html) Atlassian 设置。

尝试调用`user.getEmailAddress()`：

```
for ( user in crowdService.search(query) ) { 
    if (!crowdService.isUserMemberOfGroup(user.getName(), "jira-users") 
            && !user.getEmailAddress().equals("email@email.com")) {
        body = body + user.getName() + "\n"
    }
} 
```

# git-svn - 如何更改现有 git-svn 存储库上的忽略路径？

> ID：12588564
> 
> 赞同：8
> 
> 时间：2012-09-25T18:00:49.263
> 
> 标签：git-svn

我有一个已经存在的 git-svn 存储库，在我的 .config 文件中有一个忽略路径，如下所示：

```
ignore-paths = ^(?!(Path1/Proj1|Path1/Proj2|Path2/Proj3)) 
```

这很好用。

有人在 svn 中添加了一个新项目，我现在在我的 git repo 中需要它。

如果我将忽略路径更改为下面的内容并发出 fetch 或 rebase，我永远不会看到 Path2/Proj4

```
 ignore-paths = ^(?!(Path1/Proj1|Path1/Proj2|Path2/Proj3|Path2/Proj4)) 
```

过去，我总是放弃并炸毁我的 git repo 并重新创建它。有没有更好的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-06-08T22:10:26.000

编辑忽略路径后，您需要

```
git svn reset -r <n> -p # where <n> is the SVN revision where the new path was added.
git svn fetch
git rebase # or reset 
```

参考[`git-svn(1)`](https://git-scm.com/docs/git-svn)：

> ***重置***
> 
> *将fetch*的效果撤消到指定的修订版。这允许您重新*获取*SVN 修订版。通常情况下，SVN 版本的内容永远不会改变， 也不需要*重置。*但是，如果 SVN 权限发生变化，或者您更改了 --ignore-paths 选项，则*获取*可能会失败，并显示“未在提交中找到”（文件以前不可见）或“校验和不匹配”（错过修改）。如果不能永远忽略问题文件（使用 --ignore-paths），修复 repo 的唯一方法是使用*reset*。
> 
> 仅更改了 rev_map 和 refs/remotes/git-svn（ 有关详细信息，请参阅下面 FILES 部分中的*$GIT_DIR/svn/*\*/.rev_map.**）。在reset之后执行*fetch*，然后*git reset**或*git *rebase*将本地分支移动到新树上。

# ruby-on-rails - Rails 中的手动请求调度

> ID：12588566
> 
> 赞同：2
> 
> 时间：2012-09-25T18:00:51.963
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rack

我需要在应用程序本身的 Rails 应用程序上创建请求。

像这样的东西（伪代码）

```
def some_method()
    clone_request = request.clone
    request.url = "some/url/"
    result_html = Rails.application.run(request)
    # ...
end 
```

导轨版本 3.2.8

这甚至可能吗？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T18:39:07.830

您可以使用`app.get("/some/url/")`来生成请求。然后，运行`app.request`以获取请求数据、`app.response`响应和`app.response.body`html。

如果您需要进行身份验证，请先运行它（修改为您登录的方式）： `app.post("/session", :email => "email@host.com", :password => "******")`

如果您需要其他实例： `app2 = ActionDispatch::Integration::Session.new(Rails.application)`

# javascript - 如何通过计时器更改jQuery中按钮上的几个css类？

> ID：12588578
> 
> 赞同：2
> 
> 时间：2012-09-25T18:01:40.790
> 
> 标签：javascript, jquery

文档准备好后，有一个按钮可以获取新的类名`frame1`。我想在两秒钟后在这个按钮上设置另一个类。

```
$(document).ready(function () { 
    setTimeout(function () {
        $('#button').addClass('frame1')
    }, 2000);
}); 
```

如果可能的话，我想在两秒钟后添加另一个类“frame2”吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T18:13:33.753

如果您只想每隔几秒钟添加一个类，直到您没有更多要添加的类，您可以使用一个间隔，然后在所有类都添加后清除它：

```
var group = [ 'whiteFG', 'redBG' ];
var intvl= setInterval(function(){
    group.length 
        ? $("#foo").addClass(group.pop()) 
        : clearInterval(intvl) ;
}, 2000); 
```

小提琴：http: [//jsfiddle.net/EvXPy/](http://jsfiddle.net/EvXPy/)

或者您可以简单地遍历您的类名数组并从那里设置超时：

```
$(['redBG','whiteFG']).each(function(i,o){
    setTimeout(function(){
        $("#foo").addClass(o);
    }, i * 2000 );
});​​​​​​​​ 
```

请注意，第一个效果将立即运行，因为`i`它等于 的索引`0`，这意味着超时会立即发生。如果您希望延迟此时间，您可以`i`在乘以 2000 之前按您认为合适的方式递增。

小提琴：http: [//jsfiddle.net/EvXPy/1/](http://jsfiddle.net/EvXPy/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T18:05:51.463

你可以这样做。

```
$(document).ready(function () { 
  setTimeout(frame1(), 2000);
});
function frame1() {
  $('#button').addClass('frame1');
  setTimeout(frame2(), 2000);
}
function frame2() {
  $('#button').addClass('frame2');
} 
```

或者你可以这样做。

```
$(document).ready(function () { 
  setTimeout(function () {
    $('#button').addClass('frame1')
  }, 2000);
  setTimeout(function () {
    $('#button').addClass('frame2')
  }, 4000);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T18:05:37.647

```
setTimeout(function () {
        $('#button').addClass('frame1');
}, 2000);
setTimeout(function () {
        $('#button').addClass('frame2');
}, 2000); 
```

## 更新：

如果要检查类是否存在，请这样做。

```
setTimeout(function () { 
    $('#button').addClass('frame1');
    if($('#button').hasClass('frame1')) { 
        setTimeout(function () {
            $('#button').removeClass('frame1').addClass('frame2'); 
        }, 2000); 
    }   
}, 2000); 
```

参考**[现场演示](http://jsfiddle.net/SivaCharan/rat8K/)**

# java - 单个线程中的单个休眠会话导致死锁

> ID：12588581
> 
> 赞同：2
> 
> 时间：2012-09-25T18:01:58.307
> 
> 标签：java, hibernate

我正在尝试为使用 hibernate 的 java 服务器中的竞争条件提供临时解决方法。代码最初如下所示：

```
s = sessionFactory.openSession();
Object o1 = dao.getMostRecentVersionOfObject(key, s);
if (o1.performSomeTimeConsumingTask() == Looks.Ok) {
    Transaction t = s.beginTransaction();
    dao.update(o1, s);
    t.commit();
} 
```

最初的问题是，如果 2 个不同的线程大致同时到达同一个代码块，它们都会尝试并获得相同版本的对象，所以第二个线程总是会失败。由于有多个负载平衡的服务器，因此该问题的真正解决方案是使用分布式锁定系统来确保版本保持同步并且事务不会相互影响。但是，由于用户已经发现这是一个问题，并且该问题的长期解决方案需要时间来开发，因此我做出了执行决定，通过检查对象是否在事务之前已更新来添加临时黑客开始。我创建了第二个会话来执行此版本检查。如果有更新，我会使用第二个会话来填充对象' s 字段然后保存它。所以新代码看起来有点像这样：

```
Session s = sessionFactory.openSession();
Session transactionSession = s;
Object o1 = dao.getMostRecentVersionOfObject(key, s);
int version = o1.getVersion();
if (o1.performSomeTimeConsumingTask() == Looks.Ok) {
    Session newerSession = sessionFactory.openSession();
    Object newerObject = dao.getMostRecentVersionOfObject(key, newerSession);
    if (newerObject.getVersion() > version) {
        // update fields...
        transactionSession = newSession;
    }
}
Transaction t = transactionSession.beginTransaction();
dao.update(o1, transactionSession);
t.commit(); 
```

此代码在多种环境中工作，但由于报告的死锁而在最重要的环境中失败。当甚至没有对该方法的第二个并发请求时，就会发生这种情况——第二个会话被创建，检查版本，然后在第一个会话执行提交事务时被忽略。我怀疑这个问题要么是环境问题（但我不明白为什么会这样），要么是休眠不喜欢使用第二个会话，但这只是一个有根据的猜测。我特别困惑为什么hibernate会将此报告为死锁，因为只有一个事务。

对此的任何想法都非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:20:23.427

> 最初的问题是，如果 2 个不同的线程大致同时到达同一个代码块，它们都会尝试并获得相同版本的对象，所以第二个线程总是会失败。

您的第二个解决方案仍然有同样的问题。你正在这样做，

1.  获取最新对象
2.  如果版本不同，则更新字段
3.  提交更新的对象

当您执行第 2 步时，其他线程将更新该对象。

如果您想防止这种情况发生，请同步方法（最不推荐）或执行以下操作，

```
Session s = sessionFactory.openSession();
Object o1 =s.get('o1s class',key,new LockOptions(LockMode.PESSIMISTIC_WRITE));
//Do whatever you want with o1
//Update o1
//commit 
```

[这个想法是通过从 db.See doc](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/Session.html#get%28java.lang.Class,%20java.io.Serializable,%20org.hibernate.LockOptions%29)获取更新锁来获取对象。您应该了解使用悲观锁定而不是乐观锁定的优缺点。

# regex - Perl新手：试图在字符串数组中查找字符串

> ID：12588601
> 
> 赞同：0
> 
> 时间：2012-09-25T18:03:12.720
> 
> 标签：regex, perl

我需要将一个字符串与一个字符串数组进行匹配。我正在搜索的字符串应该能够包含通配符。

```
#!/usr/bin/perl
#
##   disable buffered I/O which would lead
##   to deadloops for the Apache server
$| = 1; 
#
##   read URLs one per line from stdin
while (<>) {
    my $line = $_;
    my @array1 = ("abc","def","ghi");
    $found = 0;
    if (/$line/i ~~ @array1)
    {
        print "found\n";
    }
    else
    {
        print "not found\n";
    }

} 
```

我用输入测试这个脚本，`abc`它返回`not found`

```
perl ./mapscript.pl
abc
not found 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T18:06:53.543

您的输入最后有一个换行符。添加：

```
chomp $line; 
```

紧接着

```
my $line = $_; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T18:11:08.977

用于`chomp(my $input = $_)`删除换行符而不是`my $input = $_`在你的 while..

** OOPs .. 没有看到我发布重复..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T23:03:35.817

最后的换行符总是使用 <> 存在。见[chomp](http://perldoc.perl.org/functions/chomp.html)

# c# - 现在正在复制文件吗？

> ID：12588605
> 
> 赞同：0
> 
> 时间：2012-09-25T18:03:23.697
> 
> 标签：c#, .net, file-io

> **可能重复：**
> [C# - 不时检查文件是否存在并从中读取](https://stackoverflow.com/questions/12578177/c-sharp-from-time-to-time-check-if-a-file-exists-and-read-from-it)

我正在使用文件观察器来检查文件是否在目录中创建。如果是，那么我想打开它并删除到另一个目录。

我的方法也是用来`FileShare.None`确保独占访问。我所做的是：

```
class Program
    {
        private static void Main(string[] args)
        {
            FileSystemWatcher fileWatcher = new FileSystemWatcher();
            fileWatcher.NotifyFilter = NotifyFilters.LastAccess | NotifyFilters.LastWrite | NotifyFilters.FileName | NotifyFilters.DirectoryName;
            fileWatcher.Created += fileWatcher_Created;
            fileWatcher.EnableRaisingEvents = true;
            Console.ReadLine();
        }

        private static void fileWatcher_Created(object sender, FileSystemEventArgs e)
        {
            WorkOnFile(e.FullPath);   
        }

        //must be done completely. How do I ensure it?
        private static void WorkOnFile(string fileName)
        {
            using (FileStream f = File.Open(fileName, FileMode.Open, FileAccess.Read, FileShare.None))
            {
                Thread.Sleep(40000); // some long operations
            }            
        }
  } 
```

底线是，`WorkOnFile()`对于一个文件，必须完全且只执行一次。如果一个文件被复制，那么我需要`WorkOnFile()`再次调用，直到它被完全复制并且没有进程正在使用它。

我如何达到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:54:10.790

如果您需要尽快移动该文件，您可以尝试使用 FileWatcher 监控“LastWrite”，并在稍有延迟后尝试移动该文件。

我必须做一些非常相似的事情，但并不着急，重要的是文件被可靠地移动。所以我改为使用 System.Timers.Timer 每分钟运行一次：

```
var scanDirectoryIn = new DirectoryInfo(folderIn);
foreach (var fileInfo in scanDirectoryIn.GetFiles())
{
  if (fileInfo.Extension != ".csv") continue;
  if (DateTime.UtcNow.Subtract(fileInfo.LastWriteTimeUtc).TotalMinutes < 5) continue;
  try
  {
    fileInfo.MoveTo(folderOut + "\\" + fileInfo.Name);
  }
  catch (Exception) {}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T18:35:18.013

```
//must be done completely. How do I ensure it?
    private static void WorkOnFile(string fileName)
    {
        while(true){
            try{
                using (FileStream f = File.Open(fileName, FileMode.Open, FileAccess.Read, FileShare.None))
                {
                    Thread.Sleep(40000); // some long operations

                    break; //exit while() infinite loop
                }
            }
            catch(Exception e){
                //file is locked because being written. wait a few seconds then retry
                Thread.Sleep(10000);
            }     
        }       
    } 
```

# javascript - 计算一个类的 div 数

> ID：12588606
> 
> 赞同：1
> 
> 时间：2012-09-25T18:03:25.183
> 
> 标签：javascript, jquery, html

对于如何准确计算包含某个类的 div 的数量，我有点困惑。由于这里的 DOM，除非我找到一种方法来指定从哪里开始计数和在哪里停止，否则我无法使用`.parent()`or`.child()` 和`.length`and`.size()`将无法工作

例子

```
<div class="container">
      <h2 class="12345">title<h2>
      <div class="_row">...</div>
      <div class="_row">...</div>
      <div class="_row">...</div>
      <h2 class="6789">title<h2>
      <div class="_row">...</div>   //count these
      <div class="_row">...</div>   //count these
      <div class="_row">...</div>   //count these
      <div class="_row">...</div>   //count these
      <div class="_row">...</div>   //count these
      <div class="_row">...</div>   //count these
      <h2 class="01234">title<h2>
      <div class="_row">...</div>
      <div class="_row">...</div>
      <div class="_row">...</div>
      <div class="_row">...</div>
      <div class="_row">...</div>
   </div> 
```

因此，如果我的函数将 6789 传递给它，我希望在“.6789”之后包含包含类“_row”的 div 的计数，但在下一个停止计数`<h2>` 。

我有点迷路了，因为它们在 DOM 中处于同一级别，所以我不能这样做，`$('.6789' > '._row')` 或者`$('.6789').parent().find('._row);` 如果有人可以帮助获得我需要的准确计数，将不胜感激

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T18:10:10.880

使用[jQuery 的 nextUntil() 函数](http://api.jquery.com/nextUntil/)。链接页面的示例代码几乎完全符合您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T18:15:31.487

您可以从 h2 元素开始并使用[nextUntil](http://api.jquery.com/nextUntil/)选择以下所有 div，如下所示：

```
var countOfDivs = $("h2.6789").nextUntil("h2","div._row").length; 
```

nextUntil 的第二个参数确保在标记开始在 h2 元素之间包含除 div._row 之外的其他元素的情况下选择是稳定的

# php - 从数据库中获取多个级别的子项？

> ID：12588614
> 
> 赞同：2
> 
> 时间：2012-09-25T18:03:48.527
> 
> 标签：php, mysql

我的术语有些欠缺，所以我的问题的标题无疑有点蹩脚，但我将在下面解释我的意思。

我有一个类似于以下内容的 MySQL 表：

```
categories:

category_id | parent_id

     0            0
     1            0
     2            1
     3            1
     4            3 
```

现在，我要做的是像这样输出类别结构：

```
category structure:

0
1 -> 2
     3 -> 4 
```

除了需要能够显示类别结构之外，如果选择了一个类别，那么我想找到该类别和子类别中的所有文章（文章将是另一个表，其中每篇文章都有一个 parent_category_id 喜欢它它所在的类别）。

我能想到的唯一方法是：

1.  获取所有 parent_id 等于正在查看的类别的 id 的类别
2.  循环遍历所有结果并重复第一步
3.  继续这样做，直到检查完所有结果

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:46:04.330

一种有效的方法是使用嵌套集。它有点棘手，更新起来也有点复杂。

它是这样工作的：

每个节点都有 2 个 id 和一个级别。节点 id 之间的所有子节点 id。例子：

```
category_id | parent_id | low_id |  high_id 
 0            0          1          2
 1            0          3          10
 2            1          4          5
 3            1          6          9
 4            3          7          8 
```

现在你可以说“给我所有类别 1 的子节点”：

```
select *
from categories
where low_id between 3 /* (low_id node1) */ and 10 /* (high_id node 1) */ 
```

但是如果你必须插入一个节点，你需要一个算法来将其他节点移动到正确的位置。存储节点的级别也很好，因此您不必查找 id/parent_id 关系，您只需按 low_id 排序并使用级别作为指标。

如果您使用 php 作为编程语言，则有一个学说 2 插件来处理嵌套集。

编辑：我认为这是一个很好的起点： http: [//mikehillyer.com/articles/managing-hierarchical-data-in-mysql/](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)

# javascript - jquery each() 与 setInterval

> ID：12588617
> 
> 赞同：4
> 
> 时间：2012-09-25T18:03:56.650
> 
> 标签：javascript, jquery

我有一个填充了各种元素的对象，我希望使用这些元素进行迭代`each()`，然后对轮到它的元素执行操作。所以：

```
var arts = $("#press-sqs > article");
shuffle(arts);

$(arts).each(function(){
    setInterval(function() {
    // in here perform an action on the current element in 'arts'
    }, 2000);   
}); 
```

（`shuffle()`是一个基本的洗牌功能）

我想不通的是如何将当前元素作为选择器访问并对其执行操作。`$(this)`是`$(window)`。

最后，我需要该函数在迭代结束后再次开始迭代`art`并继续无限循环。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-25T18:13:52.393

如果你使用`setInterval`，你会得到相同的结果交换顺序：

```
setInterval(function() {
    $(arts).each(function(){
         doSomethingWith(this);
    });   
}, 2000); 
```

我不认为你想要你认为你在这里做的事情。我想你想要：

```
var i = 0;
setInterval(function() {
    var art = arts[i++];
    doSomethingWith(art)
    if(i >= arts.length) i = 0;
}, 2000); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T18:11:52.713

jQuery 的`.each(...)`方法将“当前”元素（及其索引）传递给回调。`this`当您不需要做任何太复杂的事情时，这只是一种方便。

```
$(arts).each(function(i, current){
    setInterval(function() {
    // in here perform an action on the current element in 'arts'
    }, 2000);   
}); 
```

上面，当前元素在 setInterval 回调中可用`current`，例如。请注意，此元素按原样以其“原始”形式传递`this`，因此如果您想在其上调用 jQuery 方法，则需要以相同的方式包装它，即：`$(current)`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T18:05:36.717

用那个。

```
$(arts).each(function(){
    var that = this;
    setInterval(function() {
    // in here perform an action on the current element in 'arts'
         doSomethingWith(that)
    }, 2000);   
}); 
```

# javascript - JavaScript; n维数组创建

> ID：12588618
> 
> 赞同：10
> 
> 时间：2012-09-25T18:04:05.650
> 
> 标签：javascript, arrays

在为简单语言构建 JavaScript 解释器的过程中，我遇到了以下问题；

解析后，我们得到一个索引数组，它指定要修改的 n 维数组中的元素。例如，解析后：

```
a[1, 1, 1] 
```

我们得到一个数组`[1, 1, 1]`。我正在使用的语言没有变量定义，因此变量在第一次使用时会被初始化。我的目标是能够创建这个 n 维数组，以便我可以将它放在变量表中（在上面的示例中，我们需要创建一个 3 维数组）。

## 简短的问题：

有没有办法在 JavaScript 中创建一个 n 维数组**而不**使用`eval()`?

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-25T18:18:37.483

在 Chrome 中测试：

```
function createNDimArray(dimensions) {
    if (dimensions.length > 0) {
        var dim = dimensions[0];
        var rest = dimensions.slice(1);
        var newArray = new Array();
        for (var i = 0; i < dim; i++) {
            newArray[i] = createNDimArray(rest);
        }
        return newArray;
     } else {
        return undefined;
     }
 } 
```

然后`createNDimArray([3, 2, 5])`返回一个 3x2x5 数组。

您可以使用类似的递归过程来访问索引在数组中的元素：

```
function getElement(array, indices) {
    if (indices.length == 0) {
        return array;
    } else {
        return getElement(array[indices[0]], indices.slice(1));
    }
 } 
```

设置元素是类似的，留给读者作为练习。 

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-25T18:15:36.610

没有内置任何东西，但是创建一个可以完成这项工作的函数非常容易：

```
var genArray = function () {
    var arr, len, i;
    if(arguments.length > 0) {
        len = [].slice.call(arguments, 0, 1)[0];
        arr = new Array(len);
        for(i = 0; i < len; i++) {
            arr[i] = genArray.apply(null, [].slice.call(arguments, 1));
        }
    } else {
        return null; //or whatever you want to initialize values to.
    }
    return arr;
};

var a = genArray(3, 2); //is [[null, null],[null, null],[null, null]]
var b = genArray(3, 1, 1); //is [[[null]],[[null]],[[null]]]

a[0][1]; //is null
b[1][0][0]; //is null
b[1][0][0] = 3;
b[1][0][0]; //is 3;
b; //is [[[null]],[[3]],[[null]]] 
```

也许这会有所帮助？

**PS——**

我知道这似乎比必要的努力更多。但不幸的是，JavaScript 数组并不是真正的“数组”（如果“数组”是指一个连续的、索引的、不可变的内存块）。它们更像是大多数语言中的“地图”。因此，创建它们需要付出一定的努力。大多数语言在创建多维数组时都没有问题，因为它们只是在做一些简单的乘法运算，然后是`malloc()`. 但是对于 JavaScript，如果你想预先构造它们，你真的必须递归地生成你的数组。这是一种痛苦，但它确实表明了口译员所需的努力。

去搞清楚。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-03T11:32:22.663

创建一个 n 维数组：

```
function createNDimArray(dimensions) {
 var ret = undefined;
 if(dimensions.length==1){
    ret = new Array(dimensions[0]);
    for (var i = 0; i < dimensions[0]; i++)
        ret[i]=null; //or another value
    return ret;     
 }
 else{
    //recursion
    var rest = dimensions.slice(1);
    ret = new Array(dimensions[0]);
    for (var i = 0; i < dimensions[0]; i++)
        ret[i]=createNDimArray(rest);       
    return ret;
 }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-24T10:55:10.030

* * *

编辑：由于任何递归解决方案都会限制您可以创建的数组的大小......我在我的 [PJs @ GitHub](https://github.com/PimpTrizkit/PJs/wiki)库中制作了另一个解决方案。这个以伪即时速度运行，可以创建和管理任何大小、任何结构、在任何分支上具有任何维度的多维数组。它还可以模拟预填充和/或使用定制设计的节点对象。在这里查看：[https://github.com/PimpTrizkit/PJs/wiki/14.-Complex-Multidimensional-Object--(pCMO.js)](https://github.com/PimpTrizkit/PJs/wiki/14.-Complex-Multidimensional-Object--(pCMO.js))

* * *

使用[jfabrizio](https://stackoverflow.com/a/16357947/693927)解决方案的修改版本：

```
function createNDimArray(dimensions) {
    var t, i = 0, s = dimensions[0], arr = new Array(s);
    if ( dimensions.length < 3 ) for ( t = dimensions[1] ; i < s ; ) arr[i++] = new Array(t);
    else for ( t = dimensions.slice(1) ; i < s ; ) arr[i++] = createNDimArray(t);
    return arr;
} 
```

用途：

```
var arr = createNDimArray([3, 2, 3]); 
//  arr = [[[,,],[,,]],[[,,],[,,]],[[,,],[,,]]]
console.log(arr[2][1]); // in FF: Array [ <3 empty slots> ]
console.log("Falsy = " + (arr[2][1][0]?true:false) ); // Falsy = false 
```

我发现这要快得多。我可能会说，这可能是在 Javascript 中生成 N 维数组的最快方法。上面的这种重构有一些很好的速度提升。但是，最好的速度提升当然来自不预填充。此版本不预填充数组。它只返回一个完全创建的 Ns 长度的 N 维数组，其中最后一级只是一个空数组。如果你真的需要这个价值，我希望这`arr[x][y][z]?arr[x][y][z]:null`已经足够了。`null`它是供我使用的。:)

如果您*需要*预填充，请使用他的原始版本。

而且，如果你真的不在乎我做了什么；然后停止阅读。

想要更多极客谈话吗？对于那些在那里学习的人来说，关于递归的一些事情。好了，攻略就到这里。在进行深度递归时，请记住最终级别。它是完成大部分工作的地方。在这种情况下，从字面上看，它是第 N 维。这是你的“有效载荷”，剩下的就是物流。在 jfab 的函数中，当`dimensions.length`到达时`1`，它的最后一维，它在第 N 维并执行有效载荷。这是创建空数组，或者在我的情况下，创建一个空数组。由于递归变得如此之深，每个维度都是最后一个维度的一个因素。当你到达第 N 维时，你将有很多函数调用，并且后勤对计算机来说变得很麻烦。在第 N 维，您将调用您的基本递归函数（`createNDimArray`在我们的例子中）有效载荷的次数比物流的次数要多。现在，就像在 jfab 的原始解决方案中一样，将有效负载的执行作为您在递归中做的第一件事（如果可能的话）通常是一件好事，特别是如果它很简单。在这里，通过将有效负载构建为最终的 2D 数组（而不是仅返回 a `new Array()`only 的 1D 数组）。那么现在不必在这个级别上发生过多的函数调用。现在，当然，如果你想预填充数组，那么这个快捷方式并不总是有帮助。但更重要的是，预填充数组将是适当的有效负载。通过*不*访问第 N 维上的每个项目，我们已经有效地删除了它。这样就少了一层函数调用，基本上第 N 维的有效负载实际上是在第 N-1 维上完成的。而且我们再也不会为了传递`new Array()`. 不幸的是，对`new Array(x)`（通常）的调用并没有这样看。它的执行时间确实会随着`x`. 这实际上仍在访问第 N 维中的每个项目，但现在我们只使用本机代码执行一次，并包裹在一个紧凑而轻巧的循环中。现在我们要求它`createNDimArray`只能在 N > 1 时调用，即从不用于创建一维数组。从理论上讲，您可能需要更大的 N，并在最后展开更多维度。基本上，带有的行`if ( dimensions.length < 3 )`会读到类似`< 4`或者`< 5`，您将不得不围绕那里的那个循环包裹更多`for`的循环，并且它们每个都需要自己的一组`var`s ---所以我不确定这一切可能有多有效，因为您正在交易过多的功能调用和堆栈空间/操作具有类似的想法，但嵌入`for`循环 --- 但我想如果你知道 N 总是高于某个水平或者它只用于最终尺寸，它可以加速某些环境。就像这里一样，我在最后两个维度上做了。但是如果你展开太多，那么你的有效载荷本身就是一只熊。只有测试才能证明这是否值得。似乎堆栈空间是有限的，我想我记得能够通过更多的展开来制作更大的数组。你可以制作一个数组的大小是有限制的。如果我这样做的话，在第 N 级为每个项目调用自己的递归解决方案具有最低限制.. 记得.. 正确.. .. 低得多。

修改他的解决方案的下一部分只是物流，它只是一个简单的重构，以摆脱过多的块和代码。一起加入所有的`var`工作，就是这样。由于您需要 a`arr`返回，一旦循环结束，不妨`var`先在一行上完成所有工作，幸运的是，四个`var`s 中的三个具有相同的初始化。`,`请记住，如果可能，Javascript 可以在加入时优化代码。这也使得代码更小。

PT

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-20T11:28:56.450

另一个版本的using`createNDimArray`和`map`函数：`apply``bind`

```
function createNDimArray(dims) {
    return dims.length === 1
        ? new Array(dims[0])
        : Array.apply(null, Array(dims[0])).map(createNDimensionalArray.bind(null, dims.slice(1)));
}
createNDimArray([3, 2, 5]); // returns 3x2x5 array 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-28T07:24:16.253

创建 ND 阵列需要克隆嵌套的 ND 阵列。因此，您将需要一个适当的`Array.prototype.clone()`方法，其余的很容易。据我所知，以下是 JS 中最简单、最有效的方法。

```
Array.prototype.clone = function(){
  return this.reduce((p,c,i) => (p[i] = Array.isArray(c) ? c.clone() : c, p),[])
}

function arrayND(...n){
  return n.reduceRight((p,c) => c = (new Array(c)).fill().map(e => Array.isArray(p) ? p.clone() : p ));
}

var NDarr = arrayND(4,4,4,4,"."); // size of each dimension and the init value at the end
console.log(JSON.stringify(NDarr))
NDarr[0][1][2][3] = "kitty"; //access any location and change.
console.log(JSON.stringify(NDarr))
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-07-30T14:32:58.770

# 选择 Anwser 的原因

这里有很好的答案，但由于 JavaScript 在这里发生了变化，这是一种通过 JavaScript 中的一些更新特性来解决这个问题的额外方法。

```
function nArray (dem, size=dem, fill=null, currDepth=0) {
    const arr = new Array(size).fill(fill);
    return (currDepth+1 === dem) ? arr : arr.map(i => nArray(dem, size, fill, currDepth+1));
}; 
```

# 笔记

`dem`是数组的维度。

`size`是每个维度的大小，默认是`dem`值。

`fill`是将成为默认填充值的值。

`currDepth`不被使用它是为了函数的递归性质。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-09-16T18:13:00.747

**创建具有默认值的 n 维矩阵数组**

```
function arr (arg, def = 0){
      if (arg.length > 2){
        return Array(arg[0]).fill().map(()=>arr(arg.slice(1)));
      } else {
        return Array(arg[0]).fill().map(()=>Array(arg[1]).fill(def));
      }
    }

//simple usage -> fills with 0
var s = arr([3,5,8,4])  // 4 dimensions
var t = arr([5,7])  // 2 dimensions

//fill with null
var k = arr([4,7,9] , null)  // 3 dimensions 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-06-24T11:36:58.057

如果您需要在每个集群中创建索引从 0 到 4 的 4d 数组，只需执行以下代码：

```
function createNDimArray(dimensions) {
    if (dimensions.length > 0) {
        var dim = dimensions[0];
        var rest = dimensions.slice(1);
        var newArray = new Array();
        for (var i = 0; i < dim; i++) {
            newArray[i] = createNDimArray(rest);
        }
        return newArray;
     } else {
        return undefined;
     }
 }
var MyArray=createNDimArray([5, 5, 5, 5]);
//returns a 5x5x5x5 array with index from 0 to 4;
MyArray[4][4][4][4]="MyArray 4d MyValue";
alert(MyArray[4][4][4][4]);

//For 5-demension array with this param.: 5x4x3x2x2 -> do this:
var MyArray_5d=createNDimArray([5, 4, 3, 2, 2]);
MyArray_5d[4][3][2][1][1]="MyArray 5d MyValue";
alert(MyArray_5d[4][3][2][1][1]);
```

# google-maps - Google Fusion Tables 查询（Google 地图）：在下拉过滤器中添加全选选项

> ID：12588622
> 
> 赞同：0
> 
> 时间：2012-09-25T18:04:10.443
> 
> 标签：google-maps, google-fusion-tables

此问题涉及使用 FusionTablesLayer 向导创建的带有过滤器的 Google 地图。

一旦用户从下拉菜单中选择了过滤器值，恢复到原始地图视图（未过滤，所有项目都显示在地图上）的唯一方法是刷新整个页面。

我想在这个查询中添加一个“全选”选项（或者如果用户选择原始的“--Select--”选项，它基本上会恢复为全选）。我见过一些类似的场景，但尽管我尽了最大努力（这非常糟糕），但我无法复制解决方案！

这是 jsFiddle 中的代码：http: [//jsfiddle.net/j3GfP/](http://jsfiddle.net/j3GfP/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T19:18:02.640

You need to replicate the original query (with no "where" clause) when the --Select-- ("") or VIEW ALL ("*") entries are selected:

[http://jsfiddle.net/4vBFV/4/](http://jsfiddle.net/4vBFV/4/)

（用上面的正确链接更新）

# html - 在 IE8 中，jQuery 滑块过渡期间的故障

> ID：12588625
> 
> 赞同：0
> 
> 时间：2012-09-25T18:04:19.280
> 
> 标签：html, css, internet-explorer-8

有人会快速检查一下 IE 8 并访问我的网站并验证我所看到的内容是否正确吗？我一直在为 IE8 编写一个新的样式表，它运行良好，但突然之间，我的主页滑块左上角的缩略图中出现了一些像素化故障。刚才不存在，我没有更改任何内容，所以我想确保它是我计算机上的错误，而不是 IE 8 中的错误。

[http://fdoandsons.com/beta/index.html](http://fdoandsons.com/beta/index.html)

我所看到的：

滑块转换时，上述链接的左上角缩略图会闪烁黑色方块。您可以在符合标准的浏览器中查看，看看它应该是什么样子。

# c# - 在 Unity 中使用 OSC 配置客户端和服务器

> ID：12588626
> 
> 赞同：1
> 
> 时间：2012-09-25T18:04:20.290
> 
> 标签：c#, udp, unity3d, osc, opensoundcontrol

我正在尝试使用一个名为 UnityOSC 的 Unity 库，它允许您接收来自其他应用程序的 OSC 消息。我有一个应用程序通过 UDP 在以下地址传输数据：

主机：127.0.0.1 端口：33433

我现在需要配置 UnityOSC 来监听该数据。该库有一个名为 OSCHandler.cs 的脚本，在 init 函数中，您可以设置客户端和服务器。我只是不确定如何设置它。

目前，我正在尝试这个：

```
public void Init()
    {
        CreateClient("FaceClient", IPAddress.Parse("127.0.0.1"), 33433);    
        CreateServer("FaceServer", 6666); 
    } 
```

我已经将客户端参数与传输数据的应用程序的参数相匹配，而服务器只是随机的 - 但老实说，我不确定在其中任何一个中放入什么。从理论上讲，如果我正确设置了客户端/服务器，我应该能够在我的更新函数中注册信息，如下所示：

```
void Update() {

    OSCHandler.Instance.UpdateLogs();
    //clients = OSCHandler.Instance.Clients;
    servers = OSCHandler.Instance.Servers;

    foreach(KeyValuePair<string, ServerLog> item in servers)
    {
        // If we have received at least one packet,
        // show the last received from the log in the Debug console
        if(item.Value.log.Count > 0) 
        {
            int lastPacketIndex = item.Value.packets.Count - 1;

            UnityEngine.Debug.Log(String.Format("SERVER: {0} ADDRESS: {1} VALUE 0: {2}", 
            item.Key, // Server name
            item.Value.packets[lastPacketIndex].Address, // OSC address
            item.Value.packets[lastPacketIndex].Data[0].ToString())); //First data value
        }
    }
} 
```

但到目前为止，没有任何东西注册到调试器。知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T19:44:35.330

有两件事，请记住我是从命令行而不是在 Unity 编辑器中执行此操作的，因此情况可能会有所不同。

首先，OSCPacket.cs 中的第 50 行在命令行版本中抛出异常。不确定 Unity 是否选择 Trace.Assert 但删除该行不会造成任何伤害：

```
Trace.Assert(string.IsNullOrEmpty(_address) == false); 
```

我猜 UnityOSC 作者的意思是：

```
Trace.Assert(string.IsNullOrEmpty(value) == false); 
```

否则，我不确定该断言将如何通过，因为 OSCMessage 是 OSCPacket 的派生类，直接调用其 ctor 中的 Address 属性。

其次，如果您尝试在本地机器上进行测试，您的端口需要匹配：

```
 public void Init()
    {
        CreateServer("Server", 5555);
        CreateClient("Client", IPAddress.Parse("127.0.0.1"), 5555);
    } 
```

最后，我的手动创建：

```
 OSCHandler handler = new OSCHandler();
        handler.Init();
        handler.SendMessageToClient<string>("Client", "127.0.0.1", "TestMessage");
        handler.UpdateLogs(); 
```

我不得不稍微修改作者的代码以使其在 Unity 之外工作，但只是稍微修改一下。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T15:59:43.670

我走了一条不同的路线来让这个在 Unity 中工作——基于 James George 的一个名为 openTSPS 的旧项目。您可以在此处下载 - 它接受所有 OSC 数据：

[https://github.com/heaversm/UnityOSC_FS](https://github.com/heaversm/UnityOSC_FS)

# python - 不进入特定文件夹的 Python walker

> ID：12588627
> 
> 赞同：2
> 
> 时间：2012-09-25T18:04:32.337
> 
> 标签：python, recursion, directory, os.walk

这是我的第一篇文章，所以要温柔。;)

问题：我希望能够将 os.walk 用作目录遍历器，但不能进入某些文件夹。前任：

树：

```
\Proj1_0
    \Load001
        \lib
        \src
\Proj2_0
    \Load001
        \lib
        \src
    \Load002
        \lib
        \src 
```

我想显示项目和负载，而不是负载下的子目录。我可以使用以下代码来做到这一点。

```
import os

for root, subFolders, files in os.walk('.'):
    # root does NOT contain 'Load'
    if root.find('Load') == -1:
        print "\nPROJECT: " + root + "\n"
        for folder in subFolders:
            print "    " + folder 
```

但是，该列表是一个很大的列表，所以我尝试使用 del to 但无法使其正常工作，而使用列表也是如此，例如（我从另一个帖子中得到）：

```
def my_walk(top_dir, ignore):
    for dirpath, dirnames, filenames in os.walk(top_dir):
        dirnames[:] = [
            dn for dn in dirnames
            if os.path.join(dirpath, dn) not in ignore]
        yield dirpath, dirnames, filename
list my_walk('.','Load') 
```

但我也无法正常工作。我是 Python 新手，感谢任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T18:25:38.670

尝试：

```
 dirnames[:] = [
        dn for dn in dirnames
        if ignore not in os.path.join(dirpath, dn)] 
```

您想*保留*`os.path.join(dirpath, dn)`不包含字符串的目录`ignore`。

* * *

顺便说一句，您可以`dirnames[:]`在作业的左侧使用。要修剪访问过的目录`os.walk`，您必须修改相同的列表`dirnames`。

`dirnames[:] = ...`就地修改相同的列表。 `dirnames = ...`会将名称重定向`dirnames`到不同的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T18:22:04.177

您可以尝试以下方法：

```
for x in os.walk('.', topdown=True):
    dirpath, dirnames, dirfiles = x
    print(dirpath, dirnames)
    dirnames[:] = filter(lambda x : not x.startswith('Load'), dirnames) 
```

从`help(os.walk)`，您可以修改`names`if `topdown`is `True`，以限制搜索。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-16T23:30:38.450

顺便说一句，这就是我最终得到的......

```
import os,string
path = '.'
path = os.path.normpath(path)
res = []

for root,dirs,files in os.walk(path, topdown=True):
    depth = root[len(path) + len(os.path.sep):].count(os.path.sep)
    if depth == 2:
        # We're currently two directories in, so all subdirs have depth 3
        res += [os.path.join(root, d) for d in dirs]
        dirs[:] = [] # Don't recurse any deeper
print(res) 
```

我知道这是一篇旧帖子，但我认为我应该用我的答案更新它。以防万一，其他人觉得它有用。

# jquery - 如何在 bxslider 寻呼机中将背景图像应用为缩略图？

> ID：12588628
> 
> 赞同：0
> 
> 时间：2012-09-25T18:04:32.983
> 
> 标签：jquery, css, bxslider

我正在使用 bxslider，缩略图作为寻呼机。该功能运行良好，但我似乎无法将背景图像应用于缩略图。有谁知道为什么？HTML和CSS如下。

```
<div class="thumbs">
  <a href=""></a>
  <a href=""></a>
  <a href=""></a>
  <a href=""></a>
</div>   

  .thumbs a {
    display:block;
    width:150px;
    height:100px;

    float:left;
    background-image:url('images/m2g_logo.png');
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T23:07:35.530

您可以按照[他们网站](http://bxslider.com/examples/thumbnails-pager-method-2)上的说明构建寻呼机。如果您想要拇指的特定图像，请使用他们在该页面上指定的代码：

```
$(function(){
      $('#slider1').bxSlider({
        pager: true,
        buildPager: function(slideIndex){
          switch (slideIndex){
            case 0:
              return '<a href=""><img src="" /></a>';
            case 1:
              return '<a href=""><img src="" /></a>';
            case 2:
              return '<a href=""><img src="" /></a>';
            case 3:
              return '<a href=""><img src="" /></a>';
          }
        }
      });
    }); 
```

如果您只想选择/未选择的图像，请使用：

```
$(function(){
      $('#slider1').bxSlider({
        pager: true,
        buildPager: function(slideIndex){            
              return '<a href=""><div></div></a>';
        }
      });
    }); 
```

并按以下方式设置子 div 的背景图像样式：

```
a.pager-active > div{
    background: url("pager_selected.png") no-repeat scroll !important;
    display:inline;
    outline:none;
}

.bx-pager a > div{      
    display:inline;
    padding:2px; /*set this to half the width of your image*/
    background: url("pager_unselected.png") no-repeat scroll;
    position:relative;
    top:10px;
    outline:none;
}

.bx-pager{
    text-align:center;
 } 
```

# c++ - C++调用dll函数

> ID：12588630
> 
> 赞同：0
> 
> 时间：2012-09-25T18:04:45.943
> 
> 标签：c++, .net, dll, interop

> **可能重复：**
> [可能从 C# 调用 C++ 代码？](https://stackoverflow.com/questions/935664/possible-to-call-c-code-from-c)

许多年前，我使用 Visual Studio 6 进行 C++ 开发。现在，我应该编写一个简单的控制台应用程序，以便调用一些用 C++ 编写的 dll 函数。请注意，这些函数都没有在 .NET 世界中公开，因此我无法编写任何包装，而是只需要记住一些关于 c++ 的内容。

我首先想到的是如何调用（在.net 中，引用）本机 dll。是否仅通过“使用 ddlFilePath”指令完成？

最后，但同样重要的是，使用 Visual Studio 6 创建的 C++ 控制台应用程序和使用 Visual Studio 2010 创建的 C++ 控制台应用程序之间的本质区别是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:16:10.387

请看这个类似的问题： [Using .dll in Visual Studio 2010 C++](https://stackoverflow.com/questions/7136450/using-dll-in-visual-studio-2010-c) 第一个答案写得很好（我认为）

用 Visual Studio 6 编写的 C++ 程序与用 Visual Studio 2010 编写的程序的本质区别在于 C++ 语言的改进和语法变化。该语言应该是向后兼容的，所以用 Visual Studio 6 编写的程序应该在 Visual Studio 10 中编译（但不是相反！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T18:12:25.093

要在 .NET 中使用非 COM DLL，您必须使用[Platform Invoke](http://msdn.microsoft.com/en-us/library/ms235282.aspx)。

# google-chrome - 拒绝评估脚本，因为它违反了以下内容安全策略指令：“script-src 'self'”

> ID：12588634
> 
> 赞同：0
> 
> 时间：2012-09-25T18:05:10.683
> 
> 标签：google-chrome, google-chrome-extension

我正在学习为 Google Chrome 开发浏览器操作扩展，并将 javascript 功能拆分为多个文件。在 popup.html 文件中，脚本资源的定义如下

```
<script src="js/Identity.js"></script>
<script src="js/View.js"></script> 
```

View.js 需要调用从 Identity.js 暴露出来的对象的方法，并传递一个回调函数来通知该过程完成时。但是，Chrome 似乎会中断执行。

> 拒绝评估脚本，因为它违反了以下内容安全策略指令：“script-src 'self'”

据我了解，谷歌声明该政策是为了防止将任意字符串评估为可执行的逻辑块。但是我在我的对象之间传递实际函数，所以我不太确定这里必须纠正什么？

```
IdentityObj.Process = function (params, callback) {
  doSomeWork();
  setTimeout(callback(true), 1000); // break here
}; 
```

从 View 对象，一个例子是

```
View.loginClick = function(event) {
        event.preventDefault();
        this.loggingInState();

        var emailAddr = $('#emailAddr').val();
        var password = $('#password').val();
        IdentityObj.login(emailAddr, password, this.loginCallback.bind(this));
    };

View.loginCallback = function(success) {
        if (success) { this.usageState(); }
        else { this.errorState(); }
    }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T02:10:10.310

我的同事提出了这个问题并解释了它，所以现在我明白你指的是什么了。

我在 setTimeout() 定义中直接*执行*回调函数，所以 setTimeout() 接收到 callback(true) 的结果，而不是回调本身。这将需要一个 eval 并因此触发 Chrome 安全策略。

callback() 的执行必须包含在函数声明中。

```
IdentityObj.Process = function (params, callback) {
  doSomeWork();
  setTimeout(function(){callback(true)}, 1000); // break here
}; 
```

# jquery - 尝试使用 jQuery 从 ajax 调用接收数据

> ID：12588641
> 
> 赞同：0
> 
> 时间：2012-09-25T18:05:37.263
> 
> 标签：jquery

我正在尝试使用 jQuery 对 test.php 文件进行 ajax 调用，但它没有返回任何数据。你能告诉我我做错了什么吗？

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
 <script>
 $(document).ready(function() {
 $("#submit").click(function(){ 
    $.ajax({    
       type: "POST",
       url: "http://192.168.1.21/opencart1/upload/admin/view/template/module/test.php",
       data: $("#url").serialize(),
       success: function(msg) {
          alert(data);
          document.getElementById("pollcontent").innerHTML = msg;
       }
   }); 
 })
});  
        </script>

        <div class="content">
        <form id="theform">
          <input type="text" name="url" value="" id="url" />
          <input type="button" name="submit" value="submit" id="submit"/>
          </form>
          <div id="pollcontent"></div> 
```

这是 test.php 文件：

```
<?php
$abc="hi";
echo $abc;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T05:12:05.343

您正在尝试 POST 到远程服务器，这意味着您需要在 PHP 响应中允许跨域资源共享 (CORS)。这可以通过添加允许所有 CORS 标头轻松实现：

```
<?php
  header("Access-Control-Allow-Origin: *");
  $abc="hi";
  echo $abc;
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:29:11.247

将成功改为如下。

```
success: function(msg) {
       alert(msg);
       document.getElementById("pollcontent").innerHTML = msg;
    } 
```

`data`未在成功函数中定义。您应该使用`msg`（或更改`msg`为`data`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T04:59:21.273

实际上，在 ajax 请求中，您正在尝试访问不属于您的域或服务器 ip 的 url。这对 ajax 请求无效。

尝试您的服务器网址，您将获得成功。

# silverlight - 在 Silverlight ChildWindow 关闭动画期间，用户可以单击任何按钮

> ID：12588642
> 
> 赞同：1
> 
> 时间：2012-09-25T18:05:38.910
> 
> 标签：silverlight, animation, childwindow

我正在使用 Silverlight 5 开发丰富的用户界面。我有很多 ChildWindows。子窗口有一些与命令绑定的按钮。我意识到如果调用 Child Window Close 方法，关闭动画就会开始。但是在动画期间用户可以点击任何按钮，这会导致意外情况。为了防止这种情况，我需要在关闭请求时立即取消绑定所有按钮。我不喜欢把这个逻辑放在任何地方。你有更好的解决方案吗？

```
<Grid x:Name="LayoutRoot" DataContext="{StaticResource ResourceKey=viewModel}">
    <StackPanel>
        <TextBlock Text="{Binding ConfirmMessage}" HorizontalAlignment="Center" Margin="5"/>
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
            <Button Width="120" Height="30" Content="Yes" Margin="5" Command="{Binding ConfirmedCommand}"/>
            <Button Width="120" Height="30" Content="No" Margin="5" Command="{Binding RejectedCommand}"/>
        </StackPanel>
    </StackPanel>
</Grid> 
```

为了澄清，使用具有上述内容的简单子窗口。并将 ConfirmedCommand 和 RejectedCommand 绑定到执行信息消息框的简单命令。尝试使用右上角的关闭按钮关闭子窗口。在动画期间快速单击其中一个按钮。您将看到该消息。

编辑：我已经删除了关闭动画，它以另一种方式解决了这个问题。对于那些想要动画原始问题的人来说仍然是一样的。

# javascript - 使用 jshint-rhino.js 自定义设置

> ID：12588643
> 
> 赞同：2
> 
> 时间：2012-09-25T18:05:47.403
> 
> 标签：javascript, rhino, jslint, jshint

我一直在将 jshint 与 node 一起使用，但最近不得不切换到将它与 Rhino 一起使用。

我曾经能够做到：

`jshint --config=jsHintConfig.json fileToLint.js`

现在，我尝试用以下方式替换该调用：

`rhino jshint-rhino.js --config=jsHintConfig.json fileToLint.js`

但这似乎不起作用。我只将以下内容打印到控制台：

`Usage: jshint.js file.js`

jshint-rhino 不接受 json 配置文件吗？

更新：

[http://anton.kovalyov.net/2011/03/01/jshint-edition-update/](http://anton.kovalyov.net/2011/03/01/jshint-edition-update/) - 说：“当与我们的 Rhino 包装器一起使用时，添加了对提供 JSHint 选项作为命令行参数的支持”但没有说明如何.

[https://github.com/jshint/jshint/issues/27](https://github.com/jshint/jshint/issues/27) - 关于在 cli 上指定选项的内容，但也没有说明如何。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T01:07:54.043

这有效：

> rhino jshint-rhino.js file1.js file2.js opt1=true,opt2=true,opt3=false global1,global2,global3

不需要在文件名之间放置逗号，并且在选项和全局变量的逗号之前或之后不要有空格很重要。

# php - 使用 php 读取波斯语（Unicode 字符）文本文件

> ID：12588647
> 
> 赞同：3
> 
> 时间：2012-09-25T18:05:47.777
> 
> 标签：php, utf-8, fopen, fread

我正在借助以下代码阅读一个波斯文本文件（使用 PHP）：

```
/* Reading the file name and the book (UTF-8) */
if(file_exists($SourceDirectoryFile))
{
        $NameBook  = "name.txt";
        $AboutBook = "about.txt";

        $myFile = "Computer-Technolgy/2 ($i)/".$NameBook;
        $fh = fopen($myFile, 'r');
        $theData = fread($fh, filesize($myFile));
        fclose($fh);
        echo 'Name file: '. $theData.'<hr/>';
} 
```

name.txt 文件内容：

```
آموزش شبكه هاي کامپيوتري (LEARNING NETWORK) 
```

名称文件：����������������������（学习网络）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T18:31:56.877

您看到这个的原因是因为您只是在回显原始内容。您的浏览器需要更多信息才能以正确的形式显示消息。

最简单的方法是使用下面的代码段。

```
/* Reading the file name and the book (UTF-8) */
if (file_exists($SourceDirectoryFile))
{

    $NameBook  = "name.txt";
    $AboutBook = "about.txt";

    // Using file_get_contents instead. Less code
    $myFile   = "Computer-Technolgy/2 ($i)/" . $NameBook;
    $contents = file_get_contents($myFile);

    // I want my browser to display UTF-8 characters
    header('Content-Type: text/html; charset=UTF-8');
    echo 'Name file: ' .  $contents . '<hr/>';
} 
```

请注意，该`header`函数需要在输出到浏览器的开头执行。因此，例如，如果您在此函数之前显示了其他数据，则需要将标题语句移动到顶部。否则，您最终会在屏幕上看到标题已设置的警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T18:19:40.777

您需要确保显示文本文件的页面具有[正确的编码](http://tlt.its.psu.edu/suggestions/international/web/tips/declare.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-19T18:50:36.340

最终也是最好的解决方案是：在你的连接下使用这条线

```
mysqli_set_charset( $con, 'utf8'); 
```

像这样：

```
$con = mysqli_connect("localhost","root","amirahmad","shoutit");
mysqli_set_charset( $con, 'utf8'); 
```

最后在你的 html 中的 head 标签下添加这一行，以确保你的页面有 utf-8 字符集，如下所示：

```
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

就是这样。你可以在这里阅读正式文件：[pph.net charset](http://php.net/manual/ru/mysqli.set-charset.php)

# rest - Nancy Web 框架中 API 端点声明的顺序

> ID：12588653
> 
> 赞同：1
> 
> 时间：2012-09-25T18:06:20.293
> 
> 标签：rest, post, put, nancy

我正在使用 NancyFX 来托管我们的网站 REST API。我们在数据库中有用户表，我想更新：

1) 完整用户更新 - 更新所有字段 2) 部分用户更新 - 仅更新单个字段

我们使用的是 Nancy 0.7 - 所以目前它没有 PATCH 支持 - 我只能使用 PUT

我已经定义了我的 API

```
PUT ["/user/{username}"] - for complete update using passed-in user object value
PUT ["/user/{username}/id/{newid}"] - for updating user id only 
```

但是，当我调用第二个 API（仅更新 id）时——它永远不会被 Nancy 困住——并且 Nancy 总是调用该方法来完全更新用户，即 PUT ["/user/{username}"]

不管我声明 API 的顺序是什么，Nancy 总是只调用完整的用户更新端点。

需要帮助，以便我可以使用客户端应用程序中的 PUT 正确使用这两个 API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T08:18:04.177

通常，对 URI 的任何动态数据组件进行 UrlEncode 是一个好主意。

所以，在你的情况下：

```
PUT - /user/xyz@yahoo.com/id/123 
```

会成为

```
PUT - /user/xyz%40yahoo.com/id/123 
```

Nancy 将负责为您解码值，因此当您从`parameters`动态对象中提取它时，它将返回到`xyz@yahoo.com`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:25:40.880

发现问题 - 它与用户名中的“@”字符有关 - 特殊字符。

如果用户名包含“@”字符，则 Nancy 永远不会匹配 PUT 的路由 - /user/xyz@yahoo.com/id/123 到 PUT ["/user/{username}/id/{newid}"]

它总是匹配 PUT 的路由 - /user/xyz@yahoo.com/id/123 到 PUT ["/user/{username}"]

# android - 当其兄弟姐妹消失时，如何使 ViewGroup 子 match_parent ？

> ID：12588654
> 
> 赞同：1
> 
> 时间：2012-09-25T18:06:23.350
> 
> 标签：android, android-layout, viewgroup

我有一个布局，其根`ViewGroup`有两个孩子，其中只有一个始终可见。另一个孩子的可见性将在运行`View.GONE`时设置为不适用时。

当两个孩子都可见时，高度设置为`wrap_content`并且布局看起来很棒。问题是我想将可见视图扩展到`match_parent`另一个消失时。

有什么办法可以做到这一点或等效的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:31:26.080

您可以像这样更改任何视图的布局：

```
view.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT)); 
```

构造函数采用宽度然后高度，如：`new LayoutParams(int width, int height)`。
每种 ViewGroup 类型都有一个 LayoutParams 类。确保您导入引用您的特定 ViewGroup 的那个。因此，如果您的 ViewGroup 是 LinearLayout 使用：

```
import android.widget.LinearLayout.LayoutParams; 
```

* * *

> 我试图弄清楚这个策略没有成功

我不确定你在哪里遇到了麻烦，但这种方法只需要几行额外的代码：

```
// When you want to show both views
view1.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));
view2.setVisibility(View.VISIBLE);
...

// When you want to hide the second view
view1.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
view2.setVisibility(View.GONE); 
```

如果您多次隐藏/显示视图，您可以保存对每个 LayoutParams 对象的引用，而不是重复创建新对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T09:40:37.197

您是否尝试过与之合作`android:layout_weight`？

我把这个小例子放在一起。下面我添加了一张图片，显示了两个视图可见（左）以及 view2 可见性设置为`GONE`（右）时的外观。如您所见， view1 会用完所有可用空间。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <View
        android:id="@+id/view1"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:background="#ff0000" />

    <View
        android:id="@+id/view2"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:background="#0000ff" />

</LinearLayout> 
```

![例子](../Images/2e26b08299ca5a9bdf824b76d61181cb.png)

# javascript - 茉莉花：使用名称中带点的函数

> ID：12588655
> 
> 赞同：1
> 
> 时间：2012-09-25T18:06:30.810
> 
> 标签：javascript, ruby-on-rails, testing, jasmine

我正在测试一个使用其他 js 文件中的函数的 js 函数。

我的一个外部 js 文件具有这样定义的函数：

函数名.functionextension = 函数 () {.....}

使用 jasmine 进行测试并调用 functionname.functionextension 时，它抱怨未定义 functionname。我认为它认为函数名是一个对象..

我知道解决此问题的一种方法是修改函数名称，但我不能这样做。还有其他方法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T18:10:43.470

在 javascript 中，所有函数都是对象。在外部的js文件中，函数大概是这样定义的：

```
var functionname = functionname || {};

functionname.functionextension = function () {
    ...
}; 
```

如果您收到`functionname`未定义的脚本错误，则外部 javascript 中存在错误，或者您没有调用外部脚本设置其对象所需的某些初始化函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-30T07:15:34.303

它对我有用......你需要在调用时按其全名调用函数，如 functionname.functionextension() 。

# video - 如果浏览器支持全屏 api，则显示 mediaelement 播放器，否则显示 youtube 播放器

> ID：12588667
> 
> 赞同：0
> 
> 时间：2012-09-25T18:07:19.177
> 
> 标签：video, html5-video, fullscreen, mediaelement.js

我正在使用 mediaelement.js 在我的网站上显示视频。我想检查一下，如果全屏 API 在浏览器上可用，请使用 mediaelement 播放器，否则使用默认的 youtube 播放器。

我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T18:57:44.973

```
if (element.mozRequestFullScreen) {
  // This is how to go into fullscren mode in Firefox
  // Note the "moz" prefix, which is short for Mozilla.
  element.mozRequestFullScreen();
} else if (element.webkitRequestFullScreen) {
  // This is how to go into fullscreen mode in Chrome and Safari
  // Both of those browsers are based on the Webkit project, hence the same prefix.
  element.webkitRequestFullScreen();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T05:03:20.077

我终于走了一条稍微不同的路线。我已经为 wordpress 使用了 php 浏览器检测插件，并使用 if 条件为 IE 和 Opera 提供不同的代码。该列表还将包括较旧的 FF、Chrome、Safari。因此，浏览器功能检测没有发生，但它暂时有效。

但是，如果有人可以回答如何做到这一点，那对于未来的目的来说会很棒。我相信这可以用ajax来完成。但是，我的具体情况需要更多数据 - 视频 url 是 wordpress 中的自定义字段，它通过 for 循环获取自定义字段中所有视频的列表。

# jquery - Jquery :NOT 选择器用法

> ID：12588675
> 
> 赞同：0
> 
> 时间：2012-09-25T18:07:52.940
> 
> 标签：jquery, jquery-selectors

```
$('body:not(selector)').fadeTo(100,0.3); 
```

我们怎样才能像 0.3 那样做这个选择的开放城市；我现在用这个不工作

```
$('body:not(".myCLASS")').fadeTo(400,0.1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:10:01.687

不确定“我们如何才能像 0.3 这样选择的开放城市”是什么意思，但我会加上我的 5 美分来修复选择器

```
$('body :not(.myCLASS)') 
```

身体元素在这里没有多大意义。你可以使用更好的容器，比如 a `div`或者只是从那里移除身体。

```
$(':not(.myCLASS)') 
```

如果你碰巧有一个容器来限制搜索，你可以这样做

```
$('#myContainerId :not(.myCLASS)') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T18:10:52.533

要将[:not()](http://api.jquery.com/not-selector/)选择器应用于所有元素，请不要指定`body`：

```
$(":not(.myCLASS)").fadeTo(100, 0.3); 
```

但是，只匹配要淡出的顶级元素而不是全部匹配会更有效（淡化祖先元素会影响其后代）。也许是这样的：

```
$("div:not(.myCLASS)").fadeTo(100, 0.3); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T18:09:53.263

这是工作代码：

```
$('body :not(.myCLASS)').fadeTo(400,0.1); 
```

**更新**

刚刚更新了电话，在这里检查小提琴：http: [//jsfiddle.net/mHVA5/](http://jsfiddle.net/mHVA5/)

# mysql - 如果第二个表包含记录，则将属性添加为列

> ID：12588680
> 
> 赞同：0
> 
> 时间：2012-09-25T18:08:15.027
> 
> 标签：mysql

我有两个数据库：一个包含用户：

**人**

```
id
name
course 
```

另一个包含

**选民**

```
 id
   personID
   type 
```

当用户投票时，会添加到 voters 表的条目（类型描述用户可以投票的不同主题）

我想获取所有用户，例如在哪里`persons.course = '1' AND voters.type = '2'`并让输出包含以下列：id、name、hasVoted（如果可以在 voters 表中找到 personID，hasVoted 返回 true）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:11:54.193

左连接可能是您要寻找的。

```
SELECT persons.id, persons.name, voters.personID IS NOT NULL AS hasVoted
FROM persons LEFT JOIN voters ON (persons.id = voters.personID)
WHERE persons.course = '1' AND voters.type = '2'
GROUP BY persons.id 
```

[http://dev.mysql.com/doc/refman/5.0/en/join.html](http://dev.mysql.com/doc/refman/5.0/en/join.html)

左连接将包括连接左侧的所有匹配行，以及连接右侧的任何匹配片段。左侧没有匹配右侧的任何行的右侧列值为 null。

至于使用 'IS NOT NULL' 或 'IS NULL' 是因为 'X = NULL' 的行为不像它出现的那样。

```
> SELECT 'A' = NULL, 'A' IS NULL, NULL = NULL, NULL IS NULL;
+------------+-------------+-------------+--------------+
| 'A' = NULL | 'A' IS NULL | NULL = NULL | NULL IS NULL |
+------------+-------------+-------------+--------------+
|       NULL |           0 |        NULL |            1 |
+------------+-------------+-------------+--------------+ 
```

有关使用空值的更多详细信息：http: [//dev.mysql.com/doc/refman/5.0/en/working-with-null.html](http://dev.mysql.com/doc/refman/5.0/en/working-with-null.html)

# symbian - 在 Symbian c++ 中创建和使用 DLL

> ID：12588681
> 
> 赞同：1
> 
> 时间：2012-09-25T18:08:28.743
> 
> 标签：symbian

我是新来的 symbain。我不知道如何创建 symbian dll 并在 symbian 应用程序中使用它。

**我正在寻找某种教程或指南：**
1\. 如何在 symbian c++ 中创建 dll？
2.如何在symbian app中使用创建好的dll？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T14:55:11.990

[从hemelix](http://www.hemelix.com/Programming-details)开始，尤其是[这里](http://www.hemelix.com/symbian-dll)和[这里](http://www.hemelix.com/Polymorphic%20DLL)，然后查看[Nokia Symbian Belle Developers' Library](http://library.developer.nokia.com/index.jsp?topic=/Nokia_Belle_Developers_Library/GUID-86C9DACB-DCCF-43F6-BCEE-91144F4EADC8_cover.html)的官方文档，其中也包含示例（例如[这里](http://library.developer.nokia.com/topic/Nokia_Belle_Developers_Library/GUID-176FD8C9-B4A9-5B50-B683-AB5DA7D5D6F4.html)和[这里](http://library.developer.nokia.com/topic/Nokia_Belle_Developers_Library/GUID-960B2F4E-9012-53EE-973A-C3426A7DD48F.html)）。

（不过，让我警告你：Symbian 开发真的很难。在潜入之前三思而后行......）

# javascript - 骨干.js 集合使用

> ID：12588683
> 
> 赞同：0
> 
> 时间：2012-09-25T18:08:32.410
> 
> 标签：javascript, backbone.js

我在维护我的收藏时遇到了问题。首先，我通过 fetch 将与会者加载到集合中。这会将现有与会者从数据库加载到集合中。我还有一个按钮，允许用户添加新的与会者。当手动输入与会者时，它似乎会清除通过 fetch 加载到集合中的模型并重新开始。现在，所有手动添加的与会者都会填充集合；但是，我希望 fetch 加载和手动添加的与会者都填充此列表。

```
var InviteeView = Backbone.View.extend({
tagName: "tr",
initialize: function() {
    this.collection = new InviteeJSONList();    
    _.bindAll(this, 'render','appendItem','remove','saveInvitee');
},
events: {
    "click .removeInvitee":"remove",
    "click .saveInvitee":"saveInvitee"
},
render: function() {
    var source = $("#invitee-template").html();
    var template = Handlebars.compile(source);
    var context = inviteeListJSON.attributes['json'];
    var html=template(context);

    $(this.el).html(html);

    return this;
},
appendItem: function() {
    $("#attendees").append(this.render().el);
},
remove: function() {
    $(this.el).remove();
},
saveInvitee: function() {
    var value = $(this.el).find('select').val();
    var model = this.collection.attributes['json']['invitees'];
    model = model.filter(function(attributes) {return attributes.encrypted_id==value});
    var attendee = new Attendee({
        user_id: model[0]['id'],
        meeting_id: '<?=$mid?>',
        status: 'Uncomfirmed',
        first_name: model[0]['first_name'],
        last_name: model[0]['last_name'],
        email: model[0]['email'],
        user_uuid: model[0]['encrypted_id'],
        unavailable_dates: model[0]['unavailable_dates']
    });

    attendeeView.addAttendeeItem(attendee.attributes)
    this.remove();
}
});

var AttendeeList = Backbone.Collection.extend({
model: Attendee,
url: '<?=$baseURL?>api/index.php/attendees/<?=$mid?>&timestamp=<?=$timestamp?>&userid=<?=$userid?>&apikey=<?=$apikey?>',
parse: function(response) {
    if(response!="No History") {
        $.each(response['attendees'], function(key, value) {
            attendeeView.addAttendeeItem(value);
        });
        $('.loading_attendees').hide();
    }
    else {
        $('.loading_attendees').html("No attendees exists for this meeting.");
    }
}
});

var AttendeeView = Backbone.View.extend({
el: $('body'),
initialize: function() {
    _.bindAll(this, 'render','fetchAttendees', 'appendItem', 'addAttendeeItem');
    this.counter=0;
    this.collection = new AttendeeList();
    this.collection.bind('add', this.appendItem);
    this.fetchAttendees();
},
events: {
    "click #addInvitee":"appendInvitees",
},
appendInvitees: function() {
    var inviteeView = new InviteeView();
    inviteeView.appendItem();
},
render: function() {

},
fetchAttendees: function() {
    this.collection.fetch({
        success: function(model, response) {

        },
        error: function(model, response) {
            $('#loading_attendees').html("An error has occurred.");
        }
    });
},
appendItem: function(item) {
    var attendeeItemView = new AttendeeItemView({
        model: item
    });
    $("#attendees").append(attendeeItemView.render().el);
    attendeeItemView.updateAttendeeStatusSelect();

},
addAttendeeItem: function(data) {
    this.counter++;
    var attendee = new Attendee({
        id: data['id'],
        user_id: data['user_id'],
        meeting_id: data['id'],
        status: data['status'],
        comments: data['comments'],
        attended: data['datetime'],
        first_name: data['first_name'],
        last_name: data['last_name'],
        email: data['email'],
        counter: this.counter,
        user_uuid: data['user_uuid'],
        unavailable_dates: data['unavailable_dates']
    });

    this.collection.add(attendee);
},
}); 
```

在通过 fetch() 加载集合（从 REST API 加载的 2 个项目）之后：

```
console.log(this.collection.models) outputs:
[d]
[d,d] 
```

然后，当我通过按钮手动添加与会者时，集合似乎已重置：

```
console.log(this.collection.models) outputs:
[d] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T04:18:36.930

很好，它正在工作，因为有很多路要走。我可能会采用不同的结构来利用实例化模式的 Backbone 方法，但工作代码是真正的目标，所以这些只是我的想法：

*   `parse()`与其在 Collection方法中实际实例化模型，不如`parse`返回一个数据对象数组，Backbone 将从该数组中实例化模型，并触发一个

*   而不是在 AttendeeView 内部调用 Collection 的 fetch，而是在 View 类外部调用

*   要么让 AttendeeView 代表单个与会者的视图，要么将其命名为 AttendeeListView 并让它呈现列表

例如：

```
AttendeeList = Backbone.Collection.extend({
 ...
   parse: function(response) {
           // create an array of objects from which the models can be parsed
           var rawItems = [];
               $.each(response['attendees'], function(key, value) {
                 rawItems.push({
                        id: data['id'],
                        user_id: data['user_id'],
                        meeting_id: data['id'],
                        status: data['status'],
                        comments: data['comments'],
                        attended: data['datetime'],
                        first_name: data['first_name'],
                        last_name: data['last_name'],
                        email: data['email'],
                        counter: this.counter,
                        user_uuid: data['user_uuid'],
                        unavailable_dates: data['unavailable_dates']
                    });
                });
              return rawItems;
           },
         ...
       } 
```

然后使用成功/失败回调：

```
 AttendeeList.fetch( onListFetchSuccess , onListFetchFail ); 
```

或监听`reset`被触发的事件：

```
 AttendeeList.on('reset', createAttendeeListView ); 
```

（我实际上并没有编辑和运行代码，这只是一个大纲）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T00:24:34.033

我最终通过从集合中删除 url 参数和解析函数并进入视图来解决问题。现在一切都按预期工作。

# regex - 带有数字和一个字母的正则表达式格式

> ID：12588685
> 
> 赞同：-1
> 
> 时间：2012-09-25T18:08:37.333
> 
> 标签：regex

我想知道如何创建格式的正则表达式模式：

*111.222-3M*

和

*1112223M*

什么是数字只能是数字，最后一个只能是字母。

提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T18:22:14.163

一个严格的、区分大小写的版本：

```
\d{3}\.?\d{3}-?\d[A-Z] 
```

将匹配*1112223M*、*111.222-3M*、*111.2223M*和*111222-3M*。如果最后两个是不可取的：

```
(\d{3}\d{3}\d[A-Z])|(\d{3}\.\d{3}-\d[A-Z]) 
```

将仅匹配前两个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T18:10:41.453

如果这些确实是唯一要匹配的两种模式，那么这将起作用：

```
^\d+\.?\d+\-?\d+[a-zA-Z]$ 
```

正如@ThomSmith 所说，这个正则表达式也会匹配不同位置的小数和连字符，例如 11.12-2223M。如果这是不可取的，请告诉我。

编辑：

如果这些模式与您要匹配的模式**完全相同，那么这是一个更好的模式：**

```
^\d{3}\.?\d{3}\-?\d[a-zA-Z]$ 
```

# php - 如何在没有 foreach 循环的情况下有效地将子数组作为主数组？

> ID：12588687
> 
> 赞同：4
> 
> 时间：2012-09-25T18:08:42.077
> 
> 标签：php, arrays, for-loop, multidimensional-array, foreach

这是我的数组：

```
Array
(
    [0] => Array
        (
            [same_key] => 1000
        )
    [1] => Array
        (
            [same_key] => 1001
        )
    [2] => Array
        (
            [same_key] => 1002
        )
    [3] => Array
        (
            [same_key] => 1003
        )
) 
```

我想在不使用 foreach 循环的情况下获得以下内容。这可能吗？

```
Array
(
    [0] => 1000
    [1] => 1001
    [2] => 1002
    [3] => 1003
) 
```

有小费吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T18:12:15.977

以下将做的伎俩

```
$myArray = Array
(
    0 => Array
        (
            'adfadf'=> 1000
        ),
    1 => Array
        (
            'adfadf' => 1001
        ),
    2 => Array
        (
            'adfadf' => 1002
        ),
    3 => Array
        (
            'adfadf' => 1003
        )
);

$myArray = array_map('current', $myArray)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T18:13:13.680

你可以这样做`$array = array_map('current', $array);`

[活生生的例子](http://codepad.org/EoaAxRUA)

输出

![在此处输入图像描述](../Images/4b7368797732d0cb1e9d7cd58a33b5b8.png)

# web-services - getLIstItems 方法中的 CAML 查询不返回任何项目行

> ID：12588691
> 
> 赞同：1
> 
> 时间：2012-09-25T18:08:54.347
> 
> 标签：web-services, soap, sharepoint-2010, sharepoint-list

我正在调用 Sharepoint 的 List Web 服务并使用 getListItems() 方法。特别是，我热衷于指定 CAML 查询，因为我真的希望它只检索我特别感兴趣的一项。我通过在我的 XML 字符串中以不同程度的组合指定一个查询来做到这一点，或者通过指定EncodedAbsUrl、LinkFileName、URL 或 FileRef，大多数结果返回 0。XML 查询如下所示：

```
<?xml version="1.0" ?><S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">    <S:Body><GetListItems xmlns="http://schemas.microsoft.com/sharepoint/soap/"><listName>{5cbc4407-3851-4e00-964a-bb7e9b430f9f}</listName>    <viewName></viewName>    <rowLimit>1000</rowLimit>    <webID></webID>

**<query><Query><Where><Eq><FieldRef Name = "FileRef"/><Value Type = "Text">"/Shared%20Documents/Ashish/Word_feb27.doc"</Value></Eq></Where></Query></query>**

<viewFields><ViewFields><FieldRef Name="FSObjType"/><FieldRef Name="LinkFilename"/><FieldRef Name="UniqueId"/><FieldRef Name="FileRef"/><FieldRef Name="FileRef"/><FieldRef Name="EncodedAbsUrl"/><FieldRef Name="FileSizeDisplay"/><FieldRef Name="_UIVersionString"/><FieldRef Name="_owshiddenversion"/></ViewFields></viewFields></GetListItems>    </S:Body></S:Envelope> 
```

如果没有标签，这个 Soap 请求实际上可以工作，它会检索列表中可用的所有项目。当我指定查询标签时，挫折感就开始了。特别是我尝试了以下组合

**FieldRef.name = {LinkFileName, EncodedAbsUrl, URL,FileRef} 和 Value.type = {Text, URL}**

它们要么产生没有 0 字段的结果，要么返回内部错误。我想，这是一个句法问题，我宁愿把这个问题发给过去可能不知道的人，看看我可能在哪里搞砸了。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T13:15:43.840

我会推荐使用[CAML Query Builder](http://www.u2u.be/Tools/wincamlquerybuilder/CamlQueryBuilder.aspx)和 Fiddler。查询构建器可以使用 Web 服务连接 SP，您可以使用它构建查询。获得预期结果后，使用 Fiddler 捕获 Web 服务请求并使用它:)

顺便说一句：您是否考虑过使用 Sharepoint 客户端对象模型？您不必担心 SOAP 消息。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-26T06:09:03.173

删除`<query><Query>`标签。

# .net - 更改果园 cms 中的日期格式

> ID：12588696
> 
> 赞同：2
> 
> 时间：2012-09-25T18:09:27.707
> 
> 标签：.net, orchardcms

我正在尝试设置博客页面的样式并添加了一个日期字段，但日期始终显示为 mm/dd/yyyy，但我希望它显示为日月（文本）年。有没有办法以某种方式改变这种情况？

这是我正在使用的备用模板的代码：

```
@using Orchard.Utility.Extensions;

@{
    string name = Model.ContentField.DisplayName;
}

<div class="date_tag">
<p class="date-time-field date-time-field-@name.HtmlClassify()">    
    @if (Model.Model.ShowDate) 
    { <text>@Model.Model.Date</text> } 
    @if (Model.Model.ShowTime)
    { <text>@Model.Model.Time</text> }
</p>
</div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-19T18:10:54.757

形状本身公开了这两个字符串，但字段包含值，并且可以从形状中访问该字段。

```
@Model.ContentField.DateTime 
```

供参考：[http ://sebastienros.github.io/CheatSheet/](http://sebastienros.github.io/CheatSheet/)

DateTime 字段是向形状添加更多信息的唯一字段。所以它没有遗漏任何东西，它只是向形状添加信息。

要在正确的时区正确显示日期，您需要使用 DateTime 形状助手，如下所示：

```
@Display.DateTime(DateTimeUtc: Model.ContentField.DateTime, CustomFormat: T("d MM yyyy")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T23:35:58.597

像`@Model.Model.Date.ToString("dd MMM yyyy")`什么？

# google-app-engine - 如何在 Google App Engine 中逐行分析 Python 函数？

> ID：12588697
> 
> 赞同：4
> 
> 时间：2012-09-25T18:09:27.450
> 
> 标签：google-app-engine, profiling, python-2.5, shared-libraries

我想使用 line_profiler 在我的 GoogleAppEngine 应用程序中逐行分析单个大型方法。

不幸的是，即使在本地开发服务器上，GAE 似乎也不允许您导入 .so 库。

我怎样才能实现我的目标？我很乐意使用仅限 python 的解决方案，如果有的话，或者就如何编写自己的解决方案提出建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T03:49:36.797

使用[gae_mini_profiler](https://github.com/kamens/gae_mini_profiler)。

它可以跟踪所有函数调用及其时间（检测），也可以定期检查调用堆栈以找出在请求期间花费了哪些函数时间（采样）。你可以在这里看到它的一个例子 - [http://mini-profiler.appspot.com/](http://mini-profiler.appspot.com/)

# python - Eclipse 中的默认语法高亮

> ID：12588698
> 
> 赞同：0
> 
> 时间：2012-09-25T18:09:31.277
> 
> 标签：python, eclipse

> **可能重复：**
> [在 EclipsePDT 中对没有扩展名的文件强制 Content-Type？](https://stackoverflow.com/questions/2009636/force-content-type-on-files-with-no-extension-in-eclipsepdt)

我目前正在处理未使用任何文件扩展名保存的 Python 文件。我已经在这些文件的第一行添加了以下内容：#!/usr/bin/env python

不幸的是，Eclipse 仍然无法将其突出显示为 Python 文件。我已经安装了 PyDev，它非常适合具有 .py 扩展名的文件。不知道没有它我怎么能让它工作。帮助？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T18:11:32.493

只需右键单击项目资源管理器/导航器视图中的文件，然后在上下文菜单中选择“打开方式”->（“其他...”->“内部编辑器”）->“Python 编辑器”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T18:34:39.150

窗口 -> 首选项
常规 -> 内容类型

单击“内容类型：”列表中的“Python”。

然后通过单击添加添加任何文件关联...

并指定 *.py 或您需要的任何扩展名

# opengl - 《学习现代3D图形编程》需要帮助编译非官方OpenGL SDK 0.4.4-教程

> ID：12588710
> 
> 赞同：1
> 
> 时间：2012-09-25T18:10:25.353
> 
> 标签：opengl, graphics, sdk, 3d

我找到了这个“教程”：[http ://www.arcsynthesis.org/gltut/index.html](http://www.arcsynthesis.org/gltut/index.html)

本教程依赖于非官方的 OpenGL SDK (http://glsdk.sourceforge.net/docs/html/pg_build.html)。

我正在使用 Windows 7 和 MSVC++2010。

我下载了 Unofficial OpenGL SDK 的最新发行版，将其解压缩，使用 premake4 生成 VS2010 项目并使用 MSVC++2010 构建库。（如此处所述：http: [//glsdk.sourceforge.net/docs/html/pg_build.html](http://glsdk.sourceforge.net/docs/html/pg_build.html)）

出于测试目的，我尝试构建包含的非官方 OpenGL SDK 示例。但是在 MSVC++2010 中构建已经失败，并显示以下消息：

```
1>------ Erstellen gestartet: Projekt: simple_glfw, Konfiguration: Debug Win32 ------
1>Der Buildvorgang wurde am 25.09.2012 19:45:36 gestartet.
1>InitializeBuildStatus:
1>  "obj\Debug\simple_glfw.unsuccessfulbuild" wird erstellt, da "AlwaysCreate" angegeben wurde.
1>ClCompile:
1>  simple_glfw.cpp
1>LINK : fatal error LNK1123: Fehler bei der Konvertierung in COFF: Datei ist ungültig oder beschädigt.
1>
1>Fehler beim Erstellen
1>
1>Verstrichene Zeit 00:00:00.78
========== Erstellen: 0 erfolgreich, Fehler bei 1, 0 aktuell, 0 übersprungen ========== 
```

（对不起，我有德语 MSVS 版本）

我想知道的下一件事是如何将这些库放入“学习现代 3D 图形编程”教程项目中。

“构建教程”：[http ://www.arcsynthesis.org/gltut/Building%20the%20Tutorials.html](http://www.arcsynthesis.org/gltut/Building%20the%20Tutorials.html)

**更新：**好的 Nicol Bolas 是对的，所以我编译了随教程一起提供的非官方 OpenGL SDK。但是现在在编译时出现此错误：

```
1>------ Erstellen gestartet: Projekt: Tut 01 Main, Konfiguration: Debug Win32 ------
1>Der Buildvorgang wurde am 25.09.2012 20:59:20 gestartet.
1>InitializeBuildStatus:
1>  Aktualisieren des Timestamps von "obj\Debug\Tut 01 Main.unsuccessfulbuild".
1>ClCompile:
1>  Alle Ausgaben sind aktuell.
1>ManifestResourceCompile:
1>  Alle Ausgaben sind aktuell.
1>LINK : fatal error LNK1123: Fehler bei der Konvertierung in COFF: Datei ist ungültig oder beschädigt.
1>
1>Fehler beim Erstellen
1>
1>Verstrichene Zeit 00:00:00.16
========== Erstellen: 0 erfolgreich, Fehler bei 1, 1 aktuell, 0 übersprungen ========== 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:14:11.967

> 我想知道的下一件事是如何将这些库放入“学习现代 3D 图形编程”教程项目中。

你没有。

如您链接到的页面所述，“*修改后的 SDK 发行版与这些教程捆绑在一起*”。您不应该下载 SDK；你已经有了。这就是你应该建造的。

# python - 在 python 中为 socket.io 创建服务器-客户端测试

> ID：12588717
> 
> 赞同：2
> 
> 时间：2012-09-25T18:10:51.287
> 
> 标签：python, websocket, socket.io

任何人都可以将一个完整的新手指向我可以了解 Python 框架以测试 socket.io 的地方。我非常擅长编写用于测试静态 API 的脚本，但之前从未使用过 WebSocket。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T07:53:55.670

在此处的 gevent-socketIO 示例代码中有大量使用多个流行框架的示例[https://github.com/abourget/gevent-socketio/tree/master/examples](https://github.com/abourget/gevent-socketio/tree/master/examples)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T21:50:06.717

如果你想使用 Python 与 socket.io 服务器通信，你可以使用[socketIO-client](https://pypi.python.org/pypi/socketIO-client)。

```
from socketIO_client import SocketIO

def on_bbb_response(*args):
    print 'on_bbb_response', args

with SocketIO('localhost', 8000) as socketIO:
    socketIO.emit('bbb', {'xxx': 'yyy'}, on_bbb_response)
    socketIO.wait_for_callbacks(seconds=1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-28T11:13:38.080

这是我尝试过的。

*服务器.py*

```
import json
from aiohttp import web
import socketio

sio = socketio.AsyncServer()

# Creates a new Aiohttp Web Application
app = web.Application()
sio.attach(app)

@sio.on('message')
async def print_message(sid, data):
    print("worked :")
    if data['type'] == "enter":
        print("----- "+data['username'] + " joined the room -----")
    elif data['type'] == "exit":
        print("----- "+data['username'] + " left the room -----")
    else:
        print(data['username']+" > "+data['message'])

if __name__ == '__main__':
    web.run_app(app) 
```

*客户端.py*

```
import time
import socketio

sio = socketio.Client()

sio.connect('http://localhost:8080')

username = input("Enter username : ") or "Unknown"

sio.emit("message", {'username':username,'message':'','type':'enter'})

while True:
    print("Enter message : ")
    msg = input()
    sio.emit("message", {'username':username,'message':msg,'type':'chat'})
    print("to quit press y")
    key = input()

    if key == 'y' or key == 'Y':
        sio.emit("message", {'username': username, 'message': "",'type':'exit'})
        time.sleep(1)
        sio.disconnect()
        break

sio.emit("message", {'username': username, 'message': msg})

print("you disconnected") 
```

# three.js - 在 ThreeJS 中挑选 collada 加载模型的问题

> ID：12588719
> 
> 赞同：0
> 
> 时间：2012-09-25T18:10:59.393
> 
> 标签：three.js, collada, picking

在 ThreeJS 中加载 collada 模型时，我遇到了挑选问题。立方体的挑选示例工作正常。加载 collada 模型也可以。
然而，似乎为了挑选 collada 对象，我需要在 3D 对象上方进行挑选。由于拾取适用于立方体，我无法弄清楚为什么它不适用于 collada 对象（从 SketchUp 导出）。有没有人有一个很好的例子，可以加载一个collada模型并选择单个对象？提前致谢。

# sql-server - 日期之间的差异 - sql server

> ID：12588720
> 
> 赞同：2
> 
> 时间：2012-09-25T18:11:00.880
> 
> 标签：sql-server, datetime, datediff, sql-date-functions

我需要在两个日期之间得到以下结果：

date_start = 01/01/2010
date_end = 10/21/2012

结果：1年9个月20天。

我尝试了下面的代码，但它不起作用。它有时会返回负日期：

```
SELECT CAST(DATEDIFF(yy, date_start, date_end) AS varchar(4)) +' year '+
       CAST(DATEDIFF(mm, DATEADD(yy, DATEDIFF(yy,date_start , date_end), date_start), date_end) AS varchar(2)) +' month '+
       CAST(DATEDIFF(dd, DATEADD(mm, DATEDIFF(mm, DATEADD(yy, DATEDIFF(yy, date_start, date_end), date_start), date_end), DATEADD(yy, DATEDIFF(yy, date_start, date_end), date_start)), date_end) AS varchar(2)) +' day' AS result 
```

谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T18:26:56.063

如果闰年或与之相邻，这*可能*无法正确处理闰年，但除此之外，这应该非常接近：`@s``@e`

```
DECLARE @s DATE, @e DATE

SELECT @s = '20100101', @e = '20121021';

SELECT y + ' year(s), ' + m + ' month(s) and ' + d + ' day(s).'
FROM
(
  SELECT 
    RTRIM(y), 
    RTRIM(m - CASE WHEN pd < 0 THEN 1 ELSE 0 END),
    RTRIM(CASE WHEN pd < 0 THEN nd ELSE pd END)
  FROM 
  (
    SELECT
      DATEDIFF(MONTH, @s, @e) / 12, 
      DATEDIFF(MONTH, @s, @e) % 12,
      DATEDIFF(DAY, @s, DATEADD(MONTH, -DATEDIFF(MONTH, @s, @e), @e)),
      DATEDIFF(DAY, @s, DATEADD(MONTH, 1-DATEDIFF(MONTH, @s, @e), @e))
  ) AS x (y, m, pd, nd)
) AS y (y, m, d); 
```

输出：

```
2 year(s), 9 month(s) and 20 day(s). 
```

如果在闰年考虑额外的一天是至关重要的，我相信可以调整它来处理这个问题。尽管通过最少的测试，我无法看到它会中断的任何情况（它只是觉得它不应该工作）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T18:22:04.237

试试这个

```
DECLARE @months decimal (5,2)
SELECT @months = DATEDIFF(month, '01/22/2010','10/21/2012')/12.0

;WITH CTE AS 
(
SELECT FLOOR(@months) AS years,(@months-FLOOR(@months)) * 12 AS months
)
SELECT years, CAST(months as int) months, 
case when day('01/22/2010') > day('10/21/2012')  
then day('10/21/2012') +  
datediff(day,'01/22/2010',dateadd(month,datediff(month,0,'01/22/2010')+1,0))- 1
ELSE day('10/21/2012')-day('01/22/2010') end
from cte 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-21T11:05:49.870

您可以使用函数获取日期差异也可以看到这个 [http://atikpassion.blogspot.com/2014/01/get-difference-between-two-dates-in.html](http://atikpassion.blogspot.com/2014/01/get-difference-between-two-dates-in.html)

# c++ - Linux 上 C/C++ 中的简单原始套接字服务器

> ID：12588727
> 
> 赞同：5
> 
> 时间：2012-09-25T18:11:36.130
> 
> 标签：c++, c, linux, sockets, raw-sockets

我正在尝试使用原始套接字构建以太网。我不能使用 TCP/IP、UDP 或任何其他协议。

这是因为它将与非常简单的硬件进行通信，这些硬件没有资源来处理所有不同的协议层。我的网络将由一台主机组成，它通过以太网交换机与多个硬件进行通信。在这一点上，我基本上只是想向每个硬件发送简单的数据包，并建立一个我可以扩展的简单服务器。我的系统运行 Linux，服务器需要用 C 或 C++ 编写。

我一直在尝试查找有关如何使用原始套接字的信息，但每个人总是说不要使用它们并且没有提供任何信息。我有很强的编程背景，但没有网络经验。任何人都可以提供有关如何开始或在哪里可以找到相关教程的任何信息吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T18:13:51.167

网上有各种教程，比较容易找到。您可以从一个这样的教程开始：[Sockets Tutorial](http://www.linuxhowtos.org/C_C++/socket.htm)。它包括一个 C 语言的简单客户端/服务器示例（尽管该示例使用 TCP 协议）。

更多结果：

[使用 C 在 Linux 上进行原始套接字编程](http://www.binarytides.com/raw-sockets-c-code-on-linux/)

[LINUX SOCKET 第 17 部分高级 TCP/IP - 原始套接字程序示例](http://www.tenouk.com/Module43a.html)

[这是关于 C 中原始套接字编程的谷歌搜索结果的完整列表](https://www.google.com/search?q=raw+sockets+linus&sugexp=chrome,mod=9&sourceid=chrome&ie=UTF-8#hl=en&biw=1782&bih=779&sclient=psy-ab&q=raw+sockets+Linux+C&oq=raw+sockets+Linux+C&gs_l=serp.3..0i30j0i8i30.4339.8147.0.8362.12.12.0.0.0.0.101.1096.10j2.12.0.les%3Bcqn%2Crate_low%3D0-035%2Crate_high%3D0-035%2Cmin_length%3D2%2Ccconf%3D1-2%2Csecond_pass%3Dfalse%2Cnum_suggestions%3D1%2Cignore_bad_origquery%3Dtrue..0.0...1c.1.9qREijsQxCc&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&fp=9ab7bdb26321ca5d)

# web-services - 在 Web 服务应用程序中，动词导向仍然有用吗？

> ID：12588728
> 
> 赞同：1
> 
> 时间：2012-09-25T18:11:40.383
> 
> 标签：web-services, rest, asp.net-mvc-4, soa

感谢您的关注！

## 背景

我正在构建一个严格的机器对机器网络服务（restful）应用程序。应用程序将侦听请求、检索数据、构造对象、序列化为 JSON 并返回 JSON 对象。

此应用程序最终将被其他 Web 应用程序以及 iOS 应用程序、Android 应用程序甚至桌面应用程序使用。

我继承的现有代码根据HTTP 动词（GET、POST 等）调用服务的方式*进行了区分。*

## 问题

在这个机器对机器通信的时代，HTTP 动词是否不再重要？事实上，它是否会限制未来采用服务 API 以基于 HTTP 动词的代码？

## 更新

`fmgp`为“为什么”使用这些动词提供了一个明确的答案，但我觉得我应该澄清我的担忧：

其他平台，例如 iOS 或 Android（例如）是否能够发起基于 HTTP 动词的调用，例如`GET`and `POST`？如果答案是“否”，那么我认为我们应该远离依赖这些动词，而是将所需的操作作为参数构建到请求 URL 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T18:26:26.157

在 RestFul 应用程序中，您有一个动词 foreach CRUD 操作：

*   创建：发布
*   阅读：获取
*   更新：放
*   删除：删除

根据这一理念，所有声称“宁静”的事物都会以同样的方式运作。

这没有什么标准，只是一种干净、设计良好、易于理解的编程风格。当然，只要您的客户端和服务器可以处理它，您可能希望只使用 GET 和一些查询参数来完成所有操作。

# google-analytics - call_api 无法使用正确的凭据

> ID：12588729
> 
> 赞同：-1
> 
> 时间：2012-09-25T18:11:48.057
> 
> 标签：google-analytics, google-analytics-api

我正在使用这一行： call_api($_SESSION['sessionToken'],"https://www.google.com/analytics/feeds/accounts/default");

获取我的 Google Analytics 的详细信息，但它没有返回任何内容。当我尝试打开： [https](https://www.google.com/analytics/feeds/accounts/default) ://www.google.com/analytics/feeds/accounts/default时，它返回一个 404 页面，我在哪里可以看到 Google Analytics API 的任何更改？因为似乎他们最近的变化导致了这个问题。

有人能向我解释一下吗？还是因为谷歌分析的一些变化？

谢谢你 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T20:33:02.387

我不确定你的代码有多少年了。它似乎正在使用 API 的 2.3 版

当前的工作版本是 2.4 和 3。版本 2.3 不再工作。

这是 API 最新版本的文档。

[https://developers.google.com/analytics/devguides/config/mgmt/v3/](https://developers.google.com/analytics/devguides/config/mgmt/v3/)

这是管理 API 的变更日志。

[https://developers.google.com/analytics/community/mgmt_changelog](https://developers.google.com/analytics/community/mgmt_changelog)

这是从 2.3 迁移到 2.4 的指南。但是我们鼓励您迁移到 3.0，某些功能仅适用于 3.0

[https://developers.google.com/analytics/resources/articles/gdata-migration-guide](https://developers.google.com/analytics/resources/articles/gdata-migration-guide)

[https://developers.google.com/analytics/devguides/config/mgmt/v2/#whatsnew](https://developers.google.com/analytics/devguides/config/mgmt/v2/#whatsnew)

# javascript - AJAX：使用多个表单条目删除多个服务器文件

> ID：12588735
> 
> 赞同：0
> 
> 时间：2012-09-25T18:12:01.853
> 
> 标签：javascript, ajax

我有一个包含可变数量文本框的表单，其中包含一个 id。当用户退出页面时，服务器上的文件会被 python 脚本 (delete.py) 删除。要删除的文件的文件名包含 id，因此必须将 id 传递给 python 脚本。如果我的表单只有一个 id，那么一切正常，服务器上的文件将被删除。如果我的表单有多个 id 字段，则不会删除任何文件。如果我使用 firebug 单步执行代码，则无论 id 字段的数量如何，文件都会被删除。我不明白发生了什么事。任何帮助将不胜感激。我的 onbeforeunload 方法如下。

```
function deleteFiles()
  {
  var xmlhttp;

  if (window.XMLHttpRequest)
  {
    xmlhttp=new XMLHttpRequest();
  }
  else
  {
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }  

  allElements = document.getElementsByName("id");
  for (x=0; x < allElements.length; x++)
  {
    xmlhttp.open("GET","/cgi-bin/delete.py?id=" + allElements[x].value,true);
    xmlhttp.send();
   }  

window.onbeforeunload = deleteFiles; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T18:43:44.317

听起来请求发送得太快了。尝试添加
xmlhttp.async = false;

```
function deleteFiles()
  {
  var xmlhttp;

  if (window.XMLHttpRequest)
  {
    xmlhttp=new XMLHttpRequest();

  }
  else
  {
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }  

  allElements = document.getElementsByName("id");

  xmlhttp.async = false;

  for (x=0; x < allElements.length; x++)
  {
    xmlhttp.open("GET","/cgi-bin/delete.py?id=" + allElements[x].value,true);

    xmlhttp.send();
   }  

window.onbeforeunload = deleteFiles; 
```

让我知道你的发现

# python - 在python中将日期转换为自然语言？

> ID：12588736
> 
> 赞同：1
> 
> 时间：2012-09-25T18:12:12.127
> 
> 标签：python, django

> **可能重复：**
> [如何在 Python 中以常规格式打印日期？](https://stackoverflow.com/questions/311627/how-to-print-date-in-a-regular-format-in-python)

我想知道如何将以下日期转换为自然语言，包括 python 中的时区？

输入：

```
"'2012-09-27T02:00:00Z'" 
```

预期输出：

```
Wednesday, September 26 of 2012 Mountain Time 
```

提前致谢！

注意编辑：到目前为止，我尝试了[django humanize](https://docs.djangoproject.com/en/dev/ref/contrib/humanize/)，尽管它不能很好地处理复杂的日期时间字符串。

**解决方案：**

感谢您所提供的所有信息。我最终解析了原始字符串并像这样使用 pitz 和 strftime ：

```
 my_date = '2012-09-27T02:00:00Z'
    utc_date_object = datetime(int(my_date[0:4]), int(my_date[5:7]), int(my_date[8:10]),int(my_date[11:13]),int(my_date[14:16]),int(my_date[17:19]),0,pytz.utc)
    mt_date_object = utc_date_object.replace(tzinfo=pytz.utc).astimezone(pytz.timezone('US/Mountain'))
    natural_date = mt_date_object.strftime("%A, %B %d of %Y") 
```

输出：

```
'Wednesday, September 26 of 2012' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T18:32:54.960

[Babel 项目](http://babel.edgewall.org/)提供了一个功能齐全的日期[和时间本地化库](http://babel.edgewall.org/wiki/Documentation/dates.html)。

您还需要该[`iso8601`模块](https://pypi.python.org/pypi/iso8601/)正确解析带有时区的日期时间字符串。

它要么根据语言环境格式化日期和时间：

```
>>> from datetime import date, datetime, time
>>> from babel.dates import format_date, format_datetime, format_time
>>> d = date(2007, 4, 1)
>>> format_date(d, locale='en')
u'Apr 1, 2007'
>>> format_date(d, locale='de_DE')
u'01.04.2007' 
```

或者它让您详细指定格式。这包括格式化时区。

将解析器和格式化程序放在一起：

```
>>> dt = iso8601.parse_date("2012-08-25T02:00:00Z")
>>> format_date(dt, "MMMM dd, yyyy", locale='en') + ' at ' + format_time(dt, "HH:mm V")
u'August 25, 2012 at 02:00 World (GMT) Time' 
```

序数（'1st'、'2nd' 等）在国际上有点难做，Babel 使用的[LDML 格式](http://unicode.org/reports/tr35/#Date_Format_Patterns)不包含这些的模式。

如果您的日期格式中*必须*有一个序数（可能是因为您只希望以英语输出），您必须自己创建它们：

```
>>> suffix = ('st' if dt.day in [1,21,31]
...                else 'nd' if dt.day in [2, 22] 
...                else 'rd' if dt.day in [3, 23]
...                else 'th')
>>> u'{date}{suffix}, {year} at {time}'.format(
...     date=format_date(dt, "MMMM dd", locale='en'),
...     suffix=suffix, year=dt.year,
...     time=format_time(dt, "HH:mm V"))
u'August 25th, 2012 at 02:00 World (GMT) Time' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T18:19:27.000

您可以使用该`strftime()`方法获取日期的自定义字符串表示形式。strftime 接受一个字符串模式，解释你想如何格式化你的日期。

例如：

```
print today.strftime('We are the %d, %h %Y')
'We are the 22, Nov 2008' 
```

“%”后面的所有字母代表某种格式：

*   %d 是天数
*   %m 是月份数
*   %y 是年份的最后两位数
*   %Y 是全年

[https://stackoverflow.com/a/311655](https://stackoverflow.com/a/311655)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T18:22:18.853

不是 100% 回答您的问题，但此代码可能会帮助您开始格式化时间和日期：

```
import datetime
print datetime.datetime.now().strftime('%d/%m/%Y %H:%M:%S') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T18:27:28.783

```
def myFormat(dtime):
    if dtime.day in [1,21,31] : ending = "st"
    elif dtime.day in [2,22] : ending = "nd" 
    elif dtime.day in [3,23] : ending = "rd" 
    else : ending = "th"

    return dtime.strftime("%B %d"+ ending + " of %Y") 
```

# ios - ios上多人游戏的实时消息传递

> ID：12588737
> 
> 赞同：3
> 
> 时间：2012-09-25T18:12:12.250
> 
> 标签：ios, real-time, messaging, multiplayer

构建一个多人 iOS 游戏，玩家可以互相竞争。游戏的本质是同步的。基本上，玩家要么通过脸书、电子邮件等相互邀请，然后开始游戏。

我们讨论促进玩家之间实时通信（发送事件等）的最佳策略是什么。来自网络开发，我们使用彗星和长轮询，效果很好。但是，目前尚不清楚在 iOS 上实现这一目标的最佳方式是什么。

似乎 APN（Apple Push Notifications）不适合我们的情况，原因有两个：据我们了解，延迟可能非常显着，最多几秒钟。此外，使用 APN 需要用户授权通知。如果用户不授权，则无法玩游戏。

此外，我们了解 Apple 的 Game Kit（Game Center）在我们的案例中可能很有价值，但尚不清楚它如何通过 facebook 等与邀请进行交互。此外，不清楚我们是否需要与 Apple 的 Game Center 上床以及如何使用它会影响用户体验。

非常感谢您提供有关此问题的任何指导以及您可能想到的其他选项。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T10:48:18.247

在您阅读其余内容之前，先声明一下：我在 Realtime.co 工作，但我相信我可以在这里提供帮助，所以我不会试图“推销”。

如果您需要实时更新，可以查看 Realtime ( [www.realtime.co](http://www.realtime.co) )。它基本上是一组工具，供开发人员在他们的项目中使用实时技术。它使用 websockets，但如果您使用的是浏览器（这不是您的情况，但总是很高兴知道），它会回退到用户浏览器支持的任何内容（例如长轮询）。

在 Realtime 之后，您有一个一对一/一对多/多对多的消息传递系统，可以将您的消息传输给用户或从用户传出。

您也可以在项目中使用 iOS API。您可以在此处下载：[http](http://www.xrtml.org/downloads_62.html#ios) ://www.xrtml.org/downloads_62.html#ios并在此处查看文档：http: [//docs.xrtml.org/getting_started/hello_message.html#ios](http://docs.xrtml.org/getting_started/hello_message.html#ios)。

还有一个优点是实时框架实际上是跨平台的。这意味着如果您决定将游戏扩展到其他平台，您甚至可以让您的 iOS 玩家与使用 Android、Windows Phone、HTML5、Flash 等的玩家交流。

我希望这会有所帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-21T09:19:37.617

我将就这个问题提供一些见解。

至少对于 iOS，APN 不应该用于同步通信，你永远不会有双向通信（基本上 Apple APN 服务器正在将信息推送到设备）。

您可能应该使用 C 套接字来打开隧道（取决于您的游戏是否是实时的）。

使用 Apple Framework GameKit 非常棒！但可能需要一些时间来了解所有功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T18:17:21.433

查看格力 [https://developer.gree.net/en/](https://developer.gree.net/en/)

解析： [https ://www.parse.com/](https://www.parse.com/)

麻雀： http: [//gamua.com/sparrow/](http://gamua.com/sparrow/)

您谈论的有几件事，有游戏的加入/开始，然后是玩家之间的交流。它们不一定相关。

您可以使用游戏中心，同时使用另一个 facebook 框架，它们不是互斥的（但它会更有效。）

# apache - jboss 应用程序上下文根子域配置混淆

> ID：12588741
> 
> 赞同：1
> 
> 时间：2012-09-25T18:12:38.463
> 
> 标签：apache, jboss, apache2, jboss7.x, mod-jk

我在子域上有一个应用程序，我希望这样访问：

[http://sub.domain.com/myApp/some.jsp](http://sub.domain.com/myApp/some.jsp)

我已经尝试了各种配置选项并且我很接近，因为 JBoss 返回 404，但无法按预期加载。JBoss 7.1.1，apache2。

**jboss-web.xml：**

```
<jboss-web>
   <virtual-host>sub.domain.com</virtual-host>
   <context-root>/myApp</context-root>
</jboss-web> 
```

**jboss'standalone.xml：**

```
<virtual-server name="sub.domain.com" default-web-module="myApp">
    <alias name="sub.domain.com/myApp"/>
    <access-log prefix="myApp-" rotate="true">
        <directory path="server.log"/>
    </access-log>
</virtual-server> 
```

**阿帕奇配置：**

```
<VirtualHost *:80>
    ServerName sub.domain.com
    ServerAlias sub.domain.com
    JkMount /myApp jk
    JKMount /myApp/* jk
</VirtualHost> 
```

**工人属性：**

```
worker.list=jk
worker.jk.port=8009
worker.jk.host=localhost
worker.jk.type=ajp13
worker.jk.mount=/myApp/* 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T16:37:24.083

我得到了它！我以前做的太多了。这是它是如何完成的。

**jboss-web.xml：** 注释掉上面所有的设置。

**jboss'standalone.xml：** 删除了上面的虚拟服务器，用别名更新了默认主机。

```
<virtual-server name="default-host" enable-welcome-root="true">
    <alias name="localhost"/>
    <alias name="sub.domain.com"/>
</virtual-server> 
```

**阿帕奇配置：**

```
<VirtualHost *:80>
    JkMount /myApp/* jk
</VirtualHost> 
```

**工人属性：**

```
worker.list=jk
worker.jk.port=8009
worker.jk.host=localhost
worker.jk.type=ajp13 
```

好的！

# entity-framework - EF 的列名无效

> ID：12588742
> 
> 赞同：3
> 
> 时间：2012-09-25T18:12:46.153
> 
> 标签：entity-framework

我用一些额外的列修改了数据库中的表 UserProfile，然后修改了 UserProfile 类以反映它们：

```
[Table("UserProfile")]
public class UserProfile
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }
    public string UserName { get; set; }
    public string Firstname { get; set; }
    public string Surname { get; set; }
    public string School { get; set; }
} 
```

显然，它们是名字、姓氏和学校。出于某种原因，尽管当我尝试通过以下方式加载数据时，尽管注册操作将详细信息保存到所有 3 个新列中：

```
var context = new UsersContext();
var user = context.UserProfiles.First(n => n.UserName == model.UserName); 
```

它说 School 是无效的 ColumnName。我检查了它在类和表中都是一个字符串，所以有点困惑如何调试，求助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T18:44:09.813

（继续对OP的评论）

您应该考虑使用 EF 迁移框架，而不是手动执行此操作 - 有许多好处，并且在内部 EF 功能发生变化的情况下更具前瞻性。

有关迁移的更多信息，请参见[此处](http://msdn.microsoft.com/en-US/data/jj591621)

# iphone - 如何从 iPhone 中的应用程序图标中删除徽章通知符号

> ID：12588746
> 
> 赞同：5
> 
> 时间：2012-09-25T18:12:53.820
> 
> 标签：iphone, objective-c, icons, apple-push-notifications

我在删除徽章编号时遇到问题，该编号在没有待处理通知的应用程序图标通知符号上始终显示红色“1”。

我该如何解决？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-25T18:17:39.607

在应用程序生命周期中使用以下`applicationDidBecomeActive`任何方法..

```
[UIApplication sharedApplication].applicationIconBadgeNumber = 0; 
```

当它设置为零时，它不应该显示任何徽章。

# amazon-s3 - Flume HDFS Sink 的 S3 路径错误

> ID：12588748
> 
> 赞同：2
> 
> 时间：2012-09-25T18:13:11.400
> 
> 标签：amazon-s3, flume

我有一个 Flume 整合器，它将每个条目写入 AWS 上的 S3 存储桶。

问题出在目录路径上。

事件应该写在 /flume/events/%y-%m-%d/%H%M，但它们在 //flume/events/%y-%m-%d/%H% M。

似乎 Flume 在开头附加了一个“/”。

对这个问题有什么想法吗？我的路径配置有问题吗？

```
master.sources = source1
master.sinks = sink1
master.channels = channel1

master.sources.source1.type = netcat
# master.sources.source1.type = avro
master.sources.source1.bind = 0.0.0.0
master.sources.source1.port = 4555

master.sources.source1.interceptors = inter1
master.sources.source1.interceptors.inter1.type = timestamp

master.sinks.sink1.type = hdfs
master.sinks.sink1.hdfs.path = s3://KEY:SECRET@BUCKET/flume/events/%y-%m-%d/%H%M
master.sinks.sink1.hdfs.filePrefix = event
master.sinks.sink1.hdfs.round = true
master.sinks.sink1.hdfs.roundValue = 5
master.sinks.sink1.hdfs.roundUnit = minute

master.channels.channel1.type = memory
master.channels.channel1.capacity = 1000
master.channels.channel1.transactionCapactiy = 100

master.sources.source1.channels = channel1
master.sinks.sink1.channel = channel1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T20:35:32.993

Flume NG HDFS 接收器没有为 S3 支持实现任何特殊功能。Hadoop 有一些对 S3 的内置支持，但我不知道有谁在积极致力于它。据我所知，它有些过时，并且在失败时可能会出现一些耐用性问题。

也就是说，我知道有人使用它，因为它“足够好”。

您是说“//xyz”（带有多个相邻斜杠）是 S3 上的有效路径名吗？您可能知道，大多数 Unix 会折叠相邻的斜线。

# jquery-ui - JQuery UI - Draggable-Droppable 行为

> ID：12588750
> 
> 赞同：0
> 
> 时间：2012-09-25T18:13:15.583
> 
> 标签：jquery-ui, drag-and-drop

我已经使用 JQuery UI 实现了拖放功能 - 下面提供了我当前的代码：

我的 JavaScript 函数从 PHP 接收 JSON 数组，然后使用循环创建可拖动元素：

```
<script type="text/javascript">
    function init() {
        var items = <?php echo $result_j;?>; //items is an one dimensional array

        for ( var i=0; i<<?php echo $total_rows_j;?>; i++ ) {      
            $('<div>' + items[i] + '</div>').data( 'item_name', items[i] ).attr( 'class', 'snk_button' ).appendTo( '#drag' );
         } 
```

使用“items”数组，我创建了几个 div 元素（代码上方），然后我将它们变成可拖动元素（代码如下）。

```
 $(".snk_button").draggable( {
            containment: '#drag_section',//Div #drag_section contains the Div #drag 
            stack: '#drag div',
            cursor: 'move',
            revert: true
         } ) 
```

以下是我的可删除代码：

```
$( "#dropp" ).droppable(
   drop: handleDrop
});

function handleDrop( event, ui ) {
    ui.draggable.draggable( 'option', 'revert', false );
} // End function handleDrop 
```

到目前为止，一切都很好，可拖动项目将自身附加到可放置 div。

现在，我想稍微调整一下这种行为：

1.  我希望可拖动项目从左上角开始（它们将向左浮动）在可放置 div 中“自动”排列（在此示例中称为“#dropp”）。目前，即使 '#dropp' div 设置了 'float:left' 属性，这种情况也不会发生。那么，当拖放到“#dropp”上时，我应该怎么做才能让可拖动项目自行排列？
2.  当我从可拖放的 div 中取出一个可拖动的项目（'#dropp'）时，我希望它返回到最初包含可拖动项目的 div（在本例中为'#drag'）。

你能帮助实现这两种行为吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T11:24:35.120

在我自己尝试这个和一些研发近 5-6 小时后，我已经能够解决我的两个问题。为了其他可能面临相同问题的人的利益，以下是实现上述行为所需的附加代码：

```
$( "#dropp" ).droppable({
    accept: '#drag div',
    drop: function(event, ui)
    {
    $("div#dropp").append (ui.draggable); 
    $(ui.draggable).css ({ position:"relative", top:"0px", left:"0px" })
               .addClass("moved");
    } // End function for handling drop on '#dropp'
}); //End $( "#dropp" ).droppable 
```

这是新增的：

```
$( "#drag" ).droppable({
accept : ".moved",
drop : function (event, ui)
{
    $("div#drag").append (ui.draggable);
    $(ui.draggable).css ({ position:"relative", top:"0px", left:"0px" });

} // End function for handling drop on '#drag'
}); // End $( "#drag" ).droppable 
```

这就是实现上述行为所必需的。希望有人发现这些信息有用:-)

# objective-c - 如何更改 NSTableHeaderCell 的高度？

> ID：12588753
> 
> 赞同：1
> 
> 时间：2012-09-25T18:13:30.180
> 
> 标签：objective-c, cocoa

我正在制作一个具有自定义表格标题的表格视图。所以，我真的很想改变标题的高度。这并不比我想象的容易。我怎样才能取得成功？

另外，我尝试创建一个 NSTableHeaderCell 的子类，并重写 drawInteriorWithFrame:inView: 方法来绘制任何东西。如何更改要传递给方法的框架的矩形。如果我控制了这个矩形，我想我会达到我的目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:37:46.040

您可以通过设置标题的框架来完成此操作。

```
 NSTableHeaderView *tableHeaderView = [[NSTableHeaderView alloc] initWithFrame:NSMakeRect(0, 0, 120, 60)];
 [_tableView setHeaderView:tableHeaderView]; 
```

# excel - 粘贴公式以仅将 1 添加到公式

> ID：12588758
> 
> 赞同：0
> 
> 时间：2012-09-25T18:13:47.283
> 
> 标签：excel, excel-2007

嗨，我有一列公式，我希望能够将它们复制并粘贴到我的工作表中的任何位置，并且所有公式只会增加 1。

```
=B761
=B796
=B831 and so on. 
```

我想复制它并能够将其粘贴到任何地方并得到下面的结果。

```
=B762
=B797
=B832 and so on. 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:41:09.260

尝试这个：

1.  复制范围
2.  在顶部单元格下方粘贴一个单元格（如果您的范围是`C1:C10`，请复制`C1:C10`，然后单击`C2`并粘贴）
3.  选择新粘贴的范围，右键->剪切（选择`C2:C11`，右键->剪切）
4.  将单元格向上粘贴 1 个单元格（选择`C1`，右键单击 -> 粘贴（不插入剪切单元格））

**编辑**：这仅适用于连续的单元格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T18:46:37.617

不知道你会喜欢这个！（但它与@joseph4tw 的“解决方案”非常相似）。正如他所建议的那样，将范围复制到下一行（因此相对公式会自动调整行）。用任何内容替换 Column letter/s 的任何内容。再次复制到需要的地方并替换`=`为`=B`. 删除第一个副本。

# gwt - CaptionPanel -> CaptionLayoutPanel

> ID：12588759
> 
> 赞同：1
> 
> 时间：2012-09-25T18:13:48.220
> 
> 标签：gwt

我想在布局面板 (DockLayoutPanel) 中使用 CaptionPanel。

问题是没有 CaptionLayoutPanel（如 SimpleLayoutPanel）实现，因此如果我想在布局面板中使用此面板，所有子项都会丢失调整大小事件，因为“调整大小链”已通过 CaptionPanel 中断。

有什么解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T19:19:30.147

最简单的解决方案是不使用 CaptionPanel。

如果您希望孩子响应调整大小事件，请在 LayoutPanel 中添加一个包含标题（标签）的层，以及另一个包含您想要响应调整大小的子小部件的层。您可以以任何您喜欢的方式设置这些小部件的样式（例如，标签可以看起来像带有一些背景和圆角的选项卡或面板等）

另一种解决方案是将您的 CaptionPanel 设置为 Roddy of the Frozen Peas 建议的样式，然后将 ResizeHandler 添加到您的窗口。触发时，您可以将子小部件的大小设置为

```
myChildWidget.setSize(myCaptionPanel.getOffsetWidth() + "px", myCaptionPanel.getOffsetHeight() + "px"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T14:18:08.880

扩展`CaptionPanel`和实现`ProvidesResize`和`RequiresResize`接口

```
CustomCaptionPanel extends CaptionPanel implements RequiresResize,ProvidesResize {

    public void onResize() {
        if (getContentWidget() instanceof RequiresResize) { 
            ((RequiresResize) getContentWidget()).onResize(); 
    }
} 
```

# android - 嵌入列表的可滚动布局

> ID：12588762
> 
> 赞同：0
> 
> 时间：2012-09-25T18:13:53.140
> 
> 标签：android, listview, scrollview

我正在尝试创建一个带有嵌入式列表的可滚动布局，类似于[此处](http://cf.scdn.co/u/wp/now-playing3.jpg)显示的适用于 Android 的 Spotify 应用程序（顶部有一个图像，后跟一个列表，整个布局滚动）。我知道 Android 开发人员指南规定您不应该将 ListView 放在 ScrollView 布局中，所以我想知道这是如何完成的。我是否需要使用布局和 TextViews 手动制作每个列表项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:18:10.790

是的，因为列表视图具有默认的可滚动功能。如果您在滚动视图中放置一个列表视图。列表滚动会妨碍。

为了避免这种情况，列表视图具有页眉和页脚视图的概念。

您可以在列表中添加 n 个页眉和页脚。

下面是一个示例代码片段，如何通过向其中添加任何 xml 布局来添加页眉/页脚

```
LayoutInflater inflater = activity.getLayoutInflater();
LinearLayout listFooterView = (LinearLayout)inflater.inflate(
            R.layout.footer_layout, null);

list.addFooterView(listFooterView);

LinearLayout listHeaderView = (LinearLayout)inflater.inflate(
                R.layout.header_layout, null);

    list.addHeaderView(listHeaderView); 
```

# node.js - 在 nodejs 中使用 AJAX

> ID：12588764
> 
> 赞同：0
> 
> 时间：2012-09-25T18:13:57.050
> 
> 标签：node.js, jquery

我正在运行带有 nginx 和节点的 linux 服务器。我目前正在开发一个小型网络应用程序，并且我正在使用 nodejs 来提供文件，因为它只有一个 html 页面和一些 javascript 文件。

我遇到的问题是在我的一个 javascript 文件中，我对 $.getScript() 进行了多次调用，如果我没看错的话，这只是一个简写的 ajax 调用。

Nodejs 服务器似乎每次都对此感到窒息。

是否有我需要使用的依赖项或我可以安装的模块来帮助解决这个问题？或者也许这只是我没有考虑的特定要求？

这可能是一个愚蠢的问题，但我仍然是一个菜鸟。:P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T19:47:02.673

$.getScript() 将尝试执行 HTTP GET 以从网络服务器获取脚本。如果您使用 Express，请确保将其配置为静态提供 Javascript 文件。例如，如果您尝试使用 $.getScript("dojo/dojo.js") 来加载脚本 /var/www/dojo/dojo.js，请确保您的 nodejs 代码中有如下内容，

```
var app = express.createServer();

app.configure(function () { 
     app.use(app.router);
     app.use(express.static('/var/log/www'));
}); 
```

# css - 视网膜显示的图像大小

> ID：12588766
> 
> 赞同：3
> 
> 时间：2012-09-25T18:14:00.013
> 
> 标签：css, media-queries, retina-display

我正在阅读视网膜显示器的图像质量，我看到我可以为 -webkit-min-device-pixel-ratio: 2 加载更高质量的图像。但我的问题是要高多少？假设我有一个 800x600 72dpi 的常规图像 - 视网膜图像是什么？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T18:17:47.903

尺寸加倍。所以在你的例子中，它将是 1600*1200。

# actionscript-3 - Flash 中的无缝声音循环

> ID：12588769
> 
> 赞同：0
> 
> 时间：2012-09-25T18:14:08.100
> 
> 标签：actionscript-3, flash, audio

我做了一个函数，它无限循环播放 mp3 直到我停止它：

```
private function loopSound(a:Class, lead:Number, trail:Number) {
            var b = new a();
            var sChannel = new SoundChannel();
            var timer:Timer = new Timer(b.length - lead - trail, 1);
            sChannel = b.play(lead);
            timer.addEventListener(TimerEvent.TIMER_COMPLETE, function r(e:TimerEvent) { loopSound(a, lead, trail); } );
            timer.start();
        } 
```

这个函数的问题是它不能正确循环。虽然我的计算是正确的（在我看来），但 flash 并没有正确计算位置。知道如何实现完美的 mp3 循环吗？

*   **领先**=*以毫秒为单位开始的间隙*（在我的情况下为 27.375 毫秒）
*   **trail** =*以毫秒为单位的最后间隙*（在我的情况下为 20.278 毫秒）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T18:47:27.473

使用 TimerEvent 循环将不够准确，因为在 Flash Player 中触发事件的方式。

播放无缝“无限”循环的最简单方法是：

1.  将 .wav 格式的声音完美地从开头和结尾的静音中剔除
2.  将其导入到 Flash 的库中并将其导出为 ActionScript（为 mp3 以减少文件大小）
3.  只需创建声音的新实例并使用 Sound.play() 播放它，并指定循环多少次作为第二个参数（对于大多数用途来说，一个非常大的整数几乎使它“无限”）。

还有可能感兴趣的更强大的解决方案： [Prefered method for looping sound flash as3](https://stackoverflow.com/questions/1227442/prefered-method-for-looping-sound-flash-as3)

# css - GWT 教程正文填充

> ID：12588772
> 
> 赞同：1
> 
> 时间：2012-09-25T18:14:20.443
> 
> 标签：css, gwt, padding, document-body

GWT 教程 - StockWatcher。

我正在覆盖 StockWatcher.css：

```
body {
    padding: 10px;
} 
```

但至少在左侧没有应用填充，并且整个框架与左侧齐平。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:51:31.237

GWT 中的某些面板使用绝对定位。对作为这些面板的直接子级的小部件应用填充将不起作用。在这种情况下，您使用，例如，

```
myLayoutPanel.setWidgetLeftRight(myWidget, 10, Unit.PX, 10, Unit.PX); 
```

您可以将填充和边距应用于其父级不对其子级使用绝对定位的任何小部件（例如 FlowPanel 或 HTMLPanel 内的小部件）。

# spring - 使用 spring 3.0.3 向 spring social 添加多个连接工厂的问题

> ID：12588774
> 
> 赞同：0
> 
> 时间：2012-09-25T18:14:22.847
> 
> 标签：spring, spring-social

如果我放置了多个连接工厂，我的 spring 社交配置会出现以下异常。

```
 org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'connectionFactoryLocator' defined in ServletContext resource [/WEB-INF/social-config.xml]: Error setting propert
y values; nested exception is org.springframework.beans.PropertyBatchUpdateException; nested PropertyAccessExceptions (1) are:
PropertyAccessException 1: org.springframework.beans.MethodInvocationException: Property 'connectionFactories' threw exception; nested exception is java.lang.NullPointerException
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1353)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1076)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:574)
        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
        at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:276)
        at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:197)
        at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
        at org.eclipse.jetty.server.handler.ContextHandler.startContext(ContextHandler.java:641)
        at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:228)
        at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1181)
        at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:584)
        at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:496)
        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:55)
        at org.eclipse.jetty.deploy.bindings.StandardStarter.processBinding(StandardStarter.java:36)
        at org.eclipse.jetty.deploy.AppLifeCycle.runBindings(AppLifeCycle.java:180)
        at org.eclipse.jetty.deploy.DeploymentManager.requestAppGoal(DeploymentManager.java:481)
        at org.eclipse.jetty.deploy.DeploymentManager.addApp(DeploymentManager.java:137)
        at org.eclipse.jetty.deploy.providers.ScanningAppProvider.fileAdded(ScanningAppProvider.java:137)
        at org.eclipse.jetty.deploy.providers.ScanningAppProvider$1.fileAdded(ScanningAppProvider.java:50)
        at org.eclipse.jetty.util.Scanner.reportAddition(Scanner.java:470)
        at org.eclipse.jetty.util.Scanner.reportDifferences(Scanner.java:382)
        at org.eclipse.jetty.util.Scanner.scan(Scanner.java:339)
        at org.eclipse.jetty.util.Scanner.start(Scanner.java:275)
        at org.eclipse.jetty.deploy.providers.ScanningAppProvider.doStart(ScanningAppProvider.java:114)
        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:55)
        at org.eclipse.jetty.deploy.DeploymentManager.startAppProvider(DeploymentManager.java:542)
        at org.eclipse.jetty.deploy.DeploymentManager.doStart(DeploymentManager.java:214)
        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:55)
        at org.eclipse.jetty.server.Server.doStart(Server.java:226)
        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:55)
        at org.eclipse.jetty.xml.XmlConfiguration$1.run(XmlConfiguration.java:1061)
        at java.security.AccessController.doPrivileged(Native Method)
        at org.eclipse.jetty.xml.XmlConfiguration.main(XmlConfiguration.java:994)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at org.eclipse.jetty.start.Main.invokeMain(Main.java:477)
        at org.eclipse.jetty.start.Main.start(Main.java:623)
        at org.eclipse.jetty.start.Main.parseCommandLine(Main.java:273)
        at org.eclipse.jetty.start.Main.main(Main.java:81)
Caused by: org.springframework.beans.PropertyBatchUpdateException; nested PropertyAccessExceptions (1) are:
PropertyAccessException 1: org.springframework.beans.MethodInvocationException: Property 'connectionFactories' threw exception; nested exception is java.lang.NullPointerException
        at org.springframework.beans.AbstractPropertyAccessor.setPropertyValues(AbstractPropertyAccessor.java:102)
        at org.springframework.beans.AbstractPropertyAccessor.setPropertyValues(AbstractPropertyAccessor.java:58)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1350)
        ... 47 more
2012-09-25 23:39:19.349:WARN::Failed startup of context o.e.j.w.WebAppContext{/loginapp,file:/C:/Users/Gaurav/AppData/Local/Temp/jetty-0.0.0.0-8081-SpringLoginApp-1.0-SNAPSHOT.war-_loginapp-any-/webap
p/},C:/Users/Gaurav/.m2/repository/com/myLogin/common/SpringLoginApp/1.0-SNAPSHOT/SpringLoginApp-1.0-SNAPSHOT.war
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'connectionFactoryLocator' defined in ServletContext resource [/WEB-INF/social-config.xml]: Error setting propert
y values; nested exception is org.springframework.beans.PropertyBatchUpdateException; nested PropertyAccessExceptions (1) are:|PropertyAccessException 1: org.springframework.beans.MethodInvocationExce
ption: Property 'connectionFactories' threw exception; nested exception is java.lang.NullPointerException
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1353)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1076)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:574)
        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
        at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:276)
        at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:197)
        at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
        at org.eclipse.jetty.server.handler.ContextHandler.startContext(ContextHandler.java:641)
        at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:228)
        at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1181)
        at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:584)
        at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:496)
        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:55)
        at org.eclipse.jetty.deploy.bindings.StandardStarter.processBinding(StandardStarter.java:36)
        at org.eclipse.jetty.deploy.AppLifeCycle.runBindings(AppLifeCycle.java:180)
        at org.eclipse.jetty.deploy.DeploymentManager.requestAppGoal(DeploymentManager.java:481)
        at org.eclipse.jetty.deploy.DeploymentManager.addApp(DeploymentManager.java:137)
        at org.eclipse.jetty.deploy.providers.ScanningAppProvider.fileAdded(ScanningAppProvider.java:137)
        at org.eclipse.jetty.deploy.providers.ScanningAppProvider$1.fileAdded(ScanningAppProvider.java:50)
        at org.eclipse.jetty.util.Scanner.reportAddition(Scanner.java:470)
        at org.eclipse.jetty.util.Scanner.reportDifferences(Scanner.java:382)
        at org.eclipse.jetty.util.Scanner.scan(Scanner.java:339)
        at org.eclipse.jetty.util.Scanner.start(Scanner.java:275)
        at org.eclipse.jetty.deploy.providers.ScanningAppProvider.doStart(ScanningAppProvider.java:114)
        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:55)
        at org.eclipse.jetty.deploy.DeploymentManager.startAppProvider(DeploymentManager.java:542)
        at org.eclipse.jetty.deploy.DeploymentManager.doStart(DeploymentManager.java:214)
        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:55)
        at org.eclipse.jetty.server.Server.doStart(Server.java:226)
        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:55)
        at org.eclipse.jetty.xml.XmlConfiguration$1.run(XmlConfiguration.java:1061)
        at java.security.AccessController.doPrivileged(Native Method)
        at org.eclipse.jetty.xml.XmlConfiguration.main(XmlConfiguration.java:994)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at org.eclipse.jetty.start.Main.invokeMain(Main.java:477)
        at org.eclipse.jetty.start.Main.start(Main.java:623)
        at org.eclipse.jetty.start.Main.parseCommandLine(Main.java:273)
        at org.eclipse.jetty.start.Main.main(Main.java:81)
Caused by:
org.springframework.beans.PropertyBatchUpdateException; nested PropertyAccessExceptions (1) are:|PropertyAccessException 1: org.springframework.beans.MethodInvocationException: Property 'connectionFac
tories' threw exception; nested exception is java.lang.NullPointerException
        at org.springframework.beans.AbstractPropertyAccessor.setPropertyValues(AbstractPropertyAccessor.java:102)
        at org.springframework.beans.AbstractPropertyAccessor.setPropertyValues(AbstractPropertyAccessor.java:58)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1350)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1076)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:574)
        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
        at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:276)
        at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:197)
        at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
        at org.eclipse.jetty.server.handler.ContextHandler.startContext(ContextHandler.java:641)
        at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:228)
        at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1181)
        at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:584)
        at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:496)
        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:55)
        at org.eclipse.jetty.deploy.bindings.StandardStarter.processBinding(StandardStarter.java:36)
        at org.eclipse.jetty.deploy.AppLifeCycle.runBindings(AppLifeCycle.java:180)
        at org.eclipse.jetty.deploy.DeploymentManager.requestAppGoal(DeploymentManager.java:481)
        at org.eclipse.jetty.deploy.DeploymentManager.addApp(DeploymentManager.java:137)
        at org.eclipse.jetty.deploy.providers.ScanningAppProvider.fileAdded(ScanningAppProvider.java:137)
        at org.eclipse.jetty.deploy.providers.ScanningAppProvider$1.fileAdded(ScanningAppProvider.java:50)
        at org.eclipse.jetty.util.Scanner.reportAddition(Scanner.java:470)
        at org.eclipse.jetty.util.Scanner.reportDifferences(Scanner.java:382)
        at org.eclipse.jetty.util.Scanner.scan(Scanner.java:339)
        at org.eclipse.jetty.util.Scanner.start(Scanner.java:275)
        at org.eclipse.jetty.deploy.providers.ScanningAppProvider.doStart(ScanningAppProvider.java:114)
        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:55)
        at org.eclipse.jetty.deploy.DeploymentManager.startAppProvider(DeploymentManager.java:542)
        at org.eclipse.jetty.deploy.DeploymentManager.doStart(DeploymentManager.java:214)
        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:55)
        at org.eclipse.jetty.server.Server.doStart(Server.java:226)
        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:55)
        at org.eclipse.jetty.xml.XmlConfiguration$1.run(XmlConfiguration.java:1061)
        at java.security.AccessController.doPrivileged(Native Method)
        at org.eclipse.jetty.xml.XmlConfiguration.main(XmlConfiguration.java:994)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at org.eclipse.jetty.start.Main.invokeMain(Main.java:477)
        at org.eclipse.jetty.start.Main.start(Main.java:623)
        at org.eclipse.jetty.start.Main.parseCommandLine(Main.java:273)
        at org.eclipse.jetty.start.Main.main(Main.java:81) 
```

我用于春季社交配置的 xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?> 
```

http://www.springframework.org/schema/beans/spring-beans.xsd [http://www.springframework.org/schema/context](http://www.springframework.org/schema/context) [http://www.springframework.org/schema/context/spring-context- 3.0.xsd](http://www.springframework.org/schema/context/spring-context-3.0.xsd) [http://www.springframework.org/schema/aop](http://www.springframework.org/schema/aop) http://www.springframework.org/schema/aop/spring-aop-2.0.xsd">

```
<bean id="twitterConnectionFactory"
    class="org.springframework.social.twitter.connect.TwitterConnectionFactory">
    <constructor-arg name="consumerKey" value="${twitter.app.consumerKey}" />
    <constructor-arg name="consumerSecret" value="${twitter.app.consumerSecret}" />
</bean>

<bean id="facebookConnectionFactory"
    class="org.springframework.social.facebook.connect.FacebookConnectionFactory">
    <constructor-arg name="clientId" value="${facebook.app.clientId}" />
    <constructor-arg name="clientSecret" value="${facebook.app.clientSecret}" />
</bean>
<bean id="connectionFactoryLocator"
    class="org.springframework.social.connect.support.ConnectionFactoryRegistry">
    <property name="connectionFactories">
        <list>
            <ref bean="twitterConnectionFactory" />
            <ref bean="facebookConnectionFactory" />
        </list>
    </property>
</bean>

<bean name="tokenBasedRememberMeServices"
    class="org.springframework.security.web.authentication.rememberme.TokenBasedRememberMeServices">
    <property name="userDetailsService" ref="userDetailService" />
    <property name="key" value="comsicomsa" />
</bean>
<bean id="usersConnectionRepository"
    class="com.myLogin.security.social.service.SocialUserServiceImpl" />
<bean id="connectionRepository" factory-method="createConnectionRepository"
    factory-bean="usersConnectionRepository" scope="request">
    <constructor-arg value="#{request.userPrincipal.name}" />
    <aop:scoped-proxy proxy-target-class="false" />
</bean> 
```

我的POM：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>com.myLogin.common</groupId>
<artifactId>SpringLoginApp</artifactId>
<packaging>war</packaging>
<version>1.0-SNAPSHOT</version>
<name>SpringLoginApp Maven Webapp</name>
<url>http://maven.apache.org</url>

<properties>
    <spring.version>3.0.3.RELEASE</spring.version>
    <jcouchdb.version>1.0.1-1</jcouchdb.version>
    <httpclient.version>4.2-alpha1</httpclient.version>
    <svenson.version>1.4.0</svenson.version>
    <junit.version>4.10</junit.version>
    <log4j.version>1.2.16</log4j.version>
    <freemarker.version>2.3.16</freemarker.version>
    <javax-validation.version>1.0.0.GA</javax-validation.version>
    <spring-social.version>1.0.0.RELEASE</spring-social.version>
    <spring-social-twitter.version>1.0.0.RELEASE</spring-social-twitter.version>
    <spring-social-facebook.version>1.0.0.RELEASE</spring-social-facebook.version>
</properties>

<dependencies>

    <!-- Spring 3 dependencies -->

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-web</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-jdbc</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <!-- Spring Security -->

    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-core</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-web</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-openid</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-config</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-test</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <!-- Spring Social Core -->
    <dependency>
        <groupId>org.springframework.social</groupId>
        <artifactId>spring-social-core</artifactId>
        <version>${spring-social.version}</version>
    </dependency>
    <!-- Spring Social Web (contains login/signup controllers) -->

    <dependency>
        <groupId>org.springframework.social</groupId>
        <artifactId>spring-social-web</artifactId>
        <version>${spring-social.version}</version>
    </dependency>
    <!-- Spring Social Twitter -->
    <dependency>
        <groupId>org.springframework.social</groupId>
        <artifactId>spring-social-twitter</artifactId>
        <version>${spring-social-twitter.version}</version>
    </dependency>
    <!-- Spring Social Facebook -->
    <dependency>
        <groupId>org.springframework.social</groupId>
        <artifactId>spring-social-facebook</artifactId>
        <version>${spring-social-facebook.version}</version>
    </dependency>

    <!-- Hibernate Validator -->
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-validator</artifactId>
        <version>4.2.0.Final</version>
    </dependency>

    <dependency>
        <groupId>javax.validation</groupId>
        <artifactId>validation-api</artifactId>
        <version>1.0.0.GA</version>
    </dependency>

    <dependency>
        <groupId>org.freemarker</groupId>
        <artifactId>freemarker</artifactId>
        <version>${freemarker.version}</version>
    </dependency>

    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>${junit.version}</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.apache.httpcomponents</groupId>
        <artifactId>httpclient</artifactId>
        <version>${httpclient.version}</version>
    </dependency>

    <dependency>
        <groupId>com.google.code.jcouchdb</groupId>
        <artifactId>jcouchdb</artifactId>
        <version>${jcouchdb.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-crypto</artifactId>
        <version>3.1.0.RELEASE</version>
    </dependency>

    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <version>1.6.1</version>
    </dependency>

    <!-- Java Mail API -->
    <dependency>
        <groupId>javax.mail</groupId>
        <artifactId>mail</artifactId>
        <version>1.4.3</version>
    </dependency>

    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.5</version>
    </dependency>

</dependencies>

<build>
    <finalName>SpringLoginApp</finalName>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.2</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T22:32:53.403

首先，根据[http://static.springsource.org/spring-social/docs/1.0.x/reference/html/overview.html#overview-dependencies](http://static.springsource.org/spring-social/docs/1.0.x/reference/html/overview.html#overview-dependencies)上的文档，Spring Social 仅支持 Spring 3.0.5 或更高。（并且当 Spring Social 1.1.0 发布时，它只会在 Spring 3.1 或更高版本上支持。）

我的第一个建议是*至少在*Spring 3.0.5 上试用（如果您愿意，最好在 3.0.7 甚至 3.1.2 上试用）。如果那不能解决您的问题，那么我可以更深入地研究一下。

# asp.net - 从 asp.net 项目中删除未使用的文件/图像

> ID：12588779
> 
> 赞同：2
> 
> 时间：2012-09-25T18:15:04.780
> 
> 标签：asp.net

我的问题有些不同。目前我正在研究asp.net web 项目，其中我有很多图像和html 页面，其中我使用的很少。现在想删除其中未使用的内容，但需要检查每个 aspx/htm/master 页面是否我使用过它们。那么有什么方法可以让我知道哪些文件未使用？有什么工具吗？或者我在构建/编译项目时知道的任何事情？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T18:19:17.440

检查这个开源项目[**https://github.com/jitbit/vs-unused-image-finder**](https://github.com/jitbit/vs-unused-image-finder)

[http://minhdanh2002.blogspot.com/2010/05/identifying-used-and-unused-resources.html](http://minhdanh2002.blogspot.com/2010/05/identifying-used-and-unused-resources.html)

基本上，您必须解析您的 aspx 代码并获取 asp 图像标签或 img 标签的列表。获取 src 属性或 imageurl 属性，然后将其放入列表以获取所有使用的图像。获取您网站上的图像目录列表，并检查其是否用于页面图像列表。虽然图像可能通过真实或绝对路径引用，但您必须考虑到这一点。

# c - 通过程序集以编程方式检测上下文切换

> ID：12588782
> 
> 赞同：3
> 
> 时间：2012-09-25T18:15:27.970
> 
> 标签：c, windows, assembly, kernel

我知道在通过托管语言（如 C#、Java 等）在 Windows 机器上遇到上下文切换时，无法侦听、检测和执行某些操作。但是，我想知道是否有一种方法可以使用汇编（或其他一些语言，也许是 C)？如果是这样，您能否提供一个小代码片段来说明如何执行此操作（因为我对内核编程相对较新）？

这段代码本质上的设计目的是在标准 Windows UI 上的后台运行，并监听特定进程何时进入或退出 CPU 的上下文。在听到这些动作中的任何一个时，它都会发送一个信号。为了澄清，我只想检测直接涉及特定进程的上下文切换，而不是任何上下文切换。我最终想要实现的是能够在特定进程开始使用 CPU 以及停止使用 CPU 时通知另一台机器（通过互联网信号）。

我第一次尝试这样做只是简单地计算特定进程的 CPU 使用百分比，但最终证明这太粗略，无法捕捉到最细微的计算。例如，我编写了一个测试程序，它简单地执行了 2+2 操作并将答案放在一个 int 中。CPU 使用方法没有考虑到这一点。因此，我正在寻找较低级别的东西，因此是这个问题的起源。如果有潜在的替代品，我将非常乐意提供它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T22:03:17.243

有[Windows 事件跟踪 (ETW)](http://msdn.microsoft.com/en-us/library/windows/desktop/bb968803%28v=vs.85%29.aspx)，您可以将其配置为接收有关系统中发生的各种事件的消息。

您应该能够接收有关线程调度事件的消息。[CSwitch 类](http://msdn.microsoft.com/en-us/library/aa964744%28VS.85%29.aspx)事件就是为此而生的。

抱歉，我不知道您可以轻松地为您的任务重复使用的任何好的 ETW 示例。阅读 MSDN 并环顾四周。

[Simon](https://stackoverflow.com/users/742404)指出了一个很好的链接，解释了为什么 ETW 有用。很有启发性：[http ://randomascii.wordpress.com/2012/05/11/the-lost-xperf-documentationcpu-scheduling/](http://randomascii.wordpress.com/2012/05/11/the-lost-xperf-documentationcpu-scheduling/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T18:34:39.560

请参阅下面的编辑。特别是＃3，ETW似乎是要走的路。

`int 2Eh`从理论上讲，您可以为旧的和新的安装自己的陷阱处理程序`sysenter`。然而，在实践中，由于 Patchguard（自 Vista 以来）和签名要求，这将不再像以前那样容易。我不知道检测上下文切换的任何其他*通用*方法，这意味着您必须自己动手。操作系统的所有上下文切换都通过调用门（前面提到的陷阱处理程序），如果您对调试/反汇编感到不舒服，ReactOS 允许您窥视幕后。

然而，在任何一种情况下，都不应该有一种*通用*的方法来安装这样的东西而没有内核模式特权（通常称为 ring 0）——其他任何东西都将是 Windows 中的安全漏洞。~~我也不知道 Windows 提供的方法来实现你想要的。~~

“Undocumented Windows NT”一书有一个关于确切主题的非常好的章节（尽管显然针对旧`int 2Eh`方法）。

如果您可以只挂钩某些功能，您可能能够摆脱一些过滤器驱动程序或用户模式 ​​API 挂钩。取决于您的具体要求。

*更新：*阅读您更新的问题，我认为您需要阅读内部，特别是 IRQL 的概念（不要与 DOS 时代的 IRQ 混淆）和调度程序。问题是每秒可以——而且通常会——进行数百次上下文切换。但是，您的观察者进程（监视上下文切换的那个）将像任何用户模式进程一样是可抢占的。这意味着您无法实现实时信令或任何接近它的东西，这对方法提出了一个很大的问号。

你真正想要达到的目标是什么？上下文切换的数量并没有真正给你任何东西。每个单独的 SEH 异常都会导致上下文切换。你对什么感兴趣？也许性能计数器可以更好地满足您的需求？

*更新 2：*即使对于单个线程，上下文切换的绝对数量也会在一秒钟内令人震惊。因此，假设您要安装自己的陷阱处理程序，您最终仍会（不利地）影响系统上的所有其他线程（毕竟您会捕获每个上下文切换，然后查看它是否是您关心的进程/线程和然后做你的事情或传递它）。

如果您可以告诉我们您*最终*想要实现的目标，而不是使用已经预先定义的方法，我们或许可以提出替代方案。

更新 3：显然我在这里的一个方面是错误的。Windows 自带了一些可以发出上下文切换信号的东西。并且可以利用 ETW 来利用这些。感谢西蒙指出。

# php - 具有多种类型的 mdb2 准备语句

> ID：12588785
> 
> 赞同：1
> 
> 时间：2012-09-25T18:15:37.687
> 
> 标签：php, class, mysqli, pear, mdb2

我正在使用 PHP 5.1.6 和 MDB2 并尝试将我的 prepare/execute/fetchAll 包装到一个类中，这样我就可以用一行执行一个选择查询。以下代码显示了我创建的类并直接执行相同的查询：

```
<?php
include_once "MDB2.php";

class db {

    private static $dsn = array(
        'phptype'  => "mysqli",
        'username' => "username",
        'password' => "pass",
        'hostspec' => "localhost",
        'database' => "dbname"
    );

    private static $instance = NULL;
    private static $statement = NULL;
    private static $resultset = NULL;

    private function __construct() {}
    private function __clone() {}

    public static function getInstance() {
        if (!self::$instance) {
            self::$instance =& MDB2::factory(self::$dsn);
        }
        return self::$instance;
    }

    public static function execQuery($sql, $types, $values) {
        if (self::$instance === NULL) {
            self::getInstance();
        }
        self::$statement = self::$instance->prepare(
                $sql, $types, MDB2_PREPARE_RESULT);
        self::$resultset = self::$statement->execute(array($values));  
        if (PEAR::isError(self::$resultset)) {
            // (this is where it fails)
            echo('Execute Failed: ' . self::$resultset->getMessage());
            return false;
        }
        return self::$resultset->fetchAll(MDB2_FETCHMODE_ASSOC);
    }
}

echo "<pre>";

$dsn = array(
    'phptype'  => "mysqli",
    'username' => "username",
    'password' => "pass",
    'hostspec' => "localhost",
    'database' => "dbname"
);

$sql = "select * from testtable where id = ? order by id LIMIT ?"
$t = array('text','integer');
$v = array('ABC',3);

// GOING DIRECT 
$db   =& MDB2::factory($dsn);
$stmt =  $db->prepare($sql, $t, MDB2_PREPARE_RESULT);
$res  =  $stmt->execute($v);  
$out  =  $res->fetchAll(MDB2_FETCHMODE_ASSOC);
print_r($out);

// GOING THROUGH CLASS
print_r( db::execQuery($sql, $t, $v) );

?> 
```

go direct 的输出按预期工作，但第二次尝试通过类失败，并显示 PEAR 错误消息“MDB2 错误：未找到”。我看不出这两种方法有什么区别。

如果我只通过一个 SQL 语句，该类可以正常工作？替换并且不要使用 'array()' 来保存类型和值。如果我改变这些，它的工作原理：

```
$sql = "select * from testtable where id = ? order by id"
$t = 'text';
$v = 'ABC'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T04:12:59.893

我发现我的代码有问题。execQuery 方法中的行如下：

```
self::$resultset = self::$statement->execute(array($values)); 
```

应该：

```
self::$resultset = self::$statement->execute(      $values ); 
```

OOP 对我来说是新的，所以我确信问题出在类和方法上。

（我不确定我是否应该回答我自己的问题，或者只是把它放在评论中）

# javascript - JQuery按值排序div，如果值为零则跳过

> ID：12588787
> 
> 赞同：0
> 
> 时间：2012-09-25T18:15:53.850
> 
> 标签：javascript, jquery, sorting

我已经在我的代码中完成了排序，但我不想重新加载整个 json 结果，而是希望为我的 div 进行客户端重新排序。

我的 C# 订购代码是：

```
.OrderBy(p=> p.order == 0? int.MaxValue : p.order); 
```

这给了我这样的结果

*   1
*   2
*   3
*   4
*   0
*   0
*   0

我的 HTML 架构就像

```
<div class="item" data-sort="0" id="5051fb7c746eed1bf05309db">
 <span>Some values</span>
 <span>Some values</span>
  <div class="subgroups">
    <div class="item" data-sort="null" id="5060de4a746eed1b44cc6e90"></div>
  </div> <!-- closing subgroups -->
</div> <!-- closing main div which need to be sorted -->

<div class="item" data-sort="2" id="5051fb7c746eed1bf05309db">
  <span>Some values</span>
  <span>Some values</span>
  <div class="subgroups">
    <div class="item" data-sort="null" id="5060de4a746eed1b44cc6e90"></div>
  </div> <!-- closing subgroups -->
</div> <!-- closing main div which need to be sorted -->

<div class="item" data-sort="0" id="5051fb7c746eed1bf05309db">
  <span>Some values</span>
  <span>Some values</span>
  <div class="subgroups">
    <div class="item" data-sort="null" id="5060de4a746eed1b44cc6e90"></div>
  </div> <!-- closing subgroups -->
</div> <!-- closing main div which need to be sorted --> 
```

我如何重新排序这些`div`s，以便第二个成为第一个，而那些数据为 0 的将在重新排序时最后一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T19:31:41.553

如果您使用 jQuery ，请查看 jQuery 插件[TinySort 。](http://tinysort.sjeiti.com/)以下是它的使用示例：

```
$(".item").tsort({ attr: 'data-sort',order:'desc'}); 
```

我认为如果你可以输出 0 或 -1 而不是 null 到 data-sort 属性，它应该把这些项目放在最后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T20:09:06.300

你也可以这样做：

将所有 div 放入父 div

```
<div id="parentDiv">
..
</div> 
```

然后你可以像这样排序

```
$(function(){

  function sort_comp(a, b){
    var k1 = parseInt($(a).attr("data-sort"),10);
    if(k1 === 0) k1 = Number.MAX_VALUE;
    var k2 = parseInt($(b).attr("data-sort"),10);
    if(k2 === 0) k2 = Number.MAX_VALUE;
    return (k1-k2);
  }

  var arr = $.makeArray($("#parentDiv > .item"));
  arr.sort(sort_comp);
  $("#parentDiv > .item").remove();
  $(arr).each(function(){
    $("#parentDiv").append($(this));
  });
}); 
```

# php - 如何在wordpress的三个不同列中查看三个不同类别的帖子？

> ID：12588789
> 
> 赞同：1
> 
> 时间：2012-09-25T18:15:55.357
> 
> 标签：php, jquery, mysql, wordpress

我是“WordPress”的新手，目前面临的问题是我正在使用 FUNDA 主题并尝试根据类别 ID 在三个不同的列中显示三个不同类别的帖子，但找不到特定类别的帖子。

我试试这个

```
<?php 
    $data = cats_to_select(); 
    $cat_id = $data[1][value];
    global $cat_id;?>
    <?php print_r($cat_id);?>

<?php if($cat_id==3):?>
    <?php if (have_posts()) : ?>    
    <?php while (have_posts()) : the_post(); ?>
    <div <?php post_class() ?> id="post-<?php the_ID(); ?>">
                                        <?php if ( function_exists("has_post_thumbnail") && has_post_thumbnail() ) { the_post_thumbnail(array(260,200), array("class" => "alignleft post_thumbnail")); } ?>
                                        <h2 class="title"><a href="<?php the_permalink() ?>" rel="bookmark" title="Permanent Link to <?php the_title_attribute(); ?>"><?php the_title(); ?></a></h2>
                                        <div class="postdate"><img src="<?php bloginfo('template_url'); ?>/images/date.png" /> <?php the_time('F jS, Y') ?> <img src="<?php bloginfo('template_url'); ?>/images/user.png" /> <?php the_author() ?> <?php if (current_user_can('edit_post', $post->ID)) { ?> <img src="<?php bloginfo('template_url'); ?>/images/edit.png" /> <?php edit_post_link('Edit', '', ''); } ?></div>

                                <div class="entry">
                                    <?php the_content('<strong>Read more &raquo;</strong>'); ?>
                                </div>
                                    </div><!--/post-<?php the_ID(); ?>-->

<?php endwhile; ?>
<div class="navigation">
<?php if(function_exists('wp_pagenavi')) { wp_pagenavi(); } else { ?>
<div class="alignleft"><?php next_posts_link('&laquo; Older Entries') ?></div>
<div class="alignright"><?php previous_posts_link('Newer Entries &raquo;') ?></div>
<?php } ?>
</div>
<?php else : ?>
<h2 class="center">Not Found</h2>
<p class="center">Sorry, but you are looking for something that isn't here.</p>
                                <?php get_search_form(); ?>
<?php endif; ?>
<?php endif; ?> 
```

谁能帮我？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T23:03:28.123

该代码仅显示一个类别。您需要添加一个类别 ID 的数组，并可能使用 for 循环来乘以代码，而不是 if 语句。也许是这样的。

然后制作一些将内容分成不同盒子的css？我不确定您所说的三列是什么意思。也不知道 FUNDA 的主题是什么。

如果您可以让我们更好地了解您正在使用什么，那就更容易了。关联？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T09:31:58.983

```
<?php query_posts('cat=3'); ?> // here, 3 will be replaced with desired
                             // category id, or you may add array 
<?php if (have_posts()) : ?>    
    <?php while (have_posts()) : the_post(); ?>
    <div <?php post_class() ?> id="post-<?php the_ID(); ?>">
                                        <?php if ( function_exists("has_post_thumbnail") && has_post_thumbnail() ) { the_post_thumbnail(array(260,200), array("class" => "alignleft post_thumbnail")); } ?>
                                        <h2 class="title"><a href="<?php the_permalink() ?>" rel="bookmark" title="Permanent Link to <?php the_title_attribute(); ?>"><?php the_title(); ?></a></h2>
                                        <div class="postdate"><img src="<?php bloginfo('template_url'); ?>/images/date.png" /> <?php the_time('F jS, Y') ?> <img src="<?php bloginfo('template_url'); ?>/images/user.png" /> <?php the_author() ?> <?php if (current_user_can('edit_post', $post->ID)) { ?> <img src="<?php bloginfo('template_url'); ?>/images/edit.png" /> <?php edit_post_link('Edit', '', ''); } ?></div>

                                <div class="entry">
                                    <?php the_content('<strong>Read more &raquo;</strong>'); ?>
                                </div>
                                    </div><!--/post-<?php the_ID(); ?>-->

<?php endwhile; ?> 
```

# php - 如何在 OS X 上使用 mod_rewrite

> ID：12588790
> 
> 赞同：0
> 
> 时间：2012-09-25T18:15:55.927
> 
> 标签：php, macos, apache, .htaccess, mod-rewrite

我使用 mac os x 10.6.8，但 mod_rewrite 有问题 - 它不起作用。

我在和中更改*了 AllowOverride All*。`/etc/apache2/users/my_user.conf``/etc/apache2/httpd.conf`

.htaccess 代码：

```
Options +FollowSymLinks
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?q=$1 [L,QSA] 
```

PHP：

```
var_dump($_GET['q']); 
```

结果：

```
Trying: http://localhost/~nonamez123/konkurs/asgfsddsh  

Not Found

The requested URL /Users/nonamez123/Sites/konkurs/index.php was not found on this server. 
```

如您所见，`index.php`继续重写，但`index.php`找不到

日志：

```
127.0.0.1 - - [25/Sep/2012:21:06:13 +0300] [localhost/sid#10080d720][rid#1009d64a8/initial] (3) [perdir
/Users/nonamez123/Sites/konkurs/] strip per-dir prefix:
/Users/nonamez123/Sites/konkurs/asfdasdf -    asfdasdf
127.0.0.1 - - [25/Sep/2012:21:06:13 +0300] [localhost/sid#10080d720][rid#1009d64a8/initial] (3) [perdir
/Users/nonamez123/Sites/konkurs/] applying pattern '^(.*)$' to uri
'asfdasdf'
127.0.0.1 - - [25/Sep/2012:21:06:13 +0300] [localhost/sid#10080d720][rid#1009d64a8/initial] (4) [perdir
/Users/nonamez123/Sites/konkurs/] RewriteCond:
input='/Users/nonamez123/Sites/konkurs/asfdasdf' pattern='!-f' =>
matched
127.0.0.1 - - [25/Sep/2012:21:06:13 +0300] [localhost/sid#10080d720][rid#1009d64a8/initial] (4) [perdir
/Users/nonamez123/Sites/konkurs/] RewriteCond:
input='/Users/nonamez123/Sites/konkurs/asfdasdf' pattern='!-d' =>
matched
127.0.0.1 - - [25/Sep/2012:21:06:13 +0300] [localhost/sid#10080d720][rid#1009d64a8/initial] (2) [perdir
/Users/nonamez123/Sites/konkurs/] rewrite 'asfdasdf' ->
'index.php?q=asfdasdf'
127.0.0.1 - - [25/Sep/2012:21:06:13 +0300] [localhost/sid#10080d720][rid#1009d64a8/initial] (3) split
uri=index.php?q=asfdasdf -    uri=index.php, args=q=asfdasdf
127.0.0.1 - - [25/Sep/2012:21:06:13 +0300] [localhost/sid#10080d720][rid#1009d64a8/initial] (3) [perdir
/Users/nonamez123/Sites/konkurs/] add per-dir prefix: index.php ->
/Users/nonamez123/Sites/konkurs/index.php
127.0.0.1 - - [25/Sep/2012:21:06:13 +0300] [localhost/sid#10080d720][rid#1009d64a8/initial] (1) [perdir
/Users/nonamez123/Sites/konkurs/] internal redirect with
/Users/nonamez123/Sites/konkurs/index.php [INTERNAL REDIRECT] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T18:48:25.153

我不会将您的开发文件放在 ~user/Sites 中，而是将它们放在 /Library/WebServer/Documents 中的网络服务器根目录中。我有更好的运气。

然后，确保 /etc/apache2/httpd.conf 中的 AllowOverride All 位于标记为 的目录标记内`<Directory "/Library/WebServer/Documents">`。httpd.conf 中有几个 AllowOverride 指令，如果您使用我的方法，您要修改的指令在第 217 行附近。

还要确保该行`LoadModule rewrite_module libexec/apache2/mod_rewrite.so`未注释。

最后确保你用`sudo apachectl graceful`.

如果您确实想使用您的用户站点目录，此博客条目有一些提示。 [http://johnattebury.com/blog/2012/07/upgrading-to-mountain-lion-forbidden-403-you-dont-have-permission-to-access-username-on-this-server/](http://johnattebury.com/blog/2012/07/upgrading-to-mountain-lion-forbidden-403-you-dont-have-permission-to-access-username-on-this-server/)

# iphone - 从 tableView 返回单元格时出错

> ID：12588791
> 
> 赞同：0
> 
> 时间：2012-09-25T18:15:57.217
> 
> 标签：iphone, ios, uitableview

我对在 ios 中使用表格视图比较陌生。我正在尝试使用不同的视图编辑数据并从原始视图更新值。我设置了单元格标识符并编写了以下代码。

```
#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView  
{ 
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    return self.items.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:    (NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"NameIdentifier";
    Item *currentItem=[self.items objectAtIndex:indexPath.row];
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

// Configure the cell...
     cell.textLabel.text=currentItem.itemName;    
     return cell;
    } 
```

但我收到以下错误：

```
NSInternalInconsistencyException', 
reason: 'UITableView dataSource must return a cell from tableView:cellForRowAtIndexPath:' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T18:21:27.777

您需要检查并确保`dequeueReusableCellWithIdentifier`能够使单元格出列。它崩溃了，因为它不会每次都返回一个单元格。如果您无法将可重复使用的单元格出列，则需要创建一个新单元格。您的代码应如下所示：

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:    (NSIndexPath *)indexPath {

        static NSString *CellIdentifier = @"NameIdentifier";
        Item *currentItem=[self.items objectAtIndex:indexPath.row];
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        if (cell == nil)  
           cell = [[UITableViewCell alloc] initWithFrame:CGRectZero reuseIdentifier:CellIdentifier];

         // Configure the cell...
         cell.textLabel.text=currentItem.itemName;    
         return cell;
        } 
```

# javascript - 如何比较日期 - JavaScript/ASP Classic

> ID：12588793
> 
> 赞同：0
> 
> 时间：2012-09-25T18:16:07.297
> 
> 标签：javascript, dreamweaver

> **可能重复：**
> [Javascript 比较两个日期，从字符串开始 <= 结束](https://stackoverflow.com/questions/2336086/javascript-to-compare-two-dates-from-strings-begin-end)

初学者。我有一个带有两个日期字段的 HTML 表单，用户可以手动或通过日历选择器填写。开始日期和结束日期。在提交表单之前，我想检查以确保输入的结束日期 >= 输入的开始日期。使用 Dreamweaver。对此的任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T18:35:43.910

**日期比较：**

```
function compareDates(date1, date2) {
    var delta = date1.getTime() - date2.getTime();
    if(delta == 0) {
        return 0;
    }
    return delta > 0 ? 1 : -1;
} 
```

**日期差异：**

```
var startDate = new Date(),
    endDate,
    delta;

setTimeout(function() {
    endDate = new Date();
    delta = endDate.getTime() - startDate.getTime();
    alert(delta + ' ms');
}, 1000);​ 
```

**[演示](http://jsfiddle.net/f0t0n/bh5Ag/)**

**[文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getTime)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:35:36.720

尝试这样的事情（这里是[Fiddle](http://jsfiddle.net/7AtST/2/)）

```
<script type="text/javascript">
    function test(){
    var dt1 = new Date(""+document.getElementById("dt1").value);
    var dt2 = new Date(document.getElementById("dt2").value);
    alert(dt2 > dt1);
}
</script>

<input id="dt1" type="text" value="09/25/2012"/>
<input id="dt2" type="text" value="09/24/2012"/>
<input id="btn" type="button" value="test" onclick="test()"/> 
```

# python - 如何在python中将对象写入临时文件

> ID：12588796
> 
> 赞同：0
> 
> 时间：2012-09-25T18:16:27.000
> 
> 标签：python

我想将一个对象写入 python 中的临时文件。

```
import tempfile

clip = Clip() // dynamic generated from ffmpeg
buffer = tempfile.SpooledTemporaryFile(max_size = 1024*1)
buffer.write(clip)
buffer.seek(0) 
```

内容是一个对象，它不是字符串类型。如何实施？谢谢

例如，此内容是影片剪辑。创建剪辑对象后，我想将其上传到服务器。然后，将其从内存中删除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T18:17:58.437

将其序列化为[JSON](http://docs.python.org/library/json.html)或通过[`pickle`](http://docs.python.org/library/pickle.html).

# perl - 按编号关闭文件描述符

> ID：12588797
> 
> 赞同：1
> 
> 时间：2012-09-25T18:16:30.520
> 
> 标签：perl

我的 Perl 程序执行给出警告的 lvs

> 文件描述符 63（管道：[117387]）在调用 lvs 时泄露。父 PID 12053：perl

因为调用我的 Perl 程序的程序打开了这个描述符。我无法更改调用程序，但有没有办法让我在 Perl 中关闭文件句柄？我试过：

```
'close 63 or die "close failed"; 
```

哪个死了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T18:22:46.740

`close`从[POSIX](http://search.cpan.org/perldoc?POSIX)可以做到这一点。

```
use POSIX qw( );
POSIX::close(63); 
```

# javascript - 动态将文件夹中的图像添加到网站

> ID：12588798
> 
> 赞同：0
> 
> 时间：2012-09-25T18:16:30.817
> 
> 标签：javascript, image, loops, gallery, portfolio

我有一个网站，其中有一个包含 3 个部分的画廊。每个部分最多有 30 张图像。我会将图像存储在与相关部分相关的文件夹中（即“img/gallery/category1”、“img/gallery/category2”和“img/gallery/category3”）

基本上不是编写html来显示每个单独的图像，我想要一个javascript循环，它将查看文件夹并显示每个图像，并将url放在预定义的代码片段中，即：

```
<div class="span4">
  <img src="img/gallery/category1/IMAGE-FILENAME1">
</div>

<div class="span4">
  <img src="img/gallery/category1/IMAGE-FILENAME2">
</div> 
```

...等，直到处理完文件夹中的所有图像...（另外，我知道我可以使用上面的 html 更聪明，但我想传达我希望每个找到的图像 url 都位于重复的代码片段）。

我仍在使用 javascript 进行培训，所以我想知道是否有办法做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:27:13.443

Javascript 本身无法做到这一点……但是，如果您有 XML 或 JSON 格式的图像列表及其各自的位置，则可以使用 ajax 获取该文件，解析其内容并创建标记。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T19:51:48.063

我找到了一个替代解决方案。

我还没有准备好处理 AJAX、JSON 或下面列出的任何内容。所以我决定研究使用PHP。解决方法如下：

我首先使用以下内容将文件夹的内容读取到数组中：

```
$directory = "DIRECTORY"

$dirhandler = opendir($directory);

$nofiles=0;
while ($file = readdir($dirhandler)) {

if ($file != '.' && $file != '..')
{
  $nofiles++;
  $files[$nofiles]=$file;                
}} 
```

然后使用 foreach 循环遍历数组，每次回显引用找到的文件名的 html 输出。

完美运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T18:26:33.380

您不能从 Javascript 直接查看服务器上的目录。您可以对服务器进行 AJAX 调用以获取列表（以 XML 或 JSON 格式），然后在循环响应时为每个文件创建并附加一个新的 div。

# android - 当我没有互联网连接时应用程序崩溃

> ID：12588800
> 
> 赞同：0
> 
> 时间：2012-09-25T18:16:39.640
> 
> 标签：android, android-activity

> **可能重复：**
> [Android 互联网连接检查问题](https://stackoverflow.com/questions/2753412/android-internet-connectivity-check-problem)

我有一个使用互联网的应用程序，当我有互联网连接时它工作正常，但是当我没有互联网时，这个应用程序被关闭。

我的代码是：

```
 import java.net.URL;
import java.util.List;

import android.app.Activity;
import android.os.Bundle;
import android.util.Xml;
import android.view.KeyEvent;
import android.widget.TextView;

    public class xml75 extends Activity {

        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.sietemildoss);

            TextView tv = (TextView) findViewById(R.id.tv);

            try {
                URL url = new URL("http://www.bovalpo.com/cgi-local/xml_bcv.pl?URL=75");
                ExampleHandler75 myExampleHandler = new ExampleHandler75();
                Xml.parse(url.openStream(), Xml.Encoding.UTF_8, myExampleHandler);

                List<ParsedExampleDataSet> parsedExampleDataSetList = 
                        myExampleHandler.getParsedData();

                for(ParsedExampleDataSet parsedExampleDataSet : parsedExampleDataSetList){
                    tv.append(parsedExampleDataSet.toString4());

                }

            } catch(Exception e){
                tv.setText("Error:" + e.getMessage());
            }

        } 
```

# c++ - cv::findContours 正在修改源图像 OpenCV 2.3

> ID：12588801
> 
> 赞同：7
> 
> 时间：2012-09-25T18:16:50.650
> 
> 标签：c++, opencv, image-processing

从 OpenCV 文档中， cv::findContours 中的源图像被获取为**const**，但是我的应用程序发生了一些奇怪的事情。我正在使用 cv::inRange 函数来获取特定颜色的阈值图像，之后，使用 cv::moments，我可以获得阈值图像中白色像素的中心，这可以正常工作。

另外，我想实现代码来查找最大轮廓并在该轮廓中定位中心矩。在代码中仅添加 cv::findContours 后，我在输出中发现了奇怪的行为，之后我想使用以下代码检查源图像的情况：

```
cv::Mat contourImage;
threshedImage.copyTo(contourImage); // threshedImage is the output from inRange
cv::findContours(threshedImage, contours, CV_RETR_LIST, CV_CHAIN_APPROX_NONE, cv::Point(0,0));
cv::Mat temp;
cv::absdiff(threshedImage,contourOutput, temp);
cv::namedWindow("absdiff");
cv::imshow("absdiff",temp); 
```

在此之后，输出显示 threshedImage 和 contourImage 之间存在差异。这怎么可能？有人对 cv::findContours 有类似的结果吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T18:59:04.590

**错误的！** [文档](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=findcontours#findcontours)明确指出：

> 源*图像*由该函数修改。

因此，如果您需要完整的原始图像，请复制此图像并将副本传递给 `cv::findContours()`.

# java - HashMap如何确保使用key的hashcode计算的索引在可用范围内？

> ID：12588802
> 
> 赞同：5
> 
> 时间：2012-09-25T18:16:50.280
> 
> 标签：java, algorithm, data-structures, hash, hashmap

我浏览了 HashMap 的源代码并有几个问题。PUT 方法采用 Key 和 Value 并执行

1.  键的哈希码的哈希函数。
2.  使用从上一步获得的哈希计算该对的存储桶位置

    ```
    public V put(K key, V value) {
       int hash = hash(key.hashCode());
       int i = indexFor(hash, table.length);
       .....
    }

    static int hash(int h) {
       h ^= (h >>> 20) ^ (h >>> 12);
       return h ^ (h >>> 7) ^ (h >>> 4);
    }

    static int indexFor(int h, int length) {
       return h & (length-1);
    } 
    ```

**例子：**

*   创建一个大小为 10 的 HashMap。
*   调用 put(k,v) 三次并假设这 3 个占用桶 loc 7 ,8 和 9
*   看涨看跌第 4 对 K,V 对并发生以下情况
    *   使用 key.hashcode() 调用 hash() 并计算哈希值
    *   indexFor是根据hash计算的

**问题：**

1.  如果计算的第 4 个 k,v 的存储桶位置超出现有范围怎么办？说位置 11？

提前感谢阿赫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T18:21:17.203

对于你的第一个问题：地图总是使用 2 的幂作为大小（如果你给它的容量为 10，它实际上将使用 16），这意味着它总是在范围`index & (length - 1)`内`[0, length)`，所以它总是在范围内。

目前尚不清楚您的第二个和第三个问题与什么有关。我*认为* `HashMap`除非需要，否则不会重新分配所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T18:21:41.913

HashMaps 通常会使用哈希码 mod 桶的数量。发生冲突时会发生什么取决于实现（对于 Java 的 HashMap 不确定）。有两种基本策略：保留落入桶中的项目列表，或者如果您的桶已满，则向前跳到其他桶。我的猜测是 HashMap 使用列表存储桶方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-10T09:55:42.823

让我们更详细地说，hashmap 将如何初始化存储桶大小？

以下代码来自 HashMap.java

而 (i < paramInt) i <<= 1;

如果您传递初始 10，则上面的代码用于制作大小为 2 的幂。因此使用上面的代码 HashMap 初始化桶大小 16；

下面的代码用于计算桶索引，

```
static int indexFor(int h, int length) {
        return h & (length - 1);
    } 
```

# git - 使用 Git Gui 本地拉取？

> ID：12588803
> 
> 赞同：1
> 
> 时间：2012-09-25T18:16:55.850
> 
> 标签：git, git-gui

我是 Git 新手并使用 Windows Gui。

在进行了几次提交后，我做了一个我不喜欢的未提交更改。

如何获取我的最后一个本地提交并用它覆盖工作副本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T01:29:59.730

在命令行上，您必须调用`git reset --hard HEAD^`才能返回一次提交。

因此，在您的 GUI 工具中，您可能会有一个名为`reset`或类似的选项。如果您使用的是 Windows 版 Github，则调用类似的选项`revert`。

虽然，您应该考虑，如果您的提交已被推送并与其他开发人员共享，则不应使用`reset`，因为这可能会给您同事的回购历史造成麻烦（`revert`在这种情况下，来自 github GUI 的命令会很好）。但是，如果它只是本地的，则没有问题。

**编辑**

在 git-gui 中，因为这是使用的 GUI，您可以在“提交”菜单下选择“恢复更改”。更重要的是，您在同一个子菜单中还有“修改上次提交”，如果您只想返回之前的干净状态并删除所有未提交的更改，您可以在“分支”菜单中使用“重置”选项。

# ios - 不同方向的分组表视图中的自定义标题视图

> ID：12588807
> 
> 赞同：2
> 
> 时间：2012-09-25T18:17:12.680
> 
> 标签：ios, uitableview

我设置了一个分组表视图，其中我覆盖了以下委托方法：

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section 
```

headerview 被渲染，一切看起来都很好......在纵向模式下。如果我现在旋转我的设备，headerview 现在没有与表格单元格对齐。

这是因为 tableview 为横向的单元格添加了比纵向更多的左右间距。

据我所知，这不是 UIViewAutoresizeMask 问题，因为 tableview 单元格在左侧和右侧的空间量不同，具体取决于 iDevice 处于横向还是纵向模式。

我将不胜感激对此问题的任何解决方案/建议！

更新：问题似乎出在表格视图的位置 x > 0 时。请注意表格单元格左右空间的差异。

![在纵向模式下](../Images/37533265bffd0eee586bafd6cad80691.png)

![在横向模式下](../Images/c4ce46e79e18f795debf0ff8f072a01b.png)

第一张是纵向模式 第二张是横向模式

# c# - 如何以编程方式将里程碑拖放到 Visio 中的块时间轴上

> ID：12588810
> 
> 赞同：7
> 
> 时间：2012-09-25T18:17:30.977
> 
> 标签：c#, vb.net, office-interop, visio

我正在尝试使用 Visio 2010 COM Interops 以编程方式创建时间线和标记。我的代码基于 Chris Castillo 的 2 部分博客文章（[第 1](http://blogs.msdn.com/b/chcast/archive/2004/11/12/256599.aspx)部分、[第 2 部分](http://blogs.msdn.com/b/chcast/archive/2004/11/17/259191.aspx)），这是我能够找到的关于如何执行此操作的唯一半完整示例。然而，他的博客（从 2004 年开始）似乎无法正常工作。里程碑并没有真正连接到时间线，更新它们的日期并不能让它们移动到正确的位置。

有什么建议或修复吗？

![在此处输入图像描述](../Images/d08fe9a46bd67fa9383823e6721e5add.png)

```
Imports Microsoft.Office.Interop.Visio
Imports System.Diagnostics.CodeAnalysis
Imports System.Runtime.InteropServices 
```

...

```
Dim VisioApp As New Application

Dim myDoc As Document = VisioApp.Documents.Add("")
Dim myPage As Page = myDoc.Pages.Item(1)

Dim TimelineStencils As Document =
    VisioApp.Documents.Add("Timeline Shapes.vss")

Dim theTimeline As Shape
Dim theMilestone As Shape

VisioApp.AlertResponse = 1

theTimeline = myPage.Drop(
    TimelineStencils.Masters.ItemU("Block timeline"), 5.610236, 5.511811)

theTimeline.CellsU("User.visBeginDate").FormulaU = _
        VisioApp.ConvertResult(
            "1/1/2004", VisUnitCodes.visDate, VisUnitCodes.visInches)

theTimeline.CellsU("User.visEndDate").FormulaU = _
    VisioApp.ConvertResult(
        "12/31/2004", VisUnitCodes.visDate, VisUnitCodes.visInches)

VisioApp.Addons("ts").Run("/cmd=3")

theMilestone = myPage.Drop( _
    TimelineStencils.Masters.ItemU("Line milestone"), _
    5.610236, 5.511811)

theMilestone.CellsU("User.visMilestoneDate").FormulaU = _
    VisioApp.ConvertResult(
        "7/1/2004", VisUnitCodes.visDate, VisUnitCodes.visInches)

VisioApp.AlertResponse = 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T20:18:02.277

因此，我发现了一个[更好的](http://www.visguy.com/2006/09/13/create-visio-flowcharts-programmatically/)以编程方式添加 visio 对象的演练，@JohnGoldsmith 在[他对相关问题的其他一些答案](https://stackoverflow.com/questions/9469739/adding-shapes-to-a-new-visio-document)中链接到这些对象，并找到了一种更好的创建模板和页面的方法，并且它正在工作！

```
Dim VisioApp As New Application

Dim myDoc As Document = VisioApp.Documents.Add("Timeline.vst")
Dim myPage As Page = myDoc.Pages.Item(1)

Dim TimelineStencilName As String = "TIMELN_M.VSS"
Dim TimelineStencilDoc As Document

For Each Doc As Document In VisioApp.Documents
    If Doc.Name = TimelineStencilName Then
        TimelineStencilDoc = Doc
        Exit For
    End If
Next

Dim TimelineMaster As Master =
    TimelineStencilDoc.Masters.ItemU("Block timeline")

Dim MilestoneMaster As Master =
    TimelineStencilDoc.Masters.ItemU("Line milestone")

Dim theTimeline As Shape
Dim theMilestone As Shape

theTimeline = myPage.Drop(TimelineMaster, 5.610236, 5.511811)

theTimeline.CellsU("User.visBeginDate").FormulaU = _
    VisioApp.ConvertResult(
            "1/1/2004", VisUnitCodes.visDate, VisUnitCodes.visInches)

theTimeline.CellsU("User.visEndDate").FormulaU = _
    VisioApp.ConvertResult(
        "12/31/2004", VisUnitCodes.visDate, VisUnitCodes.visInches)

theMilestone = myPage.Drop( _
    MilestoneMaster, _
    5.610236, 5.511811)

theMilestone.CellsU("User.visMilestoneDate").FormulaU = _
    VisioApp.ConvertResult(
        "10/1/2004", VisUnitCodes.visDate, VisUnitCodes.visInches) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T09:48:40.437

在 Visio 2010 上针对内置模板（“TIMELN_M.VSS”）和模板运行 Chris 的代码，我发现它运行良好。但是，如果您使用空白文档对内置模具运行它，则不会显示“描述”和“日期”形状数据字段。这两个字段的可见性取决于[文档 ShapeSheet](http://msmvps.com/blogs/visio/archive/2005/05/18/47514.aspx)中的用户单元格（“User.visTLShowProps”），该单元格要么由插件添加，要么在删除其中一个母版时添加。

标准模板包含两个[持久事件](http://msdn.microsoft.com/en-us/library/office/aa201790%28v=office.10%29.aspx#851)，它们调用 DocumentCreated 和 DocumentOpened 插件中的功能，并且再次添加几个其他用户单元格，用于切换上述值的开和关，或者它们存在于模板中. 在任何情况下，如果您不使用原始模板，这些都不会添加到 Document ShapeSheet。

这意味着您需要自己切换值。例如（一个快速的 VBA 示例）：

```
Private Sub SetTlShowProps(ByRef vDoc As Visio.Document)
If (Not vDoc Is Nothing) Then
    Dim docShp As Visio.Shape
    Set docShp = vDoc.DocumentSheet
    If (docShp.CellExistsU("User.visTLShowProps", 0)) Then
        docShp.CellsU("User.visTLShowProps").FormulaU = 1
    End If
End If
End Sub 
```

或者，当然您可以将这些“推送”单元格添加到您自己的 ShapeSheet 文档模板中：

```
User.visTLShowPropsOn = SETF(GetRef(User.visTLShowProps),1)

User.visTLShowPropsOff = SETF(GetRef(User.visTLShowProps),0) 
```

如果这不能解决您的问题，最后一点是，您是否使用不同的或派生的模板（“Timeline Shapes.vss”）？

# actionscript-3 - 你能帮我用这段代码做更多的OOP抽象吗？

> ID：12588818
> 
> 赞同：3
> 
> 时间：2012-09-25T18:17:59.557
> 
> 标签：actionscript-3, oop

此代码不是 java 代码，我没有从 ActionScript 开发人员那里得到任何答案。所以我用java标记了它，但是Action Script类似于java，这是一个OOP问题。

我正在使用网格数据，我想完成以下任务：

方法1：我想将每一行相乘 Row1num1 * Row1num2 等等，

```
var Row1num1:String;
var Row2num2:String;

var Row2num1:String;
var Row2num2:String;

var Row3num1:String;
var Row3num2:String;

var event1:Object={num1:Row1num1,num2:Row1num2};
var event2:Object={num1:Row2num1,num2:Row2num2};
var event3:Object={num1:Row3num1,num2:Row3num2};

then add them to a dataGrid
dataGrid.columns =["num1","num2"];
dataGrid.addItem(event1);
dataGrid.addItem(event2);
dataGrid.addItem(event3); 
```

但是通过使用这种方法，如果我有 20 行，我将有很多变量，显然这很糟糕。

方法 2：在此方法中，在运行时创建 Grid Data 行并将它们相乘。

```
//button to add rowGrid 
dd.addEventListener(MouseEvent.CLICK,ddd);

var numm:String="34";
function ddd(evt:MouseEvent):void
{
    var event4:Object={num1:Rownum1,num2:Rownum2};
    dataGrid.addItem(event4);
} 
```

但是当我使用这种方法时，我很难访问每一行数据并将它们相乘。

这个例子是因为我正在创建 GPA 计算器，并且我想获取每一行的学分，并将它们与同一行的比例值相乘，第一种方法很糟糕，因为没有抽象。

我希望使用的第二种方法，因为我希望用户添加行取决于他们的课程数量。

我希望我的英语不差。

我希望我的问题不会被否决，通过阅读这个问题，您可以确定我缺少什么，以便我学习它。

有什么教程可以用来解决我的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T20:23:53.473

我现在只是解决您的第一种方法，但似乎您想要某种数组。

[这是有关如何使用 Actionscript 数组的链接。](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Array.html)

如果您需要更多维度，您可以制作一个数组数组。这将帮助您减少变量的数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T00:16:56.843

我希望我正确理解了你的问题。无论哪种方式，我都会尝试...

因此，与大多数其他强类型的面向对象语言相比，actionscript 最好的事情之一就是反射是多么容易（可能要归功于它的 javascript 起源）。话虽如此，您可以做的只是使用“for”循环创建一个数组。我假设变量 row1Num1 row2Num2 等已经存在于您的班级中。否则，显然将它们存储在一个数组中并简单地将其读取到一个新数组中会更有效。无论如何，代码应该是这样的：

方法一：

```
var eventsArr:Array = [];
for(var i:int = 1; this["row" + i + "Num1"] != undefined /*or i<=length*/; i++){
    eventsArr.push({num1:this["row" + i + "Num1"], num2:this["row" + i + "Num2"]});
} 
for(var j:int = 0; j < eventsArr.length; j++){
    dataGrid.addItem(eventsArr[j]);
} 
```

方法二：

```
dd.addEventListener(MouseEvent.CLICK,ddd);

var numm:String="34"; //I am assuming this refers to the row number you wanted to add.
function ddd(evt:MouseEvent):void
{
    var event4:Object={num1:this["row" + numm + "Num1"],num2:this["row" + numm + "Num2"]};
    eventsArr.push(event4);
    dataGrid.addItem(event4);
} 
```

希望有帮助。

# java - 控制 Java 断言 - 最佳实践

> ID：12588821
> 
> 赞同：5
> 
> 时间：2012-09-25T18:18:07.970
> 
> 标签：java, properties, system, assertions

我希望计算密集度较低的断言始终保持打开状态，并禁用计算密集度较高的断言。一个实际的用例可能是我们将代码移至生产环境（根据 Pragmatic Programmer 的说法，这是处理断言的建议方法）。

控制断言的最佳方法是什么？（注意，我已经使用“-ea”在 VM 变量中启用了断言）。

一个简单的例子：

```
/**
*
* @precondition sizeOfList >= 2
*/
private ArrayList<Integer> createSortedList(int sizeOfList){
    ArrayList<Integer> results = new ArrayList<Integer>();

    for(int i = 0; i<sizeOfList; i++){

        <algorithm to add sorted numbers to array>

    }

    if(<some_flag>)
        assert results.get(0) < results.get(1) : "Results are not sorted.";

    assert results.size() == sizeOfList : "Results-list size does not equal requested size.";

    return results;
} 
```

最好使用系统属性来控制变量吗？如果是这种情况，是否可以为整个项目设置系统属性，而不仅仅是一个特定的类（在 Eclipse 中）？

使用“常量”类中定义的常量变量是否更好？

还有其他我没有想到的方法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T18:24:37.187

断言语句的定义特性是它可以被关闭，所以我只会将它用于不应该总是运行的断言。对于始终运行的断言，我会执行以下操作：

```
if (results.size() != sizeOfList)
    throw new AssertionError("Results-list size does not equal requested size."); 
```

`-ea`然后，您可以通过JVM 选项启用/禁用昂贵的断言。

# c# - 具有动态行数据类型的 Gridview

> ID：12588824
> 
> 赞同：0
> 
> 时间：2012-09-25T18:18:23.367
> 
> 标签：c#, asp.net, gridview

基本上我正在从一个 sql 表中填充一个 gridview。但问题是特定列中的这些数据有时需要显示为下拉列表，有时需要显示为文本框。

例如，ColA 数据将始终采用标签格式。但 ColB 可以是下拉列表或文本框。

```
ColA   |   ColB
-----------------
label  |  ddlist    
label  |  textbox    
label  |  ddlist 
```

如何动态设置每个 ColB 行的类型？我想也许可以使用 OnRowDatabound 来完成，但似乎找不到方法？这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T21:07:31.430

试试这个：为 ColB 使用 TemplateField 并同时放置 TextBox 和 DropdownList

```
<asp:TemplateField HeaderText="ColB">
    <asp:TextBox runat="server" ID="txtVal" />
    <asp:DropdownList runat="server" ID="drpVal"></asp:DropdownList>
</asp:TemplateField> 
```

在您的 gridview 的数据绑定中执行此操作

```
void myGridView_RowDataBound(Object sender, GridViewRowEventArgs e)
{
        TextBox txtVal = (TextBox)e.Row.FindControl("txtVal");
        DropDownList drpVal = (DropDownList)e.Row.FindControl("drpVal");

        if (txtVal != null && drpVal != null)
        {
            if (condition == true)
            {
                txtVal.Text = "Default value";
                drpVal.Visible = false;
            }
            else
            {
                drpVal.Items.Add("Item1");
                drpVal.Items.Add("Item2");
                drpVal.Items.Add("Item3");
                txtVal.Visible = false;
            }
        }
} 
```

# php - 我有点困惑，PHP 说 $results 是 mysqli 类的非对象

> ID：12588828
> 
> 赞同：0
> 
> 时间：2012-09-25T18:18:55.157
> 
> 标签：php, mysql, mysqli

我正在尝试使用 mysqli->fetch_row()（或 fetch_object()、fetch_array()）获取结果，但是当我在运行时运行代码时，它给了我以下错误：

**致命错误：在第 23 行调用非对象中的成员函数 fetch_row()。**

执行此操作的有问题的 var 是下面代码中的 $results。$user 和 $password 从包含该文件的另一个 .php 文件中获取它们的值，因此目前这并不重要。现在纠正我，如果我错了，但是如果 $results 被设置为 = $db->query($query) 那么它不应该继承 $db aka mysqli 类的属性吗？

```
class mySQLHelper{

    public function checkPass($user, $pass){
        global $db;
        $db =  new mysqli();
        $db->connect('localhost', 'root', '', 'mydb');
        if (mysqli_connect_errno()){
            echo 'Can not connect to database';
            echo mysqli_connect_errno(). mysqli_connect_error();
            exit;
            return false;
        }

        $query = "SELECT user, password FROM Users WHERE user = $user AND password = $pass " ;

       echo $query;

        $results = $db->query($query);

        while ($row = $results->fetch_row()){

            echo htmlspecialchars($row->user);
            echo htmlspecialchars($row->password);

        }

        $results->close();

        $url = 'http://'. $_SERVER['HTTP_HOST'].dirname($_SERVER['PHP_SELF'])."/";
        if(!$results){
         //   mysqli_close($db);
          //  header("Location:.$url.login.php&msg=1");

        }

        else{
        //    mysqli_close($db);
        //    header("Location:.$url.featured.php");

        }

    } 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T18:22:35.750

您的脚本缺少错误检查，因此未处理查询中的错误。

```
 $query = "SELECT user, password FROM Users 
    WHERE user = '$user' AND password = '$pass' " ;
    //           ^ quotes needed     

    echo $query;

    $results = $db->query($query);

    // handle a error in the query
    if(!$results)
      die($db->error);

    while ($row = $results->fetch_row()){
        echo htmlspecialchars($row->user);
        echo htmlspecialchars($row->password);
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T18:23:31.130

您的查询在此行失败：

```
$results = $db->query($query); 
```

因此，`$results`is `false`- 不是您期望的结果对象。

要解决此问题，您需要在变量周围添加引号（或使用准备好的语句）：

```
$query = "SELECT user, password FROM Users WHERE user = '".$user."' AND password = '".$pass."' " ; 
```

我建议更新以使用[准备好的语句](http://php.net/mysqli_prepare)来防止 SQL 注入问题：

```
$stmt = $db->prepare('SELECT user, password FROM Users WHERE user = ? AND password = ?');
$stmt->bind_param('ss', $user, $pass);
$stmt->execute();
$results = $stmt->get_result(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T18:22:30.620

如果您使用用户和密码字段文本或 varchar，那么您需要在它们周围使用单引号

```
$query = "SELECT user, password FROM Users WHERE user = '".$user."' AND password = '".$pass."' " ; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T18:24:35.190

您必须检查查询是否正常运行：

```
if ($result = $mysqli->query($query))
{
} 
```

使用： var_dump($results) 检查它包含什么

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T18:23:52.720

为什么你在尝试操纵它`if($results)` *之后还要检查它？*

这个...

```
$results->close();
//...
if(!$results){
    //...
} 
```

应该...

```
if(!$results){
    //...
}
$results->close(); 
```

# c# - 我如何多次按下图片框 c# Visual Studio

> ID：12588829
> 
> 赞同：-1
> 
> 时间：2012-09-25T18:18:57.340
> 
> 标签：c#, picturebox

我需要知道我是否可以在同一运行时间内按两次或更多次图片框来执行用户想要的多次功能？我的意思是要多次运行该方法“我的程序中的单击操作发生在我第一次单击时，我希望每次单击图片框时都发生。”

```
 private void img1_Click(object sender, EventArgs e)
 {
     //... 

 } 
```

我尝试但它只在第一次印刷时运行有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:29:59.150

每次点击图片框时都会发生点击动作。但是，如果您询问不同的方法，例如在单击时执行某些操作，在双击时执行某些操作，那么您可以为单击和双击定义 2 种不同的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T18:37:58.227

如果你想在他每次点击时调用一些函数并且 UI 需要不间断，你可能需要使用[ThreadStart](http://msdn.microsoft.com/en-us/library/system.threading.threadstart%28v=vs.90%29.aspx)

这是一个示例，希望这就是您想要的。并请详细说明您的问题。

```
 private void pictureBox1_Click(object sender, EventArgs e)
    {
        new ThreadStart(YourFunction).BeginInvoke(null, null);
    }

    private void YourFunction()
    {
        Thread.Sleep(5000);
        MessageBox.Show("YourFunction called!");
    } 
```

# jquery - Feed 图像显示在某些浏览器中旋转

> ID：12588832
> 
> 赞同：1
> 
> 时间：2012-09-25T18:19:10.410
> 
> 标签：jquery, css, xml, image

我有一个奇怪的问题。感谢[css-tricks.com](http://css-tricks.com/examples/AnythingSlider/#&panel1-1)的 Chris，我正在使用 CSS Anything 滑块，并且我正在使用 jQuery 拉入要在滑块中显示的 XML 图像提要：

```
$.post('feedURL', {},function(data){
    var slides = $(data).find('slides');
    for(var i = slides.length -1;i>=0;i--){
        var obj = $(slides[i]);
        var image = obj.find('ImageURL').text();

        var str = ' <li>';
        str += '        <img src="'+ image +'" />';
        str += '    </li>';

        $(str).find('img').one('load complete', function() {
            imageResize();
        }).end().appendTo($("#slider")); // Slider is a UL element on the page
    }
}); 
```

加载图像后，我运行图像调整大小功能。我的图片以各种不同的尺寸随机上传，这就是调整大小功能的原因。

```
function imageResize() {
    // Create the correct aspec ratio for images that are too large.
    $('#slider li img').each(function() {
        var maxWidth = 417; // Max width for the image
        var maxHeight = 313;    // Max height for the image
        var ratio = 0;  // Used for aspect ratio
        var width = $(this).width();    // Current image width
        var height = $(this).height();  // Current image height

        // Check if the current width is larger than the max
        if(width > maxWidth){
            ratio = maxWidth / width;   // get ratio for scaling image
            $(this).css("width", maxWidth); // Set new width
            $(this).css("height", height * ratio).css("margin-top", (maxHeight - height * ratio) / 2);  // Scale height based on ratio

            height = height * ratio;    // Reset height to match scaled image
            width = width * ratio;    // Reset width to match scaled image
        }

        // Check if current height is larger than max
        if(height > maxHeight){
            ratio = maxHeight / height; // get ratio for scaling image
            $(this).css("height", maxHeight);   // Set new height
            $(this).css("width", width * ratio).css("margin-top", "0");    // Scale width based on ratio

            width = width * ratio;    // Reset width to match scaled image
        }
    });
} 
```

我的提要中的图像可以正常加载，但是有些图像会旋转到侧面。

这是奇怪的部分。当您查看提要中的图像 URL 并将其显示在新窗口中时，提要中的实际图像会在其一侧旋转，但仅在 Chrome 和 Firefox 浏览器中旋转，但在 Safari中**不会旋转。**无论使用哪种浏览器，在实际的幻灯片中，它们总是旋转到一边。

如果我右键单击并将图像从提要保存到我的桌面，图像将正面朝上保存，而**不是**旋转。

世界上到底发生了什么？有人有线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T15:05:22.927

这是我在提要中获得的图像文件中的元数据。一旦我拍摄了照片文件，将其旋转了几次，然后将其旋转回正常状态并保存它，它就开始出现在我的提要中。

# c# - 如何创建将结果返回到文本文件的 MySql 数据库连接？

> ID：12588835
> 
> 赞同：2
> 
> 时间：2012-09-25T18:19:16.617
> 
> 标签：c#, mysql, file-io

我想编写一个 MySql 语句，它将连接到数据库，从表中选择一列，然后将该数据输出到文本文件到我计算机上的特定位置。我已经在互联网上搜索了几天，似乎没有找到我正在寻找的答案。我对 c#、MySql 和 Visual Studio 还很陌生。我只是想学习如何编写正确的语句并获得所需的结果。任何帮助将不胜感激。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using MySql.Data.MySqlClient;
using MySql.Data;
using System.Windows.Forms;
using System.IO;

namespace NewPractice
{
    public class Connect
    {
        static void Main()
        {
            string results = @"server=111.111.11.111; userid=anyone;
                password=anypassword; database=anydatabase";    
            MySqlConnection conn = null;

            try
            {
                conn = new MySqlConnection(results);
                conn.Open();
                //Console.WriteLine(
                File.WriteAllLines(
                    @"C:\Documents and Settings\anyone\My Documents\Tests\testoutput.txt", 
                    results.ToArray());
            }
            catch (MySqlException ex)
            {
                Console.WriteLine("Error: (0)", ex.ToString());
            }
            finally
            {
                if (conn != null)
                {
                    conn.Close();
                }
            }
        }      
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T19:28:21.840

您正在将`result`字符串的内容写入文件，而不是您尝试选择的数据。您需要运行 sql 命令并获取一个`SqlDataReader`对象以将数据写入文件。

```
string results = @"server=111.111.11.111; userid=anyone; 
    password=anypassword; database=anydatabase";

MySqlConnection connection = new MySqlConnection(results);
MySqlCommand command = connection.CreateCommand();
MySqlDataReader reader;
command.CommandText = "select * from mycustomers";
connection.Open();
reader = command.ExecuteReader();
using(var sw = new StreamWriter("C:\MyPath\MyFile.txt"))
{
    while (reader.Read())
    {
        var row = (IDataRecord)reader;
        sw.WriteLine(row["myColumn"]);
    }
}
connection.Close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T18:23:14.980

如果数据库在您的本地计算机上，您可以使用“select .. into outfile”。[http://dev.mysql.com/doc/refman/5.1/en/select-into.html](http://dev.mysql.com/doc/refman/5.1/en/select-into.html)。这将写入服务器上的文件夹，因此如果它是另一台机器并且您无法从那里复制，则它没有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T18:38:16.433

有很多教程可以从 .NET 访问 MySQL。
这是一个：http: [//zetcode.com/db/mysqlcsharptutorial/](http://zetcode.com/db/mysqlcsharptutorial/)

在任何语言中，都可以通过几个简单的步骤从数据库中读取数据：

```
1\. connect to the database.
2\. execute a query
3\. iterate through the results of the query
4\. close the connection. 
```

您在代码中所做的是连接到数据库，然后尝试将连接信息写入文件。

# jquery - 无法让 fancybox2 显示

> ID：12588836
> 
> 赞同：0
> 
> 时间：2012-09-25T18:19:23.397
> 
> 标签：jquery, fancybox, fancybox-2

如果有人可以查看我的源代码并告诉我为什么 fancybox 无法正常工作，我将不胜感激。我已经注释掉了开发中页面的所有其他`js`或`jquery`需求，因此站点菜单可能无法正常工作，但我无法弄清楚为什么默认的 fancybox 仍然无法运行：

[www.ascent-sation.co.uk.gridhosted.co.uk/wedding-flowers.php](http://www.ascent-sation.co.uk.gridhosted.co.uk/wedding-flowers.php)

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T18:34:06.060

`$(".fancybox")`没有选择任何东西。这应该可以解决问题：

```
$(".fancybox-buttons").fancybox(); 
```

通常，诊断此类问题的一个好主意是在 JSFiddle 上运行并尝试使其正常工作。如果您可以重新开始而不是在您的网站上运行它，那么它要么是拼写错误，要么是交互问题。逐行逐行并在控制台中播放也是有效的。跑`$(".fancybox")`回来了`[]`。

# javascript - 如何获取突出显示的文本？

> ID：12588840
> 
> 赞同：2
> 
> 时间：2012-09-25T18:19:31.040
> 
> 标签：javascript, jquery

我正在尝试从用户那里获取选定的文本（用户突出显示的突出显示的文本）。

我有以下内容：

```
function getSelectedTexts(){
  var t = '';
  if(window.getSelection){
    t = window.getSelection();
    console.log('1');
  }else if(document.getSelection){
    t = document.getSelection();
    console.log('2');
  }else if(document.selection){
      console.log('3');
    t = document.selection.createRange().text;
  }
    return t;
   }

 $('.text_speech').live('click',function(e){
      e.preventDefault();
      var textTest='';

      textTest=getSelectedTexts();
      console.log(textTest);

  }) 
```

我的控制台返回

```
1

>Selection   <------object
 anchorNode: Text
 anchorOffset: 2
 baseNode: Text
 baseOffset: 2
 extentNode: Text
 extentOffset: 1
 focusNode: Text
 focusOffset: 1
 isCollapsed: false
 rangeCount: 1
 type: "Range"
 __proto__: Selection 
```

我不确定如何获取选定的文本。任何人都可以帮助我吗？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T18:40:01.550

`window.getSelection()`返回一个`Selection`对象。

如果您想不加思索地获得选定的文本，您应该这样做：

```
 window.getSelection().toString() 
```

但如果您的选择可能更复杂，您应该阅读[MDN 文档](https://developer.mozilla.org/en-US/docs/DOM/Selection)。

例如，用户可能会选择带有多个标签的文本：

```
 <div class="text_speech">
   <p>First paragraph</p>
   <p>Second paragraph <strong>big</strong></p>
 </div> 
```

如果用户选择所有句子“*段落第二段**大***”，那么简单的方法将行不通。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T18:26:06.017

尝试：

```
console.log(textTest.toString()); 
```

# bash - 如何从 bash 脚本将消息记录到特定路径中的日志文件

> ID：12588842
> 
> 赞同：1
> 
> 时间：2012-09-25T18:19:45.953
> 
> 标签：bash, logging, syslog

如何从 bash 脚本将消息记录到特定路径中的日志文件？

一个天真的实现将是如下命令：

```
echo My message >>/my/custom/path/to/my_script.log 
```

但这可能有很多缺点（例如没有日志轮换）。我可以使用“logger”命令，但据我所知，它不支持自定义路径中的日志，并且如果您有很多可以使用自定义日志文件的 bash 脚本，则配置起来并不容易。

在像 Ruby 这样的脚本语言中，这一切都非常简单：[https](https://github.com/rudionrails/yell/wiki/101-the-datefile-adapter) ://github.com/rudionrails/yell/wiki/101-the-datefile-adapter 我还可以基于这个 ruby​​ 库制作自己的记录器命令并从我的 bash 脚本，但我想已经有一个众所周知的解决方案可以为 shell 脚本提供类似的行为？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T21:36:31.787

您可以通过这种方式简单地将文本从 bash 脚本附加到日志文件：

```
echo "My message" >> /my/custom/path/to/my_script.log 
```

旋转由 logrotate 处理，您只需将设置添加到 /etc/logrotate.conf 中的 .conf 即可。该配置非常易于解释，手册页也很有帮助，但简而言之，如果您想每周轮换并以压缩格式保留 4 周的日志并在轮换最后一个时创建一个新的空日志，您只需放入.conf：

```
/my/custom/path/to/my_script.log {
    rotate 4
    weekly
    create
    compress
    endscript
} 
```

您可以在手册页 (man logrotate) 中查看许多其他选项，例如通过电子邮件发送日志文件、执行轮换命令、文件达到特定大小时轮换等。

# sql-server-2008-r2 - 防止删除表的所有行

> ID：12588843
> 
> 赞同：0
> 
> 时间：2012-09-25T18:19:53.870
> 
> 标签：sql-server-2008-r2

有没有办法防止删除表中的所有行？我知道如何使用 DDL 触发器来防止删除表或截断。我曾经没有突出显示整个命令，省略了 where 子句，并删除了表中的所有行。除非存在 where 子句，否则我想防止这种情况再次发生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T18:31:15.877

你可以用触发器来做到这一点。

```
CREATE TRIGGER dbo.KeepRows
ON dbo.TableName
FOR DELETE
AS
BEGIN
  SET NOCOUNT ON;

  IF NOT EXISTS (SELECT 1 FROM dbo.TableName)
  BEGIN
    RAISERROR('Naughty developer, you tried to delete the last row!', 11, 1);
    ROLLBACK TRANSACTION;
  END
END
GO 
```

为了避免删除然后回滚，如果表很大，这可能会非常昂贵，您可以将其实现为代替触发器，这将阻止任何工作发生（当然检查除外）。这假设该列`id`是主键：

```
CREATE TRIGGER dbo.KeepRows2
ON dbo.TableName
INSTEAD OF DELETE
AS
BEGIN
  SET NOCOUNT ON;

  IF EXISTS (SELECT 1 FROM dbo.TableName WHERE id NOT IN (SELECT id FROM deleted))
  BEGIN
    DELETE dbo.TableName WHERE id IN (SELECT id FROM deleted);
  END
  -- optional:
  ELSE
  BEGIN
    RAISERROR('Nice try, you need a WHERE clause!', 11, 1);
  END
END
GO 
```

# xcode - 如何在 Xcode 4.5 中设置 ___COPYRIGHT___

> ID：12588846
> 
> 赞同：4
> 
> 时间：2012-09-25T18:20:05.300
> 
> 标签：xcode, templates

Xcode 4.5 中的文件模板在标题中包含以下内容

```
//  ___FILENAME___
//  ___PROJECTNAME___
//
//  Created by ___FULLUSERNAME___ on ___DATE___.
//___COPYRIGHT___ 
```

如何将其设置`___COPYRIGHT___`为自定义值。

谢谢，乔尔

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-05T11:45:07.137

更改组织名称将帮助您设置 COPYRIGHT 值。

请看屏幕，（Xcode4.5屏幕截图）

![请看屏幕，（Xcode4.5屏幕截图）](../Images/1497fc8d220fd4be6209e4654596cae0.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:13:20.693

当您在 Xcode 4.4 或更高版本中创建新项目时，会有一个组织名称文本字段。您在文本字段中输入的名称会出现在版权声明中，类似于以下内容：

```
Copyright (c) 2012 Company Name. All rights reserved. 
```

如果您在创建项目时输入了错误的公司名称，您可以通过从项目导航器中选择项目文件并打开文件检查器来更改公司名称。

对于大多数人来说，能够设置公司名称就足够了。如果您需要进一步自定义版权声明，我建议您复制一份 Apple 的文件模板，并在评论中添加自定义版权声明。以下文章提供了有关文件模板的更多信息：

[创建自定义 Xcode 4 文件模板](http://meandmark.com/blog/2011/11/creating-custom-xcode-4-file-templates/)

# php - PHP GET 请求返回不一致的结果

> ID：12588847
> 
> 赞同：0
> 
> 时间：2012-09-25T18:20:07.627
> 
> 标签：php, json

我通过 PHP 使用 cURL 来测试服务连接，我得到了一些不一致的结果。当我通过 PHP & cURL 运行测试时，这是我的结果：

```
{"response":"\n\n\n\n \n \n 
```

当我在浏览器中输入相同的 URL 时，我得到了这个：

```
{"response":"\n<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\">\n<head>\n    <link href=\"/images/global/global.css\...and so on 
```

我的浏览器中的响应被缩短了，但你明白了。

使用我的 PHP，我读入一个 JSON 文件，解析出我需要的 URL，并使用 cURL 发送一个 GET 请求。这是我用来通过 PHP 测试服务的代码：

```
<?php
include ("serviceURLs.php"); 

class callService {
    function testService($url){

        $ch = curl_init($url);

        curl_exec($ch); 

        $info = curl_getinfo($ch); 
        if ($info['http_code'] == 200){
            echo("Test has passed </br>"); 
        }else{
            echo("Test Failed.</br> "); 
        }

        var_dump($info); 

        curl_close($ch); 
    }

    function readFile(){
        $myFile = "./service/catalog-adaptation.json"; 
        $fr = fopen($myFile, 'r');
        $fileData = fread($fr, filesize($myFile)); 
        $json_a = json_decode($fileData, TRUE); 

        $prodServer = $json_a['serverRoots']['%SERVER_ROOT']['PROD']; 
        $demoServer = $json_a['serverRoots']['%SERVER_ROOT']['DEMO']; 
        $testServer = $json_a['serverRoots']['%SERVER_ROOT']['TEST']; 

        $testUrls = $json_a['commands'];     
        foreach($testUrls as $tURL){
            $mURL =  $tURL['URL']; 

            if(stripos($mURL, "%")===0){
                $testTestService = str_replace("%SERVER_ROOT", $testServer, $mURL); 
                $testDemoService = str_replace("%SERVER_ROOT", $demoServer, $mURL); 
                $testProdService = str_replace("%SERVER_ROOT", $prodServer, $mURL); 

                echo ("Production test: "); 
                $this->testService($testProdService); 

                echo ("Demo test: "); 
                $this->testService($testDemoService); 

                echo ("Test test: "); 
                $this->testService($testTestService); 
            }
        }
    }
}
$newServiceTest = new callService;
$newServiceTest->readFile(); 
?> 
```

谁能告诉我为什么我得到不同的结果以及如何修复我的代码以便获得一致的结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T18:38:14.943

您需要设置以下选项以将传输作为 curl_exec() 的返回值的字符串返回，而不是直接输出。

```
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
```

# python - Python Xlib - root.display.next_event() 上的 Xlib.error.BadAccess

> ID：12588849
> 
> 赞同：4
> 
> 时间：2012-09-25T18:20:20.253
> 
> 标签：python, security, python-2.7, xlib

嘿，我才真正开始使用 Python，我决定制作捕捉某些键的程序，我在网上找到了捕捉鼠标点击的源代码，并决定从它开始，这是代码：

```
import Xlib
import Xlib.display

display = Xlib.display.Display(':0')
root = display.screen().root
root.change_attributes(event_mask = Xlib.X.ButtonPressMask | Xlib.X.ButtonReleaseMask)

while True:
    event = root.display.next_event()
    print "hi" 
```

这是我运行它时得到的错误：

```
miles@miles:~/py/keynotify$ python x.py
Xlib.protocol.request.QueryExtension
X protocol error:
<class 'Xlib.error.BadAccess'>: code = 10, resource_id = 173, sequence_number = 9, major_opcode = 2, minor_opcode = 0
^CTraceback (most recent call last):
  File "x.py", line 9, in <module>
    event = root.display.next_event()
  File "/usr/lib/pymodules/python2.7/Xlib/protocol/display.py", line 171, in next_event
    self.send_and_recv(event = 1)
  File "/usr/lib/pymodules/python2.7/Xlib/protocol/display.py", line 502, in send_and_recv
rs, ws, es = select.select([self.socket], writeset, [], timeout)
KeyboardInterrupt 
```

非常感谢任何帮助！

# javascript - 在 ajax 回调中在 datatables.net 中触发的事件是什么？

> ID：12588853
> 
> 赞同：0
> 
> 时间：2012-09-25T18:20:30.253
> 
> 标签：javascript, jquery, json, jquery-datatables

我正在使用 jQuery 插件 Datatables

我正在加载大量信息，并且在 IE 中变得迟钝，所以我决定使用 ajax 功能来加快速度。

问题是我需要将 HTML 加载到表格中。

当 datatables 向服务器发送 ajax 调用以获取数据以填充表时，是否有在回调中触发的事件？我想劫持响应并在将 html 填充到表中之前对其进行解码，我在文档中找不到它的提及。

编辑：尝试澄清问题。删除了单独的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T22:19:19.037

您可以使用[`fnServerData`](http://datatables.net/usage/callbacks)回调参数并在 AJAX 调用的“成功”处理程序中处理它。

```
// POST data to server
$(document).ready( function() {
  $('#example').dataTable( {
    "bProcessing": true,
    "bServerSide": true,
    "sAjaxSource": "xhr.php",
    "fnServerData": function ( sSource, aoData, fnCallback, oSettings ) {
      $.ajax( {
        "dataType": 'json',
        "type": "POST",
        "url": sSource,
        "data": aoData,
        "success": function (data) {
          // Do something with the response here
          fnCallback(data);
        }
      } );
    }
  } );
} ); 
```

# asp.net - 在服务器上读取文件图像时出现异常 - ASP.NET

> ID：12588855
> 
> 赞同：0
> 
> 时间：2012-09-25T18:20:32.663
> 
> 标签：asp.net, .net

我希望有人帮助我解决这个问题..

我有简单的 aspx 代码来从目录中获取图像文件，并在其上进行一些处理，以在其上绘制一些东西，然后将其保存在同一目录中。

确实代码在本地机器上运行良好，但在服务器端代码失败并出现异常。**（ArgumentException：参数无效）**

**请看代码：**

```
DirectoryInfo[] dir = new DirectoryInfo[2];
dir[0] = new DirectoryInfo(Server.MapPath("Image/DB/Large/"));
dir[1] = new DirectoryInfo(Server.MapPath("Image/DB/Thumb/"));

System.Drawing.Image signature = System.Drawing.Image.FromFile(Server.MapPath("Image/Design/signature.png"));
for (int i = 0; i < dir.Length; i++)
{
    FileInfo[] fs = dir[i].GetFiles("*.jpg");
    foreach (FileInfo s in fs)
    {
        FileStream strm = s.OpenRead();
        String name = s.Name;
        System.Drawing.Image img = System.Drawing.Image.FromStream(strm);
        Graphics g = Graphics.FromImage(img);
        g.SmoothingMode = SmoothingMode.HighQuality;
        g.DrawImage(signature, new Point(0, 0));       
        strm.Close();
        if (i == 0)
        {
            String v = Server.MapPath("Image/DB/Large/" + name);
            img.Save(v);
        }
        else if (i == 1)
        {
            String v = Server.MapPath("Image/DB/Slide/" + name);
            img.Save(v);
        }
        g.Dispose();         
    }
} 
```

**异常详情：**

参数无效。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.ArgumentException：参数无效。

```
 Source Error:

  An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

  Stack Trace:

[ArgumentException: Parameter is not valid.]
   System.Drawing.Image.FromStream(Stream stream, Boolean useEmbeddedColorManagement, Boolean validateImageData) +1062843
   System.Drawing.Image.FromStream(Stream stream) +8
   Developer.Button1_Click(Object sender, EventArgs e) +279
   System.Web.UI.WebControls.Button.OnClick(EventArgs e) +111
   System.Web.UI.WebControls.Button.RaisePostBackEvent(String eventArgument) +110
   System.Web.UI.WebControls.Button.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) +10
   System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) +13
   System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData) +36
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +1565 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T18:40:49.237

您必须将 FileStream 转换为 Stream

```
System.Drawing.Image.FromStream(..);// This method take Stream as argument and nor FileStream 
```

您可以尝试使用 CopyTo 进行转换。

链接：http: [//msdn.microsoft.com/en-us/library/dd782932.aspx](http://msdn.microsoft.com/en-us/library/dd782932.aspx)

```
FileStream strm = s.OpenRead();
Stream stream = new Stream();
strm.CopyTo(stream);
System.Drawing.Image.FromStream(stream); 
```

在.Net 4之前，可以使用这种扩展方式

公共静态类分机{

```
public static void CopyTo(this FileStream in, Stream out)
{
    byte[] temp= new byte[16*1024]; //You can adjust this value
    int bytesRead;

    while ((bytesRead = in.Read(temp,0, temp.Length)) > 0)
    {
        out.Write(temp, 0, bytesRead);
    }
} 
```

}

# java - 在测试自动化中设置保存点并回滚到它的最佳实践

> ID：12588857
> 
> 赞同：1
> 
> 时间：2012-09-25T18:20:43.313
> 
> 标签：java, web-services, oracle11g, savepoints

我是 webservices 的新手，我正在考虑在使用 webServices 的测试自动化中使用保存点机制。下面是一个代码片段

```
Connection con = 
    DriverManager.getConnection("jdbc:derby://localhost:1527/testDb", 
                                "name","pass");
con.setAutoCommit(false);
Savepoint spt1 = con.setSavepoint("svpt1");
WebService.Post() method for various CRUD operations.....
con.rollback(spt1);
con.commit(); 
```

设置保存点和回滚之间的操作是使用 webServices 进行的各种 CRUD 操作，因此当保存点回滚时，自动化过程中创建的脏数据将被擦除。我很想知道在这里使用保存点机制是否是一种好习惯，如果可以使用，那么创建+回滚保存点的平均时间是多少？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T18:55:19.440

除非我误解了这个问题，否则你不能回滚在另一个事务中已经完成的事情。所以你在这里做的事情没有多大意义。

保存点和回滚可用于回滚自保存点**与您回滚的连接**以来所做的操作。其他一切都与保存点无关，并且无法撤消。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:25:16.410

[听起来像是DBUnit](http://www.dbunit.org/)的完美用例——它可以在每次测试执行之前重新创建整个数据库。

# c# - 获得下一个可被 10 整除的数字的差值

> ID：12588858
> 
> 赞同：0
> 
> 时间：2012-09-25T18:20:43.523
> 
> 标签：c#

大家好，如何在c#中得到一个数字和下一个可被10整除的数字之间的差异？

例子。

```
15 should give 5\. (20-15 =5)
21 should give 9\. (30-21=9)
30 should give 0\. (30-30=0) 
```

对不起我的英语不好。提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T18:25:53.583

Mod 不起作用，这会给你带来与你想要的相反的东西。21%10=1 不是你想要的 9。你应该做的是 10-(num%10)。这会让你更接近。在这种情况下，唯一错误的结果是 30，结果为 10。

所以：

```
(10-(num%10))%10 
```

这每次都会给你正确的结果，虽然有点麻烦。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T18:21:49.480

你应该使用模数

```
15 % 10 will give 5
21 % 10 will give 1
30 % 10 will give 0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T18:22:44.883

您正在寻找“mod”运算符。

```
x=15;
y=x%10; //y=5 
```

[http://msdn.microsoft.com/en-us/library/0w4e0fzs.aspx](http://msdn.microsoft.com/en-us/library/0w4e0fzs.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T18:29:44.680

答案并不那么直截了当。我不确切知道 C# 的语法，但这是我的方法。您需要使其适应您的代码

```
 x = 15;
    y = x % 10;
    if y > 0 return 10 - y
    return 0 
```

# c# - 有没有一种方法可以在我实际加载之前安全地检查是否可以加载程序集？

> ID：12588863
> 
> 赞同：1
> 
> 时间：2012-09-25T18:21:02.330
> 
> 标签：c#, wpf, reflection, dll, .net-assembly

我正在开发一些软件，这些软件将为某些 dll 动态构建菜单项，以便我们可以根据用户机器上可用的 dll 动态加载组件。我要加载的任何 dll 都已在 AssemblyInfo.cs 文件中使用程序集属性进行标记，以及我如何确定是否要为该 dll 构建菜单项。到目前为止，这是我的方法：

```
private void GetReportModules() {
        foreach (string fileName in Directory.GetFiles(Directory.GetCurrentDirectory())) {
            if (Path.GetExtension(fileName) == ".dll" || Path.GetExtension(fileName) == ".exe") {
                System.Reflection.Assembly assembly = System.Reflection.Assembly.LoadFrom(fileName);
                object[] attributes = assembly.GetCustomAttributes(typeof(ReportNameAttribute), false);
                if (attributes.Count() > 0) {
                    ReportNameAttribute reportNameAttribute = attributes[0] as ReportNameAttribute;
                    Type type = assembly.GetType(reportNameAttribute.BaseType);
                    MenuItem customReportsMenuItem = new MenuItem();
                    customReportsMenuItem.Header = reportNameAttribute.ReportName;
                    ReportsMenuItem.Items.Add(customReportsMenuItem);
                    customReportsMenuItem.Click += (s, ev) => {
                        var obj = Activator.CreateInstance(type);
                        type.InvokeMember("Show", System.Reflection.BindingFlags.Default | System.Reflection.BindingFlags.InvokeMethod, null, obj, null);
                    };
                }
            }
        }
    } 
```

在大多数情况下，它工作正常，我得到了我期望的 dll，并且正在创建我的菜单项。问题是，为了检查属性，我首先需要使用反射加载程序集。当我尝试加载缺少依赖项的其他一些本地 dll 或者他的模块应该包含程序集清单时，它们会引发错误。有没有一种方法可以在我实际加载之前安全地检查是否可以加载程序集？（当我写出来时听起来很愚蠢）。关于我遇到的问题的任何想法或关于如何完成我在这里尝试的更好的建议？感觉有点在我头上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T18:23:03.407

一种方法是使用 try catch 块。如果它抛出一个异常，你不感兴趣......

编辑：

MSDN 清楚地解释了 LoadFrom 可以抛出的异常类型。FileLoadException 在您的情况下看起来很可能。

我确信有代码在捕获后进行。例如日志框架。我不希望我的框架捕获异常并使我的可执行文件停止等，我希望它扼杀异常。我的应用程序不应该仅仅因为一行日志未命中而失败。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T18:59:00.363

您可以创建一个单独的[AppDomain](http://msdn.microsoft.com/en-us/library/system.appdomain.aspx)，尝试在那里加载程序集，将结果发回，然后卸载 AppDomain。这样，您就不会使用任何已加载程序集的“垃圾”来更改当前的 AppDomain。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T19:18:57.657

您可以尝试使用非托管元数据 API (http://msdn.microsoft.com/en-us/library/ms404384.aspx) 或通用编译器基础结构元数据 API (http://ccimetadata.codeplex.com/) 作为替代普通的反射。

# sql - 简化具有多个 WITH 和多个子查询的查询

> ID：12588865
> 
> 赞同：0
> 
> 时间：2012-09-25T18:21:14.347
> 
> 标签：sql, sql-server, sql-server-2008, tsql

困扰我的是，对于一个简单的查询，我必须写出如此多的子选择和 WITH 语句。

问题是：**是否有关于如何简化具有子查询的查询的基本准则**？

这是我的查询：

```
WITH cte_min
     AS (SELECT a.client_id,
                a.specimen_source,
                a.received_date
         FROM   f_accession_daily a
                JOIN (SELECT DISTINCT f.client_id,
                                      f.received_date,
                                      f.accession_daily_key
                      FROM   F_ACCESSION_DAILY f
                             JOIN (SELECT CLIENT_ID,
                                          Min(received_date) MinRecDate
                                   FROM   F_ACCESSION_DAILY
                                   GROUP  BY CLIENT_ID) i
                               ON f.CLIENT_ID = i.CLIENT_ID
                                  AND f.RECEIVED_DATE = i.MinRecDate) b
                  ON a.ACCESSION_DAILY_KEY = b.ACCESSION_DAILY_KEY),
     cte_max
     AS (SELECT a.client_id,
                a.specimen_source,
                a.received_date
         FROM   f_accession_daily a
                JOIN (SELECT DISTINCT f.client_id,
                                      f.received_date,
                                      f.accession_daily_key
                      FROM   F_ACCESSION_DAILY f
                             JOIN (SELECT CLIENT_ID,
                                          Max(received_date) MaxRecDate
                                   FROM   F_ACCESSION_DAILY
                                   GROUP  BY CLIENT_ID) i
                               ON f.CLIENT_ID = i.CLIENT_ID
                                  AND f.RECEIVED_DATE = i.MaxRecDate) b
                  ON a.ACCESSION_DAILY_KEY = b.ACCESSION_DAILY_KEY),
     cte_est
     AS (SELECT DISTINCT client_id,
                         MLIS_DATE_ESTABLISHED
         FROM   D_CLIENT
         WHERE  REC_ACTIVE_FLG = 1
                AND MLIS_DATE_ESTABLISHED IS NOT NULL)
SELECT DISTINCT f.client_id,
                cmin.specimen_source,
                cmin.received_date,
                cmax.specimen_source,
                cmax.received_date,
                cest.MLIS_DATE_ESTABLISHED
FROM   F_ACCESSION_DAILY f
       LEFT JOIN cte_max cmax
         ON cmax.CLIENT_ID = f.CLIENT_ID
       LEFT JOIN cte_min cmin
         ON cmin.CLIENT_ID = f.CLIENT_ID
       LEFT JOIN cte_est cest
         ON cest.CLIENT_ID = f.CLIENT_ID 
```

我不一定要求您自己进行简化（尽管对此我将非常感激），而是要求您提供有关重写此查询以使其更加优雅的一般准则/指导。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T21:33:10.500

这看起来更好吗？

```
;WITH minmax AS (
SELECT client_id, specimen_source, received_date,
       RMin = row_number() over (partition by Client_id
                                 order by received_date, accession_daily_key),
       RMax = row_number() over (partition by Client_id
                                 order by received_date desc, accession_daily_key desc)
FROM F_ACCESSION_DAILY
)
SELECT f.client_id,
       max(case when rmin=1 then f.specimen_source end),
       max(case when rmin=1 then f.received_date end),
       max(case when rmax=1 then f.specimen_source end),
       max(case when rmax=1 then f.received_date end),
       D.MLIS_DATE_ESTABLISHED
FROM   minmax f
LEFT JOIN D_CLIENT D ON D.REC_ACTIVE_FLG = 1 AND D.MLIS_DATE_ESTABLISHED IS NOT NULL
WHERE 1 in (f.rmin, f.rmax)
GROUP BY f.client_id, D.MLIS_DATE_ESTABLISHED 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T21:10:13.383

虽然我不确定是否每个人都会认为这更简单和/或更容易阅读，但我会这样做：

```
WITH 
  cte_MaxMinRecvd As
(
    SELECT      CLIENT_ID,   
                Min(received_date) MinRecDate,
                Max(received_date) MaxRecDate
    FROM        F_ACCESSION_DAILY
    GROUP BY    CLIENT_ID
)
, cte_MaxMinDaily As
(
    SELECT      *
    FROM        F_ACCESSION_DAILY f
    JOIN        cte_MaxMinRecvd   i     ON  f.CLIENT_ID = i.CLIENT_ID
)
, cte_min AS 
(
    SELECT  a.client_id,
            a.specimen_source,
            a.received_date
    FROM    F_ACCESSION_DAILY a
    WHERE   EXISTS(
                    SELECT  *
                    FROM    cte_MaxMinDaily f
                    WHERE   f.RECEIVED_DATE       = f.MinRecDate
                      AND   a.ACCESSION_DAILY_KEY = f.ACCESSION_DAILY_KEY
                   )
)
, cte_max AS 
(
    SELECT  a.client_id,
            a.specimen_source,
            a.received_date
    FROM    f_accession_daily a
    WHERE   EXISTS(
                    SELECT  *
                    FROM    cte_MaxMinDaily f
                    WHERE   f.RECEIVED_DATE       = f.MinRecDate
                      AND   a.ACCESSION_DAILY_KEY = f.ACCESSION_DAILY_KEY
                   )
)
SELECT DISTINCT 
            f.client_id,
            cmin.specimen_source,
            cmin.received_date,
            cmax.specimen_source,
            cmax.received_date,
            cest.MLIS_DATE_ESTABLISHED
FROM        F_ACCESSION_DAILY f
LEFT JOIN   cte_max  cmax        ON  cmax.CLIENT_ID = f.CLIENT_ID
LEFT JOIN   cte_min  cmin        ON  cmin.CLIENT_ID = f.CLIENT_ID
LEFT JOIN   D_CLIENT cest        ON  cest.CLIENT_ID = f.CLIENT_ID 
                                 AND cest.REC_ACTIVE_FLG = 1
                                 AND cest.MLIS_DATE_ESTABLISHED IS NOT NULL 
```

我所做的主要是

1.  在适用的情况下，将大部分子查询转换为 CTE，
2.  将 Min 和 Max 子查询合并在一起，并且
3.  将 DISTINCT 子查询更改为 EXISTS 子查询，这样可以更简单（通常性能更好）

糟糕，我也按照 Blam 的建议摆脱了 cte_est CTE。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T20:06:35.437

50 行报告 5 个值，在所有这些中只引用了两个表。

在第一个 CTE 中，您有 4 个连接（或虚拟连接）到同一个表，并且没有其他表涉及报告 3 列。不知道关键所以不能断定它可以减少。

如果一个 cte 没有多次引用，那么它不会导致更少的代码行。

一方面，这个 cte 可以用更少的代码替换。

```
cte_est
     AS (SELECT DISTINCT client_id,
                         MLIS_DATE_ESTABLISHED
         FROM   D_CLIENT
         WHERE  REC_ACTIVE_FLG = 1
                AND MLIS_DATE_ESTABLISHED IS NOT NULL)
...
cest.MLIS_DATE_ESTABLISHED
...
LEFT JOIN cte_est cest
         ON cest.CLIENT_ID = f.CLIENT_ID 
```

减少到

```
D_CLIENT.MLIS_DATE_ESTABLISHED
...
LEFT JOIN  D_CLIENT 
       ON  D_CLIENT.CLIENT_ID = f.CLIENT_ID 
       AND D_CLIENT.REC_ACTIVE_FLG = 1
       AND D_CLIENT.MLIS_DATE_ESTABLISHED IS NOT NULL 
```

# c# - 使用计时器以错误的数量递增值

> ID：12588868
> 
> 赞同：0
> 
> 时间：2012-09-25T18:21:18.410
> 
> 标签：c#, winforms, timer

好的，所以在表单加载时，我调用了一个启动计时器的方法，假设每个刻度都增加一个整数值并将文本框字段 text = 设置为 integer.ToString 并且由于某种原因它增加 4 而不是 1。 …………

```
 /// <summary>
    /// Starts the Timer >:D
    /// </summary>
    public void StartCounting()
    {
        t.Interval = 1000;
        t.Tick += new System.EventHandler(OnTimerEvent);
        t.Start();

    }

    /// <summary>
    /// This is what Happens when the timer ticks.
    /// </summary>
    /// <param name="source"></param>
    /// <param name="e"></param>
    public void OnTimerEvent(object source, EventArgs e)
    {

        textBoxActual.Text = currentMinute.ToString();
        currentMinute = currentMinute + 1 ;
    } 
```

![呐](../Images/045535db193f0cb2dda2aba65a0bc320.png)

绿色的数字是 textBoxActual <.<

这是我的表单加载代码：

```
 private void Form1_Load(object sender, EventArgs e)
    {

        Order o = new Order();
        StartedOrders = o.GetUnfinishedOrders();
        PopulateGrid(StartedOrders, dataGridViewStartedOrders);

        //Set the top row to be some abstract style.
        System.Windows.Forms.DataGridViewCellStyle iStyle = new DataGridViewCellStyle();
        iStyle.BackColor = Color.Green;
        System.Drawing.Font f = new System.Drawing.Font("Times New Roman",13,FontStyle.Bold);
        iStyle.Font = f;
        dataGridViewStartedOrders.Rows[0].DefaultCellStyle = iStyle;
        dataGridViewStartedOrders.ClearSelection();

        try
        {
            textBoxOrderNumber.Text = "O# " + dataGridViewStartedOrders.Rows[0].Cells[1].Value.ToString();
            textBoxCustomerName.Text = dataGridViewStartedOrders.Rows[0].Cells[2].Value.ToString();
            textBoxTarget.Text = dataGridViewStartedOrders.Rows[0].Cells[5].Value.ToString();
            textBoxActual.Text = "0";
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }

        StartCounting();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T18:23:18.050

如果它总是更新 4，我的精神调试能力说你要添加你的听众 4 次。

# asp.net - 像真实登录表单一样提交的虚拟表单

> ID：12588872
> 
> 赞同：0
> 
> 时间：2012-09-25T18:21:44.877
> 
> 标签：asp.net, login

我有一个 Web 应用程序，其登录表单位于`~/Account/Login.aspx`其中，我在其中实现了登录逻辑并且它按预期工作。

现在，我们的平面设计师重新设计了主页，在一个角落里放了一个小的 html 登录表单。我喜欢在主页中有另一个登录表单的想法，但我不知道如何让这个表单像实际登录页面一样提交。我查看了生成的真实登录页面的 html，但它似乎没有使用 a `<form>`，所以我不能只调整输入框的名称和表单操作以匹配真实登录的名称。

有没有办法在不重写所有代码的情况下启用这个登录表单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T19:25:04.420

您可以使用 AJAX 调用会员服务以验证用户身份：

您需要`AuthenticationServices`在 web.config 文件中启用

```
<configuration>
  <system.web.extensions>
    <scripting>
      <scriptResourceHandler enableCaching="false" enableCompression="false" />
      <webServices>
        <authenticationService enabled="true" requireSSL="false" />
      </webServices>
    </scripting>
  </system.web.extensions>
</configuration> 
```

然后在一个页面中：

```
<form id="form1" runat="server">
<div>
    <asp:ScriptManager runat="server" ID="sm">
    </asp:ScriptManager>
    <asp:LoginView runat="server">
        <AnonymousTemplate>
            <input type="tel" name="user" id="user" />
            <br />
            <input type="password" name="pass" id="pass" />
            <br />
            <input type="button" value="Login" name="login" id="login" onclick="attemptLogin(this);" />
        </AnonymousTemplate>
        <LoggedInTemplate>
            <input type="button" name="logout" id="logout" value="Logout" onclick="attemptLogout(this);" />
        </LoggedInTemplate>
    </asp:LoginView>
    <asp:LoginName FormatString="Welcome {0}!" runat="server" />
    <%--<asp:LoginStatus runat="server" />--%>
</div>
    <script>
        function attemptLogin(e) {
            Sys.Services.AuthenticationService.login(
                $get("user").value,
                $get("pass").value,
                false,
                null,
                null,
                function success(validCredentials, userContext, methodName) {
                    if (validCredentials == true) {
                        alert("user logged in");
                        window.location = window.location;
                    }
                    else {
                        alert("user name or password incorrect");
                    }
                }, function fail(error, userContext, methodName) {
                    alert(error.get_message());
                }, null);
        }

        function attemptLogout(e) {
            Sys.Services.AuthenticationService.logout(
                window.location,
                null,
                null,
                null
            );
        }
    </script>
</form> 
```

或者，您可以使用登录逻辑公开 Web 服务并调用该 Web 服务而不是`AuthenticationService`使用 AJAX

另一种方法是使用登录控件创建一个`UserControl`，并将该控件放在主页上，在`UserControl`后面的代码中处理登录事件

# android - 带有 tabhost 的 Android FragmentActivity 不显示第一个选项卡的内容

> ID：12588876
> 
> 赞同：2
> 
> 时间：2012-09-25T18:21:53.807
> 
> 标签：android, android-fragments, android-tabhost

我是一名初学者 android 开发人员，我不明白为什么我的第一个标签内容没有显示。我已经在网上搜索了很长时间，但我还没有成功。:(

其他两个选项卡正确显示，只是第一个失败（尽管我附加了片段，所以我认为这不是第一个片段的问题）

我尝试仔细遵循一些教程并研究了许多示例，但我仍然找不到原因......

这是我设置tabHost的方法：

```
private void initialiseTabHost(Bundle args) {
    mTabHost = (TabHost)findViewById(R.id.main_tabhost);
    mTabHost.setup();
    TabInfo tabInfo = null;
    TabsFragmentActivity.addTab(this, this.mTabHost, this.mTabHost.newTabSpec("My").setIndicator(createTabView(mTabHost.getContext(), "My")), ( tabInfo = new TabInfo("My", MyCinemasFragment.class, args)));
    this.mapTabInfo.put(tabInfo.tag, tabInfo);  
    TabsFragmentActivity.addTab(this, this.mTabHost, this.mTabHost.newTabSpec("All").setIndicator(createTabView(mTabHost.getContext(), "All")), ( tabInfo = new TabInfo("All", AllCinemasFragment.class, args)));
    this.mapTabInfo.put(tabInfo.tag, tabInfo);
    TabsFragmentActivity.addTab(this, this.mTabHost, this.mTabHost.newTabSpec("Win!").setIndicator(createTabView(mTabHost.getContext(), "Win!")), ( tabInfo = new TabInfo("Win!", OffersFragment.class, args)));
    this.mapTabInfo.put(tabInfo.tag, tabInfo);

    this.onTabChanged("My");

    mTabHost.setOnTabChangedListener(this);
} 
```

这是我的 addTab 方法：

```
private static void addTab(TabsFragmentActivity activity, TabHost tabHost, TabHost.TabSpec tabSpec, TabInfo tabInfo) {

    tabSpec.setContent(activity.new TabFactory(activity));
    String tag = tabSpec.getTag();

    tabInfo.fragment = activity.getSupportFragmentManager().findFragmentByTag(tag);
    if (tabInfo.fragment != null && !tabInfo.fragment.isDetached()) {
        FragmentTransaction ft = activity.getSupportFragmentManager().beginTransaction();
        ft.detach(tabInfo.fragment);
        ft.commit();
        activity.getSupportFragmentManager().executePendingTransactions();
    }

    tabHost.addTab(tabSpec);
} 
```

但是，我觉得 onTabChanged 把一切都搞砸了……

```
public void onTabChanged(String tag) {
    TabInfo newTab = (TabInfo) this.mapTabInfo.get(tag);
    if (mLastTab != newTab) {
        FragmentTransaction ft = this.getSupportFragmentManager().beginTransaction();
        if (mLastTab != null) {
            if (mLastTab.fragment != null) {
                ft.detach(mLastTab.fragment);
            }
        }
        if (newTab != null) {
            if (newTab.fragment == null) {
                newTab.fragment = Fragment.instantiate(this, newTab.clss.getName(), newTab.args);
                ft.add(R.id.realtabcontent, newTab.fragment, newTab.tag);
            } else {
                ft.attach(newTab.fragment);
            }
        }

        mLastTab = newTab;
        ft.commit();
        this.getSupportFragmentManager().executePendingTransactions();
    }
} 
```

先感谢您...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T13:40:53.553

你如何实现 createTabView()？

```
createTabView(mTabHost.getContext(), "My")) 
```

根据我的经验，我丢失了所有 3 个选项卡内容，因为 TabWidget 填满了整个屏幕，即使将其设置为“wrap_content”。将其高度更改为“120dp”进行测试后，它正确显示。

你是如何第一个更准确地丢失标签内容的？它只是显示父元素的背景还是？您可以为其任何父元素设置特定颜色，以确保显示的内容。

# bash - 提取具有多个部分的文件名的一部分

> ID：12588884
> 
> 赞同：2
> 
> 时间：2012-09-25T18:22:27.150
> 
> 标签：bash, shell

我正在尝试提取文件名的一部分以与其他文件名进行比较，因为它是唯一不变的部分。这是模式和示例

clearinghouse.doctype.payer.transID.processID.date.time EMDEON.270.60054.1234567890123456789.70949996.20120925.014606403

所有部分的长度始终相同，但字符长度可能不同的票据交换所和文档类型除外。

我需要比较的文件名部分是 transID。

在 shell 脚本中执行此操作的最简洁、最短的方法是什么。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:25:41.133

有很多方法可以做到这一点，简单任务最简单的工具是 cut 命令。Tell cut 你想用什么字符作为分隔符以及你想打印哪些字段。这是执行您想要的命令。

```
file=EMDEON.270.60054.1234567890123456789.70949996.20120925.014606403
transitId=$(echo $file | cut -d. -f4) 
```

awk 可以做同样的事情，也可以让你做更复杂的逻辑。

```
file=EMDEON.270.60054.1234567890123456789.70949996.20120925.014606403
transitId=$(echo $file | awk -F. '{print $4}') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T02:09:10.560

`read`您可以使用该命令使用适当的值来拆分文件名`IFS`。

```
filename="EMDEON.270.60054.1234567890123456789.70949996.20120925.014606403"
IFS="." read clHouse doctype payer transID procID dt tm <<< "$filename"
echo $transID 
```

由于您只需要事务 ID，因此将每个部分分配给特定变量是多余的。对其他字段使用单个虚拟变量：

```
# You only need one variable after transID to swallow the rest of the input without
# splitting it up.
IFS="." read _ _ _ transID _  <<< "$filename" 
```

或者只是将每个部分读入一个数组并访问正确的元素：

```
IFS="." read -a parts <<< "$filename"
transID="${parts[3]}" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T18:26:02.323

您可以通过参数扩展来做到这一点：

```
$ foo=EMDEON.270.60054.1234567890123456789.70949996.20120925.014606403
$ bar=${foo%.[0-9]*.[0-9]*.[0-9]*}
$ echo "${bar##*.}"
1234567890123456789 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T02:15:13.663

```
tranid==`echo file_name|perl -F -ane 'print $F[3]'` 
```

# java - 在 Spring AOP 中指定切入点

> ID：12588885
> 
> 赞同：2
> 
> 时间：2012-09-25T18:22:28.780
> 
> 标签：java, spring, spring-aop

我熟悉 Spring AOP，尽管在这方面没有太多的实践经验。

我的问题是，如果我想为类的某些方法（不是全部）提供一些 AOP 功能，那么单切入点是否可行。比如说，我的班级中有四个方法**save1、save2、get1 和 get2**，我只想在**save1 和 save2**上应用 AOP ，那么在这种情况下，我该如何为此创建一个切入点？我的切入点表达式会是什么样子？或者有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T18:35:04.987

有很多方法可以做到（使用通配符表达式，使用 aspectJ 注释，..）我将举一个 aspectJ 的例子

```
class MyClass{
          @MyPoint 
          public void save1(){
          }  

          @MyPoint
          public void save2(){
          }  

          public void save3(){
          }  

          public void save4(){
          }  

}

@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.METHOD)
public @interface MyPoint {
}

@Aspect
@Component
public class MyAspect {
    @Before("@annotation(com.xyz.MyPoint)")
    public void before(JoinPoint joinPoint) throws Throwable {
        //do here what u want
    }

} 
```

所以你已经准备好了，只要你标记了`@Mypoint`注解，spring会在这个方法的方面之前调用，确保spring正在管理这个方法和对象，而不是你。在你的类路径中包含 aspectJ

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T18:27:37.403

您需要指定一个切入点表达式来选择方法来应用您的建议。

[请参阅Spring 文档](http://static.springsource.org/spring/docs/3.0.x/reference/aop.html)中的 7.2.3 声明切入点并使用执行连接点指示符来选择方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T18:30:06.253

像这样有一个切入点表达式应该可以解决问题

```
**execution(* save*(..))** 
```

请参阅[此处](http://static.springsource.org/spring/docs/2.0.x/reference/aop.html)了解更多信息

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T18:52:06.767

You can use `or` and `and` with pointcut expressions:

```
execution(* my.Class.myMethod(..)) or execution(* my.Class.myOtherMethod(..)) 
```

# python - 查找单词中第一次出现的字符

> ID：12588893
> 
> 赞同：1
> 
> 时间：2012-09-25T18:22:50.137
> 
> 标签：python

我正在尝试做的事情：通过过滤较低的列表，创建并打印满足以下所有条件的单词列表：

该词至少有 6 个字符长；该单词至少包含 3 次字母“e”；字母“e”的第一次出现在单词的后半部分。

**到目前为止我有这个：** 之前使用过：

```
words = [ line.strip() for line in file(DATA+'english_wordlist.txt') ] 
```

（lowers 在我之前的作品中被定义为部分单词）

```
[word for word in lowers if len(word)>=6 and word.count('e')>=3 and 'e' is after word(len(word)/2::)] 
```

我知道 'e' 在 word(len(word)/2::) 之后是错误的，但这只是我的粗略逻辑。我将如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:25:02.397

```
and word.index('e') >= len(word)/2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T18:26:26.337

```
[word for word in lowers if len(word)>=6 and word.count('e')>=3 and 
'e' not in word[int(len(word)/2) + 1:]] 
```

`len(word)/2`在`true division`Python 中.. 所以它可能会给出浮点值.. 所以，将它的类型转换为`int`并添加 1 以在中间之后移动它..

*编辑：-或者您可以简单地使用`len(word)//2`(which is `floor division`) 并且不需要进行类型转换。所以，这是一个替代方案：-

```
[word for word in lowers if len(word)>=6 and word.count('e')>=3 and 
'e' not in word[(len(word)//2) + 1:]] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T18:26:50.600

检查'e'首先出现在单词的后半部分，就相当于知道它没有出现在单词的前半部分。那应该对你有帮助。

# php - 如何在一个数字上删除更多的 1 个十进制数字

> ID：12588894
> 
> 赞同：0
> 
> 时间：2012-09-25T18:22:50.073
> 
> 标签：php

从源数字中删除超过 1 个十进制数字的简单方法是什么。
***例如源编号是：***

> 第一个来源号码是：56.48216585224
> 第二个来源号码是：93

***输出必须是：***

> 第一次输出：56.4
> 第二次输出：93

数字不是静态的

**什么是简单的方法？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T18:24:31.273

如果你**不想**四舍五入，那么：

```
$number = 56.48216585224;
echo substr($number, 0, strpos($number, '.')+2); // output: 56.4 
```

除此以外：

使用 php round() 或 number_format()

[http://php.net/manual/en/function.round.php](http://php.net/manual/en/function.round.php)

[http://php.net/manual/en/function.number-format.php](http://php.net/manual/en/function.number-format.php)

例子：

```
$number = 56.48216585224;
echo number_format($number, 1, '.', ''); // Output: 56.5
echo round($number, 1); // Output: 56.5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T18:33:02.417

我会根据您的要求推荐这个 PHP 代码：

```
$n = 56.48216585224;
$m = floor($n * 10) / 10; // $m = 56.4 now 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T18:36:09.507

您可以尝试以下方法

```
print(quickFormat("56.48216585224"));
print(quickFormat("93"));

function quickFormat($number) {
    $number = explode(".", $number);
    if (isset($number[1])) {
        return $number[0] . "." . $number[1]{0};
    } else {
        return $number[0] ;
    }
} 
```

输出

```
56.4
93 
```

# macos - WebView 键输入

> ID：12588897
> 
> 赞同：0
> 
> 时间：2012-09-25T18:23:13.190
> 
> 标签：macos, cocoa, appkit

我的应用程序允许用户使用所有箭头键使用键盘在网格中导航，输入和退出。用户可以打开和关闭项目，包括链接。如果用户打开指向 webview 的链接，并且 webview 获得第一响应者，并且用户没有在 html 输入中进行编辑，我仍然希望用户能够使用键盘导航。因此，如果用户在阅读网页时按下左箭头键，我希望用户在网格中向左移动。除了将 JavaScript 注入 webview 加载的每个页面之外，是否可以通过任何其他方式检测到这一点？我知道如何覆盖`NSWindow sendEvent`或实现`WebEditingDelegate`协议，但如何检测用户是否在 webview 内进行编辑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T14:03:01.210

不确定如何检测用户是否在没有 Javascript 的情况下在 Webview 内进行编辑，但这可能并不重要，具体取决于您的应用程序。我注意到，如果用户在一个`sendEvent`并不总是调用的 html 输入字段内进行编辑，`NSWindow`并且 WebView 会吞下大多数事件，除了一些键，如转义键和返回键。因此，只需覆盖`sendEvent`并测试 firstResponder 是否是 webview。如果是，您可以将您感兴趣的关键事件重定向到您自己的事件处理程序，以便 webView 不会吞下所有这些重要事件。

# mongodb - BSONDecoder 不理解类型：53 Excpetion

> ID：12588900
> 
> 赞同：3
> 
> 时间：2012-09-25T18:23:15.730
> 
> 标签：mongodb, hadoop, bson

很难说它是如何发生的。我将 mongodb 用于 hadoop 输出（com.mongodb.hadoop）。一开始似乎还好。当我试图对数据进行修改时，这个问题突然爆发了。我无法从 umongo(https://github.com/agirbal/umongo) 和 mongoHub(http://mongohub.todayclose) 读取输出集合数据.com/)。我什至无法通过回滚代码来解决它。

这是来自 umongo 的踪迹

```
java.lang.UnsupportedOperationException: BSONDecoder doesn't understand type : 53 name: S
    at org.bson.BasicBSONDecoder.decodeElement(BasicBSONDecoder.java:226)
    at org.bson.BasicBSONDecoder.decodeElement(BasicBSONDecoder.java:206)
    at org.bson.BasicBSONDecoder._decode(BasicBSONDecoder.java:79)
    at org.bson.BasicBSONDecoder.decode(BasicBSONDecoder.java:57)
    at com.mongodb.DefaultDBDecoder.decode(DefaultDBDecoder.java:56)
    at com.mongodb.Response.<init>(Response.java:66)
    at com.mongodb.DBPort.go(DBPort.java:128)
    at com.mongodb.DBPort.call(DBPort.java:79)
    at com.mongodb.DBTCPConnector.call(DBTCPConnector.java:218)
    at com.mongodb.DBApiLayer$MyCollection.__find(DBApiLayer.java:305)
    at com.mongodb.DBCursor._check(DBCursor.java:369)
    at com.mongodb.DBCursor.getServerAddress(DBCursor.java:687)
    at com.mongodb.DBCursor.toString(DBCursor.java:740)
    at com.edgytech.umongo.CollectionPanel$4.getRoot(CollectionPanel.java:427)
    at com.edgytech.umongo.DbJob.wrapUp(DbJob.java:130)
    at com.edgytech.umongo.DbJob$1.done(DbJob.java:81)
    at javax.swing.SwingWorker$5.run(SwingWorker.java:717)
    at javax.swing.SwingWorker$DoSubmitAccumulativeRunnable.run(SwingWorker.java:814)
    at sun.swing.AccumulativeRunnable.run(AccumulativeRunnable.java:95)
    at javax.swing.SwingWorker$DoSubmitAccumulativeRunnable.actionPerformed(SwingWorker.java:824)
    at javax.swing.Timer.fireActionPerformed(Timer.java:291)
    at javax.swing.Timer$DoPostEvent.run(Timer.java:221)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:209)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:682)
    at java.awt.EventQueue.access$000(EventQueue.java:85)
    at java.awt.EventQueue$1.run(EventQueue.java:643)
    at java.awt.EventQueue$1.run(EventQueue.java:641)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:652)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:296)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:201)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:196)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:188)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:122) 
```

MongoDB：来自 HomeBrew 的 mongodb-2.2.0-x86_64 (http://mxcl.github.com/homebrew/)

操作系统：Mac OS 10.8.1

驱动程序：2.7.2 & 2.7.3

**更新**

来自 mongo shell 的错误

```
Wed Sep 26 09:24:20 Assertion: 10320:BSONElement: bad type 53
0x10004656b 0x1000b9b1e 0x100013a62 0x100292425 0x10011ef2e 0x100120ec8 0x10014ab74 0x1001498f4 0x1001cd414 0x1001490fc 0x10014ad81 0x100159c8f 0x100255418 0x10025551b 0x10029d0ba 0x100007277 0x10000919a 0x100000dd4 0x1 
 0   mongo                               0x000000010004656b _ZN5mongo15printStackTraceERSo + 43
 1   mongo                               0x00000001000b9b1e _ZN5mongo11msgassertedEiPKc + 206
 2   mongo                               0x0000000100013a62 _ZNK5mongo11BSONElement4sizeEv + 418
 3   mongo                               0x0000000100292425 _ZN5mongo16resolveBSONFieldEP9JSContextP8JSObjectljPS3_ + 389
 4   mongo                               0x000000010011ef2e js_LookupPropertyWithFlags + 734
 5   mongo                               0x0000000100120ec8 js_GetProperty + 136
 6   mongo                               0x000000010014ab74 js_Interpret + 3396
 7   mongo                               0x00000001001498f4 js_Invoke + 3300
 8   mongo                               0x00000001001cd414 fun_apply + 532
 9   mongo                               0x00000001001490fc js_Invoke + 1260
 10  mongo                               0x000000010014ad81 js_Interpret + 3921
 11  mongo                               0x0000000100159c8f js_Execute + 1103
 12  mongo                               0x0000000100255418 JS_EvaluateUCScriptForPrincipals + 168
 13  mongo                               0x000000010025551b JS_EvaluateScript + 107
 14  mongo                               0x000000010029d0ba _ZN5mongo7SMScope4execERKNS_10StringDataERKSsbbbi + 330
 15  mongo                               0x0000000100007277 _Z5_mainiPPc + 12599
 16  mongo                               0x000000010000919a main + 42
 17  mongo                               0x0000000100000dd4 start + 52
 18  ???                                 0x0000000000000001 0x0 + 1
Error: BSONElement: bad type 53 
```

# sql - 可以从Oracle中的触发器调用动态SQL吗？

> ID：12588901
> 
> 赞同：0
> 
> 时间：2012-09-25T18:23:16.923
> 
> 标签：sql, oracle, plsql, triggers, dynamic-sql

我有十几个表，我想保留其中的更改历史记录。对于每一个，我都创建了第二个以 _HISTO 结尾的表，并添加了字段 modtime、action、user。

在我插入、修改或删除此表中的记录之前，我调用（从我的 delphi 应用程序）一个 oracle 过程，它将实际值复制到 histo 表中，然后执行操作。

我的程序通过 DBA_TAB_COLUMNS 生成一个动态 sql，然后执行生成的（插入 tablename_histo ( fields s ) select fields, sysdate, 'acition', userid from table_name

有人告诉我，我不能从触发器调用此过程，因为它必须选择触发触发器的表。这是真的 ？是否有可能实现我所需要的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T18:46:52.797

假设您想使用触发器来维护历史记录（而不是在 Oracle 中跟踪历史数据的任何其他方法——Workspace Manager、Total Recall、Streams、Fine_Grained Auditing 等），您可以在触发器中使用动态 SQL。但是动态 SQL 遵循与静态 SQL 相同的规则。甚至行级触发器中的静态 SQL 通常也无法在不生成变异表异常的情况下查询定义触发器的表。

但是，您可以编写一些动态 SQL，首先使用相同的数据字典表生成触发器，而不是从触发器中调用动态 SQL。触发器本身将静态引用`:new.column_name`和`:old.column_name`。当然，您必须编辑触发器或重新运行在添加新列时动态创建触发器的过程。但是，由于您大概需要将列添加到主表和历史表中，因此这通常没什么大不了的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:22:10.953

Oracle 不允许触发器对定义触发器的表执行 SELECT。如果你尝试它，你会得到可怕的“mutating table”错误（ORA-04091），虽然有一些方法可以解决*这个*错误，但它们会增加很多复杂性而没有什么价值。如果您真的想在每次更新表时构建一个动态查询（从性能的角度来看，IMO 这是一个坏主意 - 我发现元数据查询通常很慢，但是 YMMV）它最终应该看起来像

```
strAction := CASE
               WHEN INSERTING THEN 'INSERT'
               WHEN UPDATING THEN 'UPDATE'
               WHEN DELETING THEN 'DELETE'
             END;

INSERT INTO TABLENAME_HISTO
  (ACTIVITY_DATE, ACTION, MTC_USER,
   old_field1, new_field1, old_field2, new_field2)
VALUES
  (SYSDATE, strAction, USERID,
   :OLD.field1, :NEW.field1, :OLD.field2, :NEW.field2) 
```

分享和享受。

# silverlight - Silverlight 图像不会更新

> ID：12588908
> 
> 赞同：0
> 
> 时间：2012-09-25T18:23:49.453
> 
> 标签：silverlight, silverlight-4.0

我有一个带有许多 png 图像的 Silverlight 4 项目。我在运行时使用加载图像

`StreamResourceInfo res = Application.GetResourceStream( new Uri( assemblyName + ";component/" + relativeUri, UriKind.Relative ) );`

接着

`var bmp = new BitmapImage( ); bmp.SetSource( res.Stream );`

图像本身在一个文件夹中；每个图像都有构建操作 = 资源，复制到输出目录 = 不要复制。它们都加载得很好。

然后，我替换其中一张图片。旧的仍然加载。我知道我指向正确的位置，因为如果我从文件夹中删除图像，应用程序不会显示任何图像。但是，当我把它们放回去时，我看不到新的；只有旧的。

我尝试过的事情：1.清除浏览器上的缓存。2\. 启动一个我从未使用过的浏览器。3\. 将图像从项目中取出并放回原处。4\. 将图像从文件夹中取出并放回原处。5\. 停止并重新启动浏览器。6\. 终止开发服务器。7\. 从 obj 和 bin 文件夹中删除 Silverlight 应用程序和 Web 应用程序的所有文件，然后重新构建。

我想不出别的了。

# .net - WCF 与 IDispatchMessageInspector.AfterReceiveRequest 方法的返回有什么关系？

> ID：12588910
> 
> 赞同：5
> 
> 时间：2012-09-25T18:23:51.400
> 
> 标签：.net, wcf

WCF 与返回的方法有什么关系**`IDispatchMessageInspector.AfterReceiveRequest`**？
我所遇到的只是**`return null;`**例子。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-25T22:18:17.587

它将值传递给`BeforeSendReply`方法，并可用于关联两个调用。[您可以在http://blogs.msdn.com/b/carlosfigueira/archive/2011/04/19/wcf-extensibility-message-inspectors](http://blogs.msdn.com/b/carlosfigueira/archive/2011/04/19/wcf-extensibility-message-inspectors.aspx)上的帖子示例中找到一个返回非空值的示例。 [.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2011/04/19/wcf-extensibility-message-inspectors.aspx) _

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T19:22:36.037

WCF 对返回值不做任何事情。

从[IDispatchMessageInspector.AfterReceiveRequest 方法](http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.idispatchmessageinspector.afterreceiverequest.aspx)：

> 返回值可以是您想要用于关联目的的任何对象；它作为 BeforeSendReply 方法中的相关性状态参数返回给您。

# c# - Google 云端硬盘“get_error 未实现”错误

> ID：12588912
> 
> 赞同：1
> 
> 时间：2012-09-25T18:23:55.853
> 
> 标签：c#, asp.net, google-drive-api

我正在尝试在我的应用程序中实现对 Google Drive 的使用，但我似乎收到以下错误`"Method 'get_Error' in type 'Google.Apis.Drive.v2.Data.FileList' from assembly 'Google.Apis.Drive.v2, Version=1.2.4647.29713, Culture=neutral, PublicKeyToken=null' does not have an implementation"`。有谁知道为什么会发生这种情况？我的代码基于 Google 为其任务 API 提供的示例。

下面的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.Util;
using System.Diagnostics;
using DotNetOpenAuth.Messaging;
using DotNetOpenAuth.OAuth2;
using Google.Apis.Authentication;
using Google.Apis.Authentication.OAuth2;
using Google.Apis.Authentication.OAuth2.DotNetOpenAuth;
using Google.Apis.Util;
using PrepHub.PrepHub;
using System.Web.Services;
using System.Threading;
using Google.Apis;
using Google.Apis.Drive.v2.Data;
using Google.Apis.Drive.v2;
using Google.Apis.Drive;

namespace DriveExample
{
    public partial class GDrive : System.Web.UI.Page
    {
        private static DriveService _service; // We don't need individual service instances for each client.
        private OAuth2Authenticator<WebServerClient> _authenticator;
        private IAuthorizationState _state;

        private IAuthorizationState AuthState
        {
            get
            {
                return _state ?? HttpContext.Current.Session["AUTH_STATE"] as IAuthorizationState;
            }
        }

        protected void Page_Load(object sender, EventArgs e)
        {

            if (_service == null)
            {
                _service = new DriveService(_authenticator = CreateAuthenticator());
            }

            if (HttpContext.Current.Request["code"] != null)
            {
                _authenticator = CreateAuthenticator();
                _authenticator.LoadAccessToken();
            }

            var ni = _service.Files.List().Fetch();

       }

        private OAuth2Authenticator<WebServerClient> CreateAuthenticator()
        {

            var provider = new WebServerClient(GoogleAuthenticationServer.Description);
            provider.ClientIdentifier = ClientCredentials.ClientID;
            provider.ClientSecret = ClientCredentials.ClientSecret;
            var authenticator =
                new OAuth2Authenticator<WebServerClient>(provider, GetAuthorization) { NoCaching = true };
            return authenticator;
        }

        private IAuthorizationState GetAuthorization(WebServerClient client)
        {
            // If this user is already authenticated, then just return the auth state.
            IAuthorizationState state = AuthState;
            if (state != null)
            {
                return state;
            }
            // Check if an authorization request already is in progress.
            state = client.ProcessUserAuthorization(new HttpRequestInfo(HttpContext.Current.Request));
            if (state != null && (!string.IsNullOrEmpty(state.AccessToken) || !string.IsNullOrEmpty(state.RefreshToken)))
            {
                // Store and return the credentials.
                HttpContext.Current.Session["AUTH_STATE"] = _state = state;
                return state;
            }

            string scope = DriveService.Scopes.Drive.GetStringValue();
            OutgoingWebResponse response = client.PrepareRequestUserAuthorization(new[] { scope });
            response.Send(); 
            return null;
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T20:05:25.883

我猜你的一些程序集已经过时了。例如，当您有一个程序集时会发生该错误，比如说 foo.dll (v1) 并且该程序集被 bar.dll (v2) 引用。bar.dll 中的一个类期望 Foo 中的一个类中存在某些东西，但它不存在。`Error`在您的情况下，它是在 class 上调用的属性的 get 访问器`FileList`。仔细检查所有程序集以确保它们都是最新版本。

# javascript - SvgAnimatedString 缺少方法 indexOf

> ID：12588913
> 
> 赞同：6
> 
> 时间：2012-09-25T18:23:59.263
> 
> 标签：javascript, d3.js, angularjs

我将[d3.js与](http://d3js.org/)[angularjs](http://angularjs.org/)一起使用。在 svg 对象（通过 angular 指令呈现）中使用超链接时，我收到此错误。

![在此处输入图像描述](../Images/174da05d116c59c01b86fc7194faf4ae.png)

根据[此处](https://developer.mozilla.org/en-US/docs/DOM/SVGAnimatedString)的文档， svgAnimatedString 没有任何特定方法。我该如何解决这个问题。我可以注入方法或任何其他方式。

下面的部分代码。谢谢。

```
svg.selectAll("a.node")
                        .data(data)
                        .enter().append("a")
                        .attr("class", "node")
                        .attr("xlink:href", "test")
                        .append("rect") 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-02-06T20:50:00.833

如果你必须处理一个不处理 SVG 图形的库，你可以使用类似下面的东西在 SVGAnimatedString 上定义分割。冲洗并重复其他字符串原型方法。

```
 // Set a split prototype on the SVGAnimatedString object which will return the split of the baseVal on this
 // SVGAnimatedString instance
 SVGAnimatedString.prototype.split = function(){ return String.prototype.split.apply(this.baseVal, arguments); }; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T22:26:06.377

各种图书馆都遇到了这个问题（即[here](https://github.com/jasondavies/d3/commit/7ab5e3567f6c5976c90e30d13e5b6ee3890590f1)）。在 SVG 中，当您尝试获取锚点的 href 属性时，它会返回一个`SVGAnimatedString`. 您可以使用`SVGAnimatedString.baseVal`. 我不知道如何在不修补 Angular 的情况下做到这一点，但这会让你了解需要什么：

```
 this.$$rewriteAppUrl = function(absoluteLinkUrl) {
     if (absoluteLinkUrl.baseVal != null) {
        absoluteLinkUrl = absoluteLinkUrl.baseVal;
     }
    if(absoluteLinkUrl.indexOf(appBaseUrl) == 0) {
      return absoluteLinkUrl;
    }
  } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-12-04T21:03:03.653

这是一个简单的 Shim，可以让它与现有代码一起工作：

```
SVGAnimatedString.prototype.toString = function () { return this.baseVal; } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-10T13:31:44.530

我没有使用 d3 也有同样的问题。我只使用纯 SVG 并使用 angularJS 控制器将其附加到 DOM 中。问题不在 d3 中。您可以通过在包含链接的元素上将 return false 值添加到 jQuery click 事件处理程序中来解决此问题。

我的 SVG 的一部分：

```
<g id="1" class="node">
<a xlink:title="title">
<polygon fill="#cccccc" stroke="#cccccc" points="25,-434 25,-457 98,-457 98,-434 25,-434"></polygon>
<polygon fill="none" stroke="black" points="25,-434 25,-457 98,-457 98,-434 25,-434"></polygon>
<text text-anchor="start" x="29.5" y="-442.3" font-family="Arial" font-size="14.00">title</text>
<polygon fill="transparent" stroke="black" points="25,-412 25,-434 98,-434 98,-412 25,-412"></polygon>
<text text-anchor="start" x="37" y="-419.8" font-family="Arial" font-size="14.00">title</text>
</a>
</g> 
```

jQuery重载方法：

```
$('g.node').click(function (element) {
   return false;
}); 
```

希望这可以帮助...

# java - 有没有办法通过 Sonar 或 Hudson 获得 testng 测试的准确计数？

> ID：12588917
> 
> 赞同：0
> 
> 时间：2012-09-25T18:24:23.677
> 
> 标签：java, unit-testing, hudson, testng, sonarqube

Hudson 和/或 Sonar 似乎报告了测试调用的数量，而不是测试的数量。

所以如果你有

```
@Test(invocationCount=1000)
testFoo() {} 
```

hudson 和 sonar 都会说有 1000 个测试，而实际上只有一个。除了 wc'ing @Test 标签的数量之外，有没有办法查看这个值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T08:00:23.203

AFAIK，没有办法在声纳中得到你想要的东西。

确实，在您给出的基本示例中，显示 Sonar 中有 1000 个测试可能会产生误导。但是，我不敢相信这是一个在不更改数据的情况下重复运行测试的常见用例（即多次运行**完全相同**的测试）。

但是，对于 Sonar 方面，请随时加入我们的用户邮件列表 (user@sonar.codehaus.org) 来讨论这个问题。

# mysql - msg senders 表的最佳查询变体

> ID：12588920
> 
> 赞同：1
> 
> 时间：2012-09-25T18:24:33.903
> 
> 标签：mysql

我有表“s_msgs”，他的结构是

```
id | from | to
------------------
1 | John | Robert
2 | John | Michael
3 | Robert | John 
4 | Michael | John 
```

我需要获取每对消息的发送方-接收方，即结果必须是

```
John | Robert 
John | Michael 
```

我写了查询，但我认为这不是最佳变体，更希望在表中会有几百万行，所以谁能告诉更多的最佳查询？

这是我的查询

```
 SELECT `from`,`to` FROM s_msgs WHERE id IN( 

             SELECT id FROM (
                 SELECT  MIN(id) AS id, 
                    CASE 
                        WHEN STRCMP(`to`,`from`) = -1 THEN CONCAT(`to`,`from`) 
                        ELSE CONCAT(`from`,`to`) 
                    END
                    AS conc
                FROM s_msgs

                GROUP BY conc

                ) AS t
            ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:27:05.570

怎么样

```
SELECT DISTINCT `from`, `to`
FROM YOUR_TABLE
UNION 
SELECT DISTINCT `to`,`from`
FROm YOUR_TABLE 
```

**编辑**

有一个新的，是救了我的ID。

看看这个演示

## [SQL 小提琴演示](http://www.sqlfiddle.com//#!2/4c501/12/0)

```
SELECT *
FROM   MY_TABLE f 
WHERE  NOT EXISTS (
                    SELECT 1 
                    FROM MY_TABLE t 
                    WHERE f.`from` = t.`to` 
                    AND f.`to` = t.`from` 
                    AND f.id > t.id) 
```

# ios - IOS 获取代理设置

> ID：12588923
> 
> 赞同：7
> 
> 时间：2012-09-25T18:24:46.313
> 
> 标签：ios, proxy, settings, libcurl

在我的项目中，我使用 libcurl 通过互联网下载数据。问题是 libcurl 没有检测到 wifi 连接的代理设置。

我必须手动设置 libcurl 的设置，所以我想知道如何获取 wifi 连接的代理设置。我在 KeyChain 中找到了一些关于信息的线索，但我无法检索它们。

你知道是否有办法获得这些设置，以便我可以为 libcurl 设置它们？

谢谢 ！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T08:00:25.490

我找到了回应！

使用这段代码似乎有效：

```
std::string getProxyName()
{
    CFDictionaryRef dicRef = CFNetworkCopySystemProxySettings();
    const CFStringRef proxyCFstr = (const CFStringRef)CFDictionaryGetValue(dicRef, (const void*)kCFNetworkProxiesHTTPProxy);
    char buffer[4096];
    memset(buffer, 0, 4096);
    if (CFStringGetCString(proxyCFstr, buffer, 4096, kCFStringEncodingUTF8))
    {
        return std::string(buffer);
    }
    return "";
}

int CDownloadThread::getProxyPort()
{
    CFDictionaryRef dicRef = CFNetworkCopySystemProxySettings();
    const CFNumberRef portCFnum = (const CFNumberRef)CFDictionaryGetValue(dicRef, (const void*)kCFNetworkProxiesHTTPPort);

    SInt32 port;
    if (CFNumberGetValue(portCFnum, kCFNumberSInt32Type, &port))
    {
        return port;
    }
    return -1;
} 
```

我还没有尝试使用自动代理配置，但我希望它能正常工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-28T07:18:45.640

它将 IP 地址作为字符串提供。

```
(NSString *)proxyName 
{

    CFDictionaryRef dicRef = CFNetworkCopySystemProxySettings();

    const CFStringRef proxyCFstr = (const CFStringRef)CFDictionaryGetValue(dicRef,
                                   (const void*)kCFNetworkProxiesHTTPProxy);

    return  (__bridge NSString *)proxyCFstr;

} 
```

# ruby-on-rails-3 - Rails，一种只能在生产环境中调用的方法

> ID：12588927
> 
> 赞同：0
> 
> 时间：2012-09-25T18:25:16.130
> 
> 标签：ruby-on-rails-3, ssl, filter, environment-variables

我记得在网上的某个地方看到过这个，但我知道很难找到有关它的信息。在 Rails 3.1 中，我在会话控制器的开头有一个方法 force_ssl，我只想在生产环境中调用它，我该怎么做？

为了澄清，代码看起来像这样

```
class SessionsController < ApplicationController
    force_ssl
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-19T06:23:07.320

我有一个类似的问题。force_ssl 通过使用 capybara 和 selenium 进行测试引起了问题。这解决了我的问题，测试现在正在运行：

```
force_ssl if Rails.env.production? 
```

我在某些控制器中使用上面的行。例如在 SessionController 和 UserController 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T18:36:06.620

`Rails.env.production?`如果当前环境是“生产”，则返回 true。更一般地，`Rails.env.somestring?`返回 true if `Rails.env == "somestring"`。从那里你应该很好。

** 编辑 **

实际上，有一种更简单的方法可以仅在生产中使用 ssl。看看[这篇文章](http://www.simonecarletti.com/blog/2011/05/configuring-rails-3-https-ssl/)

# php - 解析 Facebook 墙数据

> ID：12588930
> 
> 赞同：-3
> 
> 时间：2012-09-25T18:25:28.983
> 
> 标签：php, facebook

我正在寻找一种解决方案，其中用户在 facebook 墙上（个人墙或我们公司的页面墙）上发布带有特定标签的帖子。然后我想解析数据并执行某些操作。

例如用户写道：

```
@<some_handler> please perform #task with #option, and #param etc. 
```

然后应用程序应该能够提取#task，#option和#params并在用户的墙上执行一些具有一定响应的操作[假设用户已经授权我们的FB应用程序在他的墙上发布]

这可能吗？如何进行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T18:32:13.143

发布信息可通过[Graph API](https://developers.facebook.com/docs/reference/api/post/)获得。一旦你有了它，你应该能够解析你需要的字符串。

# xcode - 解除视图控制器动画：完成：升级到 xcode 4.5 后未找到

> ID：12588931
> 
> 赞同：0
> 
> 时间：2012-09-25T18:25:32.757
> 
> 标签：xcode, xcode4.5

升级到 xcode 4.5 后，我收到了一个警告，即弃用了 dismissViewControllerAnimated。我将代码更改为推荐的dismissViewControllerAnimated:completion: 并收到一条警告，提示未找到dismissViewControllerAnimated:completion:。知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T20:38:50.857

剪切和粘贴错误。

问题是当我将 Modal 替换为 dismissModalViewControllerAnimated:completed: 而不是 dismissViewControllerAnimated:completed: 时，我在调用中留下了 Modal

# css - Css divs布局问题

> ID：12588932
> 
> 赞同：0
> 
> 时间：2012-09-25T18:25:36.267
> 
> 标签：css

请看一下我构建的这个布局`divs`：

![在此处输入图像描述](../Images/90d6aa94741a61524b5ccabf267752d3.png)

首先你可以忽略`Header`部分

所以`Content`必须准确地居中在中心并且它有一个固定的宽度，这很容易，但`Left Column`需要从左侧延伸直到它到达`Content`，这是困难的部分，因为之间的间隙可以是任何长度`Left Column`，`Content`很难知道是什么`width`设置。

现在我知道这样做很容易，`javascript`但如果可能的话，我想避免这种情况。

**按要求编辑**这里是代码：

```
<div class="left_column"></div>
<div class="content"></div>

.left_column{
   width:100px;
   height:100px;
   float:left;
}

.content{
   width:100px;
   height:100px;
   margin:auto;
   position:relative;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T19:12:30.600

看看 [面向对象的 CSS](http://oocss.org/)。特别是，查看[他们的网格页面](http://oocss.org/grids_docs.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T18:42:23.503

我会使用百分比，但比你应该使用的位置少 1%。我发现很多时候浏览器会“四舍五入”一个像素或其他东西，所以如果你的百分比总计为 100%，任何额外的添加都会在下面推一个 div。

例如，如果您想要两个 div，一个在右侧，一个在左侧，则其中一个有`width:49%;`，另一个`width:50%;`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T19:00:33.347

这可以使用这个 hack 来完成，请试试这个：

```
div.header { height: 50px; line-height: 50px; background-color: #222; color: #eee; }
div.wrapper { background-color: #b261da;position: relative;z-index: 0; }
div.wrapper div.content { width: 600px;margin: 0 auto; background-color: #6189fe; color: #fefefe; }
div.wrapper div.left-column { background-color: #00fe72; position: relative;width: 550px;float: left;z-index: -1000; } 
```

使用此标记：

```
<div class="header">Header</div>
<div class="wrapper">
    <div class="left-column">Left Column</div>
    <div class="content">Content</div>
</div> 
```

**请注意**，`left-column`如果您将屏幕大小调整得过多，则会被剪切。无论哪种方式，我希望它有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T18:28:32.163

尝试百分比？

```
overflow: auto;
 padding: 10px;
 width: 45%; 
```

尝试左浮动右浮动以及内联显示，您也可以尝试自动宽度，但效果不太好

```
float:left;
 width:auto;
    height: auto;
    display: inline; 
```

菜单中还使用了另一种技巧

```
 <div id="mail_menu">
     <ul>
     <li><a href=something</a></li>
    </ul>
</div> 
```

css

```
#mail_menu {
 position: relative;
 top: 0px;
 left: 0px; /* LTR */
 z-index: 3;
 color: #000;
}
#mail_menu ul {
 list-style-type: none;
}
#mail_menu li {
 display: inline;
 float:left;
 margin: 0px;
 padding: 3px;
}
#mail_menu a {
 color: #000;
 background: #FFF;
 text-decoration: none;
 font-family: Arial, Helvetica, sans-serif;
 font-size: 12px;
 font-weight: bold;
 margin: 1px;
 border-color:#CCC;
 border-width:1px 0;
 padding: 2px;
 float:left;
 border-width:1px;
  border-style:solid;
  border-bottom-color:#aaa;
  border-right-color:#aaa;
  border-top-color:#ddd;
  border-left-color:#ddd;
  border-radius:3px;
  -moz-border-radius:3px;
  -webkit-border-radius:3px;

}
#mail_menu a:hover {
 color: #0000DD;
 text-decoration: none;
 background-image: url(/images/lyel.png);
 background-repeat: repeat-x;
} 
```

css 到中间的东西

```
.middle {
 display: block;
 width: 50em;

 margin-left: auto;
 margin-right: auto
} 
```

最后是一些要显示的表值

```
.td {
display: table-cell;
display:inline
}

.wrap{
 position: inherit;
}

.tr {
display: table-row;
display:inline
}

table {
  border-collapse: collapse;
}
th {
  text-align: left; /* LTR */
  padding-right: 1em; /* LTR */
  border-bottom: 3px solid #ccc;
} 
```

# computer-science - 如何在语义上比较文本

> ID：12588936
> 
> 赞同：1
> 
> 时间：2012-09-25T18:25:42.233
> 
> 标签：computer-science, semantics

假设您有一堆书籍描述。什么是使该文本相互可比的技术，所以我可以将具有相似主题的书籍分组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T13:25:17.657

有大量的算法和技术可用于确定两个文本单元的[相似性。](http://en.wikipedia.org/wiki/Similarity)如果您不关心含义，而只是对两个字符串的词汇相似性感兴趣，那么有很多[字符串相似性](http://en.wikipedia.org/wiki/Category%3aString_similarity_measures)技术，其中 Levenshtein 距离是最著名的，即使不是最好的. 但是，您明确表示您需要语义相似性，因此有关[潜在语义分析](http://en.wikipedia.org/wiki/Latent_semantic_analysis)的 WikiPedia 页面将为您提供一个很好的起点。非常粗略地说，LSA 会查找包含高于平均出现频率的不常用术语（单词或词组）的文档，并根据不常用术语的使用频率对文档进行聚类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-13T05:19:57.143

如果您想在句子级别进行比较，我建议您使用 Jaccard 的相似系数。将每个句子视为最小单位。您可以根据需要深入到单词。这并不能真正解决问题的“语义”部分，但可以作为一个很好的字符串相似性算法。

# wpf - 文本框的多重绑定

> ID：12588944
> 
> 赞同：0
> 
> 时间：2012-09-25T18:26:20.120
> 
> 标签：wpf

我有一个绑定到图表控件（第 3 方 WPF 控件）的 TextBox。

当我将鼠标悬停在图表上时，文本框会显示图表 X 轴值。

现在我有另一个图表。我想将同一个文本框与此图表绑定，以便当我将鼠标悬停在任何图表上时，来自各自的数据显示在文本框中。

我在 WPF 中经历了多个绑定，但不确定是否可以在我的场景中使用。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T20:49:40.507

我没有你的图表控制（不管它是什么），所以我只能模拟正在发生的事情。

在此示例中，我有两个滑块，每个都绑定到 SAME 文本框，但仅用于推送值，我相信这`OneWayToSource`就是您所需要的。

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"

    Title="MainWindow" Height="350" Width="525">

<StackPanel>
    <Slider Value="{Binding ElementName=Output, Path=Text, Mode=OneWayToSource}"/>
    <Slider Value="{Binding ElementName=Output, Path=Text, Mode=OneWayToSource}"/>
    <TextBlock Name="Output"/>
</StackPanel>
</Window> 
```

# asp.net - 为按钮创建一个 newEventHandler。但由于某种原因，数据字段为空

> ID：12588947
> 
> 赞同：0
> 
> 时间：2012-09-25T18:26:29.653
> 
> 标签：asp.net, sql, stored-procedures

我创建了一个新的事件处理程序来处理两个不同的事件。一个是用于保存新文档。另一个用于保存编辑。

我在我的 Page_load 中添加了这个：

```
if (Request.QueryString["ExhibitID"] != null)//new
{
    if (!IsPostBack)
    {
        ddlCaseFiles.DataSourceID = "dsCaseFiles";
        ddlCaseFiles.DataTextField = "Display";
        ddlCaseFiles.DataValueField = "FileID";
        rbByFileID.Checked = true;
        rbMyFiles.Checked = false;
        ddlCaseFiles.DataBind();
        editExhibit(int.Parse(Request.QueryString["ExhibitID"]));//new
        exhibitHeader.InnerText = "Edit Exhibit";
    }
    hidSavedExhibitID.Value = Request.QueryString["ExhibitID"];
    saveExhibitBtn.Click += new EventHandler(this.btnUpdateExhibit_Click);
}
else
{
    saveExhibitBtn.Click += new EventHandler(this.saveExhibitBtn_Click);
} 
```

我的保存方法由于某种原因一直循环然后崩溃，因为它第二次通过，没有数据，因为我在第一次保存后重置它。我不知道为什么它会运行我的保存方法两次。

这是我的保存方法：

```
 protected void saveExhibitBtn_Click(object sender, EventArgs e)
{
    hidSavedExhibitID.Value = null;
    int newExhibitID = saveExhibit();

    int propertyID = autoCreateProperty(newExhibitID);
    linkExhibitAndProperty(newExhibitID, propertyID);

    SaveInfoIntoSessionVariables();
    ClearFormFields();
} 
```

“saveExhibit()”方法是我实际访问数据库并存储所有内容的地方。它工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T18:51:48.470

Because you re bind your datas in your Page_Load.

You must persist your datas with ViewState, `EnableViewState="true"`

You bind your datas just one time, in the `! IsPostBack`. in order to not erase the selected values

```
If(! IsPostBack)
{

   //Bind your datas with `DataBind()`
} 
```

# javascript - 在浏览器中创建 PDF：自定义字体

> ID：12588948
> 
> 赞同：1
> 
> 时间：2012-09-25T18:26:32.067
> 
> 标签：javascript, pdf, fonts, browser

[我知道有两个库可以在浏览器（ [1]](https://code.google.com/p/jspdf/)，[[2]](https://github.com/Marak/pdf.js) ）中使用 Javascript 创建 PDF 文件，但它们都不允许将自定义字体嵌入到文档中。 [[2]](https://github.com/Marak/pdf.js)允许设置自定义字体，但仅限于标准 PDF 字体（Courier、Times-Roman），并且不再积极开发它们。

有谁知道一个仍在积极开发并支持嵌入自定义字体的浏览器中创建 PDF 文件的库？

干杯，

曼努埃尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T07:57:06.103

好的，看起来当前的实现不支持它。所以我正在使用 emscripten 将 libharu 移植到 javascript：

项目： [https ://github.com/manuels/hpdf.js](https://github.com/manuels/hpdf.js)

演示： http: [//manuels.github.com/hpdf.js/](http://manuels.github.com/hpdf.js/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-24T20:41:53.197

如果其他人正在寻找，还有这个：[https ://github.com/devongovett/pdfkit](https://github.com/devongovett/pdfkit)

它看起来比 hpdf 更积极地开发，但我无法让它工作仅仅使用带有节点模块 brfs 的 browserify 作为文档提到的（首先 brfs 只适用于静态路径，但它似乎也没有输出原始数据字体正确），我必须这样做才能让它工作：

*   如果您的字体没有 cmap：打开，然后使用 fontforge 将字体导出为 ttf（在导出选项中带有字形映射）
*   以字符串格式获取ttf文件的base64（我使用python读取ttf文件的内容，用base64编码，删除换行符，然后保存到另一个文件）
*   将字符串作为变量粘贴到脚本中
*   创建一个缓冲区对象，并将其作为字体与 pdfkit 一起传递，即

    ```
    fontCenturyGothicBase64 = "your base64 encoded string here";
    fontCenturyGothic = new Buffer(fontCenturyGothicBase64, 'base64');

    doc.font(fontCenturyGothic); 
    ```

*   在javascript文件上使用browserify（Buffer是一个节点对象而不是纯js）

也许不使用 Buffer 对象（因此浏览器化）是可能的，我没有尝试过。

# .htaccess - htaccess 从子域重定向到 ip

> ID：12588957
> 
> 赞同：0
> 
> 时间：2012-09-25T18:27:00.790
> 
> 标签：.htaccess, redirect, ip

我有一个别名，例如***.domain.com**到**domain.com**。

因此，我需要从**a.domain.com**重定向到特定**IP ，并在****b.domain.com**或**z.domain.com**等其他子域上发送错误 404。

我知道有必要深入研究**.htaccess**但找不到正确的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T20:25:09.283

我找到了解决方案。

```
RewriteCond %{HTTP_HOST} ^a.domain\.com [NC] 
RewriteRule (.*) http://111.111.111.111/$1 [R=301,L]

RewriteCond %{HTTP_HOST} !^domain\.com [NC] 
RewriteRule (.*) http://domain.com/404/ [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T18:30:58.620

理想情况下，您将修复名称服务器以将 a.domain.com 指向正确的服务器。如果没有，您应该使用虚拟主机，然后使用重定向 ( [http://httpd.apache.org/docs/2.2/mod/mod_alias.html#redirect](http://httpd.apache.org/docs/2.2/mod/mod_alias.html#redirect) ) 为您获取正确的地址。

# actionscript-3 - 嵌套从外部 SWF 加载的 MovieClip 后，MovieClip 不调度鼠标事件

> ID：12588964
> 
> 赞同：0
> 
> 时间：2012-09-25T18:27:21.793
> 
> 标签：actionscript-3, apache-flex, movieclip

大多数情况下，标题中描述了问题......我试图加载一个包含一些命名MovieClip实例的外部SWF文件（导出和命名由Flash CS5软件完成）并添加一些外部加载（命名）MovieClip-s在我的代码中创建的 MovieClip 对象。当我将 MOUSE_CLICK 侦听器添加到父 MovieClip 时出现问题。简单地说，当我在舞台上单击它时它不会调度事件......

```
private var loader:Loader;

public function Example(){
    loader = new Loader();
    var request:URLRequest = ... // URL to external SWF
    loader.contentLoaderInfo.addEventListener(Event.COMPLETE, loadingCompleted)
    loader.load(request);
}

private function loadingCompleted(event:Event):void{
    var mc:MovieClip = loader.content as MovieClip;
    var myMovie:MovieClip = new MovieClip(); 
    myMovie.addChild(mc.getChildByName("object_name"));
    myMovie.addEventListener(MouseEvent.CLICK, myMovieClicked);
    addChild(myMovie); // myMovie (with nested mc) appears on the stage
}

private function myMovieClicked(evt:Event):void{
//never reached
} 
```

**编辑：**我没有提到我正在使用 FlashBuilder 4.5 在 Flex 中工作，我在其中创建了 ActionScript 项目。上面的代码是示例类的主体，它是主要的 SWF 类。

**回答后编辑：** `myMovie.mouseChildren = false`解决问题。早些时候我尝试设置`mouseEnabled = true`，它并没有解决问题。但是我现在对事件流感到困惑......即使子节点是目标节点，为什么当父节点仍在事件流上时父 MovieClip 上的鼠标侦听器没有收到事件（在捕获阶段）？此外，当我在我的代码中创建另一个电影剪辑（内部有一些简单的形状）并将其添加到 myMovie 时，一切正常。当我从外部加载的 SWF 获取影片剪辑时，有什么特别之处？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T23:46:12.830

你试过做`myMovie.mouseEnabled = true`和`myMovie.mouseChildren = false`吗？

# android - Loader 在 Activity 的 onCreateOptionsMenu 之前调用 onLoadFinished

> ID：12588969
> 
> 赞同：7
> 
> 时间：2012-09-25T18:27:49.330
> 
> 标签：android

当`AsynctaskLoader`从 Activity 启动an 时`OnCreate()`，它会在操作栏菜单膨胀之前完成其工作并调用`onLoaderFinished()` ，即在`onCreateOptionsMenu()`调用之前。

我需要根据加载程序的结果更改一些操作菜单项。什么方法可以解决这个问题？

更新：这发生在方向改变时。我在调试器中观察这个序列：

1.  应用程序开始：`onCreate()`-> `onCreateOptionsMenu()`->`onLoadFinished()`
2.  旋转到横向：`onCreate()`-> `onLoadFinished()`->`onCreateOptionsMenu()`
3.  旋转回纵向：`onCreate()`-> `onLoadFinished()`->`onCreateOptionsMenu()`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-08T04:58:46.057

我在尝试调用时遇到了同样的情况`shareActionProvider.setShareIntent()`，`onLoadFinished()`这取决于 shareActionProvider 在`onCreateOptionsMenu()`.

我的解决方案是将我的 Intent 和 ShareActionProvider 都限定为 Fragment，然后在每个方法中初始化适当的字段并设置另一个（如果已定义）。这样，无论首先调用哪个，它都可以正常工作，而不会使菜单无效。

这基本上是它的样子

```
public class myFragment extends Fragment implements LoaderManager.LoaderCallbacks<Cursor> {
...
private ShareActionProvider shareActionProvider;
private Intent shareIntent;
... 
```

onCreateOptionsMenu()

```
@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    inflater.inflate(R.menu.menu_my_fragment, menu);

    MenuItem menuItem = menu.findItem(R.id.action_share);
    shareActionProvider = (ShareActionProvider) MenuItemCompat.getActionProvider(menuItem);
    //in the case where onLoadFinished is called first, simply set the share intent here.
    if (null != shareIntent)
    {
        shareActionProvider.setShareIntent(shareIntent);
    }
} 
```

onLoadFinished()

```
@Override
public void onLoadFinished(android.support.v4.content.Loader<Cursor> loader, Cursor data) {

    ... <get some data from cursor> ...

    shareIntent = new Intent(Intent.ACTION_SEND);
    shareIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_DOCUMENT);
    shareIntent.setType("text/plain");
    shareIntent.putExtra(Intent.EXTRA_TEXT, getString(R.string.share_text)+data);

    //shareActionProvider may be null due to onLoadFinished called before onCreateOptionsMenu
    if (null != shareActionProvider)
    {
        shareActionProvider.setShareIntent(shareIntent);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T18:44:06.407

> 我需要根据加载程序的结果更改一些操作菜单项。什么方法可以解决这个问题？

那么，您的场景 #2 和 #3 应该非常适合您。到时间`onCreateOptionsMenu()`被调用时，您已经拥有了您的`Cursor`（或其他），`Loader`并且可以定制您在`onCreateOptionsMenu()`.

关于场景#1，`onCreateOptionsMenu()`做最有可能的事情，如果你确定`onLoadFinished()`这是不正确的，我想打电话`invalidateOptionsMenu()`来强制另一个电话。`onCreateOptionsMenu()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T14:17:21.397

这种特殊方法避免了使整个菜单无效。

根据加载器结果的结果，为要控制的每个项目定义一个布尔标志和一个 MenuItem 变量：

假设您只想在 loader 返回任何成功时启用*New操作：*

```
private boolean mEnableNew = false;
private MenuItem mItemNew; 
```

创建菜单时将菜单项保存到变量中，同时应用状态：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
  getMenuInflater().inflate(R.menu.manage_menu, menu);

  mItemNew = menu.findItem(R.id.itm__manage_menu__new);
  mItemNew.setEnabled(mEnableNew);

  return super.onCreateOptionsMenu(menu);
} 
```

最后，根据 Loader 的结果获取新的设置，并启用禁用菜单项：

```
@Override
public void onLoadFinished(Loader<BI_Result> loader, Result result) {

    //--If onCreateOptionsMenu is not yet executed,it will use this boolean value when it does
    mEnableNew = result.isSuccess(); 

    //--If onCreateOptionsMenu has executed, we apply state here
    if (mItemNew != null) {
        mItemNew.setEnabled(mEnableNew);
    }
} 
```

# ruby-on-rails - capybara with :js => true 非常慢

> ID：12588970
> 
> 赞同：0
> 
> 时间：2012-09-25T18:27:50.493
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rspec, capybara

当我在示例中切换 :js => true 时，需要很长时间才能启动并运行第一个测试，然后变得可以接受

此示例在没有 :js 的情况下运行 0.36722 秒，在 :js => true 的情况下运行 58.15 秒

```
require 'spec_helper'

include UserAbilitiesHelper

describe "Customer Task Pages" do

  subject { page }

  describe "side panel with the history of the tasks related to customer" do
    before do
      visit root_path()
    end

    it { sould have_content(I18n.t("customers.tasks.side.title")) }

  end

  describe "side panel with the history of the tasks related to customer" do
    before do
      visit root_path()
    end

    it { sould have_content(I18n.t("customers.tasks.side.title")) }

  end

end 
```

我的宝石文件

```
source 'https://rubygems.org'

gem 'rails', '3.2.5'
gem 'pg', '0.12.2'

gem "meta_search"

# Bootstrap and layouting
gem 'bootstrap-sass', '2.0.3'
gem 'will_paginate', '3.0.3'
gem 'bootstrap-will_paginate', '0.0.6'
gem 'rails3-jquery-autocomplete'

#test support
gem 'faker', '1.0.1'

#login rules
gem 'devise'
gem 'cancan'

#criptar
gem 'bcrypt-ruby', '3.0.1'

#BR
gem 'brazilian-rails'
gem 'rails-i18n'

group :development do
    gem 'annotate', '~> 2.4.1.beta'
    gem 'nested_scaffold'
end

group :development, :test do
  gem 'rspec-rails', '2.10.0'
  gem 'guard-rspec', '0.5.5'
  gem 'guard-spork', '0.3.2'
  gem 'spork', '0.9.0'
  gem 'ruby-debug19'
  gem 'linecache19'
  gem 'factory_girl_rails', '1.4.0'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '3.2.4'
  gem 'coffee-rails', '3.2.2'
  gem 'uglifier', '1.2.3'
end

gem 'jquery-rails', '2.0.0'

group :test do
  gem 'capybara', '1.1.2'
  gem "launchy"
  gem 'ZenTest'
  #MAC OS Especific
  gem 'rb-fsevent', '0.4.3.1', :require => false
  gem 'growl', '1.0.3'

  #Cucumber
  gem 'cucumber-rails', '1.2.1', require: false
  gem 'database_cleaner', '0.7.0'
end

group :production do
  #gem 'pg', '0.12.2'
end 
```

与运行

```
bundle exec rspec 
```

任何一个例子

```
Bruno-Guerras-MacBook-Pro:railstutorial brunoguerra$ bundle exec rspec spec/requests/authentication_pages_spec.rb 
No DRb server is running. Running in local process instead ...
WARNING: Nokogiri was built against LibXML version 2.7.8, but has dynamically loaded 2.7.3
.....................

Finished in 6.07 seconds
21 examples, 0 failures
Bruno-Guerras-MacBook-Pro:railstutorial brunoguerra$ bundle exec rspec spec/requests/authentication_pages_spec.rb 
No DRb server is running. Running in local process instead ...
WARNING: Nokogiri was built against LibXML version 2.7.8, but has dynamically loaded 2.7.3
............F........

Failures:

  1) Authentication authorization for non-signed-in users when attempting to visit a protected page after signing in should render the desired protected page
     Failure/Error: page.should have_selector('title', text: 'Edit user')
       expected css "title" with text "Edit user" to return something
     # ./spec/requests/authentication_pages_spec.rb:65:in `block (6 levels) in <top (required)>'

Finished in 1 minute 14.18 seconds
21 examples, 1 failure

Failed examples:

rspec ./spec/requests/authentication_pages_spec.rb:64 # Authentication authorization for non-signed-in users when attempting to visit a protected page after signing in should render the desired protected page
Bruno-Guerras-MacBook-Pro:railstutorial brunoguerra$ 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T01:32:05.827

我发现，我的dns服务器太慢了，我换了我的dns服务器，问题就解决了，我为提高测试速度所做的另一件事是配置这些参数webrick [configure webrik speedup](https://stackoverflow.com/questions/1156759/webrick-is-very-slow-to-respond-how-to-speed-it-up)但是，它解决了同样的问题，DNS服务器！啊！！！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-15T07:04:29.343

您还可以尝试更改驱动程序 :webkit_debug 然后重新运行您的规范以查看是否有任何不需要在页面上加载的脚本。

```
Capybara.javascript_driver = :webkit_debug 
```

然后将任何网址添加到黑名单

```
config.before(:each, js: true) do
   page.driver.browser.url_blacklist = ["http://use.typekit.net"]
end 
```

# ubuntu - Rabbitmq 忽略 Ubuntu 12 上的配置

> ID：12588971
> 
> 赞同：13
> 
> 时间：2012-09-25T18:27:52.617
> 
> 标签：ubuntu, rabbitmq

我已经从**Ubuntu 12**`rabbitmq-server`上的系统包安装，无论我做什么，它似乎都忽略了任何配置文件。

 **网络上的所有内容都说服务器正在寻找`/etc/rabbitmq/rabbitmq.conf`，但即使我创建了该文件，服务器也不会报告任何配置：

```
> /usr/sbin/rabbitmq-server 

node           : rabbit@ip-10-160-149-160
app descriptor : /usr/lib/rabbitmq/lib/rabbitmq_server-2.7.1/sbin/../ebin/rabbit.app
home dir       : /var/lib/rabbitmq
config file(s) : (none) 
```

我尝试设置`RABBITMQ_CONFIG_FILE`指向该文件，但这没有效果。

Fwiw，我`rabbitmq-env.conf`似乎想从中获取脚本`/etc/rabbitmq.conf.d`，但这些似乎应该是 bash 脚本，而不是 Erlang 配置。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-25T19:05:34.423

我终于`/etc/rabbitmq/rabbitmq-env.conf`完全删除了一些运气。我还注意到 erlang 配置是 rabbitmq。**config**而不是'conf'，尽管修复它仍然没有解决问题。

删除`rabbitmq-env.conf`至少可以让服务器找到`rabbitmq.config`. 天哪，什么乱七八糟的。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-12T16:28:25.707

设置 RABBITMQ_CONFIG_FILE 有效，但您应该将其设置为**不带 .config 扩展**名的文件名！这意味着实际文件必须具有扩展名 .config。

我今天浪费了很多时间来解决这个问题。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-07-31T12:02:47.887

1) RabbitMQ 提供了一个示例配置文件，具体取决于您的发行版，您可以在这些目录中找到它，

```
 Generic UNIX - $RABBITMQ_HOME/etc/rabbitmq/
    Debian - /etc/rabbitmq/
    RPM - /etc/rabbitmq/
    Mac OS X (Macports) - ${install_prefix}/etc/rabbitmq/, the Macports prefix is usually /opt/local
    Windows - %APPDATA%\RabbitMQ\ 
```

2) 要在 debian 上创建配置文件，我将示例文件移动到 /etc/rabbitmq 目录。

3) 将 rabbitmq.config.example 重命名为 rabbitmq.config

4) 在 rabbitmq-env.conf 中，将 CONFIGFILE 变量分配给上面的配置文件的路径，但**没有提到文件扩展名(.config)**

```
CONFIGFILE=/etc/rabbitmq/rabbitmq 
```

5）重新启动rabbitmq-server。在 Debian 上

```
sudo /etc/init.d/rabbitmq-server start 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-29T20:21:35.133

我成功地将配置放入`/etc/rabbitmq/rabbitmq.config`. 无需删除`/etc/rabbitmq/rabbitmq-env.conf`。

Ubuntu 12.04 上的 RabbitMQ 2.7.1

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-16T03:48:24.433

总之 1.tylko rabbitmq.config 文件没有 rabbitmq-env.conf 可以工作，但是需要重置服务器： `/etc/init.d/rabbitmq-server`（start，stop），不要：   `rabbitmqctl`（stop_app，reset，start_app） 2 rabbitmq.config 和 rabbitmq-env.conf可能是这样，但是：在 RabbitMQ-env.conf 中必须指定路径： `CONFIG_FILE = /etc/rabbitmq/rabbitmq`没有 config ext！

至少对我来说 :) Debian 7.0 Rabbit 3.1 erl 1.15

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-16T03:53:59.770

总之
1.只有rabbitmq.config文件没有`rabbitmq-env.conf`工作，但需要重置服务器：`/etc/init.d/rabbitmq-server (start, stop)`，不要： `rabbitmqctl (stop_app, reset, start_app)`
2.`rabbitmq.config and rabbitmq-env.conf`可能是，但是：in`rabbitmq-env.conf`必须指定路径：`CONFIG_FILE = /etc/rabbitmq/rabbitmq`没有config ext！

至少对我来说 :) Debian 7.0 Rabbit 3.1 erl 1.15

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-08-21T16:58:43.257

1.  创建rabbitmq-env.conf： `echo CONFIG_FILE=/etc/rabbitmq/my-rabbitmq.conf > /etc/rabbitmq/rabbitmq-env.conf`
2.  下载 systcl 模式配置文件： `wget https://raw.githubusercontent.com/rabbitmq/rabbitmq-server/master/docs/rabbitmq.conf.example -O /etc/rabbitmq/my-rabbitmq.conf`
3.  重启服务器： `systemctl restart rabbitmq-server.service`
4.  观察日志变化： `tail -n 50 /var/log/rabbitmq/rabbit@rabbitmq.log|head -n 20`
5.  查看结果 [my-rabbitmq.conf 结果](https://i.stack.imgur.com/1EkL3.png)

* * *

查看更多：[https ://www.rabbitmq.com/configure.html#customise-environment](https://www.rabbitmq.com/configure.html#customise-environment)**

# xcode - 从 WCF REST 服务生成的 JSON 获取 NSDate

> ID：12588972
> 
> 赞同：1
> 
> 时间：2012-09-25T18:27:59.407
> 
> 标签：xcode, nsdate, wcf-rest, epoch

以下代码有效，但感觉很脏。有没有更标准的方法将带有偏移的纪元日期转换为 NSDate？

```
- (NSDate *) dateFromJSONString: (NSString *) JSONString{
    //expects JSON from .NET WCF Service in epoch ticks, ex:
    //"timeScheduled":"\/Date(1348600140000+0100)\/"
    NSString *date = [[JSONString stringByReplacingOccurrencesOfString:@"/Date("         withString:@""] stringByReplacingOccurrencesOfString:@")/" withString:@""];
    NSString *offsetString = [date substringFromIndex:(date.length - 5)];

    //convert to seconds
    NSTimeInterval dateInterval = [date doubleValue] /1000;

    //gets offset value in seconds - +0100 -> 100 -> 1 -> 3600
    double offsetValue = ([offsetString doubleValue] / 100) * 60 * 60;
    if ([[offsetString substringToIndex:1] isEqualToString:@"+"]) {
        dateInterval = dateInterval + offsetValue;
    }
    else{
        dateInterval = dateInterval - offsetValue;
    }

    NSDate *retVal = [[NSDate alloc]initWithTimeIntervalSince1970:dateInterval];

    return retVal;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T16:06:38.917

试试这个 [原来的要点](https://gist.github.com/1135412)

```
 @implementation NSDate (DotNetDates)

+(NSDate*) dateFromDotNet:(NSString*)stringDate{

 NSDate *returnValue;

if ([stringDate isMemberOfClass:[NSNull class]]) {
   returnValue=nil;
}
else  {
  NSInteger offset = [[NSTimeZone defaultTimeZone] secondsFromGMT];

  returnValue= [[NSDate dateWithTimeIntervalSince1970:
                   [[stringDate substringWithRange:NSMakeRange(6, 10)] intValue]]
                  dateByAddingTimeInterval:offset]; 
}

   return returnValue;

}
 -(NSString*) dateToDotNet{
 double timeSince1970=[self timeIntervalSince1970];
 NSInteger offset = [[NSTimeZone defaultTimeZone] secondsFromGMT];
 offset=offset/3600;
 double nowMillis = 1000.0 * (timeSince1970);
 NSString *dotNetDate=[NSString stringWithFormat:@"/Date(%.0f%+03d00)/",nowMillis,offset] ;
return  dotNetDate;
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T23:27:25.360

// /日期（-422928000000+0100）/ 文档：

DateTime 值显示为 JSON 字符串，格式为“/Date(700000+0500)/”，其中第一个数字（在提供的示例中为 700000）是 GMT 时区的毫秒数，常规（非夏令时）自 1970 年 1 月 1 日午夜以来的时间。该数字可能为负数以表示较早的时间。示例中由“+0500”组成的部分是可选的，表示时间是本地类型的——也就是说，应该在反序列化时转换为本地时区。如果不存在，则将时间反序列化为 Utc。实际数字（本例中为“0500”）及其符号（+ 或 -）将被忽略。

NSTimeInterval 总是以秒为单位指定；它在 10,000 年的范围内产生亚毫秒精度。

```
+ (NSDate*) dateFromDotNet:(NSString *)stringDate{
    if(stringDate==(id)[NSNull null])
        return nil;
    NSInteger ix0= [stringDate rangeOfString:@"("].location;
    NSInteger ix1= [stringDate rangeOfString:@")"].location;
    if(ix0==NSNotFound || ix1==NSNotFound)
        @throw [NSException exceptionWithName:@"ExceptionName" reason:@"Invalid JSON data" userInfo:@{@"json":stringDate}];
    NSRange range= NSMakeRange(ix0+1, ix1-ix0);
    NSString *dateString= [stringDate substringWithRange:range];
    // dateString:  -422928000000+0100    
    NSCharacterSet *signs= [NSCharacterSet characterSetWithCharactersInString:@"+-"];
    range= [dateString rangeOfCharacterFromSet:signs option:NSBackwardSearch];
    // WCF will send 13 digit-long value for the time interval since 1970 (millisecond precision)
    // whereas iOS works with 10 digit-long values (second precision), hence the divide by 1000
    NSTimeInterval unixTime = [dateString doubleValue] / 1000;

    if(range.location!=NSNotFound){
        NSString *sign = [dateString substringWithRange:range];
        NSString *off  = [dateString substringFromIndex:range.location+1];
        // gets offset value in seconds -+0100 -> 100 -> 1 -> 3600
        double offset  = ([off doubleValue] / 100) * 60 * 60;
        if ([sign isEqualToString:@"+"])
            unixTime+= offset;
        else
            unixTime-= offset;
    }
    NSDate *date= [NSDate dateWithTimeIntervalSince1970:unixTime];
    return date;
} 
```

# unicode - Unicode 文本变成问号

> ID：12588974
> 
> 赞同：0
> 
> 时间：2012-09-25T18:28:18.530
> 
> 标签：unicode

我正在使用一个将文本插入图像的程序。

[http://www.free-picture-editor.com/pixenate/themes/cardmaker/arrowheb.php](http://www.free-picture-editor.com/pixenate/themes/cardmaker/arrowheb.php)

当我插入 Unicode 时，它​​会变成问号。我确实将这一行添加到 php 文件的顶部：

```
<meta http-equiv="content-type" content="text/html;charset=UTF-8"> 
```

知道还需要做什么来解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T18:58:19.647

您需要一个可以处理 Unicode 字符的程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T22:50:40.463

图像对我来说似乎很好。Unicode 字符应该是它们，它们不是问号。这意味着正在对不支持这些字符的字符集执行数据转换。所以它必须是您特定的网络浏览器的问题。

要检查的其他内容：确保您的网络服务器未发送`Content-Type`指定覆盖 HTML 标记的不同字符集的标头。当我转到该 URL 时，`Content-Type`标头中没有指定字符集，因此使用了 HTML 字符集。但也许在您的机器上，您的网络浏览器的标识不同，因此网络服务器会在`Content-Type`标头中发送一个字符集。

# javascript - 使用 ajax 返回数组或字符串，所以我可以在控制器 Cakephp 2 中使用它

> ID：12588975
> 
> 赞同：0
> 
> 时间：2012-09-25T18:28:21.607
> 
> 标签：javascript, ajax, json, cakephp, cakephp-2.0

情况是我在一个页面中有几个横幅（广告），我需要将它在页面中显示的次数保存到数据库中。说，

我有 id=1、2、3、4、5 的横幅。

现在每次刷新页面时，它都会加载到页面横幅 id = 1、2、3。所以，我需要使用这个 id，以便将字段保存到数据库中以获取查看次数。

我的问题是，如何使用 jquery ajax 来返回该 ID 号，以便我可以在控制器中使用它。我已经在javascript中设置

```
var adId = '1,2,3'; 
```

当然，我可以使用 ajax 并循环多次，并将每个 id 作为多个 ajax 调用，但我不想这样做。无论如何可能使用json或其他东西来获取该数据，以便每次页面加载时我都可以在控制器中使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T21:37:28.367

这应该是您的 jquery 将数据发送到您的控制器操作。

```
$.get("<?php echo $this->Html->url('controller' => 'ads', 'update_views'); ?>", { id: "1"} ); 
```

这应该在您的控制器中，例如：ads_controller.php

```
function update_views(){
  if isset($_GET['id']){
    $ad_id = $_GET['id'];
    $ad = $this->Ad->read($ad_id);
    $this->Ad->id = $ad_id;
    $this->Ad->saveField('views', $ad['views']+1);
  }
  return false; // not to return a view.
} 
```

我没有测试这个，希望它有效。我相信会的。希望我理解正确。干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T18:41:27.263

不知道你想做什么，或者你使用什么服务器端语言。您可以将数据作为 json 格式的数组发送：

```
var adId = [1, 2, 3]; 
```

在 javascript 中，您可以像使用普通数组一样使用它。如果您在服务器端使用 PHP，您可以申请`json_decode()`将 json 格式的字符串转换为可在 PHP 中使用的数组。

# javascript - 用于预加载图像的 JavaScript 在 IE 上不起作用

> ID：12588976
> 
> 赞同：-5
> 
> 时间：2012-09-25T18:28:30.360
> 
> 标签：javascript, jquery, internet-explorer

这是我的代码。它在 Chrome 和 Firefox 上运行良好，但在 Internet Explorer 上不行，而且在 Mobile Safari 上也行不通。

```
$(document).ready(function () {
    $('.correct4').load(function () {
        $("#gallery .loader4").css("display", "none");
        $("#gallery .correct4").css("display", "block");
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:17:56.647

我发现即使/当*隐藏*图像尚未加载时，IE 也会触发 jQuery`.load()` [事件。](http://api.jquery.com/load-event/)就像它在决定触发事件时完全忽略隐藏的图像一样。*`.load()`*

 *为了解决这个问题，我只是将我的图像放在一个隐藏的容器中`div`，而不是隐藏图像本身。然后，一旦包含的资产完全加载，该`.load()`事件将触发并显示其中已包含图像的容器。

**HTML：**

```
<div id="containerDiv">
    <img src="/image.jpg" alt="" border="0" />
    <img src="/picture.jpg" alt="" border="0" />
</div> 
```

**CSS：**

```
#containerDiv {
    display: none;
} 
```

**jQuery：**

```
$('img').load(function() {
    $('#containerDiv').css({'display': 'block'});
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-25T20:37:53.500

我会远离 jQuery 加载事件...此时您真的不想将任何内容加载到 DOM 中。你只想参考你想在缓存中拥有的所有图像。我通常是这样处理的。在文档准备好时创建一个空数组，为每个图像添加一个新的 Image 对象到数组中，然后将“src”属性分配给图像，然后您在数组中创建的每个图像都将在您的缓存中。这将适用于所有浏览器......它已经过测试。

```
$(document).ready(function () {

imagesSearchPage = new Array();

imagesSearchPage ["imageTitle01"] = new Image();
imagesSearchPage ["imageTitle01"].src = "images/imageTitle01.png";
imagesSearchPage ["imageTitle02"] = new Image();
imagesSearchPage ["imageTitle02"].src = "images/imageTitle02.png";
imagesSearchPage ["imageTitle03"] = new Image();
imagesSearchPage ["imageTitle03"].src = "images/imageTitle03.png";
}); 
```

我通常为每个页面创建一个新数组，只是为了让事情井井有条。我知道这可能看起来像很多代码，但是您的所有图像都会被缓存，如果需要，您还可以从数组中引用图像。

清除缓存，打开开发工具，单击网络 > 图像，您将看到图像。

希望这可以帮助！*

# azure - 与 ACS 的联合身份验证

> ID：12588978
> 
> 赞同：0
> 
> 时间：2012-09-25T18:28:33.917
> 
> 标签：azure, asp.net-4.0, acs, adfs2.0

我正在尝试使用 Azure ACS 的联合身份验证在这里创建一个示例应用程序我有一个带有 default.aspx 页面的 asp.net Web 应用程序我想上传这个天蓝色的云。我想使用 Active Directory 登录凭据对用户进行身份验证我该怎么做为此创建一个工作示例。我在搜索，发现我可以使用自定义 STS？这是正确的方向吗？[我从 MSDN http://msdn.microsoft.com/en-us/wazplatformtrainingcourse_windowsazureandpassivefederation2010_topic2#_Toc310436991](http://msdn.microsoft.com/en-us/wazplatformtrainingcourse_windowsazureandpassivefederation2010_topic2#_Toc310436991)中找到了一个示例， 但直到现在我才能使它正常工作。（我收到一条消息——无法显示此页面）。有人可以向我指出一个带有分步文档的工作示例。我在 Windows8 机器上使用 VS2010，和 azure sdk 1.7

我现在没有支持 ADFS2.0 的服务器机器。所以我只是想让 MSDN 示例正常工作

我按照[那里](http://msdn.microsoft.com/en-us/wazplatformtrainingcourse_windowsazureandpassivefederation2010_topic2)提到的所有步骤进行操作，但是当我调试时，我可以看到控制到达“WSFederationAuthenticationModule_RedirectingToIdentityProvider 方法”内部

如果我的假设是正确的，它应该重定向到 Login.aspx 页面，而只是显示消息“无法显示此页面”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T18:57:54.520

您可以使用 windowsazure.com 上的操作指南：[如何使用 Windows Azure 访问控制服务验证 Web 用户](http://www.windowsazure.com/en-us/develop/net/how-to-guides/access-control/)。这也适用于 Active Directory，只需使用您的 ADFS 作为身份提供者而不是 Windows Live / Google，无需为此创建自定义 STS。

如果您想要更多截图，我为我的一项培训编写了以下指南：http: [//sandrinodimattia.net/blog/posts/federated-authentication-with-azure-appfabric-acs-v2-0-part -1-设置/](http://sandrinodimattia.net/blog/posts/federated-authentication-with-azure-appfabric-acs-v2-0-part-1-setup/)

# linux - 保护命令行linux程序

> ID：12588979
> 
> 赞同：2
> 
> 时间：2012-09-25T18:28:34.740
> 
> 标签：linux, command, copy-protection

我必须向一家公司提供一个命令行 Linux 可执行文件作为试用版。如果他们喜欢它，他们应该在以后购买它。我担心该程序没有受到保护，他们可以在象征性试用期后保留它，重新分发或复制它。

有什么简单的方法可以为可执行文件提供基本保护吗？例如，在给定时间段后无法执行它......

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:33:34.420

检查启动时的当前时间戳，如果试用期已过，则立即退出。当然，他们可以更改系统日期，但这可能不值得，除非您的程序对他们*非常*有价值。

如果您想更进一步，您可以调用您控制的服务器，以确定程序是否应该继续运行。或者，就此而言，发送到著名的 NTP 服务器。

当然，他们仍然可以通过在调试器中运行并简单地跳过测试来绕过这种保护。如果他们具备这种水平的技能，那么您将无能为力（但他们也不太可能首先需要您的编程技能）。

# c++ - 如何在 C++ 中检查变量是否在范围内

> ID：12588984
> 
> 赞同：0
> 
> 时间：2012-09-25T18:29:23.167
> 
> 标签：c++, scope

我需要检查当前范围内是否存在变量“var1”。

```
somefunction()
{

     ...
     ....
     {
          ......
          string var1("");
          ...
          // if i check var1..it should be in scope
          // something like inScope(var1)..return true if it is in scope else false
     }
     // if i check var1..it should be out of scope
     // something like inScope(var1)..return true if it is in scope else false
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:45:30.750

我相信您误解了语言或工具链的核心内容。方法、类、变量等——它们要么“存在”，要么“在范围内”。如果您尝试实际使用“不在范围内”的任何内容，这是一个硬错误，并且尝试编译此类代码通常会中断。根据局部变量的存在来检查和分支逻辑几乎没有意义。我真的认为你把一些事情复杂化了。如果在您的方法的“后期代码”中您只想检查之前是否发生过某些事情 - 为什么不在`bool`方法的开头创建简单变量，将其初始化为`false`，并仅在事情发生时将其设置为 true ? 然后检查变量？

话虽如此，虽然无法检查是否定义了**局部变量**，但完全可以检查**类成员是否存在**- 由于模板和 SFINAE 的一些巧妙技巧。我的意思是-您可以测试类 X 是否定义了字段 Y 或方法 Z 并在编译时静态地获得真/假响应。

您可能要检查例如：[https](https://stackoverflow.com/a/7687190/717732) ://stackoverflow.com/a/7687190/717732或[https://stackoverflow.com/a/2133273/717732](https://stackoverflow.com/a/2133273/717732)

# python - 在 numpy 数组上使用就地操作时生成 TypeError？

> ID：12588986
> 
> 赞同：24
> 
> 时间：2012-09-25T18:29:33.383
> 
> 标签：python, arrays, numpy, typeerror

如果我运行以下代码：

```
import numpy as np

b = np.zeros(1)
c = np.zeros(1)
c = c/2**63

print b, c
b += c 
```

我收到此错误消息：

```
TypeError: ufunc 'add' output (typecode 'O') could not be coerced to provided
output parameter (typecode 'd') according to the casting rule ''same_kind'' 
```

如果我更改`b += c`为`b = b + c`，代码运行良好。为什么会这样？我在 RHEL 上运行 Python 2.7.2。

NumPy 版本：2.0.0.dev-a2a9dfb

GCC 版本：4.1.2 20080704（红帽 4.1.2-52）

先感谢您。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-25T18:41:27.477

当你这样做时`c=c/2**63`，`c`会被强制转换为`dtype=object`（这就是问题），而`b`留在`dtype=float`.

当您将`dtype=object`数组添加到 a`dtype=float`时，结果是一个`dtype=object`数组。将其视为`dtype`优先级，就像将 numpy 浮点数添加到 numpy int 时会给出 numpy 浮点数。

如果您尝试将`object`加到`float` *就地*，它会失败，因为结果不能从`object`to 转换`float`。但是，当您使用类似 的基本加法`b=b+c`时，结果`b`将转换为 a `dtype=object`，您可能已经注意到了。

请注意，使用`c=c/2.**63`保持`c`作为浮点数并按`b+=c`预期工作。请注意，如果`c`是，`np.ones(1)`您也不会有问题。

无论如何：这`(np.array([0], dtype=float)/2**63)).dtype == np.dtype(object)`可能是一个错误。

# android - 简单的 JSON 应用程序在 ICS 上崩溃，在姜饼中运行良好

> ID：12588993
> 
> 赞同：1
> 
> 时间：2012-09-25T18:30:11.527
> 
> 标签：android, compatibility, upgrade, android-4.0-ice-cream-sandwich, android-2.3-gingerbread

我尝试在姜饼中应用本教程，它运行良好 [http://www.androidhive.info/2012/01/android-json-parsing-tutorial/](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/) 但它在 ICS 上崩溃（在三星 S2 和 HTC one X real设备不是模拟器）。

那么如何为广泛的电话编写公共应用程序..？今天遇到这个问题后我真的很沮丧。即使我在你的帮助下解决了这个问题。是否有官方说明页面或类似的东西知道如何更新姜饼代码以使其与 ICS 兼容。？最好的祝福 。

```
package com.example.json.pwd;

import java.util.ArrayList;
import java.util.HashMap;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.TextView;

public class AndroidJSONParsingActivity extends ListActivity {

    // url to make request
    private static String url = "http://api.androidhive.info/contacts/";

    // JSON Node names
    private static final String TAG_CONTACTS = "contacts";
    private static final String TAG_ID = "id";
    private static final String TAG_NAME = "name";
    private static final String TAG_EMAIL = "email";
    private static final String TAG_ADDRESS = "address";
    private static final String TAG_GENDER = "gender";
    private static final String TAG_PHONE = "phone";
    private static final String TAG_PHONE_MOBILE = "mobile";
    private static final String TAG_PHONE_HOME = "home";
    private static final String TAG_PHONE_OFFICE = "office";

    // contacts JSONArray
    JSONArray contacts = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // Hashmap for ListView
        ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();

        // Creating JSON Parser instance
        JSONParser jParser = new JSONParser();

        // getting JSON string from URL
        JSONObject json = jParser.getJSONFromUrl(url);

        try {
            // Getting Array of Contacts
            contacts = json.getJSONArray(TAG_CONTACTS);

            // looping through All Contacts
            for(int i = 0; i < contacts.length(); i++){
                JSONObject c = contacts.getJSONObject(i);

                // Storing each json item in variable
                String id = c.getString(TAG_ID);
                String name = c.getString(TAG_NAME);
                String email = c.getString(TAG_EMAIL);
                String address = c.getString(TAG_ADDRESS);
                String gender = c.getString(TAG_GENDER);

                // Phone number is agin JSON Object
                JSONObject phone = c.getJSONObject(TAG_PHONE);
                String mobile = phone.getString(TAG_PHONE_MOBILE);
                String home = phone.getString(TAG_PHONE_HOME);
                String office = phone.getString(TAG_PHONE_OFFICE);

                // creating new HashMap
                HashMap<String, String> map = new HashMap<String, String>();

                // adding each child node to HashMap key => value
                map.put(TAG_ID, id);
                map.put(TAG_NAME, name);
                map.put(TAG_EMAIL, email);
                map.put(TAG_PHONE_MOBILE, mobile);

                // adding HashList to ArrayList
                contactList.add(map);
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        /**
         * Updating parsed JSON data into ListView
         * */
        ListAdapter adapter = new SimpleAdapter(this, contactList,
                R.layout.list_item,
                new String[] { TAG_NAME, TAG_EMAIL, TAG_PHONE_MOBILE }, new int[] {
                        R.id.name, R.id.email, R.id.mobile });

        setListAdapter(adapter);

        // selecting single ListView item
        ListView lv = getListView();

        // Launching new screen on Selecting Single ListItem
        lv.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                // getting values from selected ListItem
                String name = ((TextView) view.findViewById(R.id.name)).getText().toString();
                String cost = ((TextView) view.findViewById(R.id.email)).getText().toString();
                String description = ((TextView) view.findViewById(R.id.mobile)).getText().toString();

                // Starting new intent
                Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
                in.putExtra(TAG_NAME, name);
                in.putExtra(TAG_EMAIL, cost);
                in.putExtra(TAG_PHONE_MOBILE, description);
                startActivity(in);

            }
        });
    }
} 
```

* * *

```
package com.example.json.pwd;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONException;
import org.json.JSONObject;

import android.util.Log;

public class JSONParser {

    static InputStream is = null;
    static JSONObject jObj = null;
    static String json = "";

    // constructor
    public JSONParser() {

    }

    public JSONObject getJSONFromUrl(String url) {

        // Making HTTP request
        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();           

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // return JSON String
        return jObj;

    }
} 
```

* * *

```
package com.example.json.pwd;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.widget.TextView;

public class SingleMenuItemActivity  extends Activity {

    // JSON node keys
    private static final String TAG_NAME = "name";
    private static final String TAG_EMAIL = "email";
    private static final String TAG_PHONE_MOBILE = "mobile";
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.single_list_item);

        // getting intent data
        Intent in = getIntent();

        // Get JSON values from previous intent
        String name = in.getStringExtra(TAG_NAME);
        String cost = in.getStringExtra(TAG_EMAIL);
        String description = in.getStringExtra(TAG_PHONE_MOBILE);

        // Displaying all values on the screen
        TextView lblName = (TextView) findViewById(R.id.name_label);
        TextView lblCost = (TextView) findViewById(R.id.email_label);
        TextView lblDesc = (TextView) findViewById(R.id.mobile_label);

        lblName.setText(name);
        lblCost.setText(cost);
        lblDesc.setText(description);
    }
}

Finally Logcat
09-25 21:56:13.262: D/AndroidRuntime(1475): Shutting down VM
09-25 21:56:13.262: W/dalvikvm(1475): threadid=1: thread exiting with uncaught exception (group=0xb40a0180)
09-25 21:56:13.343: E/AndroidRuntime(1475): FATAL EXCEPTION: main
09-25 21:56:13.343: E/AndroidRuntime(1475): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.json.pwd/com.example.json.pwd.AndroidJSONParsingActivity}: android.os.NetworkOnMainThreadException
09-25 21:56:13.343: E/AndroidRuntime(1475):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
09-25 21:56:13.343: E/AndroidRuntime(1475):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
09-25 21:56:13.343: E/AndroidRuntime(1475):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
09-25 21:56:13.343: E/AndroidRuntime(1475):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
09-25 21:56:13.343: E/AndroidRuntime(1475):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-25 21:56:13.343: E/AndroidRuntime(1475):     at android.os.Looper.loop(Looper.java:137)
09-25 21:56:13.343: E/AndroidRuntime(1475):     at android.app.ActivityThread.main(ActivityThread.java:4424)
09-25 21:56:13.343: E/AndroidRuntime(1475):     at java.lang.reflect.Method.invokeNative(Native Method)
09-25 21:56:13.343: E/AndroidRuntime(1475):     at java.lang.reflect.Method.invoke(Method.java:511)
09-25 21:56:13.343: E/AndroidRuntime(1475):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
09-25 21:56:13.343: E/AndroidRuntime(1475):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
09-25 21:56:13.343: E/AndroidRuntime(1475):     at dalvik.system.NativeStart.main(Native Method)
09-25 21:56:13.343: E/AndroidRuntime(1475): Caused by: android.os.NetworkOnMainThreadException
09-25 21:56:13.343: E/AndroidRuntime(1475):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
09-25 21:56:13.343: E/AndroidRuntime(1475):     at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
09-25 21:56:13.343: E/AndroidRuntime(1475):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
09-25 21:56:13.343: E/AndroidRuntime(1475):     at java.net.InetAddress.getAllByName(InetAddress.java:220)
09-25 21:56:13.343: E/AndroidRuntime(1475):     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
09-25 21:56:13.343: E/AndroidRuntime(1475):     at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
09-25 21:56:13.343: E/AndroidRuntime(1475):     at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
09-25 21:56:13.343: E/AndroidRuntime(1475):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
09-25 21:56:13.343: E/AndroidRuntime(1475):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
09-25 21:56:13.343: E/AndroidRuntime(1475):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
09-25 21:56:13.343: E/AndroidRuntime(1475):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
09-25 21:56:13.343: E/AndroidRuntime(1475):     at com.example.json.pwd.JSONParser.getJSONFromUrl(JSONParser.java:38)
09-25 21:56:13.343: E/AndroidRuntime(1475):     at com.example.json.pwd.AndroidJSONParsingActivity.onCreate(AndroidJSONParsingActivity.java:54)
09-25 21:56:13.343: E/AndroidRuntime(1475):     at android.app.Activity.performCreate(Activity.java:4465)
09-25 21:56:13.343: E/AndroidRuntime(1475):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
09-25 21:56:13.343: E/AndroidRuntime(1475):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
09-25 21:56:13.343: E/AndroidRuntime(1475):     ... 11 more
09-25 21:56:21.553: I/dalvikvm(1475): threadid=3: reacting to signal 3
09-25 21:56:21.563: I/dalvikvm(1475): Wrote stack traces to '/data/anr/traces.txt' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:56:37.243

应该是由于Android 3.0以后实现了Strict模式，任何时候像网络调用这样的实现，数据库实现都需要在Asynctask或者线程里面调用。

# c++ - 如何在 C/C++ 中从数组末尾开始复制数据

> ID：12588995
> 
> 赞同：0
> 
> 时间：2012-09-25T18:30:14.723
> 
> 标签：c++, pointers

我有一个功能`void copy(char *temp,char input[length])`。我需要做的是将 temp 的值复制到输入数组中，但从输入数组的末尾开始。

我没有正确地提出问题。这就是我想要做的。

我输入了长度为 20 的数组。我得到了一个值为“test”的临时数组。然后我想在 input[19]=t,input[18]=e 等的输入数组中复制 temp。

现在当我再次调用该函数时，如果我想将 xyz 复制到输入数组，那么 input[15]=x,input[14]=y,input[13]=z。

我想这样做，直到我用所有值填充输入数组。

```
void copy(char *temp,char input[]) 
```

这是函数定义。

现在让我们看看我们必须做什么，

```
char* temp={"abcde"};
char input[100]={};
//I want to move data from temp into input array such that
printf("%c",input[95]); // gives output as a
printf("%c",input[96]); // gives output as b 
```

这是我到目前为止所写的。

```
char* copy(char* ptr,char data[])
{
int start=sizeof(data)/sizeof(char)-strlen(data);
int end=start-strlen(ptr);
int j=0;
int counter=0;

for(counter=start;counter>end;counter--)
{
    data[counter]=ptr[j++];   
}        
printf("%s",data);
return data;

} 
```

当我调用这个函数时，我以这种方式得到另一个错误，

```
char data[100]={};
char* temp={"abcde"};
char* output=copy(temp,data);
data=output; 
```

数据=输出行的 'char*' 到 'char [100]' 分配中的类型不兼容

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T18:42:26.610

这已经作为算法实现：

```
std::reverse_copy( input, input+length, output ); 
```

在相关说明中，您的函数的签名：

```
void copy(char *temp,char input[length]) 
```

实际上意味着：

```
void copy(char *temp,char *input) 
```

也就是说，`input`数组的长度不是函数签名的一部分，编译器不会对其进行检查。考虑将大小作为额外参数传递，或者通过引用传递数组。另外源数组没有被修改，所以它应该是一个`const char*`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-25T18:45:27.037

如果是字符串，您可以使用`strlen`检查输入字符串的大小，然后将其反向复制。另一方面，如果它是一个不以 结尾的字符数组，则`'\0'`必须为长度取一个新参数。

第一种情况（你说`copy the values of temp into input array`，所以我们复制`temp`into的内容`input`，忽略它的名字）：

```
void copy(char *temp, char input[length])
{
    for(int i = strlen(temp) - 1; i >= 0; i--)
    {
        input[i] = temp[i];
    }
} 
```

第二种情况：

```
void copy(char *temp, char *input, size_t length)
{
    for(int i = length - 1; i >= 0; i--)
    {
        input[i] = temp[i];
    }
} 
```

否则可以使用标准库函数[`reverse_copy`](http://www.cplusplus.com/reference/algorithm/reverse_copy/)。

# c++ - 如何将格式字符串发送到 iostream？

> ID：12588997
> 
> 赞同：2
> 
> 时间：2012-09-25T18:30:19.850
> 
> 标签：c++, iostream, format-string

> **可能重复：**
> [std::string 格式，如 sprintf](https://stackoverflow.com/questions/2342162/stdstring-formatting-like-sprintf)

我可以将 c++ iostream 类与 printf 之类的格式字符串一起使用吗？

基本上，我希望能够做类似的事情：-

```
snprintf (inchars, len, "%4f %6.2f %3d \n", float1, float2, int1); 
```

轻松使用字符串流。是否有捷径可寻？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T18:33:16.017

是的，有[Boost 格式库](http://www.boost.org/doc/libs/1_51_0/libs/format/)（内部是字符串流）。

[例子：](http://ideone.com/om1Ew)

```
#include <boost/format.hpp>
#include <iostream>

int main() {
  std::cout << boost::format("%s %s!\n") % "Hello" % "World";
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T19:08:48.853

您可以编写一个包装器函数，该函数返回您可以传递到 ostringstream 中的内容。

此功能结合了moooeeeep 在评论中指出的[链接中提供的一些解决方案：](https://stackoverflow.com/questions/2342162/stdstring-formatting-like-sprintf)

```
std::string string_format(const char *fmt, ...) {
    std::vector<char> str(100);
    va_list ap;
    while (1) {
        va_start(ap, fmt);
        int n = vsnprintf(&str[0], str.size(), fmt, ap);
        va_end(ap);
        if (n > -1 && n < str.size()) {
            str.resize(n);
            return &str[0];
        }
        str.resize(str.size() * 2);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T18:33:19.397

使用标准 C++ 流进行这种格式化需要付出更多的努力。特别是，您必须使用[流操作](http://www.cplusplus.com/reference/iostream/manipulators/)符，它可以指定要在小数点后显示的位数。