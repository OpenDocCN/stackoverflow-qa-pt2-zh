# StackOverflow 问答 15729000-15729999

# java - 始终运行服务

> ID：15729000
> 
> 赞同：-3
> 
> 时间：2013-03-31T11:39:33.507
> 
> 标签：java, android, service, push-notification, android-service

我正在为我的学校开发一个带有电子邮件客户端的 Android 应用程序（java），我想创建一个始终在后台运行并每小时刷新收件箱的服务，如果有新消息，该服务应创建一个推送通知，将用户发送到包含电子邮件收件箱的活动。

如何创建这样一个在应用程序退出时不会被杀死的服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T12:34:47.307

两个键：

1.  您应该通过`startService`调用而不是绑定来启动服务。

2.  在服务中`onStartCommand`应该返回`START_STICKY`。

android 页面上有很多有用的信息，为什么不从[http://developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html)开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T11:56:29.790

查看[Android API 指南](http://developer.android.com/guide/components/index.html)，特别是关于[进程和线程](http://developer.android.com/guide/components/processes-and-threads.html)的指南。那应该回答你的问题！

# jquery - jQuery 通配符选择器

> ID：15729005
> 
> 赞同：3
> 
> 时间：2013-03-31T11:40:06.633
> 
> 标签：jquery, jquery-selectors, wildcard

我想选择所有属性以开头的元素`data-something-`

例如

```
<span data-something-random="test">span 1</span>
<span data-nope="nope">span 2</span>
<span data-something-else="another test">span 3</span> 
```

从上面的例子中，我想选择跨度 1 和跨度 3。

我试过了

```
$('*[$data-validate]') 
```

但它没有用。

也欢迎使用 jQuery 方法而不是伪选择器的替代方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T11:46:23.410

我建议：

```
$('*').filter(
    function(){
        var that = $(this),
            data = that.data();
        for (var a in data){
            if (data.hasOwnProperty(a)){
                return /^something/.test(a);
            }
        }
    }).css('color','red'); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/9Wm9w/)。

编辑以提供一个简单的 jQuery 插件来实现相同的功能，需要您传入正则表达式：

```
$.fn.hasAttrMatching = function (expr) {
    var reg, data;
    if (!expr) {
        return this;
    } else {
        if (typeof expr === 'string') {
            reg = new RegExp(expr);
        } else if (typeof expr === 'object' && expr.test) {
            reg = expr;
        }
        return this.filter(function () {
            data = $(this).data();
            for (var a in data) {
                if (data.hasOwnProperty(a)) {
                    return reg.test(a);
                }
            }
        });
    }
}; 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/9Wm9w/3)。

*这可以使用文字*正则表达式如下调用：

[$('body, body *').hasAttrMatching(/^something/).css('color', 'red');](http://jsfiddle.net/davidThomas/9Wm9w/3/)

使用正则表达式的字符串表示：

[`$('body, body *').hasAttrMatching('^something').css('color', 'red');`](http://jsfiddle.net/davidThomas/9Wm9w/4/)

在这一点上提醒您似乎有些明显，但如果没有传入表达式（作为正则表达式文字或字符串），则不会发生过滤，插件将返回它收到的相同元素，以说明：

[`$('body, body *').hasAttrMatching().css('color', 'red');`](http://jsfiddle.net/davidThomas/9Wm9w/5/)

正如您在链接的演示中看到的那样，它为原始选择器匹配的*所有元素着色。*

参考：

*   纯 JavaScript：
    *   [JavaScript 正则表达式](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)。
    *   [`Object.hasOwnProperty()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/hasOwnProperty).
    *   [`test()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/test).
    *   [`typeof`运营商](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/typeof)。
*   jQuery：
    *   [`css()`](http://api.jquery.com/css/).
    *   [`filter()`](http://api.jquery.com/filter/).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T11:47:41.210

你不能这样选择属性，左侧需要是一个完整的属性，你只能使用 $= 来查询它的内容。仅供参考 * 不是必需的。

```
$('[data-something-random^=te]') 
```

如果需要，您可以选择这两个属性并将它们添加到一起：

```
$('[data-something-random]').add('[data-something-else]'); 
```

做你想做的事是可能的，但我认为 jQuery 没有开箱即用的支持。更好的解决方案可能是向元素添加类或其他属性并检查它们。

[jsFiddle](http://jsfiddle.net/Tyriar/csTaw/1/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-31T11:49:52.753

试试这个：

```
// Get all the apan's that starts with data-something
var $span = $('span').filter(function(index){
    var data = $(this).data();
    if (!$.isEmptyObject(data)) {
        var result = false;
        $.each(data, function (key, value) {              
            result = (key.search(/^something/) != -1);
        });
        return result;
    }
    else return false;
});

// Work with the two span's for above example
$span.each(function () {

   // Your code goes here...
}) 
```

[**在这里演示**](http://jsfiddle.net/uT6AA/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-16T17:02:12.560

您可以在 jQuery 中扩展选择器功能：

```
$.extend($.expr[":"], {
    withAttrLike: function(elem, _, m) {
        var attrs = elem.attributes, pattern = new RegExp(m[3]);
        for (var i = 0; i < attrs.length; ++i)
            if (pattern.test(attrs[i].name))
                return true;
        return false;
    }
}); 
```

现在你可以写：

```
$("div:withAttrLike('^data-something')").hide(); 
```

新选择器表达式的“参数”是一个正则表达式；有点神秘的是，这在选择器的实现中是可用的`m[3]`（我认为这是解析 Sizzle 中的选择器表达式的正则表达式匹配的结果）。该代码实例化一个正则表达式并使用它来测试属性名称。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-31T11:47:56.980

由于您不能单独按数据属性名称进行选择（因为它们位于左侧），一种可能的方法是`name`在您的跨度上添加一个属性以对数据属性进行逻辑分组，然后按`name`属性进行选择。

HTML：

```
<span name=data-something-group data-something-random="test">span 1</span>
<span name=data-nope data-nope="nope">span 2</span>
<span name=data-something-group data-something-else="again">span 3</span> 
```

jQuery：

```
 $('[name^="data-something-group"]) 
```

# asp.net - Azure 工具包与简单的 ASP.Net 网络表单应用程序

> ID：15729007
> 
> 赞同：0
> 
> 时间：2013-03-31T11:40:36.340
> 
> 标签：asp.net, azure, azure-sql-database, web-deployment, cloud-hosting

为多个客户处理`Flexible computing`, meanz 单一代码。
我有两个选择。

*   我们将使用`ASP.Net webform`应用程序并将其部署在任何`ASP.NET hosting site`.
*   第二个选择是我们将继续上云并开发 SaaS 产品。

我们想在 .NET 平台上工作。所以我有一些问题想问你。

1.  如果我们在云上工作，`AZURE`工具包可用于开发。但我读到你也可以在 Azure 上部署你的 ASP.NET 应用程序（webform）。
    所以，我想问你**项目之间的区别，即使用套件和在 AZURE 上`SQL AZURE`完成的项目，以及在 ASP.NET webforms 上完成并部署在 AZURE 上的项目。**
    请简要告诉我优缺点。
2.  如果我们使用`AZURE`那么我们需要，那么和`SQL AZURE`之间有很多区别。我需要学习吗。我知道`SQL``AZURE SQL``SQL Azure``SQL Server`
3.  我也担心 Azure 中的无会话环境。
4.  是否有任何工具包、指南、教程链接可以对我们的项目有所帮助，您知道的请分享。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T11:51:16.877

我不太清楚你的意思，`Azure Kit`但它们是在 Windows azure 上部署应用程序的几种方法。

您可以分拆 VM 并像在专用服务器上一样进行部署，也可以部署为云服务（使用 Web 角色）。

他们目前支持部署网站（与云服务有点不同），这些网站部署在托管 VM 中（由他们管理）。

如果您使用 Web 角色部署为云服务，则可以部署常规的 asp.net Web 表单应用程序，而无需进行任何更改。

SQL Azure 与 Sql Server 非常相似，当我部署时，我没有对 sql azure 进行任何特定的更改。

关于会话的可靠性，您可以使用状态服务器而不是 InProc。因此，您的会话将存储在 sql server 实例中，并且可以由多个 Web 角色访问。

关于指南主题，您可以查看[云服务链接](http://www.windowsazure.com/en-us/manage/services/cloud-services/)或[网站选项](http://www.windowsazure.com/en-us/manage/services/web-sites/)

# node.js - Mongoose：尝试在回调中创建文档，并在外循环中使用值

> ID：15729008
> 
> 赞同：1
> 
> 时间：2013-03-31T11:40:39.237
> 
> 标签：node.js, mongoose

我最近在猫鼬中偶然发现了一个问题，这是我的代码：

```
var v, query;
for(var i=0; i<values.length; i++) {
    v = values[i];
    query = model.findOne({type:v});
    query.exec(function(err, doc) {
      if(doc == undefined) {
        var m = new model({type:v, count:0});
        // but the 'v' above is not the values[i] in the for loop
        // code to save comes here
      } else {
        doc.count++;
        // update code comes here
      }
    });
} 
```

我想检查 doc 是否为空，如果是，则在数据库中输入一个默认值。如果返回了文档，则更新它的属性。问题是我试图保存的对象有 values[i] 作为它的属性之一。但是因为它是一个回调，所以我没有得到那个特定的值，因为它在 for 循环中继续进行。

我通过在模型创建过程中为所有不同的值插入一个默认对象来解决这个问题，但是在代码流的这一点上有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T11:54:01.017

试试这个：

```
values.forEach(function(v) {
  var query = model.findOne({type:v});
  query.exec(function(err, doc) {
    if(doc == undefined) {
      var m = new model({type:v, count:0});
      // but the 'v' above is not the values[i] in the for loop
      // code to save comes here
    } else {
      doc.count++;
      // update code comes here
    }
  });
}); 
```

它不适用于`for`循环的原因是因为 Javascript 没有块范围，这意味着`v`块中引用的变量被重用而不是重新创建。

当您立即使用该变量时（就像`model.findOne({ type: v})`这不是问题一样，但是由于 for 的回调函数`query.exec`将（可能）在循环完成后执行，`v`因此回调中的变量将仅包含循环中的最后一个值`v`。

通过使用`forEach`，您每次都会*创建*一个新变量。`v`

# c++ - Vim：将连续行与空格对齐

> ID：15729023
> 
> 赞同：1
> 
> 时间：2013-03-31T11:42:54.350
> 
> 标签：c++, coding-style, vi, vim

我想用制表符缩进vim中的所有内容，除了特殊情况。例如，我有这个 c++ 代码（其中`<tab>`是制表符系列，`<s>`是空格字符系列）：

```
<tab>if(true &&
<tab><s>true)
<tab>{
<tab><tab>//code here
<tab>} 
```

我想在写完 '&&' 并按 'o' 跳到下一行并开始编写以使 vim 放置一个制表符和空格数，直到 '(' 从前一行开始。

是否可以在 vim 中定义这种编码风格？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T12:35:00.283

我认为您正在寻找的`(N`是`cinoptions`. 试试`set cinoptions+=(0`。根据文档，这看起来像您寻求的对齐方式。

可以使用 help 命令找到更多信息：或查看[cinoptions-values 帮助](http://vimdoc.sourceforge.net/htmldoc/indent.html#cinoptions-values)`:help cinoptions-values`的在线版本。

就制表符而言，您需要使用 禁用`expandtab`，`:set noexpandtab`并且您需要确保您的制表位、软制表位和 shiftwidth 都已相应设置。例如，Linux 源代码使用您上面提到的样式，我的 vimrc 中有这个：

```
setlocal ts=8 sts=8 sw=8 tw=80

" Don't expand tabs to spaces.
setlocal noexpandtab

" Enable automatic C program indenting.
setlocal cindent

" Don't outdent function return types.
setlocal cinoptions+=t0

" No extra indentation for case labels.
setlocal cinoptions+=:0

" No extra indentation for "public", "protected", "private" labels.
setlocal cinoptions+=g0

" Line up function args.
setlocal cinoptions+=(0

" Setup formatoptions:
"   c - auto-wrap comments to textwidth.
"   r - automatically insert comment leader when pressing <Enter>.
"   o - automatically insert comment leader after 'o' or 'O'.
"   q - allow formatting of comments with 'gq'.
"   l - long lines are not broken in insert mode.
"   n - recognize numbered lists.
"   t - autowrap using textwidth,
setlocal formatoptions=croqlnt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T11:50:09.997

在您的 .vimrc 中添加以下内容

```
set tabstop=2
set expandtab
set shiftwidth=2
set smarttab
set linebreak
set smartindent
set cindent
set autoindent 
```

这就是在 vim 中推出令人敬畏的一切所需的一切。:)

# php - PHP：如何缩短 url + 从数据库中获取数据

> ID：15729026
> 
> 赞同：2
> 
> 时间：2013-03-31T11:43:18.000
> 
> 标签：php, mysql, file-upload, download, download-manager

我正在尝试为我的文件上传脚本制作自动下载页面 url 缩短器。

将数据插入数据库的部分示例：

```
function RandomString($length) {
    $key = "";
    $keys = array_merge(range(0,9), range('a', 'z'), range('A', 'Z'));

    for($i=0; $i < $length; $i++) {
        $key .= $keys[array_rand($keys)];
    }
    return $key;
}

try {
    $db = new PDO('mysql:host='. DB_HOST .';dbname=' . DB_DATABASE .';charset=utf8', DB_USER, DB_PASSWORD);
    $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_WARNING);

    $download_code = RandomString(5);
    $query = "INSERT INTO user_uploads(User_Id, Name, File, DownloadCode) VALUES('".$USER_ID."','".$upload_name."','".$upload_file."','".$download_code."'")";
    $link = $db->prepare($query);
    if($link->execute()){
        header("location: upload-success");
        exit();
    }
    $db = null;
}catch(PDOException $e) {
    die($e->getMessage());
} 
```

所以，假设下载代码是“KD9UI”

如何制作像这样工作的下载页面？ [http://domain.com/KD9UI](http://domain.com/KD9UI)

当访问者访问该 url 时，页面通过此下载代码从数据库中获取数据，并将文件详细信息打印给访问者。

家庭帮助会很好:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T03:28:54.190

将 id 传递给上传成功页面。

像这样：

```
header('Location: upload-success?download_code='.$download_code); 
```

并将 domain.com/id 重定向到 domain.com/download.php?download_code=id

像这样：

```
RewriteRule ^upload-success$ upload_success.php [L,NC]
/*
other rewrite rules..
this rule must be at last rule
becuse another rules may be exists too and it's domain.com/(...)
*/
RewriteRule ^(.+?)$ download.php?download_code=$1 [L,NC] 
```

# python - 当跨模块派生类时，名称解析如何工作？

> ID：15729027
> 
> 赞同：1
> 
> 时间：2013-03-31T11:43:29.110
> 
> 标签：python, python-2.7

类 B 和 C 都派生自基类 A，并且都没有覆盖 A 的方法 test()。B与A在同一个模块中定义；C 在单独的模块中定义。调用 B.test() 打印“hello”，但调用 C.test() 失败是怎么回事？两个调用不应该最终执行 A.test() 并因此能够解析 mod1 命名空间中的符号“消息”吗？

我也很感激收到有关记录此行为的位置的提示，因为我无法找到任何东西。调用 C.test() 时如何解析名称，并且可以以某种方式将“消息”注入其中一个名称空间吗？

FWIW，我没有使用实例变量（例如 set A.message = "hello"）的原因是因为我想访问一个“全局”单例对象并且不想在其中有一个明确的引用所有其他对象。

mod1.py：

```
import mod2

class A(object):
  def test(self):
    print message

class B(A):
  pass

if __name__ == "__main__":
  message = "hello"
  A().test()
  B().test()
  mod2.C().test() 
```

mod2.py：

```
import mod1

class C(mod1.A):
  pass 
```

输出是：

```
$ python mod1.py 
hello
hello
Traceback (most recent call last):
  File "mod1.py", line 14, in <module>
    mod2.C().test()
  File "mod1.py", line 5, in test
    print message
NameError: global name 'message' is not defined 
```

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T13:09:57.547

EOL 是正确的，将程序的“主要”部分移动到新文件 mod3.py 确实可以使事情正常进行。

[http://bytebaker.com/2008/07/30/python-namespaces/](http://bytebaker.com/2008/07/30/python-namespaces/)进一步澄清了这个问题。

在我最初的问题中，事实证明该变量`message`存储在`__main__`模块命名空间中，因为 mod1.py 正在作为脚本运行。mod2 导入 mod1，但它获得了一个单独的`mod1`命名空间，其中变量`message`不存在。下面的代码片段更清楚地展示了它写入`message`的`mod1`命名空间（不是我建议在现实生活中这样做），从而导致预期的行为。

```
import sys

class A(object):
  def test(self):
    print message

class B(A):
  pass

if __name__ == "__main__":
  import mod2
  message = "hello"
  sys.modules["mod1"].message = message
  A().test()
  B().test()
  mod2.C().test() 
```

我认为最好的现实解决方法是将程序的“主要”部分移动到一个单独的模块中，正如 EOL 所暗示的那样，或者这样做：

```
class A(object):
  def test(self):
    print message

class B(A):
  pass

def main():
  global message
  message = "hello"
  A().test()
  B().test()

  # resolve circular import by importing in local scope
  import mod2
  mod2.C().test()

if __name__ == "__main__":
  # break into mod1 namespace from __main__ namespace
  import mod1
  mod1.main() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T12:03:20.400

您可以使用类属性而不是全局属性吗？以下作品

```
import mod2

class A(object):

    message = "Hello"  # Class attribute (not duplicated in instances)

    def test(self):
        print self.message  # Class A attribute can be overridden by subclasses

class B(A):
    pass

if __name__ == "__main__":

    A().test()
    B().test()
    mod2.C().test() 
```

不使用全局变量更简洁：在上面的代码中，`message`显式附加到使用它的类。

* * *

也就是说，我也很好奇为什么 global`message`没有被`mod2.C().test()`.

但是，*如果交叉导入被删除*（没有主程序`mod1.py`，并且没有`import mod2`），事情会按预期工作：导入`mod1`和`mod2`从`mod3.py`，在`mod1.message = "Hello"`那里做并且`mod2.C().test()`工作。因此，我想知道问题是否与交叉导入无关……</p>

# cakephp - 安装 CakeDC 用户插件 - 找不到插件用户错误

> ID：15729028
> 
> 赞同：1
> 
> 时间：2013-03-31T11:43:32.483
> 
> 标签：cakephp, cakephp-2.0, cakephp-model, cakedc

[大家好，我目前正在尝试使用https://github.com/CakeDC/users](https://github.com/CakeDC/users)安装 CakeDC/users 插件并遇到错误。

当我运行命令 './Console/cake schema create users --plugin Users' 时，我收到错误消息：

**错误：找不到插件用户。0 C:\wamp\www\toppin\lib\cake\console\shell.php(376): CakePlugin::load('Users')**

我尝试使用 CakePlugin::loadAll(); 加载用户和迁移插件；并单独使用 CakePlugin::load('pluginhere');

任何想法或帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-13T18:45:45.540

我有同样的问题，解决了：

只需转到您的 'app' 目录，而不是 'app\Console' 并运行 'Console\cake schema create users --plugin Users'

它工作正常，我在 Windows 7 下使用 xampp

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T09:04:50.243

`app`我假设你在你的文件夹中工作？如果你调用你的插件用户，它应该被加载，`CakePlugin::load('Users')`然后它应该在你的`app/Plugin/Users`文件夹中。

# java - OSGi 基于角色的安全性

> ID：15729030
> 
> 赞同：9
> 
> 时间：2013-03-31T11:43:55.320
> 
> 标签：java, security, osgi, blueprint-osgi

我正在寻找一个允许 OSGi 服务和 CXF Web 服务基于角色的安全性的安全框架。前段时间我已经使用了spring security，但是当我们现在切换到蓝图时，据我所知，它不再是一种选择。要配置访问规则，我想主要使用标准的[@RolesAllowed 注释](http://docs.oracle.com/javaee/5/api/javax/annotation/security/RolesAllowed.html)。那么我最好的起点是什么？我还考虑过自己将其实现为蓝图扩展，但我更喜欢现有的解决方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T14:13:54.207

我建议你改用 Apache Shiro，[http://shiro.apache.org/](http://shiro.apache.org/)。

它为身份验证、授权、加密和会话管理提供了简单的 API。它也可以很容易地部署在 OSGI 容器中。此处列出了 Apache Shiro 的一些优点[Apache Shiro 与 Java EE 原生 API](https://stackoverflow.com/questions/10332421/apache-shiro-vs-java-ee-native-apis)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-07-18T19:36:13.643

同时，我创建了一个基于 JAAS 和 Java EE 注释（@RolesAllowed、@PermitAll、@DenyAll）的授权蓝图扩展。您可以将扩展添加到任何蓝图文件。然后它将扫描所有 bean 以查找这些注释并在找到它们时拦截调用。它使用现有的 JAAS 上下文来获取用户的角色。

因此，这样做的先决条件是进行 JAAS 登录。我还创建了一个 CXF JAASAuthentication 功能，该功能基于基本身份验证或 ws 安全用户名主体登录用户。该模块与 Apache Karaf JAAS 支持一起工作。所以所有 karaf 用户和角色都适用。

一旦包含授权模块的 aries 蓝图版本发布，我将创建一个教程来展示如何使用所有这些。同时，如果您尝试并报告您遇到的任何问题，我会很高兴。

顺便提一句。karaf 的另一种方法是 karaf 3+ 中内置的 OSGi 服务的基于角色的访问控制。它不适用于注释，但也易于使用。见 [http://coderthoughts.blogspot.de/2013/10/role-based-access-control-for-karaf.html](http://coderthoughts.blogspot.de/2013/10/role-based-access-control-for-karaf.html)

# java - spring mvc 和 hibernate 应该按需保存事务

> ID：15729031
> 
> 赞同：0
> 
> 时间：2013-03-31T11:44:08.120
> 
> 标签：java, hibernate, spring-mvc, autocommit

我正在使用 spring mvc 和休眠。以下是我的代码示例。

**应用程序上下文.xml**

```
<context:annotation-config />
<context:component-scan base-package="com.soft.erp" />
<mvc:annotation-driven /> 
<import resource="hibernate-context.xml" /> 
```

**配置属性**

```
app.jdbc.driverClassName=com.mysql.jdbc.Driver
app.jdbc.url=jdbc:mysql://localhost:3306/besoin
app.jdbc.username=root
app.jdbc.password=7886
hibernate.config=/WEB-INF/hibernate.cfg.xml 
```

**休眠.cfg.xml**

```
<property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>
<property name="show_sql">false</property> 
```

**休眠上下文.xml**

```
 <context:property-placeholder location="/WEB-INF/config.properties" />
<tx:annotation-driven transaction-manager="transactionManager" />   
<bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean"
             p:dataSource-ref="dataSource"
             p:configLocation="${hibernate.config}"
             p:packagesToScan="com.soft.erp"/>
<bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
            destroy-method="close"
            p:driverClass="${app.jdbc.driverClassName}"
            p:jdbcUrl="${app.jdbc.url}"
            p:user="${app.jdbc.username}"
            p:password="${app.jdbc.password}"

            p:acquireIncrement="5"
            p:idleConnectionTestPeriod="60"
            p:maxPoolSize="100"
            p:maxStatements="50"
            p:minPoolSize="10" />
<bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager" 
            p:sessionFactory-ref="sessionFactory" /> 
```

**COAcategoriesModel.java**

```
@Entity
@Table(name = "COACATEGORIES")
public class COACategoriesModel {

@Id
@Column(name = "COACATEGORIESID")
@GeneratedValue
private Long id;

public COACategoriesModel() {
    super();
}

@Column(name = "COACATEGORIESNAME")
private String name;

@Column(name = "RECENTUSERID")
private long recentUserId;

@Column(name = "RECENTUSERIP")
private String recentUserIp;

@Column(name = "DATE")
private Date dateTime;

@Column(name = "ISUPDATED")
private int isUpdated;

@OneToMany(mappedBy="categoryId")
private List<COAMaintenanceModel> obj = null;

public COACategoriesModel( String name, long recentUserId,
        String recentUserIp, Date dateTime, int isUpdated) {

    this.name = name;
    this.recentUserId = recentUserId;
    this.recentUserIp = recentUserIp;
    this.dateTime = dateTime;
    this.isUpdated = isUpdated;
}

public Long getId() {
    return id;
}

public void setId(Long id) {
    this.id = id;
}

public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}

public Long getRecentUserId() {
    return recentUserId;
}

public void setRecentUserId(Long recentUserId) {
    this.recentUserId = recentUserId;
}

public String getRecentUserIp() {
    return recentUserIp;
}

public void setRecentUserIp(String recentUserIp) {
    this.recentUserIp = recentUserIp;
}

public Date getDateTime() {
    return dateTime;
}

public void setDateTime(Date dateTime) {
    this.dateTime = dateTime;
}

public int getIsUpdated() {
    return isUpdated;
}

public void setIsUpdated(int isUpdated) {
    this.isUpdated = isUpdated;
}

public void setRecentUserId(long recentUserId) {
    this.recentUserId = recentUserId;
}

public List<COAMaintenanceModel> getObj() {
    return obj;
}

public void setObj(List<COAMaintenanceModel> obj) {
    this.obj = obj;
} 
```

**COAMaintenanceModel.java**

```
@Entity
@Table(name = "ACCOUNTMAINTENANCE")
public class COAMaintenanceModel {

@Id
@Column(name = "ID")
@GeneratedValue
private Long id;

@Column(name = "ACCOUNT")
private String account;

@Column(name = "DESCRIPTION")
private String discription;

@ManyToOne
@JoinColumn(name="COACATEGORIESID")
private COACategoriesModel categoryId;

@Column(name = "POSTINGTYPE")
private int postingType;

@Column(name = "TYPICALBALANCE")
private int typicalBalance;

@Column(name = "DEBITBALANCE")
private double debitBalance;

@Column(name = "CREDITBALANCE")
private double creditBalance;

@Column(name = "NETBALANCE")
private double runningBalance;

@Column(name = "DEFAULTCURRENCYID")
private double defaultCurrencyId;

@Column(name = "ISACTIVE")
private int isActive;

@Column(name = "RECENTUSERID")
private Long recentUserId;

@Column(name = "RECENTUSERIP")
private String recentUserIp;

@Column(name = "DATETIME")
private Date dateTime;

@Column(name = "ISUPDATED")
private int isUpdated;

public Long getId() {
    return id;
}

public void setId(Long id) {
    this.id = id;
}

public String getAccount() {
    return account;
}

public void setAccount(String account) {
    this.account = account;
}

public String getDiscription() {
    return discription;
}

public void setDiscription(String discription) {
    this.discription = discription;
}

public COACategoriesModel getCategoryId() {
    return categoryId;
}

public void setCategoryId(COACategoriesModel categoryId) {
    this.categoryId = categoryId;
}

public int getPostingType() {
    return postingType;
}

public void setPostingType(int postingType) {
    this.postingType = postingType;
}

public int getTypicalBalance() {
    return typicalBalance;
}

public void setTypicalBalance(int typicalBalance) {
    this.typicalBalance = typicalBalance;
}

public double getDebitBalance() {
    return debitBalance;
}

public void setDebitBalance(double debitBalance) {
    this.debitBalance = debitBalance;
}

public double getCreditBalance() {
    return creditBalance;
}

public void setCreditBalance(double creditBalance) {
    this.creditBalance = creditBalance;
}

public double getRunningBalance() {
    return runningBalance;
}

public void setRunningBalance(double runningBalance) {
    this.runningBalance = runningBalance;
}

public double getDefaultCurrencyId() {
    return defaultCurrencyId;
}

public void setDefaultCurrencyId(double defaultCurrencyId) {
    this.defaultCurrencyId = defaultCurrencyId;
}

public int getIsActive() {
    return isActive;
}

public void setIsActive(int isActive) {
    this.isActive = isActive;
}

public Long getRecentUserId() {
    return recentUserId;
}

public void setRecentUserId(Long recentUserId) {
    this.recentUserId = recentUserId;
}

public String getRecentUserIp() {
    return recentUserIp;
}

public void setRecentUserIp(String recentUserIp) {
    this.recentUserIp = recentUserIp;
}

public Date getDateTime() {
    return dateTime;
}

public void setDateTime(Date dateTime) {
    this.dateTime = dateTime;
}

public int getIsUpdated() {
    return isUpdated;
}

public void setIsUpdated(int isUpdated) {
    this.isUpdated = isUpdated;
} 
```

**COAcategoriesService.java**

```
@Service("COACategoriesService")
@Transactional 
public class COACategoriesService {

@Resource(name="sessionFactory")
private SessionFactory sessionFactory;

public void AddCOACategories(COACategoriesModel accountCategories) {

Session session = sessionFactory.getCurrentSession();
session.save(accountCategories);

} 
```

}

**COAMaintenanceService.java**

```
@Service("COAMaintenanceService")
@Transactional
public class COAMaintenanceService {

@Resource(name="sessionFactory")
private SessionFactory sessionFactory;

public void AddCOAMaintenance(COAMaintenanceModel cMaintenanceModel) {

Session session = sessionFactory.getCurrentSession();
session.save(cMaintenanceModel);

} 
```

}

**COAcategoriesController.java**

```
@Controller
public class COACategoriesController {

protected static Logger log = Logger.getLogger(COACategoriesController.class);

@Resource(name="COACategoriesService")
private COACategoriesService obj_coacs;
@Resource(name="COAMaintenanceService")
private COAMaintenanceService obj_coams;

 @RequestMapping(value = "/addCoaCategory", method = RequestMethod.POST)
 public String addCoaCategory(@RequestParam("conCatName") String coaCatName, Model model) {

     Date sysdate = null;
     String Message="";
     try{

     sysdate = new Date();

     COACategoriesModel model1 = new COACategoriesModel( coaCatName, 1, "", sysdate , 0);

     COAMaintenanceModel account =  new COAMaintenanceModel();
        account.setDiscription("Test Description");
        account.setCategoryId(model1);

        Message="Fail-First";
        obj_coacs.AddCOACategories(model1);

        Message="Fail-Second";
        obj_coams.AddCOAMaintenance (account);

        Message="Successfully Added!";
     }catch(Exception ex){
         log.error("Exception.."+ex);
         model.addAttribute("message", Message);
     }

        return "fin/category";
    }

 } 
```

COACategoriesModel 与 COAMaintenanceModel 之间存在一对多的关系。AS obj_coacs.AddCOACategories(model1) 将事务添加到表中，如果 obj_coams.AddCOAMaintenance(account) 发生异常，它不会回滚所有事务。

这个怎么控制。当所有对象成功地将事务插入表时，然后提交完整的事务。

在当前的情况下，最简单的方法是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T11:48:18.910

为注释`cascade`上的元素指定一个值。`@OneToMany`这将导致保存`COAMaintenanceModel`时持久化`CAOCategoriesModel`。默认情况下，事务应根据是否引发异常适当地提交和回滚。

```
@Entity
@Table(name = "COACATEGORIES")
public class COACategoriesModel {

    /* Code ommitted */

    @OneToMany(mappedBy="categoryId", cascade=CascadeType.All)
    private List<COAMaintenanceModel> obj = null;

    /* Code ommitted */
} 
```

# mysql - mysql全文查询区别

> ID：15729040
> 
> 赞同：1
> 
> 时间：2013-03-31T11:44:33.547
> 
> 标签：mysql, full-text-search

我已按照[本教程](http://www.mysqltutorial.org/mysql-natural-language-search.aspx)进行 mysql 全文搜索。

我有这张桌子：

```
CREATE TABLE IF NOT EXISTS `test` (
  `id` int(20) NOT NULL AUTO_INCREMENT,
  `textrow` varchar(256) NOT NULL,
  PRIMARY KEY (`id`),
  FULLTEXT KEY `textrow` (`textrow`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=3 ;

INSERT INTO `test` (`id`, `textrow`) VALUES
(1, 'Agajan Torayev'),
(2, 'torayeff');

ALTER TABLE test ADD FULLTEXT(textrow); 
```

这些查询之间有什么区别（一个给出零结果）：

```
mysql> SELECT * FROM test WHERE MATCH(textrow) AGAINST('agajan');
Empty set (0.00 sec) 
```

和

```
mysql> SELECT *, MATCH(textrow) AGAINST('agajan') FROM test;
+----+----------------+----------------------------------+
| id | textrow        | MATCH(textrow) AGAINST('agajan') |
+----+----------------+----------------------------------+
|  1 | Agajan Torayev |                                0 |
|  2 | torayeff       |                                0 |
+----+----------------+----------------------------------+
2 rows in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T11:48:18.347

不同之处在于，在第一个查询中，您使用`match`ing 数据过滤结果，而在第二个查询中，您输出所有记录并添加一列以显示`match`ing 的结果。

你没有得到结果，因为

> 自然语言搜索将搜索字符串解释为自然人类语言中的短语（自由文本中的短语）。[...] 此外，**出现在 50% 或更多行中的单词被认为是常见的并且不匹配**。

[取自 MySQL 全文搜索函数](http://dev.mysql.com/doc/refman/5.1/en/fulltext-search.html)

# php - 带有where的sql - 在php中

> ID：15729042
> 
> 赞同：-4
> 
> 时间：2013-03-31T11:45:14.580
> 
> 标签：php, sql, where

我有一个有效的 SQL 查询，并且在循环内我想要调用另一个 SQL 查询，我希望它只有一个结果，但我得到一个错误。

这是代码：

```
$i = 0;
$query = mysql_query("SELECT * FROM `orders` ORDER BY `ID` ASC ");
while($row = mysql_fetch_array($query)) 
{
    $i++;
    $productResult = mysql_select_db("SELECT * FROM `page` WHERE 'id'=".$i."'");
} 
```

这是想要从这段代码中得到的：

```
<?=$productResult['title'];?> 
```

我该如何解决？我知道问题出在这一行：

```
mysql_select_db("SELECT * FROM `page` WHERE 'id'=".$i."'"); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T11:46:57.680

您需要删除单引号`id`- 如果您想在 MySQL 中引用表/列名，您需要使用反引号。但是，除非您使用保留关键字的名称，否则没有理由这样做。

您还需要替换`mysql_select_db`为`mysql_query`.

最后但并非最不重要的一点是，在循环中发送查询是一个坏主意，并且您忘记了实际检索结果。

最后，由于您似乎根本没有 PHP/MySQL 知识，因此您应该*真正*遵循以下建议：
[**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护[并被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T11:48:02.007

尝试这个

```
mysql_query("SELECT * FROM `page` WHERE `id`=".$i); 
```

我建议使用`PDO`or`MySqli`因为 `MySql_*`已弃用。

# javascript - 城市名称代码中的地理定位似乎不起作用

> ID：15729053
> 
> 赞同：0
> 
> 时间：2013-03-31T11:47:11.993
> 
> 标签：javascript, html, google-maps, geolocation

我正在尝试获取地理位置并将其转换为文本。我有代码可以做到这一点，但它给了我一个错误。如何解决此错误？

错误：TypeError：'未定义'不是对象（评估'geocoder.geocode'）

编码：

```
var geocoder;

if (navigator.geolocation) {
navigator.geolocation.getCurrentPosition(successFunction, errorFunction);
} 
//Get the latitude and the longitude;
 function successFunction(position) {
var lat = position.coords.latitude;
var lng = position.coords.longitude;
codeLatLng(lat, lng)
}

function errorFunction(){
alert("Geocoder failed");
}

function initialize() {
geocoder = new google.maps.Geocoder();

}

function codeLatLng(lat, lng) {

var latlng = new google.maps.LatLng(lat, lng);
geocoder.geocode({'location':latlng}, function(results, status) {
  if (status == google.maps.GeocoderStatus.OK) {
  console.log(results)
    if (results[1]) {
     //formatted address
     alert(results[0].formatted_address)
    //find country name
         for (var i=0; i<results[0].address_components.length; i++) {
        for (var b=0;b<results[0].address_components[i].types.length;b++) {

        //there are different types that might hold a city admin_area_lvl_1 usually does in come cases looking for sublocality type will be more appropriate
            if (results[0].address_components[i].types[b] == "administrative_area_level_1") {
                //this is the object you are looking for
                city= results[0].address_components[i];
                break;
            }
        }
    }
    //city data
    alert(city.short_name + " " + city.long_name)

    } else {
      alert("No results found");
    }
  } else {
    alert("Geocoder failed due to: " + status);
  }
});
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T13:09:05.523

要[反向地理编码](https://developers.google.com/maps/documentation/javascript/geocoding#ReverseGeocoding)，请求结构包含`latLng`，而不是`location`

从文档中的示例稍作修改（未测试）：

```
 function codeLatLng(lat, lng) {
    // remove irrelevant code
    var latlng = new google.maps.LatLng(lat, lng);
    geocoder.geocode({'latLng': latlng}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) { 
```

此外，这是不正确的，如果您要使用第一个结果（result[0]），您应该检查它是否存在（如果 results[0] ... not if results[1]）：

```
if (results[1]) {
 //formatted address
 alert(results[0].formatted_address) 
```

查看[您的 jsfiddle](http://jsfiddle.net/gMszg/)，您没有正确加载 API。请参阅有关[加载 API 的正确方法的文档](https://developers.google.com/maps/documentation/javascript/tutorial#Loading_the_Maps_API)

# php - 未定义变量：用户

> ID：15729055
> 
> 赞同：-1
> 
> 时间：2013-03-31T11:47:15.150
> 
> 标签：php

似乎找不到问题的答案。我已将 $user 声明为全局变量，然后通过 cookie（如果存在）或表单设置它，然后我调用 start 函数。在 start 函数中，我回显了它的一部分，但我得到了 Undefined variable: user 即使我定义了它。

```
 <?php
    global $user;
    function ConsoleLog($message)
    {
        echo '<script>console.log("' . $message. '")</script>';
    }
    if (isset($_COOKIE["user"])){
        $user = unserialize($_COOKIE["user"]);
        start();
      }
    else{
          if (isset($_POST['submit'])) 
    { 
       $user = array(
       "name" => $_POST['name'],
       "class" => $_POST['class'],
       "school" => $_POST['school'],
       );
       $expire=time()+60*60*24*365;
       setcookie("user",serialize($user), $expire);
       start();
    }
    else
    {   
          echo "Welcome new user!\n<br/>";
            echo '<form method="post">
    Name: <input type="text" name="name">
    Class:<select name="class">
      <option value="9">9</option>
    </select>
    School: <input type="text" name="school">
    <input type="submit" name="submit">
    </form>';
    }
    }
    function start(){
      echo "Your name: " . $user['name'] . "!\n<br/>";
      echo "Your class: " . $user['class'] . "\n<br/>";
      echo "Your school: " . $user['school'] . "\n<br/>";
        ?>
      <hr/>
      <h2>HomePage</h2>
      <?php
    }
    ?> 
```

![截屏](https://i.stack.imgur.com/ow0bz.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T11:54:41.390

使用全局 -

```
$user = 'something';

function someFunction(){
  global $user;        // here global will make $user var accessible inside function.
  echo $user;
} 
```

如果您只想使变量成为全局变量，请在外部定义它 -

```
define("USER","SOMETHING"); 
```

只需通过以下方式访问 -

```
echo USER; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T11:51:28.687

当您调用函数 start() 时，还传递参数：

```
if (isset($_COOKIE["user"])){
    $user = unserialize($_COOKIE["user"]);
    start($user);
  } 
```

或任何你想调用该函数的地方使用：`start($user);`

并更改函数以接受参数：

```
function start($array){
      echo "Your name: " . $array['name'] . "!\n<br/>";
      echo "Your class: " . $array['class'] . "\n<br/>";
      echo "Your school: " . $array['school'] . "\n<br/>";
        ?>
      <hr/>
      <h2>HomePage</h2>
      <?php
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T11:51:38.147

您不能将变量声明为全局变量，它不会那样工作。

相反，您需要通过将变量“导入”到每个函数`global $user`中，或者将其作为参数传递，或者将其存储在像`$_SESSION`. 作为最后的手段，您可以使用`$GLOBALS['user']`，但这很昂贵。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T11:52:41.403

if`!isset($_COOKIE["user"])`和`!isset($_POST['submit'])`then`$user`将是未定义的。因此，当时`start()`您指的是未定义`$user`数组中的键。

此外，在全局空间中调用是没有意义的`global $user`，这应该移到每个使用变量的函数中，例如

```
function start() {
   global $user;
   // ...
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-31T11:54:38.143

要按照您想要的方式执行此操作，请在要使用全局变量的每个函数中，在函数的开头声明它。

```
function start(){
    global $user;
    ...
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-31T11:55:37.347

这是你的代码

```
<?php
    global $user;
    function ConsoleLog($message)
    {
        echo '<script>console.log("' . $message. '")</script>';
    }
    if (isset($_COOKIE["user"])){
        $user = unserialize($_COOKIE["user"]);
      echo "Your name: " . $user['name'] . "!\n<br/>";
      echo "Your class: " . $user['class'] . "\n<br/>";
      echo "Your school: " . $user['school'] . "\n<br/>";
          }
    else{
          if (isset($_POST['submit'])) 
    { 
       $user = array(
       "name" => $_POST['name'],
       "class" => $_POST['class'],
       "school" => $_POST['school'],
       );
       $expire=time()+60*60*24*365;
       setcookie("user",serialize($user), $expire);
      echo "Your name: " . $user['name'] . "!\n<br/>";
      echo "Your class: " . $user['class'] . "\n<br/>";
      echo "Your school: " . $user['school'] . "\n<br/>";
        }
    else
    {   
          echo "Welcome new user!\n<br/>";
            echo '<form method="post">
    Name: <input type="text" name="name">
    Class:<select name="class">
      <option value="9">9</option>
    </select>
    School: <input type="text" name="school">
    <input type="submit" name="submit">
    </form>';
    }
    }

        ?>
      <hr/>
      <h2>HomePage</h2> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-04-22T17:46:45.170

我认为您对各种答案感到困惑，最简单的答案如下：

```
<form method="" enctype="multipart/form-data"> 
```

写在`form`标签里。

# javascript - 这段代码中的“无断点”是什么意思

> ID：15729059
> 
> 赞同：1
> 
> 时间：2013-03-31T11:47:46.523
> 
> 标签：javascript, token

我使用 Chrome 运行此代码并查看了控制台（感谢您以前的帮助，因为我不知道我可以这样做！）.. *意外的令牌*- 然后当我点击那条线时......它*说不断点*。

它在说什么？（我已经在 window.confirm 调用前尝试了带有和不带有“！”的代码）

```
If (window.confirm("Is that your final answer?")){
document.getElementById("firstdiv").innerHTML = "The capital of Missouri is: <bold>" + capital + "</bold>, so says you.";
}
else{
return false;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T11:50:59.593

您需要将资本更改`If`为`if`：

```
if(window.confirm("Is that your final answer?")){    
  document.getElementById("firstdiv").innerHTML = "The capital of Missouri is: <bold>" + capital + "</bold>, so says you.";
}
else {
  return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T11:51:58.900

我不确定“if(){}”语句是否可以或应该在这里大写。

```
If(window.confirm(etc etc etc)) 
```

变成

```
if(window.confirm(etc etc etc)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T11:53:02.303

```
if (window.confirm("Is that your final answer?")){

document.getElementById("firstdiv").innerHTML = "The capital of Missouri is: <bold>" + capital + "</bold>, so says you.";
return true;
}
else{
return false;
} 
```

# iphone - UInavigationController 中的 UITableView 不起作用

> ID：15729060
> 
> 赞同：0
> 
> 时间：2013-03-31T11:47:46.950
> 
> 标签：iphone, xcode, ipad, uinavigationcontroller, uitableview

![在此处输入图像描述](https://i.stack.imgur.com/bSvxR.png)我一直在搜索和试验一段时间，但我就是找不到我做错了什么。

我想制作一个带有菜单的应用程序，从该菜单中，您可以访问`TableViewcontroller`带有标题栏的应用程序。我发现，为了得到这个标题栏，你需要“插入”`UITableViewController`到`UINavigationController`. 这就是我卡住的地方。

现在不要介意/忘记应用程序中的菜单，因为我知道当用户点击按钮时如何切换视图控制器。

在我的 AppDelegate.m 我有：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    TableViewController *tableView = [[UITableViewController alloc] initWithStyle:UITableViewStylePlain];
    self.navController = [[UINavigationController alloc] initWithRootViewController:tableView];
    self.window.rootViewController = navController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

在我的 AppDelegate.h 文件中，我有：

```
@interface AppDelegate : UIResponder <UIApplicationDelegate>{
    UINavigationController *navcontroller;
}

@property (strong, nonatomic) IBOutlet UIWindow *window;
@property (nonatomic, retain) IBOutlet UINavigationController *navController; 
```

我有 2 个分类器`UITableViewController`和 NavigationView。

在 中`UITableViewController`，我制作了一个名为的数组`tableRows`：

```
tableRows = [[NSArray arrayWithObjects:@"1", @"2", nil] init]; 
```

`numberOfSectionsInTableView`设置为 1 并且设置`numberOfRowsInSection`为`return tableRows.count;`

我没有改变我的 NavigationView.m，只是我试图在其中设置一个标题。

在我的 中`NavigationView.xib`，我试图在`UITableViewController`和之间建立联系`UINavigationController`。

*   我添加了一个 NSObject，并将其类更改为 AppDelegate
*   我将 View 替换为 a`UIWindow`并将 window 属性从 my 连接 `AppDelegate.h`到它
*   我添加了一个`UINavigationController`并将其与`navController`我的`AppDelegate.h`.
*   最后，我将 RootView 的类从 更改 `UINavigationController`为`UITableViewController`。

现在我的问题是，无论有没有 IB 中的连接，无论我尝试在表格或标题栏中进行更改，当我运行应用程序时它都不会更改。

有人知道我做错了什么吗？我使用的是 xcode 4.6，所以我检查过的很多教程都不是很有用，因为它们是用旧版本的 xcode 制作的。请帮助我，提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T12:16:23.567

![在此处输入图像描述](https://i.stack.imgur.com/FDbmy.png)在你`AppDelegate`替换这一行

```
 TableViewController *tableView = [[UITableViewController alloc] initWithStyle:UITableViewStylePlain]; 
```

有了这个

```
 TableViewController *tableView = [[TableViewController alloc] initWithStyle:UITableViewStylePlain]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T12:47:40.117

您不是在创建一个实例，`TableViewController`而是`UITableViewController`因此您没有执行任何代码。（您的应用程序委托中应该对此有编译器警告 - 请务必注意这些警告）。同样，您不会在任何地方加载 NavigationView 笔尖 - 您正在创建一个导航控制器，其中表作为根视图控制器。目前尚不清楚您对 NavigationView 的目标是什么，因此我无法就如何进行提供建议。但是，对于表格视图，请在您的应用委托中更改以下行

```
TableViewController *tableView = [[UITableViewController alloc] initWithStyle:UITableViewStylePlain]; 
```

到

```
TableViewController *tableView = [[TableViewController alloc] init]; 
```

在您的表视图 xib 中，确保将 File's Owner 的类设置为类`TableViewController`（不是`UITableViewController`）。右键单击表格视图并将“数据源”和“委托”旁边的圆圈拖动到文件所有者。然后右键单击文件的所有者并确保“视图”旁边的圆圈连接到表格视图。保存、清理并运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T14:38:59.743

您可能还会发现查看免费的 Sensible TableView 框架非常有用。该框架将获取您的数组并自动生成所有表格视图单元格，同时管理正确设置导航控制器所需的所有细节。希望这可以帮助。

# asp.net-mvc - 动态添加的表单ajax不起作用

> ID：15729067
> 
> 赞同：0
> 
> 时间：2013-03-31T11:48:11.567
> 
> 标签：asp.net-mvc, asp.net-mvc-3, jquery

我有一个 div 的列表。
当我单击 div 中的按钮时，我会使用包含表单的部分视图切换 div 内容。
这是我单击该按钮时发生的代码：

```
@Html.ActionLink("edit", "EditUserLanguage", "UserLanguage", new { userLanguageId = Model.UserLanguageId }, new { @class = "editButton" })
...
$(document).on('click', '.editButton', function (e) {
        $.ajax({
            url: this.href,
            cache: false,
            success: function (html) {                
                var id = $(e.target).closest("div").attr("id");
                $("#" + id).empty();
                $("#" + id).append(html);
            }
        });
        return false;
    }); 
```

我添加的 Html（部分视图）具有：

```
 @using (Html.BeginForm("UpdateUserLanguage", "UserLanguage", FormMethod.Post, new { id = "updateUserLanagegeForm" }))
                            {
    ... 
```

这个主视图在哪里是 div 的列表，我在哪里添加这个新的部分视图，我有这个代码：

```
$(function () {
            $('#updateUserLanagegeForm').submit(function () {
                $.ajax({
                    url: this.action,
                    type: this.method,
                    data: $(this).serialize(),
                    success: function (result) {                        
                        alert("work");                        
                    }
                });
                return false;
            });
        }); //update 
```

当我点击提交动作方法被调用并且我得到新的局部视图返回但不是通过`ajax`.
我只得到返回的部分视图。`alert("work");`永远不会被调用。
这个ajax调用不起作用的原因可能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T12:01:48.140

`submit`处理程序未附加到表单，因为在 dom 准备好后加载表单。因此，将您的代码更改为 -

```
$('body').on('submit','#updateUserLanagegeForm',(function () {
    $.ajax({
        url: this.action,
        type: this.method,
        data: $(this).serialize(),
        success: function (result) {                        
            alert("work");                        
        }
    });
    return false;
}); 
```

这会将处理程序附加到表单，即使它是动态添加的。

# sql - 从 Data Explorer 中获得最多支持的用户

> ID：15729070
> 
> 赞同：0
> 
> 时间：2013-03-31T11:48:23.017
> 
> 标签：sql, dataexplorer

我正在尝试从 SE 的数据浏览器中找到最多支持的用户：[https ://data.stackexchange.com/stackoverflow/query/105658](https://data.stackexchange.com/stackoverflow/query/105658)

```
SELECT
  Users.DisplayName as TheUser,
  COUNT(Votes.Id) as TheUpvotes
FROM
  Votes,
  Users
WHERE
    Votes.VoteTypeId=2
  AND
    Votes.UserId=Users.Id
GROUP BY
  Users.DisplayName 
```

此查询返回 0 个结果。我不知道为什么。你可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T12:11:54.873

实际上你不需要加入一些表。您需要的一切都在桌子上`User`。

`UPVOTES`并且`DOWNVOTES`是匿名的，这就是为什么您无法计算它的原因。该值已存在于列`UpVotes`和`DownVotes`

询问

```
SELECT [User Link], UpVotes, rn
FROM
(
  SELECT a.ID as [User Link],
         a.UpVotes,
         DENSE_RANK() OVER (ORDER BY a.UpVotes DESC) rn
  FROM   Users a
)x
WHERE  rn <= 10
ORDER BY UpVotes DESC 
```

# java - javax.servlet.ServletException：ICEfaces 需要 PersistentFacesServlet

> ID：15729071
> 
> 赞同：0
> 
> 时间：2013-03-31T11:48:30.877
> 
> 标签：java, jsf, icefaces, jsf-1.2, icefaces-1.8

我是 ICEFACES 的初学者，尝试使用一些 ICEFACES 组件成功运行我的第一个 ICEFACES 屏幕。开始使用。我正在使用 ICEFACES 1.8.2。

我从这个链接复制了我的 web.xml 的内容：

[http://res.icesoft.org/docs/v1_8_2/htmlguide/gettingstarted/SessionRendererTutorial11.html#1054095](http://res.icesoft.org/docs/v1_8_2/htmlguide/gettingstarted/SessionRendererTutorial11.html#1054095)

下面是 faces-config.xml 文件：

```
<faces-config
xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_1_2.xsd"
version="1.2">
<application>
    <view-handler> 
    com.icesoft.faces.facelets.D2DFaceletViewHandler 
    </view-handler>
</application>
</faces-config> 
```

下面是**Test.jsp**屏幕内容：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%>
<%@ taglib prefix="f"  uri="http://java.sun.com/jsf/core"%>
<%@ taglib prefix="h"  uri="http://java.sun.com/jsf/html"%>
<%@ taglib prefix="ice"  uri="http://www.icesoft.com/icefaces/component"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
<f:view>
    <ice:outputText id="txtHello" value="Hello ICEFaces"></ice:outputText> <br> 
    <ice:panelGroup title="Hello"></ice:panelGroup>
</f:view>
</body>
</html> 
```

当我使用以下 URL 运行应用程序时：

`http://localhost:8046/TestMojarra/faces/Test.jsp`

我遇到了一个例外：

`javax.servlet.ServletException: ICEfaces requires the PersistentFacesServlet. Please check your web.xml servlet mappings javax.faces.webapp.FacesServlet.service(FacesServlet.java:277)`

`java.lang.IllegalStateException: ICEfaces requires the PersistentFacesServlet. Please check your web.xml servlet mappings com.icesoft.faces.context.DOMResponseWriter.<init>(DOMResponseWriter.java:154) com.icesoft.faces.context.DOMContext.createTemporaryDOMResponseWriter(DOMContext.java:182) com.icesoft.faces.context.DOMContext.getDOMContext(DOMContext.java:228) com.icesoft.faces.renderkit.dom_html_basic.GroupRenderer.encodeChildren(GroupRenderer.java:89) javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:840) javax.faces.component.UIComponent.encodeAll(UIComponent.java:930) javax.faces.component.UIComponent.encodeAll(UIComponent.java:933) com.sun.faces.application.ViewHandlerImpl.doRenderView(ViewHandlerImpl.java:266) com.sun.faces.application.ViewHandlerImpl.renderView(ViewHandlerImpl.java:197) com.icesoft.faces.application.D2DViewHandler.renderView(D2DViewHandler.java:151) com.icesoft.faces.application.D2DViewHandler.renderView(D2DViewHandler.java:151) com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:110) com.sun.faces.lifecycle.Phase.doPhase(Phase.java:100) com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139) javax.faces.webapp.FacesServlet.service(FacesServlet.java:266)`

但是，如果我从上面的 jsp 文件中注释掉该`<ice:panelGroup>`行，屏幕就会显示出来。

请让我知道问题出在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T06:48:48.467

这就是我在 web.xml 中所做的一切。我有 servlet 声明

```
<servlet>
    <servlet-name>Persistent Faces Servlet</servlet-name>
    <servlet-class>com.icesoft.faces.webapp.xmlhttp.PersistentFacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet>
    <servlet-name>Blocking Servlet</servlet-name>
    <servlet-class>com.icesoft.faces.webapp.xmlhttp.BlockingServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet> 
```

以及到 servlet 的映射

```
<servlet-mapping>
    <servlet-name>Persistent Faces Servlet</servlet-name>
    <url-pattern>/ifaces/*</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>Persistent Faces Servlet</servlet-name>
    <url-pattern>/xmlhttp/*</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>Persistent Faces Servlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>Blocking Servlet</servlet-name>
    <url-pattern>/block/*</url-pattern>
</servlet-mapping> 
```

不过，我总是使用 xhtml 文件，而不是 jsp 文件。但是，这总是对我有用。

编辑我已将您的示例重新编辑为 xhtml 格式。有两个标签不是有效的 xhtml。但这通常对我有用

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ice="http://www.icesoft.com/icefaces/component"
      xmlns:f="http://java.sun.com/jsf/core">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"/>
    <title>Insert title here</title>
  </head>
  <body>
    <f:view>
      <ice:outputText id="txtHello" value="Hello ICEFaces"></ice:outputText> <br/> 
      <ice:panelGroup title="Hello"></ice:panelGroup>
    </f:view>
  </body>
</html> 
```

# php - 将每个数组插入单独的 div

> ID：15729086
> 
> 赞同：-9
> 
> 时间：2013-03-31T11:50:44.340
> 
> 标签：php

在我开始之前，我只需要一些建议。基本上我有一个来自mysql的书籍数据数组-ID，名称，流派，评级它们打印在这样的数组中

```
Array ( [book] => Array ( [0] => 1 [1] => book one [2] => horror [3] => 8.9 ) ) 
Array ( [book] => Array ( [0] => 2 [1] =>book two [2] => Comedy [3] => 8.3 ) ) 
Array ( [book] => Array ( [0] => 3 [1] =>book three [2] => Comedy [3] => 8.7 ) ) 
```

等等..我如何将每个数组放在单独的 div 中？

PS PHP 代码获取数据

```
$query=mysql_query("SELECT*FROM book ");
while($row = mysql_fetch_array($query)) {
$book= Array("book" => Array($row['id'], $row['name'],$row['genre'],$row['ratings']));echo"<br>";
print_r( $book); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T11:52:40.130

您可以`foreach`为此使用：

```
foreach ($your_array['book'] as $v) {

  echo "<div>";
  echo "name: ". $v[1];
  echo "category: ". $v[2];
  ...
  echo "</div>";

} 
```

它将沿着您的数组循环并让您使用其中的值。

# c++ - 从具有 10 以外的基数的输入流中读取

> ID：15729096
> 
> 赞同：2
> 
> 时间：2013-03-31T11:51:34.693
> 
> 标签：c++, stream, inputstream

我注意到了，`std::oct`并且`std::hex`可以用于以 8、16 为基数写入输出流。
从输入流中读取 8 或 16 基本系统而不是普通 10 的方式是否相同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T11:53:01.537

您可以使用`std::hex`和`std::oct`操纵器`std::cin`，例如：

```
#include <iostream>

int main()
{
    int i = 0;
    std::cin >> std::hex >> i;
    std::cout << i;
} 
```

当输入为`b`时，该程序的输出将是：

```
11 
```

查看演示两个操纵器使用的[实时示例](http://liveworkspace.org/code/48Ihhx%24178)。输入是`b`，后跟一个换行符，然后是`10`。

# extjs4.1 - 双击图片调用函数

> ID：15729098
> 
> 赞同：1
> 
> 时间：2013-03-31T11:51:41.673
> 
> 标签：extjs4.1

我根据特定 id 检索图像并使用 ExtJS 4 显示为数据视图。现在我需要通过 dbl 单击图像来调用函数。

```
Ext.define('${pkgName}.v02x003001.SV02X00300102', {
    extend: 'Ext.view.View',
    alias: 'widget.sv02x00300102',
    id: 'images-view',
    autoScroll: true,
    trackOver: true,
    multiSelect: true,
    height: 180,
    overItemCls: 'x-item-over',
    itemSelector: 'div.thumb-wrap',
    emptyText: 'No images to display',
    prepareData: function (data) {
        Ext.apply(data, {
            shortName: Ext.util.Format.ellipsis(data.name, 15),
            sizeString: Ext.util.Format.fileSize(data.size),
            dateString: Ext.util.Format.date(data.lastmod, "m/d/Y g:i a")
        });
        return data;
    },
    initComponent: function () {
        var me = this;
        var member = Ext.getCmp('member-sv02x00300104').getValue();
        me.store = 'S02X003001';
        me.tpl = [
            '<tpl for=".">',
            '<div class="thumb-wrap" id="{name}">',
            '<div class="thumb">
            <img  src="${createLink(mapping:'
        img ', params:[])}/{id}/100/100/" title="{id}">
                   </div>',
            '<span class="x-editable">{name}</span></div>',
            '</tpl>',
            '<div class="x-clear"></div>'];

        me.callParent(arguments);
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-22T15:15:34.817

此代码是否适合您的需求（[此处的文档](http://docs.sencha.com/extjs/4.1.1/#!/api/Ext.view.View-event-itemdblclick)）？

```
listeners: {
    itemdblclick: function (view, record, item, index, e) {
        if (Ext.get(e.getTarget()).is('img')) {
            alert('you double clicked an image');
        }
    }
} 
```

# bittorrent - 在 C# 上使用 MonoTorrent 或替代使用 BitTorrent 的经验

> ID：15729102
> 
> 赞同：2
> 
> 时间：2013-03-31T11:52:16.080
> 
> 标签：bittorrent, utorrent, libtorrent, monotorrent

我已经使用 MonoTorrent 库几个星期了，正在寻找任何反馈或推荐的替代方案。

到目前为止，我对该库的唯一问题是它比 uTorrent 慢得多，我不确定这是配置问题还是它是否不支持所需的功能等，但我需要更高的速度来满足我的需要，我发现对于完全相同的文件，我可以在播种机数量和速度方面获得重大差异（乘以 100）。

我也想尝试一下libtorrent，但甚至无法编译windows dll，更不用说编写使用它所需的代码了:-)

我可能不太了解 torrent 协议的历史，但发现在 C#/.Net 世界中找到这么少的支持很奇怪。

甚至正在考虑以某种方式包装 uTorrent 客户端，但它可能会被“皱眉”哈哈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T20:50:57.897

最终使用了 libtorrent C++ 库（在单独的进程上运行，添加了 REST api 以与主程序进行通信），它运行良好，torrent 性能非常好。

# emacs - 如何绑定 C-. 在使用 -nw 启动的 Emacs 中？

> ID：15729106
> 
> 赞同：1
> 
> 时间：2013-03-31T11:52:49.707
> 
> 标签：emacs

我最近从 el-get master 分支安装了 jedi。绝地绑定C-。对于 jedi:key-goto-definition 但它只在 X 模式下工作。在 Emacs23 和 Emacs24 中使用 -nw(no X) 模式启动时绑定失败。

*因此，我在暂存*缓冲区中测试了简单绑定，然后由 Cx Ce 评估。

```
(global-set-key (kbd "C-.") 'find-name-dired) 
```

它在 X 模式下运行良好，但在 no x 模式下失败（-nw）。你有什么主意吗？

提前致谢，

* * *

已编辑

`C-h k` `C-.`以下是安装上述命令后的一些结果：

```
$ emacs -nw -q (without X) 
```

> . 运行命令 self-insert-command，它是“C 源代码”中的交互式内置函数。
> 
> 它绑定了许多普通的文本字符。
> 
> （自插入命令 N）

```
$ emacs -q (With X) 
```

> C-。运行命令 find-name-dired，它是 `find-dired.el' 中的交互式自动加载 Lisp 函数。
> 
> 它绑定到 C-..
> 
> (find-name-dired DIR PATTERN)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:37:26.497

终端不能代表`C-.`。找到另一个键序列并使用 ut，例如`C-c .`.

# file - Gnuplot：点的大小

> ID：15729111
> 
> 赞同：4
> 
> 时间：2013-03-31T11:53:26.683
> 
> 标签：file, graph, size, gnuplot, point

我想做一个不同大小的点的图表。是否可以只使用一个文件并指定文件中每个点的大小？

文件示例：

```
1 2 Size1
2 3 Size2 
```

我想用 size 画点，用`(1,2)`size画`Size1`点。`(2,3)``Size2`

我知道我可以制作不同的文件（即每个大小的点一个文件），但如果我可以只用一个文件做到这一点，它真的会帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T14:20:50.310

`pointsize variable`在绘图命令中使用：

```
plot "data.txt" using 1:2:3 with points pointsize variable 
```

例如，请参阅[http://gnuplot.sourceforge.net/demo/pointsize.html](http://gnuplot.sourceforge.net/demo/pointsize.html)

# java - 延迟套接字java

> ID：15729112
> 
> 赞同：1
> 
> 时间：2013-03-31T11:53:28.307
> 
> 标签：java, algorithm, sockets

我正在使用套接字在 java 中制作多人蛇游戏。所有的传输都是通过服务器到所有连接的客户端完成的。相同的代码还没有完全完成，但它完成了移动蛇的基本工作，并在特定客户吃它的食物时增加分数。

我从服务器端生成食物坐标的随机数并将其转发给所有客户端。如果客户端按下某个键，则计算请求的移动并将移动方向发送到服务器，然后服务器将移动中继到所有客户端（包括发送它的客户端），并且只有在收到移动信息时客户端才会进行更改到移动的蛇。因此，每次移动都会通过网络进行跟踪，并且客户端本身不会做出移动决定，直到它收到，比如客户端“player1”要求移动。

我面临的问题是，即使有两个玩家，在蛇移动一点后坐标似乎也会有所不同。

我可以对我的代码应用哪些可能的补救措施，以消除蛇位置之间的明显滞后？

这是客户端代码：

```
package mycode;

import java.awt.Point;
import java.io.BufferedInputStream;
import java.io.BufferedOutputStream;
import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.net.Socket;
import java.util.Map;

import javax.swing.JOptionPane;

public class ConnectionManager implements Runnable {
    Socket socket;
    boolean start = false;
    DataInputStream in;
    DataOutputStream out;
    Map<String, Snake> map;

    ConnectionManager(String name, String IP, Map<String, Snake> m) {
        this.map = m;
        try {
            socket = new Socket(IP, 9977);
            in = new DataInputStream(new BufferedInputStream(
                    socket.getInputStream()));
            out = new DataOutputStream(new BufferedOutputStream(
                    socket.getOutputStream()));
            out.writeUTF(name);
            out.flush();
        } catch (Exception e) {
            e.printStackTrace();
            JOptionPane.showMessageDialog(null, "Could Not Find Server",
                    "ERROR", JOptionPane.ERROR_MESSAGE);
            System.exit(0);
        }
    }

    void populateMap() {
        try {
            String name = in.readUTF();
            System.out.println("Name received: " + name);
            if (name.equals("start_game_9977")) {
                start = true;
                System.out.println("Game Started");
                return;
            } else if (name.equals("food_coord")) {
                Game.foodx = in.readInt();
                Game.foody = in.readInt();
                return;
            }
            map.put(name, new Snake(5));
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    boolean start() {
        return start;
    }

    void increaseSnakeLength(String thisname){
        Snake temp = map.get(thisname);
        Point temp1=new Point(0,0);
        temp.length++;
        switch (temp.move) {
        case DOWN:
             temp1= new Point(temp.p[temp.length - 2].x,
                    temp.p[temp.length - 2].y+6);
             break;
        case LEFT:
            temp1= new Point(temp.p[temp.length - 2].x-6,
                    temp.p[temp.length - 2].y);
            break;
        case RIGHT:
            temp1= new Point(temp.p[temp.length - 2].x+6,
                    temp.p[temp.length - 2].y);
            break;
        case UP:
            temp1= new Point(temp.p[temp.length - 2].x,
                    temp.p[temp.length - 2].y-6);
            break;
        default:
            break;
        }
        if(temp1.y>Game.max)
            temp1.y=Game.min;
        if(temp1.x>Game.max)
            temp1.x=Game.min;
        if(temp1.y<Game.min)
            temp1.y=Game.max;
        if(temp1.x<Game.min)
            temp1.x=Game.max;
        temp.p[temp.length-1]=temp1;
    }

    void readMotion() {
        try {
            while (true) {
                if (Game.changedirection) {
                    String mov = "";
                    mov = Game.move.name();
                    // System.out.println(Game.move);
                    out.writeUTF(mov);
                    out.flush();
                    Game.changedirection = false;
                }
                if (Game.foodeaten) {
                    out.writeUTF("food_eaten");
                    out.flush();
                    Game.foodeaten = false;
                }
                Thread.sleep(50);
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    void otherRunMethod() {
        try {
            while (true) {
                String mname = in.readUTF();
                String mov = in.readUTF();
                if (mov.equals("Resigned")) {
                    map.remove(mname);
                } else if (mov.length() >= 10) {
                    if (mov.substring(0, 10).equals("food_eaten")) {
                        String[] s = mov.split(",");
                        Game.foodx = Integer.parseInt(s[1]);
                        Game.foody = Integer.parseInt(s[2]);
                        int score = ++map.get(mname).score;
                        increaseSnakeLength(mname);
                        System.out.println(mname + ":" + score+" Length:"+map.get(mname).length);
                    }
                } else {
                    Game.move = Direction.valueOf(mov);
                    map.get(mname).move = Game.move;
                }
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    @Override
    public void run() {
        while (true) {
            if (!start) {
                populateMap();
            } else if (start) {
                new Thread(new Runnable() {
                    public void run() {
                        otherRunMethod();
                    }
                }).start();
                readMotion();
                break;
            }
            try {
                Thread.sleep(10);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }
} 
```

代码很长，所以我只是放置了管理连接的代码的服务器端。

```
package mycode;

import java.io.BufferedInputStream;
import java.io.BufferedOutputStream;
import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.net.Socket;
import java.util.Map;

public class Playerhandler implements Runnable {
    Socket player;
    String thisname;
    Map<String, Socket> map;
    DataInputStream in = null;
    DataOutputStream out = null;
    ObjectInputStream ob;
    Snake snake;

    Playerhandler(Socket player, Map<String, Socket> m) {
        this.player = player;
        this.map = m;
        try {
            in = new DataInputStream(new BufferedInputStream(
                    player.getInputStream()));
            thisname = in.readUTF();
            map.put(thisname, this.player);
            populatePlayers();
            System.out.println("Connected Client " + thisname);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    void populatePlayers() {
        try {
            out = new DataOutputStream(new BufferedOutputStream(
                    player.getOutputStream()));
            for (String name : map.keySet()) {
                out.writeUTF(name);
                out.flush();
            }

            for (String name : map.keySet()) {
                out = new DataOutputStream(new BufferedOutputStream(map.get(
                        name).getOutputStream()));
                out.writeUTF(thisname);
                out.flush();
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    void relay(String move) {
        try {
            if (move.equals("food_eaten")) {
                move = move + ","
                        + (Snakeserver.randomGenerator.nextInt(100) * 6) + ","
                        + (Snakeserver.randomGenerator.nextInt(100) * 6);

            }
            for (String name : map.keySet()) {
                out = new DataOutputStream(new BufferedOutputStream(map.get(
                        name).getOutputStream()));
                out.writeUTF(thisname);
                out.flush();
                out.writeUTF(move);
                // System.out.println(Direction.valueOf(move));
                out.flush();
            }
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    public void run() {
        while (true) {
            try {
                relay(in.readUTF());
            } catch (IOException e) {
                // TODO Auto-generated catch block
                System.out.println("Player " + thisname + " Resigned");
                map.remove(thisname);
                relay("Resigned");
                return;
            }
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T00:37:18.533

这个答案是回顾对话以达成解决方案，并指出一些其他领域需要研究或尝试。

主要的软件行为问题是拥有多个客户端会导致多个客户端在多次移动后显示不同的蛇位置。

在通过评论的一些问题和回复之后，问题的发布者修改了他们的软件，以便所有客户端都由服务器同步发送所有蛇的对象到所有客户端，以便所有客户端现在使用相同的蛇对象。以前，每个客户端都维护自己的蛇对象数据，并且只接收蛇数据中的更改或增量。通过此更改，所有客户端现在都通过服务器传输的蛇对象同步，但是仍然存在客户端显示稍微不同的位置的问题，该问题在一两分钟后得到纠正，因为每个客户端都会收到所有蛇，客户端再次同步。

下一步是研究一种不同的方法，以便客户端使用 UDP/IP 作为网络传输协议而不是当前使用的 TCP/IP 保持更紧密的同步。使用 UDP/IP 的预期结果是减少[TCP 网络传输协议](http://en.wikipedia.org/wiki/Transmission_Control_Protocol)引入的各种滞后，以便提供 TCP 提供的面向连接的、有序的字节流。然而，使用[UDP 网络传输协议](http://en.wikipedia.org/wiki/User_Datagram_Protocol)要求 TCP 使用的一些传递机制以提供可靠的字节序列，必须由 UDP 的用户承担。

UDP 的一些问题是：(1) 数据包的接收顺序可能与发送它们的顺序不同，(2) 数据包可能被丢弃或丢失，因此某些发送的数据包可能无法接收，以及 (3) 数据使用 UDP 发送的必须明确放入数据包中进行传输，以便发送方和接收方看到数据包而不是字节流。

这个贪吃蛇游戏的基本架构如下所示。

客户端将向服务器发送蛇更新。这种交互需要服务器将确认发送回客户端。如果客户端没有收到这样的确认，客户端将在一段时间后重新发送蛇更新。

然后，服务器将更新其数据以反映更改并使用其客户端列表，将相同的数据包发送到所有客户端。每个接收到数据包的客户端都会发送一个确认。通过发送确认，每个客户端通知服务器他们仍在游戏中。如果服务器不再接收客户端确认，它将知道客户端可能已经离开游戏或存在某种网络问题。

每个数据包都会有一个序列号，该序列号在发送数据包后递增。这个序列号提供了一个唯一的标识符，以便客户端和服务器可以检测数据包是否丢失，或者接收到的数据包是否与已经接收到的数据包重复。

对于 UDP，最好是数据包尽可能小。大于底层 IP 网络协议可以发送的 UDP 数据包将被拆分为多个 IP 数据包，多个 IP 数据包一次发送一个，然后在接收网络节点重新组合成 UDP 数据包。

这里有一些关于使用 Java 编程语言的 UDP 网络协议的资源。

[课程：关于数据报](http://docs.oracle.com/javase/tutorial/networking/datagrams/)。

[一个简单的 Java UDP 服务器和 UDP 客户端](http://systembash.com/content/a-simple-java-udp-server-and-udp-client/)。

[Stackoverflow：在 java 中的 UDP 上发送和接收序列化对象](https://stackoverflow.com/questions/3997459/send-and-receive-serialize-object-on-udp-in-java)。

[Java-Gaming.org UDP 与 TCP](http://www.java-gaming.org/index.php?topic=608.0)。

[Gaffer On Games：每个程序员都需要了解的有关游戏网络的知识](http://gafferongames.com/networking-for-game-programmers/what-every-programmer-needs-to-know-about-game-networking/)。

[游戏中的灯光师：可靠性和流量控制](http://gafferongames.com/networking-for-game-programmers/reliability-and-flow-control/)。

[Stackoverflow：使用 javaNIO 发送游戏/模拟状态的可能方法有哪些？](https://stackoverflow.com/questions/5425706/what-are-possible-ways-to-send-game-simulation-state-with-javanio)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T12:33:56.747

我以前从未实现过网络多人游戏，但我认为这里使用最广泛的“解决方案”是作弊。

我认为它被称为“航位推算”，尽管蛇的工作方式与此完全一样。

[http://www.gamasutra.com/view/feature/3230/dead_reckoning_latency_hiding_for_.php](http://www.gamasutra.com/view/feature/3230/dead_reckoning_latency_hiding_for_.php)

基本上，您将游戏循环与网络更新分离。让每个客户端保持自己的状态，并简单地预测对手在每一帧的位置。然后，当来自服务器的更新到达时，您可以将对手调整到他们的真实位置。为了隐藏这种差异，我认为渲染几毫秒前的游戏状态而不是当前状态是很常见的。这样，网络更新就有更现实的机会赶上游戏循环，因此看起来不那么不稳定。

正如我所说，我自己从来没有真正实现过这个，所以 YMMV。这是游戏开发中的难题之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T12:52:58.930

我倾向于添加对 setTcpNoDelay(true) 的显式调用。这将确保[http://en.wikipedia.org/wiki/Nagle%27s_algorithm](http://en.wikipedia.org/wiki/Nagle%27s_algorithm)已关闭，因此禁用优化以提高效率，通常会增加少量延迟。

# delphi - Delphi - 获取 Windows 的默认非 Unicode 字符集

> ID：15729116
> 
> 赞同：3
> 
> 时间：2013-03-31T11:54:23.187
> 
> 标签：delphi, character-encoding, non-unicode

我有一个 Delphi 7 应用程序。我需要能够获得非 unicode 程序的默认 Windows 字符集。我知道 DEFAULT_CHARSET 设置它，但我需要确切知道它是哪个字符集，以便我可以将它与其他字符集进行比较。这可能吗？如何？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T16:38:19.480

GetFontData 正在调用`GetObject`并`LogFont.lfCharSet`用于确定字符集

[用 HFONT 调用的 GetObject](http://msdn.microsoft.com/en-us/library/windows/desktop/dd144904%28v=vs.85%29.aspx)将在这里填写[LogFont](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145037%28v=vs.85%29.aspx) 定义

> DEFAULT_CHARSET 设置为基于**当前系统区域设置**的值。例如，当系统区域设置为英语（美国）时，它被设置为 ANSI_CHARSET。

[GetCPInfoEx 与 CP_ACP](http://msdn.microsoft.com/en-us/library/windows/desktop/dd318081%28v=vs.85%29.aspx)提供[CPINFOEX](http://msdn.microsoft.com/en-us/library/windows/desktop/dd317781%28v=vs.85%29.aspx)结构将提供**系统默认**的Windows ANSI 代码页。

```
var
 CPInfoEx:TCPInfoEx;
 CD:Cardinal;
 CharsetInfo:TCharSetInfo;
 CSN:String;
begin
 If GetCPInfoEx(CP_ACP,0,CPInfoEx) then
  begin
    CD := CPInfoEx.Codepage;
    if TranslateCharsetInfo(CD,CharsetInfo,TCI_SRCCODEPAGE) then
      begin
      CharsetToIdent(CharsetInfo.ciCharset,CSN);
      Showmessage(CPInfoEx.CodePageName+' - '+IntToStr(CharsetInfo.ciCharset)+' - '+CSN);
     end;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-06T12:40:48.813

这是 Delphi 7 的完整示例。

```
unit Main;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls;

type
  _cpinfoex = record
    MaxCharSize: UINT; { max length (bytes) of a char }
    DefaultChar: array[0..MAX_DEFAULTCHAR - 1] of Byte; { default character }
    LeadByte: array[0..MAX_LEADBYTES - 1] of Byte; { lead byte ranges }
    UnicodeDefaultChar : WCHAR;
    CodePage : UINT;
    CodePageName : array[0..MAX_PATH] of char;
  end;
  TCPInfoEx = _cpinfoex;
  {$EXTERNALSYM CPINFOEX}
  CPINFOEX = _cpinfoex;
  {$EXTERNALSYM GetCPInfoEx}

  TForm1 = class(TForm)
    procedure FormShow(Sender: TObject);
  private
    procedure Check;
  public

  end;

  function GetCPInfoEx(CodePage: UINT; dwFlags : DWORD; var lpCPInfoEx: TCPInfoEx): BOOL; stdcall;
  function GetCPInfoEx; external kernel32 name 'GetCPInfoExA';

var
  Form1: TForm1;

implementation

{$R *.dfm}

procedure TForm1.Check;
var
 v_CPInfoEx : TCPInfoEx;
 v_CD : Cardinal;
 v_CharsetInfo : TCharSetInfo;
 v_CSN,
 v_CodePageName,
 v_s, v_info : String;
 v_i : Integer;
begin
 If GetCPInfoEx(CP_ACP, 0, v_CPInfoEx) then
  begin
    v_info := 'CodePage: '+IntToStr(v_CPInfoEx.CodePage)+#13;

    v_CodePageName := '';
    v_i := 0;
    repeat
      v_CodePageName := v_CodePageName + v_CPInfoEx.CodePageName[v_i];
      inc(v_i);
    until v_CPInfoEx.CodePageName[v_i] = #0;
    v_info := v_info + 'CodePageName: '+v_CodePageName+#10#13;

    v_info := v_info + 'MaxCharSize: '+IntToStr(v_CPInfoEx.MaxCharSize)+' bytes.'+#13;

    v_s := '';
    for v_i := 0 to MAX_DEFAULTCHAR - 1 do
      v_s := v_s + IntToStr(v_CPInfoEx.DefaultChar[v_i])+' ';
    v_info := v_info + 'DefaultChar: '+v_s+#13;

    v_s := '';
    for v_i := 0 to MAX_LEADBYTES - 1 - 1 do
      v_s := v_s + IntToStr(v_CPInfoEx.LeadByte[v_i])+' ';
    v_info := v_info + 'LeadByte: '+v_s+#13;

    v_info := v_info + 'UnicodeDefaultChar: '+v_CPInfoEx.UnicodeDefaultChar;

    ShowMessage(v_info);
  end;
end;

procedure TForm1.FormShow(Sender: TObject);
begin
  Check;
end;

end. 
```

# javascript - JavaScript - 仅在选中时计算复选框

> ID：15729121
> 
> 赞同：0
> 
> 时间：2013-03-31T11:55:04.030
> 
> 标签：javascript, checkbox, checked

我是 Javascript 初学者，但我使用 Javascript 数学函数为我的网站构建了一个简单的成本估算器。

```
function calc(form) {
    a = eval(form.a.value)
    b = eval(form.b.value)
    c = eval(form.c.value)
    x = a*(b+c)
    form.ans.value = parseFloat(x).toFixed(2);
} 
```

表格很简单：

```
<form name="formx">
    <label for="a">Number of Units :</label>
    <input type="number" size=3 value=0 name="a">
    <label for="b">Price per Unit :</label>
    <select name="b">
        <option value="0.04">0.04</option>
        <option value="0.05">0.05</option>
        <option value="0.06">0.06</option>
    </select>
    <label for="c">Tick if Urgent</label>
    <input name="c" type="checkbox" value="0.01" />
    <input class="button" type="button" value="  CALCULATE  " onClick="calc(this.form)">
    <label for="ans">Total Cost :</label>
    <input value=" £ " name="ans" size=6>
</form> 
```

**紧急服务的“c”值为 0.01，但仅**需要添加**在选中复选框时才需要添加，否则其值必须为 0。但我似乎无法弄清楚，因为它总是添加“ c" 值为 0.01，选中或未选中。**

 **请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T11:58:26.563

尝试这个-

```
function calc(form) {
    var a = parseFloat(form.a.value)
    var b = parseFloat(form.b.value)
    var c = (form.c.checked) ? parseFloat(form.c.value) : 0;
    var x=a*(b+c)
    form.ans.value=parseFloat(x).toFixed(2);
} 
```

**注意**-

# `eval`是邪恶的

来自 Douglas Crockford 的网站 - [JavaScript 代码约定](http://javascript.crockford.com/code.html)

> eval 函数是 JavaScript 中被滥用最多的特性。躲开它。
> 
> eval 有别名。不要使用 Function 构造函数。不要将字符串传递给 setTimeout 或 setInterval。

另外，请阅读此-

*   [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/eval](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/eval)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T11:58:56.313

考虑使用单选按钮而不是复选框。然后，您可以将多个值链接到单个对象。有关确切差异，请参见[http://www.w3schools.com/html/html_forms.asp](http://www.w3schools.com/html/html_forms.asp)**

# excel - Excel隐藏文本区域

> ID：15729123
> 
> 赞同：0
> 
> 时间：2013-03-31T11:55:25.380
> 
> 标签：excel

我想做的是，当我单击特定的 Excel 文本区域时，它会立即隐藏它。

我试过这个=>

```
Sub ZoneTexte2_Cliquer()
   ActiveSheet.Shapes("ZoneTexte2").Visible = False
End Sub 
```

但我对 VBA 脚本的了解并不多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T13:28:13.250

如果您使用形状的“分配宏”菜单项分配了宏，那么您的代码几乎是正确的。

尝试`ActiveSheet.Shapes(Application.Caller).Visible = False`

假设您首先将其分配给所有形状，它可以用作所有形状单击事件的通用处理程序。

如果您想直接使用它们的名称，您可能需要使用以下内容来获取它们的正确名称以供以后使用。

`msgbox Prompt:=ActiveSheet.Shapes(Application.Caller).Name`

如果您在宏中单击带有该代码的形状，它将显示一个包含其正确名称的消息框，对于文本区域形状，它通常是“文本框 N”（空格和大写字母很重要）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T13:34:33.257

一些vba...

```
Public OrigColumn As Integer
Public OrigRow   As Integer
Public OrigValue As String
Private Sub Worksheet_SelectionChange(ByVal Target As Range)
  If Target.Cells.Count = 1 Then

    If OrigColumn = 0 And OrigRow = 0 And OrigValue = "" Then
        ' first time usage, there is no history selection...
    Else
        ' show the original value when enter out the cell
        Cells(OrigRow, OrigColumn).Value = OrigValue
    End If

    OrigColumn = Target.Column
    OrigRow = Target.Row
    OrigValue = Target.Value

    Target.Value = Null
  End If
End Sub 
```

# http - URL 中的特殊符号

> ID：15729131
> 
> 赞同：1
> 
> 时间：2013-03-31T11:56:18.460
> 
> 标签：http, url, hyperlink, dns, urlencode

我刚刚看到这个 AngelList 的 URL - http://✌.com/。它有一个奇怪的符号，它重定向到[https://angel.co/](https://angel.co/)。有人知道这是如何工作的吗？我不认为你可以在 URL 中使用这样的符号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T12:22:24.907

非 ASCII 符号 (UTF-8) 被转换为 Punycode（见下文），因此[http://✌.com/](http://xn--7bi.com/)被转换（编码）为[http://xn--7bi.com/](http://XN--7BI.com/)。此域集重定向的所有者（响应状态为 301 Moved Permanently），因此您登陆[https://angel.co/](https://angel.co/)。

> Punycode 是一种编码语法，通过它可以将 Unicode (UTF-8) 字符串转换为网络主机名中允许的基本 ASCII 字符。Punycode 用于国际化域名，简称 IDN 或 IDNA（应用程序中的国际化域名）。
> 
> 例如，当您在浏览器中键入 cafe.com 时，您的浏览器（即支持 IDNA 的应用程序）首先将字符串转换为 punycode“xn--caf-dma.com”，因为字符 'é' 不是允许在常规域名中。Punycode 域无法在旧版浏览器中运行。

[（报价来源和Punycode编码器/解码器）](http://www.charset.org/punycode.php)

此转换在[RFC 3490](https://www.rfc-editor.org/rfc/rfc3490)中进行了描述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T12:22:15.250

这不常见，但并非不可能。浏览器或客户端在发送 URL 之前对其进行 URL 编码（也称为百分比编码），以便正确传输特殊字符。

您可以在此处阅读有关 URL 的更多信息：[https ://www.rfc-editor.org/rfc/rfc3986](https://www.rfc-editor.org/rfc/rfc3986)

# android - 如何将我的操作栏列表导航定位在右侧？

> ID：15729132
> 
> 赞同：10
> 
> 时间：2013-03-31T11:56:28.103
> 
> 标签：android, android-actionbar, actionbarsherlock

![在此处输入图像描述](https://i.stack.imgur.com/lHZgY.png)

这张图片展示了我需要做的事情。我需要下拉菜单始终保持在溢出菜单图标的左侧

我怎样才能做到这一点？

**我的样式.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<resources xmlns:android="http://schemas.android.com/apk/res/android">

    <!-- Variation on the Holo Light theme that styles the Action Bar -->
    <style name="Theme.AndroidDevelopers" parent="Theme.Sherlock.Light">
        <item name="android:actionBarItemBackground">@drawable/ad_selectable_background</item>
        <item name="actionBarItemBackground">@drawable/ad_selectable_background</item>
        <item name="android:popupMenuStyle">@style/MyPopupMenu</item>
        <item name="popupMenuStyle">@style/MyPopupMenu</item>
        <item name="android:dropDownListViewStyle">@style/MyDropDownListView</item>
        <item name="dropDownListViewStyle">@style/MyDropDownListView</item>
        <item name="android:actionBarTabStyle">@style/MyActionBarTabStyle</item>
        <item name="actionBarTabStyle">@style/MyActionBarTabStyle</item>
        <item name="android:actionDropDownStyle">@style/MyDropDownNav</item>
        <item name="actionDropDownStyle">@style/MyDropDownNav</item>
        <item name="android:listChoiceIndicatorMultiple">@drawable/ad_btn_check_holo_light</item>
        <item name="android:listChoiceIndicatorSingle">@drawable/ad_btn_radio_holo_light</item>

        <!-- <item name="android:actionOverflowButtonStyle">@style/MyOverflowButton</item> -->
    </style>

    <!-- style the overflow menu -->
    <style name="MyPopupMenu" parent="Widget.Sherlock.Light.PopupMenu">
        <item name="android:popupBackground">@drawable/ad_menu_dropdown_panel_holo_light</item>
    </style>

    <!-- style the items within the overflow menu -->
    <style name="MyDropDownListView" parent="Widget.Sherlock.ListView.DropDown">
        <item name="android:listSelector">@drawable/ad_selectable_background</item>
    </style>

    <!-- style for the tabs -->
    <style name="MyActionBarTabStyle" parent="Widget.Sherlock.Light.ActionBar.TabBar">
        <item name="android:background">@drawable/actionbar_tab_bg</item>
    </style>

    <!-- style the list navigation -->
    <style name="MyDropDownNav" parent="Widget.Sherlock.Light.Spinner.DropDown.ActionBar">
        <item name="android:background">@drawable/ad_spinner_background_holo_light</item>
        <item name="android:popupBackground">@drawable/ad_menu_dropdown_panel_holo_light</item>
        <item name="android:dropDownSelector">@drawable/ad_selectable_background</item>

    </style>

    <!--
         the following can be used to style the overflow menu button
         only do this if you have an *extremely* good reason to!!

    -->
    <!--
    <style name="MyOverflowButton" parent="Widget.Sherlock.ActionButton.Overflow">
        <item name="android:src">@drawable/ic_menu_view</item>
        <item name="android:background">@drawable/action_button_background</item>
    </style>

    -->

  <style name="customRatingBar" parent="@android:style/Widget.RatingBar">
    <item name="android:progressDrawable" >@drawable/custom_ratingbar</item>
    <item name="android:indeterminateDrawable">@drawable/money_off</item>
     <item name="android:minHeight">10dip</item>
       <item name="android:maxHeight">15dip</item>
       <item name="android:scaleType">centerInside</item>

</style>
</resources> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-25T15:33:40.320

作为将其实现为操作视图的示例，“Emanuel Moecklin”是[以下代码的所有者](https://groups.google.com/forum/#!topic/actionbarsherlock/4zD37K7vQks)

```
ActionBar actionBar = getSupportActionBar();
    final Context context = actionBar.getThemedContext();
    final String[] entries = new String[] { "Entry 1", "Entry 2", "Entry 3" };
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(context,
            R.layout.sherlock_spinner_item, entries);
    adapter.setDropDownViewResource(R.layout.sherlock_spinner_dropdown_item);

    // create ICS spinner
    IcsSpinner spinner = new IcsSpinner(this, null,
            R.attr.actionDropDownStyle);
    spinner.setAdapter(adapter);
    spinner.setOnItemSelectedListener(new OnItemSelectedListener() {
        @Override
        public void onItemSelected(IcsAdapterView<?> parent, View view,
                int position, long id) {
            Toast.makeText(context, "Item selected: " + entries[position],
                    Toast.LENGTH_SHORT).show();
        }

        @Override
        public void onNothingSelected(IcsAdapterView<?> parent) {
        }
    });

    // configure custom view
    IcsLinearLayout listNavLayout = (IcsLinearLayout) getLayoutInflater()
            .inflate(R.layout.abs__action_bar_tab_bar_view, null);
    LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.MATCH_PARENT);
    params.gravity = Gravity.CENTER;
    listNavLayout.addView(spinner, params);
    listNavLayout.setGravity(Gravity.RIGHT); // <-- align the spinner to the
                                                // right

    // configure action bar
    actionBar.setCustomView(listNavLayout, new ActionBar.LayoutParams(
            Gravity.RIGHT));
    actionBar.setDisplayShowCustomEnabled(true); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T17:13:36.323

据我所知，将操作栏功能从左向右移动是不可能的。但是，您可以将 a 添加`Spinner`为[操作视图](http://developer.android.com/guide/topics/ui/actionbar.html#ActionView)并对其进行自定义，使其外观和行为`Spinner`与操作栏列表导航中的完全一样。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-28T07:24:12.203

**使用**ToolBar**在**Actionbar**的**右侧****添加 UI 组件**：**

 ******查看[此](https://developer.android.com/reference/android/widget/Toolbar.html)链接以获取更多**ToolBar**的详细信息。

附上截图。

![在此处输入图像描述](https://i.stack.imgur.com/6iJv8.png)

**工具栏.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<android.support.v7.widget.Toolbar
    style="@style/ToolBarStyle"
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="?attr/colorPrimary"
    android:minHeight="@dimen/abc_action_bar_default_height_material">

    <RelativeLayout
        android:id="@+id/rlToolBarMain"
        android:layout_width="wrap_content"
        android:layout_marginRight="10dp"
        android:layout_marginLeft="10dp"
        android:layout_height="wrap_content"
        android:layout_gravity="right|center_vertical">

    </RelativeLayout>
</android.support.v7.widget.Toolbar> 
```

****应用****风格**_**

 ****```
<resources>

    <!-- Base application theme. -->
    <style name="AppTheme" parent="Theme.AppCompat.NoActionBar">
        <!-- Customize your theme here. -->
        <item name="colorPrimary">@color/myPrimaryColor</item>
        <item name="colorPrimaryDark">@color/myPrimaryDarkColor</item>
        <item name="colorAccent">@color/myAccentColor</item>
        <item name="android:textColorPrimary">@color/myTextPrimaryColor</item>
        <item name="drawerArrowStyle">@style/DrawerArrowStyle</item>

        <item name="android:windowBackground">@color/myWindowBackground</item>
    </style>

    <style name="DrawerArrowStyle" parent="Widget.AppCompat.DrawerArrowToggle">
        <item name="spinBars">true</item>
        <item name="color">@android:color/white</item>
    </style>

    <style name="ToolBarStyle" parent="">
        <item name="popupTheme">@style/ThemeOverlay.AppCompat.Light</item>
        <item name="theme">@style/ThemeOverlay.AppCompat.Dark.ActionBar</item>
    </style>
</resources> 
```

**在 activity_main.xml 中包含 xml**

```
<include
   android:id="@+id/toolbar_actionbar"
   layout="@layout/toolbar_default"
   android:layout_width="match_parent"
   android:layout_height="wrap_content" /> 
```

您的**Activity**必须**扩展** **AppCompatActivity**

**onCreate**的**Activity** _

 **```
Toolbar mToolbar = (Toolbar) findViewById(R.id.toolbar_actionbar);
setSupportActionBar(mToolbar);
getSupportActionBar().setDisplayShowHomeEnabled(true); 
```

**onCreateView**的**Fragment** _

 **```
Toolbar  mToolBar = (Toolbar) getActivity().findViewById(R.id.toolbar_actionbar);
RelativeLayout rlToolBarMain = (RelativeLayout)mToolBar.findViewById(R.id.rlToolBarMain);

Spinner mSpinner = new Spinner(getActivity());
String[] frags = new String[]{
                "category1",
                "category2",
                "category3",
        };
ArrayAdapter<String> arrayAdapter = new ArrayAdapter<String>(getActivity(),android.R.layout.simple_list_item_1,frags);
mSpinner.setAdapter(arrayAdapter);
rlToolBarMain.addView(mSpinner); 
```

**完毕**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-10T06:11:22.320

试试这个，

```
 <android.support.v7.widget.Toolbar
        android:id="@+id/toolbar"
        android:layout_width="match_parent"
        android:layout_height="?attr/actionBarSize"
        android:background="?attr/colorPrimary"
        app:layout_scrollFlags="scroll|enterAlways"
        app:popupTheme="@style/AppTheme.PopupOverlay"
        app:title="@string/app_name">

        <Spinner
            android:id="@+id/Method"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_gravity="right|center_vertical"
            android:layout_weight="1"
            android:gravity="right|center_vertical" />
    </android.support.v7.widget.Toolbar> 
```**************

# amazon-s3 - S3 上的回形针 - 检索已删除的文件？

> ID：15729134
> 
> 赞同：0
> 
> 时间：2013-03-31T11:56:54.343
> 
> 标签：amazon-s3, paperclip

我刚刚在我的 Rails 应用程序中搞砸了。我从我的开发站点的数据库中删除了一半的用户，认为这对实时站点数据库没有影响，这似乎导致用户头像在实时站点上被删除！

我对回形针或 S3 不太了解，但如果有人知道是否有可能将它们取回，我正在寻求帮助？

S3 有备份吗？图像是否真的被删除了，或者只是以某种方式与相关的用户对象分离？

我在我的用户模型文件中使用回形针，如下所示：

```
# paperclip avatars on S3
has_attached_file :avatar, {
                  :styles => { :medium => "200x200", :small => "100x100#", :thumb => "64x64#" },
                  :default_url => "/assets/profiles/avatar_default_200x200.png",
                  :path => "/avatars/:style/:id/:filename"
}.merge(PAPERCLIP_STORAGE_OPTIONS)

validates_attachment_size :avatar, :less_than => 2.megabytes,
                        :unless => Proc.new {|m| m[:image].nil?}
validates_attachment_content_type :avater, :content_type=>['image/jpeg', 'image/png', 'image/gif'],
                                :unless => Proc.new {|m| m[:image].nil?} 
```

感谢您提供任何信息！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:05:22.520

如果您尚未在 S3 中启用版本控制，我猜您不走运。

为了跟踪从 s3 中删除的对象，您可以向 S3 存储桶添加版本控制。这将导致 S3 即使在删除之后也保留对象的版本。

详细信息可以在[这里](http://docs.amazonwebservices.com/AmazonS3/latest/dev/Versioning.html)找到。

# xamarin.ios - 设置默认语言

> ID：15729135
> 
> 赞同：5
> 
> 时间：2013-03-31T11:57:02.623
> 
> 标签：xamarin.ios

我想以我的母语查看默认按钮标题，

甚至我将 iPad 的语言更改为另一种语言。我的应用程序仍然显示英文的...编辑、完成、保存等。

我还在 XCode 中将 CFBundleDevelopmentRegion 设置为用户定义的变量，但没有帮助！

你能帮我吗 ？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-01T07:41:27.120

你应该做这些事情：

*   将您的母语添加到应用程序支持`Localization`的语言数组中；![应用设置中的外观](https://i.stack.imgur.com/krCEM.png)

*   使您的`Application.Main`程序看起来像：

```
 static void Main (string[] args)
    {
        // if you want to use a different Application Delegate class from "AppDelegate"
        // you can specify it here.
        NSUserDefaults.StandardUserDefaults.SetValueForKey(NSArray.FromStrings("tr"), new NSString("AppleLanguages"));
        NSUserDefaults.StandardUserDefaults.Synchronize();
        UIApplication.Main (args, null, "AppDelegate");
    } 
```

那么，这

![在此处输入图像描述](https://i.stack.imgur.com/XAOov.png)

转向这个

![在此处输入图像描述](https://i.stack.imgur.com/a2RdY.png)

（我建议你的语言是土耳其语。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T08:14:49.483

对于 monotouch，我认为它是不同的，它们隐藏了一些减少 IPA 大小的语言。

[http://docs.xamarin.com/guides/ios/advanced_topics/localization_and_internationalization](http://docs.xamarin.com/guides/ios/advanced_topics/localization_and_internationalization)

# android - 在 Android SQLite 中检索两个日期之间的数据

> ID：15729136
> 
> 赞同：2
> 
> 时间：2013-03-31T11:57:14.950
> 
> 标签：android

我想在 Android 中检索两个日期之间的数据，`SQLite`我在课堂上使用了一个函数`SQLiteAdapter`。我的功能是

```
public void history(String startdate,String enddate) {  
   Cursor mCursor = db.rawQuery("SELECT * FROM "+ KK_AIRLINEBOOK + 
                    " WHERE " + KEY_Bookingdate + 
                    " BETWEEN " + startdate + " AND " + enddate , null);        
} 
```

但是它不起作用，它在附近显示语法错误`AND`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-31T15:24:00.263

放置文字

```
public void history(String startdate,String enddate) {  
Cursor mCursor = db.rawQuery("SELECT * FROM "+ KK_AIRLINEBOOK + 
                " WHERE " + KEY_Bookingdate + 
                " BETWEEN '" + startdate + "' AND '" + enddate + "'", null);        
} 
```

但是，如果您使用 selectionArgs 会更好

```
public void history(String startdate,String enddate) {  
Cursor mCursor = db.rawQuery("SELECT * FROM "+ KK_AIRLINEBOOK + 
                " WHERE " + KEY_Bookingdate + 
                " BETWEEN ?  AND ?", new String[]{startdate, enddate});        
} 
```

# g++ - 设置 LD_LIBRARY_PATH 环境变量以在运行时加载共享库 (g++)

> ID：15729137
> 
> 赞同：7
> 
> 时间：2013-03-31T11:57:22.887
> 
> 标签：g++, environment-variables, dynamic-linking, dynamic-library

我有两个与同一问题相关的问题：

1.  我在 `pwd`/lib 中保存了一个共享对象，虽然使用它的可执行文件编译成功（通过使用 -l 和 -L 开关），但在运行时，它让我很伤心。如果我尝试运行`LD_LIBRARY_PATH=/my/absolute/path/to/library/directory ./test`它工作正常。但是如果我导出 LD_LIBRARY_PATH=/my/absolute/path/to/library/directory 并`./test`说它找不到共享库。但是，如果我再做`LD_LIBRARY_PATH=$LD_LIBRARY_PATH ./test`一次，它工作正常！！关于我做错了什么的任何想法？

2.  第二个问题与 LD_LIBRARY_PATH 环境变量的导出有关。如果我打开终端并键入`export LD_LIBRARY_PATH=/path/to/stuff`然后键入`echo $LD_LIBRARY_PATH`，则变量是正确的。但是，如果我编写一个包含导出命令的脚本，仅仅运行它并不会更新变量，而是我需要运行`source install.sh`才能真正持久化变量。什么是最好的解决方案？

感谢您的时间！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T12:57:41.403

先回答**第二个**问题：

`source`在当前 shell 中执行脚本，`./install.sh`在不同的 shell 中打开并执行它。 [http://www.unix.com/unix-dummies-questions-answers/537-difference-between-source-exec-script.html](http://www.unix.com/unix-dummies-questions-answers/537-difference-between-source-exec-script.html)

现在你的第一个问题：

`LD_LIBRARY_PATH=$LD_LIBRARY_PATH ./test`仅在一个命令（命令）之前设置 LD_LIBRARY_PATH 变量`./test`。出于与上述相同的原因，我相信这不会转移到 shell`./test`创建的任何东西上。为了让它持续存在，您可能需要`export LD_LIBRARY_PATH=...`将`~/.bashrc`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-25T09:02:59.063

我发现有时通过 CFLAGS 环境变量显式添加 -L 是成功的，而 LD_RUN_PATH 不是。如：export CFLAGS=-L/opt/tool/lib

# android - 在显示对话框时，我得到“在 onSaveInstanceState 之后无法执行此操作”

> ID：15729138
> 
> 赞同：134
> 
> 时间：2013-03-31T11:57:30.433
> 
> 标签：android, dialog, fragment

一些用户正在报告，如果他们使用通知栏中的快速操作，他们就会强制关闭。

**我在调用“TestDialog”**类的通知中显示了一个快速操作。在按下按钮“贪睡”后的 TestDialog 类中，我将显示贪睡对话框。

```
private View.OnClickListener btnSnoozeOnClick() {
    return new View.OnClickListener() {

        public void onClick(View v) {
            showSnoozeDialog();
        }
    };
}

private void showSnoozeDialog() {
    FragmentManager fm = getSupportFragmentManager();
    SnoozeDialog snoozeDialog = new SnoozeDialog();
    snoozeDialog.show(fm, "snooze_dialog");
} 
```

错误是`*IllegalStateException: Can not perform this action after onSaveInstanceState*.`

***IllegarStateException 被触发的代码行是：***

```
snoozeDialog.show(fm, "snooze_dialog"); 
```

该类正在扩展“FragmentActivity”，而“SnoozeDialog”类正在扩展“DialogFragment”。

**这是错误的完整堆栈跟踪：**

```
java.lang.IllegalStateException: Can not perform this action after onSaveInstanceState
at android.support.v4.app.FragmentManagerImpl.checkStateLoss(FragmentManager.java:1327)
at android.support.v4.app.FragmentManagerImpl.enqueueAction(FragmentManager.java:1338)
at android.support.v4.app.BackStackRecord.commitInternal(BackStackRecord.java:595)
at android.support.v4.app.BackStackRecord.commit(BackStackRecord.java:574)
at android.support.v4.app.DialogFragment.show(DialogFragment.java:127)
at com.test.testing.TestDialog.f(TestDialog.java:538)
at com.test.testing.TestDialog.e(TestDialog.java:524)
at com.test.testing.TestDialog.d(TestDialog.java:519)
at com.test.testing.g.onClick(TestDialog.java:648)
at android.view.View.performClick(View.java:3620)
at android.view.View$PerformClick.run(View.java:14292)
at android.os.Handler.handleCallback(Handler.java:605)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4507)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
at dalvik.system.NativeStart.main(Native Method) 
```

我无法重现此错误，但我收到了很多错误报告。

任何人都可以帮助我如何解决这个错误？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2016-02-16T11:22:00.417

这是常见的[问题](https://code.google.com/p/android/issues/detail?id=23761)。我们通过覆盖 show() 并在 DialogFragment 扩展类中处理异常解决了这个问题

```
public class CustomDialogFragment extends DialogFragment {

    @Override
    public void show(FragmentManager manager, String tag) {
        try {
            FragmentTransaction ft = manager.beginTransaction();
            ft.add(this, tag);
            ft.commit();
        } catch (IllegalStateException e) {
            Log.d("ABSDIALOGFRAG", "Exception", e);
        }
    }
} 
```

请注意，应用此方法不会改变 DialogFragment.class 的内部字段：

```
boolean mDismissed;
boolean mShownByMe; 
```

在某些情况下，这可能会导致意外结果。更好地使用 commitAllowingStateLoss() 而不是 commit()

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2014-09-07T01:20:34.330

这意味着您`commit()`（`show()`在 DialogFragment 的情况下）在`onSaveInstanceState()`.

Android 会将您的片段状态保存在`onSaveInstanceState()`. 因此，如果您在片段状态`commit()`之后进行片段，`onSaveInstanceState()`则会丢失。

结果，如果 Activity 被杀死并稍后重新创建，片段将不会添加到糟糕的用户体验的活动中。这就是为什么 Android 不允许不惜一切代价进行状态丢失。

简单的解决方案是检查状态是否已经保存。

```
boolean mIsStateAlreadySaved = false;
boolean mPendingShowDialog = false;

@Override
public void onResumeFragments(){
    super.onResumeFragments();
    mIsStateAlreadySaved = false;
    if(mPendingShowDialog){
        mPendingShowDialog = false;
        showSnoozeDialog();
    }
}

@Override
public void onPause() {
    super.onPause();
    mIsStateAlreadySaved = true;
}

private void showSnoozeDialog() {
    if(mIsStateAlreadySaved){
        mPendingShowDialog = true;
    }else{
        FragmentManager fm = getSupportFragmentManager();
        SnoozeDialog snoozeDialog = new SnoozeDialog();
        snoozeDialog.show(fm, "snooze_dialog");
    }
} 
```

注意：onResumeFragments() 将在片段恢复时调用。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2020-02-04T00:32:39.323

使用 Activity-KTX 的新生命周期范围就像以下代码示例一样简单：

```
lifecycleScope.launchWhenResumed {
   showErrorDialog(...)
} 
```

该方法可以在 onStop() 之后直接调用，并且在返回时调用 onResume() 将成功显示对话框。

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2016-10-20T18:25:30.620

```
private void showSnoozeDialog() {
    FragmentManager fm = getSupportFragmentManager();
    SnoozeDialog snoozeDialog = new SnoozeDialog();
    // snoozeDialog.show(fm, "snooze_dialog");
    FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
    ft.add(snoozeDialog, "snooze_dialog");
    ft.commitAllowingStateLoss();
} 
```

参考：[链接](https://stackoverflow.com/a/12464899/1233979)

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2017-01-23T19:17:42.163

几天后，我想分享我的解决方案如何修复它，以显示 DialogFragment 你应该覆盖`show()`它的方法并调用`commitAllowingStateLoss()`对象`Transaction`。这是 Kotlin 中的示例：

```
override fun show(manager: FragmentManager?, tag: String?) {
        try {
            val ft = manager?.beginTransaction()
            ft?.add(this, tag)
            ft?.commitAllowingStateLoss()
        } catch (ignored: IllegalStateException) {

        }

    } 
```

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2014-06-19T10:23:09.957

如果对话框不是很重要（可以在应用关闭/不再显示时不显示它），请使用：

```
boolean running = false;

@Override
public void onStart() {
    running = true;
    super.onStart();
}

@Override
public void onStop() {
    running = false;
    super.onStop();
} 
```

并且仅在我们运行时打开您的对话框（片段）：

```
if (running) {
    yourDialog.show(...);
} 
```

**编辑，可能更好的解决方案：**

在生命周期中调用 onSaveInstanceState 的位置是不可预测的，我认为更好的解决方案是像这样检查 isSavedInstanceStateDone() ：

```
/**
 * True if SavedInstanceState was done, and activity was not restarted or resumed yet.
 */
private boolean savedInstanceStateDone;

@Override
protected void onResume() {
    super.onResume();

    savedInstanceStateDone = false;
}

@Override
protected void onStart() {
    super.onStart();

    savedInstanceStateDone = false;
}

protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    savedInstanceStateDone = true;
}

/**
 * Returns true if SavedInstanceState was done, and activity was not restarted or resumed yet.
 */
public boolean isSavedInstanceStateDone() {
    return savedInstanceStateDone;
} 
```

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2018-03-15T20:52:49.240

我多年来一直遇到这个问题。
互联网上充斥着数十次（数十万次？数千次？）关于此的讨论，其中似乎充斥着混乱和虚假信息。
更糟糕的是，本着 xkcd“14 标准”漫画的精神，我将我的答案扔给了戒指。
[![xkcd 14 标准](https://i.stack.imgur.com/pacme.png)](https://i.stack.imgur.com/pacme.png)

, , 和类似的`cancelPendingInputEvents()`解决`commitAllowingStateLoss()`方案`catch (IllegalStateException e)`看起来都很糟糕。

希望以下内容可以轻松地展示如何重现和解决问题：

```
private static final Handler sHandler = new Handler();
private boolean mIsAfterOnSaveInstanceState = true;

@Override
protected void onSaveInstanceState(Bundle outState)
{
    super.onSaveInstanceState(outState);
    mIsAfterOnSaveInstanceState = true; // <- To repro, comment out this line
}

@Override
protected void onPostResume()
{
    super.onPostResume();
    mIsAfterOnSaveInstanceState = false;
}

@Override
protected void onResume()
{
    super.onResume();
    sHandler.removeCallbacks(test);
}

@Override
protected void onPause()
{
    super.onPause();
    sHandler.postDelayed(test, 5000);
}

Runnable test = new Runnable()
{
    @Override
    public void run()
    {
        if (mIsAfterOnSaveInstanceState)
        {
            // TODO: Consider saving state so that during or after onPostResume a dialog can be shown with the latest text
            return;
        }

        FragmentManager fm = getSupportFragmentManager();
        DialogFragment dialogFragment = (DialogFragment) fm.findFragmentByTag("foo");
        if (dialogFragment != null)
        {
            dialogFragment.dismiss();
        }

        dialogFragment = GenericPromptSingleButtonDialogFragment.newInstance("title", "message", "button");
        dialogFragment.show(fm, "foo");

        sHandler.postDelayed(test, 5000);
    }
}; 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2013-12-26T11:42:26.170

请尝试使用 FragmentTransaction 而不是 FragmentManager。我认为下面的代码将解决您的问题。如果没有，请告诉我。

```
FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
SnoozeDialog snoozeDialog = new SnoozeDialog();
snoozeDialog.show(ft, "snooze_dialog"); 
```

编辑：

[分片交易](http://www.survivingwithandroid.com/2013/04/android-fragment-transaction.html)

请检查此链接。我认为它将解决您的疑问。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2018-10-16T13:44:41.403

使您的对话框片段对象全局并在 onPause() 方法中调用dismissAllowingStateLoss()

```
@Override
protected void onPause() {
    super.onPause();

    if (dialogFragment != null) {
        dialogFragment.dismissAllowingStateLoss();
    }
} 
```

不要忘记在片段中分配值并在按钮单击或任何地方调用 show() 。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2017-11-30T14:02:58.397

许多视图将高级事件（例如单击处理程序）发布到事件队列以延迟运行。所以问题是已经为活动调用了“onSaveInstanceState”，但事件队列包含延迟的“点击事件”。因此，当此事件被分派给您的处理程序时

```
at android.os.Handler.handleCallback(Handler.java:605)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:137) 
```

并且您的代码确实`show`抛出了 IllegalStateException。

最简单的解决方案是清理事件队列，在`onSaveInstanceState`

```
protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        // ..... do some work
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.KITKAT) {
            findViewById(android.R.id.content).cancelPendingInputEvents();
        }
} 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2019-08-24T21:35:42.493

使用此代码

```
FragmentTransaction ft = fm.beginTransaction();
        ft.add(yourFragment, "fragment_tag");
        ft.commitAllowingStateLoss(); 
```

代替

```
yourFragment.show(fm, "fragment_tag"); 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2020-10-22T08:57:21.210

如果您覆盖 show() 函数，请不要这样做：

```
override fun show(manager: FragmentManager, tag: String?) {
    // mDismissed = false; is removed -> lead to wrong state
    // mShownByMe = true; is removed -> lead to wrong state
    val ft = manager.beginTransaction()
    ft.add(this, tag)
    ft.commitAllowingStateLoss()
} 
```

它可能导致错误的对话状态

做就是了：

```
override fun show(manager: FragmentManager, tag: String?) {
    try {
        super.show(manager, tag)
    } catch (e: Exception) {
        val ft = manager.beginTransaction()
        ft.add(this, tag)
        ft.commitAllowingStateLoss()
    }
} 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2019-11-27T17:06:55.810

通过使用反射，我找到了一个优雅的解决方案。以上所有解决方案的问题是字段**mDismissed**和**mShownByMe**不会改变它们的状态。

只需在您自己的自定义底部工作表对话框片段中覆盖方法“显示”，如下面的示例（Kotlin）

```
override fun show(manager: FragmentManager, tag: String?) {
        val mDismissedField = DialogFragment::class.java.getDeclaredField("mDismissed")
        mDismissedField.isAccessible = true
        mDismissedField.setBoolean(this, false)

        val mShownByMeField = DialogFragment::class.java.getDeclaredField("mShownByMe")
        mShownByMeField.isAccessible = true
        mShownByMeField.setBoolean(this, true)

        manager.beginTransaction()
                .add(this, tag)
                .commitAllowingStateLoss()
    } 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2013-12-24T19:09:16.650

虽然它没有在任何地方正式提及，但我几次遇到这个问题。根据我的经验，在旧平台上支持片段的兼容性库存在问题，这会导致此问题。您可以使用普通的片段管理器 API 对此进行测试。如果没有任何效果，那么您可以使用普通对话框而不是对话框片段。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2017-08-16T09:38:42.970

1.  将此类添加到您的项目中：（必须在**android.support.v4.app**包中）

```
包android.support.v4.app；

/**
 * 由 Gil 于 2017 年 8 月 16 日创建。
 */

公共类 StatelessDialogFragment 扩展 DialogFragment {
    /**
     * 显示对话框，使用现有事务添加片段，然后提交
     * 交易同时允许状态丢失。

     *
     * 我建议你大部分时间使用 {@link #show(FragmentTransaction, String)} 但是
     * 这适用于您真的不关心的对话。（调试/跟踪/广告等）
     *
     * @param 交易
     * 在其中添加片段的现有事务。
     * @param 标记
     * 此片段的标签，根据
     * {@link FragmentTransaction#add(Fragment, String) FragmentTransaction.add}。
     * @return 返回已提交事务的标识符，按照
     * {@link FragmentTransaction#commit() FragmentTransaction.commit()}。
     * @see StatelessDialogFragment#showAllowingStateLoss(FragmentManager, String)
     */
    public int showAllowingStateLoss(FragmentTransaction 交易，字符串标签)
    {
        mDismissed = 假；
        mShownByMe = 真；
        transaction.add(this, tag);
        mViewDestroyed = 假；
        mBackStackId = transaction.commitAllowingStateLoss();
        返回 mBackStackId；
    }

    /**
     * 显示对话框，将片段添加到给定的 FragmentManager。这是一个方便
     * 用于显式创建事务，使用给定标签将片段添加到其中，以及
     * 在不关心状态的情况下提交它。这不会*将*交易添加到
     * 回栈。当片段被解除时，将执行一个新的事务来移除它
     * 来自活动。

     *
     * 我建议你大部分时间使用 {@link #show(FragmentManager, String)} 但这是
     * 对于你真的不关心的对话。（调试/跟踪/广告等）
     *
     *
     * @参数管理器
     * 这个片段将被添加到的 FragmentManager。
     * @param 标记
     * 此片段的标签，根据
     * {@link FragmentTransaction#add(Fragment, String) FragmentTransaction.add}。
     * @see StatelessDialogFragment#showAllowingStateLoss(FragmentTransaction, String)
     */
    public void showAllowingStateLoss（FragmentManager 管理器，字符串标签）
    {
        mDismissed = 假；
        mShownByMe = 真；
        FragmentTransaction ft = manager.beginTransaction();
        ft.add（这个，标签）；
        ft.commitAllowingStateLoss();
    }
}

```

2.  扩展**StatelessDialogFragment**而不是 DialogFragment
3.  使用方法**showAllowingStateLoss**而不是 show

4.  享受 ;）

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-02-09T02:42:28.547

此错误似乎正在发生，因为输入事件（例如按键或点击事件）在`onSaveInstanceState`被调用后被传递。

解决方案是在您的活动中覆盖`onSaveInstanceState`并取消任何未决事件。

```
@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.KITKAT) {
        final View rootView = findViewById(android.R.id.content);
        if (rootView != null) {
            rootView.cancelPendingInputEvents();
        }
    }
} 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-03-20T17:17:32.877

以下实现可用于解决在`Activity`生命周期中安全地执行状态更改的问题，特别是用于显示对话框：如果实例状态已经保存（例如由于配置更改），它将推迟它们直到恢复状态被执行。

```
public abstract class XAppCompatActivity extends AppCompatActivity {

    private String TAG = this.getClass().getSimpleName();

    /** The retained fragment for this activity */
    private ActivityRetainFragment retainFragment;

    /** If true the instance state has been saved and we are going to die... */
    private boolean instanceStateSaved;

    @Override
    protected void onPostCreate(Bundle savedInstanceState) {
        super.onPostCreate(savedInstanceState);

        // get hold of retain Fragment we'll be using
        retainFragment = ActivityRetainFragment.get(this, "Fragment-" + this.getClass().getName());
    }

    @Override
    protected void onPostResume() {
        super.onPostResume();

        // reset instance saved state
        instanceStateSaved = false;

        // execute all the posted tasks
        for (ActivityTask task : retainFragment.tasks) task.exec(this);
        retainFragment.tasks.clear();
    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        instanceStateSaved = true;
    }

    /**
     * Checks if the activity state has been already saved.
     * After that event we are no longer allowed to commit fragment transactions.
     * @return true if the instance state has been saved
     */
    public boolean isInstanceStateSaved() {
        return instanceStateSaved;
    }

    /**
     * Posts a task to be executed when the activity state has not yet been saved
     * @param task The task to be executed
     * @return true if the task executed immediately, false if it has been queued
     */
    public final boolean post(ActivityTask task)
    {
        // execute it immediately if we have not been saved
        if (!isInstanceStateSaved()) {
            task.exec(this);
            return true;
        }

        // save it for better times
        retainFragment.tasks.add(task);
        return false;
    }

    /** Fragment used to retain activity data among re-instantiations */
    public static class ActivityRetainFragment extends Fragment {

        /**
         * Returns the single instance of this fragment, creating it if necessary
         * @param activity The Activity performing the request
         * @param name The name to be given to the Fragment
         * @return The Fragment
         */
        public static ActivityRetainFragment get(XAppCompatActivity activity, String name) {

            // find the retained fragment on activity restarts
            FragmentManager fm = activity.getSupportFragmentManager();
            ActivityRetainFragment fragment = (ActivityRetainFragment) fm.findFragmentByTag(name);

            // create the fragment and data the first time
            if (fragment == null) {
                // add the fragment
                fragment = new ActivityRetainFragment();
                fm.beginTransaction().add(fragment, name).commit();
            }

            return fragment;
        }

        /** The queued tasks */
        private LinkedList<ActivityTask> tasks = new LinkedList<>();

        @Override
        public void onCreate(Bundle savedInstanceState)
        {
            super.onCreate(savedInstanceState);

            // retain this fragment
            setRetainInstance(true);
        }

    }

    /** A task which needs to be performed by the activity when it is "fully operational" */
    public interface ActivityTask {

        /**
         * Executed this task on the specified activity
         * @param activity The activity
         */
        void exec(XAppCompatActivity activity);
    }
} 
```

然后使用这样的类：

```
/** AppCompatDialogFragment implementing additional compatibility checks */
public abstract class XAppCompatDialogFragment extends AppCompatDialogFragment {

    /**
     * Shows this dialog as soon as possible
     * @param activity The activity to which this dialog belongs to
     * @param tag The dialog fragment tag
     * @return true if the dialog has been shown immediately, false if the activity state has been saved
     *         and it is not possible to show it immediately
     */
    public boolean showRequest(XAppCompatActivity activity, final String tag) {
        return showRequest(activity, tag, null);
    }

    /**
     * Shows this dialog as soon as possible
     * @param activity The activity to which this dialog belongs to
     * @param tag The dialog fragment tag
     * @param args The dialog arguments
     * @return true if the dialog has been shown immediately, false if the activity state has been saved
     *         and it is not possible to show it immediately
     */
    public boolean showRequest(XAppCompatActivity activity, final String tag, final Bundle args)
    {
        return activity.post(new XAppCompatActivity.ActivityTask() {
            @Override
            public void exec(XAppCompatActivity activity) {
                if (args!= null) setArguments(args);
                show(activity.getSupportFragmentManager(), tag);
            }
        });
    }

    /**
     * Dismiss this dialog as soon as possible
     * @return true if the dialog has been dismissed immediately, false if the activity state has been saved
     *         and it is not possible to dismissed it immediately
     */
    public boolean dismissRequest()
    {
        return dismissRequest(null);
    }

    /**
     * Dismiss this dialog as soon as possible
     * @param runnable Actions to be performed before dialog dismissal
     * @return true if the dialog has been dismissed immediately, false if the activity state has been saved
     *         and it is not possible to dismissed it immediately
     */
    public boolean dismissRequest(final Runnable runnable)
    {
        // workaround as in rare cases the activity could be null
        XAppCompatActivity activity = (XAppCompatActivity)getActivity();
        if (activity == null) return false;

        // post the dialog dismissal
        return activity.post(new XAppCompatActivity.ActivityTask() {
            @Override
            public void exec(XAppCompatActivity activity) {
                if (runnable != null) runnable.run();
                dismiss();
            }
        });
    }
} 
```

您可以安全地显示对话框而不必担心应用程序状态：

```
public class TestDialog extends XAppCompatDialogFragment {

    private final static String TEST_DIALOG = "TEST_DIALOG";

    public static void show(XAppCompatActivity activity) {
        new TestDialog().showRequest(activity, TEST_DIALOG);
    }

    public TestDialog() {}

    @NonNull
    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState)
    {
        return new AlertDialog.Builder(getActivity(), R.style.DialogFragmentTheme /* or null as you prefer */)
                .setTitle(R.string.title)
                // set all the other parameters you need, e.g. Message, Icon, etc.
                ).create();
    }
} 
```

然后`TestDialog.show(this)`从您的`XAppCompatActivity`.

如果您想创建一个更通用的带参数对话框类，您可以将它们`Bundle`与方法中的参数一起保存在 a 中，并使用in`show()`检索它们。`getArguments()``onCreateDialog()`

整个方法可能看起来有点复杂，但是一旦为活动和对话框创建了两个基类，它就非常易于使用并且可以完美运行。它可用于`Fragment`可能受相同问题影响的其他基于操作。

# project - Gradle 中的模型项目依赖关系：将依赖项目添加到另一个项目

> ID：15729139
> 
> 赞同：1
> 
> 时间：2013-03-31T11:57:33.027
> 
> 标签：project, gradle, build-dependencies

我面临以下问题。我在同一层次结构上有两个 Gradle 项目（ProjectA 和 ProjectB），没有任何根项目。由于 ProjectA 依赖于 ProjectB，因此我尝试将其建模如下：

ProjectA 的**settings.gradle**：

```
includeFlat 'ProjectB' 
```

ProjectA 的**build.gradle**：

```
dependencies {
    compile project(':ProjectB')
} 
```

但是，在 ProjectA 上执行“gradle build”时出现以下错误：

```
* What went wrong:
A problem occurred evaluating root project 'ProjectA'.
> Could not resolve all dependencies for configuration ':compile'.
> Module version group:, module:ProjectA, version:0.0.1-SNAPSHOT, configuration:compile declares a dependency on configuration 'default' which is not declared in the module descriptor for group:ProjectA, module:ProjectB, version:unspecified 
```

我是否必须在 ProjectB 中定义某种默认配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T12:09:34.503

> Do I have do defined some kind of default configuration in ProjectB?

Either that, or apply the `base` plugin. Many other plugins (`java`, `groovy`, `scala`, etc.) apply the `base` plugin automatically, so that you don't have to.

# jquery-mobile - 骨干网和 jquerymobile 导航问题 - URL 中的散列

> ID：15729141
> 
> 赞同：2
> 
> 时间：2013-03-31T11:58:16.860
> 
> 标签：jquery-mobile, backbone.js, navigation, routes

我正在使用backbone.js 和WebMatrix。我在 url 中有 hash(#) 的问题。更准确地说，我的路由器文件中有以下代码：

```
routes: { 
          ""          : 'myBooks', 
          "books/:id" : 'bookDetails'
} 
```

然后我初始化路由器

```
var initialization = function () {

        Backbone.history.start();
}; 
```

因此，当我在浏览器上单击此 URL：“localhost:9548/#books/1”时，我的控制台（萤火虫）上会出现以下消息“NetworkError: 404 Not Found - //localhost:9548/books/1”。我发现已经有帖子试图解决类似的问题，但我对 IIS Express（一般的服务器配置）一点也不熟悉。因此，例如一些帖子也引用了我的 Web 应用程序的 web.config，但我没有。

因此，例如，如果我将使用以下代码创建一个 web.config 文件

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <system.webServer>
<rewrite>
    <rewriteMaps>
        <rewriteMap name="StaticRewrites">
            <add key="index.html#books/*" value="index.html" />
        </rewriteMap>
    </rewriteMaps>
</rewrite>
</system.webServer>
</configuration> 
```

会解决我的问题吗？

很抱歉，我没有提到我的 web 应用程序的 ui（并且唯一）我使用的是 jquerymobile。因此，我禁用了 jquerymobile 的 ajax 导航：

```
$.mobile.ajaxEnabled = false;
$.mobile.linkBindingEnabled = false;
$.mobile.hashListeningEnabled = false; 
$.mobile.pushStateEnabled = false;
$.mobile.changePage.defaults.changeHash = false; 
```

除了页面的更改由以下代码处理：

```
var utility = {}; 
utility.changePage = function( viewID, effect, direction, updateHash ) {
   viewID.attr('data-role', 'page');
   $.mobile.changePage( viewID,{changeHash: updateHash}); 
}; 
```

最后处理我的路线的功能如下：

```
bookDetail: function (id) { 
   var myBook = myCollection.get(id); 
   var bookDetails = new BookDetails({ model: myBook });
   $('body').append($(bookDetails.render().el));
   $.mobile.changePage(bookDetails.$el, {changeHash: false }); 
} 
```

**重要提示：**由于 jquerymobile (1.3.0) 的最新版本，可能会出现问题。准确地说，禁用 hashListeningEnabled 无法正常工作，因为我已阅读。另一个特点是我在 Mozilla 和 Chrome 上遇到了这个问题，但在 Internet Explorer 上没有遇到这个问题（使用它们的最新版本）。

# jquery-mobile - 如何阻止 jquerymobile 截断标签中的文本？

> ID：15729146
> 
> 赞同：1
> 
> 时间：2013-03-31T11:58:45.737
> 
> 标签：jquery-mobile, truncation

我在 .net MVC4 中运行的 jquerymobile 中有这个页面

```
<div data-role="header" data-theme="b" data-position="fixed">
     <h3 style="color:white;">
            Name
    </h3>
 <a href="#" data_icon="back"> Back </a>

    <div data-role="fieldcontain" class="test_row">
        <fieldset data-role="controlgroup" data-type="horizontal" class="test_row">
            <input id="radio3" name="testType" value="2" type="radio" checked="checked" class="test_type">
            <label for="radio3" class="test_type">All tests</label>
            <input id="radio1" name="testType" value="0" type="radio" class="test_type">
            <label id="test_type_label" for="radio1" class="test_type" >Automated</label>     
            <input id="radio2" name="testType" value="1" type="radio" class="test_type">
            <label for="radio2" class="test_type">Manual</label>
        </fieldset>
    </div>
</div> 
```

CSS

```
.test_row .ui-btn {
    text-align: center;
}
.ui-field-contain .ui-controlgroup-controls {
    width: 100%;
}
.ui-controlgroup-controls .ui-radio {
    width: 33.3%;
} 
```

http://jsfiddle.net/ruds5/jsfiddle

当您调整结果大小时，中间单词（Automated）会被截断为较短的形式，末尾带有“...”。

是否可以防止在单词末尾截断？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T12:16:45.793

根据更新的问题，这是解决方案。文本样式用*使用 class `.ui-btn-inner`，按钮文本样式被覆盖如下。*

 *```
span.ui-btn-inner {
 white-space: nowrap !important;
 overflow: visible !important;
} 
```

[演示 JSfiddle](http://jsfiddle.net/Palestinian/ruds5/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-24T06:59:15.987

Omar 对以前版本的 Jquery mobile 是正确的。但是对于 1.4.1 版本，没有更多跨度，请使用：

```
.ui-btn-inline {
  white-space: nowrap !important;
  overflow: visible !important;
} 
```*

# android - 对视频文件应用声音效果

> ID：15729148
> 
> 赞同：1
> 
> 时间：2013-03-31T11:58:51.597
> 
> 标签：android, ffmpeg, android-audiomanager, xuggler

我有点想念这里的向导，看来我完全迷路了。我正在开发一个 android 应用程序，它的核心思想是开发一个录像机和视频播放器，对人们的声音或它录制的任何声音应用一些声音效果。声音效果意味着如果我制作一个正在发表演讲的人的视频，那么视频应该不会受到影响，但他/她的声音应该看起来像会说话的汤姆猫应用程序中的声音。我希望你能理解这个想法。类似的应用是 Helium Booth 你可以[在这里查看](http://www.youtube.com/watch?v=2nID3zci9qU). 我正在尝试使用 libSonic、libpd 等库，并尝试使用 XUGGLE。在某处读到 Xuggle 并不是真正为移动设备开发的，所以离开了。现在我想要的是它应该在运行时对声音应用这种效果，即在录制声音的音高时应该立即改变并保存。我从这些库中得到的是，我可以在录制视频后应用音效。所以这意味着我需要从视频中提取音频，然后应用音高和频率的变化，并再次将此音频文件与旧视频文件连接起来。我不知道该怎么做。如果可能，请告诉我正确的方法和工具。

问候

# php - simple_html_dom.php

> ID：15729152
> 
> 赞同：0
> 
> 时间：2013-03-31T11:59:23.413
> 
> 标签：php, screen-scraping

我正在使用“ **simple_html_dom.php** ”从维基百科站点中删除数据。如果我在[scraperwiki.com中运行代码，它会抛出](http://scraperwiki.com)**退出状态 139**的错误 ，如果在我的 xampp 服务器中运行相同的代码，则服务器挂起。

1.  我有一组链接
2.  我正在尝试从所有网站获取**识字价值**
3.  如果我用一个链接运行代码没有问题，它会返回预期的结果
4.  如果我尝试一次从所有站点获取数据，我将面临上述问题

代码是：

```
<?php 
  $test=array
  ( 
   0 => "http://en.wikipedia.org/wiki/Andhra_Pradesh",
   1 => "http://en.wikipedia.org/wiki/Arunachal_Pradesh",
   2 => "http://en.wikipedia.org/wiki/Assam",
   3 => "http://en.wikipedia.org/wiki/Bihar",
   4 => "http://en.wikipedia.org/wiki/Chhattisgarh",
   5 => "http://en.wikipedia.org/wiki/Goa",

   for($ix=0;$ix<=9;$ix++){

     $content = file_get_html($test[$ix]);
     $tables = $content ->find('#mw-content-text table',0);
     foreach ($tables ->children() as $child1) {
        foreach($child1->find('th a') as $ele){
        if($ele->innertext=="Literacy"){
                foreach($child1->find('td') as $ele1){
                   echo $ele1->innertext;
   }}}  }} 
```

指导我哪里错了。是不是内存问题？？？有没有xampp配置？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T12:52:47.290

```
<?php 
  require 'simple_html_dom.php';
  $test = array( 
   0 => "http://en.wikipedia.org/wiki/Andhra_Pradesh",
   1 => "http://en.wikipedia.org/wiki/Arunachal_Pradesh",
   2 => "http://en.wikipedia.org/wiki/Assam",
   3 => "http://en.wikipedia.org/wiki/Bihar",
   4 => "http://en.wikipedia.org/wiki/Chhattisgarh",
   5 => "http://en.wikipedia.org/wiki/Goa");

  for($ix=0;$ix<=count($test);$ix++){
    $content = file_get_html($test[$ix]);
    $tables = $content ->find('#mw-content-text table',0);
    foreach ($tables ->children() as $child1) {
      foreach($child1->find('th a') as $ele){
        if($ele->innertext=="Literacy"){
          foreach($child1->find('td') as $ele1){
            echo $ele1->innertext;
          }
        }
      }
    }   
    $content->clear(); 
  }
?> 
```

但是这些网址太多了。您可能会收到一个致命错误，`max execution time execeeded`或者您可能会收到`error 324`.

# facebook - Facebook js api 返回的照片少于在用户图库中显示的照片

> ID：15729153
> 
> 赞同：1
> 
> 时间：2013-03-31T11:59:32.210
> 
> 标签：facebook

我正在从选定的相册中获取图像，但是... facebook 仅返回来自画廊中 46 张照片的 29 张照片。我使用限制为 50 的 Graph API 对其进行测试，并且没有任何变化。退货金额只有29 我不明白为什么？！

# jquery - 传统ajax调用对我的网站的影响

> ID：15729162
> 
> 赞同：2
> 
> 时间：2013-03-31T12:00:42.923
> 
> 标签：jquery, asp.net, websocket, push-notification, long-polling

我正在构建网站，它的主页有两个网格，我想在 1 分钟或更长时间内更新。我使用传统的 ajax 调用在一分钟后更新网格。现在我已经意识到长轮询和 websockets 了。问题是我应该离开旧方式还是改变它来推动技术？如果是，用户的增长是否会影响系统，那么系统将以不行为方式响应的预期频率是多少？任何建议将不胜感激..谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T12:55:13.587

这主要取决于您要在网格中显示的数据类型。对于新闻提要或类似的东西，我会使用 AJAX 调用。但是，对于评论、聊天或实时评论等实时数据，我会使用 websockets。

用户的增长将影响应用程序的性能，具体取决于您的网站可以促进多少用户。一台主机可以同时处理大约1000人，而其他主机只能处理几十人。当太多用户向托管您网站的服务器发送和接收数据时，AJAX 和 websocket 通信都可能会减慢到数据永远不会到达的程度。

另外，请记住，尽管 AJAX 对许多解决方案都非常有用，但 websockets 是为了用户体验而设计的，用户可以在网站上停留很长时间。希望这可以帮助！

# c# - 我可以将图像/位图转换为可写位图吗？

> ID：15729164
> 
> 赞同：2
> 
> 时间：2013-03-31T12:01:01.700
> 
> 标签：c#, windows-runtime, windows-store-apps

我有两个想要合并在一起的位图图像。我发现我可以用 writeablebitmap 做到这一点，但我如何首先将这些图像转换为 writeablebitmaps？

**更新：**我找不到将位图直接转换为可写位图的方法，所以我所做的是将位图写入隔离存储并在流对象中再次读取。之后，Xyroid 下面给出的代码可用于合并图像并将合并的图像转换为位图。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-01T08:50:22.867

在这里，我给你合并两个图像的代码。WinRT 的 WriteableBitmap 不同，它的构造函数以高度和宽度作为参数。我已将[WriteableBitmapEx](http://writeablebitmapex.codeplex.com/)用于某些功能。

XAML

```
<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
    <Grid.ColumnDefinitions>
        <ColumnDefinition />
        <ColumnDefinition />
    </Grid.ColumnDefinitions>
    <Canvas x:Name="BaseCanvas" Width="683" Height="768">
        <Image Source="Assets/img1.png" />
        <Image Source="Assets/img2.png" Canvas.Top="308" />
    </Canvas>
    <Image x:Name="imgTarget" Grid.Column="1" Stretch="None"/>
</Grid> 
```

C＃

```
protected async override void OnNavigatedTo(NavigationEventArgs e)
{
    StorageFile destiFile = await ApplicationData.Current.TemporaryFolder.CreateFileAsync("Merged.png", CreationCollisionOption.ReplaceExisting);

    WriteableBitmap wb;

    wb = await Render();

    using (IRandomAccessStream stream = await destiFile.OpenAsync(FileAccessMode.ReadWrite))
    {
        BitmapEncoder encoder = await BitmapEncoder.CreateAsync(
            BitmapEncoder.PngEncoderId, stream);
        Stream pixelStream = wb.PixelBuffer.AsStream();
        byte[] pixels = new byte[pixelStream.Length];
        await pixelStream.ReadAsync(pixels, 0, pixels.Length);

        encoder.SetPixelData(BitmapPixelFormat.Bgra8, BitmapAlphaMode.Ignore,
            (uint)wb.PixelWidth, (uint)wb.PixelHeight, 96.0, 96.0, pixels);
        await encoder.FlushAsync();
    }

    var bitmp = new BitmapImage();
    using (var strm = await destiFile.OpenReadAsync())
    {
        bitmp.SetSource(strm);
        imgTarget.Source = bitmp;
    }
}

private async Task<WriteableBitmap> Render()
{
    var Assets = await Windows.ApplicationModel.Package.Current.InstalledLocation.GetFolderAsync("Assets");

    StorageFile file1 = await Assets.GetFileAsync("img1.png");
    StorageFile file2 = await Assets.GetFileAsync("img2.png");

    BitmapImage i1 = new BitmapImage();
    BitmapImage i2 = new BitmapImage();

    using (IRandomAccessStream strm = await file1.OpenReadAsync())
    {
        i1.SetSource(strm);
    }

    using (IRandomAccessStream strm = await file2.OpenReadAsync())
    {
        i2.SetSource(strm);
    }

    WriteableBitmap img1 = new WriteableBitmap(i1.PixelWidth, i1.PixelHeight);
    WriteableBitmap img2 = new WriteableBitmap(i2.PixelWidth, i2.PixelHeight);
    using (IRandomAccessStream strm = await file1.OpenReadAsync())
    {
        img1.SetSource(strm);
    }

    using (IRandomAccessStream strm = await file2.OpenReadAsync())
    {
        img2.SetSource(strm);
    }

    WriteableBitmap destination = new WriteableBitmap((int)(img1.PixelWidth > img2.PixelWidth ? img1.PixelWidth : img2.PixelWidth), (int)(img1.PixelHeight + img1.PixelHeight));
    destination.Clear(Colors.White);
    destination.Blit(new Rect(0, 0, (int)img1.PixelWidth, (int)img1.PixelHeight),img1,new Rect(0, 0, (int)img1.PixelWidth, (int)img1.PixelHeight));
    destination.Blit(new Rect(0, (int)img1.PixelHeight, (int)img2.PixelWidth, (int)img2.PixelHeight), img2, new Rect(0, 0, (int)img2.PixelWidth, (int)img2.PixelHeight));
    return destination;
} 
```

请注意，您必须添加`System.Runtime.InteropServices.WindowsRuntime`命名空间。

**更新 1**

假设如果你已经有两个`BitmapImage` `img1`and `img2`，那么就这样做

```
protected async override void OnNavigatedTo(NavigationEventArgs e)
{
    StorageFile destiFile = await ApplicationData.Current.TemporaryFolder.CreateFileAsync("Merged.png", CreationCollisionOption.ReplaceExisting);

    WriteableBitmap wb;

    wb = await Render();

    using (IRandomAccessStream stream = await destiFile.OpenAsync(FileAccessMode.ReadWrite))
    {
        BitmapEncoder encoder = await BitmapEncoder.CreateAsync(
            BitmapEncoder.PngEncoderId, stream);
        Stream pixelStream = wb.PixelBuffer.AsStream();
        byte[] pixels = new byte[pixelStream.Length];
        await pixelStream.ReadAsync(pixels, 0, pixels.Length);

        encoder.SetPixelData(BitmapPixelFormat.Bgra8, BitmapAlphaMode.Ignore,
            (uint)wb.PixelWidth, (uint)wb.PixelHeight, 96.0, 96.0, pixels);
        await encoder.FlushAsync();
    }

    var bitmp = new BitmapImage();
    using (var strm = await destiFile.OpenReadAsync())
    {
        bitmp.SetSource(strm);
        imgTarget.Source = bitmp;
    }
}

private async Task<WriteableBitmap> Render()
{  
    WriteableBitmap destination = new WriteableBitmap((int)(img1.PixelWidth > img2.PixelWidth ? img1.PixelWidth : img2.PixelWidth), (int)(img1.PixelHeight + img1.PixelHeight));
    destination.Clear(Colors.White);
    destination.Blit(new Rect(0, 0, (int)img1.PixelWidth, (int)img1.PixelHeight),img1,new Rect(0, 0, (int)img1.PixelWidth, (int)img1.PixelHeight));
    destination.Blit(new Rect(0, (int)img1.PixelHeight, (int)img2.PixelWidth, (int)img2.PixelHeight), img2, new Rect(0, 0, (int)img2.PixelWidth, (int)img2.PixelHeight));
    return destination;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T14:21:35.897

我在 Silverlight 上做了很多工作，我相信商店应用程序在很多方面都相似。

考虑这个构造函数：

```
WriteableBitmap(BitmapSource)
- Initializes a new instance of the WriteableBitmap class using the
  provided BitmapSource. 
```

下一个问题是，如何从图像中获取“BitmapSource”？你可以这样做：

```
(BitmapSource)MyImage.Source 
```

虽然这假设源（类型为“ImageSource”）实际上是一个“BitmapSource”实例。也就是说，从 Silverlight 5.0 开始，Silverlight 中唯一从 ImageSource 派生的类是 BitmapSource，所以我怀疑这会是一个问题。

所以这样的事情可能会奏效：

```
WriteableBitmap((BitmapSource)MyImage.Source) 
```

最后，这里有一个开源项目可能会有所帮助：[http ://writeablebitmapex.codeplex.com/](http://writeablebitmapex.codeplex.com/)

# shell - 像访问数组一样获取字符串的一部分？

> ID：15729166
> 
> 赞同：0
> 
> 时间：2013-03-31T12:01:30.303
> 
> 标签：shell

在贝壳中，

```
s="abc\tdef\tghi"   # 3 words separated by \t 
```

如果我想得到第二个单词`def`怎么办？

附言

我知道`cut`可以完成这项工作，但是还有什么方法可以像变量替换一样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T12:03:06.583

怎么样`cut`？

```
[cnicutar@ariel ~]$ echo -e $s | cut -f2
def 
```

或者也许`awk`：

```
echo -e $s | awk '{print $2}' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T13:29:44.197

也许你正在寻找这个。

```
s="abc\tdef\tghi"
s=${s#*\t}
s=${s%\\t*}
echo $s 
```

# php - 带有 PHP 和 cURL 的 Paypal API

> ID：15729167
> 
> 赞同：30
> 
> 时间：2013-03-31T12:01:33.437
> 
> 标签：php, curl, paypal

我正在尝试 Paypal API 文档中概述的“第一次通话”。这是我正在关注的示例：

```
curl https://api.sandbox.paypal.com/v1/oauth2/token \
 -H "Accept: application/json" \
 -H "Accept-Language: en_US" \
 -u "EOJ2S-Z6OoN_le_KS1d75wsZ6y0SFdVsY9183IvxFyZp:EClusMEUk8e9ihI7ZdVLF5cZ6y0SFdVsY9183IvxFyZp" \
 -d "grant_type=client_credentials" 
```

我在 PHP 中构建了一个 curl 实例，其中包含除最后一个之外的所有上述标头。`-d`标志转换为 PHP 中的 curl 选项是什么？据我所知，那里几乎没有解释。我设法推断`-u`为`CURLOPT_USERPWD`。

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2013-03-31T12:35:50.740

有一个很好的拖网，我将开发人员的部分与其他问题拼凑在一起。我使用以下代码成功获得了访问令牌：

```
<?php

$ch = curl_init();
$clientId = "myId";
$secret = "mySecret";

curl_setopt($ch, CURLOPT_URL, "https://api.sandbox.paypal.com/v1/oauth2/token");
curl_setopt($ch, CURLOPT_HEADER, false);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); 
curl_setopt($ch, CURLOPT_USERPWD, $clientId.":".$secret);
curl_setopt($ch, CURLOPT_POSTFIELDS, "grant_type=client_credentials");

$result = curl_exec($ch);

if(empty($result))die("Error: No response.");
else
{
    $json = json_decode($result);
    print_r($json->access_token);
}

curl_close($ch);

?> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-12-12T23:15:07.380

@Lee 指出了正确的方法，但是如果您使用的是旧的 php 版本，它将无法正常工作。但李版不会显示错误。改用这些，我只添加错误部分来查看发生了什么。

```
$ch = curl_init();
$clientId = "";
$secret = "";

curl_setopt($ch, CURLOPT_URL, "https://api.sandbox.paypal.com/v1/oauth2/token");
curl_setopt($ch, CURLOPT_HEADER, false);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); 
curl_setopt($ch, CURLOPT_USERPWD, $clientId.":".$secret);
curl_setopt($ch, CURLOPT_POSTFIELDS, "grant_type=client_credentials");

$result = curl_exec($ch);
$err = curl_error($ch);

$access_token="";
if ($err) {
  echo "cURL Error #:" . $err;
}
else
{
    $json = json_decode($result);
   // print_r($json->access_token);
    $access_token = $json->access_token;
} 
```

如果您使用的是旧的 PHP 版本，则它可能无法正常工作，并且会显示此错误：

```
cURL Error #:error:14077410:SSL routines:SSL23_GET_SERVER_HELLO:sslv3 alert handshake failure 
```

只是堆栈溢出它！ [他们在这里讨论问题](https://stackoverflow.com/questions/34926940/php-paypal-error-14077410ssl-routinesssl23-get-server-hellosslv3-alert-hands)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-10-25T14:11:02.963

**JSON**和**美国英语**似乎是*Defaults*，但要完全符合，请添加以下行：

```
curl_setopt($ch, CURLOPT_HTTPHEADER, "Accept: application/json, Accept-Language: en_US"); 
```

# ruby - 使用 Nokogiri::HTML 和 Ruby 进行网页抓取 - 保存图像

> ID：15729169
> 
> 赞同：1
> 
> 时间：2013-03-31T12:01:53.533
> 
> 标签：ruby, image, nokogiri, scrape

我正在编写一个脚本以从网上商店产品页面中获取数据和图像（经所有者批准）

我有一个工作脚本，它循环遍历具有 20042 个产品 URLS 的 CSV 文件，以获取存储在 CSV 文件中的所需数据。我需要做的最后一件事是保存产品图片。

我有这个代码（感谢这个[线程](https://stackoverflow.com/questions/7926675/save-all-image-files-from-a-website))中的 Phrogz ）

```
 URL = 'http://www.sample.com/page.html'

    require 'rubygems'
    require 'nokogiri'
    require 'open-uri'
    require 'uri'

    def make_absolute( href, root )
      URI.parse(root).merge(URI.parse(href)).to_s
    end

    Nokogiri::HTML(open(URL)).xpath('//*[@id="zoom"]/@href').each do |src|
      uri = make_absolute(src,URL)
      File.open(File.basename(uri),'wb'){ |f| f.write(open(uri).read) }
    end 
```

这对于单独的 URL 来说运行得很好，但我正在努力让它工作并在我的主脚本中的 CSV 文件中循环访问 URL，如下所示：

```
 # encoding: utf-8
    require 'nokogiri'
    require 'open-uri'
    require 'csv'
    require 'mechanize'

    @prices = Array.new
    @title = Array.new
    @description = Array.new
    @warranty = Array.new
    @leadtime = Array.new
    @urls = Array.new 
    @categories = Array.new
    @subcategories = Array.new
    @subsubcategories = Array.new

    urls = CSV.read("lotofurls.csv")
    (0..urls.length - 1).each do |index|

      puts urls[index][0]
        doc = Nokogiri::HTML(open(urls[index][0])) 
```

看起来我需要弄清楚的是如何将网址提供给保存图像的代码，但任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-12T14:38:52.850

您可以使用 RMagick（或 ImageMagick、MiniMagick 等）之类的工具快速完成此工作

对于 RMagick，你可以做这样的事情

```
require 'rmagick'

images.each do |image|
  url = image.url # should be a string
  Magick::Image.read(url).first.resize_to_fill(200,200).write(image.desired_filename)
end 
```

这将为您提供的每个 url 写一个 200x200px 的图像（resize_to_fill 显然是可选的）。该库非常强大，有很多很多选项。如果你走这条路，我会推荐关于图像处理的 railscast：[http ://railscasts.com/episodes/374-image-manipulation](http://railscasts.com/episodes/374-image-manipulation)

如果您想获得更高级的文档，请查看文档：[http ://rmagick.rubyforge.org/](http://rmagick.rubyforge.org/)

# c++ - 使用 execl() 执行连续进程

> ID：15729172
> 
> 赞同：1
> 
> 时间：2013-03-31T12:02:17.483
> 
> 标签：c++, unix, process

我有一个希望是一个简单的问题。我想连续执行三个名为“brute_seq”、“brute_pth”和“brute_omp”的程序；基本上执行“brute_seq”，等到它完成，然后执行“brute_pth”，对“brute_omp”执行同样的操作。

我已经尝试了几种不同的方法，到目前为止，我想出的最好的解决方案就是这个，虽然这不是我所需要的。

```
#include <unistd.h>
int main()
{
    if(fork() == 0)
        execl("brute_seq", (const char*)NULL, (char*)NULL);

    if(fork() == 0)
        execl("brute_pth", (const char*)NULL, (char*)NULL);

    if(fork() == 0)
        execl("brute_omp", (const char*)NULL, (char*)NULL);
    return 0;
} 
```

据我了解，分叉的进程将运行 execl() 命令，该命令又将用被调用的进程替换分叉的进程——这确保了我的分叉进程在被调用的进程结束时终止。

我对这个实现有两个问题：

1.  这些进程不是按顺序执行的，而是并行执行的，这是我不想要的。
2.  一旦它们都执行完毕，我的终端会以类似的方式阻塞，就像遇到由于同步不佳而导致死锁时它会阻塞一样，除了更糟糕的是，因为我无法 CTRL-Z 退出它；我必须从终端退出并再次打开它。

有任何想法吗？

* * *

感谢 Joachim 的有用提示，这里的工作代码正是我想要的：

```
#include <sys/wait.h>
#include <unistd.h>
int main()
{
    pid_t child_pid;
    int status;

    if((child_pid = fork()) == 0)
        execl("brute_seq", (const char*)NULL, (char*)NULL);
    else
    {
        waitpid(child_pid, &status, 0);
        if((child_pid = fork()) == 0)
        {
            execl("brute_pth", (const char*)NULL, (char*)NULL);
        }
        waitpid(child_pid, &status, 0);
        execl("brute_omp", (const char*)NULL, (char*)NULL);
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T12:09:44.517

你必须[`wait`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/wait.html)完成这些过程。它还具有在完成后清理您的子僵尸进程的副作用。

# xamarin-studio - xamarin.mac 你好世界出口空参考

> ID：15729177
> 
> 赞同：1
> 
> 时间：2013-03-31T12:02:50.550
> 
> 标签：xamarin-studio

我下载了示例 xamarin.mac hello world 项目，当我尝试运行时，它运行时在插座上出现空引用异常。我看到插座在 MainWindow.designer.cs 部分类中设置了属性，但是当它尝试在 MainWindowController.cs 中引用它们时，会引发空引用异常。

当属性定义在 MainWindow.cs 部分类中而不是在控制器类中时，示例项目如何工作。示例项目是否应该开箱即用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-03T23:28:41.807

我不熟悉 hello world 示例，但我一直在本机 Mac/Xcode 领域遇到这个问题，我只是在 Xamarin Studio 中再次遇到了这个问题。我的问题恰好是这样的：我有一个充满 NSTextFields 的 GUI。我依次将每个连接到 MainWindowController.h 中的一个新插座，但是我不小心将列表中的第二个 NSTextField 重新连接到了我之前为第一个 TextField 定义的插座。这会自动断开前一个链接，即使出口仍然在 .h 中定义，但 .xib 中的连接已断开，因此第一个出口永远不会使用 xib 的 NSTextField 实例进行初始化。

解决方案基本上是在界面构建器中右键单击有问题的 GUI 元素，并确保其引用插座实际上已连接到您在 .h 中期望的插座。

# java - java RMI - 多个主机注册一个具有相同名称的对象

> ID：15729179
> 
> 赞同：0
> 
> 时间：2013-03-31T12:03:06.640
> 
> 标签：java, linux, eclipse, networking, rmi

我可以注册来自不同机器的同名对象吗？例如：假设我们有一个实现 Remote 接口的类 X。然后我们有一个类 Server，它接受一个新的 X 对象并在 rmiregistry 上以名称“Name”注册该对象。然后我们有另一台机器具有相同的类并做同样的事情。我们可以有不止一台机器作为服务器运行。在此配置中，所有机器都从不同的 IP 注册其对象 X，但所有对象都以相同的名称注册。这可能吗？如果一个客户端使用不同的 ip 和相同的对象名称调用查找是否有任何问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T12:11:17.433

只要服务器有各自独立的 RMI 注册中心，它们就可以使用相同的名称进行绑定。如果它们共享相同的 RMI 注册表，则无法绑定具有相同名称的对象

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T23:33:55.653

你描述的情况或多或少是不可能的。实际上，每个服务器都必须有自己的 RMI 注册表，这样就不会出现歧义。如果您能找到一种方法来在同一个注册表中注册来自不同服务器的对象（并且有一种方法，但很少有人知道或使用），显然它们都必须使用不同的绑定名称。

# java - Google Maps Android API v2 每次都崩溃

> ID：15729180
> 
> 赞同：1
> 
> 时间：2013-03-31T12:03:11.803
> 
> 标签：java, android, google-api

在我的设备上运行时它总是崩溃，我尝试了很多东西，但唉，我是 android The Place 部分的初学者，它只会显示你在地图上的位置，而且你的坐标似乎根本不适合我。

这是我的清单代码

按照建议编辑代码后仍然无法正常工作，这是日志猫

**原木猫**

```
04-02 03:45:19.025: W/dalvikvm(1102): threadid=1: thread exiting with uncaught exception     (group=0x40a71930)
04-02 03:45:19.104: E/AndroidRuntime(1102): FATAL EXCEPTION: main
04-02 03:45:19.104: E/AndroidRuntime(1102): java.lang.RuntimeException: Unable to start  activityComponentInfo{com.hangoverhelper/com.hangoverhelper.Place}: java.lang.NullPointerException
04-02 03:45:19.104: E/AndroidRuntime(1102):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
04-02 03:45:19.104: E/AndroidRuntime(1102):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
04-02 03:45:19.104: E/AndroidRuntime(1102):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-02 03:45:19.104: E/AndroidRuntime(1102):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-02 03:45:19.104: E/AndroidRuntime(1102):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-02 03:45:19.104: E/AndroidRuntime(1102):     at android.os.Looper.loop(Looper.java:137)
04-02 03:45:19.104: E/AndroidRuntime(1102):     at android.app.ActivityThread.main(ActivityThread.java:5041)
04-02 03:45:19.104: E/AndroidRuntime(1102):     at java.lang.reflect.Method.invokeNative(Native Method)
04-02 03:45:19.104: E/AndroidRuntime(1102):     at java.lang.reflect.Method.invoke(Method.java:511)
04-02 03:45:19.104: E/AndroidRuntime(1102):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-02 03:45:19.104: E/AndroidRuntime(1102):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-02 03:45:19.104: E/AndroidRuntime(1102):     at dalvik.system.NativeStart.main(Native Method)
04-02 03:45:19.104: E/AndroidRuntime(1102):     Caused by: java.lang.NullPointerException
04-02 03:45:19.104: E/AndroidRuntime(1102):     at com.hangoverhelper.Place.onCreate(Place.java:42)
04-02 03:45:19.104: E/AndroidRuntime(1102):     at android.app.Activity.performCreate(Activity.java:5104)
04-02 03:45:19.104: E/AndroidRuntime(1102):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
04-02 03:45:19.104: E/AndroidRuntime(1102):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
04-02 03:45:19.104: E/AndroidRuntime(1102):     ... 11 more 
```

**Place.java**

```
package com.hangoverhelper;
import com.hangoverhelper.R;
import com.google.android.gms.common.ConnectionResult;
import com.google.android.gms.common.GooglePlayServicesUtil;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.LocationSource;
import com.google.android.gms.maps.MapFragment;

import android.location.Criteria;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.app.Activity;
import android.app.AlertDialog;
import android.app.FragmentManager;
import android.view.Menu;
import android.view.MenuItem;
import android.widget.TextView;
import android.widget.Toast;

public class Place extends Activity 
        implements LocationSource, LocationListener{

    final int RQS_GooglePlayServices = 1;
    private GoogleMap myMap;
    TextView tvLocInfo;

    LocationManager myLocationManager = null;
    OnLocationChangedListener myLocationListener = null;
    Criteria myCriteria;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_place);
        tvLocInfo = (TextView)findViewById(R.id.locinfo);

        FragmentManager myFragmentManager = getFragmentManager();
        MapFragment myMapFragment 
            = (MapFragment)myFragmentManager.findFragmentById(R.id.map);
        myMap = myMapFragment.getMap();

        myMap.setMyLocationEnabled(true);

        myMap.setMapType(GoogleMap.MAP_TYPE_HYBRID);

        myCriteria = new Criteria();
        myCriteria.setAccuracy(Criteria.ACCURACY_FINE);
        myLocationManager = (LocationManager)getSystemService(LOCATION_SERVICE);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.place, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        int itemId = item.getItemId();
        if (itemId == R.id.menu_legalnotices) {
            String LicenseInfo = GooglePlayServicesUtil.getOpenSourceSoftwareLicenseInfo(
                    getApplicationContext());
            AlertDialog.Builder LicenseDialog = new AlertDialog.Builder(Place.this);
            LicenseDialog.setTitle("Legal Notices");
            LicenseDialog.setMessage(LicenseInfo);
            LicenseDialog.show();
            return true;
        }
        return super.onOptionsItemSelected(item);   
    }

    @Override
    protected void onResume() {
        super.onResume();

        int resultCode = GooglePlayServicesUtil.isGooglePlayServicesAvailable(getApplicationContext());

        if (resultCode == ConnectionResult.SUCCESS){
            Toast.makeText(getApplicationContext(), 
                    "isGooglePlayServicesAvailable SUCCESS", 
                    Toast.LENGTH_LONG).show();

            //Register for location updates using a Criteria, and a callback on the specified looper thread.
            myLocationManager.requestLocationUpdates(
                    0L,             //minTime
                    0.0f,           //minDistance
                    myCriteria,     //criteria
                    this,           //listener
                    null);          //looper

            //Replaces the location source of the my-location layer.
            myMap.setLocationSource(this);

        }else{
            GooglePlayServicesUtil.getErrorDialog(resultCode, this, RQS_GooglePlayServices);    
        }

    }

    @Override
    protected void onPause() {
        myMap.setLocationSource(null);
        myLocationManager.removeUpdates(this);

        super.onPause();
    }

    @Override
    public void activate(OnLocationChangedListener listener) {
        myLocationListener = listener;
    }

    @Override
    public void deactivate() {
        myLocationListener = null;
    }

    @Override
    public void onLocationChanged(Location location) {
        if (myLocationListener != null) {
            myLocationListener.onLocationChanged(location);

            double lat = location.getLatitude();
            double lon = location.getLongitude();

            tvLocInfo.setText(
                    "lat: " + lat + "\n" +
                    "lon: " + lon);
        }
    }

    @Override
    public void onProviderDisabled(String arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onProviderEnabled(String arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onStatusChanged(String arg0, int arg1, Bundle arg2) {
        // TODO Auto-generated method stub

    }

} 
```

# *AndroidManifest.xml*

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.hangoverhelper"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="11"
        android:targetSdkVersion="17" />

    <permission 
        android:name="com.hangoverhelper.permission.MAPS_RECEIVE" 
        android:protectionLevel="signature"></permission>
    <uses-permission 
        android:name="com.hangoverhelper.permission.MAPS_RECEIVE"/>
    <uses-permission 
        android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
    <uses-permission 
        android:name="android.permission.INTERNET"/>
    <uses-permission 
        android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission 
        android:name="android.permission.ACCESS_COARSE_LOCATION"/>
    <uses-permission 
        android:name="android.permission.ACCESS_FINE_LOCATION"/>

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:logo="@drawable/ic_launcher"
        android:theme="@style/AppTheme" >

        <activity
            android:name="com.hangoverhelper.SplashActivity"
            android:label="@string/title_activity_splash"
            android:theme="@style/Theme.Splash" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.hangoverhelper.MainActivity"
            android:label="@string/app_name"
            android:theme="@style/AppTheme" >
        </activity>
        <activity
            android:name="com.hangoverhelper.Place"
            android:configChanges="orientation|keyboardHidden|screenSize"
            android:label="@string/local_title"
            android:theme="@style/AppTheme" >
        </activity>
        <activity
            android:name="com.hangoverhelper.Pill"
            android:label="@string/pills_title" >
        </activity>
        <activity
            android:name="com.hangoverhelper.Food"
            android:label="@string/food_title" >
        </activity>
        <activity
            android:name="com.hangoverhelper.Coffee"
            android:label="@string/coffee_title" >
        </activity>
        <activity
            android:name="com.hangoverhelper.Home"
            android:label="@string/home_title" >
        </activity>
      <meta-data
    android:name="com.google.android.maps.v2.API_KEY"
    android:value="AIzaSyBkFR4cjuUf2rw8MfLBrWS8iaS2-Th5XA4"/>
    </application>

</manifest> 
```

# *activity_place.xml*

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    tools:context=".Place" >

    <fragment
        android:id="@+id/map"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        class="com.google.android.gms.maps.MapFragment"
        tools:layout="@layout/custom_info_contents" />

    <LinearLayout 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:background="#A0FFFFFF" >
        <TextView
            android:id="@+id/locinfo"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"/>
        <ImageView 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/local" />

    </LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T12:11:46.747

您的代码中有一些问题：

**1.**删​​除这一行：

```
<uses-library android:name="com.google.android.maps" /> 
```

从清单文件中，它适用于 Google Map API V1。

**2.**将此代码和平放在应用程序标签的底部：

```
<meta-data
android:name="com.google.android.maps.v2.API_KEY"
android:value="My API CODE"/> 
```

使用您为 Google Map for Android API V2 生成的密钥。

**3.**这些权限中的包名：

```
 <permission 
    android:name="com.example.androidmapsv2.permission.MAPS_RECEIVE" 
    android:protectionLevel="signature"></permission>
<uses-permission 
    android:name="com.example.androidmapsv2.permission.MAPS_RECEIVE"/> 
```

与为您的应用程序指定的包名称不匹配（应该）：

```
package="com.hangoverhelper" 
```

# java - 使用 Maven 构建 OSGi 应用程序

> ID：15729182
> 
> 赞同：10
> 
> 时间：2013-03-31T12:03:17.350
> 
> 标签：java, maven, osgi, maven-bundle-plugin

我想构建一个兼容 OSGi 的多模块应用程序，编译后我在 3 个文件夹中拥有所有必需的包。我正在使用**maven-bundle-plugin**和**maven-scr-plugin**创建捆绑包。

我想要的是用一个命令在 osgi 容器（Equinox）中运行这个应用程序，希望使用脚本。为此，我相信我必须创建一个**config.ini**文件，列出应用程序中的所有捆绑包。

有没有办法在 Maven 编译时生成它？或者有没有更好的方法来获取某个文件夹结构中的所有包，以便应用程序可以立即运行？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-02T06:12:48.657

您可以在 OSGi Maven 项目中将 maven-pax-plugin 与[PaxRunner一起使用。](https://ops4j1.jira.com/wiki/display/paxrunner/Pax+Runner)查看本[教程](http://blog.knowhowlab.org/2010/06/osgi-tutorial-from-project-structure-to.html)了解详细信息。

```
<plugin>  
 <!-- Pax Runner Maven plugin -->  
 <groupId>org.ops4j</groupId>  
 <artifactId>maven-pax-plugin</artifactId>  
 <version>1.4</version>  
 <configuration>  
       <!-- Pax Runner version -->  
       <runner>1.4.0</runner>  
       <!-- OSGi framework type (equinox, felix, knopflerfish) -->  
       <framework>equinox</framework>  
       <provision>  
             <param>--log=debug</param>  
             <param>--workingDirectory=target/runner</param>  
             <!-- bundles that should be installed -->  
             <param>mvn:org.osgi/org.osgi.compendium/4.1.0@2</param>  
             <param>mvn:org.apache.felix/org.apache.felix.eventadmin/1.2.2@3</param>  
             <param>mvn:org.apache.felix/org.apache.felix.log/1.0.0@3</param>  
       </provision>  
 </configuration>  
</plugin> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-01T19:13:16.353

我编写了一个 maven 插件，默认情况下会在 target 下创建一个 dist 文件夹，其中包含一个带有所有 maven 依赖项的即用型 Equinox。Equinox 使用 YAJSW 进行包装，因此您可以将生成的 Equinox 包用作测试服务器。请查看插件使用页面：[http ://www.everit.org/eosgi-maven-plugin/](http://www.everit.org/eosgi-maven-plugin/)

文档有点差，所以如果您有任何问题，请随时提问。

一个简短的分步指南：

*   查看[https://github.com/everit-org/osgi-samples-simple](https://github.com/everit-org/osgi-samples-simple)（用户：guest，pass：guest）
*   运行“mvn 安装”。这将在模块tests/core 的target/eosgi-itests-dist/equinox 处生成一个测试Equinox 环境。
*   如果您想拥有一个没有测试模块的简单 Equinox 服务器，您可以在测试/核心模块上运行命令“mvn eosgi:dist”。

**编辑**：

一本新的食谱将很快推出，其中包含更详细的分步指南。网址是[http://cookbook.everit.org](http://cookbook.everit.org)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-02T07:22:12.607

看看 Tycho 及其不同的封装类型（例如 eclipse-application）。

[http://www.eclipse.org/tycho/](http://www.eclipse.org/tycho/)

[http://wiki.eclipse.org/Tycho/Packaging_Types](http://wiki.eclipse.org/Tycho/Packaging_Types)

它用于许多商业和开源应用程序。

# actionscript-3 - Error 1120 For stage instances

> ID：15729187
> 
> 赞同：0
> 
> 时间：2013-03-31T12:04:30.043
> 
> 标签：actionscript-3, flash

I am getting a number of errors for each of my items, each on different keyframes.

I have "Automatically Declare Stage Instances" turned off so I thought that might be having something to do with it. It is quite annoying. The errors only show up when I test the MainMenu scene, testing the movie has the buttons not animating.

I have tried to fit all the info into some screen shots.

I would appreciate any help you could render. At this point I'm out of ideas.

Errors and Instance Properties ![Errors and Instance Properties](https://i.stack.imgur.com/Jqk1N.png)

Symbol Properties of Menu and Script Class ![Symbol Properties of Menu and Script Class](https://i.stack.imgur.com/O55xv.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T16:12:40.817

要么：您定位的按钮不正确..您的错误内容为：访问未定义的属性 button_main_quit //检查拼写“button_main_quit”此外，您应该使用调试模式，它会告诉您错误在哪里

另一个：在实例已经分配之后，按钮在不同的框架上声明。

一个例子：

假设您有两个时间线，顶部名为操作，第二个名为内容：在顶部操作时间线框架 1 中，您添加了一个事件 Enter-Frame 函数，例如：然后为按钮添加一个侦听器，称为“btn_1”。现在在内容层上，添加按钮，但在内容层的第 5 帧：

现在您将遇到错误，因为舞台上的按钮没有准备好分配给我们在第一帧的 enter-Frame 函数中添加的侦听器。希望你明白这一点。

# c++ - Initialize a dynamic vector list

> ID：15729188
> 
> 赞同：1
> 
> 时间：2013-03-31T12:04:38.753
> 
> 标签：c++, dynamic, vector

I am trying to initialize my MedList but it's not working. Here's what I'm talking about: repository.h

```
#include "../domain/farmacy.h"
#include "../utils/DynamicVector.h"
class Repository{

private:
    DynamicVector<Medicine>* MedList; //I made it pointer so it can be dynamic

public:
Repository(); //constructor 
```

repository.cpp

```
#include "../domain/farmacy.h"
#include "repository.h"
#include "../utils/DynamicVector.h"
#include <stdlib.h>

Repository::Repository(){
    this->MedList=new DynamicVector<Medicine>::DynamicVector(); //error
} 
```

DynamicVector.h

```
template <typename Element> //this is the Dynamic Vector constructor
DynamicVector<Element>::DynamicVector()
{
    this->cap=10;
    this->len=0;
    this->elems=new Element[this->cap];
} 
```

the error above is:

```
Multiple markers at this line
    - no match for 'operator=' in '((Repository*)this)->Repository::MedList = (int*)operator 
     new(4u)'
    - expected type-specifier
    - candidate is:
    - expected ';' 
```

this is the medicine class

```
class Medicine{

private:
    int ID;
    std::string nume;
    double concentratie;
    int cantitate; 
```

The Dynamic Vector class:

```
template <typename Element>
class DynamicVector{

private:
    Element* elems;
    int cap;
    int len;
    void resize();
    void CopyToThis(const DynamicVector& v);

public:
    DynamicVector(); //constructor implicit
    DynamicVector(const DynamicVector& ); //constructor de copiere
    DynamicVector& operator=(const DynamicVector& );
    ~DynamicVector();
    void addElement(Element elem);
    Element delElementAtPosition(int pos);
    Element getElementAtPosition(int pos);
    int getLen();

}; 
```

What am I doing wrong? I tried a lot of variants but nothing seems to work. Could you help me?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T12:18:04.317

我认为您将用于创建对象的 c++ 语法与其他语言（例如 Java 或 C#）混淆了。

在 C++ 中，只需声明变量即可调用构造函数：

```
DynamicVector<Element> medList; // Calls DynamicVector<Element>::DynamicVector() 
```

C#中的`new`操作符，是为变量动态分配空间，并返回一个*指向分配空间*的指针。要在此处使用它，您必须将 Repository::MedList 声明为指针类型，并像这样初始化它：

```
DynamicVector<Medicine>* MedList; // in repository.h

this->MedList = new DynamicVector<Medicine>(); // in repository.cpp 
```

但是，正如 Andy Prowl 所指出的，让编译器为您进行内存管理要好得多。为此，您应该完全删除`repository.cpp`. 为什么？好吧，当构建存储库时，编译器也会尝试使用它们的默认构造函数来构造所有成员对象。这正是您想要的，因此没有理由尝试改变编译器的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T12:15:07.067

构造函数应该是：

```
Repository::Repository(){
    this->MedList=new DynamicVector<Medicine>;
} 
```

DynamicVector() 调用 DynamicVector 的构造函数。

DynamicVector::DynamicVector() 是指向构造函数**地址的指针**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T12:20:11.517

您的 C++ 版本可能不允许构造函数为空 ()。

```
this->MedList=new DynamicVector<Medicine>::DynamicVector(); //error 
```

应该

```
this->MedList=new DynamicVector<Medicine>::DynamicVector; 
```

或（通常的写法）

```
this->MedList=new DynamicVector<Medicine>; 
```

请参阅此处了解更多信息。

**编辑。确保您已在类中声明了 dynamicVector 构造函数。**

* * *

[带空括号的默认构造函数](https://stackoverflow.com/questions/180172/default-constructor-with-empty-brackets)

[类型名称后的括号是否与 new 不同？](https://stackoverflow.com/questions/620137/do-the-parentheses-after-the-type-name-make-a-difference-with-new)

# java - Regarding uploading files through Java Rest Template

> ID：15729190
> 
> 赞同：3
> 
> 时间：2013-03-31T12:05:05.863
> 
> 标签：java, box-api, resttemplate

I am doing an Application with Spring Rest Template for making the Box.net Rest Calls. But I am facing the Problem of Not Uploading the Files through Rest-template. It is giving an Error as "Bad Request 400 Http Status Code".

Here is my sample Code:

```
public static Object uploadfile(){ 

    String url="https://upload.box.com/api/2.0/files/content"; 
    String file_url="SOME URL or Local File System Path"; 

    File tmpFile = new File(file_url); 
    boxMap.add("filename",tmpFile); 
    boxMap.add("parent_id",747312798); 

    ResponseEntity<Object> response = restTemplate.exchange(url, 
    HttpMethod.POST, 
    new HttpEntity(boxMap,getHeaders()), 
    Object.class); 
    System.out.println("uploaded file info: "+response.getBody()); 
    return response.getBody(); 
} 
```

Can anyone tell me the procedure how to upload files from Java Rest Template.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T06:45:27.223

我已经用 restTemplate 解决了这个问题。
请看一些代码示例：

```
public String uploadPhoto(File file, String token) throws ClientRequestException {
    try {
        MultiValueMap<String, Object> form = new LinkedMultiValueMap<String, Object>();
        UrlResource urlr = new UrlResource("file:" + file.getAbsolutePath());
        form.add("attachment", urlr);
        WsUrl wsUrl =  requestForObjectMultipart("/uploadProfilePhoto.json", form, WsUrl.class, token);
        return wsUrl.getUrl();
    } catch (MalformedURLException e) {
        throw new ClientRequestException("Something went wrong with file upload");
    }
}

protected <T extends ErrorAware> T requestForObjectMultipart(String methodUrl, Object r, Class<T> c, String token) throws ClientRequestException{
        HttpHeaders headers = new HttpHeaders();
        headers.add(SECURITY_TOKEN,token);
        //Need to set content type here to avoid convertion with Jackson message converter
        headers.add("Content-Type", "multipart/form-data");
        return requestForObjectWithHeaders(methodUrl, r, c, HttpMethod.POST, headers);
    }

protected <T extends ErrorAware> T requestForObjectWithHeaders(String methodUrl, Object r, Class<T> c, HttpMethod method, HttpHeaders headers) throws ClientRequestException{
        T result = restTemplate.exchange( getBaseUrl() + getApiUrlPref() + methodUrl, method, new HttpEntity<Object>(r,headers), c).getBody();
        if( result.hasError() )
            throw new ClientRequestException(result.getError());
        return result;
    } 
```

字符串令牌 - 它只是我们其余服务上的安全令牌（作为自定义 HTTP 标头提供）。它可以提供如何在请求中设置“自定义标头”的示例。注意：请注意返回的数据（上传文件后来自网络服务）被解析为 JSON 对象。如果你不想要这个 - 你可以简单地忽略 restTemplate.exchange() 方法的结果。

我在 Spring 配置中的 restTemplate 初始化：

```
 <bean id="restTemplate" class="org.springframework.web.client.RestTemplate">
        <property name="messageConverters">
            <list>
                <ref bean="jsonConverter"/>
                <bean class="org.springframework.http.converter.FormHttpMessageConverter" />
            </list>
        </property>
        ...
    </bean>
<!-- To enable @RequestMapping process on type level and method level -->
    <bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping"/>
    <bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">
        <property name="messageConverters">
            <list>
                <ref bean="jsonConverter"/>
            </list>

        </property>
    </bean>

    <bean id="jsonConverter" class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter">
        <property name="supportedMediaTypes" value="application/json"/>
    </bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T22:31:48.533

文件上传需要作为多部分 POST 执行。可以在此处找到有关如何在 Java 中执行此操作的说明：[How can I make a multipart/form-data POST request using Java?](https://stackoverflow.com/questions/1378920/how-can-i-make-a-multipart-form-data-post-request-using-java)

# c# - Foreach 中的 C# 操作

> ID：15729193
> 
> 赞同：5
> 
> 时间：2013-03-31T12:05:43.390
> 
> 标签：c#, delegates, foreach, action

`fMethod`是一个`Action<Fruit>`。

但是当`fMethod`被调用时，参数始终是`_Fruits`.
如何解决这个问题？

```
foreach(Fruit f in _Fruits)
{
   field.Add(new Element(f.ToString(),delegate{fMethod(f);}));
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-31T12:10:01.283

这是一个众所周知的问题，即在创建委托的调用中使用修改的子句。添加一个临时变量应该可以解决它：

```
foreach(Fruit f in _Fruits)
{
    Fruit tmp = f;
    field.Add(new Element(f.ToString(),delegate{fMethod(tmp);}));
} 
```

这个问题在 C# 5 中得到修复（[参见 Eric Lippert 的博客](http://blogs.msdn.com/b/ericlippert/archive/2009/11/12/closing-over-the-loop-variable-considered-harmful.aspx)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T12:10:22.897

尝试使用临时变量。

```
foreach(Fruit f in _Fruits)
{
   var temp = f;
   field.Add(new Element(temp.ToString(),delegate{fMethod(temp);}));
} 
```

# javascript - 通过 style.display 隐藏或复制整个 DIV 是否更快？

> ID：15729206
> 
> 赞同：1
> 
> 时间：2013-03-31T12:07:42.700
> 
> 标签：javascript, html

我正在用 html 创建一个演示文稿。它应该类似于 MS Office 中的 powerpoint。它将**预览**所有幻灯片，并且**一次将**在窗口中显示一张幻灯片。我确实有一张幻灯片列表，并且可以通过 Javascript 播放它们。我可以将它们缩小到预览中。

**关于显示的一张幻灯片：** 我想知道在一个包装器 div 中保存所有显示的幻灯片的副本并通过设置 display 属性使它们一张一张地可见是否会更好。或者，如果一次将一张幻灯片复制到此包装 div 中会更好。

为了清楚起见......我得到这样的东西

```
<body>
 <div class="slide">/*slide stuff*/</div>
 <div class="slide">/*slide stuff*/</div>
 <div class="slide">/*slide stuff*/</div>
 <div class="slide">/*slide stuff*/</div>
</body> 
```

我把它转换成这个

```
<body>
 <div id=preview>
  <div class="slide" id="1">/*slide stuff*/</div>
  <div class="slide" id="2">/*slide stuff*/</div>
  <div class="slide" id="3">/*slide stuff*/</div>
  <div class="slide" id="4">/*slide stuff*/</div>
 </div>
 ... 
```

现在我应该通过更改显示属性来显示它们。所以html继续这样：

```
...
 <div id="mainwindow">
  <div class="slide" id="p1" display="none">/*slide stuff*/</div>
  <div class="slide" id="p2" display="none">/*slide stuff*/</div>
  <div class="slide" id="p3" display="none">/*slide stuff*/</div>
  <div class="slide" id="p4" display="none">/*slide stuff*/</div>
 </div>
</body> 
```

或者我应该让`mainwindow`div 为空并在每次幻灯片更改时将幻灯片复制到其中？

```
...
 <div id="mainwindow">
 </div>
</body> 
```

请对这两种解决方案的速度发表任何评论（如果幻灯片包含其他标签），并且由于这是学校作业，我想知道哪种解决方案会被视为“更清洁”和/或更“专业”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T12:12:01.600

当您转到下一张幻灯片时，使用`element.style.display`隐藏比复制元素要快得多。复制需要更改 DOM，这总是比简单地隐藏元素更昂贵。

我能看到的唯一情况不是这种情况是当您拥有数百张幻灯片时。页面的剪切大小可能会使浏览器变慢。

# c++ - 如何使用一些openCV算法在对象周围绘制一个矩形

> ID：15729210
> 
> 赞同：1
> 
> 时间：2013-03-31T12:08:29.230
> 
> 标签：c++, opencv, object-detection

我正在使用 opencv 进行对象检测。我想在用鼠标单击对象后在对象周围绘制一个矩形。我可以使用什么样的技术？我尝试使用 SURF 但徒劳无功。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T13:52:39.897

你想使用什么样的图像？如果图像是一种简单的图像（例如白纸上的铅笔，普通墙上的标记），您会考虑使用以下方法吗？我认为这是非常经典的方法，但在情况有限时效果很好。

```
cv::Mat img = // your image.
double threshold = 128; // needs adjustment.
int n_erode_dilate = 1; // needs adjustment.

cv::Mat m = img.clone();
cv::cvtColor(m, m, CV_RGB2GRAY); // convert to glayscale image.
cv::blur(m, m, cv::Size(5,5));
cv::threshold(m, m, threshold, 255,CV_THRESH_BINARY_INV);
cv::erode(m, m, cv::Mat(),cv::Point(-1,-1),n_erode_dilate);
cv::dilate(m, m, cv::Mat(),cv::Point(-1,-1),n_erode_dilate);

std::vector< std::vector<cv::Point> > contours;
std::vector<cv::Point> points;
cv::findContours(m, contours, CV_RETR_LIST, CV_CHAIN_APPROX_NONE);
for (size_t i=0; i<contours.size(); i++) {
    for (size_t j = 0; j < contours[i].size(); j++) {
        cv::Point p = contours[i][j];
        points.push_back(p);
    }
}
// And process the points or contours to pick up specified object.

// for example: draws rectangle on original image.
if(points.size() > 0){
    cv::Rect brect = cv::boundingRect(cv::Mat(points).reshape(2));
    cv::rectangle(img, brect.tl(), brect.br(), cv::Scalar(100, 100, 200), 2, CV_AA);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T02:02:44.530

我最好的建议是首先使用一些 OpenCV 图像处理技术检测对象，例如......阈值来二进制图像，使用模糊来增强边缘检测，使用 canny 过滤器可能会腐蚀和膨胀。

一旦你得到一个合适的阈值，你的投资回报率从背景中脱颖而出，我将使用一个名为 findcontours 的函数来获取图像中存在的所有斑点的轮廓，如果你得到一些不常见的轮廓，你可以指定只绘制轮廓，如果是大于 X。

一旦存储了 ROI 的轮廓（在向量中），下一步就是使用 Rect 函数在这些轮廓周围绘制边界框。

对于每个问题，OpenCV 都是一个非常开放的领域，有很多解决方案或路径可供您选择。我强烈建议访问[OpenCv 文档](http://docs.opencv.org/)

但首先检查你已经安装或使用的opencv的版本

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T15:09:55.977

必须先检测对象，然后才能找到其边界矩形。通过单击对象，您只需指定属于该对象的像素。这还不够，因为您对物体的形状一无所知。所以点击物体不等于物体检测。

如何检测对象取决于应用程序。找到对象轮廓（边缘）的一种方法是分割。研究OpenCV中的[分水岭](http://docs.opencv.org/modules/imgproc/doc/miscellaneous_transformations.html?highlight=watershed#void%20watershed%28InputArray%20image,%20InputOutputArray%20markers%29)或[抓取](http://docs.opencv.org/modules/imgproc/doc/miscellaneous_transformations.html?highlight=grabcut#void%20grabCut%28InputArray%20img,%20InputOutputArray%20mask,%20Rect%20rect,%20InputOutputArray%20bgdModel,%20InputOutputArray%20fgdModel,%20int%20iterCount,%20int%20mode%29)分割算法。它将为您提供对象的轮廓（如果对象从其背景中突出）。一般来说，目标检测方法取决于应用程序，是一个活跃的研究领域。了解正在检测的对象类型可以极大地帮助检测和分割。

一旦你有了对象的轮廓，你就可以使用[boundingRect](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=findcontour#boundingrect)函数找到它的边界矩形。绘制矩形很容易，只需使用[矩形](http://docs.opencv.org/modules/core/doc/drawing_functions.html?highlight=rectangle#rectangle)函数即可。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T15:12:16.503

如果对象比较简单，只有一种颜色，可以尝试使用[分水岭算法](http://docs.opencv.org/modules/imgproc/doc/miscellaneous_transformations.html#watershed)。它应该适用于像铅笔这样的一种颜色的物体，但在更复杂的情况下肯定会失败。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-20T15:54:26.610

cvtColor 侵蚀扩张后

```
// get the contours
std::vector< std::vector< cv::Point> > contours;
cv::findContours(imageMat, contours, cv::RETR_EXTERNAL, cv::CHAIN_APPROX_NONE);

// http://blog.csdn.net/corcplusplusorjava/article/details/20536251
// draw contours
cv::drawContours(imageMat , allContours ,-1 , cv::Scalar(0) , 2) ; 
```

# php - 革命滑块完全是灰色的，无法正常工作。但适用于其他主题

> ID：15729211
> 
> 赞同：3
> 
> 时间：2013-03-31T12:08:39.900
> 
> 标签：php, javascript, jquery, html, css

[Wordpress Revolution Slider 插件在我安装在http://www.alarpintl.co.uk/](http://www.alarpintl.co.uk/)的主题中不起作用。请查看内容框中的顶部灰色区域。那是应该显示滑块的地方。

我已经设置了所有幻灯片。但这只是行不通。插件开发人员告诉我检查这个： http: [//pippinsplugins.com/never-remove-the-default-the_content-filters-in-themes/](http://pippinsplugins.com/never-remove-the-default-the_content-filters-in-themes/)但我不确定要做什么。

有人可以查看网站并告诉我为什么滑块没有显示吗？我正确使用了简码，它在其他网站上也能正常工作......但那有什么问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T12:17:09.250

`<head>`在其他需要它的脚本之前，jQuery 不包含在您的页面中。将其移至任何其他脚本之上。

# firefox - 为什么使用 pdf.js 打开 pdf 有时会导致“另存为..”对话框？

> ID：15729213
> 
> 赞同：4
> 
> 时间：2013-03-31T12:08:51.963
> 
> 标签：firefox, pdf.js

我已将 firefox 设置为我的标准 pdf 查看器，因为我对 pdf.js 的体验非常好。不幸的是，某些 pdf 文件无法打开，而是显示“另存为”对话框。为什么会发生这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T19:09:49.610

很可能是因为服务器显式发送`Content-Disposition: attachment`.

不幸的是，目前没有合理的方法来覆盖它。

# css - 样式化 UL UL li 不适用于下拉菜单

> ID：15729222
> 
> 赞同：0
> 
> 时间：2013-03-31T12:10:23.993
> 
> 标签：css, drop-down-menu

[http://www.milknhny.co.uk/SofiaWork/](http://www.milknhny.co.uk/SofiaWork/)

我正在尝试在此下拉菜单上设置子菜单的样式，并且我尝试了一个`ul ul`类，但是它似乎不起作用。

我必须对特定的菜单项进行两种特定的样式（因为客户希望前两个具有不同的颜色）。

这些是项目：

```
#menu-item-10 etc. 
```

现在我要重新设计风格`#menu-item-10 ul ul`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T12:15:12.817

使用特定的选择器；

```
li[id^="menu-item-"] ul ul 
```

这样，您可以匹配所有菜单项，无论它们如何结束。`id`+`^=`选择器装置；

> 以“string”开头的 id-attribute-field 中的所有内容

前缀将`li`使其仅在`li`-elements 上匹配。

# symfony - 如何防止在 Symfony2 中加载相关实体？

> ID：15729224
> 
> 赞同：1
> 
> 时间：2013-03-31T12:10:51.897
> 
> 标签：symfony, doctrine

我有两个实体，Order 和 Orderline 具有一对多的关系。我有一个列表，我只需要来自订单的数据，但 Doctrine 会查询每个订单的订单行。我没有在查询中加入 Orderlines。如何防止Doctrine查询订单？

控制器中使用的查询：

```
$query = $em->createQuery("SELECT o FROM SomeBundle:Order o JOIN o.shop s JOIN s.user u WHERE u.id = :user_id AND o.status = :status")
    ->setParameter('user_id', $user->getId())
    ->setParameter('status', 'paid');
$orders = $query->getResult(); 
```

Order 类中的一对多注解：

```
/**
 * @ORM\OneToMany(targetEntity="Orderline", mappedBy="order")
 */
protected $orderlines; 
```

Orderline 类中的多对一注释：

```
/**
 * @ORM\ManyToOne(targetEntity="Order", inversedBy="orderlines")
 */
protected $order; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T12:37:02.260

使用[Doctrine\ORM\Query::HINT_FORCE_PARTIAL_LOAD提示教义](http://www.doctrine-project.org/api/orm/2.3/class-Doctrine.ORM.Query.html#HINT_FORCE_PARTIAL_LOAD)

```
$query = $em->createQuery("SELECT partial o.{id} FROM SomeBundle:Order o JOIN o.shop s JOIN s.user u WHERE u.id = :user_id AND o.status = :status")
    ->setParameter('user_id', $user->getId())
    ->setParameter('status', 'paid');

$query->setHint(Doctrine\ORM\Query::HINT_FORCE_PARTIAL_LOAD, 1);

$orders = $query->getResult(); 
```

或者

请参阅此[http://docs.doctrine-project.org/en/2.1/tutorials/extra-lazy-associations.html](http://docs.doctrine-project.org/en/2.1/tutorials/extra-lazy-associations.html)

# objective-c - 正确的 NSActionCell 编程

> ID：15729225
> 
> 赞同：1
> 
> 时间：2013-03-31T12:10:57.647
> 
> 标签：objective-c, macos, cocoa, nscell, nscontrol

我无法找到有关自定义控件和单元格的信息。

我的控件应该有多个`NSCell`s，这就是为什么我不能使用 default 的原因`NSControl`。
单元格正在正确显示。
但是，它们是`NSButtonCells`，并且应该响应鼠标按下。

这是我尝试过的：

```
- (void)mouseDown:(NSEvent *)theEvent {
    [self.testCell trackMouse:theEvent inRect:[self frameForTestCell] ofView:self untilMouseUp:NO];
} 
```

我不知道这是否是正确的方法，但我没有找到一些合适的资源......

# iphone - 调整 iPhone 5 屏幕的 UITableview 大小

> ID：15729228
> 
> 赞同：0
> 
> 时间：2013-03-31T12:11:42.400
> 
> 标签：iphone, ios, uitableview, cgrect

我有一个从其他方法调用的方法来调整 UITableView 的大小。但是，表格视图仅在第二次调用此代码时才调整大小，而不是像我想象的那样第一次调用。我还确认使用 NSLog 两次都调用了此方法。调整表格视图大小的方法如下。

```
-(void) resizeTableView
{
    if([[UIScreen mainScreen] bounds].size.height == 568)
    {
        NSLog(@"Resizing table view");
        CGRect tableFrame = [self.tableView frame];
        tableFrame.size.height = 210.0;
        [self.tableView setFrame:tableFrame];
    }
} 
```

关于如何更改此代码的任何想法，以便每次都会调整表格视图的大小。任何帮助，将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T00:28:58.620

你从哪里调用这个方法？确保它是从 viewWillAppear 调用的。如果在 viewDidLoad 方法中调用 self.view.frame 将始终为 0,0,0,0

# r - 如何根据需要表示文件中的某些值？

> ID：15729232
> 
> 赞同：-2
> 
> 时间：2013-03-31T12:12:00.297
> 
> 标签：r, raster

我有一个光栅文件（1440*720 行）包含 1、2 和 3 的值。当我绘制文件时，我得到了三种颜色的地图，但我不知道哪个是哪个。我怎样才能根据需要放置这些颜色：

```
 1=red
   2=blue
   3=green 
```

代码：

```
pvm <- file("C:\\User_sm-das.bin","rb")
cor1<- readBin(pvm, numeric(), size=4,  n=1440*720, signed=TRUE)
r <-raster(t(matrix((data=cor1), ncol=720, nrow=1440)))
image(r) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T13:17:54.557

您可以使用`image.plot`从中`fields`向图像添加图例。这里有一个例子：

首先我生成一些数据：

```
set.seed(1234)
x<- 1:5; y<- 1:5
z<- matrix(sample(c(1,2,3),25,rep=TRUE),ncol=5,byrow=TRUE) 
```

然后使用`fields`你可以拥有这个，它使用通常的`image`参数添加一个图例。

```
# fields 
library(fields)
image.plot(x,y,z,col = c("blue" , "red" ,"yellow"),
           interpolate=TRUE) 
```

![在此处输入图像描述](https://i.stack.imgur.com/3l0dX.png)

请注意，如果要将光栅矩阵转换为颜色矩阵，可以执行以下操作：

```
## raster 
r <- raster(ncol=5, nrow=5)
values(r) <- z
mm <- matrix(c("blue" , "red" ,"yellow")[values(r)],
             ncol=5,byrow=TRUE)

     [,1]     [,2]   [,3]   [,4]     [,5]    
[1,] "blue"   "red"  "red"  "red"    "yellow"
[2,] "red"    "blue" "blue" "red"    "red"   
[3,] "yellow" "red"  "blue" "yellow" "blue"  
[4,] "yellow" "blue" "blue" "blue"   "blue"  
[5,] "blue"   "blue" "blue" "blue"   "blue" 
```

`image`您无法绘制需要数值的颜色矩阵的问题。但是你可以`grid.raster`从`grid`包中使用：

```
library(grid)
grid.raster(mm,interpolate=FALSE) 
```

**编辑**

`axis.args`要手动修复图例，您可以使用 `plot.image`

```
 ## fields 
image.plot(x,y,z,
           col = c("red" , "green" ,"blue"),
           axis.args=list( at=0:3, labels=0:3 )) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T05:05:43.720

使用 RaterLayer 'r'，您可以执行 plot(r) 来获取绘图和图例

# jquery - Drupal 如何将 java 脚本添加到 ctools 模式弹出窗口

> ID：15729234
> 
> 赞同：0
> 
> 时间：2013-03-31T12:12:05.807
> 
> 标签：jquery, drupal, modal-dialog, drupal-ctools

在弹出加载后，我需要在 drupal 的 ctools 模态弹出窗口中使用 jquery 隐藏一些具有某些条件的元素。我使用了 drupal_add_js 但这不起作用。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T11:06:37.377

您必须使用：`ctools_ajax_command_attr('selector','attr','value');`do 在弹出窗口中执行任何类型的操作。有关更多信息，您可以阅读：[http ://drupalcontrib.org/api/drupal/contributions!ctools!includes!ajax.inc/7](http://drupalcontrib.org/api/drupal/contributions!ctools!includes!ajax.inc/7)

# android - 捕获隐藏键盘按钮事件Android 4

> ID：15729238
> 
> 赞同：3
> 
> 时间：2013-03-31T12:12:31.750
> 
> 标签：android, show-hide, android-softkeyboard, android-4.0-ice-cream-sandwich

我一直在寻找一种方法来捕捉“隐藏软键屏幕按钮”事件。

问题是我有一个带有 windowSoftInputMode="adjustPan" 的活动，因为如果没有，当 softKeyboard 出现时，布局会重新缩放，我需要它们保持原始大小。因为我有一个登录表单，所以我已经捕获了几个事件，并且我手动滚动了父布局。

但问题是似乎没有办法捕捉隐藏软键屏幕按钮事件，当发生这种情况时，我无法恢复滚动并且事情有足够的底部边距。

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-05T06:41:55.223

如果我理解您的问题，您希望在用户按下返回键时拦截我假设的隐藏软键盘的事件。

如果是这样，您可以**在**使用`public boolean onKeyPreIme (int keyCode, KeyEvent event)`. 这样，您就可以在隐藏发生之前执行代码。

[在这里](http://developer.android.com/reference/android/view/View.html#onKeyPreIme%28int,%20android.view.KeyEvent%29)阅读

另请阅读我找到的[这些答案](https://stackoverflow.com/questions/7634346/keyboard-hide-event)

希望这可以帮助！

# xslt - 每个 XSLT 逻辑

> ID：15729240
> 
> 赞同：0
> 
> 时间：2013-03-31T12:12:55.853
> 
> 标签：xslt

下面是输入。在 Loop-1,2,3 元素是无界的。如果我们在转换中使用每个循环，我们将得到像 AA、BB、C C 一样的输出。但我希望输出与输入一样。

请看下面的输出。

输入：

```
<LOOP-1><!-- unbounded -->
<element1>A</element1>
<LOOP-1>

<LOOP-2><!-- unbounded -->
<element2>B</element2>
<LOOP-2>

<LOOP-3><!-- unbounded -->
<element3>C</element3>
<LOOP-3>

<LOOP-1>
<element1> A</element1>
<LOOP-1>

<LOOP-2>
<element2>B</element2>
<LOOP-2>

<LOOP-3>
<element3>C</element3>
<LOOP-3> 
```

对于上述输入，如果我们为每个输入，我们将得到输出

```
A
A
B
B
C
C 
```

但我想要以下输出。我们如何实现这一点。解决方案应该是通用的。感谢您的帮助。

输出

```
<LOOP-1>
<element1>A</element1>
<LOOP-1>

<LOOP-2>
<element2>B</element2>
<LOOP-2>

<LOOP-3>
<element3>C</element3>
<LOOP-3>

<LOOP-1>
<element1> A</element1>
<LOOP-1>

<LOOP-2>
<element2>B</element2>
<LOOP-2>

<LOOP-3>
<element3>C</element3>
<LOOP-3> 
```

XSLT：

```
<xsl:for-each select="LOOP-1">
  <xsl:element1>
    <xsl:value-of select="element1"/>
  </xsl:element1>
</xsl:for-each>

<xsl:for-each select="LOOP-2">
  <xsl:element2>
    <xsl:value-of select="element2"/>
  </xsl:element2>
</xsl:for-each>

<xsl:for-each select="LOOP-3">
  <xsl:element3>
    <xsl:value-of select="element3"/>
  </xsl:element3>
</xsl:for-each> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T14:37:52.390

`<xsl:for-each>`没有必要，并且在这种情况下使事情变得更加复杂和困难。

**如果您只是想在输出中生成源 XML 的精确副本，那么您可以使用`<xsl:copy-of>`：**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>

<xsl:template match="/">
    <xsl:copy-of select="."/>
</xsl:template>

</xsl:stylesheet> 
```

**另一种选择是使用[身份转换](http://en.wikipedia.org/wiki/Identity_transform)：**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

</xsl:stylesheet> 
```

身份转换的优点是，如果/当您确实想要自定义输出并转换任何内容时，您可以简单地添加一个模板来匹配该节点或属性来处理该特殊情况。

例如，如果你想为 second 产生不同的输出`B`，你可以添加这个模板：

```
<xsl:template match="LOOP-2[2]/element2[.='B']">
    <xsl:copy>
        <xsl:text>This is a special case for the second LOOP-2/element2 who's text() equals 'B'</xsl:text>
        <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
</xsl:template> 
```

# angularjs - 在AngularJS中不使用时如何从范围中删除？

> ID：15729242
> 
> 赞同：4
> 
> 时间：2013-03-31T12:13:10.033
> 
> 标签：angularjs, angularjs-scope

我已经设置了一个控制器每隔几秒钟打勾，这反过来又对后端 api 进行了一次安静的调用。一切都按预期工作，除非我导航到另一个部分（由单独的控制器处理），滴答声继续触发。

是否可以完全从范围中删除控制器？

这是我当前控制器的粘贴：

```
myApp.controller('SupervisorController', function($scope, supervisord, $timeout) {

    $scope.supervisord = supervisord;

    (function tick() {
        $scope.supervisord.fetch();
        $timeout(tick, 2500);
    })();
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T12:38:38.280

在[http://docs.angularjs.org/api/ng.$ro​​otScope.Scope](http://docs.angularjs.org/api/ng.%24rootScope.Scope)它提到

> 就在作用域被销毁之前，会在该作用域上广播 $destroy 事件。应用程序代码可以注册一个 $destroy 事件处理程序，这将使它有机会执行任何必要的清理。

这似乎正是您想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T12:26:37.193

一种解决方法是使用`var myInterval = setInterval(tick, 2500);`它来启动它，然后再`clearInterval(myInterval);`停止它（或类似的[$timeout.cancel(myInterval)](http://jsfiddle.net/gxlcl/HfYPE/)）。为此，您需要`myInterval`在两个控制器中访问，因此您可以考虑将其包装在[Angular 服务](http://docs.angularjs.org/guide/dev_guide.services)中。

# git - 我如何将 git 历史推送到 svn

> ID：15729243
> 
> 赞同：2
> 
> 时间：2013-03-31T12:13:11.593
> 
> 标签：git, svn, git-svn

我有一个历史悠久的现有 git 存储库。出于业务原因，我必须将该存储库镜像到 svn 服务器。我尝试了几种方法，但到目前为止总是失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T13:10:46.363

前段时间我很难做到，所以我从不同的来源收集了一些步骤来做到这一点。这个过程将保留你完整的 git 历史记录。在开始之前，请确保拥有存储库的备份副本。

首先要做的是创建一个空`svn`存储库。完成后，请确保已`git-svn`安装并编辑`.git/config`您以跟踪您新创建的`svn`存储库：

```
[svn-remote "svn"]
url = https://your.svn.repo
fetch = :refs/remotes/git-svn 
```

现在你可以获取你的`svn`repo：

```
git svn fetch 
```

您应该在您的`svn`repo 之后看到远程分支，您可以检查：

```
git branch -a 
```

现在获取您的`root commit`和`svn`分支的哈希值：

```
git rev-list --parents master | grep '^.\{40\}$'
git rev-parse remotes/git-svn 
```

创建嫁接：

```
echo <hash-of-root-commit> <hash-of-svn-branch-commit> >> .git/info/grafts 
```

现在，如果您对`git`（我使用`tig`）使用图形包装器，您应该会看到您`root commit`的`svn-branch`.

此时，您必须传播`graft`使其永久化：

```
git filter-branch -- remotes/git-svn --all 
```

现在我们不再需要它了，所以我们可以删除它

```
rm .git/info/grafts 
```

检查您的图形 git 包装器是否`svn-branch`是`master`祖先。

现在您几乎完成了，将您的历史记录重新设置在主干之上：

```
git svn rebase 
```

现在您准备好`svn`使用

```
git svn dcommit 
```

我创建了这个过程合并了我在[这里](https://stackoverflow.com/questions/661018/pushing-an-existing-git-repository-to-svn/)和[这里](http://kerneltrap.org/mailarchive/git/2008/10/26/3815034)找到的信息，因此感谢各自的作者。我修改了第一部分，因为建议的程序对我不起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-06T16:01:36.863

请注意，这种`git-svn`方法会导致部分历史丢失。考虑改用[SubGit](http://subgit.com)，它能够将 Git 存储库转换为 SVN，保留所有分支的历史记录。

您可以在下面找到在本地模式下使用 SubGit 的示例，即当 Subversion 和 Git 存储库位于同一主机上时：

```
$ subgit configure SVN_REPO
# adjust SVN_REPO/conf/subgit.conf, so git.default.repository points to GIT_REPO
# adjust SVN_REPO/conf/authors.txt to map SVN usernames to Git identities
$ subgit install SVN_REPO
$ subgit uninstall --purge SVN_REPO 
```

一旦我们以这种方式将 Linux 内核 Git 存储库转换为 SVN。希望有帮助。

# c - 将结构值与变量进行比较

> ID：15729245
> 
> 赞同：0
> 
> 时间：2013-03-31T12:13:27.560
> 
> 标签：c, struct

我正在努力将结构的内容与变量进行比较。array1 中有 10 个结构，变量 value 和 count。我需要遍历每个值变量，直到找到一个匹配的 tempVal，然后增加相应的计数，然后搜索才能结束。如果未找到该函数将返回 -1。

我的以下代码运行良好但不起作用，我感觉 strcmp 行可能有问题，但我不确定。为任何输入欢呼。

```
int valCheck(char *tempVal){

    int j;
    for(j=0;j<10;j++){
        if(strcmp(array1[j].value, tempVal) == 0){ 
            array1[j].count++; //increment its count
            break;

        }
    }
} 
```

完整编辑：

```
#include <stdio.h>
#include <stdlib.h>
#include <errno.h>

struct values
{
    char value[64];
    int count;
};

struct values array1[100];

//check if value exists in array
int valCheck(char *tempVal)
{
    int j;
    for(j=0;j<10;j++)
    {
        if(strcmp(array1[j].value, tempVal) == 0)
        {
            array1[j].count++; //increment its count
            //return j; // <== return index of found element
        }
    }
    return -1;
}

int main()
{
    FILE * input;
    int i;
    char tempVal[] ="hello";
    input = fopen("random.txt","r");

    for (i=0;i<=10;i++) //go through the 10 elements in text file
    {
        //scan each word into a temporary variable
        // **** NOT COMPLETE, JUST USING TEMPWORD ASSIGNED FOR NOW

        int checkedVal = valCheck(&tempVal);

        //if wordCheck returns -1 add the word to the array
        //otherwise do nothing as a duplicate has appeared
        if(checkedVal == -1){
            fscanf(input, "%s",array1[i].value);
        }

        printf("WORD %i: %s ",i,array1[i].value);
        printf(" COUNT IS: %i", array1[i].count);
        printf("\n");
    }

    fclose(input);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T12:31:43.500

假设如下：

*   您的数组已正确分配（在堆栈上或动态）为至少 10 个元素宽。
*   您的结构成员`value`是有效的`char *`或固定长度的`char[n]`缓冲区。
*   结构成员引用的字符串数据`value`正确地以空值结尾。
*   引用的字符串数据`tempVal`有效且正确地以空值结尾。
*   您知道`strcmp()`区分大小写的比较
*   您评论了数组中的 100 个元素，此代码仅检查前**十**(10) 个元素是有意的

我的水晶球告诉我，最终你需要让你的函数真正**返回**一些东西。

```
int valCheck(char *tempVal)
{
    int j;
    for(j=0;j<10;j++)
    {
        if(strcmp(array1[j].value, tempVal) == 0)
        { 
            array1[j].count++; //increment its count
            return j; // <== return index of found element
        }
    }
    return -1;  // <== return -1 per your description of failure.
} 
```

注意：您的编译器配备了不错的警告检查，很容易发现这种缺少返回的代码。注意那些警告。同样，请仔细检查此答案顶部项目符号列表中的所有内容，以*确保*您所使用的内容是正确的。

* * *

**编辑**更新以反映 OP 的示例字典构建。

以下是我认为这可能被称为的方式。希望它可以帮助你。我改变了一些东西：

*   使字典更大一点 (256)
*   处理命令行以获取文件名。让我更容易测试。
*   仅在最后报告摘要，而不是在处理时按单词报告。

我希望它有所帮助。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <errno.h>

struct values
{
    char value[64];
    int count;
};

// global array.
struct values array1[256];
int n_words = 0;

//check if value exists in array
int valCheck(const char *tempVal)
{
    int j;
    for(j=0;j<10;j++)
    {
        if(strcmp(array1[j].value, tempVal) == 0)
        {
            array1[j].count++; //increment its count
            return j;
        }
    }
    return -1;
}

int main(int argc, char *argv[])
{
    FILE * input = NULL;
    char tempVal[64];
    int i=0;

    if (argc < 2)
    {
        printf("Must specify a filename.\n");
        return EXIT_FAILURE;
    }

    // open file
    input = fopen(argv[1],"r");
    if (!input)
    {
        perror("Failed to open file.");
        return EXIT_FAILURE;
    }

    // read all strings from the file one at a time.
    while (fscanf(input, "%64s", tempVal) == 1)
    {
        int i = valCheck(tempVal);
        if (i == -1)
        {
            if (n_words < sizeof(array1)/sizeof(array1[0]))
            {
                strcpy(array1[n_words].value, tempVal);
                array1[n_words].count = 1;
                i = n_words++;
            }
            else
            {   // error. no more space in dictionary
                printf("No more space to add word: %s\n", tempVal);
            }
        }

    }
    fclose(input);

    // summary report
    for (i=0;i<n_words;++i)
        printf("WORD %i: %s, COUNT IS: %i\n", i, array1[i].value, array1[i].count);

    return EXIT_SUCCESS;
} 
```

**输入**

```
hello my name is dave hello I am dave hi 
```

**输出**

```
WORD 0: hello, COUNT IS: 2
WORD 1: my, COUNT IS: 1
WORD 2: name, COUNT IS: 1
WORD 3: is, COUNT IS: 1
WORD 4: dave, COUNT IS: 2
WORD 5: I, COUNT IS: 1
WORD 6: am, COUNT IS: 1
WORD 7: hi, COUNT IS: 1 
```

* * *

**在家工作**

毕竟，我让您确定为什么以下代码也可以工作，但没有使用临时缓冲区来这样做（无论如何）。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <errno.h>

struct values
{
    char value[64];
    int count;
};

// global array.
#define MAX_WORDS   256
struct values array1[MAX_WORDS] = {{{0},0}};
int n_words = 0;

//check if value exists in array
int valCheck(const char *tempVal)
{
    int j;
    for(j=0; j< n_words; j++)
    {
        if(strcmp(array1[j].value, tempVal) == 0)
        {
            array1[j].count++; //increment its count
            return j;
        }
    }
    return -1;
}

int main(int argc, char *argv[])
{
    FILE * input = NULL;
    int i=0;

    if (argc < 2)
    {
        printf("Must specify a filename.\n");
        return EXIT_FAILURE;
    }

    // open file
    input = fopen(argv[1],"r");
    if (!input)
    {
        perror("Failed to open file.");
        return EXIT_FAILURE;
    }

    // read all strings from the file one at a time.
    while (n_words < MAX_WORDS &&
           fscanf(input, "%64s", array1[n_words].value) == 1)
    {
        if (valCheck(array1[n_words].value) == -1)
        {
            array1[n_words].count = 1;
            ++n_words;
        }
    }
    fclose(input);

    // summary report
    for (i=0;i<n_words;++i)
        printf("WORD %i: %s, COUNT IS: %i\n", i, array1[i].value, array1[i].count);

    return 0;
} 
```

输出与之前相同。

# python - 数据验证 - 邮政编码

> ID：15729248
> 
> 赞同：3
> 
> 时间：2013-03-31T12:13:41.030
> 
> 标签：python, validation, python-3.x

我遇到了以下问题：

定义一个函数 postalValidate(S)，它首先检查 S 是否代表一个有效的邮政编码：首先，删除所有空格；余数必须采用 L#L#L# 的形式，其中 L 是字母（小写或大写），# 是数字。如果 S 不是有效的邮政编码，则返回布尔值 False。如果 S 有效，则以漂亮的 L#L#L# 格式返回相同邮政编码的版本，其中每个 L 都是大写字母。

这是我的代码：

```
def postalValidate(S):
S = S.replace(" ", "")
   for c in range(0, 4, 2):
      if S[c].isalpha() == True:
         x = True
   for c2 in range(1, 5, 2):
      if S[c2].isdigit() == True:
         y = True
   if x == True and y == True:
            return S.upper()
   else:
      return False 
```

问题是，我收到此错误：

> UnboundLocalError：分配前引用的局部变量“y”

对此的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T12:27:51.100

问题是如果不满足条件`S[c2].isdigit() == True`，则不会分配变量`y`，因此您以后无法检查它是否为真。避免它的最简单方法是`False`预先为其分配值：

```
y = False
for c2 in range(1, 5, 2):
    if S[c2].isdigit():
       y = True 
```

几点注意事项：

1.  您不需要明确`== True`的 in`if`子句。`if cond`检查是否`bool(cond)`是`True`，并且在你的情况下已经`cond`等于`True`。

2.  该`range`函数的结果不包括它的第二个参数：

    ```
    In [1]: list(range(0, 4, 2))
    Out[1]: [0, 2] 
    ```

    你可能想给它加 1：

    ```
    In [2]: list(range(0, 5, 2))
    Out[2]: [0, 2, 4] 
    ```

您也可以使用切片表示法来完全避免循环。

因此，一些优化可以减少代码的长度：

```
def postValidate(s):
    s = s.replace(' ', '')
    if len(s) == 6 and s[0:5:2].isalpha() and s[1:6:2].isdigit():
       return s.upper()
    return False 
```

# android - 运行 jfeinstein10 的 SlidingMenu 示例应用程序

> ID：15729250
> 
> 赞同：3
> 
> 时间：2013-03-31T12:13:51.613
> 
> 标签：android, slide, slidingmenu

我是 Android 新手，在 Android 上运行 jfeinstein10 的 SlidingMenu 库示例时遇到问题。由于我依赖于 ActionBarSherlock 项目和库本身，因此 Eclipse 不知道将哪个 R 用于 id。我收到以下错误消息：

1）ResponsiveUIActivity类型的onOptionsItemSelected(MenuItem)方法必须重写或实现超类型方法（虽然我导入了ABS类）

2）R不能解析为变量（大约20条这样的消息）

3) 方法 getSupportActionBar() 未定义 BaseActivity 类型

4)Activity类型中的onOptionsItemSelected(MenuItem)方法不适用于参数(MenuItem)

我在构建路径中包含了 ABS 和 SlidingMenu 库，并在 Properties>Android 部分导入了这两个库。项目构建目标是 Android 4.2.2，minSdkVersion = 8，targetSdkVersion=17。

任何想法如何解决这些问题？

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T12:56:38.763

我修好了它。只需将滑动菜单包中的R文件导入到SlidingMenu库中的SlidingFragmentActivity并使其扩展SherlockFragmentActivity即可

# javascript - Jcrop Javascript 图像预览扭曲

> ID：15729251
> 
> 赞同：1
> 
> 时间：2013-03-31T12:14:14.550
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3, image-resizing, jcrop

我一直在尝试实现 Jcrop，以便当用户上传他们的图像时，他们能够裁剪他们的图像并在预览中查看这种裁剪的样子。

除了预览似乎拉伸了我的图像并扭曲了它们的宽度之外，一切最终都运行良好。

我目前的代码是这样的：

作物.html.erb

```
<% content_for :head do %>
    <script type="text/javascript" charset="utf-8">
        $(function() {
          $('#cropbox').Jcrop({
            onChange: update_crop,
            onSelect: update_crop,
            setSelect: [0, 0, 300, 300],
            aspectRatio: 1
          });
        });

        function update_crop(coords) {
            var rx = 100/coords.w;
            var ry = 100/coords.h;
            var lw = $('#cropbox').width();
            var lh = $('#cropbox').height();
            var ratio = <%= @user.avatar_geometry[:width] %> / lw ;

          $('#preview').css({
            width: Math.round(rx * lw) + 'px',
            height: Math.round(ry * lh) + 'px',
            marginLeft: '-' + Math.round(rx * coords.x) + 'px',
            marginTop: '-' + Math.round(ry * coords.y) + 'px'
          });
          $("#crop_x").val(Math.round(coords.x * ratio));
          $("#crop_y").val(Math.round(coords.y * ratio));
          $("#crop_w").val(Math.round(coords.w * ratio));
          $("#crop_h").val(Math.round(coords.h * ratio));
        }
    </script>
<% end %>

<%= image_tag @user.avatar_url(:normal), :id => "cropbox" %>

<h3>Preview</h3>
<div class="preview">
    <%= image_tag @user.avatar_url(:thumb), :id => "preview" %>
</div>

<%= form_for @user do |f| %>
    <% for attribute in [:crop_x, :crop_y, :crop_h, :crop_w] %>
        <%= f.hidden_field attribute, :id => attribute %>
    <% end %>
    <p><%= f.submit "Crop" %></p>
<% end %> 
```

如果有人知道我哪里出错了，那就太好了？在此先感谢您的帮助！

# haskell - Haskell中的递归函数和停止条件

> ID：15729252
> 
> 赞同：1
> 
> 时间：2013-03-31T12:14:16.283
> 
> 标签：haskell, recursion

我正在实现一个递归函数，我希望停止条件是**(2*scope)**，它是函数的参数

```
sortByManhattanDistance agent (2*scope) scope xs sortedNearFoodList = sortedNearFoodList

sortByManhattanDistance agent n scope xs sortedNearFoodList = sortByManhattanDistance agent (n+1) scope xs (sorted ++ sortedNearFoodList) 
where sorted=compareManhattanDistance xs agent n 
```

和拥抱抱怨：`Syntax error in declaration (unexpected symbol "*")` 这是否意味着我不能在参数上使用某些功能？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T12:29:31.000

不，您不能在这样的等式左侧使用函数或运算符。

做你想做的事情的正确方法是使用[警卫](http://en.wikibooks.org/wiki/Haskell/Truth_values#Guards)：

```
sortByManhattanDistance agent n scope xs sortedNearFoodList
    | n == 2 * scope = sortedNearFoodList
    | otherwise      = sortByManhattanDistance agent (n+1) scope xs
                                            (sorted ++ sortedNearFoodList) 
  where sorted = compareManhattanDistance xs agent n 
```

# ember.js - 车把和 Ember 包

> ID：15729253
> 
> 赞同：5
> 
> 时间：2013-03-31T12:14:20.773
> 
> 标签：ember.js, handlebars.js, textmatebundles

是否有适用于 Handlebars、Ember 或两者的 Textmate 2.0 捆绑包？

我确实找到了以下内容：

[https://github.com/drnic/Handlebars.tmbundle](https://github.com/drnic/Handlebars.tmbundle)

但它已经有 2 年没有更新了，而且我无法真正在 Textmate 2 中有效地为我工作（尽管我的破解方式可能是问题所在）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-26T09:36:47.760

为了向 Textmate2 添加把手，您需要将 git 克隆到

```
~/Library/Application Support/TextMate/Managed/Bundles 
```

[来源](http://skipjack.info/?p=1098)

# php - 获取表 A 中的几个 SQL 行（a_ID 和 avg_data）的平均值，其中表 B 中（a_ID 按 b_ID 分组）

> ID：15729254
> 
> 赞同：1
> 
> 时间：2013-03-31T12:14:27.457
> 
> 标签：php, mysql, search, average

我有 2 张桌子。表 A、表 B。

```
Table A:

a_ID (313, 314, 315, 322) avg_data (50, 920, 12, 16)

Table B:

a_ID (313, 314, 315, 316, 317, 318, 319, 320, 321, 322, 323) 
b_ID (204, 204, 204, 205, 205, 206, 207, 208, 209, 210, 210) 
```

所以多个a_ID 属于一个b_ID。

我想为表 B 中属于 b_ID 的所有 a_ID 获取表 A 中的 avg_data 平均值。我正在尝试在 php 中执行此操作。

就像是：

```
 GET the list of a_ID in table B that have the same b_ID, then search table_A for all these ID's in the list and get the average of their respective avg_data column. 
```

这可能只在一个 SQL 语句中完成吗？

到目前为止我已经尝试过

```
 $qry="SELECT b_ID
    FROM table_B";              

 $result= mysql_query($qry);

 while($row = mysql_fetch_assoc($result)) {

    $[b_ID] =$row['b_ID'];
  }

  foreach($b_ID as $value) {

  $qry="SELECT a_ID
    FROM table_B WHERE b_ID = '$value'";                

  $result= mysql_query($qry);

  while($row = mysql_fetch_assoc($result)) {

      $a_ID[] =$row['a_ID'];

   }

   $search = implode(', ', $a_ID); 

   echo $search; 

  } 
```

所以这应该输出

```
 313, 314, 315 <br> 316, 317 <br> 318 <br> 319 etc 
```

但它实际上输出：

```
 313, 314, 315, 322, 313, 314, 315

 313, 314, 315, 322, 313, 314, 315, 316, 317

 313, 314, 315, 322, 313, 314, 315, 316, 317, 318 
```

这是为了获取属于每个 b_ID 的 a_ID 的列表，以便我可以找到平均值，但是，输出不正确并且包含的​​ a_ID 比应有的多。

我试图尽可能地解释这一点，但它似乎不是很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T12:55:22.477

好的-评论后我想我明白你的最终目标是平均`avg_data`。这可以在一个相当简单的查询中完成，该查询`INNER JOIN`在两个表之间执行一个并按 分组`b_ID`。

```
SELECT
  Tableb.b_ID,
  AVG(TableA.avg_data) AS average
FROM
  TableB
  INNER JOIN TableA ON TableA.a_ID = TableB.a_ID
GROUP BY TableB.b_ID 
```

[http://sqlfiddle.com/#!2/349ba/12](http://sqlfiddle.com/#!2/349ba/12)

现在，如果您还希望`a_ID`在输出中列出，它会变得有点复杂。您需要将其结果作为子查询加入`TableB`以获取`a_ID`列表，然后可以将它们分组`GROUP_CONCAT()`到以逗号分隔的值列表中，这些值具有相同的平均值：

```
SELECT 
  GROUP_CONCAT(b.a_ID), 
  avgs.average
FROM 
  TableB b
  /* Makes sure only a_ID existing in TableA appear in the output */
  INNER JOIN TableA a ON b.a_ID = a.a_ID
  INNER JOIN (
    /* Retrieves average avg_data for like b_ID values */
    SELECT
      Tableb.b_ID,
      AVG(TableA.avg_data) AS average 
    FROM
      TableB
      INNER JOIN TableA ON TableA.a_ID = TableB.a_ID
    GROUP BY TableB.b_ID
  ) avgs ON b.b_ID = avgs.b_ID
GROUP BY avgs.b_ID 
```

[http://sqlfiddle.com/#!2/349ba/21](http://sqlfiddle.com/#!2/349ba/21)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T13:01:23.460

我只是在浏览你的php代码......

1.  首先在您的第一个查询中使用 distinct ..
2.  当您创建 $a_ID 时，您需要根据 b_id 将它们分组。

我对您的代码做了一些更改..请看一下

```
 <?php
        mysql_connect('localhost','root','');
        mysql_select_db('test');

        $qry="SELECT distinct b_ID
            FROM Table_B";              

         $result= mysql_query($qry);

         while($row = mysql_fetch_assoc($result)) {

            $b_ID[] =$row['b_ID'];
          }

          foreach($b_ID as $value) {

          $qry="SELECT a_ID
            FROM yable_B WHERE b_ID = '$value'";                

          $result= mysql_query($qry);

          while($row = mysql_fetch_assoc($result)) {

              $a_ID[$value][] =$row['a_ID'];

           }
          }   

          foreach( $a_ID as $value)
           {
             $search = implode(',',$value);
             echo $search ."<br>"; 
           }

        ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T13:07:53.473

`select distinct b_ID, (select avg(avg_data) from table_A where a_ID in (select a_ID from table_B y where y.b_ID=x.b_ID) ) from table_B x`

# mysql - SQL查询出现百分比

> ID：15729256
> 
> 赞同：-1
> 
> 时间：2013-03-31T12:14:37.850
> 
> 标签：mysql, sql, group-by

鉴于以下情况：

```
X    Y    Type 
----------------  
1    5    A   
2    7    B   
1    5    A   
1    5    C  
3    6    D 
```

我想将其转换为在位置（X，Y）上找到的 A、B、C、D 的百分比。

目前我做

```
SELECT 
    CONCAT( X,  ':', Y ) , TYPE , COUNT( TYPE )   
FROM  mine   
WHERE 1   
GROUP BY X, Y, TYPE 
ORDER BY X, Y, TYPE 
```

这给出了一个很好的结果，但需要在编程语言中进行第二次传递才能得到我想要的。

最后，我希望我的结果如下所示：

```
Loc Type Percentage    
-------------------
1:5  A    66    
1:5  C    33    
2:7  B    100     
3:6  D    100 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T13:06:06.797

不优雅，但它有效：

```
SELECT CONCAT(x, ':', y),
       t,
       COUNT(t)/(SELECT COUNT(t)
                   FROM m AS m2
                  WHERE m.x = m2.x
                    AND m.y = m2.y)
FROM  m
GROUP BY x, y, t 
ORDER BY x, y, t 
```

[您可以在SQL Fiddle](http://sqlfiddle.com/#!2/e6a1e/3)看到一个示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T13:23:19.017

试试这个

```
 SELECT CONCAT(x, ':', y) as Loc,Type,
        round( COUNT(Type)/(SELECT COUNT(Type)
                   FROM mine AS t2
                   WHERE mine.x = t2.x
                    AND mine.y = t2.y)* 100 ,1) as percentage
     FROM  mine
     GROUP BY x, y, Type 
     ORDER BY x, y, Type 
```

[**在这里演示**](http://sqlfiddle.com/#!2/44211/4)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T13:26:35.730

你也可以这样做：

```
SELECT 
    CONCAT( m.X,  ':', m.Y ) , m.TYPE , COUNT( 1 ) Count , 100 * COUNT(1)/t.total Percentage
FROM  mine m INNER JOIN
      (SELECT X,Y,COUNT(1) total from mine group by x,y) t  
      on m.X=t.X and m.Y=t.Y
GROUP BY m.X, m.Y, m.TYPE, t.total
ORDER BY m.X, m.Y, m.TYPE 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-31T13:56:40.677

如果表上有标识列，则可以执行以下操作：

```
CREATE TABLE mine (
  ID INTEGER NOT NULL AUTO_INCREMENT primary key,
  x INTEGER,
  y INTEGER,
  type CHAR(1)
);

INSERT INTO mine (x,y,type) VALUES (1, 5, 'A');
INSERT INTO mine (x,y,type) VALUES (2, 7, 'B');
INSERT INTO mine (x,y,type) VALUES (1, 5, 'A');
INSERT INTO mine (x,y,type) VALUES (1, 5, 'C');
INSERT INTO mine (x,y,type) VALUES (3, 6, 'D'); 
```

.

```
SELECT CONCAT( m.X,  ':', m.Y ) 
 , m.TYPE 
 , COUNT(distinct m.id) TotalOfTypeOnXY
 , COUNT(distinct m2.id) TotalRecordsOnXY
 , 100 * (COUNT(distinct m.id) / COUNT(distinct m2.id)) Percentage
 FROM  mine m
inner join mine m2 
on  m.x = m2.x 
and m.y = m2.y
GROUP BY m.X, m2.x, m.Y, m2.y, m.TYPE 
ORDER BY m.X, m.Y, m.TYPE 
```

[http://sqlfiddle.com/#!2/8e94c](http://sqlfiddle.com/#!2/8e94c)

# asp.net - ASP.NET MVC 和 IIS - 序列不包含匹配元素

> ID：15729257
> 
> 赞同：0
> 
> 时间：2013-03-31T12:14:43.613
> 
> 标签：asp.net, asp.net-mvc, iis, xsockets.net

我有一个用 ASP.NET MVC 编写的 Web 应用程序。一切都很好，在 Visual Studio 应用程序中工作得很好，但是一旦我把它放在 IIS 服务器上，它就会给我这个错误： `Sequence contains no matching element`.

这是它给我的堆栈跟踪：

> [InvalidOperationException：序列不包含匹配元素]
> System.Linq.Enumerable.Single(IEnumerable `1 source, Func`2 predicate) +4134530 XSockets.Plugin.Framework.Helpers.PluginHelpers.GetInstance(ImportedType importsType) +143 XSockets.Plugin.Framework.Composable.Compose( T obj) +656 XSocketsServer..ctor() +170
> Scyk.MvcApplication.Application_Start() +173
> 
> [HttpException (0x80004005): 序列不包含匹配元素]
> System.Web.HttpApplicationFactory.EnsureAppStartCalledForIntegratedMode(HttpContext context, HttpApplication app) +12864673
> System.Web.HttpApplication.RegisterEventSubscriptionsWithIIS(IntPtr appContext, HttpContext context, MethodInfo[] handlers) +175
> System .Web.HttpApplication.InitSpecial(HttpApplicationState state, MethodInfo[] handlers, IntPtr appContext, HttpContext context)
> +304 System.Web.HttpApplicationFactory.GetSpecialApplicationInstance(IntPtr appContext, HttpContext context) +404
> System.Web.Hosting.PipelineRuntime.InitializeApplication(IntPtr应用上下文）+475
> 
> [HttpException (0x80004005): 序列不包含匹配元素]
> System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +12881540 System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +159 System.Web.HttpRuntime.ProcessRequestNotificationPrivate(IIS7WorkerRequest wr, HttpContext上下文）+12722601

有人能帮我一下吗？我不知道出了什么问题，尤其是当视觉工作室一切正常时...

编辑：我的 App_Start()：

```
protected void Application_Start()
{
    AreaRegistration.RegisterAllAreas();
    FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
    RouteConfig.RegisterRoutes(RouteTable.Routes);
    BundleConfig.RegisterBundles(BundleTable.Bundles);
    new XSocketsServer();
} 
```

我在那里启动 xsockets 服务器，但无论如何，如果我注释掉这个 XSocketsServer，它仍然会给我同样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T16:52:42.173

我设法重现了错误。如果您在启动调试器之前没有选择“重建解决方案”，这似乎会发生。我无法回答您是如何在带有预编译程序集的 IIS 上遇到错误的...

但是，下面的解决方法应该可以工作（刚刚快速测试过）。

1.  安装包 WebActivator -版本 1.5.3
2.  在 App_Start 运行后使用 PostApplicationStartMethod 启动服务器。

    ```
    [assembly: WebActivator.PostApplicationStartMethod(typeof(MyApplication.App_Start.XSocketsStart), "Start")] 
    ```

还有班级...

```
namespace MyApplication.App_Start
{
    public static class XSocketsStart
    {
        public static void Start()
        {
            //Start the server.... In this case named Instance.
            new Instance();
        }
    }
} 
```

编辑：在公共网站上添加了关于它的注释：[WorkAround](http://xsockets.net/api/known-issues-work-arounds/getting-an-error-from-thiscomposeme-1)

问候乌夫

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T12:33:12.417

应用程序池是否处于集成模式？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T12:37:36.340

检查您是否正在调试为 32 位或 64 位以及服务器的设置方式。如果服务器运行 64 位，您可能必须启用 32 位应用程序才能“访问”您的第三方 dll。

# wpf - 创建 WPF 用户控件时出现奇怪的编译错误和 Visual Studio 崩溃

> ID：15729258
> 
> 赞同：0
> 
> 时间：2013-03-31T12:14:44.673
> 
> 标签：wpf

我试图模仿我继承的一些代码，并创建一个 WPF UserControl 使用同一库中的另一个 UserControl。

我创建了一个全新的项目，它是一个用户控件库。该库称为 MyLib。它在文件 UserControl1.xaml 中包含一个简单的 UserControl

```
<UserControl x:Class="MyLib.UserControl1"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <Grid>
      <TextBlock>Hello</TextBlock>
    </Grid>
</UserControl> 
```

然后我创建了另一个 UserControl（在同一个库/项目中），它将使用 UserControl1 作为它的一部分：

```
<UserControl x:Class="MyLib.UserControl2"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:lib="clr-namespace:MyLib"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
  <Grid>
    <lib:UserControl1 />
  </Grid>
</UserControl> 
```

我收到一条错误消息：

```
xmlns:lib="clr-namespace:MyLib" 
```

说“必须为不属于项目的 XAML 文件指定错误 2 程序集。将其添加到项目后重新打开此 XAML 文件，关闭此文件并使用与之关联的项目重新打开它，或修改 clr 命名空间包括程序集的名称。”

但奇怪的是，当我添加该行时，我会自动完成：

```
<lib:UserControl1 /> 
```

我偶尔也会遇到奇怪的错误：

错误 1 ​​未知的构建错误，“对象引用未设置为对象的实例。” 我的库

我可以在单独的项目（相同的解决方案，添加到 MyLib 的引用）中使用 UserControl1，如下所示：

```
<Window x:Class="MyApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:lib="clr-namespace:MyLib;assembly=MyLib"
        Title="MainWindow" Height="350" Width="525">
  <Grid>
    <lib:UserControl1 />
  </Grid>
</Window> 
```

作为健全性检查，我的 UserControl2 应该工作吗？自从我使用 WPF UserControls 以来已经有一段时间了，所以我想知道我是否在做一些愚蠢的事情。

**更新** 在新机器上全新安装 Windows 和 Studio 时复制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:04:31.477

这需要大量的实验，但我找到了一些东西。如果您从头开始一个项目，我的原始示例将起作用，并完全按照所示输入内容。

当我在 UserControl 中引入一个错误时，事情出轨了，该错误引发了一个在幕后被吞没的异常（使用空字符串而不是空字符串）。似乎为设计时显示编译的 Visual Studio 变得古怪且与源代码不同步，产生与源代码不匹配的看起来怪异的错误。

解决方案是删除导致错误的代码，保存并关闭解决方案。然后重新加载它。这似乎在显示时间和真正的构建过程之间进行了同步。只要在 Visual Studio 的会话期间发生（静默）错误，在重新加载项目之前，事情就会一直令人毛骨悚然。

一个重要技巧：使用 try-catch 保护 UserControls 属性的代码隐藏块，尤其是在尝试诊断此类问题时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T15:22:52.317

尝试

```
xmlns:lib="clr-namespace:MyLib;assembly=MyLib" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T16:11:17.977

通常在这种情况下，我会确保首先构建项目。然后您将在您的工具箱中获得可用的用户控件，然后您可以将其拖放到`UserControl`您要托管的另一个上`UserControl`，并让 Visual Studio 找出名称空间。我没有你的代码，但使用 MyLib 的命名空间它想出了：

```
xmlns:my="clr-namespace:myLib" 
```

# c# - 一对多关系中的奇怪延迟加载

> ID：15729261
> 
> 赞同：1
> 
> 时间：2013-03-31T12:15:11.503
> 
> 标签：c#, .net, entity-framework, ef-code-first, one-to-many

我有一个奇怪的问题，我需要一些帮助。我正在尝试在 EF Code First 中建立一个简单的一对多关系。这个想法是让一个**CardCategory**有多个**CardQuery**实例。

这是我对 CardCategory 的定义：

```
public abstract class CardCategory
{
    [Key, DatabaseGenerated(System.ComponentModel.DataAnnotations.Schema.DatabaseGeneratedOption.Identity)]
    public int Number { get; set; }

    [Required]
    public string Title { get; set; }

    [InverseProperty("Category")]
    public virtual ICollection<CardQuery> DataQueries { get; set; }

    public CardCategory()
    {
        // this ensures that the collection is never null (avoiding NullReferenceException).
        // it's no problem, because the constructor gets called before
        // data mapping occurs.
        DataQueries = new List<CardQuery>();
    }
} 
```

这是 CardQuery：

```
public abstract class CardQuery
{
    [Key, DatabaseGenerated(System.ComponentModel.DataAnnotations.Schema.DatabaseGeneratedOption.Identity)]
    public int Number { get; set; }

    [InverseProperty("DataQueries")]
    public virtual CardCategory Category { get; set; }
} 
```

奇怪的是，当我用我的数据样本（少数类别，关联的查询很少）尝试此操作时，**它只能以一种方式工作**。我可以像这样获取每个查询的父类别：

```
var query = myContext.CardQueries.Find(1);
var category = query.Category; // this works alright 
```

但是当我以相反的方式尝试这个（获取一个类别的所有子查询）时，我得到的只是一个**空集合**。

```
var category = myContext.CardCategories.Find(1);
var queries = category.DataQueries; // here is the problem, I get null or empty collection 
```

也许您想知道 CardCategory 构造函数中的安全线是否与此有关。**不会的，相信我。**我尝试的第一件事是删除它，我得到的只是一个空集合而不是空集合。

具有讽刺意味的是，“DataQueries”导航属性在不同的情况下工作：

```
var query = myContext.CardQueries.Find(1);
var category = query.Category;
var queries = category.DataQueries; // this works, I don't know what's different 
```

似乎 EF 以某种方式无法填充该属性，但我不知道为什么。这以前从未发生在我身上，我有点困惑。我会很感激任何建议。

最后一件事要清除，我的数据上下文配置如下：

```
LazyLoadingEnabled = true;
ProxyCreationEnabled = true;
AutoDetectChangesEnabled = true; 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T21:34:11.193

我不建议使用 Include，它会导致大型基地的性能严重下降。

您的问题是 DataQueries 是一个数组，只需调用 category.DataQueries 不会对存储执行任何查询（与您无法编写 myContext.CardQueries 并自动获取结果的方式相同）。您需要显式调用启动器，例如 ToList() 或 FirstOrDefault()。

所以，不要使用 .Include 试试这个：

```
var category = myContext.CardCategories.Find(1);
var queries = category.DataQueries.ToList(); 
```

这将启动枚举器，您将获得 DataQueries 的结果。

作为旁注：您甚至可以使用 Where 语句过滤您的 category.DataQueries。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-31T11:53:02.770

我有一个类似但不相关的问题。我尝试延迟加载一些嵌套对象，例如访问 Foo.Bar.Baz 我的问题是 Baz 从未延迟加载，即使 Bar 上的 Collection 是虚拟的。

原来问题出在 Bar 的 ctor 上，是私有的。将 ctor 更改为 protected 允许 EF 正确创建 Bar 的代理类并启用 Baz 集合的延迟加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T12:21:32.420

尝试使用[`IQueryable<T>.Include()`](http://msdn.microsoft.com/en-us/library/gg671236%28v=vs.103%29.aspx)：

```
var category = myContext.CardCategories
    .Include(e => e.DataQueries)
    .Find(1); 
```

# html5-audio - 使用范围滑块更改 Web Audio API 中的振荡器类型

> ID：15729266
> 
> 赞同：1
> 
> 时间：2013-03-31T12:15:51.760
> 
> 标签：html5-audio, web-audio-api

我设法使滑块更改为振荡器频率，但不适用于振荡器类型。

这是 jsfiddle 链接 [http://jsfiddle.net/ehsanziya/aKDkf/1/](http://jsfiddle.net/ehsanziya/aKDkf/1/)

这是JavaScript

```
$(document).ready(function () {

var context = new webkitAudioContext();
var osc = context.createOscillator();

//initializing oscillator type to 0 (Sinewave)
osc.type=0;
$('oscType').change(function(){
osc.type = $(this).val();
})

//setting initial OSC frequency to 440.
osc.frequency.value = 440;
//changing  Oscillator's frequency with the range input
$('#oscFreq').change(function(){
osc.frequency.value = $(this).val()
})

$('#onOff').click(function () {
    this.value = this.value === 'ON' ? 'OFF' : 'ON';
});

$('#onOff').click(function () {
    var buttonValue = $('#onOff').val();

    // creating AudioContext

    if (buttonValue === 'OFF') {
        osc.connect(context.destination);
        osc.noteOn(0);

    } else if (buttonValue === 'ON') {
        osc.disconnect(0);
    }

}); 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T13:56:24.357

我没有检查其他可能的问题，但根据网络音频 API 规范，您应该传入一个指示所需类型而不是 int 的字符串，请参阅[弃用说明](http://www.w3.org/TR/webaudio/#DeprecationNotes)

```
//OscillatorNode constants for the .type attribute

//New way  
enum OscillatorType {"sine",
                     "square",   
                     "sawtooth", 
                     "triangle",
                     "custom" } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T20:58:10.013

两件事情：

首先，在第 7 行，您的选择器是错误的。需要`$('#oscType')`。你的缺少`#`.

其次，在第 8 行，您需要更改为`osc.type = parseInt($(this).val(), 10);`，因为输入值始终是字符串并且您需要一个整数。

# python-2.7 - python中的K最近邻

> ID：15729269
> 
> 赞同：1
> 
> 时间：2013-03-31T12:16:21.683
> 
> 标签：python-2.7, machine-learning, knn

我有包含单个维度和类标签的数据。我想在上面运行 KNN。

我的数据是这样的

```
feature       Label
0.70436073      1
0.91564351      1
0.9931506       1
2.26418779      0 
```

我做了下面的事情，结果出错了。我从错误中了解到 train 的数据类型无法识别，但我不知道如何修复它。请帮忙

```
>>> train = [ 0.70436073,  0.91564351,  0.9931506,   2.26418779]
>>> train
[0.70436073, 0.91564351, 0.9931506, 2.26418779]
>>> label = ['1','1','1','0']
>>> from sklearn.neighbors import KNeighborsClassifier
>>> knn = KNeighborsClassifier()
>>> knn.fit(train, label)

Traceback (most recent call last):
  File "<pyshell#26>", line 1, in <module>
    knn.fit(train, label)
  File "C:\Python27\lib\site-packages\sklearn\neighbors\base.py", line 586, in fit
    return self._fit(X)
  File "C:\Python27\lib\site-packages\sklearn\neighbors\base.py", line 126, in _fit
    raise ValueError("data type not understood")
ValueError: data type not understood 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T12:28:50.497

好吧，错误消息很垃圾，你应该给那些人发邮件并要求他们修复它，但无论如何...... [http://scikit-learn.org/stable/modules/generated/sklearn.neighbors.KNeighborsClassifier 上的示例。 html#sklearn.neighbors.KNeighborsClassifier](http://scikit-learn.org/stable/modules/generated/sklearn.neighbors.KNeighborsClassifier.html#sklearn.neighbors.KNeighborsClassifier)非常清楚：fit() 的第一个参数是列表列表，而不是数字列表。此外，第二个参数必须是“整数值数组”，但您已经编写了一个字符串数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-05T08:02:52.713

您首先需要使用`np.array`将您的列表转换为数组。然后重塑您的数组，因为您的数据具有一个特征。遵循以下代码：

```
import numpy as np
train = np.array([[ 0.70436073,  0.91564351,  0.9931506,   2.26418779]])
train_1 = train.reshape(-1, 1)
label = np.array([['1','1','1','0']])
label_1 = label.reshape(-1,1)
from sklearn.neighbors import KNeighborsClassifier
knn = KNeighborsClassifier()
knn.fit(train_1, label_1) 
```

# c++ - G ++的奇怪错误

> ID：15729271
> 
> 赞同：1
> 
> 时间：2013-03-31T12:16:24.770
> 
> 标签：c++, compilation, g++

我收到 g++ 的以下错误：

```
wormAlgo.cpp: In function ‘void svm(cv::Mat&, cv::Mat&, cv::Mat&, cv::Mat&)’:
wormAlgo.cpp:146:8: error: expected unqualified-id before numeric constant
wormAlgo.cpp:146:8: error: expected ‘;’ before numeric constant 
```

我的代码是这样的：

```
void svm(cv::Mat& trainingData, cv::Mat& trainingClasses, cv::Mat& testData, cv::Mat& testClasses) 
{
    CvSVMParams param = CvSVMParams();

    param.svm_type = CvSVM::C_SVC;
    param.kernel_type = CvSVM::RBF; //CvSVM::RBF, CvSVM::LINEAR ...
    param.degree = 0; // for poly
    param.gamma = 20; // for poly/rbf/sigmoid
    param.coef0 = 0; // for poly/sigmoid
    param.C = 7.0; // for CV_SVM_C_SVC, CV_SVM_EPS_SVR and CV_SVM_NU_SVR
    param.nu = 0.0; // for CV_SVM_NU_SVC, CV_SVM_ONE_CLASS, and CV_SVM_NU_SVR
    param.p = 0.0; // for CV_SVM_EPS_SVR
    param.class_weights = NULL; // for CV_SVM_C_SVC
    param.term_crit.type = CV_TERMCRIT_ITER +CV_TERMCRIT_EPS;
    param.term_crit.max_iter = 1000;
    param.term_crit.epsilon = 1e-6; 
```

第 146 行的代码是`param.C = 7.0; // for CV_SVM_C_SVC, CV_SVM_EPS_SVR and CV_SVM_NU_SVR`

你能帮我么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T12:38:20.807

您可能对`C`. 看代码：

```
#define C 42

class Foo
{

};

void f()
{
    Foo f;
    f.C = 7;
} 
```

预处理后，该行将`f.C = 7`更改为`f.42 = 7`，因此会出错。

PS：clangs 输出看起来更漂亮

```
/home/soon/Src/C++/main/main.cpp:14:7: error: expected unqualified-id
    f.C = 7;
      ^
/home/soon/Src/C++/main/main.cpp:4:11: note: expanded from macro 'C'
#define C 42
          ^ 
```

# gwt - GWT 教程 stockwatcher.nocache.js 文件名

> ID：15729274
> 
> 赞同：0
> 
> 时间：2013-03-31T12:17:06.340
> 
> 标签：gwt

javascript“stockwatcher.nocache.js”文件名的名称在哪里定义？例如，如何将其更改为“stockwatcher1.nocache.js”？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T15:03:44.227

已编译文件夹 ( `stockwatcher/`) 和已编译 js 文件 ( `stockwatcher.nocache.js`) 的名称基于模块文件的包和名称（因此`com/acme/project/Project.gwt.xml`将`com.acme.project.Project.cache.js`在`com.acme.project.Project/`目录中创建），或基于该模块文件中标记的`rename-to`属性。`<module>`例如，如果这是您的模块文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<module rename-to='stockwatcher'>
  <!-- Inherit the core Web Toolkit stuff.                        -->
  <inherits name='com.google.gwt.user.User'/>
... 
```

然后输出文件将在`stockwatcher/`目录中，主脚本将是`stockwatcher.nocache.js`. 如果您将其更改为

```
<?xml version="1.0" encoding="UTF-8"?>
<module rename-to='stockwatcher1'>
  <!-- Inherit the core Web Toolkit stuff.                        -->
  <inherits name='com.google.gwt.user.User'/>
... 
```

然后重新编译或启动开发模式，您现在将拥有一个`stockwatcher1/`目录和一个`stockwatcher1.nocache.js`文件。

# java - 在方法或构造之外实例化一个对象？

> ID：15729277
> 
> 赞同：3
> 
> 时间：2013-03-31T12:17:15.847
> 
> 标签：java, oop

我对此感到困惑：

```
class ClassA {

   ClassB car = new ClassB();

   ClassA(){
   }

   someMethod(){
   }

}

ClassC{

   ClassC(){    
   }

   someMethod(){
        ClassA spaceship = new ClassA();
   }

} 
```

*   B 类不在构造函数或方法中实例化。它也没有被声明为静态的。那么，究竟什么时候 classB 被实例化了呢？

*   'car' 实例能存活多久？换句话说，如果（A 类的）“宇宙飞船”实例被垃圾收集，那么（B 类的）“汽车”实例会发生什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T12:33:45.367

> 那么，究竟什么时候 classB 被实例化了呢？

我认为这`ClassB`是在初始化时`ClassA`初始化的。首先更准确的是分配给内存的对象，然后初始化它的字段（所以你的汽车变量），然后被称为构造函数。

> 'car' 实例能存活多久？

只要`ClassA`生活一般。但是，如果您明确地将您的汽车分配给它，`NULL`那么如果它的“父母”还活着，那么它也会被释放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T13:38:05.407

这是一个例子：

```
class A {
    B objectB = new B();

    public A() {
        System.out.println("In A Const");
    }
}

class B {

    public B() {
        System.out.println("In B const");
    }
}

class C {

    C() {}
    public void someMethod() {

        A objectA = new A();

        System.out.println("In method C");
    }
    public static void main(String args[]) {
        C objectC = new C();
        objectC.someMethod();
    }
} 
```

o/p: In B const In A Const In 方法 C

每当创建一个对象时，首先调用构造函数，并且在实现构造函数中的代码之前，初始化该特定类中的变量，以便首先执行 B 类的构造函数，然后执行 A 类的构造函数

谢谢

# gtk - 更改 GtkScale 字体/对齐/颜色

> ID：15729278
> 
> 赞同：1
> 
> 时间：2013-03-31T12:17:20.560
> 
> 标签：gtk, gdk, pango

有没有一种简单的方法来更改 GtkScale 小部件的值文本的字体、对齐和颜色？例如，我想要一个红色和粗体的数字，而不是标准的黑色数字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T13:43:29.497

理想情况下，您会在主题中设置这些属性。但是如果您需要您的应用程序*覆盖*主题，您可以调用`gtk_widget_modify_font`使文本变为粗体并`gtk_widget_modify_fg`使其变为红色。使用 PyGTK 进行演示：

```
import gtk, pango

w = gtk.HScale()

# bold: get existing widget's font description and set weight to bold
fdesc = w.get_pango_context().get_font_description()
fdesc.set_weight(pango.WEIGHT_BOLD)
w.modify_font(fdesc)

# red
w.modify_fg(gtk.STATE_NORMAL, gtk.gdk.Color('red'))

# show it
win = gtk.Window()
win.add(w)
win.show_all()
gtk.main() 
```

...结果是：

![截屏](https://i.stack.imgur.com/ObJe4.png)

# java - GWT Presenter 类错误

> ID：15729279
> 
> 赞同：-1
> 
> 时间：2013-03-31T12:17:32.173
> 
> 标签：java

我在 DTO 中有 Set，我想在 GWT 的 Presenter 类中获取该集合的所有值，如何获取它

```
public List<MenuDTO> getMenuDetails() {
        List<MenuDTO> menu = new ArrayList<MenuDTO>();
        MenuDTO menuValue = new MenuDTO();
        SubMenuDTO subMenuValue = new SubMenuDTO();
        SubMenuDTO subMenuValue1 = new SubMenuDTO();
        menuValue.setMenuHeading("Home");
        Set<SubMenuDTO> setvalue = new HashSet<SubMenuDTO>();
        subMenuValue.setMenuHeading("file");
        subMenuValue1.setMenuHeading("Copy");
        setvalue.add(subMenuValue);
        setvalue.add(subMenuValue1);
        menuValue.setSubMenuItems(setvalue);
        menu.add(menuValue);
        return menu;
    } 
```

输出：-

```
[com.dupont.rsms.commons.dto.SubMenuDTO@2dafd034, com.dupont.rsms.commons.dto.SubMenuDTO@718e1d5a] 
```

我无法转换为字符串，请帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T12:22:03.120

您正在打印 SubMenuDTO 对象的值，但它们没有实现`toString()`方法，因此改为使用默认`Object.toString()`方法。这就是输出看起来如此的原因。

考虑编写一个`toString()`方法或寻找另一种方法来检索您希望打印的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T12:28:26.170

通常，如果您正在打印一个对象，`toString()`则会调用它的方法。如果你不重写这个方法，它的超类`toString()`方法将被调用（在大多数情况下，它是对象类的`toString()`方法）。如果你看一下 Object 类的 toString() 方法的实现，它看起来像`getClass().getName() + '@' + Integer.toHexString(hashCode())`. 这就是为什么你会得到这样的输出。

# google-apps-script - 在脚本数据库中查询 DISTINCT

> ID：15729281
> 
> 赞同：0
> 
> 时间：2013-03-31T12:17:37.817
> 
> 标签：google-apps-script

是否可以获取类似于[DISTINCT](http://www.w3schools.com/sql/sql_distinct.asp)的记录。我创建了一个包含所有员工姓名和经理姓名的 scriptDB 表单电子表格。我需要获取所有经理的姓名。但事情是经理列确实有重复，因为多个 emp 有相同的经理。

我怎么得到这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T20:41:34.253

没有从 ScriptDB 中提取部分对象的内置函数，但这里有一个函数，它将返回一组唯一的管理器名称。（我已经对您的数据结构进行了猜测，根据需要进行调整。）

```
function distinctManagers() {
  var db = ScriptDb.getMyDb();
  // Get employeers sorted by manager.
  var results = db.query({type: 'employee'}).sortBy('manager', db.LEXICAL);
  var distinctManagers = [];
  while (results.hasNext()) {
    var item = results.next();
    if (distinctManagers.length == 0 || item.manager !== distinctManagers[distinctManagers.length-1]) {
      distinctManagers.push(item.manager);
    }
  }
  debugger;
  return distinctManagers;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:50:58.513

尽管这个问题是关于使用脚本的，但我将添加第二个完全避免使用脚本的答案。[您可以使用内置的电子表格功能](https://support.google.com/drive/bin/static.py?hl=en&topic=25273&page=table.cs)提取电子表格中的信息。

假设您的电子表格由 A 列中的员工姓名和 B 列中的经理姓名组成，以下是一些将生成唯一经理姓名列表的函数：

*   `=unique(B2:B)`生成一列名称，按照它们第一次出现的顺序，不包括列标题。使用范围`B:B`包括标题。请注意，可能会出现空白名称，因为范围表达式包含 B 列中的所有内容。

*   `=sort(unique(B2:B))`如上，排序。

*   `=query(A:B, ʺselect count(A) where A != '' pivot Bʺ,true)`显示每个经理的员工人数表，已排序。

*   `=transpose(query(A:B, ʺselect count(A) where A != '' pivot Bʺ,true))`与上一个相同，只是经理名称出现在第一列。

*   `=filter(transpose(query(A:B, ʺselect count(A) where A != '' pivot Bʺ,true)),{true,false})`进一步细化查询以*仅*包括经理姓名。看起来就像这个`sort(unique())`例子。一个区别：这不会产生*空白*的经理姓名；`unique()`做。

使用上述公式之一的好处是，当您的工作表上的信息发生变化时，它们会自动重新计算。

# c++ - glutSpecialFunc 只捕获一些键

> ID：15729282
> 
> 赞同：2
> 
> 时间：2013-03-31T12:17:54.297
> 
> 标签：c++, opengl, user-input, freeglut

我刚开始使用opengl，使用freeglut。我正在使用回调来获取用户输入：

```
glutSpecialFunc(specialKeys);   //defined: void specialKeys( int key, int x, int y ) 
```

现在，它只捕获键盘的控制键 - `Ctrl`、`Alt`、`F1`- `F12`、箭头等。甚至`Enter`被忽略。
我想让我的代码至少在 windows 和 linux 上是跨平台的。所以我想尽可能避免使用winapi。另一方面，我想避免太多的库，因为我总是无法让它们工作。所以...

1.  GLUT 是否有其他回调来捕获其余的键盘输入？
2.  如果不是，那么获取所有键盘输入的最简单的跨平台解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T12:28:49.057

这就是[`glutSpecialFunc`](http://www.opengl.org/resources/libraries/glut/spec3/node54.html)处理程序应该处理的事情。

你想要[`glutKeyboardFunc`](http://www.opengl.org/resources/libraries/glut/spec3/node49.html#SECTION00084000000000000000)。

# c - 程序不等待第二次读取

> ID：15729288
> 
> 赞同：0
> 
> 时间：2013-03-31T12:18:10.910
> 
> 标签：c, fgets, getchar

这是一个更大程序的一部分，但让我抓狂的是程序不会等待从字符串 s 中的标准输入读取某些内容（它只是将 null 放入字符串 s），但如果我把首先读取字符串 s 然后我读取字符 c 程序工作得很好。问题是我需要按这个特定的顺序读取数据。我该如何解决？

```
char s[100],c;
printf("enter character:\n");
c=getchar();
printf("enter string text:\n");
fgets(s,101,stdin);   
uint8_t s_len = strlen(s) - 1;        
s[s_len] = '\0'; 
printf("i have read %s\n",s); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T12:23:02.987

当您为第一个字符按下回车键时，实际的换行符仍留在输入缓冲区中。然后调用会读取此换行符`fgets`。

您可以通过几种不同的方法来解决这个问题。首先是添加一个虚拟`getchar`调用，以获取换行符。这有一个缺点，如果你在 Windows 上，换行符实际上是两个字符。

另一种解决方案是也使用`fgets`第一个字符，然后使用 eg`sscanf`提取字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T12:22:50.987

采用

```
c = getchar();
int eatMe;
do 
{
   eatMe = getchar();
} while (eatMe != '\n' && eatMe != EOF); 
```

# java - 易失性数组列表未按预期运行

> ID：15729292
> 
> 赞同：1
> 
> 时间：2013-03-31T12:18:42.827
> 
> 标签：java, multithreading, synchronized, volatile, concurrentmodification

我正在编写一个多线程平台游戏。一个线程完成绘画工作，另一个线程运行游戏逻辑。我有一个数组列表，两个线程都需要同时访问。我在我的绘制线程中迭代数组列表的所有元素，在我的另一个线程中，我有时会删除或添加元素到数组列表中。我得到一个并发修改异常，但我不明白为什么，因为 volatile 关键字一次只允许一个线程访问一个变量。

这是我的问题的一个例子

我的数组列表

```
private volatile ArrayList<Entity> entities = new ArrayList<Entity>(); 
```

我的绘画密码

```
 for(Entity entity : entities)
    {
        if(entity!=null && entity.getX()>=xs-Block.WIDTH && entity.getX()<=xs+Main.WIDTH)
            g.drawImage(entity.getImage(), entity.getX()-getXs(), entity.getY(), entity.getWidth(), entity.getHeight(), null);
    } 
```

我的删除代码

```
public void removeEntity(Entity e)
{
    entities.remove(e);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T12:23:13.083

不，它没有。`volatile`关键字仅保证您对声明的变量的任何修改都`volatile`将被所有线程看到。

例如，您需要正确同步您的代码或使用`CopyOnWriteArrayList`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T12:22:53.800

而不是使用`volatile`使用`Collections.synchronizedList(list);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T12:27:47.283

您可以使用 vector ，它是同步的。

[向量](http://docs.oracle.com/javase/6/docs/api/java/util/Vector.html)

> 从 Java 2 平台 v1.2 开始，该类被改进为实现 List 接口，使其成为 Java Collections Framework 的成员。与新的集合实现不同，Vector 是同步的。

# java - 在 DJ Native Web 浏览器中操作链接

> ID：15729295
> 
> 赞同：1
> 
> 时间：2013-03-31T12:19:19.840
> 
> 标签：java, djnativeswing

```
 public static JComponent createContent() {   
    JPanel contentPane = new JPanel(new BorderLayout());   
    JPanel webBrowserPanel = new JPanel(new BorderLayout());   
    webBrowserPanel.setBorder(BorderFactory.createTitledBorder("Native Web Browser component"));   
    final JWebBrowser webBrowser = new JWebBrowser();   
    webBrowser.navigate("http://www.google.com");   
    webBrowserPanel.add(webBrowser, BorderLayout.CENTER);   
    contentPane.add(webBrowserPanel, BorderLayout.CENTER);   
    // Create an additional bar allowing to show/hide the menu bar of the web browser.   
    JPanel buttonPanel = new JPanel(new FlowLayout(FlowLayout.CENTER, 4, 4));   
    JCheckBox menuBarCheckBox = new JCheckBox("Menu Bar", webBrowser.isMenuBarVisible());   
    menuBarCheckBox.addItemListener(new ItemListener() {   
      public void itemStateChanged(ItemEvent e) {   
        webBrowser.setMenuBarVisible(e.getStateChange() == ItemEvent.SELECTED);   
      }   
    });   
    webBrowser.addWebBrowserListener(new WebBrowserListener() {
} 
```

// 我正在使用 DJ Native Web 浏览器。我想使用它来操作链接。我可以使用这个 dj 原生网络浏览器来实现这件事吗？例如：即使点击任何链接，我也希望它只打开 google.com。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-22T22:17:17.983

您可以通过 JWebBrowser 执行的 Javascript 操作 DOM 中的链接。

# java - 调整 Java JFrame 的大小会改变图形组件的颜色

> ID：15729297
> 
> 赞同：1
> 
> 时间：2013-03-31T12:19:40.873
> 
> 标签：java

我刚开始使用 Java Graphics，我写了两个类：

```
/*Paintr.java file*/

import java.awt.Graphics;
import java.awt.Color;
import javax.swing.JPanel;
import java.util.Random;

public class Paintr extends JPanel {
  public void paintComponent(Graphics g){
    super.paintComponent(g);
    this.setBackground(Color.WHITE);
    Random gen = new Random();
    g.setColor(new Color(gen.nextInt(256),gen.nextInt(256),gen.nextInt(256)));
    g.fillRect(15, 25, 100, 20);
    g.drawString("Current color: "+ g.getColor(),130,65);
  }
} 
```

主要课程：

```
import javax.swing.JFrame;
public class App {
  public static void main(String[] args) {
    JFrame frame = new JFrame("Drawing stuff.");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    Paintr board = new Paintr();
    frame.add(board);
    frame.setSize(400, 300);
    frame.setResizable(true);
    frame.setVisible(true);

  }
} 
```

现在，如果我编译并运行它，它就可以工作。它显示我的随机颜色。我不明白为什么在我调整 Frame 大小后它会改变显示的颜色。为什么会想起这段代码：

```
g.setColor(new Color(gen.nextInt(256),gen.nextInt(256),gen.nextInt(256)));
g.fillRect(15, 25, 100, 20);
g.drawString("Current color: "+ g.getColor(),130,65); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T12:22:44.517

`paintComponent()`每次 Frame 调整大小时都会调用该函数。这是为了允许开发人员调整其他东西的大小以适应新的大小！

如果您不希望发生这种情况，请将您的颜色定义为变量

```
Color color = new Color(gen.nextInt(256),gen.nextInt(256),gen.nextInt(256)); 
```

然后在你的`paintComponent()`函数中只画那种颜色。

```
public void paintComponent(Graphics g){
    super.paintComponent(g);
    this.setBackground(Color.WHITE);
    g.setColor(color);
    g.fillRect(15, 25, 100, 20);
    g.drawString("Current color: "+ g.getColor(),130,65);
} 
```

# wcf - 在 phonegap 应用程序中使用 WCF 服务时出现问题

> ID：15729298
> 
> 赞同：1
> 
> 时间：2013-03-31T12:19:45.283
> 
> 标签：wcf, cordova, iis-7

首先，我在我的 asp.net 应用程序中使用了 WCF 服务，一切正常。但它在我的 phonegap 应用程序中不起作用。这是我的详细错误信息。（前两个是警告，最后一个是错误。） 警告 1：不支持 Viewport target-densitydpi。index.html:7 警告 2：资源解释为脚本，但使用 MIME 类型 text/html 传输：“http://:64514/Service1.svc?wsdl/MyFunction&callback=jQuery1900010203775251284242_1364550121569&Count1&_=1364550121570”。
错误 1：未捕获 SyntaxError：意外令牌 < Service1.svc:1

这是我的代码片段。我的 WCF 代码：

```
 [OperationContract]
    [WebInvoke(Method = "POST",
    BodyStyle = WebMessageBodyStyle.Wrapped,
    ResponseFormat = WebMessageFormat.Json)]
    string MyFunction(string value);

    public string MyFunction(string Count)
    {
        return "The Count you passed in is: " + Count.ToString();
    } 
```

我的 HTML 代码：

```
 <script type="text/javascript">

    var counter = 0;
    var varType;
    var varUrl;
    var varData;
    var varContentType;
    var varDataType;
    var varProcessData;

    function CallMyService() {
    counter++;

    varType = "POST";
    varUrl = "http://<domain>:64514/Service1.svc?wsdl/MyFunction";
    varData = "Count" + counter;
    varContentType = "application/javascript; charset=utf-8";
    varDataType = "jsonp";
    varProcessData = true;

    CallWcfService();
    return true;
    }

    function CallWcfService() {
    $.ajax({
    type: varType,
    url: varUrl,
    data: varData,
    contentType: varContentType,
    dataType: varDataType,
    crossDomain: true,
    processdata: varProcessData,
    success: function (msg) {
    ServiceSucceeded(msg);
    },
    error: ServiceFailed
    });
    }

    function ServiceFailed(result) {
    Log('Service call failed: ' + result.status + '  ' + result.statusText);
    return 0;
    }

    function ServiceSucceeded(result) {
    resultObject = result.MyFunctionResult;
    Log("Success: " + resultObject);
    }

    function Log(msg) {
    $("#logdiv").append(msg + "<br />");
    }
    </script>

    </head>
    <body>
    <input id="Button1" type="button" value="Execute" onclick="CallMyService();" />

    <div id="logdiv"></div> 
    </body> 
```

我的 WCF 网络配置文件：

```
 <services>
    <service behaviorConfiguration="Service.Service1Behavior" name="WcfService1.Service1">
    <endpoint address="" binding="wsHttpBinding" contract="WcfService1.IService1">
    <identity>
    <dns value="http://<domain>:64514/" />
    </identity>
    </endpoint>
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
    </service>
    </services> 
```

# c# - FlowDocument 中的段落边框显得模糊，SnapsToDevicePixels 和 UseLayoutRounding 都不起作用

> ID：15729299
> 
> 赞同：2
> 
> 时间：2013-03-31T12:20:04.867
> 
> 标签：c#, .net, wpf, xaml

当我使用Property 在in内的元素`BorderThickness`上绘制边框时，有时边框看起来很**模糊**。`Paragraph``FlowDocument``FlowDocumentScrollViewer`

 **这是我的代码片段。

```
<Grid>
    <FlowDocumentScrollViewer>
        <FlowDocument>
            <Paragraph BorderBrush="Black" BorderThickness="0.5">This is a paragraph</Paragraph>
            <Paragraph BorderBrush="Black" BorderThickness="0.5">This is a paragraph</Paragraph>
            <Paragraph BorderBrush="Black" BorderThickness="0.5">This is a paragraph</Paragraph>
        </FlowDocument>
    </FlowDocumentScrollViewer>
</Grid> 
```

我试图将`SnapsToDevicePixels="True"`and`UseLayoutRounding="True"`放在`Grid`or上`FlowDocumentScrollViewer`（因为它`Paragraph`本身不支持这些属性），但没有任何反应。

这个问题还有问题吗？如果没有，我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T17:58:23.830

```
<Grid RenderOptions.EdgeMode="Aliased">
        <FlowDocumentScrollViewer>
            <FlowDocument>
                <Paragraph Margin="2" BorderBrush="Black" BorderThickness=".5">This is a paragraph</Paragraph>
                <Paragraph Margin="2" BorderBrush="Black" BorderThickness=".5">This is a paragraph</Paragraph>
                <Paragraph Margin="2" BorderBrush="Black" BorderThickness=".5">This is a paragraph</Paragraph>
            </FlowDocument>
        </FlowDocumentScrollViewer>
    </Grid> 
```**

# c# - 防止重新排序第一列

> ID：15729301
> 
> 赞同：4
> 
> 时间：2013-03-31T12:20:14.617
> 
> 标签：c#, wpf, listview, gridview

我有一个列表视图，其中包含一个带有网格列的网格视图，我想重新排序除第一列之外的所有列。我怎样才能做到这一点？我也想保存新的列位置。

我的列表视图代码是：

```
<Style x:Key="myListViewStyle" TargetType="{x:Type ListView}"  x:Shared="False">
        <Setter Property="BorderBrush" Value="RoyalBlue" />
        <Setter Property="Foreground"  Value="Teal" />
        <Setter Property="FontSize" Value="14" />
        <Setter Property="Margin" Value="20, 60, 20, 50" />
        <Setter Property="BorderThickness" Value="4, 4, 4, 4" />
        <Setter Property="ListView.View">
            <Setter.Value>
                <GridView AllowsColumnReorder="True" >
                    <GridView.Columns>
                        <GridViewColumn Header="A/A" Width="30" DisplayMemberBinding="{Binding AA}"></GridViewColumn>
                        <GridViewColumn Header="Price" Width="350" DisplayMemberBinding="{Binding Price}" >
                        </GridViewColumn>
                        <GridViewColumn Header="Shop" Width="200" DisplayMemberBinding="{Binding Shop}" >
                        </GridViewColumn>
                    </GridView.Columns>
                </GridView>
            </Setter.Value>
        </Setter>
    </Style> 
```

我也用这样的代码创建列表视图：

```
 ListView l1 = new ListView();
 l1.Style = Resources["myListViewStyle"] as Style; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-04T16:30:07.820

如果它只是您想要保留的第一列，请尝试以下操作：

**XAML：**

```
<GridViewColumnHeader x:Name="FirstColumn" MouseMove="PreventDrag"> 
```

**后面的代码：**

```
public MyWindow()
{
    InitializeComponent();
    (MyListview.View as GridView).Columns.CollectionChanged += ColumnsReordered;
}

private void PreventDrag(object sender, MouseEventArgs e)
{
    if (e.LeftButton == MouseButtonState.Pressed)
        e.Handled = true;
}

private void ColumnsReordered(object sender, NotifyCollectionChangedEventArgs e)
{
    if (e.Action == NotifyCollectionChangedAction.Move)
    {
        var columns = sender as GridViewColumnCollection;
        if (columns != null)
            Dispatcher.BeginInvoke((Action)(() => columns.Move(columns.IndexOf(FirstColumn.Column), 0)));
    }
} 
```

# java - 如何使用现有对象作为构造函数参数在 Spring 中实例化 bean

> ID：15729306
> 
> 赞同：1
> 
> 时间：2013-03-31T12:20:44.773
> 
> 标签：java, spring, interface, javabeans

我有一个现有的对象，实际上是一个套接字，并且我希望该套接字成为我创建的 bean 的实例变量，即用户会话。

但是，如果我从 applicationContext 获取用户会话作为 bean，我如何指定我希望使用现有套接字创建它的“套接字”属性？

当然，我可以在用户会话 bean 上设置一个 setSocket 方法，并在创建 userSession bean 后调用 setSocket(socket)。但这弄乱了我的界面，因为实际的类是“UserSessionImpl”，它实现了“UserSession”。套接字是一个实现细节，所以我不想让“setSocket”方法成为 UserSession 接口的一部分。

我觉得我错过了一些东西..非常感谢您的帮助！

编辑：发布代码的相关部分。

所以我有一段代码返回这样的套接字：

```
while (true) {
    Socket socket = server.accept();
    UserSession userSession = (UserSession)applicationContext.getBean("userSession");

    // Without spring I would do this
    //UserSession userSession = new UserSessionImpl(socket);
    executorService.execute(userSession);
} 
```

我的 spring applicationContext 没什么令人兴奋的 - 我只有

```
<bean id="userSession" class="server.UserSessionImpl" scope="prototype"></bean> 
```

EDIT2：downvoter 可以解释 downvote 吗？好像我问了一个合理的，有用的问题..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T12:37:14.427

嗯，在这里回答我自己的问题，但我认为我可以：

*   定义一个套接字 bean，以便每个用户会话都使用自己的套接字 bean 创建
*   然后我可以设置socket bean的socket属性

这样，我不必在 UserSession 的接口中创建一个方法，该方法说“setSocket”是一个实现细节。相反，我有一个 Socket 接口，它有一个更有意义的方法“setSocket”。我认为这应该有效。我会回帖的。。

编辑：不，这不起作用，因为我仍然必须在 UserSession 接口中有一个“getSocket”方法，用于获取套接字 bean，以便我可以设置它的套接字。唔。

# three.js - EffectComposer 仅在屏幕上绘制纹理

> ID：15729307
> 
> 赞同：0
> 
> 时间：2013-03-31T12:21:11.513
> 
> 标签：three.js

我正在尝试将 FXAA 与效果器配合使用，但无法使其正常工作。

这是场景，它是如何由 WebGLRenderer 渲染的：http: [//imageshack.us/a/img515/143/rendererscene.png](http://imageshack.us/a/img515/143/rendererscene.png)

这是使用 EffectComposer 的相同场景：http: [//imageshack.us/a/img849/5336/composerscene.png](http://imageshack.us/a/img849/5336/composerscene.png)

它只显示纹理。

我的代码结构如下：

```
renderer = new THREE.WebGLRenderer({ antialias : true });
renderer.shadowMapEnabled = true;
renderer.shadowMapSoft = true;
renderer.shadowCameraNear = 1;
renderer.shadowCameraFar = camera.far;
renderer.shadowCameraFov = 40;
renderer.shadowMapBias = 0.0039;
renderer.shadowMapDarkness = 0.6;
renderer.shadowMapWidth = graphics_options.shadow_res;
renderer.shadowMapHeight = graphics_options.shadow_res; 
renderer.setClearColorHex( cwe_settings.bg_color, cwe_settings.bg_alpha);
document.getElementById("blackboard").appendChild(renderer.domElement);
renderer.physicallyBasedShading = true;

    (...)

composer = new THREE.EffectComposer(renderer);
composer.addPass(new THREE.RenderPass(scene, camera));
effectFXAA = new THREE.ShaderPass(THREE.FXAAShader);
effectFXAA.uniforms['resolution'].value.set(1 / (window.innerWidth), 1 / (window.innerHeight));
effectFXAA.renderToScreen = true;
composer.addPass(effectFXAA); 
```

动画循环：

```
(...)
composer.render(scene, camera); 
```

有没有人有同样的问题？我在互联网上没有找到类似的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T05:11:44.887

我遇到了同样的问题，但最终我得到了它的工作。我正在使用我在网上找到的一个 ssao 示例中的 js 文件......在我使用了我的三个版本 r58 附带的 js 文件后它工作了。

此示例应包含以下文件：

```
<!-- THREE Shaders -->
<script type="text/javascript" src="/js/shaders/CopyShader.js"></script>
<script type="text/javascript" src="/js/shaders/ConvolutionShader.js"></script>
<script type="text/javascript" src="/js/shaders/FXAAShader.js"></script>
<script type="text/javascript" src="/js/shaders/SSAOShader.js"></script>
<!-- THREE Post Processing -->
<script type="text/javascript" src="/js/postprocessing/EffectComposer.js"></script>
<script type="text/javascript" src="/js/postprocessing/RenderPass.js"></script>
<script type="text/javascript" src="/js/postprocessing/MaskPass.js"></script>
<script type="text/javascript" src="/js/postprocessing/ShaderPass.js"></script>
<script type="text/javascript" src="/js/postprocessing/BloomPass.js"></script> 
```

这是我的 init 函数内部：

```
self.height = window.innerHeight;
self.width = window.innerWidth;
self.scale = 0.75;

var renderScene = new THREE.RenderPass( self.scene, self.camera );

var effectBloom = new THREE.BloomPass( 2 );

var effectFXAA = new THREE.ShaderPass( THREE.FXAAShader );
effectFXAA.uniforms['resolution'].value.set( 1 / self.width, 1 / self.height );
effectFXAA.renderToScreen = true;

var parameters = { minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBFormat, stencilBuffer: false };
var renderTarget = new THREE.WebGLRenderTarget( self.width, self.height, parameters );

self.composer = new THREE.EffectComposer( self.renderer, renderTarget );
self.composer.addPass( renderScene );
self.composer.addPass( effectBloom );
self.composer.addPass( effectFXAA ); 
```

这是我的动画功能内部：

```
requestAnimationFrame( self.animate );
self.Tick();
self.renderer.clear();
self.composer.render( self.fpsCounter.dt ); 
```

我希望这有帮助。

# c# - 从 c# 只更新 sql 中的一个单元格

> ID：15729317
> 
> 赞同：1
> 
> 时间：2013-03-31T12:22:26.487
> 
> 标签：c#, sql, sql-update

我在 sql 中有一个包含许多字段的表。

我只想更新一个名为“ready”的字段，其 id 取自组合框。我使用了以下代码：

```
string query = "Update order SET ready='true' Where id=" + int.Parse(idComboBox.SelectedItem.ToString()) + ""; 
```

它给出错误说：

> *列名空*

我应该怎么做才能保持其他记录的值相同并且只更改字段的值`ready`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T12:24:06.647

`ORDER`是保留字。改为使用`[ORDER]`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T12:26:02.810

`ORDER`是*[`reserved word`](http://msdn.microsoft.com/en-us/library/ms189822.aspx)*SQL Server 上的一个。您应该将它与方括号一起使用`[]`

> 保留关键字是 SQL Server 用来解析和理解 Transact-SQL 语句和批处理的 Transact-SQL 语言语法的一部分。

```
string query = "Update [order] SET ready='true' Where id=" + int.Parse(idComboBox.SelectedItem.ToString()) + ""; 
```

但更重要的是，您的查询对[*SQL 注入*](http://en.wikipedia.org/wiki/SQL_injection)攻击是开放的。您应该始终使用*[参数化查询](http://www.codinghorror.com/blog/2005/04/give-me-parameterized-sql-or-give-me-death.html)*。

```
string query = "Update [order] SET ready='true' Where id = @id";

SqlCommand myCommand = new SqlCommand(query, cnn);
myCommand.Parameters.AddWithValue("@id", int.Parse(idComboBox.SelectedItem.ToString())); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T12:24:30.243

用这个：

```
string query = "Update [order] SET ready='true' Where id=" + int.Parse(idComboBox.SelectedItem.ToString()) + ""; 
```

# iphone - 一个视图中的两个 NSURLConnections

> ID：15729323
> 
> 赞同：0
> 
> 时间：2013-03-31T12:23:11.983
> 
> 标签：iphone, ios, nsurlconnection

我在一个视图中有两个 NSURLConnections。一个用于集合视图，一个用于表视图。我的数据库中有不同的表，我通过我的应用程序中的 JSON 获取数据。所以我做了两个异步的NSURLConnection，我所有的图片都是用SDWebImage下载的。所以我有两个不同数据的数组。在我的应用程序中，之前使用一个 NSURLConnection 和一个 Array 都可以完美运行。但是现在我遇到的问题是，如果 TableView 使用蜂窝网络加载数据，它不会向我显示数据。

我收到这条消息

```
purgeIdleCellConnections: found one to purge conn = 0x1f8bed80 
```

为什么我会收到此消息？一个视图中有两个 NSURLConnections 太多了吗？

谢谢。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T13:19:12.090

这不是您的应用程序的问题。这是一条消息，是 iOS 6.0 运行的标准部分。只需忽略此消息。

请参阅[技术问答 QA1774：purgeIdleCellConnections 日志消息](https://developer.apple.com/library/ios/#qa/qa1774/_index.html#//apple_ref/doc/uid/DTS40012992)。

# django - Userena设置密码激活后自动登录

> ID：15729326
> 
> 赞同：0
> 
> 时间：2013-03-31T12:23:16.397
> 
> 标签：django, django-users

我的用户将能够为他们的客户创建用户，这将向他们发送一封激活电子邮件。

使用 userena，即使没有设置密码，激活链接也会自动登录。

我已经到了他们登录的地方。现在他们需要设置密码，而且似乎他们需要知道他们的旧密码才能做到这一点。

我希望客户端用户在激活过程中被提示设置密码。

从哪里开始最好的地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-19T13:58:42.173

Userena[没有邀请](https://github.com/bread-and-pepper/django-userena/issues/126)功能，您必须[覆盖视图](http://blog.yourlabs.org/post/19777151073/how-to-override-a-view-from-an-external-django-app)才能更改密码设置的行为。我创建了一个应用程序来扩展 userena，我在我的项目 urls.py 中覆盖了 userena 的激活视图。

```
 url(r'^accounts/activate/(?P<activation_key>\w+)/$', create_userpass), 
```

其中我的自定义视图“create_userpass”是用户在成功激活帐户之前更改密码和用户名（无需事先了解任何一个）的表单。

我还使用了一个仅包含一个 EmailField 的自定义邀请表单，其中会自动生成一个临时用户名和密码（任何人都看不到），这些用户名和密码在激活期间被新用户替换。邀请表单的 save 方法最后有这个，它创建了新的 userena 用户。

```
 new_user = UserenaSignup.objects.create_user(username,
                                                 email,
                                                 password,
                                                 not userena_settings.USERENA_ACTIVATION_REQUIRED,
                                                 userena_settings.USERENA_ACTIVATION_REQUIRED)
    return new_user 
```

我会尽快将应用程序放在 github 上并在此处分享链接。

# android - android google map 无法获取连接工厂客户端

> ID：15729330
> 
> 赞同：0
> 
> 时间：2013-03-31T12:23:47.707
> 
> 标签：android, google-maps

在这里，我们从问题中删除了脂肪，现在我将添加您想要的任何内容，请快点

![在此处输入图像描述](https://i.stack.imgur.com/62urV.jpg)

![在此处输入图像描述](https://i.stack.imgur.com/vicum.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T12:29:35.713

几个问题：

**1.**在这些行中更改包名称：

```
 <permission
    android:name="your.application.package.permission.MAPS_RECEIVE"
    android:protectionLevel="signature" /> 
```

和：

```
 <uses-permission android:name="your.application.package.permission.MAPS_RECEIVE" /> 
```

从：`your.application.package`到：`com.williamroma.example`。

**2.**删除这个：

```
 <!-- Add Google Map Library -->
    <uses-library android:name="com.google.android.maps" /> 
```

**3.**并从底部删除：

```
 <!-- Allow to connect with internet -->
<uses-permission android:name="android.permission.INTERNET" /> 
```

您已经拥有它的上层权限。

但看起来您的问题是因为您没有正确引用 Google 库。再次查看`first three steps`我的指南。

**更新：**

检查您的项目（绿色）的依赖项库下是否有选定的（红色）库。

![在此处输入图像描述](https://i.stack.imgur.com/1KHZT.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-09T01:52:02.773

您需要将 android Private Libraries 添加到：

```
Project
  => Properties
     => Java build path
        => Order and Export
           => Select Android Private Libraries 
```

# java - Android 的 Java FileInputStream/Scanner 问题

> ID：15729333
> 
> 赞同：0
> 
> 时间：2013-03-31T12:24:08.980
> 
> 标签：java, android, filenotfoundexception

我正在尝试在 Java 中为 Android 加载一些资源。这些资源是简单的文本文件，我需要阅读其中的内容。我在读取和写入此类文件方面有相当多的经验，但现在有些东西正在破坏它。

这是我正在使用的代码。

```
FileInputStream fstream = new FileInputStream("file:///android_asset/Peacefulpack.mod"); 
```

所以当我运行它时，它应该`Peacefulpack.mod`在这个目录中搜索：`file:///android_asset/Peacefulpack.mod`

但是，当我查看控制台日志时，它告诉我 Java 正在寻找这个目录：`file:///android_asset/Peacefulpack.mod`

这给了我一个`FileNotFoundException`. 我怎样才能摆脱它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T12:37:07.723

在 AssetManager 中使用这个方法 public final InputStream open (String fileName)

见： http: [//developer.android.com/reference/android/content/res/AssetManager.html#open(java.lang.String)](http://developer.android.com/reference/android/content/res/AssetManager.html#open(java.lang.String))

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T12:51:24.533

> 我正在尝试在 Java 中为 Android 加载一些资源。

由于您希望使用存储在 Android 预定义目录中的数据，Android 提供了直接为您的目标指定的方法。

乍一看，[`AssetManager`](http://developer.android.com/reference/android/content/res/AssetManager.html)它提供了以下方法：

*   [公共最终输入流打开（字符串文件名）](http://developer.android.com/reference/android/content/res/AssetManager.html#open%28java.lang.String%29)

这很可能是您正在寻找的。方法返回`InputStream`存储在 assets 文件夹中的文件。

基本用法：

```
AssetManager am = this.getAssets(); // or YourActivity.this.getAssets()
   try { // generally Context
      InputStream is = am.open("yourFile.suffix");
   }
   catch (IOException e) {
      Log.w("IOException", e.getMessage());
   } 
```

它应该可以解决您的问题。

# jquery - 如何在不刷新页面的情况下触发带有jquery的链接？

> ID：15729334
> 
> 赞同：0
> 
> 时间：2013-03-31T12:24:14.133
> 
> 标签：jquery, ajax

我正在创建一个 tumblr 主题，我添加了一个赞按钮来发布。这是一个示例网址：

```
<a class="loveit" href="http://www.tumblr.com/like/fGKvAJgQ?id=16664837215">like it</a> 
```

这完美地工作。但是，结果只是一个空白页面，因此我需要一种无需刷新页面即可触发链接的方法。

目前我正在尝试这段代码：

```
$('.loveit').click(function(e){
  e.preventDefault();
    var targetUrl = $(this).attr('href');
 $.ajax({
        url: targetUrl,
        type: "GET",
        success:function(){
            alert("done");
        },
        error:function (){
            alert("testing error");
        },
    });
}); 
```

但它不起作用。这个链接如何在不刷新现有页面的情况下运行？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T12:35:30.877

尝试将您的网址放在 rel 中：

```
<a class="loveit" href="javascript:;" rel="http://www.tumblr.com/like/fGKvAJgQ?id=16664837215">like it</a> 
```

并在 jquery 中使用它：

```
$('.loveit').click(function(e){
  e.preventDefault();
    var targetUrl = $(this).attr('rel');
 $.ajax({
        url: targetUrl,
        type: "GET",
        success:function(){
            alert("done");
            return false;
        },
        error:function (){
            alert("testing error");
        }
    });
}); 
```

或者您可以使用 onClick 功能：

```
<a class="loveit" href="javascript:;" onClick="like(this);" rel="http://www.tumblr.com/like/fGKvAJgQ?id=16664837215">like it</a>

function like(placeholder) {
        $.ajax({
            url: $(placeholder).attr('rel'),
            type: "GET",
            success:function(){
                alert("done");
            },
            error:function (){
                alert("testing error");
            }
        });
        return false;
} 
```

# android - android中是否使用libgdx进行屏幕录制

> ID：15729338
> 
> 赞同：3
> 
> 时间：2013-03-31T12:24:32.943
> 
> 标签：android, video, libgdx, recording

我设法通过拍摄一系列屏幕截图并使用 ffmpeg 将它们转换为视频来做到这一点（为 android 编译的 ffmpeg 并包含所有 *so 到断言，将它们全部复制到 data/data/my.package/ 并从那里执行 ffmpeg）

但主要问题是截屏对屏幕渲染有很大影响，当应用程序执行这行代码时它会冻结一段时间（~0.1秒）：

```
Gdx.gl.glReadPixels(x, y, w, h, GL10.GL_RGBA, GL10.GL_UNSIGNED_BYTE, pixels); 
```

我试图从另一个线程截取屏幕截图，但我只得到黑色屏幕截图。为什么？？？

你知道更有效的截图方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T22:47:03.860

屏幕捕获是一项相当昂贵的任务，当您想将其转换为视频时更是如此。

glReadPixels 方法是从显示缓冲区读回像素值的方法。这就是你想要的；然而，限制因素将是与 GPU 之间的带宽，尤其是对于移动设备。我建议创建一个分辨率较低的[FrameBuffer](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/graphics/glutils/FrameBuffer.html)（可能是宽度/高度的一半），以便降低带宽需求。然后，您将在应用程序处于活动状态时将其绘制到该缓冲区，然后读回像素值。Libgdx 提供了一个方便的类来读回[ScreenUtils](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/utils/ScreenUtils.html)类中的像素值。（这些方法使用 glReadPixels 进行读取）。

即使这样，它也可能无法在低端设备上正常工作，特别是如果您正在考虑以每秒 60 帧的速度从设备录制视频并主动渲染复杂场景。但是，如果其他人知道在 android 设备上有效地执行此操作的方法，我会对看到更好的解决方案非常感兴趣。

要回答您的其他问题，您不能同时访问 OpenGL 上下文，并且应该只从渲染线程中进行。这就是为什么您会获得带有多个线程的黑色屏幕截图。

**编辑：**

为了跟进您关于如何导出到 PNG 的问题，我有您可以使用的代码：

```
public boolean export(final FileHandle target, final Graphics g) {
        boolean error = false;
        final Pixmap picture = new Pixmap(g.getWidth(), g.getHeight(), Format.RGBA8888);
        final FrameBuffer buffer = new FrameBuffer(Format.RGBA8888, g.getWidth(), g.getHeight(), false);
        try {
            Gdx.graphics.getGL20().glViewport(0, 0, g.getWidth(), g.getHeight());
            buffer.begin();
            g.render(); // Or however you normally draw it
            final byte[] data = this.readData(g.getWidth(), g.getHeight());
            buffer.end();
            picture.getPixels().put(data, 0, data.length);
            PixmapIO.writePNG(target, picture);
        } catch (final Exception e) {
            e.printStackTrace();
            error = true;
        } finally {
            picture.dispose();
            buffer.dispose();
        }
        return error;
    }

    // Adapted from ScreenUtil class
    public byte[] readData(final int width, final int height) {
        final int numBytes = width * height * 4;
        final ByteBuffer pixels = BufferUtils.newByteBuffer(numBytes);
        Gdx.gl.glPixelStorei(GL20.GL_PACK_ALIGNMENT, 1);
        Gdx.gl.glReadPixels(0, 0, width, height, GL20.GL_RGBA, GL20.GL_UNSIGNED_BYTE, pixels);

        final byte[] lines = new byte[numBytes];
        final int numBytesPerLine = width * 4;
        for (int i = 0; i < height; i++) {
            pixels.position((height - i - 1) * numBytesPerLine);
            pixels.get(lines, i * numBytesPerLine, numBytesPerLine);
        }

        return lines;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-15T11:45:46.377

您好，我设法拍摄了 @ 30fps 的视频，或者我们甚至可以从我的想法中获得 @60 fps 的视频，而且我的视频非常流畅

如果有人对此感兴趣，请检查一下。

这个想法很简单，我们希望以 60fps 或 29.97fps（我的视频）的速度对每一帧进行屏幕截图。

分 3 步完成：1) 以 1/60 渲染所有内容作为屏幕的增量时间

2）拍摄每一帧的屏幕截图

3）制作所有这些png文件的视频（我使用adobe Premiere pro）

第 1 步）在 libgdx 中，我扩展了 Game 类并创建了一个新类 MyGame extends Game 或类 MyGame 扩展 ApplicationListener 现在更改其渲染方法以供临时使用

```
ScreenShotUtils screenShotUtils=new ScreenShotUtils();
@Override
    public void render () {
        //if (screen != null) screen.render(Gdx.graphics.getDeltaTime());
        //write your video fps as 1f/29.97f or 1f/30f
        if (screen != null){
            screen.render(1f/60f);
            screenShotUtils.update();
        }
    } 
```

Step 2) 使用 ScreenShotUtils 类的 capture 方法截屏 当您需要截屏时调用 capture 方法只需在您的游戏中制作一个按钮来开始和停止录制

```
//call on start click
screenShotUtils.capture(true);
//call on stop click
screenShotUtils.capture(false); 
```

注意：当你开始抓图游戏会卡顿，它会超级慢，但是渲染增量时间不会让 ui 更新低于 60 fps，你会得到 60 fps 的截图，现在在这个延迟期间玩游戏并且您将在视频发布过程中获得流畅的图像序列

```
public class ScreenShotUtils {
    String filefolder="D:/capturefolder";// your folder to put the images in
    String filenameprefix="";
    int frameid=0,captureLimit=-1;
    private boolean isCapturing=false;
    public void setCaptureLimit(int frames){
        captureLimit=frames;
    }
    public boolean isCapturing(){
        return isCapturing;
    }

    public void capture(boolean capture){
        if(capture){
            if(!isCapturing) {
                isCapturing = true;
                filenameprefix="Demo"+System.currentTimeMillis();//Images Prefix
                frameid=0;
            }
        }else{
            isCapturing=false;
            captureLimit=-1;
            frameid=0;
        }
    }
    public void capture(boolean capture, int frames){
        if(capture){
            if(!isCapturing) {
                isCapturing = true;
                filenameprefix="Demo"+System.currentTimeMillis();//Images Prefix
                frameid=0;
            }
            captureLimit=frames;
        }else{
            isCapturing=false;
            captureLimit=-1;
            frameid=0;
        }
    }

    public void update() {

        // render before capturing

        if(isCapturing) {
            if(captureLimit<0)
                saveScreenshot();
            else
                if(captureLimit==0){
                    isCapturing = false;
                    captureLimit=-1;
                }else{
                    saveScreenshot();
                    captureLimit--;
                }
        }
    }
    private void saveScreenshot() {
        int MAX_DIGITS = 6;
        String fname = "" + (frameid++);
        int zeros = MAX_DIGITS - fname.length();
        for (int i = 0; i < zeros; i++) {
            fname = "0" + fname;
        }

        FileHandle file = new FileHandle(filefolder+"/"+filenameprefix +"-"+ fname+".png");
        Pixmap pixmap = getScreenshot(0, 0, Gdx.graphics.getWidth(),
                Gdx.graphics.getHeight(), true);
        PixmapIO.writePNG(file, pixmap);
        pixmap.dispose();
    }
    private Pixmap getScreenshot(int x, int y, int w, int h, boolean flipY) {
        Gdx.gl.glPixelStorei(GL20.GL_PACK_ALIGNMENT, 1);

        Pixmap pixmap = new Pixmap(w, h, Pixmap.Format.RGB888);
        ByteBuffer pixels = pixmap.getPixels();
        Gdx.gl.glReadPixels(x, y, w, h, GL20.GL_RGB, GL20.GL_UNSIGNED_BYTE, pixels);

        if (flipY) {
            final int numBytes = w * h * 3;
            byte[] lines = new byte[numBytes];
            final int numBytesPerLine = w * 3;
            for (int i = 0; i < h; i++) {
                pixels.position((h - i - 1) * numBytesPerLine);
                pixels.get(lines, i * numBytesPerLine, numBytesPerLine);
            }
            pixels.clear();
            pixels.put(lines);
        }     

        return pixmap;
    }
} 
```

3）我使用adobe Premiere pro制作视频，你可以使用其他工具搜索google（将图像序列转换为视频） [https://helpx.adobe.com/premiere-pro/using/importing-still-images.html](https://helpx.adobe.com/premiere-pro/using/importing-still-images.html) 部分：将图像作为图像序列导入

注意：我使用格式为 RGB 而不是 RGBA 的屏幕截图，因为 alpha 位弄乱了图像的边界。你可以试试看

此外，您可以修改代码以将文件保存到 android sdcard 我使用桌面版本，只需更改 saveScreenshot 方法的文件句柄

免责声明：我使用了截图代码并从本网站修改了它们[http://www.wendytech.de/2012/07/opengl-screen-capture-in-real-time/](http://www.wendytech.de/2012/07/opengl-screen-capture-in-real-time/)

# c++ - Turbo C++ 字符数组到 int 数组

> ID：15729339
> 
> 赞同：-2
> 
> 时间：2013-03-31T12:24:33.650
> 
> 标签：c++, turbo-c++

我在字符数组下存储一个值，比如 6。我想将相同的值 6 传递给一个整数数组，但这个代码只是工作：

```
char a[3];
gets(a);              (for ex: value of a i.e a[0] is 6)
int b[3];
for(int i=0;i<strlen(a);i++)
b[i]=a[i];
cout<<b;               (it returns 54 nd not 6) 
```

上面的代码在其中存储了 6 的 INTEGER VALUE。它不直接存储 6。我想存储相同的 6 号而不是整数值（即 54）。有任何想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T12:29:46.300

您正在存储字符代码，而不是整数。如果您`1`在标准输入中键入并将其存储在 a`char`中，则将存储的是 ASCII 代码`1`，而不是整数值`1`。

因此，当您将其分配给 时`b[i]`，您应该执行以下操作：

```
b[i] = a[i] - '0'; // Of course, this will make sense only as long
                   // as you provide digits in input. 
```

此外，做：

```
cout << b; 
```

将打印`b`数组的地址，而不是其内容。此外，`strlen()`在这里使用不是一个好主意，因为您的数组`a`不是以空值结尾的。

撇开关于这是多么类型不安全的考虑，这就是你可能想要做的事情：

```
#include <iostream>
#include <cstring>

using std::cout;

int main()
{
    char a[3] = { 0, 0, 0 };
    gets(a);

    int b[3];
    for(unsigned int i = 0; i < std::min(strlen(a), 3u); i++)
    {
        b[i] = a[i] - '0';
    //              ^^^^^
        cout << b[i];
    }
} 
```

以下是在 C++11 中执行上述操作的方法：

```
#include <iostream>
#include <string>
#include <vector>

int main()
{
    std::string a;
    getline(std::cin, a);

    std::vector<int> b;
    for (char c : a) { if (std::isdigit(c)) b.push_back(c - '0'); }

    for (int x : b) { std::cout << x << " "; }
} 
```

这是对上述函数的修改，它也适用于 C++03：

```
#include <iostream>
#include <string>
#include <vector>

int main()
{
    std::string a;
    getline(std::cin, a);

    std::vector<int> b;
    for (std::string::iterator i = a.begin(); i != a.end(); i++)
    {
        if (std::isdigit(*i)) b.push_back(*i - '0');
    }

    for (std::vector<int>::iterator i = b.begin(); i != b.end(); i++)
    {
        std::cout << *i << " ";
    }
} 
```

# ios - 为特定工作日创建事件

> ID：15729340
> 
> 赞同：0
> 
> 时间：2013-03-31T12:24:39.320
> 
> 标签：ios, objective-c, core-data, nsdate

我希望用户选择他们想要在哪些工作日重复某个事件，到目前为止，我实现了一个类似于闹钟中的工作日选择器，但现在我正在考虑如何将这些数据存储在 Core Data 中。我应该为每天创建一个 BOOL 属性吗？在某个时间跨度内获取数组的最佳方法是什么，比如说星期四？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T14:45:59.920

您可以为此重复模式使用位域（每天位）。
您可以通过设置谓词来获取“星期四”重复事件的数组：
`[NSPredicate predicateWithFormat:@"((repeatPattern & %@) != 0) AND (...timespan limitations...)",@(ThursdayBit)]`

# javascript - Jquery倒计时但如果页面刷新/ F5仍然保持计时器

> ID：15729341
> 
> 赞同：0
> 
> 时间：2013-03-31T12:24:39.887
> 
> 标签：javascript, jquery, ajax

我正在寻找 jquery 插件倒计时，但如果页面刷新仍然继续。我正在申请问卷，我想在 60 分钟之前显示倒数计时器。我的应用程序现在如果用户登录开始回答问题，他会一一回答，该问题是每页一个问题。因此，如果下一个问题页面将刷新。所以现在如果用户想回答下一个问题倒数计时器将重置为默认值。现在我正在使用 jquery 插件这个[http://keith-wood.name/countdown.html](http://keith-wood.name/countdown.html)

带代码：

```
 $(function () {
        var d = new Date();
        d = new Date(d.getFullYear(), d.getMonth(), d.getDate(), d.getHours(), d.getMinutes()+59, 59);
        $('#defaultCountdown').countdown({until: d, format: 'MS'});
    }); 
```

所以我的问题是，如果页面刷新而将计时器重置为默认值，是否有插件倒数计时器。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T12:43:40.117

您可以通过将截止日期保存在 cookie 中来做到这一点，并在每次请求时从该 cookie 中获取值。你的代码会稍微复杂一点，但它会完成这项工作。您将需要[jQuery Cookie 插件](https://github.com/carhartl/jquery-cookie)，并且您可能想[了解如何使用它](http://www.electrictoolbox.com/jquery-cookies/)。

[这就是我想出的](http://jsfiddle.net/t9BCM/2/)。您可以更改 的值`withCookie`以查看保存和不保存请求之间的截止日期之间的区别（单击“运行”而不是重新加载 - 实际上，它会做同样的事情）。由于我找不到托管您正在使用的倒计时插件的 CDN，因此我只打印了截止日期 - 但由于您想要确保截止日期保持固定，您现在唯一需要做的就是生成jsFiddle 中的截止日期变量`d`（秒数除外），然后调用

```
$('#defaultCountdown').countdown({until: d, format: 'MS'}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T12:44:48.270

您可以在其中存储初始日期，`localStorage`并在页面刷新后尝试从那里恢复它。回答问题后，您可以删除日期`localStorage`

```
$(function () {
  var d = localStorage.getItem('date');
  if(!d) {
    d = (new Date()).getTime() + 3599000;
    localStorage.setItem('date', d);
  } else {
    d = parseInt(d);
  }
  $('#defaultCountdown').countdown({until: new Date(d), format: 'MS'});
});

function goNext() {
  localStorage.removeItem('date');
  // Go to next question
  ...
} 
```

工作示例：http: [//jsbin.com/oxovih/2/edit](http://jsbin.com/oxovih/2/edit)

# java - 当我尝试覆盖父类中的方法时出现错误。这是为什么？

> ID：15729342
> 
> 赞同：1
> 
> 时间：2013-03-31T12:24:45.180
> 
> 标签：java, oop

当我尝试编译`Child`该类时，出现以下错误：

```
Child.java:2: method does not override or implement a method from a supertype
    @Override
    ^
1 error 
```

* * *

这是为什么 ？我尝试`init`在子类中覆盖父类的。

```
class Parent {
    public static void init() {
        System.out.println("From the parent class");
    }
}

class Child extends Parent{
    @Override
    public static void init() {
        System.out.println("From the child class");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T12:26:27.580

您不能覆盖静态方法 -[您只能隐藏它](http://docs.oracle.com/javase/tutorial/java/IandI/override.html)。因此，您只能将`@Override`注释应用于实例方法：

```
class Parent {
    public void init() {
        System.out.println("From the parent class");
    }
}

class Child extends Parent {
    @Override
    public void init() {
        System.out.println("From the child class");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T12:29:02.577

您不能覆盖 java 中的静态方法。有关更多信息，请查看：[为什么 Java 不允许覆盖静态方法？](https://stackoverflow.com/questions/2223386/why-doesnt-java-allow-overriding-of-static-methods)

# wordpress - 快速标签可以指向 WordPress 中帖子的开头吗？

> ID：15729344
> 
> 赞同：0
> 
> 时间：2013-03-31T12:24:56.853
> 
> 标签：wordpress

我想知道是否有一种方法可以使`<!--more-->`标签链接在内容的开头打开帖子，而不是像默认情况下那样打开帖子，内容位于该快速标签之后？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T12:29:24.717

检查法典[http://codex.wordpress.org/Customizing_the_Read_More#Link_Jumps_to_More_or_Top_of_Page](http://codex.wordpress.org/Customizing_the_Read_More#Link_Jumps_to_More_or_Top_of_Page)

用户可以通过使用简单的正则表达式过滤内容更多链接来防止滚动。

```
function remove_more_link_scroll( $link ) {
    $link = preg_replace( '|#more-[0-9]+|', '', $link );
    return $link;
}
add_filter( 'the_content_more_link', 'remove_more_link_scroll' ); 
```

# c++ - 在 C++ 中使用堆栈对二叉搜索树进行深度优先搜索

> ID：15729346
> 
> 赞同：-1
> 
> 时间：2013-03-31T12:25:18.183
> 
> 标签：c++, binary-search-tree, tree-traversal

我正在尝试使用堆栈在二叉搜索树中执行 dfs，但它给出了一个错误，请帮忙。

```
#include<iostream>

using namespace std;

class TreeNode{
    private:
        int data;
        TreeNode *left;
        TreeNode *right;
    public:
        TreeNode(){
            data=-1;
            left=right=NULL;
        }
        TreeNode(int n){
            data=n;
            left=right=NULL;
        }
        int getData(){
            return data;
        }
        void setData(int n){
            data=n;
        }
        void setLeft(TreeNode *left){
            this->left=left;                
        }
        void setRight(TreeNode *right){
            this->right=right;
        }
        TreeNode *getLeft(){
            return left;
        }
        TreeNode *getRight(){
            return right;
        }
        void print(){
            cout<<data<<"";
        }
};

class Stack{
    private:
        TreeNode *nodes;
    public:
        int size;
        int top;
        Stack(int size){
            top=0;
            this->size=size;
                nodes = new Treenode[size];
        }

        TreeNode pop(){
            if (top == 0){
                cout<<"Stack is empty"<<endl;
                return -1;
            }
            top--;
            return nodes[top];
        }

        TreeNode push(TreeNode *node){
            if (top==size){
                cout<<"Stack is full"<<endl;
                return 0;
                nodes[top]= *node;
                top++;
            }
        }
};

class BST{
    private:
        TreeNode * root;
    public:
        BST(){
            root=NULL;
        }

        void preorder(){
            preorder(root);
            cout<<endl;
        }

        void preorder(TreeNode *root){
            if(root !=NULL){
                root->print();
                preorder(root->getLeft());
                preorder(root->getRight());
            }
        }

        void insert(int n){
            TreeNode * newNode = new TreeNode(n);
            if(root == NULL)
            {
                root = newNode;
            }       
            else{
                TreeNode *temp = root;
                TreeNode *prev = NULL;
                while(temp != NULL){
                    prev=temp;
                    if (n < temp->getData()){
                        temp=temp->getLeft();
                    }
                    else{
                        temp=temp->getRight();
                    }
                    if (n > prev->getData()){
                        prev->setRight( newNode );
                    }
                    else{
                        prev->setLeft( newNode );
                    }
                }
            }
        }

        void print(){
            Stack *s= new Stack(50);
            s->push(root);
            while( s->size > 0 ){
                TreeNode t = s->pop();
                cout<<t.getData()<<"";
                if(t.getLeft() != NULL){
                    s->push(t.getLeft());
                }
                if(t.getRight() != NULL){
                    s->push(t.getRight());
                }
            }
            cout<<endl;
        }
};

int main(){
    int n;
    BST *bst = new BST(); 
    do{
        cin>>n;
        if( n == -1)
            break;
        bst->insert(n);
    }while( true ); 

    bst->print();
    bst->preorder();
    return 0;
} 
```

这些是我得到的错误： -

```
testtree.cpp: In constructor ‘Stack::Stack(int)’:

testtree.cpp:51: error: expected type-specifier before ‘Treenode’

testtree.cpp:51: error: cannot convert ‘int*’ to ‘TreeNode*’ in assignment

testtree.cpp:51: error: expected ‘;’ before ‘Treenode’ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T12:40:11.757

此行也是无效的，因为它指的是堆栈大小而不是堆栈上的当前项目数：

```
while( s->size > 0 ){
....
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T12:29:54.113

你有一个错字！是`TreeNode`，不是`Treenode`。第 51 行应为：

```
nodes = new TreeNode[size]; 
```

请注意，由于未知类型在 C++ 中被自动假定为 int 类型，因此您会遇到该特定错误（？ - 我不是 100% 的）。

# windows-phone-7 - Windows 手机位置：固定底部：0 不起作用

> ID：15729352
> 
> 赞同：0
> 
> 时间：2013-03-31T12:26:06.313
> 
> 标签：windows-phone-7

我有一个移动网页，底部贴有一些滑动导航。

[http://tinyurl.com/c5aauyj](http://tinyurl.com/c5aauyj)

在 Windows Phone 上，滑块导航不会粘在底部，而是在顶部。Iphone/桌面是否正确。我真的找不到哪里出了问题。不知何故，固定的位置在 WP 上不起作用？

```
.slider-text {
    background: url("../../images/bg_content.png") repeat scroll left top transparent;
    bottom: 0;
    height: 165px;
    overflow: hidden;
    position: fixed; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T07:18:55.157

windows phone 7 - 芒果前后都忽略固定定位并将固定元素呈现为位置：静态。

# php - 如果upload_tmp_dir 没有价值……我的临时文件去哪儿了？-- 实验

> ID：15729353
> 
> 赞同：24
> 
> 时间：2013-03-31T12:26:14.753
> 
> 标签：php

我真的只是在乱搞和学习更多关于 PHP 的知识，但我偶然发现了一些让我陷入困境的东西。我希望我能对这个难题有所了解。

基本上我只是想发现上传图像的mimetypes - 就像主题行问的那样：如果upload_tmp_dir没有价值，我的临时文件在哪里（在互联网上）？我应该提到它确实告诉我我的模仿类型！所以部分成功！

以下是我的一些规范：我正在运行 PHP 5.3+，而我的 upload_tmp_dir 没有任何价值 - 我确实阅读了 2008 年的另一篇文章，其中建议 var_dump 可能会有所帮助，但它只返回一个空数组。

```
<?php

if(empty($_FILES)){
    echo "nothing in files array -- ignore warning, testing only" . "<br /><br />";
}
$finfo = new finfo(FILEINFO_MIME_TYPE);
$fileContents = file_get_contents($_FILES['upload']['tmp_name']); // check tmp dir for 
$mimeType = $finfo->buffer($fileContents);

echo $mimeType . "<br /><br />";
echo var_dump($_FILES) . "<br /><br />";
?>

<form action="" method="post" enctype="multipart/form-data">
    <p>
        <label id="upload">Select a file to upload:
            <input type="hidden" name="MAX_FILE_SIZE" value="1048576">
            <input type="file" id="upload" name="upload">
        </label>
    </p>
    <p>
        <input type="hidden" name="action" value="upload">
        <input type="submit" value="Submit">
    </p>
</form> 
```

感谢大家！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-31T12:29:43.690

它很可能会使用系统的 tmp 目录。但要真正找出你应该检查`<?php phpinfo() ?>`. 您可以将其放入`info.php`文件或类似文件中，然后在浏览器中打开该文件的 URL。它会告诉你所有的配置值；甚至默认。

您还可以使用[`sys_get_temp_dir()`](http://php.net/manual/en/function.sys-get-temp-dir.php)来找出临时目录的位置。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-02-19T16:45:54.577

我也在寻找这个答案。我`php.ini`在里面和里面找到了我的文件`/etc`：

```
; Temporary directory for HTTP uploaded files (will use system default if not
; specified).
;upload_tmp_dir = 
```

这似乎表明`/tmp`是否未指定。

# java - Java在实现Android Activity时找不到符号

> ID：15729354
> 
> 赞同：2
> 
> 时间：2013-03-31T12:26:26.237
> 
> 标签：java, android, android-activity

我正在编写我的第一个 android 应用程序并且遇到了一些麻烦。考虑以下代码：

```
@SuppressLint("NewApi")
@Override
protected void onCreate(Bundle savedInstanceState{
    super.onCreate(savedInstanceState);
    TextView textView;
    textView = new TextView(this);
    textView.setTextSize(40);
    //textView.setText("TEST");
    setContentView(textView);
} 
```

只要该`setText`行保持注释，此代码就会编译。如果我取消注释，我会收到以下错误：`cannot find symbol: variable textView`

我在这里做一些明显错误的事情吗？我是android新手，自从我写任何java以来​​已经有好几年了（我写了更多的C，我的直觉往往让我误入歧途......）

编辑：

此函数是此处示例代码的简化：http: [//developer.android.com/training/basics/firstapp/starting-activity.html](http://developer.android.com/training/basics/firstapp/starting-activity.html)

这个例子错了吗？看起来我不应该在清单中创建这样一个简单的视图，这对我来说看起来像是一个 java 链接器错误？感谢您的回复，但我仍然无法理解问题所在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T12:30:05.443

你出错的几个地方：

- 你应该`setContentView()`在尝试引用任何视图之前打电话

-`setContentView()`采用包含您的布局的 XML 文件的名称

-您需要使用 JAva 代码在布局中引用 TextView`findViewById`

```
@Override
protected void onCreate(Bundle savedInstanceState{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.name_of_your_xml_file_which_has_the_layout);
    TextView textView;
    textView = (TextView)findViewById(R.id.id_of_the_textView_as_given_in_your_layout.xml);
    textView.setTextSize(40);
    textView.setText("TEST");
} 
```

**编辑：**[此处](http://developer.android.com/training/basics/firstapp/starting-activity.html#CreateActivity) 给出的代码动态创建一个 TextView ，我的答案包含的方法使用静态布局并仅引用 java 代码中的 textView 。这是执行此操作的标准方法，因为一旦事情变得复杂，实现动态布局就变得非常困难。现在，事情似乎很简单，因为只有一个 TextView。但是有了更多的 UI 元素，你只会招来更多的麻烦*（在我看来）*。我建议您遵循静态布局方法，特别是因为您是从 Android 开始的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T12:33:23.687

您可以在布局文件中创建一个文本视图，例如：

```
<TextView
        android:id="@+id/textView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" /> 
```

然后在您的代码中找到它，然后将其分配给变量：

```
TextView textView = (TextView)findViewById(R.id.textView1);
// Now you can do whatever you want with this textview 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T16:01:05.750

1.  setContentView(tv) 首先将文本设置为 textview。您可以执行以下操作。

    ```
    public class MainActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    TextView tv= new TextView(this);
    setContentView(tv);
    tv.setText("hello");
     }
    } 
    ```

2.  在你的 main.xml

    ```
    <TextView
    android:id="@+id/textView1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/hello" /> 
    ```

在你的活动中

```
 TextView textView = (TextView)findViewById(R.id.textView1); 
```

我建议你参加第二部分。您的 xml 用于定义与 MainActivity.java 文件中定义的逻辑分开的 UI。您对 UI 所做的任何更改都无需更改您的 java 文件。在您的 xml 文件中，您可以设置文本视图大小。您无需更改 .java 文件中的逻辑。

您对 .java 文件所做的类似更改，不需要在 xml 中进行更改。

# pythonanywhere - Pythonanwhere Facebook 应用程序 Canvas URL 不再可用

> ID：15729358
> 
> 赞同：1
> 
> 时间：2013-03-31T12:26:43.857
> 
> 标签：pythonanywhere

我正在尝试遵循 PythonAnywhere Facebook 应用程序示例，但在尝试按照 PA 的说明设置 Canvas URL 时遇到了问题。看来FB想强迫我为此使用Heroku；他们现在将其称为“托管 URL”。有解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:08:49.867

[我仍然在https://developers.facebook.com/apps](https://developers.facebook.com/apps)看到该选项

```
--> Create New App
--> Select how your app integrates with Facebook
--> App on Facebook
--> Canvas URL + Secure Canvas URL 
```

对你来说有什么不同吗？我能想到的唯一另一件事是确保您在第一步没有勾选“从 Heroku 托管”框...

# java - 如何在不锁定`get()`方法的情况下制作线程安全的HashMap？

> ID：15729367
> 
> 赞同：6
> 
> 时间：2013-03-31T12:27:47.743
> 
> 标签：java, multithreading

我在面试时问了一个问题：如何实现独占写入`HashMap`和非独占读取的 getter 和 setter。假设以下代码：

```
public class MyClass {

     private HashMap map = new HashMap();

      // HOW TO implement Getter and Setter for exclusive writing and non-exclusive reading
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-31T13:38:57.323

试试这个

```
class MyClass<K, V> {
    private HashMap<K, V> map = new HashMap<K, V>();
    private ReadWriteLock rwl = new ReentrantReadWriteLock();
    private Lock rl = rwl.readLock();
    private Lock wl = rwl.writeLock();

    public V get(Object k) {
        rl.lock();
        try {
            return map.get(k);
        } finally {
            rl.unlock();
        }
    }

    public V put(K k, V v) {
        wl.lock();
        try {
            return map.put(k, v);
        } finally {
            wl.unlock();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-31T12:32:52.353

`ConcurrentHashMap`使用锁分条策略：它有（使用默认设置）16 个锁，每个锁保护 1/16 的 hashmap 桶。

简单地使用`volatile`并没有真正的帮助，因为某些操作需要是原子的，并且`volatile`只提供可见性保证。

另一种方法是完全同步地图（如 in[`Collections.synchronizedMap`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#synchronizedMap%28java.util.Map%29)或`Hashtable`），但这种策略在高争用下的性能明显更差 - 根据您的用例，它可能足够好。

* * *

Evgeniy 提议的替代方案是一种“copyonwritemap” - 在大多数情况下它不会那么有效：

```
class MyClass<K, V> {
    //note: map needs to be volatile to completely remove synchronization
    //at the getter level
    private volatile Map<K, V> map = new HashMap<K, V>();
    private final Object lock = new Object();

    public V get(Object k) {
        return map.get(k);
    }

    public V put(K k, V v) {
        synchronized (lock) { //for exclusive writing
            Map<K, V> newMap = new HashMap<K, V> (map); //copy map
            V value = newMap.put(k, v);
            //volatile guarantees that this will be visible from the getter
            map = newMap;
            return value;
        }
    }
} 
```

# mysql - 查询的内部联接不起作用

> ID：15729370
> 
> 赞同：0
> 
> 时间：2013-03-31T12:28:24.287
> 
> 标签：mysql, database

我有一个相当大的查询，它的快递部分使它不起作用我不知道为什么，没有出现错误，但也许我没有看到任何东西......

```
SELECT o.purchaseNo, o.dateCreated, c.Name, m.mouldName, cr.courierName
FROM products AS p
INNER JOIN orderedProducts AS op ON op.productID = p.productID
INNER JOIN orders AS o ON op.orderID = o.orderID
INNER JOIN Couriers AS cr ON cr.couriersID = o.couriersID
INNER JOIN customers AS c ON c.customerID = o.customerID
INNER JOIN Moulds AS m ON m.mouldID = p.mouldID
WHERE c.Name LIKE  '%john%'
OR p.name LIKE  '%john%'
OR c.Name LIKE  '%john%'
OR c.POC1 LIKE  '%john%'
OR c.POC2 LIKE  '%john%'
OR c.Address1 LIKE  '%john%'
OR c.Address2 LIKE  '%john%'
OR c.Suburb LIKE  '%john%'
OR c.State LIKE  '%john%'
OR c.Phone LIKE  '%john%'
OR c.Email LIKE  '%john%'
OR c.ABN LIKE  '%john%'
OR c.Fax LIKE  '%john%'
OR c.CompanyName LIKE  '%john%'
OR o.purchaseNo LIKE  '%john%'
OR o.dateCreated LIKE  '%john%'
OR cr.courierName like '%john%' 
```

Couriers cr 是导致问题的线路。如果我将它与对 cr 的任何引用一起删除，它就可以正常工作。否则不会。

关于可能导致这种情况的任何想法？

我基本上是在创建一个搜索查询。检查数据库中的许多表。如果您对我如何使它变得更好有任何建议，那就太好了:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T12:31:02.823

我猜你需要一个 LEFT OUTER JOIN 在快递员 cr 上。

```
SELECT o.purchaseNo, o.dateCreated, c.Name, m.mouldName, cr.courierName
FROM products AS p
INNER JOIN orderedProducts AS op ON op.productID = p.productID
INNER JOIN orders AS o ON op.orderID = o.orderID
INNER JOIN customers AS c ON c.customerID = o.customerID
INNER JOIN Moulds AS m ON m.mouldID = p.mouldID
LEFT OUTER JOIN Couriers AS cr ON cr.couriersID = o.couriersID
WHERE c.Name LIKE  '%john%'
OR p.name LIKE  '%john%'
OR c.Name LIKE  '%john%'
OR c.POC1 LIKE  '%john%'
OR c.POC2 LIKE  '%john%'
OR c.Address1 LIKE  '%john%'
OR c.Address2 LIKE  '%john%'
OR c.Suburb LIKE  '%john%'
OR c.State LIKE  '%john%'
OR c.Phone LIKE  '%john%'
OR c.Email LIKE  '%john%'
OR c.ABN LIKE  '%john%'
OR c.Fax LIKE  '%john%'
OR c.CompanyName LIKE  '%john%'
OR o.purchaseNo LIKE  '%john%'
OR o.dateCreated LIKE  '%john%'
OR cr.courierName like '%john%' 
```

**我猜测的原因：** 如果删除 Couriers，则会出现结果集。因此，您没有在 上找到匹配项 `cr.couriersID = o.couriersID`，尽管匹配或不匹配，您仍然想要结果集，您需要 LEFT OUTER JOIN。

[***有关更多信息，请参阅关于 JOIN 的图示。***](http://learnsqltips.blogspot.in/2012/05/pictorial-representation-of-join-in-sql.html)

# android - android中使用的设计模式是什么？

> ID：15729383
> 
> 赞同：23
> 
> 时间：2013-03-31T12:30:02.047
> 
> 标签：android, design-patterns

我知道一些在android中使用的设计模式，比如......

1.  广播接收器使用观察者设计模式
2.  Intent 使用一种工厂设计模式
3.  视图使用复合设计模式
4.  媒体框架使用外观设计模式

除了这些，还有其他在android中使用的设计模式吗？欣赏你的想法

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-31T17:18:28.397

Android 在其结构中使用了很多模式。

您可以看到的第一个模式是层模式，它在 POSA 1（面向模式的软件架构 1）一书中被归类为架构模式。Layers 模式的主要结构特征是 Layer J 的服务仅由 LayerJ+1 使用，层之间没有进一步的直接依赖关系。这种模式将解决低级和高级问题混合的问题，即高级操作依赖于低级操作。Android 是建立在一个多抽象层的堆栈之上（更多细节请参考[http://elinux.org/Android_Architecture](http://elinux.org/Android_Architecture)），所以部署这个设计是为了解决它的问题。

Android在多进程上做了很多事情，因此需要精心设计IPC（进程间通信）机制。在 Android 中，Binder 和使用 AIDL 进行无缝通信，尽管这些进程中的服务可以用 Java、C 或 C++ 编写。Binder 由 Proxy（在 Gang of Four 书中）、Broker（在 POSA 1 书中）和 Facade Wrapper 模式（参考此链接[http://www.cs.wustl.edu/~schmidt/PDF/wrapper-facade. pdf](http://www.cs.wustl.edu/~schmidt/PDF/wrapper-facade.pdf) ) 来实施。代理模式将对客户端隐藏通信细节，因此进程可以在本地上下文或网络上下文中统一与对象通信。Broker 用于隔离与通信相关的问题。Facade Wrapper 模式用于将 C 库 Android 中的低级函数和数据结构封装在高级接口中。

多线程机制也使用了很多模式。我们可以看到一个模式是用于执行长时间运行的调用的命令处理器模式。

观察者模式用于跟踪系统相关的状态。

……

我现在能记得的就这些了。如果您对 Android 设计模式感兴趣。您可以查看本课程：[https](https://class.coursera.org/posa-001/class/index) : //class.coursera.org/posa-001/class/index on Coursera 了解更多详情。

# ios6 - 可以在生产环境中通过新的 iOS SDK 1.0.4 使用非美国帐户

> ID：15729386
> 
> 赞同：0
> 
> 时间：2013-03-31T12:30:23.723
> 
> 标签：ios6, paypal

我在配置新的 iOS PayPal SDK 时遇到问题，当我使用 PayPalEnvironmentProduction 初始化环境时，我总是收到一个警报视图，下一条消息“与 PayPal 服务器通信时出现问题”。

我认为问题在于我使用的是非美国帐户。

你能帮我吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:30:40.670

您还需要确保使用实时客户端 ID 和收件人电子邮件，因为实时和沙盒的凭据不同。（并不是说这是您的问题，但最好仔细检查一下。）

但是，请注意，非美国支持仍在开发中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T17:32:00.407

我有类似的问题，但我已将环境配置为 PayPalEnvironmentSandbox，但在尝试使用瑞典帐户时，我得到的只是 PLATFORM 错误 589009。根据 PayPal 的说法，它应该使用非美国帐户进行测试，但不适用于真实帐户。

# linux - 获取驱动程序功能的手册页

> ID：15729387
> 
> 赞同：3
> 
> 时间：2013-03-31T12:30:53.040
> 
> 标签：linux, linux-device-driver, manpage

我是 linux 设备驱动程序的新手。我想知道是否有诸如 register_chrdev 之类的驱动程序函数的手册页。如果是，那么我该如何获得它们？是否有可以使用 apt-get 下载的软件包？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T12:52:05.457

程序中的 Linux 内核页面`man`位于第 9 节，幸运的是，这是一个非标准节。看到[这个](http://manpages.ubuntu.com/manpages/lucid/man1/man.1.html)。Ubuntu 等流行的 Linux 发行版不会通过其软件渠道 (?) 分发本节中的手册页。

它们仍然可用，例如，Debian 提供了[一个](http://packages.debian.org/wheezy/linux-manual-3.2). 手册页也有在线版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:56:33.457

实际上，内核有一个 ABI 而不是 API，因为内部接口正在迅速变化。

学习 Linux 内核的最好方法是阅读源代码。如果您对字符设备驱动程序感兴趣，那么我建议您阅读 LDD3 书籍并查看其他设备驱动程序如何在您的内核源代码中使用上述调用。通过这种方式，您将了解如何将内核 ABI 用于您的驱动程序。

# php - 有一个 PHP 重定向到登录页面，而不是强制登录

> ID：15729395
> 
> 赞同：2
> 
> 时间：2013-03-31T12:32:01.057
> 
> 标签：php, html, security, session, login

我为游戏服务器管理创建了一个小型 php 站点，但它并没有强制未登录的用户登录。如果会话未激活，我添加了重定向，并在注销时销毁了会话。该网站在这里[http://zelware.co.uk/gameman](http://zelware.co.uk/gameman)

它会强制您第一次登录，但如果您将 login.php 从 URL 中删除，它会允许您再次进入主区域。任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T13:04:53.757

要对用户进行身份验证，您需要一个简单的机制：

*   所有页面都应通过检查某些会话值来保护，如果该值不存在，则重定向到登录页面。您可以在单独的函数/文件中编写此检查的代码，并在您网站的每个页面中调用/包含它。

    ```
    is_user_logged_in(){
        return $_SESSION['logged_in']; // it is a boolean value, which should be set TRUE by the login function
    }

    //in every page of yours you should call this
    if ( !is_user_logged_in() ){
        //redirect to you login page
        header("Location: http://yoursitename.com/login_page.php");
    } 
    ```

*   登录页面应验证用户名/密码，如果有效，则在每个其他页面中创建您正在检查的会话值。

    ```
    if ( valid_user($username, $password) ){
        // this is the value you should check for in other pages
        $_SESSION['logged_in'] = TRUE;
        // you may also need to store other user-related info in the session
        $_SESSION['user'] = array("id" => 1 , "username" => "test_user") // a data array from DB
    } 
    ```

*   注销页面应该破坏您在其他每个页面中检查的会话值。

    ```
    unset($_SESSION['logged_in']);
    session_destroy(); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T15:33:35.250

您需要创建一种机制来验证用户是否已登录。登录时，系统会设置一个会话 cookie - 一个随机的、唯一的哈希。哈希值以 cookie 的形式存储在数据库中，并与用户名、密码、IP 和登录时间一起存储在数据库中。

当用户访问该页面时，您调用一个看起来有点像这样的函数：（不完全是，这不是很好，只是基本检查，您还应该检查 IP 是否匹配以及会话是否已过期）

```
 function verify_login() {
 //
 $hash = $_COOKIE['loginhash'];
    if($hash != ''):
        $hash = mysql_real_escape_string($hash);
        $sql = "SELECT * FROM session WHERE hash = '$hash'";

    else:
        header('Location: login.php');
    endif;

    $res = mysql_query($sql) or die(mysql_error());

    if(mysql_num_rows($res) !=0):
    while($row = mysql_fetch_assoc($res)) {
                                    echo 'The user is logged in.';

    }
    else:
        header('Location: login.php');
    endif;

      } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T12:38:34.530

你需要一个 if 语句

```
$_SESSION['loggedin']==TRUE; 
```

检查是否有人登录。还可以考虑设置 session_id() 并以此进行重定向。

# .net - 中文用户 GUI 字体更改时的布局问题

> ID：15729396
> 
> 赞同：1
> 
> 时间：2013-03-31T12:32:05.323
> 
> 标签：.net, internationalization

我的新实用程序是用 C#/.Net 2.0/WinForms 构建的。我认为我没有更改任何字体设置，因此所有小部件都具有默认设置（Microsoft Sans Serif；显示为 8,25pt）。现在它发布了，我看到中国网站发布了它的截图。显然他们得到了另一种字体。问题是这种字体是等宽的，不适合 GUI，如图所示：

![在此处输入图像描述](https://i.stack.imgur.com/UswKh.png)

问：处理这个问题的正确方法是什么？（为什么会这样？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T13:31:42.180

好吧，这些 XP 用户没有在他们的机器上安装 Microsoft Sans Serif。很难猜出为什么，远程故障排除的几率乘以操作系统的年龄乘以他们为许可证付费的可能性产生的数字非常小。

在没有字体的情况下，字体映射器通过字体链接使用备用字体。明确设计用于关注东亚语言环境的功能。对于简体中文，回退是 SimSun -> PMingLiu -> MS UI Gothic -> Batang。对于繁体中文，它是 PMingLiu -> SimSun -> MS Mincho -> Batang。记录在[此博客文章](http://www.siao2.com/2005/06/18/430507.aspx)中。

正如您所知，SimSun 和 PMingLiU 都没有为西方字符生成漂亮的字形。并在 Microsoft Word 中进行测试。如果您与其中一位中国用户有良好的联系，那么值得一试 Tahoma。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T12:41:23.653

我自己也遇到过。我相信，由于您在设计时设置的任何字体都缺乏 Unicode 支持，因此这些用户可能会默认使用该字体。根据[这个线程](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/5bfb9256-1636-4b3e-b380-126fcc042466/)，使用`SimSun`字体可能会有所帮助。

# php - 我的邮件功能有什么问题

> ID：15729397
> 
> 赞同：2
> 
> 时间：2013-03-31T12:32:16.440
> 
> 标签：php, email

此代码应该向我的 hotmail 地址发送电子邮件：

```
<?php
$subject = 'test';
$from = 'test@test.com';
$reply_to = 'test@test.com';
$message = 'test';
$headers = "From: ".$from. "\r\n" . "Reply-To: ".$reply_to. "\r\n" . "X-Mailer: PHP/" . phpversion();
$headers .= "MIME-Version: 1.0\r\n";
$headers .= "Content-Type: text/html; charset=utf-8\r\n";
mail('my_hotmail_address@hotmail.com', $subject, $message, $headers); 
?> 
```

然而，在我的两个托管服务提供商上，它什么也没做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T12:37:56.193

尝试将其发送到另一个电子邮件地址（gmail 或其他）。您不会说，但在接收电子邮件方面，hotmail 确实非常重要。如果域与发件人 IP 不匹配，则很容易被 hotmail 阻止。Gmail 并不那么重要，它会通过其他谷歌的东西来使其正常工作。

这是一个适用于我发送到 hotmail 的标头：

```
$headers = "MIME-Version: 1.0" . "\r\n";
$headers .= "Content-type:text/html;charset=iso-8859-1" . "\r\n";
$headers .= "From: ". $Name . " <" . $email . ">\r\n"; 
```

确保您的 MX 记录 IP 与您的服务器 IP 相同（如果您的服务器处理您的电子邮件）或在您的 DNS 中放置一个 SPF 文件。这将授予您的服务器通过 DNS 发送。Hotmail 会检查这一点。

祝你好运

# solr - SOLR 中的索引 GATE 注释

> ID：15729400
> 
> 赞同：1
> 
> 时间：2013-03-31T12:32:27.220
> 
> 标签：solr, gate, behemoth

我需要将 GATE 处理后生成的所有注释和特征索引到 SOLR 中。我需要搜索注释和功能。做这个的最好方式是什么？我更喜欢将处理转移到hadoop。

我目前正在使用庞然大物，但它不索引注释和功能，它只索引文本。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T12:15:51.907

请参阅 DigitalPebble 邮件列表上的答案，您应该在其中询问有关 Behemoth 的问题[https://groups.google.com/d/msg/digitalpebble/o_6xHtt1rpk/ZdKa6JKcRGIJ](https://groups.google.com/d/msg/digitalpebble/o_6xHtt1rpk/ZdKa6JKcRGIJ)

# java - 用java操作程序

> ID：15729401
> 
> 赞同：0
> 
> 时间：2013-03-31T12:32:47.643
> 
> 标签：java, swing, field, bittorrent, utorrent

我不知道这是否可能（我在谷歌上搜索了很多），但我想操纵正在运行的程序（utorrent）的字段。在我打开一个文件（比如说 example.torrent）后，utorrent 会弹出并要求一个文件夹来保存文件。我想要做的是用我用我的java程序动态给出的特定路径完成该字段，然后按OK，所有这些都应该在后台发生（我不想看到文件是如何打开的）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T12:36:14.303

看看[机器人](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Robot.html)类。它可以控制鼠标位置、插入符号位置、按键等。尽管它是为演示目的而设计的，但我相信您可以根据需要对其进行修改。

# php - codeigniter：无法使用连接检索数据

> ID：15729405
> 
> 赞同：1
> 
> 时间：2013-03-31T12:33:17.233
> 
> 标签：php, mysql, codeigniter, join

目前我有外键 thirdsmcontent_id 值，现在我想获取的值

`thirdsubmenu_name`从`thirdmenu`表，`submenu_name`从`submenu`表，`menu_name` 从`mainmenu`表。

请帮我解决这个问题。我尝试了下面的代码，但我的模型代码不正确。它不显示我的数据

**我的数据库表结构**

```
 1)Table: mainmenu
    ---------------
     mainmenu_id   PK(primary key)
     menu_name     ..... 

    2)Table: submenu
    -------------------
     submenu_id     PK
     mainmenu_id    FK (foreign key refrences mainmenu table)
     submenu_name   ..... 

    3)Table: thirdsubmenu
    --------------------
      thirdsubmenu_id     PK
      submenu_id          FK (foreign key refrences submenu table)
      thirdsubmenu_name     ........

    4)Table: thirdsmcontentdetails
    --------------------
      thirdsmcontent_id   PK
      thirdsubmenu_id     FK (foreign key refrences thirdsubmenu table)
      content              ...... 
```

**在我的控制器中**

```
 $thirdsubmenu_id = $this->uri->segment(4);

   $data['main_menuname'] = $this->thirdsmcontentdetailsmodel->getMainMenuNameOfSubmenu($thirdsubmenu_id); 
```

**在我的模型中**

```
 //---------------------------get Main Menu Name by Menu id-----------------------------------
 function getMainMenuNameOfSubmenu($thirdsubmenu_id)
  {     
         $this->load->database();
         $query = $this->db->join('thirdsubmenu','thirdsubmenu.submenu_id = thirdsmcontentdetails.submenu_id')->get_where('thirdsubmenu',array('thirdsubmenu_id'=>$thirdsubmenu_id));  
         return $query->row('menu_name'); 
  } 
```

得到错误：

```
 A Database Error Occurred

    Error Number: 1066

    Not unique table/alias: 'thirdsubmenu'

    SELECT * FROM (`thirdsubmenu`) JOIN `thirdsubmenu` ON `thirdsubmenu`.`submenu_id` = `thirdsmcontentdetails`.`submenu_id` WHERE `thirdsubmenu_id` = '1'

    Filename: D:\xampp\htdocs\system\database\DB_driver.php

    Line Number: 330 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T12:43:09.097

您正在定义两者`FROM`，`JOIN`因为`thirdsubmenu`这是不可能的，也没有任何意义。要么使用：

```
$this->db->join('thirdsubmenu','thirdsubmenu.submenu_id = thirdsmcontentdetails.submenu_id');
$query = $this->db->get_where('thirdsmcontentdetails',array('thirdsubmenu_id'=>$thirdsubmenu_id)); 
```

或者：

```
$this->db->from('thirdsmcontentdetails');
$this->db->join('thirdsubmenu','thirdsubmenu.submenu_id = thirdsmcontentdetails.submenu_id')
$this->db->where(array('thirdsubmenu_id'=>$thirdsubmenu_id));
$query = $this->db->get(); 
```

看看[`CI documentation`](http://ellislab.com/codeigniter/user-guide/database/active_record.html)你必须如何定义一个连接。

# javascript - 如何为包含 HTML 和 JavaScript 或 jQuery 的网页编写 Jasmine 测试？

> ID：15729407
> 
> 赞同：7
> 
> 时间：2013-03-31T12:33:27.577
> 
> 标签：javascript, bdd, jasmine

我在 Jasmine 上阅读的材料中，他们只测试了一个`.js`文件。但是，如果测试是在网页上进行的，例如，使用代码：

尝试.html：

```
<input id="the-input"></input>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>

    $("#the-input").focus(function() {
        $(this).css("background", "#ff9");
    });

    $("#the-input").blur(function() {
        $(this).css("background", "#cff");
    });  

</script> 
```

也就是说，如果用户点击输入框（或 tab 进入），则将框的背景设置为黄色，当焦点离开时，将其设置为浅蓝色。在这种情况下，我们如何在 .html 文件中测试上述行为？（这个 html 文件应该在哪里——它可以在 Jasmine lib 文件和 SpecRunner.html 之外的任何地方，以及 SpecRunner.html 如何以某种方式包含它以测试页面？

一个 jsfiddle 在：http: [//jsfiddle.net/MspUF/](http://jsfiddle.net/MspUF/)

**更新：**将 HTML 内容和 JavaScript 代码分开是可以的，但是，能够测试它的细节是什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T23:02:27.020

经过一番研究，我找到了一种将 JavaScript 与 HTML、CSS 和 JSON 数据一起测试的简单方法。它是[Jasmine-jQuery](https://github.com/velesin/jasmine-jquery)，那些被称为 HTML 固定装置等。所以不是一个完整的、独立的页面，但可能足以告诉你的小部件在鼠标悬停在它上面时可以正常工作，或者如果用户点击某些东西会发生什么. （通过使用 jQuery`.mouseover()`或`.click()`等）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T12:39:56.530

通常，将脚本移动到`js`Web 浏览器中的外部文件也是最佳实践。

您可以将代码移动到`.js`文件中，然后通过执行以下操作将其包含在 HTML 中：

```
<script src='myfile.js'> 
```

其中将包含它，这将允许您轻松使用 Jasmine 测试文件。您可以模拟您的 DOM 以在 DOM 之外进行单元测试。

如果您需要一般测试而不是单元测试，我建议类似的东西[`PhantomJS`](http://phantomjs.org/)实际上会模拟浏览器并使您能够测试完整的用户体验。（其他好的替代品包括我成功使用的 Selenium）

另外，[这是一篇](http://msdn.microsoft.com/en-us/magazine/ff452703.aspx)关于使用 QUnit 测试 jQuery 的好文章。

# scala - 如何使用 scala 组合器获得左关联运算符？

> ID：15729412
> 
> 赞同：1
> 
> 时间：2013-03-31T12:34:33.777
> 
> 标签：scala, parser-combinators

我试过了

```
/* inside RegexParser class */
def exp : Parser[Exp] = 
  term~addop_chain ^^ {case l~ThenAdd(optype,r) => AritOp(l,optype,r)}

def addop_chain : Parser[Exp] = 
  ("+"|"-")~term~addop_chain ^^ {case sym~term~ThenAdd(optype,r) => ThenAdd(sym, AritOp(term,optype,r)) }  |
  ("+"|"-")~term ^^ {case sym~term => ThenAdd(sym, term)}

def term = /* right now, only int literal. code unrelevant */

/* Case classes for storing: */
case class ThenAdd(sym: String, r: Exp)
case class AritOp(l: Exp, sym: String, r: Exp) 
```

哪个有效！但它是右关联（不是左关联），例如 5+(3-2)，这不是我想要的。

我想要的是这样的：

```
5+3-2 
```

应该成为

```
AritOp(AritOp(5,+,3), -, 2) 
```

（左关联）但是如果没有（正确的？）左递归，这几乎是不可能的。我能做些什么？

（约束：我不能使用`rep, repsep, opt`（我正在做作业，所以语法应该尽可能为 BNF（即**不是 EBNF**）））

# c - 是否“long int num=24;” 和“int num=24L;” 做同样的事？

> ID：15729414
> 
> 赞同：0
> 
> 时间：2013-03-31T12:34:50.497
> 
> 标签：c

是否都声明和启动一个长整数？

我希望这对这个论坛来说不是太基本的问题。我想知道上述两个语句是否实现相同的事情，即声明一个长整数变量 num 并将其初始化为 24。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T12:39:06.707

> `long int num = 24;`和`int num = 24L`一样吗？

他们是不同的。

第一个“创建”一个类型变量，`long int`并将`int`值 24隐式转换为`long int`赋值前的类型。第二个“创建”一个类型变量，`int`并将`long int`值 24隐式转换为`int`赋值前的类型。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-31T12:36:27.597

不，`long int`声明一个 long int，并`int`声明一个 int 变量。变量的类型从不取决于它被“初始化”的值（更准确地说，分配给）。因此，当且仅当类型`long int`和`int`在您的环境中相同时，这两个声明是相同的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-31T12:39:58.560

不完全是。`long int`并且`int`不能保证，但应该是不同的尺寸。

```
long int num = 24; 
```

这是安全`24`的，就像 int 一样，即（隐式）提升为`long int`.

```
int num = 24L; 
```

一般来说，这并不安全。`24L`定义 a `long int`，即“截断”为`int`，如果`sizeof(int)`<`sizeof(long int)`可能有问题。

为什么是“一般”和“可以”？因为在这种情况下，两件事都是一样的，而且是安全的。但是假设执行以下操作：

```
int num = xL; 
```

可以容纳但不能`x`容纳的大数字在哪里？然后你有一个溢出。`long int``int`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-31T12:38:48.327

不，变量的类型由变量的类型定义，仅由其左侧的类型定义：

*   `long int num`将变量声明`num`为 long int；
*   `int num`将变量声明`num`为 int。

同时，等号的右边也是独立定义的。

*   `24`是一个整数；
*   `24L`是一个长整数

右手边（在这种情况下是`24`or `24L`）可能会被强制（*即*改变）以适应左手边（在这种情况下是变量`num`），但**绝不**会反过来。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-31T12:39:57.397

需要区分变量的类型和用于初始化变量的常量的类型。

第一个声明声明了一个`long int`变量并将其初始化为值`24L`（将整数常量转换为 后得到的值`24`）`long int`。第二个声明声明一个`int`变量并将其初始化为该值`24`（这是您将长整型常量`24L`转换为. 后得到的值`int`。）

# android - 当我的整个应用程序在后台时，我如何知道我的服务

> ID：15729416
> 
> 赞同：0
> 
> 时间：2013-03-31T12:35:06.177
> 
> 标签：android, activity-lifecycle

主要是我想做的是当用户使用我的应用程序并按下主页按钮或只是退出应用程序（无论他退出哪种方式），下次他进入应用程序时我想显示的第一页我的应用程序（而不是他所在的最后一个屏幕）。

我想做这个：

*   当用户退出应用程序时，我会将其从内存中删除，以便应用程序服务继续运行
*   但是下次用户进入应用程序时，它将从第一页开始

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T12:52:53.577

基本上问题是你需要知道你的应用程序是否被发送到后台。

如果它被发送到后台，那么当任何启动时，它会在退出之前`Activity`加载您的“第一页”活动。`onCreate()`

* * *

查看我前段时间问过的这个问题中的一些解决方案 - 很多建议都非常好：

*   [应用程序进入后台时Android自动注销](https://stackoverflow.com/questions/8968265/android-auto-logout-when-app-goes-to-background)

有些答案可能比其他答案更适合您。

有2个基本思想：

1.  在 中`onPause()`，检查您的应用程序是否是正在运行的应用程序之一（请参阅下面的链接）
2.  in`onPause()`和 in `onResume()`，获取时间戳。如果时间相差超过几毫秒，那么您可以假设应用程序已发送到后台。这可以通过创建一个基`Activity`子类来轻松完成，您的所有其他活动都从该子类继承。

* * *

在这个问题上，我给出了类似于上面（1）的答案：

*   [当 Android 应用程序关闭/发送到后台时运行代码](https://stackoverflow.com/a/6357860/383414)

# java - 从给定的表单中提取值

> ID：15729417
> 
> 赞同：1
> 
> 时间：2013-03-31T12:35:12.677
> 
> 标签：java, swing, jtable, jtextfield

我想在单击按钮时提取值`save`。`JTextField`从行和`JTable`列中提取值。只是想大致了解如何在不同变量中提取和保存值。我想在按钮保存下执行这些保存操作。

```
package build;

import java.awt.*;
import javax.swing.*;
import com.jgoodies.forms.layout.FormLayout;
import com.jgoodies.forms.layout.ColumnSpec;
import com.jgoodies.forms.layout.RowSpec;
import com.jgoodies.forms.factories.FormFactory;
import javax.swing.table.DefaultTableModel;
import javax.swing.border.TitledBorder;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;

public class Table_Edit {

    private JTextField textField;
    private JTable table;
    private String Table_Name = new String();

    public Table_Edit() {
        JFrame frame = new JFrame("Table");

        frame.setSize(600, 400);
        frame.getContentPane().setLayout(new FormLayout(new ColumnSpec[]{
            FormFactory.RELATED_GAP_COLSPEC,
            FormFactory.DEFAULT_COLSPEC,
            FormFactory.RELATED_GAP_COLSPEC,
            FormFactory.DEFAULT_COLSPEC,
            FormFactory.RELATED_GAP_COLSPEC,
            FormFactory.DEFAULT_COLSPEC,
            FormFactory.RELATED_GAP_COLSPEC,
            FormFactory.DEFAULT_COLSPEC,
            FormFactory.RELATED_GAP_COLSPEC,
            FormFactory.DEFAULT_COLSPEC,
            FormFactory.RELATED_GAP_COLSPEC,
            FormFactory.DEFAULT_COLSPEC,
            FormFactory.RELATED_GAP_COLSPEC,
            FormFactory.DEFAULT_COLSPEC,
            FormFactory.RELATED_GAP_COLSPEC,
            FormFactory.DEFAULT_COLSPEC,
            FormFactory.RELATED_GAP_COLSPEC,
            FormFactory.DEFAULT_COLSPEC,
            FormFactory.RELATED_GAP_COLSPEC,
            FormFactory.DEFAULT_COLSPEC,
            FormFactory.RELATED_GAP_COLSPEC,
            FormFactory.DEFAULT_COLSPEC,
            FormFactory.RELATED_GAP_COLSPEC,
            FormFactory.DEFAULT_COLSPEC,
            FormFactory.RELATED_GAP_COLSPEC,
            FormFactory.DEFAULT_COLSPEC,
            FormFactory.RELATED_GAP_COLSPEC,
            FormFactory.DEFAULT_COLSPEC,
            FormFactory.RELATED_GAP_COLSPEC,
            ColumnSpec.decode("default:grow"),
            FormFactory.RELATED_GAP_COLSPEC,
            ColumnSpec.decode("default:grow"),},
            new RowSpec[]{
            FormFactory.RELATED_GAP_ROWSPEC,
            FormFactory.DEFAULT_ROWSPEC,
            FormFactory.RELATED_GAP_ROWSPEC,
            RowSpec.decode("default:grow"),
            FormFactory.RELATED_GAP_ROWSPEC,
            RowSpec.decode("default:grow"),}));

        JLabel lblTableName = new JLabel("Table Name :");
        frame.getContentPane().add(lblTableName, "2, 2, right, default");

        textField = new JTextField(Table_Name);
        textField.setComponentOrientation(ComponentOrientation.LEFT_TO_RIGHT);
        frame.getContentPane().add(textField, "4, 2, 9, 1, left, center");
        textField.setColumns(10);

        JScrollPane scrollPane = new JScrollPane();
        frame.getContentPane().add(scrollPane, "3, 4, 29, 1, fill, fill");

        table = new JTable();
        table.setFillsViewportHeight(true);
        scrollPane.setViewportView(table);
        table.setBorder(new TitledBorder(null, "",
            TitledBorder.CENTER, TitledBorder.TOP, null, null));
        table.setColumnSelectionAllowed(true);
        table.setCellSelectionEnabled(true);
        table.setSelectionMode(ListSelectionModel.SINGLE_INTERVAL_SELECTION);
        table.setModel(new DefaultTableModel(
            new Object[][]{
            {null, null, null, null},
            {null, null, null, null},
            {null, null, null, null},
            {null, null, null, null},
            {null, null, null, null},
            {null, null, null, null},
            {null, null, null, null},
            {null, null, null, null},
            {null, null, null, null},
            {null, null, null, null},
            {null, null, null, null},
            {null, null, null, null},
            {null, null, null, null},
            {null, null, null, null},},
            new String[]{
            "Column Name", "Data Type", "NN", "PK"
        }) {
            Class[] columnTypes = new Class[]{
                String.class, Object.class, Boolean.class, Boolean.class
            };

            public Class getColumnClass(int columnIndex) {
                return columnTypes[columnIndex];
            }
        });
        table.getColumnModel().getColumn(0).setResizable(false);
        table.getColumnModel().getColumn(0).setPreferredWidth(106);
        table.getColumnModel().getColumn(1).setResizable(false);
        table.getColumnModel().getColumn(1).setPreferredWidth(92);
        table.getColumnModel().getColumn(2).setResizable(false);
        table.getColumnModel().getColumn(2).setPreferredWidth(26);
        table.getColumnModel().getColumn(3).setResizable(false);
        table.getColumnModel().getColumn(3).setPreferredWidth(30);

        JPanel panel = new JPanel();
        frame.getContentPane().add(panel, "32, 6, right, fill");

        JButton Save = new JButton("Save");
        Save.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {

                System.out.print(Table_Name);
            }
        });
        Save.setMaximumSize(new Dimension(33, 19));
        Save.setIcon(new ImageIcon(Table_Edit.class.getResource(
            "/com/sun/java/swing/plaf/windows/icons/TreeOpen.gif")));
        panel.add(Save);

        JButton btnNewButton_1 = new JButton("Exit");
        btnNewButton_1.setIcon(new ImageIcon(Table_Edit.class.getResource(
            "/javax/swing/plaf/metal/icons/ocean/close.gif")));
        panel.add(btnNewButton_1);

        frame.setVisible(true);
    }

    public static void main(String[] args) {
        new Table_Edit();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T16:40:11.047

除了调用之外`textField.getText()`，您还可以获得对表模型的引用并使用以下方法迭代值`getValueAt()`：

```
JButton save = new JButton("Save");
save.addActionListener(new ActionListener() {
    @Override
    public void actionPerformed(ActionEvent e) {
        System.out.println(textField.getText());
        TableModel model = table.getModel();
        for (int r = 0; r < model.getRowCount(); r++) {
            for (int c = 0; c < model.getColumnCount(); c++) {
                System.out.print(model.getValueAt(r, c) + " ");
            }
            System.out.println();
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T12:40:58.957

从 jtextfield 中，您可以调用该`getText`方法以`String`类似的形式获取文本字段的内容：

```
String myString = textField.getText(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T16:40:53.297

从`JTable`使用[getValueAt](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JTable.html#getValueAt%28int,%20int%29)方法检索值。

根据@Abu 所述`JTextField`使用`textField.getText()`

# sharepoint - 如何为开发目的安装 Sharepoint Foundation

> ID：15729424
> 
> 赞同：0
> 
> 时间：2013-03-31T12:36:25.227
> 
> 标签：sharepoint

SharepointFoundation 2010 未安装在 Windows 7 上。

为了开发目的，我需要安装什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T12:25:07.693

First of all OS should be 64 Bit. Then you need to change config.xml file that you can find inside folder \files\Setup\config.xml. In this config.xml file you need to set

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-19T08:24:18.530

我认为这是在您的 PC 上创建虚拟环境的最聪明的方法。 [http://dynamics.co.il](http://dynamics.co.il)

# kannel - Kannel 发送不需要的“额外短信”

> ID：15729437
> 
> 赞同：1
> 
> 时间：2013-03-31T12:37:46.387
> 
> 标签：kannel

让 Kannel 在 Ubuntu12.10 上工作，它可以发送和接收短信。问题是，在它发送或接收的每条 SMS 之后，它都会发送一条额外的 SMS，其内容`Live SMS Live SMS`实际上是我的基于 ASP.Net 开发服务器的应用程序的名称。

当我运行我的 ASP 应用程序时，它会显示一个网页标题“Live SMS”和一行内容“Live SMS”。

我正在使用[Windows 的端口转发](http://www.quantumg.net/portforward.php)能够从另一台机器访问开发服务器 URL。

下面是我的 Kannel 日志，下面是我的 Kannel.conf 文件。

**通道日志**

```
2013-03-31 14:24:37 [22228] [4] INFO: Starting to service <U KJF2111G> from <+1826909535> to <1926909539>
2013-03-31 14:24:37 [22228] [4] DEBUG: Started thread 8 (gwlib/fdset.c:poller)
2013-03-31 14:24:37 [22228] [4] DEBUG: Started thread 9 (gwlib/http.c:write_request_thread)
2013-03-31 14:24:37 [22228] [9] DEBUG: Thread 9 (gwlib/http.c:write_request_thread) maps to pid 22228.
2013-03-31 14:24:37 [22228] [9] DEBUG: Queue contains 0 pending requests.
2013-03-31 14:24:37 [22228] [9] DEBUG: Parsing URL `http://192.168.152.1:8080/ProjRequestProcessor/ReceiveSMS.aspx?text=U+KJF2111G&sender1=%2B1826909535':
2013-03-31 14:24:37 [22228] [9] DEBUG:   Scheme: http://
2013-03-31 14:24:37 [22228] [9] DEBUG:   Host: 192.168.152.1
2013-03-31 14:24:37 [22228] [9] DEBUG:   Port: 8080
2013-03-31 14:24:37 [22228] [9] DEBUG:   Username: (null)
2013-03-31 14:24:37 [22228] [9] DEBUG:   Password: (null)
2013-03-31 14:24:37 [22228] [9] DEBUG:   Path: /ProjRequestProcessor/ReceiveSMS.aspx
2013-03-31 14:24:37 [22228] [9] DEBUG:   Query: text=U+KJF2111G&sender1=%2B1826909535
2013-03-31 14:24:37 [22228] [9] DEBUG:   Fragment: (null)
2013-03-31 14:24:37 [22228] [8] DEBUG: Thread 8 (gwlib/fdset.c:poller) maps to pid 22228.
2013-03-31 14:24:37 [22228] [9] DEBUG: HTTP: Opening connection to `192.168.152.1:8080' (fd=28).
2013-03-31 14:24:37 [22228] [9] DEBUG: Socket connecting
2013-03-31 14:24:37 [22228] [8] DEBUG: Get info about connecting socket
2013-03-31 14:24:37 [22228] [8] DEBUG: HTTP: Sending request:
2013-03-31 14:24:37 [22228] [8] DEBUG: Octet string at 0x7ff9280008e0:
2013-03-31 14:24:37 [22228] [8] DEBUG:   len:  171
2013-03-31 14:24:37 [22228] [8] DEBUG:   size: 1024
2013-03-31 14:24:37 [22228] [8] DEBUG:   immutable: 0
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 47 45 54 20 2f 55 50 61 72 6b 52 65 71 75 65 73   GET /ProjReques
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 74 50 72 6f 63 65 73 73 6f 72 2f 52 65 63 65 69   tProcessor/Recei
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 76 65 53 4d 53 2e 61 73 70 78 3f 74 65 78 74 3d   veSMS.aspx?text=
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 55 2b 4b 4a 46 32 31 31 31 47 26 73 65 6e 64 65   U+KJF2111G&sende
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 72 31 3d 25 32 42 32 35 34 37 32 36 37 30 33 35   r1=%2B1826909535
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 33 35 20 48 54 54 50 2f 31 2e 31 0d 0a 48 6f 73   35 HTTP/1.1..Hos
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 74 3a 20 31 39 32 2e 31 36 38 2e 31 35 32 2e 31   t: 192.168.152.1
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 3a 38 30 38 30 0d 0a 43 6f 6e 6e 65 63 74 69 6f   :8080..Connectio
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 6e 3a 20 6b 65 65 70 2d 61 6c 69 76 65 0d 0a 55   n: keep-alive..U
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 73 65 72 2d 41 67 65 6e 74 3a 20 4b 61 6e 6e 65   ser-Agent: Kanne
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 6c 2f 31 2e 34 2e 33 0d 0a 0d 0a                  l/1.4.3....
2013-03-31 14:24:37 [22228] [8] DEBUG: Octet string dump ends.
2013-03-31 14:24:37 [22228] [2] DEBUG: HTTP: Creating HTTPClient for `192.168.152.1'.
2013-03-31 14:24:37 [22228] [2] DEBUG: HTTP: Created HTTPClient area 0x7ff94c000a90.
2013-03-31 14:24:37 [22228] [3] INFO: smsbox: Got HTTP request </cgi-bin/sendsms> from <192.168.152.1>
2013-03-31 14:24:37 [22228] [3] INFO: sendsms used by <kannel>
2013-03-31 14:24:37 [22228] [3] INFO: sendsms sender:<kannel:13013> (192.168.152.1) to:< 1826909535> msg:<UDA3HA4DK9 confirmed. We have recived your SMS

Thank you for working with Proj.>
2013-03-31 14:24:37 [22228] [3] DEBUG: Stored UUID 39d39482-bb0a-4b0b-b08d-420dc9c2e467
2013-03-31 14:24:37 [22228] [3] DEBUG: message length 118, sending 1 messages
2013-03-31 14:24:37 [22228] [3] DEBUG: Status: 202 Answer: <Sent.>
2013-03-31 14:24:37 [22228] [3] DEBUG: Delayed reply - wait for bearerbox
2013-03-31 14:24:37 [22228] [0] DEBUG: Got ACK (0) of 39d39482-bb0a-4b0b-b08d-420dc9c2e467
2013-03-31 14:24:37 [22228] [0] DEBUG: HTTP: Resetting HTTPClient for `192.168.152.1'.
2013-03-31 14:24:37 [22228] [8] DEBUG: HTTP: Status line: <HTTP/1.1 200 OK>
2013-03-31 14:24:37 [22228] [8] DEBUG: HTTP: Received response:
2013-03-31 14:24:37 [22228] [8] DEBUG: Octet string at 0x7ff928001190:
2013-03-31 14:24:37 [22228] [8] DEBUG:   len:  863
2013-03-31 14:24:37 [22228] [8] DEBUG:   size: 1024
2013-03-31 14:24:37 [22228] [8] DEBUG:   immutable: 0
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 53 65 72 76 65 72 3a 20 41 53 50 2e 4e 45 54 20   Server: ASP.NET 
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 44 65 76 65 6c 6f 70 6d 65 6e 74 20 53 65 72 76   Development Serv
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 65 72 2f 31 30 2e 30 2e 30 2e 30 0d 0a 44 61 74   er/10.0.0.0..Dat
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 65 3a 20 53 75 6e 2c 20 33 31 20 4d 61 72 20 32   e: Sun, 31 Mar 2
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 30 31 33 20 31 31 3a 32 35 3a 31 37 20 47 4d 54   013 11:25:17 GMT
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 0d 0a 58 2d 41 73 70 4e 65 74 2d 56 65 72 73 69   ..X-AspNet-Versi
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 6f 6e 3a 20 34 2e 30 2e 33 30 33 31 39 0d 0a 43   on: 4.0.30319..C
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 61 63 68 65 2d 43 6f 6e 74 72 6f 6c 3a 20 70 72   ache-Control: pr
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 69 76 61 74 65 0d 0a 43 6f 6e 74 65 6e 74 2d 54   ivate..Content-T
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 79 70 65 3a 20 74 65 78 74 2f 68 74 6d 6c 3b 20   ype: text/html; 
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 63 68 61 72 73 65 74 3d 75 74 66 2d 38 0d 0a 43   charset=utf-8..C
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 6f 6e 74 65 6e 74 2d 4c 65 6e 67 74 68 3a 20 36   ontent-Length: 6
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 34 36 0d 0a 43 6f 6e 6e 65 63 74 69 6f 6e 3a 20   46..Connection: 
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 43 6c 6f 73 65 0d 0a 0d 0a 0d 0a 0d 0a 3c 21 44   Close........<!D
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 4f 43 54 59 50 45 20 68 74 6d 6c 20 50 55 42 4c   OCTYPE html PUBL
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 49 43 20 22 2d 2f 2f 57 33 43 2f 2f 44 54 44 20   IC "-//W3C//DTD 
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 58 48 54 4d 4c 20 31 2e 30 20 54 72 61 6e 73 69   XHTML 1.0 Transi
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 74 69 6f 6e 61 6c 2f 2f 45 4e 22 20 22 68 74 74   tional//EN" "htt
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 70 3a 2f 2f 77 77 77 2e 77 33 2e 6f 72 67 2f 54   p://www.w3.org/T
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 52 2f 78 68 74 6d 6c 31 2f 44 54 44 2f 78 68 74   R/xhtml1/DTD/xht
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 6d 6c 31 2d 74 72 61 6e 73 69 74 69 6f 6e 61 6c   ml1-transitional
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 2e 64 74 64 22 3e 0d 0a 0d 0a 3c 68 74 6d 6c 20   .dtd">....<html 
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 78 6d 6c 6e 73 3d 22 68 74 74 70 3a 2f 2f 77 77   xmlns="http://ww
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 77 2e 77 33 2e 6f 72 67 2f 31 39 39 39 2f 78 68   w.w3.org/1999/xh
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 74 6d 6c 22 20 3e 0d 0a 3c 68 65 61 64 3e 3c 74   tml" >..<head><t
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 69 74 6c 65 3e 0d 0a 09 4c 69 76 65 20 53 4d 53   itle>...Live SMS
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 0d 0a 3c 2f 74 69 74 6c 65 3e 3c 2f 68 65 61 64   ..</title></head
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 3e 0d 0a 0d 0a 3c 62 6f 64 79 3e 0d 0a 20 20 20   >....<body>..   
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 20 3c 66 6f 72 6d 20 6e 61 6d 65 3d 22 66 6f 72    <form name="for
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 6d 31 22 20 6d 65 74 68 6f 64 3d 22 70 6f 73 74   m1" method="post
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 22 20 61 63 74 69 6f 6e 3d 22 52 65 63 65 69 76   " action="Receiv
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 65 53 4d 53 2e 61 73 70 78 3f 74 65 78 74 3d 55   eSMS.aspx?text=U
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 2b 4b 4a 46 32 31 31 31 47 26 61 6d 70 3b 73 65   +KJF2111G&amp;se
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 6e 64 65 72 31 3d 25 32 62 32 35 34 37 32 36 37   nder1=%2b1826909
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 30 33 35 33 35 22 20 69 64 3d 22 66 6f 72 6d 31   9574" id="form1
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 22 3e 0d 0a 3c 69 6e 70 75 74 20 74 79 70 65 3d   ">..<input type=
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 22 68 69 64 64 65 6e 22 20 6e 61 6d 65 3d 22 5f   "hidden" name="_
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 5f 56 49 45 57 53 54 41 54 45 22 20 69 64 3d 22   _VIEWSTATE" id="
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 5f 5f 56 49 45 57 53 54 41 54 45 22 20 76 61 6c   __VIEWSTATE" val
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 75 65 3d 22 2f 77 45 50 44 77 55 4b 4d 54 45 7a   ue="/wEPDwUKMTEz
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 4d 6a 59 33 4d 7a 51 30 4d 32 52 6b 49 31 41 49   MjY3MzQ0M2RkI1AI
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 59 65 5a 5a 65 6f 63 7a 75 59 6c 37 7a 73 4a 73   YeZZeoczuYl7zsJs
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 78 31 31 74 30 78 7a 4b 36 2b 44 4d 4d 76 4e 71   x11t0xzK6+DMMvNq
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 53 57 73 54 32 50 49 3d 22 20 2f 3e 0d 0a 0d 0a   SWsT2PI=" />....
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 20 20 20 20 20 20 20 20 20 20 20 3c 43 6f 6e 74              <Cont
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 65 6e 74 54 65 6d 70 6c 61 74 65 3e 0d 0a 20 20   entTemplate>..  
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 73                 <s
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 70 61 6e 20 69 64 3d 22 44 61 74 65 53 74 61 6d   pan id="DateStam
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 70 4c 61 62 65 6c 22 3e 4c 49 56 45 20 53 4d 53   pLabel">LIVE SMS
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 3c 2f 73 70 61 6e 3e 0d 0a 20 20 20 20 20 20 20   </span>..       
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 20 20 20 20 20 3c 2f 43 6f 6e 74 65 6e 74 54 65        </ContentTe
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 6d 70 6c 61 74 65 3e 20 20 20 20 20 20 20 0d 0a   mplate>       ..
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 20 20 20 20 3c 2f 66 6f 72 6d 3e 0d 0a 3c 2f 62       </form>..</b
2013-03-31 14:24:37 [22228] [8] DEBUG:   data: 6f 64 79 3e 0d 0a 3c 2f 68 74 6d 6c 3e 0d 0a      ody>..</html>..
2013-03-31 14:24:37 [22228] [8] DEBUG: Octet string dump ends.
2013-03-31 14:24:37 [22228] [5] DEBUG: message length 17, sending 1 messages
2013-03-31 14:24:37 [22228] [0] DEBUG: Got ACK (0) of 2be85cf7-4d1f-4424-96a9-4577ba065623
2013-03-31 14:24:37 [22228] [0] DEBUG: No client - multi-send or ACK to pull-reply
2013-03-31 14:25:37 [22228] [1] DEBUG: Timeout for fd:29 appeares.
2013-03-31 14:25:37 [22228] [1] DEBUG: HTTP: Destroying HTTPClient area 0x7ff94c000a90.
2013-03-31 14:25:37 [22228] [1] DEBUG: HTTP: Destroying HTTPClient for `192.168.152.1'. 
```

**Kannel.conf**

```
group = core
admin-port = 13000
smsbox-port = 13001
admin-password = bar
status-password = foo
log-file = "/var/log/kannel/bearerbox.log"
log-level = 0
box-deny-ip = "*.*.*.*"
box-allow-ip = "127.0.0.1"

group = smsc
smsc = at
modemtype = huawei
device = /dev/ttyUSB1
speed = 19200
my-number = 7777777
validityperiod = 167

group = modems 
id = huawei
name = "huawei e160" 
detect-string = "e160"
init-string = "AT+CNMI=1,2,0,1,0" 
speed = 115200

group = smsbox
bearerbox-host = localhost
sendsms-port = 13013
#global-sender = 13013
global-sender = 1926909539
SMSC: +150555555
sendsms-chars = "0123456789 +-"
log-file = "/var/log/kannel/smsbox.log"
log-level = 0
access-log = "/var/log/kannel/access.log"

group = sendsms-user
username = kannel
password = kannel
concatenation = true
max-messages = 3

group = sms-service
keyword = default
get-url = "http://localhost/kannel/receivesms.php?sender=%p&text=%b"
accept-x-kannel-headers = true
max-messages = 3
concatenation = true
catch-all = true 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-16T08:02:35.983

在 kannel 配置的服务组中设置此项

```
max-messages = 0 
```

无论http请求返回什么，结果文本内容都不会被发送出去

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T14:43:02.613

当 Kannel 收到一条消息时，它会被传递到 sms-service 组中的 URL，并将来自 URL 请求的响应发送回给用户——这是标准行为。

如果响应具有*text/html*内容类型，则会删除 HTML 标记，并且只发回文本内容，在您的情况下，它将变为“Live SMS Live SMS”。

如果您不想发送任何类型的响应，只需将响应留空即可。

# javascript - node.js 中的函数顺序

> ID：15729441
> 
> 赞同：-1
> 
> 时间：2013-03-31T12:38:14.703
> 
> 标签：javascript, node.js, mongodb, express

我有 node.js 和 express3。

对于 mongodb 的使用，我需要[mongo-lazy](https://npmjs.org/package/mongo-lazy)包。

所以，我有简单的 GET 路由器：

```
var db = require('mongo-lazy').open({
    db: 'somedb',
    host: '127.0.0.1',
    port: 27017,
    user: 'someuser',
    password: 'somepassword'
});

var result={};

db.person.findAll({}, function (err, persons) {
    result.err=err; 
    result.persons=persons;
    console.log("__0: " + typeof persons);
    console.log("__1: " + typeof result.persons);
});
console.log("__2: " + typeof result.persons);

if (!result.err) res.send("test"); 
```

控制台是：

```
Express server listening on port 3000
__2: undefined
GET /mongo 200 1508ms - 5
__0: object
__1: object 
```

所以，问题是：

1.  为什么node先调用__2，再调用__0、__1在__2之后，但是线序是other？
2.  怎么放`err`，`persons`进去`result`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T12:43:55.333

`findAll()`是一个异步调用，传递给它的函数是函数返回时要执行的回调。像这样重新排列以获得预期的行为；

```
db.person.findAll({}, function (err, persons) {
    if (!err) res.send(persons);
}); 
```

# selenium - 使用 FlatSpec、Selenium DSL 和 Spring 的 ParallelTestExecution

> ID：15729451
> 
> 赞同：1
> 
> 时间：2013-03-31T12:39:06.090
> 
> 标签：selenium, scalatest

我正在使用 Scalatest、FlatSpec、Spring、Selenium DSL 和 BeforeAndAfterAll。其中一件事情似乎会阻止 ParallelTestExecution 正常工作。当我运行一个包含两个测试的类时会发生这种情况：

1.  一个浏览器打开并执行一些 beforeAll 的东西（但不是 Spring 的东西）
2.  另一个浏览器打开并执行 beforeAll 的东西
3.  第二个浏览器用于第一次测试然后关闭
4.  另一个浏览器打开并执行 beforeAll 内容，然后进行第二次测试
5.  第一和第三浏览器关闭

所以基本上测试运行与没有 ParallelTestExecution 的情况完全相同，只是打开了一个额外的窗口？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-31T16:45:42.997

我想你可能会观察到两种不同的效果。首先，ParallelTestExecution 扩展了 OneInstancePerTest。它在自己的实例中运行每个测试，以减少测试之间共享可变状态的可能性，从而将并发 Heisenbugs 引入您的测试。但这样做的方式是测试类的初始实例为每个测试创建一个实例，并将这些实例传递给分发器（*如果已定义*），分发器将并行运行它们。因此，由于您有两个测试，您将获得测试类的三个实例——在主线程上运行的初始实例，以及两个特定于测试的实例，每个测试一个，可以并行运行这些测试。由于您的 beforeAll 和 afterAll 方法具有创建和关闭 Web 浏览器的副作用，因此您会看到该副作用 3 次。

可能发生的另一件事是 ParallelTestExecution 只会在您告诉 ScalaTest 您通常希望并行执行时并行运行测试。如果您使用的是 Runner，则可以通过传入 -P 来完成。否则不会定义分发器，在这种情况下，ParallelTestExecution 只是在主线程（调用 run 的线程）上按顺序执行测试。

ParallelTestExecution 适用于您实际上需要在同一个测试类中并行执行测试的极少数情况。一个例子可能是一个测试类，它有很多非常慢的测试。在大多数情况下，我希望 ScalaTest 并行运行套件的默认方法可以为您提供与并行运行测试一样好的性能提升。要获得这种并行执行，您不需要混合任何特征（即，不需要 ParallelTestExecution）。只需将 -P 传递给 Runner，或告诉 sbt 并行运行 ScalaTest 等。

此外，BeforeAndAfterAll 适用于需要在所有测试和嵌套套件之前和之后发生的事情。如果您希望每个测试都有自己的浏览器，那么您可能希望改用 BeforeAndAfterEach。在 ParallelTestExecution 案例中，这只会弹出两个浏览器，而不是三个。如果您真的希望所有测试共享同一个浏览器，那么我会检查 Selenium 文档以确保这是可能的。可能 Selenium 一次只能让您与给定的 WebBrowser 驱动程序进行一次交互。

总之，如果我猜对了你真正想要完成的事情，我会放弃 ParallelTestExecution，将 BeforeAndAfterAll 更改为 BeforeAndAfterEach（或使用 withFixture），并将 -P 传递给 Runner（直接，通过 ant 或 Maven）或询问 sbt并行运行 ScalaTest。

# ios - 根据数组对 NSFetchedResultsController 结果进行排序？

> ID：15729454
> 
> 赞同：3
> 
> 时间：2013-03-31T12:39:35.910
> 
> 标签：ios, objective-c, cocoa-touch, core-data, nssortdescriptor

我想构建一个基于数组内容的 NSPredicate 或 NSSortDescriptor（核心数据搜索）。

该数组将按`userId:s`正确的顺序组成：

```
[1, 2, 5, 3]; 
```

我想以相同的顺序呈现我的 NSFetchedResultsController 的结果。

所以我会：

1.  获得合适的用户（我已经这样做了）
2.  使用 s 根据我的排序数组对用户列表进行排序`userId`。

这可能吗，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T14:03:15.947

我认为这是不可能的。对获取请求的结果（对于基于 SQLite 的存储）进行排序是在 SQLite 级别上完成的，并且只能使用存储在数据库中的持久属性。排序描述符不能使用 Objective-C 函数或变量。

所以要么

*   您向您的实体添加一个额外的属性来描述预期的顺序（如果可能的话），或者
*   您在获取结果后根据需要对结果进行排序（这意味着您不能再使用获取的结果控制器进行自动更改跟踪）。也许您可以使用此处描述的方法：[https](https://stackoverflow.com/a/15618277/1187415) ://stackoverflow.com/a/15618277/1187415 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-09T09:13:12.207

上面的答案并不完全正确。你可以做你想做的，但它有点复杂。

1.  在 NSNumber 上创建一个类别（userID 是一个数字，对吗？）
2.  使用 objc_setAssoc 将 NSArray 类型的 + 全局变量放到类别中...。

    ```
    @interface NSNumber(MyExtension)

    + (NSArray *) orderingArray;
    + (void) setOrderingArray: (NSArray *)array;

    - (NSComparisonResult) myOwnCompareMethodUsingArray:(NSNumber *)theOtherNumber;

    @end

    int keyVar = 0;

    @implementation NSNumber(MyExtension)

    + (NSArray *) orderingArray
    {
     return objc_getAssociatedObject(self, &keyVal);
    }
    + (void) setOrderingArray: (NSArray *)array
    {
        objc_setAssociatedObject(self, &keyVal, array, OBJC_ASSOCIATION_RETAIN_NONATOMIC);
    }

    - (NSComparisonResult) myOwnCompareMethodUsingArray:(NSNumber *)theOtherNumber;
    {
     NSArray *a = [self.class orderingArray];
     if(!a) return NSOrderedSame;
     return [@([a indexOfObject:self]) compare: @([a indexOfObject:theOtherNumber])];
    } 
    ```

3.  在某处设置数组：

    ```
    [NSNumber setOrderingArray:myArrayWithKeys]; 
    ```

4.  使用类型的排序描述符：

    ```
    [NSSortDescriptor sortDescriptorWithKey:@"userId" ascending:YES selector @selector(myOwnCompareMethodUsingArray:)] 
    ```

这显然适用于具有localizedCaseInsensitiveCompare 的字符串：但是，如果它足够大并覆盖任何fetchLimit/fetchOffset 优化，它将降低查询的性能。请记住，您正在操作的领域必须是独一无二的，否则一切都会陷入困境。

# python - Python ElementTree HTTP 响应字符串 ParseError

> ID：15729456
> 
> 赞同：1
> 
> 时间：2013-03-31T12:39:49.673
> 
> 标签：python, xml, web-services, elementtree

我在 Python 中使用 ElementTree 解析 XML。当我从字符串解析 XML 时，它工作正常，但是当我从 HTTP 响应解析字符串时，我得到：

```
ParseError: no element found: line 1, column 0 
```

代码：

```
params = urllib.urlencode({'service':'A','U': 'user', 'pw': 'pw'})
f  = urllib.urlopen("http://localhost/default.aspx?%s" % params)
response = f.read()
reponse_1 = """<?xml version="1.0" encoding="utf-8" ?><DATA><key id="SESSIONID">fb48b53fec5840bf9327b243d3e4f126</key></DATA>"""
root = ET.fromstring(response) 
```

当我做：

```
ET.fromstring(response_1) 
```

它可以工作，但是当我从 HTTP 响应中做同样的事情时。我明白了`ParseError`。我已经检查了响应是否为类型`str`，否则它看起来完全一样。

这里发生了什么事？

# iphone - UINavigationbar 覆盖视图顶部

> ID：15729465
> 
> 赞同：2
> 
> 时间：2013-03-31T12:40:17.220
> 
> 标签：iphone, ios, objective-c, uinavigationbar

我在 xib 文件中设置了一个只有一个 UITextView 和一个 UINavigationBar 的视图。

当我运行应用程序时，文本的顶部被 UINavigationBar 遮挡，即使我在 IB 中将 UITextView 排列在 UINavigationBar 下方。

它不仅发生在 UITextViews 中，也发生在其他类型的视图中，包括简单的 UILabel。我的理解是，当使用导航栏时，视图的顶部会向下移动，但这不会发生。

我是否在设置中遗漏了任何东西以防止这种情况发生？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-31T12:51:43.363

更改导航栏`translucent`属性。

正如我从屏幕截图中看到的那样，它位于导航控制器中

```
[[self.navigationController navigationBar] setTranslucent:NO]; 
```

# sql - 尝试从 .bak 文件旧版本恢复到新版本

> ID：15729468
> 
> 赞同：3
> 
> 时间：2013-03-31T12:40:31.193
> 
> 标签：sql, sql-server, database-restore

> 数据库备份在运行版本 8.00.2039 的服务器上。该版本与运行版本 11.00.2100 的此服务器不兼容。在支持备份的服务器上恢复数据库，或使用与该服务器兼容的备份。(Microsoft.SqlServer.SmoExtended)

我正在尝试恢复并收到此消息.. 是否可以在无需安装 SQL Server 2005 的情况下恢复此备份？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-31T12:45:00.010

SQL Server **2012** (v11.0) 不支持从 SQL Server **2000** (v8.0) 直接升级。

您必须使用“中间”步骤将 SQL Server 2000 数据库恢复到 SQL Server 2005 或 2008 实例，然后从那里进行备份，以便将`.bak`文件放入最新的数据库服务器。

没有任何技巧或解决方法 - 就是这样，你必须处理它。

关于这个主题有大量的博客文章，例如

*   [将 SQL Server 2000 迁移到 SQL Server 2012](http://blogs.technet.com/b/mdegre/archive/2012/06/15/migration-sql-server-2000-to-sql-server-2012.aspx%24)

# c# - 使用实体框架注册

> ID：15729473
> 
> 赞同：0
> 
> 时间：2013-03-31T12:41:18.153
> 
> 标签：c#, entity-framework

所以我尝试使用实体框架和c#创建一个注册方法，这是方法：

```
//Button create new account
    private void BtnSignUp_Click(object sender, EventArgs e)
    {
        IEnumerable<DriverAcount> list = from a in context.DriverAcounts select a;
        foreach (var Ac in list)
        {
                if (TxBoxNewUserName.Text != Ac.Login)
                {
                    if (TxtBoxPASS1.Text == TxBoxPass.Text)
                    {
                        Ac.Login = TxBoxNewUserName.Text;
                        Ac.Password = TxtBoxPASS1.Text;
                        context.DriverAcounts.Add(Ac);
                        MessageBox.Show("the account is create succefuly");
                        TxBoxNewUserName.Text = "";
                        TxtBoxPASS1.Text = "";
                        TxBoxPass.Text = "";
                        break;
                    }

                    else
                    {
                        MessageBox.Show("the two passwords didn't matched");
                    }

                    TxBoxNewUserName.Text = "";
                    TxtBoxPASS1.Text = "";
                    TxBoxPass.Text = "";
                    continue;
                }
            else
            {
                MessageBox.Show("this username is already exist, please choose another one");
                TxBoxNewUserName.Text = "";
                TxtBoxPASS1.Text = "";
                TxBoxPass.Text = "";
                break;
            }

        }
        context.SaveChanges();
    } 
```

问题是当我想正常添加一个新用户时，它应该查看它是否存在于数据库中，但它没有做对，例如，如果我们在 DB **name1**和**name2**中有两个名称，并进入我们有的 TextBox **name2**它将在 DB 中添加**name2**，即使它已经存在。因此，如果有人有想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T12:59:12.290

您需要再次查看您的代码并准确了解它在做什么——您是否附加了调试器并逐步完成了它？`foreach`如果检索到的第一个名称与文本框中的名称不匹配，则始终会在循环的第一次迭代中创建驱动程序名称。所有其他将被忽略。

你可以试试这个。当您只想检查一个是否已经存在时，无需查询所有记录（就像您现在正在做的那样）。

```
private void BtnSignUp_Click(object sender, EventArgs e)
{
    // This performs a case sensitive match on the login name, you'll need to change it if you want to ignore case
    DriverAcount existingAccount = context.DriverAcounts.FirstOrDefault(d => d.Login == TxBoxNewUserName.Text);

    if (existingAccount != null)
    {
            MessageBox.Show("This username already exists, please choose another one.");
    }
    else
    {
            if (TxtBoxPASS1.Text == TxBoxPass.Text)
            {
                    Ac.Login = TxBoxNewUserName.Text;
                    Ac.Password = TxtBoxPASS1.Text;
                    context.DriverAcounts.Add(Ac);

                    // Only need to call this if you've made changes, so I've moved it here
                    context.SaveChanges();

                    MessageBox.Show("The account was created successfully");
            }
            else
            {
                    MessageBox.Show("The two passwords didn't match each other.");
            }
    }

    TxBoxNewUserName.Text = "";
    TxtBoxPASS1.Text = "";
    TxBoxPass.Text = "";
} 
```

# javascript - AngularJS 测试检查 p 包含文本

> ID：15729475
> 
> 赞同：-1
> 
> 时间：2013-03-31T12:41:43.930
> 
> 标签：javascript, jquery, angularjs, matcher

我正在尝试编写一个端到端测试来检查是否存在包含某些特定文本的 ap 标签：

```
it('should display search result snippet for a result item', function() {
    input('query').enter('One');
    element('#submitSearchButton').click();
    expect(element('.emails li p').text()).toEqual('This is a search result snippet for email one')
}) 
```

但是我得到：

```
expected "This is a search result snippet for email one" but was "\n\t\t\t\t\t\tThis is a search result snippet for email one\n\t\t\t\t\t" 
```

如何检查页面是否包含所需的文本？

**编辑：**

好的，我看到这是因为我正在测试 HTML 模板中的内容。该模板具有格式以使其更易于阅读，但我感到困惑，因为我正在浏览器中查看呈现的网页：

```
<p>
     {{email.snippet}}
</p> 
```

我现在的问题是我应该如何在角度 e2e 测试中测试我的电子邮件片段是否按预期呈现？我应该重新格式化模板还是应该以不同的方式来解决这个问题？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-31T13:49:01.540

我不确定为什么你的代码看起来像这样。在 jQuery 中检查 p 是否包含一些你只需要做的文本：

```
if ($('p:contains("someText")').length > 0) {
    // Your code here
} 
```

# sql-server - DateTimeOffset 值变化

> ID：15729479
> 
> 赞同：0
> 
> 时间：2013-03-31T12:42:47.783
> 
> 标签：sql-server, ssis, datetimeoffset

我正在移动当前存储为`int to DateTimeOffset`.

这里的示例是起始值 1341190841，当我使用此查询时：

```
dateadd  (s,Call.StartTime, '1970-01-01') AS StartTimeDate 
```

它返回`2012-07-02 01:00:41.000`正确的值。但是，我使用 SSIS 将数据从一个数据库移动到另一个数据库，当数据在新表中时，`StartTimeDate`现在看起来像这样`2012-07-02 01:00:41.0000000 +01:00`。

有人知道如何删除 +01:00 吗？我想保持第一个查询中的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T13:35:25.403

我无法重现该行为（即使有两个不同时区的 SQL Server），所以这可能不是您想要的，但您可以在复制后“修复”TZ 偏移量（“+01:00”）通过使用如下函数更新`StartTimeDate`列来获取数据[`ToDateTimeOffset`](http://msdn.microsoft.com/en-us/library/bb630335%28v=sql.105%29.aspx)：

```
UPDATE the_table SET StartTimeDate = TODATETIMEOFFSET(StartTimeDate, 0) 
```

这将使日期和时间保持不变，同时将偏移量调整为指定的（`0`因为您希望它将 TZ 从 +1“调整”到 0）。

# ruby - 如何使 xpath 表达式仅读取文档的一部分（Ruby/Nokogiri/xpath）

> ID：15729485
> 
> 赞同：2
> 
> 时间：2013-03-31T12:44:01.050
> 
> 标签：ruby, xml, xpath, xml-parsing, nokogiri

我使用 Ruby 1.9.3p385、Nokogiri 和 xpath v.1。

在 Stackoverflow 上很棒的人的帮助下，我想出了这个 xpath 表达式：

```
products = xml_file.xpath("(/root_tag/middle_tag/item_tag") 
```

拆分此 XML 文件：

```
<root_tag>
  <middle_tag>
    <item_tag>
      <headline_1>
        <tag_1>Product title 1</tag_1>
      </headline_1>
      <headline_2>
        <tag_2>Product attribute 1</tag_2>
      </headline_2>
    </item_tag>
    <item_tag>
      <headline_1>
        <tag_1>Product title 2</tag_1>
      </headline_1>
      <headline_2>
        <tag_2>Product attribute 2</tag_2>
      </headline_2>
    </item_tag>
  </middle_tag>
</root_tag> 
```

成2个产品。

我现在希望遍历每个产品并提取所有产品信息（通过提取其叶节点）。为此，我正在使用以下代码：

```
products.each do |product|
  puts product #=> <item_tag><headline_1><tag_1>Product title 1</tag_1></headline_1><headline_2><tag_2>Product attribute 1</tag_2></headline_2></item_tag>
  product_data = product.xpath("//*[not(*)]")
  puts product_data #=> <tag_1>Product title 1</tag_1><tag_2>Product attribute 1</tag_2><tag_1>Product title 2</tag_1><tag_2>Product attribute 2</tag_2>
end 
```

正如你所看到的，这正是我想要的，除了一件事：它读取的是产品而不是产品。

如何将我的搜索限制在产品范围内？回答时，请注意示例已简化。我希望该解决方案“擦除”产品知识（如果可能的话），因为它可能在所有情况下都有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T16:13:56.253

**而不是**：

```
//*[not(*)] 
```

**使用**：

```
(//product)[1]//*[not(*)] 
```

`product`这仅选择XML 文档中第一个元素下的“叶节点” 。

`product`对文档中的所有元素重复此操作。您可以通过以下方式获得他们的计数：

```
count(//product) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T16:02:39.307

您可能只想：

```
product_data = product.xpath("*") 
```

这都会找到产品的子元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T23:03:16.987

答案是简单地添加一个`.`before `//*[not(*)]`：

```
product_data = product.xpath(".//*[not(*)]") 
```

这告诉 XPath 表达式从当前节点而不是根开始。

Novatchev 先生的回答虽然在技术上是正确的，但不会导致解析代码成为惯用的 Ruby。

# git - Makefile $(command) 不起作用，但 `command` 起作用了

> ID：15729491
> 
> 赞同：9
> 
> 时间：2013-03-31T12:44:49.530
> 
> 标签：git, makefile, backticks

问题是当我为我的项目编写 Makefile 时，当我需要检测当前分支名称时，在 make 规则中我这样做了：

```
check_branch:
    if [ "$(git rev-parse --abbrev-ref HEAD)" == "master" ]; then \
    echo "In master"
    else \
    echo "Not in master"; \
    fi 
```

当我调用 make check_branch 时，**“$(git rev-parse --abbrev-ref HEAD)”**不起作用，它返回“”空字符串。但是，当我将**$()**更改为**` `**时，它工作得很好。

```
check_branch:
    if [ "`git rev-parse --abbrev-ref HEAD`" == "master" ]; then \
    echo "In master"
    else \
    echo "Not in master"; \
    fi 
```

为什么 $() 不起作用但 `` 起作用了？仅适用于“git”命令。

请注意，在我的 Makefile 中，我通常在许多规则中使用**$() 。**

谢谢 ：）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-31T13:10:36.670

在配方内部，您必须避开美元符号才能让外壳解释它们。否则，Make 将`$(git ...)`其视为内置命令或变量并尝试对其进行评估（当然，不成功）。

```
check_branch：
    if [ " $$ (git rev-parse --abbrev-ref HEAD)" == "master" ]; 然后 \
    ...

```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-31T12:55:18.143

在 shell 行中，您可以像在 shell 脚本中一样编写 shell 命令。这就是第二个操作有效的原因。

如果您希望 Make 在 shell 之外评估 git 命令，可以将操作包含在 shell 函数中，如下所示：

```
$(shell git rev-parse --abbrev-ref HEAD) 
```

你应该很高兴，尽管我经常将这种事情实现为：

```
branch := $(shell git rev-parse --abbrev-ref HEAD)
target:dep
     mkdir -p build/$(branch) 
```

或类似的规定。

# css - css a:hover to a:focus

> ID：15729494
> 
> 赞同：0
> 
> 时间：2013-03-31T12:45:18.840
> 
> 标签：css

我正在为我的兄弟制作一个网站，并为他做了一个下拉 CSS 菜单，它在 :hover 上工作以显示辅助选项。然后他决定让人们点击主导航框，然后下拉菜单以显示二级...

我尝试将 a 元素上的 :hover 更改为 :focus （也是 a:active ），这在 IE9 中运行良好，但 Firefox、Safari、Chrome 和 Opera 无法识别新命令。我读到了一个 Javascript 替代方案，但我对它不太熟悉，对沿着这条路线走下去真的有信心。

只是想知道是否有人可以提供帮助：

网页链接：http: [//www.doogledesigns.co.uk/prime%20elements/website/](http://www.doogledesigns.co.uk/prime%20elements/website/)

HTML 代码：

```
<div class="nav1">
<div class="menu-item-home">
<h4><a href="#">Home</a></h4>
<ul>
<li><a href="#">Plumbing &amp; Gas Work</a></li>
<li><a href="#">Electrical Work</a></li>
<li><a href="#">Extensions</a></li>
<li><a href="#">Internal &amp; External Developments</a></li>
</ul>
</div>

<div class="menu-item-garden">
<h4><a href="#">Garden</a></h4>
<ul>
<li><a href="#">Garden Maintenance</a></li>
<li><a href="#">Landscaping</a></li>
<li><a href="#">Patios &amp; Driveways</a></li>
<li><a href="#">Walls &amp; Fencing</a></li>
<li><a href="#">Ponds &amp; Water Features</a></li>
<li><a href="#">Lighting</a></li>
<li><a href="#">Drainage</a></li>
</ul>
</div>

<div class="menu-item-construction">
<h4><a href="#">Construction</a></h4>
<ul>
<li><a href="#">Home Redevelopment</a></li>
<li><a href="#">New Builds</a></li>
<li><a href="#">Driveways</a></li>
</ul>
</div>

</div> 
```

CSS 代码：

```
.nav1 {
float: left;
background: #404041;
height: 500px;
line-height: 1.5;
width: 170px;
-webkit-box-shadow: 2px 2px 5px rgba(0,0,0,2);
-moz-box-shadow: 2px 2px 5px rgba(0,0,0,2);
box-shadow: 2px 2px 5px rgba(0,0,0,2);
}

.menu-item-home, .menu-item-garden, .menu-item-construction {
background: #404041;
width: 170px;
}

.menu-item-home h4, .menu-item-garden h4, .menu-item-construction h4 {
color: #fff;
font-size: 13px;
font-weight: 500;
padding: 7px 12px; 
background: #10702a;
}

.menu-item-home h4 a, .menu-item-garden h4 a, .menu-item-construction h4 a {
color: #fff;
display: block;
text-decoration: none;
width: 170px;
}

/* Menu Header Styles */
.menu-item-home h4, .menu-item-garden h4, .menu-item-construction h4 {
border-bottom: 1px solid rgba(0,0,0,3);
border-top: 1px solid rgba(225,225,225,0.2);
color: #fff;
font-size: 13px;
font-weight: 500;
padding: 7px 12px;

/* Gradient */
background: #a90329; /* Old browsers */ 
background: -moz-linear-gradient(top, #02942a 0%, #0b872d 44%, #0f722a 100%); /* FF3.6+ */  
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#02942a), color-stop(44%,#0b872d), color-stop(100%,#0f722a)); /* Chrome,Safari4+ */  
background: -webkit-linear-gradient(top, #a90329 0%,#80b872d 44%,#0f722a 100%); /*   Chrome10+,Safari5.1+ */  
background: -o-linear-gradient(top, #02942a 0%,#0b872d 44%,#0f722a 100%); /* Opera 11.10+ */  
background: -ms-linear-gradient(top, #02942a 0%,#0b872d 44%,#0f722a 100%); /* IE10+ */  
background: linear-gradient(top, #02942a 0%,#0b872d 44%,#0f722a 100%); /* W3C */  
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#02942a',   endColorstr='#0f722a',GradientType=0 ); /* IE6-9 */
}

/* ul styles */
.menu-item-home ul, .menu-item-garden ul, .menu-item-construction ul {
background: #404041;
font-size: 12px;
line-height: 30px;
height: 0px;
list-style-type: none;
overflow: hidden;
padding: 0px
}

.menu-item-home ul a, .menu-item-garden ul a, .menu-item-construction ul a {
margin-left: 2.5px;
text-decoration: none;
color: #404041;
diplay: block;
width: 173px;
}

/* li styles */
.menu-item-home li, .menu-item-garden li, .menu-item-construction li {
border-bottom: 1px solid #eee;
}

.menu-item-home li:hover, .menu-item-garden li:hover, .menu-item-construction li:hover {
background: #eee;
}

/* ul styles */
.menu-item-home ul, .menu-item-construction ul, .menu-item-garden ul {
background: #fff;
font-size: 12px;
line-height: 30px;
min-height: 0px;
max-height: 0px /* collapses the menu */
list-style-type: none;
overflow: hidden;
padding: 0px;

/* Animation */
-webkit-transition: height 1s ease;
-moz-transition: height 1s ease;
-o-transition: height 1s ease;
-ms-transition: height 1s ease;
transition: height 1s ease;
}

.menu-item-home:hover ul {
height: 155px;
}

.menu-item-garden:hover ul {
height: 220px;
}

.menu-item-construction:hover ul {
height: 90px;
} 
```

CSS 表需要清理一下，但你得到了一般的 jist！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T13:31:56.040

您希望该菜单出现在点击事件上。为了实现这一点并让跨浏览器兼容，我建议使用`jquery library`jQuery，只需下载库并将链接附加到`<head>`页面部分，然后简单地编写 jquery 代码来附加点击事件处理程序。

[jQuery 下载链接](http://jquery.com/download/)

基本上，在将 jquery 链接到您的页面后，您只需要编写这么多代码

```
<script>

$(document).ready(function(){
   $(".menu-item-home a").click(function(){
      $(".menu-item-home  ul").slideToggle('slow');
   });
$(".menu-item-garden a").click(function(){
    $(".menu-item-garden  ul").slideToggle('slow');
});
$(".menu-item-construction a").click(function(){
    $(".menu-item-construction  ul").slideToggle('slow');
});
});

</script> 
```

并且还需要对 css 进行一些更改。这就是你想要做的。

已更改您的 css 代码并为您的网站编写 jquery 代码

检查此链接，您将拥有更改后的代码。右侧是启用了点击的工作网站。

[http://jsfiddle.net/znsZu/](http://jsfiddle.net/znsZu/)

希望能帮助到你。

# php - 向特定用户推送更新

> ID：15729497
> 
> 赞同：0
> 
> 时间：2013-03-31T12:46:05.123
> 
> 标签：php, facebook, codeigniter

我已经看到 Facebook 使用了这种技术，他们有一个加入列表功能，允许某些用户接收更新版本，而其他人仍然使用旧版本。

这怎么可能实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T12:55:57.460

Facebook 没有采用内联方法，而是在其服务器场中逐步推出更改。技术记者和早期采用者被配置到首先接收新更新的服务器集上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T12:51:43.183

实现这一目标的简单方法：

*   用数据库布尔标志标记新旧用户。
*   检查此条件并向新老用户显示不同的版本。

# python - 如何启动和停止线程？

> ID：15729498
> 
> 赞同：11
> 
> 时间：2013-03-31T12:46:06.843
> 
> 标签：python, multithreading

对不起老问题。我已经澄清了。如何用我糟糕的线程类启动停止线程？

**编辑**：它在循环中，我想在代码的开头再次重新启动它。我怎样才能开始-停止-重启-停止-重启？

我的课：

```
import threading

class Concur(threading.Thread):
    def __init__(self):
        self.stopped = False
        threading.Thread.__init__(self)

    def run(self):
        i = 0
        while not self.stopped:
            time.sleep(1)
            i = i + 1 
```

在主代码中，我想要：

```
inst = Concur()

while conditon:
    inst.start()

    #after some operation
    inst.stop()
    #some other operation 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-31T21:38:48.887

您实际上无法停止然后重新启动线程，因为在其方法终止后您无法`start()`再次调用其方法。`run()`但是，您可以通过使用[`threading.Condition`](https://docs.python.org/3/library/threading.html#condition-objects)变量来停止执行，然后在稍后恢复执行，以避免在检查或更改其运行状态时出现并发问题。

`threading.Condition`对象有一个关联的[`threading.Lock`](https://docs.python.org/3/library/threading.html#lock-objects)对象和方法来等待它被释放，并在发生时通知任何等待的线程。这是一个从您的问题中的代码派生的示例，它显示了这一点。在示例代码中，我将`Condition`变量作为`Thread`子类实例的一部分，以更好地封装实现并避免需要引入额外的全局变量：

```
from __future__ import print_function
import threading
import time

class Concur(threading.Thread):
    def __init__(self):
        super(Concur, self).__init__()
        self.iterations = 0
        self.daemon = True  # Allow main to exit even if still running.
        self.paused = True  # Start out paused.
        self.state = threading.Condition()

    def run(self):
        self.resume()
        while True:
            with self.state:
                if self.paused:
                    self.state.wait()  # Block execution until notified.
            # Do stuff...
            time.sleep(.1)
            self.iterations += 1

    def pause(self):
        with self.state:
            self.paused = True  # Block self.

    def resume(self):
        with self.state:
            self.paused = False
            self.state.notify()  # Unblock self if waiting.

class Stopwatch(object):
    """ Simple class to measure elapsed times. """
    def start(self):
        """ Establish reference point for elapsed time measurements. """
        self.start_time = time.time()
        return self

    @property
    def elapsed_time(self):
        """ Seconds since started. """
        try:
            return time.time() - self.start_time
        except AttributeError:  # Wasn't explicitly started.
            self.start_time = time.time()
            return 0

MAX_RUN_TIME = 5  # Seconds.
concur = Concur()
stopwatch = Stopwatch()

print('Running for {} seconds...'.format(MAX_RUN_TIME))
concur.start()
while stopwatch.elapsed_time < MAX_RUN_TIME:
    concur.resume()
    # Can also do other concurrent operations here...
    concur.pause()
    # Do some other stuff...

# Show Concur thread executed.
print('concur.iterations: {}'.format(concur.iterations)) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-31T14:14:39.730

这是大卫赫弗南的想法的充实。下面的示例运行 1 秒，然后停止 1 秒，然后运行 ​​1 秒，依此类推。

```
import time
import threading
import datetime as DT
import logging
logger = logging.getLogger(__name__)

def worker(cond):
    i = 0
    while True:
        with cond:
            cond.wait()
            logger.info(i)
            time.sleep(0.01)
            i += 1

logging.basicConfig(level=logging.DEBUG,
                    format='[%(asctime)s %(threadName)s] %(message)s',
                    datefmt='%H:%M:%S')

cond = threading.Condition()
t = threading.Thread(target=worker, args=(cond, ))
t.daemon = True
t.start()

start = DT.datetime.now()
while True:
    now = DT.datetime.now()
    if (now-start).total_seconds() > 60: break
    if now.second % 2:
        with cond:
            cond.notify() 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-31T12:50:36.283

的实现`stop()`如下所示：

```
def stop(self):
    self.stopped = True 
```

如果要重新启动，则只需创建一个新实例并启动它。

```
while conditon:
    inst = Concur()
    inst.start()

    #after some operation
    inst.stop()
    #some other operation 
```

的[文档](http://docs.python.org/2/library/threading.html#threading.Thread.start)`Thread`清楚地表明，对于该类的每个实例，该方法`start()`只能调用一次。

如果要暂停和恢复线程，则需要使用[条件变量](http://docs.python.org/2/library/threading.html#condition-objects)。

# android - Android 4 中的自定义开关小部件

> ID：15729502
> 
> 赞同：6
> 
> 时间：2013-03-31T12:46:49.613
> 
> 标签：android, android-4.0-ice-cream-sandwich

我对 Android 4 中的开关按钮感到疯狂。

首先，我将选择器设置为背景，其中包含从可绘制文件夹中选择的两个不同的 PNG 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/form_switch_no" android:state_checked="false"/>
    <item android:drawable="@drawable/form_switch_ok" android:state_checked="true"/>
    <item android:drawable="@drawable/form_switch_no"/>
</selector> 
```

但我不知道为什么它们是 x 缩放的。我想管理这个尺寸，但我试图改变 layout_width/height/weight... 没有成功。

我还有一个自定义 PNG 文件用作开关的拇指。我还需要管理这个拇指的大小，因为如果我将 textOn 和 textOff 属性设置为“”，拇指会变得非常小。此外，我想更改背景的拇指填充，因为它没有出现居中。

这是我的 Switch XML 定义：

```
<Switch
    android:id="@+id/switchUsers"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/user"
    android:textOn=""
    android:textOff=""
    android:thumb="@drawable/form_switch_slider"
    android:track="@drawable/switch_user_selector" /> 
```

我试图改变图像大小并将它们制作成九个补丁，但我无法达到我的目标。

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T11:03:15.957

没有文本的极小滑块的解决方案是通过以下组合解决的：

```
android:thumbTextPadding="25dp"
android:textOn=""
android:textOff="" 
```

然后，同一滑块中的小填充问题是 9-patch 图像问题。我不得不将底部和右侧的黑线同分地再延伸一个像素。

希望这可以帮助有同样问题的人。

# jquery - 单击时更改值和运行功能

> ID：15729510
> 
> 赞同：0
> 
> 时间：2013-03-31T12:47:49.740
> 
> 标签：jquery, highcharts

```
function ShowChart() {
    var fromDate = $("#fromdate").val().replace(",", "");
    var toDate = $("#todate").val().replace(",", "");
    var chartType = 'Customers'; // Revenue,Refunds,Customers,Purchases
    var chartURL = "<?php echo base_url() . 'merchant/GetChartData/'; ?>";
    chartURL += chartType + "/" + fromDate + "/" + toDate + "/";
}
// run it
ShowChart(); 
```

HTML：

```
<ul class="tabs">
    <li><a href="#Revenue">Revenue</a></li>
    <li><a href="#Refunds">Refunds</a></li>
    <li><a href="#Customers">Customers</a></li>
    <li><a href="#Purchases">Purchases</a></li>
</ul> 
```

这是我可以通过`chartType`手动更改来显示图表的图表设置，但我想自动执行此操作，因此单击链接将更新图表。

我知道可以读取和存储 href 值，`var str = this.href.split("#")[1];`但我不确定如何`chartType`在每次点击时“更改”值并“运行”函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T12:54:30.907

尝试使用选择器`.click()`将 ShowChart 函数附加到每个`<a>`标签的点击事件`.tabs a`。然后只需设置`chartType`为您的`split`代码。

```
function ShowChart() {
    var fromDate = $("#fromdate").val().replace(",", "");
    var toDate = $("#todate").val().replace(",", "");
    var chartType = this.href.split("#")[1]; // Revenue,Refunds,Customers,Purchases
    var chartURL = "<?php echo base_url() . 'merchant/GetChartData/'; ?>";
    chartURL += chartType + "/" + fromDate + "/" + toDate + "/";
}

// Attach event to every a under .tab    
$('.tabs a').click(ShowChart); 
```

# jquery - 如果json_encode一个字符串在phtml中包含(")，浏览器会改变它的构造，如何防止呢？

> ID：15729511
> 
> 赞同：1
> 
> 时间：2013-03-31T12:47:52.380
> 
> 标签：jquery, json, php

php：5.3.3

jQuery:1.7.2

这是我们用来将值从 php 发送到 jquery 的方式。

1.  获取转义字符串。

`$a = '&quot;xxxxx'; $b = json_encode($a);`

1.  现在，$b 是 '"xxxxx';

2.  将 $a 放在 phtml 中。

    php: `$this->view->b = $b;`

    页面： `<div id='my_data' style='display:none;'><?php echo $this->b;?></div>`

所以在phtml中，字符串是

`<div id='my_data' style='display:none'>"&quot;xxxxx"</div>`

但是，当字符串在浏览器中显示时，它会变成 ""xxxxx"。而当我们使用 $.parseJSON($("#my_data").text());。JQuery 会抛出异常，因为 ""xxxxx " 不是 JSON 字符串。

那么，如何解决呢？

或任何其他将转义字符串从 php 发送到 JQuery 的方法。

谢谢大家。

# c# - 了解异步服务器套接字中的 ManualResetEvent

> ID：15729512
> 
> 赞同：1
> 
> 时间：2013-03-31T12:47:56.243
> 
> 标签：c#, asyncsocket

```
Socket SocketSrv;
public static ManualResetEvent Done = new ManualResetEvent(false);
IPEndPoint IPP = new IPEndPoint(IPAddress.Any, 1234);

void Listening()
{
    SocketSrv = new Socket(AddressFamily.InterNetwork,
                           SocketType.Stream, ProtocolType.Tcp);
    try
    {
        SocketSrv.Bind(IPP);
        SocketSrv.Listen(5);

        while (true)
        {
            Done.Reset();
            info.Text = "Waiting for connections....";
            SocketSrv.BeginAccept(new AsyncCallback(Connection),
                                  SocketSrv);
            Done.WaitOne();
        }
    }
    catch(Exception error)
    {
        MessageBox.Show(error.Message);
    }
}

void Connection(IAsyncResult ar)
{
    Done.Set();
    Socket con= (Socket)ar.AsyncState;
    Socket handler = con.EndAccept(ar); 
} 
```

`ManualResetEvent`由于我从未使用过它，因此我正在尝试了解此异步操作中的内容。

*   第1步。创建它`SocketSrv`是为了接受 TCP 连接，发送和接收“命令”的类型是流。

*   第2步。套接字与 ip,port 绑定，然后我们开始监听连接。

*   第三步。在 while 循环中：

    *   `ManualResetEvent`是重置（我知道这是`ManualResetEvent`一个类型为布尔值的类，并指示线程何时忙）。在这种情况下，事件总是被重置，因为如果建立了连接并且另一个连接即将到来，我需要重置它并再次开始“操作”。

    *   在`BeingAccept`我正在启动异步操作中，执行的回调函数和`IAsyncResult`将成为“套接字”的参数。

*   第4步。is now Waiting 阻塞当前`ResetEvent`线程并等待连接方法中的处理程序结束，以便它可以完成初始化当前连接。

*   第五步。在连接线程中，`ResetEvent`将信号设置为 true，这意味着......好吧，我不知道这意味着什么。我认为它告诉`ResetEvent`解除阻塞主线程。

在“con”套接字中，我得到了`AsyncState`. 我不知道这意味着什么。

在处理程序套接字中，我告诉`ResetEvent`连接已建立。

说了这么多，有人能告诉我我说的是真的还是错的，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T16:52:38.540

使用该事件以便在调用该方法`BeginAccept`之前不会再次调用连接发生时。`Connect`例如`WaitOne`暂停线程直到`Set`被调用。 `Reset`被调用以将事件的状态设置回已发出信号，以便`WaitOne`再次停止线程，以便它等待`Connect`再次被调用。

就个人而言，我不使用这种特定的模式。我从未见过对这种模式的意义的解释。`BeginAccept`如果循环和方法之间存在一些共享状态`Connect`，那可能是有意义的。但是，正如所写，没有任何状态是通过使用事件来保护的。当我使用时，`BeginAccept`我根本不使用事件，并且我使用这样的代码每秒处理许多连接。使用该事件*将*无法防止一次连接过多的错误。坦率地说，使用异步方法并强制它有效地同步会破坏目的。

从的`AysncState`角度来看`BeginAccept`， 只是不透明的数据。它是用于特定异步操作的“状态”。这种“状态”是特定于应用程序的。当您想要异步处理连接时，您可以使用任何您需要的东西。在`BeginAccept`回调的情况下，您通常希望对服务器套接字做一些事情，并且它被传入状态，因此您可以访问它来调用`EndAccept`. 由于`SocketSrv`是成员字段，因此您实际上*不需*要这样做，您可以这样做：

```
SocketSrv.BeginAccept(new AsyncCallback(Connection), null);
//...
void Connection(IAsyncResult ar)
{
    Socket handler = SocketSrv.EndAccept(ar); 
    //...
} 
```

您的评论似乎表明您对这段特定的代码有很好的掌握。您的“Step4”有点偏离，它不是等待`Connection`方法结束，只是等待它*开始*（因为`Set`被称为第一行）。是的，“Step5”，这`Set`意味着它解除`WaitOne`了主线程调用调用`Reset`then的阻塞`BeginAccept`。

# java - 使用 Uuid 生成休眠

> ID：15729516
> 
> 赞同：1
> 
> 时间：2013-03-31T12:49:08.577
> 
> 标签：java, mysql, spring, hibernate, jpa

对此似乎有很多问题，但没有一个能解决我的问题。

我正在尝试使用休眠注释来生成 UUID。

我的注释如下...

```
@Id
@GeneratedValue(generator="system-uuid")
@GenericGenerator(name="system-uuid", strategy = "uuid")
@Column(name = "uuid", unique = true)
public UUID getUuid() {
    return uuid;
} 
```

我在 pom.xml 中使用 MySQL 5.2 和 Hibernate 3.5.6，如下所示...

```
<dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>3.5.6-Final</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-annotations</artifactId>
            <version>3.5.6-Final</version>
        </dependency> 
```

启动我的应用程序后，我收到以下错误...

```
ERROR: org.hibernate.tool.hbm2ddl.SchemaExport - Unsuccessful: create table players (uuid tinyblob not null unique, espnid integer, espnUrl varchar(255), firstname varchar(255), lastname varchar(255), primary key (uuid))
ERROR: org.hibernate.tool.hbm2ddl.SchemaExport - BLOB/TEXT column 'uuid' used in key specification without a key length 
```

什么是正确的注释？我是否使用了不正确的休眠版本？我是否在 MySQL 中使用了不正确的东西？

我的方言详细信息如下...

```
<beans:property name="hibernateProperties">
            <beans:props>
                <beans:prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect
                </beans:prop>
                <beans:prop key="hibernate.transaction.factory_class">org.hibernate.transaction.JDBCTransactionFactory
                </beans:prop>
                <beans:prop key="hibernate.show_sql">true</beans:prop>
                <beans:prop key="hibernate.hbm2ddl.auto">create</beans:prop>
            </beans:props>
        </beans:property> 
```

该错误意味着未指定长度，但如果我将其输入@Column，则不会发生任何变化。

我只使用旧版本的hibernate，因为hibernate-annotations直到那时才会出现，如果这现在是一个死回购我将移动到更高版本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T13:42:43.773

我认为问题在于`getUuid()`方法返回的类型。它需要`String`根据休眠文档。

> **uuid：**
> 
> 使用 128 位 UUID 算法生成在网络中唯一的字符串类型标识符（使用 IP 地址）。UUID 被编码为长度为 32 位十六进制数字的字符串。

# android - 从 onReceive android 获取消息线程 id 或 _id

> ID：15729517
> 
> 赞同：14
> 
> 时间：2013-03-31T12:49:36.043
> 
> 标签：android, sms

我试图获取保存在手机中的消息 ID。但我没能得到它。我现有的代码在这里

```
@Override
public void onReceive(Context context, Intent intent) {
    String address = "";
    String message = "";
    String msg_id="";
    Bundle extras = intent.getExtras();
    if (extras != null) {
        Object[] smsExtra = (Object[]) extras.get("pdus");

        for (int i = 0; i < smsExtra.length; i++) {
            SmsMessage sms = SmsMessage.createFromPdu((byte[]) smsExtra[i]);
            message += sms.getMessageBody();
            address = sms.getOriginatingAddress();
        }
        sms = new Sms(msg_id,message, address);
        UploadSms up = new UploadSms();
        up.start();
        Toast.makeText(context,
                "SMS Received>>" + message + "From >>" + address,
                Toast.LENGTH_LONG).show();
    }

} 
```

通过这个我得到短信正文和发件人号码。但我知道 android 手机中的每条消息都有一个唯一的号码，我检索了它。但无法在 onReceive 方法中检索。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:04:20.887

您将不得不解析 SMS PDU（原始 PDU 格式），因为在 android 应用层不存在用于检索用户数据标头的 API。我相信短消息标识符位于用户数据标头（八位字节 1）中。请参阅[解析 SMS PDU](https://stackoverflow.com/questions/5663257/parsing-sms-pdu)的帖子。

在那篇文章中，一位用户提到了一个名为“SMSLib”的免费软件（在 APACHE 许可下），以便解析和提取消息参数。可以使用方法 getMessageId() 提取消息 ID - 类 org.smslib.Message 中的方法。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-01-23T23:28:03.480

我不确定这是否足以满足您的目的，但该[`SMSMessage.getIndexOnICC()`](https://developer.android.com/reference/android/telephony/SmsMessage#getIndexOnIcc())方法返回一个`int`，从 1 开始索引（可能是），这是智能卡/ICC 分配`Integer.MAX_VALUE`的唯一标识符。如果它是合成的而不是通过 ICC 处理的，`SMSMessage`它也可以返回 -1 。`SMSMessage`

而不是使用 PDU 进行合成，您可能应该使用API 调用而不是滚动您自己的调用来通过 PDU[`Telephony.Sms.Intents#getMessagesFromIntent(Intent)`](https://developer.android.com/reference/android/provider/Telephony.Sms.Intents#getMessagesFromIntent(android.content.Intent))获取 s 列表。`SMSMessage`但是，这是在 API 19 中添加的，因此可能不受支持，具体取决于您的 API 版本。

如果您想自己动手，`getMessageFromIntent(Intent)`可以在[此处](https://cs.android.com/android/platform/superproject/+/master:frameworks/base/core/java/android/provider/Telephony.java;l=1356;bpv=0;bpt=1)查看源代码的当前版本（撰写本文时为 API 30，尽管链接是主版本，因此可能会更改），以获取如何在不使用API（如果您出于某种原因想要这样做）。似乎合成 an 的正确方法`SMSMessage`实际上是你正在做的方式，至少在大多数情况下。尽管您确实应该使用`SMSMessage.createFromPdu(byte[], String)`并指定从中获取的格式`Intent.getStringExtra("format")`，否则您可能会遇到取决于消息格式的问题（例如，您可能会在多卡设备上找到这两种格式）。

如果您想获得真正的低级并自己解析事物，则应该查看 CDMA 和 GSM 的特定实现`SMSMessage`（尽管这不是要明确的子类），它们当然是 android 内部的，不打算使用作为暴露的 API。用于解析 PDU 的 CDMA 实现是 at，[`...cdma.SMSMessage.parsePdu(byte[])`](https://cs.android.com/android/platform/superproject/+/master:frameworks/base/telephony/java/com/android/internal/telephony/gsm/SmsMessage.java;l=1198;drc=master)而 GSM 实现是 at [`...gsm.SMSMessage.parsePdu(byte[])`](https://cs.android.com/android/platform/superproject/+/master:frameworks/base/telephony/java/com/android/internal/telephony/gsm/SmsMessage.java;drc=master;bpv=1;bpt=1;l=1198)。有关底层基类的参考，您应该看到[`SMSMessageBase`](https://cs.android.com/android/platform/superproject/+/master:frameworks/base/telephony/java/com/android/internal/telephony/SmsMessageBase.java;drc=master;bpv=1;bpt=1;l=36).

# java - 在可执行 jar 文件中自动装配

> ID：15729518
> 
> 赞同：0
> 
> 时间：2013-03-31T12:49:59.890
> 
> 标签：java, eclipse, spring, executable-jar, autowired

我的项目在 Eclipse 中运行良好，但是当我尝试从可执行 jar 文件运行它时，它会失败，并显示“nosuchbeandefinitionexception 找不到匹配的依赖类型的 bean：预计至少有 1 个 bean 有资格作为此依赖项的自动装配候选者”。我使用上下文自动装配：来自应用程序上下文的组件扫描。applicationcontext.xml 可用于 jar 文件。

所以我不明白为什么它在 Eclipse 中有效，同时从 jar 中失败。有任何想法吗？

# php - joomla 1.5.x 中未正确安装自定义组件

> ID：15729519
> 
> 赞同：0
> 
> 时间：2013-03-31T12:50:05.393
> 
> 标签：php, joomla, joomla1.5

最近我为我们的客户制作了一个自定义博客组件，在我的本地主机中它工作得很好，现在我必须为这个组件准备一个包，让我们的客户给他这个组件。我根据此链接准备包裹

[http://docs.joomla.org/Components:xml_installfile](http://docs.joomla.org/Components:xml_installfile)

**这是 XML 文件**

```
<?xml version="1.0"?>
<install type="component" version="1.5.0">
  <name>customblog</name>
  <author>Jogesh Sharma</author>
  <creationDate>March 2013</creationDate>
  <copyright>Copyright (C) 2013 Open Source Matters. All rights reserved.</copyright>
  <license>http://www.gnu.org/licenses/gpl-2.0.html GNU/GPL</license>
  <authorEmail>hello@webomnizz.com</authorEmail>
  <authorUrl>http://webomnizz.com</authorUrl>
  <version>1.5.0</version>
  <description>This component manage all the Blog sections!</description>
  <installfile>install.customblog.php</installfile>
  <uninstallfile>uninstall.customblog.php</uninstallfile>
  <files>
      <filename>customblog.php</filename>
      <filename>customblog.html.php</filename>
      <filename>images/style.css</filename>
      <filename>images/plus-icon.png</filename>
      <filename>images/twitter-icon.png</filename>
      <filename>images/facebook-icon.png</filename>
  </files>

  <install>
      <sql>
          <file driver="mysql">install.mysql.sql</file>
      </sql>
  </install>

  <uninstall>
      <sql>
          <file driver="mysql">uninstall.mysql.sql</file>
      </sql>
  </uninstall>

  <administration>
      <menu img="js/ThemeOffice/component.png">Blog Component</menu>
      <submenu>
          <menu link="option=com_customblog">Blog</menu>
      </submenu>

      <files>
          <filename>install.mysql.sql</filename>
          <filename>uninstall.mysql.sql</filename>
          <filename>admin.customblog.php</filename>
          <filename>admin.customblog.html.php</filename>
          <filename>toolbar.customblog.php</filename>
          <filename>toolbar.customblog.html.php</filename>
          <filename>admin.customblog.php</filename>
          <filename>index.html</filename>
          <filename>tables/customblog.php</filename>
      </files>
  </administration>
</install> 
```

这是组件目录结构的屏幕截图： ![在此处输入图像描述](https://i.stack.imgur.com/Tpmzs.png)

但是在转换为 zip 文件后，当我尝试安装我的组件时，我得到了奇怪的错误：

```
JInstaller::install: There is already a folder called 'C:\wamp\www\joom_new\administrator\components\com_customblog\admin.customblog.php'. Please initially check whether:
• the Extension is already installed
• the file names in the XML file are spelled correctly
• there are no XML files listed inside the extension.xml file
• all of the files (not including XML files) are correctly listed in the extension.xml file and there are no duplicate entries
• there is an empty folder listed from a previous installation attempt 
```

我不知道缺少什么，我安装了单独的 joomla1.5.x 然后尝试在上面安装然后陷入这个问题，谁能帮我摆脱这些错误？

我正在使用 joomla 1.5.26 因为我的客户需要这个版本...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T13:00:48.507

你包括了两次

```
<filename>admin.customblog.php</filename> 
```

在行政部分。

而“奇怪”的错误实际上告诉你出了什么问题

> 请先检查是否：
> 
> *   所有文件（不包括 XML 文件）都在 extension.xml 文件中正确列出，并且没有重复条目

# javascript - 是否有一个 DOM，或者每个附加到 html 的都是一个新的？

> ID：15729520
> 
> 赞同：0
> 
> 时间：2013-03-31T12:50:32.767
> 
> 标签：javascript, dom

我有一个网站，页面将图像和描述加载到 DOM 中。

例如

```
html += '<div class="className">';
html += '<img src="/path/to/image.jpg><a href="link.html">more info</a>';
html += '</div>'; 
```

现在，我们能够通过链接上的一些点击获利，并使用一家名为 Skimlinks 的公司来处理这个问题。

因为我们正在将潜在的可获利（sp?）链接加载到 DOM 中，所以它们的代码必须`skimlinks();`足够简单地添加到 DOM 中。

现在，有时可能有 100 个搜索结果，我们一次分批显示 30 个结果，然后预加载下一个结果，然后当用户点击**显示更多**时，我们再次附加 html 并添加新内容。

**问题：**新内容是否与第一个结果一样被加载到同一个 DOM（意思是不止一个）中，因此正如我已经调用的`skimlinks();`那样，一切都很好，或者，我是否必须`skimlinks();`在每次添加新内容时调用。

我知道这个问题可能也需要针对他们，但我也对添加到 DOM 时的工作方式感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T12:58:00.530

只有一个 DOM 树（单个文档），除非您开始使用`iframes`. 每个`iframe`都有自己的文档。现在，对于`skimlinks`，这取决于它们的实现。如果他们直接在整个文档上附加了一个点击事件处理程序，您将不必再次调用它，但如果他们在每个单独的链接上附加一个点击处理程序，您添加到 DOM 的新链接将不会被处理。

# html - 在 CSS 和 HTML 中使水平 'li' 具有相同的高度

> ID：15729524
> 
> 赞同：1
> 
> 时间：2013-03-31T12:51:04.453
> 
> 标签：html, css, twitter-bootstrap, height, html-lists

我正在尝试`ul`用 2 `li`s 创建，它们将被水平设置。它现在的样子如下：

![在此处输入图像描述](https://i.stack.imgur.com/BPnqq.jpg)

如您所见，左侧的`li`高度小于右侧的高度。我希望左边的和右边的一样。我也在这个网站上使用[Bootstrap 。](https://en.wikipedia.org/wiki/Bootstrap_%28front-end_framework%29)这是我的代码：

```
<ul class="thumbnails <?php echo $pageLang; ?>">
    <li class="span6" >
        <div class="commentsArea">
            <h3>dsfdsfd</h3>
            <p></p>
        </div>
    </li>
    <li class="span6 <?php echo $pageLang;?>">
        <label>Name</label>
        <input type="text" class="span6">
        <label>Description:</label>
        <textarea class="span6" rows="5" maxlength="450"></textarea>
        <button class="btn btn-success" value="button">
    </li>
</ul> 
```

相关CSS：

```
.commentsArea {
    background-color: #D4E7ED;
    text-overflow: ellipsis;
    -webkit-border-radius: 10px 5px 5px 10px;
    border-radius: 10px 5px 5px 10px;
    -moz-border-radius: 10px 5px 5px 10px;
    padding: 5px;
} 
```

我试图将`commentsArea`高度设置为 100%，但没有帮助。此外，如果我将左侧`li`高度设置为“硬编码”（例如，height=228px），它可以正常工作。

有没有办法使（1）和（2）高度相同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T13:07:18.873

我建议你不要使用`ul`和`li`这样的标记。使用`divs`. 事实上，它看起来不像是正确使用列表。

```
<div class="thumbnails thumbnails-cont">
    <div class="span4 comments-cont">
        <div class="commentsArea">
            <h3>dsfdsfd</h3>
            <p></p>
        </div>
    </div>
    <div class="span4 offset4">
        <label>Name</label>
        <input type="text" class="span6">
        <label>Description:</label>
        <textarea class="span6" rows="5" maxlength="450"></textarea>
        <button class="btn btn-success" value="button">Test</button>
    </div>
</div> 
```

CSS：

```
.thumbnails-cont {
    position: relative;
}
.comments-cont {
    position: absolute;
    top: 0;
    bottom: 0;
} 
```

[http://jsfiddle.net/n2VGS/](http://jsfiddle.net/n2VGS/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T13:33:14.827

如果可以使用固定高度，请添加以下 CSS

```
.thumnails li {
    height: 228px;
} 
```

或者任何需要的高度。

# jquery - 如何用省略号“...”替换第一个溢出的元素

> ID：15729527
> 
> 赞同：0
> 
> 时间：2013-03-31T12:51:13.500
> 
> 标签：jquery, overflow, ellipsis, css

我有一个`<p>`里面有多个标签的 div，div 的宽度和高度是固定的，我只想用“...”替换溢出父级的文本

```
<div class="container" style="width:200px; height:400px; overflow:hidden;">
   <p class="pText">one one one one one one one one one one one one </p>
   <p class="pText" >two two two two two two two two two two two two </p>
   <p class="pText">three three three three three three three three </p>
   <p class="pText">four four four four four four four four four four </p>
   <p class="pText">five five five five five five five five five five </p>
   <p class="pText">six six six six six six six six six six six six six </p>
</div> 
```

在某些时候，文本会溢出父级，此时我想用“...”替换溢出的单词。

像这样：

```
___________________________
| one one one one one one |
| two two two two two two |
| two two                 |
| three three three three |
| three three three       |
| four four four four four|
| four                    |
| five five five five ... |
|_________________________| 
```

**事情是文本水平换行就好了。一旦它太长，它就会被垂直剪裁，这很好。我需要的是完全删除半可见的行并将其前面的最后一个单词替换为“...”**

我猜 CSS 不可能，所以我不介意尝试使用 jQuery。

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T15:00:40.643

这是我经常使用的解决方案：

[纯 CSS 中的多行省略号](http://www.mobify.com/dev/multiline-ellipsis-in-pure-css/)

还有一个 jQuery 插件：[dotdotodt](http://dotdotdot.frebsite.nl/)

# java - 将对象从 AsyncThread 传递到 Fragment 类

> ID：15729528
> 
> 赞同：0
> 
> 时间：2013-03-31T12:51:16.757
> 
> 标签：java, android

```
public SimpleAsyncTask(JSONObject obj, Activity activity) {
    this.obj = obj;
    this.activity = activity;
}

@Override
protected String doInBackground(String...params) {    
    String result = "";    
    return result;
}

@Override
protected void onPostExecute(String result) {
    List<Appointments> lists = new ArrayList<Appointments>();
    return lists;
}

@Override
protected void onPreExecute() {

} 
```

我从 MainUI 线程调用我的 AsyncTask 线程。我有一个具有 listView 的片段类，我将如何通过`List to my Fragment class.`

```
ArrayAdapter < String > adapter = new ArrayAdapter < String > (getActivity(),
        android.R.layout.simple_list_item_1, listObject);
setListAdapter(adapter); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T13:02:25.883

只需使列表变量成为 Fragment 类的成员，而不是在 AsyncTask 范围内

像这样的东西：

```
public class MyFragment extends Fragment {

    private List<Appointments> lists = new ArrayList<Appointments>();
    ...... 
```

然后在您的 AsyncTask 中，按如下方式使用它：

```
 @Override
    protected void onPostExecute(String result) {
        // Not instantiating it from scratch, but using the class variable
        lists = new ArrayList<Appointments>();
        return lists;
     } 
```

# file-upload - 数据表中的 Primefaces 文件上传

> ID：15729529
> 
> 赞同：1
> 
> 时间：2013-03-31T12:51:21.657
> 
> 标签：file-upload, jsf-2, primefaces

我正在尝试`fileupload`在 Datatable 中使用 Primefaces，但是当我得到多个时，`fileupload`我得到了以下错误。

```
java.lang.NullPointerException
    at org.primefaces.component.fileupload.FileUploadRenderer.decodeSimple(FileUploadRenderer.java:56)
    at org.primefaces.component.fileupload.FileUploadRenderer.decode(FileUploadRenderer.java:47)
    at javax.faces.component.UIComponentBase.decode(UIComponentBase.java:787)
    at javax.faces.component.UIInput.decode(UIInput.java:757)
    at javax.faces.component.UIComponentBase.processDecodes(UIComponentBase.java:1181)
    at javax.faces.component.UIInput.processDecodes(UIInput.java:662)
    at javax.faces.component.UIComponentBase.processDecodes(UIComponentBase.java:1176)
    at javax.faces.component.UIComponentBase.processDecodes(UIComponentBase.java:1176)
    at javax.faces.component.UIComponentBase.processDecodes(UIComponentBase.java:1176)
    at org.primefaces.component.api.UIData.process(UIData.java:309)
    at org.primefaces.component.api.UIData.processChildren(UIData.java:297)
    at org.primefaces.component.api.UIData.processPhase(UIData.java:261)
    at org.primefaces.component.api.UIData.processDecodes(UIData.java:227)
    at javax.faces.component.UIForm.processDecodes(UIForm.java:225)
    at javax.faces.component.UIComponentBase.processDecodes(UIComponentBase.java:1176)
    at javax.faces.component.UIComponentBase.processDecodes(UIComponentBase.java:1176)
    at javax.faces.component.UIViewRoot.processDecodes(UIViewRoot.java:933)
    at com.sun.faces.lifecycle.ApplyRequestValuesPhase.execute(ApplyRequestValuesPhase.java:78)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:77)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1852)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:619) 
```

# c++ - 让 credis 在 C++ 解决方案中工作

> ID：15729530
> 
> 赞同：1
> 
> 时间：2013-03-31T12:51:24.473
> 
> 标签：c++, c, visual-studio-2010, window, redis

我正在开发一个必须连接到 redis 数据库的 C++ 项目。我试图让[credis](http://code.google.com/p/credis/)代码工作，但是当我编译它时，我得到了这些错误集

```
1>c:\c++redis\credis.c(728): warning C4013: 'fcntl' undefined; assuming extern returning int
1>c:\c++redis\credis.c(728): error C2065: 'F_GETFL' : undeclared identifier
1>c:\c++redis\credis.c(729): error C2065: 'F_SETFL' : undeclared identifier
1>c:\c++redis\credis.c(729): error C2065: 'O_NONBLOCK' : undeclared identifier
1>c:\c++redis\credis.c(734): error C2065: 'EINPROGRESS' : undeclared identifier
1>c:\c++redis\credis.c(740): warning C4133: 'function' : incompatible types - from 'int *' to 'char *' 
```

错误在第`credis.c`728 行到第 746 行的文件中

```
/* connect with user specified timeout */
flags = fcntl(fd, F_GETFL);
if ((rc = fcntl(fd, F_SETFL, flags | O_NONBLOCK)) < 0) {
DEBUG("Setting socket non-blocking failed with: %d\n", rc);
}

if (connect(fd, (struct sockaddr *)&sa, sizeof(sa)) != 0) {
if (errno != EINPROGRESS)
    goto error;

if (cr_selectwritable(fd, timeout) > 0) {
    int err;
    unsigned int len = sizeof(err);
    if (getsockopt(fd, SOL_SOCKET, SO_ERROR, &err, &len) == -1 || err)
    goto error;
}
else /* timeout or select error */
    goto error;
}
/* else connect completed immediately */ 
```

我在哪里可以找到这些缺失的类型名？

我正在使用 Visual Studio 2010 来编译它，并且程序必须在窗口上运行。

我试图用[这个](http://code.google.com/p/credis/issues/detail?id=41)建议的答案对代码进行批处理，但这没有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T13:01:26.050

您至少缺少一个头文件：

```
#include <fcntl.h> 
```

这应该可以解决您的一些问题。通常，查找头文件名的好地方是函数本身的帮助文本。在这种情况下，头文件与函数 ( ) 具有相同的名称，`fcntl`但大多数并不那么容易。

`EINPROGRESS`定义在：

```
#include <errno.h> 
```

为了将来参考，`E`前缀通常意味着它是一个错误宏，所以`errno.h`是第一个看的地方。

`'function' : incompatible types - from 'int *' to 'char *'`可能意味着您的原型不匹配。您的原型与函数本身不匹配。更新原型。

编辑：虽然这将解决您的一些问题，但似乎这是 UNIX 代码（见评论）。 `F_GETFL`和`F_SETFL`，例如，在 Windows 上似乎不受支持。 `O_NONBLOCK`在`unistd.h`UNIX 上。

您将需要重写需要此功能的代码部分，或者更好的是，从您的供应商处获取 Windows 版本。

从您更新的帖子中，这些是使用套接字完成的。套接字是相当可移植的，但存在一些问题。`ioctlsocket()`对于在 Windows 上使用的非阻塞套接字。

例子：

```
int iRetn = ioctlsocket(s, FIONBIO, 1); 
```

其中`s`是socket，第三个参数为0表示阻塞，非0表示非阻塞。

您还需要在使用任何套接字例程之前调用并`#include <winsock.h>`在结束时调用。 `WSAStartup()``WSACleanup()`

（老实说，这就是我现在所能想到的，我没有意识到我会回答关于套接字的问题）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-22T03:48:28.070

该库在 linux 上运行良好，但在 windows 上运行良好。在 Windows 上，我使用[https://code.google.com/p/libredic/](https://code.google.com/p/libredic/)

# c++ - 将库导入 Visual C++

> ID：15729532
> 
> 赞同：0
> 
> 时间：2013-03-31T12:51:27.130
> 
> 标签：c++

我对 C#/Java、PHP、ASP 和所有其他基于 Web 的大惊小怪的语​​言有一些经验，但最近我一直在尝试学习真正的交易，对我来说是 C++。我必须承认语法对我来说有点奇怪，来自托管环境，但我开始管理它。我买了一些书，但其中的大多数示例我都理解，但它们对 IDE 并没有真正的帮助，当然不是，因为它们不是专门研究这个的。

所以无论哪种方式，我认为我已经受够了理论和简单的书籍工作，所以我想出了一个“项目”来测试自己。我心想它应该有某种 INI 解析器，但我不想自己写一个，“任务”是实现一个 3rd 方库/解决方案。现在从 Visual Studio for C# 我知道如何添加共享 DLL，这不是问题。经过一番挖掘，我发现了这个

[http://code.jellycan.com/simpleini/](http://code.jellycan.com/simpleini/)

很酷的一点是，它声称是跨平台的，应该是双赢的。它也是开源的，这很棒。

但问题是，我如何将它添加到 Visual Studio，以便当我包含 SimpleINI.h 时，我的 IDE 也会在每次构建时编译它。我认为，一种方法是将其编译为共享 DLL，但我并不真正想要 :< 。我真的很喜欢开源的想法，我想象自己将来会在野外扔代码，我想包括所有的资源，包括库，并有适当的信誉。

你们是怎么做到的？如果您推荐一本书或“分步”指南，我将不胜感激。

# c++ - 使用结构和指向输入和输出信息

> ID：15729533
> 
> 赞同：2
> 
> 时间：2013-03-31T12:51:37.550
> 
> 标签：c++, c

我在 struct 中输入字符串指针时遇到问题。这是我的代码：

```
typedef struct{
        char *name;
        int age;      
}stu;

void allocate(stu* &s, int n){
     s = (stu*) malloc(n * sizeof(stu));
     if(s == NULL){
          printf("\nNot enought memory!");
          exit(1);
     }     
}
// Input info
void input_info(stu* &s, int n){
     void input(stu &s); //prototype
     for(int i = 0; i < n; i++){
             printf("\n-- Student #%d:", i+1);
             input(*(s+i));
     }    
}

void input(stu &s){
     fflush(stdin);
     printf("\nEnter student's name: ");
     gets(s.name);
     printf("\nEnter student's age: ");
     scanf("%d", &s.age);
}
// End input

//Output info
void output_info(stu* s, int n){
     void output(stu s); //prototype
     for(int i = 0; i < n; i++){
             printf("\n-- Student #%d:", i+1);
             output(*(s+i));
     }
}

void output(stu s){
     printf("\nName: %s", s.name);
     printf("\nAge: %d", s.age);
}
//End output

int main(){
    stu* s;
    int n;
    printf("How many students you want to input?: ");
    scanf("%d", &n);
    allocate(s, n);
    input_info(s, n);
    output_info(s, n);
    getch();
} 
```

当我输入第二个学生的名字时，它被打破了？我分配了内存。我想问一下如何为stu指针释放内存？谢谢阅读

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T13:13:16.407

在你的程序中有很多可以而且应该改进的地方。一些建议：

1.  删除`char *`成员替换它`std::string`。[除非你真的想要，否则你不想对任何东西进行手动内存管理。](https://stackoverflow.com/questions/10022117/why-should-one-use-stdstring-over-c-style-strings-in-c)
2.  放弃愚蠢的`scanf`，`printf`它们不是*类型安全*的。[由于您使用的是 C++ 使用`std::cin`and`std::cout`并且您比使用 later 更安全](https://stackoverflow.com/questions/7780072/when-to-use-printf-scanf-vs-cout-cin)。
3.  放弃`fflush(stdin)`, 调用`fflush`任何东西，而不是`stdout` [给你未定义的行为](https://stackoverflow.com/questions/5810410/alternative-for-fflushstdin)。
4.  在 C++ 中，您通常希望使用`new`而不是`malloc`. [如果可以的话，完全避免使用动态内存分配](https://stackoverflow.com/questions/6500313/why-should-new-be-used-as-little-as-possible)。更喜欢使用 a`std::vector`代替。

* * *

**[在线示例](http://ideone.com/VEaQLa)**：
按照上述建议，您的示例可以写成：

```
#include<string>
#include<vector>
#include<iostream>

typedef struct
{
    std::string name;
    int age;      
}student;

// Input info
void input_info(std::vector<student> &s)
{ 
    student obj;
    std::cout<<"\nEnter Students name";
    std::cin>>obj.name;
    std::cout<<"\nEnter Students age";
    std::cin>>obj.age;
    s.push_back(obj);
}

// Output info
void output_info(const std::vector<student> &s)
{
    for (auto itr = s.cbegin(); itr != s.cend(); ++itr)
    {
        std::cout<<"\nName:"<< itr->name;
        std::cout<<"\nAge:"<< itr->age;
    }
}

int main()
{
    int n;
    std::cout<<"How many students you want to input?\n";
    std::cin>>n;
    std::vector<student>s;
    for(int i = 0; i<n; i++)
    {
        input_info(s);
    }
    output_info(s);
    return 0;        
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T13:24:41.303

正如之前的一些海报所提到的，代码不是“纯”c++，因为它混合了很多 C 和 C++ 特性。就我个人而言，我认为在处理像您这样的 POD 结构时问题较少。

崩溃很可能是由gets() 引起的。它假定 char 指针已经分配了合适的容量。当输入字符串长于容量时，它具有未定义的行为。您的容量为 0，因此崩溃。

如果您坚持使用 C 函数，请参阅：[Safe Alternative to gets](https://stackoverflow.com/questions/4309746/safe-alternative-to-gets)。否则查找getline()。

# c# - 即使用户具有管理权限，应用程序也无法写入注册表

> ID：15729538
> 
> 赞同：6
> 
> 时间：2013-03-31T12:52:03.490
> 
> 标签：c#, .net, registry, .net-2.0, uac

我正在使用 Visual Studio 2010，我正在编写一个程序，该程序需要在下设置（和读取）新的注册表值`HKLM\Software\myapp`

该程序是基于 .NET 2.0 的，目前它在 Windows 7 64 位上运行。这是我的 ocde：

```
RegistryKey softwareKey = Registry.LocalMachine.OpenSubKey("Software", true);
RegistryKey MyKey = softwareKey.CreateSubKey("MyApp");
RegistryKey  = MyKey.CreateSubKey("MyKey");
selfPlacingWindowKey.SetValue("instaldateperson", datestr + usrname); 
```

我在运行 Visual Studio 2010 时遇到的问题是它将运行应用程序但以我的身份登录，我是本地管理员组的用户和成员.. 但是我无法创建密钥（尽管我是本地管理员组的一部分，谁有权这样做）。我也不知道如何登录（但它也不是我想要的，从那时起我会将 Adminuser 和密码放入代码中，我已经是管理员了？？那为什么？？）

如果这根本不可能，是否有创建注册表项的选项？

不知何故将它们添加到项目中??..我在这里有点困惑。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-31T13:05:53.837

仅仅因为您以管理员身份运行（或使用具有管理权限的帐户）并不意味着这些管理权限始终有效。这是一种安全措施，可防止恶意软件利用一直以管理权限愚蠢地使用计算机的用户。

要使用您的管理权限，您需要*提升*流程。有两种方法可以做到这一点：

1.  使用清单表明您的应用程序需要管理权限，因此在启动时需要提升。

    这意味着您的应用程序将*始终*运行提升，并且只应在您的应用程序需要时使用。例如，Windows 注册表编辑器 (RegEdit) 就是这样做的，因为如果没有管理权限，您几乎无能为力。

    [在 MSDN](http://msdn.microsoft.com/en-us/library/bb756929.aspx)上或在[我的回答](https://stackoverflow.com/questions/4383288/how-can-i-embed-an-application-manifest-into-an-application-using-vs2008)中查找有关如何完成此操作的信息。基本上，您只想将以下行添加到清单中：

    ```
    <requestedExecutionLevel level="requireAdministrator" /> 
    ```

2.  如果您只需要某些任务的管理权限（即，将特定设置保存到注册表）并且您的应用程序的其余部分不需要它，您应该启动一个新的提升进程来执行此操作。没有办法暂时提升当前进程，因此您实际上需要分拆一个新进程。

    这种方法的优点是您的应用程序不必一直以管理权限运行（这提高了安全性），并且没有管理权限的用户仍然可以运行您的应用程序来执行其他所有操作（即，除了需要提升的一两个任务之外的所有任务）。

    您分离出一个单独的进程，该进程仅包含使用类写入注册表所需的逻辑，并使用动词`Process`请求此进程的提升。`runas`有关详细信息，请参阅[此问题](https://stackoverflow.com/questions/133379/elevating-process-privilege-programatically)。我还写[了一个答案](https://stackoverflow.com/a/5508000/366904)，提供了如何从 C# 完成此任务的完整描述，包括示例代码。

当然，正如其他答案所提到的，您的应用程序的设计更有可能是不正确的。Windows 安全模型的整个逻辑是常规应用程序*不需要*管理权限。他们不需要写入注册表或做其他可能危及机器的事情。如果您需要保留设置，我是否可以建议其他两种可能的方法：

1.  认识到 Windows 确实是一个多用户操作系统并仅为当前用户编写设置。无论如何，这很有意义，因为不同的用户通常有不同的设置和偏好。而不是`HKEY_LOCAL_MACHINE`注册表的分支（需要管理权限才能访问），您可能希望使用`HKEY_CURRENT_USER`. 将第一行代码更改为：

    ```
     RegistryKey softwareKey = Registry.CurrentUser.OpenSubKey("Software", true); 
    ```

2.  通过使用 .NET 中内置的逻辑来保存应用程序的设置，完全跳过了写入注册表的所有麻烦和复杂性。开始阅读此处、[此处](https://stackoverflow.com/questions/26369/what-is-the-best-way-to-store-user-settings-for-a-net-application)或[MSDN上](http://msdn.microsoft.com/en-us/library/k4s6c3a0.aspx)[的答案](https://stackoverflow.com/questions/453161/best-practice-to-save-application-settings-in-a-windows-forms-application)以了解如何做到这一点。我会说这是迄今为止你最好的选择。不要自己编写复杂的代码来做您使用的框架已经内置支持轻松完成的事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T13:03:36.513

您的应用程序的设计可能是错误的。标准桌面应用程序不应写入`HKEY_LOCAL_MACHINE`. 由于 UAC，您需要拥有管理员权限，并在提升的进程中运行才能写入`HKLM`.

如果您的应用程序确实需要进行更改，`HKLM`那么请考虑在安装时进行更改，因为安装程序将运行提升。

如果桌面应用程序确实需要写入，`HKLM`那么它应该考虑将需要运行的应用程序部分分离到一个单独的进程中。否则，用户将非常厌倦必须通过 UAC 对话框才能运行您的应用程序。即使他们没有使用写入`HKLM`. 如果你强制整个应用程序要求提升，那么标准用户根本无法运行它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-31T13:00:42.583

运行 Visual Studio 时无法在 HKEY_LOCAL_MACHINE 下创建密钥的原因是 Visual Studio 没有作为提升的进程运行。

对于最终用户，应用程序的清单需要表明需要完整的管理员权限。这是有关[为 UAC 嵌入清单的文档](http://msdn.microsoft.com/en-us/library/windows/desktop/bb756929.aspx)

如果注册表项不需要在机器上是全局的，请考虑改为写入 HKEY_CURRENT_USER。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-05-10T15:12:03.437

您应该授予可写权限，在方法中键入后添加真实值。

```
Registry.LocalMachine.CreateSubKey(@"YOURKEY", true);
Registry.LocalMachine.OpenSubKey(@"YOURKEY", true); 
```

您还需要提升权限才能执行此操作，然后您可以创建一个 .manifest 文件并`requireAdministrator`像这样设置级别：

```
<requestedExecutionLevel level="requireAdministrator" uiAccess="false" /> 
```

* * *

注意：在您的代码中：

```
RegistryKey softwareKey = Registry.LocalMachine.OpenSubKey("Software", true);
RegistryKey MyKey = softwareKey.CreateSubKey("MyApp");
RegistryKey  = MyKey.CreateSubKey("MyKey");
selfPlacingWindowKey.SetValue("instaldateperson", datestr + usrname); 
```

检查对象标签是否正确，您正在使用标签`softwareKey`并`MyKey`创建一个对象，但要设置您正在使用另一个标签的值`selfPlacingWindowKey`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-03T11:04:50.747

正在恢复。在您的项目中创建一个 .manifest 文件。给它与可执行文件相同的名称。"name_of_executable.exe.manifest" 最后更改或创建标签：

```
<requestedExecutionLevel level = "requireAdministrator" uiAccess = "false" /> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-01T08:01:09.117

前面的答案提到你需要在清单中指定你需要管理员权限才能使用`HKLM`

您可以通过以下方式创建清单；

1.  右键单击您的项目，
2.  打算添加新的
3.  点击常规
4.  单击应用程序清单文件
5.  点击添加
6.  打开您的清单文件并找到并取消注释该`requireAdministrator`行

可能会让您感到困惑的更细微的事情是`Prefer 32bit`在您的项目设置中打勾。

这将意味着注册表无法获得所需的访问掩码，并且它会在没有内部异常的情况下静默失败，因为错误处理程序需要相同的访问掩码，因此无法被利用。

您应该避免在注册表的这一部分存储内容，除非您绝对需要跨用户保留设置，注册表也不应该用于存储密码或其他敏感信息，因为即使使用 ACL 也无法可靠地控制访问。

# backup - 使用 Powershell 将 Azure 数据库备份到 blob

> ID：15729541
> 
> 赞同：4
> 
> 时间：2013-03-31T12:52:31.527
> 
> 标签：backup, azure-sql-database, database-backups

我们需要备份 azure 数据库并将其存储在 blob 中，以便可以恢复它。我看过这个博客，但它使用第三方 cmdlet。

[http://weblogs.thinktecture.com/cweyer/2011/01/automating-backup-of-a-sql-azure-database-to-azure-blob-storage-with-the-help-of-powershell-and-任务调度器.html](http://weblogs.thinktecture.com/cweyer/2011/01/automating-backup-of-a-sql-azure-database-to-azure-blob-storage-with-the-help-of-powershell-and-task-scheduler.html)

有人可以指导/帮助如何使用powershell实现上述目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-21T22:48:33.663

Azure DB 不支持备份到 WA Blob Store，而是使用 PITR 功能为您自动备份。您会发现以下文档很有用：

[http://msdn.microsoft.com/en-us/library/azure/hh852669.aspx](http://msdn.microsoft.com/en-us/library/azure/hh852669.aspx)

[http://msdn.microsoft.com/en-us/library/azure/jj650016.aspx](http://msdn.microsoft.com/en-us/library/azure/jj650016.aspx)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-02T11:17:46.150

首先完成您的 Azure 自动化设置（请参阅[此处](http://ttps://azure.microsoft.com/en-gb/blog/azure-automation-authenticating-to-azure-using-azure-active-directory/)）。

编辑打击脚本并将其保存为 .ps1 文件。当您第一次运行它时，它会询问您的 Azure 自动化帐户和数据库凭据。在此过程中，它会将您的凭据安全地保存在本地文件中（请参阅[此处](https://stackoverflow.com/a/6241068/890255)如何完成）。在病房的这段时间之后，它使用保存的凭据。

.psl 文件和加密的凭证文件应存储在一个目录中

一旦你满意，你可以安排它在任务调度程序中运行。

```
function Get-MyCredential
{
param(
$CredPath,
[switch]$Help
)
$HelpText = @"

    Get-MyCredential
    Usage:
    Get-MyCredential -CredPath `$CredPath

    If a credential is stored in $CredPath, it will be used.
    If no credential is found, Export-Credential will start and offer to
    Store a credential at the location specified.

"@
    if($Help -or (!($CredPath))){write-host $Helptext; Break}
    if (!(Test-Path -Path $CredPath -PathType Leaf)) {
        Export-Credential (Get-Credential) $CredPath
    }
    $cred = Import-Clixml $CredPath
    $cred.Password = $cred.Password | ConvertTo-SecureString
    $Credential = New-Object System.Management.Automation.PsCredential($cred.UserName, $cred.Password)
    Return $Credential
}

function Export-Credential($cred, $path) {
      $cred = $cred | Select-Object *
      $cred.password = $cred.Password | ConvertFrom-SecureString
      $cred | Export-Clixml $path
}

#Create a directory with you azure server name to isolate configurations
$FileRootPath = "C:\PowerShellScripts\AzureServerName"

Write-Host "Getting Azure credentials"
$AzureCred = Get-MyCredential ($FileRootPath + "AzureSyncred.txt")

#Use Azure Automation Account 
#(If You do not have it will not work with other accounts)
Add-AzureAccount -Credential $AzureCred
Select-AzureSubscription -SubscriptionId "myAzureSubscriptionId"

#DO NOT use tcp:myServerName.database.windows.net,1433 but only myServerName
$ServerName = "myServerName"
$Date = Get-Date -format "yyyy-MM-dd-HH-mm"
$DatabaseName = "myTargetDatabaseName"
$BlobName = $Date + "-" + $DatabaseName.bacpac"

$StorageName = "myStorageAccountName"
$ContainerName = "myContainerNameToStoreBacpacFiles"
$StorageKey = "myStorageAccountKey"

Write-Host "Getting database user credential"
#DO NOT use myDatabaseUsername@myServerName but only myDatabaseUsername
$credential = Get-MyCredential ($FileRootPath + "DbSyncred.xml")

Write-Host "Connecting to Azure database"
$SqlCtx = New-AzureSqlDatabaseServerContext -ServerName $ServerName -Credential $credential
Write-Host "Connecting to Blob storage"
$StorageCtx = New-AzureStorageContext -StorageAccountName $StorageName -StorageAccountKey $StorageKey
$Container = Get-AzureStorageContainer -Name $ContainerName -Context $StorageCtx
Write-Host "Exporting data to blob"
$exportRequest = Start-AzureSqlDatabaseExport -SqlConnectionContext $SqlCtx -StorageContainer $Container -DatabaseName $DatabaseName -BlobName $BlobName

Get-AzureSqlDatabaseImportExportStatus -Request $exportRequest 

# use the below script in powershell to execute the script
# powershell -ExecutionPolicy ByPass –File C:\PowerShellScripts\AzureServerName\mySavedScript.ps1 –noexit 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-20T14:23:02.827

这是我的PowerShell脚本

[https://gist.github.com/voxon2/be29a3fd6dabbb9155ca](https://gist.github.com/voxon2/be29a3fd6dabbb9155ca)

这是一篇文章，描述了除 powershell 之外的许多不同方法

[http://blogs.msdn.com/b/mast/archive/2013/03/04/different-ways-to-backup-your-windows-azure-sql-database.aspx](http://blogs.msdn.com/b/mast/archive/2013/03/04/different-ways-to-backup-your-windows-azure-sql-database.aspx)

# php - POST 值无法识别

> ID：15729550
> 
> 赞同：0
> 
> 时间：2013-03-31T12:53:46.823
> 
> 标签：php, jquery, ajax, zend-framework, post

我正在使用 Zend 框架和 jQuery。

我正在调用一个 JavaScript 函数，它将 POST-Data 发送到 PHP 脚本并等待答案。

今天早上一切正常。我正在使用 Debian。这些值是通过标头发送的，Firebug 给了我以下输出：

```
Parameterapplication/x-www-form-urlencoded
endDatum    
funktionsId 1
mitgliederId    10368
startDatum  31.03.2013
Quelle
mitgliederId=10368&funktionsId=1&startDatum=31.03.2013&endDatum= 
```

但是`$_POST`变量或 Zend 框架方法`$this->getRequest()->getParams();`都没有给我任何东西。

知道有什么问题吗？也许我的 php.ini 设置有问题？我可以更改哪些设置来修改标头输出？

* * *

解决了：问题是我为页面设置的子域。未正确调用 AJAX-Reuquest

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:23:04.120

试试这个来获取帖子值......

```
$this->getRequest()->getPost(); 
```

或用于单个表单元素

```
$this->getRequest()->getParams('elementName'); 
```

# mysql - 带有提醒的 MySQL 日历

> ID：15729560
> 
> 赞同：0
> 
> 时间：2013-03-31T12:56:11.487
> 
> 标签：mysql, date

我正在开发一个可以安排事件和提醒的 ajax 网络日历。

**架构**

```
id INT
title VARCHAR
startdate TIMESTAMP
endtime TIME
enddate DATE
kind INT
reminder INT DEFAULT 0 
```

**说明**

"kind" 字段可以是 0,1,2,3,4,5 作为 "one time","daily","workdays","weekly","monthly","yearly"

“提醒”字段以分钟为单位，表示`startdate`提醒应该开始提醒之前的分钟数

我需要选择“正在进行”和提醒的事件（混合两者没有问题......我将在 php 中拆分“真实事件”/“提醒”）

**精选**

在这个 SELECT 我只会考虑“一次”（0）和“每天”（1）种时间表......（更容易让你理解）

```
SELECT * 
FROM calendar 
WHERE
    enddate >= NOW()
AND
(
    (
        NOW() >= startdate
        AND kind=0
        AND CURDATE() = DATE(startdate)
        AND CURTIME() <= endtime
    )
    OR
    (
        NOW() >= startdate
        AND kind=1
        AND CURTIME() >= TIME(startdate)
        AND CURTIME() <= endtime
    )
    OR
    ( 
        NOW() >= DATE_SUB(startdate, INTERVAL reminder MINUTE)
        AND NOW() < startdate 
    )
) 
```

**问题**

我选择“一次性”类型的事件和提醒没有问题，因为提醒在DATE_SUB **（开始日期，间隔提醒分钟）**`**reminder**`前几分钟起作用`**startdate**`

 **如您所见，SELECT 在第一个计划之后错过了 kind=1 的提醒，因为重复意味着“在 startdate enddate 之间的每一天”，并且提醒本身应该重复出现。

我知道我需要获取下一个日程安排日期/时间并减去`**reminder**`，但直到现在我还没有找到正确的解决方案......（请记住，我的“完整”选择应该有工作日/每周/每月/每年的日程安排，比我需要正确的 sql 部分来合并到其他类型的时间表......但是对于这个特定的问题，我限制为每日提醒，只是为了不难理解我在说什么！：D）

如何解决这个问题？请帮帮我 ：（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-05T14:38:01.027

```
-- I suggest you to modify the table. Here is updated table structure

-- 
-- Table structure for table `reminder`
-- 

CREATE TABLE `reminder` (
  `id` int(11) NOT NULL auto_increment,
  `title` varchar(255) NOT NULL,
  `startdate` datetime NOT NULL,
  `enddate` date NOT NULL,
  `kind` varchar(255) NOT NULL,
  PRIMARY KEY  (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;

-- 
-- Dumping data for table `reminder`
-- 

INSERT INTO `reminder` (`id`, `title`, `startdate`, `enddate`, `kind`) VALUES 
(1, 'This is reminder', '2015-06-03 19:25:44', '2015-07-21', 'weekly'); 

-- Query data get results for 2015-06-17 from  `reminder` table
SELECT CONCAT_WS(' ','2015-06-17',TIME(startdate)) AS ReminderDateTime, title
                  FROM reminder  
                  WHERE IF(
                                        kind='daily',
                                        ((UNIX_TIMESTAMP('2015-06-17') -UNIX_TIMESTAMP(DATE(startdate))) % (1*24*60*60)=0)  ,
                                        IF(
                                            kind='weekly',
                                            ((UNIX_TIMESTAMP('2015-06-17') -UNIX_TIMESTAMP(DATE(startdate))) % (7*24*60*60)=0)  ,
                                            IF(
                                                kind='monthly',
                                                DAYOFMONTH('2015-06-17')=DAYOFMONTH(startdate),                         
                                                IF(
                                                    kind='quarterly',
                                                    ((UNIX_TIMESTAMP('2015-06-17') -UNIX_TIMESTAMP(DATE(startdate))) % (91*24*60*60)=0) ,
                                                    IF(
                                                        kind='yearly',
                                                        DAYOFYEAR('2015-06-17')=DAYOFYEAR(startdate),   
                                                        IF(
                                                            kind='',
                                                            startdate,
                                                            '0000-00-00 00:00:00'
                                                        )
                                                    )   
                                                )   
                                            )   
                                         )
                                        ) AND DATE(startdate) <='2015-06-17' AND IF(enddate<>'0000-00-00',enddate>='2015-06-17','1') ORDER BY ReminderDateTime ASC 
```**

# android - Android 搜索栏保存的首选项

> ID：15729563
> 
> 赞同：0
> 
> 时间：2013-03-31T12:56:23.960
> 
> 标签：android, seekbar

您好，我正在尝试获取一个由 SeekBar 提供的整数，该整数使用 .getprogress 进入一个 Integer，该整数将由首选项保存，并将转到我的应用程序另一端的 toast 代码，以使事情变得更容易这里我的代码已经。

```
import android.app.Activity;
import android.content.Context;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.widget.EditText;
import android.widget.SeekBar;
import android.widget.TextView;
import android.widget.SeekBar.OnSeekBarChangeListener;
import tk.mizzeeboy.freestorageconverter.R;

public class SettingsActivity extends Activity{

    SeekBar cl;
    TextView t;
    String lolly , finlly;
    int hehe;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.333);

        cl = (SeekBar) findViewById(R.id.seekB3r1);
        t = (TextView) findViewById(R.id.textV3w1);

        cl.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {

            @Override
            public void onStopTrackingTouch(SeekBar seekBar) {
                // TODO Auto-generated method stub
            }

            @Override
            public void onStartTrackingTouch(SeekBar seekBar) {
                // TODO Auto-generated method stub
            }

            @Override
            public void onProgressChanged(SeekBar seekBar, int progress,boolean fromUser) {
                // TODO Auto-generated method stub

                t.setTextSize((cl.getProgress()) * getResources().getDisplayMetrics().density);
                hehe = cl.getProgress(); 
                finlly.valueOf(hehe);

                SharedPreferences mypreferences = getSharedPreferences("myPrefs", Context.MODE_PRIVATE);
                SharedPreferences.Editor editor = mypreferences.edit();
                editor.putString("TeamName", finlly);
                editor.commit();

            }
        });

    }

} 
```

在我的其他活动中，我想打开并阅读它的代码

```
SharedPreferences mypreferences = getApplicationContext().getSharedPreferences("myPrefs", Context.MODE_PRIVATE);
              String teamnamestring = mypreferences.getString("TeamName", "Please Enter :)"); 
            Toast andEggs = Toast.makeText(BitActivity.this, teamnamestring , Toast.LENGTH_SHORT);
            andEggs.show(); 
```

但我的问题是，我每次都收到请输入符号，它不会接收我的整数，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T13:14:23.720

TGMCians 的意思是你把`hehe`它放在`Int`首选项中（`editor.putInt("TeamName", hehe);),`在第一个活动中，然后`String`在另一个活动中获取它（`mypreferences.getString("TeamName",...`）。这将导致`ClassCastException`。要么，你`String`从一开始就把它作为一个，或者`Int`在第二个活动中把它作为一个.

尝试：

```
 int val=mypreferences.getInt("TeamName",-1);
String teamnamestring="";
if(val==-1){
teamnamestring="Please Set Up Your Custom Text Size!";}
else {teamnamestring=String.ValueOf(val);}

Toast andEggs = Toast.makeText(BitActivity.this, teamnamestring , Toast.LENGTH_SHORT);
            andEggs.show(); 
```

# uinavigationcontroller - 如何在 UINavigationController 的右上角创建主页按钮

> ID：15729569
> 
> 赞同：0
> 
> 时间：2013-03-31T12:56:35.840
> 
> 标签：uinavigationcontroller, uibutton, uibarbuttonitem

如何在 UINavigationControl 的右上角创建主页按钮。请注意，我已经在名为 ViewControllerSecond 的第二个 UIviewController 上实例化了我的 UINavigationControl。我希望能够拥有传统的“主页”图标，并在被按下以辞职回到名为：ViewController 的 appDelegate 中的第一个 UIviewControler 时。

我已经做到了这一点：

```
@property (nonatomic, weak) UIBarButtonItem *homeProperty;

UIBarButtonItem *homeButton = [[UIBarButtonItem alloc] initWithTitle:@"Home" style:UIBarButtonItemStylePlain target:self action:@selector(home)];
[self.navigationItem setLeftBarButtonItem:homeButton animated:NO]; 
```

但我不能将它与我的第一个 ViewController 链接或用主页按钮图像替换文本。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-24T12:55:06.817

我也需要这个问题的答案，因为我在其他任何地方都找不到这个问题的答案。如果我有 15 个 repu，我会投票赞成这个问题 :( 顺便说一句，我希望我的 tableview 中的选定项目发布在当点击右上角导航栏上的“完成”按钮时，一个新的视图控制器。我也达到了与这个问题的提问者相同的距离。请原谅我尽可能在这个问题的答案部分发表我的话由于那 50 个 repu，所以不要在该问题的评论中发帖 :(

编辑：我想我找到了答案，请试试这个，因为你有行动：@selector(home) 所以你的方法名称将是：

```
- (IBAction)home:(id)sender {
//statements to execute
} 
```

您不必将此方法与任何东西链接，因为您在声明“主页”按钮时已经将此方法声明为选择器。忽略方法前面的打开链接。 [http://prntscr.com/1tc0q9](http://prntscr.com/1tc0q9)

# php - WebSocket：客户端不响应服务器

> ID：15729571
> 
> 赞同：0
> 
> 时间：2013-03-31T12:56:41.290
> 
> 标签：php, websocket

我是 websocket 的新手。我在 PHP 上做了一个简单的 websocket 实现。握手工作正常，并且连接肯定是打开的，因为我的服务器可以从客户端获取消息。

但是，一旦我尝试将消息发送回客户端，客户端根本没有响应。

这是屏蔽消息并将其发送回客户端的代码。

```
function myProcess($user,$buffer)
{
//$buffer=unwrap($buffer);
console("Request Caught.");
console("Content Length: ".strlen($buffer));
console("Content: ".unmask($buffer));
console("First 8 bits: ".ord($buffer[0]));
console("Opcode: ".opcode($buffer,true));
//console("Full Text: ".$buffer);
//socket_write($user->socket,mask(unmask($buffer)));
console("Masking: ");
$tmp=unmask($buffer);
console($tmp);
$masked=mask($tmp);
opcode($masked);
for($i=0;$i<strlen($masked);$i++)
{
    console($i.": ".ord($masked[$i]));
}
console("length: ".strlen($masked));
console("Sending Response: ");
console(socket_write($user->socket,$masked,strlen($masked)));
}

function mask($text)
{
    $first8bit=0x81;
    $header;
    console("mask: payload length:".strlen($text));
    if(strlen($text)<=125)
    {
        $header=pack("CC",$first8bit,strlen($text));
    }
    else if(strlen($text)<65536)
    {
        $header=pack("CCS",$first8bit,126,strlen($text));
    }
    else
    {
        $header=pack("CCN",$first8bit,127,strlen($text));
    }
    return $header.$text;
} 
```

如果客户端向服务器发送“hi”，服务器将简单地回复“hi”。使用wireshark捕获的数据包是81 02 68 69。看来线路上的位正如协议所说的那样。如果服务器尝试发送更长的字符串，例如“hi from server”，客户端会响应错误：未定义。

任何人都可以帮忙吗？非常感谢。

这是服务器的代码：

```
while(true){
  $changed = $sockets;
  socket_select($changed,$write=NULL,$except=NULL,NULL);
  foreach($changed as $socket){
    if($socket==$master){
        console("Master Socket Changed.");
      $client=socket_accept($master);
      if($client<0){ console("socket_accept() failed"); continue; }
      else{ connect($client); }
    }
    else{
        console($socket." Socket Changed.");
        $str=socket_read($socket,2048);
        $user=getuserbysocket($socket);
        if(strlen($str)==0) disconnect($socket);
        else if(!$user->handshake){ dohandshake($user,$str); }
        else
        {
            myProcess($socket,$str);
        }
        console("Comunication Ends Here.");
    }
  }
} 
```

这是接受部分的计算：

```
function calc_accept($key)
{
    $tmp=$key."258EAFA5-E914-47DA-95CA-C5AB0DC85B11";
    $tmp=sha1($tmp,true);
    //console($tmp);
    $tmp=base64_encode($tmp);
    //console($tmp);
    return $tmp;
} 
```

这是握手：

```
function dohandshake($user,$buffer){
  console("\nRequesting handshake...");
  console($buffer);
  list($resource,$host,$origin,$strkey,$data) = getheaders($buffer);
  console("Handshaking...");
  $upgrade="HTTP/1.1 101 Switching Protocols\r\n".
                    "Upgrade: websocket\r\n".
                    "Connection: Upgrade\r\n".
                    "Sec-WebSocket-Accept: ".calc_accept($strkey)."\r\n\r\n";
  socket_write($user->socket,$upgrade.chr(0),strlen($upgrade.chr(0)));
  $user->handshake=true;
  console($upgrade);
  console("Done handshaking...");
  return true;
} 
```

这两个函数获取客户端的握手并通过套接字获取用户对象：

```
function getheaders($req){
  $r=$h=$o=null;
  if(preg_match("/GET (.*) HTTP/"   ,$req,$match)){ $r=$match[1]; }
  if(preg_match("/Host: (.*)\r\n/"  ,$req,$match)){ $h=$match[1]; }
  if(preg_match("/Origin: (.*)\r\n/",$req,$match)){ $o=$match[1]; }
  if(preg_match("/Sec-WebSocket-Key: (.*)\r\n/",$req,$match)){ $key=$match[1]; }
  if(preg_match("/\r\n(.*?)\$/",$req,$match)){ $data=$match[1]; }
  return array($r,$h,$o,$key,$data);
}

function getuserbysocket($socket){
  global $users;
  $found=null;
  foreach($users as $user){
    if($user->socket==$socket){ $found=$user; break; }
  }
  return $found;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:31:52.210

`pack`对于 126 到 65536 字节之间的消息，格式字符串看起来是错误的。你能尝试改变吗

> “CCS” - 无符号短（始终为 16 位，机器字节顺序）

到

> “CCn” - “network”（大端）顺序中的无符号短（16 位）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:15:37.853

我解决了。

对于任何在这个奇怪问题上苦苦挣扎的人，这就是答案：

从握手函数中删除 socket_write($user->socket,$upgrade.chr(0),strlen($upgrade.chr(0))) 的 chr(0)。

我仍然会将 simnoc 的答案标记为正确答案，因为他启发了我。谢谢

# c# - ContextObject 是线程安全的吗？

> ID：15729576
> 
> 赞同：-4
> 
> 时间：2013-03-31T12:57:09.330
> 
> 标签：c#, entity-framework

**ContextObject 是线程安全的吗？如果没有，当我在其中一个线程中调用 SubmitChanges 时会发生什么？**

如果 2 个或多个线程使用相同`ContextObject`的线程并且其中一个线程调用会发生`ContextObject.SubmitChanges()`什么？

`ContextObject`我应该为我的数据库的每个查询构建一个新的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T17:10:36.767

不，`ContextObject`不是线程安全的。文档 ( [http://msdn.microsoft.com/en-us/library/system.data.objects.objectcontext.aspx](http://msdn.microsoft.com/en-us/library/system.data.objects.objectcontext.aspx) ) 详细说明：

> ObjectContext 类不是线程安全的。

# android - 使用 androidbox 蓝牙连接诺基亚 Lumia 手机时出现 Android“服务发现失败”异常

> ID：15729578
> 
> 赞同：3
> 
> 时间：2013-03-31T12:57:38.777
> 
> 标签：android, bluetooth

在 Android BluetoothChat 程序行

```
 tmp = device.createRfcommSocketToServiceRecord(MY_UUID_SECURE); 
```

显示“服务发现失败”异常。

```
 private static final UUID MY_UUID_SECURE = UUID
        .fromString("00001101-0000-1000-8000-00805F9B34FB");

      public ConnectThread(BluetoothDevice device, boolean secure) {
        mmDevice = device;
        BluetoothSocket tmp = null;
        mSocketType = secure ? "Secure" : "Insecure";

        // Get a BluetoothSocket for a connection with the
        // given BluetoothDevice
        try {
            if (secure) {
                tmp = device.createRfcommSocketToServiceRecord(MY_UUID_SECURE);
            } else {
                tmp = device.createInsecureRfcommSocketToServiceRecord(MY_UUID_INSECURE);
            }
        } catch (Exception e) {
            Log.e(TAG, "Socket Type: " + mSocketType + "create() failed", e);
        }
        mmSocket = tmp;
    }

    public void run() {
        Log.i(TAG, "BEGIN mConnectThread SocketType:" + mSocketType);
        setName("ConnectThread" + mSocketType);

        // Always cancel discovery because it will slow down a connection
        mAdapter.cancelDiscovery();

        // Make a connection to the BluetoothSocket
        try {
            // This is a blocking call and will only return on a
            // successful connection or an exception
            mmSocket.connect();
        } catch (IOException e) {
            try {
                mmSocket.close();
            } catch (IOException e2) {
                Log.e(TAG, "unable to close() " + mSocketType
                        + " socket during connection failure", e2);
            }
            connectionFailed();
            return;
        }

        // Reset the ConnectThread because we're done
        synchronized (BluetoothChatService.this) {
            mConnectThread = null;
        }

        // Start the connected thread
        connected(mmSocket, mmDevice, mSocketType);
    } 
```

这里 mmSocket.connect(); 未连接并显示“服务发现失败”异常。

我努力了

```
 Method  m = device.getClass().getMethod("createRfcommSocket",new Class[] { int.class });
            tmp = (BluetoothSocket) m.invoke(device, 1); 
```

但同样的例外即将到来。请告诉我可能的解决方案...

# html - 如何在 sprite 图像上创建 css 过渡淡入淡出？

> ID：15729580
> 
> 赞同：2
> 
> 时间：2013-03-31T12:57:47.190
> 
> 标签：html, css

我正在为我的一些菜单项使用精灵图像链接，使用背景位置定位。我想在悬停时做出淡入淡出的效果。我设置了一个

演示[http://jsfiddle.net/6q2hH/](http://jsfiddle.net/6q2hH/)

```
<li class="mobileimg"><a href="#" class="mobileimage" title="Go Mobile"></a></li>

    li.mobileimg .mobileimage{
     display:block;
     background:transparent url('http://www.dagrafixdesigns.com/Templates/DA-2011/DA-2013/Nike_13/img/mobile.png')no-repeat;
     width: 30px;
     height:30px;
     margin-top:9px;
     margin-left:3px;
    }

    li.mobileimg .mobileimage:hover {background-position:0px -29px;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T13:46:27.903

首先，您需要将不透明度设置为`.mobileimage:hover`小于 1。为了跨浏览器兼容性，请尝试：

```
.mobileimage:hover {
    filter: alpha(opacity=50);
    -khtml-opacity: .5;
    -ms-filter: "alpha(opacity=50)";
    -moz-opacity: .5;
    opacity: .5;
} 
```

然后，要创建实际的过渡效果，您需要告诉`.mobileimage`在不透明度上创建过渡，而不是`opacity: .5`立即切换到：

```
.mobileimage {
    -webkit-transition: opacity 500ms ease;/* Saf3.2+, Chrome */
    -moz-transition: opacity 500ms ease;   /* FF4+ */
    -ms-transition: opacity 500ms ease;    /* IE10? */
    -o-transition: opacity 500ms ease;     /* Opera 10.5+ */
    transition: opacity 500ms ease;     
} 
```

`500ms`是不透明度改变需要多长时间，`ease`是过渡效果的类型。请参阅[更新的小提琴](http://jsfiddle.net/6q2hH/8/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T13:05:10.303

像这样的东西？[http://jsfiddle.net/6q2hH/3/](http://jsfiddle.net/6q2hH/3/)

```
li.mobileimg .mobileimage{
 display:block;
 background:transparent url('http://www.dagrafixdesigns.com/Templates/DA-2011/DA-2013/Nike_13/img/mobile.png')no-repeat;
 width: 30px;
 height:30px;
 margin-top:9px;
 margin-left:3px;
}

li.mobileimg .mobileimage:hover {
    background-position:0px -29px;
    -webkit-animation-name: fadingItOut;
    -webkit-animation-duration: 1s;
    -webkit-animation-timing-function: linear;
}

@-webkit-keyframes fadingItOut {
    0% {
        opacity: 1.0;
    }
    100% {
        opacity: 0.0;
    }
}
} 
```

您可以根据需要调整行为。查看[Mozilla MDN](https://developer.mozilla.org/en-US/docs/CSS/transform)了解更多信息。

还要记住，这只是 Safari/Chrome/Chromium/etc 的 WebKit 示例。其他前缀是（所有动画标签都需要前缀，这只是一个例子）；

```
animation-name // Vanilla (general CSS)
-moz-animation-name // Firefox
-o-animation-name // Opera
-ms-animation-name // Internet Explorer 
```

对于框架；

```
@keyframes fadingItOut {
@-moz-keyframes fadingItOut {
@-o-keyframes fadingItOut {
@-ms-keyframes fadingItOut { 
```

# c++ - 是否有工具可以将 C++ 中的源代码转换为 C/C++ 中的源代码，但使用实例化（展开）模板？

> ID：15729585
> 
> 赞同：7
> 
> 时间：2013-03-31T12:58:12.060
> 
> 标签：c++

是否有工具可以将 C++ 中的源代码转换为 C/C++ 中的源代码，但使用实例化（展开）模板？这对于明确理解 C++ 模板转换的代码是必要的。它可能存在于 IDE（MSVS、QtCreator、...）或编译器（ICC、GCC、MSVC、Clang）中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T19:04:25.937

这似乎已经在 SO

*   [调试模板实例化](https://stackoverflow.com/questions/7325910/debugging-template-instantiations)
*   [链接 2](https://stackoverflow.com/questions/4448094/can-we-see-the-template-instantiated-code-by-c-compiler)
*   [链接 3](https://stackoverflow.com/questions/1219007/c-template-metaprogramming-is-it-possible-to-output-the-generated-code)（也有一篇不错的论文）
*   [如何在 C++ 中调试大量模板化的代码？](https://stackoverflow.com/questions/563414/how-do-you-debug-heavily-templated-code-in-c)

Alexey Frunze 使用反汇编代码的想法/原理非常好，再加上简化模板的使用，有很好的机会准确地理解它的作用。

**编辑 1** 关于如何理解编译器所做的事情还有其他一些可能性

1.  使用：`gcc -S -O1 {yourcode.cpp}`获取程序集并使用工具`c++filt`（如果您对 C-Code 感觉更舒服，它是[binutils](http://ftp.gnu.org/gnu/binutils/)的一部分，用于将反汇编转换为 C-Code
2.  用途：`g++ -fdump-tree-original file.cpp`获取一些（伪）C++ 代码
3.  使用 MSVC++ 调试器和最后一次实例化后的断点，查看作为实例化模板参数的所有类型和值
4.  使用：使用实例化模板生成 XML 的[GCC XML](https://gccxml.github.io/HTML/Index.html)（[常见问题解答](https://gccxml.github.io/HTML/FAQ.html)）
5.  要了解编译器如何实例化和优化模板，您可以使用 Clang：`-emit-llvm`获取 LLVM IR，并使用`llvm-dis`将其转换为文本
6.  [CPP 洞察力](https://cppinsights.io/)是一个基于 LLVM 的工具的网站，用于查看实例化

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T20:42:50.300

您可以通过在实例化或其参数中放置故意错误来解决该问题，然后您将让编译器（假设体面的版本：gcc 4.8、clang 等）输出类似以下内容的内容：“模板 XXX 实例化错误A=int, B=float, ..”。

# c++ - 线程局部指针初始化

> ID：15729588
> 
> 赞同：1
> 
> 时间：2013-03-31T12:58:38.987
> 
> 标签：c++, thread-local-storage

在阅读下面链接的 Niklas Frykholm 的非常好的博客文章时，我遇到了一些我无法完全理解的东西。

[http://bitsquid.blogspot.nl/2012/01/sensible-error-handling-part-1.html](http://bitsquid.blogspot.nl/2012/01/sensible-error-handling-part-1.html)

这段代码让我很困惑：

```
__THREAD Array<const char *> *_error_context_name;
__THREAD Array<const char *> *_error_context_data; 
```

该代码定义了一个指向字符串数组的线程本地指针，该数组用作简单的堆栈。我不太明白的是如何以跨平台的方式初始化和销毁​​数组？此外，这如何与 dll 边界一起工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T16:34:50.163

Thread local only comments on where the variable resolves to in the program. You'd need to allocate it before using, just like any other variable.

You would want to do it when the thread started preferably, for the sake of sanity and performance.

# php - Laravel 处理 if else 语句的最佳或有效方法

> ID：15729592
> 
> 赞同：0
> 
> 时间：2013-03-31T12:59:00.480
> 
> 标签：php, laravel, if-statement

我有点卡住了，我有很多 if else 语句处理，我需要在更多的无页面中使用它，所以在视图中处理它不是一个好主意（并且阅读它不是一个好主意）

所以我被困住了，我有 2 张桌子。

```
user
users_details 
```

`User table`存储基本登录信息，并且用户`details`具有以下字段

```
user_id
first_name  
last_name   
company 
location    
experience  
compensation    
about   
gender  
year    
day 
month   
profile_image 
```

我的关系

**用户模型**

```
public function detail()
{
   return $this->has_one('Detail');
} 
```

**详细型号**

```
public function user()
{
   return $this->belongs_to('User');
} 
```

所以我坚持的是如何处理对象到 r`eturn experience, compensation`因为那些我需要在不止一个页面上的东西，起初我在我的控制器中做了这个

```
public function get_index($username = null)
{

   $user = User::get_profile($username);

   if (is_null($user))  return Response::error('404');

   switch ($user->detail->experience) {
    case 1:
        $user->detail->experience = "No experience";
    break;

    case 2:
        $user->detail->experience = "Some experience";
    break;

    case 3:
        $user->detail->experience = "Experienced";
    break;

    case 4:
        $user->detail->experience = "Very experienced";
    break;

   }

    switch ($user->detail->compensation) {
    case 1:
        $user->detail->compensation = "Any";
    break;

    case 2:
        $user->detail->compensation = "Depends on Assignment ";
    break;

    case 3:
        $user->detail->compensation = "Paid Assignments Only ";
    break;

    case 4:
        $user->detail->compensation = "Time for Print ";
    break;

   }

   $this->layout->title = 'Profile' . ' ' . $username ;

   $this->layout->content = View::make( 'user.profile' )->with( 'user', $user );

} 
```

而且我知道这是我应该提出的麦芽汁想法，因为它不能解决我的问题，无效，我仍然需要复制。

那么有人可以向我展示处理这些问题的示例和有效方法吗？

将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T13:10:11.697

嗯，这确实很奇怪。

但是，您有两种方法：

1) 为答案定义表并与您的用户表连接，因此 SQL 结果将返回字符串，而不是 ID

2）如果出于某种原因您仍然希望在代码级别将 ID 与 Text 相关联，您可以执行以下操作：

在细节模型中定义方法，如compensation_str() 将进行此切换，对于经验也是如此。在每个需要显示此文本的地方调用此方法 ($user->details->compensation_str())

# android - 如何在 JSON 对象中添加字符串数组？

> ID：15729598
> 
> 赞同：25
> 
> 时间：2013-03-31T12:59:41.270
> 
> 标签：android, json, arrays

我正在尝试在 android 上创建这个 JSON 对象。我被困在如何在对象中添加字符串数组。

```
A = {
    "class" : "4" ,
    "name" : ["john", "mat", "jason", "matthew"]
    } 
```

这是我写的代码：

```
import org.json.JSONObject;

JSONObject school = new JSONObject();

school.put("class","4");
school.put("name", ["john", "mat", "jason", "matthew"] ); 
```

但是最后一行给出了一个错误。有办法过去吗？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-10-16T12:20:10.797

汤姆建议的一点不恰当的方法。优化后的代码是：

```
ArrayList<String> list = new ArrayList<String>();
list.add("john");
list.add("mat");
list.add("jason");
list.add("matthew");

JSONObject school = new JSONObject();

school.put("class","4");
school.put("name", new JSONArray(list)); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-31T13:10:45.233

您收到错误是因为您的最后一行是无效的 Java。

```
school.put("name", new JSONArray("[\"john\", \"mat\", \"jason\", \"matthew\"]")); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-31T13:00:54.533

因此，您会遇到错误。

```
school.put("name", ["john", "mat", "jason", "matthew"] );
                   ^                                 ^ 
```

这样做。

```
school.put("name", new JSONArray("[\"john\", \"mat\", \"jason\", \"matthew\"]")); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-03-23T07:45:32.630

@bhavindesai，答案很好。这是解决此问题的另一种方法。您可以使用 Json Simple 库简单地做到这一点。这是毕业典礼

```
compile 'com.googlecode.json-simple:json-simple:1.1' 
```

这是示例代码：

```
org.json.simple.JSONObject jsonObject=new org.json.simple.JSONObject();
jsonObject.put("Object","String Object");

ArrayList<String> list = new ArrayList<String>();
            list.add("john");
            list.add("mat");
            list.add("jason");
            list.add("matthew");

            jsonObject.put("List",list); 
```

就是这样。:)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-11-27T09:02:50.947

正如 bhavindesai 指出的那样，

```
ArrayList<String> list = new ArrayList<String>();
list.add("john");
list.add("mat");
list.add("jason");
list.add("matthew");

JSONObject school = new JSONObject();

school.put("class","4");
school.put("name", new JSONArray(list)); 
```

是一种更好，更清洁的方法。

要导入正确的包，您应该编写：

```
import org.json.simple.JSONArray; 
```

在java类之上。

如果您使用的是 Maven，请添加

```
 <dependency>
    <groupId>com.googlecode.json-simple</groupId>
    <artifactId>json-simple</artifactId>
    <version>1.1</version>  
</dependency> 
```

到 pom.xml。然后，下载源和依赖项并重新导入。尽管我使用了评论，但我还是回答了，因为评论搞砸了代码缩进。

# php - 无法在 XAMPP 上激活 MySQL 数据库

> ID：15729599
> 
> 赞同：0
> 
> 时间：2013-03-31T12:59:43.043
> 
> 标签：php, mysql, phpmyadmin, xampp

这似乎是一个常见问题，我尝试寻找答案并尝试根据人们的答案解决我的问题，但没有成功。

前几天，我启动了本地 XAMPP 服务器和 MySQL 数据库并尝试访问 phpMyAdmin，但出现错误“无法加载 mysql 扩展。请检查您的 PHP 配置”。php.ini 文件中的 MySQL 扩展名均未注释。我真的不知道发生了什么，因为它在前一天正常工作。如果我需要提供更多信息，请告诉我。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T13:24:38.063

XAMPP 安装开箱即用的 Apache、PHP 和 Mysql。您必须有其他一些干扰 XAMPP 的 PHP.ini。查看 phpinfo() 以找出正在使用的 PHP.ini。

如果 PHP 是单独安装的，请检查 Program Files。删除这个。

# javascript - 如何在backbone.js中传递一个包含/的id

> ID：15729600
> 
> 赞同：1
> 
> 时间：2013-03-31T12:59:46.847
> 
> 标签：javascript, backbone.js, encoding

嗨，我从服务器获取数据的基本模型运行良好。我想实现一个搜索功能。当用户输入任何数据时，请求会转到浏览器并返回所需的模型。

```
var Book = Backbone.Model.extend({
  urlRoot: '/books'
});

  render: function(options) {
  books = new Book({id:options.name});
  books.fetch();
   } 
```

在哪里

```
 name = "search/"+dynamic_data; 
```

当我传递时正在形成的请求 URL --> 变量 dynamic_data 中的“生命”

```
 http://host/path/search%2Flife 
```

请求我想要的 URL

```
 http://host/path/search/life 
```

我如何编码/转义我的字符串以达到预期的结果。我试过 escape()、encodeURI()、encodeURIComponents

1.  解决此问题的一种解决方法是使用 urlRoot 作为 /books/search 再创建一个模型并仅传递 name 。我不认为这是正确的。我应该使用这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T14:35:43.710

根据你的附加精确度，**生活**实际上是一个书名......

看起来 Backbone 更好地与 RESTful API 集成。在 REST 中，您的 url 不应包含动词，并且要搜索书籍，您将执行`GET /books/?name=life`.

在这种情况下，您只需要定义一个`Backbone.Collection`like：

```
var BooksCollection = Backbone.Collection.extend({
    model: Book,
    url: '/books'
}); 
```

取书：

```
var books = new BooksCollection();

books.fetch({data : {name: 'life'}}); //GET /books/?name=life 
```

如果您真的希望您的搜索操作以 target 为目标`/search/:name`，则必须检查[Backbone.Collection](http://backbonejs.org/#Collection) api，但我认为您需要查看[http://backbonejs.org/#Sync](http://backbonejs.org/#Sync)

您可以将集合的`sync`方法覆盖为：

```
Backbone.Collection.extend({
    ...
    sync: function (method, model, options) {

        //for read operations, call the search url
        if (method === 'read') {
            options.url = '/search/' + options.data.name;
            delete options.data.name;
        }

        //call the default sync implementation
        return Backbone.Collection.prototype.sync.apply(this, arguments);
    }
}); 
```

在这种情况下调用`books.fetch({data : {name: 'life'}});`将导致`GET /books/life`.

这是一个显示示例的[小提琴。](http://jsfiddle.net/KZuB7/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T14:07:26.567

这会起作用：

`books = new Book({id:options.name}, {url: options.name));`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T15:56:33.123

decodeURIComponent() 将解码`http://host/path/search%2Flife`为`http://host/path/search/life`.

# mono - Monogame缺少monodevelop的方法异常

> ID：15729601
> 
> 赞同：1
> 
> 时间：2013-03-31T12:59:50.997
> 
> 标签：mono, monodevelop, opentk, monogame

我已按照[此处](https://github.com/mono/MonoGame/wiki/Tutorials%3AInstalling-Prerequisites-on-Linux "https://github.com/mono/MonoGame/wiki/Tutorials%3AInstalling-Prerequisites-on-Linux")的安装指南进行操作，但似乎对我不起作用。这是我运行程序时的异常消息：

`System.MissingMethodException has been thrown`

`Method not found: 'OpenTK.NativeWindow.set_CursorVisible'.`

```
System.MissingMethodException: Method not found: 'OpenTK.NativeWindow.set_CursorVisible'.
 at Microsoft.Xna.Framework.GamePlatform.set_IsMouseVisible (Boolean value) [0x00000] in <filename unknown>:0
 at Microsoft.Xna.Framework.OpenTKGamePlatform..ctor (Microsoft.Xna.Framework.Game game) [0x00000] in <filename unknown>:0
 at Microsoft.Xna.Framework.GamePlatform.Create (Microsoft.Xna.Framework.Game game) [0x00000] in <filename unknown>:0
 at Microsoft.Xna.Framework.Game..ctor () [0x00000] in <filename unknown>:0
 at testing.Game1..ctor () [0x00000] in <filename unknown>:0
 at testing.Program.Main () [0x00000] in /home/user/testing/testing/Program.cs:20 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:19:20.113

您可以使用此处提供的安装程序进行安装[http://monogame.codeplex.com/releases/view/102870](http://monogame.codeplex.com/releases/view/102870)

然后从 Visual Studio 创建一个新项目

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T11:23:21.410

我通过下载`monodevelop-monogame`依赖项解决了这个问题。

# build - sphinx 语法位置找不到资源

> ID：15729602
> 
> 赞同：0
> 
> 时间：2013-03-31T12:59:59.280
> 
> 标签：build, cmusphinx, sphinx4

使用 ant 构建 JSGFDemo 时，一切正常。运行 JSGFDemo.jar 构建工件没有任何错误。但是，当使用在 eclipse 中导入的源文件夹，并将 lib/ 目录中的 jars 添加到构建路径时，程序错误并显示以下消息：

```
Problem configuring recognizerProperty exception component:'jsgfGrammar' property:'grammarLocation' - Can't locate resource:/edu/cmu/sphinx/demo/jsapi/jsgf/
edu.cmu.sphinx.util.props.InternalConfigurationException: Can't locate resource:/edu/cmu/sphinx/demo/jsapi/jsgf/ 
```

`ConfigurationManagerUtils.class.getResource(resourceName);`由于某种原因，对in的调用`ConfigurationManagerUtils.resourceToURL(String location)`似乎为 location = "resource:/edu/cmu/sphinx/demo/jsapi/jsgf/" 返回了不同的结果。（null，或有效的 URL 对象）

作为旁注，我认为 getResource("/path/to/a/dir/not/file/"); 当它解析为 jar 内的路径时无效。

一段时间以来，我一直在努力解决这个问题，但看不出我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T00:18:10.727

我相信已经找到了问题所在。默认情况下，Eclipse 似乎以不同的方式构建 jar，省略了目录条目。

使用 unzip -v 调查档案会发现一些有趣的细节。

使用 Ant 构建的文件：

```
Archive:  JSGFDemo.jar
 Length   Method    Size  Cmpr    Date    Time   CRC-32   Name
--------  ------  ------- ---- ---------- ----- --------  ----
       0  Stored        0   0% 2013-03-31 03:13 00000000  META-INF/
     284  Defl:N      210  26% 2013-03-31 03:13 ddd976ff  META-INF/MANIFEST.MF
       0  Stored        0   0% 2013-03-31 03:08 00000000  edu/
       0  Stored        0   0% 2013-03-31 03:08 00000000  edu/cmu/
       0  Stored        0   0% 2013-03-31 03:13 00000000  edu/cmu/sphinx/
       0  Stored        0   0% 2013-03-31 03:12 00000000  edu/cmu/sphinx/demo/
       0  Stored        0   0% 2013-03-31 03:13 00000000  edu/cmu/sphinx/demo/jsapi/
       0  Stored        0   0% 2013-03-31 03:13 00000000  edu/cmu/sphinx/demo/jsapi/jsgf/
    7391  Defl:N     3501  53% 2013-03-31 03:13 938438dd  edu/cmu/sphinx/demo/jsapi/jsgf/JSGFDemo.class
     798  Defl:N      326  59% 2013-03-31 03:13 647722fc  edu/cmu/sphinx/demo/jsapi/jsgf/books.gram
     204  Defl:N      140  31% 2013-03-31 03:13 789bb514  edu/cmu/sphinx/demo/jsapi/jsgf/commands.gram
    9295  Defl:N     1500  84% 2013-03-31 03:13 3b519044  edu/cmu/sphinx/demo/jsapi/jsgf/jsgf.config.xml
    1589  Defl:N      473  70% 2013-03-31 03:13 60075af0  edu/cmu/sphinx/demo/jsapi/jsgf/movies.gram
     299  Defl:N      195  35% 2013-03-31 03:13 42e94d32  edu/cmu/sphinx/demo/jsapi/jsgf/music.gram
     666  Defl:N      288  57% 2013-03-31 03:13 ca4b72f9  edu/cmu/sphinx/demo/jsapi/jsgf/news.gram
--------          -------  ---                            -------
   20526             6633  68%                            15 files 
```

使用eclipse导出的jar：

```
Archive:  JSGFDemo-eclipse.jar
 Length   Method    Size  Cmpr    Date    Time   CRC-32   Name
--------  ------  ------- ---- ---------- ----- --------  ----
     180  Defl:N      134  26% 2013-03-31 23:35 1e681d3b  META-INF/MANIFEST.MF
    7338  Defl:N     3537  52% 2013-03-31 23:29 ed8c4c3f  edu/cmu/sphinx/demo/jsapi/jsgf/JSGFDemo.class
     798  Defl:N      326  59% 2013-03-31 13:21 647722fc  edu/cmu/sphinx/demo/jsapi/jsgf/books.gram
     204  Defl:N      140  31% 2013-03-31 13:21 789bb514  edu/cmu/sphinx/demo/jsapi/jsgf/commands.gram
    9295  Defl:N     1500  84% 2013-03-31 13:21 3b519044  edu/cmu/sphinx/demo/jsapi/jsgf/jsgf.config.xml
    1589  Defl:N      473  70% 2013-03-31 13:21 60075af0  edu/cmu/sphinx/demo/jsapi/jsgf/movies.gram
     299  Defl:N      195  35% 2013-03-31 13:21 42e94d32  edu/cmu/sphinx/demo/jsapi/jsgf/music.gram
     666  Defl:N      288  57% 2013-03-31 13:21 ca4b72f9  edu/cmu/sphinx/demo/jsapi/jsgf/news.gram
--------          -------  ---                            -------
   20369             6593  68%                            8 files 
```

在快速谷歌之后，我在 Eclipse 的 jar 导出向导中找到了“添加目录条目”选项。

# ios - 2 个堆叠的多点触控 CCLayers

> ID：15729604
> 
> 赞同：1
> 
> 时间：2013-03-31T13:00:01.347
> 
> 标签：ios, objective-c, cocos2d-iphone, multi-touch

我有两个cclayer。顶级 cclayer 有几个对象（从 ccnode 派生）并且启用了多点触控。我使用 cctouchesbegan 来检测对这些对象的触摸。一切正常。

但在顶部 cclayer 下方，我想要另一个启用多点触控的 cclayer。因此，每当没有在顶部 cclayer 上触摸对象时，我希望底部 cclayer 对触摸做出反应。底部的 cclayer 基本上只是一个纯色背景，我希望它在被触摸时做出反应。现在两个cclayers同时对触摸做出反应。

我知道单点触摸很容易通过触摸调度程序解决并设置优先级。但我被卡住了，因为两个 cclayer 都启用了多点触控很重要。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T16:09:18.967

多点触摸：仅在顶层启用触摸输入。如果顶层确定触摸没有在该层的一个精灵上开始，它将简单地调用底层的相同 ccTouchesBegan 方法。对于该特定触摸的所有后续事件（移动、结束）都相同。

单次触摸：当该层处理触摸并且另一层不应该也处理该触摸时，从 ccTouchBegan 返回 YES。

# c# - 如何使用 c# windows form 应用程序转换日期？

> ID：15729611
> 
> 赞同：-5
> 
> 时间：2013-03-31T13:00:42.083
> 
> 标签：c#

我想用 c# windows form app 制作一个日期转换器应用程序。我使用了以下代码，但我可以只在那个日期使用它。

```
System.Globalization.PersianCalendar pc;
pc = new System.Globalization.PersianCalendar();
year_label1.Text = pc.GetYear(DateTime.Now).ToString(); 
```

我想给出一个日期，将波斯历转换为儒略历。我想使用这个应用程序将我的相机图片名称（即波斯历名称）排序到儒略历名称中的文件夹中。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T14:02:57.423

但是，您似乎实际上知道答案，但无论如何您都可以像这样将波斯语转换为儒略日期：

```
public static DateTime PersianDateToJulianDate(DateTime persianDate)
{
    PersianCalendar pc = new PersianCalendar();

    return new DateTime(persianDate.Year, persianDate.Month, persianDate.Day, pc);
}

public static DateTime JulianDateToPersianDate(DateTime persianDate)
{
    PersianCalendar pc = new PersianCalendar();

    return new DateTime(pc.GetYear(persianDate),
                         pc.GetMonth(persianDate),
                         pc.GetDayOfMonth(persianDate));
} 
```

然后你可以像这样调用这些函数：

```
DateTime now = DateTime.Parse("1392/01/11");
DateTime julian = PersianDateToJulianDate(now);     //convert to julian
DateTime persian = JulianDateToPersianDate(julian); //convert back again 
```

# c# - 线程安全的哈希表

> ID：15729614
> 
> 赞同：0
> 
> 时间：2013-03-31T13:00:45.220
> 
> 标签：c#, multithreading

我有一个包含一个`HashTable`字段的类。我需要如何实现独占写入但非独占读取的方法`get`和方法？`set``HashTable`

```
private Hashtable _data = new Hashtable();

public object this[object key]
{
    get {} // must be non-exclusive 
    set {} // must be exclusive
} 
```

我需要*自己*实现 getter 和 setter。没有任何额外的框架助手（我在面试时问过这个问题）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T15:07:27.320

假设允许锁定和等待锁定，那么以下逻辑应该起作用（注意它使用Java的语义。我不知道它是否适用于c#）：

```
Object lock
bool write = false
int reads = 0

write(..) {
    synch(lock) {
        while (write || reads > 0) 
            lock.wait();
        write = true;
    }

    ...

    synch(lock) {
        write = false;
        lock.notifyAll();
    }
}

read() {
    synch(lock) {
        while (write) 
            lock.wait();
        reads ++;
    }

    ...

    synch(lock) {
        if (--reads == 0)
            lock.notifyAll();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T13:25:56.757

首先说明您不会使用 Hashtable，而是使用 .NET 4 中的新并发集合之一，例如在内部处理所有同步的 ConcurrentDictionary。

但是，如果您仍然想滚动您自己的同步设置器，只需将一个对象添加到该类并锁定它。

```
private readonly object _syncRoot = new object();
private Hashtable _data = new Hashtable();

public object this[object key]
{
    get 
    {
        return _data[key];
    }
    set 
    {
        lock(_syncRoot) _data[key] = value;
    } 
} 
```

另外，我忘记了微软在 Hashtable 中包含了一个 SyncRoot 对象，所以这也可以：

```
private Hashtable _data = new Hashtable();

public object this[object key]
{
    get 
    {
        return _data[key];
    }
    set 
    {
        lock(_data.SyncRoot) _data[key] = value;
    } 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T13:30:10.470

就像下面这样：

```
get 
{
    return _data[key];
}
set 
{
    lock(_data)
    {
      _data[key] = value;
    }
} 
```

# android - 在edittext字段中更改文本后如何更新textview

> ID：15729619
> 
> 赞同：1
> 
> 时间：2013-03-31T13:01:20.867
> 
> 标签：android, android-layout, android-edittext, textview

我有这个应用程序，其中**字段 1 是 edittext**，**字段 2 是 textfield**。 ![在此处输入图像描述](https://i.stack.imgur.com/H2sfS.jpg)

我想根据在 edittext 字段中输入的数据将日期添加到 textview 中。那是在edittext字段中输入数据之后，当我移动到下一个edittext字段时，必须更新第一个edittext字段的textview。我知道添加 textchangedlistener 但如果它是解决方案我应该如何实现它。

**编辑：**我试过 setonfocuschanged 但它工作正常

```
k1_e.setOnFocusChangeListener(new View.OnFocusChangeListener() {

        @Override
        public void onFocusChange(View arg0, boolean arg1) {
            // TODO Auto-generated method stub
            if((v_k1>=5.63)&&(v_k1<=11.25)){
                k1_m.setText("mm");
            }else if((v_k1>=30)&&(v_k1<=60)){
                k1_m.setText("D");
            }

        }
    });
    k2_e.setOnFocusChangeListener(new OnFocusChangeListener() {

        @Override
        public void onFocusChange(View v, boolean hasFocus) {
            // TODO Auto-generated method stub
            if((v_k2>=5.63)&&(v_k2<=11.25)){
                k2_m.setText("mm");
            }else if((v_k2>=30)&&(v_k1<=60)){
                k2_m.setText("D");
            }
        }
    }); 
```

**编辑2：** 这里有详细信息

```
dr=Float.parseFloat(dr_e.getText().toString());
    k1=Float.parseFloat(k1_e.getText().toString());
    k2=Float.parseFloat(k2_e.getText().toString());
    al=Float.parseFloat(al_e.getText().toString());
    al_const=Float.parseFloat(alconst_e.getText().toString());

    v_k1=Float.valueOf(k1);
    v_k2=Float.valueOf(k2); 
```

**编辑 3：** 我将数据放入 edittext 字段使用

```
if(dr_e.getText().toString().length()==0|k1_e.getText().toString().length()==0|k2_e.getText().toString().length()==0|al_e.getText().toString().length()==0|alconst_e.getText().toString().length()==0){
        flag=1;
    }else{

    dr=Float.parseFloat(dr_e.getText().toString());
    al=Float.parseFloat(al_e.getText().toString());
    al_const=Float.parseFloat(alconst_e.getText().toString());

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T13:07:34.330

试试这个，你可以在 youredittext 上使用 onFocusChangeListener

```
 k1_e.setOnFocusChangeListener(new View.OnFocusChangeListener() {

        public void onFocusChange(View arg0, boolean arg1) {
                       String data=k1_e.getText().toString().trim();
             if(data.length!=0)
              {
                      k1=Float.parseFloat(data);
                       v_k1=Float.valueOf(k1);
             if((v_k2>=5.63)&&(v_k2<=11.25)){
                                  k2_m.setText("mm");
                                }else if((v_k2>=30)&&(v_k1<=60)){
                           k2_m.setText("D");
                        }
        }
                 }
    }); 
```

# ios - ios - 要从 iTunes 传输到设备的 Ad-Hoc 构建的正确代码签名配置是什么？

> ID：15729626
> 
> 赞同：2
> 
> 时间：2013-03-31T13:02:38.247
> 
> 标签：ios, xcode, ios5, ios6, ad-hoc-distribution

我正在学习如何创建应用程序的临时版本，以便可以将其放在本地 iTunes 上，然后将其传输到设备上。

我创建了一个分发配置文件并将其命名为 Production Provisioning AdHoc。然后我将我正在测试的设备添加到该配置文件中。然后在代码签名中，对于分发设置，我将其设置为该配置文件，但开发设置应该是什么？这有关系吗？

我遇到的问题是，当我归档我的项目并将其作为 AdHoc 分发时，我可以在 iTunes 中看到该应用程序，但是当我进行同步并申请将其传输到设备时，即使 iTunes 说该应用程序是在设备上，该应用程序永远不会安装在设备上。

请帮助我了解我可能做错了什么以及如何解决它。从昨天开始，我一直坚持这一点。

谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T13:17:52.790

不确定 iTunes 是否允许 .ipa 传输。但是您可以使用 Xcode 将 .ipa 传输到设备。

以下是将 .ipa 安装到您的设备的步骤。

```
« Open Xcode->Window->Organisor.
« Click on devices tab
« Drag your .ipa to your device listed in side bar. 
```

![在此处输入图像描述](https://i.stack.imgur.com/xBwhn.png)

# ruby - Rspec - 如何为一系列方法编写规范

> ID：15729630
> 
> 赞同：0
> 
> 时间：2013-03-31T13:03:17.047
> 
> 标签：ruby, rspec

我正在学习 rspec，我想知道为调用其他方法链的方法编写规范的最有效方法是什么。例如：

```
class Example1
  def foo(dependency)
     dependency.bar("A")
     dependency.baz("B")
     dependency.bzz("C")
  end
end 
```

理想情况下，我想编写这样的规范：

```
it "should call bar" do
   ex = Example1.new
   dep = mock
   dep.should_receive(:bar).with("A")
   ex.foo(dep)
end
it "should call baz"
   ... 
it "should call bzz"
   ... 
```

但是，当我这样做时，我（可以理解）得到诸如“意外方法调用 baz”之类的异常。

那么处理这个问题的最佳方法是什么？我提出了一些想法，但我不知道其中任何一个是否好。

1.  使模拟依赖项成为“as_null_object”，以便它忽略额外的调用。（不利的一面 - 如果我在该对象上调用不需要的随机内容，我不会知道）
2.  将每个规范中两个未使用的依赖方法调用存根（Down side - 感觉非常干燥）
3.  在“之前”中存根所有三个依赖调用（不利的一面 - 在“之前”中放置了很多垃圾）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T14:26:56.370

~~RSpec 有一个称为 stub_chain 的功能：[https ://www.relishapp.com/rspec/rspec-mocks/v/2-0/docs/stubs/stub-a-chain-of-methods](https://www.relishapp.com/rspec/rspec-mocks/v/2-0/docs/stubs/stub-a-chain-of-methods)~~

在一个例子中测试它们怎么样？

```
it "should call bar"
   ex = Example1.new
   dep = mock
   dep.should_receive("bar").with("A")
   dep.should_receive("baz").with("B")
   dep.should_receive("bzz").with("C")
   ex.foo(dep)
end 
```

我相信您可以使用 RSpec 来验证调用它们的顺序，如果这很重要的话。

但是，这种方法通常表明代码的编写方式存在问题，例如违反了得墨忒耳定律。在您的示例中，`foo`应该是依赖项类的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T14:30:12.143

听起来您已经确定了 RSpec 为您提供的选项。我会选择选项 1 并使用`as_null_object`. 确实，您可能会错过对该对象的其他随机方法调用，但如果每个测试的目的只是断言正在调用特定方法，我会同意的，特别是如果我有更高级别的集成测试涵盖这种方法。

如果您确实需要验证没有调用其他方法，`dependency`则选项 3 可能有意义，但当实现更改时，此类测试可能会变得脆弱。

顺便说一句，为了使您的测试更简单，您可以使用它`subject`来避免显式实例化`Example1`（假设您使用的是`describe Example1`块），例如：

```
subject.foo(dep) 
```

（但是请参阅评论中的讨论 - 隐含的主题可以隐藏意图）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T14:56:21.463

我会以这种方式测试这段代码：

```
describe "checking foo method" do

  before(:each) do
    @ex = Example1.new
    @test = ClassOfDependency.any_instance
    @test.as_null_object
  end

  after(:each) do
    @ex.foo(dependency)
  end

  it "should call bar method" do
    @test.should_receive(:bar).with("A")
  end

  it "should call baz method" do
    @test.should_receive(:baz).with("B")
  end

  it "should call bzz method" do
    @test.should_receive(:bzz).with("C")
  end
end 
```

但我不确定它是否会起作用，希望它能给你一些想法。

# ios - ios 中的推送通知 - 显示不同请求的徽章和横幅

> ID：15729632
> 
> 赞同：1
> 
> 时间：2013-03-31T13:03:26.927
> 
> 标签：ios, push-notification, push, apple-push-notifications

我已经在我的产品中启用了推送通知。目前它显示了徽章。现在我想在同一产品中实现另一个通知，但响应不同。我是说，

一个请求发送徽章通知的响应，第二个请求发送横幅通知的响应。ios可以做吗？

请指导我。我一次只能做一个。但我怎么能同时做到呢？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T13:52:40.027

我不完全确定你想做什么。如果您想发送包含徽章和警报的单个推送通知，只需将徽章和警报都放入您的 JSON 有效负载中：

```
{

    "aps" : {

        "alert" : "You got your emails.",

        "badge" : 9

    }

} 
```

您必须在您的应用中注册两种类型的通知：

```
- (void)applicationDidFinishLaunching:(UIApplication *)app {

   // other setup tasks here....

    [[UIApplication sharedApplication] registerForRemoteNotificationTypes:(UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeAlert)];

} 
```

现在，当您发送推送通知时，将修改徽章编号并显示警报。

# c# - 为什么 c# 不会仅仅因为架构中的 xs:choice 而在 Visual Studio 中使用 add by service reference 从 wsdl 创建代码？

> ID：15729633
> 
> 赞同：3
> 
> 时间：2013-03-31T13:03:29.220
> 
> 标签：c#, php, web-services, soap, xsd

我们使用 php 创建了一个肥皂服务器，并且很少有函数根据传递的参数在 xml 元素方面给出不同的结果。

为了进一步解释，一个函数接受参数 a 并且根据接收到的数据，它可以返回具有不同数量的子元素的两个不同数组（复杂类型）中的任何一个。

例如

```
 if a =9 then outcome is array/struct ,,,, 
   a[delta]=20 ,,, 
   a[sigma]=yellow 

   if a =3  ,
   a[aTotallyDifferentBallgame]=Omaha ,,,
   a[t]=1 ,,,
   a[theNumberOfElementsCanVary]=yup 
```

为了解释这种可能的差异，我们在模式中使用了**选择**，从而试图暗示结果可以是选择中的任何单个元素，无论是简单类型还是复杂类型。

现在理论上这听起来很合乎逻辑，并且可以与 php 的 soap 客户端正常工作，但是当我们尝试在表单应用程序中使用 Visual Studio 的添加服务引用功能时；该应用程序未能为其创建代码，理由是由于某些深不可测的原因，不允许使用**xs:choice 。**

现在我真正想知道的是我需要对我的 wsdl 或 soap 服务器进行哪些更改才能使其正常工作。我们认为解决方法是仅将结果固定到一种可能的情况，并利用完全不同的函数来确定另一种情况的结果，从而避免使用选择，但坦率地说，这似乎太多余和奇怪了。

有什么我错过的吗？请让我知道你有什么想法。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:01:22.317

创建服务引用机制尝试将架构映射到 C# 类，并且 C# 类中没有与架构中的 a 对应的结构`choice`- 一个类不能具有一个属性或另一个属性的值，但不能同时具有这两个属性的值。

我的建议是替换`choice`为可选元素序列，相应的 C# 类将具有每个元素的属性 - 其中只有一个具有值，另一个将是`null`，因为 PHP 服务仅返回一个值一次。

# algorithm - 搜索一组数据的所有可能组合的算法

> ID：15729640
> 
> 赞同：2
> 
> 时间：2013-03-31T13:04:06.220
> 
> 标签：algorithm, search

我目前正在玩一个游戏，你有 5 个盔甲槽来装备盔甲。这些盔甲中的每一个本身都有用于不同点数的技能的“插槽”——例如，一个手臂可以具有 +3 点技能 A 和 +5 点技能 B。当您累积至少 10 点技能时，您将激活它以供使用。

作为一个练习，我想制作一个程序，给定一个包含所有盔甲件的数据库，然后给出一个标准列表（例如，我想在这组中有技能 A、技能 B、技能 C）将给出一组所有可能的盔甲组合，这些组合导致拥有这些技能，例如

装备头甲A，技能A +2 胸甲A，技能A +5，技能C +2

ETC..

或者

装备头甲B，技能A+5，技能B+2 胸甲A，技能A+5，技能C+2

ETC...

在进行此操作时，我应该考虑哪些算法、技术和注意事项？我打算用 C# 和某种独立的数据库一起做这个。

# php - RewriteRule 用于在一个应用程序中处理多个域？

> ID：15729641
> 
> 赞同：1
> 
> 时间：2013-03-31T13:04:09.707
> 
> 标签：php, .htaccess, mod-rewrite, url-rewriting, virtualhost

假设我有一个应用**程序**`example.com.`

一位**客户**可能会在`example.com/customer/hisname/`.

好吧，我想让客户为他的内容***分配***一个域，比如说`hisname.com`，所以这个（hisdomain.com）呈现`example.com/customer/hisname/`。

为此，我创建了两个虚拟主机，它们的根目录都在同一个位置，并且我编写了一个 .htaccess 文件以过滤 http_host，如果不是 example.com，则以传递请求的方式重写到 example.com/customer/hisname/。

尽管如此，当我没有在 URI 中获得 /customer/hisname/ 部分时，这种方法仍然不起作用。如果我访问 example.com/index.php 中的 hisname.com/list/，我需要同时拥有 /list/ 和（作为前缀）/customer/hisname/，我只会得到，如您所料只是/列表/。

那么，什么是正确的方法呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T13:37:51.427

如果可以创建[虚拟主机](http://httpd.apache.org/docs/current/vhosts/)，则应设置正确的文档根目录，而不是使用[mod_rewrite](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

```
<VirtualHost w.x.y.z:80>
    ServerAdmin webmaster@hisname.com
    DocumentRoot /path/to/www/customer/hisname
    ServerName hisname.com
    ...
</VirtualHost> 
```

如果这不可能，您可以提取该`host`部分并进行内部重写

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{HTTP_HOST} !^(?www\.)?example\.com$
RewriteCond %{HTTP_HOST} ^(.+)\.com$
RewriteRule ^ /index.php?prefix=customer/%1&request=%{REQUEST_URI} [L,QSA] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T13:40:36.747

使用变量 $_SERVER['HTTP_HOST'] 并​​根据请求的主机加载不同的视图。确保您处理所有需要的子主机并有一个默认页面

# javascript - 受限制图像的图像发布最佳实践

> ID：15729642
> 
> 赞同：1
> 
> 时间：2013-03-31T13:04:19.880
> 
> 标签：javascript, jquery, html

在我的用例中，我必须将图像发布到网站。但是，图像可能会在一段时间内受到限制。在此期间显示损坏图像的最佳做法是什么？

到目前为止我的方法：

*   [使用此处](http://www.daveoncode.com/2010/08/20/image-background-fallback-img-tag-error-handlers/)`<img>`提到的标记的 onerror 和 onload 处理程序
*   使用[placehold.it](http://placehold.it)放置所有损坏的图像

我将非常感谢有关这方面的任何指导方针/意见/最佳实践。此外，我如何优雅地回退到无法处理`<img>`元素事件的遗留系统。图像已经具有`ALT`属性，因此可以跳过这些行的指南。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T13:08:23.800

您对此进行了标记，`jQuery`因此我认为这是一个选项。

在这种情况下，最简单的解决方案确实是检测错误并替换图像：

```
$('img.myChangingImageClass').error(function(){
        $(this).attr('src', 'notavailableYet.png');
}); 
```

它简单、直接，适用于所有现代浏览器。

Matt 建议使用事件委托，如果您以后可能要添加图像，这很有用。此外，它为整个页面附加一个事件，而不是为每个图像附加一个事件。这可以通过以下方式完成：

```
$(document).on('error', 'img.myChangingImageClass', function () {
    $(this).attr('src', 'notavailableYet.png'); 
}); 
```

由于您已经有一个“alt”属性，这对于无法显示图像的系统和 SEO 来说是可以的。如果您愿意，可以使用`placehold.it`替换图像，但我认为不需要（这取决于您的用例）。您甚至可以`.hide()`使用图像或玩它。

# nosql - Riak 内存存储每键开销

> ID：15729647
> 
> 赞同：0
> 
> 时间：2013-03-31T13:05:14.777
> 
> 标签：nosql, riak, in-memory-database

[作为我之前问过的这个](https://stackoverflow.com/questions/15218460/what-is-the-riak-per-key-overhead-using-the-bitcask-backend)问题的后续，在使用内存中后端时，Riak 中的每个键开销是否有任何估计？到目前为止，谷歌并没有多大帮助，大多数搜索让我回到了 Bitcask 的估计。

我基本上是想了解内存后端是否更适合存储每个用户的会话 ID（每个用户是一个单独的键，会话 ID 是该键中的唯一值）与 Bitcask。每个键的开销是我在此过程中评估的变量之一。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T05:30:03.053

内存后端确实需要将整个对象存储在内存中，除了数据之外，存储桶和键还包括 Riak 添加到对象的元数据，例如矢量时钟，即使没有定义用户元数据或索引。[我无法准确估计此元数据的大小，但相信您上一个问题中提供的链接以及Riak 邮件列表上的这篇文章](http://lists.basho.com/pipermail/riak-users_lists.basho.com/2012-October/009887.html)中概述的几百字节是相当准确的。

# php - Magento 是否支持多线程？

> ID：15729649
> 
> 赞同：3
> 
> 时间：2013-03-31T13:05:22.617
> 
> 标签：php, magento

我想知道 Magento 是否支持多线程？如果是，那么如何？如果没有，那我们可以支持它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T13:47:13.437

Magento 是用 PHP 编写的。PHP 不是多线程的（开箱即用的实验除外）。因此，Magento*本身*不能感知多线程。

如果有的话，Apache 可能是多线程的，但这与 Magento 编程无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T13:15:56.680

看起来是这样。从www.magentocommerce.com 上的[这个线程](http://www.magentocommerce.com/boards/v/viewthread/237287/)：

**问题：**

> 什么是硬件的最佳配置

**回答：**

> MySQL 有 4 个 CPU 和大量内存 (16gb) 前端至少 8 个 CPU 的多线程，大量内存

**最初提出的问题是：**

> 我们正在建立一个 Magento 网站，该网站将容纳 20000 种独特的产品，并且平均有 40000 名独特的用户访问该网站。我们希望确保这是一个高可用性站点并且有几个问题。

1.  我们应该独立运行 MYSQL 还是集群运行
2.  单个 Apache 服务器还是集群中的多个盒子？
3.  什么是硬件的最佳配置
4.  分离 WWW 服务器和 DB 服务器？
5.  将图像分离到另一台服务器上？
6.  我们应该分配多少 RAM、CPU、HDD？
7.  如果服务器/线路在交易过程中出现故障，我们转移到 DR 服务器，我们如何跟踪付款/交易？

# javascript - Ember.js 数据 - 基本适配器未实现 findAll 方法？

> ID：15729653
> 
> 赞同：2
> 
> 时间：2013-03-31T13:06:20.043
> 
> 标签：javascript, ember.js, ember-data

使用基本适配器

```
App.Store = DS.Store.extend({
    revision: 12,
    adapter: 'DS.BasicAdapter'
}); 
```

我有：

> '未捕获的适配器为空或未实现`findAll`方法'。

并且确实没有`findAll`方法`basicAdapter`（我确实确保适配器不为空）。我正在使用所有最新版本的 ember 和 ember 数据（从 ember 的 master 构建，从 emberjs 的 master 和 basic-adapter 分支构建）。

这还没有实现还是我错过了什么？由于我是从 ember 开始的，所以我不太有信心提交拉取请求，抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T05:49:40.153

你需要`sync`对象。例如：

```
App.Post = DS.Model.extend({
        author: DS.attr('string'),
        read: DS.attr('boolen')
    });

    App.Post.sync = {
        query: function (id, process) {
            console.log('find query for Post', arguments);

            $.getJSON('/path/to/API/').then(function (posts) {
                process(posts.map(function (post) {
                    return {
                        author: post.author,
                        read: post.is_read
                    };
                })).load();

                console.log('got posts', posts);
            });
        }
    }; 
```

然后将模型与路由关联：

```
 App.PostRoute = Ember.Route.extend({
    model: function () {
        console.log('Post route');

        return App.Post.find({});
    }
}); 
```

在您的应用程序中访问`post`路线后，您应该会很好。`{}`在`find()`很重要。

# javascript - Google Maps InfoWindow [显示错误]

> ID：15729654
> 
> 赞同：0
> 
> 时间：2013-03-31T13:06:39.047
> 
> 标签：javascript, google-maps-api-3

请看我的代码。问题出在哪里？当我调用此函数时，坐标现在可以正常工作（行不工作）并且信息窗口也不能工作。

因此，当删除`function binfowindow`一切正常但信息窗口仅显示最后数据时..

更新！不是结果！

```
 function getline() {

       var mpenc = new google.maps.InfoWindow();   
downloadUrl("line.php", function(doc) {

        var g = google.maps;

        var xmlDoc = xmlParse(doc);

        bounds = new google.maps.LatLngBounds();
        var markers = xmlDoc.documentElement.getElementsByTagName("marker");
      // ========= Now process the polylines ===========
      var lines = xmlDoc.documentElement.getElementsByTagName("line");

      // read each line
      for (var a = 0; a < lines.length; a++) {
        // get any line attributes
       var colour = lines[a].getAttribute("colour");
        var width  = parseFloat(lines[a].getAttribute("width"));
        var diameter = lines[a].getAttribute("diameter");
        var project = lines[a].getAttribute("projectid");
        var contract = lines[a].getAttribute("contract");
        var comp = lines[a].getAttribute("complated");
        var id = lines[a].getAttribute("id_line");
        var html = "men ?" + id + " I: ";
        // read each point on that line
        var points = lines[a].getElementsByTagName("point");
        var pts = [];
        var length = 0;
        var point = null;
        for (var i = 0; i < points.length; i++) {
           pts[i] = new g.LatLng(parseFloat(points[i].getAttribute("lng")),
                                parseFloat(points[i].getAttribute("lat")));
           if (i > 0) {
             length += pts[i-1].distanceFrom(pts[i]);
             if (isNaN(length)) { alert("["+i+"] length="+length+" segment="+pts[i-1].distanceFrom(pts[i])) };
           }
           bounds.extend(pts[i]);
           point = pts[parseInt(i/2)];
        }
        // length *= 0.000621371192; // miles/meter 

  if (comp < 1) { 
 colorr = '#FA0505' }

 if (comp > 0 && comp < 25 ) { 
 colorr = '#FFA640' }

 if (comp > 24 && comp < 50) { 
 colorr = '#FFFD91' }

 if (comp > 49 && comp < 75) { 
 colorr = '#E8E400' }

 if (comp > 74 && comp < 100) { 
 colorr = '#BFFFAD' }

 if (comp == 100) { 
 colorr = '#0F8500' }

        var poly = new g.Polyline({
                          map:map,
                          path:pts,
                          strokeColor:colorr,
                          strokeWeight:width,
                          clickable: true
                          });

google.maps.event.addListener(poly,'mouseover', function() {

        this.setOptions({strokeColor: '#690469' });
           this.setOptions({strokeOpacity: 1.0 });
           this.setOptions({strokeWeight: 4 });

  });

     google.maps.event.addListener(poly,'mouseout', function() {

        this.setOptions({strokeColor: colorr });
           this.setOptions({strokeOpacity: 1.0 });
           this.setOptions({strokeWeight: 4 });
  });

    var funcs = [];

function createfunc(i) {
    return function() { 

  google.maps.event.addListener(poly,'click', function(event) {
    mpenc.setContent(html +i);
    mpenc.setPosition(event.latLng);
    mpenc.open(map);
  });

    };
}

for (var i = 0; i < lines.length; i++) {
    funcs[i] = createfunc(i);
}

for (var j = 0; j < lines.length; j++) {
    funcs[j]();                        // and now let's run each one to see
}  

      }
      map.fitBounds(bounds);

    });

} 
```

# algorithm - 将复杂度指定为 O(fibonacci(n)) 是否有意义？

> ID：15729656
> 
> 赞同：2
> 
> 时间：2013-03-31T13:06:47.687
> 
> 标签：algorithm, complexity-theory

假设您有一个算法，它首先处理 N 个元素，然后是 N 的一半，然后是 N 的四分之一，依此类推。将这种算法的运行时间描述为 O(fibonacci(n)) 而不是 O(n log n) 是否有意义？我想使用斐波那契函数，因为它看起来更具体，另一方面 - 这听起来有争议。

编辑：

抱歉，这似乎是一个有趣的问题，但答案让我意识到我需要一些完全不同的东西:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T13:16:11.983

虽然使用`O(nlogn)`和`O(fibonacci(n))`在数学上都是正确的 - 因为大 O 表示法只提供渐近上限 - 这个界限不会很紧。

假设您处理的每个元素的`O(1)`复杂**性实际上是函数的复杂性`Theta(n)`**，因为您实际上有：

```
n + n/2 + n/4 + ... + 1 <= 2n 
```

上面是正确的，因为你实际上有一个[**几何级数**](http://en.wikipedia.org/wiki/Geometric_series)，`q=1/2`并且`n->infinity`你得到了 的总和`2n`。

* * *

请注意，由于大 O 表示集合，则if`O(n)`是*子集*`O(nlogn)`，并且两者都是`O(fibonacci(n))`-的子集，**因此`O(n)`是在这种情况下使用的最有用和最具体的符号。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T13:17:31.523

N + 1/2 N + 1/4 N + 1/8 N + .... 大约 2 N :) 所以如果处理一个项目是 O(1)，复杂度仍然是 O(N)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T13:16:17.233

只要其他人知道你的意思，你就可以写任何你想写的东西。

也就是说，与 相比，它的写作要少得多，因为没有多少人`O(n logn)`会`O(fibonacci(n))`知道您使用第二种表示法的意思。

此外，fibonacci(n) 可以很容易地被认为是指斐波那契序列的第 n 个元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T14:05:16.270

**不，它不会。**[计算机科学中大 O 表示法](http://en.wikipedia.org/wiki/Big_O_notation) 的全部意义在于提供算法成本的渐近限制，但有些草率。因此，例如，我们忽略了几乎每次使用`O(x)`. 类似地，我们假设在分析中建模的每个操作都是等价的，除了在罕见的、特定的情况下（*例如*，在某些密码计算中使用的任意精度算术）。 **我们的目标不是精确，而是一种易于理解的共同理解。**

# wordpress - Wordpress 安装未完成

> ID：15729658
> 
> 赞同：0
> 
> 时间：2013-03-31T13:07:08.187
> 
> 标签：wordpress

我正在尝试在本地机器上安装 wordpress，我正在使用 wamp 服务器，当我尝试安装 wordpress 时，在“所需信息”屏幕后我看不到完整安装，它在此链接上停止

```
http://localhost/wp/wp-admin/install.php?step=2 
```

在数据库中创建了 11 个表。

谁能帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T15:22:40.270

由于您没有提供太多信息究竟是什么问题，也许[这篇文章](http://www.wpwebhost.com/install-wordpress-on-wampserver/) 可能会对您有所帮助。

这是关于如何在 WampServer 上安装 WordPress 的分步教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-05T16:43:18.363

我有一个类似的问题，解决我的问题的方法是在 php.ini 中为**max_execution_time设置****90**而不是 30 ，例如：

 **> max_execution_time = 90**

# git - 如何以更快的方式添加要提交的文件？

> ID：15729661
> 
> 赞同：13
> 
> 时间：2013-03-31T13:07:32.810
> 
> 标签：git

例如，这是我本地存储库中分支的状态：

```
14:56:15 /srv/www/gamersmafia/current[max-decisiones]$ git status
# On branch max-decisiones
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#       modified:   app/controllers/respuestas_controller.rb
#       modified:   app/helpers/application_helper.rb
#       modified:   app/models/decision.rb
#       modified:   app/models/gm_portal.rb
#       modified:   app/models/term.rb
#       modified:   app/views/respuestas/index.html.erb
#
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#       app/assets/stylesheets/old/sprites/games_sprites.css
# 
```

如果我想添加文件来提交它们，我必须**写入文件的路径，或者**在写入后选择并粘贴`git add`。

有没有更快的方法来使用 git 选择要添加、结帐等的文件？例如，**如果我只想为 commit 添加 2 个文件**？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-31T13:15:24.213

您可以添加它们（也是新创建的文件）：

```
git add -A . 
```

然后提交。如果您只想添加其中一些，您可以使用 add 交互方式：

```
git add -i 
```

`git`将询问您要添加哪些文件。如果您使用的是 linux 或 mac，您可以在 shell 中创建一个别名，以使命令更短，甚至更快。

另一种解决方案是为您的编辑器/IDE 使用包装器。您可以找到几乎所有开发工具（从 eclipse 到 VIM）的包装器。这个包装器通常让您快速执行一些操作，就像您编辑的文件`add`一样。[您可以在git wiki](https://git.wiki.kernel.org/index.php/Interfaces,_frontends,_and_tools)`commit`中归档完整列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T13:14:02.520

添加所有内容，包括跟踪和未跟踪的文件。添加后添加一个点。例如：

```
git add . 
```

如果您只想提交已跟踪的文件而不添加新文件，则可以使用“-a”标志进行 git commit。像：

```
git commit -a 
```

# firebase - Firebase auth() 成功，但我检查登录状态的安全规则仍然失败

> ID：15729667
> 
> 赞同：0
> 
> 时间：2013-03-31T13:08:11.490
> 
> 标签：firebase

当我使用 时`".read": "auth != null"`，在无错误完成`ref.on()`后引发权限`ref.auth()`错误。只要用户登录，授予读取权限的正确方法是什么？

安全规则：

```
{
  "rules": { 
    ".read": "auth != null",
    ".write": "auth.admin == true"
  }
} 
```

这是在我对其执行“on()”之前返回给我 Firebase ref 的代码：

```
 ref: function(path) { var self = this;
      var ref = new Firebase(self.url + path);
      ref.auth(self.auth_token, function(err) {
        if (err && console) console.log("Firebase "+path+" login failed!");
        else if (console) console.log("Firebase "+path+" login succeeded.");
      });
      return ref;
    },
    bind: function(path, excludes) { var self = this;
      var collection = [];
      var ref = self.ref(path);
      ...
      var move_callback = function(data, prevId) { 
        $timeout(function() { moveItem(data, prevId); }); 
      }
      ref.on('child_added', move_callback);
      ref.on('child_changed', move_callback);
      ref.on('child_moved', move_callback);
      ref.on('child_removed', function(data) {
        $timeout(function() { removeItem(data); });
      });
      return collection;
    }, 
```

主控制器：

```
$scope.list = $$firebase.bind("/data", []); 
```

控制台说

```
Firebase /data login succeeded. app.js:298
FIREBASE WARNING: on() or once() for /data failed: permission_denied firebase.js:33 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T19:29:15.237

从您的代码中我不清楚您在身份验证完成后返回参考。具体来说：

```
ref: function(path) {
  var self = this;
  var ref = new Firebase(self.url + path);
  ref.auth(self.auth_token, function(err) {
    if (err && console) console.log("Firebase "+path+" login failed!");
    else if (console) console.log("Firebase "+path+" login succeeded.");
  });
  return ref;
} 
```

立即返回引用。auth 的回调是异步的，因此如果您在调用回调之前使用您的 ref，您的会话将未经身份验证。

看起来您正在使用 Angular，所以我制作了一个小示例，它使用与您相同的安全规则正常工作：[https ://gist.github.com/anantn/5304404](https://gist.github.com/anantn/5304404)

如果我要重写你的代码，我会这样做：

```
bind: function(path) {
  var ref = new Firebase(self.url + path);
  var d = self._q.defer(); // Assign $q to this._q in constructor.
  ref.auth(self.auth_token, function(err) {
    if (!err) {
      ref.once("value", function(snap) {
        d.resolve(snap.val());
      });
    }
  });
  return d.promise;
}
...
// In the controller:
$scope.list = $$firebase.bind("/data"); 
```

我强烈建议通过 $q 模块使用 Promise，以确保您在身份验证完成之前不使用 Firebase 引用。更好的解决方案是使用 Angular 的官方 Firebase 绑定，它已经为您处理了所有这些：[https ://github.com/firebase/angularFire](https://github.com/firebase/angularFire)

希望这可以帮助！

# html - HTML/CSS3 翻转图像

> ID：15729670
> 
> 赞同：0
> 
> 时间：2013-03-31T13:08:15.680
> 
> 标签：html, css, css-transitions, flip

试图获得像这里显示的第一个框一样的翻转效果[http://css3playground.com/flip-card.php](http://css3playground.com/flip-card.php)

虽然 atm 我得到的只是以下内容，当悬停在上面时只会闪烁一种阴影![盒子](https://i.stack.imgur.com/VXHAL.png)

这是我使用的代码...

HTML：

```
<div id="f1_container">
<div id="f1_card" class="shadow">
  <div class="front face">
    <img src="images/eventbox.png"/>
  </div>
  <div class="back face center">
    <p>This is nice for exposing more information about an image.</p>
    <p>Any content can go here.</p>
  </div>
</div>
</div> 
```

和CSS：

```
#f1_container {
  position: relative;
  margin: 10px auto;
  width: 350px;
  height: 250px;
  z-index: 1;
}
#f1_container {
  perspective: 1000;
}
#f1_card {
  width: 100%;
  height: 100%;
  transform-style: preserve-3d;
  transition: all 1.0s linear;
}
#f1_container:hover #f1_card {
  transform: rotateY(180deg);
  box-shadow: -5px 5px 5px #aaa;
}
.face {
  position: absolute;
  width: 100%;
  height: 100%;
  backface-visibility: hidden;
}
.face.back {
  display: block;
  transform: rotateY(180deg);
  box-sizing: border-box;
  padding: 10px;
  color: white;
  text-align: center;
  background-color: #aaa;
} 
```

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T13:15:54.563

你的意思是这样的。以您喜欢的方式进行调整。

```
#f1_container {
  position: relative;
  margin: 10px auto;
  width: 350px;
  height: 250px;
  z-index: 1;
  -webkit-transition: all 0.5s ease;
 -moz-transition: all 0.5s ease;
   -o-transition: all 0.5s ease;
  -ms-transition: all 0.5s ease;
      transition: all 0.5s ease;
}

#f1_container:hover {
  perspective: 1000;
  transform: matrix(1.0, 2.0, 3.0, 4.0, 5.0, 6.0);
border-radius: 50%;
-webkit-transform: rotate(360deg);
 -moz-transform: rotate(360deg);
   -o-transform: rotate(360deg);
  -ms-transform: rotate(360deg);
      transform: rotate(360deg);          
} 
```

# php - PHP：使用 mysqli 查询检查行是否存在

> ID：15729674
> 
> 赞同：0
> 
> 时间：2013-03-31T13:08:39.230
> 
> 标签：php, mysqli

我有这两个函数用于创建用户。第一个函数用于插入/创建用户和其他函数用于检查用户是否/存在于`MySql`数据库中。但是当我发送数据时，我看到 die() 的空白页；（如果用户存在或用户不存在）如何解决这个错误？以及如何在红色框中打印错误列表，即：

```
- this user not activate 

- email is empty 

- .... 
```

我的课：

```
public function createUser($email, $password, $salt, $verification) {

if($this->checkUserFound($email) != true ){die();}

    $query = "INSERT INTO tbUsers (email, password, user_salt, is_verified, is_active, is_admin, verification_code) "
    . "VALUES (?, ?, ?, ?, ?, ?, ?)";

    $stmt = $this->_db->prepare($query);

    $ver = 0;
    $act = 1;
    $adm = 0;

    $stmt->bind_param("sssiiis", $email, $password, $salt, $ver, $act, $adm, $verification);

    if ($stmt->execute()) {
        return true;
    }

    return false;
}

public function checkUserFound($email) {
    $query = "SELECT email FROM tbUsers where email = ?";

    $stmt = $this->_db->prepare($query);

    $stmt->bind_param("s", $email);

    if ($stmt->execute()) {

        $stmt->bind_result($email);

        //fetch first row of results
        $stmt->fetch();
        return false;
    }

    return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T13:28:54.350

这总是会返回`FALSE`（假设查询成功执行）：

```
if ($stmt->execute()) {

    $stmt->bind_result($email);

    //fetch first row of results
    $stmt->fetch();
    return false;
} 
```

您想将其更改为：

```
if ($stmt->execute()) {

    $stmt->store_result();

    return 0 == $stmt->num_rows ? FALSE : TRUE;

} 
```

然后，如果找到用户，它将返回`TRUE`；如果不是 if 将返回`FALSE`。

另外，我认为拥有这个更有意义（语义上）：

```
if($this->checkUserFound($email)){die();} 
```

...因为如果找到用户，您希望它返回`TRUE`（并结束脚本，因为您不想插入重复项）。/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T13:28:10.207

```
if ($stmt->execute()) {

        $stmt->bind_result($email);

        //fetch first row of results
        $stmt->fetch();
        return true;
    }

    return false; 
```

# asp.net - 为什么 ASP.NET TextBox.Text 只返回 250 个字符？

> ID：15729677
> 
> 赞同：1
> 
> 时间：2013-03-31T13:09:15.273
> 
> 标签：asp.net

在我的 asp.net 表单页面中，我有一个这样的 TextBox 控件

```
<asp:TextBox ID="txtQuestion" runat="server" MaxLength="1000" TextMode="MultiLine" Width="99%" Height="50px"></asp:TextBox> 
```

当我输入一个长句子（250 多个字符）并在页面后面的代码中提交表单时，当我使用它时，我只得到 250 个字符

```
txtQuestion.Text 
```

但是，当我使用这个

```
Request[txtQuestion.UniqueID] 
```

我明白了整个句子。

我似乎无法弄清楚为什么会这样。有谁可以帮我离开这里吗？

## 编辑

我通过执行以下操作尝试了**Ramesh Rajendran提出的建议 -**

```
<asp:TextBox ID="txtQuestion" runat="server" Rows="50" CssClass="queCss" TextMode="MultiLine"></asp:TextBox> 
```

Css 类定义如下 -

```
.queCss
{
    width:99%;
    height:50px;
} 
```

我还想提一下，我正在使用 JQuery AJAX 和页面方法来填充某些 ListBox 上的数据。所以我已经设置`EnableEventValidation`为`false`. 我还使用 JQuery 来填充一些动态文本框，这些文本框的值是在 PostBack 之后使用请求对象读取的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T13:50:58.923

仅用于验证文本框字符的最大长度。

您可以 在文本框中使用`TextMode="MultiLine"`和`Rows="50"`

请使用下面的文本框而不是您的文本框

```
<asp:TextBox ID="txtQuestion" runat="server" Rows="50" TextMode="MultiLine" Width="100%"></asp:TextBox> 
```

**编辑**

删除此行

```
Request[txtQuestion.UniqueID] 
```

然后检查它

# php - 将文本从 label.text 更新到服务器并将其保存在文本文件中

> ID：15729678
> 
> 赞同：1
> 
> 时间：2013-03-31T13:09:25.043
> 
> 标签：php, objective-c, xcode, http-method

我正在尝试在服务器上的文本文件中将 label.text 上传到服务器上，这是我的代码。它没有显示任何错误，但在服务器上创建了文件，但其中没有文本。请帮忙。

```
NSString *post =[[NSString alloc] initWithFormat:@"VIN: %@",vincode.text];
        NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding
                              allowLossyConversion:NO];
        NSString *postLength = [NSString stringWithFormat:@"%d", [postData
                                                                  length]];
        NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init]
                                        autorelease];
        [request setURL:[NSURL URLWithString:@"Server Detail Here/upload_vin.php"]]; 
        [request setHTTPMethod:@"POST"];
        [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
        [request setValue:@"application/x-www-form-urlencoded"
       forHTTPHeaderField:@"Content-Type"];
        [request setHTTPBody:postData];
        NSData *urlData = [NSURLConnection sendSynchronousRequest:request
                                                returningResponse:nil error:nil];
        NSLog(@"Succeeded! Received %d bytes of data",[urlData length]);
        NSLog(@"VIN is %@",vincode.text);
        NSString *outputdata = [[NSString alloc] initWithData:urlData
                                                     encoding:NSASCIIStringEncoding];
        NSLog(@"Outputdata is %@",outputdata);
        NSURLResponse *response;
        NSError *error;
        [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];
        if(error==nil)
            NSLog(@"Error is nil");
        else
            NSLog(@"Error is not nil");
        NSLog(@"success!");
PHP file::::::::::::::
    <?php
    $file = "VinCodes.txt";
    #$submitted_vincode = $_GET['VIN'] . " \n";
    $submitted_vincode = @$_POST['VIN'] . " \n";
    if(!empty($submitted_vincode)){
    $Handle = fopen($file, 'a');
        fwrite($Handle, $submitted_vincode); 
        print "Vin Code stored in file."; 
        fclose($Handle);
    }else{
        print "Vin code is missing. Try again";
    }
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T15:33:18.150

很多代码，这就是我所做的，（注意我上传异步）：

```
NSURL *url = [NSURL URLWithString: @"http://..."];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
[request setHTTPMethod:@"POST"];
[request setHTTPBody:data];
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
[NSURLConnection sendAsynchronousRequest:request ... 
```

顺便说一句，你确定你想要`NSASCIIStringEncoding`而不是`NSUTF8StringEncoding`？

如有疑问，我会使用[Charles](http://www.charlesproxy.com) Web Proxy（免费 30 天）来查看发送的确切内容和响应。

# java - spring + hibernate：最后手动提交事务

> ID：15729679
> 
> 赞同：0
> 
> 时间：2013-03-31T13:09:33.387
> 
> 标签：java, spring, hibernate, autocommit

我正在使用 spring mvc 和休眠

```
@Controller
public class COACategoriesController {

protected static Logger log = Logger.getLogger(COACategoriesController.class);

@Resource(name="COACategoriesService")
private COACategoriesService obj_coacs;
@Resource(name="COAMaintenanceService")
private COAMaintenanceService obj_coams;

 @RequestMapping(value = "/addCoaCategory", method = RequestMethod.POST)
 public String addCoaCategory(@RequestParam("conCatName") String coaCatName, Model model) {

     Date sysdate = null;
     String Message="";
     try{

     sysdate = new Date();

     COACategoriesModel model1 = new COACategoriesModel( coaCatName, 1, "", sysdate , 0);

     COAMaintenanceModel account =  new COAMaintenanceModel();
        account.setDiscription("Test Description");
        account.setCategoryId(model1);

        Message="Fail-First";
        obj_coacs.AddCOACategories(model1);

        Message="Fail-Second";
        obj_coams.AddCOAMaintenance (account);

        Message="Add Successfully";
     }catch(Exception ex){
         log.error("Exception.."+ex);
         model.addAttribute("success", Message);
     }

        return "fin/category";
    }

} 
```

当所有事务成功保存时，我如何手动提交事务，如果任何事务插入失败，则回滚 catch 块中的所有事务。?

我正在使用 spring mvc 和休眠

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T13:28:18.893

我宁愿在某些服务中创建一个单独的方法（结合您的 2 种方法）来处理那里的所有必要事务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T13:33:43.563

首先`connection.autocommit`需要将属性设置为`false`，以启用事务级提交。

这可以通过添加来完成

```
<property name="connection.autocommit">false</property> 
```

在`hibernate.cfg.xml`

其次，在您的 DAO 级别使用以下类型的代码

```
Session s = null;
Transaction t = null;
try {
  s = getSessionFactory().openSession();
  t = s.beginTransaction();
  // code to persist the object

}
catch(HibernateException he) {
  if(t != null) {
     t.rollback();
  }
}
finally {
  if(s != null) {
    s.close();
  }
} 
```

# ruby-on-rails - Nested_for_form 不显示 field_for 的字段

> ID：15729681
> 
> 赞同：0
> 
> 时间：2013-03-31T13:09:35.320
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我的观点是

```
<h3> Register New Items </h3>
<div class="row">
<div class="span2 offset4">
<%= nested_form_for @item_categories, :url => items_path, :method => :post, :html => { :class => "item_category"} do |f| %>
        <div><%= f.label :item_name %>
        <%= f.text_field :item_name %></div>
        </br>
         <% f.fields_for :item_companies do |c| %>
              <%= c.text_field :company_name %></div>
         <%end%>
        <div><%= f.submit "Submit" %></div>
    <% end %>
</div> 
```

控制器是

```
@item_categories = ItemCategory.new
  3.times do
    item_company = @item_categories.item_companies.build
    4.times { item_company.item_weights.build }
 end 
```

和模型是：

```
class ItemCategory < ActiveRecord::Base
  attr_accessible :item_name
  has_many :item_weights
  has_many :item_companies#, :through=> :item_weights
  accepts_nested_attributes_for :item_companies
end

class ItemCompany < ActiveRecord::Base
  attr_accessible :company_name, :item_category_id

  has_many :item_weights
  has_many :item_categories#, :through=> :item_weights
end

class ItemWeight < ActiveRecord::Base
  attr_accessible :item_category_id, :item_company_id, :weight
  belongs_to :item_company
  belongs_to :item_category
end 
```

但是我的视图没有显示`c.text_field :company_name`在视图中。请帮助我哪里错了并纠正他们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T13:43:48.233

代替

```
<% f.fields_for :item_companies do |c| %> 
```

经过

```
<%= f.fields_for :item_companies do |c| %> 
```

# c++ - 'a'中成员'rowCount'的Qt错误请求，它是非类类型'QTableWidget *'

> ID：15729685
> 
> 赞同：0
> 
> 时间：2013-03-31T13:10:02.633
> 
> 标签：c++, qt, qtablewidget

代码 ：

```
void MainWindow::add_test(QTableWidget* &a, QTableWidgetItem* &i1, QTableWidgetItem* &i2){

    int row = a.rowCount();
    a.setItem(row,0,i1);
    a.setItem(row,1,i2);
} 
```

现在我得到这些错误：

*   错误：请求“a”中的成员“rowCount”，它是非类类型“QTableWidget *”
*   错误：在“a”中请求成员“setItem”，它是非类类型“QTableWidget *”
*   错误：在“a”中请求成员“setItem”，它是非类类型“QTableWidget *”

我究竟做错了什么？我只想在列表中插入 2 个项目（使用函数）。

*编辑：对于那些想知道它不会将单个项目添加到列表中的人，我忘记在此函数中插入一行。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T13:10:33.003

`a`是对*指针*( `QTableWidget*`) 的引用，因此您应该使用箭头 ( `operator ->`) 而不是点 ( `operator .`) 来访问指向对象的成员：

```
int row = a->rowCount();
a->setItem(row,0,i1);
a->setItem(row,1,i2); 
```

# asp.net - 使用 asp_regsql 工具创建会员数据库

> ID：15729686
> 
> 赞同：1
> 
> 时间：2013-03-31T13:10:09.403
> 
> 标签：asp.net, asp.net-membership, aspnetdb

我已经使用 asp_regsql 工具而不是现有数据库上的默认向导创建了一个成员数据库。原因是我在某处读到默认创建的 ASPNETDB.mdf 碰巧更大（大约 10 mb），如果您使用其他工具创建它会小得多。出于某种原因，这是真的。所有表都像在 ASPNETDB 中一样创建，但数据库大约 3 mb。

所以我的第一个问题是为什么它更小？

我的第二个问题是，如何使用管理工具将用户添加到数据库中？它仍在将它们添加到默认的 ASPNETDB。

谢谢。

*更新*

好的，我想出了第二个问题。您需要更改 web.config 中的默认提供程序。 [http://eashi.wordpress.com/2009/01/26/default-aspnet-membership-provider-on-different-database/](http://eashi.wordpress.com/2009/01/26/default-aspnet-membership-provider-on-different-database/)

但我想知道我的第一个问题的答案，如果有人知道的话。

# android - 如何估计给定点之间的距离？

> ID：15729688
> 
> 赞同：2
> 
> 时间：2013-03-31T13:10:27.940
> 
> 标签：android, augmented-reality, projection-matrix, perspectivecamera

我的值 P1,P2,P3,P4 带有屏幕点 (x,y) 和经度、纬度。除此之外，我还有一个摄像头（带纬度、经度）、摄像头的高度（1.6m（常数））和摄像头的方向（轴承、俯仰、滚动）。我也有相机的水平视角和垂直视角:)

现在我想计算 PX(lat,long) 在我的显示器上的估计位置（如果它可见）。 ![跟随问题](https://i.stack.imgur.com/DDZKK.png)

对于给定的 PX(lat,long)，如何获得 P(?,?)？（图中的紫色点）这似乎是可能的，因为我知道我的相机的角度并且我有所有四个顶点。但我不知道如何解决这个问题。

我需要一个基于这四个顶点的函数，它可以将 (lat,long) 转换为 (screenX, screenY)。

我有一个公式，可以将 (screenX, screenY) 转换为 (lat,long)，但我无法反转这个公式。因此，如果需要除顶点之外的其他点，我可以计算它们（但我不能简单地对屏幕中的每个像素使用这个公式......那将是每 100 毫秒一百万次方法调用......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T10:29:23.700

因此，我可能在您的其他线程的评论中回答了这个问题，但最简单的方法是：忽略屏幕边缘的 GPS 坐标 - 通常将所有内容转换为您的相机为原点的坐标空间，并确定其他物体的位置是使用一种在短距离上条件良好的方法获得 GPS 坐标之间的相对距离，例如 Haversine 公式

获取投影中心和要显示的对象之间的相对方位角。

您可以确定轴的视角。您可以确定虚拟对象与投影中心（相机指向的方向）在两个轴上的相对方位。你知道你的屏幕分辨率。

如果 Alpha 是您的视角的一半（对于给定的角度），而 Beta 是您的投影中心和您想要在屏幕上找到的对象之间的相对方位角，那么屏幕上的点大约由下式给出

tan(beta) / tan(alpha) *（该轴上半个屏幕的像素数）

显然，您需要添加逻辑来捕捉屏幕外的投影，无论是投影中心的左侧还是右侧，以及您身后是否有东西（投影本身不考虑 z 距离）。

# django - django 查询 manytomany 字段

> ID：15729694
> 
> 赞同：1
> 
> 时间：2013-03-31T13:10:49.637
> 
> 标签：django, django-models, tastypie

我正在使用tastepie 为我的django 应用程序获取REST API。我的模型包括车站（例如火车站）、路线（例如芝加哥到圣路易斯）和 routedetail，它是多对多关系的中间模型，例如 RouteDetail(station="Springfield-IL", route="CHI-STL "，到达时间=下午 4 点，出发时间=下午 4 点 05 分）

```
class Station(models.Model):
  name = models.CharField(max_length=10, unique=True)

class Route(models.Model):
  name = models.CharField(max_length=10, unique=True)
  stations = models.ManyToManyField(Station, through='RouteDetail')

class RouteDetail(models.Model):
  station = models.ForeignKey(Station)
  route = models.ForeignKey(Route)
  arrival_time = models.TimeField(blank=True, null=True)
  depart_time = models.TimeField(blank=True, null=True) 
```

我的问题是如何查询从伊利诺伊州林肯到密苏里州圣路易斯的所有路线？现在我在tastepie中做了这样的事情，这很有效，但是有没有办法在一个查询中做到这一点？

```
from_station = request.GET.get('from', None)
to_station = request.GET.get('to', None)
semi_filtered = super(RouteResource, self).apply_filters(request, applicable_filters)
return semi_filtered.filter(stations__name=from_station).filter(stations__name=to_station) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T14:10:08.180

你的模型如何表达从 A 到 B 的路线的存在？在我看来，它似乎没有包含足够的信息来分辨。

我能看到如何执行的最接近的查询是询问是否存在路线 R，使得 A 站在 R 路线上，B 站在 R 路线上，并且 A 站的出发时间在 B 站的到达时间之前。

在 SQL 中，这将是：

```
SELECT * FROM myapp_route R
 JOIN myapp_routedetail A ON A.station_id = from_station AND A.route_id = R.id
 JOIN myapp_routedetail B ON B.station_id = to_station AND B.route_id = R.id
 WHERE A.depart_time < B.arrival_time; 
```

据我所知，没有办法在 Django 的 ORM 中表达此查询，但您始终可以发出[原始 SQL 查询](https://docs.djangoproject.com/en/dev/topics/db/sql/)：

```
Route.objects.raw('''
    SELECT * FROM myapp_route R
     JOIN myapp_routedetail A ON A.station_id = %s AND A.route_id = R.id
     JOIN myapp_routedetail B ON B.station_id = %s AND B.route_id = R.id
     WHERE A.depart_time < B.arrival_time
     ''', [from_station.id, to_station.id]) 
```

但请注意：该条件`A.depart_time < B.arrival_time`不适用于在午夜之前开始并在午夜之后结束的路线。

# ruby-on-rails - rails嵌套表单link_to_add错误

> ID：15729698
> 
> 赞同：0
> 
> 时间：2013-03-31T13:11:30.540
> 
> 标签：ruby-on-rails, nested-forms

我正在生成一个嵌套表单，我想在其中添加nested_forms 的“link_to_add”选项：

```
<%= nested_form_for(@practice) do |f| %>
  <%= f.fields_for :uebung_maps do |map| %>
    <%= map.hidden_field :role_id, :id => "role_id_#{@runs}"  %>
    <%= map.hidden_field :vehicle_id, :id => "vehicle_id_#{@runs}"  %>
  <% end %>
  <%= nested.link_to_add '+', :uebung_maps %>
<% end %> 
```

现在如果我刷新页面，会出现以下错误：

```
Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id 
```

我正在使用 0.3.1 版的nested_forms gem 来构建表单。这里有什么问题？
我应该在这里提供哪些其他信息？

提前致谢！

# java - 如何使用 Ebean 查询具有 onetomany 和 manytoone 关系的表

> ID：15729699
> 
> 赞同：5
> 
> 时间：2013-03-31T13:11:35.430
> 
> 标签：java, orm, playframework, ebean

我正在使用 Play Framework 2.1.0 和 Ebean，在查询下列场景时遇到问题：

我有 3 个类代表数据库中的表。

```
class project {
   ...
   @OneToMany
   public SubProject sub;   
}

class SubProject {
   ...
   @ManyToOne
   public Project project;

   @OneToMany 
   public MiniProject mini;    
}   

class MiniProject {
  ...
  @ManyToOne
  public SubProject sub;    
} 
```

**使用 Ebean**，如何

*   检索项目列表的所有子项目？

*   检索一个项目的所有小项目？

*   给定子项目列表，如何检索所有小项目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-07T01:02:28.813

首先，您错误地定义了您的类。您的 @OneToMany 注释应该在元素列表上定义。我更正了这些映射，然后编写了检索所需查询的测试方法。这是代码：

项目类：

```
@Entity  
public class Project {

    @Id
    public Long id;

   @OneToMany(mappedBy="project")
   public List<SubProject> subprojects;
} 
```

子项目类：

```
@Entity 
public class SubProject {

    @Id
    public Long id;

    @ManyToOne
    public Project project;

    @OneToMany(mappedBy="subproject") 
    public List<MiniProject> miniprojects; 
} 
```

小项目类：

```
@Entity 
public class MiniProject {

    @Id
    public Long id;

    @ManyToOne
    public SubProject subproject;
} 
```

测试方法：

```
@Test
public void subTest () {
    FakeApplication app = Helpers.fakeApplication(Helpers.inMemoryDatabase());
    Helpers.start(app);

    Project p1 = new Project();
    p1.id=1L;

    SubProject s1 = new SubProject();
    SubProject s2 = new SubProject();
    s1.id=1L;
    s2.id=2L;

    p1.subprojects.add(s1);
    p1.subprojects.add(s2);
    s1.project = p1;
    s2.project = p1;

    MiniProject m1 = new MiniProject();
    MiniProject m2 = new MiniProject();
    MiniProject m3 = new MiniProject();
    MiniProject m4 = new MiniProject();

    m1.id=1L;
    m2.id=2L;
    m3.id=3L;
    m4.id=4L;

    s1.miniprojects.add(m1);
    s1.miniprojects.add(m2);
    s2.miniprojects.add(m3);
    s2.miniprojects.add(m4);

    m1.subproject =s1;
    m2.subproject =s1;
    m3.subproject =s2;
    m4.subproject =s2;

    Ebean.save(p1);
    Ebean.save(s1);
    Ebean.save(s2); 
    Ebean.save(m1);
    Ebean.save(m2);
    Ebean.save(m3);
    Ebean.save(m4);

    // retrieve all the subprojects of a list of Projects
    List<Long> projectIds = new ArrayList<Long>();
    projectIds.add(1L);     
    List<SubProject> subList = Ebean.createQuery(SubProject.class).where(Expr.in("project.id", projectIds)).findList();

    // retrieve all the miniprojects of a Project 
    Long projectId = 1L;
    List<MiniProject> miniList = Ebean.createQuery(MiniProject.class).where(Expr.eq("subproject.project.id", projectId)).findList();

    // given a list of sub projects , how to retrieve all the miniprojects
    List<Long> subprojectIds = new ArrayList<Long>();
    subprojectIds.add(1L);      
    List<MiniProject> miniSubList = Ebean.createQuery(MiniProject.class).where(Expr.in("subproject.id", subprojectIds)).findList();

    for(SubProject sub: subList) {
        System.out.println("subproject: "+sub.id);
    }
    System.out.println("-----------");
    for(MiniProject mini: miniList) {
        System.out.println("miniproject: "+mini.id);
    }
    System.out.println("-----------");
    for(MiniProject mini: miniSubList) {
        System.out.println("miniproject: "+mini.id);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:11:14.230

假设实体是固定的，并且实际上您的 OneToMany 关联具有 a`List<SubProject>`或 a `Set<SubProject>`（对于 MiniProject 也是如此）：

*检索项目列表的所有子项目？*

```
select s from Project p inner join p.subProjects s where p.id in :projectIds 
```

*检索一个项目的所有小项目？*

```
select m from Project p 
inner join p.subProjects s 
inner join s.miniProjects m
where p.id = :projectId 
```

*给定子项目列表，如何检索所有小项目。*

与第一个查询相同：

```
select m from SubProject s inner join s.miniProjects m where s.id in :subProjectIds 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T12:24:15.100

在你的类中定义助手

```
public static Finder<Long, YourClass> find = new Finder<Long, YourClass>(Long.class, YourClass.class); 
```

查询：

```
SubProject.find.where().in("project", listOfProject)
MiniProject.find.where().eq("sub.project",yourProject)
MiniProject.find.where().in("sub", listOfSubProject) 
```

# apache - Apache 忽略我的 .htaccess 文件

> ID：15729701
> 
> 赞同：0
> 
> 时间：2013-03-31T13:11:49.127
> 
> 标签：apache, .htaccess

Apache 完全忽略了我的 .htaccess 文件，无论我在那里写什么，它都不会读取它。

*   重写模式已启用
*   AllowOverride 设置为全部

虚拟主机：/etc/apache2/sites-enabled/example.com

```
<VirtualHost *:80>
    ServerAdmin webmaster@localhost
    ServerName example.com
    ServerAlias *.example.com
    DocumentRoot /var/www/example.com

    <Directory /var/www/example.com>
        Options Indexes FollowSymLinks MultiViews
        AllowOverride All
        Order allow,deny
        allow from all
    </Directory>

</VirtualHost> 
```

htaccess 文件：/var/www/example.com/.htaccess

```
RewriteEngine on
RewriteRule ^hjalp/$ /index.php?page=help 
```

所有与此相关的问题似乎总是可以通过启用 mod rewrite 或将 AllowOverride 更改为 All 而不是 None 来解决。但这对我没有任何作用，是的，我已经重新加载并重新启动了 apache。(Ubuntu 12.10 "Quantal Quetzal" Minimal x64, Apache/2.2.22)

我该如何解决这个问题？

编辑：我从来没有真正发现这背后的问题，但干净的重新安装（再次）解决了这些问题。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-31T14:35:31.410

尝试

```
RewriteEngine on
RewriteRule ^hjalp/$ index.php?page=help 
```

没有斜线它对我有用

# java - 异常：java.lang.ClassCastException：[B 不能转换为 java.io.ObjectStreamClass

> ID：15729703
> 
> 赞同：0
> 
> 时间：2013-03-31T13:12:05.400
> 
> 标签：java, classcastexception, objectinputstream

我制作了一个可以在系统之间安全传输文件的应用程序......一切正常......除了接收端。它显示了一个

```
Exception in thread "New Connection" java.lang.ClassCastException: [B cannot be cast to java.io.ObjectStreamClass
at java.io.ObjectInputStream.readClassDesc(Unknown Source)
at java.io.ObjectInputStream.readArray(Unknown Source)
at java.io.ObjectInputStream.readObject0(Unknown Source)
at java.io.ObjectInputStream.readArray(Unknown Source)
at java.io.ObjectInputStream.readObject0(Unknown Source)
at java.io.ObjectInputStream.readObject(Unknown Source)
at network.FileDownload.secureFileReceive(FileDownload.java:341)
at network.FileDownload.run(FileDownload.java:240)
at java.lang.Thread.run(Unknown Source) 
```

发生异常的客户端程序（FileDownload）行是

```
String bb = security.decrypt((int[][]) input1.readObject());
byte[] buf = bb.getBytes("ISO-8859-1"); 
```

线路的服务器端是

```
output1.writeObject( security.encrypt(new String(buf,"ISO-8859-1"))); 
```

在这里，安全类具有用于加密和解密的方法，其中`security.encrypt()`接受 String 并返回 int[][]。`security.decrypt`反之亦然。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T13:18:51.077

对我来说接缝，在服务器端`writeObject`，将你的`int[][]`演员转换为某种形式`object`以便它可以发送，然后你当然不能在客户端投射一个对象（`int[][]`）系统不知道如何做到这一点...

我希望这很清楚，您需要的是双方的对象序列化程序。

祝你好运 ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-02T06:01:36.597

检查您通过正文从服务器发送的内容。该正文包含无效字符。这就是你获得强制要求的原因。我在白天遇到了同样的问题，然后我解决了它，改变了消息正文。

# emacs - Emacs 预测模式和使用 TAB 循环

> ID：15729705
> 
> 赞同：2
> 
> 时间：2013-03-31T13:12:45.610
> 
> 标签：emacs, autocomplete

我正在尝试在 Emacs 中使用预测模式来自动完成 LaTeX 文档。按下 TAB 时，我希望它执行以下操作

*   如果只有一种可能，请完成单词。（这通常不会发生。单词的其余部分以蓝色突出显示，我必须按 [Ctrl]-Enter 才能完成。）

*   如果有很多替代品，请循环使用。（我不知道如何让它做到这一点。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-30T02:07:17.603

您需要检查有多少完成候选人，并相应地调用`completion-accept`或`completion-cycle`。

以下应该可以解决问题：

```
(defun completion-accept-or-cycle (&optional n)
  "Accept current completion if there's only one possible candidate.
Otherwise, cycle the completion candidates. A numerical prefix argument
N specifies the number of candidates to cycle forwards (or backwards if
N is negative)."
  (interactive)
  (let ((overlay (completion-ui-overlay-at-point)))
    (when overlay 
      (if (= (length (overlay-get overlay 'completions)) 1)
      (completion-accept)
    (completion-cycle n))))) 
```

现在将 TAB 绑定到.emacs 中键盘映射中的这个新`completion-accept-or-cycle`命令：`completion-overlay-map`

```
(define-key completion-overlay-map "\t" 'completion-accept-or-cycle) 
```

# javascript - Chrome 扩展内容脚本和 document.ready 事件

> ID：15729712
> 
> 赞同：1
> 
> 时间：2013-03-31T13:13:15.390
> 
> 标签：javascript, jquery, google-chrome, google-chrome-extension, document-ready

我的内容脚本定义为在每个页面上运行。
我在使用 Facebook 时遇到了问题：
假设我加载了“ [http://facebook.com](http://facebook.com) ”，我的内容脚本运行并且我可以告诉它，因为事件：$(document).ready() 被触发了。然后，我按下 facebook 内的链接（我的个人资料页面，或我所属的组），但内容脚本没有再次加载。

这很奇怪，因为 url 正在改变，所以内容脚本应该再次运行，不是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T14:01:43.540

不，因为页面内容是重新加载的，而不是整个页面。网址更改并不意味着该页面已重新加载。你应该听听 url 本身的变化。如果 URl 更改执行一些代码。

如果使用此方法更改选项卡的url，您可以监听

```
chrome.tabs.onUpdated.addListener(function(tabId, changeInfo, tab) {
  if (changeInfo.url != null) { // check this condition, I didn't remember what is returned if the url didn't change.
    // your code
  }
}); 
```

我希望这可以帮助你。

# ios - 在 iOS 中显示长文本选项的最佳方式？

> ID：15729715
> 
> 赞同：1
> 
> 时间：2013-03-31T13:13:35.290
> 
> 标签：ios, uipickerview

我正在制作一个应用程序，用户可以在其中选择几个不同的输入（非实际示例：汽车品牌、里程和颜色）。每个选择都有一些定义的值可供选择，每个值都是一两个句子长。我想知道展示它的最佳方式是什么。

选择器视图不能很好地工作，因为某些选项有两个句子长。我可以使用带有表格的模态视图或推送视图，但我不确定根据惯例最“正确”的方式是什么？假设我使用模态视图，当用户在表格中选择某些内容时自动关闭它是否违反任何约定？

编辑：为了让自己更清楚，下面是我正在谈论的层次结构的一个例子。

![例子](https://i.stack.imgur.com/iT1pz.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T18:39:51.620

您可以随时关闭当前的模态视图控制器。**没有“正确的方法”**可以做到这一点。当用户选择一个表格视图单元格时，您可以在 UITableViewDelegate 方法中关闭模式视图控制器：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

  [tableView deselectRowAtIndexPath:indexPath animated:YES];

  /* dismiss your modal view controller

   through the UIViewController method
   - (void)dismissViewControllerAnimated:(BOOL)flag completion:(void (^)(void))completion
   or through the UINavigationViewController method
   - (UIViewController *)popViewControllerAnimated:(BOOL)animated

   depending on the way you presented it in the first place. */

} 
```

表格视图是显示长文本选项**的最佳选择**。您可以通过 UITableViewDelegate 方法调整表格视图中每个单元格的高度：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
   return /*appropriate cell height in order to accommodate long text */;
} 
```

此外，如果您想计算**任何文本的高度**，您可以这样做：

```
// get the table view width
CGFloat tableViewWidth = [tableView bounds].size.width;

// get your piece of text
NSString *text = /*your text*/

CGFloat textHeight = [text sizeWithFont:[UIFont systemFontOfSize:18]/*or any font you want*/
                      forWidth:tableViewWidth 
                      lineBreakMode:NSLineBreakByWordWrapping].height; 
```

# java - 为什么这个枚举类型没有正确解析？

> ID：15729716
> 
> 赞同：0
> 
> 时间：2013-03-31T13:13:52.040
> 
> 标签：java, enums

以下 java 代码无法在 eclipse 中编译。我在这里做错了什么？如果该方法只返回一个`int`而不是一个，那么一切正常，`enum`所以它基本上设置好了。问题在于引入枚举返回类型。

```
public class myclass {
  public enum mytype {
      mytype2,
      mytype1,  
  };
  public static mytype retmytype() {
    return mytype2;
  }
}

//in another class
myclass.mytype t = myclass.retmytype(); //ERROR - myclass.mytype cannot be solved 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T13:16:43.577

尝试替换`return mytype2;`为`return mytype.mytype2;`

顺便说一句，您应该遵循 Java 命名约定；）

我认为您忘记了 main 方法（或程序流程中的任何其他调用方法）。尝试这个：

```
public class myclass {
  public enum mytype {
      mytype2,
      mytype1,  
  };
  public static mytype retmytype() {
    return mytype.mytype2;
  }
  public static void main(String[] args){
    myclass.mytype t = myclass.retmytype();
  }
} 
```

# linux-kernel - 创建简单的内核模块

> ID：15729717
> 
> 赞同：3
> 
> 时间：2013-03-30T12:40:01.950
> 
> 标签：linux-kernel, c

我刚刚开始学习 linux 内核模块并尝试编写简单的 Hello world 程序。

所以 mymod.c：

```
#include <linux/module.h>
#include <linux/kernel.h>

MODULE_LICENSE("GPL");
MODULE_AUTHOR("Author");
MODULE_DESCRIPTION("\"Hello, world!\" minimal module");
MODULE_VERSION("printk");

int init_module(void)
{
    printk("<1>Hello world 1.\n");
    return 0;
} 

void cleanup_module(void)
{
    printk(KERN_ALERT "Goodbye world 1.\n");
} 
```

生成文件：

```
obj-m += mymod.o 
all:
     make -C /lib/modules/$(shell uname -r)/build M=$(PWD) modules 
clean: 
     make -C /lib/modules/$(shell uname -r)/build M=$(PWD) clean 
```

做出来：

```
make -C /lib/modules/3.2.0-23-generic-pae/build M=/root modules
make[1]: Entering directory `/usr/src/linux-3.2.42'

  WARNING: Symbol version dump /usr/src/linux-3.2.42/Module.symvers
           is missing; modules will have no dependencies and modversions.

  Building modules, stage 2.
  MODPOST 1 modules
make[1]: Leaving directory `/usr/src/linux-3.2.42' 
```

所以它会创建我需要的文件，但是当我尝试安装它时

```
insmod mymod.ko 
```

我得到下一个输出：

```
insmod: error inserting 'mymod.ko': -1 Invalid module format 
```

所以我想知道是什么问题？

PS。操作系统 - Ubuntu 服务器 12.04。内核 - linux 3.2.0-23 pae

更新：

我从 kernel.org 内核 3.2.42 下载并将其放入 /usr/src 并执行了“make defconfig && make prepare”、“make modules_prepare”。我还在 /lib/modules/3.2.0-23-generic-pae/build 中创建了链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T13:02:48.413

这是正在运行的内核的源代码树吗？如果没有，它*应该*会失败。

为您的发行版安装 kernel-devel（或类似名称）包，它添加了足够的机制来构建模块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T00:58:01.713

你错过了`module_init`and`module_cleanup`声明，

```
module_init (module_init);
module_exit (cleanup_module); 
```

否则它将没有定义入口点，也不会加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-22T17:28:54.263

因为这个任务需要很多细节，并且需要协调小文件，所以最好使用 UML（用户模式 ​​linux），这样 kprintf（内核 printf）即使在图形环境中也始终输出到终端。

# javascript - Knockout.js ：映射到现有表，添加多个条目

> ID：15729727
> 
> 赞同：0
> 
> 时间：2013-03-31T13:14:34.200
> 
> 标签：javascript, knockout.js, knockout-mvc

我有一个 HTML 表格，想在上面定义一些 knockout.js 可观察对象。当我点击 createTrack 函数时，表格的现有内容再次被添加，想添加一个新条目来跟踪。需要帮助来解决此问题。

注意：我不想使用 JSON 动态获取内容，因为它会影响 SEO/其他原因。

链接到小提琴：http: [//jsfiddle.net/ATDJp/1/](http://jsfiddle.net/ATDJp/1/)

查看型号代码

```
(function () {
    var tracks = ko.utils.parseHtmlFragment('#tracks-table');

    // represent a single track item
    var Track = function (TrackNo, TrackTitle, TrackLength) {
        this.TrackNo = ko.observable(TrackNo);
        this.TrackTitle = ko.observable(TrackTitle);
        this.TrackLength = ko.observable(TrackLength);
    };

    var TracksViewModel = function (tracks) {
        var self = this;

        // All track
        self.tracks = ko.observableArray(ko.utils.arrayMap(tracks, function (track) {
            return new Track(track.TrackNo, track.TrackTitle, track.TrackLength);
        }));

        // Add a new Track on click of new button
        self.createTrack = function () {
            // Add a new Track
            self.tracks.push({ TrackNo: "", TrackTitle: "", TrackLength: "" });
        };
    }

    // check data from local table

   // var tracks = ko.utils.parseJson(JSON.stringify(jQuery('#tracks-table').tableToJSON()));

    // bind a new instance of our view model to the page
    var TracksViewModel = new TracksViewModel(tracks || []);
    ko.applyBindings(TracksViewModel);
})(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T15:35:13.500

听起来您真的没有尝试使用动态数据。你为什么不为这个任务切换淘汰赛并使用 jQuery。还有一个 HTML 错误（没有结尾的 TD）。

[http://jsfiddle.net/ATDJp/3/](http://jsfiddle.net/ATDJp/3/)

```
$('#btnaddnewtrack').on('click', function() {
        $('#tracks-table tr:last').after('<tr><td>3</td><td>track3</td><td>4:30</td></tr>'); 
}); 
```

# java - 如何在 Javadoc 中解释公共类的提议

> ID：15729729
> 
> 赞同：0
> 
> 时间：2013-03-31T13:14:51.953
> 
> 标签：java, javadoc, comments

嗨，我被要求解释我程序中每个公共类、公共方法和公共字段的用途，但我不知道该写什么，例如@param 仅用于方法？

你能举一个javadoc的每个类、方法和字段的例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T13:25:28.233

首先[是 oracle 教程](http://www.oracle.com/technetwork/java/javase/documentation/index-137868.html)。

标准方法是：

```
/**
* This class does XYZ, here goes a description of your class
* @author Alex Jj
* @version 1.0
*/ 
```

标准是：

在`.java`文件的顶部，包括版权许可。

导入后，包含 JavaDoc 类，这从对行的描述开始，您可以使用`<p>`段落、`<code>`代码示例等标签。

*   然后你添加`@author`标签，每个作者一个，这通常是你的全名。这是必需的。

*   之后，你有`@version`标签，这是必需的

*   之后，您通常会有类似的标签`@see`（指其他相关的类）

*   其次`@since`是您支持的第一个 Java 版本

一个很好的例子[是 java.lang.String 是如何记录的](http://grepcode.com/file_/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/String.java/?v=source)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T13:16:42.030

如果您使用`Eclipse`then 键入`/**`并在要记录的方法或类声明之前按 Enter。
对于每个方法/类，将出现相应的注释，您可以编写方法/类的详细信息。
通过在此区域内按下`ctrl+space`，您可以查看所有可用`@`选项以用于文档目的

# ruby-on-rails - rails - 在不是该类的索引视图的视图中显示类的所有元素

> ID：15729730
> 
> 赞同：0
> 
> 时间：2013-03-31T13:15:04.843
> 
> 标签：ruby-on-rails

我有一个包含小说和插图的网站。在插图的展示页面上，我希望显示属于同一本小说的所有插图的缩略图网格。如何从视图中调用illustration_controller 中的方法（带参数）以返回我使用find 方法获得的小说列表？我尝试了以下方法，但错误消息声称我在控制器中没有此消息：

`<% @illustrations = IllustrationsController.get_related_by_novel %>`

这是控制器中的方法：

```
class IllustrationsController < ApplicationController
.
.#some code here
.
  def get_related_by_novel
    @illustrations = Illustration.find(params[:id][:novel])
  end
end 
```

即使我得到这个调用，我也不知道如何将参数从当前查看的插图传递给控制器​​，以便它可以运行查询。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T13:37:15.033

“即使我得到这个调用，我也不知道如何将参数从当前查看的插图传递给控制器​​，以便它可以运行查询。” 您可能想阅读有关[关联](http://guides.rubyonrails.org/association_basics.html)和[路由](http://guides.rubyonrails.org/routing.html)的 Rails 指南。显示插图的标准 RESTful 路线将是：

`get /illustrations/:id => illustrations#show`

这会将请求发送到具有`params[:id]`插图 ID 设置的插图控制器。理想情况下，您的控制器应该委托给模型以查找相关插图。假设你有一个标准有很多并且属于 Novel 和 Illustration 之间的关系，那么你的控制器代码可能如下所示：

```
class IllustrationsController
  def show
    @illustration = Illustration.find(params[:id])
    @related_illustrations = @illustration.find_related
  end
end 
```

您的模型代码可能如下所示：

```
class Illustration
  def find_related
    self.novel.illustrations - [self]
  end
end 
```

总是有更多的方法可以做到这一点，但在我看来，这可以保持与模型的关联逻辑并保持控制器的轻量级。

# php - 通过短代码显示自定义帖子类型

> ID：15729731
> 
> 赞同：0
> 
> 时间：2013-03-31T13:15:06.780
> 
> 标签：php, wordpress

我制作了一种名为“football”（单数）“footballs”（复数）的新帖子类型。我有一个简码，可以在一个页面中显示我的所有帖子，其中包含特色图片等：[http](http://www.freebetnodeposit.org/match-reports/) ://www.freebetnodeposit.org/match-reports/但有人可以帮我修改此代码，而不是显示“帖子” ' 它显示来自“足球”帖子类型的帖子。

继承人的代码：

```
<?php
function gp_posts($atts, $content = null) {
    extract(shortcode_atts(array(
        'name' => '',
        'cats' => '',
        'images' => 'true',
        'image_width' => '533',
        'image_height' => '200',
        'image_wrap' => 'false',
        'cols' => '2',
        'per_page' => '6',
        'link' => 'both',
        'orderby' => 'date',
        'order' => 'desc',
        'offset' => '0',
        'content_display' => 'excerpt',
        'excerpt_length' => '400',
        'title' => 'true',
        'title_size' => '',
        'title_font' => '',
        'title_length' => '500',
        'meta' => 'true',
        'meta_author' => 'true',
        'meta_date' => 'true',
        'meta_cats' => 'true',
        'meta_tags' => 'true',
        'score' => 'true',
        'read_more' => 'true',
        'pagination' => 'true',
        'spacing' => 'spacing-normal',
        'header' => '',
        'rss' => '',
        'color' => ''       
    ),$atts));

    global $wp_query, $post, $dirname, $gp_settings;
    require(gp_inc . 'options.php');

    // Order By

    if($orderby == 'score') { 
        $orderby = 'meta_value_num';
        $meta_key = '_'.$dirname.'_total_score';
    } else {
        $orderby = $orderby;
        $meta_key = '';
    }

    // Title Size

    $title_weight = '';
    if($title_size != "") {
        if(preg_match('/^1[0-4]$/', $title_size)) {
            $title_weight = 'font-weight: bold; ';              
        }
    }
    if($title_size != "") {
        if(preg_match('/%/', $title_size) OR preg_match('/em/', $title_size) OR preg_match('/px/', $title_size)) {
            $title_size = 'font-size: '.$title_size.'; ';               
        } else {
            $title_size = 'font-size: '.$title_size.'px; ';     
        }
    } else {
        $title_size = "";
    }

    // Title Font

    if($title_font != "") {
        $title_font = 'font-family: '.$title_font.'; ';     
    } else {
        $title_font = "";
    }

    // Pagination   

    if (get_query_var('paged')) {
        $paged = get_query_var('paged');
    } elseif (get_query_var('page')) {
        $paged = get_query_var('page');
    } else {
        $paged = 1;
    }

    // Post Query   

    $args=array(
    'post_type' => 'post',
    'post_status' => 'publish',
    'category_name' => $cats,
    'paged' => $paged,
    'ignore_sticky_posts' => 0,
    'orderby' => $orderby,
    'order' => $order,
    'meta_key' => $meta_key,
    'posts_per_page' => $per_page,
    'offset' => $offset
    );

    $featured_query = new wp_query($args); $counter = "";

    ob_start(); ?>

    <!-- BEGIN POST WRAPPER -->

    <div class="post-wrapper <?php echo $name.' '.$spacing; ?>">

        <!-- BEGIN HEADER -->

        <?php if($header) { ?><h3 class="featured-header" style="border-color: <?php echo $color; ?>;"><?php echo $header; ?><?php if($rss) { ?><a href="<?php echo $rss; ?>" class="icon-rss"></a><?php } ?></h3><?php } ?>

        <!-- END HEADER -->

        <?php while ($featured_query->have_posts()) : $featured_query->the_post(); $counter = $counter + 1;

        // Image Dimensions

        if(get_post_meta($post->ID, '_'.$dirname.'_thumbnail_width', true) && get_post_meta($post->ID, '_'.$dirname.'_thumbnail_width', true)) {
            $image_width = get_post_meta($post->ID, '_'.$dirname.'_thumbnail_width', true);
        } else {
            $image_width;
        }
        if(get_post_meta($post->ID, '_'.$dirname.'_thumbnail_height', true) && get_post_meta($post->ID, '_'.$dirname.'_thumbnail_height', true)) {
            $image_height = get_post_meta($post->ID, '_'.$dirname.'_thumbnail_height', true);
        } else {
            $image_height;
        }

        // Image Dimensions For Mobiles

        if($image_width <= 460 && get_option($dirname.'_responsive') == "0") {
            $image_ratio = 460 / $image_width;
            $new_image_width = $image_width * $image_ratio;
            $new_image_height = $image_height * $image_ratio;
        } else {
            $new_image_width = $image_width;
            $new_image_height = $image_height;
        }

        // Columns

        if($counter %$cols == 1) {
            $first_column = " first-column ";
        } else {
            $first_column = "";
        }

        if($cols > 1) {
            $columns = " post-columns ";
        } else {
            $columns = "";
        }

        $col_width = (100 - (($cols -1) * 4)) / $cols;

        // Total Score

        if(get_post_meta($post->ID, '_'.$dirname.'_total_score', true) > 0) {
            $total_score_width = (get_post_meta($post->ID, '_'.$dirname.'_total_score', true) / $gp_settings['star_number']) * 100;
        } else {
            $total_score_width = 0;
        }

        ?>

            <!-- BEGIN POST -->

            <div <?php post_class('post-loop'.$first_column.$columns); ?> style="width: <?php echo $col_width; ?>%;">

                <!-- BEGIN IMAGE -->

                <?php if(has_post_thumbnail() && $images == "true") { ?>
                    <div class="post-thumbnail<?php if($image_wrap == "true") { ?> wrap<?php } ?>">

                        <?php if(($link == "image" OR $link == "both") && get_post_meta($post->ID, '_'.$dirname.'_link_type', true) != "None") { ?>
                            <a href="<?php if(get_post_meta($post->ID, '_'.$dirname.'_link_type', true) == "Lightbox") { if(get_post_meta($post->ID, '_'.$dirname.'_custom_url', true)) { echo get_post_meta($post->ID, '_'.$dirname.'_custom_url', true); } else { echo wp_get_attachment_url(get_post_thumbnail_id($post->ID)); }} else { if(get_post_meta($post->ID, '_'.$dirname.'_custom_url', true)) { echo get_post_meta($post->ID, '_'.$dirname.'_custom_url', true); } else { the_permalink(); }} ?>"<?php if(get_post_meta($post->ID, '_'.$dirname.'_link_type', true) == "Lightbox") { ?> rel="prettyPhoto[<?php echo $name; the_ID(); ?>]"<?php } ?>>
                        <?php } ?>

                            <?php $image = aq_resize(wp_get_attachment_url(get_post_thumbnail_id($post->ID)), $new_image_width, $new_image_height, true, true); ?>

                            <?php if(get_post_meta($post->ID, '_'.$dirname.'_link_type', true) == "Lightbox") { ?>
                                <span class="lightbox-hover icon-plus"></span>
                            <?php } ?>

                            <img src="<?php echo $image; ?>" width="<?php echo $image_width; ?>" alt="<?php if(get_post_meta(get_post_thumbnail_id(), '_wp_attachment_image_alt', true)) { echo get_post_meta(get_post_thumbnail_id(), '_wp_attachment_image_alt', true); } else { echo get_the_title(); } ?>" />       

                        <?php if(($link == "image" OR $link == "both") && get_post_meta($post->ID, '_'.$dirname.'_link_type', true) != "None") { ?></a><?php } ?>

                    </div>                  

                    <?php if($image_wrap == "false") { ?><div class="clear"></div><?php } ?>

                <?php } ?>

                <!-- END POST -->

                <!-- BEGIN LIGHTBOX IMAGES -->

                <?php $args = array('post_type' => 'attachment', 'post_parent' => $post->ID, 'numberposts' => -1, 'orderby' => 'menu_order', 'order' => 'asc', 'post__not_in'   => array(get_post_thumbnail_id())); $attachments = get_children($args); if($attachments) { foreach ($attachments as $attachment) { ?>

                    <a href="<?php if(get_post_meta($attachment->ID, '_gp_video_url', true)) { ?>file=<?php echo get_post_meta($attachment->ID, '_gp_video_url', true); } else { echo wp_get_attachment_url($attachment->ID); } ?>" rel="prettyPhoto[<?php echo $name; the_ID(); ?>]" title="<?php echo $attachment->post_content; ?>" style="display: none;"><img src="" alt="<?php echo $attachment->post_title; ?>"></a>

                <?php }} ?>

                <!-- END LIGHTBOX IMAGES -->

                <!-- BEGIN POST TEXT -->

                <div class="post-text"<?php if(has_post_thumbnail() && $images == "true" && $image_wrap == "true") { ?> style="margin-left: <?php echo $image_width + 20; ?>px;"<?php } ?>>

                    <!-- BEGIN TITLE -->

                    <?php if($title == "true") { ?><h2 style="margin-top:-10px;"><?php if($link == "title" OR $link == "both") { ?><a href="<?php the_permalink(); ?>" title="<?php echo the_title_limit($title_length); ?>"><?php } ?><?php echo stripslashes(do_shortcode(get_post_meta($post->ID, '_'.$dirname.'_hometeamname', true))); ?> VS <?php echo stripslashes(do_shortcode(get_post_meta($post->ID, '_'.$dirname.'_awayteamname', true))); ?><?php if($link == "title" OR $link == "both") { ?></a><?php } ?></h2><?php } ?>

                    <!-- END TITLE -->

                    <!-- BEGIN SCORE META -->

                    <?php if($score == "true" && get_post_meta($post->ID, '_'.$dirname.'_total_score', true) > 0) { ?>

                        <div class="score-meta">    

                            <span class="gp-stars-wrapper" style="width: <?php echo (19.6 * $gp_settings['star_number']); ?>px;"><span class="rating-unselected"><span class="rating-selection" style="width:<?php echo $total_score_width; ?>%"></span></span></span>
                        </div>  

                    <?php } ?>

                    <!-- END SCORE META -->

                    <!-- BEGIN POST META-->

                    <?php if($meta == "true" && ($meta_date == "true" OR $meta_author == "true" OR $meta_cats == "true")) { ?>

                        <div class="post-meta">

                            <?php if($meta_date == "true" OR $meta_author == "true" OR $meta_cats == "true") { ?>                   

                                <?php if($meta_date == "true") { ?><span class="meta-date">Match Date: <?php the_time(get_option('date_format')); ?></span><?php } ?>
                                <br />

                                <?php if($meta_cats == "true") { ?><span class="meta-cats">Game Type: <?php the_category(', '); ?></span><?php } ?>

                            <?php } ?>

                        </div>

                    <?php } ?>

                    <!-- END POST META-->

                    <!-- BEGIN POST CONTENT -->

                    <?php if($content_display == "full") { ?>   

                    <?php } else { ?>

                    <?php } ?>

                    <!-- END POST CONTENT -->

                    <!-- BEGIN POST TAGS -->

                    <?php if($meta == "true" && $meta_tags == "true") { ?>
                        <?php the_tags('<div class="meta-tags"><span>'.__('Tags', 'gp_lang').':</span>', '', '</div>'); ?>
                    <?php } ?>

                    <!-- END POST TAGS -->

                </div>

                <!-- BEGIN POST TEXT -->

            </div>

            <!-- BEGIN POST -->

            <?php if($cols > 1 && $counter %$cols == 0) { ?><div class="clear"></div><?php } ?>

        <?php endwhile; ?>

        <?php if($pagination == "true") { ?>
            <?php gp_pagination($featured_query->max_num_pages); ?>
            <div class="clear"></div>
        <?php } ?>

    </div>

    <!-- END POST WRAPPER -->

<?php

    $output_string = ob_get_contents();
    ob_end_clean(); 

    wp_reset_query();

    return $output_string;

}

add_shortcode("posts", "gp_posts");

?> 
```

帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T13:44:26.143

大约 1/3 的路下来你应该看到......

```
'post_type' => 'post', 
```

将其更改为`'post_type' => 'football',`

但是，该代码使用了许多参数并做了很多可能不适用于您的帖子类型的工作，甚至可能与它或您想要的功能发生冲突。这是要扫描的大量代码，仅查看它我无法判断一个更改是否足够，但正是该更改将使查询从您的`football`帖子类型中提取。

# django - Django Elastic Beanstalk 清漆缓存

> ID：15729732
> 
> 赞同：0
> 
> 时间：2013-03-31T13:15:18.140
> 
> 标签：django, amazon-ec2, varnish, amazon-elastic-beanstalk

我将 Amazon 的 Elastic Beanstalk 与 Django 应用程序一起使用。它正在连接到后端的 RDS 实例。该应用程序是 99% 的数据驱动的，大多数页面不会更改，因此应该很容易缓存。但是，该站点在中等负载下崩溃了，我已经尝试了所有可用的缓存选项。我认为问题在于我需要像清漆这样的外部缓存机制。但是，除了创建高度定制的 AMI 之外，我没有看到任何使用弹性豆茎安装清漆的“简单”方法。有什么建议么？

顺便说一句，我正在使用的负载测试服务是“blitz.io”，它很快就会在服务器上施加大量负载，以模拟被 slashdotted、reddited 等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:15:13.223

解决了！问题归结为中间件的顺序。我在 UpdateCacheMiddleware 之前有 GZipMiddleware。一旦我将 UpdateCacheMiddleware 放在 MIDDLEWARE_CLASSES 的顶部，缓存就开始正常工作。

# angularjs - 处理模型副本的共享表单

> ID：15729734
> 
> 赞同：0
> 
> 时间：2013-03-31T13:15:26.060
> 
> 标签：angularjs

我有一个用于编辑附加在我的 DOM 根附近的项目的表单。我的页面包含这些项目的列表，以及编辑它们的链接。

最干净的方法是什么

1.  单击编辑链接时在表单中显示所选项目
2.  让表单在项目的副本上工作，以便在用户编辑时不会修改原件（并且可以取消更改）
3.  保存表单会更新原始项目

我一直在玩 $rootScope、指令和服务的各种组合，但还没有一个可行的解决方案，更不用说一个干净的解决方案了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T14:44:19.413

您可以首先使用指向与您正在编辑的对象具有相同属性的对象的 ngModel 绑定来设置表单。所以使用下面的对象，有一个带有`ng-model='editObj.name'`.

如果您关于项目的所有信息都存储在 JSON 对象中，则您只需选择该项目的一部分：

```
[
    {
        "name":"Tim",
        "country":"USA"
    },
    {
        "name":"second",
        "country":"CA"
    }
] 
```

然后将第二个项目转移到一个新的作用域 obj 中：

```
$scope.editObjItem=angular.copy($scope.obj[1]); 
```

然后您可以编辑它，然后在单击提交按钮时将其弹回原位，然后您可以根据需要将数据上传回服务器：

```
$scope.obj[1]=$scope.editObjItem; 
```

如果用户在进行更改后取消编辑，则不会对原始对象造成损害。这就是我无论如何都会处理它的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T14:56:40.570

这是一个由控制器处理的非常简单的编辑表单。通过使用`angular.copy( object/array)`可以处理项目的副本。`ng-submit=updateItem()`然后在表单中使用已编辑副本中的值更新原始项目属性

```
<ul>
  <li ng-repeat="item in items"><button ng-click="editItem(item)">Edit</button>{{item.first}} {{item.last}} </li>
</ul>

 <form ng-submit="updateItem()" ng-show="activeItem">
 <h3>Edit Item</h3>
    <div><input ng-model="editCopy.first" type="text"/></div>
    <div><input ng-model="editCopy.last" type="text"/></div>
    <div><input type="submit" value="Update"/></div>
</form> 
```

```
app.controller('MainCtrl', function($scope) {
  /* utility function*/
  var swapItemValues=function(from,to){
      for(key in from){
        to[key]=from[key];
      }      
    }

  $scope.items=[{first:'SpongeBob', last:'SquarePants'} ];

    $scope.editItem=function(item){
      $scope.editCopy=angular.copy(item);      
      $scope.activeItem=item;/* reference to original item, used for form ng-show as well as to do update*/

    }

    $scope.updateItem=function(){
       swapItemValues( $scope.editCopy,$scope.activeItem );
       $scope.activeItem=null;/* form `ng-show` only displays when there is an activeItem*/
    }

}); 
```

演示：[http ://plnkr.co/edit/O52EIk9ops8UqIFmbqXw?p=preview](http://plnkr.co/edit/O52EIk9ops8UqIFmbqXw?p=preview)

`Undo`根据有问题的取消评论，稍微升级了 DEMO 并进行了编辑

[http://plnkr.co/edit/c7H7lYBTnd2P6ShK7Ela?p=preview](http://plnkr.co/edit/c7H7lYBTnd2P6ShK7Ela?p=preview)

# php - 在 MySql 中显示来自同一个表的两个结果集列表

> ID：15729738
> 
> 赞同：1
> 
> 时间：2013-03-31T13:15:39.660
> 
> 标签：php, mysql

我正在尝试在 MySql 中编写一个查询，我想从一个选择语句中获得***两个不同的结果集。***例如，我有一个包含两列“名称和值”的表。请注意我不想使用多个表。我想要一张表的结果集。

```
Name  Value
A     W
B     X
C     W
A     Y
C     Z 
```

当我运行 select 语句时，我想将结果显示为

我的结果集的第一个列表为：

```
Name
A
B
C 
```

我的结果集的第二个列表为：

```
Value
W
X
Y
Z 
```

我曾尝试使用 UNION DISTINCT 语句，但它并没有解决我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T13:29:16.617

如果两列具有相同的类型，您可以使用

```
select distinct name
from mytable
union all
select distinct value
from mytable 
```

[SQLFiddle](http://www.sqlfiddle.com/#!2/84c11/1/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T13:36:26.420

一种方法：

```
select distinct result,
      case result when 'name' then name else value end name_value
from (select 'name' result union select 'value') r
cross join mytable 
```

# c# - 绑定后的 ObservableCollection 更新

> ID：15729739
> 
> 赞同：0
> 
> 时间：2013-03-31T13:15:40.117
> 
> 标签：c#, wpf, observablecollection

我有一个`ObservbleCollection`与列表框的绑定。将集合作为列表的 ItemsSource 后，我无法更新我的集合。如果我更新它，程序将关闭（没有任何崩溃）。

**代码：**
我有课程：

```
class MyFile
{
    String FileName {get; set;}
    ImageSource Ico {get; set;}
} 
```

然后在构造器中运行代码（在 InitializeComponents 之后）

```
ObservableCollection<MyFile> filesList = new ObservableCollection<MyFile>();
filesList.Add(new MyFile { Name = "bar.doc", Ico = null } // Work Fine
filesList.Add(new MyFile { Name = "foo.txt", Ico = null } // Work Fine
files.ItemsSource = filesList; 
filesList.Add(new MyFile { Name = "try.txt", Ico = null } // EXIT FROM PROGRAM 
```

我的程序有什么问题？

**编辑**
刚刚用 null 而不是 GetIcon 测试了它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T13:28:58.783

[ObservableCollection](http://msdn.microsoft.com/en-us/library/ms668604.aspx)的任务是向侦听器宣布更改（添加、删除、...）。所以没有任何问题，`ObservableCollection`并将其绑定为`ItemsSource`ListBox，不会使其不可编辑。该方法一定有问题`GetIcon`（例如，尝试重新打开未正确关闭的同一图像）

要看看这个想法是否正确，试试这个：

```
ObservableCollection<MyFile> filesList = new ObservableCollection<MyFile>();
filesList.Add(new MyFile { Name = "bar.doc", Ico = GetIcon(".doc") }
//filesList.Add(new MyFile { Name = "foo.txt", Ico = GetIcon(".txt") } // Comment this line
files.ItemsSource = filesList; 
filesList.Add(new MyFile { Name = "try.txt", Ico = GetIcon(".txt") } 
```

如果你想看到这个错误。我建议您在按钮的单击事件中（而不是在构造函数中）复制这些行，然后运行您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T14:25:06.890

这是一个使用 DependencyPropery 绑定 ObservableCollection 的小示例。我希望它可以帮助您了解如何以这种方式进行 DataBinding。

XAML

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"

        x:Name="MyWindow"

        Title="MainWindow">
    <Grid>
        <ListBox ItemsSource="{Binding MyList, ElementName=MyWindow, Mode=TwoWay}">
        </ListBox>
    </Grid>
</Window> 
```

代码背后

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.Threading;

using System.Collections.ObjectModel;

namespace WpfApplication1
{
    /// <summary>
    /// Logica di interazione per MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public static readonly DependencyProperty MyListProperty = DependencyProperty.Register("MyList", typeof(ObservableCollection<string>), typeof(MainWindow));

        public ObservableCollection<string> MyList
        {
            get
            {
                return (ObservableCollection<string>)GetValue(MyListProperty);
            }
            set
            {
                SetValue(MyListProperty, value);
            }
        }
        public MainWindow()
        {
            InitializeComponent();

            MyList = new ObservableCollection<string>() { "a", "b" };
            MyList.Add("c");
        }
    }
} 
```

# ios - 转到后台并返回前台后无法继续从 AVAssetReaderOutput 读取

> ID：15729742
> 
> 赞同：13
> 
> 时间：2013-03-31T13:16:04.440
> 
> 标签：ios, core-audio, audiounit, avassetreader

我正在使用 an`AVAssetReaderOutput`从 中读取样本`AVAsset`，对它们进行一些处理，然后使用 RemoteIO AU 播放结果。

问题是在调用`AudioOutputUnitStop`暂停播放后，然后在进入后台并返回前台后，调用后音频不会再次开始`AudioOutputUnitStart`。`copyNextSampleBuffer`这是由于 的方法返回的错误，该方法`AVAssetReaderOutput`被称为渲染管道的一部分。

调用后的`status`属性为，其属性为**Error Domain=AVFoundationErrorDomain Code=-11847 "Operation Interrupted" UserInfo=0x1d8b6100 {NSLocalizedRecoverySuggestion=停止其他操作并重试，NSLocalizedDescription=Operation Interrupted}**`AVAssetReader``copyNextSampleBuffer``AVAssetReaderStatusFailed``error`

 **我正在寻找一种解决方案，它不会迫使我在回到前台后重新初始化整个管道 - 希望有这样一个解决方案，它`AVAssetReader`可以在应用程序进入后台和返回后继续存在......

笔记

*   该应用程序有权在后台播放音频。
*   我正在处理音频中断 -`AVAudioSession`在`AVAudioSessionDelegate`s`endInterruptionWithFlags:`事件和应用程序激活时都将 my 设置为活动的。无论我是否这样做都没有区别，得到同样的错误。

一些代码：

音频播放器

```
@implementation AudioPlayer
    ...
// Audio Unit Setup
AudioComponentDescription desc;
desc.componentType = kAudioUnitType_Output;
desc.componentSubType = kAudioUnitSubType_RemoteIO;
desc.componentManufacturer = kAudioUnitManufacturer_Apple;
desc.componentFlags = 0;
desc.componentFlagsMask = 0;

AudioComponent defaultOutput = AudioComponentFindNext(NULL, &desc);

AudioComponentInstanceNew(defaultOutput, &_audioUnit);

AudioStreamBasicDescription audioFormat;
    FillOutASBDForLPCM(audioFormat, 44100, 2, 16, 16, false, false);

AudioUnitSetProperty(self.audioUnit, kAudioUnitProperty_StreamFormat, kAudioUnitScope_Input, kOutputBus, &audioFormat, sizeof(audioFormat));

AURenderCallbackStruct callbackStruct;
callbackStruct.inputProc = RenderCallback;
callbackStruct.inputProcRefCon = (__bridge void*)self;
AudioUnitSetProperty(self.audioUnit, kAudioUnitProperty_SetRenderCallback, kAudioUnitScope_Input, kOutputBus, &callbackStruct, sizeof(callbackStruct));

AudioUnitInitialize(self.audioUnit); 
```

音频阅读器设置

```
@implementation AudioReader
    ...
NSError* error = nil;
self.reader = [AVAssetReader assetReaderWithAsset:self.asset error:&error];
NSDictionary *outputSettings = ...
self.readerOutput = [AVAssetReaderTrackOutput assetReaderTrackOutputWithTrack:[self.asset.tracks objectAtIndex:0] outputSettings:outputSettings];
[self.reader addOutput:self.readerOutput];
[self.reader startReading]; 
```

AudioReader 渲染方法，最终由 RenderCallback 函数调用

```
-(BOOL)readChunkIntoBuffer
{
     CMSampleBufferRef sampleBuffer = [self.readerOutput copyNextSampleBuffer];
     if ( sampleBuffer == NULL )
     {
         NSLog(@"Couldn't copy next sample buffer, reader status=%d error=%@, self.reader.status, self.reader.error);
         return NO;
     }
 ...
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-04-22T21:36:54.950

图表和 AVReader 基础*没有*任何连接/链接。混乱可能来自如果 iOS 看到音频图正在运行，它不会“后台”（休眠）进程（因为这样就无法生成音频数据）。这就是为什么当您停止音频图时，2-3 分钟后，iOS 将后台处理您的进程（从 iOS 9 开始）。据推测，iOS 会查看您的进程中正在发生的事情并决定何时应该强制您的进程进入后台（通过`beginBackgroundTaskWithName:expirationHandler`）。

Apple 开发人员出于某种原因决定让 AVReader 在进入后台模式时停止（我最好的猜测是 QA）。好消息是，当您的进程退出后台模式时，您可以检测到它并恢复，但您需要再次重新启动阅读器和 readerOutput。首先，当 AVAssetReaderOutput`copyNextSampleBuffer`返回 NULL 时，`AVAssetReader.error.code`检查`AVErrorOperationInterrupted`.

我们在这里实现无缝恢复的方式是，当我们到达那个点时，我们首先计算我们停止的确切时间（很容易做到——只需维护一个已经输出的总样本的计数器）。然后，您将需要重新启动您的`AVAssetReader`流程`AVAssetReaderOutput`。但这没有问题，因为您的良好开发实践会将其封装在一个以寻道时间作为参数的函数中。在该功能中，使用`AVAssetReader.timeRange`搜索到您需要恢复的时间并恢复！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T04:59:45.383

我要尝试的第一件事是：

不打电话`AudioOutputUnitStop`？你为什么不让图表运行，当音频暂停时根本不打电话

```
[self.readerOutput copyNextSampleBuffer] 
```

相反，只需用 0 填充缓冲区和/或对缓冲区使用 kAudioUnitRenderAction_OutputIsSilence 的渲染操作。启动和停止图表需要时间并导致图表无响应。在我的应用程序运行时，我从不停止图表。（除非发生一些严重的中断）这可能会让资产阅读者感到高兴。

但我有一种预感，因为`AVAssetReader`它没有直接连接到音频图（您只是碰巧请求样本并将它们放在渲染回调提供的缓冲区中），问题不在于音频图被停止并重新启动. 因此，我将尝试的下一条攻击线是从 AVAsset 请求样本，将应用程序置于后台并将其带回前台*，而根本不使用 AUGraph*。这将确定问题是否与`AUGraph`进入后台状态的应用程序有关。

如果发生某些事情迫使您拆除您`AVAssetReader`的资产，您将不得不重新连接到资产。因此，当您必须编写另一个代码时，我会考虑的选项是您不想做的那个。重新连接到`AVAssetReader`，寻找您离开的位置并继续前进。**

# mysql - 选择性删除行mysql

> ID：15729749
> 
> 赞同：0
> 
> 时间：2013-03-31T13:17:04.007
> 
> 标签：mysql, sql

我是 mysql 的新手，所以希望能得到这方面的建议：

我有一个包含 3 列的表：id(key int)、frame(int) 和 valid(bool)。身份证是关键。当它们的有效标志在一定数量的帧后没有从假变为真（它死）时，我想删除所有 id（行）。如果帧在最大帧数（已知）内没有将其有效性从 false 更改为 true，则它不会在下一帧更新，因此会死亡。id 对所有帧都是全局唯一的，每帧有多个 id。

例如，说 id 1 从 frm 1 到 5 是有效的，从 6 到 8 是假的（然后死掉）。另一个 id 2 从 frm 1 到 6 有效，从 7 到 9 为假，然后从 10 到结束再次有效。我只想删除第 6 帧到第 8 帧之间的 id 1 的行而不触及 id 2。

到目前为止，我找到了所有标记为假的 ID 的最后一帧。alter view false_pt_last_frm as select id as tid, max(frame_number) as frm, valid as vld from ptTable where vld=1 group by tid;

然后我正在考虑将 ptTable 与视图 false_pt_last_frm 加入，以查找视图中在 frm+1 帧上有效的所有点，并从视图中找到该集合之外的 id 并将其删除。但我坚持这一点。

这是一个好方法吗？请举例说明如何有效地做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T03:12:53.483

好的，试试这个。它需要 MySQL 中的临时表。在其他 DBMS 中可能不是这样：

```
create table temp as (
    select a.id 
    from ptTable a 
    where a.frame = (
            select max(b.frame) 
            from ptTable b 
            where a.id = b.id) 
    and a.valid = false) ;

delete from ptTable where id in (select id from temp); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T13:50:05.187

我不确定我是否理解正确。但我想你只是想要这个？

```
DELETE FROM <YOUR TABLE> WHERE FRAME = false AND id = <whatever ID you want to target>; 
```

如果不是，请澄清问题，也许？

否则可能：

```
DELETE FROM <YOUR TABLE> WHERE FRAME = false AND id < (SELECT max(id) from <your table>); 
```

甚至

```
DELETE FROM <YOUR TABLE> WHERE FRAME = false AND id = (SELECT max(id)-1 from <your table>); 
```

如果你想要一个直接在最新的之前...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T14:15:07.907

因此，您要删除连续三个或更多帧的 valid = false 序列。第一个问题是确定一行中“假”值的数量。我们可以使用相关的子查询来做到这一点：

```
select t.*,
       ((select count(*) from t t2 where t2.id = t.id and t2.frame <= t2.frame and t2.valid = false) -- num falses before this frame, including this frame +
        (select count(*) from t t2 where t2.id = t.id and t2.frame > t2.frame and t2.valid = false) -- num falses after this frame
       ) as numFalsesInRow
from t
where t.valid = false 
```

第一个子查询计算之前的错误数量，第二个子查询计算之后的数量。

现在，将其放入连接查询中，如下所示：

```
delete t
from t inner join
     (select t.*,
             ((select count(*) from t t2 where t2.id = t.id and t2.frame <= t2.frame and t2.valid = false) -- num falses before this frame, including this frame +
              (select count(*) from t t2 where t2.id = t.id and t2.frame > t2.frame and t2.valid = false) -- num falses after this frame
             ) as numFalsesInRow
      from t
      where t.valid = false
    ) t2
    on t.id = t2.id and t.frame = t2.frame and t2.numFalsesInRow = 3; 
```

不过，在删除之前，我肯定会测试子查询。

# python - 在windows上提高python2.6文件IO性能

> ID：15729750
> 
> 赞同：2
> 
> 时间：2013-03-31T13:17:06.813
> 
> 标签：python

我使用了一个 ETL 工具，它具有 python2.6 作为内置脚本语言，所以当我需要将一个大文件拆分成块以进行下游处理时。这似乎是一个显而易见的选择。我最初使用 python 2.6 安装在我的 macbook ( osx 10.8 ) 上编写和测试了脚本。

当我把它移到 Windows 上时，我很惊讶，因为它的运行速度慢了 10 倍……甚至是企业级服务器（32 核 64GB 光纤通道 SAN 等）。

当试图缩小差异所在时，mac osx 在注释掉写入时几乎没有差异，而 windows 增加 > 5x

osx和windows之间有一些基本的文件IO区别吗？

感激地接受任何帮助:)

```
import os
import sys
import re
from time import time

t = time()

"""
# Split a pre sorted text file into multiple outputs based on the leftmost element
# delimited by spaces.
# The second element can be used for an additional sort and will stripped from the 
# output when 'isLeadingSort=1'
#
# parameter:
#       path:           char    path for the input file
#       outPath:        char    path for the output files
#       isLeadingSort   int     use the 2nd of 3rd element as output data
#       isdbg           int     enable debug prints
"""

# Just use the cmd at the moment for test
path= sys.argv[1]
outPath = sys.argv[2]
isLeadingSort = int(sys.argv[3])
isdbg = int(sys.argv[4])

#outPath = os.getcwd()
#isLeadingSort = 0
#isdbg = 0

# define all the functions up front

def printStr(str):
    """ print when the debug option is set """
    if isdbg:
        print (str)

def testPath(path):
    """raise an exception if we cant find the path or file"""
    if not os.path.exists(path):
        raise Exception ('File not found: ' + path )
        return false

#
# This is where we start
#
# check that the paths exist or raise an exception

testPath(path)
testPath(outPath)

printStr ('paths ok')

#init
arline = []
fnameOut = chr(1) # init the output filename
line=object()
fOut=object()

# open the input file for reading and process though in a loop
with open(path,'r') as f:
    for line in f:
        printStr( 'for line in f: ' )

        if isLeadingSort:
            wrds=2
        else:
            wrds=1
        arLine = re.split('[ \n]+',line,wrds)
        newFname = arLine[0]
        outLine = arLine[len(arLine)-1]

        if newFname == fnameOut:
            printStr ('writing to open file: ' + fnameOut)  
        else:
            fnameOut = newFname
            printStr ('opennextfile: ' + fnameOut + '- closing: ' + str(fOut) )
            try:
                fOut.close()
            except:
                pass

            if fnameOut in ('' , '\n'):
                raise Exception ('Filename is not the first element of the data: '  ) 
            fOut = open(os.path.join(outPath,fnameOut),'w') # open new

        #write
        fOut.write(outLine)

    try:
        fOut.close()
    except:
        pass

print ( 'timediff : ' + str(time() - t)) 
```

# c# - 在 foreach 循环中更改对象的属性

> ID：15729753
> 
> 赞同：0
> 
> 时间：2013-03-31T13:17:28.523
> 
> 标签：c#, class, object, dynamic, foreach

我的课

```
class person
{
    public string name;
    public string age;
    public string height;
    public string weight;
} 
```

这就是我想做的...

```
person john = new person();
int i=0;

List<string> myList = new List<string>() { "John", "22", "174cms" ,"60kgs"};  
foreach(property in john)
{
    property = myList[i].toString();
    i++;
} 
```

我该怎么做呢？或者我真的可以这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T13:22:22.263

不，你不能，反正不容易。这通常使用对象初始化器来完成，这样可以省去多次写出变量名的麻烦。

```
person john = new person
{
    name = "John",
    age = "22",
    height = "174cms",
    weight = "60kgs"
}; 
```

[你可以用反射](http://msdn.microsoft.com/en-us/library/ms173183%28v=vs.80%29.aspx)做这样的事情，但你会失去类型安全性，因为你会为`i`第 th 索引分配一个值，而且我不太确定提取它们时属性的顺序是什么。反射是 C# 中一个相当高级（并且有潜在危险）的部分，您可能应该远离它，直到您真正需要它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T13:28:42.353

你看过这些帖子吗？

[如何获取类的属性列表？](https://stackoverflow.com/questions/737151/how-to-get-the-list-of-properties-of-class)

[使用反射获取属性的字符串名称](https://stackoverflow.com/questions/3661824/get-string-name-of-property-using-reflection)

我希望这可以帮助你。可能不是列表，您可以使用数据表并将每列命名为类中每个属性的名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T13:23:49.600

您可以尝试使用反射来做到这一点，例如

`john.GetType().GetProperties();`

但是——不要这样做！考虑更改您的实现以使其以更好的方式实现。
例如 - 如果您应该以这种方式使用带有人员详细信息的列表，并且 myList 属性始终以相同的顺序出现 - 更新 john 特定属性，例如：

```
john.name = myList[0];
.. 
```

但我建议重新设计您的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T13:25:34.397

您可以[`Type.GetProperties`](http://msdn.microsoft.com/en-us/library/kyaxdd3x.aspx)用于检索属性

```
PropertyInfo[] info = john.GetType().GetProperties(); 
```

不幸的是，手册说

> **备注**
> GetProperties 方法不按特定顺序返回属性，例如字母顺序或声明顺序。您的代码不得依赖于返回属性的顺序，因为该顺序会有所不同。

所以你仍然必须手动匹配`info`。`myList`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-31T13:30:00.513

那样做的路还很长。如果您知道您的列表将始终采用这种格式，请执行类似的操作。

```
var john = new person 
{
    name = myList[0],
    age = myList[1],
    height = myList[2],
    weight = myList[3]
} 
```

# c++ - 带位移运算的符号扩展

> ID：15729765
> 
> 赞同：6
> 
> 时间：2013-03-31T13:19:39.483
> 
> 标签：c++, c, bit-manipulation

在[这个](https://stackoverflow.com/questions/11227809/why-is-processing-a-sorted-array-faster-than-an-unsorted-array)问答之后，我试图检查答案，所以我写道：

```
#include <stdio.h>

int main ()
{

        int t;int i;
        for (i=120;i<140;i++){
                t = (i - 128) >> 31;
                printf ("t = %X , i-128 = %X ,  ~t & i = %X , ~t = %X \n", t, i-128 , (~t &i), ~t);
        }

        return 0;
} 
```

输出是：

```
t = FFFFFFFF , i-128 = FFFFFFF8 ,  ~t & i = 0 , ~t = 0 
t = FFFFFFFF , i-128 = FFFFFFF9 ,  ~t & i = 0 , ~t = 0 
t = FFFFFFFF , i-128 = FFFFFFFA ,  ~t & i = 0 , ~t = 0 
t = FFFFFFFF , i-128 = FFFFFFFB ,  ~t & i = 0 , ~t = 0 
t = FFFFFFFF , i-128 = FFFFFFFC ,  ~t & i = 0 , ~t = 0 
t = FFFFFFFF , i-128 = FFFFFFFD ,  ~t & i = 0 , ~t = 0 
t = FFFFFFFF , i-128 = FFFFFFFE ,  ~t & i = 0 , ~t = 0 
t = FFFFFFFF , i-128 = FFFFFFFF ,  ~t & i = 0 , ~t = 0 
t = 0 , i-128 = 0 ,  ~t & i = 80 , ~t = FFFFFFFF 
t = 0 , i-128 = 1 ,  ~t & i = 81 , ~t = FFFFFFFF 
t = 0 , i-128 = 2 ,  ~t & i = 82 , ~t = FFFFFFFF 
t = 0 , i-128 = 3 ,  ~t & i = 83 , ~t = FFFFFFFF 
t = 0 , i-128 = 4 ,  ~t & i = 84 , ~t = FFFFFFFF 
t = 0 , i-128 = 5 ,  ~t & i = 85 , ~t = FFFFFFFF 
t = 0 , i-128 = 6 ,  ~t & i = 86 , ~t = FFFFFFFF 
t = 0 , i-128 = 7 ,  ~t & i = 87 , ~t = FFFFFFFF 
t = 0 , i-128 = 8 ,  ~t & i = 88 , ~t = FFFFFFFF 
t = 0 , i-128 = 9 ,  ~t & i = 89 , ~t = FFFFFFFF 
t = 0 , i-128 = A ,  ~t & i = 8A , ~t = FFFFFFFF 
t = 0 , i-128 = B ,  ~t & i = 8B , ~t = FFFFFFFF 
```

如果声明为整数，为什么`~t`任何负数都是？`-1 == 0xFFFFFFFF``t`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T13:48:18.757

> 为什么 t = (i - 128) >> 31 为每个数字给出零或-1？

当一个非负 32 位整数右移 31 个位置时，所有非零位都被移出，最高有效位被 0 填充，所以你最终得到 0。

通常，当一个负的 32 位整数右移 31 个位置时，最高有效位不会用 0 填充，而是设置为数字的符号，因此符号会传播到所有位和 2 的补码表示所有设置为 1 的位等于 -1。最终效果就像您反复将数字除以 2，但稍有扭曲......结果向 -infinity 而不是向 0 四舍五入。例如`-2>>1==-1`but`-3>>1==-2`和`-5>>1==-3`。这称为*算术右移*。

当我说“通常”时，我的意思是 C 标准允许负值右移的几种不同行为。最重要的是，它允许有符号整数的非 2 补码表示。然而，通常你有 2 的补码表示和我在上面展示/解释的行为。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-31T15:00:27.543

来自：[在 C 中右移负数](https://stackoverflow.com/questions/1857928/right-shifting-negative-numbers-in-c)

**编辑：** 根据最新[草案标准](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1336.pdf)的第 6.5.7 节，负数的这种行为取决于实现：

> E1 >> E2 的结果是 E1 右移 E2 位位置。如果 E1 具有无符号类型或 E1 具有有符号类型和非负值，则结果的值是 E1 / 2 ^(E2)的商的整数部分。如果 E1 具有带符号类型和负值，则结果值是实现定义的。

而且，您的实现可能正在使用二进制补码数进行算术移位

* * *

运算符`>>`作为有 **符号右移**或**算术右移**，将所有位右移指定次数。重要的是`>>` 在移位后将最左边的符号位（Most Significant Bit MSB）填充到最左边的位。这称为*符号扩展*，用于在您向右移动负数时 *保留负数的符号。*

下面是我的图解表示，并带有一个示例来说明它是如何工作的（一个字节）：
示例：

```
i = -5 >> 3;  shift bits right three time 
```

五的补码形式是`1111 1011` 内存表示：

```
 MSB
+----+----+----+---+---+---+---+---+
|  1 |  1 | 1  | 1 | 1 | 0 | 1 | 1 |   
+----+----+----+---+---+---+---+---+
   7    6   5    4   3   2   1   0  
  ^  This seventh, the left most bit is SIGN bit 
```

下面是，如何`>>`工作？当你这样做`-5 >> 3`

```
 this 3 bits are shifted 
                         out and loss
 MSB                   (___________)      
+----+----+----+---+---+---+---+---+
|  1 |  1 | 1  | 1 | 1 | 0 | 1 | 1 |   
+----+----+----+---+---+---+---+---+
  | \                 \  
  |  ------------|     ----------|
  |              |               |
  ▼              ▼               ▼
+----+----+----+---+---+---+---+---+
|  1 |  1 | 1  | 1 | 1 | 1 | 1 | 1 |
+----+----+----+---+---+---+---+---+
(______________)
 The sign is        
 propagated 
```

注意：最左边的三位是一位，因为在每个移位符号位都被保留并且每个位也是正确的。我写*了符号被传播*，因为所有这三位都是因为符号（而不是数据）。

**[ANSWER]**
在你的输出中

**前八行**

```
 ~t is 0
==>    t is FFFFFFFF 
==>    t is -1 
```

（注意：*-1 的 2 的补码是`FFFFFFFF`，因为`1 = 00000001`1 的 1 的补码是`FFFFFFFE`，并且 2 的补码 = 1 的补码 + 1 即：`FFFFFFFE`+ `00000001`= `FFFFFFFF`*）

所以`t`总是`-1`在循环中的前八次被评估。**是**的，如何？

在 for 循环中

```
for (i=120;i<140;i++){
     t = (i - 128) >> 31; 
```

`i`前八次的值是所有`i = 120, 121, 122, 123, 124, 125, 126 ,127`八个值都*小于 128*。所以返回 `(i - 128) = -8, -7, -6, -5, -4, -3, -2, -1`. 因此在前八次表达式中 `t = (i - 128) >> 31`右移一个负数。

```
t =   (i - 128)  >> 31
t =  -ve number  >> 31 
```

因为在您的系统中 int 是 4 字节 = 32 位，所以大多数`31`位都是移出和丢失的，并且*由于`1`负数的符号位的传播，所有位的值都变为`1`*. （正如我在上图中显示的一个字节）

所以拳头八次：

```
 t =  -ve number  >> 31 ==  -1 
    t = -1
  and this gives 
    ~t = 0 
```

因此，对于〜t，拳头八次的输出为0。

**对于剩余的最后一行**

```
 ~t is FFFFFFFF
==>   ~t is -1   
==>    t is 0 
```

对于剩余的最后一行，在 for 循环中

```
for (i=120;i<140;i++){
     t = (i - 128) >> 31; 
```

i 值均`128, 129, 130, 132, 133, 134, 135, 136, 137, 138, 139,` *大于或等于*128。符号位为`0`。

所以 (i - 128) 对于剩余的最后一行是`>=0`并且对于所有这些 MSB 符号位 = `0`。并且因为您再次将所有位右移 31 次，除了然后叹息位移出和符号位`0`传播并填充所有位，`0`幅度变为`0`.

我认为如果我也写一个正数的例子会很好。所以我们举个例子 `5 >> 3`五是一字节是`0000 0101`

```
 this 3 bits are shifted 
                         out and loss
 MSB                   (___________)      
+----+----+----+---+---+---+---+---+
|  0 |  0 | 0  | 0 | 0 | 1 | 0 | 1 |   
+----+----+----+---+---+---+---+---+
  | \                 \  
  |  ------------|     ----------|
  |              |               |
  ▼              ▼               ▼
+----+----+----+---+---+---+---+---+
|  0 |  0 | 0  | 0 | 0 | 0 | 0 | 0 |
+----+----+----+---+---+---+---+---+
(______________)
 The sign is        
 propagated 
```

再看看我写*的符号是传播的*，所以最左边的三个零是由于符号位。

所以这就是运算符有`>>` **符号右移**所做的，并**保留**左操作数的符号。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-31T13:29:06.427

因为`t`是 0 或 -1，所以 ~t 也总是 -1 或 0。

这是由于（实现定义的）行为 or `(i - 128) >> 31`，它本质上复制了 (i-128) 的最高位 [假设 32 位整数]。如果`i`大于 128，它将导致最高位为零。如果`i`小于 128，则结果为负，因此设置了最高位。

由于`~t`是“与”相反的所有位，因此如果为零`t`，您可以期望它`t`始终为 0xffffffff 。`t`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-31T14:30:41.210

`>>`运算符右移在大多数编译器中是算术右移，意思是除以 2 。

所以，如果，例如`int i ==-4`(0xfffffffc)，那么`i>>1 == -2`(0xffffffffe)。

话虽如此，我建议您检查代码的汇编。
例如 x86 有 2 条单独的指令 - `shr`& `sar`，分别表示逻辑移位和算术移位。
通常，编译器对无符号变量使用`shr`（逻辑移位），对有符号变量使用`sar`（算术移位）。

* * *

下面是生成的 C 代码和相应的程序集`gcc -S`：

交流：

```
int x=10;
unsigned int y=10;

int main(){
    unsigned int z=(x>>1)+(y>>1);
    return 0;
} 
```

作为：

```
 .file   "a.c"
.globl x
    .data
    .align 4
    .type   x, @object
    .size   x, 4
x:
    .long   10
.globl y
    .align 4
    .type   y, @object
    .size   y, 4
y:
    .long   10
    .text
.globl main
    .type   main, @function
main:
    pushl   %ebp
    movl    %esp, %ebp
    subl    $16, %esp
    movl    x, %eax
    sarl    %eax ; <~~~~~~~~~~~~~~~~ Arithmetic shift, for signed int
    movl    y, %edx
    shrl    %edx ; <~~~~~~~~~~~~~~~~ Logical shift, for unsigned int
    addl    %edx, %eax
    movl    %eax, -4(%ebp)
    movl    $0, %eax
    leave
    ret
    .size   main, .-main
    .ident  "GCC: (Ubuntu/Linaro 4.5.2-8ubuntu4) 4.5.2"
    .section    .note.GNU-stack,"",@progbits 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-31T19:43:54.893

C 和 C++ 中的规则是负值右移的结果是实现定义的。因此，请阅读编译器的文档。您得到的各种解释都是有效的方法，但语言定义没有强制要求这些方法。

# android - 应用程序在模拟器上运行良好，但在 android 设备上无法运行

> ID：15729768
> 
> 赞同：0
> 
> 时间：2013-03-31T13:20:03.403
> 
> 标签：android, android-emulator, client-server, wifi

我正在开发一个简单的客户端服务器登录应用程序。该应用程序在模拟器上运行良好，但是当我从手机运行该应用程序时它不起作用。我还添加了`<uses-permission android:name="android.permission.INTERNET"/>` 通过 wifi 连接我的 android 手机的权限，并通过 ping 我的服务器测试了与终端模拟器应用程序的连接性。

```
URL = "http://192.168.1.2:8084/AndroidServlet/AndroidServlet?name="+name+"&pass="+pass; 
```

这是我用来连接服务器的 URL，192.168.1.2 是我机器的 IP 地址。

```
public class SimServletActivity extends Activity implements OnClickListener{
Button button;
String name,pass;
EditText us_id,us_password;
public String URL = "http://192.168.1.1:8084/AndroidServlet/AndroidServlet?name="+name+"&pass="+pass;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.login);
    findViewsById();
    button.setOnClickListener(this);
}

private void findViewsById() {
    button = (Button) findViewById(R.id.btnLogin);
    us_id=(EditText) findViewById(R.id.loginid);
    us_password=(EditText) findViewById(R.id.password);
}
public void getDetails(){
     name=us_id.getText().toString();
     pass=us_password.getText().toString();
     URL = "http://192.168.1.1:8084/AndroidServlet/AndroidServlet?name="+name+"&pass="+pass;
}

public void onClick(View view) {
    getDetails();
    GetXMLTask task = new GetXMLTask();
    task.execute(new String[] { URL });
}

private class GetXMLTask extends AsyncTask<String, Void, String> {
    @Override
    protected String doInBackground(String... urls) {
        String output = null;
        for (String url : urls) {
            output = getOutputFromUrl(url);
        }
        return output;
    }

    private String getOutputFromUrl(String url) {
        String output = null;
        try {
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpGet httpGet = new HttpGet(url);

            HttpResponse httpResponse = httpClient.execute(httpGet);
            HttpEntity httpEntity = httpResponse.getEntity();
            output = EntityUtils.toString(httpEntity);
        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return output;
    }

    @Override
    protected void onPostExecute(String output) {

        if(output.equals("true"))
        {
            Intent i=new Intent(SimServletActivity.this, NextActivity.class);
            startActivity(i);
        }
        else{
            Toast.makeText(SimServletActivity.this, "Enter correct Details",Toast.LENGTH_LONG).show();
        }

    }
} 
```

}

任何帮助表示赞赏。提前致谢。

LogCat 详细信息是`E/AndroidRuntime(26414): FATAL EXCEPTION: main E/AndroidRuntime(26414): java.lang.NullPointerException E/AndroidRuntime(26414): at com.eg.simpleservlet.SimServletActivity$GetXMLTask.onPostExecute(SimServletActivity.java:88) E/AndroidRuntime(26414): at com.eg.simpleservlet.SimServletActivity$GetXMLTask.onPostExecute(SimServletActivity.java:1) E/AndroidRuntime(26414): at android.os.AsyncTask.finish(AsyncTask.java:417) E/AndroidRuntime(26414): at android.os.AsyncTask.access$300(AsyncTask.java:127) E/AndroidRuntime(26414): at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429) E/AndroidRuntime(26414): at android.os.Handler.dispatchMessage(Handler.java:99) E/AndroidRuntime(26414): at android.os.Looper.loop(Looper.java:130) E/AndroidRuntime(26414): at android.app.ActivityThread.main(ActivityThread.java:3687) E/AndroidRuntime(26414): at java.lang.reflect.Method.invokeNative(Native Method) E/AndroidRuntime(26414): at java.lang.reflect.Method.invoke(Method.java:507) E/AndroidRuntime(26414): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867) E/AndroidRuntime(26414): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625) E/AndroidRuntime(26414): at dalvik.system.NativeStart.main(Native Method)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T18:21:30.443

如果您的网站返回空字符串，

```
if(output.equals("true")) 
```

会像你描述的那样失败。你可以使用

```
if ((output!=null) && output.equals("true")) 
```

反而。

# sql-server - SQL Server 中的 Killing 进程权限是否只能分配给 1 个用户用于 1 个数据库？

> ID：15729769
> 
> 赞同：0
> 
> 时间：2013-03-31T13:20:43.770
> 
> 标签：sql-server, privileges, kill-process

我不知道如何使用 SQL Server 中的权限管理。我有一个为我提供 SQL Server 数据库的主机。如果出现任何类型的问题 - `an object is blocked`- 我需要创建票证，报告我需要终止阻止该对象的进程并等待管理员执行操作。

我没有权限杀死进程。我不需要等待太多，但为了快速响应此类问题，我想自己做。

问题：

是否有可能以某种方式分配终止权限，以便我的用户只能终止附加到我拥有的数据库的进程？

如果这是可能的，很高兴知道这是如何工作的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T14:32:25.427

技术答案：是的，这是可能的。它看起来像这样：

*   所有这些都将进入一个存储过程。它可能应该有一个论点：杀死的过程。
*   弄清楚进程在哪个数据库中运行（看看 sp_who2 是如何作为 IIRC 执行的，在 SQL 2012 之前没有一个“官方”系统 DMV 公开这个）
*   该进程数据库上下文是否与您拥有的数据库上下文匹配？如果是，允许杀戮。如果没有，不要。

现在 proc 已经编写好了，您需要具有 sysadmin 权限的人对过程进行加密签名。这为程序提供了神奇的力量，使其能够做强大的事情（比如杀死一个进程）。

现实世界的答案：如果您的托管公司不愿意考虑，以上都不重要。他们可能会也可能不会。

# android - Android TextView 小部件中的布局重力

> ID：15729772
> 
> 赞同：0
> 
> 时间：2013-03-31T13:21:22.067
> 
> 标签：android, android-layout, android-widget

我正在尝试做一些非常简单的事情：在屏幕中间创建一个标签。但是我尝试了 layout_gravity 的每种组合，但它不起作用。文本“我的酷应用程序”始终位于屏幕右侧。我希望它在中心。这是 main.xml 中执行标签的部分：

```
<LinearLayout
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal">

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="My Cool Apps"
        android:layout_gravity="center_horizontal"/>

</LinearLayout> 
```

有人能帮忙吗？为什么以上不起作用，我怎样才能使它起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T13:30:13.947

试试这个：

```
<LinearLayout
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="My Cool Apps"
        android:layout_gravity="center"/>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T13:30:17.533

尝试使用RelativeLayout

```
<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="My Cool Apps"
        android:layout_centerInParent="true" />
</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T13:40:24.333

您可以尝试使用以下代码更改您的代码：

```
<FrameLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent">

<EditText
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center"
    android:text="My Cool Apps" >
</EditText> 
```

我希望你的问题得到解决。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-31T13:47:55.583

试试这个你会得到它。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal"
android:gravity="center" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Large Text"
    android:textAppearance="?android:attr/textAppearanceLarge" />

</LinearLayout> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T13:08:17.330

Layout_gravity 将用于视图，edittext.gravity 将用于布局。

# c#-4.0 - 如何等待事件完成 - 不使用 Wait() 方法？

> ID：15729775
> 
> 赞同：0
> 
> 时间：2013-03-31T13:22:01.603
> 
> 标签：c#-4.0

我正在开发一个应用程序，在该应用程序中我需要等待事件完成，然后再提出新请求。例如：- 如果有人单击记录处理应用程序中的中止按钮，我需要确保该应用程序仅在当前记录的处理完成时才存在。我没有在我的应用程序中使用线程。

我的问题是我们可以通过哪些有效方法来实现它？示例代码将有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T13:25:24.653

我不确定，但如果您没有在后台使用任何类型的异步处理（无论如何，不​​仅仅是普通线程），那么您的应用程序关闭将被推迟到当前处理完成。

所以这种行为是你开箱即用的。

# java - Servlet从tomcat 7中的多部分表单获取参数

> ID：15729777
> 
> 赞同：16
> 
> 时间：2013-03-31T13:22:06.023
> 
> 标签：java, jsp, tomcat, servlets, getparameter

制作项目并需要文件上传。所以，我正在使用 enctype="multipart/form-data" 通知。

但我无法解析请求中的参数。我也试过 getPart 但它返回空白字符串。

Servlet 代码 -->

```
import java.io.File;
import java.io.IOException;
import java.io.PrintWriter;
import java.util.List;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.apache.commons.fileupload.FileItem;
import org.apache.commons.fileupload.disk.DiskFileItemFactory;
import org.apache.commons.fileupload.servlet.ServletFileUpload;

public class upload_wall extends HttpServlet {
    private static final long serialVersionUID = 1L;
    // location to store file uploaded
    private static final String UPLOAD_DIRECTORY = "image_upload";
    // upload settings
    private static final int MEMORY_THRESHOLD = 1024 * 1024 * 3;  // 3MB
    private static final int MAX_FILE_SIZE = 1024 * 1024 * 40; // 40MB
    private static final int MAX_REQUEST_SIZE = 1024 * 1024 * 50; // 50MB

    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        response.setContentType("text/html");
        PrintWriter out = response.getWriter();

        // checks if the request actually contains upload file
        if (!ServletFileUpload.isMultipartContent(request)) {
            // if not, we stop here
            PrintWriter writer = response.getWriter();
            writer.println("Error: Form must has enctype=multipart/form-data.");
            writer.flush();
            return;
        }

        // configures upload settings
        DiskFileItemFactory factory = new DiskFileItemFactory();
        // sets memory threshold - beyond which files are stored in disk
        factory.setSizeThreshold(MEMORY_THRESHOLD);
        // sets temporary location to store files
        factory.setRepository(new File(System.getProperty("java.io.tmpdir")));

        ServletFileUpload upload = new ServletFileUpload(factory);

        // sets maximum size of upload file
        upload.setFileSizeMax(MAX_FILE_SIZE);

        // sets maximum size of request (include file + form data)
        upload.setSizeMax(MAX_REQUEST_SIZE);

        // constructs the directory path to store upload file
        // this path is relative to application's directory
        String uploadPath = getServletContext().getRealPath("") + File.separator + UPLOAD_DIRECTORY;

        // creates the directory if it does not exist
        File uploadDir = new File(uploadPath);
        if (!uploadDir.exists()) {
            uploadDir.mkdir();
        }

        try {
            @SuppressWarnings("unchecked")
            List<FileItem> formItems = upload.parseRequest(request);
            String fileName1 = "";
            if (formItems != null && formItems.size() > 0) {
                for (FileItem item : formItems) {
                    // processes only fields that are not form fields
                    if (!item.isFormField()) {
                        String fileName = new File(item.getName()).getName();
                        fileName1 += fileName;
                        String filePath = uploadPath + File.separator + fileName;
                        File storeFile = new File(filePath);
                        // saves the file on disk
                        item.write(storeFile);
                    }
                }
            }
            String p_text = request.getParameter("p_data");
            String gallery_nm = request.getParameter("upload_wall_gallery");
            out.println(p_text);
            out.println(gallery_nm);
            //out.println("Upload has been done successfully!"+fileName1);
        } catch (Exception ex) {
            out.println(ex.getMessage());
        }

    }

} 
```

我无法在 net 或 stackoverflow 上找到工作示例。

有什么简单的解决办法吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-31T13:32:32.367

问题在这里：

```
String p_text = request.getParameter("p_data");
String gallery_nm = request.getParameter("upload_wall_gallery"); 
```

从[如何使用 JSP/Servlet 将文件上传到服务器？回答](https://stackoverflow.com/a/2424824/1065197)，你应该得到你的参数作为`FileItem`哪些`isFormField()`方法返回`true`。从答案中发布相关代码片段：

```
for (FileItem item : formItems) {
    if (item.isFormField()) {
        // Process regular form field (input type="text|radio|checkbox|etc", select, etc).
        String fieldname = item.getFieldName();
        String fieldvalue = item.getString();
        // ... (do your job here)
    } else {
        // Process form file field (input type="file").
        String fieldname = item.getFieldName();
        String filename = FilenameUtils.getName(item.getName());
        InputStream filecontent = item.getInputStream();
        // ... (do your job here)
    }
} 
```

解决方案：在调用时将您的其他请求参数处理移至该`else`部分`if (!item.isFormField())`。

```
for (FileItem item : formItems) {
    // processes only fields that are not form fields
    if (!item.isFormField()) {
        String fileName = new File(item.getName()).getName();
        fileName1+=fileName;
        String filePath = uploadPath + File.separator + fileName;
        File storeFile = new File(filePath);
        // saves the file on disk
        item.write(storeFile);
    } else {
        //here...
        String fieldname = item.getFieldName();
        String fieldvalue = item.getString();
        if (fieldname.equals("p_data")) {
            //logic goes here...
        } else if (fieldname.equals("upload_wall_gallery")) {
            //next logic goes here...
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-31T13:32:51.920

由于它是一种`multipart/form-data`形式，因此调用`request.getParameter()`将始终返回 null。在这种情况下，您要做的是

```
 if (item.isFormField()) {
     System.out.println("Got a form field: " + item.getFieldName()+ " " +item.getString());
 } else {
     // it is a file process, the way you are doing it
 } 
```

我希望每件事都能正常工作。

# python - 解析latex的一个简单扩展：语法、递归下降、pyParsing？

> ID：15729778
> 
> 赞同：1
> 
> 时间：2013-03-31T13:22:07.340
> 
> 标签：python, parsing, grammar, pyparsing, recursive-descent

我想做一个小的乳胶语法扩展。
有一些纯乳胶方法可以避免这种解析练习，我知道它们。
这个问题的目标是解决下面的解析问题。

```
If \ep is small                    --> If \epsilon is small  

\theorem                           --> \begin{theorem}  
(tab) lorem ipsum                  --> (tab) lorem ipsum  
(tab) lorem ipsum                  --> (tab) lorem ipsum  
(no tab) Some text                 --> \end{theorem}  
                                       Some text 

A function \oldFunction{x}{y}      --> A function \newFunction{x}{y}

Some other text with latex construct like \frac{1}{2} (not part of the grammar) 
```

所以我有几个关键字，比如`ep`, `oldFunction`，我想转换成一个新的关键字。
它们可以嵌套。

```
\oldFunction{\ep}{\ep} 
```

我有一个“标签”一致的关键字，例如`theorem`，其中包含内容。
此选项卡包含 keyworks 可以嵌套。

```
\theorem  
(tab) \lemma  
(tab) (tab) \oldFunction{\ep}{\ep} 
```

此外，`\ep`和`\theorem`关键字可以混合使用，就像上一行一样。

然后，还有所有其他的乳胶结构，我不碰，就离开那里。

我研究了 pyParsing 和[codeTalker](http://jaredforsyth.com/projects/codetalker/)。
codeTalker 是上下文无关的语法，我不知道我的描述语法是不是上下文无关的。
pyParsing 可以做到，我查看了文档，但我不明白如何应用它。
这是我第一次遇到解析问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T16:35:07.483

看起来你可以完全不使用解析库。我在想：

```
newstuff = {r'\b\ep\b':r'\epsilon',r'\b\other\b':r'\notherthings'}
fixed = []
intheorem = False
for line in source:
    for k,v in newstuff:
        line = re.sub(k, v, line)
    if not line.startswith('\t') and intheorem:
        fixed.append('\end{theorem}')
        intheorem = False
    if line.startswith('\theorem')
        line = '\begin{theorem}'
        intheorem = True
    fixed.append(line)
if intheorem:
    fixed.append('\end{theorem}') 
```

那有意义吗？在每一行中，对所有特殊名称进行正则表达式替换，并跟踪特殊“\theorem”块的缩进。

# android - 为什么在使用 GONE 设置可见性并继续使用 VISIBLE 时，surfaceCreated 和 surfaceDestroyed 会调用多次？

> ID：15729782
> 
> 赞同：4
> 
> 时间：2013-03-31T13:22:15.057
> 
> 标签：android, surfaceview

我发现这段代码会导致surfaceCreated和surfaceDestroyed被多次调用：

```
mSurfaceView.setVisibility(View.GONE);
mSurfaceView.setVisibility(View.VISIBLE); 
```

谁能告诉我为什么surfaceCreated 和surfaceDestroyed 不只被调用一次？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T12:57:33.653

如果您在每个, ,方法中实现`SurfaceHolder.Callback`并放置一个记录器，您将看到这两行将生成以下输出：`surfaceDestroyed``surfaceCreated``surfaceChanged`

```
04-01 12:50:54.688: INFO/app(4842): SurfaceView destroyed!
04-01 12:50:54.688: INFO/app(4842): SurfaceView created!
04-01 12:50:54.718: INFO/app(4842): SurfaceView changed! 
```

在调用 之前和之后使用两个断点`setVisibility`，只需确保不计算其他日志。

# java - android从外部UI线程更新imageview

> ID：15729785
> 
> 赞同：2
> 
> 时间：2013-03-31T13:22:33.420
> 
> 标签：java, android, multithreading, tcp, android-ui

我正在尝试侦听将图片发送到我的 android 的连接，然后将此图像设置为图像视图。

该过程应自动完成以模拟推送内容行为。

此代码在 TCPConHandler 类中

```
public void listenForIncomingImageFlag() {
        new Thread(new Runnable() {

            @Override
            public void run() {
                try {
                    FlagScan = new Scanner(mySocket.getInputStream());
                    while (true) {
                        Flag = FlagScan.nextInt();
                        Log.d("FLagImage", "Flag ="+Flag);
                        if (Flag == 1) {
                            listenForIncomingImage(true);
                            Flag = 0;
                        }

                    }
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            }
        }).start();

    } 
```

只要运行 tcp 连接的线程返回一个套接字，就会调用这个函数。然后它启动另一个函数listenForIncomingImage。

```
public void listenForIncomingImage(boolean b) {
        check = b;
        Thread InComImage = new Thread(new Runnable() {
            @Override
            public void run() {
                try {
                    inComImageBitmap = BitmapFactory.decodeStream(mySocket
                            .getInputStream());
                    MainActivity.setImage(inComImageBitmap, true);
                    check = false;
                    Log.d("Bitmap", "Bitmap receviced and sent to method");
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            }
        });
        InComImage.start();

    } 
```

现在的事情是将图像传递给 mainactivity 中的 imageUpdate 函数，如果我使用的是 runOnUiThread，我会收到调用非静态方法的错误。

```
public void imageUpdate() {
        new Thread(new Runnable() {
            @Override
            public void run() {
                while (true) {
                    runOnUiThread(new Runnable() {
                        public void run() {
                            while(imageCheck == true){
                            myImage.setImageBitmap(finalImage);
                            imageCheck = false;}

                        }
                    });
                }
            }
        }).start();
    } 
```

所以我必须在 mainactivity 时启动这个线程，并在接收位图时使用从 tcpConHandler 类发送的 imagecheck 布尔值以某种方式阻止它。

这样做会导致应用程序超载内存并崩溃是否有更好的方法来模拟 android 上的推送内容行为。

无论如何，在 mainactivity 上是否有一个函数，它运行一个带有 while(true) 块的线程，可以更新 ui 并且可以是静态的？. 或任何类似的实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T13:44:27.143

> 如果我使用 runOnUiThread 调用非静态方法时出现错误

因为您需要发送`MainActivity`上下文以从非活动类`tcpConHandler`访问，而不是以静态方式调用。`runOnUiThread``runOnUiThread`

创建一个`tcpConHandler`构造函数来传递 Activity 上下文：

```
public class TcpConHandler{
Activity activity;

public TcpConHandler(Activity activity){
 this.activity=activity;
}
//...your code here..
public void imageUpdate() {
//...your code here...
     activity.runOnUiThread(new Runnable() {
       public void run() {
              // update imageView here...
          }
      });
} 
```

通过发送活动实例从 MainActivity 创建 TcpConHandler 对象；

```
TcpConHandler tchConhandler=new TcpConHandler(this); 
```

# asp.net - IE 10 不显示文本框的宽度和高度

> ID：15729786
> 
> 赞同：3
> 
> 时间：2013-03-31T13:22:38.910
> 
> 标签：asp.net, c#-4.0, iis-7.5, internet-explorer-10

我有一个带有 Width 和 Height 属性的简单 TextBox：

```
<asp:TextBox ID="TextBox1" Width="400" Height="100" runat="server" /> 
```

本地 IE 10 确实在 Cassini 和 IIS 7.5 中正确显示了 TextBox。在服务器上发布 IE 10 会忽略属性（IE 9 及更低版本都可以）。web.configs 是相同的。

IIS 中是否有设置或其他设置，我可以在其中更改此行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:07:21.367

根据 Scott Hanselman 的说法，ASP.NET 4.0 和 2.0 无法识别 IE 10 并导致各种破坏。我和你有同样的问题，升级到 .NET 4.5 对我有用，但如果你不想升级，Scott 有其他修复。

[http://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx](http://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx)

# c++ - 如何在 C++ 中释放指向结构的指针数组？

> ID：15729787
> 
> 赞同：2
> 
> 时间：2013-03-31T13:22:48.730
> 
> 标签：c++, memory-management, memory-leaks

我创建了实现指向结构的指针数组的类...我知道如何将记录添加到这个数组，但我不知道如何正确删除它们，因此我有内存泄漏。我的数组的大小在需要时会增加，我知道数组的大小以及那里有多少记录。我习惯于用具有垃圾收集器的语言进行编码，所以这对我来说很困惑。如果你们中的任何人能告诉我如何正确释放该数组，我会很高兴。

请注意，我不能使用`vector`. 我仅限于包括以下内容：

```
#include <iostream>
#include <iomanip>
#include <string>
#include <cstring>
#include <cstdlib>
#include <cstdio> 
```

我的代码：

```
struct DbRecord
{
    string oName;
    string oAddr;
    string cName;
    string cAddr;
};

class CCompanyIndex
{
    public: CCompanyIndex(void);~CCompanyIndex(void);
    bool Add(const string & oName,
    const string & oAddr,
    const string & cName,
    const string & cAddr);
    bool Del(const string & oName,
    const string & oAddr);
    bool Search(const string & oName,
    const string & oAddr,
    string & cName,
    string & cAddr) const;

    int size;
    int position;
    DbRecord * * db;
};

CCompanyIndex::CCompanyIndex(void)
{
    db = new DbRecord * [1000];

    size = 1000;
    position = 0;
}

CCompanyIndex::~CCompanyIndex(void)
{
}

int main(int argc, char const * argv[])
{

    CCompanyIndex c1;
    // do something..with c1, i.e. add there some records to array
    // ...
    // ...
    // delete it now
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T13:36:01.777

经验法则是在析构函数中反转构造函数中与内存管理相关的操作。也就是说，既然你`db = new DbRecord * [1000];`在构造函数中有，你应该`delete[] db;`在析构函数中有 a 。

但是请注意，您很可能在这里不需要动态内存管理（使用按值语义），并且您可能希望研究 C++ 提供的更高级别的抽象，例如`vector`类 - 就像 AndyProwl 和 JamesKanze 建议的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T13:28:38.470

用于`std::vector`避免必须通过原始指针、`new[]`和手动管理内存`delete[]`。这样做（正如您所经历的那样）容易出错，并且很容易导致内存泄漏或未定义的行为。

`DbRecord`出于同样的原因，我还建议使用智能指针而不是原始指针来保存对对象的引用。您应该根据所需的所有权策略选择您的智能指针。在这里，我会假设`std::shared_ptr`是合适的。

但是请注意，如果您*不需要*引用语义，那么您根本不应该使用指针，而是将您的容器声明为`std::vector<DbRecord>`。在这里，我假设您确实需要引用语义，因为您的原始版本使用（原始）指针；但同样，如果你不这样做，不要使用指针。

因此，鉴于必要的`#include`指令和`using`声明：

```
#include <string>
#include <vector>
#include <memory>

using std::string;
using std::vector;
using std::shared_ptr; 
```

`DbRecord`以及数据结构的（未更改的）定义：

```
struct DbRecord {
    string oName;
    string oAddr;
    string cName;
    string cAddr;
}; 
```

您可以更改`CCompanyIndex`this 的定义（如您所见，用户定义的默认构造函数和析构函数现在是多余的，您可以让编译器隐式生成它们）：

```
class CCompanyIndex {
public:

//  No more need for a user-defined default constructor and destructor!

    bool Add(const string & oName,
            const string & oAddr,
            const string & cName,
            const string & cAddr);
    bool Del(const string & oName,
            const string & oAddr);
    bool Search(const string & oName,
            const string & oAddr,
            string & cName,
            string & cAddr) const;

    std::vector<std::shared_ptr<DbRecord>> db;
//  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
}; 
```

最后，请注意您不需要执行任何手动清理：

```
int main(int argc, char const *argv[])
{
    CCompanyIndex c1;
    // do something..with c1, i.e. add there some records to array
    // ...
    // ...

    // NO NEED TO MANUALLY DELETE IT NOW!
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T13:31:34.880

您不应该在这里进行任何内存管理。几乎没有任何理由使用新数组；只需使用 `std::vector`. 而且真的没有理由动态分配你的`DbRecord`; 因为它具有值语义：

```
std::vector<DbRecord> db; 
```

做得很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T13:35:44.133

您可以使用运算符`delete`和`delete[]`释放内存。例如，您可以在析构函数中释放内存，如下所示：

```
CCompanyIndex::~CCompanyIndex(void)
{
  // delete objects pointed-to in a loop. 
  // !! the objects MUST have been allocated, or the pointers MUST be set to null. 
  // note that 'delete' is null-safe. 
  for(DbRecord* it=db; it<db+position; ++it)
  {
    delete *it; 
  }

  // delete the array of pointers
  delete[] db;
} 
```

`delete`释放为单个对象分配的内存（通过`new`），而`delete[]`释放为对象数组分配的内存（通过`new[]`，如您的情况）。

*但*不要重新发明轮子 - 只需使用`std::vector<DbRecord*>`. 它为您进行内存管理，您的代码将更简单、更易读。C++ 提供了强大的标准库，让大多数程序员甚至不需要使用手动内存管理。

# mysql - MySQL 授予临时用户权限

> ID：15729799
> 
> 赞同：0
> 
> 时间：2013-03-31T13:24:19.570
> 
> 标签：mysql

我创建了一个临时用户，它将注册并且只能查看自己的信息。需要应用什么特权以及应用到什么级别？（对不起基本问题！）例如

```
GRANT SELECT ON userDetails.* TO 'tempAccount'@'localhost'; 
```

？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T15:44:01.823

根据您的需要和要求，您可以向用户授予权限。例如

```
GRANT SELECT,INSERT,UPDATE,DELETE ON my_db.* TO 'michael'@'localhost'; 
```

正如您在案例中使用了 select 一样，因此用户对所提供的数据库具有基本的读取权限。

在下面创建一个完整的用户使用..

```
grant all on *.* to 'username'@'%' identified by 'password' WITH GRANT OPTION; 
```

在这里，用户可以从所有 IP 地址访问所有数据库，并且使用授权选项将授权用户创建更多用户。

无论如何，您的方向是正确的。

# perl - 怀疑 Perl 缓冲问题

> ID：15729800
> 
> 赞同：-1
> 
> 时间：2013-03-31T13:24:22.333
> 
> 标签：perl, buffering

我认为我遇到了 Perl 缓冲问题，因为我需要读取和解析大文本文件（由我自己在前面的代码行中创建）以最终在另一个文件中打印内容。

在某些时候，在读取一个包含 90,855 行的文件和第二个文件的其他一些文件之后，脚本并没有完全读取文件的一行。

我计算了在发生这种情况之前读取的字符数：233,467，因此在读取文件的下一行之前尝试刷新缓冲区并休眠。它不起作用。

请问有什么建议吗？

这是我的代码：

```
foreach $i (@files) {

    my $buff = 0;

    print "Analyzing $i\n";
    sleep(1);
    $program = $1 if $i =~ /(\w+)_SITES/;

    open(FIL, $i) or die "$!: $i\n";
    while (<FIL>) {

        $buff += length($_);
        if ($buff >= 230000) {  #FLUSH THE BUFFER, NOT WORKING!!!
            $buff = 0;
            sleep(1);
            select((select(FIL), $| = 1)[0]);
        }

        undef($a);
        unless ($. == 1) {
            if ($o == 0) {
                if (/^\d+\t(\S+)\t(\S+)\t(\d+)\t(\d+)\t(\S+)\t(\S+)\t(.*)/) {
                    $mirna  = $1;
                    $target = $2;
                    $start  = $3;
                    $end    = $4;
                    $site   = $5;
                    $comp_p = $6;
                    $a      = $7;
                    $j      = "${mirna}_${target}_${start}_$end";
                    $site_nu{$j} = "$mirna\t$target\t$start\t$end\t$site\t$comp_p";    # Store each site in a hash
                }
                else {   #DIES HERE!!!
                  die "$buff characters, in line $.:$_\n"
                }
            }
            else {
                if (/^\d+\t(\S+)\t(\S+)\t(\d+)\t(\d+)\t(\S+)\t(.*)/) {
                    $mirna       = $1;
                    $target      = $2;
                    $start       = $3;
                    $end         = $4;
                    $site        = $5;
                    $a           = $6;
                    $j           = "${mirna}_${target}_${start}_$end";
                    $site_nu{$j} = "$mirna\t$target\t$start\t$end\t$site";    # Store each site in a hash
                }
            } 
```

它死在“死在这里！！” 死，在读取第二个文件的 3,413 个字符后。

发生这种情况是因为正则表达式不起作用，因为只有一半的行在 $_ 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T14:04:49.083

问题几乎可以肯定是因为数据不在要读取的文件中。

您说该文件是从代码的早期部分生成的。我怀疑你那里有缓冲*问题*。代码完成文件写入后，使用`close`将剩余数据刷新到文件中，我猜一切都会好起来的。

您应该检查`close`呼叫的成功状态，如下所示

```
close FILEHANDLE or die "Unable to close temporary file: $!"; 
```

除此之外，对如此少量的数据使用临时文件而不是简单地将其全部保存在内存中是否明智值得怀疑。此外：

*   您必须*始终* 使用尽可能接近它们的第一个使用点来`use strict`声明`use warnings`所有变量。`my`除非您选择在程序顶部声明所有内容（一个非常糟糕的主意），否则您还没有这样做

*   您对变量名称的选择是不稳定的。`$i`文件名？而`$o`对于 - 呃 - 什么？`$buff`会很好，只是它是一个名义缓冲区而不是缓冲区 istelf 的*大小*

*   您应该使用具有以下三参数形式的词法文件句柄`open`：`open my $fil, '<', $i or die "$!: $i";`

*   如果您使用`$|`正确，则使用它会更整洁，更易读，`FILE->autoflush`而不是交换所选文件句柄和设置的技巧`$|`。为此，您需要`use IO::Handle`在代码的开头执行此操作，除非您运行的是 Perl 5 版本 14 或更高版本，它按需加载`IO::File`（因此）`IO::Handle`

*   我认为一个简单的`split /\t/`会比你正在使用的正则表达式更好。`%site_nu`看起来像这样的数组散列会更好`$site_nu{$j} = [$mirna, $target, $start, $end, $site, $comp_p]`

*   将换行符放在`die`字符串的末尾会阻止 perl 显示有关源文件和数据文件以及行号的信息，这在您调试时可能很有用

*   你会做你自己，以及那些你寻求帮助的人，通过很好地格式化你的源代码来帮个忙。如果没有适当的缩进，很难分辨代码块的开始和结束位置

# html - HTML5 生成画布背景图片

> ID：15729805
> 
> 赞同：6
> 
> 时间：2013-03-31T13:24:48.430
> 
> 标签：html, canvas

我有这张我在 photoshop 中制作的图像，我想要一种使用 HTML5 Canvas 重新创建它的方法，以便 javascript 创建相同的图像（或类似的图像）。它会使页面加载更快，因为没有图像必须也可以下载。

这是一个非常简单的图像。三种不同的颜色模糊或放置为渐变（我不知道该怎么做），然后在可能 60px 后从底部淡出到透明的白色渐变。我已经看到使用画布元素实现了许多令人难以置信的事情，而且每次都是相同的图像，并且没有动画。我也希望它在窗口调整大小时自动缩放。

有人知道如何创建这样的东西吗？

![在此处输入图像描述](https://i.stack.imgur.com/5uvJN.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T13:58:07.580

从这里开始[http://jsfiddle.net/5pR46/1/](http://jsfiddle.net/5pR46/1/)：

**CSS**

```
#wrapper canvas {
    position: relative;
}

#wrapper canvas {
    border: 1px solid red;
    position: absolute;
    background-color: transparent;
} 
```

**HTML**

```
<div id="wrapper">
    <canvas id="myCanvas" width="578" height="200"></canvas>
    <canvas id="myCanvas2" width="578" height="200"></canvas>
</div> 
```

**JavaScript**

```
function drawRadial(elemId, startColor, endColor, x0, y0, r0, x1, y1, r1) {
    var canvas = document.getElementById(elemId);
    var context = canvas.getContext('2d');

    context.rect(0, 0, canvas.width, canvas.height);

    // create radial gradient
    var grd = context.createRadialGradient(x0, y0, r0, x1, y1, r1);
    grd.addColorStop(0, startColor);
    grd.addColorStop(1, endColor);

    context.fillStyle = grd;
    context.fill();

    delete canvas;
    delete context;
    delete grd;
}

drawRadial('myCanvas', 'rgba(248,173,133,1.0)', 'rgba(0,0,0,0.0)', 50, 25, 110, 300, 50, 400);
drawRadial('myCanvas2', 'rgba(213,215,155,1.0)', 'rgba(0,0,0,0.0)', 500, 150, 110, 500, 50, 600); 
```

您可以根据需要添加任意数量的图层。只需添加另一个；

```
<canvas id="myCanvas#" width="578" height="200"></canvas> 
```

..`#`你的层的新编号在哪里（将它们保持在正确的顺序以获得正确的结果。你甚至可以使用 JavaScript，只是从一个空开始，然后`#wrapper`用 -incremented ID 动态填充它`canvas`，然后绑定完整的绘图过程。为您提供超级干净的代码，同时保持对内容的控制。

玩弄坐标和径向线的大小，它很快就会像你想要的那样适合。我会把剩下的创意留给你；）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T14:20:00.667

你也可以尝试用老派的方法来做:-)

使用算法生成颜色数组

粉红色渐变的例子：

```
var colors = [];

for(var x=0;x<width;x++)
    for(var y=0;y<height;y++)
    {   var red = 0x6b+(x>>2)+(y>>2); if(red>0xff) red = 0xff;
        colors[y*width+x] = (red<<16)|(0x2b<<8)|0xc6;
    } 
```

并使用一些代码来提取每种颜色 r,g,b 以填充画布

```
while(i < size){
    color = colors[i]; // get color

    // extract r,g,b ...
    var r = (color>>16)&255;
    var g = (color>>8)&255;
    var b = color&255;

    // fill buffer with each color part
    buffer[n++] = r;
    buffer[n++] = g;
    buffer[n++] = b;
    buffer[n++] = 255; // alpha to max
    i++;
} 
```

小提琴：http: [//jsfiddle.net/r043v/FTuPC/9/](http://jsfiddle.net/r043v/FTuPC/9/)

# php - mongodb异常

> ID：15729810
> 
> 赞同：1
> 
> 时间：2013-03-31T13:25:43.010
> 
> 标签：php, mongodb, zend-framework2, doctrine-odm

我是 Mongodb 和 Doctrine 的新手。当我将数据传递给 Mongo 数据库时，我遇到了以下错误。

```
Failed to connect to: localhost:27017: Transport endpoint is not connected 
```

堆栈跟踪：

```
0 /home/anu/zf2-tutorial/vendor/doctrine/mongodb/lib/Doctrine/MongoDB/Connection.php(102): MongoClient->__construct('mongodb://root:...', Array)
#1 /home/anu/zf2-tutorial/vendor/doctrine/mongodb/lib/Doctrine/MongoDB/Connection.php(283): Doctrine\MongoDB\Connection->Doctrine\MongoDB\{closure}()
#2 /home/anu/zf2-tutorial/vendor/doctrine/mongodb/lib/Doctrine/MongoDB/Connection.php(103): Doctrine\MongoDB\Connection->retry(Object(Closure))
#3 /home/anu/zf2-tutorial/vendor/doctrine/mongodb/lib/Doctrine/MongoDB/Connection.php(251): Doctrine\MongoDB\Connection->initialize()
#4 /home/anu/zf2-tutorial/vendor/doctrine/mongodb-odm/lib/Doctrine/ODM/MongoDB/DocumentManager.php(310): Doctrine\MongoDB\Connection->selectDatabase('zf2tutorial')
#5 /home/anu/zf2-tutorial/vendor/doctrine/mongodb-odm/lib/Doctrine/ODM/MongoDB/DocumentManager.php(339): Doctrine\ODM\MongoDB\DocumentManager->getDocumentDatabase('Lesson\Document...')
#6 /home/anu/zf2-tutorial/vendor/doctrine/mongodb-odm/lib/Doctrine/ODM/MongoDB/Persisters/DocumentPersister.php(148): Doctrine\ODM\MongoDB\DocumentManager->getDocumentCollection('Lesson\Document...')
#7 /home/anu/zf2-tutorial/vendor/doctrine/mongodb-odm/lib/Doctrine/ODM/MongoDB/UnitOfWork.php(334): Doctrine\ODM\MongoDB\Persisters\DocumentPersister->__construct(Object(Doctrine\ODM\MongoDB\Persisters\PersistenceBuilder), Object(Doctrine\ODM\MongoDB\DocumentManager), Object(Doctrine\Common\EventManager), Object(Doctrine\ODM\MongoDB\UnitOfWork), Object(Doctrine\ODM\MongoDB\Hydrator\HydratorFactory), Object(Doctrine\ODM\MongoDB\Mapping\ClassMetadata), '$')
#8 /home/anu/zf2-tutorial/vendor/doctrine/mongodb-odm/lib/Doctrine/ODM/MongoDB/UnitOfWork.php(968): Doctrine\ODM\MongoDB\UnitOfWork->getDocumentPersister('Lesson\Document...')
#9 /home/anu/zf2-tutorial/vendor/doctrine/mongodb-odm/lib/Doctrine/ODM/MongoDB/UnitOfWork.php(432): Doctrine\ODM\MongoDB\UnitOfWork->executeInserts(Object(Doctrine\ODM\MongoDB\Mapping\ClassMetadata), Array)
#10 /home/anu/zf2-tutorial/vendor/doctrine/mongodb-odm/lib/Doctrine/ODM/MongoDB/DocumentManager.php(531): Doctrine\ODM\MongoDB\UnitOfWork->commit(NULL, Array)
#11 /home/anu/zf2-tutorial/module/Lesson/src/Lesson/Controller/LessonController.php(48): Doctrine\ODM\MongoDB\DocumentManager->flush()
#12 /home/anu/zf2-tutorial/vendor/zendframework/zendframework/library/Zend/Mvc/Controller/AbstractActionController.php(83): Lesson\Controller\LessonController->addAction()
#13 [internal function]: Zend\Mvc\Controller\AbstractActionController->onDispatch(Object(Zend\Mvc\MvcEvent))
#14 /home/anu/zf2-tutorial/vendor/zendframework/zendframework/library/Zend/EventManager/EventManager.php(460): call_user_func(Array, Object(Zend\Mvc\MvcEvent))
#15 /home/anu/zf2-tutorial/vendor/zendframework/zendframework/library/Zend/EventManager/EventManager.php(204): Zend\EventManager\EventManager->triggerListeners('dispatch', Object(Zend\Mvc\MvcEvent), Object(Closure))
#16 /home/anu/zf2-tutorial/vendor/zendframework/zendframework/library/Zend/Mvc/Controller/AbstractController.php(117): Zend\EventManager\EventManager->trigger('dispatch', Object(Zend\Mvc\MvcEvent), Object(Closure))
#17 /home/anu/zf2-tutorial/vendor/zendframework/zendframework/library/Zend/Mvc/DispatchListener.php(114): Zend\Mvc\Controller\AbstractController->dispatch(Object(Zend\Http\PhpEnvironment\Request), Object(Zend\Http\PhpEnvironment\Response))
#18 [internal function]: Zend\Mvc\DispatchListener->onDispatch(Object(Zend\Mvc\MvcEvent))
#19 /home/anu/zf2-tutorial/vendor/zendframework/zendframework/library/Zend/EventManager/EventManager.php(460): call_user_func(Array, Object(Zend\Mvc\MvcEvent))
#20 /home/anu/zf2-tutorial/vendor/zendframework/zendframework/library/Zend/EventManager/EventManager.php(204): Zend\EventManager\EventManager->triggerListeners('dispatch', Object(Zend\Mvc\MvcEvent), Object(Closure))
#21 /home/anu/zf2-tutorial/vendor/zendframework/zendframework/library/Zend/Mvc/Application.php(294): Zend\EventManager\EventManager->trigger('dispatch', Object(Zend\Mvc\MvcEvent), Object(Closure))
#22 /home/anu/zf2-tutorial/public/index.php(12): Zend\Mvc\Application->run()
#23 {main} 
```

有任何想法吗？？如果有人能找出问题并让我知道，我将不胜感激。

提前致谢。

# actionscript-3 - 调整影片剪辑 AS3 的大小

> ID：15729812
> 
> 赞同：0
> 
> 时间：2013-03-31T13:25:51.217
> 
> 标签：actionscript-3, resize, movie, clip

好的，所以我有一个Flash游戏，一个平台游戏。在这个游戏中你必须跳过尖峰。所以我创建了尖峰并将其转换为一个符号，一个电影剪辑。当它注册为一个电影剪辑时，它不是一个三角形（如尖刺），而是一个矩形。这意味着当玩家避开尖刺并跳跃时，如果他离得太近，他会死，但他没有击中尖刺，他会撞到周围的隐形矩形尖峰。无论如何要改变影片剪辑的形状，使其适合尖峰和尖峰。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T15:13:19.363

你可以使用hittest，这里是一个使用示例

[http://www.foundation-flash.com/tutorials/as3hittesting/](http://www.foundation-flash.com/tutorials/as3hittesting/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T20:02:17.120

您可以像这样使用`BitmapData`with`hitTest`来检查像素级碰撞。

（要测试代码，请在 Flash 舞台上放置两个符号，“rectClip”和“spike”。还要先测试它，让它们远离，然后再让它们触摸并测试它。）

（无论哪种方式，您都可以设置`MouseMove`或`startDrag()`实时检查。）

```
var rect:Rectangle = rectClip.getBounds(this);
var rectClipBmpData = new BitmapData(rect.width, rect.height, true, 0);
rectClipBmpData.draw(rectClip);

var spikeRect:Rectangle = spike.getBounds(this);
var spikeBmpData = new BitmapData(spikeRect.width, spikeRect.height, true, 0);
spikeBmpData.draw(spike);

if(rectClipBmpData.hitTest(new Point(rectClip.x, rectClip.y),
                                 255,
                                 spikeBmpData,
                                 new Point(spike.x,spike.y),
                                 255 ))
{
     trace("hit");
}else
{
     trace("No hit");
} 
```

好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T15:18:49.153

根据我处理相同类型问题的经验，你不能真正使用`AS3 hitTestObject`MC 的特定形状（如果你遇到这个问题，我会想象你正在使用它）。它总是默认为占用影片剪辑本身空间的框。

因此，要回答您的问题，不，您不能更改 MC 的形状以使其仅尖峰，默认情况下`hitTestObject`使用 MC 周围的边界框。

解决这个问题的方法很少（很多人建议不要`hitTestOjbect`一般使用，因为它效率不高，而是编写自己的命中测试代码。我建议在网上寻找这样的例子，有很多）。

如果您不想处理这个问题，您的另一个选择是创建一个单独的一系列盒形 mc，它们充当您的边界框并且可以排列在数组中，然后运行一个循环来查看您的角色是否是击中任何一个。这样，您可以根据需要调整边界框大小。

但是如果你想使用`hitTestObject`，不幸的是你必须使用整个对象边界框。由于我不完全确定您将如何处理此问题的详细信息，因此我最好的建议是上网阅读 AS3 中命中检测的基础知识。

您的问题在于命中检测，不一定是电影剪辑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T15:40:00.930

对象之间的内部命中测试将检查对象的边界框，因此这对您不起作用。

如果您可以以某种方式将玩家代理用作一个点（最低点，例如他的脚中部或类似的东西），您可以使用`spike.hitTestPoint(globalFootX, globalFootY, true);`

如果这不起作用，您要么必须手动为项目创建 hittest-representation 并执行您自己的 hittest 逻辑。

另一种解决方案是将项目绘制到单独的精灵上，然后查看像素是否重叠。我知道我在一个旧的 AS2 项目中做到了这一点，其中不规则形状的 AI 机器人在一个不规则形状的世界中四处移动。

我将提供该代码以供参考，它可能可以转换为 AS3，或者至少您可以将其用作谷歌搜索的灵感，以便在 AS3 中找到该解决方案。

```
class messer_studios.utils.CollisionDetection {
    static public function checkForCollision(p_clip1:MovieClip, p_clip2:MovieClip, p_alphaTolerance:Number):Rectangle {     
        // set up default params:
        if (p_alphaTolerance == undefined) {
            p_alphaTolerance = 255;
        }

        // get bounds:   
        var bounds1:Object = p_clip1.getBounds(_root);
        var bounds2:Object = p_clip2.getBounds(_root);

        // rule out anything that we know can't collide:
        if (((bounds1.xMax < bounds2.xMin) || (bounds2.xMax < bounds1.xMin)) || ((bounds1.yMax < bounds2.yMin) || (bounds2.yMax < bounds1.yMin))) {
            return null;
        }
        //Debug.log("might collide");

        // determine test area boundaries:   
        var bounds:Object = {};
        bounds.xMin = Math.max(bounds1.xMin, bounds2.xMin);
        bounds.xMax = Math.min(bounds1.xMax, bounds2.xMax);
        bounds.yMin = Math.max(bounds1.yMin, bounds2.yMin);
        bounds.yMax = Math.min(bounds1.yMax, bounds2.yMax);

        // set up the image to use:
        var img:BitmapData = new BitmapData(bounds.xMax-bounds.xMin, bounds.yMax-bounds.yMin, false);

        // draw in the first image:
        var mat:Matrix = p_clip1.transform.concatenatedMatrix;
        mat.tx -= bounds.xMin;
        mat.ty -= bounds.yMin;
        img.draw(p_clip1, mat, new ColorTransform(1, 1, 1, 1, 255, -255, -255, p_alphaTolerance));

        // overlay the second image:
        mat = p_clip2.transform.concatenatedMatrix;
        mat.tx -= bounds.xMin;
        mat.ty -= bounds.yMin;
        img.draw(p_clip2, mat, new ColorTransform(1, 1, 1, 1, 255, 255, 255, p_alphaTolerance), "difference");

        // find the intersection:
        var intersection:Rectangle = img.getColorBoundsRect(0xFFFFFFFF, 0xFF00FFFF);
        // if there is no intersection, return null:
        if (intersection.width == 0) {
            return null;
        }

        // adjust the intersection to account for the bounds:   
        intersection.x += bounds.xMin;
        intersection.y += bounds.yMin;
        return intersection;
    };

    public static function hitTestShape(mc1:MovieClip, mc2:MovieClip, alphaTolerence:Number):Boolean {
        return checkForCollision(mc1, mc2, alphaTolerence) != null ? true : false;
    }
} 
```

# mysql - 如何解决这个外键问题 MySQL？

> ID：15729819
> 
> 赞同：0
> 
> 时间：2013-03-31T13:26:23.637
> 
> 标签：mysql, database, database-design

我正在开发一个会计应用程序，其中为每笔交易提供一个密钥。例如：在销售交易中有两个条目，一个用于销售帐户，另一个用于客户。

编号 | 三重奏 | 日期 | 帐户 | 数量

* * *

112 | 33 |01-04-2013 | 销售 A\c | 300.00
113 | 33 |01-04-2013 | 客户 A\c | 300.00
114 | 34 |01-04-2013 | 销售 A\c |110.00
115 | 34 |01-04-2013 | 客户 1 A\c | 110.00
116 | 35 |01-04-2013 | 销售 A\c | 250.00
117 | 35 |01-04-2013 | 客户 2 A\c | 250.00

这里，TRID 是 MAX(TRID) + 1。这个概念适用于单用户环境，但在应用程序由多个用户同时使用的多用户环境中，一个或多个用户可以获得相同的 TRID。

有什么解决办法呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T13:32:38.630

您需要使用事务并在使用期间锁定表来创建原子操作——这将确保没有两个进程会使用相同的值。

您需要将 proc 放在一起，但基本上是：

```
-- start transaction
-- lock table
-- select max(trid) + 1 and store in a variable
-- do your inserts
-- unlock table
-- end transaction 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T14:36:28.563

First of all, if `TRID` alone needs to be unique, then make it a key (alone, not in combination with some other field). This way, the DBMS will not let any duplicates enter the database, no matter what mistakes you make in the client code.

In the multi-user environment, you can use an [auto-increment](http://dev.mysql.com/doc/refman/5.6/en/example-auto-increment.html) to safely generate unique values, provided you don't care for generated values being contiguous.

OTOH, if you can't afford "holes", then:

*   either lock the whole table before `SELECT MAX(TRID) + 1`,
*   or do the same `SELECT` without locking but be prepared to re-try if there is a key violation.

I'd recommend against the locking if you can help it, since it can have serious negative impact on scalability.

# java - JSF 2.2 - 带有 multipart/form-data 的表单中的 ajax 有一些错误

> ID：15729822
> 
> 赞同：0
> 
> 时间：2013-03-31T13:26:41.007
> 
> 标签：java, jsf, jsf-2.2

我尝试使用 JSF 2.2 创建上传文件表单。在这种形式中，我有 bankCode 输入框，当失去焦点时将 ajax 到服务器。而且这个表格还包含输入文件框用。所以我必须将 enctype="multipart/form-data" 属性放到 h:form 标记以上传文件。

每次我将 enctype 放入表单时 - ajax 都会在 Chrome 的调试器中显示错误消息。

> 未捕获的类型错误：无法读取 null
> jsf.js.htm:359的属性“长度”

示例代码

```
<h:form id="dialogForm" prependId="false" enctype="multipart/form-data">
        <h:commandLink action="#{bankController.initCreate()}" class="btn add" style="margin: 10px 0 20px 20px;">
            <f:ajax immediate="true" execute="@this" render=":dialogForm"/>
            <span>Add new bank</span>
        </h:commandLink>
        <table class="dialogTable" style="margin: 10px 0 20px 20px;">
            <colgroup>
                <col width="30%"/>
                <col width="70%"/>
            </colgroup>
            <tr>
                <td class="label">
                    <label for="abbreviation">Bank's code<span class="required">*</span></label>
                </td>
                <td>                                           
                    <h:panelGroup id="codeBox" layout="block" class="codeBox">
                        <h:inputText id="code" value="#{bankController.curBank.code}" maxlength="10" class="input code #{bankController.isExistCode?'error':''}"
                                     onblur="return validTextInput('code',2);">
                        <f:validateLength minimum="2" maximum="10"/>
                            <f:ajax execute="@this" event="blur" listener="#{bankController.existCode()}" onevent="function(e){showValidateIcon(e, 'code');}" render="codeBox"/>
                        </h:inputText>
                        <span class="append2">
                            <img id="codeXLoad" src="#{cdnLocator.officeUrl}/img/load16.gif" title="On process, please wait" width="16" height="16" style="margin-top: 2px; display: none;"/>
                            <img id="codeXWarn" src="#{cdnLocator.officeUrl}/css/images/error_msg_icon.gif" title="Not allowed" width="16" height="16" style="margin-top: 2px; #{bankController.isExistCode?'':'display: none;'}"/>
                            <img id="codeXAvai" src="#{cdnLocator.officeUrl}/css/images/success_msg_icon.gif" title="Allowed" width="16" height="16" style="margin-top: 2px; #{bankController.isExistCode?'display: none;':''}"/>
                        </span>
                    </h:panelGroup>  
                </td>
            </tr>
            <tr>
                <td class="label">
                    <label for="icon">Bank icon file*</label>
                </td>
                <td>
                    <h:inputFile id="bankIconFile" value="#{bankController.bankIconFile}"/>
                </td>
            </tr>
        </table>
    </h:form> 
```

我该如何解决这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T02:14:16.170

谢谢您的回复。我发现这是 JSF 2.2 M10 到 M12 的错误。我更改为 JSF 2.2 M9，它运行良好。

所以我将使用 M9 直到 JSF 2.2 发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T16:08:02.750

我提出了[Mojarra](https://java.net/jira/browse/JAVASERVERFACES-2871)的一个错误，我认为这也与您的问题有关。

[堆栈溢出问题](https://stackoverflow.com/questions/16336795/jsf-2-2-fileupload-does-not-work-with-ajax-form-appears-to-have-incorrect-enc)

PS。Jira 自 5 月 14 日以来一直处于休眠状态，因此投票可能会加快解决速度

# php - 查询对话框提交后 Firefox 刷新不正确

> ID：15729827
> 
> 赞同：0
> 
> 时间：2013-03-31T13:27:37.097
> 
> 标签：php, jquery, dialog

我有一个页面，我在其中打开一个对话框，进行一些编辑然后提交并返回到同一页面，问题是当我返回时，页面不会不正确地重新加载以仅在 Firefox 中反映数据的变化。

这是我打开对话框的方式：

```
function addProduct() {

        $('#pop').load("newProduct.php").dialog({
        width: 470,
        height: 600,
        modal: true,
        draggable: false,
        resizable: false,
        title: 'Products',
        buttons: {
            Cancel: function () {
                $('#pop').dialog("close");
            },
            Submit: function () {

                $("#formproduct").submit();

            }
        }
    });

    } 
```

该代码在 safari 和 chrome 中运行良好。有任何想法吗 ？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T13:53:16.333

我在错误控制台中找到了这个

警告：页面已重新加载，因为在预扫描文件的前 1024 个字节时未找到 HTML 文档的字符编码声明。编码声明需要移动到文件的前 1024 个字节内。线路：15

起初它没有响铃，但是当我将用于编码的元指令移动到页面中的第一个时，它工作正常。

# google-analytics - 如何使用谷歌分析跟踪 2 个网站

> ID：15729828
> 
> 赞同：0
> 
> 时间：2013-03-31T13:27:45.193
> 
> 标签：google-analytics

我有一个谷歌博客，我使用谷歌分析跟踪了大约一年。

上周我开了一个新博客，我也想用我的 GA 帐户跟踪它。

我所做的是为新博客创建另一个配置文件，并将跟踪代码放在新博客中。

我可能错过了一些东西，因为当我查看报告时，它们在两个配置文件上都是相同的。

如何让每个个人资料只显示与其博客相关的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T19:07:40.057

管理员 -> {{PROFILE} -> 过滤器 -> 按主机名包含流量（等于 {{DOMAINNAME}}） -> 保存 -> 重复使用其他域名的其他配置文件。

# parsing - 如何使用 NoSQL 实现本地化

> ID：15729830
> 
> 赞同：8
> 
> 时间：2013-03-31T13:28:00.897
> 
> 标签：parsing, localization, nosql

直到现在，我一直在使用关系数据库（确实很开心！）。然而，最近，我发现了[Parse](https://parse.com/)，发现它非常好，所以决定试一试。但是，它带有一个 NoSQL 数据库。我仍在努力解决它。所以我的问题是，您如何建议实现本地化？我可以想到以下方法，你怎么看？

*   方法 A：在文档上有一个“字符串”字段，并将所有语言特定的数据存储在该字段中。例如，

    ```
    "strings":
    {
      "en" : 
        {
          "title" : "English title"
        }
      "de" :
        {
          "title" : "Deutsch Titel"
        }
    } 
    ```

*   方法 B：文档上有多个字段，每个字段指向一个特定语言的文件。定义另一个名为*strings*的文档。例如，

    ```
    "strings_en": <Pointer to a *strings* object>
    "strings_de": <Pointer to a *strings* object>

    // And here's one *strings* document
    {
      "title" : "My English title"
    } 
    ```

*   方法 C：就像在关系数据库模式中一样，有一个带有语言代码的单独*字符串表。*单独查询此表/文档并合并结果

*   方法 D：（新）与方法 B 类似，优先考虑多个列而不是两个文档，目的是将所有相关数据保存在同一个文档中。

    ```
    {
      "title_en" : "English title",
      "title_de" : "Deutsch titel",
      "description_en" : "English description",
      "description_de" : "Deutsch beschreibung"
    } 
    ```

方法 A：对我来说很有意义，但我不知道一种简单的方法（在 Parse 框架中）仅将相关数据发送回客户端。它将所有字符串发送到客户端 -> 冗余带宽使用

方法 B：来自关系数据库背景，我不喜欢有太多列的前景（它最终可能有 30 种不同的列，用于 30 种不同的语言），而且客户端不能只使用对象。*字符串*。它总是必须在字段名称的末尾附加语言代码，这很乏味（也很危险）。但这种方法对我来说最有意义。

方法 C：我可以听到您说“如果您要使 NoSQL 适应关系数据库设计范式，那么 NoSQL 有什么意义”

方法 D：是的，你最终会得到很多可笑的列，但我觉得一个关键目标是将所有必要的数据保存在一个文档中，而不是将它们分布在 1 个以上的文档中。字段数量根本不是问题。因此，我现在采用这种方法。

那么，如何在 NoSQL 数据库模式中实现本地化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T23:55:38.277

最近在 RavenDB 论坛上有一个关于这个主题的讨论。 [看这里](https://groups.google.com/d/msg/ravendb/DD4lPQNKEtg/fcC0vALrxc0J)

像 NoSQL 中的大多数东西一样，有许多不同的选项。提出的一个想法是，在许多文档数据库（如 RavenDB）中，您可以拥有基于字符串的“语义”键。这些可以用来提供数据本地化。

例如，考虑多个文档一起工作来表示一个产品：

```
products/1
{
  "Price" : 10.00
{

products/1/en
{
  "Name" : "ball"
}

products/1/es
{
  "Name" : "bola"
}

products/1/fr
{
  "Name" : "balle"
} 
```

不可本地化的属性存储在`products/1`其中是主文档键。但随后可本地化的字符串可以进入其他与其键相关的文档中。

为了使这项工作顺利进行 - 使用不同的文档会产生一些管理开销。在 RavenDB 中 - 这将由自定义“捆绑包”提供。（它还不存在——我正在研究它。）其他数据库可能有不同的实现细节，可能仍然允许这种方法可行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-07T22:37:13.607

Ayende 建议使用类似的东西

```
{
  "States": [
    {
      "Name": [
        {
          "Culture": "en",
           "Value": "Texas"
        },
        {
          "Culture": "fr", 
          "Value": "French Texas" 
        } ],
        "Abbrevation": "TX" 
    }]
} 
```

# jquery - 计算 我正在为显示所选日期之间的天数而苦苦挣扎：<input type="date" id="date" />和今天。 基于此，我想展示一个特定的<div>. 例如，如果从输入值的日期到我们显示的日期之间有 20 天<div id="20day"></div&gt 问问题 问问题 2013-03-31T13:28:01.597 1483 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我正在为显示所选日期之间的天数而苦苦挣扎：<input type="date" id="date" />和今天。 基于此，我想展示一个特定的<div>. 例如，如果从输入值的日期到我们显示的日期之间有 20 天<div id="20day"></div>，如果有超过 20 天，我们将显示<div id="21day"></div>。 仅使用 jQuery 就可以吗？ 用于std::vector避免必须通过原始指针、new[]和手动管理内存delete[]。这样做（正如您所经历的那样）容易出错，并且很容易导致内存泄漏或未定义的行为。 DbRecord出于同样的原因，我还建议使用智能指针而不是原始指针来保存对对象的引用。您应该根据所需的所有权策略选择您的智能指针。在这里，我会假设std::shared_ptr是合适的。 但是请注意，如果您不需要引用语义，那么您根本不应该使用指针，而是将您的容器声明为std::vector<DbRecord>。在这里，我假设您确实需要引用语义，因为您的原始版本使用（原始）指针；但同样，如果你不这样做，不要使用指针。 因此，鉴于必要的#include指令和using声明： #include <string> #include <vector> #include <memory> using std::string; using std::vector; using std::shared_ptr; DbRecord以及数据结构的（未更改的）定义： struct DbRecord { string oName; string oAddr; string cName; string cAddr; }; 您可以更改CCompanyIndexthis 的定义（如您所见，用户定义的默认构造函数和析构函数现在是多余的，您可以让编译器隐式生成它们）： class CCompanyIndex { public: // No more need for a user-defined default constructor and destructor! bool Add(const string & oName, const string & oAddr, const string & cName, const string & cAddr); bool Del(const string & oName, const string & oAddr); bool Search(const string & oName, const string & oAddr, string & cName, string & cAddr) const; std::vector<std::shared_ptr<DbRecord>> db; // ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ }; 最后，请注意您不需要执行任何手动清理： int main(int argc, char const *argv[]) { CCompanyIndex c1; // do something..with c1, i.e. add there some records to array // ... // ... // NO NEED TO MANUALLY DELETE IT NOW! } jquerydate 4 2 回答 2 This answer is useful 2 尝试这个： $('#date').change(function () { var date1 = new Date($(this).val()); var date2 = new Date(); var diffDays = date2.getDate() - date1.getDate(); $('body').append('<div id="' + diffDays + '"></div>'); }); 在这里演示 于 2013-03-31T13:39:07.387 回答 This answer is useful 0 var selected = $('#date').val(); var today = new Date(); var diff = new Date(selected - today); // get days var days = diff/1000/60/60/24; alert(days); var dayswill 包含天数。你可以继续对变量做任何你喜欢的事情。我这里刚用过alert()。 于 2013-03-31T13:33:12.393 回答 Related 1 ssh - 在多台机器上运行相同的脚本 1 heroku - 将 Play 2.1 RC1 Java 应用程序部署到 Heroku 得到“NoSuchMethodError scala.Predef$.augmentString” 1 javascript - 在 Chrome 中处理 Silverlight AppExit 2 jquery - 转到 HTML 页面中的特定选择 1 iphone - 使用 iOSOpenDev 构建时图标大一点 1 android - 如何通过php同时从android发送数据和图像 2 javascript - jQuery方法在字符串中查找字符？ 1 objective-c - Objective-C 异步方法和 ARC 1 codeigniter - pyrocms 专业版：添加新的第一个 uri 段？ 0 web-config - 在 web.config 中指定多个 system.web Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：15729831
> 
> 赞同：0
> 
> 时间：
> 
> 标签：jquery, date

我正在为显示所选日期之间的天数而苦苦挣扎：`<input type="date" id="date" />`和今天。

基于此，我想展示一个特定的`<div>`. 例如，如果从输入值的日期到我们显示的日期之间有 20 天`<div id="20day"></div>`，如果有超过 20 天，我们将显示`<div id="21day"></div>`。

仅使用 jQuery 就可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T13:39:07.387

尝试这个：

```
$('#date').change(function () {
    var date1 = new Date($(this).val());
    var date2 = new Date();
    var diffDays = date2.getDate() - date1.getDate();
    $('body').append('<div id="' + diffDays + '"></div>');
}); 
```

[**在这里演示**](http://jsfiddle.net/qMzcR/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T13:33:12.393

```
var selected = $('#date').val();
var today = new Date();

var diff = new Date(selected - today);

// get days
var days = diff/1000/60/60/24;

alert(days); 
```

`var days`will 包含天数。你可以继续对变量做任何你喜欢的事情。我这里刚用过`alert()`。

# android - 如何不断跟踪系统时间

> ID：15729837
> 
> 赞同：0
> 
> 时间：2013-03-31T13:28:34.473
> 
> 标签：android

我正在尝试在android中制作一个提醒应用程序。我已经编写了代码来存储提醒的日期和时间信息以及提醒标题。现在我想在适当的时间通知用户我正在计划的提醒使用可以跟踪系统当前时间和存储在数据库中的时间的服务。我对如何执行此操作感到困惑。任何人都可以提出一些建议。

我能想到的唯一方法是检索剩余表中的所有行并不断保持系统时间以检查它是否与检索到的行数据中指定的任何行匹配。（但我想这会非常效率低下）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T13:38:50.603

您应该使用[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)。你可以检查[这个问题](https://stackoverflow.com/questions/4459058/alarm-manager-example)或谷歌教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T13:39:33.837

您应该使用 AlarmManager 来触发事件。您不应该尝试自己重新创建此机制（听起来您打算这样做）。

AlarmManager 将触发服务在特定时间或间隔执行某些操作：

这是一个很好的 SO 示例： [How to start Service using Alarm Manager in Android?](https://stackoverflow.com/questions/8321443/how-to-start-service-using-alarm-manager-in-android)

您可以传递一个带有您意图的 Extra 来保留一个触发通知的句柄。就像在这个 SO 问题中一样：

stackoverflow.com/questions/15731259/how-to-use-requestcode-in-pendingintents

# java - 在java中创建数组并在构造函数中初始化

> ID：15729846
> 
> 赞同：0
> 
> 时间：2013-03-31T13:28:59.783
> 
> 标签：java, arrays, constructor

我需要创建一个对象数组（汽车），然后在构造函数中将该数组初始化为所需的大小（10）。到目前为止，我有这个：

```
public class Queue {

    private Car [] car;

    public Queue (Car [] car) {
        Car [] car = new Car[10];
    }   
} 
```

当我编译时说它找不到汽车符号。我假设问题出在数组的创建上，因为我似乎没有正确创建 Car。任何帮助将不胜感激<3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T13:32:36.960

这是创建它的正确方法。

```
public class Queue {
    private Car [] car;
    public Queue () {
       car = new Car [10];
    }   
} 
```

前提是您已经定义了汽车类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T13:32:26.133

创建一个汽车类并将其放入类路径中，它将顺利运行。

编辑[第二次]：根据下面的评论编辑我的代码。这工作

```
public class Queue {

    private Car [] mycar;

    public Queue (Car [] car) {
        mycar = car;
    }   
} 
```

编辑：

```
class Car {

} 
```

# jquery - 如何使用 Raphael 在 MS Paint 文本框中动态添加文本？

> ID：15729851
> 
> 赞同：0
> 
> 时间：2013-03-31T13:30:02.453
> 
> 标签：jquery, svg, raphael

我想复制与我们在 MS Paint 中相同的用户体验，即在页面中编写文本。就像当我们点击 rahael 页面时，应该会出现一个固定长度的框，并为输入应该动态添加到 rahael 页面的文本留出空间。随着文本长度增加超过首选大小，它应该像在 MS Paint 中一样折叠。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T15:46:41.707

**第一个解决方案：**为 Raphael 的容器创建 .on('click') 事件处理程序，它将在单击位置创建一个文本区域。通过 CSS 规则设置此文本区域的样式 - 绝对定位到点击位置；设置宽高；删除边框，制作透明背景，以实现您将文本直接输入到 Raphael 画布的错觉。然后将键侦听器附加到文本区域（如果您需要 Enter 键来换行，请在“Ctrl+Enter”上听“Enter”）。Enter 键将创建 Raphael.Text 元素。

**第二种解决方案：**点击画布后 - 创建一个隐藏的文本区域（设置 CSS {position: absolute; left: -9999px} 隐藏它，不要使用 {display: none}）。还要在单击位置创建 Raphael.Text 对象。然后当您输入时，文本将添加到隐藏的文本区域 - 在每次按键时读取其值并更新 Raphael 的文本对象。

# javascript - 在 D3 力布局链接中间显示一个箭头

> ID：15729856
> 
> 赞同：19
> 
> 时间：2013-03-31T13:30:21.920
> 
> 标签：javascript, svg, d3.js, force-layout

我正在使用 D3 绘制一个力导向图，这与此示例非常相似：http: [//bl.ocks.org/mbostock/1153292](http://bl.ocks.org/mbostock/1153292)

我试图将箭头放在链接的中间而不是末端。

使用`attr("refX", 0)`标记并没有多大帮助，因为它是绝对的，与链接长度无关——我的链接长度不同。

我一直在谷歌搜索，我最好的想法是根据这个[例子](http://www.w3.org/TR/SVG2/painting.html#SegmentMarkers)`link.attr("marker-end", ...)`替换（寻找图表中间的十字架）。但这似乎不起作用..我猜是因为它只是 SVG2 草案的一部分，但我的浏览器支持较低版本？（我正在使用最新版本的 Chrome 顺便说一句）。`link.attr("marker-segment", ...)`

如何将箭头放在链接的中间？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-01T18:47:22.537

不要将标记放在末端，而是在线条中间创建一个点（`<polyline>`或），并使用它来应用箭头。`<path>`[`marker-mid`](https://developer.mozilla.org/en-US/docs/SVG/Attribute/marker-mid)

[*我的[这个答案的](https://stackoverflow.com/a/11809868/405017)[这个演示](http://jsfiddle.net/Zv57N/)使用这种技术沿着路径的长度创建多个内部点`marker-mid`。您只需创建一个“航点”而不是多个。*]

**编辑**：这是对现有演示的简单破解，显示了我的意思：

### 演示：http: [//jsfiddle.net/tk7Wv/2/](http://jsfiddle.net/tk7Wv/2/)

![曲线中间的箭头](https://i.stack.imgur.com/35izG.png)

唯一的变化是：

1.  更改`marker-end`为`marker-mid`, 和
2.  修改路径生成代码以创建两条弧线（在中间连接）而不是一条。

它需要一些简单的三角函数，如 Superboggly 所示，根据你想要的线条弯曲量来选择合适的中点。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-04-02T07:47:36.527

我是 OP，为了其他有相同问题的人，这个答案只是对上述优秀答案的补充。

答案显示了如何为带有弧链接的图形实现这一点。如果您有直接链接，则需要稍微修改接受的答案。这是如何：

您的直接链接可能是用 实现的`line`，它们需要转换为`polyline`. 像这样：

```
// old: svg.selectAll(".link").data(links).enter().append("line")
svg.selectAll(".link").data(links).enter().append("polyline") 
```

然后我们必须根据这个[例子](http://www.w3schools.com/svg/svg_polyline.asp)对折线进行编码，所以你的原始代码编码`line`：

```
force.on("tick", function() {
   link.attr("x1", function(d) {return d.source.x;})
       .attr("y1", function(d) {return d.source.y;})
       .attr("x2", function(d) {return d.target.x;})
       .attr("y2", function(d) {return d.target.y;}); 
```

更改为：

```
force.on("tick", function() {
   link.attr("points", function(d) {
      return d.source.x + "," + d.source.y + " " + 
             (d.source.x + d.target.x)/2 + "," + (d.source.y + d.target.y)/2 + " " +
             d.target.x + "," + d.target.y; }); 
```

最后，不要忘记转换`marker-end`为`marker-mid`：

```
// old: link.attr("marker-end",
link.attr("marker-mid", 
```

感谢@Phrogz 为您指明方向。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-04-01T22:36:15.417

我采取了与 Phrogz 略有不同的方法。我尝试删除路径的标记，而是使用一条新路径绘制它，该路径到达弧的中点并且其笔划是不可见的。计算中点有点挑剔，所以如果你想改变弧的特征，你可能会更好地使用 Phrogz 的方法，或者一些混合方法。

在这种情况下，trig 并不是那么糟糕，因为如果您仔细观察，您会注意到用于生成链接的弧来自具有相同半径和节点之间距离的圆。所以你有一个等边三角形，你真正需要做的就是计算从连接线段的中点到圆弧中点的距离。

我想我需要一个图表来解释：

![找到圆弧中点](https://i.stack.imgur.com/vcg7r.png) 所以三角形ABC是等边的，EC平分AB。因为我们有 A 和 B 的坐标，所以很容易找到 M（平均坐标）。这意味着我们也知道从 A 到 B 的斜率（delta y / delta x），所以从 M 到 E 的斜率是负数。知道 M 和 E 的斜率意味着我们快到了，我们只需要知道要走多远。

为此，我们使用 ACM 是 30-60-90 三角形的事实，因此

|厘米| = sqrt(3) * |上午|

但是|上午| = |AB| / 2 和 |CE| = |AB|

所以

|我| = |AB| - sqrt(3) * |AB| / 2

为了使这个长度有意义，我们必须用斜率向量的长度对其进行归一化，我们已经知道它与圆的半径相同。

无论如何，把它们放在一起你会得到：

```
var markerPath = svg.append("svg:g").selectAll("path.marker")
  .data(force.links())
  .enter().append("svg:path")
  .attr("class", function(d) { return "marker_only " + d.type; })
  .attr("marker-end", function(d) { return "url(#" + d.type + ")"; });

... later in the tick handler

markerPath.attr("d", function(d) {
  var dx = d.target.x - d.source.x,
      dy = d.target.y - d.source.y,
      dr = Math.sqrt(dx * dx + dy * dy);

  // We know the center of the arc will be some distance perpendicular from the
  // link segment's midpoint. The midpoint is computed as:
  var endX = (d.target.x + d.source.x) / 2;
  var endY = (d.target.y + d.source.y) / 2;

  // Notice that the paths are the arcs generated by a circle whose 
  // radius is the same as the distance between the nodes. This simplifies the 
  // trig as we can simply apply the 30-60-90 triangle rule to find the difference
  // between the radius and the distance to the segment midpoint from the circle 
  // center.
  var len = dr - ((dr/2) * Math.sqrt(3));

  // Remember that is we have a line's slope then the perpendicular slope is the 
  // negative inverse.
  endX = endX + (dy * len/dr);
  endY = endY + (-dx * len/dr);

  return "M" + d.source.x + "," + d.source.y + "A" + dr + "," + dr + " 0 0,1 " + endX + "," + endY;
}); 
```

[在这里](http://jsfiddle.net/superboggly/t9WXJ/)查看。请注意，我的标记路径的路径 css 设置为透明红色，通常您希望将 stroke 设置为“none”以隐藏线条。

# sql - 需要 SQL 语句

> ID：15729860
> 
> 赞同：2
> 
> 时间：2013-03-31T13:30:35.207
> 
> 标签：sql, ms-access

我有 3 张玩家桌，它的武器桌和虚拟桌“拥有武器”。
玩家表有 player_id,player_name，武器表有 Weapon_id, Weapon_name, Weapon_cost。拥有武器表有 player_id，武器_id。

球员桌

```
player_id      player_name
1               mr.A
2               mr.B 
```

武器表

```
weapon_id      weapon_name       weapon_cost
1              sniper            100
2              gun               120
3              hummer            90 
```

拥有武器表

```
player_id      weapon_id
1              1
1              2
1              3
2              2
2              3 
```

我尝试了一条 sql 语句来显示玩家姓名、他持有的武器总数和他目前持有的所有武器的总成本....但出现错误，例如“玩家姓名不是聚合函数的一部分”我使用计数和求和功能。但错误出来了。请帮帮我

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T13:38:10.230

首先，您需要加入表格。其次，由于您使用的是聚合函数，因此您需要对`GROUP BY`不在聚合函数中的列使用子句。

因此，您的查询将类似于以下内容：

```
select p.player_name,
  count(w.weapon_id) as TotalWeapons,
  sum(w.weapon_cost) as TotalCost
from ([player] as p
inner join [Possess_Weapon] as pw
  on p.player_id = pw.player_id)
inner join [weapon] as w
  on pw.weapon_id = w.weapon_id
group by p.player_name 
```

请注意，当查询中有多个连接时，您将看到 MS Access 需要在连接周围加上括号。

请参阅[演示](http://www.sqlfiddle.com/#!3/ea782/3)。演示是 SQL Server，但这已经在 MS Access 中进行了测试，它返回了结果：

```
| PLAYER_NAME | TOTALWEAPONS | TOTALCOST |
------------------------------------------
|        mr.A |            3 |       310 |
|        mr.B |            2 |       210 | 
```

# php - 想要包含来自不同文件的文件，这些文件包含一个文件

> ID：15729862
> 
> 赞同：0
> 
> 时间：2013-03-31T13:30:49.370
> 
> 标签：php, relative-path

标题可能听起来有点奇怪，但假设我有文件 A 和 B。A 和 B 都有

```
include_once("includes/includes.php"); 
```

在 Includes.php 中有这一行：

```
include_once("admin/plugins/list.php"); 
```

这适用于与管理员（文件夹）处于同一级别的文件。但是 B 已经在文件夹 Admin 中，并且具有以下代码：

```
include_once("../includes/includes.php"); 
```

这有效，只有在打开 admin 文件夹中的文件时出现错误，因为它在文件夹 admin 中找不到文件夹 admin。而且我知道我可以使用一些 if 语句删除管理员，但我有更多文件夹存在这个问题。

是的，我已经尝试过使用**$_SERVER['DOCUMENT_ROOT']**和 "/" 但这不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T13:33:22.097

您始终可以定义一个常量，例如 `define('SV_ROOT', 'path/to/yourroot');`

然后使所有包含相对于它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T13:37:20.430

唯一始终与包含相同的是文档根目录。所以我会说将你的 docroot 打印到屏幕上，看看你得到了什么。

可以肯定的是，您并没有延迟请求它（例如在您请求所需的功能后请求），并且您没有请求它加倍。

可以肯定的是，您能否根据您的需要发布错误、文档根输出和路径。

# assembly - 如何用汇编语言解决序列

> ID：15729863
> 
> 赞同：0
> 
> 时间：2013-03-31T13:30:54.457
> 
> 标签：assembly

我如何用汇编语言解决以下序列：

R1=-2+4-6+8-10.....+-N

注意：N 值作为输入

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T13:49:30.863

查看它的一些值以找到模式：

```
N     R1
2     -2
4     +2
6     -4
8     +4
10    -6
12    +6 
```

所以，当`N%4 == 0`，那么`R1 = N/2`，当`N%4 == 2`，那么`R1 = -(N/2 + 1)`。

因此，为了计算这一点，您将执行以下操作（伪代码，但很容易转换为汇编）

```
 if N%2 is not 0 then error: invalid input
     R1 = N/2
     if N%4 == 0 then jump to done
     R1 = R1 + 1
     R1 = -R1
   done: 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-31T14:30:01.820

```
It is an arithmetico geometric progression with a = -2, d = -2 , r = -1
an = (a + (n-1)*d)*(r^(n-1))
N = an = 2*n*((-1)^n)
n = absolute(N) / 2                                                     -1
R1 = Sn
on solving you will get
R1 = ((-1)^n)*n - ( 1 + (-1)^(n-1) )/2                                  -2 
```

您可以使用 eqn 1 和 2 来获得 R1。这是C中的示例

```
#include<math.h>

int main() { 
float nlast,n,r1;
nlast = 12;
n = abs(nlast) / 2;
r1 = pow(-1,n)*n - ( 1 + pow(-1,n-1) )/2;
return(r1);
} 
```

您可以使用此[站点](http://assembly.ynh.io/)获取汇编代码。

# c# - FileNotFound 当我使用 Image.FromFile()

> ID：15729873
> 
> 赞同：2
> 
> 时间：2013-03-31T13:31:52.217
> 
> 标签：c#, .net, winforms, image

在这种情况下，我使用 Image.FromFile(string) 方法：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace GVEMO
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
            PaintBackground();
        }
        public void PaintBackground() {
            gameBoard.Image = Image.FromFile("gvemoBack.jpg");
        }
    }
} 
```

gameBoard 是图片框的名称。但是当我启动这个程序时，我得到了异常 FileNotFound。图像位于主目录中（包含文件夹 bin、类、属性等的目录）我尝试将此图像复制到所有项目目录中，但仍然存在异常。该图像必须在哪个目录中或我做错了什么？我使用 VS2012 和 .NET 框架 4.5 版。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T13:34:48.327

图像必须在当前工作目录中。在启动时，这是您启动应用程序的目录，这可能是可执行文件所在的目录（但不能是）。请注意，此工作目录可能会更改！

我建议您使用另一种机制，而不是使用路径。`FileOpenDialog`如果您使用例如，当前工作目录可以设置为不同的东西。因此，您最好使用图像所在目录的资源或设置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T13:35:39.777

由于您使用了相对路径，因此图像必须位于工作目录中。当您启动可执行文件时，除非您另外指定，否则工作目录将设置为可执行文件所在的目录。显然图像不存在。

由于很难控制工作目录，尤其是在 GUI 应用程序中，因此通常最好指定完整的绝对路径而不是相对路径。例如：

```
string dir = Path.GetDirectoryName(Application.ExecutablePath);
string filename = Path.Combine(dir, @"MyImage.jpg"); 
```

但是，对于您的方案来说，更好的方法是将图像作为资源包含在内，从而使您的可执行文件自包含。然后，您无需担心诸如确保图像与可执行文件位于同一目录中的细节。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-31T13:36:08.840

确保您的文件在解决方案资源管理器中可见。如果没有，请单击`Show All Files`解决方案资源管理器中的按钮，右键单击图像，然后单击“包含在项目中”。

如果您的文件可见，则通过右键单击解决方案资源管理器中的图像，选择属性并确保将`Copy to Output Directory`选项设置为`Copy if newer`或，确保将图像复制到输出目录`Copy always`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-31T13:35:37.410

正如 jdehaan 已经说过的，图像应该（通常）与您的可执行文件位于同一目录中。这很可能`bin\Debug`是您的情况。

如果这是一个静态图像，您也可以将它嵌入到您的程序集中。查看在[项目中嵌入图像资源](http://msdn.microsoft.com/en-us/library/aa984367%28v=vs.71%29.aspx)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-31T13:35:19.930

请确保图像与应用程序可执行文件位于同一目录中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-31T13:44:57.037

如果不指定路径，则使用当前目录。

您可以使用相对路径：

```
./xxx/yyy/file.ext
../../xxx/yyy/file.ext 
```

或绝对路径：

```
/xxx/yyy/file.ext 
```

或在启动程序之前或在其执行期间更改目录（依赖于语言/平台的解决方案）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-08-08T09:55:41.163

即使我有同样的问题。

我这样做是为了让它正常工作：

如果图像文件直接添加到项目中： 1.右键单击图像->属性窗口->从“复制”下拉菜单中选择“始终复制”或“如果较新则复制”。

就是这样。

# jquery - phonegap 单键按正确方式无多点触控干扰

> ID：15729879
> 
> 赞同：2
> 
> 时间：2013-03-31T13:32:26.980
> 
> 标签：jquery, ios, cordova, button, locking

我正在开发一个目前在 iphone 上测试的 phonegap 应用程序。我想做的很简单。我想按下一个按钮，并且只有我正在按下的那个按钮必须被按下。我想防止用户同时按下一个以上的按钮。要根据苹果指南执行此操作，您应该在按下目标按钮时禁用所有其他按钮。我的问题是，如果您最终在完全相同的时间同时按下两个按钮，那么这两个按钮都会被按下。据我所知，javascript 中没有锁，而且我也尝试使用变量作为锁，但它仍然有效。我有这段代码，可以在 iphone 上测试以复制问题。我的问题是你如何编程按钮按下正确的方式？

```
 <script type="text/javascript" src="plugins/jquery.js"></script>

      <script>

       $(document).ready(function(){

               CreateEvents();
           }); //end ready function

           function CreateEvents()
           {

                 $('.divs').on('touchstart', function(){

               $('.divs').not(this).off();
                  $(this).css('background-color','red');

               });

               $('.divs').on('touchend', function(){

                  $(this).css('background-color','green');
                  setTimeout(function(){
                        CreateEvents();

                        }, 300);

               });

               }
      </script>
<style>
 .divs{
width:200px;
height:200px;
background-color:green;

}
 </style>

</head>
<body>

<div class="divs">
div1
</div>

<div class="divs">
div2
    </div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T15:01:39.047

我认为这可能是按下按钮以确保一次只按下一个按钮的正确方法。

```
 $(".divs").on('touchstart', function(event){
                        event.stopPropagation();
                        event.preventDefault();

                        if(event.handled !== true) {

                                    $('.divs').not(this).off();
                                      $(this).css('background-color','red');

                            event.handled = true;
                        } else {
                            return false;
                        }
                });
            $(".divs").on('touchend', function(event){
                        event.stopPropagation();
                        event.preventDefault();

                        if(event.handled !== true) {

                                     $(this).css('background-color','green');
                                     CreateEvents();

                            event.handled = true;
                        } else {
                            return false;
                        }
                }); 
```

然而，重要的是要注意，如果您同时使用触摸事件和鼠标单击事件，某些设备将进行双击，因为它们将触摸注册为单击和触摸事件。这种方法显然也应该防止这种情况发生，但实际上并没有。这被称为“ghostclick”，应该有插件来解决这个问题，但最简单的方法是使用触摸事件或鼠标单击事件。

还是很高兴看到人们如何在您自己的应用程序中管理这些问题的其他示例？

# java - 用 Gson 序列化抽象类返回 null

> ID：15729904
> 
> 赞同：2
> 
> 时间：2013-03-31T13:34:53.110
> 
> 标签：java, gson

我对 Goggles Gson 库有疑问。看下面的代码：

```
public abstract class Main { 
    public String foo = "foo";
    public List<String> bar = Arrays.asList( "foo", "bar" );

    @Override
    public String toString( ) {
        Gson gson = new Gson( );
        return gson.toJson( this );
    }

    public static void main( String[] args ) {
        Main main = new Main( ) {
        };
        System.out.println(main.toString( ));
    }
} 
```

它打印`null`。但是我希望它打印`{"foo":"foo","bar":["foo","bar"]}`它所做的，当我在创建`Main( )`.

那么如何为抽象类获得正确的输出呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T13:42:28.603

对于抽象类，您需要编写自己的适配器。请参阅有关该主题的[这篇文章](http://ovaraksin.blogspot.co.il/2011/05/json-with-gson-and-abstract-classes.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T14:20:36.573

查看代码，我可以看到 Gson 排除了匿名内部类。我有最好的解释是因为 Gson 的理念是支持对称序列化和反序列化，正如[这个 bug](https://code.google.com/p/google-gson/issues/detail?id=298)中所解释的：

> 不要使用双括号初始化。它可以防止 [反] 序列化，而 Gson 专为对称序列化和 [反] 序列化而设计。

没有自定义就不可能反序列化内部类。从[用户指南](https://sites.google.com/site/gson/gson-user-guide#TOC-Nested-Classes-including-Inner-Classes-)：

> Gson 还可以反序列化静态嵌套类。但是，Gson 不能自动反序列化纯内部类，因为它们的无参数构造函数还需要对包含 Object 的引用，而在反序列化时这是不可用的。

因此 Gson 阻止了序列化。您可以将匿名内部类改为静态嵌套类，它会起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-14T13:20:30.760

抱歉有点晚了，但是对于那些不想创建嵌套类的人，您可以使用它：

```
AbstractPayload payload = new AbstractPayload("field") {};
String result = gson.toJson(payload, AbstractPayload.class) 
```

这适用于我的情况

# javascript - 执行触发的按键 javascript

> ID：15729913
> 
> 赞同：3
> 
> 时间：2013-03-31T13:35:46.543
> 
> 标签：javascript, keypress

如何触发`keypress`，使其模拟真实的用户行为？

如果我使用`$('#input').trigger(jQuery.Event('keypress', {which: 65}))`我希望字母“a”出现在该输入中，但即使按键被触发，也不会出现任何内容。

是否可以在不直接更改输入的情况下显示按下的键`value`？

演示：http: [//jsfiddle.net/KrHYn/](http://jsfiddle.net/KrHYn/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T13:40:09.503

抱歉，不，这不是 DOM 事件的工作方式。当您使用 JavaScript 触发事件时，它不是受信任事件，这意味着它不会（此处稍后提到的情况除外）更改 DOM。

当您触发 jQuery（或 DOM）事件时，就像 DOM 告诉您的 JavaScript 代码在输入中按下了一个键。它*通常*不会改变 DOM 本身。

根据[规范](http://www.w3.org/TR/DOM-Level-3-Events/#trusted-events)，触发时执行默认行为的唯一事件是[*click*和*DOMActivate*](http://www.w3.org/TR/DOM-Level-3-Events/#trusted-events)。从规范：

> 大多数不受信任的事件不应触发默认操作，除了 click 或 DOMActivate 事件。这些事件触发激活触发器的默认操作（有关更多详细信息，请参阅激活触发器和行为）；这些不受信任的事件的 isTrusted 属性值为 false，但仍会启动任何默认操作以实现向后兼容性。
> 
> 所有其他不受信任的事件必须表现得好像在该事件上调用了 Event.preventDefault() 方法。

您必须更改输入的`value`（`.val()`在 jQuery 中）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T14:09:38.107

假设浏览器分为三部分：HTML、DOM 和 JavaScript。DOM 是 HTML 和 JS 可以对话的中间人。

当 JavaScript 加载一个元素时，当使用 时`document.getElementById`，它会告诉 DOM：“嘿，我需要这个元素！”。如果 DOM 找到它，它将返回一个称为 DOM 元素的特殊对象中的元素。

当 HTML 发生变化时（你在一个字段中输入了一些值），它会向 DOM 发送一条消息：“嘿，`value`这里的我的不一样。”。因此 DOM 更新了它的 DOM 元素。

当 JavaScript 在 上添加事件侦听器时`keypress`，它会告诉 DOM：“嘿，无论何时`keypress`发送事件，请告诉我。”。

因此，当 HTML 更改时（在输入中完成按键操作），它会告诉 DOM：“嘿，那里有一个按键事件！”。由于 DOM 知道 JS 正在等待按键事件的更新，它告诉 JS：“嘿，伙计，那里触发了一个事件。”。

如果您从 JS 本身运行事件，DOM 将立即向 JS 发送回：“嘿，`keypress`触发了一个事件，认为您可能感兴趣。”。它不会转到 HTML 并更改它。

为什么？因为 DOM 不信任 JS。它知道 JS 是个坏孩子。这里的关键词是“信任”。正如@Benjamin 所指出的，有*一些*值得信赖的事件。虽然他们很少。还有“向后兼容的受信任的”。

是的，DOM 是一团糟。

# wordpress - 如何使用 htaccess 将 .com 域名重定向到 .co.uk 域？

> ID：15729914
> 
> 赞同：2
> 
> 时间：2013-03-31T13:35:46.533
> 
> 标签：wordpress, .htaccess, redirect, subdomain

我需要重定向域名： http: [//mydomain.com](http://mydomain.com)到[http://mydomain.co.uk](http://mydomain.co.uk)

这样，每当访问者访问 .com 时，他都会被重定向到 .co.uk 版本。两个域名都指向同一个托管服务提供商。

除此之外，我需要重写规则以呈现没有`www.`. 如：`mydomain.co.uk`而不是：`www.mydomain.co.uk`。

我正在使用 WordPress。我希望从 .htaccess 文件中学习如何做到这一点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-31T13:46:31.637

由于所有内容都被重定向到`http://mydomain.com.uk`，因此无需删除`www`from `http://www.mydomain.com`。

您可以在以下根目录的 .htaccess 文件中尝试此操作`mydomain.com`：

```
Options +FollowSymlinks -MultiViews
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www\.)?mydomain\.com  [NC]
RewriteRule ^(.*)  http://mydomain.com.uk/$1     [R=301,L,NC] 
```

要从中删除`www`，`http://www.mydomain.com.uk`您必须在该站点根目录的一个 .htaccess 文件中放置一组规则。像这样的东西应该工作：

```
Options +FollowSymlinks -MultiViews
RewriteEngine On
RewriteCond %{HTTP_HOST}  ^www\.mydomain\.com\.uk  [NC]
RewriteRule ^(.*)     http://mydomain.com.uk/$1    [R=301,L,NC] 
```

# azure - Azure 部署 ID 和 URL

> ID：15729916
> 
> 赞同：1
> 
> 时间：2013-03-31T13:35:59.683
> 
> 标签：azure

我们有一个 Windows Azure 云服务，每个部署有两个实例。目前，部署是这样连接的：

部署 ID`a1a1...`在生产槽中。

部署 ID`b2b2...`位于暂存槽中。

这些部署中的 Web 角色有一个状态页面，可以这样访问：

```
http://a1a1... .cloudapp.net/status
http://b2b2... .cloudapp.net/status 
```

在此状态页面上，我们将显示部署 ID，我们以编程方式查找它，如下所示：

```
if (Microsoft.WindowsAzure.ServiceRuntime.RoleEnvironment.IsAvailable)
{
    return Microsoft.WindowsAzure.ServiceRuntime.RoleEnvironment.DeploymentId;
} 
```

奇怪的是，`b2b2...`无论我们调用两个 URL 中的哪一个，这个状态页面都会显示部署 ID。

**不`http://a1a1... .cloudapp.net/status`应该显示`a1a1...`为部署 ID？**

顺便说一句：我们的域`http://www.ourdomain.com/status`显示正确的部署 ID `a1a1...`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:15:41.313

您是否进行过 VIP 交换来交换您的制作和登台服务？您可能会遇到这种情况有几个原因，但如果您进行了 VIP 交换，那么我想说最有可能的是您对 2 个不同 URL 的请求实际上会发送到同一个托管服务。这通常是由于在 VIP 交换后客户端和服务器之间的 TCP 连接保持打开状态，这意味着 HTTP 请求将继续通过同一 TCP 连接发送。

解决此问题的第一件事是对这两个服务进行 RDP，并检查 IIS 日志以查看请求是否发送到同一服务。

# events - 检测时间序列中具有统计意义的事件/变化

> ID：15729921
> 
> 赞同：0
> 
> 时间：2013-03-31T13:36:18.130
> 
> 标签：events, time-series

我的数据集包含每日统计数据，其中数字彼此相似，但事件发生在某些日子，这导致下一组日子在新的平均值附近趋于稳定。

我想知道在历史数据集中自动检测这些事件的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:50:30.110

您应该寻找“水平转换”。参见 Tsay 在这方面的工作，www.unc.edu/~jbhill/tsay.pdf

我们在这方面做了很多工作！

# javascript - 使用 jQuery 编辑没有 ID 或指定类的文本

> ID：15729925
> 
> 赞同：0
> 
> 时间：2013-03-31T13:36:51.667
> 
> 标签：javascript, jquery, text, replace

我目前正在一个由主机提供的网站上启动**javascript**，在该网站上我只能更改网站的指定部分。事实上，我应该能够通过 javasript 更改所有内容，因为我能够在标题中包含 javascript。到目前为止，我已经成功地做到了这一点，但我陷入了无法找到进一步答案的地步，所以这里是事实：

不可更改的**HTML**代码如下所示：

```
<div>
  <intput .... />
  <intput .... />
  <intput .... />
  <intput .... />
  <div> ... some unimportant informations ... </div>
  <hr />
  <strong> SOME TEXT: </strong> additional text with important things to change
  <hr />
</div> 
```

**问题 ：**

如何选择我要更改的文本。

**我尝试过但没有成功：**

```
$("*").each(function() {
  $("this:contains('important things to change')").replace('important things to change', 'new text here');
} 
```

实现所需的正确方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T15:58:16.903

有很多方法可以做到这一点，如果你知道那个 div 在哪里，你可以通过以下方式找到它：

`'<hr/>'`如果它在身体内的第一个旁边：

```
$('body hr:nth-child(1)').next().html("anything you wana write"); 
```

它是内部的第二个 div `"#somediv"`：

```
$('#somediv div:nth-child(2)').html("Anything you wana write"); 
```

或者是里面的第五个孩子`body`：

```
$('body:nth-child(5)').html("anything"); 
```

或其父母`"#thisdiv"`：

```
$('#thisdiv').parent().append("write anything"); 
```

# android - 模拟器倒置

> ID：15729926
> 
> 赞同：0
> 
> 时间：2013-03-31T13:36:56.997
> 
> 标签：android, android-emulator

我在 android sdk 中添加了新目标。但是当我启动它时 - 它的方向错误，它被旋转到左侧。（目标是标准方向，但菜单是陆地方向）

```
[2013-03-31 15:49:57 - SDK Manager] Updated AVD 'nexus' based on Android 3.0, ARM (armeabi) processor,
  [2013-03-31 15:49:57 - SDK Manager] with the following hardware config:
[2013-03-31 15:49:57 - SDK Manager] hw.sdCard=no
[2013-03-31 15:49:57 - SDK Manager] hw.device.manufacturer=Generic
[2013-03-31 15:49:57 - SDK Manager] hw.mainKeys=yes
[2013-03-31 15:49:57 - SDK Manager] hw.lcd.density=240
[2013-03-31 15:49:57 - SDK Manager] hw.accelerometer=yes
[2013-03-31 15:49:57 - SDK Manager] hw.dPad=no
[2013-03-31 15:49:57 - SDK Manager] hw.device.hash=1265634471
[2013-03-31 15:49:57 - SDK Manager] hw.trackBall=no
[2013-03-31 15:49:57 - SDK Manager] hw.device.name=4in WVGA (Nexus S)
[2013-03-31 15:49:57 - SDK Manager] hw.camera.back=none
[2013-03-31 15:49:57 - SDK Manager] hw.sensors.proximity=yes
[2013-03-31 15:49:57 - SDK Manager] hw.battery=yes
[2013-03-31 15:49:57 - SDK Manager] disk.dataPartition.size=200M
[2013-03-31 15:49:57 - SDK Manager] hw.audioInput=yes
 [2013-03-31 15:49:57 - SDK Manager] hw.sensors.orientation=yes
 [2013-03-31 15:49:57 - SDK Manager] hw.gps=yes
 [2013-03-31 15:49:57 - SDK Manager] skin.dynamic=yes
 [2013-03-31 15:49:57 - SDK Manager] hw.keyboard=yes
 [2013-03-31 15:49:57 - SDK Manager] vm.heapSize=32
 [2013-03-31 15:49:57 - SDK Manager] hw.ramSize=512 
```

对不起我的英语不好

# asp.net - 数据库中图像的相对路径取决于解决方案中的文件夹

> ID：15729929
> 
> 赞同：1
> 
> 时间：2013-03-31T13:37:10.967
> 
> 标签：asp.net, visual-studio-2010, ms-access, relative-path

我有一个名为 editprofile 的 .aspx 页面，可以**在我的 ~/Account/ 文件夹**中找到。该页面本身允许用户上传新的用户头像、更改他们的详细信息等。

当图像被保存时，它被保存到一个表（'userprofiles'）中一个名为 AvatarURL 的字段中，其**相对路径**如下：UserProfileAvatar/image.jpg

我有一个单独的页面，位于上面的主解决方案目录中，名为 detail.aspx。当我尝试显示图像时，我遇到了图像没有出现的问题，发现这是因为写入数据库的路径是相对于“帐户”文件夹的。我已经设法通过编辑我的数据库中的记录并在其顶部附加额外的级别来实现此功能：Account/UserProfileAvatar/image.jpg 并出现图像。

如何补偿诸如此类的环境因素，以便我的解决方案中的不同页面（无论它们在文件夹层次结构中的哪个位置）可以毫无问题地引用放置在此文件夹中的图像？

这是我背后的代码：

> ```
> Protected Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
>     Dim sql
>     Dim cmd
>     Dim conn As OleDbConnection = New OleDbConnection(ConfigurationManager.ConnectionStrings("BookMeetConnString").ConnectionString)
>     If Not fu_avatar.HasFile Then
>         sql = "UPDATE userprofiles SET EmailAddress=@f1, Description=@f2 WHERE TravellerName=@f3"
>         cmd = New OleDbCommand(sql, conn)
>         cmd.Parameters.AddWithValue("@f1", email.Text)
>         cmd.Parameters.AddWithValue("@f2", description.Text)
>         cmd.Parameters.AddWithValue("@f3", User.Identity.Name)
>     Else
>         sql = "UPDATE userprofiles SET EmailAddress=@f1, Description=@f2, AvatarURL=@f3 WHERE TravellerName=@f4"
>         cmd = New OleDbCommand(sql, conn)
>         cmd.Parameters.AddWithValue("@f1", email.Text)
>         cmd.Parameters.AddWithValue("@f2", description.Text)
>         cmd.Parameters.AddWithValue("@f3", "UserProfileAvatar/" & User.Identity.Name & ".jpg")
>         cmd.Parameters.AddWithValue("@f4", User.Identity.Name)
>         Dim fileLocationOnServerHardDisk = Request.MapPath("UserProfileAvatar") & "/" & User.Identity.Name &
>     ".jpg"
>         fu_avatar.SaveAs(fileLocationOnServerHardDisk)
>     End If
>     conn.Open()
>     cmd.ExecuteNonQuery()
>     conn.Close()
>     DisplayData()
>     SaveConfirmation.Visible = True
> End Sub 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T13:56:31.047

我将尝试更改以这种方式保存的路径

```
 Dim rootRelativeFilePath = "~/UserProfileAvatar/" &  User.Identity.Name & ".jpg" 
```

然后

```
 cmd.Parameters.AddWithValue("@f3", rootRelativeFilePath) 
```

如果`UserProfileAvatar`是根站点文件夹的子文件夹，这应该可以工作。
相反，如果`UserProfileAvatar`是 Account 文件夹的子文件夹，则

```
 Dim rootRelativeFilePath = "~/Account/UserProfileAvatar/" &  User.Identity.Name & ".jpg" 
```

通过这种方式，您始终保存相对于站点根目录的路径。因此，每个试图加载该文件的页面都可以通过它来检索它，`Server.MapPath`而不会被当前页面文件夹所迷惑。

# c# - 控制台应用程序 C# 中的 Unity 2 IDisposable 问题

> ID：15729935
> 
> 赞同：1
> 
> 时间：2013-03-31T13:38:00.617
> 
> 标签：c#, unity-container

我在控制台应用程序中使用 Unity 2.1.505.0，它包含一个`IDisposable`实现，`CarRepository`. 但是，`Dispose()`当超出其范围时，永远不会调用。下面是代码示例：

```
 internal class Program
    {
        private static void Main(string[] args)
        {           
            CarShop.Entry();
        }
    }

    class CarShop
    {
       static UnityContainer unityContainer = new UnityContainer();

        public static void Entry()
        {           
            unityContainer.RegisterType<ICarRepository, CarRepository>();
            var carShop = new CarShop();
            carShop.BuyCar();
        }

      public void BuyCar()
      {
          CheckCar();
      }

      private void CheckCar()
      {
          var carService = unityContainer.Resolve<CarService>();
          var car = carService.GetCar(1);  
         // **Dispose() method is not called out of this scope**
      }
    }

   class CarService
    {
        private ICarRepository carRepository;
        public CarService(ICarRepository carRepository)
        {
            this.carRepository = carRepository;
        }

        public Car GetCar(int id)
        {
            return this.carRepository.GetCar(id);
        }
    }

    interface ICarRepository
    {
        Car GetCar(int id);
    }

    class CarRepository : ICarRepository, IDisposable
    {
        public Car GetCar(int id)
        {
            return null;
        }

        public void Dispose()  
        {

        }
    }

    public class Car
    {
    } 
```

任何的想法？？

**更新**

正如@nemesv 建议的解决方案如下：

```
unityContainer.RegisterType<ICarRepository, CarRepository>(
        new HierarchicalLifetimeManager())

 using (var childContainer = unityContainer.CreateChildContainer())
    {
        var carService = childContainer.Resolve<CarService>();
        var car = carService.GetCar(1);            
    } 
```

有用。但不同`Unity.MVC`的是，它需要显式创建`childContainer`. 是否有透明的`IDispose`对象处理方式，如 Unity.MVC。或将来的其他工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T13:49:16.413

默认情况下，该`RegisterType`方法使用`TransientLifetimeManager`which 不存储对创建对象的引用，因此它不会`Dispose`为您调用 。

在已构建的`LifetimeManager`实现中，只有在`ContainerControlledLifetimeManager`处置容器本身时处置托管对象。

您可以在此处阅读有关终身经理的信息：[了解终身经理](http://msdn.microsoft.com/en-us/library/ff660872%28v=pandp.20%29.aspx)

如果您的目标是`CarRepository`使用后处理，那么您可以使用`HierarchicalLifetimeManager`和[子容器](http://msdn.microsoft.com/en-us/library/ff660895%28v=pandp.20%29.aspx)来实现它：

```
public static void Entry()
{           
    unityContainer.RegisterType<ICarRepository, CarRepository>(
        new HierarchicalLifetimeManager());
    var carShop = new CarShop();
    carShop.BuyCar();
}

private void CheckCar()
{
    using (var childContainer = unityContainer.CreateChildContainer())
    {
        var carService = childContainer.Resolve<CarService>();
        var car = carService.GetCar(1);            
    }
    // **Dispose() method is not called out of this scope**
} 
```

# html - 即使尚未按下按钮，如何显示弹出框？

> ID：15729944
> 
> 赞同：0
> 
> 时间：2013-03-31T13:39:02.107
> 
> 标签：html, css, twitter-bootstrap

我正在使用 twitter-bootstrap。
下面的代码启用了弹出框，它会在用户按下按钮时出现。

我想在页面加载时默认显示弹出框。是否可以？

```
<li>
    <a data-original-title="Popover on top" href="#" class="btn" data-toggle="popover" data-placement="top" data-content="Vivamus sagittis lacus vel augue laoreet rutrum faucibus." title="">Popover on top</a>
    <div style="top: -58px; left: 58.7083px; display: block;" class="popover fade top in">
        <div class="arrow"></div>
        <h3 class="popover-title">Popover on top</h3>
        <div class="popover-content">Vivamus sagittis lacus vel augue laoreet rutrum faucibus.</div>
    </div>
</li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T13:54:03.570

是的，但是你为什么要在 div 中重复 popover-content 作为属性*和内容呢？*( `.popover-content`) 这不是必需的。

```
<a data-original-title="Popover on top" id="popover-on-top" href="#" class="btn" data-toggle="popover" data-placement="top" data-content="Vivamus sagittis lacus vel augue laoreet rutrum faucibus." title="">Popover on top</a>

<script type="text/javascript">
$("#popover-on-top").popover('toggle');
</script> 
```

你甚至不需要放入文件准备好（）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T13:46:39.187

是的，你可以调用这个 JavaScript：

```
$('#element').popover('show'); 
```

见：http: [//twitter.github.com/bootstrap/javascript.html#popovers](http://twitter.github.com/bootstrap/javascript.html#popovers)

# .net - 使用项目资源的 WebBrowser 控件

> ID：15729945
> 
> 赞同：2
> 
> 时间：2013-03-31T13:39:07.077
> 
> 标签：.net, winforms, webbrowser-control, embedded-resource

我有一个带有 WebBrowser 控件的 WinForm 应用程序。我以编程方式创建 HTML。如何在 HTML中使用**项目资源中的图像？**
Visual Basic 2010 速成版。

```
Public Class Form1
    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        WebBrowser1.DocumentText = "<html><body style='background-image:url(???);background-color:#DDEEFF'>Some text.</body></html>"
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T13:46:06.870

我有一个类似的问题。基本上直接`WebBrowser`设置的时候控件效果不好`DocumentText`。

我想出的解决方案是在您的应用程序中实现一个小型 HTTP 服务器并将`WebBrowser`控件指向该 url。

然后，您可以完全控制**所有**内容。

我在这里写了一篇关于它的文章：[`WebBrowserEx: WinForms WebBrowser + HTTP Server`](http://simplygenius.net/Article/WebBrowserEx)

# java - 将图像存储/删除/添加到 Java Web 应用程序

> ID：15729951
> 
> 赞同：0
> 
> 时间：2013-03-31T13:39:19.687
> 
> 标签：java, image, metadata

在我的应用程序中，我希望用户能够添加和删除图像，目前我将图像存储在一个`images`文件夹中，并使用以下代码将其删除。

```
if(delete != null){
  for (int i = 0; i < delete.length; i++){
    imagePath = ctx.getRealPath("WebContent/"+delete[i]);
    try{
      file = new File(imagePath);
      file.delete();
    }catch(Exception e){
      e.printStackTrace();
     }
  }
} 
```

但是，它只是删除`.metadata`文件夹中的图像，而不是从我的`images`文件夹中删除图像，处理这种情况的正确方法是什么？应该从哪里删除所有图像？

# php - Codeigniter 基本路径系统

> ID：15729955
> 
> 赞同：0
> 
> 时间：2013-03-31T13:39:36.857
> 
> 标签：php, codeigniter

在我的视图文件夹中，我放置了一个模板及其所有文件，但该模板没有通过 codeigniter 加载其 css。后来我回显了基本路径：

```
echo basepath; 
```

这给了我这条路：

`/var/www/xxx/CI/system/`

它不显示文件所在的特定文件夹的默认路径。我的假设是它应该给出这条路径：

`/var/www/xxx/CI/application/views`

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T13:48:50.000

您应该将您的`css`和其他公共资产放在站点根目录的文件夹中。

例如：

```
/webapp
  /application
  /public
    /css
      /main.css
    /js
      /plugins.js
    /img
      /narwhals.png
  /system
  /index.php
  /license.txt 
```

然后，从您的视图内部，您可以使用：

```
<link rel="stylesheet" type="text/css" media="all" href="<?php echo site_url('public/css/main.css'); ?>"> 
```

另外，在`application/config/config.php`你改变`base_url`这样的：

```
$config['base_url'] = ''; 
```

它应该在该文件的第 17 行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T13:45:45.287

它提供基本路径的原因是您可能想要访问另一个目录中的文件（例如 css 或保存上传的图像）。要获取视图子目录，您只需使用：

```
APPPATH. '/views'; 
```

请注意，如果您在视图中，则可以通过以下方式获取基本路径：

```
 dirname(__FILE__) 
```

一步。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T13:46:41.043

你不应该把你的css文件放在你的views文件夹中。通常只有您的网络服务器才能直接访问该文件夹。

您可以使用[`base_url()`](http://ellislab.com/codeigniter/user-guide/helpers/url_helper.html). 为此目的使用它一千次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T13:47:07.107

为了在动态文件夹路径中包含 css，请执行此操作

```
<link rel="stylesheet" href="<?php echo base_url();?>YOUR_STYLEFILE.css" > 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-08T14:12:27.960

```
echo FCPATH; 
```

使用定义的变量

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-07-22T13:29:21.053

```
$this->load->helper('url'); 

echo base_url(); 
```

# html - “。” 在 Heroku Rails 上的 URL 创建错误

> ID：15729957
> 
> 赞同：0
> 
> 时间：2013-03-31T13:39:48.173
> 
> 标签：html, ruby-on-rails, erb

我有一个简单的网络应用程序，允许用户创建项目。我有一个“用户配置文件”的视图，但是如果用户在他们的用户名中输入一个句点，它会尝试在 URL 中添加一个句点，然后在您尝试加载配置文件时抛出一个错误。例如...

用户名：McClure 创建用户/McClure

但

用户名：.McClure 创建错误...

任何时候都有一个时期，它会出错。我应该怎么做才能防止输入中的句点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T13:49:38.033

许多字符可能会导致您的网址出现错误。

如果你有一个简单的用户模型，标准的路由是`/users/1`,`/users/2`等等。现在，你可以使用友好的 id 来代替数字，比如用户名——但是这些必须是 URL 友好的，“slugged”。slug 是将您用作友好 id 的属性转换为 URL 就绪。

您当然可以创建自己的 slug，但有一种非常简单的方法：使用 gem [friendly_id](https://github.com/norman/friendly_id)和本[快速入门指南](https://github.com/norman/friendly_id#rails-quickstart)。这是一个[railscast](http://railscasts.com/episodes/314-pretty-urls-with-friendlyid)。此 gem 使用 slug 并为您生成它们 - 它甚至可以在 slug 更改时为您的模型保存 slug 的历史记录，以及许多其他不错的功能。

有了它，你可以做类似的事情

```
class User < ActiveRecord::Base
  extend FriendlyId
  friendly_id :username, use: :slugged
end 
```

*然后，您的用户名将以一种 URL 友好和*人类可读的方式在 url 中使用。最好的部分是：您可以保留标准路线和用户名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T13:50:20.203

像`/\A[A-Za-z0-9]+\Z/`在你的模型中一样使用正则表达式验证（这个只允许用户名的字母和数字）：

```
class User < ActiveRecord::Base
  ...
  validates_format_of :username, :with => /\A[A-Za-z0-9]+\Z/
  ...
end 
```

或者，在 Rails 4 中：

```
class User < ActiveRecord::Base
  ...
  validates :username, format: { with: /\A[A-Za-z0-9]+\Z/ }
  ...
end 
```

# r - 有效使用引用类的示例

> ID：15729958
> 
> 赞同：7
> 
> 时间：2013-03-31T13:40:09.433
> 
> 标签：r, oop, pass-by-reference

我对有效使用新参考类的示例感兴趣。

一般而言，R 具有更多功能性的编程风格，并不真正依赖于面向对象的编程概念，如继承和 OOP 设计模式（尽管其中一些设计模式具有其功能等价物或在 R 中原生支持）。此外，引用类避免了在函数内部修改对象时导致复制大对象的按值传递问题，这可能会使用大量 RAM。

我不是在寻找一个包或功能的列表，而是具体的例子，带有基准的奖励积分，可以客观地证明你的观点。如果是 OOP 代码示例，请客观解释为什么此 OOP 代码优于功能等效代码。

# web-services - servlet 参数中对应值的列表

> ID：15729964
> 
> 赞同：0
> 
> 时间：2013-03-31T13:40:35.080
> 
> 标签：web-services, rest, servlets, parameters

当 servlet 参数在请求中重复时，如

```
city=London&city=Paris 
```

处理程序可以获取`city`参数的字符串值数组。

现在想象一下，我希望呼叫者也能够提供每个城市的温度。换句话说，提供不确定数量的值对。呼叫者需要有一种方法将城市与其温度联系起来。我当然不想指望任何类型的隐式排序，如果有的话：

```
city=London&city=Paris&temp=13&temp=15    # this can't be a good idea 
```

有没有首选的方法来解决这个问题？还是一个解释清楚的“不要那样做”？

我能想到各种选择。在一个参数中结合城市和温度：

```
cityTemp=London,13&cityTemp=Paris,15 
```

每个提供的城市的动态命名临时参数：

```
city=Paris&city=London&temp.Paris=15&temp.London=13 
```

对应列表代替重复参数：

```
cities=Paris,London&temps=15,13 
```

当然，我可以完全放弃简单的名称-值参数，让调用者发布 XML 或 JSON。

我不能说我喜欢这些解决方案中的任何一个，但如果一个更标准或具有某些优势，那就太好了。我没有任何运气来搜索这个问题。我不知道我是否使用了正确的术语，搜索结果不佳，或者我正在尝试做的事情偏离了目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T07:55:41.037

如果您必须绑定的参数不多，我建议您使用逗号分隔的参数值作为键值对。

```
cityTemp=London,13&cityTemp=Paris,15 
```

这将确保您将使用您的密钥获得预期的价值。

# regex - 正则表达式查找和替换记事本++

> ID：15729975
> 
> 赞同：2
> 
> 时间：2013-03-31T13:41:56.270
> 
> 标签：regex, notepad++

我有如下文字：

`<p class="field">[text text1 "text2"] </p>`

我想获取 text1 和 text2 并在下面的文本中替换它们

`<p>[text text1 text2] <br/></p>`

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T13:56:19.143

未经测试，但我认为应该这样做。

我假设*确切的*格式，任何地方都没有更多或更少的空间。那`text`，`text1`并且`text2`可以是任何东西。

代替：

```
<p class="field">\[([^ ]+) ([^ ]+) "([^"]+)"\] </p> 
```

和：

```
<p>\[\1 \2 \3\] <br/></p> 
```

**解释：**

您可能需要考虑将 Replace with `\s`(white-space) 中的空格字符替换为更通用的解决方案。

`\[`和`\]`- 转义`[`和`]`
`[^ ]`- 不是空格
`[^ ]+`- 一个或多个不是空格的字符 `[^"]`- 不是`"`
`[^"]+`- 一个或多个不是的字符`"`
`\1`- 给出与括号中的第一件事相对应的字符串 (ie `([^ ]+)`)
`\2`- 给出的字符串对应于括号中的第二个事物 (ie `([^ ]+)`)
`\3`- 给出对应于括号中的第三个事物 (ie `([^"]+)`)的字符串

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T14:01:19.000

搜索`<p class="field">\[(\S+ \S+) "(\S+)"\] </p>`并替换为`<p>[\1 \2] <br/></p>`

# apache-flex - flex中冗长xml的自动建议组件

> ID：15729976
> 
> 赞同：0
> 
> 时间：2013-03-31T13:41:59.223
> 
> 标签：apache-flex, autosuggest

我有一个自动建议库，我一直在我的项目中使用它。我现在有一个文本输入，我必须在其中使用这个库。但这次输入有大约 900,000 条记录。即，具有 900,000 个节点的 xml。当我将它与组件一起使用时，它可以工作，但它变得很慢，可能是因为在每次按键时过滤了 xmllistcollection。每次按键都需要 2-3 秒来刷新。有没有办法加快这个过程？我在本地机器上测试了这个 xml。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T21:32:59.413

对于我的自动建议小部件，我在 keyUp 上使用 clearTimeout 和 setTimeout 来确定他们何时完成输入。如果他们可以每 750 毫秒按一次键（对于一个体面的打字员来说并不难），那么我会等到他们完成输入后再执行任何搜索（或在您的情况下进行过滤）。

```
private var _timeoutID:uint=0;

private function onKeyUp(event:KeyboardEvent):void
{

    if(event.keyCode == Keyboard.ENTER)
    {
        //do search immediately
        clearTimeout(_timeoutID);
        doSearch()
    }
    else if (event.keyCode == Keyboard.ESCAPE)
    {
        //canel search
        clearTimeout(_timeoutID);
    }
    else
    {
        //begin timer
        clearTimeout(_timeoutID);
        _timeoutID = setTimeout(doSearch, 750 );
    }
}
private function doSearch():void
{
    //filter xmlcollection here
} 
```

# java - SuperCSV 追加而不是覆盖？

> ID：15729977
> 
> 赞同：3
> 
> 时间：2013-03-31T13:42:00.900
> 
> 标签：java, android, csv, supercsv

是否可以在 CSV 文件中添加新行，而不是覆盖最后一行？

这是我想添加新行时调用的方法：

```
private static void writeWithCsvMapWriter() throws Exception 
{
    final String[] header = new String[] { "Engineer", "Time/Date", "Project", "Test ID", "Data Centre", "Data Hall", "Row", "Grille", "I/S" };

    SimpleDateFormat sdf = new SimpleDateFormat("yyyy/MM/dd_HH:mm:ss");
    String currentDateandTime = sdf.format(new Date());

    final Map<String, Object> NewRow = new HashMap<String, Object>();
    NewRow.put(header[0], Name.getText().toString());
    NewRow.put(header[1], currentDateandTime);
    NewRow.put(header[2], "Expect");
    NewRow.put(header[3], TestID.getText());
    NewRow.put(header[4], DataCentre.getText());
    NewRow.put(header[5], DataHall.getText());
    NewRow.put(header[6], Row.getText());
    NewRow.put(header[7], Grille.getText());
    NewRow.put(header[8], IS.getText());

    ICsvMapWriter mapWriter = null;

    try 
    {
        mapWriter = new CsvMapWriter(new FileWriter("data/data/" + PACKAGE_NAME +"/writeWithCsvMapWriter.csv"), CsvPreference.STANDARD_PREFERENCE);

        final CellProcessor[] processors = getProcessors();

        mapWriter.writeHeader(header);
        mapWriter.write(NewRow, header, processors);  
    }
    finally 
    {
        if( mapWriter != null ) 
        {
            mapWriter.close();
        }
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T13:56:25.653

添加`true`到参数中`new FileWriter`：

```
mapWriter = new CsvMapWriter(new FileWriter(".../writeWithCsvMapWriter.csv", true), CsvPreference.STANDARD_PREFERENCE); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-20T15:19:28.897

正如 frickskit 指出的那样：诀窍是添加`true`为 的第二个参数`new FileWriter()`，但这也会在现有行下方再次添加标题。在决定将其写出之前，首先使用以下行中的内容检查现有文件中是否存在标头。

```
public void write(String fileName, List<Map<String, String>> lines) throws IOException {
    final String[] HEADER = new String[] {
        "Column1",
        "Column2",
        "Column3"
    };

    boolean writeHeader = true;

    try (ICsvMapReader mapReader = new CsvMapReader(new FileReader(fileName), CsvPreference.STANDARD_PREFERENCE)) {

        final String[] existingHeader = mapReader.getHeader(true);

        if (Arrays.equals(existingHeader, HEADER)) {
            writeHeader = false;
        }
    } catch (FileNotFoundException ex) {}

    try (ICsvMapWriter mapWriter = new CsvMapWriter(new FileWriter(fileName, true), CsvPreference.STANDARD_PREFERENCE)) {

        final CellProcessor[] processors = getProcessors();

        if (writeHeader) {
            mapWriter.writeHeader(HEADER);
        }

        for (Map<String, String> entry : lines) {
            mapWriter.write(entry, HEADER, processors);
        }
    }
} 
```

# ios - iOS 获取 Prestashop Web 服务问题（kCFErrorDomainCFNetwork 错误 -1012。）

> ID：15729978
> 
> 赞同：0
> 
> 时间：2013-03-31T13:42:01.227
> 
> 标签：ios, web-services, nsurlconnection, prestashop

我不明白这个错误。

如果有人能帮助我从这个无限的误解中弄清楚，你会让我睡得更好；）

我仔细阅读了[文档](http://doc.prestashop.com/display/PS15/Using+the+PrestaShop+Web+Service)，一切正常，直到我切换到 iOS 项目。

```
 http://263DE3VI7PY5KE6O6R84RACYYEH5S5GF@192.168.1.112/prestashop/api/ 
```

![在此处输入图像描述](https://i.stack.imgur.com/XeyFh.png)

从 iOS 端我得到了这个代码和错误：

![在此处输入图像描述](https://i.stack.imgur.com/MR6rW.png)

```
NSString *requestString = [NSString stringWithFormat:@"http://%@@%@/prestashop/api/", self.session.key, @"192.168.1.112"];

    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:requestString]];

    [request setHTTPMethod:@"GET"];

    [NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse *res, NSData *data, NSError *err){
        [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:NO];

        NSLog(@"%@", err);
        [self didReceiveData:data];
    }]; 
```

这里的所有代码都很基础，可能太多了？我是否忘记了从 Web 服务获取数据的 1 个步骤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T14:46:44.110

```
NSString *requestString = [NSString stringWithFormat:@"http://%@:@%@/prestashop/api/", self.session.key, @"192.168.1.112"]; 
```

解决了，它错过了“：” :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T14:42:02.430

顺便说一句，当我使用 curl 我得到：

```
curl -X GET -u '263DE3VI7PY5KE6O6R84RACYYEH5S5GF:' 'http://192.168.1.112/prestashop/api/customers/'
<?xml version="1.0" encoding="UTF-8"?>
<prestashop xmlns:xlink="http://www.w3.org/1999/xlink">
<customers>
<customer id="1" xlink:href="http://192.168.1.112/prestashop/api/customers/1"/>
<customer id="2" xlink:href="http://192.168.1.112/prestashop/api/customers/2"/>
</customers>
</prestashop> 
```

# java - 使用jdbc查询两个数据库到同一个sql server实例

> ID：15729979
> 
> 赞同：2
> 
> 时间：2013-03-31T13:42:03.743
> 
> 标签：java, jdbc, database-connection

在 Java 独立客户端服务器应用程序（使用 Netbeans）中，我使用静态方法连接到 SQL 服务器：但如果我使用第二个连接，则会收到错误消息：

```
Exception in thread "AWT-EventQueue-0" java.lang.NoSuchMethodError: Utili.StaticConnessione.getConnessione2()Ljava/sql/Connection; 
```

有人能帮我吗？谢谢

```
 public class StaticConnessione {
 // first coonection
public static Connection getConnessione1() throws SQLException {

    String s = System.getProperty("user.name");
    try {
        Class.forName("net.sourceforge.jtds.jdbc.Driver");
        return DriverManager.getConnection("jdbc:jtds:sqlserver://localhost;databaseName=FIRST_DB;user=sa; password = abc");
    } catch (ClassNotFoundException e) {
        JOptionPane.showMessageDialog(null, e.toString(), "msg", 2);
    }
    return null;
}
// second connection

public static Connection getConnessione2() throws SQLException {
    // first coonection
    String s = System.getProperty("user.name");
    try {
        Class.forName("net.sourceforge.jtds.jdbc.Driver");
        return DriverManager.getConnection("jdbc:jtds:sqlserver://localhost;databaseName=SECOND_DB;user=sa;password = abc");
    } catch (ClassNotFoundException e) {
        JOptionPane.showMessageDialog(null, e.toString(), "msg", 2);
    }
    return null;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T13:50:41.767

您可以在调用 getConnessione1 和 getConnessione2 的位置发布代码吗？此外，您可能应该考虑使用连接池来访问您的数据库。

# sass - 使用 SCSS 引用图像

> ID：15729984
> 
> 赞同：0
> 
> 时间：2013-03-31T13:42:38.607
> 
> 标签：sass

我正在努力使用 SCSS 加载背景图像。

这是我的 config.rb：

```
http_path = "/"
css_dir = "stylesheets"
sass_dir = "sass"
images_dir = "images"
javascripts_dir = "javascripts" 
```

这是 SCSS 提取：

```
.maincontent {
    background: image-url('mesh.png');
} 
```

它正在输出不正确的链接地址' `http://127.0.0.1/images/mesh.png?1364724560`'。然而，样式表、sass 和 javascripts 目录链接得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T16:34:20.853

Try setting `relative_assets` to true in your config.rb.

[Compass Configuration Reference](http://compass-style.org/help/tutorials/configuration-reference/)

# java - 简单的文字聊天应用

> ID：15729989
> 
> 赞同：1
> 
> 时间：2013-03-31T13:43:02.993
> 
> 标签：java, applet

我已经使用 java 中的小程序开发了简单的文本聊天应用程序。它由两个文件组成。

1.  server.java-> 访问服务器部分
2.  client.java-> 访问客户端部分

打开两个小程序后，服务器和客户端之间可以进行聊天。

```
Here's my server side code:

    Serverfile.java

    import java.net.*;
    import java.io.*;
    import java.awt.*;
    import java.awt.event.*;
    import javax.swing.*;

    public class serverfile extends JFrame {
    private JTextField usertext;
    private JTextArea chatwindow;
    private ObjectOutputStream output;
    private ObjectInputStream input;
    private ServerSocket server;
    private Socket connection;

    public serverfile(){
    super("server messaging system");    
    usertext= new JTextField();
    usertext.setEditable(false);
    usertext.addActionListener( new ActionListener(){
    public void actionPerformed(ActionEvent event){
    sendmessage(event.getActionCommand());
    usertext.setText("");
      }
    }
    );
    add(usertext,BorderLayout.SOUTH);
    chatwindow= new JTextArea();
    add(new JScrollPane(chatwindow));
    setSize(300,250);
    setVisible(true);
    }

   public void startrunning(){
   try{
   server= new ServerSocket(6789,100);
   while(true){
   try{
   waitForConnection();
   setupstream();
   whilechatting();
   }catch(Exception e){
   System.out.println("you have an error in coversation with client");
   }finally{
   closecrap();
   }
   }
   }
   catch(Exception e){
   System.out.println("you have an error in connecting with client");
   }
   }
   private void waitForConnection() throws IOException{

   showmessage("waiting for someone to connect");
   connection= server.accept();
   showmessage("now connected to"+connection.getInetAddress().getHostName());
   }

   private void setupstream() throws IOException{

   output= new ObjectOutputStream(connection.getOutputStream());
   output.flush();
   input= new ObjectInputStream(connection.getInputStream());
   showmessage("\n streams are setup");
   }

   private void whilechatting()throws IOException{

   String message = "\n you are now connected";
   sendmessage(message);
   ableToType(true);
   do{
   try{
   message = (String)input.readObject();
   showmessage("\n"+message);
   catch(Exception e){
   System.out.println("\n error in reading message");
   }
   }while(!message.equals("CLIENT-END"));
   }

   private void closecrap(){

   showmessage("\nclosing connection");
   ableToType(false);
   try{
   output.close();
   input.close();
   connection.close();
   }catch(Exception e){
   System.out.println("\n error in closing server");

   }
   }

   private void sendmessage(String message){

   try{
   output.writeObject("SERVER-"+message);
   output.flush();
   }catch(Exception e){
   chatwindow.append("\n error in sending message from server side");
   }
   }

   private void showmessage(final String text){

   SwingUtilities.invokeLater( new Runnable(){
   public void run(){
   chatwindow.append(text);
   }
    }
   );
    }

   private void ableToType(final boolean tof){

   SwingUtilities.invokeLater( new Runnable(){
    public void run(){
    usertext.setEditable(tof);
    }
    }
    );
    }
    }

    Server.java-> which access serverfile code:

    import javax.swing.JFrame

     public class server {
      public static void main(String args[]){
      serverfile obj1= new serverfile();
      obj1.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
     obj1.startrunning();
         }    
           } 
```

我的客户端代码：

```
 Clientfile.java

    import java.net.*;
    import java.io.*;
    import java.awt.*;
     import java.awt.event.*;
      import javax.swing.*;

        public class clientfile extends JFrame {
          private JTextField usertext;
          private JTextArea chatwindow;
          private ObjectOutputStream output;
           private ObjectInputStream input;
          private String message="";
            private String serverIP;
            private ServerSocket server;
               private Socket connection;

             public clientfile(String host){
              super("client messaging system");  
             serverIP=host;
            usertext= new JTextField();
 usertext.setEditable(false);
 usertext.addActionListener( new ActionListener(){
 public void actionPerformed(ActionEvent event){
     sendmessage(event.getActionCommand());
     usertext.setText("");
      }
 }
 );
 add(usertext,BorderLayout.SOUTH);
 chatwindow= new JTextArea();
 add(new JScrollPane(chatwindow));
 setSize(300,250);
 setVisible(true);
}

        public void startrunning(){
            try{
       connecttoserver();
         setupstream();
          whilechatting();
        }catch(Exception e){
         System.out.println("you have an error in coversation with server");
            }
           finally{
           closecrap();
               }
               }
            private void connecttoserver() throws IOException{
          showmessage("attempting connection");
          connection= new Socket(InetAddress.getByName(serverIP),6789);
         showmessage("connected to"+connection.getInetAddress().getHostName());
           }
             private void setupstream() throws IOException{
             output= new ObjectOutputStream(connection.getOutputStream());
          output.flush();
            input= new ObjectInputStream(connection.getInputStream());
        showmessage("\n streams are good to go");
              }

          private void whilechatting()throws IOException{
         ableToType(true);
            do{
           try{
           message = (String)input.readObject();
             showmessage("\n"+message);
        }catch(Exception e){
          System.out.println("\n error in writing message");
            }
        }while(!message.equals("SERVER - END"));
             }

        private void closecrap(){
       showmessage("\nclosing....");
         ableToType(false);
              try{
        output.close();
        input.close();
         connection.close();
         }catch(Exception e){
          System.out.println("\n error in closing client");
       }
          }
         private void sendmessage(String message){
           try{
          output.writeObject("CLIENT-"+message);
           output.flush();
           }catch(Exception e){
           chatwindow.append("\n error in sending message from client side");
             }
               }
            private void showmessage(final String m){
             SwingUtilities.invokeLater( new Runnable(){
             public void run(){
            chatwindow.append(m);
           }
              }
                 );
                       }

               private void ableToType(final boolean tof){
           SwingUtilities.invokeLater( new Runnable(){
               public void run(){
               usertext.setEditable(tof);
              }
            }
               );
               }
              }

    Client.java-> access client file code

           import javax.swing.JFrame;

          public class client {
           public static void main(String args[]){
         clientfile obj2= new clientfile("127.0.0.1");
          obj2.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            obj2.startrunning();
              }        
                 } 
```

我想知道的是如何在两台不同的计算机上访问聊天？可能吗？

我想要一台计算机上的 server.java 和另一台计算机上的 client.java。如果有人有任何解决方案，请告诉我。随意问的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T14:02:26.380

是的，它可以在两个主机上运行服务器和客户端。
以某种方式更改您的`client`课程以接受服务器的 IP - 通过命令行参数、键盘输入等 - 而不是硬编码“127.0.0.1”，即 localhost

```
import javax.swing.JFrame;

public class client {
    public static void main(String args[]){
        clientfile obj2= new clientfile(args[0]); // taken from command line args
        obj2.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        obj2.startrunning();
    }        
} 
```

并`java client 192.168.0.3`在`192.168.0.3`需要替换为运行服务器的主机的私有 IP 的地方运行客户端。
主机运行服务器的IP可以`ipconfig`在windows或者`ifconfig`Linux/Ubuntu下执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T14:02:52.447

假设您的服务器程序正在使用 ip 的系统上运行`110.10.9.8`（只是一个示例）在客户端代码行`connection= new Socket(InetAddress.getByName(serverIP),6789);`中，替换`InetAddress.getByName(serverIP)`为`110.10.9.8`. 要知道服务器系统的 IP，只需在 goole 中输入“我的 IP 是什么”。请记住，它的动态 IP 会在您的调制解调器或路由器每次重新启动时发生变化。所以每次都要找IP。如果您想拥有类似于静态 IP 的内容，请访问[此](http://www.noip.com/)

# mysql - 除了 id 列之外，插入包含行 id 的另一列的行

> ID：15729991
> 
> 赞同：0
> 
> 时间：2013-03-31T13:43:21.933
> 
> 标签：mysql

这是我的表的最小版本：

```
CREATE TABLE posts (
    id int unsigned PRIMARY KEY auto_increment,
    root_id int unsigned,
    parent_id int unsigned
); 
```

数据是树形结构，所以`parent_id`字段包含明显的，`root_id`字段包含根帖子的id，即树中最顶层的帖子，树中最老的祖先。

现在，当我插入一个本身是新树根的新帖子时，`parent_id`将是空的，因为它没有父级，但`root_id`应该引用它自己。有没有办法进行插入，将相同的值`id`放入 into `root_id`？我想避免进行插入、获取新 id 并使用第二个查询更改根 id，但也许这是唯一的方法。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T13:47:07.747

你可以做

```
INSERT INTO
  posts
SET
  root_id = (SELECT Auto_increment FROM information_schema.tables WHERE table_name = 'posts'); 
```

见[小提琴](http://sqlfiddle.com/#!2/c5833/1)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T13:47:25.937

您可以使用触发器在`insert`

```
delimiter |
CREATE TRIGGER update_root AFTER INSERT on posts
FOR EACH ROW
BEGIN
    if NEW.parent_id IS NULL 
    then 
        SET NEW.root_id =  NEW.id;
    end if;
END
|
delimiter ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T13:53:39.033

我只是想到了一个整洁的并测试了它。它似乎有效，但在某些情况下它可能会出错？

```
INSERT INTO posts ( root_id, parent_id ) VALUES ( LAST_INSERT_ID() + 1, NULL ); 
```

这有什么问题或缺点吗？

# sql - 将执行 SQL 任务的结果保存到 Excel

> ID：15729992
> 
> 赞同：2
> 
> 时间：2013-03-31T13:43:27.230
> 
> 标签：sql, sql-server, ssis, sql-server-2008-r2

我正在尝试在 SSIS 中开发一个包。该包的逻辑比较简单：执行一个查询并将结果集保存在一个excel电子表格中。因此，我首先尝试创建如下所示的体系结构：-
![在此处输入图像描述](https://i.stack.imgur.com/PKuDz.png)
我面临的问题是查询使用了临时表，而 OLE DB 源似乎无法解析包含临时表的查询（#table-names ）。

所以我尝试在我的控制流中使用执行 SQL 任务。这似乎能够执行此查询。但现在我想获取整个结果集并将其保存在动态命名的 Excel 电子表格中。我知道创建临时表是一种解决方案，但我不能使用它，因为客户不会对此感到高兴。我尝试将结果集保存在一个变量中，但即使这样我也无法从 OLEDB 源中读取。谁能给我这方面的建议。如果你想要任何澄清，请发表评论。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:52:09.457

我会将临时表逻辑移动到公用表表达式 (CTE)，例如

```
WITH CTE_temp AS (
<< select statement that populates your temporary table >>
)
SELECT
<< select statement from your temporary table>>
FROM CTE_temp 
```

CTE 可以构建在其他 CTE 之上，并且可以是递归的。通过一些横向思考，它们涵盖了 99.9% 的临时表解决方案。

CTE 可以并行运行而不会出现争用问题。它们通常也比临时表解决方案更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-12T12:23:51.013

这可以使用定义的连接管理器的“RetainSameConnection”属性来实现。（当你创建临时变量时，临时变量在连接关闭时被删除......）

# java - 使用 3 个类将中缀转换为后缀（无缓冲区读取器）

> ID：15729994
> 
> 赞同：0
> 
> 时间：2013-03-31T13:43:31.953
> 
> 标签：java, netbeans

我正在使用netbeans，但我仍然是这方面的初学者。在主类中，我们应该输入一个应该是字符串的表达式，它还应该显示转换后的后缀。然后是3个类，Stack类，checkExpression类和Convert类。我不知道在这三个课程中放什么。请帮我。谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T14:12:25.160

类有利于分离不同的、可重用的组件，因此每个类应该有一个这样的组件。我会这样做：

*   `Stack`是一个表示解析器堆栈的类。它具有将符号压入堆栈和检索它们的方法。
*   `Convert`是一个使用`Stack`类来转换字符串的类。它包含一个方法，该方法在一个大循环中执行以下操作（其中一些在单独的方法中）：

    *   从输入字符串中获取一个标记
    *   将令牌附加到堆栈（使用`Stack`类提供的方法）
    *   当倒数第二个标记是运算符（或倒数第三个和最后一个标记是`(`and `)`）时，将最后三个标记替换为后缀形式的字符串（例如，替换 `[..., "1", "+" , "2"] 和 [..., "1 2 +"])

    之后，返回堆栈。此外，`Convert`将包含`main`读取字符串、对其进行转换、使用检查结果`CheckExpression`然后打印结果或错误消息的方法。

*   我将创建`CheckExpression`一个包含一个方法的类，该方法通过检查结果堆栈是否只有一个元素（结果）来检查字符串是否完全转换。

这假设一个纯粹的左结合语法，例如，`3 + 4 * 5`将被解析为`(3 + 4) * 5`（然而，`3 + (4 * 5)`也将被解析为`3 + (4 * 5)`）。

也许您应该问您的老师，将其实现为纯左关联解析器是否可以，以及这种构造类的方式是否良好？你最终成绩的 50% 是很多，所以你真的应该能够从他/她那里得到更具体的东西。

# css - CSS 重要性顺序

> ID：15729997
> 
> 赞同：1
> 
> 时间：2013-03-31T13:43:41.643
> 
> 标签：css, twitter-bootstrap

我正在尝试使用 Twitter Bootstrap 将表中一列的内容右对齐。

问题是，`.text-right`该类不适用于`<td>`元素。应用`text-align:right`样式有效，但我很好奇为什么应用于元素的类的优先级低于一般元素样式。

[http://jsfiddle.net/ctANw/6/](http://jsfiddle.net/ctANw/6/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T13:47:02.000

`I'm curious why class applied to element has lower priority then general element style.`

因为内联样式在 CSS 中具有最大的特异性（除了使用`!important`关键字）

将特异性视为四个数字（0,0,0,0）

*   内联样式是第一 - 最高优先级
*   ID 选择器是第二个数字
*   伪类、属性选择器和类是第三类
*   类型选择器是第四个（这也包括伪元素）
*   通用选择器`*`的特异性为 0，任何东西都会覆盖它。

使用它，您应该能够弄清楚如何覆盖特定的选择器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T13:46:52.530

只是第 192 行的 .table td 规则具有“文本对齐：左；” 正在覆盖它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T13:54:05.190

这是[Specificity 层次结构](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)的问题。

每个选择器在特异性层次结构中都有自己的位置。有四个不同的类别定义了给定选择器的特异性级别：

1.  内联样式（文档中存在样式）。内联样式存在于您的 XHTML 文档中。它直接附加到要设置样式的元素上。例如`<h1 style="color: #fff;">`

2.  IDs（ID 选择器的数量） ID 是您的页面元素的标识符，例如`#div`.

3.  类、属性和伪类（# of class 选择器）。该组包括 .classes、[attributes] 和伪类，例如 `:hover`等`:focus`。

4.  元素和伪元素（# of Element（类型）选择器）。包括例如`:before`和`:after`。

# ios - 为获取请求设置谓词

> ID：15729999
> 
> 赞同：0
> 
> 时间：2013-03-31T13:43:54.157
> 
> 标签：ios, objective-c, core-data

我正在使用核心数据并在函数中：

```
- (NSFetchedResultsController*)fetchedResultsController() 
```

我想使用可以让 NSFetchRequest 返回具有给定关系值的托管对象的谓词。我试过这个：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"belongToS like[cd] %@", (S*)self.s];
    [fetchRequest setPredicate:predicate];

Note: 
- belongToS: relationship of type (S *)
- self.s is a managed object casted to type (S *) since it is of NSManagedObject and actually it's truly an object of type (S *). 
```

当我运行代码时，它不会返回任何东西！我怎样才能编辑它以使其工作？是否有任何最佳解决方案来获取具有相同关系值的对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T13:53:56.630

`LIKE`在谓词中仅用于比较字符串。要获取与 相关的所有对象，`self.s`应使用以下方法：

```
[NSPredicate predicateWithFormat:@"belongToS = %@", self.s]; 
```