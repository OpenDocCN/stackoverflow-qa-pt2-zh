# StackOverflow 问答 15959000-15959999

# javascript - 带有附加 div 的性能点击事件

> ID：15959001
> 
> 赞同：-2
> 
> 时间：2013-04-11T21:15:52.147
> 
> 标签：javascript, jquery, performance

我有一个 div，我使用 jQuery`append`或`html`.

我搜索了有关使用 jQuery 附加元素的信息。

哪个更好？

使用这样的字符串追加：

```
$('#div_main').append('<div id="div_sub" onclick="func(param);"></div>') 
```

或者：

```
$('#div_main').append($('<div id="div_sub"></div>').click(function(){ func(param) })) 
```

我尝试了第一个速度更快但性能更好的第一个？

注意`append`in 循环。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T21:22:12.997

两者都不。您不应该为动态添加/删除的元素重新绑定事件。相反，您应该将事件委托给他们最近的稳定父级：

```
$('#div_main').on('click', '.sub', function () {
   ...do stuff...
});

$(...).on('click', function () {
    $('#div_main').append('<div class="sub"></div>');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T21:37:20.817

jsperf.com 是测试此类事情的好方法。使用 DOM 明显优于任何一个 jQuery 代码示例（它们的性能大致相同）。看看：http: [//jsperf.com/clickers](http://jsperf.com/clickers)

```
var main = document.getElementById('div_main'),
    clicker = document.createElement('div');

clicker.onclick = function() { func(param) };
main.appendChild(clicker); 
```

# javascript - 在 Heroku 上使用基于插件的架构的应用程序中，我应该如何处理节点模块依赖关系？

> ID：15959003
> 
> 赞同：1
> 
> 时间：2013-04-11T21:16:09.227
> 
> 标签：javascript, node.js, heroku

我正在开发基于 node.js 的框架/服务器。该框架启动一个快速服务器并自动从本地目录加载所有插件。框架和各个插件都有自己的 git 存储库。

框架在这里：[https](https://github.com/Appsecute/appsecute-connector-multi) ://github.com/Appsecute/appsecute-connector-multi （参见 server.js 插件加载）。

一个示例插件在这里：[https ://github.com/Appsecute/appsecute-connector-multi-heroku](https://github.com/Appsecute/appsecute-connector-multi-heroku) ://github.com/Appsecute/appsecute-connector-multi-heroku （有关插件定义/引导文件，请参见 connector.js）。

这一切都在本地正常工作。现在是时候将它部署到 Heroku。我的计划是编写一个小脚本，克隆框架 + 指定插件并构建一个可以部署的文件夹结构。

我在这里写了这个脚本：[https ://github.com/Appsecute/appsecute-connector-multi-deployment](https://github.com/Appsecute/appsecute-connector-multi-deployment)

现在，关于我的问题，是否可以指示 Heroku 在应用程序的根目录（框架）以及特定的子目录（每个插件）中执行“npm install”？

我知道节点会查看相对于正在加载模块的脚本最近的 node_modules 文件夹，因此如果插件尝试加载模块，那么节点将首先查看 app_root/plugins/plugin_name/node_modules - 这正是我想要的，我只需要 Heroku 来确保模块在那里。

我最初计划让我的构建脚本转到各个目录并运行 npm 安装，但后来我记得 Heroku 将执行自己的 npm 安装。

我的另一个选择是编写一些代码来检查每个插件 package.json 文件中的所有依赖项，然后对所有依赖项进行联合并将它们写到 package.json 到应用程序的根目录中。这样，当 Heroku 执行 npm install 时，所有依赖项都将被安装。这听起来很脆弱，并且当不同的插件指定同一模块的不同版本时可能会失败。

而这一切最终引出了一个问题，我只是做错了吗？我应该查看不同的架构/回购结构等吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T22:13:55.597

在花了一段时间追求脚本选项之后，我意识到我应该利用 Node 模块系统和 NPM 来为我处理所有这些。

我最终删除了脚本，而不是框架从插件目录加载插件，它现在期望在实例化时传递一组插件来加载，这最终使整个事情变得非常简单。

**框架/服务器**

```
/**
 * Configures the Node.js Server.
 * @type {*}
 */

var _ = require('underscore'),
    express = require('express'),
    app = express(),
    port = process.env.PORT || 3003;

module.exports = {

    /**
     * Starts the connector multi server.
     * @param {Object} options A hash of options to configure the multi server.
     * @param {Array} options.connectors An array of multi server connectors to load.
     */
    start: function (options) {

        // Sanitize the options
        options = options || {connectors: []};

        // Configure express
        console.log('Configuring express...');
        require('./config/config.js')(app, express);
        require('./config/http-error.js');

        // Load controllers
        console.log('Loading controllers...');
        require('./controllers/appsecute.js')(app);
        require('./controllers/oauth2-client.js')(app);

        // Load connectors
        console.log('Loading connectors...');
        _.each(options.connectors, function (connector) {
            connector(app);
        });

        // Connectors have been loaded, start the multi server
        console.log('Finished loading connectors.');
        console.log('Starting multi connector server...');

        var express_app = app.listen(port);
        console.log("Multi connector server listening on port %d", port);
        return express_app;
    }
}; 
```

**将框架 + 插件拉到一起进行部署的部署存储库**

```
/**
 * A basic wrapper around the multi server that includes specific connector implementations ready for deployment.
 *
 * To add a new connector to the deployment:
 *  1\. Add it as a dependency in package.json
 *  2\. Pass it to the multi connector start() call.
 */
require('appsecute-connector-multi').server.start({
    connectors: [
        require('appsecute-connector-multi-heroku'),
        require('appsecute-connector-multi-tender'),
        require('appsecute-connector-multi-circleci'),
        require('appsecute-connector-multi-zendesk'),
        require('appsecute-connector-multi-github'),
        require('appsecute-connector-multi-travisci')
    ]
}); 
```

这样做的好处是除了简单之外，因为框架和所有单独的插件都被指定为部署项目中 package.json 中的依赖项，NPM 负责拉下所有共同依赖项，正如您所期望的那样:)

# java - 如何使用 JPype 在 Python 中导入用户构建的 jar？

> ID：15959004
> 
> 赞同：5
> 
> 时间：2013-04-11T21:16:11.957
> 
> 标签：java, python, jpype

我在 Python 中使用 JPype，所以我可以调用 Java 函数。我无法导入自己的 jar 文件。

我有这个罐子：`/home/di/eclipse_plugins/plugins/org.eclipse.birt.report.engine_4.2.1.v20120820.jar`

在`org.eclipse.birt.report.engine.api`包中有一个`EngineConfig`类定义。我正在尝试实例化并使用我在那个 jar 中的这个类。在常规 Java 中，这就是我所拥有的：

```
import org.eclipse.birt.report.engine.api.EngineConfig;

EngineConfig config = new EngineConfig();     
config.setLogConfig("/home/di/logs"); 
```

我在 Python 中有这个：

```
import jpype
from jpype import *

jvmPath = jpype.getDefaultJVMPath() 
jpype.startJVM(jvmPath, "-Djava.class.path=/home/di/eclipse_plugins/plugins/*.jar")
engineConfig = JPackage("org").eclipse.birt.report.engine.api.EngineConfig
engineConfig.setLogConfig("/home/di/logs")
jpype.shutdownJVM() 
```

但是，当我运行它时，我收到此错误：

```
Traceback (most recent call last):
  File "test.py", line 15, in <module>
    engineConfig.setLogConfig()
  File "/usr/lib64/python2.6/site-packages/jpype/_jpackage.py", line 53, in __call__
    raise TypeError, "Package "+self.__name+" is not Callable"
TypeError: Package org.eclipse.birt.report.engine.api.EngineConfig.setLogConfig is not Callable 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-11T12:28:08.870

我无法重现完全相同的错误（相反，我得到了“RuntimeError：未找到匹配的重载”）。不过，我在您的 Python 代码中发现了一个问题：

```
engineConfig = JPackage("org").eclipse.birt.report.engine.api.EngineConfig 
```

你在engineConfig 中得到的是一个类。

setLogConfig() 不是静态方法，所以必须先实例化 EngineConfig 类：

```
# Get EngineConfig class
EngineConfig = JPackage("org").eclipse.birt.report.engine.api.EngineConfig
# Instantiate EngineConfig
engineConfig = EngineConfig()
# Call method
engineConfig.setLogConfig("/home/di/logs") 
```

# git - 未跟踪的文件 - 是否有交互模式来处理它们？

> ID：15959005
> 
> 赞同：4
> 
> 时间：2013-04-11T21:16:19.093
> 
> 标签：git

有时，某些文件会出现在工作树上。他们没有被追踪，

我们希望丢弃其中一些文件而不是暂存它们，但是，我们可能希望暂存它们。

我的问题是：我们是否可以使用某种交互命令逐步选择我们想要保留的文件以及我们想要忽略的文件？

希望我的问题很清楚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T21:23:12.393

您可以玩弄`git add -i`以交互方式暂存文件。

```
$ git status
# On branch master
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#       a
#       b
#       c
#       d
nothing added to commit but untracked files present (use "git add" to track)

$ git add -i
           staged     unstaged path

*** Commands ***
  1: status       2: update       3: revert       4: add untracked
  5: patch        6: diff         7: quit         8: help
What now> a
  1: a
  2: b
  3: c
  4: d
Add untracked>> 2
  1: a
* 2: b
  3: c
  4: d
Add untracked>> 4
  1: a
* 2: b
  3: c
* 4: d
Add untracked>> 
added 2 paths

*** Commands ***
  1: status       2: update       3: revert       4: add untracked
  5: patch        6: diff         7: quit         8: help
What now> s
           staged     unstaged path
  1:        +0/-0      nothing b
  2:        +0/-0      nothing d

*** Commands ***
  1: status       2: update       3: revert       4: add untracked
  5: patch        6: diff         7: quit         8: help
What now> q
Bye.

$ git status
# On branch master
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#       new file:   b
#       new file:   d
#
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#       a
#       c 
```

虽然有点离题，但我只想添加以下信息：

`git add -i`比上述用例强大得多。例如，如果您只想在文件中添加部分更改，您可以使用该`patch`模式。

当我意识到我想将单个文件中的更改分成2个单独的提交时，我已经使用了补丁模式，地狱很多次，但我不想手动创建文件的副本，编辑原始文件，阶段，提交并为下一次提交再次执行相同的操作。

在补丁模式下，git 为您提供了将更改分解为更小的补丁并仅暂存这些大块的选项。如果 git 没有自动给你最好的块，你可以在编辑器提示中自己手动分解块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T21:22:31.600

您可以使用`git add -i -A`获取未跟踪文件的交互式提示。选择`4: [a]dd untracked`然后按数字或快捷方式字母切换列表中文件的包含。

不确定“比较两个存储库”是什么意思。任何存储库都可以`git fetch`用来添加任何其他存储库的内容，然后将生成的修订版（或在工作存储库的情况下，修改后的文件）与`git diff`.

# algorithm - Whats the number of steps this algorithm will take for the general case where the input is of size n?

> ID：15959006
> 
> 赞同：-1
> 
> 时间：2013-04-11T21:16:19.883
> 
> 标签：algorithm, complexity-theory

Here's the algorithm:

```
Let a = 30, i = 1
While i < n
    For j = i+1 to n
        If ABS[(j*i)+20] < a then a = ABS[(j*i)+20]
    i = i + 1
Return k 
```

Whats the number of steps this algorithm will take for the general case where the input is of size n? How do you work that out?

Also does this algorithm come under the quadratic complexity class?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:48:30.450

我认为这是与`O(n^2)`

我们有

```
n+(n-1)+(n-2)+(n-3)......[total n] ....3.2.1 
```

如果我们计算它，它将是

```
0.5( (n^2) + n) = C (n^2 + n) 
```

它是二次复杂度类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T21:29:22.610

让 f(i) 表示内部 for 循环运行的次数，假设 j 从 i+1 变为 n。例如 f(5) = n - 5 + 1，因为 j 经过 6,7,...,n。所以我们想要 f(1) + f(2) + f(3) + ... + f(n - 1)。计算每个 f(i) 的内容，然后将它们相加得到确切的答案。

通常有一个运行 n 次的外循环，然后内循环最多运行 n 次，复杂度上限为 ???

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T21:34:32.317

如果我是编译器，我会注意到这段代码只改变`i`, `j`, 和`a`, 局部变量；并且随后使用其值的唯一变量是`k`。所以我会逐渐优化除此之外的所有内容：

```
Return k 
```

并且计算都是恒定的时间，只有几条机器指令。因此也在二次时间内。

# vba - Import web data in excel using VBA

> ID：15959008
> 
> 赞同：3
> 
> 时间：2013-04-11T21:16:21.930
> 
> 标签：vba, excel

I want to import MutualFundsPortfolioValues to Excel. I don't know how to import data from a web site which I need to do is import web data to Excel within 2 different dates of chosen companies ..

When I input dates to B3 and B4 cells and click Commandbutton1, Excel might import all data from my web-page to my Excel sheets "result"

For example:

```
date 1: 04/03/2013 <<<< " it will be in sheets "input" cell B3
date 2 : 11/04/2013 <<<<< " it will be in sheet "input " cell B4
choosen companies <<<<<< its Range "B7: B17" 
```

I have added a sample excel worksheet and a printscreen of the web page.. Any ideas?

My web page url :

[http://www.spk.gov.tr/apps/MutualFundsPortfolioValues/FundsInfosFP.aspx?ctype=E&submenuheader=0](http://www.spk.gov.tr/apps/MutualFundsPortfolioValues/FundsInfosFP.aspx?ctype=E&submenuheader=0)

Sample Excel and Sample picture of the data: [http://uploading.com/folders/get/b491mfb6/excel-web-query](http://uploading.com/folders/get/b491mfb6/excel-web-query)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T02:22:19.290

Here is the code to import data using IE Automation.

> **Input Parameters** (Enter in Sheet1 as per screenshot below)
> start date = B3
> end date = B4
> Şirketler = B5 (It allows multiples values which should appear below B5 and so on)

![enter image description here](https://i.stack.imgur.com/nt0rB.png)

**ViewSource of page** input fileds ![enter image description here](https://i.stack.imgur.com/xeZpO.gif)

**How code works :**

*   The code creates object of Internet Explorer and navigates to [site](http://www.spk.gov.tr/apps/MutualFundsPortfolioValues/FundsInfosFP.aspx?ctype=E&submenuheader=0)
*   Waits till the page is completely loaded and ready. (IE.readystate)
*   Creates the object html class
*   Enter the values for the input fields from Sheet1 (txtDateBegin,txtDateEnd , lstCompany)
*   Clicks on the submit button
*   Iterates thru each row of table dgFunds and dumps into excel Sheet2

**Code:**

```
 Dim IE As Object
Sub Website()

    Dim Doc As Object, lastRow As Long, tblTR As Object
    Set IE = CreateObject("internetexplorer.application")
    IE.Visible = True

navigate:
    IE.navigate "http://www.spk.gov.tr/apps/MutualFundsPortfolioValues/FundsInfosFP.aspx?ctype=E&submenuheader=0"

    Do While IE.readystate <> 4: DoEvents: Loop

    Set Doc = CreateObject("htmlfile")
    Set Doc = IE.document

    If Doc Is Nothing Then GoTo navigate

    Set txtDtBegin = Doc.getelementbyid("txtDateBegin")
    txtDtBegin.Value = Format(Sheet1.Range("B3").Value, "dd.MM.yyyy")

    Set txtDtEnd = Doc.getelementbyid("txtDateEnd")
    txtDtEnd.Value = Format(Sheet1.Range("B4").Value, "dd.MM.yyyy")

    lastRow = Sheet1.Range("B65000").End(xlUp).row
    If lastRow < 5 Then Exit Sub

    For i = 5 To lastRow

        Set company = Doc.getelementbyid("lstCompany")
        For x = 0 To company.Options.Length - 1
            If company.Options(x).Text = Sheet1.Range("B" & i) Then
                company.selectedIndex = x

                Set btnCompanyAdd = Doc.getelementbyid("btnCompanyAdd")
                btnCompanyAdd.Click
                Set btnCompanyAdd = Nothing

                wait
                Exit For
            End If
        Next
    Next

    wait

    Set btnSubmit = Doc.getelementbyid("btnSubmit")
    btnSubmit.Click

    wait

    Set tbldgFunds = Doc.getelementbyid("dgFunds")
    Set tblTR = tbldgFunds.getelementsbytagname("tr")

    Dim row As Long, col As Long
    row = 1
    col = 1

    On Error Resume Next

    For Each r In tblTR

        If row = 1 Then
            For Each cell In r.getelementsbytagname("th")
                Sheet2.Cells(row, col) = cell.innerText
                col = col + 1
            Next
            row = row + 1
            col = 1
        Else
            For Each cell In r.getelementsbytagname("td")
                Sheet2.Cells(row, col) = cell.innerText
                col = col + 1
            Next
            row = row + 1
            col = 1
        End If
    Next

    IE.Quit
    Set IE = Nothing

    MsgBox "Done"

End Sub

Sub wait()
    Application.wait Now + TimeSerial(0, 0, 10)
    Do While IE.readystate <> 4: DoEvents: Loop
End Sub 
```

**Ouput table** in Sheet 2

![enter image description here](https://i.stack.imgur.com/I0XUB.png)

HTH

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T21:46:27.023

you could [read about it by clicking here](http://r1c1.blogspot.co.uk/2006/09/using-web-queries-to-import-data-to.html) then use the macro recorder to record doing it, this will give you some code to work with and if you need more help just ask

here is another question on Stack Overflow: [Importing data from web page with diffrent Dates in excel using VBA code](https://stackoverflow.com/questions/14762570/importing-data-from-web-page-with-diffrent-dates-in-excel-using-vba-code)

basically you're going to add a QueryTable object to the QueryTables collection of the Active worksheet in Excel.

Here is the MSDN reference on Query Tables: [MSDN Library: Excel 2007 Querytables Add method](http://msdn.microsoft.com/en-us/library/office/bb178808%28v=office.12%29.aspx)

# java - 使用非默认构造函数动态类实例化

> ID：15959010
> 
> 赞同：0
> 
> 时间：2013-04-11T21:16:40.953
> 
> 标签：java, reflection, jruby

给定 jar 文件的绝对路径和类名，我正在尝试动态实例化一个 java 类。具体来说，我正在尝试实例化这个 java 类：

```
public Tool(String[] args) {
   this.args = args;
   errMgr = new ErrorManager(this);
   errMgr.setFormat(msgFormat);
   handleArgs();
} 
```

我一直在尝试以下方法：

```
require 'java';
java_import 'java.io.File';
java_import 'java.net.URL';
java_import 'java.net.URLClassLoader';

class JarLoader
    def self.load_class(p_jar_path, p_class_name, p_args)
        # p_jar_path: absolute path to jat 
        l_jar_url = File.new(p_jar_path).toURL;
        l_url_arr = Array[l_jar_url].to_java(java.net.URL);
        l_class_loader = JavaNet::URLClassLoader.new(l_url_arr);
        # p_class_name: name of the class
        l_class_type = l_class_loader.loadClass(p_class_name);
        # Get the right constructor
        l_constructor = l_class_type.getConstructor(Array(String).to_java.class);
        return l_constructor.newInstance(p_args.to_java(:string));
    end
end 
```

我得到错误

```
Java::JavaLang::NoSuchMethodException: org.antlr.v4.Tool.<init>([Ljava.lang.Object;) 
```

不知何故，构造函数的参数最终是错误的类型。我正在使用 java jdk 1.5（因为我需要使用 oracle 11g db）和 jruby 1.7.1。

我对此束手无策。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:13:19.480

您需要传递一个（Java）字符串数组来`get_declared_constructor`检索正确的构造函数，然后在调用时将该数组作为对象传递`newInstance`：

```
# Get the right constructor
l_constructor = l_class_type.get_declared_constructor(p_args.to_java(:string).java_class)
return l_constructor.new_instance(p_args.to_java(:string).to_java_object) 
```

# python - find the largest value in 2d dictionary wrt to the key

> ID：15959012
> 
> 赞同：-1
> 
> 时间：2013-04-11T21:16:46.697
> 
> 标签：python

I have data in following form:

```
key, time_bin, count
abc, 1, 200
abc, 2,230
abc1,1,300
abc1,2,180
abc2,1, 300
abc2,2, 800 
```

So each of the key has same number of time_bin..

I want to find the following.. For each,time bin which are the top n keys based on count..

So, in the example above.. lets say I want to find out.. what are the top 2 keys for each time bin? So..answer is

```
1=> [{"abc1",300},{"abc2":300}]
2=> ({"abc2":800},{"abc":230}] 
```

WHat is a good way to solve this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T21:21:51.007

[`collections.Counter`](http://docs.python.org/2/library/collections.html#collections.Counter)与 一起使用[`collections.defaultdict`](http://docs.python.org/2/library/collections.html#collections.defaultdict)：

```
from collections import Counter, defaultdict
import csv

counts = defaultdict(Counter)

with open(somefilename, 'rb') as f:
    reader = csv.reader(f)
    next(reader)  # skip the header
    for row in reader:
        key, time_bin, count = row[0], int(row[1]), int(row[2])
        counts[time_bin][key] += count

for time_bin in counts:
    print '{}=> {}'.format(time_bin, counts[time_bin].most_common(2)) 
```

该`Counter.most_common()`方法在这里特别有用；它返回给定计数集的最高计数，此处按时间 bin 收集。

输出格式*几乎*与您的示例匹配：

```
1=> [('abc1', 300), ('abc2', 300)]
2=> [('abc2', 800), ('abc', 230)] 
```

因为`.most_common()`返回元组列表，而不是字典。

# javascript - Google Earth API getBalloonHtmlUnsafe 在平移时抑制气球

> ID：15959014
> 
> 赞同：1
> 
> 时间：2013-04-11T21:17:22.593
> 
> 标签：javascript, api, kml, pan, balloon

如果我点击一个多边形然后平移，会弹出一个气球。当我没有得到 BalloonHtmlUnsafe 时，这不是问题。有没有办法修改我的代码以在我平移时抑制气球弹出？我是 javascript 新手，所以请尽可能提供一个示例。

我正在获取包含 html 气球的 kml。这是我正在使用的事件监听器：

```
 google.earth.addEventListener(ge.getGlobe(), 'click', function(event) {
  var obj = event.getTarget();
  if (obj.getType() === 'KmlPlacemark'){
  event.preventDefault();
  var placemark = obj;
  var placemark_desc_active = placemark.getBalloonHtmlUnsafe();
  var balloon = ge.createHtmlStringBalloon('[CDATA]');
  balloon.setContentString(placemark_desc_active);
        balloon.setMaxWidth(500);
        balloon.setMaxHeight(500);
  ge.setBalloon(balloon); }}); 
```

谢谢你的帮助

# vba - 公共变量在表单中的 VBA 中并不是真正公共的

> ID：15959018
> 
> 赞同：11
> 
> 时间：2013-04-11T21:17:37.330
> 
> 标签：vba, scope

下面是一个我自己回答的问题，但是它给我带来了很大的挫败感，我在网上搜索它时遇到了很多麻烦，所以我在这里发帖希望为其他人节省一些时间和精力，如果我将来忘记这一点，也许对我自己来说：

对于 VBA（在我的情况下，MS Excel），**`Public`声明应该使该模块中的其他函数或子例程以及在任何其他模块。

事实证明这不是真的，在 , 的情况下`Forms`**，我也怀疑在`Sheets`，但我没有验证后者。

简而言之，以下内容在创建时**不会创建公共的、可访问的变量**`Form`，因此会崩溃，说 bYesNo 和 dRate 变量在 mModule1 中未定义：

```
(inside fMyForm)
Public bYesNo As Boolean`
Public dRate As Double

Private Sub SetVals()
    bYesNo = Me.cbShouldIHaveADrink.value
    dRate = CDec(Me.tbHowManyPerHour.value)
End Sub
(Presume the textbox & checkbox are defined in the form)

(inside mModule1)
Private Sub PrintVals()
    Debug.Print CStr(bYesNo)
    Debug.Print CStr(dRate)
End Sub 
```

但是，如果您在下面进行轻微更改，一切都会正常工作：

```
(inside fMyForm)

Private Sub SetVals()
    bYesNo = Me.cbShouldIHaveADrink.value
    dRate = CDec(Me.tbHowManyPerHour.value)
End Sub
(Presume the textbox & checkbox are defined in the form)

(inside mModule1)
Public bYesNo As Boolean`
Public dRate As Double
Private Sub PrintVals()
    Debug.Print CStr(bYesNo)
    Debug.Print CStr(dRate)
End Sub 
```

`mModule1`将工作得很好，并且假设总是首先调用 fMyForm，然后在`PrintVals`运行例程时，将正确捕获表单中文本框和复选框的值。

老实说，我无法理解 MS 对这种变化的想法，但缺乏一致性会极大地降低效率，学习这样的特质，这些特质的记录非常差，以至于 2013 年的谷歌搜索可能已经存在一段时间了十年或更长时间的搜索是如此具有挑战性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-11-30T15:03:19.380

第一条评论：

Userform 和 Sheet 模块是 Object 模块：它们的行为方式与常规模块不同。但是，您可以以与引用类属性类似的方式引用用户窗体中的变量。在您提到 fMyForm.bYesNo 的示例中可以正常工作。如果您没有将bYesNo 声明为Public，那么表单外部的代码将看不到它，因此当您将其设为Public 时，它确实与非Public 不同。——蒂姆·威廉姆斯 2013 年 4 月 11 日 21:39

其实是正确答案...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-18T10:03:09.773

作为社区答案的快速附加答案，仅供参考：

当您实例化您的表单时，您可以使用表单对象本身，或者您可以通过使用 New 并将其放入变量中来创建表单对象的新实例。后一种方法更清洁 IMO，因为这使得使用更少单例。

但是，当您在用户窗体中调用 Unload(Me) 时，*所有*公共成员都将被清除。所以，如果你的代码是这样的：

```
 Dim oForm as frmWhatever
  Set oForm = New frmWhatever
  Call oForm.Show(vbModal)
  If Not oForm.bCancelled Then  ' <- poof - bCancelled is wiped clean at this point 
```

我用来防止这种情况的解决方案，它也是 OP 的一个很好的替代解决方案，是将所有带有表单的 IO（即所有公共成员）捕获到一个单独的类中，并使用该类的实例与表格。所以，例如

```
 Dim oFormResult As CWhateverResult
  Set oFormResult = New CWhateverResult
  Dim oForm as frmWhatever
  Set oForm = New frmWhatever
  Call oForm.Initialize(oFormResult)
  Call oForm.Show(vbModal)
  If Not oFormResult.bCancelled Then  ' <- safe 
```

# assembly - 未知伪操作：.bss

> ID：15959019
> 
> 赞同：0
> 
> 时间：2013-04-11T21:17:38.263
> 
> 标签：assembly

我将我的 mac 设置为运行 32 位。

我的 asm 代码是

```
.data
        HelloWorldString:
            .asciz "Hello World of Assembly!"
        H3110:
            .asciz "H3110"
.bss
    .lcomm Destination, 100
    .lcomm DestinationUsingRep, 100
    .lcomm DestinationUsingStos, 100
.text
...
... 
```

但是，当我跑步时

```
as -arch i386 -g -o StringBasics.o StringBasics.s 
```

在终端中，它打印

```
StringBasics.s:6:Unknown pseudo-op: .bss 
```

我已经四处寻找，但对此仍然很迷茫。

提前致谢！

# excel - Macro Needed to Rollup Mulitple Excel Files

> ID：15959025
> 
> 赞同：1
> 
> 时间：2013-04-11T21:18:14.877
> 
> 标签：excel, rollup

I have multiple excel files that are structured identically and are in a folder.

Each excel files data starts at d4 (multiple rows of data but all rows start on the subsequent d)

I need a macro to take the data from all the separate excel files in the folder and create a single new excel file of all the data from the separate excel files, structured like the following.

1.) Data from excel file one starts at a1 in the rollup file

2.) Data from excel file two appended underneath the data from the first excel file in the rollup file

3.) Repeat for all the excel files in the folder.

Thanks

Edit I found this (I am sorry I don't remember where, I do remember it was not working) I know very little about excel and vba (I mostly I work in php), I feel I am asking a lot with out being able to offer much help of my own toward getting what I need, I apologize for this.

I made two simple excel files and added a row of data in each and ran the macro in a excel file called Rollup. I think the problem with this code is that it works in that in the Rollup excel file the cursor moves to the appropriate row as if it appended both files but there is no data showing up.

```
Sub extract()
Dim a, b, c, d, n, x As Integer
Dim f As String
Cells(2, 1).Select
f = Dir("C:\" & "*.xls")
Do While Len(f) > 0
ActiveCell.Formula = f
ActiveCell.Offset(1, 0).Select
f = Dir()
n = n + 1
Loop
x = Cells(Rows.Count, 1).End(xlUp).Row
d = 2
For a = 2 To x
Cells(d, 2) = Cells(a, 1)
For c = 1 To 20
b = 1
Cells(1, 1) = "='c:\[" & Cells(a, 1) & "]sheet1'!" & Chr(b + 64) & c
If Cells(1, 1) = "0" Then
Exit For
Else
For b = 3 To 6
Cells(d, b) = "='c:\[" & Cells(a, 1) & "]sheet1'!" & Chr(b + 64) & c
Next b
End If
d = d + 1
Next c
d = d + 1
Next a
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T15:35:02.270

对于一个简单的汇总，以下工作，更复杂的需要去这里：http: [//msdn.microsoft.com/en-us/library/office/cc837974%28v=office.12%29.aspx](http://msdn.microsoft.com/en-us/library/office/cc837974%28v=office.12%29.aspx)

```
Sub test()
  Dim myFile As String, sh As Worksheet, myRange As Range
  Const MyPath = "C:\My path\" ' to be modified
  Workbooks.Add 1 ' Add a new workbook
  Set sh = ActiveWorkbook.ActiveSheet
  myFile = Dir(MyPath & "*.xls")
  Do While myFile <> ""
    Workbooks.Open MyPath & myFile
    Rows(1).Copy sh.Rows(1)
    Set myRange = ActiveSheet.UsedRange
    Set myRange = myRange.Offset(4).Resize(myRange.Rows.Count - 1) '(4) is how many  rows to ignore befor coping data
    myRange.Copy sh.Range("A65").End(xlUp).Offset(1)
    Workbooks(myFile).Close False
    myFile = Dir
  Loop
End Sub 
```

# r - Convert character vector to numeric vector in R for value assignment?

> ID：15959027
> 
> 赞同：-1
> 
> 时间：2013-04-11T21:18:18.023
> 
> 标签：r, math, syntax, statistics

I have:

```
z = data.frame(x1=a, x2=b, x3=c, etc) 
```

I am trying to do:

```
for (i in 1:10)
{
    paste(c('N'),i,sep="") -> paste(c('z$x'),i,sep="")
} 
```

Problems:

1.  `paste(c('z$x'),i,sep="")` yields `"z$x1", "z$x1"` instead of calling the actual values. I need the expression to be evaluated. I tried `as.numeric, eval`. Neither seemed to work.

2.  `paste(c('N'),i,sep="")` yields `"N1", "N2"`. I need the expression to be merely used as name. If I try to assign it a value such as `paste(c('N'),5,sep="") -> 5`, ie `"N5" -> 5` instead of `N5 -> 5`, I get target of assignment expands to non-language object.

This task is pretty trivial since I can simply do:

N1 = x1... N2 = x2...

etc, but I want to learn something new

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T01:47:50.360

我建议使用类似`for( i in 1:10 ) z[,i] <- N[,i]`...

但是，既然你说你想学习新东西，你可以玩弄`parse`and `substitute`。

注意：这些小工具很有趣，但有经验的用户（不是我）避免使用它们。

这被称为“语言计算”。这很有趣，它有助于理解 R 的工作方式。让我试着做一个介绍：

基本的语言结构是一个常数，如数字或字符向量。它是微不足道的，因为它与其“未评估”版本没有什么不同，但它是更复杂表达式的构建块之一。

（官方）基本语言对象是`symbol`，也称为`name`. 它只不过是指向另一个对象的指针，即标识可能存在或不存在的另一个对象的标记。例如，如果你运行`x <- 10`， then`x`是一个引用 value 的符号`10`。换句话说，评估符号`x`会产生数字向量`10`。评估不存在的符号会产生错误。

符号看起来像一个字符串，但它不是。您可以使用 将字符串转换为符号`as.symbol("x")`。

下一个语言对象是`call`. 这是一个递归对象，实现为 a `list`，其元素是常量、符号或另一个调用。第一个元素*不能*是常量，因为它必须计算为`function`将被调用的实数。其他元素是此函数的参数。

如果第一个参数不计算为现有函数，R 将抛出`Error: attempt to apply non-function`or `Error: could not find function "x"`（如果第一个参数是未定义的符号或指向函数以外的东西）。

示例：代码行将`f(x, y+z, 2)`被解析为 4 个元素的列表，第一个是`f`（作为符号），第二个是`x`（另一个符号），第三个是 another `call`，第四个是数字常量。第三个元素`y+z`, 只是一个带有两个参数的函数，因此它解析为三个名称的列表`'+'`：`y`和`z`。

最后，还有一个`expression`对象，即调用/符号/常量的列表，旨在逐个评估。

你会在这里找到很多信息：

[https://github.com/hadley/devtools/wiki/Computing-on-the-language](https://github.com/hadley/devtools/wiki/Computing-on-the-language)

好的，现在让我们回到你的问题:-)

您尝试过的方法不起作用，因为 的输出`paste`是一个字符串，并且赋值函数期望作为其第一个参数的东西可以计算为符号，可以创建或修改。*或者，第一个参数也可以评估为与替换*函数关联的调用。这些有点棘手，但它们由赋值函数本身处理，而不是由解析器处理。

您看到的错误消息`target of assignment expands to non-language object`是由赋值函数触发的，正是因为您的目标计算结果为字符串。

我们可以解决这个问题，建立一个在正确位置有你想要的符号的调用。最“蛮力”的方法是将所有内容放在一个字符串中并使用解析：

```
parse(text=paste('N',i," -> ",'z$x',i,sep="")) 
```

到达那里的另一种方法是使用`substitute`：

```
substitute(x -> y, list(x=as.symbol(paste("N",i,sep="")), y=substitute(z$w, list(w=paste("x",i,sep=""))))) 
```

内部替代创建`call`s`z$x1`等`z$x2`。外部替代将此调用作为赋值的标记，并将符号`N1`等`N2`作为值。

`parse`结果是`expression`，并且`substitute`是`call`。两者都可以传递给以`eval`获得相同的结果。

最后一点：我再说一遍，所有这些都是为了作为一个教学示例，以帮助理解语言的内部工作原理，但是使用and*远非*良好的编程实践，除非*真的*别无选择。`parse``substitute`

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T01:55:20.530

A`data.frame`是一个`named list`。这通常是一种很好的做法，并且习惯`R-ish`上不要在全局环境中拥有很多对象，而是在列表中拥有相关（或相似）的对象并使用`lapply`等。

您可以使用`list2env`将列表的命名元素（data.frame 中的列）多重分配给全局环境

```
DD <- data.frame(x = 1:3, y = letters[1:3], z = 3:1)
list2env(DD, envir = parent.frame())
## <environment: R_GlobalEnv>
## ta da, x, y and z now exist within the global environment 
x
## [1] 1 2 3
y
## [1] a b c
## Levels: a b c
z
## [1] 3 2 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T21:44:23.577

我不确定您要完成什么。但这里有一个猜测：

```
### Create a data.frame using the alphabet
data <- data.frame(x = 'a', y = 'b', z = 'c')

### Create a numerical index corresponding to the letter position in the alphabet
index <- which(tolower(letters[1:26]) == data[1, ])

### Use an 'lapply' to apply a function to every element in 'index'; creates a list
val <- lapply(index, function(x) {
    paste('N', x, sep = '')
})

### Assign names to our list
names(val) <- names(data)

### Observe the result
val$x 
```*

# c# - Simultaneous equations in C# LINQ

> ID：15959032
> 
> 赞同：-6
> 
> 时间：2013-04-11T21:18:45.893
> 
> 标签：c#, linq, equation

I am not 100% sure the right term is simultaneous equation. It could also be function group.

My problem is that I am trying to solve equations with two or more unknowns with LINQ.

For example:

```
x + y = 10
3x + 5y = 30 
```

(or with x, y and z etc.)

I have searched everywhere but couldn't find any info regarding this kind of mathematical questions in LINQ.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T21:20:49.930

尝试查看[Math.NET Linq 代数](http://linqalgebra.mathdotnet.com/)库。它可以做你所要求的。

# scala - How to expose REST service for JSON?

> ID：15959034
> 
> 赞同：11
> 
> 时间：2013-04-11T21:18:53.580
> 
> 标签：scala, spray, spray-json

I need to expose a Spray service that accepts JSON payload. Where can I find a sample that would demonstrate such a feature?

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-05-01T08:28:09.377

当我开始学习 Spray 时，我使用[了这个很棒的示例项目](https://github.com/jacobus/s4)。它向您展示了如何构建您的应用程序等等。

如果你想看看它是如何在路由级别使用 spray-json 的，那么看看[这个例子](https://github.com/jacobus/s4/blob/master/src/main/scala/s4/rest/S4Service.scala)。

希望能帮助到你！（对 Jacobus 的 S4 表示敬意）

# neural-network - Why does feedforwardnet(int32(8)) raise an error while feedforwardnet(double(8)) doesn't?

> ID：15959036
> 
> 赞同：1
> 
> 时间：2013-04-11T21:18:54.990
> 
> 标签：neural-network, matlab

In MATLAB, `feedforwardnet(8)` creates a feedforward network with one hidden layer containing 8 hidden neurons. MATLAB stores numeric data as double-precision floating point (double) [by default](http://www.mathworks.com/help/matlab/matlab_prog/integers.html). Therefore `feedforwardnet(8)` is equivalent to `feedforwardnet(double(8))`.

However, `feedforwardnet(int32(8))` will raise the following error:

```
Undefined function or variable 'ind'.

Error in network/subsasgn>setLayerSize (line 1170)
  err = sprintf('"layers{%g}.size" must be a positive integer.',ind);

Error in network/subsasgn>network_subsasgn (line 180)
        if isempty(err), [net,err] = setLayerSize(net,i,newSize); end

Error in network/subsasgn (line 13)
net = network_subsasgn(net,subscripts,v,netname);

Error in feedforwardnet>create_network (line 116)
      net.layers{i}.size = param.hiddenSizes(i);

Error in feedforwardnet (line 69)
    net = create_network(param); 
```

Why won't `feedforwardnet()` takes an `int32` as argument? Equivalently, why doesn't `isposint()` (in *network/subsasgn.m, line 1169)) returns `true` when given `int32(8)` as argument?

The code was tested with MATLAB 2011a, 2012a and 2012b.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T21:57:55.333

不确定您拥有哪个版本的工具箱，但 1.7 版`isposint(v)`测试了这样的论点：

```
[...]
if ~isa(v,'double') | any(size(v) ~= [1 1]) | ...
  ~isreal(v) | v<0 | round(v) ~= v
[...] 
```

这意味着它将返回所有`false`不是`double`.`double`

至于*“未定义的函数或变量'ind'”。*消息，我的猜测是因为代码中的错误（变量`ind`没有在函数的任何地方创建/分配/作为参数传递）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T22:32:49.083

在第 9 行编辑（风险自负，未经彻底测试）`isposint.m`：

```
% if ~isa(v,'double') | any(size(v) ~= [1 1]) | ...
if ~isnumeric(v) | any(size(v) ~= [1 1]) | ... 
```

两者都经过：

```
a = feedforwardnet(8);
b = feedforwardnet(int32(8)); 
```

大小变化不大：

```
>> whos
  Name      Size            Bytes  Class      Attributes

  a         1x1             31224  network              
  b         1x1             30968  network 
```

# eclipse - 带有 gradle 的 Eclipse 智能感知

> ID：15959038
> 
> 赞同：0
> 
> 时间：2013-04-11T21:19:06.433
> 
> 标签：eclipse, intellisense, gradle

当我在 Eclipse 中编辑**build.gradle**文件时，我想要智能感知来帮助我完成单词。我怎样才能做到这一点？

![在此处输入图像描述](https://i.stack.imgur.com/7DdqF.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T22:09:57.023

SpringSource 有一个 Gradle 插件，它可以帮助您。

在安装 Gradle 插件之前，我想我只是在我的项目中添加了 Groovy Nature 之后使用 Preferences 来始终打开 Groovy Editor 的 build.gradle。

# sql - 如何在 MS Access 中编写此 SQL 查询

> ID：15959040
> 
> 赞同：0
> 
> 时间：2013-04-11T21:19:13.287
> 
> 标签：sql, vba, ms-access

我有一个这样的记录列表

```
ID---EffectiveDate---Rate
1----1/1/2011--------1.2
2----1/1/2012--------1.3
3----1/1/2013--------1.5
4----1/1/2014--------1.2 
```

给定一个日期参数 d1，我想获取 d1 之前的最新生效日期的记录。所以，如果 d1 = 6/1/2012，我想获得第二条记录。如何在 MS Access SQL 中编写这样的查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:26:24.593

尝试这个，

```
select top 1 * from tablename where EffectiveDate<=d1 order by EffectiveDate desc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T21:24:15.380

根据您的数据，我认为 SQL 查询看起来像这样：

```
SELECT TOP 1 EffectiveDate
FROM MyTableOfDates
WHERE EffectiveDate <= #MyInputDate#
ORDER BY EffectiveDate DESC 
```

# hibernate - Hibernate connection provider issue

> ID：15959041
> 
> 赞同：0
> 
> 时间：2013-04-11T21:19:20.707
> 
> 标签：hibernate, jboss

We are facing a strange issue.

We are having a web application with spring and hibernate persistence. We are facing issue while deploying our application on Jboss with below error

```
Caused by: org.hibernate.HibernateException: Could not instantiate connection provider [org.springframework.orm.hibernate3.TransactionAwareDataSourceConnectionProvider]
    at org.hibernate.service.jdbc.connections.internal.ConnectionProviderInitiator.instantiateExplicitConnectionProvider(ConnectionProviderInitiator.java:192) [hibernate-core-4.1.9.Final.jar:4.1.9.Final]
    at org.hibernate.service.jdbc.connections.internal.ConnectionProviderInitiator.initiateService(ConnectionProviderInitiator.java:114) [hibernate-core-4.1.9.Final.jar:4.1.9.Final]
    at org.hibernate.service.jdbc.connections.internal.ConnectionProviderInitiator.initiateService(ConnectionProviderInitiator.java:54) [hibernate-core-4.1.9.Final.jar:4.1.9.Final]
    at org.hibernate.service.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:69) [hibernate-core-4.1.9.Final.jar:4.1.9.Final]
    at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:176) [hibernate-core-4.1.9.Final.jar:4.1.9.Final]
    ... 37 more
Caused by: java.lang.ClassCastException: org.springframework.orm.hibernate3.TransactionAwareDataSourceConnectionProvider cannot be cast to org.hibernate.service.jdbc.connections.spi.ConnectionProvider
    at org.hibernate.service.jdbc.connections.internal.ConnectionProviderInitiator.instantiateExplicitConnectionProvider(ConnectionProviderInitiator.java:189) [hibernate-core-4.1.9.Final.jar:4.1.9.Final]
    ... 41 more 
```

Looks like it is conflicting with existing jar in jboss. SAme setup is working fine in windows but not working in linux server.

Please help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:34:35.057

您正在将 Hibernate 4.1.9 与`org.springframework.orm.hibernate3`包中的类一起使用。你不应该。此包中的类必须与 Hibernate 3.x 一起使用。要将 Hibernate 4 与 Spring 一起使用，请使用`org.springframework.orm.hibernate4`包中的类。

# c# - 从 C# 调用 Autohotkey 脚本

> ID：15959042
> 
> 赞同：6
> 
> 时间：2013-04-11T21:19:23.693
> 
> 标签：c#, autohotkey

我是 C# 的完整初学者，但使用 autohotkey 的高级用户。

如果我有这个脚本，我怎么能从 C# 调用它？

```
 ins::suspend
    SendMode Input
    Lbutton::
    Loop
    {
    GetKeyState, state, Lbutton, P
    if state=U
    break
    Sendinput {Click down}
    Sleep 25
    Sendinput {Click up}
    Sleep 25
    }
    return 
```

你能给我看一个简单的例子，所以我可以理解如何去做。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-23T05:27:49.893

这是一个可以通过[AutoHotkey.dll](https://github.com/HotKeyIt/ahkdll-v1-release/)（具有 COM 接口）来实现的。

你需要下载这个库，搬进来`c:\Windows\System32`。
并注册系统（运行，，，`% "regsvr32.exe AutoHotkey.dll"`。`% "c:\Windows\System32")`然后
在VS中创建一个控制台应用程序项目，并选择项目选项卡/添加引用。
在打开的窗口中找到AutoHotkey库，单击“添加”按钮，然后关闭窗口。
现在你有了在你的项目中连接这个库，你会在参考文件夹中看到这个。
在 Program.cs 中选择所有并替换此代码：

```
using System.Threading;
using AutoHotkey;

namespace work_with_AHK_object
{
    class Program
    {
        static void Main()
        {
            /// write content for ahk script (thread)
            string scriptContent=""
            //+"#NoTrayIcon\n"
            +"#KeyHistory, 0\n"
            +"#NoEnv\n"
            //+"ListLines, Off\n"
            //+"DetectHiddenWindows, On\n"
            //+"Process, Priority,, High\n"
            +"SetBatchLines, -1\n"
            +"SetMouseDelay, 25\n"
            //+"Menu, Tray, Icon, % \"shell32.dll\", -153\n"
            //+"WinSet, AlwaysOnTop, On, % \"ahk_id\"A_ScriptHwnd\n"
            //+"WinSet, Style, -0xC00000, % \"ahk_id\"A_ScriptHwnd\n"
            //+"WinMove, % \"ahk_id\"A_ScriptHwnd,, 888, 110, 914, 812\n"
            //+"ListLines\n"
            //+"ListLines, On\n"
            +"TrayTip,, % \"Ready to use!\"\n" /// some notice
            +""
            +"Ins::\n"
            +"   Suspend\n"
            +"   Loop, % A_IsSuspended ? 1:2\n"
            +"      SoundBeep, 12500, 50\n"
            +"   KeyWait, % A_ThisHotkey\n"
            +"   Return\n"
            +""
            +"LButton::\n"
            +"   Loop\n"
            +"      Send, {Click}\n"
            +"   Until, !GetKeyState(\"LButton\", \"P\")\n"
            +"   Return\n"
            +""
            +"Space::\n"
            +"   Suspend, Off\n"
            +"   ExitApp";

            /// initialize instance
            CoCOMServer ahkThread=new CoCOMServer();

            /// launch a script in a separate thread
            ahkThread.ahktextdll(scriptContent);

            /// wait for exit
            while (ahkThread.ahkReady()!=0) Thread.Sleep(1000);
         }
    }
} 
```

打开项目属性，在应用程序选项卡中将其输出类型更改为 Windows 应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T23:27:35.073

睡觉很简单：

```
 System.Threading.Thread.Sleep(25); 
```

当您的应用程序不是活动应用程序时，获取 Key 和 MouseDown 事件（ins:: 和 Lbutton::) 要复杂得多。它可以通过使用全局钩子来实现。看看这篇 CodeProject 文章[A Simple C# Global Low Level Keyboard Hook](http://www.codeproject.com/Articles/19004/A-Simple-C-Global-Low-Level-Keyboard-Hook)

最终，当 AHK 为您提供更简单的环境来实现类似的事情时，这取决于您为什么要使用 C#。

我想不出任何可以完成这项工作的简单示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-05-03T11:22:12.557

我知道这是一篇相当老的帖子，但我自己也遇到了这个问题，并且很难找到解决方案，因为我无法在 C# 中使用任何可用的 AHK 包装器项目。

如果注册 dll 或使用包装器对您来说也是一个问题，您可以使用 basi 在 ahk 论坛上的这篇文章中的[方法](http:////autohotkey.com/board/topic/39588-autohotkeydll/?p=322036)。

本质上，您只需将 dll 放在项目文件夹中，将其包含到项目中，然后在属性中将“复制到输出目录”设置为“如果较新则复制”。

然后像这样导入dll函数：

```
 [DllImport(
        "AutoHotkey.dll", 
        CallingConvention = CallingConvention.Cdecl, 
        CharSet = CharSet.Unicode, 
        EntryPoint = "ahkdll")]
    private static extern int ahkdll(
        [MarshalAs(UnmanagedType.LPWStr)] string scriptFilePath,
        [MarshalAs(UnmanagedType.LPWStr)] string parameters = "",
        [MarshalAs(UnmanagedType.LPWStr)] string title = "");

    [DllImport(
        "AutoHotkey.dll",
        CallingConvention = CallingConvention.Cdecl,
        CharSet = CharSet.Unicode,
        EntryPoint = "ahktextdll")]
    private static extern int ahktextdll(
        [MarshalAs(UnmanagedType.LPWStr)] string script,
        [MarshalAs(UnmanagedType.LPWStr)] string parameters =  "",
        [MarshalAs(UnmanagedType.LPWStr)] string title = ""); 
```

ahkdll 允许从文件运行脚本，ahktextdll 允许直接将脚本作为字符串插入。

我只用 HotKeyIt 的 v1 dll 测试了这个[（](https://hotkeyit.github.io/v2/)我使用了 win32w 文件夹中的那个）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T21:23:42.497

您将要使用发送密钥

这个视频就是一个很好的例子！

[http://www.youtube.com/watch?v=FyDEelZbmEc](http://www.youtube.com/watch?v=FyDEelZbmEc)

# ajax - How to use inline :confirm option for html helpers with AJAX calls?

> ID：15959047
> 
> 赞同：0
> 
> 时间：2013-04-11T21:19:37.967
> 
> 标签：ajax, ruby-on-rails-3, ruby-on-rails-3.2, coffeescript

I am trying to have an AJAX implementation of record deletion associated with a button. The problem is that *ajax:success* event doesn't seem to be triggered in such case.

I have implemented the suggestion from this post: [Rails :confirm modifier callback?](https://stackoverflow.com/questions/13224482/rails-confirm-modifier-callback)) but I am uncertain if it's the preferred way.

I was wondering if communal wisdom could help in this case. What's the right approach here?

### app/views/competitions/show.html.haml:

```
%td= button_to 'Delete', contender, remote: true, method: :delete, class: 'delete_contender', confirm: 'Are you sure?' if owns? 
```

### app/assets/javascripts/competitions.js:

```
$(document).ready(function() {
  $('.delete_contender').on('confirm:complete', function(e, res) {
    if (res) {
      $(e.currentTarget).closest('tr').fadeOut();
    }
  });
}); 
```

### app/controllers/contenders_controller.rb:

```
def destroy
  @contender = Contender.find(params[:id])
  @competition = @contender.competition
  @contender.destroy

  respond_to do |format|
    format.js   
    format.html { redirect_to @competition, notice: "Contender #{@contender.sn_name} has been deleted" }
    format.json { head :no_content }
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:35:32.307

快速的回答是：这不是正确的方法。长答案如下。

我应该使用“form[data-remote]”，而不是使用 .delete_contender 类作为动作绑定的锚点，因为 *button_to* 助手会生成一个表单。此外，不需要将 JS 挂钩保留在资产管道中，最好将其移动到视图并转换为 CoffeeScript。Rails 3 风格的解决方案是：

### app/views/competitions/show.html.haml：

```
%td= button_to 'Delete', contender, remote: true, method: :delete, confirm: 'Are you sure?' if owns? 
```

### app/views/competitions/destroy.js.coffee：

```
jQuery ->
  $("form[data-remote]").on "ajax:success", (e, data, status, xhr) ->
    $(e.currentTarget).closest('tr').fadeOut() 
```

### 应用程序/控制器/contenders_controller.rb：

```
respond_to :js, only: :destroy

def destroy
  @contender = Contender.find(params[:id])
  @competition = @contender.competition
  @contender.destroy
end 
```

# java - How to unschedule all jobs using Quartz?

> ID：15959050
> 
> 赞同：6
> 
> 时间：2013-04-11T21:20:00.163
> 
> 标签：java, quartz-scheduler

Today, I iterate

```
public void unschedule(final ScheduledEvent event) throws SchedulerException {
     ...
    scheduler.deleteJob(event.getName(), "my group");
     ...
} 
```

If what i want is to unschedule all jobs, can this be done better (faster)?

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-11T21:22:33.170

`Scheduler#clear()`将删除所有内容，包括触发器和日历

如果那太严重了，那么我认为您的迭代器是唯一的选择

# neo4j - How to count tag-to-tag relationships without having it explode?

> ID：15959051
> 
> 赞同：3
> 
> 时间：2013-04-11T21:20:11.713
> 
> 标签：neo4j

I'm using neo4j, storing a simple "content has-many tags" data structure. I'd like to find out "what tags co-exist with what other tags the most?"

I've got around 500K content-to-tag relationships, so unfortunately, that works out to 0.5M^2 posible coexist relationships, and then you need to count how many each type of relationship happens! Or do you? Am I doing this the long way?

It never seems to return, and my CPU is pegged out for quite some time now.

```
final ExecutionResult result = engine.execute(
 "START metag=node(*)\n"
 + "MATCH metag<-[:HAS_TAG]-content-[:HAS_TAG]->othertag\n"
 + "WHERE metag.name>othertag.name\n"
 + "RETURN metag.name, othertag.name, count(content)\n"
 + "ORDER BY count(content) DESC");
for (Map<String, Object> row : result) {
 System.out.println(row.get("metag.name") + "\t" + row.get("othertag.name") + "\t" + row.get("count(content)"));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T01:48:42.960

您应该尝试减少绑定点以加快遍历速度。我假设你的图表总是有比内容更多的标签，所以你应该把内容作为你的界限。就像是

```
start 
     content = node:node_auto_index(' type:"CONTENT" ')
match
     metatag<-[:HAS_CONTENT]-content-[:HAS_CONTENT]->othertag
where 
     metatag<>othertag
return 
     metatag.name, othertag.name, count(content) 
```

# ios - Rotation after select UIImage of library

> ID：15959052
> 
> 赞同：0
> 
> 时间：2013-04-11T21:20:12.833
> 
> 标签：ios, objective-c, uiimage, uiimagepickercontroller, image-rotation

When I chose a portrait photo from the library like that : [![](https://i.stack.imgur.com/xklpt.png)](https://i.stack.imgur.com/xklpt.png)
[(source: [hostingpics.net](http://img15.hostingpics.net/thumbs/mini_919836image1.png))]

The UIImage returned by the library is rotated. [![](https://i.stack.imgur.com/oMISd.png)](https://i.stack.imgur.com/oMISd.png)

Here is my code :

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:(UIImage *)img editingInfo:(NSDictionary *)editInfo {
    UIImage* originalImg = [editInfo objectForKey:UIImagePickerControllerOriginalImage];
    [self useImage:originalImg];
} 
```

How can I avoid that ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T04:22:52.547

```
self.imageData=[info objectForKey:@"UIImagePickerControllerOriginalImage"];    
CIImage *image = [[CIImage alloc] initWithImage:[info objectForKey:@"UIImagePickerControllerOriginalImage"]];
self.imageData=[UIImage imageWithCIImage:image scale:self.imageData.scale orientation:self.imageData.imageOrientation]; 
```

您可以使用以下方法来保留图像的方向：

```
 [UIImage imageWithCIImage:(CIImage *) scale:(CGFloat) orientation:(UIImageOrientation)];
 [UIImage imageWithCGImage:(CGImageRef) scale:(CGFloat) orientation:(UIImageOrientation)]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T22:29:27.983

您之前是否使用应用程序中的图像选择器拍摄图像然后保存图像？如果是这样，您是否在保存图像时设置了方向？你需要。

考虑添加日志语句或调试以检查图像上设置的方向。

如果在图像上设置了方向，则 UIImageView 将自动正确渲染图像。

如果（将来）您要获取图像数据并将其上传到某个地方，那么您需要检查方向并重新绘制图像，同时对上下文应用适当的变换。

# c - "Invisible" error while manipulating 2d array. (0 errors, 0 warnings)

> ID：15959054
> 
> 赞同：0
> 
> 时间：2013-04-11T21:20:18.360
> 
> 标签：c, arrays, malloc, transpose

App crashes but I can't see the reason. I've been examining the code for many times, but still there is a problem.

I have 2d array 'a'(NxM) and I have to transpose it. The new array is 'p'(MxN).

Here is part of program:

```
/// 7: Transposing array. ( NxM ---> MxN ).   
int **p = NULL;

p = (int **)malloc(M*sizeof(int *));

if ( NULL == p)
{
    printf("Failed to allocate memory.");
    return 1;
}

for ( i = 0; i < M; i++ )
    p[i] = (int *)malloc(N*sizeof(int ));

// Filling in the new array called "p" with '0's.
for ( i = 0; i < M; i++ )
    for ( j = 0; j < N; j++ )
        p[i][j] = 0;

// Transposing array.
for ( i = 0; i < N; i++ )
{
    for ( j = 0; j < M; j++ )
    {
        a[i][j] = p[j][i];
    }
}

// Displaying ARRAY
printf(">>>\n\n");
for ( i = 0; i < M; i++ )
{
    for ( j = 0; j < N; j++ )
        printf("%4d ", p[i][j]);
    printf("\n");
} 
```

Tell me what is wrong, please.

UPDATE: I apologize for the mistake I've made..

```
// Filling in the new array called "p" with '0's.
for ( i = 0; i < M; i++ )
    for ( j = 0; j < N; j++ )
        p[i][j] = 0;   // there will be 'p', not 'a'. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:23:52.973

由于`a`是 size `N x M`，问题来自这个循环，您正在访问`M x N`元素而不是`N x M`

```
// Filling in the new array called "p" with '0's.
for ( i = 0; i < M; i++ )
    for ( j = 0; j < N; j++ )
        a[i][j] = 0; 
```

这个循环应该是

```
for ( i = 0; i < N; i++ ) // M is swapped with N
    for ( j = 0; j < M; j++ ) // N is swapped with M
        a[i][j] = 0; 
```

而且，根据您的问题，`a`输入数组是否需要转置为`p`. 因此，处理步骤应该是

```
// Transposing array.
for ( i = 0; i < N; i++ )
{ 
    for ( j = 0; j < M; j++ )
    {
        p[j][i] = a[i][j];
    }
} 
```

通过这些更改，代码按预期工作。[在http://cfiddle.net/zoZazB](http://cfiddle.net/zoZazB)上传了在不同阶段打印数据的示例代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T21:24:30.327

问题就在这里：因为`a`是 的`N *M`，但你不小心做到了`M*N`。

```
 // Filling in the new array called "p" with '0's.
 //^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^You are doing with a not p below
 for ( i = 0; i < M; i++ )
    for ( j = 0; j < N; j++ )
         a[i][j] = 0;
 //here it seems that a is of M*N not N*M
 //your comment and code does not match 
```

大小不匹配将导致您访问不属于 的内存`a`，因此崩溃。

# c - Speed up calculation

> ID：15959058
> 
> 赞同：4
> 
> 时间：2013-04-11T21:20:33.843
> 
> 标签：c, cuda, gpgpu

I have an simulation application that I have written both in C and CUDA. To measure the speedup I have recorded the time in both cases. In CUDA, I have used CUDA events to measure the time and then dividing the time of GPU by CPU (as usually done). The image of the speedup is provided below.

The weird thing about the speedup graph is that the speedup first increases to 55X and then it decreases to 35X and then again increases as the total number of thread increases. I am not sure why this is happening and how I would be able to figure out the reason behind such an output. I am using a GTX 560ti GPU card with 448 cores. The number of threads for each block is 1024 (maximum number) and so 1 block at a time for each SM. Is it happening because of the occupancy issues and how could I definitely figure out the reason behind this kind of speedup graph?

![enter image description here](https://i.stack.imgur.com/K1Wcp.jpg)

![enter image description here](https://i.stack.imgur.com/xLFxn.jpg)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T07:52:11.423

加速的峰值似乎与 CPU 的执行时间有关。分析 GPU 时间，它似乎随着代理的数量线性增加。但是，CPU 时间通常也会线性增加，在 aprox 范围内有一个下降时间，在`[0.6,1.6]`aprox 范围内有一些峰值`[2.6,3.1]`。

考虑到上述情况，您的 55 倍最大加速会在 [0.6,1.1] 范围内减少。因为您的 CPU 时间也会减少。因此，按`CPU time / GPU time`正常计算加速比，结果更小。这同样适用于范围内的第二个`[2.6,3.1]`。

我怎样才能弄清楚这种加速图背后的原因？我猜 CPU 被一些外部事件（I/O、CPU 中运行的其他程序、操作系统……）中断了。

为了更准确地计算加速比，**将实验重复 10 次作为单独的执行**，即不要在主函数中创建循环来执行 10 次。通过 10、20、30 甚至更多的单独执行，您可以**计算平均时间以及方差**。然后，研究执行时间：一个或两个峰值可能被视为特殊情况（忽略它们）。如果您看到趋势，则应该进行更深入的研究。

# jquery - jQuery - blur, but not if click on button

> ID：15959059
> 
> 赞同：3
> 
> 时间：2013-04-11T21:20:41.217
> 
> 标签：jquery, focus, blur

I have a search box that is small in normal state. on focus it expands, and a submit button shows up. This was done to save space. now, on blur, the search box shrinks again, and the submit button goes away.

Problem is, the click to the submit button IS the blur (which happens before it gets submit) there by making the submit button a 'race' to click it in the right spot.

I don't want to use an interval/timer... over kill.

Ideally, i just want the blur to not happen if focus is on the submit button.

```
$('#searchtext').focus(function() {             
    $('#searchtext').stop().animate({'width':'175px'} , 800);
    $('#ctrl_search').fadeIn('slow');
});
$('#searchtext').blur(function() {      
    $('#searchtext').stop().animate({'width':'85px'} , 800);
    $('#ctrl_search').fadeOut('slow');
}); 
```

searchtext is the input

ctrl_search is the submit button

I want to change

```
$('#searchtext').blur(function() { 
```

to something like:

```
$('#searchtext').blur.not$('#ctrl_search').focus())(function() { 
```

but that obviously doesn't work. lol

Can something like this be fanageled?

help!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T21:36:40.033

我不知道您正在寻找的解决方案的复杂性或简单性，但您可以简单地将`blur`动画包装在`if`语句中以检查是否输入了文本（文本意味着有人想要实际搜索）。

```
$('#searchtext').focus(function() {             
    $('#searchtext').stop().animate({'width':'175px'} , 800);
    $('#ctrl_search').fadeIn('slow');
});
$('#searchtext').blur(function() {
    //Check to see if text is blank (after removing whitespace), if so they must not want to search
    if($('#searchtext').val().trim() == ''){
       $('#searchtext').stop().animate({'width':'85px'} , 800);
       $('#ctrl_search').fadeOut('slow');
    }
}); 
```

在这里小提琴：http: [//jsfiddle.net/sChkC/1/](http://jsfiddle.net/sChkC/1/)

> 当然这是最简单的形式，您可以`trim`或使用其他一些花哨的功能来删除空格，以防用户输入空格并意外点击。

将其添加到那里是为了很好的衡量标准。

# sql - 删除在另一个表中没有匹配的记录

> ID：15959061
> 
> 赞同：15
> 
> 时间：2013-04-11T21:20:48.567
> 
> 标签：sql, postgresql, exists, bigdata, sql-delete

有两个通过 id 链接的表：

```
item_tbl (id)
link_tbl (item_id) 
```

中的某些记录`item_tbl`没有匹配的行`link_tbl`。将计算其数量的选择将是：

```
SELECT COUNT(*)
FROM link_tbl lnk LEFT JOIN item_tbl itm ON lnk.item_id=itm.id
WHERE itm.id IS NULL 
```

我想从中删除那些孤立记录（那些在另一个表中没有匹配的记录），`link_tbl`但我能想到的唯一方法是：

```
DELETE FROM link_tbl lnk
WHERE lnk.item_id NOT IN (SELECT itm.id FROM item_tbl itm) 
```

中的16,844,347
**条**孤儿记录中的`link_tbl`
**3,033,811条中有**`item_tbl`
**262,086,253**`link_tbl`条记录。
服务器有 4GB RAM 和 8 核 CPU。

```
EXPLAIN DELETE FROM link_tbl lnk
WHERE lnk.item_id NOT IN (SELECT itm.id FROM item_tbl itm) 
```

回报：

```
Delete on link lnk  (cost=0.00..11395249378057.98 rows=131045918 width=6)
->  Seq Scan on link lnk  (cost=0.00..11395249378057.98 rows=131045918 width=6)
     Filter: (NOT (SubPlan 1))
     SubPlan 1
       ->  Materialize  (cost=0.00..79298.10 rows=3063207 width=4)
             ->  Seq Scan on item itm  (cost=0.00..52016.07 rows=3063207 width=4) 
```

问题是：

1.  有没有更好的方法来删除孤儿记录`link_tbl`？
2.  上面的解释有多准确，或者删除这些记录需要多长时间？

    *   编辑：根据 Erwin Brandstetter 的评论修复。

    *   编辑：PostgreSql 版本是 9.1
    *   编辑：postgresql.config 的某些部分
        1.  共享缓冲区 = 368MB
        2.  临时缓冲区 = 32MB
        3.  工作内存 = 32MB
        4.  维护工作内存 = 64MB
        5.  最大堆栈深度 = 6MB
        6.  fsync = 关闭
        7.  同步提交 = 关闭
        8.  full_page_writes = 关闭
        9.  wal_buffers = 16MB
        10.  wal_writer_delay = 5000 毫秒
        11.  提交延迟 = 10
        12.  commit_siblings = 10
        13.  有效缓存大小 = 1600MB

**解析度：**

谢谢大家的建议，很有帮助。我终于使用了 Erwin Brandstetter [https://stackoverflow.com/a/15959896/1331340](https://stackoverflow.com/a/15959896/1331340)建议的删除，但我稍微调整了一下：

```
DELETE FROM link_tbl lnk
WHERE lnk.item_id BETWEEN 0 AND 10000
  AND lnk.item_id NOT IN (SELECT itm.id FROM item itm
                          WHERE itm.id BETWEEN 0 AND 10000) 
```

我比较了 NOT IN 和 NOT EXISTS 的结果，输出如下，尽管我使用 COUNT 而不是 DELETE，我认为应该是相同的（我的意思是为了进行相对比较）：

```
EXPLAIN ANALYZE SELECT COUNT(*) 
FROM link_tbl lnk
WHERE lnk.item_id BETWEEN 0 AND 20000
  AND lnk.item_id NOT IN (SELECT itm.id
                          FROM item_tbl itm
                          WHERE itm.id BETWEEN 0 AND 20000);

QUERY PLAN
Aggregate  (cost=6002667.56..6002667.57 rows=1 width=0) (actual time=226817.086..226817.088 rows=1 loops=1)
->  Seq Scan on link_tbl lnk  (cost=1592.50..5747898.65 rows=101907564 width=0) (actual time=206.029..225289.570 rows=566625 loops=1)
     Filter: ((item_id >= 0) AND (item_id <= 20000) AND (NOT (hashed SubPlan 1)))
     SubPlan 1
       ->  Index Scan using item_tbl_pkey on item_tbl itm  (cost=0.00..1501.95 rows=36221 width=4) (actual time=0.056..99.266 rows=17560 loops=1)
             Index Cond: ((id >= 0) AND (id <= 20000))
Total runtime: 226817.211 ms

EXPLAIN ANALYZE SELECT COUNT(*)
FROM link_tbl lnk WHERE lnk.item_id>0 AND lnk.item_id<20000
  AND NOT EXISTS (SELECT 1 FROM item_tbl itm WHERE itm.id=lnk.item_id);

QUERY PLAN
Aggregate  (cost=8835772.00..8835772.01 rows=1 width=0)
   (actual time=1209235.133..1209235.135 rows=1 loops=1)
->  Hash Anti Join  (cost=102272.16..8835771.99 rows=1 width=0)
   (actual time=19315.170..1207900.612 rows=566534 loops=1)
     Hash Cond: (lnk.item_id = itm.id)
     ->  Seq Scan on link_tbl lnk  (cost=0.00..5091076.55 rows=203815128 width=4) (actual time=0.016..599147.604 rows=200301872 loops=1)
           Filter: ((item_id > 0) AND (item_id < 20000))
     ->  Hash  (cost=52016.07..52016.07 rows=3063207 width=4) (actual time=19313.976..19313.976 rows=3033811 loops=1)
           Buckets: 131072  Batches: 4  Memory Usage: 26672kB
           ->  Seq Scan on item_tbl itm  (cost=0.00..52016.07 rows=3063207 width=4) (actual time=0.013..9274.158 rows=3033811 loops=1)
Total runtime: 1209260.228 ms 
```

NOT EXISTS 慢了 5 倍。

数据的实际删除并没有花很长时间，只要我担心，我就可以分5批删除（10000-20000、20000-100000、100000-200000、200000-1000000和1000000-1755441）。起初我发现了 max item_id，我只需要经过一半的桌子。

当我尝试 NOT IN 或 EXISTS without the range (with select count) 它甚至没有完成时，我让它在晚上运行，它仍然在早上运行。

我想我正在寻找使用 Wildplasser 的答案[https://stackoverflow.com/a/15988033/1331340](https://stackoverflow.com/a/15988033/1331340)中的 DELETE，但为时已晚。

```
DELETE FROM one o
USING (
    SELECT o2.id
    FROM one o2
    LEFT JOIN two t ON t.one_id = o2.id
    WHERE t.one_id IS NULL
    ) sq
WHERE sq.id = o.id
    ; 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-13T12:56:54.513

我对四个典型查询进行了基准测试，{work_mem, Effective_cache_size, random_page_cost} 的设置不同，这些设置对所选计划的影响最大。我首先使用默认设置进行了“运行”以预热缓存。注意：测试集足够小以允许所有需要的页面都存在于缓存中。

测试集

```
SET search_path=tmp;

/************************/
DROP SCHEMA tmp CASCADE;
CREATE SCHEMA tmp ;
SET search_path=tmp;

CREATE TABLE one
        ( id SERIAL NOT NULL PRIMARY KEY
        , payload varchar
        );

CREATE TABLE two
        ( id SERIAL NOT NULL PRIMARY KEY
        , one_id INTEGER REFERENCES one
        , payload varchar
        );

INSERT INTO one (payload) SELECT 'Text_' || gs::text FROM generate_series(1,30000) gs;
INSERT INTO two (payload) SELECT 'Text_' || gs::text FROM generate_series(1,30000) gs;

UPDATE two t
SET one_id = o.id
FROM one o
WHERE o.id = t.id
AND random() < 0.1;

INSERT INTO two (one_id,payload) SELECT one_id,payload FROM two;
INSERT INTO two (one_id,payload) SELECT one_id,payload FROM two;
INSERT INTO two (one_id,payload) SELECT one_id,payload FROM two;

VACUUM ANALYZE one;
VACUUM ANALYZE two;
/***************/ 
```

查询：

```
\echo NOT EXISTS()
EXPLAIN ANALYZE
DELETE FROM one o
WHERE NOT EXISTS ( SELECT * FROM two t
        WHERE t.one_id = o.id
        );

\echo NOT IN()
EXPLAIN ANALYZE 
DELETE FROM one o
WHERE o.id NOT IN ( SELECT one_id FROM two t)
        ;

\echo USING (subquery self LEFT JOIN two where NULL)
EXPLAIN ANALYZE
DELETE FROM one o
USING (
        SELECT o2.id
        FROM one o2
        LEFT JOIN two t ON t.one_id = o2.id
        WHERE t.one_id IS NULL
        ) sq
WHERE sq.id = o.id
        ;

\echo USING (subquery self WHERE NOT EXISTS(two)))
EXPLAIN ANALYZE
DELETE FROM one o
USING (
        SELECT o2.id
        FROM one o2
        WHERE NOT EXISTS ( SELECT *
                FROM two t WHERE t.one_id = o2.id
                )
        ) sq
WHERE sq.id = o.id
        ; 
```

结果（总结）

```
 NOT EXISTS()    NOT IN()        USING(LEFT JOIN NULL)   USING(NOT EXISTS)
1) rpc=4.0.csz=1M wmm=64        80.358  14389.026       77.620                  72.917
2) rpc=4.0.csz=1M wmm=64000     60.527  69.104          51.851                  51.004
3) rpc=1.5.csz=1M wmm=64        69.804  10758.480       80.402                  77.356
4) rpc=1.5.csz=1M wmm=64000     50.872  69.366          50.763                  53.339
5) rpc=4.0.csz=1G wmm=64        84.117  7625.792        69.790                  69.627
6) rpc=4.0.csz=1G wmm=64000     49.964  67.018          49.968                  49.380
7) rpc=1.5.csz=1G wmm=64        68.567  3650.008        70.283                  69.933
8) rpc=1.5.csz=1G wmm=64000     49.800  67.298          50.116                  50.345

legend: 
rpc := "random_page_cost"
csz := "effective_cache_size"
wmm := "work_mem" 
```

如您所见，该`NOT IN()`变体对`work_mem`. 同意，设置 64(KB) 非常低，但这个“或多或少”对应于大型数据集，它也不适合散列表。

EXTRA：在预热阶段，`NOT EXISTS()`查询遭受了极端的 FK 触发器争用。这似乎是与真空守护程序冲突的结果，该守护程序在表设置后仍处于活动状态。：

```
PostgreSQL 9.1.2 on x86_64-unknown-linux-gnu, compiled by gcc (Ubuntu/Linaro 4.6.1-9ubuntu3) 4.6.1, 64-bit
NOT EXISTS()
                                                           QUERY PLAN
--------------------------------------------------------------------------------------------------------------------------------
 Delete on one o  (cost=6736.00..7623.94 rows=27962 width=12) (actual time=80.596..80.596 rows=0 loops=1)
   ->  Hash Anti Join  (cost=6736.00..7623.94 rows=27962 width=12) (actual time=49.174..61.327 rows=27050 loops=1)
         Hash Cond: (o.id = t.one_id)
         ->  Seq Scan on one o  (cost=0.00..463.00 rows=30000 width=10) (actual time=0.003..5.156 rows=30000 loops=1)
         ->  Hash  (cost=3736.00..3736.00 rows=240000 width=10) (actual time=49.121..49.121 rows=23600 loops=1)
               Buckets: 32768  Batches: 1  Memory Usage: 1015kB
               ->  Seq Scan on two t  (cost=0.00..3736.00 rows=240000 width=10) (actual time=0.006..33.790 rows=240000 loops=1)
 Trigger for constraint two_one_id_fkey: time=467720.117 calls=27050
 Total runtime: 467824.652 ms
(9 rows) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-11T22:21:13.230

首先：你的文字说：

> 我想从**`item_tbl`.**

但是你的代码说：

```
DELETE FROM **link_tbl** lnk ...
```

**更新：** 在重读 QI 时，您更有可能想要删除`link_tbl`. 行数指向那个方向。[@Lucas](https://stackoverflow.com/a/15959190/939860) ) 查询在这种情况下是正确的。但恐怕，[`NOT EXISTS`](http://www.postgresql.org/docs/current/interactive/functions-subquery.html#FUNCTIONS-SUBQUERY-EXISTS)实际上比这种情况**要慢。**`NOT IN`

为了验证我运行了一个测试用例，这与您的设置很相似。不能让它变得更大，否则 SQLfiddle 会超时。

[**-> SQLfiddle**](http://www.sqlfiddle.com/#!12/26089/1)。

`NOT EXISTS`对于相反的情况会更快。（我也测试过。）`EXISTS`更适合测试“多”端。通常，获得的好处`EXISTS`多于获得的好处`NOT EXISTS`-无论如何，该表格必须检查整个表格。证明某事*不存在*比证明某事*存在*要难得多。这个普遍真理也适用于数据库。

### 分而治之

此操作适合拆分。特别是如果您有并发事务（但即使没有），我会考虑将其`DELETE`分成几个部分，以便事务可以`COMMIT`在相当长的时间后进行。

就像是：

```
DELETE FROM link_tbl l
WHERE  l.item_id < 1000000
AND    l.item_id NOT IN (SELECT i.id FROM item_tbl i) 
```

然后`l.item_id BETWEEN 100001 AND 200000`，等等。

您不能使用函数自动执行此操作。这会将所有内容都包装到交易中并违背目的。因此，您必须从任何客户端编写脚本。
或者你可以使用 ..

### [数据库链接](http://www.postgresql.org/docs/current/interactive/dblink.html)

这个附加模块允许您在任何数据库中运行单独的事务，包括正在运行的数据库。这可以通过持久连接来完成，这应该消除大部分连接开销。有关如何安装它的说明：
[如何在 PostgreSQL 中使用（安装）dblink？](https://stackoverflow.com/questions/3862648/how-to-use-install-dblink-in-postgresql/13264961#13264961)

`DO`会完成这项工作（PostgreSQL 9.0 或更高版本）。`DELETE`一次为 50000运行 100 个命令`item_id`：

```
DO
$$
DECLARE
   _sql text;
BEGIN

PERFORM dblink_connect('port=5432 dbname=mydb');  -- your connection parameters

FOR i IN 0 .. 100
LOOP
   _sql := format('
   DELETE FROM link_tbl l
   WHERE  l.item_id BETWEEN %s AND %s
   AND    l.item_id NOT IN (SELECT i.id FROM item_tbl i)'
   , (50000 * i)::text
   , (50000 * (i+1))::text);

   PERFORM  dblink_exec(_sql);
END LOOP;

PERFORM dblink_disconnect();

END
$$ 
```

如果脚本应该被中断：`dblink_connect`将它执行的内容写入数据库日志，这样您就可以看到已经完成的内容。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-11T21:28:22.980

也许是这样：

```
DELETE FROM link_tbl lnk
WHERE NOT EXISTS
  ( SELECT 1 FROM item_tbl item WHERE item.id = lnk.item_id ); 
```

当处理大量记录时，创建一个临时表，执行`INSERT INTO SELECT * FROM ...`然后删除原始表，重命名临时表，然后添加索引会更有效......

# hibernate - Getting value from a servlet to insert into DB using hibernate

> ID：15959065
> 
> 赞同：0
> 
> 时间：2013-04-11T21:21:02.927
> 
> 标签：hibernate, servlets

I Have a Login page which is a JSP and a servlet where i get the username from the Login page using request.getParameter. I now want to insert that username into a mysql DB using hibernate. In my hibernate program, how i can access the username???

My servlet is - public class LoginPage extends HttpServlet {

```
public void doGet(HttpServletRequest request, HttpServletResponse response)
throws IOException, ServletException {  
    String username= request.getParameter("username");
    System.out.println("Hi  " + username);

} 
```

}

and Hibernate program is-

public class HibernateTest {

```
public static void main(String args[]){
    Login name = new Login();       
    name.setUserName("");//////This line shows error. What should be inside ""
    SessionFactory sessionFactory = new AnnotationConfiguration().configure().buildSessionFactory();
    Session session = sessionFactory.openSession();
    session.beginTransaction();
    session.save(name);

    session.getTransaction().commit();
    session.close();

} 
```

}

The marked line shows error when i run.What should be inside "". How can i retrieve username from the servlet???

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T01:39:56.167

我在您的代码中没有看到任何问题。如果两者都工作正常，您只需将所有内容移至您的 servlet 类：

```
public void doGet(HttpServletRequest request, HttpServletResponse response)
throws IOException, ServletException {  
    String username= request.getParameter("username");

    Login name = new Login();       
    name.setUserName(username);
    SessionFactory sessionFactory = new AnnotationConfiguration().configure().buildSessionFactory();
    Session session = sessionFactory.openSession();
    session.beginTransaction();
    session.save(name);

    session.getTransaction().commit();
    session.close();
} 
```

当然，在一个健壮的应用程序中，我们将添加层并应用一些设计模式......

# java - Imposing constraints or restrictions on method body, in Java

> ID：15959066
> 
> 赞同：12
> 
> 时间：2013-04-11T21:21:12.930
> 
> 标签：java, architecture, methods, constraints, invariants

## Context (Edit)

Some clarification was on demand, so I'll try to sum up what influences the question.

*   The goal of the project is to provide a certain functionality to programmers, most probably in the form of a library (a JAR with class files, I guess).

*   To use said functionality, programmers would have to conform to the constraints that *must* (should) be satisfied. Otherwise it won't function as expected (just like the locks from `java.util.concurrent`, that must be acquired / freed at the appropriate time and place).

*   This code won't be the entry point to the applications using it (*ie*, has no `main`).

*   There's a limited (and small) amount of operations exposed in the API.

**Examples:**

1.  Think of a small game, where almost everything is implemented and managed by the already implemented classes. The only thing left for the programmer to do, is to write a method, or a couple of them, that describe what the character will do (walk, change direction, stop, inspect object). I would want to make sure that their methods (possibly marked with an annotation?) just `walk`, or `changeDirection`, or calculate `diff = desiredValue - x`, and not, say, write to some file, or open a socket connection.

2.  Think of a transaction manager. The manager would be provided by this library, as well as some constant attributes of transactions (their isolation level, time-outs, ...). Now, the programmers would like to have transactions and use this manager. I would want to make sure that they only `read`, `write`, `commit`, or `rollback` on some resources, known to the manager. I wouldn't want them to `launchRocket` in the middle of the transaction, if the manager does not control any rockets to launch.

## The Problem

I want to impose some invariants / restrictions / constraints on the body of a method (or group of methods), to be later implemented by some other programmer, in some other package/location. Say, I give them something along the lines of:

```
public abstract class ToBeExtended {
    // some private stuff they should not modify
    // ...
    public abstract SomeReturnType safeMethod();
} 
```

It is important (probably imperative), for the purposes of this project, that the method body satisfies some invariants. Or rather, it is imperative that the set of commands this method's implementation uses is limited. Examples of these constraints:

*   This method must not perform any I/O.
*   This method must not instantiate any unknown (*potentially dangerous*) objects.
*   ...

Put another way:

*   This method can call the methods of a known (specific) class.
*   This method can execute some *basic* instructions (maths, assign local variables, `if`s, loops...).

I've been looking through Annotations, and there seems to be nothing close to this.
My options so far:

1.  Define some annotation, `@SafeAnnotation`, and apply it to the method, defining a contract with the implementer, that he will follow the rules imposed, or else the system will malfunction.

2.  Define an `Enum` with the allowed operations. Instead of exposing the allowed methods, only a method is exposed, that accepts a list of these enum objects (or something similar to a [Control Flow Graph](http://en.wikipedia.org/wiki/Control_flow_graph)?) and executes it, giving me the control of what can be done.

Example:

```
public enum AllowedOperations { OP1, OP2 }

public class TheOneKnown {
    public void executeMyStuff (List<AllowedOperations> ops) {
        // ...
    }
} 
```

## My Question

Is there any feature in the language, such as annotations, reflection, or otherwise, allowing me to inspect (either at compile time or runtime) if a method is valid (*ie*, satisfies my constraints)?
Or rather, is there any way to enforce it to call only a limited set of other methods?

If not (and I think not), would this second approach be a suitable alternative?
Suitable, as in intuitive, well designed and/or good practice.

## Update (Progress)

Having had a look at some related questions, I'm also considering (as a third option, maybe) following the steps given in the accepted answer of [this question](https://stackoverflow.com/questions/502218/sandbox-against-malicious-code-in-a-java-application). Although, this may require some rethinking on the architecture.

The whole idea of using annotations to impose restrictions seems to require implementing my own annotation processor. If this is true, I might as well consider a small domain-specific language, so that the programmer would use these limited operations, later translating the code to Java. This way, I would also have control over what is specified.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T21:36:18.660

查看 java 策略文件。我没有使用它们，我不确定它们是否完全适合您的问题，但是通过深入研究文档，它们可能是合适的。这里有几个可能会有所帮助的问题

[在 Java 中限制文件访问](https://stackoverflow.com/questions/5526008/limiting-file-access-in-java)

[什么是用于限制文件写入单个目录的简单 Java 安全策略？](https://stackoverflow.com/questions/15478835/what-is-a-simple-java-security-policy-for-restricting-file-writes-to-a-single-di)

这里有一些关于策略文件的文档。

[http://docs.oracle.com/javase/6/docs/technotes/guides/security/PolicyFiles.html](http://docs.oracle.com/javase/6/docs/technotes/guides/security/PolicyFiles.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T07:49:52.893

我认为[这个问题](https://stackoverflow.com/questions/502218/sandbox-against-malicious-code-in-a-java-application)的方向是好的。

*   使用特定的`ClassLoader`lo 加载类。请注意，它们是一种有趣的马，通常情况下，类本身是由父类加载器加载的。可能您想要某种[UrlClassLoader](http://docs.oracle.com/javase/7/docs/api/java/net/URLClassLoader.html)，并且父类加载器将设置为 Root 类加载器，但这还不够。
*   用于`threads`避免无限循环（而`Runnable`不是像那里那样实现扩展`Thread`） - 如果您不担心它，这可能是不必要的。
*   使用 SecurityManager 避免`java.io`操作

除了上述之外，我推荐2个选项：

**为该方法提供一个*控制器*，该控制器将包含它可以调用的函数**

例如：

```
public void foo(Controller ctrl) {
}

public class Controller {
   public boolean commit();
   public boolean rollback();
} 
```

这可以给用户一个句柄，允许哪些操作。

**使用`Intent`-like 命令模式**

在Android中，系统的组件是相当封闭的。他们不能直接相互交流，他们只能触发一个事件，“这发生了”，或者“我想做那个”。

这样，可用命令的集合不受限制。通常，如果这些方法只做小的业务逻辑，那就足够了。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-11T23:41:42.923

您可以使用自定义类加载器限制不受信任的代码使用的类：

```
public class SafeClassLoader extends ClassLoader {

    Set<String> safe = new HashSet<>();

    {
        String[] s = {
            "java.lang.Object",
            "java.lang.String",
            "java.lang.Integer"
        };
        safe.addAll(Arrays.asList(s));
    }

    @Override
    protected Class<?> loadClass(String name, boolean resolve)
            throws ClassNotFoundException {
        if (safe.contains(name)) {
            return super.loadClass(name, resolve);
        } else {
            throw new ClassNotFoundException(name);
        }
    }
}

public class Sandboxer {
    public static void main(String[] args) throws Exception {
        File f = new File("bin/");
        URL[] urls = {f.toURI().toURL()};
        ClassLoader loader = new URLClassLoader(urls, new SafeClassLoader());
        Class<?> good = loader.loadClass("tools.sandbox.Good");
        System.out.println(good.newInstance().toString());
        Class<?> evil = loader.loadClass("tools.sandbox.Evil");
        System.out.println(evil.newInstance().toString());
    }
}

public class Good {
    @Override
    public String toString() {
        return "I am good";
    }
}

public class Evil {
    @Override
    public String toString() {
        new Thread().start();
        return "I am evil.";
    }
} 
```

运行这将导致

```
I am good
Exception in thread "main" java.lang.NoClassDefFoundError: java/lang/Thread
    at tools.sandbox.Evil.toString(Evil.java:7)
    at tools.sandbox.Sandboxer.main(Sandboxer.java:18)
Caused by: java.lang.ClassNotFoundException: java.lang.Thread
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 2 more 
```

当然，这假设您已将列入白名单的课程小心谨慎。它也不能防止拒绝服务的东西，例如

```
while (true) {} 
```

或者

```
new long[1000000000]; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-17T06:41:06.430

另一种选择是使用嵌入式脚本解释器，例如 groovy one ( [https://docs.groovy-lang.org/latest/html/documentation/guide-integrating.html](https://docs.groovy-lang.org/latest/html/documentation/guide-integrating.html) ) 并评估第三方方法的内容带有执行前验证的运行时。

优点是您将能够限制仅访问您将为脚本执行绑定的变量。

您还可以编写自己的验证 dsl 并将其应用于将执行脚本的方法，例如使用自定义注释。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T21:25:33.307

有几个[按合同设计的](http://en.wikipedia.org/wiki/Design_by_contract#Languages_with_third-party_support)库可用于 Java，但我不能特别推荐一个。 [Java Argument Validation](http://java-arg-val.sourceforge.net/introduction.html)似乎是一个轻量级的解决方案，但同样，我没有第一手经验。

# algorithm - how to calculate the max elements accessed using binary search and a sorted list?

> ID：15959067
> 
> 赞同：0
> 
> 时间：2013-04-11T21:21:16.703
> 
> 标签：algorithm

148 elements which has a log base 2 of 7.2 ?

So I have to round up to calculate max elements accessed or round down ?

8 or 7

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T21:23:18.603

维基百科说：⌊log2(N)+1⌋，[http ://en.wikipedia.org/wiki/Binary_search_algorithm#Performance](http://en.wikipedia.org/wiki/Binary_search_algorithm#Performance)

# servicestack - ServiceStack 和 FacebookAuthProvider

> ID：15959069
> 
> 赞同：5
> 
> 时间：2013-04-11T21:21:20.460
> 
> 标签：servicestack

我一直在使用 ServiceStack，它是 Auth 提供者。特别是“FacebookAuthProvider”。我的问题是该服务是从 iOS 应用程序调用的。这个应用程序已经有一个有效的访问令牌，我只想将此值传递给 servicestack facebook 身份验证。

我已经在 servicestack github 页面上看到了测试，但这对我来说仍然没有意义。

是否可以将此访问令牌传递给 servicestack，因此身份验证会跳过我请求许可的部分，因为我们已经在应用程序上做了？

还是我以错误的方式接近这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-03T16:02:15.167

我没有使用内置的 facebook 身份验证提供程序，而是创建了自己的 CustomFacebookAuthProvider。原因是内置版本需要浏览器将用户重定向到 facebook 进行身份验证，而我不需要。我已经有一个访问令牌。

所以基于官方版本的[FacebookAuthProvider.cs](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.ServiceInterface/Auth/FacebookAuthProvider.cs)我创建了自己的。

```
using System;
using System.Collections.Generic;
using System.Net;
using Elmah;
using Mondohunter.Backend.BusinessLogic.Interfaces;
using ServiceStack.Common.Extensions;
using ServiceStack.Common.Web;
using ServiceStack.Configuration;
using ServiceStack.ServiceInterface;
using ServiceStack.ServiceInterface.Auth;
using ServiceStack.Text;
using ServiceStack.WebHost.Endpoints;

namespace Mondohunter.Interfaces
{
    public class CustomFacebookAuthProvider : OAuthProvider
    {
        public const string Name = "facebook";
        public static string Realm = "https://graph.facebook.com/";
        public static string PreAuthUrl = "https://www.facebook.com/dialog/oauth";

        public string AppId { get; set; }
        public string AppSecret { get; set; }
        public string[] Permissions { get; set; }

        public CustomFacebookAuthProvider(IResourceManager appSettings)
            : base(appSettings, Realm, Name, "AppId", "AppSecret")
        {
            this.AppId = appSettings.GetString("oauth.facebook.AppId");
            this.AppSecret = appSettings.GetString("oauth.facebook.AppSecret");
        }

        public override object Authenticate(IServiceBase authService, IAuthSession session, Auth request)
        {
            var tokens = Init(authService, ref session, request);

            try
            {
                if (request.oauth_token.IsNullOrEmpty())
                    throw new Exception();

                tokens.AccessToken = request.oauth_token;
                session.IsAuthenticated = true;

                var json = AuthHttpGateway.DownloadFacebookUserInfo(request.oauth_token);
                var authInfo = JsonSerializer.DeserializeFromString<Dictionary<string, string>>(json);

                //Here i need to update/set userauth id to the email
                //UpdateUserAuthId(session, authInfo["email"]);

                authService.SaveSession(session, SessionExpiry);
                OnAuthenticated(authService, session, tokens, authInfo);

                //return json/xml/... response;
            }
            catch (WebException ex)
            {
                //return json/xml/... response;
            }
            catch (Exception ex)
            {
                //return json/xml/... response;
            }
        }

        protected override void LoadUserAuthInfo(AuthUserSession userSession, IOAuthTokens tokens, Dictionary<string, string> authInfo)
        {
            if (authInfo.ContainsKey("id"))
                tokens.UserId = authInfo.GetValueOrDefault("id");
            if (authInfo.ContainsKey("name"))
                tokens.DisplayName = authInfo.GetValueOrDefault("name");
            if (authInfo.ContainsKey("first_name"))
                tokens.FirstName = authInfo.GetValueOrDefault("first_name");
            if (authInfo.ContainsKey("last_name"))
                tokens.LastName = authInfo.GetValueOrDefault("last_name");
            if (authInfo.ContainsKey("email"))
                tokens.Email = authInfo.GetValueOrDefault("email");
            if (authInfo.ContainsKey("gender"))
                tokens.Gender = authInfo.GetValueOrDefault("gender");
            if (authInfo.ContainsKey("timezone"))
                tokens.TimeZone = authInfo.GetValueOrDefault("timezone");

            LoadUserOAuthProvider(userSession, tokens);
        }

        public override void LoadUserOAuthProvider(IAuthSession authSession, IOAuthTokens tokens)
        {
            var userSession = authSession as CustomUserSession;
            if (userSession == null) return;

            userSession.Email = tokens.Email ?? userSession.PrimaryEmail ?? userSession.Email;
        }
    }
} 
```

我希望这是有道理的。

# php - 在我的 Android 应用程序中在 localhost 上获取 MySQL 的“最简单”方法

> ID：15959073
> 
> 赞同：1
> 
> 时间：2013-04-11T21:21:30.307
> 
> 标签：php, android

我已经成功地使用 POST 在我的网站上运行 PHP 脚本，它允许手机应用程序向数据库 (MySQL) 添加一个新条目，并删除一个条目。

下一步是我过去几个小时一直在努力解决的问题，那就是从数据库中获取信息到手机上！

我想要一种方法，该方法最初只是在启动活动并填充列表视图时连接到数据库，或者将所有条目都连接到数据库，然后我计划将信息复制到手机中的 SQLite 数据库。

我可以考虑实现这一目标的最简单方法是什么？我可以足智多谋，但我只需要知道我在寻找什么！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:46:13.050

一般来说，您需要创建**服务器 API**：选择某种**格式**在您的 Web 服务和 android 应用程序之间进行通信。然后，您将始终需要从服务器**请求**一些数据，这些数据将以上述格式**在某种网络响应正文中**返回给您。接下来，您只需要解析这些数据并填充到您的适配器或其他任何东西。

请注意，**网络操作可能需要相当长的时间，具体取决于您的连接**，因此**您不能等待它结束显示您的 UI** - 您需要以**异步**方式执行此操作，并向用户提供数据正在检索的反馈。

现在，在 http post 请求正文中传递的 json 格式非常流行。看看[这个关于如何在 android 上解析 json 的教程](http://www.androidcompetencycenter.com/2009/10/json-parsing-in-android/)和这个[关于如何在 php 中创建 json api 的视频](http://onwebdev.blogspot.com/2011/08/php-creating-your-own-json-api.html)。

当然，您可以尝试直接连接到远程 MySQL 服务器。在某些情况下，它确实是更简单的解决方案（您不需要编写服务器端 api 代码），但可能不太容易访问，因为标准 MySQL 端口不是在所有网络中打开。此外，您的 API 服务器可能会隐藏一些关于如何在现实中存储数据的实现细节，从而允许您从 MySQL 迁移到 PostgreSQL，而不会为 android 应用程序带来痛苦。

不要忘记保护您的数据免受未经授权的访问！

**编辑**

现在是 2017 年，现在最简单的选择是使用开源项目，该项目将为您的数据库提供 rest api，例如[ArrestDB](https://github.com/alixaxel/ArrestDB "逮捕数据库")或[postgrest](https://github.com/begriffs/postgrest "后期")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T22:22:58.677

you have many options.

1.  higher level abstraction over HTTP (REST/SOAP/etc) like already mentioned
2.  HTTP as a proxy for plaintext/CSV data (without abstraction)
3.  a direct JDBC connection from android device to the MySQL
4.  database data export/import

我猜您正在寻找选项 3。即将远程数据库同步到本地（Android 上的 SQlite），然后使用本地数据？在这种情况下，您只需将 mysql-client jar（JDBC 驱动程序）放入您的应用程序中即可开始。不过有一些限制，比如评论中已经提到的 Sébastien Renauld。然而，这些问题可以解决，即使用 MySQL 的自定义配置或使用可以以通用方式实现的选项 (2)（编写一次）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T22:13:30.107

我个人必须为 iOS 和 Android 设备开发以下 REST API 服务（基于 Laravel 框架，我称之为 lRapi），并且效果很好（应用程序使用的版本要复杂得多）。

[https://github.com/w0rldart/lRapi](https://github.com/w0rldart/lRapi)

那里有很多模型和控制器可供您开始使用。响应采用 JSON 格式，带有适当的标头。我仍然需要向它添加更多文档，但在主示例视图中有一些，您可以通过设置虚拟主机并在浏览器中打开根页面来访问它们。

Laravel 是一个 MVC PHP 框架，很容易上手。

这是避免做大部分工作的好方法，只专注于实现你需要的其他东西。

# php - 只在 try catch 块中抛出异常是不好的编程吗？

> ID：15959075
> 
> 赞同：1
> 
> 时间：2013-04-11T21:21:48.507
> 
> 标签：php, try-catch, custom-exceptions

我目前正在使用 PHP。我正在为我正在构建的 CMS 开发一个错误系统（为了好玩）。对于我的系统中的致命错误（不是在 php 编译器中），我创建了一个 FatalException 类，它扩展了内置的 Exception 类。由于这些类型的错误无论如何都会使系统停止运行，因此我在 __construct 中退出了。

```
 class FatalException extends Exception{  
        public function __construct($message) {
            exit("<h1 style='color:red;' >FATAL ERROR: $message </h1>");
        }
    } 
```

因此，在我的代码中，我将检查与数据库的连接之类的内容，如果不能，我将抛出 FatalException（“无法连接到数据库：$database_error_message”）。它不会在 try/catch 块中。

例如，当我运行代码并且无法连接到数据库时，我在屏幕上看到的只是一个大红色字母的句子。所以它工作得很好，但这是不好的做法/编码吗？

编辑：

事实上，它并没有以这种方式开始。我最初是在记录错误，然后在捕获区域中退出，但后来我想，如果所有致命错误无论如何都会退出，那么只需放入 in 构造函数。然后我注意到它实际上并没有到达它正在退出的捕获区域。因此，将语句放在 try/catch 块中是一个有争议的问题。这导致了这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T21:28:45.437

如果您要`exit()`无条件地使用构造函数，那么将其设为构造函数并没有多大意义，更不用说将类设为`Exception`. 您可以更简单（老实说）拥有一个名为`Fatal::Die($message)`.

异常的意义在于它们描述了错误是*什么*（通过为不同的异常设置不同的类）并且*可以*被捕获——即使只是将它们记录到文件中并退出程序。

如果您网站的特定页面实际上可以在没有数据库连接的情况下正常处理（只是缺少“最新消息”或其他内容）怎么办？然后它可以`catch( Database_Exception $e )`继续，而您网站的其余部分则直接陷入最后的“哦，没有什么问题”消息。

对于您以外的其他人将使用的任何东西，大红色字母的消息也不是一个很好的错误处理机制 - 他们最终会在您不查看时看到错误的技术细节，或者您不知道发生了什么错误，因为您隐藏了该错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T21:31:23.750

即使你包装`exit()`到一个异常的成员函数中，你也没有在这里使用异常来处理错误，而只是`exit()`- 永远不会抛出异常，PHP 会在此之前停止。

> 所以它工作得很好，但这是不好的做法/编码吗？

是的，这是不好的做法。如果您自己创建了一个函数，它也可以正常工作：

```
function error_exit($message) {
    exit("<h1 style='color:red;' >FATAL ERROR: $message </h1>");
} 
```

相反，请考虑是要使用[*Excpetions*](http://php.net/Exceptions)还是要使用`exit()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T21:28:10.410

这是一个坏主意恕我直言。需要捕获异常才能正常运行。但是，您可以创建一个类似 ->error( $index ); 的方法。附着在您制作的每件物品上。从那里，您可以使用 try / catch 块将错误路由到特定类，以正确处理错误。

```
class TestClass 
{
    public function error( $index )
    {
        try 
        {
        // Convert index to exception and throw it.
        }
        catch ( Exception $e )
        {
        // Handle the error
        }
    } 
}
$a = new TestClass();
$a->error( 1000 ); 
```

请注意，这**不适**用于 php 抛出的异常，您需要单独捕获这些异常或使用执行中心。

# jquery - 输入字段顶部的 Div UI

> ID：15959079
> 
> 赞同：0
> 
> 时间：2013-04-11T21:21:58.887
> 
> 标签：jquery

我正在尝试将选中的 true 添加到输入复选框，但由于 UI 增强，我无法单击输入。

```
<div class="ez-checkbox">
   <input type="checkbox" name="AlertCB" value="ir-event" class="ez-hide">
</div>

$(".ez-checkbox").live("click", function(){ 
var findme = $('this').find("input");
//alert(findme)
$('findme').prop('checked', true);
 }); 
```

我开始编写代码来应用选中的复选框，但到目前为止没有运气应用检查。

请记住，有多个复选框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T21:37:49.743

尝试这个：

```
$('body').on('click', '.ez-checkbox', function(){ 
  $(this).children('.ez-hide').prop('checked', true);
}); 
```

这将使用`.on`（而不是`.live`）来监听点击`ez-checkbox`，然后找到下一个`ez-hide`并“检查”它。

# sql-server-2008 - PIVOT 表语法问题

> ID：15959081
> 
> 赞同：0
> 
> 时间：2013-04-11T21:22:00.080
> 
> 标签：sql-server-2008, pivot

我尝试实现以下 SQL 代码（SQL Server 2008），但在尝试使用[我之前帖子中](https://stackoverflow.com/questions/15756867/how-to-create-temp-table-while-joining-multiple-tables-that-have-to-be-pivot)的类似代码对表进行 PIVOT 时不断遇到语法问题，我很难过 。

[http://sqlfiddle.com/#!3/100bd/4](http://sqlfiddle.com/#!3/100bd/4)

错误：

> ',' 附近的语法不正确：DECLARE @query AS NVARCHAR(MAX), @colsPivot as NVARCHAR(MAX) select @colsPivot = STUFF((SELECT ',' + quotename('MEM'+ cast(MEMPER_Instance as varchar(10)) )+' *'+REPLACE(c.name, '会员*Count ) ) u ) x1 pivot ( max(value) for col in ('+ @colspivot +') ) p ; select * from #temp' exec(@query)

如何识别问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:30:14.423

您的一个选择语句中连续有两个逗号

```
select ahs_id,
       MEMPER_Instance,         
       ,cast (MEMPER_MinValue as float) MinValue 
```

第一次施法前加逗号，施法时加逗号，施法`as as float`后`))`加逗号

```
select ahs_id,
             MEMPER_Instance,         
             ,cast (MEMPER_MinValue as float) MinValue
             ,cast (MEMPER_MaxValue as as float)) MaxValue
             ,cast (MEMPER_AvgValue as float) AvgValue
             ,cast (MEMPER_MedianValue as float) MedianValue
             ,cast (MEMPER_Count as as float) Count 
```

修复这 4 个错误，它在小提琴上运行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T22:07:50.600

您的脚本有几个错误。

*   之后你的子查询中有一个额外的逗号`MEMPER_Instance,`
*   您在转化中`as`多次重复`float`

脚本应该是：

```
select * from MEM_TEMP;

DECLARE @query  AS NVARCHAR(MAX),
    @colsPivot as  NVARCHAR(MAX)

select @colsPivot = STUFF((SELECT ',' 
                      + quotename('MEM'+ cast(MEMPER_Instance as varchar(10))+'_'+REPLACE(c.name, 'MEMPER_', ''))
                    from MEM_TEMP t cross apply sys.columns as C
                    where C.object_id = object_id('MEM_TEMP') 
                    and C.name not in ('MEMPER_Instance','AHS_ID')
                    group by t.MEMPER_Instance, c.name
                    order by t.MEMPER_Instance 
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query 
  = ' SELECT * into ##temp
      from
      (
        select ahs_id,
          ''MEM''+cast(MEMPER_instance as varchar(10))+''_''+col col, 
          value
        from 
        (
          select ahs_id,
             MEMPER_Instance       
             ,cast (MEMPER_MinValue as float) MinValue
             ,cast (MEMPER_MaxValue as float) MaxValue
             ,cast (MEMPER_AvgValue as float) AvgValue
             ,cast (MEMPER_MedianValue as float) MedianValue
             ,cast (MEMPER_Count as float) Count

          from MEM_TEMP
        ) x
        unpivot
        (
          value
          for col in (
            MinValue,
            MaxValue,
            AvgValue,
            MedianValue,
            Count
          )
        ) u 
      ) x1
     pivot
     (
       max(value)
       for col in ('+ @colspivot +')
     ) p ; '

exec(@query)

select *
from ##temp 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/100bd/49)

# mysql - Django admin MySQL slow INNER JOIN

> ID：15959083
> 
> 赞同：8
> 
> 时间：2013-04-11T21:22:13.880
> 
> 标签：mysql, django, django-admin

I have a simple model with 3 ForeignKey fields.

```
class Car(models.Model):
    wheel = models.ForeignKey('Wheel', related_name='wheels')
    created = models.DateTimeField(auto_now_add=True)
    max_speed = models.PositiveSmallIntegerField(null=True)
    dealer = models.ForeignKey('Dealer')
    category = models.ForeignKey('Category') 
```

For the list view in the django admin i get 4 queries. One of them is a SELECT with 3 INNER JOINS. That one query is way to slow. Replacing the INNER JOINs with STRAIGHT_JOIN would fix the issue. Is there a way to patch the admin generated query just before it is evaluated?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-04-16T01:26:37.827

我已经为 Django ORM 实现了 INNER JOIN 的修复，如果使用 INNER JOIN 进行排序，它将使用 STRAIGHT_JOIN。我与 Django core-devs 进行了交谈，我们决定暂时将其作为一个单独的后端来做。所以你可以在这里查看：[https ://pypi.python.org/pypi/django-mysql-fix](https://pypi.python.org/pypi/django-mysql-fix)

但是，还有另一种解决方法。使用 James 回答的片段，但将 select_related 替换为：

```
qs = qs.select_related('').prefetch_related('wheel', 'dealer', 'category') 
```

它将取消 INNER JOIN 并使用 4 个单独的查询：1 个用于获取汽车，另外 3 个使用`car_id`IN (...)。

**更新：** 我发现了另一种解决方法。在 ForeignKey 字段中指定 null=True 后，Django 将使用 LEFT OUTER JOIN 而不是 INNER JOIN。在这种情况下，LEFT OUTER JOIN 没有性能问题，但您可能会遇到我还不知道的其他问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-07-05T09:49:48.297

您可以只指定`list_select_related = ()`阻止 django 使用内部连接：

```
class CarAdmin(admin.ModelAdmin):
    list_select_related = () 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T21:44:38.080

你可以覆盖

```
 def changelist_view(self, request, extra_context=None): 
```

`ModelAdmin`从类继承的管理类中的方法

像这样的东西（但这个问题相当老了）： [Django Admin：Getting a QuerySet filtered based on GET string，与更改列表中看到的完全一样？](https://stackoverflow.com/questions/1686934/django-admin-getting-a-queryset-filtered-according-to-get-string-exactly-as-se)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-20T17:17:45.343

I came across the same issue in the Django admin (version 1.4.9) where fairly simple admin listing pages were very slow when backed by MySQL.

In my case it was caused by the `ChangeList.get_query_set()` method adding an overly-broad global `select_related()` to the query set if *any* fields in `list_display` were many-to-one relationships. For a proper database (*cough PostgreSQL cough*) this wouldn't be a problem, but it was for MySQL once more than a few joins were triggered this way.

The cleanest solution I found was to replace the global `select_related()` directive with a more targeted one that only joined tables that were really necessary. This was easy enough to do by calling `select_related()` with explicit relationship names.

This approach likely ends up swapping in-database joins for multiple follow-up queries, but if MySQL is choking on the large query many small ones may be faster for you.

Here's what I did, more or less:

```
from django.contrib.admin.views.main import ChangeList

class CarChangeList(ChangeList):

    def get_query_set(self, request):
        """
        Replace a global select_related() directive added by Django in 
        ChangeList.get_query_set() with a more limited one.
        """
        qs = super(CarChangeList, self).get_query_set(request)
        qs = qs.select_related('wheel')  # Don't join on dealer or category
        return qs

class CarAdmin(admin.ModelAdmin):

        def get_changelist(self, request, **kwargs):
            return CarChangeList 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-12T18:50:08.853

好的，我找到了一种方法来修补管理员生成的查询。它很丑陋，但**似乎有效**：

```
class CarChangeList(ChangeList):

    def get_results(self, request):
        """Override to patch ORM generated SQL"""
        super(CarChangeList, self).get_results(request)
        original_qs = self.result_list
        sql = str(original_qs.query)
        new_qs = Car.objects.raw(sql.replace('INNER JOIN', 'STRAIGHT_JOIN'))

        def patch_len(self):
           return original_qs.count()
        new_qs.__class__.__len__ = patch_len

        self.result_list = new_qs

class CarAdmin(admin.ModelAdmin):

    list_display = ('wheel', 'max_speed', 'dealer', 'category', 'created')

    def get_changelist(self, request, **kwargs):
        """Return custom Changelist"""
        return CarChangeList

admin.site.register(Rank, RankAdmin) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-07-05T10:58:44.757

我在 MySQL 上进行了缓慢的管理查询，发现最简单的解决方案是将 STRAIGHT_JOIN 添加到查询中。我想出了一种将其添加到 a`QuerySet`而不是被迫转到 的方法`.raw()`，这不适用于管理员，并将其作为[`django-mysql`](http://django-mysql.readthedocs.org/en/latest/queryset_extensions.html#django_mysql.models.straight_join). 然后，您可以：

```
def get_queryset(self, request):
    qs = super(MyAdmin, self).get_queryset(request)
    return qs.straight_join() 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-18T17:38:56.303

即使在版本 8 中 MySQL 仍然存在这个问题，并且 Django 仍然不允许您在查询集中添加 STRAIGHT_JOIN。我找到了一个添加 STRAIGHT_JOIN 的 hackish 解决方案...：

这是用 Django 2.1 和 MySQL 5.7 / 8.0 测试的

```
def fixQuerySet(querySet):
    # complete the SQL with params encapsulated in quotes
    sql, params = querySet.query.sql_with_params()
    newParams = ()
    for param in params:
        if not str(param).startswith("'"):
            if isinstance(param, str):
                param = re.sub("'", "\\'", param)
            newParams = newParams + ("'{}'".format(param),)
        else:
            newParams = newParams + (param,)
    rawQuery = sql % newParams

    # escape the percent used in SQL LIKE statements
    rawQuery = re.sub('%', '%%', rawQuery)

    # replace SELECT with SELECT STRAIGHT_JOIN
    rawQuery = rawQuery.replace('SELECT', 'SELECT STRAIGHT_JOIN')

    return querySet.model.objects.raw(rawQuery) 
```

**重要提示：**此方法返回原始查询集，因此应在使用查询集之前调用

# javascript - Real time accounting changes with jQuery

> ID：15959085
> 
> 赞同：1
> 
> 时间：2013-04-11T21:22:25.297
> 
> 标签：javascript, jquery, html, forms, web-applications

I'm trying to have a label which contains a balance change when a person enters a charge amount. So assume something like...

```
<table>
    <tr>
        <td class="remainingBudget"></td>
        .
        .
        . 
```

...and then....

```
<form>
    <table>
        <tr>
            <td><input class="percentCommitment"></td>
            <td><input class="totalAmount"></td>
            .
            . 
            . 
```

The user will never touch the `totalAmount` form input, only `percentCommitment`, which will calculate `totalAmount` based on another value, which we don't need to worry about. I have the totalAmount input populating automatically on the keydown event of percentCommitment with something like this...

```
$(".percentCommitment").keyup(function() {
    var commit = caluculatePercentCommitment() || 0;
    var salary = getSalary();
    var amount;
    if (commit > 0 && salary > 0) {
        ttl = (salary * commit) / 100;
    } else {
        amount = 0.00;
    }

    $(this).parent().find('.amountCommitment').val(amount);
}); 
```

This part is working fine and the total amount calculates correctly in real time as the person changes the `percentCommitment` value. This works because the value I multiply the percent commitment by, the person's annual salary, is static. It doesn't change. So if the person enters 1, 1% of salary is calculated and displayed. If the user then tacks on a 2, 12% is calculated from the same original salary, and this is exactly what I want to happen.

The problem comes with calculating the remaining budget in real time. Subtracting `totalAmount` from `remainingBudget` poses a problem, because if the user does the same thing, enters 1, then my jQuery does `newRemainingBudget = remainingBudget - (0.01 * salary)`, which is fine, but then if they tack on a 2 I'm doing `newNewRemainingBudget = newRemainingBudget - (0.12 * salary)`, which isn't what I want. I want all changes to be computed from the *original* remaining budget.

I was trying to do something like this...

```
 $(".totalAmount").change(function (event) {
            var remain = $(".remainingBudget").text();
            remain = formatDecimalInput(remain);
            var enter = $(".totalAmount).val();
            enter = formatDecimalInput(enter);
            if (enter <= remain) {
                $(".remainingBudget")text((remain-enter).formatCurrency());
            }
            else {
                // Do nothing
                event.preventDefault();
            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T21:26:02.973

您必须在屏幕上有一个位置来保存总预算金额并使用它加上其他字段来计算剩余金额。替换时不要以这种方式使用字段。

```
remainingBudget = totalBudget - (0.01 * salary) 
```

注意：如果需要，您可以有一个隐藏的表单字段来保存总计。

# css - 如何在具有动态大小图像的容器中包含文本？

> ID：15959086
> 
> 赞同：2
> 
> 时间：2013-04-11T21:22:30.860
> 
> 标签：css

考虑这个html：

```
<div>
<a href="#" title="image"><img src="http://s9.postimg.org/lqikvh05r/black_shirt.jpg" /></a>
<h3>Some text here but if this gets long it will pass the image and not wrap</h3>
</div> 
```

因此，在不提前知道图像大小的情况下，是否有一种 CSS 方法可以将文本包含到与图像一样宽并在它变长时换行？

这是问题的一个小提琴-> [http://jsfiddle.net/qRGM5/](http://jsfiddle.net/qRGM5/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T22:21:30.970

嗯，我不知道 CSS 是否有解决方法，但您可以尝试使用 Javascript（使用 jQuery）：

```
$(document).ready(function(){
    $('div').css('width', $('img').width()+'px');
}); 
```

**更新：**

无 javascript 解决方法（您将需要图像宽度）：

```
<div style="display: inline-block; border: 1px solid red;">
    <a href="#" title="image"><img src="http://s9.postimg.org/lqikvh05r/black_shirt.jpg" /></a>
    <h3 style="width: 300px;">Some text here but what if this text gets really long and passed the image</h3>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T23:44:59.607

我知道它可能很明显，也许不是你要找的。但如果您愿意在图像上设置最大宽度，它会起作用。

```
#picture img {
max-width:100px;
}
#picture {
max-width:100px;
}
#text{
max-width:inherit;
}

<div id="picture">
<a href="#" title="image">
<img src="http://s9.postimg.org/lqikvh05r/black_shirt.jpg"     /></a>
<h3><div id="text" >Some text here but if this gets long
 it will pass the image and not wrap</div></h3> 
```

# javascript - 如何为 URL 中的给定哈希触发 Chrome 扩展、内容脚本？

> ID：15959090
> 
> 赞同：10
> 
> 时间：2013-04-11T21:22:42.640
> 
> 标签：javascript, google-chrome-extension, manifest, hashtag, content-script

我的比赛方案：

```
"content_scripts" : [
 {
   "matches" : [
     "https://stackoverflow.com/questions#epic*"
   ],
   "js" : ["silly.js"]
 }
], 
```

因此，如果用户访问网页（如[https://stackoverflow.com/questions](https://stackoverflow.com/questions)）然后添加`#epic`它会转到[https://stackoverflow.com/questions#epic](https://stackoverflow.com/questions#epic)但会`#epic`在 URL 的末尾，这将激活内容脚本`silly.js`。

这就是应该发生的事情，但这不起作用。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-11T23:01:28.120

请参阅[内容脚本、匹配模式](http://developer.chrome.com/extensions/match_patterns.html)。
匹配模式不适用于 URL 的[片段](https://en.wikipedia.org/wiki/Uniform_Resource_Locator#Syntax)部分。

要将内容脚本限制为给定的哈希，请使用[和`include_globs`/或`exclude_globs`属性](http://developer.chrome.com/extensions/content_scripts.html#match-patterns-globs)。

例如，在这种情况下，您可能会使用：

```
"content_scripts" :     [ {
    "matches" :         [
        "*://stackoverflow.com/questions/*"
    ],
    "include_globs" :   ["*#epic*"],
    "js" :              ["silly.js"]
} ], 
```

# ruby-on-rails - form_for如何设置html表单的动作？

> ID：15959093
> 
> 赞同：0
> 
> 时间：2013-04-11T21:23:05.070
> 
> 标签：ruby-on-rails

按照 rails guides 的教程，我遇到了一个问题，我了解了复数与单数的命名和影响。现在我知道了这一点，我有兴趣了解是否可以解决这个问题——而不必重命名我的控制器。

我已经将一个新的 :url_path 传递给 form_for (account_path) 并且我的 'rake routes' 输出一个条目：

```
account GET    /account/:id(.:format)      account#show 
```

尝试使用表单访问页面时仍然出现以下错误：

```
Routing Error
No route matches {:action=>"show", :controller=>"account"} 
```

我的 routes.rb 有一个用于复数资源目录（resources :account）的条目......了解单数版本有效，但控制器仍然代表“许多”。

对绿色 RoR 开发人员有任何见解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T21:48:58.803

假设这不是一个错字 - 你应该写`resource :account`. 希望有帮助。

# c - vars.c:4:1：错误：预期的声明说明符或 '...' 在 '(' 标记之前

> ID：15959108
> 
> 赞同：1
> 
> 时间：2013-04-11T21:23:41.237
> 
> 标签：c, windows, declaration

我今年 13 岁，正在学习 c 编程，因此我对 c 编程有非常基本的了解。我正在学习如何“显示变量值”，我使用的是非常基本的代码，但是当我尝试使用 GNU（MinGW）编译它时，它告诉我......

vars.c:4:1：错误：预期的声明说明符或 '...' 在 '(' 标记之前

请有人告诉我如何解决这个问题！

这是代码：

```
#include <stdio.h> 

int main(
(printf( "Integer is %d \n",num);
(printf( "Values are %d and %f \n",num,pi);
(printf( "%%7d displays %7d \n",num);
(printf( "%%07d displays %07d \n",num);
(printf( "Pi is approximately %1.10f \n",pi);
(printf( "Right-aligned %20.3f rounded pi \n",pi);
(printf( "Left-aligned %-20.3f rounded pi \n",pi);
return 0 ;)
)
({
int num = 100;
double pi = 3.1415926536;
(return 0 ;)
}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T21:27:30.523

从第三行开始，您使用的语法几乎完全错误。你从来没有完成过声明的论点，`main`而且你还有很多额外的括号。您应该在 Google 上搜索“c hello world”并尝试运行这些示例，这样您就可以了解 C 代码的样子。这是一个可能有帮助的例子：

```
#include<stdio.h>

int main()
{
    int num = 100;
    printf("Hello World\n");
    printf("Integer is %d\n",num);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T21:30:20.580

我不确定你是从哪里想出这段代码的，但我假设你打算输入以下内容：

```
#include <stdio.h>

int main(void)
{
        int num = 100;
        double pi = 3.1415926536;

        printf( "Integer is %d \n",num);
        printf( "Values are %d and %f \n",num,pi);
        printf( "%%7d displays %7d \n",num);
        printf( "%%07d displays %07d \n",num);
        printf( "Pi is approximately %1.10f \n",pi);
        printf( "Right-aligned %20.3f rounded pi \n",pi);
        printf( "Left-aligned %-20.3f rounded pi \n",pi);

        return 0 ;
} 
```

尝试查找在线 C 编程教程并按照自己的方式进行操作。事实证明，这比试错更令人满意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T21:29:32.210

至少三个问题：

1) 完全不必要的括号

2) 未初始化的变量

3) ???试图在你的 main() 中创建一个 lambda???

建议修改：

```
#include <stdio.h> 

int main() {
  int num = 100;
  double pi = 3.1415926536;

  printf( "Integer is %d \n",num);
  printf( "Values are %d and %f \n",num,pi);
  return 0 ;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T21:31:25.320

您的代码的工作版本：

```
#include <stdio.h> 

int main() {
  int num = 100;
  float pi = 3.1415926536;

  printf( "Integer is %d \n",num);
  printf( "Values are %d and %f \n",num,pi);
  printf( "%%7d displays %7d \n",num);
  printf( "%%07d displays %07d \n",num);
  printf( "Pi is approximately %1.10f \n",pi);
  printf( "Right-aligned %20.3f rounded pi \n",pi);
  printf( "Left-aligned %-20.3f rounded pi \n",pi);

  return 0;
} 
```

# ruby-on-rails - 从静态索引页面调用 Javascript

> ID：15959113
> 
> 赞同：0
> 
> 时间：2013-04-11T21:23:57.317
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我在公共文件夹中的所有内容，我的 rails 的 index.html 文件是这样的：

```
<!DOCTYPE html>
<html>
<head>
    <title></title>
</head>
<body>
    <script src="jstester.js">
    </script>
</body>
</html> 
```

我在 assets->javascripts 文件夹中的所有内容是我在其中添加了一个 jtester.js 文件，现在它只有一行代码：

```
alert("fffsdfasdsad"); 
```

其他一切都只是来自 Rails 的默认设置。现在当我运行 rails 服务器时，我应该看到一个消息框吗？因为我什么都看不到。什么不见​​了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T21:27:29.670

通过资产管道服务的资产总是来自`/assets`. 从资产管道提供的 JavaScript 文件的路径是`/assets/<file>.js`，而不仅仅是`<file>.js`. 修复你的`src`属性：

```
<script src="/assets/jstester.js"></script> 
```

# symfony - 使用 Sonata Block Bundle 渲染动态块名称

> ID：15959114
> 
> 赞同：0
> 
> 时间：2013-04-11T21:24:02.057
> 
> 标签：symfony, twig, symfony-sonata

有谁知道如何使用 Sonata Block Bundle 呈现动态生成的块名称？我想要实现的一个例子是：

```
page.html.twig:

<div class="content">
 {{ sonata_block_render({
'name': '/content/blocks/{{ suffix }}'
}) }}
</div> 
```

其中 suffix 是传递给 twig 模板的变量，例如 about-us。这允许我使用单个模板来呈现我的所有 CMS 内容。我已尝试执行上述操作，但这似乎不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T09:04:12.633

你已经在树枝上下文中，这就是为什么`{{ }}`没有工作。您将需要这样的字符串连接运算符 ( `~`)：

```
<div class="content">
{{ sonata_block_render({
    'name': '/content/blocks/' ~ suffix
}) }}
</div> 
```

# iphone - APNs 证书在登录钥匙串中看起来不同

> ID：15959117
> 
> 赞同：3
> 
> 时间：2013-04-11T21:24:10.137
> 
> 标签：iphone, ios, apple-push-notifications

我正在生成一些替换的 APNs 服务器证书，我很担心，因为当我将它们拖入钥匙串登录时，它们看起来会有所不同。在证书看起来像之前：

```
Apple Production IOS Push Services: com.mycompany.myproduct 
```

但现在他们看起来像

```
Apple Production IOS Push Services: AB12C3DEF4;AB12C3DEF4 
```

其中“AB12C3DEF4”是应用前缀。有没有其他人看到这个？如果您最近生成了 APNs 证书，它看起来像这样吗？

这是自 Apple 更改证书接口以来我第一次进行这种生成...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T21:27:53.707

我也看到了这个。这似乎是一个错误；我提交了一个雷达（如果您搜索，您应该会看到我在 Apple 开发者论坛中创建的帖子）。

同时，为了使您的证书更易于查找，请确保在生成创建证书的请求的“**向证书颁发机构请求证书”表单的“名称”部分中输入您要搜索的唯一名称。**您在名称字段中输入的任何内容都将是私钥的名称，因此在钥匙串中搜索仍会找到您的证书，您将能够从私钥名称中识别它。

# java - 我可以将 MongoDB 用于 ActiveMQ 主/从架构吗？

> ID：15959121
> 
> 赞同：4
> 
> 时间：2013-04-11T21:24:17.210
> 
> 标签：java, mongodb, jms, activemq, master-slave

我想搭建一个[ActiveMQ Master/Slave集群](http://activemq.apache.org/jdbc-master-slave.html)
如果我理解正确（如果我错了请纠正我），这需要一个JDBC支持的数据库，比如MySql，这只是为了同步的目的。

问题是，我已经有一个 MongoDB 集群，所以我想避免安装另一个数据库。是否可以使用 MongoDB 或其他已经可用的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T13:39:29.583

使用 ActiveMQ 进行主/从的方式是保持持久性存储在某个地方共享。虽然它使用纯 JDBC 与大多数主要数据库一起工作，但它仍然需要表锁等功能来确定哪个服务器是主服务器。我知道没有 MongoDB 的 JDBC/SQL 驱动程序可以正确处理这个问题。

ActiveMQ Master/Slave 的推荐方法是在某处使用共享磁盘区域以实现持久性（SAN 或类似）。JDBC 方法非常慢，即使使用 SQL 数据库服务器也是如此。

和不。数据库不仅仅用于同步。每个持久消息都将写入其中。

**更新**

从 ActiveMQ 5.9.0 开始，还有一种使用 LevelDB的[集群方法可用。](http://activemq.apache.org/replicated-leveldb-store.html)

# msbuild - 如何在 Team build 上部署多个数据库

> ID：15959122
> 
> 赞同：1
> 
> 时间：2013-04-11T21:24:18.270
> 
> 标签：msbuild, sql-server-data-tools

我在 MSBuild Arguments 中尝试了以下内容，但没有成功。

```
/t:Build;Publish /p:SqlPublishProfilePath=McMData1.local.publish.xml 
/p:SqlPublishProfilePath McMData1.local.publish.xml 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T16:06:17.497

您只能指定一个 SqlPublishProfilePath 值。您可以创建另一个 msbuild 命令任务以单独发布另一个数据库项目或创建另一个构建定义。

此外，您可以[在 xml 文件命令行驱动中创建数据库属性](http://geekswithblogs.net/jakob/archive/2012/04/25/deploying-ssdt-projects-with-tfs-build.aspx)，但您仍然只能指定一个 .xml 文件并进行一次部署。

# python - 如何解析/格式化一串元组？

> ID：15959125
> 
> 赞同：1
> 
> 时间：2013-04-11T21:24:23.313
> 
> 标签：python, string, list, csv, format

我只是写了一个成绩计算程序，并且一直到最后几行......我有这个元组字符串：

```
"('Jetson Elroy', '45', '88', '88', '70', 0.7253846153846155, 'C', 'Not Passible', 0.9385714285714284, 0.6528571428571427, 0.367142857142857), ('Joe Kunzler', '99', '88', '77', '55', 0.7699999999999999, 'C', 'Not Passible', 0.8557142857142858, 0.5700000000000001, 0.28428571428571436), ('Harris Jones', '77', '99', '47', '77', 0.7115384615384616, 'C', 'Not Passible', 0.9642857142857143, 0.6785714285714286, 0.39285714285714285)" 
```

我想让每个学生及其分数逐行打印到我的文本文件中，例如：

```
'Jetson', '45', '88', '88', '70', 0.7253846153846155, 'C', 'Not Passible', 0.9385714285714284, 0.6528571428571427, 0.367142857142857

'Joe', '99', '88', '77', '55', 0.7699999999999999, 'C', 'Not Passible', 0.8557142857142858, 0.5700000000000001, 0.28428571428571436

'Harris Jones', '77', '99', '47', '77', 0.7115384615384616, 'C', 'Not Passible', 0.9642857142857143, 0.6785714285714286, 0.39285714285714285 
```

我试着做：

```
m=open('GradeAnalysis.txt', 'r+')
m.write (print i for i in ourlist)
m.close() 
```

但我意识到如果你想使用 m.write()，你必须有一个字符串。然后我将我的列表转移到上面的元组字符串中。任何 pythonic 建议表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T21:27:07.717

[`join()`](http://docs.python.org/2/library/stdtypes.html#str.join)可以是一个简单的解决方案：

```
m.write('\n'.join(i for i in ourstring)) 
```

* * *

*编辑：*由于`ourstring`不是字符串列表而是字符串，您可以使用正则表达式来获取表示元组的字符串

```
import re

ourstring = "('Jetson Elroy', '45', '88', '88', '70', 0.7253846153846155, 'C', 'Not Passible', 0.9385714285714284, 0.6528571428571427, 0.367142857142857), ('Joe Kunzler', '99', '88', '77', '55', 0.7699999999999999, 'C', 'Not Passible', 0.8557142857142858, 0.5700000000000001, 0.28428571428571436), ('Harris Jones', '77', '99', '47', '77', 0.7115384615384616, 'C', 'Not Passible', 0.9642857142857143, 0.6785714285714286, 0.39285714285714285)"
tuples = re.findall(r'\((.+?)\)', ourstring) # (.+?) to perform a non-greedy match - important!
m.write ('\n'.join(t for t in tuples)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T21:26:59.463

使用其中一个[`str.join()`](http://docs.python.org/2/library/stdtypes.html#str.join)或[`csv`模块](http://docs.python.org/2/library/csv.html)来写入您的数据。

Using`','.join(str(i) for i in ourlist)`创建了一个逗号分隔的字符串来写入文件，但由于这确实是 CSV 数据，因此该`csv`模块可能更适合。

```
import csv

with open('GradeAnalysis.txt', 'rb') as out:
    writer = csv.writer(out)
    for row in list_of_sequences:
        out.writerow(row) 
```

那么在哪里`list_of_sequences`是一个包含其他列表或元组的列表；例如：

```
list_of_sequences = [(1, 2, 3), ('foo', 'bar', 'baz')] 
```

# xml - 如何通过 XSL 使用键调用模板

> ID：15959126
> 
> 赞同：0
> 
> 时间：2013-04-11T21:24:29.363
> 
> 标签：xml, xslt

我几乎解决了这个问题，然后发现coverage-ref 是对应coverage element 中的一个关键属性。

Xpath 看起来像

/消息/人员信息/声明列表/声明/

```
<coverage-ref>4</coverage-ref> 
```

/message/person-info/coverage-list/

```
<coverage key="4" id="23" >
...
</coverage> 
```

当前 XSL 的片段

```
<xsl:template match="claim" mode="fact">
    <ClaimFact>
        <coverage>
                <xsl:choose>
                    <xsl:when test="./coverage-ref">
                    <!-- 
                    COVERAGE-<xsl:value-of select="util:ifNull(./coverage-ref, '0')"/>
                    -->
                        <xsl:call-template name="coverage-ref">
                            <xsl:with-param name="coverage-ref" select="./coverage-ref" />
                        </xsl:call-template>
                    </xsl:when>
                    <xsl:when test="./../../../coverage/@id">COVERAGE-<xsl:value-of select="./../../../coverage/@id"/></xsl:when>                       
                    <xsl:otherwise><xsl:text>UNKNOWNCOVERAGE</xsl:text></xsl:otherwise>
                </xsl:choose>
        </coverage>     
    </ClaimFact>
</xsl:template> 

<xsl:template match="coverage|coverage-ref" >
<xsl:param name="coverage-ref" />
<xsl:variable name="coverage" 
        select="/person-info/coverage-list/coverage[@key = $coverage-ref]" />   
    <CoverageDimension>
        <mycoverageref><xsl:value-of select="$coverage" /></mycoverageref>
...

    </CoverageDimension>
</xsl:template> 
```

我得到的错误

```
Error at xsl:call-template on line 1845 column 51 of personinfo.xsl:
  XTSE0650: No template exists named coverage-ref 
```

现有的注释掉会将coverage-ref放入mycoverageref。

我试图对 xsl:call-template、xsl:param 和 xsl:variable 执行的操作是 1) 将 mycoverageref 设置为元素的 @id 而不是 @key。

2) 最好将值 4 替换为 23，然后现有的应用模板应该在 CoverageDimension 上工作。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T22:06:18.213

您正在尝试调用命名模板“template-ref”

```
<xsl:call-template name="coverage-ref">
   <xsl:with-param name="coverage-ref" select="./coverage-ref" />
</xsl:call-template> 
```

但是您的 XSLT 中没有这样的模板。您只有一个与**coverage-ref**元素匹配的模板

```
<xsl:template match="coverage|coverage-ref"> 
```

这与命名模板不同。

有可能你打算这样做......

```
<xsl:template match="coverage" name="coverage-ref"> 
```

这既是一个匹配的模板，也是一个命名的模板。或者，您可以在此处将原始**xsl:call-template**更改为**xsl:apply-templates**

```
<xsl:apply-template select="coverage-ref">
    <xsl:with-param name="coverage-ref" select="./coverage-ref" />
</xsl:apply-templates> 
```

不过，您实际上并不需要在其中传递参数。匹配的模板可以直接获取元素的值。

```
<xsl:template match="coverage-ref" >
    <xsl:variable name="coverage" select="/person-info/coverage-list/coverage[@key = .]" /> 
```

但无论如何，您谈论的是“钥匙”，但实际上您并没有使用“正确”的钥匙。特别是**xsl:key**。这正是您在这种情况下所需要的。您想按其**关键**属性查找**覆盖元素吗？**然后像这样定义一个键

 **```
<xsl:key name="coverageLookup" match="coverage" use="@key" /> 
```

然后查找覆盖元素，只需执行以下操作：

```
<xsl:value-of select="key('coverageLookup', $coverage-ref)/@id" /> 
```

或者，如果您使用的是匹配的模板，它看起来像这样

```
<xsl:template match="coverage-ref" >
   <CoverageDimension>
      <mycoverageref><xsl:value-of select="key('coverageLookup', .)/@id" /></mycoverageref>
      ...
   </CoverageDimension>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:17:31.133

这是我所做的，非常感谢@Tim-C。我们将不得不考虑未来版本的 keyLookups，但这适用于当前的 xml。使用变量与值`$coverpath`匹配使这项工作。`coverage/@key``coverage-ref/text()`

```
<xsl:stylesheet version="20" 
...
<xsl:template match="person-info">
    <PersonDimension>
    ...
    </PersonDimension>
    <xsl:apply-templates select="coverage-list/coverage" />         
    <xsl:apply-templates select="//claim-list/claim" mode="fact" />
</xsl:template>

<xsl:template match="claim" mode="fact">
    <xsl:variable name="coveragepath" 
        select="/message/person-info/coverage-list/coverage[@key = current()/coverage-ref/text()]" />

    <ClaimFact>
...
        <coverage>
                <xsl:choose>
                    <xsl:when test="$coveragepath/@id">                     
                        COVERAGE-<xsl:value-of select="$coveragepath/@id"/>
                    </xsl:when>
                    <xsl:when test="./../../../coverage/@id">COVERAGE-<xsl:value-of select="./../../../coverage/@id"/></xsl:when>                       
                    <xsl:otherwise>UNKNOWNCOVERAGE</xsl:otherwise>
                </xsl:choose>
        </coverage> 
    </ClaimFact>

</xsl:template> 

<xsl:template match="coverage" >
<CoverageDimension>
        <jaxbId>
        <xsl:choose>
            <xsl:when test="@id">COVERAGE-<xsl:value-of select="@id"/></xsl:when>
            <xsl:otherwise>UNKNOWNCOVERAGE</xsl:otherwise>
        </xsl:choose>
        </jaxbId>
    </CoverageDimension>
</xsl:template> 
```**

# java - 使用多个构造函数但没有 getter 方法对遗留代码进行单元测试

> ID：15959128
> 
> 赞同：1
> 
> 时间：2013-04-11T21:24:41.453
> 
> 标签：java, unit-testing, constructor, multiple-constructors

我正在尝试对一段代码进行单元测试（在 java 中），该代码有几个构造函数，其中一些带有逻辑。所以除了设置一些字段之外，构造函数可能会根据满足的某些条件影响某些静态对象。我想知道如何对这些进行测试，因为代码不提供任何 getter 方法并且字段是私有的。我也无权更改原始代码。我可以查看是否重复我为每个构造函数所做的每个测试的一种方法，但似乎应该存在更好的解决方案。我在这个站点上看到了一些解决方案，以及其他用于具有多个构造函数的单元测试类的解决方案，但我没有找到任何完全符合我的情况的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T21:37:46.250

对其进行单元测试的目标是确保对象对所有可能的输入都正确地运行，并且始终处于一致的预期状态。它在开发类和模块时特别有价值。没有吸气剂应该没有什么区别。

在您的情况下，我建议在所有构造函数（正常值、疯狂值、空值、边缘情况等）中抛出各种各样的参数组合，并确保生成的对象按预期运行。按预期行事可能意味着正确操作、正常失败或抛出适当的异常。

当然，对象除了构造函数之外还有一些方法，所以你应该在测试中包含这些方法。如果对象有任何副作用，您可以检查这些是否按预期发生。

最后，即使您无权更改代码，也许您可​​以通过添加一些额外的方法来扩展它，这些方法的唯一目的是促进单元测试。如果不更改规则是您组织的简单编码策略，那么添加旨在提高质量的方法肯定是可以的。

另一方面，如果你真的不能改变代码，为什么还要麻烦单元测试呢？如果您无法更改代码，则无法修复单元测试可能揭示的任何错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T21:40:00.597

这些构造函数所做的所有工作都会产生一些影响，对吗？所以测试它的效果。在那些静态物体上？检查那些。关于对象的后续行为？测试一下。

# c# - 如何使用强类型反射为泛型类的方法查找 MethodInfo？

> ID：15959129
> 
> 赞同：10
> 
> 时间：2013-04-11T21:24:41.843
> 
> 标签：c#, reflection

我想`MethodInfo`从具有仅在运行时知道的类型参数的泛型类中获取一种方法。

这是我如何`MethodInfo`从非泛型类中获取泛型方法的方法：

```
class MyClass
{
    public void MyMethod<T> (T arg)
    {
    }
}

static MethodInfo Resolve (Type type)
{
    Expression<Action<MyClass, object>> lambda = (c, a) => c.MyMethod (a);
    MethodCallExpression                call = lambda.Body as MethodCallExpression;

    return call
        .Method                        // Get MethodInfo for MyClass.MyMethod<object>
        .GetGenericMethodDefinition () // Get MethodInfo for MyClass.MyMethod<>
        .MakeGenericMethod (type);     // Get MethodInfo for MyClass.MyMethod<int>
}

Resolve (typeof (int)).Invoke (new MyClass (), new object[] {3}); 
```

现在，如果我想用泛型类尝试类似的东西：

```
class MyClass<T>
{
    public void MyMethod (T arg)
    {
    }
}

static MethodInfo Resolve (Type type)
{
    Expression<Action<MyClass<object>, object>> lambda = (c, a) => c.MyMethod (a);
    MethodCallExpression                        call = lambda.Body as MethodCallExpression;

    return call
        .Method              // Get MethodInfo for MyClass<object>.MyMethod
        .SomeMagicMethod (); // FIXME: how can I get a MethodInfo 
                             // for MyClass<T>.MyMethod where typeof (T) == type?
}

Resolve (typeof (string)).Invoke (new MyClass<string> (), new object[] {"Hello, World!"}); 
```

可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T23:14:56.823

```
public class MyClass<T>
{
    public void MyMethod(T arg, bool flag)
    {
        Console.WriteLine("type: MyClass<{0}>, arg: {1}, flag:{2}", typeof(T), 
            arg.ToString(), flag);
    }
    public void MyMethod(T arg)
    {
        Console.WriteLine("type: MyClass<{0}>, arg: {1}", typeof(T), arg.ToString());
    }
}
public class GenericInvokeTest
{
    static MethodInfo Resolve(Type type)
    {
        var name = ActionName<object>(x => (o) => x.MyMethod(o));
        var genericType = typeof(MyClass<>).MakeGenericType(new[] { type });
        MethodInfo genericTypeMyMethodInfo = genericType.GetMethod(name); // "MyMethod");
        genericTypeMyMethodInfo = genericType.GetMethod(name, new[] { type, typeof(bool) });
        return genericTypeMyMethodInfo;
    }
    public static void Test1()
    {
        Resolve(typeof(string))
            .Invoke(new MyClass<string>(), new object[] { "Hello, World!", true });
        // Resolve(typeof(string))
            .Invoke(new MyClass<string>(), new object[] { "Hello, World!" });
    }
} 
```

**要使其成为强类型**，您应该简化并使用不同的方法：

1）`name`使用表达式获取动作/方法的...

```
var name = ActionName<object>(x => (o) => x.MyMethod(o)); 
```

2）然后做不可避免的反射部分

```
var genericType = typeof(MyClass<>).MakeGenericType(new[] { type });
MethodInfo genericTypeMyMethodInfo = genericType.GetMethod(name); // "MyMethod"); 
```

* * *

在哪里`ActionName`采取类似的方法，例如`OnPropertyChanged(x => x.Property)`

```
public static string ActionName<T>(Expression<Func<MyClass<T>, Action<T>>> expression)
{
    return GetMemberName(expression.Body);
}
public static string GetMemberName(Expression expression)
{
    switch (expression.NodeType)
    {
        case ExpressionType.Lambda:
            var lambdaExpression = (LambdaExpression)expression;
            return GetMemberName(lambdaExpression.Body);
        case ExpressionType.MemberAccess:
            var memberExpression = (MemberExpression)expression;
            var supername = GetMemberName(memberExpression.Expression);
            if (String.IsNullOrEmpty(supername))
                return memberExpression.Member.Name;
            return String.Concat(supername, '.', memberExpression.Member.Name);
        case ExpressionType.Call:
            var callExpression = (MethodCallExpression)expression;
            return callExpression.Method.Name;
        case ExpressionType.Convert:
            var unaryExpression = (UnaryExpression)expression;
            return GetMemberName(unaryExpression.Operand);
        case ExpressionType.Parameter:
            return String.Empty;
        default:
            throw new ArgumentException(
                "The expression is not a member access or method call expression");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-15T13:32:52.237

工作解决方案：

```
static MethodInfo Resolve (Type type)
{
    Expression<Action<MyClass<object>, object>> lambda = (c, a) => c.MyMethod (a);
    MethodCallExpression                        call = lambda.Body as MethodCallExpression;
    MethodInfo[]                                methods;
    Type                                        target;

    target = call
        .Method // Get MethodInfo for MyClass<object>.MyMethod
        .DeclaringType // Get typeof (MyClass<object>)
        .GetGenericTypeDefinition () // Get typeof (MyClass<>)
        .MakeGenericType (type); // Get typeof (MyClass<T>) where typeof (T) == type

    methods = target.GetMethods (BindingFlags.Instance | BindingFlags.NonPublic | BindingFlags.Public | BindingFlags.Static); // We probably don't need static methods

    return Array.Find (methods, (m) => m.MetadataToken == method.MetadataToken); // Find MyClass<T>.MyMethod where typeof (T) == type
} 
```

# core-bluetooth - 未调用 didDiscoverPeripheral

> ID：15959130
> 
> 赞同：2
> 
> 时间：2013-04-11T21:24:49.767
> 
> 标签：core-bluetooth

我正在连接蓝牙设备。但是，从不调用 didDiscoverPeripheral 委托方法。

我正在使用 UUID 扫描设备。这直接来自温度传感器示例代码。[centralManager scanForPeripheralsWithServices:uuidArray options:options];

奇怪的是，如果我注释掉这个方法，retrieveConnectedPeripherals 会发现设备很好。我在设备开机时调用retrieveConnectedPeripherals。只有在实现了 didRetrieveConnectedPeripherals 时，才会真正检测到设备。但是，仍然没有调用 didDiscoverPeripheral。

我觉得这很令人困惑。iOS 如何在设备被发现之前连接到设备？此外，它会自动断开连接。我希望它保持连接，直到设备被拔出。

我会继续看下去的。

在此先感谢，迈克

# servicestack - 自定义 CredentialsAuthProvider 中的 ServiceStack 访问 Ioc 容器

> ID：15959134
> 
> 赞同：3
> 
> 时间：2013-04-11T21:25:10.737
> 
> 标签：servicestack, funq

我扩展了 service-stack 提供的 CredentialsAuthProvider 以允许我针对 Active-Directory 实例进行身份验证。AD 访问逻辑封装在一个名为*AdManager*的自定义类中（见下文），例如：

```
public class AdCredentialsAuthProvider : CredentialsAuthProvider
{
    public override bool TryAuthenticate(IServiceBase authService, 
                                            string userName, 
                                            string password)
    {
        IAdManager manager = new AdManager();
        return manager.Authenticate(userName, password);
    }
    ... 
```

**问题：**

*   我希望我可以在我的扩展“AppHostBase”中使用服务堆栈内置 IoC“Funq.Container”注册*AdManager ，并从我的自定义 CredentialsAuthProvider 中访问它？*我尝试注册它，但没有找到通过内置框架的服务堆栈访问 IoC（或我注册的 AdManager 对象）的方法。

我错过了什么吗？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T23:18:18.247

您可以使用提供的 AuthProvider 从内部访问 IOC `IServiceBase`，例如：

```
var addManager = authService.TryResolve<IAdManager>(); 
```

在其他任何地方，您始终可以使用 Singleton 解决依赖关系：

```
var addManager = HostContext.TryResolve<IAdManager>(); 
```

否则，如果您知道它在 ASP.NET Web 主机中，您也可以通过 AppHost 单例访问它：

```
var addManager = AppHostBase.Instance.Resolve<IAdManager>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T23:04:23.937

服务堆栈也使用属性注入。我在扩展服务堆栈提供的服务类时使用了属性注入。

```
public class MyService : Service
{
        public MyService(IDb db)  
        {
           //db constructor inject
        }

        public IValidator<MyData> MyDataValidator { get; set; }

        public object Get(MyData request)
        {
           //MyDataValidator is property injected
        }
} 
```

我相信同样的逻辑可以应用于 AuthProvider。但我还没有测试过。

# javascript - 维护范围

> ID：15959136
> 
> 赞同：3
> 
> 时间：2013-04-11T21:25:19.947
> 
> 标签：javascript, jquery, scope, this

我有一个关于维护对象范围的一般性问题`this`。这是一个简化的代码片段。记`var that = this`下我调用的事件处理程序的行和内部`that.showMenu()`。

```
var MyObj = {
    init : function(target){
        this.$Target = $(target);
        this.$Menu = $(target).find('.menu');
        this.eventBindings();
    },
    eventBindings : function(){
        var that = this;
        this.$Target.on('click', '.anchor', function(e){
            e.preventDefault();
            that.showMenu();
            //some other code
        });
    },
    showMenu : function(){
        this.$Menu.show();
    }
};
MyObj.init('.myTarget') 
```

代码应该是不言自明的。通常我会尝试在我的`eventBindings()`. 我不断遇到的问题是通过`this`它将引用到`MyObj`事件处理程序中，以便我可以调用`this.showMenu()`.

为了克服这个障碍，我总是分配`this`给一个名为的变量，`that`所以当我进一步深入范围时，我有一个参考。但我觉得这不是最好的方法......有人可以提出更好的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:36:42.970

你正在做的是最好的方法。在 Javascript`this`中是动态范围的（绑定取决于堆栈，即调用函数的位置），所有其他变量 - 都是静态范围的（绑定取决于代码中变量的静态位置）。

而且由于 Javascript`this`以一种特殊的方式处理，因此也不要为以一种特殊的方式处理它而感到难过。

您可以将您现在正在做的事情封装在一个函数中——许多库都提供了这样的工具，它通常被称为“绑定”。但这不会改变真正发生的事情，只会隐藏它（并在执行此操作时消耗一些资源）。这样的函数可能看起来有点像：

```
function whatever (functionToProcess, thisToFreeze) { 
   return function() {
       functionToProcess.apply(thisToFreeze, arguments); // apply is built in
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T21:35:40.543

除了@Pointy 的评论，使用`Function.prototype.bind`：

```
 onClick: function(e){
        e.preventDefault();
        this.showMenu();
        //some other code
    },
    eventBindings : function(){
        this.$Target.on('click', '.anchor', this.onClick.bind(this));
    }, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T21:50:33.033

您可以将其作为事件数据传递：

```
this.$Target.on('click', '.anchor', {obj:this}, function(e){
    e.preventDefault();
    e.data.obj.showMenu();
    //some other code
}); 
```

或将其存储在元素上，但与像您一样在外部声明另一个变量并没有什么不同。

# ios - iCloud 键值存储的行为类似于 NSUserDefaults

> ID：15959143
> 
> 赞同：0
> 
> 时间：2013-04-11T21:25:51.573
> 
> 标签：ios, icloud, nsubiquitouskeyvaluestore

我没有使用模拟器。代码中的一切似乎都运行良好。我可以读写 NSUbiquitousKeyValueStore，它会在应用程序运行之间保留数据。

```
[[NSUbiquitousKeyValueStore defaultStore] synchronize] 
```

返回真。但是，更新永远不会到达其他设备，如果我从一台设备上删除应用程序并重新安装它，NSUbiquitousKeyValueStore 就会被清除干净。本质上，它的行为类似于 NSUserDefaults 的别名。我已设置权利，并且在配置门户中启用了 iCloud。我的目标设置已选中启用 iCloud 和键值存储，并将“使用带有标识符的存储”设置为我的应用程序包标识符。我在“Ubiquity Containers”中有一个条目，这也是我的捆绑包名称。有什么我想念的吗？配置？初始化步骤？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T22:08:41.553

您是否正在注册`NSUbiquitousKeyValueStoreDidChangeExternallyNotification`通知并处理`NSUbiquitousKeyValueStoreInitialSyncChange`此案？首次启动应用程序时，您写入的内容`NSUbiquitousKeyValueStore`可能会被撤消，因为与 iCloud 的“初始同步”尚未发生，在这种情况下，您将收到带有`NSUbiquitousKeyValueStoreChangeReasonKey`保存该值的参数的通知`NSUbiquitousKeyValueStoreInitialSyncChange`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T22:18:48.643

我的同事指出我必须在 iCloud 设置中启用文档和数据。这解决了问题。

# javascript - 用 javascript 替换换行符

> ID：15959147
> 
> 赞同：1
> 
> 时间：2013-04-11T21:26:04.513
> 
> 标签：javascript, jquery, internet-explorer-8

尝试在 HTML 中替换和呈现来自 DB 的文本中的换行符。值是用 java 输入的，所以值应该包含 '\n'。值显示在具有“toggleBreaks”类的跨度标记中。代码在 Firefox 和 Chrome 中运行良好，但在 IE8 上不行。我还没有尝试过其他 IE 版本，但遗憾的是我需要 IE8。

```
$('.toggleBreaks').each(function(index) {
    var orgText = $(this).html();
    var regex = /\r?\n/g;
    if (regex.test(orgText)) {
      var modText = orgText.replace(regex, "<br />");
      $(this).html(modText);
    }
}); 
```

我几乎能够通过应用样式“pre-wrap”来完成对页面中现有换行符的尊重，但这在 IE8 中也不起作用。

# c# - 如何将动态 css 类分配给位于 ListView 内的 HyperLink

> ID：15959148
> 
> 赞同：0
> 
> 时间：2013-04-11T21:26:06.227
> 
> 标签：c#, asp.net

有点混乱的标题。

这是我的旧导航

```
<li><a href="General.aspx" runat="server" id="currentGeneral"><i class="home"></i> Overview</a></li> 
```

i 类在导航选项卡旁边设置一个图标。

在 Site.Master.CS 上，我检查了当前页面是什么，并使用下面的代码将其设置为活动状态。

```
currentGeneral.Attributes["class"] = "active"; 
```

所以我将导航更改为由数据库填充的列表视图。

```
<asp:ListView ID="ListViewMenu" runat="server" ItemPlaceholderID="menuContainer">

<LayoutTemplate>
    <ul class="menu" id="responsive" runat="server">
        <asp:PlaceHolder ID="menuContainer" runat="server" />
    </ul>
</LayoutTemplate>

<ItemTemplate>
<li><a href='<%#Eval ("href") %>' class='<%#Eval ("id") %>'> <i class='<%#Eval ("class") %>'></i><%#Eval ("text") %></a></li>
</ItemTemplate>

</asp:ListView> 
```

但是现在我使用的是 listview，currentGeneral id 不存在，我无法将其设置为活动状态。

我试图思考让这个工作的最佳方法是什么。有人有建议吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:29:25.023

如果您想在`ListView`while 绑定中访问单个项目，您可能需要使用[ItemDataBound](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listview.itemdatabound.aspx)事件的不同方法。

请确保将 DataItem 转换为适当的对象。例如，[数据行视图](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridviewrow.dataitem.aspx)

```
<asp:ListView ID="ListViewMenu" runat="server" 
    OnItemDataBound="ListViewMenu_ItemDataBound"
    ItemPlaceholderID="menuContainer">
    <LayoutTemplate>
        <ul class="menu" id="responsive" runat="server">
            <asp:PlaceHolder ID="menuContainer" runat="server" />
        </ul>
    </LayoutTemplate>
    <ItemTemplate>
        <li>
            <asp:HyperLink runat="server" ID="HyperLink1" >
               <i class='<%#Eval ("class") %>'></i><%#Eval ("text") %>
            </asp:HyperLink>
        </li>
    </ItemTemplate>
</asp:ListView>

protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        PopulateMenu();
    }
}

protected void ListViewMenu_ItemDataBound(
    object sender, ListViewItemEventArgs e)
{
    if (e.Item.ItemType == ListViewItemType.DataItem)
    {
        var rowView = e.Item.DataItem as DataRowView;

        var hyperLink = e.Item.FindControl("HyperLink1") as HyperLink;
        hyperLink.NavigateUrl = rowView["href"].ToString();
        hyperLink.CssClass = rowView["menu"].ToString();

        if (Request.Path.ToLower().Contains(rowView["href"].ToString()))
            hyperLink.CssClass += " active";
    }
}
void PopulateMenu()
{
    DataAccess da = new DataAccess();
    da.AddParameter("ID", ID, DataAccess.SQLDataType.SQLInteger, 4);
    SiteMenu = da.runSPDataSet("Portal_MenuCreate");
    ListViewMenu.DataSource = SiteMenu;
    ListViewMenu.DataBind();
} 
```

# symfony - 防止删除实体

> ID：15959150
> 
> 赞同：0
> 
> 时间：2013-04-11T21:26:09.363
> 
> 标签：symfony, entity

我有一个与许多其他实体（例如产品或类别）相关的实体（例如图像）。我想知道如果关系存在于其他地方（例如，如果图像与产品相关，我不应该能够删除图像），这是防止删除实体的最佳方法。我的想法是在存储库类中搜索关系并返回结果，或者在实体的 preRemove 生命周期事件中做“某事”。防止删除相关实体的最佳 Symfony2 方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:57:52.400

只要不设置级联删除，任何定向实体都会阻止删除相关实体。如果您的关联不是双向的，您还必须从背面查询。

要扩展 CJ 的答案，您可以删除删除链接，但您还必须检查控制器中的实体，因为任何 url 黑客都可以删除一个对象，如果它的 id 是已知的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T04:29:36.133

我的建议是，当实体之间存在关系时，您最好禁用表单删除链接。通过这种方式，您甚至可以让客户了解存在相关实体，并且他不应该在删除关系之前将其删除。

在删除实体之前，您始终可以检查实体，并且当您在实体上实际调用 symfony 中的某个进程时，您实际上是在该特定实体的整个对象上工作，从而可以访问该实体的所有值。因此，您可以在该特定点检查它并做出条件陈述。

我个人认为，您不应该尝试为没有它们就可以实现的小事情导入多余的库函数。这将使您的代码更容易理解，甚至更轻松，因为包括额外的库很可能比您需要的更多

# joomla - Joomla 组件权限

> ID：15959152
> 
> 赞同：1
> 
> 时间：2013-04-11T21:26:12.483
> 
> 标签：joomla

在 Joomla 2.5 中，我安装了一个仅对管理员可用的**自定义组件。**我也想让这个组件对 Manager Group 可用。

有人可以告诉我我必须编辑什么文件吗？它是管理员/组件/name_here/ 中的[XML 文件吗？](http://docs.joomla.org/Developing_a_Model-View-Controller_Component/2.5/Adding_ACL)还是这比我想象的要复杂得多？

我希望我正在阅读正确的文件，这个 Joomla 系统是个疯子。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T00:11:02.493

它不仅仅是一个 XML 文件，您的组件需要检查用户拥有的权限。

自从Joomla！1.6 为前端和后端访问实现了广泛的访问控制（ACL）机制。您可以在每个组件的基础上定义无限数量的具有不同访问级别的组（这假定组件已正确编写）。使用初始设置创建的默认组可以删除或重命名，并且**可能不存在于所有安装**中，用户可以创建具有任何权限范围的任何名称的组。

我建议从[Access Control List/2.5/Tutorial](http://docs.joomla.org/ACL_Tutorial_for_Joomla_1.6)开始，这将使您更好地理解新的 ACL。

然后从“[开发模型-视图-控制器组件/2.5](http://docs.joomla.org/Developing_a_Model-View-Controller_Component/2.5) ”教程中，重新阅读“[添加 ACL](http://docs.joomla.org/Developing_a_Model-View-Controller_Component/2.5/Adding_ACL) ”一文，如果您需要自定义规则，您可能还需要阅读[将 ACL 规则添加到您的组件](http://docs.joomla.org/Adding_ACL_rules_to_your_component)一文。

# javascript - Jade / JavaScript - 访问传递给 Jade 的数据

> ID：15959155
> 
> 赞同：0
> 
> 时间：2013-04-11T21:26:24.823
> 
> 标签：javascript, pug

我正在向 Jade 模板传递一些数据，这些数据是 JSON 格式的，所以例如在这里我输出 Jade 模板中所有团队的名称：

```
p Teams:
  br
  -for(var i = 0; i < tournamentData.teams.length; i++) {
    text Team #{i+1}: #{teams[i].name}
    br
  -} 
```

这可以很好地打印所有团队的名称。我将如何访问 JavaScript 文件中的这些数据？在这里，我可以简单地键入`#{teams[0].name}`以获取团队名称为 0，但我将如何在 JavaScript 文件中执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T07:02:25.657

如果我正确理解你，你可以这样做：

JS文件：

```
function myFn(teams){
    // user teams here
    // for example:

    window.myTeam = teams[0];
} 
```

包括玉中的文件：

```
script(type="text/javascript", onload="myFn(#{JSON.stringify(tournamentData.teams)});", src="urlHere") 
```

**更新：**

```
function myFn(bracketData){
    $(function() { $('#tournamentBrackets').bracket({ init: bracketData }); });
} 
```

# c++ - 为什么程序会陷入无限循环

> ID：15959156
> 
> 赞同：0
> 
> 时间：2013-04-11T21:26:26.483
> 
> 标签：c++, destructor, infinite-loop

我有以下代码。它无限期地调用类的析构函数并崩溃。如果我将数组的大小更改为大于 0 的大小就可以了。

```
#include <iostream>

using namespace std;

class ClassA {

    public:
        ClassA() {

            cout << "constructor" << endl;
        }
        ~ClassA() {

            cout << "destructor" << endl;
        }
};

int main() {

    ClassA *ptr;

    cout << (void*) ptr << endl;

    ptr = new ClassA[0];

    cout << (void*) ptr << endl;

    delete[] ptr;

    cin.get();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T22:11:32.813

C++ 标准在 §8.3.4 中声明数组的声明形式为

> D1 [ 常量表达式 ] 属性说明符序列
> 
> ...如果常量表达式 (5.19) 存在，它应该是一个整数常量表达式，并且它的值应该大于零。

换句话说，它们的大小不能为 0。编译器允许您为[此处](http://gcc.gnu.org/onlinedocs/gcc/Zero-Length.html)概述的编程实践无论如何都这样做（可以说您不应该这样做）。

当你打破这样的规则时，接下来发生的任何事情都是*未定义*的行为——编译器可以做它想做的任何事情。这样做的原因是给编译器编写者一些他们如何编码编译器的余地，并且还允许一些优化。

# c# - 方法在执行期间将变量设置为实例，但在执行结束时将其设置回 null

> ID：15959169
> 
> 赞同：2
> 
> 时间：2013-04-11T21:27:02.040
> 
> 标签：c#

命名的方法`MoveToANewRoom(Room newRoom)`应该将一个变量设置为一个实例，并且它在方法的过程中这样做，但最后该变量被设置回空，没有明显的原因。

我在调试器中运行了代码，发现在方法执行期间命名的变量`currentRoom`已按预期设置。但是，当方法完成执行时，变量会再次设置回。`room1``MoveToANewRoom(Room newRoom)``currentRoom``null`

我错过了一些非常基本的东西吗？

这是我的代码：

```
public partial class Form1 : Form
    {
        Room currentRoom;
        public Form1()
        {
            InitializeComponent();
            Room room1 = new Room("Living Room");
            Room room2 = new Room("Dining Room");
            Room room3 = new Room("Kitchen");
            Room room4 = new Room("Front Yard");
            Room room5 = new Room("Back Yard");
            Room room6 = new Room("Garden");
            room1.Exits = new Room[] { room2, room3 };
            room2.Exits = new Room[] { room1, room4 };
            room3.Exits = new Room[] { room1, room4 };
            room4.Exits = new Room[] { room2, room3, room5, room6 };
            room5.Exits = new Room[] { room4 };
            room6.Exits = new Room[] { room4 };
            MoveToANewRoom(room1); 
        }
        public class Room
        {
            public string Name;
            public Room[] Exits;
            public Room(string name)
            {
                this.Name = name;
            }
        }
        public void MoveToANewRoom(Room newRoom)
        {
            Room currentRoom = newRoom;
            exits.Items.Clear();
            for (int i = 0; i < currentRoom.Exits.Length; i++)
            {
                exits.Items.Add(currentRoom.Exits[i].Name);
                exits.SelectedIndex = 0;
            }
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T21:29:04.970

`currentRoom`这是因为您正在定义一个特定于该方法的局部变量。

```
currentRoom = newRoom; 
```

是完成永久更改的正确语法。

编辑：

为了澄清为什么您的调试器向您显示错误信息：

它向您展示了您选择的上下文值。在这种情况下`currentRoom`，意味着内部有所不同，`MoveToANewRoom`因此它“有用地”为您更新了值。至于在这种情况下是否应该进一步澄清，已经引起了很多争论:)。

# java - 在 Play Framework 中将 api 添加到 URL 的根目录

> ID：15959171
> 
> 赞同：1
> 
> 时间：2013-04-11T21:27:07.283
> 
> 标签：java, api, playframework, playframework-2.0

我正在使用 Play Framework 创建一个 api，并且我想使用标准 url 作为 api - api.mysite.com。

但我似乎找不到将 api 添加到 URL 的方法。似乎播放框架只支持像 msite.com/api 这样的网址。

这是正确的还是有其他方法可以做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T09:52:54.710

一般来说，Play 2.0 不支持多域路由，因此您可能会遇到这样的情况：

1.  `API`为和构建两个单独的应用程序，`frontend`并使用一些 HTTP 服务器作为反向代理。
2.  构建一个应用程序，您可以同时调用它：但是对于 api 调用`domain.tld`，`api.domain.tld`您需要添加额外的路由，例如`api.domain.tld/api`在这种情况下，您还可以在控制器中进行比较，例如对 url 的请求`/api/get-item/123.json`是否在正确的域中完成并返回`badRequest()`，或者`redirect()`如果它不是。

# c++ - 指向成员函数怪异的指针

> ID：15959179
> 
> 赞同：1
> 
> 时间：2013-04-11T21:27:36.173
> 
> 标签：c++, visual-studio

我正在尝试对我的 C++ 代码进行一些绑定，并使用指向成员函数的指针。

我有以下代码：

```
class A
{
explicit A(float);
}
class B
{
void setA(A);
void setA(float);
} 
```

然后我声明指向成员函数的指针：

```
(void (B::*)(A))&B::setA
(void (B::*)(float))&B::setA 
```

编译器 (MSVC11) 发现第二行不明确。

如果我在 B 类中注释 setA(A)，编译器认为这两行都可以（！）

它是编译器错误吗？

有没有办法在不修改 B 类签名的情况下规避这种情况？

编辑 ：

实际上，我发布的代码是从我的真实类中过度简化的并且确实编译了..

这是一个真正重现该错误的修改版本：

```
class A
{
public:
    explicit A(float f=1.0f, float g=1.0f) {}
};
class B
{
public:
    void setA(A){}
    void setA(float f, float g=1.0f){}
}; 
```

和

```
(void (B::*)(A))&B::setA
(void (B::*)(float))&B::setA
(void (B::*)(float,float))&B::setA 
```

第二行带来编译错误：错误 C2440: 'type cast' :不可能将 'overloaded-function' 转换为 'void (__thiscall B::* )(float)'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:36:06.140

我会说这是一个错误。根据 C++11 标准的第 13.4/1 段：

> 使用不带参数的重载函数名称在某些上下文中被解析为函数、指向函数的指针或指向重载集中特定函数的**成员函数的指针。**[...]。**所选函数的类型与上下文所需的目标类型的函数类型*相同***。[...] 目标可以是
> 
> — 正在初始化的对象或引用（8.5、8.5.3），
> 
> — 作业的左侧（5.17），
> 
> — 函数的参数（5.2.2），
> 
> — 用户定义运算符 (13.5) 的参数，
> 
> — 函数、运算符函数或转换 (6.6.3) 的返回值，
> 
> —**显式类型转换**（5.2.3、5.2.9、5.4），或
> 
> — 非类型模板参数 (14.3.2)。

由于很清楚重载集中的哪个成员函数具有与您明确将其强制转换为相同的签名，因此您的代码是合法的。

此外，您的代码可以使用 Clang 3.2、GCC 4.7.2、GCC 4.8、ICC 13.0.1 和 (!) VC10 正常编译。例如，参见[这个活生生的例子](http://liveworkspace.org/code/3kW04t%24167)。

**编辑：**

您发布的新代码确实是非法的。

第二个强制转换无法解析，因为没有一个成员函数`setA()`只接受*一个*浮点参数。因此，编译器不知道您所说的表达式是哪个函数`&B::setA`。通常，它会尝试根据上下文显式转换来消除歧义，但这无济于事，因为它指定的签名与`setA()`.

如果您想知道为什么会出现这种情况以及为什么没有选择第二个重载，那么原因是带有默认参数的参数仍然是您的函数的形式参数（即使它可以在某些调用中省略），并且它的类型仍然算作函数签名的一部分。

另一方面，默认参数不是函数签名的一部分：

> **1.3.20 [defns.signature.member]**
> 
> **签名**
> 
> `<class member function>`名称、参数类型列表 (8.3.5)、函数所属的类、*cv* -qualifiers（如果有）和*ref-qualifier*（如果有）

现在，如果您删除重载`setA(A)`，编译器*确实*知道表达式`&B::setA`所指的成员函数，因为只有一个。无需使用显式强制转换来解析表达式。

然后，由于函数指针可以强制转换为其他类型的函数指针，编译器执行到指定目标类型的附加转换。

# c# - nunit 测试工作目录

> ID：15959184
> 
> 赞同：9
> 
> 时间：2013-04-11T21:28:06.020
> 
> 标签：c#, nunit

我有以下代码（sample1.evol - 附加到我的单元测试项目的文件）：

```
[Test]
public void LexicalTest1()
{
     var codePath = Path.GetFullPath(@"\EvolutionSamples\sample1.evol");
     //.....
} 
```

我发现测试执行的工作目录不是程序集目录：（在我的情况下代码路径变量分配给`d:\EvolutionSamples\sample1.evol`）。

那么，如何更改执行工作目录（没有硬代码）？加载附加到测试用例的任何文件的最佳实践是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T22:30:57.463

我将它用于需要访问数据文件的集成测试。

在需要运行测试的任何机器上，创建一个名为**TestDataDirectory**的系统环境变量，该变量指向您的测试数据所在的根目录。

然后有一个静态方法为您获取文件路径..

```
public static class TestHelper
{
    const string EnvironmentVariable = "TestDataDirectory";
    static string testDataDir = Environment.GetEnvironmentVariable(EnvironmentVariable);

    public static string GetTestFile(string partialPath)
    {
        return Path.Combine(testDataDir, partialPath);
    }
} 
```

...

```
[Test]
public void LexicalTest1()
{
    var codePath = TestHelper.GetTestFile(@"\EvolutionSamples\sample1.evol");
    //.....
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-31T17:25:58.230

我正在使用这段代码：

```
 var str = Path.GetDirectoryName(Assembly.GetExecutingAssembly().GetName().CodeBase);
   if (str.StartsWith(@"file:\")){
       str = str.Substring(6);
   } 
```

进入 str 变量的程序集目录。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-09-13T17:53:47.510

您可以使用以下来获取运行代码的程序集目录，例如

var AssemblyDirectory = TestContext.CurrentContext.TestDirectory

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-05T17:09:13.187

我们遇到了一个问题，即使用 ReSharper 和 NCrunch 运行的测试可以正常工作，但是当仅给出要使用的测试的相对文件路径时，本机 VS Test Runner 将无法找到文件。我通过创建一个将相对测试文件路径传递到其中的函数来解决它，它将为您提供绝对文件路径。

```
private static string _basePath = Path.GetDirectoryName(typeof(NameOfYourTestClassGoesHere).Assembly.Location);
private string GetAbsoluteTestFilePath(string relativePath) => Path.Combine(_basePath, relativePath); 
```

然后，您将像这样使用该函数：

```
var input = File.ReadAllLines(GetAbsoluteTestFilePath(@"TestData/YourTestDataFile.txt")); 
```

# css - css：如何左对齐内容的最后一行/行

> ID：15959193
> 
> 赞同：0
> 
> 时间：2013-04-11T21:28:35.887
> 
> 标签：css, alignment, center

我有内容居中的 div - 一个图像，但问题是最后一行也是居中的，它打破了“网格效果”

```
 <div class="wrapper">
    <div class="iB"></div>
    <div class="iB"></div>
    <div class="iB"></div>
    <div class="iB"></div>
    <div class="iB"></div>
    <div class="iB"></div>
    <div class="iB"></div>
    <div class="iB"></div>
    <div class="iB"></div>
    <div class="iB"></div>
    <div class="iB"></div>
    <div class="iB"></div>
    <div class="iB"></div>
    <div class="iB"></div>
    <div class="iB"></div>
    <div class="iB"></div>
    <div class="iB"></div>
    <div class="iB"></div>
    <div class="iB"></div>
    <div class="iB"></div>
    <div class="iB"></div>
    <div class="iB"></div>
    <div class="iB"></div>
    <div class="iB"></div>
    <div class="iB"></div>
</div>

.wrapper {
    width: 100%;
    background: red;
    text-align: center;
}

.iB {
    display:inline-block;
    width: 50px;
    height: 50px;
    background: green;
    padding: 2%;
} 
```

演示：http: [//jsfiddle.net/puz219/zaBux/](http://jsfiddle.net/puz219/zaBux/)

如何将最后一行/行左对齐？

谢谢你先进

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:32:10.927

它是由`text-align: center`. 上`.wrapper`。

CSS：

```
.wrapper {
    width: calc(100%-10px);
    background: red;
    padding: 5px;
}

.iB {
    display:inline-block;
    margin: 2px;
    width: 50px;
    height: 50px;
    background: green;
    padding: 2%;
} 
```

如果您需要它在 IE 中工作，请更改`calc(100%-10px)`为。`100%`演示：http: [//jsfiddle.net/zaBux/4/](http://jsfiddle.net/zaBux/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-28T20:19:27.053

实际上，您不能使用实际的 CSS 规范。

但是有一种 hacky 方式，适用于所有浏览器：

*   创建一个具有相同元素属性的新类，但高度为 0px
*   在包装器的底部添加很多，以“填充”该行

我更新了你的小提琴 : `http://jsfiddle.net/zaBux/9/`，它正在工作（也许你将不得不添加更多的 div 元素来覆盖大宽度的屏幕）

将来，您将只能使用 CSS，使用多个`:after`伪选择器 ( [http://www.w3.org/TR/css3-content/#inserting0](http://www.w3.org/TR/css3-content/#inserting0) )

W3C 指定了第一行选择器，但还没有指定最后一行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-28T21:31:25.463

您需要使用大量媒体查询才能使其正常工作。

我们在每个屏幕宽度处为包装器 div 应用一个宽度，该宽度可以容纳一个额外的框

现在我们有了一个设定的宽度，现在很容易将它居中`margin: 0 auto`

**[小提琴](http://jsfiddle.net/danield770/SdyeP/2/)**

## CSS

```
.wrapper {
    width: 100%;
    background: red;
    margin: 0 auto;
    overflow:hidden;
}

.iB {
    float:left;
    width: 50px;
    height: 50px;
    background: green;
    margin: 10px;
}
@media (max-width: 70px) { /* 70 = 50 + 10 + 10 (left and right margins) */
    .wrapper{
        width: 70px;
    }
}
@media (min-width: 140px) {
    .wrapper{
        width: 140px;
    }
}
@media (min-width: 210px) {
    .wrapper{
        width: 210px;
    }
}
etc etc. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T21:35:16.947

在你的 CSS 中试试这个

```
.iB:last-child{text-align:left} 
```

# database - 访问 SQL 查询响应非常慢

> ID：15959194
> 
> 赞同：1
> 
> 时间：2013-04-11T21:28:41.463
> 
> 标签：database, ms-access-2007

我正在使用带有 C# 的 MS ACCESS 2007，我正在尝试执行以下查询..

我的表有三列`Word`、`POS`和 ，`Freq`并且有唯一的记录。总记录数为“数百万条记录”。

此查询对我来说很好，并返回我想要的所有正确结果：

```
Select Word, POS, Freq from TName Where Word **IN** ( SELECT Word  from TName                        Group By Word Having Count(*) > 1 ) Order By Word; 
```

但是当我尝试以下类似的查询（在 EXE 中）时，系统会停止响应。

```
Select Word, POS, Freq from TName Where Word **NOT IN** ( SELECT Word  from TName                        Group By Word Having Count(*) > 1 ) Order By Word; 
```

*我还尝试了MS Access 查询面板*中的第二个 sql 命令，MS Access 停止响应，但返回结果非常缓慢。

请帮帮我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T21:34:28.333

由于您在 Access 中，因此您可以只使用 SELECT IN 自己的查询，然后只需使用普通的 JOIN。

查询`WordCounts`：

```
SELECT Word from TName Group By Word Having Count(*) > 1 
```

您的最终查询：

```
SELECT Word, POS, Freq from TName
INNER JOIN WordCounts ON TName.Word = WordCounts.Word 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T21:38:51.837

创建嵌套查询，如 QryWordsThatAppearMoreThanOnce SELECT Word from TName Group By Word Have Count(*) > 1

然后加入

```
Select n.Word, n.POS, n.Freq from TName n
inner join QryWordsThatAppearMoreThanOnce q On q.Word = n.Word
Order By n.Word 
```

另一个是

```
Select n.Word, n.POS, n.Freq from TName n
Left join QryWordsThatAppearMoreThanOnce q On q.Word = n.Word
and q.Word is null
Order By n.Word 
```

无论如何，类似的事情，一些访问怪异的可能性开始发挥作用。

# android-ndk - 不在 cocos2d-x 中使用 ./build_native.sh 和 android-ndk-r8 构建

> ID：15959198
> 
> 赞同：3
> 
> 时间：2013-04-11T21:28:53.697
> 
> 标签：android-ndk, cocos2d-x

我已经在 cocos2d-x 中下载了一个项目的源代码。

我正在使用**Hello World**`./build_native.sh`示例中的示例，它肯定可以工作。

 **编译时再次出现此错误：

```
Gdbserver      : [arm-linux-androideabi-4.6] libs/armeabi/gdbserver
Gdbsetup       : libs/armeabi/gdb.setup
Compile++ thumb  : cocos2d <= CCGrabber.cpp
jni/../../libs/cocos2dx/effects/CCGrabber.cpp: In constructor 'cocos2d::CCGrabber::CCGrabber()':
jni/../../libs/cocos2dx/effects/CCGrabber.cpp:46:32: error: 'glGenFramebuffersOES' was not declared in this scope
jni/../../libs/cocos2dx/effects/CCGrabber.cpp: In member function 'void cocos2d::CCGrabber::grab(cocos2d::CCTexture2D*)':
jni/../../libs/cocos2dx/effects/CCGrabber.cpp:61:47: error: 'glBindFramebufferOES' was not declared in this scope
jni/../../libs/cocos2dx/effects/CCGrabber.cpp:65:26: error: 'glFramebufferTexture2DOES' was not declared in this scope
jni/../../libs/cocos2dx/effects/CCGrabber.cpp:68:63: error: 'glCheckFramebufferStatusOES' was not declared in this scope
jni/../../libs/cocos2dx/effects/CCGrabber.cpp: In member function 'void cocos2d::CCGrabber::beforeRender(cocos2d::CCTexture2D*)':
jni/../../libs/cocos2dx/effects/CCGrabber.cpp:88:47: error: 'glBindFramebufferOES' was not declared in this scope
jni/../../libs/cocos2dx/effects/CCGrabber.cpp: In member function 'void cocos2d::CCGrabber::afterRender(cocos2d::CCTexture2D*)':
jni/../../libs/cocos2dx/effects/CCGrabber.cpp:113:50: error: 'glBindFramebufferOES' was not declared in this scope
jni/../../libs/cocos2dx/effects/CCGrabber.cpp: In destructor 'virtual cocos2d::CCGrabber::~CCGrabber()':
jni/../../libs/cocos2dx/effects/CCGrabber.cpp:127:35: error: 'glDeleteFramebuffersOES' was not declared in this scope 
```

我搜索并找到[了这个](http://blog.plicatibu.com/how-to-solve-problems-with-build_native-sh-and-android-ndk-r7-on-cocos2d-x/)解决方案。但这对我不起作用。我仍然遇到同样的错误。也许在 ndk-r8 中它是不同的，而解决方案是针对 ndk-r7 的。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T13:02:36.903

你的android sdk版本必须大于2.2。因为从2.2开始，android开始支持opengl es 2.0，而cocos2d-x 2.0使用opengles 2.0渲染**

# javascript - 为什么阻止 javascript 创建 iFrame？

> ID：15959206
> 
> 赞同：0
> 
> 时间：2013-04-11T21:29:20.357
> 
> 标签：javascript, html, iframe, doctype

我的网站使用 Javascript 来创建 iframe，我现在才意识到它几乎完成了，我从未为页面设置文档类型。

出于某种原因，无论我使用哪种 doctype，doctype 标签都会导致我的弹出 iframe 停止工作。

我不知道为什么会这样，但这可能与我的 javascript ( [http://www.dosed.co.uk/assets/script.js](http://www.dosed.co.uk/assets/script.js) ) 有关。

该页面（尚未完成）在这里： http: [//www.dosed.co.uk](http://www.dosed.co.uk)

对不起，我不能更具体地说明这个问题！它在没有`<!DOCTYPE>`但没有它的情况下可以正常工作！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T17:23:31.947

如果没有 Doctype，浏览器会模仿旧浏览器的错误。这些错误包括错误功能，例如当分配给接受长度的 CSS 属性（例如`ifrm.style.width=x+20;`）时，将数字视为具有像素单位的长度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T17:21:55.043

`<!doctype html>`，对于 HTML5，不会导致`<iframe>`s 出现问题。`<iframe>`在 HTML5 规范中：[http](http://www.w3.org/TR/html5/embedded-content-0.html#the-iframe-element)

://www.w3.org/TR/html5/embedded-content-0.html#the-if​​rame-element 指定no 时`doctype`，浏览器假定页面非常旧，并且不会不能作为 HTML5 工作。

# wordpress - WordPress Loop 和 Single 发布相同的模板文件

> ID：15959210
> 
> 赞同：0
> 
> 时间：2013-04-11T21:29:28.023
> 
> 标签：wordpress

是否可以在同一个模板中包含循环和单个帖子。基本上，我的客户希望在循环中单击链接以显示单个帖子时进行转换。

我还没有遇到任何方法可以做到这一点，所以我猜不是。

# java - 在 Spring Data MongoDB 中使用 JSON 文本文档的目的是什么？

> ID：15959213
> 
> 赞同：0
> 
> 时间：2013-04-11T21:29:33.353
> 
> 标签：java, spring, mongodb, spring-data-mongodb

我正在学习如何在 java 应用程序中将 MongoDB 与 Spring Data 一起使用，但我正在尝试确定声明文档模式的最佳方式。

该应用程序将成为一个接受 JSON 并返回 JSON 的宁静 Web 服务，我的 Java 模型显然将确定这些 JSON 的属性。似乎 Java 模型可以确定 MongoDB 文档的“模式”（只需使用用户参数化存储库）。

但是，有些事情我有点困惑。[Spring Data MongoDB 文档](http://static.springsource.org/spring-data/data-mongodb/docs/current/reference/html/repositories.html)在“4.5.3 Repository populators”下提到，您可以使用 JSON 文本文档“定义要填充的存储库的数据”，但我不明白这样做有什么好处。当您使用 Java 模型类参数化存储库时，这对您有何帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T06:22:57.753

该功能主要用于预填充数据库。您可能需要预先填充以进行测试、初始化等。

无需编写 java 代码来填充数据库，您只需将数据保存在 JSON 格式文件中即可。这些文件易于编辑和维护。

# iphone - 我可以采取哪些步骤将 xcode 生成的 ipa 文件放到测试 ios 设备上？

> ID：15959214
> 
> 赞同：0
> 
> 时间：2013-04-11T21:29:34.750
> 
> 标签：iphone, xcode

我希望有保证的步骤来让它发挥作用。自从我 6 个月前开始做这项工作以来，我已经多次在这项任务上大发雷霆，而来自 itunes 和组织者的反馈是不存在的。

我有完全访问权限，我可以进入苹果开发中心并做任何必要的事情，我现在知道我在 xcode 周围的方式。目前，当我连接我的 iPhone 并单击 iphone [在管理器左侧] 下的应用程序时，添加和删除按钮被禁用，我无法单击并将 ipa 文件拖入其中。

如果我打开 iTunes 并单击并将我的应用程序拖动到我的 macbook 的应用程序区域中，它可以工作并覆盖当前应用程序，但是当我尝试单击更新，然后同步时，它成功同步，但仍然有按钮显示“更新”而不是“安装”，当我查看手机时，它显示“安装失败”或其他一些可笑的通用消息。

我也尝试创建一个新的配置文件，但是当我使用管理器中的添加按钮尝试将其添加到我的 iPhone 时，它​​会接受该文件，但不会在列表中拍摄 i。我单击并拖动它，它是同样的事情，没有错误，它看起来会接受它，但它没有出现在列表中。所以我似乎无法尝试添加新的个人资料。

顺便说一句，该设备在设备列表中并且具有有效的配置文件[并且配置文件在设备列表中有设备（并且 UDID 匹配）]。

我正在寻找一些可靠的步骤来确保将应用程序安装在手机上而不会出现这些问题。

Xcode：4.5.1 iphone：6.1.3

您可以提供的任何帮助将不胜感激。老实说，我已经准备好辞掉工作了，因为这个软件给我带来的压力，这太荒谬了。

（我的挫败感：我遇到了通过重新启动 xcode 解决的编译错误，我不得不重新启动计算机来解决配置文件问题，而且我不得不刷新所有内容以部署到应用商店的次数太多了。 .. 我这辈子从来没有处理过如此糟糕的软件和工具链 [而且我使用过 Windows 和 VS！]）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T03:25:48.693

按照步骤：

1 - 为您的应用程序创建配置文件分发（不要忘记添加设备，女巫会对此进行测试。这非常重要，因为如果您不添加，他们将没有安装应用程序的许可。）。创建下载后双击它。暂时不要删除，以后需要上传。

2 - 转到您的项目，构建/目标/构建设置/代码签名并设置您创建的配置文件。

3 - 构建项目。如果没问题，点击产品，存档

4 - 单击分发、保存以供企业或临时部署。保存您的 .ipa

5 - 转到[TestFlight](http://testflightapp.com)创建应用程序并上传构建。

6 - 转到应用程序构建并单击您的应用程序。

7 - 转到权限并上传配置文件！！现在您可以在此列表中选择您想要通知谁来下载应用程序！

8 - （可选）转到人员并创建/管理您的团队，并给予正确的优先级。

您应该实现要管理会话的 SDK 案例。它非常简单，只需按照教程[文档](https://testflightapp.com/sdk/doc/1.2.4/)和 sdk [iOS SDK 下载](https://testflightapp.com/sdk/download/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T21:36:10.750

查看 TestFlight - [http://testflightapp.com](http://testflightapp.com)

他们提供了有关如何分发临时版本的分步说明。它很容易设置。

设置您的配置文件，构建/归档您的应用程序，然后通过 TestFlight 分发它。

请参阅[http://help.testflightapp.com/](http://help.testflightapp.com/)获取帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-05T11:04:41.713

按照以下步骤在不使用 testflight 的情况下安装 .ipa 文件

1.  提取包含文件 .ipa 和 .mobileprovision 的文件夹。
2.  打开 iTunes 并连接您的设备。
3.  将 .mobileprovision 拖放到 iTunes 的 Library->Apps 组部分。
4.  使用 .ipa 重复上述步骤。

    同步您的设备并完成。

# css - 将鼠标悬停在一组 HTML 图形上时如何阻止它们移动

> ID：15959215
> 
> 赞同：1
> 
> 时间：2013-04-11T21:29:35.150
> 
> 标签：css, html

我在空闲时间做一些事情，一个我玩的游戏的小选择工具，Dota2。

我已将当前情况的整个 HTML 输出倒入小提琴中：http: [//jsfiddle.net/a8T6L/](http://jsfiddle.net/a8T6L/)

这有一个复选框列表和一个项目列表。这些是数字，全部设置为`display: table`。这个想法是，当我单击一个或多个复选框时，只有拥有选定属性的项目才会保持显示。该功能尚未完成，因此如果您单击复选框，所有内容都会消失。只需取消选中所有内容即可使其再次出现。

每个项目都是一个`<figure>`with 和`<img>`and `<figcaption>`。在本地，我正在使用一些 PHP 生成整个集合，我只是复制了 HTML/CSS/JavaScript，这样我就可以制作小提琴了。

当您将鼠标悬停在一个项目上时，我试图添加一个边框，但在某些情况下这会移动项目。

相关的 CSS 代码可以在第 438 行的小提琴中找到：

```
figure {
    text-align: center;
    display: table;
    width: 120px;
    height: 90px;
    padding: 15px auto; /* not needed unless you want centered */
    margin-top: 5px;
}

figure:hover {
    cursor: hand;
    cursor: pointer;/*Should be good with all browsers*/

    border-style: inset;
    border-color: #000;
    border-width: 1px;
} 
```

我尝试过使用边距和填充（其中一些留在代码中），即使使用边框折叠，但似乎没有任何效果。我在这里想要实现的是，当我将鼠标悬停在图形上时，会出现一个插图，让用户知道哪个项目被突出显示，甚至没有任何移动像素。刚刚出现的插图。

我意识到我可以这样做`background-color`，如果我的意图只是让用户知道悬停在哪个项目上，但我不知道这个问题的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T21:34:10.723

发生这种情况的原因是当您悬停时它会在图像周围添加像素。您应该使用 a 设置初始类，`border: 1px solid transparent;`以便在悬停时不会添加像素，而只是更改边框颜色。

```
 figure {
        text-align: center;
        display: table;
        width: 120px;
        height: 90px;
        padding: 15px auto; /* not needed unless you want centered */
        margin-top: 5px;
        border: 1px solid transparent;
    }

    figure:hover {
        cursor: hand;
        cursor: pointer;/*Should be good with all browsers*/
        border-color: #000;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T21:39:14.437

Mathew 的原因是（+1）另一种方法是使用`outline`而不是边框​​：

```
figure:hover {
  cursor: hand;
  cursor: pointer;/*Should be good with all browsers*/   
  outline-style: inset;
  outline-color: #000;
  outline-width: 1px;
} 
```

如果您正在费心支持这种老旧的东西，这应该具有在不支持透明边框（即 IE6）的浏览器上工作的额外好处。不利的一面是轮廓将在元素之外计算，因此如果您将这些元素放在页面的一侧，您可能会丢失部分边框。

# ios6 - 旋转CGPoints；CIVector CGAffineTransform？

> ID：15959216
> 
> 赞同：0
> 
> 时间：2013-04-11T21:29:39.337
> 
> 标签：ios6, cgpoint, ciimage

我有 4 个 CGPoints 形成一个不规则的图形。如何将该图形旋转 90 度并获得新的 CGPoints？

FWIW，当图形是 CGRect 通过交换 origin.x 和 origin.y 以及宽度和高度时，我能够“伪造”这个。我是否需要做类似的事情（计算点之间的距离/方向）或者是否有可以应用于 CIVector 的 AffineTransform？

欢迎提示和/或指向教程/指南。

**可跳过的项目背景：**

*用户将为文档拍照，应用程序将对它们进行 OCR。由于用户很难获得不倾斜的图像，我允许他们围绕文本主体创建一个 4 点图形，然后应用程序将其倾斜回矩形。传入的相机图像是 CIImages，因此它们的原点已经在左下角，因此必须从 UIView 旋转 4 点图形以匹配...*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T01:52:50.797

作为记录，我使用 CGAffineTransforms 旋转点：

```
CGAffineTransform t1 = CGAffineTransformMakeTranslation(0, cropView.frame.size.height);
CGAffineTransform s = CGAffineTransformMakeScale(1, -1);
CGAffineTransform r = CGAffineTransformMakeRotation(90 * M_PI/180);
CGAffineTransform t2 = CGAffineTransformMakeTranslation(0, -cropView.frame.size.height);

CGPoint a = CGPointMake(70, 23);
a = CGPointApplyAffineTransform(a, t1);
a = CGPointApplyAffineTransform(a, s);
a = CGPointApplyAffineTransform(a, r);
a = CGPointApplyAffineTransform(a, t2); 
```

＆C。对于其他点。

# excel - Excel 2003 vba 图表失败

> ID：15959218
> 
> 赞同：1
> 
> 时间：2013-04-11T21:29:49.187
> 
> 标签：excel, vba, charts, excel-2003

所以我得到一个图表失败错误，似乎是因为我的名字 WBname 但我无法弄清楚。早些时候有一个类似的问题，但由于这有点不同，我想我会提出一个新问题。这是我遇到问题的代码：

```
Dim WBname As String
WBname = Replace(ActiveWorkbook.Name, ".xls", "")
Worksheets(WBname).Activate
Charts.Add
ActiveChart.ChartType = xlXYScatterSmoothNoMarkers
ActiveChart.SeriesCollection(1).XValues = Worksheets(WBname).Range("A4:A5000")
ActiveChart.SeriesCollection(1).Values = Worksheets(WBname).Range("B4:B5000")
ActiveChart.SeriesCollection(1).Name = Worksheets(WBname).Range("B3")
ActiveChart.SeriesCollection.NewSeries
ActiveChart.SeriesCollection(2).XValues = Worksheets(WBname).Range("A4:A5000")
ActiveChart.SeriesCollection(2).Values = Worksheets(WBname).Range("C4:C5000")
ActiveChart.SeriesCollection(2).Name = Worksheets(WBname).Range("C3")
ActiveChart.SeriesCollection.NewSeries
ActiveChart.SeriesCollection(3).XValues = Worksheets(WBname).Range("A4:A5000")
ActiveChart.SeriesCollection(3).Values = Worksheets(WBname).Range("D4:D5000")
ActiveChart.SeriesCollection(3).Name = Worksheets(WBname).Range("D3")
ActiveChart.SeriesCollection.NewSeries
ActiveChart.SeriesCollection(4).XValues = Worksheets(WBname).Range("A4:A5000")
ActiveChart.SeriesCollection(4).Values = Worksheets(WBname).Range("I4:I5000")
ActiveChart.SeriesCollection(4).Name = Worksheets(WBname).Range("I3") 
```

WBname 就像我想要的那样出来，但我仍然遇到错误。

```
Method 'SeriesCollection' of object '_Chart' Failed 
```

工作表名称是动态变化的，并且与 WBname FYI 匹配。

编辑：我补充说

```
ActiveChart.SetSourceData Source:=Sheets(WBname).Range("A4:A5000") 
```

它似乎工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:58:02.357

您收到该错误是因为您试图将值分配给不存在的系列；）

您需要先添加系列，然后为其分配值。看这个例子

```
Sub Sample()
    Dim WBname As String
    WBname = Replace(ActiveWorkbook.Name, ".xls", "")
    Worksheets(WBname).Activate

    Charts.Add
    ActiveChart.ChartType = xlXYScatterSmoothNoMarkers

    ActiveChart.SeriesCollection.NewSeries '<~~~~~ SEE THIS

    ActiveChart.SeriesCollection(1).XValues = Worksheets(WBname).Range("A4:A5000")
    ActiveChart.SeriesCollection(1).Values = Worksheets(WBname).Range("B4:B5000")
    ActiveChart.SeriesCollection(1).Name = Worksheets(WBname).Range("B3")
End Sub 
```

**跟进**

您将获得额外的系列`sometimes`，因为您的光标位于数据中，例如在单元格`B5`或`I10`其他单元格中。`Charts.Add`当您在这种情况下说时，Excel 默认会添加系列。确保在运行宏时未选择任何数据。另一种方法是在`Charts.Add`. 看这个例子

```
Sub Sample()
    Dim WBname As String
    Dim i As Long

    WBname = Replace(ActiveWorkbook.Name, ".xls", "")
    Worksheets(WBname).Activate
    Charts.Add

    With ActiveChart
        On Error Resume Next
        For i = .SeriesCollection.Count To 1 Step -1
            .SeriesCollection(i).Delete
        Next i
        On Error GoTo 0

        .ChartType = xlXYScatterSmoothNoMarkers

        .SeriesCollection.NewSeries
        .SeriesCollection(1).XValues = Worksheets(WBname).Range("A4:A5000")
        .SeriesCollection(1).Values = Worksheets(WBname).Range("B4:B5000")
        .SeriesCollection(1).Name = Worksheets(WBname).Range("B3")

        .SeriesCollection.NewSeries
        .SeriesCollection(2).XValues = Worksheets(WBname).Range("A4:A5000")
        .SeriesCollection(2).Values = Worksheets(WBname).Range("C4:C5000")
        .SeriesCollection(2).Name = Worksheets(WBname).Range("C3")

        .SeriesCollection.NewSeries
        .SeriesCollection(3).XValues = Worksheets(WBname).Range("A4:A5000")
        .SeriesCollection(3).Values = Worksheets(WBname).Range("D4:D5000")
        .SeriesCollection(3).Name = Worksheets(WBname).Range("D3")

        .SeriesCollection.NewSeries
        .SeriesCollection(4).XValues = Worksheets(WBname).Range("A4:A5000")
        .SeriesCollection(4).Values = Worksheets(WBname).Range("I4:I5000")
        .SeriesCollection(4).Name = Worksheets(WBname).Range("I3")
    End With
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T21:37:27.333

你没有告诉你要处理什么工作表。（假设确实需要 Workbook，但大多数情况下并非如此）：

```
Workbooks(WBname).Sheets("Sheet1").Range("A4:A5000") 
```

应该工作得更好。

（在这种情况下，只需使用宏记录器来获得正确的方法并在之后根据您的需要进行调整）

# iphone - 通过 Jenkins shell 脚本更改 Xcode 的代码

> ID：15959220
> 
> 赞同：1
> 
> 时间：2013-04-11T21:29:59.057
> 
> 标签：iphone, ios, xcode, build, jenkins

我正在开发一个 iPhone 应用程序，它有一个加载 url 的 UIWebview。当我对代码进行更改时，我将其提交到 Github，然后每晚 Jenkins 都会进行构建并将其部署到服务器上。

我的问题是，我想通过 Jenkins shell 脚本更改 UIWebview 的 url。所以它应该使用开发 url 和生产 url 进行构建。我想我必须创建两个不同的工作，但是我如何告诉 Jenkins 工作它应该为哪个 url 构建。

感谢你的帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:09:38.863

一种想法是在编译步骤中使用命令行定义，`-DmyURL='@"$(MYURL)"'`然后使用参数化构建，该构建将 URL 作为构建时参数，然后从那里设置该环境变量（这是参数化构建的用途）。

然后，在您的代码中，引用定义中的 URL。

```
#ifndef myURL
    #define myURL @"http://dev.foo.com"
#endif 
```

然后，您只需使用 myURL 代替常量。

另一种方法是在编译步骤中定义一个简单的值，该值将是一个布尔值，然后您可以将两个 URL 放入代码中，但第一个解决方案将允许在编译时动态确定 URL。

要使用布尔风格的机制，只需`-DUSE_PROD_URL=$(USE_PROD)`在代码中设置，然后：

```
#if USE_PROD_URL
    URL=@"http://prod.url.com"
#else
    URL=@"http://dev.uel.com"
#endif 
```

# php - phonegap/cordova 贝宝集成

> ID：15959221
> 
> 赞同：2
> 
> 时间：2013-04-11T21:30:00.437
> 
> 标签：php, javascript, cordova, paypal

我正在尝试在我的 Phonegap 应用程序中集成 PayPal 付款。我看不到跨平台的方法。

我只能看到无法在 Phonegap 构建中使用的操作系统特定插件。有没有办法使用 childbrowser 集成它？另外，我找不到黑莓的插件。

注意：我使用 Phonegap 构建，所以我更喜欢无插件的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T08:42:18.270

你可以做的是应用程序内的浏览器连接到一个在线的 php 驱动页面，并在那里做你的贝宝的东西。

[http://docs.phonegap.com/en/2.3.0/cordova_inappbrowser_inappbrowser.md.html](http://docs.phonegap.com/en/2.3.0/cordova_inappbrowser_inappbrowser.md.html)

```
function onDeviceReady() {
     var ref = window.open('http://apache.org', '_blank', 'location=yes');
     ref.addEventListener('loadstart', function() { alert('start: ' + event.url); });
     ref.addEventListener('loadstop', function() { alert('stop: ' + event.url); });
     ref.addEventListener('exit', function() { alert(event.type); });
} 
```

请记住将您将在 phonegap 中使用的 url 列入白名单，否则您将无法建立连接。

在 php 端编写自己的 restfull api 来处理付款尝试尽量减少发送到 api 和从 api 发送的数据，如果可能的话也尝试使用安全连接。

贝宝示例可以在这里找到： [https ://www.x.com/developers/paypal/documentation-tools/paypal-code-samples](https://www.x.com/developers/paypal/documentation-tools/paypal-code-samples)

它是一个解决方案，但我建议为每个平台使用插件，使用这些插件可以更好地保证安全性、更少的错误和更少的开发时间。

# jquery - onClick 循环遍历具有相同类的 DIV

> ID：15959222
> 
> 赞同：3
> 
> 时间：2013-04-11T21:30:11.597
> 
> 标签：jquery

我正在尝试创建一个脚本来循环遍历具有相同类名的 DIV（一次一个）。`.nextAll()`所有这些有趣的东西对我来说完全陌生。我怎样才能让它发挥作用？

这是它应该如何工作的。当您单击右侧的浅灰色框时，它应该显示下一个`.hint`及其`hint-description`. 一次只显示一个提示。这应该是一个无限循环。意思是，在第三次提示之后，它应该再次从顶部开始。希望jsfiddle有意义。如果没有，请告诉我！

[http://jsfiddle.net/DzD5W/1/](http://jsfiddle.net/DzD5W/1/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T21:39:44.940

这是一种方法：

```
(function(){

    var $hints = $('.hint');
    var $hintDescriptions = $('.hint-description');
    var i = 0;

    $('.next-hint').on('click', function(){
        i = (i + 1) % $hints.length;
        $hints.hide().eq(i).show();
        $hintDescriptions.hide().eq(i).show();
    });

})(); 
```

[更新了 JSFiddle](http://jsfiddle.net/DzD5W/3/)

# javascript - 使用复选框根据图像更新总行

> ID：15959226
> 
> 赞同：0
> 
> 时间：2013-04-11T21:30:17.807
> 
> 标签：javascript, jquery, image, checkbox, html-table

我正在编写代码，该代码根据何时根据该行中的图像是否为正确图像来检查复选框来更新总行。这是HTML：

```
 <table border="1">
    <tr> <!-- Table Header -->
        <td>
            Checkbox
        </td>
        <td>
            Items
        </td>
        <td>
            Area 1
        </td>
        <td>
            Area 2
        </td>
        <td>
            Area 3
        </td>
    </tr>

    <tr id="checkRow"> <!-- Row 1 -->
        <td>
            <form>
                <input type="checkbox" name="Row1" value="Row1"  onchange="onCheck(this);">
            </form>     
        </td>
        <td>
            Item 1
        </td>
        <td class="imageBox">
            <img  id="image1" src="yes.png" alt="Needed">
        </td>
        <td class="imageBox">
            <img id="image2" src="yes.png" alt="Needed">
        </td>
        <td class="imageBox">
            <img  id="image3" src="no.png" alt="Needed">
        </td>   
    </tr>
    <tr> <!-- Row 2 -->
        <td>
            <form>
                <input type="checkbox" name="Row2" value="Row2"  onchange="onCheck(this);">
            </form>     
        </td>
        <td>
            Item 2
        </td>
        <td class="imageBox">
            <img  src="yes.png" alt="Needed">
        </td>
        <td class="imageBox">
            <img  src="yes.png" alt="Needed">
        </td>
        <td class="imageBox">
            <img   src="no.png" alt="Needed">
        </td>   
    </tr>
    <tr> <!-- Row 3 -->
        <td>
            <form>
                <input type="checkbox" name="Row3" value="Row3"  onchange="onCheck(this);">
            </form>     
        </td>
        <td>
            Item 3
        </td>
        <td class="imageBox">
            <img   src="yes.png" alt="Needed">
        </td>
        <td class="imageBox">
            <img  src="yes.png" alt="Needed">
        </td>
        <td class="imageBox">
            <img  src="yes.png" alt="Needed">
        </td>   
    </tr>
    <tr> <!-- Row 4 -->
        <td>
            <form>
                <input type="checkbox" name="Row4" value="Row4"  onchange="onCheck(this);">
            </form>     
        </td>
        <td>
            Item 4
        </td>
        <td class="imageBox">
            <img  src="yes.png" alt="Needed">
        </td>
        <td class="imageBox">
            <img  src="yes.png" alt="Needed">
        </td>
        <td class="imageBox">
            <img  src="no.png" alt="Needed">
        </td>   
    </tr>
    <tr id="outputRow"> <!-- Table Bottom -->
        <td>
            <!--Empty-->
        </td>
        <td>
            Summation
        </td>
        <td id="total1">
            0
        </td >
        <td id="total2">
            0
        </td>
        <td id= "total3">
            0
        </td>
    </tr>
</table> 
```

这是Javascript（使用jQuery）

```
//Numbers in the total row (Summation)
var total1=0;
var total2=0;
var total3=0;

function onCheck(cb)
     {
         var $box = $(cb);
         var imageBoxes = $box.parents('td.imageBox');
         if(cb.checked===true)
        {

            //Checks the image in the row. If it is yes.png, it adds 1 to to the total
            //for that column and displays that total variable in the total row. 

            /*if(document.getElementById('image1').src.toString().indexOf('yes')>0){
                total1++;
                document.getElementById('total1').innerHTML=total1;

            } */
            if(imageBoxes[0].children().attr('src').toString().indexOf('yes')>0){
                total1++;
                document.getElementById('total1').innerHTML=total1;

            }
            /*else
            {
                document.getElementById('total1').innerHTML=no;
            } */

            if(document.getElementById('image2').src.toString().indexOf('yes')>0){
                total2++;
                document.getElementById('total2').innerHTML=total2;

            } 
           /* else
            {
                document.getElementById('total2').innerHTML=no;
            } */

            if(document.getElementById('image3').src.toString().indexOf('yes')>0){
                total3++;
                document.getElementById('total3').innerHTML=total3;

            } 
            /*else
            {
                document.getElementById('total3').innerHTML=no;
            }  */
        }
         //If the checkbox is unchecked, this checks for
         //if the image in each box in that row is
         //yes.png. If it is, then 1 is subtracted from the
         //column's total and the new total is shown.
         else
         {
             if(document.getElementById('image1').src.toString().indexOf('yes')>0){
                total1--;
                 document.getElementById('total1').innerHTML=total1;
            } 

            if(document.getElementById('image2').src.toString().indexOf('yes')>0){
                total2--;
                document.getElementById('total2').innerHTML=total2;
            } 

            if(document.getElementById('image3').src.toString().indexOf('yes')>0){
                total3--;
                document.getElementById('total3').innerHTML=total3; 
            } 

         }
    } 
```

我在 Fiddle 中构建了它，所以没有显示所有脚本导入。

编辑：这里是小提琴的链接：hhttp://jsfiddle.net/GGxpX/62/ 编辑：有人指出我的身份证在重复。我在新的小提琴中解决了这个问题，但这并没有解决问题。EDIT3：修复了更多问题，包括使用 td 元素作为其图像子元素。该链接现在指向更新的 Fiddle。EDIT4：再次更新了小提琴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T22:24:37.053

如果我理解你想要什么，我认为你让这变得比它需要的更复杂。（如果我错了，请纠正我。）我会让复选框的处理程序每​​次都重新计算总数。

JavaScript 可以这么短：

```
function onCheck() {
    var totals = [0, 0, 0];
    $('tr.checkRow').each(function () {
        var $row = $(this);
        if ($row.children('td:first').find('input:checkbox').prop('checked')) {
            $(this).find('td.imageBox').each(function (index) {
                var $imageBox = $(this);
                if ($imageBox.children('img:first').attr('src').indexOf('yes') >= 0) {
                    ++(totals[index]);
                }
            });
        }
    });

    $('#total1').text(totals[0]);
    $('#total2').text(totals[1]);
    $('#total3').text(totals[2]);
} 
```

请注意该`onCheck()`函数甚至不带参数。那是因为更改了哪个复选框，或者它是选中还是未选中都无关紧要。

这会遍历每一行，如果选中了它的复选框，它会遍历每个图像框。

为了使上面的代码工作，您必须将类“checkRow”放在正确的`<tr>`元素上。（您以前将它作为这些元素的“id”。）

[**jsfiddle**](http://jsfiddle.net/john_s/GGxpX/56/)

我发现您的代码有几处错误。这里有几个：

1.  “id”属性必须是唯一的。
2.  检查调用结果时`.indexOf()`使用`>= 0`，不是`> 0`。
3.  `imageBoxes[0]`返回一个 DOM 元素，而不是 jQuery 对象。
4.  不需要调用，`toString()`因为该`src`属性是一个字符串。

您还可以使用 jQuery 附加您的事件处理程序，而不是使用“onchange”属性，但我把它留在了 jsfiddle 中。

# python - 动态添加装饰器到类

> ID：15959232
> 
> 赞同：8
> 
> 时间：2013-04-11T21:30:43.590
> 
> 标签：python, pyqt, pyqt4, decorator, python-decorators

我有一个相当大且涉及的[装饰器来调试](https://gist.github.com/durden/5367247)我想动态添加到类中的 PyQt 信号。有没有办法动态地将装饰器添加到类中？

我可能从错误的角度来处理这个问题，所以这就是我想要完成的。

## 目标

1.  我有一个装饰器，它将发现/附加到类中的所有 pyqt 信号并在发出这些信号时打印调试。
2.  这个装饰器非常适合调试单个类的信号。但是，有时我想将我的所有信号附加到应用程序中。这可用于查看我是否在意外时间发出信号等。
3.  我想动态地将这个装饰器附加到我所有有信号的类上。

## 可能的解决方案/想法

到目前为止，我已经考虑了一些可能的解决方案：

1.  继承：如果我所有的类都具有相同的基类（除了 Python 的 built-in`object`和 PyQt 的 built-in `QtCore.QObject`），这将很容易。我想我可以把这个装饰器附加到我的基类上，一切都会按预期进行。但是，在此特定应用程序中并非如此。我也不想将我所有的类都更改为具有相同的基类。
2.  Monkey-patch Python`object`或`QtCore.QObject`：我不知道这将如何实际工作。但是，理论上我可以将这些基类之一更改`__init__`为`new_init`我在装饰器中定义的吗？这似乎真的很危险和hackish，但也许这是一个*好*方法？
3.  元类：我认为元类在这种情况下不会起作用，因为我必须动态地将`__metaclass__`属性添加到我想将装饰器注入到的类中。我认为这是不可能的，因为要插入此属性，必须已经构造了该类。因此，我定义的任何元类都不会被调用。这是真的？

我尝试了一些元类魔法的变体，但似乎没有任何效果。我觉得使用元类可能是实现我想要的一种方式，但我似乎无法让它发挥作用。

再说一次，我可能做错了。本质上，我想将上面引用的装饰器中的行为附加到我的应用程序中的所有类（甚至可能是选择类的列表）。此外，如有必要，我可以重构我的装饰器。我真的不在乎我是否将此行为与装饰器或其他机制相结合。我只是假设这个装饰器已经完成了我对单个类的要求，所以它可能很容易扩展。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T21:33:41.627

装饰器只不过是自动应用的可调用对象。要手动应用它，请将类替换为装饰器的返回值：

```
import somemodule

somemodule.someclass = debug_signals(somemodule.someclass) 
```

这会将名称替换为我们传递给原始类`somemodule.someclass`的返回值。`debug_signals``somemodule.someclass`

# php - 从表单访问动态变量

> ID：15959236
> 
> 赞同：0
> 
> 时间：2013-04-11T21:31:07.880
> 
> 标签：php, mysql, variables, dynamic

我曾经`register_globals`转过身`ON`（我知道 - 坏坏坏坏坏坏），现在我正在改变它，具体的应用程序是我的 DVD 收藏。添加 DVD 会显示一组类型/类别（即戏剧、喜剧等）的复选框。每个流派都来自数据库表，因此我可以根据需要添加新流派。这里的问题是它从这个**db**表中的缩写生成它的字段名（复选框名称）。

IE 我将拥有：

```
<input type="checkbox" name="drama" />Drama
<input type="checkbox" name="bio" />Biography
(etc) 
```

所以我之前所做的是，使用制作条目的脚本，它将遍历缩写名称列表，如果它与 input 匹配`($_POST['drama'])`，则表明该 DVD 属于该类别。

现在的问题是，随着全局变量的转变`off`，我怎样才能动态地收集这些变量`$_POST values`？我尝试遍历数据库并吐出一个连接变量，试图以这种格式声明它们：

`$drama=$_POST['drama'];`

这不起作用，因为我将函数与变量混合在一起，这造成了可怕的混乱。

我希望有人能回答我如何阅读`$_POST array`和使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T21:39:18.437

给定一些这样的复选框：

```
<input type="checkbox" name="genre[]" value="drama" />
<input type="checkbox" name="genre[]" value="comedy" />
<input type="checkbox" name="genre[]" value="mystery" /> 
```

你最终会`$_POST['genre']`成为一个数组。假设戏剧性和神秘性都被取消了，你最终会得到

```
$_POST['genre'] = array(
    0 => 'drama',
    1 => 'mystery'
); 
```

请记住，未选中的复选框不会与表单一起提交，因此如果您在 中获得条目`$_POST['genre']`，则它在表单中被选中。

要检查是否选择了数据库中的类别，您可以执行类似的操作

```
if (in_array('drama', $_POST['genre'])) {
  ... drama is selected
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T21:34:54.273

看这个例子：

```
foreach ($_POST as $key => $value) {

    echo "name: $key, value: $value<br />";

} 
```

# ios - 如何使用 iphone 麦克风输入进行开关以计算车轮转数？

> ID：15959242
> 
> 赞同：0
> 
> 时间：2013-04-11T21:31:51.977
> 
> 标签：ios, audio, input, microphone, jack

我正在开发和应用程序，我想**测量车轮的转数**。我买了一个便宜的**自行车里程表，它使用一个****磁铁开关**来计算自行车车轮的转数，当磁铁离传感器足够近时，每转一圈就会关闭一次电路。我的想法是**把这个磁铁开关添加到**iphone耳机的麦克风电路中，然后使用**音频框架来管理麦克风的连接**，制作一个 可以识别麦克风何时连接或未连接的**开关**，然后制作一个计数器用它。[我可以进行切换的方式是使用带有[AVCaptureDevice]](http://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVCaptureDevice_Class/Reference/Reference.html#//apple_ref/occ/instm/AVCaptureDevice/isAdjustingFocus)的 AVFoundation 框架类，因为我发现这是在[[this-post]](https://stackoverflow.com/questions/4002133/forcing-iphone-microphone-as-audio-input)回答问题之后区分外部和内部麦克风的唯一方法。

我从我的代码中粘贴了一段摘录来测试开关。计时器循环中的代码。

```
NSString *name;
static int micSwitch=0;
NSArray *devices = [AVCaptureDevice devicesWithMediaType:AVMediaTypeAudio];
    for (AVCaptureDevice *device in devices) {
        name = [ device localizedName];
    }
    if ([name isEqual:@"iPhone Microphone"]) {
        micSwitch=0;
    }
    else{
        micSwitch=1;
    } 
```

但是，此开关的更新速度比我需要的要慢。根据我的估计，**开关需要在不到 1.5ms 的时间内更新**。有人有更好的想法，我该如何使用**音频插孔输入**来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T22:20:01.223

与其将簧片开关连接到麦克风电路以使其虚拟连接和断开耳机，不如让开关直接在麦克风线路输入上产生噪声并处理音频输入。根据线路的噪声程度，您可能需要对传入的音频数据应用非常短周期的平均滤波器，以便可靠地检测尖峰。

如果你不能让簧片开关在它打开/关闭时产生足够长且嘈杂的尖峰，那么在它的位置放置一个小线圈应该可以将磁铁连接到车轮上。

更新：我发现本教程用于检测吹入麦克风的噪声尖峰 - 检测簧片开关或线圈咔哒声的原理应该相同（检测窗口更短），代码将非常相似.

[http://mobileorchard.com/tutorial-detecting-when-a-user-blows-into-the-mic/](http://mobileorchard.com/tutorial-detecting-when-a-user-blows-into-the-mic/)

# javascript - 是否可以在 JavaScript 中检测 Android 和 iOS 浏览器何时关闭屏幕

> ID：15959244
> 
> 赞同：20
> 
> 时间：2013-04-11T21:31:56.597
> 
> 标签：javascript, android, ios, mobile-safari, android-browser

我正在跟踪我的应用程序的 javascript 报告的一些可笑的高加载时间，并发现当窗口在后台或显示屏关闭时，Android（和 iOS）会暂停一些 JavaScript 执行。

在 Android 上，我发现我可以使用`window.onfocus`and`onblur`事件来检测应用程序何时切换到后台（并且 js 执行很快就会暂停，至少对于新脚本来说是这样），但是我找不到一种方法来检测何时屏幕打开或关闭。这可能吗？

（在 Safari 上，除此之外我得到了类似的结果，`onfocus`并且`onblur`没有可靠地触发。）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-11T22:02:16.743

我刚刚为我的用例找到了一个很好的解决方案：

```
function getTime() {
    return (new Date()).getTime();
}

var lastInterval = getTime();

function intervalHeartbeat() {
    var now = getTime();
    var diff = now - lastInterval;
    var offBy = diff - 1000; // 1000 = the 1 second delay I was expecting
    lastInterval = now;

    if(offBy > 100) { // don't trigger on small stutters less than 100ms
        console.log('interval heartbeat - off by ' + offBy + 'ms');
    }
}

setInterval(intervalHeartbeat, 1000); 
```

当屏幕关闭时（或 JS 因任何原因暂停），下一个间隔会延迟，直到 JS 执行恢复。在我的代码中，我可以按`offBy`数量调整计时器并称之为好。

在快速测试中，这似乎在 Android 4.2.2 的浏览器和 iOS 6.1.3 的 Safari 上运行良好。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-09-13T12:19:45.087

有几个选项可以检查它：

1.  使用[可见性 API](https://developer.mozilla.org/en-US/docs/Web/API/Page_Visibility_API)

2.  使用`focus`和`blur`事件来检测浏览器选项卡的可见性：

```
window.addEventListener("焦点", handleBrowserState.bind(context, true));
window.addEventListener("blur", handleBrowserState.bind(context, false));

函数句柄浏览器状态（isActive）{
    // 做点什么
}

```

3.  使用定时器，如上所述

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-02-25T15:50:30.103

在这里找到了一个不错的功能：

[http://rakaz.nl/2009/09/iphone-webapps-101-detecting-essential-information-about-your-iphone.html](http://rakaz.nl/2009/09/iphone-webapps-101-detecting-essential-information-about-your-iphone.html)

```
(function() {
    var timestamp = new Date().getTime();

    function checkResume() {
        var current = new Date().getTime();
        if (current - timestamp > 4000) {
            var event = document.createEvent("Events");
            event.initEvent("resume", true, true);
            document.dispatchEvent(event);
        }
        timestamp = current;
    }

    window.setInterval(checkResume, 1000);
})(); 
```

注册活动：

```
addEventListener("resume", function() {
    alert('Resuming this webapp');
}); 
```

这与触发`resume`事件的 Cordova 一致。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-11T22:38:02.653

现在屏幕关闭后，您将在脚本中做什么？无论如何，您可以注入 Java 对象（[http://developer.android.com/reference/android/webkit/WebView.html#addJavascriptInterface(java.lang.Object,%20java.lang.String)](http://developer.android.com/reference/android/webkit/WebView.html#addJavascriptInterface(java.lang.Object,%20java.lang.String))）来与活动交互并代理您在 JS 世界中需要的所有信息。

# javascript - 简单的 JavaScript 选择器

> ID：15959251
> 
> 赞同：0
> 
> 时间：2013-04-11T21:32:36.077
> 
> 标签：javascript

使用没有任何库（如 jQuery）的纯 JavaScript，我如何检测变量是否包含 DOM 类或 ID？

例如，如果我将一个值传递给一个函数，该值可能是......

```
var mySelector = ".class-name"; 
```

或者

```
var mySelector = "#id-name"; 
```

然后根据 if`mySelector`持有一个 Class 或 ID 我会运行

```
document.getElementsByClassName 
```

或者

```
document.getElementsById 
```

如果不使用像 jQuery 这样的库或其他库，那么最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T21:34:48.287

请查看[document.querySelector](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelector)或[document.querySelectorAll](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelectorAll)。两者都可以通过 ID 或类（以及其他选择器）查找元素。querySelector 将返回 1 个元素，querySelectorAll 将返回所有元素。

```
var mySelector = ".class-name", // "#id-name" will also work fine.
elements = document.querySelectorAll(mySelector); 
```

请注意，这在 IE < 8 中不起作用（请参阅[http://caniuse.com/#search=querySelectorAll](http://caniuse.com/#search=querySelectorAll)）。polyfill 将是处理它以添加 IE7 支持的最佳方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T21:36:08.827

您可以使用这个简单的`if/else`语句来区分。这也将允许您根据您引用的是类还是 ID 来运行其他代码。

```
var mySelector = ".class-name";

if(mySelector.charAt(0) == ".")
{
    document.getElementsByClassName(mySelector.substring(1));
}
else if(mySelector.charAt(0) == "#")
{
    document.getElementsById(mySelector.substring(1));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T21:40:44.740

我认为的第一种方法是检查中风的第一个符号。就像是：

```
var $ = function( string ) {
  var result;
  switch (string.substr(0,1)) {
    case '.': result = document.getElementsByClassName(string); break;
    case '#': result = document.getElementById(string); break;
    default: result = document.getElementsByTagName(string); break;
  }
  return result;
}
var mySelector = ".class-name";
console.log( $(mySelector) ); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T21:51:36.350

**仅仅因为你只想要一个选择器而不是整个 jQuery 库**，并不意味着你必须自己动手。jQuery 使用 Sizzle 选择器引擎，您可以自己轻松使用它，而无需完整的 jQuery 开销：

[http://sizzlejs.com/](http://sizzlejs.com/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-13T05:57:40.257

我不是高级用户，但前段时间我创建了这个小脚本：

[https://gist.github.com/caiotarifa/cc7d486292f39157d763](https://gist.github.com/caiotarifa/cc7d486292f39157d763)

```
var __;

__ = function(selector, filter) {
  'use strict';

  var response;

  function filtering(selectors, filter) {
    switch (filter) {
      case "first":
        return selectors[0];
        break;
      case "last":
        return selectors[selectors.length - 1];
        break;
      default:
        return selectors[filter];
        break;
    }
  }

  selector = selector.trim();
  if (typeof filter === "string") { filter = filter.trim(); }

  if (selector.indexOf(' ') < 0 && selector.indexOf('.', 1) < 0 && selector.indexOf('#', 1) < 0) {
    switch (selector.substr(0, 1)) {
      case '.':
        response = document.getElementsByClassName(selector.substr(1));
        if (response.length === 1) { filter = "first"; }
        if (typeof filter !== "undefined") { response = filtering(response, filter) }
        break;
      case '#':
        response = document.getElementById(selector.substr(1));
        break;
      default:
        response = document.getElementsByTagName(selector);
        if (response.length === 1) { filter = "first"; }
        if (typeof filter !== "undefined") { response = filtering(response, filter) }
        break;
    }
  } else {
    if (typeof filter !== "undefined") {
      switch (filter) {
        case "first":
          response = document.querySelector(selector);
          break;
        case "last":
          response = document.querySelectorAll(selector);
          response = response[response.length - 1];
          break;
        default:
          response = document.querySelectorAll(selector);
          response = response[filter];
          break;
      }
    } else {
      response = document.querySelectorAll(selector);
      if (response.length === 1) { response = response[0]; }
      else if (response.length < 1) { response = false; }
    }
  }

  return response;
}; 
```

使用它很简单：

```
__("div") 
```

或通过一些过滤器，如：

```
__("div", "first") 
```

我没有用它进行基准测试。我希望它可以帮助你。

# spring - EclipseLink 批量写入在 JPA/JTA 应用程序中不起作用

> ID：15959253
> 
> 赞同：1
> 
> 时间：2013-04-11T21:32:55.567
> 
> 标签：spring, jpa, eclipselink

我正在 Glassfish 3.1.2.2、EclipseLink 2.3.2 上编写 JPA 应用程序。我也在使用 Spring MVC，使用容器管理的 EntityManager（`@PersistenceContext`由 Spring 注入，但由容器通过创建`jee:jndi-lookup`）

我在persistence.xml 中设置`eclipselink.jdbc.batch-writing`，`JDBC`但它没有按预期工作。

我的代码有一个相当简单的循环来编写一堆对象

```
 UserTransaction tx = ...;
 tx.begin();
 for (MyObject obj : list) { 
   entityManager.persist(obj);
 }
 tx.commit(); 
```

如果我用方法周围的注释替换 UserTransaction ，批量写入*确实有效！*`@Transactional`

**我看到为每个**持久调用创建了一个单独的工作单元：

```
FINER: client acquired: 3418589
FINER: TX binding to tx mgr, status=STATUS_ACTIVE
FINER: acquire unit of work: 11053522
FINEST: persist() operation called on: mypkg.MyClass@1252ed8
....
FINER: client acquired: 23361578
FINER: TX binding to tx mgr, status=STATUS_ACTIVE
FINER: acquire unit of work: 17636998
FINEST: persist() operation called on: mypkg.MyClass@1252ed8 
```

正如预期的那样，在提交之前，数据库操作实际上不会执行 - 但每个工作单元都有自己的批次：

```
FINER: TX beforeCompletion callback, status=STATUS_ACTIVE
FINER: begin unit of work commit
FINER: TX beginTransaction, status=STATUS_ACTIVE
FINEST: Execute query InsertObjectQuery(mypkg.MyClass@12a46ef)
FINEST: Connection acquired from connection pool [default].
FINEST: Execute query  
FINER: Begin batch statements
FINE: INSERT INTO ....
FINE:   bind => [24 parameters bound]
FINER: End Batch Statements 
```

有什么我想念的想法吗？我认为问题的根源是每个持久化的单独工作单元。

**注意**我*确实*看到在单个工作单元中通过单个持久性级联的子实体的批处理工作。但是每组父/子都是一个单独的批次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:31:31.587

您似乎在混合 Java EE 事务和 Spring 事务。您需要使用其中一种。

如果您想使用 JTA，您需要配置您的 persistence.xml 以使用 JTA，并确保您正确设置“eclipselink.target-server”（如果您从 Glassfish 访问它，它将默认设置，但如果您从 Spring 访问它不会）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T10:56:06.443

*   对于 Oracle，您可以尝试在 persistence.xml 中进行配置。

    `<property name="eclipselink.jdbc.batch-writing" value="Oracle-JDBC"/>`

    从文档：

    > **oracle-jdbc**：使用Oracle平台原生的批量写入。在属性映射中，使用 OracleJDBC。
    > 
    > 注意：这需要 Oracle JDBC 驱动程序。

*   否则，也可以通过属性进行配置。

    `propertyMap.put(PersistenceUnitProperties.BATCH_WRITING, BatchWriting.OracleJDBC);`

结合批量写入，可以必须`eclipselink.jdbc.batch-writing.size`指定批量大小。

*[帖子是EclipseLink特有的，我对Spring不太熟悉]*

# git - 如何仅为更改特定文件的提交生成/应用 git 补丁

> ID：15959257
> 
> 赞同：5
> 
> 时间：2013-04-11T21:33:12.463
> 
> 标签：git, git-diff, git-patch

我有两个 git 存储库，它们是彼此的分支，我需要偶尔将提交从一个导入到另一个。

例如：

`git-repo1`有这个目录结构：

`repo1/project1/src`

`repo1/project2/src`

while`git-repo2`具有以下目录结构：

`repo2/src/`

我想做的是进行一系列提交并仅为更改特定子目录（例如`repo1/project1/src`）中的文件的提交生成补丁，并忽略所有仅更改其他任何地方的文件的提交。

或者，为所有提交生成补丁，但仅在补丁更改特定目录中的文件时应用补丁。

我需要保留有关提交的元数据，因此玩游戏`git diff`似乎不是一个可行的选择。

分叉的 git 存储库之间的目录结构不同。

有没有直接的方法来做到这一点？

**更新1**

在处理不同的目录结构方面，我看到了这个问题（[如何将 git 补丁从一个存储库应用到另一个存储库？ ）。](https://stackoverflow.com/questions/931882/how-to-apply-a-git-patch-from-one-repository-to-another/11263899#11263899)

但是，如果补丁提到修改根本不存在的文件怎么办？我想忽略这些变化。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-12T00:15:29.963

> `git rev-list --reverse`*`series`*`-- repo1/project1/src/ \`
> `| xargs -I@ git format-patch --stdout @^! >mystuff.patch`

将影响该子目录的*一系列*提交吐到`mystuff.patch`

然后，

```
cat >mystuff.sed <<\EOD
/^(From [0-9a-f]{40}|diff --git )/!{H;$!d}
x
/^From /b
${h;s,.*--,--,;x}
\,^diff[^\n]* [ab]/repo1/project1/src/,!{$!d;x;b}
${p;x}
EOD 
```

和

```
sed -Ef mystuff.sed mystuff.patch >justmystuff.patch 
```

将删除该目录之外的所有大块。你可以申请

```
git am justmystuff.patch 
```

和`-p`*`n`*根据`--directory=new/path/to`需要。

（编辑：EOD --> \EOD 所以上面的猫不会尝试替代）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T21:44:41.193

如果这两个存储库具有共同的历史（它们都是从同一个存储库派生的，但演变不同），您可以使用[cherry-picking](https://www.kernel.org/pub/software/scm/git/docs/git-cherry-pick.html)有选择地从一个分支导入提交到另一个分支。

创建一个带有两个遥控器的本地存储库（您的两个不同的存储库）

在 repositoryA 中找到涉及某些文件的提交

```
 $ git checkout repoA/master
 $ git log sub/dir/ectory
 a34256f ... 
```

将这些提交挑选到存储库B 的分支中

```
 git checkout repoB/master
 git cherry-pick a34256f 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-19T09:21:32.110

我尝试了在这里和其他答案中找到的几种不同方法，但没有找到适合我的解决方案。这是我发现的。

您可以提供`git format-patch`一个路径作为参数，以便它只为这些路径创建补丁。

```
git format-patch HEAD --root $(git rev-list --max-parents=0 HEAD) --stdout -- repo1/project1/src/ > git.patch 
```

该命令`git rev-list --max-parents=0 HEAD`用于从存储库中获取初始提交 ref

应用补丁可以完成

```
git am git.patch 
```

在我的例子中，我还想在应用补丁时跳过一个目录级别，因为我正在将整个目录从存储库移动到单独的存储库。`git apply`被使用的`git am`有一个标志`-p<n>`，它从差异路径中删除前导路径组件。默认值为 1，`git am -p2 git.patch`对我来说也是如此。

# objective-c - 创建圆形 NSButton 以插入 NSToolbar

> ID：15959258
> 
> 赞同：0
> 
> 时间：2013-04-11T21:33:13.890
> 
> 标签：objective-c, macos, uikit, appkit

对于个人项目，我目前正在尝试在 Automator for OS X 中复制工具栏的视觉样式。我已经尝试了几乎所有方法来让 NSToolbar 中的 NSButtons 在视觉上看起来相似，但似乎无法想象找出精致的 UI 组件来解决这个问题，所以我转向 Stack Overflow 上的聪明才智。

**我正在尝试做的事情**：我正在尝试复制 Automator 工具栏按钮的视觉样式：

![在此处输入图像描述](https://i.stack.imgur.com/VcQCq.png)

**设置**：目前我有活动按钮状态、非活动按钮状态和按下按钮状态的 tiff 图像。我想使用这些图像作为 NSButtonCell 的背景。现在，我将 NSButtonCell 子类化（代码如下），并在 Interface Builder 的 XIB 文件中将 NSButtonCell 类设置为 TFToolbarButtonCell。在 NSButtonCell 的子类中，我重写了 -drawWithFrame:inView 以在框架中绘制适当的状态图像；我还覆盖 -highlight:withFrame:inView 以在单击按钮时绘制按下的图像。

非常感谢我在这里可能做错的任何方向！

**TFToolbarButtonCell.h**

```
#import <Cocoa/Cocoa.h>

@interface TFToolbarButtonCell : NSButtonCell

    @property (nonatomic, strong) NSImage *onImage;
    @property (nonatomic, strong) NSImage *offImage;
    @property (nonatomic, strong) NSImage *highlightImage;

@end 
```

**TFToolbarButtonCell.m**

```
#import "TFToolbarButtonCell.h"

@implementation TFToolbarButtonCell

    - (id)init
    {
        self = [super init];
        if(self) {
            //initialize here
        }
        return self;
    }

    - (void)drawWithFrame:(NSRect)cellFrame inView:(NSView *)controlView
    {
        if([self state]){
            [self.onImage drawInRect:cellFrame fromRect:NSZeroRect operation:NSCompositeSourceOver fraction:1.0];
        } else {
            [self.offImage drawInRect:cellFrame fromRect:NSZeroRect operation:NSCompositeSourceOver fraction:1.0];
        }
    }

   - (void)highlight:(BOOL)flag withFrame:(NSRect)cellFrame inView:(NSView *)controlView
    {
        if(flag){
            [self.highlightImage drawInRect:cellFrame fromRect:NSZeroRect operation:NSCompositeSourceOver fraction:1.0];
        }
    }

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T22:27:56.940

我认为你可以通过继承 NSButton 和实现来完成你想要的

```
- (void)mouseDown:(NSEvent *)theEvent
- (void)mouseUp:(NSEvent *)theEvent 
```

以及您自己设置非活动状态的方法。

这些方法会调用

```
- (void)setImage:(NSImage *)anImage 
```

使用不同的图像从活动状态变为按下状态再到非活动状态。

您还必须在您的 NSButton 上取消选中 Interface Builder 中的“Bordered”以停止显示按钮背景。

还有，打电话

```
- (void)setEnabled:(BOOL)enabled 
```

NSToolbarItem 上的将调色板标签更改为活动/非活动（灰色按钮下方的文本）。

# angularjs - AngularJS 的设计问题 - 嵌套视图

> ID：15959261
> 
> 赞同：2
> 
> 时间：2013-04-11T21:33:21.953
> 
> 标签：angularjs, angularjs-directive

我是 AngularJS 的新手，我正面临与视图相关的问题。我有这种模型（伪代码）

```
class Contract{
  int IdContract;
  int Title;
  int IdPerson;
}

class Person{
  int IdPerson;
  string FirstName;
 string LastName;
} 
```

现在，我应该有一个与这条路线 myapp/contract/edit 匹配的视图 contractEdit.html。在该视图中，应该有某种嵌套视图来显示链接到我正在编辑的合同的人员详细信息。我应该如何使用 Angular 做到这一点？我对视图和指令感到困惑......它应该是指令吗？

任何帮助将非常感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T02:10:47.557

有多种方法可以解决这个问题。

首先很简单，也很脏，使用`ng-include`. 例如，创建一个名为的模板文件`PersontTmpl.html`：

```
<div>
  {{person.firstName }} {{person.lastName}}
</div> 
```

现在，每当您需要显示一个人时，请确保`person`范围内有一个对象，并添加以下行：

```
<ng-include src="'somepathToTemplate/PersonTmpl.html'"></ng-include> 
```

好吧，这是一个肮脏的解决方案，因为您将始终必须将 person 暴露在同名范围内。

第二种方法是创建一个指令：

```
angular.module('nameofyourmodule')
  .directive('person', function () {
    return {
      templateUrl: 'somepathToTemplate/PersonTmpl.html',
      restrict: 'AE',
      scope:{person:"="}
    };
  }); 
```

现在，当您想显示“currentPerson”时，您必须在其他模板/视图中执行以下操作：

```
 <div person='currentPerson' /> 
```

此调用将显示使用“currentPerson”对象初始化的人员模板。

要真正了解指令的工作原理，我建议观看[Writing Directives (by Misko Hevery)](http://www.youtube.com/watch?v=WqmeI5fZcho)演示，或尝试阅读[官方文档](http://docs.angularjs.org/guide/directive)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T21:39:31.297

它不应该是指令性的。

您考虑嵌套视图和您的权利。目前 AngularJS 不支持嵌套视图，但是有一个[Router](https://github.com/angular-ui/ui-router)项目支持

如果您不想走那么远，请坚持观点。

# php - PhpStorm 和扩展的 php 定义

> ID：15959268
> 
> 赞同：4
> 
> 时间：2013-04-11T21:34:09.800
> 
> 标签：php, phpstorm, code-hinting

使用代码提示，PHPStorm 可以快速显示函数定义；它可以配置为向我展示该功能使用的更详细示例吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T21:38:07.953

您可以将光标（文本光标，而不是鼠标光标）放在任何 PHP 函数上，然后按`Shift`+ `F1`（菜单：查看 -> 外部文档）。

这将打开详细描述，包括。示例和用户评论（阅读：PHP 手册）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-19T11:31:41.270

对于**OSX**特定的键盘，您可能需要`F1`通过按来触发该键`fn + F1`。所以这里有两个对我有用的用例：

1.  **打开 php.net 文档：** `fn + shift + F1`
2.  **快速查看 php.net 文档：** `fn + F1`

您可能还会发现在悬停时启用快速文档很有用。打开`File > Preferences`，导航到该`Editor`部分，然后在底部选中*Show quick doc on mouse move*框。

# facebook - 显示单个预定义相册中的内容

> ID：15959272
> 
> 赞同：0
> 
> 时间：2013-04-11T21:34:26.437
> 
> 标签：facebook, wordpress, facebook-graph-api

我一直在玩 FB SDK 和一些用于显示 FB 相册的示例，但这些示例比我想做的要复杂得多。我要做的就是为单个专辑设置专辑 ID 并拉入内容。就是这样，之后我可以设置所有样式，我只需要能够查看一个相册的内容并为每张照片添加标题。

我正在尝试创建一个这样做的 WordPress 相册；我可以轻松地创建小部件的基础，但在涉及 API 时我迷失了方向。

有没有我忽略的例子？

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T22:10:01.663

希望这能给你一个提示；）

```
<?

if (empty($_GET['album'])) {

//get all albums of page
    $graph_url = "https://graph.facebook.com/PressPlayPrague/albums?       fields=id,link,name,cover_photo&limit=500";
    $albums = json_decode(file_get_contents($graph_url));
        $counted = sizeof ($albums->data); // get the number of albums for later use

//output all albums of given page
for($c=0; $c<$counted; $c++){
    echo ("<div class='wrapper' <a href='?album=".$albums->data[$c]->id."'><div class='stack'><div style='width:180px; height:120px; display:inline-block; background-image:url(https://graph.facebook.com/".$albums->data[$c]->id."/picture?width=300&height=200); background-repeat:no-repeat;'>  </div></div><div class='caption'>".$albums->data[$c]->name."</div></a></div>");
};

}else{

        //get the album pictures replace the $_GET[album] with specific ID and remove the if clause to get only one album
    $pic_url = "https://graph.facebook.com/".$_GET[album]."/photos?fields=picture&limit=500";
    $pictures = json_decode(file_get_contents($pic_url));
    $countpic= sizeof ($pictures->data); // get the number of pics for later use
for($p=0; $p<$countpic; $p++){
echo ("<img style='width:250px; max-height:167px;' src='https://graph.facebook.com/".$pictures->data[$p]->id."/picture' alt='".$pictures->data[$p]->id."'>");

    };

}

?> 
```

# asp.net-mvc - 在 Solrnet asp.net mvc 中将 facet 字段的排序从默认的“count”修改为“index”

> ID：15959275
> 
> 赞同：0
> 
> 时间：2013-04-11T21:34:28.530
> 
> 标签：asp.net-mvc, asp.net-mvc-3, linq, solr, solrnet

默认情况下，Solr facet 字段的排序是按“计数”而不是“索引”。我有诸如“日期”、“作者”、“地点”等方面的字段。我希望默认排序（按计数/排序 = true 排序）仅适用于“作者”和“地点”方面字段，我想要要更改为“日期”字段的“索引”（排序 = false）排序的排序。这样，日期按年份和作者的顺序排序，地点按计数排序。

我有这段代码可以使用，

```
 Facet = new FacetParameters
                {
                    Queries = AllFacetFields.Except(SelectedFacetFields(parameters))
                          .Select(f => new SolrFacetFieldQuery(f) { MinCount = 1})
                          .Cast<ISolrFacetQuery>()
                          .ToList(),
                }, 
```

如果我在上面的**.Select行中包含“** **Sort = false** ” ，它会影响所有方面字段以更改为按索引排序。我只想将“Sort = false”应用于构面字段“日期”。如何做到这一点？我是 linq 或 solrnet 的初学者。请帮忙

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:46:46.523

为了实现所需的行为，您应该将三个方面查询拆分为单独的查询，您可以在其中单独控制排序行为。

```
 Facet = new FacetParameters
         {
             Queries = new []
                    {
                       new SolrFacetFieldQuery("author") {MinCount = 1 },
                       new SolrFacetFieldQuery("places") {MinCount = 1 },
                       new SolrFacetFieldQuery("date") {MinCount = 1, Sort = false }
                    }
         } 
```

有关详细信息，请参阅[SolrNet Google 代码项目站点上的](https://code.google.com/p/solrnet/)[Facets](https://code.google.com/p/solrnet/wiki/Facets)页面。

**更新：**由于原始 LINQ 查询中有一些额外的逻辑，您可以执行以下操作来实现两者的组合：

```
 Facet = new FacetParameters
            {
                Queries = AllFacetFields.Except(SelectedFacetFields(parameters))
                      .Select(f => BuildFacetQuery(f))
                      .Cast<ISolrFacetQuery>()
                      .ToList(),
            },

    private SolrFacetFieldQuery BuildFacetQuery(string fieldName)
    {
           var query = new SolrFacetFieldQuery(fieldName) { MinCount = 1 };
           if(string.Compare(fieldName, "date", StringComparison.OrdinalIgnoreCase) == 0)
                query.Sort = false;
           return query;
    } 
```**

# java - 如何将javacode中的jsp插入另一个jsp

> ID：15959280
> 
> 赞同：2
> 
> 时间：2013-04-11T21:34:39.927
> 
> 标签：java, jsp

我正在处理遗留代码，所以请不要开始“你为什么这样做”，我知道这是糟糕的实现，所以让我们跳过它。

在高层次上，我有一个 JSP

```
<html:form action="/myAction" method="POST" onsubmit="beforeSubmit()">
...
        <table class="dialog">
            <% render.myhtml(out); %>
        </table>
...
</html> 
```

render.myhtml(out) 在java代码中如下（我尝试了 jsp:include 和 @include ：

```
public void myhtml(Writer w) throws IOException {
....
        String include = "<jsp:include page=" +"\"" +myobject.getPage() +"\"" + " />";
      //String include = "<%@ include file=" +"\"" +myobject.getPage() +"\"" + " %>";
        println(w, include);
...
} 
```

但是当我打开页面时，我看不到包含.. 源代码显示它正在打印包含标签但没有评估它：

```
<table class="dialog">
    ...
    <jsp:include page="/path/test.jsp" />
</table> 
```

所以在我看来，这种插入是在评估包含物之后发生的..所以问题是..我能做些什么来完成这项工作？我曾考虑将 JSP 作为字符串读取并传递它，但这对内存来说非常沉重，所以我想避免这种情况。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T21:43:01.250

使用[RequestDispatcher.include()](http://docs.oracle.com/javaee/6/api/javax/servlet/RequestDispatcher.html#include%28javax.servlet.ServletRequest,%20javax.servlet.ServletResponse%29)在`myhtml()`.

你需要`application`从你的 JSP 中传入，因为 RequestDispatcher 是通过[`ServletContext.getRequestDispatcher()`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#getRequestDispatcher%28java.lang.String%29)

应用程序是一个 JSP 隐式对象：[http ://www.tutorialspoint.com/jsp/jsp_implicit_objects.htm](http://www.tutorialspoint.com/jsp/jsp_implicit_objects.htm)

**编辑**

JSP：

```
<html:form action="/myAction" method="POST" onsubmit="beforeSubmit()">
...
        <table class="dialog">
            <% render.myhtml(application, request, response); %>
        </table>
...
</html> 
```

爪哇：

```
public void myhtml(ServletContext sc, ServletRequest req, ServletResponse res) throws IOException {
....
        RequestDispatcher rd = sc.getRequestDispatcher(myobject.getPage());
        rd.include(req, res);
...
} 
```

我也喜欢@Luiggi 的回答，您可以根据自己的代码编写方式做出选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T21:43:35.057

传递给您的`render.myhtml()`方法的编写器是 HTTP 响应的编写器。你写给这个作家的所有东西都照原样进入浏览器。

JSP 是一种服务器端技术。它在服务器端编译和执行。浏览器不知道有关 JSP 包含的任何内容。因此，将 JSP 代码写入 HTTP 响应编写器是没有意义的。

要做你想做的事，请参阅[Paul Grime 的回答](https://stackoverflow.com/a/15959387/571407)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T21:43:08.807

错误的解释在[JB Nizet answer](https://stackoverflow.com/a/15959400/1065197)中有详细说明。

如果你想动态包含一个jsp，`<jsp:include>`你应该只动态设置你想要包含的页面的名称。基本示例：

```
<table class="dialog">
    <jsp:include page="<%= render.myhtml() %>" />
</table> 
```

有

```
public String myhtml() {
    return "/path/test.jsp";
} 
```

# java - Java 时钟闹钟

> ID：15959285
> 
> 赞同：-1
> 
> 时间：2013-04-11T21:34:58.897
> 
> 标签：java, alarm

这是一个家庭作业。

我正在尝试创建一个带有闹钟的 java 12 小时制时钟。经过一周的持续工作，我终于让它运行起来了，但是，当我设置闹钟时，它会在设定时间前 2-3 分钟响起。此外，当我打盹（应该打盹 2 分钟）时，它会在下一分钟立即关闭。我总共有 10 个课程，但我正在添加应该相关的课程`Time`和`TimeManager`. 我刚开始使用 Java，我很难用它，如果这是一个愚蠢的问题，很抱歉。

`Time`：

```
public class Time {
private int hour;
private int minute;

public Time(int initHour, int initMinute) {
    if (1 <= hour && hour <= 12) {
        hour = initHour;
    }
    else if (hour == 0) {
        hour = 12;
    }
    if (0 <= minute && minute <= 59 ) {
        minute = initMinute;
    }
}

public void addOneMinute() {
    minute++;
    if (minute == 59) {
        incrementHour();
        minute = 0;
    }
}

public void incrementHour() {
    hour++;
    if (hour > 12) {
        hour = 1;
    }
}

public void incrementMinute() {
    minute++; 
    if (minute == 59) {
        minute = 0;
    }
}

public int getHour() {
    if (hour >= 1 && hour <= 12) {
    }
    return hour;
}

public int getMinute() {
    if (minute >=0 && minute <= 59) {
    }
    return minute;
}

public boolean equals(Time time) {
    if (hour == hour && minute == minute) {     
        return true;
    }
    else {
        return false;
    }
}
} 
```

`TimeManager`：

```
public class TimeManager {
private static final int SNOOZE_DURATION_IN_MINUTES = 2;
private Time currentTime;
private Time alarmTime;
private Time snoozeTime;
private Display     display;
private ModeManager modeMgr;
private Alarm       alarm;

public TimeManager() {
    currentTime = new Time(12,0);
    alarmTime = new Time(12,0);
    snoozeTime = new Time(12,0);
}

public void setDisplay(Display newDisplay) {
    display = newDisplay;
    showCurrentTime();
}

public void setModeManager(ModeManager newModeMgr) {
    modeMgr = newModeMgr;
}

public void setAlarm(Alarm newAlarm) {
    alarm = newAlarm;
}

    public void incrementCurrentMinute() {
    currentTime.addOneMinute();
    Mode mode = modeMgr.getMode();
    if (mode == mode.ALARM_ON || mode == mode.ALARM_OFF || mode == mode.SET_TIME) {
        updateDisplay();
    }
    if (mode == mode.ALARM_ON) {
        if (currentTime.equals(alarmTime) || currentTime.equals(snoozeTime)) {
        soundAlarmIfNecessary();
        }
    }
}

public void incrementCurrentHour() {
    currentTime.incrementHour();
    Mode mode = modeMgr.getMode();
    if (mode == mode.ALARM_ON || mode == mode.ALARM_OFF || mode == mode.SET_TIME) {
        updateDisplay();
    }
    if (mode == mode.ALARM_ON) {
        if (currentTime.equals(alarmTime) || currentTime.equals(snoozeTime)) {
        soundAlarmIfNecessary();
        }
    }
}

public void incrementAlarmMinute() {
    alarmTime.incrementMinute();
    Mode mode = modeMgr.getMode();
    if (mode == mode.SET_ALARM) {
        updateDisplay();
    }
    if (mode == mode.ALARM_ON) {
        if (currentTime.equals(alarmTime)) {
            soundAlarmIfNecessary();
        }
    }
}

public void incrementAlarmHour() {
    alarmTime.incrementHour();
    Mode mode = modeMgr.getMode();
    if (mode == mode.SET_ALARM) {
        updateDisplay();
    }
    if (mode == mode.ALARM_ON) {
        if (currentTime.equals(alarmTime)) {
            soundAlarmIfNecessary();
        }
    }
}

public void snooze() {
    while (alarm.isOn()) {
        alarm.off();
        int hour = currentTime.getHour();
        int minute = currentTime.getMinute();
        minute += SNOOZE_DURATION_IN_MINUTES;
            if (minute > 59) {
                minute -= 60;
                ++hour;
            }
        snoozeTime = new Time(hour, minute);
        }
}

public void showCurrentTime() {
    display.showHour(currentTime.getHour());
    display.showMinute(currentTime.getMinute());
}

public void showAlarmTime() {
    display.showHour(alarmTime.getHour());
    display.showMinute(alarmTime.getMinute());
}

private void updateDisplay() {
    Mode mode = modeMgr.getMode();
    if (mode == mode.SET_TIME || mode == mode.ALARM_ON || mode == mode.ALARM_OFF) {
        showCurrentTime();
    }
    else {
        showAlarmTime();
    }
}

private void soundAlarmIfNecessary() {
    Mode mode = modeMgr.getMode();
    if (mode == mode.ALARM_ON && currentTime.equals(alarmTime) || currentTime.equals(snoozeTime)) {
        alarm.on();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T21:40:14.500

在其他事情中，您在该方法中有一个相当大的错误`Time.equals()`：

```
public boolean equals(Time time) {

    if (hour == hour && minute == minute) {     
        return true;
        }
    else {
        return false;
        }
    }
} 
```

该表达式`hour == hour`将`hour`实例变量与自身进行比较，它始终是`true`. 这显然不是您想要的，而是您想将其与`hour`给定`time`参数的字段进行比较，如下所示：

```
 if (hour == time.getHour() && minute == time.getMinute() ) { 
```

# mysql - Mysql用户名问题

> ID：15959287
> 
> 赞同：0
> 
> 时间：2013-04-11T21:35:05.187
> 
> 标签：mysql, sql, join

假设我有以下表格布局：

```
Logs:
log_id - log_userfrom - log_userto

Users
user_id - user_name 
```

**我需要的结果是：**

```
Joe Adams - Andy Simons 
```

我如何通过查询得到它？我尝试了类似的东西

```
SELECT `log_userfrom`, `log_userto`, `user_fullname` FROM pub_logcontact, pub_users
WHERE log_userfrom=user_id 
```

上面 sql 行的问题是它只打印 userfrom 的用户名。我需要它在一个查询中为 userfrom 和 userto 打印用户名:)

那可能吗？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T21:46:16.353

您可能希望将用户名加入您的记录值。

```
SELECT usersfrom.`username` AS `username_from`, usersto.`username` AS `username_to`
FROM `logs` logs
LEFT JOIN `users` usersfrom ON (usersfrom.`user_id`=logs.`log_userfrom`)
LEFT JOIN `users` usersto ON (usersto.`user_id`=logs.`log_userto`) 
```

# node.js - Cloud9 和 snmpjs

> ID：15959290
> 
> 赞同：2
> 
> 时间：2013-04-11T21:35:20.093
> 
> 标签：node.js, snmp, cloud9-ide

我目前正在尝试在 c9.io 开发环境中获取适用于 node.js 库 node-snmpjs 的基本示例代码。

示例代码在这里：

[https://github.com/wesolows/node-snmpjs](https://github.com/wesolows/node-snmpjs)或

[https://npmjs.org/package/snmpjs](https://npmjs.org/package/snmpjs)

```
var os = require('os');
var snmp = require('snmpjs');
var logger = require('bunyan');

var log = new logger({
    name: 'snmpd',
    level: 'info'
});

var agent = snmp.createAgent({
    log: log
});

agent.request({ oid: '.1.3.6.1.2.1.1.5', handler: function (prq) {
    console.log("Request received");
    var nodename = os.hostname();
    var val = snmp.data.createData({ type: 'OctetString',
        value: nodename });

    snmp.provider.readOnlyScalar(prq, val);
} });

agent.bind({ family: 'udp4', port: 161 }); 
```

我尝试将绑定端口更改为： parseInt(process.env.PORT)

当我尝试对 c9 在运行时吐出的地址和端口执行 snmpget 时，它会失败。我也试过：8080。8080 是 c9 的控制台输出总是说映射到 process.env.PORT。我还尝试了 snmpget 中的端口 80。

作为后备方案，我还尝试使用 c9 进行基本的 telnet、套接字连接，但无法正常工作......似乎根本问题可能是我不知道正在使用什么 IP 和端口.

- - - - - - - - - - - - - 编辑 - - - - - - - - - - - -

我在 agent.bind 行上尝试了以下变体：

```
agent.bind({ family: 'udp4', port: parseInt(process.env.PORT), addr: process.env.IP}); 
```

和

```
agent.bind({ family: 'udp4', port: 17000, addr: process.env.IP}); 
```

输出：

```
Your code is running at 'http://node-dev1.thaspius.c9.io'.
Important: use 'process.env.PORT' as the port and 'process.env.IP' as the host in your scripts!
"127.12.254.129:17000"
ex-c9-node47.prod.rhcloud.com
{"name":"snmpd","hostname":"ex-c9-node47.prod.rhcloud.com","pid":32758,"component":"snmp-agent","level":30,"msg":"Bound to 127.12.254.129:17000","time":"2013-07-31T17:59:56.376Z","v":0} 
```

snmpget 结果：

```
snmpget -v 2c -c any 127.12.254.129:17000 .1.3.6.1.2.1.1.5
Timeout: No Response from 127.12.254.129:17000.

snmpget -v 2c -c any ex-c9-node47.prod.rhcloud.com:17000 .1.3.6.1.2.1.1.5
Timeout: No Response from ex-c9-node47.prod.rhcloud.com:17000.

snmpget -v 2c -c any node-dev1.thaspius.c9.io:17000 .1.3.6.1.2.1.1.5
Timeout: No Response from node-dev1.thaspius.c9.io:17000. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-31T09:59:27.170

You likely need to bind your application to a specific IP as well: process.env.IP. According to the snmpjs docs, you can do that using the addr option (i.e.., `agent.bind({ family: 'udp4', port: process.env.PORT, addr: process.env.IP })`). Also have a look at [https://c9.io/site/blog/2013/05/can-i-use-cloud9-to-do-x/](https://c9.io/site/blog/2013/05/can-i-use-cloud9-to-do-x/) for more info.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-17T07:41:12.513

正如您使用“snmp.provider.readOnlyScalar(prq, val);” 此功能将在您设置的 OID 后自动添加即时 ID“.0”；

所以你必须运行 use ".1.3.6.1.2.1.1.5.0": snmpget -v 2c -c any node-dev1.thaspius.c9.io:17000 .1.3.6.1.2.1.1.5.0

# java - 在 c 中使用 System() 调用 Java 文件

> ID：15959293
> 
> 赞同：5
> 
> 时间：2013-04-11T21:35:28.763
> 
> 标签：java, c, web-services, perl

我正在尝试从 c 代码运行位于我的 Web 服务器上的 java 文件。当我加载网页时，一个 perl 脚本调用 ac 文件，然后调用 java 文件。

我在我的 c 文件中设置了呼叫：

```
System(java -cp <path> MyClass); 
```

但是这个 System() 调用返回 256 - （我认为找不到文件）。

我也试过：

```
System(cd /<path> && java MyClass); 
```

并得到相同的结果。

如果我通过 ssh 从终端运行完全相同的命令，它工作正常，只是当我尝试从浏览器运行代码时，它会给出此错误。

如果我的语法不正确，有什么想法吗？还是我做错了什么？它与我被迫使用的 perl > c > java 链有关吗？

**编辑**看来 c 运行时没有查看 $PATH。我添加了 java.exe 的绝对路径，它起作用了！呜呜

**tldr**

解决方案：

```
System("/opt/jdk1.6.0_43/bin/java -cp <path> MyClass"); 
```

# xcode - XCode：将光标放在断点命中的断点位置

> ID：15959295
> 
> 赞同：2
> 
> 时间：2013-04-11T21:35:35.113
> 
> 标签：xcode, cursor, breakpoints

我想沿着我的程序执行路径删除几个断点。XCode 在每个断点处停止，我想立即清除它。与我以前使用的所有其他工具相比，Xcode 不会将光标放在它停止的行上。因此，“切换断点”快捷方式不是清除当前断点，而是将断点放在看不见的地方。

要清除当前断点，我需要在实际清除断点之前抓住鼠标或按下额外的快捷方式。连续的几个断点变得非常烦人。

也许有解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-16T23:34:22.437

您可以在 Debug Navigator 中单击最上面的线程`⌘</kbd>+`6` to see where you stopped.`

如果您想在触发断点时自动跳过断点或执行其他操作，您可以右键单击或 Control+单击断点，选择`Edit Breakpoint...`然后检查`Automatically continue after evaluating actions`。

# javascript - 响应式设计 - 仅在较小屏幕上的“阅读更多”按钮

> ID：15959297
> 
> 赞同：3
> 
> 时间：2013-04-11T21:36:04.367
> 
> 标签：javascript, css, responsive-design

我们需要能够限制移动设备上显示的文本数量。我们希望以与各种“阅读更多”插件（[http://plugins.learningjquery.com/expander/index.htm](http://plugins.learningjquery.com/expander/index.htm)）类似的方式这样做，我们在包含 HTML 元素的 div 上调用一些 JS。

问题是，我们不想在大型设备上的文本上调用这些库。是否可以在不引入新库（如 Respond.js）的情况下将媒体查询与某些 CSS 结合使用？

有没有人有更好的方法来限制移动设备上的文本，并提供阅读更多链接？

**编辑：**我们正在使用媒体查询来处理某些宽度。但是我们想以一种智能的方式截断一个包含一些文本的容器。如果您在移动设备上，并且该 div 包含 1000 个单词，我们希望显示 100 个单词，然后显示一个“阅读更多”按钮来扩展文本。如果您调整窗口大小，此按钮和截断需要无缝消失。

我们现在拥有的是以下内容：

1.  在页面加载时，将内容 div（包含我们要截断的文本的 div）中的所有内容复制到其上方的 div 中。
2.  使用 max-width 媒体查询隐藏该 content-div，并显示新的。使用一些 JS 来截断新 div 元素内的文本。
3.  在新 div 的末尾附加一个按钮，隐藏新 div，并显示旧 div。

有没有更好的方法来处理这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T21:44:48.113

当页面宽度低于指定数量时，您可以使用 CSS @media 隐藏/显示元素。

HTML：

```
<p>here is some content.</p>
<p id="extra_content" class="extra_content">here is some extra content</p>
<button id="read_more" class="read_more">Show More</button> 
```

CSS：

```
@media (max-width: 650px) {
  .extra_content {
    display: none;
  }
  #read_more {
    display: block;
  }
}

.read_more  {
  display: none;
}

.show {
   display: block!important;
} 
```

纯 JavaScript：

```
document.getElementById("read_more").addEventListener( 'click' , changeClass);

function changeClass() {
  var content = document.getElementById("extra_content");
  var btn = document.getElementById("read_more");
  content.classList.toggle('show');

  if (content.classList.contains("show")) {
      btn.innerHTML = "Show Less";
  } else {
      btn.innerHTML = "Show More";
  }
} 
```

这是一个工作示例：http: [//jsfiddle.net/xfgqW/2/](http://jsfiddle.net/xfgqW/2/)

在这里阅读更多：[http ://webdesignerwall.com/tutorials/responsive-design-with-css3-media-queries](http://webdesignerwall.com/tutorials/responsive-design-with-css3-media-queries)

* * *

## 使用多个按钮

为了使用多个按钮，我们需要稍微修改一下。基本上我们需要使用一个公共类来查询按钮元素并循环它们以分配点击事件并更改innerHtml。例如：

```
<button class="read_more">Show More</button>
<p>here is some content.</p>
<p class="extra_content">here is some extra content</p>
<button class="read_more">Show More</button> 
```

```
document.querySelectorAll("button.read_more").forEach(function(button) {
  button.addEventListener( 'click' , changeClass);
});

function changeClass() {
  var content = document.getElementById("extra_content");
  var buttons = document.querySelectorAll("button.read_more");

  content.classList.toggle("show");

  var buttonText = content.classList.contains("show") ? "Show Less" : "Show More";

  buttons.forEach(function(button) {
    button.innerHTML = buttonText;
  });
} 
```

这是一个带有多个按钮的工作示例：[https ://jsfiddle.net/uc8d7w3e/1/](https://jsfiddle.net/uc8d7w3e/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T21:45:16.633

你想要这样的东西[吗](http://css-tricks.com/resolution-specific-stylesheets/)？

```
@media screen and (max-width: 1024px) {
  #read_more {
    display: none;
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T21:48:34.563

如果您只需要为大/小屏幕调用 JS，请检查`$(window).width()`.

用于`@media (max-width: something)`在 CSS 中制定特定规则

# backbone.js - Backbone.js - fetch 方法不会触发重置事件

> ID：15959306
> 
> 赞同：6
> 
> 时间：2013-04-11T21:37:00.780
> 
> 标签：backbone.js, backbone-events, backbone.js-collections

我从 Backbone.js 开始并尝试构建我的第一个示例应用程序 - 购物清单。

我的问题是当我获取项目集合时，可能不会触发重置事件，因此不会调用我的渲染方法。

**模型：**

```
Item = Backbone.Model.extend({
  urlRoot : '/api/items',
  defaults : {
    id : null,
    title : null,
    quantity : 0,
    quantityType : null,
    enabled : true
  }
}); 
```

**收藏：**

```
ShoppingList = Backbone.Collection.extend({
  model : Item,
  url : '/api/items'
}); 
```

**列表显示：**

```
ShoppingListView = Backbone.View.extend({

el : jQuery('#shopping-list'),

initialize : function () {
    this.listenTo(this.model, 'reset', this.render);
},

render : function (event) {
    // console.log('THIS IS NEVER EXECUTED');
    var self = this;
    _.each(this.model.models, function (item) {
        var itemView = new ShoppingListItemView({
            model : item
        });
        jQuery(self.el).append(itemView.render().el);
    });
    return this;
}

}); 
```

**列表项视图：**

```
ShoppingListItemView = Backbone.View.extend({

tagName : 'li',

template : _.template(jQuery('#shopping-list-item').html()), // set template for item

render : function (event) {
    jQuery(this.el).html(this.template(this.model.toJSON()));
    return this;
}

}); 
```

**路由器：**

```
var AppRouter = Backbone.Router.extend({

routes : {
    '' : 'show'
},

show : function () {
    this.shoppingList = new ShoppingList();
    this.shoppingListView = new ShoppingListView({
        model : this.shoppingList
    });
    this.shoppingList.fetch(); // fetch collection from server
}

}); 
```

**申请开始：**

```
var app = new AppRouter();
Backbone.history.start(); 
```

页面加载后，从服务器正确获取项目集合，但从不调用 ShoppingListView 的渲染方法。我做错了什么？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-11T21:44:50.580

这是你的问题：

" 当模型数据从服务器返回时，它使用 set (智能地) 合并获取的模型，除非您通过 {reset: true}" [Backbone Docs](http://backbonejs.org/#Collection-fetch)

因此，您想使用 reset 选项触发 fetch：

```
this.shoppingList.fetch({reset:true}); // fetch collection from server 
```

* * *

顺便说一句，您可以[在视图上定义一个集合属性](http://backbonejs.org/#View-constructor)：

```
this.shoppingList = new ShoppingList();
  this.shoppingListView = new ShoppingListView({
     collection : this.shoppingList  // instead of model: this.shoppingList
  }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T22:27:39.180

您使用的是 Backbone 1.0 吗？如果不是，请忽略这一点，否则，您可能会发现文档中有关[Collection#fetch](http://backbonejs.org/#Collection-fetch)方法的内容很有趣。

引用变更日志：

"*将 Collection 的 "update" 重命名为 set，与类似的 model.set() 并行，并与 reset 对比。它现在是获取后的默认更新机制。如果您想继续使用 "reset"，请通过 {reset ：对}* “

因此，基本上，您不是在`reset`此处制作 a 而是在制作 a `update`，因此不会`reset`触发任何事件。

# ios - 构建错误尝试创建一种方法来处理多个对象类型的参数

> ID：15959312
> 
> 赞同：-1
> 
> 时间：2013-04-11T21:37:33.207
> 
> 标签：ios, objective-c

我有这个实例方法，我试图概括最后一条语句来处理多个对象类：

```
-(void)showHTMLHelp:(NSString *)htmlString pointTo:(id)target background:(UIColor *)bgColor 
```

直到运行时我才知道目标对象是什么类。这是进行检查的代码（第二条语句导致构建错误）：

```
 if([target isKindOfClass: [UITextField class]])
    [popoverController presentPopoverFromRect:(UITextField)&target.frame inView:self.view
                     permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 
```

这是构建错误：

> 在“__strong id”类型的对象上找不到属性“框架”

为什么？我有一个正确的类，所有*目标*都有实际的“框架”（UITableView、UITextField 和 UITextView）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:59:46.013

```
if([target isKindOfClass: [UITextField class]])
    [popoverController presentPopoverFromRect:((UITextField *)target).frame inView:self.view
                     permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T21:49:55.033

如果您的目标没有实际的框架（原点 x、原点 y、宽度、高度），则无法呈现PopoverFromRect，因为它不知道从哪里弹出。尝试

```
if([target isKindOfClass: [UITextField class]])
[popoverController presentPopoverFromRect::CGRectMake(0, 0, 100, 100) inView:self.view
                 permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 
```

你的 CGRectMake 是你的（原点 x，原点 y，宽度，高度）

# ruby-on-rails - Twitter Bootstrap Button-如何链接到另一个页面？

> ID：15959313
> 
> 赞同：0
> 
> 时间：2013-04-11T21:37:33.753
> 
> 标签：ruby-on-rails, ruby, twitter-bootstrap, routing

我正在尝试使用标签链接其中一个按钮（按钮来自 Twitter 引导程序），即 a 标签的类等于按钮，然后 href 是它应该重定向到的链接（没有代码，因为它没有正确显示）。

这行代码存在的文件在app/views/candidates/show，但是我想把它链接到app/views/donations/index.html.erb。我不断收到路由错误，不知道为什么（我还为捐赠和候选人设置了控制器，并在候选人和捐赠之间建立了模型关联，即候选人有很多捐赠，并通过donation_id链接它们。不知道还有什么我需要这样做才能使路由正常工作）。

这是打印出来的 rake 路线：

```
candidates_show GET    /candidates/show(.:format)     candidates#show
candidates_new GET    /candidates/new(.:format)      candidates#new
donations_index GET    /donations/index(.:format)     donations#index
home_index GET    /home/index(.:format)          home#index
import_candidates POST   /candidates/import(.:format)   candidates#import
candidates GET    /candidates(.:format)          candidates#index
POST   /candidates(.:format)          candidates#create
new_candidate GET    /candidates/new(.:format)      candidates#new
edit_candidate GET    /candidates/:id/edit(.:format) candidates#edit
candidate GET    /candidates/:id(.:format)      candidates#show
PUT    /candidates/:id(.:format)      candidates#update
DELETE /candidates/:id(.:format)      candidates#destroy
root        /                              home#index 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T21:45:22.953

```
<%= link_to("donations", donations_index_path, class: "btn") %> 
```

还可以考虑将捐赠指定为资源，例如

```
resources :donations 
```

这将为您提供一个更简单的`donations_path`帮手

```
donations GET /donations(.:format) donations#index 
```

# c# - 运行时获取cmd的输出

> ID：15959315
> 
> 赞同：0
> 
> 时间：2013-04-11T21:37:40.407
> 
> 标签：c#, cmd

我使用以下代码捕获 cmd 文件的输出：

```
com = "Parameter";
System.Diagnostics.Process process = new System.Diagnostics.Process();
System.Diagnostics.ProcessStartInfo startInfo = new System.Diagnostics.ProcessStartInfo();
startInfo.FileName = Properties.Settings.Default.pathTo + @"copy.cmd";
startInfo.Arguments = com;
startInfo.RedirectStandardOutput = true;
startInfo.RedirectStandardError = true;
startInfo.UseShellExecute = false;
startInfo.CreateNoWindow = true;
process.StartInfo = startInfo;
process.Start();
process.WaitForExit();
Console.WriteLine(process.StandardOutput.ReadToEnd());
Console.WriteLine(process.StandardError.ReadToEnd()); 
```

没关系，但是我在 cmd 完成后得到输出。cmd运行时如何获得输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:41:56.163

由于这个调用，你最终得到了输出：

```
process.WaitForExit(); 
```

这会阻止您的代码执行，直到命令完成。

要在输出时读取输出，请不要将`WaitForExit()`调用放在那里并从 `StandardOutput`数据到达时读取，例如：

```
while ((var str = process.StandardOutput.ReadLine()) != null)
{
    // do something with str
} 
```

# java - outOfMemoryException 个人资料图片

> ID：15959317
> 
> 赞同：0
> 
> 时间：2013-04-11T21:37:45.670
> 
> 标签：java, android

我有很多 ProfilePictureView 元素，我把它们的 facebook 个人资料图片放在了其中，但是如果我有很多图片要下载，我会得到 OutOfMemoryException。

我用我的 Galaxy s2 来检查

我该如何处理？

这是我的代码：

```
ProfilePictureView ppv= (ProfilePictureView) v.findViewById(R.id.chatitemfriendProfilePic);
            ppv.setProfileId(facebookIds.get(position)); 
```

这是logcat：

```
04-12 00:28:09.860: E/AndroidRuntime(8532): FATAL EXCEPTION: main
04-12 00:28:09.860: E/AndroidRuntime(8532): java.lang.OutOfMemoryError
04-12 00:28:09.860: E/AndroidRuntime(8532):     at android.graphics.Bitmap.nativeCreate(Native Method)
04-12 00:28:09.860: E/AndroidRuntime(8532):     at android.graphics.Bitmap.createBitmap(Bitmap.java:605)
04-12 00:28:09.860: E/AndroidRuntime(8532):     at android.graphics.Bitmap.createBitmap(Bitmap.java:551)
04-12 00:28:09.860: E/AndroidRuntime(8532):     at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:437)
04-12 00:28:09.860: E/AndroidRuntime(8532):     at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:524)
04-12 00:28:09.860: E/AndroidRuntime(8532):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:499)
04-12 00:28:09.860: E/AndroidRuntime(8532):     at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:351)
04-12 00:28:09.860: E/AndroidRuntime(8532):     at android.graphics.BitmapFactory.decodeResource(BitmapFactory.java:374)
04-12 00:28:09.860: E/AndroidRuntime(8532):     at android.graphics.BitmapFactory.decodeResource(BitmapFactory.java:404)
04-12 00:28:09.860: E/AndroidRuntime(8532):     at com.facebook.widget.ProfilePictureView.setBlankProfilePicture(ProfilePictureView.java:398)
04-12 00:28:09.860: E/AndroidRuntime(8532):     at com.facebook.widget.ProfilePictureView.refreshImage(ProfilePictureView.java:388)
04-12 00:28:09.860: E/AndroidRuntime(8532):     at com.facebook.widget.ProfilePictureView.setProfileId(ProfilePictureView.java:227)
04-12 00:28:09.860: E/AndroidRuntime(8532):     at com.example.s.ProfileActivity$chatDialog.getView(ProfileActivity.java:1665)
04-12 00:28:09.860: E/AndroidRuntime(8532):     at android.widget.AbsListView.obtainView(AbsListView.java:2014)
04-12 00:28:09.860: E/AndroidRuntime(8532):     at android.widget.ListView.measureHeightOfChildren(ListView.java:1244)
04-12 00:28:09.860: E/AndroidRuntime(8532):     at android.widget.ListView.onMeasure(ListView.java:1155)
04-12 00:28:09.860: E/AndroidRuntime(8532):     at android.view.View.measure(View.java:12723)
04-12 00:28:09.860: E/AndroidRuntime(8532):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
04-12 00:28:09.860: E/AndroidRuntime(8532):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1369)
04-12 00:28:09.860: E/AndroidRuntime(8532):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:660)
04-12 00:28:09.860: E/AndroidRuntime(8532):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:553)
04-12 00:28:09.860: E/AndroidRuntime(8532):     at android.view.View.measure(View.java:12723)
04-12 00:28:09.860: E/AndroidRuntime(8532):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
04-12 00:28:09.860: E/AndroidRuntime(8532):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
04-12 00:28:09.860: E/AndroidRuntime(8532):     at android.view.View.measure(View.java:12723)
04-12 00:28:09.860: E/AndroidRuntime(8532):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
04-12 00:28:09.860: E/AndroidRuntime(8532):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
04-12 00:28:09.860: E/AndroidRuntime(8532):     at android.view.View.measure(View.java:12723)
04-12 00:28:09.860: E/AndroidRuntime(8532):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
04-12 00:28:09.860: E/AndroidRuntime(8532):     at android.widget.LinearLayout.forceUniformWidth(LinearLayout.java:905)
04-12 00:28:09.860: E/AndroidRuntime(8532):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:885)
04-12 00:28:09.860: E/AndroidRuntime(8532):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:553)
04-12 00:28:09.860: E/AndroidRuntime(8532):     at android.view.View.measure(View.java:12723)
04-12 00:28:09.860: E/AndroidRuntime(8532):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
04-12 00:28:09.860: E/AndroidRuntime(8532):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
04-12 00:28:09.860: E/AndroidRuntime(8532):     at android.view.View.measure(View.java:12723)
04-12 00:28:09.860: E/AndroidRuntime(8532):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
04-12 00:28:09.860: E/AndroidRuntime(8532):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
04-12 00:28:09.860: E/AndroidRuntime(8532):     at android.view.View.measure(View.java:12723)
04-12 00:28:09.860: E/AndroidRuntime(8532):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
04-12 00:28:09.860: E/AndroidRuntime(8532):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
04-12 00:28:09.860: E/AndroidRuntime(8532):     at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2092)
04-12 00:28:09.860: E/AndroidRuntime(8532):     at android.view.View.measure(View.java:12723)
04-12 00:28:09.860: E/AndroidRuntime(8532):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1442)
04-12 00:28:09.860: E/AndroidRuntime(8532):     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2442)
04-12 00:28:09.860: E/AndroidRuntime(8532):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-12 00:28:09.860: E/AndroidRuntime(8532):     at android.os.Looper.loop(Looper.java:137)
04-12 00:28:09.860: E/AndroidRuntime(8532):     at android.app.ActivityThread.main(ActivityThread.java:4575)
04-12 00:28:09.860: E/AndroidRuntime(8532):     at java.lang.reflect.Method.invokeNative(Native Method)
04-12 00:28:09.860: E/AndroidRuntime(8532):     at java.lang.reflect.Method.invoke(Method.java:511)
04-12 00:28:09.860: E/AndroidRuntime(8532):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789)
04-12 00:28:09.860: E/AndroidRuntime(8532):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556)
04-12 00:28:09.860: E/AndroidRuntime(8532):     at dalvik.system.NativeStart.main(Native Method) 
```

# scheme - 在方案中使用“定义”

> ID：15959319
> 
> 赞同：4
> 
> 时间：2013-04-11T21:37:49.220
> 
> 标签：scheme, definition

我是 Scheme 的新手，只是对“定义”感到好奇。我见过这样的事情： `(define (square x) (* x x))` 这是有道理的[函数名'square'输入参数'x']。但是，我找到了一些 90 年代的示例代码，并试图理解： `(define (play-loop-iter strat0 strat1 count history0 history1 limit) (~Code for function~)` 除了函数名之外，所有这些输入参数都可以吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T21:59:46.743

简短的回答 - 是的，第一个符号之后的所有符号都是过程的参数（第一个是过程的名称）。也很高兴指出这一点：

```
(define (f x y)
  (+ x y)) 
```

只是语法糖，两种形式是等价的：

```
(define f
  (lambda (x y)
    (+ x y))) 
```

通常 - 您使用特殊形式将*名称*`define`绑定到*值*，该值可以是任何可用的数据类型，包括特定的函数（lambdas）。

 **关于参数和过程定义的更多信息 - 很高兴知道该`.`符号可用于定义具有可变数量参数的过程，例如：

```
(define (f . x) ; here `x` is a list with all the parameters
  (apply + x))

(f 1 2 3 4 5)   ; 0 or more parameters can be passed
=> 15 
```

最后一个技巧`define`（并非在所有解释器中都可用，但在 Racket 中有效）。定义返回过程的过程的快速快捷方式，如下所示：

```
(define (f x)
  (lambda (y)
    (+ x y))) 
```

...这相当于这个，更短的语法：

```
(define ((f x) y)
  (+ x y))

((f 1) 2)
=> 3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T21:39:40.433

是的，`strat0`通过`limit`是`play-loop-iter`函数的参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T04:06:21.653

定义的一般形式是：

```
(define (desired-name-of-procedure item-1 item-2 item-3 ... item-n) 
        (; what to do with the items)) 
```

解释 , 行为的另一种方法`define`是用“组合方式”和“抽象方式”来解释。

[A]简单**的组合**方式：

语法`(item-1 item-2 item-3 ... ... item-n)`是 Scheme（和一般的 Lisp）提供的基本组合方式。

*   所有代码都是使用上述模式表示的列表
*   第一个（最左边的）项目始终被视为运算符
*   括号强制运算符的应用...最左边的项目需要接受后面的所有项目，作为参数

[B]**抽象的手段**很简单；一种命名事物的方法。

一个例子将展示这一切如何融入`define`原始的想法......

* * *

**`define`示例——自下而上到达**

考虑这个表达式：

```
(lambda (x y) (* x y)) 
```

用简单的英语，上面的表达式翻译为“创建一个接受两个参数并返回其乘积的值的*无名过程”。*请注意，这会生成一个*无名*过程。

更准确地说，**在*组合方式***方面，Scheme 为我们提供了关键字`lambda`作为创建用户定义过程的原始运算符。

最左边的项目 -- -- 被`lambda`传递的项目`(x y)`和`(* x y)`作为参数，并且操作员应用程序规则强制`lambda`对项目做一些事情。

`lambda`内部定义的方式会导致它解析 list `(x y)`，并将`x`和`y`作为参数传递给 list `(* x y)`，这假定用户定义了遇到参数时`lambda`要做什么。任何分配给并将按照规则处理的值。`x``y``x``y``(* x y)`

输入，**抽象的手段**......

假设我想在我的程序的几个地方引用这种类型的乘法，我可能会像这样调整上面的 lambda 表达式：

```
(define mul-two-things (lambda (x y) (* x y))) 
```

`define`将 mul-two-things 和 lambda 表达式作为参数，并将它们*“绑定”*在一起。现在 Scheme 知道`mul-two-things`应该与一个过程相关联，以获取两个参数并返回它们的乘积。

碰巧，命名过程的要求非常普遍，并提供了如此强大的表达能力，Scheme 提供了一个看起来更简洁的快捷方式来完成它。

就像@oscar-lopez 所说，`define`是Scheme 提供的“特殊形式”，用来命名事物。就 Scheme 的解释器而言，以下两个定义是相同的：

```
(define (mul-two-things x y) (* x y))
(define mul-two-things (lambda (x y) (* x y)) 
```**

# c++ - c ++链表在函数之间丢失数据

> ID：15959325
> 
> 赞同：2
> 
> 时间：2013-04-11T21:38:08.940
> 
> 标签：c++, pointers, scope

我遇到了指针和范围的问题。我正在尝试维护一组指向对象的指针链表。当我尝试在一个函数中 push_front() 时，它可以工作。但是，如果我尝试在程序的另一部分中遍历列表，则列表不再包含任何数据，并且我的指针是错误的。

这是我的 parseCommands 函数的一部分。问题是调用 printList 时：

```
 Administrator *adminPtr = new Administrator(); // create new Administrator pointer

                    //local variables...
                    string adminName;   //administrator's name
                    int adminMNum;  //administrator's M Number
                    string adminEmail;  //administrator's email address
                    string adminTitle;  // administrator's title

                    // read in & store data for new administrator
                    inData >> adminName; //read in data
                    adminPtr->setName(adminName); //set admin name

                    inData >> adminMNum;
                    adminPtr->setMNum(adminMNum);   // set admin M Number

                    inData >> adminEmail;
                    adminPtr->setEmail(adminEmail); // set admin email address

                    inData >> adminTitle;
                    adminPtr->setTitle(adminTitle); //set admin title
                    // finished storing new administrator info

                    // add Administrator to list
                    cout << "Adding Administrator: " << endl;
                    cout << "in records office adminPtr/newPerson: " << adminPtr << endl;
                    universityList.addPerson(adminPtr);  // call addPerson--hashTable
                    //universityList.printPerson(adminPtr);     // print admin info using polymorphic method
                    //cout << "The load factor (alpha) is: " << universityList.getLength()/universityList.getMaxTableSize() << endl;    // print alpha
                    universityList.printList(adminPtr->getMNum());  // print all items at table[loc]--breaks here
                    cout << endl; 
```

printList 工作正常的 addPerson 函数：

```
template <typename T>
void HashTable<T>::addPerson(T newPerson) { //newPerson is a pointer to a person object
  int loc;  // array location provided by hashFunction
  cout << "in hashtable newPerson: " << newPerson << endl;
  loc = hashFunction(newPerson->getMNum());  // get loc
  table[loc].push_front(&newPerson);  // add to list at table[loc] passing address of pointer to person
  printList(newPerson->getMNum());  // print all items at table[loc]--works here
  size++;   // increment size
  } //end function 
```

printList 函数在 addPerson 中调用时起作用，但在 parseCommands 中不起作用：

```
template <typename T>
void HashTable<T>::printList(searchKeyType key) {   //print list of items held in array location
    int loc = hashFunction(key);    // get array location
    if (table[loc].empty()) {   // if list is empty
        cout << "Can not print person M" << key << " NOT found" << endl << endl; 
    }   //end if empty
  else{
    list<T*>::iterator iter;    // stl iterator
    iter = table[loc].begin();
    cout << "in printList table[loc]begin " << *iter << endl;   //print address of table[loc]begin.()--where iter points
    cout << "in printList item in table[loc]begin " << **iter << endl;  // print address of the pointer that iter points to
    while(iter != table[loc].end()) { // for each item in the list

        (**iter)->print();  // print person info using polymorphic method
        ++iter;
    }   //end for
  } // end else
}   // end printList 
```

打印功能：

```
void Administrator::print()const {  
// print Administrator info
cout << "   " << "Full Name:    " << getName() << endl;
cout << "   " << "M Number :    "<< getMNum() << endl;
cout << "   " << "Email Addr:   " << getEmail() << endl;
cout << "   " << "Title:        "   << getTitle() << endl;
}; // end print function 
```

哈希表类：

```
template<typename T>
class HashTable{
public:
    HashTable(); // constructor
    bool isEmpty()const; //determines if the hash table is empty
    int getLength() const;  // returns (size) number of Persons in table (accessor)
    int getMaxTableSize() const;    // returns tableSize (size of array)
    void addPerson(T person);   // adds new Person 
    void removePerson(searchKeyType key);   // deletes Person from the HashTable
    void printPerson(T person); // prints Person info
    T getNodeItem(int mNumber); //returns person object (accessor)
    void printList(searchKeyType key);  //print list of items held in array location

private:
    int size;   // number of Persons in table
    static const int tableSize = 1; // number of buckets/array size -- planning on using 70001--assuming 35,000 entries at once; largest prime > 2*35000
    list <T*> table[tableSize]; // array of STL lists for chains
    int hashFunction(searchKeyType searchKey);  // hash function to return location (array index) of item
}; //end HashTable class 
```

我将 adminPtr 传递给 addPerson，它似乎将其添加到列表中。为什么当我返回到 parseCommands 函数时会丢失数据？这是堆栈与堆的问题吗？我在某个地方需要“新”吗？那里有几行额外的行，我在其中打印出指针的地址，试图弄清楚发生了什么。

这是一个我无法解决的类的编程问题。我们必须使用一组 STL 链表来模拟哈希表。我们不允许使用向量、映射等。该程序涉及一个抽象基类（Person）和一个派生类（Administrator 等）和一个模板化的哈希表类。还有一个类（RecordsOffice）保存哈希表。

```
class RecordsOffice {
public:
    RecordsOffice();    // default constructor
    void parseCommands(string fileName);    // function to parse commands from a file to maintain the StudentList

private:
    HashTable <Person*> universityList; // creates empty hashtable
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:45:44.767

问题出在这两个地方。

```
universityList.addPerson(adminPtr); 

//... 
```

您正在传递 adminPtr 的副本。

```
template <typename T>
void HashTable<T>::addPerson(T newPerson) { //newPerson is a pointer to a person object
// ...
  table[loc].push_front(&newPerson);  // add to list at table[loc] passing address of pointer to person
// ....
  } 
```

`newPerson`是 的局部变量`addPerson`。当它返回时，它不再有效。但是您正在将其地址添加到表中。

问题是

```
list <T*> table[tableSize]; 
```

正在存储指向 Person 指针的指针。

我不认为通过引用传递也可以解决问题。因为那时你将依赖这里自动创建的指针。

```
Administrator *adminPtr = new Administrator(); 
```

**`adminPtr`指针指向的将保留，但不会保留它`adminPtr` 本身**。所以你不能依赖它的地址（*除非你仍然在创建它的同一个函数中*）。解决它的一种可能方法是动态分配 adminPtr 本身。

```
Administrator **adminPtr = new Administrator*;
adminPtr = new Administrator(); 
```

但也许你应该修改要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T21:46:48.730

你的表是这样声明的：

```
list <T*> table[tableSize]; 
```

这意味着它包含的任何指针都需要动态分配，或者需要在容器的整个生命周期内保持在范围内。不是这种情况。在您的函数`addPerson`中，您添加一个局部变量的地址：

```
table[loc].push_front(&newPerson); 
```

您应该执行以下操作之一：

1.  `list<T>`将表更改为对象数组。
2.  动态复制数据。*例如* `table[loc].push_front(new T(newPerson))`

因为这是一个列表，所以我会选择选项 1，因为该列表无论如何都会在本地复制，并且您以后不必清理指针。第三种选择是使用`list<unique_ptr<T> >`或类似的。

# html - CSS 菜单 - 活动链接

> ID：15959331
> 
> 赞同：0
> 
> 时间：2013-04-11T21:38:31.903
> 
> 标签：html, css

使用这个 CSS 代码，我怎样才能使它有一个活动/当前类？

```
#cssmenu *{
    z-index: 999
}
#cssmenu ul { margin: 0; padding: 0; text-align: center; }
#cssmenu li { margin: 0; padding: 0;}
#cssmenu a { margin: 0; padding: 0;}
#cssmenu ul {list-style: none;}
#cssmenu a {text-decoration: none;}
#cssmenu {height: 50px; background-color: #f36f25; box-shadow: 0px 2px 3px rgba(0,0,0,.4);}
#cssmenu > ul > li {
    display: inline-block;
    margin-left: 15px;
    position: relative;
}
#cssmenu > ul > li > a {
    color: #ffffff;
    font-size: 15px;
    line-height: 50px;
    padding: 16px 20px;
-webkit-transition: color .15s;
   -moz-transition: color .15s;
     -o-transition: color .15s;
        transition: color .15s;
}
#cssmenu > ul > li > a:hover {color: #ffffff; background-color:#666666; }
#cssmenu > ul > li > ul {
    opacity: 0;
    visibility: hidden;
    padding: 16px 0 20px 0;
    background-color: #eeeeee;
    text-align: left;
    position: absolute;
    top: 30px;
    left: 50%;
    margin-left: -90px;
    width: 180px;
-webkit-transition: all .3s .1s;
   -moz-transition: all .3s .1s;
     -o-transition: all .3s .1s;
        transition: all .3s .1s;
-webkit-border-radius: 5px;
   -moz-border-radius: 5px;
        border-radius: 5px;
-webkit-box-shadow: 0px 1px 3px rgba(0,0,0,.4);
   -moz-box-shadow: 0px 1px 3px rgba(0,0,0,.4);
        box-shadow: 0px 1px 3px rgba(0,0,0,.4);
}
#cssmenu > ul > li:hover > ul {
    opacity: 1;
    top: 50px;
    visibility: visible;
}
#cssmenu > ul > li > ul:before{
    content: '';
    display: block;
    border-color: transparent transparent rgb(250,250,250) transparent;
    border-style: solid;
    border-width: 10px;
    position: absolute;
    top: -20px;
    left: 50%;
    margin-left: -10px;
}
#cssmenu > ul ul > li { position: relative;}
#cssmenu ul ul a{
    color: #000000;
    font-size: 13px;
    background-color: #eeeeee;
    padding: 5px 8px 7px 16px;
    display: block;
-webkit-transition: background-color .1s;
   -moz-transition: background-color .1s;
     -o-transition: background-color .1s;
        transition: background-color .1s;
}
#cssmenu ul ul a:hover {background-color: #f36f25;}
#cssmenu ul ul ul {
    visibility: hidden;
    opacity: 0;
    position: absolute;
    top: -16px;
    left: 206px;
    padding: 16px 0 20px 0;
    background-color: #eeeeee;
    text-align: left;
    width: 160px;
-webkit-transition: all .3s;
   -moz-transition: all .3s;
     -o-transition: all .3s;
        transition: all .3s;
-webkit-border-radius: 5px;
   -moz-border-radius: 5px;
        border-radius: 5px;
-webkit-box-shadow: 0px 1px 3px rgba(0,0,0,.4);
   -moz-box-shadow: 0px 1px 3px rgba(0,0,0,.4);
        box-shadow: 0px 1px 3px rgba(0,0,0,.4);
}
#cssmenu ul ul > li:hover > ul { opacity: 1; left: 196px; visibility: visible;}
#cssmenu ul ul a:hover{
    background-color: #f36f25;
    color: rgb(240,240,240);
} 
```

小提琴是这里的完整菜单：http: [//jsfiddle.net/eza2Z/](http://jsfiddle.net/eza2Z/)

此外，在子菜单上有一个向上的小箭头 - 我怎样才能将它的颜色更改为与子菜单上的背景相同的颜色（#eeeeee）

还有一件事:)

当您将鼠标悬停在链接上并显示子菜单时，由于某种原因，子菜单的顶部和底部会在其余部分之后大约 1-2 秒出现

帮助将不胜感激:)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T21:56:22.933

```
#cssmenu > ul > li.active {
  /* Add styles for currently "active" list items here */
} 
```

如果您希望向下箭头具有与其父级相同的背景，您可以在背景属性上使用继承规则，如下所示：

```
#myArrow {
  background-color: inherit; /* Will inherit from parent */
} 
```

# extjs - 如何正确管理 Ext-js 4.2 中的 PagingToolbar？

> ID：15959332
> 
> 赞同：2
> 
> 时间：2013-04-11T21:38:35.330
> 
> 标签：extjs, grid, extjs4, paging, toolbar

js 4.2），当我在使用代理（ajax）的网格上管理工具栏时遇到了一些问题。

```
 this.grid  = new Ext.create('Ext.grid.Panel',{
            region      : 'center',
            loadMask    : true,
            layout      : 'fit',
            store       : 'Contenedores',

            tbar: [
                   { text: 'Exportar Excel' },
                   '->',
                   { text:'Buscar',     handler: this.buscar,   scope: this},
                   '-',
                   { text:'Limpiar',    handler: this.limpiar,  scope: this}
            ],
            columns : [],

            bbar : new Ext.create('Ext.toolbar.Paging',{
                store: 'Contenedores', displayInfo: true,
                displayMsg  : 'Registros {0} - {1} de {2}',
                emptyMsg    : 'No hay registros'
            })
        }); 
```

我遇到的问题是：

*   当我调用 store.load() 时，pagingToolbar 不会阻塞，因此我可以单击下一页，当加载网格时，我在 pagingtoolbar 上得到不正确的页面。在 Ext js 3 上，当我在网格上设置 loadMask: true 时，当我调用 store.load() 时，分页工具栏被锁定。
*   如果我在类似 2 或更高的页面上并调用 store.load()，则 pagingToolbar 在加载后不会将当前页面标签更新为 1。
*   我需要实现一个清理/重置按钮，那么如何清理分页工具栏上的标签。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T22:19:00.297

If an expected result of doing a `store.load()` is to go the the first page in your grid, you can simply call `moveFirst()` on your paging toolbar, rather than loading on the store directly. Example:

```
var pagingtb = Ext.create('Ext.toolbar.Paging',{
                store: 'Contenedores', 
                displayInfo: true,
                displayMsg  : 'Registros {0} - {1} de {2}',
                emptyMsg    : 'No hay registros'
            });

this.grid  = Ext.create('Ext.grid.Panel',{
            region      : 'center',
            loadMask    : true,
            layout      : 'fit',
            store       : 'Contenedores',

            tbar: [
                   { text: 'Exportar Excel' },
                   '->',
                   { text:'Buscar',     handler: this.buscar,   scope: this},
                   '-',
                   { text:'Limpiar',    handler: this.limpiar,  scope: this}
            ],
            columns : [],

            bbar : pagingtb 
        });

pagingtb.moveFirst(); 
```

Also, you don't need the keyword `new` before `Ext.create(...)` --> `create()` returns an instance of the specified class.

If you need your store to send extra parameters, you can set them on the proxy before calling `moveFirst()` or `doRefresh()` on your toolbar. Example:

```
store.getProxy().extraParams.someParameter1 = 'some value';
store.getProxy().extraParams.someParameter2 = 'another value';
pagingtb.doRefresh(); // or .moveFirst() if you want the grid to 
                      // move to the first page after load 
```

# c - 命令上的符号查找错误

> ID：15959333
> 
> 赞同：0
> 
> 时间：2013-04-11T21:38:38.900
> 
> 标签：c

我正在尝试在键盘驱动程序中执行一些代码，看起来像[这样](http://pastebin.com/NW1fH7e2)的第 3 方软件可以运行我在插件文件中尝试执行的命令，该插件文件与命令需要发送到的守护进程一起编译。命令看起来像这样。

```
g15_send_cmd (g15screen_fd,G15DAEMON_MKEYLEDS,mled_state); 
```

[这是](http://pastebin.com/Kkdi2HUH)我正在使用并尝试在其中运行命令的代码（它与守护进程一起编译为插件。在未编译的源代码中

“g15daemon/plugin/g15_plugin_uinput.c”

定义命令的文件位于（链接） [“g15daemon/libg15daemon_client/g15daemon_clinet.h”](http://pastebin.com/ctB20e6x)

而g15macro（第3个软件）是从守护进程外部运行的，出于各种原因我不想（而且几乎不能）使用它，一个是按下键时执行命令的速度。

所以程序像这样编译，似乎没有错误。但如果我上面指定的代码激活，驱动程序（守护进程）崩溃给

> g15daemon：符号查找错误：/usr/lib/g15daemon/1.9.5.3/plugins/g15plugin_uinput.so：未定义符号：g15_send_cmd

我做错了什么或者我在这里错过了什么？（如果插件文件中的代码被那个 switch 命令弄得很丑，我很抱歉，但我不知道如何做得更好，因为我对 C 不太了解，我身后只有 Py和 C#)

**编辑：给出了解决方案**

但我不知道如何添加链接器标志，因为它链接到正在编译的程序的一部分，它甚至可以工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T21:41:44.957

您忘记将插件与`g15daemon_client`库链接。修复它的简单方法是添加`-lg15daemon_client`到链接器标志。

# python - 为什么这个 python 函数不起作用？

> ID：15959342
> 
> 赞同：-4
> 
> 时间：2013-04-11T21:39:16.143
> 
> 标签：python, function, types

为什么这行不通？？？

```
def distance_from_zero(x):        
    if type(x) == int or float:
        return abs(x) 
    else:
        return "Not an integer or float!"

print distance_from_zero(2050) 
```

然而，这是相同的正确答案！

```
def distance_from_zero(x):    

    if type(x) == int or type(x) == float:
        return abs(x) 
    else:
        return "Not an integer or float!"

print distance_from_zero(2050) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T21:40:22.073

这些*不是*一回事。比较这两行：

```
if type(x) == int or float:

if type(x) == int or type(x) == float: 
```

这就是区别。

第一个是检查`type(x) == int`，然后获取结果并`or`用 ing 它`float`，所以它会返回`True`if`x`是 an `int`，`float`如果它是其他任何东西。由于两者`True`和`float`都是真实值，因此该`if`部分将永远发生，而`else`永远不会发生。

第二个是检查`type(x) == int`, 和`type(x) == float`, 并`or`一起检查它们。所以，它会返回`True`if `x`is an`int`或 if `x`is a `float`，`False`如果它是其他任何东西。

您可以使用`in`运算符简化代码：

```
if type(x) in (int, float) 
```

但它仍然不是很好的 Python。如果您真的想进行类型切换，您几乎总是希望使用`isinstance`而不是比较类型：

```
if isinstance(x, (int, float)): 
```

这意味着如果你的代码通过了，比如说，一个`int`. 但它仍然不适用于，例如，包装器`int`，或一些定制设计的整数类型，甚至（在 Python 2.x 中） a `long`。所以，一个更好的版本是：

```
if isinstance(x, numbers.Real) 
```

`float`这将为、`int`、`long`和各种其他内置类型、这些类型的任何子类以及向`numbers.Real`ABC注册自身的任何内容返回 True 。

但实际上，您通常根本不想进行类型切换。Python 是围绕鸭子类型设计的。您在这里关心的是您是否可以将其成功传递给`abs`. 只要你能做到，谁在乎它实际上是什么特定类型？所以：

```
try:
    return abs(x)
except TypeError:
    return "Not a number!" 
```

或者，更好的是，与其捕获异常并返回一个字符串（这意味着任何调用者都必须同时处理数字和字符串，等等），而是让异常传播：

```
return abs(x) 
```

# ruby - 自定义日志未写入

> ID：15959345
> 
> 赞同：2
> 
> 时间：2013-04-11T21:39:21.593
> 
> 标签：ruby, ruby-on-rails-3, macos, logging

`log.auto_flushing`Rails在 3.2 中已弃用。使用`file.sync`是推荐的解决方案。

我有一个由初始化程序设置的自定义记录器文件，并订阅记录到该记录器的活动支持通知。

通知由 rails 应用程序和使用 cron 运行的 rake 任务触发。

使用 时`log.auto_flushing = true`，一切都按预期工作，并且日志文件包含 rails 应用程序和运行时的 cron 任务的输出。

当我切换到 时`file.sync = true`，奇怪的事情发生了。打开日志的第一个进程可以对其进行写入，但是一旦另一个进程启动，就不会记录任何其他内容。直到被 newsyslog 轮换后才会写入日志文件，此时第一个进程能够在停止之前记录几行。

我有两个问题：

*   `config/initializers`设置自定义日志的正确位置是否正确？
*   我需要做些什么来允许多个进程访问同一个文件吗？

作为参考，这是我的[config/notifications.rb](https://gist.github.com/BM5k/5367277.js "我的初始化器")，具有两种配置。

# ios - XCode 4.3，“无法为未定义的类定义类别”使用多个标题

> ID：15959346
> 
> 赞同：2
> 
> 时间：2013-04-11T21:39:21.650
> 
> 标签：ios, objective-c, xcode, xcode4.3

直到最近，我有一个项目在 XCode 中编译得很好；但是现在我正在用以下内容挠头：

> 无法为未定义的类“myClass”定义类别

我有一个通过类别扩展另一个标题的标题，如下所示：

我的类.h

```
@interface myClass:UIView<...>
@property ....
-(void) method....
@end 
```

myClass+myCategory.h

```
#import "myClass.h"
@interface myClass (MyCategory)
-(void) method2...
@end 
```

我的班级.m

```
#import "myClass.h"
#import "myClass+myCategory.h"
... 
```

我从搜索以及该项目编译和运行的历史中的理解是，这应该是有效的 Objective-C，这导致我使用 XCode。这里有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-26T17:01:30.150

这里的问题是您的编译器在看到定义或引用类别的文件之前就运行到类别头中。

D Carney 说将导入添加到预编译头文件会有所帮助，但他在导入什么方面弄错了。您希望确保您的编译器在类别之前看到您的基类标头，以便它知道该类别适用于哪个类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T22:53:42.363

好吧，我对上述问题没有任何解释。我创建了一个新项目并将所有源文件重新添加到其中。现在编译没有任何问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T15:37:11.010

我遇到了同样的问题。事实证明，您需要将类别包含添加到您的`...-Prefix.pch`文件中：

```
#ifdef __OBJC__
    #import <UIKit/UIKit.h>
    #import <Foundation/Foundation.h>
    #import <CoreData/CoreData.h>
    #import "myClass+myCategory.h"
#endif 
```

# c# - Windows 商店应用程序将弹出菜单绑定到列表

> ID：15959347
> 
> 赞同：1
> 
> 时间：2013-04-11T21:39:23.187
> 
> 标签：c#, xaml, windows-8, windows-store

我正在制作一个作为 Windows 应用商店应用程序的小型战斗游戏，并且我正在使用 C# 和 XAML。

主要玩家有一个清单列表，里面装满了敌人掉落的字符串。玩家可以在单击会导致弹出菜单出现的按钮时选择库存中的项目。

我遇到的问题是我无法弄清楚如何用敌人掉落的新项目动态填充菜单。有没有办法将弹出菜单数据绑定到玩家库存列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-18T11:10:57.587

下面是一个数据绑定弹出菜单的示例`ListView`。我不知道你的敌人的代码是什么样的，但你应该能够`PopupMenu`使用类似的东西生成一个

XAML

```
 <ListBox>
        <ListBoxItem Tag="chalk,cheese,beets" RightTapped="ListBoxItem_RightTapped">player one</ListBoxItem>
        <ListBoxItem Tag="vodka,ak ammo" RightTapped="ListBoxItem_RightTapped">player two</ListBoxItem>
    </ListBox> 
```

C＃

```
private async void ListBoxItem_RightTapped(object sender, RightTappedRoutedEventArgs e)
{
    PopupMenu menu = new PopupMenu();

    string[] items = ((ListBoxItem)sender).Tag.ToString().Split(',');

    foreach (string item in items)
    {
        menu.Commands.Add(new UICommand(item, (command) =>
        {
            // do stuff
        }));
    }
    var chosenCommand = await menu.ShowAsync(e.GetPosition(this));
    // do something with chosen command value
} 
```

# asp.net-mvc - 为什么 HtmlHelper 会跳过验证属性

> ID：15959349
> 
> 赞同：0
> 
> 时间：2013-04-11T21:39:39.163
> 
> 标签：asp.net-mvc, asp.net-mvc-3, validation, jquery-validate

为什么`@Html.TextBoxFor`和其他助手会跳过 jquery.validation 属性并创建没有这些的元素？我错过了一些参考资料还是什么？这是 MVC 3.0 项目。

如果我像这样手动添加它们：

```
@Html.TextBoxFor(x => x.Name, 
       new { data_val="true", data_val_required="Need that field" }) 
```

然后不显眼的验证工作。但它假设构建元素并根据模型的`DataAnnotations`. 模型在那里，表单主体内的文本框，但仍然无法正常工作。会是什么呢？

更新：`UnobtrusiveJavaScriptEnabled`设置`true`为`web.config`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:55:23.620

请确保您的 web.config 文件中有这两行

```
<appSettings>
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
</appSettings> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T21:57:46.773

要使不显眼的验证正常工作，您需要确保将`UnobtrusiveJavaScriptEnabled`其设置为`true`您的`Web.config`并且您已包含以下 3 个脚本：

*   jQuery (~/Scripts/jquery-1.8.2.js)
*   jQuery 验证 (~/Scripts/jquery.validate.js)
*   使用 jQuery Validate (~/Scripts/jquery.validate.unobtrusive.js) 进行不显眼的客户端验证的 MVC 插件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T22:02:21.867

1.如果文本框是通过ajax加载的，它可能不会被解析为不显眼的验证。2.检查呈现的html是否存在文本框的data-val-required属性以确定它是服务器端还是客户端问题。

# testing - QuickCheck：生成平衡样本的嵌套数据结构的任意实例

> ID：15959357
> 
> 赞同：28
> 
> 时间：2013-04-11T21:40:15.790
> 
> 标签：testing, haskell, data-structures, quickcheck

`Arbitrary`tl; dr：如果您的数据类型允许太多嵌套，您如何编写不会爆炸的实例？你如何保证这些实例产生你的数据结构的真正随机样本？

我想生成随机树结构，然后在我用我的库代码破坏它们之后测试这些结构的某些属性。（注意：我正在编写子类型算法的实现，即给定类型的层次结构，类型 A 是类型 B 的子类型。这可以任意复杂化，包括对层次结构的多重继承和初始化后更新. 不支持这两种方法的经典方法是舒伯特编号，我知道的最新结果是 Alavi et al. 2008。）

让我们以玫瑰树为例，如下`Data.Tree`：

```
data Tree a = Node a (Forest a)
type Forest a = [Tree a] 
```

Arbitray 的一个非常简单（并且不要在家尝试）的实例是：

```
instance (Arbitrary a) => Arbitrary (Tree a) where
    arbitrary = Node <$> arbitrary <$> arbitrary 
```

由于根据类型约束`a`已经有一个实例，并且将有一个，因为它也是一个实例，这看起来很简单。它不会（通常）由于非常明显的原因而终止：由于它生成的列表任意长，结构变得太大，并且它们很可能不适合内存。甚至更保守的方法：`Arbitrary``Forest``[]`

```
arbitrary = Node <$> arbitrary <*> oneof [arbitrary,return []] 
```

出于同样的原因，再次无法正常工作。可以调整 size 参数，以降低列表的长度，但即使这样也不能保证*终止*，因为它仍然是多个连续的掷骰子，结果可能非常糟糕（我*想要*奇数节点 100孩子们。）

这意味着我需要限制*整个树*的大小。这不是那么直截了当。`unordered-containers`很简单：只需使用`fromList`. 这在这里并不容易：如何将列表随机变成一棵树，并且不会以某种方式产生偏见（即不支持左分支或非常左倾的树。）

列表中的某种广度优先构造（`Data.Tree`由列表提供的功能都是预购的）会很棒，我想我可以写一个，但结果证明它不是微不足道的。由于我现在使用的是树，但稍后会使用更复杂的东西，我想我可能会尝试找到一个更通用、更简单的解决方案。有没有，或者我将不得不求助于编写自己的非平凡`Arbitrary`生成器？在后一种情况下，我实际上可能只是求助于单元测试，因为这看起来工作量太大。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-11T22:20:29.403

使用[尺寸](http://hackage.haskell.org/packages/archive/QuickCheck/2.1.0.1/doc/html/Test-QuickCheck-Gen.html#v:sized)：

```
instance Arbitrary a => Arbitrary (Tree a) where
arbitrary = sized arbTree

arbTree :: Arbitrary a => Int -> Gen (Tree a)
arbTree 0 = do
    a <- arbitrary
    return $ Node a []
arbTree n = do
    (Positive m) <- arbitrary
    let n' = n `div` (m + 1)
    f <- replicateM m (arbTree n')
    a <- arbitrary
    return $ Node a f 
```

（改编自[QuickCheck 演示文稿](http://www.st.cs.uni-saarland.de/edu/seminare/2005/advanced-fp/slides/meiser.pdf)）。

PS也许这会产生*过度*平衡的树......

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-02T10:51:27.520

您可能想使用在 Haskell Symposium 2012 上发表的论文“Feat:Functional Enumeration of Algebraic Types”中介绍的库。它在 Hackage 上作为 testing-feat，介绍它的演讲视频可在此处获得：[http:// /www.youtube.com/watch?v=HbX7pxYXsHg](http://www.youtube.com/watch?v=HbX7pxYXsHg)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-04-10T13:11:37.643

正如 Janis 所提到的，您可以使用包[testing-feat](https://hackage.haskell.org/package/testing-feat)，它创建任意代数数据类型的枚举。这是为给定大小的所有树创建无偏均匀分布生成器的最简单方法。

以下是您将它用于玫瑰树的方法：

```
import Test.Feat (Enumerable(..), uniform, consts, funcurry)
import Test.Feat.Class (Constructor)
import Data.Tree (Tree(..))
import qualified Test.QuickCheck as QC

-- We make an enumerable instance by listing all constructors
-- for the type. In this case, we have one binary constructor:
-- Node :: a -> [Tree a] -> Tree a
instance Enumerable a => Enumerable (Tree a) where
    enumerate = consts [binary Node]
      where
        binary :: (a -> b -> c) -> Constructor c
        binary = unary . funcurry

-- Now we use the Enumerable instance to create an Arbitrary
-- instance with the help of the function:
-- uniform :: Enumerable a => Int -> QC.Gen a
instance Enumerable a => QC.Arbitrary (Tree a) where
    QC.arbitrary = QC.sized uniform
    -- QC.shrink = <some implementation> 
```

该`Enumerable`实例也可以使用 TemplateHaskell 自动生成：

```
deriveEnumerable ''Tree 
```

# php - php图片上传安全防范黑客

> ID：15959360
> 
> 赞同：2
> 
> 时间：2013-04-11T21:40:24.497
> 
> 标签：php, html, security

以下代码有多安全，以防每个人都可以使用它：

```
$file = $_FILES["file"]['tmp_name'];
$contents = file_get_contents($file);
$base64 = base64_encode($contents);
<img src="data:image/png;base64,'.$base64.'"> 
```

如果这对黑客等不安全，我应该如何保护它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T22:27:46.767

一个 base64 编码字符串的字符集`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwx yz0123456789+/`和一个`=`符号作为最后一个字节过滤器。

因此，无论文件内容是什么，您都在输入它的 base64 编码值，即使没有转义，浏览器也会在`img`标签中显示给定的字符串。

但是，您需要确保字符串实际编码为图像。

顺便说一句，通过在每个步骤中分配一个新变量，您正在为此任务浪费*大量服务器内存。*

# php - 解析错误：语法错误，意外 $end

> ID：15959362
> 
> 赞同：-1
> 
> 时间：2013-04-11T21:40:42.973
> 
> 标签：php

我正在尝试将 html 代码放入变量中，无法理解我在这里做错了什么。

使用以下代码，我得到

```
Parse error: syntax error, unexpected $end 
```

编码

```
if (!empty($VIDEO_META)){
        $og_video = <<<HTML
                <meta property="og:type" content="video" />

                <meta property="og:video" content="{$CURRENT_URL}"/>
                <meta property="og:video:secure_url" content="{$CURRENT_URL}"/>

                <meta name="og:video:height" content="280" />
                <meta name="og:video:width" content="420" />
                <meta name="og:video:type"  content="application/x-shockwave-flash" />
        HTML;
}else{
        $og_video = <<<HTML
                <meta property="og:type"  content="website" />
        HTML;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T21:46:01.910

HereDOC`( $og_video = <<<HTML )`是错误的，它必须是一行的直接开始。检查：[http](http://php.net/manual/en/language.types.string.php) ://php.net/manual/en/language.types.string.php了解详情。还要删除 HTML 之后的任何空格，这也会导致错误。

否则，它确实没有任何问题，应该可以很好地工作。

# c# - WPF 多窗口应用程序。确定子窗口的尺寸

> ID：15959365
> 
> 赞同：0
> 
> 时间：2013-04-11T21:40:48.490
> 
> 标签：c#, .net, wpf, windows, mvvm

我在 WPF 中有一个多窗口应用程序，其中我的主应用程序窗口是不可见的（Visibility=Collapsed），其中包含可见的子窗口。应用程序按需创建子窗口。我需要一种算法来确定新创建的子窗口的坐标和尺寸。显然，新的子窗口不应（完全）覆盖另一个子窗口。WPF 是否提供任何支持来实现这种逻辑？或者，我必须自己做所有事情。我想这将是很多工作。我正在寻找的行为与 Windows 7 中的粘滞便笺行为非常相似。

我的部分代码将帮助您真正理解我的意思：

```
public void ViewModelsCollectionChanged(object sender, 
                                        NotifyCollectionChangedEventArgs e)
{
    if (e.Action == NotifyCollectionChangedAction.Add)
    {
        foreach (ViewModel viewModel in e.NewItems)
        {
            View view = new View(viewModel);
            view.Owner = SleekNoteUI.App.Current.MainWindow;
            ...
        }
    }
} 
```

# java - @AttributeOverride 不起作用

> ID：15959369
> 
> 赞同：0
> 
> 时间：2013-04-11T21:41:07.087
> 
> 标签：java, hibernate, jpa

我有代码

```
@MappedSuperclass
@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)
@XmlAccessorType(XmlAccessType.FIELD)
public abstract class AbstractModel implements Serializable, Comparable<AbstractModel> {

    private static final long serialVersionUID = -4479726024447228668L;

    @Id
    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "idgen")
    private Long              id;
    ...

@MappedSuperclass
@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)
@XmlAccessorType(XmlAccessType.FIELD)
public abstract class AbstractHistoricModel extends AbstractModel {

    private static final long     serialVersionUID = -3596885940998632065L;

    @Column(name = "pblc_id")
    ...

@Entity
@SequenceGenerator(initialValue = 0, name = "idgen", sequenceName = "abstract_claim_type_seq")
@XmlAccessorType(XmlAccessType.FIELD)
public class AbstractClaimType extends AbstractHistoricModel {

    private static final long serialVersionUID = -3840541568639732203L;

    @Column(name = "nam")
    private String            name;

    public AbstractClaimType() { super(); }

    @Field
    public String getName() {
       return name;
    }

    public void setName(String name) {
       this.name = name;
    }
    ...

@Entity
@Table("retr_clm_mthd")
@SequenceGenerator….
@FieldModel
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
@AttributeOverride(name="nam", column=@Column(name="retr_clm_mthd_nam", length=255))  
public class Retrospective extends AbstractClaimType {
... 
```

当我在内存中创建数据库进行测试时

```
2013-04-11 14:15:28,445 ERROR (org.hibernate.tool.hbm2ddl.SchemaExport:org.hibernate.tool.hbm2ddl.SchemaExport.execute(SchemaExport.java:386))  - HHH000231: Schema export unsuccessful

org.hibernate.tool.hbm2ddl.ImportScriptException: Error during statement execution (file: '/import.sql')

Caused by: java.sql.SQLException: Column not found: RETR_CLM_MTHD_NAM in statement 
```

我看 scriptdb 有

```
CREATE MEMORY TABLE RETR_CLM_MTHD(….,NAM VARCHAR(255),….) 
```

为什么不`retr_clm_mthd_nam`呢？怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T06:10:56.807

您在超类中没有任何名为“nam”的属性。你有一个名为“名字”的人：

```
private String name; 
```

# c++ - C++：将任意数量的参数作为参数传递函数

> ID：15959374
> 
> 赞同：9
> 
> 时间：2013-04-11T21:41:40.640
> 
> 标签：c++, templates, function-pointers, functor

长期浏览器，第一次在这里提问。我编写了许多脚本来执行各种 1D 数值积分方法并将它们编译到库中。我希望该库在能够集成的方面尽可能灵活。

这里我包含一个示例：一个非常简单的梯形规则示例，其中我将指针传递给要集成的函数。

```
// Numerically integrate (*f) from a to b
// using the trapezoidal rule.
double trap(double (*f)(double), double a, double b) {
  int N = 10000;
  double step = (b-a)/N;
  double s = 0;
  for (int i=0; i<=N; i++) {
    double xi = a + i*step;
    if (i == 0 || i == N) { s += (*f)(xi); }
    else { s += 2*(*f)(xi); }
  }
  s *= (b-a)/(2*N);
  return s;
} 
```

这对于只接受一个参数的简单函数非常有用。例子：

```
double a = trap(sin,0,1); 
```

但是，有时我可能想要整合具有更多参数的东西，例如二次多项式。在此示例中，系数将由用户在积分之前定义。示例代码：

```
// arbitrary quadratic polynomial
double quad(double A, double B, double C, double x) {
  return (A*pow(x,2) + B*x + C);
} 
```

理想情况下，我可以做这样的事情来整合它：

```
double b = trap(quad(1,2,3),0,1); 
```

但显然这行不通。我通过定义一个将系数作为成员并将感兴趣的函数作为成员函数的类来解决这个问题：

```
class Model {
  double A,B,C;
public:
  Model() { A = 0; B = 0; C = 0; }
  Model(double x, double y, double z) { A = x; B = y; C = z; }
  double func(double x) { return (A*pow(x,2)+B*x+C); }
}; 
```

但是，然后我的集成函数需要更改以将对象而不是函数指针作为输入：

```
// Numerically integrate model.func from a to b
// using the trapezoidal rule.
double trap(Model poly, double a, double b) {
  int N = 10000;
  double step = (b-a)/N;
  double s = 0;
  for (int i=0; i<=N; i++) {
    double xi = a + i*step;
    if (i == 0 || i == N) { s += poly.func(xi); }
    else { s += 2*poly.func(xi); }
  }
  s *= (b-a)/(2*N);
  return s;
} 
```

这很好用，但生成的库不是很独立，因为它需要在某处定义类模型。此外，理想情况下，模型应该能够从用户更改为用户，因此我不想在头文件中修复它。我尝试使用函数模板和仿函数来让它工作，但它不是很独立，因为模板应该在头文件中定义（除非你想显式实例化，我不这样做）。

所以，总结一下：有什么方法可以让我的集成函数接受具有可变数量输入参数的任意一维函数，同时仍然保持足够的独立性，可以将它们编译成一个独立的库？提前感谢您的建议。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T21:47:23.673

您需要的是模板和`std::bind()`（`boost::bind()`如果您买不起 C++11，则需要模板）。例如，这就是你的`trap()`函数将变成的样子：

```
template<typename F>
double trap(F&& f, double a, double b) {
  int N = 10000;
  double step = (b-a)/N;
  double s = 0;
  for (int i=0; i<=N; i++) {
    double xi = a + i*step;
    if (i == 0 || i == N) { s += f(xi); }
//                               ^
    else { s += 2* f(xi); }
//                 ^
  }
  s *= (b-a)/(2*N);
  return s;
} 
```

请注意，我们是从函数指针泛化并允许传入任何类型的*可调用对象*（例如，包括 C++11 lambda）。因此，调用用户提供的函数的语法不是`*f(param)`（仅适用于对于函数指针），但只是`f(param)`.

关于灵活性，让我们考虑两个硬编码函数（并假装它们是有意义的）：

```
double foo(double x)
{
    return x * 2;
}

double bar(double x, double y, double z, double t)
{
    return x + y * (z - t);
} 
```

您现在可以直接在输入中提供第一个函数`trap()`，或者将第二个函数的最后三个参数绑定到某个特定值的结果（您可以自由选择要绑定的参数）：

```
#include <functional>

int main()
{
    trap(foo, 0, 42);
    trap(std::bind(bar, std::placeholders::_1, 42, 1729, 0), 0, 42);
} 
```

当然，您可以使用 lambda 获得更大的灵活性：

```
#include <functional>
#include <iostream>

int main()
{
    trap(foo, 0, 42);
    trap(std::bind(bar, std::placeholders::_1, 42, 1729, 0), 0, 42);

    int x = 1729; // Or the result of some computation...
    int y = 42; // Or some particular state information...
    trap([&] (double d) -> double
    {
        x += 42 * d; // Or some meaningful computation...
        y = 1; // Or some meaningful operation...
        return x;
    }, 0, 42);

    std::cout << y; // Prints 1
} 
```

您还可以传递您自己的有状态函子 tp `trap()`，或一些包装在对象中的可调用`std::function`对象（或者`boost::function`如果您买不起 C++11）。选择范围相当广泛。

这是一个[活生生的例子](http://liveworkspace.org/code/3kW04t%24171)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T23:18:21.453

你想做的是让这成为可能

```
trap( quad, 1, 2, 3, 0, 1 ); 
```

在 C++11 中，我们有别名模板和可变参数模板

```
template< typename... Ts >
using custom_function_t = double (*f) ( double, Ts... ); 
```

上面定义了一个`custom_function_t`带有双变量和可变数量的参数的 a。

所以你的`trap`功能变成

```
template< typename... Ts >
double trap( custom_function_t<Ts...> f, Ts... args, double a, double b ) {
    int N = 10000;
    double step = (b-a)/N;
    double s = 0;
    for (int i=0; i<=N; i++) {
        double xi = a + i*step;
        if (i == 0 || i == N) { s += f(xi, args...); }
        else { s += 2*f(xi, args...); }
    }
    s *= (b-a)/(2*N);
    return s;
} 
```

用法：

```
double foo ( double X ) {
  return X;
}

double quad( double X, double A, double B, double C ) {
  return(A*pow(x,2) + B*x + C);
}

int main() {
  double result_foo  = trap( foo, 0, 1 );
  double result_quad = trap( quad, 1, 2, 3, 0, 1 );  // 1, 2, 3 == A, B, C respectively
} 
```

在 Apple LLVM 4.2 编译器上测试。

# ruby-on-rails - 在 Rails 中的 db 中存储会话

> ID：15959376
> 
> 赞同：2
> 
> 时间：2013-04-11T21:41:48.677
> 
> 标签：ruby-on-rails, session

我最近在我的 rails 应用程序中遇到了 cookieOverflow 异常。我用谷歌搜索了一下，发现这个答案最有帮助：

[https://stackoverflow.com/a/9474262/169277](https://stackoverflow.com/a/9474262/169277)

在数据库中实现存储会话后，我试图找出这种方法的缺点，到目前为止，我在会话表中看到大约 1200 个条目，这些条目仅在几个小时内就填充完毕。

何时发生与数据库的实际交互，仅在将数据写入会话时还是？

这增长得相当快，所以有没有办法从数据库中清除旧的未使用的会话，而不是有一些日常的 cron 作业或其他东西。

我只是在寻找有关这种方法的一些额外信息，现在我在想我应该保留它还是更改我的应用程序的逻辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:23:55.133

> 一个 cookie 中的 4KB 很多，因此考虑更改您的应用程序可能不是一个坏主意。

也就是说，几个小时内达到 1200 似乎并不奇怪。如果您担心它会无限增长，您可以使用 memcache 或 redis 作为缓存层来存储您的 cookie 而不是数据库。这将使您不必担心数据库的增长。不利的一面是，驱逐可能意味着您将人们注销。

话虽如此，我们每天都有许多类似 cron 的作业来清理我们的数据库表，而不是为会话，但它是相似的。无论如何，它们在利用率低的时候运行。

# c# - WPF 中的 .NET 条码阅读器

> ID：15959383
> 
> 赞同：1
> 
> 时间：2013-04-11T21:42:37.043
> 
> 标签：c#, .net, wpf, wpf-controls, barcode

我正在尝试查看是否可以在不使用任何第三方工具的情况下读取 WPF 应用程序中的条形码。我们使用 WPF 构建了一个应用程序，他们不愿意购买任何第三方设备来读取条形码。有没有其他方法可以使用 .NET APIS 读取 WPF 应用程序中的条形码数据？

注意：**我在 .NET 中看到过示例，但其中大多数使用条形码阅读器工具。我已经在 Android ZXing 库中看到了这样的示例，而无需使用条形码阅读器或扫描仪等任何工具。**

非常感谢任何想法或想法。

谢谢，拉梅什

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T22:23:23.703

为了缩短评论中的讨论并可能帮助其他有类似问题的人，我将在这里总结一下。

我不清楚您想问的真正问题是否是“.NET 是否提供条形码阅读器类”。如果是这样，答案是否定的。

现在，由于 WPF 应用程序只是一个普通的 .NET 应用程序，因此肯定可以在没有 3rd 方库的情况下实现条形码读取。所有算法都是公开的，有大量开源实现可以作为参考，.NET 提供了与外围设备对话、获取图像和分析图像所需的一切。您“只是”需要对其进行编码。

例如，有一个[ZXing 的 C# 端口](http://ode.google.com/p/zxing/source/browse/#svn/trunk/csharp)，所以你可以看一下（虽然它看起来像是从 Java 自动翻译的，所以我不希望那里有太多惯用的 C#）。

您还提到您的客户“不愿意购买任何第三方设备”。我不确定“设备”是否旨在阅读“图书馆”。如果是这样，有些开源库他们（或您）不必付费，商业组件通常提供免版税许可（例如[google 展示的第一个](http://www.vintasoft.com/vsbarcode-dotnet-license.html)），这意味着只有您需要支付开发许可，但您的客户甚至都不知道。

# iphone - iPhone 已插入并显示在一个 xcode 项目中，但不在另一个项目中。为什么？

> ID：15959388
> 
> 赞同：0
> 
> 时间：2013-04-11T21:43:05.950
> 
> 标签：iphone, xcode

当我将我的 iPhone（我将使用 BobbyUserIPhone）插入我的 Mac 时，名称“BobbyUserIPhone”会出现在其中一个 XCode 项目的方案中。我打开了另一个 XCode 项目，它只是“iOS 设备”而不是“BobbyUserIPhone”，就像我期望的那样。什么可能导致这种情况以及最好的解决方案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T21:59:15.827

通常，造成这种情况的原因是**不同的项目有不同的部署目标**，即项目 1 的部署目标是 iOS 4，而项目 2 的部署目标是 iOS 6。如果 iPhone 运行的是 iOS 5，它将显示在项目 1 中，但不会显示在项目 2 中。

正如@Dario 提到的，您可以在应用程序中的每个目标的构建设置下更改您的目标。

# php - 使用 PHP 检查未填写的字段

> ID：15959390
> 
> 赞同：0
> 
> 时间：2013-04-11T21:43:08.303
> 
> 标签：php, forms, field

我正在创建一个结帐页面，要求客户填写他的个人信息以及他的信用卡详细信息（这部分使用条纹）。

我想知道，检查字段是否已填满的最佳方法是什么？我应该在 processingPayment.php 中执行 $_POST 字段并处理付款，如果字段未填写，我会重定向回结帐吗？

还是在提交表单之前使用js现场检查比较好？

如果在处理页面中，我会尝试这样的事情：

```
if (empty($firsName) || empty($lastName) || empty($address) || empty ($city) || empty ($state) || empty($zip))
{
header('Location: checkout.php');
} 
```

但是我需要重新发送输入的值，以便结帐页面接收它们并且用户不必再次重新填写每个字段......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:45:05.577

像这样的东西？

```
foreach($_POST as $key=>$val) {
    if( empty($val) ) {
        echo "$key is empty";
    }
} 
```

**PHP最好**的方法是有一个可能的参数数组：

```
$array = array('firstName', 'lastName');

foreach($array as $val) {
    if( empty($_POST[$val]) ) {
        echo "$val is empty";
    }
} 
```

否则，客户端验证也可以工作，但始终可以禁用。为了完全安全，请同时使用客户端和服务器端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T21:58:52.003

您可以使用会话来存储输入的数据，但您需要分别检查每个值：

**PHP**

```
<?php
session_start();

foreach ($_POST as $key => $value) {
    if (strlen(trim($value)) <= 0) {    //You could replace '0'
        $_SESSION[$key] = $value;
    }
}

?> 
```

**形式**

```
<form>
First name: <input type="text" value="<?php $_SESSION['firstName'] ? $_SESSION['firstName'] : ''; ?>" placeholder="First Name" />
....
</form> 
```

`$_SESSION['firstName'] ? $_SESSION['firstName'] : '';`是一样的

```
if ($_SESSION['firstName']) return $_SESSION['firstName']
else return ''; 
```

它在 HTML(View) 中比完整的 if 语句更具可读性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T22:47:44.700

```
$var  = isset($_POST['field'])  ? $_POST['field']  : '';
$var2 = isset($_POST['field2']) ? $_POST['field2'] : '';
// and so on

if( empty($var) || empty($var2) )
{
   //it's empty
} 
```

# vb6 - 如何与另一个克服 vbp“参考”问题的程序员共享 VB 项目？

> ID：15959394
> 
> 赞同：3
> 
> 时间：2013-04-11T21:43:18.583
> 
> 标签：vb6

我有这个由几个 DLL、OCX 和 GUI 组成的旧 VB6 项目。

有一个 GUI 组件包含在它的 VBP 文件中：

```
Type=Exe
Reference=*\G{00020430-0000-0000-C000-000000000046}#2.0#0#C:\Windows\SysWOW64\stdole2.tlb#OLE Automation
Object={EAB22AC0-30C1-11CF-A7EB-0000C05BAE0B}#1.1#0; ieframe.dll
Object={3050F1C5-98B5-11CF-BB82-00AA00BDCE0B}#4.0#0; mshtml.tlb
Reference=*\G{64E54C86-D847-48F7-9AE5-D6C9B8E6A3A2}#3.0#0#..\..\bin\Crypt.dll#Crypt
Reference=*\G{B3E7F95C-B6D9-458E-B4D4-5272759B139A}#4.0#0#..\..\bin\SpeechMike.dll#SpeechMike_DLL
Object={831FDD16-0C5C-11D2-A9FC-0000F8754DA1}#2.1#0; MSCOMCTL.OCX
Object={AB4F6C60-4898-11D2-9692-204C4F4F5020}#29.0#0; Ccrpsld.ocx
Object={48E59290-9880-11CF-9754-00AA00C00908}#1.0#0; msinet.ocx
Object={9C526969-AA6E-4D61-BAFA-117FD20C2B38}#3.0#0; SpeechMike.ocx 
```

参考设置很痛苦，因为它们总是从一台机器更改为另一台机器***。***我的意思是，以最后一个为例，GUID '9C526969-AA6E-4D61-BAFA-117FD20C2B38' 将在我的系统上，但在其他人的机器上。

现在，为了使它工作，我删除了对 Crypt.dll 和 SpeechMike.dll 的引用。也对象 SpeechMike.ocx。否则，Visual Studio 会查找不存在的内容。然后在“项目 > 参考”中，我检查了 Crypt 和 SpeechMike，***参考***返回到具有正确 GUID 和版本的 VBP。最后，在“项目 > 组件”中添加 OCX，一切顺​​利。

我错了吗？我如何与其他人共享项目而无需通过循环来启动项目？

我正在使用 MS Visual Basic 6（VS 6 企业版的一部分）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T23:27:09.533

这听起来像是“未能保持二进制兼容性”。通常您只对自己执行此操作，但如果多人从源项目文件编译您的库，当然会更令人头疼。

当您创建 ActiveX EXE、DLL 和 OCX 时，您需要创建一个“基本”版本，其中分配了类型和类 ID 值 (GUID)。文档甚至建议您这样做，将过程留空：只是注释行或其他内容，以便 IDE 不会删除空声明。

您不必使用“空”的基本参考库，它可以是一个包含完整代码的库。

编译此基线库后，您将退出并保存您的项目。然后将此“空”库重命名为其他名称，并从那里将其与您的项目源文件一起保存。

在此之后，您重新打开项目并进入项目属性并在组件选项卡上将兼容性设置更改为二进制兼容性，并在框中输入已编译基线库的完整路径和名称。保存项目。现在您可以添加代码并编译“真实”库以供其他程序使用。

*当您以源代码形式*将这些库（DLL、OCX）分发给其他人以便他们可以编译它们时，您必须提供这个重命名的编译基线库以及源代码文件、VBP 文件、资源文件等。

从那里您的 GUID 将保持稳定，直到您对破坏二进制兼容性的内容进行更改（更改方法的参数列表等）。

在线帮助（MSDN 库）中对此有更多详细信息。看：

[*使用 Visual Basic|组件工具指南|创建 ActiveX 组件|调试、测试和部署组件|ActiveX 组件中的版本兼容性*](http://msdn.microsoft.com/en-us/library/aa733715(v=vs.60).aspx)

# scala - 改进 Scala 中的 Groovy 安全取消引用运算符

> ID：15959401
> 
> 赞同：0
> 
> 时间：2013-04-11T21:43:47.623
> 
> 标签：scala, operator-overloading, dereference

针对我的问题[如何开发宏以短路空值？](https://stackoverflow.com/questions/15775699)有人向我指出了一个早期的长线程，其中有很多答案，其中最引人注目的是[https://stackoverflow.com/a/5569905](https://stackoverflow.com/a/5569905)。但它不适用于像 Int 这样的 Scala AnyVal“原语”：

```
object TestOp {

  class SafeDereference[A](obj: A) {
    def ?[B >: Null](function: A => B): B = if (obj == null) null else function(obj)
  }
  implicit def safeDereference[A](obj: A) = new SafeDereference(obj)

  class C { 
    def getValue: Int = 0                     
  }

  def main(args: Array[String]) {
    val c = new C
    val x:Int = c ? (_.getValue)
  }
} 
```

给出以下编译错误：

```
[error] TestOp.scala:14: type mismatch;
[error]  found   : Any
[error]  required: Int
[error]     val x:Int = c ? (_.getValue)
[error]                   ^
[error] one error found
[error] {file:/home/mmalak/streaming-demo/}default-ae36bd/compile:compile: Compilation failed 
```

一种解决方法是将 val x:Int 替换为 val x:java.lang.Integer，这样可以编译。有没有办法改进上面的 SafeDereference 以便允许 val x:Int ？

**附加信息**

以下产生所需的输出。现在的问题变成了如何将类型转换移动到 SafeDereference 中，以及如何处理所有其他 Scala“原语”（布尔等）。

```
object TestOp {

  class SafeDereference[A](obj: A) {
    def ?[B >: Null](function: A => B): B = if (obj == null) null else function(obj)
  }
  implicit def safeDereference[A](obj: A) = new SafeDereference(obj)

  class C { 
    def getValue: Int = 0                     
  }

  def main(args: Array[String]) {
    val c:C = null
    val x = (c ? (_.getValue)).asInstanceOf[java.lang.Integer].asInstanceOf[Int]
    println("x="+x)
  }
} 
```

根据需要输出：

```
x=0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T22:19:36.553

你可以做这样的事情。该`Zero`特征允许您确定任何不是 的对象的零值`nullable`。在这种情况下，我为`Numeric`类型添加了一个：

```
object TestOp {

  trait Zero[T] {
    def apply(): T
  }

  object Zero {
    implicit def zeroNull[B >: Null] =
      new Zero[B] { def apply = null }

    implicit def zeroNumeric[B: Numeric] =
      new Zero[B] { def apply = implicitly[Numeric[B]].zero }
  }

  implicit class SafeDereference[A](obj: A) {
    def ?[B](function: A => B)(implicit zero: Zero[B]): B =
      if (obj == null) zero() else function(obj)
  }

  class C {
    def getValue: Int = 0
    def getSomething: C = new C
  }

  def main(args: Array[String]) {
    val c = new C
    val x = c ? (_.getValue)
    val y = c ? (_.getSomething)
  }
} 
```

## 编辑

因为`Boolean`你会添加这样的东西：

```
implicit def zeroBoolean[B >: Boolean] =
  new Zero[B] { def apply = false } 
```

# php - 在 PHP 中，我从 mySQL 编码了一个 JSON 数组，我该如何使用它？解码？

> ID：15959404
> 
> 赞同：0
> 
> 时间：2013-04-11T21:43:51.993
> 
> 标签：php, mysql, json

```
$sql = "SELECT * FROM `scripts` LIMIT 0, 30 ";   
$result = mysql_query($sql) or die ('Error updating database: ' . mysql_error()); 
$json = array(); 
if(mysql_num_rows($result)) { 
    while($row=mysql_fetch_row($result)) { 
        $json['table data'][]=$row;
    } 
 } 
$encoded = json_encode($json); 
echo $encoded; 
```

这是我的输出：

```
{"table data":[["1","test","30","13"],["2","test2","40","14"]]} 
```

如何访问数组的单个部分，它是一个数组数组？我先解码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:48:37.927

尝试解码

```
$json = '{"foo-bar": 12345}';

$obj = json_decode($json);
print $obj->{'foo-bar'}; // 12345 
```

再见

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T21:48:43.167

你用

```
 $json['table data'][$id] 
```

其中 $id 是您要访问的行

所以例如

```
$json['table data'][0][1]  == "test"
$json['table data'][1][1]  == "test2" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T21:58:20.787

当您将数据添加到数组中时，创建一个数组。

```
$json['table data'][] = array($row); 
```

# java - android - 以编程方式更改列表视图背景颜色

> ID：15959405
> 
> 赞同：0
> 
> 时间：2013-04-11T21:43:54.150
> 
> 标签：java, android

我创建了一个自定义列表视图并为它创建了一个适配器。我希望能够在我的自定义列表视图中以编程方式更改不同视图的不同样式方面。我的自定义列表视图是一个相对布局，其中包含 TextViews。我尝试了以下没有运气。没有错误或任何东西。

```
View myView = adapter.getView(position, null, null);

myView.setBackgroundColor(Color.parseColor("#93E6CD"));       
myView.findViewById(R.id.layout).setBackgroundColor(Color.parseColor("#93E6CD"));
adapter.notifyDataSetChanged(); 
```

这是我的自定义列表视图

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:padding="5dip"
    android:id="@+id/layout">

    <!-- Title-->
    <TextView
        android:id="@+id/primaryTitle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Loading..."
        android:textColor="#040404"
        android:typeface="sans"
        android:textSize="18dip"
        android:textStyle="bold"/>

    <!-- Secondary title -->
    <TextView
        android:id="@+id/secondaryTitle"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/primaryTitle"
        android:textColor="#343434"
        android:textSize="12dip"
        android:layout_marginTop="1dip"
        android:text="" />

    <!-- Rightend Data -->
    <TextView
        android:id="@+id/rightData"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignTop="@id/primaryTitle"
        android:gravity="right"
        android:text=""
        android:layout_marginRight="5dip"
        android:textSize="12dip"
        android:textColor="#B53021"
        android:textStyle="bold"/>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T23:57:11.490

在您提供更多信息之前，我们将无法继续。

我怀疑您没有正确设置 ListView。您是否真的试图显示类似项目的列表，例如数据库中的行？如果是这样，我想查看 ListView 对象的定义，无论是在代码中还是在 XML 中。我也想看看适配器的定义。看起来您已经为 ListView 定义了一个 ListAdapter，但我也想知道支持 ListAdapter 的是什么。

线

```
myView.findViewById(R.id.layout).setBackgroundColor() 
```

看起来很可疑。您似乎正在寻找 myView 的子视图，但我没有看到您在哪里定义了这个子视图。

通常，您将 ListView 定义为整个 UI 布局文件的一部分，在 ListView 中定义一个项目的单独项目布局，然后将数据源适配到 ListView。

# ibm-mobilefirst - 在哪里可以找到 Worklight 错误代码列表

> ID：15959408
> 
> 赞同：1
> 
> 时间：2013-04-11T21:44:16.360
> 
> 标签：ibm-mobilefirst, jsonstore

在哪里可以找到 Worklight 各个部分的可能错误代码列表？

具体来说，当我调用 WL.JSONStore.findAll() 时，我的 onFailure 回调被调用并且错误代码为 -50。到目前为止，我在代码、Worklight 文档或网络上的任何地方都找不到这个数字。

我已经看到对 worklight.js 的引用，但它不存在。WLResponse.h 和 WLFailResponse.h 同上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T22:36:48.013

错误代码列表在[JSONStore 文档](http://pic.dhe.ibm.com/infocenter/wrklight/v5r0m6/index.jsp?topic=%2Fcom.ibm.worklight.help.doc%2Fapiref%2Fr_class_wl_jsonstore.html)中。搜索`List of error codes`。

关于您提到的具体错误代码：（`-50`）`"PERSISTENT_STORE_NOT_OPEN"`表示JSONStore已关闭，请先尝试调用[WL.JSONStore.init](http://pic.dhe.ibm.com/infocenter/wrklight/v5r0m6/topic/com.ibm.worklight.help.doc/apiref/r_wl_jsonstore_init.html)。

# python - 将点拟合到平面算法，如何解释结果？

> ID：15959411
> 
> 赞同：10
> 
> 时间：2013-04-11T21:44:35.567
> 
> 标签：python, numpy, least-squares, svd

**更新**：*我修改了 Optimize 和 Eigen 和 Solve 方法以反映变化。所有现在都返回“相同”的向量，允许机器精度。 **我仍然对 Eigen 方法感到困惑。具体来说，我如何/为什么选择特征向量的切片没有意义。在正常匹配其他解决方案之前，这只是反复试验。如果有人可以纠正/解释我真正应该做什么，或者为什么我所做的工作有效，我将不胜感激。**.*

**感谢** *Alexander Kramer，他解释了我为什么要切片，只允许选择一个正确的答案*

我有一个深度图像。我想计算深度图像中像素的粗表面法线。我考虑周围的像素，在最简单的情况下是一个 3x3 矩阵，并将一个平面拟合到这些点，并计算该平面的法线单位向量。

听起来很简单，但最好先验证平面拟合算法。搜索 SO 和其他各种网站，我看到了使用最小二乘法、奇异值分解、特征向量/值等的方法。

虽然我不完全理解数学，但我已经能够让各种片段/示例工作。我遇到的问题是，每种方法都得到了不同的答案。我期待各种答案会相似（不准确），但它们似乎有很大不同。也许有些方法不适合我的数据，但不确定为什么我会得到不同的结果。任何想法为什么？

这是代码的***更新输出***：

```
LTSQ:   [ -8.10792259e-17   7.07106781e-01  -7.07106781e-01]
SVD:    [ 0\.                0.70710678      -0.70710678]
Eigen:  [ 0\.                0.70710678      -0.70710678]
Solve:  [ 0\.                0.70710678       0.70710678]
Optim:  [ -1.56069661e-09   7.07106781e-01   7.07106782e-01] 
```

以下代码实现了五种不同的方法来计算平面的表面法线。算法/代码来自互联网上的各种论坛。

```
import numpy as np
import scipy.optimize

def fitPLaneLTSQ(XYZ):
    # Fits a plane to a point cloud, 
    # Where Z = aX + bY + c        ----Eqn #1
    # Rearanging Eqn1: aX + bY -Z +c =0
    # Gives normal (a,b,-1)
    # Normal = (a,b,-1)
    [rows,cols] = XYZ.shape
    G = np.ones((rows,3))
    G[:,0] = XYZ[:,0]  #X
    G[:,1] = XYZ[:,1]  #Y
    Z = XYZ[:,2]
    (a,b,c),resid,rank,s = np.linalg.lstsq(G,Z) 
    normal = (a,b,-1)
    nn = np.linalg.norm(normal)
    normal = normal / nn
    return normal

def fitPlaneSVD(XYZ):
    [rows,cols] = XYZ.shape
    # Set up constraint equations of the form  AB = 0,
    # where B is a column vector of the plane coefficients
    # in the form b(1)*X + b(2)*Y +b(3)*Z + b(4) = 0.
    p = (np.ones((rows,1)))
    AB = np.hstack([XYZ,p])
    [u, d, v] = np.linalg.svd(AB,0)        
    B = v[3,:];                    # Solution is last column of v.
    nn = np.linalg.norm(B[0:3])
    B = B / nn
    return B[0:3]

def fitPlaneEigen(XYZ):
    # Works, in this case but don't understand!
    average=sum(XYZ)/XYZ.shape[0]
    covariant=np.cov(XYZ - average)
    eigenvalues,eigenvectors = np.linalg.eig(covariant)
    want_max = eigenvectors[:,eigenvalues.argmax()]
    (c,a,b) = want_max[3:6]    # Do not understand! Why 3:6? Why (c,a,b)?
    normal = np.array([a,b,c])
    nn = np.linalg.norm(normal)
    return normal / nn  

def fitPlaneSolve(XYZ):
    X = XYZ[:,0]
    Y = XYZ[:,1]
    Z = XYZ[:,2] 
    npts = len(X)
    A = np.array([ [sum(X*X), sum(X*Y), sum(X)],
                   [sum(X*Y), sum(Y*Y), sum(Y)],
                   [sum(X),   sum(Y), npts] ])
    B = np.array([ [sum(X*Z), sum(Y*Z), sum(Z)] ])
    normal = np.linalg.solve(A,B.T)
    nn = np.linalg.norm(normal)
    normal = normal / nn
    return normal.ravel()

def fitPlaneOptimize(XYZ):
    def residiuals(parameter,f,x,y):
        return [(f[i] - model(parameter,x[i],y[i])) for i in range(len(f))]

    def model(parameter, x, y):
        a, b, c = parameter
        return a*x + b*y + c

    X = XYZ[:,0]
    Y = XYZ[:,1]
    Z = XYZ[:,2]
    p0 = [1., 1.,1.] # initial guess
    result = scipy.optimize.leastsq(residiuals, p0, args=(Z,X,Y))[0]
    normal = result[0:3]
    nn = np.linalg.norm(normal)
    normal = normal / nn
    return normal

if __name__=="__main__":
    XYZ = np.array([
        [0,0,1],
        [0,1,2],
        [0,2,3],
        [1,0,1],
        [1,1,2],
        [1,2,3],
        [2,0,1],
        [2,1,2],
        [2,2,3]
        ])
    print "Solve: ", fitPlaneSolve(XYZ)
    print "Optim: ",fitPlaneOptimize(XYZ)
    print "SVD:   ",fitPlaneSVD(XYZ)
    print "LTSQ:  ",fitPLaneLTSQ(XYZ)
    print "Eigen: ",fitPlaneEigen(XYZ) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T23:31:34.607

## 优化

平面的法线向量 a*x + b*y +c*z = 0，等于 (a,b,c)

优化方法为 a 和 b 找到 a 值，使得 a*x+b*y~z （~ 表示近似值）它完全省略了在计算中使用 c 的值。我没有在这台机器上安装 numpy，但我希望将模型更改为 (a*x+b*y)/c 应该可以修复此方法。它不会对所有数据集给出相同的结果。此方法将始终假定通过原点的平面。

## SVD 和 LTSQ

产生相同的结果。（区别在于机器精度的大小）。

## 本征

选择了错误的特征向量。`lambda = 1.50`最大特征值 ( )对应的特征向量与`x=[0, sqrt(2)/2, sqrt(2)/2]`SVD 和 LTSQ 中的一样。

## 解决

我不知道这应该如何工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-22T16:01:38.273

特征解中平面的法向量是最小特征值的特征向量。一些 Eigen 实现对特征值和特征向量进行排序，而另一些则没有。因此，在某些实现中，将第一个（或最后一个）特征向量作为正常值就足够了。在其他实现中，您必须先对它们进行排序。另一方面，大多数 SVD 实现提供排序值，因此它是简单的第一个（或最后一个）向量。

# dojo - 模板化的 dojo 小部件如何识别非 dojo 属性？

> ID：15959416
> 
> 赞同：0
> 
> 时间：2013-04-11T21:44:43.797
> 
> 标签：dojo, widget

我想创建一个模板化的 dojo 小部件并在表单字段中使用它，如下所示。但是，永远不会设置路径属性。我怎么做？

HTML

```
 <form:input id="firstName" path="firstName" data-dojo-type="custom.myWidget"/> 
```

小部件 HTML

```
 <div>
        <form:errors path="${!path}"/>
    </div> 
```

小部件 JAVASCRIPT

```
define([
        "dojo/_base/declare", 
        "dijit/form/TextBox", 
        "dijit/_Templated"], 
function(declare, TextBox){

        return declare("custom.myWidget", TextBox,{

                    path:"",      

                    _setPathAttr:function(value){
                        this._set("path",value);
                    }
          });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:15:44.413

我不明白你对非 dojo attr 的意思，但你可以使用 dojo 声明性语法设置道具，如下所示：

```
<form:input id="firstName" data-dojo-type="custom.myWidget" data-dojo-props="path: 'firstName'"> 
```

# php - 评分系统图像效率

> ID：15959420
> 
> 赞同：0
> 
> 时间：2013-04-11T21:44:57.210
> 
> 标签：php, html

我正在我的网站上建立一个 5 星评级系统，并且有两个选项来显示显示星星的图像。这些代表评级的图像将在列表中的每条记录中显示一个，该列表将增长到大约 200 - 300 条记录。

选项一：每个可能评分的完整图像，包括半星。所以我需要从 00000（还没有评级）到 11111（5 星）的 11 张图片。这种方式意味着网页将加载 9 张图像，但列表的每行仅显示一张图像。

选项二：三个图像 0（无星）、1/2（半星）、1（1 星）。因此，该页面仅加载 3 张图片，但对于列表的每一行，显示 5 张图片的组合以获得 5 星评级。例如 1,1,1/2.0.0（2.5 颗星）。

所以问题是什么更有效，加载的图像更少，但网页上显示的数量是网页上的 5 倍，或者加载的图像更多，但每条记录显示的图像少 5 倍。我想要使​​用 200 项列表最快加载页面的方法。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T22:06:35.823

这是最有效的方法。

将这 11 张不同评级可能性的图像放入一个大图像文件中，不同的可能性堆叠在一起。然后，您可以使用 CSS 设置将用于表示星星的元素的背景。每当用户悬停或单击包含此精灵的元素时，您可以使用 CSS 更改元素的背景定位，以显示不同的评分表示。

```
#ratings {
   background-image: url('myratingssprite.png');
   background-position: 0 0;
}
  #ratings:hover {
    background-position: 0 150px; /* Change the background's position to a more suitable area of the ratings sprite */
  }
  #ratings.four_stars {
    background-position: 0 200px; /* Move around the sprite to show the area with the 4 stars representation */
  } 
```

# c# - ExpectedException 属性不起作用

> ID：15959421
> 
> 赞同：8
> 
> 时间：2013-04-11T21:45:01.280
> 
> 标签：c#, unit-testing

我在使用 Visual Studio 单元测试框架时遇到了一个非常奇怪的情况。装饰为`[TestMethod, ExpectedException(typeof(InvalidOperationException))]` **失败**的测试，带有`System.InvalidOperationException`.

如果我从测试中删除所有代码（以确保它根本不会抛出任何东西） - 它通过了。就好像`ExpectedException`根本不存在一样……

如果我用一个虚拟测试开始一个空项目，除了抛出它什么都不做，`InvalidOperationException`它完全可以按预期工作。

验证了两者都`ExpectedExceptionAttribute`没有`InvalidOperationException`被覆盖。不知道还有什么可以在这里尝试...

* * *

**编辑：**通过删除对`Microsoft.VisualStudio.QualityTools.UnitTestFramework`v10.1 的引用并添加 v10.0 来解决问题。不知道为什么这很重要，或者为什么其他属性工作得很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-28T11:43:31.083

我个人不使用 ExpectedExeption 属性，因为它不允许您准确指定预期哪个语句会引发异常。例如，您的测试设置代码中可能存在一些问题，该问题引发了一个在您的测试中未执行的 InvalidOperationExeption，突然您的测试通过了。此外，它不允许您检查异常，例如断言它具有正确的消息。

我使用以下方法

```
[TestMethod]
public void Test()
{
    //Arrange
    var sut = new ClassToTest();
    sut.MethodThatShouldNotThrow();

    //Act
    try
    {
         sut.MethodToTestThatShuldThrow();
    }
    catch(InvalidOperationException ioex)
    {
        //Assert, here you could do additional Asserts on the Exception's properties      
        return;
    }
    Assert.Fail("Expected InvalidOperationException was not thrown");
} 
```

# iphone - 如何在 Core Graphics 中更改 CALayer 的填充颜色？

> ID：15959424
> 
> 赞同：5
> 
> 时间：2013-04-11T21:45:13.617
> 
> 标签：iphone, ios, objective-c, core-graphics, calayer

我有一个形状，一个 CALayer，我想在其中添加核心图形效果。现在，我想保持简单并更改它的填充颜色。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-11T21:57:06.877

如果您只想更改整个图层的颜色，可以使用：

```
layer.backgroundColor = [[UIColor greenColor] CGColor]; 
```

如果你有一个更复杂的形状，比如要填充的路径，你需要用这样的东西覆盖图层`drawInContext:`：

```
- (void)drawInContext:(CGContextRef)context
{
    //...
    CGContextSetFillColorWithColor(context, [[UIColor greenColor] CGColor]);
    CGContextFillPath(context);
    //...
} 
```

有关详细信息，请参阅[Quartz 2D 编程指南](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/Introduction/Introduction.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T21:52:13.337

```
shape.fillColor = [UIColor blackColor].CGColor; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T21:52:20.187

`[[UIColor redColor] setFill]`是你要找的，我相信。

我没有 Xcode 打开 atm，但如果您尝试填充路径，那应该是正确的方法。

# c# - c# 将重音字符视为简单字符的字符编码

> ID：15959426
> 
> 赞同：0
> 
> 时间：2013-04-11T21:45:19.703
> 
> 标签：c#, encoding, character-encoding, utf

是否存在将 á 或 ä 等重音字符视为单个字符的编码？如果不是，那么今天最常用的编码是什么？我目前使用的是 UTF7，它与其他类型的编码的兼容性如何？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T22:10:34.903

您可能会考虑您的要求。您要求一种能够识别“á”并将其转换为“a”的编码。那是转换器，而不是编码。它必须知道源的编码是什么，以便它可以转换为您正在使用的任何编码。

等等，也许这不是你要问的。有些编码将它们视为单个字节*。*例如，[ISO-8859-1 编码](http://en.wikipedia.org/wiki/ISO/IEC_8859-1)（也称为 Latin-1）将许多重音字符视为一个字节。

（以下内容被删除，因为我在谈论 ASCII，而不是 UTF-7 ......漫长的一天。）

~~UTF-7 与许多其他编码并不是特别兼容。它有 128 个可能的值：刚好足够容纳拉丁字母表中使用的 52 个字母（大小写组合）、10 个数字、32 个控制字符和各种标点符号。但这对于西班牙语来说是不够的，例如，它有颠倒的问号和感叹号以及其他东西。~~

[UTF-7](http://en.wikipedia.org/wiki/UTF-7)与其他编码“兼容”，因为它可以表示整个 Unicode 字符集。但只有一些字符（称为“直接字符”）和少数控制字符可以直接编码为单个 ASCII 字节。这些字符与 UTF-8 和许多单字节字符集中的字符相同。所有其他字符都由序列表示，并且与任何其他编码不同。

当今最常用的编码？在 Web 上，UTF-8 被大量使用。它也是创建`StreamWriter`. 对于我所做的工作（主要是英语和西欧字符集），它比其他任何东西都好用。

现在，您正在寻找的可能是在比较中将“á”和“a”视为相同的东西。那是一个不同的问题。有关这方面的信息，请参阅[执行文化不敏感字符串比较](http://msdn.microsoft.com/en-us/library/885e1sy1.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T05:06:27.747

这似乎与编码无关。在 C# 中，您使用什么编码来存储和传输并不重要，字符串始终在 UTF-16 内部，并且`ä`在组合形式中始终为 1 个字符长。

如果`"ä".Length`是给`2`你，你的字符串是分解的形式，你需要做的就是

```
string str = "ä"; //a + U+0308, .Length == 2
str = str.Normalize(NormalizationForm.FormC); //just ä now, with Length == 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T17:43:05.213

很抱歉对这个问题感到困惑，我终于找到了我想要的东西，那就是我需要我的文本才能使用 Windows-1250（中欧（Windows））代码页，因为这是很多其他程序使用的，正确支持€đłŁ¤...等字符

感谢我得到的所有帮助，这是一次有用的学习经历。

# actionscript-3 - 动作脚本 3：将鼠标悬停在按钮上播放影片剪辑

> ID：15959428
> 
> 赞同：2
> 
> 时间：2013-04-11T21:45:22.390
> 
> 标签：actionscript-3, flash, actionscript, flash-cs5

我在主时间线上有一个按钮。当我将鼠标悬停在按钮上时，我想要播放影片剪辑。当影片剪辑结束时，我希望它转到下一帧。这可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T22:24:14.397

是的，这是可能的，这里有一个例子：

```
import fl.controls.Button;
import flash.events.MouseEvent;

var hover:Button = new Button();
hover.label = "Hover";
addChild(hover);
hover.x = 100;
hover.y = 100;
var mc:MovieClip = new MovieClip();
addChild(mc);
mc.x = 300;
mc.y = 300;

hover.addEventListener(MouseEvent.MOUSE_OVER, onMouseOver);

function onMouseOver(e:MouseEvent):void
{
    if(mc.currentFrame < mc.totalFrames) {
         mc.play();
    } else {
         gotoAndStop(currentFrame + 1);
    }
} 
```

这是一篇关于该主题的有用文章：[AS3 鼠标事件和鼠标相关的用户操作](http://drawlogic.com/2007/06/03/as3-mouse-events-and-mouse-related-user-actions/)

# php - PHP没有将数据写入JSON文件

> ID：15959431
> 
> 赞同：1
> 
> 时间：2013-04-11T21:45:26.607
> 
> 标签：php, json

我的应用程序中有以下 PHP 代码，它在本地 json 文件中获取并存储一条推文，我可以使用该代码将推文拉到我的网页上，而无需不断敲击 Twitter API。

```
if (file_exists( get_site_url() . '/twitter.json' )) {
    $data = json_decode( file_get_contents( get_site_url() . '/twitter.json' ));
    if ($data['timestamp'] > time() - 10 * 60) {
        $twitter_result = $data['twitter_result'];
    }
}

if (!$twitter_result) {
    $twitter_result = file_get_contents('http://api.twitter.com/1/statuses/user_timeline.json?q=@Twitter&rpp=1&screen_name=Twitter&count=1');

   $data = array ('twitter_result' => $twitter_result, 'timestamp' => time());
   file_put_contents( get_site_url() . '/twitter.json', json_encode($data));
} 
```

该代码以前使用`serialize`and`unserizalize`而不是`json_encode`and`json_decode`并且已更改，因为我希望将保存的数据作为纯 JSON。

但是，自从更改它后，数据不再保存到文件中！我推测是因为我检查时间戳的行不正确，但如果我注释掉顶部的 if 语句，它实际上甚至没有保存数据。

也许是因为 Twitter 已经是 JSON 了？但是，如果回显 json_encode($data) 我会得到以下信息：

```
{
    "twitter_result": "[{\"created_at\":\"Thu Apr 11 21:11:23 +0000 2013\",\"id\":322456869178310656,\"id_str\":\"322456869178310656\",\"text\":\"We\\u2019re bringing Trends to over 160 new locations. To learn more, check out our blog post: http:\\\/\\\/t.co\\\/2Vn2JRmHV5\",\"source\":\"\\u003ca href=\\\"http:\\\/\\\/itunes.apple.com\\\/us\\\/app\\\/twitter\\\/id409789998?mt=12\\\" rel=\\\"nofollow\\\"\\u003eTwitter for Mac\\u003c\\\/a\\u003e\",\"truncated\":false,\"in_reply_to_status_id\":null,\"in_reply_to_status_id_str\":null,\"in_reply_to_user_id\":null,\"in_reply_to_user_id_str\":null,\"in_reply_to_screen_name\":null,\"user\":{\"id\":783214,\"id_str\":\"783214\",\"name\":\"Twitter\",\"screen_name\":\"twitter\",\"location\":\"San Francisco, CA\",\"url\":\"http:\\\/\\\/blog.twitter.com\\\/\",\"description\":\"Your official source for news, updates and tips from Twitter, Inc.\",\"protected\":false,\"followers_count\":17715897,\"friends_count\":120,\"listed_count\":76561,\"created_at\":\"Tue Feb 20 14:35:54 +0000 2007\",\"favourites_count\":22,\"utc_offset\":-28800,\"time_zone\":\"Pacific Time (US & Canada)\",\"geo_enabled\":true,\"verified\":true,\"statuses_count\":1571,\"lang\":\"en\",\"contributors_enabled\":false,\"is_translator\":false,\"profile_background_color\":\"ACDED6\",\"profile_background_image_url\":\"http:\\\/\\\/a0.twimg.com\\\/profile_background_images\\\/657090062\\\/l1uqey5sy82r9ijhke1i.png\",\"profile_background_image_url_https\":\"https:\\\/\\\/si0.twimg.com\\\/profile_background_images\\\/657090062\\\/l1uqey5sy82r9ijhke1i.png\",\"profile_background_tile\":true,\"profile_image_url\":\"http:\\\/\\\/a0.twimg.com\\\/profile_images\\\/2284174758\\\/v65oai7fxn47qv9nectx_normal.png\",\"profile_image_url_https\":\"https:\\\/\\\/si0.twimg.com\\\/profile_images\\\/2284174758\\\/v65oai7fxn47qv9nectx_normal.png\",\"profile_banner_url\":\"https:\\\/\\\/si0.twimg.com\\\/profile_banners\\\/783214\\\/1347405327\",\"profile_link_color\":\"038543\",\"profile_sidebar_border_color\":\"EEEEEE\",\"profile_sidebar_fill_color\":\"F6F6F6\",\"profile_text_color\":\"333333\",\"profile_use_background_image\":true,\"default_profile\":false,\"default_profile_image\":false,\"following\":null,\"follow_request_sent\":null,\"notifications\":null},\"geo\":null,\"coordinates\":null,\"place\":null,\"contributors\":null,\"retweet_count\":134,\"favorite_count\":63,\"favorited\":false,\"retweeted\":false,\"possibly_sensitive\":false,\"lang\":\"en\"}]",
    "timestamp": 1365717135
} 
```

对我来说，这看起来像是有效的 JSON ......

看不到写作部分有任何问题，因为它以前工作过。但是这样做：

```
if(file_put_contents( get_site_url() . '/twitter.json', json_encode($data) )){
        echo 'success';
    }
    else
    {
        echo 'error';
    } 
```

我得到错误回显语句。不知道为什么？位置正确，文件应该是可写的并且存在。

但是这样做：

```
$file = file_get_contents( get_site_url() . '/twitter.json');
echo is_writable($file) ? "is writable<br>" : "not writable<br>"; 
```

我收到错误“不可写”，但权限设置为 777

这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T22:11:57.533

尝试以下（更新）：

```
<?php

$twitter_result = false;
$file = 'path/to/file/twitter.json';

if (file_exists( $file )) {
    $data = json_decode( file_get_contents( $file ) );
    if ($data->timestamp > (time() - 10 * 60) ) {
        $twitter_result = $data->twitter_result;
    }
}

if (!$twitter_result) {
    $twitter_result = file_get_contents('http://api.twitter.com/1/statuses/user_timeline.json?q=@Twitter&rpp=1&screen_name=Twitter&count=1');

   $data = array ('twitter_result' => $twitter_result, 'timestamp' => time());
   file_put_contents( $file, json_encode($data));
}

?> 
```

# asp.net - url 中的 aspxerrorpath=/ 导致自定义错误页面不起作用

> ID：15959432
> 
> 赞同：1
> 
> 时间：2013-04-11T21:45:28.437
> 
> 标签：asp.net, custom-error-pages

我正在尝试使站点 pci 兼容。

如果你访问（虚拟ip）：http:someipaddress/ZNYTMHXO.ashx

然后用户正确地看到我在我的网络配置中声明的页面中的 html：

但是，如果您使用相同的 url，但在查询字符串中使用 ?aspxerrorpath=/：http:someipaddress/ZNYTMHXO.ashx?aspxerrorpath=/

然后页面显示“/”应用程序中的服务器错误。运行时错误。

这导致 pci 扫描失败。

为什么这个变量会导致问题？

抱歉，我应该声明 ZNYTMHXO.ashx 不存在。当 asperrorpath 不在查询字符串中时，404 重定向有效。

-----更新----- 只是为了帮助，这是显示页面的html，非常有限。

```
<!DOCTYPE html>
<html>
    <head>
        <title>Runtime Error</title>
        <meta name="viewport" content="width=device-width" />
        <style>
         body {font-family:"Verdana";font-weight:normal;font-size: .7em;color:black;} 
         p {font-family:"Verdana";font-weight:normal;color:black;margin-top: -5px}
         b {font-family:"Verdana";font-weight:bold;color:black;margin-top: -5px}
         H1 { font-family:"Verdana";font-weight:normal;font-size:18pt;color:red }
         H2 { font-family:"Verdana";font-weight:normal;font-size:14pt;color:maroon }
         pre {font-family:"Consolas","Lucida Console",Monospace;font-size:11pt;margin:0;padding:0.5em;line-height:14pt}
         .marker {font-weight: bold; color: black;text-decoration: none;}
         .version {color: gray;}
         .error {margin-bottom: 10px;}
         .expandable { text-decoration:underline; font-weight:bold; color:navy; cursor:hand; }
         @media screen and (max-width: 639px) {
          pre { width: 440px; overflow: auto; white-space: pre-wrap; word-wrap: break-word; }
         }
         @media screen and (max-width: 479px) {
          pre { width: 280px; }
         }
        </style>
    </head>

    <body bgcolor="white">

            <span><H1>Server Error in '/' Application.<hr width=100% size=1 color=silver></H1>

            <h2> <i>Runtime Error</i> </h2></span>

            <font face="Arial, Helvetica, Geneva, SunSans-Regular, sans-serif ">

            <b> Description: </b>An exception occurred while processing your request. Additionally, another exception occurred while executing the custom error page for the first exception. The request has been terminated.
            <br><br>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T22:07:10.607

ScottGuthrie 的以下博客文章[http://weblogs.asp.net/scottgu/archive/2010/09/24/update-on-asp-net-vulnerability.aspx](http://weblogs.asp.net/scottgu/archive/2010/09/24/update-on-asp-net-vulnerability.aspx)应该会有所帮助。

他描述了如何使用 IIS Url Scan 模块来：

> 禁止具有“aspxerrorpath=”查询字符串属性的 URL 进入 ASP.NET 应用程序，而是导致 Web 服务器返回 HTTP 错误。添加此规则可防止攻击者区分服务器上发生的不同类型的错误——这有助于阻止使用此漏洞的攻击。

他正在写一个据报道已修补的漏洞。然而，有些人报告说这仍然是 .Net 4.0 的问题（这里提到：[为什么 ASP.NET 错误页面在出现 aspxerrorpath 查询字符串后立即返回 404？](https://stackoverflow.com/questions/4097184/why-does-the-asp-net-error-page-return-404-as-soon-as-the-aspxerrorpath-querystr)）

您的 PCI 扫描很可能试图利用同样的漏洞。消除漏洞，你应该通过。

希望有帮助。

# ruby-on-rails - Rspec 的 should_receive 在模型测试中的另一个问题

> ID：15959433
> 
> 赞同：0
> 
> 时间：2013-04-11T21:45:36.410
> 
> 标签：ruby-on-rails, rspec

所以我第一次尝试使用 Rspec 在我的应用程序上测试模型，但我似乎无法让它工作。我正在使用 FactoryGirl 创建模型的实例。这是我的规格：

```
describe 'adding a model instance' do
    before :each do
        @fake = FactoryGirl.create :user
    end

    it 'should add a new user to the database' do
        User.should_receive(:create).with(@fake).and_recieve@fake)
    end

end 
```

这是我的模型：

```
class User < ActiveRecord::Base
attr_accessible :username, :name, :email, :email_confirmation, :password, :password_confirmation, :bio
has_many :comments #comments user has posted on ideas
has_many :commented_ideas, :class_name => 'Idea', :through => :comments #ideas user has commented on
has_many :ideas #ideas user has posted

validates :password, :email, :confirmation => true
validates :username, :email, :password, :name, :presence => true
# validates :username, :email, :unique => true
end 
```

以及我得到的错误：

```
Failure/Error: User.should_receive(:create!).with('username' => 'testUser', 'user_id' => "1").and_return(true)
   (<User(id: integer, username: string, name: string, email: string, password: string, created_at: datetime, updated_at: datetime, bio: text) (class)>).create!({"username"=>"testUser", "user_id"=>"1"})
       expected: 1 time
       received: 0 times 
```

有人可以解释为什么这不起作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T22:12:12.863

`User#create`在您的代码中的任何地方都没有调用，因此未达到预期。我认为您的误解是由于将真实班级与工厂混淆所致。我不知道 FactoryGirl 在内部做什么来创建记录，但它似乎不是#create。

# amazon-web-services - 为什么 s3 给我一个下载而不是显示我的静态网站？

> ID：15959437
> 
> 赞同：2
> 
> 时间：2013-04-11T21:45:47.127
> 
> 标签：amazon-web-services, amazon-s3, static-site

我正在尝试使用这些[说明](http://docs.aws.amazon.com/AmazonS3/latest/dev/website-hosting-custom-domain-walkthrough.html)在 s3 上设置静态页面。当我访问“端点”时，我的浏览器会尝试下载文件而不是显示页面。以下是相关设置：

# 政策：

![在此处输入图像描述](https://i.stack.imgur.com/Snj5S.png)

* * *

# 权限：

![在此处输入图像描述](https://i.stack.imgur.com/jpG2V.png)

* * *

# 静态站点配置：

![在此处输入图像描述](https://i.stack.imgur.com/oeC5c.png)

* * *

# 目录结构：

![在此处输入图像描述](https://i.stack.imgur.com/ntAH3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:26:38.540

根据文档，存储桶名称需要与域匹配。在[您链接的文档](http://docs.aws.amazon.com/AmazonS3/latest/dev/website-hosting-custom-domain-walkthrough.html)中，演练创建了两个存储桶：**example.com**和**www.example.com**。example.com 存储桶包含您的网站内容，而 www.example.com 配置为路由到 example.com 存储桶。

查看您的图像，您似乎将存储桶命名为“rampup-io”。您需要更改此存储桶名称以匹配您的域：**yourdomain.com**。您可以选择创建**www.yourdomain.com**。

# php - 在 Magento 中覆盖抽象

> ID：15959438
> 
> 赞同：6
> 
> 时间：2013-04-11T21:45:54.410
> 
> 标签：php, magento

我正在尝试覆盖 Magento 中的摘要，但它不喜欢下面我的 config.xml 中的信息，您将看到我试图覆盖的摘要的文件夹结构以及特定于该文件的 config.xml 部分。

原目录：

`app/code/core/Mage/Rule/Model/Abstract.php`

我的目录：

`app/code/local/EGeeked/Coupons/Rule/Model/Abstract.php`

我的 config.xml：

```
<models>
    <EGeeked_Coupons>
        <class>EGeeked_Coupons_Rule_Model_Abstract</class>
    </EGeeked_Coupons>
    <rule>
        <rewrite>
            <model_abstract>EGeeked_Coupons_Rule_Model_Abstract</model_abstract>
        </rewrite>
     </rule>
</models> 
```

我在 Abstract.php 中的扩展

```
abstract class EGeeked_Coupons_Rule_Model_Abstract extends Mage_Core_Model_Abstract 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-11T23:07:06.410

首先是术语课。接下来，解释为什么你不能这样做。第三，一种替代解决方案虽然并不理想，但可能会让您到达您需要去的地方。

### 术语

从您的问题的外观来看，您不是在尝试“覆盖”一个类，而是在尝试重写该类。类重写是您将配置节点添加到 Magento 以便告诉它的地方

> 实例化这个类而不是那个类

“覆盖”是将一个类从 Magento 核心复制到本地代码池中。换句话说，复制

```
app/code/core/Mage/Rule/Model/Abstract.php 
```

至

```
app/code/local/Mage/Rule/Model/Abstract.php 
```

覆盖是你告诉 Magento“使用这个类文件而不是其他类文件”的地方。类似，但不同于重写。重写被认为是更好的做法，因为它们破坏性较小，并且不太可能导致升级和扩展兼容性问题。

### 你不能那样做

你不能重写抽象类。重写系统之所以有效，是因为 Magento 使用工厂模式来实例化模型、块和助手

```
$class = Mage::getModel('catalog/product'); 
```

重写所做的是，在伪代码中

```
function getModel($model)
{
    if("can I find a rewrite configuration for $model")
    {
        //instantiate the model with the rewrite
    }
    else
    {
        //instantiate the normal model
    }
} 
```

由于抽象类永远不会被实例化，它永远不能被重写。

### 解决方案

据我所知，在标准 Magento 安装中，只有三个类继承自这个抽象类。

```
catalogrule/rule
Mage_CatalogRule_Model_Rule

rule/rule
Rule/Model/Rule.php

salesrule/rule
SalesRule/Model/Rule.php 
```

您可以单独为这些类中的每一个添加重写，理想情况下将您的新逻辑放在共享帮助器类中。您需要以类似的方式处理扩展或自定义代码，但这是一种可能的前进道路。

另一种选择是使用传统的类覆盖和复制

```
app/code/core/Mage/Rule/Model/Abstract.php 
```

至

```
app/code/local/Mage/Rule/Model/Abstract.php 
```

这将允许您修改单个`Abstract`类，但您需要将升级版本中的任何更改合并到该类中 - 当您忘记这样做时（不是如果），您可能会导致系统问题。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-27T06:19:12.167

确实，不能覆盖 Mage 的抽象类，但可以使用本地均值的自定义扩展来覆盖其特定方法，而不是将整体`Abstract.php`放在本地的同一位置。可以使用自己的模块从本地覆盖它。

例如，如果我需要修改 Mage 中的重新排序操作，其内容如下：

```
app\code\core\Mage\Sales\Controller\Abstract.php 
```

然后我可以从我的模块中覆盖它的控制器，如下所示在我的`config.xml`：

```
<config>
  <modules>
    <Custom_Sales>
      <version>1.0.0</version>
    </Custom_Sales>
  </modules>
  <frontend>
    <routers>
      <sales>
        <args>
          <modules>
            <custom_sales before="Mage_Sales">Custom_Sales</custom_sales>
          </modules>
        </args>
      </sales>
    </routers>
  </frontend>
</config> 
```

之后将控制器添加到模块：

```
app\code\local\Custom\Sales\controllers\OrderController.php 
```

通过以下方式：

```
require_once(Mage::getModuleDir('controllers','Mage_Sales').DS.'OrderController.php');

class Custom_Sales_OrderController extends Mage_Sales_OrderController
{
    public function reorderAction()
    {
        "Add required changes !!";
    }
} 
```

全部设置为从本地模块运行抽象方法。以类似的方式，也可以覆盖抽象模型方法。

# javascript - 将参数传递给模态 - ColdFusion

> ID：15959439
> 
> 赞同：0
> 
> 时间：2013-04-11T21:45:56.040
> 
> 标签：javascript, coldfusion, coldfusion-9

当我按下他们的名字时，我试图将参数传递给用户配置文件模式。我的表是通过循环动态生成的，其中一个值是这样的：

```
 <td><a href="##" data-reveal-id="profileModal" 
          data-id="#ContactID#">Take Action</a>
   </td> 
```

我试图用来`data-id`传递每个用户的contactID，但是当我的模态打开时我不知道如何使用该参数。目前我正在使用

```
 <td><a href="/admin/_guestProfile.cfm?contactid=#ContactID#" 
           target="_blank" >Take Action</a>
   </td> 
```

这是打开一个新窗口，我正在通过 url 传递参数，但从用户体验的角度来看，我不喜欢这样。

如何获取 data-id 值并将其用于我的模态中的操作。有没有比我试图完成的更好的方法？

我正在使用的插件的名称是`jQuery Reveal Plugin 1.1`，这是包含它的代码的网站[http://www.zurb.com/playground/reveal-modal-plugin](http://www.zurb.com/playground/reveal-modal-plugin)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:08:12.240

您使用的插件功能非常简单。您需要做的是拉入 iframe，以便可以更新访客资料。既然您已经在使用 jquery，为什么不直接使用 juqeryui 中的诊断。这是一个将调用 iframe 的包装器插件：

[https://github.com/miyabis/jquery.iframeDialog](https://github.com/miyabis/jquery.iframeDialog)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T10:57:18.363

您似乎指的是某种 javascript 操作，如下所示：

```
 <a onclick="javascript:openModal(#ContactID#);" href=...> 
```

其中 openModal() 是您需要在某处定义的 javascript 函数。通过jquery实现模态的AA非常简单的方法是[http://www.ericmmartin.com/projects/simplemodal/](http://www.ericmmartin.com/projects/simplemodal/)

# boolean-logic - 简化布尔表达式 Q = (a' + b')' + ab'

> ID：15959440
> 
> 赞同：0
> 
> 时间：2013-04-11T21:46:00.933
> 
> 标签：boolean-logic

如何简化以下布尔表达式？

![我的表情](https://i.stack.imgur.com/XWAHk.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T21:50:08.173

我认为从第一条德摩根定律中，您可以将其转换为：

```
Q = A.B + A.B' 
```

哪个是A。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T21:50:57.683

这可以写成

```
Q = A * B + A * B' 
```

就像写

```
Q = A * (B + B') 
```

那是

```
Q = A * 1 => A 
```

# arm - 如何在ARM中获得寄存器值的二进制补码？

> ID：15959446
> 
> 赞同：2
> 
> 时间：2013-04-11T21:46:41.353
> 
> 标签：arm, bit-manipulation

假设我在寄存器 v1 中有一个 32 位有符号整数。我想让这个值的二进制补码存储在另一个寄存器 v2 中。在普通数学中，这意味着我需要翻转所有 32 位，然后加 1。

我如何翻转位？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T23:01:39.333

试试这个，（MVN 移动与否定）：

```
MVN v2, v1 
```

就像你问的那样“翻转位”。然后你就做+1：

```
ADD v2, v1, #1 
```

或者，您可以只使用 NEG v2、v1 指令（RSB v2、v1、#0 的同义词）在单个指令中执行等效操作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-11T23:06:40.843

或者比 MVN 慢一点：

`MOV v0,-1`

`MUL v2,v1,v0`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-03-30T20:16:05.720

似乎没有专门的命令来反转 ARM 中的寄存器。但下面有一个简单而快速的替代品（用 gdb/qemu 检查过）：

rsb 接收，接收，-1

这将执行以下操作：

输出 = -1 - 输入

这是获得逻辑非的正确程序。

# c# - 将面向方面的编程应用于 Web 服务

> ID：15959447
> 
> 赞同：1
> 
> 时间：2013-04-11T21:46:41.707
> 
> 标签：c#, .net, web-services, aop

我正在寻找一种将 AOP 概念应用于 Web 服务的方法。创建一个普通的类很​​容易做到这一点。

示例 MyClass

通常你可以通过这种方式创建一个类的新实例

```
MyClass NewClass =  new MyClass(); 
```

要使用 AOP 创建这个类的实例及其周围的切面，您通常有一个库来指定类类型和要应用的切面。

示例 MyClass

```
MyClass NewClass = MyProxyClassManager.CreateNewAOPClass(typeof(MyClass)); 
```

然而，当尝试为附加到您的 Web 服务的类时，这被证明是具有挑战性的。我需要一种方法，而不是返回附加到 Web 服务的普通类，我可以返回基于 Web 服务类的代理类。

顺便说一句：我正在使用城堡项目应用 AOP。 [http://www.castleproject.org/projects/dynamicproxy/](http://www.castleproject.org/projects/dynamicproxy/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:59:43.567

我不确定您的完整技术堆栈，但使用 WebAPI，您可以创建自定义`DelegatingHandler`的来环绕服务调用。更多详情见官[网](http://www.asp.net/web-api/overview/working-with-http/http-message-handlers)

示例处理程序：

```
public class MessageHandler1 : DelegatingHandler
{
    protected async override Task<HttpResponseMessage> SendAsync(
        HttpRequestMessage request, CancellationToken cancellationToken)
    {
        Debug.WriteLine("Process request");
        // Call the inner handler.
        var response = await base.SendAsync(request, cancellationToken);
        Debug.WriteLine("Process response");
        return response;
    }
} 
```

处理程序注册

```
public static class WebApiConfig
{
    public static void Register(HttpConfiguration config)
    {
        config.MessageHandlers.Add(new MessageHandler1());
        // Other code not shown...
    }
} 
```

# java - 如何将图像添加到 GUI

> ID：15959450
> 
> 赞同：1
> 
> 时间：2013-04-11T21:47:03.167
> 
> 标签：java, image, swing, embedded-resource, imageicon

我想在我的 GUI 中添加一张图片，但它似乎无法显示图片。（也许它找不到它？）我没有收到任何错误，所发生的只是一个空白的 JFrame 弹出。我正在使用 Eclipse，图片在我正在使用的同一个包中。

代码：

```
package josh_package;

import java.awt.*;
import java.awt.event.*;
import java.awt.image.BufferedImage;
import javax.swing.*;
import java.io.File;
import java.io.IOException;
import java.util.logging.Logger;
import java.awt.Image;
import javax.imageio.ImageIO;

public abstract class TrevCard extends JPanel implements ActionListener{

public static void main(String[] args)
{
    JFrame f = new JFrame("Here's Your Card!");
    JLabel label = new JLabel();  
    label.setIcon(new ImageIcon("Ace.png"));

     f.add(label);
     f.setLocationRelativeTo(null);
     f.setSize(600, 300);
     f.setVisible(true);

System.out.println("This is a program for cards!");
PlayingCard MyCard;
    MyCard = new PlayingCard(5,2);

    System.out.println(MyCard.GetValue());
    System.out.println(MyCard.GetSuit());

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T21:56:39.900

您正在使用的[ImageIcon 构造函数](http://docs.oracle.com/javase/6/docs/api/javax/swing/ImageIcon.html#ImageIcon%28java.lang.String%29)将文件名作为参数。因此，此构造函数尝试在磁盘上的当前目录中找到此文件（因为您传递的路径是相对路径）。当前目录不是 Java 源文件所在的目录。它是启动用于执行应用程序的 java 命令的目录。

您不想使用文件 IO 来加载图像。相反，您希望从类路径加载此图像（最终，从包含打包应用程序的 jar 内部）。

为此，请使用[以 URL 作为参数的构造函数](http://docs.oracle.com/javase/6/docs/api/javax/swing/ImageIcon.html#ImageIcon%28java.net.URL%29)，并传递资源的 URL：

```
new ImageIcon(TrevCard.class.getResource("Ace.png")); 
```

（前提是 Ace.png 与 TrevCard 类在同一个包中）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T21:55:54.790

代替

```
label.setIcon(new ImageIcon("Ace.png")); 
```

利用：

```
java.net.URL imgURL = TrevCard.class.getResource("Ace.png");
label.setIcon(new ImageIcon(imgURL)); 
```

# c# - 在 C# 中更改目录路径

> ID：15959451
> 
> 赞同：0
> 
> 时间：2013-04-11T21:47:06.593
> 
> 标签：c#

初学者在这里。

我有一个目录结构，其中有一个文件夹，路径中有一个随机数。

即`c:\folderA\subfolder\dump1\history\var`，`c:\folderA\subfolder\dump22\history\var`

我希望程序动态读取每个目录路径。所以我将路径拆分为“部分路径”+“修复路径”。见代码。

这样做是因为 \dump* 是未知数，我不想对其进行硬编码。

下面的代码片段有效并且成功，但我想从结果中操作字符串的一部分。

这就是我的问题，我不知道如何将分区字符串更改`c:\`为其他内容。可能是新分区`d:\`或 UNC 路径`\\someserver\fileshare`

如果成功，它将如下所示：

```
D:\folderA\subfolder\dump22\history\var 
```

或者

```
\\someserver\fileshare\folderA\subfolder\dump22\history\var 
```

这样做是为了让我可以编写额外的代码来将内容从 \var 移动到另一个目录等。

```
{
    static void Main()
    {

        // Grab directory root

        string[] array1 = Directory.GetDirectories(@"c:\folderA\subfolder\");

        // Display all directory paths
        Console.WriteLine("--- Paths---");
        foreach (string name in array1)
        {
             // Add Partial Path + Fix Path

            String CombinePath = (name + "\\history\\var");
            Console.WriteLine(CombinePath);

            //Results
    //c:\folderA\subfolder\dump1\history\var
            //c:\folderA\subfolder\dump22\history\var

            {

                //pause
                Console.ReadLine();
            }
        }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T21:52:52.630

```
CombinePath.Replace(@"C:\", @"D:\"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T21:58:29.457

您可以定义一个字典数据结构来保存字符串。如果您不想定义自己的字符串路径生成，可以查看[QueryString](http://querystrings.codeplex.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T21:53:09.887

您可以使用[正则表达式进行搜索和替换](http://msdn.microsoft.com/en-gb/library/ms228595%28v=vs.80%29.aspx)

# perl - 如何使用 perl 连接到 postgresql

> ID：15959453
> 
> 赞同：2
> 
> 时间：2013-04-11T21:47:12.240
> 
> 标签：perl, postgresql

```
use DBI;
my $db_host = 'localhost';
my $db_user = 'postgres';
my $db_pass = '12345';
my $db_name = 'postgres';
my $db = "dbi:pg:dbname=${db_name};host=${db_host}";
$dbh = DBI->connect($db, $db_user, $db_pass,{ RaiseError => 1, AutoCommit => 0 }) || die "Error connecting to the database: $DBI::errstr\n";
my $query = "SELECT * FROM random_table";
$ref = $dbh->selectcol_arrayref($query);
print join("\n", @$ref); 
```

当我执行这个文件时。我得到一个错误。它说：

> DBD::pg 初始化失败：无法通过包“DBD::pg”找到对象方法“驱动程序”

我是否需要安装一些驱动程序才能连接到数据库..？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-11T21:52:40.067

是`dbi:Pg`，不是`dbi:pg`。案件很重要。

# bitbucket - 如何在 Bitbucket 上回复用户？

> ID：15959456
> 
> 赞同：1
> 
> 时间：2013-04-11T21:47:21.603
> 
> 标签：bitbucket

我运行了一个 Bitbucket 存储库，今天收到了一封来自用户报告错误消息的电子邮件：

```
John Doe <notifications-noreply@bitbucket.org>

2:17 PM (8 hours ago)

to me
John Doe sent you a message on Bitbucket:

Hi, I can't build svg2xml-dev from scratch. After a fix in pom.xml:

-            <artifactId>pdf2svg-dev</artifactId>
+            <artifactId>pdf2svg</artifactId> 
```

我该如何回复这个人（我已经匿名了他们的名字，但它有两个由空格分隔的组件）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T08:28:04.743

您可以使用 bitbucket 网站重播。

1.  访问 Bitbucket.org
2.  点击登录（如果您还没有登录）
3.  登录后点击您的头像（您可以在右上角找到它）
4.  出现一个弹出菜单。
5.  点击收件箱。
6.  单击以向您发送要重播的消息。
7.  输入您的信息。

# html - HTML 一次性可点击按钮

> ID：15959457
> 
> 赞同：0
> 
> 时间：2013-04-11T21:47:23.190
> 
> 标签：html, css

我有一个只能点击一次的按钮。截至目前，我正在用 Javascript 处理这个问题，但我不喜欢这三件事：

*   它不能无脚本地工作（注意按钮效果，长话短说我们正在使用 Derby）
*   它是有状态的，这会导致其他设计问题
*   似乎应该有一个纯 HTML 或 CSS 解决方案，因为它是一个非常简单且可能很常见的功能。

JS-less的方式来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T21:50:34.473

试试这个 CSS 技巧：

```
<label><input type="radio" /><button>Your button</button></label> 
```

CSS：

```
label>input[type="radio"], label>input[type="radio"]:checked~button {display:none} 
```

这将导致按钮在您单击一次时消失。对于任何更“漂亮”的东西，您将需要使用 JavaScript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T21:50:22.507

JS-less 方式.. 不.. 可能的解决方案是添加一个 JS 函数，将其添加`disabled="disabled"`并绑定到按钮`onClick`，它将不再可点击。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T21:50:33.957

如果页面被重新提供（即有一些服务器端组件），服务器将不得不发送回带有禁用按钮的更新的 HTML。否则，您将在客户端更改 HTML，而 Javascript 就是这样。

# ruby-on-rails - Rails：关闭数据库缓存

> ID：15959465
> 
> 赞同：0
> 
> 时间：2013-04-11T21:47:45.480
> 
> 标签：ruby-on-rails, database

我有一个下拉菜单，其内容来自数据库表`types`。

但是每次我在`types`表中插入一个新条目时，下拉菜单都不会更新，我怀疑数据库缓存已打开，这会阻止更新。

有没有办法关闭缓存，以便它可以立即反映数据库中的更改？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T00:14:14.367

您始终可以使用该方法`.reload`来确保您使用的是对象的最新版本（`.reload`当然，直到调用）

# jquery - 选择不使用 optgroup 触发的更改

> ID：15959470
> 
> 赞同：0
> 
> 时间：2013-04-11T21:48:38.320
> 
> 标签：jquery

我有一个带有 optgroups 的标签：

```
 <div id="quick-zoom">
                Quick Zoom: 
                <select id="quick_zoom_select" name="quick_zoom_select">
                    <option value="0">Default</option>
                    <optgroup label="Computers" id="computers">
                    <option value=.95>iMac G3</option>
                    </optgroup>
                    <optgroup label="Mobiles" id="mobiles">
                    <option value=1.5>Nexus 7(portrait)</option>
                    <option value=1.5>Nexus 7(landscape)</option>
                    </optgroup>
                </select>
            </div>
            <div class="Clear"></div> 
```

和 jQuery 语句来检测 select 的变化：

```
$('#quick_zoom').change(function(){
        Zoom($(this).val());
}); 
```

.change 没有触发。当我删除 optgroup 标签时，它会触发。有人可以告诉我发生了什么吗？

谢谢你，托德

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T21:49:32.663

尝试：

```
$('#quick_zoom_select').change(function(){
        Zoom($(this).val());
}); 
```

您尝试将更改应用到 div 应该在选择时。

这是一个演示：http: [//jsfiddle.net/lucuma/ZSquF/](http://jsfiddle.net/lucuma/ZSquF/)

# android - 列表项视图与新的 Play 商店应用程序一样

> ID：15959473
> 
> 赞同：0
> 
> 时间：2013-04-11T21:48:55.387
> 
> 标签：android, user-interface, google-play

我试图弄清楚谷歌是如何对项目视图进行编码的，如此处的屏幕截图所示

![http://3.bp.blogspot.com/-CtcAk0DkagM/UWOkdFlsGiI/AAAAAAAAABM/dcC0pqhNd6I/s1600/Play+Home+-+Phone.png](https://i.stack.imgur.com/vAI4q.png)

我指的是应用程序、书籍、音乐、列表项视图。我反编译了apk，试图在视图中弄乱，以找出哪个会影响所需的视图，但是在用另一个证书签名后我无法真正安装apk。我该如何去寻找他们编写该视图的方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T22:33:48.163

这是一个非常简单的布局——他们使用的是一个相对布局，一个 ImageView 用于图片，一个 TextView 用于类别名称（应用程序、游戏......）。

我使用了 sdk (tools/monitor.bat) 中提供的 HierachyViewer 来分析布局。![截屏](https://i.stack.imgur.com/DdaS6.png)

我建议您使用它来进一步探索布局。

# oracle - TNS-01153 处理字符串失败

> ID：15959474
> 
> 赞同：0
> 
> 时间：2013-04-11T21:48:55.810
> 
> 标签：oracle, oracle11g, listener

我正在尝试在我的 Oracle 11g 安装中重新启动侦听器，但出现错误：

```
TNS-01153 Failed to process String: - 
```

这是我的listener.ora。我无法弄清楚错误在哪里：

```
# listener.ora Network Configuration File: E:\oracle\product\11.2.0\dbhome\network\admin\listener.ora
# Generated by Oracle configuration tools.

LISTENER =
 (DESCRIPTION_LIST =
 (DESCRIPTION =
  (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1521))
  (ADDRESS = (PROTOCOL = TCP)(HOST = name.comp.com)(PORT = 1521))
)
)

LISTENER_MSORA =
 (ADDRESS_LIST=
  (ADDRESS=(PROTOCOL=tcp)(HOST=localhost)(PORT=1522))
  (ADDRESS=(PROTOCOL=ipc)(KEY=PNPKEY)))

SID_LIST_LISTENER_MSORA=
 (SID_LIST=
  (SID_DESC=
     (SID_NAME=MSORA)
     (ORACLE_HOME = d:\oracle\product\10.1.0\db_1)
     (PROGRAM=hsodbc)
   )
  )  
ADR_BASE_LISTENER = E:\oracle 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T02:18:55.420

这是一个 Windows 服务器，所以我停止了 TNSlistner 服务，打开 Oracle 网络管理器并删除了旧的侦听器并创建了一个新的侦听器，然后重新启动了 TNSlistner 服务。这解决了这个问题。

# adobe - 脚本在后效中自动运行

> ID：15959477
> 
> 赞同：1
> 
> 时间：2013-04-11T21:49:08.000
> 
> 标签：adobe, extendscript, after-effects

我即将创建一个 After Effects 脚本。将来，我想让它在一天的某个时间点（也许每小时）自动运行。如何自动运行脚本或一系列脚本？有没有类似 CRON for PHP 的东西？

谢谢！

# angularjs - 从链接函数单击处理程序调用控制器方法不会更新视图

> ID：15959479
> 
> 赞同：1
> 
> 时间：2013-04-11T21:49:10.880
> 
> 标签：angularjs, angularjs-directive, directive

我的问题如下：我有一个具有隔离范围的指令，我想将“点击”回调绑定到元素。长话短说，我想做类似的事情：

```
...
<div test value='name' call='reset()'></div>
...

app.directive('test', function() {
    return {
        template: '<button>{{value}}</button>', 
        scope: { 
            value: '=', 
            call: '&' 
        },
        link: function(scope, elem, attrs){
            elem.bind('click', function(){
                scope.call();
            })
        }
    }
});

var myCtrl = function($scope){
    $scope.name = 'John';

    $scope.reset = function(){
        $scope.name = "Some random name";
        console.log('reset name!');
    };
} 
```

唉，这不起作用 - 它触发了`reset()`函数，但控制器的范围没有改变（`$scope.name`保持不变）。但是，如果我在模板中进行绑定：

```
template: '<button ng-click="call()">{{value}}</button>' 
```

一切正常。问题是在实际任务中我不使用模板选项，所以我想问一下是否有办法在链接函数中进行这种绑定？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T02:58:48.157

当您在指令中设置的点击处理程序运行时，它会在 Angular 的“外部”运行。 `$scope.name`实际上正在设置（记录它以查看），但是您的视图没有更新，因为 Angular 不知道更改。添加`scope.$apply()`到您的点击处理程序以使 Angular 进入[摘要循环](http://docs.angularjs.org/guide/concepts#runtime)，您的视图将更新。

```
link: function(scope, elem, attrs){
   elem.bind('click', function(){
      scope.call();
      scope.$apply();
   })
} 
```

[小提琴](http://jsfiddle.net/7uMP9/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-06T16:26:03.767

```
<div test value='name' ng-click="call()"></div> 
```

没有指令。

如果你想保持 Angular 风格，你应该 /**不要使用**/ 尽可能少地使用自定义绑定

# html - 使用 Simple_HTML_DOM 不显示抓取的图像

> ID：15959481
> 
> 赞同：0
> 
> 时间：2013-04-11T21:49:20.593
> 
> 标签：html, web-scraping, simple-html-dom, imdb

好吧。我正在从 IMDb 上抓取一张海报，对于我的生活，我无法弄清楚为什么它没有显示 - 我只是得到一个小问号，就像图像丢失一样。这是我当前的代码：

```
<?php    
$p = 1;
foreach($movie_html->find("div[class=image]") as $poster1)
{
    foreach($poster1->find("img") as $poster2)
    {
        $p++;
        if ($p == 1) break;
    }
}
$poster3 = $poster2->src;
?>

<img src="<?php echo($poster3); ?>" height="300"/> 
```

当我只是简单地`echo`使用`$poster3`变量时，它会返回图像的正确 URL（所以我知道代码可以正常工作），但是在实际网页上，我看不到图像。相反，我得到的只是一个小问号，就好像图像不在指定的 URL 上一样。当我右键单击该框并强制 Safari 在新选项卡中打开图像时，我看到图像就坐在那里非常漂亮！但由于某种原因，它没有显示在我的网站上。

有任何想法吗？IMDb 是否将我锁定以防止刮板？或者我的代码中有什么东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T04:48:00.387

这对你有什么作用？

```
<?php
/* getIMDB.php
   -- displays movie poster (and its url as a tool-tip) from an IMDB page
*/
    include_once('../simpleHTML/simple_html_dom.php');

    $url = "http://www.imdb.com/title/tt0246578/";
    $movie_html = file_get_html($url);
    outputImg($movie_html);

function outputImg($movie_html)
{
    $p = 1;
    foreach($movie_html->find("div[class=image]") as $poster1)
    {
        foreach($poster1->find("img") as $poster2)
        {
            $p++;
            if ($p == 1) break;
        }
    }
    $poster3 = $poster2->src;
    echo "<img src='" . $poster3 . "' title='" . $poster3 . "'/>";
}
?> 
```

# html - 用文本扩展 CSS 形状

> ID：15959484
> 
> 赞同：0
> 
> 时间：2013-04-11T21:49:33.117
> 
> 标签：html, css, css-shapes

我一直在努力尝试让这个 CSS 形状随文本扩展，但我不确定这是否可能，因为文本`position:absolute;`在 CSS 形状的上方（或更确切地说是在前面）。

这是我的小提琴：http: [//jsfiddle.net/W2SPd/10/](http://jsfiddle.net/W2SPd/10/)

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:53:18.140

我重新排列了你的 CSS：[更新的小提琴](http://jsfiddle.net/W2SPd/13/)

基本上它涉及删除`position:absolute`和固定宽度，而是允许动态使用（使用`display:inline-block`）并将文本移动到适当的位置`position:relative`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-26T09:54:48.100

修改 span CSS 样式如下：

**CSS**

```
h1 span {
  position: absolute;
  top: -78px;
  width: 111px;
} 
```

[小提琴](http://jsfiddle.net/W2SPd/182/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-26T09:50:37.253

这可以通过使用伪元素来实现，允许您只需要使用单个 div 元素：

```
div{
  margin-left:50px;
  margin-right:50px;
  background:tomato;
  position:relative;
  height:50px;
  display:inline-block;
  }
div:before, div:after{
  content:"";
  position:absolute;
  top:0;
  height:100%;  
  border-top:50px solid tomato;
  }
div:before{
  left:-50px;
  border-left:50px solid transparent;
  }

div:after{
  right:-50px;
  border-right:50px solid transparent;
  }
```

```
<div>This is text</div>
```

# selenium-ide - 使用 Selenium IDE 如何在每次运行脚本时获取动态的字段值

> ID：15959485
> 
> 赞同：2
> 
> 时间：2013-04-11T21:49:41.907
> 
> 标签：selenium-ide

使用 Selenium IDE，您如何在每次脚本运行时获取动态字段值，即下次脚本运行 Field =“that”时 Field =“this”。脚本需要在继续之前将该值输入到文本字段中。这是怎么做到的？我是个新手，我只需要一段代码就可以开始。感谢您的帮助。

我使用另一个工具，我只是提供一个正则表达式，如 jmeter 正则表达式提取器。创造奇迹，但硒我觉得很难。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T09:26:50.957

使用此代码并让我知道它是否有效，您必须存储文本 id 的值，然后在文本 vox 中手动写入值

```
 pause      | 1000
 Storeeval  | prompt("enter the value") | value
 type       | id=fieldText              | ${value} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T08:44:23.523

您可以尝试使用 storeText 命令 - 这可以将值存储为变量，然后使用相关字段的 type 命令调用该变量，例如：

命令 | 目标 | 价值

存储文本 | id=字段 | 字段文本

类型 | id=字段文本 | ${字段文本}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-23T02:04:10.177

假设该字段是文本框，这对我有用：

```
storeValue | id=field      | fieldValue
type       | id=inputValue | ${fieldValue} 
```

# python - Python 中是否有“and”和/或“or”的内置函数版本？

> ID：15959500
> 
> 赞同：14
> 
> 时间：2013-04-11T21:50:40.777
> 
> 标签：python

这个问题是为了好玩；我不希望答案有用。

当我看到人们用 Python 做事时`reduce()`，他们经常利用 Python 中的内置函数，通常来自`operator`模块。

这有效：

```
result = reduce(lambda a, b: a + b, range(5)) 
```

但通常你会看到：

```
from operator import add
result = reduce(add, range(5)) 
```

对我来说奇怪的是该`operator`模块似乎没有 logical 功能`and`。它确实有*按位*和，但不是逻辑`and`的。

所以假设你正在这样做：

```
result = reduce(lambda a, b: a and b, range(1, 6)) 
```

有没有可以在这里使用的内置函数？

我也想知道是否有一个内置函数可以替换`or`.

如果首先将参数映射到布尔值，则可以使用按位和 from `operator`，或者直接使用`bool.__and__`，如下所示：

```
from operator import and_
result = reduce(and_, map(bool, range(1, 6)))
result = reduce(bool.__and__, map(bool, range(1, 6))) 
```

并且同样与`operator.or_()`或`bool.__or__`为`or`操作。但我正在寻找一个不需要映射到布尔值的函数。

如果您确定您的值都是整数，则可以使用`operator.mul`for`and`和`operator.add`for `or`。这将是一个粗略的黑客攻击，我不想要这个答案......特别是考虑到如果遇到许多数字并且它们都不为零，那么乘法会变得多么昂贵！

注意：我知道`all()`和`any()`，它们可以更好地替代`reduce()`. 正如我在顶部所说，我问这个是为了好玩。

注意：具有强制所有值的副作用的函数`bool`将是可接受的答案。内置`and`关键字不这样做：

```
x = 3 and 5  # sets x to 5, not to True 
```

但是出于这个问题的目的，我只对可以`reduce()`用于执行逻辑`and`或`or`操作的函数感兴趣。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T22:41:06.713

`and`我猜 operator 模块中没有and的实际原因`or`是不可能以短路方式评估函数参数 - 这是布尔运算符的重点。所以你的问题的答案是否定的，没有可以模仿的内置函数，也`and/or`不可能编写一个。

`all/any`应用于发电机也是短路的

```
def gen():
    yield 1
    yield this_wont_be_evaluated

print any(gen()) 
```

但我不知道如何使用运行时参数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T22:15:12.377

There are no builtin functions I'm aware of that do this. However, you can define trivial functions that wrap around the operators:

```
>>> def newand(a,b):
...  return a and b
...
>>> def newor(a,b):
...  return a or b
...
>>> reduce(newand, map(bool, range(5))) # Will return False, because bool(0) == False
False
>>> reduce(newand, map(bool, range(1,5))) # Now 0 is excluded
True 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T22:08:19.487

> 注意：具有将所有值强制为 bool 的副作用的函数将是可接受的答案。内置的 and 关键字不这样做

但内置`not`关键字可以。

```
In : not 255
Out: False

In : not 0
Out: True 
```

当然，你必须让你的逻辑倒退，然后：

```
In : not (not 5 and not 0) # mimics: 5 or 0
Out: True 
```

因此，您可以`all()`通过`reduce`、`map`和进行模拟`operator.*`：

```
In : not reduce(operator.or_,map(operator.not_,[1,2,3,4,5])) # mimics all(1,2,3,4,5)
Out: True

In : not reduce(operator.or_,map(operator.not_,[1,2,3,0,5])) # mimics all(1,2,3,0,5)
Out: False 
```

那是（某种）你想要达到的目标吗？恐怕我们不能再靠近了。

# meteor - 如何将 CORS 标头添加到 Meteor 应用程序？

> ID：15959501
> 
> 赞同：14
> 
> 时间：2013-04-11T21:50:41.067
> 
> 标签：meteor, cors

如何在 Meteor`Access-Control-Allow-Origin: *`中为所有响应添加标头（特别是，我对 下的静态文件感兴趣）？`/public/`我需要这个，以便外部网络应用程序可以访问我的 Meteor 应用程序提供的数据。有关启用 CORS[的更多信息，请参见此处](http://enable-cors.org/server.html)。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-11-13T11:27:42.350

Here is a little snippet I wrote. You can use as an example in how to access meteor's core connect and modify headers, also a pretty good drop-in for every meteor project:

```
/**
 * HTTP Header Security
 *
 * enforce HTTP Strict Transport Security (HSTS) to prevent ManInTheMiddle-attacks
 * on supported browsers (all but IE)
 * > http://www.html5rocks.com/en/tutorials/security/transport-layer-security
 *
 * @header Strict-Transport-Security: max-age=2592000; includeSubDomains
 */

var connectHandler = WebApp.connectHandlers; // get meteor-core's connect-implementation

// attach connect-style middleware for response header injection
Meteor.startup(function () {
  connectHandler.use(function (req, res, next) {
    res.setHeader('Strict-Transport-Security', 'max-age=2592000; includeSubDomains'); // 2592000s / 30 days
    return next();
  })
}) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-12T06:26:11.413

有两种方法可以解决这个问题。一种是修改流星代码并将其添加（以便每个文件都有这个标题）。这可能不是一个好主意，因为您不希望每个文件都有这个。但是，如果您确实进行了更改，请连接到应用程序

```
var app = __meteor_bootstrap__.app;
app.use(function(req,res) {
    res.setHeader('access-control-allow-origin', '*');
}); 
```

另一种是使用自定义路由，例如[流星路由器](https://github.com/tmeasday/meteor-router)。通过这种方式，您可以控制要包含标题的文件，因此最好使用类似这样的东西

*服务器端js：*

```
Meteor.Router.add('/yourfile.txt', function() {
    this.response.setHeader('access-control-allow-origin', '*');

    var fs = Npm.require("fs");
    return fs.readFileSync("/public/yourfile.txt", "utf8");

}); 
```

# java - 将对象保存到文件。添加/删除对象的自定义方法

> ID：15959507
> 
> 赞同：0
> 
> 时间：2013-04-11T21:51:01.173
> 
> 标签：java, file-io, fileinputstream, objectoutputstream, file-access

我希望能够将在我的程序中创建的对象保存到文件中。我看过一些关于 ObjectOutputStream 的教程，但问题是，它们只展示了如何保存在 main 方法中创建的特定对象。我想要的是，程序会自动保存每个创建的对象。以我程序中的 Group Object 为例。这是添加方法：

```
public void addGroup(int gid, String groupname) {
    Group newgroup = new Group(gid, groupname);
    if (!Groups.contains(newgroup)) {
        Groups.add(newgroup);
        return;
    }else
        JOptionPane.showMessageDialog(null, "Group with ID " + gid
                + " already exists!", "Error",
                JOptionPane.WARNING_MESSAGE);
} 
```

它是我的数据库类的一部分。我想自动将每个创建的组保存到文件中。这将如何完成？在数据库类中，我在哪里声明新文件？在主要方法中？

我的第二个问题是，如果我删除一个组，使用 remove 方法：

```
public void removeGroup(int gid) {

    if (!Groups.remove(new Group(gid, null))) {
        JOptionPane.showMessageDialog(null, "Group with ID[" + gid
                + "] not present. System unchanged.");
    }

} 
```

如何从文件中删除它？我知道，我不能真正从文件中删除一个对象，但是我将如何清空这个空间？

提前感谢所有帮助:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T21:58:30.270

如果您有权访问 3rd 方库，只需使用 XStream 序列化为 XML。如果没有，您可以序列化并保存。

遵循这样的序列化教程[：http://www.tutorialspoint.com/java/java_serialization.htm](http://www.tutorialspoint.com/java/java_serialization.htm)

我认为您不想尝试从文件中删除任何内容..只需在进行更改时重写它即可。制作几个方法来读取文件，并序列化对象并保存到文件。这是一个例子

组.java

```
import java.io.Serializable;

public class Group implements Serializable
{
/**
 * 
 */
private static final long serialVersionUID = 1L;

private String guid;
private String groupName;

public Group(String guid, String groupName) {
    super();
    this.guid = guid;
    this.groupName = groupName;
}

public String getGuid() {
    return guid;
}
public void setGuid(String guid) {
    this.guid = guid;
}
public String getGroupName() {
    return groupName;
}
public void setGroupName(String groupName) {
    this.groupName = groupName;
}
} 
```

组数据.java

```
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.util.ArrayList;

public class GroupData extends ArrayList<Group>
{
private static final long serialVersionUID = 1L;

public GroupData(){}

public void addGroup(Group group)
{
    this.add(group);
    saveGroupData();
}

public void removeGroup(Group group)
{
    this.remove(group);
    saveGroupData();
}

public void saveGroupData()
{
      try
      {
         FileOutputStream fileOut = new FileOutputStream("C:\\Users\\tester\\group-data.ser");
         ObjectOutputStream out = new ObjectOutputStream(fileOut);

         out.writeObject(this);

         out.close();
         fileOut.close();
      }
      catch(IOException i)
      {
          i.printStackTrace();
      }
}

public void loadGroupData()
{
      try
      {
         FileInputStream fileIn = new FileInputStream("C:\\Users\\tester\\group-data.ser");
         ObjectInputStream in = new ObjectInputStream(fileIn);
         GroupData tmp = (GroupData) in.readObject();

         this.clear();
         this.addAll(tmp);

         in.close();
         fileIn.close();
      }
      catch(IOException i)
      {
         i.printStackTrace();
         return;
      }
      catch(ClassNotFoundException c)
      {
         c.printStackTrace();
         return;
      }
}
} 
```

这是一个测试

测试组.java

```
public class TestGroup {

/**
 * @param args
 */
public static void main(String[] args) 
{

    Group group1 = new Group("123", "testers");
    Group group2 = new Group("456", "programmers");
    Group group3 = new Group("687", "students");

    GroupData groupData = new GroupData();

    groupData.add(group1);
    groupData.add(group2);
    groupData.add(group3);

    groupData.remove(group3);
}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T22:19:20.430

This question can be answered in a number of ways. There are libraries out there for serialization like [XStream](http://xstream.codehaus.org/tutorial.html) that help you to serialize your objects. There area also libraries that will help you [manage persistence](http://xstream.codehaus.org/persistence-tutorial.html) (i.e. writing objects to file and being able to read them back into objects).

For something simple, you might just want to write a [simple text file](http://www.javapractices.com/topic/TopicAction.do?Id=42), or you might want that file [to be binary](http://www.javapractices.com/topic/TopicAction.do?Id=245).

Or you might just want to record the fact that objects were created and include some basic information about them from the objects themselves. For that, you want to look at one of the available log libraries, like [slf4j](http://www.slf4j.org), [java.util.logging](http://www.vogella.com/articles/Logging/article.html), or [log4j](http://logging.apache.org/log4j/1.2/)

As far as deleting things from a file goes, you're essentially reading a file and replacing it without the part you want to erase. [This page](http://kodehelp.com/remove-line-file-java/) has some code that outlines a strategy for accomplishing that.

# mysql - Powershell 和 MySql ExecuteNonQuery 的问题

> ID：15959509
> 
> 赞同：2
> 
> 时间：2013-04-11T21:51:05.520
> 
> 标签：mysql, powershell

我正在处理的 powershell 脚本正在尝试针对数据库运行一些脚本文件 (.sql) 的内容。我知道数据库连接正在工作，并且 powershell 脚本可以查询数据库，因为我已经能够让我的脚本确认数据库中存在一条记录。我遇到的问题是让脚本对数据库执行插入。我的脚本的相关部分是：

```
function RunNonQuery($commandText) {
    $conn = New-Object MySql.Data.MySqlClient.MySqlConnection
    $conn.ConnectionString = GetConnString
    $conn.Open()
    $cmd = $conn.CreateCommand()
    $cmd.CommandText = $commandText
    $rowsAffected = $cmd.ExecuteNonQuery()
    $cmd.Dispose()
    $conn.Close()
    return $rowsAffected
} 
```

“GetConnString”只是一个返回活动连接字符串的方法。$commandText 变量的内容是：

```
-- CreationDate=4/11/2013 1:04:51 PM

INSERT INTO Patch (PatchName) VALUES ('TestFromPatchFile'); 
```

通过调试 powershell 脚本，我可以看出命令文本正在正确地传递到我的“RunNonQuery”方法中。它似乎并没有真正针对数据库执行脚本。$rowsAffected 始终为 0，执行时没有错误。查看实际的数据库，我可以确认插入没有发生。

有人知道我的“RunNonQuery”方法有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T08:23:35.933

`--`您应该替换`CommandText`. `MySqlClient`可能不会注意到换行符，因此，它将注释掉整个命令。

# javascript - 如何在rails应用程序中导入javascript？

> ID：15959510
> 
> 赞同：2
> 
> 时间：2013-04-11T21:51:17.527
> 
> 标签：javascript, ruby-on-rails, api

我在我的 rails 应用程序中使用了谷歌可视化 javascript api，并将其包含在 application.html.erb 文件中：

```
<script type="text/javascript" src="https://www.google.com/jsapi"></script> 
```

为了使脚本和以下代码正常工作，我需要连接到互联网。我取而代之的是，将上述 url 的内容放在我的 rails 应用程序的 assets>javascripts 文件夹中，并将其命名为 jsapi.js。然后我在 application.html.erb 文件中包含以下内容：

```
<%= javascript_include_tag "jsapi" %> 
```

当我在断开连接到互联网时运行我的应用程序时，我能够看到上述文件的内容，因为这是生成的：

```
<script src="/assets/jsapi.js?body=1" type="text/javascript"></script> 
```

但是，我尝试制作的实际图表不起作用。关于为什么会这样的任何建议？我的 index.html.erb （实际使用库）中的 javascript 的完整代码如下：

```
<script type="text/javascript">
      google.load("visualization", "1", {packages:["corechart"]});
      google.setOnLoadCallback(drawChart);
      function drawChart() {
        var options = {
          title: 'Most common phrases in pro-Microsoft Reviews (<%= @reviews.count %> reviews analyzed)',
          vAxis: {title: 'Phrases',  titleTextStyle: {color: 'red'}},
          animation:{
            duration: 2000,
            easing: 'out',}
        };

        var data = google.visualization.arrayToDataTable([
          ['Phrase', 'Frequency'],
            <% @frequency.each do |key,value| %>
                ['<%= key %>', <%= value %>],
            <% end %>
        ]);

        var chart = new google.visualization.BarChart(document.getElementById('chart_div'));
        chart.draw(data, options);

        google.load("visualization", "1", {packages:["corechart"]});
        google.setOnLoadCallback(drawChart);
      }
    </script> 
```

我有一种感觉，这与上面的代码有关。当我删除我包含的第一个 javascript 片段并连接到网络时，它可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T05:43:46.820

如果您查看来自 Google 的 jsapi.js 的顶部，它似乎正在引用其他外部 JS 文件。这些是在整个 JS 文件中使用的变量。

```
google.loader.ServiceBase = 'https://www.google.com/uds';
google.loader.GoogleApisBase = 'https://ajax.googleapis.com/ajax'; 
```

# php - php的垃圾回收可以删除启动脚本的session吗

> ID：15959512
> 
> 赞同：4
> 
> 时间：2013-04-11T21:51:25.927
> 
> 标签：php, session

假设我的 php.ini 文件中有这些设置（这当然不是“正常”设置）：

```
session.gc_maxlifetime = 60
session.gc_probability = 1
session.gc_divisor = 1 
```

这意味着在每个会话初始化中，垃圾收集将运行并清理所有早于一分钟的会话。

假设只有一个用户连接到服务器并运行初始化会话的脚本。如果他/她在 70 秒（或任何超过 60 秒）后再次运行它，他/她自己的会话会被删除吗？

换句话说，垃圾回收是在脚本执行之前还是之后发生的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T23:49:20.870

内置会话 GC 在会话初始化期间启动（[参见 gc_divisor](http://www.php.net/manual/en/sessionhandler.gc.php)），即通过`session_start()`函数启动。当`session.autostart`为真时，`session_start()`在第一行代码之前执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T22:23:49.740

垃圾收集应该在运行脚本之前进行。这是正确的行为。我的意思是，会话应该在之后的任何时候过期`gc_maxlifetime`。PHP 应该在运行脚本之前进行垃圾收集，以确保它正常工作。

然而，我很好奇，并尝试了它，我的测试证实了我的假设。

这是一个简单的测试。使用给定的设置，我测试了存储在 session 中的变量是否在 X 秒后存在，但事实并非如此。所以垃圾收集是在运行脚本之前完成的。

注意：如果您使用 cookie，您还必须将会话 cookie 生命周期设置为过期。

# css - 使用 Javascript 获取浏览器历史记录？

> ID：15959516
> 
> 赞同：1
> 
> 时间：2013-04-11T21:51:40.747
> 
> 标签：css, browser-history, sniffing

这个问题已经被问过很多次了，但大多数问题都是老问题。

我尝试了几种不同的技术：

```
a:visited {} /* read computed style - always returns :link color*/
a:visited {} /* set height and measure that, turns out you can only set various colors */
a:link:after { content:"abc"} /* tried various styles */
/* the same restrictions apply when dealing with nested/child elements */ 
```

我尝试拍摄 div 的“屏幕截图”并将其放入画布中，以便以这种方式获得像素颜色。

我考虑过将半透明的 div 悬停在锚点上，并以某种方式使用它来测量颜色。

我已经尝试从您想要嗅探的站点加载样式表并计时它需要多长时间（在第一次/第二次/...加载时），但结果很奇怪（有时它第一次加载速度更快，就像它实际上更快网络比本地缓存或其他东西）。

```
<script>
    var t = new Date().getTime();
</script>
<link id="test" rel="stylesheet" type="text/css" href="http://l.yimg.com/zz/combo?nn/lib/metro/g/breakingnews/breakingnews_0.0.49.css" />
<script> 
    document.getElementById("test").onload = function () {              var ft = ((new Date().getTime()) - t) + "ms";
        alert(ft);
    };
</script> 
```

[Mozilla 在此处](https://developer.mozilla.org/en-US/docs/CSS/Privacy_and_the_%3avisited_selector)概述了这些安全限制的原因和方式。

历史嗅探是完全不可能的吗？如果是的话，是否有任何标准/公认/用户友好的方式来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T21:59:22.437

正如@boisvert 所指出的，这是对隐私的侵犯。这曾经是可能的，但在最近的浏览器版本上是不可能的。尝试将点击的链接保存在 localStorage 上并稍后检查可能会更好。它不是 100% 有效，但在浏览器端使用 javascript，您永远不会 100%。

作为站点节点，或者您可能希望在服务器端进行。那将是100％有效的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T12:08:25.113

正如评论所强调的那样，您将无法获得浏览器历史信息 - 至少，如果浏览器的设计符合预期 - 因为这是对隐私的侵犯。

有一些有限的选择：

*   该`history`对象具有`back`,`forward`和`length`在当前窗口或框架中前后导航的方法；但是（再次隐私）它是可读的，所以你不能做类似的事情 `x = window.history[0]`
*   *使用 cookie（或会话），您可以维护您网站上的*导航历史记录，并依靠该信息实现用户友好的功能，仅限于您读取 cookie/会话数据的网站。
*   我们可以想象一个多站点版本，首先通过一个中央站点重定向每个链接，该站点将记录历史，并且该站点托管一个 javascript 库，为访问的链接提供功能。它仍然依赖于通过中心位置重定向的每个链接来保存历史记录：因此它仅适用于同意这样做的站点。

# android - 有没有一种方法可以在运行时查询给定设备恰好正在使用哪个布局文件夹？

> ID：15959523
> 
> 赞同：2
> 
> 时间：2013-04-11T21:52:24.260
> 
> 标签：android, layout

我有一个应用程序，我有许多布局文件夹来容纳各种设备，但我发现它很难调试，因为在某些情况下，由于应用程序的不同性质，在某些设备上它会因为以下原因而崩溃ID 拼写错误或布局类型不匹配，但我很难追踪错误发生在哪个特定 XML 文件中，为了简化，我能想到的唯一方法是找出给定设备正在查找的布局文件夹为其布局。

有什么方法可以在运行时获取该信息，还是我被诅咒根据设备规格计算它是哪个文件夹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T02:47:27.527

我曾经遇到过类似的问题，只是创建了一个具有多种布局大小的 XML 布局，布局大小的名称（例如“sw720”）作为 TextView 中的文本。我将它们全部放在一个实用程序库中，并有一种方法可以对其进行膨胀。然后从应用程序中确定 Android 决定为您加载的布局是微不足道的。在不同设备上进行测试以及进行方向更改时非常有用。

我做了正常/大/xlarge/sw600/sw720/w600/w720等。

布局文件只是一个 TextView，除了 android:text= 值之外，所有的布局文件都是相同的。创建 Android 库并完成布局文件只花了大约一个小时，因为您编写了一次布局文件，然后继续将其复制到新的布局文件夹中。我提到的方法只是一个公共静态字符串，它膨胀布局并返回 TextView 的文本。

我用这个作为参考：“支持多个屏幕” [http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

# c# - 为什么 Resharper 标记这个类成员？

> ID：15959525
> 
> 赞同：0
> 
> 时间：2013-04-11T21:52:27.273
> 
> 标签：c#, variables, boolean, resharper

这里的“DeviceInCradle”是灰色的：

```
private bool DeviceInCradle = false; 
```

认为它可能是一个未使用的 var，我将其注释掉，但随后得到，“类或命名空间 'Duckbill.Platypus' 中不存在名称 'DeviceInCradle'”

我可以理解“= false”的灰色化，因为这是默认情况下的布尔值，但为什么它会以这种方式灰色化 var 的名称呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T21:56:14.723

Resharper 希望私有字段名称是驼峰式，而不是 PascalCased。例如，这两个对于 Resharper 来说都应该是可以的：

```
private bool deviceInCradle = false; 
```

或者

```
private bool _deviceInCradle = false; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T21:55:58.337

如果您将鼠标悬停在它上面，它应该会告诉您：

```
Name 'DeviceInCradle' does not match rule 'InstanceField(private)'. Suggested name is '_deviceInCradle'. 
```

换句话说，它的名称与 Resharper 的默认命名约定不匹配。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-11T21:59:14.990

也可能是该变量未在任何地方使用。ReSharper 将使未使用的私有变量变灰。或已设置但从未引用的变量。

# python - Visibility of global variables in imported modules

> ID：15959534
> 
> 赞同：156
> 
> 时间：2013-04-11T21:53:11.403
> 
> 标签：python, namespaces, mysql-python, python-2.6, python-import

I've run into a bit of a wall importing modules in a Python script. I'll do my best to describe the error, why I run into it, and why I'm tying this particular approach to solve my problem (which I will describe in a second):

Let's suppose I have a module in which I've defined some utility functions/classes, which refer to entities defined in the namespace into which this auxiliary module will be imported (let "a" be such an entity):

module1:

```
def f():
    print a 
```

And then I have the main program, where "a" is defined, into which I want to import those utilities:

```
import module1
a=3
module1.f() 
```

Executing the program will trigger the following error:

```
Traceback (most recent call last):
  File "Z:\Python\main.py", line 10, in <module>
    module1.f()
  File "Z:\Python\module1.py", line 3, in f
    print a
NameError: global name 'a' is not defined 
```

[Similar questions have been asked](https://stackoverflow.com/questions/15890014/python-namespaces-with-module-imports) in the past (two days ago, d'uh) and several solutions have been suggested, however I don't really think these fit my requirements. **Here's my particular context:**

I'm trying to make a Python program which connects to a MySQL database server and displays/modifies data with a GUI. For cleanliness sake, I've defined the bunch of auxiliary/utility MySQL-related functions in a separate file. However they all have a common variable, which I had originally defined *inside* the utilities module, and which is the *cursor* object from MySQLdb module. I later realised that the *cursor* object (which is used to communicate with the db server) should be defined in the main module, **so that both the main module and anything that is imported into it can access that object.**

End result would be something like this:

utilities_module.py:

```
def utility_1(args):
    code which references a variable named "cur"
def utility_n(args):
    etcetera 
```

And my main module:

program.py:

```
import MySQLdb, Tkinter
db=MySQLdb.connect(#blahblah) ; cur=db.cursor()  #cur is defined!
from utilities_module import * 
```

And then, as soon as I try to call any of the utilities functions, it triggers the aforementioned "global name not defined" error.

A particular suggestion was to have a "from program import cur" statement in the utilities file, such as this:

utilities_module.py:

```
from program import cur
#rest of function definitions 
```

program.py:

```
import Tkinter, MySQLdb
db=MySQLdb.connect(#blahblah) ; cur=db.cursor()  #cur is defined!
from utilities_module import * 
```

But that's cyclic import or something like that and, bottom line, it crashes too. So my question is:

**How in hell can I make the "cur" object, defined in the main module, visible to those auxiliary functions which are imported into it?**

Thanks for your time and my deepest apologies if the solution has been posted elsewhere. I just can't find the answer myself and I've got no more tricks in my book.

* * *

## 回答 #1

> 赞同：308
> 
> 时间：2013-04-11T22:00:05.603

Globals in Python are global *to a module*, not across all modules. (Many people are confused by this, because in, say, C, a global is the same across all implementation files unless you explicitly make it `static`.)

There are different ways to solve this, depending on your actual use case.

* * *

Before even going down this path, ask yourself whether this really needs to be global. Maybe you really want a class, with `f` as an instance method, rather than just a free function? Then you could do something like this:

```
import module1
thingy1 = module1.Thingy(a=3)
thingy1.f() 
```

* * *

If you really do want a global, but it's just there to be used by `module1`, set it in that module.

```
import module1
module1.a=3
module1.f() 
```

* * *

On the other hand, if `a` is shared by a whole lot of modules, put it somewhere else, and have everyone import it:

```
import shared_stuff
import module1
shared_stuff.a = 3
module1.f() 
```

… and, in module1.py:

```
import shared_stuff
def f():
    print shared_stuff.a 
```

*Don't* use a `from` import unless the variable is intended to be a constant. `from shared_stuff import a` would create a new `a` variable initialized to whatever `shared_stuff.a` referred to at the time of the import, and this new `a` variable would not be affected by assignments to `shared_stuff.a`.

* * *

Or, in the rare case that you really do need it to be truly global everywhere, like a builtin, add it to the builtin module. The exact details differ between Python 2.x and 3.x. In 3.x, it works like this:

```
import builtins
import module1
builtins.a = 3
module1.f() 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-03-30T08:02:38.140

As a workaround, you could consider setting environment variables in the outer layer, like this.

main.py:

```
import os
os.environ['MYVAL'] = str(myintvariable) 
```

mymodule.py:

```
import os

myval = None
if 'MYVAL' in os.environ:
    myval = os.environ['MYVAL'] 
```

As an extra precaution, handle the case when MYVAL is not defined inside the module.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-11T21:59:39.357

A function uses the globals of the module it's *defined* in. Instead of setting `a = 3`, for example, you should be setting `module1.a = 3`. So, if you want `cur` available as a global in `utilities_module`, set `utilities_module.cur`.

A better solution: don't use globals. Pass the variables you need into the functions that need it, or create a class to bundle all the data together, and pass it when initializing the instance.

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-04-17T13:38:53.397

This post is just an observation for Python behaviour I encountered. Maybe the advices you read above don't work for you if you made the same thing I did below.

Namely, I have a module which contains global/shared variables (as suggested above):

```
#sharedstuff.py

globaltimes_randomnode=[]
globalist_randomnode=[] 
```

Then I had the main module which imports the shared stuff with:

```
import sharedstuff as shared 
```

and some other modules that actually populated these arrays. These are called by the main module. When exiting these other modules I can clearly see that the arrays are populated. But when reading them back in the main module, they were empty. This was rather strange for me (well, I am new to Python). However, when I change the way I import the sharedstuff.py in the main module to:

```
from globals import * 
```

it worked (the arrays were populated).

Just sayin'

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-08-14T14:16:02.693

The easiest solution to this particular problem would have been to add another function within the module that would have stored the cursor in a variable global to the module. Then all the other functions could use it as well.

module1:

```
cursor = None

def setCursor(cur):
    global cursor
    cursor = cur

def method(some, args):
    global cursor
    do_stuff(cursor, some, args) 
```

main program:

```
import module1

cursor = get_a_cursor()
module1.setCursor(cursor)
module1.method() 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-11-30T14:34:15.237

Since globals are module specific, you can add the following function to all imported modules, and then use it to:

*   Add singular variables (in dictionary format) as globals for those
*   Transfer your **main** module globals to it .

> addglobals = lambda x: globals().update(x)

Then all you need to pass on current globals is:

> import module
> 
> module.addglobals(globals())

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-10-15T16:16:06.753

Since I haven't seen it in the answers above, I thought I would add my simple workaround, which is just to add a `global_dict` argument to the function requiring the calling module's globals, and then pass the dict into the function when calling; e.g:

```
# external_module
def imported_function(global_dict=None):
    print(global_dict["a"])

# calling_module
a = 12
from external_module import imported_function
imported_function(global_dict=globals())

>>> 12 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-04-12T18:26:36.263

The OOP way of doing this would be to make your module a class instead of a set of unbound methods. Then you could use `__init__` or a setter method to set the variables from the caller for use in the module methods.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-09-02T11:41:54.180

### Update

To test the theory, I created a module and put it on pypi. It all worked perfectly.

`pip install superglobals`

### Short answer

This works fine in Python 2 or 3:

```
import inspect

def superglobals():
    _globals = dict(inspect.getmembers(
                inspect.stack()[len(inspect.stack()) - 1][0]))["f_globals"]
    return _globals 
```

save as `superglobals.py` and employ in another module thusly:

```
from superglobals import *

superglobals()['var'] = value 
```

### Extended Answer

You can add some extra functions to make things more attractive.

```
 def superglobals():
    _globals = dict(inspect.getmembers(
                inspect.stack()[len(inspect.stack()) - 1][0]))["f_globals"]
    return _globals

def getglobal(key, default=None):
    """
    getglobal(key[, default]) -> value

    Return the value for key if key is in the global dictionary, else default.
    """
    _globals = dict(inspect.getmembers(
                inspect.stack()[len(inspect.stack()) - 1][0]))["f_globals"]
    return _globals.get(key, default)

def setglobal(key, value):
    _globals = superglobals()
    _globals[key] = value

def defaultglobal(key, value):
    """
    defaultglobal(key, value)

    Set the value of global variable `key` if it is not otherwise st
    """
    _globals = superglobals()
    if key not in _globals:
        _globals[key] = value 
```

Then use thusly:

```
from superglobals import *

setglobal('test', 123)
defaultglobal('test', 456)
assert(getglobal('test') == 123) 
```

### Justification

The "python purity league" answers that litter this question are perfectly correct, but in some environments (such as IDAPython) which is basically single threaded with a large globally instantiated API, it just **doesn't matter as much**.

It's still bad form and a bad practice to encourage, but sometimes it's just easier. Especially when the code you are writing isn't going to have a very long life.

# jquery - 编辑器所见即所得 - 为什么从单词粘贴不起作用

> ID：15959535
> 
> 赞同：4
> 
> 时间：2013-04-11T21:53:15.667
> 
> 标签：jquery, redactor

我一直在工作岗位表单上使用 Redactor Wysiwyg 编辑器。然而，尽管他们的网站提到了对 word 粘贴的超级清理，但我得到了很多额外的空白`<p>`，`<br />`即使在 word 标记中只有一个段落中断。有什么想法可能导致这种情况吗？还有其他人有同样的问题吗？

谢谢！玛丽亚

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-06-19T13:33:58.437

您需要像这样设置`paragraphy`和`linebreaks`设置：

```
$('#redactor').redactor({
    linebreaks: true,
    paragraphy: false
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-04T17:38:41.820

```
$("#editor").redactor({
    pasteBeforeCallback: function (html) {
        return html.replace(/<p>\s*<\/p>/g, " ");
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-11T16:00:01.810

就我而言，当我在 Internet Explorer 中从 Word 粘贴到 Redactor 10 时，一些文本或段落消失了。那里的解决方案对我有用：

```
$('#redactor').redactor({
    pasteCallback: function(html) {
        html = html.replace("<font>", ""); // Fix Word to IE
        html = html.replace("</font>", ""); // Fix Word to IE
        return html;
    },
}); 
```

当我在粘贴之前删除`<font>`Microsoft Word 生成的标签时，一切正常。

# javascript - 找到开瓶器 iframe 的父级

> ID：15959539
> 
> 赞同：1
> 
> 时间：2013-04-11T21:53:22.093
> 
> 标签：javascript

假设我们在页面 test1.html 中有一个 iframe

```
<iframe src=test2.html"></iframe> 
```

test2.html 中有一个链接：

```
<a href="test3.html" target="_blank">open in new window"</a> 
```

在 test3.html 我怎么知道开瓶器的父级？（即test1.html）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T22:03:26.943

类似的东西`window.opener.top`应该让您获得父级的窗口对象。从那里你可以得到`.location.href`，或者你需要的任何东西。请记住，如果任何文档位于不同的域中，浏览器限制将导致此操作失败。

# eclipse - 无法从 Eclipse 市场卸载

> ID：15959543
> 
> 赞同：1
> 
> 时间：2013-04-11T21:53:34.890
> 
> 标签：eclipse, eclipse-marketplace

我对 eclipse-marketplace (Juno) 有疑问：

我已经通过市场安装了**适用于 M2E 的 Android 配置器。**

Eclipse 解决了以下依赖项：

*   适用于 M2E 的 Android 配置器
*   安卓开发工具
*   平方米

一切都很好，直到我决定再次卸载它。

日食告诉我：

> “m2e - Eclipse 的 Maven 集成”无法完全卸载，因为其他安装的 > 软件需要它。不需要的部分将被卸载。

我确认并卸载了另外两个 Android 相关模块。

不幸的是，我的市场现在处于一个奇怪的状态：当我尝试重新安装**Android Configurator for M2E**时，eclipse 假装它仍然安装，并且只为我提供再次卸载它的选项。

我陷入了无限循环，请帮助:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T07:19:24.640

1.  转到帮助 > 关于 > 已安装的软件。
2.  完全展开所有节点
3.  检查哪些节点也将 m2e 列为依赖项

您应该能够看到还需要安装 m2e 的顶级功能。可能是您的顶级产品（如果您使用 Eclipse For Java Developers）需要 m2e，而您不能简单地卸载它。

# backbone.js - model.destroy() 返回带有 sinatra 后端的错误

> ID：15959544
> 
> 赞同：0
> 
> 时间：2013-04-11T21:53:36.313
> 
> 标签：backbone.js, sinatra, destroy

我在让我的 model.destroy 方法在主干中正常工作时遇到问题。这是我的功能

```
deleteEvent: function(){
    var self = this;
    var check = confirm("Are you sure you want to remove record " + this.model.get("ticket_id"));
    if (check == true){
        this.model.id = this.model.get('session_id');
        this.model.destroy({
            wait: true,
            success: function(model, response, options){
                console.log(options);
                console.log(response);
                self.$el.remove();
            },
            error: function(model, xhr, response){
                console.log("ERROR:");
                console.log(model);
                console.log(xhr);
                console.log(response);
            }
        });
    }
    else return;
}, 
```

该模型如下所示：

```
vkapp.EventRecordModel = Backbone.Model.extend({
urlRoot: '/user_event',
idAttribute:"_id",
defaults: {
    "ticket_id": '',
    "start": '',
    "end": ''
},
validate: function(attrib){ //This is only called when setting values for the model, not on instantiation
    if (attrib.ticket_id == null)
        alert("no ticket number");
    if (attrib.start == undefined)
        alert("no start time");
    if (attrib.end == null)
        alert("no end time");
    if (attrib.start > attrib.end)
        alert("start can't be before the end time.");
} 
```

});

这就是我的 sinatra 中的路线。

```
delete '/user_event/:session_id' do
    user_event = ProjectTimer.get(:session_id => params[:session_id])
    user_event.destroy
end 
```

我不确定为什么会收到错误返回。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:57:43.980

如果您遵循[此答案的建议](https://stackoverflow.com/a/2342589/335847)

```
delete '/user_event/:session_id' do
  user_event = ProjectTimer.get(:session_id => params[:session_id])
  user_event.destroy
  halt 204
rescue => e
  # do something with the exception, maybe log it
  halt 500
  # or set status to 500 and re-raise
end 
```

有关更多信息，请参阅[Sinatra 文档中的](http://www.sinatrarb.com/intro#Halting)[***停止***](http://www.sinatrarb.com/intro#Halting)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:14:28.067

但是，通过将 dataType 设置为“文本”，我确实使它正常工作。我发现 Backbone.sync 期望返回删除对象的 JSON 才能成功。因此，如果我们将 dataType 更改为 Text，它会覆盖 JSON 预期。这是我的最终代码

```
deleteEvent: function(){
    var self = this;
    var check = confirm("Are you sure you want to remove record " + this.model.get("ticket_id"));
    if (check == true){
        this.model.id = this.model.get('session_id');
        this.model.destroy({
            dataType: "text",
            wait: true,
            success: function(model, response, options){
                self.$el.remove();
            },
            error: function(model, xhr, response){
                console.log("ERROR:");
                console.log(model);
                console.log(xhr);
                console.log(response);
            }
        });
    }
    else return;
}, 
```

# php - 为什么这个 php 查询什么也不打印

> ID：15959549
> 
> 赞同：0
> 
> 时间：2013-04-11T21:53:52.190
> 
> 标签：php, mysql

我有以下 PHP 代码，它应该获取“id”与 URL 中的内容匹配的列的“第一个”和“最后一个”值。例如，当 URL 是 时`../Profile?id=1`，它会说`First: Bob Last: Doe`，因为`Bob Doe`附加到`id of 1`.

我使用以下代码执行此操作：

```
session_start();
$id = $_GET['search'];
$dbhandle = mysql_connect("localhost", "SocialAdmin", "******") 
    or die("Unable to connect to MySQL");       
$selected = mysql_select_db("socialdonuttesting",$dbhandle)     
    or die("Could not select database");
$result = mysql_query("SELECT * FROM users WHERE id = '$id'");
$first = $result['first'];
$last = $result['last'];
echo "First: $first Last: $last"; 
```

但由于某种原因，这只是`First: Last:`在我转到`../Profile?id=1`. 有谁知道为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T21:56:08.117

您没有获取结果。

```
$row = mysql_fetch_assoc($result);
echo $row['first'];
echo $row['last']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T21:56:47.307

您需要[http://php.net/manual/en/function.mysql-fetch-row.php](http://php.net/manual/en/function.mysql-fetch-row.php)
但是，删除 mysql_ 用法并使用 PDO。
此外，在您的示例中，您很容易受到 sql 注入的影响。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T21:56:44.140

你没有获取你的查询

尝试这个

```
 session_start();
 $id = $_GET['search'];
 $dbhandle = mysql_connect("localhost", "SocialAdmin", "******") 
 or die("Unable to connect to MySQL");       
 $selected = mysql_select_db("socialdonuttesting",$dbhandle)     
 or die("Could not select database");
 $result = mysql_query("SELECT * FROM users WHERE id = '$id'");
 while($row = mysql_fetch_array($result)){
 $first = $row['first'];
 $last = $row['last'];
 echo "First: ". $first. " Last: ". $last ."</ br>"; } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T22:03:16.480

`$result`是一种资源，你必须使用`mysql_fetch_*`功能。另外，我不建议您在 SQL 查询中使用 *（例如，如果您将来更改表结构，结果会混乱。

# android - 使用 OpenCV4Android 无法同时使用 Evo 4G 的两个摄像头

> ID：15959552
> 
> 赞同：2
> 
> 时间：2013-04-11T21:53:58.890
> 
> 标签：android, opencv, stereo-3d, htc-android

我打算通过从 Evo 3D 的两个后置摄像头拍摄两张照片来计算视差图。但是，我只能使用一台相机。我尝试了不同的索引。

指数

*   0 给我左摄像头（后置摄像头之一）
*   1 给我前置摄像头
*   -1 给了我左摄像头（后置摄像头之一）。

我曾经使用-1索引得到其他相机，但它不再工作了。我正在使用`CameraBridgeViewBase`.

我在 android-opencv 的 Google 小组上看到人们已经成功使用了 Evo 3D 手机的两个摄像头。我想知道怎么做？还有其他指标吗？还是有其他方法可以使用它。

PS 原生相机不工作。（安卓 4.0.3）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T15:47:39.543

随着 ICS 升级，Android 中的立体相机 ID 从 2 更改为 100。这是 Android Camera.open 调用使用的常量。我不认为有任何官方方法可以获取一台或另一台相机。您只能获得一张图像或两张图像。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T14:52:09.127

正如上面的答案所暗示的，我使用 100 作为相机索引，但它不适用于 OpenCV，所以我尝试使用 Android 的相机 SDK，但出现了一些错误。但由于这是 HTC Open Sense SDK 的一部分，我在 Eclipse 上下载了它并使用了[http://www.htcdev.com/devcenter/opensense-sdk/stereoscope-3d/s3d-sample-code/](http://www.htcdev.com/devcenter/opensense-sdk/stereoscopic-3d/s3d-sample-code/)。我使用了基本文件`S3D Camera Demo`并添加了更多功能，以便我可以访问相机图像数据并将其转换为 OpenCV Mat。

因此，我对该代码的功能进行了一些更改`onTouchEvent`，并在那里添加了更多代码。

```
@Override
public boolean onTouchEvent(MotionEvent event) {
    switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:
    //  toggle();
        //Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
        //startActivityForResult(cameraIntent, 1337);
        int bufferSize = width * height * 3;
        byte[] mPreviewBuffer = null;

        // New preview buffer.
        mPreviewBuffer = new byte[bufferSize + 4096];

        // with buffer requires addbuffer.
        camera.addCallbackBuffer(mPreviewBuffer);
        camera.setPreviewCallbackWithBuffer(mCameraCallback);
        break;
    default:
        break;
    }
    return true;
}

private final Camera.PreviewCallback mCameraCallback = new Camera.PreviewCallback() {
public void onPreviewFrame(byte[] data, Camera c) {
    Log.d(TAG, "ON Preview frame");
    img = new Mat(height, width, CvType.CV_8UC1);
    gray = new Mat(height, width, CvType.CV_8UC1);
    img.put(0, 0, data);        

    Imgproc.cvtColor(img, gray, Imgproc.COLOR_YUV420sp2GRAY);
    String pixvalue = String.valueOf(gray.get(300, 400)[0]);
    String pixval1 = String.valueOf(gray.get(300, 400+width/2)[0]);
    Log.d(TAG, pixvalue);
    Log.d(TAG, pixval1);
        // to do the camera image split processing using "data"
}
}; 
```

您从相机获得的图像处于`YUV420s`模式，我最初在访问数据时遇到问题，因为我创建了一个 4 通道 Mat。实际上，它只需要 1 个通道 Mat。

# php - 在 PhpStorm 中关闭自动完成

> ID：15959553
> 
> 赞同：10
> 
> 时间：2013-04-11T21:54:05.117
> 
> 标签：php, ide, editor, phpstorm

现在，如果我输入`$`Jetbrains PhpStorm IDE，它会显示一大堆建议（例如已经声明的变量），这会减慢我的输入速度。

有没有办法将 PhpStorm 配置为不这样做？换句话说，关闭自动完成或仅在我按`Ctrl`+时才自动完成`Space`，而不是在我输入时才自动完成`$`？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-11T22:07:08.683

禁用代码完成？

请参阅设置/首选项（取决于操作系统） - IDE 设置 - 编辑器 - 代码完成

在那里你应该找到一个选项`Autopopup code completion in (ms)`

> 如果未选中该复选框，PhpStorm 将不会自动建议代码完成。

另请参阅[联机帮助](https://www.jetbrains.com/help/phpstorm/code-completion.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-06-10T03:54:16.797

这更像是对链接的[“重复”问题](https://stackoverflow.com/questions/24518922/phpstorm-disable-html-autocompletion?lq=1)的回答，但我无法回答这个问题。希望这可以帮助某人。

要禁用 HTML 自动完成，请参阅**Settings -> Editor -> General -> Smart Keys**。

有一个名为**XML/HTML**的部分，您可以在其中切换 HTML 标记和属性的自动完成。

就我而言，我正在寻找禁用`Auto close tags when typing '</'`选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-29T15:33:32.667

我的自动完成功能不起作用，我必须在菜单中执行`File->Invalidate cache...`（并在我的情况下禁用 Nette 测试器插件）

# iup - IUP 矩阵“全行选择”

> ID：15959555
> 
> 赞同：0
> 
> 时间：2013-04-11T21:54:13.593
> 
> 标签：iup

通过尝试使用 IUP 矩阵，我发现它的使用非常直观，即使在较弱的计算机上也能以惊人的速度运行。所以我看到我可以从我需要的大部分控制中获得。但是，由于 IUP 具有非常原始的属性设置方式，我无法让该矩阵表现得像常见的多列列表或 MS 列表视图。

这就是我的格式：

```
Ihandle *create_mat(void)
{
mat = IupMatrix(NULL);

IupSetAttribute(mat, "READONLY", "YES");
IupSetAttribute(mat, "HIDEFOCUS", "YES");
IupSetAttribute(mat, "FRAMECOLOR", "220 220 220");
IupSetAttribute(mat, "NUMCOL", "5");
IupSetAttribute(mat, "NUMCOL_VISIBLE", "5");
IupSetAttribute(mat, "NUMLIN", "30");
IupSetAttribute(mat, "NUMLIN_VISIBLE", "30");
IupSetAttribute(mat, "RESIZEMATRIX", "YES");
IupSetAttribute(mat, "MARKMODE", "LIN");
IupSetAttribute(mat, "MARKAREA", "CONTINUOUS");
IupSetAttribute(mat, "MULTIPLE", "NO");
IupSetAttribute(mat, "BORDER", "NO");
IupSetAttribute(mat, "CURSOR", "ARROW");
IupSetAttribute(mat, "ALIGNMENT", "ARIGHT");
IupSetAttribute(mat, "ALIGNMENT1", "ALEFT");
IupSetAttribute(mat, "ALIGNMENT5", "ACENTER");
//
IupSetAttribute(mat, "WIDTH0", "30");
IupSetAttribute(mat, "WIDTH1", "150");
IupSetAttribute(mat, "WIDTH2", "50");
IupSetAttribute(mat, "WIDTH3", "50");
IupSetAttribute(mat, "WIDTH4", "50");
//
IupSetAttribute(mat, "0:0", "Row H");
IupSetAttribute(mat, "0:1", "Col1");
IupSetAttribute(mat, "0:2", "Col2");
IupSetAttribute(mat, "0:3", "Col3");
IupSetAttribute(mat, "0:4", "Col4");
IupSetAttribute(mat, "0:5", "Col5");
//
IupSetCallback(mat, "CLICK_CB", (Icallback)click);
IupSetCallback(mat, "LEAVEITEM_CB", (Icallback)leave);
IupSetCallback(mat, "ENTERITEM_CB", (Icallback)enter);
IupSetCallback(mat, "WHEEL_CB", (Icallback)wheel);

return mat;
} 
```

所有带有回调的属性和事件都按预期工作。由于我有一些特定的使用/管理数据的方式，因此需要在单击任何单元格的整行时被选中，或者当我也通过键盘更改位置时。

我还希望能够通过单击行标题来选择带有代码的整行。
除了单击（我按预期捕获）之外，如何检查矩阵上的双击？

最后，不是最重要的，但很高兴知道这里是否存在一种方法来获取系统颜色（主要是蓝色）而不是灰色的选定行？

如何最简单地实现该功能？
(Windows7/64)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T18:38:58.493

以您想要的方式选择行的最简单形式是使用 ENTERITEM_CB 回调：

```
static int enteritem_cb(Ihandle *ih, int lin, int col)
{
  IupSetAttribute(ih,"MARKED", NULL);  /* clear all marks */
  IupMatSetAttribute(ih,"MARK", lin, 0, "Yes");
  IupSetfAttribute(ih,"REDRAW", "L%d", lin);
  return IUP_DEFAULT;
} 
```

当前无法更改选定的线条颜色。实际上因为它不是特定的颜色。标记的单元格在前景色和背景色处使用衰减进行绘制。

# css - div 内部的 iframe 搞乱了父 div 中的其他 div

> ID：15959556
> 
> 赞同：0
> 
> 时间：2013-04-11T21:54:17.317
> 
> 标签：css, html, iframe

所以我有这样的布局：

```
<--------------------------------parent div------------------------------------->
<---div1---><---------------div2----------------><-------------div3-------------> 
```

当我将 iframe 添加到 div3 时，它将 div 2 向下移动到 iframe 高度的正下方，同时保持 div1 相同，因此

```
<--------------------------------parent div------------------------------------->
<---div1--->                                     <-------------div3------------->
                                                                 <-
                                                             iframe height
                                                                 ->
             <---------------div2----------------> 
```

我该如何解决？这是我的 div 代码：

```
<style>
div {padding:5px;}
#frame {width: 400px;height:800px;border: none;-moz-transform: scale(0.9);
    -moz-transform-origin: 0 0;-o-transform: scale(0.9);-o-transform-origin: 0 0;
    -webkit-transform: scale(0.9);-webkit-transform-origin: 0 0;
}
</style>
<div>
     <div style="float:left; width:16.5% ">.... </div>
     <div style="display:inline-block;width:30%; ">....</div>
     <div style="display:inline-block; width:28.5%; "> <iframe> </iframe></div>
</div>
<div style="clear:both "></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:55:52.943

添加`margin: 0; padding: 0; float: left`到`div`和`#frame`。

# eclipse - 有没有办法在两个不同的项目中使用 AspectJ 来编织 jUnit 测试？

> ID：15959558
> 
> 赞同：0
> 
> 时间：2013-04-11T21:54:21.803
> 
> 标签：eclipse, junit, aspectj, ajdt

我试图在一个 java 项目中的 JUnit 测试中拦截 webdriver 方法。我用 Aspects 创建了另一个项目，但无法将它们集成在一起工作。基本上我需要在测试进行时在控制台上打印消息。

谁能指出我不使用 Spring 的任何方向？（搜索网络提供了大量的 Spring 教程）。我正在使用安装了 AJDT 的 Eclipse Juno。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:51:58.070

为了将一个项目编织到另一个项目中，您需要将方面放置在测试项目的方面路径上。去做这个：

1.  将您的测试项目转换为 AJ 项目
2.  项目 -> 属性 -> AspectJ 构建 -> 方面路径
3.  添加方面项目
4.  完整构建

这应该有效。或者，如果您无法将测试项目转换为 AJ 项目，请将测试项目添加到方面项目的 In 路径中。然后从方面项目的类文件中启动测试。

更多关于 inpath 和方面路径的信息：http: [//eclipse.org/aspectj/doc/released/devguide/ajc-ref.html](http://eclipse.org/aspectj/doc/released/devguide/ajc-ref.html)

# ruby - .map ruby 语句未按预期显示

> ID：15959563
> 
> 赞同：0
> 
> 时间：2013-04-11T21:54:54.563
> 
> 标签：ruby, ruby-on-rails-3, string, map

我有一个有很多连接表并基于该表显示数据。数据已被映射，我已确认变量的类是字符串。

但是在实际表中，它将我返回的 html 中的映射值显示为 ["String"]

例如

```
 <td><%= lead.case_details.map{|case_detail| case_detail.case_type} %></td>

Displays ["AC Suit on Account"] 
```

我也试图通过调用 case_detail.case_type[2..-2] 来分割字符串并得到这个

```
[" Suit on Accou"] 
```

我在同一个表中直接在模型上调用的其他行显示正常

```
<td><%= lead.city.titlecase %></td> 
```

显示器

```
Cityville 
```

在 IRB 我得到这个

```
>> case_detail.case_type
=> "AC Suit on Account"
>> case_detail.case_type.class
=> String 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:57:41.793

我相信您正在寻找[Array#join](http://ruby-doc.org/core-1.9.3/Array.html#method-i-join)

```
lead.case_details.map(&:case_type).join ','
# "AC Suit on Account, Some other case_type, yet another case_type" 
```

# backbone.js - 将本地 Backbone 集合与服务器合并

> ID：15959566
> 
> 赞同：0
> 
> 时间：2013-04-11T21:55:19.673
> 
> 标签：backbone.js, collections, models

我有一个本地骨干集合：

```
var collection = new Backbone.Collection([ { greeting: "hi" }, { greeting: "bye" } ]); 
```

我知道当我运行时`collection.fetch`，Backbone 会`collection.set`根据结果运行。但是，我需要合并来自服务器的响应。说响应是：

```
[ { id: "2", greeting: "hi", name: "Bob" } ] 
```

我希望合并后的结果集合为：

```
[ { id: "2", greeting: "hi", name: "Bob" }, { greeting: "bye" } ] 
```

我知道 Backbone 已经尝试在这里进行一些合并，但是如果我`set`上面的示例响应，则不会发生合并，而是添加了一个新模型。我认为这是因为它由 合并`id`，而这里我们没有任何`id`s（在本地集合中）。在这种情况下，`greeting`是我的唯一标识符/密钥。

我尝试这样做的原因是因为我有一个本地集合，我只是想查看该集合中已经存在的内容（使用 key `greeting`）并合并任何发现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T23:03:28.070

您可以告诉主干对模型上的 id 属性使用不同的键：

```
GreetingModel = Backbone.Model.extend({
  idAttribute: "greeting"
});

GreetingCollection = Backbone.Collection.extend({
  model: GreetingModel
}); 
```

[http://backbonejs.org/#Model-idAttribute](http://backbonejs.org/#Model-idAttribute)

**编辑：**我想你可以为本地和服务器端使用两个单独的集合。

```
var localCollection = new Backbone.Collection([ { greeting: "hi" }, { greeting: "bye" } ]);

ServerCollection = Backbone.Collection.extend({
  url: "/api/"
  ...
});

var serverCollection = new ServerCollection({});

serverCollection.on("reset", function() {   
    localCollection.each(function(localModel) {
        var greeting = localModel.get("greeting");
        serverModel = serverCollection.findWhere({greeting: greeting});
        if(serverModel) {
            localModel.set(serverModel.attributes);          
        } 
    });
});

serverCollection.fetch(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T23:21:27.027

我的解决方案：

```
feeds.fetch({
  add: false,
  remove: false,
  merge: false,
  data: params,
  success: function (feeds, response) {
    // Merge any matches
    _.each(response.results, function (result) {
      _.each(feeds.models, function (feed) {
        // We have to `parse` the result before setting it, as Model#set does
        // not automatically run `parse` (Collection#set does).
        result = feed.parse(result)
        if (feed.get('rssUrl') === result.rssUrl) feed.set(result)
      })
    })
    cb(feeds)
  }
}) 
```

# html - 我的问题

> ID：15959568
> 
> 赞同：0
> 
> 时间：2013-04-11T21:55:23.763
> 
> 标签：html, css, footer

我有一个 3 容器结构。容器 1 的高度为 x...容器 2 填充了窗口的其余部分...容器 3 应该在容器 2 之后启动，但它消失了。

[JSFIDDLE](http://jsfiddle.net/xFWHk/)

HTML

```
<header>
</header>
<div id="maincontent">
</div>
<footer>
</footer> 
```

CSS：

```
html,body{padding:0; margin:0;}

    header{
        background-color:red; 
        height:1.8em;
    }
    #maincontent{
        background-color:black; 
        position:absolute;
        top:1.8em;
        bottom:0;
        width:100%;

    }
    footer{
        background-color:yellow;
        height:50px;
    } 
```

我怎样才能得到容器 3（页脚跟随容器 2）。我知道导致问题的容器 2 的绝对位置，但这是我可以让容器填满屏幕的唯一方法。

我试过玩弄利润无济于事；

更清楚地解释我想要实现的目标：

容器 1 + 容器 2 = 100% 高度。然后滚动查看容器 3。

我可以在 javascript 中实现这一点，但希望在 css 中是可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T22:00:11.950

因为`#maincontent`有绝对定位，`footer`所以在它的下方`header`。`position: absolute`用来放在`footer`页面底部；然后更改`bottom: 0`为`bottom: 50px`for `#maincontent`。小提琴：http: [//jsfiddle.net/xFWHk/1/](http://jsfiddle.net/xFWHk/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T22:17:29.527

I've solved it, FINALLY!

```
footer{
        background-color:yellow;
        height:50px;
        width:100%;
        position:absolute;
        bottom:-50px;
    } 
```

added absolute to the footer and a negative margin. Will see how this goes.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T22:01:12.127

将#maincontent 的底部属性更改为页脚的高度，即：

```
#maincontent {
   top: 1.8em;
   bottom: 50px /* Height of footer */
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T22:03:06.543

这是一个修复： http: [//jsfiddle.net/xFWHk/2/](http://jsfiddle.net/xFWHk/2/) ...您不需要绝对定位，因为“容器 2”将跟随“容器 1”作为文档的自然流程。CSS：

```
html, body {height:100%;padding:0; margin:0;}

    header{
        background-color:red; 
        height:1.8em;
    }
    #maincontent{
        background-color:black; 
        width: 100%;
        height: 100%;

    }
    footer{
        background-color:yellow;
        height:50px;
    } 
```

# timesten - 查询以找出特定时间实例中的行数

> ID：15959578
> 
> 赞同：0
> 
> 时间：2013-04-11T21:56:09.037
> 
> 标签：timesten

是否可以在特定时间找出所有表中的行数（不取决于任何列值）？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-16T17:35:34.200

try:

```
select sum(num_rows) 
from user_tables; 
```

user_tables is a timesten table with useful information about the tables in the schema. It has a num_rows attribute that will give you what you are looking for.

# xcode - 让 XCode 在调用类中报告测试用例失败

> ID：15959588
> 
> 赞同：1
> 
> 时间：2013-04-11T21:56:52.853
> 
> 标签：xcode, sentestingkit

如果我为测试用例编写一个辅助方法：

```
- (void)testCallsHelper
{
    [self helper]; // Can I get Xcode to highlight the failure here?
}

- (void)helper
{
    STFail(@"Fail"); // Xcode highlights failure here
} 
```

这会很方便，因为使用 Xcode 突出显示可以更快地跳转到发生错误的位置，并且将重复的代码放入辅助方法中也很方便。

# xna - 使用二维数组表示积木时如何赢得破积木游戏

> ID：15959592
> 
> 赞同：0
> 
> 时间：2013-04-11T21:56:58.737
> 
> 标签：xna, multidimensional-array

我刚刚学习 XNA 并开始制作一个简单的 Break The Blocks 游戏。我正在使用二维数组来表示屏幕顶部的块

```
 bricks = new Bricks[18,16];
        for (int y = 0; y < 16; y++)
        {               
            for(int x = 0; x < 18; x++)
            {
                bricks[x, y] = new Bricks(BrickTexture, new Rectangle(x * BrickTexture.Width, y * BrickTexture.Height, 38, 18), Color.Red);
                if (y == 2 || y == 3)
                {
                    bricks[x, y] = new Bricks(BrickTexture, new Rectangle(x * BrickTexture.Width, y * BrickTexture.Height, 38, 18), Color.Blue);
                }
                if (y == 4 || y == 5)
                {
                    bricks[x, y] = new Bricks(BrickTexture, new Rectangle(x * BrickTexture.Width, y * BrickTexture.Height, 38, 18), Color.Green);
                }
                if (y == 6 || y == 7)
                {
                    bricks[x, y] = new Bricks(BrickTexture, new Rectangle(x * BrickTexture.Width, y * BrickTexture.Height, 38, 18), Color.White);
                }
                if (y == 8 || y == 9)
                {
                    bricks[x, y] = new Bricks(BrickTexture, new Rectangle(x * BrickTexture.Width, y * BrickTexture.Height, 38, 18), Color.Pink);
                }
                if (y == 10 || y == 11)
                {
                    bricks[x, y] = new Bricks(BrickTexture, new Rectangle(x * BrickTexture.Width, y * BrickTexture.Height, 38, 18), Color.Purple);
                }
                if (y == 12 || y == 13)
                {
                    bricks[x, y] = new Bricks(BrickTexture, new Rectangle(x * BrickTexture.Width, y * BrickTexture.Height, 38, 18), Color.Navy);
                }
            }
        } 
```

这就是构建块的方式，并使用 foreeach 循环将它们绘制到屏幕上。

```
 foreach (Bricks brick in bricks)
            {
                brick.Draw(spriteBatch);

            } 
```

在我的更新方法中，我为每个循环使用另一个循环并检查球是否与其中任何一个发生碰撞，以及他们是否必须从屏幕上移除砖块。为此，碰撞方法如下。

```
 foreach (Bricks brick in bricks)
            {
                brick.CheckBrickBallCollision(ball);

            } 

    public void CheckBrickBallCollision(Ball ball)
    {
        if (isVisible && ball.Ball2.Intersects(position))
        {
            isVisible = false;
            ball.direction.X *= 0.85f;
            ball.direction.Y *= -1;
        }
    } 
```

我的问题是如何做到这一点，一旦所有的积木都消失了，游戏就获胜了，然后通过改变游戏状态，就会出现一个获胜的画面。

任何想法都会非常有帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T22:36:34.930

要在不真正更改任何代码的情况下做到这一点，您只需计算可见砖块的数量即可。

```
int visibleCount = 0;

foreach (Bricks brick in bricks)
{
    brick.CheckBrickBallCollision(ball);

    if (brick.isVisible)
    {
        visibleCount++;
    }
} 

//If there are no visible bricks then the player won!
if (visibleCount == 0)
{
    //Win the Game!
} 
```

作为另一种选择，您可以管理活动积木列表，而不是管理它们的可见性。当砖块被击中时，您可以将其从列表中删除。当列表为空时，您就知道玩家赢了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T23:02:14.637

出于某种原因，看看上面的答案，这就是最终的工作，并认为我会分享

```
 foreach (Bricks brick in bricks)
            {
                brick.CheckBrickBallCollision(ball);
                if (brick.isVisible == true)
                {
                    brokenBlocks -= 1;
                }                                     
            }
            if (brokenBlocks == 40)
            {
                currentGameState = GameState.Won;
            } 
```

# paypal - Paypal 仅在订阅完成后返回验证码？

> ID：15959593
> 
> 赞同：1
> 
> 时间：2013-04-11T21:57:02.103
> 
> 标签：paypal, paypal-sandbox, paypal-ipn, paypal-subscriptions

我正在尝试为 Paypal 设置订阅付款。我正在使用以下代码测试沙箱。

```
<form action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post" target="_top">
   <br/>
   <input type="hidden" name="cmd" value="_s-xclick"><br/>
   <input type="hidden" name="hosted_button_id" value="3PFTX58KDNXHQ"><br/>
   <input type="image" src="https://www.sandbox.paypal.com/en_US/i/btn/btn_subscribeCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!"><br/> 
   <img alt="" border="0" src="https://www.sandbox.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1"><br/>
</form> 
```

上面的代码是我的沙盒帐户中自动生成的 subxcription 按钮代码。

它是沙盒中订阅的工作文件。我的意思是订阅完成后，它会在我的沙盒帐户中显示正确的数据以及订阅信息。但问题是当订阅完成并且用户返回站点时，它有一个 auth get 参数。喜欢

`http://my-site.com/this-subscribe-button-return-url.php?auth=[auth_code_from_paypal]&form_charset=UTF-8`

其实我的返回网址如下 [http://my-site.com/this-subscribe-button-return-url.php?status=success](http://my-site.com/this-subscribe-button-return-url.php?status=success)

我启用了我的 ipn，它指向与返回 url 不同的 url。

**这个身份验证值是多少？我该怎么办？**

当有人完成对某个 url（如 notify_url）的订阅过程时，我希望将整个订阅数据发回。我已经在我的 ipn 设置中设置了我的 notify_url。

请有人为这些问题提供适当的解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:21:51.927

您希望如何获取信息，或者您尝试使用什么方法？如果你想取回信息并验证它，你想使用[PDT](https://www.x.com/developers/paypal/documentation-tools/paypal-payments-standard/integration-guide/paymentdatatransfer)。这也将允许您验证发送给您的信息。

# linux - ping 的替代方案

> ID：15959594
> 
> 赞同：13
> 
> 时间：2013-04-11T21:57:03.027
> 
> 标签：linux, unix, amazon-ec2, ping, network-tools

我想查看 Amazon EC2 实例是否打开，但默认情况下 Amazon EC2 会阻止 ping 请求。有一种方法可以通过更改实例的安全策略来做到这一点。除此之外，最接近“查看服务器是否响应”并且轻量级的替代方案是什么？

是`curl`一个不错的选择吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-11T21:59:45.230

我想`curl`这正是你想要的。像所有表现良好的 unix 程序一样，如果出现任何问题，它会返回错误代码：

```
[cnicutar@ariel ~]$ curl www.no-such-website.com
[cnicutar@ariel ~]$ echo $?
6 
```

此外，您可能希望使用`--connect-timeout`它来确保它不会永远等待。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-11T22:24:03.227

如果服务器已启动且 Web 服务器守护程序已关闭，CURL 将无法快速检查。一种替代方法是使用诸如`hping3`. 如果您获得 RST，则服务器已启动。

```
hping3 -c 1 -V -p 80 -s 5050 -A example.fqdn 
```

您可以做的是首先尝试 CURL 测试，失败时尝试第二种方法来确认服务器已关闭，而不仅仅是 Web 服务器守护程序。

这种方法的问题在于，像这样的杂散 TCP 数据包可能会被中间代理过滤。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-12T08:31:57.670

如果你能`ssh`做到，那就完蛋了。一个简单的检查方法`nc`是：（ `nc -zv 111.222.333.444 22` 将 111.222.333.444 替换为您的实例的 IP 地址）

# vim - 设置 vimwiki 默认值

> ID：15959601
> 
> 赞同：4
> 
> 时间：2013-04-11T21:57:35.030
> 
> 标签：vim, grep

情况：我正在使用 vimwiki，我停下来对 emacs/org-mode 进行了短暂的调情，然后尖叫着跑回 vim。我认为现在是清理我的 kludgy 设置的好时机，所以我从一个新的 ~/.vim 目录开始，安装了病原体，我一直在以这种方式添加包。

很奇怪的是，当我去启动一个新的 vimwiki 索引文件时，我得到了消息：

```
Vimwiki: Make new directory: /home/thomas/Dropbox/wiki/wiki 
```

尽管我的 .vimrc 包含

```
let g:vimwiki_list = [{'path':'~/cerebra/wiki', 'path_html':'~/cerebra/export/html/'}] 
```

也就是说，它试图将 wiki 保存在一个几乎但不完全的地方，就像我以前的 vimwiki 安装一样，而忽略了我给它的新设置。

我敢打赌，如果我了解如何使用`find`with，`grep`我可以找到此设置的位置，以便我可以将其删除。我检查了 ~/.vim/bundle/vimwiki 中的每个文件，发现那里没有“Dropbox”一词的实例，而且在我的 vimrc 中也不存在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T19:06:02.403

从评论中，事实证明，你`$HOME/cerebra`是一个软链接`/home/thomas/Dropbox/wiki`。

所以 vimwiki 工作得很好。

**小建议**：

您可以考虑在 Dropbox 中创建一个链接，而不是相反。保管箱支持它。

# vb.net - VB.NET Windows 服务主代码

> ID：15959603
> 
> 赞同：1
> 
> 时间：2013-04-11T21:57:46.563
> 
> 标签：vb.net, windows-services

我正在尝试了解 Windows 服务如何使用 vb.net 工作，但我不知道将我的主要代码放在哪里。我所说的主代码是指需要每隔几秒钟运行一次的代码。到目前为止，我能够使用服务自身提供的 onStart 方法编写一个文本文件。我已手动安装该服务并使其运行。

我需要创建某种触发主代码的线程吗？以及采用哪种方法。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T22:00:37.407

使用计时器。他们在每个滴答声上开始一个事件。刻度可以修改为您想要的长度。（间隔）

这是一篇很棒的文章/教程：[http ://www.dreamincode.net/forums/topic/58033-using-timer/](http://www.dreamincode.net/forums/topic/58033-using-timer/)

通过转到工具箱并单击**计时器**并将其添加到表单中，将计时器添加到您的应用程序。然后转到属性并添加您希望它执行事件的时间间隔（以毫秒为单位），将**启用**的属性设置为**true**。

单击表单设计器下方的计时器图标，您将被定向到带有 Timer_Tick 事件的代码编辑器。然后，当我发表评论'你想要它做什么，这是每个滴答声都会执行的代码（你选择的间隔，例如 1000 是一秒）

代码：

```
Private Sub Timer1_Tick(sender As Object, e As EventArgs) Handles Timer1.Tick
    'what you want it to do
End Sub 
```

如果我不清楚这里有一个教程：[https ://www.youtube.com/watch?v=6wWZIuOAyM4](https://www.youtube.com/watch?v=6wWZIuOAyM4)

# javascript - 在 Firefox 插件中使用外部 javascript 文件

> ID：15959612
> 
> 赞同：1
> 
> 时间：2013-04-11T21:58:26.680
> 
> 标签：javascript, firefox-addon, firefox-addon-sdk

我想要做的是在我的 Firefox 插件中包含谷歌翻译 api。我正在用插件生成器编写它。我已经尝试在文档的头部动态加载脚本，但它不起作用，我没有收到任何错误，什么也没有。这是代码：

```
var fileref = doc.createElement('script');
fileref.setAttribute("type","text/javascript");
fileref.setAttribute("src", "https://apis.google.com/js/client.js?onload=st.gApiInit");

if (typeof fileref != "undefined") {
  object=doc.getElementsByTagName("head")[0];
  object.appendChild(fileref);
} 
```

如果我查看页面的源代码，我找不到添加的元素

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:41:31.090

你的代码在哪里执行？它看起来像是一个内容脚本，Addon Builder 基于 Addon-SDK。您应该将这些代码放在一个文件中。这是[文件](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/dev-guide/tutorials/modifying-web-pages-tab.html)。

我认为最好的方法是使用 Greasemonkey。

# scala - 值与引用类型的scala分配

> ID：15959615
> 
> 赞同：1
> 
> 时间：2013-04-11T21:58:32.190
> 
> 标签：scala

我以为我对 Scala 对引用类型（即，从 AnyRef 派生的那些）的处理方式有一定的把握，但现在我不太确定了。

如果我创建一个像这样的简单类

```
class C(var x: Int = 0) {} 
```

并定义一些实例

```
var a = new C
var b = new C(1)
var c = new C(2) 
```

然后我分配

```
a = b 
```

我没有得到（浅）副本，而是对实例的原始引用永远丢失，并且 a 和 b 本质上是同一个对象的“别名”。（这可以通过查看这些项目的地址来看出。）这很好，也很明智。很明显，这些是引用（而不是值），因为我可以

```
c = null 
```

这不会产生错误。

现在，假设我这样做

```
import scala.math.BigInt
var x = BigInt("12345678987654321")
var y = BigInt("98765432123456789")
var z = x + y 
```

这将创建三个 BigInts，分别带有 x、y 和 z，我想，它们是对它们的引用。其实我可以

```
z = null 
```

并再次没有错误。然而，

```
y = x
x += 1 
```

不会导致 y 改变，也就是说，在这种情况下，赋值似乎并没有简单地为 x 引用的对象创建另一个“名称”，而是复制了它**。**

为什么会这样？我找不到任何机制（例如，类似于 C++ 的“复制构造函数”）会被（似乎是）直接引用分配静默调用。

任何解释都将不胜感激，因为两天的网络搜索已被证明是徒劳的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T22:06:05.430

`x += 1` [将被扩展为](https://stackoverflow.com/a/2779270/298389) `x = x + 1`所以它不仅仅是分配。

如果您查看 bigInt 的来源，您会看到 + 创建了新实例：

```
def +  (that: BigInt): BigInt = new BigInt(this.bigInteger.add(that.bigInteger)) 
```

事实上，它在下面使用了 java 的 BigInteger，其添加操作使两个参数都保持不变。

所以在一天结束时基本上发生的是*不可变加法的复制构造函数结果的引用重新分配*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T22:05:53.457

```
y = x
x += 1 
```

BigInt 是不可变的，因此 +1 创建了新的 BigInt，这就是 y 不变的原因。`y`仍然指向前一个对象，同时`x`指向新的 BigInt 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T22:20:23.980

我想它与 BigInt 和类似类的不变性有关，你总是得到一个新的不可变对象。

# php - 试图用json填充listview

> ID：15959618
> 
> 赞同：0
> 
> 时间：2013-04-11T21:59:02.040
> 
> 标签：php, json, jquery-mobile

我正在尝试制作一个高尔夫应用程序/网络应用程序，我可以在其中从列表视图中找到我即将举行的比赛......但是。

如果我想让它成为一个应用程序，我需要使用 json 填充我的列表视图。我对此有点陌生，但尝试过这样的：

我的 json 数据如下所示：

```
[{"season":"OOM '09","course":null,"matchform":"Stableford"},{"season":"OOM '10","course":null,"matchform":"strokeplay"},{"season":"OOM '10","course":null,"matchform":"Stableford"}] 
```

这是我尝试获取它的方法：

```
$(document).ready(function(){   
    $.getJSON("http://appdata.golfacross.com/TEST_matches.php",          
              function(data){
                  var content = []
                  $.each(data , function(i,val){
                      content.push("<li>");
                      content.push("<h3>" + val.season + "</h3>");
                      content.push("<p>" + val.matchform + "</p>");
                      content.push("</li>");   
                  });
                  $("#mathes_list_count").html(content.join(""));
              });
}); 
```

这是我的html：

```
<div data-role="page" id="matches" data-theme="a">

      <div data-role="header" data-position="inline" data-theme="a">
         <h1>upcoming matches</h1>
      </div>

      <div data-role="content" id="matcheslist">

          <ul data-role='listview' id="mathes_list_count"></ul>

      </div>

</div> 
```

我没有得到任何结果：-/ 不知道我是否做对了，是否有任何帮助。我创建了一个 jsfiddle 项目：http: [//jsfiddle.net/jmansa/r88t7/](http://jsfiddle.net/jmansa/r88t7/)

希望提前帮助和感谢:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T22:08:56.957

您不能发出远程 ajax 请求，您需要的是 jsonp，方法是向您的请求 url 附加一个回调，例如：

```
 $.getJSON('http://appdata.golfacross.com/TEST_matches.php?callback=?', {data:'here'}, function(o){

}); 
```

但是该远程主机应该接受 jsonp 调用以返回您的数据。

如果它不支持 jsonp，那么只需在您的主机上创建一个 php 脚本，使用 curl 从远程主机获取数据，然后从 jquery，而不是查询远程主机，查询将执行 curl 的本地 php 文件请求并返回 json 对象。

# c# - 当我运行此应用程序时，如何使主窗体位于任务栏右下角？

> ID：15959619
> 
> 赞同：0
> 
> 时间：2013-04-11T21:59:09.163
> 
> 标签：c#

我已经从这里下载了放大镜效果的源代码文件：

[http://www.codeproject.com/Articles/18235/Simple-Magnifier](http://www.codeproject.com/Articles/18235/Simple-Magnifier)

这是主要的表单代码：

```
///----------------------------------------------------------------------------
/// Class     : MagnifierMainForm
/// Purpose   : Provide simple magnifier. 
/// Written by: Ogun TIGLI
/// History   : 31 May 2006/Wed starting date.
///             22 Dec 2006/Fri minor code fixes and hotsot support addition.
///             01 Apr 2007/Sun XML serialization support added.
///             
/// Notes: 
/// This software is provided 'as-is', without any express or implied 
/// warranty. In no event will the author be held liable for any damages 
/// arising from the use of this software.
/// 
/// Permission is granted to anyone to use this software for any purpose, 
/// including commercial applications, and to alter it and redistribute it 
/// freely, subject to the following restrictions:
///     1\. The origin of this software must not be misrepresented; 
///        you must not claim that you wrote the original software. 
///        If you use this software in a product, an acknowledgment 
///        in the product documentation would be appreciated. 
///     2\. Altered source versions must be plainly marked as such, and 
///        must not be misrepresented as being the original software.
///     3\. This notice cannot be removed, changed or altered from any source 
///        code distribution.
/// 
///        (c) 2006-2007 Ogun TIGLI. All rights reserved. 
///----------------------------------------------------------------------------
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Text;
using System.Windows.Forms;

namespace Magnifier20070401
{
    public partial class MagnifierMainForm : Form
    {
        public MagnifierMainForm()
        {
            InitializeComponent();

            GetConfiguration();

            //--- My Init ---
            FormBorderStyle = FormBorderStyle.None;
            TopMost = true;
            StartPosition = FormStartPosition.CenterScreen;

            mImageMagnifierMainControlPanel = Properties.Resources.magControlPanel;

            if (mImageMagnifierMainControlPanel == null)
                throw new Exception("Resource cannot be found!");

            Width = mImageMagnifierMainControlPanel.Width;
            Height = mImageMagnifierMainControlPanel.Height;

            HotSpot hsConfiguration = new HotSpot(new Rectangle(50, 15, 35, 30));
            hsConfiguration.OnMouseDown += new HotSpot.MouseEventDelegate(hsConfiguration_OnMouseDown);
            hsConfiguration.OnMouseUp += new HotSpot.MouseEventDelegate(hsConfiguration_OnMouseUp);
            hsConfiguration.OnMouseMove += new HotSpot.MouseEventDelegate(hsConfiguration_OnMouseMove);

            HotSpot hsMagnfier = new HotSpot(new Rectangle(10, 15, 30, 30));
            hsMagnfier.OnMouseMove += new HotSpot.MouseEventDelegate(hsMagnfier_OnMouseMove);
            hsMagnfier.OnMouseDown += new HotSpot.MouseEventDelegate(hsMagnfier_OnMouseDown);
            hsMagnfier.OnMouseUp += new HotSpot.MouseEventDelegate(hsMagnfier_OnMouseUp);

            HotSpot hsExit = new HotSpot(new Rectangle(95, 20, 15, 15));
            hsExit.OnMouseUp += new HotSpot.MouseEventDelegate(hsExit_OnMouseUp);

            mHotSpots.Add(hsConfiguration);
            mHotSpots.Add(hsMagnfier);
            mHotSpots.Add(hsExit);

            ShowInTaskbar = false;
        }

        protected override void OnShown(EventArgs e)
        {
            base.OnShown(e);

            if (mConfiguration.LocationX != -1 && mConfiguration.LocationY != -1)
            {
                Location = new Point(mConfiguration.LocationX, mConfiguration.LocationY);
            }            
        }

        private string mConfigFileName = "configData.xml";

        private void GetConfiguration() 
        {
            try
            {                
                mConfiguration = (Configuration)XmlUtility.Deserialize(mConfiguration.GetType(), mConfigFileName);                
            }
            catch 
            {
                mConfiguration = new Configuration();
            }
        }

        private void SaveConfiguration()
        {
            try
            {
                XmlUtility.Serialize(mConfiguration, mConfigFileName);
            }
            catch (Exception e)
            {
                Console.WriteLine("Serialization problem: " + e.Message);
            }
        }       

        private void hsConfiguration_OnMouseMove(Object sender)
        {

        }

        private void hsConfiguration_OnMouseUp(Object sender)
        {
            ConfigurationForm configForm = new ConfigurationForm(mConfiguration);
            configForm.ShowDialog(this);
        }

        private void hsConfiguration_OnMouseDown(Object sender)
        {

        }

        private void hsMagnfier_OnMouseUp(object sender)
        {

        }

        private void hsMagnfier_OnMouseDown(object sender)
        {
            int x = mLastCursorPosition.X;
            int y = mLastCursorPosition.Y;
            MagnifierForm magnifier = new MagnifierForm(mConfiguration, mLastCursorPosition);
            magnifier.Show();
        }

        private void hsMagnfier_OnMouseMove(object sender)
        {

        }        

        private void hsExit_OnMouseUp(Object sender)
        {
            SaveConfiguration();
            Application.Exit();
        }

        protected override void OnPaint(PaintEventArgs e)
        {
            Graphics g = e.Graphics;
            if (mImageMagnifierMainControlPanel != null)
            {
                g.DrawImage(mImageMagnifierMainControlPanel, 0, 0, Width, Height);
            }
        }

        protected override void OnMouseDown(MouseEventArgs e)
        {
            int x = e.X;
            int y = e.Y;

            mPointMouseDown = new Point(e.X, e.Y);
            mLastCursorPosition = Cursor.Position;

            foreach (HotSpot hotSpot in mHotSpots)
            {
                // If mouse event handled by this hot-stop then return!
                if (hotSpot.ProcessMouseDown(e)) return;                
            }            
        }

        protected override void OnMouseUp(MouseEventArgs e)
        {
            foreach (HotSpot hotSpot in mHotSpots)
            {
                // If mouse event handled by this hot-stop then return!
                if (hotSpot.ProcessMouseUp(e)) return;
            } 
        }

        protected override void OnMouseMove(MouseEventArgs e)
        {                        
            foreach (HotSpot hotSpot in mHotSpots)
            {
                // If mouse event handled by this hot-stop then return!
                if (hotSpot.ProcessMouseMove(e))
                {
                    Cursor = Cursors.Hand;
                    return;
                }
            }
            Cursor = Cursors.SizeAll;

            if (e.Button == MouseButtons.Left)
            {
                int dx = e.X - mPointMouseDown.X;
                int dy = e.Y - mPointMouseDown.Y;

                Left += dx;
                Top += dy;

                mConfiguration.LocationX = Left;
                mConfiguration.LocationY = Top;
            }
        }

        private Image mImageMagnifierMainControlPanel = null;
        private List<HotSpot> mHotSpots = new List<HotSpot>();
        private Point mPointMouseDown;
        private Point mLastCursorPosition;
        private Configuration mConfiguration = new Configuration();
    }
} 
```

我试图改变这一行： StartPosition = FormStartPosition.CenterScreen; 但是我改变它的任何东西都不会改变或产生任何影响。

我希望它会在屏幕中央显示表单，它将位于右下角或左下角，所有程序都在任务栏中。

我该怎么做 ？尝试了很多东西，但这条线没有做任何改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T00:41:53.447

找到了。此行更改位置：

```
if (mConfiguration.LocationX != -1 && mConfiguration.LocationY != -1)
            {
                Location = new Point(0,0);//mConfiguration.LocationX, mConfiguration.LocationY);
            } 
```

对于示例 0 ,0 更改左上角的表单位置。谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T22:05:24.800

你可以尝试这样的事情：

```
Form f1 = new Form();
f1.StartPosition = FormStartPosition.Manual;
f1.Left = Screen.PrimaryScreen.WorkingArea.Width - f1.Width;
f1.Top = Screen.PrimaryScreen.WorkingArea.Height - f1.Height;
f1.Show(); 
```

# java - 节点、队列、出队

> ID：15959620
> 
> 赞同：3
> 
> 时间：2013-04-11T21:59:11.227
> 
> 标签：java, queue, nodes, deque

我正在做这个在同一个类中创建队列和出队的小项目，同时使用我自己的 Node 类和接口。

我面临的问题是我已经完成了所有方法，但无法让方法 removeLast 工作，因为在被删除后我无法让后链接到它之前的节点。请帮我提出你的建议？谢谢你。

我的节点类。

```
public class Node<T> {

  T info;
  Node<T> next;

  public Node(T element) {
    info = element;
    next = null;
  }

  public void setInfo(T element) {
    info = element;
  }

  public T getInfo() {
    return info;
  }

  public void setNext(Node<T> next) {
    this.next = next;
  }

  public Node<T> getNext() {
    return next;
  }

} 
```

我的接口类

```
public interface DequeInterface<T> {

  void addFront(T element);

  void addLast(T element);

  T removeFront();

  T removeLast();

  boolean isEmpty();

  int getSize();
} 
```

我的双端类

```
import java.util.NoSuchElementException;

public class Deqeue<T> implements DequeInterface {

  public Node<T> front;
  public Node<T> rear;
  int size;

  public Deqeue() {
    front = null;
    rear = null;
    size = 0;
  }

  @Override
  public T removeFront() {
    if (isEmpty()) {
      throw new NoSuchElementException();
    }
    T element = front.getInfo();
    front = front.getNext();
    size--;
    return element;
  }

  @Override
  public T removeLast() {
    if (isEmpty()) {
      throw new NoSuchElementException();
    }
    T element = rear.getInfo();
    size--;
    return element;
  }

  @Override
  public int getSize() {
    return size;
  }

  @Override
  public boolean isEmpty() {
    return rear == null;
  }

  @Override
  public void addFront(Object element) {
    Node<T> newNode = front;

    if (newNode == null) {
      rear = front;
    }
      front = new Node(element);
      front.setNext(newNode);
      size++;
  }

  @Override
  public void addLast(Object element) {
    Node<T> newNode = rear;

    if (newNode == null) {
      front = rear;
    }
      rear = new Node(element);
      newNode.setNext(rear);
      size++;

    }
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T22:09:03.850

问题是您的列表是单链接的。不幸的是，删除单链表的最后一个节点需要遍历整个列表。一些替代方案：

*   你可以让你的列表双向链接
*   您可以使用随机访问数组而不是链表
*   你可以使用冈崎的[“纯功能数据结构”](http://www.cs.cmu.edu/~rwh/theses/okasaki.pdf)双端队列

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T22:13:08.667

您也可以`Node`参考以前`Node`的内容。这将创建一个双向链表。

```
public class Node<T> {

    T info;
    Node<T> next;
    Node<T> prev;

    public Node(T element) {
        info = element;
        next = null;
        prev = null;
    }

    public void setInfo(T element) {
        info = element;
    }

    public T getInfo() {
        return info;
    }

    public void setNext(Node<T> next) {
        this.next = next;
    }

    public Node<T> getNext() {
        return next;
    }

    public void setPrev(Node<T> prev) {
        this.prev = prev;
    }

    public Node<T> getPrev() {
        return prev;
    }
} 
```

然后在`Deque`课堂上改变你的`removeFront`和`removeLast`方法来解释`prev`

```
public T removeFront() {
    if (isEmpty()) {
       throw new NoSuchElementException();
    }
    T element = front.getInfo();
    front = front.getNext();
    front.setPrev(null); //<<<--------------------------
    size--;
    return element;
}

@Override
public T removeLast() {
    if (isEmpty()) {
       throw new NoSuchElementException();
     }
    T element = rear.getInfo();
    rear.getPrev().setNext(null) //<<<--------------
    rear=rear.getPrev(); //<<<--------------

    size--;
    return element;
 } 
```

当然`addFirst`和`addLast`方法也必须更新

```
@Override
public void addFront(Object element) {
    Node<T> newNode = front;

    front = new Node(element);
    front.setNext(newNode);
    if (newNode == null) {
        rear = front;
    }else{
        newNode.setPrev(front);
    }
    size++;
}

@Override
public void addLast(Object element) {
    Node<T> newNode = rear;
    rear = new Node(element);
    newNode.setNext(rear);

    if (newNode == null) {
        front = rear;
    }else{
        newNode.setNext(rear);
    } 
    size++;
} 
```

如果您不允许更改代码`Node`并且只能更改`removeLast()`方法，那么您可以这样做：

```
@Override
public T removeLast() {
    if (isEmpty()) {
       throw new NoSuchElementException();
     }
    T element = rear.getInfo();
    if(rear==first){
        rear=null;
        first=null;
    }else{
        Node<T> prev = first;
        while(prev.getNext()!=rear){
            prev=prev.getNext();
        }
        rear=prev;
        prev.setNext(null);
   }
    size--;
    return element;
 } 
```

但这将是相当低效的，因为它需要从一开始就遍历整个列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T22:05:26.430

每个节点都应该有一个指向下一个节点**和**前一个节点的指针。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T22:08:05.240

您可以使您的列表双重链接（额外的管理和错误的机会），或者您可以在每次 removeLast 并重新设置为新的最后一个时迭代列表（从最后一个删除时性能更差，尤其是在大型列表上。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T22:09:22.317

最简单的方法是实现一个双向链表，而不是链表。因此，您的节点类将需要跟踪前一个元素。您将需要更新您的添加功能以支持此功能。完成后，您的 remove last 函数将如下所示：

```
 @Override
  public T removeLast() {
    if (isEmpty()) {
      throw new NoSuchElementException();
    }
    T element = rear.getInfo();
    size--;
    rear.getPrev().setNext(null);
    rear = rear.getPrev();
    return element;
  } 
```

# java - 在链表数组中查找最长的链表

> ID：15959625
> 
> 赞同：0
> 
> 时间：2013-04-11T21:59:27.367
> 
> 标签：java, arrays, for-loop, linked-list

我有一个链表数组（邻接表），链表的大部分长度都是 4，但有些会随机超过这个长度。我的目标是遍历数组并找到长度超过 4 的数组（这很容易），然后将索引添加到数组中，例如

```
for (int i = 0; i < 1000; i++){
    if(sWorld[i].length > 4)
         //add i to an array
         // then sort the array 
```

无法真正弄清楚如何做到这一点。我试图添加到一个着墨列表然后链接列表 toArray() 但后来它搞砸了。我只是真的不知道如何在我的 sWorld 数组中添加“i”点来表示新数组中的第一个位置，我将用于大于 4 的数组。

任何帮助将非常感激！

**编辑澄清一点**

我需要大小> 4的位置的索引，但是我想知道我得到的那些索引中的哪个大小最大。也许我在我的操作中没有 100% 清楚，但基本上我试图找出数组中的 1000 个索引中哪个有最多的连接（最长的链表）有意义？

我想知道数组的前 10 个连接索引（也就是哪 10 个具有最大大小的链表）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T22:10:48.780

您可以使用 an`ArrayList`来存储索引：

```
List<Integer> indexes = new ArrayList<Integer>();

for (int i = 0; i < 1000; i++){
    if (sWorld[i].length > 4) {
         //add i to a list (not an array yet)
         indexes.add(i);
    }
    ...
}
// then sort the list
// not necessary, as indexes are inserted in the right order, but if you must...
// Collections.sort(indexes);

// and, if you need an array instead of a list
Integer[] indexesArray = indexes.toArray(new Integer[indexes.size()]); 
```

A`List`或 an`ArrayList`用作可变长度数组。虽然不如实际数组有效。

如上所示，以后不需要对数组进行排序，但是，如果必须，可以使用`Collections.sort()`.

此外，如果您必须使用 an`int[]`而不是`Integer[]`，请查看：[How to convert List<Integer> to int[] in Java?](https://stackoverflow.com/questions/960431/how-to-convert-listinteger-to-int-in-java)

**更新：**

当您想知道更大数组的大小和索引时，这是一个全新的问题。下面是处理它的工作代码。

基本上，每次你找到一个大小大于 4 的数组时，你都会`(index, size)`在列表中添加一对。然后这个列表按大小降序排列。

**在`main()`方法的最后，创建了一个数组 ( `int[] topTenIndexes`)，其中包含 10 个最大数组的索引（索引按数组长度的降序排列）。当没有足够大的（长度 > 4）数组时，结果为 -1。**

```
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collections;
import java.util.List;

public class Example {

    public static void main(String[] args) {
        List<ArrayIndexAndSize> indexes = new ArrayList<ArrayIndexAndSize>();

        int[][] sWorld = {{1},{2,5,5,5,5},{3,6,6,6,6,6}};
        for (int i = 0; i < sWorld.length; i++){
            if (sWorld[i].length > 4) {
                 // add a pair (index, size) to the list
                 indexes.add(new ArrayIndexAndSize(i, sWorld[i].length));
            }
            //...
        }
        // then sort the list by array SIZE, in descending order
        Collections.sort(indexes);
        // Print it!
        System.out.println(indexes);
        /* output:
        "[[Array index: 2; Array size: 6], [Array index: 1; Array size: 5]]"
         */

        // Generating an array with the top ten indexes
        int[] topTenIndexes = new int[10];
        Arrays.fill(topTenIndexes, -1);
        for (int i = 0; i < indexes.size() && i < 10; i++) {
            topTenIndexes[i] = indexes.get(i).index;
        }
        // Print it
        System.out.println(Arrays.toString(topTenIndexes));
        /* output: [2, 1, -1, -1, -1, -1, -1, -1, -1, -1] */
    }

    public static class ArrayIndexAndSize implements Comparable<ArrayIndexAndSize> {
        public int index;
        public int size;
        public ArrayIndexAndSize(int index, int size) {
            this.index = index;
            this.size = size;
        }
        /* Order by size, DESC */
        /* This is called by Collections.sort and defines the order of two elements */
        public int compareTo(ArrayIndexAndSize another) {
            int thisVal = this.size;
            int anotherVal = another.size;
            return -(thisVal<anotherVal ? -1 : (thisVal==anotherVal ? 0 : 1));
       }
        @Override
        public String toString() {
            return "[Array index: "+index+"; Array size: "+size+"]"; 
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T22:11:41.750

如果您有一个数组`LinkedList<?>[] sWorld`（填写您在 for 中使用的类型`?`），请执行以下操作：

```
ArrayList<Integer> listOfLists = new ArrayList<>();

for (int i=0; i<sWorld.size(); i++) {
    if (sWorld[i].size > 4) {
        listOfLists.add(i);
    }
}
Comparator<Integer> sizeComparator = new Comparator<Integer>() {
    public int compare(Integer a, Integer b) {
        return Integer.compare(sWorld[a].size(), sWorld[b].size());
    }
}
Collections.sort(listOfLists, sizeComparator); 
```

# c# - 如何反转 .ToString() 调用

> ID：15959633
> 
> 赞同：2
> 
> 时间：2013-04-11T21:59:57.390
> 
> 标签：c#, .net

C# 中的每个对象都有可能作为 ToString() 流式传输到字符串。考虑到最初生产的字符串，是否有一个衬垫可以逆转这个过程？

所以：

```
var stringSomeObject = SomeObject.ToString(); 
```

然后反转：

```
var someObjectFromToString = ??????.FromString(stringSomeObject); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-11T22:03:31.563

> 考虑到最初生产的字符串，是否有一个衬垫可以逆转这个过程？

不。每种类型都可以选择`ToString()`以任何方式实现愿望。这使得不可能任意往返该值。

往返于某些其他表示的对象通常是通过框架对[对象序列化的支持来处理的。](http://msdn.microsoft.com/en-us/library/ms973893.aspx)

然而，框架中的特定类型确实实现了遵循处理此问题的特定模式的方法。许多默认值类型（`Int32`、`Double`等）实现了一个`.Parse`and`.TryParse`方法，可用于从字符串“往返”。然而，这是必须按类型实现的，并且不适用于任意类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T22:05:22.597

不。 ToString() 不是与对象的双射 - 也就是说，当对两个完全不同的对象调用 ToString() 时，它们可以返回相同的字符串。

例如，值“1”和数字 1 以及我实现返回值“1”的任何类型都返回字符串值“1”。

因此，这种方法返回的任何值 ?????.FromString() 都是不正确的，因为如果我调用 ????.FromString("1") 并返回数字 1，我可以抱怨它没有'不要返回我的重载 ToString 的类。同样，如果它返回我的类型，我可以抱怨它没有返回整数值 1。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T22:06:28.510

您实际上想要序列化和 dserialise 对象。

谷歌'c# serialise'，你会发现很多你可以使用的东西。

例如 xmlserialiser、datacontractserialiser、jsonserialiser 或 binaryformator

我认为 jsonserialiser 是您想要的，它将对象序列化为 json 字符串，

您可以将 json 字符串反序列化回对象

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-28T10:16:07.490

你可以像这样创建一个通用方法：

```
public static T FromString<T>(string value)
{
    var result = default(T);
    if (value != null)
    {
        try {result = (T)Convert.ChangeType(value, typeof(T));  } catch {}
    }
    return result;
} 
```

并像这样使用它：

```
string numberstring = "23";   
int myNumber = FromString<Int32>(numberstring);
// myNumber is now 23

numberstring = "notanumber";   
myNumber = FromString<Int32>(numberstring);
// myNumber is now 0

string decimalstring = "3.14159";
int myDecimal = FromString<Decimal>(numberstring);
// myDecimal is now 3.14159 
```

因此，如果无法转换字符串，则将返回该类型的默认值。可以在此处找到每种类型的默认值：[默认值表（C# 参考）](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/default-values-table)

如果 MS 可以添加 int.FromString(string) 方法作为 .net 框架的一部分，那就太好了，但是如果您愿意，您可以为每种数据类型添加自己的扩展方法（尽管可能不值得努力）

# asp.net-mvc - 将 PartialView 从 JsonResult ActionMethod 返回到 ajax 帖子并将该 PartialView 显示为模态弹出窗口

> ID：15959639
> 
> 赞同：1
> 
> 时间：2013-04-11T22:00:07.540
> 
> 标签：asp.net-mvc, json, jquery, post, partial-views

我正在尝试将 PartialView 或任何其他视图从操作方法返回到 ajax 帖子。我想将 ParitalView 的内容显示为来自 ajax 成功函数的 Jquery Modal 弹出窗口或任何可能的方式。

带有注册表的“MyRegistrationView”在下面提到了表单提交按钮上的 ajax 后调用。

```
 $.ajax({
            url: url,            //http://localhost/MyRegistration/RegisterUser
            type: 'POST',
            dataType: 'json',
            data: ko.toJSON(RegistrationInfoModel),
            contentType: "application/json; charset=utf-8",
            success: function (result) {
                //Do something
            },
            error: function (request, status, error) {
                //Do something
            }
        }); 
```

上面的 ajax 调用转到名为“MyRegistrationController”的控制器，操作方法如下。

```
[HttpPost]
public JsonResult RegisterUser(RegistrationInfo model)
{
   //Register User
   ....
  if(successful)
  {
     return Json(new { data = PartialView("_ShowSuccessfulModalPartial") });   
  }

} 
```

现在

1.  如何在 ajax 的“成功”功能中取回“_ShowSuccessfulModalPartial”的“内容”，并将其显示为同一注册页面上的模态弹出窗口。
2.  如果我想将其返回/重定向到其他视图，如果我将 JsonResult 作为我的 ActionMethod 的返回类型，我该怎么做。
3.  如何将注册过程中的 ModalErrors 发送回我的视图并在 ValidationSummary 下显示它们。

（注意：如果我不使用 JsonResult 作为返回类型，我会得到 ajax 'parseerror' Unexpected token <）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T23:13:36.627

您可以返回部分视图而不是 json。

在您的主视图中，您应该像这样添加对话框 html（假设您使用的是 jQueryUI）：

```
<div id="dialog-confirm" title="Your title">    
    <div id="dialog-content"></div>
</div> 
```

确保初始化对话框。

```
$(document).ready(function() {
    $("#dialog-confirm").dialog();
}); 
```

在控制器中，您可能需要返回部分视图：

```
[HttpPost]
public virtual ActionResult RegisterUser(RegistrationInfo model)
{
    var model = //Method to get a ViewModel for the partial view in case it's needed. 
    return PartialView("PartialViewName", model);
} 
```

然后，当您执行 ajax 请求时，将部分视图附加到对话框中，然后显示它。

```
 $.ajax({
            url: url,          
            type: 'POST',
            dataType: 'json',
            data: ko.toJSON(RegistrationInfoModel),
            contentType: "application/json; charset=utf-8",
            success: function (result) {
                $("#dialog-content").empty();
                $("#dialog-content").html(result);
                $("#dialog-confirm").dialog("open");
            },
            error: function (request, status, error) {
                //Do something
            }
        }); 
```

希望这可以帮助。

# javascript - 按钮不会改变颜色 (HTML5)

> ID：15959643
> 
> 赞同：0
> 
> 时间：2013-04-11T22:00:32.557
> 
> 标签：javascript, jquery, html, css

我有三个按钮，它们的作用很像单选按钮 - 一次只能*选择*一个：

```
<button id="btn-bronze" name="btn-bronze" type="button" class="blue-selected">Bronze</button>
<button id="btn-silver" name="btn-silver" type="button">Silver</button>
<button id="btn-gold" name="btn-gold" type="button">Gold</button> 
```

对于正常的未选中状态，所有按钮都使用渐变背景：

```
#btn-bronze
{
    float: left;
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0.0, #F8F8F8), color-stop(1.0, #AAAAAA));
    -webkit-border-top-left-radius: 6px;
    -webkit-border-bottom-left-radius: 6px;
    width: 33%;
    height: 100%;
}

#btn-silver
{
    float: left;
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0.0, #F8F8F8), color-stop(1.0, #AAAAAA));
    width: 33%;
    height: 100%;
}

#btn-gold
{
    float: left;
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0.0, #F8F8F8), color-stop(1.0, #AAAAAA));
    -webkit-border-top-right-radius: 6px;
    -webkit-border-bottom-right-radius: 6px;
    width: 33%;
    height: 100%;
} 
```

选中时，选中的按钮应该添加这个类来修改背景颜色：

```
.blue-selected
{
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0.0, #FFFFFF), color-stop(1.0, #6699CC));;
} 
```

这是`jQuery`在主体加载时调用的方法中完成的：

```
$("#btn-bronze").click(function() 
{

    console.log("bronze");
    $(this).addClass('blue-selected');
    $("#btn-silver").removeClass('blue-selected');
    $("#btn-gold").removeClass('blue-selected');
});

$("#btn-silver").click(function() 
{
    console.log("silver");
    $("#btn-broze").removeClass('blue-selected');
    $(this).addClass('blue-selected');
    $("#btn-gold").removeClass('blue-selected');
});

$("#btn-gold").click(function() 
{
    console.log("gold");
    $("#btn-broze").removeClass('blue-selected');
    $("#btn-silver").removeClass('blue-selected');
    $(this).addClass('blue-selected');
}); 
```

当我单击其中一个按钮时，会出现控制台日志消息，但背景颜色保持不变。我究竟做错了什么？**[这是小提琴](http://jsfiddle.net/PhDBrown/4ZygH/)**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T22:10:56.700

我会解决一些问题。

使用类而不是 ID 定位。我留下了 ID，但你现在并不需要它们：

```
<button class="btn" id="btn-bronze" name="btn-bronze" type="button" class="blue-selected">Bronze</button>
<button class="btn" id="btn-silver" name="btn-silver" type="button">Silver</button>
<button class="btn" id="btn-gold" name="btn-gold" type="button">Gold</button> 
```

然后我会使用这些样式。这样我就可以在不创建新样式的情况下添加更多按钮：

```
 .btn
 {
   float: left;
   background: -webkit-gradient(linear, left top, left bottom, color-stop(0.0, #F8F8F8), color-stop(1.0, #AAAAAA));
   width: 33%;
   height: 100%;
}

.btn:first-child {
   -webkit-border-top-left-radius: 6px;
   -webkit-border-bottom-left-radius: 6px;
}

.btn:last-child {
   -webkit-border-top-right-radius: 6px;
   -webkit-border-bottom-right-radius: 6px;
}

.btn.blue-selected
{
   background: -webkit-gradient(linear, left top, left bottom, color-stop(0.0, #FFFFFF), color-stop(1.0, #6699CC));
} 
```

最后，我将简化 javascript：

```
$(".btn").click(function () {
    $(".btn").removeClass("blue-selected");
    $(this).addClass('blue-selected');
}); 
```

[http://jsfiddle.net/4ZygH/1/](http://jsfiddle.net/4ZygH/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T22:05:58.187

`#btn-bronze`比 具有更高的特异性`.blue-selected`，因此其背景优先。

你可以通过使用来解决这个问题`!important`，但这可能不是最好的解决方案。

最可靠的是如果父元素也有一个 ID，那么您可以选择`#parent-element>.blue-selected`并获得更高的特异性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T22:06:19.883

ID 选择器比类选择器具有更高的优先级。你可以`important`在你的css代码中使用。

# javascript - 基于样式类名称查找所有无线电输入的jQuery方法

> ID：15959644
> 
> 赞同：1
> 
> 时间：2013-04-11T22:00:34.703
> 
> 标签：javascript, jquery

我正在使用下面的 javascript 函数来获取页面上的所有单选按钮并清除它们。问题是我不想清除所有这些。有没有办法只清除一组？我认为我可以对它们进行逻辑分组的唯一方法（因为它们是由服务器端映射动态生成的）是给所有我想要的未选中的通用样式类名称并以这种方式搜索。关于如何修改以下内容以使其仅找到具有特定样式类名称的某些单选按钮的任何想法？align-top 是我的 styleClass 名称。

```
<script type="text/javascript">
       function clearOtherSelections(selRow){
           var radios = jQuery('td > input[type=radio]');
           radios.attr('checked', false);
           selRow.checked = 'checked';                   
       }
</script> 
```

当我使用下面的修改后的代码时，`var radios = jQuery('.align-top');`警告所有收音机都未选中，这是不真实的。当我使用我的旧方式`var radios = jQuery('td > input[type=radio]');`时，它显示一个收音机检查了其他收音机，这是正确的。为什么不`jQuery('.align-top');`显示无线电检查的准确状态？

**修改后的代码：**

```
function clearOtherSelections(selRow){
                        //var radios = jQuery('td > input[type=radio]');
                        var radios = jQuery('.align-top');                        
                        for( i = 0; i < radios.length; i++ ) {
                            if( radios[i].checked ) {
                                alert('checked')
                                radios.attr('checked', false);
                            }else{
                                alert('unchecked')
                            }
                        }

                        selRow.checked = 'checked';                    
                    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T22:03:26.733

我建议：

```
function clearOtherSelections(selRow){
    var radios = jQuery('td > input.specificClassName:radio');
    radios.prop('checked', false);
    selRow.checked = 'checked';                   
} 
```

您正在设置`checked` *property*，而不是*attribute*，所以使用`prop()`方法，而不是`attr()`.

如果该类仅应用于`input`您要设置样式的特定元素，则可以使用，只需：

```
var radios = jQuery('.specificClassName'); 
```

或者：

```
var radios = jQuery('input.specificClassName'); 
```

参考：

*   [`prop()`](http://api.jquery.com/prop/).
*   [`:radio`选择器](http://api.jquery.com/radio-selector/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T22:03:19.647

尝试这个：

```
<script type="text/javascript">
       function clearOtherSelections(selRow){
           var radios = jQuery('td > input[type=radio].someclass');
           radios.prop('checked', false);
           selRow.checked = 'checked';                   
       }
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T14:03:17.440

You can use :radio selector, which comes along with jQuery library, and it is more faster as compare to input[type=radio].

```
$("td > input:radio.yourClass") // Gives you all the radio button which has yourClass 
```

> jQuery : [radio selector](http://api.jquery.com/radio-selector/)

# jquery - Superfish js子菜单顶部对齐

> ID：15959645
> 
> 赞同：0
> 
> 时间：2013-04-11T22:00:35.670
> 
> 标签：jquery, css, superfish

我试图让我的 superfish js 菜单上的子菜单全部对齐到顶部，而不是从父 li 中弹出。我试过这个解决方案： [如何让超级鱼子菜单顶部对齐？](https://stackoverflow.com/questions/12619380/how-to-get-superfish-sub-menus-top-aligned) 它对我不起作用。我的菜单在底部：[http](http://www.chipmandesignarch.com/index.php) ://www.chipmandesignarch.com/index.php ，有没有人指点一下？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T22:23:25.343

首先我建议你不要多次使用ID！ID 始终是**唯一**标识符...将您的更改`<ul id="top">`为`<ul class="top">`.

而且您的 HTML 包含很多`<font>`-Tags。[真的吗？你是认真的？](http://www.cssnewbie.com/replacing-font-tag-tips/) **此元素在 HTML 4.01 中已弃用！**

要解决您的问题，请`position: relative;`从`.sf-menu li`superfish.css 第 8 行中删除

```
/* change this…  */
.sf-menu li {
    position: relative;
}

/* …to this or even remove this style */
.sf-menu li {} 
```

# javascript - 将 JSON 从表单序列化为对象

> ID：15959647
> 
> 赞同：0
> 
> 时间：2013-04-11T22:00:49.043
> 
> 标签：javascript, jquery, html, forms

我正在尝试在提交时转换表单数据以更新 json 对象。

这是我到目前为止所拥有的：

```
var app = {
slidePreviews: "",
selectedTheme: "",
slideDuration: 7000,
    slides: []
};
$(document).ready(function() {

$('#slideForm').on('submit', function(event){
    var slide = $(this).toJSON;
    app.slides.push(slide);
    return false;
});
}); 
```

```
<div id="themeOption"></div> 
<div id="ppt"></div>

<pre><code id="presentation"></code></pre>

<form id="slideForm">
<dl>
    <dt><label for="presTitle">Title of the Presentation:</label></dt>
    <dd><input id="presTitle" type="text" name="presentation.title"/></dd>
</dl>
<dl>
    <dt><label for="slideTitle">Slide Title:</label></dt>
    <dd><input id="slideTitle" type="text" name="presentation.slide.title"/></dd>
</dl>
<dl>
    <dt><label for="slideHeader">Slide Header:</label></dt>
    <dd><input id="slideHeader" type="text" name="presentation.slide.header"/></dd>
</dl>
<dl>
    <dt>Content</dt>
    <dd>
        <textarea rows="5" cols="20" name="presentation.slide.content">Slide content here</textarea>
    </dd>
</dl>
<dl>
    <dt></dt>
    <dd><input type="submit" value="Send" /></dd>
</dl> 
```

我希望使用表单数据更新对象应用程序。当我记录“幻灯片”时，我得到“未定义”。有什么建议么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T22:02:26.790

我认为您需要在通话中添加括号`toJSON()`：

```
var slide = $(this).toJSON(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T22:03:36.530

使用`serialize`函数将表单序列化为 JSON 而不是`toJSON`函数，如下所示：

```
$(this).serialize(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T22:04:10.180

您可以像这样使用 jQuery `serialize()`：

```
var obj = $("#slideForm").serialize(); 
```

# groovy - groovy解析本地html文件

> ID：15959650
> 
> 赞同：1
> 
> 时间：2013-04-11T22:01:14.930
> 
> 标签：groovy

我正在研究一个 groovy 脚本，它将获取所有本地 html 文件并解析其中的某些标签。我尝试使用 html clean 之类的东西，但它不起作用。我试图阅读每一行，但只有当我需要的东西在 1 行时才有效。我在 github 上有这个脚本，[https://github.com/jrock2004/johns-octopress-scripts/blob/master/convertCompiledPosts/convertPosts.groovy](https://github.com/jrock2004/johns-octopress-scripts/blob/master/convertCompiledPosts/convertPosts.groovy)。感谢您的任何意见

编辑：所以我越来越近了。我现在有这个代码

```
def parser = new org.cyberneko.html.parsers.SAXParser()
new XmlParser( parser ).parse( curFile+ "/index.html" ).with { page ->
    page.'**'.DIV.grep { it.'@class'?.contains 'entry-content' }.each {
    println it
    println "--------------------------------"
    }
} 
```

它打印的是

```
DIV[attributes={class=entry-content}; value=[P[attributes={}; value=[As an automation developer, I have learned how to write code in Java. When I am having an issue, one of the nice things that you can do is debug your code, line by line. For the longest I had wished that something like this existed in PHP. I have come to find out that you can actually debug code, like I do in Java. This is such a helpful task because I do not have to waste time using var_dump and such on variables or results. In your apache/php server you need to install and or enable something called, A[attributes={href=http://xdebug.org/}; value=[Xdebug]], . I will work on a tutorial on how to use xdebug while writing code in Sublime Text 2\. So keep an eye out on my blog and or, A[attributes={href=http://www.youtube.com/jrock20041}; value=[YouTube]], channel for this tutorial.]]]] 
```

所以基本上我想要的是我将包含 div 中的 html 元素的文本与类 entry-content 结合起来。如果您想查看该页面，可以在这里找到——http: [//jcwebconcepts.net/blog/2013/02/02/xdebug/](http://jcwebconcepts.net/blog/2013/02/02/xdebug/)

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T08:10:14.147

它确实有效...将此页面的 HTML 保存到文件中，然后您可以对其进行解析。

以下代码打印页面上每条评论的作者姓名：

```
@Grab('net.sourceforge.nekohtml:nekohtml:1.9.16')
def parser = new org.cyberneko.html.parsers.SAXParser()

new XmlParser( parser ).parse( file ).with { page ->
  page.'**'.A.grep { it.'@class'?.contains 'comment-user' }.each {
    println it.text()
  }
} 
```

当`file`设置为`File`指向保存的 HTML（或`String`包含此问题的 URL）时，它会打印：

```
tim_yates
jrock2004
tim_yates 
```

## 编辑：

要打印给定节点的内容，您可以执行以下操作（使用已编辑问题中的示例）：

```
@Grab('net.sourceforge.nekohtml:nekohtml:1.9.16')
import groovy.xml.*

def parser = new org.cyberneko.html.parsers.SAXParser()

new XmlParser( parser ).parse( 'http://jcwebconcepts.net/blog/2013/02/02/xdebug/' ).with { page ->
  page.'**'.DIV.grep { it.'@class'?.contains 'entry-content' }.each { it ->
    println XmlUtil.serialize( it )
  }
} 
```

# angularjs - 用 ng-click 替换 ng-href

> ID：15959653
> 
> 赞同：1
> 
> 时间：2013-04-11T22:01:30.307
> 
> 标签：angularjs

我正在开发一个移动应用程序，发现 angularjs 1.1.4 有一个**ngTap**指令可替代标准**ng-click**。它使应用程序更加健壮，所以我决定用 ng-tap 替换我所有的 ng-href 指令。为此，我创建了一个可从 $rootScope 获得的**“go() ”函数。**问题是它无法解析 url 变量。

这是我的代码。

```
$rootScope.go = function (url) {
    $location.path(url);
} 
```

在模板中：

```
<a class="niceButtonLikeStyled" data-ng-click="go(/somewhere/var.id/)">{{ var.id }}</a> 
```

使用 data-ng-click 因为 ngTap 是可移植的，如果加载了新的 ngMobile，它会替换 ng-click。我的问题似乎与 go() 参数有关（混合静态和可变内容？

也许还有另一种方法，只是将新的 ng-click 绑定到所有链接......或者只是添加自己的指令，该指令将从 ng-href 获取值并进行位置重定向并附加 ng-tap 点击事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-31T19:16:16.993

# ng-click 的 AngularJS 表达式

当您使用[ng-click](https://docs.angularjs.org/api/ng/directive/ngClick)时，您正在调用 AngularJS 表达式。

您当前代码的表达式是这样的：

```
go(/somewhere/var.id/) 
```

您需要引用该字符串：

```
go('/somewhere/' + var.id + '/') 
```

# 其他问题

您的代码的另一个问题：该函数`go`应该在控制器的范围内，而不是在 $rootScope 中：

```
angular.module('MyModule').controller(
  'MyController',
  function ($scope, $location) {
    $scope.go = function (url) {
      $location.path(url);
    }
  }
); 
```

这是您的模板的外观：

```
<div ng-controller="MyController as mycontroller">
  <a class="niceButtonLikeStyled"
     data-ng-click="mycontroller.go('/somewhere/' + var.id + '/')">
    {{ var.id }}
  </a>
</div> 
```

这是代码的最大问题，您使用的是 $rootScope 而不是将所需的变量和函数放在它所属的控制器范围内。

# php - 在PHP中通过引用将函数的返回作为参数传递？

> ID：15959654
> 
> 赞同：1
> 
> 时间：2013-04-11T22:01:34.597
> 
> 标签：php, return-value, pass-by-reference, argument-passing

**这不是重复的，请仔细阅读问题**
这是关于当参数被标记为引用时按值传递的可能性。

* * *

在 PHP 中，您可以将函数的返回值作为引用参数传递给另一个函数。

例如：

```
function dummy(){}

function myFunc(&$var){ // argument by reference
    echo $var ;
}

myFunc('some value') ; // this line gives an error obviously, not a reference
myFunc(dummy('some value')) ; // but this one does not, why? 
```

为什么可以这样做？
它的预期用途是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T22:11:21.730

您的第二个示例给出了严格的标准警告：

```
Strict Standards: Only variables should be passed by reference in X on line Y 
```

我相信这样做是为了向后兼容，因为这之前没有产生任何警告：

```
$last = end( explode( ',', $csv_string)); 
```

因此，为了不破坏该代码，您的示例会发出警告，但会继续。甚至[PHP 手册](http://php.net/manual/en/language.references.pass.php)也指出：

> 不应通过引用传递其他表达式，因为结果未定义。

# python - 三合一正则表达式

> ID：15959658
> 
> 赞同：0
> 
> 时间：2013-04-11T22:01:51.617
> 
> 标签：python, regex, regex-negation, regex-lookarounds

我有一个非常具体的正则表达式请求。我需要匹配字符串

*   包含“m_”，
*   *不*包含“phys_”（总是在“m_”之后的一些字符），
*   *不*以“形状”结尾。

当只使用第一个和最后一个标准时，这个正则表达式似乎工作正常：

```
^.*m_.*(?<!Shape)$ 
```

但是当我添加中间标准时，我迷失了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T22:11:34.217

```
import re

r = re.compile(r'^(?=.*m_)(?!.*m_.+phys_)(?!.+Shape$)')
print r.match("aaa")
print r.match("aaa m_ xx")
print r.match("aaa m_ xx Shape")
print r.match("aaa m_ xx phys_ foo") 
```

基本上，原则是：

```
 ^
  (?= .* should be there)
  (?! .* should not be there) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T22:20:57.730

你想要的正则表达式是

```
^(?=.*m_)(?!.*phys_)(?!.*Shape$).*$ 
```

它将捕获整个字符串，并且每个条件都在它自己的前瞻中。您可以对其进行测试并在[www.debuggex.com](http://www.debuggex.com/?re=%5E%28?=.%2am_%29%28?!.%2aphys_%29%28?!.%2aShape%24%29.%2a%24&flags=&str=m_asdShapefphys)上查看正在发生的事情的可视化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T22:46:47.790

这可以通过 Python 中的普通字符串方法来实现（为了清楚起见，我添加了括号）：

```
("m_" in input) and ("phys_" not in input) and (not input.endswith("Shape")) 
```

我将*（总是在“m_”之后的一些字符）*解释为“phys_”永远不会出现在“m_”前面的提示，而不是允许“phys_”出现在“m_”前面的情况通过。

# ruby-on-rails-3 - 在 Rails 上的嵌套 foreach 循环中查找唯一记录

> ID：15959668
> 
> 赞同：0
> 
> 时间：2013-04-11T22:02:38.677
> 
> 标签：ruby-on-rails-3, loops, foreach, nested, unique

我正在尝试从不同的标签中获取多个帖子，然后是单个用户。

一个帖子有多个标签，例如：-
“没有粉笔的好浆果”（`consumer web`，`big data`）
“宣布干旱的有效方法”（`consumer web`，`sql`）

用户关注多个标签，例如：-
John*关注* `consumer web`，`big data`

因此，当 John 登录时，他会看到来自标签`consumer web`和`big data`. 在上面的示例中，John 的主页向他显示了以下结果。问题是它们是同一篇文章的重复结果。

“没有粉笔
的好浆果” “没有粉笔的好浆果”

导轨代码：

```
<% @tags.each do |mytag| %>
        <% @posts = Post.tagged_with(mytag.name) %>  

        <% @posts.each do |post| %>
               <div> <%= post.title %></div>
        <% end %> 

<% end %> 
```

因此，当 John 登录时，控制器会确定他关注的标签并将这些标签传递给对象 (@tags)。然后上面的循环为每个标签运行两次并返回相同的帖子，因为它属于两个标签。

我想改进代码，即使它发现帖子属于多个标签，后跟同一个用户，它也只能返回 1 个结果。本质上是多个标签的唯一结果。请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T02:39:52.363

你试过`Post.tagged_with(mytag.name).uniq`吗？

# c++ - 请求非类类型“…”中的成员“…”

> ID：15959673
> 
> 赞同：0
> 
> 时间：2013-04-11T22:03:03.330
> 
> 标签：c++, class, map

在我的 c++ 程序中，我有自己的自定义地图，由自定义节点组成，我试图在其中获取“第一”和“第二”值（如 std::map）。我尝试了许多不同的语法，但无济于事。

我知道这个问题的通常解决方法是替换`(*key_Iterator).first`为，`(*key_Iterator)->first`但在这种情况下，我需要能够访问第一种方法中的值。

我在迭代器类中添加了变量，但程序无法识别它们。

```
template <class T, class P>
class Iterator {
  public:
    Node<T,P>* operator*() { return ptr_; }
  private:
    Node<T,P>* ptr_;
    T first;
    P second;
} 
```

任何有关如何正确实施第一个版本和消除此错误的建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T22:49:08.910

（从评论移动）

解决方案是从您的中返回一个*引用*`operator *`，如下所示：

```
Node<T,P> &operator *() { return *ptr_; } 
```

# dojo - 图表列的 onclick 事件期间的 updateSeries 仅在 Chrome 中调试时按预期工作

> ID：15959675
> 
> 赞同：0
> 
> 时间：2013-04-11T22:03:15.770
> 
> 标签：dojo, dojox.charting

使用 dojo，我使用 ColumnsPlot 创建了一个图表。图表按我想要的方式创建和显示。为了处理对列的单击并更改单击列的颜色，我有以下代码：

```
var handler = barChart.connectToPlot("default", function (event) {
  if (event.type == "onclick") {                     
    var currentSeriesData = event.run.data;                            
    barChart.updateSeries("Yearly Offense Count", reverseColors(currentSeriesData, event.index));
    barChart.render();
  }
}); 
```

而 reverseColors 是：

```
reverseColors = function (data, index) {
        var tempData = [];
        for (var i = 0; i < data.length; i++) {
            tempData.push(data[i]);
            if (i == index) {
                tempData[i].fill = "red";
            } else {
                tempData[i].fill = "green";
            }
        }
        console.log(i + " - " + tempData[i].fill);
        return tempData;
    } 
```

我正在 Google 中进行测试并使用开发者工具进行调试。如果我在 if 语句中设置断点并调试应用程序，barChart 将更新，单击的列变为红色，而所有其他列均为绿色（根据需要）。如果我没有调试，barChart 会更新，但所有列都是绿色的（最初图表是用除一个红色列之外的所有绿色列创建的）。

reverseColors 函数在调试时以正确的格式返回数据并使用正确的填充，当不在控制台中调试时，我有 1 个红色，其余项目为绿色，正如预期的那样。但我的图表只有绿色列。

我在搞砸什么？

道场初学者！

编辑：在 Chrome 中不工作，在 Firefox 中工作一次，在 IE8 中工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:04:20.643

该图表定义了一个突出显示。删除突出显示解决了这个问题。

# asp.net - 使用双图像（快速加载缩略图和全尺寸照片）的首选方法是什么？

> ID：15959678
> 
> 赞同：0
> 
> 时间：2013-04-11T22:03:20.807
> 
> 标签：asp.net, image, image-processing, webmatrix, photo-gallery

据报道，由于我的海报/推特照片博客将在月底走上 PC 的道路，我将创建自己的。我不希望页面花费大量时间来加载，所以我想为缩略图使用小（文件大小）图像，但是当访问者点击它以查看它的全尺寸时，显示“真实”图像（全尺寸，从屏幕尺寸角度和文件大小），在一种反向诱饵和开关。

所以我想我需要像这样的子文件夹：

```
Project
    Images
        Thumbnails
        Fullsize 
```

我想像这样的事情已经做了很多。是否有一种接受/“接收”的方式来“缩小”图像以用作缩略图（一些 webby 类型的工具），还是我必须将每张照片一张一张地保存为更小的尺寸？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:47:52.520

我的答案似乎是 Lightbox jQuery 插件：

[http://leandrovieira.com/projects/jquery/lightbox/](http://leandrovieira.com/projects/jquery/lightbox/)

[http://www.designyourway.net/blog/resources/30-efficient-jquery-lightbox-plugins/](http://www.designyourway.net/blog/resources/30-efficient-jquery-lightbox-plugins/)

此外，要自动创建缩略图，请参阅 Irfanview 的缩略图查看器。请参阅[http://www.irfanview.com/](http://www.irfanview.com/)和[http://dev.fyicenter.com/Interview-Questions/HTML/How_do_I_make_a_thumbnail_for_my_image_s_.html](http://dev.fyicenter.com/Interview-Questions/HTML/How_do_I_make_a_thumbnail_for_my_image_s_.html)

# javascript - 如何从 Javascript 文件中调用单个方法

> ID：15959684
> 
> 赞同：2
> 
> 时间：2013-04-11T22:03:47.627
> 
> 标签：javascript, html

在 javascript 资产文件中，我有一个`jstester.js`像这样的文件：

```
function hehe()
{
    alert("wedsdsd");
}
document.write("fdygsdfysdgf"); 
```

然后在`public index.html`文件中我有这个：

```
<!DOCTYPE html>
<html>
<head>
    <title></title>
</head>
<body>
<script src="/assets/jstester.js">
hehe();
</script>

</body>
</html> 
```

所以我认为这就是我可以从我的 Javascript 文件中调用方法但看起来它不起作用，没有消息框出现......那么正确的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T22:22:34.953

这就是你要找的：

```
<body>
    <script src="/assets/jstester.js"></script>
    <script type="text/javascript">hehe();</script>
</body> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T22:23:15.723

如果 a`<script>`有 a`src`则元素的文本内容将被忽略。所以你不能这样做：

```
<script type="text/javascript" src="assets/jstester.js">
  hehe();
</script> 
```

但：

```
<script type="text/javascript" src="assets/jstester.js"></script>
<script>hehe();</script> 
```

# java - 在模型中访问公共关系时出错

> ID：15959687
> 
> 赞同：0
> 
> 时间：2013-04-11T22:04:12.987
> 
> 标签：java, mysql, playframework, persistence, playframework-1.x

在我的项目中，我遇到了一些模型问题。在控制器中，我调用模型内的对象（ManyToOne 关系），如下所示：

```
Logger.debug("my model %s", myModel.relObject); 
```

这可以打印该 relObject 的 toString。我的 relObject 是这样定义的：

```
public class RelObject GenericModel{   
@Id 
@GeneratedValue(strategy= GenerationType.AUTO) 
@Column(name="My_ID")

public Long myId;    

@Column(name="MY_NAME",  length=24, nullable=false,  unique=false)
@Required
@MaxSize(value=24)
public String myName;   

public toString(){
    return myName;
}    
} 
```

但是，如果我在该记录器下面编码：

```
Logger.debug("my model's id %s", myModel.relObject.myId); 
```

它发送一个空值。这发生在我项目的许多模型中。关于为什么以及如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:49:34.243

看来错在根本没有意义。看来 play Framework 的 Controller 类中存在错误。特别是在仅接收一个参数（A Future 对象）的 await 方法中。此方法用于尝试使用诸如 Promise 之类的 Future 对象以创建另一个 Thread 以便它最终不会阻塞整个应用程序。

如果我在项目中的任何地方使用此方法，它直到第二次在没有清理项目的情况下编译时才能正确编译，并导致模型出现奇怪的行为。

我将在堆栈溢出和 googlecode play 论坛中发布另一个主题，并将这些问题的链接粘贴到此处。

# javascript - AJAX：头部等等

> ID：15959690
> 
> 赞同：1
> 
> 时间：2013-04-11T22:04:22.127
> 
> 标签：javascript, ajax, http

对于 URL 的异步快速检查，我使用带有 method=HEAD 的 AJAX：

```
function ajax_quickresponse(url) {
    var xmlhttp = null;
    if (window.XMLHttpRequest)
        xmlhttp = new XMLHttpRequest();
    else if (window.ActiveXObject)
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    if (xmlhttp) {
        xmlhttp.open("HEAD", url, true);
        xmlhttp.onreadystatechange = function () {
            if (xmlhttp.readyState == 4) {
                if ((xmlhttp.status > 199 && xmlhttp.status < 400))
                    ; //OK
                else
                    ; //ERR
            };
        };
        xmlhttp.send(null);
    };
}; 
```

此接收足以检查 http 状态，但似乎在服务器端（url）中止脚本。例如，我可以尝试使用一个简单的 php 脚本 (url="http://my-host.er/test/script.php") 来实现 sleep(2); 并在之后记录成功消息。使用`xmlhttp.open("HEAD", url, true);`，日志中没有成功条目。

使用`xmlhttp.open("GET", url, true);`，日志中有一个成功条目。

但是，使用 GET/POST，javascript 等待 2 秒而不是立即（使用 HEAD）。

状态是立即知道的，javascript 不需要等待最终响应。

如何利用这两种方法？首先，我需要立即获得状态，只要标头进入，并且在外部 url/脚本返回后，我想要另一个侦听器。

例如，首先`alert('http status='+xmlhttp.status);`可能会延迟，具体取决于 url/脚本， `alert('finally completed');`

您是否有提示如何通过一个电话来实现这一目标？

# android - Android：ParsingXMLFiles 仅获取第一个 XML 的值

> ID：15959691
> 
> 赞同：0
> 
> 时间：2013-04-11T22:04:24.123
> 
> 标签：android, parsing, arraylist, xmlpullparser

嗨，我设计了一个文件资源管理器，我用它来显示一些 XML 文件，并根据所选的文件打开一个 XML 或另一个。直到现在完全没有问题，在 XMLPullParser 的帮助下，我将属性中的文本插入到一些 ArrayList 中。问题是，如果我返回并选择另一个 XML 文件，这些值与以下 XML 相同，并且以下 XML 会发生这种情况。我认为问题在于一旦调用新实例，arrayLists 就不会为空。

以下是它的工作原理： FileExporer 我在其中显示文件并单击任何人。

```
public class MainActivity extends ListActivity {

    private List<String> item = null;
    private List<String> path = null;
    private String root;
    private TextView myPath;
    static File file;
    static String texto;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        myPath = (TextView)findViewById(R.id.path);

        root = Environment.getExternalStorageDirectory().getPath();

        getDir(root);
    }

    private void getDir(String dirPath)
    {
        myPath.setText("Location: " + dirPath);
        item = new ArrayList<String>();
        path = new ArrayList<String>();
        File f = new File(dirPath);
        File[] files = f.listFiles();

        if(!dirPath.equals(root))
        {
            item.add(root);
            path.add(root);
            item.add("../");
            path.add(f.getParent());    
        }

        for(int i=0; i < files.length; i++)
        {
            File file = files[i];

            if(!file.isHidden() && file.canRead() && (file.getName().endsWith("xml"))){

                path.add(file.getPath());
                if(file.isDirectory()){
                    item.add(file.getName() + "/");
                }else{
                    item.add(file.getName());

                } 
            }   
        }

        ArrayAdapter<String> fileList =
                new ArrayAdapter<String>(this, R.layout.row, item);
        setListAdapter(fileList);   
    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        // TODO Auto-generated method stub
         file = new File(path.get(position));

        if (file.isDirectory())
        {
            if(file.canRead()){
                getDir(path.get(position));
            }else{
                new AlertDialog.Builder(this)
                    .setIcon(R.drawable.ic_launcher)
                    .setTitle("[" + file.getName() + "] folder can't be read!")
                    .setPositiveButton("OK", null).show();  
            }   
        }else {
            file = new File(path.get(position));
            file.getName();

            XMLPullParser.Parse(this);
            texto = XMLPullParserHandler.getA(0);
        }

            Parseo();
                Intent i = new Intent(MainActivity.this, Correccion.class);
                                     startActivity(i);
                 MainActivity.this.finish();

          }

    public void Parseo(){

    }

    public static String fileName(){
        return file.getName();
    }
    public static String getText(){
        return texto;
    }

} 
```

XMLPullParser：表示需要读取的文件，调用一个新的XMLPullParserHandler实例。

```
public class XMLPullParser{
    static String Fichero;
     public static void Parse(Context context){

            try {
                List<Puntuacion> puntuacion;
                XMLPullParserHandler parser = new XMLPullParserHandler();
                File dir = Environment.getExternalStorageDirectory();
                File yourFile = new File(dir, MainActivity.fileName());
                FileInputStream iStream =  new FileInputStream(yourFile);

                puntuacion = parser.parse(iStream);

            } catch (IOException e) {
                e.printStackTrace();
            }
     }
} 
```

XMLPullParserHandler：我认为这是问题所在，当我创建文本并将其添加到 ArrayLists 时：例如在本例中的**ArrayList 中**

```
public class XMLPullParserHandler {

   List<Puntuacion> puntuaciones;

    private  Puntuacion puntuacion;

    static List<String> nombres = new ArrayList<String>();
    static List<String> a = new ArrayList<String>();

    private  String text;

    public XMLPullParserHandler() {
    //  puntuaciones.clear();
      //  puntuaciones.removeAll(puntuaciones);
        puntuaciones = new ArrayList<Puntuacion>();
       ;
    }

    public  List<Puntuacion> getPuntuacion() {
        return puntuaciones;
    }

    public List<Puntuacion> parse(InputStream is) {
        XmlPullParserFactory factory = null;
        XmlPullParser parser = null;
        try {

            factory = XmlPullParserFactory.newInstance();
            factory.setNamespaceAware(true);
            parser = factory.newPullParser();

            parser.setInput(is, null);

            int eventType = parser.getEventType();
            while (eventType != XmlPullParser.END_DOCUMENT) {
                String tagname = parser.getName();
                switch (eventType) {
                case XmlPullParser.START_TAG:
                    if (tagname.equalsIgnoreCase("TEST")) {
                        // create a new instance of puntuacion

                        puntuacion = new Puntuacion();

                    }
                    break;

                case XmlPullParser.TEXT:
                    text = parser.getText();
                    break;

                case XmlPullParser.END_TAG:
                    if (tagname.equalsIgnoreCase("TEST")) {

                        puntuaciones.add(puntuacion);

                    } else if (tagname.equalsIgnoreCase("NUMERO_ACIERTOS")) {
                        puntuacion.setValor_Transformado((text));

                        a.add(text);
                        Log.i("ii", text);

        }
                    break;

                default:
                    break;
                }
                eventType = parser.next();
            }

        } catch (XmlPullParserException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        return puntuaciones;
    }

    public static String getNombre(int posicion){
        String[] ListN = new String[nombres.size()];
        ListN = nombres.toArray(ListN);
        return ListN[posicion];
    }
    public static String getA(int posicion){
        String[] ListA = new String[a.size()];
        ListA = a.toArray(ListA);
        return ListA[posicion];
    }

}

For example if I have in this case a XML with **<NUMERO_ACIERTOS>1</NUMERO_ACIERTOS>** and after this I read another one with **<NUMERO_ACIERTOS>3</NUMERO_ACIERTOS>**  in my UI I only see the value **1** because is the first that has been loaded into the arraylist. 
```

感谢您的时间和关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T06:10:58.680

没有我古斯坦埃斯托斯：

```
static List<String> nombres = new ArrayList<String>();
static List<String> a = new ArrayList<String>(); 
```

它们不应该是静态的，并且可能应该是私有的：

```
private List<String> nombres;
private List<String> a; 
```

我认为当您像这样开始解析时应该创建新的：

```
public List<Puntuacion> parse(InputStream is) {
    XmlPullParserFactory factory = null;
    XmlPullParser parser = null;
    nombres = new ArrayList<String>();
    a = new ArrayList<String>();
    try { 
```

¡

# debugging - 调试 Worklight 应用程序的推荐方法是什么？

> ID：15959693
> 
> 赞同：2
> 
> 时间：2013-04-11T22:04:45.350
> 
> 标签：debugging, ibm-mobilefirst, jsonstore

我发现修复特定于我的应用程序的 iOS 部分的问题非常慢。我想知道当浏览器调试器不可用时调试 Worklight 应用程序的推荐方法。

特别是，我正在处理仅适用于 iOS 和 Android 的 WL.JSONStore 问题。我无法使用浏览器调试器查看发生了什么。当我执行 WL.Logger.debug() 语句时，Xcode 控制台中没有显示任何内容，iPad 模拟器控制台 (Cordova) 仅显示几行。本周也有一段时间没有在任何地方打印输出。

我也下载并安装了 Weinre，但它的控制台中似乎没有显示任何打印语句，而且通常我只是看不到有关我需要的区域的信息。

提前感谢您的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T22:29:23.337

## 通用 Worklight 5.0.6 调试

*   查看名为[Debugging your applications](https://developer.ibm.com/technologies/mobile/#client-basics)的培训模块。（[直接PDF链接](https://public.dhe.ibm.com/software/mobile-solutions/worklight/docs/v506/03_04_Debugging_your_applications.pdf)）

## Worklight 5.0.6 上 JSONStore 的调试提示

*   尝试`console.log('message')`或`WL.Logger.debug('message')`在里面`jsonstore.js`和你的代码（`[app-name].js`等）。输出应该显示在 Xcode 的控制台和 Android 的 LogCat 中。

*   重置模拟器或模拟器和/或调用`WL.JSONStore.destroy()`.

*   确保您在受支持的环境中运行：

    *   Android >=2.2 ARM/x86 模拟器或设备
    *   iOS >=5.0 模拟器或设备
*   尝试关闭加密（即不要将密码传递给`WL.JSONStore.init`或`WL.JSONStore.initCollection`）。

*   查看 JSONStore 生成的 SQLite 数据库文件。这仅在加密关闭时有效。

    *   安卓：

        ```
         $ adb shell
          $ cd /data/data/com.[app-name]/databases/wljsonstore
          $ sqlite3 jsonstore.sqlite 
        ```

    *   iOS

        ```
         $ cd ~/Library/Application Support/iPhone Simulator/6.1/Applications/[id]/Documents/wljsonstore
          $ sqlite3 jsonstore.sqlite 
        ```

    尝试查看 searchFields`.schema`并使用 选择数据`SELECT * FROM [collection-name];`。退出`sqlite3`类型`.exit`。以[这个 StackOverflow 问题](https://stackoverflow.com/questions/15423015/jsonstore-difference-between-number-and-integer-in-searchfields/15425797#15425797)为例。

*   （仅限 Android）启用详细 JSONStore。

    ```
     adb shell setprop log.tag.jsonstore-core VERBOSE
      adb shell getprop log.tag.jsonstore-core 
    ```

*   （仅限 iOS >=6.0 和 Safari >=6.0）尝试使用[JavaScript 调试器](https://webdesign.tutsplus.com/articles/quick-tip-using-web-inspector-to-debug-mobile-safari--webdesign-8787)。在里面设置断点`jsonstore.js`。有用的线路：

    *   桥接本机代码：

        ```
         cdv.exec(options.onSuccess, options.onFailure, pluginName, nativeFunction, args); 
        ```

    *   从本机代码返回的成功回调：

        ```
         deferred.resolve(data, more); 
        ```

    *   从 Native 代码返回的失败回调：

        ```
         deferred.reject(new ErrorObject(errorObject)); 
        ```

*   编写适当的测试（单元、功能、集成——获得测试覆盖率）。这是一个使用[QUnit](https://qunitjs.com/)和[Sinon.js](https://sinonjs.org/)创建沙盒环境的模板，您可以在其中测试 JSONStore 如何处理不同类型的数据/调用：

    ```
     <!DOCTYPE HTML>
      <html>

      <head>
          <title>JSONStore Test App</title>
          <link rel="stylesheet" href="http://code.jquery.com/qunit/qunit-1.11.0.css">
          <script src="http://code.jquery.com/qunit/qunit-1.11.0.js"></script>
          <script src="http://sinonjs.org/releases/sinon-1.6.0.js"></script>
          <script>
              //QUnit configuration flags, no need to change it.
              QUnit.config.requireExpects = true;
          </script>
      </head>

      <body id="content" style="display: none;">

          <!-- Test results will be appended to the div below, no need to make changes here. -->
          <div id="qunit"></div>

      <script>

      //Start Worklight
      WL.Client.init({connectOnStartup : false});

      //Hook into the deviceready event
      document.addEventListener("deviceready", onDeviceReady, false);

      //onDeviceReady will be called when JSONStore/Cordova is ready
      function onDeviceReady () {

          //Auto executing function that holds the test
          (function (jQuery) { //The variable jQuery is usable inside.

              //Mock WL.Client.invokeProcedure using a Stub.
              //This is only useful if you need to link a Worklight Adapter
              //to a JSONStore collection to reproduce your issue or bug.
              //API Doc: http://sinonjs.org/docs/#stubs
              var fakeAdapter = sinon.stub(WL.Client, "invokeProcedure", function (invocationData, options) {

                  //DO NOT Create a real adapter, just mock the reponse here if it's relevant to the bug.
                  var ADAPTER_RESPONSE = {invocationResult: {fakeKey: [{fn: 'carlos'}, {fn: 'mike'}]}};
                  options.onSuccess(ADAPTER_RESPONSE);
              });

              //[**Explain your test here**]
              var EXPECTED_ASSERTIONS = 2; //every assertion is a deepEqual below.
              asyncTest('[**Meaningful title here**]', EXPECTED_ASSERTIONS, function () {

                  //Destroy first to make sure we don't depend on state
                  WL.JSONStore.destroy()

                  .then(function () {

                      //[**Start writting your test here**]
                      //The test below is an example, it does the following:
                      // - Initializes a collection linked to a fake adapter (see stub above).
                      // - Checks if initialization worked by checking the collection name.
                      // - Loads data from the fake adapter (see stub above).
                      // - Checks if load worked by checking the number of documents loaded.

                      var collections = {
                          col1 : {
                              searchFields : {fn: 'string'},
                              adapter : {name: 'fakeAdapter',
                                  load: {
                                      procedure: 'fakeProcedure',
                                      params: [],
                                      key: 'fakeKey'
                                  }
                              }
                          }
                      };

                      return WL.JSONStore.init(collections);
                  })

                  .then(function (response) {

                      //Prep for your assertion
                      var ACTUAL_VALUE = response.col1.name;
                      var EXPECTED_VALUE = 'col1';
                      var COMMENT = 'Checking for the right collection name';

                      //Do your assertion using deepEqual
                      //API Doc: http://api.qunitjs.com/deepEqual/
                      deepEqual(ACTUAL_VALUE, EXPECTED_VALUE, COMMENT);

                      return WL.JSONStore.get('col1').load();
                  })

                  .then(function (response) {

                      //Prep for your assertion
                      var ACTUAL_VALUE = response; //load returns number of documents loaded
                      var EXPECTED_VALUE = 2; //two documents are returned by the fake adapter (stub)
                      var COMMENT = 'Checking if load worked';

                      //Do the assertion using deepEqual
                      deepEqual(ACTUAL_VALUE, EXPECTED_VALUE, COMMENT);

                      start();//call start() after you finish your test succesfully
                  })

                  .fail(function (error) {

                      deepEqual(false, true, 'Failure callback should not be called' + error.toString());
                      start();//call start() after you finish your test with a failure
                  });

              });

          }(WLJQ)); //end auto executing function that holds the test

      } //end wlCommonInit
      </script>

      </body>
      </html> 
    ```

上述代码的预期输出：

[![图片](https://i.stack.imgur.com/ztwMt.png)](https://i.stack.imgur.com/ztwMt.png)

**旁注：**这是一篇关于特定开发人员的 PhoneGap/Cordova 工作流程的[一般文章。](https://web.archive.org/web/20191207034957/http://www.tricedesigns.com:80/2013/01/18/my-workflow-for-developing-phonegap-applications/)有一部分调试，只是基于浏览器。其中一些也适用于 IBM Worklight 开发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-26T17:58:02.030

cnandreu 在这里提供了很好的提示。尽管如此，能见度还是很差，这些方法并没有真正解决我的问题。我还想建议我发现在我的项目中最有用的东西（除了 WL.Logger.debug() 无处不在）：

*   JSConsole 已经不可或缺（[http://jsconsole.com/](http://jsconsole.com/)）。实际上，我实际上并没有像预期的那样使用它。但是，我发现它的启动警告消息对 WL.Logger.debug()（和 console.log()）有作用，使语句能够实际打印到控制台，这样我就可以看到我在做什么。

*   在 iOS 6 中，Mac 上的 Safari 允许您检查连接设备的 DOM。它相当有用，特别是对于仅在 iOS 上本机运行时行为不端的混合 UI 问题。否则我觉得它不是很有帮助。[在https://developer.apple.com/library/safari/#documentation/AppleApplications/Reference/SafariWebContent/DebuggingSafarioniPhoneContent/DebuggingSafarioniPhoneContent.html](https://developer.apple.com/library/safari/#documentation/AppleApplications/Reference/SafariWebContent/DebuggingSafarioniPhoneContent/DebuggingSafarioniPhoneContent.html)上查看更多信息

*   我一直在使用的最有用的技术是将状态消息写入 UI。是的，这是一种丑陋的史前做事方式，但其他一切——包括 80 年代到控制台的错误打印语句——都惨遭失败。这是我所做的（使用 Dojo 和 JavaScript）：

    `var v = dom.byId('audio_status'); if (v) { v.innerHTML += "recording file ["+filename+"]"; }`

显示调试内容的 DIV`audio_status`在哪里。`ID`

这东西很丑，但至少我们可以看到*一些东西*。

# javascript - 给定一个 html 字符串，将所有 img src 属性从相对转换为绝对（Node / Javascript）

> ID：15959696
> 
> 赞同：0
> 
> 时间：2013-04-11T22:05:11.410
> 
> 标签：javascript, jquery, node.js

我在节点服务器上有一个原始的 html 字符串。

我需要将所有 img src 属性从相对转换为绝对。

最好（最简单）的方法是什么？

谢谢！

# c++ - 二叉搜索树代码

> ID：15959699
> 
> 赞同：0
> 
> 时间：2013-04-11T22:05:22.210
> 
> 标签：c++, tree, destructor, binary-search-tree

想为二叉搜索树写一个析构函数（它应该删除树中的所有节点）这是我到目前为止得到的

```
virtual ~BST() {
  BSTNode<Data>* node = root;
  if (node == NULL){
    return;
  }else if (node->left) {
      while(node->left){
        delete node;
      }
  }else if (node->right){
      while(node->right)
        delete node;
  }
        isize = 0;
} 
```

我知道但是代码有问题，我该如何解决

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T22:15:16.877

```
void BST::deleteNode(BSTNode<Data> *node) {
    if (node) {
        deleteNode(node->left);
        deleteNode(node->right);
        delete node;
    }
}

BST::~BST() {
    deleteNode(root);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T22:11:58.507

失去`else`s。否则，如果树有`left`. `right`不会被删除。

失去`while`. 节点应该有自己的析构函数并且应该递归删除。

最后输掉`if`s。因为 delete NULL 是有效的。

```
virtual ~BST() {
  BSTNode<Data>* node = root;
  if (node == NULL){
    return;
  }  
  delete node->left;
  delete node->right;
  isize = 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T22:10:57.883

当你这样做时

```
while(node->left){
    delete node;
} 
```

您删除了节点，但实际上并没有循环到下一个节点。因此，下一次循环`node`中不会`NULL`取消引用*未定义行为*的未分配数据结构，并可能导致崩溃。然后您尝试`node` *再次*删除相同的行为，这仍然是未定义的行为，并且很可能会导致崩溃。

您也不会同时删除*左右*节点，由于`else`.

`BSTNode`我建议你在删除自己的孩子的地方放一个适当的析构函数：

```
template<typename T>
BSTNode<T>::~BSTNode()
{
    delete left;
    delete right;
} 
```

那么树的析构函数就是：

```
BST::~BST()
{
    delete root;
} 
```

# javascript - 我们可以在 Javascript 中实例化 Java 对象吗？

> ID：15959705
> 
> 赞同：1
> 
> 时间：2013-04-11T22:05:43.133
> 
> 标签：javascript, java, pojo, dwr

我知道我们可以通过`DWR library`在 Javascript 中使用 Java 对象来做到这一点。但我想知道我们是否可以使用纯 Javascript 对象实际实例`Java Objects`化？`Javascript`

我在互联网上搜索并找到[了这个链接](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/LiveConnect_Overview)和[这个](http://www.nusphere.com/kb/jscoreref/packages.html)`Packages object`用 Javascript讲述的链接。我什至读到这个对象从 JS 1.1 开始就是 JS 的一部分，这是真的吗？

但是当我实际使用时`var myClass = new Packages.myPackage.myClass();`，它说`Packages`没有定义，显然我在这里遗漏了一些东西。

对于我的用例，我必须`Java Pojo`在 JS 中实例化 a 。关于如何实现这一目标的任何线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-27T13:08:45.967

此功能取决于 JavaScript 引擎（即运行 JavaScript 的解释器）。我没有尝试在浏览器中执行此操作，但启用 Java 插件时可能会这样做（出于安全原因，您不应该这样做，至少不是无条件的）。

特殊对象`Packages`是[Rhino 引擎](https://developer.mozilla.org/en-US/docs/Mozilla/Projects/Rhino)的一个特性，例如，它是运行在 Java VM 中的 JavaScript 解释器。重载了访问器方法，`Packages`因此当您编写 时`Packages.com.pany.Foo`，它将在内部查找类并返回以一种有用的方式连接 Java 和 JavaScript 世界的东西。

您可以在此处找到教程：[https ://developer.mozilla.org/en-US/docs/Mozilla/Projects/Rhino/Scripting_Java](https://developer.mozilla.org/en-US/docs/Mozilla/Projects/Rhino/Scripting_Java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-27T12:35:36.937

您可以在 new 关键字的帮助下创建 Java 对象并将其分配给 JavaScript 中的变量。创建 Java 类的实例时，JavaScript 会自动创建 JavaObject 对象。例如，您可以从 JavaScript 实例化一个 Java 字符串并将其分配给一个变量。然后你可以使用点运算符来访问对象的`length()`

```
var myString=new java.lang.String("Test String");
alert(myString.length()); //prints 11 
```

您可以点击此链接了解更多信息[http://www.sitepoint.com/connect-java-to-javascript-with-liveconnect/](http://www.sitepoint.com/connect-java-to-javascript-with-liveconnect/)

# asp.net-mvc - 控制器中的条件 RedirectToAction？

> ID：15959708
> 
> 赞同：0
> 
> 时间：2013-04-11T22:05:46.243
> 
> 标签：asp.net-mvc

我只是想知道，在 MVC 中，确定重定向位置的责任属于哪里。我*认为*是控制器，但我不确定。

在 a 的 Create 操作中，`WorkshopItem`我从传入的 ViewModel 创建一个新的 WorkshopItem，然后将其保存到数据库中。ViewModel 的一部分是 a `SelectedCustomerId`and `CustomerName`，如果 SelectedCustomerId 为空且名称为空，我将获取`default customer`实体并将其与项目相关联。如果 ID 为空但名称不是，则用户已搜索客户但未找到匹配项，因此我获取该值并创建一个新的客户记录并附加它。

```
[NHibernateActionFilter]
[HttpPost]
public ActionResult Create(WorkshopItemCreateViewModel model)
{
    try
    {
        Customer customer = null;

        if (model.SelectedCustomerId == new Guid() && 
               !string.IsNullOrWhiteSpace(model.CustomerName))
            customer = CreateNewCustomer(model.CustomerName);
        else if (model.SelectedCustomerId == new Guid() &&
                string.IsNullOrWhiteSpace(model.CustomerName))
        {
            // Assign the System Valued customer if no customer was selected.
            var id = Guid.Parse(ConfigurationManager.AppSettings["ValuedCustomerId"]);
            customer = Session.QueryOver<Customer>()
                              .Where(c => c.Id == id)
                              .SingleOrDefault();
        }

        // other stuff
        return RedirectToAction("Index"); 
```

这工作正常，但现在我还想`RedirectToAction`取决于是否创建了客户记录，因为如果创建了客户，它只有一个`Name`，我想重定向到客户控制器上的编辑操作，传递 CustomerId (我想我能做到）。我的问题真的是在 MVC 中这样做是否有效，或者这是否应该是其他地方的责任？

这看起来像这样：

```
[NHibernateActionFilter]
[HttpPost]
public ActionResult Create(WorkshopItemCreateViewModel model)
{
    try
    {
        Customer customer = null;
        bool newCustomer = false;
        if (model.SelectedCustomerId == new Guid() && 
               !string.IsNullOrWhiteSpace(model.CustomerName))
        {
            customer = CreateNewCustomer(model.CustomerName);
            newCustomer = true;
        }
        else if (model.SelectedCustomerId == new Guid() &&
                string.IsNullOrWhiteSpace(model.CustomerName))
        {
            // Assign the System Valued customer if no customer was selected.
            var id = Guid.Parse(ConfigurationManager.AppSettings["ValuedCustomerId"]);
            customer = Session.QueryOver<Customer>()
                              .Where(c => c.Id == id)
                              .SingleOrDefault();
        }

        // other stuff
        if (newCustomer)
            return RedirectToAction("Edit", "Customer", new {id=customer.Id});
        else
            return RedirectToAction("Index"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T22:10:55.653

当然，控制器负责返回内容并重定向到适当的操作。你可以把控制器想象成一个交通警察，指挥东西去哪里，把正确的东西送到适当的地方。上面代码中的示例可能如下所示：

```
if (model.SelectedCustomerId == new Guid() && !string.IsNullOrWhiteSpace(model.CustomerName))
    customer = CreateNewCustomer(model.CustomerName);
    return RedirectToAction("Edit", new {id = customer.Id});
else if (model.SelectedCustomerId == new Guid() && string.IsNullOrWhiteSpace(model.CustomerName)){
    // Assign the System Valued customer if no customer was selected.
    var id = Guid.Parse(ConfigurationManager.AppSettings["ValuedCustomerId"]);
    customer = Session.QueryOver<Customer>().Where(c => c.Id == id).SingleOrDefault();
    return RedirectToAction("SomeOtherMethod");

    }    
        // other stuff
 return RedirectToAction("Index"); 
```

# c# - 时间：2019-05-10 标签：c#combobox drop down click删除文本框中的所有内容

> ID：15959709
> 
> 赞同：1
> 
> 时间：2013-04-11T22:05:48.270
> 
> 标签：c#, autocomplete, combobox, click

我有一个 Windows 程序（.NET 4.5），它有一个带有自定义下拉数据的组合框。我的自动完成类型设置为 AppendSuggest，这样客户就可以轻松输入名称，按 Tab 或 Enter，然后进入下一个框进行填写。

当组合框失去焦点（转到另一个控件）时，程序将解析文本框中的文本。如果该名称存在于数据库中，它将将该人附加到该实例，否则它将在数据库中创建一个具有该名称（正确大小写）的新人。

按 tab 允许自动完成框填写剩余的文本，并成功地将其附加到数据库。但是，如果按下回车按钮，或者更重要的是，客户试图从自动完成下拉列表中单击用户，文本框会简单地删除其中的所有文本并移至下一个框，其中没有任何内容。

我不知道如何拦截用户点击的数据。理想情况下，我只希望用户从下拉列表中单击一个项目并让它填充文本，然后解析该文本并继续前进。

我还检查了我的代码，代码中没有从该组合框中删除文本的位置。它似乎在幕后自行发生。

另外，我是 C# 中的高级程序员，虽然我真的没有使用过自动完成功能，但我很困惑我被这么简单的事情难住了。

# azure - 将调试器附加到 IIS 工作进程时出错

> ID：15959728
> 
> 赞同：1
> 
> 时间：2013-04-11T22:07:15.420
> 
> 标签：azure

我是 Azure 的新手。我正在尝试在 VS2012（调试）中启动我的应用程序。我收到以下错误：

将调试器附加到角色实例“deployment18(13)......”的 URL“ [http://learning.cloudapp.net:82](http://learning.cloudapp.net:82) ”的 IIS 工作进程时出错。无法在 Web 服务器上开始调试。底层连接已关闭：接收时发生意外错误。

当我在 IIS 中托管它时，我的应用程序运行良好。当我将网站项目设置为启动项目时，它工作正常。但是当我将 azure 项目设置为启动项目并开始调试时，我得到了错误。我已经尝试了几乎所有可以在互联网上找到的东西。有人可以帮忙吗？

谢谢， 马赫什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T20:09:14.120

有一次我是通过在更新的机器上加载一个旧的 Azure 解决方案来获得这个，另一次是在我升级到 Azure SDK 2.0 之后。

我使用的是 IIS Express 而不是常规的 IIS。

每次唯一修复的是：

1.  通过 Web 平台安装程序安装 Azure SDK 2
2.  通过 Web 平台安装程序安装 Azure Powershell 工具
3.  创建一个新的 Azure 项目——不要使用旧的 azure 云项目。不要试图让它发挥作用——重新开始。
4.  对于您在以前的 azure 项目中使用的每个 web/worker 角色，也为它们创建新的 web/worker 角色。不要试图让旧的工作——重新开始。将旧文件中的内容/文件复制到新项目中。

所以基本上，安装最新的工具，然后创建新的程序集/包/项目来替换旧的。

# ruby - 在模块上下文中需要一个文件

> ID：15959729
> 
> 赞同：1
> 
> 时间：2013-04-11T22:07:17.297
> 
> 标签：ruby

我有一个名为*WG*的模块，我的应用程序中的所有类都在里面，纯粹是为了命名空间，所以我没有与外部代码的命名冲突。

我的问题是，我的应用程序中的每个类都需要指定为在该模块中，这很痛苦，主要是因为它为我的应用程序中的*所有*代码添加了一个缩进级别。

换句话说，这是一个典型的类，在一个名为“Thing.rb”的文件中

```
module WG
  class Thing
    def do_things
    end
  end
end 
```

在我看来，应该有某种方式在 WG 模块的上下文中要求该文件*，**这样*我就可以放弃顶部和末尾的行，以及强制性的一级缩进。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T22:09:31.460

尝试使用`::`运算符：

```
class WG::Thing
  # ...
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T00:37:50.607

没有。`require`生成文件只是按原样运行文件。

`load`允许您在匿名模块的上下文中运行代码，但不是特定模块。当然，您仍然可以使用`::`范围解析运算符访问全局命名空间。

# java - Maps 与泛型的递归合并

> ID：15959733
> 
> 赞同：4
> 
> 时间：2013-04-11T22:07:44.627
> 
> 标签：java, generics, recursion

我正在尝试构建一种方法来合并两个地图的内容。我在这里环顾了一段时间，看不出有什么方法可以使它通用。如果可能的话，我想避免`@SuppressWarnings("unchecked")`注释。我有一个嵌套的映射结构，其中键是字符串，值是更多东西的映射，此结构中的“叶”节点始终是集合。所以在大多数情况下，我有两个结构如下的地图：

```
Map<String,Map<String,Set<String>>> 
```

我想合并两个映射，以便最终得到两者的联合，并且这两个映射中的任何公共键都在结果映射中表示，其值是两个映射中两个值的合并。在代码中，这是我迄今为止所拥有的：

```
@SuppressWarnings("unchecked")
public Map<String,Object> merge(final Map<String, Object> map1,
                                final Map<String, Object> map2) {

    final Map<String,Object> merged = new HashMap<String,Object>(map1);
    for (final Map.Entry<String,Object> entry : merged.entrySet()) {
        final String key = entry.getKey();
        final Object value = entry.getValue();
        if (map2.containsKey(key)) {
            final Object value2 = map2.get(key);
            if ((value instanceof Map) && (value2 instanceof Map)) {
                merged.put(key, merge((Map<String, Object>) value, (Map<String, Object>) value2));
            } else if ((value instanceof Set) && (value2 instanceof Set)) {
                final Set<Object> set = new HashSet<Object>((Set<Object>)value);
                set.addAll((Set<Object>) value2);
                merged.put(key, set);
            } else {
                // throw up, should only ever be a map or a set
            }
       }
    }

    for (final String key : map2.keySet()) {
        if (!merged.containsKey(key)) {
            merged.put(key, map2.get(key));
        }
    }

    return merged;
} 
```

它完成了这项工作，但我对它不满意，因为使用它你正在铸造一大堆东西，它还对你正在使用的 Set 和 Map 实现做出假设。鉴于我知道我一直在处理字符串到某物的映射，其中某物是一组字符串或另一个字符串到某物的映射，我试图弄清楚如何使用泛型来规范这一点。我在这里摆弄了其他答案中显示的类似但不完全相同的方法，例如方法签名，例如：

```
 public <T extends Map<String,T>> Map<String,T> merge(final T map1, final T map2) 
```

但这并没有奏效，因为递归调用不喜欢我尝试输入`Map<String,Set<String>>`.

我承认以前不需要深入研究泛型。非常感谢任何指导。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T00:12:36.983

重新假设你正在使用的`Set`实现`Map`：如果你总是创建新的地图和集合，你至少可以避免这种情况——这有一个很好的附带好处，即如果有人修改了原始集合，它不会搞砸你的合并版本.

至于您的主要观点，没有强制转换就无法在 Java 中执行此操作。泛型无法帮助您，因为在运行时，编译器只知道

```
Map<String, Object> merge ( Map<String, ?> map1, Map<String, ?> map2 ) 
```

您实际上并不知道代码中是否有 a `Map<String, Set<String>>`、 a`Map<String, Map<String, Set<String>>`或 a`Map<String, Object>`某些值在哪里，`Set<String>`而其他值在哪里`Map<String, Set<String>>`——在第三种情况下它仍然有效，只要对于每个键，两个映射都具有相同的值类型。

矛盾的是，摆脱警告的最佳方法是摆脱泛型，此时，仅使用运行时可用的信息（`Map`或者`Set`，我们不在乎），所有强制转换都是安全的：

```
public Map<Object, Object> merge ( Map<?, ?> map1, Map<?, ?> map2 )
{
    Map<Object, Object> merged = new HashMap<Object, Object>();
    if ( map1 == null || map2 == null )
    {
        if ( map1 != null )
        {
            merged.putAll( map1 );
        }
        if ( map2 != null )
        {
            merged.putAll( map2 );
        }
        return merged;
    }

    Set<Object> allKeys = new HashSet<Object>();
    allKeys.addAll( map1.keySet() );
    allKeys.addAll( map2.keySet() );

    for ( Object key : allKeys )
    {
        Object v1 = map1.get( key );
        Object v2 = map2.get( key );
        if ( v1 instanceof Set || v2 instanceof Set )
        {
            Set<Object> newSet = new HashSet<Object>();
            if ( v1 instanceof Set )
            {
                newSet.addAll( (Set) v1 );
            }
            if ( v2 instanceof Set )
            {
                newSet.addAll( (Set) v2 );
            }
            merged.put( key, newSet );
        }
        else if ( v1 instanceof Map || v2 instanceof Map )
        {
            Map<?, ?> m1 = v1 instanceof Map ? (Map<?, ?>) v1 : null;
            Map<?, ?> m2 = v2 instanceof Map ? (Map<?, ?>) v2 : null;
            merged.put( key, merge( m1, m2 ) );
        }

    }
    return merged;
} 
```

# java - 通过 ContextMenu 访问动态生成的 TextView 中的文本

> ID：15959734
> 
> 赞同：0
> 
> 时间：2013-04-11T22:07:46.423
> 
> 标签：java, android

我目前正在尝试在 android 4.0 的应用程序中开发某种用户配置文件。在此活动中，我将添加未定义数量的以下类型的字段。现在我想为所有字段添加一个上下文菜单并访问这对中两个字段上的文本，无论长按哪个字段。

```
<GridLayout 
xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:columnCount="2"
    android:orientation="horizontal"
    android:rowCount="1" 
    android:paddingLeft="5dp">

    <TextView
        android:id="@+id/subscriberFieldTextPrefix"
        android:layout_column="0"
        android:layout_gravity="left"
        android:layout_row="0"
        android:paddingRight="10dp"
        android:paddingTop="5dp"
        android:text="test"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textColor="#FFAAAAAA"
        android:textIsSelectable="false" />

    <TextView
        android:id="@+id/subscriberFieldTextText"
        android:layout_column="1"
        android:layout_gravity="left"
        android:layout_row="0"
        android:paddingRight="10dp"
        android:paddingTop="5dp"
        android:text="test"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textIsSelectable="false" />
</GridLayout> 
```

我通过这样的代码添加这些“行”：

```
view = LayoutInflater.from(this).inflate(R.layout.subscriber_field_text, null);

((TextView) view.findViewById(R.id.subscriberFieldTextPrefix)).setText(currentSubscriber.GetSpecialFields().get(i).GetField() + ": ");
((TextView) view.findViewById(R.id.subscriberFieldTextText)).setText(currentSubscriber.GetSpecialFields().get(i).GetValue());

registerForContextMenu(((TextView) view.findViewById(R.id.subscriberFieldTextPrefix)));
registerForContextMenu(((TextView) view.findViewById(R.id.subscriberFieldTextText)));

layout.addView(view); 
```

这将是我创建菜单的事件：

```
@Override
public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) 
{
    menu.add(Menu.NONE, 1, 1, "test2");
} 
```

现在在这种情况下，我可以获得原始字段的 ID，它只会将我引导到 XML 中的模板。而且我也得到了原始字段上的文本，但我不知道如何得到它们。文字完全够用，我不需要对象。

我希望有人可以帮助...谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T22:10:56.640

一种方法是将生成的变量分配给`TextView`类变量并从那里提取数据。

```
TextView blahText = ((TextView) view.findViewById(R.id.subscriberFieldTextPrefix)).setText(currentSubscriber.GetSpecialFields().get(i).GetField() + ": "); 
```

并`TextView`稍后访问。通常可见的变量也可以是一个 TextViews 数组（或者可能是一个 Map？），这会给你更多的可见性

```
List<TextView> textViewRows = new ArrayList<TextView>(); 
```

或者

```
Map<String,TextView> mapOfRows = new HashMap<String,TextView>(); 
```

使用地图的一种方法是使用菜单作为键，视图作为值。

```
Map<MenuItem,View> mapOfTextViews = new HashMap<MenuItem,View>(); 
```

这样您的上下文菜单的创建就会填充它们

```
@Override
public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) 
{
    MenuItem newMenu = menu.add(Menu.NONE, 1, 1, "test2");
    mapOfTextViews.put(newMenu,v);
} 
```

当 menuItem 被单击时，您使用 MenuItem 来查找当前视图。

# git - 如何从 Github 中删除内容并使我的 repo 与我的本地代码同步？

> ID：15959735
> 
> 赞同：1
> 
> 时间：2013-04-11T22:07:49.093
> 
> 标签：git, command-line, github

我在 Github 上托管我的博客，并且一直将我的新内容推送到源代码库。然而，事情已经发生了变化，我已经删除/交换了我博客的一些元素。现在，我才意识到我所有的旧东西仍然在 Github 上。就像我曾经推送到 Github 的所有东西一样。

我的问题：我可以使用什么命令让我的本地代码再次与我的 Github 存储库同步？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T22:11:44.660

鉴于您通常推送，我猜在这种情况下服务器上的内容发生了变化，所以在这种情况下您可以：

```
git pull # get the stuff from the server and merge it into your repo.

git push # push the combined stuff back out. 
```

不过……这还是使用了看不见的魔法。这些天我实际上做的是以下几点：

```
git fetch  # First fetch the server changes into your tracking branch
git merge  # Merge those changes into yours
git push   # Push those changes out. 
```

然后，将来，如果服务器上有更改，在进行本地更改之前，您可以执行以下操作：

```
git pull 
```

虽然在这里我也更喜欢：

```
git fetch            # Get the latest
git reset --hard origin/master # set your local to be the same as the tracking branch.
# Make changes locally
# git add .          # Add the changes to git
# git commit -m"msg" # Commit the changes 
```

因为它可以避免意外合并到错误的分支或忘记本地更改。

以上所有假设您只是在与 master 合作。这些天来，我的大部分工作都是在分支中完成的（顺便说一下，这与旧版本控制系统（如 CVS）中的分支不同）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:09:14.017

使用以下命令从远程提取数据

git 拉

如果您在本地进行了远程不存在的提交，请使用

git pull --rebase

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T22:20:24.990

如果我正确理解了您的问题，您希望摆脱 Github 存储库中的所有提交，并将它们替换为您在本地拥有的提交。如果是这种情况，请尝试以下命令：

```
git push -f 
```

这会将您的提交推送到服务器，而忽略已经存在的历史记录。

注意：您将丢失您的 Github 存储库中未与本地存储库共享的所有历史记录，因此请确保这是您想要的！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T22:09:58.180

就`git commit`在你当地做一个`git push`

文档： http: [//gitready.com/beginner/2009/01/21/pushing-and-pulling.html](http://gitready.com/beginner/2009/01/21/pushing-and-pulling.html)

# backbone.js - 当值不改变时触发backbone.js改变

> ID：15959737
> 
> 赞同：17
> 
> 时间：2013-04-11T22:07:53.377
> 
> 标签：backbone.js

这是backbone.js 的一个已知特性，当您设置未更改的数据时，它不会触发更改事件，也不会通过验证。但是，我需要触发 change 事件，因为我正在存储来自 AJAX 调用的 JSON 响应，该调用存储后端验证的结果。如果用户在将相同字段留空的情况下继续提交表单，则后端验证将返回相同的 JSON 结果，并且当我将其保存到模型时，它不会触发更改事件。

我在将数据设置到模型中的 AJAX 成功回调中尝试了一些事情：

# 尝试的解决方案#1

```
t.model.unset('fieldErrors',{silent: true});
t.model.set({fieldErrors: JSONResponse}); 
```

# 尝试的解决方案#2

```
t.model.set({fieldErrors: null},{silent: true});
t.model.set({fieldErrors: JSONResponse}); 
```

当进行调用并且用户具有相同的 JSONResponse 时，这些都不会导致第二次触发更改事件。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-11T22:27:03.687

手动触发更改事件：

```
t.model.trigger('change', t.model); 
```

或者

```
t.model.trigger('change:fieldErrors', t.model, newFieldErrorsValue); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-11T09:58:10.150

```
this.model.set({fieldErrors: JSONResponse}, {silent:true});
this.model.trigger('change:fieldErrors'); 
```

看到这个对话：

> [我可以强制更新模型的属性以注册为更改，即使它不是？](https://stackoverflow.com/questions/15931233/can-i-force-an-update-to-a-models-attribute-to-register-as-a-change-even-if-it)

# jquery - jQuery Slidedown 函数

> ID：15959738
> 
> 赞同：0
> 
> 时间：2013-04-11T22:08:00.843
> 
> 标签：jquery, image, slidedown

在使用 JQuery 时，我还很陌生。我知道我想做的是非常基本的。

基本上，我需要创建一个在单击图像时向下滑动的“标题”框。

**用户**单击图像，底部会滑出一个小标题框，向他/她描述他刚刚单击的内容。

我创建了一个小图像来进一步阐明我需要做什么。

![在此处输入图像描述](https://i.stack.imgur.com/vbRj5.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T22:21:29.923

[http://api.jquery.com/slideDown/](http://api.jquery.com/slideDown/) 在这里你可以看到一些示例，真的很简单：

```
$('#ImageID').click(function() {
    $('#captionboxID').slideDown('slow');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T22:32:08.430

您应该查看 TheNewBoston 是 youtube 上的一个频道，它告诉您如何从头开始使用 jQuery。

这是一个例子。我认为这可以帮助你。

```
$(document).ready(function() {

    $('.box-img').click(function() {
        $('.box-caption').slideDown('slow');
    });

}); 
```

CSS：

```
.box-img {
    width: 100px;
    height: 100px;
    border: thin solid gray;
    position: relative;
}

.box-caption {
    width: 100%;
    height: 30px;
    position: absolute;
    bottom: 0px;
    background-color: #d4d4d4;
    display: none;
} 
```

HTML：

```
<div class="box-img">
    my image

    <div class="box-caption">my caption</div>
</div> 
```

# internet-explorer - IE & Twitter Bootstrap（导航栏+表单元素）——天敌？

> ID：15959743
> 
> 赞同：2
> 
> 时间：2013-04-11T22:08:23.940
> 
> 标签：internet-explorer, twitter-bootstrap

所以这个让我很烦

我有一个使用 twitter bootstrap 的新布局，它应该看起来像

![chrome中的正确布局](https://i.stack.imgur.com/BZFNe.jpg)

但在 IE 7/8/9/10 中看起来像 ![IE中的布局](https://i.stack.imgur.com/ZUVPK.png)

顶部导航栏是固定位置，我尝试将填充和边距添加到顶部标签，但两者都无法识别 - 我使用的是 bootstrap 2.3.1，尽管与以前的版本有相同的问题

除了chromeframe还有什么想法吗？

该网站可以在[http://myterracefarmer.mitescreations.com查看](http://myterracefarmer.mitescreations.com)

（刚刚意识到我上传了 chrome 的主页截图和 IE 的博客，尽管问题代表两个页面） chrome 中的博客截图:: [http://bit.ly/110O8gU](http://bit.ly/110O8gU)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-13T19:08:03.667

重新审视了 IE 中的调试工具来追踪这个

我在这个项目中使用 sass 并打开了调试信息以通过 firefox 加快开发速度——这在 IE 中是不可以的

一旦我禁用了 sass 调试信息，它就开始正确显示

# php - 这些评论中的@是什么意思？

> ID：15959751
> 
> 赞同：3
> 
> 时间：2013-04-11T22:09:27.100
> 
> 标签：php, comments

我正在从其他人那里阅读一些 PHP 代码，并且该文件在每个肉类之前都充满了注释。注释@access 和@var 是什么意思？

```
/**
 * EE Superobject
 *
 * @access      private
 * @var         object
 */
private $EE; 
```

非常感谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T22:10:45.513

它是一些文档生成工具用来生成所述文档的注释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T22:10:27.180

专门用于[`phpDocuemntor`](http://manual.phpdoc.org/HTMLSmartyConverter/HandS/phpDocumentor/tutorial_tags.pkg.html)编译文档。

> phpDocumentor 标记与 Sun 的 Java 编程语言的 JavaDoc 工具的标记非常相似。仅当标签是 DocBlock 新行上的第一件事时，才会解析标签。您可以在整个文档中自由使用 @ 字符，只要它不开始新行即可。一个例子：
> 
> ```
> /**
>  * 标签演示
>  * @author 这个标签被解析，但是这个@version 标签被忽略
>  * @version 1.0 这个版本标签被解析
>  */
> ```
> 
> 以下是标准标签列表：
> 
> ```
> @使用权
> @作者
> @版权
> @不推荐使用
> @例子
> @忽视
> @内部的
> @关联
> @看
> @自从
> @教程
> @版本
> 内联{@internal}}
> 内联{@inheritdoc}
> 内联{@link}
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T22:13:39.290

这些是 PHPDoc 标签：[http://en.wikipedia.org/wiki/PHPDoc](http://en.wikipedia.org/wiki/PHPDoc)它们用于描述类或函数的某些属性；文档是根据类/函数上面的注释自动生成的。

# android - 我的 Android ListFragment 没有显示列表

> ID：15959754
> 
> 赞同：0
> 
> 时间：2013-04-11T22:09:34.647
> 
> 标签：android, list, android-fragments, simplecursoradapter, android-support-library

以下 ListFragment 除了空白屏幕外不显示任何内容。我知道数据是存在的。我没有收到错误，只是一个空白（白色）屏幕。我敢肯定这很傻。我对Android相当陌生。

```
package com.pbs.deliverytrack1;

import com.pbs.deliverytrack1.DBContract;
import com.pbs.deliverytrack1.DBHelper;

import android.app.Activity;
import android.database.Cursor;
import android.os.Bundle;
import android.support.v4.app.ListFragment;
import android.support.v4.widget.SimpleCursorAdapter;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

public class OrderListFragment extends ListFragment {
    SimpleCursorAdapter mAdapter;

    String TAG = "OrderListFragment";

    static final String[] PROJECTION = new String[] {
            DBContract.DeliveryOrderTable._ID,
            DBContract.DeliveryOrderTable.CUSTOMER,
            DBContract.DeliveryOrderTable.ADDRESS };

    // Selection criteria
    static final String SELECTION = "(("
            + DBContract.DeliveryOrderTable.CUSTOMER + " NOTNULL) AND ("
            + DBContract.DeliveryOrderTable.CUSTOMER + " != '' ) AND ("
            + DBContract.DeliveryOrderTable.DELIVERED_DATETIME + " = '' ))";

    private OnOrderSelectedListener listener = null;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        String tag = TAG + ".onCreate()";
        Log.d(tag,"Fragment created");
    }
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        String tag = TAG + ".onCreateView()";
        Log.d(tag, "Inflating fragment_order_list - or trying to.");
        View view = inflater.inflate(R.layout.fragment_order_list, container,
                false);
        if (view == null) {
            Log.d(tag, "Problem inflating view, returned null");
        }
        initializeList();
        return view;
    }

    public void onActivityCreated(Bundle bundle) {
        super.onActivityCreated(bundle);
        String tag = TAG + ".onActivityCreated()";
        Log.d(tag,"Parent Activity Created");
    }

    public interface OnOrderSelectedListener {
        public void onOrderSelected(long orderId);
        // show detail record you dummy
    }

    @Override
    public void onAttach(Activity activity) {
        super.onAttach(activity);
        String tag = "OrderListFragment.onAttach()";
        Log.d(tag,"Attached!");
        if (activity instanceof OnOrderSelectedListener) {
            listener = (OnOrderSelectedListener) activity;
        } else {
            throw new ClassCastException(activity.toString()
                    + " must implement MyListFragment.OnItemSelectedListener");
        }
    } // onAttach()

    public void onStart() {
        super.onStart();
        Log.d(TAG + ".onStart()", "Started!!!");
    }

    public void onResume() {
        super.onResume();
        Log.d(TAG + "onResume()", "Resumed!!!");
    }

    public void onPause() {
        super.onPause();
        Log.d(TAG + ".onPause()", "Paused");
    }

    public void onStop() {
        super.onStop();
        Log.d(TAG + ".onStop()", "Stopped");
    }

    public void onDestroyView() {
        super.onDestroyView();
        Log.d(TAG + ".onDestroyView()", "View Destroyed");
    }

    public void onDestroy() {
        super.onDestroy();
        Log.d(TAG + ".onDestroy()", "I'm dying!!!!");
    }

    public void onDetach() {
        super.onDetach();
        Log.d(TAG + ".onDetach()", "Off with the fragment!");
    }

    private void initializeList() {
        String tag = TAG + ".initilizeList()";
        Log.d(tag,"Setting up cursor.");
        // for the cursor adapter, specify which columns go into which views
        String[] fromColumns = { 
                DBContract.DeliveryOrderTable._ID,
                DBContract.DeliveryOrderTable.CUSTOMER,
                DBContract.DeliveryOrderTable.ADDRESS };
        int[] toViews = { 
                R.id.list_view_order_id,
                R.id.list_view_customer_field, 
                R.id.list_view_address_field };

        // create an empty adapter we will use to display the loaded data.
        DBHelper dbHelper = new DBHelper(getActivity());

        Cursor cursor = dbHelper.getAllOrdersCursor();

        if (cursor != null) {
            cursor.moveToFirst();
            Log.d(tag,"Creating SimpleCursorAdapter mAdapter");
            mAdapter = new SimpleCursorAdapter(getActivity(),
                    R.layout.fragment_order_list_row, 
                    cursor, 
                    fromColumns,
                    toViews,
                    0);
            setListAdapter(mAdapter);

            int count = mAdapter.getCount();
            Log.d(tag, "Order Record Count = " + count);
            if (mAdapter.isEmpty()) {
                Log.d(tag, "Alas! mAdapter is empty");
            } // end if mAdapter empty
        } else { // cursor is null
            Log.d(tag,"The cursor is null");
        } // if cursor != null
    }

} 
```

该片段应该显示从 SQLite 查询派生的列表。我正在构建的 UI 是平板电脑上的简单拆分列表/详细信息屏幕。我正在为 pre-Honeycomb 构建，所以我正在使用支持库。

如果您需要查看代码的任何其他部分，请告诉我。

* * *

这是 fragment_order_list.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@id/android:list"
        android:layout_width="match_parent"
        android:layout_height="0dip"
        android:layout_weight="1"
        android:background="#00FF00"
        android:drawSelectorOnTop="false" />

    <TextView
        android:id="@id/android:empty"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="#FF0000"
        android:text="@string/err_no_data" />

</LinearLayout> 
```

这是调用 ListFragment 的活动：

```
package com.pbs.deliverytrack1;

import com.pbs.deliverytrack1.OrderListFragment.OnOrderSelectedListener;
import com.pbs.deliverytrack1.DBHelper;
import com.pbs.deliverytrack1.DeliveryOrder;

import android.annotation.TargetApi;
import android.content.Context;
import android.content.Intent;
import android.content.res.Resources;
import android.content.res.TypedArray;
import android.database.sqlite.SQLiteDatabase;
import android.net.Uri;
import android.os.AsyncTask;
import android.os.Build;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.util.Log;
import android.view.Menu;
import android.view.View;

public class MainActivity extends FragmentActivity implements
        OnOrderSelectedListener {

    private final String TAG = "MainActivity";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        String tag = TAG + ".onCreate()";
        Log.d(tag, "Setting up database.");
        new SetupDatabase().execute(this);
        Log.d(tag, "Setting Content View");
        setContentView(R.layout.activity_main);
    }

    @Override
    public void onOrderSelected(long orderId) {
        String tag = TAG + ".onOrderSelected()";
        Log.d(tag,"Creating order detail fragment");
        OrderDetailFragment fragment = (OrderDetailFragment) getSupportFragmentManager()
                .findFragmentById(R.id.detailFragment);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

这是activity_main.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainActivity"
    android:orientation="horizontal" 
    >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <fragment
            android:id="@+id/action_bar_fragment"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            class="com.pbs.deliverytrack1.MyActionBarFragment"
            tools:layout="@layout/fragment_actionbar" />

    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:baselineAligned="false" 
        android:orientation="horizontal"
        >

        <fragment
            android:id="@+id/listFragment"
            android:layout_width="0dip"
            android:layout_height="match_parent"
            android:layout_weight="40"
            android:layout_gravity="bottom"
            class="com.pbs.deliverytrack1.OrderListFragment" />

        <fragment
            android:id="@+id/detailFragment"
            android:layout_width="0dip"
            android:layout_height="match_parent"
            android:layout_weight="60"
            class="com.pbs.deliverytrack1.OrderDetailFragment"
            tools:layout="@layout/fragment_order_detail" />

    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:13:46.147

MainActivity 的 LinearLayout 设置为：

```
android:orientation="horizontal" 
```

但是您似乎有一个`"vertical"`设计，因为您的第一个孩子的宽度是`"match_parent"`. 这意味着 ListView 被绘制，就在屏幕的右侧......只需更改根布局的方向。

# iphone - 如何将 NSObject 显示为 UIView？

> ID：15959756
> 
> 赞同：0
> 
> 时间：2013-04-11T22:09:49.930
> 
> 标签：iphone, ios, objective-c, cocoa-touch, three20

我在 StackOverflow 上读到，要创建消息对话气泡，强烈建议使用 TTSpeechBubbleShape 类。

[使用 Objective-C 的 iOS SDK 中的语音气泡](https://stackoverflow.com/questions/11196112/speech-bubble-in-ios-sdk-using-objective-c/11196172#11196172)

但是，这个类是从自定义 NSObject 类派生的，所以我不知道如何将这个 NSObject 转换为我的自定义 UITableView 类的单元格之一？

**那么，如何将一个 NSObject 变成一个 UIView 呢？（或者至少将 NSObject 显示为 UIView 的一部分）**

感谢第一次 iOS 应用程序开发人员。

关于课程的更多信息： [http ://api.three20.info/interface_t_t_speech_bubble_shape.php](http://api.three20.info/interface_t_t_speech_bubble_shape.php) [https://github.com/facebook/three20/blob/master/src/Three20Style/Headers/TTSpeechBubbleShape.h](https://github.com/facebook/three20/blob/master/src/Three20Style/Headers/TTSpeechBubbleShape.h) [https://github。 com/facebook/three20/blob/master/src/Three20Style/Sources/TTSpeechBubbleShape.m](https://github.com/facebook/three20/blob/master/src/Three20Style/Sources/TTSpeechBubbleShape.m)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T22:26:09.360

那些泡泡课程只是准备了一条道路。可以在 CGContext 中绘制路径。您不能以任何方式绘制 UIObject。学习 cocoa touch 的基础知识……阅读文档。

一个更简单的气泡方法是一个可调整大小的图像，如这个答案：[https ://stackoverflow.com/a/11196243/407488](https://stackoverflow.com/a/11196243/407488)

# jquery-animate - 动画内容 div 'height' 到 'Auto' onclick - jQuery

> ID：15959758
> 
> 赞同：0
> 
> 时间：2013-04-11T22:09:51.413
> 
> 标签：jquery-animate, jquery

我有一个内容 div，我想将其设置为特定高度（50 像素），然后 onclick 更改为“自动”-我可以使用 jQuery 进行这项工作吗？我在 YUI 中有它，请参阅下面的代码

```
 function toggleContent(p, showFull) {
    if (showFull) {
        YAHOO.util.Dom.setStyle(p, 'height', 'auto');
        p.setAttribute('onclick', "toggleContent(this, false);")
    } else {
        YAHOO.util.Dom.setStyle(p, 'height', '50px');
        p.setAttribute('onclick', "toggleContent(this, true);")
    }
    } 
```

[这是我想要的示例（YUI）](http://jsfiddle.net/XUSdC/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T22:12:07.733

这是更新为使用 jQuery 的代码：

```
function toggleContent(p, showFull) {
    if (showFull) {
        $(p).height('auto');
        p.setAttribute('onclick', "toggleContent(this, false);")
    } else {
        $(p).height('50px');
        p.setAttribute('onclick', "toggleContent(this, true);")
    }
} 
```

[http://jsfiddle.net/ryanbrill/XUSdC/1/](http://jsfiddle.net/ryanbrill/XUSdC/1/)

# javascript - JS 对象字面量范围和引用

> ID：15959759
> 
> 赞同：0
> 
> 时间：2013-04-11T22:09:55.743
> 
> 标签：javascript, jquery

我使用对象文字来收集我动态添加的各种 DOM 元素，因为我希望能够通过变量引用它们（下面的代码已简化，还有更多，比如事件等）：

```
ui = {
  header : $('<div id="header"></div>').appendTo('body').css('color','#009'),
  footer : $('<div id="footer"></div>').appendTo('body').css('color','#990')
} 
```

现在我希望我可以向其中添加其他对象，但它会引发错误：

```
ui = {
  header : $('<div id="header"></div>').appendTo('body').css('color','#009'),
  footer : $('<div id="footer"></div>').appendTo('body').css('color','#990'),
  headerSpecial : $('<span>some header</span>').appendTo(ui.header) // this line will cause an error "ui is not defined"
} 
```

我想这是因为在 ui 对象关闭之前，我还不能引用里面的任何东西。所以我必须将这些东西分成单独的对象。但是有什么方法可以让我在一个对象中做到这一切吗？我应该在匿名函数中包装一些东西然后调用它们吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T22:13:40.093

使用同一个对象来保存引用是没有问题的，但是不能在同一个字面表达式中使用自引用。分两步进行：

```
// create the object
ui = {
  header : $('<div id="header"></div>').appendTo('body').css('color','#009'),
  footer : $('<div id="footer"></div>').appendTo('body').css('color','#990')
}

// add a new property to the object
ui.headerSpecial = $('<span>some header</span>').appendTo(ui.header); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T22:30:54.220

与其使用对象字面量，不如实例化一个匿名函数？

```
ui = new function () {
    this.header = $('<div id="header"></div>').appendTo('body').css('color','#009');
    this.footer = $('<div id="footer"></div>').appendTo('body').css('color','#990');
    this.headerSpecial = $('<span>some header</span>').appendTo(this.header);
}; 
```

# objective-c - iOS6横向应用程序只有一个控制器多向popViewController问题

> ID：15959773
> 
> 赞同：2
> 
> 时间：2013-04-11T22:10:46.753
> 
> 标签：objective-c, ios6, orientation

我有这个设置来支持我的大多数视图控制器中的横向方向

我的应用程序委托有这段代码：

```
-(NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window
 {
     NSUInteger orientations = UIInterfaceOrientationMaskLandscape;
    if (self.window.rootViewController) {
        UIViewController * pressented = [[((UINavigationController *)self.window.rootViewController) viewControllers] lastObject];
        orientations =[pressented supportedInterfaceOrientations];
    }
    return orientations;
 } 
```

在大多数视图控制器中：

```
-(NSUInteger)supportedInterfaceOrientations
 {
    return UIInterfaceOrientationMaskLandscape;
 } 
```

当我推动这个控制器（我想旋转的那个）时，我的问题就来了：

```
-(NSUInteger)supportedInterfaceOrientations
 {
    return UIInterfaceOrientationMaskALL;
 } 
```

它完美地旋转但是当我以纵向方向弹出视图控制器（点击导航栏的后退按钮）时，呈现的视图控制器也将其方向设置为纵向。

如何使呈现的视图控制器保持锁定在横向上，或强制有问题的控制器在弹出之前旋转回横向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T22:23:03.583

将此添加到您的纵向视图控制器：

```
-(void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];
    UIViewController* dummyController = [[UIViewController alloc] init];
    [self presentViewController:dummyController animated:NO completion:^{
        [self dismissViewControllerAnimated:NO completion:nil];
    }];
} 
```

我知道这是一个黑客，但它有效。有人知道更好的解决方案吗？

# android - Android 启动器图标 - 我的默认 / mdpi 资源是多余的吗？

> ID：15959778
> 
> 赞同：5
> 
> 时间：2013-04-11T22:10:56.823
> 
> 标签：android, resources, icons, launch, mdpi

我是 Android 开发的新手（使用 Mono for Android），我已经阅读[了](http://developer.android.com/guide/topics/resources/providing-resources.html)[这个](http://developer.android.com/guide/practices/ui_guidelines/icon_design_launcher.html)、[这个](http://developer.android.com/guide/practices/screens_support.html) 和其他一些关于 SO 的[问题](https://stackoverflow.com/questions/5583443/what-should-be-the-default-launcher-icon-size?rq=1)，但我不确定如何为我的应用程序提供所有必要的图标文件。

1.  从模板项目中，IDE 为我创建了一个`drawable/`包含 48x48 像素 Icon.png 文件的文件夹。
2.  由于我需要提供替代资源，因此我抓取了一个用作我的应用程序图标的 PNG 文件，并使用了[Android Asset Studio](http://android-ui-utils.googlecode.com/hg/asset-studio/dist/index.html)（在文档中提到），它为我生成了以下文件：

`drawable-hdpi/ic_launcher.png`（72x72 像素）

`drawable-mdpi/ic_launcher.png`（48x48 像素）

`drawable-xhdpi/ic_launcher.png`（96x96 像素）

`drawable-xxhdpi/ic_launcher.png`（144x144 像素）

（不知道为什么，[Android Asset Studio](http://android-ui-utils.googlecode.com/hg/asset-studio/dist/index.html)没有生成`ldpi`版本，所以我给自己调整了一个 36x36 的图标。）

现在我迷路了

**`drawable-mdpi/`1\. 我应该在和中都保留一个 48x48 像素的副本`drawable/`吗？**

如果我只在 中保留图标`drawable-mdpi/`，应用程序是否会在旧设备/Android 版本上崩溃（因为缺少默认资源）？1.如果我只在`drawable/`（后备）中保留图标，那么使用有什么意义`drawable-mdpi/`？

由于我不确切知道该怎么做，所以我的项目可绘制文件夹如下：

`drawable/ic_launcher.png`（48x48 像素）

`drawable-hdpi/ic_launcher.png`（72x72 像素）

`drawable-ldpi/ic_launcher.png`（36x36 像素）

`drawable-mdpi/ic_launcher.png`（48x48 像素）

`drawable-xhdpi/ic_launcher.png`（96x96 像素）

`drawable-xxhdpi/ic_launcher.png`（144x144 像素）

但对我来说仍然不清楚。

* * *

**编辑：**

如果我提供所有可能的“替代”资源，那么默认 ( `drawable/`) 资源文件夹将变得多余，因此我可以将其删除。但是我不愿意不提供默认资源，因为相反似乎更合理：首先提供“默认”资源，然后根据需要提供“替代”资源。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T22:35:12.050

这句话有点长，但您应该阅读[文档](http://developer.android.com/guide/practices/screens_support.html#overview)对此的说明：

> 在运行时，系统通过以下过程为任何给定资源确保当前屏幕上的最佳显示效果： 1.系统使用适当的替代资源 根据当前屏幕的大小和密度，系统使用任何大小和应用程序中提供的特定于密度的资源。例如，如果设备具有高密度屏幕并且应用程序请求可绘制资源，则系统会查找与设备配置最匹配的可绘制资源目录。根据可用的其他替代资源，具有 hdpi 限定符的资源目录（例如 drawable-hdpi/）可能是最佳匹配，因此系统使用该目录中的可绘制资源。
> 
> 2.如果没有匹配的资源可用，系统使用默认资源并根据需要将其放大或缩小以匹配当前屏幕尺寸和密度。“默认”资源是那些没有用配置限定符标记的资源。例如drawable/中的资源就是默认的drawable资源。系统假定默认资源是为基线屏幕尺寸和密度设计的，即正常屏幕尺寸和中等密度。因此，系统会酌情为高密度屏幕向上缩放默认密度资源，为低密度屏幕向下缩放。
> 
> 但是，当系统在寻找特定密度的资源时，在特定密度的目录中没有找到它，它不会总是使用默认资源。系统可以改为使用其他特定于密度的资源之一，以便在缩放时提供更好的结果。例如，当寻找低密度资源并且它不可用时，系统更倾向于缩减资源的高密度版本，因为系统可以通过以下方式轻松地将高密度资源缩减为低密度与将中等密度资源缩放 0.75 倍相比，0.5 倍，工件更少。

因此，系统将为运行应用程序的任何设备寻找最佳尺寸的可绘制对象。如果系统正在寻找 48x48 的启动器图标，它将首先在 drawable-mdpi/ 中查找，因为文档建议您在该文件夹中放置一个 48x48 图标。既然您已经提供了，那么应用程序没有理由必须在 drawable/ 文件夹中查找默认图像。即使这样做了，也无济于事，因为您已经提供了相同大小的图标。

如果你只提供了一个特定尺寸的drawable，你的应用程序不应该在任何设备上崩溃，即使你提供的尺寸是非常错误的。在这种情况下，图像看起来很糟糕，因为系统将加载您提供的单个图像。所以，如果你在 drawable-*dpi 文件夹中有图像，你就不需要在 drawable/.

TL;博士

不，如果您已经在 drawable-mdpi/ 中找到了 ic_launcher.png 的 48x48 副本，则不需要将 ic_launcher.png 副本放在 drawable 文件夹中，因为系统会首先选择那个。

# templates - Flask、Heroku 和模板

> ID：15959792
> 
> 赞同：1
> 
> 时间：2013-04-11T22:12:09.377
> 
> 标签：templates, heroku, flask

更新：不确定原因，但在安装 loggly 以更深入地了解正在发生的事情之后，它现在可以工作了。我无法理解为什么会这样。

我的烧瓶 webapp 使用 Foreman 在本地工作，但是如果我在 heroku 上使用相同的测试输入，我会收到内部服务器错误：

```
The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application. 
```

日志几乎没有显示任何内容（这可能是一个单独的问题），但使用打印调试，我发现这与渲染模板有关，因为在那之前一切正常。鉴于它在本地工作，那么它也是没有html错误的情况，所以它必须是关于采购模板的东西。

我的结构如下所示：

```
Procfile
venv
requirements.txt
app
  /templates
    /login.html
    /user_profile.html
    /index.html
  /models
  /views
... 
```

如果我调整结构以使模板文件夹与 Procfile、venv 等处于同一级别，则没有页面可以工作，但实际上 index.html 和 login.html 都可以正常显示。

知道怎么了？非常感谢。

# jquery - div上的jQuery clone（）奇怪地定位它

> ID：15959795
> 
> 赞同：1
> 
> 时间：2013-04-11T22:12:15.113
> 
> 标签：jquery, css, jquery-clone

我在正文中有一个空的 div，带有以下 CSS：

```
div{
    border: 1px solid black;
    width: 100px;
    height: 100px;
    display: inline-block;
} 
```

[http://jsfiddle.net/CcmFJ/1/](http://jsfiddle.net/CcmFJ/1/)

然后我使用 jQuery 克隆元素几次。结果，为什么原来的占了额外的保证金？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T22:14:18.987

这就是问题所在`display: inline-block`。我通常用`font-size: 0`. [http://jsfiddle.net/CcmFJ/2/](http://jsfiddle.net/CcmFJ/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T22:14:07.630

就是`display:inline-block`这样做。有几种不同的方法可以解决这个问题，其中很多都在问题[显示中涵盖：inline-block extra margin](https://stackoverflow.com/questions/1833734/display-inline-block-extra-margin) already。

我首选的方式是`font-size:0`在容器上设置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T22:18:32.303

这实际上是由于该方法注入了空白`.append()`。你最终得到这个：

```
<body style="">
  <div></div>

<div></div>... 
```

如果您`.after()`像这样使用并插入 div：

```
for (var i = 0; i < 20; i++){
    $("div:first").after($("div:first").clone());
} 
```

在克隆之前你没有额外的空白。**[jsFiddle 示例](http://jsfiddle.net/j08691/CcmFJ/3/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T22:17:28.627

有很多方法可以在`inline-blocks`

在以下链接下可以找到包含许多示例的最佳资源：
[**CSS-Tricks**](http://css-tricks.com/fighting-the-space-between-inline-block-elements/)

没有操纵 css 的 HTML 示例将是（例如）：

```
<ul>
  <li>one</li
  ><li>two</li
  ><li>three</li>
</ul> 
```

或者：

```
<ul>
  <li>
   one</li><li>
   two</li><li>
   three</li>
</ul> 
```

# assembly - x86 中值为 0 的奇偶校验标志

> ID：15959798
> 
> 赞同：2
> 
> 时间：2013-04-11T22:12:52.303
> 
> 标签：assembly, x86, parity

我看到在 x86 CPU 中，奇偶校验标志 (PF) 在设置为 1 的位数为偶数时设置，并且仅测试值的第一个字节（低 8 位）。

我不确定的唯一情况是当我们处理值 0 时。

我至少看到了其他问题，其中奇偶校验标志似乎设置为 1，值为 0。

例如，对于值 8000h，低 8 位全为 0，并且奇偶校验标志被称为设置为 1。

**那么，我是否应该接受对于设置为 1 的 0 位，启用奇偶校验标志，就像设置为 1 的偶数位一样？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T22:45:50.347

0 的位数是偶数，所以答案是肯定的。

测试：

```
// compiled with Open Watcom C/C++ 1.9
#include <stdio.h>

unsigned parity(unsigned v)
{
  unsigned p = 0;
  __asm
  {
    mov eax, v
    or  eax, eax
    pushf
    pop eax
    shr eax, 2
    and eax, 1
    mov p, eax
  }
  return p;
}

int main(void)
{
  unsigned i;
  for (i = 0; i < 8; i++)
    printf("PF(%u) = %u\n", i, parity(i));
  return 0;
} 
```

输出：

```
PF(0) = 1
PF(1) = 0
PF(2) = 0
PF(3) = 1
PF(4) = 0
PF(5) = 1
PF(6) = 1
PF(7) = 0 
```

# ruby-on-rails - Rails 搜索表单 - 不确定如何使用？

> ID：15959799
> 
> 赞同：1
> 
> 时间：2013-04-11T22:12:56.747
> 
> 标签：ruby-on-rails, search, rails-routing

我正在尝试在我的 rails 应用程序的主页上添加一个搜索表单，该表单可以搜索候选模型，以查看如果我输入候选者的姓名，它会显示可能候选者的图片，然后单击它们会得到到他们的候选页面。

问题：搜索表单显示在主页上，但随后出现路由错误：No route matches [GET] "/search"

这是views/home/index.html.erb中的代码：

```
<%= form_tag("/search", :method => "get") do %>
<%= text_field_tag(:q) %>
<%= submit_tag("Search") %>
<% end %> 
```

搜索控制器：

```
def index
@candidates = Candidate.search(params[:name])
end 
```

搜索视图（views/search/index.html.erb）：

```
<h1> Here are your search results: </h1>
<% @candidates.each do |candidate| %>
<%= link_to image_tag(candidate.picture, :size => "100x100", :alt => "Edit Entry"),     candidate%>
<% end%> 
```

候选型号：

```
def self.search(name)
 where('name LIKE ?', "%#{name}%")
end 
```

耙路线：

```
candidates_show GET    /candidates/show(.:format)     candidates#show
candidates_new GET    /candidates/new(.:format)      candidates#new
donations_index GET    /donations/index(.:format)     donations#index
home_index GET    /home/index(.:format)          home#index
import_candidates POST   /candidates/import(.:format)   candidates#import
candidates GET    /candidates(.:format)          candidates#index
POST   /candidates(.:format)          candidates#create
new_candidate GET    /candidates/new(.:format)      candidates#new
edit_candidate GET    /candidates/:id/edit(.:format) candidates#edit
candidate GET    /candidates/:id(.:format)      candidates#show
PUT    /candidates/:id(.:format)      candidates#update
DELETE /candidates/:id(.:format)      candidates#destroy
root        /                              home#index 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T22:29:19.910

您的表单标签指向`search`但没有名为 的路由`search`。就像上面建议的那样，要么将`index`方法从你的搜索控制器移动到你的主控制器，要么`search`在你的 routes.rb 中添加路由，比如

```
match "search" => "search#index" 
```

# c - 快速排序运行时速度问题

> ID：15959801
> 
> 赞同：1
> 
> 时间：2013-04-11T22:13:10.263
> 
> 标签：c, performance, algorithm, sorting, quicksort

我有一些困扰我的事情。我有一个快速排序算法的实现，但是当我在一个包含 30 多个元素的整数数组上测试它时，排序需要很长的时间。有时甚至超过 10 秒，这与选择排序、插入排序和冒泡排序不同，它们在 10000 个元素上比在 100 个元素上快速排序更快。

这是我的解决方案，请提供建议:)

```
void kvikSort(int a[], int l, int d) {
    int i, k;

    if (l >= d)
        return;

    k = l;
    swap(&a[l], &a[(l + d) / 2]);

    for (i = l + 1; i <= d; i++)
        if (a[i] < a[l])
            swap(&a[++k], &a[i]);
    swap(&a[l], &a[k]);

    kvikSort(a, 0, k-1);
    kvikSort(a, k+1, d);

} 
```

编辑：我在我的 Linux Mint 14 上使用 GCC v 4.7.2，过程：intel core2duo e7400

编辑：我的其他算法：

```
void selectionSort(int a[], int n) {
    int i, j, min;

    for (i = 0; i < n - 1; i++) {
        min = i;
        for (j = i + 1; j < n; j++)
            if (a[j] < a[min])
                min = j;
        if (min != i)
            swap(&a[min], &a[i]);
    }
}

void insertionSort(int a[], int n) {
    int i, j;

    for (i = 0; i < n - 1; i++)
        for (j = i + 1; j > 0 && a[j] < a[j-1]; j--)
            swap(&a[j], &a[j-1]);
}

void bubbleSort(int a[], int n) {
    int i, j;

    for (i = n - 1; i > 0; i--)
        for (j = 0; j < i; j++)
            if (a[j] > a[j+1])
                swap(&a[j], &a[j+1]);
}

void swap(int *i, int *j) {
    int tmp;

    tmp = *i;
    *i = *j;
    *j = tmp;
} 
```

编辑：也许我应该提到，在我的测试程序中，我首先将随机生成的数组输出到一个文本文件，然后将数组排序到另一个文本文件。所以它肯定运行得很慢，但这不是问题，问题是快速排序比其他排序慢得多。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T22:29:49.807

你的第一个递归调用

```
kvikSort(a, 0, k-1); 
```

有错误的下限，它应该是

```
kvikSort(a, l, k-1); 
```

使用下限 0，您会一次又一次地重新排序数组的初始部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T22:30:53.847

这是问题所在：

```
void kvikSort(int a[], int l, int d) {
int i, k;

if (l >= d)
    return;

k = l;
swap(&a[l], &a[(l + d) / 2]);

for (i = l + 1; i <= d; i++)
    if (a[i] < a[l])
        swap(&a[++k], &a[i]);
swap(&a[l], &a[k]);

>>> kvikSort(a, 0, k-1);
kvikSort(a, l, k-1);
kvikSort(a, k+1, d); 
```

# php - 带有一些特殊字符的 Mysql 正则表达式字母数字

> ID：15959803
> 
> 赞同：3
> 
> 时间：2013-04-11T22:13:22.013
> 
> 标签：php, mysql, regex

好吧，我已经做了一些噩梦，所以我向 Stackoverflow 的全能蜂巢思维低头。

UPD：我的任务的参数已更改。我需要找到可能包含特殊字符（如括号 () 和/或 @、#、&、$）的代码。

因此代码可能如下所示：

> “A”、“Bb”、“2C8”、“A7(BO)19”、B29H$、29H(6JI)0#等

问题是所有这些代码都是可选的。我已经尝试过像 Barmar（见回复 1）建议的那样，但稍微修改了 MySQL 查询：

```
SELECT *
FROM table
WHERE column REGEXP '^[a-z0-9\@\#\$\&()]*$' 
AND column LIKE CONCAT('%', '$v', '%') 
```

如果我寻找“SLJ”或“S(LJ)”，它无法返回“S(LJ)9”或“09S(LJ)3$”

好吧，除了我的 DNA 中一些真正重要的核苷酸序列可以让我更有效地使用大脑（或拥有它们）之外，我在这个正则表达式或查询本身中缺少什么？提前感谢任何人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T22:27:45.883

```
SELECT *
FROM table
WHERE column REGEXP '^[a-z0-9()]*$' /* code contains alphanumerics and parentheses */
AND column NOT REGEXP '[0-9]{3}' /* code does not contain >2 digits in a row */
AND column LIKE CONCAT('%', ?, '%') /* code contains the user input */ 
```

在哪里 ？与用户输入绑定（您应该使用 PDO 或 mysqli 准备好的语句）。

# android - 从 webview 获取 ID 值作为字符串

> ID：15959806
> 
> 赞同：3
> 
> 时间：2013-04-11T22:13:30.660
> 
> 标签：android, android-webview

我想知道如何从 webview 中获取价值。例如，要将值加载到我使用的 webview 中：

```
myWebView.loadUrl("www.example.com");
myWebView.loadUrl("javascript:document.getElementById('username').value='"+ user + "';"); 
```

现在我想从网页的某个 ID 中读取一些文本。就像是：

```
myWebView.loadUrl("www.example.com");
myWebView.getUrl("javascript:document.getElementById('username').toString(user);"); 
```

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:35:44.373

**编辑：**自 KitKat（API 19）以来，`WebView`该类提供了[`evaluateJavascript`](https://developer.android.com/reference/android/webkit/WebView.html#evaluateJavascript%28java.lang.String,%20android.webkit.ValueCallback%3Cjava.lang.String%3E%29)允许执行 javascript 并获取返回值的方法。

对于较旧的 API，您仍然可以将 javascript 绑定到您的 Android Java 代码（[看这里](http://developer.android.com/guide/webapps/webview.html#BindingJavaScript)）

因此，您将实现一个 Javascript 接口类并将其添加到您的`WebView`然后调用类似

```
 myWebView.loadUrl("javascript:MyJavascriptInterface.getValue(document.getElementById('username').value);"); 
```

这将调用`getValue`您的类中用作 Javascript 接口的方法（这是一个自定义函数，您可以根据需要重命名），并`MyJavascriptInterface`使用您在`addJavascriptInterface`.

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-04-11T22:31:10.543

是的你可以。`getElementById('username').Value`

# static-libraries - 将 glfw 静态库与 Xcode 4 链接

> ID：15959814
> 
> 赞同：0
> 
> 时间：2013-04-11T22:14:39.020
> 
> 标签：static-libraries, osx-mountain-lion, xcode4.6, glfw

好的，我一直在寻找几个小时来尝试解决这个问题，但没有任何效果。这个问题与其他帖子非常相似，但我没有他们的解决方案有效。

所以我正在使用 glew 和 glfw 编写一个 OpenGL 程序，但由于某种原因我无法编译该程序。错误出现在 include 语句中：

```
#include <GL/glfw.h> 
```

并且错误说找不到'GL.glfw.h'文件。

我已按照 [GLFW-2.7.8 发行说明中的​​所有说明进行操作](http://www.glfw.org/release-2.7.8.html#using) 网页上的所有说明进行操作，其中包括制作 glfw，然后将静态库 libglfw.a 导入 Xcode。该库确实显示在 Build Phases -> Link Binary with Libraries 下，但除此之外 Xcode 似乎无法识别它。例如，在文件检查器下，它将文件类型检测为“默认 - 数据”。

静态库配置为我正在运行的 64 位架构。

我尝试更改构建设置下的搜索路径。

我包含以下框架：Cocoa、OpenGL 和 IOKit。

如果您需要更多信息来帮助我解决此问题，请告诉我，感谢您的阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:37:29.003

事实证明我的 glew 没有正确导入，所以 glfw 也不起作用。这些是我采取的步骤：

*   将 Base SDK 从最新的 OSX (10.8) 更改为当前的 OSX。

这样做之后，我将错误“减少”为 Apple Mach-O Linker (Id) 错误。下一个：

*   将 -lGLEW 添加到其他链接器标志。

*   将 /opt/local/include/ 添加到标题搜索路径

*   将 /opt/local/lib/ 添加到库搜索路径

[这](https://stackoverflow.com/questions/9064379/glew-apple-mach-o-linker-id-error)是我找到答案的地方。

# html - 为什么页脚 div 中有白色边框？

> ID：15959815
> 
> 赞同：0
> 
> 时间：2013-04-11T22:14:40.923
> 
> 标签：html, css

我想在页脚中并排放置一个 div，但是使用此代码会留下白色边框。

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <style type="text/css">
            #bottomnav {
                background-color: #333;
                opacity: 1;
                height: 100px;
                left: 0;
                right: 0;
                bottom: 0;
                overflow: visible;
            }
        </style>
    </head>
<body>
    <footer>
        <div id="bottomnav">
              Hello
        </div>
    </footer>   
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T22:17:40.723

From your description, I can't tell quite what problem you have, but I'm guessing it's the margin on the `body` element. Try this:

```
body {
    margin: 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T22:18:20.670

You need to reset `body` margins to zero.

```
body {
  margin: 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T22:19:54.787

你需要清除正文边缘

```
* {margin:0; padding:0;} 
```

但是通用选择器会影响您的页面加载时间

查看 css 重置以及各种修复程序可以为您的浏览器做什么

[http://www.cssreset.com/](http://www.cssreset.com/)

这也可以为你解释很多事情[http://meyerweb.com/eric/thoughts/2007/04/18/reset-reasoning/](http://meyerweb.com/eric/thoughts/2007/04/18/reset-reasoning/)

# python - numpy/python 中的时间序列平均

> ID：15959819
> 
> 赞同：1
> 
> 时间：2013-04-11T22:15:16.630
> 
> 标签：python, numpy, scipy

我的数据由时间数组组成，每秒有 10 个数据点，以及与每次对应的强度值数组。因此，例如，假设我有：

```
times = np.arange(0,100,0.1)
intensities = np.random.rand(len(times)) 
```

我想看看如果我使用更长的平均时间，数据会是什么样子，所以我想创建一些箱，比如 1 秒、5 秒和 10 秒，并对这些新箱中的强度值进行平均。在 numpy 中执行此操作的最佳方法是什么？（或其他 python 包，但我假设 numpy/scipy 对我有用。）我可以使用 for 循环，但我希望有更好的方法。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T22:56:24.677

[您可以使用此处](https://stackoverflow.com/questions/11352047/finding-moving-average-from-data-points-in-python)`convolve`的 stackoverflow 中提到的方法计算移动平均值。

```
from pylab import plot, show
import numpy as np

times = np.arange(0,100,0.1)
intensities = np.random.rand(len(times))

def window(size):
    return np.ones(size)/float(size)

plot(times,intensities,'k.')
plot(times,np.convolve(intensities,window(10),'same'),'r')
plot(times,np.convolve(intensities,window(100),'same'),'b')
show() 
```

![在此处输入图像描述](https://i.stack.imgur.com/b3xKR.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T22:25:40.890

您可以重新调整数据以将其分组为 10、50 或 100 组。然后调用该`mean(axis=-1)`方法在最后一个轴（大小为 10、50 或 100 的轴）上取平均值：

使用此设置：

```
In [10]: import numpy as np

In [11]: times = np.linspace(0,100,1000)

In [12]: intensities = np.random.rand(len(times)) 
```

这是每 10 个值的平均值：

```
In [13]: intensities.reshape(-1,10).mean(axis=-1)
Out[13]: <output omitted due to length> 
```

每 50 个值的平均值：

```
In [14]: intensities.reshape(-1,50).mean(axis=-1)
Out[14]: <output omitted due to length> 
```

每 100 个值的平均值：

```
In [15]: intensities.reshape(-1,100).mean(axis=-1)
Out[15]: 
array([ 0.50969463,  0.5095131 ,  0.52503152,  0.49567742,  0.52701341,
        0.53584475,  0.54808964,  0.47564486,  0.490907  ,  0.50293636]) 
```

`arr.reshape(-1, 10)`告诉 NumPy 重塑数组`arr`，使其在最后一个轴上具有大小为 10 的形状。`-1`告诉 NumPy 为第一个轴提供填充数组所需的任何大小。

请注意，`reshape`以这种方式使用要求它`len(intensities)`可以被您要分组的大小（例如 10、50、100）整除。

# nhibernate - NHibernate MemCached w/ Protobuf-net.Enyim -- does it actually work?

> ID：15959821
> 
> 赞同：2
> 
> 时间：2013-04-11T22:15:38.250
> 
> 标签：nhibernate, memcached, protobuf-net, nhibernate-caches, enyim.caching

I've used the following assemblies to hook up NHibernate 2nd-level caching with Enyim Memcached using Protobuf-net binary serializer:

*   NHibernate
*   NHibernate.Caches.EnyimMemcached
*   Enyim.Caching
*   protobuf-net
*   protobuf-net.Enyim

It's recently come to my attention that despite hooking up protobuf-net with EnyimMemcached, I'm likely not actually using that serializer as all my entities were marked with just `[Serializable]` and neither `[DataContract]` or `[ProtoContract]` with corresponding ordered Data/ProtoMembers for the properties. I can get protobuf-net to work with EnyimMemcached when I interact with the memcache directly after I add the appropriate attributes (or register them manually with the RuntimeTypeModel.Default class of protobuf-net).

However, even if I do the due-diligence with registering my types with protobuf-net, I don't think any cache entry coming from NHibernate will actually be serialized by protobuf-net because NHibernate.Caches.EnyimMemcached stores entries in the cache within `DictionaryEntry` objects:

```
bool returnOk = client.Store(
    StoreMode.Set, KeyAsString(key),
    new DictionaryEntry(GetAlternateKeyHash(key), value),
    TimeSpan.FromSeconds(expiry)); 
```

`DictionaryEntry` does not have `[DataContract]` and `[DataMember(Order = xx)]` attributes. This makes me wonder...

**Can I even properly utilize the protobuf-net serializer for NHibernate 2nd level caching?**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T11:35:15.360

由于没有人回答您的问题，我不妨在这里给出我的两点。我对 Memcached 作为二级缓存知之甚少，但市面上有强大的缓存解决方案，它们需要最少的代码更改才能开始用作二级缓存，并且序列化由缓存处理。您可以将[NCache 用作 NHibernate 的 2 级缓存](http://www.alachisoft.com/ncache/nhibernate-l2cache-index.html)

# mysql - MySql 防止/跟踪跨多个字段的重复字段

> ID：15959822
> 
> 赞同：4
> 
> 时间：2013-04-11T22:15:38.700
> 
> 标签：mysql, sql, unique

我正在寻找一种简单的方法来检查多个零件表，以确定给定的零件编号是否已经存在，然后再将其添加到给定的表中。

目前我想出的最好的想法是一个辅助表，它简单地将所有表中的每个 PN 列出在一个具有唯一键的列中；但是我想知道是否有办法在不创建新表和索引的情况下做到这一点？

对于视觉学习者类型，我有四十几个表或多或少遵循这种模式：

表格1

```
    | 编号 | PN | 其他栏目 |  
    ----------------------------------------------  
    | 1 | 一些Pn | ... ... ... ... |
        ...

```

表 2

```
    | 编号 | PN | 其他栏目 |
    --------------------------------------------------
    | 1 | 其他Pn | ... ... ... ... ... |
        ...

```

还有大约四十个以上，每个表最多有 50 列和最多 800 万条记录。

目标是，无论是通过软件 (Java) 还是 MySql 拒绝记录，都可以防止重复的部件号在多个表中蔓延。主 PN 表是唯一可能或合理的解决方案吗？

我知道数据结构不是最好的设计，并且正在进行返工，但我想知道一些建议的最佳实践以及针对此问题的建议解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T23:10:51.200

添加表是您的最佳选择。

表格1：

```
|  t1_id   |    PN     |    Other Columns    |  
----------------------------------------------  
|    1     |  pn_id    |   ... ... ... ...   |
    ... 
```

表 2：

```
|  t2_id   |    PN     |    Other Columns    |  
----------------------------------------------  
|    1     |  pn_id    |   ... ... ... ...   |
    ... 
```

表3：

```
|  pn_id   |  PN  |
------------------
|    1     |  ##  |
    ... 
```

尽管在您的情况下这可能不是最容易实施的解决方案，但它是最佳的整体解决方案，因为您现在或将来都不会遇到扩展问题。如果您改为选择在更新/创建时检查所有表格是否有重复部件号的解决方案，那么随着表格变大，这将花费越来越长的时间。

如果您可以保证它们永远不会变大或者您永远不会添加零件编号，那么您可能只需编写一个脚本来检查一次重复项，而根本不用担心另一个表。但是，从长远来看，您需要添加另一个表来跟踪零件编号。

# pdf - Coldfusion 报表生成器的替代方案

> ID：15959823
> 
> 赞同：2
> 
> 时间：2013-04-11T22:15:39.937
> 
> 标签：pdf, coldfusion, pdf-generation, report

任何人都知道我可以从 ColdFusion 而不是 CF Report Builder 中使用的 pdf 生成的好解决方案（最好使用可视化布局工具）？它应该能够接受 cfquery 输入。

基本上还有什么比 Adob​​e 提供的硬壳产品更好的吗？

**编辑**：使用 CF 11 和“大多数”CSS 和 HTML 的“像素到像素”渲染（请参阅[https://wikidocs.adobe.com/wiki/display/coldfusionen/PDF+Generation+in+ColdFusion+11](https://wikidocs.adobe.com/wiki/display/coldfusionen/PDF+Generation+in+ColdFusion+11)） ，我想知道是否有人尝试过按照“正常报告”的方式做任何事情，例如页码、分页符等——更传统的面向 8.5"x11" 的功能。由于这个原因，我知道 HTML 没有离散页面和分页符的概念（在浏览器中），我对尝试直接替换 CF Report Builder 有点怀疑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T18:53:36.500

显然，您可以根据需要使用 cfdocument，但祝您好运，让它看起来不错。但是，如果您想沿着使用 CFML 生成 html 然后*将其*输出到 pdf 的路线进行下去，则可以使用[wkhtmltopdf](https://code.google.com/p/wkhtmltopdf/)。如果您想要一个报表生成器类型的应用程序，您可以使用[Jaspersoft Studio](http://community.jaspersoft.com/project/jaspersoft-studio)。BTW ACF 的报告引擎是 jasper 报告引擎。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T13:55:08.380

Jasper 报告是 Railo 人使用的替代方案，您可以尝试一下。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T10:00:00.270

我不这么认为。我所知道的最接近的是 DreamWeaver。已经有一段时间了，但我相信使用远程开发服务 (RDS) 密码，您可以使用 WYSIWYG 设计视图构建完整的动态报告。在它周围添加`CFDocument`标签，你就有了一个 pdf 报告。我相信大多数开发人员使用带有 HTML / CSS 的 CFDocument 来代替 Report Builder。我可能是错的，但我只看到它使用过一次，并且从缺乏搜索结果来看，我认为它没有像希望的那样被接收。

当然，您始终可以使用水晶报表并继续使用`CFReport`这种方式。如果您使用的是 SQL Server，则可以使用 SQL Server Reporting Services (SSRS)。

# php - 从数组内部的数组中获取值

> ID：15959824
> 
> 赞同：-3
> 
> 时间：2013-04-11T22:16:00.760
> 
> 标签：php, arrays, var-dump

嗨，我需要获取一个 var 的值，在将其设置为 var_dump($var) 之后，我得到：

```
array(1) {
    ["docs"]=> array(3) { 
        [0]=> array(1) { 
            ["imgurl"]=> string(68) "http://xxxxx.com/demos/grider/wp-content/uploads/2013/02/22.jpg" } 
        [1]=> array(1) { 
            ["imgurl"]=> string(68) "http://xxxxx.com/demos/grider/wp-content/uploads/2013/02/33.jpg" } 
        [2]=> array(1) { 
            ["imgurl"]=> string(68) "http://xxxxx.com/demos/grider/wp-content/uploads/2013/02/22.jpg" } } } 
```

我需要 foreach 以 http:// 开头的 2 个 img url 字符串

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T22:18:01.613

This should work:

```
foreach($var['docs'] as $sub) {
    echo $sub['imgurl'];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T22:20:11.210

```
foreach ($arr['docs'] AS $key => $link) {
  echo $link['imgurl'].'<br />';
} 
```

# php - php function returning null value

> ID：15959831
> 
> 赞同：0
> 
> 时间：2013-04-11T22:17:07.090
> 
> 标签：php, recursion

I am recursively searching a tree node for its parents, and then trying to return its parent categories in an array.

The function receives and passes itself an array of each parent which is finally returned.

Even though this array has elements, the statement before the return when viewed outside the function is `nul`.

To make it work, I just made the parameter by reference. But why is it always `nul`?

Here is my code:

```
function getParent($id,$parents){ // to work changed this to getParent($id,&$parents)

    if($id < 2) { // 1 is the Top of the Tree , so job is done
        return $string;    
    }

     $child = DB::fetchExecute((object)array( // pdo query for category to get parents
     'sql'   => "category",
     'values'=>  array($id),
     'single'=>  1,
     'debug' =>  0)
     );

    $parent = DB::fetchExecute((object)array( // pdo query for parents info
        'sql'   => "category",
        'values'=>  array($child->native_parent_category_id),
        'single'=>  1,
        'debug' =>  0)
    );
    $string[]= "<li>$parent->name ($parent->native_category_id)</li>
        ";        

    getParent($parent->native_category_id , $parents);    
}

// call function
$array = array();
$returnString = getParent($id,$string);

var_dump($returnString,$array); // will both be NULL, or if called by Reference $array has the goods

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T22:24:37.863

改变：

```
function getParent($id,$parents){ 
```

至：

```
function getParent($id,$parents, $string){ 
```

并改变：

```
getParent($parent->native_category_id , $parents); 
```

至：

```
getParent($parent->native_category_id , $parents, $string); 
```

的范围`$string`仅在函数运行时存在 - 因此，如果您重新运行该函数，它将重置其中的所有变量。每次重新运行时都需要发送变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T22:30:02.010

我会`$string`在函数之前和函数内部声明，`global $string;`在顶部使用。

# ruby-on-rails - How do I load AngularJS bootstrap module correctly?

> ID：15959835
> 
> 赞同：7
> 
> 时间：2013-04-11T22:17:26.847
> 
> 标签：ruby-on-rails, twitter-bootstrap, angularjs

In my Rails app, I have `ui-bootstrap-0.2.0.js` in the `vendor/assets/javascripts` directory. I have required the file in my `application.js` file.

I get an error when I specify the bootstrap as my dependency in this line, `angular.module('myApp',['ui.bootstrap']);`, as instructed to do here, [http://angular-ui.github.io/bootstrap/](http://angular-ui.github.io/bootstrap/)

Chrome detects a `Uncaught ReferenceError: angular is not defined` at this defined module: `angular.module("ui.bootstrap", ["ui.bootstrap.accordion", ...])` in the `ui-bootstrap-0.2.0.js`.

However, `angular.js` catches an error `No module:ui.bootstrap`. So it seems both of these javascript files cannot see eachother. Is there a solution to this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T23:16:46.527

这是我在项目中的做法：

```
<script type="text/javascript" src="libs/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="libs/jquery-ui-1.10.2.custom.min.js"></script>

<script type="text/javascript" src="libs/angular.min.js"></script>
<script type="text/javascript" src="libs/angular-ui.min.js"></script>
<script type="text/javascript" src="libs/angular-resource.min.js"></script>

<script type="text/javascript" src="libs/ui-bootstrap-tpls-0.2.0.min.js"></script>

<script type="text/javascript" src="js/app.js"></script>
<script type="text/javascript" src="js/services.js"></script>
<script type="text/javascript" src="js/directives.js"></script>
<script type="text/javascript" src="js/filters.js"></script>
<script type="text/javascript" src="js/controllers.js"></script>
<script type="text/javascript" src="js/utils.js"></script> 
```

这就是我设置应用程序模块的方式：

```
var app = angular.module('myapp', ['ui.bootstrap','ngResource']); 
```

# java - 通用捕获声明

> ID：15959841
> 
> 赞同：2
> 
> 时间：2013-04-11T22:17:47.607
> 
> 标签：java, exception, error-handling

我想知道是否有一种方法可以编写一个在程序中抛出任何异常时激活的 catch 语句。谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-11T22:38:48.547

到目前为止，您收到的答案的问题是，如果您在 main 中包含“catch-all”，它只会捕获主线程上抛出的异常。

捕获所有未捕获异常的更强大的方法是[`DefaultUncaughtExceptionHandler`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#setDefaultUncaughtExceptionHandler%28java.lang.Thread.UncaughtExceptionHandler%29)为您的项目设置一个，例如，在您的 main 开始时，您可以调用：

```
Thread.setDefaultUncaughtExceptionHandler(new Thread.UncaughtExceptionHandler() {
    @Override
    public void uncaughtException(Thread t, Throwable e) {
        //log the exception
    }
}); 
```

请注意，除了登录之外，做任何事情通常都是不合理的，因为这`Throwable`可能是任何事情，包括不可恢复的错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T22:19:15.130

要捕获某些代码块可能抛出的所有异常，您可以执行以下操作：（这也将捕获您自己编写的异常） From[我如何捕获通过读取和写入文件将引发的所有异常？](https://stackoverflow.com/questions/1075895/how-can-i-catch-all-the-exceptions-that-will-be-thrown-through-reading-and-writi)

```
try {

    // exceptional block of code ...
    // ...
} catch (Exception e){

    // Deal with e as you please.
    //e may be any type of exception at all.
} 
```

之所以有效，是因为 Exception 是所有运行时异常的基类。因此，任何可能抛出的运行时异常都是异常。

这是因为所有运行时异常都继承自 Exception。请注意，Java 中的 Error 和 Exception Unchecked 异常之间存在区别[：从 Error 或 RuntimeException 继承？](https://stackoverflow.com/questions/2008058/unchecked-exceptions-in-java-inherit-from-error-or-runtimeexception), 在这种情况下，您可能需要执行以下操作：

```
try {

} catch(Throwable e) {

} 
```

看到这个[什么时候应该使用 Throwable 而不是新的异常？](https://stackoverflow.com/questions/498217/when-should-throwable-be-used-instead-of-new-exception). 一位用户指出：

错误在任何情况下都无法通过编程方式恢复，并且通常不会被捕获，除非用于记录目的（再次通过它）。异常可以通过编程方式恢复。它的子类 RuntimeException 表示编程错误，通常也不会被捕获。有关其他信息，请参阅评论。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T22:19:23.913

你可以制作类型`Exception`。这将捕获任何`Exception`，但它也没有给程序员太多关于哪里出了问题的信息。通常最好尝试更具体地了解已发生的异常*类型，主要是出于语义原因。*

**理论**

每种类型的 Java 异常都扩展了`Exception`类型。因为`Exception`是所有异常的超类，所以当抛出异常时，无论它的类型如何，它仍然可以隐式转换为 type 的对象`Exception`。

**编辑**

正如评论中提到的，还有`Error`可以抛出的类型，因此`Throwable`最好使用该类型真正捕获所有内容。`Throwable`比 更通用`Exception`，但它仍然按照完全相同的原理工作。它是任何事物的超类`thrown`。

**例如**

```
try{
   // Some code
}
catch(Throwable e)
{
    // Do something. Edited due to comment!
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T22:19:35.237

是的，任何失败的错误都会被这个捕获：

```
try {
    //do things here
} catch (Exception e) {
    //handle exception here
} 
```

但是请注意，这通常是错误的做法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T22:20:21.910

在您的主目录中，将所有代码放入

```
try {
    //Your code
} catch(Exception e) {
    //Handle exceptions 
} 
```

这将处理您的代码调用的任何异常。

# javascript - Go to a page/url fragment within a knockoutjs template page

> ID：15959842
> 
> 赞同：0
> 
> 时间：2013-04-11T22:17:50.653
> 
> 标签：javascript, knockout.js, knockout-templating

I have a knockoutjs single page application with a help page template which inside it contains anchors tags/sections with names like "general", "purchases" etc. I am using knockout js templating

```
Help.html
<p><a href="#general">General</a></p>
<p><a href="#purchases">My Purchases</a></p>

<a name="general"></a>
General info
<a name="purchase"></a>
Purchases help 
```

I have some other html with links

```
<a href="#" data-bind="click: $root.navViewModel.clicked.bind($data, 'help#general')">Learn    More</a>
<a href="#" data-bind="click: $root.navViewModel.clicked.bind($data, 'help#purchases')">Learn    More about Purchases</a> 
```

In navViewModel.clicked I am taking data and setting the templateName to the value. In this case it would be 'help#general' or 'help#purchases'. This doesn't work as it looks for a template names help#general.html

I also tried a click binding to extract template name (help) and the fragment (general or purchases) and set template name to name and do a afterRender to add fragment to window.location.hash. This doesn't seem to work either.

Could you please let me know if you have done this and how you implemented it to got a section/fragment within a page on click using KnockoutJS?

Thanks.

# tree - Hierarchichal datasourc with Json not working with Kendo Tree

> ID：15959848
> 
> 赞同：1
> 
> 时间：2013-04-11T22:18:31.093
> 
> 标签：tree, kendo-ui

I have a kendo tree and am trying to bind it to a hierarchichal datasource which comes from my controller. But only the most parent item is showing in the tree and no child items are shown. I tried multiple approaches suggested but no luck :(. Please find the code below and please help.

```
function populateTreeView() {
    var remoteDataSource = new kendo.data.HierarchicalDataSource({
        transport: {
            read: {
                url: "@Url.Action("GetRoot", "OrgUnit")",
                dataType: "json",
                type: "GET",

            }
         },
        schema: {

            model: {
                id: "id",
                text: "label",
                expanded: true,
                children: "children",
                hasChildren: "HasChildren"
            },
        }
    });

    $("#org-tree1").kendoTreeView({
        dataSource: remoteDataSource,
        dataTextField: "label"
    });
}

$(document).ready(function () {

    populateTreeView();

}); 
```

and My controller returns

var model = new List {root};

```
 return Json(model, JsonRequestBehavior.AllowGet); 
```

My OrgUnit Model looks like

public class OrgUnitModel { private List child = new List();

```
 public int OrgUnitID { get; set; }
    public string OrgUnitName { get; set; }
    public OrgUnitTypes OrgUnitType { get; set; }
    public bool Active { get; set; }
    public bool HasChildren { get { return children.Count > 0; } set { } }
    public List<OrgUnitModel> children { get { return child; } set { child = value; } }

    //Added for the Json
    public string label
    {
        get
        {
            return OrgUnitName;
        }
        set
        {
        }
    }

    public bool load_on_demand
    {
        get { return true; }
    }

    public int id
    {
        get { return OrgUnitID; }
        set { }
    }
} 
```

Thanks in advance

# android - 如何在屏幕在android上旋转时管理socket/http post？

> ID：15959851
> 
> 赞同：1
> 
> 时间：2013-04-11T22:18:42.053
> 
> 标签：android, sockets, rotation

我有一个表单，用户填写并点击 OK 按钮以通过 HTTP 将数据提交到远程站点。

在点击 OK 按钮后，当用户旋转屏幕时，socket 会自动关闭。

我应该将连接定义为静态吗？如果是这样，其他类中的所有内容都将是静态的，类似的行为......这可能不是正确的方式......

如何在 Android 操作系统上管理此过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T22:23:24.290

我会将所有连接逻辑移动到使用单例模式的单独类中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T22:52:26.520

发生这种情况是因为活动在旋转设备时重新启动，这种重新启动可能会在更多情况下发生。（您可以在“*配置更改*”部分下的[此链接中查看](http://developer.android.com/reference/android/app/Activity.html)

 *解决您的问题的一种给定方法是[android services](http://developer.android.com/reference/android/app/Service.html)的用户。您创建一个`Service`, 独立于您的活动运行。

正如@SimonSays 所建议的，您可以实现单例类。单例的实现比服务更容易，您可以在下面的 SO 帖子中查看每种方法的优点：

[Android：何时使用 Service 与 Singleton？](https://stackoverflow.com/questions/3567667/android-when-to-use-service-vs-singleton)*

# linux - Net-SNMP 在 Syslog 中显示错误的版本？

> ID：15959852
> 
> 赞同：-1
> 
> 时间：2013-04-11T22:18:43.447
> 
> 标签：linux, net-snmp

我从源代码构建了 Net-SNMP 5.7.2 并安装了它。当我运行时`snmpget --version`，`snmpd --version`它显示正确的版本。

然而，仅仅因为我目前遇到了一些与 SNMP 相关的错误，我检查了我`/var/log/syslog`的任何条目。令人惊讶的是它有以下几点：

> 4 月 11 日 23:07:00 ubuntu snmpd[4281]：收到 TERM 或 STOP 信号...正在关闭... 4 月 11 日 23:09:58 ubuntu snmpd[4401]： iquerySecName
> 尚未配置 - 内部查询将失败
> 11 23:09:58 ubuntu snmpd[4401]: /etc/snmp/snmpd.conf: line 77: 错误: No address associated with hostname
> Apr 11 23:09:58 ubuntu snmpd[4401]: /etc/snmp/snmpd .conf：第 91 行：错误：错误的 SUBTREE 对象 ID
> Apr 11 23:09:58 ubuntu snmpd[4401]：/etc/snmp/snmp.conf：第 6 行：警告：未知令牌：com2sec。
> 4 月 11 日 23:09:58 ubuntu snmpd[4401]：net-snmp：配置文件中有 2 个错误
> 4 月 11 日 23:09:58 ubuntu snmpd[4401]：NET-SNMP 版本 5.4.3

我仔细检查了它当前运行的守护进程的 PID，它确实是 4401。

我没有构建 SNMP 版本 5.4.3。我很困惑。它也告诉我我的配置也有错误，也许这就是我目前遇到此类问题的原因，因为我的配置文件是用于更高版本的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T23:17:24.650

冒险猜测：您没有删除 Ubuntu 附带的原始软件包；您将手动编译版本的位置留在 /usr/local 中，该位置（可能？）位于 PATH 中操作系统随附的位置之前；这将解释命令行上的正确版本。启动脚本使用硬编码的 PATH 到旧的？

编辑初始化脚本以指向新的恶魔:)

# templates - Backbone.js 在同一个视图上渲染多个模板

> ID：15959856
> 
> 赞同：3
> 
> 时间：2013-04-11T22:18:59.743
> 
> 标签：templates, backbone.js, view

我刚从 Backbone.js 开始。我正在构建一个单页应用程序并试图弄清楚如何处理这种情况。

根据我正在渲染的视图，我需要输出多个模板，这意味着我有一个用于主模板的包装器，以及用于 HTML 其他部分的其他 2 个模板。

我从手动输出模板开始，但这让我想到这种方法是多么正确，因为每当我导航到其他视图时，它都需要我手动删除它们。

问题是，**我怎样才能在一个视图中有效地渲染多个模板（附加在不同的地方），并且仍然可以控制整个视图的删除和取消委托它的事件？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-17T04:05:08.733

我会查看 Addy Osmani 的使用骨干网进行开发的演练。 [http://addyosmani.github.io/backbone-fundamentals/](http://addyosmani.github.io/backbone-fundamentals/)

它介绍了示例 todo 应用程序，然后介绍了一个更复杂的应用程序。我认为您特别想要的是使用诸如 Marionette.js 之类的框架来编排和自动化一些事件委托和删除，当您使用视图时。如果是这种情况，请跳至[http://addyosmani.github.io/backbone-fundamentals/#marionettejs-backbone.marionette](http://addyosmani.github.io/backbone-fundamentals/#marionettejs-backbone.marionette)并阅读 @NathanInMac 所说的木偶将如何帮助将视图组织到区域和布局中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T05:35:55.870

您需要一个包含几个区域的布局。

然后将您的子视图放在这些区域中。

# asp.net-mvc-4 - 查询网页_会员

> ID：15959859
> 
> 赞同：0
> 
> 时间：2013-04-11T22:19:09.943
> 
> 标签：asp.net-mvc-4, code-first, simplemembership

我首先使用 MVC4 Internet 应用程序代码。我想知道是否有办法让我`PasswordVerificationToken`从`webpages_Membership`表中检索。我已经尝试按照[这个旧问题](https://stackoverflow.com/questions/13012612/webpages-usersinroles-missing)中的说明进行操作。

我可以`PasswordVerificationToken`从`webpages_Membership`表中检索，但是当我尝试使用将用户添加到角色时，`Roles.AddUserToRole`出现外键约束错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T07:32:08.200

没关系，只需将简单的成员表添加到实体模型中

# css - Website not loading CSS after refresh in Chrome

> ID：15959862
> 
> 赞同：4
> 
> 时间：2013-04-11T22:19:17.403
> 
> 标签：css, google-chrome, web, refresh, loading

So there is this site-> [http://www.raudsilla.ee](http://www.raudsilla.ee)

This problem occurs only in Chrome- whenever you press refresh the page loses its CSS. Weird thing is that if you look the code of both- after and before refresh, they look exactly the same. And again, only happens in chrome.

I have tried quite may things, so far no luck... I wouldn't like to rule out anything at the moment, so any help appreciated.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T22:28:43.103

浏览器正在输出 javascript 错误，如果您检查代码，则在加载脚本之前，您正在调用 jQuery 的文档准备就绪，正如它所说，“$ 未定义”。

修复现有的 javascript 错误后，它应该可以正确加载。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T11:30:01.430

我在我们自己的一个网站上看到了同样的行为，并开始寻找原因。我现在唯一能得出的结论是它是由样式表的 Mime 类型引起的。这一结论得到了我们这边的行为的支持。

**更新：** Chrome 似乎可以通过三种方式加载 CSS 文件：

*   作为一个新的请求，没有可用的缓存版本，我们的服务器返回`HTTP 200 OK`content-type `text/css`。这工作正常。
*   从缓存中，无需咨询服务器。Chrome 已经缓存了 content-type `text/css`。这工作正常。
*   作为具有可用缓存版本的请求。我们的服务器返回`HTTP 304 Not Modified`，带有 content-type `text/plain`。这不起作用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-17T16:28:41.240

site.css 未在 Chrome 中加载。我添加了？在 CSS url 中，我的样式开始出现。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-09-28T17:12:57.813

经过一些疯狂的测试，我通过添加“？”找到了解决方案。到 url css 文件。

例子：`href="../_css/setup_system.css?" type="text/css"`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-11T22:29:25.290

Shift + Refresh 解决了这个问题，所以它一定是缓存问题。附言。该网站需要很长时间才能加载，考虑优化？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-26T13:12:57.880

禁用 addblock 并刷新，如果网站加载正确，请检查插件

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-21T01:55:11.790

打开控制台（ctrl + shift + c）然后网络面板并检查禁用缓存按钮。

[![在此处输入图像描述](https://i.stack.imgur.com/jrX7f.png)](https://i.stack.imgur.com/jrX7f.png)

# html - 如何将数据属性添加到 ExtJs 呈现的 html？

> ID：15959867
> 
> 赞同：16
> 
> 时间：2013-04-11T22:19:25.333
> 
> 标签：html, dom, extjs, attributes

使用 ExtJs 4.1。

我正在创建一个面板（例如），我希望生成的 html 包含一个或多个“数据-”属性（例如`data-intro="some text" data-step="1"`：）

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-11T22:37:10.233

组件渲染后，您可以将属性应用于表示组件的顶级元素

例子：

```
var panel = Ext.create('Ext.panel.Panel',{
    title: 'Test',
    width: 500,
    height: 200,
    renderTo: Ext.getBody(),
    listeners: {
        afterrender: function(cmp) {
            cmp.getEl().set({
                "data-intro": 'some text',
                "data-step": 1
            });
        }
    }
});

panel.show(); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-01-24T16:08:38.007

您可以使用[`autoEl`config 选项](http://docs-origin.sencha.com/extjs/4.1.3/#!/api/Ext.panel.Panel-cfg-autoEl)来实现这一点。

```
{
    xtype: 'panel',
    title: 'My Panel',
    autoEl: {
        tag: 'div',
        'data-step': '1'
    }
} 
```

# php - php脚本为php api生成url

> ID：15959873
> 
> 赞同：0
> 
> 时间：2013-04-11T22:19:38.810
> 
> 标签：php, api, last.fm

我需要一些帮助，因为我完全是 php 新手。

我制作了一个简单的脚本来获取 XML 曲目列表（来自 API），然后解码我需要的内容并制作带有曲目的 ul 列表。

我还需要从我最近找到的 last.fm php 脚本中提取一些艺术家图像。

脚本 api 使用 http 地址获取艺术家，然后调出我在这里找到的图像[https://gist.github.com/iwek/5109952](https://gist.github.com/iwek/5109952)请求的语法是：[http ://example.com/lastfm .php?artist=阿黛尔](http://example.com/lastfm.php?artist=Adele)

我的曲目列表的 php 代码是：

```
foreach ($mysongs as $item):
$x = explode(" - ",$item->track);
$artist = $x[0];
$title = $x[1];
echo "<ul>$artist 
$song</ul>\n";
endforeach; 
```

现在我需要将 php 代码放入 foreach 中以生成 api 调用 url，还包括该脚本输出的图像。我真的被困在这里了！如果有人有任何想法，请告诉！

PS：请记住，我真的是 php 新手。谢谢您的回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T22:23:30.330

```
$url = "http://www.example.com/lasfm.php";
$artist="Adele";
echo "$url?artist=$artist"; 
```

# python - 抓取 50,000 多个网站的快速方法

> ID：15959876
> 
> 赞同：1
> 
> 时间：2013-04-11T22:19:56.823
> 
> 标签：python, multithreading, web-scraping

我有大约 50,000 多个网站，并希望将 html 内容保存到数据库中。所以我写了这段代码；但是，对于 50,000 多个网站来说，速度太慢了。有没有更好的方法来获取页面内容并将其保存到数据库中？

我的代码：

```
import requests
import MySQLdb
from threading import Thread
import Queue

db = MySQLdb.connect('127.0.0.1','root','','random_db') # connect

cursor = db.cursor()
result = cursor.execute("SELECT id , url from sites where html=''")
result = cursor.fetchall()

c = 1
def save_to_db(q,data):
    try: 
        content = requests.get("http://" + data[1]).text
    except: 
        content = 'empty'

    query = "UPDATE sites SET html='%s' WHERE id=%d"\
            %(MySQLdb.escape_string(str(content)), data[0])
    q.put(query)

q = Queue.Queue()

for data in result:
    t = Thread(target=save_to_db,args=(q,data))
    t.start()
    cursor.execute(q.get())

    if c > 2000:
        db.commit()
        c = 0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T23:06:01.560

在你的循环中启动一个线程来下载一些东西，然后你立即阻塞直到它完成并且结果变得可用（`q.get()`阻塞）。

这意味着尽管使用了线程，但您的程序确实是按顺序运行的，所以它很慢也就不足为奇了。

为了使程序并行工作，您需要一个**工作线程池之**类的东西，它不断地从**工作队列**中拉出他们的工作，然后将结果放入另一个队列，另一个线程可以从那里拉出它们并写入数据库...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T00:13:03.650

有一些异步网络库，例如[gevent](http://www.gevent.org/)或[twisted](http://twistedmatrix.com/trac/)。这些类型的库是**无阻塞**的，这意味着它们能够在没有线程编程的情况下同时进行多次下载。

示例 gevent 爬虫 [https://bitbucket.org/raptorz/gcrawler/src/1f081cde224a86051a50e3d7c252f2555dd4b581/src/gcrawler.py?at=default](https://bitbucket.org/raptorz/gcrawler/src/1f081cde224a86051a50e3d7c252f2555dd4b581/src/gcrawler.py?at=default)

# c++ - Windows CE 6.0 和运行时链接到 Debug DLL /MDd

> ID：15959877
> 
> 赞同：0
> 
> 时间：2013-04-11T22:19:57.323
> 
> 标签：c++, windows-ce

我在 x86 PC 上使用 Windows CE 6.0 R3。我已经为平台构建了 NK.bin 和 SDK。但是我有一些问题要了解如何使用 /MTd（调试 DLL）构建控制台应用程序。

如果我尝试构建这个：

```
// main.c with /MDd
#include <stdio.h>
int main(int argc, char* argv[])
{
    printf("Hello World\n");
    return 0;
} 
```

这工作完美，但是

```
// main.cpp /MDd
#include <iostream>
int main(int argc, char* argv[])
{
    std::cout << "Hello World\n";
    return 0;
} 
```

构建但应用程序“崩溃”。似乎调试版本中的 C++ STD 共享库在目标平台上不存在，但 CRT 的调试版本存在。

为链接到调试版本的 c++ 库的 windows ce 6.0 构建 C++ 应用程序需要做什么？

为链接到调试版本的 c++ 库的 windows ce 6.0 构建 C++ 应用程序需要做什么？我是否必须更改我的平台构建器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T10:20:09.177

发现问题。问题是 VS 2008 不支持 CRT 的调试版本，所以我必须在目标平台上手动部署 msvcr90d.dll。msvcr90d.dll 位于 $(VCInstallDir)/ce/bin/$(ARCHFAM)。

# javascript - 如何通过 getJSON 传递 HTML 标签？

> ID：15959895
> 
> 赞同：-4
> 
> 时间：2013-04-11T22:20:58.743
> 
> 标签：javascript, jquery, json

我正在尝试使用 JQuery 的 getJSON 将 json_encode-d 数组从 PHP 传递到 JavaScript，然后将其显示在 HTML 中。它在所有情况下都可以正常工作，除非我想传递基本的 HTML 标签，例如 3 ⁴显示为：

```
3<sup>4</sup> 
```

当我有以下情况时它工作正常：

```
var myVar = <?php echo json_encode(jsonArray); ?>; 
```

但我也需要使用 getJSON。有没有一种简单的方法可以做到这一点？也许是我没弄明白的正则表达式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:59:06.280

这是取消正斜杠的正则表达式：

```
var cleanString = dirtyString.replace(/\\\//g,"/"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T22:57:25.670

尝试这个：

`$('#YourTarget').html( $('<div/>').html(yourStringFromJSON).text());`

例如：

`$('h1').html( $('<div/>').html('Hola&lt;sup&gt;Hey&lt;/sup&gt;').text());`

# spring - 哪些资源可用于 Spring Integration 最佳实践

> ID：15959902
> 
> 赞同：3
> 
> 时间：2013-04-11T22:22:02.913
> 
> 标签：spring, spring-integration

我正在做一个项目，我们第一次使用 Spring Integration 和 AMQP。

我注意到将所有内容连接在一起似乎涉及*很多XML 配置。*我们的配置文件已经很乱了，要了解所有东西是如何挂在一起的变得越来越棘手。我担心我们会犯一些可预防的错误。

有哪些资源可以为如何构建大规模、真实世界的 spring 集成和 AMQP 项目提供指导。

例如：

*   我们应该为通道/队列/交换遵循什么命名约定
*   何时使用 XML 配置与基于注释的配置
*   可以混合和匹配注释和 xml，还是这是灾难的根源？
*   如何布局 bean 定义以便于使用

注意 - 我不是在寻找关于各种组件做什么的指导，更多的是 - 如何构建项目以促进可维护性。

理想情况下，我正在寻找：

*   博客文章
*   图书
*   StackOverflow 答案（内联答案也很棒）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-04T14:52:28.540

它不是特定于 SI 和 AMQP，但我认为阅读
[Enterprise Integration Patterns : Designing, Building, and Deploying Messaging Solutions](http://amazon.com/o/asin/0321200683/ref=nosim/enterpriseint-20)会很有帮助。这个[链接](http://www.eaipatterns.com/)也有很好的资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-27T18:49:00.880

您还可以查看此[Spring Integration 实用提示和技巧](https://www.infoq.com/presentations/Spring-Integration-Practical-Tips-and-Tricks)视频。

# xna - Xna (MonoGame) DynamicSoundEffectInstance 缓冲区已经完全异常

> ID：15959903
> 
> 赞同：0
> 
> 时间：2013-04-11T22:22:03.593
> 
> 标签：xna, monogame, soundbuffer

我正在使用 DynamicSoundEffectInstance 类的 MonoGame（基本上是 Xna）中制作这个游戏。MonoGame 还没有 DynamicSoundEffectInstance 的实现，所以我自己做了：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
#if MONOMAC
using MonoMac.OpenAL;
#else
using OpenTK.Audio.OpenAL;
#endif
using System.Threading;

namespace Microsoft.Xna.Framework.Audio
{
public sealed class DynamicSoundEffectInstance : IDisposable
{
    private const int BUFFERCOUNT = 2;

    private SoundState soundState = SoundState.Stopped;
    private AudioChannels channels;
    private int sampleRate;
    private ALFormat format;
    private bool looped = false;
    private float volume = 1.0f;
    private float pan = 0;
    private float pitch = 0f;
    private int sourceId;
    private int[] bufferIds;
    private int[] bufferIdsToFill;
    private int currentBufferToFill;
    private bool isDisposed = false;
    private bool hasSourceId = false;
    private Thread bufferFillerThread = null;

    // Events
    public event EventHandler<EventArgs> BufferNeeded;

    internal void OnBufferNeeded(EventArgs args)
    {
        if (BufferNeeded != null)
        {
            BufferNeeded(this, args);
        }
    }

    public DynamicSoundEffectInstance(int sampleRate, AudioChannels channels)
    {
        this.sampleRate = sampleRate;
        this.channels = channels;
        switch (channels)
        {
        case AudioChannels.Mono:
            this.format = ALFormat.Mono16;
            break;
        case AudioChannels.Stereo:
            this.format = ALFormat.Stereo16;
            break;
        default:
            break;
        }                       
    }

    public bool IsDisposed
    {
        get
        {
            return isDisposed;
        }
    }

    public float Pan
    {
        get
        {
            return pan;
        }

        set
        {
            pan = value;
            if (hasSourceId)
            {
                // Listener
                // Pan
                AL.Source(sourceId, ALSource3f.Position, pan, 0.0f, 0.1f);
            }
        }
    }

    public float Pitch
    {
        get
        {
            return pitch;
        }
        set
        {
            pitch = value;
            if (hasSourceId)
            {
                // Pitch
                AL.Source(sourceId, ALSourcef.Pitch, XnaPitchToAlPitch(pitch));
            }
        }
    }

    public float Volume
    {
        get
        {
            return volume;
        }

        set
        {
            volume = value;
            if (hasSourceId)
            {
                // Volume
                AL.Source(sourceId, ALSourcef.Gain, volume * SoundEffect.MasterVolume);
            }

        }
    }   

    public SoundState State
    {
        get
        {
            return soundState;
        }
    }

    private float XnaPitchToAlPitch(float pitch)
    {
        // pitch is different in XNA and OpenAL. XNA has a pitch between -1 and 1 for one octave down/up.
        // openAL uses 0.5 to 2 for one octave down/up, while 1 is the default. The default value of 0 would make it completely silent.
        return (float)Math.Exp(0.69314718 * pitch);
    }

    public void Play()
    {
        if (!hasSourceId)
        {
            bufferIds = AL.GenBuffers(BUFFERCOUNT);
            sourceId = AL.GenSource();
            hasSourceId = true;
        }
        soundState = SoundState.Playing;

        if (bufferFillerThread == null)
        {
            bufferIdsToFill = bufferIds;
            currentBufferToFill = 0;
            OnBufferNeeded(EventArgs.Empty);
            bufferFillerThread = new Thread(new ThreadStart(BufferFiller));
            bufferFillerThread.Start();
        }

        AL.SourcePlay(sourceId);
    }

    public void Apply3D(AudioListener listener, AudioEmitter emitter)
    {
        Apply3D(new AudioListener[] { listener }, emitter);
    }

    public void Pause()
    {
        if (hasSourceId)
        {
            AL.SourcePause(sourceId);
            soundState = SoundState.Paused;
        }
    }

    public void Apply3D(AudioListener[] listeners, AudioEmitter emitter)
    {
        // get AL's listener position
        float x, y, z;
        AL.GetListener(ALListener3f.Position, out x, out y, out z);

        for (int i = 0; i < listeners.Length; i++)
        {
            AudioListener listener = listeners[i];

            // get the emitter offset from origin
            Vector3 posOffset = emitter.Position - listener.Position;
            // set up orientation matrix
            Matrix orientation = Matrix.CreateWorld(Vector3.Zero, listener.Forward, listener.Up);
            // set up our final position and velocity according to orientation of listener
            Vector3 finalPos = new Vector3(x + posOffset.X, y + posOffset.Y, z + posOffset.Z);
            finalPos = Vector3.Transform(finalPos, orientation);
            Vector3 finalVel = emitter.Velocity;
            finalVel = Vector3.Transform(finalVel, orientation);

            // set the position based on relative positon
            AL.Source(sourceId, ALSource3f.Position, finalPos.X, finalPos.Y, finalPos.Z);
            AL.Source(sourceId, ALSource3f.Velocity, finalVel.X, finalVel.Y, finalVel.Z);
        }
    }

    public void Dispose()
    {
        if (!isDisposed)
        {
            Stop(true);
            AL.DeleteBuffers(bufferIds);
            AL.DeleteSource(sourceId);
            bufferIdsToFill = null;
            hasSourceId = false;
            isDisposed = true;
        }
    }

    public void Stop()
    {
        if (hasSourceId)
        {
            AL.SourceStop(sourceId);
            int pendingBuffers = PendingBufferCount;
            if(pendingBuffers > 0)
                AL.SourceUnqueueBuffers(sourceId, PendingBufferCount);
            if (bufferFillerThread != null)
                bufferFillerThread.Abort();
            bufferFillerThread = null;
        }
        soundState = SoundState.Stopped;
    }

    public void Stop(bool immediate)
    {
        Stop();
    }

    public TimeSpan GetSampleDuration(int sizeInBytes)
    {
        throw new NotImplementedException();
    }

    public int GetSampleSizeInBytes(TimeSpan duration)
    {
        int size = (int)(duration.TotalMilliseconds * ((float)sampleRate / 1000.0f));
        return (size + (size & 1)) * 16;
    }

    public void SubmitBuffer(byte[] buffer)
    {
        this.SubmitBuffer(buffer, 0, buffer.Length);
    }

    public void SubmitBuffer(byte[] buffer, int offset, int count)
    {
        if (bufferIdsToFill != null) {
            AL.BufferData (bufferIdsToFill [currentBufferToFill], format, buffer, count, sampleRate);
            AL.SourceQueueBuffer (sourceId, bufferIdsToFill [currentBufferToFill]);
            currentBufferToFill++;
            if (currentBufferToFill >= bufferIdsToFill.Length)
                bufferIdsToFill = null;
            else
                OnBufferNeeded (EventArgs.Empty);
        } else {
            throw new  Exception ("Buffer already full.");
        }
    }

    private void BufferFiller()
    {
        bool done = false;

        while (!done)
        {
            var state = AL.GetSourceState(sourceId);
            if (state == ALSourceState.Stopped || state == ALSourceState.Initial)
                AL.SourcePlay(sourceId);

            if (bufferIdsToFill != null)
                continue;

            int buffersProcessed;
            AL.GetSource(sourceId, ALGetSourcei.BuffersProcessed, out buffersProcessed);

            if (buffersProcessed == 0)
                continue;

            bufferIdsToFill = AL.SourceUnqueueBuffers(sourceId, buffersProcessed);
            currentBufferToFill = 0;
            OnBufferNeeded(EventArgs.Empty);
        }
    }

    public bool IsLooped
    {
        get
        {
            return looped;
        }

        set
        {
            looped = value;                
        }
    }

    public int PendingBufferCount 
    {
        get
        {
            if (hasSourceId)
            {
                int buffersQueued;
                AL.GetSource(sourceId, ALGetSourcei.BuffersQueued, out buffersQueued);
                return buffersQueued;
            }
            return 0;
        }
    }
}   
} 
```

现在，我按照[本](http://www.david-gouveia.com/creating-a-basic-synth-in-xna-part-ii/ "这")教程在 Xna 中制作动态声音，该教程与我的自定义 MonoGame 类一起使用。但是，当我运行项目（Xamarin Studio 4、Mac OS X 10.8、MonoGame 3.0.1）时，它会抛出这个异常：

```
Buffer already full 
```

指向我的自定义类中的代码：

```
 public void SubmitBuffer(byte[] buffer, int offset, int count)
    {
        if (bufferIdsToFill != null) {
            AL.BufferData (bufferIdsToFill [currentBufferToFill], format, buffer, count, sampleRate);
            AL.SourceQueueBuffer (sourceId, bufferIdsToFill [currentBufferToFill]);
            currentBufferToFill++;
            if (currentBufferToFill >= bufferIdsToFill.Length)
                bufferIdsToFill = null;
            else
                OnBufferNeeded (EventArgs.Empty);
        } else {
            throw new  Exception ("Buffer already full."); //RIGHT HERE IS THE EXCEPTION
        }
    } 
```

我注释掉了异常，然后再次运行它。它播放了声音，里面有爆裂声，但它仍然在播放。如何清除缓冲区，使其未满？我完全按照[本](http://www.david-gouveia.com/creating-a-basic-synth-in-xna-part-ii/ "这")教程进行操作，所以我添加到项目中的所有代码都在其中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T23:41:38.523

哦！自己想出来的；我将挂起的缓冲区计数从 3 更改为 2。我的最终提交缓冲区代码是：

```
while(_instance.PendingBufferCount < 2)
            SubmitBuffer(); 
```

2 在哪里，以前是 3。现在它不再抛出异常。

# security - 等待 Powershell 中的特定事件

> ID：15959904
> 
> 赞同：1
> 
> 时间：2013-04-11T22:22:03.633
> 
> 标签：security, events, powershell

我正在 powershell 中编写一个脚本，它将等待 Windows 7 中的特定事件。安全日志中的事件 ID 4776。该脚本将在计算机锁定时运行。

该脚本应该在空闲状态下运行，本质上是一个 while(true) 循环，它将等待事件的“审核失败”发生。一旦事件发生，它将向计数器添加一个。一旦事件在“审核成功”状态下发生，它将从循环中中断，从而使用脚本完成。

我最初的想法是获取事件的日期并与运行时间的日期进行比较，如果匹配，则等等。

到目前为止我所拥有的：

```
$i=0
while(true){       
   $date = Get-Date -format G
   $eventtime_fail=Get-EventLog Security | ? {$_.EventId -eq 4776} | where {$_.entrytype -eq "FailureAudit"} | Select-Object -expand TimeGenerated | Select -first 1
   $eventtime_success=Get-EventLog Security | ? {$_.EventId -eq 4776} | where {$_.entrytype -eq "SuccessAudit"} | Select-Object -expand TimeGenerated | Select -first 1

    if($date -eq $eventtime_fail){
         $i++
     }
    else if($date -eq $eventtime_success){
          break
     }
} 
```

我意识到我可以简单地创建一个计划任务并完成它，但我真的需要它是独立的。此脚本将在计算机锁定后运行，并在计算机解锁后停止执行。

在 Windows XP 中，有一种方法可以让脚本等待事件发生然后运行某种指令，这正是我所需要的，这被称为 eventtriggers.exe，当 vista 出现并替换计划任务时它被删除但是，计划任务通过 powershell 脚本的工作方式不同。

除了我这样做的方式之外，还有其他方法吗？有没有办法让 eventtriggers.exe 恢复或至少类似的东西？帮助我 StackOverflow 的人，你我唯一的希望。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T08:08:19.760

我没有测试它，但 imo 应该可以工作。尝试创建一个事件日志侦听器。

```
$seclog = Get-EventLog -List | Where-Object {$_.Log -eq 'Security'}
Register-ObjectEvent -InputObject $seclog -SourceIdentifier NewEventLogEntry -EventName EntryWritten -Action {

    $entry = $event.SourceEventArgs.Entry

    if($entry.EventID -eq 4776)
    {
        if($entry.EntryType -eq 'SuccessAudit')
        {
            'code for SuccessAudit'
        }
        elseif($entry.EntryType -eq 'FailureAudit')
        {
            'code for FailureAudit'
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T05:16:55.330

您可以使用[Microsoft 文档](http://msdn.microsoft.com/en-us/library/microsoft.win32.systemevents_members%28v=VS.80%29.aspx)`SytemEvents`中描述的其中一种。

您将[在锁定计算机之前或解锁计算机后运行脚本 (Windows 7/Vista/XP)](https://stackoverflow.com/a/5886056/608772)中找到启动和停止脚本的方法。

# sql - Oracle SQL 自动增量 PLS-00103

> ID：15959905
> 
> 赞同：1
> 
> 时间：2013-04-11T22:22:05.130
> 
> 标签：sql, oracle

当我运行这个 SQL 时：

```
CREATE OR REPLACE TRIGGER test_trigger
BEFORE INSERT
ON FITNESS_BMR
REFERENCING NEW AS NEW
FOR EACH ROW
BEGIN
SELECT t1_seq.nextval INTO :NEW.ID FROM dual;
END; 
```

我收到此错误：

```
"Error at line 7: PLS-00103: Encountered the symbol ""CREATE""","" 
```

有人知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T02:42:27.253

**[我在SQL 小提琴](http://sqlfiddle.com/#!4/7aa83)**中使用了您的代码，但得到了一个稍微不同的错误：

`ORA-00900: invalid SQL statement`

我将您的代码更改为仅删除分号之后`dual`，我可以毫无错误地创建。该表也必须存在，但我假设它已经存在！;)

```
create table FITNESS_BMR ( a number(2) );

CREATE OR REPLACE TRIGGER test_trigger
BEFORE INSERT
ON FITNESS_BMR
REFERENCING NEW AS NEW
FOR EACH ROW
BEGIN
SELECT t1_seq.nextval INTO :NEW.ID FROM dual
END; 
```

# asp.net - 如何在会话超时或窗口关闭时记录活动

> ID：15959906
> 
> 赞同：2
> 
> 时间：2013-04-11T22:22:13.763
> 
> 标签：asp.net, asp.net-mvc-3

在我的应用程序中，我们希望在用户关闭窗口或会话超时时将一些活动和消息记录到数据库中。是否有任何经过测试的代码可以做到这一点？在 Global.asax.cs 的 Session_End 方法中编写此代码是否正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T22:39:10.513

您可以为会话执行类似的操作（请注意，无法保证检查浏览器是否关闭）。此方法仅在您`inProc`用于会话时才有效。

在你的 global.asax.cs

```
protected void Session_Start(object sender, EventArgs e)
{
   //a value must be present to call Session_End so we pre-seed it
   Session["SeededValueToEnableSession_End"] = true;
}

protected void Session_End(object sender, EventArgs e)
{
   //handle session ending
} 
```

# javascript - Jquery Javascript - 加载框

> ID：15959909
> 
> 赞同：0
> 
> 时间：2013-04-11T22:22:43.200
> 
> 标签：javascript, jquery, reveal.js

我有一个小问题：

This is a script I have for page on load too fade in and show a login box but the code only works to the fade in and ignores the reveal. How do I solve?

```
<script>
    $(document).ready(function () {
        $('body').hide().fadeIn('8000'); {
            $('#login-window').reveal();
        });
</script> 
```

Below is the code that controls the behavior of the contact box.

```
$(document).ready(function () {
    $('a.login-window').click(function () {

        // Getting the variable's value from a link 
        var contactpopup = $(this).attr('href');

        //Fade in the Popup and add close button
        $(contactpopup).fadeIn(300);

        //Set the center alignment padding + border
        var popMargTop = ($(contactpopup).height() + 24) / 2;
        var popMargLeft = ($(contactpopup).width() + 24) / 2;

        $(contactpopup).css({
            'margin-top': -popMargTop,
                'margin-left': -popMargLeft
        });

        // Add the mask to body
        $('body').append('<div id="mask"></div>');
        $('#mask').fadeIn(300);

        return false;
    });

    // When clicking on the button close or the mask layer the popup closed
    $('a.close, #mask').live('click', function () {
        $('#mask , .contact-popup').fadeOut(300, function () {
            $('#mask').remove();
        });
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T22:28:17.557

您需要在 fadeIn 函数中调用回调函数。所以它看起来像：

```
$('body').hide().fadeIn('8000', function () {
            $('#login-window').reveal();
}); 
```

# jquery - 如何处理书签和绝对定位的 div

> ID：15959911
> 
> 赞同：0
> 
> 时间：2013-04-11T22:22:58.523
> 
> 标签：jquery, html, css

我有一个锚书签，当单击它时，它位于我的主标题绝对定位的 div 后面。我需要一个不需要未来的 html 程序员改变他们使用锚书签的方式的解决方案。对于如何解决这个问题，有任何的建议吗？

请看我的例子来说明这个问题。

[http://jsfiddle.net/8dErs/](http://jsfiddle.net/8dErs/)

```
 <a name="5"></a><h1>Article 5</h1> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T22:54:02.537

您可能会尝试滚动“顶部”不是实际的屏幕/窗口顶部，而是定位 div 的位置，即内容的父级。因此，您根据大约 180px 计算滚动，这大约比您的导航低 5px。

但是，在长页面上，如果您开始手动滚动，则标题无论如何都会留在那里，所以也许使用带有动画的 jquery 沿 Y 和它自己的 div 中的所有内容会更简单。这样，您可以避免使用固定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T22:26:34.017

这是因为顶部导航的位置是固定的，因此从文档流中取出，不再被视为流的一部分。

如果您希望锚点滚动以使标题显示在标题下方（因此不会在视觉上受到阻碍），您将不得不依靠 JS 重新计算页面的滚动位置。

p/s：我从不建议对太大的元素进行位置固定。`});`您的 JS 中也有一个错误 - 最后一行不应该是`}`.

# php - 为什么空字节不起作用？

> ID：15959912
> 
> 赞同：0
> 
> 时间：2013-04-11T22:23:03.177
> 
> 标签：php, null, byte

我根据我的知识创建了一个简单的网站，但我发现它存在本地文件包含 ( **LFI** ) 漏洞。我想在我的计算机上测试利用它，但是每当我尝试绕过无效的空字节时。我编写了这个简单的代码并尝试了它，但它仍然无法正常工作 => [test.php?page=index.php%00（在当前目录中显示 index.php）]

```
$page=$_GET['page'];
if(!include($page.".php"))
phpinfo(); 
```

任何人都可以提出解决方案来完成它吗？（`../../etc/passwd`也不工作）

我正在使用**PHP 5.3.2**和**Apache 2.2.14**和**firefox**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T22:25:04.857

`include`不是布尔函数。

尝试

```
if( file_exists($_GET['page'] . ".php") ) {
    include($_GET['page'] . ".php");
} 
```

然后你会打电话`scriptName.php?page=test`来看看是否`test.php`存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T22:49:13.800

PHP =/= C。PHP 可以毫无问题地处理字符串中的 NUL 字节。

还要注意不要在服务器级别过滤 %00。

[看看它是如何工作](http://codepad.viper-7.com/9jqq29/55dev?a=1%002)的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T22:25:24.717

我总是使用白名单，所以允许页面。如果“索引”不在允许的页面内，我不包括在内。[假设：?page=index 和 $allowed = ARRAY('index', 'home', 'imprint', ...)]

# windows-services - MSMQ、Windows 服务和服务器重启

> ID：15959919
> 
> 赞同：0
> 
> 时间：2013-04-11T22:23:37.023
> 
> 标签：windows-services, msmq, reboot

我正在使用从私有 MSMQ 队列读取消息的旧 Windows 服务处理它们（做一些数据库工作，发送一些电子邮件），然后等待下一条消息（PeekCompleted）

该服务存在问题 - 每当 Windows 更新需要重新启动服务器时（几乎总是如此），该服务会以“已启动”状态重新启动，但必须手动重新启动，否则消息只会堆积在队列中。

我的第一个倾向是认为 OnStart 处理程序中的某些内容在服务器重新启动时没有受到影响，我正在尝试整理日志（另一个故事）但 Windows 服务和线程不是我的正常域所以我希望有人能指出我正确的方向......

下面是 OnStart Handler 和消息处理函数，去掉了无关紧要的东西。

问题：在 OnStart 中，MessageRecieved 函数附加到 PeekCompleted 事件。我假设 OnStart 在服务器恢复时触发，因此必须附加处理程序，但我不清楚（a）在重新启动时已经在队列中或（b）在重新启动期间到达的消息是否会真正触发事件 ？

如果应该还有其他我应该寻找的东西吗？

欢迎任何建议！

```
protected override void OnStart(string[] args)
    {
        try
        {
            _inProcess = false;
            _queueMessage = null;
            _stopping = false;
            _queue = ReadyQueue(_queueName);
            if (_queue == null)
            {
                throw new Exception(string.Format("'ReadyFormQueue({0})' returned null", _queueName));
            }
            _queue.PeekCompleted += new PeekCompletedEventHandler(MessageReceived);
            _queue.Formatter = new BinaryMessageFormatter();
            _queue.BeginPeek();
        }
        catch (Exception exception)
        {
            //do cleanup and other recovery stuff
        }
    }

    private void MessageReceived(object sender, PeekCompletedEventArgs e)
    {
        _currentMessage = null;
        _inProcess = false;
        try
        {
            _queueMessage = _queue.EndPeek(e.AsyncResult);
            _queueMessage.Formatter = new BinaryMessageFormatter();
            _currentMessage = (MyMessageType)_queueMessage.Body;
            _queue.ReceiveById(_queueMessage.Id);
            _inProcess = true;
            _helper = new MessageHelper();
            _currentMessage = _helper.Process(_currentMessage);  //sets global _inProcess flag
            if (_inProcess)
            {
                Thread.Sleep((int)(_retryWaitTime * 0x3e8));
                SendFormMessageToQueue(FailedQueueName, _currentMessage);
            }
            else
            {
                _queue.BeginPeek();
            }

        }
        catch (Exception exception)
        {
            _inProcess = false;
            //do other recovery stuff
            if (_currentMessage != null)
            {
                ReadyFormQueue(_poisonQueueName);
                SendFormMessageToQueue(_poisonQueueName, _currentMessage);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:36:05.363

这个遗留的 windows 服务可以在排队基础设施启动并完全运行之前启动，在初始连接中必须失败，因此不处理消息。

我要检查的第一件事（除非 Windows 服务具有正确的日志记录）是否存在正确设置的 Windows 服务依赖项 - 在 MSMQ 服务本身完全启动之前，您不希望您的旧服务完全启动。

我不认为遗留服务有问题，因为一旦你重新启动它，它似乎工作正常，我认为你有一个资源可用竞争类型的问题，消费者在资源之前开始并且它是' 不完全旨在从中恢复。

我会：创建一个服务依赖项（可以在 SCM 中完成），然后重新启动服务器，看看是否有更多的 MSMQ 消息堆积起来，我猜答案是否定的。

希望这可以帮助

# c# - “System.Drawing.RectangleF”不包含“Center”的定义

> ID：15959923
> 
> 赞同：-2
> 
> 时间：2013-04-11T22:23:58.467
> 
> 标签：c#, xna

我在以下行中收到此错误消息：

```
Point posDiff = new Point(RectF1.Center.X - RectF2.Center.X, RectF1.Center.Y - RectF2.Center.Y); 
```

'System.Drawing.RectangleF' 不包含'Center' 的定义，并且找不到接受'System.Drawing.RectangleF' 类型的第一个参数的扩展方法'Center'（您是否缺少 using 指令或程序集引用?)

怎么了？缺少哪个参考？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T22:25:57.037

很简单，没错。查看[`RectangleF`](http://msdn.microsoft.com/en-us/library/system.drawing.rectanglef.aspx). 没有`Center`财产。不清楚你为什么认为有*一个*。也许你对另一种类型感到困惑？

当然，创建自己的方法来返回 a 的中心很容易，`RectangleF`您可以将其设为扩展方法：

```
public static PointF Center(RectangleF rectangle)
{
    return new PointF(rectangle.X + rectangle.Width / 2,
                      rectangle.Y + rectangle.Height / 2);
} 
```

目前尚不清楚为什么您要尝试从 ( -based) 中的值创建( -based `Point`) 。我可以想象这个：`int``RectangleF``float`

```
PointF center1 = RectF1.Center(); // Using the new extension method
PointF center2 = RectF2.Center();
PointF posDiff = new PointF(center1.X - center2.X, center1.Y - center2.Y); 
```

...虽然我很想创建一个`VectorF`类型以明确说明您在逻辑上谈论的是两点之间的区别，而不是新点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T22:25:59.010

在 MSDN 网站上可以清楚地看到：

[http://msdn.microsoft.com/en-us/library/system.drawing.rectanglef.aspx](http://msdn.microsoft.com/en-us/library/system.drawing.rectanglef.aspx)

`RectangleF`不包含此类成员、方法或属性。

所以它实际上不存在，你做错的是试图使用不存在的东西。

# android - 如何在列表视图中实现延迟加载的图像列表

> ID：15959927
> 
> 赞同：1
> 
> 时间：2013-04-11T22:24:15.313
> 
> 标签：android, image, listview, scroll, universal-image-loader

我想要做的是滚动图像列表。但是当我快速向下或向上滚动时，图像按顺序放错了位置。差异图片出现在它应该在的地方。我已经尝试将 imageview 设置为从我的 imageloader 库中绘制的 null 以清除任何 rpevious 图像（如果有）。但问题仍然存在。我应该怎么办

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T22:29:10.130

您可以尝试使用[通用图像加载器](https://github.com/nostra13/Android-Universal-Image-Loader)

如果您的 listView 包含来自 Web 的图像，这用于 listView 优化和提高性能。

特征：

*   多线程图像加载 广泛调整 ImageLoader 的可能性
*   配置（线程执行器、下载器、解码器、内存和磁盘
*   缓存、显示图像选项等）图像的可能性
*   在内存和/或设备的文件系统（或 SD 卡）中缓存
*   可以“收听”加载过程 可以使用单独的选项自定义每个显示图像调用 小部件支持

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T09:37:00.157

终于找到了罪魁祸首。我正在使用 imageview.bringtofront() 函数，该函数由于某种未知原因导致了问题。我想把图像视图的一部分放在另一个前面，并使用相对布局并放在前面。现在我删除了 bringtofront() 并在 relativelayout 中重新排列了 imageview，使其已经在前面。解决。谢谢你们

# django - 如何在部署时清除 memcachier？

> ID：15959934
> 
> 赞同：1
> 
> 时间：2013-04-11T22:24:54.300
> 
> 标签：django, heroku

有没有办法在每次部署后自动清除缓存？

或者有没有我可以运行的命令来清除它，类似于运行进程的命令？

例如 heroku 运行 python manage.py syncdb

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T06:48:22.930

您可以使用清除整个缓存（无论底层实现如何）[`django.core.cache.clear`](https://docs.djangoproject.com/en/dev/topics/cache/#basic-usage)

> 最后，如果要删除缓存中的所有键，请使用 cache.clear()。小心这个；clear() 将从缓存中删除所有内容，而不仅仅是应用程序设置的键。

所以一种方法是[手动编写一个管理命令](https://docs.djangoproject.com/en/dev/howto/custom-management-commands/)来进行这个调用。在您的一个应用程序中创建一个新模块`myapp/management/commands/clear_cache.py`：

```
from django.core.management.base import BaseCommand
from django.core import cache

class Command(BaseCommand):
    help = 'Clears the underlying cache'

    def handle(self, *args, **options):
        cache.clear() 
```

你现在可以打电话了`python manage.py clear_cache`。您应该查看[Fabric](http://fabfile.org/)以管理部署，因为它允许您编写自动化脚本来执行所有必需的步骤（以及调用此清除缓存脚本）

# python - 如何从 Web 浏览器中运行我的 python 脚本并处理结果？

> ID：15959936
> 
> 赞同：5
> 
> 时间：2013-04-11T22:25:14.707
> 
> 标签：python, django, web-applications, view

我写了一个简短的 python 脚本，它接受一个文本并用它做一些事情。例如，它有一个函数可以计算文本中的单词并返回数字。

如何在 django 中运行此脚本？我想从视图中获取该文本（文本字段或其他内容）并将结果返回给视图。

我只想使用 django 给脚本一个 web 界面。它只适合我，也许是少数人，而不是大量观众。没有部署。

编辑：当我第一次认为解决方案是“Django”时，我明确要求它。由于我对 WSGI 的无知，这当然是一个错误。不幸的是，没有人告诉我这个错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T12:25:58.960

首先，你真的决定成为 Django 吗？如果不是，我建议 Django 虽然是一个很棒的框架，但对您的需求来说有点多。你真的不需要全栈。

你可能想看看[Flask](http://flask.pocoo.org/)，它是一个 Python 微框架（而且非常易于使用）

但是，既然你问到 Django...

您可以创建一个调用您的脚本的自定义 Django 命令[（此处为文档）](https://docs.djangoproject.com/en/dev/howto/custom-management-commands/)，可以从[该问题](https://stackoverflow.com/questions/6250970/run-custom-admin-command-from-view)中所述的视图调用该命令。

这还有一个额外的好处，就是允许您也可以通过 Django management.py 脚本运行您的脚本。这意味着您可以使与该项目相关的任何未来脚本保持良好和统一。

要获取脚本运行的结果，您可以从调用命令的同一段代码中获取它们（最后一个链接中描述的部分），或者您可以将大型结果集写入文件并处理该文件。您选择哪个实际上取决于您的结果集的大小以及您之后是否想对它做任何其他事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-24T13:12:04.960

自从我询问了 Django 以来，这里没有人告诉我：

我真正需要的是一个名为**WSGI**的简单解决方案。为了使您的 python 脚本可以从 webbrowser 访问，您不需要 Django，也不需要 Flask。像**Werkzeug**或**CherryPy**这样的解决方案要容易得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T22:31:35.457

按照上面评论中的建议，按照 django 教程进行操作后，您需要创建一个包含文本字段和提交按钮的视图。提交表单后，您的视图可以运行您编写的脚本（从另一个文件导入或复制并粘贴；如果它很复杂，导入可能更可取，但您的听起来只有几行），然后返回你计算过。如果你想变得非常花哨，你可以用一些 javascript 和一个 ajax 请求来完成，但如果你刚刚开始，你应该先用一个简单的表单来做。

# dynatree - 取消选择部分选择的动态树中的所有孩子

> ID：15959939
> 
> 赞同：0
> 
> 时间：2013-04-11T22:25:37.763
> 
> 标签：dynatree

我有一个带有复选框的分层 dynatreee。单击部分选定树的父复选框首先选择其所有子节点，然后在选择/取消选择所有子节点之间切换。如何使第一次单击取消选择所有子项而不是选择它们？

非常感谢

问候，德扬

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T03:58:56.147

在您的 onSelect 函数中尝试：

```
onSelect: function(select, node){

    // visit all children of the node and deselect them             
    node.visit(function(node){
        node.select(false);
    });
} 
```

# c++ - 如何使我的类成员函数无法在 main 中调用？

> ID：15959941
> 
> 赞同：1
> 
> 时间：2013-04-11T22:25:56.687
> 
> 标签：c++, class, member, private-members

我正在为家庭作业编写一些课程，并且我希望我的课程成员函数不可能在 main 中被调用。如果是，我希望程序退出。我怎么知道我的成员函数何时被调用？至于类，每个对象代表一种颜色，格式为<100,200,215>。谢谢您的帮助！

```
class Color{

public:
    Color( unsigned red = 0, unsigned green = 0, unsigned blue = 0 );    //  ctor
    unsigned getRed() const;    //  accessor
    unsigned getGreen() const;    //  accessor
    unsigned getBlue() const;    //  accessor
    Color & setRed( unsigned red );    //  mutator
    Color & setGreen( unsigned green );    //  mutator
    Color & setBlue( unsigned blue );    //  mutator
    const Color & output() const;
private:
    unsigned myRed;
    unsigned myGreen;
    unsigned myBlue;
    static unsigned okColor(unsigned color);

}; //Class Color

int main(int argc, const char * argv[])
{

}

Color::Color( unsigned red, unsigned green, unsigned blue):
myRed(okColor(red)),myGreen(okColor(green)),myBlue(okColor(blue))
{
    //initialization list here...
}

//accessors
unsigned Color::getRed() const {return myRed;}
unsigned Color::getGreen() const {return myGreen;}
unsigned Color::getBlue() const {return myBlue;}

//mutators
Color & Color::setRed(unsigned red){
    myRed = okColor(red);
    return *this;
}

Color & Color::setGreen(unsigned green){
    myGreen = okColor(green);
    return *this;
}

Color & Color::setBlue(unsigned blue){
    myBlue = okColor(blue);
    return *this;
}

//output 
const Color & Color::output() const{

    cout << "<" << myRed << "," << myGreen << "," << myBlue << ">" << endl;
    return *this;
}

//checkers
unsigned Color::okColor(unsigned myColor){

    if (myColor > 255) {
        die("Color intensity is out of range!");
    }

    return myColor;
}

bool die(const string & msg){

    cerr << endl << "Fatal error: " << msg <<endl;
    exit(EXIT_FAILURE);
}

Color mixture( const Color & color0, const Color & color1, double weight){

    double color1Multiplier = 0;
    Color mixture;
    unsigned mixtureRed;
    unsigned mixtureBlue;
    unsigned mixtureGreen;

    color1Multiplier = 1 - weight;

    mixtureRed = (color0.getRed() * weight) + (color1.getRed() * color1Multiplier);
    mixtureBlue = (color0.getBlue() * weight) + (color1.getBlue() * color1Multiplier);
    mixtureGreen = (color0.getGreen() * weight) + (color1.getGreen() * color1Multiplier);

    mixture.setRed(mixtureRed);
    mixture.setBlue(mixtureBlue);
    mixture.setGreen(mixtureGreen);

    return mixture;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T22:29:49.567

防止从 main 调用您的类很简单。不要在`main`- 没有类 -> 无法调用成员函数（除非它们是静态的）中创建类。您还可以将`#include`类头文件移动到与`main`.

不幸的是，没有（琐碎和/或可移植的）方法来确定哪个函数调用了您的代码[特别是如果我们记住现代编译器经常移动代码，因此尽管您的代码是`mixture`从 main 调用的，编译器决定只是将其移入`main`，因为这使它更快，更小或编译器具有内联函数的任何其他目标]。

除此之外，没有办法阻止从任何有权访问该对象的函数调用函数。对于几乎每一个方面的功能，`main`都与其他功能没有什么不同。唯一的区别是`main`从 C++ 运行时库中调用。但是编译器并不真正关心您的函数是否被调用`main`,`kerflunk`或`fred`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T22:30:43.783

如果您创建一个全局对象，它将在 之前初始化，并在退出`main`后销毁。`main`

您可以使用此事实来设置标志并按照您的意愿行事。

# php - NGINX 更改位置块内的 phpMyAdmin 端口

> ID：15959945
> 
> 赞同：0
> 
> 时间：2013-04-11T22:26:09.470
> 
> 标签：php, linux, apache, nginx

我的[phpMyAdmin](http://en.wikipedia.org/wiki/PhpMyAdmin)设置如下。这是在站点可用和站点启用的默认服务器块内。

如何在不影响端口 80 功能的情况下将端口更改为位置块内或某处的 8003？

```
server{
    listen   80; ## listen for ipv4
    listen   [::]:80 default ipv6only=on; ## listen for ipv6

    [..........]

    location /phpmyadmin {
        root /usr/share/;
        index index.php index.html index.htm;
        location ~ ^/phpmyadmin/(.+\.php)$ {
            try_files $uri =404;
            root /usr/share/;
            fastcgi_pass 127.0.0.1:9000;
            fastcgi_index index.php;
            fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
            include /etc/nginx/fastcgi_params;
        }
        location ~* ^/phpmyadmin/(.+\.(jpg|jpeg|gif|css|png|js|ico|html|xml|txt))$ {
            root /usr/share/;
        }
    }
        location /phpMyAdmin {
           rewrite ^/* /phpmyadmin last;
        }

    [..........]

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T22:30:54.900

您不能在位置块中设置端口。这是没有意义的，因为在处理位置时客户端已经连接。不过，您可以创建一个新的服务器块，监听您想要的端口，并将有问题的位置块放入新的服务器块中。

# parsing - C# DateTime.Parse(someString)

> ID：15959950
> 
> 赞同：3
> 
> 时间：2013-04-11T22:26:38.130
> 
> 标签：parsing, datetime

我正在做一个项目，我得到以下时间和日期的字符串表示，即“格林威治标准时间 2013 年 4 月 11 日 00:02:52”。当我使用 DateTime.Parse() 方法时：

`DateTime dt= DateTime.Parse(dateString);`

`string text = dt.ToString("hh:mm:ss MMM dd, yyyy ").ToUpper();`

我的输出（文本）是：

“格林威治标准时间 2013 年 4 月 11 日**05**时 02 分 52 秒”

并不是

“格林威治标准时间 2013 年 4 月 11 日**00:02:52** ”

我不明白为什么小时 (HH) 已更改为 00 到 05。我多次通过 VS 跟踪我的代码。我所做的只是将月份截断，从 APRIL 到 APR。

有人可以告诉我我做错了什么或遗漏了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T22:34:45.660

尝试这个

```
string dateString = "00:02:52 APRIL 11, 2013 GMT";
DateTime dt = DateTime.Parse(dateString).ToUniversalTime(); 
```

# performance - 优化ResultSet迭代

> ID：15959953
> 
> 赞同：0
> 
> 时间：2013-04-11T22:26:52.817
> 
> 标签：performance

我有一个返回 92000 行的 SQL 查询，当我将 while 与 ResultSet.next() 一起使用时，它花费了很多时间。我发现问题的根源是迭代 ResultSet.next() 的条件。你知道我怎样才能提高性能并减少花费时间吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T22:34:17.523

ResultSet.next() 实际上适用于网络 undeneath 并与服务器通信，以便在您迭代之前的行后带来更多数据。

所以有两个提示：

1.  在结果查询中增加预取大小
2.  在数据库中创建索引。这将提高数据库性能，这将使

还请查看处理您的问题和获取大小的这两个链接：

*   [http://www.precisejava.com/javaperf/j2ee/JDBC.htm#JDBC112](http://www.precisejava.com/javaperf/j2ee/JDBC.htm#JDBC112)

    - [http://www.eclipse.org/eclipselink/api/2.3/org/eclipse/persistence/config/QueryHints.html#JDBC_FETCH_SIZE](http://www.eclipse.org/eclipselink/api/2.3/org/eclipse/persistence/config/QueryHints.html#JDBC_FETCH_SIZE)

增加获取大小意味着从数据库中获取数据的时间更少。结果集就像一个缓冲区，它获取 X 行并在您迭代它们后重新获取。

最后，您可以尝试使用线程，同时将一个查询拆分为 4-5 个查询，这些查询在单独的线程中同时完成。

# java - Java默认访问说明符可以在包外访问吗？

> ID：15959959
> 
> 赞同：0
> 
> 时间：2013-04-11T22:27:29.640
> 
> 标签：java

我尝试了以下程序，我知道我们可以访问默认/包级别的实例变量。

我想了解为什么它在java中被允许。

1.

```
package com.test;

class A {
    public int i = 10;
} 
```

2.

```
package com.test;

public class B extends A{
} 
```

3.

```
package com.child;

import com.test.B;

public class C extends B{

    public int getI(){
        return this.i;
    }

    public static void main(String[] args) {
        System.out.println(new C().getI());
    }
} 
```

我能够成功运行这个程序。我想了解的是如何从另一个包访问默认访问变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T22:28:41.103

因为它扩展了 B，而 B 又扩展了 A。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T22:50:18.133

B 从 A 继承所有公共成员，而不管 A 自己的可见性。这就是 C 也看到该成员的原因。

这当然是相当混乱的。根本问题是公共类扩展了非公共类。也许语言应该禁止这样做。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-11T22:30:07.313

有 4 种不同的访问级别：公共、私有、受保护和包私有。public 对所有东西都是可见的，甚至在包之外。Private 仅在课堂内可见。Protected 对类和所有扩展它的类都是可见的。Package-private 是默认值（当您不指定任何其他值时），它对一个包中的所有类可见，其中变量被初始化

# map - Astyanax地图数据访问cql3

> ID：15959961
> 
> 赞同：0
> 
> 时间：2013-04-11T22:27:44.390
> 
> 标签：map, cassandra, astyanax, cql3

我正在尝试使用 Astyanax 访问地图列类型。从我已经采取以下的例子。我正在循环这些行，并且可以从所有列中获取数据，除了具有数据类型 MAP 的列存储名称。我假设我需要遍历地图的元素以将数据放入我的对象中，但我不知道如何从列中获取地图数据。

我正在尝试 column.getValue 并尝试过 getByteBuffer 但都无法正常工作。我可以获得一个列对象，我看到有一个 ColumnMap 接口，但我不知道如何将数据放入扩展或使用它的对象中。我还看到了一个 MapSerializer 接口，但不知道如何实现它......

```
 List<Store> stores = new ArrayList<Store>();

        for (Row<Integer, String> row : result.getResult().getRows()) {

            Store store = new Store();

            ColumnList<String> columns = row.getColumns();

            store.setStoreID(columns.getStringValue("store_id", null));
            store.setShopName(columns.getStringValue("shopname", null));

            // lost trying to get the columns Map data here
            // should I loop the map or pass the data straight to my store object as a map?
            // How do I access the map data in this column?
            for ( Map<String, String> map : columns.getValue("storename", imap, result).getResult() )
            {
                store.setStoreNames( "lang", "storename");
            }

            stores.add(store);
        } 
```

我对 getValue() 有点困惑，因为它需要一个 Serializer 作为它的第二个参数和一个默认值作为它的第三个参数。如何将 MapSerializer 作为第二个参数传递，或者我什至应该使用 getValue() 方法？默认值是 Map 中的键值吗？如果我想返回地图中的所有值，那该怎么办？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T15:11:26.287

最后，这对我有用。而且我能够使用[此处提供的循环地图技术来循环地图中的条目。](https://stackoverflow.com/questions/46898/how-do-i-iterate-over-each-entry-in-a-map)

```
Map<String, String> map = columns.getValue("storename", 
                    new MapSerializer<String, String>(UTF8Type.instance, UTF8Type.instance)
                    , new HashMap<String ,String>()); 
```

# android - ludo游戏中的android图像动画

> ID：15959968
> 
> 赞同：0
> 
> 时间：2013-04-11T22:28:04.003
> 
> 标签：android, animation, imageview

我有一个 Ludo 板的布局，我想根据骰子的数量移动我的令牌。比如如果骰子卷数是 6，我们将点击哪个图像视图应该移动 6，如果它是 4，那么根据 Ludo 板移动 4 个位置。我的问题是我们如何固定所有棋盘位置，以便我们的代币根据骰子数移动。这是我的活动

```
public void onCreate( Bundle savedInstanceState )
{
    super.onCreate( savedInstanceState );
    setContentView( R.layout.first_page );

    ImageView iv = new ImageView(this);
   iv.setImageResource(R.drawable.token);

    rollerButton = (Button)findViewById( R.id.rolldice );
    image = (ImageView) findViewById(R.id.dice);
    board = (ImageView) findViewById(R.id.board);

    rollerButton.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            switch(v.getId())
            {
            case R.id.rolldice:
                Log.d("clicked", "button");
                startAnimation(image);

            }

        }
    });

    board.setOnTouchListener(new OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            //Choose which motion action has been performed

            switch(event.getAction())
            {
            case MotionEvent.ACTION_DOWN:
                //Get X, Y coordinates from the ImageView
                X = (int) event.getX();
                Y = (int) event.getY();

                position1=new ArrayList<Integer>();

                position1.add(X);
                position1.add(Y);

                for(int i=0;i<position1.size();i++)
                {
                    position1.get(i);
                }

                Log.d("X COordinate",""+X);
                Log.d("Y COordinate",""+Y);

                break;
            case MotionEvent.ACTION_MOVE:
                break;
            case MotionEvent.ACTION_UP:
                break;
            }
            return true;
        }
});

}

public void startAnimation(View view) {

    switch (view.getId()) {

    case R.id.dice:

        Animation animation = new TranslateAnimation(0, 100,0, -100);
        animation.setDuration(1500);
        animation.setFillBefore(true);
        image.startAnimation(animation);
        image.setVisibility(0);
        break;      

    default:
        break;
    }

}

@Override
public void onAnimationEnd(Animation animation) {
    // TODO Auto-generated method stub

}

@Override
public void onAnimationRepeat(Animation animation) {
    // TODO Auto-generated method stub

}

@Override
public void onAnimationStart(Animation animation) {
    // TODO Auto-generated method stub

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T22:31:22.780

您可以为所有位置创建一个坐标 x,y 的二维数组类，并在 imageview 中使用动画。然后调用将根据该类的索引。

# c# - 数据模板内的数据模板

> ID：15959971
> 
> 赞同：0
> 
> 时间：2013-04-11T22:28:30.057
> 
> 标签：c#, wpf

我是wpf的新手，我一直有这个问题......

我想在我的视图中显示一个“复杂”对象，名为 WeeklySchedule 的复杂对象：

有一个“班次”列表

```
public class WeeklySchedule
{
    public virtual IEnumerable<Shift> Shifts { get; set; }
    .....
}

public class Shift
{
    public virtual String EntryTime { get; set; }
    public virtual String ExitTime { get; set; }
    .....
} 
```

我使用两个数据模板来尝试显示这些对象中的内容：

```
<DataTemplate x:Key="ShiftlistViewTemplate" DataType="viewModel:WorkScheduleViewModel">
            <TextBox Text="{Binding EntryTime}"/>
            <TextBox Text="{Binding ExitTime}"/>
        </DataTemplate>

        <DataTemplate x:Key="WeeklySchedulelistViewTemplate"
                      DataType="viewModel:WorkScheduleViewModel">
                    <ListView x:Name="ShiftListView" 
                              Grid.Column="0"
                              ItemTemplate="{StaticResource ShiftlistViewTemplate}" 
                              ItemsSource="{Binding Shifts}"
                              SelectedItem="{Binding SelectedShift, Mode=TwoWay}"/>
       </DataTemplate> 
```

在视图模型中：

```
public class ViewModel : WorkspaceViewModel
{
     public Shift SelectedShift
    {
        get
        {
            return _selectedShift;
        }

        set
        {
            if (_selectedShift == value)
            {
                return;
            }

            _selectedShift = value;
            RaisePropertyChanged(SelectedShiftPropertyName);
        }
    }
     public ObservableCollection<WorkSchedule> WorkSchedules
     {
        get
        {
            return _workSchedules;
        }

        set
        {
            if (_workSchedules == value)
            {
                return;
            }

            _workSchedules = value;
            RaisePropertyChanged(WorkSchedulePropertyName);
        }
     }

    public ObservableCollection<Shift> Shifts
    {
        get
        {
            return _shifts;
        }

        set
        {
            if (_shifts == value)
            {
                return;
            }

            _shifts = value;
            RaisePropertyChanged(ShiftPropertyName);
        }
} 
```

当我运行它时，我得到这个绑定错误：

```
System.Windows.Data Error: 40 : BindingExpression  path error: 'SelectedShift' property 
not found on 'object' ''WeeklySchedule' (HashCode=7843366)'. 
BindingExpression:Path=SelectedShift; DataItem='WeeklySchedule' (HashCode=7843366);
 target element is 'ListView' (Name=''); target property is 'SelectedItem' (type 'Object') 
```

我真的不明白这么多错误，是不是试图在 WeeklySchedule 类中找到属性 SelectedShift ？

我试图让它尽可能清楚......有什么想法吗？，在此先感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T23:05:23.250

您`DataTemplate` `DataContext`的类型是`WorkScheduleViewModel`，并且`SelectedShift`不存在于`WorkScheduleViewModel`. 所以你必须`ListViews` `DataContext`将`ViewModel`

像这样的东西应该工作

```
 <ListView  x:Name="ShiftListView" 
              DataContext="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ViewModel}}}"
              Grid.Column="0"
              ItemTemplate="{StaticResource ShiftlistViewTemplate}" 
              ItemsSource="{Binding Shifts}"
              SelectedItem="{Binding SelectedShift, Mode=TwoWay}"/> 
```

# unit-testing - Fluent nHibernate 单元测试 HasOne 映射

> ID：15959974
> 
> 赞同：0
> 
> 时间：2013-04-11T22:29:00.383
> 
> 标签：unit-testing, c#-4.0, fluent-nhibernate, fluent-nhibernate-mapping, has-one

我有需要一对一关系的情况，因此使用`HasOne`. 是的，我确实想为`Patrons`and提供单独的表格`Members`。以下是我的类及其对应的映射类。

```
public class Member
{
    public virtual string ID { get; set; }
    public virtual bool IsRegistered { get; set; }
    public virtual Patron Patron { get; set; }
    public virtual string Reference1 { get; set; }
    public virtual string Reference2 { get; set; }        
}

public class Patron
{
    public virtual string ID { get; set; }
    public virtual string FirstName { get; set; }
    public virtual string LastName { get; set; }
    public virtual string Address { get; set; }
    public virtual int Telephone1 { get; set; }
    public virtual int Telephone2 { get; set; }
    public virtual int Age { get; set; }
    public virtual string Occupation { get; set; }
    public virtual string Gender { get; set; }
    public virtual string Room { get; set; }
}

public class PatronMap : ClassMap<Patron>
{
    public PatronMap()
    {
        Id(x => x.ID);
        Map(x => x.FirstName);
        Map(x => x.LastName);
        Map(x => x.Gender);
        Map(x => x.Age);
        Map(x => x.Address);
        Map(x => x.Occupation);
        Map(x => x.Telephone1);
        Map(x => x.Telephone2);
        Map(x => x.Room);
        Table("Patrons");
    }
}

public class MemberMap : ClassMap<Member>
{
    public MemberMap()
    {
        Id(x => x.ID);
        HasOne(x => x.Patron).PropertyRef(x => x.ID).Constrained();
        Map(x => x.Reference1);
        Map(x => x.Reference2);
        Map(x => x.IsRegistered);
        Table("Members");
    }
 } 
```

我还有一个小测试，如下所示，看看这些东西是否正确映射。

```
 [TestMethod]
    public void MemberMap_Create_Success()
    {
        new PersistenceSpecification<Member>( Database.Session, new CustomEqualityComparer() )
        .CheckProperty(x => x.ID, "1")
        //I'm not quite sure about the following mapping check. How do I do HasOne check here? :-(
        .CheckReference(x => x.Patron, new Patron()
        {
            ID = "2",
            FirstName = "Foo",
            LastName = "Bar",
            Gender = "M",
            Age = 59,
            Address = "City, Coutnry",
            Telephone1 = 0123456789,
            Telephone2 = 0987654321,
            Occupation = "Learning Fluent nHibernate",
            Room = "Somewhere"
        })
        .CheckProperty(x => x.Reference1, "Ref1")
        .CheckProperty(x => x.Reference2, "Ref2")
        .CheckProperty(x => x.IsRegistered, true)
        .VerifyTheMappings();
    } 
```

我不确定如何在此测试中测试 HasOne 映射属性。任何帮助表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T21:26:49.357

以下是我为实现`HasOne`映射和单元测试所做的工作。地图如下：

```
public class PatronMap : ClassMap<Patron>
{
    public PatronMap()
    {
        Id(x => x.ID);
        Map(x => x.FirstName);
        Map(x => x.LastName);
        Map(x => x.Gender);
        Map(x => x.Age);
        Map(x => x.Address);
        Map(x => x.Occupation);
        Map(x => x.Telephone1);
        Map(x => x.Telephone2);
        Map(x => x.AshramRoom);
        HasOne(x => x.Member).ForeignKey();
        Table("Patrons");
    }
}

public class MemberMap : ClassMap<Member>
{
    public MemberMap()
    {
        Id(x => x.ID);
        Map(x => x.IsRegistered);
        Map(x => x.Reference1);
        Map(x => x.Reference2);
        References(x => x.Patron)
            .Column("PatronID")
            .Unique()
            .UniqueKey("IDX_UniquePatronID");
        Table("Members");
    }
} 
```

单元测试是这样的：

```
public void MemberMap_Create_Success()
{
    new PersistenceSpecification<Member>( Database.Session, new CustomEqualityComparer() )
    .CheckProperty(x => x.ID, "1")
    .CheckReference(x => x.Patron, new Patron()
    {
        ID = "2",
        FirstName = "Abc",
        LastName = "Xyz",
        Gender = "M",
        Age = 99,
        Address = "Address",
        Telephone1 = 0000000001,
        Telephone2 = 1000000000,
        Occupation = "Occupation",
        AshramRoom = "Room"
    })
    .CheckProperty(x => x.Reference1, "Ref1")
    .CheckProperty(x => x.Reference2, "Ref2")
    .CheckProperty(x => x.IsRegistered, true)
    .VerifyTheMappings();
} 
```

希望这可以帮助某人。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-18T14:04:14.827

我知道已经有一段时间了，但如果有帮助的话。

您可以使用：

```
var patrol = new Patron()
    {
        ID = "2",
        FirstName = "Foo",
        LastName = "Bar",
        Gender = "M",
        Age = 59,
        Address = "City, Coutnry",
        Telephone1 = 0123456789,
        Telephone2 = 0987654321,
        Occupation = "Learning Fluent nHibernate",
        Room = "Somewhere"
    };

...

    .CheckReference(x => x.Patron, patrol)
    .CheckProperty(x => x.Reference1, patrol)
    .CheckProperty(x => x.Reference2, patrol) 
```

请参阅：[https ://github.com/jagregory/fluent-nhibernate/wiki/Persistence-specification-testing](https://github.com/jagregory/fluent-nhibernate/wiki/Persistence-specification-testing)

# postgresql - 大数据集上的空间连接查询优化

> ID：15959977
> 
> 赞同：3
> 
> 时间：2013-04-11T22:29:02.980
> 
> 标签：postgresql, join, query-optimization, postgis, greenplum

我有一个用例，其中两组数据与一个昂贵的空间谓词相连。为了使查询并行化，我将空间宇宙划分为瓦片（以数千为单位），这样只有属于同一瓦片的记录才需要使用空间谓词进行测试。查询如下：

```
SELECT ST_Area(ST_Intersection(A.polygon, B.polygon))
    / ST_Area(ST_Union( A.polygon, B.polygon))  AS a_ratio
FROM spatial_table_a A
JOIN spatial_table_b B ON ST_Intersects(A.polygon, B.polygon)
WHERE A.tilename = B.tilename; 
```

理想情况下，查询计划应该根据 对记录进行散列，然后使用索引扫描连接或嵌套循环连接`tilename`执行空间谓词检查。`ST_Intersects`

但是，我现在得到的是一个过早执行空间连接的次优计划。该计划如下图所示：

```
->  Hash Join  (cost=759468.44..377874772.26 rows=2610 width=18)
         Hash Cond: "outer"."?column4?" = "inner"."?column4?"
             Join Filter: a.polygon && b.polygon AND _st_intersects(a.polygon, b.polygon)
             ->  Seq Scan on spatial_table_b b  (cost=0.00..409556.95 rows=288816 width=1034)
             ->  Hash  (cost=375827.86..375827.86 rows=283522 width=946)
                   ->  Seq Scan on spatial_table_a a  (cost=0.00..375827.86 rows=283522 width=946) 
```

所以，我的问题是：如何强制查询优化器生成更好的计划（这基本上改变了连接顺序）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T11:58:40.483

怎么样：

```
SELECT ST_Area(ST_Intersection(a, b))
    / ST_Area(ST_Union( a, b))  AS a_ratio
FROM
(
 SELECT a.polygon AS a, b.polygon AS b
 FROM  spatial_table_a A
 JOIN spatial_table_b B 
   ON A.tilename = B.tilename
 OFFSET 0
) AS q
WHERE ST_Intersects(a, b); 
```

这应该强制查询计划器首先连接 tilename 上的两个表，然后才检查两个多边形是否相交。这将为您提供不同的查询计划，但我不确定它是否是您正在寻找的查询计划。

# ruby - 在 Ruby-解析目录并读取文件的第一行

> ID：15959978
> 
> 赞同：2
> 
> 时间：2013-04-11T22:29:05.437
> 
> 标签：ruby, fileparsing

下面是一段应该读取目录的代码，并为每个文件条目打印文件的第一行。问题是 x 不可见，因此未解析文件。

```
Dir.foreach("C:/fileload/src") do |file_name|
  x = file_name
  puts x
  f = File.open("C:/fileload/src/" +x)
  f.readlines[1..1].each do |line| 
    puts line 
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T22:37:53.793

你为什么分配`x`给`file_name`? 你可以`file_name`直接使用。如果您只阅读文件的第一行，为什么不试试这个呢？

```
#!/usr/bin/ruby

dir = "C:/fileload/src"
Dir.foreach(dir) do |file_name|
    full = File.join(dir, file_name)
    if File.file?(full)
        f = File.open(full)
        puts f.first
        f.close
    end
end 
```

您应该使用[File.join](http://ruby-doc.org/core-2.0/File.html#method-c-join)在 Ruby 中安全地组合路径。我还检查了您是否正在使用[File.file 打开文件？](http://ruby-doc.org/core-2.0/File.html#method-c-file-3F)方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T23:18:13.733

您对`x`. 您应该使用[`File::join`](http://www.ruby-doc.org/core-2.0/File.html#method-c-join)或[`Pathname#+`](http://www.ruby-doc.org/stdlib-2.0/libdoc/pathname/rdoc/Pathname.html#method-i-2B)构建您的文件路径。您应该将非文件排除在考虑之外。您正在选择第二行，而不是使用`[1..1]`. 这是您的示例代码的更清洁的正确替换。

```
dir = "C:/fileload/src"
Dir.foreach(dir).
map    { |fn| File.join(dir,fn) }.
select { |fn| File.file?(fn) }.
each   { |fn| puts File.readlines(fn).first } 
```

# ios - 在 UIView 上调用 setFrame 后是否必须显式调用 setNeedsDisplay？

> ID：15959979
> 
> 赞同：2
> 
> 时间：2013-04-11T22:29:05.730
> 
> 标签：ios, uiview

如下情况所示，是否必须在调用后显式调用`setNeedsDisplay`？`setFrame``UIView`

```
view1.frame = frame;
[view1 setNeedsDisplay];

[view2 setFrame:frame]; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-11T22:35:21.100

简短的回答：**没有**

您`setNeedsDisplay`在需要调用方法时`drawRect`调用，并根据`UIView Class Reference`.-

> 更改框架矩形会自动重新显示接收器，而无需调用 drawRect: 方法。如果您希望在框架矩形更改时调用 drawRect: 方法，请将 contentMode 属性设置为 UIViewContentModeRedraw。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-13T09:24:32.133

答案是Yes和No都取决于情况，

**案例1**。如果您通过覆盖自定义视图（即 UIView 的子类）中的 drawRect 方法来绘制某些东西，那么您将需要调用 setNeedsDisplay，否则该绘图或该图案将根据新框架被拉伸并且看起来很糟糕。**如果要重绘，请调用 setNeedsDisplay。**

**案例 2**。如果你画的东西看起来很好，即使它被拉伸了，我认为这是一种罕见的可能性，

或者你根本不覆盖drawRect，**那么你不需要调用setNeedsDisplay。**

# android - Android 测试：如何在创建活动之前更改应用程序？

> ID：15959995
> 
> 赞同：1
> 
> 时间：2013-04-11T22:30:07.003
> 
> 标签：android, android-testing

在编写 android 测试用例时，如何在创建 Activity 之前在我的应用程序对象上调用一些方法？我的测试类扩展了 ActivityInstrumentationTestCase2。

我尝试过的一些事情是

*   **寻找我的测试用例可以覆盖的方法**。我没有看到一个。
*   **创建一个扩展应用程序活动的测试活动**。如果不将测试活动添加到真实应用程序的清单中，我认为我无法做到这一点。
*   **在我的测试的 setUp() 方法中获取应用程序**。如果不先创建活动，我找不到任何访问应用程序的方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T23:33:09.937

你不能做你想做的事。ActivityInstrumentationTestCase2 并非设计用于执行此操作。在创建 Activity 对象之前，您需要像 Robotium 这样可以首先调用您的 Application 对象的东西。

ActivityInstrumentationTestCase2，除少数情况外，旨在测试Activity*内*的事物，而不是测试其与 Activity 外事物的交互。Android 中的单元测试并不完美。

我也质疑为什么你需要应用程序的东西。每当有人提到应用程序时，我的脑海中就会出现警告灯。我很少看到使用 Application 的代码，而且 90% 的时间开发人员应该使用其他东西。

# asp.net - 使用sql server的asp.net登录网页

> ID：15959997
> 
> 赞同：0
> 
> 时间：2013-04-11T22:30:07.067
> 
> 标签：asp.net, sql-server, login

我卡在我的登录页面..我的按钮点击事件如下：

```
protected void Button1_Click(object sender, EventArgs e)         
{               
    string cs = "Data Source=ims-aab46237892;Initial Catalog=Inventory;Integrated          Security=True";                      

    string SelectString = "SELECT COUNT(*) FROM user WHERE username = @Username AND password = @Password";           

    SqlConnection con = new SqlConnection(cs);         
    SqlCommand cmd = new SqlCommand(SelectString,con);         
    cmd.Connection = con;         
    cmd.CommandType = CommandType.Text;         
    cmd.CommandText = SelectString;          

    SqlParameter username = new SqlParameter("@Username",SqlDbType.VarChar,50);                   
    username.Value = TextName.Text.Trim().ToString();                   
    cmd.Parameters.Add(username);           

    SqlParameter password = new SqlParameter("@Password", SqlDbType.VarChar, 50);                      
    password.Value = TextPass.Text.Trim().ToString();                      

    cmd.Parameters.Add(password);                      
    con.Open();  

    if(cmd.ExecuteScalar() != null)                 
        Response.Redirect("Home.aspx");            
     else                
        Response.Redirect("wrongpasspage.aspx");              

    con.Close(); 
} 
```

并且我的数据表具有所需的用户名和密码字段..我得到的错误是关键字用户附近的语法不正确...请帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T22:32:38.210

user 是 SQL Server 中的保留关键字。尝试 [user] 或将您的表重命名为 Users。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T22:33:18.463

在 SelectString 语句中使用 [user] 而不是 user。

# image - Auto Set WP Image 根据数据绑定的 Source 控制高度和宽度

> ID：15959999
> 
> 赞同：1
> 
> 时间：2013-04-11T22:30:12.393
> 
> 标签：image, windows-phone-7, data-binding

我有一个 WP 应用程序，我想在其中显示一个图像列表，这些图像数据绑定到从 Web 服务填充的 observablecollection。我希望图像列表以与检索它们的位置相同的高度和宽度显示。那么，如何让图像控件根据数据绑定源自动调整其高度和宽度。

使用以下代码，图像不会显示。

```
 <Grid x:Name="LayoutRoot">
    <Image Source="{Binding AlbumPicture}" Stretch="Fill" Width="Auto" Height="Auto"/>
  </Grid> 
```

以下工作，但每个图像的高度和宽度都不同。所以，它们看起来不太好。

```
 <Grid x:Name="LayoutRoot">
    <Image Source="{Binding AlbumPicture}" Stretch="Fill" Width="200" Height="120"/>
  </Grid> 
```

我尝试了以下方法，但没有奏效。

*   设置 Stretch="None"

*   Databind Image 控件的Height, Width 属性使用下面的图像的那些并且height 和width 始终为0。

    ```
     BitmapImage bmp = new BitmapImage(new Uri(updatedAlbum.AlbumPicture, UriKind.RelativeOrAbsolute));
     album.AlbumHeight = bmp.PixelHeight;
     album.AlbumWidth = bmp.PixelWidth; 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T06:31:02.360

此代码仅在加载图像后才有效。

```
 album.AlbumHeight = bmp.PixelHeight;
 album.AlbumWidth = bmp.PixelWidth; 
```

您只需等待它，然后将此值绑定（或直接设置）到您的图像控件。

例如，您可以使用方法

```
<Image x:Name="img" ImageOpened="Img_OnImageOpened"/>

private void Img_OnImageOpened(object sender, RoutedEventArgs e)
{
    //start from here to set width and height.
    //you can do it directly, or by the Binding
} 
```